# StackOverflow 问答 13717000-13717999

# android - Django 和安卓

> ID：13717000
> 
> 赞同：0
> 
> 时间：2012-12-05T05:40:25.727
> 
> 标签：android, django

我必须构建一个基于 python（基于服务器）的 HR 系统，具有以下功能：

管理员可以添加/编辑/删除员工。

员工可以标记他们的入住/退房时间。

可以标记他们将休假的日子。

另外，我必须构建一个集成到上述系统的移动应用程序，并允许员工从应用程序中标记出勤率。

关于如何做的任何建议？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:32:36.387

您可以尝试使用 django-tastypie 在您的网络和移动应用程序之间构建 rest-api

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:59:19.073

查看文档：[https ://docs.djangoproject.com/en/1.3/](https://docs.djangoproject.com/en/1.3/)

# c++ - 出现奇怪的错误.. Microsoft C++ 异常：内存位置 0x002cf6 处的 std::out_of_range

> ID：13717001
> 
> 赞同：0
> 
> 时间：2012-12-05T05:40:25.593
> 
> 标签：c++, vector, outofrangeexception

好的..所以我正在使用 C++ 编写此代码。代码如下..

```
#include <iostream>
#include <ctime>
#include <string>
#include <vector>
using namespace std;

vector<int> makePerson(int n)
{
vector<int>person;
for(int i=0;i<3;i++)
{
    person.push_back(rand()%255+1);
}
return person;
}    

vector<vector<int> > makeGeneration(int n)
{
vector<vector<int> > generation;
for(int i=0;i<n;i++)
{
    generation.push_back(makePerson(i));
}
return generation;
}

vector<int> createChild(vector<vector<int> > &parentGeneration, double mutationRate)
{
    int maleParent  = (rand()%parentGeneration.size())+1;
int femaleParent = (rand()%parentGeneration.size())+1;
bool checkGender = true;
while(checkGender)
{
    if(maleParent==femaleParent)
    {
        checkGender = true;
    }
    else
    {
        checkGender = false;
        break;
    }
}

vector<int> child;
vector<int> temp;
for(int i=0;i<3;i++)
{
    temp.push_back(parentGeneration.at(maleParent).at(i));
    temp.push_back(parentGeneration.at(femaleParent).at(i));
}

for(int i=0;i<3;i++)
{
    child.push_back(temp.at((rand()%3)+1));
}

temp.clear();

for(int i=0;i<3;i++)
{
    if((mutationRate*100) > (rand()%100)+1)
    {
        child.at(i)=(rand()%255)+1;
    }
}
return child;
}    

int main()
{
int N,k,g;
N=1000;
k=2;
double m=0.05;
double d=0.05;
srand(static_cast<unsigned int>(time(0)));
vector<vector<int> > parentGeneration;
vector<vector<int> > childGeneration;
parentGeneration = makeGeneration(N);

    for(int i=0;i<parentGeneration.size();i++)
{
    for(int j=0;j<3;j++)
    {
        cout<<parentGeneration.at(i).at(j)<<endl;
    }
    cout<<endl;
}

cout<<"reach"<<endl;
for(int i=0;i<(1000);i++)
{
    childGeneration.push_back(createChild(parentGeneration,m));
}

cout<<"***CHILD GENERATION***"<<endl;

for(int i=0;i<childGeneration.size();i++)
{
    for(int j=0;j<3;j++)
    {
        cout<<childGeneration.at(i).at(j)<<endl;
    }
    cout<<"i="<<i<<endl;
    cout<<endl;
}
return 0;
} 
```

所以，错误是：

1.  Microsoft C++ 异常：内存位置 0x002cf6c4 处的 std::out_of_range。
2.  运行时检查失败 #0 - ESP 的值未在函数调用中正确保存。这通常是使用函数指针 dec 调用使用一种调用约定声明的函数的结果

我认为这是向量和随机生成器的一些问题，因为这个错误是随机的。它有时会工作到 1000 点，有时会在两者之间停止。

有什么建议么。真急。。

PLEASEEEE 非常感谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:51:59.317

我在代码中遇到了类似的问题。我最终决定使用 Microsoft 的应用程序验证程序，它使我能够在问题上归零。找到 Application Verifier 并下载它。然后运行 ​​C:\Windows\System32 文件夹中的可执行 appverifier.exe。选择您的可执行文件并启用内存检查。然后像往常一样在 Visual Studio 中运行您的代码，它应该会跳到问题所在的位置或附近。它不会为您完成所有工作，但如果您知道自己的代码，它肯定会有所帮助。

# android - 如何使用共享首选项存储和检索日期？

> ID：13717003
> 
> 赞同：0
> 
> 时间：2012-12-05T05:40:37.373
> 
> 标签：android, sharedpreferences, android-edittext

![一个简单的任务剩余布局](../Images/c7e8c461b794f051b7829f45dace93c1.png)

一个简单的任务剩余应用程序。我必须使用共享首选项在此应用程序中保存和检索三个编辑文本值。

哪个存储选项最适合此应用程序，1.共享首选项 2.内部存储

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:43:55.170

完整示例：

```
package com.example.logindemo;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class LoginPage extends Activity {

    EditText name = null, pwd = null;
    SharedPreferences login_pref = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login_page);
        name = (EditText) findViewById(R.id.name_edt);
        pwd = (EditText) findViewById(R.id.pwd_edt);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_login_page, menu);
        return true;
    }

    public void loginMethod(View v) {
        login_pref = this.getSharedPreferences("login_pref",
                MODE_WORLD_READABLE);
        SharedPreferences.Editor login_pref_editor = login_pref.edit();
        login_pref_editor.putString("Name", name.getText().toString());

        login_pref_editor.commit();
        startActivity(new Intent(this, WelcomeScreen.class));
    }
} 
```

希望能帮助到你。我觉得共享偏好会是更好的方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:45:09.183

存储

```
EditText Task = (EditText)findViewById(R.id.ettask);
EditText date = (EditText)findViewById(R.id.etdate);
EditText time = (EditText)findViewById(R.id.ettime);

String taskstr = Task.getText().toString();
String datestr= date .getText().toString();
String timestr= time .getText().toString();

SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
Editor edit = preferences.edit();
edit.putString("pref_task", taskstr); 
edit.putString("pref_date", datestr);
edit.putString("pref_date", timestr); 
edit.commit(); 
```

检索

```
 pref_task =  preferences.getString("pref_task", "n/a");
 pref_date =  preferences.getString("pref_date","n/a");
 pref_time =  preferences.getString("pref_date","n/a"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:47:46.323

使用下面的代码将数据存储到 SharedPreferences 中。

```
SharedPreferences myPrefs = PreferenceManager.getDefaultSharedPreferences(this);
Editor editor = myPrefs.edit();
editor.putString("Date", mEdttxtDate.getText().toString()); 
editor.commit(); 
```

从 SharedPreferences 中检索数据。

```
SharedPreferences myPrefs = PreferenceManager.getDefaultSharedPreferences(this);
String mDate =  myPrefs.getString("Date","nothing"); 
```

它会解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T05:49:28.707

用于插入

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);

Editor edit = preferences.edit();
edit.putString("pref_empId", _empid);
edit.putString("pref_userType", _usertype);
edit.commit(); 
```

获取共享偏好

```
pref_empId =  preferences.getString("pref_empId","n/a");
pref_userType =  preferences.getString("pref_userType","n/a"); 
```

# three.js - Phong Shader材质参数/设置定义

> ID：13717006
> 
> 赞同：3
> 
> 时间：2012-12-05T05:40:52.840
> 
> 标签：three.js

我目前正在自定义基础 phong 材质，并使用`THREE.ShaderMaterial`三个 js 的大部分基础块和自定义片段着色器块重建材料。我遇到的问题是`#define's`three.js 的许多部分，并试图找到设置它们的正确方法。

在实际程序中是这样的

```
// Clone the uniforms
var uniforms = THREE.UniformsUtils.clone(shader['uniforms']);

// Set uniform values
uniforms["map"].value = texture;
uniforms["diffuse"].value = new THREE.Color( 0xff0000 );
uniforms["envMap"].value = envMapt;
uniforms["reflectivity"].value = 0.7;

// Create material using shader
var material = new THREE.ShaderMaterial( {
  vertexShader: shader['vertexShader'],
  fragmentShader: shader['fragmentShader'],
  uniforms: uniforms,
  lights: true,
  //map: true, // These don't  seem to do anything
  //envMap: true // These don't  seem to do anything
} ); 
```

使用这样构建的自定义着色器

```
 fragmentShader: [

        "#define USE_MAP",
        //"#define USE_ENVMAP",
        "uniform vec3 diffuse;",
        "uniform float opacity;",

.......
        "void main() {",

            THREE.ShaderChunk[ "alphatest_fragment" ],
            THREE.ShaderChunk[ "specularmap_fragment" ],
......

            // NDJ - Using custom frag shader
            //THREE.ShaderChunk[ "lights_phong_fragment" ],
            CustomShaderChunk[ "lights_phong_fragment" ],
......

            THREE.ShaderChunk[ "fog_fragment" ],

        "}"

    ].join("\n") 
```

通过在着色器的开头手动添加所需的#defines，我可以让它做我想做的事。然而，这似乎不是设置它的正确方法，而且它不是很灵活。

[与此类](https://github.com/mrdoob/three.js/issues/2412)似的东西，但我只需要基本定义。我已经尝试通过 api 和示例来查找如何设置这些，但似乎无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:58:09.467

完全按照你的描述去做。这是一个示例：

```
ph = new THREE.MeshPhongMaterial( { ambient: 0x000000,
                    color: 0x0020ff,
                    specular: 0x2040ff,
                    shininess: 30,
                    map: theMap,
                    side: THREE.DoubleSide } );
ph.defines = {waldo_waldo_three: '(dx+3)', wonke: 7}; 
```

如果您要谨慎，请注意覆盖任何现有的“定义”对象

# iphone - UITextField - 圆角问题

> ID：13717007
> 
> 赞同：26
> 
> 时间：2012-12-05T05:40:59.080
> 
> 标签：iphone, objective-c, ios, ios5, uitextfield

我提出了我面临的问题。我正在以`UITextField`编程方式创建如下。

```
UItextField *mobileNumberField = [[UITextField alloc] initWithFrame:CGRectMake(10, 195, 300, 41)];
mobileNumberField.delegate = self;
mobileNumberField.borderStyle = UITextBorderStyleRoundedRect;
[mobileNumberField.layer setCornerRadius:14.0f];
mobileNumberField.placeholder = @"Mobile Number";
[self.paymentsHomeView addSubview:mobileNumberField]; 
```

输出是附加的图像。

![在此处输入图像描述](../Images/db766467bafb9ee6c8380b63ffc4c483.png)

我不知道为什么它会在角落里破裂。帮助我修复我的文本字段，如下图所示。

![在此处输入图像描述](../Images/2af19d5cbfbdee10e0bb990d5ce65f4f.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-05T05:52:02.040

只需删除此行...

```
mobileNumberField.borderStyle = UITextBorderStyleRoundedRect; 
```

并添加此代码也..

```
 [mobileNumberField setBackgroundColor:[UIColor whiteColor]];
    [mobileNumberField.layer setBorderColor:[UIColor grayColor].CGColor];
    [mobileNumberField.layer setBorderWidth:1.0]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-05T05:44:04.553

在下面更新您的喜欢。

```
 UITextField *mobileNumberField = [[UITextField alloc] initWithFrame:CGRectMake(10, 195, 300, 41)];
    mobileNumberField.delegate = self;
    mobileNumberField.layer.borderWidth = 1.0f;
    mobileNumberField.layer.borderColor = [UIColor lightGrayColor].CGColor;
    mobileNumberField.
//    mobileNumberField.borderStyle = UITextBorderStyleRoundedRect;
    [mobileNumberField.layer setCornerRadius:14.0f];
    mobileNumberField.placeholder = @"Mobile Number";
    [self.paymentsHomeView addSubview:mobileNumberField]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-06-28T10:31:50.553

```
textField.layer.cornerRadius=textfield.frame.size.height/2;

textField.clipsToBounds=YES; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-23T04:58:01.440

切角的原因是因为文本字段有一个封闭的视图。当您设置角半径时，适用于该视图，因此内部文本字段的角似乎被切割 - 实际上它们甚至没有改变。

解决办法是把`UITextField`里面`UIView`，设置textfieldborderstyle为none。然后将边框和角半径规范应用于 uiview。请注意边框颜色，它与 UITextField 边框颜色非常接近，如果不相同的话。

截至撰写时，已在 Xcode 7.3.1、Swift 2.2、iOS 8 和 9 中测试并运行。

迅速：

```
textField.borderStyle = UITextBorderStyle.None
textBorderView.layer.cornerRadius = 5
textBorderView.layer.borderWidth = 1
textBorderView.layer.borderColor = UIColor.lightGrayColor().colorWithAlphaComponent(0.2).CGColor 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-06-12T17:55:58.913

以下代码在 Swift 5、XCode 11.4 中为我提供了以下结果。
绝对可以添加更多的花里胡哨。我认为这个好的MVP

```
 naviTextField = UITextField.init(frame: CGRect(x: 0, y: 0, width: (self.navigationController?.navigationBar.frame.size.width)!, height: 21))
    self.navigationItem.titleView = naviTextField
    naviTextField.becomeFirstResponder()
    naviTextField.placeholder = "Type target name here"
    naviTextField.borderStyle = .roundedRect
    naviTextField.layer.cornerRadius = 5.0
    naviTextField.textAlignment = .center 
```

[![结果](../Images/2b575a9c73c525a7257832293c98fbb8.png)](https://i.stack.imgur.com/zyGyA.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-05T06:03:14.140

这是您的问题的解决方案

```
UITextField * txtField = [[UITextField alloc]initWithFrame:CGRectMake(0, 0, 200, 50)];

[txtField setBorderStyle:UITextBorderStyleNone];

[txtField.layer setMasksToBounds:YES];
[txtField.layer setCornerRadius:10.0f];
[txtField.layer setBorderColor:[[UIColor lightGrayColor]CGColor]];
[txtField.layer setBorderWidth:1];
[txtField setTextAlignment:UITextAlignmentCenter];
[txtField setContentVerticalAlignment:UIControlContentVerticalAlignmentCenter];
[self.view addSubview:txtField]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-22T08:47:10.900

以上所有答案都很好，但在这里我通过@IBDesignable 添加代码。

[![在此处输入图像描述](../Images/6a597ddbeb4593b7dc65ee4f13655516.png)](https://i.stack.imgur.com/qcaCF.png)

```
@IBDesignable class DesignableUITextField: UITextField {

// Provides left padding for images
override func leftViewRect(forBounds bounds: CGRect) -> CGRect {
    var textRect = super.leftViewRect(forBounds: bounds)
    textRect.origin.x += leftPadding
    return textRect
}

// Provides right padding for images
override func rightViewRect(forBounds bounds: CGRect) -> CGRect {
    var textRect = super.rightViewRect(forBounds: bounds)
    textRect.origin.x -= rightPadding
    return textRect
}

@IBInspectable var leftImage: UIImage? {
    didSet {
        updateView()
    }
}

@IBInspectable var rightImage: UIImage? {
    didSet {
        updateRightView()
    }
}

@IBInspectable var leftPadding: CGFloat = 0
@IBInspectable var rightPadding: CGFloat = 0
@IBInspectable var gapPadding: CGFloat = 0
@IBInspectable var color: UIColor = UIColor.lightGray {
    didSet {
        updateView()
    }
}
@IBInspectable var cornerRadius: CGFloat = 0
@IBInspectable var borderColor: UIColor? = .lightGray

override func draw(_ rect: CGRect) {
    layer.cornerRadius = cornerRadius
    layer.masksToBounds = true
    layer.borderWidth = 1
    layer.borderColor = borderColor?.cgColor

}    

//@IBInspectable var roundCornersRadius: CGFloat = 0 {
  //  didSet{
     //   roundCornersRadiusTextField(radius: roundCornersRadius)
  //  }
// }

func roundCornersRadiusTextField(radius:CGFloat) {
       roundCorners(corners: [UIRectCorner.topLeft, UIRectCorner.topRight, UIRectCorner.bottomLeft, UIRectCorner.bottomRight], radius:radius)
   }

   func roundBottomCornersRadius(radius:CGFloat) {
       roundCorners(corners: [UIRectCorner.topLeft, UIRectCorner.topRight], radius:radius)
   }

func updateView() {
    if let image = leftImage {
        leftViewMode = UITextField.ViewMode.always
        let imageView = UIImageView(frame: CGRect(x: 0, y: 0, width: 20, height: 20))
        imageView.contentMode = .scaleAspectFit
        imageView.image = image
        // Note: In order for your image to use the tint color, you have to select the image in the Assets.xcassets and change the "Render As" property to "Template Image".
        imageView.tintColor = color
        leftView = imageView
    } else {
        leftViewMode = UITextField.ViewMode.never
        leftView = nil
    }

    // Placeholder text color
    attributedPlaceholder = NSAttributedString(string: placeholder != nil ?  placeholder! : "", attributes:[NSAttributedString.Key.foregroundColor: color])
}

func updateRightView() {
    if let image = rightImage {
        rightViewMode = UITextField.ViewMode.always
        let imageView = UIImageView(frame: CGRect(x: 0, y: 0, width: 20, height: 20))
        imageView.contentMode = .scaleAspectFit
        imageView.image = image
        // Note: In order for your image to use the tint color, you have to select the image in the Assets.xcassets and change the "Render As" property to "Template Image".
        imageView.tintColor = color
        rightView = imageView
    } else {
        rightViewMode = UITextField.ViewMode.never
        rightView = nil
    }

    // Placeholder text color
    attributedPlaceholder = NSAttributedString(string: placeholder != nil ?  placeholder! : "", attributes:[NSAttributedString.Key.foregroundColor: color])
}

func roundCorners(corners:UIRectCorner, radius:CGFloat) {
        let bounds = self.bounds

        let maskPath = UIBezierPath(roundedRect: bounds, byRoundingCorners: corners, cornerRadii: CGSize(width: radius, height: radius))

        let maskLayer = CAShapeLayer()
        maskLayer.frame = bounds
        maskLayer.path = maskPath.cgPath

        self.layer.mask = maskLayer

        let frameLayer = CAShapeLayer()
        frameLayer.frame = bounds
        frameLayer.path = maskPath.cgPath
        frameLayer.strokeColor = UIColor.darkGray.cgColor
        frameLayer.fillColor = UIColor.init(red: 247, green: 247, blue: 247, alpha: 0).cgColor

        self.layer.addSublayer(frameLayer)
    }

private var textPadding: UIEdgeInsets {
    let p: CGFloat = leftPadding + gapPadding + (leftView?.frame.width ?? 0)
    return UIEdgeInsets(top: 0, left: p, bottom: 0, right: 5)
}
override open func textRect(forBounds bounds: CGRect) -> CGRect {
    return bounds.inset(by: textPadding)
}

override open func placeholderRect(forBounds bounds: CGRect) -> CGRect {
    return bounds.inset(by: textPadding)
}

override open func editingRect(forBounds bounds: CGRect) -> CGRect {
    return bounds.inset(by: textPadding)
}} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-16T05:05:39.580

快速解决方案：

```
textField.layer.borderWidth = anyWidth
textField.layer.borderColor = anyColor
textField.layer.cornerRadius = textField.frame.size.height/2
textField.clipsToBounds = true 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-07T09:40:42.483

斯威夫特 3 解决方案：

我已经编写了单独的函数来快速为任何图层设置边框和角半径，您只需将任何视图的图层、边框宽度、角半径和边框颜色传递给以下函数

```
` func setBorderAndCornerRadius(layer: CALayer, width: CGFloat, radius: CGFloat,color : UIColor ) {
        layer.borderColor = color.cgColor
        layer.borderWidth = width
        layer.cornerRadius = radius
        layer.masksToBounds = true
    } 
```

`

# java - 在 Jboss 上部署接缝安全作为 7.1.1 会引发异常

> ID：13717010
> 
> 赞同：0
> 
> 时间：2012-12-05T05:41:14.563
> 
> 标签：java, java-ee-6, cdi, seam3

我使用以下 maven 配置 org.jboss.seam seam-bom 3.1.0.Final pom import 使我的应用程序能够使用 seam security 3.1.0.Final

```
</dependencyManagement>
  <dependency>
            <groupId>org.jboss.seam.security</groupId>
            <artifactId>seam-security-api</artifactId>
            <version>3.1.0.Final</version>
        </dependency>

    <dependency>
        <groupId>org.jboss.solder</groupId>
        <artifactId>solder-impl</artifactId>
    </dependency>
    <dependency>
    <groupId>org.jboss.seam.security</groupId>
    <artifactId>seam-security</artifactId>
        <version>3.1.0.Final</version>
            <scope>runtime</scope>
    </dependency> 
```

但是，在部署到服务器后，我得到了以下令人讨厌的异常。

```
06:22:58,597 INFO  [org.jboss.as.jpa] (MSC service thread 1-2) JBAS011401: Read persistence.xml for primary
06:22:59,188 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC00001:   Failed to start service jboss.deployment.unit."icedrud.war".POST_MODULE:    org.jboss.msc.service.StartException in service j
boss.deployment.unit."icedrud.war".POST_MODULE: Failed to process phase POST_MODULE of     deployment "icedrud.war"
        at    org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.    java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_04]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_04]
        at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_04]
Caused by: java.lang.RuntimeException: Error getting reflective information for class    org.jboss.solder.resourceLoader.servlet.ResourceListener with ClassLoader ModuleClassLoader     for Module "deployment.icedrud.war:main" from Service Module Loader
at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:70) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.ee.metadata.MethodAnnotationAggregator.runtimeAnnotationInformation(MethodAnnotationAggregator.java:58)
at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.handleAnnotations(InterceptorAnnotationProcessor.java:85)
at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.processComponentConfig(InterceptorAnnotationProcessor.java:70)
at org.jboss.as.ee.component.deployers.InterceptorAnnotationProcessor.deploy(InterceptorAnnotationProcessor.java:55)
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more
Caused by: java.lang.NoClassDefFoundError: org/jboss/solder/resourceLoader/ResourceLoader
    at java.lang.Class.getDeclaredFields0(Native Method) [rt.jar:1.7.0_04]
    at java.lang.Class.privateGetDeclaredFields(Unknown Source) [rt.jar:1.7.0_04]
    at java.lang.Class.getDeclaredFields(Unknown Source) [rt.jar:1.7.0_04]
    at org.jboss.as.server.deployment.reflect.ClassReflectionIndex.<init>(ClassReflectionIndex.java:57) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:66) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 10 more
Caused by: java.lang.ClassNotFoundException: org.jboss.solder.resourceLoader.ResourceLoader from [Module "deployment.icedrud.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
        at        org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 15 more 
```

请问我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:45:39.387

如果您在dependencyManagement 部分中使用Seam BoM，那么只需正确添加seam-security 一切。看起来正在发生的是 WAR 中的 Solder 版本不正确。

# jquery - 根据其他选择框的值从一个选择框中排除值

> ID：13717012
> 
> 赞同：0
> 
> 时间：2012-12-05T05:41:23.767
> 
> 标签：jquery, jquery-selectors

我试图从一个选择列表中排除用户在另一个选择列表中选择的内容。

这是 2 个问题的列表，用户不能在两个选择列表中选择相同的问题

**出于某种原因，它适用于前几个选择，但随后它开始将第二个框的值更改为不是的值。它适用于两者的几个选择，但如果你继续在 2 之间进行选择，它开始返回不正确的结果**

下面是 jquery 代码，但这里是[Fiddle 的链接](http://jsfiddle.net/BsHHz/)以完成代码

```
var q1 = "#q1";
var q2 = "#q2";
var questions = {"1":"Question 1","2":"Question 2","3":"Question 3","4":"Question 4"}

function rebuildList(option,id) {
    var currentValue = $(id).val();
    $(id).empty();
    $(id).append($('<option></option>').val(0).html("Select"));

    $.each(questions, function (key, value) {
        if (key != option) {
            $(id).append($('<option></option>').val(key).html(value));
        }
    });

    //set the value back to what it was before emptying the list
    var setter;
    if (currentValue == "") {
        setter = id + " option:eq(0)";
    } else {
        setter = id + " option:eq(" + currentValue + ")";
    }

    $(setter).prop('selected', 'selected');
}

$(document).ready(function () {
    $(q1).change(function () {
        rebuildList($(this).val(), q2);  
        return false;
    });

    $(q2).change(function () {
        rebuildList($(this).val(), q1);  
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:56:30.577

当您使用`eq()`. 我修改了那部分，代码工作正常，

```
if (currentValue == "") {
    $(id).val(0)
} else {
    $(id).val(currentValue)
} 
```

检查这里，[http://jsfiddle.net/muthkum/BsHHz/3/](http://jsfiddle.net/muthkum/BsHHz/3/)

# javascript - 多个自动完成下拉菜单不起作用

> ID：13717013
> 
> 赞同：0
> 
> 时间：2012-12-05T05:41:27.207
> 
> 标签：javascript, jquery, ajax, autocomplete

当我为一个字段设置一个自动完成下拉菜单时，一切正常，但是当我为更多字段添加更多下拉菜单时，输入字段的值不再填充 li 的文本，该文本是从名为的 php 文件返回的

以下作品 .sugnorm1 是 li 的类

```
var delay = (function () {
var timer = 0;
return function (callback, ms) {
    clearTimeout(timer);
    timer = setTimeout(callback, ms);
};
})();
$(document).ready(function () {
$('#quality1').bind('input propertychange', function () {
    delay(function () {
        $.post("functions/autocomplete.php", {
            quality:$(this).val(),
            questionname:"<?php echo $_SESSION['question']; ?>",
            count:1
        }, function (response) {
            $('#qualitySuggest1').hide();
            setTimeout("finishAjax('qualitySuggest1', '" + escape(response) + "')", 20);
        });
        return false;
    }, 20);
});
});

$('.sugnorm1').live("mouseover mouseout click", function(event) {
    if ( event.type == "mouseover" ) {
        $(this).addClass('sughover');
    } else if ( event.type == "click") {
        $("#quality1").val($(this).text());
        $("#qualitySuggest1").hide();
    }
    else {
        $(this).removeClass('sughover');
    }
});

$("#quality1").blur(function () {
    $("#qualitySuggest1").hide();
});

});
function finishAjax(id, response) {
$('#' + id).html(unescape(response));
$('#' + id).show();
} //finishAjax 
```

但是，如果我添加另一个字段，则会调用质量建议 .hide() 但我无法获得其他任何东西，例如在 event.type == click 两个字段中工作的警报。

```
var delay = (function () {
var timer = 0;
return function (callback, ms) {
    clearTimeout(timer);
    timer = setTimeout(callback, ms);
};
})();
$(document).ready(function () {
$('#quality1').bind('input propertychange', function () {
    delay(function () {
        $.post("functions/autocomplete.php", {
            quality:$(this).val(),
            questionname:"<?php echo $_SESSION['question']; ?>",
            count:1
        }, function (response) {
            $('#qualitySuggest1').hide();
            setTimeout("finishAjax('qualitySuggest1', '" + escape(response) + "')", 20);
        });
        return false;
    }, 20);
});
$('#quality2').bind('input propertychange', function () {
    delay(function () {
        $.post("functions/autocomplete.php", {
            quality:$(this).val(),
            questionname:"<?php echo $_SESSION['question']; ?>",
            count:2
        }, function (response) {
            $('#qualitySuggest2').hide();
            setTimeout("finishAjax('qualitySuggest2', '" + escape(response) + "')", 20);
        });
        return false;
    }, 20);
});
});

$('.sugnorm1').live("mouseover mouseout click", function(event) {
    if ( event.type == "mouseover" ) {
        $(this).addClass('sughover');
    } else if ( event.type == "click") {
        $("#quality1").val($(this).text());
        $("#qualitySuggest1").hide();
    }
    else {
        $(this).removeClass('sughover');
    }
});

$("#quality1").blur(function () {
    $("#qualitySuggest1").hide();
});

$('.sugnorm2').live("mouseover mouseout click", function(event) {
    if ( event.type == "mouseover" ) {
        $(this).addClass('sughover');
    } else if ( event.type == "click") {
        $("#quality2").val($(this).text());
        $("#qualitySuggest2").hide();
    }
    else {
        $(this).removeClass('sughover');
    }
});
$("#quality2").blur(function () {
    $("#qualitySuggest2").hide();
});

});
function finishAjax(id, response) {
$('#' + id).html(unescape(response));
$('#' + id).show();
} //finishAjax 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:42:17.660

在模糊事件之后调用了我的点击事件，因此隐藏了建议下拉菜单。我通过将点击事件更改为 mousedown 解决了这个问题。然后将在模糊之前调用 Mousedown。

# objective-c - objective-c 属性 - 无属性

> ID：13717016
> 
> 赞同：0
> 
> 时间：2012-12-05T05:41:50.570
> 
> 标签：objective-c, properties

我刚刚开始阅读 Apple 提供的 Object-c 开发人员手册。我在玩属性。我声明了一个类接口，它有两个属性：

```
@interface SocialEnglish : NSObject <IsSociable>
@property int numberOfPeopleMet;
@property (readonly) int readOnlyProperty;
@end 
```

没有声明与属性关联的实例变量。令我惊讶的是，编译器没有抱怨。然后我写了一堆代码来访问实例对象，果然 setter 和 getter 就像我已经实现了它们并将它们关联到实例变量一样工作！

在声明类中，我可以执行以下操作：

```
...
_readOnlyProperty = 3;
... 
```

嗯...我得说这可能很有帮助...我不喜欢它。为什么编译器不抱怨而是生成代码。有没有我需要设置的设置。

另请注意，我的实现类中没有 `@synthesize` 指令。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T05:48:16.053

最新版本的 Xcode`synthesize`现在自动为您“”声明属性。 [这是 Xcode 4.0 附带的](http://developer.apple.com/library/ios/releasenotes/developertools/rn-xcode/_index.html#//apple_ref/doc/uid/TP40001051-SW105)（请参阅“编译：LLVM2.0”下的链接发行说明）。

如果你想调用“ `@synthesize`”，或者声明一个“ `_readOnlyProperty`” ivar 或静态和“ `@synthesize`”，或者编写你自己的setter & getter，你可以继续这样做。

# ruby-on-rails - 路线导致空白视图，没有 html

> ID：13717024
> 
> 赞同：0
> 
> 时间：2012-12-05T05:43:12.830
> 
> 标签：ruby-on-rails, routes, views

我对这个问题有一个非常相似的问题：[我的路线返回一个空白视图（当我查看源代码时没有 html）](https://stackoverflow.com/questions/3659445/my-route-returns-a-blank-view-no-html-when-i-do-view-source)

当我访问一条路线时，它只会在查看源代码时显示一个没有 html 的空白视图。

[我的路线返回一个空白视图（当我查看源代码时没有 html）](https://stackoverflow.com/questions/3659445/my-route-returns-a-blank-view-no-html-when-i-do-view-source)

`config/routes.rb`

```
SampleApp::Application.routes.draw do
  devise_for :users

  root to: 'home#index'
end 
```

`app/controllers/home_controller.rb`

```
class HomeController < ApplicationController
  def index
  end
end 
```

`app/views/home/index.html.slim`（slim 就像 erb，我都测试过了，但仍然没有呈现 html）

```
h1 get ready to party! 
```

`log/development.log`

```
Started GET "/" for 127.0.0.1 at 2012-12-05 00:36:21 -0500
Processing by HomeController#index as */*
  Rendered home/index.html.slim within layouts/application (0.4ms)
Completed 200 OK in 6ms (Views: 5.9ms | ActiveRecord: 0.0ms) 
```

另一个问题建议更改端口。我做了所有基本的事情，比如重新启动服务器、重新启动计算机、尝试不同的端口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:12:42.553

听起来您的布局可能是空白的，并且没有呈现索引视图。

默认布局是`application.html.erb`并且应该使用`<%= yield %>`.

另外-您是否尝试过重新启动服务器以进行踢球？这就是您发布的另一个 SO 问题的答案，所以我假设您已经尝试过...

# winapi - 从 MetroApps 启动时的 win32 库（dll）行为

> ID：13717026
> 
> 赞同：1
> 
> 时间：2012-12-05T05:43:22.307
> 
> 标签：winapi, windows-8, windows-runtime

我们编写了一个 COM 进程内服务器（dll）（比如 x.dll），它动态链接到使用 win32 API 的库（比如 y.dll）。当从 windows8 桌面应用程序和 Metro 应用程序启动时，我们观察到相同 win32 API 的不同行为。

当从桌面应用程序加载 COM in-proc Server dll(x.dll) 时，库 (y.dll) 中的所有 win32 API 都工作正常。但是当从 MetroApps 启动 x.dll 时，y 中的所有 win32 API。 dll失败。

这是 Windows8 win32 API 的默认行为吗？如果有人可以为我提供任何与在 dll 中使用 win32 API 相关的文档，这些文档可以从桌面和 MetroApps 启动，那将是很好的。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:38:53.430

只有一部分 Windows API 可用于 Windows 应用商店应用。每个 API 函数的 MSDN 文档指定是否可以从桌面应用程序或 Windows 应用商店应用程序调用该函数。例如，以下内容出现在文档的底部[`GetProcAddress`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212.aspx)：

> **支持的最低客户端** Windows XP [桌面应用程序 | Windows 应用商店应用]

可以从桌面应用程序和 Windows 应用商店应用程序调用此函数。如果某个函数没有说明它在 Windows 应用商店应用程序中受支持，则它可能不会从 Windows 应用商店应用程序中调用。例如，[`LoadLibrary`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175.aspx)没有说它可以从 Windows 应用商店应用程序调用，所以它不能被调用。（请注意，虽然有一些方法可以调用不受支持的函数，但这样做必然会产生未定义的行为。）

另请注意，Windows 应用商店应用程序以低权限运行，并且对系统的访问受到限制。

# php - 设置新值触发器

> ID：13717027
> 
> 赞同：0
> 
> 时间：2012-12-05T05:43:29.457
> 
> 标签：php, mysql, database

我希望能够在将数据插入我的表之前计算我的客户的年龄......因此触发器是合适的。所以我有一个 CUSTOMER 表，其中包含一个 INT 值“age”。

我不确定我的语法是否关闭，但它一直给我一个错误。下面是我的代码，谁能告诉我什么是错的？

谢谢

```
DELIMITER $$
CREATE TRIGGER insert_new_musc_record  
BEFORE INSERT ON CUSTOMER FOR EACH ROW  
BEGIN  
DECLARE x INT;
SET x= DATEDIFF(NOW(), DATE(NEW.dob))/365);
SET @NEW.age= x;
END $$ 
DELIMITER; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:48:26.167

尝试这个：：

```
DELIMITER $$
CREATE TRIGGER insert_new_musc_record  
BEFORE INSERT ON CUSTOMER FOR EACH ROW  
BEGIN  
DECLARE x INT;
SET x := (DATEDIFF(NOW(), DATE(NEW.dob))/365);
SET @NEW.age= x;
END $$ 
DELIMITER; 
```

# c# - ServiceStack - 如何在一项服务中托管多个版本化端点？

> ID：13717028
> 
> 赞同：2
> 
> 时间：2012-12-05T05:43:28.747
> 
> 标签：c#, .net, wsdl, messaging, servicestack

# 我在哪里

我正在尝试将一些 WCF 服务转换为使用 ServiceStack。在大多数情况下，它实现了我想要的，但肯定存在差异。例如，使用 WCF 我有类似的东西：

```
interface IMethod1{ ResultDTO Method1(InputDTO input); }
interface IMethod2{ ResultDTO Method2(InputDTO input); }
interface IMethod3{ ResultDTO Method3(InputDTO input); }

interface IMyService : IMethod1, IMethod2, IMethod3 
```

然后实施：

```
public class MyService : ServiceBase, IMyService { /*  ... */ } 
```

* * *

# 我在哪里

使用 ServiceStack 更像是：

```
public class Method1{
    // parameters for method as properties
}
public class Method2{
    // parameters for method as properties
}
public class Method3{
    // parameters for method as properties
} 
```

我尝试了各种事情，我遇到的最新死胡同是：

```
public class MyServiceHost<T> : AppHostBase
{
    public MyServiceHost(string version)
        : base("My Service v" + version, typeof(T).Assembly)
    { }

    public override void Configure(Funq.Container container){
        Routes.AddFromAssembly(typeof(T).Assembly);  
    }
}

protected void Application_Start(object sender, EventArgs e) {
    new MyServiceHost<Foo.Bar.V0101.MyService>("1.1").Init();
    new MyServiceHost<Foo.Bar.V0102.MyService>("1.2").Init();            
    new MyServiceHost<Foo.Bar.V0201.MyService>("2.1").Init();            
} 
```

它抱怨 AppHost 已经被初始化。

* * *

# 我想去的地方

我想公开这样的事情：

```
http://www.sandwich.com/example/v0101/sandwichservice.wsdl
http://www.sandwich.com/example/v0102/sandwichservice.wsdl
http://www.sandwich.com/example/v0201/sandwichservice.wsdl 
```

或者

```
http://www.sandwich.com/example/sandwich_v0101.wsdl
http://www.sandwich.com/example/sandwich_v0102.wsdl
http://www.sandwich.com/example/sandwich_v0201.wsdl 
```

理想情况下托管在同一个服务进程中。

那么是否有一个我遗漏的简单答案，或者我是否从根本上错误地接近整个事情？或者简而言之：使用 ServiceStack，是否可以以及如何在同一主机服务中为版本化 Web 服务公开多个端点和 WSDL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:16:42.813

See this answer for [recommended versioning strategies with ServiceStack](https://stackoverflow.com/a/12413091/85785).

You can't expose multiple versions of SOAP/WSDL's in ServiceStack, you're encouraged to evolve the same DTO's which means there are no previous type versions to create an older version of the WSDL. You would need to host older versions of ServiceStack project for the auto-generated WSDL to match up with older types.

You could also take a snapshot of a WSDL and host it statically, but whether a new SOAP endpoint accepts a client sending an old SOAP version is up to .NET's WCF Message class doing the parsing. But as SOAP is a brittle format, YMMV.

# ubuntu - 安装 ubuntu 时出现 Grub 问题

> ID：13717030
> 
> 赞同：-3
> 
> 时间：2012-12-05T05:43:38.040
> 
> 标签：ubuntu, ubuntu-12.04, grub

我安装了ubuntu，但是当我重新启动我的机器时它显示：

```
error: file '/boot/grub/i386-pc/normal.mod' not found
grub rescue> 
```

我尝试从 live cd 运行引导修复，这里是它的转储：http: [//paste.ubuntu.com/1411870/](http://paste.ubuntu.com/1411870/)

让我知道是否有人以前这样做过

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-29T17:50:46.647

以其他方式添加`boot`分区。在挂载点类型中`/boot/efi`选择`FAT32`分区类型。分配大约 500MB，这是对我有用的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:53:15.710

我遇到过几次，我猜你没有给我留一个房间`/boot`

我的解决办法是重装（改U盘，不然就到同一个地方了）
不知道怎么救grub，觉得有点复杂，重装就好了不要花太多时间，记住离开房间`/boot`
没什么大不了的，放轻松，希望我能帮上忙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-10T13:49:37.160

安装 grub ubuntu

1- **cd live ubuntu**

选择不安装 ubuntu

2-**打开终端**

```
3-
sudo add-apt-repository ppa:yannubuntu/root-repair
sudo apt-get update
sudo apt-get install boot-repair
boot-repair 
```

# linux - 解析 cvs diff 输出以获取重要信息

> ID：13717032
> 
> 赞同：0
> 
> 时间：2012-12-05T05:43:39.960
> 
> 标签：linux

我在文件 output.diff 中获取了两个标签的 cvs 差异。现在我需要解析该 output.diff 以获取规范文件中的更改。更改包括添加、删除和修改的包。此外，如果添加、删除或修改补丁（在任何包中）以及包的任何版本。根本不需要 diff 输出的所有信息（添加的行、行号等）。

请帮忙。我没有通过。如果建议使用 bash 脚本，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:13:32.633

文件 output.diff 的一部分位于：

索引：dist/pkg/libcurl/arm-target-dev-libcurl.spec

==================================================== ==================

RCS 文件：/usr/tmp/dist/pkg/libcurl/arm-target-dev-libcurl.spec,v

检索修订版 1.49.2.5

检索修订版 1.49.2.7

差异 -r1.49.2.5 -r1.49.2.7

6c6

< 发布：08010005

* * *

> 发布：08010006

11a12

> 补丁4：curl-7.21.7-rfc2616.patch

43a45

> %patch4 -p1

115a118,120

> *   2012 年 12 月 7 日星期六
> 
> -添加 curl-7.21.7-rfs2616.patch

==================================================== ======================

我只想要规范文件的名称和补丁添加、删除或修改的名称。也是最后一行（更改日志）

根据上述文件部分的示例：

libcurl.spec

补丁4：curl-7.21.7-rfc2616.patch

2012 年 12 月 7 日星期六

-添加 curl-7.21.7-rfs2616.patch

# asp.net - 网站性能的奇怪问题

> ID：13717044
> 
> 赞同：2
> 
> 时间：2012-12-05T05:44:35.863
> 
> 标签：asp.net, performance, asp.net-mvc-4, asp.net-web-api

我们的网站有非常奇怪的问题。当我们在一天中第一次运行我们的站点时（这不是部署后的第一次），它运行速度非常慢，并且需要 5 分钟才能加载页面（任何浏览器），即使当时没有任何人连接到该站点。但是，一旦我们开始使用它，打开各种页面，它就会像魅力一样运行——我的意思是说非常快（不超过 4 秒），即使单个或多个用户连接到它。明确地说，如果站点保持空闲状态，则站点第一次表现不佳，但一旦我们开始使用它，它就会正常运行。我们正在使用以下内容来构建网站：

1.  MVC 4
2.  点网框架 4.5
3.  数据库：SQLAnywhere 和 SQL Server 2008（我们尝试使用这两个数据库来解决问题，但没有成功）
4.  Entity Framework 5.0 使用 Web API 模型，我们使用 jQuery 调用在页面上显示数据并在 DataTable 网格上显示它们 (http://www.datatables.net/)
5.  托管在 IIS 7.5 上

注意：该站点几天前运行正常，但我们不知道在最近几次部署中出了什么问题（代码或托管设置等），但运行速度非常慢。我们已经尝试了一切，但现在我们需要您的专家指导。

提前谢谢了。

我在 global.asax.cs 中的代码是：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();
    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
    //ConfigureApi(GlobalConfiguration.Configuration);
    GlobalConfiguration.Configuration.Filters.Add(new ModelValidationFilterAttribute());
    FilterConfig.RegisterHttpFilters(GlobalConfiguration.Configuration.Filters);
    BundleTable.EnableOptimizations = true;
}
protected void Session_Start(object src, EventArgs e)
{
    SessionHelper.EnterPriceID = 1;
    SessionHelper.CompanyID = 1;
    SessionHelper.RoomID = 1;
    SessionHelper.UserID = 1;
    SessionHelper.RoomName = "Room1";
    SessionHelper.UserName = "Admin";
    SessionHelper.CompanyResourceFolder = SessionHelper.EnterPriceID.ToString() + "_" + SessionHelper.CompanyID.ToString();
    eTurns.DTO.Resources.ResourceHelper.ResourceDirectoryPath = HttpContext.Current.Server.MapPath(@"\Resources\" + SessionHelper.CompanyResourceFolder) + @"\";
    eTurns.DTO.Resources.ResourceHelper.ResourceBaseClassPath = eTurns.DTO.Resources.ResourceHelper.ResourceDirectoryPath.Replace(@"\", ".");
    System.Globalization.CultureInfo c = new System.Globalization.CultureInfo("en-US");
    Thread.CurrentThread.CurrentUICulture = c;
    Thread.CurrentThread.CurrentCulture = c;
    Session["CurrentCult"] = c;
}

public void Application_AcquireRequestState(object sender, EventArgs e)
{
    if (HttpContext.Current.Session != null && Session["CurrentCult"] != null)
    {
        string currentCulture = Convert.ToString(Session["CurrentCult"]);
        if (String.Compare(currentCulture, System.Threading.Thread.CurrentThread.CurrentCulture.ToString(), StringComparison.OrdinalIgnoreCase) != 0)
        {
            Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;
            try
            {
                System.Threading.Thread.CurrentThread.CurrentCulture = System.Globalization.CultureInfo.CreateSpecificCulture(currentCulture);
            }
            catch
            {
                System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en-us");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:28:11.200

将您的 IDEAL TIMEOUT 20 M 增加到 900 M（根据您的方便）....

我希望这有效......

# java - SimpleDateFormat.setTimeZone() 和 Calendar.setTimeZone() 之间的区别

> ID：13717049
> 
> 赞同：4
> 
> 时间：2012-12-05T05:44:46.797
> 
> 标签：java, calendar, simpledateformat

SimpleDateFormat.setTimeZone() 和 Calendar.setTimeZone() 有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:54:29.393

`SimpleDateFormat`将在格式化期间使用指定的时区，而`Calendar`只会将给定的时区视为指定相应日期/时间的时区。在格式化 Calendar 实例时，Calendar 的时区将转换为 SimpleDateFormat 的时区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T06:52:06.617

这两种方法的作用完全相同。

```
SimpleDateFormat.setTimeZone(TimeZone zone) 
```

本质上是一个继承自 java.text.DateFormat 的方法。什么时候

```
DateFormat.setTimeZone(TimeZone zone) 
```

被调用，它将运行

```
 getCalendar().setTimeZone(TimeZone zone) 
```

这与

```
Calendar.setTimeZone(TimeZone zone) 
```

他们都在调用相同的方法来设置时区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:56:17.947

setTimeZone 是 DateFormat 类中定义的方法，该类内部包含一个 Calendar 对象。所以它修改了Calender对象并设置了TimeZone，其中Calendar.setTimeZone设置了现有日历的时区......

这两种方法都是实例方法..

# clojure - clojure 中的递归树遍历产生广度优先而不是深度优先的结果。

> ID：13717053
> 
> 赞同：2
> 
> 时间：2012-12-05T05:45:04.923
> 
> 标签：clojure

我试图接触二十一点中所有潜在的庄家手牌，但当我不断地把筹码扔掉时，我意识到事情并没有预期的那么深。所以我在 ruby​​ 中尝试了类似的代码，但它的表现不同。

这段代码，

```
(def d [2 3 4 5 6 7 8 9 10 10 10 10 11])
(defn dig1 [lst depth tot]
    (do 
        (print depth)
        (if (< tot 17) (map #(dig1 (conj lst %) (+ depth 1) (+ tot %)) d)) ))

(dig1 [0] 0 0) 
```

生产：011111111111112222222222222...

我希望 map 在 d[0] 上执行函数并向下挖掘，而不是查看在给定级别执行的所有内容。我显然不明白发生了什么。我需要做一些懒惰的事情吗？map 产生惰性序列，但显然将它们分成 32 个一组。

相比之下，

```
@d = [2,3,4,5,6,7,8,9,10,10,10,10,11]
def dig(lst, depth, tot)
  p depth
  @d.map{|e| dig(lst.dup.push(e),depth+1,tot+e)} if tot < 17
end 
```

产生我所期望的：0123456789999999999999888888888888

如果有人能告诉我如何使 clojure 输出看起来像 ruby​​ 输出，我将不胜感激。

谢谢，约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T06:45:14.690

`map`当您不希望返回返回值并且仅评估序列的副作用时，通常不使用。类似的东西`doseq`更可取。

```
(def d [2 3 4 5 6 7 8 9 10 10 10 10 11])
(defn dig1 [lst depth tot]
  (print depth)
  (when (< tot 17)
    (doseq [i d]
      (dig1 (conj lst i)
            (inc depth)
            (+ tot i)))))
(dig1 [0] 0 0) 
```

产生：`012345678999....`

# sql - SQL 到 Rails 查询

> ID：13717063
> 
> 赞同：0
> 
> 时间：2012-12-05T05:46:12.610
> 
> 标签：sql, ruby-on-rails, ruby

谁能将我的 Sql 查询转换为 Rails 查询？？？

```
SELECT DISTINCT conversation_cbgs.* FROM "conversation_cbgs" 
INNER JOIN "message_cbgs" 
ON "message_cbgs"."conversation_cbg_id" = "conversation_cbgs"."id"  
INNER JOIN "user_message_cbgs" 
ON "user_message_cbgs"."message_cbg_id" = "message_cbgs"."id" 
WHERE "user_message_cbgs"."user_id" = 1 
ORDER BY conversations_cbgs.updated_at DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:58:36.320

假设您的模型构建正确 - 顺便说一下，这对那些回答您的问题的人会有所帮助 - 您将拥有以下内容：

```
Conversation.select("DISTINCT conversation_cbgs.*")
  .joins(:messages)
  .joins(:user_messages)
  .where("user_message_cbgs.user_id = ?", 1)
  .order("conversations_cbgs.updated_at DESC") 
```

还有其他使用范围和合并等的方法，但是您还没有发布任何模型供我们向您展示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:58:17.403

您必须首先在表之间建立关联。如果存在关联，则将其显示为有问题的。
或者
您可以通过以下方式执行此查询`Model.find_by_sql(sql_query)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T05:59:04.967

```
 ConversationCbg.find(:all, :conditions=>["user_message_cbgs.user_id=?",1], :joins=>"As conversation_cbgs inner join  message_cbgs on message_cbgs.conversation_cbg_id=conversation_cbgs.id inner join user_message_cbgs on user_message_cbgs.message_cbg_id=message_cbgs.id" , :select=>"Distinct conversation_cbgs.*", :order=> "conversations_cbgs.updated_at desc") 
```

# breeze - 使用 Breeze.js，有没有办法创建未初始化的实体并将其绑定到“添加新”表单？

> ID：13717064
> 
> 赞同：1
> 
> 时间：2012-12-05T05:46:15.463
> 
> 标签：breeze

到目前为止，我看到的所有添加新实体的示例都将经过以下步骤：

1.  创建一堆绑定到屏幕控件的“新”变量。
2.  当用户想要提交添加时，创建了一个未初始化的新实体。
3.  将“new-”变量一一复制到新实体的每个成员。
4.  将新实体推送到经理的实体列表中。
5.  保存更改。
6.  清除所有“new-”变量。

由于许多原因，这是有问题的。除了屏幕控制之外，还必须维护这些“新”变量。当服务器端实体更改时，必须手动更改它们。这是耗时且容易出错的。

我希望能够首先创建一个未初始化的新实体，然后立即将其绑定到屏幕控件，而不使用带有“new-”前缀的那些变量。当用户要提交添加时，将新实体推送到经理的实体列表中，然后保存更改。然后立即将屏幕控件绑定到新创建的未初始化实体。

这样，我们可以避免在视图模型中处理单个实体属性，这会产生更健壮的代码，并节省大量时间。

目前，当文档准备就绪时，用于创建新实体的元数据不可用。如果我下载它，我必须先处理异步完成，然后才能将新实体绑定到屏幕控件。

所以我的问题是：有没有办法让元数据与初始 HTML 下载一起下载，这样我就可以创建一个未初始化的新实体而无需等待，并立即将其绑定到屏幕上的 HTML 控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:30:15.410

我不确定未初始化的新实体是什么意思，但是是的-您可以创建例如这样的新车：

```
var newCar = manager.metadataStore.getEntityType("Car").createEntity();
manager.addEntity(newCar); 
```

将您的控件绑定到 newCar。保存更改呼叫`manager.saveChanges();`，取消呼叫`manager.rejectChanges();`

为了能够与实体一起工作，微风需要元数据。如果需要，您可以发送带有页面本身的元数据。然后，您可以使用 manager.importMetadata() 将其导入管理器。唯一的问题是您需要编写一个小应用程序来生成元数据字符串（在构建期间），以便稍后可以将其传递给 importMetadata()。查看[MetadataStore 类 API](http://www.breezejs.com/sites/all/apidocs/classes/MetadataStore.html)了解更多信息。

# javascript - 使用 Bookmarklet 将当前页面上的图像保存到远程服务器

> ID：13717069
> 
> 赞同：1
> 
> 时间：2012-12-05T05:46:37.553
> 
> 标签：javascript, jquery, css, ajax, bookmarklet

我创建了一个小书签，当点击时它会从页面中提取所有图像。

```
var imgs = $('img');
for(var i=0; i < imgs.length; i++) {
    console.log(imgs[i].src);
} 
```

下次会将这些图像保存到服务器，以便用户可以在我的网站上访问这些图像。

在挖掘了 pinterest 等使用的脚本之后，他们似乎使用了 iframe，但我无法弄清楚 iframe 的用途，因为它是一个空的 HTML 文档。如何使用 iframe 或其他任何东西将图像从当前网站提交到我的网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:15:16.870

这需要其他网站的合作才能`<iframe>`使用 JavaScript 安全地插入您的内容（很多像 Facebook 这样的网站都这样做）。看看这个答案：[Facebook Like 按钮是如何工作的？](https://stackoverflow.com/questions/8256083/how-does-the-facebook-like-button-work)

您可以使用 JSONP 创建跨域请求。我只是将图像源发布到您的网站。然后，您的站点可以下载图像（而不是从 html 本身下载图像）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:09:57.823

您不能通过小书签提交二进制图像文件。您只能将包含这些图像的 URL 的 HTTP GET 或 POST 提交到您的服务器，并且您的服务器会自行获取图像。进行跨域发布的一种方法是提交`form`. `iframe`可以在`target`for a处使用空白，`form`这样当您提交该表单时，当前页面位置不会改变。

例子：

```
<iframe style="display:none" name="myHiddenIframe"></iframe>
<form action="http://savepicturesite.abc/transload.php" target="myHiddenIframe" method="post">
  <input type="hidden" name="pic1" value="http://domain.com/pic.jpg">
</form> 
```

# cordova - 将 Phonegap 应用程序发布到 Blackberry AppWorld

> ID：13717070
> 
> 赞同：1
> 
> 时间：2012-12-05T05:46:42.760
> 
> 标签：cordova, blackberry

我正在向 BB AppWorld 提交 phonegap 应用程序，但混淆了要提交的内容。运行以下命令来构建源

```
ant blackberry build 
```

*   MyApp.zip [文件]
*   OTAInstall [文件夹 - 66 个 cod 文件和一个 jad]
*   StandardInstall [文件夹 - 包含 MyApp.alx、cod、csl 和 cso 文件]
*   小部件 [文件夹 - 包括 index.html 的源文件]

之后签了包

```
bbwp MyApp.zip -g passwordhere -o /Applications/MAMP/htdocs/MyApp/build/signed 
```

我在**签名**文件夹下得到了以下文件和文件夹

*   OTAInstall [文件夹 - **66 个 cod 文件和一个 jad** ]
*   StandardInstall [文件夹 - 包含**MyApp.alx、MyApp.cod、MyApp.csl 和 MyApp.cso**文件]

我应该选择哪个文件和文件夹提交给 AppWorld？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:55:41.093

您好，您需要根据以下链接制作一个 release.zip

[http://docs.blackberry.com/en/developers/deliverables/47831/664046.jsp](http://docs.blackberry.com/en/developers/deliverables/47831/664046.jsp)

在这里，您只需要获取一个**MyApp.cod**文件，该文件在 StandardInstall 文件夹中可用，您需要按照链接进行其余设置

# django - django 表单的 Ajax 帖子不起作用

> ID：13717071
> 
> 赞同：0
> 
> 时间：2012-12-05T05:46:51.423
> 
> 标签：django, jquery

由于某种原因，我在尝试使用 ajax 时无法获得成功的帖子。我正在尝试的代码在这里：

[http://jsfiddle.net/MRKNq/11/](http://jsfiddle.net/MRKNq/11/)

```
$('#register_form').submit(function(e) {

$.ajax({
    type: "POST",
    url: "/echo/json/",
    data: $('#register_form').serialize(),
    success: function(data) {
        alert(data.text);
        $('#result').text(data.text);
    },
    type: 'POST'
});

e.preventDefault();

});​ 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:57:43.283

您应该查看在 Firebug 或其他工具中返回的响应。这可能与 CSRF 有关。

看看这个：[https ://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)

您还可以使用此装饰器使您的视图免受 CSRF 保护：[https ://docs.djangoproject.com/en/dev/ref/contrib/csrf/#django.views.decorators.csrf.csrf_exempt](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#django.views.decorators.csrf.csrf_exempt)

# ios - 当 uidatepicker/pickerview 与键盘 ios 相似时如何向上滚动视图

> ID：13717075
> 
> 赞同：1
> 
> 时间：2012-12-05T05:47:06.370
> 
> 标签：ios, uiscrollview, uidatepicker

我有一个从上到下有几个按钮的屏幕，当它们触摸时，它们会显示 pickerview 和 uidatepicker。问题是如果 uidatepicker 阻止了按钮，如何滚动视图。

所以我希望滚动视图在这里工作，就像 uikeyboard 出现时一样。谢谢！:)

ps：我真的很想上传图片，但我的名声不允许我这样做:)

更新：

最后我在我的代码上使用它，动画看起来与 tpavoiding 滚动相似，这里是代码

```
[UIView animateWithDuration: 0.5f animations:^{
self.containerView.frame=CGRectMake(0, -120, 320, 308);
}
completion:^(BOOL finished) {} ]; 
```

所以 containerView 将向上移动 120，当我点击完成（uidatepicker 上方的工具栏）时，我只是将其移至正常位置。

```
[UIView animateWithDuration: 0.5f animations:^{
self.containerView.frame=CGRectMake(0, 0, 320, 308);
}
completion:^(BOOL finished) {} ]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:33:03.177

使用 UIView 动画：

```
[UIView animateWithDuration: duration animations:^{ myView.frame = CGRectMake(0, 0, 320, 320);} completion:^(BOOL finished) { [self doSomething]; } ]; 
```

# c - C_Login 在 C 中的 PKCS11 中失败

> ID：13717084
> 
> 赞同：0
> 
> 时间：2012-12-05T05:47:49.437
> 
> 标签：c, linux, pkcs#11

简单的问题，但我不知道如何解锁 USB 令牌（epass2003），我尝试阅读 PKCS 11 但不知道如何实现 C_Login 函数以在 c 中执行，当我使用命令行工具（Linux）时那个令牌是否工作得很好但是c它不工作我使用用户类型作为CKU_USER，任何人都可以知道这件事，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:04:51.720

您必须检查 PKCS 函数的返回值以查看是否有任何错误。试试这个方法，看看会发生什么。如果 C_login() 的返回码是 CKR_PIN_LOCKED，那么很明显你应该解锁你的卡。

```
CK_RV ret;

ret = C_OpenSession(slot, CKF_SERIAL_SESSION, NULL_PTR, NULL_PTR, &session); 

if (ret  != CKR_OK){
   error_message(ret);
   return;
}

readPIN("Intro PIN: ", pin, 4); 
ret = (f_C_Login)(hSession,CKU_USER, (unsigned char *) pin,strlen(pin));
if (ret != CKR_OK){
   closeSessions(slot);
   error_message(ret);
   return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T08:52:45.523

A token can get locked due to a certain number of failed login (for TrustKey it is 10). There are provider specific utilities to unlock tokens. You could check Feitian site. There is some pointer to this kind of problem in Gooze forum (though not exactly). Your problem looks quite like a token lock problem.

# javascript - 如何从 perl 脚本发送准备显示的 html？

> ID：13717086
> 
> 赞同：1
> 
> 时间：2012-12-05T05:47:51.457
> 
> 标签：javascript, html, ajax, perl, jquery

```
 #!/usr/bin/perl 
  # perl cgi script products2.cgi 

use DBI;
print <<END_HTML;
Content-type: text/html
END_HTML
my $host = "xxx.xxx.xxx";
my $port = "xxxx";
my $database = "proj4";
my $username = "xxxxxx";
my $password = "xxxxx";
my $database_source = "dbi:mysql:$database:$host:$port";

my $dbh = DBI->connect($database_source, $username, $password) 
or die 'Cannot connect to db';

my $sth = $dbh->prepare("SELECT distinct category FROM products");
$sth->execute();

#getting the categories and displaying them
while(my @row=$sth->fetchrow_array()) {
my $data =$row[0];
 my @values = split(' ',$data);
my $pic = "/~xxxx/proj4/images/".$values[0].".jpg";
print <<END_HTML;
<div class="view view-first">
END_HTML

print"<img src=\"$pic\" alt=\"$row[0]\"/>"; 
print "<h2 class=\"choc\"><span>$row[0]</span></h2>";
print "<div class=\"mask\">"; 
print "<h2 class=\"eff\">\"$row[0]\"</h2>";
print <<END_HTML; 
 <p>One of Our best sellers</p>  
     <a href="#" class="info $values[0]">Discover</a>  
 </div>   
 </div>  
END_HTML
 }

 $sth->finish();
 $dbh->disconnect(); 
```

我正在尝试替换

```
 <div id="content"></div> 
```

单击导航栏中的“产品”链接时，在我的 proj.html 到上述 perl 脚本的输出。

//产品导航栏

```
 <li>
<a href="/perl/xxxxx/products2.cgi" id="productit">
Products
</a>
 </li> 
```

我知道我必须使用 javascript 和 ajax，但不知道该怎么做。

```
 $('#productit').bind('click', function() {

 var handle = document.getElementById('content');

  var req = new HttpRequest('/perl/xxxxx/products2.cgi', callback); 
  //i know this ajax call only expects string to be returned from server
 req.send();  

 handle.innerHTML= //not sure how to populate this                  
 }); 
```

有人可以指导我如何发送准备从 perl 脚本显示的 html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:11:36.243

您所要做的就是`print`将 HTML 发送到客户端/浏览器。

*然而...*

我注意到您的 Perl 代码中的一个小细节会导致 Web 服务器抛出 500 Internal Server Error：您忘记在 HTTP 标头后打印一个空行。发布的代码将发送输出

```
Content-type: text/html
<div class="view view-first">
... 
```

这不是有效的 HTTP 响应，因为`<div`它不是可识别的 HTTP 标头。它需要发送

```
Content-type: text/html

<div class="view view-first">
... 
```

相反，在内容开始之前用空行表示标题的结束。

这就是为什么使用 Web 框架（例如[Dancer](https://metacpan.org/module/Dancer)、[Mojolicious](https://metacpan.org/module/Mojolicious)或[Catalyst](https://metacpan.org/module/Catalyst)）甚至是神秘的[CGI.pm](https://metacpan.org/module/CGI)而不是手动处理这些东西通常是一个好主意的原因之一：有很多小细节和奇怪的边缘您需要正确处理的情况，否则它将无缘无故地无法工作。如果这是一个学习练习，那么自己动手就可以了，了解所有这些陷阱在哪里很好，但是最好使用广泛使用且经过良好测试的模块在代码中处理它们，其目的是有用或重要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:52:41.043

您可以使用 $.ajax() 方法，因为您使用的是 jquery

```
$('#productit').bind('click', function(e) {
   var handle = document.getElementById('content');
   e.preventDefault();

   $.ajax({
      dataType : 'text', /* the datatype you are returning */
      url: '/perl/xxxxx/products2.cgi',
      success:function (data){ /* data is the data returned from the ajax call */
          handle.innerHTML = data;
      } 
   });            
}); 
```

# batch-file - 尝试使用批处理文件处理具有禁止字符的文件名

> ID：13717087
> 
> 赞同：1
> 
> 时间：2012-12-05T05:48:01.657
> 
> 标签：batch-file

好的，简单解释一下我在做什么：我每天晚上使用 Windows Media Center (Windows 7) 录制 Jeopardy。然后我使用 Handbrake 将 .wtv 文件转换为 .mkv 文件，然后将它们传输到我的 NAS，以便稍后使用 Plex Media Server/Center 观看它们。我没有“手动”执行此操作，而是尝试使用批处理文件作为计划任务来自动化该过程。最初，我设置了一个脚本，以便我可以右键单击 > Send To > convert.bat，它会启动 Handbrake 的命令行界面并转换文件，将输出移动到我的 NAS，并删除原始文件（工作得很好）。

现在，我正在做的是将批处理脚本作为计划任务启动并循环通过我的“录制的电视”目录的内容并循环通过任何 .wtv 文件来转换/移动/删除它们。

问题在于 Windows Media Center 正确地用“！”命名 Jeopardy 文件。在其中（例如：Jeopardy!_KHQ_2012_12_04_21_12_12.wtv），这完全破坏了我的脚本。“发送到”批处理文件效果很好，但是当我遍历目录中的 *.wtv 文件时，它返回所有带有“！”的文件名 被剥离，这意味着我不能和他们一起蹲下。没有“！”的文件 顺利进行。

提前感谢任何可以让我指出正确方向的人！（如果您碰巧看到可以改进此脚本的任何其他领域，那也很好......）

这是我尝试使用的基本代码：

```
@echo off

setlocal ENABLEDELAYEDEXPANSION

SET count=0
SET getFolder=C:\Users\Public\Recorded TV\
SET ripFolder=C:\Rips\
SET putFolder=Z:\Videos\Recorded TV\

FOR %%F IN ("%getFolder%*.wtv") DO (
SET /A count=!count!+1

REM DETERMINE OUTPUT FILENAME
for /f "tokens=5,6,7,8,9,10 delims=\_" %%a in ("%%F") do (
    set show=%%a
    set station=%%b
    set year=%%c
    set month=%%d
    set day=%%e
    set hour=%%f

    REM GENERATE OUTPUT NAMING CONVENTION   
    set output=!show! s!year!e!month!!day! !hour!

)

REM PROCESS WITH HANDBRAKE CLI
"C:\Program Files\Handbrake\HandBrakeCLI.exe" -i "%%F" -t 1 -c 1 -o %ripFolder%!OUTPUT!.mkv  -f mkv --deinterlace="fast" --crop 58:60:2:2 --strict-anamorphic  -e x264 -q 20 --vfr  -a 1 -E faac -B 160 -6 dpl2 -R Auto -D 0 --gain=0 --audio-copy-mask none --audio-fallback ffac3 -x ref=1:weightp=1:subq=2:rc-lookahead=10:trellis=0:8x8dct=0 --verbose=1

REM MOVE CONVERTED FILE TO NAS
copy "%ripFolder%!OUTPUT!.mkv" "%putFolder%"

REM DELETE ORIGINAL
del "%%F"

REM DELETE LOCAL RIP
del "%ripFolder%!output!.mkv"
)

echo %count% files processed

pause

ENDLOCAL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:51:51.480

如您所见，感叹号在您逃脱之前已被剥离。
这是因为您在启用延迟扩展时扩展了 FOR 循环变量`%%F`，而感叹号会尝试扩展变量。

您需要在此处切换延迟扩展，因为使用延迟扩展时变量内容是安全的，但要获得值，您需要禁用模式。

```
@echo off
setlocal DisableDelayedExpansion
SET count=0

FOR %%F IN ("%getFolder%*.wtv") DO (
  set "orgFile=%%F"
  SET /A count+=1

  REM DETERMINE OUTPUT FILENAME
  for /f "tokens=5,6,7,8,9,10 delims=\_" %%a in ("%%F") do (
    set show=%%a
    set station=%%b
    set year=%%c
    set month=%%d
    set day=%%e
    set hour=%%f

    setlocal EnableDelayedExpansion
    REM GENERATE OUTPUT NAMING CONVENTION   
    set output=!show! s!year!e!month!!day! !hour!
  )
  REM PROCESS WITH HANDBRAKE CLI
  "C:\Program Files\Handbrake\HandBrakeCLI.exe" -i "%%F" -t 1 -c 1 -o %ripFolder%!OUTPUT!.mkv  -f mkv --deinterlace="fast" --crop 58:60:2:2 --strict-anamorphic  -e x264 -q 20 --vfr  -a 1 -E faac -B 160 -6 dpl2 -R Auto -D 0 --gain=0 --audio-copy-mask none --audio-fallback ffac3 -x ref=1:weightp=1:subq=2:rc-lookahead=10:trellis=0:8x8dct=0 --verbose=1

  REM MOVE CONVERTED FILE TO NAS
  copy "%ripFolder%!OUTPUT!.mkv" "%putFolder%"

  REM DELETE ORIGINAL
  del "!orgFile!"

  REM DELETE LOCAL RIP
  del "%ripFolder%!output!.mkv"
  endlocal
) 
```

# c# - 在c#中从excel中读取数据到Json对象

> ID：13717088
> 
> 赞同：6
> 
> 时间：2012-12-05T05:48:02.790
> 
> 标签：c#, json, excel

我有一个 Excel 表，其中包含一组包含数据的列和行。我想以 JSON 格式读取完整的 Excel 工作表数据，以便稍后将 JSON 写入文件。我怎样才能做到这一点？

样本数据：

```
Names    RegNo    Description
ABCD     12345    DemoInfo
XYZ      67890    DemoInfo2 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T09:22:35.627

通过 ADO.NET OleDb 提供程序连接到 Excel 工作表。然后，使用 C# 的 JSON 库生成 JSON 字符串，并保存文件。（或使用 JavascriptSerialzer，正如@boades 建议的那样）。

此示例使用 JSON.NET 库。

```
using System;
using System.Linq;
using System.Data.OleDb;
using System.Data.Common;
using Newtonsoft.Json;
using System.IO;

namespace ConsoleApplication1 {
    class Program {
        static void Main(string[] args) {
            var pathToExcel = @"C:\path\to\excel\file.xlsx";
            var sheetName = "NameOfSheet";
            var destinationPath = @"C:\path\to\save\json\file.json";

            //Use this connection string if you have Office 2007+ drivers installed and 
            //your data is saved in a .xlsx file
            var connectionString = $@"
                Provider=Microsoft.ACE.OLEDB.12.0;
                Data Source={pathToExcel};
                Extended Properties=""Excel 12.0 Xml;HDR=YES""
            ";

            //Creating and opening a data connection to the Excel sheet 
            using (var conn=new OleDbConnection(connectionString)) {
                conn.Open();

                var cmd=conn.CreateCommand();
                cmd.CommandText = $"SELECT * FROM [{sheetName}$]";

                using (var rdr=cmd.ExecuteReader()) {

                    //LINQ query - when executed will create anonymous objects for each row
                    var query = rdr.Cast<DbDataRecord>().Select(row => new {
                        name = row[0],
                        regno = row[1],
                        description = row[2]
                    });

                    //Generates JSON from the LINQ query
                    var json = JsonConvert.SerializeObject(query);

                    //Write the file to the destination path    
                    File.WriteAllText(destinationPath, json);
                }
            }
        }
    }
} 
```

链接：

*   [在 ADO.NET 中检索和修改数据](http://msdn.microsoft.com/en-us/library/ms254937%28v=vs.110%29.aspx)- 如何使用连接、命令和读取器
*   [Excel 2007 连接字符串](http://www.connectionstrings.com/excel-2007)
*   “OLEDB 提供程序”部分下的[旧 Excel 连接字符串](http://www.connectionstrings.com/excel)
*   可以在[JSON](http://www.json.org/)页面上找到 C# 的 JSON 库
*   [JSON.NET](http://json.codeplex.com/)
*   [Microsoft Access Database Engine 2010 Redistributable](http://www.microsoft.com/en-gb/download/details.aspx?id=13255)，如果您没有安装 Excel 2007+

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:57:32.933

您可以尝试[http://exceldatareader.codeplex.com/](http://exceldatareader.codeplex.com/)库。您必须将数据从 excel 读取到某个对象，然后使用[JavaScriptSerializer将其转换为 json](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

```
public class MyRow
{
   public string Cell1;
   public string Cell2;
   public string Cell3;
}

class Program
{
        static void Main()
        {
            var list = new List<MyRow>();
            FileStream stream = File.Open(filePath, FileMode.Open, FileAccess.Read);

            //1\. Reading from a binary Excel file ('97-2003 format; *.xls)
            IExcelDataReader excelReader = ExcelReaderFactory.CreateBinaryReader(stream);
            //...
            //2\. Reading from a OpenXml Excel file (2007 format; *.xlsx)
            IExcelDataReader excelReader = ExcelReaderFactory.CreateOpenXmlReader(stream);

            //5\. Data Reader methods
            while (excelReader.Read())
            {
                   var obj = new MyRow 
                   {
                       Cell1 = excelReader.GetString(0),
                       Cell2 = excelReader.GetString(1),
                       Cell3 = excelReader.GetString(2),
                   }

                   list.Add(obj);
            }

            //6\. Free resources (IExcelDataReader is IDisposable)
            excelReader.Close();
            var json = new JavaScriptSerializer().Serialize(list);
            Console.WriteLine(json);
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T06:38:40.637

将其保存为 CSV。然后使用 File.ReadLines 枚举每一行，然后使用 String.Split 读取每一列。将数据格式化为 JSON 字符串并将其保存到文件中。

# c++ - 快速排序实现优化

> ID：13717090
> 
> 赞同：-1
> 
> 时间：2012-12-05T05:48:16.340
> 
> 标签：c++, arrays, sorting, optimization, quicksort

所以我已经实现了一个快速排序的版本，但我不确定我是否以最佳方式做到了。我正在排序的向量中的元素是 3D 点。您会注意到，在拆分数组时，它会显示“if(level == 1), if(level == 2), etc” 这是因为取决于我何时调用快速排序，x、y 或 z 坐标点数是排序的基础。

我的代码如下。我已经测试了我的算法，它似乎正确地对点进行了排序，但是我觉得我可能有很多开销或其他东西，因为它的运行速度没有我希望的那么快，特别是因为我必须打电话此排序函数多次对多达 500,000 个元素的数组进行排序。

我可以做些什么来改进/清理/加速我的排序算法？

```
std::vector<Point> SortPoints(std::vector<Point> points, int level)
{
    if(points.size() <= 1) return points;
    std::vector<Point> s1, s2;
    size_t index = ((float)rand()/RAND_MAX)*(points.size()-1);
    Point pivot = points[index];
    points.erase(points.begin() + index);
    size_t size = points.size();
    for(int i = 0; i < size; i++)
    {
        if(level == 1)
        {
            if(points[i].pos.x <= pivot.pos.x) s1.push_back(points[i]);
            else s2.push_back(photons[i]);
        } else if(level == 2)
        {
            if(points[i].pos.y <= pivot.pos.y) s1.push_back(points[i]);
            else s2.push_back(photons[i]);
        } else if(level == 3)
        {
            if(points[i].pos.z <= pivot.pos.z) s1.push_back(points[i]);
            else s2.push_back(photons[i]);
        }
    }
    if(s1.size() == 0) return Concatenate(s1, pivot, s2); 
    else if(s2.size() == 0) return Concatenate(s1, pivot, s2);
    else return Concatenate(SortPoints(s1, level), pivot, SortPoints(s2, level)); 
}

std::vector<Point> Concatenate(std::vector<Point> s1, 
                                       Point p, std::vector<Point> s2)
{  
    std::vector<Point> result;
    result.reserve(s1.size()+s2.size()+1);
    result.insert(result.end(), s1.begin(), s1.end());
    result.push_back(p);
    result.insert(result.end(), s2.begin(), s2.end());
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:39:13.327

您的主要问题是您在分区时创建副本。在幕后进行*了大量的内存分配和复制。*

如果您希望它更快，则需要就地排序（并且不要按值传递大量向量）。

除非这是实现快速排序的练习，否则您应该使用`std::sort`自定义比较函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:14:41.753

所以这里有一些观察：

*   正如其他人所指出的，您应该考虑使用 std 实现作为基准。
*   您可以预先保留要分类的向量，而不是让它们不断增长和重新分配。
*   跳过循环中的枢轴可能会更好，而不是从向量中删除它，因为后者可能需要大量复制数据。
*   您不必费心将数据复制到新向量中并将它们连接起来，而是就地排序。
*   您也许可以选择比随机选择更好的支点（尤其是如果您的数据是预先排序的）。
*   您可以更改 Point 的实现以允许索引 xyz 而不必使用 if()

从本质上讲，这似乎是一个非常幼稚的实现，您可能需要做很多工作，并利用您自己数据的专业知识，才能击败预先提供的版本。

# android - 从 Google Play 中的服务器“RPC:s-5:AEC-0”检索信息时出现 Android 错误？

> ID：13717091
> 
> 赞同：20
> 
> 时间：2012-12-05T05:48:18.740
> 
> 标签：android, in-app-purchase

我在中型 Android 设备上遇到以下错误。

> 从服务器 rpc:s-5:aec-0` 检索信息时出错。

[当我尝试从Play 商店](http://en.wikipedia.org/wiki/Google_Play)下载我的应用内购买产品时，它会弹出。

我从教程*[Simple InApp Billing / Payment](http://blog.blundell-apps.com/simple-inapp-billing-payment/)*进行了编码，并在 Google Play 中更新了我的[APK](http://en.wikipedia.org/wiki/APK_%28file_format%29)文件，但它没有发布。必须在 Google Play 上发布应用程序吗？

我在 Google Play 中保存的设备中安装了相同的 APK 文件。现在我收到了这个错误。有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-25T16:36:19.230

要解决此问题，您需要删除您的 Google 帐户，然后重新添加。为此，请遵循以下说明：

[http://support.google.com/android/bin/answer.py?hl=en&answer=1663649](http://support.google.com/android/bin/answer.py?hl=en&answer=1663649)

（或者只是在设置>个人>帐户和同步下找到该帐户>单击Google帐户>单击菜单按钮>单击删除帐户>确认删除。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-05T06:51:58.523

我也遇到了这个问题，不知道为什么。有些人建议删除您的 Google 帐户并重新添加它和/或删除 Play 商店缓存。我正在寻找更多的解决方案，但它适用于所有免费、付费的应用程序。

编辑：刚刚发现这个[http://www.droid-life.com/2012/11/14/after-4-2-update-is-your-nexus-7-having-troubles-updating-apps-in-google -玩/](http://www.droid-life.com/2012/11/14/after-4-2-update-is-your-nexus-7-having-troubles-updating-apps-in-google-play/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-13T08:23:19.693

我到处尝试了所有形式。在我这样做之前没有任何效果。按照以下步骤。

`RPC:AEC:0`错误被称为 CPU/RAM/设备/身份故障。

摆脱此错误的唯一可能方法是，

转到`settings`→ `application`→ `Play Store`→ `Clear Data`& `Clear Cache`。

转到`accounts`→ `Google`→ `Remove account`。

重启设备。

再次`Settings`→ `Account`→ `Google`→ `Log In`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-15T07:05:47.210

我是这样解决的：

*   设置 ->
*   应用程序 ->
*   所有应用程序->
*   谷歌应用商店 ->
*   删除缓存->
*   强制停止 ->
*   谷歌服务框架->
*   删除数据 ->
*   强制停止

然后**重新启动**您的设备。现在享受...

这是 100% 的工作。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-13T16:46:22.103

我在这个问题上遇到了麻烦，并且尝试了每个人发布的所有内容，但都没有成功。我终于能够联系谷歌并接到电话。在他们的帮助下，我在几分钟内就把它修好了。这对我有用...

1.  设置 --> 应用程序 --> 管理应用程序 --> 全部
2.  选择下载管理器；清除数据；清除缓存; 回去
3.  选择 Google Play 商店；清除数据；清除缓存; 回去
4.  选择谷歌服务框架；清除数据；清除缓存; 回去
5.  关掉手机
6.  打开手机

它对我有用。希望这可以帮助某人。另外，请注意他们确实说过它可能需要几分钟才能工作 - 可能在重新启动手机后长达 30 分钟。重新启动手机时，我确实注意到 Google Play 商店必须先自我更新。但现在已经解决了。最后！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-25T22:28:54.963

转到“应用程序管理器”，然后转到“全部”，然后单击“Google 服务框架”，然后单击“清除数据”。重新启动并完成。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-26T16:27:17.000

要解决此问题 (RPC:S-5:AEC-0)：

1.  前往设置
2.  转到备份和重置
3.  进入恢复模式
4.  重新启动系统

这似乎解决了我的标签的问题。现在我可以使用 Google Play 商店并下载我想要的任何应用程序。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-02T15:55:16.770

1.  进入设置
2.  选择“应用程序”和所有
3.  选择 Google 服务框架
4.  清除数据
5.  强制停止
6.  转到应用程序并下载没有错误

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-10T18:30:15.670

无需删除帐户：我将 Google Play 切换到第二个 Google 帐户，安装了更新，然后切换回原来的帐户。

虽然显然，只需切换到第二个 Google 帐户并切换回原始帐户就足够了，无需安装更新。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-03-20T06:30:49.580

我尝试了很多东西（甚至包括这篇文章中的那些），但都没有奏效。我决定清除谷歌客户经理的数据，因为很多人提到要删除帐户并重新创建帐户。它适用于我的 Nexus 7 (Android 4.2.2)。收到 17 个更新:-)。

转到设置 → 应用程序 → 全部 → Google 帐户管理器 → 清除数据。

重启设备。

完毕。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-25T19:52:23.820

这很简单……我敢肯定，你们家里都有笔记本电脑或个人电脑。所以转到`http://www.google.com/wallet/`，使用您的 Google 帐户登录，然后转到“付款方式”，然后转到“添加卡或帐户”。

添加付款方式后，就完成了！您将能够购买您的应用程序。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-11-28T09:07:40.063

我使用[http://matthill.eu/android/google-play-error-rpcs5aec0/上的方法解决了这个问题](http://matthill.eu/android/google-play-error-rpcs5aec0/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-08-19T07:33:04.757

我在 android 中使用应用内购买时遇到了类似的错误。我的错误是我在实例化购买时使用了错误的购买 ID。

```
public static final String PRODUCT_ID_ASTRO_Match = "android.test.product";//wrong id not in play store dev console 
```

将其替换为：

```
public static final String PRODUCT_ID_ASTRO_Match = "android.test.purchased"; 
```

它奏效了。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2013-01-16T20:01:37.993

我终于解决了这个问题。这让我发疯了。从 PC 转到[Google Play](http://en.wikipedia.org/wiki/Google_Play)。就我而言，我的电子邮件帐户存在冲突，必须创建一个新的电子邮件帐户。然后转到您的手机设置。转到帐户，然后转到 Google。在那里删除您现有的电子邮件并添加新电子邮件。

然后手机将同步，然后一切都恢复正常。然后您可以更新和下载应用程序；由于这个问题，这是我以前无法做到的。

# android - 仅在 android 中显示电话联系人

> ID：13717093
> 
> 赞同：0
> 
> 时间：2012-12-05T05:48:26.357
> 
> 标签：android, android-contentprovider

我是 android 新手。我需要在我的应用程序中显示电话联系人。我在这里面临的问题是谷歌联系人也与我的应用程序中的电话联系人一起出现。我不知道如何过滤这个问题。我需要只显示我的电话联系人。请帮帮我。提前致谢

```
 list = new ArrayList<contactlist>();
 adptr = new customcontactadptr(this, R.layout.listcontactitem, list);
 Uri uri = ContactsContract.Contacts.CONTENT_URI;
 ContentResolver cr = getContentResolver();
 String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";
 Cursor cur = cr.query(uri, null, null, null, sortOrder);
 if(cur.getCount() > 0)
 {
  cur.moveToFirst();
  do
  {
   if (Integer.parseInt(cur.getString(
     cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) 
   {
    String contactid = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
    contactlist con = new contactlist();
    nme = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
    Log.e("contactid",contactid);
    String status = cur.getString(cur.getColumnIndexOrThrow(ContactsContract.Contacts.CONTACT_STATUS));
    Long statuslabel = cur.getLong(cur.getColumnIndexOrThrow(ContactsContract.Contacts.CONTACT_STATUS_LABEL));
    if(status!=null)
    {
     Log.e("status", status);
    }
    else if(statuslabel!=null)
    {
     Log.e("status label", Long.toString(statuslabel));
    }
 Cursor pCur = cr.query(
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
            null,
            ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
            new String[]{contactid}, null);
 pCur.moveToFirst();
 do 
 {
  int phone_type = pCur.getInt(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));
  if(phone_type == ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE)
  {

   no = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
   Log.e("Name",nme);
   Log.e("Number",no);
   con.setchecked(false);
      con.setname(nme);
      con.setno(n);
      list.add(con);
      adptr.notifyDataSetChanged();
  }
 }while (pCur.moveToNext());
 pCur.close();

   }
  }while(cur.moveToNext());
 }
 setListAdapter(adptr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:09:17.473

这是示例代码....

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Creating a button click listener for the "Add Contact" button
        OnClickListener addClickListener = new OnClickListener() {

            @Override
            public void onClick(View v) {
                // Getting reference to Name EditText
                EditText etName = (EditText) findViewById(R.id.et_name);

                // Getting reference to Mobile EditText
                EditText etMobile = (EditText) findViewById(R.id.et_mobile_phone);

                // Getting reference to HomePhone EditText
                EditText etHomePhone = (EditText) findViewById(R.id.et_home_phone);

                // Getting reference to HomeEmail EditText
                EditText etHomeEmail = (EditText) findViewById(R.id.et_home_email);

                // Getting reference to WorkEmail EditText
                EditText etWorkEmail = (EditText) findViewById(R.id.et_work_email);

                ArrayList<ContentProviderOperation> ops =
                new ArrayList<ContentProviderOperation>();

                int rawContactID = ops.size();

                // Adding insert operation to operations list
                // to insert a new raw contact in the table ContactsContract.RawContacts
                ops.add(ContentProviderOperation.newInsert(ContactsContract.RawContacts.CONTENT_URI)
                        .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, null)
                        .withValue(RawContacts.ACCOUNT_NAME, null)
                        .build());

                // Adding insert operation to operations list
                // to insert display name in the table ContactsContract.Data
                ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, rawContactID)
                        .withValue(ContactsContract.Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE)
                        .withValue(StructuredName.DISPLAY_NAME, etName.getText().toString())
                        .build());

                // Adding insert operation to operations list
                // to insert Mobile Number in the table ContactsContract.Data
                ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, rawContactID)
                        .withValue(ContactsContract.Data.MIMETYPE, Phone.CONTENT_ITEM_TYPE)
                        .withValue(Phone.NUMBER, etMobile.getText().toString())
                        .withValue(Phone.TYPE, CommonDataKinds.Phone.TYPE_MOBILE)
                        .build());

                // Adding insert operation to operations list
                // to  insert Home Phone Number in the table ContactsContract.Data
                ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, rawContactID)
                        .withValue(ContactsContract.Data.MIMETYPE, Phone.CONTENT_ITEM_TYPE)
                        .withValue(Phone.NUMBER, etHomePhone.getText().toString())
                        .withValue(Phone.TYPE, Phone.TYPE_HOME)
                        .build());

                // Adding insert operation to operations list
                // to insert Home Email in the table ContactsContract.Data
                ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, rawContactID)
                        .withValue(ContactsContract.Data.MIMETYPE, Email.CONTENT_ITEM_TYPE)
                        .withValue(Email.ADDRESS, etHomeEmail.getText().toString())
                        .withValue(Email.TYPE, Email.TYPE_HOME)
                        .build());

                // Adding insert operation to operations list
                // to insert Work Email in the table ContactsContract.Data
                ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, rawContactID)
                        .withValue(ContactsContract.Data.MIMETYPE, Email.CONTENT_ITEM_TYPE)
                        .withValue(Email.ADDRESS, etWorkEmail.getText().toString())
                        .withValue(Email.TYPE, Email.TYPE_WORK)
                        .build());

                try{
                    // Executing all the insert operations as a single database transaction
                    getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
                    Toast.makeText(getBaseContext(), "Contact is successfully added", Toast.LENGTH_SHORT).show();
                }catch (RemoteException e) {
                    e.printStackTrace();
                }catch (OperationApplicationException e) {
                    e.printStackTrace();
                }
            }
        };

        // Creating a button click listener for the "Add Contact" button
        OnClickListener contactsClickListener = new OnClickListener() {

            @Override
            public void onClick(View v) {
                // Creating an intent to open Android's Contacts List
                Intent contacts = new Intent(Intent.ACTION_VIEW,ContactsContract.Contacts.CONTENT_URI);

                // Starting the activity
                startActivity(contacts);
            }
        };

        // Getting reference to "Add Contact" button
        Button btnAdd = (Button) findViewById(R.id.btn_add);

        // Getting reference to "Contacts List" button
        Button btnContacts = (Button) findViewById(R.id.btn_contacts);

        // Setting click listener for the "Add Contact" button
        btnAdd.setOnClickListener(addClickListener);

        // Setting click listener for the "List Contacts" button
        btnContacts.setOnClickListener(contactsClickListener);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

# nservicebus - 在 NServiceBus 中使用多态消息时，有没有办法控制消息处理程序的顺序？

> ID：13717096
> 
> 赞同：0
> 
> 时间：2012-12-05T05:48:56.650
> 
> 标签：nservicebus

我们有两种消息类型`UpdateIndividual`和`UpdateIndividualWithDetails`. `UpdateIndividualWithDetails`继承自`UpdateIndividual`。然后我们为每个处理程序指定了顺序

```
public void SpecifyOrder(Order order)
{
    order.Specify(new First<UpdateIndividual>());
} 
```

这不起作用，因为`UpdateIndividualWithDetails`总是首先调用。我们正在使用 NServiceBus 2.6，目前无法升级。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:21:14.627

从您在问题中包含的代码看来，您不小心指定了消息类型而不是处理程序类型。

如果您有单独的处理程序类型，例如`UpdateIndividualHandler`and `UpdateIndividualWithDetailsHandler`，对于每种形式的消息，如果这不起作用，我会感到惊讶：

```
public void SpecifyOrder(Order order)
{
    order.Specify(new First<UpdateIndividualHandler>());
} 
```

虽然我看了 NServiceBus 已经有一段时间了，所以我可能不对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:14:04.083

使用组合而不是继承解决了我们的问题。

# actionscript-3 - 如何从动作脚本中的 XML 对象获取值

> ID：13717097
> 
> 赞同：1
> 
> 时间：2012-12-05T05:49:00.420
> 
> 标签：actionscript-3, apache-flex, actionscript

我是弹性开发的新手。我正在尝试开发一个基于 Web 的应用程序。不知怎的，我觉得很舒服。我有一些与 xml 文档相关的查询。

在我的网络服务中，我执行一些数据库操作并以 XmlDocument 对象格式返回一些 xml 数据。

我尝试使用以下函数解析它

```
 public  function objectToXML1(obj:Object):XML {
                var qName:QName = new QName("DATA");
                var xmlDocument:XMLDocument = new XMLDocument();
                var simpleXMLEncoder:SimpleXMLEncoder = new SimpleXMLEncoder(xmlDocument);
                var xmlNode:XMLNode = simpleXMLEncoder.encodeValue(obj, qName, xmlDocument);
                var xml:XML = new XML(xmlDocument.toString());
                return xml;
            } 
```

但我不知道如何从这个 XML 中提取数据

XML 格式

```
<REQUEST>
<STATUS>SUCCESS</STATUS>
<MESSAGE>BP Retrive </MESSAGE>
<DATA>
<BOM>
<BO>
<BusinessPartners>
<row>
<CardCode/>
<CardName/>
<Phone1/>
<Phone2/>
<Cellular/>
<EmailAddress/>
</row>
</BusinessPartners>
</BO>
</BOM>
</DATA>
</REQUEST> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:58:22.577

如果您有 XML 的预定义结构，则可以使用[FlexXB](http://code.google.com/p/flexxb/)创建 XML 的 ActionScript 对象。这很容易，您创建一个看起来与 XML 完全一样的 ActionScript 对象（这意味着它需要具有相同的属性）并注释这些属性。因此 FlexXB 将读取 XML 并从它创建一个 ActionScript 对象。

如果您不想使用该框架，您也可以手动完成。要读取属性，请 `xmlElement.@attributeName`用于获取对象的名称，例如`xmlElement.name().localName`. 有一些功能，但由于自动完成功能不适用于 XML 元素，因此很难找到正确的功能。[这](http://livedocs.adobe.com/flex/3/html/help.html?content=13_Working_with_XML_08.html)是 Adob​​e 的一篇文章，它解释了如何使用 XML。基本上，您可以只使用节点名称作为属性名称。在你的情况下，你可以写`xmlElement.Phone1`等等。

希望能帮助到你 ：）

# ruby-on-rails-3 - 如何将一个模型与多个模型关联？

> ID：13717099
> 
> 赞同：0
> 
> 时间：2012-12-05T05:49:07.190
> 
> 标签：ruby-on-rails-3, activerecord, associations, rails-migrations

我是一个全新的开发人员，所以这可能是一个愚蠢的问题。

我正在尝试设置一个 webapp，它将存储地理数据的统计信息。

*   我有一个名为**Stat**的模型，其中包含基本统计信息（中位数、方差、平均值等）的字段。
*   我为每个地理单位**City**、**Zip**、**Sub-Zip设置了模型**

我想知道的是将 Stat 模型与 Cities、Zips 和 Sub-Zips 相关联；也就是说，每个统计模型都属于城市、邮编或子邮编，而地理单位（城市、邮编、子邮编）可以有多个统计信息。

我如何设置关联和迁移来做到这一点？我已经查看了 Rails 指南，但它似乎没有涵盖对象可以属于不同模型（但只有其中一个）的关系。或者我应该以不同的方式设置我的模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:11:14.507

你说：

> 每个统计模型都属于城市、邮编或子邮编，而地理单位（城市、邮编、子邮编）可以有多个统计信息。

所以我认为你想建立[**多态关联**](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)：

> 使用多态关联，一个模型可以在一个关联上属于多个其他模型。

所以你的联想可能是这样的：

```
class Stat
  belongs_to :statsable, polymorphic: true
end

class City
  has_many :stats, as: :statsable
end

class Zip
  has_many :stats, as: :statsable
end

class Subzip
  has_many :stats, as: :statsable
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:53:47.707

这可以通过 rails 关联来完成。以下链接详细说明了这一点，

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

# c# - 如何在 unix 系统中托管 windows 服务？

> ID：13717100
> 
> 赞同：0
> 
> 时间：2012-12-05T05:49:08.513
> 
> 标签：c#, unix, windows-services

谁能告诉我在unix系统中托管windows服务的过程？

# c++ - C2679：二进制“<<”：未找到采用“学生”类型右侧操作数的运算符（或没有可接受的转换）

> ID：13717103
> 
> 赞同：2
> 
> 时间：2012-12-05T05:49:21.853
> 
> 标签：c++, class

我真的不知道为什么我会收到错误，但我又不太擅长这个，现在我只是想弄清楚为什么我无法打印出我的记录数组。认为任何人都能够指出我正确的方向吗？它还没有接近完成，所以它有点粗糙......

```
#include <iostream>
#include <fstream>
#include <string> 

using namespace std;

class student
{
private:
    int id, grade;
    string firstname, lastname;

public:
    student();
    student(int sid, string firstn, string lastn, int sgrade);
    void print(student* records, int size);
};

void main()
{
    string report="records.txt";
    int numr=0 , sid = 0,sgrade = 0;
    string firstn,lastn;

    student *records=new student[7];
    student stu;
    student();

    ifstream in;
    ofstream out;

    in.open(report);
    in>>numr;

    for(int i=0; i>7; i++)
    {
        in>>sid>>firstn>>lastn>>sgrade;
        records[i]=student(sid, firstn,lastn,sgrade);
    }

    in.close();

    stu.print(records, numr);

    system("pause");
}

student::student()
{
}

student::student(int sid, string firstn, string lastn, int sgrade)
{
    id=sid;
    firstname=firstn;
    lastname=lastn;
    grade=sgrade;

}

void student::print(student* records, int size)
{
    for(int i=0; i>7; i++)
        cout<<records[i]<< endl;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T05:53:50.283

与 Java 等语言不同，C++ 不提供默认的打印方式。为了使用`cout`你必须做两件事之一：

1.  提供对可打印内容的隐式转换（不要这样做）
2.  像这样重载 << 运算符：

    ```
    ostream& operator <<(ostream& str, const student& printable){
        //Do stuff using the printable student and str to print and format
        //various pieces of the student object
        return str;
        //return the stream to allow chaining, str << obj1 << obj2
    } 
    ```

# javascript - 在适用于 Javascript 的 Google Drive api 中访问令牌管理

> ID：13717106
> 
> 赞同：1
> 
> 时间：2012-12-05T05:49:27.897
> 
> 标签：javascript, authentication, google-drive-api

我的应用程序使用*JavaScript*连接以访问 Google 驱动器 API。（请参阅[https://developers.google.com/drive/quickstart-js](https://developers.google.com/drive/quickstart-js)）。第一次询问用户权限。当时 Google 可能会将 *access_token* 提供给我的应用程序。我想在将来使用令牌访问谷歌驱动器数据（那个时候用户可能没有登录谷歌帐户）。是否可以？如果可能怎么办？应用程序是否可以向 Google 询问“请我想获得用户 user@example.com 的许可”？在多重签名时会很有用

**编辑**：正是我的问题是“在 JavaScript-API 中可以进行离线访问？” 请参阅 PHP-API 中的可能：[https ://developers.google.com/accounts/docs/OAuth2WebServer#offline](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:17:54.840

JavaScript API 使用仅返回访问令牌的 OAuth 2.0 客户端流程。如果您`approval_prompt=auto`在请求 URL 中设置，则仅在用户第一次完成该序列时才会显示给定范围的同意页面，因此他不必再次授予对您应用程序的访问权限：

[https://developers.google.com/accounts/docs/OAuth2UserAgent](https://developers.google.com/accounts/docs/OAuth2UserAgent)

# java - 对数据包缓冲区 JNETPCAP 有异常

> ID：13717107
> 
> 赞同：0
> 
> 时间：2012-12-05T05:49:33.123
> 
> 标签：java, networking, pcap, packet-capture, jnetpcap

嗨，我正在使用此[示例](http://jnetpcap.com/examples/offline)使用 JNETPCAP 进行离线数据包捕获。但我一直收到这个异常，非法争论异常wirelen < buffer len

知道如何解决这个问题吗？

# c# - 使用 ViewBag 传递模型对象

> ID：13717108
> 
> 赞同：5
> 
> 时间：2012-12-05T05:49:33.820
> 
> 标签：c#, asp.net-mvc-3

我正在尝试对我的结果页面进行排序（这是在过滤页面之外的另一个视图中）。我遇到了这个奇怪的问题，我不明白为什么不断发生在我身上。

所有以非常短的形式提供的代码，如果您需要我的代码的任何其他部分以获取更多信息，请询问我。

我的索引视图（用户过滤结果的地方）：

```
@model IEnumerable<Cars.Models.CarSearch>
@using (Html.BeginForm("SearchResult", "Home", FormMethod.Post,
    new
    {
        id = "CategoryFormID",
        data_modelListAction = @Url.Action("ModelList"),
        data_makeListAction = @Url.Action("MakeList"),
        data_editionListAction = @Url.Action("EditionList")
    }))
{
<label>Make</label>
<select id="MakeID" name="carMake">
    <option>All Makes</option>
</select>
} 
```

我的搜索结果视图：

```
@model IEnumerable<Cars.Models.Car>

<a href="@Url.Action("SearchResult", "Home", new { sortOrder= "Make", filters = ViewBag.CurrentFilters})">Make</a> 
```

我的模型：

```
public class Car
{
    public String Make { get; set; }      //is my table model
}

public class CarFilter {
    public String carMake { get; set; }
}

public class CarSearch {
    public CarFilter CarFilter { get; set; }
    public byte PageSize { get; set; }
    public short PageNumber { get; set; }
    public int TotalRows { get; set; }
} 
```

我的控制器：

```
public ActionResult SearchResult(String sortOrder, CarFilter filters)
    {
        ViewBag.CurrentFilters = filters;

        return View();
    } 
```

我要做的就是从 Index 获取 carMake 以 CarFilter 形式将其发布到控制器（因为在我的代码中，表单中有很多字段，我不想把它们全部写下来）当用户点击排序方式 Make it GET SearchResult 方法，它应该设置`filters = ViewBag.CurrentFilters`用户从一开始输入的值。

Now the funny part is, when I replace `CarFilter filters` with `String carMake` and other places respectively. It works like a charm.

My question:

*   Why?

*   How can I do this with `CarFilter filters`?

UPDATE:

Problem is that `filters = ViewBag.CurrentFilters` in my SearchResult view does not work with the type `CarFilter`, because it keeps giving me NULL value when user clicked on the sort by Make.

Second UPDATE:

I tried changing `filters = ViewBag.CurrentFilters` with `CarFilter = ViewBag.CurrentFilters`. Now `CarFilter filters` in my `SearchResult(...)`method in my controller is not and null object, but ALL the values of the objects in the model class is null (which shouldn't be). I mean the filters object exists but it seems like the values of CarFilter class in my model haven't been passed by `ViewBag.CurrentFilters` to the view.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:04:28.937

when you canged the name it worked because framework found property name and the bind it to what you have within action parameters doesnt work so nicely with objects. My advice is to stick with simple types

Here is similiar case: [How to send model object in Html.RenderAction (MVC3)](https://stackoverflow.com/questions/8959425/how-to-send-model-object-in-html-renderaction-mvc3)

Its not a ViewBag problem thants how it works in general. Its the prime reason for using flatted models :/

# asp.net-mvc-3 - 使用自定义应用程序池身份拒绝目录列表

> ID：13717109
> 
> 赞同：3
> 
> 时间：2012-12-05T05:49:36.933
> 
> 标签：asp.net-mvc-3, iis-6, identity, application-pool, applicationpoolidentity

我有一个 ASP.Net MVC3 应用程序，它在我的 IIS 6 服务器上的默认应用程序池中运行良好。

我需要让它在自己的服务帐户下运行，所以我创建了一个新的应用程序池并将应用程序移入其中。使用默认设置，应用程序继续正常工作。

我在应用程序池上设置了一个自定义身份，应用程序现在只给我“目录列表被拒绝”错误。

我尝试将身份切换回网络服务，并且应用程序再次开始工作。

是什么阻止了应用程序使用自定义身份运行？这就像 ASP.Net 甚至没有启动。

我已经运行`aspnet_regiis -ga <domain\username>`并将该帐户添加到 IIS_WPG 组，因此身份帐户应该可以访问 ASP.Net。

**更多信息**

我一直在使用 Process Monitor 进行一些诊断，它表明 aspnet_isapi.dll 没有加载自定义标识。

当身份是“网络服务”时，我可以看到加载了 aspnet_isapi.dll，然后是 webengine4.dll。这会在 NTLM 身份验证发生后立即发生。

使用自定义身份，NTLM 身份验证发生，然后 w3wp 进程开始查找默认文件（Default.aspx、Default.htm 等）。

我已经检查过了，该帐户可以访问存储这些 DLL 的框架版本文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:10:38.510

您需要在应用程序的文件夹级别为您在自定义身份中指定的用户提供显式读取或读/写。右键单击包含文件夹，然后单击“属性”并将具有应用程序所需权限的用户添加到安全选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:25:50.007

结果我需要一个通配符映射到 aspnet.isapi.dll，虽然我不知道为什么。

如果没有自定义标识，应用程序可以在没有通配符映射的情况下正常工作。使用自定义身份，我需要映射。在另一台服务器上，自定义标识可以在没有映射的情况下正常工作。奇怪的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:58:05.293

您是否已经检查过目录浏览设置？

[http://www.iis.net/configreference/system.webserver/directorybrowse](http://www.iis.net/configreference/system.webserver/directorybrowse)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T19:16:23.637

现在您使用的是与默认用户不同的用户，请确保您已将匿名身份验证设置为使用应用程序池用户。也可能与@Gabe Thorns 提到的内容有关，这可能是通配符映射的问题。如果您没有设置通配符映射来运行 asp 进程，那么它将尝试查找文件，避免使用 asp 处理器。

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T20:37:44.070

您是否明确授予对应用程序文件夹上的应用程序池标识的权限？

该帐户应该类似于`IIS AppPool\MyAppPoolName`

![在此处输入图像描述](../Images/531d3ab392b647b8342e6864b5ea7b46.png)

更多信息可以在这里找到： [http ://www.iis.net/learn/manage/configuring-security/application-pool-identities](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)

# python - 如何拥有一个字典，通过列表从另一个特定格式的列表中附加多个值

> ID：13717117
> 
> 赞同：1
> 
> 时间：2012-12-05T05:50:12.120
> 
> 标签：python, python-3.x

我目前遇到了一个我无法正确思考的问题

我有一个以特定格式读取的文本文件的情况

（捕食者）吃（猎物）

我正在尝试做的是将它放入字典中，但是在某些情况下存在多行。

（捕食者）吃（猎物）

同一个捕食者出现吃不同的猎物。

到目前为止，这就是它的样子......

```
import sys

predpraydic={}#Establish universial dictionary for predator and prey
openFile = open(sys.argv[1], "rt") # open the file

data = openFile.read() # read the file
data = data.rstrip('\n') #removes the empty line ahead of the last line of the file
predpraylist = data.split('\n') #splits the read file into a list by the new line character

for items in range (0, len(predpraylist)): #loop for every item in the list in attempt to split the values and give a list of lists that contains 2 values for every list, predator and prey
    predpraylist[items]=predpraylist[items].split("eats") #split "eats" to retrive the two values
    for predpray in range (0, 2): #loop for the 2 values in the list
        predpraylist[items][predpray]=predpraylist[items][predpray].strip() #removes the empty space caued by splitting the two values
for items in range (0, len(predpraylist)
    if 

for items in range (0, len(predpraylist)): # Loop in attempt to place these the listed items into a dictionary with a key of the predator to a list of prey
    predpraydic[predpraylist[items][0]] = predpraylist[items][1]

print(predpraydic)  
openFile.close() 
```

如您所见，我只是将格式转储到我尝试转换为字典的列表中。

但是这种方法只接受一个键值。我想要有两件事的东西

狮子吃斑马 狮子吃狗

有一本字典

狮子：['斑马'，'狗']

我想不出这样做的方法。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:00:11.493

有两种合理的方法可以制作包含您添加到的列表而不是单个项目的字典。第一个是在添加新值之前检查现有值。第二种是使用更复杂的数据结构，它负责在必要时创建列表。

这是第一种方法的快速示例：

```
predpreydic = {}

with open(sys.argv[1]) as f:
    for line in f:
        pred, eats, prey = line.split() # splits on whitespace, so three values
        if pred in predpreydic:
            predpreydic[pred].append(prey)
        else:
            predpreydic[pred] = [prey] 
```

第一种方法的变体用字典上稍微更微妙的方法调用替换了`if`/块：`else`

```
 predpreydic.setdefault(pred, []).append(prey) 
```

如果该方法不存在，则该`setdefault`方法设置为一个空列表，然后返回该值（新的空列表或先前的现有列表）。`predpredic[pred]`它的工作方式与解决问题的另一种方法非常相似，这是接下来的问题。

我提到的第二种方法涉及模块中[的`defaultdict`类](http://docs.python.org/3/library/collections.html#collections.defaultdict)`collections`（Python 标准库的一部分）。这是一个字典，每当您请求一个尚不存在的键时，它都会创建一个新的默认值。为了按需创建值，它使用您在首次创建`defaultdict`.

这是您的程序使用它的样子：

```
from collections import defaultdict

predpreydic = defaultdict(list) # the "list" constructor is our factory function

with open(sys.argv[1]) as f:
    for line in f:
        pred, eats, prey = line.split()
        predpreydic[pred].append(prey) #lists are created automatically as needed 
```

# css - iphone上的选择列表看起来很奇怪

> ID：13717118
> 
> 赞同：0
> 
> 时间：2012-12-05T05:50:15.823
> 
> 标签：css, mobile

我正在为一个网站构建一个移动样式表，并且在两个页面上的选择列表中遇到了障碍。

这是一个链接： [http ://www.mniac.com/roche/multiple-positions.php](http://www.mniac.com/roche/multiple-positions.php)

您会注意到它在桌面浏览器中看起来不错，但如果在 iphone 或 ios 模拟器上进行测试，任何手风琴中的选择列表看起来有点空白（没有标准样式）......任何想法为什么会发生这种情况？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:15:13.270

从样式表中删除这两个属性，然后尝试

背景图像：背景颜色：

# jquery - 如何在 div 内自动停止和滚动？

> ID：13717123
> 
> 赞同：1
> 
> 时间：2012-12-05T05:50:46.507
> 
> 标签：jquery, jquery-ui

我有一个 div，在里面我想一次显示 3 个文本。像 Windows 8 Metro 主题。我有三个这样的div：

`<div id='a'> Text 1</div>` `<div id='b'> Text 2</div>` `<div id='c'> Text 3</div>`

和另一个包含所有这些的主 div。我想在包装器内一次显示一个 div，而不会从下到上发生任何事件，并且新的 div 会滑过另一个。

PS：我已经看到如何使用图像和 css 来做到这一点。但是我想通过html而不是图像来显示文本，有没有办法使用jquery来做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:05:40.053

一个基本的例子：http: [//jsfiddle.net/rNcNA/](http://jsfiddle.net/rNcNA/)

HTML：

```
<div id="container">
    <div class="content">Some content here</div>
    <div class="content hidden">Other content here</div>
    <div class="content hidden">Yet more content here</div>
</div>​ 
```

JavaScript：

```
$(document).ready(function() {
    var interval = 2000; // 2 seconds
    var contents = $('#container').find('.content');
    var index = 0;
    var display = function(index) {
        $('.content:visible').fadeOut('fast', function() { $(contents[index]).fadeIn(); });
        index += 1;
        if (index > contents.length-1) {
            index = 0;
        }
        setTimeout(function() { display(index) }, interval);
    }

    display(index);
});​ 
```

# java - Java JVM 或 Eclipse 启动开销

> ID：13717124
> 
> 赞同：1
> 
> 时间：2012-12-05T05:50:50.907
> 
> 标签：java, eclipse, performance, profiling

我有一个在 Eclipse (Indigo) 和 Javd 1.7x 下运行的网络线程应用程序。很长一段时间以来，我注意到应用程序的第一次运行导致前端和后端加载性能下降，例如，如果我要加载应用程序，然后用 100 个网络数据包击中它（使用测试工具）前几个反应非常不稳定，最后几个反应。[编辑]无需卸载应用程序，只需再次运行测试工具，应用程序即可正常运行。[结束编辑]

我决定尝试深入了解它并加载 VisualVM 1.3.5 来分析行为。CPU 使用率在运行开始时有一个明显的峰值，从 10% 上升到 50% 以上。在峰值之后，一切看起来都正常，并且如上所述，后续运行在 CPU 利用率中没有领先的峰值，后续运行的配置文件与第一次运行的峰值之间的配置文件相同。似乎没有任何证据表明线程数导致它，但有小幅上升。堆空间从 100MB 增加到 200MB，但除此之外一切正常。

任何想法都会受到欢迎。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:54:08.447

这对于 OSGi 环境很典型，其中捆绑包可能会在首次访问捆绑包类或服务时延迟初始化。

`-console -consolelog`您可以通过使用参数启动 eclipse 来确定您的场景是否属于这种情况。

当控制台打开并加载应用程序时，发出`ss`命令并注意哪些包被标记为 LAZY。`ss`然后，运行您的测试，再次发出，并查看其中一个 LAZY 捆绑包现在是否已激活。如果是这样，您可以通过 configuration/config.ini 文件强制急切启动您的包。这也可以通过[IStartup](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/IStartup.html)扩展点来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:07:03.613

第一次运行测试时系统性能不稳定是相当典型的。这是由于操作系统从磁盘读取库、JAR 文件和其他数据并将其存储在缓存中。一旦完成，第一次所有后续运行将更快，更一致。

另外，请记住，JVM 在启动后也会变得更慢。由于其热点分析和即时编译，在 JVM 为您的特定工作负载优化字节码之前，代码需要运行一段时间。

# iphone - iPhone sdk如何接收字符串值？

> ID：13717127
> 
> 赞同：0
> 
> 时间：2012-12-05T05:50:56.303
> 
> 标签：iphone, string, plist

在我的应用程序中，我需要提供三种语言支持。我的默认语言是英语。一旦用户在设置控制器中选择了其他语言，整个应用程序应更改为该特定语言。为此，我决定创建一个包含所有三种语言及其数据的 plist 文件。现在我的默认语言是英语，这很好。现在我在 LanguageController 中使用 plist 更改了语言并推送到主控制器。我的家庭控制器未收到所选语言（法语）字符串。这是我的代码，

```
//LanguageController.h

NSMutableDictionary *allDictElements;
NSString *selectedLanguage1;
NSArray *dummy;

@property(nonatomic,retain) NSMutableDictionary *allDictElements;
@property(nonatomic,retain) NSString *selectedLanguage1;
@property(nonatomic,retain) NSArray *dummy;

 //LanguageController.m

@synthesize allDictElements,selectedLanguage1,dummy;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    NSString *path= [[NSBundle mainBundle] pathForResource:@"Language" ofType:@"plist"];

    allDictElements = [[NSMutableDictionary alloc] initWithContentsOfFile:path];
    NSLog(@"%@allDictElements",allDictElements);

    LeeValleyHomeViewController *homeController = [[LeeValleyHomeViewController alloc] initWithNibName:@"LeeValleyHomeViewController" bundle:[NSBundle mainBundle]];

     if (indexPath.row ==0)
     {
        //bookshelf button
        NSMutableDictionary *english=[[NSMutableDictionary alloc]init];
        english=[allDictElements objectForKey:@"English Language"];
        dummy=[english objectForKey:@"English"];
        selectedLanguage1=[dummy objectAtIndex:0];
        NSLog(@"english bookshelf button:%@",selectedLanguage1);
        homeController.selectedLanguage = selectedLanguage1;  
        NSLog(@"sel lang:%@",homeController.selectedLanguage);

     } else if (indexPath.row ==1) {
        //bookshelf button
        NSMutableDictionary *french=[[NSMutableDictionary alloc]init];
        french=[allDictElements objectForKey:@"French Language"];
        dummy=[french objectForKey:@"French"];
        selectedLanguage1=[dummy objectAtIndex:0];
        NSLog(@"french bookshelf button:%@",selectedLanguage1);
        homeController.selectedLanguage = selectedLanguage1;
        NSLog(@"sel lang:%@",homeController.selectedLanguage);

    } else {

        NSMutableDictionary *spanish=[[NSMutableDictionary alloc]init];
        spanish=[allDictElements objectForKey:@"Spanish Language"];
        dummy=[spanish objectForKey:@"Spanish"];
        selectedLanguage1=[dummy objectAtIndex:0];
        NSLog(@"spanish bookshelf button:%@",selectedLanguage1);
        homeController.selectedLanguage = selectedLanguage1;
        NSLog(@"sel lang:%@",homeController.selectedLanguage);
    }

    [self.navigationController pushViewController:homeController animated:YES];
} 
```

在这个控制器中，我很好地接收到选定的语言字符串。

```
//LeeValleyHomeViewController.h

NSString *selectedLanguage;

@property (nonatomic,retain) NSString *selectedLanguage;

 //LeeValleyHomeViewController.m

@synthesize selectedLanguage;

- (void)viewDidLoad
{
    LanguageViewController lvc = [LanguageViewController alloc]init];
    bookshelfbtn.titleLabel.text = lvc.selectedLanguage1;
    NSLog(@"button title:%@",bookshelfbtn.titleLabel.text);
   //bookshelfbtn.titleLabel.text = selectedLanguage;
} 
```

在此控制器中，没有收到该字符串值。我的代码有什么问题？或者我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:08:00.360

您可以将所选语言保存在 NSUserDefaults 中，然后在 LeeValleyHomeViewController.m 的 ViewDidLoad 中检索它，如下所示.....

在你的，

*   (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

    {

    // 选择语言后

    [[NSUserDefaults standardUserDefaults]setValue:selectedLanguage1 forKey:@"language"]; [[NSUserDefaults standardUserDefaults]synchronize];

    }

//LeeValleyHomeViewController.m

*   (void)viewDidLoad

{

```
NSLog(@"button title:%@",bookshelfbtn.titleLabel.text);
bookshelfbtn.titleLabel.text =  [[NSUserDefaults standardUserDefaults]valueForKey forKey:@"language"];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:04:14.843

我不确定您在第一个代码块中的“”是否与您在第二个代码块中的`LanguageController`“”相同`LanguageViewController`。

但如果是的话，你为什么认为`selectedLanguage1`在你实例化那个“”之后“”属性会被设置为零以外的任何值`LanguageViewController`？用户尚未触摸任何单元格，因此它可能是唯一的语言是英语（值为零）。

# sed - 使用 sed 从文本文件中删除列

> ID：13717128
> 
> 赞同：4
> 
> 时间：2012-12-05T05:51:10.073
> 
> 标签：sed

我想从空格分隔的文本文件中删除第 1、2、4、5、6、10、11、12 列。我想从现有文件中删除这些列，而不是打印输出。我怎样才能用 sed 做到这一点？

```
MMMM   1522  KL1 PPP A 201      -7.299   41.933  48.192  1.00 31.52           G
MMMM     22  G   SSS A   3       39.541  25.078  -2.722  1.00 30.47           B 
```

期望的输出

```
KL1    -7.299   41.933  48.192
G       39.541  25.078  -2.722 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T06:04:10.447

`sed`不会很理想。使用`cut`：

```
cut -d ' ' --complement -f -2,4-6,10-12 file.txt 
```

***编辑：***

从评论的附加信息：

```
< file.txt awk '{ print $3, $7, $8, $9 }' | column -t 
```

结果：

```
KL1  -7.299  41.933  48.192
G    39.541  25.078  -2.722 
```

要覆盖您的文件，您需要使用一个临时文件：

```
< file.txt awk '{ print $3, $7, $8, $9 }' | column -t > tmpfile && mv tmpfile file.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T06:01:55.380

如果是一项真正的任务（不是家庭作业），最好这样做`awk`：

```
awk '{for(i=1;i<=NF;++i) if (i != 1 && i!=2 && i!=4 && i!=5 && i!=6 && i!=10 && i!=11 && i!=12) printf("%s ", $i);  printf("\n"); }' f.txt 
```

或者，如果您只需要打印第 3、7、8、9 列：

```
awk '{print $3" "$7" "$8" "$9}' f.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T07:07:18.887

这可能对您有用（GNU sed）：

```
sed -r 's/^(\S+\s+){3}(\S+\s+){3}((\S+\s+){2}\S+).*/\1\3/' file 
```

或者：

```
sed -r 's/^\S+\s+\S+\s+(\S+\s+)\S+\s+\S+\s+\S+\s+(\S+\s+\S+\s+\S+).*/\1\2/' file 
```

或对于大多数 sed 变体：

```
sed -e 's/^[^ ][^ ]*  *[^ ][^ ]*  *\([^ ][^ ]*  *\)[^ ][^ ]*  *[^ ][^ ]*  *[^ ][^ ]*  *\([^ ][^ ]*  *[^ ][^ ]*  *[^ ][^ ]*\).*/\1\2/' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T06:28:28.943

```
> echo "1 2 3 4 5 6 7 8 9 10 11 12"|perl -F -ane '$F[0]=$F[1]=$F[3]=$F[4]=$F[5]=$F[9]=$F[10]=$F[11]="";print "@F";'
  3    7 8 9 
```

在 awk 中：

```
echo "1 2 3 4 5 6 7 8 9 10 11 12" | awk '{$1=$2=$4=$5=$6=$10=$11=$12="";print}'
3    7 8 9 
```

# android - 只有在单击 ListView 中的列表项后，切换按钮才会成为焦点

> ID：13717129
> 
> 赞同：0
> 
> 时间：2012-12-05T05:51:15.570
> 
> 标签：android, android-listview, listviewitem, togglebutton

我有一个带有两个 Textview 和切换按钮的 Listview，并且我有 ToggleChangeListener 用于切换按钮。但是，如果我单击切换按钮而不单击列表项，则它不会进入焦点（即未调用侦听器），而是在单击 Listview 中的列表项后进入焦点

我的代码片段：

```
alarmList.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View v, final int pos,
            long arg3) {

        System.out.println("Item On click is Called");

        toggle = (ToggleButton) v.findViewById(R.id.tg);
        toggle.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                System.out
                        .println("On click of the Toggle Button is called !!");
                if (toggle.isChecked()) {
                    System.out.println("Checked");
                } else {
                    System.out.println("Not Checked ");
                }
            }
        });
    }
}); 
```

我的 LISVIEW XML 代码：

```
 android:id="@+id/alarmlist"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:divider="#fff"
    android:dividerHeight="2dp" > 
```

我的切换按钮 XML 代码：

```
 android:id="@+id/tg"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:text="ToggleButton" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:53:50.503

要调用切换按钮侦听器，您需要从 onItemClick 侦听器中删除切换按钮代码并将其放在侦听器之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:54:55.667

> 但是，如果我单击切换按钮而不单击列表项，则它不会进入焦点（即未调用侦听器），而是在单击 Listview 中的列表项后进入焦点

这是因为您的`onItemClick()`方法中的代码在至少单击一次之前不会运行。

您需要创建一个自定义适配器并在`getView()`方法中定义 ToggleButton 的行为，以使您的按钮以您期望的方式运行。

* * *

像这样的东西：

```
public class MyAdapter extends ArrayAdapter<String> {
    public MyAdapter(Context context, int textViewResourceId, List<String> objects) {
        super(context, textViewResourceId, objects);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = super.getView(position, convertView, parent);

        ToggleButton toggle = (ToggleButton) view.findViewById(R.id.tg);
        toggle.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                System.out
                        .println("On click of the Toggle Button is called !!");
                if (toggle.isChecked()) {
                    System.out.println("Checked");
                } else {
                    System.out.println("Not Checked ");
                }
            }
        });

        return view;
    }
} 
```

（......但是这个特定的例子并不是最有效的方法，请观看 Android 的 Romain Guy[讨论如何为大量信息创建快速适配器](http://www.youtube.com/watch?v=N6YdwzAvwOA)，我无法在这里填写答案。）

# pdf - 如何使用 poppler 从 pdf 中访问主题名称？

> ID：13717131
> 
> 赞同：1
> 
> 时间：2012-12-05T05:51:24.503
> 
> 标签：pdf, poppler

我正在使用 poppler，我想使用 poppler 访问特定页码的主题或标题，所以请告诉我如何使用 poppler 执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:19:41.773

使用 glib API。不知道你想要哪个 API。

我很确定特定页面中没有存储主题/标题。你必须走索引，如果有的话。

使用回溯遍历[索引。](http://people.freedesktop.org/~ajohnson/docs/poppler-glib/PopplerDocument.html#poppler-index-iter-new)如果幸运的话，每个索引节点都包含一个[PopplerActionGotoDest](http://people.freedesktop.org/~ajohnson/docs/poppler-glib/poppler-PopplerAction.html#PopplerActionGotoDest)（检查类型！）。您可以从 PopplerAction 对象 ( **gchar *title** ) 中获取标题，并从包含的[PopplerDest](http://people.freedesktop.org/~ajohnson/docs/poppler-glib/poppler-PopplerAction.html#PopplerDest) ( **int page_num** ) 中获取页码。page_num 应该是该部分的第一页。

假设您的 PDF 有一个包含 PopplerActionGotoDest 对象的索引。然后你只需步行，检查**page_num**。如果 page_num > searched_num，则返回上一步。当您在正确的父母身边时，请带孩子走。这应该给你最好的匹配。我刚刚为它做了一些代码：

```
gchar* getTitle(PopplerIndexIter *iter, int num, PopplerIndexIter *last,PopplerDocument *doc)
{
    int cur_num = 0;
    int next;
    PopplerAction * action;
    PopplerDest * dest;
    gchar * title = NULL;
    PopplerIndexIter  * last_tmp;

    do
    {
            action = poppler_index_iter_get_action(iter);
            if (action->type != POPPLER_ACTION_GOTO_DEST) {
                printf("No GOTO_DEST!\n");
                return NULL;
            }

            //get page number of current node
            if (action->goto_dest.dest->type == POPPLER_DEST_NAMED) {
                dest = poppler_document_find_dest (doc, action->goto_dest.dest->named_dest);
                cur_num = dest->page_num;
                poppler_dest_free(dest);
            } else {
                cur_num = action->goto_dest.dest->page_num;
            }
            //printf("cur_num: %d, %d\n",cur_num,num);

            //free action, as we don't need it anymore
            poppler_action_free(action);

            //are there nodes following this one?
            last_tmp = poppler_index_iter_copy(iter);
            next = poppler_index_iter_next (iter);

            //descend
            if (!next || cur_num > num) {
                if ((!next && cur_num < num) || cur_num == num) {
                    //descend current node
                    if (last) {
                        poppler_index_iter_free(last);
                    }
                    last = last_tmp;
                }
                //descend last node (backtracking)
                if (last) {
                    /* Get the the action and do something with it */
                    PopplerIndexIter *child = poppler_index_iter_get_child (last);
                    gchar * tmp = NULL;
                    if (child) {
                        tmp = getTitle(child,num,last,doc);
                        poppler_index_iter_free (child);
                    } else {
                        action = poppler_index_iter_get_action(last);
                        if (action->type != POPPLER_ACTION_GOTO_DEST) {
                            tmp = NULL;
                        } else {
                            tmp = g_strdup (action->any.title);
                        }
                        poppler_action_free(action);
                        poppler_index_iter_free (last);
                    }

                    return tmp;
                } else {
                    return NULL;
                }
            }

            if (cur_num > num || (next && cur_num != 0)) {
                // free last index_iter
                if (last) {
                    poppler_index_iter_free(last);
                }
                last = last_tmp;
            }
    }
  while (next);

    return NULL;
} 
```

**getTitle**被调用：

```
 for (i = 0; i < num_pages; i++) {
            iter = poppler_index_iter_new (document);
            title = getTitle(iter,i,NULL,document);
            poppler_index_iter_free (iter);

            if (title) {
                printf("title of %d: %s\n",i, title);
                g_free(title);
            } else {
                printf("%d: no title\n",i);
            }
    } 
```

# iphone - 使用 Pinterest 登录

> ID：13717133
> 
> 赞同：4
> 
> 时间：2012-12-05T05:51:34.987
> 
> 标签：iphone, objective-c, ios, login, pinterest

我可以在 iPhone 上轻松实现使用 facebook 登录。但我听说，pinterest 没有官方 API。

所以我想知道是否有办法用 Pinterest 实现登录。所以我的应用程序可以在用户使用 pinterest 登录后识别用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T05:54:47.353

[如果没有官方的 Pinterest 公共 API](https://support.pinterest.com/entries/21151603-i-m-a-developer-does-pinterest-have-a-public-api)，您编写的任何其他解决方法都可能很容易被破坏。最好直接向 Pintrist 注册，并希望他们一旦想出测试版 SDK 或 API，就会为您提供访问权限。

也就是说，[似乎有一些东西可能可用](https://stackoverflow.com/questions/9951045/pinterest-api-documentation)，但不确定当前状态是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:05:54.030

Pintrest 使用 oAuth2，您应该能够像所有其他提供者一样使用它，即 GET 请求到某个 url 以获取令牌，可以在此处找到分步说明 [http://tijn.bo.lt/pinterest-api](http://tijn.bo.lt/pinterest-api)

OAuth2 是官方 api 问题归结为查找端点和 GET 语法需要注意的一点是，返回的对象可以包含跨提供商的不同值，例如我需要 Twitter 和 FB 解决方案，但 Twitter 没有给你用户的电子邮件，因此您必须单独询问（以唯一标识跨提供商的同一帐户） 对于 ruby​​，有omniauth gem，可让您轻松使用多个提供商（策略）。推出自己的解决方案或为 IOS 找到库应该不会太复杂

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:06:03.097

嗨，Pinterest 没有官方 api，但
[这里](https://stackoverflow.com/questions/9951045/pinterest-api-documentation)有一个已经回答的链接

或尝试这样，创建具有以下目标的按钮
`[pintrestBtn addTarget:self action:@selector(pintrestButtonSelcted) forControlEvents:UIControlEventTouchUpInside]`

并在`htmlstring`完美 url 出现时将其推送到另一个具有 webview 的视图控制器并将其加载`htmlstring`到该 webview 中

```
- (void) pintrestButtonSelcted {

NSString *htmlString = [self generatePinterestHTMLForSKU:nil];
NSLog(@"Generated HTML String:%@", htmlString);
WebViewController *webViewController = [[WebViewController alloc] init];
webViewController.htmlString = htmlString;
webViewController.view.frame = CGRectMake(0, 0, 300, 300);
[self presentModalViewController:webViewController animated:YES]; 
```

}

```
- (NSString*) generatePinterestHTMLForSKU:(NSString*)sku {
NSString *description = @"Post your description here";

// Generate urls for button and image
NSString *sUrl = [NSString stringWithFormat:@"http://reedperry.com/2011/04/27/apple-logo/"];
NSLog(@"URL:%@", sUrl);
NSString *protectedUrl = ( NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,( CFStringRef)sUrl, NULL, (CFStringRef)@"!*'\"();:@&=+$,/?%#[]% ",CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));
NSLog(@"Protected URL:%@", protectedUrl);
NSString *imageUrl = [NSString stringWithFormat:@"\"%@\"", sUrl];
NSString *buttonUrl = [NSString stringWithFormat:@"\"http://pinterest.com/pin/create/button/?url=http://itunes.apple.com/us/app/pinterest/id429047995?mt=8&media=http://reedperry.com/2011/04/27/apple-logo/%@&description=Welcome you all%@\"", protectedUrl, description];

NSMutableString *htmlString = [[NSMutableString alloc] initWithCapacity:1000];
[htmlString appendFormat:@"<html> <body>"];
[htmlString appendFormat:@"<p align=\"center\"><a href=%@ class=\"pin-it-button\" count-layout=\"horizontal\"><img border=\"0\" src=\"http://assets.pinterest.com/images/PinExt.png\" title=\"Pin It\" /></a></p>", buttonUrl];
[htmlString appendFormat:@"<p align=\"center\"><img width=\"400px\" height = \"400px\" src=%@></img></p>", imageUrl];
[htmlString appendFormat:@"<script type=\"text/javascript\" src=\"//assets.pinterest.com/js/pinit.js\"></script>"];
[htmlString appendFormat:@"</body> </html>"];
return htmlString; 
```

}

# javascript - 检测浏览器是否为三星手机

> ID：13717145
> 
> 赞同：6
> 
> 时间：2012-12-05T05:52:02.920
> 
> 标签：javascript, user-agent, samsung-mobile

有没有人想出一个好方法来检测客户端的浏览器是否是三星手机。我专门在寻找三星 S3 和 Note 2，但如果它能够捕获 S2 和 Note 1 或其他三星手机，我可以接受。面向未来的东西（即可能与 S4 / Note3 一起工作显然是理想的）。

似乎没有像 iPhone 那样直接的方式来做到这一点，但是对于庞大的 S3 和 Note2 用户群，我们希望为这些设备进行定制。

我知道并非所有 S3 都具有相同的用户代理（http://stackoverflow.com/questions/11282944/what-is-the-samsung-s3-user-agent）

如果有人将手机设置为 PC 版本，那么我不希望能抓住这些（http://stackoverflow.com/questions/11597940/android-phone-browser-detection）

我意识到这可能是一个没有好的解决方案的问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-03-24T09:52:27.647

### 检测三星手机或平板电脑默认浏览器

```
if(navigator.userAgent.match(/SAMSUNG|SGH-[I|N|T]|GT-[I|P|N]|SM-[N|P|T|Z|G]|SHV-E|SCH-[I|J|R|S]|SPH-L/i))  {
    alert("it's Samsung default browser");
    // your code for Samsung goes here
} 
```

此正则表达式涵盖了几乎所有三星移动设备，除了`Samsung Galaxy Nexus`，请验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:58:41.920

显然很难仅检测到三星手机，但如果您[在此处查看，并在](http://en.wikipedia.org/wiki/Samsung_Galaxy_S_III#Model_variants)[此处](https://stackoverflow.com/questions/11282944/what-is-the-samsung-s3-user-agent)查看您的问题中的用户代理问题，您会注意到用户代理取决于手机型号。

仅限于GS3，有很多型号，例如GT-I9300[T]、SHV-E210K/L/S、SGH-T999[v]、SGH-I747[m]、SGH-N064（SC- 06D), SCH-R530, SCH-I535, SPH-L710, GT-I9305[T], GT-I9308

我不是网络开发人员，我不确定您将如何检测用户代理的特定部分，但如果您可以针对 GS3 的每个型号调整您的代码，我假设这会很好。Note 2 的型号也是如此，当它们出现时，GS4/Note 3 也是如此。

# r - 带空逗号的 read.csv.sql

> ID：13717147
> 
> 赞同：0
> 
> 时间：2012-12-05T05:52:33.537
> 
> 标签：r, sqldf

我有一个带有固定标题的 csv 文件。但是某些列值可能会因空逗号而丢失。这给 read.csv.sql 带来了问题。我是否缺少此功能的任何参数？我希望阅读 null/NA - 有什么解决方法吗？

示例文件内容 -

> 一天，车1，车2
> 
> 1、宝马、奥迪
> 
> 2、奔驰、宝马
> 
> 3、奥迪
> 
> 4,,

我得到这个错误 -

扫描错误（文件，内容，nmax，sep，dec，quote，skip，nlines，na.strings，：第 1 行没有 45 个元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:55:27.020

巨大的文件首先被分成更小的块。然后`csv`使用带有分隔符的 Excel 打开`,`。标题（45 个元素）和下一行（43 个元素）中的逗号数量不匹配。

# ios - StoreKit 验证错误 21002：receipt-data 属性中的数据格式错误

> ID：13717148
> 
> 赞同：3
> 
> 时间：2012-12-05T05:52:34.043
> 
> 标签：ios, testing, app-store, storekit

在 iPhone 4/iOS 4 设备上，沙盒 App Store 在验证期间报告此错误：

> 21002：receipt-data 属性中的数据格式不正确。

在 iPhone 5/iOS 6 设备上，相同的代码可以正常工作（状态 == 0，收据返回），没有任何问题。

我重新启动了设备，确保 Apple ID 已注销，甚至创建了一个新的测试用户帐户。结果相同。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T06:23:14.660

此错误表示您创建用于发送验证的 JSON 对象格式不正确。

```
{
    "receipt-data" : "(receipt bytes here)"
} 
```

所以我的建议是在 iPhone 4/iOS 4 上进行相同的调试。如果您使用 Json 框架创建 JSON 对象（用于收据验证），它将仅适用于 iOS 5.0 及更高版本。

添加我已经实现了几个月的代码我使用 SBJson 编写了 N 解析。

```
NSString *base64TxReceiptStr=[NSData Base64Encode:transaction.transactionReceipt];

SBJsonWriter *writer = [[SBJsonWriter alloc] init];
NSDictionary *command = [NSDictionary dictionaryWithObjectsAndKeys:
                         base64TxReceiptStr, @"receipt-data",
                         nil];
NSString *jsonString = [writer stringWithObject:command];
NSData *requestBody=[jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSMutableURLRequest *txReceiptVerificationRequest=[[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"https://sandbox.itunes.apple.com/verifyReceipt"]];
[txReceiptVerificationRequest setHTTPBody:requestBody];
[txReceiptVerificationRequest setHTTPMethod:@"POST"];

NSURLResponse *response=nil;
NSError *error=nil;
NSData *responseData=[NSURLConnection sendSynchronousRequest:txReceiptVerificationRequest returningResponse:&response error:&error];
NSString * receivedString=[[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

SBJsonParser *parser = [[SBJsonParser alloc] init];
NSDictionary *aobject =[parser objectWithString:receivedString];` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:19:25.740

对于您的沙盒环境，请使用：[https ://sandbox.itunes.apple.com/verifyReceipt](https://sandbox.itunes.apple.com/verifyReceipt)

实际验证使用：[https ://buy.itunes.apple.com/verifyReceipt](https://buy.itunes.apple.com/verifyReceipt)

您可以在 Apple 的官方页面上查看。

# c++ - 多维边界框碰撞检测

> ID：13717150
> 
> 赞同：3
> 
> 时间：2012-12-05T05:52:42.213
> 
> 标签：c++, algorithm, math, game-physics

有 2D/3D 边界框碰撞检测的答案，但是我的问题是如何将情况发展到多维（4D 或更多）？

这是3D案例的代码。

```
template<typename T, typename _Prd>
bool BoundingBox3<T,_Prd>::Collision( const BoundingBox3<T,_Prd>& cube ) const
{

    Point3<T,_Prd> min_1 = center - Point3<T,_Prd>(length,depth,height)/2.0;
    Point3<T,_Prd> max_1 = center + Point3<T,_Prd>(length,depth,height)/2.0;

    Point3<T,_Prd> min_2 = cube.Center() - Point3<T,_Prd>(cube.Length(),cube.Depth(),cube.Height())/2.0;
    Point3<T,_Prd> max_2 = cube.Center() + Point3<T,_Prd>(cube.Length(),cube.Depth(),cube.Height())/2.0;

    if(Volume()<cube.Volume())
    {
        Vector3D::Swap(min_1,min_2);
        Vector3D::Swap(max_1,max_2);
    }

    if(min_1[0]<=min_2[0] && min_1[1]<=min_2[1] && min_1[2]<=min_2[2]
    && max_1[0]>=min_2[0] && max_1[1]>=min_2[1] && max_1[2]>=min_2[2])
        return true;

    if(min_1[0]<=max_2[0] && min_1[1]<=max_2[1] && min_1[2]<=max_2[2]
    && max_1[0]>=max_2[0] && max_1[1]>=max_2[1] && max_1[2]>=max_2[2])
        return true;

    return false;
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T06:04:26.530

如果在所有维度上都存在相交范围，则一个框与另一个框发生碰撞。

范围 [a,b] 与范围 [c,d] 的交集是 [max(a,c),min(b,d)]。

在范围不相交的情况下，结果将是无效范围，范围的开始大于范围的结束。

所以碰撞可以这样进行：

```
bool collides(const Box &box1,const Box &box2)
{
  assert(box1.numberOfDimensions()==box2.numberOfDimensions());
  for (size_t i=0; i!=box1.numberOfDimensions(); ++i) {
    float a = max(box1.minForDimension(i),box2.minForDimension(i));
    float b = min(box1.maxForDimension(i),box2.maxForDimension(i));
    if (a>b) return false;
  }
  return true;
} 
```

# java - 显示 24 小时制时间的问题

> ID：13717153
> 
> 赞同：2
> 
> 时间：2012-12-05T05:53:19.503
> 
> 标签：java, android, datetime

我使用以下行代码从`Calendar`实例中以 24 小时格式显示时间一切都正确显示，但唯一的问题是在午夜 12:00 显示时间时，它显示时间为 24:00 而不是显示 00:00。为什么这会在我的代码中发生任何错误。

```
Calendar m_CalInstance = Calendar.getInstance();  
SimpleDateFormat formatter = new SimpleDateFormat("kk:mm");

String timeDisplay = formatter.format(m_CalInstance.getTime()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T05:54:54.683

```
SimpleDateFormat formatter = new SimpleDateFormat("kk:mm"); 
```

应该

```
SimpleDateFormat formatter = new SimpleDateFormat("HH:mm"); 
```

检查此[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/SimpleDateFormat.html)以获取有关的更多信息`SimpleDateFormat`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:55:26.683

使用大写字母**KK**代替`kk`此处

```
SimpleDateFormat formatter = new SimpleDateFormat("KK:mm"); 
```

# android - 如何在android中的相机预览中添加水印

> ID：13717155
> 
> 赞同：0
> 
> 时间：2012-12-05T05:53:22.810
> 
> 标签：android

我在我的应用程序中使用相机预览。它应该在拍照时有水印，甚至在显示预览后也应该有水印。它还应该使用该水印保存图像。

我刚刚添加了 Imageview，以便在拍照时显示图像。

```
 <FrameLayout android:id="@+id/preview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/button_layout"
        android:layout_below="@+id/middle1">
  </FrameLayout>

  <ImageView android:id="@+id/img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/button_layout"

        android:background="@drawable/fblogo"  /> 
```

我可以在拍照并显示图像预览时保留此图像。但它没有保存此水印。

我认为它只是显示图像。即使在拍摄图像后，我如何才能将此水印添加到图像中。

我添加的这个图像视图只是显示在我的表面视图上，但是图像没有使用这个水印保存。只有从相机拍摄的图像被保存。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:13:05.503

您必须从拍摄的照片中制作[画布](http://developer.android.com/reference/android/graphics/Canvas.html)，然后在画布上叠加水印图像。

尝试回答 Declan Shanaghy

[Android：如何覆盖位图/绘制位图？](https://stackoverflow.com/questions/1540272/android-how-to-overlay-a-bitmap-draw-over-a-bitmap)

# jquery - KnockoutJS 映射模型添加到 Observable 数组

> ID：13717156
> 
> 赞同：2
> 
> 时间：2012-12-05T05:53:25.850
> 
> 标签：jquery, json, knockout.js, knockout-mapping-plugin

我想从一个基本上是 AJAX 帖子的动态模型创建一个可观察数组，以获取 JSON 信息。然后我想将该数组添加到表中。

这是我创建 Viewmodel 的 Javascript，以及要添加到数组的内容：

```
var ProductViewmodel;
    function bindProductModel(Products) {
        var self = this;
        self.items = ko.mapping.fromJS([]);
        ProductViewmodel = ko.mapping.fromJS(Products, self.items);
        console.log(ProductViewmodel);
        ko.applyBindings(ProductViewmodel);
    }

    function JSONProducts() {
        $.ajax({
            url: "WebForm1.aspx/AvailibleProducts",
            // Current Page, Method  
            data: '{Warehouse: 1}',
            // parameter map as JSON  
            type: "POST",
            // data has to be POSTed  
            contentType: "application/json; charset=utf-8",
            // posting JSON content      
            dataType: "JSON",
            // type of data is JSON (must be upper case!)  
            timeout: 10000,
            // AJAX timeout  
            success: function (result) {
                bindProductModel(result);
            },
            error: function (xhr, status) {
                alert(status + " - " + xhr.responseText);
            }
        });
    } 
```

JSON的获取工作完美：

```
{
"d": [
    {
        "__type": "Warehouse.Tracntrace.Members_Only.StockMovement.ProductStagingMethod",
        "ProductSKUID": 2,
        "ProductSKUName": "Decoder 1131",
        "WarehouseID": 1,
        "WarehouseName": "SoftwareDevelopmentTest",
        "SystemAreaName": "Staging",
        "Qty": 5
    }
] 
```

}

这是我尝试将它数据绑定到我的表的地方：

```
<div id="TableContainer" class="gridview">
    <table border="1" cellpadding="0" cellspacing="0">
     <tbody data-bind="foreach: ProductViewmodel">
       <tr>
        <td data-bind="text: ProductSKUID"></td>
        <td data-bind="text: ProductSKUName"></td>
        <td data-bind="text: WarehouseID"></td>
        <td data-bind="text: WarehouseName"></td>
        <td data-bind="text: SystemAreaName"></td>
        <td data-bind="text: QTY"></td>

        </tr>
        </tbody>
    </table>
</div> 
```

似乎它不想将它添加到我的数组中。任何建议将不胜感激。

问候雅克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:08:21.680

您的代码有 3 个问题：

1.  `data-bind="foreach: ProductViewmodel"`您尝试从整体上进行 foreach，`ProductViewmodel`但您需要在`items`. 所以改成`<tbody data-bind="foreach: items">`
2.  您的 json 对象包装在一个`d`属性中，因此您需要在映射中处理它。所以你需要写：`ProductViewmodel = ko.mapping.fromJS(Products.d, self.items);`
3.  您输入了错误的`Qty`属性名称。正确的绑定是：（`<td data-bind="text: Qty"></td>`数据绑定表达式区分大小写）

我用你的代码[创建了一个](http://jsfiddle.net/nemesv/Drhuc/)包含修复的小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:07:58.683

你需要使用 ko.mapping.fromJSON 而不是 ko.mapping.fromJS 吗？

# clojure - 有没有什么好的库或策略可以在 clojure 中测试多线程应用程序？

> ID：13717161
> 
> 赞同：3
> 
> 时间：2012-12-05T05:53:48.957
> 
> 标签：clojure

我很好奇是否有人提出了测试多线程应用程序的好策略。

我用 midje 做了很多测试，这对于测试功能非常有用......但我不确定如何测试多线程代码而不让它看起来真的很hacky：

```
 (fact "the state is modified by a thread call"
    (Thread/sleep 100)
    (check-state-eq *state* nil)
    (Thread/sleep 100)
    (modify-state-thread-call *state* :updated-value)
    (Thread/sleep 100)
    (check-state-eq *state* :updated-value)) 
```

有时，由于编译时间的原因，我的测试失败了，因为状态没有及时更新，所以我不得不睡得更久。理想情况下，我想要一种方法来编写如下内容：

```
 (fact "the state is modified by a thread call"
    (modify-state-thread-call *state* :updated-value) 
     =leads-to=> (check-state-eq *state* :updated-value)) 
```

并远离睡眠。有没有策略来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T06:24:42.173

如果`*state*`在此示例中是 clojure 引用类型之一，您可以添加一个函数，使用 add-watch 通知该对象的每个更改：http: [//clojuredocs.org/clojure_core/clojure.core/add-watch](http://clojuredocs.org/clojure_core/clojure.core/add-watch)

我可能建议的一种方法是在满足条件时使用手表来兑现承诺。

```
(let [check-promise (promise)]
  (add-watch *state* :check-for-updated-value
    (fn [rkey refr _oldval newval]
       (when (some-check newval)
          (remove-watch refr rkey)
          (deliver check-promise true))))
  (modify-state-thread-call *state* :updated-value)
  (deref check-promise 1000 false)) 
```

`*state*`如果取值在 1000 毫秒内满足，这将立即返回 true，如果不满足`some-check`条件，则在 1000 毫秒后返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T23:41:27.843

根据 Crate 的回复，我创建了一个`wait`函数：

```
(defn return-val [p ms ret]
  (cond (nil? ms) (deref p)
        :else (deref p ms ret)))

(defn wait
  ([f rf] (wait f rf nil nil))
  ([f rf ms] (wait f rf ms nil))
  ([f rf ms ret]
     (let [p (promise)
           pk (hash-keyword p)
           d-fn (fn [_ rf _ _]
                  (remove-watch rf pk)
                  (deliver p rf))]
       (add-watch rf pk d-fn)
       (f rf)
       (return-val p ms ret)))) 
```

它的用法是：

```
(defn threaded-inc [rf]
  (future
    (Thread/sleep 100)
    (dosync (alter rf inc)))
  rf)

(def arf (ref 0))
(deref (threaded-inc arf)) ;=> 0

(dosync (ref-set arf 0))
(deref (wait threaded-inc arf)) ;=> 1 
```

# java - 使用java模式进行字符检查？

> ID：13717165
> 
> 赞同：-1
> 
> 时间：2012-12-05T05:53:54.440
> 
> 标签：java, design-patterns

我想检查像 \ 后跟 \ 的模式。示例：**\\patterone\\patterntwo** 我想检查**\\**模式是否存在。请帮助我；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:07:23.287

最初提出的问题并不清楚您是否需要检测包含单个反斜杠（`\`，拼写为`"\\"`Java ）或双反斜杠（`\\`，拼写为`"\\\\"`）的字符串。

要检查字符串是否包含单个`\`，请`'\\'`使用`indexOf`string 方法查找字符：

```
if (myString.indexOF('\\') != -1) {
  // myString contains \
} 
```

要检查字符串是否包含两个反斜杠，请查找`"\\\\"`子字符串：

```
if (myString.indexOF("\\\\") != -1) {
  // myString contains \\
} 
```

在所有情况下，在编写文字字符串时都必须复制反斜杠，因为它们对解析器具有特殊意义。这种双反斜杠字符表示结果字符串中的*单个*反斜杠。

# linux - 如何激活linux中的所有ksoftirqds？（关于linux内核的net stack）

> ID：13717166
> 
> 赞同：4
> 
> 时间：2012-12-05T05:54:01.080
> 
> 标签：linux, performance, networking, kernel, irq

我在 4 核英特尔机器上有一个多队列 NIC 卡，我将 NIC 卡的每个队列绑定在一个 cpu 内核上（设置 /proc/irq/xxx/smp_affinity）假设 core0 上的 queue0，core1 上的 queue1 等等。

据说软中断将在发生硬件中断的同一个内核上调用。为什么 ksoftirqd 不能在我的机器上并行运行？它只是一个内核线程（如 ksoftirqd/2）将使用 100% 的内核，但其他内核线程为 0%

当我使用

```
cat /proc/interrupts | grep eth1 
```

我可以看到所有的包甚至都分发到了所有的 NIC 队列中。

更新：

这里是100%softirq问题的解决方案，如果你能看懂中文 [http://hi.baidu.com/higkoo/item/42ba6c353bc8aed76d15e9c3](http://hi.baidu.com/higkoo/item/42ba6c353bc8aed76d15e9c3)（请看#7）如果不行，哪个博客说你可以再加一张卡，这个问题将得到解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:09:13.043

ksoftirqd 不需要并行运行，因为它通常不运行软中断。所有软中断通常在请求它们的中断之后立即在请求它们的 CPU 上运行。

只有在“softirq”泛滥的情况下，softirqs 才会在 ksoftirqd 上运行——内核执行中断后，它会检查是否需要运行 anu softirqs。如果确实如此，它将运行它们。在这些运行中断启用期间，因此当您运行软中断时，可能会发生中断，将它们标记为再次运行。这就是为什么内核在运行它们之后会再次检查市场软中断的原因。

很明显，如果出现大量中断，这可能会很快变成活锁——我们所做的只是运行软中断和中断，而不是任何用户代码。这就是内核有一个“阻尼器”机制的原因——如果在运行 10 次后检查是否有任何软中断被标记，它们仍然被标记，内核将不会在中断结束时运行软中断，而是唤醒特殊的内核线程ksoftirqd 运行它们直到洪水结束。

这是一个处理 IRQ 泛滥的看门狗机制，并且大多数时候它处于休眠状态，因此在正常情况下拥有多线程 ksoftirqd 并不会真正帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:47:09.747

ksoftirqd 是内核中所有轮询例程的基础，包括卡的网络队列的轮询。

因此，ksoftirqd 的触发将影响它的线程。事实是它根本没有线程。这是因为触发 ksoftirqd 的定时器总是被传递到同一个核心。

但是，你问这个问题是有目标的。首先讨论该目标可能是有意义的，而不是讨论实现该目标的细节。

# java - 澄清Java中具有多对多关系的设计/开发系统

> ID：13717167
> 
> 赞同：0
> 
> 时间：2012-12-05T05:54:06.750
> 
> 标签：java, uml

如果我们有多对多关系，我们通过引入参考表将它们分解为 1-m，并且应该在 ER 图中进行描述。

例如，如果 Item 和 Order 是 mm，我们引入了 ItemOrder 参考表。

但是在开发系统时，我们是否将 ItemOrder 标识为实体（域类）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:36:35.507

是的，不，也许。

你会`ItemOrder`上课吗？也许！

它会是一个“域类”吗？*不*，它不会。域类中的关键字是*domain*。*领域*类的构成取决于您的利益相关者如何看待该领域。在这种情况下，他们可能从未想过“物品订单”——只有一个订单，它与物品有关系。“订单”和“项目”是相关的领域概念，因为您的利益相关者很熟悉它们；“项目顺序”不是。

但无论如何你可能有一个`ItemOrder`类 - 但它可能是内部的。例如，如果您使用[Row Data Gateway](http://martinfowler.com/eaaCatalog/rowDataGateway.html)对象，您的`Order`类可能如下所示：

```
public class OrderRDG {

    private UUID orderId;

    public static OrderRDG[] find() { /* SQL code etc... */ }
    public static OrderRDG[] findById() { /* SQL code etc... */ }

    public UUID getOrderId() { return orderId; }

    public Item getItems() {
        ItemRDG[] items = []; // yes, I know Java arrays don't work like this - it's only an example
        OrderItemRDG[] orderItems = OrderItemRDG.findItemsByOrderId(orderId);
        for(OrderItemRDG orderItem:orderItems) {
            ItemRDG item = ItemRDG.findById(orderItem.getItemId());
            items.push(item);
        }
        return items;
    }

} 
```

# android - Android：如何获取存储在 res/xml 下的 XML 的实际 URL 路径？

> ID：13717168
> 
> 赞同：0
> 
> 时间：2012-12-05T05:54:08.100
> 
> 标签：android, android-xml

希望题主说清楚。

我想获取我存储在 res/xml 文件夹下的 xml 文件的文件路径。

我通过使用代码片段直接阅读来了解 InputStream 方法。

...`getResources().getXml(R.raw.testxml);`

但我的要求是暂时获取存储文件的路径。

任何帮助表示赞赏

增值税

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:02:55.283

尝试获取存储在 res/raw 文件夹中的文件的完整路径

```
String fullpath = "android.resource://" + 
                   YOUR_FULL_PACKAGE_NAME +
                   "/"+R.raw.testxml; 
```

# java - 如何设置图像而不是布尔值？

> ID：13717171
> 
> 赞同：0
> 
> 时间：2012-12-05T05:54:30.550
> 
> 标签：java, android, google-app-engine

我想将图像显示为从 servlet 到 android 应用程序的布尔值。Servlet 将被上传到谷歌应用引擎。这是我的小服务程序。“arrBool”值显示为一些随机值。

//

```
 resp.setContentType("text/plain");

    if (req.getParameterMap().containsKey("message"))
        message = req.getParameter("message");

    resp.getWriter().println("Server Said" + message);

    for (int i=0; i<arrBool.length; i++) {
        arrBool[i] = r.nextBoolean();
            if(arrBool[i]==true) {
                resp.getWriter().print(arrBool);
            }
    } 
```

这是我的 android 应用程序文件：

//

```
RestClient client = new RestClient("http://machougul01.appspot.com/listenforrestclient");
        client.AddParam("message", "Hello two World");
//        client.AddParam("arrBool", "textView1");

    try
    {
        client.Execute(RequestMethod.GET);

    }
    catch (Exception e)
    {
        textView.setText(e.getMessage());
    }

    String response = client.getResponse();
    textView.setText(response);
} 
```

输出显示“服务器说：Hello two world”和 arrBool 值：“m9a9990a m9a9990” 我想将 arrBool 值设置为图像而不是 m9a9990a。因此，无论何时选择随机值（如果为真），那么汽车的数量将显示为 1 - 6 （共 6 辆）。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:20:55.433

你有几件事需要做。

首先，您需要一些导入语句。也许您可以将 apache commons 用于 base64，此示例使用 xerces。

```
import java.awt.image.BufferedImage;
import java.io.ByteArrayOutputStream;
import com.sun.org.apache.xerces.internal.impl.dv.util.Base64; 
```

接下来，您需要使用布尔值创建图像：

BufferedImage image = new BufferedImage(wid,hgt,BufferedImage.TYPE_3BYTE_RGB);

```
final int BLACK = java.awt.Color.BLACK.getRGB();
final int WHITE = java.awt.Color.WHITE.getRGB();
for(int x = 0; x < wid; x++) {
    for(int y = 0; y < hgt; y++) {
        boolean val = array[x*wid + y];
        image.setRGB(x,y, val ? BLACK : WHITE);
    }
} 
```

我可能在那里使用了二进制图像。这就是我临时知道的:) 我相信你可以修改它来改变格式。

然后你需要将它转换为Base64

```
ByteArrayOutputStream out = new ByteArrayOutputStream();
byte[] bytes = out.toByteArray();
String imageText = Base64.encode(baos.toByteArray()); 
```

然后，您需要吐出一些引用该 base 64 的 HTML：

```
String html = "<img src=\"data:image/bmp;" + imageText + "\" alt=\"Random booleans\">"; 
```

并在您的页面上吐出该 html，您应该一切就绪！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:12:21.823

尝试改变

```
resp.getWriter().print(arrBool); 
```

至

resp.getWriter().print(String.valueOf(arrBool));

它将在您的响应中写入一个字符串。

或者你可以改变这个

```
for (int i=0; i<arrBool.length; i++) {
        arrBool[i] = r.nextBoolean();
            if(arrBool[i]==true) {
                resp.getWriter().print(arrBool);
            }
    } 
```

至

```
for (int i=0; i<arrBool.length; i++) {
        arrBool[i] = r.nextBoolean();
            if(arrBool[i]==true) {
                resp.getWriter().print(1);
            }
    } 
```

因此，当您在客户端阅读响应时，您将收到响应行“服务器说：Hello two world”111

然后，您可以解析字符串并且没有 1 或 true 输出并显示或

# php - 为什么我的索引未定义

> ID：13717172
> 
> 赞同：-1
> 
> 时间：2012-12-05T05:54:33.687
> 
> 标签：php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:00:31.340

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T06:01:15.787

检查是否`$_SESSION's`存储任何值..

我给你举个例子：

```
 <?php
 //This will start a session
 session_start();

 if(isset($_SESSION['username']))
 {
     $username = $_SESSION['username'];
}else{
  $username = null;
}
var_dump($username);

// Would return NULL. SESSION IS NOT SET.
// if I add $_SESSION['username'] = "Phorce" session set, will return phorce.
?> 
```

或者：`var_dump($_SESSION['username']);`

希望这会有所帮助:) 可能`$_SESSION['username']`是没有注册。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T06:06:05.110

请在使用前检查会话变量是否已分配值。

```
<?php
//This will start a session
session_start();

$username ="";
$password ="";
if(isset($_SESSION['username']))
$username = $_SESSION['username'];

if(isset($_SESSION['password ']))
$password = $_SESSION['password'];

//Check do we have username and password
if(!$username && !$password){
echo "Welcome Guest! <br> <a href=login.php>Login</a> | <a href=register.php>Register</a>";
}else{
echo "Welcome ".$username." (<a href=logout.php>Logout</a>)";
}
?> 
```

# wordpress - 在本地和远程之间镜像 Wordpress *配置*

> ID：13717175
> 
> 赞同：2
> 
> 时间：2012-12-05T05:54:47.513
> 
> 标签：wordpress, ssh, wordpress-theming, development-environment, production-environment

好的，所以我熟悉创建本地 Wordpress 构建，并且一直在愉快地使用[Smashing 基于 MAMP 的文章](http://wp.smashingmagazine.com/2011/09/28/developing-wordpress-locally-with-mamp/)中概述的技术。我的问题比这更进一步。

这篇文章非常适合开发通用主题，但是在开发基于 Wordpress 的*网站*（不一定是博客）时，至少对我来说，发布之日有点痛苦。

我必须返回并重新配置服务器的 Wordpress 以匹配我已经在本地完成的操作。必须再次输入设置*，需要**再次*安装插件，*重新创建*菜单，并且必须更改 css 以引用 Wordpress 为帖子/页面/自定义分类生成的唯一类/id……有时在此过程中会遗漏一些东西。我想知道的是：

 **是否有一种简单的方法可以自动将本地计算机上的构建克隆或镜像到远程服务器？

即使你只需要 LMGTFY 我，那也会有帮助。我不完全知道我应该寻找什么。处理“镜像 wordpress 配置”和“克隆 wordpress 配置”的搜索返回有关移动内容的教程，我知道该怎么做。

如果有帮助，我正在使用 xcode 开发工具、git、ruby、node 和 homebrew 运行 OSX 10.6.8。我所有的实时服务器都具有 ssh 访问权限以及 ftp，并且我使用最新版本的 Wordpress 构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:33:57.767

我想唯一的方法是复制数据库或其中的一部分。

我所做的是复制相关表并手动修改表选项中的站点 URL。只有2个。还有一个很好的插件`velvet-blues-update-urls`来修改所有链接，在手动设置站点URL之后可以访问后端，以防帖子也被复制。

接下来，将所有主题目录文件复制到站点中的同一目录中，假设您使用的是相同的主题。

这两个过程都可以通过 PHP 脚本自动化。

我不确定这是你想要的，但希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:08:17.507

以下是一些简单的步骤：

1.  下载并安装[WP Migrate DB](http://wordpress.org/extend/plugins/wp-migrate-db/)插件。
2.  转到**工具 > WP Migrate DB**并填写空白字段（`New address (URL)`并可`New file path`选择选中/取消选中其他选项）。单击`Export Database`并将导出文件保存到您的计算机。
3.  `.zip`使用**所有**文件（`/wp-admin`, `/wp-content`,`/wp-includes`目录和根目录中的所有文件）进行存档。
4.  将该文件上传到您希望 WordPress 站点驻留的生产服务器。
5.  转到您的 cPanel（或通过文件管理器使用`unzip`命令）（或您可能拥有的任何其他替代方案）并解压缩您刚刚上传的文件。`SSH`
6.  如果您的生产服务器上还没有数据库设置 - 通过主机控制面板创建一个（对于 cPanel，它将是[在 cPanel 中创建 mySQL 数据库](http://www.youtube.com/watch?v=nfM0xNwkAMA)，对于 plesk 它将是[Plesk 7 教程：创建数据库](http://www.parallels.com/doc/tutorials/Plesk/Plesk7/plesk_plesk7_eu/plesk7_eu_mysql.htm)，对于其他任何事情，只需谷歌搜索，或尝试您的主机的常见问题解答）。记住/记下您的数据库名称、数据库用户和密码。
7.  编辑`wp-config.php`文件并更改 、 和可选的值`DB_NAME`-`DB_USER`但这`DB_PASSWORD`通常`DB_HOST`是`localhost`- 如果这不起作用，请尝试询问您的网络主机，或者如果您有 phpMyAdmin，请登录到它并查看[最顶部page](http://i.stack.imgur.com/NWg0R.jpg) - 在这种情况下，`DB_HOST`将是`localhost`.
8.  完成所有这些后，登录到您的数据库管理工具（大多数情况下这将是 phpMyAdmin，但也可能是其他东西），然后将您保存的数据库导出文件上传到您的计算机`2`. **注意：**如果您的主机没有为您提供数据库管理工具，我建议您将[phpMiniAdmin](http://phpminiadmin.sourceforge.net/)（单击“下载最新版本”链接并将文件保存到您的计算机）脚本上传到您的生产服务器。然后转到该脚本（如果您的网站位于`http://example.com/`，请转到`http://example.com/phpminiadmin.php`）并输入您的数据库详细信息。在该页面的顶部，您将看到一个`import`链接。单击它并上传您的数据库导出文件。**注 2：** phpMiniAdmin 不支持`gzip-compressed`文件，因此如果您确实检查了`Compress file with gzip`step 中的选项`2`，则必须在未选中此选项的情况下重新执行该步骤。
9.  登录到您的站点并转到`Settings > Permalinks`以更新您的永久链接结构。
10.  检查`/wp-content/uploads`和`/wp-content/plugins`目录的权限 - 确保您能够毫无问题地上传图像和插件。

* * *

差不多就是这样。这可能看起来很多，但我几乎对我上传到生产服务器的每个站点都遵循这个过程，并且它可以花费我不到 10 分钟的时间来完成所有这些（考虑到我通常使用自定义 MySQL 命令，而不是`WP Migrate DB`插件-我可能应该开始使用它:)）。一旦你习惯了这个过程并且你不会遇到任何低质量的虚拟主机，你应该对这些步骤完全没问题。

* * *

**注意：**由于您用作`ssh`标签之一，我假设您通常具有对生产服务器的 ssh 访问权限。如果您不这样做，我仍然假设您具有 cPanel 访问权限（如果这不是真的并且您无法在服务器上解压缩文件，则通过 FTP 客户端手动上传所有文件，而不是执行步骤`3`和`4`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T07:09:28.893

不确定这是否正是您所需要的，但要移动站点，您可以使用内置的 Wordpress“导出”和“导入”选项。据我记得在导入时有一个选项可以更改 URL，并且导入会为您更改一些内容。

即使这不能回答您的确切问题，也希望它有所帮助。**

# c# - 未定义位置只有一个空格的数字的正则表达式

> ID：13717184
> 
> 赞同：0
> 
> 时间：2012-12-05T05:55:23.387
> 
> 标签：c#, .net, regex

我正在尝试编写一个正则表达式来验证在未定义的地方只有一个空格的数字？

最多 12 个字符加一个空格或最多 11 个字符不加空格。

例如：'25897 569874'、'5674'、'65783987665'、'435 6523'

我试过了。`^[0-9]{0,12}$`这不是完美的，因为我不知道如何放置空格及其计数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T06:00:19.920

您可以使用此正则表达式：

```
^(?:\d{1,11}|(?=\d+ \d+$)[\d ]{3,12})$ 
```

`\d{1,11}`将匹配 1 到 11 位数字，没有空格。

`(?=\d+ \d+$)[\d ]{3,12}`最多匹配 11 位数字，中间有一个空格。空格不能是前导或尾随，因此`' 23'`将被拒绝。

*   `(?=\d+ \d+$)`是一个先行匹配一个或多个数字，然后是一个空格，然后是一个或多个数字，然后锚定字符串的末尾。它保证只会出现一个空格，并且空格不会前导或尾随。前瞻也隐含地确认字符串中至少有 3 个字符。
*   `[\d ]{3,12}`将保证字符串仅包含数字或空格，并且最多包含 12 个。重复次数的下限可以设置为 3 或更低，因为它已被前瞻所暗示。

2 个约束共同保证文本包含 1 到 11 个数字以及数字之间任意位置的可选空格。

* * *

允许前导空格，但拒绝单个空格、空字符串和尾随空格：

```
^(?:\d{1,11}|(?=\d* \d+$)[\d ]{2,12})$ 
```

同样，前瞻意味着至少 2 个字符，因此可以将重复次数设置为 2 或更低。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T06:00:36.740

^[0-9 ]{0,12}$ 将匹配最多 12 个带或不带空格的字符串如果您需要多个条件，请尝试 OR 运算符（管道）：|

^[0-9 ]{0,12}$|另一个条件

# c# - 使用工具提示 c# 在图表上的任何点上显示系列值

> ID：13717189
> 
> 赞同：2
> 
> 时间：2012-12-05T05:55:40.490
> 
> 标签：c#, charts, tooltip, hittest

所以我已经看到了很多关于在悬停在数据点上时使用工具提示来显示图表数据的示例，但是我希望在我的鼠标只是在图表上而不一定在特定数据点上时显示值（即空白其他地方）。我最终还希望在数据点本身上有一个小圆圈或正方形，但这可能会在以后出现。谁能告诉我该怎么做？我将在下面包含我当前的代码。

```
 private void chData_MouseMove(object sender, MouseEventArgs e)
    {            
        HitTestResult pos = chData.HitTest(e.X, e.Y);
        if (pos.ChartElementType == ChartElementType.DataPoint)
        {
            string tipInfo;
            tipInfo = "Bat 1: " + ch1Array[pos.PointIndex].ToString("0.00") + Environment.NewLine + "Bat 2: " + ch2Array[pos.PointIndex].ToString("0.00") + Environment.NewLine;                
            tooltip.SetToolTip(chData, tipInfo);    
        }

    } 
```

我猜我必须更改 if 语句参数，但我不确定是什么。
任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:46:02.460

所以解决方案是不使用 HitTest。相反，如果您使用 PixelPositionToValue 效果会更好。我将包括下面的代码。

```
private void chData_MouseMove(object sender, MouseEventArgs e)
    {
        try
        {   
            int cursorX = Convert.ToInt32(chData.ChartAreas[0].AxisX.PixelPositionToValue(e.Location.X));

            tipInfo = "Bat 1: " + ch1Array[cursorX].ToString("0.00") + Environment.NewLine + "Bat 2: " + ch2Array[cursorX].ToString("0.00") + Environment.NewLine;

            tooltip.SetToolTip(chData, tipInfo);

        }
        catch { }
    } 
```

# javascript - 获取函数内对象的引用绑定为 js 中的事件。？

> ID：13717192
> 
> 赞同：0
> 
> 时间：2012-12-05T05:55:56.933
> 
> 标签：javascript, oop, object

我有一个像这样的构造函数对象。

```
var Cons = function(me){
  this.name= me;
  this.ele = document.getElementById("element");
  this.ele.addEventListener("click",this.fnClick,false);
} 
```

以及一些扩展为原型的方法

```
 Cons.prototype.getme= function(){
     return this.me;
  }
  Cons.prototype.fnClick= function(){
      alert(this.getme())
  }
 var initZ = new Cons("test"); 
```

所以我的问题是当im“fcClick”作为绑定函数执行时，**“this”**将引用绑定的HTML元素，而不是当前实例对象，

那么我如何在“fnClick”中传递“ **this ”的引用..？**

jsfiddle[链接](http://jsfiddle.net/vqL6a/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:04:49.747

`this.fnClick.bind(this)`对于不支持绑定的浏览器，使用or：

```
var Cons = function(me){
  this.name= me;
  this.ele = document.getElementById("element");

  var self = this;
  function handler() {
    self.fnClick(arguments);
  }
  this.ele.addEventListener("click", handler, false);
} 
```

见[http://jsfiddle.net/Fy5ZV/1/](http://jsfiddle.net/Fy5ZV/1/)（`getme()`带回`this.name`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:00:42.837

你可以使用[`bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)...

```
var Cons = function(me){
  this.name= me;
  this.ele = document.getElementById("element");
  this.ele.addEventListener("click",this.fnClick.bind(this),false);
} 
```

这将保证[`ThisBinding`](http://es5.github.com/#x10.4)将设置为调用环境的`this`.

# android - 更改 android 软键盘示例设计、按钮和背景图像

> ID：13717193
> 
> 赞同：2
> 
> 时间：2012-12-05T05:55:59.477
> 
> 标签：android

我正在通过修改 SDK 中的 android 软键盘示例来构建自定义键盘。我想更改按钮和背景的图像，但我不知道这些值的存储位置。它们存储在哪里，或者我如何更改图像或仅更改颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:13:44.967

您需要编辑文件`res/xml/qwerty.xml`。

您可以查看[Keyboard](http://developer.android.com/reference/android/inputmethodservice/Keyboard.html) and the [Keys](http://loper.android.com/reference/android/inputmethodservice/Keyboard.Key.html)的文档。最后一个定义了键上显示的内容（看起来你不能改变背景）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:06:37.343

在 onClick 方法中，您需要更改按钮的图像，这种方式..

```
public void onClick(View v) {
    if(v==buttonName){
        buttonName.setBackgroundResource(R.drawable.imageName);
    }       
} 
```

键盘背景颜色可以在 input.xml 中使用`android:background`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T21:49:29.863

您需要编辑文件

> 资源/布局/input.xml

示例 input.xml 可能如下所示。

```
<com.example.keyboard.LatinKeyboardView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/keyboard"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:background="@drawable/keyboardbackground"
    android:keyBackground="@drawable/samplekeybackground"
    android:keyPreviewLayout="@layout/input_key_preview" 
    android:keyTextcolor="@android:color/black"/> 
```

在[KeyboardView](http://developer.android.com/reference/android/inputmethodservice/KeyboardView.html)文档中可以找到更多属性。

# jquery - jQuery 验证获取元素的 ID/名称

> ID：13717200
> 
> 赞同：1
> 
> 时间：2012-12-05T05:56:35.670
> 
> 标签：jquery, validation

我想获取错误元素的 ID/名称。我需要将其显示为列表，因此默认消息“这是必需的”不提供信息。

我正在使用它来显示消息：

```
$.validator.message.required = [custom message] 
```

我试过使用

```
$.validator.message.required = $.validator.format("error is {0}{1}") 
```

但这仅返回一个字符串

```
"error is [object HTMLInputElement]" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T05:48:21.493

我想这对于 jquery.validate 是不可能的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T18:10:15.863

我通过谷歌搜索找到了这个问题，实际上找到了这个问题的答案。

实际上，您可以只实现自己的“格式化”功能，然后像从`jQuery.validator.format`. 您的函数将传递两个项目，第一个似乎是一个布尔值（我不确定那是什么），第二个参数将是实际的 html 元素。所以在你的情况下，你想做这样的事情：

```
$.validator.message.required = function(_, el) {
    console.log(el.name, el.id);
    return 'error is ' + el.name + ' : ' + el.id;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:07:47.437

采用

```
var id= $("SELECTOR FOR ERROR").attr('id');//for id
var name= $("SELECTOR FOR ERROR").attr('name');//for name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-03T13:20:05.503

就这样做..

```
window.error_list = $('#userProfile').validate({ ... });
console.log(window.error_list.errorList) 
```

# python - 在cmd中运行regetron有困难

> ID：13717215
> 
> 赞同：5
> 
> 时间：2012-12-05T05:57:57.540
> 
> 标签：python, regex

我想遵循[http://regex.learncodethehardway.org/book/learn-regex-the-hard-waych1.html](http://regex.learncodethehardway.org/book/learn-regex-the-hard-waych1.html)上的正则表达式教程，但我不确定如何在 cmd 中执行 regetron。我已按照说明安装它，当我键入 import regetron 时，python 解释器没有给我一个错误，所以我确定它已安装。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T06:03:28.043

脚本通常安装在 Windows 下 Python 安装的 Scripts 文件夹中。假设您在典型位置安装了 Python 2.7，您应该在`C:\Python27\Scripts`.

FWIW，出于上述原因，我通常将两者都放在 Windows 下`C:\Python27`。`C:\Python27\Scripts`然后软件包引入的命令立即在命令行上可用。

**更新**：Regetron 目前不适用于 Windows。我已经提出了几个补丁来使它工作。[同时，您可以从这里](http://www.szakmeister.net/downloads/regetron-1.4-windows.zip)获取一个新的 .zip并使用 pip 安装它：

```
pip install .\regetron-1.4-windows.zip 
```

**更新**：我的修复已被纳入 regetron。它现在应该可以在 Windows 下的 regetron 未来版本中正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T16:33:08.550

我使用 Cygwin 运行 regetron，并执行了以下操作：

1.  安装 Cygwin，或者如果你已经安装了它就更新它
2.  在选择要安装的包时安装 Python。也安装 wget，因为它会使以下步骤之一更容易
3.  `wget http://python-distribute.org/distribute_setup.py`
4.  `python distribute_setup.py`
5.  使用 easy_install 安装 PIP。PIP 得到积极维护，并支持包删除（与 easy_install 不同）：`easy_install pip`
6.  `pip install regetron`
7.  运行 regetron：`regetron`

另一个警告： cmd.exe 处理单引号 ( `'`) 和双引号字符串 ( `"`) 与 *nix shell 不同。当我`pywikipediabot`在 cmd.exe 中运行带有正则表达式参数（例如 ）的 Python 脚本时，我被烧死了。您可以完全按照示例进行操作，并且会发生错误的事情。

`'`Cygwin和没有问题`"`。

# codeigniter - 使用 hotmail 使用 CI 发送电子邮件

> ID：13717225
> 
> 赞同：3
> 
> 时间：2012-12-05T05:59:19.283
> 
> 标签：codeigniter, email, hotmail

我正在尝试使用 CI 创建一个电子邮件通知系统。问题是我正在使用的系统阻止了 gmail。所以，我无法使用 gmail SMTP。现在，我必须想办法用 hotmail 或任何其他 SMTP 服务发送电子邮件。这是我的代码，它适用于 gmail，但现在适用于 hotmail config/Email.php：

```
$config = array(
    'protocol' => 'smtp', 
    'smtp_host' => 'ssl://smtp.live.com',
    'smtp_port' => 587,
    'smtp_user' => 'muttalebr@hotmail.com',
    'smtp_pass' => 'XXXXXX',
    'charset' => 'utf-8',
 'newline' => "\r\n",
 'crlf' => "\r\n",
 'mailtype' => "html",

); 
```

调用 email.php 并发送电子邮件的实际函数：

```
function sends($from,$to,$send,$user){
   $link=base_url()."index.php/anonymouscoll/cmembersarea/".$user;
   $emailmessage="Hello $to,<br />You have a new Gift from $from.<br />Click on the link:<a href=$link>$link</a> to check your gift.<br /><br /><br />Best Regards<br />Online Communication.";
   $this->load->library('email');
   $this->email->from('muttalebr@hotmail.com','Gift File');
   $this->email->to($send);
   $this->email->subject('You have a new Gift');
   $this->email->message($emailmessage);

   if($this->email->send()){
    echo "Email sent";

   }
   else{
    show_error($this->email->print_debugger());
   } 
```

每次我调用“发送”函数时，都会出现以下错误：

```
Severity: Warning

Message: fsockopen() [function.fsockopen]: SSL operation failed with code 1\. OpenSSL Error messages: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol

Filename: libraries/Email.php

Line Number: 1673 
and

Severity: Warning

Message: fsockopen() [function.fsockopen]: Failed to enable crypto

Filename: libraries/Email.php

Line Number: 1673 
```

我也试过

> 'smtp_host' => 'sslv2://smtp.live.com',

但它不能在我的本地机器上工作。我在本地机器上使用 Windows 7，在系统上使用 Windows Xp，我将使用该应用程序[阻止 gmail 的那个]。我尝试使用 XAMPP 1.8.1 版和 WAMPP 2.2 版

期待您的回复

~muttalebm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:20:12.680

您使用的是哪个版本的 PHP？

在某些版本中，fsockopen ssl 显然存在一个错误：

[https://bugs.php.net/bug.php?id=54511](https://bugs.php.net/bug.php?id=54511)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:34:09.020

错误是因为您没有在 php.info 文件中启用 SSL。所以搜索如何启用它。否则，您可以在下面的链接中查看我对问题的回答，这与此相同。我在做的时候遇到了这个错误，我解决了。

[参考链接](https://stackoverflow.com/questions/13469891/smtp-gmail-error-with-codeigniter-2-1-3/13469988#comment18493201_13469988)

# php - 如何在yii中传递重定向参数

> ID：13717228
> 
> 赞同：32
> 
> 时间：2012-12-05T05:59:40.983
> 
> 标签：php, yii

我正在为我的项目使用 Yii 框架；

成功插入数据库后，我正在使用重定向页面到另一个控制器

> $this->redirect($this->createUrl('controller/action'));

在重定向期间可以传递任何参数，就像在渲染中一样，

> $this->render('selectRefiner', array('param' => $data)

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-12-05T06:10:48.190

尝试：

```
$this->redirect(array('controller/action', 'param1'=>'value1', 'param2'=>'value2',...)) 
```

[api yii 1](http://www.yiiframework.com/doc/api/1.1/CController#redirect-detail) , [api yii 2](http://www.yiiframework.com/doc-2.0/yii-web-controller.html#redirect()-detail)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-09T13:00:12.560

试试这个：

```
Yii::$app->response->redirect(['site/dashboard','id' => 1, 'var1' => 'test']); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-03T19:03:25.043

您只能在 Yii 2 中传递 GET 参数`redirect()`。但是，我有类似的情况，我通过使用 Session 存储解决了它。

当然，您可以通过`Yii::$app->session`. 这是在两个单独的控制器操作中使用它的示例：

```
public function actionOne() {
    // Check if the Session is Open, and Open it if it isn't Open already
    if (!Yii::$app->session->getIsActive()) {
        Yii::$app->session->open();
    }
    Yii::$app->session['someParameter'] = 'Bool/String/Array...';
    Yii::$app->session->close();
    $this->redirect(['site/two']);
}

public function actionTwo() {
    if (isset(Yii::$app->session['someParameter']) {
       $param = Yii::$app->session['someParameter'];
    } else {
       $param = null;
    }
    $this->render('two', [
        'param' => $param
    ]);
} 
```

所以现在你应该可以访问视图`$param`内部了`two`。

更多信息请参考官方类文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-31T09:53:47.677

使用已经具有此功能的所有参数重定向到相同的操作对我有用。

```
$this->redirect($_PHP['SELF']); 
```

# visual-studio - 如何强制 Visual Studio 信任解决方案中的所有项目？

> ID：13717231
> 
> 赞同：0
> 
> 时间：2012-12-05T06:00:07.037
> 
> 标签：visual-studio, visual-studio-2012

我有一个 Orchard CMS 的解决方案，当我第一次打开它时，它提示我询问是否信任来自外部来源的项目。我取消选中“询问解决方案中的每个项目”框，它打开得很好。现在，我使用代码生成工具在解决方案打开时将项目添加到解决方案中。VS 然后检测到更改，并提示我重新加载解决方案。重新加载后，我看到大多数项目 - 从众多项目中保存 1 或 2 个 - 项目无法加载。当我单击单个项目并重新加载它时，系统会询问我是否再次信任它。当我单击确定时，项目加载正常。唯一的问题是我不想去手动重新加载每个项目。我尝试关闭解决方案并再次打开它，但大多数项目仍然无法加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:04:27.867

您可以一次重新加载多个项目：只需在解决方案资源管理器中选择多个项目（例如通过 Ctrl+单击或 Shift+单击），右键单击选择，然后选择重新加载项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-08T15:35:44.387

我按照 Visual Studio 文档中的这些说明解决了此类问题。

[配置文件和文件夹的信任设置](https://docs.microsoft.com/en-us/visualstudio/ide/reference/trust-settings?view=vs-2019#add-trusted-paths)

基本上：

1.  打开工具 > 选项 > 信任设置，然后选择右侧窗格中的配置信任设置链接。

2.  单击“信任设置”对话框中的“添加”，然后选择“文件”或“文件夹”。

3.  导航并选择要添加到受信任列表的文件或文件夹。

# java - 如何在 Axis1 中使用模块？

> ID：13717235
> 
> 赞同：0
> 
> 时间：2012-12-05T06:00:17.373
> 
> 标签：java, web-services, axis2, axis

在 Axis2 中，我知道可以使用如下模块：

```
stub._getServiceClient().engageModule("myloggingmod"); 
```

这如何在 Axis1 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:55:26.073

Axis2 中引入了模块，[**Axis1 没有模块**](http://axis.apache.org/axis2/java/core/docs/migration.html#custom_deployment)。

Axis1 与处理程序一起工作，所以充其量，您可以尝试通过配置一些处理程序来实现您想要做的事情。如果我没记错的话，您甚至可以通过获取处理程序链以编程方式添加一个：

```
stub._getService().getHandlerRegistry().getHandlerChain(portName); 
```

# c# - Orchard1.6 不构建visualstudio 2010

> ID：13717240
> 
> 赞同：0
> 
> 时间：2012-12-05T06:00:34.333
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, orchardcms

我只是下载了新版本的 Orchard1.6 并在 VisualStudio 2010 中构建，但我无法构建，它给出了以下错误：

> 程序集 'Orchard.Web, Version=1.6.0.0, Culture=neutral, PublicKeyToken=null' 使用 'System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 它的版本比引用的程序集更高'System.Web.Mvc，版本 = 3.0.0.0，文化 = 中性，PublicKeyToken = 31bf3856ad364e35'

如果您有解决此问题的方法，请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:57:38.410

如果要从 VS 编译，请获取源代码。也请避免交叉发布。

# joomla - 在 joomla 菜单别名中使用下划线 (_)

> ID：13717253
> 
> 赞同：2
> 
> 时间：2012-12-05T06:01:47.780
> 
> 标签：joomla

我想在 joomla 的菜单别名中使用下划线。对于名为“Residential Storage”的菜单项，我想使用“residential_storage”作为别名，但是当我保存它时，它变成了“residential-storage”，因此下划线将被连字符替换。如何使用连字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:39:45.157

通常别名应由小写字母和连字符 (-) 组成。不允许使用空格或下划线。但要使用下划线，请查看下面的链接。此方法会将所有 (-) 替换为 (_)。 [http://forum.joomla.org/viewtopic.php?f=618&t=638854](http://forum.joomla.org/viewtopic.php?f=618&t=638854)

# entity-framework - 实体框架错误（存储更新、插入或删除语句影响了意外

> ID：13717259
> 
> 赞同：1
> 
> 时间：2012-12-05T06:02:23.593
> 
> 标签：entity-framework

我正在研究 Entity Framework 4.0 。此处使用 AddObject() 将控件添加到数据库中并使用 SaveChange() 方法保存该控件。

但是，一旦我删除了添加的控件并尝试再次添加相同的控件，我就会一次又一次地收到此错误

> 存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新`ObjectStateManager`条目。

我无法添加它。一旦我关闭我的应用程序然后尝试添加然后我就可以添加该控件。

我试图在这里和那里搜索很多问题，但找不到解决方案。因为我是实体框架领域的新手。

```
public void Add(SearchPath entity) {
    _context.SearchPaths.AddObject(entity); 
    // _context.Save(entity, false); 
}

public void Remove(SearchPath entity)
{
    if (entity.Path != null) 
    {
        using (EntityContext entityObj = new EntityContext()) 
        {
            entityObj.SearchPaths.Attach(entity); 
            entityObj.SearchPaths.DeleteObject(entity); 
            entityObj.SaveChanges(); 
        }
    }
} 

public void Modify(SearchPath entity)
{
    using (EntityContext entityObj = new EntityContext())
    {
        try 
        {
            entityObj.SearchPaths.Attach(entity); 
            entityObj.ObjectStateManager.ChangeObjectState(entity, System.Data.EntityState.Modified); 
            entityObj.SaveChanges(); 
        } 
        catch (OptimisticConcurrencyException) 
        { 
            entityObj.Refresh(RefreshMode.StoreWins, entity); 
            entityObj.SaveChanges(); 
        }
    }
}

public void Add(Package entity)
{
    _context.Packages.AddObject(entity);
}

public void Remove(Package entity) 
{
    if (_context.GetEntityState(entity) == EntityState.Unchanged) 
        _context.Packages.Attach(entity); 
    _context.Packages.DeleteObject(entity);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:26:09.517

上述问题的答案是像这样调用你自己的保存方法。

```
public void Save(object entity)
{
    using (var transaction = Connection.BeginTransaction())
    {

        try
        {
            SaveChanges();
            transaction.Commit();
         }
         catch (OptimisticConcurrencyException)
         {
             if (ObjectStateManager.GetObjectStateEntry(entity).State == EntityState.Deleted || ObjectStateManager.GetObjectStateEntry(entity).State == EntityState.Modified)
                    this.Refresh(RefreshMode.StoreWins, entity);
              else if (ObjectStateManager.GetObjectStateEntry(entity).State == EntityState.Added)
                    Detach(entity);
              AcceptAllChanges(); 
              transaction.Commit();
          }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T14:00:43.490

> 一旦我删除了添加的控件并尝试再次添加

问题是您显然是在相同的上下文中这样做的。对我来说，这表明上下文的生命周期太长了。在 EF 中使用上下文实例的最佳方式是每个工作单元（或业务事务或用例）一个上下文。

因此，如果要删除控件：创建上下文，删除控件，处置上下文。如果您想再次添加它（出于某种原因）：创建上下文，添加控件，处置上下文。从您的代码片段中，我并不完全清楚这是否发生在您的代码中。

# jquery - 如何用另一个副本替换一个div？

> ID：13717262
> 
> 赞同：0
> 
> 时间：2012-12-05T06:02:54.537
> 
> 标签：jquery, html, replace

```
function switch(){
    $('#get1').clone();
    $('#get2').replaceWith($('#get1'));
}; 
```

我在这里预计 #get1 的一份副本会保留在原始位置，但会发生什么：它消失了，因为没有被克隆。
所以，我希望#get2 替换为#get1 的副本，而不是原始的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:03:55.707

您是`creating clone but not using clone`，而是使用原始对象。您必须将克隆对象分配给某个对象并在 replaceWith 函数中使用它，

```
function switch(){
    yourClone = $('#get1').clone();
    $('#get2').replaceWith(yourClone );
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T06:13:15.417

首先，不要因为保留字而使用“switch”作为变量名。

无论如何，这是我的答案

```
function doSwitch(){
    var $get1 = $('#get1').clone();
    $('#get2').replaceWith($get1);
} 
```

将克隆对象设置为要使用的变量。

# jquery - jqgrid自定义编辑问题

> ID：13717264
> 
> 赞同：0
> 
> 时间：2012-12-05T06:02:59.890
> 
> 标签：jquery, asp.net-mvc, jqgrid

[http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)

我有一个 5 列的 jqgrid，第一列作为操作，在第一列中我有 3 个按钮作为编辑、保存、取消。当我将数据列表绑定到 jqgrid 时，我有 2 个问题......首先列中的数据被放错了位置，因为第一列有 3 个按钮，列表列中的数据是第一个绑定的具有作为列名的操作的网格列和所有其他列数据都被放错了位置

当我单击操作列中的编辑按钮时，网格中的所有行都支持包括操作列在内的内联编辑功能，因此没有单击保存的选项。

我的 jQuery 代码：

```
 <script type="text/javascript">
        $(function () {
        var lastsel;

        jQuery("#list").jqGrid({
            url: '/Home/GetStudents/',
            datatype: 'json',

            mtype: 'POST',
            colNames: ['Actions', 'StudentID', 'FirstName', 'LastName', 'Email'],
            colModel: [
      { name: 'act', index: 'act', width: 75, sortable: false },
      { name: 'StudentID', sortable: false, key: true },
      { name: 'FirstName', key: true },
      { name: 'LastName', sortable: false, key: true },
      { name: 'Email', width: 200, sortable: false, key: true}],
            cmTemplate: { align: 'center', editable: true },
            pager: '#pager',
            width: 750,
            rowNum: 15,
            rowList: [5, 10, 20, 50],
            sortname: 'StudentID',
            sortorder: "asc",
            viewrecords: true,
            caption: ' My First JQgrid',

            gridComplete: function () {
                var ids = jQuery("#list").jqGrid('getDataIDs');

                for (var i = 0; i < ids.length; i++) {
                    var cl = ids[i];
                    be = "<input style='height:22px;width:20px;' type='button' value='E' onclick=\"jQuery('#list').editRow('" + cl + "');\"  />";
                    se = "<input style='height:22px;width:20px;' type='button' value='S' onclick=\"jQuery('#list').saveRow('" + cl + "');\"  />";
                    ce = "<input style='height:22px;width:20px;' type='button' value='C' onclick=\"jQuery('#list').restoreRow('" + cl + "');\" />";
                    jQuery("#list").jqGrid('setRowData', ids[i], { act: be + se + ce });
                }
            },

            editurl: '/Home/About/',
            //                data: { get_param: selectedDescription },
            caption: "jQgrid Sample"

        });

        jQuery("#list").jqGrid('navGrid', "#prowed2", { edit: false, add: false, del: false });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:14:55.103

您使用`cmTemplate: { editable: true }`，因此您应该在列的定义中添加`editable: true`属性`act'`。此外，如果您*在*`colModel`. 此外，它只能是具有属性的**一**列。`key: true`这意味着`id`行（`id`of `<tr>`）的属性值将从列中获取。如果您使用该属性，`id`来自 JSON 输入的属性将被忽略。您`key: true`只能从包含*唯一*值的列中使用。

# linux - pdf = rs.getBytes("pdf"); 它在 Windows 操作系统中不起作用。从 postgres bytea 字段读取二进制数据的替代方法是什么

> ID：13717265
> 
> 赞同：0
> 
> 时间：2012-12-05T06:02:58.767
> 
> 标签：linux, windows, postgresql-9.0, struts2

当我在 linux 中编写此代码时，它可以正常工作，但在 windows 中，它会在 windows 操作系统中生成两倍大小的实际数据。有人建议我编写解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T15:19:22.063

确保您的 Windows 操作系统中没有[多个版本的 PostgreSQL 驱动程序](http://postgresql.1045698.n5.nabble.com/Inconsistent-Loading-of-Bytea-accross-platform-td3293637.html)

# solr - 带有语音过滤器的 solr 拼写检查器

> ID：13717268
> 
> 赞同：0
> 
> 时间：2012-12-05T06:03:17.560
> 
> 标签：solr

我尝试对索引拼写的字段（**solr 1.4**）使用语音过滤器。以下是**schema.xml中的 fieldType 配置**

```
<fieldType name="textSpell" class="solr.TextField" positionIncrementGap="100" omitNorms="false">
        <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.TrimFilterFactory" />
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
        <filter class="solr.PhoneticFilterFactory" encoder="DoubleMetaphone" inject="true"/>
        </analyzer>
</fieldType> 
```

但是，当使用语音过滤器时，我没有看到任何差异（拼写检查器索引的大小保持不变，更正没有差异）。与拼写检查器一起使用时是否会忽略语音过滤器，或者我的配置有什么问题？

**solrConfig.xml**

```
 <requestHandler name="standard" class="solr.SearchHandler" default="true">
    <lst name="defaults">
      <str name="echoParams">explicit</str>
        <str name="spellcheck.collate">true</str>
        <str name="spellcheck">true</str>
        <str name="spellcheck.onlyMorePopular">false</str>
        <str name="spellcheck.extendedResults">true</str>
        <str name="spellcheck.count">5</str>
    </lst>
    <arr name="last-components">
        <str>spellcheck</str>
    </arr>
  </requestHandler>

  <searchComponent name="spellcheck" class="solr.SpellCheckComponent">
    <str name="queryAnalyzerFieldType">textSpell</str>
    <lst name="spellchecker">
      <str name="name">default</str>
      <str name="field">loc_name_texts</str>
      <str name="spellcheckIndexDir">./spellchecker</str>
      <str name="buildOnCommit">true</str>
    </lst>
  </searchComponent> 
```

**更新：** 我最初错误地配置了过滤器，所以一直在使用 WhitespaceTokenizer。我现在已经更正了。但是，当使用语音过滤器时，solr 返回转换后的数据（变音位）。有没有办法将内容存储为该字段的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T11:05:04.880

solr 中的语音过滤器**不**用于返回更正的建议。即使查询拼写错误，它们也用于匹配文档。

拼写检查组件用于返回更正的建议，但仅适用于包含整个单词的字段，而不适用于拼音字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:40:28.920

尝试将“拼写检查”元素更改为此

```
 <bool name="spellcheck">true</bool> 
```

# android - 无法从异步任务中获取 NodeList

> ID：13717272
> 
> 赞同：0
> 
> 时间：2012-12-05T06:03:40.153
> 
> 标签：android, android-asynctask, android-networking, android-internet, android-parser

以下代码段的目标用于解析 xml。在那个AsynchTask用于互联网连接，但是我在for循环之前的行上得到了NullPointerException ..这是一个片段和堆栈跟踪..

```
 public class MainActivity extends Activity {

        static final String KEY_ITEM    = "photo"; // parent node
        String xml;
        Document    doc;
        NodeList    nl;
        DefaultHttpClient   httpClient;
        HttpPost            httpPost;
        HttpResponse        httpRes;
        HttpEntity          httpEnt;

    String xmlurl       = "http://url.xml";

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ArrayList<String> photoLink = new ArrayList<String>();
        new FileFromURL().execute(xmlurl);
        nl  = doc.getElementsByTagName("photo"); /////// line 62
        for(int i=0; i < nl.getLength(); i++){
                   Node node = nl.item(i);
                   Element fstElmnt = (Element) node;
                   photoLink.add(fstElmnt.getAttribute("link"));
        }

        for(int i=0;i<photoLink.size();i++){
            Log.d("Photo link --- " + i,photoLink.get(i));
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    class FileFromURL extends AsyncTask<String, String, String> {

        @Override
        protected String doInBackground(String... xmlur) {
            // TODO Auto-generated method stub

            try {
                httpClient  =   new DefaultHttpClient();
                httpPost    =   new HttpPost(xmlurl);

                httpRes     =   httpClient.execute(httpPost);
                httpEnt     =   httpRes.getEntity();
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            try{
                xml                             =   EntityUtils.toString(httpEnt);

                DocumentBuilderFactory  dbf =   DocumentBuilderFactory.newInstance();
                DocumentBuilder db  = dbf.newDocumentBuilder();
                InputSource     is  = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc                 = db.parse(is);

            }catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());

            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());

            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            super.onPostExecute(result);
        }

    }
} 
```

堆栈跟踪 ：

```
12-05 11:01:34.128: E/AndroidRuntime(11990): FATAL EXCEPTION: main
12-05 11:01:34.128: E/AndroidRuntime(11990): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.gallery.parsing.madhuri/com.example.gallery.parsing.madhuri.MainActivity}: java.lang.NullPointerException
12-05 11:01:34.128: E/AndroidRuntime(11990):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
12-05 11:01:34.128: E/AndroidRuntime(11990):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
12-05 11:01:34.128: E/AndroidRuntime(11990):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
12-05 11:01:34.128: E/AndroidRuntime(11990):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
12-05 11:01:34.128: E/AndroidRuntime(11990):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-05 11:01:34.128: E/AndroidRuntime(11990):    at android.os.Looper.loop(Looper.java:137)
12-05 11:01:34.128: E/AndroidRuntime(11990):    at android.app.ActivityThread.main(ActivityThread.java:4424)
12-05 11:01:34.128: E/AndroidRuntime(11990):    at java.lang.reflect.Method.invokeNative(Native Method)
12-05 11:01:34.128: E/AndroidRuntime(11990):    at java.lang.reflect.Method.invoke(Method.java:511)
12-05 11:01:34.128: E/AndroidRuntime(11990):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:817)
12-05 11:01:34.128: E/AndroidRuntime(11990):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
12-05 11:01:34.128: E/AndroidRuntime(11990):    at dalvik.system.NativeStart.main(Native Method)
12-05 11:01:34.128: E/AndroidRuntime(11990): Caused by: java.lang.NullPointerException
12-05 11:01:34.128: E/AndroidRuntime(11990):    at com.example.gallery.parsing.madhuri.MainActivity.onCreate(MainActivity.java:62)
12-05 11:01:34.128: E/AndroidRuntime(11990):    at android.app.Activity.performCreate(Activity.java:4465)
12-05 11:01:34.128: E/AndroidRuntime(11990):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-05 11:01:34.128: E/AndroidRuntime(11990):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
12-05 11:01:34.128: E/AndroidRuntime(11990):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:10:47.310

因为您执行了 asyncTask，但随后您尝试从 doc 创建 nodeList，它可能尚未初始化。您也应该将 nodeList 放入您的 asyncTask 中。

尝试这样做：

```
public class MainActivity extends Activity {

    static final String KEY_ITEM    = "photo"; // parent node
    String xml;
    Document    doc;
    NodeList    nl;
    DefaultHttpClient   httpClient;
    HttpPost            httpPost;
    HttpResponse        httpRes;
    HttpEntity          httpEnt;

String xmlurl       = "http://url.xml";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ArrayList<String> photoLink = new ArrayList<String>();
    new FileFromURL().execute(xmlurl);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

class FileFromURL extends AsyncTask<String, String, String> {

    @Override
    protected String doInBackground(String... xmlur) {
        // TODO Auto-generated method stub

        try {
            httpClient  =   new DefaultHttpClient();
            httpPost    =   new HttpPost(xmlurl);

            httpRes     =   httpClient.execute(httpPost);
            httpEnt     =   httpRes.getEntity();
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

        try{
            xml                             =   EntityUtils.toString(httpEnt);

            DocumentBuilderFactory  dbf =   DocumentBuilderFactory.newInstance();
            DocumentBuilder db  = dbf.newDocumentBuilder();
            InputSource     is  = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc                 = db.parse(is);

        }catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());

        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());

        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        if(doc != null) {
           nl  = doc.getElementsByTagName("photo"); /////// line 62
           for(int i=0; i < nl.getLength(); i++){
                  Node node = nl.item(i);
                  Element fstElmnt = (Element) node;
                  photoLink.add(fstElmnt.getAttribute("link"));
           }

           for(int i=0;i<photoLink.size();i++){
                Log.d("Photo link --- " + i,photoLink.get(i));
           }
        }

    }

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:13:13.343

AsyncTask 类允许执行后台操作。

请参阅[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

```
public class MainActivity extends Activity {

    static final String KEY_ITEM    = "photo"; // parent node
    String xml;
    Document    doc;
    NodeList    nl;
    DefaultHttpClient   httpClient;
    HttpPost            httpPost;
    HttpResponse        httpRes;
    HttpEntity          httpEnt;

    String xmlurl       = "http://url.xml";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    new FileFromURL().execute(xmlurl);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

class FileFromURL extends AsyncTask<String, String, String> {

    @Override
    protected String doInBackground(String... xmlur) {
        // TODO Auto-generated method stub

        try {
            httpClient  =   new DefaultHttpClient();
            httpPost    =   new HttpPost(xmlurl);

            httpRes     =   httpClient.execute(httpPost);
            httpEnt     =   httpRes.getEntity();
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        try{
            xml                             =   EntityUtils.toString(httpEnt);

            DocumentBuilderFactory  dbf =   DocumentBuilderFactory.newInstance();
            DocumentBuilder db  = dbf.newDocumentBuilder();
            InputSource     is  = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc                 = db.parse(is);

            ArrayList<String> photoLink = new ArrayList<String>();
            nl  = doc.getElementsByTagName("photo"); /////// line 62
            for(int i=0; i < nl.getLength(); i++){
                Node node = nl.item(i);
                Element fstElmnt = (Element) node;
                photoLink.add(fstElmnt.getAttribute("link"));
            }

            for(int i=0;i<photoLink.size();i++){
                Log.d("Photo link --- " + i,photoLink.get(i));
            }

        }catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());

        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());

        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        super.onPostExecute(result);
    }

}
} 
```

# asp.net - db.SaveChanges 总是给出以下信息：无法定义两个对象之间的关系

> ID：13717275
> 
> 赞同：0
> 
> 时间：2012-12-05T06:03:54.283
> 
> 标签：asp.net, asp.net-mvc, entity-framework

为什么每当我打电话

```
db.SaveChanges(); 
```

我 git 这个错误

```
The relationship between the two objects cannot be defined because they are attached to different ObjectContext objects 
```

调试后我注意到当我`getX()`在模型中调用函数时会出现问题：

```
public ICollection<Dish> getX()
        {
            if (this.x== null)
            {
                return x= this.initX().ToList<X>();
            }
            return x;
        } 
```

而这`initX`是一个简单的`linq`查询

**为什么我不能设置 x 的值？**所以当我将线路更改为

```
return this.initX().ToList<X>(); // whithout x=... 
```

它工作正常...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:43:36.727

确保您`ObjectContext`对该事务的所有查询使用相同的实例。

# mysql - 如何将大型 (14 GB) MySQL 转储文件导入新的 MySQL 数据库？

> ID：13717277
> 
> 赞同：85
> 
> 时间：2012-12-05T06:03:55.533
> 
> 标签：mysql, large-files

如何将大型 (14 GB) MySQL 转储文件导入新的 MySQL 数据库？

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2014-03-03T19:41:09.983

我四处搜索，只有这个解决方案对我有帮助：

```
mysql -u root -p

set global net_buffer_length=1000000; --Set network buffer length to a large byte number

set global max_allowed_packet=1000000000; --Set maximum allowed packet size to a large byte number

SET foreign_key_checks = 0; --Disable foreign key checking to avoid delays,errors and unwanted behaviour

source file.sql --Import your sql dump file

SET foreign_key_checks = 1; --Remember to enable foreign key checks when procedure is complete! 
```

答案在[这里](https://manios.org/2013/03/19/import-a-large-sql-dump-file-to-a-mysql-database-from-command-line)。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-05T06:21:47.883

您是否尝试过直接使用`mysql`命令行客户端？

```
mysql -u username -p -h hostname databasename < dump.sql 
```

如果你不能这样做，你可以通过谷歌搜索找到任何数量的实用程序，它们可以帮助你将大型转储导入 MySQL，比如[BigDump](http://www.ozerov.de/bigdump/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-03-29T06:32:36.087

在最近的一个项目中，我们面临着处理和操纵大量数据的挑战。我们的客户向我们提供了 50 个 CSV 文件，大小从 30 MB 到 350 MB 不等，总共包含大约 2000 万行数据和 15 列数据。我们的最终目标是将数据导入和操作到 MySQL 关系数据库中，以用于驱动我们也开发的前端 PHP 脚本。现在，处理这么大或更大的数据集并不是最简单的任务，在处理它时，我们想花点时间分享一些在处理这样的大型数据集时应该考虑和知道的事情。

1.  **分析您的数据集预导入**

这第一步我怎么强调都不过分！确保在导入之前花时间分析正在使用的数据。了解所有数据代表什么，哪些列与您需要进行的操作和操作类型相关，从长远来看，最终将为您节省时间。

2.  **LOAD DATA INFILE 是你的朋友**

如果您继续尝试通过 PHPMyAdmin 之类的工具进行常规 CSV 插入，那么导入像我们使用过的（以及更大的）这样的大型数据文件可能会很困难。它不仅在许多情况下会失败，因为由于上传大小限制和服务器超时，您的服务器将无法处理与某些数据文件一样大的文件上传，而且即使成功，该过程也可能需要数小时取决于我们的硬件。创建 SQL 函数 LOAD DATA INFILE 是为了处理这些大型数据集，并将显着减少处理导入过程所需的时间。值得注意的是，这可以通过 PHPMyAdmin 执行，但您可能仍然遇到文件上传问题。

```
 LOAD DATA INFILE '/mylargefile.csv' INTO TABLE temp_data FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n' 
```

3.  **MISAM 与 InnoDB**

无论是大型数据库还是小型数据库，花一点时间来考虑您将为您的项目使用哪个数据库引擎总是好的。您将要阅读的两个主要引擎是 MISAM 和 InnoDB，它们各有优缺点。简而言之，要考虑的事情（一般而言）如下：

*米萨姆*

*   降低内存使用率
*   允许全文搜索
*   表级锁定 - 在写入时锁定整个表
*   非常适合阅读密集型应用程序

*InnoDB*

*   项目清单
*   使用更多内存
*   不支持全文搜索
*   更快的性能
*   行级别锁定——在写入时锁定单行
*   非常适合读/写密集型应用程序

4.  **仔细规划您的设计**

MySQL 分析您的数据库设计/结构将成为影响其性能的重要因素。花点时间规划不同的字段并分析数据以找出最佳的字段类型、默认值和字段长度。您希望容纳适量的数据，并在数据不保证时尽量避免使用 varchar 列和过大的数据类型。作为完成数据库后的附加步骤，您希望查看 MySQL 建议的所有不同字段的字段类型。您可以通过执行以下 SQL 命令来执行此操作：

```
 ANALYZE TABLE my_big_table 
```

结果将是对每列信息的描述以及对它应该是什么类型的数据类型以及适当长度的建议。现在您不一定需要遵循这些建议，因为它们仅基于现有数据，但它可能有助于您走上正确的轨道并让您思考

5.  **索引或不索引**

对于如此大的数据集，根据您需要对前端数据执行的操作为您的数据创建适当的索引非常重要，但是如果您计划事先操作数据，请避免在其上放置太多索引数据。它不仅会使您的 SQL 表变大，而且还会减慢某些操作，例如列加法、减法和附加索引。对于我们的数据集，我们需要获取刚刚导入的信息并将其分解为几个不同的表以创建关系结构，并获取某些列并将信息拆分为其他列。我们在最少的列上放置了一个索引，我们知道这些列可以帮助我们进行操作。总而言之，我们取了 1 个包含 2000 万行数据的大表，并将其信息拆分为 6 个不同的表，其中包含主要数据片段以及基于现有内容新创建的数据。我们通过编写小的 PHP 脚本来解析和移动数据来完成所有这些工作。

6.  **寻找平衡**

从编程的角度来看，使用大型数据库的很大一部分是速度和效率。将所有数据放入数据库中很棒，但是如果您编写的用于访问数据的脚本很慢，那还有什么意义呢？在处理大型数据集时，花时间了解脚本正在执行的所有查询并创建索引以尽可能帮助这些查询非常重要。一种分析查询的方法是执行以下 SQL 命令：

```
 EXPLAIN SELECT some_field FROM my_big_table WHERE another_field='MyCustomField'; 
```

通过将 EXPLAIN 添加到查询的开头，MySQL 将吐出描述它尝试使用、确实使用了哪些索引以及如何使用它们的信息。我将这一点标记为“寻找平衡”，因为尽管索引可以帮助您的脚本执行得更快，但它们也可以轻松地使其运行得更慢。您需要确保索引需要的内容并且仅索引需要的内容。每个索引都会消耗磁盘空间并增加表的开销。每次对表进行编辑时，都必须为该特定行重建索引，并且这些行上的索引越多，所需的时间就越长。这一切都归结为制作智能索引、高效的 SQL 查询以及最重要的基准测试，以了解每个查询在做什么以及完成它需要多长时间。

7.  **索引打开，索引关闭**

当我们处理数据库和前端脚本时，客户和我们都开始注意到需要更改的小事情，并且需要我们对数据库进行更改。其中一些更改涉及添加/删除列和更改列类型。由于我们已经在数据上设置了许多索引，因此进行任何这些更改都需要服务器做一些认真的工作来保持索引到位并处理任何修改。在我们的小型 VPS 服务器上，一些更改需要 6 个小时以上才能完成……当然对我们能够进行快速开发没有帮助。解决方案？关闭索引！有时最好关闭索引，进行更改，然后重新打开索引……尤其是如果您要进行许多不同的更改。关闭索引后，更改需要几秒钟到几分钟而不是几小时。当我们对我们的更改感到满意时，我们只需重新打开索引。这当然需要相当长的时间来重新索引所有内容，但它至少能够一次重新索引所有内容，从而减少一项一项进行这些更改所需的总时间。这是如何做到的：

*   **禁用索引**：`ALTER TABLE my_big_table DISABLE KEY`
*   **启用索引**：`ALTER TABLE my_big_table ENABLE KEY`

8.  **调整 MySQL**

在使您的数据库和脚本快速运行时，不要忽视您的服务器。您的硬件需要与数据库和脚本一样多的关注和调整。尤其重要的是查看您的 MySQL 配置文件，以了解可以进行哪些更改以更好地提高其性能。

9.  **不要害怕问**

开始使用 SQL 可能具有挑战性，而使用非常大的数据集只会让它变得更加困难。当涉及到大型数据集时，不要害怕去找知道自己在做什么的专业人士。最终，您将获得卓越的产品、更快的开发和更快的前端性能。当涉及到大型数据库时，有时需要专业人员经验丰富的眼睛才能发现所有可能降低数据库性能的小警告。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-22T02:08:35.933

我在我看到的一些回复中发布了我的发现，这些回复没有提到我遇到了什么，显然这甚至会打败 BigDump，所以检查一下：

我试图通过 Linux 命令行加载 500 兆转储，并不断收到“Mysql 服务器已消失”错误。my.conf 中的设置没有帮助。原来解决它的是......我正在做一个大的扩展插入，如：

```
 insert into table (fields) values (a record, a record, a record, 500 meg of data); 
```

我需要将文件格式化为单独的插入，如下所示：

```
 insert into table (fields) values (a record);
    insert into table (fields) values (a record);
    insert into table (fields) values (a record);
    Etc. 
```

为了生成转储，我使用了这样的东西，它就像一个魅力：

```
 SELECT 
        id,
        status,
        email
    FROM contacts
    INTO OUTFILE '/tmp/contacts.sql'
    FIELDS TERMINATED BY ','
    OPTIONALLY ENCLOSED BY '"'
    LINES STARTING BY "INSERT INTO contacts (id,status,email) values ("
    TERMINATED BY ');\n' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-12T23:24:51.537

我制作了一个 PHP 脚本，旨在导入由 phpmyadmin 或 mysql dump (from cpanel) 生成的大型数据库转储。它叫做 PETMI，你可以在这里[[project page]](https://desbest.com/projects/petmi) [[gitlab page]](http://gitlab.com/desbest/petmi)下载它。

它通过拆分一个。sql 文件分成称为拆分的较小文件，并一次处理每个拆分。无法处理的拆分可以由用户在 phpmyadmin 中手动处理。这可以像在 sql 转储中一样轻松编程，每个命令都在一个新行上。sql 转储中的某些内容在 phpmyadmin 导入中有效，但在 mysqli_query 中无效，因此这些行已从拆分中删除。

它已经用 1GB 的数据库进行了测试。它必须上传到现有网站。PETMI 是开源的，示例代码可以在 Gitlab 上看到。

一位版主让我提供一些示例代码。我在打电话，所以请原谅格式。

这是创建拆分的代码。

```
 //gets the config page
                  if (isset($_POST['register']) && $_POST['register'])
                {
                 echo " <img src=\"loading.gif\">";
        $folder = "split/";
        include ("config.php");

        $fh = fopen("importme.sql", 'a') or die("can't open file");
        $stringData = "-- --------------------------------------------------------";
        fwrite($fh, $stringData);
        fclose($fh);

        $file2 = fopen("importme.sql","r");

        //echo "<br><textarea class=\"mediumtext\" style=\"width: 500px; height: 200px;\">";
        $danumber = "1";
        while(! feof($file2)){
            //echo fgets($file2)."<!-- <br /><hr color=\"red\" size=\"15\"> -->"; 
            $oneline = fgets($file2); //this is fgets($file2) but formatted nicely
            //echo "<br>$oneline";

            $findme1  = '-- --------------------------------------------------------';
            $pos1 = strpos($oneline, $findme1);
            $findme2  = '-- Table structure for';
            $pos2 = strpos($oneline, $findme2);
            $findme3  = '-- Dumping data for';
            $pos3 = strpos($oneline, $findme3);
            $findme4  = '-- Indexes for dumped tables';
            $pos4 = strpos($oneline, $findme4);
            $findme5  = '-- AUTO_INCREMENT for dumped tables';
            $pos5 = strpos($oneline, $findme5);
            if ($pos1 === false && $pos2 === false && $pos3 === false && $pos4 === false && $pos5 === false) {

                // setcookie("filenumber",$i);
                // if ($danumber2 == ""){$danumber2 = "0";} else { $danumber2 = $danumber2 +1;}                 
                $ourFileName = "split/sql-split-$danumber.sql";
                // echo "writing danumber is $danumber";
                $ourFileHandle = fopen($ourFileName, 'a') or die("can't edit file. chmod directory to 777");

                $stringData = $oneline;
                $stringData = preg_replace("/\/[*][!\d\sA-Za-z@_='+:,]*[*][\/][;]/", "", $stringData);
                $stringData = preg_replace("/\/[*][!]*[\d A-Za-z`]*[*]\/[;]/", "", $stringData);
                $stringData = preg_replace("/DROP TABLE IF EXISTS `[a-zA-Z]*`;/", "", $stringData);
                $stringData = preg_replace("/LOCK TABLES `[a-zA-Z` ;]*/", "", $stringData);
                $stringData = preg_replace("/UNLOCK TABLES;/", "", $stringData);

                fwrite($ourFileHandle, $stringData);
                fclose($ourFileHandle);

            } else {
                    //write new file;
                    if ($danumber == ""){$danumber = "1";} else { $danumber = $danumber +1;}
                    $ourFileName = "split/sql-split-$danumber.sql"; 
                    //echo "$ourFileName has been written with the contents above.\n";

                    $ourFileName = "split/sql-split-$danumber.sql";
                    $ourFileHandle = fopen($ourFileName, 'a') or die("can't edit file. chmod directory to 777");
                    $stringData = "$oneline";
                    fwrite($ourFileHandle, $stringData);
                    fclose($ourFileHandle);
            }
        }
        //echo "</textarea>";

    fclose($file2); 
```

这是导入拆分的代码

```
<?php
ob_start();
// allows you to use cookies
include ("config.php");
//gets the config page
if (isset($_POST['register']))
{
echo "<div id**strong text**=\"sel1\"><img src=\"loading.gif\"></div>";

// the above line checks to see if the html form has been submitted
$dbname = $accesshost;
$dbhost = $username;
$dbuser = $password;
$dbpasswd = $database;
$table_prefix = $dbprefix;
//the above lines set variables with the user submitted information
    //none were left blank!  We continue...

//echo "$importme";

echo "<hr>";

$importme = "$_GET[file]";
$importme = file_get_contents($importme);
//echo "<b>$importme</b><br><br>";
$sql = $importme;
$findme1  = '-- Indexes for dumped tables';
$pos1 = strpos($importme, $findme1);
$findme2 = '-- AUTO_INCREMENT for dumped tables';
$pos2 = strpos($importme, $findme2);

$dbhost = '';
@set_time_limit(0);

if($pos1 !== false){
    $splitted = explode("-- Indexes for table", $importme);
    // print_r($splitted);
    for($i=0;$i<count($splitted);$i++){
        $sql = $splitted[$i];
        $sql = preg_replace("/[`][a-z`\s]*[-]{2}/", "", $sql);

        // echo "<b>$sql</b><hr>";
        if($table_prefix !== 'phpbb_') $sql = preg_replace('/phpbb_/', $table_prefix, $sql);
        $res = mysql_query($sql);
    }
    if(!$res) { echo '<b>error in query </b>', mysql_error(), '<br /><br>Try importing the split .sql file in phpmyadmin under the SQL tab.'; /* $i = $i +1; */ } else {
    echo ("<meta http-equiv=\"Refresh\" content=\"0; URL=restore.php?page=done&file=$filename\"/>Thank You! You will be redirected");
    }   

} elseif($pos2 !== false){
    $splitted = explode("-- AUTO_INCREMENT for table", $importme);
    // print_r($splitted);
    for($i=0;$i<count($splitted);$i++){
        $sql = $splitted[$i];
        $sql = preg_replace("/[`][a-z`\s]*[-]{2}/", "", $sql);

        // echo "<b>$sql</b><hr>";
        if($table_prefix !== 'phpbb_') $sql = preg_replace('/phpbb_/', $table_prefix, $sql);
        $res = mysql_query($sql);
    }
    if(!$res) { echo '<b>error in query </b>', mysql_error(), '<br /><br>Try importing the split .sql file in phpmyadmin under the SQL tab.'; /* $i = $i +1; */ } else {
    echo ("<meta http-equiv=\"Refresh\" content=\"0; URL=restore.php?page=done&file=$filename\"/>Thank You! You will be redirected");
    }   
} else {
    if($table_prefix !== 'phpbb_') $sql = preg_replace('/phpbb_/', $table_prefix, $sql);
    $res = mysql_query($sql);
    if(!$res) { echo '<b>error in query </b>', mysql_error(), '<br /><br>Try importing the split .sql file in phpmyadmin under the SQL tab.'; /* $i = $i +1; */ } else {
    echo ("<meta http-equiv=\"Refresh\" content=\"0; URL=restore.php?page=done&file=$filename\"/>Thank You! You will be redirected");
    }

 }

//echo 'done (', count($sql), ' queries).';

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-14T17:51:04.360

我在下面发现 SSH 命令对于导出/导入巨大的 MySql 数据库非常强大，至少我已经使用了多年。永远不要依赖通过 cPanel WHM、CWP、OVIPanel 等控制面板生成的备份，它们可能会给您带来麻烦，尤其是当您在控制面板之间切换时，请始终信任 SSH。

[出口]

```
$ mysqldump -u root -p example_database| gzip > example_database.sql.gz 
```

[进口]

```
$ gunzip < example_database.sql.gz | mysql -u root -p example_database 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-14T10:34:12.703

简单的解决方案是运行此查询： `mysql -h yourhostname -u username -p databasename < yoursqlfile.sql`

如果你想用进度条导入，试试这个： `pv yoursqlfile.sql | mysql -uxxx -pxxxx databasename`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-16T10:03:04.043

我长期以来一直试图为这个问题找到一个好的解决方案。最后我想我有一个解决方案。据我了解`max_allowed_packet`没有上限。所以去设置 my.cnf 说`max_allowed_packet=300M`

现在这样做`mysql> source sql.file`不会做任何事情，因为转储文件，`insert`语句被分成 1mb 大小。所以我的 45gb 文件插入计数是 ~：45bg/1mb。

为了解决这个问题，我用 php 解析 sql 文件并将插入语句设置为我想要的大小。就我而言，我已将数据包大小设置为 100mb。所以我减少了插入字符串。在另一台机器上，我的数据包大小为 300M，插入 200M，它可以工作。

由于所有表的总大小约为 1.2tb，因此我按数据库逐表导出。所以我每张表有一个 sql 文件。如果您的不同，则必须相应地调整代码。

```
<?php
global $destFile, $tableName;
function writeOutFile(&$arr)
{
    echo " [count: " . count($arr) .']';
    if(empty($arr))return;
    global $destFile, $tableName;
    $data='';
    //~ print_r($arr);
    foreach($arr as $i=>$v)
    {
        $v = str_replace(";\n", '', $v);
        //~ $v = str_replace("),(", "),\n(", $v);
        $line = ($i==0? $v: str_replace("INSERT INTO `$tableName` VALUES",',', $v));
        $data .= $line;
    }
    $data .= ";\n";
    file_put_contents($destFile, $data, FILE_APPEND);
}
$file = '/path/to/sql.file';
$tableName = 'tablename';
$destFile = 'localfile.name';
file_put_contents($destFile, null);
$loop=0;
$arr=[];

$fp = fopen($file, 'r');
while(!feof($fp))
{
    $line = fgets($fp);
    if(strpos($line, "INSERT INTO `")!==false)$arr[]=$line;
        else
        {writeOutFile($arr); file_put_contents($destFile, $line, FILE_APPEND);$arr=[];continue;}

    $loop++;
    if(count($arr)==95){writeOutFile($arr);$arr=[];}
    echo "\nLine: $loop, ". count($arr);
}

?> 
```

这对您的工作方式取决于您的硬件。但所有事情都保持不变，这个过程以指数方式加速了我的导入。我没有任何基准可以分享，这是我的工作经验。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-13T09:00:08.690

使用*source*命令导入大型数据库

```
mysql -u username -p

> source sqldbfile.sql 
```

这可以导入任何大型数据库

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2017-05-15T13:06:34.343

根据mysql文档，这些都不起作用！人们注意了！所以我们将 test.sql 上传到 test_db 中，在 shell 中输入：

mysql --user=user_name --password=yourpassword test_db < d:/test.sql

* * *

## 回答 #11

> 赞同：-6
> 
> 时间：2016-03-14T11:30:52.233

导航到 C:\wamp64\alias\phpmyadmin.conf 并从以下位置更改：

```
php_admin_value upload_max_filesize 128M
php_admin_value post_max_size 128M 
```

至

```
php_admin_value upload_max_filesize 2048M
php_admin_value post_max_size 2048M 
```

或者更多 ：）

# java - 如何在 Android 手机唤醒时可靠地检测 Internet 连接

> ID：13717278
> 
> 赞同：0
> 
> 时间：2012-12-05T06:03:54.850
> 
> 标签：java, android

我有一个在启动时依赖 Internet 连接的应用程序，我可以使用下面的代码检测到它。

但是，当手机闲置一段时间并且我解锁它并启动我的应用程序时，它不会立即找到连接，我必须再次重新启动应用程序才能成功。

我曾尝试在一个线程中等待并再次重试下面的代码，但也没有成功。

任何想法将不胜感激，谢谢。

**代码**

```
 // check Network/Internet connection
    public boolean isOnline() {

    try {
        ConnectivityManager cm = (ConnectivityManager) _context.getSystemService(Context.CONNECTIVITY_SERVICE);
        boolean haveConnectedWifi = false;
        boolean haveConnectedMobile = false;

        cm = (ConnectivityManager) _context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo[] netInfo = cm.getAllNetworkInfo();

        for (NetworkInfo ni : netInfo) {
            if (ni.getTypeName().equalsIgnoreCase("WIFI")) {
                if (ni.isConnected()) {
                    haveConnectedWifi = true;
                }
            }
            if (ni.getTypeName().equalsIgnoreCase("MOBILE")) {
                if (ni.isConnected()) {
                    haveConnectedMobile = true;
                }
            }
        }
        return haveConnectedWifi || haveConnectedMobile;
    } catch (Exception e) {
        Log.e(TAG, e.toString());
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:11:53.160

将您的代码放入您`onResume()`的活动中。这样，每次您返回活动时都会对其进行检查。

此外，添加一个标志以了解是否检查连接，并在`onPause()`您的活动中将该标志设置为 true。在您的`onResume()`.

就像是：

```
boolean check;

    protected void onCreate(Bundle blah) {
      super(blah);
      check = true;
      // whatever else
    }

    protected void onResume() {
      if(check) {
        isOnline();
        // Everything else

        check = false;
      }
      super.onResume();
    }

    protected void onPause() {
      check = true;
      super.onPause();
    } 
```

**编辑**：`onResume()`除非此活动被恢复，否则不会被调用，因此您可以添加：

```
protected void onResume() {
  isOnline();
  // Everything else
  super.onResume();
} 
```

[请查看Android 开发网站](http://developer.android.com/reference/android/app/Activity.html)上的此流程图以更好地理解： ![在此处输入图像描述](../Images/05d526ec7f1a809b3d51bcafd443608e.png)

# linux - 交叉编译用 c 编写的驱动程序，用于不附带配置文件的 linux

> ID：13717284
> 
> 赞同：2
> 
> 时间：2012-12-05T06:04:26.160
> 
> 标签：linux, embedded, ethernet

我们正在尝试交叉编译 TP-Link TG 3468 千兆以太网适配器的驱动程序。供应商有驱动程序的 linux 版本，但没有配置文件。只有make文件和c文件。请提出一种交叉编译驱动程序的方法。

我们正在尝试为基于 ARM 处理器的单板计算机编译它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:07:28.887

大多数 Linux 内核模块不使用 autoconf，因此没有配置文件。您是否尝试运行`make`（可能使用适当的`CC=`设置）？

另请参阅[此答案](https://stackoverflow.com/a/496047/841108)。

# jquery - 到目前为止，如何让 img 宽度和高度的 jQuery var 达到 50%？

> ID：13717291
> 
> 赞同：0
> 
> 时间：2012-12-05T06:05:25.513
> 
> 标签：jquery

这是我在一个程序中工作的
[24 小时演示](http://trialsites.ihoststudio.com/trialsite361700/website/)
的工作试用，所以我必须更改属性才能让它工作
我现在遇到的问题是让图像在悬停时达到 50%在使用 Demo 中所示的 fancybox 之前进行预览
以转到大图像
**这是我尝试过的，但它会引发错误**

```
 var offsetX = 20;
    var offsetY = 10;

$('a.nextfancy').hover(function(e) {
var href = $(this).attr('href');
$('<img id="largeImage" src="' + href + '" alt="big image" />')
.css('top', e.pageY + offsetY)
.css('left', e.pageX + offsetX)
.appendTo('body');
}, function() {
$('#largeImage').remove();
});

$('a.nextfancy').mousemove(function(e) {
$("#largeImage").css('top', e.pageY + offsetY).css('left', e.pageX + offsetX);
}); 
```

---- 试过这个 ------

```
 var offsetX = 20;
    var offsetY = 10;
    var halfSize = {maxWidth:"50%", maxHeight: "50%"};

$('a.nextfancy').hover(function(e) {
var href = $(this).attr('href');
$('<img id="largeImage" src="' + href + '" alt="big image" />')
.css('top', e.pageY + offsetY)
.css('left', e.pageX + offsetX)
.appendTo('body');
}, function() {
$('#largeImage').animate(halfSize);
}, function() {
$('#largeImage').remove();
});

$('a.nextfancy').mousemove(function(e) {
$("#largeImage").css('top', e.pageY + offsetY).css('left', e.pageX + offsetX);
}); 
```

图像上的 Css 不起作用，然后缩小到一半的窗口大小
我正在慢慢地自学 jQuery 并将其拼凑在一起......

接下来我想删除标题并将其保留在浏览器窗口中，但小步骤
如果你显示我这个我希望我能弄清楚下一部分该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:21:07.580

这是一个工作示例：http: [//jsfiddle.net/chphQ/](http://jsfiddle.net/chphQ/)

你需要改变这个：

```
$('a.nextfancy').hover(function(e) {
    var href = $(this).attr('href');
    $('<img id="largeImage" src="' + href + '" alt="big image" />').css('top', e.pageY + offsetY).css('left', e.pageX + offsetX).appendTo('body');
}, function() {
    $('#largeImage').remove();
}); 
```

对此：

```
$('a.nextfancy').hover(function(e) {
    var href = $(this).attr('href');
    $('<img id="largeImage" src="' + href + '" alt="big image" height="50%" width="50%" />').css('top', e.pageY + offsetY).css('left', e.pageX + offsetX).appendTo('body');
}, function() {
    $('#largeImage').remove();
}); 
```

注意第 3 行中的 height 和 width 属性的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:24:33.247

我更喜欢使用`width()`和`height()`jquery 函数

它获取当前元素的高度和宽度......并进行所需的计算

做这样的事情......

**更新**

```
var createdImg=$('<img id="largeImage" src="' + href + '" alt="big image" />')
 .css('top', e.pageY + offsetY)
 .css('left', e.pageX + offsetX)
 .appendTo('body');

createdImg.css({'width':createdImg.width() * 0.50,'height':createdImg.height() * 0.50}) 
```

我将即时创建的 img 命名为 createdImg 并在附加后更改高度和宽度的值...

这是小提琴

[http://jsfiddle.net/chphQ/1/](http://jsfiddle.net/chphQ/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T19:35:03.317

我终于使用 css 解决了它，并且不得不使用缩放，在其中添加宽​​度，然后使用 auto 作为高度。汽车是重要的部分。

```
#largeImage {
position: absolute;
width:30%;
height: auto;
z-index:1000;
padding: 6px;
background: silver;
border: 1px solid black;
} 
```

# java - Java：在线程处理期间无法获取列表大小

> ID：13717295
> 
> 赞同：0
> 
> 时间：2012-12-05T06:05:59.230
> 
> 标签：java, multithreading

我正在用java处理一个文件，我正在计算该文件每一行中特定文件的出现次数我正在为每一行启动一个线程，如下所示

```
input = new BufferedReader(new FileReader(new File(finaName)));
    String line = null;
    while ((line = input.readLine()) != null) {
FileThread t = new FileThread(line);
t.start();
    }

FileThread st = new FileThread();
System.out.println("Size"+st.list.size()); 
```

**文件线程.java**

```
public class FileThread extends Thread
List<String> list = new ArrayList<String>();

public FileThread(){}
public FileThread(String line){}
private String line = null;
    public void run() {
    String[] tokens = line.split("\\|", LIST.length);
            String Symbol = null;
            try {
            Symbol = tokens[4];
                    list.add(symbol);

            } catch (Throwable t1) {
                t1.printStackTrace();
            }

        } 
```

问题是我总是将 Size 设为 0 。请查看示例输出

**BIM!A BIM!B BIM!C BIM!D 尺寸0**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:16:59.717

我对您的代码进行了一些更改，这可能会对您有所帮助

```
public class FileThread extends Thread {
    private List<String> list = new ArrayList<String>();
    private boolean inThread = false;
    .......
    public int getListSize() {
        if(!inThread)
            return list != null ? list.size() : 0 ;
        else
            return 0;
    }

    public FileThread(String line) {
    }

    public void run() {
        inThread = true;
             // You logic of the thread
        inThread = false;
    }

    public static void main(String args[]) throws IOException {
     ..............

     ..............

     ..............
        System.out.println("Size" + st.getListSize());
    }

} 
```

# php - 议程中可用时间的算法

> ID：13717302
> 
> 赞同：4
> 
> 时间：2012-12-05T06:06:48.890
> 
> 标签：php, mysql, sql

我真的陷入了这种境地。

我有这两张桌子：

*   employee_working_schedule（存储员工在特定日期工作的开始和结束时间）
*   员工约会

假设我们存储了这些行

员工工作时间表：

```
start | end
10:00 | 18:00 
```

员工约会：

```
start | end
10:10 | 11:00
11:20 | 12:00
14:30 | 15:20 
```

在这种情况下，我想表明可用时间是：

```
10:00 | 10:10
11:00 | 11:20
12:00 | 14:30
15:20 | 18:00 
```

有没有办法通过 SQL 做到这一点？我试图用php实现，但到目前为止没有成功。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T06:42:50.277

这是一种在纯 PHP 中执行此操作的方法：

```
class TimeSpan {

  function __construct($start, $end) {
    $this->start = $start;
    $this->end = $end;
  }

  function starttime() {
    list($hour, $minute) = explode(":", $this->start);
    return (int)$hour * 60 + (int)$minute;
  }

  function endtime() {
    list($hour, $minute) = explode(":", $this->end);
    return (int)$hour * 60 + (int)$minute;
  }

}

function convert_to_time($minutes) {
  $hour = (int) ($minutes / 60);
  $minutes = $minutes % 60;
  return str_pad($hour, 2, '0', STR_PAD_LEFT) . ':' . str_pad($minutes, 2, '0', STR_PAD_LEFT);
}

function open_times($shift, $appointments) {
  $alltimes = array_fill_keys(range($shift->starttime(), $shift->endtime()), 1);
  foreach ($appointments as $appt) {
    $alltimes = array_diff_key($alltimes, array_fill_keys(range($appt->starttime() + 1, $appt->endtime() - 1), 1));
  }
  $groups = array();
  $active_group = 0;

  $output = array();
  $output_counter = 0;
  $nums = array_keys($alltimes);
  foreach( $nums as $k => $num ) {
      if( $k !== 0 && $nums[$k] !== $nums[$k-1]+1 ) $active_group ++;
      $groups[ $active_group ][] = $num;
  }

  foreach( $groups as $group ) {
      $first = array_shift( array_values($group) );
      $output[$output_counter][] = $first;
      $last = array_pop( array_values($group) );
      if( $first !== $last )
          $output[$output_counter][] = $last;
      $output_counter++;
  }
  foreach ($output as &$span) {
    $span[0] = convert_to_time($span[0]);
    $span[1] = convert_to_time($span[1]);
  }
  return $output;
}

$shift = new TimeSpan("10:00", "18:00");
$appointments = array(
        new TimeSpan("10:10", "11:00"),
        new TimeSpan("11:20", "12:00"),
        new TimeSpan("14:30", "15:20"),
      );

print_r(open_times($shift, $appointments)); 
```

**输出**

```
Array
(
    [0] => Array
        (
            [0] => 10:00
            [1] => 10:10
        )

    [1] => Array
        (
            [0] => 11:00
            [1] => 11:20
        )

    [2] => Array
        (
            [0] => 12:00
            [1] => 14:30
        )

    [3] => Array
        (
            [0] => 15:20
            [1] => 18:00
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:26:09.233

我可以用 PHP 给你一个解决方案，但是如果你能在 SQL 中找到一些东西，它当然会更快

```
//given you selected $employee_working_schedule
$dayStart = DateTime::createFromFormat('h:i',$employee_working_schedule['start']);
$dayEnd = DateTime::createFromFormat('h:i',$employee_working_schedule['end']);

//then assuming your query statement is named $timeQuery and use PDO 
$nextFreeStart = $dayStart;
$newFreeEnd = null;
$freeTime = array();//here we will store the free time intervals
while($times = $timeQuery->fetch(PDO::FETCH_ASSOC)){
    $nextFreeEnd = DateTime::createFromFormat('h:i',$times['start']);
    $freeTime[] = $nextFreeEnd->diff($nextFreeStart);
    $nextFreeStart = DateTime::createFromFormat('h:i',$times['end']);
}
$freeTime[] = $dayEnd->diff($nextFreeStart); //close the day 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:33:55.607

策略：收集所有起点，为每个起点找到其各自的终点，然后丢弃不符合的行。

这是用 MySQL 编写的想法（未经测试）：

```
SELECT eas.s AS s_start, MIN(eas.e) AS e_end
FROM ((
  SELECT end AS s, start AS e
  FROM employee_appointments
) UNION (
  SELECT start AS s,end AS e
  FROM employee_working_schedule
)) eas
WHERE end > start -- or >= if you want zero-time slots as well
GROUP BY eas.s
HAVING NOT EXISTS ( -- if appointments are disjoint, this is likely redundant
  SELECT 0
  FROM employee_appointments kill
  WHERE s_start > kill.end AND kill.start > e_end
) 
```

# c - 查找程序中分配的内存？

> ID：13717304
> 
> 赞同：0
> 
> 时间：2012-12-05T06:07:16.773
> 
> 标签：c, memory-management, malloc

> **可能重复：**
> [如何从 C 中的指针获取数组的大小？](https://stackoverflow.com/questions/232691/how-can-i-get-the-size-of-an-array-from-a-pointer-in-c)
> [如何获取使用 malloc() 分配的内存块的大小？](https://stackoverflow.com/questions/1208644/how-can-i-get-the-size-of-a-memory-block-allocated-using-malloc)

```
void func( int *p)
{
      // Add code to print MEMORY SIZE which is pointed by pointer p.
}
int main()
{
      int *p = (int *) malloc(10 * sizeof(int));
      func(p);
} 
```

我们如何从 func() 中的内存指针 P 中找到 MEMORY SIZE ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:12:52.343

您不能在 C 中以可移植的方式执行此操作。它可能不会存储在任何地方；`malloc()`可以保留比您要求的区域大得多的区域，并且不能保证存储有关您要求的数量的任何信息。

您要么需要使用标准大小，例如`malloc(ARRAY_LEN * sizeof(int))`or `malloc(sizeof mystruct)`，要么需要使用指针传递信息：

```
struct integers {
    size_t count;
    int *p;
};

void fun(integers ints) {
    // use ints.count to find out how many items we have
}

int main() {
    struct integers ints;
    ints.count = 10;
    ints.p = malloc(ints.count * sizeof(int));
    fun(ints);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:24:24.160

没有内置逻辑来查找分配给指针的内存。正如布赖恩在他的回答中提到的那样，您必须实施自己的方法。

是的，您可以使用 linux 上的 valgrind 等工具发现内存泄漏。在 solaris 上有一个库 libumem.so，它有一个名为 findleaks 的函数，它会告诉您在进程处于运行状态时泄漏了多少内存。

# iphone - xcode中的NSString或NSCFString？

> ID：13717310
> 
> 赞同：2
> 
> 时间：2012-12-05T06:07:34.457
> 
> 标签：iphone, xcode, nsstring, nscfstring

我在 NSString 中使用一个 NSMutabledictionary 对象，如下所示：

```
NSString *state=[d valueForKey:@"State"]; 
```

现在有时状态可能为空，有时会填充文本。所以我比较它。虽然比较状态有时变为 NSString，有时变为 NSCFString ..所以无法得到想要的结果..

```
if([state isEqualToString@""])
{
//do something 
}
else
{
//do something
} 
```

所以在比较时它有时会返回 nil。所以立即跳入 else 块。

我需要一种标准方法来比较状态是否为空是 NSString 还是 NSCFString ...

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:12:12.827

如果你不能得到你想要的结果，我可以向你保证，这不是因为你得到的是 a`NSCFString`而不是 a `NSString`。

在 Objective-C 中，框架充满了集群类；也就是说，你在文档中看到了一个类，而实际上它只是一个*接口*。相反，框架有自己的这些类的实现。例如，正如您所指出的，`NSString`该类通常由`NSCFString`该类表示；还有一些其他的，比如`NSConstantString`and `NSPathStore2`，它们实际上是 , 的子类`NSString`，它们的行为就像你期望的那样。

你的问题，在我看来...

> 现在有时状态可能为空，有时会填充文本。

...是在Objective-C中，调用方法是合法的`nil`。（`Nil`是 C# 和 Java 等其他语言中的 Objective-C 概念`null`。）但是，当您这样做时，返回值始终为零；因此，如果您的字符串是`nil`，则使用方法对其进行的任何相等比较都将返回`NO`，即使您进行比较也是如此`nil`。即使这样，请注意*空字符串*与 不同`nil`，因为`nil`可以看作是没有任何东西。一个空字符串没有字符，但是，嘿，至少它在那里。`nil`意味着什么都没有。

因此，您可能需要使用简单的指针相等来检查is not ，而不是使用方法与`state`空字符串进行比较。`state``nil`

```
if(state == nil)
{
    //do something 
}
else
{
    //do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:31:33.747

你可以这样做

```
if([state isEqualToString:@""])
{
//do something 
}
else
{
//do something
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T06:09:23.010

您必须输入强制转换才能获得正确答案。

```
 NSString *state = (NSString *) [d valueForKey:@"State"];

  if(state != nil)
  {
      if(state.length > 0)
      {
           //string contains characters
      }
  } 
```

# c# - 如何在 Asp.Net Web API 中使用 MultipartFormDataStreamProvider 将两个不同格式的文件上传到两个不同的文件路径

> ID：13717311
> 
> 赞同：0
> 
> 时间：2012-12-05T06:07:34.127
> 
> 标签：c#, asp.net, asp.net-mvc, stream, asp.net-web-api

我的客户端应用程序将通过多部分表单数据流向我发送图像文件和视频文件。我想将图像文件存储在图像文件夹中，将视频文件存储在视频文件夹中。

这就是来自客户端的请求的样子

内容处置：表单数据；名称="照片"; 文件名="IMG_9322.JPG" 内容类型：应用程序/八位字节流

内容处置：表单数据；名称="视频"; 文件名="sample.avi" 内容类型：应用程序/八位字节流

这是我最后的 Api 控制器方法

```
[HttpPost]
    [ActionName("UploadVideoEntry")]
    public async Task<HttpResponseMessage> UploadVideoEntry()
    {
        // Check if the request contains multipart/form-data.
        if (!Request.Content.IsMimeMultipartContent())
        {
            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
        }

        var folderName = "photos";
        string root = HttpContext.Current.Server.MapPath("~/" + folderName);
        var provider = new MultipartFormDataStreamProvider(root);

        try
        {               

            // Read the form data and return an async task.
            var response = await Request.Content.ReadAsMultipartAsync(provider);              

            return Request.CreateResponse(HttpStatusCode.OK, new ResponseMessage<Object> { success = true, message = "Media Uploaded" });

        }
        catch (System.Exception e)
        {
            return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, e);
        }
    } 
```

这将两个文件都存储在照片文件夹中，因为那是我给出的路径。但我不知道如何将这两个文件分开并将它们存储在不同的路径中。请让我知道是否有人有任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:56:33.090

查看下一页上的示例：

[http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)

您想在下载文件后获取文件名并移动它们。我做了一些非常相似的事情。获得文件名后，您可以使用

```
File.Move(currentPath,newPath) 
```

将文件移动到新位置。您的 currentPath 是您的`root`变量加上文件名。不要忘记像这样添加@“\”：

```
currentPath = root + @"\" + filename 
```

下面是获取文件名的代码。

```
foreach (MultipartFileData file in provider.FileData)
{
    Trace.WriteLine(file.Headers.ContentDisposition.FileName);
    Trace.WriteLine("Server file path: " + file.LocalFileName);
} 
```

我自己的第一步是测试文件名以确定扩展名，然后在找到合适的文件后执行您想要的任何操作，在本例中为移动。

# big-o - 此算法中的加法和乘法运算符的数量

> ID：13717312
> 
> 赞同：0
> 
> 时间：2012-12-05T06:07:42.537
> 
> 标签：big-o, complexity-theory, asymptotic-complexity

考虑以下算法：

```
i := 1
t := 0
    while i ≤ n
       t := t + i
       i := 2i 
```

我有兴趣找出这个算法执行了多少加法和乘法运算；但是，我遇到了麻烦。我知道每次迭代后 i 的值加倍，但我不知道如何推广算法以给出正确数量的操作，直到 n 的值。如果有人能对这个问题有所了解，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:12:09.167

由于每个循环的值`i`加倍并且`i <= n`

```
i*2^x <= n 
```

最大化 x 给出循环数。因为 i = 1

```
2^x = n
x = floor log(n) 
```

我们每个循环执行 1 次加法和 1 次乘法。我想你可以从这里拿走:)

# python - 如何在 django 中找到 tempfile 的路径

> ID：13717314
> 
> 赞同：9
> 
> 时间：2012-12-05T06:07:47.640
> 
> 标签：python, django

我正在使用这样的pdftk

**pdftk** `template.pdf` **fill_form** `/temp/input.fdf output` `/temp/output.pdf`

现在这工作正常

但现在我用这个生成了临时文件而不是 /temp/input.fdf

```
myfile = tempfile.NamedTemporaryFile()
myfile.write(fdf)
myfile.seek(0)
myfile.close() 
```

现在我不知道如何将 myfile 作为输入传递给 pdftk

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T06:18:40.720

`myfile.name`将为您提供文件路径。

注意`tempfile`s 之后不存在`close()`。从文档：

```
 tempfile.TemporaryFile([mode='w+b'[, bufsize=-1[, suffix=''[, 
    prefix='tmp'[, dir=None]]]]]) 
```

> 返回一个可以用作临时存储区域的类文件对象。该文件是使用 mkstemp() 创建的。一旦关闭它就会被销毁（包括当对象被垃圾回收时的隐式关闭）。在 Unix 下，文件的目录条目在文件创建后立即被删除。其他平台不支持；您的代码不应依赖于使用此函数创建的临时文件，该文件在文件系统中具有或不具有可见名称。

*来源：[http ://docs.python.org/2/library/tempfile.html](http://docs.python.org/2/library/tempfile.html)*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-05T06:12:14.487

你不能用

```
myfile = tempfile.NamedTemporaryFile()
myfile.write(fdf)
myfile.seek(0)
myfile.close()
print(myfile.name) 
```

# c++ - 使用opencv显示视频

> ID：13717323
> 
> 赞同：0
> 
> 时间：2012-12-05T06:08:20.603
> 
> 标签：c++, opencv, computer-vision

您好我正在尝试使用以下代码播放视频：

```
//#include <stdio.h>
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
//#include <iostream>

using namespace cv;

int main(int argc, char** argv)
{
    string filename = "anime.avi";
    VideoCapture capture(filename);
    Mat frame;
    if( !capture.isOpened() )
        throw "Error when reading steam_avi";
    namedWindow( "w", 1);
    for( ; ; )
    {
        capture >> frame;
        if(!frame)
            break;
        imshow("w", frame);
        waitKey(20); // waits to display frame
    }
    waitKey(0); // key press to close window
    // releases and window destroy are automatic in C++ interface
} 
```

但是，当我运行它时，出现以下错误： project.cpp: In function 'int main(int, char**)':

```
project.cpp:23:13: error: no match for ‘operator!’ in ‘!frame’
project.cpp:23:13: note: candidates are:
project.cpp:23:13: note: operator!(bool) <built-in>
project.cpp:23:13: note:   no known conversion for argument 1 from ‘cv::Mat’ to ‘bool’
/usr/local/include/opencv2/core/operations.hpp:2220:20: note: bool cv::operator!(const cv::Range&)
/usr/local/include/opencv2/core/operations.hpp:2220:20: note:   no known conversion for argument 1 from ‘cv::Mat’ to ‘const cv::Range&’ 
```

你能帮忙吗。我已经做了几个小时没有成功:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T07:02:30.030

因为 class 没有`operator!`重载`cv::Mat`。[在文档](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html?#videocapture-read)中，没有明确说明在获取失败的情况下应该如何处理图像。那是`cv::VideoCapture::operator>>`from的实现`cap.cpp`：

```
VideoCapture& VideoCapture::operator >> (Mat& image)
{
    if(!grab())
        image.release();
    else
        retrieve(image);
    return *this;
} 
```

现在转到[. `cv::Mat:release`](http://docs.opencv.org/modules/core/doc/basic_structures.html#void%20Mat%3a%3arelease%28%29)让我们仔细检查一下它的实现`mat.hpp`：

```
inline void Mat::release()
{
    if( refcount && CV_XADD(refcount, -1) == 1 )
        deallocate();
    data = datastart = dataend = datalimit = 0;
    size.p[0] = 0;
    refcount = 0;
} 
```

因此，最后，您可以检查`data`指针以了解抓取是否成功：

```
if (!frame.data) break; 
```

但是，我建议在这种情况下使用函数式调用`cv::VideoCapture::read`，因为它显式返回是否成功：

```
if (!capture.read(frame)) break; 
```

高温高压

# java - 是否可以在 META-INF 以外的位置拥有 persistence.xml？

> ID：13717324
> 
> 赞同：12
> 
> 时间：2012-12-05T06:08:30.433
> 
> 标签：java, jpa, persistence.xml

我想让我的 persistence.xml 在我的应用程序的 conf 文件夹中。我如何告诉 Persistence.createEntityManagerFactory 它应该从那里读取它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T13:59:38.913

如果您使用的是 EclipseLink，您可以使用持久性单元属性“eclipselink.persistencexml”设置 persistence.xml 位置。

```
properties.put("eclipselink.persistencexml", "/org/acme/acme-persistence.xml");
EntityManagerFactory factory = Persistence.createEntityManagerFactory("acme", properties); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-21T06:17:58.383

这个解决方案对我有用

```
 Thread.currentThread().setContextClassLoader(new ClassLoader() {
        @Override
        public Enumeration<URL> getResources(String name) throws IOException {
            if (name.equals("META-INF/persistence.xml")) {
                return Collections.enumeration(Arrays.asList(new File("conf/persistence.xml")
                        .toURI().toURL()));
            }
            return super.getResources(name);
        }
    });
    Persistence.createEntityManagerFactory("test"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T06:34:58.960

createEntityManagerFactory 方法在任何 CLASSPATH 元素的 META-INF 目录中搜索 persistence.xml 文件。如果您的 CLASSPATH 包含 conf 目录，您可以在 conf/META-INF/persistence.xml 中放置一个 EntityManagerFactory 定义

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-27T14:45:30.780

ClassLoader 可能是一个 URLClassLoader，所以这样试试：

```
 final URL alternativePersistenceXmlUrl = new File("conf/persistence.xml").toURI().toURL();

    ClassLoader output;

    ClassLoader current = Thread.currentThread().getContextClassLoader();

    try{

        URLClassLoader parent = (URLClassLoader)current;

        output = new URLClassLoader(parent.getURLs(), parent){

            @Override
            public Enumeration<URL> getResources(String name) throws IOException {

                if (name.equals("META-INF/persistence.xml")) {

                    return Collections.enumeration(Arrays.asList(alternativePersistenceXmlUrl));
                }

                return super.getResources(name);
            }
        };
    }catch(ClassCastException ignored) {

        output = new ClassLoader() {

            @Override
            public Enumeration<URL> getResources(String name) throws IOException {

                if (name.equals("META-INF/persistence.xml")) {

                    return Collections.enumeration(Arrays.asList(alternativePersistenceXmlUrl));
                }

                return super.getResources(name);
            }
        };
    } 
```

它应该工作。在某些测试等条件下为我工作。请这是一个黑客，不应该在生产中使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-10T17:59:41.683

我的解决方案适用于 EclipseLink 2.7.0 和 Java 9，它是 @Evgeniy Dorofeev 答案的修改和详细版本。

在我们`org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor`看到`line 236` 以下代码：

```
URL puRootUrl = computePURootURL(descUrl, descriptorPath); 
```

EclipseLink 使用此代码来计算 persistence.xml 路径的根 url。这非常重要，因为最终路径将通过添加`descriptorPath`到`puRootUrl`.

所以，假设我们有文件`/home/Smith/program/some-folder/persistence.xml`，那么我们有：

```
Thread currentThread = Thread.currentThread();
ClassLoader previousClassLoader = currentThread.getContextClassLoader();
Thread.currentThread().setContextClassLoader(new ClassLoader(previousClassLoader) {
    @Override
    public Enumeration<URL> getResources(String name) throws IOException {
        if (name.equals("some-folder/persistence.xml")) {
            URL url = new File("/home/Smith/program/some-folder/persistence.xml").toURI().toURL();
            return Collections.enumeration(Arrays.asList(url));
        }
        return super.getResources(name);
    }

});
Map<String, String> properties = new HashMap<>();
properties.put("eclipselink.persistencexml", "some-folder/persistence.xml");
try {
    entityManagerFactory = Persistence.createEntityManagerFactory("unit-name", properties);
} catch (Exception ex) {
    logger.error("Error occured creating EMF", ex);
} finally {
    currentThread.setContextClassLoader(previousClassLoader);
} 
```

细节：

1.  请注意，在创建新的类加载器时，我会传递以前的类加载器，否则它不起作用。
2.  我们设置属性`eclipselink.persistencexml`。如果我们不这样做，那么默认的descriptorPath 将等于`META-INF/persistence.xml`并且我们需要保持我们的persistence.xml 处于打开状态`/home/Smith/program/META-INF/persistence.xml`才能被找到。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-04T13:52:52.133

我在程序启动时尝试了这些方法（在 main 函数的第一行）：

*   Write your persistence.xml to the resources/META-INF/persistence.xml of the jar

    I had problem with this way: [Java write .txt file in resource folder](https://stackoverflow.com/questions/36130111/java-write-txt-file-in-resource-folder/36130376)

*   Create META-INF folder in the jar directory and put your persistence.xml into it, then execute this command:

    `jar uf $jarName META-INF/persistence.xml`

    This command will replace META-INF/persistence.xml (your file) in the jar

```
 private fun persistence() {
        val fileName = "META-INF/persistence.xml"
        val jarName: String?
        val done = try {
            jarName = javaClass.protectionDomain.codeSource.location.path
            if (File(fileName).exists() && !jarName.isNullOrBlank()
                    && jarName.endsWith(".jar") && File(jarName).exists()) {
                Command().exec("jar uf $jarName META-INF/persistence.xml", timeoutSec = 30)
                true
            } else false
        } catch (e: Exception) {
            false
        }
        if (done) {
            logger.info { "$fileName exist and will be loaded :)" }
        } else {
            logger.info {
                "$fileName not exist in current folder so it will be read from .jar :(" +
                        " you can run: jar uf jarName.jar META-INF/persistence.xml"
            }
        }
    } 
```

[Running Command Line in Java](https://stackoverflow.com/questions/8496494/running-command-line-in-java)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-30T11:04:35.653

A solution by creating tweaked PersistenceUnitDescriptor.

```
import org.hibernate.jpa.boot.internal.ParsedPersistenceXmlDescriptor;
import org.hibernate.jpa.boot.internal.PersistenceXmlParser;
import org.hibernate.jpa.boot.spi.Bootstrap;
import org.hibernate.jpa.boot.spi.EntityManagerFactoryBuilder;

public class HibernateEntityManagerFactoryBuilder {

    public static final EntityManagerFactory build(URL xmlUrl) {
        final ParsedPersistenceXmlDescriptor xmlDescriptor = PersistenceXmlParser.locateIndividualPersistenceUnit(xmlUrl);
        final HibernatePersistenceUnitDescriptor hibernateDescriptor = new HibernatePersistenceUnitDescriptor(xmlDescriptor);
        final EntityManagerFactoryBuilder builder = Bootstrap.getEntityManagerFactoryBuilder(hibernateDescriptor, Collections.emptyMap(), (ClassLoader) null);
        final EntityManagerFactory factory = builder.build();
        return factory;
    }

    public static final EntityManagerFactory build(URL xmlUrl, final String name) {
        final ParsedPersistenceXmlDescriptor xmlDescriptor = PersistenceXmlParser.locateNamedPersistenceUnit(xmlUrl, name);
        if(xmlDescriptor == null) throw new RuntimeException("Persistence unit with name '"+name+ "' not found.");
        final HibernatePersistenceUnitDescriptor hibernateDescriptor = new HibernatePersistenceUnitDescriptor(xmlDescriptor);
        final EntityManagerFactoryBuilder builder = Bootstrap.getEntityManagerFactoryBuilder(hibernateDescriptor, Collections.emptyMap(), (ClassLoader) null);
        final EntityManagerFactory factory = builder.build();
        return factory;
    }

    public static void main(String[] args) {
        try {
            final EntityManagerFactory factory = build(new File("D:/ini/persistence.xml").toURI().toURL());
        } catch (Exception e) {e.printStackTrace();}
    }
}

public class HibernatePersistenceUnitDescriptor implements PersistenceUnitDescriptor {

    private final PersistenceUnitDescriptor descriptor;

    public HibernatePersistenceUnitDescriptor(PersistenceUnitDescriptor descriptor) {
        this.descriptor = descriptor;
    }

    @Override
    public URL getPersistenceUnitRootUrl() {
        return null;
    }

    @Override
    public String getName() {
        return descriptor.getName();
    }

    @Override
    public String getProviderClassName() {
        return descriptor.getProviderClassName();
    }

    @Override
    public boolean isUseQuotedIdentifiers() {
        return descriptor.isUseQuotedIdentifiers();
    }

    @Override
    public boolean isExcludeUnlistedClasses() {
        return descriptor.isExcludeUnlistedClasses();
    }

    @Override
    public PersistenceUnitTransactionType getTransactionType() {
        return descriptor.getTransactionType();
    }

    @Override
    public ValidationMode getValidationMode() {
        return descriptor.getValidationMode();
    }

    @Override
    public SharedCacheMode getSharedCacheMode() {
        return descriptor.getSharedCacheMode();
    }

    @Override
    public List<String> getManagedClassNames() {
        return descriptor.getManagedClassNames();
    }

    @Override
    public List<String> getMappingFileNames() {
        return descriptor.getMappingFileNames();
    }

    @Override
    public List<URL> getJarFileUrls() {
        return descriptor.getJarFileUrls();
    }

    @Override
    public Object getNonJtaDataSource() {
        return descriptor.getNonJtaDataSource();
    }

    @Override
    public Object getJtaDataSource() {
        return descriptor.getJtaDataSource();
    }

    @Override
    public Properties getProperties() {
        return descriptor.getProperties();
    }

    @Override
    public ClassLoader getClassLoader() {
        return descriptor.getClassLoader();
    }

    @Override
    public ClassLoader getTempClassLoader() {
        return descriptor.getTempClassLoader();
    }

    @Override
    public void pushClassTransformer(EnhancementContext enhancementContext) {
        descriptor.pushClassTransformer(enhancementContext);

    }

} 
```

# php - 将txt文件导入MySQL数据库

> ID：13717325
> 
> 赞同：1
> 
> 时间：2012-12-05T06:08:32.883
> 
> 标签：php, mysql, database, text, phpmyadmin

嗨，我怎样才能将那种文本文件导入 MySQL 数据库提前感谢魁北克市:)

```
"8638671",1,1,"SAL",,,"12.8x16.9 P",,"RC","PFLO",,,
"8638671",2,2,"CUI",,,"10.11x12.6 P",,"RC","LINO",,,
"8638671",3,3,"SDB",,,"3.11x7.3 P",,"RC","LINO",,,
"8638671",4,4,"CCP",,,"8.6x10.2 P",,"RC","LINO",,,
"8638671",5,5,"SDL",,,"5.6x4.4 P",,"RC","LINO",,,
"8640420",1,1,"HAL",,,"5.5x3.3 P",,"RC","CERAM",,,
"8640420",2,2,"SAL",,,"11.1x21.8 P",,"RC","PFLO",,,
"8640420",3,3,"SAM",,,"9x11 P",,"RC","PFLO","porte-patio",,
"8640420",4,4,"CUI",,,"8x7.5 P",,"RC","CERAM",,,
"8640420",5,5,"SDB",,,"5x8 P",,"RC","CERAM",,,
"8640420",6,6,"SDL",,,"5x7.5 P",,"RC","LINO",,,
"8640420",7,7,"CCP",,,"11.5x13 P",,"RC","PFLO",,,
"8640420",8,8,"CAC",,,"9x10 P",,"RC","PFLO",,,
"8640420",9,9,"CAC",,,"7.5x9.10 P",,"RC","PFLO",,,
"8672024",1,1,"CUI",,,"10x8 P",,"RC","AU",,,
"8672024",2,2,"SAM",,,"15x10 P",,"RC","AU",,, 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T06:17:41.900

For importing the file, use any server like wamp,xampp. They have the facility called phpMyAdmin which is the GUI for mysql. You can easily import any SQL file from there. Apart from importing the file, it provides many other featues.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T06:14:02.360

1：用excel打开这个文件，打开文件的时候会问你格式。在那里添加`,`。2：以格式
保存该文件。 3：创建您的数据库架构和 4：通过导入文件`.csv`

`.csv``phpMyAdmin`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:14:11.587

使用这样的命令：

```
LOAD DATA LOCAL INFILE 'folder/myFile.txt' INTO TABLE myTable (field1, field2, field3, field4); 
```

@Nemoden 链接后的更多信息：http: [//dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

# yii - 在 yii 中如何在小部件中呈现视图

> ID：13717326
> 
> 赞同：2
> 
> 时间：2012-12-05T06:08:32.320
> 
> 标签：yii, widget

在 yii 我正在创建项目。

现在我想创建用于显示新密码插入窗口的小部件。重置密码，用户需要正确输入安全问题的答案。在此之后，他将获得两个单选按钮。一个标签为“在此处更改密码”，另一个标签为“发送密码重置链接到邮件”。

因此，当用户单击第一个单选按钮时，该小部件将被渲染，其中将有两个用于输入新密码和重复密码的文本字段，以及提交按钮。那么如何实现这个小部件。

我创建了简单的小部件打招呼：

```
class Sample extends CWidget {
  public function init() {
    Yii::app()->getClientScript()->registerScript('SampleWidget',"alert('Hello');");
  }
} 
```

那么如何向这个小部件添加文本字段和提交按钮。或者如何在这个小部件中呈现任何视图表单。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:55:59.207

使用 $this->render() 方法，该方法将从您的小部件/视图文件夹中呈现部分视图（无布局）。

```
$this->render('my-widget',array()); 
```

[在这里检查](http://www.yiiframework.com/forum/index.php/topic/27311-how-to-renderpartial-in-widget/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:05:03.080

渲染小部件与渲染任何其他视图相同。只需将布局属性设置为不同的值，这样您就不会再次获得标题。public $layout='//layouts/noheader'; 您可以在方法中设置该属性，例如 $this->layout = '//layouts/noheader'。这也可以让你做一些自定义的事情，例如我有一个用于弹出窗口的布局。您还应该将其创建为部分，以便可以在其他地方使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-16T10:52:53.313

不要忘记这个结构：

```
return $this->render('$viewname'); 
```

我忘记写了`return` ，花了很多时间搜索错误；
希望有帮助

# tcp - 似乎无法正确获取 C TCP 服务器-客户端通信

> ID：13717329
> 
> 赞同：0
> 
> 时间：2012-12-04T22:00:31.317
> 
> 标签：tcp, c

我在这里需要一些认真的帮助。我必须制作一个 TCP 服务器客户端。当客户端使用三阶段握手连接到服务器时。之后，当客户端在终端中运行时，用户输入 Linux shell 命令，如`xinput list`、`ls -1`等——这些命令使用标准输出。服务器接受命令并使用`system()`（在`fork()`无限循环中）运行命令，标准输出被重定向到客户端，客户端打印出每一行。

之后服务器发送“\377\n”的完成信号。其中客户端返回命令提示符询问新命令并在输入“退出”时关闭其连接和 exit()。

我知道您必须将 STDOUT_FILENO 和 STDERR_FILENO 都 dup2() 到客户端的文件描述符 {dup2(client_FD, STDOUT_FILENO). 一切正常，除了客户端检索系统（）的标准输出并将其打印出来......我得到的只是一个带有闪烁光标的空白行（客户端在标准输入上等待）。我尝试了各种不同的路线都无济于事...如果有人可以提供帮助，我将不胜感激

TCP 服务器代码

```
#include <sys/types.h>
#include <sys/socket.h>
#include <stdio.h>
#include <string.h>
#include <netinet/in.h>
#include <signal.h>
#include <unistd.h>
#include <stdlib.h>
#include <errno.h>

//Prototype
void handle_client(int connect_fd);

int main()
{
    int server_sockfd, client_sockfd;
    socklen_t server_len, client_len;
    struct sockaddr_in server_address;
    struct sockaddr_in client_address;

    server_sockfd = socket(AF_INET, SOCK_STREAM, 0);

    server_address.sin_family = AF_INET;
    server_address.sin_addr.s_addr = htonl(INADDR_ANY);
    server_address.sin_port = htons(9734);
    server_len = sizeof(server_address);
    bind(server_sockfd, (struct sockaddr *)&server_address, server_len);

/*  Create a connection queue, ignore child exit details and wait for clients.  */

    listen(server_sockfd, 10);

    signal(SIGCHLD, SIG_IGN);

    while(1) {

        printf("server waiting\n");

        client_len = sizeof(client_address);
        client_sockfd = accept(server_sockfd,
            (struct sockaddr *)&client_address, &client_len);

        if(fork() == 0)
            handle_client(client_sockfd);
        else
            close(client_sockfd);
    }
}

void handle_client(int connect_fd) {

    const char* remsh         = "<remsh>\n";
    const char* ready         = "<ready>\n";
    const char* ok            = "<ok>\n";
    const char* command       = "<command>\n";
    const char* complete      = "<\377\n";
    const char* shared_secret = "<shapoopi>\n";

    static char server_msg[201];
    static char client_msg[201];
    static char commands[201];

    int sys_return;

    //memset client_msg, server_msg, commands
    memset(&client_msg, 0, sizeof(client_msg));
    memset(&server_msg, 0, sizeof(client_msg));
    memset(&commands, 0, sizeof(commands));
    //read remsh from client
    read(connect_fd, &client_msg, 200);
    //check remsh validity from client
    if(strcmp(client_msg, remsh) != 0) {
        errno++;
        perror("Error Establishing Handshake");
        close(connect_fd);
        exit(1);
    }
    //memset client_msg
    memset(&client_msg, 0, sizeof(client_msg));
    //write remsh to client
    write(connect_fd, remsh, strlen(remsh));
    //read shared_secret from client
    read(connect_fd, &client_msg, 200);
    //check shared_secret validity from client
    if(strcmp(client_msg, shared_secret) != 0) {
        errno++;
        perror("Invalid Security Passphrase");
        write(connect_fd, "no", 2);
        close(connect_fd);
        exit(1);
    }
    //memset client_msg
    memset(&client_msg, 0, sizeof(client_msg));
    //write ok to client
    write(connect_fd, ok, strlen(ok));
    // dup2  STDOUT_FILENO <= client fd, STDERR_FILENO <= client fd
    dup2(connect_fd, STDOUT_FILENO);
    dup2(connect_fd, STDERR_FILENO);
    //begin while... while read (client_msg) from server and >0
    while(read(connect_fd, &client_msg, 200) > 0) {
        //check command validity from client
        if(strcmp(client_msg, command) != 0) {
            errno++;
            perror("Error, unable to retrieve data");
            close(connect_fd);
            exit(1);
        }
        //memset client_msg
        memset(&client_msg, 0, sizeof(client_msg));
        //write ready to client
        write(connect_fd, ready, strlen(ready));
        //read commands from client
        read(connect_fd, &commands, 200);
        //run commands using system( )
        sys_return = system(commands);
        //check success of system( )
        if(sys_return < 0) {
            perror("Invalid Commands");
            errno++;
        }
        //memset commands
        memset(commands, 0, sizeof(commands));
        //write complete to client
        write(connect_fd, complete, sizeof(complete));

    }
} 
```

TCP 客户端代码

```
#include <sys/types.h>
#include <sys/socket.h>
#include <stdio.h>
#include <string.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <unistd.h>
#include <stdlib.h>
#include <errno.h>
#include "readline.c"

int main(int argc, char *argv[])
{
    int sockfd;
    int len;
    struct sockaddr_in address;
    int result;

    const char* remsh         = "<remsh>\n";
    const char* ready         = "<ready>\n";
    const char* ok            = "<ok>\n";
    const char* command       = "<command>\n";
    const char* complete      = "<\377\n";
    const char* shared_secret = "<shapoopi>\n";

    static char server_msg[201];
    static char client_msg[201];

    memset(&client_msg, 0, sizeof(client_msg));
    memset(&server_msg, 0, sizeof(server_msg));

/*  Create a socket for the client.  */

    sockfd = socket(AF_INET, SOCK_STREAM, 0);

/*  Name the socket, as agreed with the server.  */
    memset(&address, 0, sizeof(address));

    address.sin_family = AF_INET;
    address.sin_addr.s_addr = inet_addr(argv[1]);
    address.sin_port = htons(9734);
    len = sizeof(address);

/*  Now connect our socket to the server's socket.  */

    result = connect(sockfd, (struct sockaddr *)&address, len);

    if(result == -1) {
        perror("ACCESS DENIED");
        exit(1);
    }

    //write remsh to server
    write(sockfd, remsh, strlen(remsh));
    //read remsh from server
    read(sockfd, &server_msg, 200);
    //check remsh validity from server
    if(strcmp(server_msg, remsh) != 0) {
        errno++;
        perror("Error Establishing Initial Handshake");
        close(sockfd);
        exit(1);
    }
    //memset server_msg
    memset(&server_msg, 0, sizeof(server_msg));
    //write shared secret text to server
    write(sockfd, shared_secret, strlen(shared_secret));
    //read ok from server
    read(sockfd, &server_msg, 200);
    //check ok velidity from server
    if(strcmp(server_msg, ok) != 0 ) {
        errno++;
        perror("Incorrect security phrase");
        close(sockfd);
        exit(1);
    }
    //? dup2 STDIN_FILENO = server socket fd?
    //dup2(sockfd, STDIN_FILENO);
    //begin while(1)///////////////////////////////////////
    while(1){
        //memset both msg arrays
        memset(&client_msg, 0, sizeof(client_msg));
        memset(&server_msg, 0, sizeof(server_msg));
        //print Enter Command, scan input, fflush to stdout
        printf("<<Enter Command>> ");
        scanf("%s", client_msg);
        fflush(stdout);
        //check quit input, if true close and exit successfully
        if(strcmp(client_msg, "quit") == 0) {
            printf("Exiting\n");
            close(sockfd);
            exit(EXIT_SUCCESS);
        }
        //write command to server
        write(sockfd, command, strlen(command));
        //read ready from server
        read(sockfd, &server_msg, 200);
        //check ready validity from server
        if(strcmp(server_msg, ready) != 0) {
            errno++;
            perror("Failed Server Communications");
            close(sockfd);
            exit(1);
        }
        //memset server_msg
        memset(&server_msg, 0, sizeof(server_msg));
        //begin looping and retrieving from stdin,
        //break loop at EOF or complete
        while((read(sockfd, server_msg, 200) != 0) && (strcmp(server_msg, complete) != 0)) {
        //while((fgets(server_msg, 4096, stdin) != EOF) || (strcmp(server_msg, complete) == 0)) {
            printf("%s", server_msg);
            memset(&server_msg, 0, sizeof(server_msg));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:53:07.680

由 产生的子进程的输出`system()`未连接到调用父进程。试试`popen()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:52:43.703

在服务器中，`handle_client()`小心调用会退出错误，`close(connect_fd);`但普通退出不会。这意味着服务器不会关闭与客户端的连接，因此客户端会等待服务器断开连接。这就是您看到代码挂起的原因。

# javascript - iphone标签栏上的自动化问题

> ID：13717330
> 
> 赞同：1
> 
> 时间：2012-12-05T06:09:08.420
> 
> 标签：javascript, ios6, instruments, iphone-5, ios-ui-automation

我正在使用仪器工具上的自动化工具检查我的应用程序，当我通过javascript单击第二个选项卡时，我的应用程序有两个选项卡，下面的代码

```
var target = UIATarget.localTarget();

var app = target.frontMostApp();
var window = app.mainWindow();
var tabbar = window.tabBar().buttons()["Product"].tap();
UIALogger.logStart("Logging element tree …");
UIALogger.logPass(); 
```

它工作得很好。在产品选项卡中有一个 UITableviewcontroller 现在我正在编写用于单击 tableview 单元格的 javascript，如`

```
tabar.tableviews()[0].cells()[0].tab; 
```

不工作。我该如何处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:33:47.663

我不认为你想从标签栏开始找到你的表格视图，但我不完全确定我理解你的问题。我也在处理一些 UIAutomation 脚本，所以这里有几个片段——希望其中一个是相关的。

要点击 UIToolBarController 中的按钮，我使用以下命令：

```
var app = target.frontMostApp();
app.mainWindow().tabBar().buttons()["Saved"].tap(); // The name of the button is "Saved". 
```

您也可以使用索引，例如第一个标签栏按钮的 [0]。在带有 UITableView 的屏幕上，我使用它来点击其中的一个单元格：

```
app.mainWindow().tableViews()[0].cells()["Name"].tap(); // The cell is named "Name". 
```

同样，您也可以使用索引。请注意，我不是从标签栏开始，而是从 app 变量开始。

如果某些事情没有按照您认为的方式工作，请始终注销树并查看它包含的内容。这总是帮助我：

```
app.mainWindow().tableViews()[0].logElementTree(); 
```

[Apple 文档](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/UsingtheAutomationInstrument/UsingtheAutomationInstrument.html)对此有更多示例。

# google-drive-api - 如何将 Google 的数据保存到我们的服务器？

> ID：13717337
> 
> 赞同：2
> 
> 时间：2012-12-05T06:09:44.133
> 
> 标签：google-drive-api

我已在我的 WordPress 网站上通过 Google API 连接到 Google drive。谷歌驱动器允许我下载权限，但我想将谷歌驱动器文件保存在我的服务器上。

那么有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:01:31.680

对的，这是可能的。如果您可以下载该文件，您可以将其保存在您喜欢的任何地方，包括您的服务器。

# mysql - 比较同一组字符的加密值

> ID：13717339
> 
> 赞同：0
> 
> 时间：2012-12-05T06:10:02.493
> 
> 标签：mysql, linux, shell

如果我对一个字符串进行两次加密并比较它们，它们会相同吗？我在 MySQL 中这样做是为了将我的普通密码与加密并保存的密码进行比较

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:35:12.487

如果您对特定输入字符串使用*相同的标准加密算法*和*相同的加密密钥，您将始终获得相同的加密输出。*如果您获得不同的输出，那将没有多大意义，因为解密将是一项几乎不可能完成的任务。

# java - 找到后如何从 Java Hashmap 返回数据

> ID：13717340
> 
> 赞同：0
> 
> 时间：2012-12-05T06:10:03.040
> 
> 标签：java, hashmap

这是代码：

```
class thingsToRent
{
    private static HashMap thingsToRent = new HashMap();
    static
    {
        thingsToRent.put("V-1", new String( "Zumba workout video" ) );
        thingsToRent.put("V-2", new String( "Pumping Iron video" ) );    
    }

    public static String get( String serialEntered )
    { 
```

这是我需要归还租用绳索的地方，例如尊巴锻炼或抽铁，

我说什么我有？

```
 return ?; 
```

我试过 return serialEntered 但这只是给了我我的 V-1 或 V-2

使用扫描仪输入控制台

```
 }
}

class Video extends Thing
{
    public Video( String serialEntered )
    {
        super( serialEntered );
    }

    public void getDescription( String serialEntered )
    {
        String theRentalFound = (String)thingsToRent.get( serialEntered );
        if ( theRentalFound == null )
    {
        throw new IllegalArgumentException("Serial Number not found (" + serialEntered + ")");
        }
        else
        {
            System.out.println( "Video: " + theRentalFound );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:14:51.367

```
return thingsToRent.get(serialEntered); 
```

将达到目的，但您不需要它，因为您已经在代码中实现了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:38:03.727

首先总是对接口进行编码。更改`private static HashMap thingsToRent = new HashMap();`为`private static Map thingsToRent = new HashMap();`

您的命名约定也是一团糟，将类名更改为类似的名称，`RentalItems`并将您的 get 方法更改为`getRentableItem`在该方法中，您需要使用提供的键访问地图：

```
public static String getRentableItem( String serialEntered )
{
    return thingsToRent.get(serialEntered);
} 
```

请注意，如果该项目不存在，您将需要添加代码来处理发生的情况 - 我将把它留给您决定要做什么。

# iphone - iCarousel 在加载视图时选择第一个索引

> ID：13717342
> 
> 赞同：2
> 
> 时间：2012-12-05T06:10:13.383
> 
> 标签：iphone, ios, icarousel

在我的项目中，我有`iCarousel`一个观点。一切对我来说都很好。但我的问题是，当视图被加载时，我想将第一个索引对象保留在视图的中心。我在轮播中总共显示了三个图像。现在第一个图像在右上角加载。我想保留它加载时处于中心位置。我该怎么做。？请分享你的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T06:15:54.233

你可以`iCarouselOptionWrap`用来做这个任务..只需实现这个`delegate`

```
- (CGFloat)carousel:(iCarousel *)_carousel valueForOption:(iCarouselOption)option withDefault:(CGFloat)value
{
    //customize carousel display
    switch (option)
    {
        case iCarouselOptionWrap:
        {
            //normally you would hard-code this to YES or NO
            return YES;
        }
        case iCarouselOptionSpacing:
        {
            //add a bit of spacing between the item views
            return value * 1.05f;
        }
        case iCarouselOptionFadeMax:
        {
            if (carouselForUser.type == iCarouselTypeCustom)
            {
                //set opacity based on distance from camera
                return 0.0f;
            }
            return value;
        }
        default:
        {
            return value;
        }
    }
} 
```

# git - Netbeans 不能 Git

> ID：13717349
> 
> 赞同：3
> 
> 时间：2012-12-05T06:10:42.510
> 
> 标签：git, netbeans, version-control, ide

我正在尝试使用带有 Netbeans 的 Git 对文件进行一些更改。当我右键单击文件并提交它时，在我输入我的评论并按下提交按钮后，会发生这种情况：

```
org.eclipse.jgit.errors.MissingObjectException: Missing tree d9bc543071955676c211b28ae1699396e811dfac 
```

但是当我使用命令行时，我可以很好地提交文件。

这棵树怎么不见了，我该如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:40:27.637

在进行提交时，Eclipse 可能会执行比需要更多的步骤，但即便如此，如果有一个需要但丢失的对象，那就不好了。

确保`.git/objects/d9/bc543071955676c211b28ae1699396e811dfac`存在并且 Eclipse 可以读取。如果它不存在，请尝试在同一项目的其他人的 git 文件夹中（或在主裸存储库中）找到相同的文件，并将其复制到您的 git 目录中，以便您拥有它。

# c# - 非静态方法需要一个目标

> ID：13717355
> 
> 赞同：269
> 
> 时间：2012-12-05T06:11:08.140
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-5

我有一个控制器操作，可以在本地和生产环境中的 Firefox 和本地 IE 上正常工作，但在生产环境中不能正常工作。这是我的控制器操作：

```
public ActionResult MNPurchase()
{
    CalculationViewModel calculationViewModel = (CalculationViewModel)TempData["calculationViewModel"];

    decimal OP = landTitleUnitOfWork.Sales.Find()
        .Where(x => x.Min >= calculationViewModel.SalesPrice)
        .FirstOrDefault()
        .OP;

    decimal MP = landTitleUnitOfWork.Sales.Find()
        .Where(x => x.Min >= calculationViewModel.MortgageAmount)
        .FirstOrDefault()
        .MP;

    calculationViewModel.LoanAmount = (OP + 100) - MP;
    calculationViewModel.LendersTitleInsurance = (calculationViewModel.LoanAmount + 850);

    return View(calculationViewModel);
} 
```

这是我在 IE 中得到的堆栈跟踪：

> 错误。处理您的请求时发生错误。System.Reflection.TargetException：非静态方法需要一个目标。在 System.Reflection.RuntimeMethodInfo.CheckConsistency(Object target) 在 System.Reflection.RuntimeMethodInfo.InvokeArgumentsCheck(Object obj, BindingFlags invokeAttr, Binder binder, Object[] 参数, CultureInfo 文化) 在 System.Reflection.RuntimeMethodInfo.Invoke(Object obj, System.Reflection.RuntimePropertyInfo.GetValue(Object obj, Object[] index) 在 System.Data.Objects.ELinq.QueryParameterExpression.TryGetFieldOrPropertyValue(MemberExpression me, Object instance) 的 BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfoculture) System.Data.Objects.ELinq.QueryParameterExpression.TryEvaluatePath（表达式表达式，`1 forMergeOption) at System.Data.Objects.ObjectQuery`1.GetResults(Nullable `1 forMergeOption) at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable.GetEnumerator() at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable `1 source) at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source) at LandTitle.Controllers.HomeController.MNRefi() at lambda_method(Closure, ControllerBase , Object[] ) 在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 个参数）在 Castle.Proxies.Invocations.ControllerActionInvoker_InvokeActionMethod.InvokeMethodOnTarget() 在 Castle.DynamicProxy.AbstractInvocation.Proceed() 在 Glimpse.Mvc3.Interceptor.InvokeActionMethodInterceptor.Intercept(IInvocation 调用) 在 Castle.DynamicProxy.AbstractInvocation.Proceed() 在Castle.Proxies.AsyncControllerActionInvokerProxy.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary``2 参数) 在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.b__33() 在 System.Web.Mvc.Async .AsyncControllerActionInvoker.<>c__DisplayClass4f.b__49() 在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.b__36(IAsyncResult asyncResult) 在 System.Web.Mvc.Async。AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.b__20() 在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.b__22(IAsyncResult asyncResult)

* * *

## 回答 #1

> 赞同：552
> 
> 时间：2012-12-05T06:48:32.923

I think this confusing exception occurs when you use a variable in a lambda which is a null-reference at run-time. In your case, I would check if your variable calculationViewModel is a null-reference.

Something like:

```
public ActionResult MNPurchase()
{
    CalculationViewModel calculationViewModel = (CalculationViewModel)TempData["calculationViewModel"];

    if (calculationViewModel != null)
    {
        decimal OP = landTitleUnitOfWork.Sales.Find()
            .Where(x => x.Min >= calculationViewModel.SalesPrice)
            .FirstOrDefault()
            .OP;

        decimal MP = landTitleUnitOfWork.Sales.Find()
            .Where(x => x.Min >= calculationViewModel.MortgageAmount)
            .FirstOrDefault()
            .MP;

        calculationViewModel.LoanAmount = (OP + 100) - MP;
        calculationViewModel.LendersTitleInsurance = (calculationViewModel.LoanAmount + 850);

        return View(calculationViewModel);
    }
    else
    {
        // Do something else...
    }
} 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-10-11T04:26:46.993

Normally it happens when the target is null. So better check the invoke target first then do the linq query.

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-02-21T22:48:30.717

I've found this issue to be prevalent in Entity Framework when we instantiate an Entity manually rather than through DBContext which will resolve all the Navigation Properties. If there are Foreign Key references (Navigation Properties) between tables and you use those references in your lambda (e.g. ProductDetail.Products.ID) then that "Products" context remains null if you manually created the Entity.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-01T12:12:58.293

All the answers are pointing to a Lambda expression with an NRE (Null Reference Exception). I have found that it also occurs when using Linq to Entities. I thought it would be helpful to point out that this exception is not limited to just an NRE inside a Lambda expression.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-07-16T17:36:27.057

For anyone landing here encountering the error `Non-static method requires a target` while running MS Test `[DynamicData] [DataTestMethod]` unit tests, the error is likely caused by not making your static data test scenario collection `static`, i.e. ensure you have:

```
public **static** IEnumerable<object[]> MyFakeData => 
        new[]
        {
            new object[] { "Foo" },
            new object[] { "Bar" }
        };

[DynamicData(nameof(MyFakeData))]
[DataTestMethod]
public void DoMyTests(string someData) {...} 
```

It's super annoying to debug, as there's no useful stacktrace

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-08T15:27:57.030

I face this error on testing WebAPI in Postman tool.

> After building the code, If we remove any line (*For Example: In my case when I remove one Commented line this error was occur...*) in debugging mode then the "**Non-static method requires a target**" error will occur.
> 
> Again, I tried to send the same request. This time code working properly. And I get the response properly in Postman.

I hope it will use to someone...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-19T05:28:16.950

(This is a simple example about the error)

This error occurred when the Linq query get the Data from DB context while the DB Context matching ID is null. Suppose: We getting the Alumni Information from DB on the basis of Student record (reference table).

```
var getAlumniData = DBContext.Alumni.Where(a => a.AlumniID == loginHistory.AlumniID)
                      .Select(a => new Alumni
                       {
                          Enrollment = a.Student.Enrollment,
                          RegistrationNo = a.RegistrationNo,
                          Name = a.Name,
                       }).SingleOrDefault(); 
```

We get the matching ID from User Login History. If the user login history is null, then the loginHistory. AlumniID is null. So it error asked that the required target is needed.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-02T13:27:49.453

This could happen if you are using reflection to `GetProperty` of an object which is null.

# c - 解释这个函数的作用

> ID：13717359
> 
> 赞同：1
> 
> 时间：2012-12-05T06:11:24.707
> 
> 标签：c

任何人都可以在初级 C 程序员可以理解的水平上解释这个函数的作用吗？

```
unsigned getunsigned(unsigned char *bufp, int len) {
    unsigned value = 0;
    int shift = 0;
    while (len--) {
        value |= *bufp++ << shift;
        shift += 8;
    }
    return value;
} 
```

我想最让我头疼的一句话是：

```
value |= *bufp++ << shift; 
```

另外，任何人都可以提供一种方法来重写它，以便没有经验的 C 程序员更清楚地理解吗？

我在为一项作业进行研究时在网上找到了这段代码，除非我完全理解它在做什么以及它是如何做的，否则我宁愿不使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T06:14:00.363

这是从 指向的缓冲区中获取连续字节`bufp`，并将它们放入`value`.

`value |= *bufp++ << shift;`取值 at `bufp`（即，`char`地址`bufp`指向）并将其与 8 位进行或运算`value`。然后它递增`bufp`指向缓冲区中的下一个字节。之后，它将 8 添加到`shift`- 这就是确定新字节的*哪*8 位被 ORed 的原因。`value`即，`shift`从 0 开始，因此在第一次迭代中，第一个字节替换(替换，因为它们从 0 开始)`bufp`的底部 8 位。`value`在下一个迭代器中， 的下一个字节`bufp`被左移 8 个字节，以替换 的下一个 8 位`value`，依此类推`len`。

旁白：如果`len`大于`sizeof(unsigned)`，这将超过 的结尾`value`，导致未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:13:49.480

```
value |= *bufp++ << shift; 
```

相当于

```
value = value | (*bufp << shift);
bufp++; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T06:14:49.733

```
value |= *bufp++ << shift; 
```

相当于

```
value =  value | (*bufp << shift);
bufp++; 
```

bufp 中的第一个值被移位到 shift 中的值，结果是 ORed `|`，`value`然后`bufp`递增。

最后的 shift 值是通过`shift +=8`手段改变的`shift = shift + 8`

所以它占用了`bufp`因为 while 循环中的所有字节，直到`len`变成`0`。

# image - 从文件系统谷歌应用引擎加载图像

> ID：13717361
> 
> 赞同：1
> 
> 时间：2012-12-05T06:11:43.693
> 
> 标签：image, google-app-engine, python-2.7, python-imaging-library

是否可以使用来自 python 脚本的 google app engine python 图像库从本地文件系统加载图像文件？还是必须从数据存储中加载图像？我可以成功加载一个文本文件并显示它的内容。

我正在使用带有 Python 2.7 的谷歌应用引擎并使用 PIL 成像库。我在 Mac OS X 10.8.2 上使用 PyCharm 和 Google App Engine Launcher。我正在使用从源代码构建的 PIL 1.1.7 版本。

我想在我的 python 脚本的响应输出中返回它们之前对图像（或图像）执行一些操作。

当我使用该`Image.image( filename=<filename> )`函数时，我得到的错误通知我文件名必须以“/gs”开头。`__init()__`如果我向 Image 构造函数提供文件名，则进入Image 对象的方法向我展示了用于`blobstore.create_gs_key()`创建 blobkey 的方法。

因为我有一组想要操作的固定图像，所以我希望避免手动将它们上传到数据存储中进行检索。

我的微不足道的应用程序处理程序目前看起来像这样；

```
class ChallengeImageHandler( webapp2.RequestHandler ):
    def get(self):
        olifant = images.Image( filename='gs/challenge/C017.png' )
        logging.debug( "olifant.width=%d" % olifant.width );
        logging.debug( "olifant.height=%d" % olifant.height );
        self.response.headers[ 'Content-Type' ] = 'image/png'
        self.response.out.write( olifant )
        return 
```

我的 app.yaml 看起来像这样；

```
application: hello_world
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:

- url: /stylesheets
  static_dir: stylesheets

- url: /images
  static_dir: images

- url: /.*
  script: main.application

- url: /software_development.html
  script: main.application

libraries:
- name: jinja2
  version: latest
- name: PIL
  version: latest 
```

我知道我可以通过静态提供图像来获得相同的结果，但是一旦我成功地加载了图像，我希望在提供图像之前对其进行操作。我故意将我希望从我的应用程序加载的图像放置在一个单独的目录中，而不是`/images`. 它们位于名为 的子目录中`gs/challenge`。

非常感谢任何帮助、建议或解决方案。也许我正在以完全错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:24:33.057

如果您想从本地文件系统加载文件，只需将它们与您的应用程序一起上传即可。

只要您意识到它们永远不会更改，并且除了部署应用程序时您无法更改它们，并且部署的应用程序可以占用的空间量有限制，您应该没问题。

例如，我将一个 .csv 文件与我的应用程序一起上传，当它第一次启动时，它会读取它并在数据存储中创建与其内容相关的记录。然后我再也不使用那个文件了。

您放置图像的位置并不真正相关，因为您在将它们提供给用户之前对其进行操作，因此它们不是“静态内容”，并且不会直接提供给用户（因为 .css 文件将用于例子）。只要您的应用程序可以加载它们，那就是正确的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-07T02:52:43.057

您部分错误/正确，我终于能够以这种方式使用 PIL 从内存中打开文件，一些导入可能是不必要的，但 w/e：

```
from PIL import Image, ImageDraw, ImageFont
from io import BytesIO

rawdata = open(fullpathtoimagefile).read()
stream = BytesIO(rawdata)
im = Image.open(stream) 
```

# backbone.js - Backbone.Marionette - 将变量传递给复合视图标签

> ID：13717366
> 
> 赞同：0
> 
> 时间：2012-12-05T06:12:07.100
> 
> 标签：backbone.js, marionette

**更新（相关详细信息）：此复合视图位于复合视图的集合中。**

如何使用 Backbone.Marionette 复合视图构造以下 HTML？

```
 <optgroup label="Group 1">
        <option>Item 1</option>
        <option>Item 2</option>
        <option>Item 3</option>
    </optgroup>
    <optgroup label="Group 2">
        <option>Item 4</option>
        <option>Item 5</option>
        <option>Item 6</option>
    </optgroup> 
```

由于我想避免使用`<div>`包装器，因此我必须指定`<optgroup>`为 tagName。

```
view = Backbone.Marionette.CompositeView.extend({
    collection: some_collection,
    itemView: some_itemview,
    template: '#some_template', <!-- What goes inside the template? -->
    itemViewContainer: 'optgroup',
    tagName:'optgroup', <!--specify to avoid the default div-->

    <!-- What should I specify in order to pass label="Group1" to the optgroup tag-->
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T14:03:25.853

不要为此使用 CompositeView。您不需要包装器模板，因为在这种情况下包装器只是`<optgroup>`标签。

请改用 CollectionView，它不会呈现包装模板。

对于组#，使用 onRender 方法

```
 view = Backbone.Marionette.CollectionView.extend({
    collection: some_collection,
    itemView: some_itemview,
    tagName:'optgroup',

    onRender: function(){
      this.$el.attr("label", "Group 1");
    }

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T07:41:23.820

您可以在例如 initialize 或 onRender 函数中设置视图元素属性，例如：

```
view = Backbone.Marionette.CompositeView.extend({
    ...

    initialize: function() {
        this.$el.attr('label', 'foobar');
    }
}); 
```

或将初始化替换为：

```
 onRender: function() {
        this.$el.attr('label', 'foobar');
    } 
```

或者

如果您有一个现有元素，例如：

```
<optgroup id="myGroup" label="Group 1">
</optgroup> 
```

您可以这样设置视图的元素：

```
view = Backbone.Marionette.CompositeView.extend({
    el: $('#myGroup'),

    ...
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T17:31:31.227

Derick 和 Lasse 的回答结合起来让我找到了解决方案。这`onRender`就是我所缺少的。以下是供未来读者阅读的摘要。

嵌套集合视图的结构：

```
Collection of Collections --> Collection --> Item
                          --> Collection --> Item
                          --> ... etc. 
```

**CollectionOfCollections** =

```
Backbone.Marionette.CollectionView.extend({
    collection: myCollectionOfCollections,
    itemView: Collection <!--this refers to the next Collection view below-->
}); 
```

**收藏**=

```
Backbone.Marionette.CollectionView.extend({
    collection: myCollection,
    itemView: ItemView, <!-- again... the next view below -->
    tagName: 'optgroup', 
```

[使用 Backbone.Marionette 嵌套集合](https://stackoverflow.com/questions/12163118/nested-collections-with-backbone-marionette)

```
 <!-- IF YOU ARE PASSING A SIMPLE ARRAY, 
    IT MUST BE CONVERTED TO A REAL COLLECTION FIRST -->

    initialize: function(){
       var xyz = this.model.get('abc');
       this.collection = new Backbone.Collection.extend({});
    });

    onRender: function(){

       <!-- Here's where you insert the attribute into the tag -->

       this.$el.attr('label', this.model.get('name'));
     }
   });
}); 
```

**项目视图 =**

```
ModalDropdownEntryView = TourView.extend({
    model: myModel,
    template: '#myTemplate',
    tagName: 'option',
}); 
```

# ruby-on-rails - 在 Rails 3 中向移动应用程序推送通知

> ID：13717373
> 
> 赞同：3
> 
> 时间：2012-12-05T06:12:38.807
> 
> 标签：ruby-on-rails, ruby, push-notification, google-cloud-messaging

我正在开发一个 Ruby 1.9.3 和 Rails 3 的项目，我正在寻找一个 gem 来将推送通知发送到我的 iOS 应用程序和我的 Android 应用程序。
我发现适用于 android 的[speedy_c2dm](https://github.com/sghael/speedy_c2dm)非常有用。但是，我担心[迁移到 GCM](http://developer.android.com/google/gcm/c2dm.html)中提到：

> Android 云到设备消息传递 (C2DM) 已弃用。强烈建议 C2DM 开发人员迁移到 Google Cloud Messaging (GCM)

speedy_c2dm支持[GCM](http://developer.android.com/google/gcm/index.html)[吗](https://github.com/sghael/speedy_c2dm)？还有其他支持新 GCM 的 gem 吗？另外，我想知道[speedy_c2dm](https://github.com/sghael/speedy_c2dm)和[c2dm](https://github.com/amro/c2dm)有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:17:59.967

speedy_c2dm 和 c2dm 只是两个使用 C2DM 发送推送通知的库，它们是由不同的人编写的，它们都可以工作并且没有太大区别，理论上 speedy_c2dm 应该更快，但目前没有基准。

您应该实施 GCM，而不是实施 C2DM :)

有很多 gcm gem，最受欢迎的是 gcm 但最后一次提交是 5 个月前：

[厘米](https://github.com/spacialdb/gcm)

[gcm_on_rails](https://github.com/dondeng/gcm_on_rails)

[推送gcm](https://rubygems.org/gems/push-gcm)

[simple_gcm](https://github.com/leobessa/simple_gcm)

[简单的gcm](http://github.com/snepo/simple-gcm)

[高厘米](http://github.com/hifrank/higcm)

[快速gcm](https://github.com/sghael/speedy_gcm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T23:27:12.633

我刚刚发布了一个新版本的 rapns，它同时支持 APNs 和 GCM：[https ://github.com/ileitch/rapns](https://github.com/ileitch/rapns)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T12:46:14.970

谷歌“云到设备消息”（c2dm）现在被称为“谷歌云消息”（GCM）。旧的[c2dm_on_rails](https://github.com/pimeys/c2dm_on_rails) gem 已替换为[gcm_on_rails](https://github.com/dondeng/gcm_on_rails) gem，[speedy_c2dm](https://github.com/sghael/speedy_c2dm) gem 已替换为[speedy_gcm](https://github.com/sghael/speedy_gcm) gem。[gcm_on_rails](https://github.com/dondeng/gcm_on_rails)类似于 Apple 推送通知中流行的[apn_on_rails](https://github.com/PRX/apn_on_rails)。Speedyc2dm 和 gcm_on_rails 都是用于访问[GCM API](http://developer.android.com/google/gcm/index.html)的包装器。

# android - 如何放大 Highcharts Android

> ID：13717374
> 
> 赞同：1
> 
> 时间：2012-12-05T06:12:45.393
> 
> 标签：android, highcharts

我正在为 HTC 渴望 S 开发一个 android 应用程序。我正在使用 highcharts 来绘制图表。我无法缩放曲线。我使用了 zoomType : 'x'，但它不起作用。谁能告诉我可能是什么问题。另外，如果有其他缩放方式。下面是我的代码：

```
 $(function callJS() {  

var carter = dataLoader.getfhr();
var myArray = carter.split(" ");
 for(var i=0; i<myArray.length; i++)

    { myArray[i] = parseFloat(myArray[i]); }   

var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
           renderTo: 'container',
            type: 'spline',
           zoomType: 'x',
            spacingRight: 20,
             backgroundColor : '#E8E8E8'
        },
        title: {
            text: 'Fetal Heart Rate'
        },
        subtitle: {
           // text: 'October 6th and 7th 2009 at two locations in Vik i Sogn, Norway'
        },
        xAxis: {
        gridLineWidth: 1,
        lineColor: '#CC3333',
         tickColor: '#CC3333',               
        //minorTickInterval: 1,
       // minorTickLength: 0
        },
        yAxis: {
            title: {
                text: 'FHR values'
            },
            min: 1500,
            max: 3500,
            minorTickInterval: 10,
            lineColor: '#CC3333',
            lineWidth: 1,
             //tickWidth: 1,
             tickColor: '#CC3333',
            //minorGridLineWidth: 'auto',
            //gridLineColor : '#CC3333',           
            //minorTickInterval: 10,    
            //minorTickLength : 'auto',     
           // gridLineWidth: 2,
            alternateGridColor: null,
            plotBands: [{ // mark the weekend
            color: 'pink',
            //from: 120,
           // to:160
        }]
        }, 
        tooltip: {
            formatter: function() {
                     return '<b>' + this.series.name + '</b><br/>' + this.x + ': ' + this.y;
            }
        },
        plotOptions: {
            spline: {
                lineWidth: 4,
                states: {
                    hover: {
                        lineWidth: 5
                    }
                },
                marker: {
                    enabled: false,
                    states: {
                        hover: {
                            enabled: true,
                            symbol: 'circle',
                            radius: 5,
                            lineWidth: 1
                        }
                    }
                },

            }
        },
        series: [{
            name: 'FHR value',
            data: myArray,  
            color: '#383838',
            //dataLabels: {
             //   align: 'left',
              //  enabled: true
          //  } 
        }]

    });
});

}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:05:25.547

我可以确认缩放功能在 Android 4.2.1 上运行良好，Android 2.x 不支持 HighCharts 提供的许多功能，因为它使用不同的渲染器，因为 Android 2.x 不支持 SVG。

> ## 安卓 2.x
> 
> Android 2.x 没有内置对 SVG 的支持，因此我们基于该系统的 canvg 库创建了一个单独的渲染器。此解决方案有一些限制：
> 
> 1.  不推荐在 Android 2.x 上使用 Highstock，因为它严重依赖缩放和鼠标交互
> 2.  共享工具提示始终处于启用状态。
> 3.  在第一次渲染期间，canvg 渲染器 + rgbcolor.js + canvg.js（连接到一个文件）将从 code.highcharts.com 下载。这可以通过 global.canvasToolsURL 选项进行配置。
> 4.  图表和系列动画已关闭。
> 5.  未启用从图例中显示/隐藏系列。系列和点触摸事件未启用。
> 6.  **未启用缩放**。
> 7.  不支持直接使用 Renderer API 向图表添加形状。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:00:13.733

请查看[http://www.highcharts.com/documentation/compatibility](http://www.highcharts.com/documentation/compatibility)，可能 HTC 有旧的 Android，因为在 4.0 版本中缩放工作正常。

# javascript - 通过JS代码填充自动完成输入

> ID：13717376
> 
> 赞同：0
> 
> 时间：2012-12-05T06:12:55.043
> 
> 标签：javascript, jquery, html, autocomplete

我有一个自动完成输入，效果很好..

当我通过JS代码填充内容时，它不会自动完成，我需要他这样做。

我试图将焦点放在输入上，然后运行 ​​keypress 事件，它不起作用......我该怎么办？

代码（填写输入）：

```
function FillInput() {
        document.getElementById("MyInput").value ='xxx';
        $('.SearchCities').keypress();
        $('.SearchCities').focus();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:16:20.863

尝试触发`keyup`事件，因为这是自动完成侦听的内容。可能没有任何处理程序绑定到`keypress`.

# java - 在java中存储字符串值

> ID：13717378
> 
> 赞同：1
> 
> 时间：2012-12-05T06:13:04.537
> 
> 标签：java, android, string, sharedpreferences

我正在开发一个简单的 android 应用程序。其中我想存储一个字符串值，如“1_2_5_7_12_”。之后想要拆分这个字符串并且必须获取数字。如何存储这个字符串。Sharedpreference 或任何其他帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T06:16:36.543

```
 String s = "1_2_5_7_12_";

  SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
  Editor edit = preferences.edit();
  edit.putString("pref_str", s); 
  edit.commit();//storing
  // Retrieve
  String pref_numstr =  preferences.getString("pref_str", "n/a");
  ar = pref_numstr.split("_");
  System.out.println(ar.length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:16:13.290

您可以拆分字符串：

```
String myString = "1_2_5_7_12_";
String numbers[] = myString.split("_");
int num[] = new int[numbers.length];
int i=0;
for(String s : numbers){
   num[i] = Integer.parseInt(s);
   i++;
} 
```

所以现在数组`num`将在该字符串中包含整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T06:27:19.147

尝试使用[Pattern.compile](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)将字符串拆分为数组：

```
 String str = "1_2_5_7_12_";
   String[] strarray=Pattern.compile("-").split(str); 
```

对于从 SharedPreferences 存储或检索值，请参阅

[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T06:16:46.497

保存

```
SharedPreference.edit().putString(value, default).commit() 
```

获得价值

```
SharedPreference.getString(value, default) 
```

拆分字符串

```
String.split("_") to split 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T06:17:08.040

最终它将成为一个字符串，因此我认为将其存储在 Sharedpreference 中没有任何问题。你可以像@Shreya Shah 的回复那样拆分它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T06:18:21.397

你可以这样做..

```
 final SharedPreferences pref1 = getSharedPreferences("My_App", MODE_PRIVATE);
            SharedPreferences.Editor editor = pref1.edit();

            editor.putString("str", "yourString");
            editor.commit(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-05T06:19:42.370

像这样保存：

```
SharedPreferences prefs = getApplicationContext().getSharedPreferences("prefs", Context.MODE_PRIVATE);
Editor prefsEditor = prefs .edit();
prefsEditor.putString("myString", "1_2_5_7_12");
prefsEditor.commit(); 
```

并像这样检索：

```
String str= prefs.getString("myString", ""); 
```

之后，您可以简单地拆分字符串

```
String[] strArr = str.split("_"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-05T06:20:26.343

使用此代码....

```
public static  ArrayList<String> strDRIVERS = new ArrayList<String>();
String DNAME="1_2_5_7_12";
if(DNAMES.length()>0){
  String[] arr_drivers = DNAMES.split(",");
  for(String sx : arr_drivers){
    strDRIVERS.add(sx);
 }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-05T06:20:47.897

要保存字符串，您可以使用 SharedPreferences 或 string.xml 文件。用于拆分字符串

```
String text = "1_2_5_7_12_";
String[] splits = text.split("_"); 
```

# html - 如何使用 angularjs 设置进度标签的值和最大属性

> ID：13717383
> 
> 赞同：2
> 
> 时间：2012-12-05T06:13:21.740
> 
> 标签：html, angularjs

如何使用 angularjs 设置进度标签的值和最大属性

```
<progress value="500" max="1000"> 
```

我试过使用

```
<progress value="{{jdata.min}}" max="{{jdata.max}}"></progress> 
```

jdata 持有 json 数据

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T06:42:25.517

这个 HTML

```
<div ng-app='app'>
    <div ng-controller='ctrl'>
       <progress value="{{jdata.min}}" max="{{jdata.max}}">
   </div>
</div>​ 
```

而你的控制器中的这些数据

```
var App = angular.module('app', []);
App.controller('ctrl', function($scope){
    $scope.jdata = {
        min: 500,
        max: 1000
    };
}); 
```

​</p>

检查这个jsfiddle：http: [//jsfiddle.net/jaimem/hKvNc/5/](http://jsfiddle.net/jaimem/hKvNc/5/)

# matlab - MATLAB：在 for 循环中使用 ode45 使用动态变量进行粒子运动和交互

> ID：13717385
> 
> 赞同：3
> 
> 时间：2012-12-05T06:13:34.667
> 
> 标签：matlab, events, particles

嗨，我正在编写一个小程序，它可以使用 x 平面中的 for 循环创建许多不同的粒子，这些粒子在 y 方向上以各种力向上移动。粒子通过排斥力相互作用，因此在 ode45 计算中需要每个粒子相对于彼此的位置。我已经多次查看代码，但我不确定问题出在哪里，因为解决方案显示为“NaN”。时间间隔是为了让粒子的运动及时被打散，从而在ode45计算中更新所有粒子的位置。我用事件来打断时间。如果您需要更多信息，因为代码不是很清楚，请询问！我没有在代码中显示常量：

```
time_interval = 1000; %Time in microseconds
%The number of time intervals the particle movement is divided by
number_of_intervals = 10000/time_interval;

tstart=0;
tstop= time_interval*1e-6;

num_of_particles = 3;

w0{1} = [0;0;0;0];
sols{1} = transpose(w0{1});
x_adj_stable(1) = 0;
y_adj_stable(1) = 0;

break_vect(num_of_particles) = 0;
times{1} = 0;

%Initiate particle characteristics
for particle_num = 2:num_of_particles
w0{particle_num} = [0;0;w0{particle_num - 1}(3) + 4*1e-6;0];
x_adj_stable(particle_num) = w0{particle_num}(3);
y_adj_stable(particle_num) = 0;
sols{particle_num} = transpose(w0{particle_num});
times{particle_num} = 0;
end

%Event options, Identifying the time intervals within the solution
options = odeset('Events', @events);

%The loop which connects the intervals of time
for n = 1 : number_of_intervals

    for particle_num = 1:num_of_particles
%===========================================
[t_sol, y_sol] = ode45(@pm1dwoc, [tstart, tstop], w0{particle_num}, options);
%===========================================
%The number of steps within each interval
n_steps = length(t_sol); 

for interval = 2: n_steps
        times{particle_num} = [times{particle_num}; t_sol(interval)];
        sols{particle_num} = [sols{particle_num}; y_sol(interval, :)];
end

%Setting the initial conditions of the next interval

w0{particle_num} = y_sol(n_steps,:);

y_adj(particle_num) = y_sol(n_steps, 1);

x_adj(particle_num) = y_sol(n_steps, 3);

    end

tstart = tstart + time_interval*1e-6;
tstop = tstart + time_interval*1e-6;

for n = 1:num_of_particles
y_adj_stable(n) = y_adj(n);
x_adj_stable(n) = x_adj(n);
end
end

 function dwdt = pm1dwoc (t,w)
    y=w(1);
    vy=w(2);
    x=w(3);
    vx=w(4);

    for particle_number = 1:num_of_particles 
    Dist(particle_number) = sqrt((x - x_adj_stable(particle_number))^2 + (y - y_adj_stable(particle_number))^2);

    if (Dist(particle_number) > 0)
        x_vect(particle_number) = (x - x_adj_stable(particle_number))/Dist(particle_number);
        y_vect(particle_number) = (y - y_adj_stable(particle_number))/Dist(particle_number);
    end
    end

     dy_component = -qw*Vd/(m*G) + qw*(-qw)/(m*4*pi*epsilon0*(2*R+2*y)^2));
     dx_component = 0;
     for particle_number = 1:num_of_particles
         if (Dist(particle_number) > 0)
            dx_component = dx_component + ((qw^2)/(0.0001*m*4*pi*epsilon0*Dist(particle_number)^2))*x_vect(particle_number);
            dy_component = dy_component + ((qw^2)/(0.0001*m*4*pi*epsilon0*Dist(particle_number)^2))*y_vect(particle_number);
         end
     end

     dwdt = [vy; dy_component; vx; dx_component];

end

function [eventvalue,stopthecalc,eventdirection] = events (t,w)
    t= t*1e6;
    end_time = 10000;

    eventvalue = t - end_time/number_of_intervals;
    stopthecalc = 1;
    eventdirection = 1;

    for num = 2:number_of_intervals
        eventvalue = [eventvalue; t - num*(end_time/number_of_intervals)];
        stopthecalc = [stopthecalc; 1];
        eventdirection = [eventdirection; 1];
    end

end

end 
```

任何帮助将非常感激！

谢谢你

山姆

编辑

我将发布一个简化版本，因为我已经删除了我知道没有任何错误的部分：

```
num_of_particles = 3;

w0{1} = [0;0;0;0];
sols{1} = transpose(w0{1});
x_adj_stable(1) = 0;
y_adj_stable(1) = 0;
times{1} = 0;

%Initiate particle characteristics
for particle_num = 2:num_of_particles
    w0{particle_num} = [0;0;w0{particle_num - 1}(3) + 4*1e-6;0];
    x_adj_stable(particle_num) = w0{particle_num}(3);
    y_adj_stable(particle_num) = 0;
    sols{particle_num} = transpose(w0{particle_num});
    times{particle_num} = 0;
end

for particle_num = 1:num_of_particles

    [t_sol, y_sol] = ode45(@pm1dwoc, [tstart, tstop], w0{particle_num});

    %The number of steps within each interval
    n_steps = length(t_sol); 

    for interval = 2: n_steps
            times{particle_num} = [times{particle_num}; t_sol(interval)];
            sols{particle_num} = [sols{particle_num}; y_sol(interval, :)];
    end

    %Setting the initial conditions of the next interval
    w0{particle_num} = y_sol(n_steps,:);
    y_adj(particle_num) = y_sol(n_steps, 1);
    x_adj(particle_num) = y_sol(n_steps, 3);

end

%//This part is written since the y_adj and x_adj variables are constantly changing so              %//stable variable version is required when used in the ode45 calculations
for n = 1:num_of_particles
    y_adj_stable(n) = y_adj(n);
    x_adj_stable(n) = x_adj(n);
end
end

 function dwdt = pm1dwoc (t,w)
    y=w(1);
    vy=w(2);
    x=w(3);
    vx=w(4);

    for particle_number = 1:num_of_particles 
    Dist(particle_number) = sqrt((x - x_adj_stable(particle_number))^2 + (y - y_adj_stable(particle_number))^2);

    if (Dist(particle_number) > 0)
        x_vect(particle_number) = (x - x_adj_stable(particle_number))/Dist(particle_number);
        y_vect(particle_number) = (y - y_adj_stable(particle_number))/Dist(particle_number);
    end
    end

     dy_component = 0;
     dx_component = 0;
     for particle_number = 1:num_of_particles
         if (Dist(particle_number) > 0)
            dx_component = dx_component + (1/(Dist(particle_number))*x_vect(particle_number);
            dy_component = dy_component + (1/(Dist(particle_number))*y_vect(particle_number);
         end
     end

     dwdt = [vy; dy_component; vx; dx_component];

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:17:16.410

通常，您不希望单独对多个方程中的每一个进行积分，*尤其是*在方程耦合的情况下。`ode45`及其亲属完全有能力整合一个耦合方程组。

作为一个简单的示例，您可能有以下函数，它定义了三个变量的导数。导数相互依赖。

```
function xprime = my_ode(t, x)

xprime = [x(1) + 2*x(3);
          x(2) - x(1);
          3*x(3) + x(1) + x(2)]; 
```

这不会生成一个非常有趣的系统，但它展示了如何一次集成三个不同的变量。使用`ode45`，您可以键入：

```
x0 = [0;0;1];
tspan = 0:0.1:1;
[T,X] = ode45(@my_ode, tspan, x0) 
```

对于您的问题，此结构将允许您计算每个步骤中粒子之间的分离并确定反应。然后，您可以将这些效果作为运动方程的一部分，而不是整合每个效果并调整效果。

# amazon-s3 - 需要从 amazon s3 下载文件到本地文件夹？

> ID：13717388
> 
> 赞同：1
> 
> 时间：2012-12-05T06:13:49.520
> 
> 标签：amazon-s3, download, ruby-on-rails-2

我正在使用 rails 2.3.11，我想从 amazon s3 下载一个文件到我的本地文件夹中。我该如何实现？请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:57:00.490

AFAIK amazon s3 对象（文件）具有唯一的 URL。获得 s3 对象 URL 后，您可以使用标准 ruby​​ 代码将其下载并保存到本地文件夹，如此[处所示](https://stackoverflow.com/questions/2515931/i-want-to-download-a-file-from-a-url-to-save-it-any-rails-way-to-do-this-or-can)。

# android - 添加和删 除 SherlockActionBarItems

> ID：13717397
> 
> 赞同：1
> 
> 时间：2012-12-05T06:14:53.783
> 
> 标签：android, actionbarsherlock

我的活动允许用户更改他选择的首选项或跳到下一个屏幕。默认情况下，将跳过操作项，但是一旦更改了首选项，该按钮就会更改为保存。如何从 SherlockActionBar 添加和删除操作项？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:38:50.643

我自己没有尝试过，但是由于 ActionBar 按钮本质上是菜单项，因此您可以使用`Menu`在`onCreateOptionsMenu()`

像这样：

```
public class Sample extends SherlockActivity {
Menu activityMenu;

    @Override
    public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
        getSupportMenuInflater().inflate(R.menu.activity_menu, menu);
        activityMenu = menu;
        return true;
    }
} 
```

然后你就可以正常调用你需要的方法了`activityMenu`。

在此处查看整个列表：[菜单](http://developer.android.com/reference/android/view/Menu.html)

更深入的阅读：[菜单 - 在运行时更改菜单项](http://developer.android.com/guide/topics/ui/menus.html#ChangingTheMenu)

# php - 如何每秒显示数据，每分钟写入一次？

> ID：13717399
> 
> 赞同：1
> 
> 时间：2012-12-05T06:15:01.697
> 
> 标签：php, modbus

我是 PHP 新手，我正在编写 PHP 代码以使用 PHPModbus 库从 modbus 设备获取数据。我需要能够每秒显示数据，然后每分钟将数据写入 CSV 文件。

*   我使用 header('Refresh:1') 每秒刷新页面。
*   我将数据作为原始字节获取，我根据参数将其转换为浮点数或整数。
*   然后我将数据存储在一个数组'energymeter_param'中并内爆数组的内容以获得一个我想每60秒写入CSV文件log.csv的字符串。
*   如果您阅读我的代码，您会看到每次秒的值变为 0 时我都在调用 file_put_contents() 函数。[ if(date('s') == 0)]。
*   但有时在刷新页面时，时间会直接从 HH:MM:59 跳到 HH:MM:01，所以我错过了那一分钟日志文件中的数据。

我该如何克服呢？

```
<?php

// for automatically refreshing the page every one second
header('Refresh: 1'); 
//setting the time zone and getting the date and time
$timezone = "Asia/Calcutta";
if(function_exists('date_default_timezone_set')){
   date_default_timezone_set($timezone);
}
echo date('d-m-Y'). "</br>";
echo date('H:i:s'). "</br>";
//reference to ModbusMaster.php file where the modbus php protocol is defined
require_once dirname(__FILE__) . '/phpmodbus/Phpmodbus/ModbusMaster.php';
// Create Modbus object
$modbus = new ModbusMaster("192.168.1.105", "TCP");

//Energy Meter
// FC3 = Function Code 3 to read holding registers
/*Setting device ID = 5, Starting address as 100 and 
  number of registers to be read as 120
*/
try {
    // FC 3
    $recData = $modbus->readMultipleRegisters(5, 100, 120);
}
catch (Exception $e) {
    // Print error information if any
    echo $modbus;
    echo $e;
    exit;
}

// Print status information
echo "</br>Status:</br>" . $modbus;

// Conversion
echo "<h2>EN8400</h2>\n";
// Chunk the data array to set of 4 bytes
$values = array_chunk($recData, 4);
//Create an array and set first two values as date and time
$energymeter_param = array();
$energymeter_param[0] = date('Y-m-d H:i:s');
//$energymeter_param[1] = date('H:i:s');
$count = 1;
// Get float from REAL interpretation
//echo "<h3>Energy meter</h3>\n";
//get each parmeter from energy meter and store in the array
foreach($values as $bytes){    
    /*Since load hours is unsigned long we are converting it 
    to unsigned long type and scaling to get correct value */
    if($count == 59) {
      $temp = PhpType::bytes2unsignedint($bytes);
      $temp = $temp/3932160;
    }
    else {
      $temp = PhpType::bytes2float($bytes);
      //Converting Wh to Kwh
      if($count == 31) {
        $temp = $temp/1000;
      }
    }
    //store the values in an array
    $energymeter_param[$count] = $temp;
    $count++;
}
//Store the number of energy meter parameters in a variable
$num_energymeter_param = $count;
echo "<h3>Energy meter array</h3>\n";
//print array 
print_r ($energymeter_param)." </br>";
//write the values to a csv file every time seconds becomes 00
if((date('s')) == 00) {
    $temprow = implode(',',$energymeter_param);
    $temprow.="\n";
    $file = 'H:\Appserv\www\Log.csv';
    file_put_contents($file, $temprow, FILE_APPEND );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:27:11.813

考虑一个 AJAX 解决方案，其中计时器变量由浏览器在 JavaScript 中处理。

在 document.ready() 上，您可以使用 setTimeout 启动对 php 的 Ajax 调用（以获取最新数据）并跟踪最后一次写入的时间。如果自上次写入以来的时间 > 59 秒，则执行写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:27:51.143

你有两件事发生（状态和完全匹配）。

首先，apache+PHP（我假设是 apache，但同样适用于 IIS 和其他无状态设置）不会一直运行您的脚本，而是仅在请求时运行。这会导致您看到的不一致，浏览器可能无法准确地在您想要的时候发出请求（太多的因素导致了这种情况的发生）。

这可以通过运行 PHP 守护程序来处理 1 分钟的日志记录来更好地处理。

但是，如果您想继续这条路线，那么您必须处理不一致的查询。

您可以使用涵盖“大于”而不是完全匹配表达式的方法。特别是，您可以通过 stat 函数（mtime 值）检查您的 CSV 文件上次更改的时间：http: [//php.net/manual/en/function.stat.php](http://php.net/manual/en/function.stat.php)，然后如果超过 59 秒，则附加到文件。

众所周知，浏览器是不可靠的计时方式，所以我仍然推荐一个守护进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T03:53:11.077

使用 ssh

```
watch -n 1 php /yourphpscript.php 
```

这样你的脚本就会每秒运行一次

# oracle-adf - af:query - 使用绑定变量查看

> ID：13717403
> 
> 赞同：0
> 
> 时间：2012-12-05T06:15:53.393
> 
> 标签：oracle-adf

我在带有绑定变量的视图上使用 af:query。此绑定变量显示为搜索字段之一。我不想让用户更改绑定变量的值。我怎么能隐藏这个字段？它不是一个属性，所以我不能通过取消选中“Quaryable”复选框来做到这一点。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:59:49.677

如果您选择绑定变量并对其进行编辑（VO 编辑器中的查询选项卡），则会出现一个控制提示选项卡。尝试将显示提示从“显示”更改为“隐藏”。

# php - PHP mysql在同一页面上选择数据多个表

> ID：13717411
> 
> 赞同：0
> 
> 时间：2012-12-05T06:16:39.157
> 
> 标签：php, mysql

有两个这样的mysql表：

## 表格1

> --id-----config_name --1
> -----操作系统--2
> -----控制面板--3
> -----带宽

## 表 2

> id -- config_id--- config_Option_name --- 价格
> 1--------1-------------Windows 2008--------20.00
> 2--- ------1-------------CentOs 5----------------0.00
> 3-------- 2-- ------------whm/cPanel------------30.00
> 4--------2-------------Plesk -------------------50.00

* * *

现在我想像这样向他们展示：

> **操作系统**
> Windows 2008 = 20.00
> CentOs 5 = 00.00
> **控制面板**
> whm/cPanel= 30.00
> Plesk = 50.00

请帮我这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:19:05.263

试试这个 ：

```
Select config_name, config_Option_name, price 

from table1 
inner join table2 on (table1.id=table2.config_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:20:40.203

给你一个想法：

```
public $dbserver = '';
public $dbusername = '';
public $dbpassword = '';
public $dbname = '';

function openDb() {
    try {
        $db = new PDO('mysql:host=' . $this->dbserver . ';dbname=' . $this->dbname . ';charset=utf8', '' . $this->dbusername . '', '' . $this->dbpassword . '');
    } catch (PDOException $e) {
        die("error, please try again");
    }
    return $db;
}

function getRecords() {
    $query = "select * from table1 inner join table2 on table1.id=table2.config_id";
        $stmt = $this->openDb()->prepare($query);
        $stmt->execute();
        $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
        return $rows;
}

$getAllRows = getRecords();

foreach ($getAllRows as $counter => $row) {
  //this is where you format and output stuff
  echo $row[0] . " and " . $row[1] . " and so on<br>";
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:19:41.023

这就是我一直在寻找的东西

> $search = "SELECT a,b FROM DB WHERE x LIKE '$var' LIMIT 0 , 30";
> $result = mysql_query($search, $connection);
> if($result){
> while ($row = mysql_fetch_array($result)){
> echo $row["a"]." ".$row["b"]." ";
> $search2 = "SELECT a,b FROM DB WHERE x = '".$row['a']."' LIMIT 0 , 100";
> $result2 = mysql_query($search2, $connection);
> if($result2){
> while ($row2 = mysql_fetch_array($result2)) {
> echo $row2["a"]." ".$row2["b"]." ";
> }
> } else {
> echo "主题搜索失败。
> 
> } else {
> echo "主题搜索失败。";
> 回声 mysql_error();
> }

# symfony - Symfony 2 MenuBundle tutorial

> ID：13717413
> 
> 赞同：0
> 
> 时间：2012-12-05T06:16:42.573
> 
> 标签：symfony

I am looking at using this module: [https://github.com/symfony-cmf/MenuBundle](https://github.com/symfony-cmf/MenuBundle)

I am pretty new to the Symfony framework, I want to use it as a standalone bundle outside of CMF which it is a part of.

Does anyone have a good tutorial on how to use this bundle in a standard Symfony install? I have looked at the documentation but I seem to be missing out to use this as part of the install.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:00:23.230

该捆绑包是[KnpMenuBundle](http://knpbundles.com/KnpLabs/KnpMenuBundle)的扩展版本。我认为您应该在非 CMF 应用程序中使用该捆绑包。有很多关于该捆绑包的文档，您可以[在 github 上](https://github.com/KnpLabs/KnpMenuBundle/blob/master/Resources/doc/index.md)找到这些文档。

# c# - 防止证书不可用时运行“signtool.exe”命令

> ID：13717415
> 
> 赞同：0
> 
> 时间：2012-12-05T06:16:51.817
> 
> 标签：c#, visual-studio-2010, signtool

我将以下内容添加到构建事件中的构建后命令行中，以使用证书对应用程序 EXE 文件进行签名：

```
"C:\Program Files\Microsoft SDKs\Windows\v6.0A\Bin\signtool.exe" sign /t "http://timestamp.digicert.com" /n "XXX INC" "$(ProjectDir)obj\x86\Debug\app.exe" 
```

当证书“XXX INC”不可用时，如何防止此行执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:35:50.607

您可以使用[IF EXIST](http://www.robvanderwoude.com/if.php)批处理语句。我不确定您是否可以将其直接添加到 PostBuild 事件中，但您可以轻松地创建一个 .bat 文件，在其中插入所有命令并在项目的 PostBuild 事件中调用它。

# javascript - 在对象中携带canvas ctx？

> ID：13717420
> 
> 赞同：0
> 
> 时间：2012-12-05T06:17:23.673
> 
> 标签：javascript, html, object, canvas

我的画布有一个对象，它存储为对象，我将画布存储到对象中，如下所示：

```
window.canvas = new Object();
temp = document.getElementById('canvas_id');
canvas[objname] = new Object();
canvas[objname].ctx =  temp.getContext("2d"); 
```

我遇到的问题是我不能使用 ctx 来绘制图像....

我在我的绘图功能中这样做：

只是让您知道图像设置如下：

```
img = new Image();
img.src = 'images/0.png'; 
```

稍后在脚本中绘制：

`canvas['canvas1'].ctx.drawImage(img.src,abposx,abposy);`

问题是我收到一个类型错误，上面写着：

`Uncaught TypeError: Type error`

有什么想法是因为我已经将 ctx 放在对象中，所以不能这样调用 ctx 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:36:04.653

尝试传递图像本身而不是`image.src`尝试以下操作：

```
canvas['canvas1'].ctx.drawImage(img,abposx,abposy); 
```

我希望这会有所帮助！

这是一个代码示例：

```
function draw() {
  var ctx = document.getElementById('canvas').getContext('2d');
  var img = new Image();
  img.src = 'images/backdrop.png';
  img.onload = function(){
    ctx.drawImage(img,0,0);
    ctx.beginPath();
    ctx.moveTo(30,96);
    ctx.lineTo(70,66);
    ctx.lineTo(103,76);
    ctx.lineTo(170,15);
    ctx.stroke();
  }
} 
```

来自[https://developer.mozilla.org/samples/canvas-tutorial/3_1_canvas_drawimage.html](https://developer.mozilla.org/samples/canvas-tutorial/3_1_canvas_drawimage.html)

# iphone - 从导航控制器导航到普通视图控制器

> ID：13717421
> 
> 赞同：2
> 
> 时间：2012-12-05T06:17:25.417
> 
> 标签：iphone, modalviewcontroller, viewcontroller, pushviewcontroller

我有一个基于导航的视图控制器（根？），我在其中（以编程方式）创建了一个将用户带到主菜单的主页按钮。

这个主菜单是一个简单的视图控制器，而不是导航控制器的一部分。

为了连接两者，我使用了以下代码：

```
ViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"MainMenu"];
[self.navigationController pushViewController:vc animated:YES]; 
```

尽管可以工作，但它只是将视图控制器与导航栏一起推送到堆栈上。

我想要做的是关闭导航控制器并返回开始。

我尝试使用以下代码：

```
ViewController *viewController = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
[self presentModalViewController:viewController animated:YES]; 
```

但是我得到以下崩溃：原因：'无法在捆绑中加载NIB：'NSBundle

我的问题是如何以编程方式打开另一个视图控制器并关闭导航控制器？我看不到按钮，因此无法进行 segues。

谢谢先进

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T06:24:55.160

试试这条线：

```
ViewController *viewController = [[ViewController alloc]initWithNibName:@"ViewController" bundle:[NSBundle mainBundle]]; 
```

代替：

```
 ViewController *viewController = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:23:55.317

当您`navigationContorller`从那时起使用 push on 时，它会将您的视图推送到 stack 上，因此您可以做一件事，只需将您`navigatioBar`的 viewWillAppear 隐藏在您的视图中即可。

```
self.navigationController.navigationBarHidden = YES; 
```

# wcf - 在 WCF 配置文件中指定显式用户凭据

> ID：13717428
> 
> 赞同：1
> 
> 时间：2012-12-05T06:17:56.037
> 
> 标签：wcf, iis-7, wcf-security, wcf-client

我有一个托管在 IIS 上的 WCF 服务`DomainA`。我的客户端计算机要么未加入任何域，要么位于不受信任的域上，因此我无法调用该服务。（错误`There was no endpoint listening at .... that could accept this message....`：）

为了解决这个问题，我在调用 WCF 服务时使用了显式用户凭据。 [http://blogs.msdn.com/b/sonuarora/archive/2007/04/21/setting-client-credentials.aspx](http://blogs.msdn.com/b/sonuarora/archive/2007/04/21/setting-client-credentials.aspx)

```
Proxy.ClientCredentials.Windows.ClientCredential.UserName = "UserA";
Proxy.ClientCredentials.Windows.ClientCredential.Password = "Pass"
Proxy.ClientCredentials.Windows.ClientCredential.Domain = "**DomainA**"
//UserA belongs to DomainA. 
```

我在一台机器上试过这个`DomainA`，它奏效了。我确认`UserA`使用过。但这不适用于不是来自`DomainA`.

这是因为模拟发生在客户端机器上吗？有没有办法将这些显式凭据传输到 IIS 并在 IIS 机器上尝试模拟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:12:17.060

好的，我发现这是因为域之间没有信任。此外，模拟发生在客户端。

# c++ - 在 C++ 中创建 OpenCV 矢量并存储到文本文件

> ID：13717430
> 
> 赞同：1
> 
> 时间：2012-12-05T06:18:11.640
> 
> 标签：c++, xcode, opencv, vector, opticalflow

我有一个关于在 OpenCV 中存储向量的非常基本的查询，但由于我一直在 MATLAB 中工作，我发现在 C++ 中执行相同的向量操作真的很困难。

所以这是我的问题，我已经使用基本的 cvGoodFeaturesToTrack() 和 cvCalcOpticalFlowPyrLK() 函数计算了光流，并找到了流线的端点并将它们作为光流线显示在图像上。

但是，我想将这些流线端点存储在向量中，然后将其保存为文本文件，然后我可以将其发送到 MATLAB 以供阅读。

我真的不知道如何创建这些向量来存储这些点并将它们保存在文本文件中。

任何人都可以帮忙吗？

谢谢，

亚什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:45:10.623

根据OP对这个问题的评论，我认为这是一个很好的方法：

```
std::ofstream matlabFile;
matlabFile.open("pointsOutput.m");
matlabFile << "Corners = [ ...\n";
for (int i = 0; i < MAX_CORNERS; ++i) {
    matlabFile << corners2[i].x << " " << corners2[i].y << "; ...\n";
}
matlabFile << "];";
matlabFile.close(); 
```

此代码应在本地目录中为您提供以下文件：

点输出.m：

```
Corners = [ ...
1 2; ...
3 4; ...
]; 
```

在matlab中将为您提供以下矩阵：

```
Corners = 
    1 2
    3 4 
```

假设您在该列表中有两个点，x 和 y = 1 和 2、3 和 4。

希望这可以帮助。

# php - php 更新--- T_CONSTANT_ENCAPSED_STRING 错误

> ID：13717432
> 
> 赞同：0
> 
> 时间：2012-12-05T06:18:24.267
> 
> 标签：php, mysql, database, session

请在这里帮助我，我不确定实际错误是什么意思，但我正在寻找任何方法来完成这项工作！请！

```
 <?php 

//session_start();
include("config.php");
include("auth.php"); 

if($_SESSION['SESS_MEMBER_ID'] != 'true') {
//  header("location:member-index.php");
    }

//connects to database
$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
if (!$link) {
    die("Failed to connect to server: " . mysql_error());
    }

    //selects database
$db = mysql_select_db(DB_DATABASE);
if (!$db) {
    die ("Unable to select database");
    } 
```

这是错误所在

```
$qry = "UPDATE members set firstname="'.$firstname.'", lastname="'.$lastname.'", location="'.$location.'", email="'.$email.'", cell_number="'.$cell_number.'", home_number="'.$home_number.'", about="'.$about.'" where member_id="'.$_SESSION['SESS_MEMBER_ID'].'" "

$result = @mysql_query($qry);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:21:26.307

改变

```
$qry = "UPDATE members set firstname="'.$firstname.'", lastname="'.$lastname.'", location="'.$location.'", email="'.$email.'", cell_number="'.$cell_number.'", home_number="'.$home_number.'", about="'.$about.'" where member_id="'.$_SESSION['SESS_MEMBER_ID'].'" " 
```

到

```
$qry = "UPDATE members set firstname='".$firstname."', lastname='".$lastname."', location='".$location."', email='".$email."', cell_number='".$cell_number."', home_number='".$home_number."', about='".$about."' where member_id='".$_SESSION['SESS_MEMBER_ID']."' "; 
```

**注意：强烈建议使用 Prepared statements 而不是使用 mysql_* 函数。**

# ajax - Supporting browser back button in already developed ajax based web site

> ID：13717434
> 
> 赞同：2
> 
> 时间：2012-12-05T06:18:34.313
> 
> 标签：ajax, asp.net-mvc, history.js, sammy.js

I have already developed ajax enabled web site. Most of the time we do partial rendering and use some templates to render content in the client side. The issue is now we need to support browser back button .

I tried to use Sammy.js but it seems like we need to change every ajax calls and events to use sammy to keep the history with the client. Is there any other library like History.js or something else so that we can do it in easier or do in in a separate module without affecting all.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:23:03.813

就我对该主题的有限知识而言，我认为仍然没有办法隐含地做到这一点。

YUI 的做法似乎与 Sammy 有所不同，请检查是否有帮助。

[http://yuilibrary.com/yui/docs/history/](http://yuilibrary.com/yui/docs/history/)

[http://yuiblog.com/sandbox/yui/3.2.0pr1/examples/history/history_tabview.html#tab=2](http://yuiblog.com/sandbox/yui/3.2.0pr1/examples/history/history_tabview.html#tab=2)

# php - 用于检查电子邮件、插入数据库的 Cron 作业

> ID：13717440
> 
> 赞同：1
> 
> 时间：2012-12-05T06:19:05.280
> 
> 标签：php, email, cron

我希望有一个 cron 作业，它会检查发送到它正在运行的服务器上某个地址的电子邮件，然后根据我所知道的主题等将该电子邮件的内容插入到数据库中。CRON 作业可以用php编写，数据库部分对我来说并不难。那么我将如何检查某个电子邮件？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:28:29.167

PHP imap 电子邮件功能将帮助您：

[http://ca3.php.net/manual/en/function.imap-open.php](http://ca3.php.net/manual/en/function.imap-open.php)

# c# - overloading multivalued constructor for dictionary in c#

> ID：13717446
> 
> 赞同：0
> 
> 时间：2012-12-05T06:20:08.720
> 
> 标签：c#, dictionary, constructor, operator-overloading

I'm working in C# and I'm not quite sure how to word this question (which made it hard to search). Basically I have a class that inherits from `Dictionary<string,MyButton>`, where `MyButton` is a class I made. However I want to overwrite the Add function to prevent adding keyvalue pairs that don't meet specific requirements (e.x. all MyButton values in the dictionary have size properties of which are all the same). I know how to overwrite the Add function with the `New` operator however I'm not sure how to overwrite the constructor of the Dictionary class that allows one to do this, for example:

```
 Dictionary<string, int> d = new Dictionary<string, int>()
    {
        {"cat", 2},
        {"dog", 1},
        {"llama", 0},
        {"iguana", -1}
    }; 
```

[(Example taken from here)](http://www.dotnetperls.com/dictionary)

I'm not sure which constructor allows you to do the above. I believe it's [this constructor](http://msdn.microsoft.com/en-us/library/et0ke8sz.aspx) but I'm not sure how to override it, or even how to make one.

Any help would be appreciated.

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:39:26.923

您提供的代码示例使用对象初始化程序。这就是所谓的编译器“糖”，即它是一种简写语法，可以扩展为等价的长写语法。在这种情况下，它是以下内容的简写：

```
Dictionary<string, int> d = new Dictionary<string, int>();
d.Add("cat", 2);
d.Add("dog", 10);
d.Add("llama", 0);
d.Add("iguana", -1); 
```

因此，在这种情况下使用的是字典的无参数构造函数。

此外，使用`new`关键字隐藏超类方法而不是覆盖它。我不会推荐它。请参阅此相关问题：

[覆盖 Dictionary.Add](https://stackoverflow.com/questions/6250706/override-dictionary-add)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:32:34.683

看看[KeyedCollection{TKey, TItem}](http://msdn.microsoft.com/en-us/library/ms132438.aspx)类。它旨在用作键值集合的基类。然后，您可以覆盖受保护的方法 InsertItem、RemoveItem、ClearItems 和 SetItem 以添加您的自定义逻辑。这些方法由 Add、Remove 和 Clear 方法调用。看第二个例子。

# asp.net - asp.net mvc 路由问题重定向

> ID：13717447
> 
> 赞同：1
> 
> 时间：2012-12-05T06:20:14.197
> 
> 标签：asp.net, asp.net-mvc, routes

我正在尝试创建一个重定向到 url 但无法让它为我的生命工作的路由。这是我到目前为止所拥有的：

```
public class GoAreaRegistration : AreaRegistration
{
    public override string AreaName
    {
        get
        {
            return "Go";
        }
    }

    public override void RegisterArea( AreaRegistrationContext context )
    {
        context.MapRoute(
            "Go/Issues",
            "go/issues/{issueID}",
            new { controller = "Go", action = "GoIssues" },
            new { issueID = @"\d+" }
        );
    }
} 
```

和我的控制器：

```
public class GoController : Controller
{
    public ActionResult GoIssues( int issueID )
    {
      var version = getVersion( issueID );
      if( version != null )
      {
        string url = MakeUrl(version, issueID);

        // Redirect to the right url
        return Redirect( url );
      }
    }

    // not found
    return HttpNotFound();
  }
} 
```

这样做的重点是确定要重定向到的正确版本并在那里重定向。但是由于某种原因 go/issues/123 给了我一个 404 not found 。我使用了路由调试工具，它显示这条路由被命中，但是当我禁用它时，我又回到了 404。

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:37:22.270

尝试将您的路线放在全局路线配置中而不是区域注册中，看看是否有效。

我已经尝试在我的测试项目中使用您的配置，它工作正常。如果这仍然不起作用，我建议从小处着手并使其发挥作用，然后慢慢将您的路线配置添加到它上面，直到它中断为止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:32:13.840

如果其他人遇到同样的问题，我已经找到了答案。

经过大量谷歌搜索，我发现以下文章解释了路由的工作原理。

> [http://blog.davebouwman.com/2011/12/08/asp-net-mvc3-and-404s-for-area-controllers/](http://blog.davebouwman.com/2011/12/08/asp-net-mvc3-and-404s-for-area-controllers/)

文章说 ASP.NET 期望命名空间是某种格式：

> 问题是我的控制器上的命名空间。事实证明，MVC 有一个约定，即区域名称应位于控制器的命名空间中。
> 
> 所以——我有 StatsMe.API.CategoriesController，但 MVC 正在寻找 StatsMe.Areas.API.CategoriesController。
> 
> 最终让我知道的是 RouteDebugger 输出中的一些内容……</p>
> 
> 很烦人，因为错误消息确实可以通过说“嘿——我正在寻找 StatsMe.Areas.API.CategoriesController 但我找不到它”来提供帮助，而不是它吐出的非常通用的消息。

# php - 更新mysql表记录

> ID：13717448
> 
> 赞同：1
> 
> 时间：2012-12-05T06:20:17.760
> 
> 标签：php, mysql

我只是好奇更新mysql表记录（与php有关）如下。

1.  更新一个值。例如：在 mysql 表中，它的值为“100”。用户希望将“50”添加到该值。使用 php 代码将“50”传递给 mysql 表，并将“50”添加到“100”并更新为“150”。

2.  将数据附加到现有值。例如：mysql 表字段“联系人”（0123456789）中已经有一个数字，新数字应该附加到同一字段并使用逗号或其他东西分隔（0123456789、9876543210）。不使用字段contact1、contact2等。

我问这个通常我们从表中检索所有数据并进行所有数学运算，毕竟我们覆盖和更新表。dbms 中有没有办法管理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:28:53.293

1 你可以使用

```
set col =col + 50 
```

对于两个你可以使用

```
set contact = case when contact is null then '12345' else concat(contact, ',  12345') end 
```

但是在数据库中使用 csv 在某些情况下只是一件好事。我认为这不是其中之一。我会使用一个单独的表的一对多关系。考虑以下。

1.  删除一个联系人号码意味着解析字符串并创建一个新值。
2.  找到一定数量的人
3.  按编号订购

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:30:26.553

对于您提出的第一个问题：

```
UPDATE tablename SET column_with_ints = column_with_ints + 50; 
```

对于第二个答案，您可以以相同的方式在 MySQL 中连接字符串。

```
UPDATE tablename SET column_with_string = CONCATE(column_with_stringA, column_with_stringB); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T06:32:44.893

更新时，您可以引用当前字段值。

例如

查询 1。

```
UPDATE table SET col1 = col1+50 WHERE condition; 
```

查询 2。

```
UPDATE table SET col1 = CONCAT( col1, ', 9876543210' ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T06:30:48.583

1.  更新 myTable 设置 MyValue=MyValue+50 其中 myId=x
2.  更新 myTable 设置 MyValue=CONCAT(MyValue,',9876543210') 其中 myId=x

# mysql - Normalising a table structure for a very simple payments system

> ID：13717452
> 
> 赞同：0
> 
> 时间：2012-12-05T06:20:29.323
> 
> 标签：mysql, sql, database, database-design

I am programming a very simple payments web app which is my first attempt at programming anything. I've run into trouble with my database structure, with people saying it should be normalized.

At the moment I have the following structure.

```
Customers
---------
id, firstName, lastName, country

Items
---------
id, itemName, itemCost

Purchases
----------
customerID, dayCost, serviceCost, numItem1, numItem2, numItem3

Orders
----------
orderId, customerId, amountPaid, date 
```

I need to be able to do a query where I can display the following:

*   Total : 140
*   Day Cost: 50
*   Service Cost: 70
*   Coronas Cost: 20 (4)
*   Item 2 Cost: 0
*   Item 3 Cost: 0
*   Total Owing: 100

My idea was to calculate, for example, ( purchases.numItem1 by item.itemName where id = 1 + purchases.dayCost + purchases.serviceCost ) - orders.amountPaid.

This isn't right and I'm not sure what it should be.

I need to be able to return in a query how much of each item the customer has ordered, the total cost for each item, and the total cost owing.

What is a better, normalized table structure to allow for this query?

I can't simply have an orders table with customer and item id and quantity and amount paid, because I have to work with a form on a webpage and that structure won't work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:02:32.853

客户和项目可以在需要时扩展，但到目前为止还不错。

如果 daycost 和 servicecost 是每件商品，您可以将购买更改为

```
Purchases
----------
orderId, dayCost, serviceCost, itemid, itemsBought 
```

现在您可以通过以下方式计算订单成本

```
select sum(p.itemsBought * i.itemcost + p.daycost + p.servicecost) as itemsCost
from purchases p
join items i on p.itemid = i.id
where p.orderid = 17 
```

或客户欠款

```
select sum(p.itemsBought * i.itemcost + p.daycost + p.servicecost)
       - sum(o.amountPaid) as owing
from purchases p
join items i on p.itemid = i.id
join orders o on o.orderid = p.orderid
where o.customerid = 284 
```

# jsp - JSP 解析 PrototypeJS 模板标签

> ID：13717454
> 
> 赞同：1
> 
> 时间：2012-12-05T06:20:46.133
> 
> 标签：jsp, prototypejs, jsp-tags

我在 JSP 文件上使用原型模板。但是jsp文件试图解析prototypejs模板的#{}标签，因此它会中断。

我怎样才能让 jsp 不解析它们。换句话说，我怎样才能逃避那些标签？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:51:53.007

1.  逃脱它`\`：`var template = new Template('<a href="\#{href}" title="\#{title}">\#{name}</a>');`

2.  将其编码为实体：`var template = new Template('<a href="&#35;{href}" title="&#35;{title}">&#35;{name}</a>');`

3.  将其移至 JavaScript 文件。

4.  将其移至 Java 代码并使用 EL`${}`或 JSTL`<c:out />`或 Stuts在 JSP 上编写`<bean:write />`

# ruby-on-rails - Rails has_many :through, null belongs_to, 多个belongs_to 和删除belongs_to？

> ID：13717456
> 
> 赞同：1
> 
> 时间：2012-12-05T06:20:58.770
> 
> 标签：ruby-on-rails, activerecord, cancan

我想知道我是否走在正确的轨道上，以及rails是否允许这种事情。

`User`有`Role`一个`Network`。即“吉姆”是“学校”的“历史老师”。

A`Role`既有位置（权力），也有名称（标签）。“Jim”是“历史老师”（标签），但具有成员或管理员、主管或其他任何（权力）的权限。

这取决于他/她是否创建了`Role`它们。即，如果“Jim”是“校长”（管理员），“Jim”可以看到“Nancy's”的“Recess Plan”，但如果“Jim”是“历史老师”（成员）则不能。`User``Events``Network`

A在 a 中`User`创建 a`Event`作为`Role`a `Network`。即“吉姆”在“学校”作为“历史老师”创建“课程计划”。

`Event`永远连接到那个特定的`Network`并且当前连接到那个`Role`。

`Event`如果 a`User`替换了另一个`User`，我希望它能够持续存在`Role`，并且 new`User`可以访问它`Event`。即“汤姆”代替“吉姆”成为“历史老师”，并且可以修改“课程计划”，因为他是“历史老师”。“Jim”无法再访问“课程计划”。

`Event`但是如果没有`User`附加到 a ，我也希望 a坚持下去`Role`。即“汤姆”被解雇并且当前没有替换，管理员仍然可以看到“课程计划”。

最后，如果它`Role`被删除，它`Event`仍然存在，因为它与`Network`没有`Role`.

模型如下，我正在使用 CanCan 进行授权，这些是我的问题：

1.  一个角色可以缺少一个`User`，还是我需要创建一些通用的“无”`User`或“每个人” `User`？并且可以`Event`缺少一个`Role`？（belongs_to 可以为空吗？）
2.  将 a连接`Event`到 a`Role`和 a是好还是坏的设计`Network`？有一个更好的方法吗？
3.  如果一个`User`可以根据他/她看到更多事件，`Role`他们是否有很多`Events`通过`Network`或他们的`Role`？我正在考虑`Network`，Ability.rb 会限制它。

用户.rb

```
class User < ActiveRecord::Base
  has_many :roles
  has_many :networks, :through => :roles

  has_many :events, :through => :network
  # I would use CanCan to determine the authorization of
  # what network events they can see based on their role?
end 
```

网络.rb

```
class Network < ActiveRecord::Base
  has_many :roles
  has_many :users, :through => :roles

  has_many :events
  # it shouldn't have this through roles right?
  # because a role can be deleted
end 
```

角色.rb

```
class Role < ActiveRecord::Base
  belongs_to :user     #CAN THIS BE NULL?
  belongs_to :network
end 
```

事件.rb

```
class Event < ActiveRecord::Base
  belongs_to :role      #Can this be null?

  belongs to :network
  # Does it belong to the network through the role,
  # or can it belong on its own, in case the role is deleted?

  # belongs_to :user, :through => :roles
  # Is this necessary if I am using CanCan
  # to determine if a User can reach the event?

end 
```

能力.rb

```
if user  
  user.roles.each do |role|
    can :manage, Event, :role_id => role.id
    if role.position == "admin" || role.position == "manager"
      can :manage, Event, :network_id => role.network_id
    elseif role.position == "supervisor"
      can :read, Event, :network_id => role.network_id
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:05:54.143

你的关联很好，你可以有空`belongs_to`字段。默认情况下，Rails 不会在数据库上创建外键约束。就 CanCan 设置而言，我会执行以下操作：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    #Adding can rules do not override prior rules, but instead are logically or'ed.
    #See: https://github.com/ryanb/cancan/wiki/Ability-Precedence

    #Anything that you can pass to a hash of conditions in Active Record will work here.
    #The only exception is working with model ids. 
    #You can't pass in the model objects directly, you must pass in the ids.
    #can :manage, Project, :group => { :id => user.group_ids }
    #See https://github.com/ryanb/cancan/wiki/Defining-Abilities

    can :read, Event, network: {id: user.supervises_network_ids} 
    can :manage, Event, role: {id: user.role_ids}
    can :manage, Event, network: {id: user.manages_network_ids + user.admins_network_ids}
  end
end 
```

你在哪里：

```
class User < ActiveRecord::Base
  #...
  def manages_network_ids
    @manages_network_ids ||= roles.manager.collect &:network_id
  end

  def admins_network_ids
    @admins_network_ids ||= roles.admin.collect &:network_id
  end

  def supervises_network_ids
    @supervises_network_ids ||= roles.supervisor.collect &:network_id
  end
  #...
end 
```

在角色上你有：

```
class Role < ActiveRecord::Base
  #...
  scope :manager, where(position: "manager")
  scope :admin, where(position: "admin")
  scope :supervisor, where(position: "supervisor")
  #...
end 
```

这允许您的 Event 具有 null `role_id`，因为您将允许网络上的任何管理员（或经理）管理所有事件，受`network_id`. 此外，如果您将角色重新分配给新用户，旧用户将无法再管理活动，而新用户可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:33:31.243

要回答你的第一个问题`belongs_to`，技术上可以`nil`。您必须使用验证 ( `validates_presence_of`) 来避免这种情况。

**我不知道 CanCan**，但在概念层面上，我不会写这么多关联只是为了能够访问数据。Rails 关联不仅仅是一个数据读取器，我不确定您是否需要它。

例如，User#events 可以替换为：

```
def events
  roles.includes(:events).map(&:events).flatten
end 
```

或者

```
def events
  Event.where(:role_id => roles.map(&:id))
end 
```

或者

```
def events
  Event.joins(:role).where(:role => {:user_id => id})
end 
```

如果您多次调用此方法，您可以添加一些记忆。事实上，如果你只调用一次，你几乎不需要一个方法。

关于将事件与角色和网络相关联，我会小心，因为您可能有一致性问题（您必须确保`event.role.network == event.network`）。另一种方法是为每个网络设置一个不能被破坏的默认角色。但这可能并不简单。

# asp.net-mvc - can't connect to SQL Server 2008 remote DB MVC4

> ID：13717457
> 
> 赞同：0
> 
> 时间：2012-12-05T06:21:06.047
> 
> 标签：asp.net-mvc, sql-server-2008, entity-framework

I have looked in to one of the solution you provided for unable to connecting to the SQL Server 2008 in mvc4..I followed your answer but even though i am getting error.

```
public class videoDBContext : DbContext
{
      static videoDBContext()
      {
        Database.SetInitializer<videoDBContext>(null);
      }

       public videoDBContext()
       : base("Name=videoDBContext")
       {
       }

       public DbSet<Video> Videos { get; set; }

       protected override void OnModelCreating(DbModelBuilder modelBuilder)
       {
         modelBuilder.Configurations.Add(new VideoMap());
       }
      } 
```

domain class

```
 public class Video
     {
      public int Id { get; set; }
      public string Description { get; set; }
     } 
```

Mapping class as

```
 public class VideoMap : EntityTypeConfiguration<Video>
     {
      public VideoMap()
      {
        // Primary Key
        this.HasKey(t => t.Id);

        // Properties
        this.Property(t => t.Description)
                            .IsRequired()
                            .HasMaxLength(50);

        // Table & Column Mappings
        this.ToTable("Video");
        this.Property(t => t.Id).HasColumnName("Id");
        this.Property(t => t.Description).HasColumnName("Description");
       }
} 
```

Controller action as

```
 public ActionResult Index()
  {
    ViewBag.Message = "Welcome to ASP.NET MVC!";

    using (videoDBContext context = new videoDBContext())
    {
        var list = **context.Videos.ToList();**
    }

    return View();
  } 
```

I am getting error near the line:

```
 Line 20:             var s = context.Videos.ToList(); 
```

`web.config` file is

```
<add name="videoDBContext" 
     connectionString="metadata=res://*/Models.xx.csdl|res://*/Models.xx.ssdl|res://*/Models.xx.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=servername;initial catalog=xx.mdf;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

Please provide the solution. where am I going wrong? And sorry if it is silly or making you to inconvenience.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:57:57.370

如果你分析你的连接字符串，你会看到：

```
connectionString="...provider connection string=&quot;data source=servername;
                  initial catalog=xx.mdf;integrated security=True; 
```

“提供者”连接字符串指向服务器`servername`（对吗？），并且似乎正在尝试引用`.mdf`文件。

你不应该**在**生产中这样做！您应该引用服务器上存在的数据库，使用其**逻辑**数据库名称 - 不要乱用`.mdf`文件！

因此，将您的连接字符串更改为：

```
<add name="videoDBContext" 
     connectionString="metadata=res://*/Models.xx.csdl|res://*/Models.xx.ssdl|res://*/Models.xx.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=servername;initial catalog=Vedios;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" 
     providerName="System.Data.EntityClient" /> 
```

将 包含在EF 连接字符串`initial catalog=Vedios;`的`provider connection string`深处。

# c# - 调用 ASMX 时的 CredentialsCache 或 NetworkCredential

> ID：13717461
> 
> 赞同：0
> 
> 时间：2012-12-05T06:21:15.603
> 
> 标签：c#, asmx

谷歌搜索示例 我已经看到了两种在调用 ASMX Web 服务时指定凭据的方法。

a) 一种方法是创建 a`CredentialsCache`并将其分配`NetworkCredential`给它。

b) 另一种方法是直接在客户端/代理类上设置凭据。

为什么他们只是`CredentialsCache`？只是指定身份验证方法（如*BASIC*、*DIGEST*等）还是有其他原因不`NetworkCredential`直接使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:21:33.887

如果您希望它与 Windows 身份验证一起使用，则必须使用构造函数创建凭据（有关它的博客：http: [//blog.gauffin.org/2012/12/solved-getting-401-unauthorized-while-calling-an -asmx-service-using-windows-authentication/](http://blog.gauffin.org/2012/12/solved-getting-401-unauthorized-while-calling-an-asmx-service-using-windows-authentication/)）：

```
service.Credentials = new NetworkCredential("userName", "password"); 
```

`CredentialsCache`除非他们想指定使用哪个身份验证选项（并且服务器必须支持多个选项），否则所有使用的示例都没有目的。`NetworkCredential`否则会正常工作。

# iphone - Overlays are not captured in MKMapView ScreenShot taken programmatically

> ID：13717462
> 
> 赞同：2
> 
> 时间：2012-12-05T06:21:21.593
> 
> 标签：iphone, ios, xcode, mkmapview, mapkit

I have been trying to take screenshot on MKMapView on which i am drawing user location draw a path using the [BreadCrumbs](http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html) classes [CrumbPath](http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Listings/Classes_CrumbPath_h.html#//apple_ref/doc/uid/DTS40010048-Classes_CrumbPath_h-DontLinkElementID_9) and [CrumbPathView](http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Listings/Classes_CrumbPathView_h.html#//apple_ref/doc/uid/DTS40010048-Classes_CrumbPathView_h-DontLinkElementID_7) overlay and overlay view classes.

Here is the code i am using to get the screen Shot:

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
    UIGraphicsBeginImageContextWithOptions(self.view.frame.size, NO, [UIScreen mainScreen].scale);

else
    UIGraphicsBeginImageContext(self.view.frame.size);

[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage * viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIImage * croppedImage = [Utils cropImage:viewImage withFrame:_map.frame];    
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(croppedImage, nil, nil, nil); 
```

ScreenShot i am trying to get Should look like this:

![enter image description here](../Images/ef8e731da749e50ee48d0fa1f9ab78ce.png)

But the ScreenShot i get looks like this:

![enter image description here](../Images/32ff40e3ae3b5ffa0f9816ec9560d75b.png)

Here you can notice the Blue line (User Location Path) is not there in the ScreenShot.

Can anyone please help me suggest whats the solution or what am i doing wrong here?

Thanks Everyone.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:31:48.127

使用这个我的自定义方法它返回当前视图的图像..

```
- (UIImage *)captureView {

   //hide controls if needed
    CGRect rect = [self.view bounds];

    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.view.layer renderInContext:context];   
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;

} 
```

# python - Find the indices of elements greater than x

> ID：13717463
> 
> 赞同：32
> 
> 时间：2012-12-05T06:21:22.797
> 
> 标签：python, indexing, logical-operators, indices

Given the following vector,

```
a = [1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

I need to identify the indices of "a" whose elements are >= than 4, like this:

```
idx = [3, 4, 5, 6, 7, 8] 
```

The info in "idx" will be used to delete the elements from another list X (X has the same number of elements that "a"):

```
del X[idx] #idx is used to delete these elements in X. But so far isn't working. 
```

I heard that numpy might help. Any ideas? Thanks!

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-05T06:23:37.610

```
>>> [i for i,v in enumerate(a) if v > 4]
[4, 5, 6, 7, 8] 
```

`enumerate`返回数组中每个项目的索引和值。因此，如果该值`v`大于`4`，则将索引包含`i`在新数组中。

或者您可以就地修改您的列表并排除上述所有值`4`。

```
>>> a[:] = [x for x in a if x<=4]
>>> a 
[1, 2, 3, 4] 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-05T15:57:28.303

好的，我明白你的意思，一行 Python 就足够了：

**使用列表理解**

```
[ j for (i,j) in zip(a,x) if i >= 4 ]
# a will be the list compare to 4
# x another list with same length

Explanation:
>>> a
[1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> x
['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'j'] 
```

Zip 函数将返回一个元组列表

```
>>> zip(a,x)
[(1, 'a'), (2, 'b'), (3, 'c'), (4, 'd'), (5, 'e'), (6, 'f'), (7, 'g'), (8, 'h'), (9, 'j')] 
```

列表推导是在“in”之后的列表中循环元素的快捷方式，并使用表达式评估元素，然后将结果返回到列表中，您也可以添加要返回的结果的条件

```
>>> [expression(element) for **element** in **list** if condition ] 
```

此代码只返回所有压缩的对。

```
>>> [(i,j) for (i,j) in zip(a,x)]
[(1, 'a'), (2, 'b'), (3, 'c'), (4, 'd'), (5, 'e'), (6, 'f'), (7, 'g'), (8, 'h'), (9, 'j')] 
```

我们所做的是通过指定“if”后跟一个布尔表达式来添加一个条件

```
>>> [(i,j) for (i,j) in zip(a,x) if i >= 4]
[(4, 'd'), (5, 'e'), (6, 'f'), (7, 'g'), (8, 'h'), (9, 'j')] 
```

**使用 Itertools**

```
>>> [ _ for _ in itertools.compress(d, map(lambda x: x>=4,a)) ]
# a will be the list compare to 4
# d another list with same length 
```

在 Python 中使用 itertools.compress**单行**来完成关闭此任务

```
>>> a = [1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> d = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'j'] # another list with same length
>>> map(lambda x: x>=4, a)  # this will return a boolean list 
[False, False, False, True, True, True, True, True, True]

>>> import itertools
>>> itertools.compress(d, map(lambda x: x>4, a)) # magic here !
<itertools.compress object at 0xa1a764c>     # compress will match pair from list a and the boolean list, if item in boolean list is true, then item in list a will be remain ,else will be dropped
#below single line is enough to solve your problem
>>> [ _ for _ in itertools.compress(d, map(lambda x: x>=4,a)) ] # iterate the result.
['d', 'e', 'f', 'g', 'h', 'j'] 
```

对itertools.compress的解释，我想这对你的理解会很清楚：

```
>>> [ _ for _ in itertools.compress([1,2,3,4,5],[False,True,True,False,True]) ]
[2, 3, 5] 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-05T06:24:53.213

```
>>> import numpy as np
>>> a = np.array(range(1,10))
>>> indices = [i for i,v in enumerate(a >= 4) if v]
>>> indices
[3, 4, 5, 6, 7, 8]

>>> mask = a >= 4
>>> mask
array([False, False, False,  True,  True,  True,  True,  True,  True], dtype=boo
l)
>>> a[mask]
array([4, 5, 6, 7, 8, 9])
>>> np.setdiff1d(a,a[mask])
array([1, 2, 3]) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-03-14T09:11:12.637

在我看来最简单的就是使用 numpy

```
X[np.array(a)>4]#X needs to be np.array as well 
```

说明： np.array 将 a 转换为数组。

np.array(a)>4 给出一个 bool 数组，其中包含应保留的所有元素

并且 X 被 bool 数组过滤，因此只选择 a 大于 4 的元素（其余的被丢弃）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-09-23T11:47:15.617

我想我来这里有点晚了（虽然使用 Numpy 变得更容易了）..

```
import numpy as np

# Create your array
a = np.arange(1, 10)
# a = array([1, 2, 3, 4, 5, 6, 7, 8, 9])

# Get the indexes/indices of elements greater than 4 
idx = np.where(a > 4)[0]
# idx = array([4, 5, 6, 7, 8])

# Get the elements of the array that are greater than 4
elts = a[a > 4]
# elts = array([5, 6, 7, 8, 9])

# Convert idx(or elts) to a list
idx = list(idx)
#idx = [4, 5, 6, 7, 8] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-05T06:25:00.917

使用过滤器内置功能很好

```
>>>a = [1, 2, 3, 4, 5, 6, 7, 8, 9]
>>>filter(lambda x : x < 4, a)
[1, 2, 3] 
```

**解释**

过滤器（有趣，可迭代）

此表达式将迭代 Iterable 中的所有元素并提供给 FUN 函数作为参数，如果 return 为 True ，则参数将附加到内部列表

λx：x > 4

这意味着一个匿名函数，它将接受一个参数并测试它是否大于 4，并返回 True of False 值

**您的解决方案**

如果您尝试删除所有大于 4 的元素，然后尝试打击

```
>>> a = [1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> filter(lambda x: x<4 ,a)
[1, 2, 3] 
```

# javascript - 在javascript中比较字符串和数组元素

> ID：13717468
> 
> 赞同：-4
> 
> 时间：2012-12-05T06:22:05.230
> 
> 标签：javascript, arrays, string, function, search

我正在尝试制作一个代码，该代码将从列表中选择一个随机图像并要求用户尝试识别它。到目前为止，我可以生成图像，但在尝试将字符串与数组元素进行比较时遇到了麻烦。

```
var imageArray=new Array()
myImages[1]="image1.jpg"
myImages[2]="image2.jpg"
myImages[3]="image3.jpg"

var randNum=Math.floor(Math.random()*imageArray.length);

function pickImg()
{
if {randNum==0)
{
randNum=1;
}
document.write('<img src="'+imageArray[randNum]+'" border=0>');
}

pickImg()

function checkAns()
{
var str = imageArray[randNum];
var n = str.search('textBox');
if(n = -1)
{
alert{"Wrong Answer")
}
Else
{
alert("Right Answer")
}
} 
```

当谈到第二个函数并比较两个字符串时，我不知所措。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T06:25:55.357

假设您的输入有 ID `textBox`，您应该使用：

```
var check = str.indexOf(document.getElementById('textBox').value);
if(check == -1)
{
... 
```

*   `search`期望正则表达式对象作为参数，而不是字符串
*   `=`运算符*分配*值，而运算`==`符*比较*值
*   JS 区分大小写：您正在寻找`else`，而不是`Else`
*   缩进对于可维护的代码非常重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:25:02.117

你的代码有错误

```
if(n = -1)//Assigns -1 as the value of 'n'(Used assignment operator here)
{
   alert{"Wrong Answer")
}
Else
{
   alert("Right Answer")
} 
```

尝试将代码更改为

```
if(n == -1)//Checking whether the value of 'n' is -1 or not(comparison)
{
    alert("Wrong Answer")
}
else
{
   alert("Right Answer")
} 
```

# android-emulator - OpenGL ES 2.0 对 Android 的支持？

> ID：13717470
> 
> 赞同：15
> 
> 时间：2012-12-05T06:22:12.300
> 
> 标签：android-emulator, opengl-es-2.0

Android 模拟器是否支持 OpenGL ES 2.0？我看到有些人说“是的，但你必须更改一些设置。” 我也看过“不，它不支持它，句号。” 这是我为尝试纠正问题所做的工作，包括我收到的一些错误消息。

首先，我修改了 AndroidManifest.xml 以包含以下代码：

```
<uses-feature 
    android:glEsVersion="0x00020000" />

<uses-sdk
    android:minSdkVersion="15"
    android:targetSdkVersion="17" /> 
```

然后，当我想实例化我的 GLSurfaceView 时，我使用以下代码序列来实例化它：

```
super(context);

setEGLContextClientVersion(2);

setRenderer(new MyRenderer());
setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY); 
```

然后，我到处都说你必须进入 AVD 管理器，选择模拟器，进入“硬件”，添加“GPU 仿真”并将布尔值设置为“是”。然而，当我看到我的时候，这是我看到的：

![我的 Android 4.2 模拟器窗口的屏幕截图。](../Images/a94e7aca0b9aa8890661bc5147e1abcd.png)

奇怪的是，我的 AVD 管理器中有另一个模拟器，其中有“硬件”表：

![我的 Android 2.2 模拟器有什么硬件表？](../Images/723f61f857bec5224d3e4e28ba498f40.png)

只是为了向您展示我在做什么，这里有一些代码可以做一些我想在 OpenGL ES 2.0 中做的事情（我主要是从 Android 自己的教程中得到的）：

```
int vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
int fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

program = GLES20.glCreateProgram();
GLES20.glAttachShader(program, vertexShader);
GLES20.glAttachShader(program, fragmentShader);
GLES20.glLinkProgram(program); 
```

我不想将我的代码改回使用 OpenGL ES 1.0，因为这将需要很多麻烦，如果我能避免它，我会的。

最后，当我尝试运行我的程序时，程序关闭并显示以下窗口：“不幸的是，已停止。” 这是 LogCat 告诉我的：

```
12-05 06:16:27.165: E/AndroidRuntime(936): FATAL EXCEPTION: GLThread 81
12-05 06:16:27.165: E/AndroidRuntime(936): java.lang.IllegalArgumentException: No config chosen
12-05 06:16:27.165: E/AndroidRuntime(936):  at    android.opengl.GLSurfaceView$BaseConfigChooser.chooseConfig(GLSurfaceView.java:874)
12-05 06:16:27.165: E/AndroidRuntime(936):  at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:1024)
12-05 06:16:27.165: E/AndroidRuntime(936):  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1401)
12-05 06:16:27.165: E/AndroidRuntime(936):  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-05T13:20:24.343

我可以对你的问题说是。Android 模拟器支持 OpenGL ES 2.0。我用 cocos2d-x v.2（它使用 OpenGL ES 2.0）创建了一个应用程序。我有同样的 FATAL EXCEPTION: GLThread 81 error with same stack。我通过添加解决了这个问题

```
gLSurfaceView.setEGLConfigChooser(8 , 8, 8, 8, 16, 0); 
```

在设置渲染器 setRenderer 之前：

```
gLSurfaceView.setCocos2dxRenderer(new Cocos2dxRenderer()); 
```

现在我可以在 Android 模拟器上运行我的应用程序了。

[在https://stackoverflow.com/a/13719983/307547](https://stackoverflow.com/a/13719983/307547)上查看我的问题和答案 。我在此链接上的帖子包含带有 AVD 设置的屏幕截图：

[http://www.cocos2d-x.org/boards/6/topics/12563?r=19274#message-19274](http://www.cocos2d-x.org/boards/6/topics/12563?r=19274#message-19274)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-09T17:10:03.973

我刚刚解决了这个问题，没有在我的源代码中添加任何新行。在 avd-manager 中，我为我的模拟器设备设置了“使用主机 GPU”。现在可以在我的 Geforce GTX 570 上完美运行。

模拟器设备上的 API Level 为 16，Manifest 中的 min-SDK 为 15。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-24T10:13:07.837

遇到了同样的问题。原始越野车代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d(this.getClass().getName(), "Into onCreate Draw triangle");
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,  WindowManager.LayoutParams.FLAG_FULLSCREEN);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    if (detectOpenGLES20()){
        Log.d("GLES20", "GL ES 2.0 Supported..............!");
    } else {
        Log.d("GLES20", "GL ES 2.0 Not Supported...............!");
    }

    view = new GLSurfaceView(this);
    view.setEGLContextClientVersion(2);
    view.setEGLConfigChooser(true);
    view.setRenderer(new TriangleRenderer(view));
    setContentView(view);
} 
```

**解决者：**

a。）替换此代码行

```
view.setEGLConfigChooser(true); 
```

和

```
view.setEGLConfigChooser(8, 8, 8, 8, 16, 0); 
```

b.)`-gpu on`通过 Eclipse 设置 --> 运行方式 ---> 目标 ---> 附加仿真器命令行选项

*在上面的讨论中再​​补充一点：*
在使用上面的代码时，我遇到了两个不同的异常消息

> 致命异常：GLThread 75 java.lang.IllegalArgumentException：没有配置匹配 configSpec

和

> java.lang.IllegalArgumentException：未选择配置

更详细的案例研究在[http://on-android-opengl2.blogspot.in/2013/05/android-opengl-es-20-emulator.html](http://on-android-opengl2.blogspot.in/2013/05/android-opengl-es-20-emulator.html)

# java - 为什么 HttpHead 返回的时间比 HttpGet 长

> ID：13717473
> 
> 赞同：1
> 
> 时间：2012-12-05T06:22:20.183
> 
> 标签：java, httpclient, httpresponse

我们有以下代码，稍后将其替换为 HttpHead 方法，因为我们只需要拉回网页的标题信息。更改后，我们注意到，对于相同的网页集，平均而言，HttpHead 的返回时间比 HttpGet 的返回时间要长。正常吗？这里有什么问题？

```
 HttpClient httpclient = new DefaultHttpClient();
    // the time it takes to open TCP connection.
    httpclient.getParams().setParameter(CoreConnectionPNames.CONNECTION_TIMEOUT, this.timeout);

    // timeout when server does not send data.
    httpclient.getParams().setParameter(CoreConnectionPNames.SO_TIMEOUT, this.timeout);

    // the get method
    HttpGet httpget = new HttpGet(url);

    HttpResponse response = httpclient.execute(httphead); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:50:10.420

> 正常吗？

这当然看起来有点奇怪。

> 这里有什么问题？

很难说。看起来奇怪的行为很*可能发生*在服务器端。我会检查以下内容：

*   编写一个重复 GET 和 HEAD 相同页面的微基准，以确保性能差异是真实的，而不是您测量它的方式的人工制品。
*   使用数据包记录器查看实际发送和接收的内容。
*   检查服务器日志。
*   使用您的微基准分析负载下的服务器代码。

* * *

一种可能的解释是 HEAD 正在从（慢）数据库或文件系统加载数据。因为数据已经被缓存，所以下面的 GET 可能会更快。（它可能是服务器代码中的显式缓存、后端数据库中的查询缓存或文件系统缓存。）您可以通过查看 GET 如果*没有*HEAD 之前是否更慢来测试这一点。

# java - 如何限制使用手机的基本功能，没有人可以卸载我的应用程序，完全锁定？

> ID：13717474
> 
> 赞同：0
> 
> 时间：2012-12-05T06:22:23.583
> 
> 标签：java, android, android-ndk

最近我的雇主要求我构建一个应用程序，该应用程序将部署在现场（用于现场工作人员），具有以下功能： - 当手机启动时，应用程序应自动启动，并且没有人能够使用其他手机的功能比如打电话、发短信等。

此外，该应用程序应该是这样的，它不能被卸载。想象一下对手机功能的完全限制访问，除了我的应用程序；完全锁定的情况？

那么，我该怎么做呢？我是否需要构建一个加载了我的应用程序的全新自定义 ROM？还是我必须利用应用程序的“权限”来锁定系统？哪个更好？

我应该从哪里开始？我的应用程序必须使用 SQLite、GPS、Wifi/2G/3G 网络和摄像头访问。

任何意见，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:29:14.057

你可以创建一个应用程序来监听`Activity starting`事件。当你抓住这个事件时，你可以开始你自己的活动。此活动将提供卸载活动。捕捉事件 - 使用 logcat 阅读

或者

如果您要启动自己的 android 手机，请将您的应用程序放在 android 源中，就像其他本机应用程序（如 Myfiles、Gallery）一样。和

> 修改源，以便`Settings --> Manage Applications`您的应用程序没有条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:28:12.530

首先我应该说这样一个可怕的计划

你不能阻止系统卸载你的应用程序。根据客户的要求，您只能做一件事。即在手机启动时使用 BOOT_COMPLETED 意图过滤器启动应用程序

# c# - 如何在 asp.net 中获取客户端当前日期和时间？

> ID：13717479
> 
> 赞同：2
> 
> 时间：2012-12-05T06:23:30.510
> 
> 标签：c#, asp.net, jquery

我的母版页中有一个隐藏字段。我使用 Javascript 将当前日期和时间设置为该“隐藏字段”中的值。我无法在任何其他页面的页面加载方法中获取此隐藏字段值。

这是我的代码。

```
HiddenField hdnCurrentDate = (HiddenField)this.Master.FindControl("hdnCurrentDate");
                ClientScript.RegisterClientScriptBlock(this.GetType(), "Message", "var CurrentDate = new Date(); $('#" + hdnCurrentDate.ClientID + "').val(CurrentDate);alert($('#ctl00_hdnCurrentDate').val());", true); 
```

我在母版页中定义了 Hiddenfield，例如

```
<asp:HiddenField ID="hdnCurrentDate" runat="server" /> 
```

我收到“hdnCurrentDate”未定义的警报。这是因为我在页面加载中以非回发方法编写了代码。

这是我实施的另一种方式。

我在后面的代码中使用了 ConvertTimeBySystemTimeZoneId。这是相同的代码。

```
DateTime ClientDateTime = DateTime.Now;
        DateTime _localTime = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(ClientDateTime, "Arab Standard Time");
        return _localTime; 
```

我没有得到目的地时区 ID 而不是“阿拉伯标准时间”。如果我能得到它，我的问题就会得到解决。

有没有其他方法可以在我的任何页面中获取当前日期时间。我不想使用 Session 和 cookie。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-01T10:57:27.997

下面是获取客户端当前日期时间的 javascript 函数：

```
<script type="text/javascript">
function GetDate(date) {
    CurTime = new Date(date);
    var offset = (new Date().getTimezoneOffset() / 60) * (-1);
    var utc = CurTime.getTime() + (offset * 60000 * (-1));
    var serverDate = new Date(utc + (3600000 * offset));
    var dateString = (serverDate.getMonth() + 1) + "/" + serverDate.getDate() + "/" +     
serverDate.getFullYear() + " " + serverDate.toLocaleTimeString("en-US", { hour12: true });
}
</script> 
```

您还可以从后面的代码中获取 OffSet Time，如下所示：

```
public static TimeSpan GetOffSetTime(string date)
    {
        DateTime d = Convert.ToDateTime(date);
        TimeZone zone = TimeZone.CurrentTimeZone;
        TimeSpan local = zone.GetUtcOffset(d);
        return local;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-26T06:16:38.383

我通过使用以下方式做到了这一点：

1.  我已经`HiddenField`进入了它需要的上一页：

    ```
    <asp:HiddenField ID="hdnTimeOffset" ClientIDMode="Static" runat="server" 
     Value="" /> 
    ```

2.  然后，我通过以下方式获取浏览器时区：

    ```
    $(document).ready(function () {
         var offset = new Date().getTimezoneOffset();
         $('#hdnTimeOffset').val(offset);

     }); 
    ```

3.  `Session`在重定向到下一页之前，我将时区放入上一页的变量中，例如单击按钮：

    ```
    protected void btn_Click(object sender, EventArgs e)
    {
        Session["TimeOffset"] = hdnTimeOffset.Value;
        Response.Redirect("~/Root/abc.aspx");
    } 
    ```

4.  在主页中，我使用以下代码获取当前时间：

    ```
    DateTime dtmCurrentDateTime = DateTime.Now.ToUniversalTime();
    double dblMinutes =Convert.ToDouble(Session["TimeOffset"].ToString());                
    dtmCurrentDateTime = dtmCurrentDateTime.AddMinutes(-dblMinutes); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:53:42.860

**母版页**

设置服务器时间

```
<asp:hiddenfield runat="server" id="HiddenField1"></asp:hiddenfield>

protected void Page_Load(object sender, EventArgs e)
{
    HiddenField1.Value = DateTime.Now.ToString();
} 
```

设置客户端机器时间

```
 <script type="text/javascript">
        function setvalue() {
            document.getElementById('HiddenField1').value = new Date();
        }
    </script>
   <body onload="setvalue();">
    <form id="form1" runat="server">
    <div>
        <asp:HiddenField ID="HiddenField1" runat="server"/>
    </div>
    </form>
    </body> 
```

**内容页**

```
HiddenField hdnvalue = this.Master.Master.FindControl("HiddenField1") as HiddenField;
string currenttime=hdnvalue.Value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T03:53:40.423

[来自此链接](http://forums.asp.net/p/1247758/2303034.aspx)的修改代码：

```
<script type="text/javascript">
function getDateTime()
{
    var localTime = new Date();
    var year= localTime.getYear();
    var month= localTime.getMonth() +1;
    var date = localTime.getDate();
    var hours = localTime .getHours();
    var minutes = localTime .getMinutes();
    var seconds = localTime .getSeconds();    
    //at this point you can do with your results whatever you please
}
</script> 
```

此时，我会将所有字段连接在一起并将它们放在 asp:HiddenField 控件中，以便可以在服务器上读取它们。在服务器上，对 HiddenField 的 Text 值调用 Convert.ToDateTime()。

如果你不使用母版页，你应该试试这个。

```
HiddenField hdnFieldValue = (HiddenField)PreviousPage.FindControl("hdnField"); 
```

**更新：**

在页面上放置一个隐藏字段。

```
<asp:HiddenField ID="hidChild" runat="server"/> 
```

在你的 javascript 函数中

```
 var childHidden = document.getElementById('<%hidChild.ClientID%>');
 childHidden.value = window.opener.document.getElementById('text1').value; 
```

现在在页面加载事件上访问这个隐藏控件。

```
Response.Write(hidChild.Value); or Session["ParentVal"]=hidChild.Value; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T06:31:50.390

*'有没有其他方法可以在我的任何页面中获取当前日期时间。我不想使用 Session 和 cookie。* **在这种情况下**，您可以使用 JavaScript

此外，您不需要使用`RegisterStartupScript`. 您可以在事件中调用该`GetDate()`函数。`onLoad`

```
<script type="text/javascript">

    window.onload = function(){
        getDate();
    };

    function GetDate() 
    {
        var dt = new Date();
        var element = document.getElementById("MainContent_FormView1_Label1");

        element.text = dt.toDateString();
    }
</script> 
```

但是，您可能希望阅读[此 SO 线程](https://stackoverflow.com/questions/559150/best-practice-for-using-window-onload)以了解使用的最佳实践`window.onload`，或考虑使用[jQuery](http://jquery.com/)及其[`document.ready`](http://api.jquery.com/ready/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-15T09:24:27.000

如果您使用的是 ASP.Net MVC，请使用以下代码

创建一个类“GetTime”。在本课程中，您将找到“埃及标准时间”，您可以从[此处的列表中选择您的标准时区](https://stackoverflow.com/questions/7908343/list-of-timezone-ids-for-use-with-findtimezonebyid-in-c)

```
public class GetTime{
        public static DateTime GetCurrentTime()
        {
            DateTime serverTime = DateTime.Now;
            DateTime _localTime = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(serverTime, TimeZoneInfo.Local.Id, "Egypt Standard Time");
            return _localTime;
        }
    } 
```

并在 Global.asax 中添加“Application_Start()”中的行

```
GetTime.GetCurrentTime(); 
```

然后，当您需要时间时，您可以像这样编写代码

```
var localTime = GetTime.GetCurrentTime();
var mytimeVarialbe = localTime.Hour; 
```

并且不要忘记导入课程

```
 using yourproject.Folderthatcontainclass 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-13T03:37:03.077

如何使用 C# 中的 CultureInfo 来获取它？

> 字符串 currentFormat = CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern;

这将在客户端返回“dd/MM/yy”或“dd/M/YYY”任何格式

# java - 设置自定义字体

> ID：13717481
> 
> 赞同：4
> 
> 时间：2012-12-05T06:23:39.963
> 
> 标签：java, swing, fonts, truetype

我正在尝试在我的程序中将自定义字体（bilboregular.ttf）设置为 2 个 jLabels 但字体未成功加载。

以下是主要方法调用：

```
//this should work if the build is in a jar file, otherwise it'll try to load it directly from the file path (i'm running in netbeans)
if (!setFonts("resources/bilboregular.ttf")) {
        System.out.println("=================FAILED FIRST OPTION"); // <<<<<<<< This is being displayed
if(!setFonts(System.getProperty("user.dir")+"/src/resources/bilboregular.ttf")){
            System.out.println("=================FAILED SECOND OPTION"); // <<< This is not being displayed
        }
    } 
```

这是另一种方法：

```
public boolean setFonts(String s) {
    try {
jLabel3.setFont(java.awt.Font.createFont(java.awt.Font.TRUETYPE_FONT, new java.io.File(s)));
jLabel4.setFont(java.awt.Font.createFont(java.awt.Font.TRUETYPE_FONT, new java.io.File(s)));
        return true;
    } catch (Exception ex) {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T07:15:51.470

首先获得`URL`一个`Font`。然后做这样的事情。

'Airacobra Condensed' 字体可从[下载免费字体](http://www.webpagepublicity.com/free-fonts.html)获得。

![注册字体](../Images/03783e3b304d85575780e28388d092cf.png)

```
import java.awt.*;
import javax.swing.*;
import java.net.URL;

class LoadFont {
    public static void main(String[] args) throws Exception {
        // This font is < 35Kb.
        URL fontUrl = new URL("http://www.webpagepublicity.com/" +
            "free-fonts/a/Airacobra%20Condensed.ttf");
        Font font = Font.createFont(Font.TRUETYPE_FONT, fontUrl.openStream());
        GraphicsEnvironment ge = 
            GraphicsEnvironment.getLocalGraphicsEnvironment();
        ge.registerFont(font);
        JList fonts = new JList( ge.getAvailableFontFamilyNames() );
        JOptionPane.showMessageDialog(null, new JScrollPane(fonts));
    }
} 
```

* * *

好的，这很有趣，但是这个字体实际上是什么样子的？

![显示字体](../Images/4a06a0e6bd0c8d15de3258260c95719e.png)

```
import java.awt.*;
import javax.swing.*;
import java.net.URL;

class DisplayFont {
    public static void main(String[] args) throws Exception {
        URL fontUrl = new URL("http://www.webpagepublicity.com/" +
            "free-fonts/a/Airacobra%20Condensed.ttf");
        Font font = Font.createFont(Font.TRUETYPE_FONT, fontUrl.openStream());
        font = font.deriveFont(Font.PLAIN,20);
        GraphicsEnvironment ge =
            GraphicsEnvironment.getLocalGraphicsEnvironment();
        ge.registerFont(font);

        JLabel l = new JLabel(
            "The quick brown fox jumped over the lazy dog. 0123456789");
        l.setFont(font);
        JOptionPane.showMessageDialog(null, l);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T06:37:09.240

*   不要重复加载新的`Font`，对于每个`JLabel`单独

方法

```
public boolean setFonts(String s) {
    try {
jLabel3.setFont(java.awt.Font.createFont(java.awt.Font.TRUETYPE_FONT, new java.io.File(s)));
jLabel4.setFont(java.awt.Font.createFont(java.awt.Font.TRUETYPE_FONT, new java.io.File(s)));
        return true;
    } catch (Exception ex) {
        return false;
    }
} 
```

*   创建一个`Font`（s）作为`Local variable`（s）并仅更改`jLabel3.setFont(myFont)`，或注册一个新字体（[参见@StanislavLs评论的链接](https://stackoverflow.com/questions/5652344/how-can-i-use-a-custom-font-in-java)）

例如

```
InputStream myFont = OptionsValues.class.getResourceAsStream(
     "resources/bilboregular.ttf"); 
```

# iphone - 此应用需要 iOS 6

> ID：13717482
> 
> 赞同：1
> 
> 时间：2012-12-05T06:23:42.663
> 
> 标签：iphone, xcode, ios5, ios6, xcode4.5

最近 app-store 成功批准了我的 iOS 应用程序。我的应用是 cocos2dbox2d 应用

申请详情：

1.  发展目标是4.3

2.  Xcode 4.5

3.  通用应用

4.  添加了 Default-568h@2x.png

5.  基础 SDK - iOS6.0

6.  有效架构 - armv7

7.  仅构建活动架构 - 否

这是我的应用程序构建设置。好的，现在我正在尝试在 iOS5.1 ipad 中安装我的应用程序。它显示警报消息，消息是这个应用程序需要 iOS6。

为什么会发生？谁来帮帮我...

感谢提前...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:42:37.377

检查项目设置和目标设置，iOS 部署目标相同，因为目标覆盖项目设置，这意味着如果您在项目设置中将部署目标设置为 5.1，而在目标设置中选择 6.0，然后项目设置进行部署不使用目标，而是 Xcode 使用目标的设置

# objective-c - 子类化 UIActivityIndi cator 以更改图像

> ID：13717483
> 
> 赞同：0
> 
> 时间：2012-12-05T06:23:47.640
> 
> 标签：objective-c, xcode4.5

这就是我所做的：

```
@implementation BGUIActivityIndicator

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    [self customInitialize];
    return self;
}

-(id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    [self customInitialize];
    return self;
}

-(void)customInitialize
{
    UIView * theImageView= [self findASubViewforClass:[UIImageView class]];//
    UIImageView * theImageView1 = (UIImageView *) theImageView;
    theImageView1.image = [UIImage imageNamed:@"spinner_blue"];
    [theImageView1.image saveScreenshot];
    while (false) ;
}
/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end 
```

一切似乎都很完美。[theImageView1.image saveScreenshot]; 完美地记下旧视图和新视图。

然而，什么都没有改变。为什么？

我并不是在问如何更改 UIActivityIndi​​cator 的图像。已经有很多了。我想通过继承 UIActivityIndi​​cator 来使用它，因为我认为它是最优雅的解决方案。我似乎不能这样做。

特别是，我在问为什么我的方法（例如，用于更改搜索控制器的背景）不适用于此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:27:40.850

根据[UIActivityIndi​​catorView Class Reference](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityIndicatorView_Class/Reference/UIActivityIndicatorView.html)，没有办法/机会通过子类化来改变图像。

但是你可以改变它**的 activityIndi​​catorViewStyle ，活动指示器的颜色，UIActivityIndi​​catorStyle 等等。**

我认为，在没有子类化的情况下，类**UIImageView**提供了一种非常有用且简单的方法来实现这样的事情。您唯一需要做的就是：

> ```
> 1.Provide a number of images that reflect your indicator animation.
> 2.Create a new UIImageView instance and set images and animation duration.
> 3.Position your custom activity indicator within your current view. 
> ```

**示例代码：**

```
//Create the first status image and the indicator view
UIImage *statusImage = [UIImage imageNamed:@"status1.png"];
UIImageView *activityImageView = [[UIImageView alloc] 
                initWithImage:statusImage];

//Add more images which will be used for the animation
activityImageView.animationImages = [NSArray arrayWithObjects:
            [UIImage imageNamed:@"status1.png"],
            [UIImage imageNamed:@"status2.png"],
            [UIImage imageNamed:@"status3.png"],
            [UIImage imageNamed:@"status4.png"],
            [UIImage imageNamed:@"status5.png"],
            [UIImage imageNamed:@"status6.png"],
            [UIImage imageNamed:@"status7.png"],
            [UIImage imageNamed:@"status8.png"],
            nil];

//Set the duration of the animation (play with it
//until it looks nice for you)
activityImageView.animationDuration = 0.8;

//Position the activity image view somewhere in 
//the middle of your current view
activityImageView.frame = CGRectMake(
            self.view.frame.size.width/2
                -statusImage.size.width/2, 
            self.view.frame.size.height/2
                -statusImage.size.height/2, 
            statusImage.size.width, 
            statusImage.size.height);

//Start the animation
[activityImageView startAnimating];

//Add your custom activity indicator to your current view
[self.view addSubview:activityImageView]; 
```

[**在此处**](http://blog.blackwhale.at/?p=336)查看完整的详细信息[](http://blog.blackwhale.at/?p=336)

# c# - 在 wp8 上使用 MarketplaceDetailTask

> ID：13717484
> 
> 赞同：1
> 
> 时间：2012-12-05T06:23:51.553
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, windows-phone-8, windows-phone-7.1.1

我在 WP7 上使用 MarketplaceDetailTask​​ 已经有一段时间了，它曾经运行良好。使用 MarketplaceDetailTask​​，我的应用程序将用户重定向到市场，用户可以从那里安装目标应用程序。

现在在 WP8 上，使用相同的 MarketplaceDetailTask​​，我可以将用户重定向到市场，但无法安装应用程序，并且错误消息是“此应用程序不适用于您的设备”，当我点击此消息时，会出现一个消息框并说“这可能是因为您的手机软件需要更新，该应用程序是不同移动提供商专有的，或者您所在国家\地区没有应用程序"

但是可以从市场安装相同的应用程序，使用我在程序中使用的相同 url 从 IE 导航。

有人能帮我吗？谢谢你。

ps 在你结束之前，请注意，“但是可以从市场安装相同的应用程序，使用相同的 url 从 IE 导航，我在我的程序中使用过。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:40:14.720

`WebBrowser`一个快速的解决方法是使用控件来模拟用户操作，而不是使用`MarketplaceDetailTask`API。

# c# - 相同类型的多个框架Windows 8 c#

> ID：13717488
> 
> 赞同：1
> 
> 时间：2012-12-05T06:24:06.827
> 
> 标签：c#, windows-8, winrt-xaml, windows-store-apps

我有一个适用于 Windows 8 的应用程序，其中包含一个用于显示项目列表的页面（框架）和一个用于下载和显示项目详细信息的页面。我也在使用 MVVM Light 发送通知。

应用程序的使用是这样的：

1.  打开主页

2.  导航到列表页面

    ```
    Frame.Navigate(typeof(MyPage)); 
    ```

3.  选择项目

    ```
    //Complete logic
    Frame.GoBack(); 
    ```

4.  回到主页，我开始在视图模型中下载文件，我发送**ONE** NotificationMessage 说 BeginDownloadFile，下载后**ONE** NotificationMessage 说 EndDownloadFile。

我第一次执行步骤 2,3 和 4 时，我的 NotificationReceived 方法被击中一次，第二次被击中两次，依此类推。

```
private async void NotificationMessageReceived(NotificationMessage msg)
{
    if (msg.Notification == Notifications.BeginDownloadFile)
    {
       FileDownloadPopup.IsOpen = true;
    }
    else if (msg.Notification == Notifications.EndDownloadFile)
    {
       FileDownloadPopup.IsOpen = false;
    }
} 
```

附加信息：我只有一个 FileDownloadPopup，但每次调用 NotificationMessageReceived 方法时都会显示一个附加弹出窗口。

我唯一的结论是，在我的应用程序中向前和向后导航之间，有多个 MainPages 被创建并且从未关闭。这导致许多 NotificationsMessageReceived 方法只是等待通知出现，以便他们可以显示他们的弹出窗口。

我有两个问题： 1\. 这听起来像是 Windows 8 应用程序的正常行为吗？2、如何关闭MainPage的所有实例或返回上一个实例而不创建新实例？

**在标记我的问题之前，请让我知道我是否错过了一些重要的事情。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T06:31:44.743

这对我来说听起来很正常。Windows 8 中的默认导航行为是在每次导航到新页面时创建一个新页面实例，无论这是向前导航还是向后导航。

尝试将`NavigatinCacheMode`on设置`MainPage`为`Required`. [有关页面缓存如何工作的详细信息，](http://msdn.microsoft.com/en-us/library/system.windows.controls.page.navigationcachemode%28v=vs.95%29.aspx)请参阅MSDN 文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T08:54:00.057

听起来您正在页面中注册事件处理程序，然后不删除它们。每次您再次导航到该页面时，除了您之前添加的处理程序之外，还会再次添加处理程序。尝试在 OnNavigatedTo 中添加您的事件处理程序，并确保在 OnNavigatedFrom 中取消注册它。

```
protected override void OnNavigatedTo(Windows.UI.Xaml.Navigation.NavigationEventArgs e)
{
    MyEvent.OnDownloadRequest += MyLocalDOwnloadHandler;  // add the handler
}

protected override void OnNavigatedFrom(Windows.UI.Xaml.Navigation.NavigationEventArgs e)
{
    MyEvent.OnDownloadRequest -= MyLocalDOwnloadHandler;  // remove the handler
} 
```

# android - 蓝牙接收器在 Android 中不起作用

> ID：13717489
> 
> 赞同：0
> 
> 时间：2012-12-05T06:24:07.377
> 
> 标签：android, bluetooth

我正在使用 Android 应用程序从硬件蓝牙设备接收蓝牙数据。我已经看过堆栈的所有帖子，并且还使用示例应用程序来设计我的代码。问题是，我的“蓝牙接收器”不工作，每当我从硬件设备发送数据时，它第一次工作但恰好第二次它总是无法接收数据通知。

```
public class BluetoothDataReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {

ConfigClass.bluetoothDataReceive++;
if (ConfigClass.bluetoothDataReceive == 1) {
ConfigClass.showToast(context,
ConfigClass.MSG_RECEIVE_BLUETOOTH_DATA);

}else if (ConfigClass.bluetoothDataReceive ==2) {
ConfigClass.bluetoothDataReceive = 0;

}
}
} 
```

请帮帮我....我长期以来一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:41:43.210

BroadcastReceiver.onReceive() 在与您的 UI 不同的线程中运行。UI 不是线程安全的。在其中执行 Toast() 是一个坏主意，据说会导致意想不到的结果......

# intersection - 上下文无关语言未在交叉点下关闭

> ID：13717491
> 
> 赞同：0
> 
> 时间：2012-12-05T06:24:17.470
> 
> 标签：intersection, computation, context-free-language

我在维基百科上找到了这个解决方案。不应该说：j>n≥0 因为交集是两种语言中共有的元素。

> 考虑由 L1={a^(n)b^(n)c^(j)| 定义的语言 L1 和 L2 n,j ≥ 0} 和 L2 = {a^(j)b^(n)c^(n): n,j ≥ 0}。它们都是上下文无关的。但是，它们的交集是语言 L = {a^(n)b^(n)c^(n)| n≥0}。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:46:30.527

不，不应该。j和n之间没有关系。在 L1 中，唯一的条件是 a 和 b 的数量相等。c的数量是多还是少并不重要。同样在 L2 中，b 和 c 的数量相等。a 的数量是多还是少（比 b 和 c 的数量）并不重要。然而，交叉点将具有同时落在 L1 和 L2 中的那些字符串，即（a 和 b 的数量相等）AND（b 和 c 的数量相等），这意味着 a、b 和 c 的数量相等。

# android - API 10 中的 Notifications.Builder

> ID：13717492
> 
> 赞同：3
> 
> 时间：2012-12-05T06:24:22.740
> 
> 标签：android, notifications

```
Notification.Builder builder = new Notification.Builder(this);

builder.setContentIntent(contentIntent)
    .setSmallIcon(R.drawable.ic_launcher)
    .setTicker(notificationMessage)
    .setWhen(System.currentTimeMillis())
    .setAutoCancel(true)
    .setContentTitle(newNotificationsCount + " New Notifications")
    .setContentText(notificationMessage);

Notification notification = builder.getNotification();
nm.notify(R.string.app_name, notification); 
```

这给出了错误：

**调用需要 API 级别 11（当前最低为 10）：android.app.Notification$Builder#setContentIntent**

我下载了**android.support.v4.jar将其添加到与****src**和**res**等目录相同的 libs 文件夹中。

从项目资源管理器中右键单击此 jar 并添加到构建路径。

我的应用程序有一个**min api = 10**和**target api = 15**

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-05T06:26:56.880

Notification 的支持类似乎有一个不同的名称，[`NotificationCompat`](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html). 对于您的 API 10 代码，您需要使用：

```
NotificationCompat.Builder builder = new NotificationCompat.Builder(this); 
```

并将您的导入语句更改为：

```
import android.support.v4.app.NotificationCompat.Builder; 
```

# algorithm - 手动编写线性编程练习

> ID：13717498
> 
> 赞同：7
> 
> 时间：2012-12-05T06:24:46.383
> 
> 标签：algorithm, language-agnostic, pseudocode, linear-programming

我一直在课堂上通过绘制线性规划问题来解决它们，但我想知道如何为特定问题编写程序来为我解决它。如果变量或约束太多，我永远无法通过绘图来做到这一点。

示例问题，在约束条件下最大化 5x + 3y：

*   5x - 2y >= 0
*   x + y <= 7
*   x <= 5
*   x >= 0
*   y >= 0

我绘制了这个图，得到了一个有 3 个角的可见区域。x=5 y=2 是最佳点。

我如何把它变成代码？我知道单纯形法。并且非常重要的是，所有 LP 问题都会被编码在同一个结构中吗？蛮力会起作用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T02:10:59.250

如果您搜索，您会发现相当多的 Simplex 实现。

除了评论中提到的（C 中的数字食谱），您还可以找到：

1.  [Google 自己的 Simplex-Solver](http://google-opensource.blogspot.com/2009/06/introducing-apache-commons-math.html)
2.  然后是[硬币或](http://www.coin-or.org/)
3.  GNU 有自己的[GLPK](http://www.gnu.org/software/glpk/)
4.  如果你想要一个 C++ 实现，[Google Code](http://code.google.com/p/cpplex/)中的这个实际上是可以访问的。
5.  R 中有许多实现，包括[引导包](http://stat.ethz.ch/R-manual/R-patched/library/boot/html/simplex.html)。（在 R 中，您可以通过键入不带括号的函数来查看函数的实现。）

要解决您的其他两个问题：

1.  **所有 LP 的编码方式都相同吗？**是的，可以编写一个通用的 LP 求解器来加载和求解任何 LP。（有读取 LP 之类的行业标准格式`mps`和`.lp`

2.  **蛮力会起作用吗？**请记住，许多公司和大型组织花费很长时间来微调求解器。有些 LP 具有许多求解器会尝试利用的有趣特性。此外，某些计算可以并行解决。该算法是指数的，因此在大量变量/约束下，蛮力将不起作用。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T23:35:15.433

我昨天写的是 matlab，如果你使用 Eigen 库或使用 std::vector 的 std::vector 编写自己的矩阵类，它可以很容易地转录为 C++

```
function [x, fval] = mySimplex(fun, A, B, lb, up)

%Examples paramters to show that the function actually works 

% sample set 1 (works for this data set)

% fun = [8 10 7];
% A = [1 3 2; 1 5 1];
% B = [10; 8];
% lb = [0; 0; 0];
% ub = [inf; inf; inf];

% sample set 2 (works for this data set)

fun = [7 8 10];
A = [2 3 2; 1 1 2];
B = [1000; 800];
lb = [0; 0; 0];
ub = [inf; inf; inf];

% generate a new slack variable for every row of A 

numSlackVars = size(A,1); % need a new slack variables for every row of A 

% Set up tableau to store algorithm data 
tableau = [A; -fun];

tableau = [tableau, eye(numSlackVars + 1)];

lastCol = [B;0];

tableau = [tableau, lastCol];

% for convienience sake, assign the following: 

numRows = size(tableau,1);
numCols = size(tableau,2);

% do simplex algorithm 

% step 0: find num of negative entries in bottom row of tableau 

numNeg = 0; % the number of negative entries in bottom row

for i=1:numCols 
    if(tableau(numRows,i) < 0)
        numNeg = numNeg + 1;
    end
end

% Remark: the number of negatives is exactly the number of iterations needed in the
% simplex algorithm 

for iterations = 1:numNeg 
    % step 1: find minimum value in last row 
    minVal = 10000; % some big number 
    minCol = 1; % start by assuming min value is the first element 
    for i=1:numCols
        if(tableau(numRows, i) < minVal)
            minVal = tableau(size(tableau,1), i);
            minCol = i; % update the index corresponding to the min element 
        end
    end 

    % step 2: Find corresponding ratio vector in pivot column 
    vectorRatio = zeros(numRows -1, 1);
    for i=1:(numRows-1) % the size of ratio vector is numCols - 1
        vectorRatio(i, 1) = tableau(i, numCols) ./ tableau(i, minCol);
    end 

    % step 3: Determine pivot element by finding minimum element in vector
    % ratio

    minVal = 10000; % some big number 
    minRatio = 1; % holds the element with the minimum ratio 

    for i=1:numRows-1
        if(vectorRatio(i,1) < minVal)
            minVal = vectorRatio(i,1);
            minRatio = i;
        end 
    end 

    % step 4: assign pivot element 

    pivotElement = tableau(minRatio, minCol);

    % step 5: perform pivot operation on tableau around the pivot element 

    tableau(minRatio, :) = tableau(minRatio, :) * (1/pivotElement);

    % step 6: perform pivot operation on rows (not including last row)

    for i=1:size(vectorRatio,1)+1 % do last row last 
        if(i ~= minRatio) % we skip over the minRatio'th element of the tableau here 
            tableau(i, :) = -tableau(i,minCol)*tableau(minRatio, :) +  tableau(i,:);
        end
    end
end 

% Now we can interpret the algo tableau 

numVars = size(A,2); % the number of cols of A is the number of variables 

x = zeros(size(size(tableau,1), 1)); % for efficiency 

% Check for basicity 
for col=1:numVars
    count_zero = 0;
    count_one = 0;
    for row = 1:size(tableau,1)
        if(tableau(row,col) < 1e-2)
            count_zero = count_zero + 1;
        elseif(tableau(row,col) - 1 < 1e-2)
            count_one = count_one + 1;
            stored_row = row; % we store this (like in memory) column for later use 
        end
    end
    if(count_zero == (size(tableau,1) -1) && count_one == 1) % this is the case where it is basic 
        x(col,1) = tableau(stored_row, numCols);
    else 
        x(col,1) = 0; % this is the base where it is not basic 
    end
end

% find function optimal value at optimal solution 
fval = x(1,1) * fun(1,1); % just needed for logic to work here 
for i=2:numVars 
    fval = fval + x(i,1) * fun(1,i);
end

end 
```

# unix - 检查当前时间是否在 UNIX 上定义的时间范围内

> ID：13717501
> 
> 赞同：2
> 
> 时间：2012-12-05T06:24:53.650
> 
> 标签：unix, solaris, ksh, scheduler, systemtime

考虑下面的**伪代码**：

```
#!/bin/ksh

rangeStartTime_hr=13
rangeStartTime_min=56
rangeEndTime_hr=15
rangeEndTime_min=05

getCurrentMinute() {
    return `date +%M  | sed -e 's/0*//'`; 
    # Used sed to remove the padded 0 on the left. On successfully find&replacing 
    # the first match it returns the resultant string.
    # date command does not provide minutes in long integer format, on Solaris.
}

getCurrentHour() {
    return `date +%l`; # %l hour ( 1..12)
}

checkIfWithinRange() {
    if [[ getCurrentHour -ge $rangeStartTime_hr &&  
          getCurrentMinute -ge $rangeStartTime_min ]]; then
    # Ahead of start time.
        if [[  getCurrentHour -le $rangeEndTime_hr && 
                   getCurrentMinute -le $rangeEndTime_min]]; then
            # Within the time range.
            return 0;
        else
            return 1;
        fi
    else 
        return 1;   
    fi
} 
```

有没有更好的实施方式`checkIfWithinRange()`？UNIX 中是否有任何内置函数可以更轻松地执行上述操作？我是 korn 脚本的新手，非常感谢您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:06:32.200

该`return`命令用于返回退出状态，而不是任意字符串。这与许多其他语言不同。你`stdout`用来传递数据：

```
getCurrentMinute() {
    date +%M  | sed -e 's/^0//' 
    # make sure sed only removes zero from the beginning of the line
    # in the case of "00" don't be too greedy so only remove one 0
} 
```

此外，您需要更多语法来调用该函数。`"getCurrentMinute"`目前您正在比较if 条件中的文字字符串

```
if [[ $(getCurrentMinute) -ge $rangeStartTime_min && ... 
```

如果有点不同，我会做

```
start=13:56
end=15:05

checkIfWithinRange() {
    current=$(date +%H:%M) # Get's the current time in the format 05:18
    [[ ($start = $current || $start < $current) && ($current = $end || $current < $end) ]] 
}

if checkIfWithinRange; then
    do something
fi 
```

# android - 如何以编程方式更改 LinearLayout 的位置？

> ID：13717503
> 
> 赞同：0
> 
> 时间：2012-12-05T06:24:57.860
> 
> 标签：android, android-layout, android-intent

我在输入时看不到editText控件，因为软键盘覆盖（隐藏）editText控件代码示例如下：

```
private LinearLayout.LayoutParams LY_Scroll = new LinearLayout.LayoutParams(
            LayoutParams.FILL_PARENT, 388);
    private LinearLayout.LayoutParams LY_BOTTOM = new LinearLayout.LayoutParams(
            LayoutParams.FILL_PARENT, 45);
    private LinearLayout.LayoutParams LY_EDIT = new LinearLayout.LayoutParams(
            267, LayoutParams.FILL_PARENT);
    private LinearLayout.LayoutParams LY_BTN = new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
    private LinearLayout.LayoutParams LY_TEXT = new LinearLayout.LayoutParams(
            LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LinearLayout layout_all = new LinearLayout(this);
        layout_all.setOrientation(LinearLayout.VERTICAL);
        layout_all.setBackgroundColor(android.graphics.Color.WHITE);

        // top
        setContentView(layout_all);

        sv = new ScrollView(this);
        sv.setLayoutParams(LY_Scroll);

        text_Show = new TextView(this);
        text_Show.setLayoutParams(LY_TEXT);
        sv.addView(text_Show);

        // bottom
        LinearLayout layout_bottom = new LinearLayout(this);
        layout_bottom.setLayoutParams(LY_BOTTOM);
        layout_bottom.setOrientation(LinearLayout.HORIZONTAL);

        editText = new EditText(this);
        editText.setLayoutParams(LY_EDIT);

        sendBtn = new Button(this);
        sendBtn.setLayoutParams(LY_BTN);
        sendBtn.setText("Send");

        layout_bottom.addView(editText);
        layout_bottom.addView(sendBtn);

        layout_all.addView(sv);
        layout_all.addView(layout_bottom);

        ........
    } 
```

当我输入软键盘时，任何人都知道如何使 editText 可见吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:20:25.603

It would appear that the best way is to use [windowSoftInputMode](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft) to control how your dialog should work. Perhaps you want the `adjustPan` option, although the docs recommend not using it. See [this earlier answer](https://stackoverflow.com/a/3295913/1270789).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:22:11.020

将此添加到您拥有 EditText 的活动下的清单中。

```
android:windowSoftInputMode="adjustPan" 
```

# asp.net-mvc - Autofac和实例注入

> ID：13717516
> 
> 赞同：1
> 
> 时间：2012-12-05T06:26:48.490
> 
> 标签：asp.net-mvc, ioc-container, autofac

在我正在处理的 ASP.NET MVC 项目中，我有以下一段代码，它们基本上将实例注入到我的程序集中的特定方法中。

因此，在应用程序根目录中，我有一个类来注册这样的实例并最终处理注入。

```
ApplicationServiceProvider serviceProvider = ApplicationServiceProvider.CreateDefaultProvider();
serviceProvider.RegisterInstance(GlobalConfiguration.Configuration);
serviceProvider.RegisterInstance(GlobalFilters.Filters);
serviceProvider.RegisterInstance(RouteTable.Routes);
serviceProvider.RegisterInstance(BundleTable.Bundles);
serviceProvider.Distribute(); 
```

现在，当我想从程序集中访问这些实例时，我必须创建一些处理程序（方法）并使用以下属性“ApplicationServiceHandler”对其进行标记，如下例所示。

```
[ContractVerification(false)]
public static class RouteConfiguration
{
    [ApplicationServiceHandler]
    public static void Register(RouteCollection routes)
    {
    }
} 
```

这是项目中可扩展层的一部分，目前运行良好。

现在，我是 Autofac 的新手，我想知道是否可以使用 Autofac 为我完成工作，而不是使用我自己的实现（我在下面提供），它可能会降低效率并处理 Autofac 已经涵盖的更少案例.

我注意到 Autofac 有一个 RegisterInstance 方法，但我不知道如何告诉它将实例注入到标记有“ApplicationServiceHandler”属性的方法中，我不确定它是否是正确的方法，但根据名称，它看起来像正确对象，真爱。

非常感谢任何形式的帮助，谢谢。

**编辑：**这是我用来在我的项目中没有 Autofac 的情况下实现此目的的代码。

ApplicationServiceHandlerAttribute.cs

```
[AttributeUsage(AttributeTargets.Method, AllowMultiple = false)]
public sealed class ApplicationServiceHandlerAttribute : Attribute
{
} 
```

应用服务处理器.cs

```
public sealed class ApplicationServiceHandler
{
    private readonly MethodInfo _method;

    private readonly object[] _args;

    public ApplicationServiceHandler(MethodInfo method, object[] args)
    {
        Contract.Requires(method != null);
        Contract.Requires(args != null);

        _method = method;

        _args = args;
    }

    public void Invoke()
    {
        _method.Invoke(null, _args);
    }

    [ContractInvariantMethod]
    [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Performance", "CA1822:MarkMembersAsStatic", Justification = "Required for code contracts.")]
    private void ObjectInvariant()
    {
        Contract.Invariant(_method != null);
        Contract.Invariant(_args != null);
    }
} 
```

应用服务提供者.cs

```
public sealed class ApplicationServiceProvider
{
    private readonly IEnumerable<Assembly> _assemblies;

    private readonly Dictionary<Type, object> _instances;

    public ApplicationServiceProvider(IEnumerable<Assembly> assemblies)
    {
        Contract.Requires(assemblies != null);

        _assemblies = assemblies;

        _instances = new Dictionary<Type, object>();
    }

    public static ApplicationServiceProvider CreateDefaultProvider()
    {
        Contract.Ensures(Contract.Result<ApplicationServiceProvider>() != null);

        return new ApplicationServiceProvider(PackageLoader.ReferencedAssemblies);
    }

    public void Distribute()
    {
        foreach (var handler in GetHandlers())
        {
            Contract.Assume(handler != null);

            handler.Invoke();
        }
    }

    public IEnumerable<ApplicationServiceHandler> GetHandlers()
    {
        Contract.Ensures(Contract.Result<IEnumerable<ApplicationServiceHandler>>() != null);

        if (_instances.Count == 0)
        {
            yield break;
        }

        foreach (var asm in _assemblies)
        {
            IEnumerable<MethodInfo> methods = GetMethods(asm);

            foreach (var method in methods)
            {
                ParameterInfo[] @params = method.GetParameters();

                if (@params.Length > 0)
                {
                    int instanceCount = 0;

                    object[] args = new object[@params.Length];

                    for (int i = 0; i < @params.Length; i++)
                    {
                        ParameterInfo param = @params[i];

                        var instance = GetInstance(param);

                        if (instance != null)
                        {
                            instanceCount++;

                            args[i] = instance;
                        }
                    }

                    if (instanceCount > 0)
                    {
                        yield return new ApplicationServiceHandler(method, args);
                    }
                }
            }
        }
    }

    public bool RegisterInstance(object instance)
    {
        Contract.Requires(instance != null);

        return AddInstance(instance);
    }

    private static ApplicationServiceHandlerAttribute GetApplicationServiceHandlerAttribute(MethodInfo method)
    {
        ApplicationServiceHandlerAttribute attribute = null;

        try
        {
            attribute = method.GetCustomAttribute<ApplicationServiceHandlerAttribute>(false);
        }
        catch (TypeLoadException)
        {
            // We don't need to do anything here for now.
        }

        return attribute;
    }

    private static IEnumerable<Type> GetDefinedTypes(Assembly assembly)
    {
        Contract.Requires(assembly != null);
        Contract.Ensures(Contract.Result<IEnumerable<Type>>() != null);

        try
        {
            return assembly.DefinedTypes;
        }
        catch (ReflectionTypeLoadException ex)
        {
            return ex.Types.Where(type => type != null);
        }
    }

    /// <summary>
    /// Gets the methods that are marked with <see cref="ApplicationServiceHandlerAttribute"/> from the assembly.
    /// </summary>
    /// <remarks>
    /// Eyal Shilony, 21/11/2012\. 
    /// </remarks>
    /// <param name="assembly">
    /// The assembly. 
    /// </param>
    /// <returns>
    /// The methods that are marked with <see cref="ApplicationServiceHandlerAttribute"/> from the assembly.
    /// </returns>
    private static IEnumerable<MethodInfo> GetMethods(Assembly assembly)
    {
        Contract.Requires(assembly != null);
        Contract.Ensures(Contract.Result<IEnumerable<MethodInfo>>() != null);

        const TypeAttributes STATIC_TYPE_ATTRIBUTES = TypeAttributes.AutoLayout | TypeAttributes.AnsiClass | TypeAttributes.Class | TypeAttributes.Public | TypeAttributes.Abstract | TypeAttributes.Sealed | TypeAttributes.BeforeFieldInit;

        var methods = (from type in GetDefinedTypes(assembly)
                       where type.Attributes == STATIC_TYPE_ATTRIBUTES
                       from method in type.GetMethods().AsParallel()
                       where GetApplicationServiceHandlerAttribute(method) != null
                       select method).ToArray();

        return methods;
    }

    private bool AddInstance(object instance)
    {
        Type type = instance.GetType();

        return AddInstance(type, instance);
    }

    private bool AddInstance(Type type, object instance)
    {
        if (!_instances.ContainsKey(type))
        {
            _instances.Add(type, instance);

            return true;
        }

        return false;
    }

    private object GetInstance(ParameterInfo param)
    {
        object instance = null;

        Type paramType = param.ParameterType;

        if (_instances.ContainsKey(paramType))
        {
            instance = _instances[paramType];
        }
        else
        {
            foreach (var type in _instances.Keys.Where(type => type.IsSubclassOf(paramType)))
            {
                instance = _instances[type];

                break;
            }
        }

        return instance;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:59:48.853

我希望，我已经正确理解了您。如果您的意思是将类标记为具有属性的依赖项，那么您可以通过创建自定义属性来做到这一点。以下是实现此类属性的示例：

```
 public class DependencyAttribute : Attribute
    { 
        public DependencyAttribute()
        {

        }

        //The type of service the attributed class represents
        public Type ServiceType { get; set; }

        //Optional key to associate with the service
        public string Key { get; set; }

        public virtual void RegisterService(AttributeInfo<DependencyAttribute> attributeInfo, IContainer container)
        {
            Type serviceType = attributeInfo.Attribute.ServiceType ?? attributeInfo.DecoratedType;
            Containerbuilder builder = new ContainerBuilder();
            builder.RegisterType(attributeInfo.DecoratedType).As(serviceType).Keyed(
                                       attributeInfo.Attribute.Key ?? attributeInfo.DecoratedType.FullName);
          builder.Update(container)
        }
    } 
```

那么你必须找到所有标有该属性的类型，并调用这些属性的RegisterService方法。

```
public class DependencyAttributeRegistrator
    {  
        public DependencyAttributeRegistrator()
        {

        }

        public IEnumerable<AttributeInfo<DependencyAttribute>> FindServices()
        {
            //replace this line with you'r own
            var types = Assembly.GetExecutingAssembly().GetTypes();
            foreach (Type type in types)
            {
                var attributes = type.GetCustomAttributes(typeof(DependencyAttribute), false);
                foreach (DependencyAttribute attribute in attributes)
                {
                    yield return new AttributeInfo<DependencyAttribute> { Attribute = attribute, DecoratedType = type };
                }
            }
        }

        public void RegisterServices(IEnumerable<AttributeInfo<DependencyAttribute>> services)
        {
            foreach (var info in services)
            {
                //replace following two line with you'r own global container
                var builder = new ContainerBuilder();
                IContainer container = builder.Build(); 
                info.Attribute.RegisterService(info, container);
            }
        }

    } 
```

# crystal-reports - In the crystal report how to make percentages in the basis of various contents

> ID：13717517
> 
> 赞同：0
> 
> 时间：2012-12-05T06:26:54.073
> 
> 标签：crystal-reports

I want to make a crystal report,in where I create a group in the basis of district.Now I want to insert some of data from the database like as a parentage dependent on various content.How I can make this query in crystal report. For example -- the percentage of 'sum of age' in the basis of male learners in one text box and the percentage of 'sum of age' in the basis of female learners in another text box.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:40:33.067

1.  首先为时代创建一个组
2.  创建一个统计年龄的汇总字段（一个代表男性，一个代表女性）（附加一个汇总公式，检查性别 = 'M' 代表男性）
3.  创建两个从汇总字段计算百分比的公式（男性，女性）
4.  将此公式放在相关的文本框中

# magento - magento 1.7 language code issue

> ID：13717521
> 
> 赞同：0
> 
> 时间：2012-12-05T06:27:09.097
> 
> 标签：magento, currency

I have Magento store (1.7-community) with two store views. On English side prices look like **$999,99**. On french side prices look like **999,99 $CA**. I would like to get rid of CA.

in \lib\Zend\Locale\Data\fr_CA.xml currency pattern looks like this

```
<pattern>#,##0.00 ¤;(#,##0.00 ¤)</pattern> 
```

I tried changing this and even removing the section. Flushed caches and deleted var/cache. I am not even sure where CA suffix comes from.

But it does not go away.

Is there an over-ride, Is there a database table that can be cleared?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:27:45.900

也许您配置的货币错误？它可能是您现在拥有的加元而不是美元。看看配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T20:56:44.960

如果您的商店视图的语言环境设置为`French (France)`而不是`French (Canada)`您将看到这个。我只是偶然发现了它，因为 fr_FR 翻译比 fr_CA 更完整，所以我经常使用它来代替，并没有考虑这样的问题。

# c - In this case, why 1 byte extra when computing the file size?

> ID：13717523
> 
> 赞同：12
> 
> 时间：2012-12-05T06:27:10.407
> 
> 标签：c, linux, windows, size

I made this following observations after making a text file on Ubuntu 12.10 through GUI (alt+enter) as well as in Terminal (ls -l).

*   when file was empty : file size = 0 byte.
*   when one character : file size = 2 bytes.
*   when two characters : file size = 3 bytes.

Why 1 byte extra when the file just contains one character, i know this is not because of End-Of-File because when i wrote a c program the loop terminated when it reached End-Of-File and it gave me the same results, so obviously this doesn't count, then what is it?

But on windows when the file contained one character the file size was just 1 byte, it was normal. What are the things behind all this stuffs?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T06:34:33.483

这是由于文本编辑器你得到这个。您必须按下额外的终止字符，例如换行符。

如果您想要`1 byte`文件中 1 个字符的大小。

就在你的终端上这样做。

```
#cat > file // create a file for input
x{CTRL+D}  // after inputting one character 'x' , press CTRL+D twice
           // one for terminating file and one for killing the cat process.

#ls -l  // list the file 
```

您将获得精确的`1`字节文件大小。

试试看。（它在我的系统 Ubuntu 11.04 上运行）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-05T06:31:09.050

Most likely the extra character is the newline character at the end of each line in a Unix/Linux text file. You should be able to see that char using the command 'od -c file'.

# c++ - mp4 video created using direct show filter is not playing

> ID：13717527
> 
> 赞同：3
> 
> 时间：2012-12-05T06:27:31.793
> 
> 标签：c++, directshow, mp4

Using direct show filters I have created a mp4 file writer with two input pin (one for audio and one for video) . I was writing audio sample received through one pin into one track and video sample received from the other pin into another track. But my video is not playing. If I connected only one pin, either Audio or Video, I can play the output file. that is if there is only one track.

I am using h264 encoder for video and mpeg4 encoder for audio. The encoders are working fine as I am able to play the audio and video separately.

I am setting the track count as 2\. Is there any information to be provided in the moov box to make the video playing. Or Should we tell the decoder that which track is audio and which track is video. As we are setting those fields in track information I don't think that is important, but Why my video is not playing?

# xml - Count in XQuery giving strange results

> ID：13717528
> 
> 赞同：0
> 
> 时间：2012-12-05T06:27:35.273
> 
> 标签：xml, xquery

I'm trying to count how many trips have been taken to California within two dates

I have the current XQuery that is as follows:

```
for $x in doc("triptracker.xml")/data/cities/city,
  $y in doc("triptracker.xml")/data/trips/trip
let $date as xs:date := xs:date($y/date)
where $x/cityName = $y/cityName and $x/state = "CA"  and 
$date gt xs:date("2003-01-01") and $date lt xs:date("2006-12-31")
return <Result>Trips to California: {count($y)}</Result> 
```

Which gives me the result set

```
<Result>Trips to California: 1</Result>
<Result>Trips to California: 1</Result>
<Result>Trips to California: 1</Result>
<Result>Trips to California: 1</Result>
<Result>Trips to California: 1</Result> 
```

Instead of just giving me a count of 5

Here is the type of XML data being give for trip and city

```
<trips>
    <trip>
        <ssn>123-20-4567</ssn>
        <cityName>Tucson</cityName>
        <date>2001-08-11</date>
    </trip>
</trips>
<cities>
    <city>
        <cityName>Houston</cityName>
        <state>TX</state>
        <location>
            <latitude>29.76045</latitude>
            <longitude>-95.369784</longitude>
        </location>
    </city>
</cities> 
```

Any help would be greatly appreciated

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:32:07.053

我最终注意到，通过使用 fors，我永远不能只得到 1 个计数，所以我使用 let 对其进行了修改

```
let $x := doc("triptracker.xml")/data/cities/city[state = "CA"],

$y := doc("triptracker.xml")/data/trips/trip[cityName=$x/cityName 
and xs:date(date) gt xs:date("2003-01-01")  
and xs:date(date) lt xs:date("2006-12-31")]

return <Result>Trips to California: {count($y)}</Result> 
```

# algorithm - Proving an algorithm's correctness in determining the number of 1 bits in a bit string

> ID：13717535
> 
> 赞同：0
> 
> 时间：2012-12-05T06:27:57.287
> 
> 标签：algorithm, proof

```
procedure bit count(S: bit string)
count := 0
      while S != 0
          count := count + 1
          S := S ∧ (S − 1)
return count {count is the number of 1s in S} 
```

Here S-1 is the bit string obtained by changing the rightmost 1 bit of S to a 0 and all the 0 bits to right of this to 1s.

So I understand why this is correct, and I have write a rough explanation;

After every iteration, the rightmost 1 bit in S, as well as all the bits to the right of it, is set equal to 0\. Thus, after each iteration, the next right-most 1 is accounted for and set to 0, until the entire string is 0's and the loop breaks with the count equal to the number of 1's.

I know this kind of answer won't pass in any mathematics community, so I was hoping to write a formal proof, but I don't know how to go about doing that. My proof skills are particularly shoddy, so an explanation of the techniques involved would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:57:03.160

使用归纳的证明可能如下所示：

**声明：**`n`在算法的第 th 次迭代开始时，您已经看到（翻转） `n-1`1（设置）位和`count == n-1`。

**证明：**
**基础：**在第一次迭代中微不足道`n==1`- 您还没有看到任何设置位，并且 count 设置为 0 ..
**假设：**对于每个`k<n`（对于某些`n`），该声明都是正确的。
**证明`n`**：第 n 次迭代之后是`n-1`迭代。在`n-1`迭代中，从归纳假设中您已经看到了`n-1`bits 和`count == n-1`.
由于您到达`n`迭代，`n-1`迭代成功结束 - 因此未满足结束条件，因此有一个翻转位。您还增加`count`了 1，因此在第`n`th 步中您翻转了`n`位和`count == n`.

从上面我们可以得出结论，当算法结束时，`count == #flipped_bits`.

**量子点**

* * *

请注意，以上是**部分正确性**- 它证明如果算法终止 - 它会产生正确的答案，但不保证终止。
可以通过显示最多有`|S|`步骤来保证终止，因为您可以在大多数时候翻转最正确的位，`|S|`直到您得到`S = 0`. （终止+部分正确称为完全正确）

* * *

如果您对证明算法感兴趣，您可能会对**[Hoare Logic](http://en.wikipedia.org/wiki/Hoare_logic)**感兴趣，它提供了一个正式的工具，用于验证程序是否正确。这个研究领域被称为[软件验证](http://en.wikipedia.org/wiki/Software_verification)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:33:50.370

~~首先，这是*不*正确的。你想要`while S != 0`，没有`while S = 0`。~~

至于证明，我会使用归纳证明：证明如果没有设置位，它可以正常工作，然后证明如果至少设置了一个位，它会增加计数，减少设置的位数一，并重复。

在归纳步骤中，唯一困难的部分是表明在 之后`S := S ∧ (S − 1)`，在 S 中设置的位数将减少 1。主要部分是对于任何形式的数字 N，其`10..0`形式`N-1`为`01..1`-这就是二进制计数的基本性质。不过，我可能会反过来做——表明对于任何数字 : `01..1`，下一个连续数字是`10..0`，基本上归结为：“1+1 -> 0 + 进位”。

# android - different layout parameters for different devices

> ID：13717541
> 
> 赞同：0
> 
> 时间：2012-12-05T06:28:46.537
> 
> 标签：android, android-layout

I have created a layout in my xml file and have a LinearLayout that is displayed at the top of the activity. I have set its width to `fill_parent` and its height to `54dp`. The height of the layout looks good on devices with bigger screens like Samsung Galaxy, but on smaller devices it looks too big. Is there anyway that the layout will have different height on different screen sizes? I am guessing that this might be achieved by dp, dip, etc. but I'm not sure as to what exactly they do

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:10:51.873

希望对你有帮助...

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation

Low density Small screens QVGA 240x320 

res/layout-small-ldpi
res/layout-small-land-ldpi
Low density Normal screens WVGA400 240x400 (x432)

res/layout-ldpi
res/layout-land-ldpi
Medium density Normal screens HVGA 320x480

res/layout-mdpi
res/layout-land-mdpi
Medium density Large screens HVGA 320x480

res/layout-large-mdpi
res/layout-large-land-mdpi
High density Normal screens WVGA800 480x800 (x854)

res/layout-hdpi
res/layout-land-hdpi
Xoom (medium density large but 1280x800 res)

res/layout-xlarge
res/layout-xlarge-land 
```

如有任何疑问，请评论我...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:36:49.357

制作**layout-normal-hdpi**、**layout-normal-mdpi**和**layout-normal-xhdpi**文件夹，并在所有三个文件夹中复制相同的 xml，而不是根据设备在每个 xml 上设置不同的高度。这是遵循的标准技术。试试这个，你一定会得到想要的结果。

# mysql - 如何向 Rails 中的关联表列添加新属性

> ID：13717542
> 
> 赞同：0
> 
> 时间：2012-12-05T06:28:51.017
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3.1, associations

在我的 rails 应用程序中，我必须添加一个以`is_leader`关联表命名的新列。

关联表的关系如下：

```
has_and_belongs_to_many :analysis_responses, :join_table => "analysis_responses_participants" 
```

以下是将参与者详细信息保存到数据库的代码：

```
organization.people.create(participant) 
```

有`participant`以下值

```
name: Test User
position: 
birthdate: 
id: 
lead: "1" 
```

如果前导值为 1，则`is_leader`列值应`1`针对特定记录。

我想知道如何将`is_leader`关联表中的值保存在 rails 中

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:42:48.407

如果您需要在连接表上保存属性，那么您将不得不使用连接模型而不是 HABTM。

```
class Organization
  has_many :analysis_responses
  has_many :people, through: :analysis_responses
end

class AnalysisResponse
  belongs_to :organization
  belongs_to :person
end

class Person
  has_many :analysis_responses
  has_many :organizations, through: :analysis_reponses
end 
```

# ruby-on-rails-3 - adding more functions in refinery controller and getting error

> ID：13717545
> 
> 赞同：1
> 
> 时间：2012-12-05T06:29:04.027
> 
> 标签：ruby-on-rails-3, gem, ruby-on-rails-3.2, refinerycms, refinery

I am new Refinerycms. I create my own engine called "foodfind" `(FoodFinder\vendor\extensions\foodfinds)`. to become flexible I want to add more functions in client side controller `(app\controllers\refinery\foodfinds\foodfinds_controller.rb)` and their view pages.

I am trying to do this but getting an error `No route matches {:controller=>"refinery/foodfinds/foodfinds", :action=>"new", :locale=>:en}`

**help**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T04:01:01.803

用于`rake routes`检查您是否有该操作的路线。如果没有，那么您必须将其添加到路由文件中。

# c - 如何为自引用结构类型的对象的成员赋值？

> ID：13717546
> 
> 赞同：0
> 
> 时间：2012-12-05T06:29:09.347
> 
> 标签：c, pointers, dynamic, structure, self-reference

这是我的结构的定义

```
 typedef struct treeNode
     {
        int data,pos;
        char name[16];
        struct treeNode *left;
        struct treeNode *right;
     }treeNode; 
```

我创建了一个动态对象

```
treeNode *temp;
            temp = (treeNode *)malloc(sizeof(treeNode)); 
```

如果我必须为数据分配一个值，我应该如何分配

```
scanf("%d",temp->data);   //or
scanf("%d",&(temp->data)); //why? because all scanf will look for is address to a location which could be done by temp->data; 
```

这也适用于访问数据，即我应该如何访问整数部分？

```
temp->data; //or
*(temp->data) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:31:49.173

`scanf("%d",&temp->data);`

因为 scanf() 需要变量的地址。对于每个转换说明符，scanf() 期望对应的参数是一个指向正确类型的指针：%d 期望一个 int * 类型的参数，%f 期望一个 double * 类型的参数，%c 和 %s 都期望一个参数char * 等类型的

[scanf() 的行为](https://stackoverflow.com/questions/3470119/behaviour-of-scanf)提供了有关 scanf() 的更多信息。

for 访问`temp->data`就足够了，因为它本质上等同于`(*temp).data`.

如果您尝试访问`*(temp->data)`，则会触发未定义的行为。因为，您正在访问可能在其他进程上下文中的内存位置。

假设 temp->data 为 100，则 *(temp->data) 表示 *(100)，即访问内存位置 100。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:35:59.630

每当您想设置传递给函数的参数的值时，您需要发送地址。由于您希望 scanf 填充该参数的值，因此您需要使用地址。（请注意，如果 struct 元素已经是一个指针（已分配内存），则不需要 &）。

但是，当您想阅读某些内容时，无需使用地址。你可以直接使用它。

# qt - “1>cl：命令行错误 D8021：无效的数字参数 '/Wno-deprecated'”错误

> ID：13717551
> 
> 赞同：6
> 
> 时间：2012-12-05T06:29:37.490
> 
> 标签：qt, visual-c++, compiler-construction, cmake, vtk

这个错误：

```
"1>cl : Command line error D8021: invalid numeric argument '/Wno-deprecated'" 
```

通过 MSVC 编译器构建 VTK + Qt 项目时发生。我认为标志设置存在一些问题。以下是我的 CMakeList.txt

```
cmake_minimum_required(VERSION 2.8)
PROJECT(QtImageViewer)

IF(NOT VTK_BINARY_DIR)  
FIND_PACKAGE(VTK)
    INCLUDE(${VTK_USE_FILE})
ENDIF(NOT VTK_BINARY_DIR)
SET(QT_QMAKE_EXECUTABLE ${VTK_QT_QMAKE_EXECUTABLE} CACHE FILEPATH "")
SET(QT_MOC_EXECUTABLE ${VTK_QT_MOC_EXECUTABLE} CACHE FILEPATH "")
SET(QT_UIC_EXECUTABLE ${VTK_QT_UIC_EXECUTABLE} CACHE FILEPATH "")

FIND_PACKAGE(Qt4 REQUIRED)
INCLUDE(${QT_USE_FILE})
SET (SRCS main.cxx)
INCLUDE_DIRECTORIES( ${QT_INCLUDE_DIR} ${QT_QTGUI_INCLUDE_DIR} ${QT_QTCORE_INCLUDE_DIR})

ADD_EXECUTABLE( qtimageviewer MACOSX_BUNDLE ${SRCS})

TARGET_LINK_LIBRARIES( qtimageviewer
  QVTK
  ${QT_LIBRARIES}
  vtkRendering
  vtkGraphics
  vtkIO
  vtkCommon
) 
```

请解释如何解决这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T10:22:08.240

通过检查项目属性（配置属性-> C/C++ -> 命令行），似乎有一些不需要的标志，如下所示：

“/Zm1000 -Wno-deprecated -mwin32 -mthreads /bigobj”

只需删除标记的标志，编译即可正确完成。

# python - Python：为什么只调用“f”比“f()”运行速度快 4 倍？

> ID：13717553
> 
> 赞同：0
> 
> 时间：2012-12-05T06:29:46.240
> 
> 标签：python

我刚刚看到亚历克斯·马泰利今晚展示了这一点。我没有听懂他解释为什么这里的速度差异如此之大，我仍然很好奇：

```
% python -mtimeit -s'def f(): pass' 'f()'
10000000 loops, best of 3: 0.121 usec per loop
% python -mtimeit -s'def f(): pass' 'f'
10000000 loops, best of 3: 0.0265 usec per loop 
```

那么为什么`f`跑得这么快`f()`呢？诚然，这个例子有点做作，因为我不知道它是否可以推广到所有可能的不带参数的函数。这里的引擎盖下发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T06:32:02.037

`f`不做任何事情。它不叫`f`。你也可能有

```
def f(): pass

"foo" 
```

为了进一步详细说明，以下是在交互模式下运行时的输出：

```
>>> def f(): print("Foo!")
... 
>>> f()
Foo!
>>> f
<function f at 0x10ebe9830>
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T06:33:12.827

当你输入`f`它时，它只是调用对象而不做任何事情，当你调用它时，`f()`它实际上执行了函数

当您将其输入解释器时，您会注意到不同之处：

```
def f():
    print "foo"
f
>>> <function f at 0x02D64670>

f()
>>> foo 
```

# python - Weird behaviour initializing a numpy array of string data

> ID：13717554
> 
> 赞同：50
> 
> 时间：2012-12-05T06:29:53.697
> 
> 标签：python, numpy

I am having some seemingly trivial trouble with numpy when the array contains string data. I have the following code:

```
my_array = numpy.empty([1, 2], dtype = str)
my_array[0, 0] = "Cat"
my_array[0, 1] = "Apple" 
```

Now, when I print it with `print my_array[0, :]`, the response I get is `['C', 'A']`, which is clearly not the expected output of Cat and Apple. Why is that, and how can I get the right output?

Thanks!

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-12-05T06:40:21.873

Numpy 要求字符串数组具有固定的最大长度。当您使用 创建一个空数组时`dtype=str`，它默认将此最大长度设置为 1。你可以看看你是否这样做`my_array.dtype`；它将显示“|S1”，意思是“一个字符的字符串”。对数组的后续分配将被截断以适应此结构。

您可以通过执行传递具有最大长度的显式数据类型，例如：

```
my_array = numpy.empty([1, 2], dtype="S10") 
```

“S10”将创建一个长度为 10 的字符串数组。您必须决定有多大才能容纳您想要容纳的所有数据。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-05-23T12:35:38.720

当我尝试使用非 ascii 字符时出现“编解码器错误”`dtype="S10"`

你还会得到一个带有二进制字符串的数组，这让我很困惑。

我认为最好使用：

`my_array = numpy.empty([1, 2], dtype="<U10")`

这里 'U10' 转换为“长度为 10 的 Unicode 字符串；小端格式”

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-08-14T05:57:28.420

numpy 字符串数组受其固定长度（默认长度为 1）的限制。如果您不确定您的字符串需要什么长度，您可以`dtype=object`为您的数据元素使用和获取任意长度的字符串：

```
my_array = numpy.empty([1, 2], dtype=object) 
```

我知道这种方法可能存在效率缺陷，但我没有很好的参考来支持这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-15T08:28:48.483

如果是新来的人，我想现在还有另一种方法可以完成这项工作，只需要做一些工作：

```
my_array = np.full([1, 2], "", dtype=np.object) 
```

使用[np.full](https://numpy.org/doc/stable/reference/generated/numpy.full.html)而不是 np.empty，并使用空字符串（类型为对象）创建数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-03T17:19:44.963

另一种选择是初始化如下：

```
my_array = np.array([["CAT","APPLE"],['','']], dtype=str) 
```

换句话说，首先你用你想要的东西编写一个常规数组，然后你把它变成一个 numpy 数组。但是，这会将您的最大字符串长度固定为初始化时最长字符串的长度。所以如果你要添加

```
my_array[1,0] = 'PINEAPPLE' 
```

那么存储的字符串将是“PINEA”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-29T02:30:07.923

如果您正在执行 for 循环，最有效的方法是启动列表推导，这将允许您分配正确的内存。

```
data = ['CAT', 'APPLE', 'CARROT']
my_array = [name for name in data] 
```

# php - 将数组传递到 Codeigniter Active Record 中的位置

> ID：13717555
> 
> 赞同：39
> 
> 时间：2012-12-05T06:29:55.587
> 
> 标签：php, codeigniter, activerecord

我的数据库中有一个带有 adminId 和 clientId 的表

登录用户的 adminId 可能有 20 条记录，我正在尝试提取客户端列表。

我想知道是否有办法可以说：

```
$this->db->where('id', '20 || 15 || 22 || 46 || 86'); 
```

我正在尝试使用动态数据来做到这一点（你永远不知道你需要拉多少客户 ID）。有任何想法吗？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-12-05T06:36:27.883

```
$this->db->where_in('id', ['20','15','22','42','86']); 
```

参考：[where_in](https://codeigniter.com/userguide3/database/query_builder.html?highlight=where_in#CI_DB_query_builder::where_in)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-05T06:34:17.067

使用[where_in()](https://codeigniter.com/userguide3/database/query_builder.html#looking-for-specific-data)

```
$ids = array('20', '15', '22', '46', '86');
$this->db->where_in('id', $ids ); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-05T06:34:52.127

来自 Active Record 文档：

```
$this->db->where_in(); 
```

生成一个 WHERE 字段 IN ('item', 'item') SQL 查询，如果合适，用 AND 连接

```
$names = array('Frank', 'Todd', 'James');
$this->db->where_in('username', $names);
// Produces: WHERE username IN ('Frank', 'Todd', 'James') 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-07T11:45:19.717

生成一个 WHERE 字段 IN ('item', 'item') SQL 查询，如果合适，用 AND 连接，

```
$this->db->where_in()
ex :  $this->db->where_in('id', array('1','2','3')); 
```

生成一个 WHERE 字段 IN ('item', 'item') SQL 查询，如果合适，用 OR 连接

```
$this->db->or_where_in()
ex :  $this->db->where_in('id', array('1','2','3')); 
```

# python - Difficulty accessing widgets after loading interface from ui file with loadUi()

> ID：13717556
> 
> 赞同：1
> 
> 时间：2012-12-05T06:30:00.033
> 
> 标签：python, qt, pyqt

I like the idea of using the loadUi() method in PyQt to load in a QtDesigner interface file as I'm often changing the ui file and don't want to be constantly converting it to a py file.

However, I've been having difficulty understanding how to access the different widgets and views in my ui file. The below shows how I'm loading in the ui:

```
class MyClass(QtGui.QMainWindow):
    def __init__(self, parent = None):
        super().__init__(parent)
        ui = uic.loadUi('MyUserInterface.ui',self)

if __name__ == '__main__':
    import sys
    app = QtGui.QApplication(sys.argv)
    mainapplication = MyClass()
    mainapplication.show()
    app.exec_() 
```

It displays fine, but I was expecting that I would be able to access the elements of the GUI by something along the lines of...

```
ui.sampleButton.makeDraggable() 
```

My question is, how can I access the various elements within my GUI?

Edit 1: I Also have tried to without assigning the uic.load call to ui. When accessing as shown below, I can access some of the properties through using Ui_MainWindow. However, it throws an error

```
if __name__ == '__main__':
    import sys
    app = QtGui.QApplication(sys.argv)
    mainapplication = MyClass()
    mainapplication.Ui_MainWindow.graphicsView.acceptDrops(True)
    mainapplication.show()
    app.exec_() 
```

The error i get is...

```
Traceback (most recent call last):  File "C:\Users\Me\workspaces\com.samplesoftware.software\src\SoftwareView\MyClass.py", line 17, in <module>
  mainapplication.Ui_MainWindow.graphicsView.acceptDrops(True)
  AttributeError: 'MyClass' object has no attribute 'Ui_MainWindow' 
```

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:10:00.870

您不需要将其转换为 .py 文件，但您必须为它们命名才能访问它们，否则您需要知道在 ui 文件中调用的 sampleButton 是什么。

您可以简单地将 sampleButton 重命名为 my_btn 并访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:18:44.783

我发现原因是因为我试图在运行 app.exec_() 之前调用 Ui_MainWindow。将 Ui_MainWindow 调用移到末尾后，它确实可以工作。我猜，事后看来，MainWindow 需要存在才能改变它的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:46:48.917

loadUi函数[将](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/designer.html#the-uic-module)ui 文件路径作为第一个参数，将基本实例作为第二个参数。

基实例应该是与 UI 中的顶级小部件相同的 Qt 类。这是因为`loadUi`会将所有 UI 插入到基本实例中，并且可能需要在此过程中调用它的一些方法。UI 中定义的所有子小部件最终都将作为基本实例的属性。

所以你应该`loadUi`在你的`__init__`：

```
class MyClass(QtGui.QMainWindow):
    def __init__(self, parent = None):
        super(MyClass, self).__init__(parent)
        uic.loadUi('MyUserInterface.ui', self) 
```

然后你应该能够`graphicsView`像这样访问：

```
 self.graphicsView.setAcceptDrops(True) 
```

# asp.net - 在网格中显示具有多列和多行的表格的创造性方法

> ID：13717559
> 
> 赞同：1
> 
> 时间：2012-12-05T06:30:18.693
> 
> 标签：asp.net, html

我有一个用户数据点、用户 ID、选择、选择结果的矩阵。现在，我可以拥有任意数量的用户（平均为 15-50）和任意数量的选择（平均为 14-20）。

我想向用户显示他们的选择是否正确以及所有其他用户的选择以及他们是否也正确。这样他们就可以看到自己的表现以及与其他人相比的表现。

我在想一个大网格；但是，这可能需要某种水平滚动条，无论用户是列还是行。

我假设在页面（HTML5）上显示如此大的网格没有“好”的方法。有没有？有什么有趣的例子吗？

有人可以建议一种更有创意的方式来显示这些数据吗？也许，行是选择，用户是第一列......然后让他选择他想要比较的其他用户？

想法？例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:59:13.917

必须有很多方法可以做到这一点，但以易于理解的方式呈现大型数据集通常是一个好主意，并且能够放大/向下钻取。

我喜欢修改后的“热图”的想法。对于每一行，将用户的选择与选择的总体平均值进行对比。 [这是一个简单的例子](http://jsfiddle.net/QLbH7/3/)，我假设每个选择都有一个正确/错误的答案。用户的选择被颜色编码为红绿色，所有用户的平均值在色谱上。您还可以在点击时展开详细信息，并允许用户按各种指标对问题进行排序。

```
<div class="cont">
    <div class="label">Correct selections:</div>
    <div class="selection">5</div>
    <div class="selection">10</div>
    <div class="selection">8</div>
    <div class="selection">25</div>
    <div class="selection">8</div>
    <div class="selection">22</div>
    <div class="selection">2</div>
    <div class="selection">0</div>
</div>
<div class="cont">
    <div class="label">Your selection:</div>
    <div class="answer">correct</div>
    <div class="answer">incorrect</div>
    <div class="answer">correct</div>
    <div class="answer">correct</div>
    <div class="answer">incorrect</div>
    <div class="answer">correct</div>
    <div class="answer">correct</div>
    <div class="answer">correct</div>
</div>​ 
```

# mysql - Selecting common value of one column for array elements of another column

> ID：13717563
> 
> 赞同：1
> 
> 时间：2012-12-05T06:30:38.007
> 
> 标签：mysql, sql

Am having the following table structure,

```
--------------------------------------------------------
| id   |   po_bill_details_id   |   po_id   |   status |
--------------------------------------------------------
| 1    |   18                   |   6       |   1      |
| 2    |   16                   |   7       |   1      |
| 3    |   18                   |   7       |   1      |
-------------------------------------------------------- 
```

I need to select po_bill_details_id, which will be a common value for the given array of po_id. i.e. If i give [6,7] as input for po_id, i should only get 18 from po_bill_details_id and not 16\. How can i query to MySQL for this logic?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:44:46.313

试试下面的。我在手机上，所以无法测试。根据数组中元素的数量，您可以更改计数。

```
SELECT bill_id FROM yourtable
WHERE PO_id IN (7,6) 
GROUP BY bill_d 
HAVING COUNT(DISTINCT po_id) = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:35:34.600

你可以试试 ：：

```
select 
po_bill_details_id

from table

where po_id in (/*your array*/)

group by po_bill_details_id having count(po_id)=(/*your array's length*/) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T06:36:51.177

```
SELECT po_bill_details_id
FROM   <table>
WHERE  po_id IN ( 6, 7 )
HAVING COUNT(po_bill_details_id) > 1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-05T06:33:09.263

你的意思是

```
select distinct po_bill_details_id from YOUR_TABLE where po_id=6 or po_id=7; 
```

# c - Xtext - solving ambiguity without semantic predicates?

> ID：13717565
> 
> 赞同：2
> 
> 时间：2012-12-05T06:30:47.307
> 
> 标签：c, grammar, semantics, predicate, xtext

**Problem**

```
Entry
    : temp += (Expression | Declaration | UserType)*
;

Declaration
    : Type '*' name=ID ';'
;

Expression
    : temp1 = Primary ('*' temp2 += Primary)* ';'
;

Primary
    : temp1 = INT
    | temp2 = [Declaration]
;

Type
    : temp1 = SimpleType
    | temp2 = [UserType]
;

SimpleType
    : 'int' | 'long'
;

UserType
    : 'typedef' name=ID ';'
; 
```

Rules `Declaration` and `Expression` are ambiguous due to the fact that both rules share the exact same syntax and problems occur because both cross references `[Declaration]` as well as `[UserType]` are based on the terminal rule `ID`.

Therefore generating code for the grammar above will throw the ANTLR warning:

```
Decision can match input such as "RULE_ID '*' RULE_ID ';'"
using multiple alternatives: 1, 2 
```

**Goal**

I would like the rule to be chosen which was able to resolve the cross reference first.

Assume the following:

```
typedef x;

int* x;
int* b; 
```

The AST for

```
x*b 
```

should look something like:

```
x = Entry -> Expression -> Primary (temp1) -> [Declaration] -> Stop!
* = Entry -> Expression -> Primary '*' -> Stop!
b = Entry -> Expression -> Primary (temp2) -> [Declaration] -> Stop! 
```

Therefore

```
Entry -> Declaration 
```

should never be considered, since

```
Entry -> Expression -> [Declaration] 
```

could already validate the cross reference `[Declaration]`.

**Question**

Because we do not have semantic predicates in Xtext (or am I wrong?), is there a way to validate a cross reference and explicitly choose that rule based on that validation?

*PS: As a few might already know, this problem stems from the C language which I am trying to implement with Xtext.*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:44:24.003

关于当前版本的 Xtext，**不支持语义谓词。**

交叉引用被解析到它们的终端（在我的例子中`UserRole`和`Declaration`终端`ID`）。并且仅在链接过程中验证引用，在我的情况下为时已晚，因为 AST 已经创建。

**使用上下文相关规则决策**的唯一可能方法是在说明语法的语法中实际定义一个抽象规则。**在上面的示例中，规则`Expression`和`Declaration`将被重写为一个。然后在必要的领域进行语义验证，例如使用范围界定的内容辅助。**

# android - Copy files from SD Card to SD Card's desire folder

> ID：13717570
> 
> 赞同：1
> 
> 时间：2012-12-05T06:31:20.797
> 
> 标签：android, audio-recording

I am new on Android. I want to copy my files from one location of SD Card to my Particular Folder. Using Default Voice Recording it stores default in SD Card but I would want to copy from there and store those files in my desire folder "sdcard>myfolder1>myfolder2"

Here's My Code:

```
btn_recordAudio.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            Intent intent = new Intent(
                    MediaStore.Audio.Media.RECORD_SOUND_ACTION);
            startActivityForResult(intent, RQS_RECORDING);

        }

    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RQS_RECORDING) {

        savedUri = data.getData();

        Toast.makeText(AudioRnp.this, "Saved: " + savedUri.getPath(),
                Toast.LENGTH_LONG).show();
    } 
```

# iphone - 在 ios 3des 加密中包含大量空终止。当我将 NSData 转换为 NSString 时，它会以第一个空终止结束？

> ID：13717571
> 
> 赞同：1
> 
> 时间：2012-12-05T06:31:26.007
> 
> 标签：iphone, encryption, nsstring, 3des

我已将此功能用于 3des 加密。

```
 ccStatus = CCCrypt(kCCEncrypt,              // CCoperation op
                       kCCAlgorithm3DES,        // CCAlgorithm alg
                       kCCOptionPKCS7Padding,  // kCCOptionPKCS7Padding,                    //kCCModeECB,              // CCOptions
                       [_keyData bytes],        // const void *key
                       kCCKeySize3DES,          // 3DES key size length 24 bit
                       vinitVec,              //iv,                      // const void *iv,
                       [dTextIn bytes],         // const void *dataIn 
                       [dTextIn length],        // size_t dataInLength
                       bufferPtr,               // void *dataOut
                       bufferPtrSize,           // size_t dataOutAvailable
                       &movedBytes);            // size_t *dataOutMoved
       NSData *myData = [NSData dataWithBytes:(const void *)bufferPtr length:(NSUInteger)movedBytes];' 
```

虽然它正在工作。但是当我将此 NSData 转换为 NSString 时，因为 NSString 包含很多空终止，NSString 最终在第一个空终止时结束，变量不能包含整个数据。但我必须在服务器上发送加密字符串。我该怎么做才能将 NSData 转换为 NSString。包含所有数据的字符串意味着（如果数据包含空终止。在这种情况下字符串不会结束）？

请帮助提前谢谢。

* * *

谢谢回复，看看加密的字节是否包含

```
 char bytes[] = { 'H', 'e', 'l', 'l', 'o', \0, 'W', 'o', 'r', 'l', 'd', \0 };
   NSData *data = [NSData dataWithBytes:bytes length:sizeof(bytes)];
   NSString *str = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
   NSLog(@"%@", str);

   NSString *sendtoserver=[NSString stringwithformat:@"<request>%@</request>",str]; 
```

当我们将这些 NSData 转换为 NSString 时。它将在第一个 \0 （空终止）处结束，因为我们必须发送加密的 NSString。所以它会出现问题。而且我无法发送base64string，因为服务器端不想要那个。他们要求加密字符串。

所以我现在做什么，请帮助并再次感谢您的回复先生，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:54:09.487

转换`NSData`为`NSString`不会在空字节处停止*。*A`NSString`可以包含任意 Unicode 字符，包括嵌入的“NULL”字符。

例子：

```
char bytes[] = { 'H', 'e', 'l', 'l', 'o', 0, 'W', 'o', 'r', 'l', 'd', 0 };
NSData *data = [NSData dataWithBytes:bytes length:sizeof(bytes)];
NSString *str = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
NSLog(@"%@", str); 
```

*输出：*

```
Hello 
```

所以*看起来*字符串只包含 5 个字符，并且转换在第一个空字节处停止。但这只是`NSLog`输出，实际上没有任何丢失：

```
for (int i = 0; i < [str length]; i++) {
    unichar c = [str characterAtIndex:i];
    NSLog(@"%2d, %3d, %c", i, c, c);
} 
```

*输出：*

```
 0,  72, H
  1, 101, e
  2, 108, l
  3, 108, l
  4, 111, o
  5,   0, 
  6,  87, W
  7, 111, o
  8, 114, r
  9, 108, l
 10, 100, d
 11,   0, 
```

所以字符串包含所有数据并且没有任何丢失。稍后，当您将字符串发送到服务器时，该字符串可能会被截断。

* * *

**备注：**将加密数据转换为字符串对我来说似乎有问题，因为数据以某种字符编码进行解释。我`NSASCIIStringEncoding`在这个例子中选择了，但是根据文档，这个编码只对 ASCII 值 0…127 有效。

如果您添加有关如何以及以何种格式将加密数据发送到服务器的更多信息，我们可能会提出如何更好地解决此问题的建议。

# c# - 将实体保存到数据库——我的 Save 方法应该返回保存的实体吗？

> ID：13717572
> 
> 赞同：3
> 
> 时间：2012-12-05T06:31:29.190
> 
> 标签：c#, refactoring

所以，我认为有一个不返回刚刚成功保存的实体的 Save 方法有点奇怪。但是，传递给 Save 的实体会被函数修改。

例子：

```
//T SaveOrUpdate(T entity); from IDao
PlaylistDao.SaveOrUpdate(playlist); 
```

该函数获取一个播放列表，将其保存到数据库中，然后返回保存的播放列表。但是，传递给 SaveOrUpdate 的参数是引用等于它的返回值。

考虑到这一点，这是一个更清晰的实现：

```
public void SavePlaylist(Playlist playlist)
{
    try
    {
        NHibernateSessionManager.Instance.BeginTransaction();
        PlaylistDao.SaveOrUpdate(playlist);
        NHibernateSessionManager.Instance.CommitTransaction();
    }
    catch (Exception exception)
    {
        Logger.Error(exception);
        throw;
    }
} 
```

对比

```
public Playlist SavePlaylist(Playlist playlist)
{
    Playlist savedPlayist;
    try
    {
        NHibernateSessionManager.Instance.BeginTransaction();
        savedPlayist = PlaylistDao.SaveOrUpdate(playlist);
        NHibernateSessionManager.Instance.CommitTransaction();
    }
    catch (Exception exception)
    {
        Logger.Error(exception);
        throw;
    }

    return savedPlayist;
} 
```

我认为第二个功能对于以前没有看过代码的人来说更清楚，但是一旦开发人员理解，第一个实现会更简洁明了。有什么想法吗？

**更新：**需要明确的是，SaveOrUpdate 对播放列表有副作用。当播放列表保存到数据库时，其 ID 字段将更新为数据库提供的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T06:34:50.213

我会选择第一种方法，但要稍作改动——将参数传递给`ref`. （请参阅评论。）第二个问题是您不必要地创建了一个额外的变量。为什么不直接`<summary>`在第一种方法中添加一些标签，以智能方式指示将要发生的事情以澄清任何混淆？对我来说，这比创建一个额外的变量来做同样的事情要好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:34:10.573

在第一个方法中，您只是简单地返回参数值，~~而没有任何~~副作用。我认为它既不清晰也不有用。您的第二种方法似乎更有用。

编辑：根据评论。

我不认为，你的方法`SaveOrUpdate`应该做这样的事情。最好返回一个值，如果出现一些异常或由于您想要做的任何意外情况怎么办：

```
playerlist = null; 
```

在您的`SaveOrUpdate`方法中，您不会在方法中看到对原始对象的影响`SavePlaylist`。由于对象引用是按值传递的:)。而在您的第二种方法中，它将对对象产生影响，并且会更清楚地反映出来。`ref`如果您使用关键字传递参数，您的第一种方法会更清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T06:52:49.453

我想这是基于偏好的，重要的是选择一个模型并坚持下去。

我个人的意见是第二种方法是最好的。以下是我的理由。

*   Save 方法有副作用，即它改变了传递给它的对象。即使这些更改可以通过对象引用返回给调用者，但阅读您的代码的人可能无法完全看到这些更改，而无需实际查看 save 方法。

我认为第一行比下一行传达了修改对象的想法

```
// Side effect is better understood
paylist = PlaylistDao.SaveOrUpdate(playlist);

// Side effect is not obvious unless looked into the SaveOrUpdate method.
PlaylistDao.SaveOrUpdate(playlist); 
```

这就是为什么有些人更喜欢函数式语言而不是过程式语言的原因，因为函数式语言不允许副作用，而是强制返回修改后的值。即使您没有使用函数式语言，我认为遵循该模式也有好处。

*   其他原因是，返回修改后的值允许您构建更易于使用的流畅 API，（仅当您向 Playlist 类添加方法时，这不适用于 DAO 上的 SaveOrUpdate 方法） .

例如，如果你总是从你的方法返回新对象，你可以有类似的调用。

```
playlist.SaveOrUpdate().WriteToLog(); // Something like this. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T06:36:24.033

也许返回布尔值会更好？如果出现问题，则为假？那么很容易检查返回值

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-05T06:55:41.690

第二次尝试在系统中留下两个列表。具有无效条目的播放列表和具有有效条目的已保存播放列表（有效 = 当前）。哎呀，发生异常时，已保存的播放列表无效，播放列表仍然有效... 得到问题了吗？

第一次尝试总是使播放列表具有当前值。要么全部保存和更新，新实例具有唯一 ID 等，要么没有任何更改，列表仍然包含未保存的数据。

顺便说一句：我不认为播放列表是通过引用传递的。列表实例本身没有被修改，只有它的内容。即使实例本身会发生变化，这些变化在方法之外也是不可见的，因为方法本身将参数“播放列表”声明为仅输入。

# dns - SQL 可用性组侦听器创建失败

> ID：13717574
> 
> 赞同：5
> 
> 时间：2012-12-05T06:31:35.717
> 
> 标签：dns, active-directory, sql-server-2012, windows-clustering

我在为新创建的 SQL 2012 Enterprise AG 创建可用性组侦听器时遇到问题。

我的 AG 位于 Server 2012 数据中心之上的两台虚拟机上，具有 Hyper-V 角色。VM 是我的域的一部分，并且在 WSFC 中。每个 VM 有 4 个子网：

*   (a) 172.33.0.x 用于管理
*   (b) 172.33.1.x 用于 iSCSI 通信
*   (c) 172.33.2.x 用于 iSCSI 通信
*   (d) 172.33.5.x 用于 VM 间通信

我的集群中只设置了 (a) 和 (d) 以允许集群通信，并允许客户端连接。

每当我尝试使用此查询创建侦听器时

```
USE [master]
GO
ALTER AVAILABILITY GROUP [Sharepoint-System-DB-AvailabilityGroup]
ADD LISTENER N'SQL-SHP-AG01-L1' (
WITH IP
((N'172.33.5.203', N'255.255.255.0'),(N'172.33.0.203', N'255.255.255.0'))
, PORT=1433);
GO 
```

我收到此错误：

```
Msg 19471, Level 16, State 0, Line 1
The WSFC cluster could not bring the Network Name resource with DNS name 'SQL-SHP-AG01-L1' online. The DNS name may have been taken or have a conflict with existing name services, or the WSFC cluster service may not be running or may be inaccessible. Use a different DNS name to resolve name conflicts, or check the WSFC cluster log for more information.
Msg 19476, Level 16, State 4, Line 1
The attempt to create the network name and IP address for the listener failed. The WSFC service may not be running or may be inaccessible in its current state, or the values provided for the network name and IP address may be incorrect. Check the state of the WSFC cluster and validate the network name and IP address with the network administrator. 
```

我试过了 ：

*   一些在线帖子建议我尝试在 AD 中预先创建计算机对象，我这样做了，同样的错误
*   在计算机 OU 上设置安全设置以允许运行 AG 的计算机创建计算机对象，同样的错误
*   我有另一个集群设置（用于另一个 AG），它也会产生相同的错误

可能相关的是，我经常在集群的所有者节点上遇到以下错误之一：

```
Cluster network name resource 'Cluster Name' failed registration of one or more associated DNS name(s) for the following reason:
DNS server failure. 
```

为此，我尝试过：

*   手动创建A记录，设置“允许所有经过身份验证的用户更改此记录”
*   允许“所有人”完全访问 DNS A 记录
*   允许对我的域的 DNS 记录进行非安全更新

也无济于事，这让我觉得有更深层次的错误。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T15:32:49.223

我们遇到了同样的问题。解决方案是根据此链接授予与 Active Directory 中的群集组“创建计算机”权限关联的计算机对象 - [http://technet.microsoft.com/en-us/library/cc731002%28WS.10%29.aspx #BKMK_steps_precreating](http://technet.microsoft.com/en-us/library/cc731002%28WS.10%29.aspx#BKMK_steps_precreating)

需要这些权限的是集群组计算机对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T22:29:10.480

打开 Active Directory 用户和计算机，向将在其中创建可用性组的集群名称对象 (CNO) 授予权限。需要授予的两个权限是：通过容器向 CNO 授予“读取所有属性”和“创建计算机对象”。更多详细信息可以在以下博客中找到 [http://blogs.msdn.com/b/psssql/archive/2013/09/30/error-during-installation-of-an-sql-server-failover-cluster-instance .aspx](http://blogs.msdn.com/b/psssql/archive/2013/09/30/error-during-installation-of-an-sql-server-failover-cluster-instance.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-05T14:49:18.050

我们遇到的另一个问题是 - 与 _ 以 AOAG 和侦听器的名义。使用下划线重新创建 AOAG 后，我们也可以使用下划线创建侦听器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-31T02:08:38.000

在我们的例子中，所有的 AD 权限都已经到位 - 但是它未能创建具有相同错误消息的侦听器。最后，我们发现在两个节点上停止和启动集群服务（使用 cluadmin.msc）以某种方式纠正了问题并且成功创建了监听器。

# vb.net - 关于括号的 VB.Net 和 Linq 语法

> ID：13717578
> 
> 赞同：0
> 
> 时间：2012-12-05T06:31:45.937
> 
> 标签：vb.net, linq

我有以下代码在 VB.net ( VS 2012 ) 中运行良好。请注意， m.Listen 返回一个 IObservable(of Maybe(of NominalObject))

```
 Dim d As IDisposable = (From x In m.Listen(Of Maybe(Of NominalObject))()
            From y In x
            Select New LAPViewCommands(y)).
            BindToControl(Me, Function(x) x.ViewModel)

    d.DisposeWith(Me) 
```

这是自定义用户控件的一部分，我有一些将 IObservables 绑定到模型的扩展方法。然而细节无关紧要。当我将代码更改为

```
 (From x In m.Listen(Of Maybe(Of NominalObject))()
            From y In x
            Select New LAPViewCommands(y)).
            BindToControl(Me, Function(x) x.ViewModel).
            DisposeWith(Me) 
```

我有一个编译错误。请注意，流利的语法没有问题。

```
 m.
        Listen(Of Maybe(Of NominalObject)).
        SelectMany(Function(x) x.Select(Function(y) New LAPViewCommands(y))).
        BindToControl(Me, Function(x) x.ViewModel).
        DisposeWith(Me) 
```

这个问题是 VB.NET 解析器的一个奇怪的边缘案例，还是我在这里遗漏了一些重要的东西？总而言之，问题是。为什么我不能将 LINQ 查询表达式括起来，然后使用返回 void 的流畅扩展方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:16:01.210

问题是您的表达式不是以标识符开头。

这是 VB.Net 的限制，不限于 LINQ 查询表达式。

* * *

比较以下 C# 代码（`Dump`是扩展方法）

```
"123".Dump();

(from a in "1223" select a).Dump();

new object().ToString(); 
```

这将正常工作。这是 VB.Net 等价物（或多或少看起来相同）：

```
"123".Dump()

(From a in "123" Select a).Dump()

(New Object()).ToString() 
```

这三个语句中的每一个都会引发语法错误。

您可以使用以下[`Call`语句](http://msdn.microsoft.com/en-us/library/sxz296wz%28v=vs.110%29.aspx)修复它：

```
Call "123".Dump()

Call (From a in "123" Select a).Dump()

Call New Object().ToString() 
```

# iphone - 使用仪器查找代码中的堆栈溢出

> ID：13717586
> 
> 赞同：0
> 
> 时间：2012-12-05T06:32:04.537
> 
> 标签：iphone, ios, memory, memory-management, instruments

正如文档所说，分配对内存进行了堆分析。

但是，我觉得我的应用程序崩溃了，因为在堆栈上存储了大量数据，这可能会溢出。

我该如何分析？请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:27:20.220

首先构建您的应用程序进行分析（Command +I）；运行。选择分配工具，使用（使用）应用程序。

在 Allocations 中，您会发现**Live Bytes**的一部分，这是您的应用程序**当前的 RAM 利用率（***堆栈上的数据*我想这是您在问题中谈论的 RAM）。

**释放**当前未使用的对象将减少**Live 字节**

**总字节数**- 所有字节（创建和销毁 + 当前活动字节）。

[如需进一步参考，请参阅仪器编程指南。](https://developer.apple.com/library/mac/#documentation/AnalysisTools/Reference/Instruments_User_Reference/AllocationsInstrument/AllocationsInstrument.html#//apple_ref/doc/uid/TP40011355-CH40-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:18:20.657

创建和比较“堆”是开始缩小乍一看没有明显内存管理错误的代码部分的好方法。请参阅我对[这个问题](https://stackoverflow.com/a/13601958/1126955)的回答以进一步阅读或直接查看[这篇精彩的文章](http://blog.bignerdranch.com/590-actually-finding-a-memory-management-error-with-instruments/)。

# perl - 无法使用 Dancer::Plugin::Database 连接到多个数据库

> ID：13717588
> 
> 赞同：2
> 
> 时间：2012-12-05T06:32:21.043
> 
> 标签：perl, yaml, dancer

我正在使用 Dancer::Plugin::Database 从我的 dancer 应用程序连接数据库。它适用于单一连接。当我尝试多个连接时，我得到了错误。如何添加多个连接。

我在 config.yml 文件中添加了以下代码：

```
plugins:
        Database:
            connections:
                one:
                        driver: 'mysql'
                        database: 'employeedetails'
                        host: 'localhost'
                        port: 3306
                        username: 'remya'
                        password: 'remy@'
                        connection_check_threshold: 10
                        dbi_params:
                            RaiseError: 1
                            AutoCommit: 1
                        on_connect_do: ["SET NAMES 'utf8'", "SET CHARACTER SET 'utf8'" ]
                        log_queries: 1
                    two:
                        driver: 'mysql'
                        database: 'employeetree'
                        host: 'localhost'
                        port: 3306
                        username: 'remya'
                        password: 'remy@'
                        connection_check_threshold: 10
                        dbi_params:
                            RaiseError: 1
                            AutoCommit: 1
                        on_connect_do: ["SET NAMES 'utf8'", "SET CHARACTER SET 'utf8'" ]
                        log_queries: 1 
```

然后我尝试使用以下代码连接数据库：

```
my $dbh=database('one');
my $sth=$dbh->prepare("select * from table_name where id=?");
$sth->execute(1); 
```

我收到编译错误，“无法解析配置文件”

请提出解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T09:02:48.247

YAML 要求哈希键的缩进一致。从“两个：”之前删除四个空格，它应该解析。

更新：我看到对缩进进行了一些编辑；回到最初的问题会在不同的地方产生解析错误，并显示正在使用的制表符和空格的混合；尝试始终仅使用制表符或仅使用空格。您可以测试您的文件并找到产生第一个错误的行，如下所示：

```
$ perl -we'use YAML::Syck; LoadFile "config.yml"'
Syck parser (line 19, column 16): syntax error at -e line 1, <> chunk 1. 
```

还要确保您的密钥都以正确的哈希结尾（制表符和空格的混合似乎允许出现错误但仍然成功解析）：

```
perl -we'use YAML::Syck; use Data::Dumper; $Data::Dumper::Sortkeys=$Data::Dumper::Useqq=1; print Dumper LoadFile "config.yml"' 
```

# iphone - UIButton - 程序化创建问题

> ID：13717591
> 
> 赞同：0
> 
> 时间：2012-12-05T06:32:35.457
> 
> 标签：iphone, objective-c, ios, ios5, uibutton

我正在以`UIButton`编程方式创建如下。

```
- (void)viewDidLoad
{
    [paymentsHomeView setFrame:CGRectMake(0, 0, 320, 520)]; // paymentsHomeView is added and referenced in IB

    UIButton *paymentButton = [[UIButton alloc] initWithFrame:CGRectMake(10, 45, 300, 41)];
    paymentButton.titleLabel.text = @"Button";
    paymentButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [paymentButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [self.paymentsHomeView addSubview:paymentButton];

    [super viewDidLoad];
}

-(void) buttonClicked {

    NSLog(@"buttonClicked");
} 
```

上面的代码没有输出。未创建按钮。

而当我创建`UITextField`.

帮帮我。提前致谢..！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T06:36:54.403

**您需要在 init 语句之后为按钮设置框架，并且您需要以不同的方式为按钮设置标题**

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self 
           action:@selector(buttonClicked:)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:@"Button" forState:UIControlStateNormal];
button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
[self.view addSubview:button]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:35:27.833

试试这个我的朋友..

```
UIButton *paymentButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[paymentButton addTarget:self 
       action:@selector(aMethod:)
forControlEvents:UIControlEventTouchDown];
[paymentButton setTitle:@"Show View" forState:UIControlStateNormal];
 paymentButton.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
[self.paymentsHomeView addSubview:paymentButton]; 
```

让我知道它是否有效...!!!

快乐编码！！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T06:36:23.970

您正在此处创建按钮：

```
UIButton *paymentButton = [[UIButton alloc] initWithFrame:CGRectMake(10, 45, 300, 41)]; 
```

再次在这一行上创建另一个按钮，以便覆盖前一个按钮，因此您需要再次设置框架：

```
paymentButton = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
```

我建议这样做：

```
 paymentButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[paymentButton setFrame:CGRectMake(10, 45, 300, 41)];

    paymentButton.titleLabel.text = @"Button";
    [paymentButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [self.paymentsHomeView addSubview:paymentButton]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T06:42:45.317

我在这里指出了一些问题：

```
[paymentsHomeView setFrame:CGRectMake(0, 0, 320, 520)]; // paymentsHomeView is added and referenced in IB

UIButton *paymentButton = [[UIButton alloc] initWithFrame:CGRectMake(10, 45, 300, 41)];
paymentButton.titleLabel.text = @"Button";
// You just allocated a paymentButton above. Without ARC it is leaked here:
paymentButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
// Now you have assigned an auto released button to paymentButton. It does not have a frame or text.
[paymentButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
[self.paymentsHomeView addSubview:paymentButton]; 
```

试试这个：

```
UIButton *paymentButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
paymentButton.frame = CGRectMake(10, 45, 300, 41);
paymentButton.titleLabel.text = @"Button";
[paymentButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
[self.paymentsHomeView addSubview:paymentButton]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T06:39:04.217

**对于自定义按钮，请使用以下代码...**

删除此行

```
paymentButton = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
```

并添加显示黑色背景按钮的这一行

```
paymentButton.titleLabel.textColor = [UIColor whiteColor];// set text color which you want
[paymentButton setBackgroundColor:[UIColor blackColor]];// set back color which you want 
```

**对于 RoundRect 按钮，使用下面的代码**

```
 UIButton *paymentButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    paymentButton.frame = CGRectMake(10, 45, 300, 41);
    paymentButton.titleLabel.text = @"Button";
    [paymentButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [self.paymentsHomeView addSubview:paymentButton];
    [self.paymentsHomeView bringSubviewToFront:paymentButton]; 
```

# android - android如何拍照仅使用系统相机

> ID：13717593
> 
> 赞同：0
> 
> 时间：2012-12-05T06:32:53.090
> 
> 标签：android, android-intent, camera

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE ) 
```

如果我安装了其他相机应用程序，此意图将显示一个可供选择的相机列表，所以我的问题是如何直接调用系统相机，而不是选择其他相机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:25:08.377

你可以试试这个

```
Intent camIntent = new Intent("android.media.action.IMAGE_CAPTURE");
        Intent systemCamIntent = new Intent(camIntent);
        systemCamIntent.setComponent(new ComponentName("com.sec.android.app.camera", "com.sec.android.app.camera.Camera"));
        startActivity(systemCamIntent); 
```

您可以使用下面的代码获取摄像头列表，然后您应该创建一个逻辑来了解不同房间的系统摄像头。

```
List<Intent> yourIntentsList = new ArrayList<Intent>();
        List<ResolveInfo> listCam = packageManager.queryIntentActivities(camIntent, 0);
        for (ResolveInfo res : listCam) {           
            finalIntent = new Intent(camIntent);
            finalIntent.setComponent(new ComponentName(res.activityInfo.packageName, res.activityInfo.name));
            yourIntentsList.add(finalIntent);
        } 
```

# java - 调用构造函数后注册监听器的guice方法

> ID：13717603
> 
> 赞同：1
> 
> 时间：2012-12-05T06:33:54.230
> 
> 标签：java, guice

> **可能重复：**
> [Guice 在实例化对象后调用 init 方法](https://stackoverflow.com/questions/2093344/guice-call-init-method-after-instantinating-an-object)

我已经看到它建议（特别是在 Java Concurrency in Practice 中）避免`this`从构造函数泄漏，特别是避免调用诸如`registerListener(this)`直到构造之后的东西。建议的解决方法是使用静态工厂，它首先调用构造函数，然后进行那些不受信任的外部方法调用。然后构造函数将是（包）私有的。不幸的是，Guice 明确不鼓励这种工厂方法，而且我不相信有一种方法可以在我原来的类中仍然获得自动注入的同时使用它。这感觉像是一个普遍而自然的问题。在 Guice 中是否有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:37:09.553

你可以在你的 Guice 模块中使用提供者方法来做到这一点：

```
@Provides
Listener listener(Colaborator test, Collection<Listener> listeners) {
    Listener newListener = new Listener(test);
    listeners.register(newListener);
    return listener;
} 
```

但是，这对您的初始化序列可能是个问题。此外，如果您有很多协作者（构造函数参数），这可能会变得很难看。

还有另一种使用类型侦听器的方法。我更喜欢上面的方法，因为你在做什么更明显。但是，有时这样会更好：[Guice 在实例化对象后调用 init 方法](https://stackoverflow.com/questions/2093344/guice-call-init-method-after-instantinating-an-object)

# android - 当我使用 .9.png 作为背景时，TextView 丢失了它的内容

> ID：13717606
> 
> 赞同：0
> 
> 时间：2012-12-05T06:33:58.280
> 
> 标签：android

```
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/school_bk"
android:orientation="vertical"
android:layout_above="@+id/nativeg" >
<TextView
    android:id="@+id/home_tv_schools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_horizontal"
    android:paddingRight="2dip"
    android:paddingTop="40dip"
    android:textColor="#ffffff"
    android:textSize="16sp" />
</LinearLayout> 
```

背景图片是9.png的图片。但是我的文字被忽略了。是我的9.png有问题还是其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:38:37.710

9patch 可绘制对象中包含填充信息。尝试将 android:padding="0dp" 添加到 LinearLayout，如果出现 TextView，那么您在 9patch 可绘制对象中设置了错误的填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:44:17.033

可能这会帮助你

android:background="@drawable/bubble" android:id="@+id/textViewSMS"

安卓：文本=“文本”

看到这个链接[http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:44:52.613

android:paddingTop="40dip" - 似乎太多了。

# asp.net - 当 Button_Click 事件触发 asp.net C# 时，会话似乎丢失了

> ID：13717616
> 
> 赞同：2
> 
> 时间：2012-12-05T06:34:28.533
> 
> 标签：asp.net, events, session, click

我正在使用**C#**和**实体**框架编写一个 ASP.NET 网站。

*我将我创建的登录*类存储到会话中。该类包含诸如 NetID、用户可用的角色以及用户选择登录的角色等信息。

我遇到的问题是，每当我尝试获取存储在`Button_Click`事件内部会话中的信息时，似乎都无法获取信息。我不知道这是否被允许。但是，我还将包含用户信息的*登录*`Button_Click`变量作为公共变量，供分部类中的任何函数访问，但访问事件中的信息时仍然遇到同样的问题。当我在`Page_Load`事件中获取会话信息时，我能够获取放置在该会话中的值。

以下是我的程序的代码。

```
public partial class Private_HomePagePortal : System.Web.UI.Page
{

Login SysUser = new Login();

protected void Page_Load(object sender, EventArgs e)
{
    string[] Roles;

    SysUser.Ticket = Request.QueryString["casticket"];
    SysUser.GetNetID();

    if (SysUser.Authenticate(SysUser.NetID))
    {

        SysUser.GetRoles(SysUser.NetID);
        Roles = SysUser.Roles;

        CasOut.Text = "Welcome <b>" + SysUser.NetID + "</b>!  You are now Logged in!  " + "Please choose a role you would like to sign in as." + "<br>" + "<br>";

        foreach (string item in Roles)
        {
            if (item == "Admin")
            {
                Admin.Visible = true;
                Admin.CssClass = "btn btn-danger";
                AdminBreak.Text = "<br><br>";
            }
            if (item == "SuperAdmin")
            {
                SuperAdmin.Visible = true;
                SuperAdmin.CssClass = "btn btn-danger";
                SuperAdminBreak.Text = "<br><br>";
            }
            if (item == "Member")
            {
                Member.Visible = true;
                Member.CssClass = "btn btn-danger";
                MemberBreak.Text = "<br><br>";
            }
            if (item == "Convener")
            {
                Convener.Visible = true;
                Convener.CssClass = "btn btn-danger";
                ConvenerBreak.Text = "<br><br>";
            }
            if (item == "ITAdmin")
            {
                ITAdmin.Visible = true;
                ITAdmin.CssClass = "btn btn-danger";
            }
        }
       else
        CasOut.Text = "You are not in the IUCommittee System!!!!  If you believe this is an error, contact the IT Administrator for assistance.";

    Session["Login"] = SysUser;
    Login User = (Login)Session["Login"];                           //Used to test information is actually in the Session
    CasOut.Text = User.NetID;
}

    protected void Admin_Click(object sender, EventArgs e)
{
    Login User = (Login)Session["Login"];
    User.SelectedRole = "Admin";
    CasOut.Text = User.NetID + User.SelectedRole;
    Session["Login"] = User;
}
} 
```

我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:44:57.737

`Page_Load`每次按下按钮时都会执行代码，在这种情况下，值的`QueryString`值将被删除。

确保 page_load 中的代码在每个页面回发（使用`IsPostBack`）或类似的东西中执行一次：

```
protected void Page_Load(object sender, EventArgs e)
{
  if(Session["Login"]==null)
   {
     string[] Roles;
     ....
     CasOut.Text = User.NetID;
    }
} 
```

或者

```
protected void Page_Load(object sender, EventArgs e)
{
  if(!IsPostBack)
   {
     string[] Roles;
     ....
     CasOut.Text = User.NetID;
    }
} 
```

# java - 如何反序列化具有参数化构造函数的对象

> ID：13717625
> 
> 赞同：4
> 
> 时间：2012-12-05T06:35:10.927
> 
> 标签：java, serialization, constructor, parameterized

您好我正在尝试反序列化以下对象。

```
public class Book extends Item implements Serializable {
public Boolean isBook;
public Boolean isBookch;

private String publicationPlace;

private String publisher;

private int edition;

private String pages;

private String article;

Book(String title, String author, String year)
{
super(title, author, year);
    isBook = false;
    isBookch = false;
    publicationPlace = " !!! Not Known !!! ";
    publisher = " !!! Not Known !!! ";
    edition = 1;
    pages = "!!! Not Known !!!";
    article = " !!! Not Known !!! ";
} 
```

这是对象的结构，我将其序列化为....

```
openw("books.dat");
        Date date = new Date ();
        out.writeObject(date);
        for(Book b : books )
            out.writeObject ( b );
        closew(); 
```

这几乎可以正常工作，没有任何错误。我正在尝试将其分散为...

```
openr("books.dat");
        Date lastsaved = (Date)in.readObject();
        System.out.println("last saved date : " + lastsaved.toString());

        while( true )
        {
            Object o = in.readObject();
            if(o == null )
            break;
            else
            {
            addItem((Book)o);
            books.add((Book)o);
        }
        }
        closer(); 
```

这给出了错误： java.io.InvalidClassException: Book; 没有有效的构造函数

如何解决这个问题..thanx提前...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:59:13.363

该类也`Item`必须实现`Serializable`，

```
class Item implements Serializable {

    // ...

} 
```

它有效！

但是，如果`Item`超出您的能力范围并且没有非参数构造函数，则无法使其`Book`可序列化。使不可序列化类的子类可序列化的唯一方法是找到*“第一个不可序列化超类的子类可访问的无参数构造函数”*（引用`ObjectStreamClass`'s`getSerializableConstructor`方法的源代码）。在您的情况下，这似乎丢失了，因此`Book`无法序列化。

在这种情况下，鉴于您的对象仅由原语组成，您可以将 JSON 作为序列化对象的替代方式。[在http://www.json.org](http://www.json.org)上有一个用于 Java 的 JSON 库列表

***注意，** Java 怎么可能在不调用构造函数的情况下创建可序列化类的对象？在 Java API 的深处有一个不安全的方法，用于分配对象而不调用它们的构造函数。真实的故事。*

# java - 从 id = 的存储库中选择内容？更新

> ID：13717627
> 
> 赞同：0
> 
> 时间：2012-12-05T06:35:13.217
> 
> 标签：java, sql, sql-server-2005, jdbc, oracle10g

上述查询在 Oracle 10g 上成功运行。现在我必须使用 SQLSERVER 2005 实现相同的查询（应用程序）。

当我在 SQLSERVER 2005 中运行上述查询时，我收到错误“仅允许用于 DECLARE CURSOR 的 FOR UPDATE 子句”。

SQLSERVER 2005 是否支持上述查询？或者有没有替代品？

目标：

基本上我正在更新我的应用程序中的文档。我正在使用分块更新，并且每次都必须通过新内容附加旧内容。

代码：

```
Blob bb = getDataAccess().executeScalar( "select content from Repository where id = ? for update", getId());
os = bb.setBinaryStream(startIndex + 1);

while ((read = content.read(buf)) > 0) {
    os.write(buf, 0, read);
    startIndex += read;

    //commit every megabate or every second so upload progress is visible
    //and we don't lose more than 1MB if something happens.

    if (startIndex - lastStartIndex > bufSize || (new Date().getTime() - lastUpdateTime) > UPDATE_INTERVAL) {
        os.close();
        os = null;
        getDataAccess().executeUpdate("UPDATE Repository SET LastChunkSaved = CURRENT_TIMESTAMP  WHERE ID = ?", getId());
        getDataAccess().commit();

        lastStartIndex = startIndex;
        lastUpdateTime = new Date().getTime();

        bb = getDataAccess().executeScalar( "select content from Repository where id = ? for update", getId());
        os = bb.setBinaryStream(startIndex + 1);

        totalSaved += startIndex - lastStartIndex;
    }
}
os.close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-27T15:21:31.580

我遇到了类似的问题，对我来说，将“SelectMethod=Cursor”添加到连接 url 很有帮助：

```
jdbc:sqlserver://<server>\SQLEXPRESS:1433;databaseName=<db>;SelectMethod=Cursor;integratedSecurity=true; 
```

实际上我不能很容易地找到它，所以我将它添加到我会更快找到它的地方。

# sql - 在 PostgreSQL 中通过会话变量动态选择视图选择语句

> ID：13717630
> 
> 赞同：0
> 
> 时间：2012-12-05T06:35:24.683
> 
> 标签：sql, postgresql

我正在使用会话变量，我想创建一个执行以下操作的视图：

```
if (myVar=1)
  select * from my_table where X
else
  select * from my_table where Y 
```

其中 X 和 Y 是不同的子句。

是否可以？

这可以通过常规选择语句（或者我需要存储过程）来实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:04:18.633

尝试这样的事情：

```
SELECT 'A'
FROM tableA
WHERE current_setting(setting_name) = 'setting A'
UNION ALL
SELECT 'B'
FROM tableB
WHERE current_setting(setting_name) = 'setting B' 
```

[此处](http://www.postgresql.org/docs/current/static/functions-admin.html)有关 postgresql 会话变量的详细信息。

UPD 它将给出其中一个的结果`SELECT`。如果`current_setting(setting_name)`等于`'setting A'`第一个查询将返回结果，但第二个不会。

对于您的示例，查询将如下所示：

```
SELECT 'A'
FROM tableA
WHERE myVar = 1
UNION ALL
SELECT 'B'
FROM tableB
WHERE myVar != 1 
```

UPD Checked：postgres 只执行其中一个查询。`EXPLAIN ANALYZE`显示第二个查询已计划但标记为`(never executes)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:47:56.597

我通常使用存储过程或 UDF（如果您的 RDBMS 支持它们）。由于您无法将参数传递给视图，因此视图不适合。但是，您可以通过创建这样的视图来实现类似的目标

```
create view MyView as
select 1 as MyVar, * from A
union
select 2 as MyVar, * from B 
```

并在您的应用程序中过滤列 MyVar

```
select * from MyView where MyVar = :MyVar 
```

但是，这通常涉及整个视图的表扫描。同样，根据 RDBMS，您可以在“MyVar”列上放置索引并加快这种方法。

我建议使用存储过程，它使您的尝试更加清晰。

# java - 如何克服 JFreeChart 问题？

> ID：13717632
> 
> 赞同：1
> 
> 时间：2012-12-05T06:35:32.353
> 
> 标签：java, charts, struts, report, jfreechart

我在我的 struts 应用程序中使用 Jfree 图表。Y 轴是超运件数，X 轴是供应商代码，辅助轴用于超运百分比。我在这里面临的问题是，如果 Over Shipment % 值全部归零，它也会隐藏 X 轴供应商值。我该如何克服才能避免这种情况。我在这里附上了屏幕截图供您考虑。感谢大家阅读这个问题。

![在此处输入图像描述](../Images/03eea7e32aece15cb119ad631bfc51c8.png)

为了您的清楚理解，我将代码粘贴在这里，

```
/**
     * 
     * @param response
     * @throws IOException
     */
    public void writeOccurrenceBasedParetoChart(HttpServletResponse response) throws IOException
    {
        String METHOD_NAME = "writeOccurrenceBasedParetoChart";
        log.entering(CLASS_NAME, METHOD_NAME);

         CategoryDataset dataset1 = createDataSetForPercentBasedChart1();
         CategoryDataset dataset2 = createDataSetForPercentBasedChart2();
         String rangeAxisLabel = "";
         String numOfSupplrs = "";
         //Behind Schedule "4"
         if(searchRatingElement.equalsIgnoreCase("4"))
         {           
             System.out.println("*******************searchRatingElement"+searchRatingElement);
             rangeAxisLabel = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.ovrshptpcs");
         }
         else 
         {
             rangeAxisLabel = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.ovrshptpcs");
         }

         JFreeChart chart = ChartFactory.createBarChart(
                "",       // chart title
                "",               // domain axis label
                rangeAxisLabel,                  // range axis label
                dataset1,                  // data
                PlotOrientation.VERTICAL, // orientation
                true,                     // include legend
                true,                     // tooltips?
                false                     // URLs?
            );

            // NOW DO SOME OPTIONAL CUSTOMISATION OF THE CHART...

            // set the background color for the chart...
            chart.setBackgroundPaint(Color.white);
            CategoryPlot plot = (CategoryPlot) chart.getPlot();
            plot.setBackgroundPaint(Color.lightGray);

            plot.setDataset(1, dataset2);
            plot.mapDatasetToRangeAxis(1, 1);

            CategoryItemRenderer renderer1 = plot.getRenderer();
            renderer1.setSeriesItemLabelGenerator(0,new CategoryItemLabelGenerator() {

                public String generateRowLabel(final CategoryDataset arg0, final int arg1) {
                    // TODO Auto-generated method stub
                    return null;
                }

                public String generateLabel(final CategoryDataset dataset1,final int series,final int category) {
                    String result = null;
                    //CHAPTER 12\. ITEM LABELS 91
                    final Number value = dataset1.getValue(series, category);
                    if (value != null) {
                    final double v = value.doubleValue();
                    if (v > 0) {
                    result = value.toString(); // could apply formatting here
                    }
                    }
                    return result;
                    }

                public String generateColumnLabel(final CategoryDataset arg0, final int arg1) {
                    // TODO Auto-generated method stub
                    return null;
                }
            });
            renderer1.setSeriesItemLabelsVisible(0,true);

            BarRenderer renderer = (BarRenderer) plot.getRenderer();
            renderer.setDrawBarOutline(false);
            renderer.setSeriesOutlinePaint(0,Color.BLACK);
            renderer.setDrawBarOutline(true);
            renderer.setMaximumBarWidth(0.02);
            renderer.setSeriesPaint(0,new Color(170, 0, 85));          

            CategoryAxis domainAxis = plot.getDomainAxis();
            domainAxis.setCategoryLabelPositions(CategoryLabelPositions.createUpRotationLabelPositions(.6));  
            domainAxis.setLabelFont(new Font("Helvetica", Font.BOLD, 14));
            domainAxis.setTickLabelFont(new Font("Helvetica", Font.BOLD, 14));

             //Behind Schedule "4"
             if(searchRatingElement.equalsIgnoreCase("4"))
             {           
                 System.out.println("||||||||||||||||||||||||||||||||searchRatingElement"+searchRatingElement);
                 numOfSupplrs = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.bhndschpctforchart");
             }
             else 
             {
                 numOfSupplrs = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.ovrshptpctforchart");
             }

            ValueAxis axis2 = new NumberAxis(numOfSupplrs);
            axis2.setLabelFont(new Font("Helvetica", Font.BOLD, 14));    
            axis2.setTickLabelFont(new Font("Helvetica", Font.PLAIN, 14));
            //if(!this.isValueDataZeros)
                //axis2.setRange(0,13);
            plot.setRangeAxis(1, axis2);

            NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
           // if(!this.isNumberDataZeros)
                //rangeAxis.setRange(0,90);
           //rangeAxis.setTickUnit(new NumberTickUnit(1)); 
           rangeAxis.setLabelFont(new Font("Helvetica", Font.BOLD, 14));
           rangeAxis.setTickLabelFont(new Font("Helvetica", Font.PLAIN, 14));

            LineAndShapeRenderer renderer2 = new LineAndShapeRenderer();
            renderer2.setSeriesPaint(0, Color.BLUE);
            /*Start */
            renderer2.setSeriesItemLabelGenerator(0,new CategoryItemLabelGenerator() {

                public String generateRowLabel(final CategoryDataset arg0, final int arg1) {
                    // TODO Auto-generated method stub
                    return null;
                }

                public String generateLabel(final CategoryDataset dataset1,final int series,final int category) {
                    String result = null;
                    //CHAPTER 12\. ITEM LABELS 91
                    final Number value = dataset1.getValue(series, category);
                    if (value != null) {
                    final double v = value.doubleValue();
                    if (v > 0) {
                    result = value.toString(); // could apply formatting here
                    }
                    }
                    return result;
                    }

                public String generateColumnLabel(final CategoryDataset arg0, final int arg1) {
                    // TODO Auto-generated method stub
                    return null;
                }
            });
            renderer2.setSeriesItemLabelsVisible(0,true);
            /* End */
            plot.setRenderer(1, renderer2);
            plot.setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);

            ChartUtilities.writeChartAsPNG(response.getOutputStream(), chart,
                    1150, 450);
    }
    /**
     * 
     */
    public DefaultCategoryDataset createDataSetForPercentBasedChart1()
    {
        String METHOD_NAME = "createDataSetForPercentBasedChart1";
        log.entering(CLASS_NAME, METHOD_NAME);

        DefaultCategoryDataset dataSetForOccurrenceBasedChart = new DefaultCategoryDataset();

        boolean flagForPercentPareto = false;
        String occurrenceCountLabelName = null;
        try
        {
            if(paretoReportBasedDataQO != null && paretoReportBasedDataQO.size()>0)
            {
                //Behind Schedule "4"
                if(searchRatingElement.equalsIgnoreCase("4"))
                {            
                    occurrenceCountLabelName = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.bhndschpctforchart");
                }
                else 
                {
                    occurrenceCountLabelName = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.ovrshptpcs");
                }
                if(!flagForPercentPareto)
                {
                    for(int i =0;i<paretoReportBasedDataQO.size();i++)
                    {
                        dataSetForOccurrenceBasedChart.addValue(paretoReportBasedDataQO.get(i).getOverShipmentPiecesCount(), occurrenceCountLabelName, paretoReportBasedDataQO.get(i).getSupplierName());
                    }
                }
            }
        }
        catch(Exception exceptionOccurrenceBasedChart)
        {
            flagForPercentPareto = true;
            System.out.println("Exception In createDataSetForPercentBasedChart1 : "+exceptionOccurrenceBasedChart.getMessage());
        }

        log.exiting(CLASS_NAME, METHOD_NAME);
        return dataSetForOccurrenceBasedChart;
    }
    /**
     * 
     */
    public DefaultCategoryDataset createDataSetForPercentBasedChart2()
    {
        String METHOD_NAME = "createDataSetForPercentBasedChart2";
        log.entering(CLASS_NAME, METHOD_NAME);

        DefaultCategoryDataset dataSetForOccurrenceBasedChart = new DefaultCategoryDataset();

        boolean flagForPercentPareto = false;
        String occurrenceCountLabelName = null;
        try
        {
            if(paretoReportBasedDataQO != null && paretoReportBasedDataQO.size()>0)
            {
                if(searchRatingElement.equalsIgnoreCase("4"))
                {            
                    occurrenceCountLabelName = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.bhndschpctforchart");
                }
                else 
                {
                    occurrenceCountLabelName = I18nMessageUtil.getMessage(CommonUtil.getLocale(), "label.reports.wdid.ovrshptpctforchart");
                }
                if(!flagForPercentPareto)
                {
                    for(int i =0;i<paretoReportBasedDataQO.size();i++)
                    {
                        dataSetForOccurrenceBasedChart.addValue(paretoReportBasedDataQO.get(i).getOverShipmentPercentageCount(), occurrenceCountLabelName, paretoReportBasedDataQO.get(i).getSupplierName());
                    }
                }
            }
        }
        catch(Exception exceptionOccurrenceBasedChart)
        {
            flagForPercentPareto = true;
            System.out.println("Exception In createDataSetForPercentBasedChart2 : "+exceptionOccurrenceBasedChart.getMessage());
        }

        log.exiting(CLASS_NAME, METHOD_NAME);
        return dataSetForOccurrenceBasedChart;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:45:10.127

如果你把标签放在另一个位置怎么办？例如：

```
renderer.setBasePositiveItemLabelPosition(
new ItemLabelPosition(ItemLabelAnchor.CENTER, TextAnchor.CENTER)); 
```

# sql - 按升序排列

> ID：13717636
> 
> 赞同：0
> 
> 时间：2012-12-05T06:35:48.727
> 
> 标签：sql, oracle, plsql, oracle-apex

我在 Apex 中对 POPUP LOV 使用了以下查询

```
select VEN_INVOICE_REFNO as display_value, VEN_INVOICE_REFNO as return_value 
  from VENDORINVOICE
 order by 1 asc; 
```

我想按数字顺序（即按升序）向我显示图中所示的值。我已经尝试了我知道的所有可能的方法，但它不起作用。

![在此处输入图像描述](../Images/e90082b22a025705d63c6461dd30ddbd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:37:07.843

试试这个 ：：

```
select VEN_INVOICE_REFNO as display_value, VEN_INVOICE_REFNO as return_value 
  from VENDORINVOICE
 order by ORDER BY CAST(`display_value` AS SIGNED) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:38:50.543

您的字段数据类型似乎是字符串，将其转换为数字然后应用`order by`

```
select CAST(VEN_INVOICE_REFNO AS INTEGER) as display_value, VEN_INVOICE_REFNO as return_value 
 from VENDORINVOICE
 order by 1 asc; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T06:44:38.903

我记得我曾经遇到过这个问题，我最终将它乘以 1

类似的东西（不确定它是否会起作用，您可能需要将 VEN_INVOICE_REFNO 转换为数字）

```
select (VEN_INVOICE_REFNO * 1) as display_value, VEN_INVOICE_REFNO as return_value 
  from VENDORINVOICE
 order by 1 asc; 
```

像这样：

```
select CONVERT((VEN_INVOICE_REFNO * 1),UNSIGNED INTEGER) as display_value, VEN_INVOICE_REFNO as return_value 
  from VENDORINVOICE
 order by 1 asc; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T07:01:25.710

如果任何记录具有非数字值，则此处的其他解决方案将不起作用，因此此处的 FWIW 是另一种解决方案：

```
select VEN_INVOICE_REFNO as display_value, VEN_INVOICE_REFNO as return_value 
from VENDORINVOICE
order by LPAD(VEN_INVOICE_REFNO,100,' ') asc; 
```

只需更改`100`为列的最大大小即可。

但是，如果列有任何负数或小数（浮点）数值，我的解决方案将不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T06:47:03.813

试试这个

> 选择 VEN_INVOICE_REFNO 作为 display_value，VEN_INVOICE_REFNO 作为 return_value 从 VENDORINVOICE order by VEN_INVOICE_REFNO

# php - 从 html 表单中提取数据并使用 php 与数据库中的字段进行比较

> ID：13717638
> 
> 赞同：0
> 
> 时间：2012-12-05T06:35:57.940
> 
> 标签：php, mysql

我一直在努力解决这个问题，但它不起作用。我可以从数据库中检索所有数据，但我想从用户在表单中输入的 html 表单中检索作业名称，并且用户也在表单中输入位置，并将这些文本与作业名称和位置字段进行比较数据库上的一个表。我知道这听起来令人困惑，但这是我的代码，什么都不做：

```
<html>
<body>
<?php
ob_start();
$host=""; // Host name 
$username= ""; // Mysql username 
$password=""; // Mysql password 
$db_name=""; // Database name 
$tbl_name=""; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// Define $myusername and $mypassword 
$job=$_POST['jobName'];
$mylocation=$_POST['location'];

// To protect MySQL injection (more detail about MySQL injection)
$job = stripslashes($job);
$mylocation = stripslashes($mylocation);
$job = mysql_real_escape_string($job);
$mylocation = mysql_real_escape_string($mylocation);

$sql="SELECT * FROM ".$tbl_name." WHERE jobName='".$job."' and      location='".$mylocation."';";

$result=mysql_query($sql);

$num=mysql_numrows($result);

mysql_close();
?>
<table border="0" cellspacing="2" cellpadding="2">
<tr>
<td><font face="Arial, Helvetica, sans-serif">jobName</font></td>
<td><font face="Arial, Helvetica, sans-serif">jobType</font></td>
<td><font face="Arial, Helvetica, sans-serif">Location</font></td>
<td><font face="Arial, Helvetica, sans-serif">Description</font></td>
<td><font face="Arial, Helvetica, sans-serif">Contact</font></td>
</tr>

<?php
$i=0;
while ($i < $num) {

$job=mysql_result($result,$i,"jobName");
$type=mysql_result($result,$i,"jobType");
$myLocation=mysql_result($result,$i,"location");
$desc=mysql_result($result,$i,"description");
$cont=mysql_result($result,$i,"contact");
?>

<tr>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $job; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $type; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $myLocation; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $desc; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $cont; ?></font></td>
</tr>

<?php
$i++;
}
ob_end_flush();
?>
</body>
</html> 
```

我只需要一个很好的教程来帮助我，尽管到目前为止我没有研究任何东西可以帮助我，也许我可以得到一个说明类似问题的示例代码，或者帮助我解释我在这个代码上哪里出错了。我很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:42:15.443

您需要在此页面或指向此页面的其他页面上使用 HTML 表单。应该看起来像

```
<form method="post" action="file-above.php" (leave action attribute empty if it's in the same file)>
 <input type="text" name="jobName" />
 <input type="text" name="location" />
</form> 
```

上面的代码只是为了向您展示事情应该如何工作，它并不完整。

# javascript - 环境 通过使用 javascript 的对话框标记属性（颜色和大小）

> ID：13717642
> 
> 赞同：-3
> 
> 时间：2012-12-05T06:36:20.990
> 
> 标签：javascript, plugins, ckeditor

我正在寻找信息以通过使用 javascript 的对话框设置 hr 标记的颜色和大小。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:39:35.917

当然，分配`id`给这个标签来操纵 css 和 javascript。下面的例子没有经过测试（我只是在这里写的），但给了你整个画面。将所有代码复制粘贴到 HTML 文件中，保存并运行它

```
<div>
<a onClick="JavaScript: functionBlue()">make blue</a> <br>
<a onClick="JavaScript: functionRed()">make red</a>
</div>

<div id="hrBlock"><hr id="yourClass1"></div> 
```

然后使用 css 并创建

```
<style>
  #yourClassRed
  {
   color:red;
  } 

  #yourClassBlue
  {
   color:blue;
  } 
</style> 
```

等等......通过谷歌阅读CSS

完成 css 后，您可以使用 javascript 向 DIV 添加新元素。

```
<script>

function functionBlue(){
document.getElementById("hrBlock").innerHTML = "<hr id=\"yourClassBlue\">";
}

function functionRed(){
document.getElementById("hrBlock").innerHTML = "<hr id=\"yourClassRed\">";
}

</script> 
```

# asp.net-mvc-3 - CKEditor 文件上传

> ID：13717647
> 
> 赞同：1
> 
> 时间：2012-12-05T06:36:28.627
> 
> 标签：asp.net-mvc-3, ckeditor

我在我的 .NET MVC 3.0 项目中使用 CkEditor。我在 CKEditor 中实现了文件上传，并且工作正常。

下面是 CKEditor 中文件上传屏幕的截图，当我浏览并选择文件然后按“发送到服务器”时，我想在同一屏幕上显示文件上传控件的“请稍候”文本或“请稍候”闪烁。

![在此处输入图像描述](../Images/4d0f9402297ac6884652a606bee77fee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:21:58.393

注意：我写了这个插件。

您可以使用[easyupload 插件](http://www.martinezdelizarrondo.com/ckplugins/easyupload.demo/)，尽管目前它不会将进度效果应用于默认对话框，仅应用于它替换的对话框。

# javascript - 如何使用 JavaScript 在同一页面上显示多个错误消息

> ID：13717648
> 
> 赞同：1
> 
> 时间：2012-12-05T06:36:27.817
> 
> 标签：javascript

我正在处理 java 脚本，我被困在一个阶段。在我的项目中，我必须在提交表单时验证所有字段，并在表单字段上方的订单列表中的同一页面上显示错误消息。下面是我的代码

```
function validation(){
    var errorMsg=new Array(); 
    //var errorMsg = "";
    if(document.getElementById("fullname").value = " "){
        errorMsg[0] = "Please Enter Full Name\n"
}
if(document.getElementById("street").value = " "){
        errorMsg[1]= "Please Enter Street Name\n"
}
if(document.getElementById("postcode").value = " "){
        errorMsg[2]= "Please Enter Postlecode\n"
}
if(document.getElementById("phone").value = " "){
        errorMsg[3]= "Please Enter Phone Number\n"
}
if(document.getElementById("email").value = " "){
        errorMsg[4]= "Please Enter Email Id\n"
}
if(errorMsg!=" "){
    var r =" ";
    for(var i=0;i<=errorMsg.length-1;i++){
    document.getElementById("error").innerHTML="<li>"+errorMsg[i]+"</li>"
    }   
    return false;
}
}
</script> 
```

当我运行这段代码时，它只给了我最后一个值

谁能帮助我如何在表单顶部显示错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T06:47:31.403

你这里有一个错误：

```
document.getElementById("error").innerHTML="<li>"+errorMsg[i]+"</li>" 
```

您需要附加`errorMsg`，而不是分配它。例如像这样：

```
document.getElementById("error").innerHTML+="<li>"+errorMsg[i]+"</li>" 
```

如果你想在页面顶部显示错误信息，你应该创建 div，在你想要的地方，给这个 div id 并将 innerHtml 设置为这个 div：

```
<div id="AllErrors"></div>

document.getElementById("AllErrors").innerHTML+="<li>"+errorMsg[i]+"</li>" 
```

您还可以在用户输入时改进您的验证和验证字段，而不是在他提交所有信息之后。

顺便说一句，您在 tag 中添加了错误`<li>`。那么，您知道您还应该添加`<ol>`或`<ul>`制作列表吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:47:22.230

您需要将每个错误*附加*`.innerHTML`到现有的而不是覆盖现有的：

```
document.getElementById("error").innerHTML += "<li>"+errorMsg[i]+"</li>"
// note += instead of = here --------------^ 
```

虽然可以完全跳过循环并这样做：

```
document.getElementById("error").innerHTML = "<li>"+errorMsg.join("</li><li>")+"</li>"; 
```

（该`.join()`方法将所有数组元素放入由指定文本分隔的字符串中。）

此外，如果仅满足您的某些条件，则您的数组将具有未定义（缺失）的元素，因为您明确设置了特定索引，这意味着您将添加`<li>`其中显示“未定义”的元素。你应该这样做：

```
 errorMsg.push("Please Enter Full Name\n");
    // OR
    errorMsg[errorMsg.length] = "Please Enter Full Name\n"; 
```

...其中任何一个都将添加到数组的末尾。然后测试是否有任何错误：

```
if (errorMsg.length > 0) 
```

此外，您的 if 语句中的条件都在进行赋值，因为它们使用`=`它们应该使用的位置`===`（或`==`），并且您正在测试每个字段是否包含一个空格：`" "`我认为您想通过比较来测试每个字段是否为空空字符串：`""`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T06:51:33.870

我重写了你的代码。这是我所做的更改：

*   我没有检查值是否等于`" "`，而是使用了`!`运算符。
*   我`push`在数组上使用过，而不是按索引追加。这意味着您的阵列中没有空位。`push`将元素添加到数组的末尾，而不考虑索引。
*   我`forEach`在数组上使用了一个循环。这会遍历所有可枚举的元素，无论有多少。

所以，这个例子：

## JS

```
// This could be done on form submit, I used a button for the fiddle.
document.getElementById("button").onclick = function () {   
    var errorMsg = new Array();

    if(!document.getElementById("fullname").value){
        errorMsg.push("Please Enter Full Name");
    }

    if(!document.getElementById("street").value){
        errorMsg.push("Please Enter Street Name");
    }

    if(!document.getElementById("postcode").value){
        errorMsg.push("Please Enter Postal Code");
    }

    if(!document.getElementById("phone").value){
        errorMsg.push("Please Enter Phone Number");
    }

    if(!document.getElementById("email").value){
        errorMsg.push("Please Enter Email Id");
    }

    var messageHtml = "";

    errorMsg.forEach(function (message) {
        messageHtml += "<li>" + message + "</li>";
    });

    document.getElementById("error").innerHTML = messageHtml;
}; 
```

看到这个小提琴：http: [//jsfiddle.net/M48gA/](http://jsfiddle.net/M48gA/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T06:41:10.163

您必须使用`===`or`==`而不是`=`in`if`语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T06:45:29.120

那是因为“错误”的 innerHtml 总是被替换。所以只显示最后一个值。

试试下面的链接

[是否可以在不破坏后代事件侦听器的情况下附加到 innerHTML？](https://stackoverflow.com/questions/595808/is-it-possible-to-append-to-innerhtml-without-destroying-descendants-onclick-fu)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T06:48:47.107

`=`是赋值运算符。在您的`if`语句中，您必须使用等于`==`或完全等于`===`（也检查类型）。

您还需要`+=`在语句列表中使用 add to existing 运算符：

```
if(document.getElementById("fullname").value == " "){
    errorMsg[0] = "Please Enter Full Name\n"
}
if(document.getElementById("street").value == " "){
    errorMsg[1]= "Please Enter Street Name\n"
}
if(document.getElementById("postcode").value == " "){
    errorMsg[2]= "Please Enter Postlecode\n"
}
if(document.getElementById("phone").value == " "){
    errorMsg[3]= "Please Enter Phone Number\n"
}
if(document.getElementById("email").value == " "){
    errorMsg[4]= "Please Enter Email Id\n"
}
for(var i=0;i<=errorMsg.length-1;i++){
    document.getElementById("error").innerHTML += "<li>"+errorMsg[i]+"</li>"
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-22T11:17:15.760

我想您可以简单地尝试在每种情况下将错误消息附加到标签。

插入数组会将“未定义”值放入数组中。例如，如果您输入了有效的全名，那么errorMsg[0] 将不会有任何内容。如果您输入无效的街道，errorMsg[1] 将有一个条目“请输入街道名称\n”。

现在，当您要提交表单时，例如使用提交按钮，您将收到无效街道的错误消息，但会在数组的第一个位置获得“**未定义”。**

# jquery - IE 9 文件上传问题

> ID：13717649
> 
> 赞同：1
> 
> 时间：2012-12-05T06:36:30.410
> 
> 标签：jquery, file, internet-explorer, spring-mvc, file-upload

我有一个 html 文件输入元素（）。单击时弹出浏览图像。一旦选择了使用 jquery 提交的表单。

这在 chrome、FF 和 Safari 中运行良好。

但是在 IE 9 中，控制台中出现了一个 JS 错误，说“script5：访问被拒绝”，并且根本没有进入我的控制器。

我的应用程序是一个 spring mvc 应用程序。

请让我知道解决方法。

# magento - 有没有办法在本地开发机器上运行受 ioncube 保护的代码？

> ID：13717651
> 
> 赞同：0
> 
> 时间：2012-12-05T06:36:46.807
> 
> 标签：magento, plugins

我购买了一个使用 ioncube 保护的 magento 扩展，因此它只能被许可用于特定域。但是，我需要先在本地开发机器上对其进行自定义，然后再将其放到服务器上。所以我有两个问题：

1.  是否可以在本地机器上运行它，因为它通常会引发权限错误。

2.  修改代码后，我是否可以将修改后的代码放在服务器上，以便它可以正常工作，因为它受 ioncube 保护？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:51:46.210

IonCube 加载器是免费的，您只需下载它并将其安装在本地开发环境中。

如果您在本地计算机上安装了加载程序，则问题可能是由加密代码检查的许可证文件。如果是这种情况，并且您合法地购买了扩展，您应该能够联系开发人员并让他们将开发主机名添加到许可证中。我知道 Unirgy 过去曾为我们做过这件事。或者，开发人员有时会检查 localhost 以允许开发，因此如果您在本地使用不同的域名，将其更改为 localhost 可能会解决问题。

您不应该更改任何文件（开发人员提供的许可证除外），因此将代码重新投入生产应该不是问题。

# javascript - 取消未填充所有值的 href 情况

> ID：13717660
> 
> 赞同：2
> 
> 时间：2012-12-05T06:37:04.870
> 
> 标签：javascript, jquery, html, href

我有一个功能可以检查是否通过按下按钮填充了值，如果没有全部完成我想取消按钮的href。

我试过这个：

```
<a href="XXX.html"  data-role="button" data-transition="none"
                data-theme="b" onclick="Check(); return false;" data-icon="forward" data-iconpos="left">
            </a> 
```

并且还试图从函数中返回 false。

两种方式都行不通！

我可以取消href的另一种方法是什么？

我尝试了这些事情：

```
function Check(event) {

    if (Testing the values ​​filled) {
     //Do something
    }
    else {
//One of the two following lines
        event.preventDefault();
        $("#xxx .ui-btn").unbind('click');
    } 
```

}

即使那些东西不起作用，他也会来其他但它并没有取消href

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:38:36.377

您需要使用[event.preventDefault()](http://api.jquery.com/event.preventDefault/)，

**[现场演示](http://jsfiddle.net/rajaadil/bTXFq/1/)**

使用jquery绑定事件

```
$('a[data-role=button]').click(Check); 
```

Javascript函数

```
function Check(event)
{
   //Your code
   if(condition) // some condition if required.
     event.preventDefault()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:52:54.513

你可以使用`unbind`，

```
function Check(){
   if(condition){
      $('a[data-role=button]').unbind('click');
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T07:05:51.820

您也可以使用 die() 事件代替 unbind 事件。

```
function Check(){
  if(condition){
      $('a[data-role=button]').die('click');
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T07:08:46.657

我解决了如下问题：

```
function Check() {
  if (Testing the values ​​filled) {
   //Do something
  }
  else {
   $("#xxx .ui-btn").attr('href', "javascript:void(0)");
  } 
```

谢谢大家的帮助

# java-me - 如何限制用户在 J2ME 的 LWUIT 数字文本字段中输入 0（零）？

> ID：13717667
> 
> 赞同：2
> 
> 时间：2012-12-05T06:37:40.563
> 
> 标签：java-me, validation, lwuit-textarea

我想创建允许所有数字> 0的文本字段所以我做了这样的事情：

```
TextField textField = new TextField();    
textField.setConstraint(TextField.NUMERIC); 
```

但我没有得到如何限制用户输入零。帮我解决这个问题.....!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:32:18.510

您可能必须扩展 TextEditor 类并确保屏幕上没有绘制零。另一种更简单的方法是验证用户输入的数据，如果它包含零，则显示不允许零的提示。

# javascript - 将环境细节注入 AngularJS 控制器

> ID：13717670
> 
> 赞同：3
> 
> 时间：2012-12-05T06:37:49.003
> 
> 标签：javascript, angularjs

让我们以[AngularJS 教程中的例子为例](http://docs.angularjs.org/tutorial/step_05)

```
function PhoneListCtrl($scope, $http) {
   $http.get('phones/phones.json').success(function(data) {
      $scope.phones = data;
   });

   $scope.orderProp = 'age';
}

//PhoneListCtrl.$inject = ['$scope', '$http']; 
```

现在，假设我不想对 url 进行硬编码，而是`'phones/phones.json'`更喜欢托管此控制器的页面来注入它，那么在 Angular JS 中做同样事情的正确方法应该是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T14:35:06.990

有很多方法可以做到这一点......最简单的方法就是使用`$window`，因此您将注入 $window 服务，而这基本上只是注入的全局 $window 。然后你可以注册这些路径`window.path = 'whatever.json';`，你会没事的：

```
window.path = 'some/path.json';

function PhoneListCtrl($scope, $http, $window) {
   $http.get($window.path).success(function(data) {
      $scope.phones = data;
   });

   $scope.orderProp = 'age';
} 
```

一种更高级的方法是创建一个包含您注入应用程序的服务的模块，在这种情况下，每个页面都有自己的模块：

```
 //create your module.
 angular.module('configData', [])
   .factory('pathService', function () {
        return {
           path: 'some/path.json'
        };
   });

//then inject it into your app
var app = angular.module('myApp', ['configData']);

app.controller('PhoneListCtrl', function($scope, $http, pathService) {
   $http.get(pathService.path).success(function(data) {
       $scope.phones = data;
   });

   $scope.orderProp = 'age';
}); 
```

当然，您可以在两者之间做任何事情。我建议采用最易于维护且易于测试的路径。

# java - java swing中找不到列错误消息

> ID：13717672
> 
> 赞同：0
> 
> 时间：2012-12-05T06:37:50.673
> 
> 标签：java, swing, ms-access

这些是我在 .entity 目录中的代码。

```
 public boolean createUser() {
    boolean success = false;
    DBController db = new DBController();
    db.setUp("IT Innovation Project");
    String sql = "INSERT INTO forumUsers(users_userName,users_password,users_NRIC)";
    sql += "VALUES ('" + userName + "','" + pwd + "','" + nric + "')";
    System.out.println(sql);
    if (db.updateRequest(sql) == 1)
        success = true;
    db.terminate();
    return success;
}

    public boolean retrieveUser() {
    boolean success = false;
    ResultSet rs = null;
    DBController db = new DBController();
    db.setUp("IT Innovation Project");
    String dbQuery = "SELECT * FROM forumUsers WHERE users_userName = '";
    dbQuery += userName + "'";
    rs = db.readRequest(dbQuery);
    try {
        if (rs.next()) {
            pwd = rs.getString("password");
            success = true;
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    db.terminate();
    return success;
} 
```

这些是我在用户界面类中的代码。

```
 if (userName.equals("")||pwd.equals("")||nric.equals(""))
        JOptionPane.showMessageDialog(null,"Please enter all text field");
    else{
        eForumUser user = new eForumUser (userName,pwd,nric);
        if (user.retrieveUser())
                JOptionPane.showMessageDialog(null,"User already exists! Cannot create.");
        else{
            if (user.createUser()==true);
            JOptionPane.showMessageDialog(null,"User record created successfull!");
        } 
```

我的数据库表有 users_userName、users_password、users_NRIC、users_securityQuestion、users_answer 列。

我可以在数据库中创建数据。但是，当我尝试使用 retrieveUser 方法检查用户名是否存在时，控制台显示“未找到列”错误消息。那么我应该怎么做才能解决这个问题呢？我的 retrieveUser 方法有问题吗？

我将我的 retriveUser 方法编辑为：

```
 public boolean retrieveUser() {
    boolean success = false;
    ResultSet rs = null;
    DBController db = new DBController();
    db.setUp("IT Innovation Project");
    String dbQuery = "SELECT * FROM forumUsers WHERE users_NRIC AND users_securityQuestion AND users_answer = '";
    dbQuery += userName + securityQuestion + answer + "'";
    rs = db.readRequest(dbQuery);
    try {
        if (rs.next()) {
            pwd = rs.getString("users_password");
            success = true;
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    db.terminate();
    return success;
} 
```

我尝试通过输入 nric、安全问题和答案来检索密码。这是用户界面的代码。

```
 public void submitForgotPwd(ActionEvent e){
    String nric = jTextField.getText();
    Object securityQuestion = jComboBox.getSelectedItem();
    String answer = jTextField1.getText();
    if (nric.equals("")||securityQuestion.equals("")||answer.equals("")){
        JOptionPane.showMessageDialog(null, "Please enter nric,security question and answer.");
    }else{
        eForumUser user = new eForumUser(nric,securityQuestion,answer);
        if (user.retrieveUser()==true){
        jTextField2.setText(user.getPwd());
        }else{
            JOptionPane.showMessageDialog(null,"Nric do not exist or wrong security question and answer");
        }
    }
} 
```

但是，我的检索不起作用。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:46:21.123

我认为你的问题在这里

```
pwd = rs.getString("password"); 
```

列名是 users_password

所以把它改成

```
 pwd = rs.getString("users_password"); 
```

# mysql - 如何在 mysql 中为第一行选择一个唯一值，然后对该值不显示任何内容，但显示所有记录？

> ID：13717682
> 
> 赞同：1
> 
> 时间：2012-12-05T06:38:50.330
> 
> 标签：mysql

有2个这样的mysql表

## 表格1

> --id-----config_name --1
> -----操作系统--2
> -----控制面板--3
> -----带宽

## 表 2

> id -- config_id--- config_Option_name --- 价格
> 1--------1-------------Windows 2008--------20.00
> 2--- ------1-------------CentOs 5----------------0.00
> 3-------- 2-- ------------whm/cPanel------------30.00
> 4--------2-------------Plesk -------------------50.00

* * *

现在我想像这样展示他们，只使用 MYSQL。

> 1.  操作系统
>     
>     Windows 2008 = 20.00
>     
>     CentOs 5 = 00.00
>     
>     
> 2.  控制面板
>     
>     whm/cPanel= 30.00
>     
>     Plesk = 50.00

这可能吗？所以现在“os”或“控制面板”被选择了一次，尽管如果我们使用 group by 或 join 它会出现两次。

使用单个 SQL 语句

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:41:04.960

不要像这样使用 SQL 来格式化输出。您应该在客户端执行此操作。

无论如何，这是一个仅在 SQL 中执行的查询（[SQLFiddle 演示](http://sqlfiddle.com/#!2/5f5a9/27)）：

```
select cfgN from
(
   select concat('\t',
                 CONFIG_OPTION_NAME,
                 '=',FORMAT(Price, 2) ) as cfgN, 
                 config_id,
                 t2.ID,
                 CONFIG_OPTION_NAME,
                 Price 
   from Table2 t2
   join Table1 t1 on (t2.config_id=t1.id)

   union all

   select concat(cast(id as char),
                 '. ',CONFIG_NAME) as cfgN, 
          id config_id,
          null ID,
          CONFIG_NAME, 
          null Price 
   from table1 

) t3 order by config_id,id 
```

# php - 使用 shell_exec 的 GPG 加密不适用于浏览器，但适用于终端

> ID：13717690
> 
> 赞同：0
> 
> 时间：2012-12-05T06:39:31.830
> 
> 标签：php, gnupg

这是我在浏览器上运行的代码。它将加密文件，输出将在不同的路径中。我可以用终端运行它，但不能在浏览器上运行。有人说我应该检查我的网络配置，但我对此感到困惑。提前致谢！=)

```
<?php
    echo 1;

    shell_exec ("gpg --output /home/datafeeding/testing/sampledick.xls.gpg --encrypt --recipient rtalplacido@yahoo.com /opt/jasperserver-3.5.0/apache-tomcat/webapps/JavaBridge/reports/sampledick.xls");

    echo 2;
    echo "<br>";

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T08:36:13.440

你最好使用 gnupg 的 php 扩展

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:18:32.157

添加**`--batch`**到您的`gpg`命令行可能会处理它，但您可能还应该添加**`--no-tty`**（**`--yes`**如果您希望它覆盖文件）。

手册页有详细`gpg`信息，但应该涵盖它。

# ios - 在 ios 中的 openCV 示例中未启动 iOS 模拟器

> ID：13717694
> 
> 赞同：0
> 
> 时间：2012-12-05T06:39:36.513
> 
> 标签：ios, xcode

我已经在我的 iOS 应用程序中集成了 openCV 框架。它已经编译成功。但是当我单击运行时，它会显示 Status 和 Running ，几秒钟后它会显示 Finished Running 。但该应用程序没有启动 iOS 模拟器。请帮我解决这个问题。我已经下载了一些 OpenCV 示例。那些也表现得像上面那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:20:49.183

尝试删除内容`~/Library/Application Support/iPhone Simulator`并重新运行

# wpf - 如何布局控件并使其可调整大小

> ID：13717695
> 
> 赞同：0
> 
> 时间：2012-12-05T06:39:37.230
> 
> 标签：wpf

我想将下面列出的控件放置在 WPF 中。请举一个例子来做同样的事情。

![布局](../Images/06eb5481420d210deda94f3dbb071c02.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:44:31.867

```
<Grid x:Name="ContentRoot">
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="200"/>
    <ColumnDefinition Width="*"/>
    <ColumnDefinition Width="100"/>
    <ColumnDefinition Width="100"/>
  </Grid.ColumnDefinitions>

  <TextBlock Grid.Column="0" .../>
  <TextBox Grid.Column="1" .../>
  <Button Grid.Column="2" .../>
  <Button Grid.Column="3" .../>
</Grid> 
```

假设它`ContentRoot`直接放在你的 中`Window`，它将继承它的`Width`和`Height`从`Window`. 然后它将 200px 分配给第 0 列，并将 100px 分配给第 2 列和第 3 列。任何剩余空间都将分配给第一列。

当然，您可以将 200、100 和 100 更改为您想要的任何值。

如果需要，在第一个中添加`MinWidth="<value>"`（替换`<value>`为数字）`ColumnDefnition`以指定该列必须具有的最小宽度。

# android - 使用 SDK 在 twitter 上共享 android 图像

> ID：13717697
> 
> 赞同：2
> 
> 时间：2012-12-05T06:40:06.433
> 
> 标签：android, twitter, upload, photo, twitter4j

我正在尝试使用**twitter4j库****上传和共享**图像，但无法共享。谁能给我一个在 twitter 上共享图像的工作演示，在 twitter 上上传图像共享。我在**google 和 Stackoverflow**上搜索了很多，但没有找到合适的答案。我已经尝试使用 twitter4j 2.2.5 和 2.1.6 但没有运气:(如果有人帮助我，我将不胜感激。

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:00:09.930

我已经解决了..当我更新库时自动导入对我不起作用我使用了这些库

*   twitter4j-core-3.0.2.jar
*   twitter4j-media-support-3.0.2.jar

这些进口

```
import oauth.signpost.OAuth;
import twitter4j.StatusUpdate;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.auth.AccessToken;
import twitter4j.conf.Configuration;
import twitter4j.conf.ConfigurationBuilder;
import twitter4j.media.ImageUpload;
import twitter4j.media.ImageUploadFactory;
import android.content.SharedPreferences; 
```

这是在 twitter 上分享图片的代码

```
 String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
            String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

            AccessToken a = new AccessToken(token, secret);
            Twitter twitter = new TwitterFactory().getInstance();
            twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
            twitter.setOAuthAccessToken(a);

            ConfigurationBuilder cb = new ConfigurationBuilder();
            cb.setDebugEnabled(true).setOAuthConsumerKey(yourConsumerKey).setOAuthConsumerSecret(yourConsumerSeceret).setOAuthAccessToken(yourAccessToken).setOAuthAccessTokenSecret(yourAccessTokenSeceret);

            Configuration conf = cb.build();

            ImageUploadFactory factory = new ImageUploadFactory(conf);
            ImageUpload upload = factory.getInstance();
            String url = upload.upload(yourImage, yourCaptionWithImage); //image is a File Format and Caption is String 
```

upload.upload 用图片更新你的推特状态****

# google-app-engine - GAE 数据存储 ID

> ID：13717699
> 
> 赞同：1
> 
> 时间：2012-12-05T06:40:16.883
> 
> 标签：google-app-engine, google-cloud-datastore

我创建了两个不同的实体，一个是用户，一个是他们可以创建的消息。我为每个用户分配了一个 ID，然后想将此 ID 分配给该用户创建的每条消息。我该怎么办？我必须在查询中这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:19:48.450

假设您使用的是 Python NDB，您可以使用以下内容：

```
class User(ndb.Model):
    # put your fileds here

class Message(ndb.Model):
    owner = ndb.KeyProperty()
    # other fields 
```

创建并保存用户：

```
user = User(field1=value1, ....)
user.put() 
```

创建并保存消息：

```
message = Message(owner=user.key, ...)
message.put() 
```

根据用户查询消息：

```
messages = Message.query().filter(Message.owner==user.key).fetch() # returns a list of messages that have this owner 
```

有关 NDB 的更多信息，请查看[Python NDB API](https://developers.google.com/appengine/docs/python/ndb/)。

此外，您应该查看[Python Datastore](https://developers.google.com/appengine/docs/python/datastore/)，以便更好地了解 App Engine 中的数据建模。

# android - 我们可以分享 GooglePlus_ClientID 和 GoogkePlus_simpleAPI_key 吗？

> ID：13717710
> 
> 赞同：1
> 
> 时间：2012-12-05T06:41:28.887
> 
> 标签：android, google-api, google-plus

我想为我的 Android 应用程序使用 googleplus API。

我可以在 menifest.xml 文件中共享我的 googeplus 客户端 ID 和 API 密钥而不会损害任何安全性吗？

有人可以使用此信息进行一些恶意活动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:44:36.090

他们可能会通过冒充您的应用程序耗尽您的 API 调用配额。然后您的应用程序将停止工作（如果他们禁止您的密钥，则暂时或永久停止工作）。也就是说，要使您的应用程序正常工作，它们需要在应用程序内部，因此您必须将它们放在那里。您可能会尝试对它们进行一些混淆以使它们不那么明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T21:09:21.123

在 Android 中设置客户端身份验证有比使用简单 API 密钥更好的方法。完整说明可从[Android 版 Google+ 平台页面获得](https://developers.google.com/+/mobile/android/getting-started)。在高层次上，采取了以下步骤：

1.  使用您的包名称和 Android 密钥库中的签名指纹为 Android 创建一个客户端 ID。这将保护您的应用程序，因为只有您可以签署您的应用程序。
2.  使用[Google Play 服务 SDK](https://developer.android.com/reference/com/google/android/gms/plus/package-summary.html)对 Google+ API 执行操作。

您不需要像对 Web 应用程序一样进行身份验证，因为您的包及其证书足以识别您的应用程序。因此，每个应用程序都需要一个唯一的包。

# internet-explorer - IE中的骨干路由器

> ID：13717711
> 
> 赞同：6
> 
> 时间：2012-12-05T06:41:35.813
> 
> 标签：internet-explorer, backbone.js, backbone-routing

当用户点击某些 URL 路由时，我正在使用 Backbone.js 路由器触发某些初始化方法。因此，`/posts/1`通过 vanilla 锚标记应该触发与`/posts/:id`我的 Backbone 路由器相关联的任何回调。设置时，这在现代浏览器中运行良好`Backbone.history.start({ pushState : true })`。但是，*在 IE*中，尝试点击的用户`/posts/1`将被重定向到`/#posts/1`，这只是我的主页，带有无意义的哈希字符串。

需要明确的是，我不需要 pushState。我不想将URL**推送到浏览器历史记录。**我只是想阅读它们，然后触发回调，这在任何浏览器中都应该是可行的。

看起来像简单的功能，但我很难过。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T15:04:59.153

我可以在这里回答我自己的问题。我在这里需要的功能类型可以通过以下方式实现：

```
var suffix_pattern = new RegExp('\/?' + config.history_root + '\/?','i');

// if IE
if (!Modernizr.history) {

    // initialize router/Backbone.history, but turn off route parsing,
    // since non-window.history parsing will look for a hash, and not finding one,
    // will break our shit.
    Backbone.history.start({ silent: true, hashChange: true });

    // convert any post-# elements to a standard URL to be parsed by our router
    var subroute = window.location.hash.replace('#', '/').split('?')[0],
           route = window.location.pathname.replace(suffix_pattern, '') + subroute;

    Backbone.history.loadUrl(route);
} else {
    Backbone.history.start({ pushState: true, silent: true });
    Backbone.history.loadUrl(Backbone.history.getFragment().replace(suffix_pattern, '').split('?')[0]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T16:34:32.707

这对我有用：Backbone.history.start({root: '/my_app_dir_here/'});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T18:27:18.807

如果您不关心不支持 pushState 的浏览器中的 ajax 页面加载，请使用 option `{hashChange: false}`。每次路由更改时，这都会导致页面加载困难。

例如

`Backbone.history.start({ pushState: true, hashChange:false });`

来自 Backbone.js 文档：

> 如果您想使用 pushState，但浏览器本身不支持它，而是使用全页刷新，您可以将 {hashChange: false} 添加到选项中。

# visual-studio-2010 - 增量链接导致 MASM 程序的意外反汇编

> ID：13717712
> 
> 赞同：0
> 
> 时间：2012-12-05T06:41:40.697
> 
> 标签：visual-studio-2010, assembly, linker, masm

不久前，我发布了[这个](https://stackoverflow.com/questions/13080069/visual-studio-only-breaks-on-second-line-of-assembly)关于我在尝试单步执行 MASM 程序时遇到的奇怪行为的问题。

本质上，给定以下代码：

```
; Tell MASM to use the Intel 80386 instruction set.
.386
; Flat memory model, and Win 32 calling convention
.MODEL FLAT, STDCALL
; Treat labels as case-sensitive (required for windows.inc)
OPTION CaseMap:None

include windows.inc
include masm32.inc
include user32.inc
include kernel32.inc
include macros.asm

includelib masm32.lib
includelib user32.lib
includelib kernel32.lib

.DATA
    BadText     db      "Error...", 0
    GoodText    db      "Excellent!", 0

.CODE
main PROC
        int 3
        mov eax, 6
        xor eax, eax
_label: add eax, ecx
        dec ecx
        jnz _label
        cmp eax, 21
        jz _good
_bad:   invoke StdOut, addr BadText
        jmp _quit
_good:  invoke StdOut, addr GoodText
_quit:  invoke ExitProcess, 0
main ENDP
END main 
```

我无法获得`int 3`触发指令。很清楚为什么没有，检查反汇编：

```
00400FFD  add         byte ptr [eax],al  
00400FFF  add         ah,cl  
--- [User path]\main.asm 
        mov eax, 6
00401001  mov         eax,6  
        xor eax, eax
00401006  xor         eax,eax  
_label: add eax, ecx 
```

该`int 3`指令已被替换为`add al,cl`，但我不知道为什么。我设法跟踪问题是否启用了增量链接。上面的反汇编是在禁用增量链接的情况下生成的（命令行上的 /INCREMENTAL:NO 选项）。重新启用它会导致如下结果：

```
.CODE
main PROC
        int 3
00401010  int         3  
        mov eax, 6
00401011  mov         eax,6  
        xor eax, eax
00401016  xor         eax,eax 
```

我应该注意，交错行是对原始代码的引用（我猜是 Visual Studio 反汇编窗口的一个功能）。启用增量链接后，反汇编完全符合我在程序中编写的内容，这就是我一直期望它的行为方式。

那么，为什么禁用增量链接会导致我的程序的反汇编被更改？幕后可能发生的事情会真正改变程序的执行方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:07:13.077

“add”指令是一个双字节指令，第二个是 int3 的 1 字节操作码。两字节相加指令的第一个字节可能是入口点之前的一些垃圾。add 指令的地址可能是 int3 指令所在位置的 1 个字节。

我用 GNU as en objdump 快速组装然后反汇编了这两条指令，结果是：

```
 8:    00 cc                   add    %cl,%ah
  a:    cc                      int3 
```

这里可以清楚的看到add指令包含第二个字节0xcc，而int3是0xcc

IOW 确保您在入口点开始反汇编以避免此问题。

# python-3.x - sqlachemy 在选择时出现 %s 的奇怪行为

> ID：13717713
> 
> 赞同：1
> 
> 时间：2012-12-05T06:41:50.510
> 
> 标签：python-3.x, sqlalchemy

e 是我的引擎，我可以使用它进行常规选择、插入等操作，但是当我想做一个“选择或忽略”类型的任务时，我会得到一个奇怪的行为：

```
e.execute('insert into users (username) select %s where not exists (select 1 from users where username = %s);', 'toto', 'toto') 
```

我得到：

```
Traceback (most recent call last):
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/base.py", line 1416, in _cursor_executemany
    context)
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/default.py", line 298, in do_executemany
    cursor.executemany(statement, parameters)
  File "/projects/bin/packages/pg8000/dbapi.py", line 243, in _fn
    return fn(self, *args, **kwargs)
  File "/projects/bin/packages/pg8000/dbapi.py", line 370, in executemany
    self._execute(operation, parameters)
  File "/projects/bin/packages/pg8000/dbapi.py", line 319, in _execute
    self.cursor.execute(new_query, *new_args)
  File "/projects/bin/packages/pg8000/interface.py", line 301, in execute
    self._stmt.execute(*args, **kwargs)
  File "/projects/bin/packages/pg8000/interface.py", line 136, in execute
    self._row_desc, cmd = self.c.bind(self._portal_name, self._statement_name, args, self._parse_row_desc, kwargs.get("stream"))
  File "/projects/bin/packages/pg8000/protocol.py", line 933, in _fn
    return fn(self, *args, **kwargs)
  File "/projects/bin/packages/pg8000/protocol.py", line 1116, in bind 
    return reader.handle_messages()
  File "/projects/bin/packages/pg8000/protocol.py", line 901, in handle_messages 
    retval = handler(msg, *args, **kwargs)
  File "/projects/bin/packages/pg8000/protocol.py", line 1155, in _bind_nodata
    reader.handle_messages()
  File "/projects/bin/packages/pg8000/protocol.py", line 906, in handle_messages 
    raise exc
pg8000.errors.ProgrammingError: (b'ERROR', b'23505', b'duplicate key value violates unique constraint "users_pkey"')

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/base.py", line 1790, in execute
    return connection.execute(statement, *multiparams, **params)
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/base.py", line 1191, in execute
    params)
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/base.py", line 1287, in _execute_text
    return self.__execute_context(context)
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/base.py", line 1297, in __execute_context
    context.parameters, context=context)
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/base.py", line 1423, in _cursor_executemany
    context)
  File "/usr/lib/python3/dist-packages/sqlalchemy/engine/base.py", line 1360, in _handle_dbapi_exception
    from e
sqlalchemy.exc.ProgrammingError: (ProgrammingError) (b'ERROR', b'23505', b'duplicate key value violates unique constraint "users_pkey"') 'insert into users (username) select %s where not exists (select 1 from users where username = %s);' [('x', 'o', 'x', 'o'), ('x', 'o', 'x', 'o')] 
```

该值（xoxo）不在该表中，即使从头开始重新创建表，我也会得到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:50:05.873

无法使用最近的 SQLA 版本重现。什么 SQLA 版本？什么pg8000版本？看看你是否可以将你的 pg8000 升级到最新版本，它并不是一个真正的活跃项目。psycopg2 更适合一般用途。

```
from sqlalchemy import create_engine
e = create_engine("postgresql+pg8000://scott:tiger@localhost/test", echo=True)

c = e.connect()
t = c.begin()
c.execute("create table users (username varchar(50) primary key)")

for i in range(10):
    c.execute('insert into users (username) select %s where not exists '
        '(select 1 from users where username = %s);', 'toto', 'toto')

t.rollback() 
```

输出：

```
2012-12-07 09:48:15,381 INFO sqlalchemy.engine.base.Engine select current_schema()
2012-12-07 09:48:15,382 INFO sqlalchemy.engine.base.Engine ()
2012-12-07 09:48:15,387 INFO sqlalchemy.engine.base.Engine BEGIN (implicit)
2012-12-07 09:48:15,387 INFO sqlalchemy.engine.base.Engine create table users (username varchar(50) primary key)
2012-12-07 09:48:15,387 INFO sqlalchemy.engine.base.Engine ()
2012-12-07 09:48:15,413 INFO sqlalchemy.engine.base.Engine insert into users (username) select %s where not exists (select 1 from users where username = %s);
2012-12-07 09:48:15,413 INFO sqlalchemy.engine.base.Engine ('toto', 'toto')
2012-12-07 09:48:15,422 INFO sqlalchemy.engine.base.Engine insert into users (username) select %s where not exists (select 1 from users where username = %s);
2012-12-07 09:48:15,422 INFO sqlalchemy.engine.base.Engine ('toto', 'toto')
2012-12-07 09:48:15,424 INFO sqlalchemy.engine.base.Engine insert into users (username) select %s where not exists (select 1 from users where username = %s);
2012-12-07 09:48:15,424 INFO sqlalchemy.engine.base.Engine ('toto', 'toto')
2012-12-07 09:48:15,426 INFO sqlalchemy.engine.base.Engine insert into users (username) select %s where not exists (select 1 from users where username = %s);
2012-12-07 09:48:15,426 INFO sqlalchemy.engine.base.Engine ('toto', 'toto')
2012-12-07 09:48:15,427 INFO sqlalchemy.engine.base.Engine insert into users (username) select %s where not exists (select 1 from users where username = %s);
2012-12-07 09:48:15,427 INFO sqlalchemy.engine.base.Engine ('toto', 'toto')
2012-12-07 09:48:15,428 INFO sqlalchemy.engine.base.Engine insert into users (username) select %s where not exists (select 1 from users where username = %s);
2012-12-07 09:48:15,428 INFO sqlalchemy.engine.base.Engine ('toto', 'toto')
2012-12-07 09:48:15,429 INFO sqlalchemy.engine.base.Engine insert into users (username) select %s where not exists (select 1 from users where username = %s);
2012-12-07 09:48:15,429 INFO sqlalchemy.engine.base.Engine ('toto', 'toto')
2012-12-07 09:48:15,431 INFO sqlalchemy.engine.base.Engine insert into users (username) select %s where not exists (select 1 from users where username = %s);
2012-12-07 09:48:15,431 INFO sqlalchemy.engine.base.Engine ('toto', 'toto')
2012-12-07 09:48:15,432 INFO sqlalchemy.engine.base.Engine insert into users (username) select %s where not exists (select 1 from users where username = %s);
2012-12-07 09:48:15,432 INFO sqlalchemy.engine.base.Engine ('toto', 'toto')
2012-12-07 09:48:15,433 INFO sqlalchemy.engine.base.Engine insert into users (username) select %s where not exists (select 1 from users where username = %s);
2012-12-07 09:48:15,433 INFO sqlalchemy.engine.base.Engine ('toto', 'toto')
2012-12-07 09:48:15,434 INFO sqlalchemy.engine.base.Engine ROLLBACK 
```

# html - 如何使用可拖动的 jQuery UI 选择包含中的多个区域

> ID：13717715
> 
> 赞同：1
> 
> 时间：2012-12-05T06:42:03.817
> 
> 标签：html, jquery-ui

嗨，我想在使用拖放时使用 jQuery UI 可拖动来选择包含多个区域。我已经使用`containment:["#area1","#area2","#area3"]`，也使用名称区域制作了单个类并应用于所有 div 但仍然无法正常工作，甚至尝试过`containment: '#area1, #area2, #area3'`但仍然无法正常工作。它只取第一个容器。请建议

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-25T05:45:01.753

您可以使用 ui 包含选项，如下所示：

```
containment:'selector1, selector2,selector3...' 
```

# wpf - 如何降低 MS WPF Ribbon 控件的透明度？

> ID：13717727
> 
> 赞同：0
> 
> 时间：2012-12-05T06:42:58.317
> 
> 标签：wpf, wpf-controls, ribbon, ribbon-control

在 Windows 7 中 MS WPF Ribbon 控件实例的默认透明度太高。如何降低 MS WPF Ribbon 控件的透明度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:56:55.787

修改 BackgroundBrush 的透明度似乎可以解决问题......

# java - 识别扫描仪中的新行

> ID：13717728
> 
> 赞同：0
> 
> 时间：2012-12-05T06:42:59.643
> 
> 标签：java, java.util.scanner

> **可能重复：**
> [Java：扫描仪在换行处停止](https://stackoverflow.com/questions/10891511/java-scanner-stopping-at-new-line)

我是编程新手，我想知道是否有办法识别`Scanner`. 我的方法应该是`Scanner`一个文本文件，如果它超过 60 个字符，则在不中断单词中间的情况下换行。

我遇到的问题是，由于我使用每个标记，我的代码不考虑少于 60 个字符的行，并将它们附加到前一行最多 60 个字符。

这是我创建的方法：

```
public static void wordWrap3(Scanner s) {
    String k = "";
    int length = 0;
    while(s.hasNext()) {
        k = s.next();
        length = length + k.length() + 1;
        if (length>60) {
            System.out.print("\n");
            length = 0;
        }
        System.out.print(" " + k);
    }
} 
```

这是我正在使用的文本：

```
We're no strangers to love, You know the rules and so do I, 
A full commitment's what Im thinking of, You wouldn't get this from any other guy.
I just wanna tell you how I'm feeling, Gotta make you understand.
Never gonna give you up, Never gonna let you down, Never gonna run around and desert you.
Never gonna make you cry, Never gonna say goodbye, Never gonna tell a lie and hurt you. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:18:47.320

您似乎在说您想分别对每一行进行自动换行。如果是这样，简单的解决方案是将输入分成几行，然后为每行创建一个扫描仪并将其传递给您现有的`wordWrap3`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:59:43.857

你可以试试：

```
 String fileLine = "";
 while(s.hasNextLine()) {
     fileLine = s.nextLine();
     if(fileLine.length() > 60 )
     {
         while (fileLine.length() > 60)
         {
             String tempStr = fileLine.substring(0, 60);
             int rightIdx = tempStr.lastIndexOf(' ');
             String firstStr = tempStr.substring(0, rightIdx);
             String secStr = fileLine.substring(rightIdx + 1, fileLine.length());
             System.out.println(firstStr);
             //if still it is big
             if(secStr.length() > 60)
                 fileLine = secStr;
             else
             {
                 System.out.println(secStr);
                 break;
             }
         }
     }
     else
     {
         System.out.println(fileLine);
     }
 } 
```

当然可以进一步改进。

# java - 在java中搜索模式

> ID：13717730
> 
> 赞同：0
> 
> 时间：2012-12-05T06:43:33.493
> 
> 标签：java

是的，伙计们，这是一种家庭作业……但您的帮助将不胜感激……

抱歉之前的问题不完整..我是新手，所以请不要介意...

我有一个字符串，例如“你好吗”，我想比较的字符串是“是”。

现在的问题是找到“are”的出现，如果它显示为“aare”，它会被忽略，因为它完全变成了一个不同的词，如果它显示为“you a re”，它会被接受，因为'you ' 将被视为不同的模式，而 'a re' 将被视为另一种模式，如果它显示为“uare”，则会被拒绝，因为它形成了“特定模式，如空格词空格词......所以你也将成为”的一部分are'，因此它应该被拒绝'，如果它显示为“you are e”，则它被接受，“you are”也被接受。

*   “aare” 它被忽略
*   “you a re”它被接受
*   “uare”被拒绝
*   “你是”它被接受
*   “你是”也被接受

我尝试了以下代码：

```
public class testPattern1 {

    public static void main(String args[])
    {
        String a="How aare yoar u a r e yo ar e";
        String compare="are";

        int i,temp=0;
        for(i=0;i<a.length();i++)
        {
            if (a.charAt(i)==compare.charAt(0))
            {
                temp=i;
                temp++;

                for(int d=temp;d<a.length();)
                {
                    while(a.charAt(temp)==' ')
                    {
                        temp++;
                    }

                    if(a.charAt(temp)==compare.charAt(1))
                    {
                        temp++;
                    }
                    else
                    {
                        break;
                    }
                    while(a.charAt(temp)==' ')
                    {
                        temp++;
                    }
                    if(a.charAt(temp)==compare.charAt(2))
                    {
                        System.out.println("matched at"+temp);
                    }
                    else
                    {
                        System.out.println("not matched at"+temp);
                    }

                }

            }

        }

    }

} 
```

希望你们现在已经理解了这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:50:06.443

检查这是否适合您。

```
public static void main(String args[])
{
String line = "how aare you a re yo u a r e you ar e you a r e";

String [] occurence ={" are","a re","ar e","you a r e"};
int total = 0;
for(String occ:occurence){
     int size = (line.split(occ)).length;
     if(line.contains(occ) && !line.startsWith(occ) &&  !line.endsWith(occ)){
         size = size-1;  
     }else if(!line.contains(occ)){
         size = 0; 
     }
        System.out.println(occ+" "+ (size));
        total=total+size ;

}

System.out.println("Total Ocuurence "+total);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:49:49.960

```
 String line = "How aare yoar u a r e yo ar e";
    String pattern="are";
    String arraySt[]= line.split("\\s+");
    for(String temp :arraySt)
        if(temp.equals(pattern))
            System.out.println("Found"); 
```

# spring - Spring jdbc SQL Bad语法异常，选择列是否严格？

> ID：13717732
> 
> 赞同：0
> 
> 时间：2012-12-05T06:43:59.890
> 
> 标签：spring, spring-mvc, spring-security

当我尝试使用 Spring Security 通过数据库进行身份验证时，我搜索了几个示例，所有示例都类似于以下查询：

```
<authentication-manager>
   <authentication-provider>
    <jdbc-user-service data-source-ref="dataSource"

       users-by-username-query="
          select username,password, enabled 
          from users where username=?" 

       authorities-by-username-query="
          select u.username, ur.authority from users u, user_roles ur 
          where u.user_id = ur.user_id and u.username =?  " 

    />
   </authentication-provider>
</authentication-manager> 
```

如果我将更改如下查询是错误的吗？如果不是为什么？

```
<security:authentication-manager>
    <security:authentication-provider>
          <security:jdbc-user-service data-source-ref="dataSource"
                users-by-username-query="select login.name,login.passw from login where login.name=?"
          authorities-by-username-query="select login.name, login.type from login where login.name =?"/>

    </security:authentication-provider>
</security:authentication-manager> 
```

这是我的示例给出了一个错误的 SQL 异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:56:46.867

您可以使用别名：

```
users-by-username-query="select login.name username,login.passw password from login where login.name=?" 
```

但我想你也需要`enabled`。如果数据库中没有它，您可以在查询中将其硬编码为 true。

# objective-c - 在其他 NSArray 的基础上显示来自 NSArray 的值

> ID：13717735
> 
> 赞同：1
> 
> 时间：2012-12-05T06:44:20.760
> 
> 标签：objective-c, nsarray

（我英文不太好）。

**我有两个 NSArray。**

示例： **第一个 NSArray**正在存储

```
NSArray category= { ID:1,Name:Category1;ID:2, Name: Category2;ID:3, Name:Category3;} 
```

**第二个 NSArray**正在存储

```
 NSArray product= {cat_ID:1, Category-Name:Category1, product_ID:1, Name: Banana;
                cat_ID:1, Category-Name:Category1, product_ID:2, Name: apple;
                cat_ID:1, Category-Name:Category1, product_ID:3, Name: berry;
                cat_ID:2, Category-Name:Category2, product_ID:4, Name: cantaloupe;
                cat_ID:2, Category-Name:Category2, product_ID:5, Name: elderberry;
                cat_ID:2, Category-Name:Category2, product_ID:6, Name: ginger;
                cat_ID:2, Category-Name:Category2, product_ID:7, Name: watermelon;
                cat_ID:3, Category-Name:Category3, product_ID:8, Name: xigua;
                cat_ID:3, Category-Name:Category3, product_ID:9, Name: avocado;
                cat_ID:3, Category-Name:Category3, product_ID:10, Name: basil;
                cat_ID:3, Category-Name:Category3, product_ID:11, Name: alfalfa;
                cat_ID:3, Category-Name:Category3, product_ID:12, Name: blackcurrant;} 
```

我想要的是如果类别名称（我的意思是第一个 NSArray category.name）等于第二个 NSArray 的类别名称（我的意思是 product.Category-Name）然后打印所有产品名称。 **示例：category.name==** Category1；那么结果将是**Product.Name = Banana, Apple, Berry;**

这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:54:44.403

我建议您不要为这种逻辑制作 Array 。

你应该使用 NSDictionary/NSMutableDictionary。

然后您可以通过 NSPredicateFilter 轻松过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:01:22.090

根据您的类似 json 的表示法，我们将假设 "{...}" 中的键值对是 NSDictionary 对象。你有一个说 NSDictionary 对象的数组，“[{...},{...},...]”

要获取给定类别的产品：

```
NSString *category = @"Category1";
NSArray *result = [NSArray array];
for (NSDictionary *dic in products) {
    if ([[dic objectForKey:@"Category-Name"] isEqualToString: category])
        result = [result arrayByAddingObject: [dic objectForKey: @"Name"] ];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:46:37.500

您还可以使用紧凑的方式完成此任务`NSPredicate`

```
NSString *selectedCategory = @"Category1";

//filter array by category using predicate
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"Category-Name == %@", selectedCategory];

NSArray *filteredArray = [product filteredArrayUsingPredicate:predicate]; 
```

或关注我的博客[rajneesh071.blogspot.in](http://rajneesh071.blogspot.in/2012/10/predicates.html)了解更多信息

# java - Android listview排序使用xml解析

> ID：13717737
> 
> 赞同：0
> 
> 时间：2012-12-05T06:44:26.143
> 
> 标签：java, android, sorting, xml-parsing, hashmap

我在使用android时遇到了一些麻烦。我有一个使用 xml 解析从数据库中检索到的项目的排序列表视图。

我必须**在列表视图中显示产品并按价格排序**

这是我的 xml 提要：

```
<Feed>
<category>
<Product>
<Name>New Masters of Flash</Name>
<Price>79.99</Price>
</Product>
<Product>
<Name>Professional Java Server Programming</Name>
<Price>63.99</Price>
</Product>
<Product>
<Name>Designing Web Usability</Name>
<Price>80.00</Price>
</Product>
</category>
 </Feed> 
```

这是我的安卓代码：

```
public class Catalogue extends Activity {

// static String URL = "https://dl.dropbox.com/u/48258247/catalogue.json";
static final String URL = "http://192.168.1.168/xcart432pro/internet.xml";

 static String KEY_CATEGORY = "Product";
 static final String KEY_TITLE = "Name";

static final String KEY_DESCRIPTION = "Description";
static final String KEY_COST = "Price"; 
static final String KEY_THUMB_URL = "Image";

ListView list;
ListAdapter adapter;

/** Called when the activity is first created. */
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
     final ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();
        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_CATEGORY);

        // looping through all song nodes &lt;song&gt;
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key =&gt; value

            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
           map.put(KEY_DESCRIPTION, parser.getValue(e, KEY_DESCRIPTION));
            map.put(KEY_COST, parser.getValue(e, KEY_COST));
          map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

            // adding HashList to ArrayList
            songsList.add(map);
        }

        list=(ListView)findViewById(R.id.listView1);

        // Getting adapter by passing xml data ArrayList
        adapter=new ListAdapter(this, songsList);
        list.setAdapter(adapter);
       // Bundle bundle = getIntent().getExtras();

        // KEY_CATEGORY=bundle.getString(KEY_SUBCATE); 

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                HashMap<String, String> map = songsList.get(position);
                Intent in = new Intent(
                        Catalogue.this,
                        com.ssmobileproductions.catalogue.SingleMenuItem.class);
                in.putExtra(KEY_TITLE, map.get(KEY_TITLE));
                in.putExtra(KEY_DESCRIPTION, map.get(KEY_DESCRIPTION));
                in.putExtra(KEY_THUMB_URL, map.get(KEY_THUMB_URL));
                in.putExtra(KEY_COST, map.get(KEY_COST));
                startActivity(in);

            }

        }); 
```

在这里，我必须**在列表视图上显示产品，并按价格排序。**我该怎么做。请在 android 中以编程方式帮助我。

**编辑**：我添加了一些代码，如下所示：

```
Button btninsert = (Button) findViewById(R.id.sort);
   btninsert.setOnClickListener(new View.OnClickListener() {

        final ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    public void onClick(View v) {
        Collections.sort(songsList, new PriceComparator());
    }
    }); 
          final ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_CATEGORY); 
```

创建一个类并编写以下代码：

```
public class PriceComparator implements Comparator<HashMap<String, String>> {
static final String KEY_COST = "Price"; 

public PriceComparator() {
    // TODO Auto-generated constructor stub

}

public int compare(HashMap<String, String> map1, HashMap<String, String> map2) {
    return map1.get(KEY_COST).compareTo(map2.get(KEY_COST));
} 
```

现在我必须运行应用程序并单击按钮意味着什么都没有发生？？？？

但我必须显示产品列表按价格排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:55:42.800

我相信您需要使用自定义比较器：

```
Comparator<HashMap<String, String>> comparator = new Comparator<HashMap<String, String>>() {
    @Override
    public int compare(HashMap<String, String> map1, HashMap<String, String> map2) {
        return map1.get(KEY_COST).compareTo(map2.get(KEY_COST));
    }
}; 
```

然后在创建适配器之前对列表进行排序：

```
Collections.sort(songsList, comparator); 
```

* * *

**另外**
你需要做一些小的改变。

1.  制作`songsList`一个字段变量，例如`list`and `adapter`：

    ```
    ListView list;
    ListAdapter adapter;
    ArrayList<HashMap<String, String>> songsList; // Add me! 
    ```

2.  更新您的初始化方式`songsList`：

    ```
    songsList = new ArrayList<HashMap<String, String>>(); // Shorten me! 
    ```

3.  改变你的`onClick`方法：

    ```
    public void onClick(View v) {
        Collections.sort(songsList, comparator);
        adapter.notifyDataSetChanged(); // Add me!
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:56:42.897

> 在列表视图中显示产品并按价格排序

=> 因为你有 ArrayList>，你需要创建自定义比较器来进行比较。

例如：

```
public class PriceComparator implements Comparator<HashMap<String, String>> {

    public PriceComparator() {
        // TODO Auto-generated constructor stub
    }

    public int compare(HashMap<String, String> map1, HashMap<String, String> map2) {
        return map1.get(KEY_COST).compareTo(map2.get(KEY_COST));
    }
} 
```

并将此自定义比较器应用于您的 ArrayList>，请执行以下操作：

```
Collections.sort(mylist, new PriceComparator()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:56:34.970

使用 Hashtable 并对键进行排序，如下所示：

这里 hashTable 将包含名称和价格，而键将包含价格，因此对键进行排序，然后在 sortedItems Vector 中添加已排序的元素将返回已排序的元素。

```
Hashtable hash = new Hashtable();
Vector<String> sortedItems = new Vector<String>();
Enumeration enumeration = hash .keys();
        Vector keySet = new Vector();
        while (enumeration.hasMoreElements()) {
            keySet.add(enumeration.nextElement());
        }

        Collections.sort(keySet);
        Iterator i = keySet.iterator();
        String str;
        while (i.hasNext()) {
            str = (String) i.next();
            sortedItems.addElement(hash .get(str));
            Log.e("", (str + ":" + hash .get(str)));
        } 
```

# python - 在 python django 中出现“文件对象不存在”错误

> ID：13717739
> 
> 赞同：0
> 
> 时间：2012-12-05T06:44:36.437
> 
> 标签：python, django

我有一些没有附加文件的对象。

我有这个代码：

```
if os.path.isfile(object.pdf_file.url):
                object.url = object.pdf_file.url
            else:
                object.url = "" 
```

但我收到此错误：

```
The 'pdf_file' attribute has no file associated with it. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:00:36.847

```
if os.path.isfile(object.pdf_file.url): 
```

这将引发错误，因为您需要文件来获取 url。我认为即使文件存在也不会起作用，因为*isfile()*需要一个路径，而不是相对于您的 webserver/django-settings 的媒体 url 的 url，而不是它在服务器上的位置。

尝试：

```
if object.pdf_file:
    object.url = object.pdf_file.url
else:
    object.url = "" 
```

这将起作用，因为如果 FileField 为空，它将返回 None。

# java - java - 如何在java strust2中将jsp上显示的表格导出为pdf

> ID：13717743
> 
> 赞同：3
> 
> 时间：2012-12-05T06:44:54.020
> 
> 标签：java, javascript, struts2, pdf-generation, itext

这是我以表格格式显示的数据。我想在不使用 struts2 的显示标签库的情况下以 PDF 格式显示。

```
<table border="1" align="center" style="border-color: #CCCCCC; border-width: 1px; border-style: None; width: 1320px; border-collapse: collapse;" id="tablepaging">
    <tbody>
        <tr>
            <td>Leave ID</td>
            <td>FROM DATE</td>
            <td>TO DATE</td>
            <td>DAYS REQUESTED</td>
            <td>APPROVER</td>
            <td>NOTES</td>
            <td>REMARK</td>
            <td>IS PLANNED</td>
            <td>REASON</td>
        </tr>
        <tr>
            <td>270</td>
            <td>12/27/12</td>
            <td>12/29/12</td>
            <td>2</td>
            <td>Sagar</td>
            <td>s</td>
            <td>s</td>
            <td>true</td>
            <td>s</td>
            <td>
                <a href="/HRIS_Updated/cancelRequest.action;jsessionid=A2313340A50DD2DAB054714BF65AB08B?leaveId=270" id="submitinvoice;jsessionid=A2313340A50DD2DAB054714BF65AB08B_">Cancel</a>
            </td>
            <td>
                <a href="/HRIS_Updated/requestHistory.action;jsessionid=A2313340A50DD2DAB054714BF65AB08B?leaveId=270" id="submitinvoice;jsessionid=A2313340A50DD2DAB054714BF65AB08B_">History</a>
            </td>
        </tr>
    </tbody>
</table> 
```

javascript或jquery可以吗？

请帮我一些代码，我已经用谷歌搜索了几天但一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:04:36.680

要从Java 中`PDF`的源生成 a ，您可以使用模块（现已弃用，新项目是 XMLWorker，但这取决于您使用的 iText 版本）。`HTML`[`iText's HTMLWorker`](http://www.rgagnon.com/javadetails/java-html-to-pdf-using-itext.html)

您可以在 Action 的 String 变量中模拟您在 JSP 页面上拥有的表格，比如说`CreatePDFAction`；

然后，从 JSP 调用`CreatePDFAction`提交按钮（如果需要，在新页面上打开 pdf）。

在 Struts.xml 中，将 result 声明`CreatePDFAction`为[`stream`result type](http://struts.apache.org/2.3.4/docs/stream-result.html)，使用适当的`contentType`( `application/pdf`)，以及`contentDisposition`指定文件名所需的内容，以及行为：下载它 ( `attachment`) 或在浏览器中打开它 ( `inline`)。

在`CreatePDFAction`操作中，您接收字符串，实例化一个新文档和一个新 HTMLWorker，将包含您的 HTML 的字符串提供给它，然后从生成的 PDF 中提取字节并将其放入通过操作通过 getter 公开的 InputStream。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:36:29.820

在 jsp 上使用显示表将其转换为 *pdf 以及 .csv、.excel 和儿子非常容易，这是示例代码；

```
<display:table id="data" name="${questions}" requestURI="" pagesize="10" export="true" >
    <display:column property="label" title="Question" sortable="true"/>
    <display:column title="Graph Analysis"> <img src="${imagePath}${reportData.clientName}/${data.label}.png"/></display:column>
    <display:setProperty name="export.pdf" value="true" />
</display:table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T07:17:32.987

据我所知，不幸的是javascript无法自行创建pdf文件。而且我还没有使用struts。但我推荐你 Displaytag 库，它非常易于使用:)

这是您特别需要的（**带有代码**）：[http ://displaytag.sourceforge.net/10/export.html](http://displaytag.sourceforge.net/10/export.html)

文档（从头到尾）：[http ://displaytag.sourceforge.net/10/displaytag.pdf](http://displaytag.sourceforge.net/10/displaytag.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T14:11:50.693

```
 Finaly i got the solution here is the code

          <script language="javascript" type="text/javascript">
                 function Retrivetable()
                {
                var table = document.getElementById("historyTable");

                if (table) {

                  // If outerHTML property available, use it
                  if (typeof table.outerHTML == 'string') {
                    $('#settable').val(table.outerHTML)
                  // Otherwise, emualte it
                  } else {
                    var div = document.createElement('div');
                    div.appendChild(table.cloneNode(true));
                    $('#settable').val(div.innerHTML);
                  }
                }
                } 
                </script>

    <s:submit
            onclick="Retrivetable()"
            value="Export to Pdf"  action="ExportToPdf" method="ExportPDF" align="bottom"/>

       In the action class  
public String ExportPDF()
    {   
            tablestruct = "<html><head></head><body>"+tablestruct+"</body></html>";
                    //System.out.println("After concat "+tablestruct);
                    try{
                        String filePath = ServletActionContext.getServletContext().getRealPath("/testpdf.pdf");
                        System.out.println(filePath);
                        Document document=new Document(PageSize.LETTER);
                        PdfWriter pdfWriter = PdfWriter.getInstance(document, new FileOutputStream(filePath));
                           document.open();
                           HTMLWorker htmlWorker = new HTMLWorker(document);
                           htmlWorker.parse(new StringReader(tablestruct));
                            document.close();
                            System.out.println("Done");
                            File file = new File(filePath);
                            inputStream = new DataInputStream( new FileInputStream(file));
                      }
                      catch (Exception e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T07:09:24.717

我不确定struts，我`itextpdf`在JSP中使用过。 [http://tutorials.jenkov.com/java-itext/getting-started.html](http://tutorials.jenkov.com/java-itext/getting-started.html)

希望它会有所帮助

# c++ - 如何让 MyClass 与 std::string 的 operator+ 一起工作

> ID：13717744
> 
> 赞同：2
> 
> 时间：2012-12-05T06:44:54.990
> 
> 标签：c++, operator-overloading, implicit-conversion, stdstring

我尝试了隐式转换，但这不起作用。

```
#include <string>
#include <iostream>

struct MyClass
{
    operator std::string() { return "bar"; }
};

int
main( int argc, char* argv[] )
{
    MyClass x;

    std::cout << std::string( "foo" ) + x << std::endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T06:53:20.967

隐式转换不起作用，因为字符串`operator+`是模板化的，并且您正在推断模板参数。这看起来像是对正在发生的事情的更好解释：[https ://stackoverflow.com/a/8892794/964135](https://stackoverflow.com/a/8892794/964135)

我只会做一个演员或写一个非模板`operator+`。

* * *

一个愚蠢的解决方案是不推断类型，然后它会进行隐式转换：

```
std::cout << std::operator+<char, std::char_traits<char>, std::allocator<char> >(std::string( "foo" ), x) << std::endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T06:46:25.360

您是否尝试过重载 + 运算符？

```
std::string operator+(std::string& str, MyClass& x){
    return str + "bar"
} 
```

这将是一个免费功能，而不是 MyClass 的一部分。此外，可能还需要重载可交换情况。如果没有关系，你可以用上面的方式来表达。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T07:02:39.457

对于 Karthik T 和 Pubby 给出的关于超载的好答案`operator+()`，我想补充一点。

通常，您需要访问`MyClass`重载`operator+()`代码内部的私有成员（与`return "bar";`您可能剥离的示例中的 as 不同）。在这种情况下，您需要将其声明为`friend`. 您不能将`operator+()`用作 的成员`MyClass`，因为`MyClass`位于运算符的左侧`+`。请参阅下面的示例代码。

```
#include <string>
#include <iostream>
using namespace std;

struct MyClass {
public:
    MyClass() : bar("bar") {}
    friend string operator+(string& str, MyClass& x);
private:
    string bar;
};

string operator+(string& str, MyClass& x) {
    return str + x.bar;
}

int main( int argc, char* argv[] )
{
    MyClass x;
    string foo("foo");

    std::cout <<  foo + x << std::endl;
    return 0;
} 
```

# java - Java代码运行时间差异b / w两个不同的平台

> ID：13717749
> 
> 赞同：2
> 
> 时间：2012-12-05T06:45:11.680
> 
> 标签：java, performance

我已经在两个不同的服务器上部署了 Java 代码。代码正在执行文件写入操作。

在本地服务器上，参数为：

unname -a

```
SunOS snmi5001 5.10 Generic_120011-14 sun4u sparc SUNW,SPARC-Enterprise 
```

ulimit -a

```
time(seconds)        unlimited
file(blocks)         unlimited
data(kbytes)         unlimited
stack(kbytes)        389296
coredump(blocks)     unlimited
nofiles(descriptors) 20000
vmemory(kbytes)      unlimited 
```

Java版本：

```
java version "1.5.0_12"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_12-b04)
Java HotSpot(TM) Server VM (build 1.5.0_12-b04, mixed mode) 
```

在不同的（假设是 MIT）服务器上：

unname -a

```
SunOS au11qapcwbtels2 5.10 Generic_147440-05 sun4u sparc SUNW,Sun-Fire-15000 
```

ulimit -a

```
time(seconds)        unlimited
file(blocks)         unlimited
data(kbytes)         unlimited
stack(kbytes)        8192
coredump(blocks)     unlimited
nofiles(descriptors) 256
vmemory(kbytes)      unlimited 
```

java版本

```
java version "1.5.0_32"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_32-b05)
Java HotSpot(TM) Server VM (build 1.5.0_32-b05, mixed mode) 
```

问题是代码在 MIT 服务器上运行速度明显较慢。由于两个操作系统的 nofiles 和堆栈的差异，我想如果我改变它`ulimit -s`，`ulimit -n`它会有所作为。我无法在没有确认问题的情况下更改 MIT 服务器上的参数，因此减少了本地服务器的 ulimit 参数并重新测试。但代码完成执行是同一时间。

我不知道可能导致这种情况的操作系统参数之间有什么区别。任何帮助表示赞赏。如果有人告诉我要寻找什么，我会发布更多参数。

**编辑：**

对于 MIT 服务器

CPU 数量：psrinfo -p 24 psrinfo -pv

```
The physical processor has 2 virtual processors (0 4)
  UltraSPARC-IV+ (portid 0 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (1 5)
  UltraSPARC-IV+ (portid 1 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (2 6)
  UltraSPARC-IV+ (portid 2 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (3 7)
  UltraSPARC-IV+ (portid 3 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (32 36)
  UltraSPARC-IV+ (portid 32 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (33 37)
  UltraSPARC-IV+ (portid 33 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (34 38)
  UltraSPARC-IV+ (portid 34 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (35 39)
  UltraSPARC-IV+ (portid 35 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (64 68)
  UltraSPARC-IV+ (portid 64 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (65 69)
  UltraSPARC-IV+ (portid 65 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (66 70)
  UltraSPARC-IV+ (portid 66 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (67 71)
  UltraSPARC-IV+ (portid 67 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (96 100)
  UltraSPARC-IV+ (portid 96 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (97 101)
  UltraSPARC-IV+ (portid 97 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (98 102)
  UltraSPARC-IV+ (portid 98 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (99 103)
  UltraSPARC-IV+ (portid 99 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (128 132)
  UltraSPARC-IV+ (portid 128 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (129 133)
  UltraSPARC-IV+ (portid 129 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (130 134)
  UltraSPARC-IV+ (portid 130 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (131 135)
  UltraSPARC-IV+ (portid 131 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (224 228)
  UltraSPARC-IV+ (portid 224 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (225 229)
  UltraSPARC-IV+ (portid 225 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (226 230)
  UltraSPARC-IV+ (portid 226 impl 0x19 ver 0x24 clock 1800 MHz)
The physical processor has 2 virtual processors (227 231)
  UltraSPARC-IV+ (portid 227 impl 0x19 ver 0x24 clock 1800 MHz) 
```

kstat cpu_info：

```
module: cpu_info                        instance: 231
name:   cpu_info231                     class:    misc
       brand                           UltraSPARC-IV+
       chip_id                         227
       clock_MHz                       1800
       core_id                         231
       cpu_fru                         hc:///component=SB7
       cpu_type                        sparcv9
       crtime                          587.102844985
       current_clock_Hz                1799843256
       device_ID                       9223937394446500460
       fpu_type                        sparcv9
       implementation                  UltraSPARC-IV+ (portid 227 impl 0x19 ver 0x24 clock 1800 MHz)
       pg_id                           48
       snaptime                        19846866.5310415
       state                           on-line
       state_begin                     1334854522 
```

对于本地服务器，我只能获取 kstat 信息：

```
module: cpu_info                        instance: 0
name:   cpu_info0                       class:    misc
        brand                           SPARC64-VI
        chip_id                         1024
        clock_MHz                       2150
        core_id                         0
        cpu_fru                         hc:///component=/MBU_A/CPUM0
        cpu_type                        sparcv9
        crtime                          288.5675516
        device_ID                       250691889836161
        fpu_type                        sparcv9
        implementation                  SPARC64-VI (portid 1024 impl 0x6 ver 0x93 clock 2150 MHz)
        snaptime                        207506.8330168
        state                           on-line
        state_begin                     1354493257

module: cpu_info                        instance: 1
name:   cpu_info1                       class:    misc
        brand                           SPARC64-VI
        chip_id                         1024
        clock_MHz                       2150
        core_id                         0
        cpu_fru                         hc:///component=/MBU_A/CPUM0
        cpu_type                        sparcv9
        crtime                          323.4572206
        device_ID                       250691889836161
        fpu_type                        sparcv9
        implementation                  SPARC64-VI (portid 1024 impl 0x6 ver 0x93 clock 2150 MHz)
        snaptime                        207506.8336113
        state                           on-line
        state_begin                     1354493292

Similarly total 59 instances . 
```

还有本地服务器的内存：vmstat

```
 kthr      memory            page            disk          faults      cpu
 r b w   swap  free  re  mf pi po fr de sr s0 s1 s4 s1   in   sy   cs us sy id
 0 0 0 143845984 93159232 431 895 1249 30 29 0 2 6 0 -0 1 3284 72450 6140 11 3 86 
```

MIT 服务器的内存：vmstat

```
kthr      memory            page            disk          faults      cpu
r b w   swap  free  re  mf pi po fr de sr m0 m1 m2 m3   in   sy   cs us sy id
0 0 0 180243376 184123896 81 786 248 15 15 0 0 3 14 -0 4 1854 7563 2072 1 1 98 
```

df -h 用于 MIT 服务器：

```
Filesystem             Size   Used  Available Capacity  Mounted on
/dev/md/dsk/d0         7.9G   6.7G       1.1G    86%    /
/devices                 0K     0K         0K     0%    /devices
ctfs                     0K     0K         0K     0%    /system/contract
proc                     0K     0K         0K     0%    /proc
mnttab                   0K     0K         0K     0%    /etc/mnttab
swap                   171G   1.7M       171G     1%    /etc/svc/volatile
objfs                    0K     0K         0K     0%    /system/object
sharefs                  0K     0K         0K     0%    /etc/dfs/sharetab
/platform/sun4u-us3/lib/libc_psr/libc_psr_hwcap2.so.1
                       7.9G   6.7G       1.1G    86%    /platform/sun4u-us3/lib/libc_psr.so.1
/platform/sun4u-us3/lib/sparcv9/libc_psr/libc_psr_hwcap2.so.1
                       7.9G   6.7G       1.1G    86%    /platform/sun4u-us3/lib/sparcv9/libc_psr.so.1
/dev/md/dsk/d3         7.9G   6.6G       1.2G    85%    /var
swap                   6.0G    56K       6.0G     1%    /tmp
swap                   171G    40K       171G     1%    /var/run
swap                   171G     0K       171G     0%    /dev/vx/dmp
swap                   171G     0K       171G     0%    /dev/vx/rdmp
/dev/md/dsk/d5         2.0G   393M       1.5G    21%    /home
/dev/vx/dsk/appdg/oravl
                       2.0G    17M       2.0G     1%    /ora
/dev/md/dsk/d60        1.9G   364M       1.5G    19%    /apps/stats
/dev/md/dsk/d4          16G   2.1G        14G    14%    /var/crash
/dev/md/dsk/d61       1005M   330M       594M    36%    /opt/controlm6
/dev/vx/dsk/appdg/oraproductvl
                        10G   2.3G       7.6G    24%    /ora/product
/dev/md/dsk/d63        963M   1.0M       904M     1%    /var/opt/app
/dev/vx/dsk/dmldg/appsdmlsvtvl
                       1.0T   130G       887G    13%    /apps/dml/svt
/dev/vx/dsk/appdg/homeappusersvl
                        20G    19G       645M    97%    /home/app/users
/dev/vx/dsk/dmldg/appsdmlmit2vl
                        20G    66M        20G     1%    /apps/dml/mit2
/dev/vx/dsk/dmldg/datadmlmit2vl
                       1.9T   1.1T       773G    61%    /data/dml/mit2
/dev/md/dsk/d62        9.8G    30M       9.7G     1%    /usr/openv/netbackup/logs 
```

df -h 用于本地服务器：

```
 Filesystem             Size   Used  Available Capacity  Mounted on
/dev/dsk/c0t0d0s0       20G   7.7G        12G    40%    /
/devices                 0K     0K         0K     0%    /devices
ctfs                     0K     0K         0K     0%    /system/contract
proc                     0K     0K         0K     0%    /proc
mnttab                   0K     0K         0K     0%    /etc/mnttab
swap                   140G   1.6M       140G     1%    /etc/svc/volatile
objfs                    0K     0K         0K     0%    /system/object
fd                       0K     0K         0K     0%    /dev/fd
/dev/dsk/c0t0d0s5      9.8G   9.3G       483M    96%    /var
swap                   140G   504K       140G     1%    /tmp
swap                   140G    80K       140G     1%    /var/run
swap                   140G     0K       140G     0%    /dev/vx/dmp
swap                   140G     0K       140G     0%    /dev/vx/rdmp
/dev/dsk/c0t0d0s6      9.8G   9.4G       403M    96%    /opt
/dev/vx/dsk/eva8k/tlkhome
                       2.0G    66M       1.8G     4%    /tlkhome
/dev/vx/dsk/eva8k/tlkuser4
                        48G    26G        20G    57%    /tlkuser4
/dev/vx/dsk/eva8k/ST82
                       1.1G    17M       999M     2%    /ST_A_82
/dev/vx/dsk/eva8k/tlkuser11
                        37G    37G       176M   100%    /tlkuser11
/dev/vx/dsk/eva8k/oravl97
                        20G    12G       7.3G    63%    /oravl97
/dev/vx/dsk/eva8k/tlkuser5
                        32G    23G       8.3G    74%    /tlkuser5
/dev/vx/dsk/eva8k/mbtlkproj1
                       2.0G    18M       1.9G     1%    /mbtlkproj1
/dev/vx/dsk/eva8k/Oravol98
                        38G    25G        12G    68%    /oravl98
/dev/vx/dsk/eva8k_new/tlkuser15
                        57G    57G         0K   100%    /tlkuser15
/dev/vx/dsk/eva8k/Oravol1
                        39G    16G        22G    42%    /oravl01
/dev/vx/dsk/eva8k/Oravol99
                        30G   8.3G        20G    30%    /oravl99
/dev/vx/dsk/eva8k/tlkuser9
                        18G    13G       4.8G    73%    /tlkuser9
/dev/vx/dsk/eva8k/oravl08
                        32G    25G       6.3G    81%    /oravl08
/dev/vx/dsk/eva8k/oravl07
                        46G    45G       1.2G    98%    /oravl07
/dev/vx/dsk/eva8k/Oravol3
                       103G    90G        13G    88%    /oravl03
/dev/vx/dsk/eva8k_new/tlkuser12
                        79G    79G         0K   100%    /tlkuser12
/dev/vx/dsk/eva8k/Oravol4
                        88G    83G       4.3G    96%    /oravl04
/dev/vx/dsk/eva8k/oravl999
                        10G   401M       9.0G     5%    /oravl999
/dev/vx/dsk/eva8k_new/tlkuser14
                        54G    39G        15G    73%    /tlkuser14
/dev/vx/dsk/eva8k/Oravol2
                        85G    69G        14G    84%    /oravl02
/dev/vx/dsk/eva8k/sdkhome
                       1.0G    17M       944M     2%    /sdkhome
/dev/vx/dsk/eva8k/tlkuser7
                        44G    36G       7.8G    83%    /tlkuser7
/dev/vx/dsk/eva8k/tlkproj1
                       1.0G    17M       944M     2%    /tlkproj1
/dev/vx/dsk/eva8k/tlkuser3
                        35G    29G       5.9G    84%    /tlkuser3
/dev/vx/dsk/eva8k/tlkuser10
                        29G    29G       2.7M   100%    /tlkuser10
/dev/vx/dsk/eva8k/oravl05
                        30G    29G       1.2G    97%    /oravl05
/dev/vx/dsk/eva8k/oravl06
                        36G    34G       1.6G    96%    /oravl06
/dev/vx/dsk/eva8k/tlkuser6
                        29G    27G       2.1G    93%    /tlkuser6
/dev/vx/dsk/eva8k/tlkuser2
                        36G    30G       5.8G    84%    /tlkuser2
/dev/vx/dsk/eva8k/tlkuser1
                        66G    49G        16G    75%    /tlkuser1
/dev/vx/dsk/eva8k_new/tlkuser13
                        84G    77G       7.0G    92%    /tlkuser13
/dev/vx/dsk/eva8k_new/tlkuser16
                        44G    37G       6.4G    86%    /tlkuser16
/dev/vx/dsk/eva8k/db2
                       1.0G   593M       404M    60%    /opt/db2V8.1
/dev/vx/dsk/eva8k/WebSphere6029
                       3.0G   2.2G       776M    75%    /opt/WebSphere6029
/dev/vx/dsk/eva8k/websphere6
                       2.0G    88M       1.8G     5%    /opt/websphere6
/dev/vx/dsk/eva8k/wli
                       4.0G   1.4G       2.5G    36%    /opt/wli10gR3MP1
/dev/vx/dsk/eva8k/user
                       2.0G    19M       1.9G     1%    /user/telstra/history
dvcinasdm3:/oracle_cdrom/data
                       576G   576G       206M   100%    /oracle_cdrom
dvcinasdm2:/system_kits
                       822G   818G       4.2G   100%    /system_kits
dvcinasdm2:/db_share   295G   283G        13G    96%    /db_share
dvcinas2dm2:/system_data/data
                       315G   283G        32G    90%    /system_data
dvcinas2dm2:/ossinfra/data
                        49G    18G        32G    36%    /ossinfra 
```

对于本地服务器，命令：`/usr/sbin/prtpicl -v | egrep "devfs-path|driver-name|subsystem-id" | nawk '/:subsystem-id/ { print $0; getline; print $0; getline; print $0; }' | nawk -F: '{ print $2 }'`给出：

```
subsystem-id     0x13a1
devfs-path       /pci@0,600000/pci@0/pci@8/pci@0/scsi@1
driver-name      mpt
subsystem-id     0x1648
devfs-path       /pci@0,600000/pci@0/pci@8/pci@0/network@2
driver-name      bge
subsystem-id     0x1648
devfs-path       /pci@0,600000/pci@0/pci@8/pci@0/network@2,1
driver-name      bge
subsystem-id     0xfc11
devfs-path       /pci@0,600000/pci@0/pci@8/pci@0,1/SUNW,emlxs@1
driver-name      emlxs
subsystem-id     0x125e
devfs-path       /pci@3,700000/network
driver-name      e1000g
subsystem-id     0x125e
devfs-path       /pci@3,700000/network
driver-name      e1000g
subsystem-id     0x13a1
devfs-path       /pci@10,600000/pci@0/pci@8/pci@0/scsi@1
driver-name      mpt
subsystem-id     0x1648
devfs-path       /pci@10,600000/pci@0/pci@8/pci@0/network
driver-name      bge
subsystem-id     0x1648
devfs-path       /pci@10,600000/pci@0/pci@8/pci@0/network
driver-name      bge
subsystem-id     0xfc11
devfs-path       /pci@10,600000/pci@0/pci@8/pci@0,1/SUNW,emlxs@1
driver-name      emlxs 
```

对于 MIT 服务器，它提供：

```
subsystem-id     0xfc00
devfs-path       /pci@3d,600000/SUNW,emlxs@1
driver-name      emlxs
subsystem-id     0xfc00
devfs-path       /pci@3d,600000/SUNW,emlxs@1,1
driver-name      emlxs
subsystem-id     0xfc00
devfs-path       /pci@5d,600000/SUNW,emlxs@1
driver-name      emlxs
subsystem-id     0xfc00
devfs-path       /pci@5d,600000/SUNW,emlxs@1,1
driver-name      emlxs 
```

在 i/o 消耗代码的开始，iostat -d c3t50001FE1502613A9d7 5 显示：

```
1161  37  134    0   0    0    0   0    0  329  24    2
  3   2    3    0   0    0    0   0    0  554  71   10
195  26    6    0   0    0    0   0    0  853 108   19
 37   6    4    0   0    0    0   0    0  1134 143   10
140   8    7    0   0    0    0   0    0  3689  86    7
173  24   85    0   0    0    0   0    0  9914  74    9
  0   0    0    0   0    0    0   0    0  12323 114    2
 13   9   41    0   0    0    0   0    0  10609 117    2
  0   0    0    0   0    0    0   0    0  10746  72    2
    sd0           sd1           sd4          ssd134
kps tps serv  kps tps serv  kps tps serv  kps tps serv
  1   0    3    0   0    0    0   0    0  11376 137    2
  2   0   10    0   0    0    0   0    0  11980 157    3
231  39   14    0   0    0    0   0    0  10584 140    3
785 175    5    0   0    0    0   0    0  13503 170    2
  9   4   32    0   0    0    0   0    0  11597 168    2
  7   1    6    0   0    0    0   0    0  11555 106    2 
```

在 MIT 服务器上 iostat 显示：

```
0.0  460.4    0.0 4029.2  0.4  0.6    0.9    1.2   2  11 c6t5006048452A79BD6d206
0.0  885.2    0.0 8349.3  0.5  0.8    0.6    0.9   3  24 c4t5006048452A79BD9d206
0.0  660.0    0.0 5618.8  0.5  0.7    0.7    1.0   2  18 c6t5006048452A79BD6d206
0.0  779.1    0.0 7408.6  0.3  0.7    0.4    0.8   2  21 c4t5006048452A79BD9d206
0.0  569.8    0.0 4893.9  0.3  0.5    0.5    1.0   2  15 c6t5006048452A79BD6d206
0.0  521.5    0.0 5433.6  0.2  0.5    0.3    0.9   1  16 c4t5006048452A79BD9d206
0.0  362.8    0.0 3134.8  0.2  0.4    0.6    1.1   1  10 c6t5006048452A79BD6d206 
```

因此，我们可以看到，在最大 i/o 操作期间，本地服务器的 kps 远高于 MIT 服务器的 kps。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:59:43.280

**本地和 MIT 服务器上的结论**

快速浏览您的机器：

*   本地服务器是 SPARC VI 上的小型 Sun Enterprise 机器，可能是[M4000](http://www.oracle.com/us/products/servers-storage/servers/sparc-enterprise/m-series/m4000/overview/index.html)。您正在使用直接 SCSI 连接通过多路径[PCIe 插槽](http://en.wikipedia.org/wiki/PCI_Express)在外部文件系统（称为 eva8k_new）上写入数据。这台机器是 3-5 岁。
*   MIT 服务器是[SunFire 15000](http://en.wikipedia.org/wiki/Sun_Fire_15K) - 一个旧的大型机级 Solaris 服务器。它在您运行的硬件分区中有 12 个双核 UltraSPARC IV+ CPU（物理机箱可以在逻辑上分成几个不同的硬件分区，它们根本看不到彼此）。[您正在通过多路径PCI 插槽](http://en.wikipedia.org/wiki/Conventional_PCI)上的 1Gb/s 或 2Gb/s 光纤通道（LUN 可能称为 dmldg）写入 SAN 。这台机器**至少有**7 年的历史，但技术却有 10 年的历史。
*   本地和 MIT 服务器上使用的存储系统都是外部的。存储的性能取决于许多因素，包括物理接口的 I/O 速度（PCI 与 PCIe）和互连（SunFire 上的 1 或 2Gb/s 光纤通道）。[本文](http://gurkulindia.com/main/2011/12/2870/)介绍了如何获取此信息。

**理论性能问题**

您的应用程序的性能可能会受到以下几个瓶颈之一的限制（假设没有代码问题和网络延迟/瓶颈）：

1.  CPU：如果您的 CPU 更快，您可以让应用程序运行得更快。
    *   单线程：一些应用程序在单线程上存在瓶颈，因此添加线程/内核不会提高性能。
    *   多线程能力：有时，如果应用程序是多线程的，添加更多线程/内核可以提高性能
2.  存储 IO 带宽或 IOPS：应用程序正在读取或写入存储系统（包括磁盘）。添加磁盘、更改 RAID 类型、添加磁盘缓存等可能会提高 IO 或 IOPS；或者，您可能会更改为另一个存储子系统。
    *   IO 带宽是在给定秒内可以传递的最大数据量，如果将数据流式传输到磁盘或从磁盘流出，则可能首先饱和
    *   IOPS（每秒 IO 操作数）是每秒可以处理的最大 IO 命令数（读或写）。通常，对于正在搜索或在文件中，或（重新）写入小块的进程，这首先会饱和。

查看您的问题，我们可以快速检查：

1.  如果问题是 CPU，那么：
    *   **您应该会看到顶部**的 java 进程的 CPU 利用率在程序执行期间非常**高**（90-99%）
    *   问题不太可能是线程，因为 SunFire MIT Server 有很多可用的内核，因此问题是**单线程性能**。
    *   UltraSPARC IV+ 比 SPARC VI 慢很多。这很容易引起明显的下降，因此这可能是 MIT 服务器较慢的原因
2.  如果问题是 IO，那么：
    *   您会看到**顶部**的java 进程的 CPU 利用率**很低**（根据经验，可能为 50% 或更低，但可能高达 80% 左右）
    *   您将使用 iostat saturate 看到磁盘子系统的 IO - 即立即上升到一个固定数字，而不是真正超过该数字的“峰值”。以下选项可能有用：`iostat -d <disk> 5`. 吞吐量值和操作数/秒在本地服务器上会更高，在 MIT 服务器上会更低
    *   您需要与管理员交谈以查看是否有更快的存储系统可用于 MIT 服务器。

以上所有都是假设服务器上的其他进程没有干扰您的程序的运行 - 显然另一个高 cpu 进程或一个写入同一个磁盘的大量进程会极大地影响性能。

**结论**

从您提供的 CPU 数据来看，没有证据表明存在 CPU 瓶颈。

根据`iostat`您提供的数据，正如您评论的那样，SunFire 上的 IO 明显低于本地服务器的 IO。这可能是附加存储的结果，即至少以下之一：

*   本地服务器中 PCI 与 PCIe 的性能较低
*   可能比本地服务器上的（可能更快）SCSI 附加存储慢 1Gb/s 光纤通道
*   SunFire 上较旧和较慢的磁盘与本地附加存储

（请注意，*相同*的SAN 似乎连接到本地服务器，因此可以对其进行测试）。

有明确的证据表明硬件是性能差异的原因，几乎没有什么可以做的。

不过，有些事情可能会提高应用程序的总体性能。在应用程序上运行 Java 分析器是个好主意。示例包括[Netbeans](http://profiler.netbeans.org/)和[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)。

分析器将识别出问题*所在*的 IO 操作。您或许能够：

1.  一般在瓶颈处改进算法
2.  使用缓存层在一次写入之前聚合多个写入操作
3.  如果使用原始 Java I/O 类（在 java.io 中），您可以重写应用程序以使用[Java NIO](http://en.wikipedia.org/wiki/New_I/O)

**编辑**：关于缓存层的想法

假设：有问题的 IO 操作*要么*重复地将小块写入磁盘并刷新它们，要么继续执行随机访问写入磁盘操作。您的应用程序可能已经有效地流式传输到磁盘，在这种情况下缓存将无用。

当您在应用程序中执行昂贵或缓慢的操作时，您将希望最小化它被调用的次数 - 理想情况下是理论上的最小值，希望为 1。但是您的代码可能不会这样做 - 例如您正在使用OutputStream 并将小块写入其中并刷新到磁盘。在这种情况下，您可能会多次写入每个磁盘块 (8k)，每次只需多一点数据。

相反，您可以使用 RAM 缓存来合并所有写入；当您知道不会再对该块进行写入时，您只需将其写入磁盘一次。对于流，Java 有[BufferedOutputStream](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedOutputStream.html)用于简单的情况。当您从 获取`FileOutputStream`实例时`File`，将 包装在`FileOutputStream`中`BufferedOutputStream`并仅使用`BufferedOutputStream`。

但是，如果您正在执行真正的随机访问写入（例如使用`java.io.RandomAccessFile`），并使用 移动文件指针`RandomAccessFile.seek()`，您可能需要考虑在 RAM 中写入写入缓存。确切地说，这完全取决于您的文件数据结构，但您可能希望从块分页机制开始。[Java NIO](http://www.lib.sict.edu.mn/ebooks/Java%20NIO.pdf)的第 1 章介绍了这些概念，但希望您不需要去那里，或者在 NIO API 中找到相近的匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:16:17.620

如果您担心性能，我不会使用这么旧的 Java 版本。为一种架构生成的操作系统调用和本机代码很可能是次优的。我预计较新的架构会受到影响。

你能比较这些机器之间的 Java 7 吗？

建议第一`ulimit`台机器有更多的资源。两台机器的CPU是什么型号，内存有多少？

# xpath - 我在 Selenium RC 中编写了 xpath，现在我想在 selenium Webdriver 中编写相同的 xpath。下面是xpath

> ID：13717754
> 
> 赞同：1
> 
> 时间：2012-12-05T06:46:12.510
> 
> 标签：xpath, webdriver, selenium-webdriver

我在 Selenium RC 中编写了 xpath，现在我想在 selenium Webdriver 中编写相同的 xpath。下面是xpath：

```
"//table[@id='lgnLogin']/tbody/tr/td/table/tbody/tr[4]/td" 
```

通过使用此 xpath，我正在捕获应用程序上显示的错误消息，例如“请检查您的密码”。

现在我该如何在 Webdriver 中编写它。我有不同的方法，但没有成功。

`"String msg= driver.findElement(By.xpath("//*[@td='error2']")).toString();"`- 这就是我在 Webdriver 中所做的。

请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:18:53.037

XPath 没有从 Selenium RC 更改为 WebDriver。

如果您能够使用一些 XPath 表达式，然后它也应该在 WebDriver 中工作（在 99% 的情况下像往常一样）。

下面的代码应该可以工作，但是如果没有看到你的 HTML 就很难回答。

```
String msg= driver.findElement(By.xpath("//table[@id='lgnLogin']/tbody/tr/td/table/tbody/tr[4]/td")).getText(); 
```

`//*[@td='error2']`- 这个表达式看起来很糟糕，因为它表示“任何具有名为“td”且值为“error2”的属性的元素。我想你的 HTML 中没有“td”属性。

并到最后。我不建议像您的示例那样使用如此长的 XPath 表达式。由于布局的任何微小变化，它可能会被破坏。最好使用一些特定的属性而不是长层次结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:08:12.870

一个好的开始方法是从基础开始：[http ://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example](http://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example)

findElement 所做的只是定位您想要与之交互的元素。找到元素后，您需要执行要对元素执行的操作。在您的情况下，您需要元素内的文本。因此，您可以查看 WebElement 接口的适当功能并使用适当的方法，在您的情况下，getText。

# .net - 媒体文件未通过 Azure 媒体服务上传

> ID：13717759
> 
> 赞同：1
> 
> 时间：2012-12-05T06:46:31.583
> 
> 标签：.net, azure, windows-media-services

我正在尝试将 mp4 文件上传到 azure 媒体服务中。只需上传，无需编码/加密。我的代码如下

```
CloudMediaContext context = new CloudMediaContext("<id>", "<secret>");
var asset = context.Assets.Create("MyFile", AssetCreationOptions.None);
var file = asset.AssetFiles.Create("MyFile.mp4");
file.Upload(@"e:\MyFile.mp4"); 
```

使用 Fiddler 我可以看到文件已上传。但是当我进入 Azure 管理控制台时，我可以看到一个名为“MyFile”的资产，但它的大小为 0！您能否提一些建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T18:40:02.603

SDK 中似乎存在导致内容大小为 0 的错误。显然它已在 SDK 的下一版本中修复。

有关详细信息，请参阅以下帖子中的评论： [最新 Azure 媒体 SDK 上的线程](http://social.msdn.microsoft.com/forums/da-dk/mediaservices/thread/7417b76a-d670-4b2c-8024-0e1c2ce4b803 "Azure 媒体服务 SDK")

# heroku - 不确定如何在 www.mydomain.com 上设置 CNAME 以使用 Heroku SSL

> ID：13717764
> 
> 赞同：0
> 
> 时间：2012-12-05T06:47:05.437
> 
> 标签：heroku, dns, cname

我已经设置了一个带有通用名称等的 SSL 证书作为“www.biglikeco.com”。我在我的 dns 中设置了 1 个 cname 以转到主要的 Heroku 应用程序区域 - 另一个 CNAME 记录应该是什么？我也在尝试让 SSL 在 'www.biglikeco.com' 上工作 - 这可能吗（例如[https://www.biglikeco.com](https://www.biglikeco.com)以及[http://www.biglikeco.com](http://www.biglikeco.com)）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:04:59.123

SSL 证书通常与 IP 地址相关联，而不是与 DNS 记录相关联。

您需要在 Web 服务器的配置中将 SSL 证书与您的 IP 相关联。如果您没有专用于托管站点安全版本的 IP 地址，则可以依赖服务器名称指示。服务器名称指示是 SSL 证书身份验证过程的扩展，以便将域名和 IP 地址发送到您的 Web 服务器。除了初始名称解析外，此过程不涉及 DNS（和 CNAME 记录）。

更新：您不需要第二个 IP 地址来托管您网站的安全版本。您可以将 Web 服务器配置为分别响应 HTTP 和 HTTPS。但是，SSL 证书仍然与您的 IP 地址密切相关。它不能用 DNS 中的 CNAME 重定向。

# uitableview - 我可以通过减少调用 [CALayer LayoutSubviews] 来使我的 tableview 移动得更流畅，以及如何？

> ID：13717765
> 
> 赞同：4
> 
> 时间：2012-12-05T06:47:14.043
> 
> 标签：uitableview, optimization, uiview, core-animation, layoutsubviews

根据时间概况，我发现我的应用由于调用了[UITable layoutSubviews]，在[CALayer layoutSublayers]上浪费了太多时间。所以生成tableview的动作并不流畅，每当第一次点击按钮时，我都会等待近2秒才能看到下一个视图。下一个视图的表格视图中的每个单元格都有 8 个子视图，导致 layoutSubviews 占用了太多时间。因此我想知道如何优化这个进度，我不想在它的drawrect中构建一个包含这8个子视图的自定义单元格：以避免layoutSubviews。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T09:32:37.410

我的猜测是，您所看到的只是一种症状，而不是真正的问题。

> 我会等待将近 2 秒，直到看到下一个视图

当您第一次尝试显示它时，您所描述的听起来像是您会预渲染*所有*表格视图的单元格（导致大量布局成本）。
在 中设置断点`cellForRowAtIndexPath:`，添加声音操作 + 激活“评估后自动继续”来调试它。
它应该只被调用 10 次左右（取决于同时可见的行数）。

如果您`heightForRowAtIndexPath:`在长列表中使用，那可能是您的问题的根源（取决于您的实施）。在这种情况下，请考虑避免使用它。如果您以 iOS 7 为目标，请查看`tableView:estimatedHeightForRowAtIndexPath:`它可能会有所帮助。（链接：[https](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html) ://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html ）。

# java - 支持 Javascript 和 CSS 的 JEditorPane

> ID：13717769
> 
> 赞同：13
> 
> 时间：2012-12-05T06:47:26.903
> 
> 标签：java, html, swing, jtextpane, jeditorpane

我正在使用 Swing，`JEditorPane`但它不支持 Javascript 或一些高级标签`<object>`等，也不支持颜色、字体样式大小等。

是否有任何解决方案使编辑器窗格可以显示 HTML 文件，因为它在普通 HTML 浏览器中显示？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-05T07:15:35.907

+1 给 mKorbel。

通过与 Swing 集成来使用支持 HTML5 的[JavaFX 。](http://www.oracle.com/technetwork/java/javafx/overview/index.html) [`WebView`](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)

这是一个例子：

![在此处输入图像描述](../Images/17ba9fe617a0fd6d4b0ef9175badf20f.png)

```
import java.awt.*;
import java.awt.event.*;
import java.net.MalformedURLException;
import java.net.URL;
import javafx.application.Platform;
import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import static javafx.concurrent.Worker.State.FAILED;
import javafx.embed.swing.JFXPanel;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebEvent;
import javafx.scene.web.WebView;
import javax.swing.*;

public class SimpleSwingBrowser implements Runnable {
    private JFXPanel jfxPanel;
    private WebEngine engine;

    private JFrame frame = new JFrame();
    private JPanel panel = new JPanel(new BorderLayout());
    private JLabel lblStatus = new JLabel();

    private JButton btnGo = new JButton("Go");
    private JTextField txtURL = new JTextField();
    private JProgressBar progressBar = new JProgressBar();

    private void initComponents() {
        jfxPanel = new JFXPanel();

        createScene();

        ActionListener al = new ActionListener() {
            @Override public void actionPerformed(ActionEvent e) {
                loadURL(txtURL.getText());
            }
        };

        btnGo.addActionListener(al);
        txtURL.addActionListener(al);

        progressBar.setPreferredSize(new Dimension(150, 18));
        progressBar.setStringPainted(true);

        JPanel topBar = new JPanel(new BorderLayout(5, 0));
        topBar.setBorder(BorderFactory.createEmptyBorder(3, 5, 3, 5));
        topBar.add(txtURL, BorderLayout.CENTER);
        topBar.add(btnGo, BorderLayout.EAST);

        JPanel statusBar = new JPanel(new BorderLayout(5, 0));
        statusBar.setBorder(BorderFactory.createEmptyBorder(3, 5, 3, 5));
        statusBar.add(lblStatus, BorderLayout.CENTER);
        statusBar.add(progressBar, BorderLayout.EAST);

        panel.add(topBar, BorderLayout.NORTH);
        panel.add(jfxPanel, BorderLayout.CENTER);
        panel.add(statusBar, BorderLayout.SOUTH);

        frame.getContentPane().add(panel);
    }

    private void createScene() {

        Platform.runLater(new Runnable() {
            @Override public void run() {

                WebView view = new WebView();
                engine = view.getEngine();

                engine.titleProperty().addListener(new ChangeListener<String>() {
                    @Override
                    public void changed(ObservableValue<? extends String> observable, String oldValue, final String newValue) {
                        SwingUtilities.invokeLater(new Runnable() {
                            @Override public void run() {
                                frame.setTitle(newValue);
                            }
                        });
                    }
                });

                engine.setOnStatusChanged(new EventHandler<WebEvent<String>>() {
                    @Override public void handle(final WebEvent<String> event) {
                        SwingUtilities.invokeLater(new Runnable() {
                            @Override public void run() {
                                lblStatus.setText(event.getData());
                            }
                        });
                    }
                });

                engine.locationProperty().addListener(new ChangeListener<String>() {
                    @Override
                    public void changed(ObservableValue<? extends String> ov, String oldValue, final String newValue) {
                        SwingUtilities.invokeLater(new Runnable() {
                            @Override public void run() {
                                txtURL.setText(newValue);
                            }
                        });
                    }
                });

                engine.getLoadWorker().workDoneProperty().addListener(new ChangeListener<Number>() {
                    @Override
                    public void changed(ObservableValue<? extends Number> observableValue, Number oldValue, final Number newValue) {
                        SwingUtilities.invokeLater(new Runnable() {
                            @Override public void run() {
                                progressBar.setValue(newValue.intValue());
                            }
                        });
                    }
                });

                engine.getLoadWorker()
                        .exceptionProperty()
                        .addListener(new ChangeListener<Throwable>() {

                            public void changed(ObservableValue<? extends Throwable> o, Throwable old, final Throwable value) {
                                if (engine.getLoadWorker().getState() == FAILED) {
                                    SwingUtilities.invokeLater(new Runnable() {
                                        @Override public void run() {
                                            JOptionPane.showMessageDialog(
                                                    panel,
                                                    (value != null) ?
                                                    engine.getLocation() + "\n" + value.getMessage() :
                                                    engine.getLocation() + "\nUnexpected error.",
                                                    "Loading error...",
                                                    JOptionPane.ERROR_MESSAGE);
                                        }
                                    });
                                }
                            }
                        });

                jfxPanel.setScene(new Scene(view));
            }
        });
    }

    public void loadURL(final String url) {
        Platform.runLater(new Runnable() {
            @Override public void run() {
                String tmp = toURL(url);

                if (tmp == null) {
                    tmp = toURL("http://" + url);
                }

                engine.load(tmp);
            }
        });
    }

    private static String toURL(String str) {
        try {
            return new URL(str).toExternalForm();
        } catch (MalformedURLException exception) {
                return null;
        }
    }

    @Override public void run() {

        frame.setPreferredSize(new Dimension(1024, 600));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        initComponents();

        loadURL("http://oracle.com");

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new SimpleSwingBrowser());
    }
} 
```

[此链接](http://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm)还提供了一些有用的示例，`WebView`包括演示使用`of`JavaScript

参考：

*   [将 JavaFX 集成到 Swing 应用程序中](http://docs.oracle.com/javafx/2/swing/swing-fx-interoperability.htm)
*   [将 Java FX 2.0 添加到现有的 Netbeans 项目](https://stackoverflow.com/questions/9671597/add-java-fx-2-0-to-existing-netbeans-project)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-05T07:06:23.570

*   当前`Java6/7`仅支持 (upto)`Html 3.2`减少对`css`,

*   对于`Html5`并且非常充分`css support`地使用`JavaFx Components`，

*   有自定义 Java 库（完全？？？）支持 Html4/5、css 和 js，但我建议`JavaFX`改用

# jquery - 在悬停时使用css更改基本元素？

> ID：13717773
> 
> 赞同：0
> 
> 时间：2012-12-05T06:47:48.943
> 
> 标签：jquery, html, css

```
<div class="hdr-me">Me
  <span class="mearrow"></span>
</div> 
```

css

```
.hdr-me {
    width: 33px;height: 28px;float: left;
    -webkit-transition: all 0.2s cubic-bezier(0.2, 0.47, 0.435, 0.97);
    -moz-transition: all 0.2s cubic-bezier(0.2, 0.47, 0.435, 0.97);
    -o-transition: all 0.2s cubic-bezier(0.2, 0.47, 0.435, 0.97);
    -ms-transition: all 0.2s cubic-bezier(0.2, 0.47, 0.435, 0.97);
    transition-transition:all 0.2s cubic-bezier(0.2, 0.47, 0.435, 0.97);
    margin:9px 5px 5px 5px !important;
    padding:12px 0px 0px 7px;
    background:$blueDark;
    border-radius: 60px;
    -webkit-border-radius: 60px;
    -moz-border-radius: 60px;
    color:$white;
    cursor:pointer;
}
.hdr-nav-rt .hdr-me .mearrow{
float: left;
margin-left: 21px;
border-left: 3px solid transparent;
border-right: 3px solid transparent;
border-top: 3px solid $white;
margin-top: -6px;
}
.hdr-nav-rt .hdr-me:hover {
    width: 33px;height: 28px;float: left;
    margin:9px 5px 5px 5px !important;
    padding:12px 0px 0px 7px;
    background:$grayDark;
    border-radius: 60px;
    -webkit-border-radius: 60px;
    -moz-border-radius: 60px;
    color:$white;
    cursor:pointer;

} 
```

我也需要在悬停时更改 mearrow

```
 .hdr-nav-rt .hdr-me:hover .mearrow{
   float:left;
   margin-left:21px;
   border-left:3px solid transparent;
   border-right:3px solid transparent;
   **border-bottom:3px** solid #fff;
   margin-top:-6px;
    } 
```

是否可以仅使用 css

**编辑**

两种mearrow样式也显示，两种形状都在悬停后显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:51:36.430

:hover 通常在锚点上效果最好。我建议在 .hdr-me 中放置一个锚点并相应地更改 css。所以基本上你会有：

```
<div class="hdr-me">Me
  <a>
    <span class="mearrow"></span>
  </a>
</div> 
```

然后你的 CSS 变成：

```
.hdr-nav-rt .hdr-me a:hover .mearrow 
```

'.mearrow' 也会以这种方式触发悬停事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:07:53.167

您可以将样式单独应用于子块。内部 div 将采用自己的样式，并且不会被父 div 的样式覆盖。

[在这里](http://jsfiddle.net/umeshpatil86/jeSQN/1/)找到 jsfiddle 。

/* 父 div 的样式 */ .hdr-me {

```
}
 /* Style for Parent div on Mouse hover*/ 
.hdr-me:hover {

}

/* Style for child div */    
.hdr-me .mearrow{

}
/* Style for child div after on mouse hover*/    
.mearrow:hover {

} 
```

# c# - 使用评估结果在asp C#中动态填充下拉列表

> ID：13717777
> 
> 赞同：0
> 
> 时间：2012-12-05T06:48:08.883
> 
> 标签：c#, asp.net

我正在创建一个购物车。我有一个下拉列表，在列表视图中。我想根据 eval("stock") 简单地添加一系列数字，从 0 到 stock 或 10。

```
<% int range = atoi(eval("..")) // don't know the correct conversion syntax, not to that point yet..
if(range >10)
 range = 10
for(i = 0; i < range; i++){
 dropdown1.Item.append( new listitem...)
} 
%> 
```

我试图通过函数调用来做到这一点，但我无法弄清楚。我在脚本标签和cs文件中都试过了。

任何能指引我正确方向的帮助都会很棒。我是新手，我已经研究了好几个小时了。2 50 美元的书籍，它们对这些列表视图模板项目没有任何帮助。

```
 <AlternatingItemTemplate>
            <span style="">
            <asp:Label ID="productNameLabel" runat="server" 
                Text='<%# Eval("productName") %>' />
            <br />
            <asp:Image runat="server" height = "300" ImageUrl='<%# Eval("img") %>'></asp:Image>
            <br />
            Description:<br />
            <asp:Label ID="itemNotesLabel" runat="server" Text='<%# Eval("itemNotes") %>' />
            <br />

            stock:
            <asp:Label ID="stockLabel" runat="server" Text='<%# Eval("stock") %>' />
            <br />
            price:
            <asp:Label ID="priceLabel" runat="server" Text='<%# "$"+ Eval("price")+".00" %>' />
            <br />

            Quantitiy:<asp:DropDownList id="DropDownList1" runat="server"></asp:DropDownList> 

            <br />

            <asp:LinkButton id="addPro" runat="server" CommandArgument='<%# Eval("productNo") %>' onCommand ="addPro_Click">Add To Cart</asp:LinkButton>
            <br /><br /><br />
<br /></span>
        </AlternatingItemTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:19:29.650

在我的示例中，我假设您有一个 ProductId 数据键供 ListView 查找特定的 Stock。我添加了 OnItemDataBound 方法，我在后面的代码中使用它来填充下拉列表。

**标记**

```
<asp:ListView ID="lvStock" runat="server" OnItemDataBound="lvStock_ItemDataBound" .... > 
```

**代码背后**

```
 protected void lvStock_ItemDataBound(object sender, ListViewItemEventArgs e)
 {

       if (e.Item.ItemType == ListViewItemType.DataItem) 
       {
           // Get the Product Id (or whatever ID it is)
           ListView listView = sender as ListView;
           int index = e.Item.DataItemIndex;
           DataKey dataKey = listView.DataKeys[index];
           int productId = Convert.ToInt32(dataKey["ProductId"]);

           // Get the stock value from your DB or wherever you get it from
           int stock = GetStockById(productId);

           if (stock > 10)
               stock = 10;

           // Get the stock drop down list
           DropDownList ddlListStock = (DropDownList )e.Item.FindControl("DropDownList1");

           // add the values to the drop down list
           for (int i = 0; i <= stock; i++)
           {
                ddlListStock.Items.Add(i.ToString());
           }
       }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:04:11.923

您需要处理`ItemDataBound`事件`ListView`来填充`DropDownList`添加到每个项目中的控件。

演示：

标记 (.aspx) 代码

```
<asp:ListView ID="ListView1" runat="server">
    <ItemTemplate>
    <p>
        <asp:Label ID="stock" runat="server" Text='<%#Eval("Stock") %>'></asp:Label>
        <asp:DropDownList ID="stockQty" runat="server"></asp:DropDownList>
    </p>
    </ItemTemplate>
</asp:ListView> 
```

代码隐藏 (.cs)

```
public class Foo
{
    public int Stock { get; set; }
}
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        List<Foo> fooList = new List<Foo>()
        {
                new Foo(){ Stock=3},
                new Foo(){ Stock=5}
        };
        ListView1.ItemDataBound += (sa, ea) =>
            {
                int stock = int.Parse((ea.Item.FindControl("Stock") as Label).Text);
                DropDownList stockQty = ea.Item.FindControl("StockQty") as DropDownList;

                for (int i = 0; i <= stock; i++)
                    stockQty.Items.Add(i.ToString());
            };

        ListView1.DataSource = fooList;
        ListView1.DataBind();
    }
} 
```

# c++ - 删除 [] C++ 不工作

> ID：13717779
> 
> 赞同：-9
> 
> 时间：2012-12-05T06:48:28.213
> 
> 标签：c++, delete-operator

```
void show(int* x){
    printf("%d",x[3]);
}

int main(){
    int* ptr;

    ptr = new int[9]();
    delete [] ptr;    

    printf("%d %d\n", ptr[7], *(ptr+7));
    show(ptr);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T06:53:01.033

为什么你认为它不起作用？您分配 9 个整数，然后删除它们。这工作得很好。

问题是您随后访问了那些已删除的整数。一旦你这样做会发生什么是无关紧要的 - 你处于未定义的行为领域。它可能会显示旧值，可能会崩溃，或者宇宙可能开始收缩。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T06:53:23.483

您通过访问已删除的动态分配数组的元素来调用**未定义的行为。**这里没有“不工作”，因为*任何事情都*可能发生。`ptr`指向与之前相同的内存地址`delete`，并且当您尝试访问它时，没有什么可以说明该位置的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T06:53:46.183

之后指针不会失效`delete[]`，但指向的堆内存被释放，因此不再受信任。这种类型的代码通常会在并行系统中引起头痛。

您可以通过在删除后立即将指针设为空来避免这种情况：

```
delete[] ptr;
ptr = 0; 
```

# backbone.js - Backbone——模型和集合可以有自己独立的 url 吗？

> ID：13717780
> 
> 赞同：1
> 
> 时间：2012-12-05T06:48:29.250
> 
> 标签：backbone.js, backbone-model, backbone.js-collections

我计划对单个模型及其集合进行单独的提取，但希望集合遵循模型的相同结构。

目前，我每个都有单独的 url，但它在 jQuery 错误上崩溃`Uncaught TypeError: Cannot read property 'length' of undefined`

我应该以不同的方式这样做吗？代码如下：

**文章模型.js**

```
define([
  'underscore',
  'backbone',
], function(_, Backbone) {

  var ArticleModel = Backbone.Model.extend({
        defaults: {},

        url : function() {
            return baseAPIUrl + '/CoreService/GetArticle';
        },

        parse : function(data) {
            console.log(data);

            var articleArray = [];

            $.each(data.Articles, function(i, item) {   
                if (isNotEmpty(item.ScaledImages)) {
                    var Image = item.ScaledImages.ImageUrls[4].Value;
                }

                articleArray = {
                    Id : item.Id,
                    Title : item.Title,
                    FeedTitle : item.FeedTitle,
                    Summary : item.Summary,
                    ImageUrl : Image,
                    Link: item.Link
                };
            });
            return articleArray;
        }
  });

  return ArticleModel;

}); 
```

**文章Collection.js**

```
define([
  'underscore',
  'backbone',
  'models/article/ArticleModel'
], function(_, Backbone, ArticleModel){

  var ArticlesCollection = Backbone.Collection.extend({

      model: ArticleModel,

      initialize : function(articles, options) {

      },

      url : function() {
        return baseAPIUrl + '/CoreService/GetFollowedMembersArticles';
      },

      parse : function(data) {         
        var articleArray = [];

        $.each(data.Articles, function(i, item) {           
            if (item.ScaledImages != null) {
                var image = item.ScaledImages.ImageUrls[4].Value;
            }

            articleArray.push({
                Id : item.Id,
                Title : item.Title,
                FeedTitle : item.FeedTitle,
                Summary : item.Summary,
                ImageUrl : image,
                Link: item.Link
            });
        });

        return articleArray;
      }     

  });

  return ArticlesCollection;

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:16:29.653

是的，对于您的模型，您将使用：

```
var Model = Backbone.Model.extend({
   idAttribute: "Id",
   urlRoot: function() {
      return baseAPIUrl + '/CoreService/GetArticle';
   }
}); 
```

然后，您将实例化您的模型，如下所示：

```
var model = new Model({Id: 2});
model.fetch(); 
```

您的 api 将调用以下 url，然后调用**'host/CoreService/GetArticle/2'**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T09:36:51.587

是的。您可以为模型和集合设置不同的 url。唯一需要担心的是“url”和“urlRoot”。

对于模型，它将是：

```
var User = Backbone.Model.extend({
   urlRoot:'/saveuser.php'
}); 
```

对于一个集合，它将是：

```
var Users = Backbone.Collection.extend({
   url:'/saveuser.php'
}); 
```

干杯

# magento - Magento - 从静态块解析小部件/cms 声明

> ID：13717783
> 
> 赞同：1
> 
> 时间：2012-12-05T06:48:35.990
> 
> 标签：magento, content-management-system

考虑一个加载静态块内容的标准 Magento 块。如果我想从该块中解析出任何小部件（或就此而言，任何其他 CMS 声明），是否有必要构造一个执行标准 preg_match 类型操作的方法来解析这些字符串，或者我能够使用内置-in 方法来获取每个声明并将其添加到我自己的数组/对象中？

查看处理这些声明的正常解析的“widget/template_filter”类，我能找到的唯一可能证明有用的方法是 Varien/Template.php 中受保护的 _getIncludeParameters() 方法。

现在已经很晚了，所以我想我明天会用更多细节更新这个问题。

- 编辑 -

呃……第二天读了这篇文章，我当然措辞很差。我责怪我的女朋友。

更好的表达方式是......

考虑以下静态块：

```
<?php $block = Mage::getModel('cms/block')->setStoreId(Mage::app()->getStore()->getId())->load('my_static_block') ?>
<?php $content = $block->getContent() ?> 
```

$content 会给我未解析的内容，cms/widget 声明仍然完好无损，例如：

```
{{widget type="my/widget" template="my/template.phtml"}} 
```

现在我只想将此声明转换回一个对象（或者更恰当地说，我将有几个 {{widget}} 声明我想放入一个数组中），以便我可以检查参数值，做其他工作等，如：

```
<?php foreach ($content->getWidgets() as $widget) : ?>
    <?php echo $widget->getValue() ?>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T13:17:30.523

This is how I load blocks with raw value or parsed value:

```
/**
 * Implement function getStaticBlock().
 *
 * @return array
 */
public function getStaticBlock($blockName) {
    // get the content of the block
    $content=array();
    if (!empty($blockName)) $content=Mage::getModel('cms/block')
        ->load($blockName)
        ->getContent();

    return array($content);
}

/**
 * Implement function getRenderedBlock().
 *
 * @return array
 */
public function getRenderedBlock($blockName) {
    // get the content of the block
    $content=array();
    if (!empty($blockName)) $content=Mage::app()
        ->getLayout()
        ->createBlock('cms/block')
        ->setBlockId($blockName)
        ->toHtml();

    return array($content);
} 
```

# ruby-on-rails - 为什么我的 form_for area#new 有一个按钮显示“更新区域”，而不是“创建区域”

> ID：13717786
> 
> 赞同：0
> 
> 时间：2012-12-05T06:49:00.110
> 
> 标签：ruby-on-rails, simple-form

我有一个属于报表模型的区域模型。我已经使用 SimpleForm 构建了一个部分表单。当我转到 new_report_area_path(@report) 时，我得到一个工作正常的新区域表单。输入详细信息并点击提交，它会创建一个区域并将您带到 area#show。但是新区域表单上的按钮显示的是“更新区域”而不是“创建区域”。为什么？

**配置/路由.rb：**

```
Testivate::Application.routes.draw do
  resources :reports do
    resources :areas
  end
end 
```

**分贝/schema.rb：**

```
ActiveRecord::Schema.define(:version => 20121205045544) do
  create_table "areas", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "report_id"
  end
  create_table "reports", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end
end 
```

**应用程序/模型/area.rb：**

```
class Area < ActiveRecord::Base
  attr_accessible :name
  has_many :heuristics
  belongs_to :report
end 
```

**应用程序/模型/report.rb：**

```
class Report < ActiveRecord::Base
  attr_accessible :name
  has_many :heuristics
  has_many :areas
end 
```

**应用程序/控制器/areas_controller.rb：**

```
class AreasController < ApplicationController  
  filter_resource_access
  def new
    @report = Report.find(params[:report_id])
    @area = @report.areas.create
    respond_to do |format|
      format.html # new.html.erb
    end
  end
  def create
    @report = Report.find(params[:report_id])
    @area = @report.areas.create(params[:area])
    respond_to do |format|
      if @area.save
        format.html { redirect_to report_area_path(@report, @area), notice: 'Area was successfully created.' }
      else
        format.html { render action: "new" }
      end
    end
  end
end 
```

**应用程序/视图/区域/news.html.haml：**

```
%h1 New Area
= render 'form' 
```

**应用程序/视图/区域/_form.html.haml：**

```
= simple_form_for [@report, @area] do |f|
  = f.error_notification
  = f.input :name
  = f.button :submit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:08:26.957

而不是创建一个区域，您应该构建它，因为它是一个新操作：

```
def new
  @report = Report.find(params[:report_id])
  @area = @report.areas.build # build instead of create
  respond_to do |format|
    format.html # new.html.erb
  end
end 
```

# php - 字符串的编码

> ID：13717790
> 
> 赞同：1
> 
> 时间：2012-12-05T06:49:49.993
> 
> 标签：php

这是在字符串数据类型[http://php.net/manual/en/language.types.string.php下的 php 手册中找到的内容](http://php.net/manual/en/language.types.string.php)

> 鉴于 PHP 没有规定字符串的特定编码，人们可能想知道字符串文字是如何编码的。例如，字符串“á”是否等同于“\xE1”（ISO-8859-1）、“\xC3\xA1”（UTF-8、C 形式）、“\x61\xCC\x81”（UTF-8 , D 形式）或任何其他可能的表示？答案是字符串将以其在脚本文件中编码的任何方式进行编码。因此，如果脚本是用 ISO-8859-1 编写的，则字符串将以 ISO-8859-1 编码，依此类推。但是，如果启用 Zend Multibyte，则不适用；在这种情况下，脚本可以以任意编码（明确声明或检测到）编写，然后转换为特定内部编码，然后将用于字符串文字的编码。请注意，脚本的编码（或内部编码，如果 Zend Multibyte 启用）有一些限制——这几乎总是意味着这种编码应该是 ASCII 的兼容超集，例如 UTF-8 或 ISO-8859 -1。但是请注意，在初始和非初始移位状态中可以使用相同字节值的状态相关编码可能会出现问题。

你能简单地解释一下这是什么意思吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:07:03.090

> 鉴于 PHP 没有规定字符串的特定编码，人们可能想知道字符串文字是如何编码的。例如，字符串“á”是否等同于“\xE1”（ISO-8859-1）、“\xC3\xA1”（UTF-8、Cform）、“\x61\xCC\x81”（UTF-8、 D 形式）或任何其他可能的表示？答案是字符串将以其在脚本文件中编码的任何方式进行编码。因此，如果脚本是用 ISO-8859-1 编写的，那么字符串很快就会用 ISO-8859-1 编码。

这部分声明说，如果您的网页以（UTF-8，C 形式）编码，则“á”将等同于“\xC3\xA1”，您在 php.ini 中指定编码，它是您的 php 脚本的配置文件。

> 但是，如果启用 Zend Multibyte，则不适用；在这种情况下，脚本可以以任意编码（明确声明或检测到）编写，然后转换为特定内部编码，然后将用于字符串文字的编码。请注意，脚本的编码（或内部编码，应启用 Zend Multibyte）有一些限制——这几乎总是意味着此编码应该是 ASCII 的兼容超集，例如 UTF-8 或 ISO-8859 -1。但是请注意，在初始和非初始移位状态中可以使用相同字节值的状态相关编码可能会出现问题。

在这里他们只是说还有另一个选项来指定你的编码，但现在你是在一个脚本中做的，但你的编码必须与 ASCII 超集兼容

# ruby - 正则表达式限制接受最多 14 位数字

> ID：13717794
> 
> 赞同：-1
> 
> 时间：2012-12-05T06:50:05.793
> 
> 标签：ruby, regex

上次我被要求检查至少 8 位数字的字符串。我得到了以下正则表达式：

```
 /^(?=(.*\d){8,})[\d\(\)\s+-]{8,}$/ 
```

你可以在这里看到问题：[Checking string with minimum 8 digits using regex](https://stackoverflow.com/questions/13600290/checking-string-with-minimum-8-digits-using-regex)

现在我想限制字符串在同一个正则表达式中接受最多 14 位数字。我试过这个：

```
 /^(?=(.*\d){8,14})[\d\(\)\s+-]{8,}$/ 
```

没运气。请任何人帮助我解决这个问题。

**更新**

在获得 2 票反对后，我想最好自己写。我使用以前的正则表达式构建了正则表达式。以下正则表达式对我有用：

```
 /^(?=(.*\d){8})(?!(.*\d){15})[\d\(\)\s+-]{8,}$/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T06:52:27.567

根据您的要求，正则表达式应该很简单：

```
/^\d{8,14}$/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T13:36:37.150

从您的回答和其他问题来看，您似乎正在将一大堆不同的规则编码为一个越来越复杂的正则表达式：

1.  字符串必须至少有 12 个字符长
2.  它只能包含数字、括号、+ 和 - 符号以及空格
3.  必须有 8 到 14 位数字

虽然可以使用正则表达式来做到这一点，但这值得吗？我认为如此复杂的正则表达式是无法阅读的，因此难以维护。

如果你把不同的标准分开，它会更清楚。

1.  `string.length >= 12`
2.  `string =~ /^[\d()+-\s]+$/`- 请注意，通过使用方括号创建字符类，您不需要转义内容，这也使其变得更加简单。
3.  `(8..14).include?(string.count("0-9"))` - 查看文档[`String#count`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-count)

所以，总的来说，

```
def valid?(string)
  string.length >= 12 &&
    string =~ /^[\d()+-\s]+$/ &&
    (8..14).include?(string.count("0-9"))
end 
```

它有点长，但它更容易理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T07:27:50.573

尝试：

```
/^(?=(.*\d){8,14}(?!.*\d))[\d\(\)\s+-]{8,}$/ 
```

如果我正确放置了否定前瞻，我应该无法匹配超过 14 位数字的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T06:56:32.427

如果之前的正则表达式达到了您想要的效果，请尝试在“8”的第二个实例之后添加 14 - 但它确实比 8-14 位数字更复杂！

# ruby-on-rails - 导轨中的字符串手柄使困难

> ID：13717795
> 
> 赞同：0
> 
> 时间：2012-12-05T06:50:05.310
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, string

我有我的谷歌饼图代码

```
 <html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ["Work",     50],
          ["Eat",      20],
          ["Commute",  20],
          ["Watch TV", 5],
          ["Sleep",    5]
        ]);

        var options = {
          title: 'My Daily Activities'
        };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

我需要在 ruby​​ 代码中更改它。在@datas 变量中，我有两个字段

```
@datas.each do |data|
data.name
data.value 
```

它给出了两个值，但我需要按这个顺序编写，这样我的代码才能像

```
['data.name, data.value] 
```

如何在 google api 格式中更改我的 ruby​​ 代码？我做到了，但我做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:17:17.687

尝试这个：

```
@dates.map { |d| [d.name, d.value] } 
```

编辑：javascript代码可能是这样的：

```
var data = google.visualization.arrayToDataTable(<%= @dates.map { |d| [d.name, d.value] }.inspect %>) 
```

# c# - 我可以制作一个通用的可选，默认为某个类吗？

> ID：13717802
> 
> 赞同：46
> 
> 时间：2012-12-05T06:50:37.603
> 
> 标签：c#, generics, .net-3.5

我的问题与[C# 泛型中的“默认”类型参数是否有合理的方法有关？](https://stackoverflow.com/questions/707780/is-there-a-reasonable-approach-to-default-type-parameters-in-c-sharp-generics)，但是使用该方法不起作用的内部泛型类。

给定这样的代码：

```
using System;

public class FooEventArgs<T> : EventArgs
{
    // ... T properties and a constructor
}

public class Foo<T>
{
    public delegate void EventHandler<FooEventArgs>(object sender, FooEventArgs<T> e);
    public event EventHandler<FooEventArgs<T>> Changed
} 
```

并像这样使用它：

```
public class User
{
    public Foo<int> foo1;
    public Foo<object> foo2;

    public User()
    {
        foo1 = new Foo<int>();
        foo2 = new Foo<object>();
        foo1.Changed += foo1_Changed;
        foo2.Changed += foo2_Changed;
    }

    protected void foo1_Changed(object sender, FooEventArgs<int> e) { ... }
    protected void foo2_Changed(object sender, FooEventArgs<object> e) { ... }
} 
```

好吧，如果我可以拥有通用可选，我会更喜欢它，因为在很多情况下我不知道会进入什么类型。（数据来自具有自己的变量类型的外部系统，然后将其转换为 .NET 类型，但我遇到的情况是，例如，一种远程数据类型可能会变成几种 .NET 类型中的一种，或者它是“任何”类型 - 因此`object`将是这种情况下唯一真正的答案。）

我立即想到的解决方案是子类化（这也是之前链接的问题中的主要建议）：

```
public class Foo : Foo<object>
{
    public Foo(...) : base(...) { }
}

public class FooEventArgs : FooEventArgs<object>
{
    public Foo(...) : base(...) { }
} 
```

然后我想像这样使用它：

```
public class User
{
    public Foo foo3;

    public User()
    {
        foo3 = new Foo();
        foo3.Changed += foo3_Changed;
    }

    protected void foo3_Changed(object sender, FooEventArgs e) { ... }
} 
```

问题是它自然不适用于`foo3_Changed`接受`FooEventArgs`；它需要`FooEventArgs<object>`，因为这就是`Foo.Changed`事件将传递给它的内容（因为值将来自`Foo<object>`）。

```
Foo.cs(3,1415926): error CS0123: No overload for 'foo3_Changed' matches delegate 'FooLibrary.Foo<object>.EventHandler<FooLibrary.FooEventArgs<object>>' 
```

除了复制大部分课程之外，我能做些什么吗？

我确实尝试了另一件事：一个隐式运算符从转换`FooEventArgs<object>`为`FooEventArgs`.

```
 public static implicit operator FooEventArgs(FooEventArgs<object> e)
    {
        return new FooEventArgs(...);
    } 
```

不幸的是，这似乎不起作用，尽管我不太清楚为什么：

```
EditBuffer.cs(13,37): error CS0553: 'FooLibrary.FooEventArgs.implicit operator FooLibrary.FooEventArgs(FooLibrary.FooEventArgs<object>)': user-defined conversions to or from a base class are not allowed 
```

那么，再一次，我能做些什么呢，还是我认为这是运气不好，我只需要满足于使用`FooEventArgs<object>`（然后我想我也可以使用`Foo<object>`）是正确的吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-05T06:54:08.733

老实说，我认为您对此无能为力。你*可以*使`Foo`双重通用：

```
public class Foo<TData, TArgs> where TArgs : FooEventArgs<TData>
{
    public delegate void EventHandler<TArgs>(object sender, TArgs e);
    public event EventHandler<TArgs> Changed;
} 
```

然后你可以写：

```
public class Foo : Foo<object, FooEventArgs> 
```

...但它确实让事情变得非常复杂而没有什么好处。

我还要说，尽管包含 type 参数有点冗长，但它确实使它非常清楚 - 而继承会以各种方式混淆水域。*当您不是真正*尝试对行为专业化建模时，我会避开类继承。

顺便说一句，您的隐式转换不起作用的原因与泛型无关 - 正如错误消息所述，您不能声明在继承层次结构中上升或下降的转换（隐式或显式）。从 C# 规范第 6.4.1 节：

> C# 只允许声明某些用户定义的转换。特别是，不可能重新定义已经存在的隐式或显式转换。

（有关详细信息，请参阅该部分。）

* * *

作为旁注，我发现对泛型使用相反的继承更为常见，通常使用接口*：*

```
public interface IFoo
{
    // Members which don't depend on the type parameter
}

public interface IFoo<T> : IFoo
{
    // Members which all use T
} 
```

这样`IFoo`，如果不需要知道，代码就可以只接收一个，而不用担心泛型方面的事情`T`。

不幸的是，这对您的具体情况没有帮助。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-03-12T23:01:29.157

我刚刚发现的另一个有趣的事情是，您可以创建具有相同名称但不同签名的泛型类。

```
class Foo<T> { 

}

class Foo<T,T> { 

} 
```

那么你可以像下面这样调用它们中的任何一个：

```
new Foo<string>();
new Foo<int,double>();
new Foo<string,int>(); 
```

我只是觉得有趣的是，尽管两个类具有相同的名称，但它们可以共存，因为它们具有不同的签名。

我想这就是元组类的工作方式

```
public class Tuple<T1, T2, T3... T8> 
{ 
... 
```

# php - yii 中的下拉菜单更改时使用 id 调用操作

> ID：13717804
> 
> 赞同：1
> 
> 时间：2012-12-05T06:50:52.470
> 
> 标签：php, yii, yii-components

```
<?php echo CHtml::dropDownList('Category', $model -> cate_id, CHtml::listData(Category::model() -> findAll(), 'id', 'name'), array('empty' => 'Select Category','submit'=>array('advert/loadAdvert','id'=>'5'))); ?> 
```

**我需要获取选定的下拉列表值，而不是硬编码 id，我必须为 id 放置该值。**

```
public function actionloadAdvert($id) {
    $issueDataProvider = new CActiveDataProvider('Advert', array('criteria' => array('condition' => 'cate_id=:cate_id', 'params' => array(':cate_id' => $id), ), 'pagination' => array('pageSize' => 1, ), ));
    $this -> render('advertisement', array('model' => Advert::model(), 'issueDataProvider' => $issueDataProvider, ));
} 
```

还有什么是学习yii的最佳书籍或资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:38:35.753

```
<?php
echo CHtml::dropDownList(
    'Category',
    $model->cate_id,
    CHtml::listData(Category::model()->findAll(), 'id', 'name'),
    array(
        'empty'    => 'Select Category',
        'onchange' => 'document.location.href = "/advert/loadAdvert/id/" + this.value',
    )
);
?> 
```

# objective-c - 如何检查传入的 JSON 提要是否包含单条记录或多条记录？

> ID：13717806
> 
> 赞同：0
> 
> 时间：2012-12-05T06:51:19.570
> 
> 标签：objective-c, ios, json, nsarray, nsdictionary

我必须在 iOS 上解析这个 JSON。

```
{
"log_by_dates": {
    "logs": [
        {
            "date": "Wednesday 5 December 2012",
            "exercises": "0",
            "workouts": "0",
            "log_entries": "0"
        },
        {
            "date": "Tuesday 4 December 2012",
            "exercises": "4",
            "workouts": "2",
            "log_entries": "7"
        }
    ]
 }
} 
```

我编写了以下代码来解析它；

```
NSArray *logs = [[(NSDictionary*)results objectForKey:@"log_by_dates"] objectForKey:@"logs"];
        for (NSDictionary *aLog in logs) {
            Log *newLog = [[Log alloc] initWithDate:[aLog objectForKey:@"date"]               withExercises:[aLog objectForKey:@"exercises"]
                                       withWorkouts:[aLog objectForKey:@"workouts"]];
            if (!data) {
               data = [[NSMutableArray alloc] init];
            } 
```

但问题是，有时我会得到这样的 JSON 值；

```
{

"log_by_dates": {
    "logs":
        {
            "date": "Wednesday 5 December 2012",
            "exercises": "0",
            "workouts": "0",
            "log_entries": "0"
        }
  }
} 
```

这使我的代码崩溃。

请指导我，我在解析之前使用 if() else 条件来检查传入的 JSON 对象是否包含单个记录的多个记录，以便我编写适当的代码来处理字典或数组。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:58:14.797

请像这样更新您的代码。

```
NSArray *logs = [[(NSDictionary*)results objectForKey:@"log_by_dates"] objectForKey:@"logs"];
if([logs isKindOfClass:[NSArray class]]) {
    for (NSDictionary *aLog in logs) {
        Log *newLog = [[Log alloc] initWithDate:[aLog objectForKey:@"date"]               withExercises:[aLog objectForKey:@"exercises"]
                                   withWorkouts:[aLog objectForKey:@"workouts"]];
        if (!data) {
            data = [[NSMutableArray alloc] init];
        }
    }
}
else if([logs isKindOfClass:[NSDictionary class]]) {
    NSDictionary *aLog = (NSDictionary *)logs;
    Log *newLog = [[Log alloc] initWithDate:[aLog objectForKey:@"date"]               withExercises:[aLog objectForKey:@"exercises"]
                               withWorkouts:[aLog objectForKey:@"workouts"]];
    if (!data) {
        data = [[NSMutableArray alloc] init];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:00:15.020

检查条件，如

```
if([[[(NSDictionary*)results objectForKey:@"log_by_dates"] objectForKey:@"logs"] isKindOfClass:[NSArray class]])
{
    // Do your Array Stuff Here
} else {
    // Do your Dictionary Stuff Here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T07:16:29.347

`for`在循环之前插入：

```
if (![logs isKindOfClass:[NSArray class]])
{
    logs = [NSArray arrayWithObject:logs];
} 
```

# ruby-on-rails - 部署后的 Rails 应用程序问题 - 404 错误

> ID：13717808
> 
> 赞同：0
> 
> 时间：2012-12-05T06:51:21.717
> 
> 标签：ruby-on-rails, ruby, deployment, weblogic

我是 RoR 的新手。我能够在我的 Windows 中安装 Rails 并将其托管在 Webrick（带有“欢迎”控制器的示例应用程序）中。
现在我有一个 Unix Weblogic Server 和一个专用的域。使用 Warbler
导出文件后，我访问了在专用域中部署 .WAR 文件的位置。我为示例应用程序做了所有这些，其中只有 Welcome 控制器。 但即使在部署了 WAR 文件之后，在访问域以及端口号（：9002）时，我最终还是得到了`.WAR``Oracle Admin Console`
`404 file not found error`在查看服务器日志时，没有任何与任何错误相关的记录。应用程序必须已正确部署。我假设在部署之前我一定错过了 routes.rb 或类似文件中的一些基本配置。任何人都可以猜出所有的可能性，如果可能的话，任何人都可以通过指向任何涵盖部署前配置要执行的步骤的图来帮助我。
在分解之前我需要在服务器内安装 JRuby 和 Rails 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:22:03.960

我真的无法猜测`Eror 404` 只有。

您可以尝试将您的 rails app rack 配置映射到不同的 base_uri。您需要做的就是将现有的“运行”命令包装在地图块中

尝试在您的 rails ' **config.ru** ' 文件中执行此操作：

```
map '/mydepartment' do
    run Myapp::Application
end 
```

现在，当您“rails server”时，应用程序应该位于**localhost:3000/mydepartment**。不确定这是否会给你想要的结果，但值得一试。

还有一件事，您还将其添加到您的 config/environments/production.rb 和 config/environments/development.rb （如果在生产模式下）：

```
config.action_controller.asset_path = proc { |path| "/abc#{path}" } 
```

否则，当您在视图中调用您的助手（例如 stylesheet_link_tag）时，它们将生成没有“/abc”的链接。

此外，找到一些您可以参考的指南以获得良好的支持。

[JRubyOnRailsOnBEAWeblogic](https://github.com/jruby/jruby/wiki/JRubyOnRailsOnBEAWeblogic)。

[将 JRuby 与 JMX 一起用于 Oracle WebLogic Server 11g](http://www.oracle.com/technetwork/articles/oem/jruby-wls-jmx-356114.html)

让我知道它是否没有解决。

# google-apps-script - 在谷歌脚本中获取用户的个人资料信息

> ID：13717809
> 
> 赞同：0
> 
> 时间：2012-12-05T06:51:27.633
> 
> 标签：google-apps-script

我想获取我域的用户的个人资料信息..我正在为此使用个人资料 API..

Profile API 仅提供几个字段，例如（姓氏、名字、电子邮件等）..但我也想获得这些字段：职业、部门、电话 [工作]、电话 [手机]、关系 [经理].. .

我无法获得这些领域..所以请给我建议以获得这些领域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T09:27:56.900

我通过 Profile API 获得了所有字段......实际上，如果任何字段为空，那么 Profile API 不会将该字段作为输出......所以使用 Profile API，我们可以获得用户的完整信息...... .

```
Code :
    var username="user "
    var base = 'https://www.google.com/m8/feeds/'; 
    var fetchArgs = googleOAuth_('contacts', base);
    fetchArgs.method='GET'
    var url=base+'profiles/domain/'+domainName+'/full/'+username+'?v=3&alt=json'

    var name=""
    var occupation=""
    var department=""
    var email=""
    var contactNumber_1=""
    var contactNumber_2=""
    var relation=""
    var account=""
    var office=""
    var personal_account=""
    var current_account=""
    var language=""
    var blog=""
    var image=""
    try{
      var urlFetch = UrlFetchApp.fetch(url, fetchArgs)   
      var json=Utilities.jsonParse(urlFetch.getContentText())
      var profileInfo = json.entry
      try{
        name=profileInfo.gd$name.gd$fullName.$t
      }catch(err){}
      try{
        occupation=profileInfo.gContact$occupation.$t
      }catch(err){}
      try{
        department=profileInfo.gd$organization[0].gd$orgDepartment.$t
      }catch(err){}
      try{
        var emaillist=profileInfo.gd$email
        for(var i=0;i<emaillist.length;i++){
          if(emaillist[i].rel.split("#")[1]=='work')
            email=profileInfo.gd$email[i].address
        }
      }catch(err){}
      try{
        var phonelist=profileInfo.gd$phoneNumber
        for(var i=0;i<phonelist.length;i++){
          if(phonelist[i].rel.split("#")[1]=='work')
            contactNumber_1=phonelist[i].$t
          else if(phonelist[i].rel.split("#")[1]=='mobile')
            contactNumber_2=phonelist[i].$t
        }
      }catch(err){}
      try{   
        relation=profileInfo.gContact$relation[0].$t+" ["+profileInfo.gContact$relation[0].rel+"]"
      }catch(err){}  

    }catch(err){}

}

/*
  Oauth Authentication
*/

function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey(consumerKey);
  oAuthConfig.setConsumerSecret(consumerSecret);
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

如果任何字段为空，则将找不到该标签，这就是为什么所有字段都写在 try-catch 块中...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:44:57.300

Apps Script 中没有直接的内置 API，但如果您使用的是 Google Apps for Business 或 Education，则可以使用 Google Apps通过[UrlFetch](https://developers.google.com/apps-script/service_urlfetch)和[oAuth](https://developers.google.com/apps-script/class_oauthconfig)。这应该会公开存储在 Google Apps 中的所有个人资料信息。

# ruby-on-rails - 在 AWS 上水平扩展的重型 RoR 应用程序需要高效的 SSL

> ID：13717811
> 
> 赞同：1
> 
> 时间：2012-12-05T06:51:36.207
> 
> 标签：ruby-on-rails, apache, ssl, amazon-web-services, openssl

我正在使用多个 EC2 实例、一个 RDS 数据库、一个循环会话粘性负载均衡器和 Route 53 在 AWS 基础设施上运行一个 Rails 应用程序。

该应用程序正在为多个域名提供页面（相同的应用程序外观和功能因域名而异）。

Rails 代码托管在临时实例上的 NFS 共享上，其中 Web 服务器在开发模式下运行，而其他盒子通过 NFS 加载 apache 配置和应用程序代码并在生产模式下运行。

我想做的是在我们开始处理付款和诸如此类的事情时启用整个 SSL。由于应用程序的性质和大量的 apache/Passenger 优化，我不能为每个域设置一个虚拟主机，而是使用 www.* 的通配符来加载几乎相同的代码，并且应用程序可以其余的在内部。

还没有真正找到解决这个问题的理想方法。有人会有想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:39:55.053

经过评论中的一些讨论，我们得出了这个结论：

该应用程序目前`<vhost>`在 Apache 上托管在一个单一的服务器上，该应用程序在不同布局的主机名之间进行区分。

这里的问题是支持 SSL，而不必为每个域设置自己的证书和不同的虚拟主机，因为这需要在不必要的地方多次运行 Rails 应用程序。

通过使用**多域证书 (MDC)**，只需一个虚拟主机和一个证书即可解决此问题，但 MDC 比普通证书更昂贵。因此，根据您需要支持的域数量，使用多个证书手动进行可能会更便宜/更容易，或者选择支付更昂贵的 MDC，但可以节省时间和维护成本。

在此期间，我发现了这个很好的 wikipedia 比较证书颁发机构及其在不同浏览器中的信任级别： [http ://en.wikipedia.org/wiki/Comparison_of_SSL_certificates_for_web_servers](http://en.wikipedia.org/wiki/Comparison_of_SSL_certificates_for_web_servers)

# visual-studio - Visual Studio 错误：（407：需要代理身份验证）

> ID：13717815
> 
> 赞同：39
> 
> 时间：2012-12-05T06:52:01.207
> 
> 标签：visual-studio, proxy, proxy-authentication

我在需要凭据的公司代理服务器后面。在过去的 2 个小时里，我一直在尝试使用**MS Visual Studio Pro 2012**连接到 TFS 服务器（在 tfspreview.com 上） ，但没有成功。每次尝试都遇到此错误：

![在此处输入图像描述](../Images/9d526efdb626325d9e98a6ebfa785a24.png)

当我启动它时，集成浏览器工作正常。它要求我提供代理登录凭据，一旦输入，我就走了。所以这里发生了一些不同的连接方法。

我还导航到了 TFS 服务器，在我的项目中，我单击**了 Open new instance of Visual Studio**。新实例失败并在输出中显示以下消息：

```
HTTP code 407: Proxy Authentication Required 
```

我已经尝试了我在[另一篇文章](https://stackoverflow.com/questions/2859148/visual-studio-2010-cannot-connect-for-any-online-resource)中找到的所有内容，但均无济于事。**我已经对devev.exe.config**进行了每次编辑和组合编辑，但没有成功。

会不会是 2010 版与 2012 专业版有所不同？我正在运行 Windows 7。

任何人都可以解释一下吗？请？

**注意：**此问题也适用于 Visual Studio 2013

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-12-07T19:42:50.457

**经过三天的搜索，解决方案落到了我的腿上。**

现在，发生的事情是 VS 试图进行自动更新，但被代理阻止了。我被提示输入凭据并进行了检查。

我受到启发去检查 TFS 服务器连接，以防万一提示可能会为 TFS 服务器建立连接以通过隧道......你瞧！*有效！*

**解决方法：**

1.  打开**工具>扩展和更新**
2.  单击左侧菜单中的**更新...**
3.  屏幕上将显示失败通知和输入凭据的链接。单击它并输入它们。
4.  关闭扩展管理器。
5.  单击**团队>连接到 TFS 服务器...**
6.  输入地址，它会工作！

**注意：**有些人建议通过打开集成浏览器尝试使用代理凭据提示，但这没有奏效。我不是专家，但我认为他们通过 Windows 本身内的不同渠道进行连接。

*无需编辑**devenv.exe.config**即可运行。*

每次需要连接到服务器时都必须手动检查更新会很痛苦，但这是我想出的最佳解决方案，直到 Microsoft 通过更新或未来版本永久修复此问题。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-06T02:28:01.143

这种情况本质上`VS`是没有设置为通过代理来获取它试图获取的资源（使用 FTP 时）。这是您收到[407错误的原因。](http://www.checkupdown.com/status/E407.html)我对此进行了一些研究，您可以尝试一些事情来调试它。从根本上说，这是产品中的一个有缺陷的区域，应该在以后的版本中进行审查。

以下是一些解决方案，按从简单到复杂的顺序排列：

*   如果可能，请不要为您尝试访问的指定域使用代理。*   正确设置您的代理设置 Internet Explorer（即使您不使用它），因为这会影响系统范围的设置。甚至可以使用 Internet Explorer 连接到 Internet 并保持连接，然后返回并从`VS`.*   在`devenv.exe.config`添加`<servicePointManager expect100Continue="false" />`中，如下所示：

```
<configuration>
  <system.net>
    <settings>
      <servicePointManager expect100Continue="false" />
    </settings>
  </system.net>
</configuration> 
```

*   添加`defaultProxy`设置如下：

```
<system.net>
  <defaultProxy useDefaultCredentials="true" enabled="true">
      <proxy proxyaddress="http://your.proxyserver.ip:port"/>
  </defaultProxy>
  <settings>
  ... 
```

*   或者，您可以尝试告诉它使用系统默认值（应该从 Internet Explorer 中提取），如下所示：

    ```
    <defaultProxy useDefaultCredentials="true" enabled="true">
        <proxy usesystemdefault="True" />
    </defaultProxy> 
    ```

    *   有一个较旧的解决方案涉及[在此处创建插件](http://blogs.msdn.com/b/rogeorge/archive/2009/06/23/how-to-authenticate-to-a-proxy-server-within-a-visual-studio-webtest-using-visual-studio-2008-sp1.aspx)

希望这可以为您解决。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-08T18:47:56.997

在代理后面运行 Visual Studio 2012 时，在 Visual Studio 库中检查扩展更新时收到以下错误消息：

远程服务器返回意外响应：(417) 预期失败

环顾谷歌终于在这里发现了一个解决方案：

[Visual Studio 2012 代理设置](http://thewebjedi.com/be/post/2012/10/10/Visual-Studio-2012-Extension-Updates-and-%28417%29-Expectation-failed.aspx)

[http://www.jlpaonline.com/?p=176](http://www.jlpaonline.com/?p=176)

基本上，他说修复是编辑您的 devenv.exe.config 文件并更改它：

```
<settings>      
   <ipv6 enabled="true"/> 
</settings> 
```

对此：

```
 <settings>
   <ipv6 enabled="true"/>      
   <servicePointManager expect100Continue="false"/> 
 </settings> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-03-31T18:50:55.643

在 Visual Studio 2013 和 Microsoft 测试管理器 (MTM) 中对我有用的解决方案是确保 devenv.exe.config 和 mtm.exe.config 都包含此配置部分：

```
<system.net>
    <settings>
        <ipv6 enabled="true"/>
        <servicePointManager expect100Continue="false"/>
    </settings>
    <defaultProxy useDefaultCredentials="true" enabled="true">
        <proxy usesystemdefault="True" />
    </defaultProxy>
</system.net> 
```

MTM 没有 system.net 设置，整个部分是在结束 xml 标记之后立即添加的`</appSettings>`。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-04-13T14:33:49.723

下载并安装 Fiddler

打开 Fiddler 并转到规则菜单以勾选自动身份验证

现在打开 Visual Studio 并单击登录按钮。

输入您的电子邮件和密码。

希望它会奏效

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-09-03T19:00:33.320

单击 [Sync] 按钮（使用 MS Git 提供程序）时，我收到“需要身份验证”（407）错误，这对我有用（VS 2013）：

..\Program Files\Microsoft Visual Studio 12.0\Common7\IDE\devenv.exe.config

```
 <system.net>
    <defaultProxy useDefaultCredentials="true" enabled="true">
      <proxy proxyaddress="http://username:password@proxyip:port" />
    </defaultProxy>
    <settings>
      <ipv6 enabled="false"/>
      <servicePointManager expect100Continue="false"/>
    </settings>
  </system.net> 
```

我认为对我来说神奇的是将“ipv6”设置为“假”——不知道为什么（在我的情况下可能只支持 IPv4）。我尝试了如上所示的其他方式，但是我在“defaultProxy”之后移动了“设置”部分，并更改了“ipv6”，并且它与我添加的登录完美配合（我在发布的所有其他答案中尝试的所有其他方式对我来说都失败了）。

*编辑：*刚刚找到另一个解决方法（不更改配置文件）。出于某种原因，如果我禁用 Windows 代理（在我的情况下它是 PAC 文件的 URL），再试一次（它会失败），然后重新启用代理，它就可以工作了。似乎在内部缓存了一些东西，当我这样做时会被重置（至少在我的情况下）。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-09-20T05:24:07.687

这对我有帮助：

1.  关闭 VS 实例
2.  打开控制面板\用户帐户\凭据管理器
3.  从保管库中删除与 TFS 相关的凭据

这只是一个黑客。你需要定期做...... :-(

此致，

亚历山大

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-12-05T07:00:46.710

**使用 IDE 配置：**

1.  打开 Visual Studio 2012，单击文件菜单栏中的**工具**，然后单击**选项**，

2.  在**Options**窗口中，展开**Source Control**选项，单击**Plug-in Selection**并确保 Current source control 插件设置为 Visual Studio Team Foundation Server。

3.  **接下来**，单击 Source Control 下的 Visual Studio Team Foundation Server 选项并执行以下步骤：选中**Use proxy server for file downloads**。输入首选 Team Foundation Server 2010 代理服务器的主机名。将端口设置为 443。选中**使用 SSL 加密 (https) 连接**。

4.  单击确定按钮。

**使用 exe.config：**

修改 IDE 可执行文件所在的 devenv.exe.config 如下：

```
<system.net> 
  <defaultProxy>  
   <proxy proxyaddress=”http://proxy:3128”
     bypassonlocal=”True” autoDetect=”True” /> 
   <bypasslist> 
   <add address=”http://URL”/>  
  </bypasslist> 
 </defaultProxy> 
```

> 在 proxyaddress 声明您的代理，并记住绕过列表 url 和 ip 地址将被排除在代理流量之外。
> 
> 然后重新启动 Visual Studio 以更新更改。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-07-01T09:51:17.223

我试图将 Visual Studio 2013 连接到 Visual Studio Team Services，并且在公司代理之后。我通过添加使 VS 使用默认代理设置（在 IE 的连接设置中指定）：

``<system.net> <defaultProxy useDefaultCredentials="true" enabled="true"> <proxy usesystemdefault="True" /> </defaultProxy> <settings> <ipv6 enabled="true"/> </settings> </system.net>``

到 ..\Program Files\Microsoft Visual Studio 12.0\Common7\IDE\devenv.exe.config （以管理员身份运行记事本并从那里打开文件）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-01-01T11:09:02.863

我的 Visual Studio Team Services 帐户（以前称为 Visual Studio Online、Team Foundation Service）也遇到了同样的错误。

我只是使用 VS 2013“连接到 Team Foundation Server”窗口输入凭据，然后将其连接到 Visual Studio Team Services Team Project。它以这种方式工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-04-24T07:56:38.617

我的情况是使用两个因素身份验证，outlook 帐户和 VS12。

我发现我必须

*   打开 IE（我的公司默认浏览器）
*   登录visual studio在线账号（包括两因素认证）
*   在 VS12 中再次连接（由于某种原因再次进行身份验证）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-07-09T08:33:10.510

我遇到了同样的问题，并且发布的解决方案都没有奏效。对我来说，解决方案是：

*   打开 Internet Explorer > 工具 > Internet 选项
*   单击连接 > LAN 设置
*   取消勾选“自动检测设置”和“使用自动配置脚本”

这阻止了使用代理，然后我可以毫无问题地进行身份验证。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-06-08T15:08:21.233

`dotnet publish`在连接到公司 VPN时运行时出现此错误。一旦我从 VPN 断开连接，它就可以工作了。

# javascript - 如何使用 javascript 使按钮标签动态化？

> ID：13717816
> 
> 赞同：11
> 
> 时间：2012-12-05T06:52:03.843
> 
> 标签：javascript, variables, button

我想要做的是能够通过将文本放入实际变量中来更改按钮内的文本。

像这样的东西：

```
<button type=button>status</button> 
```

但它不是一个字符串，而是一个变量：

```
var status = 'on'; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T07:15:10.587

如果您尝试将按钮的文本分配给变量，那么它很简单，如下所示：

```
var buttonText = "click me!";      
document.getElementById("id-of-your-button").innerHTML = buttonText; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T07:06:28.410

如果您使用的是 jquery，那么这是一项简单的任务。

假设你有一个按钮

然后你可以使用 jquery 通过使用来评估其文本

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script type="text/javascript">
var status="on";
$(document).ready(function(){
   $("#myButton").text(val);
});
</script> 
```

或者你可以纯javascript：

```
var status="on";
document.getElementById('myButton').innerHTML=status; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T07:22:55.737

猜猜这有帮助：

```
 <button id="myButton" type="button" value=""></button>
    <input id="myInputButton" type="button" value=""></button>

    <script type="text/javascript">
        var status = 'on';
        document.getElementById('myButton').innerHTML = status;
        document.getElementById('myInputButton').value = status;
    </script> 
```

# imacros - imacro 自动填写表格

> ID：13717818
> 
> 赞同：2
> 
> 时间：2012-12-05T06:52:11.263
> 
> 标签：imacros

我正在使用 imacro 的概念来自动填写表格。我录了一个，拿到了剧本。

例如：-

```
VERSION BUILD=7601105 RECORDER=FX
TAB T=1
URL GOTO=http://mysite/home.aspx
TAG POS=1 TYPE=INPUT:TEXT FORM=ACTION:home.aspx ATTR=ID:ContentPlaceHolder1_txtUsername CONTENT=samual
SET !ENCRYPTION NO
TAG POS=1 TYPE=INPUT:PASSWORD FORM=ACTION:home.aspx ATTR=ID:ContentPlaceHolder1_txtPassword CONTENT=sampassword
TAG POS=1 TYPE=INPUT:SUBMIT FORM=ID:form1 ATTR=ID:ContentPlaceHolder1_btnLogin
TAG POS=1 TYPE=A ATTR=ID:ContentPlaceHolder1_bpo_TabContainer_tbpnl_lnk_address_0
TAG POS=1 TYPE=INPUT:IMAGE FORM=ID:form1 ATTR=ID:Logout 
```

但我的实际要求是单击按钮，我需要调用此宏，并且每次表单字段值都可能发生变化。所以我需要动态地将这些新值传递给宏。我想点击那个按钮，我会将新值传递给这些脚本并保存这个宏并调用那个宏。但我不确定这是它的工作方式，还是可以从使用 imacro 创建的程序中调用宏（如上）？

谢谢

* * *

非常感谢您的回答。它提供了一些见解。但是你能再解释一下吗。因为我对 imacro 概念完全陌生。

```
 <html>
 <body> 
   <script type="text/javascript">
    function runimacros() {
      var iim1 = new ActiveXObject("imacros");
      var ret
      ret = iim1.iimInit("-fx");
      ret = iim1.iimDisplay("Test Macro");
      ret = iim1.iimPlay ("testmacro.iim");//this is the macro which I created in firefox and located C:\Users\MyName\Documents\iMacros\Macros\testmacro.iim
      ret = iim1.iimExit();
   }
   </script>
 <a href="javascript:runimacros()">Click to run iMacros</font></a>
 </body>
 </html> 
```

请注意，创建的宏 (testmacro.iim) 使用的是 firefox，它位于上述位置。

我尝试了“ [http://wiki.imacros.net/JavaScript](http://wiki.imacros.net/JavaScript) ”的方法，但没有奏效。我错过了什么吗？我在 Visual Studio 中尝试了上面的代码，并将默认浏览器设置为 IE。请给任何建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:44:12.317

您不能从另一个调用 Imacros 程序 (.iim)，但可以使用 javascript 调用一个或多个传递一个变量的 iim 文件：

```
var ret;    
ret = iimDisplay ("optional message to be displayed on the Imacros banner");
var i='input variable'
ret = iimSet("i", i);
ret = iimPlay("myScript.iim");
/* Check for error */
if (ret = 1) {        
      /* do useful stuff */
}else
{
err = "The following error occurred: "+iimGetLastError();
alert(err);
}; 
```

在宏脚本中：

```
'this way we pass the variable to the input field
TAG POS=1 TYPE=INPUT:TEXT ATTR=ID:ContentPlaceHolder1_txtUsername CONTENT={{i}} 
```

# jquery - 如何更改 div 的背景图像？

> ID：13717819
> 
> 赞同：1
> 
> 时间：2012-12-05T06:52:15.150
> 
> 标签：jquery, css, background-image

CSS

```
background-image:url(../back/back01.jpg); //this works 
```

JS

```
function switchRight(){
    $('#slider00').css("background-image","url(../back/back02.jpg)");
} 
```

back01.jpg 被删除，但 back02.jpg 没有加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:01:44.947

确保您的图像存在于定义的文件夹中。

您还可以通过以下代码提供 css 类。

```
 .imageclass
  {
    background-image:url(../back/back01.jpg);
  }

   function switchRight(){
     $('#slider00').addClass('imageclass'); // same way you can use remove class
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T06:58:16.810

假设您的css文件在文件夹中

```
function switchRight(){
    $('#slider00').css("background-image","url(back/back02.jpg)");
} 
```

请检查

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T06:55:23.453

这是因为背景图像的路径。通过 css 设置它时，路径是相对于您的 css 文件所在的位置。当您在 javascript 中执行此操作时，使用相对于应用程序根目录的路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T06:55:59.083

您可能需要检查图像的路径。第一个基于 css 文件的当前路径，而第二个基于网站根目录。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T07:01:10.887

尝试这个

```
$('#slider00').css("background-image", "url(../back/back02.jpg)");

$('#slider00').click(function()
{
  // do my image switching logic here.
}); 
```

# php - PHP MVC 运算符比较

> ID：13717824
> 
> 赞同：0
> 
> 时间：2012-12-05T06:52:42.253
> 
> 标签：php, mysql, codeigniter

目标：如果数据库返回数字 1 ，则重定向到设置页面，如果返回 2 ，则重定向到设置页面 2 如果返回 0 则激活 else 语句

我已经尝试了一段时间，但似乎仍然可以正常工作我的控制器：

```
 $user_id                 = array('id'=>$this->loggedInUser->id);
    $results                 = $this->user_model->getUsersStage($user_id);

    if($results == '1'){
    redirect('registration/setup');
    } 
```

我的模型：

```
 function getUsersStage($conditions=array(),$fields='')
 {

    if(count($conditions)>0)        
        $this->db->where($conditions);

    $this->db->from('users');

    if($fields!=''){
    $this->db->select($fields);
    }
    else{
    $this->db->select('stage');
    }

    $result = $this->db->get();
    return $result;

 }//End of getUsersStage Function 
```

如果你能告诉我出了什么问题会很好，我尝试了很多比较方法，比如

```
if($results == 1){  
Error : Object of class CI_DB_mysql_result could not be converted to int
if(this->$results->stage == 1) 
```

只是为了验证，`$this->loggedInUser`它正在工作，它确实向模型发送了正确的 sql 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T06:56:47.057

改变

```
if($results == '1'){
    redirect('registration/setup');
    } 
```

至

```
if($results->row()->stage == 1){
    redirect('registration/setup');
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T07:00:25.193

[$this->db->get()](http://ellislab.com/codeigniter/user-guide/database/active_record.html)返回结果集。

```
 $query = $this->db->get('mytable');
 // Produces: SELECT * FROM mytable 
```

如果你想检查它是否返回行，你可以检查这样的事情

```
if(count($result->result())) {

  // do stuff here
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T07:02:42.170

Aftec 调用 get() –[活动记录函数之一](http://ellislab.com/codeigniter/user-guide/database/active_record.html)，您将获得一个查询对象。您需要调用[该对象的方法](http://ellislab.com/codeigniter/user-guide/database/results.html)才能实际获得结果。您可能想要调用`row()`您的结果对象，例如：

```
if($results->row()->staging == 1) 
```

# java - java - 进度条 - 是否可以在 doInBackground() 方法之外使用进度条的 setProgess()？

> ID：13717826
> 
> 赞同：2
> 
> 时间：2012-12-05T06:52:47.800
> 
> 标签：java, swing, progress, swingworker, jprogressbar

如果我在 doInBackground() 中有一个属于其他类的方法，是否可以根据外部类的其他方法中发生的更改来设置 setProgess() ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T07:06:31.170

你说：

> 但是当我将 setProgess() 放在另一个类的方法中时，它告诉我我需要创建该方法。

这与 SwingWorker 无关，与基本 Java 无关。没有类的有效实例，任何类都不能调用另一个类的实例（非静态）方法。要使您的代码正常工作，“其他”方法必须调用`setProgress(...)`SwingWorker 的一个实例，因此您必须将 SwingWorker 的引用传递给该其他类。因此，将 SwingWorker（`this`在 SwingWorker 内部）传递给另一个类，然后您就可以愉快地调用它的方法了。同样，这与线程、Swing 或 SwingWorkers 无关，而是基本的面包和黄油 Java。

编辑：由于 setProgress 是受保护的和最终的，你的 SwingWorker 必须有一个其他类可以调用的公共方法，并且在这个方法中 SwingWorker 需要调用它自己的`setProgress(...)`方法。

例如，

MyWorker 类

```
public class MyWorker extends SwingWorker<Integer, Integer> {
   private OtherClass otherClass;

   public MyWorker() {
      otherClass = new OtherClass(this);
   }

   @Override
   protected Integer doInBackground() throws Exception {
      otherClass.otherMethod();
      return null;
   }

   // public method that exposes setProgress
   public void publicSetProgress(int prog) {
      setProgress(prog);
   }

} 
```

其他类：

```
class OtherClass {
   MyWorker myWorker;

   public OtherClass(MyWorker myWorker) {
      this.myWorker = myWorker;
   }

   public void otherMethod() {
      for (int i = 0; i < 100; i++) {
         myWorker.publicSetProgress(i);
         try {
            Thread.sleep(200);
         } catch (InterruptedException e) {}
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T06:55:05.073

只要您担心必须更新栏，您可以通过调用适当的方法**在可以访问实例的任何地方实现它。**它不依赖于方法或类。（对于 Java 中的每个对象都是如此）。

根据您的评论，您应该将对该栏的引用作为该方法中的参数传递。否则，您将无法访问它。

# javascript - 如何在 Try-Catch 块中围绕错误打印行号

> ID：13717828
> 
> 赞同：5
> 
> 时间：2012-12-05T06:52:49.640
> 
> 标签：javascript, google-apps-script, error-handling, try-catch

我的脚本有几个 try-catch 块，用于发送有关错误消息的电子邮件。它有效，但只发送了一行简单的错误消息。我想要的是错误周围的行号和更多描述性消息，以帮助我确定错误发生的位置。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T07:04:45.350

你可以试试这个（我在某个地方偷的），首先将捕获的异常中的所有信息转换为字符串。第二个函数可用于包装一些代码，如果它抛出异常，则将其写入某处。

```
function catchToString (err) {
  var errInfo = "Catched something:\n"; 
  for (var prop in err)  {  
    errInfo += "  property: "+ prop+ "\n    value: ["+ err[prop]+ "]\n"; 
  } 
  errInfo += "  toString(): " + " value: [" + err.toString() + "]"; 
  return errInfo;
}
function catched (f) {
  try {
    f ();
  }
  catch(err) { 
    Logger.log (catchToString (err));
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-29T06:06:04.490

上面的解决方案对我不起作用，我找到了这篇文章： [https ://sites.google.com/a/mcpher.com/share/Home/excelquirks/gassnips/whereami](https://sites.google.com/a/mcpher.com/share/Home/excelquirks/gassnips/whereami)

测试它的最简单的代码片段是：

```
function testError() {
  try {
    SpreadsheetApp.openById('Boooo');  
  } catch(err) {
    Logger.log(err.stack);
  }
} 
```

您将记录此信息：

```
Exception: Unexpected error while getting the method or property openById on object SpreadsheetApp.
at testError (#Triggers:164:20)
at __GS_INTERNAL_top_function_call__.gs:1:8 
```

代码行 (164)、文件 (#Triggers) 和函数名 (testError) 在这里。

我也试过这个库（[https://github.com/RomainVialard/ErrorHandler](https://github.com/RomainVialard/ErrorHandler)），但现在寻找更简单的解决方案。

# iphone - 核心图中的散点图到底是什么？

> ID：13717830
> 
> 赞同：1
> 
> 时间：2012-12-05T06:52:52.153
> 
> 标签：iphone, objective-c, ios, xcode, core-plot

核心图中的散点图到底是什么？在我的应用程序中，我正在绘制值并加入它们，但空值除外。如果空值介于两者之间，则绘图不会加入。在散点图中绘制值的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:02:25.477

是的，这就是散点图在 coreplot 中的工作方式。散点图通过使用一条线连接坐标点来表示。如果缺少某些数据，它将由散点图中的断开链接表示。

或者，您可以尝试使用相应轴值的零值来表示空值，并且它可以表示为该部分图表中的突然下降，但这又取决于您的具体要求。

# joomla1.5 - 我想从 Joomla1.5 中的横幅图像生成 PDF 文件？

> ID：13717834
> 
> 赞同：0
> 
> 时间：2012-12-05T06:53:00.223
> 
> 标签：joomla1.5

从**Joomla1.5**我尝试从索引页横幅图像生成 PDF 文件。

**当我单击横幅图像时，它会将该横幅生成为 PDF 文件，** 任何人都可以为我提供解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:56:36.953

您应该使用[fpdf](http://www.fpdf.org/)并将横幅设为链接并重定向到任何 php 页面。在该链接中，您应该保留横幅图像的详细信息，并在重定向页面中触发下载 pdf 文件的功能

# ruby-on-rails - Rails 3.1 多租户路由

> ID：13717838
> 
> 赞同：2
> 
> 时间：2012-12-05T06:53:20.140
> 
> 标签：ruby-on-rails, custom-routes

我有一个 Rails 3.1 多租户应用程序，其域名为 mydomain.com。有了这个，我想创建以下路线，但继续前进

www.mydomain.com 和 mydomain.com 的默认根目录应转到名为 home 的控制器，或 *.mydomain.com 的类似默认根目录（www 除外）应转到 *.mydomain.com 的会话/新路由默认根目录（除了 www）登录时将转到仪表板控制器或类似的

任何人都可以帮助实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:03:11.980

这与您正在寻找的内容非常相似：http: [//maxresponsemedia.com/rails/setting-up-user-subdomains-in-rails-3/](http://maxresponsemedia.com/rails/setting-up-user-subdomains-in-rails-3/)。

**编辑**

看来链接现在已经失效了（这就是为什么我们应该发布的不仅仅是链接！），但我能够在 WayBackMachine 中找到它。这是它拥有的代码示例。

首先，我们为子域和根域定义了几个约束：

```
# /lib/domains.rb

class Subdomain
  def self.matches?(request)
    request.subdomain.present? && request.subdomain != "www" && request.subdomain != ""
  end
end

class RootDomain
  @subdomains = ["www"]

  def self.matches?(request)
    @subdomains.include?(request.subdomain) || request.subdomain.blank?
  end
end 
```

然后，在我们的 routes.rb 中，我们将子域定向到网站控制器，但是对与主站点相关的域的任何请求都会发送到为应用程序配置的静态页面。

```
# config/routes.rb
# a bunch of other routes...

# requiring the /lib/domains.rb file we created
require 'domains'

constraints(Subdomain) do
  match '/' => 'websites#show'
end

constraints(RootDomain) do
  match '/contact_us', :to => 'static_pages#contact'
  match '/about', :to => 'static_pages#about'
  match '/help', :to => 'static_pages#help'
  match '/news', :to => 'static_pages#news'
  match '/admin', :to => 'admin#index'
end 
```

# android - 无法从下载的 apk 扩展文件中获取图像

> ID：13717841
> 
> 赞同：0
> 
> 时间：2012-12-05T06:53:27.947
> 
> 标签：android

我已添加 apk 扩展文件并成功上传和下载，但无法使用

我的扩展文件包含图像，上传时我已经完成所有压缩并上传..

下面是我从扩展文件中获取图像的代码......

谁能帮我..我怎样才能得到图像

```
ZipResourceFile expansionFile = APKExpansionSupport
                .getAPKExpansionZipFile(context, 1, 0);

// Get an input stream for a known file inside the expansion file
// ZIPs

InputStream is = expansionFile.getInputStream("95065668.jpg");
Log.d(TAG,
      "Assigning obb image to preview image::::::::::::"
            + is.available());
BitmapFactory.Options bfo = new BitmapFactory.Options();
bfo.inPreferredConfig = Bitmap.Config.ARGB_8888;
Bitmap b = BitmapFactory.decodeStream(is, null, bfo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:03:06.320

几乎你已经完成了，阅读你的 HTML 文件并将其转换为`UTF-8`字符串。& 加载为

```
webview.loadData(ur_html_str, "text/html", null); 
```

其中 ur_html 是这样的：

```
String ur_html_str = "<html><body>youe body contents</body></html>"; 
```

# android - PhoneGap+Cordova 应用程序无法在 AVD（Android 虚拟设备）上运行

> ID：13717842
> 
> 赞同：3
> 
> 时间：2012-12-05T06:53:35.887
> 
> 标签：android, cordova

我遵循了基本 Phonegap 教程（Eclipse、Android SDK、ADT Phonegap）中的所有步骤，

> 第 1 步：我在 assets/www 文件夹中创建了一个 HMTL 页面，运行它，它显示了我的 hello world html。
> 
> 第 2 步：我在我的 HTML 页面的 CDN 上添加了对 jQuery Mobile 的引用：它起作用了。
> 
> 第 3 步：我编辑 index.html 页面，复制粘贴代码，这是来自 Phonegap 网站的示例，但它确实......什么都没有。甚至没有警报（我添加了一些警报以查看是否发生了某些事情，但即使 onDeviceReady 事件也不会触发。

我有 Phonegap JAR，我的 assest/www 目录中有 cordova-1.7.0.js，但可能缺少一些东西。

我还尝试了 libs 文件夹中的 Cordova JAR，但它不起作用。

有人可以帮我吗？

我还尝试了 Phonegap 网站上的另一个示例（“设备属性”、“加速度计”示例代码），但它仍然无法正常工作。

这是一个全新的 Eclipse ADT（Android 开发工具），我已经从 Android SDK 将 Android 版本安装到 4.0.3、4.1.2、4.2，并且我正在使用 Phonegap 2.2.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:00:51.357

您需要将此 xml 文件放在 www 文件夹“config.xml”中

这里的 xml 链接 [https://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:51:52.280

检查 phonegap.js 文件资源。您在 head 元素中添加脚本元素。你必须正确的cordova-1.7.0.js

# iphone - Iphone 键盘显示在所有应用程序上

> ID：13717846
> 
> 赞同：1
> 
> 时间：2012-12-05T06:53:57.293
> 
> 标签：iphone, ios, keyboard

Iphone 4s 应用程序键盘问题。在主菜单中键盘也显示不隐藏。当滑动搜索`enter code here`后滑动到应用程序后，它们也会显示在应用程序上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:06:07.247

在移动之前，您必须从 TextField 或搜索栏中**辞去第一响应者的职务**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:29:27.867

嗨，如果你想隐藏键盘，那么在你想隐藏键盘的动作中写下面的代码

```
[self.view endEditing:YES]; 
```

让我知道它是否有效！！！！

快乐编码！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T07:31:33.823

`<UItextfieldDelegate>`在您的 .h 文件中使用。然后在 nib 文件中与文件所有者进行连接。

写入.m文件

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
 [self.view endEditing:YES];
 return YES;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T07:15:58.553

尝试使用以下两个选项，在 UISearchBar 的 textDidChange 委托中，您可以检查搜索栏中的字符，如果字符长度为 0，则您可以退出键盘。否则，您可以在键盘上方或任何您想要的位置添加一个按钮，然后在该按钮上单击退出键盘。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T07:34:23.737

当您从视图中移动时执行此任务

```
-(void)viewWillDisappear:(BOOL)animated
{
    [self.view endEditing:YES];
} 
```

# iphone - 包含大量空终止的 NSString？

> ID：13717847
> 
> 赞同：1
> 
> 时间：2012-12-05T06:54:01.143
> 
> 标签：iphone, encryption, nsstring, nsdata

> **可能重复：**
> [在 ios 3des 加密中包含大量空终止。当我将 NSData 转换为 NSString 时，它最终会成为第一个空终止吗？](https://stackoverflow.com/questions/13717571/in-ios-3des-encryption-contain-lots-of-null-termination-when-i-convert-nsdata-to)

当我将加密的 NSData 转换为 NSString 因为数据包含大量空终止时，NSString 在第一个空终止时结束，变量不能包含整个数据。但我必须在服务器上发送加密字符串。我该怎么做才能将 NSData 转换为 NSString。包含所有数据的字符串意味着（如果数据包含空终止。在这种情况下字符串不会结束）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:01:15.507

尝试更改转换格式，如下所示

```
NSString* myString;
myString = [[NSString alloc] initWithData:nsdata encoding:NSASCIIStringEncoding]; 
```

# android - Android：将 sqlite 数据库内容加载到 webview

> ID：13717851
> 
> 赞同：6
> 
> 时间：2012-12-05T06:54:14.353
> 
> 标签：android, database, sqlite, select, webview

我有一个**sqlite数据库，其中有一个我想在****webview**中加载的内容，因为我想***从数据库中选择并在 web view 中显示***，有什么办法吗？

```
public class TataworatYawmeeh extends Activity {
    WebView webView;
    String javascrips;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);   
        setContentView(R.layout.tataworat);

        webView = (WebView) findViewById(R.id.tatworatWebView);
        webView.setBackgroundColor(0x00000000);

        try {       
            DataBaseHelper myDbHelper = new DataBaseHelper(this);

            myDbHelper = new DataBaseHelper(this);

            try {
                myDbHelper.createDataBase();

                String selectQuery = "SELECT  * FROM 'nnn'";
                SQLiteDatabase db = myDbHelper.getReadableDatabase();
                db.execSQL(selectQuery);
            } catch (IOException ioe) {      
                throw new Error("Unable to create database");
            }

            try {
                myDbHelper.openDataBase();

            } catch (SQLException sqle) {
                throw sqle;
            }
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T08:42:36.623

您必须使用 Java 类作为接口：

```
DataLoader dl = new DataLoader();

// For passing the data
webView.addJavascriptInterface(dl, "accessor");
webView.loadUrl("file:///android_asset/yourpage.html"); 
```

在您的活动中，您可以声明匿名类 DataLoader，使用 get 方法检索数据并使用 JSON 将其返回，如下所示：

```
class ChartDataLoader {
    public String getData() {
        String selectQuery = "SELECT  * FROM 'nnn'";
        SQLiteDatabase db = myDbHelper.getReadableDatabase();
        result = db.execSQL(selectQuery);

        Gson gson = new Gson();
        data = gson.toJson(result, resultype.class);

        return data;
    }
} 
```

最后，您可以使用 javascript 在 html 中使用这些数据：

```
<script id="source" language="javascript" type="text/javascript">
     var obj = window.accessor;
     var data = JSON.parse(obj.getBalances());
     /* Loop */
</script> 
```

# vb.net - 使用 IO.StreamReader 读取文件后无法写入文件

> ID：13717856
> 
> 赞同：1
> 
> 时间：2012-12-05T06:55:15.917
> 
> 标签：vb.net, filestream, bufferedreader, .net

我正在制作一个也可用作记事本（CryptoMatic）的加密程序。有一个 Open 函数，代码如下：

```
 Dim r As New StreamReader(filename)
    Dim text As String = r.ReadToEnd
    txtFileContents.text = text

    r.Dispose()
    r.Close() 
```

现在有保存和另存为按钮，保存按钮检查文件之前是否已保存。如果是，那么我正在尝试使用以下代码写入该文件：

```
 Dim myFileStream As New System.IO.FileStream(filename, FileMode.Append, FileAccess.Write, FileShare.None)
    myFileStream.Lock(0, 100)

    Dim myWriter As New System.IO.StreamWriter(myFileStream)
    myWriter.WriteLine(text)

    myWriter.Flush()
    myWriter.Close()
    myFileStream.Close()

    myFileStream.Unlock(0, 100) 
```

现在，当我按下保存按钮时，它会出现以下错误：

```
 The process cannot access the file 'C:\Users\VisualTech\Documents\Visual Studio            2010\Projects\CryptoMatic Update\CryptoMatic Update\bin\Debug\text.txt' because it is being    used by another process. 
```

应用程序停止，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:23:58.057

我已经在上面尝试了您的代码，并注意到了两件事：

*   你不需要`myFileStream.Lock`打电话，因为你已经用`FileShare.None`
*   `myFileStream.Unlock(0, 100)`呼叫后 您无法呼叫 `myFileStream.Close()`

所以我用这种方式重写了你的代码。

```
Sub Main
    Dim text = "This is a text to write in the stream"
    Using myFileStream As New System.IO.FileStream("D:\temp\testlock.txt", FileMode.Append, FileAccess.Write, FileShare.None)
        Using myWriter As New System.IO.StreamWriter(myFileStream)
            myWriter.WriteLine(text)
        End Using
    End Using
End Sub 
```

# javascript - jQuery：检测是否有 ajax 调用

> ID：13717857
> 
> 赞同：1
> 
> 时间：2012-12-05T06:55:18.493
> 
> 标签：javascript, ajax, jquery

我有一个函数 X 可能会或可能不会发送 ajax 调用。然后我有一个调用 X 的函数 Y，并且想知道发生了什么 - 是否发送了 ajax 调用。我应该提一下，函数 X 是一个“黑匣子”——这意味着我不能改变它的实现来返回一个指示值。

我尝试使用 .ajaxSend()，但它仅在有 ajax 调用时触发。因此，在没有 ajax 的情况下，我根本没有得到任何指示。

为了解决这个问题，我尝试使用 .promise().done() 和 .ajaxSend()，就好像在说“如果有 ajax 调用，则触发 ajaxSend 并保存一个布尔值。然后在最后done() 将被触发并查看该布尔值以确定发生了什么”。

问题是如何确保 done() 在 ajaxSend 之前不会弹出？

还是有更好的方法来做到这一点？

谢谢！

# linux - 我的 bash 脚本有什么问题？

> ID：13717859
> 
> 赞同：0
> 
> 时间：2012-12-05T06:55:24.450
> 
> 标签：linux, bash, shell

```
ssh -f $user@$machine_name "cd $path; shard_path=`find . -name \"shard0\"`; cd $shard_path; mkdir temp" 
```

目录结构为 $path/node0/shard0

在这个脚本中，var`shard_path`为空，为什么？并且该目录`temp`是在 中构造的，`~/`而不是在`shard0`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:59:53.023

因为您在命令周围使用双引号发送到服务器，所以正在本地扩展。它试图替换`$path`并`$shard_path`基于它们的本地值，并且由于`$shard_path`没有在本地定义，它扩展为空。

您可以通过对要在服务器上执行的命令使用单引号来避免很多这些引用问题。您需要的确切引用取决于这些变量的确切定义位置。但从您的评论来看，这听起来像是您需要的命令：

```
ssh -f $user@$machine_name "cd $path;"'shard_path=$(find . -name "shard0"); cd $shard_path; mkdir temp' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:50:15.620

根据您与 Brian Campbell 的讨论，我假设该`$path`变量位于本地客户端并且`$shard_path`位于远程位置。

然后尝试以下操作：

```
ssh -f xce@ns20.xce.n.xiaonei.com "echo $path; cd $path; shard_path=\$(find . -name \"shard0\"); echo \$shard_path;" 
```

**注意：**如果有可能有多个名为 'shard0' 的文件，find 会输出很多路径，所以你可能想使用
`shard_path_array=( \$(find . -name \"shard0\") );`
This将find的输出放入一个数组中，然后你可以使用例如切换到一个路径
`cd \${shard_path_array[0]}`（在远程机器）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:57:13.887

$path 在命令通过 ssh 发送到目标机器之前在本地扩展。同上 $shard_path。如果您希望远程解释/扩展这些值，您需要转义 $，例如 \$path。

[这是关于这个主题的非常彻底的处理](https://unix.stackexchange.com/questions/4770/quoting-in-ssh-host-foo-and-ssh-host-sudo-su-user-c-foo-type-constructs)。

# java - 删除字符串中感叹号前的字符

> ID：13717865
> 
> 赞同：0
> 
> 时间：2012-12-05T06:56:04.907
> 
> 标签：java

请让我知道如何删除感叹号之前的单词。

意味着例如如果 Sring 是

```
BIM!A  , i need only A 

SAM!B   , i need only B 

SNNJ!D  , I need only D 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T06:58:59.917

您可以使用

```
str = str.substring(str.indexOf("!")+1); 
```

希望有帮助！

编辑：链接到 javadoc：[substring](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#substring%28int%29)和[indexOf](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:12:21.377

```
System.out.println(str.substring(s.lastIndexOf("!") + 1)); 
```

这将打印出现在最后一个感叹号之后的字符串部分。如果没有“！”，则打印整个字符串 在那儿

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:59:56.550

```
System.out.println(s.substring(s.indexOf("!") + 1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T07:00:35.597

您可以在 with 内进行`String`搜索

```
Strings s = "ABD!A";
//This gives you the index of the first !
int i = s.indexOf('!');
//now you can Substring 
String after = s.substring(i+1); 
```

# windows-8 - 在 Windows 8 Javascript App 中导航到页面的特定部分

> ID：13717866
> 
> 赞同：0
> 
> 时间：2012-12-05T06:56:08.823
> 
> 标签：windows-8, windows-store-apps

我正在使用 JavaScript 和 HTML 开发一个 Windows 8 应用程序。

1.  我有一个页面，其中水平放置了不同的部分。我在另一个页面中有这些部分的链接。我希望页面从该特定部分加载（意味着页面应从该部分开始）。

2.  我正在使用网格模板并在主页中有一个列表视图。当我单击组中的任何项目时，导航到该页面并返回主页。我希望从我之前选择的部分加载主屏幕。屏幕应该自动滚动到该部分，就像从语义缩放中发生的那样。

在这方面的任何帮助都将大有裨益。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:03:21.987

对于第一部分，将容器的 scrollLeft 属性设置为要滚动到的元素的 offsetLeft 属性就足够了。

第二部分可以通过在导航离开之前存储 ListView 的 scrollPosition 属性并在导航返回后将其设置为旧值来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:18:52.430

谢谢多米尼克和邮件

我为第一个问题尝试了 document.getElementBy("Id").focus() 并且它有效。但我在这方面遇到了问题。

我有四个 div 水平说“divA divB divC divD” divA 的数据来自云。当我单击主屏幕中的 divD 链接时。它不是第一次带我到相应的部分，因为加载 divA 需要一些时间。当第二次单击 divD 的链接时，它会转到相应的部分。如果我使用 setInterval() 但 DivA 会在页面加载时显示几秒钟然后滚动到 divD 这不好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:29:58.800

正如 Ma_li 所说，向左滚动是一种解决方案——尤其是对于**非**ListView 内容。这里的关键是您在返回时想要保持多少体验。一种选择（同样，对于非列表视图内容）是找到您想要在屏幕`scrollIntoView`上显示的元素，然后调用该元素。*但是*，这只会将项目**带到**屏幕上——它不会一直到左边（或右边，对于 BIDI 语言），它的滚动*刚好足以*让整个元素出现在屏幕上。

*对于 ListViews*，您应该使用[indexOfFirstVisibleItem](http://msdn.microsoft.com/en-us/library/windows/apps/hh700691.aspx)（或 indexOfLastVisibleItem）将列表视图滚动到正确的位置。这是关键，因为 listview 是一个虚拟化控件，这为滚动 listview 位置提供了最准确可靠的方法。

# apache-camel - 阿帕奇骆驼和流口水的区别

> ID：13717867
> 
> 赞同：1
> 
> 时间：2012-12-05T06:56:12.990
> 
> 标签：apache-camel, drools

我想知道骆驼和口水有什么区别，当骆驼不合适但口水可以！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T07:55:59.280

Drools 是一个业务规则引擎，它根据业务需求在流程中采取不同的行动。通常将业务流程的不同部分链接在一起。

Camel 是一个在集成/传输层上工作的路由和中介引擎。系统间消息格式的映射、协议（JMS、HTTP、FTP等）和消息标准（如XML、JSON等）的转换以及路由。

# mysql - Mysql查询以获取相同的日期时间值

> ID：13717868
> 
> 赞同：0
> 
> 时间：2012-12-05T06:56:15.903
> 
> 标签：mysql, datetime

嗨伙计们！！！我有一个表，其中有一个名为“Calldate”的列，其中包含日期时间值。现在在此列中有很多行具有相同的日期和时间值。所以我需要从表中检索这些值。

请大家帮我完成任务.. 提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:10:32.907

如果您只想检索重复的日期和时间值，那么答案应该是：

```
选择通话日期，
COUNT(Calldate) FROM 表
按通话日期分组
HAVING COUNT(通话日期) > 1

```

这将返回具有重复日期和时间的记录；具有日期和时间的总重复记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:26:52.390

```
 The DATETIME values contain both date and time. MySQL retrieves and displays values in 'YYYY-MM-DD HH:MM:SS' format. The supported range is from '1000-01-01 00:00:00' to '9999-12-31 23:59:59'.

        you may write the query as follows:

       to get all values:
        select Calldate from tableName

       to get the one record among multiple same records:
        select distinct(Calldate) from tableName

      to get the same valued records from column:

select Calldate from tableName
group by Calldate
Having count(Calldate)>1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:58:29.270

尝试这个 ：

```
Select 
* 
from table1 
inner join 
(
Select 
Calldate
from table 
group by Calldate 
having count(*)>1
) 
as temp_table on (table1.Calldate=temp_table.Calldate) 
```

# startup - Rstudio 服务器启动脚本

> ID：13717869
> 
> 赞同：0
> 
> 时间：2012-12-05T06:56:28.240
> 
> 标签：startup, rstudio, rstudio-server

我是 R 的新手。我需要为 R 编写一个扩展。当 Rstudio 启动时，应该调用这个包中的一个函数来验证并将一些数据加载到主内存以便更快地访问。我如何告诉 R studio 在启动时调用将数据加载到主内存中的特定函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T01:02:10.310

这可以使用包中的 .onLoad 函数挂钩来实现。

# r - 使用嵌套循环加速蒙特卡罗模拟 (2)

> ID：13717875
> 
> 赞同：0
> 
> 时间：2012-12-05T06:57:01.783
> 
> 标签：r, nested-loops, montecarlo

我想知道是否有更有效的方法来加速下面的代码。它使用嵌套循环中需要子采样的过程（先前的答案[https://stackoverflow.com/a/13629611/1176697](https://stackoverflow.com/a/13629611/1176697)有助于提高效率）。当 B=500 时，R 倾向于挂起，尽管计算机操作系统并未受到过度影响。

目标是使用 B=1000 并使用更大的 m 值（m=75,m=100,m=150）运行以下代码

我在下面的代码中详细说明了该过程，并包含了指向可重现数据集的链接。

```
#Estimation of order m `leave one out' hyperbolic efficiency scores

#The procedure sequentially works through each observation in `IOs' and 
#calculates a DEA order M efficiency score by leaving out the observation
# under investigation in the DEA reference set

# Step 1: Load the packages, create Inputs (x) and Outputs (y), choose 
# m(the order of the partial frontier or reference set to be used in DEA)
# and B the number of monte carlo simulations of each m order DEA estimate

# Step 2: For each observations a in x, x1 and y1
#are create which 'leaves out' this observation. 

# Step 3: From these matrices subsamples (xref, yref) of size [m,] are 
# taken and used in DEA estimation.

# Step 4: The DEA estimation uses the m subsample from step 3
# as a reference set and evaluates the efficiency of the observation that
# has been 'left out'
#(thus the first two arguments in DEA are matrices of order [1,3] )

# Step 5: Steps 3 and 4 are repeated B times to obtain B simulations of the 
# order m efficiency score and a mean and standard deviation are
# calculated and placed in effm.

# IOs data can be found here: https://dl.dropbox.com/u/1972975/IOs.txt
# From IOs an Input matrix (x[1376,3]) and an Output matrix (y[1376,3])
# are created.

library(Benchmarking)
x <- IOs[,1:3]
y<-IOs[,4:6]
A<-nrow(x)
effm <- matrix(nrow = A, ncol = 2)
m <- 50
B <- 500
pb <- txtProgressBar(min = 0,
                     max = A, style=3)

for(a in 1:A) {
  x1 <- x[-a,]
  y1 <- y[-a,]
  theta <- numeric(B)
  xynrow<-nrow(x1)
  mB<-m*B 
  xrefm <- x1[sample(1:xynrow, mB, replace=TRUE),] # get all of your samples at once(https://stackoverflow.com/a/13629611/1176697)
  yrefm <- y1[sample(1:xynrow, mB, replace=TRUE),]
  deaX <- as.matrix(x[a,], ncol=3)
  deaY <-as.matrix(y[a,], ncol=3)

  for(i in 1:B){
    theta[i] <- dea(deaX, deaY, RTS = 'vrs', ORIENTATION = 'graph',
                    xrefm[(1:m) + (i-1) * m,], yrefm[(1:m) + (i-1) * m,], FAST=TRUE)
  }

  effm[a,1] <- mean(theta)
  effm[a,2] <- sd(theta) / sqrt(B)
  setTxtProgressBar(pb, a) 
}
close(pb) 
```

# linux - 符号和共享库之间的强制映射

> ID：13717877
> 
> 赞同：1
> 
> 时间：2012-12-05T06:57:03.077
> 
> 标签：linux, shared-libraries, dlopen

我有一个包含四个共享库的可执行文件，依赖关系树如下所示： Executable *app* does a *dlopen* of `foo.so`and `bar.so`. `foo.so`依次链接到`fooHelper.so`和`bar.so`链接到`barHelper.so`。

现在，问题是`fooHelper.so`和`barHelper.so`有一些相同的符号。例如，假设我们在和`func`中有不同的实现。有没有办法强制使用' 的实现和使用's？目前发生的情况是，根据帮助程序的链接顺序，只有一个实现被和使用。这是因为默认的 Unix 链接模型，如果符号的定义已经加载，那么随后加载的共享库中的任何其他定义都将被丢弃。基本上，`fooHelper.so``barHelper.so``foo.so``fooHelper.so``bar.so``barHelper.so``func``foo.so``bar.so``func`将从首先链接的帮助程序库中获取。我需要一种方法来显式指定适当的映射，而无需更改共享库的源代码。

我正在使用 g++ 4.4 在 Linux 上工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T06:04:50.103

> 有没有办法强制 foo.so 使用 fooHelper.so 的实现和 bar.so 使用 barHelper.so 的？

是的：这`RTLD_LOCAL`就是（当`dlopen`ing`foo.so`和`bar.so`）。

```
RTLD_LOCAL
  This is the converse of RTLD_GLOBAL, and the default if neither flag
  is specified. Symbols defined in this library are not made available
  to resolve references in subsequently loaded libraries. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:27:51.133

如果两个函数碰巧在同一个名称空间中，那么您会遇到一些麻烦 - 如果您使用 C 进行编程。要查找的术语是“函数重载”。以前有关于这个话题的讨论，例如这个： [C 中的函数重载](https://stackoverflow.com/questions/479207/function-overloading-in-c)

编辑： http: [//litdream.blogspot.de/2007/03/dynamic-loading-using-dlopen-api-in-c.html](http://litdream.blogspot.de/2007/03/dynamic-loading-using-dlopen-api-in-c.html)

# java - 将 AXis 与 Lotus notes 6.5 一起使用时出现 NoClassDEfFoundError

> ID：13717880
> 
> 赞同：0
> 
> 时间：2012-12-05T06:57:17.637
> 
> 标签：java, web-services, lotus-notes, lotus-domino, axis

我正在尝试在 Lotus notes 6.5 中使用 APACHE-AXIS 框架。

我做了：

1.  在脚本库中创建 java 库
2.  从 WSDL 创建 Java 文件并添加到库中
3.  将 xml-apis.jar 添加到库中。

现在我创建了一个代理并将创建的库添加到它。请参阅下面的代理代码：

```
import lotus.domino.*;
import java.net.URL;
import javax.xml.namespace.QName;
import javax.xml.parsers.ParserConfigurationException;
import org.apache.axis.client.*;
public class JavaAgent extends AgentBase {

    public void NotesMain() {

        try {
            Session session = getSession();
            AgentContext agentContext = session.getAgentContext();

            URL url = new URL("http://foo.com");
            QName qName = new QName("xxxx", "getFooDataUser");
            TestWebServiceLocator loc = new TestWebServiceLocator();

            System.out.println("Before STUB Calling");

                        // (Your code goes here) 

        } catch(Exception e) {
            e.printStackTrace();
        }
    }
} 
```

现在在代理中每当代码遇到任何初始化代码（构造函数调用）时，它就是 NoClassDefFoundError

请参阅下面的堆栈跟踪：

```
java.lang.NoClassDefFoundError: javax/xml/parsers/ParserConfigurationException

    at org.apache.axis.configuration.FileProvider.configureEngine(FileProvider.java:179)

    at org.apache.axis.AxisEngine.init(AxisEngine.java:172)

    at org.apache.axis.AxisEngine.<init>(AxisEngine.java:156)

    at org.apache.axis.client.AxisClient.<init>(AxisClient.java:52)

    at org.apache.axis.client.Service.getAxisClient(Service.java:103)

    at org.apache.axis.client.Service.<init>(Service.java:112)

    at JavaAgent.NotesMain(JavaAgent.java:18)

    at lotus.domino.AgentBase.runNotes(Unknown Source)

    at lotus.domino.NotesThread.run(NotesThread.java:218) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:28:21.057

将 xalan-2.0.1.jar 添加到库中。

您可以在 [http://www.java2s.com/Code/Jar/x/Downloadxalan201jar.htm中找到详细信息](http://www.java2s.com/Code/Jar/x/Downloadxalan201jar.htm)

# search - 以编程方式清除 Android GMail 搜索历史记录

> ID：13717881
> 
> 赞同：1
> 
> 时间：2012-12-05T06:57:21.813
> 
> 标签：search, gmail, history

我正在尝试清除 GMail 搜索历史记录，但它不起作用。我应该如何处理这个？

```
SearchRecentSuggestions xxx =                           
            new SearchRecentSuggestions(getBaseContext(), "com.google.android.gm.SearchHistoryProvider", 1);

xxx.clearHistory(); 
```

# postgresql - postgres SQL，函数

> ID：13717882
> 
> 赞同：1
> 
> 时间：2012-12-05T06:57:33.940
> 
> 标签：postgresql

我想创建一个函数，它返回老板比人高多少级（调用函数）。

这是我想做的方式，但我不太清楚 SQL 语法是如何工作的 [http://pastebin.com/dyDaGwf9](http://pastebin.com/dyDaGwf9)

该表如下所示：

```
workerid    name    chefid
1           Bob     
2           Alice   1
3           Joe     1
4           John    2
5           Dirk    4
6           Ralf    2
7           Lisa    1
8           Lyn     3 
```

调用函数的最终结果应该是这样的

函数调用：

```
Select workerid, name, rankFunction(workerid) from workers;

workerid    name    rank
1           Bob     0
2           Alice   1
3           Joe     1
4           John    2
5           Dirk    3
6           Ralf    2
7           Lisa    1
8           Lyn     2 
```

如果有人能提供一些启示，那就太好了，

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:17:16.910

你不需要一个函数，只需要一个递归查询（从 8.4 版开始可用）：

```
WITH RECURSIVE chef as (
    SELECT workerid, name, chefid, 0 AS rank FROM workers WHERE chefid is null
    UNION ALL
    SELECT workers.workerid, workers.name, workers.chefid, rank + 1 
    FROM workers JOIN chef ON workers .chefid = chef.workerid 
)
SELECT workerid, name, rank FROM chef ORDER BY workerid; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:41:09.527

这是一个简单的递归：

```
CREATE OR REPLACE FUNCTION rankFunction(worker_id int)
  RETURNS int AS
$BODY$
DECLARE
    temp_chefid int;
BEGIN
    temp_chefid := (SELECT chefid from workers where workerid = worker_id);
    IF(temp_chefid IS NULL) THEN
         RETURN 0;
    ELSE RETURN 1 + rankFunction(temp_chefid);
    END IF;
END;
$BODY$
  LANGUAGE plpgsql VOLATILE 
```

# mysql - mysql 404错误

> ID：13717891
> 
> 赞同：0
> 
> 时间：2012-12-05T06:58:40.073
> 
> 标签：mysql

有以下代码：

```
<?php

if (isset($_POST['submitted'])) {

$reqwidth = $_POST['reqwidth'];
$reqside = $_POST['reqside'];
$reqrad = $_POST['reqrad'];
$sqlinsert = "INSERT INTO tirelist (width, sidewall, radial) VALUES  ('$reqwidth','$reqside', '$reqrad')";

if (!mysqli_query($dbcon, $sqlinsert)) {
die('error inserting new record');
 }

$newrecord = "1 record added to database";

}

?>

<html>
<head>
<title>Request Tire Size</title>
</head>
<body>

<h1>Request Tire Size</h1>

<form method="post" action="insert-data.php">
<input type="hidden" name="submitted" value="true" />
<fieldset>
<legend>Request Tire</legend>
 <label>Tire Width: <input type="text" name="reqwidth" /></label>
<label>Tire Sidewall: <input type="text" name="reqside" /></label>
<label>Tire Radial: <input type="text" name="reqrad" /></label>
 </fieldset>
  <br />
 <input type="submit" value="Send Order Request" />
  </form> 
```

当我单击发送订单请求时，我收到 404 错误。

我注意到该页面被称为 ~http://localhost/index.php?p=test2~，但是当我单击它时，它会将我重定向到 ~http://localhost/insert-data.php~

尝试了几个小时，想知道我能做些什么来解决它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:03:42.963

试试这个。表单方法="post" action="/insert-data.php"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:00:44.853

改变

```
<form method="post" action="insert-data.php"> 
```

改为使用 index.php?p=test2 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T07:01:53.370

在您的表格中，您引用`insert-data.php`. 那存在吗？

如果您尝试将表单提交到同一个文件，您可以尝试使用这个：

```
<form method="post" action="<?php echo $_SERVER['PHP_SELF'] ?>"> 
```

# c++ - 在 CPP 文件中使用生成文件字符串变量

> ID：13717896
> 
> 赞同：5
> 
> 时间：2012-12-05T06:59:16.790
> 
> 标签：c++, makefile

我在 make 文件中使用以下代码从 CPP 文件访问变量 VENDOR_NAME。

`EXTRA_DEFINE += -DVENDOR_NAME=$(VENDOR_NAME)` `VENDOR_NAME`包含一个字符串。

在我的 cpp 文件中，当我尝试使用此变量时，出现如下错误。

`cout << VENDOR_NAME;`

`Feature1.cpp.bak.cpp:8:`'Default_Vendor' 未声明（首先使用此函数） `Feature1.cpp.bak.cpp:8:`（每个未声明的标识符仅报告一次

我想这是因为我的字符串不包含双引号，并且编译器正在考虑 VENDOR_NAME 的内容作为变量。

如何在我的 CPP 文件中将此变量作为字符串获取，以便我可以像`#define`编辑它一样使用它？

谢谢...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T07:02:20.470

您的 makefile 将为编译器创建一个命令行。出现的问题是，如果您只是将值括在引号中：

```
EXTRA_DEFINE += -DVENDOR_NAME="$(VENDOR_NAME)" 
```

...外壳会将引号视为简单地描述命令行参数，因此它可能会将它们剥离（尽管它可能取决于您使用的外壳）。为了防止这种情况，您需要使用转义引号创建参数：

```
EXTRA_DEFINE += -DVENDOR_NAME="\"$(VENDOR_NAME)\"" 
```

我认为大多数典型的 shell，至少对于 Windows 和 Linux，都会接受反斜杠作为转义符以保留​​引号，但我确信至少有一个你必须以不同的方式进行引用.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T07:02:26.567

使用预处理器将其转换为字符串。

```
#define stringify( x ) stringify_literal( x )
#define stringify_literal( x ) # x

std::cout << stringify( VENDOR_NAME ); 
```

给定对可变参数宏的预处理器支持（官方为 C++11，实际上可用时间更长），`VENDOR_NAME`可能包括逗号：

```
#define stringify( ... ) stringify_literal( __VA_ARGS__ )
#define stringify_literal( ... ) # __VA_ARGS__

std::cout << stringify( VENDOR_NAME ); 
```

# java - 带有 getNumericValue() 的 Java 字符文字值

> ID：13717898
> 
> 赞同：5
> 
> 时间：2012-12-05T06:59:27.770
> 
> 标签：java, character, literals

为什么大写和小写文字的结果*相同？*例如：

```
char ch1 = 'A';
char ch2 = 'a';
char ch3 = 'Z';
char ch4 = 'z';

print("ch1 -- > " + Integer.toBinaryString(Character.getNumericValue(ch1)));
print("ch2 -- > " + Integer.toBinaryString(Character.getNumericValue(ch2)));
print("ch3 -- > " + Integer.toBinaryString(Character.getNumericValue(ch3)));
print("ch4 -- > " + Integer.toBinaryString(Character.getNumericValue(ch4))); 
```

结果我得到：

```
ch1 -- > 1010
ch2 -- > 1010
ch3 -- > 100011
ch4 -- > 100011 
```

并没有真正看到“A”和“a”之间的区别。即使我使用 UTF 格式的字符文字（\u0041 表示“A”，\u0061 表示“a”），我也会得到相同的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T07:02:35.663

[它的行为与记录](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#getNumericValue%28char%29)的完全相同：

> 大写字母 AZ（'\u0041' 到 '\u005A'）、小写字母（'\u0061' 到 '\u007A'）和全角变体（'\uFF21' 到 '\uFF3A' 和 '\uFF41'通过 '\uFF5A') 形式具有从 10 到 35 的数值。

基本上这意味着在解析十六进制（比如说）时`0xfa == 0xFA`，正如您所期望的那样。

我只希望在使用 base64 之类的东西时大小写很重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T07:18:56.567

从评论来看，您实际上是在寻找字符的代码点，而不是它们的数值，所以我将把它隔离成一个答案。该`getNumericValue()`函数在解释其字形时返回字符作为数字的含义，它不返回字符的代码点。例如，`getNumericValue('5')`返回 5 作为`int`，而不是 的代码点`5`。

要使用代码点，只需按原样使用您的变量或 char 文字。`char`是数值数据类型。例如，`System.out.println((int)'a');`将打印 65，非常简单。

# android - LIKE 中的特殊字符与 SQLite

> ID：13717899
> 
> 赞同：0
> 
> 时间：2012-12-05T06:59:35.010
> 
> 标签：android, sqlite, special-characters, sql-like

我想在数据库中搜索**$!(%&'^%$&'%^&&'^'%'**

我尝试了以下查询，但仍然显示错误：

```
select * from data
where data1 LIKE \'$!(%&'^%$&'%^&&'^'%'\'

select * from data
where data1 LIKE '$!(%&'^%$&'%^&&'^'%''

select * from data
where data1 LIKE '$!(%&\'^%$&\'%^&&\'^\'%\''

select * from data
where data1 LIKE '$!(%&\\'^%$&\\'%^&&\\'^\\'%\\''

select * from data
where data1 LIKE '$!(%&\'^%$&\'%^&&\'^\'%\'' ESCAPE '\' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:56:26.613

谢谢你们。
我得到了答案。

```
String originalString = "$!(%&'^%$&'%^&&'^'%'";
String convertedString = DatabaseUtils.sqlEscapeString(num); 
```

将此convertedString 作为参数传递给查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:07:11.730

从[SQLite 的文档](http://www.sqlite.org/lang_expr.html)：

> 可以通过将两个单引号放在一行中来对字符串中的单引号进行编码

所以把你的单引号加倍，像这样：

```
select * from data
where data1 LIKE "$!(%&''^%$&''%^&&''^''%''" 
```

但老实说，我不得不多读一点，看看我是否漏掉了任何其他特殊字符......

# javascript - 带有网格布局的 Jquery 仪表板

> ID：13717911
> 
> 赞同：7
> 
> 时间：2012-12-05T07:00:21.760
> 
> 标签：javascript, jquery, html, drag-and-drop

我正在寻找构建一个基于 Jquery 的仪表板。查看以下示例：

[http://jqueryui.com/sortable/#display-grid](http://jqueryui.com/sortable/#display-grid)

和

[http://jqueryui.com/sortable/#portlets](http://jqueryui.com/sortable/#portlets)

我发现如果我们有一个流畅的布局，这个功能很容易实现。然而。我想要一个比上面提到的示例稍微复杂的仪表板。

我要创建的仪表板将有一个网格，可以在其中放置项目。这些项目可以放在页面上的任何位置，并且项目之间将允许存在间距。这些项目可以根据网格调整大小，从而使项目移开。

我*不*想要像谷歌主页仪表板这样的布局，其中瓷砖向上移动并且不允许网格中的间距。

因此，例如，我将有一个 10 x 10 网格（每单位 50 像素）

一个瓷砖可以是 1 x 1 并调整为 1 x 2，然后可以有一个 1 x 1 的垫片，然后是另一个瓷砖。

我正在寻找一个好的算法来实现这一点。我的最终目标是最终得到一个类似于您在 android 主屏幕上看到的仪表板。

然而，我目前的主要缺点是用于交换和组织网格的智能碰撞检测。

一旦完成，我希望在 github 上分享我的仪表板。谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T02:44:58.163

它不是一个 jQuery 插件，但[Gridster](http://gridster.net/)做了你提到的所有事情，除了调整大小。

如果您发现更完整的内容，请告诉我们。

# mysql - 这两种 MySQL DB Schema 方法中的哪一种对检索和排序最有效？

> ID：13717918
> 
> 赞同：2
> 
> 时间：2012-12-05T07:00:36.520
> 
> 标签：mysql, database-design, relational-database, database-schema, schema-design

对于以下情况我应该采用两种数据库模式方法中的哪一种，我感到困惑。

我需要为一个网站存储多个属性，例如页面大小、字数、类别等，以及将来可能增加的属性数量。目的是向用户显示此表，他应该能够在数据中快速过滤/排序（因此表结构应该支持快速查询和排序）。我还想保留以前的数据日志以维护更改的时间表。所以我想到的两个表结构选项是：

***选项 A***

**网站属性**

id，website_id，page_size，word_count，category_id，title_id，......（最多18列，必须记住可能有一些空值，将来可能还需要添加更多列）

**website_attributes_change_log**

与上面相同的表结构，添加了“change_update_time”列

我觉得这种模式的优点是即使某些属性链接到其他表并且排序也很简单，查询也很容易编写。我猜想稍后添加列的缺点可能是 ALTER TABLE 需要很长时间才能在大型数据表上运行 + 可能有很多行有很多空列。

***选项 B***

**网站属性字段**

attribute_id、attribute_name（例如 page_size）、attribute_value_type（例如 int）

**网站属性**

id、website_id、attribute_id、attribute_value、last_update_time

这里的优势似乎是这种方法的灵活性，因为我可以随时添加列，还可以节省存储空间。但是，尽管我很想采用这种方法，但我觉得在需要显示表格时编写查询会特别复杂[因为我需要一次显示多个站点的记录，并且还会有交叉引用某些属性的其他表的值] + 对数据进行排序可能很困难[鉴于这不是基于列的方法]。

我要查看的示例输出是：

Site-A.com，232032 字节，232 字，PR 4，房地产 [链接到类别表]，..

Site-B.com, ..., ..., ... ,...

并且用户需要能够按所有基于数字的列进行排序，在这种情况下，方法 B 可能会很困难。

因此，我想知道我是否会通过选择 A 来做正确的事情，或者是否还有其他更好的选择，我什至可能一开始都没有考虑过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:40:03.490

我建议使用选项 A。

[您可以使用pt-online-schema-change](http://www.percona.com/doc/percona-toolkit/pt-online-schema-change.html)减轻长时间运行的 ALTER TABLE 的痛苦。

即将推出的 MySQL 5.6 支持[非阻塞 ALTER TABLE](https://blogs.oracle.com/mysqlinnodb/entry/online_alter_table_in_mysql)操作。

选项 B 称为[Entity-Attribute-Value](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)或 EAV。这打破了关系数据库设计的规则，因此针对这种格式的数据编写 SQL 查询肯定会很尴尬。你可能会[后悔使用它](http://www.simple-talk.com/opinion/opinion-pieces/bad-carma/)。

我曾[多次在 Stack Overflow 上发表文章，](https://stackoverflow.com/search?tab=votes&q=user:20860%20%5Bentity-attribute-value%5D)描述 EAV 的缺陷。
同样在我的博客中：[EAV FAIL](http://karwin.blogspot.co.uk/2009/05/eav-fail.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:24:47.963

您应该选择选项 2，因为它更灵活并且使用更少的内存。当您使用 option1 时，您必须将大量内容提取到 ram 中，这样会增加页面错误的机会。如果你想增加数据库的查询时间，那么你应该大胆地索引你的数据库以获得快速的结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T07:18:27.813

选项 A 是一个更好的方法，虽然在警报表添加额外列时时间可能会很大，但查询和排序选项会更快。我以前用过类似Option A的设计，当alert table同时有数百万条记录时，不会花费太长时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T07:58:11.433

我认为选项 A 不是一个好的设计。当您设计一个好的数据模型时，您不应该在将来更改表。如果您使用 SQL 语言，在选项 B 中使用查询将不难。这也是您真正问题的解决方案：“您需要存储某些网页的一些属性（打开数，而不是最终属性），因此，存在一个实体来表示这些属性”

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-05T08:19:54.660

使用选项 A，因为属性是固定的。从第二个模型查询和处理数据将很困难，因为将有基于多个属性的查询。

# gcov - GCov可以在windows中使用吗？

> ID：13717920
> 
> 赞同：6
> 
> 时间：2012-12-05T07:00:38.740
> 
> 标签：gcov

我可以在 Windows 中安装 gcov 工具吗？
或者我可以在windows的eclipse中使用这个工具的插件吗？
我对这个工具很陌生。我对这个工具没有任何想法。请帮助我获取此工具的信息。
请告诉我在我的机器上运行这个工具的要求。
我在哪里可以获得有关 gcov 的更多信息，还请提供一个链接，我可以从中**下载**此工具。

**gcov 工具是否只接受 c/c++ 文件，或者它也接受头文件（* .h）作为输入？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-26T13:49:42.077

> 我可以在 Windows 中安装 gcov 工具吗？

是的。我们使用 gcc 在 Windows 中构建 QNX 项目。

> 我在哪里可以获得有关 gcov 的更多信息，还请提供一个链接，我可以从中下载此工具。

gcov 是[gcc](https://gcc.gnu.org/install/binaries.html)的一部分，

> gcov 工具是否只接受 c/c++ 文件，或者它也接受头文件（* .h）作为输入？

gcov 接受 cpp，h 也接受

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T01:20:49.500

gcov is part of the [gcc tools](http://gcc.gnu.org/onlinedocs/gcc/). If you are building and linking with gcc on Windows (which is fairly unusual), you could use it. Since it is part of the compiler, you cannot add it as a plugin to your IDE, though there are probably plugins that allow you to interact with the data that it produces.

It sounds to me like you need to figure out what you are trying to do. gperftools or valgrind might be better suited to your needs.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-15T19:34:17.803

您可以使用eclipse CDT。它内置了[gcov 插件](https://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.linuxtools.gcov.docs%2FLinux_Tools_Project%2FGCov%2FUser_Guide%2FInstallation-and-Set-Up.html)。

# umbraco - Umbraco 的 uCommerce 中的包裹

> ID：13717926
> 
> 赞同：3
> 
> 时间：2012-12-05T07:00:56.610
> 
> 标签：umbraco, umbraco-ucommerce

我是一个初学者，我已经从[**这里**](http://our.umbraco.org/projects/website-utilities/ucommerce)**`Umbraco`**的链接安装了 Umbraco 设置和包文件。[](http://our.umbraco.org/projects/website-utilities/ucommerce)

 **当我开始时，我发现没有产品目录显示，如您在此[**链接**](http://blogs.thesitedoctor.co.uk/tim/2010/08/17/Getting+Started+With+UCommerce.aspx)中看到的那样。我应该怎么办？而不是这个，我有一个商店目录正在显示，所以我只想知道，

*   是否缺少某些东西
*   或者我必须手动创建产品目录
*   或商店是我的产品目录的替代品

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:12:17.180

看看[http://www.ucommerce.dk/en/support/ucommerce-tv.aspx](http://www.ucommerce.dk/en/support/ucommerce-tv.aspx)上的 uCommerce 电视视频- 他们通过安装 ucommerce，如何设置目录，然后在营销视频中介绍如何订单被存储并使用促销和折扣。那里应该有足够的东西让你继续前进。

这 4 个视频的总时长约为 30 分钟 - 非常值得花时间浏览。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-12T17:19:20.150

查看您在教程中提到的屏幕截图，我同意“商店是我的产品目录的替代品”。您所指的博客似乎有点旧（2010 年）。

参考：[http ://demo.ucommerce.net/](http://demo.ucommerce.net/)**

# javascript - 表单请求错误？

> ID：13717928
> 
> 赞同：1
> 
> 时间：2012-12-05T07:01:00.533
> 
> 标签：javascript, python, forms, request

```
<form action="/image" method ="POST" name="myform" style="background-color:#E0FFFF">
<input type="hidden" value="" id="hidSrc">
  <img src={{url}} width="25%" onclick="document.getElementById('hidSrc').value = this.src; document.myform.submit();">
</form> 
```

当我单击它并提交表单时，此代码应该将 SRC 存储在隐藏字段中。

这是我的 app.py 中的接收代码

```
@app.route('/image', methods=['GET', 'POST'])
def _image():
if request.method=="GET":
    taglist = db.getTaglist()
    tags = db.getTags(picurl)
    commentlist = db.getComments(picurl)
    return render_template("image.html", taglist = taglist, tags =tags, commentlist = commentlist, pic = picurl)
else:   
    button = request.form['button']

    if button=="submit":
        aComment = request.form['comment']
        db.addComment(picurl,aComment)
    elif button == "submitnewtag":
        if request.form['Addnewtag']:
            aTag = request.form['Addnewtag']
            db.addTag(picurl,aTag)
        else:
            aTag =  request.form['select1']
            db.addTag(picurl,aTag) 
```

# mysql - Apache 和 MySQL 是多线程应用程序吗？

> ID：13717934
> 
> 赞同：6
> 
> 时间：2012-12-05T07:01:14.897
> 
> 标签：mysql, multithreading, apache, operating-system

*我想知道Windows/Linux*上*Apache*和*MySQL*的默认安装是否是多线程的？

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T07:19:59.163

这取决于如何看待它。

*MySQL*允许您同时运行多个线程（这涉及到可用的*CPU/RAM*资源），但它不允许您使用多个线程运行单个查询。

*Apache*是多线程的，这是 Web 应用程序服务器响应来自不同客户端的多个请求的唯一方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T07:52:45.573

是的，*Apache*和*MySQL*是多线程的。

顺便说一句，它们在服务器上作为**单个进程运行。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T07:05:40.757

是的。服务器必须能够同时处理许多连接。一切都必须在异步线程上。*

# c++ - OS X 上的快速格式化

> ID：13717936
> 
> 赞同：1
> 
> 时间：2012-12-05T07:01:21.230
> 
> 标签：c++, fastformat

在阅读了一些关于 FastFormat 的信息后，我决定将它下载并安装在运行 OS X 10.8 的 Macbook Pro 上。我成功构建了 FastFormat，并运行了性能测试。然后我写了一个小测试来检查它是否有效：

```
#include <cstdlib>
#include <fastformat/fastformat.hpp>
#include <fastformat/sinks/ostream.hpp>

int main()
{
    return EXIT_SUCCESS;
} 
```

使用 g++-4.7 编译它（并确保所有包含路径都正确）后，我从 PlatformSTL 得到了编译时错误，如下面的错误。

```
error: #error Operating system not discriminated. Only UNIX and Windows are currently recognised by PlatformSTL
error: #error Operating system not discriminated 
```

我试图通过定义`unix`和`PLATFORMSTL_OS_IS_UNIX`手动来抑制这些错误，但随后我收到了这些链接器错误：

```
Undefined symbols for architecture x86_64:
  "_fastformat_exitProcess", referenced from:
      fastformat::fastformat_initialiser::fastformat_initialiser() in ccMqErni.o
  "_fastformat_getInitCodeString", referenced from:
      fastformat::fastformat_initialiser::record_init_failure_(int)    in ccMqErni.o
  "_fastformat_init", referenced from:
      fastformat::fastformat_initialiser::fastformat_initialiser() in ccMqErni.o
  "_fastformat_uninit", referenced from:
      fastformat::fastformat_initialiser::~fastformat_initialiser() in ccMqErni.o
ld: symbol(s) not found for architecture x86_64
collect2: error: ld returned 1 exit status 
```

OS X 是否支持 FastFormat，如果支持，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T06:48:26.153

Mac OS X 不提供`UNIX`（或`unix`, `__unix__`, ）试图检测的`__unix`宏。在像这样添加 line 语句（第 154 行）`PlatformSTL`后，我能够编译您的示例：`defined(__MACH__)``platformstl.h`

```
#if defined(unix) || \ 
    defined(UNIX) || \ 
    defined(__unix__) || \ 
    defined(__unix) || \ 
    defined(__MACH__) 
# define PLATFORMSTL_OS_IS_UNIX 
```

要抑制未定义符号错误，您可以定义宏`FASTFORMAT_NO_AUTO_INIT`：

`g++ -I<path to fastformat and stlsoft headers> -DFASTFORMAT_NO_AUTO_INIT main.cpp`

# iphone - 将 appdelegate 数据传递给 viewcontroller

> ID：13717943
> 
> 赞同：1
> 
> 时间：2012-12-05T07:01:38.333
> 
> 标签：iphone, ios, xcode, uiviewcontroller

我的`AppDelegate.m`. 我想要我的`deviceToken`价值`UIViewController`

```
- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
NSLog(@"My token is: %@", deviceToken);
ViewController *viewController = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
viewController.tokenStr = [NSString stringWithFormat:@"%@",deviceToken];
 } 
```

但是当我显示时`NSLog(@"%@",tokenStr);`，`UIViewController`我得到了`(NULL)`. 我怎样才能得到我的价值`UIViewController`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:10:24.617

在`AppDelegate`中，您可以将`deviceToken`值保存在`NSUserDefaults`like

```
[[NSUserDefaults standardUserDefaults] setObject:deviceToken forKey:@"DeviceToken"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

并使用从任何视图控制器中检索该值

```
[[NSUserDefaults standardUserDefaults] objectForKey:@"DeviceToken"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:41:20.327

您可以使用`[UIApplication sharedApplication].delegate`.
这取决于您的需求。类似于你真正应该保存在 NSUserDefaults 中的令牌，它是为保存用户的凭据和令牌而设计的。但是如果你想在任何 viewController 中使用 AppDelegate 的所有公共属性和方法，你可以使用它的委托。

```
AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
NSString *token = appDelegate.token; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-27T06:21:57.233

在 AppDelegate.m 类中：

```
- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
    NSLog(@"My token is: %@", deviceToken);

    NSString *device = [deviceToken description];
    device = [device stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]];
    device = [device stringByReplacingOccurrencesOfString:@" " withString:@""];

    NSLog(@"My device is: %@", device);

    [[NSUserDefaults standardUserDefaults] setObject:device forKey:@"MyAppDeviceToken"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

In ViewController class, inside viewDidLoad method:

```
 [super viewDidLoad];

    NSString *deviceToken = [[NSUserDefaults standardUserDefaults] objectForKey:@"MyAppDeviceToken"];
    NSLog(@"device token in controller: %@ ", deviceToken); 
```

This is working perfectly in my device. Happy Coding !! :)

# magento - magento谷歌分析不起作用

> ID：13717947
> 
> 赞同：1
> 
> 时间：2012-12-05T07:02:07.910
> 
> 标签：magento, google-analytics

我按照将谷歌分析插入我的magento网站的过程。

1.  登录我的 Google 分析帐户并获得了我的 : TrackingID : UA-.....
2.  在 Magento 中：配置 -> 销售 -> google API -> google 分析：启用 = 是，帐号 = UA-......

尽管如此，我在谷歌分析中看到：*未安装跟踪*，并且在 magento 页面上没有跟踪代码的标志。

在我的 ftp 中，我看到： /app/design/frontend/base/default/layout/googleanalytics.xml 包含：

```
<reference name="after_body_start">
    <block type="googleanalytics/ga" name="google_analytics" as="google_analytics" /> 
</reference> 
```

怎么了？

# facebook - 图表请求仅适用于我的 Facebook 帐户

> ID：13717954
> 
> 赞同：2
> 
> 时间：2012-12-05T07:02:31.500
> 
> 标签：facebook, facebook-graph-api

我有一个网页，要求用户登录，然后继续通过 Graph 获取特定 Facebook 组的 JSon。它通过获取登录后返回的 access_token 来动态构建 Uri。执行此操作时效果很好，但如果我尝试使用其他帐户登录，则不会返回提要的数据。

这个问题的一个提示是当 facebook 对话屏幕出现时，它只询问我的用户名/密码。它不会要求转到 Facebook 要求您授予“基本信息”等权限的通常屏幕。它只是一个用户名/密码屏幕，然后我直接进入。

这是登录代码：

```
 function login()
    {
        FB.login(function (response)
        {
            if (response.authResponse)
            {
                // connected
                var authResponse = response.authResponse;
                access_token = authResponse.accessToken;
                refresh();
            } else
            {
                // cancelled
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:08:24.283

> 这个问题的一个提示是当 facebook 对话屏幕出现时，它只询问我的用户名/密码。它不会要求转到 Facebook 要求您授予“基本信息”等权限的通常屏幕。它只是一个用户名/密码屏幕，然后我直接进入。

这是因为您已经授权了该应用程序，因此一旦您登录，它将直接带您进入该应用程序。

> 执行此操作时效果很好，但如果我尝试使用其他帐户登录，则不会返回提要的数据。

好吧，您发布的代码的有限视图很好，所以还有其他问题。第一个调试步骤是获取该不同帐户的访问令牌，并检查[调试器](https://developers.facebook.com/tools/debug)以查看其是否与适当的用户和范围相关联。

# jquery - 当外部类 css 显示很重要时隐藏内部 div

> ID：13717956
> 
> 赞同：1
> 
> 时间：2012-12-05T07:02:38.267
> 
> 标签：jquery, css

给定一个其 css 类包含的外部 div，当您使用 jQuery 使用外部 div 或将外部 div 内联样式设置为时`display:table !important`，它的内部 div 仍会显示`.hide()``display:none;`

这就是他们所说的“级联”样式表吗？;)

我真的很惊讶我以前没有遇到过这种情况。有人可以解释这种冲突的机制以及我应该怎么做，因为我不想`display:table !important`在 css 类中搞砸。

现在我正在用 Mozilla 来研究这个。

[http://jsfiddle.net/YrEEk/1/](http://jsfiddle.net/YrEEk/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:04:38.763

`!important`规则会覆盖其他样式规则（甚至是内联规则），这就是为什么您应该使用特异性来确定样式表中的优先级，而不是在`!important`.

现在覆盖该`!important`规则的唯一方法是使用另一个`!important`规则，该规则在级联中较低或更具体。

```
.hidden{
    display:none !important;
} 
```

现在您可以将此类应用于元素：

```
$('#d1').addClass('hidden'); 
```

这是一个演示：http: [//jsfiddle.net/YrEEk/4/](http://jsfiddle.net/YrEEk/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T07:06:19.157

那是因为当你使用 !important 时，在它后面设置任何没有 !important 的东西都不会起作用，因为它仍然被初始的 "display:table !important" 覆盖

```
$('#d1').hide(); 
```

这一行只是将一个css属性“display：none”添加到不起作用的元素，因为你仍然有“display：table！important”

如果需要，只需将 CSS 设置为“display:table”，不带 !important。

# sql-server-2008 - SQL Server 2008：清空整个数据库而不删除数据库的最有效方法

> ID：13717960
> 
> 赞同：1
> 
> 时间：2012-12-05T07:02:55.603
> 
> 标签：sql-server-2008

请提供一种有效的方法来清空整个数据库而不删除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:42:42.340

创建一个截断您需要清除的表的脚本。

截断表 [TableName]

您还必须考虑表之间的关系

# objective-c - Cocoa 兼容不同的 Mac OS

> ID：13717961
> 
> 赞同：1
> 
> 时间：2012-12-05T07:03:02.823
> 
> 标签：objective-c, macos, cocoa

我有一个 Cocoa 应用程序，它在 Mac OS 10.7 和 10.8 中具有不同的功能（部署目标是 10.7）。例如，在 10.8 中我有一个按钮，`Sharing Service`而在 10.7 中按钮是隐藏的。

这里的问题是我如何知道在我的应用程序运行时存在哪种 Mac OS。对于 iOS，我可以从`UIDevice`. 但是对于 Cocoa，我没有找到类似的类。

目前，我使用以下方法检测操作系统：

```
 - (BOO)isServiceAvalable
{
   if (NSClassFromString(@"A_Unique_Class_In_One_OS"))
    {
        return YES;
    }
    return NO;
} 
```

我希望有更优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:29:44.157

*   **StackOverflow：** [可可中的操作系统版本检查](https://stackoverflow.com/questions/2115373/os-version-checking-in-cocoa)
*   **StackOverflow：** [如何获取 Mac OS X 系统版本？](https://stackoverflow.com/questions/885911/how-to-get-the-mac-os-x-system-version)
*   **StackOverflow：** [如何以编程方式确定正在运行的 Mac OS X 版本？](https://stackoverflow.com/questions/157759/how-can-i-determine-the-running-mac-os-x-version-programmatically)
*   **Cocoa Dev Central：** [检查用户的 Mac OS X 版本](http://cocoadevcentral.com/articles/000067.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:00:55.717

如果 Gestalt 像 scorpiozj 提到的那样被弃用，那么这里有一个简单的 NSApplescript 方法来做到这一点......

```
NSString* getSystemVersion() {
    NSString* returnString = nil;
    NSString* cmd = @"return system version of (get system info)";
    NSAppleScript* theScript = [[NSAppleScript alloc] initWithSource:cmd];
    NSDictionary* errorDict = nil;
    NSAppleEventDescriptor* result = [theScript executeAndReturnError:&errorDict];
    [theScript release];
    if (errorDict) {
        returnString = [NSString stringWithFormat:@"Error:%@ %@", [errorDict valueForKey:@"NSAppleScriptErrorNumber"], [errorDict valueForKey:@"NSAppleScriptErrorMessage"]];
    } else {
        returnString = [result stringValue];
    }
    return returnString;
} 
```

# oracle - 列出客户 ID、姓名和他/她的所有帐户

> ID：13717965
> 
> 赞同：2
> 
> 时间：2012-12-05T07:03:12.510
> 
> 标签：oracle, plsql

```
customers:
+------------+--------------+ 
| cid        | Name         | 
+------------+--------------+ 
| 1          | Bob          |
| 2          | John         | 
| 3          | Jane         | 
+------------+--------------+ 
accounts:
+------------+--------------+ 
| aid        | type         | 
+------------+--------------+ 
| 1          | Checking     |
| 2          | Saving       | 
| 3          | CD           | 
+------------+--------------+ 
transactions:
+------------+--------------+--------------+ 
| tid        | cid          | aid          | 
+------------+--------------+--------------+ 
| 1          | 1            | 1            | 
| 2          | 2            | 1            | 
| 3          | 1            | 2            | 
| 4          | 2            | 3            | 
| 5          | 3            | 1            | 
+------------+--------------+--------------+ 
```

我正在尝试编写一个 plsql 程序，给定客户 ID 作为参数，将显示他/她的 ID、姓名和所有帐户。显示 id 和 name 很简单。我不确定的是如何获取链接到客户 ID 的所有帐户以及如何检索多个帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:18:26.983

一个想法可以是：

```
select c.cid, c.name, a.type
from customers c
left join transactions t on (t.cid = c.cid)
left join accounts a on (a.aid = t.aid)
where c.cid = :customer_id
group by c.cid, c.name, a.type; 
```

group by 是必需的，因为可以是更多事务。

此外，如果您想查看一行：

```
select cid, name, LISTAGG(type, ',') WITHIN GROUP (ORDER BY type) as account_types
from(
    select distinct c.cid, c.name, a.type
    from customers c
    left join transactions t on (t.cid = c.cid)
    left join accounts a on (a.aid = t.aid)
    where c.cid = :customer_id

)
group by cid, name; 
```

把它放到一个存储过程/函数中太简单了，所以我把它交给你。

# c# - 如何将文件上传到 wwwroot 文件夹之外

> ID：13717966
> 
> 赞同：0
> 
> 时间：2012-12-05T07:03:32.993
> 
> 标签：c#, asp.net-mvc-3

我有 mvc 3 应用程序来使用第三方插件上传文件。我有以下上传文件的路径

```
String path = Server.MapPath("~/App_Data/Uploads/") + categorypath; 
```

它适用于上述路径 ~/App_Data/Uploads/ 但我想将文件上传到路径 D 驱动器，如下所示

```
String path = Server.MapPath("D:/Uploads/") + categorypath; 
```

但它在该代码中引发以下异常：

```
'd:/Uploads/' is a physical path, but a virtual path was expected. 
```

怎么把文件上传到D盘。

# javascript - 如何拥有不同的分辨率/调整大小的友好网站？

> ID：13717967
> 
> 赞同：2
> 
> 时间：2012-12-05T07:03:33.997
> 
> 标签：javascript, html, css, resize

如果您只是在全高清显示器中打开[括号](http://brackets.io/)并开始使其宽度越来越小，它也会改变视图/布局。

使用 JavaScript 处理它很简单，但会添加大量代码。我们甚至可以使用 CSS Magic (Declarative) 来做到这一点吗？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:10:55.340

当网站根据屏幕大小进行调整时，这称为**响应式网页设计......**

**您可以通过CSS3 媒体查询**轻松制作这种响应式网站：

[**如何为常见类型的设备编写 CSS 媒体查询**](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

**[响应式网页设计：它是什么以及如何使用它](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/)**

如果你用谷歌搜索**响应式网页设计**，你会发现更多关于这个主题的信息。这真的是一种**很棒的方法**，可以让您的网站在从小到大屏幕的所有设备上看起来都很棒......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T07:13:15.760

您首先要向自己介绍响应式网页设计 (RWD)。 [http://www.alistapart.com/articles/responsive-web-design/](http://www.alistapart.com/articles/responsive-web-design/)

[您可以使用Twitter Bootstrap](http://twitter.github.com/bootstrap/)或[Foundation](http://foundation.zurb.com/)等前端框架。这些框架为您提供了使用 RWD 创建站点的广泛工具列表。

或者也可以使用[CSS 媒体查询](http://cssmediaqueries.com/)在 CSS 中进行屏幕分辨率检测并相应地设置样式。

# c# - 用户控件中的 VisualStateManager

> ID：13717968
> 
> 赞同：2
> 
> 时间：2012-12-05T07:03:35.833
> 
> 标签：c#, wpf, silverlight, windows-store-apps

我为**Windows RT**设计了一个应用程序。我用于在*用户控件*`VisualStateManager`中捕捉。但是当我的应用程序捕捉到用户控件时并没有改变。哪里有问题？

 *```
<Grid  Width="500" Height="40" Margin="15" x:Name="questionRoot" Background="DarkSeaGreen">

    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" >

        <TextBlock x:Name="OrginalWord" FontSize="32" Text="{Binding Question.OrginalWord}"></TextBlock>

    </StackPanel>
    <VisualStateManager.VisualStateGroups>

        <!-- Visual states reflect the application's view state -->
        <VisualStateGroup x:Name="ApplicationViewStates">
            <VisualState x:Name="FullScreenLandscape"/>
            <VisualState x:Name="Filled"/>

            <!-- The entire page respects the narrower 100-pixel margin convention for portrait -->
            <VisualState x:Name="FullScreenPortrait"/>
            <!--
                The back button and title have different styles when snapped, and the list representation is substituted
                for the grid displayed in all other view states
            -->
            <VisualState x:Name="Snapped">
                <Storyboard>

                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="OrginalWord" Storyboard.TargetProperty="FontSize">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="88"/>
                    </ObjectAnimationUsingKeyFrames>

                </Storyboard>
            </VisualState>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:33:25.587

`VisualStateManager.GoToState`您是否在代码隐藏中调用该方法？您需要检测应用程序何时从 Full/Fill 转换为 Snap 模式，然后调用此方法。

您可以在[此处](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.visualstatemanager.gotostate.aspx)找到此功能的 MSDN 文档。

`Page`当您的父控件或应用程序的大小发生变化时，您通常会认识到这种转换`Window`。[这个 SO question](https://stackoverflow.com/questions/10362566/how-to-programmatically-respond-to-snap-in-windows-8-metro)（查看 Jowen 的答案）为您提供了一个代码片段，说明如何通过侦听 Window 的 size changed 事件来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T22:33:01.980

我有一个类似的问题，我找到了一个对我有帮助的解决方案，如果用户控件托管在 layoutawarepage 中，可能有人会觉得它很有用

```
<my:usercontrole Loaded="StartLayoutUpdates" Unloaded="StopLayoutUpdates" /> 
```

否则您将不得不遵循（示例可以在布局感知页面中找到） •在 sizechanged 上制作事件处理程序

• 在事件处理程序中使用 ApplicationView.Value 检查视图状态

• 使用 VisualStateManager.GoToState 移至该状态*

# html - 使用哪些工具来自动执行此 Web 任务：

> ID：13717975
> 
> 赞同：1
> 
> 时间：2012-12-05T07:04:26.177
> 
> 标签：html, forms

我正在尝试在我的浏览器中自动执行以下任务：

我想从 html 页面中解析出文本，根据解析结果进行 google 搜索，然后根据 google 搜索的结果在 html 页面上填写表格。

如果我不能在一个平台上做到这一点，我怎样才能让不同的平台以尽可能少的人工交互来协同工作？

现在我将 html 代码复制并粘贴到一个文件中，让一个 python 程序解析内容并搜索网络，然后输出到控制台。然后我手动将这些内容复制并粘贴到表单中。任何有关向该过程添加自动化的方法的想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:08:50.140

您应该查看[Phantom.js](http://phantomjs.org/)，这看起来可能适用于您：[https ://github.com/ariya/phantomjs/wiki/Page-Automation](https://github.com/ariya/phantomjs/wiki/Page-Automation)

# jquery-ui - 单个 EmberView 做 resizable() 和 draggable()

> ID：13717976
> 
> 赞同：3
> 
> 时间：2012-12-05T07:04:29.203
> 
> 标签：jquery-ui, ember.js

根据[Ember.js draggable and droppable](https://stackoverflow.com/questions/11146470/ember-js-draggable-and-droppable-jqueryui-native-drag-and-drop-mixin) jqueryUI / native Drag and drop mixin 问题的回答。

我已经`JQUERY UI drag, drop, resize`在`EmberJS`. 但我的问题是我想要相同的视图来拖动和调整大小。我试图以不同的方式实现。您可以在此 jsfiddle [http://jsfiddle.net/codejack/TGwxf/1/](http://jsfiddle.net/codejack/TGwxf/1/)中查看该视图仅获取最后调用的 mixin 的 UI 行为。

有什么方法可以在拖放、调整相同视图的大小时获得超过 1 种行为？

**编辑**我发现原因是第二个 mixin 覆盖了`uievents,uiOptions,uiType`变量。但仍然不知道如何避免这种情况......我能看到的唯一方法是用自己的事件编写自己的小部件......有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:37:47.640

虽然@user1128571 给出了一个部分解决问题的解决方案，但这是我纠正问题的方法。我为 Interactions 添加了不同的 mixin，因为这样可以解决问题。

[https://github.com/thecodejack/jquery-ui-ember/blob/master/js/app.js#L104](https://github.com/thecodejack/jquery-ui-ember/blob/master/js/app.js#L104)

检查模块的[github 页面](http://thecodejack.github.com/jquery-ui-ember/)以了解它的工作原理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:06:00.330

您可能希望 JQ.Widget 看起来像这样，警告它不漂亮：

这里，JQ.UiBase 和 JQ.Widget 是一样的

```
JQ.UiBase = Ember.Mixin.create({

    uiWidgets:    {},
    uiAttributes: {},

    // ----------------------------------------------------------------------------
    // setup and teardown

    didInsertElement: function(){
        this._super();
        this._createUiWidgets();
    },

    willDestroyElement: function(){
        this._super();
        // implement tear down
    },

    // ----------------------------------------------------------------------------
    // @Private

    // @Function: for each $.ui specified in the view, create a $.ui widget
    //            add ui widgets to uiWidgets hash, ui widget setting to uiAttributes hash
    _createUiWidgets: function(){
        var widgetTypes    =   this._gatherWidgetTypes();
            uiWidgets      =   this.get('uiWidgets'),
            uiAttributes   =   this.get('uiAttributes'),  
            thisView       =   this;

        widgetTypes.forEach( function( widget ){

            var options           =   thisView.get( widget + 'Options' ) || {},
                handlers          =   thisView._registerEventHandlers( widget ),
                attributes        =   $.extend( options, handlers ),
                uiWidget          =   $.ui[widget]( attributes, thisView.$() );

            uiWidgets[widget]     =   uiWidget;
            uiAttributes[widget]  =   attributes;
        });
    },

    // @Function:  collects named $.ui events from Widget mixin
    //             for each event, if there is an associated callback, wrap it in a function and call the view's context
    // @Return:    a hash map $.ui event to callback function defined in view
    _registerEventHandlers: function( widget_name ){
        var widgetName     =   widget_name + 'Events',
            events         =   this.get( widgetName ) || [],
            thisView       =   this,
            eventHandlers  =   {};

        if ( events.length === 0 ) return;

        // note the iterator is not scoped to the view
        events.forEach( function( event ){
            var callBack = thisView.get( event );
            if ( callBack ){
                eventHandlers[ event ] = function ( event, ui ){ callBack.call( thisView, event, ui ); }; 
            };
        });
        return eventHandlers;
    },

    // TODO --> find alternate implementation that does not break if structure of ui mixins or namespace change
    _gatherWidgetTypes: function() {
        var nameSpace     =  'JQ',
            widgetTypes   =  [];

        Ember.Mixin.mixins(this).forEach( function( mixin ){
            // find widget with correct namespace
            if (  mixin.toString().substring(0,2) === nameSpace ){

                // console.log( 'gather: ', mixin, ' --> ', mixin.mixins[1] )
                // access widget mixin and check widget mixin have properties
                if ( mixin.mixins && mixin.mixins[1] && mixin.mixins[1].properties ){
                    if ( mixin.mixins[1].properties.widgetType ) widgetTypes.push( mixin.mixins[1].properties.widgetType)
                }
            }
        });

        return widgetTypes;
    },

}); 
```

然后你的可调整大小的 mixin 看起来像这样：

```
JQ.Resizable = Ember.Mixin.create( JQ.UiBase, {

    widgetType:        'resizable',
    resizableOptions:  { 'aspectRatio': 1/1 },
    resizableEvents:   [ 'resize' ],

    resize: function( event, ui ){
            // do stuff

    },

}); 
```

这里最重要的函数是`_gatherWidgetTypes`，它将所有 JQ 命名空间的 mixin 收集到 ember 对象中。在我看来，这有点像 hack，我最终没有使用 JQ.UiBase 在制作它之后，倾向于混合逻辑来创建小部件并将事件处理程序和选项指定到一个 mixin 中，最终看起来更干净，但这就是只有我。

# maven - Broadleaf commerce 在 build.properties 文件中添加 maven home

> ID：13717977
> 
> 赞同：0
> 
> 时间：2012-12-05T07:04:29.000
> 
> 标签：maven, path, m2eclipse, broadleaf-commerce

我正在尝试在 Eclipse 中运行*[Broadleaf Demosite 项目](https://github.com/BroadleafCommerce/DemoSite)*。我按照 阔叶网站的[入门指南中的说明设置了演示站点。](http://docs.broadleafcommerce.org/current/Getting-Started.html)maven 父项目`build.properties`内的文件中的默认代码显示了这一点，`Demosite`

```
#required
maven.home=/usr/share/maven

#optional
jrebel.path=/usr/lib/jrebel/jrebel.jar 
```

由于需要 maven.home 来启动服务器，所以现在我已经下载并解压了`maven 3.0.4`in `C:\Users\admin\Downloads\apache-maven-3.0.4\lib`.

我必须`maven.home`在属性文件的行中指定的路径是什么，

应该是这样的吗？

```
maven.home=C:\User\admin\apache-maven-3.0.4\lib 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-27T13:21:01.133

Maven 被运送到一个 .zip 档案中。所以解压maven你想去哪里。让我们说像这样的地方：

`C:\User\admin\apache-maven-3.0.4\`

然后设置到你的`build.properties`

`maven.home=C:/User/admin/apache-maven-3.0.4`

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:00:49.183

我只是改变了`maven.home`指向这样的路径，

```
maven.home==/Users/admin/Downloads/apache-maven-3.0.4 
```

[下载 maven](https://maven.apache.org/download.cgi)并将其解压缩到计算机中的任何位置。使用命令提示符设置该目录的路径，

```
C:\Users\admin>set PATH="c:\Users\admin\downloads\apache-maven-3.0.4\bin";%PATH% 
```

现在我可以在 Eclipse 中使用 BUILD SUCCESS 启动码头服务器。

**更新：**

由于上述解决方案仅适用于一次，您每次重新启动系统时都需要运行该命令。要让它始终工作，您必须`PATH`为 Maven 设置环境变量。看看[如何在 Windows 中安装 maven？](https://stackoverflow.com/questions/3402214/windows-7-maven-2-install)永久解决方案。安装后运行以下命令检查您是否正确安装了 maven 并检查其他变量是否设置正确。

**命令提示符**

```
C:\Users\admin>mvn -version
Apache Maven 3.0.4 (r1232337; 2012-01-17 14:14:56+0530)
Maven home: c:\Users\admin\Downloads\apache-maven-3.0.4\bin\..
Java version: 1.6.0_32, vendor: Sun Microsystems Inc.
Java home: C:\Program Files\Java\jdk1.6.0_32\jre
Default locale: en_US, platform encoding: Cp1252
OS name: "windows 7", version: "6.1", arch: "amd64", family: "windows"
C:\Users\admin> 
```

如果上述所有工作正常，那么在属性文件中，您必须指定 Maven 主目录，在我的情况下，

```
C:/Users/admin/Downloads/apache-maven-3.0.4 
```

有时单正斜杠 ( `/`) 在 Windows 中不起作用，因此用双正斜杠 ( `//`) 替换它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T06:33:34.390

build.properties 文件中的默认值：

```
#required
maven.home=/usr/share/maven 
```

您必须遵循以下格式：-

```
#required
maven.home=C://Program Files//apache-maven-3.0.5-bin//apache-maven-3.0.5 
```

# python - 与despotify网关接口

> ID：13717978
> 
> 赞同：0
> 
> 时间：2012-12-05T07:04:37.690
> 
> 标签：python, despotify

我在我的一个小项目中使用了 despotify，一个 CLI spotify 客户端。与 despotify 交互的一种方式是使用网关 (http://despotify.se/clients/)。我可以启动网关，它会在 localhost 的 8080 端口进行监听，但我不知道如何传递命令和参数。您不能执行“127.0.0.1:8080/login?username=user&password=pass”之类的操作，因为它会返回错误。有没有其他人与despotify合作过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:09:45.883

如果您从 CLI 启动 despotify，它应该会显示以下消息：

```
Usage: ./despotify <username> <password> 
```

[该视频](http://www.youtube.com/watch?v=9LUySm2Z8Yk)向您展示了基本介绍，这是最好的起点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T16:16:06.930

只需 netcat 或 telnet 到您的网关并使用以下命令：

```
nc localhost 8080
login user password
200 0 OK Login successful
search someartist 
```

# iphone - iPhone 5 应用程序兼容性，是否必须更改所有图像？

> ID：13717980
> 
> 赞同：0
> 
> 时间：2012-12-05T07:04:43.103
> 
> 标签：iphone, objective-c, cocoa-touch, ios6, iphone-5

我想让我的应用程序与 iPhone 5 兼容，我知道自动调整大小只需要确认，我是否需要添加为 iPhone 5 重新调整大小的所有图像，或者只能调整启动画面和背景图像的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:25:09.780

您只需要调整启动画面的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:05:13.610

您将需要调整启动图像的大小。您需要正常和视网膜分辨率的旧 iPhone 屏幕尺寸的启动图像以及 iPhone 5 屏幕尺寸的视网膜图像。

重新设计您的应用程序并拥有可以利用更大的 iPhone 5 屏幕尺寸的背景图像将是一个好主意，但将能够被裁剪并且仍然可以在较旧的 iPhone 屏幕上工作。

使用自动布局或正确设置调整大小和固定支柱，您的其他控件和图像应该能够按原样使用，以使您的应用程序在 iPhone 5 屏幕上看起来不错。

# html - 自动高度不显示标签的边框

> ID：13717982
> 
> 赞同：1
> 
> 时间：2012-12-05T07:04:48.483
> 
> 标签：html, css

以下是我的 CSS 代码：

```
.registerFormContainer{width: 45%;border: 1px solid #2C5887; border-radius: 5px; text-align: center; margin: 0 auto; height: auto;}
    .registerFormContainer h3{padding: 10px; background: #2C5887; border-top-radius: 5px; width: auto;}
    .registerFormContainer h3 label{color: #fff; font-size: 18px; font-weight: bold;} 
```

在这里，如果我使用 height:auto; 然后它不显示`.registerFormContainer`and的边框`.registerFormContainer h3`。如果我使用手动高度，`300px`那么它会显示边框。但是，如果我使用手动高度，则`div`验证错误后不会扩展。应该是什么问题？我正在学习 CSS，但对此没有太多了解。

以下是我的 html

```
<div class="registerFormContainer">      
    <h3><label style="background-image:url( '/images/lock.png'); width: auto; background-repeat:no-repeat; background-position:left center;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create an Account</label></h3>
    <div class="row_2"> 
        <center><?php echo $this->msg; ?></center>                                                                      
        <label  class="label2">&nbsp;</label>
        <?php if ($this->displayimage) { ?>           
            <img src="<?php echo $this->displayimage; ?>"></img>
        <?php } ?>
    </div>
    <div class="row_2"> 
        <label  class="label2">&nbsp;</label>
        <b>Welcome,  <?php if (isset($this->displayname)) echo $this->displayname; ?></b>                                                                                                
    </div>                                                
    <div class="row_2"> 
        <label  class="label_2" for="username">Email:</label>
        <?php if (isset($this->fbid)) { ?>
            <input class="required" id="username" name="username" type="hidden" value="<?php echo $this->email; ?>"/>
            <?php echo $this->email; ?>
        <?php } else { ?>
            <input class="required" id="username" name="username" type="text"/>        
        <?php } ?>
    </div>
    <div class="row_2">
        <label for="password" class="label_2">Password:</label>
        <input class="required" id="rpassword" name="password" type="password"/>
    </div>
    <div class="row_2" >
        <label for="cpassword" class="label_2">Confirm Password:</label>
        <input class="required" id="cpassword" name="cpassword" type="password"/>
    </div>
    <div class="row_2">                        
        <label class="label_2">&nbsp;</label>
        <input type="submit" class="submit" value="Submit" name="submit" id="submit">
    </div>                                                         
</div> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:13:02.493

请尝试`overflow-y:auto`上课`registerFormContainer`，希望对您有用。

谢谢

# button - 如何在 BlogSpot 帖子中添加文本框和按钮？

> ID：13717983
> 
> 赞同：2
> 
> 时间：2012-12-05T07:04:48.437
> 
> 标签：button, uibutton, user-input, blogspot

目前，我只能将静态帖子添加到我的博客。我不能将它用于动态目的，就像我可以做它的网站一样。我想根据用户输入添加文本框和按钮，我想在我的博客上显示动态内容。

所以这可能吗？我在网上搜索但只能发现Blogspot不允许添加文本框和按钮。请发布一些示例代码。

谢谢，阿希什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:07:29.267

Blogspot 帖子不允许通过帖子的 HTML 编辑器直接在其帖子中插入“输入”标签。为此，您可以按照以下步骤操作

1.  从您博客的管理门户转到 Templete
2.  单击编辑 html 并添加 JQuery.js（最好托管在 google /JQueryUI.js 上）。
3.  在您的帖子中添加一个 div，您将在其中添加您的输入内容。
4.  现在再次在您的模板 html 编辑器中，编写 JQuery 来处理事件并添加控件

对于演示代码，您可以查看这篇文章 [在 blogspot 的帖子中插入输入元素](http://akashsoni7.blogspot.in/2012/12/blogspot-hacking-how-to-insert-input.html)

# iphone - 可以从下载到安装跟踪 IOS 应用程序吗？

> ID：13717985
> 
> 赞同：2
> 
> 时间：2012-12-05T07:05:02.650
> 
> 标签：iphone, ios

许多网站都有指向应用程序的链接，这些链接会将您带到 Apple App Store 上的应用程序页面。我是一名网络程序员，我了解如何跟踪最常使用的网站以及获得最多点击次数的网站。但是我想知道是否有办法跟踪应用程序是否已安装？我猜这只有在您可以将用户定义的变量传递给应用商店时才有可能，并为我们点击链接的特定网站提供某种标识符。任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:22:29.810

如果您想知道有多少用户下载了您的应用程序，您可以集成第三方库 Flurry。有关更多信息，请通过此链接 [flurry](http://www.flurry.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:10:17.330

App Store 本身并不提供访问此信息的方式。

可能还有一些其他选项，例如设置已安装的应用程序以在首次运行时向服务器发送消息，但对于用户点击“安装”按钮的直接回调，没有。

# python - 如何将 Maya 大纲添加到 tabLayout

> ID：13717987
> 
> 赞同：0
> 
> 时间：2012-12-05T07:05:15.677
> 
> 标签：python, maya, autodesk, mel

我想在现有的 tabLayout 中添加 Maya 大纲

我遇到了一个页面，该页面显示了如何在 MEL 中执行此操作（[第二种方法](http://mayastation.typepad.com/maya-station/2010/08/dockcontrol-part-2-adv-usage-1.html)）

我将如何在 python 中做到这一点？

```
myOut= cmds.outlinerPanel()
cmds.control(edit=True,parent="outlinerLayout"  myOut) 
```

上面给出了语法错误，我想我在将 mel 代码转换为 python 代码时做错了（我想在 python 中，因为整个现有的 GUI 应用程序都是在 python 中完成的）并且我想实现将大纲选项卡标记到我的项目中的想法用户的经理消除了单独启动 Outliner 的麻烦..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:01:27.807

可以说这是一个昏迷错误：

```
myOut= cmds.outlinerPanel()
cmds.control(myOut, edit=True, parent="outlinerLayout") 
```

查看文档：

[cmds.control](http://download.autodesk.com/global/docs/maya2013/en_us/CommandsPython/index.html)

[cmds.outlinerPanel](http://download.autodesk.com/global/docs/maya2013/en_us/CommandsPython/outlinerPanel.html)

Anyewy 我强烈建议您使用[PyMel](http://autodesk.com/us/maya/2011help/PyMel/index.html)而不是 maya python，这是在 Maya 中编写代码的更好的 Python 方式。而且[PYQT4](http://zetcode.com/tutorials/pyqt4/)将使 UI 构建更容易。

# iphone - 使用 libz.dylib 解压

> ID：13717988
> 
> 赞同：1
> 
> 时间：2012-12-05T07:05:18.533
> 
> 标签：iphone, ios, cocoa-touch, unzip, ios-frameworks

我已经读过可以使用 libz.dylib 库来完成解压缩。但我不知道该怎么做。我现在正在使用 ZipArchive 来提取文件。但我仍然只想使用苹果提供的默认框架。我们可以使用 libz.dylib 进行解压缩操作吗？还是有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:22:20.333

请参阅下面的代码

1) 从[ZipArchive API 的链接下载 ZipArchive](http://code.google.com/p/ziparchive/downloads/list.)

2) 拖入项目。

3）添加到项目现有框架libz.1.2.3.dylib（最新版本）。

`#import "ZipArchive.h"`在 ViewController 中导入标头

```
 ZipArchive *za = [[ZipArchive alloc] init];
    if ([za UnzipOpenFile: filePathToUnzip]) {
               BOOL ret = [za UnzipFileTo:filePathtoBePlacedAfterUnzip overWrite: YES];
    if(ret)
 //unzipSuceesfully.

 else
 //Failed to Unzip.

             [za UnzipCloseFile];
   }
[za release]; 
```

# css - Twitter Bootstrap 模态窗口不出现

> ID：13717989
> 
> 赞同：0
> 
> 时间：2012-12-05T07:05:20.090
> 
> 标签：css, twitter-bootstrap, modal-dialog, modal-window

我正在尝试在我的 html 中实现模态窗口。单击注册时，将出现模式窗口。但是当我为登录实现第二个模式窗口时，只有背景发生了变化，但窗口没有出现

[http://play.mink7.com/minkstock/](http://play.mink7.com/minkstock/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:19:15.433

您的登录模式 div 元素位于注册模式 div 元素中。我想你忘了结束`</div>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:09:25.577

您需要为登录模式添加第二个模式，与为注册模式添加的相同

```
<div id="login-modal" class="modal hide fade landing-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
<div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3>Login</h3>
</div>
<div class="modal-body">
    <!-- your login code -->

   </div>

</div> 
```

# c# - 用一个空格和一个可选特殊字符验证数字的正则表达式

> ID：13717990
> 
> 赞同：3
> 
> 时间：2012-12-05T07:05:39.257
> 
> 标签：c#, .net, regex

有人能告诉我如何用一个空格验证数字序列，最后会有一个可选的特殊字符，比如“#”，然后是一些 5 位数字。

例子：

> 12345 6587#2584

我试过了

```
(0(?:\d{0,11}|(?=\d* \d*$)[\d ]{0,12})) 
```

但我不知道如何在末尾添加可选的“#”，后跟数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:33:11.500

这应该可以解决问题

```
/^\d+\s\d+(?:#\d+)?$/ 
```

在[rubular上看到](http://rubular.com/r/ISAiziLXhj)

```
^      beginning of string
\d+    one or more numbers
\s     any whitespace character
\d+    one or more numbers
(?:    begin non-capturing group
  #    literal '#' character
  \d+  one or more numbers
)      end non-capturing group
$      end of string 
```

* * *

## 编辑

```
/^0[\d\s]{,11}(?:#\d{,5}?$/ 
```

匹配以 开头的字符串`0`，后跟最多 11 个数字或空格。后面是一个可选`#`的，后面最多有 5 个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:14:56.550

这个问题不是很清楚，但 macek 的建议确实回答了您关于如何在末尾添加可选标签 '#' 后跟一些数字的问题，因此您应该尝试一下。（具体来说，`(?:#\d+)?$`是正则表达式的相关部分；`(?:#\d{0,5})?$`将确保存在 0 到 5 位数字。）

但是，用于确保在可选的“#”之前恰好有 1 个空格和最多 12 位数字的正则表达式是不正确的。所写的前瞻是没有意义的，因为`\d{0,11}`它将匹配任何字符串开头的 0 宽度字符串（因为这相当于 0 位数字）。你需要的是类似`/^(?:[\d\s]{1,13}$)\d*\s\d*$/`. 这将检查以确保存在正确数量的字符并且它们都是数字或空格，然后它将检查字符串中是否只有一个空格。这里有一些冗余，但这应该不是问题。另外，请注意，为了清楚起见，我使用`\s`的是空格字符而不是空格字符，但请注意，这将匹配制表符和其他空格，这可能不是您想要的。的位数`{1,13}`假设字符串由一个完全没有数字的空格组成是合法的，但空字符串是非法的；如果这不是正确的假设，请调整括号中的值。

最后，要将上述正则表达式与可选标签的正则表达式结合起来以确保正确的空格和数字计数，您需要更改前瞻，以便它可以匹配`#`：`$`它应该是`/^(?:[\d\s]{1,13}(#|$))\d*\s\d*(#\d{0,5})?$/`.

（请注意，我还没有实际测试过上面的正则表达式，所以我不能 100% 确定`(#|$)`中间的 是否适用于所有实现。如果没有，可以用多余的. 替换它`(#\d{0,5})?`。）

# java - 如何使列表高度具有相同的大小？

> ID：13717993
> 
> 赞同：0
> 
> 时间：2012-12-05T07:05:59.733
> 
> 标签：java, android

list_match.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="85dp"
android:background="@drawable/list_selector"
android:orientation="horizontal">

<LinearLayout
    android:id="@+id/thumbnail"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_marginRight="5dip"
    android:background="@drawable/image_bg"
    android:padding="3dip" >

    <ImageView
        android:id="@+id/self_photo"
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:contentDescription="@string/desc" />
</LinearLayout>

<TextView
    android:id="@+id/self_team"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/thumbnail"
    android:layout_alignParentBottom="true"
    android:layout_alignRight="@+id/thumbnail"
    android:layout_below="@+id/thumbnail"
    android:gravity="center"
    android:textSize="12sp"/>

<TextView
    android:id="@+id/opponent"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_alignRight="@+id/match_score"
    android:layout_below="@+id/textView1"
    android:textSize="16sp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/venue"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/self_team"
    android:layout_alignLeft="@+id/date_time" />

<TextView
    android:id="@+id/player_status"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@id/team_name"
    android:layout_marginRight="5dip"
    android:gravity="right"
    android:textColor="#10bcc9"
    android:textSize="15sp"
    android:textStyle="bold"/>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/thumbnail"
    android:text="@string/opponent"
    android:textColor="@color/soft_grey"
    android:textSize="14sp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/match_score"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/player_status"
    android:layout_centerVertical="true"
    android:textSize="18sp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/date_time"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/venue"
    android:layout_alignLeft="@+id/opponent" />

<TextView
    android:id="@+id/absent"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/venue"
    android:layout_alignBottom="@+id/venue"
    android:layout_alignRight="@+id/match_score" />

<TextView
    android:id="@+id/time_remain"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/opponent"
    android:layout_alignBottom="@+id/opponent"
    android:layout_alignRight="@+id/opponent"
    android:textStyle="bold" />

</RelativeLayout> 
```

![在此处输入图像描述](../Images/03b3c5f9a5dbad0a29462be42d7dc74d.png)

有没有办法像上图一样改变高度相同的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:22:44.167

您可以使用以下参数设置 ID 为 self_team 的 TextView：

```
<TextView
android:id="@+id/self_team"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignLeft="@+id/thumbnail"
android:layout_alignParentBottom="true"
android:layout_alignRight="@+id/thumbnail"
android:layout_below="@+id/thumbnail"
android:maxLines="1"
android:ellipsize="end"
android:gravity="center"
android:textSize="12sp"/> 
```

所以它只有一行。希望有帮助。

# php - 在 mediatemple 主机上通过 php 脚本创建子域

> ID：13717995
> 
> 赞同：1
> 
> 时间：2012-12-05T07:06:14.617
> 
> 标签：php, mediatemple

我是 MediaTemple 托管的新手。我只需要创建将打开主站点的子域，因此无需为子域创建任何文件或文件夹。因此域和子域将显示来自同一来源的相同内容。

我搜索了很多，但找不到任何有用的信息。我已经通过下面的函数在 HostGator 主机上通过 php 脚本成功创建了子域。但现在我想通过 MediaTemple 主机上的 php 脚本创建子域。

```
public function create_subdomain($subDomain,$cPanelUser,$cPanelPass,$rootDomain,$subDomainDir) 
    {
        $buildRequest = "/frontend/x3/subdomain/doadddomain.html?rootdomain=" . $rootDomain . "&domain=" . $subDomain . "&dir=" . $subDomainDir;

        $openSocket = fsockopen('localhost',2082);
        if(!$openSocket) {
            return "Socket error";
            exit();
        }

        $authString = $cPanelUser . ":" . $cPanelPass;
        $authPass = base64_encode($authString);
        $buildHeaders  = "GET " . $buildRequest ."\r\n";
        $buildHeaders .= "HTTP/1.0\r\n";
        $buildHeaders .= "Host:localhost\r\n";
        $buildHeaders .= "Authorization: Basic " . $authPass . "\r\n";
        $buildHeaders .= "\r\n";

        fputs($openSocket, $buildHeaders);
        while(!feof($openSocket)) {
        fgets($openSocket,128);
        }
        fclose($openSocket);

        $newDomain = "http://" . $subDomain . "." . $rootDomain . "/";

        return "Created subdomain $newDomain";

    } 
```