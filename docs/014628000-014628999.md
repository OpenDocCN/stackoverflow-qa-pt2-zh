# StackOverflow 问答 14628000-14628999

# java - 在java中获取html文件的一部分

> ID：14628000
> 
> 赞同：1
> 
> 时间：2013-01-31T14:21:47.333
> 
> 标签：java, html, regex, parsing

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

我有一个如下所示的 HTML 文件：

```
<html>
  <head>
    <title>foobar</title>
  </head>
  <body>
    bla bla<br />
    {[CONTAINER]}
      Hello
    {[/CONTAINER]}
  </body>
</html> 
```

如何从 html 文件的其余部分中获取容器中的“Hello”？几年前我在 PHP 中做过这个，我记得一个 REGEX 函数，它调用一个定义类函数并将容器的内容作为参数。

有人可以告诉我如何在 Java 中做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:39:12.877

您可以使用匹配`{[CONTAINER]}`和之间所有内容的正则表达式`{[/CONTAINER]}`。例子：

```
// Non capturing open tag. Non-capturing mean it won't be included in result when we match it against some text.
String open = "(?<=\\{\\[CONTAINER\\]\\})"; 

// Content between open and close tag.
String inside = ".*?"; 

// Non capturing close tag.
String close = "(?=\\{\\[/CONTAINER\\]\\})";

// Final regex
String regex = open + inside + close;

String text = "<html>..."; // you string here

// Usage
Matcher matcher = Pattern.compile(regex, Pattern.DOTALL).matcher(text);
while (matcher.find()) {
    String content = matcher.group().trim();
    System.out.println(content);
} 
```

但是你必须小心。因为它只适用于`{[CONTAINER]}`和`{[/CONTAINTER]}`。不支持此自定义标签的属性。

您还必须知道它不会以任何特定方式处理 html 标签。因此，如果您的标签之间有 html`CONTENT`标签 - 它们将被包含在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:24:40.647

您可以使用 jsoup 解析 HTML，[这里有更多帮助](http://jsoup.org/cookbook/input/parse-document-from-string)

更详细[的在这里](http://jsoup.org/cookbook/extracting-data/attributes-text-html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:34:33.840

为什么要使用 Java？您可以简单地将 DOM API 与 JavaScript 一起使用：

```
document.getElementById("id_container").firstChild.data; // beware of \n char 
```

或以较低效率的方式：

```
document.getElementById("id_container").innerHTML; 
```

但是，如果您的文件是在服务器上构建的，您也可以使用相同的 API：

[http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/package-summary.html](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/package-summary.html)

# model-view-controller - MVC 设计模式中的用户权限

> ID：14628003
> 
> 赞同：0
> 
> 时间：2013-01-31T14:21:55.130
> 
> 标签：model-view-controller, design-patterns, permissions

大型系统被许多用户使用，因此他们可以登录系统然后获得额外的权限。权限不同，例如查看其他用户详细信息的权限或执行不同操作的权限。软件开发的良好实践是使用设计模式。其中之一是 MVC（模型-视图-控制器）。所以，我的问题是：应该在模型的哪一层检查权限？该应用程序逻辑是否应该验证用户权限，或者在视图层中某些选项应该被隐藏/锁定/等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:28:40.253

身份验证和授权不是 MVC 设计模式本身的一部分。它也不是任何基本 MVC 构建块的直接责任。

您可以探索的一个解决方案是将访问控制放在装饰器中。

您创建一个`Container`实例，您可以在其中注入一个对象（它可能是某个控制器、视图或模型层的服务）和一些授权管理器。然后你在这个容器上调用一个方法，就好像它是原始对象一样。如果访问管理器清除了呼叫，则执行该方法。否则，您会引发异常。

> [不幸的是，代码示例是用 PHP 编写的，因为那是我的“本机”语言]

```
$something = new SomeThing;
$data = $something->getSensitiveData(); // will simply return all the information

$accessCheck = new AccessManager( .. some dependencies .. );
$something = new Container( $something, $accessCheck );
try 
{
    $data = $something->getSesitiveData(); 
    // will return all information if you pass the authorization.
} 
catch ( AccessDeniedException $e )
{
    // do something
} 
```

这种方法有几个好处：

1.  访问管理是集中的
2.  您可以在此类容器中注入任何实例
3.  不会导致 OCP 违规
4.  让你在开发时延迟添加授权

这种装饰器中的“包装”通常发生在创建您的实例的工厂内。

至于你应该包装 MVC 三元组的哪一部分。嗯......通常包装控制器就足够了（尤其是在 Web 上下文中使用 MVC 时）。但是，根据您构建其余代码库的方式，为服务（模型层中的类/实例组）添加这种授权检查可能是合理的。

问题是，这种方法对粒度没有限制。您可以在任何对象上添加这种类型的访问控制。即使您无法访问该对象的源代码。

# c++ - 如何获取 IWebBrowser2 的更新矩形？

> ID：14628005
> 
> 赞同：1
> 
> 时间：2013-01-31T14:22:01.247
> 
> 标签：c++, winapi

我正在使用 IWebBrowser2 控件将 html 转换为 win32 程序中的位图，我已经成功地做到了。我一直在绘制整个页面，这不是有效的方法。

所以知道更新区域会很好，这样每次只能画更新矩形。但我还没有找到任何方法来做到这一点。

我之前做过渲染flash，我可以从IOleInPlaceSiteWindowless::InvalidateRect(LPCRECT pRect, BOOL) 得到脏矩形，而IWebBrowser 确实有一个窗口并且没有这个接口。

怎么做才能得到肮脏的直肠？先感谢您！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:31:53.300

我认为[GetUpdateRgn](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144944%28v=vs.85%29.aspx)是您正在寻找的功能。它返回当前无效的区域。

# oracle - 我如何在 oracle 过程中运行多个选择语句

> ID：14628012
> 
> 赞同：1
> 
> 时间：2013-01-31T14:22:42.477
> 
> 标签：oracle, plsql

我写了以下程序

```
create or replace procedure sp_abc_profile 
(
  f_symbol_in abc.colname%TYPE
)
is profile abc%rowtype;
is profile2 abc2%rowtype;
begin
  SELECT fname, lname,mname,age
    INTO profile
  FROM abc
  WHERE f_symbol = f_symbol_in;

  SELECT initiaiinvestment AS minInitialInvestment, pr as qt, class1 as clss
    into profile2
  FROM 
      abc2 
  WHERE f_symbol = f_symbol_in;
end; 
```

执行上述操作后，我收到如下错误消息：

> 错误 (7,3): PL/SQL: SQL 语句被忽略
> 
> 错误 (21,5): PL/SQL:ORA-00913: 值太多

我不想选择两个表中的所有行。

如何在一个过程中编写多个 select 语句，以便过程中的每个 select 语句都返回一个结果集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:26:45.730

尝试以下操作：

```
is
profile abc.fname%type;
profile2 abc2.initiaiinvestment%type; 
```

在过程中有多个 select 语句没有问题。它与所选列和 PL/SQL 类型不匹配有关。

除此之外，您的代码中似乎有太多内容`is`。

有关使用的更多信息`select into`，请查看此链接：[Oracle PL/SQL "select into" 子句](http://dba-oracle.com/t_pl_sql_plsql_select_into_clause.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T05:22:34.740

试试这个，我们可以在过程中有多个 select 语句：

您的代码中存在太多价值的问题。

```
create or replace procedure sp_abc_profile 
(
  f_symbol_in abc.colname%TYPE
)
is profile abc.fname%type;
is profile2 abc2.initiaiinvestment%type;
begin
  SELECT fname
    INTO profile
  FROM abc
  WHERE f_symbol = f_symbol_in;

  SELECT initiaiinvestment into profile2
  FROM 
      abc2 
  WHERE f_symbol = f_symbol_in;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:39:15.407

正如其他人指出的那样，您有太多的“是”陈述。

在对行变量执行选择时，您需要选择所有内容：

```
select *
into profile
from abc
where f_symbol = f_symbol_in;

select *
into profile2
from abc2
where f_symbol = f_symbol_in; 
```

当您在 f_symbol_in 上有多个匹配项时，您还会面临引发异常的风险。您的代码可以捕获此异常，或者您可以限制行数（即 rownum<=1），或者查看集合以加载与参数匹配的所有行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-14T07:46:16.640

解决方案是在 oracle 中使用 CURSORS，以便过程中的每个 select 语句都返回一个结果集。

然后可以使用您首选的脚本语言遍历该结果集以获得所需的输出。

```
create or replace 
procedure sp_abc_profile
(
  symbol_in in tablename.fieldname%type,
  cursor1 out SYS_REFCURSOR,
  cursor2 out SYS_REFCURSOR,
)
as
begin

    open cursor1 for
         {your select statement here}

    open cursor2 for
        {your second select statement here}

end sp_abc_profile; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-14T10:12:05.707

1.  删除多余的“IS”
2.  添加：ROWNUM = 1

> ```
> create or replace procedure sp_abc_profile 
> (
>   f_symbol_in abc.colname%TYPE
> )
> is profile abc%rowtype;
> /*is*/ profile2 abc2%rowtype;
> begin
>   SELECT fname, lname,mname,age
>     INTO profile
>   FROM abc
>   WHERE f_symbol = f_symbol_in
>   AND ROWNUM = 1;
> 
>   SELECT initiaiinvestment AS minInitialInvestment, pr as qt, class1 as clss
>     into profile2
>   FROM 
>       abc2 
>   WHERE f_symbol = f_symbol_in
>   AND ROWNUM = 1;
> end; 
> ```

# c# - 使用 Simple Injector 注册开放的通用单例

> ID：14628013
> 
> 赞同：2
> 
> 时间：2013-01-31T14:22:49.737
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, simple-injector

我有以下代码，并想为泛型的每个不同变体注册一个单例。这可能吗？目前，断言失败，因为它们不是相同的对象类型。

```
public interface IGenericClass<T>
{
    string GetToString();
}

public class GenericClass<T> : IGenericClass<T>
{
    public string GetToString()
    {
        return typeof (T).FullName;
    }
}

[Test]
public void test()
{
    var container = new Container();

    container.RegisterOpenGeneric(
        typeof(IGenericClass<>), 
        typeof(GenericClass<>));

    var instance1 = container.GetInstance<IGenericClass<double>>();
    var instance2 = container.GetInstance<IGenericClass<double>>();

    //this should assert true
    Assert.IsTrue(object.ReferenceEquals(instance1, instance2));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:56:28.950

只需使用`RegisterSingleOpenGeneric`：

```
_container.RegisterSingleOpenGeneric(
    typeof(IGenericClass<>), 
    typeof(GenericClass<>)); 
```

# c# - 在字符串中查找值

> ID：14628014
> 
> 赞同：1
> 
> 时间：2013-01-31T14:22:53.507
> 
> 标签：c#, .net, .net-3.5

我有一个带有字符串行的文件。每行代表一个键值的集合，例如：

```
Name=JUI;Type=HomeUser;Address=Belgium;Address=Liege;Address=Street
Name=Tim;Type=HomeUser;Address=Belgium;Address=Hasselt;Address=Street
Name=Kim;Type=Proff;Address=Germany;Address=Dusseldorf;Address=Street
Name=Ils;Type=Proff;Address=Germany;Address=Munich;Address=Street
Name=Jan;Type=Student;Address=Germany;Address=Frankfurt;Address=Street
Name=Dav;Type=Student;Address=France;Address=Mitz;Address=Street
Name=Soli;Type=HomeUser;Address=France;Address=Lyon;Address=Street
Name=Mik;Type=HomeUser;Address=Switzerland;Address=Zurich;Address=Street
Name=Peter;Type=Blocked;Address=Netherland;Address=Enschede;Address=Street 
Name=Maz;Type=Blocked;Address=Germany;Address=Achen;Address=Street
Name=Jo;Type=Teacher;Address=Belgium;Address=Antwerpen;Address=Street 
```

我该如何执行以下操作：

1.  获取类型为 HomeUser 的名称
2.  获取 Address =Germany 的类型（问题在每行中有 3 个地址键）
3.  获取地址=Lyon的名称

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:27:44.970

在*所有*这些情况下，当您获得更好的数据表示时，答案非常简单——您可以只使用 LINQ。

但是，第一步将是解析数据。将其建模*如下*：

```
public class User // ???
{
    public string Name { get; private set; }
    public string Type { get; private set; } // Should this be an enum?
    public IList<string> Addresses { get; private set; }

    // Could make this a constructor if you really want... I like the
    // explicit nature of the static factory method.
    public static User ParseLine(string line)
    {
        // TODO: Split line into components etc
    }
} 
```

一个你有一个`List<User>`你的查询将非常容易 - 但将“将数据放入更自然的表示”与“对数据进行有趣的操作”分开是很重要的。

这是一个比这个特定示例更笼统的观点，但始终尽可能早地将您的数据转换为自然、有用的表示，然后尽可能长时间地将其保留在该表示中。如果可能，只处理代码边界处的尴尬表示（通常是字符串）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T14:28:33.527

创建一个正则表达式来解析项目：`"Name=(.+?);Type=(.+?);Address=(.+?) etc."` 然后你可以创建一个类来保存所有信息

```
class Record { public string Name; public string Type; public string Address; public string Address2; public string Address3} 
```

然后将每一行与正则表达式匹配，从匹配组中填充字段并创建一个类的实例并将这些添加到`List<Record> records`.

现在您可以使用 linq 轻松搜索：

1.  类型是 HomeUser：records.Where(p=>p.Type=="HomeUser")
2.  地址是德国：records.Where(p=>p.Address=="Germany")
3.  地址是里昂：records.Where(p=>p.Address=="Lyon")

您可以轻松扩展此示例以查看所有 3 个地址字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:26:45.970

我认为您可以使用正则表达式将您的标记与反向引用相匹配。

看看这个[教程](http://www.regular-expressions.info/brackets.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T14:52:01.043

首先定义一个结构会更容易

```
struct MyStruct
{
    public string Name, Type /* etc.*/ ;
} 
```

之后，您需要拆分输入

```
string[] arrayOfInputs = inpuString.Split(new char[]{Environment.NewLine, '\n', '\r'}) // splits your input, such that every element represents a line
List<MyStruct> myStruct = new List<MyStruct>;
foreach (string s in arrayOfInputs)
{
    string[] arrayOfFields = s.Split(';');
    // arrayOfFields[0] == "Name=name"
    // arrayOfFields[1] == "Type=type"
    // etc. extract needed info
    myStruct.Add(new MyStruct(/* arguments go here */))
} 
```

现在您已经提取了数据并将它们放入结构列表中，您可以使用 Linq 搜索所需的数据

```
string theNameImLookingFor = from element in myStruct
                             where element.Type == "HomeUser"
                                || element.Address[0] == "Lyon"
                                || element.Address[1] == "Lyon"
                                || element.Address[2] == "Lyon"
                             select element.Name;

string theTypeImLookingFor = from element in myStruct
                             // etc.
                             select element.Type; 
```

或者，您可以这样做：

```
string tNILF = myStruct.Where(element => element.Type == "HomeUser" /* || etc. */).Select(element => element.Name); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T16:25:40.637

一种方法是将键值对读入动态对象的集合中。完成此操作后，您可以使用动态运行时使用 LINQ 查询动态对象：

创建动态对象的集合：

```
var users = str.Split("\r\n".ToArray(), StringSplitOptions.RemoveEmptyEntries)
                .Select(x => x.Split(';')
                    .Select(p => p.Split('='))
                    .ToLookup(s => s[0], s => s[1])
                    .ToDictionary(l => l.Key, l => (l.Count() > 1) 
                        ? (object)l.ToList() : (object)l.First())
                    .ToExpando()); 
```

注意这个扩展方法的使用：

```
public static dynamic ToExpando(this IDictionary<string, object> dict)
{
    IDictionary<string, object> expando = new ExpandoObject();
    foreach (var kv in dict)
        expando[kv.Key] = kv.Value;
    return expando;
} 
```

然后您可以运行您感兴趣的查询：

1.获取类型为 HomeUser 的名称：

```
var homeUsers = users.Where(u => u.Type == "HomeUser")
    .Select(u => u.Name); 
```

2.获取Address =Germany的类型（注：`.Address`是a `List<string>`）：

```
var typesInGermany = users.Where(u=>u.Address.Contains("Germany"))
    .Select(u => u.Type).Distinct(); 
```

3.获取地址=Lyon的名称：

```
var namesInLyon = users.Where(u => u.Address.Contains("Lyon"))
    .Select(u => u.Name); 
```

# c# - try/catch vs AppDomain.UnhandledException 来记录和崩溃应用程序

> ID：14628015
> 
> 赞同：2
> 
> 时间：2013-01-31T14:22:58.373
> 
> 标签：c#, .net, exception-handling, try-catch

据我所知，您应该只在实际处理异常时才使用 try/catch，而不仅仅是报告和记录它然后使应用程序崩溃。否则，您最好只检查有意义的不同场景（例如，如果 sth==null）或者 - 如果您的目的只是记录异常并使应用程序崩溃 - 使用[AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)。但情况总是如此，为什么？

假设以下方法，它接受一个数组并在执行一些数据库和文件系统操作后返回 MemoryStream。

```
MemoryStream Read (int[] IDs)
{
    try
    {
        using (SqlConnection connection = new SqlConnection(connection_string))
        {
            connection.Open();    

                        // a bunch of code executing SQL queries & constructing MemoryStream, which is returned at the end of the block
        }
    }
    catch (Exception e)
    {
        // report the exception to the user & log it
        throw; // pointles??                
    }
} 
```

有多种情况可以被视为异常/不需要的行为，例如：

*   参数 (IDs[]) 为空，
*   无法建立 SQL 连接，
*   无法执行特定的 SQL 查询。

所有这些情况都被认为是异常的，如果您只想记录异常（然后崩溃），仍然将所有内容放在 try/catch 中可能是不好的做法 - 但为什么呢？在上述情况下，最佳处理行为是什么？完全避免 try/catch，使用 if 语句检查 null 引用（在这种情况下返回 null）并使用 AppDomain.UnhandledException 记录其他所有内容？使用 try/catch，但仍然使用 if 语句检查空引用（并在这种情况下返回）？还有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:47:59.480

使用 try/catch 语句来添加代码只是为了让应用程序崩溃是没有效率的。CLR 已经为您解决了这个问题。并且您有 AppDomain.UnhandledException 来生成体面的信息来诊断原因。

只有在非常特殊的情况下，你*必须*清理一些东西，比如一个你不想继续放置的文件，你是否应该考虑编写一个 try/catch。这本身就是一个非常不确定的要求，无法保证您的 catch 块将执行。当异常像 StackOverflowException 或 ExecutionEngineException 这样令人讨厌时，它不会。或者程序不自行清理的更常见原因，有人绊倒电源线或从任务管理器中终止进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:06:30.857

> 您应该仅在实际处理异常时才使用 try/catch，而不仅仅是报告和记录它然后使应用程序崩溃

我同意第一部分，尽管我要补充一点，当您可能无法控制调用层时，在层边界添加日志记录是有价值的。例如，我在顶部方法中记录 Web 服务中发生的所有异常，以确保我已登录服务器，因为调试信息（堆栈跟踪等）并不总是优雅地跨通信层

在您的特定示例中，我将检查“异常”条件*，您可以*但让其他异常“自然”发生。对于您的具体示例：

> *   参数 (IDs[]) 为空，
> *   无法建立 SQL 连接，
> *   无法执行特定的 SQL 查询。

`null`对于第一个，我会出于一个原因检查参数：A*没有*`NullReferenceException`为您提供有关异常原因的上下文，除了它*发生*的位置。我更喜欢检查然后抛出一个新异常，因为您可以添加*哪个*参数为空。您可能仍需要进行一些挖掘以找出它为空的*原因*，但它可以为您节省大量调试时间。**`null``ArgumentNullException`**

 ***SQL 异常通常可以自然地冒泡，因为它们中有不错的错误信息（例如`"undeclared variable '@arg'"`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:07:57.347

我最近开始自己阅读这个主题。我的基本理解是：

1.  仅当您打算处理异常时才捕获异常。
2.  过度使用 try/catch 会导致异常吞噬和/或丢失有价值的堆栈跟踪信息，并可能导致可维护性问题（如果您决定将错误/日志标准化怎么办？）。而是使用 try/finally 或使用块来实现清理。
3.  通过全局异常处理程序在边界处捕获异常。
4.  顾名思义，使用 AppDomain.UnhandledException：记录未处理的异常。如果你不记录这些，你只会在日志查看器中找到一个 CLR“Windows 错误报告”条目和一些对你真的没用的转储文件。使用 AppDomain.UnhandledException 总是一个好主意，所以如果您的应用程序确实崩溃了，您就会知道原因。

需要注意的是，“处理”异常并不一定意味着清理或追溯逻辑。处理可能只是意味着将错误格式化为对用户更友好的内容，或者隐藏您不希望任何人看到的敏感堆栈跟踪。我通常会记录一个详细的错误并返回一个格式化的错误。

同样，这正是我最初收集到的。以下是一些来源：

[良好的异常管理经验法则](http://www.hanselman.com/blog/GoodExceptionManagementRulesOfThumb.aspx)

[理解和使用异常](http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/)***

# mule - 如何通过以下流程纠正问题？

> ID：14628016
> 
> 赞同：2
> 
> 时间：2013-01-31T14:22:59.170
> 
> 标签：mule, mule-studio

我有一个骡子流如下

```
<flow name="flow1" doc:name="f1">
    <file:inbound-endpoint path="C:\input" responseTimeout="10000"
        doc:name="File" />
</flow>

<flow name="flow2" doc:name="f2">
    <http:inbound-endpoint address="http://localhost:8080"
        doc:name="HTTP" exchange-pattern="request-response" />
    <flow-ref name="flow1" doc:name="Flow Reference" />
    <file:outbound-endpoint path="C:\outputfile"
        responseTimeout="10000" doc:name="File" />
</flow> 
```

我正在尝试通过使用流程将多个文件从源移动/上传到目标（可以是任何东西，例如 FTP 或文件出站等）。

这样做的原因是我想使用 CURL 从 CLI（命令行界面）调用作业。

但它不工作....

## 已编辑

我需要从位于我的硬盘驱动器中的特定文件夹中提取一些文件（多个文件）。然后将它们移动到一些出站进程，可以是 FTP 站点或其他硬盘驱动器位置。但是这个流程需要从 CLI 中调用。

## 编辑（基于大卫的回答）

我现在有如下流程

```
<flow name="filePickupFlow" doc:name="flow1" initialState="stopped">
     <file:inbound-endpoint path="C:\Input" responseTimeout="10000" doc:name="File"/>

      <logger message="#[message.payloadAs(java.lang.String)]" level="ERROR" />
</flow>

<flow name="flow2" doc:name="flow2">
  <http:inbound-endpoint address="http://localhost:8080/file-pickup/start" doc:name="HTTP" exchange-pattern="request-response"/>

  <expression-component>
        app.registry.filePickupFlow.start();
    </expression-component>

 <file:outbound-endpoint path="C:\outputfile" responseTimeout="10000" doc:name="File"/>

</flow> 
```

我遇到了几个问题

a) 我收到一个错误 -*属性 initialState 未定义为流的有效属性*

![在此处输入图像描述](../Images/acde4d158047c72295c83b72da63378c.png)

但是，如果我删除该属性，则流程会继续，而无需等待`"http://localhost:8080/file-pickup/start"`启动。

b) 文件未移动到目标文件夹

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T19:20:52.360

您无法引用其中包含入站端点的流，因为此类流已经处于活动状态并正在使用来自其入站端点的事件，因此您无法按需调用它。

以下在 Mule 3.3.1 上进行了测试，展示了如何根据 HTTP 请求启动“文件提取流程”。

```
<flow name="filePickupFlow" initialState="stopped">
    <file:inbound-endpoint path="///tmp/mule/input" />
    <!-- Do something with the file: here we just log its content -->
    <logger message="#[message.payloadAs(java.lang.String)]" level="ERROR" />
</flow>

<flow name="filePickupStarterFlow">
    <http:inbound-endpoint address="http://localhost:8080/file-pickup/start"
        exchange-pattern="request-response" />
    <expression-component>
        app.registry.filePickupFlow.start();
    </expression-component>
    <set-payload value="File Pickup successfully started" />
</flow> 
```

然后HTTP GETting`http://localhost:8080/file-pickup/start`将`filePickupFlow`启动`/tmp/mule/input`.

请注意，您可以`file:connector`为其处理的文件配置必须具有的行为，删除它们或将它们移动到另一个目录是两个主要选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:36:21.157

我猜在这种情况下，按需读取文件的入站文件将无济于事。

请尝试以下方式。

```
<flow name="flow1" doc:name="f2">
    <http:inbound-endpoint address="http://localhost:8080"
        doc:name="HTTP" exchange-pattern="request-response" />
    <component>
        <spring-object bean="fileLoader"></spring-object>
    </component>
   <file:outbound-endpoint path="C:\outputfile"
       responseTimeout="10000" doc:name="File" />
</flow> 
```

因此，自定义组件将是一个从您指定位置读取文件的类。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T17:30:36.807

您可以使用 Mule Requester 获得干净的解决方案。请参阅博客条目[介绍 Mule 请求者](http://blogs.mulesoft.org/introducing-the-mule-requester-module/)中的详细信息。

# .net - 访问令牌过期后如何继续上传？

> ID：14628024
> 
> 赞同：0
> 
> 时间：2013-01-31T14:23:19.553
> 
> 标签：.net, google-drive-api, google-oauth, google-api-dotnet-client

我在 .net 中有一个桌面应用程序，可以将文件上传到 Google Drive。要授权的应用程序使用服务帐户。问题在于大文件（+ 300MB）。上传 1 小时后，应用程序会出现错误消息：

> 无效证件

问题是访问令牌已过期，我不知道如何刷新凭据。

创建 DriveService 的函数有：

```
Public Function getAuthenticator() As OAuth2Authenticator(Of AssertionFlowClient)
      Dim SERVICE_ACCOUNT_EMAIL As String = <email>
      Dim SERVICE_ACCOUNT_PKCS12_FILE_PATH As String = <pathFile>
      Dim certificate As X509Certificate2 = New X509Certificate2(SERVICE_ACCOUNT_PKCS12_FILE_PATH, <secret>, X509KeyStorageFlags.Exportable)
      Dim provider = New AssertionFlowClient(GoogleAuthenticationServer.Description, certificate) With {.ServiceAccountId = SERVICE_ACCOUNT_EMAIL, .Scope = DriveService.Scopes.Drive.GetStringValue}
      Dim auth = New OAuth2Authenticator(Of AssertionFlowClient)(provider, AddressOf AssertionFlowClient.GetState)

      auth.LoadAccessToken()
      Return auth
End Function 

Public Function getService() As DriveService
    Return New DriveService(getAuthenticator())
End Function 
```

上传的功能是：

```
Public Function upload(pathFile As String, fileName As String) As File
       Dim service = getService()
       Dim fi As File = New Data.File()
       Dim byteArray As Byte() = System.IO.File.ReadAllBytes(pathFile)
       Dim stream As System.IO.MemoryStream = New System.IO.MemoryStream(byteArray)

       fi.Title = fileName
       Dim request As FilesResource.InsertMediaUpload = service.Files.Insert(fi, stream, "*/*")
       request.ChunkSize = 1048576

       AddHandler request.ProgressChanged, New Action(Of IUploadProgress)(AddressOf Request_ProgressChanged)

       request.Upload()  

       Dim fileUpload As File = request.ResponseBody

       Return fileUpload
End Function 
```

我阅读了文档，但没有找到这种情况的示例。

**更新**

我将身份验证应用程序更改为使用带有先前保存的刷新令牌的常规 Google 帐户，但结果是相同的。
这个问题与问题[264](http://code.google.com/p/google-api-dotnet-client/issues/detail?id=264)有关，我的问题是：是否可以上传超过 1 小时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:42:05.767

除了 Drive OAuth 范围外，您还需要请求“离线”访问类型。当您请求此操作时，身份验证响应将包含一个刷新令牌，您可以使用它在旧令牌过期时获取新的访问令牌。

库应该透明地处理大部分内容，您可能只需要在您的身份验证请求中传递“离线”范围。

更多信息：[https ://developers.google.com/accounts/docs/OAuth2WebServer#offline](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T05:37:57.387

我不认识你正在使用的库，但如果它可以访问所有 OAuth2 的花里胡哨，你应该能够获得一个刷新令牌，并在此之前或之前获得一个新的访问令牌它到期的时间。

# c# - 将字符串发布到休息服务

> ID：14628026
> 
> 赞同：0
> 
> 时间：2013-01-31T14:23:27.137
> 
> 标签：c#

我有一个字符串，我想将其发布到休息服务。

这如何在 C# 中完成？一直在谷歌搜索，但还没有找到可行的解决方案。

试过这个：

```
byte[] paramBytes = Encoding.UTF8.GetBytes(xml);
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(
    "https://secure.mm.staging.boostcom.net/connect/rest/groups/1981891989/tokens");
req.Method = "POST";
req.ContentLength = paramBytes.Length;
req.ContentType = "text/xml";
ServicePointManager.ServerCertificateValidationCallback = 
    delegate(
        object s, 
        X509Certificate certificate, 
        X509Chain chain, 
        SslPolicyErrors sslPolicyErrors) 
        { 
            return true; 
        };

using (Stream reqStream = req.GetRequestStream())
{
    reqStream.Write(paramBytes, 0, paramBytes.Length);
}

using (HttpWebResponse resp = (HttpWebResponse)req.GetResponse()) //HERE!
{
    if (resp.StatusCode != HttpStatusCode.OK)
    {
        string message = String.Format(
            "POST failed. Received HTTP {0}", 
             resp.StatusCode);
        throw new ApplicationException(message);
    }

    StreamReader sr = new StreamReader(resp.GetResponseStream());
    string response = sr.ReadToEnd();

    Console.WriteLine(response + System.Environment.NewLine);
} 
```

解决方案：我可能有错误的 contentType。似乎至少现在可以工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T21:46:49.000

Content-Type 应该是 text/plain

# javascript - Jquery live功能突然不再工作了

> ID：14628028
> 
> 赞同：10
> 
> 时间：2013-01-31T14:23:35.370
> 
> 标签：javascript, jquery

我正在使用 jQuery`live()`函数来检测用户何时按下一些特殊键（箭头等）：

```
$('.TextBox1').live('keydown', function(e) {
    var keyCode = e.keyCode || e.which;
    if (keyCode == 40) {
        e.preventDefault();
        // ...
    }
}); 
```

它工作了几个月，但昨天突然停止工作，阻止它下面的每一行 JS 代码执行。我试图用`.keyup`函数替换它，但这没有帮助。可能发生了什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-31T14:25:13.203

我假设您已经更新到最新版本的 jQuery？`live()`自 jQ1.7 以来已被弃用，现在从 1.9 中删除。

相反，您应该使用`on()`委托参数：

```
$(document).on('keydown', '.TextBox1', function(e) {
    var keyCode = e.keyCode || e.which;

    if (keyCode == 40) {
        e.preventDefault();
        //...
    }
}); 
```

请注意，为了获得最佳性能，您应该`document`在上面的示例中将其替换为最近的父元素，`.TextBox1`该父元素在页面加载后不会动态附加到 DOM。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T14:26:18.813

jQuery .live 已弃用。虽然不完全相同，但使用 .on() 对于您的示例，它看起来像：

```
$('body').on('keydown', '.TextBox1', function() {
    var keyCode = e.keyCode || e.which;
    if (keyCode == 40) {
        e.preventDefault();
        ...
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T20:41:40.410

`.live()`在 jQuery 1.9 之后被删除。

你必须`.on`从现在开始使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T14:25:11.883

.live 在 jQuery 1.9 中被删除。如果您正在调用最新版本的 jQuery，它将中断。

更改您的代码以使用 .on

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-31T14:33:55.957

`.live()`在最新版本的 jQuery 1.9 中被删除。

您可以改用[jQuery Migrate 插件](https://github.com/jquery/jquery-migrate/)，或更改代码以使用`.on`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-10T22:02:37.037

按照 jquery 网站上的说明使用它。对于您的示例，它将是

`$(document).on( "keydown", ".TextBox1", function() { });`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T14:25:38.460

从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

阅读此内容以获取有关[直播的更多信息](http://api.jquery.com/live/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-31T14:27:32.617

live 实际上已在 jq 1.9 上被删除，而不仅仅是被弃用！您可以使用插件来实现兼容性或将代码更新为 on

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-31T14:35:44.530

`.live()`在 jq 1.9 中已弃用，所以你可以试试这个

```
$('.TextBox1').on('keydown', function() {
    var keyCode = e.keyCode || e.which;
    if (keyCode == 40) {
        e.preventDefault();
        ...
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-31T14:43:36.237

您是否已将 jquery 更新到 1.7？

从 jQuery 1.7 开始，不推荐使用 .live() 方法。

使用 .on() 附加事件处理程序：

```
$('.TextBox1').on('keydown', text_box_key_down_function); 
```

您还可以使用绑定：

```
$('.TextBox1').bind('keydown',text_box_key_down_function); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-31T15:04:37.817

.live 在 JQ 1.9 发布时被删除，所以我猜你已经将 Jquery 更新到了最新版本。

现在，尝试：

```
$('.TextBox1').on('keydown', function() {
    var keyCode = e.keyCode || e.which;
    if (keyCode == 40) {
        e.preventDefault();
        ...
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-06-16T08:48:20.807

.live 在 JQ 1.9 时被删除，但现在有同时运行 .live 和 .on 的解决方案

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script> 
```

[更多关于 Jquery 迁移](http://blog.jquery.com/2013/05/08/jquery-migrate-1-2-1-released/)

[来自stackoverflow的羽毛信息](https://stackoverflow.com/questions/21882731/how-to-use-jquery-migrate-plugin)

# android - 自定义视频录制方向

> ID：14628032
> 
> 赞同：5
> 
> 时间：2013-01-31T14:23:41.393
> 
> 标签：android, video, camera, recording

当我使用 MediaRecorder 以纵向模式录制视频时，以横向模式录制的视频，

我试过 mMediaRecorder.setOrientationHint(90); 和 mServiceCamera.setDisplayOrientation(90); 但它不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:51:39.307

对于较旧的 API 级别，[没有一个好的方法可以做到这一点。](https://stackoverflow.com/a/12166919/752320)

如果您使用 >=14，则可以使用 [媒体效果](http://developer.android.com/reference/android/media/effect/package-summary.html)调用来更改方向。可以在该链接中找到其使用说明。您需要一个有效的 OpenGL 上下文才能使用它，因此它比简单的相机应用程序稍微复杂一些。

您很可能会想要使用[`EFFECT_ROTATE`](http://developer.android.com/reference/android/media/effect/EffectFactory.html#EFFECT_ROTATE)。

# asp.net - 剃刀视图中的@Html.DropDownList 问题？

> ID：14628034
> 
> 赞同：3
> 
> 时间：2013-01-31T14:23:45.830
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我有一个响应提交按钮的表单。

我在菜单上有我的下拉列表，如下所示：

```
@Html.DropDownList("State", new List<SelectListItem>
{
    new SelectListItem { Text = "Please select" }, 
    new SelectListItem { Value = "AL", Text="Alabama" }, ....
    new SelectListItem { Value = "WY", Text="Wyoming" }) 
```

如何在我的模型中将选定的值作为布尔值或最好作为字符串..

我需要验证

```
[Required(ErrorMessage = "Please select a state.")]
public string/bool State { get; set; } 
```

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:46:59.553

> 如何将选定的值作为 bool

将状态名称绑定到布尔变量几乎没有意义。

改用字符串：

```
public class MyViewModel
{
    [Required(ErrorMessage = "Please select a state.")]
    public string State { get; set; }
} 
```

那么你可以有一个控制器：

```
public class HomeController: Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel();
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        if (!ModelState.IsValid)
        {
            // there was a validation error - probably the user didn't select a state
            // => redisplay the view so that he can fix the error
            return View(model);
        }

        // at this stage the model is valid
        // you could use the model.State property that will hold the selected value
        return Content("Thanks for selecting state: " + model.State);
    }
} 
```

最后你会有一个对应的强类型视图：

```
@model MyViewModel
@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(x => x.State)
        @Html.DropDownListFor(
            x => x.State,
            new[]
            {
                new SelectListItem { Text = "Please select" }, 
                new SelectListItem { Value = "AL", Text="Alabama" },
                .....
                new SelectListItem { Value = "WY", Text="Wyoming" }
            },
            "-- select a state --"
        )
        @Html.ValidationMessageFor(x => x.State)
    </div>
    <button type="submit">OK</button>
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:30:12.123

您想使用模型绑定助手

```
@model MVC4.Models.Model 
```

进而

```
@Html.DropDownListFor(m=>m.State, new List<SelectListItem>
new SelectListItem { Text = "Please select" }, 
    new SelectListItem { Value = "AL", Text="Alabama" }, ....
    new SelectListItem { Value = "WY", Text="Wyoming" }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:29:40.137

对于“请选择”项，您需要设置一个空字符串的值。如果你不这样做，IIRC，`Value`和`Text`将呈现相同的（所以你需要的验证器认为有一个值）。

模型中的`State`属性应该是`string`.

# c# - 将两个文件从特定位置保存到用户在驱动器中定义的位置

> ID：14628035
> 
> 赞同：0
> 
> 时间：2013-01-31T14:23:51.580
> 
> 标签：c#, winforms

我是 c# 的新手，几个月前开始，我在复制两个文件并将其保存在用户定义的其他位置时遇到问题。你见过微软windows中的记事本吗？单击退出时要求保存。当点击是时，它会给出对话框，用于保存你想要的地方，就像我想要的那样。我在 c\program files\myfolder 中有两个文件，我想将它移动到用户定义的位置。那怎么办？我还必须设计那个对话框吗？那些保存取消按钮和组合框的按钮呢？c# 提供了该对话框中的所有内容或一些简单的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:27:49.033

为此有一个内置的 .NET 对话框，请查找`OpenFileDialog`

忽略名称中包含“open”的事实，它同样可以用于选择保存文件的位置。

[http://msdn.microsoft.com/en-gb/library/system.windows.forms.openfiledialog.aspx](http://msdn.microsoft.com/en-gb/library/system.windows.forms.openfiledialog.aspx)

# optimization - 关于寄存器的 CUDA 内核优化

> ID：14628043
> 
> 赞同：0
> 
> 时间：2013-01-31T14:24:09.980
> 
> 标签：optimization, cuda

我对 CUDA 和 GPU 编程很陌生。我正在尝试为物理应用程序编写内核。并行化是在正交方向上进行的，每个方向都会扫描二维笛卡尔域。这里是内核。它实际上效果很好，效果很好。

但是，每个块的大量寄存器会导致溢出到本地内存，从而严重降低代码性能。

```
__global__ void KERNEL (int imax, int jmax, int mmax, int lg, int lgmax, 
                        double *x,   double *y, double *qd, double *kappa,
                        double *S, double *G, double *qw, double *SkG, 
                        double *Ska,double *a, double *Ljm, int *data)

{
int m   = 1+blockIdx.x*blockDim.x + threadIdx.x ; 
int tid = threadIdx.x ;

//Var needed for thread execution
...

extern __shared__ double shared[] ;

//Read some data from Global mem
mu  = qd[        (m-1)];
eta = qd[  MSIZE+(m-1)];
wm  = qd[3*MSIZE+(m-1)];
amu = fabs(mu);
aeta= fabs(eta);
ista = data[        (m-1)] ;
iend = data[1*MSIZE+(m-1)] ;
istp = data[2*MSIZE+(m-1)] ;
jsta = data[3*MSIZE+(m-1)] ;
jend = data[4*MSIZE+(m-1)] ;
jstp = data[5*MSIZE+(m-1)] ;

j1 = (1-jstp)   ;
j2 = (1+jstp)/2 ;
i1 = (1-istp)   ;
i2 = (1+istp)/2 ;

isw = ista-istp ;
jsw = jsta-jstp ;

dy = dx = 1.0e-2 ;

for(i=1 ; i<=imax; i++) Ljm[MSIZE*(i-1)+m] = S[jsw*(imax+2)+i] ;

//Beginning of the vertical Sweep, can be from left to right, 
// or opposite depending on the thread

for(j=jsta ; j1*jend + j2*j<=j2*jend + j1*j ; j=j+jstp) {

Lw = S[j*(imax+2)+isw] ;

//Beginning of the horizontal Sweep, can be from left to right, 
// or opposite depending on the thread

   for(i=ista ; i1*iend + i2*i<=i2*iend + i1*i ; i=i+istp) {

            ax = dy ;
            Lx = ax*amu/ex ;
            ay = dx ;
            Ly = ay*aeta/ey ;

            dv = ax*ay ;
            L0 = dv*kappaij ;
            Sp = S[j*(imax+2)+i]*dv ;
            Ls = Ljm[MSIZE*(i-1)+m] ;

            Lp = (Lx*Lw+Ly*Ls+Sp)/(Lx+Ly+L0) ;

            Lw = Lw+(Lp-Lw)/ex ;
            Ls = Ls+(Lp-Ls)/ey ;

            Ljm[MSIZE*(i-1)+m] = Ls ;

            shared[tid] = wm*Lp ;
            __syncthreads();

            for (s=16; s>0; s>>=1) {
                if (tid < s) {
                   shared[tid] += shared[tid + s] ;
                }
            }

            if(tid==0) atomicAdd(&SkG[imax*(j-1)+(i-1)],shared[tid]*kappaij);

    }
    // End of horizontal sweep
 }
 // End of vertical sweep 
```

}

如何优化此代码的执行？我在 8 个 32 个线程的块上运行它。这个内核的占用率真的很低，根据 Visual profiler 受到寄存器的限制。

我不知道如何改进它。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:51:49.097

首先，您使用的是 32 个线程块，因此，占用内核太低。您的 gpu 仅并行运行 256 个线程，但每个多处理器最多可运行 1536 个线程（计算能力 2.x）

你用了多少个寄存器？您还可以尝试将变量声明到它们的本地范围内，帮助设备更好地重用寄存器。

# sql-server-2008-r2 - Is it possible to audit the changed values using SQL Server Auditing?

> ID：14628045
> 
> 赞同：1
> 
> 时间：2013-01-31T14:24:15.113
> 
> 标签：sql-server-2008-r2, auditing, audit-logging

Is it possible to audit the changed values using [SQL Server Auditing](http://msdn.microsoft.com/en-us/library/cc280526%28v=sql.105%29.aspx) for stored procedures? Note: I'm **not** talking about [CDC](https://stackoverflow.com/questions/793643/auditing-sql-server-data-changes).

I've got basic auditing working, writing to the security log. If I run an INSERT statement, I get a 33205 event contain this [I've removed a lot of the message for clarity]:

```
Audit event: event_time:2013-01-31 14:06:53.4855165
 :
statement:INSERT INTO [DB1].[dbo].[Table1]
           ([ANumber]
           ,[AName]
           ,[ADescription])
     VALUES
           (21, 'Cheese', 'Cheese making.')
additional_information:
. 
```

And that's great! But if I turn it into a stored procedure with parameters, I get [also edited]:

```
Audit event: event_time:2013-01-31 14:07:29.3099731
 :
statement:INSERT INTO [DB1].[dbo].[Table1]
               ([ANumber]
               ,[AName]
               ,[ADescription])
         VALUES
               (@aNumber, @aName, @aDescription)
additional_information:
. 
```

which is as useful as a chocolate teapot. What use is knowing who did something and when if you don't know what they did? I feel like there ought to be an 'Include parameter values' flag or something but I can't find one. What am I missing, here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:18:55.883

It's funny how posting a question can trigger the thought processes that lead to the answer, isn't it?

SQL Server Auditing treats the EXEC of the stored procedure as a separate audit from the INSERT (or other) that the SP is carrying out. The parameters are audited as part of the EXEC statement. You need to make sure you're auditing the right objects.

# javascript - JSF 扩展数据表排序和过滤

> ID：14628047
> 
> 赞同：1
> 
> 时间：2013-01-31T14:24:17.857
> 
> 标签：javascript, jsf, richfaces

我有一个扩展的数据表，RICHFACES 3.3.3，启用了排序和过滤。该表是动态呈现的。根据要求，我需要在显示表格时禁用某些行（包含可编辑字段）。

我在 Javascript 函数中编写了该逻辑`rowBlur()`，并在显示页面时调用它。因此，当加载表时，所需的行将按预期禁用。问题是每当我过滤/排序表时，禁用的行会再次启用。

有什么方法可以在过滤或排序发生时调用 javascript 函数？

这是代码：

```
HtmlExtendedDataTable dynamicDataTable = new HtmlExtendedDataTable();
dynamicDataTable.setOnkeydown("filterAllOnEnter(event)");

function filterAllOnEnter(event) {
    if(event.keyCode == 13) {
        jQuery(".rich-filter-input").blur();
        rowblur();
        return false;
    } else
        return true;
}

// js code////////////
<script>
function show(){
    val = '${myController.mergeWorkMap}';
}
</script>
<script>
function rowblur(){
for(var i=0;i<7;i++){
    var firstCol = "myForm:dynamicTable:"+i+":col0" ;
    var secondCol = "myForm:dynamicTable:"+i+":col1" ;
    var merge =document.getElementById(firstCol).textContent;
    var work =document.getElementById(secondCol).textContent;
    var obj = JSON.parse(val).mergeWorkMap;
    if(!(work == obj[merge])){
        var col3 = "myForm:dynamicTable:" + i + ":col3";
        var col4 = "myForm:dynamicTable:" + i + ":col4";
        var col5 = "myForm:dynamicTable:" + i + ":col5";
        var col6 = "myForm:dynamicTable:" + i + ":col6";
        document.getElementById(col3).disabled = true;
        document.getElementById(col4).disabled = true;
        document.getElementById(col5).disabled = true; 
        document.getElementById(col6).disabled = true;
    }

}
}
</script> 
```

将`rowblur()`无法正常进行过滤，并且在对列进行排序时根本无法正常工作。

# php - 在 javascript 中从远程 php 服务器获取值

> ID：14628048
> 
> 赞同：-2
> 
> 时间：2013-01-31T14:24:23.350
> 
> 标签：php, javascript, ajax, json

我有两个站点，站点 A 只是 html 和 javascript，站点 B 有 php。我需要的是从站点 A 中的站点 B 获取变量。

前任：

站点A就像

```
<html>
<head>
  <script>
  //this script has to get the values from siteB
  </script>
</head>
<body>
  <div><!-- here i will do something with the data of site B --></div>
</body>
</html> 
```

站点 b 是这样的：

```
<?php
  var1= "something";
  var2= "somethingElse";
?> 
```

我在考虑使用 JSON 或 Ajax，但我不明白具体如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:29:27.917

```
$(document).ready(function() {
  $.ajax({
   type: "GET",
   url: "filename.html",
   dataType: "json",
   success: function(data) {
        // data will contain var1 and var2
   },
   error: function(data) {
        alert("Problem - perhaps malformed JSON?");
   }
  });
}); 
```

并将您的 PHP 文件更改为：

```
{
   "var1" : "something",
   "var2" : "somethingElse"
} 
```

确认工作。确保您的文件是格式正确的 JSON，否则不会触发“成功”。

注意 - 我在这里暗示使用 JQuery。您的 HTML 文件应包括：

```
<script type="txt/javascript" src="jquery-1.8b1.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:33:25.957

文件 B

```
<?php

$array[var1] = 'Something';
$array[var2] = 'else';

echo json_encode( $array ); 
```

文件 A (jQuery)

```
$.getJSON( $( 'file.php', function( data ) {

    $( 'div' ).html( data.var1 + ' ' + data.var2 );

} 
```

* * *

已编辑——如前所述，如果不采取其他措施，就无法做到这一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T14:33:10.153

出于安全原因，Javascript 不能使用 ajax 跨站点。实现这一点的唯一方法是在站点 A 上只有一个可以重定向的 php 文件。

```
<?php echo file_get_contents($_GET["url"]); ?> 
```

javascript可以调用url：

```
/redir.php?url=http://siteb.com/valuetoget.php 
```

我不知道在调用网站上没有 php 的情况下可以做到这一点。

# mysql - 插入后触发器不会为每一行触发

> ID：14628070
> 
> 赞同：0
> 
> 时间：2013-01-31T14:25:22.797
> 
> 标签：mysql, sql, triggers

嘿，我有一个在更新后触发的触发器，定义如下：

```
CREATE DEFINER =  `root`@`localhost` TRIGGER `logs_m` AFTER UPDATE ON  
`logs_month` FOR EACH ROW
 BEGIN IF NEW.status =1 THEN INSERT INTO logs_payments( direction, 
TYPE , amount, agent_id, invoice_number ) 
VALUES ( 0, 3, NEW.reward_minutes, NEW.agent_id, NULL ) ,
 ( 0, 5, NEW.credit, NEW.agent_id, NULL ) ;

END IF ;
END 
```

现在`logs_payments`我在插入后有一个触发器，它的定义如下：

```
CREATE DEFINER =  `root`@`localhost` TRIGGER `payments_invoice` BEFORE INSERT ON 
 `logs_payments` 
FOR EACH
ROW BEGIN 
IF NEW.direction =0
THEN 
SET NEW.invoice_number = ( SELECT MAX( IFNULL( invoice_number, 100000000 ) ) +1
FROM logs_payments l
WHERE l.direction =0 ) ;

END IF ;

IF NEW.direction =1 THEN SET NEW.invoice_number = 
( SELECT MAX( IFNULL( invoice_number, 200000000 ) ) +1
FROM logs_payments l
WHERE l.direction =1 ) ;

END IF ;

END 
```

现在插入的第一`invoice_number`行为空，第二行获得正确的值。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:31:29.437

解决了它，触发器在我的查询中有问题，因为我在第一次设置时没有价值：

```
SELECT MAX( IFNULL( invoice_number, 100000000 ) ) +1 
```

应该是哪个错了

```
select ifnull(max(invoice_number),100000000)+1 
```

现在它工作正常。

# c# - RestSharp 和列表 解组

> ID：14628071
> 
> 赞同：0
> 
> 时间：2013-01-31T14:25:23.013
> 
> 标签：c#, restsharp

嗨，感谢这个美妙的工具！

我有一个 JSON 响应，它为“帐户”返回一些“文件夹”。我使用[http://json2csharp.com/](http://json2csharp.com/)来生成将结果序列化到的类。这些类位于此 JSON 之下。

简而言之，问题是返回了正确的文件夹，并创建了数组，但是数组成员（文件夹）的成员变量从未初始化。

```
{
    “名称”：“SEResponse”，
    "declaredType": "com.sesac.api.view.FolderList",
    "范围": "javax.xml.bind.JAXBElement$GlobalScope",
    “价值”： {
        “关联”： []，
        “总记录”：9，
        “文件夹”：[
            {
                “文件夹”： {
                    “文件夹ID”：1，
                    “帐户ID”：1，
                    “名称”：“根”，
                    “isRoot”：是的，
                    “父ID”：0，
                    “父名”：空，
                    “创建日期”：空，
                    "lastModifiedDate": null,
                    “fbFolderId”：空，
                    “fbParentId”：空
                }
            },
            {
                “文件夹”： {
                    “文件夹ID”：9，
                    “帐户ID”：1，
                    “名称”：“m4”，
                    “是根”：假，
                    “父ID”：1，
                    “父名”：空，
                    “创建日期”：空，
                    "lastModifiedDate": null,
                    “fbFolderId”：空，
                    “fbParentId”：空
                }
            },
            {
                “文件夹”： {
                    “文件夹ID”：2，
                    “帐户ID”：1，
                    “名称”：“c1”，
                    “是根”：假，
                    “父ID”：1，
                    “父名”：空，
                    “创建日期”：空，
                    "lastModifiedDate": null,
                    “fbFolderId”：空，
                    “fbParentId”：空
                }
            },
            {
                “文件夹”： {
                    “文件夹ID”：3，
                    “帐户ID”：1，
                    “名称”：“c2”，
                    “是根”：假，
                    “父ID”：1，
                    “父名”：空，
                    “创建日期”：空，
                    "lastModifiedDate": null,
                    “fbFolderId”：空，
                    “fbParentId”：空
                }
            },
            {
                “文件夹”： {
                    “文件夹ID”：4，
                    “帐户ID”：1，
                    “名称”：“cc2”，
                    “是根”：假，
                    “父ID”：3，
                    “父名”：空，
                    “创建日期”：空，
                    "lastModifiedDate": null,
                    “fbFolderId”：空，
                    “fbParentId”：空
                }
            },
            {
                “文件夹”： {
                    “文件夹ID”：5，
                    “帐户ID”：1，
                    “名称”：“dd2”，
                    “是根”：假，
                    “父ID”：3，
                    “父名”：空，
                    “创建日期”：空，
                    "lastModifiedDate": null,
                    “fbFolderId”：空，
                    “fbParentId”：空
                }
            },
            {
                “文件夹”： {
                    “文件夹ID”：10，
                    “帐户ID”：1，
                    “名称”：“z4”，
                    “是根”：假，
                    “父ID”：1，
                    “父名”：空，
                    “创建日期”：空，
                    "lastModifiedDate": null,
                    “fbFolderId”：空，
                    “fbParentId”：空
                }
            },
            {
                “文件夹”： {
                    “文件夹ID”：6，
                    “帐户ID”：1，
                    “名称”：“z2”，
                    “是根”：假，
                    “父ID”：1，
                    “父名”：空，
                    “创建日期”：空，
                    "lastModifiedDate": null,
                    “fbFolderId”：空，
                    “fbParentId”：空
                }
            },
            {
                “文件夹”： {
                    “文件夹ID”：7，
                    “帐户ID”：1，
                    “名称”：“j4”，
                    “是根”：假，
                    “父ID”：1，
                    “父名”：空，
                    “创建日期”：空，
                    "lastModifiedDate": null,
                    “fbFolderId”：空，
                    “fbParentId”：空
                }
            }
        ]
    },
    “无”：假，
    “全球范围”：真，
    “类型替换”：假
}

```

这是我的课程：

```
public class Folder
{
    public int folderId { get; set; }
    public int accountId { get; set; }
    public string name { get; set; }
    public bool isRoot { get; set; }
    public int parentId { get; set; }
    public object parentName { get; set; }
    public object creationDate { get; set; }
    public object lastModifiedDate { get; set; }
    public object fbFolderId { get; set; }
    public object fbParentId { get; set; }
}

public class FolderList
{
    public List<object> link { get; set; }
    public int TotalRecords { get; set; }
    public List<Folder> Folders { get; set; }
}

public class RootFolderObject
{
    public string name { get; set; }
    public string declaredType { get; set; }
    public string scope { get; set; }
    public FolderList value { get; set; }
    public bool nil { get; set; }
    public bool globalScope { get; set; }
    public bool typeSubstituted { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:46:14.783

您所有未初始化的对象都是对象类型。在我看来，您需要使用更合适/更具体的对象类型来启用正确的反序列化/序列化。示例：使用 DateTime 作为时间戳等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:04:54.980

是的，“对象”类型是一个问题（对于文件夹和链接）。

我想知道为什么你会在 JSON 中得到“文件夹”。我希望：

```
"Folders": [
            {
                    "folderId": 1,
                    "accountId": 1,
                    "name": "root",
                    ...
            },
            ...
] 
```

使用您的 JSON RestSharp 可能会寻找一个名为“文件夹”的成员。

# java - 外部洗牌：将大量数据洗牌出内存

> ID：14628072
> 
> 赞同：7
> 
> 时间：2013-01-31T14:25:26.930
> 
> 标签：java, algorithm, bigdata

我正在寻找一种方法来洗牌大量不适合内存的数据（大约 40GB）。

我有大约 3000 万个长度可变的条目，存储在一个大文件中。我知道该文件中每个条目的开始和结束位置。我需要对这些不适合 RAM 的数据进行洗牌。

[我想到的唯一解决方案是使用Fisher-Yates 算法](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)`1`对包含从到的数字`N`（其中`N`是条目数）的数组进行洗牌，然后根据此顺序将条目复制到新文件中。不幸的是，这个解决方案涉及大量的查找操作，因此会非常慢。

有没有更好的解决方案来混洗大量均匀分布的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T14:41:05.033

首先`shuffle`从你的脸上解决这个问题。通过为您的条目发明一种产生类似随机结果的散列算法来做到这一点，然后对散列进行正常的外部排序。

现在，您已将您的问题`shuffle`转变`sort`为寻找适合您的口袋和内存限制的有效外部排序算法。现在应该像`google`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-19T08:44:41.640

一个简单的方法是选择一个合适的数据在内存中`K`。`1/K`也许`K=4`对于您的数据，假设您有 16GB 的 RAM。我假设您的随机数函数具有从to`rnd(n)`生成统一随机数的形式。`0``n-1`

然后：

```
for i = 0 .. K-1
   Initialize your random number generator to a known state.
   Read through the input data, generating a random number rnd(K) for each item as you go.
   Retain items in memory whenever rnd(K) == i.
   After you've read the input file, shuffle the retained data in memory.
   Write the shuffled retained items to the output file. 
```

这很容易实现，会避免大量的寻找，而且显然是正确的。

另一种方法是根据随机数将输入数据划分为`K`文件，然后遍历每个文件，在内存中洗牌并写入磁盘。这减少了磁盘 IO（每个项目被读取两次并写入两次，与第一种方法相比，每个项目被读取 K 次并写入一次），但您需要小心缓冲 IO 以避免大量查找，它使用更中间的磁盘，并且实现起来有些困难。如果您只有 40GB 的数据（所以`K`很小），那么对输入数据进行多次迭代的简单方法可能是最好的。

如果使用 20ms 作为读取或写入 1MB 数据的时间（并假设内存中的 shuffle 成本微不足道），简单的方法将花费 40*1024*(K+1)*20ms，即 1 分 8 秒（假设`K=4`）。中间文件方法将花费 40*1024*4*20ms，大约是 55 秒，假设您可以最小化查找。请注意，SSD 的读取和写入速度大约快 20 倍（即使忽略搜索），因此您应该期望使用 SSD 在 10 秒内执行此任务。[每个程序员都应该知道](https://gist.github.com/jboner/2841832)的延迟数字中的数字

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T01:01:40.070

### 前提

据我了解，使用 Fisher-Yates 算法和您拥有的有关条目位置的数据，您应该能够获得（并计算）以下列表：

```
struct Entry {
    long long sourceStartIndex;
    long long sourceEndIndex;
    long long destinationStartIndex;
    long long destinationEndIndex;
} 
```

### 问题

从这一点开始，天真的解决方案是寻找源文件中的每个条目，读取它，然后寻找目标文件中条目的新位置并写入它。

这种方法的问题在于它使用了太多的搜索。

### 解决方案

一个更好的方法是减少查找次数，为每个文件使用两个巨大的缓冲区。

我建议源文件使用一个小缓冲区（比如 64MB），目标文件使用一个大缓冲区（用户可以承受的最大 - 比如 2GB）。

最初，目标缓冲区将映射到目标文件的前 2GB。此时，在源缓冲区中以 64MB 的块读取整个源文件。阅读时，将正确的条目复制到目标缓冲区。当您到达文件末尾时，输出缓冲区应该包含所有正确的数据。将其写入目标文件。

接下来，将输出缓冲区映射到目标文件的下一个 2GB 并重复该过程。继续，直到您编写了整个输出文件。

### 警告

由于条目具有任意大小，因此在缓冲区的开头和结尾很可能会有条目的后缀和前缀，因此您需要确保正确复制数据！

### 估计时间成本

执行时间基本上取决于源文件的大小、应用程序的可用 RAM 和 HDD 的读取速度。假设一个 40GB 的文件、2GB 的 RAM 和 200MB/s 的 HDD 读取速度，程序将需要读取 800GB 的数据（40GB * (40GB / 2GB)）。假设 HDD 不是高度碎片化的，则用于寻道的时间可以忽略不计。这意味着读取将占用一小时！但是，如果幸运的是，用户有 8GB 的​​ RAM 可用于您的应用程序，则时间可能会减少到仅 15 到 20 分钟。

我希望这对你来说已经足够了，因为我没有看到任何其他更快的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T14:42:14.210

我建议保留您的一般方法，但在进行实际复制之前反转地图。这样，您可以按顺序阅读并进行分散的写入，而不是相反。

在程序可以继续之前，必须在请求时完成读取。可以将写入留在缓冲区中，从而增加在实际执行写入之前对同一磁盘块累积多次写入的可能性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-18T23:36:53.200

[尽管您可以按照OldCurmudgeon](https://stackoverflow.com/a/14628379/577088)的建议对随机键使用外部排序，但随机键不是必需的。[您可以将内存中的数据块打乱，然后按照aldel](https://stackoverflow.com/questions/14628072/external-shuffle-shuffling-large-amount-of-data-out-of-memory#comment81846597_14628379)的建议通过“随机合并”将它们连接起来。

值得更清楚地说明“随机合并”的含义。[给定两个大小相等的混洗序列，随机合并的行为与合并排序](https://stackoverflow.com/questions/10502533/explanation-of-merge-sort-for-dummies/10503273#10503273)中的完全相同，不同之处在于，要添加到合并列表中的下一项是使用来自 0 和 1 的混洗序列中的布尔值选择的，完全一样许多零作为一。（在合并排序中，将使用比较进行选择。）

### 证明它

我断言这行得通是不够的。我们怎么知道这个过程给出了一个打乱的序列，这样每个排序都是同样可能的？可以用图表和一些计算给出证明草图。

首先，定义。假设我们有**`N`唯一的项目**，其中`N`是偶数，并且`M = N / 2`。这些项目以**两个**标记的项目**序列**`N`提供给我们，并保证以随机顺序排列。合并它们的过程会产生一个项目序列，使得每个项目来自 sequence或 sequence ，并且相同数量的项目来自每个序列。它看起来像这样：**`M`**`0``1``N``0``1`

```
0: a b c d
1: w x y z
N: a w x b y c d z 
```

请注意，虽然`0`和中的项目`1`看起来是有序的，但它们在这里只是标签，顺序并不意味着什么。它只是用来连接 的`0`和`1`的 顺序`N`。

由于我们可以从标签中分辨出每个项目来自哪个序列，因此我们可以创建一个由 0 和 1 组成的“源”序列。叫那个`c`。

```
c: 0 1 1 0 1 0 0 1 
```

根据上面的定义，在`c`.

现在观察，对于 中任何给定的标签顺序`N`，我们可以直接复制一个`c`序列，因为标签保留了它们来自的序列的信息。并且给定`N`and `c`，我们可以重现`0`and`1`序列。所以我们知道从一个序列`N`到一个三元组总是有一条路径`(0, 1, c)`。换句话说，我们定义了一个*反向*函数`r`，从标签的所有排序集合`N`到三元组`(0, 1, c)`—— `r(N) = (0, 1, c)`。

我们还有一个`f`来自任何三元组的前向函数，它可以根据 的值简单地`r(n)`重新合并。这两个函数一起表明，在 的输出和 的排序之间存在一一对应的关系。`0``1``c``r(N)``N`

但我们*真正*想证明的是，这种一一对应是详尽无遗的——也就是说，我们想证明不存在`N`不对应于任何三元组的额外排序，并且不存在与 .的任何排序不对应的额外三元组`N`。如果我们能证明这一点，那么我们可以`N`通过以均匀随机方式选择三元组`(0, 1, c)`来以均匀随机方式选择排序。

我们可以通过计算 bin 来完成证明的最后一部分。假设每个可能的三元组都有一个 bin。然后我们将每一个排序都`N`放在 bin 中，以获得`r(N)`给我们的三元组。如果 bin 的数量与 orderings 的数量完全相同，那么我们就有了详尽的一对一对应关系。

从组合学中，我们知道`N`唯一标签的排序数是`N!`。我们也知道 和 的排序`0`数`1`都是`M!`。我们知道可能的序列数`c`是`N choose M`，与 相同`N! / (M! * (N - M)!)`。

这意味着总共有

```
M! * M! * N! / (M! * (N - M)!) 
```

三倍。但是`N = 2 * M`, 所以`N - M = M`, 以上简化为

```
M! * M! * N! / (M! * M!) 
```

那只是`N!`。QED。

### 执行

要以均匀随机的方式选取三元组，我们必须以均匀随机的方式选取三元组的每个元素。对于`0`和，我们在内存`1`中使用简单的[Fisher-Yates 洗牌来实现这一点。](https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)唯一剩下的障碍是生成正确的 0 和 1 序列。

这很重要——**重要！**-- 仅生成具有**相同数量**的零和一的序列。否则，您没有从`Choose(N, M)`具有统一概率的序列中进行选择，并且您的 shuffle 可能会出现偏差。最明显的方法是对包含相等数量的 0 和 1 的序列进行洗牌......但问题的整个前提是我们无法在内存中容纳那么多的 0 和 1！因此，我们需要一种方法来生成零和一的随机序列，这些随机序列受到约束，使得零与一完全相同。

为了以概率一致的方式做到这一点，我们可以模拟从瓮中绘制标记为 0 或 1 的球，无需替换。假设我们从五十`0`个球和五十`1`个球开始。如果我们对瓮中每种球的数量进行计数，就可以保持一个选择其中一个的运行概率，这样最终的结果就不会有偏差。（可疑的类似 Python 的）伪代码将是这样的：

```
def generate_choices(N, M):
    n0 = M
    n1 = N - M
    while n0 + n1 > 0:
        if randrange(0, n0 + n1) < n0:
            yield 0
            n0 -= 1
        else:
            yield 1
            n1 -= 1 
```

由于浮点错误，这可能并不*完美，但它会非常接近完美。*

算法的最后一部分至关重要。详尽地通过上述证明清楚地表明，其他生成 1 和 0 的方法不会给我们适当的洗牌。

### 在真实数据中执行多次合并

还有一些实际问题。上面的论点假设了一个完美平衡的合并，它还假设你的数据只有内存的两倍。这两种假设都不太可能成立。

事实证明，拳头并不是一个大问题，因为上述论点实际上并不需要相同大小的列表。只是如果列表大小不同，计算会稍微复杂一些。如果你通过上面的替换for`M`列表，所有细节都以相同的方式排列。（伪代码的编写方式也适用于任何大于零和小于 的情况。然后将恰好是零和一。）`1``N - M``M``N``M``M - N`

第二个意味着在实践中，可能会有很多很多块以这种方式合并。该过程继承了合并排序的几个属性——特别是，它要求对于`K`块，您必须执行粗略的`K / 2`合并，然后`K / 4`合并，依此类推，直到所有数据都被合并。每批合并将遍历整个数据集，并且将大致有`log2(K)`批，运行时间为`O(N * log(K))`. 一个普通的 Fisher-Yates 洗牌在 中是严格线性的`N`，因此理论上对于非常大的 来说会更快`K`。但是在`K`变得非常非常大之前，惩罚可能比磁盘搜索惩罚要小得多。

因此，这种方法的好处来自智能 IO 管理。而对于 SSD，它甚至可能不值得——寻找惩罚可能不足以证明多次合并的开销是合理的。[Paul Hankin](https://stackoverflow.com/a/50423439/577088)的回答为思考提出的实际问题提供了一些实用技巧。

### 一次合并所有数据

进行多个二进制合并的另一种方法是一次合并所有块——这在理论上是可能的，并且可能会导致一种`O(N)`算法。值的随机数生成算法`c`需要从 到 生成标签，`0`以便`K - 1`最终输出具有每个类别的正确标签数量。（换句话说，如果您将三个块与`10`、`12`和`13`项目合并，那么 的最终值`c`将需要有`0`10 倍、`1`12 倍和`2`13 倍。）

我认为可能有一种`O(N)`时间、`O(1)`空间算法可以做到这一点，如果我能找到或解决一个问题，我会在这里发布。结果将是一个真正的`O(N)`洗牌，就像保罗汉金在他的回答结尾所描述的那样。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-31T14:27:30.517

*   对您的数据库条目进行逻辑分区（例如按字母顺序）
*   根据您创建的分区创建索引
*   构建DAO以基于索引敏感

# ios - 浏览文本，解析链接

> ID：14628078
> 
> 赞同：0
> 
> 时间：2013-01-31T14:25:51.810
> 
> 标签：ios, objective-c, cocoa-touch

我有包含链接的文本（这些是图像链接）我需要解析文本以便构建它，并且当链接被获取时，图像被获取。

例如：

> “我曾经养过一只狐狸**`http://mysite.com/images/fox.jpg`**。我还养过一只小狗**`http://mysite.com/images/dog.jpg`**”

所以它看起来像这样：

> **我曾经养过一只狐狸**

```
----------------------------------
|                                |
|Fox Image From                  |
|http://mysite.com/images/fox.jpg|
|                                |
|                                |
---------------------------------- 
```

> **我还养了一只小狗和一只公鸡**

```
----------------------------------
|                                |
|dog Image From                  |
|http://mysite.com/images/dog.jpg|
|                                |
|                                |
----------------------------------
--------------------------------------
|                                    |
|rooster Image From                  |
|http://mysite.com/images/rooster.jpg|
|                                    |
|                                    |
-------------------------------------- 
```

我可以用什么来实现这个目标？

我已经设置了视图，但现在它只显示我的文本。如何将图像添加到该视图？我该如何解析它们？最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:44:55.300

您可以可行地使用 a`UIWebView`来显示您的文本，并且在找到有效图像链接的任何地方，将其包装在`<img>`标签中。

要解析这些链接，您可以使用 RegEx。您可能需要自己调整正则表达式以适应您的确切规格，但粗略的 jist 将是`http(?:s)?://.+\.(?:jpg|jpeg|png|gif|bmp)`. 这将获取一个以 http 或 https 开头并以 .jpg、.png 等结尾的网络链接......（*顺便说一下未经测试*）

在代码中，您可以将其作为

```
NSString *regExpString = @"http(?:s)?://.+\\.(?:jpg|jpeg|png|gif|bmp)";
NSString *storyStr = @"...";    

NSRegularExpression *storyRegex = [[NSRegularExpression alloc] initWithPattern:regExpString
                                                                      options:NSRegularExpressionCaseInsensitive
                                                                        error:nil];

NSString* webViewStr = [storyRegex stringByReplacingMatchesInString:storyStr options:0 range:NSMakeRange(0, storyStr.length) withTemplate:@"<br\><img src=\"$0\"></img><br\>"]; 
```

然后，`webViewStr`在一个`UIWebView`

```
UIWebView* webView = ...;
[webView loadHTMLString:webViewStr baseURL:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:39:35.860

`img src=`每当您检测到图像链接时（通过使用`stringByReplacingOccurencesOfString: withString:`最有可能），您可以首先将其转换为 HTML，方法是将图像链接包装在标签中。

因此，您将所有链接转换为：

```
http://mysite.com/images/rooster.jpg 
```

到

```
<img src="http://mysite.com/images/rooster.jpg"> 
```

获得 HTML 后，您可以将其加载到`UIWebView`.

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-02T12:24:24.253

我们可以编写html代码并在textview中显示

```
NSString *regExpString = @"http(?:s)?://.+\\.(?:jpg|jpeg|png|gif|bmp)";
NSString *yourStr = @"Test Article with Image and LinksTest Article with Image and Links http://image.gif";
NSRegularExpression *storyRegex = [[NSRegularExpression alloc] initWithPattern:regExpString options:NSRegularExpressionCaseInsensitive error:nil];

NSString* tempStr = [storyRegex stringByReplacingMatchesInString:yourStr options:0 range:NSMakeRange(0, storyStr.length) withTemplate:@"<br\><img src=\"$0\"></img><br\>"];
NSString *htmlStr = [NSString stringWithFormat:@"<html> %@ </html>",tempStr];
[self.txtView setValue:htmlStr forKey:@"contentToHTMLString"]; 
```

# regex - 需要正则表达式从任意 url 中提取 url 路径和查询参数

> ID：14628079
> 
> 赞同：1
> 
> 时间：2013-01-31T14:25:53.217
> 
> 标签：regex, url

考虑下面是输入网址：

```
"http://www.shopme.com/men/shirts.php?name=santosh&surname=kore"; 
```

我需要一个正则表达式，它将向我输出查询路径字符串，例如`men`，`shirts`查询参数值`santosh`，`kore`。

我对正则表达式很陌生，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:24:02.327

试试这个代码

```
var uri = 'http://your.domain/product.aspx?category=4&product_id=2140&query=lcd+tv';
var queryString = {};
uri.replace(
    new RegExp("([^?=&]+)(=([^&]*))?", "g"),
    function($0, $1, $2, $3) { queryString[$1] = $3; }
);
console.log('ID: ' + queryString['product_id']);     // ID: 2140
console.log('Name: ' + queryString['product_name']); // Name: undefined
console.log('Category: ' + queryString['category']); // Category: 4 
```

最初从[这里](http://stevenbenner.com/2010/03/javascript-regex-trick-parse-a-query-string-into-an-object/)

# hibernate - Struts 2 JUnit 插件 + Hibernate

> ID：14628082
> 
> 赞同：2
> 
> 时间：2013-01-31T14:25:55.557
> 
> 标签：hibernate, struts2, junit, struts2-s2hibernate, struts2-junit-plugin

我正在使用 Struts 2 JUnit 插件测试我的 Struts 2 Web 应用程序，遵循[Unit Testing](https://struts.apache.org/getting-started/unit-testing.html)。

在我的 Web 应用程序中，我使用它`fullHibernateCore-plugin-1.4` 来集成 Hibernate 功能。

当我测试一个执行一些 Hibernate 操作的操作时，它会返回`NullPointerException`.

据我了解，由于 Struts 2 JUnit 插件使用假容器来执行操作，因此`HibernateSession`不会被解雇。

我怎么解决这个问题？

这是一个测试示例：

```
public class testRegisterAction extends StrutsTestCase {

    public void testGetActionProxy() throws Exception {
        //set parameters before calling getActionProxy
        request.setParameter("user.name", "TestName");

        ActionProxy proxy = getActionProxy("/userRegister.action");
        assertNotNull(proxy);

        RegistrationAction action = (RegistrationAction) proxy.getAction();
        assertNotNull(action);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:49:52.997

这不是 Hibernate 错误，而是有关 Struts Tiles 插件的错误。我正在使用 Tiles 并且我没有设置`proxy.setExecuteResult(false)`，所以 JUnit 试图执行所有 jsp/tiles 的东西（在操作返回之后）给出错误。在堆栈跟踪中也有 Hibernate 错误，所以我（错误地）认为错误是 Hibernate 的东西。

我解决了设置`proxy.setExecuteResult(false)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:54:15.960

您可以通过升级到站点[full-hibernate-plugin-for-struts2](http://code.google.com/p/full-hibernate-plugin-for-struts2/)上普遍提供的 2.2.2 版本来解决问题。

[使用该版本，您是否使用事务拦截器无法将会话放入堆栈。]

# python - 为什么循环引用会阻止不在循环中的对象的析构函数？

> ID：14628083
> 
> 赞同：0
> 
> 时间：2013-01-31T14:25:57.243
> 
> 标签：python, garbage-collection, destructor

在这个例子中：

```
class Foo(object):
    def __del__(self):
        print "Foo died"

class Bar(object):
    def __init__(self):
        self.foo = Foo()
        self.baz = Baz(self)

class Baz(object):
    def __init__(self, bar):
        self.bar = bar

b = Bar() 
```

我希望尽管 Bar 和 Baz 之间存在循环，但仍会调用 Foo 析构函数，因为 Foo 没有对收集它们的任何 bar 或 baz 的引用，并且在收集 Foo 之前减少引用计数应该是完全安全的。为什么 python 不这样做呢？如果可以防止析构函数被其他类的完全不相关的动作调用，那么析构函数怎么可能有用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:32:58.760

请注意，[当解释器退出时不需要调用](http://docs.python.org/2/reference/datamodel.html#object.__del__)析构函数。

快速修改您的脚本，一切都按您的预期工作：

```
class Foo(object):
    def __del__(self):
        print "Foo died"

class Bar(object):
    def __init__(self):
        self.foo = Foo()
        self.baz = Baz(self)

class Baz(object):
    def __init__(self, bar):
        self.bar = bar

b = Bar()

del b 
```

# web-services - 添加对 ESB 工具包和 BizTalk 的服务引用

> ID：14628085
> 
> 赞同：0
> 
> 时间：2013-01-31T14:26:01.690
> 
> 标签：web-services, iis, biztalk, esb, esb-toolkit-2.0

我已将 BizTalk 与 ESB 工具包一起安装，并且 ESB 服务已根据 IIS 启动并运行。我想从一个简单的 WinForm 应用程序连接到这些服务。

当我尝试在 Visual Studio localhost/ESB.BizTalkOperationsService/Operations.asmx 的项目中添加此服务引用时

我收到以下错误消息：

> 下载“localhost/ESB.BizTalkOperationsService/Operations.asmx/_vti_bin/ListData.svc/$metadata”时出错。请求失败，HTTP 状态为 404：未找到。元数据包含无法解析的引用：“localhost/ESB.BizTalkOperationsService/Operations.asmx”。远程服务器返回意外响应：(405) 方法不允许。远程服务器返回错误：(405) Method Not Allowed。如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。”

我可以浏览到：localhost/ESB.BizTalkOperationsService

但不直接到服务：localhost/ESB.BizTalkOperationsService/Operations.asmx

如何与此 ESB 服务通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:51:12.450

问题是网络服务安装不正确。我设法根据本教程通过卸载和重新安装来解决这个问题

[http://geekswithblogs.net/BizTalkUnleashed/archive/2012/11/07/biztalk-server-2013-beta-on-windows-8-visual-studio-2012.aspx](http://geekswithblogs.net/BizTalkUnleashed/archive/2012/11/07/biztalk-server-2013-beta-on-windows-8-visual-studio-2012.aspx)

# android - 移动视图位置刷新

> ID：14628087
> 
> 赞同：1
> 
> 时间：2013-01-31T14:26:05.227
> 
> 标签：android, image, position, move

首先对不起我的英语。我刚开始用android开发

我的问题是：

我在随机位置创建一个 ImageView，每次触摸图像时，它都会改变它的位置。当您触摸时，您有概率 (%) 在另一个随机位置出现另一个图像。但我的问题是，当第二张图片出现时，第一张图片回到其“创建位置”而不是保持位置。

“炸弹”创建得很好，但是第一张图片回到了创建的位置，而不是现在的位置。

谢谢大家的帮助

我的测试代码示例：

```
public void start(View view) {
    width= 60;
    height= 60;
    layout = (RelativeLayout) findViewById(R.id.rellayout);
    widthLayout = layout.getWidth();
    heightLayout = layout.getHeight();
    r = new Random();
    x = r.nextInt(widthLayout - 60);
    y = r.nextInt(heightLayout - 60);

    imagen = new ImageView(this);
    imagen.setImageResource(R.drawable.led_circle_green);
    RelativeLayout.LayoutParams paramss = new RelativeLayout.LayoutParams(
            60, 60);
    paramss.leftMargin = x;
    paramss.topMargin = y;
    imagen.setAdjustViewBounds(true);
    layout.addView(imagen, paramss);

    Animation aparecer = AnimationUtils
            .loadAnimation(this, R.anim.aparecer);
    imagen.startAnimation(aparecer);

    imagen.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // your code here
            push();
        }
    });

  public void push() {
    createBomb();
    move();
}

public void createBomb() {
    r = new Random();
    int proba = r.nextInt(100);

    if (proba < 50) {   
        x = r.nextInt(widthLayout - 60);
        y = r.nextInt(heightLayout - 60);

        bomb = new ImageView(this);
        bomb.setImageResource(R.drawable.bomb);

        RelativeLayout.LayoutParams paramss = new RelativeLayout.LayoutParams(
                60, 60);
        paramss.leftMargin = x;
        paramss.topMargin = y;
        bomb.setAdjustViewBounds(true);
        layout.addView(bomb, paramss);
    }
}

public void move() {
    r = new Random();
    int proba = r.nextInt(100);

        if (proba < 10) {

                ximg = r.nextInt(widthLayout - width);
                yimg = r.nextInt(heightLayout - height);

            imagen.layout(ximg, yimg, ximg + width, yimg + height);

        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:36:19.490

布局方法不会将持久更改应用于视图状态。为图像视图设置新的布局参数，这将指定它的新位置（不要使用布局方法）。

当您添加新的 ImageView2 时，RelativeLayout 决定重新布局其子项并重置 ImageView1 位置。

[读这个。](https://stackoverflow.com/questions/6535648/how-can-i-dynamically-set-the-position-of-view-in-android)

# ruby-on-rails-3 - rails 3.2.9 捆绑器错误

> ID：14628088
> 
> 赞同：0
> 
> 时间：2013-01-31T14:26:06.907
> 
> 标签：ruby-on-rails-3, bundler

我正在用 rails 做简单的 hello world 项目，但似乎它向我抛出了捆绑器错误。我想看看如何删除我键入后出现的捆绑程序错误

```
 rails new helloproject 
```

控制台中的错误是：

```
 /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/source.rb:271:in `<class:Path>':   uninitialized constant Bundler::GemInstaller (NameError)
   /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/source.rb:270:in `<module:Source>'
   /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/source.rb:10:in `<module:Bundler>'
   /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/source.rb:9:in `<top (required)>'
   /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/dsl.rb:21:in `initialize'
   /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/dsl.rb:6:in `new'
   /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/dsl.rb:6:in `evaluate'
   /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/definition.rb:18:in `build'
   /usr/lib/ruby/vendor_ruby/bundler.rb:136:in `definition'
   /usr/lib/ruby/vendor_ruby/bundler/cli.rb:222:in `install'
   /usr/lib/ruby/vendor_ruby/bundler/vendor/thor/task.rb:22:in `run'
   /usr/lib/ruby/vendor_ruby/bundler/vendor/thor/invocation.rb:118:in `invoke_task'
   /usr/lib/ruby/vendor_ruby/bundler/vendor/thor.rb:246:in `dispatch'
   /usr/lib/ruby/vendor_ruby/bundler/vendor/thor/base.rb:389:in `start'
   /var/lib/gems/1.9.1/gems/bundler-1.2.3/bin/bundle:14:in `block in <main>'
   /var/lib/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
   /var/lib/gems/1.9.1/gems/bundler-1.2.3/bin/bundle:14:in `<main>'
   There was an error in your Gemfile, and Bundler cannot continue. 
```

我想知道如何才能克服此错误并正确捆绑应用程序？

我确实设法运行服务器并运行 hello world 应用程序，但每个新项目似乎都会抛出这个捆绑器错误。

我检查了类似的问题，但这似乎是错误的独特类型。

如何摆脱这些捆绑器安装错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:58:58.840

检查以下步骤，

```
gem install bundler
and after adding:

gem 'bundler' 
```

在第 2 行中`config/boot.rb`（就在 require 之后`'rubygems'`）

如果没有解决，请告诉我。

# css - HTML 电子邮件的安全标记

> ID：14628090
> 
> 赞同：13
> 
> 时间：2013-01-31T14:26:14.623
> 
> 标签：css, html, outlook, html-email

电子邮件客户端的 HTML 显示能力有限。

在 HTML 格式的电子邮件中使用哪些 HTML 标记和 CSS 样式是安全的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-31T14:29:01.927

一般来说，您希望坚持使用 10 多年前的 HTML。

避免尝试链接到外部样式表并避免在 HEAD 中使用样式。

使用内联样式。

使用 HTML 表格进行布局。

行业标准是为您的电子邮件内容坚持 600 像素或更小的宽度。

这是一个很好的指南： http: [//kb.mailchimp.com/article/how-to-code-html-emails](http://kb.mailchimp.com/article/how-to-code-html-emails)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T14:29:41.960

关于这个主题的一些有用的链接详细说明了哪些客户端支持哪些标记和样式：

*   [http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)
*   [http://www.email-standards.org/](http://www.email-standards.org/)

您可以获得帮助构建跨客户端 HTML 电子邮件的地方：

*   [https://www.mailrox.com/](https://www.mailrox.com/)
*   [https://www.getfractal.com/](https://www.getfractal.com/)

# windows - 在 TortoiseGit 中添加命令

> ID：14628098
> 
> 赞同：2
> 
> 时间：2013-01-31T14:26:33.760
> 
> 标签：windows, git, tortoisegit

我刚开始在 Windows 上使用 TortoiseGit（我是 git 新手），`Add`当我右键单击目录或文件时，在上下文菜单中看不到命令​​。据我了解，`add`每次我想要“暂存”本地文件的更新时都应该运行此命令。在这里我没有看到这样的事情，我唯一能做的“类似”的事情就是运行 a `commit`，这显然不是正确的做法。

此外，当我创建一个新文件时，我也想要`add`它，但上下文菜单只建议“添加到忽略列表”。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:37:47.617

您可以通过右键单击将文件或文件夹添加到 git 存储库，然后在“TortoiseGit”-子菜单中选择“Add..”（应该是第一个菜单项，就在“添加到忽略列表”-子菜单的正上方） .

无论如何...通过 TortoiseGit 暂存文件或文件夹的另一种方法是右键单击存储库 > TortoiseGit > 检查修改 > 从未版本化文件列表中选择要暂存的文件/文件夹 > 右键单击​​ > 添加。

# ios - 如何在 iOS 中的 UITableViewCell 中设置 MediaItemArtwork 图像填充？

> ID：14628101
> 
> 赞同：2
> 
> 时间：2013-01-31T14:26:40.203
> 
> 标签：ios, cocoa-touch, uitableview, mpmediaitem, artwork

我正在尝试使用以下代码将`MPMediaItemArtwork`Image 输入到单元格的 ImageView 中。`UITableView's`

```
MPMediaItemArtwork *artwork = [[[self.arrayOfAlbums objectAtIndex:indexPath.row] representativeItem]valueForProperty:MPMediaItemPropertyArtwork];
    UIImage *artworkImage = [artwork imageWithSize: cell.imageView.bounds.size];

if (artworkImage)
    {
        cell.imageView.image = artworkImage;

    }

    else
    {
        cell.imageView.image = [UIImage imageNamed: @"noArtwork.png"];
    } 
```

`UITableView's`当我在单元格中插入艺术品图像时没关系`ImageView`。

但是当我的艺术品图像太小或太大时，就像下图一样。没有完全填满cell的ImageView。

![在此处输入图像描述](../Images/095072ee6f81a6ebd00a904423a52edd.png)

你看到了吗？`Stretch`我想像iOS 音乐应用一样设置填充

这是设置完全填充的内置应用程序艺术品图像`Stretch`

![在此处输入图像描述](../Images/3c50b5f3b10e1ff307b53e5250b1b929.png)

我想那样做。

所以我用`cell.imageView.contentMode = UIViewContentModeScaleAspectFill;`了但是没有效果。

那么我该怎么做呢？谢谢你的工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:16:16.213

试试这个来计算一个新的和合适的图像；调整`newRect`到单元格的矩形。

```
// scale and center the image

CGSize sourceImageSize = [artworkImage size];

// The rectangle of the new image
CGRect newRect;
newRect = CGRectMake(0, 0, 40, 33);

// Figure out a scaling ratio to make sure we maintain the same aspect ratio
float ratio = MAX(newRect.size.width / sourceImageSize.width, newRect.size.height / sourceImageSize.height);

UIGraphicsBeginImageContextWithOptions(newRect.size, NO, 1.0);

// Center the image in the thumbnail rectangle
CGRect projectRect;
projectRect.size.width = ratio * sourceImageSize.width;
projectRect.size.height = ratio * sourceImageSize.height;
projectRect.origin.x = (newRect.size.width - projectRect.size.width) / 2.0;
projectRect.origin.y = (newRect.size.height - projectRect.size.height) / 2.0;

[sourceImage drawInRect:projectRect];
UIImage *sizedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

cell.imageView.image = sizedImage; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:19:33.440

线

```
UIImage *artworkImage = [artwork imageWithSize: cell.imageView.bounds.size]; 
```

创建具有单元格大小的图像。所以，它在这条线上被缩放，图像不会比单元格大，因此它不会在之后缩放。

我会将图像保留为原始大小或单元格大小的 2 倍，然后将比例放大到`contentMode`.

```
CGSize newSize = CGSizeMake(artwork.bounds.size.width, artwork.bounds.size.height)
UIImage *artworkImage = [artwork imageWithSize: newSize]; 
```

# javascript - 如何做这种确认对话框？

> ID：14628107
> 
> 赞同：1
> 
> 时间：2013-01-31T14:26:52.203
> 
> 标签：javascript, asp.net, confirmation

我正在创建一个网站，我想做这种确认对话框。我该怎么做？如果用户在处理我的网站时会退出我的网站..

![在此处输入图像描述](../Images/fe0b681f0a7502fd98b80d856e4e5b30.png)

我在 facebook 中发现了这种确认对话框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:29:22.433

你需要处理`beforeunload`事件。请注意，它在不同浏览器中的工作方式不同。

在此处查看示例实现：[https ://gist.github.com/4125388](https://gist.github.com/4125388)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:29:29.453

```
 <form name=myform>
     <input type=button value="Try it now" onClick="if(confirm('Format the hard disk?')) alert('You are very brave!');else alert('A wise decision!')">
 </form> 
```

# c++ - Opencv 程序以代码 -1073741819 退出

> ID：14628108
> 
> 赞同：1
> 
> 时间：2013-01-31T14:26:57.037
> 
> 标签：c++, debugging, opencv

我正在使用 opencv 和 QT 进行视频处理项目。每一段代码都运行完美，但是当我关闭应用程序的 GUI 时，它在 Windows 7 中显示停止工作错误：

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: QtTracker3.exe
  Application Version:  0.0.0.0
  Application Timestamp:    510a7ebe
  Fault Module Name:    ntdll.dll
  Fault Module Version: 6.1.7600.16695
  Fault Module Timestamp:   4cc7ab44
  Exception Code:   c0000005
  Exception Offset: 00052016
  OS Version:   6.1.7600.2.3.0.256.1
  Locale ID:    1033
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

**调试器给出：**

```
Debugging starts
HEAP[QtTracker3.exe]: 
Heap block at 0BF96368 modified at 0BF96380 past requested size of 10
HEAP[QtTracker3.exe]: 
Invalid address specified to RtlFreeHeap( 00020000, 0BF96370 )
Debugging has finished 
```

我无法弄清楚为什么会发生这种情况......:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:04:04.603

c0000005 是一个访问冲突错误，一个常见的原因是您可能会尝试通过无效指针访问已经解除分配的内容（基于它在应用程序退出时发生的信息）。

Qt 的一个常见错误是在堆栈上分配子小部件，如果父小部件首先被销毁，它会在子地址上调用*delete* （未在堆上分配的地址也可能导致错误），但基本上你必须调试您的程序才能找到错误。

# iphone - 我可以在 Pinterest 上分享照片吗？

> ID：14628109
> 
> 赞同：1
> 
> 时间：2013-01-31T14:27:00.813
> 
> 标签：iphone, ios, objective-c, xcode, pinterest

我可以使用 API 在 Pinterest 上分享我的照片吗？我正在 iOS 中开发一个应用程序，并希望将我的照片从我的应用程序分享到 Pinterest.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-01T10:04:52.267

试试官方 SDK [https://developers.pinterest.com/ios/](https://developers.pinterest.com/ios/) 你可以使用 CocoaPods 添加它：

```
-> Pinterest-iOS (2.3)
   The iOS Pinterest SDK.
   pod 'Pinterest-iOS', '~> 2.3'
   - Homepage: http://developers.pinterest.com/ios/
   - Source:   https://pinterest-ota-builds.s3.amazonaws.com/PinItSDKiOS.zip
   - Versions: 2.3 [master repo] 
```

# javascript - 如何在没有nodejs的情况下使用javascript连接到rabbitmq

> ID：14628115
> 
> 赞同：14
> 
> 时间：2013-01-31T14:27:12.927
> 
> 标签：javascript, titanium, rabbitmq, appcelerator

我正在使用 Titanium appcelerator 实现一个移动应用程序。

在这个应用程序中，我需要使用 RabbitMQ 实现聊天。我看到了很多关于如何使用节点 js 连接到 RabbitMQ 服务器的示例，但在我的情况下它不适用并且我找不到任何 JavaScript 独立客户端。

我想知道是否有办法在没有客户端的情况下连接到 RabbitMQ，或者是否有任何 JavaScript 独立客户端？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T05:16:06.763

是您正在搜索的[RabbitMQ Web STOMP吗？](http://www.rabbitmq.com/blog/2012/05/14/introducing-rabbitmq-web-stomp/)使用 SockJS，即使在旧浏览器中也能正常工作，并且不需要 Node.js 或您编写的任何 Web 服务器端代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-30T18:39:25.677

你也可以使用`Web MQTT plugin`RabbitMQ 和 HTML5 WebSockets。此处以示例提供更多详细信息 [https://www.rabbitmq.com/web-mqtt.html](https://www.rabbitmq.com/web-mqtt.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-01T09:17:44.413

您可以在 html 的 script 标签中使用 Socket IO，只需在 main app.js 中放置一个侦听器以侦听 rabbit mq 消费，然后从那里将消息发送到您想要的 html 脚本。（不要忘记在你的 html 文件中放置一个监听器来监听 app.js 发出的内容）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-23T07:57:13.220

我在 React js 中实现 Rabbit MQ 时也遇到了困难。

但是我的一位朋友在我们的 Rabbit Mq 服务器中**启用/安装了 mqtt 和 websocket**插件。

所以现在我可以使用简单的 mqtt 或 websocket 将我们的 React js 应用程序与 Rabbit MQ 通信。

我认为你可以在 React Native 中做同样的事情（通过使用简单的 mqtt 或 websocket）。

# iphone - 为什么我的 ImageView 仅在单元格突出显示时可见？

> ID：14628118
> 
> 赞同：0
> 
> 时间：2013-01-31T14:27:27.297
> 
> 标签：iphone, interface-builder

我的 TableView 有一个自定义单元格，上面有一个 ImageView。

![在此处输入图像描述](../Images/67b4b559866674266cb1ce6e2421200e.png)

为什么 ImageView 仅在单元格突出显示时可见？

![在此处输入图像描述](../Images/f1374dced504f211e2f608e8087b2db3.png)

细胞是这样创建的：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    Site *site = [self.dataController objectInListAtIndex:indexPath.row];

    [[cell textLabel] setText:site.description];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:43:23.693

签出：[自定义 UITableViewCell (IB) 仅显示在选定状态](https://stackoverflow.com/questions/8374983/custom-uitableviewcell-ib-only-shows-in-selected-state)

它的快速概要“填充标准 UITableViewCell.textLabel.text 似乎覆盖了 PrototypeCells”。所以看起来你必须创建并添加一个不同的文本标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:35:40.203

也许您`UIImageView`是突出显示的背景视图的子视图，仅在选择单元格时可见？

# javascript - JavaScript 作用域 - 将回调传递给已定义的函数

> ID：14628124
> 
> 赞同：1
> 
> 时间：2013-01-31T14:27:41.247
> 
> 标签：javascript, callback, scoping

标题有点奇怪，不太清楚用一句话来解释它的最佳方式……

目前有一个具有3个功能的对象；func、funcSuccess 和 funcFailure。func 包含一个jQuery ajax 请求，this.funcSuccess 作为成功回调，funcError 作为错误回调。func 被传递了一个回调，以便将任何成功值传递回，但是这个回调需要在 funcSuccess 代码中执行。

这是代码：

```
var Obj =

  { func: function (callback) {
      $.ajax(
        { type: 'POST'
        , url: '/func'
        , success: this.funcSuccess
        , error: this.funcError
        }
      )
    }

  , funcSuccess: function (res) {
      // THIS IS WHERE CALLBACK IS NEEDED
      callback(res.thing)
    }

  , funcError: function (res) {
      debug(res)
    }

  } 
```

我想知道是否有一种更整洁的方法来做到这一点，而不是：

```
var that = this
$.ajax(
  { type: 'POST'
  , url: '/func'
  , success: function (res) {
      that.funcSuccess(res)
    }
  , error: this.funcError
  }
) 
```

很确定我错过了一些明显的东西，只是今天不完全......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:30:44.843

将回调显式存储在对象中怎么样，这样您就不必担心闭包范围：

```
var Obj =

  { func: function (callback) {
      //this.callback = callback;
      $.ajax(
        { type: 'POST'
        , url: '/func'
        , success: $.proxy(this.funcSuccess, this, callback)
        , error: $.proxy(this.funcError, this)
        }
      )
    }

  , funcSuccess: function (callback, res) {
      callback(res.thing)
    }

  , funcError: function (res) {
      debug(res)
    }

  } 
```

编辑：我忘记将回调绑定到`this`. 在 JQuery 中，您可以使用 来执行此操作`$.proxy`，请参阅上面的更改。

编辑：进一步整洁（jQuery 1.6 允许这样做）将回调作为参数传递给`$.proxy`，因此无需将其附加到当前对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:54:42.453

您需要将 传递给`callback`，`funcSucess`否则它将无权访问它。这里通过使用闭包：

```
var Obj = {
    func: function (callback) {
        return $.ajax({
            type: 'POST', 
            url: '/func',
            success: this.makeFuncSuccess(callback),
            error: this.funcError
        });
    }, makeFuncSuccess(callback) {
        return function funcSuccess (res) {
            callback(res.thing);
        };
    },
    funcError: function (res) {
       debug(res)
    }
}; 
```

# magento - Magento中的Sage Pay付款失败

> ID：14628128
> 
> 赞同：0
> 
> 时间：2013-01-31T14:27:45.373
> 
> 标签：magento, opayo

我正在建立一个 megento 商店，但在测试时使用 ebizmarts Sage Pay 模块通过卡付款时出现以下错误：

> 付款失败，请重新加载结帐页面并重试。您的卡尚未扣款。

有谁知道这个问题的解决方案？

问候，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:39:22.687

这里有一个免费插件的支持论坛[http://ebizmarts.com/forums](http://ebizmarts.com/forums)如果您使用的是 PRO 模块，您可以使用这里的联系表[http://ebizmarts.com/contact-us](http://ebizmarts.com/contact-us)

此外，您提到的问题在此处的 Wiki 上进行了描述[http://wiki.ebizmarts.com/sage-pay-common-problems](http://wiki.ebizmarts.com/sage-pay-common-problems)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-01T14:16:20.517

**固定的**

据我所知，无论出于何种原因，Magento 正在从 theme/default/checkout/onepage/review 文件夹中加载“info.phtml”文件，而不是 sagepaysuite 文件夹中的文件。

我将上面的代码复制到默认 info.html 文件的相关位置，它现在可以工作了。

登台服务器正在正确加载 sagepaysuite/checkout/review/info.phtml 文件，因此它正在工作。

# svg - 如何在这个 d3.js 视觉对象中用一条线连接两条弧线

> ID：14628133
> 
> 赞同：0
> 
> 时间：2013-01-31T14:27:57.350
> 
> 标签：svg, d3.js, data-visualization

我在网上看到了一张信息图，我想用它来挑战学习 d3.js。原始信息图在这里：

[http://www.shah3d.com/wp-content/uploads/2012/11/IG-WWF-Dehahs.png](http://www.shah3d.com/wp-content/uploads/2012/11/IG-WWF-Dehahs.png)

我在这里开始了： [http ://www.tips-for-excel.com/d3test/arc/arc%20test.html](http://www.tips-for-excel.com/d3test/arc/arc%20test.html)

你会注意到原版的线条很好，将底部的弧线与顶部的弧线连接起来。到目前为止，我只能痛苦地考虑放置很多圆圈来实现这种效果，因此我的视觉中出现了奇怪的红色圆圈。人们最好的方法是复制原始图形吗？哪个元素会使这项任务更容易？弧线？线？我想我将不得不操纵我的数据，以便线条到达它们应该去的地方。

如果需要，很高兴提供更多信息，并感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:06:16.383

[d3 的画廊](https://github.com/mbostock/d3/wiki/Gallery "画廊")中有一些现有的图表可供使用：

[http://bl.ocks.org/4062006](http://bl.ocks.org/4062006)

[http://bost.ocks.org/mike/uberdata/](http://bost.ocks.org/mike/uberdata/)

两者都使用和弦的长度作为笔划的宽度（最初），但你可以修改它，当然。

在图形上，您可以使用[arcs](http://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands "弧线")或带有夹子的完整圆圈。至于做到这一点的“最佳”方式，这可能来自于图形需要如何表现的“要求”（动画、相对弧线放置等）。

就个人而言，我会选择路径弧。

# kendo-ui - Kendo UI Mobile：拉动刷新 - 未显示列表

> ID：14628137
> 
> 赞同：0
> 
> 时间：2013-01-31T14:28:08.640
> 
> 标签：kendo-ui

动态数据未出现在列表中。数据以 jsonp 格式动态获取。在 Chrome 开发人员工具中签入时，我能够看到响应。请在下面找到代码。有人可以在这里帮助我吗？

```
<!DOCTYPE html>
<html>
<head>
<title>Pull to refresh</title>
<script src="../../lib/jquery.min.js"></script>
<script src="../../lib/kendo.mobile.min.js"></script>
<link href="../../lib/styles/kendo.mobile.all.min.css" rel="stylesheet" />
<link href="../../lib/styles/kendo.common.min.css" rel="stylesheet" /> 
```

```
<div data-role="view" data-init="mobileListViewPullToRefresh" data-title="Pull to refresh">
    <header data-role="header">
        <div data-role="navbar">
            <span data-role="view-title"></span>
            <a data-align="right" data-role="button" class="nav-button" href="#index">Index</a>
        </div>
    </header>

    <ul id="pull-to-refresh-listview"></ul>
</div>

<script id="pull-to-refresh-template" type="text/x-kendo-template">
    #= Title #
</script>

<script>
function mobileListViewPullToRefresh() {
        var dataSource = new kendo.data.DataSource({
            serverPaging: true,
            pageSize: 1,
            transport: {
                read: {
                    url: "http://localhost/MvcMovieApp/Mobile/RestResponse", // the remove service url
                    dataType: "jsonp" // JSONP (JSON with padding) is required for cross-domain AJAX
                },
                parameterMap: function(options) {
                    alert(kendo.stringify(options));
                    return {
                        q: "javascript",
                        page: options.page,
                        rpp: options.pageSize
                        since_id: options.since_id //additional parameters sent to the remote service
                    };
                }
            },
            schema: { 
                data: "movies" // the data which the data source will be bound to is in the "results" field
            }
        });

    alert("Before kendoMobileListView");

    $("#pull-to-refresh-listview").kendoMobileListView({
        dataSource: dataSource ,
        pullToRefresh: function(){ alert("dataSource"); return true },
        appendOnRefresh: true,
        template: $("#pull-to-refresh-template").text(),
        endlessScroll: true,
        pullParameters: function(item) {
            return {
                since_id: item.id_str,
                page: 1
            };
        }
    });
}
</script>
<script>
 window.kendoMobileApplication = new kendo.mobile.Application(document.body);
</script>
</body>
</html> 
```

我收到的 JSONP 是 : ({"movies":[{"ID":1,"Title":"Movie 1","ReleaseDate":"/Date(1355250600000)/","Genre":"Comedy" ,"Price":10},{"ID":2,"Title":"Movie 2","ReleaseDate":"/Date(1355250600000)/","Genre":"Thriller","Price":10 }]})

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T08:14:41.437

返回的 JSONP 中必须有回调函数名。我在这里看到的输出没有任何函数名。您需要更改服务器端代码。

# javascript - 谷歌分析在子域之间移动时“失去”用户

> ID：14628138
> 
> 赞同：0
> 
> 时间：2013-01-31T14:28:11.427
> 
> 标签：javascript, google-analytics, analytics, google-analytics-api

我在使用谷歌分析时遇到了一些问题。我们有一个网站，用户登陆登录页面，填写个人信息（姓名、地址、电子邮件等）。该站点位于`http://link.<domain>`提交表单后，用户将被引导至一个安全站点，`https://ssl.<domain>`他/她在此填写信用卡信息。

问题是，谷歌分析“丢失”了客户会话的轨迹。统计数据显示，ssl.(domain) 上的站点的引用者是链接上的站点。而不是将用户引导到登录页面的实际推荐人 - 这当然会对我们的目标页面造成严重破坏，该页面也位于`http://link.<domain>`.

我的跟踪代码是

```
 _gaq.push(
    ['_setAccount', "UA-XXXXXXXX-XX"],
    ['_setDomainName', '<domain>'],
    ['_trackPageview']
); 
```

我已经设置

```
['_setDomainName', '(domain)'] 
```

但这似乎没有帮助。我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:23:29.237

如果域相同并且唯一的区别是子域，请确保将`_setDomainName`值设置为根域名（不带点前缀）。

例子：

链接.yoursite.com

ssl.yoursite.com

对于这两者，您应该在页面上有以下内容：

`['_setDomainName', 'yoursite.com']`

如果根域不同，导航到新的根域将导致会话中断。这是因为 GA 使用第一方 cookie 跟踪，并且 domain1.com 上的 cookie 无法从 domain2.com 读取。为了克服这个问题，您还需要添加`_setAllowLinker`页面代码，并在访问者单击 ssl 域的链接时弹出其他代码，以确保 GA cookie 信息通过以下方式传递到新域网址。这是[GA 关于跨域跟踪的参考以](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)获取更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:28:19.817

除了 Crayon 所说的之外，我认为您还需要使用[此处](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiSearchEngines#_gat.GA_Tracker_._addIgnoredRef)`_addIgnoredRef()`描述的 api 。完成此操作后，您应该清除 cookie，然后重试。如果您有我可以测试的实际链接，我可能会更好地帮助您。

在你的情况下，我认为你需要使用：

```
_gaq.push(['_addIgnoredRef', 'link.<domain>']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T23:12:27.320

听起来你让它工作了，但看看：[https](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite) ://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite 。它似乎有你需要的额外参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-29T13:13:57.757

```
_gaq.push(['_setAllowLinker', true]); 
```

是你所缺少的。这使得 Analytics 可以将子域甚至不同域作为一个实体一起跟踪。

这在跟踪跨不同域的电子商务交易时特别有趣（例如，当您的购物篮或结帐由第三方处理时）。

要查找和研究的词是“跨域跟踪”。

请参阅[此处](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite)了解更多信息。

# c++ - 获取文件大小信息的更快方法 C++

> ID：14628141
> 
> 赞同：3
> 
> 时间：2013-01-31T14:28:20.203
> 
> 标签：c++, optimization, windows-ce

我有一个函数来获取文件的 FileSize。我在 WinCE 上运行它。这是我当前的代码，看起来特别慢

```
int Directory::GetFileSize(const std::string &filepath)
{
    int filesize = -1;

#ifdef linux
    struct stat fileStats;
    if(stat(filepath.c_str(), &fileStats) != -1)
      filesize = fileStats.st_size;
#else
    std::wstring widePath;
    Unicode::AnsiToUnicode(widePath, filepath);

    HANDLE hFile = CreateFile(widePath.c_str(), 0, FILE_SHARE_READ | FILE_SHARE_WRITE, 0, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0);
    if (hFile > 0)
    {
      filesize = ::GetFileSize( hFile, NULL); 
    }

    CloseHandle(hFile);
#endif

    return filesize;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T15:27:40.363

至少对于 Windows，我想我会使用这样的东西：

```
__int64 Directory::GetFileSize(std::wstring const &path) { 

    WIN32_FIND_DATAW data;
    HANDLE h = FindFirstFileW(path.c_str(), &data);
    if (h == INVALID_HANDLE_VALUE)
        return -1;

    FindClose(h);

    return data.nFileSizeLow | (__int64)data.nFileSizeHigh << 32;
} 
```

如果您使用的编译器支持它，您可能想要使用`long long`而不是`__int64`. 您可能*不想*使用`int`它，因为它仅适用于最大 2 GB 的文件，而大于 2 GB 的文件现在很常见（尽管在 WinCE 设备上可能不那么常见）。

不过，我*希望*这比大多数其他方法更快。它根本不需要打开文件本身，只需找到文件的目录条目（或者，在 NTFS 之类的情况下，它的主文件表条目）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:59:32.953

您的解决方案查询文件大小已经相当快了。

在 Windows 下，至少对于 NTFS 和 FAT，文件系统驱动程序会将文件大小保存在缓存中，因此查询起来相当快。涉及的最耗时的工作是从用户模式切换到内核模式，而不是文件系统驱动程序的处理。

如果你想让它更快，你必须在用户模式下使用你自己的缓存策略，例如一个特殊的哈希表，以避免从用户模式切换到内核模式。但我不建议您这样做，因为您将获得很少的性能。

PS：你最好避免`Unicode::AnsiToUnicode(widePath, filepath);`在你的函数体中声明。此功能相当耗时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T16:11:02.010

只是一个想法（我没有测试过），但我希望 `GetFileAttributesEx`在系统级别上最快。它避免了必须打开文件，从逻辑上讲，我希望它比 快`FindFirstFile`，因为它不需要维护任何信息来继续搜索。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-31T14:40:36.360

你可以自己动手，但我不明白为什么你的方法很慢：

```
int Get_Size( string path )
{
// #include <fstream>
FILE *pFile = NULL;

// get the file stream
fopen_s( &pFile, path.c_str(), "rb" );

// set the file pointer to end of file
fseek( pFile, 0, SEEK_END );

// get the file size
int Size = ftell( pFile );

// return the file pointer to begin of file if you want to read it
// rewind( pFile );

// close stream and release buffer
fclose( pFile );

return Size;
} 
```

# actionscript-3 - 设置 flex 应用程序背景可见性

> ID：14628142
> 
> 赞同：0
> 
> 时间：2013-01-31T14:28:22.687
> 
> 标签：actionscript-3, flash, apache-flex, stage3d, away3d

我对 Flex 很陌生，但我正在使用 Away3d 将 Web 应用程序移植到其中。我有点进退两难：

**用最简单的话来说：**

我需要将应用程序背景设置为可见 = false，而不仅仅是 alpha = 0，因为它会阻止需要在其后面的项目的鼠标事件。

**我实际上正在尝试做的事情：**

如果我将 View3D 添加到 Stage，它的索引仅与显示列表和事件（鼠标等）相关，它总是会呈现在其他所有内容之后 - 所以我必须在 Application 标签中设置 backgroundAlpha="0" 才能看到它。然而，这给我留下了两个选择，这两种选择都不理想：

在 childIndex(0) 处添加 View3D，绑定到 View3D 的鼠标事件被不可见（但仍然存在）的应用程序后台拦截。但是，在最高索引处添加到舞台将阻止 flex 组件工作，因为它们在技术上位于视图下方，即使它们看起来更高。

我需要我的 View3D 来响应鼠标事件，并且我需要覆盖 Flex 组件。我宁愿不使用隐藏的精灵来拦截/重新调度事件或其他东西，有没有办法简单地设置应用程序背景可见性？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:17:09.253

在黑暗中拍摄，但您是否尝试在顶级应用程序上设置 alpha="0" 和 mouseChildren="false"？

```
<s:Application mouseChildren="false" alpha="0">
    <!-- content goes here -->
</s:Application> 
```

如果这不起作用，您还可以尝试使用不存在的掩码屏蔽应用程序。

快速、未经测试的示例：

```
<s:Application mask="{ this.maskShape }">
    <s:Group id="maskShape">
        <!-- Never add anything to this Group -->
    </s:Group>
</s:Application> 
```

# css - 表格背景图像在 Firefox 中有效，但在 Chrome 中存在错误

> ID：14628143
> 
> 赞同：1
> 
> 时间：2013-01-31T14:28:25.910
> 
> 标签：css

想要现场观看的人的网站： [点击这里](http://www.sobafire.com/__v2/?page=browsebuilds)

虫图在这里：[虫图（JPG）](http://i.imgur.com/CWPJieX.jpg)

基本上，我做了一张桌子。顶部的前 3 行包含背景图像，高度设置为 90。其他行高度设置为 50，不包含背景图像。

然而，虽然我将背景图片应用到了 TR，但 Chrome 仍然在每个 TD 上应用背景图片。看图，你就明白了。

我已经尝试了几件事，比如将图像移动到不同的类，或者给它额外的属性，比如不重复。

可能是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:51:31.040

您确定您没有为 CSS 中的所有类编写相同的背景图像样式吗？

尝试为每个文件的第一个创建一个单独的类，它应该可以正常工作。

此外，作为替代方案，您可以尝试将图像设置为背景并将其置于 position:absolute 的背景，然后更改 z-index，尽管我不建议这样做。

PD：我无法检查网站上的背景颜色代码，因为它不存在。（我的意思是这张桌子与图片中的不同）。

# javascript - 单击锚点时下推页面

> ID：14628144
> 
> 赞同：2
> 
> 时间：2013-01-31T14:28:27.987
> 
> 标签：javascript, jquery, html, css

我有一个包含一些博客项目的页面。这些项目前面有锚点，有时我直接使用`#my-item`.

问题是，我在顶部有一个固定菜单，该菜单现在覆盖了标题，因为锚链接紧贴我的浏览器顶部。

是否可以将其向下推（例如 100 像素）？我可以想到一种 jQuery 方式，`click()`但正如我所说，有时我来自另一个页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:49:40.093

您可以通过向目标添加负上边距来更改锚点跳跃的行为方式，并使用相同数量的上边距进行补偿。浏览器会在点击时跳转到负边距的位置，但目标仍然有正确的间距。

这是一个[示例 jsfiddle](http://jsfiddle.net/Bs4ek/)

CSS

```
article {
    display: block;
    margin-top: -50px;
    padding-top: 50px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-10T11:22:26.950

这是一个旧线程，但由于它仍在搜索结果中弹出，因此应注意当前 CSS 提供了`scroll-margin-top`用于该目的的属性，该属性自 2021 年起得到广泛支持。您可以简单地使用

```
#my-item { scroll-margin-top: 100px; } 
```

在不影响边距和填充的情况下将项目向下推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:30:53.393

为什么不给元素添加一些填充？

```
<h3 style="padding-top: 100px;">The subheading</h3> 
```

浏览器将向下滚动，直到视口与元素的顶部边缘相遇，并且元素在内容和边框之间有 100px 的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T14:31:50.413

最简单的方法是在内容顶部添加边距或填充。考虑这个 HTML：

```
<a name="post1234"></a>
<article>
  Lorem ipsum...
</article> 
```

当哈希指向`#post1234`的链接将被定位在屏幕的顶部。所以只需在文章顶部添加填充/边距：

```
article { padding-top: 100px; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T14:35:11.623

解决方案：

为您添加填充`a`

```
a.anchor{
    position: relative;
    padding-top: 100px;
    width:1px;
    display: block;
} 
```

谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-15T00:53:31.613

如果有人想知道如何下推页面上所有锚点的跳转目标，这里是：

```
/* all anchors and all elements with the anchor class */
a, .anchor { margin-top: -2em; padding-top: 2em; }

/* all anchors with an href attribute */
a[href] { margin-top:0; padding-top: 0; } 
```

您也可以使用`margin-top:unset;`而不是`margin-top:0;`

如果你真的感觉很危险，你可能会使用它`*[id]`并将其应用于所有带有 id 的东西。但我可能不会这样做。我不知道。试一试。在野外散步。

这里的其他答案似乎包括显示设置，但我看不出这有什么必要或有帮助。

# sql - Access 中的日期范围处理逻辑

> ID：14628147
> 
> 赞同：1
> 
> 时间：2013-01-31T14:28:44.320
> 
> 标签：sql, date, ms-access, vba, date-range

我有一个奇怪的逻辑问题，我似乎无法解决（也许是因为研究太久了）。

在我工作的地方，我们有一个非常古老的软件，我们需要使用它来跟踪我们使用的设备的状态。该软件提供很少的功能来操纵这些状态以尝试提供对停机时间的良好分析。我一直在使用 Access 中的数据库应用程序（因为它是他们提供给我的唯一工具），以将旧系统中的状态数据导入更易于操作的格式。

从旧程序中吐出状态数据的方式相当简单：

设备名称 状态 开始日期时间 结束日期时间

阅读该文本并将其插入 Access 中的表中很容易。我遇到的问题来自于试图找出一台设备在不同日期范围内处于不同状态的时间。

开始/结束日期/时间可以是任何时间长度。查找哪些行包含日期很困难。我一直在 SQL 中使用 BETWEEN 语句来尝试找到它们，它们在大多数情况下效果很好：

```
SELECT * FROM Statuses WHERE 
    (StartDateTime BETWEEN [StartDT] AND [EndDT]) 
OR 
    (EndDateTime BETWEEN [StartDT] AND [EndDT]) 
```

真正的问题是当 StartDateTime 在 StartDT 之前而 EndDateTime 在 EndDT 之后（即我正在寻找的整个范围都在这个状态的开始/结束日期之内）。它根本找不到它，这是有道理的。

我似乎无法想出一个优雅的解决方案。我需要能够选择包含包含或包含在提供的日期范围内的状态的所有行。我通常不会为了这么简单的问题来这里，但我的大脑和谷歌让我失望了。

一点样本数据：

```
EQUIP STATUS STARTDATETIME    ENDDATETIME
A123  OPER   01/30/2013 21:30 12/31/1999 00:00
A123  DFM    01/26/2013 10:42 01/30/2013 21:29
A123  OPER   01/01/2013 00:00 01/26/2013 10:41
B123  OPER   01/01/2013 00:00 12/31/1999 00:00
C123  DFU    01/29/2013 12:31 12/31/1999 00:00
C123  OPER   01/01/2013 00:00 01/29/2013 12:30 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:09:25.573

在以下情况下会发生任何类型的预订勾结：

```
RequestStartDate <= EndDate 
and 
RequestEndDate >= StartDate 
```

以上也将返回重叠。因此，如果我查询今天 + 明天，并且范围从年初到年底，则查询将包含在该范围内。

例如：

```
 Select * from tblEQUIP 
 where 
   #01/31/2013# <= ENDDATETIME
   and
   #02/01/2013# >= StartDateTime 
```

此时您可以“处理”每条记录。您可能必须使用类似的东西：

```
Do while RecordDate.eof = false

   For datePtr = RequestStartDateTime to RequestendDateTime
      If datePtr >= RecordData!StartDateTime and DatePtr <= RecordData!EndDateTime then
         DaysTotal = DaysTotal  + 1
      End if
   Next DatePtr
   recordData.Movenext
loop 
```

以上是航空代码，但显示了您首先需要获取重叠记录的基本处理循环，然后是一个处理循环，用于为您的日期范围内的每个记录添加天数/时间，这些记录确实属于给定的日期范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:20:01.457

有趣的问题！很抱歉现在没有太多时间来阐述，但我建议为此探索该`Partition`功能，或和/或使用日期作为列标题进行交叉表查询。有关[msoffice 网站](http://office.microsoft.com/en-us/access-help/partition-function-HA001228892.aspx)和[此处](http://bytes.com/topic/access/insights/708740-partition-function)的更多信息。

# java - Oracle 和 JDBC 计算事务期间发生的执行次数及其性能

> ID：14628148
> 
> 赞同：0
> 
> 时间：2013-01-31T14:28:48.237
> 
> 标签：java, sql, performance, oracle, jdbc

我有以下代码：

```
void updateRecords(long[] ids, Timestamp[] dates, Connection connection
{
   PreparedStatement statement = connection.prepareStatement(
                             "Update Foo set date = ? where id = ?");
   for(int i =0; i < ids.length;i++)
   {
        statement.setTimestamp(1,dates[i]);
        statement.setLong(2,ids[i]);  
        statement.addBatch();  
        if(i %25000 == 0)
        {
            statement.executeBatch();
            statement.clearBatch();  
        }
   }
   statement.executeBatch();
} 
```

这个性能很糟糕，100 万次更新需要 2 个小时以上。所以在我的多部分问题中：

1) 在 Oracle 上执行了多少条语句？
2) 如何提高在 Oracle 上执行的语句数量，以减少执行 100 万次更新所需的时间？

这是 Oracle 10g 和 Java 6。

我想这会执行 N 个语句，其中 N 是`ids`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:43:03.927

1) 是的，oracle 将执行与 id 一样多的语句。

2）对于这样的事情，最好的办法是在一次调用中将日期发送到数据库，然后使用存储过程进行更新。例如，您可以将 ids 和 Timestamps 作为数组发送，然后在存储过程中重新创建您的逻辑。此外，根据您的数据库结构和配置，在存储过程中每隔一段时间运行一次提交可以提高性能（假设您的操作不必是原子的）。

[你可以在这里](http://www.anilsaha.com/2009/05/passing-oraclesqlarray-to-stored.html)看到一个例子。只需更改类型以符合您的要求，而不是进行插入，而是在存储过程中进行更新：

```
forall i in 1.. example.count 
  update Foo set date =  treat(example(i) as T_TYPE).DATE where id = treat(example(i) as T_TYPE).ID;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:05:17.243

似乎使用标准 JDBC 批处理并没有减少往返次数，请参阅 [Oracle JDBC Developer's Guide and Reference](http://docs.oracle.com/cd/B19306_01/java.102/b14355/oraperf.htm#i1059053)：

> 标准更新批处理的 Oracle 实现没有为通用语句和可调用语句实现真正的批处理。即使 Oracle JDBC 支持对 Statement 和 CallableStatement 对象使用标准批处理，您也不太可能看到性能改进。

您是否尝试过他们自己在同一文档中解释的“Oracle 更新批处理”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:44:40.433

1.  你是对的，通过我们批量执行，Oracle 将在数据库上执行 N 次更新。

2.  您是否考虑过通过选择 + 存储过程通过创建表使用批量收集/更新？

ex -`create table Foo2 as select c1, c2, c3, <<date>> from Foo;` 现在删除 Foo 并将 Foo2 重命名为 Foo 表。

请参阅以下链接了解更多信息。

[http://ksadba.wordpress.com/2008/06/16/updating-millions-of-rows-merge-vs-bulk-collect/](http://ksadba.wordpress.com/2008/06/16/updating-millions-of-rows-merge-vs-bulk-collect/)

# mysql - 无法使用 mysql 在具有外键的表中插入数据

> ID：14628150
> 
> 赞同：0
> 
> 时间：2013-01-31T14:28:51.137
> 
> 标签：mysql, sql, foreign-keys, sql-insert

我已经制作了 2 个表 第二个表由引用第一个表的主键的外键组成 第二个表由 3 个字段 id（主键），订单号，fid 我正在使用以下命令

插入 table2 (order no,fid) values(1,(select id from table1 where name='abc');

sql语法错误`enter code here`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:33:03.500

`ORDER`是一个[保留字](http://dev.mysql.com/doc/en/reserved-words.html)。您必须使用反引号引用它：``order no``。

此外，您可能应该使用 MySQL 的[`INSERT ... SELECT`](http://dev.mysql.com/doc/en/insert-select.html)语法：

```
INSERT INTO table2 (`order no`, fld)
SELECT 1,id FROM table1 WHERE name = 'abc' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:30:23.630

你缺少额外的右括号

```
insert into table2 (`order no`,fid) 
values(1,(select id from table1 where name='abc' LIMIT 1)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:35:21.587

插入`table2` (`order no`,`fid`) values(1,(select id from table1 where name='abc');

已编辑...可能是问题行：他的错误是无法添加或更新子行：外键约束失败（abc/demo1，CONSTRAINT fid FOREIGN KEY (id) REFERENCES demo (id)）

应该是 (abc/demo1,CONSTRAINT fid FOREIGN KEY ( **fid** ) REFERENCES demo (id))

# php - 特定标签之间的 preg_split 值

> ID：14628154
> 
> 赞同：2
> 
> 时间：2013-01-31T14:28:59.630
> 
> 标签：php, regex, preg-split

再会。

我**的模式**有问题。

假设我有一个这样的字符串：

> 你好 [person]Name[/person]，我不知道像 [person]Another_name[/person] 这样的正则表达式。

我需要`preg_split`这个字符串来获得这样的数组：

```
Array(0 => 'Name', 1 => 'Another_name'); 
```

我一直在尝试解决这个问题一段时间，但仍然没有运气。

原谅我的无知。任何形式的帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:40:53.797

你会想要使用类似的东西`preg_match_all`而不是`preg_split`：

```
preg_match_all("|\[person\](.*)\[/person\]|U",
    "Hello [person]Name[/person], I don't know regex like [person]Another_name[/person] does.",
    $out);

echo $out[1][0] . ", " . $out[1][1] . "\n"; 
```

您可以在此处了解有关`$out`其结构的更多信息：[http ://www.php.net/manual/en/function.preg-match-all.php](http://www.php.net/manual/en/function.preg-match-all.php)

# jquery - 表单和 Jquery 代码不起作用。灰显提交按钮

> ID：14628155
> 
> 赞同：0
> 
> 时间：2013-01-31T14:29:00.743
> 
> 标签：jquery, forms, button, submit

我有一个 HTML 订阅表单，它使用（或应该使用）一个 jquery 代码来灰显提交按钮，直到字段**名称**被填写。

但是，它不起作用...

有什么问题的线索吗？这是代码：

```
<head>
<script type="text/javascript">
var $submit = $("input[type=submit]");
if ( $(".subName").length > 0 ) {
   $submit.attr("disabled","disabled");
} else {
   $submit.removeAttr("disabled");
}
</script>
</head>
<body>
<form action="" method="post" id="subscribe" name="subscribe">
<input type="hidden" name="action" value="subscribe">
<label>NAME:</label>
<input type="text" name="name" class="subName" id="sub_first_name">
<label>EMAIL:</label>
<input type="text" name="email" class="subEmail" id="sub_email">
<input type="submit" name="button" value="Subscribe" />
</form>
</body> 
```

谢谢！

- - - - - - - - - - - - - 编辑

```
<form action="" method="post" id="subscribe" name="subscribe">
<label>NAME:</label>
<input type="text" name="name" class="subName" id="sub_first_name">
<label>EMAIL:</label>
<input type="text" name="email" class="subEmail" id="sub_email">
<input type="submit" name="button" value="Subscribe" />
</form> 
```

JS：

```
<script type="text/javascript">
$(document).ready(function() {
    var $submit = $("input[type=submit]");
    $('.subName').on('change', function() {
        if ( ! $(".subName").val().length ) {
           $submit.attr("disabled","disabled");
        } else {
           $submit.removeAttr("disabled");
        }
    });
}
</script> 
```

但仍然无法正常工作:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:32:14.277

```
$(document).ready(function() {
    var $submit = $("input[type=submit]");
    $('.subName').on('change keyup', function() {
        if ( !$(this).val().length ) {
           $submit.attr("disabled","disabled");
        } else {
           $submit.removeAttr("disabled");
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:39:16.810

除了将其绑定到事件之外，您是否还在标题中包含 jQuery？例如像这样：

```
<script type="text/javascript" src="js/jquery-1.7.1.js"></script> 
```

# android - AChartEngine 图表不会显示？

> ID：14628170
> 
> 赞同：3
> 
> 时间：2013-01-31T14:29:47.013
> 
> 标签：android, achartengine

我已经使用 AChartEngine 几个星期了，截至上周一切正常。我真的找不到我所做的更改，但现在该图表并没有出现在我的屏幕上。我`Activity`使用图形的空布局属性进行初始化。在某个时刻，用户读入输入，然后更新图表。

这是我的图表的 XML 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:background="@drawable/eti1"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:weightSum="11" >

    <LinearLayout
        android:id="@+id/wavesOptions"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal"
        android:gravity="center"
        android:weightSum="8" >

        <!-- 

        Unrelated spinners/checkboxes

        -->
    <ScrollView
        android:layout_width="fill_parent"
        android:id="@+id/graphScroll"
        android:layout_height="wrap_content"
        android:layout_above="@id/wavesOptions"
        android:layout_alignParentTop="true" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <LinearLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/graph1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />
        </LinearLayout>

    </ScrollView>
</RelativeLayout> 
```

下面是我在 Eclipse 中显示的布局图片。我视图顶部的蓝色框框是我的图表所在的位置。它看起来很小，但我`wrap_content`用于高度，所以它应该匹配它的父级。当我在我的 java 代码中将图表设置为该视图时，根本没有任何变化。所有复选框都已更新，并正确添加了新的微调器。

![在此处输入图像描述](../Images/1fde027c7bd721ea7adca47cc8af8bff.png)

下面是我的 .java 文件中的代码：

```
public void onCreate( Bundle savedInstanceState ) {
    super.onCreate( savedInstanceState );
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView( R.layout.waves );

    renderer = new XYMultipleSeriesRenderer( 2 ); 

} 
```

一旦用户调用要绘制的信息，数据就会存储在一个数组中`waveResults`，然后调用该方法`updateGraph()`。graphView设置为布局的重要部分一直在底部：

```
public void updateGraph() {
    int num = 166;
    renderer = new XYMultipleSeriesRenderer( 2 );
    dataset = new XYMultipleSeriesDataset();

    // NetV1
    netV1Series = new XYSeries( "Net V1", 0 );
    // NetV2
    netV2Series = new XYSeries( "Net V2", 0 );
    // NetV3  
    netV3Series = new XYSeries( "Net V3", 0 );
    // VDI1
            // VDI2
            // VDI3
    if( spinnerChoice == 0 ) {
        vdi1Series = new XYSeries( "Diff V1", 1 );
        vdi2Series = new XYSeries( "Diff V2", 1 );
        vdi3Series = new XYSeries( "Diff V3", 1 );
    } else {
        vdi1Series = new XYSeries( "Curr 1", 1 );
        vdi2Series = new XYSeries( "Curr 2", 1 );
        vdi3Series = new XYSeries( "Curr 3", 1 );
    }

    dataset.addSeries( netV1Series );
    dataset.addSeries( netV2Series );
    dataset.addSeries( netV3Series );
    dataset.addSeries( vdi1Series );
    dataset.addSeries( vdi2Series );
    dataset.addSeries( vdi3Series );
    netV1Renderer = new XYSeriesRenderer();
    netV1Renderer.setColor( Color.WHITE );
    netV2Renderer = new XYSeriesRenderer();
    netV2Renderer.setColor( Color.YELLOW );
    netV3Renderer = new XYSeriesRenderer();
    netV3Renderer.setColor( Color.BLUE );
    vdi1Renderer = new XYSeriesRenderer();
    vdi1Renderer.setColor( Color.RED );
    vdi2Renderer = new XYSeriesRenderer();
    vdi2Renderer.setColor( Color.CYAN );
    vdi3Renderer = new XYSeriesRenderer();
    vdi3Renderer.setColor( Color.GRAY );
    renderer.addSeriesRenderer( netV1Renderer );
    renderer.addSeriesRenderer( netV2Renderer );
    renderer.addSeriesRenderer( netV3Renderer );
    renderer.addSeriesRenderer( vdi1Renderer );
    renderer.addSeriesRenderer( vdi2Renderer );
    renderer.addSeriesRenderer( vdi3Renderer );     

    renderer.setAxesColor( Color.DKGRAY );
    renderer.setPointSize( 14 );
    renderer.setApplyBackgroundColor( true );
    renderer.setBackgroundColor( Color.BLACK );
    renderer.setMarginsColor( Color.BLACK );
    renderer.setChartTitle( "Waves" );
    renderer.setShowGrid( true );
    renderer.setXLabels( 10 );
    renderer.setYLabels( 7 );
    renderer.setXLabelsAlign(Align.RIGHT);
    renderer.setYLabelsAlign(Align.RIGHT, 0);
    renderer.setZoomButtonsVisible( false );
    renderer.setPanEnabled( false, false );
    renderer.setZoomEnabled( false, false );
    renderer.setLabelsColor(Color.WHITE);
    renderer.setXLabelsColor(Color.WHITE);
    renderer.setYLabelsColor(0, Color.WHITE);
    renderer.setYLabelsColor(1, Color.WHITE);

    if( spinnerChoice == 0 ) {
        renderer.setYTitle("Diff Volts", 1);
    } else {
        renderer.setYTitle( "Current", 1 );
    }
    renderer.setYTitle( "Net Volts", 0 );

    renderer.setYAxisAlign( Align.LEFT, 0 );
    renderer.setYAxisAlign(Align.RIGHT, 1);
    renderer.setYLabelsAlign(Align.LEFT, 1);

    graphLayout = (LinearLayout) findViewById( R.id.graph1 );
    graphLayout.removeAllViews();
    Log.i( "GRAPH", "After Remove" );
    graphView = ChartFactory.getCubeLineChartView( getApplicationContext(), dataset, renderer, 0.3f);
    Log.i( "GRAPH",  "Before addView" );
    graphLayout.addView(graphView);
    Log.i( "GRAPH", "After addView" );
} 
```

在`updateGraph()`方法结束时，三个`Log`调用都显示在我的 LogCat 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:42:11.583

问题是`ScrollView`. 我只`ScrollView`从您的布局中删除了 并且图表显示正常。

请注意`ScrollView`在编辑模式下的 waves.xml 中的警告：“此 ScrollView 布局或其 LinearLayout 父级可能无用”。

# postgresql - 解析 COPY...WITH BINARY 结果

> ID：14628179
> 
> 赞同：5
> 
> 时间：2013-01-31T14:30:20.693
> 
> 标签：postgresql

我正在使用这个：

> 复制（从表中选择字段1，字段2，字段3）到'C：//Program Files/PostgreSql//8.4//data//output.dat' WITH BINARY

要将某些字段导出到文件，其中之一是 ByteA 字段。现在，我需要使用定制程序读取文件。

我怎样才能解析这个文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:44:52.807

由 生成的文件的一般格式`COPY...BINARY`在[文档](http://www.postgresql.org/docs/current/static/sql-copy.html#AEN66736)中进行了说明，并且非常重要。

`bytea`内容是最容易处理的，因为它们没有被编码。

每个其他数据类型都有自己的编码规则，文档中没有描述，但在源代码中。从文档：

> 要确定实际元组数据的适当二进制格式，您应该查阅 PostgreSQL 源，特别是每个列的数据类型的 *send 和 *recv 函数（通常这些函数可以在 src/backend/utils/adt/ 目录中找到源分布）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:50:08.000

使用文本格式而不是二进制可能更容易（所以只需删除`WITH BINARY`）。文本格式具有更好的文档，旨在实现更好的互操作性。二进制格式更适合在 postgres 安装之间移动，即使在那里它们也存在版本不兼容问题。

文本格式会将 bytea 字段写成文本，并使用`\nnn`八进制表示对任何不可打印的字符进行编码（除了一些特殊情况，它使用 C 样式`\x`模式进行编码，例如`\n`等）。这些在[COPY](http://www.postgresql.org/docs/9.1/static/sql-copy.html)`\t`中列出文档。

唯一需要注意的是，您需要绝对确定保存文件时使用的字符编码与读取文件时使用的字符编码相同。确保可打印字符映射到相同的数字。我会坚持使用 SQL_ASCII，因为它让事情变得更简单。

# sql-server-2008 - 否则在 sql server 2008 中

> ID：14628180
> 
> 赞同：1
> 
> 时间：2013-01-31T14:30:23.347
> 
> 标签：sql-server-2008, if-statement

我正在尝试在 if else 块中运行查询。如下所示在此查询中，我首先检查数据库是否存在，否则我将执行另一个查询来创建它。但是每次运行此查询时，即使存在，它也会执行 else 块数据库存在，语法错误怎么办？

```
IF EXISTS(SELECT name FROM sys.databases WHERE name = 'SampleDB')
    BEGIN
    END
    ELSE 
    BEGIN   
    CREATE DATABASE [SampleDB]  
    go
    use [SampleDB] 
    Go

    exec sp_dboption N'SampleDB', N'autoclose', N'false'
    GO

    exec sp_dboption N'SampleDB', N'bulkcopy', N'false'
    GO

    exec sp_dboption N'SampleDB', N'trunc. log', N'false'
    GO

    exec sp_dboption N'SampleDB', N'torn page detection', N'true'
    GO

    exec sp_dboption N'SampleDB', N'read only', N'false'
    GO

    exec sp_dboption N'SampleDB', N'dbo use', N'false'
    GO

    exec sp_dboption N'SampleDB', N'single', N'false'
    GO

    exec sp_dboption N'SampleDB', N'autoshrink', N'false'
    GO

    exec sp_dboption N'SampleDB', N'ANSI null default', N'false'
    GO

    exec sp_dboption N'SampleDB', N'recursive triggers', N'false'
    GO

    exec sp_dboption N'SampleDB', N'ANSI nulls', N'false'
    GO

    exec sp_dboption N'SampleDB', N'concat null yields null', N'false'
    GO

    exec sp_dboption N'SampleDB', N'cursor close on commit', N'false'
    GO

    exec sp_dboption N'SampleDB', N'default to local cursor', N'false'
    GO

    exec sp_dboption N'SampleDB', N'quoted identifier', N'false'
    GO

    exec sp_dboption N'SampleDB', N'ANSI warnings', N'false'
    GO

    exec sp_dboption N'SampleDB', N'auto create statistics', N'true'
    GO

    exec sp_dboption N'SampleDB', N'auto update statistics', N'true'
    GO

    CREATE TABLE [dbo].[BrandMaster] (
        [BrandId] [int] IDENTITY (1, 1) CONSTRAINT [PK_BrandMaster] PRIMARY KEY NOT NULL ,
        [BrandName] [nvarchar] (50) NOT NULL ,
        [BrandStatus] [bit] NOT NULL ,
         )
    GO

    SET IDENTITY_INSERT [dbo].[BrandMaster] ON
    SET IDENTITY_INSERT [dbo].[BrandMaster] OFF

    CREATE TABLE [dbo].[BrandProductMaster] (
        [BrandProductId] [int] IDENTITY (1, 1) CONSTRAINT [PK_BrandProductMaster] PRIMARY KEY NOT NULL ,
        [ProductId] [int] NOT NULL ,
        [BrandId] [int] NOT NULL ,
        [Units] [nvarchar] (15) NULL ,
        [Status] [bit] NOT NULL ,
         )
    GO

    SET IDENTITY_INSERT [dbo].[BrandProductMaster] ON
    SET IDENTITY_INSERT [dbo].[BrandProductMaster] OFF

    CREATE TABLE [dbo].[BrokerMaster] (
        [BrokerId] [int] IDENTITY (1, 1) CONSTRAINT [PK_BrokerMaster] PRIMARY KEY NOT NULL ,
        [BrokerName] [nvarchar] (100) NOT NULL ,
        [BrokerPercentage] [float] NOT NULL ,
        [BrokerAddress] [nvarchar] (100) NULL ,
        [BrokerTelephoneNo] [bigint] NULL ,
        [BrokerMobileNo] [bigint] NULL ,
        [BrokerFaxNo] [bigint] NULL ,
        [BrokerEmailId] [nvarchar] (75) NULL ,
        [BrokerStatus] [bit] NOT NULL ,
    )
    GO

    SET IDENTITY_INSERT [dbo].[BrokerMaster] ON
    INSERT INTO [dbo].[BrokerMaster] ([BrokerId],[BrokerName],[BrokerPercentage],[BrokerAddress],[BrokerEmailId],[BrokerStatus])
        VALUES (1,'No Broker',0.0,'','',1)
    GO

    SET IDENTITY_INSERT [dbo].[BrokerMaster] OFF

    GO
END 
```

编辑后：

```
IF NOT EXISTS(SELECT name FROM sys.databases WHERE name = 'SampleDB')
    CREATE DATABASE [SampleDB]  
    go
    use [SampleDB] 
    Go

    exec sp_dboption N'SampleDB', N'autoclose', N'false'
    GO

    exec sp_dboption N'SampleDB', N'bulkcopy', N'false'
    GO

    exec sp_dboption N'SampleDB', N'trunc. log', N'false'
    GO

    exec sp_dboption N'SampleDB', N'torn page detection', N'true'
    GO
...... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:38:20.930

您不能`GO`在`BEGIN`/`END`块内使用。`GO`(*) 是您的客户端工具的命令，用于将所有文本返回到前一个`GO`（或文件的开头）并要求 SQL Server 执行它（称为批处理）。SQL Server 编译所有这些文本，然后执行它。所以它会看到一个不完整的结构：

```
IF
BEGIN
END
ELSE
BEGIN 
```

没有`END`最后一个`BEGIN`，所以你总是会得到一个错误。它永远不会真正尝试执行代码。

* * *

(*) 实际上，它可以是任何东西。但只有精神病患者才会改变他们的工具设置，使其远离默认值`GO`.

* * *

我会这样做：

```
IF NOT EXISTS(SELECT name FROM sys.databases WHERE name = 'SampleDB')
BEGIN   
    CREATE DATABASE [SampleDB]  

    exec sp_dboption N'SampleDB', N'autoclose', N'false'
    exec sp_dboption N'SampleDB', N'bulkcopy', N'false'
    exec sp_dboption N'SampleDB', N'trunc. log', N'false'
    exec sp_dboption N'SampleDB', N'torn page detection', N'true'
    exec sp_dboption N'SampleDB', N'read only', N'false'
    exec sp_dboption N'SampleDB', N'dbo use', N'false'
    exec sp_dboption N'SampleDB', N'single', N'false'
    exec sp_dboption N'SampleDB', N'autoshrink', N'false'
    exec sp_dboption N'SampleDB', N'ANSI null default', N'false'
    exec sp_dboption N'SampleDB', N'recursive triggers', N'false'
    exec sp_dboption N'SampleDB', N'ANSI nulls', N'false'
    exec sp_dboption N'SampleDB', N'concat null yields null', N'false'
    exec sp_dboption N'SampleDB', N'cursor close on commit', N'false'
    exec sp_dboption N'SampleDB', N'default to local cursor', N'false'
    exec sp_dboption N'SampleDB', N'quoted identifier', N'false'
    exec sp_dboption N'SampleDB', N'ANSI warnings', N'false'
    exec sp_dboption N'SampleDB', N'auto create statistics', N'true'
    exec sp_dboption N'SampleDB', N'auto update statistics', N'true'
END
go
use SampleDB
go
if not exists (select * from sys.tables where name='BrandMaster')
begin
    exec sp_executesql N'CREATE TABLE [dbo].[BrandMaster] (
        [BrandId] [int] IDENTITY (1, 1) CONSTRAINT [PK_BrandMaster] PRIMARY KEY NOT NULL ,
        [BrandName] [nvarchar] (50) NOT NULL ,
        [BrandStatus] [bit] NOT NULL ,
         )'

    exec sp_executesql N'CREATE TABLE [dbo].[BrandProductMaster] (
        [BrandProductId] [int] IDENTITY (1, 1) CONSTRAINT [PK_BrandProductMaster] PRIMARY KEY NOT NULL ,
        [ProductId] [int] NOT NULL ,
        [BrandId] [int] NOT NULL ,
        [Units] [nvarchar] (15) NULL ,
        [Status] [bit] NOT NULL ,
         )'

    exec sp_executesql N'CREATE TABLE [dbo].[BrokerMaster] (
        [BrokerId] [int] IDENTITY (1, 1) CONSTRAINT [PK_BrokerMaster] PRIMARY KEY NOT NULL ,
        [BrokerName] [nvarchar] (100) NOT NULL ,
        [BrokerPercentage] [float] NOT NULL ,
        [BrokerAddress] [nvarchar] (100) NULL ,
        [BrokerTelephoneNo] [bigint] NULL ,
        [BrokerMobileNo] [bigint] NULL ,
        [BrokerFaxNo] [bigint] NULL ,
        [BrokerEmailId] [nvarchar] (75) NULL ,
        [BrokerStatus] [bit] NOT NULL ,
    )'
    exec sp_executesql N'INSERT INTO [dbo].[BrokerMaster] ([BrokerName],[BrokerPercentage],[BrokerAddress],[BrokerEmailId],[BrokerStatus])
        VALUES (''No Broker'',0.0,'''','''',1)'
END 
```

# ruby-on-rails - Ruby 从其他实例变量中扣除相同的值

> ID：14628182
> 
> 赞同：-1
> 
> 时间：2013-01-31T14:30:24.340
> 
> 标签：ruby-on-rails, ruby, instance-variables

我有两个实例值：@a 和@b，有类似哈希的....（将在伪示例中解释）例如在@ai 中有：

```
*Field1 | Field2 | Field3*

CONTITECH | CT942K1 | 123
CONTITECH | CT722K1 | 123
ATE | AB2123 | 123 
```

在@bi 中有：

```
CONTITECH | CT942K1 | 456
BREMBO | TE132 | 123 
```

如何做到这一点@c = @a - @b 将只包含不在@b 中的值？

例如 @c = @a - @b 将包含：

```
CONTITECH | CT722K1 | 123
ATE | AB2123 | 123 
```

因此，只有当 2 个字段相同时，我必须从 @a 中删除来自 @b 的相同值...

如果示例不清楚，请写在评论中....我需要的只是从@a 中删除所有相同的@b 中的（field1 和field2）条目...如何做到这一点？

如果这有帮助：代码：这是@b（@articles）：

```
@articles = Article.find(:all, :conditions => ["ART_ID in (?) ", @search.map(&:ARL_ART_ID)]) 
```

和@a（@non_original）：

```
@non_original = []
    nr_condition = "*" + art_nr.to_s.gsub(/[^0-9A-Za-z]/, '').upcase + "*"
    if art_nr.length > 3
      art = search_not_oem(art_nr)
      @search = CrossList.find(:all, :conditions => ['MATCH (cross_value) AGAINST (? IN BOOLEAN MODE)', nr_condition])
      if @search.present?
        @prlist = PriceList.where("id IN (?)", @search.map(&:price_list_id))
        if  @prlist.present?
          @prlist.each do |p|
            #@all_supp = Supplier.all
            #if @all_supp.find{|item| item.SUP_BRAND.gsub(/[^0-9A-Za-z]/, '').include?(p.brand.gsub(/[^0-9A-Za-z]/, '').upcase)} && art.present?
            #  logger.warn("!!!!!! if")
            #else
              @non_original << p
            #end                  
          end
        end
      end
    end
@non_original 
```

我需要的是@res = @non_original - @articles，确保它们具有不同的字段，但具有相同的数据......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:45:06.443

试试这个：

```
@res = @non_original.reject do |obj|
  @articles.any? {|art| art.field1 == obj.field1 && art.field2 == obj.field2 }
end 
```

That should put into `@res` all objects from `@non_original`, except for those whose `field1` and `field2` match those of any element in `@articles`. The objects in `@res` will be the same type as `@non_original` - that is, `PriceList`.

# c# - 如果找不到，则添加字符串列表

> ID：14628192
> 
> 赞同：1
> 
> 时间：2013-01-31T14:31:15.213
> 
> 标签：c#

我有

```
List<List<string>> source 
```

其中包含例如

```
{{"a","b"},{"c","d"}} 
```

我也有一个

```
List<List<string>> target 
```

其中包含例如

```
{{"a","b"},{"e","f"}} 
```

什么是最简单的方法可以让我无法找到`List<string>`，被包含在？`source``target``target`

这里`{"c","d"}`可以找到`source`但不是`target`，因此分配后`target`应该是

```
{{"a","b"},{"e","f"},{"c","d"}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:37:59.650

与自定义比较器一起使用`Linq.Union`：

```
target = target.Union(source, new MyListComparer())  // Use the custom comparer to avoid duplication of the equal sequences.
               .ToList(); 
```

使用相等比较器（如果要进行与顺序无关的比较，请使用`Equals`函数中的第二个选项）：

```
public class MyListComparer : IEqualityComparer<List<string>>
{
    public bool Equals(List<string> x, List<string> y)
    {
        return x.SequenceEqual(y);  // Use this if { "a", "b" } != { "a", "b" }
        //return x.Count == y.Count && x.Count == x.Intersect(y).Count();  // Use this if { "a", "b" } == { "a", "b" }
    }

    public int GetHashCode(List<string> obj)
    {
        // GetHashCode is used to make the comparison faster by not comparing two elements that does not have the same hash code.
        // GetHashCode must satisfy the following condition
        //  (x == y) implies (GetHashCode(x) == GetHashCode(y))
        // If your are extremely lazy, you can always return 0 but then the complexity of Union will be quadratic instead of linear.
        return obj.Sum(item => item.GetHashCode());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:34:44.560

您可以使用 LINQ：

```
target = source.Union(target).Distinct(new YourComparer()).ToList(); 
```

然后，您将需要创建一个继承自 IEqualityComparer 的新类（有关执行此操作的示例，请参见[此处），该类将执行您想要的精确比较。](http://www.blackwasp.co.uk/IEqualityComparer.aspx)

# validation - 我的代码有什么问题？我需要验证一个单选按钮

> ID：14628193
> 
> 赞同：0
> 
> 时间：2013-01-31T14:31:16.373
> 
> 标签：validation, radio-button

我的代码有什么问题？我需要验证一个单选按钮。它工作正常，直到最后一项。选择是或否后，我可以提交最后一个选项为空的表单。我似乎无法验证最后一个选项。我也没有写这个脚本。老实说，我不明白它是如何工作的：/

这就是我所拥有的

```
function valida () {

if (document.example.name.value=="") {
alert ('NAME field is empty!');
return false;
}

else if (document.example.email.value=="") {
alert ('EMAIL field is empty!');
return false;
}

    var radios = document.getElementsByName("yesorno");
    var formValid = false;

    var i = 0;
    while (!formValid && i < radios.length) {
        if (radios[i].checked) formValid = true;
        i++;        
    }

    if (!formValid) alert("Select Yes or No!");
    return formValid;

    var radios = document.getElementsByName("color");
    var formValid = false;

    var i = 0;
    while (!formValid && i < radios.length) {
        if (radios[i].checked) formValid = true;
        i++;        
    }

    if (!formValid) alert("Pick a colour!");
    return formValid;

else {
return true;
}
}

<form name="example" id="example" action="submit-form.php" method="post" onsubmit="return valida();">    
<fieldset>

<label for="name">Name:</label>
<input type="text" name="name" id="name"/>

<label for="email">Email:</label>
<input type="text" name="email" id="email"/>    

<label>Yes or No?</label>    

YES
<input name="yesorno" type="radio" class="radio" value="yes" />

NO
<input name="yesorno" type="radio" class="radio" value="yes" />

<label>Red, green or yellow?</label>    

red
<input name="color" type="radio" class="radio" value="red" />

green
<input name="color" type="radio" class="radio" value="green" />

yellow
<input name="color" type="radio" class="radio" value="yellow" />

<input type="submit" value="submit" />

</fieldset>
</form> 
```

编辑：我在stackoverflow上找到了一个解决方案。这现在对我有用：

```
function valida () {

if (document.example.name.value=="") {
alert ('NAME field is empty!');
return false;
}

else if (document.example.email.value=="") {
alert ('EMAIL field is empty!');
return false;
}

else if ($('input[name=yesorno]:checked').length == 0) {
alert ('Select Yes or No!');
return false;
}

else if ($('input[name=color]:checked').length == 0) {
alert ('Pick a colour!');
return false;
}

else {
return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:50:28.127

在可以访问其余代码之前，您将返回“是/否”验证。如果 return 包含在 if 语句中，则将到达其余代码。尝试这个：

```
<script language=javascript>
function valida ()
{

if (document.example.name.value=="")
{
alert ('NAME field is empty!');
return false;
}

else if (document.example.email.value=="")
{
    alert ('EMAIL field is empty!');
    return false;
 }

var radios = document.getElementsByName("yesorno");
var formValid = false;

var i = 0;
while (!formValid && i < radios.length)
{
    if (radios[i].checked) formValid = true;
    i++;        
}

if (!formValid)
{
    alert("Select Yes or No!");
    return formValid;
}

radios = document.getElementsByName("color");
formValid = false;

i = 0;

while (!formValid && i < radios.length)
{
    if (radios[i].checked)
    {
        formValid = true;
    }
    i++;        
}

if (!formValid)
{
alert("Pick a colour!");
return formValid;
}

else
{
return true;
} 
```

}

姓名： 电子邮件： 是或否？是 否 红色、绿色或黄色？红色 绿色 黄色

# symfony - Symfony2 - 为作为参数传递对象的控制器编写测试的问题

> ID：14628200
> 
> 赞同：1
> 
> 时间：2013-01-31T14:31:51.463
> 
> 标签：symfony, phpunit, twig

我在为 Symonfy2 包中的控制器编写测试时遇到了问题。

控制器只能通过 Twig's 访问`{% render %}`，并且在应用程序中运行良好，但无论我采用哪种方式，测试都会失败。这基本上是发生了什么：

控制器`A`。- “父”控制器。通过典型的 URL 加载。

控制器`B`。`{% render %}`通过从 Controller 呈现的模板加载`A`。`B`一个对象变量在`{% render %}`标签 中被传递给 Controller 。

控制器`C`。`{% render %}`通过从 Controller 呈现的模板加载`B`。

这一切在实际应用程序中都非常有效，并且以这种方式构造事物可以最大程度地重用代码。当我开始为 Controller 编写单元测试时，问题就出现了`B`。因为这是一个内部唯一的控制器，我认为最好这样调用测试方法：

```
$this->obj = new ControllerB();
$this->obj->setContainer($this->getContainer());
$this->obj->methodToTest(); 
```

但这导致我收到此错误消息：

> Twig_Error_Runtime：在第 XX 行渲染模板（“您无法创建非活动范围（“请求”）的服务（“请求”）。”）期间引发异常 -*这是我们尝试的行通过 {% render %} 从 Controller C 渲染一个方法*

因此，似乎因为对 Controller`B`中方法的调用不是请求的一部分，所以它不能向 controller 发出内部子请求`C`。对此的解决方案似乎是`B`通过以下方式向控制器发出请求：

```
$this->client = static::createClient(...);
$crawler = $this->client->request('GET', '/routeToControllerB'); 
```

但这也行不通，因为我需要将对象和数组传递给 Controller 中的方法`B`，而且它们太大而无法`serialize/json_encode`放入请求的 URL 中。

我已经尝试尝试将请求强制到对象容器中：

```
 $this->client = static::createClient();
    $this->client->followRedirects();
    $container = $this->getContainer();
    $container->get('session')->start();
    $request = Request::createFromGlobals();
    $container->set('request', $request);

    $user = new \User(1111);
    \Auth::set_user($user);
    $user = new \Company\Component\Security\User\User(\Auth::user());
    $token = new UsernamePasswordToken($user, 'phpunit', 'PHPSESSID', $user->getRoles());
    $container->get('security.context')->setToken($token);

    $this->obj = new ControllerB();
    $this->obj->setContainer($container); 
```

但是到目前为止，我找不到任何可以让我测试需要传递对象并`{% render %}`在模板中使用（内部子请求）的控制器方法的东西。以前有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T17:01:43.597

我知道我有点，但在这里我的建议：

如果你真的想这样做，你可以让你的控制器成为一个服务，给它所有它需要的依赖，然后编写一个单元测试。见[http://php-and-symfony.matthiasnoback.nl/2012/06/symfony2-testing-your-controllers/](http://php-and-symfony.matthiasnoback.nl/2012/06/symfony2-testing-your-controllers/)

但我建议您不要对控制器进行单元测试。如果它们写得好，它们不包含任何业务逻辑，并且对它们进行单元测试是毫无意义的。如果有关联的路由（但在这种情况下你不能直接给它对象），你应该直接对你的控制器进行功能测试，否则如果控制器不是设计为直接从浏览器访问的（因为你给它对象，或者只是因为你不想），只需测试包含它的控制器，它将覆盖两个控制器。在您的示例中，只需测试控制器 A，它就隐含地涵盖了 B 和 C。

# jquery - 在backbonejs中初始化

> ID：14628202
> 
> 赞同：0
> 
> 时间：2013-01-31T14:31:54.623
> 
> 标签：jquery, backbone.js

我是一个非常新的backbonejs，正在尝试使用它。我在初始化函数中放了一条警告消息，但没有工作。

```
$(function() {

    var Todo = Backbone.Model.extend({
        initialize: function() {
            alert("welcome to Backbone Application");
        }
    });

    var task = new Todo;

}); 
```

完整代码可在此处获得[http://jsfiddle.net/ZYxEw/](http://jsfiddle.net/ZYxEw/)

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:48:10.547

唯一的问题是您包含错误的 javascript 库路径。您的小提琴正在使用相对路径，请将您的 src 更改为：“ [http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js) ”、“ [http://cdnjs.cloudflare.com /ajax/libs/backbone.js/0.9.2/backbone-min.js](http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js) ”和“ [http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js](http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js) ”分别.

如果只是为了测试，您可以在 jsFiddle 的左侧面板中添加这些库（“选择框架”和/或“添加资源”部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:44:33.273

你有没有尝试过

var task = new Todo();

因为它是您正在调用的函数的实例

**编辑**

[这里](http://jsfiddle.net/ZYxEw/3/) `is a working fiddle for you`

# php - PHP - 检查是否看到图像/视频/对象

> ID：14628205
> 
> 赞同：-1
> 
> 时间：2013-01-31T14:32:17.760
> 
> 标签：php

我可以检查是否让用户看到 index.php 中的图像？我不仅想知道是否访问了页面，还想知道用户向下滚动页面并显示此图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:38:00.943

你肯定需要 Javascript 来做到这一点。使用 PHP，您只能检查页面是否已被访问。我会根据图片在页面中的显示位置检查用户使用 Javascript 滚动页面的程度。但事实是，您不能依赖该检查，任何客户端都可以很容易地伪造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:41:33.077

这不是一件容易的事。您需要检查用户是否向下滚动到元素的位置，如果为真，则对 PHP 进行 AJAX 调用，将这些信息保存到数据库中。

最准确的方法是使用 jQuery [.scrollTop](http://api.jquery.com/scrollTop/)查看用户向下滚动的距离并将其与[.offset](http://api.jquery.com/offset/)进行比较。

请记住，虽然它不是 100% 准确的。对于大多数布局和大多数图像来说，它应该足够好，但是放置在使用大量填充的布局中的小图片很可能会返回不正确的结果（表明图像在实际查看之前或之后查看，假设您向下滚动看见了）。

如果我是你——我会尽量避免使用这个功能。;) 它太容易出错了，你真的无能为力。

# solr - Solr/Tika 提取失败 NoSuchMethodError、Solr 3.6、Tika 1.0、Jboss 5.0.1

> ID：14628208
> 
> 赞同：1
> 
> 时间：2013-01-31T14:32:48.553
> 
> 标签：solr, jboss, apache-tika

我们在具有 TIKA 提取功能的 JBOSS 内安装了多核 SOLR 3.6。这是 Windows 2008 R2 VM 上的新安装。这种精确的设置已经在许多其他部署中起作用。这是调用“提取”时的堆栈跟踪：

2013-01-31 08:52:51,908 严重 [org.apache.solr.servlet.SolrDispatchFilter] java.lang.NoSuchMethodError：org.apache.tika.config.TikaConfig.(Ljava/lang/ClassLoader;)V 在 org. org.apache.solr.handler.extraction.ExtractingRequestHandler.inform(ExtractingRequestHandler.java:95) 在 org.apache.solr.core.RequestHandlers$ 的 apache.solr.handler.extraction.ExtractingRequestHandler.getDefaultConfig(ExtractingRequestHandler.java:136) LazyRequestHandlerWrapper.getWrappedHandler(RequestHandlers.java:255) 在 org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handleRequest(RequestHandlers.java:242) 在 org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)在 org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:365) 在 org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.jboss.web.tomcat.filters 的 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) .ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235) 在 org.jboss.web.tomcat.security.SecurityAssociationValve 的 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)。在 org.jboss.web.tomcat.security.JaccContextValve 调用（SecurityAssociationValve.java:190）。在 org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70) 处调用(JaccContextValve.java:92)在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 在 org.jboss.web.tomcat.service.jca .CachedConnectionValve.invoke(CachedConnectionValve.java:158) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330) 在org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829) 在 org.apache.coyote.http11。Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447) at java.lang.Thread.run(Thread.java:662)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T16:01:38.113

我遇到了类似的问题，得到 NoSuchMethodErrors。原来我的类路径中有一个旧版本的 metadata-extractor.jar，它与 tika.jar 中的相冲突。如果您可以找到引发异常的特定 jar，则可能存在版本冲突。

# html - 删除列表项 css 之间的空格

> ID：14628209
> 
> 赞同：-3
> 
> 时间：2013-01-31T14:32:51.243
> 
> 标签：html, css

这听起来像是一个愚蠢的问题，但我将如何删除此页面上列表项之间的空格，例如：

[http://www.gamingonlinux.com/articles/tales-of-majeyal-now-on-desura.1685](http://www.gamingonlinux.com/articles/tales-of-majeyal-now-on-desura.1685)

ul 有一个名为“content-list”的类。

将填充或边距设置为 0 似乎没有任何作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:35:11.970

这些列表项之间有换行符。

删除`<br>`标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:35:27.640

该页面上的列表在每个列表项之间都有换行符，从而导致空格。

删除`<br />`'s

```
<ul>
    <li>Item</li>
    <br />
    <li>Item</li>
    <br />
    <li>Item</li>
    <br />
</ul> 
```

变成：  

```
 <ul>
     <li>Item</li>
     <li>Item</li>
     <li>Item</li>
 </ul> 
```

要解决问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:36:03.437

删除`<br>`列表项之间的 's。如果您使用某种 Web HTML 编辑器 - 尝试在纯 HTML 视图中编辑此代码。

# c# - DLLImport a variable MFC dll

> ID：14628211
> 
> 赞同：1
> 
> 时间：2013-01-31T14:32:53.840
> 
> 标签：c#, mfc, pinvoke

所以我创建了以下测试项目：

```
[DllImportAttribute("TestMFCDLL.dll", CallingConvention = CallingConvention.Cdecl)]
internal static extern int test(int number);

private void button1_Click(object sender, EventArgs e)
{
    int x = test(5);
} 
```

这适用于我定义了函数测试的 MFC dll，但是我实际上拥有的是许多 MFC dll，它们都共享一个共同的入口函数并根据我的输入以不同的方式运行。所以基本上我有大量的 dll，我在编译时不知道它的名字是什么，我只知道它们具有类似于这个程序的设置方式的功能，有没有办法根据运行时知识导入 dll？简单地这样做会返回一个错误：

```
static string myDLLName = "TestMFCDLL.dll";
[DllImportAttribute(myDLLName, CallingConvention = CallingConvention.Cdecl)] 
```

> 属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:50:01.417

如果您想动态加载一个 DLL 并使用 DLL 中的函数，那么您需要做更多的事情。首先，您需要动态加载 DLL。您可以为此使用 LoadLibrary 和 FreeLibrary。

```
[DllImport("kernel32.dll")]
public static extern IntPtr LoadLibrary(string dllName);

[DllImport("kernel32.dll")]
public static extern bool FreeLibrary(IntPtr hModule); 
```

其次，您需要获取 DLL 中函数的地址并调用它。

```
[DllImport("kernel32.dll")]
public static extern IntPtr GetProcAddress(IntPtr hModule, string functionName);

[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
private delegate int Test(int number); 
```

把所有这些放在一起：

```
IntPtr pLib = LoadLibrary(@"PathToYourDll.DLL");
IntPtr pAddress = GetProcAddress(pLib, "test");
Test test = (Test)Marshal.GetDelegateForFunctionPointer(pAddress, typeof(Test));
int iRresult = test(0);
bool bResult = FreeLibrary(pLib); 
```

# php - 在 IE 中选择和上传多个文件（版本 < 9）

> ID：14628213
> 
> 赞同：0
> 
> 时间：2013-01-31T14:32:58.223
> 
> 标签：php, javascript, html, file-upload

用于一次选择多个文件并将它们上传到服务器的代码是：-

```
<html>
<body>
<form action="upload.php" method="post" enctype="multipart/form-data" name="myForm">
    <label for="myfile" style="cursor:pointer;">Click To Upload Photo(s)</label>:<input type="file" id="myfile" name="upload" multiple="multiple" />
    <br />
    <input type="submit" />
</form>
</body>
</html> 
```

但它在 IE（版本<9.0）中不起作用。有人知道如何在 IE 中一次选择多个文件吗？我也尝试过 BlueImp & valums File uploader。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:37:42.210

在旧版浏览器中使用纯 HTML 无法实现这一点。我建议使用[Uploadify](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDMQFjAA&url=http://www.uploadify.com/&ei=E4EKUbSJDPOX0QWSsoCwAw&usg=AFQjCNEpTOmRIaTRQ7F8JNaxa7VhKljjwQ)作为 jQuery + Flash 解决方案的组合。

[您可以在此处](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#attr-input-multiple)阅读有关`multiple`输入的属性。在我看来，它仍处于早期阶段

# android - 设置操作栏的文本颜色？

> ID：14628219
> 
> 赞同：2
> 
> 时间：2013-01-31T14:33:09.383
> 
> 标签：android

> **可能重复：**
> [ActionBar 文本颜色](https://stackoverflow.com/questions/5861661/actionbar-text-color)

我有一个用于 v14 项目的普通操作栏。样式定义如下：

```
<style name="AppBaseTheme" parent="android:Theme.Holo.Light.DarkActionBar">
    <item name="android:actionBarStyle">@style/MyActionBar</item>
</style>

<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">#f00</item>
    <item name="android:textColor">#fff</item>
</style> 
```

背景颜色是红色，这很棒，但文本仍然是黑色。我希望它是白色的。我如何让它合作？

此外，是否列出了您可以使用 ActionBar 的所有 xml 属性？ActionBar 文档似乎没有列出它们，除非我错过了它们：

[http://developer.android.com/reference/android/app/ActionBar.html](http://developer.android.com/reference/android/app/ActionBar.html)

这将非常有帮助，

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T14:41:14.087

```
<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">#f00</item>
    <item name="android:titleTextStyle">@style/MyTextAppearance</item>
</style>

<style name="MyTextAppearance" parent="android:TextAppearance.Holo.Widget.ActionBar.Title">
    <item name="android:textColor">#ffffff</item>
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:46:59.797

自定义操作栏的最简单方法是使用这个很棒的操作栏样式生成器：

[http://jgilfelt.github.com/android-actionbarstylegenerator/](http://jgilfelt.github.com/android-actionbarstylegenerator/)

只需选择您想要的颜色和样式，下载 zip 并将资源导入您的项目。（目前仅支持 Chrome 浏览器）。

# java - Paypal - 从 Java Servlet 将产品发布到购物车 - 如何？

> ID：14628224
> 
> 赞同：0
> 
> 时间：2013-01-31T14:33:17.250
> 
> 标签：java, forms, servlets, paypal, shopping-cart

我的网站上有一个产品页面，每件商品都有一个加密的 Paypal 添加到购物车按钮。`<form>`下面是 Paypal的一个示例：

```
<form target="_self" action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="encrypted" value="-----BEGIN PKCS7----------END PKCS7-----
">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_cart_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

我想将处理程序添加到表单中，因此当客户单击“添加到购物车”按钮时，他们将在产品页面上看到一个表单/调查问卷，他们必须在将项目添加到购物车**之前**`onSubmit`填写并提交该表单/问卷。

 **成功提交由我的 Java Servlet 处理的表单后，我可以在 Servlet 中放入某种代码以将项目添加到购物车吗？直接发到Paypal？否则，我看到将商品放入购物车的唯一方法是要求客户再次单击“添加到购物车”按钮。

**我的概念流程是这样的——**

产品页面 >

单击添加到购物车按钮（贝宝表单代码中的 onSubmit 处理程序）>

div 与我的表单，而不是贝宝，有用户填写的字段，此表单显示在页面上 >

用户填写我的表格并提交 >

servlet 处理表单字段信息 >

表格已成功填写并处理 >

此时我需要将商品添加到购物车并将用户发送回产品页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:53:09.697

我假设您正在发送具有自定义属性的用户电子邮件 ID ..

成功提交。在您的 servlet 的发布中

String emailId = req.getParameter("custom");

这里是你想要的魔法代码

```
 if (emailId != null && transactionID != null) {
            if (!(paymentStatus.equals("Completed")
                    || paymentStatus.equals("Processed") || paymentStatus
                        .equals("Pending"))) {
                log.info("Paypal not completed.");
                sendInfo("Your process is not completed", req, resp);
            } else {
                if (transactionType.equals("subscr_cancel")) {
                    removeClientSubscription(emailId);  //This will hit my DB to update user
                } else {
                    log.info("Payment completed with Status - "
                            + paymentStatus);
                    upgradeClient(params, emailId);//this line hit my DB to update user
                }
            } 
```**

# regex - 带有$（字符串结尾）的Scala正则表达式

> ID：14628229
> 
> 赞同：4
> 
> 时间：2013-01-31T14:33:26.663
> 
> 标签：regex, scala

我有些为难。（我是正则表达式的专家，但在 scala/java 中使用得不多）。我有长度为 11 个字符的数字字符串，只需要最后 10 个，所以：

```
val Pattern = """(\d{10})$""".r
"79283767219" match {
  case Pattern(m) => m
} 
```

它给出了`MatchError`，但是为什么呢？！我误解了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T14:47:52.987

当您匹配正则表达式模式时，正则表达式模式应该匹配*整个*字符串。也就是说，它就像正则表达式模式以 . 开头`^`和结尾`$`。这背后的原因是 a`match`应该在右侧解构整个左侧。

使用 Scala 2.10，您可以调用`unanchored`以获取将进行部分匹配的匹配器，如下所示：

```
val Pattern = """(\d{10})$""".r.unanchored 
```

请放心，*您的*锚将被保留。只是期望匹配应该应用于将被删除的整个字符串。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T14:39:13.197

因为您有 11 位数字，而不是 10。您可以使用 设置“10 及更多” `{10,}`。要仅匹配字符串的结尾，您需要显式指定完整模式：

```
 val Pattern = """.*(\d{10})$""".r 
```

**更新：**在您使用 Scala 2.10 并且可以使用 Daniel 之前，`unanchored`您可以像这样解决它：

```
Pattern.findFirstIn("79283767219") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T14:44:41.310

请注意，当在构造中使用示例中的`RegEx`实例时，它*不是*搜索，而是*匹配！*这意味着它必须匹配被匹配的整个值（在 Scala 中称为“检查者”——在您的示例中为 <code>79283767219）。`Pattern``match`

 ***这就*解释了为什么你的例子得到了`MatchError`.**

# android - 将按钮添加到其他布局

> ID：14628235
> 
> 赞同：0
> 
> 时间：2013-01-31T14:33:48.453
> 
> 标签：android, android-layout

我有活动，并且在该活动中我想将按钮添加到我的布局中。这是代码：

```
public class SecondActivity extends Activity{

    ClassTabs tabs;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second_activity);
        tabs = new ClassTabs(getApplicationContext());
        Button button = new Button(getApplicationContext());
        tabs.addTab(button);
        Button next = (Button) findViewById(R.id.nextActivity);

        next.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(SecondActivity.this, ThirdActivity.class);
                startActivity(intent);
            }
        });
    }
} 
```

xml:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.example.actionbartest.ClassTabs
        android:id="@+id/tab"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        />

    <Button
        android:id="@+id/nextActivity"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" 
        android:layout_marginTop="100dp"
        />

</LinearLayout> 
```

类标签：

```
public class ClassTabs extends LinearLayout{

    Button button = new Button(getContext());
    public ClassTabs(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context);
    }
    public ClassTabs(Context context) {
        super(context);
        init(context);
    }
//  @Override
//  protected void onFinishInflate() {
//      super.onFinishInflate();
//      //((Activity)getContext()).getLayoutInflater().inflate(R.layout.tabview, this);
//      LayoutInflater inflater = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
//        inflater.inflate(R.layout.tabview, this);
//      
//  }

     private void init(Context context) {
            LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            inflater.inflate(R.layout.tabview, this);

        }
     public void addTab(Button child){
            LayoutInflater inflater = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View view =  inflater.inflate(R.layout.tabview, this);
            LinearLayout tab = (LinearLayout) view.findViewById(R.id.tab);
            tab.addView(child);
     }

} 
```

选项卡.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tab"
    android:layout_width="match_parent"
    android:layout_height="40dp"
    android:orientation="horizontal"
    android:background="@color/blue"
   >

</LinearLayout> 
```

如您所见，我在其中包含其他布局的活动。我想在代码中将按钮添加到其他布局（ClassTab）。我做了类似方法 addTab(Button child) 的事情，但是当我启动我的应用程序时我看不到那个按钮。如何在我的活动代码中添加按钮以包含布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:43:11.510

如果要动态添加按钮或任何其他视图，请尝试以下操作：

```
//Create a button
Button myButton = new Button(this);
myButton.setText("Test");

// Get the layout to add the button to
LinearLayout layout = (LinearLayout)findViewById(R.id.tab);

// If necessary add some paramters
LayoutParams layout_params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

// Finally add the button to the layout
layout.addView(myButton, layout_params); 
```

在您上面的代码中，我没有看到您定义了标题文本或布局参数，因此该按钮可能因为缺少内容而变得不可见。进一步看看你的布局，它是如何安排元素的，以确保新元素获得可见的位置。

# jquery - jQuery Cycle2 通过调整窗口大小来更改幻灯片元素的数量

> ID：14628243
> 
> 赞同：0
> 
> 时间：2013-01-31T14:34:29.737
> 
> 标签：jquery, resize, jquery-cycle, responsive-slides

我正在为台式机和平板电脑视图构建响应式设计。在这个设计中，我使用一个或多个带有[jQ​​uery Cycle2](http://jquery.malsup.com/cycle2/)的幻灯片构建。此幻灯片包含桌面 3 个滑块中的对象和平板电脑版本中的 2 个。

**我的方法：**我正在检查窗口调整大小事件，解开所有循环标题，将新标题包装在给定数量的元素周围，然后重新启动循环插件。

**我的问题：**一切正常，直到我尝试重新启动循环插件。如果没有任何失败或其他东西，它就无法正常工作。所以只是重新初始化似乎是问题所在。

**我的代码：**

```
//function to fire the resize event when its done
var delay = (function(){
    var timer = 0;
    return function(callback, ms){
    clearTimeout (timer);
    timer = setTimeout(callback, ms);
    };
})();

$(window).resize(function() {
    delay(function(){
        if( window.innerWidth <= 979 ){
            resizeWrapper( 2 );
        }
    }, 500);
});

//function for delete wrappers and wrap new ones based on a given number
function resizeWrapper( numberOfItems ){
    $( '.productsItem' ).unwrap();

    var $set_latestProductsCycle = $( '#latestProductsCycle' ).children();
    for( var i=0, len = $set_latestProductsCycle.length; i < len; i+=numberOfItems ){
        $set_latestProductsCycle.slice( i, i+numberOfItems ).wrapAll( '<div class="popularProductsWrapper"/>' );
    }
    $( '#latestProductsCycle' ).cycle({
        fx: 'scrollHorz',
        prev: '#latestProductsButtonLeft',
        next: '#latestProductsButtonRight',
        timeout: 0,
        caption: '.popularProductsWrapper'
    });
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:48:04.317

自己回答问题：

当您第一次调用循环脚本时，我忘记删除将创建的哨兵容器。此外，当我重新启动循环容器时，不需要定义“标题”。

简而言之，该函数应如下所示：

```
 function resizeWrapper( cycleContainer, numberOfItems ){
    $( cycleContainer ).cycle( 'destroy' );
    $( cycleContainer + ' .cycle-sentinel' ).remove();

    $( cycleContainer + ' .slider .item' ).unwrap();

    var $set_latestProductsCycle = $( cycleContainer ).children();

    for( var i=0, len = $set_latestProductsCycle.length; i < len; i+=numberOfItems ){
        $set_latestProductsCycle.slice( i, i+numberOfItems ).wrapAll( '<div class="slider"/>' );
    }

    $( cycleContainer ).cycle({
        fx: 'scrollHorz',
        prev: cycleContainer + 'Prev',
        next: cycleContainer + 'Next',
        timeout: 0
    });
} 
```

感谢大家的关注。

# jquery-ui - 以编程方式创建的按钮没有被 jQuery UI 设置样式

> ID：14628244
> 
> 赞同：0
> 
> 时间：2013-01-31T14:34:29.983
> 
> 标签：jquery-ui, button, styling

我在 $.ajax 调用的 success() 函数中向表中添加行，并且行中有一些提交输入。这是创建行的代码：

```
$.each(data, function(index,element) {
    $('table#tblBranchCoverage tbody').delay(300).append('<tr class="coverageRow">' +
        '<td class="deleteCounty">' +
            '<input type="checkbox" class="chkDeleteCounty" name="deleteCounties[]" value="' + element['id'] + '" />' +
        '</td>' +
        '<td class="countyCovered">' + 
            '<label class="branchCountyCovered coverageDisplay">' + element['branchCountyCovered'] + '</label>' +
            '<input type="text" class="edit editBox editCounty" value="' + element['branchCountyCovered'] + '" /><br />' + 
            '<input type="submit" class="edit button submitCoverageEdits" value="Save Changes" /><br />' +
            '<input type="submit" class="edit button cancelCoverageEdits" value="Cancel" />' +
            '<input type="hidden" id="branchCoverageID" value="' + element['id'] + '" />' +
        '</td>' +
        ... 
```

页面的其余输入由 UI 主题设置样式，但动态创建的表格行中的按钮则没有。

我尝试使用

```
$( ".submitCoverageEdits" ).button( "refresh" ); 
```

来自 UI 按钮文档。我没有在文档中看到可能适用于我的情况的任何其他内容。

将该行放入成功的 ajax 调用中会阻止创建整个表。将行移动到调用 ajax 函数**之后**完全没有“破坏”创建表，但按钮也没有样式。

如何将 UI 样式应用于在表格行中创建的按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:46:25.693

`$('#tblBranchCoverage tr:last').button( "refresh" );`在AJAX 成功处理程序中附加一行调用后。

# .net - 带有 Caliburn.Micro 的复杂 WPF 组合框

> ID：14628245
> 
> 赞同：1
> 
> 时间：2013-01-31T14:34:33.180
> 
> 标签：.net, wpf, mvvm, combobox, caliburn.micro

我正在 WPF 中构建一个视图，它应该有一个非常复杂的 ComboBox，使用 MVVM 模式和 Caliburn.Micro 框架。我对 WPF 和 Caliburn 很陌生，我希望我能在这里找到正确的答案。

这是我想象的：
![扩展组合框](../Images/0c3c445bc35cb5270a7705855d1f3e49.png)

如您所见，它由不同种类的项目和不同的子级别组成。只有项目是可选的，而不是它们的组。除此之外，我想在组合框上显示两个附加按钮，这取决于所选项目所属的项目组：
![缩小的组合框](../Images/2d90acca3ba2f4c4b471693642acf89b.png)

我知道我可以：

*   硬编码 XAML 中的组合框看起来像这样，但它对我不起作用，因为我需要在我的视图模型中拥有数据。
*   以编程方式在我的视图模型中定义控件树并将我的组合框的内容属性绑定到它。但是在我的视图模型中创建视觉效果似乎有点错误。
*   为组合框项创建一个视图模型（和一个视图）并设置各种属性来控制它们中的每一个的外观。
*   创建一个全新的控件，从 ComboBox 派生并以某种方式实现它。

至于这两个按钮，我可能会将它们放在组合框的顶部，并从主视图模型控制它们的可见性。

考虑了所有这些选项后，我仍然不确定我知道自己在这里做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:57:11.153

您可以使用模板重新设置 ComboBox 的样式以获得您想要的外观。
这是一个简单的例子：

**XAML**

```
<ComboBox Width="200" Height="30" ItemsSource="{Binding ItemList}">
    <ComboBox.ItemContainerStyle>
        <Style>
            <Setter Property="UIElement.IsEnabled" Value="{Binding IsSelectable}" />
        </Style>
    </ComboBox.ItemContainerStyle>
    <ComboBox.ItemTemplate>
        <DataTemplate >
            <StackPanel Orientation="Horizontal">
                <Image Name="ImageControl" Source="{Binding ImagePath}" Width="10" Height="10" />
                <Label Content="{Binding Name}" >
                    <Label.Style>
                        <Style TargetType="Label">
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Foreground" Value="Black" />
                                    <Setter Property="FontWeight" Value="Bold" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Label.Style>
                </Label>
            </StackPanel>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding IsSelectable}" Value="False">
                    <Setter TargetName="ImageControl" Property="Visibility" Value="Collapsed" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

**C＃**

```
// A class to hold my data for the combobox
public class Item
{
    public string Name { get; set; }
    public bool IsSelectable { get; set; }
    public string ImagePath { get; set; }
}

// In your datacontext
public ObservableCollection<Item> ItemList { get; set; }

public ComboBoxFun()
{
    ItemList = new ObservableCollection<Item>()
    {
        new Item() { ImagePath=@"/images/up.png", Name="Item Group 1", IsSelectable=false},
        new Item() { ImagePath=@"/images/up.png", Name="Item 1", IsSelectable=true},
        new Item() { ImagePath=@"/images/up.png", Name="Item 2", IsSelectable=true},
        new Item() { ImagePath=@"/images/up.png", Name="Item 3", IsSelectable=true},
        new Item() { ImagePath=@"/images/up.png", Name="Item Group 2", IsSelectable=false},
        new Item() { ImagePath=@"/images/up.png", Name="Item 1", IsSelectable=true},
        new Item() { ImagePath=@"/images/up.png", Name="Item 2", IsSelectable=true},
        new Item() { ImagePath=@"/images/up.png", Name="Item 3", IsSelectable=true}
    }; 
```

唯一棘手的部分是，当您禁用某个项目时，它将被设置为禁用，因此您必须设置不可选择项目的样式，使其看起来正常。

这是我的结果：

![结果](../Images/58c5de7ebcc4ffc29589c9957228ffed.png)

您可以选择任何非组项目，它的工作方式与普通 ComboBox 一样。至于您的按钮，您可以根据所选项目的数据简单地控制它们的可见性。

希望这可以帮助。

# objective-c - 目标 c 异常有什么用？

> ID：14628250
> 
> 赞同：1
> 
> 时间：2013-01-31T14:34:50.270
> 
> 标签：objective-c, exception, exception-handling

我读过很多关于 Objective-C 异常的文章，但我不知道它们有什么用处。当错误可恢复时（由于许多与泄漏相关的问题），不鼓励使用它们。内容为：在您使用 exit(0) （或类似构造）的任何地方使用它们。这也读作：只要你不希望它们被@catch-ed 使用它们。

我是否遗漏了什么，或者它们只是一个需要完全避免的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:43:10.300

这是来自 Apple 的*The Objective-C Programming Language*电子书：

> “重要提示：在许多环境中，异常的使用是相当普遍的。例如，您可能会抛出异常来表示例程无法正常执行 - 例如文件丢失或数据无法正确解析时。异常是资源-Objective-C 中的密集型。您不应该将异常用于一般的流程控制，或者仅仅表示错误。相反，您应该使用方法或函数的返回值来指示发生了错误，并提供有关问题的信息在错误对象中。有关更多信息，请参阅[错误处理编程指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ErrorHandlingCocoa/ErrorHandling/ErrorHandling.html#//apple_ref/doc/uid/TP40001806-CH201-SW1)。” （Apple *The Objective-C Programming Language*，第 10 章，异常处理）

据我了解，来自某些其他语言（Java？）的程序员习惯于使用异常/尝试/捕获处理程序乱扔代码作为流控制的手段。这在 Objective-C 中被认为是*非常糟糕的做法*，因为您的代码会严重影响性能。Apple 建议*应从发货代码中删除任何异常处理代码*。任何会引起异常的情况都将是导致崩溃情况的*程序员错误*，而不是用户错误。提供 NSError 对象用于运行时错误处理。

因此，异常的唯一用途似乎是作为调试辅助。但是我从来自某些其他环境的编码人员那里看到了太多糟糕的建议——所以我认为是的，最好完全避免。

另请参阅 Apple[关于错误和异常的说明](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ErrorHandlingCocoa/CreateCustomizeNSError/CreateCustomizeNSError.html%23//apple_ref/doc/uid/TP40001806-CH204-SW6)[，](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Exceptions/Articles/ExceptionsAndCocoaFrameworks.html#//apple_ref/doc/uid/TP40009045-SW1)以及：

> Cocoa 框架通常不是异常安全的。一般模式是异常只为程序员错误保留，捕获此类异常的程序应在之后立即退出。

# maven - Maven Jar 分类器

> ID：14628251
> 
> 赞同：0
> 
> 时间：2013-01-31T14:34:56.817
> 
> 标签：maven, pom.xml, classification

pom.xml 使用分类器构建 jars（用于开发、测试、阶段环境）。例如

```
 <profiles>
    <profile>
        <id>dev</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
    </profile>
    <profile>
        <id>jenkins-dev</id>
        <properties>
            <jar.classifier>default-jenkins-dev</jar.classifier>
        ...............
    </profile> 
```

mercurial 中有 2 个分支（默认，第二个）。

所以在第二个分支中，jar 分类器是“second-jenkins-dev”。

有几个模块（例如A，B，C）

当我的默认分支中的一些模块是最新构建时会出现问题（A 模块的最新 jar 是 A-default-jenkins-dev.jar）并且我尝试构建“第二个”分支的整个战争。我没有将 A-second-jenkins-dev.jar 作为依赖项，而是得到 A-default-jenkins-dev.jar

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:59:30.477

我认为您使用配置文件选择要构建的分支的策略令人困惑且容易出错（但这只是个人意见）。

我认为您需要检查以下内容以帮助您解决问题：

*   您是否注意配置文件以检查将要构建的源？
*   照顾好配置文件来定义你的依赖关系吗？
*   为什么开发配置文件是 activeByDefault ？
*   您是否使用相同的詹金斯工作来构建（默认和第二个）？在这种情况下，请注意工作空间将为两个构建共享。

替代解决方案：

修改分支中的 pom `second`，不要使用配置文件来处理这个问题。使用工件`<version>`来处理分支。保持`<classifier>`区分工件类型（例如，您可以基于相同的代码构建一个 src jar 和一个类 jar：这就是 maven 分类器背后的想法）

# android - 查询有关 GCM 服务

> ID：14628252
> 
> 赞同：1
> 
> 时间：2013-01-31T14:35:04.850
> 
> 标签：android, google-cloud-messaging

我正在为我的应用程序使用 GCM 服务，但不幸的是，如果设备上**没有**安装 GOOGLE PLAY STORE，则不支持 GCM。

但是手动，可以下载PLAY STORE，然后可以在上面使用GCM吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:12:09.207

> PLAY STORE 可以下载吗

仅侵犯谷歌的版权。

> 然后可以在上面使用 GCM 吗？

我不认为这是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:22:43.980

这里有一篇文章说明现在可以手动安装 Google Play 服务：
[http ://www.androidpolice.com/2012/09/26/google-play-services-can-now-be-installed-manually-from-the-play -store/](http://www.androidpolice.com/2012/09/26/google-play-services-can-now-be-installed-manually-from-the-play-store/)
他们提供的手动下载 Google Play 服务的链接在这里： http:
[//www.appbrain.com/app/google-play-services/com.google.android.gms](http://www.appbrain.com/app/google-play-services/com.google.android.gms)

我希望这有助于rolling.stones。除非您有正在尝试为其开发应用程序的特定设备，否则您可以考虑不要担心这些设备。
如果... 设备具有以前版本的 Google Market，则设备可以在接入互联网后自动更新。

# eclipse - 如何使用 Eclipse 在自动工具中强制编译器

> ID：14628253
> 
> 赞同：1
> 
> 时间：2013-01-31T14:35:04.507
> 
> 标签：eclipse, autotools

我从 Internet 上下载了一些包含自动工具功能的 C++ 源代码项目。所以，我想为我有编译器的arm设备交叉编译它；但是，我不知道如何在 autotools 参数上指示 arm 编译器，我尝试使用 CC=pathOfArmCompiler 在配置选项上设置我的编译器的路径，但它不起作用。

你有什么建议吗？我正在阅读更改 configure.ac 存档，但我不确定这是否是更好的解决方案。

提前致谢，

问候

编辑：

我尝试过使用以下配置的 Jack Kelly 建议

```
configure CC=/home/t/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/arm-mv5sft-linux-gnueabi-gcc CXX=/home/t/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/arm-mv5sft-linux-gnueabi-g++  CFLAGS="-m32" LDFLAGS="-m32"--host=arm-mv5sft-linux-gnueabi --with-sysroot=/home/t/s/arm-mv5sft-linux-gnueabi/SW3.2p1/arm-mv5sft-linux-gnueabi/ 
```

我得到这个错误

```
Command-line environment variables:
     LDFLAGS="-m32" LDFLAGS="-m32" CC="/home/t/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/arm-mv5sft-linux-gnueabi-gcc" CXX="/home/t/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/arm-mv5sft-linux-gnueabi-g++"

sh -c /home/t/ibrdtn/ibrdtn-tools-0.8.0/configure      ++ --host=arm-mv5sft-linux-gnueabi --with-sysroot=/home/t/s/arm-mv5sft-linux-gnueabi/SW3.2p1/arm-mv5sft-linux-gnueabi/ 
configure: WARNING: you should use --build, --host, --target
configure: WARNING: invalid host type: ++
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for arm-mv5sft-linux-gnueabi-strip... no
checking for arm-mv5sft-linux-gnueabi-strip... no
checking for strip... strip
configure: WARNING: using cross tools not prefixed with host triplet
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
Invalid configuration `++': machine `++' not recognized
configure: error: /bin/bash ./config.sub ++ failed
configure: error: /bin/bash ./config.sub ++ failed
checking build system type... 

Configuration failed with error 
```

编辑 2：重新安装 Eclipse 后，以前的错误消失了。但是现在有了这个配置

```
./configure --build=i686-linux --host=arm-mv5sft-linux-gnueabi
--target=arm-mv5sft-linux-gnueabi
CC=/home/t/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/arm-mv5sft-linux-gnueabi-gcc
CXX=/home/t/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/arm-mv5sft-linux-gnueabi-g++
--with-gnu-ld--with-sysroot=/h/t/s/arm-mv5sft-linux-gnueabi/SW3.2p1/arm-mv5sft-linux-gnueabi
CFLAGS="-m32" LDFLAGS="-m32" --prefix=/ibrdtn-svn/dtnCross/ 
```

检查配置输出我得到了这个

```
checking for arm-mv5sft-linux-gnueabi-g++... no
checking for arm-mv5sft-linux-gnueabi-c++... no
checking for arm-mv5sft-linux-gnueabi-gpp... no
checking for arm-mv5sft-linux-gnueabi-aCC... no
checking for arm-mv5sft-linux-gnueabi-CC... no
checking for arm-mv5sft-linux-gnueabi-cxx... no
checking for arm-mv5sft-linux-gnueabi-cc++... no
checking for arm-mv5sft-linux-gnueabi-cl.exe... no
checking for arm-mv5sft-linux-gnueabi-FCC... no
checking for arm-mv5sft-linux-gnueabi-KCC... no
checking for arm-mv5sft-linux-gnueabi-RCC... no
checking for arm-mv5sft-linux-gnueabi-xlC_r... no
checking for arm-mv5sft-linux-gnueabi-xlC... no 
```

...

```
make[3]: Entering directory `/home/t/ibrdtn/ibrcommon-0.8.0/ibrcommon/net'
  CXX    tcpclient.lo
  CXX    tcpserver.lo
  CXX    tcpstream.lo
  CXX    udpsocket.lo
  CXX    MulticastSocket.lo
  CXX    UnicastSocket.lo
  CXX    stopandwait.lo
  CXX    vsocket.lo
  CXX    vinterface.lo
  CXX    vaddress.lo
  CXX    LinkManager.lo
In file included from LinkManager.cpp:16:
../../ibrcommon/net/NetLinkManager.h:19:29: error: netlink/netlink.h: No such file or directory
../../ibrcommon/net/NetLinkManager.h:20:26: error: netlink/attr.h: No such file or directory
make[3]: *** [LinkManager.lo] Error 1
make[3]: Leaving directory `/home/t/ibrdtn/ibrcommon-0.8.0/ibrcommon/net'
make[2]: Leaving directory `/home/t/ibrdtn/ibrcommon-0.8.0/ibrcommon'
make[2]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/t/ibrdtn/ibrcommon-0.8.0/ibrcommon'
make[1]: *** [all] Error 2
make: *** [all-recursive] Error 1

**** Build Finished **** 
```

所以我认为编译器没有正确咳嗽，你知道可能的原因吗？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:17:49.663

在交叉编译自动工具包时`configure`，您需要考虑三个选项`--host`：`--build`和`--target`.

*   `--host`: 二进制文件将在什么平台上运行？
*   `--build`: 什么平台在编译？
*   `--target`: 在构建编译器时，它应该针对什么平台？

（是的，这意味着可以使用 sparc 机器编译在 x86 上运行但以 ARM 为目标的编译器。这被称为加拿大十字。）

这些选项的参数采用（一般）形式`ARCH-VENDOR-OS-LIBC`，但有时会省略一个或多个部分。一些例子：

*   `i686-pc-linux-gnu`
*   `i586-pc-mingw32`
*   `arm-mv5sft-linux-gnueabi`

这些用作被调用的任何*工具*（编译器、链接器、脚本中`ar`找到的任何东西`AC_CHECK_TOOL`）的前缀。`configure`

所以论点`--host`是`arm-mv5sft-linux-gnueabi`，但是呢`--build`？

好吧，`configure`通常可以猜到（通过调用一个名为 的辅助脚本`config.guess`），所以试试下面的：

```
./configure \
   --host=arm-mv5sft-linux-gnueabi \
    PATH="/home/t/s/arm-mv5sft-linux-gnueabi/SW3.2pi/bin:$PATH" 
```

# c# - 对象生命周期、Windows 窗体和依赖注入 (Windsor)

> ID：14628254
> 
> 赞同：1
> 
> 时间：2013-01-31T14:35:06.470
> 
> 标签：c#, winforms, dependency-injection, castle-windsor, object-lifetime

**快速背景：**我已经（大部分）读完了 Mark Seemann 的“.NET 中的依赖注入”，并准备成为一名 DI 忍者。我重构了我的代码库以使用构造函数注入，使用 Windsor 连接我的对象，并且成功了！

……除了没有。我的程序最初在其整个生命周期中显示了几种形式，这最初是通过根据需要将它们全部 new() 来完成的。但是，既然我是 NIT（忍者培训），我知道 new() 是邪恶的，必须将其放逐到组合根中。

**问题：**我的第一个端到端使用测试涉及向用户显示我的“主”窗口。可以关闭此窗口，稍后可以再次调出新版本。这在后 DI 代码库中运行良好，直到第二次显示表单。碰撞。表格已经被处理掉了。在连接我的 DI 容器时，我告诉它使用 Form 的类来实现特定的接口，并且正如预期的那样，它为该对象提供了单例生命周期。

**问题：**所以我很确定解决这个问题的方法是不依赖于表单实现的接口，而是依赖于该接口的工厂。这是我对如何进行感到困惑的地方。

我的第一个想法是创建一个与表单具有相同构造函数签名的工厂，存储所有这些依赖项，然后在需要时创建一个表单。然而，这感觉就像穷人的 DI，我已经经历了在 Windsor 容器中注册所有东西的麻烦。所以这导致我...

我的第二个想法是创建一个工厂，将 DI 容器作为依赖项，然后每次只需要 .Resolve()s （这次使用短暂的生活方式）。我怀疑我会加入 .Closed 事件并在那里释放（遵循 Register-Resolve-Release 模式）。

**真正的问题：**我喜欢我的第二个想法，但出于某种原因，它感觉就像一个黑客。我不知道这是因为它是（并且有更好的方法）还是我的蜘蛛侠感官还没有针对 DI 进行调整。那么，归根结底，“第二个想法”是一种有效的方法还是一种代码味道？

另外，如果我将这种方法用于不提供挂钩“关闭”事件的方法，那么我应该如何设计释放机制，以便工厂提醒/鼓励我在完成后释放对象？（在某些时候我可能会忘记，否则......）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:34:13.050

最终为我工作的同时仍然让我的下层不知道 DI 容器是在下层创建一个工厂接口，然后在我的组合根层实现该工厂。

IE：

```
namespace MyApp.InterfaceLayer
{
    public interface IFormFactory
    {
        IForm GetForm();
    }
}
namespace MyApp.CompositionRoot
{
    class FormFactory : IFormFactory
    {
        Castle.Windsor.IWindsorContainer Container { get; set; }

        public FormFactory(Castle.Windsor.IWindsorContainer container)
        {
            Container = container;
        }
        public IForm GetForm()
        {
            return Container.Resolve<IForm>();
        }
    }
} 
```

然后，我当然会注册我的表单，该表单`IForm`使用短暂的生活方式实现，并将我的容器注册为`IWindsorContainer`.

到目前为止，这一直像冠军一样工作！

# c - 为什么带有指针的c程序不起作用？

> ID：14628256
> 
> 赞同：-4
> 
> 时间：2013-01-31T14:35:10.390
> 
> 标签：c, pointers

我正在学习 c 中的指针。
我在下面写了这段代码，但它没有运行。
问题是什么？

```
#include<stdio.h>
#include<conio.h>

int main()
{
    const int ARR_SIZE=5;
    int *arr;
    for(int i=0;i<ARR_SIZE;i++){
        *(arr+i) = i*10;
    }
    for(int i=0;i<ARR_SIZE;i++){
        printf("%d. Element is: %d\n",i+1,*(arr+i));
    }
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T14:36:26.463

```
int *arr; 
```

只是一个指针，它的工作是指向另一个地址。它应该指向有效且足够的内存，以便您可以在该内存上写一些东西。
任何一个，

*   在本地存储上分配一个数组并将指针指向该数组或
*   在堆上分配动态内存并将指针指向该内存。

* * *

**解决方案1：**

```
int array[ARR_SIZE];
int *arr = &array; 
```

**解决方案2：**

```
int *arr = malloc(sizeof(int) * ARR_SIZE);
//...
//...
//Free the memory once done with usage
free(arr); 
```

* * *

注意在解决方案 2 中，当您使用分配内存时，`malloc`您必须通过调用`free`返回的地址显式释放内存`malloc`。
在解决方案 1 中，您不必显式释放任何东西，因为`array`它是一个本地/自动数组，它会在声明它的范围结束时自动被`{`释放`}`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T14:37:03.270

您应该初始化 arr：

```
int *arr = malloc(sizeof(int) * ARR_SIZE);
//... program
free(arr); 
```

# php - 无法正确设置信封发件人，电子邮件进入 gmail 中的垃圾邮件

> ID：14628261
> 
> 赞同：1
> 
> 时间：2013-01-31T14:35:21.573
> 
> 标签：php, email, spam, sender

我真的被困住了。我正在生成的电子邮件为信封发件人设置了没有人的 apache 地址。

这是我的 PHP 代码：

```
$to = $emailresult;
    include 'inc/msg/resetpassword.php';
    if(mail($to, $subject, $body, $headers, '-f' . $from)) {
        echo 'A temporary password has been sent to ' . $emailresult . '. Please check your inbox and logon with your new password';
        } else {
        echo("Message delivery failed...");
        } 
```

第 2 行包含的文件

```
<?php
$subject = "XXXClient Dashboard - Password Reset Request Received";
$headers .= "From: XXX Alert <".$from.">\r\n" . "Reply-To: XXXSupport     <support@XXX.com>\r\n" . "X-Mailer: PHP/" . phpversion() . "\r\nX-originating-IP: XXX.167.43.105\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

$body = $email_header . '
    <h1 style="color: #666666;font-weight: normal;font-size: 18px;text-align: center;padding: 0;margin: 0;">We have recieved a request to reset your password. </h1>
    <p>Hello,
    <br>
    Your new temporary password is <b>' . $passwordresult .
    '</b>. You may logon to the <a style="color:#8A2BE2; text-decoration:none; font-weight:bold;" href="'. $site_url . '">XX Client Dashboard</a> with your email address and temporary password, then visit the profile section where you can choose a new password.</p>

' . $email_footer;
?> 
```

这是我收到的电子邮件来源：http: [//pastebin.com/nbGUaHP1](http://pastebin.com/nbGUaHP1)

可以很好地处理我的工作电子邮件，但是当我发送到 gmail 时，它总是会变成垃圾邮件。我正确设置了 -f 标志，但它不想更改信封发件人，所以我相信这就是问题所在。有人知道为什么信封发件人不会使用此代码设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:09:03.977

我正在编辑我的代码的错误部分。我最终让它工作了。即使有信封发件人和 SPF 通行证，我仍然会登陆 gmail 垃圾邮件文件夹，这很糟糕。

# mysql - 错误代码：1062。键“PRIMARY”的重复条目“1”

> ID：14628269
> 
> 赞同：36
> 
> 时间：2013-01-31T14:35:48.107
> 
> 标签：mysql, mysql-workbench, error-code, mysql-error-1062

当我尝试此错误消息时，我对此错误消息有疑问：

```
INSERT INTO `PROGETTO`.`UFFICIO-INFORMAZIONI` (`ID`, `viale`, `num_civico`,  
`data_apertura`, `data_chiusura`, `orario_apertura`, `orario_chiusura`, 
`telefono`, `mail`, `web`, `Nome-paese`, `Comune`) 
VALUES (1, 'Viale Cogel ', '120', '2012-05-21', '2012-09-30', '08:00', '23:30',
'461801243', 'informazioni@bolzano.it', 'Bolzanoturismo.it', 'Bolzano', 'BZ') 
```

***错误代码：1062。键“PRIMARY”的重复条目“1”***

我没有自动增量数据，请帮助我！

这是与表相关的**UFFICIO-INFORMAZIONI**

```
CREATE  TABLE IF NOT EXISTS `PROGETTO`.`UFFICIO-INFORMAZIONI` (
  `ID` INT(11) NOT NULL ,
  `viale` VARCHAR(45) NULL ,
  `num_civico` VARCHAR(5) NULL ,
  `data_apertura` DATE NULL ,
  `data_chiusura` DATE NULL ,
  `orario_apertura` TIME NULL ,
  `orario_chiusura` TIME NULL ,
  `telefono` VARCHAR(15) NULL ,
  `mail` VARCHAR(100) NULL ,
  `web` VARCHAR(100) NULL ,
  `Nome-paese` VARCHAR(45) NOT NULL ,
  `Comune` CHAR(2) NOT NULL ,
  PRIMARY KEY (`ID`) ,
  INDEX `Nome_paese` (`Nome-paese` ASC) ,
  INDEX `Comune` (`Comune` ASC) ,
  CONSTRAINT `Nome_paese`
    FOREIGN KEY (`Nome-paese` )
    REFERENCES `PROGETTO`.`PAESE` (`Nome-paese` )
    ON DELETE NO ACTION
    ON UPDATE CASCADE,
  CONSTRAINT `Comune`
    FOREIGN KEY (`Comune` )
    REFERENCES `PROGETTO`.`PAESE` (`Comune` )
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB 
```

**插入**

```
INSERT INTO `PROGETTO`.`UFFICIO-INFORMAZIONI` (`ID`, `viale`, `num_civico`, `data_apertura`, `data_chiusura`, `orario_apertura`, `orario_chiusura`, `telefono`, `mail`, `web`, `Nome-paese`, `Comune`) VALUES (1, 'Viale Cogel ', '120', '2012-05-21', '2012-09-30', '08:00', '23:30', '461801243', 'informazioni@bolzano.it', 'Bolzanoturismo.it', 'Bolzano', 'BZ');
    INSERT INTO `PROGETTO`.`UFFICIO-INFORMAZIONI` (`ID`, `viale`, `num_civico`, `data_apertura`, `data_chiusura`, `orario_apertura`, `orario_chiusura`, `telefono`, `mail`, `web`, `Nome-paese`, `Comune`) VALUES (2, 'Via Olmo', '45', '2012-05-01', '2012-09-30', '08:00', '23:30', '393495169301', 'informazioni@lech.it', 'Lechinformation.it', 'Lech', 'BZ');
    INSERT INTO `PROGETTO`.`UFFICIO-INFORMAZIONI` (`ID`, `viale`, `num_civico`, `data_apertura`, `data_chiusura`, `orario_apertura`, `orario_chiusura`, `telefono`, `mail`, `web`, `Nome-paese`, `Comune`) VALUES (3, 'Via Quercia', '37', '2012-05-11', '2012-09-30', '08:00', '23:30', '393381679321', 'info@trento.it', 'Trentoinformaiozni.it', 'Trento', 'TN');
    INSERT INTO `PROGETTO`.`UFFICIO-INFORMAZIONI` (`ID`, `viale`, `num_civico`, `data_apertura`, `data_chiusura`, `orario_apertura`, `orario_chiusura`, `telefono`, `mail`, `web`, `Nome-paese`, `Comune`) VALUES (4, 'Via Atene', '76', '2012-06-01', '2012-09-15', '08:00', '23:30', '39349361345', 'info@sanmartinodicastrozza.it', 'SanMartino.it', 'San Martino di Castrozza', 'TN');
    INSERT INTO `PROGETTO`.`UFFICIO-INFORMAZIONI` (`ID`, `viale`, `num_civico`, `data_apertura`, `data_chiusura`, `orario_apertura`, `orario_chiusura`, `telefono`, `mail`, `web`, `Nome-paese`, `Comune`) VALUES (5, 'Via Salice', '45', '2012-05-01', '2012-09-20', '08:00', '23:30', NULL, 'info@pejo.it', 'Pejoturismo.it', 'Pejo', 'TN');
    INSERT INTO `PROGETTO`.`UFFICIO-INFORMAZIONI` (`ID`, `viale`, `num_civico`, `data_apertura`, `data_chiusura`, `orario_apertura`, `orario_chiusura`, `telefono`, `mail`, `web`, `Nome-paese`, `Comune`) VALUES (6, 'Piazza Sempreverde', '34', '2012-05-15', '2012-09-15', '08:00', '23:30', '392516789', 'info@ortisei.it', 'Ortisei.it', 'Ortisei', 'BZ'); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-31T14:37:24.133

产生错误的~~主要原因~~是，在您插入的表中，您将其定义为（*值是唯一的*`1`）的列已经存在一个现有值。`ID``PRIMARY KEY`

 *为什么不将列设置`ID`为`AUTO_INCREMENT`？

```
CREATE  TABLE IF NOT EXISTS `PROGETTO`.`UFFICIO-INFORMAZIONI` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `viale` VARCHAR(45) NULL ,
   ..... 
```

当您插入记录时，您现在可以跳过该列`ID`

```
INSERT INTO `PROGETTO`.`UFFICIO-INFORMAZIONI` (`viale`, `num_civico`, ...) 
VALUES ('Viale Cogel ', '120', ...) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-02-02T09:36:40.153

如果您使用的是**PHPMyAdmin** ，您可以通过以下方式解决此问题：

> 注意：如果您想维护表中的现有记录，请不要使用此解决方案。

**第一步：**选择数据库导出方式自定义：

![在此处输入图像描述](../Images/b5e44d0c66444f7d4fc8c28a3a2bb239.png)

**第 2 步：**请确保在插入数据创建选项之前检查 truncate table：

![在此处输入图像描述](../Images/1c9831ac53e56af0af0f79c767ab0f79.png)

现在您可以成功导入此数据库。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-05-05T23:37:27.357

如果您有一个新数据库并且您进行了全新的干净导入，则问题可能来自插入包含“0”增量的数据，这将转换为“1”`AUTO_INCREMENT`并导致此错误。

我的解决方案是在 sql 导入文件中使用。

```
SET SESSION sql_mode='NO_AUTO_VALUE_ON_ZERO'; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-08-29T14:24:47.853

如果您尝试从 SQL 转储填充表，请确保转储的“INSERT INTO”语句中列出的表与您尝试填充的表相同。如果转储试图将条目放入可能已经有条目的“MyOtherTable”中，则打开“MyTable”并使用 SQL 转储导入会引发这种错误。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-25T09:24:32.680

问题与您的文件有关-您正在尝试使用副本创建数据库-在文件的顶部，您会发现如下内容：

**如果不存在则创建数据库`*THE_NAME_OF_YOUR_DB*`默认字符集 latin1 整理 latin1_general_ci; 使用`*THE_NAME_OF_YOUR_DB*`；**

而且我确定您已经有一个具有此名称的数据库 - 在同一服务器中 - 请检查。只需更改名称或删除此行！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-03T15:26:00.983

当我遇到这种错误时，我不得不将数据类型更新一个档次。例如，如果我将其设置为“tiny int”，则将其更改为“small int”~ Nita

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-01-23T16:56:09.700

还要检查你的触发器。

遇到了一个历史表触发器，该触发器试图将主表`id`插入历史表`id`而不是正确的`hist-table`。`source_id`柱子。

更新语句根本没有触及该`id`列，因此需要一些时间才能找到：

```
UPDATE source_table SET status = 0; 
```

触发器试图做类似的事情：

```
FOR EACH ROW
BEGIN
    INSERT INTO `history_table` (`action`,`id`,`status`,`time_created`)
    VALUES('update', NEW.id, NEW.status, NEW.time_created);
END; 
```

被更正为这样的事情：

```
FOR EACH ROW
BEGIN
    INSERT INTO `history_table` (`action`,`source_id`,`status`,`time_created`)
    VALUES('update', NEW.id, NEW.status, NEW.time_created);
END; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-13T14:03:59.217

我刚刚遇到了同样的问题，但这里似乎是因为我将 ID 列声明为无符号，并且结合 ID 值“0”（零）导致导入失败......

因此，通过将我声明为“0”的每个 ID（PK 列）和每个相应的 FK 的值更改为新值，我的问题就解决了。*

# javascript - javascript警报方法

> ID：14628273
> 
> 赞同：0
> 
> 时间：2013-01-31T14:36:06.583
> 
> 标签：javascript

为什么以下行没有提醒？

```
 <script>
  alert(x);//this line is not executed or alerted  ???.It should have alerted "undefined" 
  console.log(x)//reference error 
  var y="maizere";
  alert(y);//this line is also not executed or alerted  ???

  </script> 
```

任何未声明的变量都被视为 javascript 中的全局变量，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:38:17.127

```
alert(x);//this line is not executed or alerted  ???.It should have alerted "undefined" 
```

这是不正确的。这条线引发了 a`ReferenceError`因为没有 variable `x`。

将此与情况进行对比：

```
var obj = {};
alert(obj.x); // undefined - there's no attribute x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:41:35.663

你越来越`undefined`困惑`undeclared`。

该变量`x`未声明 - 它尚未在代码中声明，因此

```
alert(x); 
```

会引发类似的错误`'x' is not declared`。

您的代码应阅读

```
<script>
  var x;
  alert(x);//this line is not executed or alerted  ???.It should have alerted "undefined" 
  var y="maizere";
  alert(y);//this line is also not executed or alerted  ???
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:38:01.967

`alert`应该定义您在调用中放入的任何内容。如果不是（您的情况），则会引发错误。因此，您应该首先定义变量。对于错误，您应该检查 JavaScript（浏览器）控制台。

```
var x = "Test";
alert(x); // shows
var y = 123;
alert(y); // y also shows, because there is no error thrown inside the alert for x 
```

# module - 从内核 (3.7) 模块读取 block_device：submit_bio 中的段错误，缺少 bd_disk

> ID：14628275
> 
> 赞同：3
> 
> 时间：2013-01-31T14:36:08.170
> 
> 标签：module, io, kernel, block-device

你好堆栈溢出。

想知道我在尝试直接从内核模块访问块设备时出了什么问题。（amd64 上的内核 3.7）

我使用 get_gendisk() 获得了设备的 (struct gendisk*)。接下来，使用 bio_map_kern() 创建一个 bio，使用 bdget_disk() 添加 block_device，然后使用 submit_bio() 发送它。（见下面的代码）

在“sdb”上执行此操作时，它工作正常。在“loop0”或 ramdisk 设备上执行此操作时，它会因段错误而失败。故障归结为 generic_make_request_checks() 调用内联函数 bdev_get_queue()，它试图访问 block_device 结构中的“bd_disk”字段。

RIP：0010：[] [] generic_make_request_checks+0x3e/0x2b1

当从 'sdb' 获取 block_device 时，bd_disk 被链接回设备的 gendisk 结构（在它的任何分区上）。在“loop0”设备上尝试相同操作时，此指针为零。但是 loop0 已正确设置，因为我可以使用它进行 mkfs、mount 或 dd。

有关如何设置简单数据读取的任何提示？干净和正确的方法？将 gendisk 指针添加到 block_device 不是一个好的解决方案，因为我不“拥有”这些结构。

也许这种方法都是错误的，我错过了一些简单的 read() 函数...... :-)

调用堆栈（内核 3.7，amd64）：

```
[<ffffffff812796f5>] generic_make_request_checks+0x3e/0x2b1
[<ffffffff8103c2b8>] ? console_trylock+0xf/0x47
[<ffffffff8103dad0>] ? vprintk_emit+0x3aa/0x3d0
[<ffffffff81279976>] ? generic_make_request+0xe/0xd5
[<ffffffff8127a75c>] ? submit_bio+0x10a/0x13b
[<ffffffffa02ad191>] ? init_tryKM2+0x16e/0x221 [tryKM2]
[<ffffffffa02ad023>] ? endFunc_tryKM2+0x23/0x23 [tryKM2]
[<ffffffff810020b6>] ? do_one_initcall+0x75/0x12b
[<ffffffff8107c9a3>] ? sys_init_module+0x105/0x251
[<ffffffff8145f1e9>] ? system_call_fastpath+0x16/0x1b 
```

我尝试这个的测试代码：

```
#include <linux/module.h>
#include <linux/kernel.h>
#include <linux/fs.h>
#include <linux/blkdev.h>
#include <linux/genhd.h>
#include <linux/bio.h>
#include <linux/completion.h>

typedef struct _drvDat
{
    dev_t di;
    struct gendisk *gd;
} drvDat;

#define printf(...) printk(KERN_ALERT "tryKM2: " __VA_ARGS__)
#define DEVNAME "loop0"
#define PARTITIONNO 0

static int init_tryKM2(void)
{
    int dummy;
    // init self
    memset(&self,0,sizeof(self));

    self.di = blk_lookup_devt(DEVNAME,0);    // use partition zero here. gendisk handle is same anyway.
    if(self.di==0)
        return -1;
    self.gd = get_gendisk(self.di,&dummy);        // get_gendisk always gets the 'disk', even if dev_t points to a partition.
    if(self.gd==0)
        return -1;

    // check if have partitions  (this array always has at least one entry. That is same as &(self.gd->part0)
    if(self.gd->part_tbl->len<1+PARTITIONNO)
        {put_disk(self.gd);self.gd=0;return -1;}

    readbytes_tryKM2(&self);

    return 0;
}

static void endFunc_tryKM2(struct bio *bb, int err)
{
    if(bb->bi_private)
        complete( (struct completion*)(bb->bi_private) );
}

static void readbytes_tryKM2(drvDat *self)
{
    struct bio *bb;
    DECLARE_COMPLETION_ONSTACK(waithandle);
    unsigned char *buf;
    unsigned int i,j;

    printf("readbytes_tryKM2\n");
    buf = (unsigned char*)vmalloc(0x800);
    memset( buf , 0xFE , 0x800 );

    bb = bio_map_kern( self->gd->queue , buf , 0x400 , GFP_KERNEL );
    if( IS_ERR(bb) )
        {vfree(buf);return;}

    bb->bi_sector = 0;

    bb->bi_bdev = bdget_disk(self->gd,PARTITIONNO);
    printf("   bi_bdev = %016lX\n",(unsigned long)(bb->bi_bdev));
    printf("   bi_bdev->bd_disk = %016lX\n",(unsigned long)(bb->bi_bdev->bd_disk));

    bb->bi_end_io = endFunc_tryKM2;
    bb->bi_private = &waithandle;

    printf("  send...\n");
    submit_bio( 0 , bb );
    printf("  wait...\n");
    wait_for_completion(&waithandle);

    printf("  done. flags=0x%X\n",(unsigned int)(bb->bi_flags));

    if(!( bb->bi_flags & (1<<BIO_UPTODATE) ))
        {bio_put(bb);vfree(buf);return;}

    // just dump data... (misusing upper half of buffer)
    for(i=0;i<0x400;i+=0x20)
    {
        for(j=0;j<0x20;j++)
            snprintf( (char*)(buf+0x400+3*j) , 8 , "%02X " , (unsigned int)buf[i+j] );
        buf[3*0x20-1]=0;
        printf("   %s\n",buf+0x400);
    }

    bio_put(bb);

    vfree(buf);
}

module_init(init_tryKM2);
module_exit(cleanup_tryKM2); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-24T13:16:26.483

我发现我会首先通过它的路径查找 bdev：

```
struct block_device *bdev;
bdev = lookup_bdev("/dev/loop0"); 
```

然后打开它：

```
bb->bi_bdev = blkdev_get_by_dev(bdev->bd_dev, FMODE_READ|FMODE_WRITE, NULL); 
```

或者

```
bb->bi_bdev = blkdev_get_by_path("/dev/loop0", FMODE_READ|FMODE_WRITE, NULL); 
```

没有 FMODE_EXCL。但是完成后，您需要关闭设备：

```
blkdev_put(bb->bi_bdev, FMODE_READ|FMODE_WRITE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T10:35:14.103

而不是 bb->bi_bdev = bdget_disk(self->gd,PARTITIONNO); 试试这个 bb->bi_bdev = blkdev_get_by_dev(self->di, FMODE_READ|FMODE_WRITE|FMODE_EXCL, NULL);

# powershell - 并行运行 Quest cmdlet 并将输出保存到文件

> ID：14628277
> 
> 赞同：2
> 
> 时间：2013-01-31T14:36:10.547
> 
> 标签：powershell, powershell-3.0, quest

我对 Powershell 很陌生，在并行运行我的代码时几乎没有问题。我当前的代码按顺序工作，但到目前为止，让它并行运行的每一次尝试都失败了。这是我打算做的事情：

我需要查询多个域控制器（我使用 Quest cmdlet 中的 get-qaduser 等）来收集我需要的所有信息。由于我目前通过另一个域控制器联系一个域控制器，因此脚本运行了很长时间。我的想法是使用 PS 3.0 的新工作流功能，但显然不允许我将结果导出到文件中。

工作脚本（按顺序）：

```
Add-PSSnapin Quest.ActiveRoles.ADManagement
get-QADUser -Service 'domaincontroller:389' -SizeLimit 0 > OutputFile.csv
get-QADUser -Service 'domaincontroller2:389' -SizeLimit 0 > OutputFile2.csv
and so on 
```

这是我到目前为止所尝试的：

```
Just an excerpt - there are more get-qaduser and domains in the real script
Workflow Get-Domainaccounts{
    Parallel{
        get-QADUser -Service 'domaincontroller:389' -SizeLimit 0 
    }
} 
```

但是在运行时我收到此错误消息：

```
Microsoft.PowerShell.Utility\Write-Error : The term 'get-QADUser' is not
recognized as the name of a cmdlet, function, script file, or operable
program. Check the spelling of the name, or if a path was included, verify
that the path is correct and try again. 
```

所以我考虑将这些片段添加到我的工作流程中：

```
Workflow Get-Domainaccounts{
 inlinescript {Add-PSSnapin Quest.ActiveRoles.ADManagement}
    Parallel{
        get-QADUser -Service 'domaincontroller:389' -SizeLimit 0 
    }
} 
```

简单地添加它们是行不通的，使用 inlinescript 命令不会将其传递给执行 get-QADUser 的线程。我还尝试通过我的个人资料添加管理单元，但工作流程忽略了它。

* * *

在 Technet 上，我发现这个功能实际上适用于内置 cmdlet，但同样不适用于 Quest 工具。[ForEach-Parallel.ps1](http://gallery.technet.microsoft.com/scriptcenter/Foreach-Parallel-Parallel-a8f3d22b) 该函数使用干净的运行空间（我假设工作流也这样做）。

这是我尝试运行它的方式：

```
the hosts.txt contains: 
get-QADUser -Service 'domaincontroller:389' -SizeLimit 0 > OutputFile.csv

get-content .\hosts.txt | ForEach-Parallel -ScriptBlock {
    $_ | invoke-expression 
} 
```

但我没有得到任何输出 - 没有错误消息，什么都没有。在没有 | 的情况下运行代码 调用表达式有效并向我显示文件的内容。我究竟做错了什么？

我要做的就是并行运行 Quest cmdlet。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:26:28.967

Your error indicates you do not have the Quest Module imported into the workflow session, try something like this... Get your workflow session inside of the $Session variable

```
Invoke-Command -Session $Session -ScriptBlock {Import-Module <ModuleName> -Verbose} 
```

Hope this helps, Chris

# z3 - Z3：将 Z3py 表达式转换为 SMT-LIB2？

> ID：14628279
> 
> 赞同：7
> 
> 时间：2013-01-31T14:36:13.980
> 
> 标签：z3

给定 Z3py 中的表达式，我可以将其转换为 SMT-LIB2 语言吗？（所以我可以将此 SMT-LIB2 表达式提供给支持 SMT-LIB2 的其他 SMT 求解器）

如果可能，请举一个例子。

非常感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-31T15:14:29.217

我们可以使用 C API `Z3_benchmark_to_smtlib_string`。C API 中的每个函数都在 Z3Py 中可用。此功能最初用于以 SMT 1.0 格式转储基准，它早于 SMT 2.0。这就是为什么它有一些看似不必要的参数。现在，默认情况下，它将以 SMT 2.0 格式显示基准。输出**并不**意味着人类可读。我们可以编写如下 Python 函数，使其使用起来更方便：

```
def toSMT2Benchmark(f, status="unknown", name="benchmark", logic=""):
  v = (Ast * 0)()
  return Z3_benchmark_to_smtlib_string(f.ctx_ref(), name, logic, status, "", 0, v, f.as_ast()) 
```

这是一个使用它的小例子（也可以[在这里](http://rise4fun.com/Z3Py/FFcT)在线获得）

```
a = Int('a')
b = Int('b')
f = And(Or(a > If(b > 0, -b, b) + 1, a <= 0), b > 0)
print toSMT2Benchmark(f, logic="QF_LIA") 
```

# actionscript-3 - ADOBE AIR 中的 PDF

> ID：14628286
> 
> 赞同：0
> 
> 时间：2013-01-31T14:36:31.517
> 
> 标签：actionscript-3, air, flex4, alivepdf

我正在创建一个 ADOBE AIR 应用程序。

我的 Hbox 中有一些文本框和标签。我想生成一个 pdf 并且必须将该 hbox 添加到该 pdf 中。很多人都在谈论**alivepdf**。我搜索了，但没有看到演示..如果您有任何想法，请分享我，或建议我..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:37:03.103

I think it could help you.

This are my Air-application and the PDF-file.

![enter image description here](../Images/1d93aae395810ca4b4d10d63941cedf6.png)

![enter image description here](../Images/c7973e6ea13416ff096d63edf4229292.png)

//source

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:mx="library://ns.adobe.com/flex/mx">
<fx:Script>
    <![CDATA[
        import org.alivepdf.display.Display;
        import org.alivepdf.fonts.*;
        import org.alivepdf.layout.*;
        import org.alivepdf.pages.Page;
        import org.alivepdf.pdf.PDF;
        import org.alivepdf.saving.Method;

        protected function onBtnGeneratePDF(event:MouseEvent):void
        {
            var pdf:PDF = new PDF( Orientation.PORTRAIT, Unit.MM, Size.A4 ); 
            pdf.setDisplayMode( Display.FULL_PAGE, Layout.SINGLE_PAGE );

            var newPage:Page = new Page ( Orientation.PORTRAIT, Unit.MM, Size.A4 );
            pdf.addPage( newPage );

            pdf.addText("This is my PDF from AdobeFlex", 5, 10);

            pdf.addImage(hgMain, null, 5, 10);

            var fs:FileStream = new FileStream();  
            var file:File = File.desktopDirectory.resolvePath("testPage.pdf");   
            fs.open(file, FileMode.WRITE);   
            var bytes:ByteArray = pdf.save(Method.LOCAL);   
            fs.writeBytes(bytes);   
            fs.close();
        }
    ]]>
</fx:Script>

<s:HGroup id="hgMain" x="10" y="10" width="439" height="161">
    <s:Label text="MyLabel_01"/>
    <s:TextArea width="133" height="116" contentBackgroundColor="#E6B3B3" fontStyle="italic"
                text="MyTextArea"/>
    <s:Label fontWeight="bold" text="MyLabel_02"/>
    <s:TextArea width="127" height="69" contentBackgroundColor="#CED4F2" fontSize="15"
                fontWeight="bold" text="MyTextArea"/>
</s:HGroup>
<s:Button x="10" y="179" label="Generate PDF" click="onBtnGeneratePDF(event)"/>

</s:WindowedApplication> 
```

# java - 将arrayList 添加到单独类中的另一个arrayList？

> ID：14628288
> 
> 赞同：0
> 
> 时间：2013-01-31T14:36:39.123
> 
> 标签：java, arrays, arraylist

我在将用户详细信息的 arrayList 添加到另一个 arrayList 时遇到了一些困难，其中包含我创建的每个用户的详细信息。

我有 2 个课程：`addUser`和`Database`.

在`addUser`课堂上，我有以下代码：

```
 JLabel submitButton = new JLabel("Submit: ");
        contentPane.add(submitButton);
        JButton addUser = new JButton("+ Add User");
        addUser.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            addToArray();
            databaseArray.add(app);
            frame.dispose();}});
        contentPane.add(addUser);

        frame.pack();
        frame.setVisible(true);
        frame.setLocationRelativeTo(null);
    }

    //arraylist of details for a single applicant
    final ArrayList<String> app = new ArrayList<String>();
    public void addToArray()
    {
        appNumber = appNumberField.getText();
        name = nameField.getText();
        date = dateField.getText();
        fileLoc = fileLocField.getText();
        country = countryRefField.getText();
        app.add(appNumber);
        app.add(name);
        app.add(date);
        app.add(fileLoc);
        app.add(country);
    } 
```

在数据库类中，我有以下代码：

```
public class Database
{
    public ArrayList<ArrayList> applicants;

    /**
     * Constructor for objects of class Database
     */
    public Database()
    {
        applicants = new ArrayList<ArrayList>();
    }

    /**
     * adds a new applicant to the database
     */
    public void addApplicant(ArrayList app)
    {
        applicants.add(app);
    }

    public void list()
    {
       int n = applicants.size();
       for(int i = 0; i < n ; i++)
       System.out.println(applicants.get(i));
    }
} 
```

但是，当我从`addUser`类中添加用户时，当我在类中使用 list 方法时它不会出现`Database`。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:58:19.093

```
import java.util.ArrayList;

public class Store {
int appNumber;// = appNumberField.getText();
String name;// = nameField.getText();
int date;// = dateField.getText();
boolean fileLoc;// = fileLocField.getText();
String country;// = countryRefField.getText();

public Store(int appNumbe, String nam, int dat, boolean fileLo,
        String countr) {
    appNumber = appNumbe;
    name = nam;
    date = dat;
    fileLoc = fileLo;
    country = countr;
}

public static void main(String[] args) {

    ArrayList<Store> app = new ArrayList<Store>();
    app.add(new Store(22, "Name", 2, false, "India"));

}
} 
```

我认为您应该尝试这样的方法来存储数据。这将很容易插入和检索。

# php - 我的链接使用 jquery 无法正常工作

> ID：14628289
> 
> 赞同：0
> 
> 时间：2013-01-31T14:36:48.343
> 
> 标签：php, javascript, jquery, css, codeigniter

我有这样的链接

```
 <li><a class='myclass' href="<?php echo base_url();?>index.php/controller">Search</a></li> 
```

我的jQuery是

```
 $("a.myclass").click(function(){
 var link  = $(this);
 var url = link.attr("href");
 $(".content").load(url); 

 return false; 

}); 
```

实际上它正确链接问题是我的菜单中的列表看起来很难看，但它看起来应该是虽然其他 li 看起来不错。当我更改为

```
 <li><a class='.myclass.' href="<?php echo base_url();?>index.php/controller">Search</a></li> 
```

它看起来正确，但它没有链接到任何东西。

这里有什么问题？

这是我的CSS

```
 .webwidget_vertical_menu {
    float: left;
    width: 20%;
    background-color: #fff;
    padding-bottom: 10px;

    }
 .webwidget_vertical_menu ul{
    padding: 0.5px;
    margin: 0px;
    font-family: Arial, Helvetica, sans-serif;

}
.webwidget_vertical_menu li{

}
.webwidget_vertical_menu ul li{
    list-style: none;
    position: relative;

}
.webwidget_vertical_menu ul li a{
    padding-left: 15px;
    text-decoration: none;

}
.webwidget_vertical_menu ul li ul{
    display: none;
    position: absolute;
    background-color: #fff;
    z-index: 999999;
}
.webwidget_vertical_menu ul li ul li{
    position: relative;
    margin: 0px;
    border:none;
}
.webwidget_vertical_menu ul li ul li ul{

}
.webwidget_vertical_menu_down_drop{
    background-position: right center;
    background-repeat:no-repeat !important;
}
.webwidget_vertical_menu ul li li{
    font-weight: normal;
}

body {
    font: 100%/1.4 Verdana, Arial, Helvetica, sans-serif;
    background-color: #42413C;
    margin: 0;
    padding: 0;
    color: #000;

}

ul, ol, dl { 
    padding: 0;
    margin: 0;
}
h1, h2, h3, h4, h5, h6, p {
    margin-top: 0;  
    padding-right: 15px;
    padding-left: 15px; 
}
a img { 
    border: none;
}

a:link {
    color:#414958;
    text-decoration: underline; 
}
a:visited {
    color: #4E5869;
    text-decoration: underline;
}
a:hover, a:active, a:focus { 
    text-decoration: none;
}

.container {
    width: 80%;
    max-width: 1260px;
    background: #FFF;
    margin: 0 auto; 
}

.header {
    background-color: #ADB96E;

}

.sidebar1 {

    float: left;
    width: 20%;
    background-color: #EADCAE;
    padding-bottom: 10px;
}
.content {
    padding: 10px 0;
    width: 60%;
    float: left;
}
.sidebar2 {
    float: right;
    width: 20%;
    background-color: #EADCAE;
    padding: 10px 0;
}

.content ul, .content ol { 
    padding: 0 15px 15px 40px; }

ul.nav {
    list-style: none; 
    border-top: 1px solid #666; 
    margin-bottom: 15px; 
}
ul.nav li {
     border-bottom: 1px solid #666; 
     list-style: none;
     position:relative;
     }
ul.nav a, ul.nav a:visited { 
    padding: 5px 5px 5px 15px;
    display: block; 
    text-decoration: none;
    background-color: #C6D580;
    color: #000;
}
ul.nav a:hover, ul.nav a:active, ul.nav a:focus { 
    background: #ADB96E;
    color: #FFF;
}

/* ~~The footer ~~ */
.footer {
    padding: 10px 0;
    background: #CCC49F;
    position: relative;
    clear: both; 
}

/* ~~miscellaneous float/clear classes~~ */
.fltrt {  
    float: right;
    margin-left: 8px;
}
.fltlft { 
    float: left;
    margin-right: 8px;
}
.clearfloat { 
    clear:both;
    height:0;
    font-size: 1px;
    line-height: 0px; 
}
.menu {
    color: #414141;
    font-size:16px;
    font-weight:650; 
    text-align: center;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:42:58.677

您不需要类名中的点 (.)。

尝试这个：

```
<li><a class='myclass' href="<?php echo base_url();?>index.php/controller">Search</a></li> 
```

和jquery...

```
// This means select the `<a>` element with class `myclass`. 
// Dot (.) means class selector.
$("a.myclass").click(function(){
    var link  = $(this);
    var url = link.attr("href");
    $(".content").load(url); 

    return false; 

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:42:45.663

好吧，我需要更多的条件来准确回答，但我想有一些 css 样式用于`myclass`. 尝试将 myclass 重命名为类似的名称`f-ajax-link-selector`（不要忘记在 JS 中更改它）并尝试刷新页面。

# openerp - 在 OpenERP 7 中禁用导出功能

> ID：14628292
> 
> 赞同：1
> 
> 时间：2013-01-31T14:36:53.617
> 
> 标签：openerp

我需要在 OpenERP 7 中禁用将合作伙伴导出为 CSV 或 XLS 的功能。

正如我所读到的，这可以通过将一组用户的权限更改为 ir.export.linea 和 ir.export 来完成。但是发生的情况是，通过给出“导出”按钮，实际上打开了提示用户没有权限的警报窗口，但如果用户关闭此警报，后面是完全可访问且功能齐全的导出窗口！

有什么方法可以禁用或隐藏“导出”菜单？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:06:01.843

您可以调整 css 以隐藏它 - 有点 hack，但它是最简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:26:54.743

在版本 7 中，您可以轻松停止 OpenERP 的导出功能。只需转到设置 - 配置 - 常规设置并取消选中允许用户从 CSV 文件导入数据

# linux - 带有 lsof 的脚本在 shell 上运行良好，而不是在 cron 上运行

> ID：14628297
> 
> 赞同：14
> 
> 时间：2013-01-31T14:36:59.653
> 
> 标签：linux, shell, cron, lsof

我有一个小脚本可以计算 Linux 上打开的文件并将结果保存到平面文件中。我打算每分钟在 Cron 上运行一次，以便稍后收集结果。脚本如下：

```
/bin/echo "Timestamp: ` date +"%m-%d-%y %T"` Files: `lsof | grep app | wc -l`" 
```

crontab 是这样的：

```
*/1 * * * * /usr/local/monitor/appmon.sh >> /usr/local/monitor/app_stat.txt 
```

如果我从 shell ./script.sh 运行，它运行良好并输出为：

```
Timestamp: 01-31-13 09:33:59 Files: 57 
```

但在 Cron 输出上是：

```
Timestamp: 01-31-13 09:33:59 Files: 0 
```

不确定是否需要任何权限或类似权限。我也尝试在 lsof 上使用 sudo ，但没有运气。

有什么提示吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-31T14:51:27.577

从你的工作命令行，做

```
which lsof
which grep
which wc
which date 
```

获取每个命令的完整路径并将它们添加到您的 shell 脚本中，生成类似

```
/bin/echo "Timestamp: `/bin/date +"%m-%d-%y %T"` Files: `/usr/sbin/lsof | /bin/grep app | /bin/wc -l`" 
```

或者您可以设置一个 PATH 变量以在您的脚本中包含缺失值，即

```
 PATH=/usr/sbin:${PATH} 
```

此外，除非您希望您的脚本在真正的 Bourne Shell 环境中运行，否则请加入 90 年代初期并使用`$( cmd ... )`cmd 替换的形式，而不是反引号。1995 年出版的 Ksh 93 书指出，命令替换的反引号已被弃用；-)

IHTH

# codeigniter - 如何在codeigniter中实现paypal配置文件

> ID：14628301
> 
> 赞同：0
> 
> 时间：2013-01-31T14:37:03.653
> 
> 标签：codeigniter, paypal, configuration-files

我正在尝试将 paypal 配置信息与 application/paypal_library 文件分开。基本上配置信息是 API_username、API_pwd、API_signiture 等。

原来的结构是这样的：

```
class Paypal_library {

    protected $ci;

    public $API_UserName = xxx;
    public $API_Password = xxx;
    public $API_Signature = xxx;
    ...
    ...
    function __construct() {
        $this->ci = & get_instance();
    }
    otherfunctions 
```

所以我将这些变量移动到一个名为 config/paypal_config.php 的新配置文件中。并放

```
$config['paypal_api_username'] =xxx;
$config['paypal_api_password'] = xxx;
$config['paypal_api_signature'] = xxx; 
```

但是当我在 paypal_library.php 中调用这个配置文件时遇到了问题。我用了：

```
 protected $ci;

    $CI = & get_instance();
    $CI->config->load("paypal_config",TRUE);
    $config = $CI->config->item('paypal_config');

    public $API_UserName = $config['paypal_api_username'];
    public $API_Password = $config['paypal_api_password'];
    public $API_Signature = $config['paypal_api_signature'];
    ...
    ...
    function __construct() {
        $this->ci = & get_instance();
    } 
```

但这不起作用，因为我似乎不能将 $CI=&get_instance() 放在构造函数之前？但是，如果我将它们放在构造函数中，paypal 在支付过程中找不到这些变量。

那么我怎样才能在这里实现 paypal_config 文件呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:02:03.990

在任何方法之外初始化实例都是符合逻辑的。您应该在 construt 方法中对其进行初始化，以使其在类执行期间可用。

关于您无法访问这些变量的事实，我看到您已将变量置于公共状态。为什么不将它们设为私有，这样其他类就不会访问它们（出于安全原因）并构建一些 get 方法来获取它们的状态？

```
private $API_UserName = $config['paypal_api_username'];
public get_PaypalUsername(){

     return $this->CI->API_UserName;

} 
```

编辑：

忘了说变量应该在 _construct 方法中初始化，并且总是绑定到你的 Singleton 实例

```
public __construct()
{
   $this->ci = & get_instance();
   $this->CI->API_UserName = $API_UserName;
   //etc

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:02:15.433

您应该在构造函数中设置属性。

```
function __construct()
{
  $this->ci =& get_instance();
  $this->ci->load->config('paypal_config', TRUE);
  $config = $this->ci->config->item('paypal_config');

  $this->API_UserName = $config['paypal_api_username'];
  $this->API_Password = $config['paypal_api_password'];
  $this->API_Signature = $config['paypal_api_signature'];
} 
```

一个类只能包含[方法和属性定义](http://www.php.net/manual/en/language.oop5.basic.php)。

API 属性定义之前的示例中的操作在语法上不正确，将导致解析错误。

# c# - 返回参数中分配的类型变量？

> ID：14628309
> 
> 赞同：1
> 
> 时间：2013-01-31T14:37:33.700
> 
> 标签：c#, winforms, class, types

我正在尝试创建一个像 Windows 窗体这样的类，它将具有多个新功能。它只是一个“更好”的版本`Form`，使我在这个确切的程序上的工作更容易。这是我到目前为止所拥有的：

```
public class SuperForm : Form
{
    protected abstract void OnSizeChanged(object sender, EventArgs e);

    public SuperForm()
    {
        this.SizeChanged += OnSizeChanged;
    }
} 
```

不多，它只确保每个表单都必须定义`OnSizeChanged`在大小更改时将自动调用的表单，但还会有更多。

接下来我需要的是一个方法，它将类/类型作为参数并初始化该类型的新对象，自动将其添加到`Controls`然后返回该对象。这是一个关于我希望它是什么样的示例代码（不起作用）：

```
public cls NewControl(ClassType cls) // This obviously doesn't work.
// I need it to return an object of type "cls" parameter.
{
    cls newControl = new cls();
    this.Controls.Add(newControl);
    return newControl;
} 
```

我知道`ClassType`这不是一个有效的类型，这就是我需要帮助的原因。

然后我基本上可以这样称呼它：

```
Button b = this.NewControl(Button); 
```

这将返回一个新按钮并将其添加到`this.Controls`. 当一个控件被初始化时，我最终可能需要做更多这些常见的任务，所以这就是为什么我想在它自己的方法中使用它。

这在 C# 中可能吗？如果没有，是否有任何解决方法？一种方法是为每个继承自`Control`这样的类定义一个方法：

```
public Button NewControl(Button b);
public TextBox NewControl(TextBox tb);
public ListBox NewControl(ListBox lb); 
```

但这对我来说似乎不是一个有效的选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T14:40:57.843

听起来你想创建一个泛型方法，对类型参数有几个约束：

```
public T CreateAndAdd<T>() where T : Control, new()
{
    T newControl = new T();
    Controls.Add(newControl);
    return newControl;
} 
```

这里的`T : Control`约束确保您正在创建一个控件，以便您可以使用`Controls.Add`. 约束确保类型参数具有公共无`T : new()`参数构造函数，以便您可以调用`new T()`.

例如，要创建一个 TextBox，您可以这样调用该函数：

```
var tb = CreateAndAdd<TextBox>() 
```

（顺便说一句，我已经重命名了我认为清晰的方法。）

# wpf - WPF 绑定到自定义控件中的自定义属性

> ID：14628311
> 
> 赞同：8
> 
> 时间：2013-01-31T14:37:41.123
> 
> 标签：wpf, binding

我有一个自定义文本框，定义如下：

```
public class CustomTextBox : TextBox
{
    public static DependencyProperty CustomTextProperty = 
             DependencyProperty.Register("CustomText", typeof(string), 
             typeof(CustomTextBox));

    static CustomTextBox()
    {
        TextProperty.OverrideMetadata(typeof(SMSTextBox),
                      new FrameworkPropertyMetadata(string.Empty,
                      FrameworkPropertyMetadataOptions.Journal |
                          FrameworkPropertyMetadataOptions.BindsTwoWayByDefault,
                      new PropertyChangedCallback(CustomTextBox_OnTextPropertyChanged));
    }

    public string CustomText
    {
        get { return (string)GetValue(CustomTextProperty); }
        set { SetValue(CustomTextProperty, value); }
    }

    private static void CustomTextBox_OnTextPropertyChanged(DependencyObject d,
                     DependencyPropertyChangedEventArgs e)
    {
        CustomTextBox customTextBox = d as CustomTextBox;

        customTextBox.SetValue(CustomTextProperty, e.NewValue);
    }
} 
```

我在 XAML 中绑定自定义文本属性 -

```
<local:CustomTextBox CustomText="{Binding ViewModelProperty}" /> 
```

我面临的问题是，当我在 CustomTextBox 中输入任何内容时，更改不会反映在 ViewModelProperty 中，即 ViewModelProperty 没有得到更新。CustomTextProperty 正在更新，但我想我需要做一些额外的事情来使绑定也能正常工作。

我不做什么？我将不胜感激有关此的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T14:41:17.957

我想绑定需要是双向的。

```
<local:CustomTextBox
    CustomText="{Binding ViewModelProperty, Mode=TwoWay}" /> 
```

`Mode`如果`CustomText`默认情况下将属性绑定为双向，则无需指定：

```
public static readonly DependencyProperty CustomTextProperty =
    DependencyProperty.Register(
        "CustomText", typeof(string), typeof(CustomTextBox),
        new FrameworkPropertyMetadata(
            FrameworkPropertyMetadataOptions.BindsTwoWayByDefault)); 
```

您可能还必须为`CustomText`更新`Text`属性的属性定义一个 PropertyChangedCallback（即您现在实现的另一个方向）。否则，TextBox 不会显示最初包含在 ViewModel 属性中的任何内容，当然也不会在 ViewModel 属性更改时更新。

# asp.net-mvc-3 - Asp.net mvc 3 模型不会自动绑定？

> ID：14628313
> 
> 赞同：0
> 
> 时间：2013-01-31T14:37:42.240
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4, entity-framework-4.1

我现在正在学习 asp.net mvc 3，并且正在学习本教程 Contoso University

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application)

我在这部分使用乐观并发处理编辑模型

我知道通过使用类似的东西

```
[HttpPost]
public ActionResult Edit(Department department) 
```

模型会自动绑定，即使没有要编辑的部门id的隐藏字段，编辑也不会失败。

但是每当我尝试删除这个视图中的两个隐藏字段时：

```
@model MvcContosoUniversity.Models.Department

@{
    ViewBag.Title = "Edit";
}

<h2>Edit</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Department</legend>

       @Html.HiddenFor(model => model.DepartmentID) 
         @Html.HiddenFor(model => model.Timestamp)
        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Budget)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Budget)
            @Html.ValidationMessageFor(model => model.Budget)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.StartDate)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.StartDate)
            @Html.ValidationMessageFor(model => model.StartDate)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.InstructorID, "Administrator")
        </div>
        <div class="editor-field">
            @Html.DropDownList("InstructorID", String.Empty)
            @Html.ValidationMessageFor(model => model.InstructorID)
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

我在控制器中收到错误，这是控制器的代码：

```
 // GET: /Department/Edit/5

        public ActionResult Edit(int id)
        {
            Department department = db.Departments.Find(id);
            ViewBag.InstructorID = new SelectList(db.Instructors, "InstructorID", "FullName", department.InstructorID);
            return View(department);
        }

        //
        // POST: /Department/Edit/5

        [HttpPost]
        public ActionResult Edit(Department department)
        {
            try
            {
                if (ModelState.IsValid)
                {
                    db.Entry(department).State = EntityState.Modified;
                    db.SaveChanges();
                    return RedirectToAction("Index");
                }
            }
            catch (DbUpdateConcurrencyException ex)
            {
                var entry = ex.Entries.Single();
                //Another option is to put the try-catch inside a function
                try
                {
                    var databaseValues = (Department)entry.GetDatabaseValues().ToObject();
                    var clientValues = (Department)entry.Entity;
                    if (databaseValues.Name != clientValues.Name)
                        ModelState.AddModelError("Name", "Current value: "
                            + databaseValues.Name);
                    if (databaseValues.Budget != clientValues.Budget)
                        ModelState.AddModelError("Budget", "Current value: "
                            + String.Format("{0:c}", databaseValues.Budget));
                    if (databaseValues.StartDate != clientValues.StartDate)
                        ModelState.AddModelError("StartDate", "Current value: "
                            + String.Format("{0:d}", databaseValues.StartDate));
                    if (databaseValues.InstructorID != clientValues.InstructorID)
                        ModelState.AddModelError("InstructorID", "Current value: "
                            + db.Instructors.Find(databaseValues.InstructorID).FullName);
                    ModelState.AddModelError(string.Empty, "The record you attempted to edit "
                        + "was modified by another user after you got the original value. The "
                        + "edit operation was canceled and the current values in the database "
                        + "have been displayed. If you still want to edit this record, click "
                        + "the Save button again. Otherwise click the Back to List hyperlink.");
                    department.Timestamp = databaseValues.Timestamp;
                }

                catch(NullReferenceException e)
                {
                    ModelState.AddModelError("","Error \n "+e.Message);
                }
            }
            catch (DataException)
            {
                //Log the error (add a variable name after Exception)
                ModelState.AddModelError(string.Empty, "Unable to save changes. Try again, and if the problem persists contact your system administrator.");
            }

            ViewBag.InstructorID = new SelectList(db.Instructors, "InstructorID", "FullName", department.InstructorID);
            return View(department);
        } 
```

这是模型的代码：

```
public class Department
    {
        public int DepartmentID { get; set; }

        [Required(ErrorMessage = "Department name is required.")]
        [MaxLength(50)]
        public string Name { get; set; }

        [DisplayFormat(DataFormatString = "{0:c}")]
        [Required(ErrorMessage = "Budget is required.")]
        [Column(TypeName = "money")]
        public decimal? Budget { get; set; }

        [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
        [Required(ErrorMessage = "Start date is required.")]
        public DateTime StartDate { get; set; }

        [Display(Name = "Administrator")]
        public int? InstructorID { get; set; }

        public virtual Instructor Administrator { get; set; }
        public virtual ICollection<Course> Courses { get; set; }

         [Timestamp]
        public Byte[] Timestamp { get; set; }
    } 
```

是否可以在不使用隐藏字段的情况下使其工作？

先生/女士，您的回答会很有帮助。谢谢++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:41:02.557

根据您的`HttpPost`操作签名，不，这是不可能的。您正在执行，`Edit`因此它将需要`Id`正在更新的行的 。由于您没有映射`Id`in 操作方法签名，并且不存在包含该信息的隐藏字段，因此 id 将永远不会映射到`Department`模型。结果是您将尝试在没有行 ID 的情况下执行更新。

**编辑**：您可以像这样修改您的动作签名：`Edit(int id, Department department)`，但是您必须手动将 设置`department.Id`为`id`传递，这似乎会使模型有些脱节。

# c# - 从后端（AJAX）在页面中运行 JavaScript？

> ID：14628317
> 
> 赞同：0
> 
> 时间：2013-01-31T14:37:54.163
> 
> 标签：c#, javascript, asp.net

我不熟悉将 JavaScript 集成到网站中，但我会在我的网站中经常需要它。

这是一个例子：假设我有这个功能：

```
showAlert() 
```

说我有：

```
<div id="some_div">

</div> 
```

有人可以为我提供一些可以做到这一点的示例：如果我有一个按钮并且用户单击它，这应该在后端引发一个事件并在我的 C# 文件中调用一些方法。然后我的 C# 文件应该能够调用前端的一些其他 javascript 方法，该方法将调用 showAlert() 并在 div 中显示警报。

这是我似乎无法找到任何信息的内容。

将信息传入和传出服务器的基本思想。对此的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:44:58.703

最好的办法是使用 jquery 之类的框架，然后绑定到按钮，调用服务并处理响应。下面是一个简单的例子。

```
$(document).ready(function()
    $('#Button1').bind('click', function () { 
        // This grabs the page you are in so that you can call it correctly
        var pagePath = window.location.pathname;  
        var testId = $("#some_div").val();
        var url = pagePath + "/TestService";          
        $.post(url, { id: testId },
            function (data) {
                showAlert(data);
            }
        });
    };
}); 
```

首先，您需要确保文档在某个时候准备就绪。Bind 允许在文档加载时绑定按钮。然后，通过单击它，您执行获取 testId、调用您的服务并在成功回调中处理数据响应的匿名函数。

希望这能让你朝着正确的方向开始！

编辑：添加后端网络表单“服务”曝光

```
public partial class _Default : System.Web.UI.Page 
{
    protected void Page_Load(object sender, EventArgs e) 
    {

    }

    [WebMethod]
    public static string TestService(string id) 
    {
        var string = DBCollection.FirstOrDefault(x => x.id == id); // Or whatever you want to return the data
        return "You called me on " + DateTime.Now.ToString() + "with " + string;
    }
} 
```

这将允许您调用页面上公开的“WebMethod”。有关此方面的更多帮助，请参阅以下链接。

[http://www.tugberkugurlu.com/archive/asp-net-web-forms---calling-web-service-page-methods-using-jquery](http://www.tugberkugurlu.com/archive/asp-net-web-forms---calling-web-service-page-methods-using-jquery)

编辑：在网络表单中执行此类方法时的其他注意事项。 [在 asp.net webforms 中使用 jquery 调用 webmethod](https://stackoverflow.com/questions/6928533/calling-a-webmethod-with-jquery-in-asp-net-webforms)

# asp.net - 使用哪个数据控件？

> ID：14628327
> 
> 赞同：0
> 
> 时间：2013-01-31T14:38:24.393
> 
> 标签：asp.net, c#-4.0, webforms

我需要能够查看 SQL 数据库中的数据，并选择要打印的特定行（稍后处理）。考虑到我不需要在任何时候编辑数据，而我所需要的只是带有一个额外复选框的数据，那么最好的控制是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:45:20.417

最有可能是[GridView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview%28v=vs.100%29.aspx)：

```
<asp:SqlDataSource id="CustomersSource"
  SelectCommand="SELECT CustomerID, CompanyName, FirstName, LastName FROM SalesLT.Customer"
  ConnectionString="<%$ ConnectionStrings:AWLTConnectionString %>" 
  runat="server"/>

<asp:GridView id="CustomersGridView" 
  DataSourceID="CustomersSource" 
  AutoGenerateColumns="False"
  EmptyDataText="No data available." 
  AllowPaging="True" 
  runat="server" DataKeyNames="CustomerID">
    <Columns>
        <asp:BoundField DataField="CustomerID" HeaderText="CustomerID" 
            InsertVisible="False" ReadOnly="True" SortExpression="CustomerID" />
        <asp:BoundField DataField="CompanyName" HeaderText="CompanyName" 
            SortExpression="CompanyName" />
        <asp:BoundField DataField="FirstName" HeaderText="FirstName" 
            SortExpression="FirstName" />
        <asp:BoundField DataField="LastName" HeaderText="LastName" 
            SortExpression="LastName" />
    </Columns>
</asp:GridView> 
```

# insert - 使用 Apache Jena 进行实时更新

> ID：14628328
> 
> 赞同：0
> 
> 时间：2013-01-31T14:38:30.807
> 
> 标签：insert, jena

我有一个要求，我需要对我的本体数据（在 Jena 中）进行实时更新（每分钟大约 30 次插入/更新）我想知道 Jena 是否适合过度更新。另外，如果没有，是否有任何其他基于语义网络的技术支持过度更新？

另外，如果我想在我的模型中插入大量资源，有没有办法自动（按顺序）为新资源生成 URI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:07:29.417

我不能肯定——它可能对你有用。这取决于更新中的数据量、使用的存储系统和机器的功能。

没有服务器端自动生成资源名称。Jena 库包含一个 URN UUID 生成器（用于 V1 UUID 类型），Java 提供 V4 类型。这可以帮助您在应用程序中生成唯一名称。

# python - python的fcntl.ioctl中的'op'是什么意思？

> ID：14628333
> 
> 赞同：1
> 
> 时间：2013-01-31T14:38:45.310
> 
> 标签：python, linux, python-2.7, fcntl

根据[fcntl 文档](http://docs.python.org/2/library/fcntl.html)，用法`fcntl.ioctl`如下：

```
 fcntl.ioctl(fd, op[, arg[, mutate_flag]]) 
```

`op`定义为

```
The operation is defined by op and is operating system dependent. These codes are also found in the fcntl module. 
```

它没有回答“什么”操作。它是一个整数吗？一个字符串？一个结构？如何能够正确使用此命令，例如在 Linux 平台上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:43:51.857

与 fcntl 和 os 模块中的许多其他函数一样，`ioctl`它是对同名 OS 系统调用的薄包装。如果您查阅[该系统调用的手册页，](http://www.kernel.org/doc/man-pages/online/pages/man2/ioctl.2.html)您将看到它是一个整数。

附加参数（在 之后`op`）`ioctl`可以是任何东西。`ioctl`众所周知，可变参数取决于请求的具体内容，甚至取决于内核或驱动程序代码接收和处理请求的部分。差异驱动程序甚至可以重用整数值`op`来表示不同的事物（尽管鼓励它们进行协调以避免这种重复）。

# sql - Oracle 笛卡尔积与联接

> ID：14628334
> 
> 赞同：4
> 
> 时间：2013-01-31T14:38:50.397
> 
> 标签：sql, oracle, join, cartesian-product

在我的公司，我们使用 Oracle 数据库。我注意到每个人都这样写他们的查询：

```
SELECT p.name, p.id, o.issued_date
FROM orders o, products p
WHERE o.productid = p.id; 
```

在这种情况下，数据库在做什么？制作笛卡尔积然后只选择某些行？这听起来不太对劲。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T14:41:42.827

> 在这种情况下，数据库在做什么？

与指定 ANSI 连接时相同：

```
SELECT *
FROM orders o
JOIN products p ON o.productid = p.id 
```

> 我注意到每个人都这样写他们的查询 [...]

看起来贵公司的很多人都有多年的 Oracle 经验！我敢打赌，他们也使用`(+)`外连接表示法。这是 Oracle[在 9i 版本之前](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:13430766143199)唯一支持的语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-23T19:17:16.973

实际上，这是内部连接最古老的 ANSI 标准。其他回复中的人提到它不是ANSI语法，但它不太正确。构造像

```
SELECT p.name, p.id, o.issued_date
FROM orders o, products p
WHERE o.productid = p.id; 
```

遵循 SQL 的 ANSI 88 标准（现在称为隐式连接表单）。然而，它已被更新的 ANSI 92 显式形式的内连接、外连接和交叉连接所取代：

```
-- Inner join
SELECT p.name, p.id, o.issued_date
FROM orders o [INNER] JOIN products p
ON o.productid = p.id
WHERE (residual conditions);

-- Outer joins:
SELECT p.name, p.id, o.issued_date
FROM orders o LEFT|RIGHT|FULL [OUTER] JOIN products p
ON o.productid = p.id
WHERE (residual conditions);

-- Explicit corss join:
SELECT p.name, p.id, o.issued_date
FROM orders o CROSS JOIN products p
WHERE (residual conditions); 
```

这正是因为先前的语法具有误导性并且容易出错，因为连接条件很容易与剩余条件混合并且可能被错误地丢失。这就是强烈建议使用显式语法的原因。

方括号[]表示'noise'（可选）关键字，竖线| 表示“或”（您可以将它们放在 LEFT 或 RIGHT 或 FULL 中，而不是全部）。我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:40:23.543

是这样的：

```
SELECT 
     *
FROM 
     Orders o
INNER JOIN 
     Products p
ON
     p.id=o.ProductID 
```

请注意，您永远不应该`SELECT *...`列出您需要的列。您还应该明确说明连接的类型（内、左、右、外）。这是实现连接的正确方法，并且是 ANSI 语法。

# iphone - 创建没有任何约束自动布局的 uitextfield 或任何 uilabel

> ID：14628337
> 
> 赞同：0
> 
> 时间：2013-01-31T14:39:01.993
> 
> 标签：iphone, ios, objective-c, autolayout

我正在研究自动布局。但是，有一个小问题我无法弄清楚。谷歌它但找不到线索。

![在此处输入图像描述](../Images/a89b6ad00812672ccffde9f13bfb4c31.png)

正如我们所见，教程首先创建了 uitextfield1，完全没有任何约束。但是，当我尝试将另一个 uitextfield2 拖放到视图中时，存在与之相关的约束我的问题是如何创建一个没有约束的 uitextfield（宽度 + 高度）

已编辑（有关我想要实现的更多详细信息） ![在此处输入图像描述](../Images/5816e0671a507ccfd7acac6b69884a61.png)

对于上图，我们可以看到 textfield2 有 203 的宽度约束。然而，textfield1 没有像下面这样的宽度约束 ![在此处输入图像描述](../Images/155bbfbb8a40bea8e4c8de2889584050.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:42:39.577

视图中的所有组件都有自己的约束，但 Xcode 只显示所选组件的约束。如果您不希望视图或情节提要中的自动布局约束，请在 Xcode 中禁用它

# python - 在循环中一次从列表中检索 2 个项目？

> ID：14628346
> 
> 赞同：1
> 
> 时间：2013-01-31T14:39:21.583
> 
> 标签：python, arrays, list, loops, python-2.7

如何一次从循环中检索 2 个项目？

我有这个清单

```
lst = ['url1', 'value1', 'url2', 'value2', ... ] 
```

我想循环它，并且每次迭代我都想获取 2 个项目。

```
for x in lst:
    x # here x loops 1 by one. 
```

我正在使用波纹管解决方案

```
for i in range(0, len(lst), 2):
    url = lst[i]
    val = lst[i+1] 
```

我想知道有什么内置的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T14:42:46.937

```
>>> lst = ['url1', 'value1', 'url2', 'value2']
>>> i = iter(lst)
>>> zip(i,i)
[('url1', 'value1'), ('url2', 'value2')] 
```

或者，可能更有用：

```
>>> i = iter(lst)
>>> dict(zip(i,i))
{'url1': 'value1', 'url2': 'value2'} 
```

# php - 在花式框中显示正确的 cookie

> ID：14628348
> 
> 赞同：-1
> 
> 时间：2013-01-31T14:39:28.023
> 
> 标签：php, javascript, jquery, cookies, fancybox

你好

我想查看带有花式框的页面（[http://fancybox.net/](http://fancybox.net/)） cookie.php 文件很简单：

```
<?php
   var_dump($_COOKIES);
?> 
```

如果我在没有fancybox的情况下得到它，它会正常显示：

```
(array(3) { ["PHPSESSID"]=> string(32) "54daefa8cae5929wq0f6bwa71257a74e" 
["mail"]=> string(4) "m@m.com" 
["hash"]=> string(40) "f59bdedb4b7aad275225e45106f34e137af29cdd" } 1) 
```

如果我想在花式框中看到：

```
$(document).ready(function() {
    $.fancybox.open({
        'href' : 'http://example.com/cookie.php',
        'type' : 'iframe',
    });
}); 
```

然后它显示不同的cookie

```
'csrftoken' => string 'Vu3255XznLwCe4DVnsMsxprPVId4VAUI' (length=32)   
'__utma' => string '111872281.1095020375.1459185662.1349185660.1359285660.1' (length=55)
'__utmz' => string '111871281.1339155660.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)' (length=70)   
'PHPSESSID' => string 'd56u3fi3l3lo7qlli1iv2m58g7' (length=26) 
```

任何人都可以建议该怎么做吗？

问候：fb初学者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:09:46.617

fancybox 显示一个通常的 iframe，并且 borwser 不会在 iframe 中隔离会话。一些旧版本的浏览器，如 Opera 和 IE，在 iframe 中隔离会话，但现代浏览器不这样做。您需要在地址栏和 href-option 幻想框中检查路径，并检查您的站点是否将请求与 www 区分开来。并且没有 www。/>一般来说，如果它在第一种情况和第二种情况下显示不同的 cookies-array 键，它会说：它们是不同的页面：第一页没有谷歌分析代码，但第二页有这个：`__utma`和`__utmz`。如果检查路径不会给出结果，那么我需要更多信息。

# facebook - 允许 Facebook 访问我的网站，以便它可以读取 OpenGraph 元标记

> ID：14628349
> 
> 赞同：3
> 
> 时间：2013-01-31T14:39:32.977
> 
> 标签：facebook, apache, .htaccess, facebook-opengraph

我正在为我们公司开发一个新网站，因此我已将该网站放到互联网上，但通过 .htaccess 限制对某些 IP 地址的访问。

但是，新网站的一部分是“在 Facebook 上分享”按钮，所以我需要对其进行测试，但 Facebook 无法连接到我的网站，这并没有抓取 OpenGraph 标题、描述、图像等。

我已添加`allow from facebook.com`到 .htaccess，但这不起作用，[Facebook linter](http://developers.facebook.com/tools/debug/og/object?q=http://dev.dynedrewett.com/staff-profile/morgan-morgan/)在尝试连接时报告 403。暂时取消对站点的访问限制允许 Facebook linter 连接。

这是我的完整 .htaccess 文件（减去真实 IP 地址）-

```
ErrorDocument 404 /index.php?error=404

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress

# Only allow access to the site from the IP's listed below
#order deny,allow
allow from 1.2.3.1 # sh_adsl
allow from 1.2.3.2 #sh_lease_lines
allow from 1.3.1.1 # sh
allow from 1.2.2.1 # sm
allow from 1.2.3.1 # wi
allow from 1.2.4.1 # fr
allow from 4.3.2.1 # dgard -  home local range
allow from facebook.com # to allow the Facebook sharing
#allow from all
deny from all

# Block access to wp-config.php
<Files wp-config.php>
    order allow,deny
    deny from all
</Files>

# Deny directory browsing
Options All -Indexes

# Prevent access to any file that begins with '.hta' (i.e. protect this file!)
<Files ~ "^.*\.([Hh][Tt][Aa])">
    order allow,deny
    deny from all
    satisfy all
</Files> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:49:44.037

FB爬虫IP列表：[https ://developers.facebook.com/docs/ApplicationSecurity/#facebook_scraper](https://developers.facebook.com/docs/ApplicationSecurity/#facebook_scraper)

将它们添加到你的`.htaccess`，你应该很高兴。

# servlets - 通过 Struts 操作的文件下载挂起一段时间

> ID：14628351
> 
> 赞同：1
> 
> 时间：2013-01-31T14:39:36.657
> 
> 标签：servlets, struts, liferay, liferay-6, document-library

我目前正在 Liferay 服务器上进行开发。

```
[liferay-portal-6.1.10-ee-ga1 + tomcat-7.0.25] 
```

在某些情况下，我的用户从 Document-Library 下载文件。

当他们使用以下类型的 url 这样做时会发生什么

```
[$LIFERAY_HOST]/c/document_library/get_file?uuid=[$OBNOXIOUSLY_LONG_UUID]&groupId=[$MY_GROUP_ID] 
```

文件下载需要很长时间才能结束。

事实上，下载本身并不需要比所需时间更多的时间。但似乎没有关闭响应。

大多数下载客户端（包括 Firefox、wget、wireshark ...）似乎都没有注意到响应结束。

结果是他们挂了**没有真正的充分理由**。

最糟糕的是，我的 Firefox 用户的印象是，他们的下载对于非常小的文件需要很长时间（例如 8kb 需要 20 秒……据说，这是正确的，这是不可接受的）。

我试图挖掘我的堆栈并查看 liferay 的资源，但我无法弄清楚延迟来自哪里。

我试图查看这个线程的方式（看起来很有希望）[https://www.liferay.com/community/forums/-/message_boards/message/11838689](https://www.liferay.com/community/forums/-/message_boards/message/11838689)

但这不适用于我的问题。我已经强制所有过滤器类吐出日志消息，它们似乎都在几毫秒内执行（最多一秒钟）。

我试图检查 httpservletrequest 的输出流刷新和关闭，它们都被正确而干净地执行了......我开始对自己失去希望和信心......我很难过，我觉得很脏，我需要咖啡......帮助我……求你了！

----编辑：回答----

事实上，我的问题与 GZip 过滤器有关（在某种程度上我在第一次尝试时没有发现。在我的确切版本上，rp 的答案不是实际的解决方案，但它是在很多接近的版本上。如果你遇到同样的问题，broxse rp的答案（在下面）或这个：

[www.liferay.com/community/forums/-/message_boards/message/21186157#_19_message_21215343](http://www.liferay.com/community/forums/-/message_boards/message/21186157#_19_message_21215343)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:14:53.457

不幸的是，这是 Liferay 的一个问题。搜索 Liferay 错误跟踪器，我发现了[LPS-29323](http://issues.liferay.com/browse/LPS-29323)，其描述与您的描述相符。

幸运的是，修复似乎很简单。

您可以查看[修复问题的拉取请求](https://github.com/hhuijser/liferay-portal/commit/5e22ad07bf281a09f1b6a090838a1790d8952a18)或将这些行添加到`WEB-INF\liferay-web.xml`

```
<filter-mapping>
    <filter-name>ETag Filter</filter-name>
    <url-pattern>^(/c/document_library/get_file|/c/message_boards/get_message_attachment|/c/wiki/get_page_attachment)(\?.*)?$</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping> 
```

# java - Applet 不显示来自 Tomcat 中 URL 的图像

> ID：14628353
> 
> 赞同：0
> 
> 时间：2013-01-31T14:39:46.110
> 
> 标签：java, tomcat, applet, appletviewer

我制作的小程序从 URL 加载图像。当我使用 AppletViewer 在 Eclipse 中运行这个小程序时，它会显示图像。但是，当我在 Tomcat 7 中部署小程序后在浏览器中运行小程序时，图像不显示，只显示小程序的灰色背景，并且没有错误打印到控制台。

我也尝试将图像打包到 jar 中并从那里加载，但我遇到了同样的问题（在 Eclipse 中有效，但在 Tomcat 中无效）。

Tomcat是问题还是其他问题？

这是完整的代码：

```
import java.awt.Image;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JApplet;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class LoadImage extends JApplet 
{   
Image image;

public LoadImage()
{
    try {
        URL url = new URL("http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/Morus_bassanus_adu.jpg/50px-Morus_bassanus_adu.jpg");
        image = ImageIO.read(url);

        setSize(300, 300);
        JLabel label = new JLabel(new ImageIcon(image));
        add(label);
        setVisible(true);
    }
    catch (Exception e) {
        System.out.println(e.toString());
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:03:04.237

尝试

```
 URL url = new URL("http://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/Morus_bassanus_adu.jpg/50px-Morus_bassanus_adu.jpg");

                BufferedImage image = ImageIO.read(url);        

                JLabel label = new JLabel(new ImageIcon(image));
                label.setMinimumSize(new Dimension(200,200));
                this.add(label); 
```

# excel - Excel/VBA - 返回整数的函数

> ID：14628356
> 
> 赞同：2
> 
> 时间：2013-01-31T14:39:57.907
> 
> 标签：excel, vba

我想要一个函数来返回给定 rowIndex 和单元格值的列的索引：

```
'Get index of column given a heading name
Function FindColumnIndex(name As String, rowNumber As Integer) As Integer
    Dim index As Integer
    index = 1
    Dim found As Boolean
    found = False

    Do While found = False
        If Cells(rowNumber, index).Value = name Then
            FindColumnIndex = index
            Exit Do
        End If

        index = index + 1
    Loop

    FindColumnIndex = index

End Function 
```

然后，我将其分配给一个值：

```
Dim colIndex As Integer
colIndex = FindColumnIndex("Physical or Virtual", 2) 
```

问题是这不起作用-我确定我的功能不正确-有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:44:02.680

我立即发现的一件事：

```
If Cells(row, index).Value = name Then 
```

传递给函数的变量名为`rowNumber`，而不是`row`。将该行更改为：

```
If Cells(rowNumber, index).Value = name Then 
```

* * *

编辑：

要注意的另一件事是，您的函数实际上永远不会自行停止。它结束的唯一原因是因为它在尝试读取第 16385 列时遇到了应用程序定义的错误（因为 Excel 限制为 16384 列*），这会立即终止函数，返回`#VALUE`错误。

如果未找到请求的列名，以下修订会阻止这种情况并返回 -1：

```
Option Explicit

Function FindColumnIndex(name As String, rowNumber As Integer) As Integer
    Dim index As Integer
    index = 1
    Dim found As Boolean
    found = False

    FindColumnIndex = -1

    Do While found = False
        If Cells(rowNumber, index).Value = name Then
            FindColumnIndex = index
            found = True
        End If

        index = index + 1
        If index > 16384 Then Exit Do
    Loop

End Function 
```

[ * 无论如何，Excel 2007 是有限的。我不知道新版本是否有更大的限制。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:50:00.883

```
 If Cells(row, index).Value = name Then 
```

你的意思是：

```
If Cells(rowNumber , index).Value = name Then 
```

无论如何，有一些功能可以做到这一点，比如[MATCH](http://office.microsoft.com/en-us/excel-help/match-function-HP010062414.aspx?CTT=3)， INDEX & Co。

# html - 使用 CSS 多列布局会留下不需要的顶部和底部边距

> ID：14628359
> 
> 赞同：3
> 
> 时间：2013-01-31T14:40:11.137
> 
> 标签：html, css, css-multicolumn-layout

我正在尝试使用 CSS3 列，我注意到添加了顶部和底部边距，尽管我明确将它们设置为 0。这是一个屏幕截图：

![在此处输入图像描述](../Images/504792537f34b8536f2851a493b5f11e.png)

我用黄色突出显示了边距。红色矩形是从 Firefox 中的 Web Developer Toolbar 插件绘制的块级元素轮廓。

这是我的CSS：

```
.section .content {
  -moz-column-count: 2;
  -moz-column-gap: 26px;
  margin: 0px;
  padding: 0px;
} 
```

我怎样才能摆脱边缘？

根据要求将我的代码上传到[jsbin](http://jsbin.com/ufobax/1/edit)。它还显示了两列顶部之间的差异。当我不使用列时，边距不显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:38:28.953

您的问题很简单，您正在向内容添加 CSS，但内容包含一个带边距的段落。将其重置为 0。

```
p {
    margin:0
}
```

```
<div class="section">
    <h1>Heading 1</h1>
    <div class="content">
        <p>
        </p>
    </div>
</div>
```

[http://jsbin.com/ufobax/2/edit](http://jsbin.com/ufobax/2/edit)

# quickbooks - 通过 QuickBooks for Windows 中的 IDS 进行 CreditMemo 对账

> ID：14628373
> 
> 赞同：2
> 
> 时间：2013-01-31T14:40:51.113
> 
> 标签：quickbooks, intuit-partner-platform

我们正在使用 IDS 来获取所有发票及其相关的金融交易。目标是将发票与余额为零的所有交易相匹配。

似乎有 2 个 IDS 对象涵盖了这些事务：

*   [支付](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/Payment)
*   [信用备忘录](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/CreditMemo)

虽然两个对象都引用了`CustomerId`，但只有`Payment`引用了`Invoice`对象。

`CreditMemo`没有引用与之`Invoice`关联的 。

`CreditMemo`我们知道和之间必须有一些内部引用`Invoice`，因为在 QuickBooks 中查看发票时，它会显示在“相关交易”下。

我们如何通过 IDS获取 a`CreditMemo`和 an之间的关联信息？`Invoice`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:56:30.367

您在 IDS V2 中看不到 invoice 和 creditmemo 之间的链接。根据 IDS V3 规范 ( [http://developer.intuit.com/fmsv3spec/index.html)，linkedtxn](http://developer.intuit.com/fmsv3spec/index.html)似乎在发布时将可用，并希望显示链接的交易。

您可以提取所有 CreditMemos - [https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/CreditMemo](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0600_Object_Reference/CreditMemo)但它们不会像付款那样将链接的交易显示回发票。

您可以查看贷项通知单是否已支付/使用，或者贷项通知单状态是否为应付，这意味着贷项通知单仍然可用。

请参阅此帖子[https://idnforums.intuit.com/messageview.aspx?catid=86&threadid=18156](https://idnforums.intuit.com/messageview.aspx?catid=86&threadid=18156)

# jquery-ui - jquery mobile + jquery ui 和页面转换

> ID：14628375
> 
> 赞同：1
> 
> 时间：2013-01-31T14:40:53.887
> 
> 标签：jquery-ui, jquery-mobile

我想要一个页面转换效果，比如 jqmobile 上的“幻灯片”转换，但可以选择在一个页面和另一个页面之间拖动。

我有我想要使用[这个插件](http://filamentgroup.com/lab/jquery_mobile_pagination_plugin/)的过渡问题是这个插件需要 jqmobile 并且我的项目广泛使用 jquery ui 所以删除 jq ui 不是一个选项。这两个图书馆有什么办法可以共存吗？（或任何其他具有这种过渡的解决方案）

这是我的两个页面的工作代码。

第 1 页：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link href="css/jquery.mobile-1.0b2.min.css" rel="stylesheet" type="text/css" />
    <link href="css/jquery.mobile.pagination.css" rel="stylesheet" type="text/css" />

    <script type='text/javascript' src='Js/Libs/jquery-1.6.2.min.js'></script>
     <script type='text/javascript' src='Js/Libs/jquery.mobile-1.0b2.min.js'></script>
    <script type='text/javascript' src='Js/Libs/jquery.mobile.pagination.js'></script>
</head>
    <body>
        PAGE1
        <ul data-role="pagination">
            <li class="ui-pagination-prev"><a href="page0.htm">Prev</a></li>
            <li class="ui-pagination-next"><a href="page2.htm">Next</a></li>
        </ul>

    </body>
</html> 
```

第2页：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">

    <link href="css/jquery.mobile-1.0b2.min.css" rel="stylesheet" type="text/css" />
    <link href="css/jquery.mobile.pagination.css" rel="stylesheet" type="text/css" />

    <script type='text/javascript' src='Js/Libs/jquery-1.6.2.min.js'></script>
     <script type='text/javascript' src='Js/Libs/jquery.mobile-1.0b2.min.js'></script>
    <script type='text/javascript' src='Js/Libs/jquery.mobile.pagination.js'></script>

    </head>
    <body onload="">
        <script type="text/javascript">

                        $('div').live('pageshow', function (event, ui) {
                            alert('This page was just hidden: ');
                        });

        </script>    
    </body>
</html> 
```

# javascript - 升级到 3.5.1 后，帖子部分出现 WordPress JS 错误

> ID：14628381
> 
> 赞同：2
> 
> 时间：2013-01-31T14:41:13.790
> 
> 标签：javascript, wordpress, wordpress-3.5

升级到 WordPress 版本 3.5.1 后，我遇到了一些 JS 错误，因此无法在管理面板中使用一些基本的 WP 功能。

例如，在帖子编辑页面上，我无法将编辑器切换到 html 模式，无法点击任何链接（编辑）、选项卡等。

请建议应该采取什么行动，还是 WordPress 升级问题？重新安装但没有变化。

我在 firebug 控制台中注意到的错误如下。. . .

```
TypeError: e is undefined

TypeError: $(...).pointer is not a function $(’.insert-media’).pointer( options ).pointer(‘open’);

TypeError: switchEditors is undefined switchEditors.switchto(this); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:38:53.463

有时禁用或更新插件无济于事，因为您的主题使用过时的 JS。对我来说，它是主题使用的 jQuery-ui 库。如果您的 Wordpress 版本是 3.5 或更高版本，则需要使用 jQuery-UI 1.9.2 或更高版本。

更多信息在这里： http: [//www.hoosoft.com/blog/fix-jquery-1-8-3-error-typeerror-e-is-undefined-in-wordpress-3-5/](http://www.hoosoft.com/blog/fix-jquery-1-8-3-error-typeerror-e-is-undefined-in-wordpress-3-5/)

# haskell - “标准化”是什么意思，为什么是 Haskell？

> ID：14628383
> 
> 赞同：7
> 
> 时间：2013-01-31T14:41:15.300
> 
> 标签：haskell, standards

维基百科[声称](http://en.wikipedia.org/wiki/Haskell_%28programming_language%29)Haskell 是“标准化的”，但 Haskell 标准并未得到 ISO 等国际公认标准机构的批准；甚至没有像 BSI 或 ANSI 这样的国家机构。

那么，编程语言被标记为“标准化”的真正标准是什么？是否只需要[在某处的网站上发布规范](http://www.haskell.org/definition/)？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T20:47:34.760

你已经回答了你自己的问题。标准化语言是由某种规范定义的语言，无论是文档还是使用本身标准化和形式化的语言（例如 SML）的“参考实现”。哪个机构认可或批准该标准并不是真正的问题。

这与 Perl 或 PHP 等实现定义的语言相反，在这些语言中，语言所做的只是由该语言的某些特定“旗舰”实现所定义的。

所以我们可以说某个 C 编译器实际上并没有正确编译 C，因为它不遵守标准。同时，我们不能说 CPython 没有正确解释 Python，因为它所做*的*就是 Python 所做的，根据定义。

Haskell 由 Haskell 报告定义，最新版本是 Haskell 2010：[http ://www.haskell.org/onlinereport/haskell2010/](http://www.haskell.org/onlinereport/haskell2010/)

本报告由一个委员会起草、投票和批准。此外，历史上存在并且仍然存在多个符合报告或*几乎*符合报告的 Haskell 编译器和解释器，但有记录的例外情况。

编写到标准的代码应该可以跨编译器移植，并且当在编译器和报告之间发现分歧（“预期”之外）时，通常会更改编译器或报告以符合要求。

# mysql - MySQL SELECT FOR UPDATE Lock 阻塞所有线程？

> ID：14628384
> 
> 赞同：0
> 
> 时间：2013-01-31T14:41:15.713
> 
> 标签：mysql, ruby, thread-safety, sequel

我只是想知道mysql“SELECT FOR UPDATE”锁会阻止我在一个进程中的所有线程，以及如果我需要在多线程应用程序中授予此锁，如何绕过它。

为了简单起见，我只是在 ruby​​ 中给出了一个简单的测试代码：

```
t1 = Thread.new do
  db = Sequel.connect("mysql://abcd:abcd@localhost:3306/test_db")
  db.transaction do
    db["select * from tables where id = 1 for update"].first
    10.times { |t| p 'babababa' }
  end
end

t2 = Thread.new do
  db = Sequel.connect("mysql://abcd:abcd@localhost:3306/test_db")
  db.transaction do
    db["select * from tables where id = 1 for update"].first
    10.times { |t| p 'lalalala' }
  end
end

t1.join
t2.join
p 'done' 
```

实际上，结果将是：

线程 1 和线程 2 在其中一个线程获得“FOR UPDATE”LOCK 后挂起至少 50 秒（Mysql 设置中的锁定等待时间为 50 秒），然后一个线程引发“超出锁定等待超时”错误并退出，另一个线程成功打印出它的“baba”或“lala”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:51:10.380

这与 mysql 驱动程序为每个查询锁定整个 ruby​​ VM 的事实有关。当第二个线程命中 FOR UPDATE 锁并冻结时，ruby 中什么都不会发生，直到超时，导致您看到的行为。

要么安装 mysqlplus gem（我不会阻止整个解释器，如果安装了 Sequel 的 mysql 适配器将自动使用），或者安装 mysql2 gem 并使用 mysql2 适配器而不是 mysql 适配器。

# ruby - 我的 rbenv 安装在哪里？

> ID：14628388
> 
> 赞同：3
> 
> 时间：2013-01-31T14:41:21.633
> 
> 标签：ruby, ruby-on-rails-3, bundler, rbenv

我使用 rbenv 和 bundler，我想打开已安装的 rails gem 并插入一些调试代码。所以我在一个rails项目中运行'bundle show rails'，我得到'~/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rails-3.2.11'，但是有这个目录里什么都没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:01:24.190

Rails 只是一个元宝石，因为它不包含任何实际代码，它只是列出了构成 Rails 的依赖项。这就是 gem 的目录为空的原因。

如果你想编辑 Rails 代码的一部分，你应该编辑相关的依赖。在`Gemfile.lock`Rails 3.2.11 的直接依赖项中列出如下：

```
rails (3.2.11)
  actionmailer (= 3.2.11)
  actionpack (= 3.2.11)
  activerecord (= 3.2.11)
  activeresource (= 3.2.11)
  activesupport (= 3.2.11)
  bundler (~> 1.0)
  railties (= 3.2.11) 
```

# rest - Java Rest Client 消费 JSON - 如何创建 JAXB 对象？

> ID：14628391
> 
> 赞同：0
> 
> 时间：2013-01-31T14:41:33.430
> 
> 标签：rest, xsd, jackson, bind, resteasy

我需要编写一个可以使用 JSON 响应的休息客户端（在 Java 中 - 使用 RestEasy）。关于其余客户端（或包装服务）将 JSON 响应转换为 Java 类型的需要，我看到以下选项： 1\. 将响应映射到字符串，然后使用 JsonParser 工具提取数据并手动构建类型。
2\. 使用 JAXB 注释的 POJO - 与 jackson 结合 - 自动将 json 响应绑定到对象。

关于 2，定义 XSD 来生成带有 JAXB 注释的 POJO 是否可取/正确？我可以通过 XML 客户端重用来执行此操作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:56:06.610

我是#2的粉丝。

原因是您的 JAXB 注释模型对象本质上*是*您尝试在传输级别上表示的业务/域逻辑的合同，并且 POJO 显然为您提供了对 getter/setter 验证的出色控制，并且您可以控制您的元素具有精细粒度的名称和命名空间。

话虽如此，我喜欢有一个额外的“内部” POJO 模型（如有必要，取决于问题复杂性/项目范围），以将传输层与域对象隔离开来。此外，如果您的业务/域对象表示需要在内部进行更改，您会获得一种温暖的感觉，即您没有直接与传输层绑定。一位同事提到了[Dozer](http://sourceforge.net/projects/dozer/)，这是一个将 bean 映射到 bean 的工具，但我没有直接的经验来进一步评论。

我不喜欢从 XSD 生成代码。代码通常很丑陋或完全不可读；和管理变化，无论多么微妙或微不足道，都会带来意想不到的结果。也许我错了，但我需要在经过验证的模型上进行良好的单元测试。

这是基于我编写面向客户的 SDK 的个人经验，该 SDK 带有一个毛茸茸的 XML-over-HTTP（我们不称之为 REST）API。JAXB/Jackson 注释的 POJO 使其相对轻松。希望有帮助。

# apache-flex - Apache Flex 4.9

> ID：14628397
> 
> 赞同：1
> 
> 时间：2013-01-31T14:41:57.473
> 
> 标签：apache-flex, flexmojos, flex-mojos

我刚刚完成了 Apache Flex 4.9 SDK。现在，如何使用 maven 构建我的应用程序？有人为此提供示例 pom-File 吗？是否有一个 flex-mojos 版本可以与这个 flex 版本一起使用？或者有其他选择吗？

顺便说一句：当我使用 Flash Builder 4.7 构建它时，我的应用程序正在运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:39:36.520

我是目前负责继续开发 Flexmojos 的人。

我不得不说，RIAstars 的评论是不正确的。我创建了 Mavenizer 以便与 Flexmojos 的更新版本一起使用，据报道它可以很好地与它一起工作。不幸的是，我还没有发布 FM6，因为我想先让它稳定。因此，您必须从[https://github.com/chrisdutz/flexmojos获取我的 github fork ...我计划在 Atlassian 最终在](https://github.com/chrisdutz/flexmojos)[https](https://flexmojos.atlassian.net)上设置我们的 GIT 存储库后立即将我的更改合并回公共存储库： [//flexmojos.atlassian.net](https://flexmojos.atlassian.net)

我目前正在努力使 FM6 成为 FM5 的平价版本，但不同之处在于它可以与 mavenizer 生成的 fdks 一起使用。事实是，我不会为 FM 添加任何新功能，例如移动设备的原生 Air 捆绑和对 falcon 的支持。

这是因为我们已经开始开发一个纯 Apache maven 插件，它总有一天会取代 FM。主要原因是您必须投入大量精力来维护一个从 Flex 2.x 开始构建所有 FDK 的插件，并消除一些导致邮件列表上大量支持流量的设计问题。

所以我想说：是的，你可以使用 Mavenizer 来 mavenize 你的 FDK，然后你使用 FM6 来构建你的应用程序，因为这就是我创建它们的目的:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:57:12.060

将不再为 Flex 的未来版本开发 FlexMojos。因此，我认为您不能将它与您的 Flex 的 mavenized 版本一起使用（但我可能错了；我不确定它是如何工作的）。

然而，FlexMojos 的当前维护者 (Christofer Dutz) 正在开发一个全新的 Flex/Maven 插件。因此，对于将来的版本，您应该能够使用它。不幸的是，据我所知，这个项目还远未完成。

作为替代方案，[GradleFx](http://gradlefx.org/)是[Gradle](http://gradle.org/)的插件。您可以像这样简单地设置 Apache Flex SDK 依赖项：

```
dependencies {
    flexSDK group: 'org.apache', name: 'apache-flex-sdk', version: '4.9.0', ext: 'zip'
}

repositories {
    add(new org.apache.ivy.plugins.resolver.URLResolver()) {
            name = 'Apache'
            addArtifactPattern 'http://apache.cu.be/flex/4.9.0/binaries/[module]-[revision]-bin.[ext]'
    }
} 
```

就我个人而言，我发现 Gradle 比 Maven 更容易使用。（免责声明：我是 GradleFx 项目的贡献者，但我之所以成为其中的一员，是因为我非常喜欢它）。

# c# - 在后台复制文件

> ID：14628398
> 
> 赞同：0
> 
> 时间：2013-01-31T14:41:58.373
> 
> 标签：c#, winforms, multithreading, client-server

当我将客户端连接到服务器时，客户端开始将一些 dll 文件复制到服务器。发生这种情况时，表单会卡住，直到复制完成（有一些大文件）。

我希望让这个副本在后台运行，因为我希望用户能够继续与表单交互（打开一些浏览对话框等）。我将确保复制完成。

我想线程在这里会有所帮助，但我是线程的新手，我也不确定这是不是这样。

下面是复制dll文件的代码：

```
 private bool copyDllsToServer()
    {
        //string targetPath = @"\\" + remoteIpAddress + "\\" + userName + batchRunPath;
        string targetPath = "Z:\\nBatcher\\" + userName + batchRunPath;
        if (!Directory.Exists(targetPath))
            Directory.CreateDirectory(targetPath);
        else
        {
            Directory.Delete(targetPath, true);
            Directory.CreateDirectory(targetPath);
        }

        for (int i = 0; i < listOfFilesToCopy.Count; i++)
        {
            if (listOfPathToCopy[i].CompareTo(omekPath + shadersPath) == 0)
            {
                if (!Directory.Exists(targetPath + "Shaders"))
                    Directory.CreateDirectory(targetPath + "Shaders");
                if (!File.Exists(targetPath + "Shaders\\" + listOfFilesToCopy[i]))
                    File.Copy(listOfPathToCopy[i] + listOfFilesToCopy[i], targetPath + "Shaders\\" + listOfFilesToCopy[i], true);
            }
            else
            {
                if (!File.Exists(targetPath + listOfFilesToCopy[i]))
                    File.Copy(listOfPathToCopy[i] + listOfFilesToCopy[i], targetPath + listOfFilesToCopy[i], true);
            }

        }

        return true;
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:44:26.547

我会为此使用 a `BackgroundWorker`（基本上将线程池线程包装在一个不错的组件中以放在您的表单上，并使编组到 UI 线程更容易一些）。如果您愿意，您还可以使用这些事件来报告复制功能的进度。

有关 MSDN 的教程，请参见此处 - [http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx)

不过，我会提出一个警告。仅在单个线程中执行密集的文件操作，因为使用并发线程可能会遇到磁盘 I/O 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T23:37:54.357

```
 var bg = new BackgroundWorker();
        bg.DoWork += (s1,e1) => copyDllsToServer();

        bg.RunWorkerAsync(); 
```

# android - 定位问题，我没有从后台定位服务中得到任何经度和纬度

> ID：14628399
> 
> 赞同：0
> 
> 时间：2013-01-31T14:41:59.923
> 
> 标签：android, android-location

我做了一个应该得到纬度和经度的后台服务，但由于某种原因它不能正常工作：

```
public class BackgroundLocationService extends IntentService {

private static final String TAG = "Location Service";

private LocationManager locManager;
private LocationListener locListener = new MyLocationListener();
public static Context context;

private String latitude;
private String longitude;

Messenger messenger;
Timer t = new Timer();

public BackgroundLocationService() {
    super("backgroundLocationService");

    locManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    locationProviderInit();
}

private void locationProviderInit() {

    boolean gps_enabled;
    boolean network_enabled;

    gps_enabled = locManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    network_enabled = locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

    if (gps_enabled) {
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);

    }
    if (network_enabled) {
        locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);

    }
}

@Override
protected void onHandleIntent(Intent intent) {
    messenger = (Messenger) intent.getExtras().get("handler");

    t.schedule(new TimerTask() {

        @Override
        public void run() {

            locationProviderInit();

            if (latitude != null && longitude != null) {

                Log.i(TAG, "Lat and Long are: "+latitude+" - "+longitude);
            } else {
                Log.i(TAG, "Lat and Long are null");
            }
        }
    }, 0, 7000);

}

class MyLocationListener implements LocationListener {
    public void onLocationChanged(Location location) {

        if (location != null) {
            longitude = Double.toString(location.getLongitude());
            latitude = Double.toString(location.getLatitude());
        }
    }

    public void onProviderDisabled(String arg) {}
    public void onProviderEnabled(String arg) {}
    public void onStatusChanged(String provider, int status, Bundle extras) {}
}
} 
```

MyLog 猫：

```
01-31 15:26:54.639: I/Location Service(2347): Lat and Long are null
01-31 15:26:58.057: I/Location Service(2347): Lat and Long are null
01-31 15:27:01.643: I/Location Service(2347): Lat and Long are null
01-31 15:27:05.057: I/Location Service(2347): Lat and Long are null
01-31 15:27:08.639: I/Location Service(2347): Lat and Long are null
01-31 15:27:12.065: I/Location Service(2347): Lat and Long are null
01-31 15:27:15.643: I/Location Service(2347): Lat and Long are null
01-31 15:27:19.053: I/Location Service(2347): Lat and Long are null
01-31 15:27:22.639: I/Location Service(2347): Lat and Long are null
01-31 15:27:26.057: I/Location Service(2347): Lat and Long are null
01-31 15:27:29.643: I/Location Service(2347): Lat and Long are null
01-31 15:27:33.061: I/Location Service(2347): Lat and Long are null
01-31 15:27:36.639: I/Location Service(2347): Lat and Long are null
01-31 15:27:40.061: I/Location Service(2347): Lat and Long are null 
```

大约 3-5 分钟后，它得到了位置：

```
01-31 15:34:48.404: I/Location Service(2417): Lat and Long are: 47.479290815904015 - 19.086711048181996
01-31 15:34:55.408: I/Location Service(2417): Lat and Long are: 47.479290815904015 - 19.086711048181996
01-31 15:35:02.404: I/Location Service(2417): Lat and Long are: 47.479290815904015 - 19.086711048181996
01-31 15:35:09.400: I/Location Service(2417): Lat and Long are: 47.479290815904015 - 19.086711048181996
01-31 15:35:16.400: I/Location Service(2417): Lat and Long are: 47.479290815904015 - 19.086711048181996
01-31 15:35:23.400: I/Location Service(2417): Lat and Long are: 47.479290815904015 - 19.086711048181996 
```

我怎样才能让它更快？我不想在获得位置之前等待 5 分钟。有活跃的互联网连接，它不应该在空位置的几分钟内向我发送垃圾邮件。定位对我来说是个谜，它永远不会为我做我想要的事情，而且总是让我感到随机性。我以多种方式构建了它，但我无法编写一个很好的代码。

请帮忙，我应该改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:50:21.913

你为什么不使用`getLastKnownLocation`？

# grails - grails 我应该在哪里对 src/java 中的 Java 类进行测试？

> ID：14628401
> 
> 赞同：1
> 
> 时间：2013-01-31T14:42:11.853
> 
> 标签：grails

我在 src/java 中有一个 Java 类，其 .class 文件将被复制到“externalConfig”文件夹并保存在 SVN 中，以便可以在构建服务器上将其拉出并发送到远程平台。我正在使用 GGTS 3.1。

我为此写了一个测试。我应该把它放在哪里？我已经尝试在 src/java 中使用 xxx.yyy.test 包。我可以将它作为 jUnit Test 运行（在将 Mockito 放入 lib 文件夹并添加到项目的类路径之后）。

但是，test-app 会为测试类产生编译错误，因为它找不到 Mockito.*、mock 等。run-app 的结果相同。

我已经重构并将文本包和类移动到测试/单元（希望多于预期）。我在运行 test-app 时遇到了同样的错误，但不是来自 run-app。

基本上，我很乐意让 Grails 忽略这个测试类。最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:50:04.337

您应该将它们放在测试/单元或测试/集成中。可能编译的类仍然存在于目标文件夹中，在将它们从 src 移动到测试后，调用 grails clean 以删除已编译的文件。

# python - Python Opencv Hough Circles，存储访问中的致命错误

> ID：14628405
> 
> 赞同：1
> 
> 时间：2013-01-31T14:42:20.983
> 
> 标签：python, opencv, hough-transform

我正在尝试使用带有opencv的霍夫变换来检测圆圈。

当场景中没有圆圈时，我得到一个空指针错误。我可以处理我认为的例外情况。

但是，当有一个圆圈时，试图操纵存储对象会给我错误。
例如，我尝试将其转换为 numpy 数组，但大多数但并非所有时间都会出现以下致命错误。
有时帧确实显示正确。

```
OpenCV Error: Bad argument (unrecognized or unsupported array type) in cvSetData,
    file /build/buildd/opencv-2.3.1/modules/core/src/array.cpp, 
```

我的代码

```
while True:
    img = billy.get_frame()

    # Convert from BGR to HSV
    grey = cv.CreateImage(cv.GetSize(img), 8, 1)
    cv.CvtColor(img, grey, cv.CV_BGR2GRAY)

    cv2.cv.Smooth(grey, grey, cv.CV_GAUSSIAN, 7, 7)

    circles = np.array([], dtype=np.float32)

    storage = cv.CreateMat(1, 2, cv.CV_32FC3)
    try:
        cv.HoughCircles(grey, storage, cv.CV_HOUGH_GRADIENT, 2, grey.height/4, 200, 100)

        for i in range(0,len(np.asarray(storage))):
                cv.Circle(img, ( int(np.asarray(storage)[i][0][0]), int(np.asarray(storage)[i][0][1]) ), int(np.asarray(storage)[i][0][2]), cv.CV_RGB(255, 0, 0), 2, 8, 0 )
    except:
        pass

    cv.ShowImage("threshholded", img ) 
```

# ruby-on-rails - where 子句中的子轨道

> ID：14628407
> 
> 赞同：1
> 
> 时间：2013-01-31T14:42:30.683
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在编写 rake 任务，但无法让我的代码正常工作。可以这样写吗？

```
Model.where('(? - begins_at)/3600 > ?', Time.now, 2).all 
```

我想要实现的是向我返回超过 2 小时的记录列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:59:26.613

试试看：

```
Model.where('begins_at < ?', Time.zone.now - 2.hours).all 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:50:30.150

试试这个：

```
 Model.where(['(? - begins_at) > ?', Time.now, 1]).all 
```

根据您的评论，您可以这样做：

```
 Model.where('begins_at < ?', Time.now - 2.hours).all 
```

# php - 我使用 ODBC 并连接到 Microsoft SQL Server 2008R2 实例的 PHP 收到“字符串数据，右截断”错误

> ID：14628409
> 
> 赞同：4
> 
> 时间：2013-01-31T14:42:32.960
> 
> 标签：php, sql-server-2008, odbc

我在 CentOS 6.2 机器上使用 PHP 5.3.3，连接到 Microsoft SQL Server 2008R2 的实例。连接有效，只要我的查询不包含参数，我就可以检索数据。添加参数时，出现错误“字符串数据，右截断”。

这是一些示例代码：

```
<?php

$dbh = new PDO("odbc:myDSN", 'myUsername', 'myPassword');

$testCase = 1;
switch ($testCase) {
case 1:
  //  This case fails with this error:
  //    Error 22001: [Microsoft][ODBC Driver 11 for SQL Server]String data, right truncation (SQLExecute[0] at /builddir/build/BUILD/php-5.3.3/ext/pdo_odbc/odbc_stmt.c:254)
  $query = "select * from [myDatabase].[sys].[objects] WHERE (([name]=?))";
  $stmt = $dbh->prepare($query);
  $param1 = 'testtable1';
  $stmt->bindParam(1, $param1, PDO::PARAM_STR);   //  Note:  '1' is correct; it should not be '0'
  break;
case 2:
  //  This case works properly
  $query = "select * from [myDatabase].[sys].[objects] WHERE (([name]='testtable1'))";
  $stmt = $dbh->prepare($query);
  break;
}
$execResult = $stmt->execute();
if ($execResult) {
  print "Success!\n";
} else {
  $errorInfo = $stmt->errorInfo();
  print "Error " . $stmt->errorCode() . ": " . $errorInfo[2] . "\n";
}

$rowCount = 0;
while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
  echo "Row " . $rowCount . ":\n";
  foreach ($row as $key => $value) {
    printf("  %-20s  %s\n", $key, $value);
  }
  $rowCount++;
} 
```

请注意，上面代码中的两个测试用例都应该做同样的事情。测试用例 1 使用参数（所有代码都应该这样做），测试用例 2 明确地将相关值放入 SQL 查询中。测试用例 2 有效。测试用例 1 没有。我试过用'bindValue()'替换'bindParam()'，但这没有效果。我也尝试过使用命名参数（例如，`:name`）而不是位置参数，但这也没有效果。我尝试向 bindParam() 添加显式长度参数（`strlen($param1)`用作值），但这给出了一个非常奇怪的错误消息（`Incorrect syntax near 'OUTPUT'`），我只能假设我做错了。整数参数正常工作。只有字符串参数失败。

任何想法为什么这不起作用？

当然，可能是 ODBC 驱动程序存在错误，或者它与我的 PHP 版本不兼容，或者任何类似的问题，但我希望我只是不正确地使用了 API。

编辑：

根据 Anda Iancu 的建议，我深入研究了 SQL Server Profiler。跟踪时，案例 1 给出了两个几乎相同的记录，一个是 class `SQL:BatchStarting`，一个是 class `SQL:BatchCompleted`，都包含文本：

```
set fmtonly on select [name] from [myDatabase].[sys].[objects] where 1=2 set fmtonly off 
```

案例 2 给出了两条记录，均属于“RPC:Completed”类。第一个包含文本：

```
declare @p1 int
set @p1=1
exec sp_prepexec @p1 output,NULL,N'select * from [myDatabase].[sys].[objects] WHERE (([name]=''testtable1''))'
select @p1 
```

第二个包含文本：

```
exec sp_unprepare 1 
```

* * *

更新：

在绝望的举动中，希望将新版本的 unixODBC 放入现有版本的 PHP 中可能会出现某种问题，我从源代码重新编译了 PHP。在 CentOS 上，这比你想象的要难。不幸的是，这没有效果。到处都是同样的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T21:07:15.093

经过大量的调整和搜索，以及大量的暗中故障排除，我最终确定这是一个 ODBC 驱动程序问题。

具体来说，我使用的是从 Microsoft 下载的驱动程序，据称设计用于在 RHEL/CentOS6 上使用 PHP 和 unixODBC。它在自己的 README 文件中被称为“Microsoft ODBC Driver 11 for SQL Server”，并位于一个名为`msodbcsql-11.0.2270.0.tar.gz`. （提供这些细节是为了让其他尝试做同样事情的人受益）

根据我的经验，我*不*推荐这个驱动程序。

我下载、编译并安装了最新的“稳定”版本的 FreeTDS。如果这对你很重要，我得到的版本是 0.91（下载文件没有说这个，但它解压到一个有这个数字的目录中）。这有/有它自己的小配置问题，但最终似乎比微软提供的驱动程序好得多。我不知道这是否仍在积极维护中，因为分发中最近的时间戳是 2011 年 8 月 17 日。

愚蠢的我，认为我应该使用 Microsoft 驱动程序来访问 Microsoft 数据库服务器，并期望它真正做到它所说的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-21T19:47:01.213

我想你可能已经在微软的 ODBC 驱动程序中遇到了一个错误，但值得指出的是 pdo_odbc 有[一个与 bindValue() 函数相关的严重错误](https://bugs.php.net/bug.php?id=61777)。该错误仅影响 64 位，但是 - 哈！- Microsoft 的 ODBC 驱动程序只有 64 位。

已经有一段时间了，但我认为您遇到的错误取决于您的数据类型和 SQL 语句。

# sql - 如果我尝试在 Oracle 中使用 SAMPLE 子句选择随机行，则会发生 ORA-01446

> ID：14628410
> 
> 赞同：4
> 
> 时间：2013-01-31T14:42:34.630
> 
> 标签：sql, oracle, select

由于表中的行数太大，我从“ORDER BY dbms_random.value”构造切换到 SAMPLE 子句以获得 1000 个随机行。完成只需不到一秒钟而不是 3 分钟。但是在某些表上我得到了这个错误

> ORA-01446: 无法使用 DISTINCT、GROUP BY 等从视图中选择 ROWID

我的查询如下所示：

```
SELECT t1.columnA FROM 
(SELECT columnA FROM table1 sample(1) where rownum <= 1000)  t1 
JOIN table2 t2 
ON (t1.columnA = t2.columnA) 
WHERE t2.columnB IS NOT NULL 
```

它在某些表上工作正常，但在其他表上失败。我放弃了谷歌搜索，您能否就我的情况提出任何解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:04:02.057

正如我所期望的那样，SAMPLE 子句的工作速度比所有其他解决方案都快（[在这里你可以看到其中一些](http://www.orafaq.com/wiki/SQL_FAQ#Can_one_select_a_random_collection_of_rows_from_a_table.3F)）

因为我通常是 Oracle DB 的新手，特别是 Oracle SQL Developer，所以我错误地将视图称为“表”。在我发现解决方案很清楚之后。

解决方案：我必须查看形成视图的 SQL 查询并将视图名称替换为该查询。例如，我的 table1 实际上是一个视图，我将其名称替换为形成该视图的 SELECT 查询：

```
SELECT t1.columnA FROM 
(SELECT columnA FROM (select distinct tt1.columnA,  tt2.columnC
  from table22 tt2, table11 tt1
 where tt2.columnC = tt1.columnA) sample(1) where rownum <= 1000)  t1 
JOIN table2 t2 
ON (t1.columnA = t2.columnA) 
WHERE t2.columnB IS NOT NULL 
```

之后，我可以使用表格并将 SAMPLE 应用于它们！谢谢大家，很棒的网站！=) PS：对不起我的英文和丑陋的代码*facepalm.jpg*

# .net - 以编程方式将文件从目录移动到网络共享

> ID：14628412
> 
> 赞同：0
> 
> 时间：2013-01-31T14:42:40.450
> 
> 标签：.net, file-io, network-share

我正在尝试编写一个将文件从服务器上的目录移动到网络共享的过程，该网络不会在该计算机上。从我的本地计算机移动到网络共享时，该方法运行良好。但是，当我将进程放在我的服务器上时它不起作用（这个进程基本上是一个 dll，它被正在运行的服务获取，服务启动一个线程，将它提供给我的进程，然后它就消失了）。该进程正在使用有权访问共享目录的身份运行，但它不会移动它。我也无法检测到发生的异常。我在那里登录得很好，似乎没有抛出异常。我会仔细看看，但以前有没有人尝试过这样的事情？我称这...

```
File.Move(@"C:\Output\" + FileTitle, ShareDirectory + "\\" + FileTitle); 
```

或这个...

```
 File.Copy(@"C:\Output\" + FileTitle, ShareDirectory + "\\" + FileTitle, true); 
```

取决于文件是否存在......我不确定冒充任何东西会解决任何问题？该服务已在有权访问共享的 ldap 用户名下运行...

**更新：发现更多信息**

好的，我遇到了一个从未被击中的错误条件，所以这就是为什么我没有捕捉到异常......我得到了这个异常......

```
Exception Publishing Document to Share: System.UnauthorizedAccessException: Access to the path is denied. 
```

一旦我看到那个异常，我决定冒充一个有效的用户......而且我仍然得到那个异常......在服务器上映射那个目录会有所帮助吗？我猜不是，但我的想法已经不多了。

**更新：当我冒充自己和其他用户时**

当我在此过程中冒充自己时，我能够成功地将文件移动到共享中。但是如果我冒充另一个应该具有相同权限的用户名，我仍然会得到上述异常。我不确定为什么会发生这种情况。也许这个用户没有我怀疑它拥有的权限。但只是在窗口中查看并查看 LDAP 服务器，它看起来好像确实如此。确实很好奇。

# image - 从项目文件加载图像

> ID：14628416
> 
> 赞同：2
> 
> 时间：2013-01-31T14:42:48.170
> 
> 标签：image, listbox, windows-phone-8

我正在尝试获取我的资源文件夹的 png 图像。我测试了这里写的解决方案：[Add images to ListBox (c#, windows phone 7)](https://stackoverflow.com/questions/9348766/add-images-to-listbox-c-windows-phone-7)。首先，我想为我的 ListBox 中的每个项目获取相同的图像。但我无法做到这一点。图片不显示。

这就是我在 xaml 中的列表的样子：

```
<ListBox x:Name="ProductList">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding Name}"/>
                        <Image Source="{Binding ImagePath}"  Stretch="None"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

这就是我填充项目的方式：

```
List<ImageData1> productsList = new List<ImageData1>();

foreach (ProductItem item in ProductsTable)
{
    if (item.Category == chosenCategory.TrId)
    {
            ImageData1 img = new ImageData1();
            img.Name = item.Name;
            img.ImagePath = new Uri("Resources/img.png", UriKind.RelativeOrAbsolute);
            productsList.Add(img);
    }
}

ProductList.ItemsSource = productsList; 
```

这是我保存图像数据的类：

```
public class ImageData1
{
    public Uri ImagePath
    {
        get;
        set;
    }

    public string Name
    {
        get;
        set;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:43:00.890

尝试`/`在您的图像路径之前放置。喜欢`/Resources/img.png`。并尝试更改`UriKind.RelativeOrAbsolute`为 `UriKind.Relative`. 并确保您的图像添加为`Content`（`Build Action`图像属性）。这样它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:19:59.160

可能，您还可以使用以下汇编代码从当前应用程序中读取图像。

```
StreamResourceInfo info =Application.GetResourceStream(new Uri("Resources/img.png", UriKind.RelativeOrAbsolute));
var bitmap = new BitmapImage();
bitmap.SetSource(info.Stream);
img.Soure = bitmap; 
```

# c - 未定义的标识符

> ID：14628417
> 
> 赞同：0
> 
> 时间：2013-01-31T14:42:53.930
> 
> 标签：c

我正在使用 C 语言编写一个程序，当 opterr 设置为 0 时，由于标识符 opterr 和 optarg 未定义，因此出现错误。我注意到该文件中没有 #include。难道只是可能的原因吗？

错误

> 错误：标识符“opterr”未定义

```
opterr = 0; 
```

> 错误：标识符“optarg”未定义

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:48:14.747

你很可能错过了：

```
#include <unistd.h> 
```

这是定义[getopt](http://linux.die.net/man/3/getopt) *等人*的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-10T18:41:30.210

optarg 定义在

`#include <getopt.h>`

# internet-explorer - IE 中的“边界半径”问题

> ID：14628421
> 
> 赞同：0
> 
> 时间：2013-01-31T14:43:10.323
> 
> 标签：internet-explorer, css

我在 IE9 中遇到了“边界半径”的问题（我没有在其他 IE 版本中尝试过）。

问题图片：http:
[//imageshack.us/a/img171/4060/ieproblem11.png](http://imageshack.us/a/img171/4060/ieproblem11.png)

以及相同部分在 Chrome / Firefox / Android / 等上的外观。
[http://imageshack.us/a/img837/3730/ieproblem12.png](http://imageshack.us/a/img837/3730/ieproblem12.png)

HTML部分：

```
<div style="margin-bottom: 10px;">
    <div class="console-background" style="float: right; width: 80px; font-size: 16px; padding: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-left: 1px solid #ffffff; border-bottom: 1px solid #dddddd; color: #ffffff; font-weight: bold;">
        PC
    </div>
    <div class="gray-title" style="float: right; width: 579px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; font-weight: bold; font-size: 16px;">
        Title
    </div>
    <div class="clear"></div>
</div> 
```

CSS：

```
.console-background {
    background-color: #2599cf;
}

.gray-title {
    background-color: #efefef;
    border-bottom: 1px solid #dddddd;
    padding: 10px;
    border-radius: 10px;
    color: #555555;
    font-size: 14px;
} 
```

可能是什么问题？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:37:10.203

在你的 CSS 中，你有border-radius:10px; 将所有角设置为 10px。在 HTML 中，您有一个指定到右下角和右上角的样式，我相信这就是您想要的外观。尝试将您的 css 更改为：

```
.gray-title
{
background-color: #efefef;
border-bottom: 1px solid #dddddd;
padding: 10px;
border-top-right-radius: 0px; 
border-bottom-right-radius: 0px;
color: #555555;
font-size: 14px;
} 
```

如果您已经有一个附加的样式表，将它全部放在 .css 文件中而不是在 html 标记中执行它会更干净。这可能是个人喜好，但它会更容易阅读！:)

# c# - .NET 3.5 | WPF文本框在绑定到视图模型属性时拒绝更新自身

> ID：14628424
> 
> 赞同：0
> 
> 时间：2013-01-31T14:43:20.720
> 
> 标签：c#, wpf, .net-3.5

在我开始解释我的问题之前，请注意我的目标框架是 .NET 3.5。

我有一个文本框，其文本绑定到 viewmodel 属性。我的要求是，当用户在文本框中输入内容（通过键盘和鼠标粘贴）时，应清除其中的任何垃圾字符，并应使用替换的字符串更新文本框[在下面的示例中，“s”将被替换'h']。

XAML代码：

```
 <Style x:Key="longTextField" TargetType="{x:Type TextBoxBase}">
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="OverridesDefaultStyle" Value="True"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="AcceptsReturn" Value="True"/>
            <Setter Property="AllowDrop" Value="true"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TextBoxBase}">
                        <Border      
                      Name="Border"    
                      Padding="2"    
                      Background="Transparent"    
                      BorderBrush="LightGray"    
                      BorderThickness="1">
                            <ScrollViewer Margin="0" x:Name="PART_ContentHost"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Foreground" Value="Black"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
 <TextBox Grid.Column="1" Grid.Row="2" Text="{Binding Value, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, NotifyOnSourceUpdated=True, NotifyOnTargetUpdated=True}"  MinLines="3"       TextWrapping="Wrap"
                 SpellCheck.IsEnabled="True" Style="{StaticResource longTextField}"></TextBox> 
```

视图模型属性：

```
 private string _value;
            public string Value
            {
                get
                {
                    return _value;
                }
                set
                {
                    if (_value == value) 
                        return;

                    _value = value;
//replaces 's' with 'h' and should update the textbox.
                    _value = _value.Replace('s','h');
                    RaisePropertyChanged(() => Value);
                }
            } 
```

以上内容根本不适合我。视图模型属性设置器正在触发......该值正在被替换......但是文本框没有得到更新。令人困惑的是，这在 .Net4.0 上完美运行。

您知道为什么这不起作用吗？除了升级到 .NET 4.0 之外，还有什么潜在的解决方案可以解决这个问题？

我的要求：

*   用户可以键入以及将任何内容粘贴到多行文本框中。

*   文本可以包含垃圾，应该在它进入文本框之前进行更改。

在此先感谢，-迈克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T15:51:18.097

我遇到了一个非常相似的问题，我想要双向绑定，我正在修改 ViewModel 中的值并希望在 TextBox 中看到更新。我能够解决它。虽然我使用的是 .NET 4.0，但我基本上遇到了同样的问题，因此对于 3.5 的情况，这可能也值得尝试。

## 简短的回答：

我遇到的是一个错误，`TextBox's`显示的文本与该属性的值不`TextBox's`同步`Text`。 [Meleak 对类似问题的回答使](https://stackoverflow.com/a/10840957/718325)我了解了这一点，我能够使用 Visual Studio 2010 中的调试器以及使用 Meleak 的`TextBlock`技术来验证这一点。

**我能够通过使用显式绑定来解决它**。这需要自己在后面的代码中处理`UpdateSource()`和`UpdateTarget()`问题（或者在自定义控制代码中，因为我最终这样做以使其更容易重用）。

## 进一步说明：

以下是我处理显式绑定任务的方式。首先，我有一个用于更新绑定源的 TextChanged 事件的事件处理程序：

```
// Push the text in the textbox to the bound property in the ViewModel
textBox.GetBindingExpression(TextBox.TextProperty).UpdateSource(); 
```

其次，我有一个 TextBox 的 Loaded 事件的事件处理程序。在那个处理程序中，我为我的 ViewModel 的 PropertyChanged 事件注册了一个处理程序（这里的 ViewModel 是“DataContext”）：

```
private void ExplicitBindingTextBox_Loaded(object sender, RoutedEventArgs e)
{
    TextBox textBox = sender as TextBox;

    if (textBox.DataContext as INotifyPropertyChanged == null)
        throw new InvalidOperationException("...");

    (textBox.DataContext as INotifyPropertyChanged).PropertyChanged +=
                  new PropertyChangedEventHandler(ViewModel_PropertyChanged);
} 
```

最后，在 PropertyChanged 处理程序中，我使 TextBox 从 ViewModel 中获取值（通过启动 UpdateTarget()）。 **这使得 TextBox 从 ViewModel 中获取修改后的字符串**（在您的情况下，是带有替换字符的字符串）。在我的情况下，我还必须在刷新文本后（来自 UpdateTarget()）处理恢复用户的插入符号位置。不过，该部分可能适用于您的情况，也可能不适用于您的情况。

```
 /// <summary>
    /// Update the textbox text with the value that is in the VM.
    /// </summary>
    void ViewModel_PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
    {
        // This textbox only cares about the property it is bound to
        if (e.PropertyName != MyViewModel.ValueStrPropertyName)
            return;

        // "this" here refers to the actual textbox since I'm in a custom control
        //  that derives from TextBox
        BindingExpression bindingExp = this.GetBindingExpression(TextBox.TextProperty);
        // the version that the ViewModel has (a potentially modified version of the user's string)
        String viewModelValueStr;

        viewModelValueStr = (bindingExp.DataItem as MyViewModel).ValueStr;

        if (viewModelValueStr != this.Text)
        {
            // Store the user's old caret position (relative to the end of the str) so we can restore it
            //  after updating the text from the ViewModel's corresponding property.
            int oldCaretFromEnd = this.Text.Length - this.CaretIndex;

            // Make the TextBox's Text get the updated value from the ViewModel
            this.GetBindingExpression(TextBox.TextProperty).UpdateTarget();

            // Restore the user's caret index (relative to the end of the str)
            this.CaretIndex = this.Text.Length - oldCaretFromEnd;
        }

    } 
```

# javascript - 锚点中的 Javascript 不适用于 IE

> ID：14628427
> 
> 赞同：0
> 
> 时间：2013-01-31T14:43:24.927
> 
> 标签：javascript, html, anchor

我正在尝试通过锚标记和 javascript 重定向到我的 ServletController。

现在它可以在谷歌浏览器中运行，而不是在 IE 中。到目前为止，我在网上浏览了两天，发现 IE 不能很好地使用 setAttribute 与动态元素，所以我不得不切换到使用实际属性并为其分配一个值。

锚点假设创建一个动态表单并提交表单，然后向我的 Servlet 创建一个新请求，但是由于某种原因，当我在 javascript 中单击锚点时它什么也不做。但是，当我单击 chrome 中的锚点时，它会正确执行并将我重定向到下一页而没有任何问题。

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>My Account</title>
<meta name="description" content="eTeam Bank">
<meta name="author" content="Abraham Cabrera">
<link rel="stylesheet" type="text/css" href="css/mystyles.css">

<!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
<script type="text/javascript"> 
function anchorRedirect(username, user_id, operation) {
"use strict";
var form = document.createElement("form");
form.name="form";
form.id="form";
form.method = "post";
form.action = "ServletController";

var hiddenField1 = document.createElement("input");
hiddenField1.type = "hidden";
hiddenField1.name = "username";
hiddenField1.value = username;
form.appendChild(hiddenField1);

var hiddenField2 = document.createElement("input");
hiddenField2.type = "hidden";
hiddenField2.name = "user_id";
hiddenField2.value = user_id;
form.appendChild(hiddenField2);

var hiddenField3 = document.createElement("input");
hiddenField3.type = "hidden";
hiddenField3.name = "operation";
hiddenField3.value = operation;
form.appendChild(hiddenField3);

form.submit();
}
</script>
</head>
<body>
<header>
    <div id="title">eTeam Bank</div>
</header>

<div id="container">
    <div class="userTitle" >
        <div class="user">
            Welcome: user
        </div>
        <div class="userTime">
        Thu Jan 31 09:24:16 EST 2013
        </div>
    </div>
    <div class="accountBox" >
        <div class="accountSpace"></div>
        <div id="accountAnchor">
        <a href="javascript:anchorRedirect('user', '2', 'loadPersonalInfo');">Personal Info</a> 
        </div>
        <div id="accountAnchor"> 
        <a href="javascript: anchorRedirect('user', '2', 'loadAccountInfo')">Account Info</a> 
        </div>
        <div id="accountAnchor"> 
        <a href="javascript: anchorRedirect('user', '2', 'loadAccountSum')">Account Summary</a> 

        </div>
    </div>
</div>

<footer>
    <div id="footerContent">Abraham Cabrera &copy; 2013</div>
</footer> 
```

附加细节：
1\. 这不是针对任何类型的生产企业或公司，仅用于个人学习。
2.我确实尝试过不使用java脚本函数直接通过url路径传递变量，但这不符合我的要求，因为我需要向我的ServletController发出新请求，以便通过模型类或获取用户帐户信息它曾经是哪个操作并将其转发回视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:04:04.850

我注意到，如果我获取您的代码并添加一个 id='form_div1' 的 div 并在提交之前将新创建的表单附加到它，它就会从 FireFox 和 IE 开始工作。

```
var my_div = document.getElementById("form_div1");
my_div.appendChild(form);
form.submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:35:59.470

我建议在 HTML 中创建表单（而不是通过 javascript），其中包含所有需要的字段。然后，您无需创建和设置元素，而是通过简单地设置隐藏字段的值并提交表单来从根本上简化您的 JS。就像是

```
<form name="myform" id="myform" method="post" action="ServletController">
    <input type="hidden" name="username" value="">
    <input type="hidden" name="user_id" value="">
    <input type="hidden" name="operation" value="">
</form> 
```

使用类似的 javascript

```
function anchorRedirect(username, user_id, operation) {
    document.myform.username.value = username;
    document.myform.user_id.value = user_id;
    document.myform.operation.value = operation;
    document.myform.submit();
} 
```

# wpf - 在 WPF 中多次添加/删除 EventHandler

> ID：14628428
> 
> 赞同：2
> 
> 时间：2013-01-31T14:43:29.297
> 
> 标签：wpf, event-handling

如果我多次向一个事件添加（或删除）相同的 EventHandler，那是“坏”吗？内部发生了什么会导致问题的事情吗？（我在 TextBox 上实现数据验证，当 TB 内容变为有效/有效时，它将打开/关闭 MouseDoubleClick 处理程序。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:52:34.100

当您尝试多次*取消订阅事件时，什么都没有发生。*

当您想使用您的处理程序*订阅*事件时，您可以确保它尚未*订阅*。你应该这样做。因为**可以多次*订阅。***当然，只有当这不是你想做的事情时......

当您使用相同的处理程序两次*订阅事件时会发生什么？*这很简单......处理程序在事件中出现了两次，`InvocationList`所以它被调用了两次。当您再次订阅时，它会被调用三次......每次引发事件时都会`InvocationList`调用订阅的处理程序。

你可以看[这里](https://stackoverflow.com/questions/937181/c-sharp-pattern-to-prevent-an-event-handler-hooked-twice)......正如你所看到的......它至少重复了两个已经提出的问题。所以有很多答案:)

# sql - 当我将数据插入数据库时 ，心会变成问号。如何更改表格的字符集？

> ID：14628433
> 
> 赞同：0
> 
> 时间：2013-01-31T14:43:47.420
> 
> 标签：sql, sql-server, character-encoding

有一个名为`♥-You-Got-Me-♥[www.savevid.com].mp4`. 但随着同名文件被插入到 SQL Server 2005 数据库中，人们的心变成了`?`.

于是名字就变成了`?-You-Got-Me-?[www.savevid.com].mp4`。

不知道怎么改数据库的字符集？如何更改我的表的字符集，以便它可以覆盖所有字符？

如果答案中包含命令和*图形方法，那就太好了。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:57:08.237

您不需要更改数据库的字符集。只要您使用的是 NVARCHAR 类型，您就应该在数据库方面做得很好。但是，您必须确保将数据放入表中时会考虑 Unicode：

```
DECLARE @VAR VARCHAR(100) = N'♥-You-Got-Me-♥[www.savevid.com].mp4'
    , @NVAR NVARCHAR(100) = N'♥-You-Got-Me-♥[www.savevid.com].mp4'
    , @oops NVARCHAR(100) = '♥-You-Got-Me-♥[www.savevid.com].mp4'

SELECT 
    @VAR
    , @NVAR
    , @oops; 
```

回报：

```
?-You-Got-Me-?[www.savevid.com].mp4 ♥-You-Got-Me-♥[www.savevid.com].mp4 ?-You-Got-Me-?[www.savevid.com].mp4 
```

最后一个声明省略了文字前面的 N。有类似的方法可以在你的前端搞砸。即使 DB 存储 Unicode，您也必须确保输入和 DB 之间的所有内容，然后返回到您的 UI，都能正确处理多字节字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:51:55.880

这不是 CHARSET 问题，而是 SQL Server 中的数据类型问题。SQL Server 没有 CHARSET，因为 MySQL 和[排序规则用于代码页、排序和比较](https://dba.stackexchange.com/a/4272/630)

您需要使用`nvarchar`正确存储 unicode（基本上是非拉丁）数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:50:59.763

问题可能是使用`VARCHAR`，如果可能，更改为`NVARCHAR`类型应该可以解决新条目的问题。如果您无法更改列类型，它可能会变得更加复杂。

[SQL小提琴](http://www.sqlfiddle.com/#!3/d41d8/8331/0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T14:51:57.997

将存储文件名的字段类型从 更改`varchar`为`nvarchar`。

例如：

表：
FilenameId INT IDENTITY 文件名 NVARCHAR(200)

插入数据的 SQL：
`INSERT INTO TestTable ([Filename]) VALUES(N'♥-You-Got-Me-♥[www.savevid.com].mp4')`

# google-app-engine - GAE 在服务器和本地开发机器之间同步内容

> ID：14628438
> 
> 赞同：1
> 
> 时间：2013-01-31T14:44:06.520
> 
> 标签：google-app-engine, sync

假设在我的本地机器上包含我的 GAE 项目的文件夹中，我有一个图像文件夹。

当我使用正确的 .yaml 信息将应用程序上传到 GAE 时，将上传图像文件夹及其内容。

现在可以说，我正在在线运行 APP，并且我现在将图像上传到 Google 服务器上的图像文件夹。现在网络上的图像文件夹内容和我的本地开发机器上的内容不同。

我的问题是这样的：

下次我将应用程序上传到 GAE 时，图像文件夹的不同内容之间的差异将如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:58:36.300

部署后，您不能像那样将文件添加到应用程序中。本地文件系统对 GAE 应用程序是只读的。

如果您在部署应用程序时上传图像（通过您创建的处理程序），则无法将其保存在应用程序的图像文件夹中，您只能将其保存到数据/blob 存储。您随应用上传的文件是静态的，您或部署工具之外的应用都无法更改它们。当然，您可以读入它们，但一旦部署/根本就不能写入它们。

因此，部署版本与本地版本具有不同文件的情况永远不会出现——它们总是相同的。

# youtube - Youtube：获取订阅者所在的国家/地区

> ID：14628440
> 
> 赞同：2
> 
> 时间：2013-01-31T14:44:15.380
> 
> 标签：youtube, youtube-api

我是 YouTube API 的新手。通过 Youtube API 很容易获得频道的订阅者。但是有没有办法让频道的订阅者获得国家信息？感谢你的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T20:30:10.203

您绝对可以使用 Analytics API 来做到这一点

对于可用的报告，您可以查看“ [https://developers.google.com/youtube/analytics/v1/available_reports#Channel_Reports](https://developers.google.com/youtube/analytics/v1/available_reports#Channel_Reports) ”

# html - 在标题字符串中引入空格和换行符？

> ID：14628448
> 
> 赞同：0
> 
> 时间：2013-01-31T14:44:34.427
> 
> 标签：html, razor, newline, spaces

如何修改以下代码以将 Title 字符串值分成两行？中心对齐似乎也不起作用。我错过了什么吗？

```
@{ 
    Html.RenderAction(
        "GenericPopupPartial", 
        "Shared", 
        new { 
            containerName = "registerSuccess",  
            BodyHtml = Model.MessageSent, 
            Title = "Thank you for registering!       Our representatives will  review your request and email you with access to our product section shortly." 
            }
        );
}

<a class="fbox1" id="registerSuccess-link" href="#registerSuccess" style="display: none; text-align:center;"></a> 
```

输出如下：

> 感谢您的注册！我们的代表将审核您的请求，并尽快通过电子邮件向您发送访问我们产品部分的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:54:16.407

尝试`\n`：

```
Title = "Thank you for registering!\nOur representatives will  review your request and email you with access to our product section shortly." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:58:15.183

尝试

```
 @Html.Raw(Html.Encode(Model.MultiLineText) 
```

并在行之间包含 \n 字符

以下将用新行替换“break”字符。也许尝试一下。

```
@Html.Raw(Html.Encode(Model.MultiLineText).Replace("\n", "<br />")){"GenericPopupPartial", 
    "Shared", 
    new { 
        containerName = "registerSuccess",  
        BodyHtml = Model.MessageSent, 
        Title = "Thank you for registering! <br /> Our representatives will  review your request and email you with access to our product section shortly." 
        }
    );
} 
```

# android - android - listview 过滤器计数

> ID：14628453
> 
> 赞同：10
> 
> 时间：2013-01-31T14:44:49.527
> 
> 标签：android, filter, android-listview, filtering, android-adapter

所以在我在我的列表视图上设置过滤器之后：

```
//Log adapter count before filter
listView.getFilter().filter(searchStr)
//Log adapter count after filter 
```

我想要实现的是获得该过滤结果的计数。就像之前有 10 个项目，然后我应用过滤器，所以现在只会出现 5 个项目，我想得到那个计数“5”。我尝试在过滤器之前和之后检查适配器计数，但没有成功。如果我应用过滤器，它们将显示相同的计数（我正在使用 BaseExpandableListAdapter），如果我再次应用过滤器，数字会从之前发生变化（但过滤器的前后仍然相同）。

以下是我在日志中得到的示例结果：

```
Before filter the count is 10\. After filter the count is 10.
Before filter the count is 8\.  After filter the count is 8. 
```

我想也许我的适配器没有立即获得反射计数，但是在第二个过滤器上，它改变了值，所以我认为过滤器之后的 notifyDataSetChanged 会有所不同，但事实并非如此。任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-28T10:00:22.950

这就是我设法做到的方式：

```
myAdapter.getFilter().filter(searchText, new Filter.FilterListener() {
    public void onFilterComplete(int count) {
         Log.d("log", "result count:" + count);
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T14:51:09.933

`listview.getCount()`应用过滤器后尝试调用。

# c# - 无法引用 system.drawing.dll

> ID：14628455
> 
> 赞同：18
> 
> 时间：2013-01-31T14:44:54.113
> 
> 标签：c#, system.drawing, imageresizer

我正在尝试使用 ImageResizer 调整图像大小，但不断收到编译错误

> “错误 1 ​​类型 'System.Drawing.Bitmap' 在未引用的程序集中定义。您必须添加对程序集 'System.Drawing 的引用”

在寻找解决方案时，我发现了几个类似的问题，解决方案是引用 system.drawing.dll 以便能够处理图像，但是当我尝试通过以下方式引用它时：

右键项目->添加引用->选择COM->找到system.drawing.dll

但这给了我另一个错误，说“activeX 类型库 system.drawing.tlb 是从 .NET 程序集中导出的，不能作为参考添加。改为添加对 .NET 程序集的引用”

这就是我对下一步做什么感到目瞪口呆的地方。

编辑：

我得到错误的代码

```
public void resizeImage(String originalFile, String thumb)
    {
        ResizeSettings r = new ResizeSettings();
        r.MaxHeight = 200;
        r.MaxWidth = 200;

      ImageBuilder.Current.Build(originalFile, thumb, r);//this is where i get the first error
    } 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-31T14:45:30.307

从 .NET 选项卡而不是 COM 选项卡添加它。

在 Visual Studio 的解决方案资源管理器选项卡中，右键单击引用并选择“添加引用...”。然后单击 Assemblies、Framework 并向下滚动，直到看到 System.Drawing。单击它旁边的复选框，然后单击确定

# java - 蚂蚁的财产价值和财产位置有什么区别

> ID：14628457
> 
> 赞同：5
> 
> 时间：2013-01-31T14:44:56.503
> 
> 标签：java, ant, compilation

Ant 的配置文件--build.xml 有property 元素。根据官方文档，该属性具有属性值和位置。但我不明白为什么我们需要位置？我可以将路径设置为属性中的值吗？那么就不需要定位了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:22:48.547

如果您想做相对路径，则使用位置。

请注意，在此示例中，他们使用位置。不需要绝对路径。 [http://ant.apache.org/manual/using.html](http://ant.apache.org/manual/using.html)

如果您正在执行绝对路径，则可以使用位置或值（互斥）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:58:31.777

将属性设置为给定文件的绝对文件名。如果此属性的值是绝对路径，则保持不变（将 / 和 \ 字符转换为当前平台约定）。否则，它将被视为相对于项目的 basedir 的路径并展开。

来源：[http ://ant.apache.org/manual/Tasks/property.html](http://ant.apache.org/manual/Tasks/property.html)

例如，有人想将 lib dir 路径存储在变量中，则可以如下所示完成。

```
<property name="lib.dir" location ="project_home/lib"/> 
```

您可以使用上述属性，如下所示。

```
<fileset dir="${lib.dir}">
            <include name="**/*.jar"/>
        </fileset>. 
```

# java - 动态（编译时生成）Java 包名

> ID：14628458
> 
> 赞同：1
> 
> 时间：2013-01-31T14:44:57.097
> 
> 标签：java, android, build-process

我正在开发一个通用的 Android 游戏引擎，它将在我的许多 Android 应用程序中用作基本系统。问题是，在我所有的 Java 文件中，我目前必须像这样对包名称进行硬编码：

```
package com.example.mygameengine; 
```

但是因为我想在许多不同的应用程序中使用我的通用游戏引擎的代码，我需要找到一种在编译时为 Java 文件指定包名的方法，因为我不想保留我的 Java 源代码的多个副本因为包名不同。我想要一个中央源代码树，并且包名称应该可以根据我要编译的应用程序动态更改。

那么有没有办法做这样的事情：

```
package $(PACKAGE_NAME) 
```

在 $(PACKAGE_NAME) 将在编译时用真实包名替换的 Java 源代码中？也许 javac 有一个选项允许我为它传递的文件指定一个包名，而不是从文件本身中获取它？请注意，我使用的不是 Eclipse，而是准系统命令行工具，例如 ant 和 make。

编辑：我不明白为什么这被标记为重复。我已经问过一个基本问题，即 Java 语言中的“包”指令是否需要**在源代码中**硬编码字符串参数，或者是否也可以在编译时使用编译器指令设置这个包名称。这是一个与此处链接为假定“原始”问题的问题*完全*不同的问题，该问题与 Android 构建系统的联系更加紧密。我的问题是关于 Java 语言的基础知识，而不是关于 Android 构建系统。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T14:46:45.563

你能把你的通用游戏引擎代码构建成一个独立的 JAR。

然后，您可以将它作为依赖项包含到使用它的每个 Android 应用程序中。

通过适当的版本控制，您将只有一个存储此代码的中心位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:47:49.793

你不能。这不是代码重用的正确方法。

只需将您常用的代码打包到一个 jar 中，然后将该 jar 包含在您想要的每个项目中（在 Android 中，您可以通过将类添加到类路径中，然后在“Order & Export”选项卡中将其标记为已导出）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:46:29.230

这是不可能的，因为它是关于你的班级的核心元数据的一部分

包是相关 Java 实体（例如类、接口、异常、错误和枚举）的集合。包用于：

通过在类名前加上包名来解决类的命名冲突。例如，com.zzz.Circle 和 com.yyy.Circle 是两个不同的类。虽然它们共享同一个类名 Circle，但它们属于两个不同的包：com.zzz 和 com.yyy。这两个类可以在同一个程序中使用，并使用完全限定的类名——包名加类名来区分。这种机制称为命名空间管理。

访问控制：除了 public 和 private，Java 有两个访问控制修饰符——protected 和 default——与包相关。同一包中的类及其子类可以访问受保护的实体。没有访问控制修饰符（即默认）的实体只能由同一包中的类访问。

用于分发可重用类的集合，通常采用称为 Java 存档 (JAR) 文件的格式。

# php - 返回后重新发送表格

> ID：14628463
> 
> 赞同：0
> 
> 时间：2013-01-31T14:45:16.677
> 
> 标签：php, codeigniter, redirect, mobile, mobile-website

这是我一直试图解决的一个棘手的问题......

该问题发生在移动网站上。我使用 codeigniter 创建一个表单，将一些值传递给数据库，然后将用户重定向到用户发送的文章。

问题是，在 Android WebView（这是一个自定义应用程序）中，可能也在其他移动设备上，所以当用户点击后退按钮时，它会重新发送数据并再次发布文章。文章的发布次数与用户点击返回按钮的次数一样多，没有任何警告。

有什么建议么？有人遇到过这个问题吗？

哦，顺便说一句，如果整个历史记录被删除（不确定这是否可能，因为它的客户端，我不喜欢使用 JavaScript）并且用户点击后退按钮，他将被带出该应用程序，我不想发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:49:06.037

通过 POST 加载的页面将导致浏览器要求用户重新提交信息以查看页面，从而导致该页面执行的操作再次发生。如果页面是通过 GET 请求的并且在查询字符串中有变量，那么同样的事情会发生，但会默默地发生（不会提示用户再次 d 它）。

解决此问题的最佳方法是使用[POST/REDIRECT/GET 模式](http://www.andypemberton.com/engineering/the-post-redirect-get-pattern/)。[我在我为 Authorize.Net 编写的](http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Handling-Online-Payments-Part-6-Preventing-Duplicate-Submissions/ba-p/11168)关于处理付款的示例中使用了它。希望这会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T13:36:45.643

我像这样解决了一个类似的问题（也在手机中）。

1.  生成一个令牌（15 char 的随机字符串）并保存在 SESSION['token'] 即。

2.  将此标记保存在 html 表单中的隐藏输入中。

3.  提交表单时，在触摸数据库之前，将提交的令牌与会话一进行比较，如果匹配，则继续并取消设置（）会话令牌，否则错误令牌不匹配。

希望能帮助到你。

# java - 在 ListView 中获取所选项目的标题文本

> ID：14628465
> 
> 赞同：0
> 
> 时间：2013-01-31T14:45:24.323
> 
> 标签：java, android, android-listview, onclick

有没有办法在点击时获取所选项目的标题文本（来自该部分）？

使用此代码，我可以获得所选项目的文本，但我也想知道在哪个标题中单击了该项目。

```
@Override
public void onListItemClick(ListView lv, View v, int position, long id) {
    System.out.println( "CLICKED LOCATION: " + 
        ((TextView) v.findViewById(R.id.list_content1)).getText().toString() );
} 
```

我根据下载并保存在包含 Key 的 TreeMap 和另一个包含 Key 和 String ( `TreeMap<String, TreeMap<String, String>> )`.

然后我循环两个地图以获取标题和行：

```
public void setLocationsCompanyHashMap(TreeMap<String, TreeMap<String, Object>> map)
    {
        companyMap = map;

        List<Item> items = new ArrayList<Item>();

        Iterator<?> it = companyMap.entrySet().iterator();
        while (it.hasNext()) {

            Map.Entry pairs = (Map.Entry)it.next();
            items.add(new Header(null, (String) pairs.getKey()));

            Iterator<?> ite = ((Map<String, Object>) pairs.getValue()).entrySet().iterator();
            while (ite.hasNext()) {
                Map.Entry in_pairs = (Map.Entry)ite.next();
                items.add(new ListItem(null, (String) in_pairs.getKey()));
            }

        }

        LocationsArrayAdapter adapter = new LocationsArrayAdapter(getActivity(), items);
        setListAdapter(adapter);
    } 
```

这是我的xml

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:cacheColorHint="@android:color/transparent" 
    android:choiceMode="singleChoice"/> 
```

header.java：

```
import android.view.LayoutInflater;

public class Header implements Item {

    private final String         name;

    public Header(LayoutInflater inflater, String name) {
        this.name = name;
    }

    @Override
    public int getViewType() {
        return RowType.HEADER_ITEM.ordinal();
    }

    @Override
    public View getView(LayoutInflater inflater, View convertView) {
        View view;
        if (convertView == null) {
            view = (View) inflater.inflate(R.layout.header, null);
            // Do some initialization
        } else {
            view = convertView;
        }

        TextView text = (TextView) view.findViewById(R.id.separator);
        text.setText(name);

        return view;
    }

} 
```

location_header.xml：

```
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center" android:scrollbars="none"
    style="?android:attr/listSeparatorTextViewStyle" /> 
```

Listitem.java

```
import android.view.LayoutInflater;

public class ListItem implements Item {
    private final String         str1;
    private final LayoutInflater inflater;

    public ListItem(LayoutInflater inflater, String text1) {
        this.str1 = text1;
        this.inflater = inflater;
    }

    @Override
    public int getViewType() {
        return RowType.LIST_ITEM.ordinal();
    }

    @Override
    public View getView(LayoutInflater inflater, View convertView) {
        View view;
        if (convertView == null) {
            view = (View) inflater.inflate(R.layout.locations_list_item, null);
            // Do some initialization
        } else {
            view = convertView;
        }

        TextView text1 = (TextView) view.findViewById(R.id.list_content1);
        text1.setText(str1);

        return view;
    }

} 
```

location_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:background="@drawable/listitem_background">

    <TextView
        android:id="@+id/list_content1"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_margin="5dip"
        android:clickable="false"
        android:gravity="center"
        android:longClickable="false"
        android:paddingBottom="1dip"
        android:paddingTop="1dip"
        android:textColor="#28465a"
        android:textSize="17sp"
        android:textStyle="bold" 
        />

</LinearLayout> 
```

接口项：

导入 android.view.LayoutInflater；

```
public interface Item {
    public int getViewType();
    public View getView(LayoutInflater inflater, View convertView);
} 
```

LocationsArrayAdapter.java：

```
import java.util.List;

public class LocationsArrayAdapter extends ArrayAdapter<Item> {

    private LayoutInflater mInflater;

    public enum RowType {
        LIST_ITEM, HEADER_ITEM
    }

    private List<Item> items;

    public LocationsArrayAdapter(Context context, List<Item> items) {
        super(context, 0, items);
        this.items = items;
        mInflater = LayoutInflater.from(context);
    }

    @Override
    public int getViewTypeCount() {
        return RowType.values().length;

    }

    @Override
    public int getItemViewType(int position) {
        return items.get(position).getViewType();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        return items.get(position).getView(mInflater, convertView);
    }

} 
```

在我的活动中，我只是添加了一个新片段（LocationViewFragment.java）

```
getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.viewLayout, fragment)
        .commit(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:48:34.450

Ok , The easiest solution I could think of giving the above code is to tag The `Item` Object to the `TextView` object that is related to it. The code would be like:

```
text1.setText(str1);
text1.setTag(this); 
```

and on the `onListItemClick`:

```
Header header = (Header) v.getTag(); 
```

but I strongly suggest you to set the getView method inside the adapter itself instead of calling it from the children views. and keep all the items in an array inside it , so you can use the `onListItemClick` position value to access the Header you want directly

# iphone - 如何将数据从 safari 推送到应用程序文档目录

> ID：14628467
> 
> 赞同：-1
> 
> 时间：2013-01-31T14:45:32.663
> 
> 标签：iphone, safari

我想打开 safari 浏览器，从中我可以选择任何图像/文本并将其直接保存到应用程序目录。实现这一目标的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:58:51.183

不，这是不可能的，应用程序是沙盒的，不能直接访问彼此的数据。

在 safari 中没有保存数据保存选项的选项。你所能做的就是告诉 iOS 你的应用可以处理一些文件扩展名。如果是可以打开文件类型的应用程序，这将允许 safrie、邮件或任何其他应用程序。

# python - 从包含引号的空格的 shell 变量将参数传递给 Python 脚本

> ID：14628475
> 
> 赞同：1
> 
> 时间：2013-01-31T14:46:14.990
> 
> 标签：python, bash, quotes, spaces

我正在通过 bash 包装器调用 python 脚本，但在处理包含引号空格的参数时遇到了麻烦。

我将python脚本的参数组装成一个bash变量，例如

```
opt="-c start.txt"
opt+="--self 'name Na'" 
```

然后使用以下命令调用 python 脚本：

```
python test_args.py $opt 
```

`sys.argv`在 Python 中打印时，我得到

```
['test-args.py', '-c', 'start.txt', '--self', "'name", "Na'"] 
```

而不是预期的

```
['test-args.py', '-c', 'start.txt', '--self', 'name Na'] 
```

我在调用脚本时尝试使用数组，例如

```
python test_args.py ${opt[@]} 
```

但后来我得到

```
['test-args.py', "-c start.txt --self 'name Na'"] 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:17:03.360

使用数组，但将每个参数作为单独的元素存储在数组中：

```
opt=(-c start.txt)
opt+=(--self 'name Na')

python test_args.py "${opt[@]}" 
```

请参阅[BashFAQ #050](http://mywiki.wooledge.org/BashFAQ/050)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:55:34.450

这就是[shlex](http://docs.python.org/2/library/shlex.html)模块的用途。

> shlex 类可以很容易地为类似于 Unix shell 的简单语法编写词法分析器。这对于编写小型语言（例如，在 Python 应用程序的运行控制文件中）或解析带引号的字符串通常很有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T15:24:16.883

您在变量值中嵌入空格的本能很好，但是当在命令行解析期间简单地扩展该值时，它们的特殊含义就会丢失，如您所见。在解析 Python 脚本的命令行之前，您需要扩展变量：

```
set -f
eval python test_args.py $opt
set +f 
```

这将扩展为：

```
python test_args.py -c start.txt --self 'name Na' 
```

然后将使用重新获得其特殊含义的引号正确解析。

编辑：我在 eval 周围添加了 set -f/+f (aka -/+o noglob) 以禁用文件通配，尽管这在 OP 的示例中不是问题，这不是 eval 的闻所未闻的问题。（另一个更强烈的警告是永远不要评估用户输入，除非你非常小心以确保它不会爆炸成令人讨厌的东西。如果你不控制被评估的值，你不能确定什么会发生。）

# javascript - 通过 JavaScript / jQuery 旋转对象

> ID：14628484
> 
> 赞同：-1
> 
> 时间：2013-01-31T14:46:42.890
> 
> 标签：javascript, jquery, rotation

我对 jQuery 的 animate() 方法和属性有基本的了解，但我想更进一步……开发人员研究哪些资源来帮助通过 JavaScript / jQuery 旋转图像？

我目前的思考过程是假设有数学函数可以存储到变量中并插入到 animate() jQuery 序列中，以便在单击时查看对象旋转 180 度。然后当您再次单击该对象时，它会再旋转 180 度。

我的最终目标是拥有一个使用 css 背景图像的 < div > 来旋转。图像本身将是一个具有透明度的 png 文件，以帮助使旋转看起来更加无缝。如果这听起来很愚蠢，请告诉我——但这就是我脑海中的想象......

我只是在寻找学习这个过程的方向

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:52:16.610

您可以操作 CSS[转换](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transforms?redirectlocale=en-US&redirectslug=CSS%2FUsing_CSS_transforms)属性，或将图像添加到画布元素，您可以在其中使用本机旋转方法，或手动重新定位图像的像素。

# python - 为什么不保证在解释器退出时调用析构函数？

> ID：14628486
> 
> 赞同：17
> 
> 时间：2013-01-31T14:46:45.253
> 
> 标签：python, destructor

来自[python 文档](http://docs.python.org/2/reference/datamodel.html#object.__del__)：

> 不能保证`__del__()`为解释器退出时仍然存在的对象调用方法。

为什么不？如果做这个保证会出现什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-13T12:52:43.170

I'm not convinced by the previous answers here.

Firstly note that the example given does **not** prevent `__del__` methods being called during exit. In fact, the current CPythons **will** call the `__del__` method given, twice in the case of Python 2.7 and once in the case of Python 3.4\. So this can't be the "killer example" which shows why the guarantee is not made.

I think the statement in the docs is not motivated by a design principle that calling the destructors would be bad. Not least because it seems that in CPython 3.4 and up they are always called as you would expect and this caveat seems to be moot.

Instead I think the statement simply reflects the fact that the CPython implementation has sometimes not called all destructors on exit (presumably for ease of implementation reasons).

The situation seems to be that CPython 3.4 and 3.5 do always call all destructors on interpreter exit.

CPython 2.7 by contrast does not always do this. Certainly `__del__` methods are usually not called on objects which have cyclic references, because those objects cannot be deleted if they have a `__del__` method. The garbage collector won't collect them. While the objects do disappear when the interpreter exits (of course) they are not finalized and so their `__del__` methods are never called. This is no longer true in Python 3.4 after the implementation of [PEP 442](https://www.python.org/dev/peps/pep-0442/).

However, it seems that Python 2.7 also does not finalize objects that have cyclic references, even if they have no destructors, if they only become unreachable during the interpreter exit.

Presumably this behaviour is sufficiently particular and difficult to explain that it is best expressed simply by a generic disclaimer - as the docs do.

Here's an example:

```
class Foo(object):
    def __init__(self):
        print("Foo init running")

    def __del__(self):
        print("Destructor Foo")

class Bar(object):
    def __init__(self):
        print("Bar1 init running")
        self.bar = self
        self.foo = Foo()

b = Bar()

# del b 
```

With the `del b` commented out, the destructor in `Foo` is not called in Python 2.7 though it is in Python 3.4.

With the `del b` added, then the destructor is called (at interpreter exit) in both cases.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T14:52:17.920

如果你做了一些讨厌的事情，你可能会发现自己有一个不可删除的对象，python 会试图永远删除它：

```
class Phoenix(object):
    def __del__(self):
        print "Deleting an Oops"
        global a
        a = self

a = Phoenix() 
```

在任何情况下，依赖`__del__`都不是很好，因为 python 不能保证*何时*删除对象（尤其是具有循环引用的对象）。也就是说，也许将你的类变成上下文管理器是一个更好的解决方案......然后你可以保证即使在出现异常等情况下也会调用清理代码......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-12T17:13:42.673

我不认为这是因为删除会导致问题。更多的是 Python 的哲学不是鼓励开发人员依赖使用对象删除，因为这些删除的时间是无法预测的——这取决于垃圾收集器何时发生。

如果垃圾收集器可能会在未使用的对象超出范围后将其延迟删除一段未知的时间，那么依赖于对象删除期间发生的副作用不是一个非常健壮或确定性的策略。[RAII](https://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)不是 Python 的方式。相反，Python 代码使用上下文管理器、装饰器等来处理清理工作。

更糟糕的是，在复杂的情况下，例如对象循环，垃圾收集器可能永远不会检测到可以删除对象。随着 Python 的成熟，这种情况有所改善。但是由于这种预期的 GC 行为异常，Python 开发人员依赖对象删除是不明智的。

我推测解释器退出是另一种复杂的情况，Python 开发人员，特别是对于旧版本的 Python，对确保 GC 删除运行在所有对象上并不完全严格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-12T16:55:50.530

一个不调用析构函数的例子是，如果你在一个方法中退出。看看这个例子：

```
class Foo(object):
    def __init__(self):
        print("Foo init running")

    def __del__(self):
        print("Destructor Foo")

class Bar(object):
    def __init__(self):
        print("Bar1 init running")
        self.bar = self
        self.foo = Foo()

    def __del__(self):
        print("Destructor Bar")

    def stop(self):
        del self.foo
        del self
        exit(1)

b = Bar()
b.stop() 
```

输出是：

```
Bar1 init running
Foo init running
Destructor Foo 
```

当我们显式地析构 foo 时，会调用析构函数，但不会调用 bar 的析构函数！

而且，如果我们不明确删除 foo，它也不会被正确地破坏：

```
class Foo(object):
    def __init__(self):
        print("Foo init running")

    def __del__(self):
        print("Destructor Foo")

class Bar(object):
    def __init__(self):
        print("Bar1 init running")
        self.bar = self
        self.foo = Foo()

    def __del__(self):
        print("Destructor Bar")

    def stop(self):
        exit(1)

b = Bar()
b.stop() 
```

输出：

```
Bar1 init running
Foo init running 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T14:55:44.677

可能是因为大多数程序员会认为析构函数应该只在死的（已经无法访问的）对象上调用，而在退出时我们会在活的对象上调用它们。

如果开发人员没有预料到对活动对象的析构函数调用，可能会导致一些讨厌的 UB。至少，如果应用程序挂起，则必须在超时后强制关闭应用程序。但是可能不会调用一些析构函数。

由于同样的原因，Java Runtime.runFinalizersOnExit 已被弃用。

# javascript - 在网站上动态嵌入视频时如何禁用 youtube 第三方的 cookie？

> ID：14628489
> 
> 赞同：0
> 
> 时间：2013-01-31T14:46:47.500
> 
> 标签：javascript, cookies, youtube

我需要采取一种方法来遵守关于第三方 cookie 的新欧盟法律。我已经设法在需要时限制了大部分内容，但我无法限制嵌入视频中的 youtube cookie。

即使没有这些 cookie，视频似乎也能运行，因此保留了该功能。

这些是我要引用的 cookie（它们都来自 .youtube.com 域）：

```
VISITOR_INFO1_LIVE (path /)
PREF (path /)
use_hitbox (path /) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T07:09:29.350

您可以将域从 youtube.com 更改为 youtube-nocookie.com。

# python - 如何让 PAM30 工作（在 Windows7 上）

> ID：14628490
> 
> 赞同：0
> 
> 时间：2013-01-31T14:46:46.887
> 
> 标签：python, windows-7, pamie

**背景**：我正在尝试创建一个可以登录网站的程序。首先，我使用了 IEControler。但是，我尝试登录的特定站点具有一项不适用于 IEC 的特定功能。

**问题** 经过一番搜索，我找到了 PAM30。这个模块似乎有更多的选择，所以我想试试这个。但是我无法让 PAM30 正常工作。除了导航，我什么也做不了。我在谷歌上做了很多搜索，尝试了很多不同的解决方案，但没有一个有效。

**PAM30 和 WINDOWS 7** 那么我想知道是否有人将 PAM30 与 Windows 7 结合使用并取得了成功？如果是这样，您使用了哪些版本的 Python、PyWin 和 IE？

# asp.net - 从后面的代码执行选择查询

> ID：14628491
> 
> 赞同：2
> 
> 时间：2013-01-31T14:46:49.617
> 
> 标签：asp.net, asp.net-3.5, code-behind

如何`SELECT`从我的代码隐藏文件中执行查询，然后遍历它？

我想做这样的事情（只是一个简单的伪示例）：

```
// SQL Server
var results = executeQuery("SELECT title, name FROM table");

foreach (var row in results)
{
    string title = row.title;
    string name = row.name;
} 
```

我怎样才能在代码中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T14:50:07.190

像这样的东西：

```
 string queryString = 
    "SELECT OrderID, CustomerID FROM dbo.Orders;";
using (SqlConnection connection = new SqlConnection(
           connectionString))
{
    SqlCommand command = new SqlCommand(
        queryString, connection);
    connection.Open();
    SqlDataReader reader = command.ExecuteReader();
    try
    {
        while (reader.Read())
        {
            Console.WriteLine(String.Format("{0}, {1}",
                reader["OrderID"], reader["CustomerID"]));
        }
    }
} 
```

来源：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)

这`connectionString`取决于数据库产品和使用的身份验证机制（Windows 身份验证、用户名/密码等）。上面的示例假设您使用的是 SQL Server。有关不同的完整列表`ConnectionStrings`，请访问[http://www.connectionstrings.com/](http://www.connectionstrings.com/)

# jquery-ui - jQuery Autocomplete UI 从 asp 页面获取源代码

> ID：14628498
> 
> 赞同：0
> 
> 时间：2013-01-31T14:47:06.907
> 
> 标签：jquery-ui, jquery, asp-classic, jquery-autocomplete

如何从经典的 asp 页面获取 Jquery Autocomplete UI 的源代码？

我找到了默认代码。但我想从另一个asp页面获取我的结果。我如何使用 asp 发送并获取 jQuery？

我需要一点帮助。

```
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Autocomplete - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
  $(function() {
    var availableTags = [
      "ActionScript",
      "AppleScript",
      "Asp",
      "BASIC",
      "C",
      "C++",
      "Clojure",
      "COBOL",
      "ColdFusion",
      "Erlang",
      "Fortran",
      "Groovy",
      "Haskell",
      "Java",
      "JavaScript",
      "Lisp",
      "Perl",
      "PHP",
      "Python",
      "Ruby",
      "Scala",
      "Scheme"
    ];
    $( "#tags" ).autocomplete({
      source: availableTags
    });
  });
  </script>
</head>
<body>

<div class="ui-widget">
  <label for="tags">Tags: </label>
  <input id="tags" />
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:51:55.580

一种解决方案是响应将数据直接写入输出。

例如，这就是您的经典 asp 的方式：我无法运行此代码，但它应该看起来像这样......

```
<%
function getListOfTags()
{
  try 
  {
    var objRs = new ActiveXObject("ADODB.Recordset");
  }
  catch (e)
  {
    alert("ADODB namespace not found.");
    exit(0);
  }

  strTagList = "";

  strConn =  "Provider="         +DP+
            ";Initial Catalog="  +DB+
            ";Data Source="      +DS+
            ";Integrated Security=SSPI;"
  strComm = "SELECT ProductID,ProductName,UnitPrice "+
            "FROM Products " + 
            "WHERE CategoryID = 7"  // select Produce

  objRs.open(strComm, strConn, adOpenForwardOnly, adLockReadOnly, adCmdText);

  objRs.MoveFirst();
  while (objRs.EOF != true) 
  {
    strTagList += '"'+objRs("TagName")+'",'
    objRs.MoveNext();
  }
  objRs.Close
  objRs = null;

return (strTagList);
}
%>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Autocomplete - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
  $(function() {
    var availableTags = [
      <%= getListOfTags() %>
    ];
    $( "#tags" ).autocomplete({
      source: availableTags
    });
  });
  </script>
</head>
<body>
<div class="ui-widget">
  <label for="tags">Tags: </label>
  <input id="tags" />
</div>  
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:53:36.967

您可以使用远程数据源进行 jQuery 自动完成。

在 jQuery.com 上查看这个[示例](http://jqueryui.com/autocomplete/#remote)

```
 $( "#birds" ).autocomplete({
   source: "search.asp",
   minLength: 2,
   select: function( event, ui ) {
      log( ui.item ?
      "Selected: " + ui.item.value + " aka " + ui.item.id :
      "Nothing selected, input was " + this.value );
   }
}); 
```

这`search.asp`是一个以 JSON 格式返回项目列表的页面。

# php - 删除列表项正则表达式后的换行符？

> ID：14628500
> 
> 赞同：0
> 
> 时间：2013-01-31T14:47:16.877
> 
> 标签：php, regex

好的，我正在寻找一种方法来做到这一点：

```
<li>stuff</li><br /> 
```

被剥夺了结局

```
<br /> 
```

当我在 php 中执行 nl2br 函数时，它会被添加到其中。

或者你认为一个更好的主意是去掉里面的所有新行

```
<ul> 
```

标签？

这是我网站上文章的 bbcode->html 功能的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:51:40.867

为什么不简单地使用`str_replace`？

```
$myString = str_replace('</li><br />', '</li>', $myString); 
```

这会删除所有`<br />`跟在`</li>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:55:43.130

[从字符串中删除新行](https://stackoverflow.com/questions/3760816/remove-new-lines-from-string)

至于删除 br: [str_replace](http://php.net/manual/en/function.str-replace.php) br to empty string '' in your string

# java - Tapestry - 枚举强制

> ID：14628502
> 
> 赞同：1
> 
> 时间：2013-01-31T14:47:21.073
> 
> 标签：java, enums, tapestry, encoder, coercion

我目前正在尝试将枚举作为 Tapestry 5 表单的一部分。所以我按照[这些解释](http://tapestry.apache.org/enum-parameter-recipe.html)没有成功。确实我收到了这个错误：

```
[...]
Caused by: java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Enum
    at org.apache.tapestry5.util.EnumValueEncoder.toClient(EnumValueEncoder.java:24) ~[tapestry-core-5.3.3.jar:na]
[...] 
```

所以这是我的页面类中的内容：

```
@Property
private ScanMode scanMode 
```

（ScanMode 是 Enum 类型） .tml 文件：

```
<t:radiogroup t:value="scanMode">
 <t:label for="recto">Recto</t:label>
 <input t:id="recto" type="radio" t:type="radio" t:value="literal:RECTO"/>
                            <br />
 <t:label for="verso">Recto/Verso</t:label>
 <input t:id="rectoverso" type="radio" t:type="radio" 
                          t:value="literal:RECTO_VERSO"/>
</t:radiogroup> 
```

最后，我的 ApplicationModule.java ：

```
private static <T extends Enum> void add(Configuration<CoercionTuple> configuration, Class<T> enumType) {
    configuration.add(CoercionTuple.create(String.class, enumType, StringToEnumCoercion.create(enumType)));
}

public void contributeMasterDispatcher(OrderedConfiguration<Dispatcher> configuration, @InjectService("AccessController") Dispatcher accessController) {
    configuration.add(AccessController.class.getSimpleName(), accessController, "before:PageRender");
} 
```

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:55:31.203

[http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/corelib/components/Radio.html](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/corelib/components/Radio.html)

最简单的方法（AppModule 中没有转换器）：

```
@Property
private ScanMode scanMode

public ScanMode getRecto(){ return ScanMode.RECTO; }
public ScanMode getRectoVerso(){ return ScanMode.RECTO_VERSO; }

<t:radiogroup t:value="scanMode" >
    <t:label for="recto">Recto</t:label>
    <t:radio t:id="recto"/>
    <br />
    <t:label for="rectoVerso">Recto/Verso</t:label>
    <t:radio t:id="rectoVerso"/>
</t:radiogroup> 
```

# android - Android GCM 加密

> ID：14628503
> 
> 赞同：7
> 
> 时间：2013-01-31T14:47:24.347
> 
> 标签：android, google-cloud-messaging

我开始使用 Android GCM 框架..

它实际上非常好且易于实现，但有一个重要问题：

我正在传输的数据不敏感，但我不希望每个人都可以使用它。

这是怎么加密的？还是我应该加密我的消息？

我知道它基本上是一个通知服务 - 但我正在发送短消息，所以了解这些消息如何通过谷歌传递对我来说很重要，

谢谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T15:10:54.027

> 这是怎么加密的？

Google 在您的服务器和他们的服务器 (SSL) 之间以及他们的服务器和设备之间使用无线加密。因此，唯一可以访问 GCM 消息数据的系统是：

*   你的服务器
*   您的订阅者的设备
*   谷歌

> 我应该加密我的消息吗？

这取决于您是否信任 Google，以及您的消息负载的性质是什么。例如，如果 Google 不能直接使用消息负载（例如，它只是一个标志，告诉您的应用程序使用您的正常 Web 服务协议进行同步），那么加密可能不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-15T21:58:08.383

消息有效负载加密/解密是您必须在服务和客户端应用程序端执行的操作。这样通过 GCM 的任何东西都是安全的，谷歌将无法看到里面的东西。

但是，请记住，客户端应用程序中的解密可能是一个代价高昂的过程 - 您需要唤醒应用程序并解密，这将花费您一些电池。

# django - 在 django-tastypie 的 POST 上返回列表数据

> ID：14628505
> 
> 赞同：0
> 
> 时间：2013-01-31T14:47:40.160
> 
> 标签：django, post, tastypie

我知道`always_return_data = True`在创建之后让 sweetpie 返回对象。

我想在创建对象时返回一个数据列表。
（当用户`like`发布帖子时，我会返回帖子的所有喜欢信息）

这是一个不好的做法吗？
我可以在常规的 django 视图中轻松地做到这一点，但很难吃到美味的馅饼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:01:26.823

我唯一能想到的就是创建一个`Mixin`for `Resource`/`ModelResource`和一个不同的`post_list`/ `put_detail`/`put_list`来处理这个问题。查看[resources.py](https://github.com/toastdriven/django-tastypie/blob/v0.9.11/tastypie/resources.py)以了解您需要更改的功能。

# php - PHP表单数据未插入MySQL数据库

> ID：14628506
> 
> 赞同：1
> 
> 时间：2013-01-31T14:47:44.520
> 
> 标签：php

HTML 表格

```
 <form class="form" method="post" action="process.php">
    <h4 class="form-heading">Please New Enter Customer Information</h4>
    <label for="inital">Inital:</label>
     <select id="inital" name="inital" required="required">  
        <option value="mr">Mr</option>  
        <option value="ms">Ms</option>  
        <option value="mrs">Mrs</option> 
        <option value="prof">Prof</option>      
        <option value="dr">Dr</option>    
    </select>  
    <label for="firstname">First Name:</label>
    <input type="text" placeholder="First Name" name="firstname" required="required" >
    <label for="lastname">last Name:</label>
    <input type="text" placeholder="Last Name" name="lastname" required="required">
    <label for="mobile">Mobile:</label>
    <input type="tel" placeholder="Mobile" name="mobile" required="required">
    <label for="landline">Landline:</label>
    <input type="tel" placeholder="Landline" name="landline">
    <label for="email">Email:</label>
    <input type="email" placeholder="Email" name="email" required="required">
    <label for="address">Address:</label>
    <input type="text" placeholder="Address" name="address" required="required">
    <label for="postocde">Postal Code:</label>
    <input type="text" placeholder="Post Code" name="postcode">
    <label for="accessibility">Accessibility:</label>
    <input type="text" placeholder="Accessibility Needs" name="accessibility" value="">

    <button class="btn btn-large btn-primary" type="submit">Enter</button> 
```

进程.php

```
 <? php

require( '../connect_db.php' ) ;

$inital = $sql->real_escape_string($_POST[inital]);  
$firstname = $sql->real_escape_string($_POST[firstname]); 
$lastname = $sql->real_escape_string($_POST[lastname]); 
$mobile = $sql->real_escape_string($_POST[mobile]); 
$landline = $sql->real_escape_string($_POST[landline]);
$email = $sql->real_escape_string($_POST[email]);
$address = $sql->real_escape_string($_POST[address]);   
$postcode = $sql->real_escape_string($_POST[postcode]); 
$accessibility = $sql->real_escape_string($_POST[accessibility]); 

$query = "INSERT INTO `customer` (inital, firstname, lastname, mobile, landline, email, address, postcode, accessibility) VALUES ('$inital','$firstname', '$lastname','$mobile','$landline','$email','$address','$postcode','$accessibility')";

/* execute the query, nice and simple */
$sql->query($query) or die($query.'<br />'.$sql->error);

 ?> 
```

我也尝试过替代方案，但不满意，比如不包括，`$inital =($_POST[inital]);`而是直接放入 INSERT INTO 部分，但这仍然无济于事。

它要么在屏幕上打印出整个代码，要么在空白处打印出来。我在这里和论坛上查看了类似的问题，所有这些问题似乎都以不同的方式呈现问题，当我改变它以适应所谓的答案时，它仍然不起作用！

我使用以下连接所需语句列出所有表的其他页面工作正常，因此与数据库的连接没有问题，但此时无法插入内容。格子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:51:23.637

两个问题：

改变`<? php to <?php`

然后在您的帖子数据值中添加引号。`$_POST[inital] to $_POST['inital']`

为了你的信息，我会做`isset($_POST['value']) ? $_POST['value'] : '';`

您仍然需要在使用前检查后值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:50:47.733

检查`<?`php 标签。它应该是`<?php`

# java - 如何根据事件更新多个会话

> ID：14628513
> 
> 赞同：0
> 
> 时间：2013-01-31T14:47:59.293
> 
> 标签：java, servlets, jboss

在我们的 Web 应用程序中（在使用 Struts 的 JBoss 中）我们使用会话主要是为了安全以及为用户缓存一些数据。因此，每个登录到应用程序的用户都有一个会话，其中缓存了不同的数据。

基于一些参数更改，我想更改已登录用户子集的缓存（即有会话）

这可以实现吗？到目前为止，我无法从一般搜索中找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:50:13.293

你可以使用一个`HttpAttributeListener`

[这里](http://inheritingjava.blogspot.in/2011/03/chapter-22-session-event-listeners.html)是一个基本的例子

> **HttpSessionAttributeListener：**
> 
> HttpSessionAttributeListener 接口使对象能够监视给定 Web 应用程序中会话属性列表的更改。HttpSessionAttributeListener 又扩展了 java.util.EventListener。其中的方法是
> 
> *   attributeAdded(HttpSessionBindingEvent se) - 这是属性已添加到会话的通知。
> *   attributeRemoved(HttpSessionBindingEvent se) - 这是属性已从会话中删除的通知。
> *   attributeReplaced(HttpSessionBindingEvent se) - 这是在会话中属性已被替换的通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:50:35.597

您可以通过将每个会话对象存储`static List<Session>`在某个持有者对象中来实现。你可以把它放在一个`HttpSessionListener#sessionCreated(..)`. 记得把它从列表中删除`sessionDestroyed(..)`

然后，每当您想做某事时，只需循环先前存储的会话列表，然后对它们做任何您想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:56:04.333

你基本上有2个选择：

1.  推动更改。获取[`HttpSession`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html)应用程序范围地图中的所有实例，您在[`HttpSessionListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionListener.html). 这样您就可以从应用程序范围中获取它们并遍历它们以直接进行必要的更改。

2.  轮询更改。在应用程序范围内存储更改指令。在每个 HTTP 请求的帮助下检查[`Filter`](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)是否[`ServletRequestListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequestListener.html)需要更改，然后在当前会话中进行必要的更改并删除/禁用更改指令。

一个完全不同的替代方案是使用应用程序范围的共享缓存，例如 Terracotta 或 Ehcache，这样您就不需要在所有 HTTP 会话中复制相同的数据。您只需要按请求处理数据。当使用 JPA 访问数据库时，请继续阅读“二级缓存”，这正是它的作用。

# jquery - jquery下拉菜单在chrome上不起作用

> ID：14628514
> 
> 赞同：0
> 
> 时间：2013-01-31T14:47:58.933
> 
> 标签：jquery, google-chrome, drop-down-menu

我正在构建 jquery 下拉菜单，我的菜单代码是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Accordion Menu Using jQuery</title>
<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script>
function getCountries()
{
    var url ='http://localhost/scorefinal/include-xml/countries_leagues.xml';
    var xmlhttp,x,i,txt,xx,j;
    var cats = new Array();
    var name = new Array();
    var contest_name = new Array();
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            x=xmlhttp.responseXML.documentElement.getElementsByTagName("country");
            txt="<div id='firstpane' class='menu_list'>";

            for(i=0;i<x.length;i++)
            {//to get all country names & competions without country like(world cup,.....) from the xml file
                cats[i] = x[i].getAttribute('link_name');
                name[i] = x[i].getAttribute('name');
                txt=txt +"<p class='menu_head'>"+ name[i] +"</p>";
                txt=txt +"<div class='menu_body'>";
                xx=x[i].getElementsByTagName("contest");
                for(var v=0;v<xx.length;v++)
                {
                    contest_name[v] = xx[v].getAttribute('name');
                    txt=txt+"<a href='#'>"+contest_name[v]+"</a>";
                }
                txt=txt+"</div>";
            }
            txt=txt +"</div>";
            document.getElementById("countries").innerHTML=txt;
            //alert(document.getElementById("countries").innerHTML);
        }
    };
    xmlhttp.open("GET",url,true);
    xmlhttp.send();
}
</script>

<style type="text/css">
body {
    margin: 10px auto;
    font: 75%/120% Verdana,Arial, Helvetica, sans-serif;
}
.menu_list {    
    width: 150px;
}
.menu_head {
    padding: 5px 10px;
    cursor: pointer;
    position: relative;
    margin:1px;
    font-weight:bold;
    background: #eef4d3 url(left.png) center right no-repeat;
}
.menu_body {
    display:none;
}
.menu_body a{
  display:block;
  color:#006699;
  background-color:#EFEFEF;
  padding-left:10px;
  font-weight:bold;
  text-decoration:none;
}
.menu_body a:hover{
  color: #000000;
  text-decoration:underline;
  }
</style>
</head>
<body>
<div id='countries'></div>
<script>getCountries();</script>
</body>
<script type="text/javascript">
$(document).ready(function()
{
    //slides the element with class "menu_body" when paragraph with class "menu_head" is clicked 
    alert('test');
    $("#firstpane p.menu_head").click(function()
    {
        $(this).css({backgroundImage:"url(down.png)"}).next("div.menu_body").slideToggle(300).siblings("div.menu_body").slideUp("slow");
        $(this).siblings().css({backgroundImage:"url(left.png)"});
    });
});
</script>

</html> 
```

我有一个 javascript 函数 getCountries() 来获取 XML 数据并构建菜单，现在菜单只显示当我单击任何 menu_head 时我无法获得子菜单。注意：我添加`alert('test');`以查看是否`document.ready`正常工作，我发现添加`alert();`菜单后，除 chrome 和 opera 之外的所有浏览器都可以正常工作，但这没有意义，因为当我删除警报时，菜单停止。

请如果有人可以帮助我，我在这个问题上工作了三天，但我什么也没得到？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:26:44.277

As per your question and related to chrome i am suspecting the xml parser on browser end and came through these final links .Go through .

```
XML parser not working  in chrome .Try for alternative (only my conclusion ). 
```

[Jquery xml parser not working in Chrome?](https://stackoverflow.com/questions/4842629/jquery-xml-parser-not-working-in-chrome)

and

[XML parsing in Chrome vs IE and Firefox](https://stackoverflow.com/questions/6202817/xml-parsing-in-chrome-vs-ie-and-firefox)

# magento - 更新可配置产品的前端价格 - Magento

> ID：14628519
> 
> 赞同：1
> 
> 时间：2013-01-31T14:48:12.427
> 
> 标签：magento, configurable-product

我在 Magento 中创建了一个模板并添加了一些可配置的产品。当您选择下拉菜单时，会显示价格变化（例如 +6），这会反映在购物车中。

但是，我希望它可以在产品页面上更新常规价格和特价。有没有办法做到这一点，还是静态html？

干杯

[http://www.titan.x-brand.co.uk/bath-panels/trojan-supastyle-750mm-acrylic-end-panel.html](http://www.titan.x-brand.co.uk/bath-panels/trojan-supastyle-750mm-acrylic-end-panel.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:19:32.793

价格和特价 html 不是 hadr 编码 - 它由 javascript Product.OptionsPrice 更改（在 app/design/frontend/base/default/template/catalog/product/view.phtml 中声明）

```
var optionsPrice = new Product.OptionsPrice(<?php echo $this->getJsonConfig() ?>); 
```

该类的实现在 javascript 文件 js/varien/products.js 中

应该改变价格的函数是 Product.OptionsPrice.reload

该 JS 对象期望您的价格和特价 html 元素处于特定层次结构中（

```
<span><span>...</span></span> 
```

这只是我所说的层次结构的一个例子）并且这个层次结构的元素必须具有某些不应删除或重​​命名的类和 id 属性。

您对 phtml 文件的更改导致此代码失败（如果您使用 firebug 检查页面，您会注意到存在 javascript 错误 - 不一定与此问题相关，但您应该修复它们）。

开始解决此问题的最简单方法是从默认 phtml 文件中复制与价格相关的 html 部分，并在它工作后重新应用 css。

此外，如果您通过管理员（系统->配置->设计->包->当前包名称）更改了主题，则可以将其从“your_theme”更改回“默认”并查看它应该如何工作。

# android - 在 ExpandableList 中隐藏组视图

> ID：14628526
> 
> 赞同：5
> 
> 时间：2013-01-31T14:48:56.720
> 
> 标签：android, expandablelistview

我有一个使用两个游标的 expandableList ：一个用于组，另一个用于与该组相关的孩子。用户可以在此可扩展列表上使用过滤器（alphaindexer）。当没有孩子时，我想完全删除组视图（不仅是图标:)）。就像我删除了空组的行。

我尝试在 bindgroupview 方法中将可见性设置为消失。我尝试为组视图设置布局高度......结果是一样的，空间仍然保留并显示。

有可能吗？我该如何做这个功能？

下面的一些代码：

```
// mMapSeqArticle is TreeMap<Object, ArrayList<Object>)
mSequenceAdapter = new SequenceCommandeAdapter(getActivity(), mMapSeqArticle);

public class SequenceCommandeAdapter extends BaseExpandableListAdapter {
        Object[] mGroupSeq = null;
        Map<Sequence, ArrayList<TicketArticle>> mContent;

        public SequenceCommandeAdapter(Context c,
                Map<Sequence, ArrayList<TicketArticle>> map) {
            mContent = map;
            mGroupSeq = mContent.keySet().toArray();
        }

        @Override
        public Object getChild(int groupPosition, int childPosition) {
            Sequence s = (Sequence) mGroupSeq[groupPosition];
            return ((ArrayList<TicketArticle>) (mContent.get(s)))
                    .get(childPosition);
        }

        @Override
        public long getChildId(int groupPosition, int childPosition) {
            Sequence s = (Sequence) mGroupSeq[groupPosition];
            return ((ArrayList<TicketArticle>) (mContent.get(s)))
                    .get(childPosition).mId;
        }

        @Override
        public View getChildView(int groupPosition, int childPosition,
                boolean isLastChild, View convertView, ViewGroup parent) {
            // retrouve la valeur de la sequence
            TicketArticle ta = (TicketArticle) getChild(groupPosition,
                    childPosition);
            if (convertView == null) {
                convertView = LayoutInflater.from(getActivity()).inflate(
                        R.layout.adapter_row_article_details_table, null);
            }

            convertView.setTag(groupPosition + ":" + childPosition);
            return convertView;
        }

        @Override
        public int getChildrenCount(int groupPosition) {
            Sequence s = (Sequence) mGroupSeq[groupPosition];
            return ((ArrayList<TicketArticle>) (mContent.get(s))).size();
        }

        @Override
        public Object getGroup(int groupPosition) {
            return (Sequence) mGroupSeq[groupPosition];// mContent.get(groupPosition);
        }

        @Override
        public int getGroupCount() {
            return mContent.size();
        }

        @Override
        public long getGroupId(int groupPosition) {
            return ((Sequence) mGroupSeq[groupPosition]).key;
        }

        @Override
        public View getGroupView(int groupPosition, boolean isExpanded,
                View convertView, ViewGroup parent) {
            if (convertView == null) {
                convertView = LayoutInflater.from(getActivity()).inflate(
                        R.layout.adapter_header_sequence_details_table, null);
            }

            convertView.setTag(null);
            return convertView;
        }

        @Override
        public boolean hasStableIds() {
            // TODO Auto-generated method stub
            return false;
        }

        @Override
        public boolean isChildSelectable(int groupPosition, int childPosition) {
            // TODO Auto-generated method stub
            return true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-12T07:02:43.700

我在您的代码中没有看到 bindGroupView 方法，但根据您的描述，听起来您走在正确的轨道上。我必须将所有子视图（包括布局）的可见性设置为 GONE，以便组行从可扩展列表视图中完全消失。否则，空行仍然存在。

如果您发布 R.layout.adapter_header_sequence_details_table 的内容，我会更好地了解您需要制作的其他内容。

# paypal - 从 PayPal 获取有关新订阅的通知

> ID：14628528
> 
> 赞同：0
> 
> 时间：2013-01-31T14:49:05.023
> 
> 标签：paypal, paypal-ipn, paypal-sandbox, paypal-subscriptions

在沙盒中玩游戏并通过 SetExpressCheckout 设置定期付款时（如文档中所建议），我可以成功创建 BillingAgreement 并接收令牌。现在，在用户点击 https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=[token going here] 之类的链接后，同意所有条款和条件等，他会被自动重定向到 SetExpressCheckout 方法中提供的 returnUrl，此外，此令牌值附加到 returnUrl。

到目前为止，一切都很好。现在的问题是 - 我可以依赖 returnUrl 将始终被调用的事实吗？F.e.，当用户的浏览器由于某种原因拒绝或无法重定向到指定的 url 时会发生什么？

据我从 PayPal 文档中了解到，您不能使用 IPN 来通知您由用户发起的新订阅，尽管显然 IPN 将是一个理想的选择。我在撰写 SetExpressCheckout 请求时尝试提供 notifyUrl，但没有被击中。相同的 IPN 适用于我用于一次性购买的“支付”方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:30:37.020

我认为你错过了那里的一步。当买家在 PayPal 网站上时，不会创建定期付款配置文件 - 您必须等待买家返回您的退货 URL，然后调用 CreateRecurringPaymentsProfile 来实际创建定期付款。如果您从不调用 CreateRecurringPaymentsProfile，则不会创建定期付款——这可能就是您没有获得任何 IPN 的原因。

# .htaccess - 测试IP是否在范围内

> ID：14628531
> 
> 赞同：0
> 
> 时间：2013-01-31T14:49:12.390
> 
> 标签：.htaccess, ip

我想看看这个 IP 是否`219.111.71.35`在以下 IP 范围内。

```
218.224.0.0/13
219.94.128.0/17
220.104.0.0/13 
```

我刚刚使用[此](http://www.csgnetwork.com/ipinfocalc.html)站点查看该 IP 属于上面列表中的 2 号 IP 范围。但我想知道：有没有更简单的方法，比如 IP 范围测试仪之类的？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:56:38.383

```
11011010 . 11100000 . 00000000 . 00000000   218.224.0.0
00000000 . 00000111 . 11111111 . 11111111   /13 (netmask)
-----------------------------------------   bitwise OR
11011010 . 11100111 . 11111111 . 11111111   218.231.255.255

$your_ip = 219.111.73.35
if (($your_ip >= 218.224.0.0) && ($your_ip <= 218.231.255.255)) {
   ... falls within range ...
} 
```

对于任何其他 IP 范围/掩码也是如此。

# android - 恢复活动

> ID：14628539
> 
> 赞同：0
> 
> 时间：2013-01-31T14:49:41.400
> 
> 标签：android

嘿伙计们，我的游戏中有这个活动流程。起始页>阶段列表（从阶段 1-10）>问题。如果用户按下开始页面上的开始按钮，他将进入阶段列表，从那里启用的唯一按钮是阶段 1，其余按钮处于禁用模式。第 1 阶段有 5 个问题，用户正确回答后，用户将被引导回到第 2 阶段已解锁的阶段列表以及第 1 阶段（默认启用第 1 阶段）。现在我想要发生的是当用户使用主页按钮或后退按钮退出应用程序然后用户再次打开应用程序时，从开始页面按下开始按钮后，他将被引导到阶段 2 所在的阶段列表仍未解锁或用户上次完成的任何阶段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:03:22.887

由于我不完全理解您的问题，我有两个主张：

1.  在 onPause 或 onStop 中保存阶段信息，然后在 onCreate 方法（[http://developer.android.com/guide/components/activities.html#Lifecycle）](http://developer.android.com/guide/components/activities.html#Lifecycle)中检索它，或者
2.  将 onStop 中的所有内容保存在[SharedPreferneces](http://developer.android.com/guide/topics/data/data-storage.html#pref)中，并在需要时检索。我想这个选项更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:13:54.697

**重新启动应用程序时返回上一个打开的活动。**

请这样做。

资料来源：[重新启动时如何使android应用程序返回上一个打开的活动？](https://stackoverflow.com/questions/2441203/how-to-make-an-android-app-return-to-the-last-open-activity-when-relaunched)

```
@Override
protected void onStop() {
    super.onStop();

    SharedPreferences prefs = getSharedPreferences("X", MODE_PRIVATE);
    Editor editor = prefs.edit();
    editor.putString("lastActivity", getClass().getName());
    editor.commit();
}

public class Dispatcher extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Class<?> activityClass;

        try {
            SharedPreferences prefs = getSharedPreferences("X", MODE_PRIVATE);
            activityClass = Class.forName(
                prefs.getString("lastActivity", Activity1.class.getName()));
        } catch(ClassNotFoundException ex) {
            activityClass = Activity1.class;
        }

        startActivity(new Intent(this, activityClass));
    }
} 
```

# git - 为什么我只能在 github 上看到我的 master 分支？

> ID：14628540
> 
> 赞同：1
> 
> 时间：2013-01-31T14:49:42.040
> 
> 标签：git, github, branch

由于某种原因，我的分支机构没有出现在 Github 中。但是，当我执行`git tag --all`它们时，它们会出现在那里，这表明它们并没有丢失。

当我在本地存储库中有多个分支时，为什么我只能在 Github 中看到 Master 分支？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T14:54:44.610

推送只推送当前分支。您需要推送您想要发布的分支，如果这是所有分支，那么您引用的答案： git push --all 应该会有所帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T14:58:33.573

因此，假设您在运行时看到一个分支列表：

```
git branch 
```

您所要做的就是运行：

```
git push <remote-name> <branch-name> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T14:55:08.000

`git push`如果你想将一个单独的分支推送到 repo，那么只有当前的 master 分支才会真正被推送，你*必须*这样做`git push origin <branchname>`，试一试......

您在问题中发布的链接中也对此进行了说明。

# javascript - 使用嵌套循环获取 PhantomJS 页面以获取新页面

> ID：14628547
> 
> 赞同：0
> 
> 时间：2013-01-31T14:50:05.657
> 
> 标签：javascript, url, phantomjs

我想从某个 JSON 格式的 URL 在线获取列表，然后使用该列表中每个项目的 DATA_ID 来调用新 URL。我只是 PhantomJS 的新手，我不明白为什么 page.open() 中的嵌套循环行为都很奇怪。此外，使用 phantom.exit() 的方式似乎真的很奇怪做我想要实现的目标。

这是我的代码：

```
console.log('Loading recipes');
console.log('===============================================================');

var page = require('webpage').create();
var url = 'http://www.hiddenurl.com/recipes/all';

page.open(url, function (status) {
    //Page is loaded!
    var js = page.evaluate(function () {
        return document.getElementsByTagName('pre')[0];
    });

    var recipes = JSON.parse(js.innerHTML).results;
    //console.log(recipes[0].name.replace('[s]', ''));

    for (i = 0; i < recipes.length; i++) {
        console.log(recipes[i].name.replace('[s]', ''));

        var craft_page = require('webpage').create();
        var craft_url = 'http://www.hiddenurl.com/recipe/' + recipes[i].data_id;

        craft_page.open(craft_url, function (craft_status) {
            //Page is loaded!
            var craft_js = craft_page.evaluate(function () {
                return document.getElementsByTagName('body')[0];
            });

            var craftp = craft_js.innerHTML;
            console.log('test');
        });

        if (i == 5) {
            console.log('===============================================================');
            phantom.exit();
            //break;
        }
    }
}); 
```

这里发生的事情是这一行：

```
console.log(recipes[i].name.replace('[s]', '')); 
```

..打印以下内容：

```
===============================================================
Item from DATA_ID 1
Item from DATA_ID 2
Item from DATA_ID 3
Item from DATA_ID 4
Item from DATA_ID 5 
```

..然后它只打印下一个：

```
=============================================================== 
```

..其次是：

```
'test'
'test'
'test'
'test'
'test' 
```

为什么这没有连续发生？来自内部调用的 page() 请求的数据在最后被堆积并转储，即使在 phantom.exit() 实际上应该已经被调用之后。

此外，当我自由循环正常数据集时，我收到此错误：

```
QEventDispatcherUNIXPrivate(): Unable to create thread pipe: Too many open files
2013-01-31T15:35:18 [FATAL] QEventDispatcherUNIXPrivate(): Can not continue without a thread pipe
Abort trap: 6 
```

有什么方法可以设置 GLOBAL_PARAMETERS 或以某种方式指导进程，以便我可以处理 100 个页面请求？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:46:00.877

我通过 shell 分别调用 PhantomJS 来解决 Python 问题，如下所示：

```
import os
import json

cmd = "./phantomjs fetch.js"
fin,fout = os.popen4(cmd)
result = fout.read()

recipes = json.loads(result)

print recipes['count'] 
```

不是 PhantomJS 问题的实际解决方案，但它是一个有效的解决方案，并且在内存和代码结构方面的问题较少。

# r - R函数绘制分箱均值和模型拟合，ggplot

> ID：14628551
> 
> 赞同：1
> 
> 时间：2013-01-31T14:50:20.137
> 
> 标签：r, ggplot2, data.table

样本数据：

```
 pp.inc <- structure(list(has.di.rec.pp = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0), m.dist.km2 = c(-34.4150009155273, 6.80600023269653, -6.55499982833862, 
-61.7700004577637, 15.6840000152588, -11.2869997024536, -26.9729995727539, 
0, 81.9940032958984, -35.1459999084473, -12.5179996490479, 0, 
21.5919990539551, 81.9940032958984, -20.7770004272461, 85.9469985961914, 
-15.2959995269775, -75.5879974365234, 81.9940032958984, 3.04999995231628, 
-17.1490001678467, -25.806999206543, -16.0060005187988, -14.91100025177, 
-12.9020004272461, -16.0060005187988, 5.44000005722046, -34.4150009155273, 
81.9940032958984, 3.61400008201599, 13.7379999160767, 2.71300005912781, 
4.31300020217896), treated = c(0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 
0, 1, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 
1, 1)), .Names = c("has.di.rec.pp", "m.dist.km2", "treated"), row.names = c(NA, 
-33L), class = c("data.table", "data.frame")) 
```

代码：

```
library(data.table)
library(ggplot2)

rddplot <- function(data, outcome, runvar, treatment = treated, span, bw, ...){
    data <- data.table(data)
    data.span  <- data[abs(runvar) <= span, ]
    data.span <- data.span[ , bins := cut(runvar, 
                                          seq(-span, span, by = bw), 
                                          include.lowest = TRUE, right = FALSE)]
    data.span.plot <- data.span[ , list(avg.outcome = mean(outcome), 
                                      avg.runvar = mean(runvar), 
                                      treated = max(treatment),
                                      n.iid = length(outcome)), keyby = bins]
    data.span.plot <- data.span.plot[ , runvar := head(seq(-span, span, by = bw), -1)]
    bp <- ggplot(data = data.span.plot, aes(x = runvar, y = avg.outcome))
    bp <- bp + geom_point(aes(colour = n.iid))
    bp <- bp + stat_smooth(data = data.span, aes(x = runvar, y = outcome,
                                                group = factor(treatment)), ...)
    bp
    return(bp)
}

rddplot(pp.inc, has.di.rec.pp, m.dist.km2, treated, 50, 5) 
```

如果我不将其包装在函数中，则此代码运行完美。我是 R 的新手，只是很少使用它。我究竟做错了什么？我是否遗漏了一些明显的东西，还是与`data.table`or有关`ggplot2`？我认为这可能与 ggplot 有关，因为其他问题提到存在问题并且`aes_string`应该使用。我可以重写`data.table`部分以使用基本功能。但我认为错误已经发生在此之前，在第二行。我该如何进行这项工作？

编辑：

[原标题：R函数在eval（expr，envir，enclos）中返回错误：找不到对象'name']

我有一些时间再次查看并制定了解决方案，因此我也稍微修改了标题。使用`eval()`对我来说并没有真正奏效，所以我选择了`[['columname']]`选择路线。我已经放弃了`data.table`（也放弃`plyr`了），因此这只使用`base`了 ggplot2 以外的函数。我很高兴对如何改进它提出任何意见。如果有一些基本缺陷，请告诉我。如果不是，我稍后会在我的解决方案中添加答案。

我已经更改了 bin 计算，以便在零处始终有一个断点，这是必要的。默认 binwidth 由 Silverman 规则确定。我正在考虑单独计算模型拟合并返回它，因为 ggplot 中的模型选择是有限的，但是我想不出一个很好的方法来将它用于各种不同的模型，例如 lm 或 loess，而且它并不严格必要的。我实际上想覆盖一个细条形图，显示每个 bin 中的观察次数，但发现这在 ggplot 中是不可能的（我知道这*通常*是一个坏主意，但有几篇发表良好的论文使用了类似的图表）。我不觉得`size`这里有什么吸引人的地方，但这些确实是次要的抱怨。

感谢您让我走上正确的道路。

我的解决方案：

```
rddplot <- function(data, outcome, runvar, treatment = treated, 
                    span, bw = bw.nrd0(data[[runvar]]), ...){
    breaks <- c(sort(-seq(0, span, by = bw)[-1]), seq(0, span, by = bw))
    data.span  <- data[abs(data[[runvar]]) <= max(breaks), ]
    data.span$bins <- cut(data.span[[runvar]], breaks, 
                          include.lowest = TRUE, right = FALSE)
    data.span.plot <- as.data.frame(cbind(tapply(data.span[[outcome]], data.span$bins, mean),
                            tapply(data.span[[runvar]], data.span$bins, mean),
                            tapply(data.span[[treatment]], data.span$bins, max),
                            tapply(data.span[[outcome]], data.span$bins, length),
                            tapply(data.span[[outcome]], data.span$bins, sum)))
    colnames(data.span.plot) <- c("avg.outcome", "avg.runvar", "treated", "n.iid", "n.rec")
    data.span.plot$runvar <- head(breaks, -1)
    print(data.span.plot)
    bp <- ggplot(data = data.span.plot, aes(x = runvar, y = avg.outcome))
    bp <- bp + geom_point(aes(size = n.iid))
    bp <- bp + stat_smooth(data = data.span, aes_string(x = runvar, y = outcome,
                                                group = treatment), ...)
    print(bp)
} 
```

称呼：

```
rddplot(pp.inc, "has.di.rec.pp", "m.dist.km2", "treated", 50, 
        method = lm, formula = y ~ poly(x, 4, raw = TRUE)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T02:44:34.820

我有一种使用方法和`data.table` 一些诡计......`deparse(substitute())``setnames`

```
rddplot <- function(data, outcome, runvar, treatment = treated, span, bw, ...){
 # convert to data.table 
 data <- data.table(data)
 # get the column names as defined in the call to rddplot 
  outname <- deparse(substitute(outcome))
  runname <- deparse(substitute(runvar))
  treatname <- deparse(substitute(treatment))
 # rename these columns with the argument namses
  setnames(data, old = c(outname,runname,treatname), new = c('outcome','runvar', 'treatment'))

  # breaks as defined in the second example
  breaks <- c(sort(-seq(0, span, by = bw)[-1]), seq(0, span, by = bw))
   # the stuff you were doing before
   data.span  <- data[abs(runvar) <= span, ]
  data.span <- data.span[ , bins := cut(runvar, 
                                        breaks, 
                                        include.lowest = TRUE, right = FALSE)]
  data.span.plot <- data.span[ , list(avg.outcome = mean(outcome), 
                                      avg.runvar = mean(runvar), 
                                      treated = max(treatment),
                                      n.iid = length(outcome)), keyby = bins]
  # note I've removed trying to add `runvar` column to data.span.plot....)
  bp <- ggplot(data = data.span.plot, aes(x = avg.runvar, y = avg.outcome))
  bp <- bp + geom_point(aes(colour = n.iid))
  bp <- bp + stat_smooth(data = data.span, aes(x = runvar, y = outcome,
                                               group = treatment), ...)
  bp

}

rddplot(pp.inc, has.di.rec.pp, m.dist.km2, treated, 50, 5) 
```

请注意，如果您没有在函数中转换为 data.table，并且假设 data 参数是 data.table，那么您可以使用 on.exit() 来恢复通过引用更改的名称。

# android - 如何防止文本字段溢出android上的相邻文本字段？

> ID：14628552
> 
> 赞同：0
> 
> 时间：2013-01-31T14:50:21.210
> 
> 标签：android, android-layout

我的 android 布局有问题。

我有一行包含三个 TextView：一个职位、一个年龄和一个日期。我希望日期向右对齐，职位向左对齐。年龄应与职称对齐。

问题是职位可能会变得很长。我希望它不会与视图重叠，而是自动截断。其他两个文本视图应始终可见。

有什么想法可以实现这一目标吗？我希望我的布局跨越屏幕的整个宽度，因此不想使用绝对宽度。

我的布局如下所示：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="horizontal"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
        >

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Softwaredeveloper and some more very long job titles so that the text overflows"
            android:id="@+id/occupation"
            android:layout_gravity="left|center_vertical"
            android:padding="5dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:singleLine="true"
            android:ellipsize="end"/>

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="(32)"
            android:id="@+id/age"
            android:layout_gravity="left|center_vertical"
            android:padding="5dp"
            android:layout_alignParentLeft="false"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/occupation"
            android:singleLine="true"/>

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="01.02.2013"
            android:id="@+id/date"
            android:layout_alignParentLeft="false"
            android:layout_alignParentTop="true"
            android:layout_alignParentRight="true"
            android:singleLine="true"
            android:padding="5dp"/>
</RelativeLayout> 
```

这就是我得到的：

![在此处输入图像描述](../Images/538b41378869f03eba43211aad4fbc60.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:57:26.813

试试这个 ：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="horizontal"
              android:layout_width="match_parent"
              android:layout_height="wrap_content">

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Softwaredeveloper and some more very long job titles so that the text overflows"
            android:id="@+id/occupation"
            android:padding="5dp"
            android:singleLine="true"
            android:layout_weight="1"
            android:ellipsize="end"/>

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="(32)"
            android:id="@+id/age"
            android:padding="5dp"
            android:singleLine="true"/>

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="01.02.2013"
            android:id="@+id/date"
            android:singleLine="true"
            android:padding="5dp"/>
</LinearLayout> 
```

现在试试这个，它工作正常：

```
<TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:stretchColumns="1"
        android:shrinkColumns="0">

        <TableRow>

            <TextView
                android:id="@+id/occupation"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ellipsize="end"
                android:singleLine="true"
                android:text="Softwaaaaaaa aared " />

            <TextView
                android:id="@+id/age"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:singleLine="true"
                android:text="(32)" />

              <TextView
            android:id="@+id/date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:text="01.02.2013" />

        </TableRow>

    </TableLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:02:23.173

我会做这样的事情，并调整 layout_weight 以获得所需的宽度

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="horizontal"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
>
   <TextView
        android:layout_width="fill_parent"
        android:layout_height="20dip"
        android:layout_weight=0.3
        android:text="Softwaredeveloper and some more very long job titles so that the text overflows"
        android:textSize="18dip"
        android:id="@+id/occupation"
        android:paddingLeft="5dp"
        android:paddingRight="5dp"
        android:singleLine="true"
        android:ellipsize="end"/>
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="20dip"
        android:layout_weight="2"
        android:textSize="18dip"
        android:text="(32)"
        android:id="@+id/age"
        android:paddingLeft="5dp"
        android:paddingRight="5dp"
        android:layout_toRightOf="@+id/occupation"
        android:singleLine="true"/>
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="20dip"
        android:layout_weight="1"
        android:textSize="18dip"
        android:text="01.02.2013"
        android:id="@+id/date"
        android:singleLine="true"
        android:padding="5dp"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:23:26.180

我建议你为你的父布局添加权重总和的属性，并相应地将权重分配给孩子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:45:13.237

感谢这篇文章中的提示（[如何获得一个文本可以增长和椭圆化的布局，但不能吞噬布局上的其他元素](https://stackoverflow.com/questions/5437078/how-to-get-a-layout-where-one-text-can-grow-and-ellipsize-but-not-gobble-up-the?rq=1)），我终于找到了一个可行的解决方案。

帮助我的是使用表格布局的提示。

我的解决方案如下所示：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:shrinkColumns="0"
              android:stretchColumns="1">

    <TableRow
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">

        <TextView
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:text="Softwaredeveloper and some more very long job titles so that the text overflows"
                android:id="@+id/occupation"
                android:paddingLeft="5dp"
                android:paddingRight="5dp"
                android:singleLine="true"
                android:ellipsize="end"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"/>

        <TextView
                android:layout_width="fill_parent"
                android:layout_weight="2"
                android:text="(32)"
                android:id="@+id/age"
                android:paddingLeft="5dp"
                android:paddingRight="5dp"
                android:singleLine="true"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"/>

        <TextView
                android:layout_width="fill_parent"
                android:layout_weight="1"
                android:text="01.02.2013"
                android:id="@+id/date"
                android:singleLine="true"
                android:padding="5dp"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical|right"/>
    </TableRow>

</TableLayout> 
```

长职位现在可以正确截断，并且年龄现在直接与较短的职位相邻。

这看起来像这样：

长职称： ![带省略号的长职位](../Images/8c86e58f813fefe442536229132200e0.png)

简称： ![简短的职位名称](../Images/58d5b2fa0edc0aec949f17909708589a.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T15:47:05.513

我复制并粘贴了您的布局（编辑：到我的应用程序中）来玩一些。我将您的前两个（职业和年龄）包裹`TextView`在 a 中`LinearLayout`，并在职业中添加了两行以`TextView`使其工作。我希望这有帮助。我添加了`android:maxEms`和`android:singleLine`。`android:maxEms`根据您的喜好调整值！

```
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation ="horizontal">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Softwaredeveloper and some more very long job titles so that the text overflows"
        android:maxEms="25"
        android:singleLine="false"
        android:id="@+id/occupation"
        android:layout_gravity="left|center_vertical"
        android:padding="5dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:singleLine="true"
        android:ellipsize="end"/>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="(32)"
        android:id="@+id/age"
        android:layout_gravity="left|center_vertical"
        android:padding="5dp"
        android:layout_alignParentLeft="false"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/occupation"
        android:singleLine="true"/>
</LinearLayout> 
```

# google-plus - 如何确定用户是否在 Google+ 中分享了链接？

> ID：14628558
> 
> 赞同：0
> 
> 时间：2013-01-31T14:50:33.847
> 
> 标签：google-plus

如果用户与他的 google+ 帐户共享我的网站，我需要提供文件下载。如何使用 Google API 实现这一点。

例如 -

我有一个要分享的 PDF 文件（学习文档）。条件是，如果您想获取该文件，您必须将我的链接分享到您的 google+ 帐户。该代码将验证其是否已发布到您的帐户，并允许您下载 PDF 文件。

像 Facebook 那样在 Google+ 中有什么解决方案吗？

# json - Erlang 案例返回错误的结果

> ID：14628560
> 
> 赞同：0
> 
> 时间：2013-01-31T14:50:37.203
> 
> 标签：json, erlang, case

嗨，有人可以帮助我解决我的案例问题，如果您需要 UNPACK 代码，请告诉我很乐意发布它。

从屏幕截图中可以看到，它返回正常，所以我不明白为什么。

![](../Images/b0ef47823d7e75b296de072052c16aac.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T16:47:57.690

你的问题是`jsonMsg`

Erlang 中以小写字符开头的裸词会创建一个原子（实际上是一个枚举），从而导致您的匹配规范失败。

更改`jsonMsg`为`JsonMsg`

# apache-flex - 从 Flex 3.6 迁移到 4.6

> ID：14628567
> 
> 赞同：0
> 
> 时间：2013-01-31T14:51:01.213
> 
> 标签：apache-flex

我目前正在开发一个使用 Flex 3.6 创建的 Adob​​e Flex Air 项目！但是现在应该变成了iPad的App，但是Flash Builder从Flex 4.6开始只能将项目导出为App。所以我正在尝试将项目从 Flex 3.6 转换为 4.6，我想这应该很容易做到，但是库和/或命名空间存在一些问题，这让我感到困惑。这就是我的 Main-mxml 的启动方式：

```
<s:Application xmlns:mx="http://ns.adobe.com/mxml/2009" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:MyComp="*"
           xmlns:local="*"
           xmlns:srv="generated.webservices.*"
           width="1366"
           applicationComplete="init()"
           backgroundGradientColors="[0xffffff,0xffffff]"
           borderColor="#ffffff"
           color="#eaeaea"
           fontSize="14"
           horizontalScrollPolicy="off"
           layout="absolute"
           paddingBottom="0"
           paddingLeft="0"
           paddingRight="0"
           paddingTop="0"
           verticalScrollPolicy="off"> 
```

但我得到了错误：

```
`Attribute "mx" bound to namespace "http://www.w3.org/2000/xmlns/" was already specified for element "s:Application".` 
```

但是如果我删除这条线

```
`xmlns:mx="library://ns.adobe.com/flex/mx"` 
```

那么我当然不能再使用例如 mx:VBox 并且必须重构整个项目。

我尝试了一些使用 Flex 4.6 的测试示例，例如

```
<?xml version="1.0"?>
<!-- containers\layouts\BoxSimple.mxml -->
<s:Application 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:mx="library://ns.adobe.com/flex/mx" 
    xmlns:s="library://ns.adobe.com/flex/spark">

    <mx:Box direction="vertical" 
            borderStyle="solid" 
            paddingTop="10" 
            paddingBottom="10" 
            paddingLeft="10" 
            paddingRight="10">

        <mx:Button id="fname" label="Button 1"/>
        <mx:Button id="lname" label="Button 2"/>
        <mx:Button id="addr1" label="Button 3"/>
        <mx:ComboBox id="state">
            <mx:ArrayList>
                <fx:String>ComboBox 1</fx:String>
            </mx:ArrayList>
        </mx:ComboBox>
    </mx:Box>
</s:Application> 
```

但在这里我得到了错误

```
 `"Could not resolve <mx:Button> to a component implementation." `and more like this. 
```

现在我的问题是： 1\. 可以使用所有三个命名空间

```
 `(xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:mx="library://ns.adobe.com/flex/mx" 
    xmlns:s="library://ns.adobe.com/flex/spark")` 
```

对？我在互联网上的几个示例中看到了这一点，所以我认为它必须有效。

1.  我是否必须引用/添加外部库才能将 Flex 4.6 与这 3 个命名空间一起使用？
2.  是否有从 Flex 3.6 迁移到 4.6 的简单通用方法？是否有必要进行更改或必须在 4.6 中工作，即使是在 3.6 中开发的？

此外，我对 Flex 比较陌生，尽管我认为这并不难。

提前致谢

问候，

最大 B

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:51:48.507

Max - 要专门回答您的问题，绝对可以在 Flex 4 应用程序中使用 MX 组件。您的示例似乎适用于常规 flex 4.6 项目。您可能需要确保具有正确的库路径设置。

![在此处输入图像描述](../Images/01696e425c8b1340ea6f03f6689437b7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:12:39.660

Flex 并不难，但在主要版本之间迁移可能会让人头疼，并且可能需要经验更丰富的开发人员。事实是您必须了解这两个框架，它们有什么区别以及如何解决这些区别。
所以`Is there an easy general way for migrating?`好吧，......不（或者如果你愿意妥协，是的，稍后会详细介绍）。

至于命名空间：您可以在一个应用程序中同时使用这三个命名空间，您无需为此做任何特别的事情。也就是说，如果您正在构建一个传统的 Web 应用程序。如果您正在构建一个移动应用程序，则使用一些其他框架库，这些库不包含该`mx`时代的组件。原因是 Spark 组件或更高效的移动设备还没有台式机那么强大。
这意味着您必须将整个应用程序转换为 Spark 命名空间。如果你的视图还没有完全脱离业务逻辑，不妨从头开始重写。

但是，您可以强制编译器包含这些`mx`库，即使在为移动设备编译时也是如此。但这会以性能为代价。

也就是说，到目前为止，我所说的只是技术层面的。从用户体验的角度来看，你不能指望一个为大屏幕设计的应用程序在小屏幕上使用起来很愉快。在大多数情况下，这些“简单”转换完全失败。

# dojo - 模块中使用的 require 是否会添加到 dojo 构建中的依赖项？

> ID：14628571
> 
> 赞同：2
> 
> 时间：2013-01-31T14:51:22.823
> 
> 标签：dojo

我了解到dojo的加载器可以加载非amd脚本，太棒了。我们有一个供应商提供的脚本，它需要在加载脚本之前设置某些全局变量。如果，在我的 AMD 模块中，我设置了全局变量（我知道，糟糕，对吗？）然后 require(["/vendor/script.js"])，一切都很好。

我无法找到答案的一件事是构建过程是否会看到这个 require 调用并将“/vendor/script.js”添加到依赖项列表并构建它。如果我理解正确，这将导致脚本在我的模块有机会设置所需的全局变量之前触发。

谁能告诉我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:06:25.137

默认行为是构建将遍历依赖项并将它们包含在构建中。但是，您有以下选择：

1) 在配置文件中，您可以指定排除项。这些不会包含在构建中。

```
// profile.js used by the build

layers: {
    "myApp/myApp": {
        include:    [...],
        exclude:    [vendor/script.js]
} 
```

2）不要在define语句中包含依赖关系，并在模块后面使用require。 `dojo/fx`这样做`dojo/fx/toggler`

```
// myCustomWidget.js

define([], function() {
    // the require function won't be called by the build
    // and the vendorScript won't be pulled into the build.
    require(["vendor/script"], function(vendorScript) {

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:11:13.740

我要做的是创建另一个脚本来设置你的全局变量，然后在包含你编译的 .js 文件*之前包含它。*

但是，如果您将全局变量设置为需要模块的值，我想您可以在编译后的 .JS 文件构建后对其进行编辑。

# jquery - 通过 GET 将 JSON 数组传递给 MVC Web API

> ID：14628576
> 
> 赞同：28
> 
> 时间：2013-01-31T14:51:28.090
> 
> 标签：jquery, asp.net-mvc, json, asp.net-web-api

我知道这个主题有很多答案，但找不到我的问题的解决方案。我有一个看起来像这样的 ASP.NET MVC Web API：

```
 [HttpGet]
    public IList<Country> GetCountryList(List<long> idList) 
```

我试过这样称呼它：

```
 $.ajax({
        dataType: "json",
        data: JSON.stringify({idList: listOfIds}),            
        type: "GET",
        url: "api/v1/util/CountryList",
        success: function (result) {
            alert(result);
        }
    }); 
```

然后 URL 如下所示：

```
https://localhost/supertext/api/v1/util/CountryList?{%22idList%22:[46,14,62,83,120]} 
```

选择：

```
 $.ajax({
        dataType: "json",
        data: {
            idList: JSON.stringify(listOfIds),
        }          
        type: "GET",
        url: "api/v1/util/CountryList",
        success: function (result) {
            alert(result);
        }
    }); 
```

网址：

```
https://localhost/supertext/api/v1/util/CountryList?idList=%5B46%2C14%2C62%2C83%2C120%5D 
```

两种方法都不起作用。

我真的必须将其作为字符串发送和接收还是使用 POST？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-31T14:59:11.587

不，不要尝试在 GET 请求中发送 JSON。将 JSON 与其他有主体的动词一起使用，例如 POST 和 PUT。

`[FromUri]`通过使用属性装饰您的操作参数，以标准方式执行此操作：

```
public IList<Country> GetCountryList([FromUri] List<long> idList)
{
    ...
} 
```

然后触发 AJAX 请求：

```
$.ajax({
    url: 'api/v1/util/CountryList',
    type: 'GET',
    data: { idList: [1, 2, 3] },
    traditional: true,
    success: function (result) {
        console.log(JSON.stringify(result));
    }
}); 
```

进一步推荐您阅读有关 Web API 中的模型绑定如何工作的内容：

[http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-27T12:26:59.447

**以下是两个参数 Enum 和 objSearch **

var 枚举 = "ABCD";

```
var objSearch = [
              {"Name":"Navjot Angra","Age":23},
              {"Name":"Nav","Age":22}]; 
```

**//这是ajax方法**

$.ajax({

```
 type: "GET",
   var GatwayUrl ='http//2937/' (//Your url)
   url: GatwayUrl + 'api/Certificate/GetDetail/?Enum=' + Enum +'+&objSearch='+ JSON.stringify(objSearch),
   contentType: "application/json; charset=utf-8",
   dataType: "json",
   success: function (result) {
     if (result) {
        alert("Your Code");    
        }       }
}); 
```

**//这部分是web api部分**

[HttpGet]

public IHttpActionResult Fetch([FromUri]string Enum, [FromUri]string objSearch) {

IHttpActionResult 动作=空；返回动作；

}

# jquery - 从下拉菜单中删除选定的值 asp.net mvc

> ID：14628581
> 
> 赞同：0
> 
> 时间：2013-01-31T14:51:44.040
> 
> 标签：jquery, asp.net-mvc, razor, asp.net-mvc-4

如何从下拉列表中删除选定的值。

这是我的代码。

```
@viewbag.empskil = new selectlist(db.skils,"skillid","skillname"); 
```

我的查看代码

```
@html.Dropdown("skill", @viewbag.empskil as  SelectList); 
```

它在下拉列表中显示所有技能一个员工可以拥有多种技能。多个技能正在添加评级。

我只想从下拉列表中删除已经选择的技能。谁能告诉我如何做到这一点

这是屏幕

![在此处输入图像描述](../Images/8d7d9f64934a857374558151a2bc6658.png)

我只想让有技能的员工不会在下拉菜单中显示这些技能。任何人都可以告诉我如何完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:51:17.783

听起来您将需要服务器端和客户端代码。在服务器端，获取所有技能列表和员工技能列表，并使用 LINQ“Except”创建一个新列表，例如：

```
var unusedSkills = db.skils.ToList().Except(db.empSkils);
@viewbag.empskil = new selectlist(unusedSkills,"skillid","skillname"); 
```

在客户端，您需要使用 jQuery 在选择技能后将其从列表中删除并将其添加到员工列表中，例如：

```
$("#button1").click(function(){
    $("#list1 > option:selected").each(function(){
        $(this).remove().appendTo("#list2");
    });
}); 
```

# java - 比较 2 个 b-tree 以查看它们是否包含相同的值

> ID：14628582
> 
> 赞同：0
> 
> 时间：2013-01-31T14:51:44.457
> 
> 标签：java, algorithm, b-tree

看到 2 个 b-tree 可能具有相同的值，但形状不同，是否有一种算法可以遍历这些值并比较两个树是否具有相同的键？

关键是如果它们包含不同的密钥（尽快），就能够摆脱困境。

除非您同时在两个 b 树中执行查找，否则递归算法可能不起作用，我猜。

我见过遍历 b-tree 的算法，但我不想遍历两者，然后比较密钥，我想要更聪明的东西，如果有差异，我会尽快退出。

基本上该函数返回真/假。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:53:59.497

基本技术是*在有序遍历中以某种方式拥有一个表示当前点的对象*。一旦你有了其中的两个，一个用于树的每个实例，你只需继续为下一个键抽取它们，当两者第一次返回不同的下一个键时，你就完成了。

在 C# 中，您将使用`yield return`一次生成一个键的遍历，并跟踪它在树中的位置。然后，您可以将其中两个传递给`SequenceEquals`，它会在遇到第一个差异时立即退出。在 Java 中，您必须自己构建该机制，但这并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:55:43.537

假设你的意思是一个[b-tree](http://en.wikipedia.org/wiki/B-tree)，那么你需要做的就是一次迭代两者。任何一个迭代器之间的任何偏差都将证明它们的内容不同。如果在构建树时不收集更多细节，您不太可能找到比这更好的算法。

如果您不是在谈论被描述为的[b 树：](http://en.wikipedia.org/wiki/B-tree)

> ... B 树是一种树数据结构，它**保持数据排序**并允许在对数时间内进行搜索、顺序访问、插入和删除。

那么你需要先对其进行排序然后遍历它。

# c# - Cosmos 自定义操作系统，添加映射？

> ID：14628590
> 
> 赞同：0
> 
> 时间：2013-01-31T14:51:59.763
> 
> 标签：c#, operating-system, cosmos

我是 C# 新手，目前正在使用 COSMOS 为我的 OS 类制作一个简单的 FileSystem。目前我正在尝试实现一个“重新格式化”功能，当在控制台中输入“重新格式化”这个词时，操作系统（通过 QEMU 模拟）对磁盘进行分区。目前这是我的代码：

```
 public static void console()
    {            
        while (true)
        {
            Console.WriteLine("Console: ");
            String input = Console.ReadLine();
            if (input == "exit")
            {
                Cosmos.Sys.Deboot.ShutDown();
            }
            else if (input == "cpumem")
            {
                Console.WriteLine(Cosmos.Kernel.CPU.AmountOfMemory.ToString());
            }
            else if (input == "restart")
            {
                Cosmos.Sys.Deboot.Reboot();
            }
            else if (input == "devices")
            {
                var devices = Cosmos.Sys.FileSystem.Disk.Devices.ToArray();   
            }
            else if (input == "reformat")
            {
                try
                {
                    Partition part = null;
                    for (int j = 0; j < Cosmos.Hardware.BlockDevice.Devices.Count; j++)
                    {
                        if (Cosmos.Hardware.BlockDevice.Devices[j] is Partition)
                        {
                            part = (Partition)Cosmos.Hardware.BlockDevice.Devices[j];
                        }
                    }
                    var fs = new Cosmos.Sys.FileSystem.FAT32.FAT32(part);
                    uint cluster = 100;
                    fs.Format("newCluster", cluster);
                }
                catch
                {
                    //Do Something warn user.
                }
            }
        }
    } 
```

最重要的是这一点：

```
 else if (input == "reformat")
            {
                try
                {
                    Partition part = null;
                    for (int j = 0; j < Cosmos.Hardware.BlockDevice.Devices.Count; j++)
                    {
                        if (Cosmos.Hardware.BlockDevice.Devices[j] is Partition)
                        {
                            part = (Partition)Cosmos.Hardware.BlockDevice.Devices[j];
                        }
                    }
                    var fs = new Cosmos.Sys.FileSystem.FAT32.FAT32(part);
                    uint cluster = 100;
                    fs.Format("newCluster", cluster);
                }
                catch
                {
                    //Do Something warn user.
                }
            } 
```

这类似于位于此处的内容： http: [//cosmos-tutorials.webs.com/atafat.html](http://cosmos-tutorials.webs.com/atafat.html)

但是，当我运行它时，我收到此错误：

![在此处输入图像描述](../Images/d1479d720ae872aa8fc17ff96a33322e.png)

我相信这是因为我缺少这条线：

```
Cosmos.System.Filesystem.FileSystem.AddMapping("C", FATFS);
FATFileList = FATFS.GetRoot(); 
```

位于上面的链接中。有没有其他的映射方式？还是我完全错过了什么？COSMOS 文档并没有真正说明太多，对于像我这样的初学者来说，源代码确实令人困惑，因为它没有任何关于函数如何工作或它们做什么的评论。我使用的是旧版本的 COSMOS（里程碑 4），因为它是唯一适用于 Visual Studio C# 2008 的版本。新版本仅在 Visual Studio C# 2010 中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T04:25:43.717

啊，我认识到这一点......必须在我自己正在处理的 Cosmos 项目上调试类似的情况（我正在使用与 VS2010 兼容的 Cosmos，但同样的情况也可能适用于旧版本......）

如果您尝试在空对象上调用方法，就会发生这种情况。类型 0x........，方法 0x........ 专门提到了编译代码中调用失败的位置。“未找到！” 意味着找不到它正在寻找的方法，大概是因为您在空引用上调用了它。

我自己在用VirtualBox进行测试，发现如果你使用的是全新的空白硬盘镜像，上面不会有Partitions。因此，条件永远不会满足，您的 Partition 永远不会被设置，然后 Cosmos 将尝试在 null Partition 上执行一个方法！

仔细看看你是如何设置分区的（它被初始化为空）。对于初学者，每次满足“如果（块设备是分区）”条件时，我都会打印一条简单的消息......我愿意打赌它永远不会打印。

希望这会有所帮助......我自己仍在学习 Cosmos 和自定义内核，但在我的案例中修复空引用解决了我出现的问题。如果这是问题所在，那么下一步当然是首先弄清楚为什么你没有得到任何分区......

您的其余代码*看起来*不错，但我不确定您是如何实现其余类的。内核调试可能是一场噩梦，祝你好运！

# java - Java“非法开始表达式”错误............如何解决这个错误？

> ID：14628592
> 
> 赞同：-1
> 
> 时间：2013-01-31T14:52:01.617
> 
> 标签：java, expression

我正在使用 NetBeans IDE 开发程序，但在一行前面出现错误

> 非法的表达式开头和下面写的';' 预期的

我是 Java 新手，在为数组赋值时无法修复此错误。

以下是发生错误的部分代码：

* * *

```
String[] colname;
   int j=0;
   while(rs.next()){
     for(int i=0;i<cols;i++){
       colname={dtm.getColumnName(i)};       //**<-- This is where the error occured**
                }
                    colName=colname;   //colName is also an array of String datatype.
                    Object[] value = {rs.getObject(colName[j])};
                    dtm.addRow(value);
                    j++;
                } 
```

* * *

一切都在这条线上

```
colname={dtm.getColumnName(i)}; 
```

不给出任何错误。但错误仅发生在上述行中。

我发现自己无法修复它。谁能帮我解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:53:26.873

简单地分配给变量时，您不能使用这种形式的数组创建 - 它仅作为变量声明的一部分有效。你需要：

```
colname = new String[] { dtm.getColumnName(i) }; 
```

但是，我认为这*实际上*并没有达到你想要的效果......除了循环的最后一次迭代之外，所有这些都是毫无意义的。

您可能想要更多类似的东西：

```
String[] colNames = new String[cols];
for (int i = 0; i < cols; i++) {
    colNames[i] = dtm.getColumnName(i);
} 
```

我还*强烈*建议您避免使用这样的代码：

```
 colName=colname; 
```

拥有两个仅在情况下不同的变量是一个*非常*糟糕的主意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T14:53:52.363

您有两种初始化数组的方法：

```
String[] colname= {dtm.getColumnName(i)}; 
```

或者

```
colname= new String[] {dtm.getColumnName(i)}; 
```

但是你不能混合它们。在您的情况下，您将使用后者，因为您还没有在声明它的行上填充它的信息。

但是请注意，这可能不会满足您的要求，因为您将在每个循环中不断重新分配一个新数组。您可以改用 ArrayList 让您的生活更轻松：

```
List<String> colName = new ArrayList<String> ();

//in your loop
colName.add(dtm.getColumnName(i)); 
```

[您可以在本教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)中阅读有关数组的更多信息。

# python - 为什么python的fcntl.ioctl的调用会出现Invalid argument错误

> ID：14628597
> 
> 赞同：1
> 
> 时间：2013-01-31T14:52:15.703
> 
> 标签：python, python-2.7, fcntl

我正在尝试以下列方式使用`fcntl.ioctl`python 的[fcntl 包中的命令](http://docs.python.org/2/library/fcntl.html)

```
buf = array.array('h', [0])
fcntl.ioctl(file_handler, 21780)
fcntl.ioctl(file_handler, 21780, buf)
fcntl.ioctl(file_handler, 21780, buf, 1) 
```

即它的所有三个版本，使用`file_handler`创建的文件处理程序`open`。每个都给我同样的错误：

```
IOError: [Errno 22] Invalid argument 
```

简单的问题：我如何正确拨打电话`fcntl.ioctl`？还是`fcntl.fcntl`改用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:02:27.393

看起来你使用了错误的文件。您的示例 C 代码引用`/dev/bus/usb/<bus_id>/<device_id>`，而不是`/dev/ttyACM0`.

# iphone - self.tableView reloadData 在单元格标签中堆叠文本，而不是先清理它

> ID：14628598
> 
> 赞同：1
> 
> 时间：2013-01-31T14:52:16.670
> 
> 标签：iphone, ios, objective-c, xcode, ipad

在用户从前一个屏幕中选择一个值并且导航控制器将它们弹回之后，我正在尝试更新单元格内的标签（注意，这不是单元格的标签文本。它是单元格内的另一个自定义标签）。

但是，当我调用 reloadData 时，不是清除单元格中的标签并放置新值，而是实际上堆叠在已经存在的内容之上。就像你拿了数字 200 并在上面放了一个 50。你会得到一个 0 和 5 相互叠加的奇怪网格。

关于如何调整它的任何想法？我是否必须将标签的文本重置为“”，每个视图都出现了？如果是这样，最好的方法是什么，我在 cellForRowAtIndexPath 方法中尝试过，但没有改变。

cellforRowAtIndexPath 代码

```
 // Set up the cell...
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    // get the dictionary object
NSDictionary *dictionary = [_groups objectAtIndex:indexPath.section];
NSArray *array = [dictionary objectForKey:@"key"];
NSString *cellValue = [array objectAtIndex:indexPath.row];
cell.textLabel.text = cellValue;

//label for currently selected/saved object
_currentSetting = [[UILabel alloc] initWithFrame:CGRectMake(160, 8, 115, 25)];
[_currentSetting setFont:[UIFont systemFontOfSize:14]];
_currentSetting.backgroundColor = [UIColor clearColor];
_currentSetting.textColor = [UIColor blueColor];
_currentSetting.textAlignment = NSTextAlignmentRight;

_currentSetting.text = [NSString stringWithFormat:@""];
_currentSetting.text = [NSString stringWithFormat:@"%@ mi",[setting.val stringValue]];

 [cell.contentView addSubview:_currentSetting];

 return cell 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:05:20.243

每次刷新单元格时，您都在重新创建标签并重新添加它。只有在第一次创建单元格时才应添加所有单元格子视图。

因此，在您的代码中，您第一次创建了一个单元格和所有子视图。然后，如果您需要一个新单元格进行滚动或任何其他原因，您将获得一个已添加所有子视图的可重用单元格（可重用...）。然后，您（再次）完成添加子视图的过程，因此现在该单元格包含来自该单元格的先前所有者（数据）和该单元格的新所有者（数据）的子视图。这就是为什么当您重新加载数据时它们看起来堆叠在一起的原因。

伪代码：

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: CellIdentifier];
   if (cell == nil) {
      //Add all subviews here
   }

   //Modify (only modify!!) all cell subviews here

   return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:03:02.673

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UILabel *customLabel;

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        customLabel = [[UILabel alloc] initWithFrame:CGRectMake(0,0,320,44)];
        customLabel.tag = 123;
        [cell addSubview:customLabel];
    } else {
        customLabel = (UILabel *)[cell viewWithTag:123];
    }

    customLabel.text = @"Some nice text";

    return cell;
} 
```

# css - 我可以只为填充添加背景颜色吗？

> ID：14628601
> 
> 赞同：102
> 
> 时间：2013-01-31T14:52:24.597
> 
> 标签：css

我有一个标题框，包括该框的边框和填充以及背景颜色，我可以仅更改边框后填充区域的背景颜色，然后为其余宽度更改相同的背景颜色（即给定代码中的灰色） ?

只需一小撮我想要填充背景颜色的代码：

```
nav {
    margin:0px auto;
    width:100%;
    height:50px;
    background-color:grey;
    float:left;
    padding:10px;
    border:2px solid red;
} 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-08-24T23:10:52.297

对不起大家，这是真正的解决方案，您不必实际设置填充。

[https://jsfiddle.net/techsin/TyXRY/1/](https://jsfiddle.net/techsin/TyXRY/1/)

我做了什么...

*   在背景上应用了两个渐变，都具有一种开始和结束颜色。而不是使用纯色。原因是一个背景不能有两种纯色。
*   然后对每个应用不同的背景剪辑属性。
*   从而使一种颜色扩展到内容框，另一种扩展到边框，从而显示填充。

如果我对自己这么说，那就太聪明了。

```
div {
  padding: 35px;
  background-image: linear-gradient(to bottom, rgba(240, 255, 40, 1) 0%, rgba(240, 255, 40, 1) 100%), linear-gradient(to bottom, rgba(240, 40, 40, 1) 0%, rgba(240, 40, 40, 1) 100%);
  background-clip: content-box, padding-box;
}
```

```
<p>Padding IS COLORED</p>
<div>Mexican’t professor plum charlie chaplin? Facial accessory lorreto del mar Daniel plainview landed gentry circus strongman sam elliott zap rowsdower, lorreto del mar off-piste frightfully nice mustachio landed gentry Daniel plainview zap rowsdower toothbrush
  circus strongman boogie nights sam elliott Daniel plainview facial accessory, Daniel plainview man markings boogie nights mr frothy-top sam elliott worn with distinction mustachio zap rowsdower off-piste Daniel plainview toothbrush lorreto del mar frightfully
  nice wario facial accessory mr frothy-top landed gentry circus strongman prostate cancer? Rock n roll star gunslinger villain marquess of queensbury en time-warped cabbie off-piste graeme souness en time-warped cabbie, cunning like a fox gunslinger
  dodgy uncle clive villain karl marx marquess of queensbury en time-warped cabbie graeme souness rock n roll star off-piste en time-warped cabbie, rock n roll star lemmy dodgy uncle clive graeme souness professor plum en time-warped cabbie villain gunslinger
  en time-warped cabbie marquess of queensbury cunning like a fox devilish cad off-piste karl marx. John aldridge basil fawlty landed gentry louis xiii sam elliott brigadier, et sodales cum dick van dyke mouth coiffure louis xiii landed gentry basil fawlty
  john aldridge stiff upper lip brigadier crumb catcher sam elliott?</div>
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2016-02-07T10:02:38.117

## 使用`background-clip`和`box-shadow`属性。

1）设置`background-clip: content-box`- 这将背景限制为内容本身（而不是同时覆盖填充和边框）

2) 添加一个内部`box-shadow`，其扩展半径设置为与填充相同的值。

所以说填充是 10px - 设置`box-shadow: inset 0 0 0 10px lightGreen`- 这将使填充区域只有浅绿色。

## [Codepen 演示](http://codepen.io/danield770/pen/gPBQgP)

```
nav {
  width: 80%;
  height: 50px;
  background-color: gray;
  float: left;
  padding: 10px; /* 10px padding */
  border: 2px solid red;
  background-clip: content-box; /* <---- */
  box-shadow: inset 0 0 0 10px lightGreen; /* <-- 10px spread radius */
}
ul {
  list-style: none;
}
li {
  display: inline-block;
}
```

```
<h2>The light green background color shows the padding of the element</h2>
<nav>
  <ul>
    <li><a href="index.html">Home</a>
    </li>
    <li><a href="/about/">About</a>
    </li>
    <li><a href="/blog/">Blog</a>
    </li>
  </ul>
</nav>
```

有关此技术的详尽教程，请参阅[这篇很棒的 css-tricks 帖子](https://css-tricks.com/the-backgound-clip-property-and-use-cases/)

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2013-01-31T15:04:28.907

纯 CSS 的另一个选项是这样的：

```
nav {
    margin: 0px auto;
    width: 100%;
    height: 50px;
    background-color: white;
    float: left;
    padding: 10px;
    border: 2px solid red;
    position: relative;
    z-index: 10;
}

nav:after {
    background-color: grey;
    content: '';
    display: block;
    position: absolute;
    top: 10px;
    left: 10px;
    right: 10px;
    bottom: 10px;
    z-index: -1;
}
```

```
<nav>Some text or anything</nav>
```

演示[在这里](http://jsbin.com/epezip/3/edit)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-31T15:01:03.040

您可以使用背景渐变来实现该效果。对于您的示例，只需添加以下行（代码太多，因为您必须使用供应商前缀）：

```
background-image: 
    -moz-linear-gradient(top, #000 10px, transparent 10px),
    -moz-linear-gradient(bottom, #000 10px, transparent 10px),
    -moz-linear-gradient(left, #000 10px, transparent 10px),
    -moz-linear-gradient(right, #000 10px, transparent 10px);
background-image: 
    -o-linear-gradient(top, #000 10px, transparent 10px),
    -o-linear-gradient(bottom, #000 10px, transparent 10px),
    -o-linear-gradient(left, #000 10px, transparent 10px),
    -o-linear-gradient(right, #000 10px, transparent 10px);
background-image: 
    -webkit-linear-gradient(top, #000 10px, transparent 10px),
    -webkit-linear-gradient(bottom, #000 10px, transparent 10px),
    -webkit-linear-gradient(left, #000 10px, transparent 10px),
    -webkit-linear-gradient(right, #000 10px, transparent 10px);
background-image: 
    linear-gradient(top, #000 10px, transparent 10px),
    linear-gradient(bottom, #000 10px, transparent 10px),
    linear-gradient(left, #000 10px, transparent 10px),
    linear-gradient(right, #000 10px, transparent 10px); 
```

不需要不必要的标记。

如果你只想有一个双边框，你可以使用轮廓和边框而不是边框​​和填充。

虽然您也可以使用伪元素来达到预期的效果，但我建议不要这样做。伪元素是 CSS 提供的一个非常强大的工具，如果你把它们“浪费”在这样的东西上，你可能会在其他地方错过它们。

如果没有其他方法，我只使用伪元素。不是因为它们不好，恰恰相反，因为我不想浪费我的小丑。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-31T14:54:33.127

您不能设置填充的颜色。

您将必须创建一个具有所需背景颜色的包装元素。给这个元素添加边框并设置它的填充。

看这里的例子：http: [//jsbin.com/abanek/1/edit](http://jsbin.com/abanek/1/edit)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-08-15T07:23:19.150

答案说明了所有可能的解决方案

我还有一个 BOX-SHADOW

这里是[JSFIDDLE](http://jsfiddle.net/gh2qZ/)

和代码

```
nav {
    margin:0px auto;
    width:100%;
    height:50px;
    background-color:grey;
    float:left;
    padding:10px;
    border:2px solid red;
    box-shadow: 0 0 0 10px blue inset;
} 
```

它也支持IE9，所以它比渐变解决方案更好，添加适当的前缀以获得更多支持

IE8不支持，太可惜了！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-31T15:12:14.353

这将是一个适用于 IE8/9 的适当 CSS 解决方案（当然是带有 html5shiv 的 IE8）：[codepen](http://codepen.io/anon/pen/xJCql)

```
nav {
  margin: 0px auto;
  height: 50px;
  background-color: gray;
  padding: 10px;
  border: 2px solid red;
  position: relative;
  color: white;
  z-index: 1;
}

nav:after {
  content: '';
  background: black;
  display: block;
  position: absolute;
  margin: 10px;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: -1;
}
```

```
<nav>lorem ipsum dolor sit amet</nav>
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-31T14:57:52.990

没有确切的功能可以做到这一点。

无需在内部包装另一个元素，您可以用 box-shadow 替换边框，用边框替换填充。但请记住 box-shadow 不会增加元素的尺寸。

jsfiddle 真的很慢，否则我会添加一个示例。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-31T14:56:53.677

我只是用另一个 div 包装标题并使用边框。

```
<div class="header-border"><div class="header-real">

    <p>Foo</p>

</div></div> 
```

CSS：

```
.header-border { border: 2px solid #000000; }
.header-real { border: 10px solid #003399; background: #cccccc; padding: 10px; } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-05-30T03:28:29.580

您可以按如下方式在填充上执行 div：

```
<div id= "paddingOne">
</div>
<div id= "paddingTwo">
</div>

#paddingOne {
width: 100;
length: 100;
background-color: #000000;
margin: 0;
z-index: 2;
}
#paddingTwo {
width: 200;
length: 200;
background-color: #ffffff;
margin: 0;
z-index: 3; 
```

当然，宽度、长度、背景颜色、边距和 z-index 可以变化，但为了覆盖 padding，z-index 必须高于 0，这样它才会覆盖 padding。你可以摆弄定位等来改变它的方向。希望有帮助！

PS div 是 html 而 #paddingOne 和 #paddingTwo 是 css （以防有人不明白:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-14T11:10:31.247

`<hr>`像这样设计一条实线。

```
.line {
  height: 10px;
  color: black;
  margin: 0;
  border-style: solid;
  background-color: black;
}
```

```
<hr class="line">
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-19T11:56:07.790

另一个技巧：

将两个 div 堆叠在一起，然后`background-clip`为每个应用不同（底部带有`padding-box`，顶部带有`content-box`）：

```
.rect {
  width: 100px;
  height: 50px;
  border: red solid 5px;
  padding: 10px;
  position: absolute;
}
.bottom {
  background: yellow padding-box;
}
.top {
  background: pink content-box;
}
```

```
<div>
  <div class="rect bottom"></div>
  <div class="rect top"></div>
</div>
```

链接：

*   [背景剪辑属性](https://css-tricks.com/the-backgound-clip-property-and-use-cases)
*   [堆叠 div](https://stackoverflow.com/questions/1909648/stacking-divs-on-top-of-each-other)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-02-08T13:36:30.427

如果您不想影响内容背景，并且每个方向都有不同的填充，请使用以下内容：

```
div {
  width: 440px;
  padding: 10px 20px 30px 40px;
  box-shadow: inset 0 10px 0 0 lightGreen, inset -20px 0 0 0 lightGreen, inset 0 -30px 0 0 lightGreen, inset 40px 0 0 0 lightGreen;
}
```

```
<div>The light green background color shows the padding of the element</div>
```

# zope - 如何通过 url 从 ZODB 获取对象？

> ID：14628606
> 
> 赞同：0
> 
> 时间：2013-01-31T14:52:38.030
> 
> 标签：zope, zodb, zope3

如何通过 url ' [http://ecample.com/folder1/object1](http://ecample.com/folder1/object1) ' 从 Zope3 项目中的 ZODB 数据库获取对象？

```
obj1 = someMethod('http://ecample.com/folder1/object1') 
```

有没有任何方法的工具呢？像 absoluteUrl() 但相反？或者我必须解析 url 并从 db root 手动获取对象？...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:38:07.490

您可以使用遍历 API 将路径转换为对象：

```
from zope.traversing.api import traverse

obj = traverse(context, path) 
```

你需要一个上下文来遍历*；*例如，使用站点根目录作为 URL 路径。如果您只有一个 URL，则需要从中解析出路径：

```
from urlparse import urlparse

path = urlparse(url).path 
```

# vb.net - Silverlight - TreeView 和 HierarchialDataTemplate

> ID：14628608
> 
> 赞同：0
> 
> 时间：2013-01-31T14:52:42.757
> 
> 标签：vb.net, xaml, silverlight-4.0, treeview, hierarchicaldatatemplate

原谅我英文不好，希望能解释清楚。我在 Treview (SL4) 中看不到子节点。我有这种情况：

2类：

```
Public Class My_Root
    Private My_Cod_Prod As String
    Public Property Cod_Prod() As String
        Get
            Return My_Cod_Prod
        End Get
        Set(ByVal value As String)
            My_Cod_Prod = value
        End Set
    End Property

    Private My_Desc_Prod As String
    Public Property Desc_Prod() As String
        Get
            Return My_Desc_Prod
        End Get
        Set(ByVal value As String)
            My_Desc_Prod = value
        End Set
    End Property

    Private My_Cod_Desc_Prod As String
    Public Property Cod_Desc_Prod() As String
        Get
            Return My_Cod_Desc_Prod
        End Get
        Set(ByVal value As String)
            My_Cod_Desc_Prod = value
        End Set
    End Property

    Private My_Items As New My_Child
    Public Property Items() As My_Child
        Get
            Return My_Items
        End Get
        Set(ByVal value As My_Child)
            My_Items = value
        End Set
    End Property

End Class

Public Class My_Child
    Implements INotifyPropertyChanged
    Dim Selezionato As Boolean = False
    Private My_Cod_PosFis As String
    Public Property Cod_PosFis() As String
        Get
            Return My_Cod_PosFis
        End Get
        Set(ByVal value As String)
            My_Cod_PosFis = value
        End Set
    End Property
    Private My_Desc_PosFis As String
    Public Property Desc_PosFis() As String
        Get
            Return My_Desc_PosFis
        End Get
        Set(ByVal value As String)
            My_Desc_PosFis = value
        End Set
    End Property

    Public Property Selezione
        Get
            Return Selezionato
        End Get
        Set(ByVal value)
            Selezionato = value
            NotifyPropertyChanged("Selezione")
        End Set
    End Property

    Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged
    Public Sub NotifyPropertyChanged(ByVal propertyName As String)
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(propertyName))
    End Sub

End Class 
```

然后我创建一个 ObservableCollection：

```
Public Shared nodi As New ObservableCollection(Of My_Root)() 
```

人们以这种方式：

```
 Private Sub Compila_Class_My_Root()
   For Each Prod In Elenco_ASS_Prodotti_PosFiscali
                Dim NodoRoot As New My_Root

                    NodoRoot.Cod_Prod = Prod.PFIS_CODPROD
                    NodoRoot.Desc_Prod = Prod.PFIS_DESCOM
                    NodoRoot.Cod_Desc_Prod = Prod.PFIS_CODPROD & " - " & Prod.PFIS_DESCOM
                 Dim NodoChild As New My_Child
                    NodoChild.Cod_PosFis = Prod.PFIS_POSFIS
                    Dim desc_pos_fis As String = get_DescrizionePosFis(Prod.PFIS_POSFIS)
                    NodoChild.Desc_PosFis = desc_pos_fis
                    NodoRoot.Items = NodoChild
                nodi.Add(NodoRoot)
   Next

     MyTreeView.ItemsSource = nodi 

End Sub 
```

这是 HierarchicalDataTemplate 的 XAML 部分：

```
 <sdk:HierarchicalDataTemplate x:Key="MyNodeRoot">
            <sdk:HierarchicalDataTemplate.ItemsSource>
                <Binding Path="My_Root" />
            </sdk:HierarchicalDataTemplate.ItemsSource>
            <TextBlock Text="{Binding Path=Cod_Desc_Prod}" />
        </sdk:HierarchicalDataTemplate>

      <sdk:TreeView Name="MyTreeView"  ItemTemplate="{StaticResource MyNodeRoot}"/> 
```

在这里我无法理解如何显示子节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:35:25.217

我不是 VB 专家，但看起来您的 Items 属性不是数组。我认为它需要声明如下。

```
Public Property Items() As My_Child() 
```

然后，在 Compila_Class_My_Root 方法中，当设置 NodoRoot.Items 时，这里也使用一个数组：

```
Dim children As My_Child() = { NodoChild }
NodoRoot.Items = children 
```

在您的 XAML 中，HierarchicalDataTemplate 的数据上下文是一个 My_Root 实例，这就是您可以绑定到 My_Root (Cod_Desc_Prod) 的属性的原因。ItemsSource 也应该绑定到 My_Root 的属性：

```
<Binding Path="Items" /> 
```

或者，您可以使用不那么冗长的语法：

```
 <sdk:HierarchicalDataTemplate x:Key="MyNodeRoot" ItemsSource="{Binding Items}">
        <TextBlock Text="{Binding Cod_Desc_Prod}" />
    </sdk:HierarchicalDataTemplate> 
```

最后，您需要指定孩子的外观。

```
<DataTemplate x:Key="MyChildTemplate">
    <StackPanel Orientation="Horizontal">
        <CheckBox IsChecked="{Binding Selezione, Mode=TwoWay}" />
        <TextBlock Text="{Binding Desc_PosFis}" />
        <!-- Or whatever you want here... -->
    </StackPanel>
</DataTemplate>

<sdk:HierarchicalDataTemplate x:Key="MyNodeRoot"
    ItemsSource="{Binding Items}"
    ItemTemplate="{StaticResource MyChildTemplate}"
    >
    <TextBlock Text="{Binding Cod_Desc_Prod}" />
</sdk:HierarchicalDataTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:00:24.210

非常感谢安德鲁，我解决了（尽管作为解决方案不是很漂亮）可能对某人有用）：

我参加了课程：My_Child

```
 Public Property Selezione
    Get
        Return Selezionato
    End Get
    Set(ByVal value)
        Selezionato = value
        NotifyPropertyChanged("Selezione")
    End Set
    End Property 
```

并添加到此属性：

```
 Private My_Cod_Prod As String
    Public Property Cod_Prod() As String
        Get
            Return My_Cod_Prod
        End Get
        Set(ByVal value As String)
            My_Cod_Prod = value
        End Set
    End Property 
```

那个人是这样的：我修改了

```
 Private Sub Compila_Class_My_Root()
    For Each Prod In Elenco_ASS_Prodotti_PosFiscali
            Dim NodoRoot As New My_Root

                NodoRoot.Cod_Prod = Prod.PFIS_CODPROD
                NodoRoot.Desc_Prod = Prod.PFIS_DESCOM
                NodoRoot.Cod_Desc_Prod = Prod.PFIS_CODPROD & " - " & Prod.PFIS_DESCOM
             Dim NodoChild As New My_Child
                NodoChild.Cod_PosFis = Prod.PFIS_POSFIS
                Dim desc_pos_fis As String = get_DescrizionePosFis(Prod.PFIS_POSFIS)
                NodoChild.Desc_PosFis = desc_pos_fis
                NodoChild.Cod_Prod = Prod.PFIS_CODPROD  '******   ADDED   ******'
                NodoRoot.Items = NodoChild
            nodi.Add(NodoRoot)
      Next

   MyTreeView.ItemsSource = nodi 

End Sub 
```

然后在这里我要搜索集合中的项目

```
 Private Sub MyTreeView_SelectedItemChanged(sender As Object, e As                    System.Windows.RoutedPropertyChangedEventArgs(Of Object)) Handles MyTreeView.SelectedItemChanged
    Dim myTreeView As TreeView = TryCast(sender, TreeView)
    Dim chkele As My_Child
    Dim chkprod As My_Root
    Dim elemento 'elemento selezionato
    Try
        chkele = myTreeView.SelectedItem

    Catch ex As Exception
        chkele = Nothing
    End Try
    If chkele Is Nothing Then
        '    ho selezionato il prodotto
        chkprod = myTreeView.SelectedItem
    End If

     Try
       elemento = (From ele In Elenco_ASS_Prodotti_PosFiscali Where ele.PFIS_CODPROD = chkele.Cod_Prod And ele.PFIS_POSFIS = chkele.Cod_PosFis).Single
    Catch ex As Exception

    End Try

    End Sub 
```

# java - editText 只写一行，滚动正确吗？

> ID：14628610
> 
> 赞同：0
> 
> 时间：2013-01-31T14:52:48.313
> 
> 标签：java, android, android-edittext

我有一个`editText`填充屏幕宽度的一半，以及它的所有高度。当我将文本附加到它时，文本总是从编辑文本高度的一半开始，当它到达边缘时，`editText`它会继续书写，向右滚动。我想让它去一个新的线路，为什么不呢？为什么它从一半开始？目前左边的文本应该在右边复制。AppendToEMulator 可以很好地写入终端，但是当我在右侧设置文本时，`editText`接收到的任何一个字节都没有换行符，可能是因为我将其转换为字符串，并且在`editText`到达末尾时也没有换行符，只是继续前进。

```
 <jackpal.androidterm.emulatorview.EmulatorView
        android:id="@+id/emulatorView"
        android:layout_width="500dp"
        android:layout_height="wrap_content"

        android:layout_above="@+id/term_entry"
        android:layout_below="@+id/deviceConnect"
        android:layout_toRightOf="@+id/scrllyout"
        android:focusable="true"
        android:focusableInTouchMode="true" />

    <EditText android:id="@+id/outputBox"
        android:layout_toRightOf="@+id/emulatorView"
        android:layout_alignParentRight="true"
        android:layout_width="200dp"
        android:layout_height="fill_parent"
        android:background="#ffffff"
        android:textColor="#FF043241"
        android:inputType="text|textImeMultiLine" /> 
```

在 Java 中：

```
public void onDataReceived(int id, byte[] data) {

        dataReceived = new String(data);
        dataReceivedByte = dataReceived.getBytes();
        statusBool = true;
        ((MyBAIsWrapper) bis).renew(data);

    runOnUiThread(new Runnable(){

        @Override
        public void run() {

            mSession.appendToEmulator(dataReceivedByte, 0, dataReceivedByte.length);

        }});

    final String ReceivedText = mReceiveBox.getText().toString() + " "
            + new String(data);
    runOnUiThread(new Runnable() {
        public void run() {
            mReceiveBox.setText(ReceivedText);
            mReceiveBox.setSelection(ReceivedText.length());

        }
    });

    viewHandler.post(updateView);

} 
```

![在此处输入图像描述](../Images/8682d03429c05b8af66e589d6721ad9e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:33:06.693

答案是设置 inputType 通过以下方式禁用自动换行：

```
android:singleLine="true" 
```

即使我指定

```
android:singleLine="false" 
```

它仍然被覆盖。因为我不需要输入，所以`editText`我只是删除了输入类型。

# java - 为什么 SpringBatch MultiResourcePartitioner 无法识别 jobParameters？更重要的是，该怎么办？

> ID：14628612
> 
> 赞同：2
> 
> 时间：2013-01-31T14:52:51.710
> 
> 标签：java, batch-processing, spring-batch, applicationcontext

这是一个非常简单的设置。我有一个可能包含 5m 条记录的文件，我需要读取这些记录并进行一些处理，然后发送到数据库。处理和写入的机制并不重要。我需要能够将路径和文件名 [ /opt/etc/app/partner/input_file.csv ] 作为参数传递到进程中。这很容易，将其添加到 JobParameters 并将其提供给 JobLauncher。

```
JobParametersBuilder jpBuilder = new JobParametersBuilder() ;
jpBuilder.addString("filePath", "/opt/etc/app/partner/input_file.csv") ;
jobLauncher.run(job, jpBuilder.toJobParameters() ; 
```

完成，现在让上下文意识到它。再次引用jobParameters的简单问题。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:batch="http://www.springframework.org/schema/batch"
    xsi:schemaLocation="
    http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch-2.1.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <description>PoC to demonstrate variable row content handling</description>

    <batch:job id="poc" job-repository="jobRepository" incrementer="runIdIncrementer" restartable="true">
        <batch:step id="pocReadWriteStep">
            <batch:partition step="step" partitioner="partitioner">
                <batch:handler task-executor="taskExecutor"/>
            </batch:partition>
        </batch:step>
    </batch:job>

    <batch:step id="step">
        <batch:tasklet task-executor="taskExecutor" throttle-limit="20" transaction-manager="transactionManager" allow-start-if-complete="true">
            <batch:transaction-attributes isolation="READ_UNCOMMITTED"/>
            <batch:chunk
                reader="reader"
                processor="processor"
                writer="writer"
                commit-interval="20">
            </batch:chunk>
        </batch:tasklet>
    </batch:step>

    <bean id="reader" class="org.springframework.batch.item.file.FlatFileItemReader" scope="step">
        <property name="resource" value="file:#{jobParameters['filePath']}"/>
        <property name="lineMapper">
            <bean class="org.springframework.batch.item.file.mapping.PatternMatchingCompositeLineMapper">
                <property name="tokenizers">
                    <map>
                        <entry key="*" value-ref="lineTokenizer"/>
                    </map>
                </property>
                <property name="fieldSetMappers">
                    <map>
                        <entry key="*" value-ref="fieldSetMapper"/>
                    </map>
                </property>
            </bean>
        </property>
    </bean>

    <bean id="lineTokenizer" class="org.springframework.batch.item.file.transform.DelimitedLineTokenizer"/>

    <bean id="fieldSetMapper" class="org.springframework.batch.item.file.mapping.PassThroughFieldSetMapper"/>

    <bean id="processor" class="com.verifi.springbatchpoc.PocProcessor"/>

    <bean id="writer" class="com.verifi.springbatchpoc.PocWriter"/>

    <bean id="runIdIncrementer" class="org.springframework.batch.core.launch.support.RunIdIncrementer"/>

    <bean id="partitioner" class="org.springframework.batch.core.partition.support.MultiResourcePartitioner">
        <property name="resources" value="file:#{jobParameters['filePath']}"/>
    </bean>

    <bean id="taskExecutor" class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor">
        <property name="corePoolSize" value="20"/>
    </bean>

</beans> 
```

除了在 MultiResourcePartitioner 中它似乎无法识别对 jobParameters 的引用。我可以对路径和文件名进行硬编码，这很令人高兴，但这并不能承载此实现的邮件。

因为我确定有人会问，这里是来自错误的堆栈跟踪（无论如何都是其中的一部分）。

```
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    ... 46 more
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1008E:(pos 0): Field or property 'jobParameters' cannot be found on object of type 'org.springframework.beans.factory.config.BeanExpressionContext'
    at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:207)
    at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:71)
    at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:52)
    at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:102)
    at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:97)
    at org.springframework.expression.common.CompositeStringExpression.getValue(CompositeStringExpression.java:82)
    at org.springframework.expression.common.CompositeStringExpression.getValue(CompositeStringExpression.java:1)
    at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:138)
    ... 52 more 
```

想法、意见、建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:20:37.267

我认为您应该添加 scope="step" ，例如：

```
 <bean id="partitioner" class="org.springframework.batch.core.partition.support.MultiResourcePartitioner"
scope="step">
        <property name="resources" value="file:#{jobParameters['filePath']}"/>
    </bean> 
```

# security - 是否可以与用户建立安全连接，即使重定向到 HTTPS？

> ID：14628613
> 
> 赞同：0
> 
> 时间：2013-01-31T14:52:52.867
> 
> 标签：security, redirect, https, man-in-the-middle

所以这是一个有点宽泛的问题，我知道，但我希望比我更聪明的人能提供一个总结答案，帮助我总结 SSL 的所有细节。

最近我看了一段 Moxie Marlinspike 在 BlackHat 做演讲的视频，一小时结束后，我心想，“我做什么并不重要。对于一个坚定的黑客来说，总有办法进来的。” 我记得他的最后一个示例，在该示例中，他演示了即使在用户输入 HTTP 地址直接转到 HTTPS 时使用重定向，攻击者仍有机会通过 MITM 插入自己。

因此，如果浏览器始终默认使用 HTTP，而用户很少直接在地址栏中输入 HTTPS 地址，那么监听对银行 X 网站的访问的攻击者将始终有机会在 HTTP -> HTTPS 重定向期间获得控制权。我认为他们必须在同一个网络上，但这并不是什么安慰。似乎 Marlinspike 的观点是，除非我们直接将 HTTPS 作为标准而不是替代方案，否则这将始终是一个问题。

我是否正确理解这一点？如果攻击者可以在过渡期间使用 MITM 来获得控制权，那么重定向到 HTTPS 的意义何在？有没有人知道可以采取哪些预防措施来保护自己？通过混淆 HTTPS 链接的 javascript 重定向（因此它们不能在传输过程中被剥离）会有所帮助吗？任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:54:36.280

您可以使用[HSTS](http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security)告诉浏览器必须始终使用 HTTPS 访问您的站点。

只要浏览器的第一个 HTTP 连接没有受到攻击，所有未来的连接都将直接通过 HTTPS，即使用户没有在地址栏中键入 HTTPS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:36:45.367

如果在服务器端正确实施，HTTP/HTTPS 重定向中实际上没有任何信息泄漏（即，如果所有危险的 cookie 都被标记为“仅限 HTTPS”并且 JavaScript 无法访问）。当然，如果最终用户对安全一无所知，它可能会被黑客入侵，但另一方面，如果您的用户甚至不知道基本的安全规则并且没有系统管理员向用户解释它，它有可能以多种方式破解此类用户，以至于 HTTP 到 HTTPS 重定向问题并不是真正的麻烦。我看到许多用户从服务器下载并运行未知的 EXE 文件只是为了承诺“赢得 1000,000 美元”，这也是破解它们的好方法（甚至比利用重定向更好，如果你在用户计算机上作为 EXE 运行，您已经是这里的王者，可以在默认安全设置下窃取任何用户 cookie）。因此，如果用户与黑客合作并帮助黑客入侵他自己的计算机，是的，这样的用户将成功被黑客入侵，但安全性是关于准备好保护自己的专业人员，而不是关于可能在 Blogpost 某处发布他的 PayPal cookie 的用户之后他惊讶地发现他被黑了。

# android - 只有在视图中单击后才执行 onDraw() 中的代码

> ID：14628617
> 
> 赞同：0
> 
> 时间：2013-01-31T14:53:26.423
> 
> 标签：android, onclicklistener, ondraw

我有一个扩展视图的类。这个类在 xml 中被调用来构建我的视图。现在视图在加载时自动调用 onDraw 函数。但是只有在我单击该视图后，我才能在 onDraw() 函数上做什么？总之，我只需要在单击视图后执行 onDraw() 中的代码。

绘图视图.java：

```
public class DrawView extends View {
    Paint mPaint = new Paint();
    Context context;

    public DrawView(Context context, AttributeSet attrs){
        super(context, attrs);
        this.context = context;
        // setWillNotDraw(true);

    }

    protected void onDraw(Canvas canvas){
        super.onDraw(canvas);
        mPaint.setColor(Color.MAGENTA);
        canvas.drawRect((float) (getWidth()*0.3), (float) (getHeight()*0.3), getWidth(), getHeight(), mPaint); 
```

主.xml：

```
<LinearLayout
      android:orientation="vertical"
      android:layout_height="fill_parent"
      android:layout_width="0dip"
      android:layout_weight="1">    
      <com.example.sliding.DrawView 
            android:id="@+id/tv_listRow_item1"
            android:tag="tv_listRow_item1_1"
            android:layout_height="0dip"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:gravity="center"
            android:width="100dip"
            android:height="30dip"
            android:background="@drawable/textview_listrow_border"/>
</LinearLayout> 
```

主.java：

```
 ((DrawView)v.findViewById(R.id.tv_listRow_item1)).setOnClickListener(listener);
  private View.OnClickListener listener = new OnClickListener() {

    @Override
    public void onClick(View v) {
    }
} 
```

有什么建议么？感谢您的时间和关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:10:24.373

尝试覆盖

```
 public boolean onTouchEvent(MotionEvent event) {
switch (event.getAction()) {
case MotionEvent.ACTION_DOWN:
// your actions here
}
} 
```

然后调用 invalidate() 函数，该函数将设置一个标志来调用视图的 onDraw()。

# jquery - Jquery JSON 和 XML 同时加载/函数性能提升

> ID：14628621
> 
> 赞同：0
> 
> 时间：2013-01-31T14:53:33.287
> 
> 标签：jquery, xml, json

我有一些 jquery 正在从 xml 文件中加载一些信息以用作字典，然后还有一些 json。我目前有代码工作但是它当前必须等待 xml 加载成功才能加载 json。我想做的是同时加载 xml 和 json，将数据存储在变量中，然后当两者都加载时触发另一个函数。这可能吗？

这是我当前的代码...

```
$(document).ready(function () {
    var dict = {};
    $.ajax({
        type: "GET",
        url: "/_layouts/SiteLocations.xml",
        dataType: "xml",
        success: function (xml) {
            $(xml).find('type').each(function () {
                var key = $(this).find('key').text().replace(/ /g, '_');
                var definition = $(this).find('definition').text();
                //assign key and definition to dictionary
                dict[key] = definition;
            });
            getsites(dict);
        }
    });
});

function getsites( dict) {
        $.getJSON('/_layouts/SiteLocations.ashx', function (json) {
            //handle data
            $.each(json, function (i, item) {             
                //create web friendly id
                var sitetype = item.Type.replace(/ /g, '_');
                //check if list exists, if not create
                if ($('ul[name=' + sitetype).length) {
                    //add list item
                    $('ul[name=' + sitetype).append('<li><a href="' + item.URL + '">' + item.Title + '</a></li>');
                }
                else {
                    //create list and add item   
                    $('#ListContainer').append('<div id="' + sitetype + '"></div>');
                    $('#' + sitetype).append(dict[sitetype] + '<br />');
                    $('#'+sitetype).append('<ul name="' + sitetype + '" />');
                    $('ul[name=' + sitetype).append('<li><a href="' + item.URL + '">' + item.Title + '</a></li>');
                }
            });

        });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:04:12.637

是的，您可以使用[jQuery 延迟对象](http://api.jquery.com/jQuery.when/)：

```
$.when( getJSONstuff, getXMLstuff ).then( function(jsonResp, xmlResp){

    // do stuff here

}) 
```

`getJSONstuff`你的`getXMLstuff`功能在哪里？

**当两个**响应都从服务器返回时，将触发 [anonymous] 回调。

编辑：订单固定。

# javascript - 在 div 中显示 JavaScript 错误而不是在警告框中

> ID：14628623
> 
> 赞同：0
> 
> 时间：2013-01-31T14:53:38.403
> 
> 标签：javascript, html, alert

我有这段 javascript 可以检测弹出式浏览器被禁用并且 javascript 正在工作但我想让一个 div 显示错误而不仅仅是浏览器警报，但我就是不知道为什么它`div`没有出现。任何帮助将不胜感激。谢谢！

**HTML：**

```
<span id="popupBrowserAlert" style="background-color:#ffdd77;display:none;" >Your popup blocker is enabled</span> 
```

**JS：**

```
var wPopup = 'newPopup';
var popUp = window.open('page url', wPopup, 'width=800, height=600, left=24, top=24, scrollbars, resizable');

if (popUp == null || typeof(popUp) == 'undefined') {

    document.getElementById('popupBrowserAlert').style.display = 'block';
}
else {
    popUp.focus();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:43:58.643

你可以简单地使用这个：

```
if (!popUp) {...} 
```

如果 的值为`popUp`、`false`、`undefined`或，`null`则此方法有效。`''``0`

# javascript - 基于 PrimeFaces 的页面中的 Javascript 搞砸导航

> ID：14628625
> 
> 赞同：1
> 
> 时间：2013-01-31T14:53:39.290
> 
> 标签：javascript, ajax, jsf, primefaces

我正在使用一些第三方连接监控代码（ Denis Radin 的[Online JS](https://github.com/PixelsCommander/OnlineJS/)），它与我的页面上的导航元素有交互，我根本不明白。我希望有人可以阐明可能的原因，以便我可以更好地纠正问题。

当 Javascript 代码到位时，我有一个 PrimeFaces commandButton 元素开始间歇性地失败；有时它会将我带到我想要的页面，有时它什么也不做。

```
 <p:commandButton
        icon="icon-back"
        value="#{appMsgs['button.back.to.inbox']}"
        rendered="#{viewBean.back}"
        actionListener="#{controllerBean.selectState}"
        update=":frmMain:mainContent" /> 
```

我还有一个带有 rowSelect 侦听器的 PrimeFaces 数据表，有时单击该侦听器会将我带到错误的页面。

```
 <p:dataTable
        id="widgets"
        value="#{cc.attrs.widgetList}"
        var="widget"
        widgetVar="widgetTable"
        rowKey="#{widget.widgetId}"
        selectionMode="single"
        <p:ajax
            event="rowSelect"
            listener="#{controllerBean.handleWidget}"
            update=":frmMain:mainContent"
            onstart="widgetTable.clearSelection()"
            process=":frmMain:txtInputTimeElapsed :frmMain:txtInputTimeRemaining :frmMain:mainContent" />
    ...
    </p:dataTable> 
```

麻烦的 Javascript 代码如下所示。（澄清一下，当此代码不存在时，该页面确实可以正常工作。）它以 5 秒的间隔 ping 服务器；如果它无法连接，它会显示一个禁用页面并停止计时器的小部件（假设计时器正在运行）。当连接恢复时，它会重新启动计时器并让用户再次访问该页面。是否有人对让我陷入困境的互动有任何可能的理论/建议？（当然，如果您还可以建议如何**更正**它，则奖励积分/闪亮的复选标记，但在这一点上，我会更好地理解我要解决的问题。）

除了麻烦的导航交互之外，Javascript 代码在其他方面都可以完美运行。

* * *

**编辑：根据 BalusC 的评论，我用**[jQuery 实现](http://tomriley.net/blog/archives/111) 替换了旧版本，这导致了一些改进；commandButton 现在可以可靠地工作，但 rowSelect 侦听器仍然容易脱落并将我带到错误的页面。

我包括了新代码，因为它更加简洁。原始的 Javascript 代码在帖子的底部。

* * *

**编辑 2：** 绝对是 e.ajax 调用让我感到困扰。如果我转到带有 dataTable 对象的页面，等待 e.ajax 调用触发，然后单击一行，我总是会去错误的地方。

添加`async:false`到 ajax 调用不仅不起作用，还会完全破坏导航；dataTable 中的行突然不再可选择。

那么，有人对为什么 ajax 和 PrimeFaces 不能很好地相互配合以及我如何纠正它有任何建议吗？

**新的 jQuery 代码：**

```
 (function(e){

            e.fn.checknet=function(config){
                function connectionLost(){
                    wdgNoConnection.show();
                    if(#{bizSimViewBean.started}) {
                        pauseTimer();
                    }
                }
                function connectionExtablished(){
                    wdgNoConnection.hide();
                    if(#{bizSimViewBean.started}) {
                        startTimer();
                    }
                }
                function checkConnection(url){
                    e.ajax({
                        url:url,
                        cache:false,
                        success:function(){
                            if (!window.checknet.conIsActive) {
                                window.checknet.statusChange = true;
                            }
                            window.checknet.conIsActive=true
                        },
                        error:function(){
                            if (window.checknet.conIsActive) {
                                window.checknet.statusChange = true;
                            }
                            window.checknet.conIsActive=false
                        },
                        complete:function(){
                            if (window.checknet.statusChange) {
                                if(window.checknet.conIsActive){
                                    connectionExtablished()
                                }
                                else{
                                    connectionLost()
                                }
                                window.checknet.statusChange = false;
                            }
                        }
                    })
                    setTimeout(
                        function(){checkConnection(window.checknet.config.checkURL)},
                        window.checknet.config.checkInterval
                    )
                }
                if(typeof t==="undefined"){
                    var t={}
                }
                if(typeof config.checkInterval==="undefined"){
                    t.checkInterval=5e3
                }
                if(typeof config.checkURL==="undefined"){
                    t.checkURL=window.location
                }
                else if(config.checkURL.indexOf("http")===-1){
                    t.checkURL="http://"+t.checkURL
                }
                checkConnection(config.checkURL)
            }
        })(jQuery);

        $(document).ready(function(){
            window.checknet={};
            window.checknet.config={};
            $.fn.checknet(window.checknet.config);
        }); 
```

**旧的非 jQuery 代码：**

```
 (function (w){
            w.internetConnection = w.internetConnection || {};

            w.internetConnection.addEvent = function(obj, type, callback){
                if (window.attachEvent){
                    obj.attachEvent('on' + type, callback);
                } else {
                    obj.addEventListener(type, callback);
                }   
            };

            var xmlhttp = new XMLHttpRequest();

            w.internetConnection.isXMLHttp = function(){
                return "withCredentials" in xmlhttp;
            };

            w.internetConnection.isXDomain = function(){
                return typeof XDomainRequest != "undefined";   
            };

            //For IE we use XDomainRequest and sometimes it uses a bit different logic, so adding decorator for this
            w.internetConnection.XDomainLogic = {
                init: function(){
                    xmlhttp = new XDomainRequest();
                    xmlhttp.onerror = function(){
                        xmlhttp.status = 404;
                        w.internetConnection.processXmlhttpStatus();
                    };
                    xmlhttp.ontimeout = function(){
                        xmlhttp.status = 404;
                        w.internetConnection.processXmlhttpStatus();
                    };
                },
                onInternetAsyncStatus: function(){
                    try {
                        xmlhttp.status = 200;
                        w.internetConnection.processXmlhttpStatus();
                    } catch(err){
                        w.internetConnection.fireHandlerDependOnStatus(false);
                        w.onLine = false;
                    }
                },
                checkConnectionWithRequest: function(async){
                    xmlhttp.onload = w.internetConnection.logic.onInternetAsyncStatus;

                    var url = w.onLineCheckURL();

                    xmlhttp.open("GET", url);
                    xmlhttp.send();
                }
            };

            //Another case for decoration is XMLHttpRequest
            w.internetConnection.XMLHttpLogic = {
                init: function(){

                },
                onInternetAsyncStatus: function(){
                    if (xmlhttp.readyState === 4){
                        try {
                            w.internetConnection.processXmlhttpStatus();
                        } catch(err){
                            w.internetConnection.fireHandlerDependOnStatus(false);
                            w.onLine = false;
                        }
                    }
                },
                checkConnectionWithRequest: function(async){
                    if (async) {
                        xmlhttp.onreadystatechange = w.internetConnection.logic.onInternetAsyncStatus;
                    } else {
                        xmlhttp.onreadystatechange = undefined;
                    }

                    var url = w.onLineCheckURL();
                    xmlhttp.open("HEAD", url, async);    
                    xmlhttp.send();

                    if (async === false) {
                        w.internetConnection.processXmlhttpStatus();
                        return w.onLine;
                    }    
                }
            };

            if (w.internetConnection.isXDomain()) {
                w.internetConnection.logic = w.internetConnection.XDomainLogic;
            } else {
                w.internetConnection.logic = w.internetConnection.XMLHttpLogic;
            }

            w.internetConnection.logic.init();

            w.internetConnection.processXmlhttpStatus = function(){
                var tempOnLine = w.internetConnection.verifyStatus(xmlhttp.status);
                w.internetConnection.fireHandlerDependOnStatus(tempOnLine);
                w.onLine = tempOnLine;  
            };

            w.internetConnection.verifyStatus = function(status){
                return ( status >= 200 && status < 300 || status === 304 );  
            };

            w.internetConnection.fireHandlerDependOnStatus = function (newStatus){
                if (newStatus === true && w.onLineHandler !== undefined && (w.onLine !== true || w.internetConnection.handlerFired === false)){
                    w.onLineHandler();  
                }
                if (newStatus === false && w.offLineHandler !== undefined && (w.onLine !== false || w.internetConnection.handlerFired === false)){
                    w.offLineHandler(); 
                }
                w.internetConnection.handlerFired = true;
            };

            w.internetConnection.startCheck = function (){
                setInterval("window.internetConnection.logic.checkConnectionWithRequest(true)",w.onLineCheckTimeout);    
            };

            w.internetConnection.stopCheck = function (){
                clearInterval("window.internetConnection.logic.checkConnectionWithRequest(true)",w.onLineCheckTimeout);  
            };

            w.checkOnLine = function(){
                w.internetConnection.logic.checkConnectionWithRequest(false);
            };

            w.onLineCheckURL = function(){
                return window.location.href;
            };

            w.onLineCheckTimeout = 5000;
            w.checkOnLine();
            w.internetConnection.startCheck();
            w.internetConnection.handlerFired = false;

            w.internetConnection.addEvent(w, 'load', function(){
                w.internetConnection.fireHandlerDependOnStatus(w.onLine);   
            });

            w.internetConnection.addEvent(w, 'online', function(){
                window.internetConnection.logic.checkConnectionWithRequest(true);
            });
            w.internetConnection.addEvent(w, 'offline', function(){
                window.internetConnection.logic.checkConnectionWithRequest(true);
            });
        })(window);

        var offline = false;
        window.onLineHandler = function(){
            if (offline) {
                wdgNoConnection.hide();
                if(#{bizSimViewBean.started}) {
                    startTimer();
                }
            }
            offline = false;
        };
        window.offLineHandler = function(){
            if (!offline) {
                wdgNoConnection.show();
                if(#{bizSimViewBean.started}) {
                    pauseTimer();
                }
            }
            offline = true;
        }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T21:45:21.630

啊哈！

这是 ajax 调用——特别是对 window.location 的 ajax 调用。这与支持 bean 的状态（或那个附近的东西）有关，导致导航混乱。

因此，如果任何其他绝望的灵魂遇到了这个问题，请将 ajax 指向其他地方。

# python - 插入字典后的Python字符串“转换”

> ID：14628629
> 
> 赞同：0
> 
> 时间：2013-01-31T14:53:56.720
> 
> 标签：python, unicode, python-2.7

我得到一个非英文文本，当我将它附加到字典时，它会生成像文本一样的**“\xe0\xa6\xb9\xe0\xa6\xb0\xe0\xa6\x”**。

```
Example:
obj = {}
title = 'non english text'
print "title ...",title
obj['title'] = title
print obj 
```

它的回归：

```
 title... non english text
   {'title': '\xe0\xa6\xb9\xe0\xa6\'} 
```

任何想法，我该如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:57:04.940

您正在查看 UTF-8 编码的数据：

```
>>> '\xe0\xa6\xb9\xe0\xa6\xb0'.decode('utf8')
u'\u09b9\u09b0'
>>> print '\xe0\xa6\xb9\xe0\xa6\xb0'.decode('utf8')
হর 
```

要将其解码为 Unicode 文本，请使用`.decode('utf8')`. 如果您将该字符串直接打印到终端并且您的终端配置为处理 UTF-8，它将显示为您解码的那些字符，但该`dict`表示显示包含数据的 python 文字表示。

请务必阅读[Python Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)和[The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)](http://www.joelonsoftware.com/articles/Unicode.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:09:55.273

这是一个 Unicode 处理错误。在[Python 3](http://docs.python.org/3.3/howto/unicode.html)中，一切`text`都是`unicode`- 试一试，您在非 ascii 字符集中的示例应该可以工作，并且您会省去一些麻烦。

如果你被 Python 2.x 困住了，请注意 Martijn 所说的话——他很成功。

# java - Java - 生成复杂的excel报告

> ID：14628634
> 
> 赞同：1
> 
> 时间：2013-01-31T14:54:11.993
> 
> 标签：java, excel, reporting

我正在尝试更改项目中的excel生成系统。实际上，对于每个报告，数据库中都会保存一个 excel 模板，但是对于每一个微小的变化，我必须工作一天，手动移动所有单元格和公式。不幸的是，它不是像普通表那样简单的报表，而是类似于带有很多子类别的卡片。这里有一个报告示例： ![例子](../Images/43089bb24c94f0d230251cee3307179f.png) 现在，创建这种报告的最佳方法是什么？我尝试使用 Jasper，但存在一些内存问题，并且似乎不太容易创建。最好的方法是将包含所有信息的 bean 传递给报告。非常感谢你们所有人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:16:31.477

如果您想使用 excel 模板，您可以尝试 JXLS。[http://jxls.sourceforge.net/](http://jxls.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:26:27.183

当然你可以使用[Apache POI](http://poi.apache.org/)，[JExcel API](http://jexcelapi.sourceforge.net/)等你可以创建 Excel 文件模板并将数据填充到静态模板文件中。但是，创建报告需要大量工作。

Jasper 有什么记忆问题，而 POI 没有？[Jasper](http://community.jaspersoft.com/project/jasperreports-library)有一个很棒的功能 - [Virtualizer](http://jasperreports.sourceforge.net/sample.reference/virtualizer/index.html)，它允许在磁盘上构建巨大的报告。[iReport](http://community.jaspersoft.com/project/ireport-designer)也是一个非常有用的工具来构建 Excel 模板。此外，您可以在一行中创建一种报表视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-13T13:08:40.707

[Xylophone](https://github.com/CourseOrchestra/xylophone)是复杂 XLS 报告的另一种选择。它建立在 Apache POI 之上。它使用 Excel 报告模板文件和 XML 数据源。

# php - 如何删除sql中的重复记录

> ID：14628635
> 
> 赞同：5
> 
> 时间：2013-01-31T14:54:12.380
> 
> 标签：php, mysql, sql

> **可能重复：**
> [如何使用 SQL 删除重复行？](https://stackoverflow.com/questions/1173963/how-to-delete-duplicate-rows-with-sql)

我有一个包含记录的表，我想删除所有重复的记录

```
DELETE FROM 'table'
WHERE 'field' IN 
(
SELECT 'field' FROM 'table' GROUP BY 'field'
HAVING (COUNT('field')>1)
) 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T15:10:40.220

也许您可以使用命令进行探索，[`DISTINCT`](http://dev.mysql.com/doc/refman/5.0/es/select.html)以仅选择基于字段的唯一记录。

您可以创建一个基于唯一条目的新表。举个例子...

```
CREATE TABLE nonDuplicates  
SELECT DISTINCT * FROM yourTable group by field 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:56:59.230

这给了你不止一个结果：-

```
SELECT field FROM `table`
GROUP BY field
HAVING (COUNT('field)>1 
```

尝试通过以下方式改变这一点：

```
SELECT TOP 1 field
FROM `table`
GROUP BY field 
HAVING (COUNT(field)>1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:09:02.850

首先获取所有重复项并将它们存储在数组中。

```
SELECT field 
FROM `table`
GROUP BY field
HAVING COUNT('field') > 1 
```

现在做你的 php 来保存一个你想要的结果，然后执行

```
DELETE 
FROM `table`
WHERE field IN (your values) AND field != savedID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:10:21.450

MySQL 有一个非常令人讨厌的限制，它不能使用在子选择中正在更新/删除/插入的表。

但是您可以通过加入要删除的表来解决此问题（而不是使用子选择）。

假设您的表中有某种唯一标识符（我假设`id`以下语句中有一个列）：

```
DELETE d 
FROM table_with_duplicates d 
JOIN ( 
   SELECT min(id) as min_id, field
   FROM table_with_duplicates 
   GROUP BY field
) keep ON keep.field = d.field
      AND keep.min_id <> d.id; 
```

这将为每个重复项保留一行（列中具有最低值的`id`那一行）。

如果要删除*所有*重复的行（至少不保留一个），只需删除`AND keep.min_id <> d.id`条件即可。

**编辑**

如果您没有唯一列，但想要删除*所有*重复项（不保留至少一行），那么您可以使用：

```
DELETE d 
FROM table_with_duplicates d 
JOIN ( 
   SELECT field
   FROM table_with_duplicates 
   GROUP BY field
   HAVING count(*) > 1
) del ON del.field = d.field; 
```

# php - 未显示成功消息且 url 未重定向到 activate.php?success

> ID：14628639
> 
> 赞同：0
> 
> 时间：2013-01-31T14:54:28.820
> 
> 标签：php

我很难找出我的 PHP 用户/注册站点的错误。注册后会发送一封带有激活链接的电子邮件，单击该链接时会成功激活帐户，但未显示成功消息。

如果我在浏览器中复制/粘贴激活链接并更改链接中的电子邮件或电子邮件代码中的字母，它将成功地给我所有错误消息。

激活链接如下所示：

**[http://website.com/activate.php?email=useremail@website.com&email_code=2631df446b129480abdbf54f08e8c494](http://website.com/activate.php?email=useremail@website.com&email_code=2631df446b129480abdbf54f08e8c494)**

这是我的 activate.php 的代码

```
<?php 
include 'core/init.php';
logged_in_redirect();
include 'includes/overall/header.php';
?>

<?php 
if (isset($_GET['success']) == true && empty($_GET['success']) == true) {
    ?>
<h3>Thanks, your account has been activated..</h3>
<p>You're free to log in!</p>
<?php
    header('Location: activate.php?success');
    exit();
} else if (isset($_GET['email'], $_GET['email_code']) === true) {

$email      = trim($_GET['email']);
$email_code = trim($_GET['email_code']);

if (email_exists($email) === false) {
    $errors[] = 'Ooops something went wrong, and we couldn\'t find that email adress!';
    } else if (activate($email, $email_code) === false) {
    $errors[] = 'We had problems activating your account';
    } if (empty($errors) === false) {
?>
    <h2>Ooops...</h2>
<?php
    echo output_errors($errors);
} else {
    header('Location: activate.php?success');
    exit();
}
} else {
header('Location: index.php');
exit();
}
?>

<?php include 'includes/overall/footer.php'; ?> 
```

为什么它不给我成功消息并重定向？

URL 不变：[http ://website.com/activate.php?email=useremail@website.com&email_code=2631df446b129480abdbf54f08e8c494](http://website.com/activate.php?email=useremail@website.com&email_code=2631df446b129480abdbf54f08e8c494)

至：website.com/activate.php?success

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:04:36.590

永远，永远不要在命令中使用`HTMLcode <?php PHPcode`语法。 基本上：您首先输出一个字符串（您的 HTML 代码），然后尝试输出标题。**这是不正确的**。标头需要在其他任何事情**之前发送。**您想要做的是将整个文档转换为 PHP（文档的第一个字符应该是），然后使用[heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)语法实际插入 HTML 代码块，并回显它们（所有内容都收集到一个变量中并在最后一行回显你的代码）。避免像您在这里所做的那样不惜一切代价将 PHP 与 HTML 混合。`header`

****`<?php`****

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:05:34.387

您将其设置为 if`activate == true`并将空重定向到该确切页面，因此您将获得重定向循环。

```
if (isset($_GET['success']) == true && empty($_GET['success']) == true) {
        header('Location: activate.php?success');
        exit();
} 
```

尝试

```
if (isset($_GET['success']) == true && empty($_GET['success']) == true) {
       echo "It worked";
       exit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:58:25.587

这条线有点可疑：

```
if (isset($_GET['success']) == true && empty($_GET['success']) == true) { 
```

你确定不是`&& empty($_GET['success']) == false)`吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:10:44.610

您应该测试您的哪个标准不合格，见下文。作为旁注：`exit`如果您没有传递状态，则不需要括号，也不需要打开和关闭 php，这不是必需的：

```
<?php 
include 'core/init.php';
logged_in_redirect();
include 'includes/overall/header.php';

if (isset($_GET['success']) && !empty($_GET['success'])) {
    //in activate.php isset($_GET['success']) add this ouput, 
    //it works / not recommended and never seen.
    //echo "<h3>Thanks, your account has been activated..</h3>";
    //echo "<p>You're free to log in!</p>";
    header('Location: activate.php?success');
    exit;
} else if (isset($_GET['email'], $_GET['email_code'])) {
    $email = trim($_GET['email']);
    $email_code = trim($_GET['email_code']);
    if (email_exists($email) === false) {
        $errors[] = 'Ooops something went wrong, and we couldn\'t find that email adress!';
    } else if (activate($email, $email_code) === false) {
        $errors[] = 'We had problems activating your account';
    } if (empty($errors) === false) {
        echo "<h2>Ooops...</h2>";
        echo output_errors($errors);
    } else {
        header('Location: activate.php?success');
        exit;
    }
} else {
    // The following 2 lines: You should see 1, 0 or nothing
    // From there you should be able to troubleshoot.        
    echo "isset: ".isset($_GET['success'])."<br>";
    echo "Empty: ".empty($_GET['success']);
    //header('Location: index.php');
    exit;
}
include 'includes/overall/footer.php'; 
```

* * *

当我用它测试上面的代码时，`?success`它重定向对我来说很好。

**编辑：**

`empty($_GET['success'] == true)`如果我理解正确并且您在其中使用了上述代码，`activate.php`那么如果它有效，您将收到一个无限的标头重定向错误。你的逻辑需要重新审视。****

# android - 在 Android 上的 Waze 中显示地理点

> ID：14628644
> 
> 赞同：2
> 
> 时间：2013-01-31T14:54:43.287
> 
> 标签：android, android-intent, geolocation, waze

我正在尝试使用 Waze 在地图上显示一个点。

这是意图：

```
String link = geo:?ll=32.26944,34.890442&z=10;
new Intent(Intent.ACTION_VIEW, Uri.parse(link)) 
```

它没有显示点，而是让我进入导航模式。奇怪的是，如果我改用谷歌地图，它就可以了。

这是位智或我的代码的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-26T09:13:07.367

正如你[在这里](https://www.waze.com/about/dev)看到的，他们让它变得更简单了：

**以下是可用的参数：**

```
search for address:         waze://?q=<address search term>
center map to lat / lon:    waze://?ll=<lat>,<lon>
set zoom (minimum is 6):    waze://?z=<zoom> 
```

**例子：**

```
center map to Ayalon and set zoom to 10     waze://?ll=37.44469,-122.15971&z=10
search for address:                         waze://?q=San%20Jose%20California 
```

**和Android API直接：**

> 如果安装了 Waze，以下代码片段示例将启动 Waze 以查找指定位置。如果未安装 Waze，它将在 Market 应用程序上打开 Waze 页面。

```
try
{
   String url = "waze://?q=Hawaii";
    Intent intent = new Intent( Intent.ACTION_VIEW, Uri.parse( url ) );
   startActivity( intent );
}
catch ( ActivityNotFoundException ex  )
{
  Intent intent =
    new Intent( Intent.ACTION_VIEW, Uri.parse( "market://details?id=com.waze" ) );
  startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-20T16:00:20.670

```
String uri = "geo:" + latitude + ","
                    +longitude + "?q=" + latitude
                    + "," + longitude;
startActivity(new Intent(android.content.Intent.ACTION_VIEW,
                    Uri.parse(uri))); 
```

此答案的优点是调用所有处理此功能的应用程序。在手机中，它显示谷歌地图、谷歌地球和位智。

推荐：使用[ShareActionProvider](http://developer.android.com/training/sharing/shareaction.html)！它显示处理地理定位的所有可能应用程序的列表。

资料来源：[这个 StackOverflow 答案](https://stackoverflow.com/questions/12668551/share-location-with-share-intent-activity)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:56:47.030

尝试仅输入 32.26944 34.890442。不要在坐标之间使用逗号

# java - 在设置属性之前将 bean 注入到构造函数 arg

> ID：14628647
> 
> 赞同：0
> 
> 时间：2013-01-31T14:54:57.653
> 
> 标签：java, spring

我有以下bean配置

```
<bean id="firstBean" class="...">
   <property name="someProperty" fef="someOtherBean"/>
</bean>

<bean id="secondBean" class="...">
   <constructor-arg ref="firstBean"/>
</bean> 
```

问题是第二个 bean 尝试从构造函数中的 firstBean 获取 someProperty，但它尚未注入。这两个类都来自我无法更改的库。有没有一种方法可以在将 firstBean 注入到 secondBean 之前强制设置属性？

谢谢

**编辑**

这个问题没有直接的解决方案，所以我用内部管理两个 bean 并提供 secondBean 实例的工厂解决了这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:58:58.200

使第二个 bean 依赖于第一个。

```
<bean id="secondBean" class=".." depends-on="firstBean"> 
```

这样 spring 将确保`firstBean`在实例化之前准备好`secondBean`。

另一种选择是`FactoryBean`使用`@Bean`. 这样您就可以更好地控制实例化过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:59:34.447

你需要看看`InitializingBean`。看看[文档](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/InitializingBean.html)。

> 由 BeanFactory 设置所有属性后需要做出反应的 bean 实现的接口：例如，执行自定义初始化，或仅检查所有强制属性是否已设置。
> 
> 实现 InitializingBean 的另一种方法是指定自定义 init 方法，例如在 XML bean 定义中。有关所有 bean 生命周期方法的列表，请参阅 BeanFactory javadocs。

# android - 在 Google Play 商店中上传多个 apk 文件时出现此错误

> ID：14628652
> 
> 赞同：1
> 
> 时间：2013-01-31T14:55:13.957
> 
> 标签：android, google-play

**错误：APK 版本 3404400,2802221,2401211 支持与其他更高版本 APK 相同的设备。它不会被送达。请停用 APK。**

以前我已经为我的 1.1 版本的 android 应用程序上传了多个 apk

版本代码屏幕分辨率 3404400 720x1280

2802221 320x480

2401211 240x320

现在今天当我上传了版本代码 5404400,4802221,4401211 的相应屏幕分辨率和版本 1.2 。然后我收到这个错误。现在我已经停用了那些较旧的 apk。获取设备（已安装旧版本）的更新通知是否会有任何问题。请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:13:12.470

通过取消激活旧的解决

# php - 将动态列插入网站表？

> ID：14628653
> 
> 赞同：-1
> 
> 时间：2013-01-31T14:55:18.850
> 
> 标签：php, html, sql

我正在开发一个网站，该网站包含一个包含 12 列的表格，每行显示有关学生的各种信息。我正在尝试添加第 13 列，如果学生尚未参加考试，则显示`PASS`,`FAIL`或离开它。`BLANK`

在我的 MSSQL 数据库中，我有两个表。T1（学生）包含有关学生的各种信息，并有一个 keyId（主键），这是网站表用于按学生将行分组在一起的内容。学生完成考试后，会在同一张表中为他分配一个学号（如果不是`NULL`）。这个学号是第二个表中的主键，它有一个值`PASS`或`FAIL`附加到它上面。

编辑：第二个表中的数据通过或失败通过网站插入到另一个选项卡上，教师输入学生编号并选择通过或失败。

Status 列的数据类型（通过或失败）为 enum(string) P & F。

```
<?php 

$objMSSQL = new cMSSQL(); 

//[...] 

for($i = 0; $i < $noOfRows; $i++)
    $noOfRows = $objMSSQL->getAffectedRows();

//[...]

$examStatus = $objMSSQL->getTable("
    SELECT * 
    FROM [Students] 
    INNER JOIN [Exams] ON Exams.studentNo = Students.studentNo
")

if ($examStatus[$i][Status] == 'PASS')
    echo '<td width="80px"> PASS </td>';
elseif ($examStatus[$i][Status] == 'FAIL')
    echo '<td width="80px"> FAIL </td>';
else
    echo '<td width="80px"></td>';

?> 
```

我一直在无休止地寻找解决方案，只是无法弄清楚为什么它没有在网站上正确显示（它看似随机地显示通过或失败，并且没有任何空白）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:03:58.860

在您的 SQL 查询中，您可以在那里添加您的 13 列。就像是：

```
SELECT *, CASE WHEN EXAM_SCORE > 70.00 then 'PASS'
               WHEN EXAM_SCORE < 70.00 then 'FAIL'
               else ''
               END EXAM_SCORE as PassFail
FROM [Students] INNER JOIN [Exams] ON Exams.studentNo=Students.studentNo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:38:37.343

编辑：我已经从上面复制了您的代码，并使用适当的功能添加了您需要的部分。（根据需要调整/编辑/重命名以正确工作/显示）。

这是另一个示例： [使用 PHP 创建动态表](https://stackoverflow.com/questions/7885871/creating-a-dynamic-table-with-php)

您可以以此为例在 PHP 中创建动态表：

```
<?php 

$objMSSQL = new cMSSQL(); 

//[...] 

for($i = 0; $i < $noOfRows; $i++)
    $noOfRows = $objMSSQL->getAffectedRows();

//[...]

$examStatus = $objMSSQL->getTable("
    SELECT * 
    FROM [Students] 
    INNER JOIN [Exams] ON Exams.studentNo = Students.studentNo
")

$result = $stmt->get_result();
while ($row = $result->fetch_assoc()) {
       print '<tr>'
      .'<td>' . $row['col1'] . '</td>'
      .'<td>' . $row['col2'] . '</td>'
      .'<td>' . $row['col3'] . '</td>'
      .'<td>' . $row['colx'] . '</td>'
      .'</tr>';
}

?> 
```

所以它基本上是遍历你的查询结果。由于您要加入学生表，因此您将可以访问通过/失败数据。您可能不想使用“*”，而是列出您想要从每个表中获得的列。

现在，我不确定您的其余代码是否正确或您需要什么（即 FOR 循环），需要 WHILE 循环来创建表并输出数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:48:36.017

如果您需要可变/动态的列数，您应该查看垂直表格布局

# iphone - 为 OpenCV Stitcher 提供相机姿态

> ID：14628663
> 
> 赞同：1
> 
> 时间：2013-01-31T14:55:48.793
> 
> 标签：iphone, ios, opencv, panoramas, image-stitching

我正在尝试使用 OpenCV 将 iPhone 上拍摄的图像中的 360° 全景图拼接在一起。

拼接算法运行良好，但没有为我未捕获的区域提供任何空白空间。我可以从手机接收姿态（俯仰、偏航、滚动）信息，并相信这将是足够的额外信息来确定我创建的全景图中应包含多少空白空间，但我找不到提供此信息的方法到缝合器。

我想知道：

*   OpenCV 是否允许我向拼接器提供相机信息？
*   OpenCV 会在考虑空白的情况下创建 360° 全景图吗？
*   如果没有，您能否建议一个可以为编译的全景图添加正确数量的空白空间的后处理步骤？

# c++ - 命名空间别名与定义的实际优势

> ID：14628665
> 
> 赞同：2
> 
> 时间：2013-01-31T14:55:53.817
> 
> 标签：c++, namespaces, macros, coding-style, c-preprocessor

编辑：我打算重构一些代码，并用`define`命名空间别名替换。我不能这样做只是因为“宏是邪恶的”。我需要解释我*为什么*要做出改变，如果我不这样做会出什么问题*。*

抛开“宏是邪恶的”的立场不谈，`#define`over a namespace alias 的缺点是什么？

拿代码

```
#define MY_NAMESPACE my_namespace 
```

相对

```
namespace MY_NAMESPACE = my_namespace; 
```

有别名的原因不在问题的范围内。您还可以假设命名空间的名称足够独特以至于它不会出现在其他任何地方（即它只是引用该命名空间，它不能 - 现在不能，将来不能 - 引用变量或类或无论如何），所以那里不会有歧义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:46:48.250

在这种特殊情况下，这取决于。如果使用命名空间别名可以解决问题，那么出于所有通常的原因，无论如何都更喜欢它而不是宏。但两者做的事情完全不同。您不能使用其别名打开命名空间，即：

```
namespace XYZ_ver1 {}
namespace XYZ = XYZ_ver1;

namespace XYZ {     //  Illegal!
} 
```

这适用于宏；事实上，您可以在命名空间出现之前定义宏。如果你需要这个，那么你需要使用宏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:50:47.600

一般来说，我看到命名空间别名的唯一优点是它们可以在任何地方。举个例子：

```
namespace a
{
    namespace that_is_a_great_namespace
    {
        namespace b = that_is_a_great_namespace;
    }
}

namespace that_is_a_great_namespace {} 
```

您将无法定义将转换`a::that_is_a_great_namespace`为`a::b`没有副作用的宏。在这里，`that_is_a_great_namespace`也将转换为`b`. 在这些情况下，命名空间别名有助于解决名称冲突。

但是，如果您已经使用`#defines`并且它已经可以工作，那么针对这种罕见的情况重构您的代码可能没有用。

# c# - 遍历同名元素并通过另一个属性值返回属性

> ID：14628670
> 
> 赞同：0
> 
> 时间：2013-01-31T14:56:06.923
> 
> 标签：c#, wpf, xml, linq, xattribute

我正在尝试使用 LINQ 查找具有特定属性值的特定元素并返回另一个属性值。如果我将要查找的元素的名称更改为独特的名称并以这种方式搜索它，它会返回正确的值。不幸的是，我无法实时执行此操作，因为我无法控制 XML 格式。那么，如何让 LINQ 遍历每个元素“行”并返回我正在寻找的属性。

编辑：错误是空引用

XML（示例）：

```
 <currentTime>2013-01-31 12:34:49</currentTime>
  <result>
   <rowset name="kills" key="killID" columns="killID,solarSystemID,killTime,moonID">
    <row killID="28024540" solarSystemID="30000967" killTime="2013-01-25 21:41:00" moonID="0">
     <victim characterID="888493667" characterName="Syrsyrian" corporationID="98152004" corporationName="Eviscerate." allianceID="0" allianceName="" factionID="0" factionName="" damageTaken="20220" shipTypeID="4306" />
     <rowset name="attackers" columns="characterID,characterName,corporationID,corporationName,allianceID,allianceName,factionID,factionName,securityStatus,damageDone,finalBlow,weaponTypeID,shipTypeID">
      <row characterID="1062593035" characterName="cal dasiri" corporationID="310281086" corporationName="Un4seen Development" allianceID="1566707582" allianceName="Republic Alliance" factionID="0" factionName="" securityStatus="5.00586641950613" damageDone="2286" finalBlow="1" weaponTypeID="2629" shipTypeID="24698" />
      <row characterID="0" characterName="" corporationID="98074388" corporationName="The New Lunar Republic" allianceID="0" allianceName="" factionID="0" factionName="" securityStatus="0" damageDone="9620" finalBlow="0" weaponTypeID="0" shipTypeID="17404" />
      <row characterID="584494552" characterName="Diesel24" corporationID="753753190" corporationName="Space-Bar" allianceID="1566707582" allianceName="Republic Alliance" factionID="0" factionName="" securityStatus="3.5" damageDone="2322" finalBlow="0" weaponTypeID="24702" shipTypeID="24702" />
      <row characterID="90905050" characterName="Thomas Shaefer" corporationID="187930037" corporationName="The Partisan Brigade" allianceID="1566707582" allianceName="Republic Alliance" factionID="0" factionName="" securityStatus="4.1" damageDone="1940" finalBlow="0" weaponTypeID="27315" shipTypeID="16227" />
      <row characterID="624484955" characterName="Full Penetration" corporationID="187930037" corporationName="The Partisan Brigade" allianceID="1566707582" allianceName="Republic Alliance" factionID="0" factionName="" securityStatus="3.1" damageDone="1788" finalBlow="0" weaponTypeID="27371" shipTypeID="16227" />
      <row characterID="1695597027" characterName="Algazi" corporationID="187930037" corporationName="The Partisan Brigade" allianceID="1566707582" allianceName="Republic Alliance" factionID="0" factionName="" securityStatus="1.5" damageDone="1258" finalBlow="0" weaponTypeID="1818" shipTypeID="24698" />
      <row characterID="92087835" characterName="Yasin Stavrouski" corporationID="310281086" corporationName="Un4seen Development" allianceID="1566707582" allianceName="Republic Alliance" factionID="0" factionName="" securityStatus="0.4" damageDone="561" finalBlow="0" weaponTypeID="8819" shipTypeID="587" />
      <row characterID="581357145" characterName="Nykitah" corporationID="187930037" corporationName="The Partisan Brigade" allianceID="1566707582" allianceName="Republic Alliance" factionID="0" factionName="" securityStatus="5" damageDone="445" finalBlow="0" weaponTypeID="24702" shipTypeID="24702" />
      <row characterID="92692957" characterName="Mokey PYD" corporationID="98153124" corporationName="Plots Your Demise" allianceID="0" allianceName="" factionID="0" factionName="" securityStatus="0" damageDone="0" finalBlow="0" weaponTypeID="5399" shipTypeID="594" />
      <row characterID="90511370" characterName="Rae'll" corporationID="187930037" corporationName="The Partisan Brigade" allianceID="1566707582" allianceName="Republic Alliance" factionID="0" factionName="" securityStatus="-0.4" damageDone="0" finalBlow="0" weaponTypeID="527" shipTypeID="670" />
    </rowset>
    <rowset name="items" columns="typeID,flag,qtyDropped,qtyDestroyed,singleton">
      <row typeID="3090" flag="31" qtyDropped="0" qtyDestroyed="1" singleton="0" />
      <row typeID="31564" flag="94" qtyDropped="0" qtyDestroyed="1" singleton="0" /> 
```

和查询：

```
XAttribute two = (from kd1 in loadkillData1.Elements("row")
                  where (string)kd1.Attribute("characterName") == "cal dasiri"
                  select kd1.Attribute("allianceName")).FirstOrDefault();

string derp2 = two.Value;
label10.Content = derp2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:22:28.297

要获取 的所有实例`row`，请使用`xd.Descendants()`

```
XAttribute two = (from kd1 in xd.Descendants("row")
                  where (string)kd1.Attribute("characterName") == "cal dasiri"
                  select kd1.Attribute("allianceName")).FirstOrDefault(); 
```

# java - 何时调用 ShutdownHook？

> ID：14628672
> 
> 赞同：0
> 
> 时间：2013-01-31T14:56:19.050
> 
> 标签：java, multithreading, runtime

我有一个关于`Runtime.getRuntime().addShutdownHook()`.

假设我在 main 中启动了两个线程。两个线程都在处理一个集合，`List<String> commonColection`.

当我按下时，`Ctrl+C`我想保存这个集合。我的问题是：在调用 ShutdownHooks 之前线程是否已停止，或者我是否需要明确终止我的线程并在此之后保存我的集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:19:34.747

> 当虚拟机开始其关闭序列时，它将以某种未指定的顺序启动所有已注册的关闭挂钩并让它们同时运行。当所有钩子都完成后，如果 finalization-on-exit 已启用，它将运行所有未调用的终结器。最后，虚拟机将停止。

来自：[Oracle 文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)

当我读到这篇文章时，你将不得不中止你的线程（*不是* `Thread.abort`！而是使用一些方法优雅地结束它们！）并保存你的集合。至少你必须确保你保存了正确的集合状态。

如果线程不是“无限的”并且没有守护程序，您可以让它们完成。但我不建议这样做，因为关闭挂钩应该很快返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:34:59.067

从您`shutdownHook()`那里，您可以通过发出停止的信号来优雅地终止您的线程。否则，如果您的线程是`daemon threads`，那么 JVM 将不会等待它们完成。`shutdownHook()`调用后按ctrl+c退出。请参阅此[javadoc 以了解守护程序线程](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#setDaemon%28boolean%29)行为。

# android - 从 URL 下载图片有些问题

> ID：14628676
> 
> 赞同：1
> 
> 时间：2013-01-31T14:56:23.467
> 
> 标签：android, bitmap, 32-bit, 24-bit

我正在使用以下方法从 URL 下载图像

```
private Bitmap getBitmap(String url) 
    {
        File f=fileCache.getFile(url);
        Log.d("getBitmap", "getBitmap"+url);
        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)
            return b;

        //from web
        try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);

            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();

            bitmap = BitmapFactory.decodeStream(is);
            return bitmap;
        } catch (Exception ex){
            ex.printStackTrace();
            return null;
        }
    } 
```

对我来说，这种方法适用于与图像对应的所有 URL **但**问题是它不适用于以下

[http://downloads.hyperin.com/hyperin-portal/imageserver/news/13442/ginatricot.jpg](http://downloads.hyperin.com/hyperin-portal/imageserver/news/13442/ginatricot.jpg)

适用于以下网址

[http://downloads.hyperin.com/hyperin-portal/imageserver/news/12042/Myfit_liity_nyt.jpg](http://downloads.hyperin.com/hyperin-portal/imageserver/news/12042/Myfit_liity_nyt.jpg)

为了调试，我在浏览器中打开图像并将其下载到我的电脑上，检查其属性并发现这是 32 位图像，其他成功下载的图像是 24 位的。我不知道为什么相同的代码无法下载成功下载 24 位图像的 32 位图像。我的代码遗漏了什么？android 不支持 32 位图像吗？或者是什么？请建议我找出解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:58:59.260

[http://downloads.hyperin.com/hyperin-portal/imageserver/news/13442/ginatricot.jpg](http://downloads.hyperin.com/hyperin-portal/imageserver/news/13442/ginatricot.jpg)

不能为这个工作.. 没有图片 ^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:41:31.120

```
public static Bitmap getImagefromURL(String url) {
HttpURLConnection connection  = (HttpURLConnection) url.openConnection();
InputStream is = connection.getInputStream();
Bitmap img = BitmapFactory.decodeStream(is);  
return img;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:20:08.940

不要重新发明轮子，试试这个[https://github.com/koush/UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)

# mysql - Mysql，使用聚合函数进行分区

> ID：14628678
> 
> 赞同：1
> 
> 时间：2013-01-31T14:56:27.790
> 
> 标签：mysql, performance, aggregate-functions, partitioning

我的分区表是这样描述的：

```
 CREATE TABLE `event_data` (id int(11) NOT NULL AUTO_INCREMENT,
  ...
  Timestamp int(10) unsigned NOT NULL,
  ...
  ...
  CurrentDate date NOT NULL,
  KEY `id_index` (`id`),
  KEY `ix_filter` (`Action`,`Location`),
  KEY `ix_time` (`Timestamp`)
)ENGINE=MyISAM AUTO_INCREMENT=1176568 DEFAULT CHARSET=latin1
/*!50500 PARTITION BY RANGE  COLUMNS(CurrentDate)
(PARTITION p20130106 VALUES LESS THAN ('2013-01-06') ENGINE = MyISAM,
 PARTITION p20130113 VALUES LESS THAN ('2013-01-13') ENGINE = MyISAM,
 PARTITION p20130120 VALUES LESS THAN ('2013-01-20') ENGINE = MyISAM) */ 
```

我正在尝试执行以下查询：

`explain partitions select min(Timestamp) from event_data where CurrentDate < "2013-01-06";`

```
+----+-------------+------------+------------+------+---------------+------+---------+------+--------+-------------+
| id | select_type | table      | partitions | type | possible_keys | key  | key_len | ref  | rows   | Extra       |
+----+-------------+------------+------------+------+---------------+------+---------+------+--------+-------------+
|  1 | SIMPLE      | event_data | p20130106  | ALL  | NULL          | NULL | NULL    | NULL | 512983 | Using where |
+----+-------------+------------+------------+------+---------------+------+---------+------+--------+-------------+ 
```

和

`explain partitions select min(Timestamp) from event_data;`

```
+----+-------------+-------+------------+------+---------------+------+---------+------+------+------------------------------+
| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | Extra                        |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+------------------------------+
|  1 | SIMPLE      | NULL  | NULL       | NULL | NULL          | NULL | NULL    | NULL | NULL | Select tables optimized away |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+------------------------------+ 
```

似乎在不指定分区的情况下查询速度更快（我知道最小值总是在第一个分区中）

`select min(Timestamp) from event_data where CurrentDate < "2013-01-06";`

```
+----------------+
| min(Timestamp) |
+----------------+
|     1321747200 |
+----------------+
1 row in set (0.16 sec) 
```

和

`select min(Timestamp) from event_data ;`

```
+----------------+
| min(Timestamp) |
+----------------+
|     1321747200 |
+----------------+
1 row in set (0.00 sec) 
```

指定分区的查询是否应该更快，因为它只需要在单个分区中查看最小值，而不是在所有分区中搜索的最小值？

指示分区时似乎没有使用时间戳索引，但是为什么呢？？？我有每个分区文件的 MYI 文件，我确信索引是为每个这样的文件建立的......

我也知道索引在没有聚合函数的情况下用于不同的选择查询（基准测试）。

**更新**

我发现了这个错误报告[http://bugs.mysql.com/bug.php?id=66187](http://bugs.mysql.com/bug.php?id=66187)，这与我的问题有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:50:23.633

我发现了一个严重的错误报告[http://bugs.mysql.com/bug.php?id=66187](http://bugs.mysql.com/bug.php?id=66187) 描述了同样的问题。我已对此错误添加评论

# azure - 我可以通过 ACS 获取 Gmail 电子邮件地址吗？

> ID：14628683
> 
> 赞同：0
> 
> 时间：2013-01-31T14:56:48.587
> 
> 标签：azure, wif, acs

0

你好

ACS 今天可以返回 Gmail 地址吗？

听起来之前可以退回。

但现在我用

var principal = Thread.CurrentPrincipal

并在Thread.CurrentPrincipal中添加watch，我只能找到我的名字，但我找不到电子邮件地址。

有人可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:02:52.527

是的。用户的 GMail 地址应该作为声明之一出现。请参阅[http://msdn.microsoft.com/en-us/library/windowsazure/gg185929.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg185929.aspx)。

# android - 是否有解决此自定义 AnimationRunnable 的“更轻松”的方法？

> ID：14628689
> 
> 赞同：0
> 
> 时间：2013-01-31T14:57:07.467
> 
> 标签：android

我已经在这个问题上工作了几天，但一直无法解决这个问题。

我有许多动画都实现为 Runnables，当用户使用应用程序时，它们将持续运行。从 logo_animation000 到 115 和 z_animation000 到 515 有 4 种不同的动画：

*   ConnectingAnimation（在应用程序连接到设备时运行）
*   ConnectingCompleteAnimation（连接完成时运行一次）
*   TransitiontoSleepingAnimation(当应用状态改变时运行一次)
*   SleepingAnimation（在应用程序状态为：“Sleeping”时运行

这些动画太大而无法使用常规动画列表来工作，因此我被迫使用自己的实现。我用以下课程“解决”了这个问题：

```
 abstract class MyAnimationRunnable implements Runnable {
        protected final int interval;
        protected final String pattern;
        protected final OptimisedImageView view;
        protected long firstFrameAt;
        protected int current;
        protected Drawable drawable;
        protected int frameCounter = 0;

        public MyAnimationRunnable(int interval, int firstFrame, String pattern, OptimisedImageView view) {
            this.interval = interval;
            this.pattern = pattern;
            this.view = view;
            this.current = firstFrame;
            this.firstFrameAt = SystemClock.elapsedRealtime();
            handler.post(this);
        }

        @Override
        public void run() {
            final String name = String.format(Locale.ENGLISH, pattern, current);
            final int id = getResources().getIdentifier(name, "drawable", getPackageName());
            if (id != 0) {
                final Drawable drawable = getResources().getDrawable(id);
                view.setImageDrawable(drawable);
            }
            current++;
            if (runAgain()) {
                frameCounter++;
                long nextAt = firstFrameAt + (frameCounter * interval);
                long delay = nextAt - SystemClock.elapsedRealtime() - 1;
                if (delay > 0) {
                    handler.postDelayed(this, delay);
                } else {
                    this.run();
                }
            }
        }

        protected abstract boolean runAgain();
    };

   private void startSleepingAnimation() 
    {

        zzzAnimation = new MyAnimationRunnable(50, 1, "z_animation%04d", zzzImageView) {
            @Override
            protected boolean runAgain() {
                if (current == 510) {
                    current = 470; // this seems to fit into the infinite loop.
                }
                return true;
            }
        };
    }

    private void startConnectingAnimation() {
        handler.removeCallbacks(connectingCompleteAnimation);
        handler.removeCallbacks(zzzAnimation);
        handler.removeCallbacks(transitionToSleepingAnimation);
        connectingResourceCount = 1;
        zzzImageView.setImageBitmap(null);
        connectingAnimation = new MyAnimationRunnable(50, connectingResourceCount, "logo_animation%04d", babyImageView) {
            @Override
            protected boolean runAgain() {
                if (current == 30) {
                    current = 1;
                }
                connectingResourceCount = current;
                return true;
            }
        };
    }

    // The remaining two animations have been left out since this oughta be sufficient for understanding the code. 
```

这在我的三星 Galaxy S3 上运行良好。然而，在旧手机上，这会在 20-30 秒后导致崩溃。关于如何使这段代码更轻、更高效的任何想法？

# javascript - 回发页面时避免 Javascript 错误

> ID：14628690
> 
> 赞同：0
> 
> 时间：2013-01-31T14:57:06.957
> 
> 标签：javascript, jquery, asp.net, ajax, radeditor

我在我的 ASP.NET 4.0 应用程序中使用 Telerik RAD 编辑器控件，该应用程序位于任何更新面板之外。在同一页面中，我使用了几个 ModalPopUps 和更新面板来防止意外的完整回发。有几个从 Javascript 函数调用的 Pagemethods 以及几个服务器端按钮单击事件，它们也从 javascript 函数调用。在此过程中，Page 经常抛出以下突出显示的 Javascript 错误，并且在没有 javascript 函数进一步继续或进一步调用任何服务器端方法或事件之后，程序已被挂起。一旦它托管在本地服务器中并且发生以下定义的错误，那么应用程序将通过进一步的 javascript 调用来发挥作用。

**错误消息来自：**

```
function Sys$WebForms$PageRequestManager$_endPostBack(error, executor, data) {
        if (this._request === executor.get_webRequest()) {
            this._processingRequest = false;
            this._additionalInput = null;
            this._request = null;
        }
        var handler = this._get_eventHandlerList().getHandler("endRequest");
        var errorHandled = false;
        if (handler) {
            var eventArgs = new Sys.WebForms.EndRequestEventArgs(error, data ? data.dataItems : {}, executor);
            handler(this, eventArgs);
            errorHandled = eventArgs.get_errorHandled();
        }
        if (error && !errorHandled) {
            **throw error;**
        }
    } 
```

**上面标记的区域会引发错误。**

我已经尝试过以下定义的方法，但还不能最终确定相同的方法，即停止反映此错误或跳过此错误，以便它不会产生任何影响应用程序正常流程周期的效果。

**尝试过的解决方案 1.** 首先，我尝试在更新面板下注册控件并在页面加载中执行任何服务器端事件。

**ScriptManager ScrMgr = new ScriptManager(); ScrMgr.RegisterAsyncPostBackControl(this.LstBoxXSD);**

**尝试过的解决方案 2。** 其次，我尝试将控件与更新面板中的异步触发器绑定。

```
**<asp:AsyncPostBackTrigger ControlID="LstBoxXSD" EventName="SelectedIndexChanged"/>** 
```

**尝试过的解决方案 3。** 接下来，需要使用来自 jquery 的 3rd 方编辑器控件的 KeyDown 事件，并且我已经使用“KeyDown”事件在该编辑器控件中挂钩了 IFrame，但是一旦更新面板执行任何异步回发，它就会取消绑定，所以我已经在 J​​Query 中完成了以下代码来维护编辑器中的 iframe 和它的 KeyDown 事件之间的挂钩绑定。

```
**<script language="javascript" type="text/javascript">
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);
    function EndRequestHandler(sender, args) {
        $(document).ready(function () {
            $(function () {
                $('#3rdPartyControl_contentIframe').contents().find("body").bind("keydown", function (e) {
                    e = e || window.event; // because of Internet Explorer quirks... 
                    var code = e.which || e.charCode || e.keyCode; ;
                    if (code == 49 && !e.altKey && !e.ctrlKey && !e.shiftKey) {
                        // alert(code);
                    } else if (code == 65 && e.altKey) {
                        //   alert(code);
                    }
                    else if (code == 83 && e.altKey) {                       
                        SelectElement();
                    }
                    else if (code == 80 && e.altKey) {
                        if (String($find("3rdPartyControl").getSelectionHtml().trim()).length > 0) {
                            RemoveParentElem();
                        }
                    }
                    else if (code == 82 && e.altKey) {
                        if (String($find("3rdPartyControl").getSelectionHtml().trim()).length > 0) {
                            RemoveElem();
                        }
                    }
                    else {
                    }
                });
            });
        });
    }
</script>** 
```

重要的是我在 Body Tag 之后完成了上面的 JQuery 代码。请帮助我解决上述问题的可能解决方案，我可以停止生成此错误或无论如何绕过错误。因为它完全推迟了项目的完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:58:47.950

这是为了第一次从更新面板子控件事件中编写一些会话变量。为避免此解析错误，应遵循以下解决方案之一： 1\. Page.Trace.IsEnabled = false; 应该在同步页面加载和异步页面加载中禁用跟踪。if(!Page.IsPostBack) { Page.Trace.IsEnabled=false; } else if (ScriptManager.GetCurrent(this.Page).IsInAsyncPostBack) { Page.Trace.IsEnabled = false; }

2\. 在页面属性中添加 EnableEventValidation="false"。

3.第一次加载页面时将初始值放入会话变量中以创建cookie。

# ruby-on-rails - 未定义的方法每个导轨错误

> ID：14628692
> 
> 赞同：5
> 
> 时间：2013-01-31T14:57:10.097
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, ruby-on-rails-3.2

[我正在通过http://ruby.railstutorial.org](http://ruby.railstutorial.org)上的教程尝试 ruby​​ on rails 。我到了可以创建用户并将他们的姓名和头像显示在以下位置的地步：

```
http://localhost:3000/users/1 
```

现在我想在用户访问时显示所有用户：

```
http://localhost:3000/users/ 
```

这是我的控制器：

```
class UsersController < ApplicationController

  def index
    @user = User.all
  end      

  #...
end 
```

这是我的看法。

```
#View for index action in user's controleer

<h1>All users</h1>

<ul class="users">
  <% @users.each do |user| %>
    <li><%= user.content %></li>
  <% end %>
</ul> 
```

我收到以下错误。

```
undefined method `each' for nil:NilClass 
```

有人可以告诉我为什么索引页面没有按我的意愿工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-31T15:09:23.550

问题来自`@users`不存在的变量：

在您的索引操作中，您设置`@user`为所有用户：

```
def index
  @user = User.all
end 
```

按照惯例，当我们从数据库中检索多个条目时，我们使用复数名称，这就是您`@users`在视图中调用（注意“s”）的原因。只需将您的重命名`@user`为`@users`就可以了；）

```
def index
  @users = User.all
end 
```

# c# - .NET 本地化不起作用

> ID：14628695
> 
> 赞同：1
> 
> 时间：2013-01-31T14:57:24.893
> 
> 标签：c#, .net, winforms, localization, internationalization

我创建了一个本地化的 winforms 应用程序（在 VS2008 中），方法是在相关语言的设计器中将`Localizable`属性设置为`true`然后编辑我的 Mainform 的文本等。

我还有一些应用程序需要的本地化字符串（例如，用于显示消息框等......）。我存储在一个名为的文件中的那些字符串

*   字符串.resx
*   字符串.de.resx
*   ... 等等

当我通过它设置应用程序的语言时，`Thread.CurrentThread.CurrentCulture`它似乎可以工作，但仅限于 Visual Studio。当我创建一个发布可执行文件并双击它时，Winforms 总是使用默认语言（即使我`Thread.CurrentThread.CurrentCulture = ...`在那里硬编码......

我也试过设置`strings.Culture`and `Thread.CurrentThread.CurrentUICulture`，也没有用

谢谢任何帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:14:47.760

确保您的 EXE 可以访问额外创建的 DLL。

# colors - 使用 BitBlt 以 YUV 格式捕获屏幕

> ID：14628697
> 
> 赞同：0
> 
> 时间：2013-01-31T14:57:27.693
> 
> 标签：colors, rgb, yuv, bitblt

我目前正在使用 BitBlt 函数来捕获屏幕，然后对其进行编码。由于我的编码器使用 YUV420 格式作为输入，我需要在编码之前将数据从 RGB 转换为 YUV。我想知道是否有任何方法可以以 YUV 格式而不是 RGB 格式捕获屏幕？

谢谢，杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T06:11:19.593

我会尝试回答这个问题，虽然我不完全知道 BitBlt 是如何工作的，因为我自己还没有让它工作。

但是这里。

据我了解，BiBlt 是从图形卡中捕获的，这意味着它会走得很快，因为没有回旋处。这应该意味着如果您以 RGB 显示（PC 通常会这样做），您将获得相同的格式。

因此，如果您想要 YV12，则必须在使用图像之前进行下采样。

我猜是这样的。

CaptureBitBlt 到 IMG。将 IMG 转换为 YV12。编码 IMG。

好吧，这看起来很丑，但希望你明白我的意思。在使用图片之前，您必须进行转换。

把这个和一粒盐放在一起，我可能在树林里，但我认为应该这样做。

# asp.net - 2 个列表，使用下拉选择 1 个列表中的剩余值

> ID：14628698
> 
> 赞同：0
> 
> 时间：2013-01-31T14:57:33.380
> 
> 标签：asp.net, drop-down-menu

因此，在此页面中，它将显示当前分包商正在处理此特定 BOQ 的列表。这存储在“allSubContractors”中

这在屏幕上显示为列表。然后我想添加一个下拉框，允许用户选择任何剩余的分包商并将它们添加到列表中。

到目前为止，我已经完成了第一部分的工作，其中列出了在 BOQ 上工作的当前分包商列表，但对于下拉列表，我得到的结果与我想要的完全相反。下拉显示当前分包商的相同列表，我想要列表中的剩余部分。

我正在使用：

```
`List<string> allSubContractors = new List<string>();
        ClarkeDBDataContext db = new ClarkeDBDataContext();
        allSubContractors = (from BoqSUBContractors in db.BOQ_SubContractors
                          where BoqSUBContractors.Bill_Of_Quantity_id == this.boqId
                          select BoqSUBContractors.Sub_Contractor.Company_Name).ToList();

        repeaterShowSubContractorName.DataSource = allSubContractors;
        repeaterShowSubContractorName.DataBind();

    List<Sub_Contractor> availableSubContractors = new List<Sub_Contractor>();
    ClarkeDBDataContext db1 = new ClarkeDBDataContext();
    availableSubContractors = (from sc in db1.Sub_Contractors
                               from bsc in db1.BOQ_SubContractors
                               where sc.id == bsc.Sub_Contractor_id
                               && bsc.Bill_Of_Quantity_id == this.boqId
                               select sc).ToList();

    DropDownListSubContractors.DataSource = availableSubContractors;
    DropDownListSubContractors.DataBind(); 
```

我正在尝试类似的东西：

```
 List<Sub_Contractor> availableSubContractors = new List<Sub_Contractor>();
    availableSubContractors = (from sc in db.Sub_Contractors
                               select sc.id).ToList()
                               .Except(allSubContractors); 
```

但是没有快乐，有什么建议吗？塔克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:08:52.560

如果你尝试怎么办

```
List<Sub_Contractor> availableSubContractors = 
(
   from sc in db1.Sub_Contractors
   join bsc in db1.BOQ_SubContractors
   on sc.id equals bsc.Sub_Contractor_id
   where bsc.Bill_Of_Quantity_id equals this.boqId
   select sc
).ToList(); 
```

?

# c# - 如何在 ASP.Net 中使用 URL 重写

> ID：14628701
> 
> 赞同：2
> 
> 时间：2013-01-31T14:57:44.383
> 
> 标签：c#, asp.net, url-routing, asp.net-routing

我正在尝试使用简单的 URL 重写。

我正在尝试将页面加载时的 URL 缩短为其简化版本（无文件扩展名）。我没有在我的 URL 中使用任何查询字符串。

这是当前网址：

```
http://localhost:64341/Report/MainPage.aspx 
```

当页面加载时，我想看到这个：

```
http://localhost:64341/Report/MainPage 
```

这是我在 Global.asax 文件中的代码：

```
protected void Application_Start(object sender, EventArgs e)
    {
        // Code that runs on application startup

        RegisterRoutes(RouteTable.Routes);

    }

    public static void RegisterRoutes(RouteCollection routeCollection)
    {
        routeCollection.MapPageRoute("RouteForCustomer", " MainPage", "~/ MainPage.aspx");
    } 
```

页面加载时如何在后面的代码中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T07:00:25.433

尝试 `Context.RewritePath("http://localhost:64341/Report/MainPage", true);`

检查此博客 [http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

# objective-c - 属性综合和 iVars

> ID：14628705
> 
> 赞同：0
> 
> 时间：2013-01-31T14:57:52.887
> 
> 标签：objective-c, properties, ivar, synthesize

*免责声明：我对 Objective-C 很陌生*

我有几个与@property 和@synthesize 相关的问题。

假设我有财产

```
@property (strong, nonatomic) NSString *name; 
```

1-我知道在 Xcode 4.4+ 上，您可以跳过对属性执行 @synthesize 的操作，因为它们是自动完成的。所以我假设生成的*iVar*应该和产权的名字一样吧？一般来说，如果我这样做`@synthesize name;`iVar*将*与属性名称相同？

2- 我知道`@synthesize name = _name;`当我手动声明了一个名为 _name 的私有变量并且我想让编译器将它用作我的属性的*iVar*时使用它。我需要知道，如果我`@synthesize name = _name;` **没有**实际声明一个私有变量会发生什么。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:00:59.277

1.  如果我没记错的话，生成的默认 iVar 以下划线开头。即：该属性的默认 iVar`name`将是`_name`.
2.  `_name`将为属性生成iVar `name`。当@synthesize 为您完成工作时，无需手动创建任何 iVar，但如果您确实想手动添加它们不会有任何问题。

# javascript - HTML/CSS 等待页面加载

> ID：14628707
> 
> 赞同：0
> 
> 时间：2013-01-31T14:57:56.363
> 
> 标签：javascript, html, css, animation, webpage

我有一个带声音的 CSS 动画，但是，当页面最初加载时，声音会延迟。我想要一种方法来等到页面上的所有内容都加载完毕后再加载页面。我怎样才能做到这一点？我在这里找到了一个脚本：http: [//css-tricks.com/snippets/jquery/display-loading-graphic-until-page-fully-loaded/](http://css-tricks.com/snippets/jquery/display-loading-graphic-until-page-fully-loaded/)但我想知道是否有更简单的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:01:45.217

您提供的链接是执行此操作的最简单和最好的方法。无需寻找其他任何东西。

```
<script>
    // Wait for window load
    $(window).load(function() {
        // Animate loader off screen
        $("#loader").animate({
            top: -200
        }, 1500);
    });
</script> 
```

# sql - Access/VBA 3075 - Iif 中的参数数量错误

> ID：14628708
> 
> 赞同：0
> 
> 时间：2013-01-31T14:57:59.017
> 
> 标签：sql, vba, ms-access, ms-access-2010, iif

```
iif((([START DATE]<(cdate(format(year() & [WinterStartMonth] & [WinterStartDay],"####/##/##")))) AND ([START DATE]>(cdate(format(year() & [SummerStartMonth] & [SummerStartDay], "####/##/##"))))), (DateAdd("d", [WinterInspectionDropDead], [START DATE])), (DateAdd("d", [SummerInspectionDropDead], [START DATE]))) AS dropDead 
```

有人能发现问题吗？我想我已经用括号去了OTT，但我似乎无法摆脱错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:11:47.373

您通常可以使用 VBA 轻松发现错误，因此：

```
IIf([START DATE] < DateSerial(Year(Date),[WinterStartMonth],[WinterStartDay]) _
And [START DATE] > DateSerial(Year(Date),[SummerStartMonth],[SummerStartDay]), _
DateAdd("d", [WinterInspectionDropDead], [START DATE]), DateAdd("d", _
[SummerInspectionDropDead], [START DATE])) 
```

只需删除 SQL 的换行符：

```
IIf([START DATE] < DateSerial(Year(Date), [WinterStartMonth], [WinterStartDay]) 
  And [START DATE] > DateSerial(Year(Date),[SummerStartMonth], [SummerStartDay]),
  DateAdd("d", [WinterInspectionDropDead], [START DATE]),
  DateAdd("d", [SummerInspectionDropDead], [START DATE])) As Result 
```

或者可能更好：

```
IIf([START DATE] < DateSerial(Year(Date), [WinterStartMonth], [WinterStartDay]) 
  And [START DATE] > DateSerial(Year(Date),[SummerStartMonth],[SummerStartDay]),
 [START DATE] + [WinterInspectionDropDead], 
 [START DATE] + [SummerInspectionDropDead]) 
As Result 
```

# ios - 在表格视图单元格顶部显示指示器视图

> ID：14628709
> 
> 赞同：2
> 
> 时间：2013-01-31T14:58:04.383
> 
> 标签：ios, objective-c, cocoa-touch, uitableview, uiactivityindicatorview

在后台处理某些特定于表格视图单元格的数据时，我想将表格视图单元格的视图置于半透明模式，并将进度指示器视图放在表格视图单元格的顶部。

我尝试了以下代码，但没有显示活动指示器：

```
-(void)showActivityIndicatorInTableView:(UITableView*)tableView 
atIndexPath:(NSIndexPath*)indexPath
{
  UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
  UIView *view = [[UIView alloc] initWithFrame:cell.contentView.frame];
  view.tag = 50;

  UIActivityIndicatorView *ac = [[UIActivityIndicatorView alloc]
     initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
  CGRect frame = view.frame;
  ac.center = CGPointMake(frame.size.width/2, frame.size.height/2);
  [view addSubview:ac];
  [ac startAnimating];
} 
```

我的代码有什么问题？有什么更好的方法来实现这一点？如何在覆盖表格视图单元格的半透明视图中显示指示器视图？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:08:36.317

一般来说，从外部乱搞`UITableViewCell`a 拥有的对象并不是一个好主意`UITableView`，因为你要得到的单元格在滚出屏幕后可能会被回收，所以即使你添加一个活动指示器，它可能会被删除。

更好的方法是让您`cellForRowAtIndexPath:`处理活动指示器的添加和删除。为此，您的模型需要保留应显示活动指示器的索引路径注册表（“注册表”可以像单个变量一样简单，如果您从不同时打开多个单元格上的活动指示器） . `cellForRowAtIndexPath`应该读取该注册表，并相应地装饰单元格。当你想添加一个活动指示器时，将相应的索引路径添加到注册表中，并`reloadRowsAtIndexPaths:withRowAnimation:`在表格视图上调用。当您需要关闭活动指示器时，请从注册表中删除单元格的索引路径，然后重新加载该行。

本质上，模型需要成为状态的守护者。与更改`UIView`子类有关的所有事情都需要在`tableView:cellForRowAtIndexPath:`. 最后，当状态需要改变时，控制器应该给你的表视图“轻拍肩膀”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:01:45.377

从外观上看，您永远不会将您创建的 UIView 添加到您的单元格中。您可能想要执行以下操作：

```
[cell.contentView addSubview:view]; 
```

此外，您可能希望将添加到单元格的视图框架更改为与实际单元格不同的内容。这将允许您在您的内部滚动，`UITableView`而不会干扰您设置的工作人员视图。

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, cell.contentView.frame.size.width, cell.contentView.frame.size.height)]; 
```

要使视图半透明：

```
[view setOpaque:YES];
[view setBackgroundColor:[UIColor colorWithWhite:1.0 alpha:0.5]]; 
```

# php - 写入文件时未定义的偏移量

> ID：14628712
> 
> 赞同：2
> 
> 时间：2013-01-31T14:58:14.737
> 
> 标签：php

我正在尝试使用 PHP 写入文件。我正在从数组中写入数据。

这是我的代码：

```
 $subject = $_SESSION['subject'];
    $section = $_SESSION['section'];
    $exam1 = $_SESSION['exam1'];
    $exam2 = $_SESSION['exam2'];
    $finalexam = $_SESSION['finalexam'];
    $average = $_SESSION['average'];

    $studentArray = $_SESSION['stringArray'];

    $file = $subject . "-" . $section . ".txt";
    $fh = fopen($file, 'a');
    $size = sizeof($studentArray);
    for($i = 0; $i<$size; $i++){
        fwrite($fh, $studentArray[$i] . " " . $exam1[$i] . " " . $exam2[$i] . " " .       $finalexam[$i] . " " . $average[$i] . " ");
} 
```

当我尝试访问此页面时，我总是收到此通知：

```
 Notice: Undefined offset: 5 in C:\xampp\htdocs\CS120\MP\Grades.php on line 26 
```

第 26 行是在 for 循环中带有 fwrite 的行。总是有通知，但代码正确写入文件。有什么办法可以消除/解决通知/错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:04:11.050

其中一个数组在 处没有索引`5`。我建议在使用`isset()`之前使用它。

例如，对于您的会议，我会这样做：

```
$subject = isset($_SESSION['subject']) ? $_SESSION['subject'] : ''; 
```

你的阵列也一样。在使用它之前，您需要检查数组的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:09:19.277

您可以使用

方法一

```
array_key_exists('1',$studentArray); // check whether array position 1 exist in array $studentArray 
```

方法二

```
if (isset($studentArray1])){
  // check whether array position 1 exist in array $studentArray
} 
```

# sql - 实体框架在通过 SqlQuery 执行 CTE 时抛出异常

> ID：14628713
> 
> 赞同：0
> 
> 时间：2013-01-31T14:58:17.163
> 
> 标签：sql, entity-framework-5, common-table-expression

当我调试这些代码行并查看查询变量时，我可以看到 System.Data.EntityException：

> 数据读取器与指定的“UnitId”不兼容。类型的成员“ITMS.Unit”在数据读取器中没有同名的对应列。

```
var query = context.Units.SqlQuery("WITH x(Id) AS
  (SELECT @UnitId UNION ALL SELECT Unit.UnitId
  FROM Unit JOIN x ON Unit.ParentId = x.Id ) " +
  "DELETE Unit FROM x JOIN Unit ON Unit.UnitId = x.Id",
  new SqlParameter("UnitId", unit.UnitId)); 
```

在 Sql Management Studio 中执行的原始 SQL 运行良好。

这个数据读取器有什么问题？嗯......实际上我做了一个选择，但在它之后删除......这是一个非查询。那是问题吗？顺便提一句。我首先使用代码。

**更新**

我已更新并更正了异常消息。

将 @-symbol 添加到 SqlParameter 名称“@UnitId”没有帮助。

尽管发生此异常，但 UnitId 及其子项已被删除！

似乎其他人也有同样的问题：[http ://social.msdn.microsoft.com/Forums/en-US/adonetefx/thread/17bdad58-93dd-4ba8-8a60-5177f3ce4a88](http://social.msdn.microsoft.com/Forums/en-US/adonetefx/thread/17bdad58-93dd-4ba8-8a60-5177f3ce4a88)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:54:32.577

您的 SqlParameter 声明不正确。首先，参数名称前面需要一个@（在查询中也是如此）。其次，您使用的重载构造函数经常与构造函数混淆：

```
public SqlParameter(
    string parameterName,
    SqlDbType dbType
) 
```

而且，您正在调用错误的方法来执行查询。SqlQuery 假定 SQL 返回需要映射到实体的数据。所以我将代码更改为：

```
var parm = new SqlParameter("@UnitId", SqlDbType.Int);
parm.Value = unit.UnitId
context.Database.ExecuteSqlCommand("WITH x(Id) AS
  (SELECT @UnitId UNION ALL SELECT Unit.UnitId
  FROM Unit JOIN x ON Unit.ParentId = x.Id ) " +
  "DELETE Unit FROM x JOIN Unit ON Unit.UnitId = x.Id", parm); 
```

确保在 SqlParameter 构造函数中正确设置 SqlDbType；我假设我的样本是 32 位整数。

# objective-c - NSPanel 始终位于所有其他应用程序窗口之上

> ID：14628716
> 
> 赞同：1
> 
> 时间：2013-01-31T14:58:25.627
> 
> 标签：objective-c, cocoa, cocoa-sheet

我的 NSPanel 窗口始终位于所有其他应用程序窗口的顶部。这就是我加载它的方式：

```
[NSApp beginSheet:[self window] modalForWindow:[rootDocument mainWindow] modalDelegate:self didEndSelector:nil contextInfo:nil]; 
```

我尝试使用`setLevel`: 和不同级别类型或使用`orderBack`: 或`orderFront`: 更改级别。但似乎这些方法没有效果，因为窗口总是在最上面。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:19:19.643

您没有通过`nil`, `Nil`, 0 或`NULL`to `didEndSelector`。曾经。您将选择器传递给`-sheetDidClose:returnCode:contextInfo:`已声明的方法 ( )。您传递的不是选择器，这使得您正在做的任何其他事情都可以消除工作表的嫌疑。（你没有说小组是否保持领先，因为它从未被解雇，但这是我的假设。）

查看[Using Custom Sheets](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Sheets/Tasks/UsingCustomSheets.html)，这是 Apple 自己的关于该主题的文档。

此外，请确保您使用的面板在 IB 中关闭了“启动时可见”标志。

# android - AsyncTask 在返回时不更新进度

> ID：14628721
> 
> 赞同：0
> 
> 时间：2013-01-31T14:58:32.817
> 
> 标签：android, android-asynctask, android-progressbar

我有一个 AsyncTask 类。我在 AsyncTask 类中进行处理。但是我返回这个类，进度没有更新。而且我只使用类，进度是更新。

这是我的 AsyncTask 类：

***AsyncTaskTables.java***

```
public class AsyncTaskTables extends AsyncTask<String, String, ArrayList<String>>{

private Context Context;

private LoginInfo AccountInfo;

private TextView ProgressStatus;
private ProgressBar ProgressValue;

public AsyncTaskTables (Context Context){
    this.Context = Context;

    AccountInfo = new LoginInfo();

    ProgressStatus = (TextView) ((Activity)Context).findViewById(R.id.tvStatus);
    ProgressValue = (ProgressBar) ((Activity)Context).findViewById(R.id.pbProgress);
}

@Override
protected void onPreExecute() {
    ProgressValue.setIndeterminate(true);
}

@Override
protected ArrayList<String> doInBackground(String... SQLCommand) {
    publishProgress("Checking Net Connection...");
    if(NetConnection()){
        try{
            publishProgress("Preparing...");

            ArrayList<String> TablesList = new ArrayList<String>();

            publishProgress("Connecting...");

            @SuppressWarnings("static-access")
            String Url = "jdbc:jtds:sqlserver://" + AccountInfo.Server + ";databaseName=" + AccountInfo.Database + "";
            String Driver = "net.sourceforge.jtds.jdbc.Driver";

            String SelectTables = "SELECT * FROM INFORMATION_SCHEMA.TABLES";

            Class.forName(Driver).newInstance();
            @SuppressWarnings("static-access")
            Connection DatabaseConnection = DriverManager.getConnection(Url, AccountInfo.UserName, AccountInfo.Password);
            Statement Command = DatabaseConnection.createStatement();

            publishProgress("Selecting tables...");
            ResultSet Results = Command.executeQuery(SelectTables);

            TablesList.clear();

            while(Results.next()){
                TablesList.add(Results.getString(3).toString());
            }

            publishProgress("Done !");

            return TablesList;
        }catch(Exception Error){
            publishProgress("Error : " + Error.toString());
            return null;
        }
    } else {
        publishProgress("Need Network Connection !");
        return null;
    }
}

@Override
protected void onProgressUpdate(String... Status) {
    ProgressStatus.setText(Status[0]);
}

@Override
protected void onPostExecute(ArrayList<String> Result) {
    ProgressValue.setIndeterminate(false);
}

@SuppressWarnings("static-access")
private boolean NetConnection() {
     ConnectivityManager NetManager = (ConnectivityManager) ((Activity)Context).getSystemService(Context.CONNECTIVITY_SERVICE);

     if (NetManager.getActiveNetworkInfo() != null && NetManager.getActiveNetworkInfo().isAvailable() && NetManager.getActiveNetworkInfo().isConnected())
         return true;
     else
         return false;
}

} 
```

这是我的主类：

***管理活动.java***

```
public class ManagementActivity extends Activity {

private TextView Status;

private AsyncTaskTables SelectTables;

private TablesAdapter TablesAdapter = null;
private ArrayList<String> TablesList = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_management);

    Status = (TextView) findViewById(R.id.textView1);

    try {

//Problem is here...
//I am calling only "SelectTables.execute("");", progressbar is showing.
//But I am calling "SelectTables.execute("").get();", progressbar isn't showing...

        SelectTables = new AsyncTaskTables(this);
        TablesList = SelectTables.execute("").get();
        TablesAdapter = new TablesAdapter (this, R.layout.tables_row, TablesList);

        ListView Tables = (ListView) findViewById(R.id.lvTables);
        Tables.setAdapter(TablesAdapter);
        registerForContextMenu(Tables);
    } catch (Exception Error) {
        Status.setText("Error (Select Tables) : " + Error.toString());
    }

    Button btnTablesRefresh = (Button) findViewById(R.id.btnRefresh);
    btnTablesRefresh.setOnClickListener(new OnClickListener(){
        @Override
        public void onClick(View v) {
            try {
                SelectTables = new AsyncTaskTables(ManagementActivity.this);
                TablesList = SelectTables.execute("").get();
                TablesAdapter = new TablesAdapter (ManagementActivity.this, R.layout.tables_row, TablesList);

                ListView Tables = (ListView) findViewById(R.id.lvTables);
                Tables.setAdapter(TablesAdapter);
                registerForContextMenu(Tables);
            } catch (Exception Error) {
                Status.setText("Error (Select Tables) : " + Error.toString());
            }
        }
    });
}
} 
```

我只调用“SelectTables.execute("");”，进度条正在显示。但我正在调用“SelectTables.execute("").get();”，进度条没有显示...

我能做些什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:31:38.823

Get 函数在必要时等待计算完成，然后检索其结果。这意味着您的 UI 线程在您的任务完成之前被阻塞。由于您正在阻止您的 UI 线程；进度条，永远不会显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:27:37.287

尝试将您的 publishProgress() 方法包装在 UI 线程中。

```
this.runOnUiThread(new Runnable() {

        public void run() {
            publishProgress("Your progress");

        }
    }); 
```

# javascript - 在Javascript中寻求一个模拟框架

> ID：14628724
> 
> 赞同：0
> 
> 时间：2013-01-31T14:58:44.490
> 
> 标签：javascript, frameworks, open-source, simulation

我需要一个开源的 Javascript 模拟框架。借助仿真框架可以创建概率分布。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:02:04.317

这个库怎么样：

[http://www.jstat.org/](http://www.jstat.org/)

诸如 NormalDistribution 之类的东西。

# gradle - 如何在使用 gradlefx 的 flexunit 进行单元测试期间加载 RSL 库？

> ID：14628726
> 
> 赞同：0
> 
> 时间：2013-01-31T14:58:52.587
> 
> 标签：gradle, flashdevelop, flexunit4, gradlefx

我正在将我们的 flex 应用程序迁移到使用 gradle 构建。到目前为止，一切进展顺利，除了单元测试。

根`build.gradle`

```
description='Parent project for flex applications'

buildscript {
    repositories {
        mavenCentral()
        mavenLocal()
    }

    dependencies {
        classpath group: 'org.gradlefx', name: 'gradlefx', version: '0.6'
    }
}

allprojects {
    group='com.mycompany.flex'
    version='0.0.1-SNAPSHOT'

    repositories {
        mavenCentral()
        mavenLocal()
    }
}

subprojects {
    apply plugin: 'gradlefx'

    dependencies {
        flexSDK group: 'org.apache', name: 'apache-flex-sdk', version: '4.1.0A', ext: 'zip' 

        //unit test libraries
        test group: 'org.hamcrest', name: 'hamcrest-as3-flex', version: '1.1.3', ext: 'swc'

        test group: 'org.flexunit', name: 'flexunit-tasks', version: '4.1.0-8', ext: 'jar'
        test group: 'org.flexunit', name: 'flexunit-flex', version: '4.1.0-8', ext: 'swc'
        test group: 'org.flexunit', name: 'flexunit-cilistener', version: '4.1.0-8', ext: 'swc'     
    }

    flexUnit { 
        command="C:/Windows/System32/Macromed/Flash/flashplayer_11_sa_debug.exe"
    }
} 
```

有问题的项目`build.gradle`

```
description='module_MyModule'
type = 'swf'

dependencies {
    rsl project(':library_common')

    external group: 'flexlib', name: 'flexlib', version: '2.5', ext: 'swc'

    merged group: 'com.esri.ags', name: 'agslib', version: '2.5-2011-11-30', ext: 'swc'
    merged group: 'org.robotlegs', name: 'robotlegs-framework', version: '1.5.2', ext: 'swc'
    merged group: 'org.alivepdf', name: 'alivepdf', version: '0.1.5RCfeb2010', ext: 'swc'
} 
```

编译没有问题，`gradle test`结果如下：

```
:module_MyModule:test
[ant:flexunit] Compiling test classes: [com.mycompany.MyModelTest]
[ant:null] Loading configuration file C:\Users\PGreen\.gradle\gradleFx\sdks\56bb8970d35ada5a72c3596118157aa694a7e83e\frameworks\flex-config.xml
:module_MyModule:test FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':module_MyModule:test'.
> Compilation failed:
C:\development\flexworkspaces\gradle\module_MyModule\src\main\actionscript\com\mycompany\MyModel.as(11): col: 22 Error: The definition of base class BaseModel was not found.

      public class MyModel extends BaseModel
                                   ^

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED

Total time: 14.006 secs 
```

基类`BaseModel`在项目 ':library_common' 中定义。如果我将配置从 更改`rsl`为`merged`，一切正常。所以这个问题似乎与 Flash 播放器在运行时尝试加载它时不知道在哪里寻找 ':library_common' 有关。我该如何指定？在我的搜索中，我发现使用 flexmojos 插件的 maven 存在类似问题，但总体上没有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:40:44.883

此时，单元测试应用程序的编译被委派给 FlexUnit 附带的 ANT 任务（我假设使用 FlexMojos 进行单元测试的工作方式类似）。不幸的是，这项任务似乎不能很好地处理一些情况。

我们还有其他具有相同根本原因的问题；例如[“运行 FlexUnit 测试时无法保留元数据”](https://github.com/GradleFx/GradleFx/issues/77)。
我们在管道中有一个解决方案，但它需要我们重写`test`任务，以便 GradleFx 编译测试应用程序并将生成的 swf 传递给 FlexUnit，而不是让 FlexUnit 进行编译。正如您可能已经猜到的那样，这不会在一夜之间得到解决。

与此同时，我只能为您提供一个我尚未测试过的建议：也许可以通过将其添加到您的构建脚本中，将您的 RSL 置于`test`范围之上：`rsl`

```
test project(':library_common') 
```

# knockout.js - 使用 Typescript 进行淘汰赛的 Webmail 演示

> ID：14628727
> 
> 赞同：1
> 
> 时间：2013-01-31T14:58:57.577
> 
> 标签：knockout.js, typescript

我正在尝试让最后一个关于敲除的教程与 Typescript 一起使用，但似乎无法填充电子邮件网格。

```
class WebmailViewModel {

    folders: any;
    chosenFolderId: any;
    chosenFolderData: any;
    public event_goToFolder: (folder) => void;

    constructor () {

        this.folders = ['Inbox', 'Archive', 'Sent'];

        this.chosenFolderId = ko.observable();
        this.chosenFolderData = ko.observable();

        this.event_goToFolder = ((folder) => {
            this.chosenFolderId(folder);
            $.get('/mail/' + folder + ".txt", { folder: folder }, this.chosenFolderData);
            // send JSON result to DIV
            $("div#jsond").text(JSON.stringify(this.chosenFolderData()));
        });

        // set default folder
        this.event_goToFolder("Inbox");
    }
};

ko.applyBindings(new WebmailViewModel()); 
```

我的观点：

```
 <ul class="folders" data-bind="foreach: folders">
        <li data-bind="text: $data, css: { selected: $data == $root.chosenFolderId() }, click: $root.event_goToFolder"></li>
    </ul>

    <table class="mails" data-bind="with: chosenFolderData">
        <thead><tr><th>From</th><th>To</th><th>Subject</th><th>Date</th></tr></thead>
        <tbody data-bind="foreach: mails">
            <tr>
                <td data-bind="text: from"></td>(
                <td data-bind="text: to"></td>
                <td data-bind="text: subject"></td>
                <td data-bind="text: date"></td>
            </tr>     
        </tbody>
    </table>
    <div style="border:4px solid blue" data-bind="text: chosenFolderData"></div>
    <div id="jsond" style="border:4px solid black"></div> 
```

当我运行该应用程序时，我可以在 DIV #jsond 中看到 JSON 数据，但电子邮件网格未按预期显示，来自演示。

值得一提的是，我使用的是本地存储的 TXT 文件，其中包含 JSON 数据——而不是使用某种实际的 Web api。但是，JSON 数据在 DIV 中显示得很好，所以我不认为这是一个问题。

这是我的 JSON 数据：

```
"{\"id\":\"Inbox\",\"mails\":[{\"id\":1,\"from\":\"Abbot <oliver@smoke-stage.xyz>\",\"to\":\"steve@example.com\",\"date\":\"May 25, 2011\",\"subject\":\"Booking confirmation #389629244\",\"folder\":\"Inbox\"},{\"id\":2,\"from\":\"Addison Begoat <upton.oprdrusson@pear-income.xyz>\",\"to\":\"steve@example.com\",\"date\":\"May 7, 2011\",\"subject\":\"FW: Associate advice\",\"folder\":\"Inbox\"},{\"id\":3,\"from\":\"Allistair <leroy72@plane-railway.xyz>\",\"to\":\"steve@example.com\",\"date\":\"May 19, 2011\",\"subject\":\"RE: Phone call tomorrow 5 o'clock\",\"folder\":\"Inbox\"},{\"id\":4,\"from\":\"emmanuel26@ghost.xyz\",\"to\":\"steve@example.com\",\"date\":\"May 22, 2011\",\"subject\":\"Completing basketball project\",\"folder\":\"Inbox\"},{\"id\":5,\"from\":\"jamalia.alnismith1@twigdad.xyz\",\"to\":\"steve@example.com\",\"date\":\"Apr 26, 2011\",\"subject\":\"FW: Can you get DE to resubmit accounts?\",\"folder\":\"Inbox\"},{\"id\":6,\"from\":\"lionel.qugy@cribsmoke.xyz\",\"to\":\"steve@example.com\",\"date\":\"May 22, 2011\",\"subject\":\"RE: Catch up at 9:00 to finalise rain spec\",\"folder\":\"Inbox\"},{\"id\":7,\"from\":\"Madison Lalinesson <melinda.gofagy@wing-language2.xyz>\",\"to\":\"steve@example.com\",\"date\":\"May 19, 2011\",\"subject\":\"RE: Pencil scenarios\",\"folder\":\"Inbox\"},{\"id\":8,\"from\":\"rajah.nukripyford@cast92.xyz\",\"to\":\"steve@example.com\",\"date\":\"Apr 28, 2011\",\"subject\":\"Flavor benefit gig\",\"folder\":\"Inbox\"},{\"id\":9,\"from\":\"Sandra Juanhison <yoshi.mostaline72@facefruit.xyz>\",\"to\":\"steve@example.com\",\"date\":\"May 8, 2011\",\"subject\":\"RE: Apparel5 network is back up\",\"folder\":\"Inbox\"},{\"id\":10,\"from\":\"Sylvester <rose.va@bunpig98.xyz>\",\"to\":\"steve@example.com\",\"date\":\"May 1, 2011\",\"subject\":\"Feedback requested by Ayanna Nuyo\",\"folder\":\"Inbox\"},{\"id\":11,\"from\":\"veronica@heart.xyz\",\"to\":\"steve@example.com\",\"date\":\"May 4, 2011\",\"subject\":\"Project Book starting 6pm\",\"folder\":\"Inbox\"},{\"id\":12,\"from\":\"XLN <basia@framehome.xyz>\",\"to\":\"steve@example.com\",\"date\":\"May 8, 2011\",\"subject\":\"RE: Remember Whoopi's joke\",\"folder\":\"Inbox\"}]}" 
```

我收到的实际错误：

```
Uncaught Error: Unable to parse bindings.
Message: ReferenceError: mails is not defined;
Bindings value: foreach: mails 
```

更新：

我几乎按照淘汰赛网站上的信函中的代码进行操作。到目前为止，其他一切都运行良好......也许它会帮助我从 Typescript 转换中发布实际的 JS 代码 -

```
var WebmailViewModel = (function () {
    function WebmailViewModel() {
        var _this = this;
        this.folders = [
            'Inbox', 
            'Archive', 
            'Sent'
        ];
        this.chosenFolderId = ko.observable();
        this.chosenFolderData = ko.observable();
        this.event_goToFolder = (function (folder) {
            _this.chosenFolderId(folder);
            $.get('/mail/' + folder + ".txt", { folder: folder }, this.chosenFolderData);
        });
        this.event_goToFolder("Inbox");
    }
    return WebmailViewModel;
})();    
; ;
ko.applyBindings(new WebmailViewModel()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:15:56.853

您似乎没有将 this.chosenFolderData 视为可观察的，您不只是用从 get 查询返回的 JSON 覆盖它吗？如果将其更改为：

```
$.get('/mail/' + folder + ".txt", { folder: folder }, function(data)
{
    this.chosenFolderData = ko.mapping.fromJS(data);
}); 
```

这使用了[Knockout 映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)

# ruby - Ruby #detect 随机数的行为

> ID：14628731
> 
> 赞同：5
> 
> 时间：2013-01-31T14:59:02.293
> 
> 标签：ruby, random

在下面的 Ruby 代码中，我有两种方法`d100_in_detect`，`d100_out_detect`它们根据.`Array``ary``d100`

```
def d100
  1 + ( rand 100 )
end

def d100_in_detect( ary )
  choice = [ ]
  100.times do
    choice.push ary.detect { |el| d100 <= el }
  end
  choice.uniq.sort
end

def d100_out_detect( ary )
  choice  = [ ]
  numbers = [ ]

  100.times do
    numbers.push d100
  end

  numbers.each do |i|
    choice.push ary.detect { |el| i <= el }
  end

  choice.uniq.sort
end 
```

如您所见，这两种方法之间的区别在于，第一种方法是在块`d100`内部调用`detect`，而在第二种方法中，100 个随机数存储在`numbers`Array 中，然后在`d100_in_detect`.

假设我如下调用这两种方法

```
ary = [ ]
50.times do |i|
  ary.push i * 5 
end

puts '# IN DETECT #'
print d100_in_detect ary
puts

puts '# OUT DETECT #'
puts d100_out_detect ary
puts 
```

一个典型的输出如下。

```
# IN DETECT #
[ 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55 ]
# OUT DETECT #
[ 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100 ] 
```

我不明白为什么这两种方法会返回如此不同的结果。在' 块中调用`d100`方法有什么含义吗？`detect`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:28:00.537

正确的。

我做的第一件事是修改您的示例脚本：

```
def d100_in_detect( ary )
  choice = [ ]
  numbers = []
  100.times do
    var = d100
    numbers << var
    choice.push ary.detect { |el| var <= el }
  end
  puts numbers.inspect
  choice.uniq.sort
end

def d100_out_detect( ary )
  choice  = [ ]
  numbers = [ ]

  100.times do
    numbers.push d100
  end
  puts numbers.inspect

  numbers.each do |i|
    choice.push ary.detect { |el| i <= el }
  end

  choice.uniq.sort
end 
```

如您所见，我所做的只是将 d100 的结果分配给一个临时变量以查看发生了什么……然后“错误”消失了！我的返回值突然相同。唔。

然后，我突然想到到底发生了什么。当你“缓存”变量时（就像你在第二个例子中所做的那样），你保证你有 100 个数字的分布。

当您遍历块时，对于块中的*每个数字，您再次执行 d100*。因此，第一个呼叫比第二个呼叫*多得多*……但是您还需要在呼叫该号码时随机生成的号码大于该号码（而，如果您随机生成 100 和 2，您可以保证它会在某个时候达到 100）。这极大地使您的脚本偏向于较低的数字！

例如，运行：

```
@called_count = 0
def d100
  @called_count += 1
  1 + ( rand 100 )
end

def d100_in_detect( ary )
  choice = [ ]
  numbers = []
  100.times do
    choice.push ary.detect { |el| d100 <= el }
  end
  puts @called_count.inspect
  @called_count = 0
  choice.uniq.sort
end

def d100_out_detect( ary )
  choice  = [ ]
  numbers = [ ]

  100.times do
    numbers.push d100
  end
        puts @called_count.inspect
  @called_count = 0

  numbers.each do |i|
    choice.push ary.detect { |el| i <= el }
  end

  choice.uniq.sort
end 
```

我明白了

```
# IN DETECT #
691
# OUT DETECT #
100 
```

# javascript - jQuery日历日期范围minDate第二个日历+5天

> ID：14628734
> 
> 赞同：0
> 
> 时间：2013-01-31T14:59:08.047
> 
> 标签：javascript, jquery, calendar

我有两个 jQuery 日历字段，用户必须选择一个“开始”日期和一个“结束”日期。我可以将用户在第一个日历上的输入限制为当前日期，但是我将如何做到这一点，以便第二个日历日期必须在第一个日历日期的未来至少 +5 天。

这是我的代码。

```
 $(document).ready(function() {

        var from = $( "#from" ).datepicker({
            defaultDate: "today",
            changeMonth: true,
            required: true,
            numberOfMonths: 1,
            minDate: 0,
            dateFormat: 'd-M-y',
            onClose: function( selectedDate ) {
                $( "#to" ).datepicker( "option", "minDate", selectedDate );
            }

        });
        var to = $( "#to" ).datepicker({
            defaultDate: "today",
            changeMonth: true,
            required: true,
            numberOfMonths: 1,
            minDate: 0,
            dateFormat: 'd-M-y',
            onClose: function( selectedDate ) {
                $( "#from" ).datepicker( "option", "maxDate", selectedDate );
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:10:45.033

您需要从第一个日历中获取天数并将其添加五天。

喜欢，

```
$('#to').datepicker({
    onSelect: function(dateVal) {
        var newDate= $.datepicker.parseDate('mm/dd/yy', dateVal);
        newDate.setDate(newDate.getDate() + 5);
        $('#to').val(newDate);
     }
}); 
```

# css - DreamWeaver : css with less ...访问被拒绝

> ID：14628735
> 
> 赞同：5
> 
> 时间：2013-01-31T14:59:10.887
> 
> 标签：css, macos, less, dreamweaver

打开 less 应用程序时，我无法使用 DreamWeaver CS6 保存 .less 文件。
我收到以下消息的弹出窗口：

[http://nsa32.casimages.com/img/2013/01/31/130131035942448479.png](http://nsa32.casimages.com/img/2013/01/31/130131035942448479.png)

*访问 www[...]css/style.less 已被拒绝。

我尝试用 vim 编辑文件，一切顺利。

有人已经有这个错误了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:44:37.673

看起来您正试图从外部服务器编译 LESS.app（假设您已连接到您的 Web 服务器）。

不幸的是，LESS 无权编辑文件（在服务器上执行），因此无法将文件编译成 CSS。

我遇到了同样的问题，并`.less`在我的桌面上用一个文件对其进行了测试，它编译得很好。

我无权尝试并执行，所以我不完全确定更多权限是否有效（这可能是 LESS.app 的限制）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-19T06:47:58.713

要解决此问题，您需要访问：

> 站点设置 > CSS 预处理器 > 常规

然后取消选中“启用文件保存时自动编译”

它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-17T21:02:30.970

这是一个很好的问题。我在创建一个启动配置文件时得到了这个，该文件监视了我的 .less 文件，然后运行一个 shell 脚本将 .less 文件编译为 .css。一个很好的解决方案，因为对我来说，来自 DMXzone 的 Dreamweaver CC Less Compiler 在 DWCC 中根本不起作用。在 DWCS6 中效果很好。无论如何，我解决此问题的方法是打开不会在 Dreamweaver 中保存的 .less 文件，执行另存为，然后重命名文件。然后删除不会保存的文件，然后从另存为副本中，再做一次另存为回原来的文件名。这为我解决了这个问题，我希望它可以帮助其他人。这是一个糟糕的解决方案。我尝试了从更改权限到清除启动配置等的所有方法......

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-17T17:20:29.547

去`Edit -> Preferences`。

在`Category`标签下，选择`File Types / Editor`并添加`.less`扩展名（或其他任何内容）。

# sql - 包含列值最低的列名的子查询

> ID：14628739
> 
> 赞同：-3
> 
> 时间：2013-01-31T14:59:28.233
> 
> 标签：sql, sql-server, tsql, subquery

我正在尝试创建一个子查询，该子查询仅包含列中的名称，其中另一列具有 1 个表中的最小值。这可以通过拥有来完成，还是我需要使用其他东西？

例子

```
name 1 value 5
name 2 value 7 
name 3 value 2 
```

那在表中我只想要名称 3 作为子查询的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:10:44.887

```
SELECT NAME
FROM TABLE
WHERE Value in (
   SELECT MIN(VALUE)
   FROM TABLE
   ) 
```

或者

```
SELECT TOP 1 NAME
FROM TABLE
ORDER BY VALUE 
```

# iphone - 有时推送通知不起作用

> ID：14628744
> 
> 赞同：-1
> 
> 时间：2013-01-31T14:59:44.910
> 
> 标签：iphone, xcode

我已按照苹果描述的所有程序进行克里特推送通知。它工作正常。有时它不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:07:11.797

检查服务器发送的通知负载大小是否小于或等于 256 字节。没有什么可以保证推送通知的传递，但确保您的 json 遵守此规则会有所帮助。另外，您可以查看[这篇文章](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12/#Sending_our_first_push_notification)。

# android - 返回页面和下一页，edittext中的值仍然完好无损

> ID：14628746
> 
> 赞同：0
> 
> 时间：2013-01-31T14:59:51.113
> 
> 标签：android

我想知道在应用程序转到上一页并返回原始页面后，我可以使用任何方法在编辑文本上显示相同的值吗？

例如，在第 1 页中，用户按下下一页按钮并转到第 2 页，用户在 edittext 中键入一些值。从第 2 页开始，我实现了 onBackPressed()，因此当用户返回第 1 页时，edittext 上的值位于它们应该在的位置。

我的问题来了，当用户返回第 2 页时，之前在编辑文本中输入的值消失了。

这是我在第 1 页实现的方法，使用户能够转到第 2 页

```
public void nextPage(View view) {
        variables vb = new variables();
        Intent intent_next = new Intent(this,
                Display_form_personal_details2.class);
        startActivity(intent_next); 
```

这是我在第 2 页实现的方法，使用户能够转到第 1 页

```
public void previousPage (View view){
        Intent intent_previous = new Intent (this, Display_form_personal_details.class);
        onBackPressed();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:14:36.063

使用 putExtras() 方法获取值：

```
public void previousPage (View view){
    Intent intent_previous = new Intent (this, Display_form_personal_details.class);
    intent_previous.putExtra(<String name>, <String value>);
    onBackPressed();

} 
```

# sql-server - 替换引用其他行的检查约束

> ID：14628748
> 
> 赞同：0
> 
> 时间：2013-01-31T14:59:54.973
> 
> 标签：sql-server, tsql

我的印象是 CHECK() 约束只能引用同一行中的值。我试图弄清楚，然后我可以如何执行以下规则：

给定下表：

```
PK_Employee_ID | Employee_Name | Manager_ID 
```

其中 Manager ID 是表中另一个员工的 ID。我需要一个规则，如果给定行的 PK_Employee_ID 已在另一行的 Manager_ID 中引用，则它自己的 Manager_ID 必须为空。那是：

不是每个员工都需要有经理，但作为另一名员工的经理的员工可能没有经理。

我知道还有其他方法可以解决问题；可能有另一个位列只是“Is_Manager”，如果为 1，则意味着 Manager_ID 必须为空。但是，我更喜欢更优雅的解决方案，而不是明确地告诉每一行他们是否是经理，而是让他们通过查看其他行自己弄清楚。这将使更改给定行之间的关系变得更加容易。或者，这种简单的处理问题的方法是否非常低效？

# jquery - jquery检测哪个按钮提交表单

> ID：14628750
> 
> 赞同：8
> 
> 时间：2013-01-31T14:59:59.217
> 
> 标签：jquery, submit, detect

我有一个包含以下内容的表格：

```
<form id="my-form" ...>
    ...
    <button type="submit" name="bttnsubmit" value="1">The first button</button>
    <button type="submit" name="bttnsubmit" value="2">The last button</button>
</form> 
```

我想检测哪个触发了表单提交事件，只使用：

```
$('#my-form').submit(function(){
    //psuedo code
    if($('[name=bttnsubmit]').val() == 1) {
        ....
    }
}); 
```

显然，选择器将始终返回它遇到的第一个 bttnsubmit 元素的值，所以我需要一些其他的魔法选择器或过滤器或其他东西。

我见过`$('[name=bttnsubmit][clicked=true]')`吹捧，但这在我的尝试中还没有奏效......

我当然可以诉诸`$('[name=bttnsubmit]').click()`但更愿意能够在表单提交事件中实现我的目标。

非常感谢任何帮助/提示。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T15:04:11.983

我不知道是否有任何内置事件数据（可能有），但想到的一个想法是处理按钮的单击事件并存储值的全局引用。像这样的东西：

```
var ButtonValue;

$('button[type="submit"]').click(function(e){
   ButtonValue = $(this).val();
});

$('#my-form').submit(function(){
    //psuedo code
    if(ButtonValue == 1)
    {
        ....
    }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-26T12:21:38.940

这个答案是对@musefan 答案的改进。

避免全局变量。最好保持数据形式：

```
$('button[type=submit]').click(function (e) {
    var button = $(this);
    buttonForm = button.closest('form');
    buttonForm.data('submittedBy', button);
}); 
```

并在提交处理程序中得到它：

```
$('#my-form').submit(function (e) {
    var form = $(this);
    var submittedBy = form.data('submittedBy');
    if(submittedBy.val() == 1) {
        // Any code here...
    }
}); 
```

可以通过点击“输入”来提交表单。`null`为了避免`submittedBy`变量：

```
var submittedBy = form.data('submittedBy') || form.find('button[type=submit]:first'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-13T14:57:17.920

单击元素时，HTML DOM 会抛出一个活动元素属性。它返回 DOM 中当前聚焦的元素。通过单击提交按钮提交表单时，您可以在 Jquery 中检测到此元素并对其执行必要的操作。这种方法比其他方法更好，因为您可以将元素从`button type="submit"`to更改为`input type="submit"`它仍然可以工作。您可以更改元素的 ID 和类，它仍然可以工作。您可以同时添加提交按钮或输入按钮，或者无论您添加多少按钮，它仍然可以工作。要在 Jquery 中检测此按钮，您可以使用此代码检测活动元素。

```
$('#my-form').submit(function(){
   var value=$(document.activeElement).val();
//psuedo code
    if(value == 1)
    {
        Your code....
    }
}); 
```

**上面的代码将返回表单提交时被点击的按钮。**如果您尝试在单击没有提交属性的按钮或单击表单外部的按钮时尝试提交表单，甚至对于单击创建虚拟表单并提交的按钮，此代码也很有用.

**PS 在 Firefox 45 及更高版本、chrome 67 及更高版本上测试**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-10T18:00:06.030

关于你的说法：

> 我看到 $('[name=bttnsubmit][clicked=true]') 被吹捧，但这在我的尝试中还没有奏效......

我发现这在其他地方没有得到正确解释。这不是一件自动的事情。您仍然需要在任何时候单击提交按钮时添加“clicked”属性来设置它。

```
$("#my-form input[type=submit]").click(function () {
    $("input[type=submit]", $(this).parents("form")).removeAttr("clicked");
    $(this).attr("clicked", "true");
});
$("#my-form").submit(function () {
    var clickedSubmitValue = $("input[type=submit][clicked=true]").val();
    if (clickedSubmitValue == "1")
    {
        ...
    }
}); 
```

类似于[此处](http://jsfiddle.net/kloopdogg/kDVv3/)的示例。

# python - 计算 Levenshtein 编辑距离的复杂度

> ID：14628753
> 
> 赞同：5
> 
> 时间：2013-01-31T15:00:17.773
> 
> 标签：python, algorithm, complexity-theory, dynamic-programming, levenshtein-distance

我整天都在看这个[Levenshtein Edit Distance的简单 python 实现。](http://en.wikipedia.org/wiki/Levenshtein_distance)

```
def lev(a, b):
    """Recursively calculate the Levenshtein edit distance between two strings, a and b.
    Returns the edit distance.
    """
    if("" == a):
        return len(b)   # returns if a is an empty string
    if("" == b):
        return len(a)   # returns if b is an empty string
    return min(lev(a[:-1], b[:-1])+(a[-1] != b[-1]), lev(a[:-1], b)+1, lev(a, b[:-1])+1) 
```

来自：[http ://www.clear.rice.edu/comp130/12spring/editdist/](http://www.clear.rice.edu/comp130/12spring/editdist/)

我知道它具有指数复杂性，但我将如何从头开始计算该复杂性？

我一直在互联网上搜索，但没有找到任何解释，只有声明它是指数的。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T15:14:00.403

1.  绘制调用树（您显然已经完成了）。

2.  调用树的摘要。对于任意*n* ，将树的深度*d确定为**n*的函数。

    此外，确定每个节点平均有多少个分支/子节点，因为*n*接近无穷大；这称为平均分支因子*b*。

3.  意识到以平均分支因子*b访问深度为**d*的树中的每个节点至少需要*b* ^ *d*操作的顺序。*用n*写出这个数字，就输入大小而言，您的复杂度有一个下限。

 ***更具体地说：你不断递归，直到你碰到一个空字符串，每次去掉一个字符。如果我们将字符串的长度称为*m*和*n*，那么树的深度就是 min( *m* , *n* )。在调用树中除叶子之外的每个节点处，您恰好递归 3 次，因此在极限情况下，平均分支因子为 3。这为我们提供了 Θ(3^min( *m* , *n* )) 节点的调用树。最坏的情况发生在*m* = *n*时，所以我们可以称之为 Θ(3^ *n* )。

这仍然只是复杂度的下限。对于全貌，您还应该考虑递归调用之间完成的工作量。在这个幼稚的代码中，这实际上是*线性时间*，因为`a[:-1]`必须复制（以 Θ( *n* ) 成本）几乎所有`a`Θ( *n* 3^ *n* ) 总复杂度。*

[* 我曾经发现一位 CS 教授在二进制搜索中使用 Python 的切片，结果在时间 Θ( *n* lg *n* ) 中运行。]***

# java - 从 Java 程序发送电子邮件到 Outlook Enterprise 电子邮件帐户的草稿文件夹

> ID：14628754
> 
> 赞同：0
> 
> 时间：2013-01-31T15:00:23.740
> 
> 标签：java, email, outlook, enterprise

我的任务是对一个用 Java 编写的程序进行大修，除此之外，该程序会生成一封或多封电子邮件，在发送之前必须由用户审核（因为电子邮件是产品交付的一部分包，并且发送给客户的所有内容都必须在发送之前在 QA 流程中进行审查）。

以前，该程序是这样编写的，以便电子邮件部分与 Lotus Notes 交互。该公司不再使用 Lotus Notes，我对 Lotus Notes 一无所知。

目前，我们将 Microsoft Outlook 与企业电子邮件帐户一起使用。

我对电子邮件模块的梦想是让它生成一封电子邮件并将该电子邮件直接放入用户的 Outlook 草稿文件夹中，准备发送。不幸的是，我不知道这是否可能，特别是考虑到电子邮件文件夹都与企业服务器同步。

如果有人能指出我进一步研究的正确方向，我将不胜感激。我自己的 Google 搜索会话让我找到了许多疯狂的切线，但没有产生真正有用的信息。如果您选择回复任何信息，请记住，我是一个相对较新且缺乏经验的程序员，正在做很多大学后的磕磕绊绊和学习。

提前感谢您的任何回答以及对我低经验水平的任何耐心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:14:40.057

我会研究 Java 的 POI 库。它们是通过 Java 与 MS Office 应用程序交互的方式。我相信您可以简单地创建一个 .msg 文件，然后将该文件放在草稿文件夹中，并使其与企业交换服务器同步。

[http://poi.apache.org/](http://poi.apache.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:54:32.067

使用 Outlook 对象模型。JACOB 应该让你从 Java 中做到这一点。类似于以下内容（VB 脚本）：

set App = CreateObject("Outlook.Application")
set NS = App.GetNamespace("MAPI")
NS.Logon
set Msg = App.CreateItem(0)
Msg.Subject = "test subject "
Msg.Body = "test body"
Msg.Display *'或调用 Msg.Save 只保存消息* 

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:18:39.193

javax.mail.Message 包含一个 setFlag 方法来将消息标记为草稿消息。因此您可以创建邮件但将其标记为草稿以存储在草稿文件夹中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:15:12.723

看看[Exchange 网络服务](http://msdn.microsoft.com/en-us/library/bb204119%28v=EXCHG.140%29.aspx)

[发送](http://msdn.microsoft.com/en-us/library/aa566468%28v=exchg.140%29.aspx)电子邮件示例

IMAP 协议可能是另一种选择。

# ruby-on-rails-3 - 将carrierwave_backgrounder 与carrierwave-video、电子邮件通知一起使用

> ID：14628756
> 
> 赞同：1
> 
> 时间：2013-01-31T15:00:29.473
> 
> 标签：ruby-on-rails-3, actionmailer, carrierwave

我已经配置了我的站点，以便它可以在后台自动呈现不同版本的视频。它实际上工作得很好。如果视频在三种不同的转码中成功，它将发送一封成功电子邮件。但是，如果它产生错误，它将发送失败电子邮件。我遇到的问题是我试图将 self 传递给 Action Mailer，以便我至少可以给出成功或失败的视频的名称。但是，似乎 self 为空。

模型

```
 def video_success(format, opts)
    VideoMailer.video_success(self).deliver
  end
  def video_rescue(format, opts)
    VideoMailer.video_error(self).deliver
  end 
```

上传者

```
version :mp4 do
    process :encode_video => [:mp4, callbacks: {rescue: :video_rescue}  ]
    def full_filename(for_file)
      "#{File.basename(for_file, File.extname(for_file))}.mp4"
    end
end

version :webm do
    process :encode_video => [:webm, callbacks: { after_transcode: :video_success, rescue: :video_rescue }]
    def full_filename(for_file)
      "#{File.basename(for_file, File.extname(for_file))}.webm"
    end
end 
```

关于如何实现这一点的任何想法？此外，如果有错误，最好返回生成的错误消息。

其次，每个用户模型都有一个电子邮件地址。上传视频的用户应该会收到电子邮件地址。但是，我在模型中使用 current_user 时遇到问题。我认为它也与后台程序有关，因为该信息不会传递给后台进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:30:13.600

I added a class method to the end of the background processor

`process_in_background :video, ParanoidVideo`

In the models directory, I created `paranoid_video.rb` and referenced the delivery of the mail. This way, the Carrierwave_Backgrounder is handling the success method instead of Carrierwave-Video.

```
class ParanoidVideo < ::CarrierWave::Workers::ProcessAsset
  def success(job)
    VideoMailer.video_backgrounder(job).deliver
  end
end 
```

I ended up creating a new field in the database called `last_updated_by` and use this to return which user is being called. Granted, this is an extra call to the database when the user is being pulled, but I find that this is sufficient for my purposes. The background processor statically returns consistent handlers so I was able to just split the lines and gsub to get the ID. `to_i` will pull the first numerical value which is always the Video id in my case.

```
 def video_backgrounder(job)
    @job = job
    @video = Video.find_by_id(@job.handler.split("\n")[2].gsub("id: '","").to_i)
    @user = User.find_by_id(@video.last_updated_by)
    mail(:to => @user.email, :subject => "Video Transcoding Successful")
  end 
```

# jquery - jQuery mobile Ajax 转轮

> ID：14628757
> 
> 赞同：0
> 
> 时间：2013-01-31T15:00:29.693
> 
> 标签：jquery, ajax, jquery-mobile

我尝试在 ajax 加载一些数据以显示下一页时显示一些纺车，我可以正确捕获 ajax 启动和 ajax 停止事件，因为我可以从 console.log 看到它们，但我看不到纺车！

```
 $(document).ajaxStart(function(){
            console.log("started");
            $('#loading').show();        
            $.mobile.showPageLoadingMsg("a", msg, false);
    }).ajaxStop(function(){
                console.log("stopped");
                $('#loading').hide();
                $.mobile.hidePageLoadingMsg();
            }); 
```

有趣的是，当我返回上一页时，轮子可以工作，但当我转到另一页时，轮子就不行了

```
 $.mobile.changePage("settings.html", {
                transition: "flip",
                reverse: false
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:13:59.227

这解决了问题；

$('body').addClass('ui-loading');

$('body').removeClass('ui-loading');

有关更多详细信息，请参阅；

[jQuery Mobile - 让 showPageLoadingMsg 与 pagebeforeshow 或 pagebeforeceate 一起工作时出现问题](https://stackoverflow.com/questions/7420023/jquery-mobile-problems-getting-showpageloadingmsg-to-work-with-pagebeforeshow/7817832#7817832)

# jquery - jQuery从touchwipe返回父ID

> ID：14628758
> 
> 赞同：0
> 
> 时间：2013-01-31T15:00:35.967
> 
> 标签：jquery

我目前正在使用一个名为 touchwipe.js 的插件，这样我就可以左右滑动来替换自定义滑块上的上一个和下一个按钮。我遇到的唯一问题是我似乎无法获得正在滑动的画廊的父 ID。

```
$(".gallery").touchwipe({
   wipeLeft: function() {
      var section=$(this).parent().parent().parent().attr('id');
      ... 
```

当我只使用普通的 jquery 点击它工作正常。你能告诉我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:03:32.607

尝试在 touchwipe 函数之外获取父级，然后在其中使用它：

```
var gallery = $(".gallery");
var parent  = gallery.parent()..... 

gallery.touchwipe({
   wipeLeft: function() {

      ... 
```

# iphone - 使用用户方向旋转 MKmap

> ID：14628764
> 
> 赞同：1
> 
> 时间：2013-01-31T15:01:10.740
> 
> 标签：iphone, ios, objective-c

我环顾四周，但在这个主题上几乎找不到。我正在尝试在我正在创建的应用程序中实现“查找您的汽车”功能。

我有一个地图视图，用户可以使用它来存储他们汽车的位置。然后他们可以单击“查找汽车”以在地图视图上显示他们当前的位置和汽车。（见下文）

我的问题：如何让地图旋转以显示用户面对的方向？所以我可以告诉用户他们需要走哪条路。很像本地地图应用程序。

从我所做的阅读来看，我相信这将在 didUpdateToLocation: 委托方法中完成，但我不太确定。

![地图视图](../Images/5ba1f26f27a8d5d95c4bb968f972795b.png)

（只是意识到我的用户在湖中，但这不是问题）

这是我用来添加图钉并将它们安装在屏幕上的代码。

旧[代码](http://pastebin.com/Yvg0ZrCV)

编辑：

我已经设法使用 fguchelaar 在评论中提供的链接使其正常工作。我已将代码更改为如下所示。此代码确实允许地图旋转，但有一些奇怪的行为。看[这里](http://www.youtube.com/watch?v=7xrzrvxbY7E)

```
- (IBAction)BTNPinCar:(id)sender {

    CLLocation *location = [locationManager location];
    // Configure the new event with information from the location

    float longitude=location.coordinate.longitude;
    float latitude=location.coordinate.latitude;

    NSLog(@"dLongitude : %f", longitude);
    NSLog(@"dLatitude : %f", latitude);

    [self pins:latitude lon:longitude];

    parked.latitude = latitude;
    parked.longitude = longitude;

    //set the reigion to the coords and a mile distance
    MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(parked, startZoom , startZoom );
    //change the region and animate it
    [MapView setRegion:viewRegion animated:YES];

}

- (IBAction)BTNFindCar:(id)sender {

    MKMapRect zoomRect = MKMapRectNull;
    for (id <MKAnnotation> annotation in MapView.annotations)
    {
        MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
        MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0.1, 0.1);
        if (MKMapRectIsNull(zoomRect)) {
            zoomRect = pointRect;
        } else {
            zoomRect = MKMapRectUnion(zoomRect, pointRect);
        }
    }
    [MapView setVisibleMapRect:zoomRect animated:YES];\

    // Start heading updates.
    if ([CLLocationManager headingAvailable]) {
        locationManager.headingFilter = 5;
        [locationManager startUpdatingHeading];
    }

}
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading {
   // [MapView setTransform:CGAffineTransformMakeRotation(-1 * newHeading.magneticHeading * M_PI / 180)];
    double rotation = newHeading.magneticHeading * 3.14159 / 180;
    CGPoint anchorPoint = CGPointMake(0, -23); // The anchor point for your pin

    [MapView setTransform:CGAffineTransformMakeRotation(-rotation)];

    [[MapView annotations] enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        MKAnnotationView * view = [MapView viewForAnnotation:obj];

        [view setTransform:CGAffineTransformMakeRotation(rotation)];
        [view setCenterOffset:CGPointApplyAffineTransform(anchorPoint, CGAffineTransformMakeRotation(rotation))];

    }];

} 
```

编辑2：

解决了轮换问题；

改变了

```
[MapView setTransform:CGAffineTransformMakeRotation(-rotation)]; 
```

为了

```
[MapView setUserTrackingMode:MKUserTrackingModeFollowWithHeading animated:YES]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:20:04.340

让地图旋转的答案如下。

首先启动位置管理器并设置委托。

```
// locationManager update as location
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;

// Start location services to get the true heading.
locationManager.desiredAccuracy = kCLLocationAccuracyBest;
locationManager.distanceFilter = kCLDistanceFilterNone;
[locationManager startUpdatingLocation]; 
```

上面的代码开始跟踪用户的位置。然后你需要开始跟踪用户的标题来旋转地图

```
// Start heading updates.
if ([CLLocationManager headingAvailable]) {
    locationManager.headingFilter = 5;
    [locationManager startUpdatingHeading];
} 
```

之后实现 LocationManager 委托方法。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading; 
```

最后在该委托方法中设置跟踪模式。

```
[MapView setUserTrackingMode:MKUserTrackingModeFollowWithHeading animated:YES]; 
```

希望这可以帮助任何有同样问题的人

# video.js - VideoJS 加载指示器不会消失

> ID：14628767
> 
> 赞同：3
> 
> 时间：2013-01-31T15:01:22.993
> 
> 标签：video.js

VideoJS 帮助重定向到这里，所以我想提交一个错误报告：当您拖动视频栏上的视频搜索指示器时，加载指示器会出现并且永远不会消失。视频是否加载到那个地方并不重要——它也不能点击，所以......隐藏它很有意义。

除此之外：一个很棒的插件 :) 它就像 YouTube 或 Vimeo 播放器 - 继续努力！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T17:26:41.073

可以在以下位置提交错误/功能请求：[https ://github.com/videojs/video.js/issues?state=open](https://github.com/videojs/video.js/issues?state=open)

这最初也困扰着我。我最终只是在搜索过程中关闭了加载微调器，但修改 loadingSpinner 以执行您想要的操作似乎并不难。

下面的示例假设您使用的是最新的 4.1 api。

```
/**
 * An event listener meant to be fired for timeupdate events. If the event
 * contained the updated time, we wouldn't need to ask the player, but alas.
 */
videojs.LoadingSpinner.prototype.showIfNotBuffered = function() {
  var time = this.player_.currentTime();
  var timeRanges = this.player().buffered();
  for (var i = 0; i < timeRanges.length; i++) {
    if (time >= timeRanges.start(i) && time <= timeRanges.end(i)) {
      this.hide();
      return;
    }
  }
  this.show();
};

/**
 * Adds a listener for timeupdate events, and modifies state tracking whether
 * we're currently listening to timeupdate events.
 */
videojs.LoadingSpinner.prototype.startTimeUpdateListener = function() {
  if (this.timeUpdatesOn) return;
  this.timeUpdatesOn = true;
  this.player_.on(
    'timeupdate', 
    vjs.bind(this, videojs.LoadingSpinner.prototype.showIfNotBuffered));
};

/**
 * Does the opposite of the above function. Combine?
 */
videojs.LoadingSpinner.prototype.stopTimeUpdateListener = function() {
  if (!this.timeUpdatesOn) return;
  this.player_.off(
    'timeupdate', videojs.LoadingSpinner.prototype.showIfNotBuffered);
  this.timeUpdatesOn = false;
};

/* Video initialization */
var vid = videojs("video", {});

/* First, turn off automatically showing the spinner when seeking. */
vid.player().off('seeking', videojs.LoadingSpinner.prototype.show);

/* Start listening to timeupdates once seeking starts; */
vid.player().on('seeking', vjs.bind(vid.loadingSpinner, videojs.LoadingSpinner.prototype.startTimeUpdateListener));

/* Stop listening to timeupdates once seeking ends. */
vid.player().on('seeked', vjs.bind(vid.loadingSpinner, videojs.LoadingSpinner.prototype.stopTimeUpdateListener)); 
```

更新：上面的示例假设您使用的是未缩小的 dev.js。我是 video.js 的新手，并没有意识到 dev 和 prod 版本之间的 API 存在很大差异。以下是将上述内容重新设计为您可以与 prod/minified 版本一起使用的内容：

```
var showIfNotBuffered = function() {
  var time = vid.currentTime();
  var timeRanges = vid.buffered();
  for (var i = 0; i < timeRanges.length; i++) {
    if (time >= timeRanges.start(i) && time <= timeRanges.end(i)) {
      vid.loadingSpinner.hide();
      return;
    }
  }
  vid.loadingSpinner.show();
};

/* Video initialization */
var vid = videojs("video", {}, function() {

  this.off('seeking', this.loadingSpinner.show);

  this.loadingSpinner.startTimeUpdateListener = function() {
    if (this.timeUpdatesOn) return;
    this.on('timeupdate', showIfNotBuffered);
    this.timeUpdatesOn = true;
  };

  this.loadingSpinner.stopTimeUpdateListener = function() {
    if (!this.timeUpdatesOn) return;
    this.off('timeupdate', showIfNotBuffered);
    this.timeUpdatesOn = false;
  };

  this.on('seeking', this.loadingSpinner.startTimeUpdateListener);
  this.on('seeked', this.loadingSpinner.stopTimeUpdateListener);
}); 
```

# sql - Postgres函数返回表不返回列中的数据

> ID：14628771
> 
> 赞同：14
> 
> 时间：2013-01-31T15:01:28.570
> 
> 标签：sql, postgresql, plpgsql, postgresql-9.1

我有一个返回表的 Postgres 函数：

```
CREATE OR REPLACE FUNCTION testFunction() RETURNS TABLE(a int, b int) AS
$BODY$
DECLARE a int DEFAULT 0;
DECLARE b int DEFAULT 0;
BEGIN
CREATE TABLE tempTable AS SELECT a, b;
RETURN QUERY SELECT * FROM tempTable; 
DROP TABLE tempTable;
END;
$BODY$
LANGUAGE plpgsql; 
```

此函数不以行和列的形式返回数据。相反，它将数据返回为：

```
(0,0) 
```

这导致 Coldfusion cfquery 块在提取数据时出现问题。从该函数返回表时，如何获取行和列中的数据？换句话说：为什么 PL/pgSQL 函数不将数据作为列返回？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-01T23:24:40.920

要获取单个列而不是行类型，请使用以下命令调用该函数：

```
SELECT * FROM testfunction(); 
```

就像您从表中选择所有列一样。
还要考虑您的测试功能的这种审查形式：

```
CREATE OR REPLACE FUNCTION testfunction()
  RETURNS TABLE(a int, b int)
  LANGUAGE plpgsql AS
$func$
DECLARE
   _a int := 0;
   _b int := 0;
BEGIN
   CREATE TABLE tempTable AS SELECT _a, _b;
   RETURN QUERY SELECT * FROM tempTable;
   DROP TABLE tempTable;
END
$func$; 
```

尤其：

`DECLARE`关键字只需要一次。

避免在子句中声明已经（隐式）声明为`OUT`参数的参数。`RETURNS TABLE (...)`

不要在 Postgres 中使用不带引号的 CaMeL-case 标识符。它可以工作，未加引号的标识符被转换为小写，但它可能导致令人困惑的错误。看：

*   [PostgreSQL 列名是否区分大小写？](https://stackoverflow.com/questions/20878932/are-postgresql-column-names-case-sensitive/20880247#20880247)

示例中的临时表完全没用（可能过于简化）。给出的示例归结为：

```
CREATE OR REPLACE FUNCTION testfunction(OUT a int, OUT b int)
  LANGUAGE plpgsql AS
$func$
BEGIN
   a := 0;
   b := 0;
END
$func$; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-01-10T15:11:22.237

当然，您可以通过将函数调用放在`FROM`子句中来做到这一点，就像 Eric Brandstetter 正确回答一样。但是，这有时会使 FROM 子句中已经包含其他内容的查询变得复杂。要获取函数返回的各个列，可以使用以下语法：

```
SELECT (testfunction()).* 
```

或者只获取名为“a”的列：

```
SELECT (testfunction()).a 
```

将整个函数（包括输入值）放在括号中，后跟一个点和所需的列名或星号。

要获取函数返回的列名，您必须：

*   检查源代码
*   首先检查函数的结果，如下所示：`SELECT * FROM testfunction()`。

输入值仍然可以来自`FROM`子句。只是为了说明这一点，考虑这个函数和测试数据：

```
CREATE FUNCTION funky(a integer, b integer)
RETURNS TABLE(x double precision, y double precision) AS $$
 SELECT a*random(), b*random();
$$ LANGUAGE SQL;

CREATE TABLE mytable(a integer, b integer);
INSERT INTO mytable
    SELECT generate_series(1,100), generate_series(101,200); 
```

您可以调用函数“funky(a,b)”，而无需将其放在`FROM`子句中：

```
SELECT (funky(mytable.a, mytable.b)).*
FROM mytable; 
```

这将导致2列：

```
 x         |         y         
-------------------+-------------------
 0.202419687062502 |   55.417385618668
  1.97231830470264 |  63.3628275180236
  1.89781916560605 |  1.98870931006968
(...) 
```

# http - 使用 YouTube API V3 查询某些 topicId 时出现错误 400

> ID：14628775
> 
> 赞同：0
> 
> 时间：2013-01-31T15:01:59.813
> 
> 标签：http, google-api, youtube-api, freebase, http-status-code-400

我注意到 V3 API 对 topicId 的某些值返回 400 错误，但它通常工作正常。

## 例如

`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=10&type=video&key={API-KEY}&topicId=%2Fm%2F0k_qlf`

错误 400：搜索过滤器和/或限制的组合无效。

* * *

`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=10&type=video&key={API-KEY}&topicId=%2Fm%2F01vrncs`

工作正常

我做错了什么，还是 API 本身的错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:12:01.347

您提供的示例不是 YouTube API 可以返回信息的“中间”。这是预期的行为。请记住，并非所有免费基础主题都一定有视频信息。

下次如果您认为这是一个错误，请随时在下面提交一个公共错误`http://code.google.com/p/gdata-issues/issues/list?`

干杯

# asp.net - 必须将 global.asax.cs 复制到实时服务器

> ID：14628776
> 
> 赞同：4
> 
> 时间：2013-01-31T15:02:02.443
> 
> 标签：asp.net, iis-7, global-asax

我有一个已构建并部署到 Web 服务器的 Web 应用程序。我们只部署 aspx，加上 dll 等，而不是源代码。

当我尝试访问该网站时，我收到消息“文件/global.asax.cs'不存在”。

如果我将它复制到服务器上，它就可以工作，并且网站的其余部分都很好。该站点上没有其他 C# 源代码，因此它显然将编译后的 DLL 用于除 global.asax.cs 之外的所有内容

global.asax 文件如下所示：

```
<%@ Application CodeFile="Global.asax.cs" Language="C#" Inherits="GTFC.Global" %> 
```

和 global.asax.cs 是这样的：

```
namespace GTFC
{
    public partial class Global : System.Web.HttpApplication
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T15:07:00.570

`CodeFile`您可以通过更改为来修复它`Codebehind`：

```
<%@ Application Codebehind="Global.asax.cs" Language="C#" Inherits="GTFC.Global" %> 
```

阅读：[CodeFile vs CodeBehind](https://stackoverflow.com/questions/73022/codefile-vs-codebehind)

# ios - 更改我的 plist iOS 上的值

> ID：14628780
> 
> 赞同：0
> 
> 时间：2013-01-31T15:02:13.760
> 
> 标签：ios, objective-c, plist

我有一个带有一个数组的 .plist，在这个数组中我有一些 NSDictionary。现在我想在我的字典中更改一些值。我的想法是加载整个数组，找到值，更改它，然后覆盖整个数组。但这花费了很多时间。您知道更改特殊值的更好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:13:20.763

这里没有时间问题。让我们谈谈大 O 表示法：

1.  从数组中获取 NSDictionary 的最坏情况成本：**O(log(n))** - [source](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFCollections/Articles/types.html)
2.  从字典中获取值的最坏情况成本：**O(log(n))**（参见上面的源代码）
3.  **在字典O(c)**中对该值执行任何恒定数量的操作的成本

 **O(log(n))+O(log(n))+O(c)= **O(log(n))**

所以你被“卡住”了 O(log(n)) 这一点也不坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:13:10.707

如果您要使用 .plist 持久化数据，那么如果您进行更改，除了写出整个文件之外别无选择。

存储允许您更新单个记录的大量数据的另一种方法是使用 CoreData - 它实际上是存储在设备上的数据库。

Core Data 比使用 plist 复杂得多，但更具可扩展性，以及使用数据库带来的所有其他好处。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T15:06:17.440

plist 有多大？你多久做一次？应该不是性能问题。。**

# c# - 移动列表中的元素

> ID：14628782
> 
> 赞同：13
> 
> 时间：2013-01-31T15:02:19.517
> 
> 标签：c#, .net, list, data-structures

我声明以下对象

```
List<string> list = {"Kate", "John", "Paul", "Eve", "Hugo"}; 
```

我想将“Eve”移到我的列表前面？我怎样才能做到这一点。我不能重新排序其他元素！
在输出我想得到这个

```
"Eve", "Kate", "John", "Paul", "Hugo" 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-31T15:03:41.187

```
list.Remove("Eve");  // Removes the first "Eve" element in the list
list.Insert(0, "Eve");  // Inserts "Eve" at the first position in the list 
```

但是，如果您的列表包含多个“Eve”，则调用 Remove("Eve") 只会删除第一次出现的“Eve”。

而且您必须知道在列表开头插入元素是一项昂贵的操作。因为列表中已经存在的所有元素都必须移动。

### 更新

正如@AlvinWong 评论的那样，`LinkedList<string>`在插入元素时避免这种开销是一个非常好的解决方案。该`Insert`操作在 O(1) 中完成（O(ni) in a `List`）。的主要缺点`LinkedList<string>`是访问第`i`th 个元素是 O(i) 中的操作（a 中的 O(1) `List`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:04:30.623

您可以将其删除并插入到第一个索引。

```
List<string> list = new List<string>(){ "Kate", "John", "Paul", "Eve", "Hugo" };
list.Remove("Eve");
list.Insert(0, "Eve");
foreach (var i in list)
{
   Console.WriteLine(i);
} 
```

如果您知道您的具体索引`"Eve"`，您可以使用[`List.RemoveAt()`](http://msdn.microsoft.com/en-us/library/5cw9x18z.aspx)方法将其删除。

这是一个[`DEMO`](http://ideone.com/eMEMit).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T15:04:56.617

您可以使用[`List.RemoveAt`](http://msdn.microsoft.com/en-us/library/5cw9x18z.aspx)（因此您不会删除*所有*Eve 的）和[`List.Insert`](http://msdn.microsoft.com/en-us/library/sey5k5z4.aspx).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:06:19.767

您可以使用 RemoveAt 方法从给定索引中删除 Eve，并使用 Insert 将 Eve 添加到列表的开头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T15:07:39.163

```
list.Remove("Eve");
list.Insert(0, "Eve"); 
```

# javascript - 在循环中的每次传递上附加计数的 DOM

> ID：14628790
> 
> 赞同：0
> 
> 时间：2013-01-31T15:02:47.730
> 
> 标签：javascript, jquery, dom, loops, load

我将首先对此进行一些解释，但我会尽量保持简短和简单。

我设计了一个地图，它的信息是使用 ajax 在加载时添加的。使用 for 循环，它将六个数据属性添加到 ID 匹配的每个 div。我希望添加一个加载进度功能，因为它需要大约 4 - 8 秒才能完成，这就是我遇到的问题。

这是相关代码的完整部分。如果你愿意，你可以跳过，因为我写了我在下面遇到问题的部分。

```
$.ajax({

    // Get information 
    type:'GET',
    url:'../../DataFile.php',
    data:"#roomtable table",
    success: function(data){

        //Total Count of Rooms
        totCount = $(".room").length;

        //Initalise Count
        count = 0;

        //For each room
        $('.room').each(function(){
            thisRoom = $(this);

            //Increase Count
            count++;

            //For each row in data table
            $($(data).find('tr')).each(function() {

                //If ID matched first cell
                if (thisRoom.attr('id') == $(this).find('td:nth(0)').html())
                {
                    .....
                    //Add data attributes from the other cells. 
                    .....
                }
            });

            //Write the current count as a percentage. 
            $('#count').text(Math.round(count/totCount*100));
        });
    }
}); 
```

我遇到问题的部分是每次通过每个函数时，我希望计数会增加百分比。例如 1/100.... 16/100... 25/100... 等等。但是发生的事情是它只是暂停，直到数据属性被写入并直接跳转到 100%。

```
count = 0;
$('.room').each(function(){
    count++;
    $('#count').text(Math.round(count/totCount*100));
}); 
```

为什么上面的代码没有在每次传递时写入新的计数？请有人可以帮我解决我哪里出错了。我很抱歉这个问题有点罗嗦，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:11:55.243

JavaScript 是单线程的，当你的代码忙于做一些计算时，UI 线程没有机会更新。您可以考虑使用`setTimeout`或类似 Underscore 的[defer](http://documentcloud.github.com/underscore/#defer)功能来实现您的目标。的文档`defer`如下：

> _.defer（函数，[*参数]）

延迟调用函数，直到当前调用堆栈被清除，类似于使用延迟为 0 的 setTimeout。对于在不阻塞 UI 线程更新的情况下以块执行昂贵的计算或 HTML 呈现很有用。

# javascript - 如何结合 impress.js 和 parallax.js？

> ID：14628799
> 
> 赞同：0
> 
> 时间：2013-01-31T15:03:32.530
> 
> 标签：javascript, parallax, impress.js, parallax.js

我想使用演示脚本 impress.js ( [http://bartaz.github.com/impress.js/#/its](http://bartaz.github.com/impress.js/#/its) ) 创建一个网站。现在我还想使用 parallax.js ( [http://stephband.info/jparallax/](http://stephband.info/jparallax/) ) 在演示的一个“步骤”中使用所有图像创建视差效果。现在我在尝试将视差效果包含到 impress.js 中时遇到了困难。问题似乎是 impress.js 在 3D 空间中，而 parallex.js 使用边距和位置来移动元素。现在我的问题是，是否有人有结合这两种工具的经验，或者可能知道哪种视差效果可能在 3D 空间中起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:42:02.040

试试[Flowtime.js](https://github.com/marcolago/flowtime.js) .it 支持视差，但是你会失去一些重要的特性，这些特性是令人印象深刻的，而不是在这里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:34:32.097

也许您可以在您的印象步骤容器中创建第二个 div（具有固定的高度和宽度），它围绕视差列表。你试过吗？:)

# html - HTML5 appCache event for no update

> ID：14628800
> 
> 赞同：3
> 
> 时间：2013-01-31T15:03:33.540
> 
> 标签：html, html5-appcache, cache-manifest

I have a on page oad event that checks my manifest status, and if there is a change it asks the user to reload. However, I'm trying to bind a `<button>` to manually check if there is a status on `noupdate`. I can't seem to get this to work, here's my code:

```
window.addEventListener('load', function(e) {
  if (window.applicationCache) {
    window.applicationCache.addEventListener('updateready', function(e) {
      if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
          // Browser downloaded a new app cache.
          // Swap it in and reload the page to get the new hotness.
          window.applicationCache.swapCache();
          if (confirm('A new version of this App is available. Load it now?')) {
                window.location.reload();
          }
        } else {
          // no manifest change..
        }
    }, false);

    // if there is no update, display a message
    window.applicationCache.addEventListener('noupdate', function(e) {

      alert('App is up to date. ');

    }, false);

  }
}, false);

// check for a update each hour
setInterval(function () { window.applicationCache.update(); }, 3600000); 
```

My function detecting `noupdate` essentially fires my alert on page load without a hitch, but If I use it in a function tied to a button..

```
<a href="javascript:refresh();" data-theme="a" data-role="button" 
data-icon="arrow-r" data-inline="true">Refresh</a>

<script>
    function refresh() {
        if (window.applicationCache) {
            window.applicationCache.addEventListener('updateready', function(e) {
              if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
                  // Browser downloaded a new app cache.
                  // Swap it in and reload the page to get the new hotness.
                  window.applicationCache.swapCache();
                  if (confirm('A new version of this App is available. Load it now?')) {
                        window.location.reload();
                  }
                } else {
                  // no manifest change..
                }
            }, false);

            // if there is no update, display a message
            window.applicationCache.addEventListener('noupdate', function(e) {

              alert('App is up to date. ');

            }, false);

          }
    }
</script> 
```

It does not get the noupdate status...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:07:57.120

If you bind event listeners on window-load, as exemplified in your first code block, all you need to do in the refresh function is this:

```
<script>
    function refresh() {
      applicationCache.update()
    }
</script> 
```

After you have called applicationCache.update, either "updateready", "noupdate" or "error" event will fire. The error event typically means the appcache manifest could not be downloaded because the server is unreachable. You may wish to bind a listener to this event as well.

As an aside, calling `window.applicationCache.swapCache()` is not necessary for how you're using appcache currently. swapCache is only needed when you want to update resources (e.g. images shown on the page) without reloading the page itself. `window.location.reload()` is sufficient for a full reload of all resources, with the benefit that all your javascript is evaluated again and such. A true restart.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T07:59:39.000

This is because the `noupdate` event is only fired on the page's `load` event. As you load the page, the browser will check the application cache, determine whether an update is needed, and then fire the event. When you click the button, the event would already have fired so you can't catch it.

Instead, you should indeed attach the event to page load, but have your `updateready` and `noupdate` events update a variable, e.g. `isUpToDate` instead. Then, your button's click handler should check the the `isUpToDate` variable and decide whether or not to refresh accordingly.

# c# - 我可以从项目中获取 RenderingParameters 吗？

> ID：14628806
> 
> 赞同：2
> 
> 时间：2013-01-31T15:04:00.827
> 
> 标签：c#, asp.net, sitecore, sitecore6

我的任务是找出我们的哪些子布局已打开缓存。我不是在谈论子布局上的缓存——我的意思是在渲染参数中设置的该子布局的每个单独实例上的缓存。

这是我目前所做的：

1.  解析我们网站的整个树，查看每个项目
2.  获取每个项目的效果图
3.  循环浏览每个渲染
4.  检查“缓存”部分中是否设置了“可缓存”

我的问题是我看到的“可缓存”设置是子布局中的设置（在 Sitecore 中的布局 > 子布局下），而不是我在项目的子布局实例上设置的设置（我的项目 > 演示文稿 > 详细信息> 点击控制）

我的代码是独立编写的

1 号没问题 - 这是我为每个项目所做的：

2)

```
RenderingReference[] renderings = item.Visualization.GetRenderings(Sitecore.Context.Device, true); 
```

3)

```
foreach (RenderingReference r in renderings) 
```

4)

```
bool cacheable = r.RenderingItem.Caching.Cacheable; 
```

似乎我错过了获取每个子布局特定的渲染参数的步骤。但是，从我读过的指南看来，您似乎需要子布局本身才能访问这些参数。我找不到从项目或渲染参考中获取子布局的方法（也许有充分的理由？）。任何人都可以帮助我进步吗？

[从子布局获取渲染参数](https://stackoverflow.com/questions/10617021/get-rendering-parameters-when-multiple-sublayouts-of-the-same-type-are-on-the-pa)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:54:10.110

> 我的任务是找出我们的哪些子布局已打开缓存。我不是在谈论子布局上的缓存——我的意思是在渲染参数中设置的该子布局的每个单独实例上的缓存。

通过引用`r.RenderingItem`，您访问的是渲染的定义项，而不是演示详细信息中该子布局的“实例”。

要获取演示详细信息的每个实例的缓存，您可以使用：

```
RenderingReference[] renderings = Sitecore.Context.Item.Visualization.GetRenderings(Sitecore.Context.Device, true);
foreach (var renderingReference in renderings)
{
    // var isDefinitionItemCacheable = renderingReference.RenderingItem.Caching.Cacheable;
    var isInstanceCacheable = renderingReference.Settings.Caching.Cacheable;
} 
```

或者..

```
var sublayout = Parent as Sublayout;
if (sublayout != null)
{
    var cacheable = sublayout.Cacheable;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T19:22:29.583

确定这一点的另一种方法是转到`/sitecore/admin/stats.aspx`页面并检查渲染数量与缓存命中。因此，查看以**Sublayout 开头的行：**并查看 Cache 列是否大于 0。如果大于 0，则这些是加载缓存条目的时间。如果它始终为 0，则它没有设置为缓存。

# java - 使用 Jersey 解组 XML 元素

> ID：14628807
> 
> 赞同：0
> 
> 时间：2013-01-31T15:04:00.900
> 
> 标签：java, rest, jersey

我正在为一个安静的客户工作。我有来自 restful web 服务的这个 xml 标签：

```
<ProductRegistration pf:urn="urn:nipf:product-registration:IB:NIC:9472693" pf:url="http://immix-dev.natinst.com/cpr-rest/1/en/product-registration/IB:NIC:9472693.xml?dataset=full" pf:locale="en"> 
```

……

这个元素包含我需要存储的几样东西。我有这个 java 对象来存储标签和我需要的所有信息。

```
@XmlRootElement(name ="ProductRegistration")
public class ProductRegistration {

    private ProductItem productItem;    
    private InstalledProduct installedProduct;

    @XmlElement(name = "productItem")
    public ProductItem getProductItem() {
        return productItem;
    }
    public void setProductItem(ProductItem productItem) {
        this.productItem = productItem;
    }

    @XmlElement(name = "installedProduct")
    public InstalledProduct getInstalledProduct() {
        return installedProduct;
    }
    public void setInstalledProduct(InstalledProduct installedProduct) {
        this.installedProduct = installedProduct;
    }
} 
```

我正在做这样的连接：

```
public Collection<ProductRegistration> get(String url){
        GenericType<Collection<ProductRegistration>> productRegistrationType = new GenericType<Collection<ProductRegistration>>(){};

        WebResource webResource = getWebResource(url);      

        return webResource.get(productRegistrationType);
} 
```

它发送一个集合，因为 WS 返回一个 productRegistration 对象列表。但是当我尝试将 WS 的结果存储在 Java 对象中时，我收到“错误请求”错误。有任何想法吗？ - 编辑 -

信封长这样：

```
<ProductRegistrations xmlns:pdi="http://www.mywebpage.com/schemas/provider-framework/pdi/2" xmlns:contact="http://www.mywebpage.com/schemas/provider-framework/contact/1" xmlns:pf="http://www.mywebpage.com/schemas/provider-framework/1/providers" xmlns:ib="http://www.mywebpage.com/schemas/provider-framework/ib/2" xmlns="http://www.mywebpage.com/schemas/provider-framework/cpr/1" xmlns:tca="http://www.mywebpage.com/schemas/provider-framework/tca/1" xmlns:up="http://www.mywebpage.com/schemas/provider-framework/up/2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" pf:url="http://immix-dev.mywebpage.com/cpr-rest/1/en/product-registration/byContact.xml?contactRepresentation=urn:nipf:up-contact-address:2061817&dataset=full" retrieved="true" xsi:schemaLocation="http://www.mywebpage.com/schemas/provider-framework/cpr/1 http://immix-dev.mywebpage.com/cpr-rest/1/meta/schema.xsd"> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-31T15:13:46.357

将命名空间注释添加到您的 ProductRegistration 类：

```
@XmlType(namespace="..wherever pf comes from..") 
```

# javascript - GAS : folder.addEditor() : 邮件错误

> ID：14628813
> 
> 赞同：0
> 
> 时间：2013-01-31T15:04:20.363
> 
> 标签：javascript, google-apps-script

我创建了这个谷歌应用程序脚本以创建文件夹（在谷歌驱动器中）并共享它们。

但有时我在 addEditor 函数运行时收到此错误消息： **[https](https://script.google.com) ://script.google.com说：遇到错误：电子邮件不正确：myemail@mydomain.com**

但是，如果我直接将这封电子邮件插入文件夹的共享面板中，那么它就可以工作......

```
*//---- EMAILS

function validateEmail (emailAddress) {
  var pattern = new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);
  return pattern.test(emailAddress);
}

//---- FOLDERS

function FolderCreateByPathShared(path,editorsList,viewersList){   
  // path e.g. : 'F1/F2/F3', 'F1' created in root
  // e.g. : FolderCreateByPathShared('F1/F2/F3',['toto.titi@domaine.com'],[''])

  var f=FolderCreateByPath(path);

  if(viewersList){
    for(var c=0 ; c<viewersList.length ; c++){
       if(validateEmail(viewersList[c])) f.addViewer(viewersList[c]);
    }
  }

  if(editorsList){
    for(var c=0 ; c<editorsList.length ; c++){
       if(validateEmail(editorsList[c])) f.addEditor(editorsList[c]);
    }
  }  

  return f;
}* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:23:50.417

是的，它有效。我可以尝试并发现错误。:-)

但是现在有人知道为什么有些邮件被这些指令阻止了吗？当我在文件夹的共享面板中插入相同的被阻止邮件时，它就可以工作了......

# batch-file - %%F 变量总是引用 FOR 循环中的最后一项而不是当前项

> ID：14628819
> 
> 赞同：3
> 
> 时间：2013-01-31T15:04:40.407
> 
> 标签：batch-file, dos

这似乎应该相当简单，但我无法在 DOS 中获取 FOR 循环来正确报告它正在评估的当前项目。

我有一个简单的 DOS 批处理文件，它遍历目录中的所有文件并重命名它们。例如，假设我的目录包含以下文件：

```
File1.txt
File2.txt
File3.txt 
```

我想从每个文件中删除 TXT 扩展名。所以我的批处理命令看起来像：

@echo 关闭

```
for %%F in ("*.txt") do (
  echo %%F
  set tmpFile=%%F
  echo %tmpFile%
  set newFile=%tmpFile:~0,-4%.xml
  echo %newFile%
) 
```

我的预期输出是：

```
File1.txt
File1.txt
File1.xml
File2.txt
File2.txt
File2.xml
File3.txt
File3.txt
File3.xml 
```

相反，输出是：

```
File1.txt
File3.txt
File3.xml
File2.txt
File3.txt
File3.xml
File3.txt
File3.txt
File3.xml 
```

就好像将 %%F 设置为变量总是使用集合中的最后一个文件。

难道我做错了什么？请注意，我知道有更好的方法来简单地更改扩展名。我完成的批处理文件将执行更多操作，但我似乎无法通过这个初始步骤。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:09:25.040

`for`这是因为您正在循环中设置和访问变量。

您需要使用延迟扩展来访问它们，使用`!`'s 而不是`%`'s。

```
setlocal enabledelayedexpansion
for %%F in ("*.txt") do (
  echo %%F
  set tmpFile=%%F
  echo !tmpFile!
  set newFile=!tmpFile:~0,-4!.xml
  echo !newFile!
) 
```

# android - Android 设备在启动时如何知道什么是“启动”

> ID：14628823
> 
> 赞同：0
> 
> 时间：2013-01-31T15:04:50.037
> 
> 标签：android, orientation

如果我拿起我的设备并将其倒挂并重新启动，则开始屏幕将始终以相同的旋转方向定向。没有旋转更改事件，并且在我自己的应用程序中使用以下代码也不会产生旋转：

```
WindowManager wm = (WindowManager) getSystemService(Context.WINDOW_SERVICE);
int rotation = wm.getDefaultDisplay().getRotation(); 
```

我在 Android 2.3 上运行它。我怀疑其中一个传感器提供了方向，但找不到任何可以为您提供方向的 API。事实上，您甚至不必将设备倒挂。您可以将其放下或以任何方向放置，并且开始屏幕始终可以正确定位。开始屏幕根本不会翻转或改变方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:12:04.933

加速度计给出方向。重力方向是底部）所以android将无法确定空间方向）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:18:32.673

您可以放心地假设加速度计芯片以正确的方向焊接到主板上。基本上它提供了 3 个数字 - 应用于设备的加速度矢量分量（如果设备放置在某个不动的地方，则该矢量向上，其绝对值是地球重力）。感谢正确的焊接，矢量组件与设备轴对齐 - 只需检查它们的符号以确定哪个部分高于其他部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:21:18.443

加速度计根据重力检测方向。如果您将手机倒挂并重新启动，加速度计会在屏幕底部返回“向上”，但组件制造商会事先考虑到这一点。因此，加速度计也检测其相对于自身的方向。它能够检测到与重力对齐的“向上”和与自身对齐的“向上”的差异。因此，返回的“向上”`wm.getDefaultDisplay().getRotation()`从“向上”切换到“向下”，因为加速度计知道它是颠倒的（基本上）。

这是一个非常粗略的概念，但却是大意。

# mysql - 在 Cakephp 2.2 上以字符串形式返回的 Float、Decimal、Int mysql 字段

> ID：14628828
> 
> 赞同：1
> 
> 时间：2013-01-31T15:05:02.780
> 
> 标签：mysql, model, casting, cakephp-2.1

我在 CakePHP 2.2 和 MySQL 中有一个应用程序。我注意到返回值的类型转换是许多类型的字符串，如 Float、Decimal、Int、Varchar、Text 等：

浮点数或小数：

```
var_dump($this->field('field_name'));
string(4) "1.00" 
```

诠释

```
var_dump($this->field('field_name'));
string(1) "1" 
```

仅对布尔字段使用 TINYINT(1) 不会出现此问题：

小音(1)

```
var_dump($this->field('field_name'));
bool(true) 
```

通常对于货币字段，我将字段类型设置为 FLOAT 或 DECIMAL(11,2)... 也许我在 CakePHP 中使用这种类型是错误的？这种行为非常乏味，尤其是对于十进制字段，因为当值为 0 时返回字符串“0.00”，这是真的。所以我必须永远记住强制这样的类型：

```
if((float)$this->field('price')){
....
} 
```

为什么 CakePHP 不返回正确类型转换的值？我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:13:36.737

这不是 CakePHP 的问题。这是由于当前在 PHP 脚本语言中使用的松散类型。TinyInt 和 Boolean 工作，因为它被转换为 bool 类型。

所有人使用的解决方法是严格将您希望浮动的变量转换为浮动，如您的示例中所示。要检查字符串是否为数字，您可以使用以下[`is_numeric()`](http://www.php.net/manual/en/function.is-numeric.php)函数：

```
if (is_numeric($testedFloatString)) {
    //If $testedFloatString is a string representing a number cast it to float
    $testedFloatString = (float) $testedFloatString;
} 
```

这就是[“类型杂耍”](http://php.net/manual/en/language.types.type-juggling.php)的概念。对于浮点数，您需要记住的是：

```
$varName = (float) $varName;
$varName = (double) $varName;
$varName = (real) $varName; 
```

将全部转换为[PHP 的 Float](http://www.php.net/manual/en/language.types.float.php)。随着期待已久的 PHP 6 严格类型的出现，这个问题将不复存在，但我们将不得不再等一会儿。至于现在 - 唯一的方法是自己处理这些变量。要在 CakePHP 中为您需要的模型自动管理此回调，请使用[`Model::afterFind()`回调](http://book.cakephp.org/2.0/en/models/callback-methods.html#afterfind)。此回调用于“修改已从查找操作返回的结果或执行任何其他查找后逻辑。还要注意第二个参数，因为当`find()`从关联模型调用模型时，结果数组的结构将是不同的。

# python - 从 Tkinter 条目小部件中获取文本变量？

> ID：14628829
> 
> 赞同：3
> 
> 时间：2013-01-31T15:05:06.193
> 
> 标签：python, tkinter, tkinter-entry

我正在尝试将一个函数绑定到我的 Tkinter 根目录，该根目录会在用户按下返回时做出反应。这是代码：

```
def returnPressed(event):
    print repr(event.widget)

master = Tk()

master.bind("<Return>", returnPressed)
myStringVar = StringVar(value="Foo")
myEntry = Entry(master, textvariable=myStringVar)
myEntry.grid()

master.mainloop() 
```

这可行，但是现在我需要在函数中获取while的`StringVar`变量。`Entry``returnPressed`

我有小部件，但我无法获取变量对象。我知道如何获取变量内容，但我真的需要对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:45:20.923

要获取小部件的任何属性，请使用`cget`：

```
print(event.widget.cget("textvariable")) 
```

然而，在这个特定的实例中，由于一些实现细节，您得到的是 stringvar 的内部名称，而不是 stringvar 本身。所以，你必须找到另一种方法。

最简单的事情可能是将 stringvar 实例传递给被调用的函数。您可以使用 lambda 或 functools.partial 执行此操作。例如：

```
def returnPressed(event, v):
    ...
master.bind("<Return>",lambda event, v=myStringVar: returnPressed(event, v)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-20T18:33:43.990

我通过使用一个外部对象来解决 tkinter 在这方面的糟糕设计，该对象包含对它使用的`Entry`和`StringVar`它使用的文本变量的引用，以便于访问（a`tuple`也可以工作）：

```
class EntryWithText()
    def __init__(self):
        self.entry = None
        self.textvariable = StringVar() #or None

entryWithTexts = []
for i in range(10):
    entryWithTexts[i] = EntryWithText()
    entryWithTexts[i].entry = Entry(master, textvariable=entryWithTexts[i].textvariable, ...)
    entryWithTexts[i].textvariable.set("this is entry number " + str(i)) 
```

毫无疑问，如果你有 100k 个这样的条目，额外的间接级别会产生一些影响，但我在这里写的是小工具，所以不用担心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-22T02:19:45.290

以为我会继续说我发现了一种方法。

读取小部件的 'textvariable' 选项值会为您提供先前设置的变量的名称。使用此名称初始化 StringVar 实例将为您提供一个似乎链接到原始实例的新实例。没有值的初始化会保留当前值。我说“链接”是因为新实例和原始实例不是同一个对象（由它们的 id 验证），但是在新实例上设置值将更改小部件中对象中的值。请参阅 Variable._ *init* _ 的文档。

```
 name = event.widget['textvariable']
    var = StringVar(root, name=name) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-06-13T10:12:33.650

我知道这是一个老问题，但我认为我通过内部化控制变量找到了解决 tkinter 限制的方法。然后，您无需在创建小部件时声明单独的值：

```
class DynamicLabel(tkinter.Label):
    def __init__(self, master, *args, **kwargs):
        super().__init__(master=master, *args, **kwargs)
        self.master = master
        self.value=None
        for kwarg, value in kwargs.items():
            if kwarg == 'textvariable':
                if not isinstance(value, tkinter.StringVar):
                    raise ValueError('Textvariable must be StringVar')
                self.value = value
        if not self.value:
            self.value = tkinter.StringVar()
            self.config(textvariable=self.value)

    def set(self, txt):
        self.value.set(txt)

    def get(self):
        return self.value.get() 
```

这样做是为控制变量创建一个代理`self.value`。

然后我们将遍历所有的 kwargs，如果`textvariable`找到我们就`self.value`引用它。

如果在创建小部件时没有设置文本变量，我们只需创建自己的并将其分配给小部件`self.config(textvariable=self.value)`

剩下的就是创建 set 和 get 方法来访问控制变量。

`textvariable`我想通过忽略创建小部件时分配的任何内容并始终从头开始创建新小部件，可以进一步简化上述内容。

您甚至可以制作`self.value`一个能够直接与之交互的[属性](https://python-reference.readthedocs.io/en/latest/docs/functions/property.html)`self.value`

# git - Git反转暂存区

> ID：14628830
> 
> 赞同：14
> 
> 时间：2013-01-31T15:05:08.410
> 
> 标签：git, staging, git-stage

我的暂存区发生了变化，而其他的还没有暂存（有些文件在暂存区内外都有变化）。**我想反转暂存区的内容和未暂存的更改。是否存在一个快捷方式来做到这一点**，而无需执行更复杂的操作，如本地分支提交、差异或存储 [等]？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T12:16:35.073

这是我的做法：

1.  将索引提交到临时提交
2.  将剩余部分提交到辅助临时提交
3.  使用交互式变基切换提交的顺序
4.  混合复位
5.  软复位

它可以非常快地手动输入，特别是如果您使用 Vim 提交消息：

```
git commit -m tmp1
git add . # optionally with `git add -u` if there are deletions
git commit -m tmp2
git rebase -i HEAD~2 # swap the order of the commits; `ddp:wq` in vi
git reset HEAD~1
git reset HEAD~1 --soft 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T16:13:26.567

可能有不止一种方法可以做到这一点，但我想我会采用这种方法——目前没有预先构建的快捷方式，但你可以很容易地编写自己的脚本来遵循这个过程：

1.  为当前在您的工作目录中但尚未在您的索引中的内容生成一个补丁（您尚未完成`git add`的事情）

    ```
    git diff-files -p > /tmp/unstaged.patch 
    ```

2.  为您已经添加到索引中的内容生成一个补丁，以针对您当前的`HEAD`

    ```
    git diff-index --cached -p HEAD > /tmp/staged.patch 
    ```

3.  将您的索引和工作目录重置为您的`HEAD`

    ```
    git reset --hard HEAD 
    ```

4.  将未暂存的补丁应用于工作目录和索引，从而使这些更改暂存

    ```
    git apply --index /tmp/unstaged.patch 
    ```

5.  仅针对您的工作目录应用您的分段补丁

    ```
    git apply /tmp/staged.patch 
    ```

根据更改的确切性质，步骤 4 和/或 5 可能会导致您需要手动解决一些合并冲突，但我不确定是否有一种干净的方法可以完全避免这种可能性。

您可能可以使用`git stash`完成步骤 1 和 4 而不是上述命令，但我不确定这是否真的会给您带来任何好处……</p>

此外，您可能需要先查看`git diff-*`and`git apply`命令的手册页，看看是否有其他选项对您有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-08T19:43:24.103

基于 gtd 的回答和脚本反转提交的能力，这就是我现在使用的：

```
[alias]                                                                                                                                                                                                              
    swaplast = !git tag _invert && git reset --hard HEAD~2 && git cherry-pick _invert _invert~1 && git tag -d _invert                                                                                            
    invertindex = !git commit -m tmp1 && git add -A && git commit -m tmp2 && git swaplast && git reset HEAD~1 && git reset HEAD~1 --soft 
```

发表在我的博客上：[http ://blog.ericwoodruff.me/2013/12/inverting-git-index.html](http://blog.ericwoodruff.me/2013/12/inverting-git-index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:13:46.330

这就是我用来解决这个问题的方法。

首先`git reset`，它将所有文件从“暂存”删除到“未暂存以提交的文件”。“暂存”和“未暂存提交的文件”中的文件将保留您当前在“未暂存提交的文件”中的最新更改

然后

`git add /path/to/file`您需要添加到暂存的特定文件

不完全是捷径，但它可以完成工作

相反，在 you 之后`git reset`，您可以`git checkout /path/to/file`为当前“未暂存以进行提交”的文件添加您不想添加到暂存中的文件。这将从“未暂存提交”中删除特定文件

然后运行`git add .`它会将“未暂存以供提交”中的所有文件添加到“暂存”中 - 以您的情况更容易为准

# java - 我应该在这里使用全局变量吗？

> ID：14628831
> 
> 赞同：2
> 
> 时间：2013-01-31T15:05:14.510
> 
> 标签：java, global-variables

为什么使用全局变量是个坏主意？

我想为所有要使用的类提供一组变量。它将存储关键状态，因此不能将其设置为 const (final)。

你能告诉我一些其他（正确的）方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T15:07:38.497

> 为什么使用全局变量是个坏主意？

因为它破坏了封装。所有代码都可以访问它们并修改它们。

> 我想让所有类都可以使用变量数组

如果所有代码只使用一个实例，则可以使用单例：

```
public class MyGlobalKeys {
    private static final MyGlobalKeys globals = new MyGlobalKeys();

    // disable construction outside of this class
    private MyGlobalKeys() {}

    public void getInstance() {
       return globals;
    }

    public void addKey(String key, bool state) { ... }
    public bool hasKey(String key) { ... }
    // and so on ...
} 
```

请注意，此示例尤其不是线程安全的 - 有关改进的实现方法，请参阅[Java Singleton Design Pattern](http://www.javabeginner.com/learn-java/java-singleton-design-pattern)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:23:20.200

> 为什么使用全局变量是个坏主意？

除非它们用于指示已知常量，否则全局变量会引入我们所说的**可变全局状态**。这与单个对象具有可变数据成员（**对象状态**）时的情况形成鲜明对比。

考虑一个方法，它接受一些参数，做一些事情并返回一个值。

最理想的情况（从分析代码、调试、测试等的角度来看）是，如果在具有相同（或相等）参数的相同（或相等）对象上调用此方法将做同样的事情。这对于不可变对象（具有不可变对象状态的对象）很容易实现。

最常见的情况（在实践中）是方法的行为将取决于对象的状态和参数，这意味着如果方法的对象的状态发生了变化，则方法对于具有相同（或相等）参数的多个调用的行为可能不同（可变对象）。这不太理想，但它仍然可以轻松使用。

最不希望出现的情况是方法依赖于全局状态。在同一（或相等）对象上使用相同（或相等）参数多次调用同一方法可能会产生不同的结果。即使该对象在调用之间处于等效状态 - 或者即使它是不可变的！这显然很难处理，因为如果你怀疑一个方法没有做它应该做的事情，你就不能在任何你想要的地方测试它的行为。您必须至少针对您正在处理的案例进行测试（这可能并不总是像听起来那么简单），然后对于您能想到的每个案例，它都会被使用，并且通常会有重要的案例你会想念的。你不能总是*相信*这样的方法。

这不是解释为什么不应该使用全局变量，而是解释为什么它们通常被认为是不好的做法。

我个人使用的另一个示例是，如果您使用一段最初用于执行一次操作的代码，并让它在同一个会话中执行多次（比如将其粘贴到 GUI 上）。在这种情况下，除了第一次之外的每次运行都会发现程序处于通常不可预测的状态。这将产生令人尴尬的效果，即您的程序中的操作在第一次执行时会正确运行，并且每隔一次就有运行不正确的风险，直到程序关闭并再次运行。

我使用的另一个例子（如果前一个没有说服力）是：如果上一段的例子是这种情况，但*并行*？在这种情况下，执行相同操作的多个线程将在非常不可预测的点上改变彼此的状态。

> 你能告诉我一些其他（正确的）方法吗？

在我看来，构建程序的正确方法是将**方法应该使用的状态作为一个或多个参数**传递（如果它们也需要此信息，则让它将该状态传递给它调用的方法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:15:05.437

我个人的经验是：如果你开始使用全局变量（或任何表现得像全局变量的东西），你会一次又一次地这样做。最后，您会发现自己陷入了意大利面条代码池中。

另一方面，我无法想象为什么所有（！）其他类都应该使用键状态。

我建议考虑存储这些状态的专家。这位专家将是您的关键州级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:26:52.927

非常量的全局变量是糟糕的设计，原因有很多，基本上是因为它们破坏了封装。全局变量确保你的类不能有两个不同的实例（单例遇到类似的问题）。

它们会使您的代码更难进行单元测试，并且它们会使您的代码无法并行化。考虑一个场景，您有处理输入文件的代码。每个输入文件都与其他文件分开。您想要处理整个目录，为了利用新的多核服务器，您决定使用线程一次处理 4 个文件。据推测，这应该很简单，因为处理任务完全不相关，因此不需要同步。但是，由于您使用了全局变量，因此您在代码的不同实例之间引入了全局相互依赖关系，因此线程将相互混淆彼此的内部状态并导致代码无法工作。

这是反对天真的使用全局状态的论点。有几种合法的用途，但每个案例都必须根据其自身的优点进行辩论。

至于这样做的正确方法，我将创建一个`State`类并将其传递给所有需要它的类的构造函数。

# c# - 比较两个相邻列表视图中的列表视图项目，并使用相同的项目做一些事情......太长了

> ID：14628834
> 
> 赞同：0
> 
> 时间：2013-01-31T15:05:18.910
> 
> 标签：c#, .net, vb.net, listview, compare

我正在比较两个相邻列表视图中的项目，并标记相关的项目（在我的列之一上，即产品 ID）。

我的问题是完成此过程所需的时间（几分钟）。我目前使用“finditemwithtext”和重载在子项中包含搜索（我的产品 ID 列在子项（1）上...

我在列表视图 1 中有 12K 项，在列表视图 2 中有 6k 项。

目前我正在“逐步”浏览列表视图 1，并在列表视图 2 中搜索类似项目。

反过来做，逐步通过 2，在 1 中搜索，可能会有相同的性能问题，因为它只逐步通过 6k 个项目，但搜索 12k，与逐步通过 12k，搜索 6k...

也许有更有效的方法来获得最终结果？

当然，要比较的东西太多了... 6000 x 6 列（36000 比较）.. 根据我的微薄计算...

谢谢，希望能提供一些意见...

代码：

```
 Dim tmpListviewItem As New ListViewItem
     Dim c As Int32 = 0

     For Each i As ListViewItem In list1.Items

     If i.SubItems(5).Text = "" Then 'not yet linked item
     tmpListviewItem = list2.FindItemWithText(i.SubItems(1).Text, True, 0, False)

        If tmpListviewItem Is Nothing Then 'nothing found...

        Else 'found corresponding item
           c += 1
           i.SubItems(5).Text = tmpListviewItem.SubItems(1).Text
           tmpListviewItem.SubItems(5).Text = i.SubItems(1).Text
           i.ForeColor = Color.Green
           tmpListviewItem.ForeColor = Color.Green

       End If
     End If
     Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:29:15.347

好的，简单地说，我所做的，是这样的：

我构建了一个自定义对象类型的自定义列表，它只存储代码和数量信息（在我的例子中）。数量是我的列表视图中的一列。在查找比较时，我需要它来做一些额外的事情。

1：我在最初加载“更大”列表视图时使用对象构建列表（内存中的纯对象，没有接口绑定）

2：我的两个 lsitviews 都在代码字段上排序

3：我的自定义列表显然也是这样排序的

4：然后我逐步浏览我较小的列表视图，并逐步浏览完整的自定义列表，进行比较。当找到比较时，我退出自定义列表，并从自定义列表中删除该对象，以不断缩小我的列表。

5：由于我对代码字段的排序，在自定义列表中的几百次迭代中总是可以找到对象。

这使我的比较方法从大约 10 分钟缩短到 10 多秒。

```
 Private Function _find_item_in_rev(itemCode As String) As xStockitem
    Dim myTempItem As New xStockitem
    Debug.Print(currentRevItems.Count.ToString)

    For Each thisItem As xStockitem In currentRevItems

        If thisItem.stockCode = itemCode Then 'found item
            myTempItem.stockCode = itemCode
            myTempItem.price = thisItem.price
            myTempItem.quantity = thisItem.quantity
            currentRevItems.Remove(thisItem)
            Return myTempItem
        End If

    Next
    Return Nothing 'nothing found
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:02:54.243

也许您可以尝试更有效的数据结构。我的 VB.NET 技能很差，但这里有一个简单的 C# 版本。

```
var dict2 = new Dictionary<string, ListViewItem>();

foreach (ListViewItem item in list2.Items)
{
    dict2.Add(item.SubItems["ProductId"].Text, item);
}

foreach (ListViewItem item in list1.Items)
{
    var productId = item.SubItems["ProductId"].Text;

    ListViewItem item2;
    if (dict2.TryGetValue(productId, out item2))
    {
        // TODO:
        item2.ForeColor = Color.Green;
    }
} 
```

# boost - 使用 overwrite_if_exists 时，boost copy_file 的行为不一致

> ID：14628836
> 
> 赞同：0
> 
> 时间：2013-01-31T15:05:20.707
> 
> 标签：boost, boost-filesystem, file-copying

我在使用 boost copy_file(version 1.40.0) 方法时遇到问题，我想完全覆盖目标文件，但如果目标文本文件有更多行，它最终会合并源文件和目标文件。

复制文件（源，目标，overwrite_if_exists）

我会设想它的工作方式完全不同，在此操作之后，我希望源和目标完全相同。

这是这种方法应该工作的方式吗？

是的，我可以重命名目标文件，将源文件复制到目标路径，如果一切顺利，我可以删除目标文件，但令我震惊的是，在 boost.js 中没有原子方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:24:11.233

根据[如何执行 boost::filesystem copy_file with overwrite](https://stackoverflow.com/questions/829468/how-to-perform-boostfilesystem-copy-file-with-overwrite)的答案，这是 boost 的一个错误，它已在 1.46.0 版本中修复

# ios - 如何从 AppDelegate 将 ViewController 添加到现有 NavigationController？

> ID：14628837
> 
> 赞同：0
> 
> 时间：2013-01-31T15:05:23.520
> 
> 标签：ios, objective-c, viewcontroller, navigationcontroller

我有一个调用应用程序的 LocalNotification。

在应用程序中，几乎所有视图都与 NavigationController 连接以显示标题栏和“全局菜单”。

当应用程序被通知中的操作调用时，AppDelegate 必须调用包含“全局菜单”的 WebView。这意味着，我必须将这个“WebView”添加到应用程序的 NavigationController。

首先，我尝试了这样的事情：（在 AppDelegate 中）

```
UIViewController *currentVc = self.window.rootViewController;
[currentVc.navigationController pushViewController:orderVc animated:NO]; 
```

但它不会显示任何东西。所以我尝试了这种方式：

```
UIViewController *currentVc = self.window.rootViewController;
[currentVc presentViewController:orderVc animated:NO completion:nil]; 
```

然后 WebView(currentVc) 显示，但它不在整个应用程序的导航控制器下，因此没有“全局菜单”。

我检查了 UIViewController (self.window.rootViewController) 是否为 nil，但事实并非如此。

我四处搜寻，发现了许多类似的问题，但它们都与我的情况相反。

有没有简单的方法将 ViewController 添加到 NavigationController 以显示“标题栏”？抱歉问题太模糊了，但我真的需要再次帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:10:52.687

每个视图控制器都可以控制自己的 navigationItem。如果您想为您推送的 VC 显示按钮/标题，则必须更新 navigationItem。通常 viewWillAppear 是它的好地方。

# css - CSS div 100% 高度

> ID：14628838
> 
> 赞同：31
> 
> 时间：2013-01-31T15:05:29.127
> 
> 标签：css, height, css-position

我正在开发这个[网站](http://aquilewp.webkolm.com/grafica/)，我希望右侧边栏有 100% 的高度。

```
body { 
    height: 100%; 
    min-height: 100%;
    position: relative;
}

mydiv { 
    height: 100%; 
    min-height: 100%; 
    position: absolute; 
    top: 0; 
    right: 0; 
    bottom: 0;
    width: 290px;
} 
```

我已经阅读了很多答案，尤其是这个（Prestaul 答案）： [Setting 100% height on an absolute Position element when the content expand the window size](https://stackoverflow.com/questions/10146703/setting-100-height-on-an-absolutely-positioned-element-when-the-content-expands)。

但对我来说，这个技巧不起作用，小提琴的例子也不起作用！

[这是 jsfiddle 工作示例。](http://jsfiddle.net/9FEne/7/)

[这是不起作用的相同代码。](http://aquilewp.webkolm.com/grafica/prova.html)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-31T15:07:29.813

也设置 html 标签。这样就不需要奇怪的位置技巧了。

`html, body {height: 100%}`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T15:13:58.360

尝试将正文样式设置为：

```
body { position:relative;} 
```

它对我有用

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-11-13T22:47:10.660

[CSS Flexbox](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox)旨在简化创建这些类型的布局。

```
html {
  height: 100%;
}

body {
  height: 100%;
  display: flex;
}

.Content {
  flex-grow: 1;
}

.Sidebar {
  width: 290px;
  flex-shrink: 0;
}
```

```
<div class="Content" style="background:#bed">Content</div>
<div class="Sidebar" style="background:#8cc">Sidebar</div>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-13T07:49:18.840

我还有一个建议。当您希望 myDiv 的高度为 100% 时，请在您的 div 上使用这些额外的 3 个属性：

```
myDiv {
    min-height: 100%;
    overflow-y: hidden;
    position: relative;
} 
```

那应该做的工作！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-09T16:52:30.183

这个策略最适合我：

```
div.full {
  width: 100wh;
  height: 100vh;
} 
```

它创建一个全屏容器。

# c# - wcf 服务超时

> ID：14628840
> 
> 赞同：2
> 
> 时间：2013-01-31T15:05:36.260
> 
> 标签：c#, asp.net, wcf, process, timeout

我的 wcf 服务存在严重的超时问题。我将解释这种情况：我有一个调用 wcf 服务的 asp.net，wcf 服务创建一个新线程，新线程创建一个运行 python 脚本的进程。

注意：网站不会等待 python 脚本结束，它只会得到脚本正在运行的确认:-)。

通过创建一个新进程并调用 Waitforexit() 创建 python 脚本。该脚本是一个非常长的脚本，大约需要 5 个小时，大约 2 个小时后，WaitForExit 方法会抛出一个异常，提示“线程被中止”。

我为此奋斗了一个多星期，我真的一无所知。我会很高兴得到一些帮助，如果这篇文章的格式不正确，我很抱歉，它是由手机写的。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:09:01.077

我记得有一个类似的问题。Web 服务应用程序在一段时间不活动后停止，因此线程将中止。

解决它的一种方法是让 Windows 服务每隔 10 秒左右调用一次 Web 服务，或者更好的是，让 Windows 服务使用数据库队列或其他类似技术来获取“作业”。

# javascript - 在 Javascript 字符串中奇怪地使用反斜杠

> ID：14628841
> 
> 赞同：3
> 
> 时间：2013-01-31T15:05:42.540
> 
> 标签：javascript, jquery, multiline

我的一位同事在 JS 对象中设置属性的字符串值时使用了反斜杠：

```
shareButtonsHtml : '\
    <span class="share-fb">\
        <a href="#" class="fb-share"><span class="fb-share-icon"></span>Share</a>\
        <span class="fb-share-count"><i></i><u></u>0</span>\
    </span>\
    <div class="share-twitter"> \
        <iframe class="share-twitter-iframe" \
                allowtransparency="true" frameborder="0" scrolling="no" \
                src="https://platform.twitter.com/widgets/tweet_button.html" \
                style="width:130px; height:20px;"></iframe> \
    </div> \
    <div class="share-google"> \
        <div class="g-plusone" data-size="small" data-annotation="none"></div> \
    </div>', 
```

我们对这个字符串做的唯一事情就是当用户将鼠标悬停在我们的社交分享按钮容器上时：

```
self.html(obj.shareButtonsHtml); 
```

我知道反斜杠是 JS 中的转义字符。谁能解释为什么我的同事在这里使用它们？他肯定不需要逃避回车或换行吗？他后来去了另一家公司，所以我不能问他！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:06:54.680

他正在逃避换行符。

如果你想要多行字符串，这是必需的，否则 JS 不会将下一行识别为字符串的一部分。

所以，是的，他确实*“需要转义回车或换行符”*。这正是他在那里所做的。

您可以使用字符串连接将字符串分布在多行上，但这意味着每次使用字符串时都会进行额外的操作。性能差异不是很显着，这主要是一个偏好问题。

多行字符串在 JS 中通常不起作用的原因是解释器（在大多数情况下*）`;`在代码行的末尾添加了 a，如果它已经不存在的话。这就是为什么它`;`是可选的，但它也破坏了多行字符串。

*****一个例外是对象/数组字面量，`;`'s 没有添加在那里，例如：

```
var obj = {
    a:1
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T15:06:55.160

反斜杠用于在此处转义换行符。例如，它也可以在命令行中使用。

David Walsh 写了一篇关于多行 javascript 字符串的优秀文章：http: [//davidwalsh.name/multiline-javascript-strings](http://davidwalsh.name/multiline-javascript-strings)

看来您的同事实际上是在使用加号 (+) 连接字符串的“缓慢而丑陋”方法之上的首选方法。

来自博客：

> 在每行末尾添加一个反斜杠告诉 JavaScript 引擎该字符串将继续到下一行，从而避免了自动分号插入的烦恼。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:07:11.610

这只是允许他在多行上定义字符串（`\`正在转义“新行”字符）。

# c++ - 未定义对“krb5_kt_free_entry”的引用

> ID：14628842
> 
> 赞同：0
> 
> 时间：2013-01-31T15:05:43.727
> 
> 标签：c++, gcc, ssl

我知道 gcc 中库的顺序很重要，但是由于我不知道哪个库取决于哪个库，我该如何确定哪些库应该首先出现？

我不断收到与 ssl 库相关的错误。下面几个

```
/usr/lib/libssl.a(kssl.o): In function `kssl_sget_tkt':
(.text+0x20b9): undefined reference to `krb5_kt_default'
/usr/lib/libssl.a(kssl.o): In function `kssl_sget_tkt':
(.text+0x2119): undefined reference to `krb5_kt_get_entry'
/usr/lib/libssl.a(kssl.o): In function `kssl_sget_tkt':
(.text+0x218f): undefined reference to `krb5_decrypt_tkt_part'
/usr/lib/libssl.a(kssl.o): In function `kssl_sget_tkt':
(.text+0x21b5): undefined reference to `krb5_kt_free_entry' 
```

我在 makefile 中使用了这个顺序：

```
LIBS   = -lstdc++ -lmysqlclient -lz -lcrypt -lnsl -lssl -lcrypto -ldl 
```

请有人指导我如何摆脱这些未定义的引用？我真的需要 krb5 库吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:10:21.757

实际上，您可能需要添加`-lkrb5`到库列表中。放在前面`-lssl`。

# animation - Cocos2d CCSprite 动画加载失败

> ID：14628856
> 
> 赞同：0
> 
> 时间：2013-01-31T15:06:27.700
> 
> 标签：animation, cocos2d-iphone, ccsprite, ccspritebatchnode

我遇到了一个奇怪的 Cocos2d 动画问题。

如果我的 createAndRunAnimationonSprite 方法被调用，则在初始化时效果很好。

但是，如果我等待并使用方法 showSprite 将其分配给按钮，则精灵永远不会出现。我不知道为什么会发生这种行为。我没有其他方法或类。

HelloWorldLayer.h

```
@interface AnimationViewerLayer : CCLayer
{
    CCSprite *sprite;

} 
```

HelloWorldLayer.m

```
-(id) init
{
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) {

        CGSize winSize = [[CCDirector sharedDirector] winSize];
        // initialize the sprite
        sprite = [CCSprite node];
        sprite.position =  ccp( winSize.width/2 , winSize.height/2 );
        [self addChild: sprite];

        // If this is uncommented the sprite will show up. 
        // [self createAndRunAnimationOnSprite];

    }
    return self;
}

-   (void) showSprite { 
       [self createAndRunAnimationOnSprite];
}

-(void) createAndRunAnimationOnSprite {
    // stop all previous ones
    [sprite stopAllActions];
    NSLog(@"Create and Run Animation");
    CGSize winSize = [CCDirector sharedDirector].winSize;

    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"ThisSprite.plist"];
    CCSpriteBatchNode *spriteSheet = [CCSpriteBatchNode  batchNodeWithFile:@"ThisSprite.png"];
    [self addChild:spriteSheet];

    NSMutableArray *aniFrames = [NSMutableArray array];
    for(int i = 1; i <= 3; ++i) {
        [aniFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: [NSString stringWithFormat:@"ThisSprite_walking_%d.png", i]]];
    }

    CCAnimation *walkAnim = [CCAnimation animationWithFrames:aniFrames delay:0.1f];

    sprite = [CCSprite spriteWithSpriteFrameName:@"ThisSprite_walking_1.png"];
    sprite.position = ccp(winSize.width/2, winSize.height/2);
    id walkAction = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO]];
    [sprite runAction:walkAction];
    [spriteSheet addChild:sprite];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:02:10.430

您的图像可能有问题，您的图像名称不准确或图像已损坏。

使用其他一些虚拟图像来运行动画，并尝试使用您的任何动画帧（即“ThisSprite_walking_1.png”）制作精灵，然后查看它是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T03:24:25.620

用这个替换你的代码我希望这会起作用

-（id）初始化{

```
 //always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) {

        CGSize winSize = [[CCDirector sharedDirector] winSize];
        // initialize the sprite

        [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"ThisSprite.plist"];
        CCSpriteBatchNode *spriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"ThisSprite.png"];
        [self addChild:spriteSheet];
        sprite = [CCSprite spriteWithSpriteFrameName:@"ThisSprite_walking_1.png"];
        sprite.position = ccp(winSize.width/2, winSize.height/2);
        [spriteSheet addChild: sprite];

        // If this is uncommented the sprite will show up. 
         //[self createAndRunAnimationOnSprite];

    }
    return self; 
```

}

-（无效）createAndRunAnimationOnSprite {

```
 // stop all previous ones
    [sprite stopAllActions];
    NSLog(@"Create and Run Animation");
    CGSize winSize = [CCDirector sharedDirector].winSize;

    NSMutableArray *aniFrames = [NSMutableArray array];
    for(int i = 1; i <= 3; ++i) 
    {
        [aniFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: [NSString stringWithFormat:@"ThisSprite_walking_%d.png", i]]];
    }

    CCAnimation *walkAnim = [CCAnimation animationWithFrames:aniFrames delay:0.1f];

    id walkAction = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO]];
    [sprite runAction:walkAction];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:16:15.037

您要添加精灵两次。在 init 中将其添加到 self，在 createAndRunAnimation 中将其添加到 spriteSheet。这通常会导致应用程序的断言和中止执行（异常）。

# nhibernate - 通过连接查询休眠组

> ID：14628860
> 
> 赞同：1
> 
> 时间：2013-01-31T15:06:38.097
> 
> 标签：nhibernate, join, group-by, aggregate-functions, queryover

我有以下实体：

```
public class Shift
{
    public virtual int ShiftId { get; set; }
    public virtual string ShiftDesc { get; set; }

    public virtual IList<ShiftHistory> ShiftHistory { get; set; }
}

public class ShiftHistory
{
    public virtual System.DateTime ShiftStartLocal { get; set; }
    public virtual System.DateTime ShiftEndLocal { get; set; }

    public virtual Zone Zone { get; set; }
    public virtual Shift Shift { get; set; }

    public virtual int RowId { get; set; }
}

public class Zone
{
    public virtual int EntId { get; set; }
    public virtual string EntName { get; set; }
} 
```

班次是一个班次定义，区域是人们工作的地方，而班次历史是在某个区域运行班次的历史数据。

我需要的是**最后一次为所有区域运行班次**。

/* 编辑：对不起，我含糊其辞。每个班次都可以有多个区域的历史记录。我需要的是任何 NH 查询类型中的最新历史记录，无论该区域如何，每次班次。*/

但这并不是那么简单，至少现在对我来说不是，而且我在这上面花了太多时间，最后还是求助于做一个 sql 查询：

```
public class GetAllShiftSchedules : AbstractQueryObject<IList<ShiftScheduleResult>>
{
    public override IList<ShiftScheduleResult> GetResult()
    {   
        //use distinct because of the zones - if a shift is run at multiple zones, it ends at the same time, no? :)
        var sql =
            @"
            select distinct
                sh.ShiftId, s.ShiftDesc, sh.ShiftStartLocal, sh_inner.LatestEndTimeLocal
                from ShiftHistory sh
                  inner join Shift s on s.ShiftId = sh.ShiftId
                  inner join 
                  (
                    select ShiftId, max(ShiftEndLocal) as LatestEndTimeLocal from ShiftHistory group by ShiftId
                  )  
                   sh_inner on sh_inner.ShiftId = sh.ShiftId and sh_inner.LatestEndTimeLocal = sh.ShiftEndLocal
            ";

        var res = this.Session.CreateSQLQuery(sql).List().OfType<object[]>().Select(p => new ShiftScheduleResult(p)).ToList();

        return res;
    }
}

public class ShiftScheduleResult
{
    public int ShiftId { get; private set; }
    public string ShiftDesc { get; private set; }
    public DateTime LastShiftStartLocal { get; private set; }
    public DateTime LastShiftEndLocal { get; private set; }

    internal ShiftScheduleResult(object[] data)
    {
        this.ShiftId = (int)data[0];
        this.ShiftDesc = (string)data[1];
        this.LastShiftStartLocal = (DateTime)data[2];
        this.LastShiftEndLocal = (DateTime)data[3];
    }
} 
```

我得到的最接近的是：

```
 var innerSubquery =
            QueryOver.Of<ShiftHistory>()
                .Select(
                    Projections.Group<ShiftHistory>(e => e.Shift),
                    Projections.Max<ShiftHistory>(e => e.ShiftEndLocal)); 

        IList<Shift> shifts =
            this.Session.QueryOver<Shift>()
                .JoinQueryOver<ShiftHistory>(p => p.ShiftHistory)
                .Where(Subqueries.WhereProperty<ShiftHistory>(p => p.ShiftEndLocal).Eq(innerSubquery)).List(); 
```

其中生成了以下sql：

```
SELECT
...
 FROM
  Shift this_
   inner join ShiftHistory shifthisto1_ on this_.ShiftId=shifthisto1_.ShiftId
 WHERE
  shifthisto1_.ShiftEndLocal = 
  (
  SELECT this_0_.ShiftId as y0_, max(this_0_.ShiftEndLocal) as y1_ FROM ShiftHistory this_0_ GROUP BY this_0_.ShiftId
  ) 
```

这当然会失败，因为 select 分组返回多个值，我们无法将其与 ShEndLoc 进行比较。如果我能让分组投影只返回最大日期，这实际上对我有用。但是，为了使其完整，我们还应该能够通过 shift id 进行比较。

我可以返回 DTO，但包含实际班次或班次历史记录会很酷。

谢谢阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:50:41.330

```
 var list = 
            this.Session.Query<Shift>().Select(
                p => new
                {
                    Shift = p,
                    LastShiftHistory =
                        this.Session.Query<ShiftHistory>()
                            .Where(sh => sh.Shift == p)
                            .OrderByDescending(sh => sh.ShiftEndLocal)
                            .Select(sh => sh)
                            .FirstOrDefault()
                })
                .ToList(); 
```

应该管用。投影到 DTO 会更好，因为子查询将延迟加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:10:50.120

像这样的东西应该可以工作......你的结果是匿名类型，因为不同类的caluses组合......

```
 public class QueryPlace()
    {
        List<ShiftHistory> ShiftHistrys = new List<ShiftHistory>();
        List<Shift> Shifts = new List<Shift>();
        List<Zone> Zones = new List<Zone>();

        public object MakeQuery()
        {
            var mshift = (from r in (from sh in session.Query<ShiftHistory>() from sf in session.Query<Shift>() where sh.Shift == sf
                         select new{sh.ShiftStartLocal, sh.ShiftEndLocal, sf.ShiftId, sf.ShiftHistory}) group r by r.ShiftId into g
                        select new {ShiftStartLocal = g.Max(s => s.ShiftStartLocal), ShiftEndLocal = g.Max(s => s.ShiftEndLocal), ShiftId = g.Key}).FirstOrDefault();

            return mshift;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:10:17.267

只是为了完整起见，因为我的这个数据库使用复合 ID，所以我无法获得提供的完整查询 gunteman。

我最终得到的是我的原始查询，用 NH 编写：

```
 var list =

        this.Session.Query<Shift>()
            .Select(
                p => 
                new ShiftScheduleResult()
                {
                    ShiftId =  p.ShiftId,
                    ShiftDesc = p.ShiftDesc,
                    LastShiftStartLocal
                        = p.ShiftHistory
                            .OrderByDescending(sh => sh.ShiftEndLocal)
                            .Select(x => x.ShiftStartLocal)
                            .FirstOrDefault(),
                    LastShiftEndLocal
                        = p.ShiftHistory
                            .OrderByDescending(sh => sh.ShiftEndLocal)
                            .Select(x => x.ShiftEndLocal)
                            .FirstOrDefault()
                })
            .ToList(); 
```

我相信 Zoran 的查询也会起作用。感谢大家的帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-01T08:53:23.740

当DB方案结合业务需求导致查询复杂时，改变DB方案会更好。例如，在您的 ShiftHistory 上添加一个“活动”标志，或者在最后一个 ShiftHistory 上的 Shift 中添加一个外键。当然，这可以被视为某种“反规范化”，可能在 DB 中存在不连贯的数据（同一 Shift 的多个活动历史记录，或者“Last shift”外键未指向真正的最后一个）。但是处理这些风险会比维护一个复杂的查询花费更多吗？我认为这是一个权衡。

# iphone - 将数据上传到 iCloud

> ID：14628861
> 
> 赞同：0
> 
> 时间：2013-01-31T15:06:40.110
> 
> 标签：iphone, ios, xcode, icloud

我正在尝试使用以下代码将文档上传到 iCloud

```
NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString* documentsDirectory = [paths objectAtIndex:0];
NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"test.png"];
NSURL* sourceURL = [[NSURL alloc]initWithString:path];

NSFileManager *fileManager = [NSFileManager defaultManager];
if ([fileManager fileExistsAtPath:[sourceURL path]]) {
    NSLog(@"File found!");
}
else{
    NSLog(@"File not found!");
}

NSURL *ubiq = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
if (ubiq) {
    NSLog(@"iCloud access at %@", ubiq);
    NSError* error = nil;
    NSURL *destinationURL = [ubiq URLByAppendingPathComponent:@"Documents/test.png"];
    [[NSFileManager defaultManager] setUbiquitous:YES
                                        itemAtURL:sourceURL
                                   destinationURL:destinationURL
                                            error:&error];
    if(error != nil){
        NSLog(@"Error while uploading the file: %@", error);
    }
    else{
        NSLog(@"File ulpoaded successfully");
    }
else {
    NSLog(@"No iCloud access");
} 
```

我尝试上传的文件存在（打印了“找到的文件”），但将其上传到 iCloud 会产生以下错误

```
Error while uploading the file: Error Domain=NSCocoaErrorDomain Code=513 "The operation couldn’t be completed. (Cocoa error 513.)" UserInfo=0x1dd6bda0 {NSURL=/var/mobile/Applications/9F496F51-9DCA-4379-A62E-FFF7D7AB7385/VerticalSwipeArticles.app/test.png, NSUnderlyingError=0x1dd6c120 "The operation couldn’t be completed. Operation not permitted"} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:15:58.607

使用 GCD 并从不同的线程调用 iCloud 代码（特别是 NSURL *ubiq =... 行）。在某些情况下，在主线程上调用它可能会阻塞应用程序。

你构建 iCloud 路径的方式在我看来很奇怪。尝试这个：

```
NSURL *destinationURL = [[ubiq URLByAppendingPathComponent:@"Documents"] URLByAppendingPathComponent:@"test.png"]; 
```

# grinder - Linux 上的 Grinder 2 控制台

> ID：14628864
> 
> 赞同：0
> 
> 时间：2013-01-31T15:06:41.400
> 
> 标签：grinder

我在 Window 上运行 Grinder2 控制台。我想知道如何在 Linux 上运行 Grinder 2 控制台。

运行 net.grinder.Console 正在抛出如下的执行

线程“主”java.awt.HeadlessException 中的异常：未设置 X11 DISPLAY 变量，但此程序

-琥珀色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:35:55.240

将 DISPLAY 设置为 UI 需要启动的位置

导出显示=：0.0

安装 MochaXServer ( [http://www.mochasoft.dk/index.html](http://www.mochasoft.dk/index.html) ) 并在 windows PC 上运行服务器

# php - 允许从 iframed 网页登录 facebook

> ID：14628873
> 
> 赞同：0
> 
> 时间：2013-01-31T15:07:00.900
> 
> 标签：php, facebook, facebook-php-sdk

**设置**
- 域 A = [http://www.domainA.com](http://www.domainA.com)
- 域 B = [http://www.domainB.com](http://www.domainB.com)

在 domainA 上，我有一个包含此内容的 html 页面
`...
< iframe src="http://www.domainB.com/fblogin.php" >< br >
...`

**fblogin.php**负责将人们登录到 facebook。独立该页面工作正常。在 iframe 中它没有。

**在我的应用程序设置中的 facebook 上，我**显然必须在人们授权应用程序后将站点 URL 输入到 Facebook 将“重定向”的位置。我只能做一件事：在那里输入我的 iframeing html 页面......但是，（预期）Facebook 将必要的登录参数（状态等）传递给该页面，而不是需要它记录的 fblogin.php 页面中。

很想有一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:12:34.033

Facebook 不允许标准的 iFrame 调用 - iFrame 必须完全重定向，否则 Facebook 根本不会授权它们。使用 重定向到登录 URL `target=top`，这应该允许用户授权自己/登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:15:54.023

回到这里*轻轻地*回答我自己的问题。

最后，我选择使用 Javascript SDK 登录（通过弹出窗口）/按照 FB dev 上的示例（[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)）。
在我做出那个选择之后没有任何问题。

作为克服我遇到的 IE8 问题的额外措施，我最终将以下行放在我的 index.php 的标题中，以克服 IE8 中可能导致问题的隐私问题。（当 IE8 认为 iframe 的内容不“正确”时，您可以通过底部工具栏中的小“眼睛”图标看到这一点。

`header('p3p: CP="NOI ADM DEV PSAi COM NAV OUR OTR STP IND DEM"');`

# clojure - 当原始函数被绑定遮蔽时如何调用它？

> ID：14628874
> 
> 赞同：3
> 
> 时间：2013-01-31T15:07:00.963
> 
> 标签：clojure, functional-programming

我有这样的情况：

```
 (defn a []
   (do-something))

 (defn b []
   (let [original (a)]
      (modify-original)))

 (defn c []
   (binding a b)
     (a)) 
```

我怎样才能“打破绑定”并`a`打电话`b`？我认为闭包可以处理这种情况，所以我写了一些与此类似的东西，但它没有用：

```
 (defn c []
   (let [original-a a
         b (fn [] 
             (let [original (original-a)]
               (modify-original)))]
     (b))) 
```

哦，我差点忘了：代码要复杂得多，因为`c`不直接调用`b`. 它在我无法更改的子函数中调用。这就是为什么我不能使用类似的东西：

`(defn ^:dynamic state [] (something))`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:37:21.313

如果您想始终使用您提到的`a`in 函数的原始值，您可以将原始值“抓取”到函数（闭包）的环境中：`b``a``b`

```
(defn ^:dynamic a []
  (do-something))

(def b (let [a a]
         (fn []
           (let [original (a)]
             (modify-original)))))

(defn c []
  (binding [a b]
    (a))) 
```

**更新**。或者

```
(let [a a] (defn b []
             (let [original (a)]
               (modify-original)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:46:09.750

您可以**使用 java 线程“透视”绑定**，方法是创建并从未绑定的线程中获取 var 的值，并将其留在 var/atom/ref/etc 中以供代码找到绑定的线程：

```
user> (defn c [] 
        (let [tmp-atom (atom nil) 
              original-a (do (doto (Thread. #(reset! tmp-atom a)) .start .join) 
                             @tmp-atom)] 
          {:local-a a :original-a original-a}))
user> (c)
{:local-a 4, :original-a 4}
user> (binding [a 7] (c))
{:local-a 7, :original-a 4} 
```

* * *

或者对于一个较小的示例，首先定义一些共享状态和一个要绑定的 var

```
user> (def result (atom ""))
#'user/result
user> (def ^:dynamic a 4)
#'user/a 
```

在没有绑定的线程上捕获 a，这将获得 a 的根值：

```
user> (binding [a 5] (.start (Thread. #(reset! result  (str "a was " a)))))
#<Thread Thread[Thread-77,5,main]>
user> result
#<Atom@7c75031f: "a was 4"> 
```

然后将其与在没有使用 a 的绑定值的线程的情况下运行相同的代码进行比较：

```
user> (binding [a 5] (reset! result  (str "a was " a)))
"a was 5" 
user> result
#<Atom@7c75031f: "a was 5">
user> 
```

大多数（全部？）普通的 Clojure 并发工具都会小心地将绑定推送到新线程以防止出现这种情况

* * *

把它放在一起：

# sql - 无法获得正确的查询

> ID：14628875
> 
> 赞同：0
> 
> 时间：2013-01-31T15:07:01.153
> 
> 标签：sql, sql-server

我有一个名为 Datatable 的表。它有一个名为`data`.

```
data  
-------
10       
20    
30 
```

我需要得到一个专栏

```
data  
-------
10/60   
20/60   
30/60 
```

我将查询写为

```
select data/sum(data) 
  from datatable; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:13:51.230

对于 SQL Server 2005+，您可以这样做：

```
SELECT CAST(data AS VARCHAR(10)) + '/' + CAST(SUM(data) OVER() AS VARCHAR(10))
FROM Datatable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:08:06.893

尝试，

```
select a.data / b.total       -- will result the quotient of 10/60
from   datatable a, 
       (select SUM(data) total from datatable) b 
```

但如果你想把它连接起来

```
select a.data + '/' + b.total -- will result literal string value of 10/60
from   datatable a, 
       (select SUM(data) total from datatable) b 
```

*   [SQLFiddle Demo（*上面的两个查询*）](http://sqlfiddle.com/#!3/a1c0a/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:14:58.390

这适用于 SQL Server 2005 或更高版本：

```
declare @t table (data int)
insert into @t (data) values (10),(20),(30)

select (data * 1.0)/ SUM(data) OVER () from @t 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:19:15.013

`sum`在整个表格上使用窗口函数( `over ()`)：

```
select  1.0 * data / sum(data) over ()
from    tableName 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!3/a1c0a/8/0)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-31T15:11:02.047

我不确定 60 值来自哪里，但我会这样做：

```
select data + '/' + sum(data) from datatable group by data 
```

对于串联，请查看此链接： http: [//msdn.microsoft.com/en-us/library/aa276862 (v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa276862(v=sql.80).aspx)

希望这可以帮助。

# c - 通过内联汇编操作 c 变量

> ID：14628885
> 
> 赞同：6
> 
> 时间：2013-01-31T15:07:32.440
> 
> 标签：c, assembly, inline-assembly

> **可能重复：**
> [如何访问 c 变量以进行内联汇编操作](https://stackoverflow.com/questions/14617953/how-to-access-c-variable-for-inline-assembly-manipulation)

鉴于此代码：

```
#include <stdio.h>

int main(int argc, char **argv)
{
  int x = 1;
  printf("Hello x = %d\n", x);

  } 
```

我想访问和操作内联汇编中的变量 x 。理想情况下，我想使用内联汇编来改变它的值。GNU 汇编器，并使用 AT&T 语法。假设我想在 printf 语句之后将 x 的值更改为 11，我该怎么做呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T15:33:01.863

该`asm()`函数遵循以下顺序：

```
asm ( "assembly code"
           : output operands                  /* optional */
           : input operands                   /* optional */
           : list of clobbered registers      /* optional */
); 
```

并通过您的 c 代码将 11 放到 x 中：

```
int main()
{
    int x = 1;

    asm ("movl %1, %%eax;"
         "movl %%eax, %0;"
         :"=r"(x) /* x is output operand and it's related to %0 */
         :"r"(11)  /* 11 is input operand and it's related to %1 */
         :"%eax"); /* %eax is clobbered register */

   printf("Hello x = %d\n", x);
} 
```

您可以通过避免破坏寄存器来简化上述 asm 代码

```
asm ("movl %1, %0;"
    :"=r"(x) /* related to %0*/
    :"r"(11) /* related to %1*/
    :); 
```

您可以通过避免输入操作数并使用 asm 中的局部常量值而不是 c 中的值来简化更多操作：

```
asm ("movl $11, %0;" /* $11 is the value 11 to assign to %0 (related to x)*/
    :"=r"(x) /* %0 is related x */
    :
    :); 
```

另一个例子：[将 2 个数字与汇编进行比较](https://stackoverflow.com/questions/14523333/compare-2-numbers-with-assembly)

# c# - 导出 IEnumerable 或 IEnumerable 用同样的方法

> ID：14628890
> 
> 赞同：1
> 
> 时间：2013-01-31T15:08:00.007
> 
> 标签：c#

如果我有两个这样的列表：

```
IEnumerable<Student> students;
IEnumerable<Teacher> teachers; 
```

我编写了一个方法，将学生列表导出到 XML 文件并获取

```
IEnumerable<Student> 
```

作为输入。

有没有一种方法可以传入任何一个列表并让该方法导出数据而不必担心它是学生列表或教师列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:14:28.747

列表中的每个项目都需要知道如何导出自己。您需要让每个项目实现一个接口，例如`IExportable`具有`Export`方法的接口。然后，您可以创建一个方法，例如：

```
public static void ExportAll(IEnumerable<IExportable> sequence)
{
    //...
} 
```

然后，您可以传递知道如何导出自身的任何类型的列表。

`IExportable`可能最终`ISerializable`适合您，除非您打算使用其他方式导出项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:23:09.413

从基本抽象类继承，非常适合序列化。

```
public abstract class Person
{
    // your code goes here
    // public string FirstName { get; set; }
    // public string LastName { get; set; }
}

public class Student : Person
{
    // your code goes here
}

public class Teacher : Person
{
    // your code goes here
}

public void Export(IEnumerable<Person> persons)
{
    // your code goes here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:11:55.387

在学生和教师上实现 IPerson 接口。然后更改您的 XML 导出方法以接受 IEnumerable。IPerson 接口将具有检索 XML 导出数据所需的方法。

# c# - 反射问题

> ID：14628894
> 
> 赞同：0
> 
> 时间：2013-01-31T15:08:14.793
> 
> 标签：c#, reflection, polymorphism, system.reflection

假设我有一个`interface`被叫`IVerifier`

```
public interface IVerifier
{
  bool Validate(byte[]x, byte[]y);
} 
```

我不得不通过反射加载一个程序集，并且该程序集拥有相同的签名，这样做有多大可能：

```
IVerifier c = GetValidations();
c.Validate(x,y); 
```

里面`GetValidations()`是反射所在！

我一直在考虑这个问题，我得到的只是调用反射方法将在 inside `GetValidations()`，但它必须像上面那样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:20:15.423

假设您不知道要在另一个程序集中实例化的类型，您只知道它实现`IVerifier`了您可以使用如下方法：

```
static TInterface GetImplementation<TInterface>( Assembly assembly)
{
    var types = assembly.GetTypes();
    Type implementationType = types.SingleOrDefault(t => typeof (TInterface).IsAssignableFrom(t) && t.IsClass);

    if (implementationType != null)
    {
        TInterface implementation = (TInterface)Activator.CreateInstance(implementationType);
        return implementation;
    }

    throw new Exception("No Type implements interface.");       
} 
```

样品用途：

```
using System;
using System.Linq;
using System.Reflection;

namespace ConsoleApplication9
{
    class Program
    {
        static void Main(string[] args)
        {
            IHelloWorld x = GetImplementation<IHelloWorld>(Assembly.GetExecutingAssembly());

            x.SayHello();
            Console.ReadKey();

        }
        static TInterface GetImplementation<TInterface>( Assembly assembly)
        {
            var types = assembly.GetTypes();
            Type implementationType = types.SingleOrDefault(t => typeof (TInterface).IsAssignableFrom(t) && t.IsClass);

            if (implementationType != null)
            {
                TInterface implementation = (TInterface)Activator.CreateInstance(implementationType);
                return implementation;
            }

            throw new Exception("No Type implements interface.");

        }
    }
    interface IHelloWorld
    {
        void SayHello();
    }
    class MyImplementation : IHelloWorld
    {
        public void SayHello()
        {
            Console.WriteLine("Hello world from MyImplementation!");
        }
    }

} 
```

# google-apps-script - 自动删除谷歌驱动器中的文件

> ID：14628895
> 
> 赞同：8
> 
> 时间：2013-01-31T15:08:19.207
> 
> 标签：google-apps-script, google-drive-api

是否有我可以使用的应用程序或脚本在 30 天后或当我的谷歌驱动器快满时自动删除我的谷歌驱动器根目录中的文件（特别是 .jpg）。

我有 .jpg 附件从我的电子邮件自动发送到我的谷歌驱动器。它只是填满了我的谷歌驱动器空间，我希望它们被自动删除。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T16:31:49.607

[根据](https://stackoverflow.com/questions/14580242/in-google-apps-script-is-there-a-way-to-get-to-know-if-a-google-drives-folder-i/14581472#14581472)[Tiziano Solignani](https://stackoverflow.com/users/2009823/tiziano-solignani)和我自己 的另一篇文章，这是一个可以完成这项工作的脚本......`setTrashed`当您在记录器中对其进行全面测试时，请取消注释该语句。不要忘记更改电子邮件地址。

```
function DeleteMyJpegs() {
    var pageSize = 200;
    var files = null;
    var token = null;
    var i = null;
    var ThirtyDaysBeforeNow = new Date().getTime()-3600*1000*24*30 ;// 30 is the number of days 
//(3600 seconds = 1 hour, 1000 milliseconds = 1 second, 24 hours = 1 day and 30 days is the duration you wanted
    Logger.clear()

    do {
    var result = DocsList.getAllFilesForPaging(pageSize, token);
    var files = result.getFiles()
    var token = result.getToken();
        for(n=0;n<files.length;++n){
            if(files[n].getName().toLowerCase().match('.jpg')=='.jpg' && files[n].getDateCreated().getTime()<ThirtyDaysBeforeNow){
    //            files[n].setTrashed(true)
                Logger.log(files[n].getName()+' created on '+Utilities.formatDate(files[n].getDateCreated(), 'GMT','MMM-dd-yyyy'))
            }
          }    
     } while (files.length == pageSize);

      MailApp.sendEmail('myMail@gmail.com', 'Script AUTODELETE Jpegs report', Logger.getLog());

} 
```

编辑：如果您更喜欢查看驱动器中文件的大小，您可以很容易地修改它，对 jpg 的大小和其他占用空间的文件类型进行一些数学运算……并相应地删除一些文件。这是一个说明如何处理这种情况的示例。

# c++ - 打印犰狳矢量/矩阵后禁用换行符（C++）

> ID：14628896
> 
> 赞同：2
> 
> 时间：2013-01-31T15:08:22.467
> 
> 标签：c++, armadillo

我将 C++ 与犰狳库一起使用。当我打印一个向量或矩阵时，在向量/矩阵之后总是包含一个换行符，即使使用 .raw_print() 也是如此。有什么简单的方法可以禁用这种行为吗？

最小的例子：

```
#include <iostream>
#include <armadillo>

using namespace std;
using namespace arma;

int main() {
    rowvec a;
    a << 0 << 1 << 2;
    cout << a;
    a.print();
    a.raw_print();

    mat b;
    b << 0 << 1 << 2 << endr
      << 3 << 4 << 5 << endr
      << 6 << 7 << 8;
    cout << b;
    b.print();
    b.raw_print();
} 
```

我正在使用 GCC 版本 4.4.6 在 linux 上编译和运行

```
g++ test.cpp -o test -larmadillo 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T00:43:50.120

[Armadillo](http://arma.sourceforge.net)中的[.print()](http://arma.sourceforge.net/docs.html#print)函数旨在进行“[漂亮打印](http://en.wikipedia.org/wiki/Prettyprint)”。.raw_print() 函数减少了漂亮打印的数量（即，它不会将数字的表示更改为科学格式），但仍会打印换行符。

*如果这些函数的功能更少，那么它们不会比简单地循环遍历元素并将它们转储到用户流（例如cout* ）提供任何附加值。因此，解决方案就是自己进行打印，通过以下功能：

```
inline
void
my_print(const mat& X)
  {
  for(uword i=0; i < X.n_elem ++i) { cout << X(i) << ' '; }
  } 
```

如果您希望在每行末尾有换行符（最后一行除外）的情况下进行最少量的漂亮打印，请尝试以下操作：

```
inline
void
my_print(const mat& X)
  {
  for(uword row=0; row < X.n_rows; ++row)
    {
    for(uword col=0; col < X.n_cols; ++col) { cout << X(row,col) << ' '; }

    // determine when to print newlines
    if( row != (X.n_rows-1) ) { cout << '\n'; }
    }
  } 
```

请注意，上面的代码仅打印*mat*类型（这是[Mat](http://arma.sourceforge.net/docs.html#Mat) < double > 的 typedef）和派生类型，例如*vec*和*rowvec*。如果要打印任何模板化的 Mat < T > 类型（以及派生类型 Col < T > 和 Row < T >），请尝试以下操作：

```
template<typename eT>
inline
void
my_print(const Mat<eT>& X)
  {
  for(uword row=0; row < X.n_rows; ++row)
    {
    for(uword col=0; col < X.n_cols; ++col) { cout << X(row,col) << ' '; }

    // determine when to print newlines
    if( row != (X.n_rows-1) ) { cout << '\n'; }
    }
  } 
```

此外，如果您希望能够打印任何犰狳矩阵表达式（例如 A+B），请尝试以下操作：

```
template<typename T1>
inline
void
my_print(const Base<typename T1::elem_type,T1>& expr)
  {
  const Mat<typename T1::elem_type> X(expr);  // forcefully evaluate expression

  for(uword row=0; row < X.n_rows; ++row)
    {
    for(uword col=0; col < X.n_cols; ++col) { cout << X(row,col) << ' '; }

    // determine when to print newlines
    if( row != (X.n_rows-1) ) { cout << '\n'; }
    }
  } 
```

请注意，如果表达式只是单个矩阵，则上面的代码将复制一个矩阵。如果需要效率，则需要模板元编程来避免复制，这超出了原始问题的范围。

# mvvm - 淘汰视图模型概念

> ID：14628897
> 
> 赞同：0
> 
> 时间：2013-01-31T15:08:29.073
> 
> 标签：mvvm, knockout.js

我无法找到以下问题的答案......请给我一个建议。
我有一个表单，它是基于通过 ajax 请求从服务器获取的元数据动态构建的。它获取大约 20 个显示数据值和大约 10 个用户输入字段。因此，展示视图模型和后视图模型是不同的。填充的字段也通过 ajax 发回。
如何正确应用 Knockout 视图模型概念？
1\. 我制作了一个视图模型来显示和发布数据。在这种情况下，AJAX 调用会将大量冗余数据回传到服务器。选项：我可以发送一个只包含输入字段的新对象，但在 KO 概念中它看起来并不好。
2\. 我制作了一个仅包含用户输入字段的视图模型。要显示的只读字段不在 KO 视图模型中，而是使用常见的 jQuery 方法填充（所以我们再次脱离了纯 KO 样式）
3\. 或者？
我很欣赏你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:53:38.717

Knockout 提供了将 MVVM 模式应用于客户端 (HTML5/Javascript) 应用程序的能力。您的 JavaScript 视图模型应提供操作视图或它负责的视图所需的所有数据和属性，包括用户输入字段和仅显示字段。

一旦您将某些内容发布回服务器，您将离开 MVVM 世界并进入另一层以执行某些操作。因此，我认为最好制定只包含服务器完成请求所需的数据的 JSON。在服务器端，您可能有一个带有验证属性或其他任何东西的 C# 模型，但是，同样 - 您并没有尝试在那里遵守 MVVM 模式。

希望这会有所帮助。如果需要，我很乐意详细说明。

# c# - 将对象保存到没有序列化属性的文件的最简单方法是什么？

> ID：14628899
> 
> 赞同：5
> 
> 时间：2013-01-31T15:08:29.930
> 
> 标签：c#, xml, serialization

我在 c# 中有不同类型的对象，我想将它们保存到文件中（首选 XML），但我不能使用序列化，因为该类不是我编写的，而是来自 DLL。

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T01:03:55.970

我最终使用了 JavaScriptSerializer，它完全符合我的要求：

```
List<Person> persons = new List<Person>();
persons.Add(new Person(){Name = "aaa"});
persons.Add(new Person() { Name = "bbb" });

JavaScriptSerializer javaScriptSerializer  = new JavaScriptSerializer();
var strData = javaScriptSerializer.Serialize(persons);

var persons2 = javaScriptSerializer.Deserialize<List<Person>>(strData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:05:57.553

给定一个不可序列化的对象，我创建了一个快速的小扩展方法，它将“序列化”为 XML。它非常粗糙，不会进行大量检查，并且它生成的 XML 可以轻松调整以满足您的需求：

```
public static string SerializeObject<T>(this T source, bool serializeNonPublic = false)
{
    if (source == null)
    {
        return null;
    }

    var bindingFlags = BindingFlags.Instance | BindingFlags.Public;

    if (serializeNonPublic)
    {
        bindingFlags |= BindingFlags.NonPublic;
    }

    var properties = typeof(T).GetProperties(bindingFlags).Where(property => property.CanRead).ToList();
    var sb = new StringBuilder();

    using (var writer = XmlWriter.Create(sb))
    {
        writer.WriteStartElement(typeof(T).Name);
        if (properties.Any())
        {
            foreach (var property in properties)
            {
                var value = property.GetValue(source, null);

                writer.WriteStartElement(property.Name);
                writer.WriteAttributeString("Type", property.PropertyType.Name);
                writer.WriteAttributeString("Value", value.ToString());
                writer.WriteEndElement();
            }
        }
        else if (typeof(T).IsValueType)
        {
            writer.WriteValue(source.ToString());
        }

        writer.WriteEndElement();
    }

    return sb.ToString();
} 
```

我在这堂课上测试了它：

```
private sealed class Test
{
    private readonly string name;

    private readonly int age;

    public Test(string name, int age)
    {
        this.name = name;
        this.age = age;
    }

    public string Name
    {
        get
        {
            return this.name;
        }
    }

    public int Age
    {
        get
        {
            return this.age;
        }
    }
} 
```

以及数字`3`和`object`。生成的 XML 如下所示：

```
<?xml version="1.0" encoding="utf-16"?>
<Test>
  <Name Type="String" Value="John Doe" />
  <Age Type="Int32" Value="35" />
</Test>

<?xml version="1.0" encoding="utf-16"?>
<Int32>3</Int32>

<?xml version="1.0" encoding="utf-16"?>
<Object /> 
```

分别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:13:01.380

围绕 DLL 的不可序列化类编写自己的可序列化包装器。

编辑：评论中建议使用 AutoMapper，但我还没有听说过，但现在我肯定会使用它而不是自己编写包装器。除非需要一些反射来捕获不可序列化对象的某些内部状态（如果可能），否则我不知道 AutoMapper 是否可以提供任何东西，或者您必须查看是否可以在包装器中捕获它.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T16:05:55.163

我认为问题标题中的“无序列化”一词具有误导性。

如果我理解正确，您想要序列化没有序列化属性的对象。

有诸如[sharpserializer](http://www.sharpserializer.com/en/index.html)和[protobuf-net](http://code.google.com/p/protobuf-net/)之类的库可以为您完成这项工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T15:46:35.520

我会编写一个 POCO（普通旧类对象）类来模仿返回的 DLL 中的对象。通常，如果您使用的是 .NET 3.5 或更高版本，您就可以使用 LINQ。我赞成 Linq 将对象放入其他类或对它们执行排序或其他操作。

这是一个简单的示例，例如，您将在返回对象中进行模拟。请记住，在 DLL 中，您当然可以拥有许多不同的对象并多次执行此操作。我也会将我的方法封装在他们自己的类中以实现重用，而不是在主类中进行。但这是一个简单的概念证明

```
using System;
using System.Linq;
using System.Windows.Forms;
using System.IO;
using System.Xml.Serialization;
using System.Collections.Generic;
using System.Xml.Linq;

namespace ExampleSerializer
{
    class Program
    {
        // example class to serialize
        [Serializable]
        public class SQLBit
        {
            [XmlElement("Name")]
            public string Name { get; set; }

            [XmlText]
            public string data { get; set; }
        }

        // example class to populate to get test data
        public class example
        {
            public string Name { get; set; }
            public string data { get; set; }
        }

        static void Main(string[] args)
        {
            string s = "";

            // make a generic and put some data in it from the test
            var ls = new List<example> { new example { Name = "thing", data = "data" }, new example { Name = "thing2", data = "data2" } };

            // make a second generic and put data from the first one in using a lambda
            // statement creation method.  If your object returned from DLL is a of a
            // type that implements IEnumerable it should be able to be used.
            var otherlist = ls.Select(n => new SQLBit
                {
                    Name = n.Name,
                    data = n.data
                });

            // start a new xml serialization with a type.
            XmlSerializer xmler = new XmlSerializer(typeof(List<SQLBit>));

            // I use a textwriter to start a new instance of a stream writer
            TextWriter twrtr = new StreamWriter(@"C:\Test\Filename.xml");

            // Serialize the stream to the location with the list
            xmler.Serialize(twrtr, otherlist);

            // Close
            twrtr.Close();

            // TODO: You may want to put this in a try catch wrapper and make up your 
            // own classes.  This is a simple example.
         }
    }
} 
```

# python - 进一步自定义 Django admin（添加新对象）

> ID：14628901
> 
> 赞同：1
> 
> 时间：2013-01-31T15:08:40.323
> 
> 标签：python, html, django, django-admin

我已经对 Django 管理界面进行了一些配置（内联、过滤器、order_by ...），但我想在添加新项目时更改保存按钮的行为。看看我的界面（它是法语的，但应该很容易理解 prix:price - enregistrer:save）

![Django 管理界面](../Images/626883ec340140b87a5b1a860afebd87.png)

我有三个价格字段，一个用于当前项目价格，另一个用于以前的价格。**我想要做的是当当前价格更改并保存时，价格的数据会自动转到价格 2 和价格 2 到价格 3。**像那样，我总是看到旧价格是多少。

也许还有一件事：是否有可能当单击 save(enregistrer) 时，我可以返回到特定页面，而不是返回所有对象的列表？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:25:01.440

有几种方法可以满足您的要求。最明显的两个是：

1.  覆盖`save`模型的方法（请参阅[Django 文档](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-model-methods)）。
2.  覆盖`save_model`你的方法`ModelAdmin`。

我会选择 1。因为这看起来像是您不想明确与管理员绑定的逻辑，但这取决于您正在构建的应用程序。

关于重定向，您可能想看看[Redirect on admin Save](https://stackoverflow.com/questions/1339845/redirect-on-admin-save)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:17:10.910

您可以像这样覆盖管理员保存方法：

```
class MyModelAdmin(admin.ModelAdmin):
    def save_model(self, request, obj, form, change):
        # custom stuff here
        obj.save() 
```

这个问题可能会帮助您在保存后重定向： [Redirect on admin Save](https://stackoverflow.com/questions/1339845/redirect-on-admin-save)

# mysql - MySQL 存储过程没有按预期进行插入

> ID：14628904
> 
> 赞同：-1
> 
> 时间：2013-01-31T15:08:44.997
> 
> 标签：mysql, select, stored-procedures, insert

我正在传递两个参数，我需要使用多个插入调用填充统计表。它不起作用，有人可以帮我解决这个问题吗？

```
CREATE PROCEDURE STAT(IN arg_From DATETIME, IN arg_End DATETIME)

INSERT INTO stats(source_id_fk,source_type,stat_type_id_fk,
                 stat_count,modified_on,created_on)   
(SELECT -1 as source_id_fk ,3 as source_type, 1 AS stat_type_id_fk ,
                 COUNT( 1 ) AS stat_count, NOW( ) AS modified_on , 
                 NOW( ) AS created_on 
FROM  wall_posts WHERE post_type =1 
and created_on >= arg_From 
and created_on <= arg_End group by 1,2,3,5,6)

INSERT INTO stats(source_id_fk,source_type,stat_type_id_fk,stat_count,
                 modified_on,created_on) 
(SELECT -1 as source_id_fk ,3 as source_type, 2 AS stat_type_id_fk , 
                 COUNT( 1 ) AS stat_count  , NOW( ) AS modified_on , 
                 NOW( ) AS created_on 
FROM  wall_posts WHERE post_type =2  
and created_on >= arg_From 
and created_on <= arg_End group by 1,2,3,5,6); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:47:23.513

您需要结束第一个插入语句`;`

为了使 MySQL 不会认为您的过程在那里完成，您必须将这些多条语句封装在一个`BEGIN ... END`块中并更改分隔符。

```
DELIMITER $$
CREATE PROCEDURE STAT(IN arg_From DATETIME, IN arg_eND DATETIME)
BEGIN
INSERT INTO stats(source_id_fk,source_type,stat_type_id_fk,
                 stat_count,modified_on,created_on)   
(SELECT -1 as source_id_fk ,3 as source_type, 1 AS stat_type_id_fk ,
                 COUNT( 1 ) AS stat_count, NOW( ) AS modified_on , 
                 NOW( ) AS created_on 
FROM  wall_posts WHERE post_type =1 
and created_on >= arg_From 
and created_on <= arg_End group by 1,2,3,5,6);

INSERT INTO stats(source_id_fk,source_type,stat_type_id_fk,stat_count,
                 modified_on,created_on) 
(SELECT -1 as source_id_fk ,3 as source_type, 2 AS stat_type_id_fk , 
                 COUNT( 1 ) AS stat_count  , NOW( ) AS modified_on , 
                 NOW( ) AS created_on 
FROM  wall_posts WHERE post_type =2  
and created_on >= arg_From 
and created_on <= arg_End group by 1,2,3,5,6);
END $$
DELIMITER ; /*and change it back to the normal `;` again*/ 
```

# c++ - 获取通过宏生成的函数的地址

> ID：14628911
> 
> 赞同：1
> 
> 时间：2013-01-31T15:09:04.970
> 
> 标签：c++, macros, function-pointers

我尝试使用通过宏生成函数的代码，如下所示：

文件 A（提供的文件我不能在这里更改任何内容）：

```
#define FUNCTION_GENERATOR(NUM) \
void MyGeneratedFunctionNo##NUM##(void) \
{ \
     another_function_call(NUM); \
} \

FUNCTION_GENERATOR(1)
FUNCTION_GENERATOR(2)
FUNCTION_GENERATOR(3) 
```

文件 B（我想使用指向文件 A 中生成的函数的函数指针的文件）：

```
typedef void (*function_ptr) (void);
function_ptr func_array[3];
func_array[0] = MyGeneratedFunctionNo1;
func_array[1] = MyGeneratedFunctionNo2;
func_array[2] = MyGeneratedFunctionNo3;
... 
```

自然，编译器会抱怨 MyGeneratedFunctionNo1、MyGeneratedFunctionNo2、MyGeneratedFunctionNo3 未定义。

**有没有办法在这个生成的函数中使用函数指针？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:15:12.057

就像任何其他函数一样，您必须**声明**它们。这通常在头文件中完成。

您可以直接执行此操作，也可以定义一个类似于**定义**函数的宏。

具体来说，将其放在一个头文件中，该文件包含在定义函数的文件和使用它们的文件中**：**

```
extern void MyGeneratedFunctionNo1(void); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:19:47.713

该问题与函数指针本身无关。您将无法以任何方式从其他翻译单元访问这些函数，无论是否为指针，因为它们未在其他翻译单元中声明。

典型的基于宏的技术意味着提供和使用*两个*宏：一个用于生成声明，一个用于生成定义

```
#define FUNCTION_GENERATOR_DECL(NUM) \
void MyGeneratedFunctionNo##NUM(void);

#define FUNCTION_GENERATOR_DEF(NUM) \
void MyGeneratedFunctionNo##NUM(void) \
{ \
     another_function_call(NUM); \
} 
```

之后，您在某些实现文件中使用“定义”宏实例化（就像您已经做的那样）

```
FUNCTION_GENERATOR_DEF(1)
FUNCTION_GENERATOR_DEF(2)
FUNCTION_GENERATOR_DEF(3) 
```

并且您通常将“声明符”宏实例化到某个头文件中。

```
FUNCTION_GENERATOR_DECL(1)
FUNCTION_GENERATOR_DECL(2)
FUNCTION_GENERATOR_DECL(3) 
```

**PS**另外，请注意@James Kanze 在评论中提到的一个重要的微妙点（我最初错过了）。`##`运算符不得用于形成无效的预处理令牌。在预处理器语法`(`中是一个独立的独立预处理标记（punctuator），而函数名也是一个独立的独立预处理标记（identifier）。如果您尝试`(`使用`##`运算符将​​函数名称强制连接到 ，您将得到一个无效的预处理标记和未定义的行为。

不要将 连接`(`到函数名。`##`从宏定义中删除第二个。没有它，它将按预期工作。

# ms-access - F# 在 Windows 7 上连接到 MSAccess 2010

> ID：14628912
> 
> 赞同：1
> 
> 时间：2013-01-31T15:09:06.157
> 
> 标签：ms-access, f#, ms-access-2010

在我的 32 位 Windows 7 机器上，我终生无法从 F# 中连接到 MS Access 2010。

```
let path = @"C:\Users\...\db.accdb"
let s = @"Provider=Microsoft.Jet.OLEDB.4.0;DataSource=" + path + ";Persist Security Info=False;"
let conn = new OleDbConnection(s)
do conn.Open() 
```

System.Data.OleDb.OleDbException (0x80004005)：找不到可安装的 ISAM。

有没有更好的方法来解决这个问题？我没有在我的计算机上安装任何附加软件（例如缺少驱动程序）的管理权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:21:30.053

你有错误的连接字符串

```
 Microsoft.ACE.OLEDB.12.0;Data Source= 
```

在全

```
Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\myFolder\myAccess2007file.accdb;
Persist Security Info=False; 
```

Jet 驱动程序适用于 2007 年之前的 MS Access，格式为 *.mbd。

另请参阅：[http ://connectionstrings.com](http://connectionstrings.com)

# java - 空指针异常字符串 null

> ID：14628913
> 
> 赞同：3
> 
> 时间：2013-01-31T15:09:08.810
> 
> 标签：java, nullpointerexception

```
if( currentTimeslot.isEmpty()){
         System.out.println("Do stuff");
            } 
```

我怎么得到一个`NullPointerException`？如何检查字符串是否存在`NULL`，如果存在则执行操作？每当`currentTimeslot`等于`NULL`我得到错误。这是控制台消息：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at PM.ui.MainFrame.getJPanelTopMenu(MainFrame.java:382) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:12:10.070

尝试以下

```
 if( currentTimeslot == null){
             System.out.println("Do stuff");
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:30:25.083

An important thing to ask yourself: Are `null` and empty logically equivalent for what you're doing?

If so, you might want to use this:

```
if (currentTimeslot == null || currentTimeslot.isEmpty()) {
    // Do stuff
} 
```

If the first half of that statement evaluates to `true`, Java won't bother with the second half, thus protecting you from the null-pointer exception.

Another approach would be to normalize your data; if you want `null` and an empty string to be treated as the same thing, just do something like this early in the code:

```
if (currentTimeslot == null) currentTimeslot = ""; 
```

Now you don't have to defensively null-check every time you use it.

As to why you're getting the exception: in Java, all objects (any variable that isn't a primitive type like `int`, `boolean`, etc.) is `null` until you initialize* it. If you try to access any methods or fields of that object, you'll get a null-pointer exception because you're asking the code to access something that doesn't actually exist yet. In Java, you either want to make sure your objects get initialized to something early or do a lot of defensive null-checking (either with `if (variable != null) { ... }` or `try { ... } catch (NullPointerException npe) { ... }` blocks) to prevent exactly the problem you're running into.

*-- Initialize it with something other than `null`, of course.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:55:15.003

```
if(currentTimeslot==null){
    System.out.println("whatever");
} 
```

该命令`currentTimeslot.isEmpty()`与 相同`currentTimeslot.equals("")`，它不被视为空，它只是空的。如果要检查它是否为空或为空，则必须将一个 if-case 放入另一个 if-case，如下所示：

```
if(currentTimeslot==null){
    System.out.println("null string");
}
else{
    if(currentTimeslot.isEmpty()){
       System.out.println("empty string");}
     } 
```

如果要放置的命令很多要复制两次，则可以将它们放入函数中并调用该函数，或者使用在两种情况下都为真的布尔变量，然后检查布尔变量是否为真其余的命令，如下所示：

```
 boolean empty;
if(currentTimeslot==null){
    System.out.println("null string");
    empty=true;
}
else{
    if(currentTimeslot.isEmpty()){
       empty=true;
       System.out.println("empty string");}
     }
 if(empty){
 ....
 .... } 
```

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T15:19:29.923

您可能是 Java 新手，在 Java 中，对象可以为 null，这意味着该对象上没有可接近的方法，因此每次尝试访问 null 对象的方法时都会抛出 NullPointerException。

要解决此问题，您应该检查 Object is not null by

```
 if ( currentTimeslot != null ){
            ....
        } 
```

由于所有**Java 对象都从 java.lang.Object 扩展而来，**因此此检查不仅适用于 String，而且适用于任何类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T15:23:38.503

If you're getting a null pointer exception, it could be because currentTimeslot is null. So you should first check if it's not null and then invoke one of its methods:

```
if(currentTimeslot!=null && currentTimeslot.isEmpty())... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T15:43:29.173

我建议你放弃大多数字符串空和空测试。 [Apache Commons Lang StringUtils](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringUtils.html)很久以前就解决了大多数字符串操作（为空、为空、不为空、全为空等）。

下载 apache commons lang 并使用它。

你的代码会变成这样：

```
if (StringUtils.isEmpty(currentTimeslot))
{
   ... react to an empty currentTimeslot .
}
else // currentTimeslot  is not emty (that includes not null).
{
   .. react to a not empt currentTimeslot 
} 
```

# reporting-services - Visual Studio 中的 SSRS：矩阵分组仅占用第一行

> ID：14628914
> 
> 赞同：0
> 
> 时间：2013-01-31T15:09:16.137
> 
> 标签：reporting-services, ssrs-tablix, ssrs-grouping

这是情况。我正在 VisualStudio 2010 中进行 SSRS 报告。由于某些原因，我无法从 SQL Server 中执行此操作，也无法更改用于获取数据的存储过程。我收到以下格式的数据：

```
2013-01-28  4.0         NCI       
2013-01-28  4.0         VAC       
2013-01-30  4.0         NCE       
2013-01-27  3.0         SF        
2013-01-27  5.0         CSST      
2013-01-29  1.0         SF        
2013-01-29  2.0         NCE 
```

我想制作一个矩阵并按日期对其进行分组以获得如下内容：

```
Date        Amount      Code
2013-01-27  
            3.0         SF        
            5.0         CSST   
2013-01-28  
            4.0         NCI       
            4.0         VAC  
2013-01-29  
            1.0         SF        
            2.0         NCE      
2013-01-30  
            4.0         NCE 
```

这看起来像一个简单的任务，但我尝试的所有教程最终只给了我每个日期的第一行。我很困惑，因为我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:16:23.230

您不需要**Matrix**，这可以显示为**Table**。

根据*Date将***Group**添加到**Table**中，然后在**Table**详细信息行中显示*Amount*和*Code 。*

# c# - 如何在 C# 中制作固定大小的字节数组用户类型？

> ID：14628920
> 
> 赞同：11
> 
> 时间：2013-01-31T15:09:40.777
> 
> 标签：c#

我正在将旧的 Visual BASIC 程序转换为 C#。它通过以太网向某些工业机器发送消息。为此，它从固定大小的用户定义块组装字节流。

大多数这些块都很小，在 C# 中，很容易创建几个字节或整数的结构，并使用 StructLayout 控制它们的大小和布局，例如

```
[StructLayout(LayoutKind.Sequential, Pack = 1)] 
```

...所以当我们进入非托管空间进行按字节复制时，我们没有字节顺序或填充问题。

但是有些 VB6 结构是大数组，例如，

```
Private Type SEND_MSG_BUFFER_320_BYTES
    bytes(0 To 319) As Byte  '320 bytes
End Type 
```

我正在为如何在 C# 中做到这一点而苦苦挣扎。我可以在一个类中创建一个固定大小的数组，例如，

```
 [StructLayout(LayoutKind.Sequential, Pack = 1)]
  public class SOME_BYTES
  {
      public byte[] b = new byte[320];
  } 
```

但要进行逐字节复制，我需要能够在运行时发现它的大小，并且 System.Runtime.InteropServices.Marshal.SizeOf 为此返回**4**。

任何有关如何做到这一点的建议将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T15:12:24.853

如果您可以使用不安全的代码并将您的类更改为结构，则可以使用[固定大小的缓冲区：](http://msdn.microsoft.com/en-us/library/zycewsya.aspx)

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
public unsafe struct SomeBytes
{
    public fixed byte MessageData[320];
} 
```

如果可能的话，我个人会*尽量*避免所有这些。如果您只是通过网络发送数据，为什么需要“进入非托管空间”？你能以某种方式删除这个要求吗？（也许这是基本的 - 但你的问题并不清楚。）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-31T15:12:11.363

您可以使用固定大小的数组：

```
unsafe struct SomeBytes {
    public fixed byte b[320];
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-31T15:19:02.880

我想你想做这样的事情：

```
 [StructLayout(LayoutKind.Sequential, Pack = 1)]
    public class SOME_BYTES
    {
        [MarshalAs(UnmanagedType.ByValArray, SizeConst=320)]
        public byte[] b;
    } 
```

您将按如下方式对其进行初始化：

```
SOME_BYTES data = new SOME_BYTES {b = new byte[320]}; 
```

然后您可以填充 data.b[] 并使用编组来获取要发送的数据。MarshalAs 属性告诉编组器在编组数据时使用什么固定大小的缓冲区。

你不需要使用不安全的固定关键字来做这种事情，我强烈建议你避免。

# ios - 在标题内的 MKAnnotationView 中添加图片

> ID：14628921
> 
> 赞同：2
> 
> 时间：2013-01-31T15:09:50.817
> 
> 标签：ios, xcode, mkmapview, mkannotation, mkannotationview

我正在寻找任何允许我这样做的库：

[1 http://zsoft.es/imgs/annotations.jpg](http://zsoft.es/imgs/annotations.jpg)

并且可能在标题的右侧添加一个按钮，如果可能的话，在字幕中添加更多图像或在字幕中添加按钮......

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:13:39.203

您可以在 MKAnnotationView 上设置以下属性。

```
// The left accessory view to be used in the standard callout.
@property (retain, nonatomic) UIView *leftCalloutAccessoryView;

// The right accessory view to be used in the standard callout.
@property (retain, nonatomic) UIView *rightCalloutAccessoryView; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:18:51.363

从[Apple 文档](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKAnnotationView_Class/Reference/Reference.html#//apple_ref/occ/instp/MKAnnotationView/leftCalloutAccessoryView)中使用`leftCalloutAccessoryView`：

在`(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation`

您可以将 a 分配`UIImageView`给`leftCalloutAccessoryView`：

```
myAnnotationView.leftCalloutAccessoryView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"myImage.png"] 
```

# winapi - 在 Win32 中，如何使用更改颜色对话框来更改 STATIC 文本？

> ID：14628922
> 
> 赞同：2
> 
> 时间：2013-01-31T15:09:51.273
> 
> 标签：winapi

我对 Win32/Windows API（非 MFC）比较陌生，并且正在尝试更改静态文本控件的文本颜色。它已经以黑色绘制到屏幕上，但我想使用 Windows 颜色选择器对话框将其更改为另一种颜色，该对话框在单击按钮时打开。这可能吗？

对于按钮，`WM_COMMAND`消息在单击时处理。到目前为止，我已经写过：

```
CHOOSECOLOR ccColour;
ccColour.lStructSize = sizeof(ccColour);
ccColour.hwndOwner = hWnd;
ccColour.rgbResult = crLabelTextColour;
ccColour.Flags = CC_FULLOPEN | CC_RGBINIT;
if (ChooseColor(&ccColour) == TRUE)
{
    // crLabelTextColour is a COLORREF global variable assigned on loading the program
    crLabelTextColour = ccColour.rgbResult;
} 
```

但是，此代码在语句中出现未处理的异常而失败，`if`我不确定为什么！其他示例似乎编写了这样的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:43:19.843

ChooseColor() 崩溃，因为您没有完全初始化 CHOOSECOLOR 结构。您只设置了 3 个字段，其余字段将包含垃圾。您需要对所有内容进行零初始化，这很简单：

```
 CHOOSECOLOR ccColour = {0}; 
```

# c++ - 输入输出流

> ID：14628923
> 
> 赞同：1
> 
> 时间：2013-01-31T15:09:52.397
> 
> 标签：c++, iostream

打开文件的输入流是否安全，同时打开同一文件的输出流（但不写入）（单线程）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:14:20.757

这可能是“不安全的”，就像不戴头盔骑自行车是不安全的一样。事情可能更容易出错，但如果你聪明且小心，那应该没关系。但是，实际上并没有必要这样做，您可以在想要读入时简单地关闭输出流，然后在读完后重新打开它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T15:31:59.513

部分取决于系统。系统可能不允许。除此之外，一旦您打开了一个流进行写入，并且在同一个文件上打开了多个流（无论方向如何），您就必须担心缓冲。在您的情况下，如果您在打开流进行读取之前进行刷新，并且在阅读时不要写入，则应该没问题。如果您尝试写入并读取您写的最后一件事，那就更困难了，因为您无法将读取缓冲区与文件重新同步。如果你试图通过两个不同的流进行写入，那就更成问题了。（虽然如果写入应该始终附加在末尾，并且您可以在刷新时进行安排，打开文件`std::ios_base::app`应该可以解决问题。但这无助于阅读。）

# c# - 在 C# 5 中使用 async/await 模式编写高度可扩展的 TCP/IP 服务器？

> ID：14628927
> 
> 赞同：27
> 
> 时间：2013-01-31T15:09:59.323
> 
> 标签：c#, .net, sockets, async-await

我的任务是设计一个相当简单的 TCP/IP 服务器，它必须接受来自多个客户端的连接。它需要用 C# 编写，我使用的是 .NET 4.5。也就是说，我不确定 .NET 4.5 中 TCP/IP 服务器/客户端可扩展性的当前“最新技术”是什么。

我确实看到了这篇文章：[如何编写可扩展的基于 Tcp/Ip 的服务器](https://stackoverflow.com/questions/869744/how-to-write-a-scalable-tcp-ip-based-server)。但这与 .NET 2.0 和 3.5 相关，并且没有提及 async/await 模式。

我能够以“旧方式”编写服务器......但我想知道“新方式”是什么。

*   在 Socket、TcpClient 或 TcpListener 上使用新的 Async 方法在 C# 中创建可扩展服务器的最佳方法是什么？
*   新的异步方法是否利用 I/O 完成端口？
*   滚动您自己的 Socket 侦听器是否更有效，或者 TcpListener/TcpClient 类现在还不错？

编辑：附加问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T15:46:40.027

> 在 Socket、TcpClient 或 TcpListener 上使用新的 Async 方法在 C# 中创建可扩展服务器的最佳方法是什么？

上没有任何新`async`方法`Socket`；上命名的方法`*Async`是`Socket`一组特殊的 API，用于减少内存使用。`TcpClient`并且`TcpListener`确实得到了一些新`async`方法。

如果你想要最好的可扩展性，你可能最好使用[Stephen Toub 的自定义等待器，用于`Socket`](https://devblogs.microsoft.com/pfxteam/awaiting-socket-operations/). 如果你想要最简单的代码，你最好使用`TcpClient`and `TcpListener`。

> 新的异步方法是否利用 I/O 完成端口？

是的，就像 BCL 中的大多数其他异步 API 一样。AFAIK，`Stream`该类是唯一可能不使用 IOCP 的类；`*Begin`//所有其​​他方法都使用IOCP `*End`。`*Async`

> 滚动您自己的 Socket 侦听器是否更有效，或者 TcpListener/TcpClient 类现在还不错？

这些课程非常好。Stephen Toub 有一篇在内存使用方面效率更高的[博客文章。](https://devblogs.microsoft.com/pfxteam/awaiting-socket-operations/)

# git - 如何使用 git ？混帐提交？混推？

> ID：14628936
> 
> 赞同：0
> 
> 时间：2013-01-31T15:10:28.440
> 
> 标签：git, commit, git-push, git-commit

我在一个网站上工作，出于实际原因我需要使用 Git。但是，我想我还没有完全理解它是如何工作的。

我想做一些非常简单的事情，我正在本地主机上工作。我做了一些更改，有时我使用 Git 将新文件或修改文件放在服务器上。

Edit²：在阅读了一些文档之后，我重新初始化了我所有的 git 存储库。我真的什么都不懂。所以，我连接到我的服务器，并提交文件。在我重新初始化我的本地存储库之后。我添加了我的遥控器，我做到了`git pull carpe master`（carpe 是我的远程服务器别名）。如果我在本地执行 git checkout master，我会看到来自服务器的跟踪文件的所有路径。但是git没有将文件下载到工作树...我真的不明白。我应该怎么做才能在我的本地工作树中获取文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:18:22.113

通过推送，您已将提交发送到位于`ssh://user@myname.my/mypath/.git`. 但是，此存储库的内容独立于您的 Web 服务器所服务的内容——您在浏览器中看到的 HTML（这称为*工作副本*）。您现在需要做的是将存储库中的更改拉入服务器的工作副本 ( `git pull origin`)。

正如其他人所建议的那样，花时间阅读一个体面的 git 教程真的很值得。我个人最喜欢的是[http://gitimmersion.com/](http://gitimmersion.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:13:43.470

您刚刚将更改从本地 master 分支推送到远程 master 分支。（即将您的更改发送到远程服务器。）

在[这里](http://git-scm.com/book)查看 git 的血统介绍

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:13:28.023

这可能会有所帮助：[https ://stackoverflow.com/a/9204499/631619](https://stackoverflow.com/a/9204499/631619)

我认为要知道的关键是：

跟踪分支和“起源”。理解这一点是关键。这是更改如何流入和流出远程服务器和本地环境的中间部分。

# git - Git：git 会推送到所有远程存储库吗？

> ID：14628938
> 
> 赞同：-1
> 
> 时间：2013-01-31T15:10:34.260
> 
> 标签：git

我有一个本地 git 存储库，我将它与（私有）远程 git 存储库结合使用。我正在处理的代码最初来自 github 上的一个开源项目，所以我将它作为远程添加到 github 存储库（使用 git remote add）。

我注意到（使用 git remote -v）对于 fetch 和 push，都添加了远程存储库。根据这里关于 SO 的另一个问题，不可能只有一个 fetch remote repo。但是，我只想从 github 获取，而不是推送。

所以，我的问题是：**当我执行 git push 时，它是推送到所有远程存储库（在这种情况下包括来自 github 的存储库），还是只推送到我的第一个远程存储库？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:11:36.033

不，不是的。（你可以很容易地尝试过）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T15:11:49.493

```
git push MYREMOTE MYBRANCH 
```

会给你你正在寻找的东西。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-31T15:17:34.877

git push origin 将推送本地存储库上的所有更改，这些更改在 origin 具有匹配的远程存储库至于 git push

像 git push 一样工作，当前存储库的远程（或源，如果当前分支没有配置远程）在哪里。

# c++ - LNK2001：无法解析的外部符号，当试图从另一个 DLL 调用对象的方法时

> ID：14628945
> 
> 赞同：0
> 
> 时间：2013-01-31T15:10:49.147
> 
> 标签：c++, visual-c++, dll, lnk2001

我有两个模块，每个模块都有自己的类和自己的对象。每个模块都被编译成一个 DLL。我想进行“跨 DLL”方法调用，具有指向另一个类的对象的指针，但链接器不允许这样做（MSVC++ 2008）。

进一步来说：

*   有calledModule.cpp，有calledClass，以及这个类的对象（calledObject）；类有calledMethod，我想调用它；模块被编译为 DLL 并成为（惊喜！）称为 Lib.dll。
*   有callingModule.cpp，有callingClass；除其他外，该类具有属性，它是指向被调用对象的指针；模块被编译为DLL调用Lib.dll；calledObject 上的指针在构造函数中设置。

我能够编译整个代码。当链接器启动时，麻烦就来了。我得到以下信息：moduleCalling.obj：错误 LNK2001：未解析的外部符号“public：void __thiscall classCalled::methodCalled ...”

我不使用任何 declspec 的东西，所以什么都不会从 calledLib.dll 中导出。

我正在调用的方法（methodCalled）存在于实现中，它的原型在标头中正确声明。classCalled 是一个“基本”类，不是从任何东西继承的。此外，当我将 methodCalled 声明为虚拟...

我很难理解，为什么我不能以“正常”的方式从另一个 DLL 调用对象的方法？为什么将其声明为“虚拟”会有所帮助？有谁知道？我有一些猜测，但专家的回答将有助于理解这些东西。

PS：我使用的是 MSVC++ 2008。

谢谢！

更新：添加代码片段，它反映了代码的外观。

```
// part of calledLib.dll
// moduleCalled.h

class classCalled {
  public:
    int methodCalled() { return 1 };
};

// ---------------------------------------------------------------
// part of callingLib.dll
// moduleCalling.h

#include "moduleCalled.h"

class classCalling {
  public:
    classCalled* ref;
    void justSomeMethod();
};

// ---------------------
// moduleCalling.cpp

#include "moduleCalling.h"

void classCalling::justSomeMethod() {
  ref = new classCalled();
  int a = ref->methodCalled(); // <--- this is not allowed by linker,
                               // unless methodCalled is made virtual.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:38:54.463

链接器链接来自不同模块的代码片段。如果您有从一个模块到另一个模块的调用，链接器必须知道您正在调用的函数是在哪个其他模块中实现的，并用真实地址替换调用。这是一个非常粗略的画面，但足以了解发生了什么。

在您的情况下，链接器必须知道您的函数位于 calledLib.dll 中。因此，您必须链接到引用称为 Lib.dll 的内容。这个东西叫做*导入库*。它的名字应该叫做Lib.lib。为了生成它，您应该编写一个 .def 文件，但是对于类方法来说很难，因为链接器使用的类方法名称看起来与它们在 C++ 代码中的样子非常不同。或者您可以使用 declspecs。它将生成正确的 calledLib.lib，您必须将其与您的 callingLib.dll 链接。

# ios - 自动布局上的 UILabel sizeWithFont 不起作用

> ID：14628952
> 
> 赞同：1
> 
> 时间：2013-01-31T15:11:14.480
> 
> 标签：ios, ios6, autolayout

我更新了我的应用程序，以使用 iPhone 6。但是，当我在 XIB 上打开自动布局时，标签仍然没有调整大小。

```
CGSize expected = [[textLabel text] sizeWithFont:textLabel.font constrainedToSize:max lineBreakMode:textLabel.lineBreakMode]; 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:16:36.020

您是否使用返回的尺寸`-sizeWithFont:constrainedToSize:lineBreakMode:`来设置标签的框架？使用自动布局时，不应直接设置框架。您将需要使用新大小更新视图的约束。

请注意，iOS 6 不需要自动布局。如果您没有令人信服的理由来切换，您最好保留现有应用程序原样。

# python - 将文件内容而不是文件名传递给 xlrd 模块的 open_workbook() 方法

> ID：14628960
> 
> 赞同：5
> 
> 时间：2013-01-31T15:11:47.100
> 
> 标签：python, xlrd

有没有办法将 Excel 文件的*内容*而不是文件名/引用传递给 xlrd 模块的 open_workbook() 函数？为此，我一直在尝试使用“file_contents”参数，但到目前为止还没有取得任何成功。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-17T17:07:35.160

@Ber 的评论是正确的。您将需要使用 StringIO 对象的 getvalue() 方法并将其传递给函数调用中的 file_content 参数。

```
f = StringIO.StringIO(content)
book = xlrd.open_workbook(file_contents = f.getvalue() ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:35:22.410

在大多数需要打开文件的地方，[StringIO](http://docs.python.org/2/library/stringio.html)对象也可以工作。

您只需从文件数据中创建一个 StringIO 对象并将该对象作为文件传递给您的函数。

# .htaccess - 找不到codeigniter页面问题

> ID：14628965
> 
> 赞同：0
> 
> 时间：2013-01-31T15:11:56.510
> 
> 标签：.htaccess, codeigniter

我正在研究根目录下的网站，我有正在建设中的页面。我已经在根目录中的文件夹 newsite 中上传了新站点的文件。

我使用 .htaccess 文件从域中删除 index.php。

如果我键入 www.somesite.com/newsite，或[http://www.somesite.com/newsite](http://www.somesite.com/newsite)显示欢迎控制器。到现在为止还挺好。

我有后台管理系统，当我输入： [http](http://www.somesite.com/newsite/folderName/controllername/functionname) ://www.somesite.com/newsite/folderName/controllername/functionname 时出现 404 错误。

folderName 是放置后台控制器的文件夹的名称。任何人都知道为什么我只在后端收到此错误，而首页正在工作？

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L]

php_value post_max_size 20M
php_value upload_max_filesize 20M
php_value max_execution_time 6000000 
```

如果我在后台办公室的 url 中添加 index.php，例如 [http://www.somesite.com/newsite/index.php/folderName/controllername/functionname](http://www.somesite.com/newsite/index.php/folderName/controllername/functionname)

然后显示页面。

问候，佐兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:55:56.983

添加后

`RewriteBase /newsite/`在`.htaccess`, 页面中显示，现在就像一个魅力。

# mysql - MySQL 多 JOIN 查询

> ID：14628966
> 
> 赞同：1
> 
> 时间：2013-01-31T15:11:59.343
> 
> 标签：mysql

我有 3 张桌子：

表 A：

*   id int
*   值 varchar

表 B：

*   id int
*   a_id 默认为空

表 C：

*   id int
*   a_id 不为空

我需要按 A.value 对 B 行和 C 行的数量进行分组：

```
+---------+----------------------+----------------------+
| A.value | COUNT(DISTINCT B.id) | COUNT(DISTINCT C.id) |
+---------+----------------------+----------------------+
| NULL    | 100                  | 0                    |
| 1       | 543                  | 324                  |
... 
```

问题是 B 表有一个可为空的外键，而 C.a_id 不能为空。因此，经过一小时的尝试，我无法获得正确的查询。C.a_id 正在丢失或 B.a_id。

获得它的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:27:03.310

因为值非常大，最好在子查询中进行计算：

```
select a.name, Distinct_B, Distinct_C
from (select distinct a.name from TableA a) a left outer join
     (select a.value, count(distinct b.id) as Distinct_B
      from TableA a join
           TableB b
           on a.id = b.a_id
      group by a.value
     ) b
     on a.value = b.value left outer join
     (select a.value, count(distinct c.id) as distinct_C
      from TableA a join
           TableC c
           on a.id = c.a_id
    ) c
    on a.value = c.value 
```

这看起来更复杂，但它不需要每个 a.value 中的部分笛卡尔积。此外，如果不允许多个 a.values，它可以被简化。

如果您想通过为它们分配一个 NULL a.value 来保留所有具有“NULL”a_id 的 B 值，那么请改用此子查询：

```
select a.value, sum(Distinct_B), sum(Distinct_C)
from ((select distinct a.name, 0 as Distinct_B, 0 as Distinct_C
       from TableA a
      ) union all
      (select a.value, count(distinct b.id) as Distinct_B, 0 as Distinct_C
       from TableB b left outer join
            TableA a
            on a.id = b.a_id
       group by a.value
      ) union all
      (select a.value, 0 as Distinct_B, count(distinct c.id) as distinct_C
       from TableC c left outer join
            TableA a 
           on a.id = c.a_id
      )
     ) t 
```

按 a.value 分组

这使用聚合而不是连接来将值组合在一起。

# ssis - 如何将导致存储过程异常的 SQL 语句返回到 SSIS

> ID：14628969
> 
> 赞同：1
> 
> 时间：2013-01-31T15:12:08.553
> 
> 标签：ssis

我们有一个 SSIS 包，它通过 EXECUTE SQL TASK 组件调用存储过程。存储过程包含许多不同的 sql 代码，这些代码动态构建，然后在存储过程中通过 exec strSQL 执行。整个系统都是这样构建的，我们此时无法重新设计。问题是，当存储过程中出现故障时，很难从 SSIS 中找出存储过程中的哪些 SQL 语句导致了异常/失败。我们现在拥有并且正在工作的是带有代码的 onError 事件包，用于读取 System::ErrorDescription，这有助于在 SSIS 中显示错误，然后发送带有错误的电子邮件，这是有效的。我什么 我想要添加的是有一个系统变量或其他方式来显示 SSIS 中的实际 SQL（导致存储过程中出现异常的那个），我可以将其包含在电子邮件中。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:26:21.003

我有一个解决方案。表变量不会在 catch 块和回滚语句中发挥作用。

因此，在 sql 语句运行到具有 nvarchar (max) 数据类型的表变量之前，请将它们放入。确保您的 proc 使用 try catch 块和事务。在 catch 块中，如果需要，执行回滚，然后将表变量的内容和日期时间插入到日志表中。现在您可以准确记录运行了哪些查询。如果这也是一个问题，您还可以创建一个单独的表变量来存储您尝试插入或更新的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T17:11:19.627

当您使用 F5 运行包并且 SQL 语句失败时，您可以检查执行结果选项卡，但不幸的是，这仅显示您的 SQL 语句的第一行或第二行。

不要使用 F5 运行包，而是使用 Crtl+F5 运行它。这将打开一个终端窗口并运行包，就好像它是从命令行调用的一样。每个任务运行时都会输出日志信息，如果任务使用 SQL 语句并且失败了，它会输出完整的 SQL 语句。

Ctrl+F5 被称为 'Start without Debugging' 但我一直认为调试包更好。

# chm - 如何反编译包含项目文件的 CHM 文件

> ID：14628983
> 
> 赞同：0
> 
> 时间：2013-01-31T15:12:37.400
> 
> 标签：chm

通过使用：

`hh -decompile test sample.chm`

我在 test 文件夹中获得了反编译的 CHM 文件，以及 toc 和 index 文件，但是项目文件丢失了，所以我无法重新创建 CHM 文件，而无需手动重新创建项目文件。

问题是它不是单个 CHM 文件，所有这些 CHM 文件都是从源文档自动生成的，但是定义字体的 CSS 使用不幸的 sans-serif 字体系列，这在 CHM 渲染（IE）中看起来很难看，我的任务是纠正这个问题。

有人知道可以从 CHM 中提取项目文件的工具，所以我可以在一分钟内完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:48:31.023

I made quick batch script to generate project file.

**Disclaimer**: script assumes toc and index files share same name, and opening page is index.html

**Usage**: `hhp.bat toc-base-name`

```
@echo off
echo [OPTIONS] > %1.hhp
echo Binary TOC=No >> %1.hhp
echo Binary Index=No >> %1.hhp
echo Compiled file=%1.chm >> %1.hhp
echo Contents file=%1.hhc >> %1.hhp
echo Default Window=%1 >> %1.hhp
echo Default topic=index.html >> %1.hhp
echo Display compile progress=No >> %1.hhp
echo Full text search stop list file=%1.stp >> %1.hhp
echo Full-text search=Yes >> %1.hhp
echo Index file=%1.hhk >> %1.hhp
echo Language=0x409 >> %1.hhp
echo Title=%1 documentation >> %1.hhp
echo. >> %1.hhp
echo [WINDOWS] >> %1.hhp
echo %1="%1","%1.hhc","%1.hhk","index.html","index.html",,,,,0x63520,220,0x10384e,[0,0,1024,768],,,,,,,0 >> %1.hhp
echo. >> %1.hhp
echo [FILES] >> %1.hhp
dir/b/s/a-d  | findstr /vi ".hh .bat" >> %1.hhp 
```

# newline - 如何使用 Sonata Admin Bundle 列表视图轻松显示换行符

> ID：14628985
> 
> 赞同：0
> 
> 时间：2013-01-31T15:12:42.037
> 
> 标签：newline, symfony-2.1, sonata-admin

我应该如何在 SonataAdminBundle 的列表视图表中添加换行符？

我向我的实体添加了一个函数，如下所示：

```
getTest() {
    return "test 1 \n test 2";
} 
```

在我的`configureListFields`函数中，我以这种方式添加字段：

```
$listMapper->add('test', null, array('label' => 'Test')) 
```

我也尝试将类型更改为`text`,`string`和`doctrine_orm_text`，但没有帮助。

使用`<br />`而不是`\n`没有帮助，因为输出被转换为 html 实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-20T18:23:31.210

还有一种更简单的方法：

```
protected function configureListFields(ListMapper $listMapper)
{
    $listMapper
        ->add('message', null, array(
            'template' => 'SensioPlatformBundle:Admin:AuditTrail/message.html.twig',
        ))
    //... 
```

然后在您的模板中：

```
<td>
    {{ value|nl2br }}
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:43:05.180

我发现了一种可能性：覆盖文本模板的 base_list_field.html.twig 模板：定义`nl2br`块时添加过滤器：`field`

`list_text_field.html.twig`

```
<td class="sonata-ba-list-field sonata-ba-list-field-{{ field_description.type }}" objectId="{{ admin.id(object) }}">
{% if
        field_description.options.identifier is defined
    and field_description.options.route is defined
    and admin.isGranted(field_description.options.route.name == 'show' ? 'VIEW' : field_description.options.route.name|upper, object)
    and admin.hasRoute(field_description.options.route.name)
%}
    <a href="{{ admin.generateObjectUrl(field_description.options.route.name, object, field_description.options.route.parameters) }}">
        {%- block field %}{{ value|nl2br }}{% endblock -%}
    </a>
{% else %}
    {{ block('field') }}
{% endif %}
</td> 
```

在你的`config.yml`：

```
sonata_doctrine_orm_admin:
    templates:
        types:
            list:
                text: YourBundle:Admin:list_text_field.html.twig 
```

`configureListFields`

```
$listMapper->add('test', 'text', array('label' => 'Test')) 
```

# jquery - 使 jquery ：包含重音不敏感

> ID：14628989
> 
> 赞同：4
> 
> 时间：2013-01-31T15:13:09.017
> 
> 标签：jquery, contains, case-insensitive, accent-insensitive

我有这种不区分大小写的自定义选择器：

```
jQuery.expr[':'].Contains = function(a,i,m) {
    var text = jQuery(a).text().toUpperCase();
    var words = m[3].split(/\s+/);
    for(var i = 0; i < words.length; i++) {
        if (-1 == text.indexOf(words[i].toUpperCase())) {
          return false;
        }
    }
    return true;
}; 
```

它工作正常，但它会被口音弄乱。我的问题很简单，我怎样才能使这个选择器既不**区分大小写又不区分重音**？

我正在考虑使用带有正则表达式的字符映射，但我似乎无法使其正常运行。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-17T12:05:36.343

我在 Github 上找到了这个，它对我很有用： [https ://gist.github.com/oziks/3664787](https://gist.github.com/oziks/3664787)

```
jQuery.expr[':'].contains = function(a, i, m) {
    var rExps=[
        {re: /[\xC0-\xC6]/g, ch: "A"},
        {re: /[\xE0-\xE6]/g, ch: "a"},
        {re: /[\xC8-\xCB]/g, ch: "E"},
        {re: /[\xE8-\xEB]/g, ch: "e"},
        {re: /[\xCC-\xCF]/g, ch: "I"},
        {re: /[\xEC-\xEF]/g, ch: "i"},
        {re: /[\xD2-\xD6]/g, ch: "O"},
        {re: /[\xF2-\xF6]/g, ch: "o"},
        {re: /[\xD9-\xDC]/g, ch: "U"},
        {re: /[\xF9-\xFC]/g, ch: "u"},
        {re: /[\xC7-\xE7]/g, ch: "c"},
        {re: /[\xD1]/g, ch: "N"},
        {re: /[\xF1]/g, ch: "n"}
    ];

    var element = $(a).text();
    var search = m[3];

    $.each(rExps, function() {
        element = element.replace(this.re, this.ch);
        search = search.replace(this.re, this.ch);
    });

    return element.toUpperCase()
    .indexOf(search.toUpperCase()) >= 0;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T15:21:13.433

不要使用 string.indexOf()，而是使用带有正则表达式*不敏感*选项的 string.match()。

就像是：

```
if (!text.match(new RegExp(words[i],'i'))){
   return false;
} 
```

RegExp 比较考虑了 Unicode 字符，因此重音符号将在大小写之间正确匹配。

# python - Python：如何查找文件列表中最常见的元素

> ID：14628992
> 
> 赞同：2
> 
> 时间：2013-01-31T15:13:17.230
> 
> 标签：python, optimization, coding-style

首先很抱歉这个简单的问题，但我想不出最简单的方法来编码我的问题。

我有一个目录，其中包含几个不同的文件，但具有共同的元素（values_25、_26、_28 等）：

```
xxxxx_25.txt
xxxxx_26.txt
xxxxx_27.txt
xxxxx_28.txt
yyyyy_25.txt
yyyyy_26.txt
yyyyy_27.txt
yyyyy_29.txt
mmmmm_25.txt
mmmmm_26.txt
mmmmm_27.txt
mmmmm_30.txt 
```

我希望得到列表

```
xxxxx_25.txt
yyyyy_25.txt
mmmmm_25.txt

xxxxx_26.txt
yyyyy_26.txt
mmmmm_26.txt

xxxxx_27.txt
yyyyy_27.txt
mmmmm_27.txt

xxxxx_28.txt

yyyyy_29.txt

mmmmm_30.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:16:19.423

```
import re

list_with_file_names = 'xxxx_25.txt xxxxx_26.txt xxxxx_27.txt xxxxx_28.txt yyyyy_25.txt yyyyy_26.txt yyyyy_27.txt yyyyy_29.txt mmmmm_25.txt mmmmm_26.txt mmmmm_27.txt mmmmm_30.txt'.split()

def get_number_and_prefix(text):
    g = re.match('.*(\S+)(\d+)', text)
    return tuple([
        int(g.group(2)),
        g.group(1)])

nice_list = sorted(list_with_file_names, key=get_number_and_prefix) 
```

从返回的元组`get_number_and_prefix`将首先按数字排序，然后按前缀排序

相反，如果您想根据文件名中的数字进行分组，则可以使用以下内容：

```
def update_dict_with_file(dict_, filename):
    g = re.match('.*(\d+)', filename)
    key = g.group(1)
    t = dict_.setdefault(key,[])
    t.append(filename)

mydict = {}
[update_dict_with_file(mydict, filename) 
 for filename in list_with_file_names] 
```

`mydict`现在包含文件名中的数字作为键，并包含文件名作为值的列表

**编辑**

总结到目前为止的所有答案，您所需要的只是从列表中构建一个`sorted`列表，使用一个 key getter 函数从文件名中提取您想要的任何内容。您可以通过带有`itertools`+ 列表理解的花哨的单线或更长的`for`循环（没有`yield`任何地方？）来做到这一点。但是，基本上，它们都是一样的。没有火箭科学。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:30:26.337

这将做到：

```
list_of_files = [
    'xxxxx_25.txt',
    'xxxxx_26.txt',
    'xxxxx_27.txt',
    'xxxxx_28.txt',
    'yyyyy_25.txt',
    'yyyyy_26.txt',
    'yyyyy_27.txt',
    'yyyyy_29.txt',
    'mmmmm_25.txt',
    'mmmmm_26.txt',
    'mmmmm_27.txt',
    'mmmmm_30.txt',
    ]

import re
regex = re.compile('_([0-9]+)\.txt$')

def keyfn(name):
    match = regex.search(name)
    if match is None:
        return None
    else:
        return match.group(1)

import itertools
for (key, group) in itertools.groupby(sorted(list_of_files,key=keyfn),keyfn):
    print [x for x in group] 
```

或者，如果您想要一个列表列表，请将`for`循环替换为：

```
[x for g in itertools.groupby(sorted(list_of_files,key=keyfn),keyfn) for x in g[1]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T15:34:37.853

```
#Considering your list of files is as follows
ur_file_list = """xxxxx_25.txt
xxxxx_26.txt
xxxxx_27.txt
xxxxx_28.txt
yyyyy_25.txt
yyyyy_26.txt
yyyyy_27.txt
yyyyy_29.txt
mmmmm_25.txt
mmmmm_26.txt
mmmmm_27.txt
mmmmm_30.txt"""
#Based on the pattern, you can get the key assuming, you need the part in the
#filename (without ext) after underscore. So this will give you the part without regex
key = lambda e: os.path.splitext(e)[0].split("_")[-1]
from itertools import groupby
#On a sorted list, group on the above key function
#And generate a list of these groups
[list(group) for _, group in groupby(sorted(ur_file_list.splitlines(), key = key), key = key)]
[['xxxxx_25.txt', 'yyyyy_25.txt', 'mmmmm_25.txt'], ['xxxxx_26.txt', 'yyyyy_26.txt', 'mmmmm_26.txt'], ['xxxxx_27.txt', 'yyyyy_27.txt', 'mmmmm_27.txt'], ['xxxxx_28.txt'], ['yyyyy_29.txt'], ['mmmmm_30.txt']] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T15:42:02.640

对于这项任务，使用[`collections.defaultdict`](http://docs.python.org/2.7/library/collections.html#collections.defaultdict)非常方便。

```
In [1]: import re; from collections import defaultdict

In [2]: filenames
Out[2]: 
['xxxxx_25.txt',
 'xxxxx_26.txt',
 'xxxxx_27.txt',
 'xxxxx_28.txt',
 'yyyyy_25.txt',
 'yyyyy_26.txt',
 'yyyyy_27.txt',
 'yyyyy_29.txt',
 'mmmmm_25.txt',
 'mmmmm_26.txt',
 'mmmmm_27.txt',
 'mmmmm_30.txt']

In [3]: d = defaultdict(list)

In [4]: for filename in filenames:
  ....:     m = re.search(r'_(\d+)\.txt$', filename)
  ....:     if m:
  ....:         d[m.group(1)].append(filename)

In [5]: [sorted(filename_list) for filename_list in d.values()]
Out[5]: 
[['xxxxx_25.txt', 'yyyyy_25.txt'],
 ['mmmmm_26.txt', 'xxxxx_26.txt', 'yyyyy_26.txt'],
 ['mmmmm_27.txt', 'yyyyy_27.txt'],
 ['xxxxx_28.txt'],
 ['yyyyy_29.txt'],
 ['mmmmm_30.txt']] 
```

# jqgrid - jqgrid网格的设置页面

> ID：14628994
> 
> 赞同：0
> 
> 时间：2013-01-31T15:13:21.097
> 
> 标签：jqgrid

当用户选择一个单元格时，我有以下代码转到 window.location

```
 beforeSelectRow: function (rowid, e) {
                 var $td = $(e.target).closest("td"),
                 iCol = $.jgrid.getCellIndex($td[0]);
                 if (this.p.colModel[iCol].name === 'FlSaved') {
                 var pagenum = $('#reportList').getGridParam('page');
                 var rownum = 200;
                     alert(pagenum);
                     alert(rownum);
                 window.location = "/Plt/FileUpload/" + '?id=' + encodeURIComponent(rowid) + '&pagenum=' + pagenum;
                 } 
```

请注意我是如何传递 pagenum 的。我传递页码的原因是因为当用户在 window.location 完成他们需要做的事情时，我需要用户返回他们所在的网格页面。

为此，我正在执行 loadComplete 我设置页面的值但似乎没有工作。

```
 loadComplete: function (data) {

      if ('@TempData["pageNum"]') {

         $("#rpList").trigger("reloadGrid",[{page:pagenum}]);
} 
```

触发器 reloadGrid 的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:24:03.460

我不清楚何时`'@TempData["pageNum"]'`设置、何时清除以及代码是否会保存在网络浏览器的缓存中。如果我们忘记了这些问题，我对您的代码有一个重要的评论：如果您使用`.trigger("reloadGrid", ...)`inside of`loadComplete`您应该调用`trigger`inside of `setTimeout`。它将允许在开始下一个由 初始化的加载之前处理网格的当前加载直到结束`.trigger("reloadGrid", ...)`。所以代码可能是关于以下内容：

```
loadComplete: function (data) {
    ...
    if (/*some condition*/) {
        setTimeout(function () {
            $(this).trigger("reloadGrid",[{page: pagenum}]);
        }, 50);
    }
    ...
} 
```

事件`0`而不是的用法与没有`50`的用法不同。`.trigger("reloadGrid",...)``setTimeout`

# perl - 使用 mime::lite perl 创建电子邮件（从 gmail 到 gmail）时出错

> ID：14628996
> 
> 赞同：0
> 
> 时间：2013-01-31T15:13:23.013
> 
> 标签：perl, gmail

我创建了这个代码（从 gmail 向 gmail 发送电子邮件）：

```
 use MIME::Lite;
   use Net::SMTP::SSL;
 my $smtps = Net::SMTP::SSL->new ("www.gmail.com", Port=> 465);
  $msg = MIME::Lite->new(
             From     =>'testeotest1234@gmail.com',
             To       =>'xxx',
     #        Cc       =>'some@other.com, some@more.com',
             Encoding => 'base64',
             Subject  =>'Helloooooo, nurse!',
             Data     =>"How's it goin', eh?"
             );

  MIME::Lite->send('smtp','smtp.gmail.com', Port=> 465, Debug=>1, Hello =>'www.gmail.com',AuthUser=>'testeotest1234', AuthPass=>'xxx');

$msg->send(); 
```

但我收到此错误：

```
Port=> 465MIME::Lite::SMTP>>> MIME::Lite::SMTP
MIME::Lite::SMTP>>>   Net::SMTP(2.31)
MIME::Lite::SMTP>>>     Net::Cmd(2.29)
MIME::Lite::SMTP>>>       Exporter(5.65)
MIME::Lite::SMTP>>>     IO::Socket::INET(1.31)
MIME::Lite::SMTP>>>       IO::Socket(1.32)
MIME::Lite::SMTP>>>         IO::Handle(1.31)
MIME::Lite::SMTP=GLOB(0x244c0d4)<<< 220 mx.google.com ESMTP kn18sm4777324veb.5 -
 gsmtp
MIME::Lite::SMTP=GLOB(0x244c0d4)>>> EHLO www.gmail.com
MIME::Lite::SMTP=GLOB(0x244c0d4)<<< 250-mx.google.com at your service, [12.226.1
28.130]
MIME::Lite::SMTP=GLOB(0x244c0d4)<<< 250-SIZE 35882577
MIME::Lite::SMTP=GLOB(0x244c0d4)<<< 250-8BITMIME
MIME::Lite::SMTP=GLOB(0x244c0d4)<<< 250-STARTTLS
MIME::Lite::SMTP=GLOB(0x244c0d4)<<< 250-ENHANCEDSTATUSCODES
MIME::Lite::SMTP=GLOB(0x244c0d4)<<< 250 PIPELINING
SMTP auth() command not supported on smtp.gmail.com 
```

我尝试使用 mail::sender:easy （无法安装，尝试时出现错误），我尝试使用 SSL 行之前创建连接（由于 gmail 连接的工作方式，但无济于事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:18:51.847

尝试[`Email::Sender`](https://metacpan.org/module/Email%3a%3aSender)使用[`Email::Simple`](https://metacpan.org/module/Email%3a%3aSimple). 它们是相对较新的模块，并且比大多数其他模块要好得多。

# excel - Excel 工作表上的 ActiveX 文本框控件文本

> ID：14628997
> 
> 赞同：7
> 
> 时间：2013-01-31T15:13:26.843
> 
> 标签：excel, vba

在 VBA 中，如何访问 Excel 工作表上 ActiveX 文本框控件的文本值？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-31T15:55:01.917

您可以使用`ActiveSheet.TextBox1.Text`来设置或获取 ActiveX 文本框控件的内容。

如果页面上有多个 ActiveX 文本框，您可以使用`ActiveSheet.OLEObjects("boxname").Object.Text`它来设置或获取其内容。boxname 是引号中的框的名称；或不带引号的字符串变量，您已为其分配了文本框的名称；或盒子的对象编号。

有关详细信息，请参阅此[Microsoft 文档](http://msdn.microsoft.com/en-us/library/office/aa221581(v=office.11).aspx)。

# java - java向量问题

> ID：14628999
> 
> 赞同：0
> 
> 时间：2013-01-31T15:13:38.823
> 
> 标签：java, vector

我在尝试将项目添加到向量时遇到错误红色下划线 .add。

请问有什么解决办法吗？谢谢！！

```
import java.util.Vector;
import java.util.*;

public class AllProduct {

    private Vector<Product> allproducts = new Vector<Product>();

    private Vector<Product> mProduct;

    public  AllProduct () {
        allproducts.add("bb");
    }
...
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T15:14:49.080

`"bb"`是一个`String`，不是一个`Product`。您需要以`Product`某种方式制作一个，例如`new Product("bb")`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T15:16:19.687

如果要添加 bb，请将 Vector 的类型更改为 String

```
private Vector<String> allproducts = new Vector<String>(); 
```