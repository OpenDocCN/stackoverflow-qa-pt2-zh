# StackOverflow 问答 15125000-15125999

# javascript - 如何为 JavaScript 命令“onmouseover”添加宽度/高度

> ID：15125002
> 
> 赞同：-2
> 
> 时间：2013-02-28T00:01:03.817
> 
> 标签：javascript, image, height, width, onmouseover

如何在命令中添加宽度/高度`onmouseover`？例子：

```
onMouseOver="if (document.images) document.getElementById('Image-Maps_3201302221606237').src= 'images/rhs2.png';"
onMouseOut="if (document.images) document.getElementById('Image-Maps_3201302221606237').src='images/high_schools.gif';"> 
```

当鼠标移过某个元素时，我需要显示的图像具有一定的宽度或高度？

好的，让您更清楚地了解我要完成的工作，我有一张静态图片，上面有不同的图标，每个图标都有一个链接，基于它从图像中获取的坐标，我希望当鼠标移过地图上的特定坐标以使图标变大或在坐标顶部出现另一个图像，该图像比静态图像上的图标大一点，从而产生使其变大和变大的效果当鼠标熄灭时，新图片消失，这是代码

[https://www.dropbox.com/s/q587j5nizg9r5m6/file.html](https://www.dropbox.com/s/q587j5nizg9r5m6/file.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:03:33.057

`.src='images/rhs2.png`添加后

```
document.getElementById('the-id').style.height = certainHeight; 
```

对宽度做类似的事情。

我还强烈建议您删除`on`事件属性并改用 JavaScript 进行绑定：

```
document.getElementById('Image-Maps_3201302221606237').addEventListener(
    'mouseover', function () {

    this.src = newSrc;
    this.style.height = certainHeight;
    this.style.width = certainWidth;
}); 
```

# java - 将字符串变量转换为列表 [Groovy]

> ID：15125003
> 
> 赞同：25
> 
> 时间：2013-02-28T00:01:05.377
> 
> 标签：java, string, list, groovy

如何将此`String`变量转换为`List`？

```
def ids = "[10, 1, 9]" 
```

我试过： as`List`和`toList();`

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-28T20:20:12.707

```
def l = Eval.me(ids) 
```

获取 groovy 代码字符串（在本例中为“[10,1,9]”）并将其评估为 groovy。这将为您提供 3 个整数的列表。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-28T00:10:43.870

```
def l = ids.split(',').collect{it as int} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-04-16T12:41:13.183

**使用内置的[JsonSlurper](http://docs.groovy-lang.org/latest/html/gapi/groovy/json/JsonSlurper.html)！**

[使用`Eval`是**危险**](https://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html)的，一旦更改数据类型，字符串操作解决方案就会失败，因此它不适应。所以最好使用[JsonSlurper](http://groovy.codehaus.org/gapi/groovy/json/JsonSlurper.html)。

```
import groovy.json.JsonSlurper

//List of ints 
def ids = "[10, 1, 9]"
def idList = new JsonSlurper().parseText(ids)

assert 10 == idList[0]

//List of strings 
def ids = '["10", "1", "9"]'
idList = new JsonSlurper().parseText(ids)

assert '10' == idList[0] 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-03-23T04:56:26.467

这对我有用。并且`Eval.me`不适用于 Jenkins groovy 脚本。我试过了。

```
assert "[a,b,c]".tokenize(',[]') == [a,b,c] 
```

# css - css绝对位置不移动图像

> ID：15125004
> 
> 赞同：2
> 
> 时间：2013-02-28T00:01:10.497
> 
> 标签：css

我有一个 div 只包含 div 内的图像，其中包含所有文本（编写教程）。

html是

```
<div class="hav">
<img src="presentation/hav.png" alt="hav.png" title"hav" />
</div> 
```

样式表上的 CSS 是

```
#hav
{
position: absolute;
top: 600px;
left: 200px;
} 
```

有什么猜测吗？我知道这很简单。它只是不会移动。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T00:03:28.410

您的 div 具有“hav”类，但您在 CSS 中引用了“hav”的 ID。**将#hav**更改为**.hav**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T00:03:19.237

您需要将 CSS 更改为`.hav`. `#`CSS 中的 指的是一个 id，指`.`的是你在`div`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T00:15:23.793

利用

```
position:fixed; 
```

就像在[这个例子](http://www.w3schools.com/Css/tryit.asp?filename=trycss_position_fixed)中一样。**

# java - 如何使文本居中

> ID：15125009
> 
> 赞同：0
> 
> 时间：2013-02-28T00:01:47.620
> 
> 标签：java, android

所以我正在编写一个包含主菜单的程序，对于主菜单，我使用以下代码片段，我的问题是我怎样才能让它看起来居中而不是左对齐的项目。

```
setListAdapter(new ArrayAdapter<String>(MainMenu.this, android.R.layout.simple_list_item_1, Actions)); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:08:00.293

创建一个自定义 TextView 并使用它而不是`android.R.layout.simple_list_item`.

例如，创建一个名为“textview.xml”的布局并使用如下内容：

```
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/arrayTextView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"/> 
```

然后只需`R.layout.textview`在您的`ArrayAdapter`.

# assembly - Nasm 错误：操作码和操作数的组合无效

> ID：15125017
> 
> 赞同：8
> 
> 时间：2013-02-28T00:02:24.073
> 
> 标签：assembly, x86, nasm, cpu-registers, integer-division

在我学习 NASM 的过程中，我正在尝试创建一个非常简单的程序来执行除法并输出结果。

按照书本，一切都应该运行良好。我将 15 除以 3，它应该自动存储在 AX 寄存器中，然后我将其移至 ecx 进行输出。

但是，当我尝试编译时，出现错误

```
nums.asm:6: error: invalid combination of opcode and operands
nums.asm:7: error: invalid combination of opcode and operands 
```

有人知道第 6 行和第 7 行有什么问题吗？

这是我的代码：

```
segment .text

    global main
main:

    div     3, 15
    mov     ecx, ax
    mov ebx,1       ; arg1, where to write, screen
    mov eax,4       ; write sysout command to int 80 hex
    int 0x80        ; interrupt 80 hex, call kernel

exit:   mov eax, 1
    xor ebx, ebx 
    int 0x80 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-28T00:14:03.077

我经常看到这种形式： `div 3, 15`这不是任何有效的 INTEL 助记词！

将 15 除以 3：

```
xor     edx, edx
mov     eax, 15
mov     ecx, 3
div     ecx 
```

对于第二个错误，您不能像这样将 16 位寄存器移动到 32 位寄存器中。您需要使用以下方法之一：

```
xor     ecx, ecx
mov     cx, ax 
```

或者：

```
movzx   ecx, ax 
```

# ios - ios 中的soap 需要启用cookie。如何在肥皂标题中添加它？

> ID：15125018
> 
> 赞同：1
> 
> 时间：2013-02-28T00:02:34.633
> 
> 标签：ios, authentication, soap

我有这个 web 服务 (.asmx) 和这个 obj-c 代码（从 wsdl2code.com 生成）一切正常 - 可以连接和所有这些，但我需要在肥皂调用中设置一些额外的标头信息。

在 .net 中，如果我将“AllowCookies”标志 WCF-config 设置为 true，我只能使用该服务。

像这样：

```
var session = new WebServiceSoapClient();
     ((BasicHttpBinding)session.Endpoint.Binding).AllowCookies = true; 
```

如果我只是直接使用该服务，它会抛出“用户未通过身份验证”异常。

**现在，**我在 iOS 平台上又遇到了这个问题，我不知道如何/在哪里添加信息。我找到[了这篇文章](https://stackoverflow.com/questions/14548949/https-webservice-with-php-session)，并认为我可以用它来做同样的伎俩，只需覆盖一个设置。没有成功。

有人有解决方案吗？或有关设置哪个标头的信息？

（我从第一次身份验证中得到了一个令牌，我想应该在这里使用它..）

更新：

我打开了与 asp.net webapp 和 webservice 的通信，并使用 Fiddler2 来调查标头。一开始我并不清楚，因为“Cookie”标头仅包含 asp.net 中的默认身份验证字符串：“ASP.NET_SessionId={xxxxxxxxxxxxx}”。但我只使用了实际值而不是*整个*字符串。我想这是缺乏基本的 HTTP 标头知识......我在以后的所有请求中将整个字符串附加到标头“Cookie”，它起作用了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:36:00.150

更新：

我打开了与 asp.net webapp 和 webservice 的通信，并使用 Fiddler2 来调查标头。一开始我并不清楚，因为“Cookie”标头仅包含 asp.net 中的默认身份验证字符串：“ASP.NET_SessionId={xxxxxxxxxxxxx}”。但我只使用了实际值而不是整个字符串。我想这是缺乏基本的 HTTP 标头知识......我在以后的所有请求中将整个字符串附加到标头“Cookie”，它起作用了！

# python - 为 BMP085 代码创建循环？

> ID：15125019
> 
> 赞同：1
> 
> 时间：2013-02-28T00:02:35.053
> 
> 标签：python, raspberry-pi

我正在发送一个由 Raspberry Pi 和 BMP085 传感器控制的气象气球，并且我正在通过 I2C 使用一些 Python 代码来运行它。我想修改每半小时运行一次的 Adafruit BMP085 示例代码：

```
#!/usr/bin/python

from Adafruit_BMP085 import BMP085

# ===========================================================================
# Example Code
# ===========================================================================

# Initialise the BMP085 and use STANDARD mode (default value)
# bmp = BMP085(0x77, debug=True)
bmp = BMP085(0x77)

# To specify a different operating mode, uncomment one of the following:
# bmp = BMP085(0x77, 0)  # ULTRALOWPOWER Mode
# bmp = BMP085(0x77, 1)  # STANDARD Mode
# bmp = BMP085(0x77, 2)  # HIRES Mode
# bmp = BMP085(0x77, 3)  # ULTRAHIRES Mode

temp = bmp.readTemperature()
pressure = bmp.readPressure()
altitude = bmp.readAltitude()

print "Temperature: %.2f C" % temp
print "Pressure:    %.2f hPa" % (pressure / 100.0)
print "Altitude:    %.2f" % altitude 
```

我本来打算用一个shell脚本来运行它，但是感觉shell的功率太大了，

```
#!/bin/bash

while true; do
    /gryphon7i/alt/altitude_ai >> measurements.log

    sleep 1800 
done 
```

我该怎么做才能修改代码以每半小时记录一次？我应该坚持shell脚本吗？感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:11:35.487

查看[该页面上发布的以下答案](https://stackoverflow.com/questions/474528/what-is-the-best-way-to-repeatedly-execute-a-function-every-x-seconds-in-python)

您可能需要考虑使用 Twisted 实现的反应器模式。每 30 分钟执行一次命令非常容易。

为了让它工作，你必须首先安装扭曲的库。您可以通过键入

```
sudo easy_install twisted 
```

或者

```
sudo pip install twisted 
```

进入您的控制台。之后，您将能够在代码中使用该库。

```
#!/usr/bin/python

from Adafruit_BMP085 import BMP085
from twisted.internet import task
from twisted.internet import reactor

bmp = BMP085(0x77)    

timeout = 60.0 * 30 # 30 minutes

def doWork():
    temp = bmp.readTemperature()
    pressure = bmp.readPressure()
    altitude = bmp.readAltitude()

    # write log
    f = open('measurements.log', 'a') 
    f.write("Temperature: %.2f C" % temp)
    f.write("Pressure: %.2f hPa" % (pressure / 100.0))
    f.write("Altitude: %.2f" % altitude)
    f.close

l = task.LoopingCall(doWork)
l.start(timeout) # call every sixty seconds

reactor.run() 
```

我是凭记忆写的。您可能需要对代码进行一些试验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T00:14:51.713

```
import time

while True:
    # sleep up until then next 1/2 hour
    time.sleep(1800-time.time()%1800)

    temp = bmp.readTemperature()
    pressure = bmp.readPressure()
    altitude = bmp.readAltitude()

    print "Temperature: %.2f C" % temp
    print "Pressure:    %.2f hPa" % (pressure / 100.0)
    print "Altitude:    %.2f" % altitude 
```

# zend-framework2 - Zend Framework 2 - 输出表单元素，对象作为 HTML 字段

> ID：15125020
> 
> 赞同：5
> 
> 时间：2013-02-28T00:02:37.973
> 
> 标签：zend-framework2

# 介绍

我正在使用可重复使用的管理模块；负责处理Authentication和ACL。这个模块带有一个基本控制器，任何其他实现的模块都可以继承。所以这个控制器是`Cp\AdminController`不可访问的，但被所有其他控制器继承。

# 问题

我有一个默认/家庭控制器`Cp\HomeController`，它有几个动作；登录、注销和忘记/重置密码。目前我正在研究`Cp\HomeController::indexAction`. 在这种方法中，我只需执行以下操作：

```
// ... controller logic ...
public function indexAction()
{
    if ($this->getAuth()->hasIdentity()) {
        # XXX: This is the authorised view/dashboard.
    } else {
        # XXX: This is the unauthorised view; login page.

        $loginForm = new Form\Login();

        # XXX: validation, and login form handling here.

        return array(
            'form' => $loginForm
        );
    }
}
// ... controller logic ... 
```

这里的问题是，`Cp\HomeController`默认情况下使用`./module/Cp/view/cp/home/index.phtml`模板；看起来像：

```
<h1>Authorisation Required</h1>

<section id="admin-login">
    <?= $form ?>
</section> 
```

我`Zend\Form`用自己的表单类`./module/Cp/src/Cp/Form.php`进行了扩展，然后由任何表单类扩展。_请记住，我会将这个类移动到 App 中，以便它完全解耦并且完全可重用。

```
<?php
// @file: ./module/Cp/src/Cp/Form.php

namespace Cp;

use Zend\Form\Form as ZendForm;
use Zend\Form\Fieldset;
use Zend\InputFilter\Input;
use Zend\InputFilter\InputFilter;
use Zend\View\Model\ViewModel;
use Zend\View\Renderer\PhpRenderer;
use Zend\View\Resolver;

class Form extends ZendForm
{
    /**
     * Define the form template path.
     * @var String
     */

    protected $__templatePath;

    /**
     * Define the view variables.
     * @var Array
     */

    protected $__viewVariables = array();

    /**
     * Set the view variable.
     * @param String $key The index for the variable.
     * @param Mixed $value The value for the view variable.
     * @return Cp\Form
     */

    public function set($key, $value)
    {
        $this->__viewVariables[$key] = $value;
        return $this;
    }

    /**
     * Set the template path.
     * @param String $path The path for the template file.
     * @return Cp\Form
     */

    public function setTemplatePath($path)
    {
        $this->__templatePath = $path;
        return $this;
    }

    /**
     * When the object is buffered in output, we're going to generate the view
     * and render it.
     * @return String
     */

    public function __toString()
    {
        // Define our template file as form for resolver to map.
        $map = new Resolver\TemplateMapResolver(array(
            'form' => $this->__templatePath
        ));

        // Define the render instance responsible for rendering the form.
        $renderer = new PhpRenderer();
        $renderer->setResolver(new Resolver\TemplateMapResolver($map));

        // The form view model will generate the form; parsing the vars to it.
        $view = new ViewModel();
        $view->setVariable('form', $this);
        $view->setTemplate('form');

        foreach ($this->__viewVariables as $key => $value) {
            if (! property_exists($view, $key)) {
                $view->setVariable($key, $value);
            }
        }

        return $renderer->render($view);
    }
} 
```

我继承了这个表单类来创建我的登录表单、一个标准的电子邮件地址和密码字段，可以在任何可能发生身份验证的地方重复使用。

```
<?php

namespace Cp\Form;

use Zend\Form\Element;

class Login extends \Cp\Form
{
    public function __construct($name = 'Login', $action)
    {
        // Parse the form name to our parent constructor.
        parent::__construct($name);

        // Override default template, defining our form view.
        $this->setTemplatePath(MODULE_DIR . 'Cp/view/cp/form/login.phtml');

        // Create our form elements, and validation requirements.
        $email = new Element\Email('email');
        $email->setLabel('E-mail Address');

        $password = new Element\Password('password');
        $password->setLabel('Password');

        $submit = new Element\Submit('login');

        $this->setAttribute('action', $action)
            ->setAttribute('method', 'post')
            ->setAttribute('autocomplete', 'autocomplete')
            ->add($email)
            ->add($password)
            ->add($submit);
    }
} 
```

继承的`__toString`方法将采用定义的表单视图，并呈现它。*这*就是我的问题所在，我的问题出现了。在视图中（见下文），我试图通过使用框架来创建表单，而无需对 HTML 元素进行硬编码。由于`Cp\Form\Login`可以扩展和修改类，使用不同的字段或附加字段，可选的或强制的，或有条件的。

有没有办法让 Zend 快速生成以下 HTML？不使用局部视图或物理书写`<input type="<?= ... ?>" name="<?= ... ?>" />`。这是因为属性可以在控制器内部定义或覆盖，因此此时属性是未知的；并且应该对灵活性持开放态度。

```
<section class="authentication-form">
    <h2>Authentication Required</h2>

    <!-- How-to:  Generate the <form> tag and all it's attributes. -->
    <?= $form->openTag() ?>

    <? if ($ipAllowed): ?>
        <p>Please choose an account to log in through.</p>

        <fieldset>
            <?= $form->get('email') ?>
        </fieldset>
    <? else: ?>
        <p>Please log in using your e-mail address and password.</p>

        <fieldset>
            <?= $form->get('email') ?>
            <?= $form->get('password') ?>
        </fieldset>
    <? endif ?>

    <div class="action">
        <!-- How-To:  Generate the <input type="submit" name="" ... attributes ... />
        <?= $form->get('login') ?>
    </div>

    <!-- How-To: Generate the form close tag.
    <?= $form->closeTag() ?>
</section> 
```

希望这比以前更清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:50:54.083

我不确定你的实际问题是什么。你能明确说明吗？

`Zend\Form`被设计成它不会呈现自己，而是由视图助手呈现：

```
<?php
echo $this->form()->openTag($this->form);
echo $this->formCollection($this->form);
echo $this->form()->closeTag($this->form); 
```

您当然可以编写一个视图助手来为您执行此操作。

或者，您可以编写一个视图助手，它采用要呈现的元素列表并编写一个执行以下操作的视图助手：

```
<?php
namespace MyModule\View\Helper;

use Zend\View\Helper\AbstractHelper;

class RenderForm extends AbstractHelper
{
    public function __invoke($fieldsToRender, $form)
    {
        $html = $this->view->form()->openTag($form) . PHP_EOL;

        foreach ($fieldsToRender as $fieldName) {
            $element = $form->get($fieldName);
            $html .= $this->view->formRow($element) . PHP_EOL;
        }

        $html .= $this->view->form()->closeTag($form) . PHP_EOL;

        return $html;
    }
} 
```

然后，您需要在视图脚本中调用`renderForm()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T09:29:15.593

使用 Rob 的响应，我构建了自己的助手来将不同的字段呈现为文本（例如 Foundation 5 行）：

```
namespace MyApp\View\Helper;

use Zend\Form\View\Helper\FormRow;
use Zend\Form\ElementInterface;

class RenderForm extends AbstractHelper
{
    public function __invoke( ElementInterface $element )
    {

        $html  = '';
        $value = '';

        $attributes = $element->getAttributes();

        $type  = $attributes['type'];
        $label = $element->getLabel();

        if( $type == 'text' or $type == 'textarea' or $type == 'datetime' or $type == 'hidden'){
             $value = $element->getValue();
        }

        if( $type == 'select' ){
            $selectedValue = $element->getValue();
            if( is_bool( $selectedValue ) ){
                $selectedValue = (int) $selectedValue;
            }
            $options = $element->getValueOptions();
            $values  = '';
            foreach( $options as $value => $option ){
                 if( (!empty($value) or $value == 0) and $value === $selectedValue ){
                     $values .= $option . '<br />';
                 }
            }
            $value = $values;
        }

        if( $type == 'multi_checkbox'  ){
            $selectedOptions = $element->getValue();
            $options         = $element->getValueOptions();
            $values = '';
            foreach( $options as $option ){
                $optionValue = $option[ 'value' ];
                if(  in_array( $optionValue, $selectedOptions ) ){
                    $values .= $option[ 'label' ]. '<br />';
                }
            }

            $value = $values;
         }

         if( $value == ''){
             $value = 'N/A';
         }

         $html .=   '<div class="row">
                        <div class="small-12 column">
                            <div class="row">
                                <div class="small-3 columns"><label class="right inline" for="tag_id">' . $label . '</label></div>
                                <div class="small-9 columns left" style="padding-top:10px">' . $value . '</div>
                            </div>
                        </div>
                    </div>';
         return $html;
    }
} 
```

# jquery - 单击复选框时更改文本框上的值

> ID：15125028
> 
> 赞同：-2
> 
> 时间：2013-02-28T00:02:58.517
> 
> 标签：jquery, input, checkbox, textarea

我正在构建一个 SMS 应用程序，我希望有一个复选框，如果用户想发送短信，可以单击该复选框。所以现在的问题是，当我单击 SMS 文本的复选框时，我希望它修改文本框区域以允许说 100 个字符。我将如何将以下元素添加到文本框中。下面是我希望文本框在单击复选框后查看的内容。我想通过 jQuery 做到这一点。

```
 <html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#checkbox").click(function() {
            $("input[name='textbox']").val("placeholder='texbox'");

        });
    });
</script>
<title>Test Post</title>

 </head>
<body>
<form action="test-exec.php" method="post">
<input type="text" id="textbox" name="textbox">
<input type="checkbox" id="checkbox" value="1" name="checkbox">
<input type="submit" value="submit">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:21:20.063

我同意@bažmegakapa 但下面的任何解决方案。您可以更改元素的属性。

```
$('input').on('click',function(){
   $('textarea').attr('maxlength','100');
}); 
```

这是一个工作[小提琴](http://fiddle.jshell.net/QTpCX/)

# java - 为什么这个输入没有放在二维数组中，而在 Java 中只输出一个值？

> ID：15125042
> 
> 赞同：-1
> 
> 时间：2013-02-28T00:04:19.063
> 
> 标签：java, arrays

我写了以下代码：

```
for (int i = 0; i < rounds; i++){
        result = rotate(result);
        res[i] = result; 
    }        
        System.out.println(Arrays.toString(res[1])); 
```

然而，即使我监控旋转的输出，我仍然得到这个输出：

```
[87, 56, 119, 111, 111, 114, 100, 33, 49, 50, 51]
[56, 119, 111, 111, 114, 100, 33, 49, 50, 51, 87]
[119, 111, 111, 114, 100, 33, 49, 50, 51, 87, 56]
[111, 111, 114, 100, 33, 49, 50, 51, 87, 56, 119]
[111, 114, 100, 33, 49, 50, 51, 87, 56, 119, 111]
[114, 100, 33, 49, 50, 51, 87, 56, 119, 111, 111]
[100, 33, 49, 50, 51, 87, 56, 119, 111, 111, 114]
[33, 49, 50, 51, 87, 56, 119, 111, 111, 114, 100]
[33, 49, 50, 51, 87, 56, 119, 111, 111, 114, 100] 
```

第一个是未旋转的；第二个旋转等等。你可以看到数字的变化。由于某种原因，这个新的数字数组没有保存在我的数组 res 中。在这种情况下，最后一个输出应该与第二个输出相同，但由于某种原因，它总是在最后一个输出之前（从 33 开始）。我看不到我的错误，请帮助我。

编辑：对不起。这是旋转（）的代码：

```
public static byte[] rotate(byte[] a) {
//store initial array in a temporary variable
int Array = a[0];
int i;
for (i = 0; i < a.length - 1; i++) {
    // Move each item up one spot
    a[i] = a[i + 1]; 
}

// At the end of the array, put what was stored.
a[a.length -1] = (byte) Array;
System.out.println(Arrays.toString(a));

// You can't print the array itself, you print its elements
//System.out.println(a);
return (a); 
```

我认为没有必要，因为 rotate() 的输出是正确的。由于某种原因，它只是没有被放置在数组中。（因此是二维数组，数组中的数组）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:07:31.123

看看你的旋转实现。如果它没有为结果分配一个新数组，那么你在“res”中的每个引用都将指向同一个数组对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:32:29.993

对不起。这是旋转（）的代码：

```
public static byte[] rotate(byte[] a) {
    //store initial array in a temporary variable
    int Array = a[0];
    int i;
    for (i = 0; i < a.length - 1; i++) {
        // Move each item up one spot
        a[i] = a[i + 1]; 
    }

    // At the end of the array, put what was stored.
    a[a.length -1] = (byte) Array;
    System.out.println(Arrays.toString(a));

    // You can't print the array itself, you print its elements
    //System.out.println(a);
    return (a); 
```

我认为没有必要，因为 rotate() 的输出是正确的。由于某种原因，它只是没有被放置在数组中。（因此是二维数组，数组中的数组）。

# database - Neo4j：如何锁定整个数据库

> ID：15125045
> 
> 赞同：0
> 
> 时间：2013-02-28T00:04:41.110
> 
> 标签：database, neo4j, graph-databases

在 mysql 中，您可以通过发出以下命令来锁定整个数据库： `FLUSH TABLES WITH READ LOCK;`

要解锁 mysql 数据库，请发出以下命令： `UNLOCK TABLES;`

neo4j 是否有两个这样的命令（锁定和解锁整个数据库）？如果没有，是否有一些聪明的步骤可以实现数据库范围的锁定/解锁？

[Neo4j 事务](http://docs.neo4j.org/chunked/milestone/transactions.html)：在节点和关系级别获取锁。

[Neo4j 在备份期间不会锁定](http://docs.neo4j.org/chunked/stable/operations-backup.html)：

> 完全备份复制数据库文件而不获取任何锁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:36:51.323

neo4j.settings 文件中有一个选项，您可以在其中将数据库设置为只读，但这需要重新启动实例。我不知道如何在旅途中锁定和解锁它的任何实用方法。

# php - 循环遍历 XML 文件的文件夹？

> ID：15125049
> 
> 赞同：-2
> 
> 时间：2013-02-28T00:05:08.063
> 
> 标签：php

我有一个包含 XML 文件的文件夹，我想循环访问它。

我已经创建了 XML 解析器，它在指定一个要加载的 xml 文件时工作，但我有点想将我写的内容包装在一种 foreach 循环情况中，它查找文件夹名称，循环遍历每个XML 文件，然后在它们被循环通过后将其删除。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:22:35.463

查看[`glob()`](http://php.net/glob)功能。

具体来说：

```
$files = glob("directory/*.xml"); 
```

然后`foreach`在这个文件名列表上。

对于嵌套文件夹，调查[`RecursiveDirectoryIterator`](http://php.net/RecursiveDirectoryIterator).

# java - 在 Java 中构建注册功能

> ID：15125052
> 
> 赞同：-1
> 
> 时间：2013-02-28T00:05:27.673
> 
> 标签：java

我正在用java开发一个注册和登录程序。由于我是 java 新手，我不确定注册部分使用什么。他们有像 C++ 这样的结构来存储帐户信息吗？还是可以做到这一点的类似且简单的方法？

另外，现在我正在尝试数组方法，这意味着每次用户输入所需的信息时，它都会将每个值存储到适当的数组中。例如一个

```
final Vector<String>[] usernameV = (Vector<String>[]) new Vector [100]; 
```

从用户名文本字段读取输入后

```
usernameIn = usernameField.getText(); 
```

该值将存储到向量中

```
usernameV[i].add(usernameIn); 
```

但是，如果我有 getPassword(); 我可以使用什么？存储来自 JPasswordField 的输入密码？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:15:41.550

您可以使用 string[][] 并且喜欢

```
string[0][0] = "user1"
string[0][1] = "password1"
string[1][0] = "user2"
string[1][1] = "password2" 
```

您是 java 新手，但您可以尝试 HashMaps，它更容易解决这个问题，但一开始更难实现。

看这里[http://www.java-tips.org/java-se-tips/java.util/how-to-use-of-hashmap.html](http://www.java-tips.org/java-se-tips/java.util/how-to-use-of-hashmap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:23:57.633

与 Java 中的 struct 类似的是类（通常是值对象的“bean”）。所以你可以有

```
class User {
    public String username;
    public String password;
} 
```

模仿一个结构。虽然更常见的是豆

```
class User {
    private String username;
    private String password;

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    // getPassword and setPassword similar
} 
```

这很冗长，但提供了一些额外的封装，因为类外的世界取决于方法，而不是它们作为私有变量的实现。

那么您的用户“数据库”可能是一个地图。

```
HashMap<String,User> allUsersByName = new HashMap<String,User>();

// store a new user or update
allUsersByName.put(username, user);

// look up a user
allUsersByName.get(user); 
```

通常用户数据库需要在应用程序重新启动时保持不变，因此您将使用关系数据库和一些 ORM 库（如 Hibernate），或者您将编写手动数据访问代码以将上述内容转换为用户表中的“SELECT”和“INSERT”。

良好的安全实践将在用户名+盐上存储盐和单向加密哈希函数的值。但那是另一回事了——问题是用什么来代替 struct。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:28:57.523

好的，我做了一个更简单的方法来存储用户名和密码数据。当用户提交注册表单时，它会输出到一个文本文件中

```
private class submitListener implements ActionListener {
    public void actionPerformed(ActionEvent e){
        try {
            String newEmail, newUser, systemMsg;
            char[] newPass;
            char[] confirmNewPass;

            newEmail = emailField.getText();
            newUser = usernameField.getText();
            newPass = passwordField.getPassword();
            confirmNewPass = confirmPassField.getPassword();

            String strPass = new String(newPass);
            String strConfPass = new String(confirmNewPass);
            if(strPass.equals(strConfPass) && !newEmail.isEmpty() && !newUser.isEmpty() && 
                    !strPass.isEmpty()){
                BufferedWriter out = new BufferedWriter(new FileWriter("Data.txt", true));
                BufferedWriter emailOut = new BufferedWriter(new FileWriter("email.txt", true));
                out.write(newUser);
                out.write("\t\t");
                out.write(newPass);
                out.write(System.getProperty("line.separator"));
                emailOut.write(newEmail);
                emailOut.write(System.getProperty("line.separator"));
                systemMsg = "New account created, please log in.";
                JOptionPane.showMessageDialog(null, systemMsg);
                ((CardLayout)cardPanel.getLayout()).show(cardPanel, "login");
                emailField.setText(null);
                usernameField.setText(null);
                passwordField.setText(null);
                confirmPassField.setText(null);
                out.close();
                emailOut.close();
            }
            else{
                systemMsg = "Please enter the missing information.";
                JOptionPane.showMessageDialog(null, systemMsg);
            }
        }catch(IOException E){}
    }
} 
```

然后它将登录信息与这些现有的文本文件进行比较，如下所示：

```
private class LoginListener implements ActionListener {
    public void actionPerformed(ActionEvent e){
        String username, inUsername, inPass, str = "Incorrect username or password.";
        char[] password;

        username = usernameField.getText();
        password = passwordField.getPassword();
        //Convert char to str
        String convertPass = new String(password);

        try {
            fileScan = new Scanner(new File("Data.txt"));
        }catch(Exception err){}

        while(fileScan.hasNext()){
            inUsername = fileScan.next();
            inPass = fileScan.next();
            if(username.equals(inUsername) && convertPass.equals(inPass)){
                ((CardLayout)cardPanel.getLayout()).show(cardPanel, "main");
                counter++;
            }
        }
        if(counter == 0){
            JOptionPane.showMessageDialog(null, str);   
            usernameField.setText(null);
            passwordField.setText(null);
        }
        fileScan.close();
    }
} 
```

但是当我运行该程序时，即使它们是正确的，它也会不断报告错误的用户名或密码。如何解决这个问题？

# android - 使用图层列表定义可绘制对象，该图层列表具有一半高度的项目

> ID：15125054
> 
> 赞同：4
> 
> 时间：2013-02-28T00:05:35.890
> 
> 标签：android, android-widget

我在我的可绘制文件夹中实现了以下按钮样式：

```
<layer-list
        xmlns:android="http://schemas.android.com/apk/res/android"
        >
        <item>
            <shape
                android:shape="rectangle"
                >
                <stroke android:width="1dp" android:color="#FF666666" />
                <corners
                    android:radius="@dimen/corner_radius" 
                    />
                <solid
                    android:color="#FF000000" 
                    />  
            </shape>
        </item>
        <item
            android:bottom="22dp" android:top="1dp" android:left="1dp" android:right="1dp"
            >
            <shape
                android:shape="rectangle"
                >
                <corners
                    android:topLeftRadius="@dimen/corner_radius" android:topRightRadius="@dimen/corner_radius" 
                    />
                <solid
                    android:color="#10FFFFFF" 
                    />
            </shape>            
        </item>
    </layer-list> 
```

我的问题是我想将第二个项目设置为高度的一半，相对地，而不是绝对地。你可以看到我在这里设置了 'android:bottom="22dp"' 因为我的按钮通常是 45dp 的高度。但是，无论按钮的高度如何，我都希望第二个项目始终处于高度的一半。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T00:29:57.613

在@Tyler 的帮助下，我找到了一种更简单的方法：

```
LayerDrawable layerList = (LayerDrawable)getResources().getDrawable(R.drawable.btn_background).mutate();                
btnBlackLayerList.setLayerInset(0, 0, 0, btnHeight/2);
btn.setBackground(layerList); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T01:22:13.337

您必须以编程方式执行此操作。

1.  给出 layer-list 和第二项`android:id`属性。
2.  用于`getResouces().getDrawable()`获取对图层列表和第二项的引用。请务必将图层列表转换为`LayerDrawable`.
3.  您可能需要调用`Drawable.mutate()`第二`LayerDrawable`个项目`Drawable`。
4.  获取按钮高度并用于`Drawable.setBounds()`相应地修改第二层的绘图矩形。
5.  用于`LayerDrawable.setDrawableByLayerId()`替换`Drawable`图层列表中的更新。
6.  将 LayerDrawable 应用到您的按钮。

# php - 分页 PHP 更改回显文本

> ID：15125055
> 
> 赞同：0
> 
> 时间：2013-02-28T00:05:58.423
> 
> 标签：php, pagination

我最近安装了一个与我的表达式引擎后端一起使用的模块，以便能够定位商店。该模块使用分页来显示多个页面，但是当页面超过一页时，它只是将 ul > li 标签与数字 1 和 2 等链接起来。是否可以更改它以显示第 1 页和第 2 页，同时保持相同的功能。我在下面找到了分页代码。

```
<?php if($numpages > 1): ?>
<ul id="store_locator_pagination">
    <?php for($i=1;$i<=$numpages;$i++): ?>
        <li class="<?php echo $i == $curpage ? 'active' : '' ?>"><a href="?page=<?php echo $i ?>&search=1&store_locator_radius=<?php echo $radius ?>&store_locator_location=<?php echo urlencode($location) ?>"><?php echo $i ?></a></li>
    <?php endfor ?>
</ul> 
```

任何帮助，将不胜感激。干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:10:04.417

```
<?php if($numpages > 1): ?>
<ul id="store_locator_pagination">
    <?php for($i=1;$i<=$numpages;$i++): ?>
        <li class="<?php echo $i == $curpage ? 'active' : '' ?>"><a href="?page=<?php echo $i ?>&search=1&store_locator_radius=<?php echo $radius ?>&store_locator_location=<?php echo urlencode($location) ?>"><?php echo'Page No-'. $i.'' ?></a></li>
    <?php endfor ?>
</ul> 
```

应该为你工作

看这部分

```
<?php echo'Page No-'. $i.'' ?> 
```

只需将`Page No-`qoutes 中的文本更改为您需要的任何文本..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:09:16.750

编码

```
<?php echo $i ?> 
```

在你的标签之间可以很容易地修改来做你想做的事。只需将其更改为在其前面添加单词“Page”即可。

```
<?php echo "Page ".$i ?> 
```

# c - 如何防止名称在 C 中发生冲突

> ID：15125059
> 
> 赞同：2
> 
> 时间：2013-02-28T00:06:26.160
> 
> 标签：c, namespaces, collision

假设我有两个文件：stack.h 和 queue.h。两者都想实现函数 add()。例如，如果我在同一个 main.c 中包含 stack.h 和 queue.h，就会发生冲突。

在两个文件中实现 add() 函数的推荐方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T00:08:01.657

如果这是纯 C，最简单的常见解决方案是在函数上使用与它们所应用的模块或数据结构名称相关的函数命名空间。例如

```
stack_add(...)
queue_add(...) 
```

您会在几乎所有大型纯 C 项目中找到这样的示例：

```
pthread_mutex_lock() // POSIX/UNIX, used for locking a mutex
CGRectMake()         // iOS, used to fill in a CGRect structure
RtlZeroMemory()      // WinNT, "Rtl" indicates the module it belongs to 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T00:09:16.510

如果您已经测试了队列和堆栈实现，并在其他地方引用了......您可以执行一些预处理器技巧，如下所示：

```
#define _STACK
#define _QUEUE

#ifdef _QUEUE
#define add queue_add
  #include "queue.h"
#undef add
#endif

#ifdef _STACK
#define add stack_add
  #include "stack.h"
#undef add
#endif

int main()
{
   stack_add();
   queue_add();
} 
```

我的建议是 - 重构代码库以使用非冲突命名约定，而不是像`add`and`subtract`等通用函数名称。

如果您是面向对象编程风格的粉丝并且喜欢整个“添加”、“修改”概念，那么在队列和堆栈结构中使用函数指针。

```
#define TYPE int

typedef struct tagStruct{
   TYPE *dataBuffer;
   void (*add)(TYPE data);
   void (*modify)(TYPE data, int index);
   void (*deleteEverything)()
}stack; 
```

并在`init(stack)`方法中，将 和 分配给`add()`没有`modify()`名称`deleteEverything()`冲突的不同函数（队列也是如此）

然后，您开始将`stack`和`queue`视为实体，而不是一堆功能。

然后你可以这样做：

```
stack stc;
init(stc); /*sets up the function pointers*/
stc.add(10);
stc.modify(30,0);
stc.deleteEverything(); 
```

# java - 三重嵌套循环打印过多的字符

> ID：15125062
> 
> 赞同：0
> 
> 时间：2013-02-28T00:06:31.247
> 
> 标签：java, loops, nested

我正在开发一个程序，并尝试打印一个 10x10 的板。如果我的对象坐标与 i 和 j 循环整数的迭代匹配，则应打印对象的 char，否则循环应打印“-”。然而，在我的第三个嵌套循环中，由于 15 个对象坐标不匹配，程序会打印出过多的“-”。当其中一个坐标匹配时，如何在保持棋盘形式的同时简单地打印字符。板子应该是这样的

```
. . . . . . . . a .
. . e . . . b . . .
. . . . . . . . . .
. . . .c . . . . . .
. . . . . . . d . .
. . g . . . . . . .
. . . . . . . . . .
. . . . . . . . . .
. . . . h . . . . .
. . . . . . . . . . 
```

我的打印方法代码是

```
public static void printGrid(bumpercar bcar[], int NUMCARS)
{
    //nested loop
    for(int j = 0; j < 16; j++)
    {
    System.out.printf("\n");
        for(int k = 0; k<16; k++)
        {
            for(int l = 0; l<NUMCARS; l++)
             {
            if((bcar[l].getX() == k) && bcar[l].getY() == j)
            System.out.printf("%s", bcar[l].getCarSymbol());
            else
            System.out.printf("- ");
            }
        }
    }
} 
```

导致类似

..........K.................................................. .................................................................... …………………………………………………………………………………… ..................................................... ................................................................. .............................................N. ………………………………………………………………………………………………………………………………………………………… .................... ....................我......... ..................................................... …………………………………………………………………………………………………………………………………… ....................F........E....... ..........L.............. ......................H....MP..........O.... ....J.................... .C....G.................................................. .....................................B............. .............................一个.............…………………………………………………………………………………………………… .................................................... .................................................................... ..................................................

任何想法如何格式化 if 语句来实现这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:09:35.080

将最里面的循环更改为：

```
 boolean found = false;
        for(int l = 0; l<NUMCARS; l++)
        {
          if((bcar[l].getX() == k) && bcar[l].getY() == j) {
            System.out.printf("%s", bcar[l].getCarSymbol());
            found = true;
            break;
          }
        }
        if (!found) {
            System.out.printf("- ");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:11:02.583

问题是每次找到不需要在给定单元格的汽车时，您都在打印一个字符。

固定代码：

```
public static void printGrid(bumpercar bcar[], int NUMCARS)
{
    //nested loop
    for(int j = 0; j < 16; j++)
    {
        System.out.printf("\n");
        for(int k = 0; k<16; k++)
        {
            int l;
            for(l = 0; l<NUMCARS; l++)
            {
                if((bcar[l].getX() == k) && bcar[l].getY() == j) break;
            }
            if (l == NUMCARS) {
                // no car at this location
                System.out.printf("- ");
            } else {
                System.out.printf("%s", bcar[l].getCarSymbol());
            }
        }
    }
} 
```

# sql-server - 将几何图形转换为纬度和经度

> ID：15125065
> 
> 赞同：9
> 
> 时间：2013-02-28T00:07:25.380
> 
> 标签：sql-server

我在我的数据库中发现商店位置表示为`geometry`数据类型。

是否可以转换为坐标`lat`并将`long`其用作 bing 地图的输入？

![在此处输入图像描述](../Images/012140a75b19461e942a590a30fbef21.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-01-13T15:49:53.167

这适用于 sql server 中的几何类型

```
SELECT  [Geometry].STX AS [Longitude],
    [Geometry].STY AS [Latitude]
FROM YourTable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T03:37:16.320

神奇的 8 球说“所有迹象都指向‘是’”。[该文档](http://msdn.microsoft.com/en-us/library/bb933968.aspx "文档")显示了 Lat 和 Long 方法。所以，你会这样做：

```
select 
   Geometry.Lat as [Latitude],
   Geometry.Long as [Longitude]
from dbo.your_table 
```

顺便说一句，如果您有权更改该列的名称，请这样做；您不会调用数据类型为整数“int”的列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-09T20:32:30.780

*2020 年 1 月*：之前显示的格式引发了以下错误：

`OperationalError: (1054, "Unknown column 'geometry_col.Long' in 'field list'")`

但是，**这种格式有效：**

```
SELECT ST_X(geometry_col) AS longitude,
       ST_Y(geometry_col) AS latitude
FROM yourTable; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-14T15:52:25.190

帖子有点老了，但是...

您需要使用一些可以进行预测的资源。许多商店都可以访问 ESRI REST Geometry 服务，一个常见的公开服务是`Project`.

以下是手动步骤，您可以使用普通的 DB 工具将它们重新打包到脚本/过程中：

--QA 数据来自一个名为 ShapeGeom 的 geom 已知点

```
select top 1 ShapeGeom.ToString(),Lat,Long from My_ADDRESS_POINTS 
```

返回： POINT (5786835.7214864492 2235317.366254434) 35.10721420 -120.59089280

--从POINT中提取/重新格式化x，y：5786835.7214864492,2235317.366254434

--REST 调用 - 你的路径会有所不同

```
--Use inSR with the SRID of your Geometry data
select top 1  ShapeGeom.STSrid from  My_ADDRESS_POINTS 
```

--http????/rest/services/Utilities/Geometry/GeometryServer/project? **inSR=2229** &outSR=4251&geometries= **5786835.7214864492%2C+2235317.366254434** &f=json

- 结果：

```
{
 "geometries": [
  {
   "x": -120.59089279999577,
   "y": 35.107214200388704
  }
 ]
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-28T21:47:15.233

我在 .NET 中开发了一个库，可以从事务 sql 调用将 WGS84/UTM 坐标转换为纬度和经度

你可以从 github 下载它：

[https://github.com/jv-garcia/UTM2LATITUDE](https://github.com/j-v-garcia/UTM2LATITUDE)

用法：

选择 dbo.UTM2LATITUDE(723399.51,4373328.5,'S',30) 作为纬度，dbo.UTM2LONGITUDE(723399.51,4373328.5,'S',30) 作为经度

结果：

```
39,4805657453054    -0,402592727245112

<param name="XUTM">pos UTM X</param>
<param name="YUTM">pos UTM Y</param>
<param name="LatBand">Latitude band grid zone designation letter (see http://www.dmap.co.uk/utmworld.htm) </param>
<param name="LongBand">Longitude band grid zone designation number (see http://www.dmap.co.uk/utmworld.htm) </param> 
```

# recursion - 如何仅区分两个目录的内容，而不是文件本身

> ID：15125066
> 
> 赞同：0
> 
> 时间：2013-02-28T00:07:28.217
> 
> 标签：recursion, diff, directory

这看起来像是“被问了一百次”的问题之一，但它很微妙：

我有两个目录，我只想比较它们的文件结构（文件和目录是否丢失）。我不关心文件本身内容的任何差异。

这很重要，有两个原因。首先，我知道一个目录中的许多文件会与另一个不同，但我不在乎，我只关心某些文件/目录是否存在或丢失。其次，这两个目录很大（很多很多 GB），我不希望 diff 必须比较内容，这将花费很长时间。

diff 甚至是正确的工具吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:16:16.813

似乎很容易区分文件列表：

```
find dir1 | sort | sed 's/^dir1//' > dir1-list
find dir2 | sort | sed 's/^dir2//' | diff - dir1-list 
```

# php - simplexml_load_string 函数中的错误

> ID：15125067
> 
> 赞同：0
> 
> 时间：2013-02-28T00:07:28.930
> 
> 标签：php, simplexml

我在变量 php 中有以下字符串

```
<root>
  <id></id>
  <title>Maarch Capture Connector</title>
  <width>400</width>
  <height>250</height>
  <center>true</center>
  <fields>
    <node>
        <type>comboBox</type>
        <id>ingoing</id>
        <label>Courrier</label>
        <autocomplete>false</autocomplete>
        <values>
            <node>
                <id>Y</id>
                <label>Arrivée</label>
            </node>
            <node>
                <id>N</id>
                <label>Départ</label>
            </node>
        </values>
        <default_value>Y</default_value>
        <show_id>false</show_id>
        <mandatory>true</mandatory>
    </node>
    <node>
        <type>comboBox</type>
        <id>priority</id>
        <label>Priorité</label>
        <autocomplete>false</autocomplete>
        <values>
            <node>
                <id>0</id>
                <label>Priorité trés haute</label>
            </node>
            <node>
                <id>1</id>
                <label>Priorité haute</label>
            </node>
            <node>
                <id>2</id>
                <label>Priorité normale</label>
            </node>
            <node>
                <id>3</id>
                <label>Priorité basse</label>
            </node>
        </values>
        <default_value>2</default_value>
        <show_id>false</show_id>
        <mandatory>true</mandatory>
    </node>
    <node>
        <type>comboBox</type>
        <id>services</id>
        <label>Service</label>
        <autocomplete>false</autocomplete>
        <values>
            <node>
                <id>9</id>
                <label>Compay SEGUNDO</label>
            </node>
            <node>
                <id>10</id>
                <label>Contract 1 for Eric SPRITZ : Life insurance</label>
            </node>
            <node>
                <id>13</id>
                <label>Contract 1 for Thomas BECK : Life insurance</label>
            </node>
            <node>
                <id>11</id>
                <label>Contract 2 for Eric SPRITZ : Home insurance</label>
            </node>
            <node>
                <id>14</id>
                <label>Contract 2 for Thomas BECK : Home insurance</label>
            </node>
            <node>
                <id>12</id>
                <label>Contract 3 for Eric SPRITZ : Car insurance</label>
            </node>
            <node>
                <id>15</id>
                <label>Contract 3 for Thomas BECK : Car insurance</label>
            </node>
            <node>
                <id>8</id>
                <label>Edith PIAF</label>
            </node>
            <node>
                <id>1</id>
                <label>Eric SPRITZ</label>
            </node>
            <node>
                <id>5</id>
                <label>Joao GILBERTO</label>
            </node>
            <node>
                <id>6</id>
                <label>Luciano PAVAROTTI</label>
            </node>
            <node>
                <id>7</id>
                <label>Maria BETHANIA</label>
            </node>
            <node>
                <id>16</id>
                <label>MARTIN HR file</label>
            </node>
            <node>
                <id>17</id>
                <label>SMITH HR file</label>
            </node>
            <node>
                <id>3</id>
                <label>Teresa CRISTINA</label>
            </node>
            <node>
                <id>2</id>
                <label>Thomas BECK</label>
            </node>
            <node>
                <id>4</id>
                <label>Tom JOBIM</label>
            </node>
        </values>
        <show_id>false</show_id>
        <mandatory>true</mandatory>
    </node>
</fields>
</root> 
```

当我尝试使用 simplexml_load_string 函数阅读时

```
$xmlForm = simplexml_load_string($string); 
```

我收到这个错误

> 实体：第 1 行：解析器错误：需要开始标记，未找到“<”

我不明白什么是成功的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:33:17.260

我已经解决了我的问题。我的 XML 字符串很好...问题出在我修改过的[Maarch Enterprise的其他文件中。](http://www.maarch.org/en/projects/entreprise)抱歉回复晚了，感谢您的帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:32:46.790

执行此代码：

```
<?php

$str =<<<XML_CONTENT
<?xml version='1.0'?>
<root>
  <id></id>
  <title>Maarch Capture Connector</title>
  <width>400</width>
  <height>250</height>
  <center>true</center>
  <fields>
    <node>
        <type>comboBox</type>
        <id>ingoing</id>
        <label>Courrier</label>
        <autocomplete>false</autocomplete>
        <values>
            <node>
                <id>Y</id>
                <label>Arrivée</label>
            </node>
            <node>
                <id>N</id>
                <label>Départ</label>
            </node>
        </values>
        <default_value>Y</default_value>
        <show_id>false</show_id>
        <mandatory>true</mandatory>
    </node>
    <node>
        <type>comboBox</type>
        <id>priority</id>
        <label>Priorité</label>
        <autocomplete>false</autocomplete>
        <values>
            <node>
                <id>0</id>
                <label>Priorité trés haute</label>
            </node>
            <node>
                <id>1</id>
                <label>Priorité haute</label>
            </node>
            <node>
                <id>2</id>
                <label>Priorité normale</label>
            </node>
            <node>
                <id>3</id>
                <label>Priorité basse</label>
            </node>
        </values>
        <default_value>2</default_value>
        <show_id>false</show_id>
        <mandatory>true</mandatory>
    </node>
    <node>
        <type>comboBox</type>
        <id>services</id>
        <label>Service</label>
        <autocomplete>false</autocomplete>
        <values>
            <node>
                <id>9</id>
                <label>Compay SEGUNDO</label>
            </node>
            <node>
                <id>10</id>
                <label>Contract 1 for Eric SPRITZ : Life insurance</label>
            </node>
            <node>
                <id>13</id>
                <label>Contract 1 for Thomas BECK : Life insurance</label>
            </node>
            <node>
                <id>11</id>
                <label>Contract 2 for Eric SPRITZ : Home insurance</label>
            </node>
            <node>
                <id>14</id>
                <label>Contract 2 for Thomas BECK : Home insurance</label>
            </node>
            <node>
                <id>12</id>
                <label>Contract 3 for Eric SPRITZ : Car insurance</label>
            </node>
            <node>
                <id>15</id>
                <label>Contract 3 for Thomas BECK : Car insurance</label>
            </node>
            <node>
                <id>8</id>
                <label>Edith PIAF</label>
            </node>
            <node>
                <id>1</id>
                <label>Eric SPRITZ</label>
            </node>
            <node>
                <id>5</id>
                <label>Joao GILBERTO</label>
            </node>
            <node>
                <id>6</id>
                <label>Luciano PAVAROTTI</label>
            </node>
            <node>
                <id>7</id>
                <label>Maria BETHANIA</label>
            </node>
            <node>
                <id>16</id>
                <label>MARTIN HR file</label>
            </node>
            <node>
                <id>17</id>
                <label>SMITH HR file</label>
            </node>
            <node>
                <id>3</id>
                <label>Teresa CRISTINA</label>
            </node>
            <node>
                <id>2</id>
                <label>Thomas BECK</label>
            </node>
            <node>
                <id>4</id>
                <label>Tom JOBIM</label>
            </node>
        </values>
        <show_id>false</show_id>
        <mandatory>true</mandatory>
    </node>
</fields>
</root>
XML_CONTENT;

$xmlForm = simplexml_load_string($str);

print_r($xmlForm);

echo "Everything is fine !";

?> 
```

在 PHP 在线机器中，例如：[PHP online](http://www.compileonline.com/execute_php_online.php)

工作正常，所以你的字符串初始化可能有问题（坏的隐形 caraters ......？）

注意：添加 XML 标头标记是尽最大努力，不应忘记

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T00:17:03.070

尝试将空标签替换`<id></id>`为`<id/>`

虽然在技术上是正确的，但它可能会绊倒解析器。

除此之外，对我来说，它看起来像是格式良好的 XML。

# django - django objects.all 查询集不返回数据库中的所有对象

> ID：15125072
> 
> 赞同：1
> 
> 时间：2013-02-28T00:07:43.303
> 
> 标签：django, row, django-queryset

所以我在 django 中使用继承和以下类：

```
class main_menu(node):
    """
    main_menu(node)

    Has no extra fields. All children of the root node must
    be main_menu nodes
    """
    # Required for tree hierarchy to work (db_column='path' for raw queries)
    _path1 = models.CharField(db_column='path', max_length=Global.MAX_FILE_PATH_LENGTH, unique=True);
    main_menu_blah = models.CharField(max_length=30, default='');

    def __unicode__(self):
        return self.main_menu_blah; 
```

# 主菜单

```
class language(main_menu):
    """
    language(main_menu)

    Main menu used specifically for a main menu targetted
    at a speaker of some language.
    """
    # Required for tree hierarchy to work 
    _path2 = models.CharField(db_column='path', max_length=Global.MAX_FILE_PATH_LENGTH, unique=True);
    language_blah = models.CharField(max_length=30, default='');

    def __unicode__(self):
        return self.language_blah; 
```

# 语

```
class language2(language):
    _path3 = models.CharField(db_column='path', max_length=Global.MAX_FILE_PATH_LENGTH, unique=True);
    language_blah2 = models.CharField(max_length=30, default=''); 
```

现在，我可以插入访问所有这些模型就好了。我也可以使用 .objects.get(...) 来获取它们。

但是，如果我从父类表中删除一行（例如 language2 的父类语言），那么我无法从 language2 表中获取（）最后一行。我执行： subNode = language2.objects.get(_path3=);

我总是收到以下错误：

不存在

language2 匹配查询不存在。

我查看了数据库（sqlite），我可以看到最后一个条目在 _path3 列中。

此外，我可以使用原始查询（使用 connection.cursor()）并且可以获得最后一行。但这只是原始数据，我需要一个模型对象。哦，使用 .extra() 也没有用。

为什么我不能得到最后一行？（直到我重新启动服务器）

谢谢。

编辑：其他东西需要不同的“_path *”变量，所以抽象基类在我的情况下无济于事，但这是另一个话题。

至于 db_column='path'，我采用这种方式，以便更简化原始查询，我尝试删除它（以便列是“_path1”、“_path2”等），但问题仍然存在。最令人困惑的部分是原始查询有效，并且重新启动服务器会修复它（直到插入新行，然后看不到最后一行）。

EDIT2：所以我发现了发生了什么。我忘记的重要一点是每张桌子是如何绑在一起的。

如果我有一个基类：A 类

A小类：B类（A）

另一个子类：C类（B）

我有这样的表链接：

A -> B -> C

假设我在每个表中有 2 行（每行代表一个类的实例）：

第 1 行 A：姓名 =“杰拉德”-> B：年龄 =“25”-> C：性别 =“男性”第 2 行 A：姓名 =“珍妮特”-> B：年龄 =“24”-> C：性别="女"

如果删除表 B 中的第二行，则指向表 C 的链接会中断。所以我基本上砍掉了班级的躯干。1/3 的数据丢失。因此，django 将其报告为不存在。

因此，在手动删除条目时请务必小心。你不应该对 django 有这个问题，因为它应该为你跟踪所有这些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:20:43.970

我注意到的第一件事是，您有两个模型从其他类继承并添加自己的字段，但它们使用相同的`db_column`. 实现此目的的一种更简洁的方法（如果您不直接使用`main_menu`）是使用[Abstract Base Class](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes)。

实际上，您的`language2`模型具有以下字段：

```
 _path1 = models.CharField(db_column='path', max_length=Global.MAX_FILE_PATH_LENGTH, unique=True)
    _path2 = models.CharField(db_column='path', max_length=Global.MAX_FILE_PATH_LENGTH, unique=True)
    _path3 = models.CharField(db_column='path', max_length=Global.MAX_FILE_PATH_LENGTH, unique=True)
    main_menu_blah = models.CharField(max_length=30, default='')
    language_blah = models.CharField(max_length=30, default='')
    language_blah2 = models.CharField(max_length=30, default='') 
```

此外，Python 不需要在每条语句的末尾使用分号。

# php - 通过函数参数传递全局变量

> ID：15125081
> 
> 赞同：0
> 
> 时间：2013-02-28T00:08:29.137
> 
> 标签：php, globals

1我知道从一开始就听起来很傻...

让我马上告诉你，这与[PHP 中全局变量和函数参数之间的优势/劣势不是同一个问题。在 stackoverflow 上问](https://stackoverflow.com/questions/2216340/the-advantage-disadvantage-between-global-variables-and-function-parameters-in)。在那里，提问者想知道本地变量与全局变量。在这里，全局变量与全局变量。我的问题是关于 PHP 处理全局变量访问和速度的内部方式。

这是一个问题，在下面的示例中，function_1 是否应该比 function_2 运行得更快？

```
function function_1 ( &$global_variable_x) {
    //do something with $global_variable_x
}

function function_2 () {
    global $global_variable_x;
    //do something with $global_variable_x
} 
```

让我强调一下有什么区别......

在案例 1 中，您在函数参数中传递全局变量，不仅如此，您还通过 ref 传递它，因此内存位置直接传递给 PHP。由于这个技巧，不需要`global`在函数中使用关键字，也正因为如此，PHP 没有时间在全局名称空间中查找全局。那么问题是为什么不这样做呢？它必须更快，不是吗？

当然，很容易误解这个问题并进入谈论的日常琐事

1.  全局很差
2.  全局变量不需要通过函数 args 传递，因为全局变量……是全局变量，因此无论如何都可以在任何地方访问它们。最后，从语义的角度来看，通过函数参数传递一个全局变量是没有意义的，它把人们搞糊涂了。

这些都没有解决所提出的问题。

一切都与速度有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:12:12.510

如果它是全局的，那么将它用作可以看到该全局的函数的参数是没有意义的。它要么 1) 不会更快，要么 2) 它的运行速度几乎不会变慢 3) 它的运行速度会快一点，其原因将违背形式逻辑。

# syntax - Nano 语法突出显示在 nanorc 文件中工作，但仅此而已

> ID：15125094
> 
> 赞同：0
> 
> 时间：2013-02-28T00:09:52.727
> 
> 标签：syntax, highlighting

我相信我完全理解为 nano 打开突出显示的过程。但是，它似乎只在`.nanorc`文件本身中起作用，在其他地方不起作用。我试过取消注释所有的着色线：

```
/etc/nanorc 
```

并在根目录中创建了一个`.nanorc`文件并将所有行复制到该文件中。

仍然只为`.nanorc`文件工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:52:50.017

哎呀，那只花了我一辈子。我试图让 nano 工作的文件是 .cgi 和 .js 扩展名。好吧，这些扩展并没有在实际的 nano 语法着色文件本身中列出。因此，当我取消注释它们或将它们插入 .nanorc 文件时，它们被包括在内，但是我试图编辑的文件没有被包括在内以被着色。一旦我更改了单个包含文件，为我的情况添加了正确的扩展名，一切都像魅力一样。

# c# - 如何使用 LINQ 从数组中删除重复项

> ID：15125099
> 
> 赞同：3
> 
> 时间：2013-02-28T00:10:34.550
> 
> 标签：c#, linq

我是 C# 的初学者，所以我有一个问题，我的数据库中有很多名字我的问题是如何制作脚本来显示在 LINQ 中没有双打的名字数据？这里有一个例子：

```
string[] names = {hello, hello, stack, stack, overflow, overflow}; 
```

我不知道如何做到这一点，有人可以创建一个简单的脚本来展示它如何做。我可以自己解决其余的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T00:12:24.647

干得好：

```
string[] names = {"hello", "hello", "stack", "stack", "overflow", "overflow"};  
var distinctNames = names.Distinct();

foreach(String distinctName in distinctNames) 
    Console.WriteLine(distinctName); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T00:22:31.763

我认为这也应该有效；

```
names.Distinct().ToList().ForEach( n => Console.WriteLine(n)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T01:04:55.037

尽管某些答案已被标记为已接受，但我认为我可以添加一些关于在数组中有对象并且需要基于该对象的某些属性进行区分的情况下可能遇到的**意外问题的重要信息。**

LINQ 的 Distinct() 函数在这种情况下可能无法正常工作，因此您应该使用这样的解决方法（这会给您相同的结果）：

```
var elems = someArray.GroupBy(x=>x.RpopertyToCompare).Select(y=>y.First()); 
```

你可以在这里阅读更多：[http ://blog.jordanterrell.com/post/LINQ-Distinct()-does-not-work-as-expected.aspx](http://blog.jordanterrell.com/post/LINQ-Distinct()-does-not-work-as-expected.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T00:13:45.603

您可以使用[Distinct](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)。

试试这个：

```
string[] names = {"hello", "hello", "stack", "stack", "overflow", "overflow"};
var uniqueNames = (from c in names select c).Distinct();
foreach(String s in uniqueNames) Console.WriteLine(uniqueNames); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-22T12:47:21.267

```
var duplicates = suppliers_arr
    .GroupBy(i => i)
    .Where(g => g.Count() > 1)
    .Select(g => g.Key); 
if(duplicates.Count() > 0){
    foreach (var d in duplicates)
    {
        ModelState.AddFormError(string.Format("{0} is duplicated",d.ToString()));
    }
}else{
     //no duplicates
} 
```

# sql-server - 分析器在过滤掉 sp_reset_connection 时显示它

> ID：15125105
> 
> 赞同：2
> 
> 时间：2013-02-28T00:11:21.180
> 
> 标签：sql-server, sql-server-profiler

我创建了一个带有 TextData 过滤器的新模板，以便在 SQL Server 2012 探查器中不显示 sp_reset_connection 语句。我重新启动了探查器并使用了新模板。但是 sp_reset_connection 语句仍然出现。

任何想法为什么？

![在此处输入图像描述](../Images/ae37c3eed9e4c961dec07c948f16aea2.png)

![在此处输入图像描述](../Images/a03b70f7502ac1d739c655e5a017a4f3.png)

![在此处输入图像描述](../Images/289dec6c8f911463f647e2801fc57a36.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T03:14:33.390

不要在您的条件中包含“%”百分比。只需按原样输入 exec sp_reset_connection。

# c++ - 如何将两个参数的函数“转换”为一个参数的函数？

> ID：15125106
> 
> 赞同：5
> 
> 时间：2013-02-28T00:11:29.657
> 
> 标签：c++, c, matlab, lambda, function-binding

在matlab中，可以这样写：

```
S = @(x,y) x^2+y^2-1
G = @(x) S(x,1); 
```

如果我有一个需要单参数函数的函数，我可以执行上述操作。我怎样才能在 C/C++ 中做到这一点？

我有一个库函数（来自 CGAL 库），它期望作为参数的函数本身只有一个参数。理想情况下，我有一个类 ( `SphericalHarmonics`)，我希望有一个成员函数，它接受一个参数。所以我有：

```
FT SphericalHarmonics::distFunction(Point_3 p) 
```

（请注意，这`FT`是一种类似于`double`）但当然当我尝试

```
SphericalHarmonics *sh = new SphericalHarmonics(1);
Surface_3 surface(sh->distFunction, Sphere(ORIGIN,2.)); 
```

`this`也被当做参数，我的`distFunction`函数是两个参数的函数，会抛出错误。

请注意，这可以通过全局变量来解决，即

```
SphericalHarmonics *sh;
FT dist_function(Point_3 p) {
    return sh->distFunction(p);
}

main() {
    sh = new SphericalHarmonics(1);
    Surface_3 surface(dist_function);
} 
```

然而，这真的很不理想。我想要一种没有全局变量的方法，因为能够拥有一个易于与 CGAL 库集成的类函数会好得多。

提前致谢！

**[更新]**

@Andy-Prowl：我已经尝试过您的`std::bind`解决`lambda`方案，但在参数数量方面似乎仍然遇到错误。

当，在`main`，我使用代码：

```
SphericalHarmonics *sh = new SphericalHarmonics(cInit, numL, symm);
auto fxn = std::bind(&SphericalHarmonics::distFunction, sh, std::placeholders::_1);
Surface_3 surface(fxn, Sphere_3(ORIGIN,2.)); 
```

我得到错误：

```
~/lib/basisfunctions/SphericalHarmonics2/mesh_an_implicit_function.cpp:62:48: 
error: no matching function for call to     
‘CGAL::Implicit_surface_3<CGAL::Robust_circumcenter_traits_3<CGAL::Epick>, 
double (*)
(CGAL::Point_3<CGAL::Epick>)>::Implicit_surface_3(std::_Bind<std::_Mem_fn
<double (SphericalHarmonics::*)(CGAL::Point_3<CGAL::Epick>)>
(SphericalHarmonics*, std::_Placeholder<1>)>&, Sphere_3)’ 
```

和

```
~/CGAL-4.1/include/CGAL/Implicit_surface_3.h:50:5: note:   no known conversion 
for argument 1 from ‘std::_Bind<std::_Mem_fn<double (SphericalHarmonics::*)
(CGAL::Point_3<CGAL::Epick>)>(SphericalHarmonics*, std::_Placeholder<1>)>’ to 
‘CGAL::Implicit_surface_3<CGAL::Robust_circumcenter_traits_3<CGAL::Epick>, 
double (*)(CGAL::Point_3<CGAL::Epick>)>::Function 
{aka double (*)(CGAL::Point_3<CGAL::Epick>)}’ 
```

和

```
~/CGAL-4.1/include/CGAL/Implicit_surface_3.h:34:9: note:   
candidate expects 1 argument, 2 provided 
```

**[更新]**

我现在很清楚我需要一个可以转换为函数指针的函数（即`surface`需要一个函数指针参数）。这排除了该`std::bind`选项。[此外，如果 lambda 捕获变量（无捕获与捕获 lambda](https://stackoverflow.com/questions/7210818/signature-difference-between-lambda-with-without-captured-variable "这里")），它似乎无法转换为函数指针。所以我认为 Andy-Prowl 下面的答案通常是这个问题的正确答案，尽管我需要找到不同的解决方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T00:17:59.387

使用[std::bind](http://en.cppreference.com/w/cpp/utility/functional/bind)或[boost::bind](http://www.boost.org/doc/libs/1_53_0/libs/bind/bind.html)：

```
#include <functional>   

SphericalHarmonics *sh = new SphericalHarmonics(1);
surface(std::bind(&SphericalHarmonics::distFunction, sh, _1)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T00:18:19.713

**选项1：**

如果您的成员函数不会隐式地在您的类的实例上工作（因此不需要接收`this`指针），您可以使它`static`：

```
class SphericalHarmonics
{
    ...
    static double distFunction(Point p);
    ...
};

double SphericalHarmonics::distFunction(Point p)
{
    ...
} 
```

现在，您的函数将有效地有一个参数：

```
surface(SphericalHarmonics::distFunction); 
```

**选项 2：**

否则，您可以使用[`std::bind()`](http://en.cppreference.com/w/cpp/utility/functional/bind)curry 成员函数`distFunction`并修复其第一个隐式参数（如果您不使用 C++11 编译器，则可以使用 Boost.Bind 库中的等效`boost::bind()`项[）](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=http%3A%2F%2Fwww.boost.org%2Flibs%2Fbind%2Fbind.html&ei=E6MuUbqyFsXL4ATrkYHgCw&usg=AFQjCNHjl7JJUv8uYmYkmD9tz86d7AlcXA&sig2=SwxVew1y8gKMfabL5HI1vA&bvm=bv.43148975,d.bGE)：

```
#include <functional>

SphericalHarmonics *sh = new SphericalHarmonics(1);
auto fxn = std::bind(&SphericalHarmonics::distFunction, sh, _1);
surface(fxn); 
```

**选项 3：**

或者，在 C++11 中，一个 lambda 可以完成这项工作：

```
SphericalHarmonics *sh = new SphericalHarmonics(1);
auto fxn = [=] (double d) { return sh->distFunction(d); } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-04T22:19:48.423

在处理 CGAL 的模板化`Surface_3`类的具体情况下。您可能正在使用这样的东西（来自他们的示例）来定义`Surface_3`类型：

```
typedef CGAL::Surface_mesh_default_triangulation_3 Tr;
// c2t3
typedef CGAL::Complex_2_in_triangulation_3<Tr> C2t3;
typedef Tr::Geom_traits GT;
typedef GT::Sphere_3 Sphere_3;
typedef GT::Point_3 Point_3;
typedef GT::FT FT;
typedef FT (*Function)(Point_3);
typedef CGAL::Implicit_surface_3<GT, Function> Surface_3; 
```

这是一种*误导*，因为它使 CGAL 的等值面类看起来只能处理函数指针（而不是`std::function`等）。但问题只是我们*刚刚这样定义它*。只需定义`Surface_3`用作`std::function<FT (Point_3)>`其模板参数，[Andy Prowl 的答案](https://stackoverflow.com/a/15125180/148668)`std::bind`中的和 lambda就可以正常工作：

```
...
typedef std::function<FT (Point_3)> Function;
typedef CGAL::Implicit_surface_3<GT, Function> Surface_3; 
```

# c# - 我可以在 32 位系统上分配大于 4GB 的对象吗

> ID：15125107
> 
> 赞同：-4
> 
> 时间：2013-02-28T00:11:30.667
> 
> 标签：c#, java, .net, memory, jvm

假设没有运行时或操作系统的限制。我可以分配一个大于虚拟地址空间的对象吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T00:18:29.263

我试图在这个措辞奇怪的问题中找到一个真正的问题。这些问题怎么办？

> 假设有足够的可用虚拟内存空间，.NET 中对象的大小是否存在理论上的限制？

是的。无论操作系统如何，运行时都不允许单个托管对象大于 2 GB。

> 在 Windows 中分配大于虚拟内存空间的内存块是否合法？

是的。人们常常对这一事实感到惊讶，但请记住，虚拟内存被称为*虚拟内存*是有原因的；这不是*真正的记忆*。真正的内存是磁盘空间。

内存不是 RAM——它只是磁盘空间顶部的快速、方便的缓存。而且内存不是虚拟内存；虚拟内存只是一种方便的方式来引用内存。在我看来，内存最好可视化为磁盘上交换文件中的页面。

如果你想在 32 位 Windows 中分配一个 40 亿字节的块，没有问题；操作系统将在磁盘上为您保留 40 亿字节。然后，您可以决定如何将其映射到您的虚拟地址空间；它并不完全适合，因此您将不得不自己管理映射和取消映射。Raymond 在这里描述了如何做到这一点：

[http://blogs.msdn.com/b/oldnewthing/archive/2004/08/10/211890.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2004/08/10/211890.aspx)

我不知道有任何库可以让您轻松地从 C# 对这么大的内存块进行操作，但是如果还没有可用的库，那么编写一个库并不是特别困难。坦率地说，虽然我倾向于使用内存映射文件（您*可以*从 C# 中完成）而不是自己进行映射。

# php - htaccess/rewriterule 和虚拟文件夹

> ID：15125114
> 
> 赞同：0
> 
> 时间：2013-02-28T00:12:06.787
> 
> 标签：php, .htaccess, mod-rewrite

过去，我通过 Google 使用过这个网站几次，并找到了对问题有用的帮助。现在我想问我自己的问题并因此注册。所以，“大家好！”

我的“问题”涉及 htaccess-rewriterule 和 PHP/HTML。假设我有一个 URL“ [http://www.mydomain.com/showdata.php?ID=9](http://www.mydomain.com/showdata.php?ID=9) ”，我想重写为“ [http://www.mydomain.com/person/firstname-lastname-9 .php](http://www.mydomain.com/person/firstname-lastname-9.php) ”。我的计划是“人”只是一个虚拟目录。重写部分没有问题：

```
RewriteRule ^person/(.*)-(\d+)\.php$ /showdata.php?ID=$2 
```

新 URL 指向 MySQL 数据库中的正确条目。问题是 CSS 文件没有被加载，并且导航中的所有链接都指向“person”文件夹。我以为我可以“链接”到一个虚拟文件夹，因为 htaccess 会将浏览器引导到服务器上的真实文件。我实际上可以创建文件夹“person”并在其中复制包含文件，但这意味着我必须在源代码中更改很多路径。这是很多凌乱的工作，我宁愿避免这样做。有没有办法拥有一个虚拟文件夹（用于关键字），但仍然让 php 脚本包含主文件夹中的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:14:25.547

为 css、js 和图像添加更多规则..

我假设您的 css/js/images 位于名称为 "css" 、 "js" 、 "images" 的文件夹中

例如

```
RewriteRule (.*)/(images|css|js)/(.*) /$1/$2 [L]
# | means OR  , [L] means last rule i.e. do not continue to process other rules after this. 
```

# java - NetBeans 面板设计

> ID：15125118
> 
> 赞同：1
> 
> 时间：2013-02-28T00:12:25.677
> 
> 标签：java, swing, netbeans, graphics, paintcomponent

我正在做一个项目`JPanels`，`JFrames`我在哪里创建面板，上面写着“欢迎来到 Target”以及位于消息下方的 Target 徽标。我拥有的类是 Main、TargetLogoPanel 和 TargetLogoUI。我尝试弄乱在 Netbeans 7.1 中实现的设计功能，但找不到以这种方式绘制椭圆的方法，所以这是我添加的代码：

```
@Override
protected void paintComponent(Graphics g) {
    g.setColor(Color.red);
    g.fillOval(((targetPanel.getWidth()) / 2) - 100,
            ((targetPanel.getHeight()) / 2) - 100, 200, 200);
    g.setColor(Color.WHITE);
    g.fillOval(((targetPanel.getWidth()) / 2) - 65,
            ((targetPanel.getHeight()) / 2) - 65, 130, 130);
    g.setColor(Color.red);
    g.fillOval(((targetPanel.getWidth()) / 2) - 30,
            ((targetPanel.getHeight()) / 2) - 30, 60, 60);

} 
```

徽标的宽度为 200 像素，并在调整框架大小时保持居中。但是，就我添加的内容而言，运行程序时不会绘制圆圈。在我的主要方法中，我把`new TargetLogoUI().setVisible(true);` 我到底做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:35:33.327

您提供的代码段存在许多问题。

*   您依赖的是硬（魔术）数字。虽然有时这会起作用，但您应该尝试避免这是一种危险的做法
*   您似乎没有向父容器布局管理器提供任何大小提示，这通常意味着您的组件将向布局管理器询问 0x0 空间。
*   您没有调用`super.paintComponent`，这是确保组件正确绘制所必需的。
*   您依赖来自外部资源的信息来尝试定位容器。这不是 的工作`paint`，这是布局管理器的工作。

这些只是我们可以从您的代码段中看到的内容，可能还有其他问题。

```
public class Target {

    public static void main(String[] args) {
        new Target();
    }

    public Target() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        protected void paintComponent(Graphics g) {

            super.paintComponent(g);

            int width = getWidth();
            int height = getHeight();

            int radius = Math.min(width, height);

            g.setColor(Color.red);
            g.fillOval(
                    (int)((radius / 2) - (radius * 0.5)),
                    (int)((radius / 2) - (radius * 0.5)), 
                    (int)radius, 
                    (int)radius);
            g.setColor(Color.WHITE);
            g.fillOval(
                    (int)((radius / 2) - (radius * 0.325)),
                    (int)((radius / 2) - (radius * 0.325)), 
                    (int)(radius * 0.65), 
                    (int)(radius * 0.65));
            g.setColor(Color.red);
            g.fillOval(
                    (int)((radius / 2) - (radius * 0.15)),
                    (int)((radius / 2) - (radius * 0.15)), 
                    (int)(radius * 0.3), 
                    (int)(radius * 0.3));

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:22:32.297

我在谷歌上搜索了一个靶心并遇到了[这个例子](http://www.leepoint.net/notes-java/examples/graphics/35Bullseye/25ex-bull.html)。我提供了`JPanel`下面的修改。

我设置`rings = 3`并翻转红色/白色`paintComponent()`

```
class Bullseye extends JPanel {
  static final int SIZE = 300; // initial window size
  int rings = 3; // Number of rings to draw in bullseye

  public Bullseye() {
    this.setBackground(Color.white);
    this.setPreferredSize(new Dimension(SIZE, SIZE));
  }

  public void setRings(int r) {
    rings = r;
    this.repaint(); // new value of rings - better repaint
  }

  public void paintComponent(Graphics g) {
    super.paintComponent(g);
    // x,y coordinate of top left corner for drawing circles
    int x = SIZE / 2;
    int y = SIZE / 2;

    for (int i = rings; i > 0; i--) {
      if (i % 2 == 0)
        g.setColor(Color.white);
      else
        g.setColor(Color.red);
      int radius = i * 100 / rings; // compute radius of this ring
      g.fillOval(x - radius, y - radius, radius * 2, radius * 2);
    }
  }
} 
```

# php - 从数据库倒计时

> ID：15125122
> 
> 赞同：0
> 
> 时间：2013-02-28T00:12:57.013
> 
> 标签：php, javascript, html, mysql, ajax

我正在为一个学校项目做一个简单的拍卖网站，我想显示拍卖会进行多长时间的倒计时，从拍卖开始到倒计时一周左右（尚未设置）。我在考虑创建拍卖时，将信息添加到数据库中（什么对象、价格、名称和剩余时间）。我会添加创建对象的日期和时间，以及它不再活动后的确切 7 天。如果我的 mySQL 数据库中有时间和日期，我将如何使用 php（或者可能是 AJAX？从未使用过）显示剩余时间？

任何输入都是有帮助的，因为我完全被难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:17:54.090

当您浏览/显示拍卖时，只需获取到期日期/时间，然后使用 JavaScript 进行倒计时——您无需为此调用数据库。

看看这个：[http ://www.hashemian.com/tools/javascript-countdown.htm](http://www.hashemian.com/tools/javascript-countdown.htm)

# c# - 如何在任何字符点放置文本

> ID：15125123
> 
> 赞同：1
> 
> 时间：2013-02-28T00:12:58.777
> 
> 标签：c#, textbox, format, multiple-columns

我有一个文本框，我想在其中放置“列”数据。我想我可以设置文本框`displayBox.SelectionStart`并`displayBox.SelectionLength`移动插入符号，然后继续填充数据。

这是我的盒子显示代码：

```
foreach (String line in LoanSort.MyArray)
{ // bringing in lines from my array
  String[] values = line.Split(new char[] { ' ', '/'});
  //splitting my lines.
  if (values.GetValue(2).ToString() == "2011")
  {// finding out if the "loan" occured in 2011 and if it did, display...
    displayBox.SelectionStart = 0; displayBox.SelectionLength = 0;
    displayBox.Text += values.GetValue(0).ToString() + "/" +
                       values.GetValue(1).ToString() + "/" +
                       values.GetValue(2).ToString();
    displayBox.SelectionStart = 25; displayBox.SelectionLength = 0;
    displayBox.Text += values.GetValue(3).ToString();
    displayBox.SelectionStart = 65; displayBox.SelectionLength = 0;
    displayBox.Text += values.GetValue(4).ToString();
    displayBox.Text += " " + Environment.NewLine;
  }       
} 
```

日期值是联系值。GetValue 0-3。在我打印出日期后，我想将光标移动到 25 个字符的位置并输出借款人的姓氏、名字。但是我的显示器现在确实在日期和名称之间显示了一个空格。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:10:11.823

虽然我同意 meklarian 的观点，即这是实现目标的糟糕方式，但要回答问题，您可以执行以下操作。

对于您的示例：

```
displayBox.SelectionStart = 65;
displayBox.SelectionLength = 0;
displayBox.Text += values.GetValue(4).ToString(); 
```

首先，您可以使用`values[4]`代替`values.GetValue(4).ToString()`. 这将返回位置 4 的字符串，因此您甚至不需要将其转换为字符串。

您可以使用以下方法在光标处更新：

```
displayBox.SelectionStart = 65;
displayBox.SelectionLength = 0;
displayBox.SelectedText = values[4]; 
```

或者干脆完全忽略光标更新文本：

```
displayBox.Text = displayBox.Text.Insert(65, values[4]); 
```

更好的方法是使用字符串格式。这段代码做了几件事。第一个`string.Format`格式化元素 0、1 和 2 `values`，然后将它们填充到 25 个字符的宽度。第二个`string.Format`格式的元素 3 和 4 `values`。该术语`,-40`指示格式为 40 个字符宽，左对齐。我们不能在第一次使用它，`string.Format`因为我们填充了几个元素的结果，而不仅仅是一个元素。

```
displayBox.Text +=
    string.Format("{0}/{1}/{2}", values).PadRight(25) +
    string.Format("{3,-40}{4} ", values) +
    Environment.NewLine; 
```

# html - 在行和列中对齐 div

> ID：15125138
> 
> 赞同：-1
> 
> 时间：2013-02-28T00:14:37.143
> 
> 标签：html, css

我正在尝试在行和列中对齐 div。尝试了一切将它们对齐在一行中，但它对我不起作用。我尝试了两者`float:left`和`display:inline-block`属性，`.user-rack`但没有运气。这是[小提琴](http://jsfiddle.net/himanshuy/aCGjr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:18:33.037

你检查过你的inspector吗？

使用`<div />`无效，只会造成嵌套。

# android - android在pcm中获取设备整体音频输出

> ID：15125139
> 
> 赞同：13
> 
> 时间：2013-02-28T00:14:45.103
> 
> 标签：android, android-audiorecord

有什么方法可以拦截或读取 android 设备中的音频输出？

我需要从 myActivity 中读取 PCM 中的整个音频输出，包括后台的媒体播放器应用程序、来自呼叫的语音、myACtivity 中的 MediaPlayer istances 等，所有将由扬声器播放的内容。实际上，如果可以单独阅读它们，那也很棒。

我尝试使用[AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html)，将它作为 audioSource 参数在[MediaRecorder.AudioSource](http://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html)中找到的每个常量都没有运气，我应该尝试不同的音频源吗？

这是一个必须在本机层处理的低级任务吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-05-10T22:24:30.007

[可视化](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)类很有帮助。我用它来播放[这里](https://github.com/JackYoustra/AudioTransfer)立即播放的音频。

然而，这种音频的质量非常低，所以它只对可视化非常有用。

# batch-file - 使用批处理文件在两行之间添加文本

> ID：15125143
> 
> 赞同：0
> 
> 时间：2013-02-28T00:14:53.957
> 
> 标签：batch-file

我有 1000 个文件。这些文件具有以下格式

```
>.
>.
>.
>Line-X
>Line-Y
>.
>.
>. 
```

我想搜索 Line-X 并在 X 和 Y 之间插入 Line-Z。我想使用 .bat 文件来做同样的事情。有任何想法吗。我是 bat 文件的绝对新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:10:02.747

由于您是批处理文件的新手，这里有一些可以帮助您入门的东西。它不会修改原始文件，但会创建带有修改的新文件......

如果您有三个包含上面列出的内容的文本文件（x.txt、y.txt 和 z.txt），并且从包含这三个文件的同一文件夹中运行此批处理文件，则此批处理文件会创建三个新文件(x.txt2, y.txt2, and z.txt2) 具有相同的内容——只是它`>Line-Z`在 X 和 Y 行之间也有：

```
@echo off

for %%f in (*.txt) do (
  for /f "eol= delims=" %%v in (%%f) do (
    if "%%v"==">Line-X" (
      echo %%v>> %%f2
      echo ^>Line-Z>> %%f2
    ) else (
      echo %%v>> %%f2
    )
  )
) 
```

# php - 简单的 HTML Dom 解析表

> ID：15125145
> 
> 赞同：0
> 
> 时间：2013-02-28T00:15:11.690
> 
> 标签：php, parsing, simple-html-dom, domparser

我想解析来自网站的新闻：[http](http://www.bakirkoykhb.gov.tr/?module=bizden_haberler) ://www.bakirkoykhb.gov.tr/?module=bizden_haberler ，我面临的是该网站有很多没有类的表格，而且非常复杂，等等。可以查看您是否检查页面的源代码，我得到的标题如下：

Japonya-Türkiye Tıp Derneği'den Ziyaret

Saglik-Sen Gen. Başk.Memiş'ten Ziyaret

Vali Mutlu' dan Ziyaret

依此类推，下面是我的代码。但我不知道如何解析“Devamını Oku”下包含的链接。

```
$html = file_get_html('http://www.bakirkoykhb.gov.tr/?module=bizden_haberler');
$j = 0;
foreach($html->find('b') as $element2){
echo "
<h3 ><a target=\"_blank\" href=\"#somethingtohere\">". $element2->plaintext . "</a></h3>
";
$j++;
if($j > 5) break;
} 
```

希望你能帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:27:19.990

这应该为你做

```
echo "<h3 ><a href='http://www.bakirkoykhb.gov.tr/".$html->find('a',$j+22)->href."'>". $element2->plaintext . "</a></h3>"; 
```

# cocoa-touch - 现有 UIScrollView 的副本

> ID：15125148
> 
> 赞同：0
> 
> 时间：2013-02-28T00:15:20.547
> 
> 标签：cocoa-touch, uiscrollview, copy

# H

```
@property (nonatomic, strong) IBOutlet UIScrollView *itemsContainer;
@property (nonatomic, strong) UIScrollView *itemsContainerDefaults; 
```

# 米

```
- (void)awakeFromNib
{
    self.itemsContainerDefaults = [self.itemsContainer copy]; // breaks here
} 
```

# 安慰

```
2013-02-27 19:09:07.585 Test App[2038:907] -[UIScrollView copyWithZone:]: unrecognized selector sent to instance 0x1ddcde60
2013-02-27 19:09:07.586 Test App[2038:907] Uncaught exception: -[UIScrollView copyWithZone:]: unrecognized selector sent to instance 0x1ddcde60
2013-02-27 19:09:07.601 Test App[2038:907] Stack trace: ( ... ) 
```

我正在尝试复制`itemsContainer`到，`itemsContainerDefaults`但我在日志中收到错误。为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:19:18.980

为了在对象上调用 -copy，它必须符合 NSCopying。UIScrollView 没有。

我认为您想要实现的目标有更好的方法。但我不确定你想要实现什么。您想制作滚动视图的视觉副本吗？为什么不创建一个使用与第一个滚动视图相同的数据源的新滚动视图？

# git - git远程显示起源异常

> ID：15125151
> 
> 赞同：2
> 
> 时间：2013-02-28T00:15:25.250
> 
> 标签：git

我的同事有一个存储库并在做：

`$ git remote show origin`输出：

```
* remote origin
  ...
  Remote branches:
     ...
     DowSzkDoZgl    tracked
     IR-Prod        tracked
     ...
  Local branches configured for 'git pull':
     DowSzkDoZgl    merges with remote origin/DowSzkDoZgl
     IR-Prod        merges with remote IR-Prod
     ...
  Local refs configured for 'git push':
     DowSzkDoZgl    pushes to DowSzkDoZgl         (up to date)
     IR-Prod        pushes to IR-Prod             (local out of date)
     ... 
```

*上线后*出现异常 *`Local branches configured for 'git pull':`*

 *`DowSzkDoZgl merges with remote origin/DowSzkDoZgl`

具体来说，`origin/DowSzkDoZgl`。

为什么它在远程分支名称前面指定*origin/ ？*其他 Pull Config 分支都没有这个，而且我们已经在*原点*“内部”，所以它看起来是多余的。

**编辑**
git 配置：

```
[branch "DowSzkDoZgl"]
    remote = origin
    merge = refs/heads/origin/DowSzkDoZgl

[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:05:37.507

这将引用一个名为 ' `origin/DowSzkDoZgl`' 的分支，而不是`DowSzkDoZgl`（即一个[分层分支名称](https://stackoverflow.com/a/2527436/6309)，其中包括一个 ' `/`'）

尝试使用以下命令重置[上游分支](https://stackoverflow.com/questions/6089294/git-why-do-i-need-to-do-set-upstream-all-the-time)：

```
git branch -u origin/DowSzkDoZgl DowSzkDoZgl 
```

（如果它抱怨已经有一个上游，在该命令之前加上 a `git branch --unset-upstream DowSzkDoZgl`）*

# java - 在循环参数为三的倍数时遇到问题。（新）

> ID：15125154
> 
> 赞同：1
> 
> 时间：2013-02-28T00:15:53.700
> 
> 标签：java

该程序的目标是运行诸如“K6V3 20.2 17.4”之类的参数，并使用 Wea​​ther 类根据最后 2 个数字参数计算风寒，并将第一个参数用作区域的简写名称。当程序以三的倍数给出参数时遇到问题，例如“K6V3 20.2 17.4 KCHO 40.0 10.0”我不确定如何在第三个参数之后重新启动循环。我的程序将采用前三个参数并显示正确的信息，但它只会为后三个参数重复该信息。到目前为止，这是我的代码，帮助！？！？！

```
public class ChillMapper {
    public static void main(String args[]) {
        double ICAO;
        double t;
        double v;
        double windChill;

        for (int i = 0; i < args.length / 3; i++) {
            if (args.length % 3 == 0) {
                ICAO = Text.toDouble(args[0]);
                t = Text.toDouble(args[1]);
                v = Text.toDouble(args[2]);
                windChill = Weather.windChillNA(t, v);
                Map.setTemperature(args[i], windChill);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T00:19:34.963

以这种方式编写循环可能更简单：

```
for (int i = 0; i < args.length; i+=3)
{
    ICAO = Text.toDouble(args[i+0]);
    t = Text.toDouble(args[i+1]);
    v = Text.toDouble(args[i+2]);
    windChill = Weather.windChillNA(t,v);
    Map.setTemperature(ICAO,windChill);
} 
```

不是每次都检查 if `i%3==0`，而是按 3 步跳。（你最好检查一下参数长度本身是3 的*倍数*，我把它留给你作为练习）。然后分别在索引 i、i+1、i+2 处获取参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:23:44.707

你有硬编码的数组索引。改用变量“i”：

```
public class ChillMapper
{
public static void main(String args[])
{
    double ICAO;
    double t;
    double v;
    double windChill;

   int i = 0;
   if (args.length % 3 == 0)
   {
      while (i < args.length)
      {
         ICAO = Text.toDouble(args[i]);
         t = Text.toDouble(args[++i]);
         v = Text.toDouble(args[++i]);
         windChill = Weather.windChillNA(t,v);
         Map.setTemperature(args[i],windChill);
     }
   }
 }
} 
```

# google-maps-sdk-ios - mapView didTapInfoWindowOfMarker 方法不起作用？谷歌地图 iOS SDK

> ID：15125158
> 
> 赞同：1
> 
> 时间：2013-02-28T00:16:14.660
> 
> 标签：google-maps-sdk-ios

还有其他人遇到这种情况吗？我正在使用最新的适用于 iOS 的 Google Maps SDK。这就是我在 didTapInfoWindowOfMarker 方法中所拥有的：

```
- (void)mapView:(GMSMapView *)mapView didTapInfoWindowOfMarker:(id<GMSMarker>)marker {
  NSLog(@"yes");
} 
```

在我的输出中没有得到任何响应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T10:06:13.050

听起来您没有为 GMSMapView 对象添加委托和协议，例如：

```
mapView_.delegate = self; 
```

在 loadView 方法中。

因此，完整 `- (void)loadView`和委托方法应该是：

```
@interface ViewController () <GMSMapViewDelegate> // Add this if you haven't
{
    id<GMSMarker> myMarker;
}

- (void)loadView {
  GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.8683
                                                          longitude:151.2086
                                                               zoom:6];
  mapView_ = [GMSMapView mapWithFrame:CGRectZero camera:camera];
  mapView_.myLocationEnabled = YES;
  mapView_.delegate = self; // This sets the delegate for map view
  self.view = mapView_;
}

- (void)mapView:(GMSMapView *)mapView didTapInfoWindowOfMarker:(id<GMSMarker>)marker {
  NSLog(@"yes"); // And now this should work.
} 
```

# html - 使用 Bootstrap 缩进表

> ID：15125163
> 
> 赞同：2
> 
> 时间：2013-02-28T00:16:40.057
> 
> 标签：html, twitter-bootstrap

我已经使用 bootstrap 有一段时间了，但我不能做这件事（我什至不知道没有 Bootstrap 怎么做）。我想要的是缩进表格或div。我在 Bootstrap 中看到过类似的事情，`<li>`但没有使用表格。基本上我想要一个表格，`<th>`其标题是项目名称，下面是项目名称。我需要缩进的原因是因为项目依赖于其他项目；因此，另一个项目下面的项目必须稍微位于其父项目的右侧（这基本上是缩进，对吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-30T17:23:36.117

如果您需要一个小的缩进来建议层次结构，这里有几个选项。它们并非特定于 Bootstrap 表。

第一个是在您想要的每个缩进级别添加几个不间断的空格。这样做的*好处*是可以通过生成表格内容的任何代码添加空格，而不会干扰表格的 html。它的*缺点*是如果文本在单元格内换行，则换行的行将不会缩进。此外，所有这些不可见的不间断空格都可能导致复制/粘贴意外。

```
<td>&nbsp;&nbsp;Indented Text</td>
<td>&nbsp;&nbsp;&nbsp;&nbsp;Indented More</td> 
```

如果您的代码发出表格的 html，更好的解决方案是通过增加数量来更改表格单元格的填充。它的*优点*是控制比不间断空格的增量更精细，并且换行的文本也缩进了。这里的*缺点*是您从代码中发出 html，这可能会使调整布局更加困难。

```
<td style="padding-left:20px">Indented Text</td>
<td style="padding-left:40px">Indented More</td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T09:14:42.740

这可以使用偏移量来解决吗？当我们不了解情况或标记的外观时，有点难以提供帮助。

offset* 类将为您的元素添加一个 margin-left。也许这会对你有所帮助？

# c# - 我是否需要触发与 Combox 绑定的事件才能正常工作？

> ID：15125166
> 
> 赞同：2
> 
> 时间：2013-02-28T00:17:03.270
> 
> 标签：c#, winforms, data-binding, combobox

我对组合框有疑问

```
 private void Form_AddGoal_Load(object sender, EventArgs e)
    {  
        LoadGoal();
        IList<Perspective> perspectives = PerspectiveRepository.All(); // I get all perspectives

        CBPerspective.DataSource = perspectives;
        CBPerspective.DisplayMember = "Name";

        // Here I initialize other components
    }

    private void LoadGoal()
    {
        if (Goal== null)
            Goal = new Goal();

        // Here I bind other components

        CBPerspective.DataBindings.Add("SelectedItem", Goal, "Perspective");   
    }

    public void SaveBtn_Click(object sender, EventArgs e)
    {
          // I save the Goal
    } 
```

当表单打开时，一切正常。如果我没有在组合框中选择任何选项（即第一个选项保留它）并且我将数据保存在 Perspective 属性为 null 的表单上，但如果我在组合框中选择其他选项并以相同的方式继续，透视图等于所选项目，因此可以完美运行。到底是怎么回事？我需要触发事件吗？

# matlab - Matlab：如何使用鼠标中键单击来记录/记录数据游标显示的数据？

> ID：15125168
> 
> 赞同：1
> 
> 时间：2013-02-28T00:17:35.000
> 
> 标签：matlab

我是使用 Matlab 的新手，我刚刚为我绘制的散点图制作了我的第一个自定义数据游标。这个数据游标向我显示了原始矩阵（行）中的 x 位置、y 位置和该点的位置。我希望能够调用 datacursormode，然后在 datacursor 中进行回调，以便在该点上按下鼠标中心按钮，它将把 datatip/cursor 显示的点数据记录到矩阵或数组中。

这个想法是能够点击一个兴趣点，查看数据提示信息，然后如果用户想要他们可以用鼠标中键单击该点以记录显示的数据提示信息，然后直接移动到下一个点，无需重新调用 datacursormode。这应该会产生一个包含所有选定点信息的单元阵列/矩阵。

我已经尝试过 disp(pos) 但这会显示单击的每个点，我希望能够单击该点并查看信息，然后再决定是否记录它。我尝试过 ginput，但调用它会禁用数据光标模式。我认为需要自定义数据游标函数中的回调，但我永远无法让它们工作。

请帮忙。

谢谢你提供的所有帮助。

# java - JButtons 数组上的 ActionListener

> ID：15125170
> 
> 赞同：4
> 
> 时间：2013-02-28T00:17:46.093
> 
> 标签：java, swing, jbutton, actionlistener, final

我创建了一个 JButton 数组，在创建时为它们分配了随机颜色，而不是手动创建每个按钮并为它们分配随机颜色。我现在正处于我想随机更改单击的任何按钮的颜色的地步。我想以与迄今为止创建和添加按钮相同的方式进行操作（通过使用循环）。

尽管按照我认为可行的方式进行操作失败了。我被给了`"local variable is accessed from within inner class; needs to be declared final"`。我是，如果我使用 final 它不能改变，现在我很茫然。

有可能的解决方法吗？

```
package test;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.beans.EventHandler;
import java.lang.String;
import java.util.Random;

public class TEST

{

/**
 * @param args the command line arguments
 */
public static Random rand = new Random();
public static int oh;

public void btnPress(ActionEvent e, JButton[] jButts, float r, float g, float b) {
    for (int y = 0; y < jButts.length; y++) {
        if (e.getSource() == jButts[y]) {
            jButts[y].setBackground(Color.getHSBColor(r, g, b));
        }
    }
}

public static void main(String[] args) {
    JFrame frame = new JFrame("Suhp, Brah?");
    frame.setLayout(new BorderLayout());
    frame.setVisible(true);
    frame.setBackground(Color.magenta);
    frame.setSize(400, 400);
    frame.setResizable(false);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout(new GridLayout(4, 4));
    String[] numbs = {"0", "1", "2", "3", "4", "5", "6", "7"};
    final JButton[] jButts = new JButton[numbs.length];//0-7

    for (int i = 0; i < 8; i++) {

        jButts[i] = new JButton(numbs[i].toString());
        //String leString = rand.nextInt(255).toString;
        jButts[i].setBackground(Color.getHSBColor(rand.nextFloat(), rand.nextFloat(), rand.nextFloat()));
    }
    for (int x = 0; x < 8; x++) {
        frame.add(jButts[x]);
    }
    //ActionListener
    for (int i =0; i < 8; i++) {

        jButts[i].addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                i++;
                jButts[i].setBackground(Color.getHSBColor(rand.nextFloat(), rand.nextFloat(), rand.nextFloat()));
            }
        });
    }

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T00:27:35.853

没有必要`i`在`ActionListener`. 您可以使用以下方式获取按钮`ActionEvent#getSource`：

```
jButts[i].addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        JButton button = (JButton) e.getSource();
        button.setBackground(Color.getHSBColor(rand.nextFloat(),
                rand.nextFloat(), rand.nextFloat()));
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T00:30:00.057

这是一个解决方法，

```
//ActionListener
for (int i =0; i < 8; i++) 
{
    final int temp = i; // assign to temporary variable
    jButts[temp].addActionListener(new ActionListener() 
    {
        @Override
        public void actionPerformed(ActionEvent e) 
        {
            // i++; Not sure what you're trying to do here..
            jButts[temp].setBackground(Color.getHSBColor(rand.nextFloat(), rand.nextFloat(), rand.nextFloat()));
        }
    });
} 
```

但我强烈建议您重新考虑您的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T00:34:48.923

```
// ActionListener
    ActionListener listener = new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            JButton button = (JButton) e.getSource();
            button.setBackground(Color.getHSBColor(rand.nextFloat(),
                    rand.nextFloat(), rand.nextFloat()));
        }
    };

    for (int i = 0; i < 8; i++)
        jButts[i].addActionListener(listener); 
```

# php - Mysql从另一个表中减少值

> ID：15125177
> 
> 赞同：-1
> 
> 时间：2013-02-28T00:18:12.020
> 
> 标签：php, mysql

我有 2 张桌子：`user_values`和`decrease_times`.

`user_values`有 3 列：`username, property, value`并且`decrease_times`有 3 列：`property, decrease_value, decrease_time`。所有这些都是动态的并且变化很大。

我有一个每小时都会调用一次的 cron 作业，我想要做的是减少所有`value`行 from`user_values`存储在`decrease_value`if `property`from`user_values`等于`property`from的数量`decrease_times`。

此外，`decrease_time`可以是 0 或 1，0 表示每 1 小时减少一次，1 表示每 24 小时减少一次。我已经实现了一个 if 子句来检测它是否是早上 6 点，然后如果它们是 1 或 0，它应该减少所有值。

我应该做什么查询来做到这一点？此外，这是在 PHP 中完成的。

**编辑：**到目前为止我所做的是：`UPDATE user_values SET value = value - (SELECT decrease_value FROM decrease_times WHERE property=/* property from UPDATE clase should be here */) WHERE property=(SELECT property FROM decrease_times WHERE decrease_time=0)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:33:58.603

您不需要在任何地方使用 select 语句...

```
UPDATE user_values AS values 
INNER JOIN decrease_times AS times ON values.property = times.property 
SET values.value = values.value-times.decrease_value
WHERE values.property = times.property AND times.decrease_time = 0 
```

您正在使用您要编辑的表，并将其与第二个表连接起来进行查询...您使用所需的简单数学方程式在 user_values 表上设置值字段，并确保两个属性值都是相同，并且您只更新应该每小时更新的行。

您的每日版本将是相同的，但不再需要“AND...”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T00:20:52.967

像这样的东西`UPDATE TABLE SET your_value=(your_value-1) WHERE USERID=5`

或者

`UPDATE TABLE1 SET your_value=(your_value +(SELECT your_value2+5 FROM TABLE2 WHERE USERID=5)) WHERE USERID=5`

-- 适应你的需要；这是基本的 SQL 语法。

需要更好的示例和您的表结构——您可以使用[http://sqlfiddle.com/](http://sqlfiddle.com/)并重新创建一些表/数据，以便我们可以使用它

[http://www.w3schools.com/sql/sql_update.asp](http://www.w3schools.com/sql/sql_update.asp)

# android - Android Listview Position 在项目选择上为 0

> ID：15125184
> 
> 赞同：2
> 
> 时间：2013-02-28T00:18:26.430
> 
> 标签：android, listview, adapter

我的列表视图有一个自定义适配器（扩展了 ArrayAdapter）。该列表加载正常。但是，当我点击我的列表中的一个项目，即列表中的第5个项目时，getView中的位置总是0而不是5。它崩溃了，因为`convertView`不再`null`是0，如果它是0，则`header`应该将变量初始化为`R.id.listHeaderTv`TextView ，但它找不到它并最终为空。

我如何解决`position`问题并且`convertView`不再为空？

编辑：**检查 onItemClick 方法后，位置正确。唯一的问题是，在 onItemClick 方法之后，getView 被调用并在那里崩溃，因为视图没有被膨胀。**

日志猫：

```
02-27 16:35:25.280: E/AndroidRuntime(6330): FATAL EXCEPTION: main
02-27 16:35:25.280: E/AndroidRuntime(6330): java.lang.NullPointerException
02-27 16:35:25.280: E/AndroidRuntime(6330):     at moflow.adapters.CatalogListAdapter.getView(CatalogListAdapter.java:66)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.widget.AbsListView.obtainView(AbsListView.java:1294)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.widget.ListView.makeAndAddView(ListView.java:1727)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.widget.ListView.fillSpecific(ListView.java:1272)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.widget.ListView.layoutChildren(ListView.java:1558)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.widget.AbsListView.onLayout(AbsListView.java:1147)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.view.View.layout(View.java:7035)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:909)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.view.View.layout(View.java:7035)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.view.View.layout(View.java:7035)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.view.View.layout(View.java:7035)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1045)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.os.Looper.loop(Looper.java:123)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at android.app.ActivityThread.main(ActivityThread.java:4627)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at java.lang.reflect.Method.invokeNative(Native Method)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at java.lang.reflect.Method.invoke(Method.java:521)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-27 16:35:25.280: E/AndroidRuntime(6330):     at dalvik.system.NativeStart.main(Native Method) 
```

适配器：

```
@Override
        public int getCount() {
            return catalog.size();
        }

    @Override
            public View getView( int position, View convertView, ViewGroup parent ) {
                View v = convertView;
                CatalogItem item = getItem( position );

                if ( v == null ) {
                    LayoutInflater inflater = ( LayoutInflater ) mContext.getSystemService( Context.LAYOUT_INFLATER_SERVICE );

                    if ( item.header )
                        v = inflater.inflate( R.layout.sec_header, null );
                    else
                        v = inflater.inflate( R.layout.sec_item, null );
                }

                if ( item.header ) {
                    TextView header = ( TextView ) v.findViewById( R.id.listHeaderTV );
                    header.setText( item.name );
                    header.setEnabled( false );
                } else {
                    TextView sectionItem = ( TextView ) v.findViewById( R.id.listCreatureNameTV );
                    sectionItem.setText( item.name );
                }

                return v;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:24:47.157

`getView()`应该产生要显示的视图。要获取点击事件，您需要在 OnItemClickListener 上进行设置，例如：

```
new OnItemClickListener() {
    // @Override
     public void onItemClick(AdapterView<?> a, View v, int position, long id) {
         Toast.makeText(ListRecords.this,"Clicked item: " + position, Toast.LENGTH_LONG).show();
     }
     }); 
```

...`convertView`暂时忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:39:29.433

嗯，不知道 Sam 的答案去了哪里，但他关于覆盖这两个方法 getItemViewType() 和 getViewTypeCount() 是正确的。我也从这个页面得到了帮助：[http ://androidtrainningcenter.blogspot.com/2012/03/android-listview-with-section-header.html](http://androidtrainningcenter.blogspot.com/2012/03/android-listview-with-section-header.html)

这是最终为我工作的代码：

```
public View getView( int position, View convertView, ViewGroup parent ) {
        ViewHolder holder = null;
        int type = getItemViewType( position );

        if ( convertView == null ) {
            holder = new ViewHolder();
            switch( type ) {
                case TYPE_ITEM:
                    convertView = inflater.inflate( R.layout.sec_item, null );
                    holder.tv = ( TextView ) convertView.findViewById( R.id.listCreatureNameTV );
                    break;
                case TYPE_SEPARATOR:
                    convertView = inflater.inflate( R.layout.sec_header, null );
                    holder.tv = ( TextView ) convertView.findViewById( R.id.listHeaderTV );
                    break;
            }
            convertView.setTag( holder );
        } else {
            holder = ( ViewHolder ) convertView.getTag();
        }

        CatalogItem item = getItem( position );
        holder.tv.setText( item.name );

        return convertView;
    }

    public static class ViewHolder {
        public TextView tv;
    } 
```

# c# - 从枚举中选择剩余元素的最优雅方式

> ID：15125188
> 
> 赞同：2
> 
> 时间：2013-02-28T00:18:45.203
> 
> 标签：c#, windows-phone-7

我想从包含三个元素的枚举中选择第三个元素，同时知道我已经选择了哪两个。比较枚举的最有效方法是什么？

编辑：

到目前为止，我想出了以下几点：

```
Drawable.Row alternateChoice = (Drawable.Row)ExtensionMethods.Extensions.DefaultChoice(new List<int>() { (int)chosenEnum1, (int)chosenEnum2 }, new List<int>() { 0, 1, 2 }); 
```

Drawable.Row 是枚举，第一个列表是已经选择的，第二个列表包含可能的选择。DefaultChoice 的定义如下。我知道它具有二次时间复杂性，这就是为什么我要求更好的解决方案：

```
public static int DefaultChoice(List<int> chosen, List<int> choices)
{
    bool found = false;
    foreach (int choice in choices)
    {
        foreach (int chosenInt in chosen)
        {
            if (chosenInt == choice)
            {
                found = true;
                break;
            }
        }
        if (!found)
        {
            return choice;
        }
        found = false;
    }
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T00:37:38.157

尝试这个：

```
List<MyEnum> selectedValues = new List<MyEnum>();
selectedValues.Add(MyEnum.firstValue); // Add selected value
selectedValues.Add(MyEnum.secondValue); // Add selected value

List<MyEnum> valuesLeftOver = Enum.GetValues(typeof(MyEnum)).Cast<MyEnum>().ToList();

valuesLeftOver = valuesLeftOver.Except(selectedValues).ToList<MyEnum>(); // This will result in the remaining items (third item) being in valuesLeftOver list. 
```

简短而简单的代码。

尽量不要太担心效率。如今，优化算法是如此强大，以至于您可能会得到相同的汇编代码来执行此操作，而不是尝试手动执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T00:33:05.187

```
[Flags]
public enum NumberEnum : byte
{
    None = 0,
    One = 1,
    Two = 2,
    Three = 4
};       

public string GetRemainingEnumItem(NumberEnum filterFlags = 0)
{  
 if (((filterFlags & NumberEnum.One) == NumberEnum.One) && ((filterFlags & NumberEnum.Two) == NumberEnum.Two))
 {
    //1 & 2 are selected so item 3 is what you want
 }

 if (((filterFlags & NumberEnum.One) == NumberEnum.One) && ((filterFlags & NumberEnum.Three) == NumberEnum.Three))
 {
    //1 & 3 are selected so item 2 is what you want
 }

 if (((filterFlags & NumberEnum.Three) == NumberEnum.Three) && ((filterFlags & NumberEnum.Two) == NumberEnum.Two))
 {
    //2 & 3 are selected so item 1 is what you want
 }
} 
```

这就是你所说的：

```
var testVal = NumberEnum.One | NumberEnum.Two;
var resultWillEqual3 = GetRemainingEnumItem(testVal); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T08:15:25.450

您可能想尝试这种方法...

```
public enum Marx {chico, groucho, harpo};

public Marx OtherOne(Marx x, Marx y)
{
  return (Marx)((int)Marx.chico + (int)Marx.groucho + (int)Marx.harpo - (int)x - (int)y);
} // OtherOne

// ...

Marx a = Marx.harpo;
Marx b = Marx.chico;
Marx other = OtherOne(a, b); // picks groucho 
```

如果您使用标记为 [Flags] 的枚举，这可能很有用...

```
public class Enums2
{
  [Flags] public enum Bits {none = 0, aBit = 1, bBit = 2, cBit = 4, dBit = 8};
  public static readonly Bits allBits;

  static Enums2()
  {
    allBits = Bits.none;
    foreach (Bits b in Enum.GetValues(typeof(Bits)))
    {
      allBits |= b;
    }
  } // static ctor

  public static Bits OtherBits(Bits x)
  // Returns all the Bits not on in x
  {
    return x ^ allBits;
  } // OtherBits

  // ...

  Bits    someBits = Bits.aBit | Bits.dBit;
  Bits missingBits = OtherBits(someBits); // gives bBit and cBit

} // Enums2 
```

# c# - 想要在单击按钮时创建对象，并且每次单击都应创建新对象

> ID：15125189
> 
> 赞同：1
> 
> 时间：2013-02-28T00:18:59.997
> 
> 标签：c#, c#-3.0

我正在为我的大学申请，我想通过自定义构造函数创建学生对象，但我不知道如何在按钮单击时创建对象，我不想将它与数据库链接，我想在应用程序启动后创建对象当应用程序关闭时，所有对象都会被杀死。

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:22:45.043

我不完全确定你在问什么。

创建一个对象（无论这意味着什么）

```
SomeClass classInstance = new SomeClass(); 
```

C# 是一种托管语言，这意味着您无需担心在应用程序关闭后杀死对象，除非这些对象已实现`IDisposable`，但我觉得目前这超出了您的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T00:25:08.560

单击按钮 - 您将需要`Event`处理和订阅正确的事件。

创建一个新对象：

`YourClass objc = new YourClass()`

连接到数据库：

您需要`ConnectionString`正确设置并通过接口访问数据库`SqlClient`（或者您可以使用`Linq2Sql`实体框架或其他任何东西！）

**---在OP评论后编辑---**

您可以通过实际编译源代码并动态加载程序集来创建一个具有名称和一些 id 的新对象，并在文本框中传递名称和 id。这是在 C# 中做的丑陋的方式。但这是一种在 C# 中实际编译程序集然后运行它的方法：

[嵌入 C# 桌面应用程序的最佳脚本语言是什么？](https://stackoverflow.com/questions/137933/what-is-the-best-scripting-language-to-embed-in-a-c-sharp-desktop-application)

# java - 如何从循环中获取最后一个数字

> ID：15125190
> 
> 赞同：-1
> 
> 时间：2013-02-28T00:19:06.293
> 
> 标签：java, for-loop, primes

我正在研究应该显示一个数字的最大因子的应用程序，它也必须是素数。

那是我的应用程序：

```
public class BiggestFactor {

public static void main(String[] args) {

    double dev = 0d;
    for (double j = 0; j < 984654354654d; j++) {

        if (984654354654d % j == 0) {
            dev = j;
        }

        // show dev when is a prime number
        double i;
        for (i = 2; i < dev; i++) {

            double n;
            n = dev % i;

            if (n == 0) {
                // do nothing - not a prime number
                break;
            }
        }
        if (i == dev) {
            System.out.println(dev);
        }
    }
}
} 
```

我的问题是如何得到最后一个数字？就我而言，我得到一堆数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T00:26:07.000

*最小的*变化是声明一个新变量`result`：

```
 double result = -1; 
```

而不是打印`dev`，只需将其值保存在`result`：

```
 if (i == dev) {
            result = dev;
        } 
```

然后，在函数结束时，打印`result`：

```
 System.out.println(result): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T00:29:43.267

```
public class BiggestFactor 
{
    public static void main(String[] args) 
    {
        double dev = 0d;
        double last = dev;
        for (double j = 0; j < 984654354654d; j++) 
        {
            if (984654354654d % j == 0) 
            {
                dev = j;
            }
            double i;
            for (i = 2; i < dev; i++) 
            {
                double n;
                n = dev % i;
                if (n == 0) 
                {
                    break;
                }
            }
            if (i == dev) 
            {
                last = dev;
            }
        }
        System.out.println(last);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T00:37:03.230

我做了一些重构，并将检查素数的逻辑移到另一个函数中以便更好地理解。还将数字更改为`1001`以提高验证速度：P

```
public class BiggestPrimeFactor {

    public static void main(String[] args) {

        double dev = 0d;

        double numberToCheck = 1001d;

        for (double j = 0; j <= numberToCheck / 2; j++) {

            if (numberToCheck % j == 0 && isPrime(j)) {

                dev = j;

            }
        }

        System.out.println(dev);
    }

    private static boolean isPrime(double n) {
        boolean prime = true;

        for (long i = 2; i <= n / 2; i += 2) {

            if (n % i == 0) {

                prime = false;
                break;

            }
        }

        return prime;
    }
} 
```

基本上，不断更新`dev`成为当前最大的主要因素是什么。

# cordova - 阅读pdf浏览器phonegap

> ID：15125193
> 
> 赞同：0
> 
> 时间：2013-02-28T00:19:19.170
> 
> 标签：cordova, pdf, external-links

我想用phonegap阅读这样的pdf：

```
window.open('http://www.mysite.com/file.pdf', '_blank', 'location=yes'); 
```

但我有一个白页有没有办法在不下载的情况下阅读 pdf 文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:51:40.063

补充一下 tonylefler 所说的，mozillas pdf.js 可以在他们的移动浏览器中的移动设备上运行，让您无需下载并在外部查看器中打开即可查看 pdf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:19:15.487

好的，我发现使用谷歌网络服务阅读 pdf。谢谢大家

# jquery - 在 ASP.NET 控件库中创建服务代理处理程序以防止跨域请求

> ID：15125195
> 
> 赞同：1
> 
> 时间：2013-02-28T00:19:32.937
> 
> 标签：jquery, asp.net, ajax, wcf, xss

我创建了一个 ASP.NET 库，其中包含多个自定义服务器控件，以支持跨多个 Web 应用程序重用通用功能。一些控件依赖于 Web 服务来查询数据（例如，您可以搜索员工的 HR Web 服务）。服务器控件在客户端上生成/注册 JavaScript，我使用 jQuery 创建扩展来完成客户端的繁重工作。

我不能保证 Web 服务与应用程序在同一个域中，因此我试图确定避免跨域 AJAX 请求的最佳方法，而无需请求修改用户浏览器设置。我还想避免要求其他开发人员手动将代理添加到他们的应用程序中。

我认为我需要在我的库中创建一个代理服务，并通过我的库中的代码注册处理程序，或者当他们通过 NuGet 将库添加到他们的应用程序时我需要创建一个处理程序。

我已经尝试搜索有关执行此操作的信息，虽然有很多关于代理等的信息，但我找不到任何信息来做我想要实现的目标。

# javascript - 在窗口调整大小时调整 html 元素的大小

> ID：15125199
> 
> 赞同：1
> 
> 时间：2013-02-28T00:19:47.630
> 
> 标签：javascript, asp.net

几天前我发现了一个类似的问题，从那时起我一直在尝试实施其中一个建议，但没有成功。任何我有一个 ASPx 页面，而不是主页面，它有两个表，一个在另一个之上。我已经按照我想要的方式格式化了顶部。但是，我想让它适合窗口的底部，或者更好的是，显示一个垂直滚动条。

我已经用溢出样式将底部表格包裹在一个div中：auto; 在 CSS 文件中。然后我在页面中使用以下脚本来管理调整大小：

```
 $(function () {
        $('.tblContent table').css({ 'height': (($(window).height()) - 50) + 'px' });

        $(window).resize(function () {
            $('.tblContent table').css({ 'height': (($(window).height()) - 50) + 'px' });
        });
    }); 
```

我的 div 看起来像：

```
<div class="tblContent"> 
```

CSS 文件包含：

```
.tblContent 
{
    overflow-style: auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:24:10.277

我不是 css 大师，但一定要给你的桌子一个特定的高度以导致溢出发生。

```
.tblContent 
{
    overflow: auto;
    height : 400px;
    display : block;
} 
```

为什么显示：block;？因为我对 css 很烂，几乎所有东西都用它。另外，我使用溢出：自动。我不确定溢出样式是什么，尽管它可能是正确的。

另外，由于我们俩都不擅长 css，所以这里有一个 css 参考链接。

[http://www.w3schools.com/cssref/pr_pos_overflow.asp](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:24:38.553

对于包含表格的底部 div（假设您希望它占屏幕的 50%。您显然可以调整它。）：

```
overflow:auto;
height:50%;
width:100%; 
```

对于表本身：

```
width:100%; 
```

# mysql - 在 Mac OS X 10.5 上，mysql 数据库文件驻留在哪里

> ID：15125204
> 
> 赞同：1
> 
> 时间：2013-02-28T00:20:06.857
> 
> 标签：mysql, osx-leopard

我需要从备份到映像磁盘中的 MySQL 访问旧文件。我在哪里可以找到它们？我应该寻找哪些文件和扩展名？我正在使用 10.5.8 在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:23:45.277

在 mac OX 10.8 上

这是它所在的地方

```
/usr/local/mysql 
```

和里面的数据文件夹

到达这里的简单方法是 GO > Go to folder > 只需输入位置

# facebook - 使用 iOS 6.0 和 Storyboard 进行 Facebook 单点登录

> ID：15125213
> 
> 赞同：1
> 
> 时间：2013-02-28T00:20:55.787
> 
> 标签：facebook, authentication, ios6, storyboard, single-sign-on

我使用以下教程使用新的 6.0 Facebook 集成进行登录 [。iOS 6 教程：将 Facebook 集成到您的应用程序中](http://blogs.captechconsulting.com/blog/eric-stroh/ios-6-tutorial-integrating-facebook-your-applications)

在这里，我不需要 Facebook SDK 只是来自苹果的新社交框架，它运行良好。

我的问题是如何在情节提要中构建这个单点登录？在成功验证后，我的登录视图应该将用户重定向到下一个视图，并且永远不会再次出现。

我一直在寻找一个准备序列的解决方案，但不确定我如何捕获用户的登录状态，以及下次用户打开应用程序时如何检查它。

当按下登录按钮时，会触发以下功能：

```
- (IBAction)advancedButtonPressed:(id)sender {

self.accountStore = [[ACAccountStore alloc]init];
ACAccountType *FBaccountType= [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

NSString *key = @"270430619733847";
NSDictionary *dictFB = [NSDictionary dictionaryWithObjectsAndKeys:key,ACFacebookAppIdKey,@[@"email"],ACFacebookPermissionsKey, nil];

[self.accountStore requestAccessToAccountsWithType:FBaccountType options:dictFB completion:

 ^(BOOL granted, NSError *e) {
     if (granted) {
         NSArray *accounts = [self.accountStore accountsWithAccountType:FBaccountType];

         //it will always be the last object with single sign on
         self.facebookAccount = [accounts lastObject];
         NSLog(@"facebook account =%@",self.facebookAccount);
         [self get];

     } else {
         //Fail gracefully...
         NSLog(@"error getting permission %@",e);

     }
 }]; 
```

获取方法是：

```
-(void)get 
```

{

```
NSURL *requestURL = [NSURL URLWithString:@"https://graph.facebook.com/me"];

SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                        requestMethod:SLRequestMethodGET
                                                  URL:requestURL
                                           parameters:nil];
request.account = self.facebookAccount;

[request performRequestWithHandler:^(NSData *data,
                                     NSHTTPURLResponse *response,
                                     NSError *error) {

    if(!error)
    {
        list =[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

        NSLog(@"Dictionary contains: %@", list );
        if([list objectForKey:@"error"]!=nil)
        {
            [self attemptRenewCredentials];
        }
        dispatch_async(dispatch_get_main_queue(),^{
            nameLabel.text = [list objectForKey:@"username"];
        });
    }
    else{
        //handle error gracefully
        NSLog(@"error from get%@",error);
        //attempt to revalidate credentials
    }

}]; 
```

# backbone.js - Backbone Marrionett 和预编译的车把模板

> ID：15125214
> 
> 赞同：1
> 
> 时间：2013-02-28T00:21:00.880
> 
> 标签：backbone.js, handlebars.js, marionette, precompiled

**背景**

我正在尝试使用`Backbone.Marionette`.

这些模板呈现，但数据未填充到模板中。谁能说我做错了什么？

使用`backbone.Marionette.handlebars`插件。

**代码**

```
mws.app = new Backbone.Marionette.Application();

mws.app.addRegions({
    page: "#page",
    contentContainer: "#mws-content-container"
});

mws.views.pageView = Backbone.Marionette.ItemView.extend({
    template:{
        type: 'handlebars',
        template: Handlebars.templates.page,
        serializeData: function(){
            return {
                'baseurl': "http://www.overstock.com/yo",
                'content': "content...?",
                'current_year': new Date().getFullYear(),
            }
        }
    }
});

mws.views.oasisRender = Backbone.Marionette.ItemView.extend({
    template:{
        type: 'handlebars',
        template: Handlebars.templates.oasis,
        serializeData: function(){
            return {
                'img1src': mws.homeDir+'img/oasis_1.png',
                'img2src': mws.homeDir+'img/oasis_2.png',
                'img3src': mws.homeDir+'img/oasis_3.png'
            };
        }
    }
});      

mws.app.router = Backbone.Marionette.AppRouter.extend({
    appRoutes: {
        'home' : 'homeRender'
    },
    homeRender: function(){
        mws.app.contentContainer.show(new mws.views.oasisRender());
    }
});

mws.app.addInitializer(function(){
    mws.app.page.show(new mws.views.pageView());
    mws.app.contentContainer.show(new mws.views.oasisRender());

});

mws.app.start(); 
```

# svn - 删除 SVN 中的目录，以便“svn up”不会恢复该目录

> ID：15125216
> 
> 赞同：1
> 
> 时间：2013-02-28T00:21:19.443
> 
> 标签：svn

让我举个例子吧。假设我有一个名为“mycheckout”的结帐目录。在它里面，有很多子目录和文件。有一个名为“mysub”的子目录，我不需要，但其他人可能需要。当然我不能做“svn rm mysub”。但我想删除*mysub*以便下次我从*mycheckout*执行“svn up”时，它不会被恢复。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:30:15.713

您可以在使用[Sparse Directories](http://svnbook.red-bean.com/en/1.7/svn.advanced.sparsedirs.html "稀疏目录")结帐时执行此操作。

# javascript - 在 contentEditable 中将 HTML 转换为纯文本

> ID：15125217
> 
> 赞同：17
> 
> 时间：2013-02-28T00:21:22.187
> 
> 标签：javascript, jquery, html, text, contenteditable

我有一个，我通过捕捉事件`contentEditable`来去除粘贴内容的格式。`on('paste')`然后我聚焦一个文本区域，将内容粘贴到那里，然后复制该值。几乎来自[这里](https://stackoverflow.com/a/10551358/1959872)的答案。问题是我不能这样做：

```
$("#paste-output").text($("#area").val()); 
```

因为那会用粘贴的文本替换我的整个内容。所以我需要将内容粘贴到插入符号的位置。我整理了一个执行此操作的脚本：

```
pasteHtmlAtCaret($("#area").val());

// pastes CTRL+V content at caret position
function pasteHtmlAtCaret(html) {
  var sel, range;
  if (window.getSelection) {
    sel = window.getSelection();
    if (sel.getRangeAt && sel.rangeCount) {
      range = sel.getRangeAt(0);
      range.deleteContents();
      var el = document.createElement("div");
      el.innerHTML = html;
      var frag = document.createDocumentFragment(), node, lastNode;
      while ((node = el.firstChild)) {
        lastNode = frag.appendChild(node);
      }
      range.insertNode(frag);

      if (lastNode) {
        range = range.cloneRange();
        range.setStartAfter(lastNode);
        range.collapse(true);
        sel.removeAllRanges();
        sel.addRange(range);
      }
    }
  } else if (document.selection && document.selection.type != "Control") {
    document.selection.createRange().pasteHTML(html);
  }
} 
```

唯一的问题是它使用`html`变量在插入符号位置粘贴 HTML 内容。如何将其转换为纯文本？我尝试将 jQuery 添加`.text(html)`到变量中，但没有运气。这样的事情可能会有所帮助：

```
el.textContent||el.innerText; 
```

有什么想法或更好的解决方案吗？谢谢！

* * *

**编辑：** 感谢下面的答案，我修改了我的代码并解决了这个问题。我基本上将 的值复制`textarea`到 a中`div`并只抓住了它的值`.text()`：

```
// on paste, strip clipboard from HTML tags if any
$('#post_title, #post_content').on("paste", function() {
    var text = $('<div>').html($("#area").val()).text();
    pasteHtmlAtCaret(text);
  }, 20);
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T00:29:27.567

1.  创建一个外部div，
2.  把你的html放在那个div中，
3.  复制该 div 中的文本
4.  将其插入光标位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-28T18:52:01.890

应 Jonathan Hobbs 的要求，我将其发布为答案。感谢上面的答案，我修改了我的代码并解决了这个问题。我基本上将 textarea 的值复制到了一个 div 中，并且只抓取了它的 .text()：

```
// on paste, strip clipboard from HTML tags if any
$('#post_title, #post_content').on("paste", function() {
  setTimeout(function(){
    var text = $('<div>').html($("#area").val()).text();
    pasteHtmlAtCaret(text);
  }, 20);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-20T08:02:28.793

更换标签解决方案：

[http://jsfiddle.net/tomwan/cbp1u2cx/1/](http://jsfiddle.net/tomwan/cbp1u2cx/1/)

```
var $plainText = $("#plainText");
var $linkOnly = $("#linkOnly");
var $html = $("#html");

$plainText.on('paste', function (e) {
    window.setTimeout(function () {
        $plainText.html(removeAllTags(replaceStyleAttr($plainText.html())));
    }, 0);
});

$linkOnly.on('paste', function (e) {
    window.setTimeout(function () {
        $linkOnly.html(removeTagsExcludeA(replaceStyleAttr($linkOnly.html())));
    }, 0);
});

function replaceStyleAttr (str) {
    return str.replace(/(<[\w\W]*?)(style)([\w\W]*?>)/g, function (a, b, c, d) {
        return b + 'style_replace' + d;
    });
}

function removeTagsExcludeA (str) {
    return str.replace(/<\/?((?!a)(\w+))\s*[\w\W]*?>/g, '');
}

function removeAllTags (str) {
    return str.replace(/<\/?(\w+)\s*[\w\W]*?>/g, '');
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-07T08:18:44.793

我使用的解决方案是将元素的 innerText 设置为模糊：

`$element.on('blur', () => this.innerText = this.innerText);`

这会保留空格，但会删除格式。它在您的场景中也可以接受。

# ruby-on-rails - Roo 错误需要将 Mail::Part 转换为文件

> ID：15125219
> 
> 赞同：0
> 
> 时间：2013-02-28T00:21:37.323
> 
> 标签：ruby-on-rails, ruby, excel, email-attachments

我使用 ruby​​ 从电子邮件 (gmail) 访问电子邮件附件`messages.attachments`

要访问我做的第一个附件`attachment = messages.attachment[0]`

这个附件总是一个 .xslx 文件，当使用 roo gem（解析 excel）访问它并解析它时，我不断收到错误“无法将 Mail::Part 转换为字符串”

什么是 Mail::Part 以及如何将其转换为文件或 Roo 可以理解的文件路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:25:14.923

A`Mail::Part`实际上只是一条消息。因此，要获取零件的（解码）主体，请执行以下操作：

```
attachment.body.decoded 
```

# android - Android Holo Dialog 有 2 个背景层叠在一起

> ID：15125220
> 
> 赞同：11
> 
> 时间：2013-02-28T00:21:42.153
> 
> 标签：android

![在此处输入图像描述](../Images/2e13bba2669dce618203ae1d383ce475.png)

对话框如下所示。对话框本身后面有一层，每边大约 10-20 像素左右。我使用的主题是 Theme.Holo.Dialog

我尝试创建一个具有透明背景的自定义对话框，但这不起作用：

```
<style name="CustomHoloDialog" parent="@android:style/Theme.Holo.Dialog">
     <item name="android:background">@android:color/transparent</item>
</style> 
```

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-28T01:21:26.967

如果要设置 Dialog 的样式，则必须使用`ContextThemeWrapper`：

```
AlertDialog.Builder mBuilder = new AlertDialog.Builder(new ContextThemeWrapper(context, android.R.style.Theme_Holo_Dialog)); 
```

# php - Laravel 多个嵌套视图

> ID：15125229
> 
> 赞同：4
> 
> 时间：2013-02-28T00:22:49.240
> 
> 标签：php, partial-views, laravel

我正在使用 laravel 布局，我有这样的设置；

//控制器

```
public function action_index()
{
    $this->layout->nest('submodule', 'partials.stuff');
    $this->layout->nest('content', 'home.index');
} 
```

// 布局

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    @yield('content');
</body>
</html> 
```

// 这是内容模板

```
@section('content')
    <div>
        @yield('submodule')
    </div>
@endsection 
```

我的问题是如何在“内容”部分插入部分模板？我还需要将变量传递给第二个模板“子模块”。

```
$this->layout->nest('partial', 'partials.partial'); 
```

这不起作用，因为它将视图绑定到布局。而我需要将它绑定到“内容”模板中定义的部分。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-16T07:31:47.760

以下是我修复 Laravel 嵌套视图问题的方法：

使用此解决方案，您也可以将数据传递到主视图

**解决方案：**

您需要在 home/index.blade.php 视图中呈现 partials.stuff，然后在 template.php 中创建一个视图以呈现“home/index.blade.php”的“内容”

利用`<?php render('partials.stuff') ?>`

首先让你的`home/index.blade.php:`

```
<div>
      <?php render('partials.stuff') ?>
</div> 
```

第二次渲染你的视图——没有任何嵌套的“子模块”调用

```
public function action_index()
{
    $this->layout->nest('content', View::make('home.index'),$data) ;
} 
```

最后你的模板将保持不变——渲染`{{ $content }}`

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    {{ $content }}
</body>
</html> 
```

希望这对您有所帮助，因为它解决了我的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:55:59.583

以下是您通常会做的事情：

```
public function action_index()
{
    $this->layout->nest('content', View::make('home.index')->nest('submodule', 'partials.stuff'));
} 
```

在您的模板中：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    {{ $content }}
</body>
</html> 
```

和你的`home/index.blade.php`：

```
<div>
     {{ $submodule }}
</div> 
```

# jquery - JQuery UI：绝对DIV可拖动的可排序元素

> ID：15125233
> 
> 赞同：0
> 
> 时间：2013-02-28T00:23:38.473
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有代码：

```
<div class="content">
    <div id="sortable">
        <div class="guide">Element 1</div>
        <div class="guide">Element 2</div>
    </div>
</div>

<div class="overlay" style="position: absolute; display:block;">
</div> 
```

我有脚本：

```
$('#sortable').sortable({
    revert: true
});

$( ".guide" ).live({
    mouseover: function(event)
    {
        event.preventDefault();

        var item = $(this);

        var width = item.outerWidth();
        var height = item.outerHeight();

        var posTop = item.position().top + ((item.outerHeight(true) - item.outerHeight()) / 2);
        var posLeft = item.position().left + ((item.outerWidth(true) - item.outerWidth()) / 2);

        $('.overlay').css({left: posLeft, top: posTop, width: width, height: height});
    }
}); 
```

也就是说，我有一个可排序的 DIV，但绝对 DIV 会用鼠标悬停事件覆盖您的项目。但我不能再对底层元素进行排序。

出于技术原因，我需要在 DIV 元素上使用它。我在 jsFiddle 上做了一个例子：

[http://jsfiddle.net/roneioliveira/NPdnv/4/](http://jsfiddle.net/roneioliveira/NPdnv/4/)

# html - 如何在浮动旁边准确地将文本水平居中

> ID：15125237
> 
> 赞同：1
> 
> 时间：2013-02-28T00:23:52.033
> 
> 标签：html, css, css-float, center

我有一个容器，其中一些文本向右浮动，而其他文本我希望相对于整个容器水平居中。下面的代码仅使文本相对于浮动文本左侧的空间居中。容器的宽度可能因屏幕大小而异，居中和右侧的文本都是动态的，可以包含更多或更少的字符。

```
#holder {
    margin:15px;
    padding:15px;
    background-color:#000;
    color:#fff;
}
#right_text {
    float:right;
}
#center_text {
    text-align:center;
}
<div id="holder">
    <div id="right_text">back to page 3</div>
    <div id="center_text">load results 10-30 of 312</div>
</div> 
```

我不想绝对定位正确的文本，因为居中的文本可能会与它重叠。居中的文本应该在点击正确的文本之前改为自动换行，并且仍然水平居中。

我不想只向居中的文本容器添加左/右填充，因为右文本是动态的，我不知道所需的填充量。

[http://jsfiddle.net/eJFw6/8/](http://jsfiddle.net/eJFw6/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:41:36.087

所以，推荐了一个javascript解决方案，我想出了这个：

```
$(document).ready(function() {
    $("#center_text").css('padding','0px '+$("#right_text").outerWidth()+'px');
}); 
```

我还在右侧文本中添加了一些左侧和底部填充，因此如果容器更窄，则中心文本可以很好地换行。

```
#holder {
    margin:15px auto;
    padding:15px;
    background-color:#000;
    color:#fff;
    width:280px
}
#right_text {
    float:right;
    padding-left:15px;
    padding-bottom:50px;
}
#center_text {
    text-align:center;
}
<div id="holder">
    <div id="right_text">back to page 3</div>
    <div id="center_text">load results 10-30 of 312</div>
</div> 
```

[http://jsfiddle.net/littleRoom/eJFw6/12/](http://jsfiddle.net/littleRoom/eJFw6/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:51:46.610

```
#center_text {
    text-align:center;
    float:left;
} 
```

# python - sqlalchemy def __init__ 语法错误

> ID：15125240
> 
> 赞同：0
> 
> 时间：2013-02-28T00:24:04.123
> 
> 标签：python, syntax, sqlalchemy, init

我的**init** 函数收到错误消息，但找不到问题

```
class Character(Base):
  __tablename__ = 'character'

  id = Column(Integer, primary_key=True)
  _info_id = Column(Integer, ForeignKey('character_info.id'))
  _stats_id = Column(Integer, ForeignKey('character_stats.id'))
  _defence_id = Column(Integer, ForeignKey('character_defences.id'))
  _misc_id = Column(Integer)
  _skills_id = Column(Integer)
  _spells_id = Column(Integer)
  _inventory_id = Column(Integer) 

  _info = relationship("Character_Info", backref=backref('character'))
  _stats = relationship("Character_Stats", backref=backref('character'))
  _defences = relationship("Character_Defences", backref=backref('character')

    def __init__(self, _info, _stats, _defences, _misc, _skills, _spells, _inventory):
      self._info = _info
      self._stats = _stats
      self._defences = _defences
      self._misc = _misc
      self._skills = _skills
      self._spells = _spells
      self._inventory = _inventory 
```

我是 sqlalchemy 的新手，所以我不确定我是否也在正确地处理关系。

但问题似乎出在 def **init**行（我的 cmd 告诉我）

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:25:48.793

您在`)`此行的末尾缺少 a 。

`_defences = relationship("Character_Defences", backref=backref('character')`

加上`def __init__`块没有正确缩进。

# jquery - 分区结构。显示图像时出错

> ID：15125243
> 
> 赞同：0
> 
> 时间：2013-02-28T00:24:24.140
> 
> 标签：jquery, css, html

我正在做一个小网站。

我刚刚将索引加载到网站中，以向您展示 Firefox 和 IE 的“图形”问题。

地址是[http://www.anticamaddalena.it](http://www.anticamaddalena.it)

问题是这样的：

Safari 页面显示正常。一切正常。“部分”的图像很好并且正确附加。

Firefox 和 IE 无法正确显示 div 结构及其相关图像“级联”。我的意思是，我看到“按钮”之间有一个空格。图像没有附加，它不是流体。

我在 css 上尝试了 0 边距、img 标签上的边框 0 和 css 上的 0 填充。

我不是一个经验丰富的程序员，只是一个正在学习的新手。什么可能导致这种问题？

这里有 2 个显示问题的 img 链接：

苹果浏览器： ![在此处输入图像描述](../Images/9bbf6609dfa0a62e094c5b485ebbd027.png)

火狐： ![在此处输入图像描述](../Images/26c4b52c2a9d9938fa1c188b470a5a0a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:27:58.470

尝试这个：

添加css属性

```
display: inline-block; 
```

与这些图像一起使用的“a”元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:19:11.210

尝试添加

```
#blocco_centrale div a {
  line-height: 0px;
} 
```

或者

```
#blocco_centrale div a {
  display: block;
} 
```

在您的样式表中。它将解决问题。但我建议您使用更好的 HTML 结构和 CSS。

# .net - 如何使用 .getXML 而不是 .Merge 进行 dataset.Merge

> ID：15125251
> 
> 赞同：0
> 
> 时间：2013-02-28T00:25:11.173
> 
> 标签：.net, xml, ado.net, dataset

所以我一直无法让 dataset.Merge 正常工作，它似乎不想从同名和模式的数据表中附加记录。有关该问题，请参阅[https://stackoverflow.com/questions/15124504/cannot-get-dataset-merge-to-work](https://stackoverflow.com/questions/15124504/cannot-get-dataset-merge-to-work)。

我找到了一个使用 GetXML 的解决方法，我现在将回答它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:25:11.173

```
' Merge the XML from your datasets:
tempXML &= Dataset1.GetXML()
tempXML &= Dataset2.GetXML()
' Remove the root tags from the XML I used <FullRecord> for mine
tempXML = tempXML.Replace("<FullRecord>", "").Replace("</FullRecord>", "")
' Make a new dataset with the modified XML. Be sure to put root tag back first
MergedDS = New DataSet
rdr = New StringReader("<FullRecord>" & tempXML & "</FullRecord>")
MergedDS.ReadXml(rdr) 
```

新的`MergedDS`将包含您的所有表，并且相同命名的表将合并它们的记录。我只在我相当复杂的数据集（分别具有关系和其他约束的 4 个和 15 个表）上对其进行了测试。

# scala - 隐式对象上方法调用的Scala优先级

> ID：15125255
> 
> 赞同：0
> 
> 时间：2013-02-28T00:25:41.490
> 
> 标签：scala

假设我有以下 scala 代码：

```
case class Term(c:Char) {
   def unary_+ = Plus(this)
}

case class Plus(t:Term)

object Term {
  implicit def fromChar(c:Char) = Term(c) 
} 
```

现在我从 scala 控制台得到这个：

```
scala> val p = +'a'
p: Int = 97

scala> val q:Plus = +'a'
<console>:16: error: type mismatch;
found   : Int
required: Plus
   val q:Plus = +'a'
                ^ 
```

因为 '+' 已经存在于 Char 类型上，所以我认为不会发生隐式转换。在应用于 Char 类型之前，有没有办法覆盖默认行为并在转换后的 Term 上应用“+”？

（顺便说一句，这个例子是人为的，我不是在寻找替代设计。这个例子只是为了说明问题）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T00:49:06.457

不，没有办法覆盖默认`+`运算符，即使是隐式转换也是如此。当遇到未在接收对象上定义的运算符（实际上是方法，因为运算符只是普通方法）时，编译器将寻找到对象的隐式转换以提供此运算符。但是如果操作符已经在目标对象上定义了，它永远不会查找任何转换，原始的操作符总是会被调用。因此，您应该定义一个单独的运算符，其名称不会与任何先前存在的运算符冲突。

**更新**：控制隐式转换的精确规则在[Scala 语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)中定义：

> 视图适用于三种情况。
> 
> 1.  如果表达式 e 的类型为 T ，并且 T 不符合表达式的预期类型 pt。在这种情况下，搜索适用于 e 并且其结果类型符合 pt 的隐式 v。搜索与隐式参数的情况一样进行，其中隐式范围是 T => pt 之一。如果找到这样的视图，则表达式 e 将转换为 v(e)。
> 2.  在类型为 T 的 e 选择 em 中，如果选择器 m 不表示 T 的成员。在这种情况下，搜索适用于 e 并且其结果包含名为 m 的成员的视图 v。搜索与隐式参数的情况一样进行，其中隐式范围是 T 之一。如果找到这样的视图，则将选择 em 转换为 v(e).m。
> 3.  在类型为 T 的 e 的选择 em(args) 中，如果选择器 m 表示 T 的某些成员，但这些成员都不适用于参数 args。在这种情况下，搜索适用于 e 的视图 v，其结果包含适用于 args 的方法 m。搜索与隐式参数的情况一样进行，其中隐式范围是 T 之一。如果找到这样的视图，则将选择 em 转换为 v(e).m(args)。

换句话说，隐式转换发生在 3 种情况下：

1.  当表达式是类型但在预期`T`不相关类型的上下文中使用时，将应用从to的隐式转换（如果任何此类转换在范围内）。`T'``T``T'`

2.  当试图访问该对象上不存在的对象成员时，将应用从该对象到另一个具有该成员的对象的隐式转换（如果任何此类转换在范围内）。

3.  当尝试使用不匹配任何相应重载的参数列表调用对象的方法时，编译器会应用从该对象到另一个对象的隐式转换，该对象确实具有该名称的方法并具有兼容的参数列表（如果任何此类转换在范围内）。

    请注意，这实际上不仅仅适用于方法（具有`apply`方法的内部对象/val 也符合条件）。另请注意，Randall Schulz 在下面的评论中谈到了这种情况。

因此，在您的情况下，第 (2) 和 (3) 点是相关的。鉴于您要定义一个名为 的方法`unary_+`，该方法已经存在于 type`Int`中，情况 (2) 不会启动。并且鉴于您的版本与内置`Int.unary_+`方法具有相同的参数列表（它们都是无参数的），点(3) 也不会踢。因此，您绝对不能定义将重新定义的隐式`unary_+`.

# c# - 数字角色验证过程需要大量时间与庞大的数据库

> ID：15125262
> 
> 赞同：1
> 
> 时间：2013-02-28T00:26:20.927
> 
> 标签：c#, fingerprint

我正在开发一个使用 Digital Persona U.are.U 4000b 指纹读取器的软件。

它工作正常。但是我在指纹验证过程中遇到了性能问题。

我的数据库在那里注册了大约 3.000 个指纹，我需要在验证过程中循环所有这些指纹。

但是每次成功的指纹读取大约需要 7 秒才能匹配我数据库的相应记录（这取决于它的索引）。

这对我来说不是一个可接受的场景，因为我需要在 20 分钟的间隔内注册（并实时显示他们的数据、照片……）至少 400 名学生。问题出在巨大的指纹数据库上，因为当我用较小的指纹数据库对其进行测试时，它运行良好。

我正在使用带有 C# 的 .NET 和用于指纹的免费 SDK。导致此问题的代码行是在 FOREACH 中执行的代码行（对于数据库的每个注册指纹）：

```
verificator.Verify(features, template, ref result); 
```

*   `verificator`是`DPFP.Verification.Verification`处理验证过程的对象；
*   `features`是一个`DPFP.FeatureSet`包含实际指纹数据的对象；
*   `template`是`DPFP.Template`代表每个登记指纹的对象；
*   `result`是一个`DPFP.Verification.Verification.Result`包含每个指纹验证返回的对象。

这是整个`process`方法：

```
 protected void process(DPFP.Sample sample)
    {
        DPFP.FeatureSet features = ExtractFeatures(sample, DPFP.Processing.DataPurpose.Verification);
        bool verified = false;
        if (features != null)
        {
            DPFP.Verification.Verification.Result result = new DPFP.Verification.Verification.Result();
            //"allTemplates" is an List<> of objects that contains all the templates previously loaded from DB
            //There is no DB access in these lines of code
            foreach (var at in allTemplates)
            {
                verificator.Verify(features, at.template, ref result);
                if (result.Verified)
                {
                    register(at.idStudent);
                    verified = true;
                    break;
                }
            }
        }
        if (!verified)
            error("Invalid student.");
    } 
```

我做得对吗？

还有另一种方法可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-22T05:00:48.363

我通过购买（我“赢得”了它，因为我已经购买了一个阅读器）解决了我的问题，新版本的 SDK 已经实现了**识别**(1:n) 功能。[您可以在他们的网站上](http://devportal.digitalpersona.com/)获取更多信息并下载（购买）SDK 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:37:03.897

试用 SourceAFIS。它是开源的，如果您将指纹缓存在内存中，它会以超过 10k 指纹/秒的速度执行您所说的 1-N 识别过程。源代码也是 100% C#。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T03:15:17.217

最好将模板转换为字符串

```
byte [] a = new byte [1632];
Template.Serialize (ref a);
string Convert.ToBase64String basestring = (a); 
```

然后恢复正常的模板

```
byte [] b = new byte [1632];
b = Convert.FromBase64String (trace) / / pass the base-64 string to a byte array.
/ / create a Template type varibale where we store the template
DPFP.Template DPFP.Template template = new ();
/ / what to compare it desserializamos
template.DeSerialize (b); 
```

# java - 根据任务的结果取消计划的固定费率任务

> ID：15125264
> 
> 赞同：3
> 
> 时间：2013-02-28T00:26:25.740
> 
> 标签：java, spring, scheduled-tasks, scheduling, future

我正在使用 Spring 的 TaskScheduler 来安排定期任务。

```
ScheduledFuture scheduleAtFixedRate(Runnable task, long period); 
```

我知道我可以在 ScheduledFuture 上调用 cancel() 来停止执行重复任务。但是我想根据任务执行的结果取消重复的计划任务，并且不知道如何最好地做到这一点。

ScheduledFuture 是否允许我访问每个执行任务的结果？或者我是否需要某种任务监听器来保持对这个 ScheduledFuture 的引用，并以这种方式取消它？或者是其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:55:47.530

好的，看起来这是可能的，但可能有更好的方法。

由于重复作业只需要一个 Runnable（返回类型为 void），因此无法返回任务的结果。因此，停止重复任务的唯一方法是使任务执行副作用，例如将停止消息添加到队列中。然后一个单独的线程需要监视这个队列，一旦它看到消息就可以取消作业。

非常混乱和复杂。

更好的选择是创建一个正常的（一次性）计划任务。然后任务本身可以决定是否需要调度另一个任务，并且可以自己调度下一个任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-06T22:27:17.017

保留一个句柄或原来的固定费率`ScheduledFuture`，然后当您想要取消它的条件出现时，安排一个执行取消的新任务。

您也可以使用`RunnableScheduledFuture`.

**从`ScheduledExecutorService`文档**

[https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)

```
 import static java.util.concurrent.TimeUnit.*;
 class BeeperControl {
   private final ScheduledExecutorService scheduler =
     Executors.newScheduledThreadPool(1);

   public void beepForAnHour() {
     final Runnable beeper = new Runnable() {
       public void run() { System.out.println("beep"); }
     };
     final ScheduledFuture<?> beeperHandle =
       scheduler.scheduleAtFixedRate(beeper, 10, 10, SECONDS);
     scheduler.schedule(new Runnable() {
       public void run() { beeperHandle.cancel(true); }
     }, 60 * 60, SECONDS);
   }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-11T19:57:10.927

这是一个修改后的蜂鸣器示例，演示了如何在每个计划任务之后做出决定。我使用了一个闩锁，这样我就可以将它包装在一个测试用例中并断言发生了正确的事情（当然是为了防止测试运行器的线程停止）。我还更改了间隔（在最初的 10 毫秒延迟后，它每 10 毫秒发出一次哔声），因此可以在一秒钟内而不是一小时内复制、粘贴和执行测试。

```
 import org.junit.Assert;
import org.junit.Test;
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.ScheduledFuture;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.atomic.AtomicInteger;

public class BeeperTest {
    class BeeperControl {
        private final ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1, (runnable) -> {
            Thread thread = new Thread(runnable);
            thread.setName("MyAwesomeBeeperTestThread");
            thread.setDaemon(true);
            return thread;
        });

        public void beepTheNumberOfTimesIWant(CountDownLatch latch) {
            long initialDelay = 10;
            long frequency = 10;
            TimeUnit unit = TimeUnit.MILLISECONDS;
            final int numberOfTimesToBeep = 5;
            AtomicInteger numberOfTimesIveBeeped = new AtomicInteger(0);
            final ScheduledFuture[] beeperHandle = new ScheduledFuture[1];
            beeperHandle[0] = scheduler.scheduleAtFixedRate(() -> {
                    if (numberOfTimesToBeep == numberOfTimesIveBeeped.get()) {
                        System.out.println("Let's get this done!");
                        latch.countDown();
                        beeperHandle[0].cancel(false);
                    }
                    else {
                        System.out.println("beep");
                        numberOfTimesIveBeeped.incrementAndGet();
                    }
                }, initialDelay, frequency, unit);
        }
    }

    @Test
    public void beepPlease() throws InterruptedException {
        CountDownLatch latch = new CountDownLatch(1);
        BeeperControl control = new BeeperControl();
        control.beepTheNumberOfTimesIWant(latch);
        boolean completed = latch.await(1, TimeUnit.SECONDS);
        Assert.assertTrue("Beeper should be able to finish beeping" +
            "within allotted await time.", completed);
    }
} 
```

# objective-c - 如何在界面生成器中将对象添加到原型单元格

> ID：15125271
> 
> 赞同：0
> 
> 时间：2013-02-28T00:27:16.717
> 
> 标签：objective-c, uitableview, interface-builder

以前我已经能够通过将对象拖到它上面等来设计界面构建器中 UITableView 原型单元的基本外观。

我现在正在尝试使用 iPad 主详细信息模板执行此操作，但界面构建器不允许这样做。

我知道它可以通过编程方式或通过创建单独的 .xib 来完成，但这样做很有意义，因为能够更直观地看到它在实际表视图中的外观。

![之前](../Images/6852ecc226a2487bb7d6349012013314.png)

![现在](../Images/8629bc3d3f571e5d750543cfa062afe2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:33:09.650

*   单击原型单元格。
*   打开属性检查器（`option`+`⌘</kbd>+`4`)`
*   在 Table View Cell 部分下，将样式更改为 Custom。

现在您可以将任何您喜欢的对象拖到单元格上。

# python - 当本地模块屏蔽外部模块导入的标准库模块时，如何导入外部模块？

> ID：15125272
> 
> 赞同：2
> 
> 时间：2013-02-28T00:27:17.203
> 
> 标签：python, python-2.7

我有一个名为 的本地模块`tokenize.py`，它掩盖了一个同名的标准库模块。我只是在尝试导入外部模块（sklearn.linear_model）时才发现这一点，该模块反过来会`import tokenize`并希望获得标准库模块，但会获得我的本地模块。

这与[当有同名的本地模块时如何在 Python 中访问标准库模块有关？](https://stackoverflow.com/questions/1900189/how-to-access-a-standard-library-module-in-python-when-there-is-a-local-module-w)，但设置不同，因为应用上述解决方案需要修改外部模块。

一个选项是重命名 local `tokenize.py`，但我不希望这样做，因为“tokenize”最能表达模块的作用。

为了说明这个问题，这里是一个模块结构的草图：

```
   \我的模块
      \__init__.py
      \tokenize.py
      \use_tokenize.py

```

在 use_tokenize.py 中，有以下导入：

```
import sklearn.linear_model 
```

调用时会导致以下错误`python my_module/use_tokenize.py`：

```
Traceback (most recent call last):
  File "use_tokenize.py", line 1, in <module>
    import sklearn.linear_model
  <...>
  File "<EDITED>/lib/python2.7/site-packages/sklearn/externals/joblib/format_stack.py", line 35, in <module>
    generate_tokens = tokenize.tokenize
AttributeError: 'module' object has no attribute 'tokenize' 
```

导入外部模块时有什么方法可以抑制本地模块？

编辑：由于解决方案因 Python 版本而异的评论，将 python2.7 添加为标签

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T06:03:53.003

问题不在于模块名称，而在于您正在运行一个*模块*，就像它是一个*脚本*一样。当 Python 运行脚本时，它会将脚本的包含目录添加为 中的第一个元素`sys.path`，因此来自任何地方的所有模块查找都将首先搜索该目录。

为避免这种情况，请让 Python 将其作为模块执行：

```
python -m my_module.use_tokenize 
```

或者，当然，您可以将可执行脚本保留在模块层次结构之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:06:22.770

解释器在其中搜索模块的路径列在`sys.path`. 为了防止第三方模块在导入时看到本地模块，我们`.`从路径中删除。这可以通过以下方式实现：

```
import sys
sys.path = sys.path[1:]
import sklearn.linear_model #using the original example. 
```

`tokenize`但是，如果本地已经被导入，这将不起作用，并且它也会阻止本地`tokenize`被导入，即使我们恢复旧`sys.path`的如下：

```
import sys
old_path = sys.path
sys.path = sys.path[1:]
import sklearn.linear_model #using the original example.
sys.path = old_path 
```

这是因为 Python 解释器维护了导入模块的内部映射，以便以后对同一模块的请求通过该映射来满足。这个映射对于解释器来说是全局的，所以`import tokenize`从运行它的任何代码中返回相同的模块——这正是我们试图改变的行为。为了实现这一点，我们必须改变这个映射。最简单的方法是简单地从 中删除相关条目`sys.modules`。

```
import sys
old_path = sys.path
sys.path = sys.path[1:]
import sklearn.linear_model #using the original example.
sys.path = old_path
del sys.modules['tokenize'] #get of the mapping to the standard library tokenize
import tokenize #cause our local tokenize to be imported 
```

# c++ - 调用 D3D 的 CreateRasterizerState1 时出现 InvalidArgumentException

> ID：15125274
> 
> 赞同：0
> 
> 时间：2013-02-28T00:27:25.070
> 
> 标签：c++, direct3d, directx-11

我正在通过 C++ 在 DirectX 11 中工作，并且在创建 raserizer 状态时出现错误。首先，这里是代码：

```
// set up rasterizer
D3D11_RASTERIZER_DESC1 rasterizerStateDescription;
::ZeroMemory(&rasterizerStateDescription, sizeof(D3D11_RASTERIZER_DESC1));
rasterizerStateDescription.FillMode = D3D11_FILL_WIREFRAME;
ID3D11RasterizerState1* rasterizerState;
DX::ThrowIfFailed(m_d3dDevice->CreateRasterizerState1(&rasterizerStateDescription, &rasterizerState));
m_d3dContext->RSSetState(rasterizerState); 
```

在那里设置 FillMode 并不重要 - 这只是为了说明我的用法。我已经尝试设置所有成员，但没有一个。在调试器中，我可以看到所有其他成员都有其默认值。

该错误在 CreateRaserizerState1 处引发，并且是：

```
First-chance exception at 0x75EC4B32 in my.exe: 
Microsoft C++ exception: 
Platform::InvalidArgumentException ^ at memory location 0x028DE2CC. 
HRESULT:0x80070057 
```

据我所知， raserizerStateDescription 和 rasterizerState 都是有效的，所以我不清楚为什么我在这里得到一个无效的参数异常。

注释掉 CreateRasterizerState1 和 RSSetState 调用允许应用程序正常运行。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:18:43.020

解决。问题是我没有指定 DepthClipEnable == true。因为我的目标是功能级别 9.1，[所以 DepthClipEnable 必须为 true](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476150%28v=vs.85%29.aspx#ID3D11Device_CreateRasterizerState)，并且因为我正在将内存归零，所以我有效地将其设置为 false。

# javascript - 为什么我需要将 DataView（而不仅仅是 DataTable）传递给 PieChart.draw()？

> ID：15125275
> 
> 赞同：6
> 
> 时间：2013-02-28T00:27:29.577
> 
> 标签：javascript, google-visualization

我进行了很多搜索，终于能够运行我的谷歌图表代码。这是我同时使用数据视图和数据表的代码。

//这是我的chartDraw.php代码

```
<html>
<head>
<!--Load the AJAX API -->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">

function drawChart(){
  var jsonData = $.ajax({
        url:"getdata.php",
        dataType:"json",
        async:false
        }).responseText;

//This is used when you hard code your values: static data. Here I am taking data from database so commented it.
/*var jsonData='{"cols":[{"label":"User ID","type":"string"},{"label":"Group Name","type":"string"},{"label":"Requested Nodes","type":"number"},{"label":"Actual PE","type":"number"}],"rows":[{"c":[{"v":"user 1"},{"v":"ufhpc"},{"v":1},{"v":5.000}]},{"c":[{"v":"user2"},{"v":"ufhpc"},{"v":1},{"v":7.000}]}]}';
*/
//Create our data table out of JSON data loaded from server
var data=new google.visualization.DataTable(jsonData);

//PieCharts expects 2 columns of data: a label and a value, so we need to use a DataView to restrict to 2 columns
var view=new google.visualization.DataView(data);
view.setColumns([0,3]);

//Instantiate and draw our chart, passing in some options
var chart=new google.visualization.PieChart(document.getElementById('chart_div'));
chart.draw(view,{width:400,height:240});
}

//Load the visualization API and the piechart package
google.load('visualization','1',{'packages':['corechart']});

//Set a callback to run when the google visualization API is loaded
google.setOnLoadCallback(drawChart);
</script>
</head>

<body>
        <!--Div that will hold the pie chart -->
        <div id="chart_div"></div>
</body>
</html> 
```

//getdata.php: 包含连接和查询

```
<?php

mysql_connect('localhost','user','password');
mysql_select_db('dbname');

$sqlquery1="select userid,group_name,req_nodes,actualPE from jobs where userid='zhang' limit 200";

$sqlresult1=mysql_query($sqlquery1);

$table=array();
$table['cols']=array(
        array('label'=> 'User ID', type=>'string'),
        array('label'=>'Group Name', type=>'string'),
        array('label'=>'Requested Nodes', type=>'number'),
        array('label'=>'Actual PE', type=>'number')
);
$rows=array();

while($r=mysql_fetch_assoc($sqlresult1)){
        $temp=array();
        $temp[]=array('v' => $r['userid']);
        $temp[]=array('v' => $r['group_name']);
        $temp[]=array('v' =>(int) $r['req_nodes']);
        $temp[]=array('v' =>(float) $r['actualPE']);

        $rows[]=array('c' => $temp);
}

$table['rows']=$rows;

$jsonTable = json_encode($table);
//this print statement just for testing
print $jsonTable;

?> 
```

`DataView`类和`DataTable`构造函数有什么区别？如果我不使用`DataView`，它不会打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T03:25:09.990

使用谷歌：

[谷歌可视化 API。](https://code.google.com/p/google-visualization-api-issues/issues/detail?id=270)

堆栈溢出不适用于教程，而是用于生产性问题。如果您想创建教程，您可能需要使用名为[The Code Player](https://thecodeplayer.com)的网站。

# java - 用于 Web 应用程序问题的 Struts2 web.xml 文件过滤器 jar

> ID：15125276
> 
> 赞同：4
> 
> 时间：2013-02-28T00:27:35.783
> 
> 标签：java, xml, web-applications, struts2

我目前正在尝试使用 Struts2 框架创建一个小型 Web 应用程序。（在日食中）

我目前正在尝试在 web.xml（在 WEB-INF 文件夹中）文件中使用过滤器来将控制权转移到 struts.xml 文件（在 src 文件夹中）。（这是我在教程中看到的）。

我用于过滤器的代码如下：

```
<filter> 
<filter-name>struts2</filter-name>
<filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class> 
</filter> 

<filter-mapping> 
<filter-name>struts2</filter-name> 
<url-pattern>/*</url-pattern> 
</filter-mapping> 
```

我不认为 Tomcat 在过滤器的 JAR 文件中找到该类，因为我不断收到以下错误：

> java.lang.NoClassDefFoundError: com/opensymphony/xwork2/ActionContext at org.apache.struts2.dispatcher.ng.InitOperations.cleanup(InitOperations.java:114) at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init (StrutsPrepareAndExecuteFilter.java:60)
> ...持续了很长一段时间。

我从 Struts 网页下载了 Jar 文件，我设置构建路径的方式如下：

我右键单击该项目并转到属性

转到 Java Build Path 部分并创建了一个新库

将所有 Jar 文件添加到该库并将其分配给此 Web 应用程序的构建路径

然后我将此 Jar 库添加到部署程序集，以便在它运行时将其部署到 WEB-INF/lib 文件夹。

据我所知，这应该有效，因为它在我遵循的教程中有效！但是，它对我不起作用。

当我运行我的项目并通过我的 PC 导航到保存项目的位置时，如果我查看 WEB-INF/lib 文件夹，那里没有任何 Jar 文件，这可能是问题所在吗？或者这是正常的吗？

感谢您的帮助，非常感谢！

编辑

这是我正在使用的 jar 文件：

```
commons-fileupload-1.2.2
commons-io-2.0.1
commons-logging-1.1.1
commons-logging-api-1.1
freemarker-2.3.19
javaassist-3.11.0.GA
ognl-3.0.6
struts2-core-2.3.8
xwork-core-2.3.8
commons-lang-2.4 
```

已解决 - 通过在新版本上完全重新启动项目来解决！更新 - 还通过删除所有 jar 并重新创建 jar 库并将其重新分配给构建路径/部署程序集来修复旧构建（尽管在尝试调试时这样做了数百次）

然后移除旧的 Tomcat 服务器并分配一个新的。

不完全确定是什么修复了它，但现在一切正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:21:00.577

如果您打开**Markers 视图**，应该有一个**Classpath Dependency Validator Message 警告组**。如果您展开该组，您应该会看到一些类似于以下内容的警告：

**类路径条目？？？不会被导出或发布**。 **可能会导致 RuntimeClassNotFoundExceptions。**

右键单击这些警告并选择**Quick Fix**。这允许您标记**类路径条目**以包含在 WEB-INF/lib 中。

# c# - LINQ 按某些值分组以形成树

> ID：15125282
> 
> 赞同：2
> 
> 时间：2013-02-28T00:28:12.837
> 
> 标签：c#, linq

我有一个看起来像这样的对象：

```
Tree {
    String Name;
    Int ID;
    List<SubObjects> SubObjects
}

SubObjects {
    int Level;
    string Name;
} 
```

我有以下形式的信息，`List<Output>`即 where `Output`is：

```
Output {
    String TreeName;
    Int TreeID;
    Int SubObjectLevel;
    String SubObjectName;
} 
```

本质上，树以以下格式表示

> Tree1 TreeID1 Level1 SubObject1
> 
> Tree1 TreeID1 Level2 SubObject2
> 
> Tree1 TreeID1 Level3 SubObject3
> 
> Tree1 TreeID1 Level1 SubObject4

我想编写一个 LINQ 查询来填充 Tree，但我被困在 GroupBy 中。这是一个非常基本的问题，但我正在学习 LINQ，任何帮助将不胜感激。

谢谢！

编辑：

到目前为止，这是我的代码

```
var trees =
    from o in output
    select new Tree {
        Name = o.TreeName,
        ID   = o.TreeID,
        SubObjects = //somehow group them
    } 
```

我也试过

```
var trees =
    from o in output
    group o in o.TreeID into levels
    select new Tree {
        Name = //at this point o.TreeName is not available
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T00:39:47.830

所以`GroupBy`需要一个平面列表并根据定义的键生成一组较小的列表`IGrouping`- 在这种情况下，您希望键是“树”，因为这是通用元素：

```
var sourceOutputs = <...get outputs list...>;

var query =
     // for each <Output> thingy...
     from outputThing in sourceOutputs 
```

在这里我会暂停一下，因为您在这里有很多选择 - 我们可以按树 ID、树名等分组 - 我将按`ID`和分组`Name`：

```
var query =
     // for each <Output> thingy...
     from outputThing in sourceOutputs
     // group them by Tree ID + Tree name
     group outputThing by 
         new { ID = outputThing.TreeID, Name = outputThing.TreeName } 
     into byTree
     // So now we can transform these groups of <Output> into a tree
     select new Tree
     {
         ID = byTree.Key.ID,
         Name = byTree.Key.Name,
         // And now the sub objects:
         // what 'byTree' actually is => a key (ID + name), 
         // and an enumerable of <Output> objects that match that key
         SubObjects = 
           (
               from matchedThingy in byTree
               select new SubObject() 
               { 
                   Level = matchedThingy.SubObjectLevel,
                   Name = matchedThingy.SubObjectName
                }
           ).ToList()
     }; 
```

# java - 寻求一些了解 simpleCursorAdapter 工作原理的见解

> ID：15125285
> 
> 赞同：1
> 
> 时间：2013-02-28T00:28:18.090
> 
> 标签：java, android, xml, database, sqlite

嘿伙计们，我只是希望有人能阐明这段代码是如何工作的，更具体地说是 simpleCursorAdapter。完整的程序是一个待办事项列表的应用程序，它是一个非常简单的教程，用户可以输入数据或“注释”并使用光标和加载器保存到 sqlite 数据库。

所以我的问题是，有一种特定的方法我无法掌握它的工作原理，因此我无法操纵数据的显示方式。我认为问题在于我只是不明白适配器如何采用与显示的布局不同的布局并将其全部显示在列表视图中。

```
 private void fillData() {

    // Fields from the database (projection)
    // Must include the _id column for the adapter to work
    String[] from = new String[] { TodoTable.COLUMN_SUMMARY };

    // Fields on the UI to which we map
    int[] to = new int[] { R.id.label }; //I don't quite understand but I know it's just a value for the adapter

    getLoaderManager().initLoader(0, null, this);

    adapter = new SimpleCursorAdapter(this, R.layout.todo_row, null, from,  
        to, 0); /*This line specifically I don't understand how it is working. 
            R.layout.todo_row is a near blank xml, used when there are no "todos"
            with no listviews.  R.layout.todo_list has the listview's but when 
            assigned in the adapter it doesn't work.

    setListAdapter(adapter);

  } 
```

总体而言，我正在尝试并排制作 3 个列表视图以从数据库中读取数据并随意使用。如果有人可以帮助我，将非常感激，谢谢。

R.layout.todo_row

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="30dp"
        android:layout_height="24dp"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="8dp"
        android:layout_marginTop="8dp"
        android:src="@drawable/reminder" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="6dp"
        android:lines="1"
        android:text="@+id/TextView01"
        android:textSize="24dp" 
        >
    </TextView>

</LinearLayout> 
```

和 R.layout.todo_list

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

        <ListView
           android:id="@android:id/list"
            android:layout_width="110dp"
            android:layout_height="200dp" >

        </ListView>

        <ListView
            android:id="@+id/listMiddle"
            android:layout_width="110dp"
            android:layout_height="200dp"
            android:layout_toRightOf="@android:id/list" >
        </ListView>

       <ListView
            android:id="@+id/listRight"
            android:layout_width="110dp"
            android:layout_height="200dp"
            android:layout_toRightOf="@id/listMiddle" >
        </ListView>

    <TextView
        android:id="@android:id/empty"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/no_todos" />

</RelativeLayout> 
```

整个班级如下

```
package de.vogella.android.todos;

import android.app.ListActivity;
import android.app.LoaderManager;
import android.content.CursorLoader;
import android.content.Intent;
import android.content.Loader;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView.AdapterContextMenuInfo;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import de.vogella.android.todos.contentprovider.MyTodoContentProvider;
import de.vogella.android.todos.database.TodoTable;

/*
 * TodosOverviewActivity displays the existing todo items
 * in a list
 * 
 * You can create new ones via the ActionBar entry "Insert"
 * You can delete existing ones via a long press on the item
 */

public class TodosOverviewActivity extends ListActivity implements
    LoaderManager.LoaderCallbacks<Cursor> {
  private static final int ACTIVITY_CREATE = 0;
  private static final int ACTIVITY_EDIT = 1;
  private static final int DELETE_ID = Menu.FIRST + 1;
  // private Cursor cursor;
  private SimpleCursorAdapter adapter;
  private SimpleCursorAdapter middleAdapter;
  private SimpleCursorAdapter rightAdapter;

/** Called when the activity is first created. */

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.todo_list);
    this.getListView().setDividerHeight(2);
    fillData();
    registerForContextMenu(getListView());
  }

  // Create the menu based on the XML defintion
  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.listmenu, menu);
    return true;
  }

  // Reaction to the menu selection
  @Override
  public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.insert:
      createTodo();
      return true;
    }
    return super.onOptionsItemSelected(item);
  }

  @Override
  public boolean onContextItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case DELETE_ID:
      AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
          .getMenuInfo();
      Uri uri = Uri.parse(MyTodoContentProvider.CONTENT_URI + "/"
          + info.id);
      getContentResolver().delete(uri, null, null);
      fillData();
      return true;
    }
    return super.onContextItemSelected(item);
  }

  private void createTodo() {
    Intent i = new Intent(this, TodoDetailActivity.class);
    startActivity(i);
  }

  // Opens the second activity if an entry is clicked
  @Override
  protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    Intent i = new Intent(this, TodoDetailActivity.class);
    Uri todoUri = Uri.parse(MyTodoContentProvider.CONTENT_URI + "/" + id);
    i.putExtra(MyTodoContentProvider.CONTENT_ITEM_TYPE, todoUri);

    startActivity(i);
  }

  private void fillData() {

    // Fields from the database (projection)
    // Must include the _id column for the adapter to work
    String[] from = new String[] { TodoTable.COLUMN_SUMMARY };
    String[] middleId = new String[] { TodoTable.COLUMN_ID };

    // Fields on the UI to which we map
    int[] to = new int[] { R.id.label };
    int[] two = new int[] { R.id.label };

    getLoaderManager().initLoader(0, null, this);
    adapter = new SimpleCursorAdapter(this, R.layout.todo_row, null, from,
        to, 0);

    middleAdapter = new SimpleCursorAdapter(this, R.layout.todo_row, null, middleId,
            two, 0);

    setListAdapter(adapter);
   // setListAdapter(middleAdapter);

  }

  @Override
  public void onCreateContextMenu(ContextMenu menu, View v,
      ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.add(0, DELETE_ID, 0, R.string.menu_delete);
  }

  // Creates a new loader after the initLoader () call
  @Override
  public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    String[] projection = { TodoTable.COLUMN_ID, TodoTable.COLUMN_SUMMARY };
    CursorLoader cursorLoader = new CursorLoader(this,
        MyTodoContentProvider.CONTENT_URI, projection, null, null, null);
    return cursorLoader;
  }

  @Override
  public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    adapter.swapCursor(data);
  }

  @Override
  public void onLoaderReset(Loader<Cursor> loader) {
    // data is not available anymore, delete reference
    adapter.swapCursor(null);
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:38:36.273

> 所以我的问题是，有一种特定的方法我无法掌握它的工作原理，因此我无法操纵数据的显示方式。

方法：

```
adapter = new SimpleCursorAdapter(this, R.layout.todo_row, null, from, to, 0); 
```

好吧，让我们按每个参数分解这个构造函数：

1.  `this`，一个上下文。Adapter 需要一个 Context 来扩充每一行的布局。
2.  `R.layout.todo_row`, 行的布局。光标中的每条记录都将显示在此布局中。（光标的*具体*显示方式取决于`from`和`to`。）
3.  `null`, 一个光标。这包含将在您的 ListView 中显示的所有数据。
4.  `from`，行布局中基本视图的数组。
5.  `to`，一组来自光标的基本列。
6.  `0`, 标志何时以及为何刷新数据。

每件事背后的诀窍是：第四个（`from`）中的 id 必须每个都匹配第二个参数（`R.layout.todo_row`）中的视图。第五个参数中的字符串必须每个都与光标中的列名匹配。第四个 ( `from`) 和第五个参数 ( `to`) 必须一对一匹配，因为每一列都显示在一个视图中。就是这样。

* * *

您现在可能已经意识到，这个注释：

> R.layout.todo_row 是一个近乎空白的 xml，在没有列表视图的“todos”时使用。

错了，对不起。如果要在光标为空时显示注释，请添加：

```
 <TextView android:id="@android:id/empty"
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:text="No data"/> 
```

如[文档](https://developer.android.com/reference/android/app/ListActivity.html)`todo_list.xml`中所述。通过在 TextView 中使用这个“神奇的 id”，注释应该会在适当的时候自动显示或隐藏。[`ListActivity`](https://developer.android.com/reference/android/app/ListActivity.html)

* * *

所有这一切都只与第一个 ListView 交互（使用 id：`android:id="@android:id/list"），您需要创建新的 Cursors 和 Adapters 才能使用其他 ListView。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:07:45.757

我假设代码编译并运行良好，您只想知道发生了什么。好吧，您需要注意一些事项。第一个是`ListView`不带布局参数，您的活动在`setContentView`. Your`R.layout.todo_list`仅用于`TodosOverviewActivity`创建活动的“屏幕”或“外观”，即`ListView`并排的 3 个视图。由于活动是一个`ListActivity`，它会自动查找一个类型`ListView`为 id的条目`@android:id/list`以自动连接列表侦听器（只是为您节省一点打字时间），因此您的其他列表几乎只会坐在那里，直到您连接它们自己（不要对同一布局上的项目使用相同的 id）。如果您需要访问这些其他列表，您需要使用`findViewById`在您的活动中使用方法并搜索您想要的列表的 ID。例如，我们可以使用以下方法访问中间列表：

```
ListView middleList = (ListView)this.findById(R.id.listMiddle); 
```

现在我们有了列表，我们需要展示一些东西。列表完全是空的，您需要从某个地方引入数据。在您的情况下，数据来自`Cursor`您从`ContentProvider`. 光标只包含对我们很重要的一列，即包含`TodoTable.COLUMN_SUMMARY`我们要在列表中显示的文本的列。问题是列表不知道如何处理 a，`Cursor`因为它唯一要做的就是在屏幕上放置一个视图并上下滚动它。`Cursor`另一方面， 具有您要显示的所有数据，但不知道 a是什么`View`，更不用说如何将它包含的所有数据放入其中以供列表显示。现在你有了`SimpleCursorAdapter`顾名思义，这是一个适配器。它用于使不兼容的事物协同工作。一方面，您有一个需要视图的列表，另一方面，您有一个带有要显示的数据的光标，因此现在您需要一个适配器，它将每条数据映射到视图的一部分。他们`SimpleCursorAdapter`会特别要求你做 4 件事。首先是要在列表中显示的视图的布局，即列表项应该是什么样子。这是`R.layout.todo_row`告诉适配器应该创建哪些视图。在这种情况下，我们只有一个 icon 和一个`TextView`id `R.id.label`。其次，它会询问您包含数据的游标，该游标是在`onLoadFinished`方法内部设置的（即`null`在创建适配器时）。第三，它想知道光标上的哪些列很重要。这是`String[] from`表示它应该在`TodoTable.COLUMN_SUMMARY`. 最后，它需要知道在视图中放置这些数据的位置，这是`int[] to`包含`TextView`您将用于显示文本的 id 的`R.id.label`.

总之，适配器就像来自光标的数据和视图布局之间的映射。现在，当列表需要在屏幕上显示视图时，它会要求适配器给它一个。然后，适配器从您提供的布局中回收或创建视图，从光标中获取每个布局的数据，并准备好进入列表以将其放在屏幕上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T01:42:13.430

我还没有查看 SimpleCursorAdapter 的源代码。但是，它似乎主要做两件事：

1.  根据您在 fillData 中提供的参数查询您的数据。
2.  循环遍历结果并使用您的模板填充列表。

在我的调试中，我确实注意到填充列表非常有效 - 它只分配显示所需的行数。当您滚动时，它会回收它们而不是免费重新分配它们。

看起来您的 fillData 代码很好。你没有说什么不起作用，所以也许它在其他地方。我从未使用过 onCreateLoader （但可能应该），因此无法对此发表评论。

我看到了一个小问题：在您的 R.layout.todo_row 中，您忘记了方向属性。

# excel - 如何按n个数在一行中获取多个单元格副本？

> ID：15125286
> 
> 赞同：1
> 
> 时间：2013-02-28T00:28:18.490
> 
> 标签：excel, copy, repeat, vba

我想使用可以解决这个问题的 vba 代码。

我有一排，我想要同一行中每个单元格的多个副本。它需要将单元格复制 n 个数字。第 1 行将是要复制的信息。在第 2 行中是 n 数。

所以这个例子：

输入：（假设 n 数 = 3）

*   约翰
*   亨德里克
*   萨拉

输出：

*   约翰
*   约翰
*   约翰
*   亨德里克
*   亨德里克
*   亨德里克
*   亨德里克
*   萨拉
*   萨拉
*   萨拉……

希望有人可以帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:44:18.170

从：

![在此处输入图像描述](../Images/5c9c64f7bfc76abf50327320a44ccc37.png)

至：

![在此处输入图像描述](../Images/91060959c08935cb4aa013a51d49b870.png)

使用此代码：

```
Option Explicit

Sub CopyInAWeirdWay()
    Dim sh As Excel.Worksheet
    Dim LastRow As Long
    Dim currentCopyRow As Long
    Dim i As Long
    Dim k As Long

    Set sh = ActiveSheet
    LastRow = sh.Cells(sh.Rows.Count, 1).End(xlUp).Row
    currentCopyRow = 1

    For i = 1 To LastRow
        For k = 1 To sh.Cells(i, 2)
            sh.Cells(currentCopyRow, 3).Value = sh.Cells(i, 1).Value
            currentCopyRow = currentCopyRow + 1
        Next k
    Next i
End Sub 
```

# c++ - push_back 非指针元素到一行中的向量

> ID：15125287
> 
> 赞同：0
> 
> 时间：2013-02-28T00:28:38.790
> 
> 标签：c++, vector

当包含指针时，可以将`push_back` `vector`元素放在一行中：

```
vector<SomeClass*> v;
v.push_back(new SomeClass(initVar1));
v.push_back(new SomeClass(initVar2));
v.push_back(new SomeClass(initVar3)); 
```

`push_back`有没有办法用非指针变量（必须是其他变量的副本）来做这样的单行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T00:31:23.973

如果他们有公共复制构造函数，当然：

```
v.push_back(SomeClass(initVar)); 
```

请注意，`push_back`无论如何都会创建一个副本，所以对我来说似乎毫无意义。在 C++11 中，如果可能，对象将被移动构造。

此外，不要让自己头疼，并`std::unique_ptr<T>`为矢量元素使用原始指针而不是原始指针。以这种方式使用原始指针会完全禁用向量为您管理内存的能力，从而破坏了使用它的一半目的。

# jquery - 为什么常规 for 循环在 jQuery 中似乎不起作用？

> ID：15125288
> 
> 赞同：1
> 
> 时间：2013-02-28T00:28:54.850
> 
> 标签：jquery, for-loop

我这里有一些代码，谁能告诉我为什么 for 循环不能按我期望的方式工作？

```
$(function(){
    var details = $("<li> New list item</li>")
    for( i=0; i<3;i++){
        $('#list').append(details);
        console.log(i);     
    };
}); 
```

我希望这会添加 3 个新的列表项。但是它加了一个然后什么都没有......虽然console.log确实输出了3次，那么为什么追加没有发生3次呢？

代码没用，我只是在学习 jQuery，想了解为什么这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:54:15.867

当一个[DOM 元素](http://www.w3schools.com/jsref/dom_obj_element.asp)附加到另一个元素时，它实际上是从其原始位置移除并插入到新位置。例如，假设您有以下 HTML 代码：

```
<div id="p1">
    <div id="c1">Child</div>
</div>
<div id="p2">
</div> 
```

然后执行以下 JavaScript 代码：

```
$('#p2').append($('#c1')); 
```

然后，生成的 HTML 将是：

```
<div id="p1">
</div>
<div id="p2">
    <div id="c1">Child</div>
</div> 
```

这就是为什么您的循环在第一次迭代后没有向列表中添加任何新项目的原因，因为它正在将 DOM 元素*重新定位*到它已经存在的位置！要将新项目插入列表，您需要按照**Sam**的建议进行操作，并在将原始项目附加到列表之前对其进行克隆：

```
$('#list').append(details.clone()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:33:45.810

只需克隆

```
$(function(){
var details = $("<li> New list item</li>");
for( i=0; i<3;i++){
    $('#list').append(details.clone());
    console.log(i);     
 };
}); 
```

# deployment - OpenEJB 尝试绑定远程 EJB 两次

> ID：15125304
> 
> 赞同：2
> 
> 时间：2013-02-28T00:30:04.557
> 
> 标签：deployment, openejb

我有一个关于 OpenEJB 和集成测试的奇怪问题。我正在使用 Open EJB 4.5.1、JUnit 4.10 和 Maven3 和 surefire 插件 2.13 我从我的测试中启动 OpenEJB：

```
InitialContext ic = new InitialContext(); 
```

它（显然）工作正常并正确部署 EJB ( *CentrosBeanFacade* )，但之后它尝试再次绑定它，这导致服务器失败。

这些是有趣的日志部分：

第一次 --> [OK] ：

```
DEBUG - bound ejb at name:       openejb/Deployment/CentrosBeanFacade/com.csc.health.xhis.arqtest.api.CentrosLogica, ref: org.apache.openejb.core.ivm.naming.BusinessRemoteReference@6506fe2b
DEBUG - bound ejb at name: openejb/Deployment/CentrosBeanFacade/com.csc.health.xhis.arqtest.api.CentrosLogica!Remote, ref: org.apache.openejb.core.ivm.naming.BusinessRemoteReference@6506fe2b
INFO - Jndi(name=CentrosBeanFacade) --> Ejb(deployment-id=CentrosBeanFacade)
INFO - Jndi(name=global/classpath.ear/test-ejb/CentrosBeanFacade!com.csc.health.xhis.arqtest.api.CentrosLogica) --> Ejb(deployment-id=CentrosBeanFacade)
INFO - Jndi(name=global/classpath.ear/test-ejb/CentrosBeanFacade) --> Ejb(deployment-id=CentrosBeanFacade) 
```

但随后它会尝试第二次部署它。

```
DEBUG - failed to bind ejb at name: openejb/Deployment/CentrosBeanFacade/com.csc.health.xhis.arqtest.api.CentrosLogica, ref: org.apache.openejb.core.ivm.naming.BusinessRemoteReference@32f00d9a
ERROR - Jndi name could not be bound; it may be taken by another ejb.  Jndi(name=openejb/Deployment/CentrosBeanFacade/com.csc.health.xhis.arqtest.api.CentrosLogica!Remote) 
```

来自 EJB 的内部 BusinessRemoteReference 与第一次是不同的对象，因此它**试图**第二次部署它。但是我检查了类路径并且两次没有包含 EJB。如果我从一个普通的 Java 类执行类似的过程，它也会失败。

有什么线索吗？

# android - 使用 Google App Engine 的 iOS/Android 应用程序的基于回合的服务器

> ID：15125308
> 
> 赞同：3
> 
> 时间：2013-02-28T00:30:23.613
> 
> 标签：android, ios, google-app-engine, webserver

我正在为 iOS/Android 开发基于多人回合的文字游戏，需要制作服务器。我研究并发现了谷歌应用引擎。我相信我会将 GAE 与 python 一起使用，但我对其他建议或可能的问题持开放态度。

我的计划是从客户端向服务器发送 HTTP 请求，并让服务器以 JSON 响应。但是，我不确定当其他玩家完成移动时如何让服务器联系客户端。我是每 x 秒检查一次服务器还是有更好的方法来做到这一点？

关于 GAE 或回合制服务器/游戏，我是否应该了解其他任何信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:51:43.073

你有两个选择：

您可以每隔几秒钟左右检查一次服务器以查看是否有任何更新。这个系统很好，因为它比第二种选择容易得多；但是，这会消耗更多的电池寿命，给您的服务器带来不必要的负担，并且可能会延迟。

您的第二个选择是使用推送通知。iOS 和 Android 有自己的推送通知系统，您甚至可以在其中嵌入信息（如消息，如有必要，或游戏 ID）。这样可以节省电池寿命，并且服务器不会因为许多设备每隔几秒检查一次更新而负担。相反，当更新可用时，服务器会通知每个设备。这个系统可能更难制作，但最终还是值得的。使用推送通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:47:31.837

iOS/Android 都有自己的原生通知系统（iOS Push Notifications 或 Google Cloud Messaging）。你应该使用那些。或者您可以使用 UrbanAirship 之类的抽象。

# java - 如何使用包含字符串值的微调器变量进行 void final

> ID：15125311
> 
> 赞同：-5
> 
> 时间：2013-02-28T00:30:44.240
> 
> 标签：java, android

我对返回 String Value 的 Spinner 的最终变量有疑问。

请在下面的代码中显示注释，以使我的 Q 更清晰。完整的课程代码：

```
package com.hesham.sams;

import java.io.ByteArrayInputStream;
import java.util.Properties;

import javax.mail.Address;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

import android.os.Bundle;
import android.os.StrictMode;
import android.app.Activity;
import android.content.Intent;
//import android.content.Context;
import android.graphics.Typeface;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
//import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class ContactusActivity extends Activity  {

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_contactus);

    final TextView subjectTxt = (TextView) findViewById(R.id.subjectTxt);
    final TextView emailTxtusfrom = (TextView)   findViewById(R.id.emailfromTxtus);
     final TextView messageTxt = (TextView) findViewById(R.id.messageTxt);

    Button lButton = (Button)findViewById(R.id.sendbtn);

    Typeface font = Typeface.createFromAsset(getAssets(), "extrafine.ttf");  
    subjectTxt.setTypeface(font);
    emailTxtusfrom.setTypeface(font);
    messageTxt.setTypeface(font);

    String array_spinner[];
    array_spinner=new String[3];
    array_spinner[0]="general";
    array_spinner[1]="quisiton";
    array_spinner[2]="suggsution";

     final Spinner spinner = new Spinner(this);

        ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(
                this, android.R.layout.simple_spinner_item, array_spinner);
        spinnerArrayAdapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );

        spinner = (Spinner) findViewById( R.id.spinner1 ); // the problem goes //here it should using final >> final spinner .. Con below >>

        spinner.setAdapter(spinnerArrayAdapter);

         spinner.getSelectedItem().toString();

                    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

                    StrictMode.setThreadPolicy(policy); 

lButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

             Properties props = new Properties();
              props.put("mail.smtp.host", "smtp.gmail.com");
              props.put("mail.smtp.socketFactory.port", "465");
              props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
              props.put("mail.smtp.auth", "true");
              props.put("mail.smtp.port", "465");

              Session session = Session.getDefaultInstance(props, new javax.mail.Authenticator() {
                                protected PasswordAuthentication getPasswordAuthentication() {
              return new PasswordAuthentication("hesham.elnemr@gmail.com", "7323873");
              }
              });

              ;  

              try {
              Message message = new MimeMessage(session);
              message.setFrom(new InternetAddress(emailTxtusfrom.getText().toString()));
              message.setRecipients(Message.RecipientType.TO, InternetAddress.parse("hesham.elnemr@gmail.com"));
            message.setSubject(subjectTxt.getText().toString());          
            message.setContent("bfbfdbdfrt55555"+messageTxt.getText().toString() + spinner.getSelectedItem().toString(), "text/html; charset=utf-8"); // here told me that's //spinner as above should use final note : setContent take String value .

              Transport.send(message);

              } catch (MessagingException e) {
              throw new RuntimeException(e);
              }

    }
    });

}
 } 
```

如何使用带有微调器变量的 final 来解决 void 问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:35:55.320

改变

```
final Spinner spinner = new Spinner(this); 
```

到

```
final Spinner spinner = (Spinner) findViewById( R.id.spinner1 ); 
```

由于`final`变量与您给它们的第一个实例相关联，因此您真的不需要制作 Spinner 来找到您正在寻找的那个。由于您希望在您的方法中创建的匿名侦听器中使用 Spinner，`final`因此需要。

还

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build(); 
```

在我看来，永远不应该使用它，它违背了 StrictMode 的目的，它迫使你的代码变得更好一点。

# scheme - Scheme中如何使用计数器

> ID：15125312
> 
> 赞同：0
> 
> 时间：2013-02-28T00:30:44.107
> 
> 标签：scheme, racket

我正在尝试编写一个程序，其中医生只看到 5 名患者，然后程序结束。现在它还没有结束，它一直在寻找下一个病人。忽略医生驱动循环过程中的 else。我在该过程中添加了一个计数，但我想它每次都会回到零。我该如何解决？

```
(define count 0)

(define (new-patient counter)
  (if (= counter 5) (write-line 'doctor has seen 5 patients today so the day is now over)
    (visit-doctor (ask-patient-name))))

(define (doctor-driver-loop name earlier-responses)
  (newline)
 (write '**)
  (let ((user-response (read)))
   (cond ((equal? user-response '(goodbye))
         (write-line (list 'goodbye name))
         (write-line '(see you next week))
         (new-patient (+ 1 count)))
      (else (write-line (reply (responses-list earlier-responses user-response) user-response))
            (doctor-driver-loop name (responses-list earlier-responses user-response))))))

(define (visit-doctor name)
  (write-line (list 'hello name))
  (write-line '(what seems to be the trouble?))
  (doctor-driver-loop name initial-earlier-response)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:09:26.017

尝试替换此行：

```
(new-patient (+ 1 count)) 
```

用这两行：

```
(set! count (+ 1 count))
(new-patient count) 
```

在您当前的代码中，对于 的每次迭代`count`将*始终*具有零值`doctor-driver-loop`，因为它的值从未更新 - 该`(+ 1 count)`部分在`count` *不*更改的情况下加一`count`，并且下一次`doctor-driver-loop`被调用时，`count`将再次为零。

请注意，这是一个快速修复，但不是理想的解决方案。对于初学者，`count`不应将其定义为全局变量，而应将其作为驱动程序循环的参数，该参数以初始值 0 传递，并在`new-patient`与每个被处理的患者一起调用时递增。

# matlab - 在 Matlab 中为箱线图中的框填充颜色

> ID：15125314
> 
> 赞同：1
> 
> 时间：2013-02-28T00:30:52.240
> 
> 标签：matlab, boxplot

有没有办法在 Matlab 的箱线图中填充方框？

我能够使用函数`colorgroup`选项`boxplot`（[http://www.mathworks.com/help/stats/boxplot.html](http://www.mathworks.com/help/stats/boxplot.html)）更改框边界的颜色，但找不到任何更改或填充的选项盒子内部空间的颜色。

编辑：所以，我浏览了链接（[http://www.mathworks.com/matlabcentral/newsreader/view_thread/300245](http://www.mathworks.com/matlabcentral/newsreader/view_thread/300245)）上的代码，在评论中指出了user1929959。但是，我是 Matlab 的新手，非常感谢您简要解释一下代码的作用。这是该链接中的代码：

```
load carsmall
 boxplot(MPG,Origin)
 h = findobj(gca,'Tag','Box');
 for j=1:length(h)
    patch(get(h(j),'XData'),get(h(j),'YData'),'y','FaceAlpha',.5);
 end 
```

我也对其他解决方案持开放态度。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:34:14.283

使用[FINDOBJ](http://www.mathworks.com/help/matlab/ref/findobj.html)功能，您可以在当前坐标区中搜索标签等于 'Box' 的图形对象（gca = 获取当前坐标轴句柄）。

您可以在官方 MW 文档中找到箱线图中所有对象的标签（就在示例之前）： http: [//www.mathworks.com/help/stats/boxplot.html](http://www.mathworks.com/help/stats/boxplot.html)

FINDOBJ 将它找到的所有对象的句柄返回到变量 h 中，该变量是双数组。您可以使用句柄来修改对象属性。`get(h(1))`您可以使用或查看给定句柄的所有属性`inspect(h(1))`。

例如，您可以设置线宽：

```
set(h,'LineWidth',3) 
```

由于 box 是一个线对象，它没有补丁`FaceColor`或`FaceAlpha`（​​透明度）属性，所以你不能直接给它上色。你必须用黄色（由'y'参数设置）和0.5透明度在它上面绘制补丁。你得到`XData`和`YData`属性来获取补丁坐标。有关所有补丁属性，请参见[此处](http://www.mathworks.com/help/matlab/ref/patch_props.html)。

同样，如果您不知道某些函数的作用，请始终使用`help function_name`或检查 matlab 文档`doc function_name`。

# c++ - 当链接器可以使用显式特化时，所有编译器都会忽略生成的模板代码吗？

> ID：15125316
> 
> 赞同：6
> 
> 时间：2013-02-28T00:31:07.417
> 
> 标签：c++, templates

我最近在专门设计模板时遇到了一种情况，这让我感到不安：

富.h：

```
template <class T>
void foo() {
  std::cout << "This is the generic foo" << std::endl;
} 
```

foo.cc：

```
#include "foo.h"
template <>
void foo<int>() {
  std::cout << "This is foo<int>" << std::endl;
} 
```

主.cc：

```
#include "foo.h"

int main() {
  foo<int>();
} 
```

所以。我编译如下：

```
g++ -c main.cc
g++ -c foo.cc
g++ -o main main.o foo.o 
```

输出是`"This is foo<int>"`。我喜欢这个输出。但我担心我所观察到的可能是 gcc 所独有的（我无法访问其他编译器，所以我无法检查）。

这是我认为 gcc 正在做的事情：编译 main.cc 时，我希望它为 foo 调用发出通用代码，因为它不知道 foo.cc 中的特化。但是通过与 foo.o 链接，它使用了特化，因为它具有相同的签名。

但这值得指望吗？我担心其他编译器（甚至可能是不同版本的 gcc？）在发出模板代码时可能会破坏他们的签名，以某种方式与 foo.o 链接不会像我想要的那样替换通用操作。这是一个有效的担忧吗？我读过很多让我感到不安的东西，但没有任何东西能让我对目前情况下发生的事情充满信心。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T00:40:11.993

> 我担心我所观察到的可能是 gcc 所独有的（我无法访问其他编译器，所以我无法检查）。

你有充分的理由担心：你的程序格式不正确，编译器甚至不需要告诉你！

C++11 标准的第 14.7.3/6 段规定：

> 如果模板、成员模板或类模板的成员是显式特**化的，则应在第一次使用该特化之前声明该特化，这将导致发生隐式实例化，在发生这种使用的每个翻译单元中; 不需要诊断。**如果程序没有为显式特化提供定义，并且该特化的使用方式会导致发生隐式实例化，或者该成员是虚拟成员函数，**则该程序是非良构的，不需要诊断**。永远不会为已声明但未定义的显式特化生成隐式实例化

为了使程序具有一致的行为，您的专业化必须从实例化的角度可见。在您的情况下，它不是：您将其降级到其他翻译单元不包含的文件中。

第 14.7.3/7 段标准非常明确地说明了当你不这样做时会发生什么：

> **函数模板，类模板，类模板的成员函数，[...] 的显式特化声明的放置**可以根据显式特化声明的相对定位及其实例化点影响程序是否格式良好。上面和下面指定的翻译单元。**编写专业时，请注意其位置；或者让它编译将是一种试炼，以点燃它的自焚。**

我想最后一句话说清楚了。

在这里，您应该做的是声明您打算在主模板的任何隐式实例化发生*之前引入函数模板的显式特化。*为此，请执行以下操作：

**foo.h**

```
template <class T>
void foo() {
   std::cout << "This is the generic foo" << std::endl;
}

template <> void foo<int>(); // Introduce a declaration of your
                             // explicit specialization right
                             // after you defined the primary
                             // template! 
```

通过在主模板的定义之后立即引入声明，您可以确保无论主模板在哪里可见，都会知道它存在完整的专业化，从而使您免于自焚。

# java - FTPS 客户端中 listNames() 期间的套接字超时

> ID：15125320
> 
> 赞同：1
> 
> 时间：2013-02-28T00:31:21.067
> 
> 标签：java, ftp, ftp-client, apache-commons-net, ftps

我们正在使用 apache.commons.net v.2.2 编写我们自己的 FTPS 客户端，我们一直在尝试在 apache.commons.net.ftp.FTPClient 中使用 listNames() 但它在 apache.commons.net.ftp 中超时.FTPListParseEngine.java 第 152 行

```
 String line = this.parser.readNextEntry(reader); 
```

我们需要我们的客户端使用 TLS 进行身份验证，然后在传输数据之前进入 CCC 模式。我们能够连接到服务器并获取当前工作目录，但是 LIST/RETR 命令超时。这是我们当前实现的日志：

```
FTPS: Connecting to: XXXXXXXXXXXXXXXXX.com
FTPS: REPLY: 220 UNAUTHORIZED ACCESS TO THIS SYSTEM IS STRICTLY PROHIBITED.
FTPS: COMMAND: AUTH TLS
FTPS: REPLY: 234 AUTH TLS-C/TLS OK.
FTPS: Switching to passive mode in the middle of a session
FTPS: Logging in with user: XXXXXXXXX
FTPS: COMMAND: USER XXXXXXXXXXXX
FTPS: REPLY: 331 Password required for XXXXXXXXXXX.
FTPS: COMMAND: PASS **********
FTPS: REPLY: 230 Connect:Enterprise UNIX login ok, access restrictions apply.
FTPS: COMMAND: PBSZ 0
FTPS: REPLY: 200 PBSZ 0 OK.
FTPS: COMMAND: PROT P
FTPS: REPLY: 200 PROT P OK, data channel will be secured.
FTPS: Dropping to CCC mode
FTPS: COMMAND: CCC
FTPS: REPLY: 200 CCC Context Enabled.
FTPS: Setting Transfer Type to Binary
FTPS: COMMAND: TYPE I
FTPS: REPLY: 200 Type set to I.
FTPS: COMMAND: SYST
FTPS: REPLY: 215 UNKNOWN Type: L8
ftpClient.getSystemType() UNKNOWN Type: L8
FTPS: COMMAND: PWD
FTPS: REPLY: 257 "/XXXXXXXXXXXXX" is current directory.
FTPS: COMMAND: PASV
FTPS: REPLY: 227 Entering Passive Mode (XXX,XXX,XXX,XXX,XXX,XXX)
FTPS: COMMAND: LIST
FTPS: REPLY: 150 Opening BINARY mode data connection for ...
FTPS: java.lang.RuntimeException: java.net.SocketTimeoutException: Read timed out 
```

在 Wireshark 中，我们注意到其他客户端在打开数据连接后立即发送一个 FTP-DATA 数据包，但在我们的实现中我们不发送这样的数据包。我们认为这可能是问题的原因，但我们不确定如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:42:14.293

我会询问您实际运行的代码以获取更多详细信息。

但作为初步回应，由于我有类似的问题，请检查 apache commons 是否真的以面向对象的方式构建请求，而是在您调用它时将每个命令发送到服务器（例如，调用 ftpClient.enterLocalPassiveMode() 将发送PASV 马上），所以这可能会造成一些混乱。在这方面，这种情况下更可能的错误是没有在正确的时间进入被动模式（连接后，登录前）。

如果 listnames 不起作用，则可能没有任何作用。

# php - 无法上传 XLSX 文件

> ID：15125321
> 
> 赞同：0
> 
> 时间：2013-02-28T00:31:21.513
> 
> 标签：php, codeigniter, file-upload, pyrocms

这是我发现的一个常见问题。

此处还可以找到讨论 [https://forum.pyrocms.com/discussion/18587](https://forum.pyrocms.com/discussion/18587)

正如许多网站所建议的那样，我需要将 mime 类型添加到 xls 和 xlsx。所以我在下面是我修改的**xlsx** mime 类型的片段，但是 Pyro 仍然不允许我上传文件。

```
'xlsx'  =>array('application/x-msexcel', 'application/octet-stream', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet','application/excel', 'application/vnd.ms-excel', 'application/msexcel'), 
```

它不允许我通过文件模块或自定义模块上传。

非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T02:42:19.070

试试这个...我想它会帮助你

```
'xlsx'  =>  array('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'application/zip') 
```

# ios - 使用 OpenGL 自定义 iOS 界面方向更改动画

> ID：15125327
> 
> 赞同：6
> 
> 时间：2013-02-28T00:31:54.180
> 
> 标签：ios, animation, opengl-es, interface-orientation

我有一个 iPad 应用程序，正在使用 openGL 绘制主视图，我想在设备旋转时为自己的更改设置动画。

请注意，这个应用程序只是偶尔绘制，它不会一直动画。此外，我的场景是（非常复杂的）2D 绘图，而不是 3D。我只希望它在设备方向更改期间简单地围绕显示中心旋转，保持正确的纵横比。

目前我只有以下代码：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    // nothing yet
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    IMMainView *mv = (IMMainView *)self.view;
    [mv createRenderbuffer];
    [mv drawView];
} 
```

旋转完成后，我只是重新创建 OpenGL 渲染缓冲区以匹配新的宽度和高度。

默认的 iOS 行为似乎会旋转视图，但也会随着纵横比的变化而奇怪地拉伸它。

我可以为我的绘图参数设置动画以在过渡期间更好地显示某些东西，但我不明白（1）如何停止 iOS 为我的图层设置动画以及（2）如何从这些与 iOS 匹配的方法调用中设置动画循环动画片。

例如，在动画过程中，实际的视图宽度和高度是否在逐渐改变？

还有一个可能的问题是何时重新创建渲染缓冲区，因为如果 OpenGL 缓冲区与 iOS 视图边界不匹配，则像素纵横比不正确，并且绘图看起来很糟糕。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T21:52:53.677

我花了一些时间寻找正确执行此操作的合理方法，最终选择了最简单的方法，即清除屏幕`willRotateToInterfaceOrientation`，然后将新内容呈现在`didRotateFromInterfaceOrientation`. 它只是看起来并不那么糟糕，而且更好的东西的额外复杂性是不值得的恕我直言。

或者，虽然我没有选择这个解决方案，但我在没有太多工作的情况下获得的动画效果最好是这样的：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    IMMainView *mv = (IMMainView *)self.view;
    [mv drawBlankScreen];

    m_oldviewsize = self.view.bounds.size;
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration
{
    IMMainView *mv = (IMMainView *)self.view;

    CGPoint neworigin = mv.origin;

    neworigin.x += 0.5f*(self.view.bounds.size.width - m_oldviewsize.width);
    neworigin.y += 0.5f*(self.view.bounds.size.height - m_oldviewsize.height);

    mv.origin = neworigin;

    [mv createRenderbuffer];
    [mv drawView];
} 
```

原点更改旨在将旋转后的图形重新居中于旋转前的相同位置。

我发现`willAnimateToInterfaceOrientation`在计算新视图边界后调用一次。因此我在那时设置了新的渲染缓冲区，因为与方面变化相关的失真不像我原来的情况那么明显。我还必须清除屏幕，`willRotateToInterfaceOrientation`因为在延迟期间原始绘图的扭曲版本清晰可见。

这样做的缺点是，在动画开始时屏幕的清除会导致轻微的闪烁，并且拉伸变形仍然存在，但正在收敛于正确的外观，而不是与旧外观背离然后跳转到新的外观，所以它看起来并不那么糟糕。我怀疑任何试图通过使用我的绘图功能进行更新以持续保持正确外观来实际跟踪视图的动画纵横比变化的任何尝试都将非常复杂，并且可能很容易受到 Apple 未来更改的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T17:11:50.137

您可以在顶点着色器中旋转 OpenGL 输出，如下所示：

```
#version 300 es

in vec4 position;
in mediump vec4 texturecoordinate;

in vec4 color;

uniform float preferredRotation;

out mediump vec2 coordinate;

void main()
{
    //const float pi = 4.0 * atan(1.0);
    //float radians  = (( -90.0 ) / 180.0 * pi );

    // Preferred rotation of video acquired, for example, by:
    // AVAssetTrack *videoTrack = [tracks objectAtIndex:0];
    // CGAffineTransform preferredTransform = [videoTrack preferredTransform];
    // self.glKitView.preferredRotation = -1 * atan2(preferredTransform.b, preferredTransform.a);

    // Preferred rotation for both portrait and landscape           
    mat4 rotationMatrix = mat4( cos(preferredRotation), -sin(preferredRotation), 0.0, 0.0,
                                sin(preferredRotation),  cos(preferredRotation), 0.0, 0.0,
                                0.0,                     0.0,                    1.0, 0.0,
                                0.0,                     0.0,                    0.0, 1.0);

    // Mirror vertical (portrait only)
    mat4 rotationMatrix = mat4( cos(preferredRotation),  sin(preferredRotation), 0.0, 0.0,
                               -sin(preferredRotation),  cos(preferredRotation), 0.0, 0.0,
                                0.0,           0.0,          1.0, 0.0,
                                0.0,           0.0,          0.0, 1.0);

    // Mirror horizontal (landscape only)
    mat4 rotationMatrix = mat4( 1.0, 0.0,                     0.0,                    0.0,
                                0.0, cos(preferredRotation), -sin(preferredRotation), 0.0,
                                0.0, sin(preferredRotation),  cos(preferredRotation), 0.0,
                                0.0, 0.0,                     0.0,                    1.0);

    // Mirror vertical (landscape only)
    mat4 rotationMatrix = mat4( cos(preferredRotation), 0.0, sin(preferredRotation), 0.0,
                                0.0,                    1.0, 0.0,                    0.0,
                               -sin(preferredRotation), 0.0, cos(preferredRotation), 0.0,
                                0.0,                    0.0, 0.0,                    1.0);

    gl_Position = position * rotationMatrix;
    coordinate = texturecoordinate.xy;
} 
```

对于每个 vSync，您可以为 preferredRotation 传递一个新值，这将旋转视图而不进行拉伸。

显然，您只选择一个矩阵4，这取决于视频的方向，然后是它的旋转。每个 matrix4 都会翻转视频窗口——而不是旋转它。对于旋转，您必须首先根据方向选择 matrix4，然后将 preferredRotation 变量替换为度数（以弧度为单位，还提供了公式）。

有很多方法可以旋转视图、图层、对象等；但是，如果您通过 OpenGL 渲染图像，那么您应该选择这种方法，并且只能选择这种方法。

# silverlight - 浏览器中高性能 3d 覆盖流 UI 的平台

> ID：15125328
> 
> 赞同：0
> 
> 时间：2013-02-28T00:32:26.903
> 
> 标签：silverlight, graphics, 3d, browser

我正在为嵌入式设备编写一个应用程序，它可以像 ui 一样显示 3d 覆盖流。

要求 1\. 高性能（60fps，最好是 GPU 加速） 2\. 在浏览器中运行。3\. 在 linux 中支持（如果可能，android）。

我不熟悉网络/浏览器技术，但我熟悉 .net/wpf 和 little silverlight。我已经测试了多个 silverlight 覆盖流，并且透视正确转换有点滞后。最好的实现恕我直言，可以在这里看到[http://coverflow.darickcarpenter.net/](http://coverflow.darickcarpenter.net/)。它具有虚拟化，视角正确。通过完全禁用透明度可以提高性能。我不确定它的 GPU 是否加速。我不确定silverlight 能带来多少性能。

哪个平台/技术在浏览器中具有最佳的 3d 渲染性能？

编辑。我刚刚发现一个人在silverlight和javascript（webkit）中实现了2个类似的coverflow。性能方面，javascript 非常流畅。我认为既然silverlight 是由微软创建的，那么在ie 中运行silverlight 可以提供最佳性能。我认为silverlight 5 有gpu 渲染支持。有什么意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:45:14.750

我会为近期关注高性能的浏览器技术选择 WebGL/HTML5。它现在也可用于大多数带有 android 的移动设备。

因此，您可以从 WebGL 中的这个漂亮实现开始（也包含代码）[http://www.coconnut.com/blog/2012/07/25/html5-javascript-webgl-ejemlo-de-galeria-con-menu-tipo -覆盖流/](http://www.coconnut.com/blog/2012/07/25/html5-javascript-webgl-ejemplo-de-galeria-con-menu-tipo-coverflow/)。

# javascript - 根据百分比计算 3 种颜色的平均值

> ID：15125329
> 
> 赞同：1
> 
> 时间：2013-02-28T00:32:41.670
> 
> 标签：javascript, jquery, jquery-calculation

如何根据给定的百分比计算三种颜色的平均值？

例如，我们有**green**、**yellow**和**red**并希望得到平均值：

最简单的方法是创建一个像这样的图像：

![在此处输入图像描述](../Images/51cbe46537898159c760032e6d36e4f6.png)

并增加/减少`background-position`：

```
$('input').change(function(){
    $('#color').css({
        backgroundPosition: -this.value + "px 0"
    });
}); 
```

[http://fiddle.jshell.net/VY4D8/](http://fiddle.jshell.net/VY4D8/)

...但是我认为这可以通过或作为输出*“更好”地完成。*`rgb/a``hex`

仅用于解释目的：

*   ** [0%] |`#ff0000`
*   -- [1%]
*   -- [2%]
*   -- [3%]
*   -- [4%]
*   -- [5%]
*   -- [...]
*   ** [11%] |`#ffc600`
*   -- [12%]
*   -- [13%]
*   -- [14%]
*   -- [15%]
*   -- [16%]
*   ** [17%] |`#ffee00`
*   ...ETC...

是否已经有这个问题的实现，或者你们中的一个人过去写过一些东西？

**更新**

明白了，感谢 Eevee [https://stackoverflow.com/a/15125778/1250044](https://stackoverflow.com/a/15125778/1250044)：

```
var div = document.getElementsByTagName('div')[0];

$('input').change(function () {

    var max = this.getAttribute("max"),
        cur = this.value / max * max,
        r = Math.min(cur * 2, max),
        g = Math.min(max * 2 - cur * 2, max),
        rgb = g + "%, " + r + "%, 0%";

    div.style.backgroundColor = "rgb(" + rgb + ")";

}).change(); 
```

[http://fiddle.jshell.net/VY4D8/1/](http://fiddle.jshell.net/VY4D8/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:19:09.483

做数学？

你有：

*   在 0% 时，红色：`rgb(100%, 0%, 0%)`
*   50%，黄色：`rgb(100%, 100%, 0%)`
*   100%，绿色：`rgb(0%, 100%, 0%)`

如果你想计算出 11% 的颜色：

1.  弄清楚它属于哪个部分。全光谱的 11% 位于红色和黄色之间的 22%。

2.  插值： 22% 的红色加上 78% 的黄色输出到`rgb(100%, 78%, 0%)`或`#ffc600`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T00:44:37.943

你可以做那个 CSS `linear-gradient`。

演示：http: [//jsfiddle.net/ThinkingStiff/Jqdkq/](http://jsfiddle.net/ThinkingStiff/Jqdkq/)

### CSS：

```
.gradient {
    background: linear-gradient(
        to right, 
        red, yellow, green
        );
    height: 20px;
    width: 300px;
} 
```

### HTML：

```
<div class="gradient"></div> 
```

# c++ - 模板函数的前向声明

> ID：15125332
> 
> 赞同：6
> 
> 时间：2013-02-28T00:33:00.513
> 
> 标签：c++, templates, friend

我有一个带有朋友模板功能的模板类。我目前有以下代码，它正在工作：

```
template<class T>
class Vector
{
  public:
    template<class U, class W>
    friend Vector<U> operator*(const W lhs, const Vector<U>& rhs);
}

template<class U, class W>
Vector<U> operator*(const W lhs, const Vector<U>& rhs)
{
  // Multiplication
} 
```

我希望我的解决方案具有友元函数的前向声明，以便与我当前的方法相比，我可以获得它提供的安全优势和一对一的对应关系。我尝试了以下但不断遇到错误。

```
template<class T>
class Vector;

template<class T, class W>
Vector<T> operator*(const W lhs, const Vector<T>& rhs);

template<class T>
class Vector
{
  public:
    friend Vector<T> (::operator*<>)(const W lhs, const Vector<T>& rhs);
}

template<class T, class W>
Vector<T> operator*(const W lhs, const Vector<T>& rhs)
{
  // Multiplication
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:10:36.080

我想你几乎拥有它。您只需将函数设为一个参数模板即可。以下是在 g++ 4.5 上编译的，但由于我无法用你的测试用例测试实例化，我不能 100% 确定它会解决你的真正问题。

```
template<class T>
class Vector;

template<class T, class W>
Vector<T> operator*(const W lhs, const Vector<T>& rhs);

template<class T>
class Vector
{
  public:
    template<class W>
    friend Vector<T> operator*(const W lhs, const Vector<T>& rhs);
};

template<class T, class W>
Vector<T> operator*(const W lhs, const Vector<T>& rhs)
{
  // Multiplication
} 
```

# java - 对象序列化的魔法精灵

> ID：15125336
> 
> 赞同：3
> 
> 时间：2013-02-28T00:33:11.580
> 
> 标签：java, file, object, serialization, time

```
System.out.println("Hello brave souls!"); 
```

我有几个关于对象序列化的问题。我正在开发我的数学游戏的新版本，但忘记让它在最后三个会话中保存游戏模式。记录是通过对象序列化保存的，这将我引到这里。我想知道的是：

1.) 对象序列化是否以某种方式保持对象保存到文件的时间？2.）在更改文件中的任何 n 个对象时，您是否必须将要更改的对象加载到内存中（通过循环遍历对象），更改它，然后将每个最后的 FREAKING OBJECT 重写回文件？//看起来很乏味

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T00:55:44.933

序列化序列化整个对象图。如果您正在保存游戏，您可能需要调用 ObjectOutputStream.writeObject(myGame)，它将递归地写入整个游戏对象及其引用的所有非瞬态属性。

要更改它，请使用 ObjectInputStream 将游戏加载到内存中，更改一个值，然后将其写回。

如果您正在处理大量数据，您可能还希望链接 GZIPInputStream 和 GZIPOutputStream，它可以很好地缩小序列化大小。

如果您正在处理非常大的对象，嵌入式数据库可能是更好的选择，因为您可以更改单个字段而无需将整个对象加载到 RAM 中。

最后，如果您想在对象被序列化时更新其时间戳，请在 Serializable 伪接口中实现 writeObject 方法。更新您的时间戳，然后在提供的 ObjectOutputStream 上调用 defaultWriteObject。这会给你“最后坚持”的行为。

```
private void writeObject(java.io.ObjectOutputStream out) throws IOException 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:28:59.040

> 1.) 对象序列化是否以某种方式保持对象保存到文件的时间？

不，它只保存对象，并且只保存对象，加上重构它所需的任何内容，例如它的类名。

> 2.) 在更改文件中的 n 个对象中的任何一个

您不能更改文件中的任何*N*个对象。您必须将文件重组为对象、更改对象并重新序列化。

> // 看起来很乏味

这很乏味。没有人说这不会乏味。您将其用作数据库。它不是。它是一个序列化，这也意味着它是一个流。这同样适用于文本文件。

# javascript - 如何根据缩放谷歌地图api计算圆半径

> ID：15125340
> 
> 赞同：4
> 
> 时间：2013-02-28T00:33:28.717
> 
> 标签：javascript, google-maps, google-maps-api-3

嗨，我已经使用 google.maps.Circle 绘制了圆，现在我需要根据当前缩放计算它的半径。例如，如果我当前的缩放为 2，我的 rad 为 100000，如果当前的缩放为 21，rad 为 1。我的数学不好，那么如何计算其他缩放级别的值？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T03:18:10.637

`getRadius()`没有给你你需要的结果？

请参阅[https://developers.google.com/maps/documentation/javascript/reference#Circle](https://developers.google.com/maps/documentation/javascript/reference#Circle)

# php - base_url() 在 Internet Explorer (CodeIgniter) 中无法正常工作

> ID：15125342
> 
> 赞同：0
> 
> 时间：2013-02-28T00:33:33.387
> 
> 标签：php, codeigniter, base-url

我的导航栏图像和链接在 CHROME 中加载正常，但在 INTERNET EXPLORER 中加载同一页面时，图像不会加载但显示无图像图标。IE中的链接是这样的

CodeIgniter/index.php/news/index.php/news/

而不仅仅是

CodeIgniter/index.php/news

但是，IE 设法成功加载 css，即使它也在使用 base_url() ......这是我的代码：

**测试.php**

```
<head>
<base href="<?php echo base_url() ?>">
<link rel="stylesheet" type="text/css" href="public/css/main.css">
</head>
 <nav>
    <ul>

     <li><a href="index.php/news">
     <img src = "public/images/home.png" alt="Home" title="Home"/>
     </a></li>

     <li><a href="index.php/news/create">
     <img src = "public/images/create.png" alt="Create new article" title="Create new article"/>
     </a></li>

    </ul>
 </nav> 
```

**配置文件**

```
 $config['base_url']   = 'http://localhost/CIgniter/CodeIgniter/'; 
```

# 回答

Quote: Well Fabios 的建议是成功的，感谢`<img src = "<?=base_url('public/images/home.png')?>" alt="Home" title="Home"/>`作品，即使它将来会很痛苦。感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:17:09.310

真正的问题是您使用的是相对路径，例如`public/images/home.png`而不是`/public/images/home.png`，开头的斜线告诉浏览器它应该根据您指定的绝对路径`$config['base_Url'] = ...`而不是当前路径检索内容（我的意思是你`CodeIgniter/index.php/news`并且您已经指定了它的相对路径，这就是为什么它附加到它产生错误的路径`CodeIgniter/index.php/news`+ `index.php/news/`) 所以当您在路径的开头添加斜杠时，它将引用绝对路径，它会在`CodeIgniter/index.php/news`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:39:50.337

那么 Fabios 的建议是成功的谢谢

`<img src = "<?=base_url('public/images/home.png')?>" alt="Home" title="Home"/>`

即使将来会很痛苦，也可以工作。感谢你的帮助！

# python - 如何遍历两个熊猫列

> ID：15125343
> 
> 赞同：26
> 
> 时间：2013-02-28T00:33:33.830
> 
> 标签：python, pandas

```
In [35]: test = pd.DataFrame({'a':range(4),'b':range(4,8)})

In [36]: test
Out[36]: 
   a  b
0  0  4
1  1  5
2  2  6
3  3  7

In [37]: for i in test['a']:
   ....:  print i
   ....: 
0
1
2
3

In [38]: for i,j in test:
   ....:  print i,j
   ....: 
------------------------------------------------------------
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
ValueError: need more than 1 value to unpack

In [39]: for i,j in test[['a','b']]:
   ....:  print i,j
   ....: 
------------------------------------------------------------
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
ValueError: need more than 1 value to unpack

In [40]: for i,j in [test['a'],test['b']]:
   ....:  print i,j
   ....: 
------------------------------------------------------------
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
ValueError: too many values to unpack 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-28T00:56:25.650

使用`DataFrame.itertuples()`方法：

```
for a, b in test.itertuples(index=False):
    print a, b 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-09-09T20:47:55.753

您可以使用`zip`（这在 python 3 中是本机的，可以从python 2.7 中导入）`itertools`：`izip`

## 蟒蛇 3

```
for a,b in zip(test.a, test.b): 
    print(a,b) 
```

## 蟒蛇 2

```
for a,b in izip(test.a, test.b): 
    print a,b 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-28T00:45:11.420

尝试，

```
for i in test.index : print test['a'][i], test['b'][i] 
```

为你带来，

```
0 4
1 5
2 6
3 7 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-28T00:57:39.527

我仍在尝试自己学习熊猫。

您也可以使用该`.iterrows()`方法，它返回`Index`和`Series`每行：

```
test = DataFrame({'a':range(4),'b':range(4,8)})
for idx, series in test.iterrows():
    print series['a'], series['b'] 
```

# php - ASC 排序 foreach

> ID：15125345
> 
> 赞同：0
> 
> 时间：2013-02-28T00:33:47.700
> 
> 标签：php, arrays, sorting, foreach

以下代码通过函数从 google 获取结果。这一切都很好，我只想对结果进行排序。

如何对 foreach 循环字母 ASC 中的记录进行排序...？

```
function fetch_google($terms="sample search",$numpages=1,$user_agent='Mozilla/5.0 (Windows NT 6.1; rv:8.0) Gecko/20100101 Firefox/8.0')  
{
    $searched="";
    for($i=0;$i<=$numpages;$i++)
    {
        $ch = curl_init();
        $url="http://www.google.com/search?hl=en&q=".urlencode($terms)."&start=".$i.'0';
        curl_setopt ($ch, CURLOPT_URL, $url);
        curl_setopt ($ch, CURLOPT_USERAGENT, $user_agent);
        curl_setopt ($ch, CURLOPT_HEADER, 0);
        curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt ($ch, CURLOPT_REFERER, 'http://www.google.com/');
        curl_setopt ($ch,CURLOPT_CONNECTTIMEOUT,120);
        curl_setopt ($ch,CURLOPT_TIMEOUT,120);
        curl_setopt ($ch,CURLOPT_MAXREDIRS,10);
        curl_setopt ($ch,CURLOPT_COOKIEFILE,"cookie.txt");
        curl_setopt ($ch,CURLOPT_COOKIEJAR,"cookie.txt");
        $searched=$searched.curl_exec ($ch);
        curl_close ($ch);
    }

    $xml = new DOMDocument();
    @$xml->loadHTML($searched);
    foreach($xml->getElementsByTagName('a') as $lnk)
    {
        if($lnk->getAttribute('class')=='l')
        {
           $links[] = array(
        'href' => $lnk->getAttribute('href'),
        'title' => $lnk->nodeValue
        );
        }
    }
    return $links;  
}

$content = fetch_google("exemple",1);

foreach($content as $elem)
{
    echo "<a target=\"_blank\" href=$elem[href]>$elem[title]</a><br>";
} 
```

我想按 $elem[title] ASC 对行进行排序

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:40:12.040

想象一下这个使用函数的例子[`usort()`](http://www.php.net/manual/en/function.usort.php)

```
$array = array (
   array('href' => 'http://132', 'title' => 'yxz'),
   array('href' => 'http://233', 'title' => 'abc'),
   array('href' => 'http://324', 'title' => '123')
);

usort($array, function($a, $b) {
    if($a['title'] === $b['title']) {
        return 0;
    }

    return $a['title'] < $b['title'] ? - 1  : 1;
});

var_dump($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T04:35:07.593

尝试这个 ：

```
$array = array (
   array('href' => 'http://132', 'title' => 'yxz'),
   array('href' => 'http://233', 'title' => 'abc'),
   array('href' => 'http://324', 'title' => '123')
);

$sort = array();
foreach($array as $k=>$v) {
    $sort['title'][$k] = $v['title'];
}

array_multisort($sort['title'], SORT_ASC, $array);

echo "<pre>";
print_r($array); 
```

# ruby-on-rails-3 - 您如何编辑设计错误消息？

> ID：15125349
> 
> 赞同：5
> 
> 时间：2013-02-28T00:33:58.740
> 
> 标签：ruby-on-rails-3, css, devise

需要明确的是，我知道如何在 config/locales/devise.en.yml 中编辑错误消息，但我指的是设置这些类型的错误消息的样式：

```
2 errors prohibited this user from being saved: 
```

*   电子邮件不能为空
*   密码不能为空

--

我所看到的只是 <%= devise_error_messages！%> 在注册页面上，但我不知道如何自己实际编辑错误消息。

在我的情况下，消息显示在左侧，并且我的注册居中（看起来很奇怪），我也不喜欢消息的红色并且更喜欢不同的颜色。

所以我的问题是，如何设置错误消息的样式？居中，然后改变颜色。

不确定要包含哪些其他控制器或内容，因此一旦您提出要求，我将在需要时与它们一起更新 OP。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T00:54:02.493

请参阅 devise_error_messages 的来源！[https://github.com/plataformatec/devise/blob/master/app/helpers/devise_helper.rb](https://github.com/plataformatec/devise/blob/master/app/helpers/devise_helper.rb)的方法。

所有的错误都在里面

```
<div id="error_explanation"> 
```

所以你可以在你的 CSS 中使用这个事实。它内部只使用基本样式：h2 用于标题消息，ul 用于单个错误。有关 #errorExplanation 样式的信息，请参阅此 SO 示例，例如：[如何美化 rails 中的验证](https://stackoverflow.com/questions/2129379/how-to-beautify-validations-in-rails)。只是不要忘记在示例中将#errorExplanation 替换为#error_explanation。

但是您最好的方法可能仍然是重写此方法或编写并使用您自己的方法，然后应用您喜欢的所有样式。

我个人建议在它们所属的字段旁边显示错误。例如，请参阅此 SO 线程，了解如何执行此操作：[Rails: Errors close to specific fields in forms](https://stackoverflow.com/questions/9751558/rails-errors-close-to-particular-fields-in-forms)。

另一个改进是为您的表单切换到 simple_form（并免费获得错误-next-to-fields）。例如，请参阅关于此的优秀 Railscast：[http](http://railscasts.com/episodes/234-simple-form) ://railscasts.com/episodes/234-simple-form 。有一个更新的 Railscast 修订版，但不确定您是否是那里的 Pro 订阅者。

# ssl - Apache2 正在重定向到 https

> ID：15125351
> 
> 赞同：0
> 
> 时间：2013-02-28T00:34:10.120
> 
> 标签：ssl, https

我安装了 SSL（愚蠢地）来加密正在发送的数据，唯一的问题是我的子域被重定向到我的主域。我将我的默认虚拟主机改回原来的设置，并输入了 a2dismod ssl。现在，当我输入 www.domain.com 时，它会重定向到[https://www.domain.com](https://www.domain.com)，然后显示 SSL 连接错误。

我希望要么让 SSL 在 main+sub 上工作，要么完全删除。有没有人知道为什么它会重定向到 Https？

我的 VirtualHosts 文件是：

```
<VirtualHost *:80>
ServerName www.domain.com
DocumentRoot /var/www/folder
#SSLEngine on
#SSLCertificationFile /etc/apache2/ssl/apache.crt
#SSLCertificationKeyFile /etc/apache2/ssl/apache.key
</VirtualHost>

<VirtualHost *:80>
ServerName sub.domain.com
DocumentRoot /var/www/sub
#SSLEngine on
#SSLCertificationFile /etc/apache2/ssl/apache.crt
#SSLCertificationKeyFile /etc/apache2/ssl/apache.key
</VirtualHost> 
```

现在，如果我取消注释带有 # on 的行并将 *:80 更改为 *:443 它会重定向到启用 SSL 的主站点...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:46:18.423

您正在 TCP/80 上的 HTTP 虚拟主机上启用 mod_ssl（使用“SSLEngine on”指令）。您需要设置绑定到 TCP/443 端口的不同虚拟主机，仅在这些上启用 mod_ssl。否则，mod_ssl 期望端口 80 上的 HTTPS 连接，并且看到您的浏览器正在使用 HTTP，尝试将浏览器重定向到[https://www.domain.com](https://www.domain.com)。

# python-2.7 - 在调用另一个函数之后调用一个函数

> ID：15125354
> 
> 赞同：2
> 
> 时间：2013-02-28T00:34:35.870
> 
> 标签：python-2.7, listener, ableton-live

我正在使用基于 Python 的 API 编写与 Ableton Live 8 一起使用的控制器。在我的代码中，我使用 API 中提供的方法来观察属性值的变化，并在值发生变化时调用函数。我的目标是在注意到值更改时更改剪辑的颜色。

我已经完成了我的代码，并且它编译没有错误。从 Ableton 的日志中：

```
742234 ms. RemoteScriptError: RuntimeError
742234 ms. RemoteScriptError: : 
742234 ms. RemoteScriptError: Changes cannot be triggered by notifications
742234 ms. RemoteScriptError: 
```

看来这是使用内置通知系统在通知期间更改现场设置的结果。在侦听功能完成执行*后*触发实际更改应该可以工作。这可能使用 Python 吗？

编辑澄清：

目前我们有

1.  注意到值变化，调用函数
2.  函数尝试更改剪辑颜色（导致错误）

我们需要

1.  侦听器注意到值变化，调用函数
2.  函数找到新的颜色值
3.  函数执行结束
4.  在侦听器范围之外调用另一个函数，并更改剪辑颜色

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:17:40.833

我在 M4L 中做了很多工作，并且牢记这个错误 :) 恐怕你对此无能为力 - 在我的菜鸟眼中，它看起来像一个内置的安全机制，所以你不能循环（有什么改变了吗？改变它！有些东西改变了......）。

在 M4L 中，我使用 Javascript 任务来分隔步骤（任务几乎忘记了所有内容），例如

观察者 -> 发生了一些变化

创建一个响应的任务

task.execute() 或 task.schedule(time)

也许python线程模块可以实现类似的东西？顺便说一句，如果您碰巧对 _Framework-Tasks 有所了解，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-07T16:47:27.670

我在尝试从剪辑停止侦听器中删除曲目时遇到了同样的问题，然后我找到了这个线程并遵循了@user2323980 的建议。
每个框架类上似乎都有一个“_tasks”对象（我通过 ClipSlotComponent 和 ControlSurface 中的 log_message 找到它）来处理任务之间的并发。而且使用起来非常简单：

self._tasks.add(Task.run(func, args))

我在 Push 和 MK2 脚本中发现了它的一些用途，这些都是很好的参考。

# prolog - Prolog - 列表中的序列

> ID：15125355
> 
> 赞同：2
> 
> 时间：2013-02-28T00:34:36.490
> 
> 标签：prolog

我们想要构建一个谓词，它获取一个列表`L`和一个数字`N`，如果`N`是 list 的最长序列的长度，则为 true `L`。例如：

```
?- ls([1,2,2,4,4,4,2,3,2],3).
    true.

?- ls([1,2,3,2,3,2,1,7,8],3).
    false. 
```

为此我建造了 -

```
head([X|S],X). % head of the list
ls([H|T],N) :- head(T,X),H=X, NN is N-1 , ls(T,NN) . % if the head equal to his following
ls(_,0) :- !. % get seq in length N
ls([H|T],N) :- head(T,X) , not(H=X) ,ls(T,N). % if the head doesn't equal to his following 
```

这个概念很简单 - 检查头部是否等于他的跟随，如果是，则继续尾部并减少`N`.

我检查了我的代码，它运行良好（忽略其中的情况`N = 1`） -

```
 ls([1,2,2,4,4,4,2,3,2],3).
true ; 
false . 
```

但`true`答案不是有限的，之后还有更多的答案，我怎样才能让它返回有限的答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T07:16:07.473

Prolog 方面，你有一些问题。一个是你的谓词只在两个参数都被实例化时才有效，这让 Prolog 很失望。另一个是你的风格——<code>head/2 并没有真正在`[H|T]`. 我也认为这个算法从根本上是有缺陷的。如果不保留猜测长度的不变副本，我认为您无法确定列表尾部不存在更长长度的序列。换句话说，@Zakum 指出的第二件事，我认为不会有一个简单的解决方案。

这就是我解决问题的方式。首先是一个辅助谓词，用于获取两个值的最大值：

```
max(X, Y, X) :- X >= Y.
max(X, Y, Y) :- Y > X. 
```

现在大部分工作`sequence_length/2`都委托给一个循环，除了空列表的基本情况：

```
sequence_length([], 0).
sequence_length([X|Xs], Length) :- 
    once(sequence_length_loop(X, Xs, 1, Length)). 
```

调用`once/1`确保我们只得到一个答案。这将阻止谓词有效地生成带有序列的列表，同时也使谓词具有确定性，这是您想要的。（它与放置良好的切割具有相同的效果）。

循环的基本情况：将累加器复制到输出参数：

```
sequence_length_loop(_, [], Length, Length). 
```

归纳案例#1：我们有另一个相同值的副本。增加累加器并重复。

```
sequence_length_loop(X, [X|Xs], Acc, Length) :- 
    succ(Acc, Acc1), 
    sequence_length_loop(X, Xs, Acc1, Length). 
```

归纳案例#2：我们有不同的价值。计算列表剩余部分的序列长度；如果它比我们的累加器大，请使用它；否则，请使用蓄能器。

```
sequence_length_loop(X, [Y|Xs], Acc, Length) :- 
    X \= Y,
    sequence_length([Y|Xs], LengthRemaining),
    max(Acc, LengthRemaining, Length). 
```

这就是我将如何解决这个问题。我不知道它是否对你有用，但我希望你能从中收集到一些东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T00:55:37.430

在最后一条规则中添加一个中断怎么样？

```
head([X|S],X). % head of the list
ls([H|T],N) :- head(T,X),H=X, NN is N-1 , ls(T,NN) .    % if the head equal to his following
ls(_,0) :- !.                                           % get seq in length N
ls([H|T],N) :- head(T,X) , not(H=X) ,ls(T,N),!.         % if the head doesn't equal to his following 
```

为我工作，虽然我不是 Prolog 专家。

**//编辑：**顺便说一句。尝试

```
14 ?- ls([1,2,2,4,4,4,2,3,2],2).
true ;
false. 
```

对我来说看起来是错误的，没有检查 N 是否是最长的序列。还是我弄错了要求？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T08:01:12.687

您的代码正在检查列表中是否至少有一系列指定长度的元素。在访问列表时，您需要更多参数来保持搜索状态：

```
ls([E|Es], L) :- ls(E, 1, Es, L).

ls(X, N, [Y|Ys], L) :-
  (  X = Y
  -> M is N+1,
     ls(X, M, Ys, L)
  ;  ls(Y, 1, Ys, M),
     ( M > N -> L = M ; L = N )
  ).
ls(_, N, [], N). 
```

# ruby-on-rails - 我的第一个 Ruby on Rails 应用程序应该使用哪种类型的数据库？

> ID：15125360
> 
> 赞同：0
> 
> 时间：2013-02-28T00:35:05.130
> 
> 标签：ruby-on-rails, database

我正在开发一个 Ruby on Rails 项目，该项目获取并显示有关股票共同基金和 ETF 被低估程度的信息（按价格/账面比率、价格/现金流比率等）。我的源代码位于[https://github.com/jhsu802701/bargainstockfunds-scrape](https://github.com/jhsu802701/bargainstockfunds-scrape)。

目前，我的重点主要放在 Ruby 方面。我是 Ruby on Rails 开发领域的新手，我正在听取建议首先学习 Ruby。

我需要使用数据库来存储我的 Ruby 脚本获取的数据。我知道有几种选择（MySQL、NoSQL、PostGres 等），但我之前没有使用数据库的经验。你推荐使用什么，为什么？（最佳支持？最佳性能？更容易使用？其他原因？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:45:54.813

在 Rails 开发过程中，SQLite 非常方便。它体积小、基于文件且可移植。作为一个“完美主义者”，我倾向于在本地机器上花费大量时间进行开发。

我也对 MySQL 有更多的经验，并将它用于我在 Rails 项目中的生产数据库。请记住，您可以为每个 Rails 环境（“开发”、“生产”、“测试”）配置不同的数据库。一旦从开发切换到生产，Rails 迁移使构建新数据库变得非常容易。

# php - fancybox jQuery 不能与任何其他 javascript / jQuery 脚本一起使用？

> ID：15125362
> 
> 赞同：0
> 
> 时间：2013-02-28T00:35:14.957
> 
> 标签：php, javascript, jquery, fancybox

我一直在尝试在使用fancybox的同一页面中使用其他jQuery或javascript脚本，但是每次我在其中放置任何其他代码时，fancybox模态弹出窗口都会停止工作，它实际上会打开一个新窗口而不是模态！ ！

新的 javascript 是什么以及多大或多小都没有关系……它会阻止 fancybox 正常运行，但页面中没有任何其他代码，fancybox 会正常运行。我对 javascript 和 jquery 的世界很陌生，所以我很迷茫。

这是我的fancybox代码：

```
 <script src="scripts/modernizr-2.6.1.min.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script>
        !window.jQuery && document.write('<script src="jquery-1.4.3.min.js"><\/script>');
    </script>
    <script type="text/javascript" src="./fancybox/jquery.mousewheel-3.0.4.pack.js"></script>
    <script type="text/javascript" src="./fancybox/jquery.fancybox-1.3.4.pack.js"></script>
    <link rel="stylesheet" type="text/css" href="./fancybox/jquery.fancybox-1.3.4.css" media="screen" />
    <link rel="stylesheet" href="modalstyle.css" />
    <script type="text/javascript">
        $(document).ready(function() {
            /*
            *   Examples - images
            */

            $("a#example1").fancybox();

            $("a#example2").fancybox({
                'overlayShow'   : false,
                'transitionIn'  : 'elastic',
                'transitionOut' : 'elastic'
            });

            $("a#example3").fancybox({
                'transitionIn'  : 'none',
                'transitionOut' : 'none'    
            });

            $("a#example4").fancybox({
                'opacity'       : true,
                'overlayShow'   : false,
                'transitionIn'  : 'elastic',
                'transitionOut' : 'none'
            });

            $("a#example5").fancybox();

            $("a#example6").fancybox({
                'titlePosition'     : 'outside',
                'overlayColor'      : '#000',
                'overlayOpacity'    : 0.9
            });

            $("a#example7").fancybox({
                'titlePosition' : 'inside'
            });

            $("a#example8").fancybox({
                'titlePosition' : 'over'
            });

            $("a[rel=example_group]").fancybox({
                'transitionIn'      : 'none',
                'transitionOut'     : 'none',
                'titlePosition'     : 'over',
                'titleFormat'       : function(title, currentArray, currentIndex, currentOpts) {
                    return '<span id="fancybox-title-over">Image ' + (currentIndex + 1) + ' / ' + currentArray.length + (title.length ? ' &nbsp; ' + title : '') + '</span>';
                }
            });

            /*
            *   Examples - various
            */

            $("#various1").fancybox({
                'titlePosition'     : 'inside',
                'transitionIn'      : 'none',
                'transitionOut'     : 'none'
            });

            $("#various2").fancybox();

            $("#various3").fancybox({
                'width'             : '75%',
                'height'            : '75%',
                'autoScale'         : false,
                'transitionIn'      : 'none',
                'transitionOut'     : 'none',
                'type'              : 'iframe'
            });

            $("#various4").fancybox({
                'padding'           : 0,
                'autoScale'         : false,
                'transitionIn'      : 'none',
                'transitionOut'     : 'none'
            });
        });
    </script>

<script type='text/javascript'>
    $(window).load(function(){
        $('#various3').addClass("external").attr({ target: "_blank", href: 'insert.php' })[0].click();
    });
</script> 
```

有人可以让我知道我必须做什么吗？

谢谢

# objective-c - 当用户输入错误的输入时，如何在文本游戏中做出默认答案？

> ID：15125366
> 
> 赞同：2
> 
> 时间：2013-02-28T00:35:37.240
> 
> 标签：objective-c, c

到目前为止，这是我的代码，我正在使用目标 c。它很小，但我想做一个默认答案，例如，如果有人输入“我喜欢馅饼”，它会说“我不明白”。

```
 printf("This is a text game! You will be shown what is going on");
    printf("\nand it is up to you to decide what to do.");

    printf("\n\nThere is a gem on the ground.");
    printf("\nWhat do you want to do");
    printf("\n>");

    char string[256];
    fgets(string, 255, stdin);

    if (strcmp(string, "pick up gem\n") == 0)
    {
        printf("Got Gem");
    }
    else if (strcmp(string, "kick gem\n") == 0){
        printf("Gem flew off the road.");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:38:18.967

为什么不只是：

```
if (strcmp(string, "pick up gem\n") == 0){
    printf("Got Gem");
}
else if (strcmp(string, "kick gem\n") == 0){
    printf("Gem flew off the road.");
}   
else{
    printf("I don't understand.");
} 
```

然后，对于您的两个预期输入以外的任何内容，它将打印*"I don't understand"*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T00:38:37.217

你可能会写：

```
if (strcmp(string, "pick up gem\n") == 0)
    {
        printf("Got Gem");
    }
    else if (strcmp(string, "kick gem\n") == 0){
        printf("Gem flew off the road.");
    }
else {
    printf("What?");
} 
```

那么，“什么？”将是您的默认答案。

# ruby-on-rails - 如何强制 premailer 发送纯文本电子邮件？

> ID：15125368
> 
> 赞同：0
> 
> 时间：2013-02-28T00:35:45.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer

我正在使用 premailer gem 来方便发送电子邮件。一种特定类型的电子邮件，我总是需要发送纯文本。

我怎样才能强制 premailer 这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:19:11.087

我删除了 .html.erb 模板，它只自动发送纯文本电子邮件！

# c++ - 反向代理的典型架构是什么？

> ID：15125369
> 
> 赞同：3
> 
> 时间：2013-02-28T00:35:52.060
> 
> 标签：c++, plugins, webserver, weblogic, reverse-proxy

我尝试在网上搜索，90% 的时间都遇到了详细说明“如何”使用 Apache 实现反向代理的页面。

我在想反向代理插件是如何编码的？

1.  我知道他们解析请求并查看它应该被路由到哪个服务器。
2.  然后他们是否为来自最终用户的每个连接创建一个线程，然后委派该线程连接到正确的服务器的责任。
3.  继续接受来自其他客户端的更多请求并创建类似的线程。
4.  当线程从服务器获得响应时，将其回复给客户端。并关闭线程。还是他们有线程池？

我正在从 C++ 角度考虑它。如果使用多线程来增加代理的吞吐量。

如果我的问题根本上是错误的，请原谅我的无知。

任何具有相关技术信息的链接或教程将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T00:49:06.997

有点过时，但非常值得一读 - [http://www.kegel.com/c10k.html](http://www.kegel.com/c10k.html)。读完之后，您应该对为什么每个连接一个线程是一个非常糟糕的主意有了一个很好的了解。如果您对了解如何实现可扩展或高性能服务器真的很感兴趣，我建议您深入研究并阅读一些源代码。我特别喜欢 Apache HTTPD 的源代码。

# python - 在Python中替换字符串中的多个匹配项

> ID：15125372
> 
> 赞同：0
> 
> 时间：2013-02-28T00:36:15.380
> 
> 标签：python, string, replace, symbols

我想用空字符串替换以下字符串。

我不能在这里输入我的输入，由于某种原因，这些符号在这里被忽略了。请看下面的图片。我的代码产生了奇怪的结果。请在这里帮助我。

```
#expected output is "A B C D E"

string = "A<font color=#00FF00> B<font color=#00FFFF> C<font color="#00ff00"> D<font color="#ff0000"> E<i>"

lst = ['<i>','<font color=#00FF00>','<font color=#00FFFF>','<font color="#00ff00">','<font color="#ff0000">']

for el in lst:
    string.replace(el,"")
print string 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:41:24.567

在 python 中，字符串是不可变的，即对字符串进行任何操作总是返回一个新的字符串对象，而原始字符串对象保持不变。

例子：

```
In [57]: strs="A*B#C$D"

In [58]: lst=['*','#','$']

In [59]: for el in lst:
   ....:     strs=strs.replace(el,"")  # replace the original string with the
                                       # the new string

In [60]: strs
Out[60]: 'ABCD' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:56:08.957

```
>>> import string
>>> s="A*B#C$D"
>>> a = string.maketrans("", "")
>>> s.translate(a, "*#$")
'ABCD' 
```

# ruby - Heroku 的 Jekyll 1033 URL 字符限制

> ID：15125373
> 
> 赞同：1
> 
> 时间：2013-02-28T00:36:25.150
> 
> 标签：ruby, heroku, jekyll

为什么 Heroku 限制 Ruby Jekyll GET URL 长度？在本地运行 Jekyll 服务器，我*没有*遇到这个问题。

我看到状态 414，总字符数为 1033：

[Twilio GET 414](http://frank.lovecch.io/scripts/door.xml?test=vcwpjbiowaqrbihtqrolwrsardahcmeqaazzufqycuplswhnyowmreupqutysnnluijkldugviqfacajdjetnbcdxvwrjfsemolzgpseedpgphcuhycwkbcluncvvxbdasiuednmtxccnaqfyzcvplhdinrcwmjqftqweyjrpneqhpzfdyvjfubrubbdfpehvuqbuqkmyeeovqqyuussflqnuqxdazdrkshqxdxohswpvsbrjwuffaehjzenujbmejknamnmguovjzhcuyychhdikwblaoripoxgdamxmbcqbvekxxpfvmpuowxwhtqkxvvsfbromyklywgfazovuxjuwordgghdvkuxgqqmhbwwpwmnyotussxolozcglfgnokrsgvtqopdbklawkxhgwhvreeoxxibbxpfpfsembkxxsacyodhywntelobbxayuzsraysnucvegvpzhaazlhlhfhcrskszbxblcjyxubrneapymmfjmigprjuzmhnrpxlmhcchnimdefgqhaxxewhigdquzelfzopqzifhooiyevoqtirympscapfeiqltdvdbghgddgouvlivujofssksepbcxqgnviltujbdbvfuzltxkdpclyrnwxkycmzekhnnlgvbsxtmbaasuvxvgfpzkovyncnxcjbvbzcrbnnwihhrlowpxjgvmiryrvhsnycjhthovvttnnkaegxokgovaejqaghzduznsrouukbwjymgvloeqcembtygqbqqsbmfbfbjmyzmhrvvchfrrtlggdbvefxmaoxojpuczikhgqjngopboehwrqhxkiiwoqvsdotdrrtqxixwnplyjkkfgbvahbujwkgsvczvxpleoglodbshgoagjqdhzusiubfcjwosnvkqkpgikizgxarymmbjslcuhahlkmzsnlrfamjadzdhzwljjsclgbcbaufktihfljajqkpnamrwwgdoxyz)

状态为 200，总字符数为 1032：

[Twilio 获得 200](http://frank.lovecch.io/scripts/door.xml?test=vcwpjbiowaqrbihtqrolwrsardahcmeqaazzufqycuplswhnyowmreupqutysnnluijkldugviqfacajdjetnbcdxvwrjfsemolzgpseedpgphcuhycwkbcluncvvxbdasiuednmtxccnaqfyzcvplhdinrcwmjqftqweyjrpneqhpzfdyvjfubrubbdfpehvuqbuqkmyeeovqqyuussflqnuqxdazdrkshqxdxohswpvsbrjwuffaehjzenujbmejknamnmguovjzhcuyychhdikwblaoripoxgdamxmbcqbvekxxpfvmpuowxwhtqkxvvsfbromyklywgfazovuxjuwordgghdvkuxgqqmhbwwpwmnyotussxolozcglfgnokrsgvtqopdbklawkxhgwhvreeoxxibbxpfpfsembkxxsacyodhywntelobbxayuzsraysnucvegvpzhaazlhlhfhcrskszbxblcjyxubrneapymmfjmigprjuzmhnrpxlmhcchnimdefgqhaxxewhigdquzelfzopqzifhooiyevoqtirympscapfeiqltdvdbghgddgouvlivujofssksepbcxqgnviltujbdbvfuzltxkdpclyrnwxkycmzekhnnlgvbsxtmbaasuvxvgfpzkovyncnxcjbvbzcrbnnwihhrlowpxjgvmiryrvhsnycjhthovvttnnkaegxokgovaejqaghzduznsrouukbwjymgvloeqcembtygqbqqsbmfbfbjmyzmhrvvchfrrtlggdbvefxmaoxojpuczikhgqjngopboehwrqhxkiiwoqvsdotdrrtqxixwnplyjkkfgbvahbujwkgsvczvxpleoglodbshgoagjqdhzusiubfcjwosnvkqkpgikizgxarymmbjslcuhahlkmzsnlrfamjadzdhzwljjsclgbcbaufktihfljajqkpnamrwwgdoxy)

这些长 URL 可用于 Node.js 和 Heroku 上的 Play 2.0 应用程序（我能够快速测试的类型）。

这是为请求提供的内容：http: [//http-status.heroku.com/414](http://http-status.heroku.com/414)，但我没有在他们的[Heroku 特定错误页面](https://devcenter.heroku.com/articles/error-codes)上看到任何有关此限制的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:38:01.253

这取决于许多东西的配置......路由器，其他服务器等。

虽然对 URL 没有硬性和快速的长度限制，但有许多系统/工具/浏览器会在某个点停止处理：

[http://en.wikipedia.org/wiki/Query_string#Compatibility_issues](http://en.wikipedia.org/wiki/Query_string#Compatibility_issues)

# javascript - 我怎样才能有效地测试这个 JavaScript？

> ID：15125383
> 
> 赞同：0
> 
> 时间：2013-02-28T00:37:39.733
> 
> 标签：javascript, jquery, testing, bdd, jasmine

我编写了一段代码，它作用于用户突出显示页面上的某些文本的事件。代码工作正常（如下），但我的问题是如何有效地测试它？有没有一种方法可以模拟用户选择文本（特别是涉及`mouseup`事件）。

也许问题是在事件发生时检查是否选择了文本`mouseup`不是最好的方法？任何见解都值得赞赏。

```
var note = {
  mouseHandler : function(e){
    selection = window.getSelection();
      if (selection.toString() !== '') {
       note.selection = selection;
       note.setAttributes();
       note.hideOverlay();
       note.placeOverlay();
    }
 }
} 
```

理想情况下，我希望能够用测试代码触发它，这样我就可以确保`note.placeOverlay()`发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:15:01.650

因此，在 Jasmine 中，您会监视`window.getSelection`并在一种情况下返回一个字符串，而在另一种情况下则不返回。然后你会检查这应该发生的`note.placeOver`事情。

```
spyOn(window, 'getSelection').andReturn('someString')
note.mouseHandler();
//test what you expect here

spyOn(window, 'getSelection').andReturn('')
note.mouseHandler();
//test that nothings happens here 
```

*也许你可以展示什么`note.placeOver`，所以我可以完成答案。*

# java - Java 堆叠组件

> ID：15125388
> 
> 赞同：0
> 
> 时间：2013-02-28T00:38:28.703
> 
> 标签：java, swing, jlabel, layout-manager

我正在用具有 UI 的 Java 编写程序。我想做一种健康棒的东西。我必须使用`JLabel`HealthBarUnder 和 HealthBarOver。我想将它们放在彼此的顶部，以便我可以减小 HealthBarOver 的宽度（从而使健康栏的外观）。什么是最好的布局。我正在使用`BorderLayout`，但它不会让我重新调整组件的大小。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:48:43.913

你“可以”做这样的事情......

![在此处输入图像描述](../Images/0f45c9337bab82b45eb3fa9c22acdfa2.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.NumberFormat;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.border.LineBorder;

public class SlidingLabels {

    public static void main(String[] args) {
        new SlidingLabels();
    }

    public SlidingLabels() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JLabel lower = new JLabel();
        private JLabel upper = new JLabel();

        private float progress = 1f;
        private boolean ignoreUpdates;

        public TestPane() {
            setLayout(new GridBagLayout());
            lower.setOpaque(true);
            lower.setBackground(Color.GRAY);
            lower.setBorder(new LineBorder(Color.BLACK));
            lower.setPreferredSize(new Dimension(200, 25));

            upper.setOpaque(true);
            upper.setBackground(Color.BLUE);
            upper.setBorder(new LineBorder(Color.BLACK));
            upper.setPreferredSize(new Dimension(200, 25));

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.weightx = 1;
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.WEST;
            gbc.fill = GridBagConstraints.NONE;
            add(upper, gbc);
            gbc.fill = GridBagConstraints.HORIZONTAL;
            add(lower, gbc);

            Timer timer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    progress -= 0.01;
                    if (progress <= 0.001) {
                        ((Timer)e.getSource()).stop();
                    }
                    updateProgress();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        protected void updateProgress() {
            ignoreUpdates = true;
            int width = (int) (getWidth() * progress);
            upper.setPreferredSize(new Dimension(width, 25));
            revalidate();
            repaint();
            ignoreUpdates = false;
        }

        @Override
        public void invalidate() {
            super.invalidate(); 
            if (!ignoreUpdates) {
                updateProgress();
            }
        }

    }
} 
```

但它使用了许多令人讨厌的技巧，并且可能早晚会在你脸上炸毁......

你**应该**使用一个`JProgressBar`

![在此处输入图像描述](../Images/7bacbd4301f931fed008d42bed5b3ed8.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.border.LineBorder;

public class ProgressBar {

    public static void main(String[] args) {
        new ProgressBar();
    }

    public ProgressBar() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JProgressBar pb;
        private float progress = 1f;

        public TestPane() {
            setLayout(new GridBagLayout());

            pb = new JProgressBar();
            pb.setBorderPainted(false);
            pb.setStringPainted(true);
            pb.setBorder(new LineBorder(Color.BLACK));
            pb.setForeground(Color.BLUE);
            pb.setBackground(Color.GRAY);

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.weightx = 1;
            gbc.insets = new Insets(4, 4, 4, 4);
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.fill = GridBagConstraints.HORIZONTAL;
            add(pb, gbc);

            updateProgress();
            Timer timer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    progress -= 0.01;
                    if (progress <= 0.001) {
                        ((Timer)e.getSource()).stop();
                    }
                    updateProgress();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        protected void updateProgress() {
            pb.setValue((int) (100 * progress));
        }

    }
} 
```

但是，如果这不能满足您的需求，您最好编写自己的进度组件......

![在此处输入图像描述](../Images/4fd574de0b767d09f70389d3e7bd7c29.png)

```
public class ProgressPane {

    public static void main(String[] args) {
        new ProgressPane();
    }

    public ProgressPane() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private float progress = 1f;

        public TestPane() {

            setOpaque(false);

            setForeground(Color.BLUE);
            setBackground(Color.GRAY);

            Timer timer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    progress -= 0.01;
                    if (progress <= 0.001) {
                        ((Timer)e.getSource()).stop();
                    }
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            FontMetrics fm = getFontMetrics(getFont());
            return new Dimension(200, fm.getHeight() + 4);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g); 

            int width = getWidth() - 4;
            int height = getHeight() - 4;
            int x = 2;
            int y = 2;

            g.setColor(getBackground());
            g.fillRect(x, y, width, height);
            g.setColor(Color.BLACK);
            g.drawRect(x, y, width, height);

            g.setColor(getForeground());
            g.fillRect(x, y, (int) (width * progress), height);
            g.setColor(Color.BLACK);
            g.drawRect(x, y, (int) (width * progress), height);

            FontMetrics fm = g.getFontMetrics();
            String value = NumberFormat.getPercentInstance().format(progress);
            x = x + ((width - fm.stringWidth(value)) / 2);
            y = y + ((height - fm.getHeight()) / 2);

            g.setColor(Color.WHITE);
            g.drawString(value, x, y + fm.getAscent());

        }

    }
} 
```

我**强烈**推荐最后两个示例之一，随着时间的推移，它们更易于实现和维护。第一个会在你脸上爆炸，非常不愉快

ps-Kleo，请不要伤害我:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:48:08.260

我也会使用这个小方法来提供更手动的方法：

```
 private void addComponent(Container container, Component c, int x, int y,int width, int    height) {

    c.setBounds(x, y, width, height);
    container.add(c);
} 
```

并这样称呼它：

```
 addComponent(container such as JPanel, component such as a JButton, x position, yposition, width, height); 
```

# paypal-ipn - 带有修改功能的 PayPal 订阅按钮 - 我正在以某种方式破坏它 - 怎么样？

> ID：15125390
> 
> 赞同：2
> 
> 时间：2013-02-28T00:38:54.593
> 
> 标签：paypal-ipn, paypal-subscriptions

当我如下设置 modify=1 并单击按钮时，我没有得到广告的行为，即被带到 PayPal 页面，我可以在该页面升级我的（测试用户的）现有订阅。相反，我只会收到一份新订阅，如果我同意，它不会取消旧订阅。我还发送了一些额外的东西，我想肯定有什么东西破坏了它……但是什么？

```
<form target="paypal" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" name="subscribe_XXXXXX" id="subscribe_XXXXXX" style="float: left;">
    <input type="hidden" name="cmd" value="_s-xclick" />
    <input type="hidden" name="bn" value="XXXXXX" />
    <input type="hidden" name="custom" value="XXXXXX" />
    <input type="hidden" name="image_url" value="XXXXXX" />
    <input type="hidden" name="no_shipping" value="1" />
    <input type="hidden" name="notify_url" value="XXXXXX" />
    <input type="hidden" name="return" value="XXXXXX" />
    <input type="hidden" name="rm" value="2" />
    <input type="hidden" name="cbt" value="XXXXXX" />
    <input type="hidden" name="src" value="1" />
    <input type="hidden" name="currency_code" value="USD" />
    <input type="hidden" name="hosted_button_id" value="XXXXXX" />
    <input type="hidden" name="item_name" value="XXXXXX" />
    <input type="hidden" name="modify" value="1" />
    <input type="hidden" name="on0" value="Subscription options" />
    <input type="hidden" name="on1" value="email" />
    <table>
        <tbody>
            <tr>
                <td>Subscription options:</td>
                <td>
                    <select name="os0">

                        <option value="Daily">Daily: </option>
                        <option value="Weekly">Weekly:  </option>
                        <option value="Montly">Monthly: </option>
                        <option value="Yearly">Yearly:  </option>
                    </select>
                </td>
                <td>
                    <input type="text" name="os1" maxlength="200"/>
                </td>
                <td>
                    <input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_subscribeCC_LG.gif" border="0" name="submit" title="Subscribe to CognitiveLab ICND1" alt="PayPal - The safer, easier way to pay online!" width="96" height="30" /><img alt="|" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />
                </td>
            </tr>
        </tbody>
    </table>
</form> 
```

所有 URL 均正确且工作正常。我也尝试过 modify=2，如果我知道用户未订阅，我将设置 modify=0。

我希望这会产生一个`subscr_modify`带有修订`period[123]`和日期`mc_amount[123]`的IPN。`subscr_effective`没有，我买了一个新的`subscr_signup.`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-28T20:41:25.973

尝试创建一个非托管按钮。当预设值保存在 PayPal 帐户中时，不允许使用表单中的某些值。

创建按钮时，添加以下步骤以获得“原始”HTML 代码。

1.  点击“第 2 步：跟踪库存、损益（可选）”
2.  取消选中“PayPal 上的保存按钮”

创建按钮后，继续单击链接以删除代码保护。如果问题仍然存在，请在此处发布新表格，我会看看。

希望这可以帮助！

# meteor - WebStorm 和 Meteor 的迟缓？

> ID：15125392
> 
> 赞同：5
> 
> 时间：2013-02-28T00:38:58.467
> 
> 标签：meteor, webstorm

所以，我正在开发 Mac Mini，使用 WebStorm 来处理 Meteor 应用程序。我发现 WebStorm 往往变得迟缓，并且不断尝试索引事物。我有 4 gigs 的 RAM，其中 791M 似乎随时分配给 WebStorm。我的磁盘驱动器是 500GB，我确保始终有至少 20% 到 30% 的可用空间。

那么，有几个问题……是 Meteor 的捆绑过程导致 WebStorm 进行索引吗？有没有办法优化索引？使其运行频率降低？也许忽略 .meteor 目录？20% 的可用 RAM 是否适合分配给 WebStorm 用于 Meteor 开发？人们是否可以推荐其他任何东西来优化 WebStorm，使其不那么缓慢？

提前感谢您的任何建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T14:52:54.557

正如@Martin 所说 - 排除 Meteor 存储编译文件的目录：`.meteor\local`和`.meteor\meteorite`（使用陨石时）。

要获得 Meteor 建议 / ... 将 Meteor 源添加为外部库：`/usr/lib/meteor/packages/`. 我也在使用 PhpStorm 并将路径添加到 PHP 包含路径（没关系，它不是 PHP 库）。

在项目设置中将其添加为 JavaScript 库时，目录结构会丢失，升级流星时必须重复此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T08:14:20.527

我正在使用 PHPStoem 进行流星开发，并且遇到了与您相同的问题。我猜 PHPStorm 中的引擎与 WebStorm 相同...

我不确定增加 IDE 可用的 RAM 量是否真的会产生任何影响。该问题与每当对树中的任何文件进行更改时，IDE 都会重新索引文件夹树。当流星正在运行并对文件进行更改时，流星将整个应用程序捆绑到 .meteor 文件夹中，从而重新索引树。

我还没有尝试过，但我想真正有帮助的是将 .meteor-folder 添加到忽略列表中，这样每次文件更改发生时它都不会被重新索引。

# c - 这个缓冲函数在做什么？

> ID：15125393
> 
> 赞同：1
> 
> 时间：2013-02-28T00:39:07.927
> 
> 标签：c

我有一些代码具有以下功能：

```
//some code before
// buf is a char[] containing shellcode

((void(*)( ))buf)( ); //Not sure how this works 
```

谁能描述上述功能实际上是做什么的以及如何做的？
从语法上讲，它也相当混乱！

如果您希望查看完整的源代码，完整的代码会执行一个*shellcode*，并且是众所周知且广泛使用的[安全模块* 的一部分。](http://www.cis.syr.edu/~wedu/seed/Labs/Vulnerability/Buffer_Overflow/Buffer_Overflow.pdf)如果它有任何不同`gcc -z execstack`，则在编译期间使用。

谢谢。

*（第 3 页的来源）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T00:41:55.340

它正在转换`buf`为一个函数并运行它，就好像它是一个返回`void`且不带参数的函数一样。本质上是运行shellcode。

从文章中的源代码：

```
#include <stdlib.h>
#include <stdio.h>

const char code[] =
"\x31\xc0" /* Line 1: xorl %eax,%eax */
"\x50" /* Line 2: pushl %eax */
"\x68""//sh" /* Line 3: pushl $0x68732f2f */
"\x68""/bin" /* Line 4: pushl $0x6e69622f */
"\x89\xe3" /* Line 5: movl %esp,%ebx */
"\x50" /* Line 6: pushl %eax */
"\x53" /* Line 7: pushl %ebx */
"\x89\xe1" /* Line 8: movl %esp,%ecx */
"\x99" /* Line 9: cdql */
"\xb0\x0b" /* Line 10: movb $0x0b,%al */
"\xcd\x80" /* Line 11: int $0x80 */
;
int main(int argc, char **argv)
{
   char buf[sizeof(code)];
   strcpy(buf, code);
   ((void(*)( ))buf)( );
} 
```

它复制`code`into的内容`buf`，按顺序排列。前几行设置了函数序言（设置堆栈等）。在机器看来，其中的代码`buf`与它实际上是一个函数看起来是一样的。强制转换时，编译器允许您实际**调用**从`buf`. 很神奇不是吗？但它在概念上很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T00:42:10.923

该语句转换`buf`为指向函数的指针（类型为`void(*)()`），然后调用该函数。

```
buf // `buf` decays to a pointer to the first element of `buf`

(void(*)())buf // this pointer has its type changed to `void(*)()`
               // (a pointer to a function taking no arguments and returning void)

((void(*)())buf)(); // this function is called 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T00:42:09.683

`buf`被强制转换为函数指针，然后调用该函数。`void`是返回类型。最后一组括号是 arg 的位置（如果有的话）。

# security - postgres ip difference between pg_hba.conf and postgresql.conf

> ID：15125398
> 
> 赞同：4
> 
> 时间：2013-02-28T00:39:54.600
> 
> 标签：security, postgresql

(I have a basic understanding of networking)

So I read in another post that explains that listen_addresses just involves an extra layer of security before the login: [How to configure postgresql postgresql.conf listen_addresses for multiple ip addresses](https://stackoverflow.com/questions/9764126/how-to-configure-postgresql-postgresql-conf-listen-addresses-for-multiple-ip-add)

**But what I want to know is why listen_address doesn't have to be put in CIDR format for the ips you put in there.**

in `pg_hba.conf` it's `##.##.##.##/##` for CIDR format. So why does `postgresql.conf`'s `listen_addresses` use just the ip and without the subnet mask? (and also, I put my public ip address for both but access isn't allowed if I put it in `listen_address` which means...?

Side question (maybe for subnet): amazon ec2 doesn't let me use my public ip address/24, it has to be /32 (saying the size is too small) but i put /24 in `pg_hba.conf` so clearly it's valid?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T00:52:27.667

You cannot listen to a CIDR range in any OS I know of. Essentially, what happens is that `listen_addresses` is matched to one or more IP interfaces by the host OS, which binds PostgreSQL's listening socket(s) to those interfaces.

`listen_addresses` controls what network interfaces PostgreSQL can accept connections on, not what clients can connect to PostgreSQL.

In the case of EC2, `listen_addresses` cannot contain your public IP because it is not a local interface on the host. You must listen on the actual network interface, which for EC2 is usually a 10.x.x.x private IP. In practice there's no point setting `listen_addresses` to anything except `*` on EC2 unless you're using VPC and have added multiple interfaces to your host connected to different subnets.

# python - 处理 numpy/pandas 中的零日志值

> ID：15125407
> 
> 赞同：2
> 
> 时间：2013-02-28T00:40:53.423
> 
> 标签：python, numpy, pandas

我在 pandas 中有一个数据框，它存储一个包含比率的列。需要将比率转换为`log2`标尺进行绘图，但比率值通常为 0，导致在 pandas`log2(0)`中记录为缺失值或缺失值。`inf`我想将这些可视化，因为在我的数据框中，比率值 0 是有意义的。在 pandas/numpy 中处理这个问题的最佳方法是什么？当我获取日志值时，这是首选的方法吗？

```
# take log with tiny value added
c = 0.0000001
df[col].apply(lamda x: log2(c + x)) 
```

还是有其他方法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T07:50:42.837

我想你可以用它`numpy.inf`来识别那些`infinity`并分别对待它们。

参考：[github.com/pydata/pandas](https://github.com/pydata/pandas/issues/2858)

# asp.net-mvc - 如何更好地控制 DotNetOpenAuth 使用 Microsoft 帐户（Live ID）的方式？

> ID：15125410
> 
> 赞同：4
> 
> 时间：2013-02-28T00:41:07.917
> 
> 标签：asp.net-mvc, oauth, dotnetopenauth, windows-live-id

我正在使用 DotNetOpenAuth 的新[OAuthWebSecurity](http://www.dotnetopenauth.net/)[包装](http://msdn.microsoft.com/en-us/library/microsoft.web.webpages.oauth.oauthwebsecurity%28v=vs.111%29.aspx)器，以允许用户使用他们的 Microsoft 帐户（又名 Windows Live ID）登录到 MVC4 应用程序。

我已经注册了微软客户端：

```
OAuthWebSecurity.RegisterMicrosoftClient(clientId: "...", clientSecret: "..."); 
```

一切正常，我喜欢它的简单性。但是我如何改进它正在做的事情呢？

选择使用他们的 Microsoft 帐户登录后，用户将进入一个要求他们登录的屏幕：

![第一步](../Images/669266fafca252242604231beba70bd8.png)

当他们登录时，我希望他们能够选中“保持登录”框。

然后，Microsoft 要求他们确定我的访问权限：

![第二步](../Images/3f0dc0a8fa6bb2b49cd78db59eca105c.png)

但我实际上并不*想要*那么多访问权限。我想要的只是他们的姓名和电子邮件地址。也许他们的照片。我当然不需要或不想访问他们的联系人和朋友。这会吓跑我的用户。

**我在哪里可以将参数传递给 OAuthWebSecurity 或 DotNetOpenAuth 来控制它？**

所以用户点击*是*，一切正常。但是，当他们离开并回到我的网站时 - “让我保持登录”选项应该得到尊重。它不是。相反，他们看到的是：

![第三步](../Images/3f9145ada922ec323df14849d1038aa4.png)

我不明白上面的消息：

> 因为您正在访问敏感信息，所以您需要验证您的密码。

什么敏感信息？我不想开始的联系人/朋友？或者是其他东西？

**如何解决这两个问题以使我的应用程序更加用户友好？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T00:48:23.843

您需要传递您想要的范围，您可以使用 wl.signin 如果他们已经登录到您的应用程序，则无需再次要求凭据。

检查[http://msdn.microsoft.com/en-us/library/live/hh243646.aspx](http://msdn.microsoft.com/en-us/library/live/hh243646.aspx)

# php - php 套接字数据流服务器 (mp3)

> ID：15125411
> 
> 赞同：3
> 
> 时间：2013-02-28T00:41:15.607
> 
> 标签：php, sockets, audio-streaming, html5-audio

我正在尝试使用套接字制作一个用于语音聊天的 php 服务器。我可以向客户端发送纯数据，例如 html 等。但我想发送语音数据，我首先使用 mp3 文件对其进行测试。我的服务器代码：

```
<?php
    error_reporting(0);
    set_time_limit(0);

    define('IP', '192.168.56.1');
    define('PORT', '5000');
    define('MAX_CLIENT', 10);

    require_once 'lib/socket.php';

    $socket = new socket();
    $socket->run();
    while (TRUE){
        $socket->accept_multi_client();
        $socket->speak();
    }

?> 
```

和我的服务器类：

```
<?php

class socket {

    public static $address = IP;
    public static $port = PORT;
    public static $max_clients = MAX_CLIENT;
    public static $client_socks;
    public static $sock;
    public static $read;

    function run() {
        if (!(socket::$sock = socket_create(AF_INET, SOCK_STREAM, 0))) {
            $errorcode = socket_last_error();
            $errormsg = socket_strerror($errorcode);

            die("Couldn't create socket: [$errorcode] $errormsg \n");
        }

        echo "Socket created \n";

        // Bind the source address
        if (!socket_bind(socket::$sock, socket::$address, socket::$port)) {
            $errorcode = socket_last_error();
            $errormsg = socket_strerror($errorcode);

            die("Could not bind socket : [$errorcode] $errormsg \n");
        }

        echo "Socket bind OK \n";

        if (!socket_listen(socket::$sock, socket::$max_clients)) {
            $errorcode = socket_last_error();
            $errormsg = socket_strerror($errorcode);

            die("Could not listen on socket : [$errorcode] $errormsg \n");
        }

        echo "Socket listen OK \n";

        echo "Waiting for incoming connections... \n";

        //array of client sockets
        socket::$client_socks = array();
    }

    function accept_multi_client() {
        //prepare array of readable client sockets
        socket::$read = array();

        //first socket is the master socket
        socket::$read[0] = socket::$sock;

        //now add the existing client sockets
        for ($i = 0; $i < socket::$max_clients; $i++) {
            if (socket::$client_socks[$i] != null) {
                socket::$read[$i + 1] = socket::$client_socks[$i];
            }
        }

        //now call select - blocking call
        if (socket_select(socket::$read, $write, $except, null) === false) {
            $errorcode = socket_last_error();
            $errormsg = socket_strerror($errorcode);

            print("Could not listen on socket : [$errorcode] $errormsg \n");
        }

        //if ready contains the master socket, then a new connection has come in
        if (in_array(socket::$sock, socket::$read)) {
            for ($i = 0; $i < socket::$max_clients; $i++) {
                if (socket::$client_socks[$i] == null) {
                    socket::$client_socks[$i] = socket_accept(socket::$sock);

                    //display information about the client who is connected
                    if (socket_getpeername(socket::$client_socks[$i], socket::$address, socket::$port)) {
                        echo "Client $address : $port is now connected to us. \n";
                    }

                    //Send Welcome message to client
                    /*$message = "\n";
                    //$message .= "Enter a message and press enter, and i shall reply back \n";
                    socket_write(socket::$client_socks[$i], $message);*/
                    break;
                }
            }
        }
    }

    function speak() {

        for ($i = 0; $i < socket::$max_clients; $i++) {
            if (in_array(socket::$client_socks[$i], socket::$read)) {

                $input = socket_read(socket::$client_socks[$i], 1024);
                echo $input;
             /*   if ($input == null) {
                    //zero length string meaning disconnected, remove and close the socket
                    unset(socket::$client_socks[$i]);
                    socket_close(socket::$client_socks[$i]);
                }
*/
                $output = $this->do_anything($input, $i);
               // echo $output;
                //send response to client
                socket_write(socket::$client_socks[$i], $output);
                socket_close(socket::$client_socks[$i]);
            }
        }
    }

    function do_anything($input, $i) {

        $filename = 'ee.mp3';
        ob_start();
        //ob_end_clean();
            if (file_exists($filename)) {
                print('HTTP/1.1 200 OK'."\n");
                print('Content-Type: audio/mpeg'." ");
                print('Content-Disposition: filename="test.mp3"'."\n");
                print('Content-length: ' . 1129297 ."\n");
                /*print('Cache-Control: no-cache'." ");
                print("Content-Transfer-Encoding: chunked"." ");*/

                $handle = fopen($filename, "r");
                $contents = fread($handle, filesize($filename));

            } else {
                print("HTTP/1.0 404 Not Found");
            }

            $out = ob_get_contents();

        //ob_end_clean();

        return $out.$contents;
    }

}
?> 
```

我可以使用 wget 获取 mp3 文件并使用 mplayer 播放。但我想在网上用 html5 播放器玩这个。

这不适用于我的服务器：

```
<audio controls>

  <source src="http://192.168.56.1:5000/" type="audio/mpeg">

</audio> 
```

# windows - 没有 Aero 合成就没有 vsync；无法在 CreateDesktop() 制作的桌面上打开 Aero

> ID：15125412
> 
> 赞同：10
> 
> 时间：2013-02-28T00:41:17.137
> 
> 标签：windows, opengl, sandbox, composition

我正在使用 OpenGL 进行渲染。我的东西是沙盒的，所以我使用 CreateDesktop() 来防止粉碎攻击。但是，无论出于何种原因，新桌面在创建时都没有 Aero 合成（尽管默认设置是这样），并且尝试使用 DwmEnableComposition() 启用它会失败。我不知道为什么，或者如何解决这个问题。DwmEnableComposition() 在默认桌面上工作正常。有没有什么方法可以让 vs vsync 在没有合成的情况下工作？即使从 nvidia 的驱动程序控制面板强制执行，我也无法这样做。这里有什么解决方案？

我使用的是 Windows 7。在 Windows 8 中，他们说不能禁用合成，所以我想知道这个问题是否会不再存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T08:06:45.723

据我所知，DWM 组合仅限于 Windows 7 中的默认桌面，并且在其他桌面上始终禁用。你可以在 UAC 提示和 login/ctrl+alt+del 屏幕上看到这一点，它们没有启用 Aero 效果。我很确定 Windows 8 已经改变了这种情况，因此所有桌面现在都由 DWM 呈现。

# python - 在第二个脚本中为第一个脚本中的函数修改来自 python 模块的变量

> ID：15125414
> 
> 赞同：0
> 
> 时间：2013-02-28T00:41:22.610
> 
> 标签：python, xml

a.py 看起来像这样：

```
user = '0'
xml = '<int>%s</int>' 
```

我想做的是拥有它，这样我就可以使用第二个脚本 b.py ，如下所示：

```
import a
a.user = '4343'
print a.xml 
```

这可能吗？因为我一直做不到。我总是在另一个脚本中得到第一个变量。我宁愿将 XML 保存在第二个脚本中，因为它太长了，而且滚动浏览代码很烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:44:55.710

是的，这是可能的——事实上，你正在这样做。

很难说，因为你没有任何实际*使用* `a.user`的东西。但这很容易解决：

一个.py：

```
user = '0'
xml = '<int>%s</int>'

def foo():
    return xml % (user,) 
```

b.py：

```
import a
a.user = '4343'
print a.foo() 
```

现在运行它：

```
$ python b.py
<int>4343</int> 
```

正是你想要的，对吧？

# python - 嗖嗖：不应该或者只增加结果？

> ID：15125416
> 
> 赞同：2
> 
> 时间：2013-02-28T00:41:29.020
> 
> 标签：python, search-engine, django-haystack, whoosh

我们使用 Haystack 1.2.7 和 Whoosh 2.4.1 作为后端索引了大约 9k 个文档。尽管使用了 Haystack，但它看起来像是一个 Whoosh 问题。看看我的调试案例：

1) 如果我只是进行精确查找，Whoosh 会找到我的文档（如下所示）：

```
>>> SearchQuerySet().all().models(PedidoSaida).filter(numero__exact='6210202443/10')
[<SearchResult: logistica.pedidosaida (pk=u'6')>] 
```

2) 如果我只是运行startswith 查找，Whoosh 找不到我的文档（如下所示）：

```
>>> SearchQuerySet().all().models(PedidoSaida).filter(numero__startswith='6210202443/10')
[] 
```

3) 如果我将所有内容放在一个 OR 查询中，Whoosh 仍然找不到我的文档（如下所示）：

```
>>> SearchQuerySet().all().models(PedidoSaida).filter(SQ(numero__exact='6210202443/10') | SQ(numero__startswith='6210202443/10'))
[] 
```

查看 Haystack 发送给 Whoosh 的查询，我们有：

```
>>> str(SearchQuerySet().all().models(PedidoSaida).filter(numero__exact='6210202443/10').query)                                       
'(numero:6210202443/10) AND (django_ct:logistica.pedidosaida)'

>>> str(SearchQuerySet().all().models(PedidoSaida).filter(numero__startswith='6210202443/10').query)
'(numero:6210202443/10*) AND (django_ct:logistica.pedidosaida)'

>>> str(SearchQuerySet().all().models(PedidoSaida).filter(SQ(numero__exact='6210202443/10') | SQ(numero__startswith='6210202443/10')).query)
'((numero:6210202443/10 OR numero:6210202443/10*)) AND (django_ct:logistica.pedidosaida)' 
```

如您所见，最后一个查询正是（第一个或第二个）。Whoosh 不应该找到我的文件吗？我看不出我的逻辑哪里错了：我使用的是 OR 并且发现比使用其中一个语句时要少。

我也认为 Whoosh 在第一个查询 (numero:6210202443/10) 中找到我的文档，但在第二个 (numero:6210202443/10*) 中没有找到我的文档，这很奇怪。但我想这与 Haystack 在我的 CharField 中使用的 StemmingAnalyzer 有关。之后我会深入研究一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:04:58.963

您可以`QueryParser`直接使用 a 查看 Whoosh 是如何解析该查询的：

```
>>> from whoosh.qparser import QueryParser
>>> QueryParser("content", schema=None).parse('((numero:6210202443/10 OR numero:6210202443/10*)) AND (django_ct:logistica.pedidosaida)')
And([Or([Term('numero', '6210202443/10'), Term('numero', '6210202443/')]), Prefix('content', '10'), Term('django_ct', 'logistica.pedidosaida')]) 
```

让我们重新格式化最后一行：

```
And([
    Or([
        Term('numero', '6210202443/10'),
        Term('numero', '6210202443/'),
    ]),
    Prefix('content', '10'),
    Term('django_ct', 'logistica.pedidosaida'),
]) 
```

因此，它看起来`*`比`/`您的搜索词中的绑定更紧密。当然，我可以将其视为嗖嗖声中的错误。（我相信维护者会喜欢你的补丁☺）

想到的解决方法：

1.  自己构建查询，而不是通过 Whoosh 的模糊定义和面向人的查询语言来回往返。当然，只有当您的索引在同一台机器上并且您正在使用相同的过程读取它时，这才有效；我对干草堆了解不多。

2.  避免在`numero`字段中使用斜线。将它们更改为不太可能看起来像查询语法的东西，比如下划线。

3.  进行前缀搜索时避免包含斜杠；例如，`6210202443*`在查询中的任何地方都可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:06:36.973

按照@Eevee 的想法，我做了一些测试。检查这个：

```
>>> QueryParser("content", schema=None).parse('((numero:6210202443/10 OR (numero:6210202443/10*))) AND (django_ct:logistica.pedidosaida)')
And([
    Or([
        Term('numero', '6210202443/10'), 
        And([
            Term('numero', '6210202443/'), 
            Prefix('content', '10')
        ])
    ]), 
    Term('django_ct', 'logistica.pedidosaida')
]) 
```

似乎`/`优先于`OR`. 是否有意义？我认为逻辑运算符应该具有最高优先级。你同意吗？

如果这种行为是正确的，我猜这是 Haystack 查询生成器中的一个错误。不是吗？

我想贡献一个补丁，但我不确定它是否真的是解析器中的一个错误。取决于更有意义的优先级。

# postgis - 将多边形和线串预处理到网格区域以划分数据

> ID：15125421
> 
> 赞同：0
> 
> 时间：2013-02-28T00:41:53.967
> 
> 标签：postgis, oracle-spatial

由于我的多边形查询（多边形中的多边形）的大小、数量和性能，我想预处理我的数据并将多边形分成网格。我的数据在我感兴趣的领域非常统一，所以像 12 个偶数网格一样可以很好地工作。我以后可能会根据性能调整这个数字。基本上，我将创建 12 个具有关联空间索引的表，或者我可能只创建一个具有网格分区键的表。这将使我的总索引大小减少 12 倍，并有望提高性能。从查询端，我会将查询定向到相应的表。

关键是我能够弄清楚如何将多边形分组到这些网格中。如果多边形落在多个网格中，那么我可能会在每个网格中创建一条记录，并在查询时进行重复数据删除。我不希望这种情况经常发生。

本质上，我将有一个“网格”，我想与我的多边形相交并找出多边形落在哪些网格中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:45:41.380

我的过程将是这样的：

1.  查找整个数据集（两个轴）的 MIN/MAX 纵坐标值
2.  将这些值扩展一个看起来合适的边距（以防组合时的纵坐标不形成规则的矩形）
3.  编写一个小循环，在这些 MIN/MAX 坐标内以设定的间隔生成多边形 - 即每个网格正方形创建一个多边形
4.  使用`SDO_COVERS`来查看哪个网格方块覆盖了每个多边形。如果多个网格方块覆盖一个多边形，您应该看到多个匹配项，如您所描述的。

我也同意您在单个表中分区数据的策略。我听说过对此的积极评价，但我从未亲自尝试过。不过，访问多个表的开销似乎是您想要避免的。

# mstest - 从 C# 运行 MSTest 测试

> ID：15125423
> 
> 赞同：2
> 
> 时间：2013-02-28T00:41:57.823
> 
> 标签：mstest

是否可以仅使用 C# 代码运行 TestClass 类的所有测试？我发现可以使用名为 MSTest 的命令行工具运行测试，但这不是我想要的。

我想运行一个类中定义的所有测试，更改一些参数并再次运行所有测试。这将重复几次，因此最好使用 C# 来完成，因为以编程方式评估测试结果很容易。

# javascript - How to stop user from leaving page after submitting form (i.e. while it's processing)?

> ID：15125424
> 
> 赞同：3
> 
> 时间：2013-02-28T00:42:01.750
> 
> 标签：javascript

There are lots of similar questions on here, but I haven't found any that deal with stopping a user from leaving a page **after** submitting a form (i.e. while it's processing).

I have a page on my website with a form that takes a long time to submit (sometimes as long as 15 seconds), so I want to have a popup warning to keep the user on the page after they submit the form.

The problem is that no matter how I try using `window.onbeforeunload`, I always get a confirmation dialog from that function when the form is submitted, which is not what I want. I don't want the user to get the confirmation dialog when the form is submitted, but rather after it's submitted and only if they try to leave the page after that.

HTML:

```
<form id="myform" method="post" action="" onsubmit="formSubmitted();">
    <button type="submit" onclick="return checkForm();">submit form</button>
</form> 
```

Javascript:

```
formSubmittedFlag = 0;

function checkForm()
{
    ...

    if(...)
    {
        return true;
    }
    else
    {
        return false;
    }
}

function formSubmitted()
{
    formSubmittedFlag = 1;
}

window.onbeforeunload = function()
{
    if(formSubmittedFlag == 1)
    {
        return "Are you sure you want to leave the page?";
    }
} 
```

Is there a way to accomplish what I'm wanting?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:52:17.713

Submit the form using AJAX rather than the form's built-in action. The [jQuery Form Plugin](http://malsup.com/jquery/form/) may be helpful.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T00:57:11.310

replace the contents of formSubmitted with this:

```
sessionStorage.formSubmittedFlag=true;
notReloaded=true; 
```

And replace the contents of window.onbeforeunload with this:

```
 if(sessionStorage.formSubmittedFlag===true&&notReloaded!=true)
        return 'do you want to leave?'; 
```

# iphone - 为什么我的常规点击会作为 LongPresses 被提取？

> ID：15125425
> 
> 赞同：1
> 
> 时间：2013-02-28T00:42:03.563
> 
> 标签：iphone, ios, objective-c, xcode, uigesturerecognizer

这段代码一直有效，直到我将我的项目从 ios4 转换为 ios6 (+ARC) 并将我的 xib 文件交换为情节提要。现在我所做的任何点击都算作长按。

***手势设置***

```
- (void)viewDidLoad
{

[super viewDidLoad];

for(UIButton *button in buttons)
{
    UILongPressGestureRecognizer *longPressRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressDetected:)];
    longPressRecognizer.minimumPressDuration = 1;
    longPressRecognizer.numberOfTouchesRequired = 1;
    [button addGestureRecognizer:longPressRecognizer];
} 
```

}

***长按法***

```
- (IBAction)longPressDetected:(UIGestureRecognizer *)sender 
{
    if (sender.state != UIGestureRecognizerStateBegan) 
    {
        NSLog(@"duplicate press cancelled");
        return;
    }
    NSLog(@"LongPress Received");
} 
```

***故事板*** ![在此处输入图像描述](../Images/6690dbdbd660d59dbc002c0229b7fa34.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:21:41.590

将您的代码替换为此然后检查：

```
UILongPressGestureRecognizer *longPressRecognizer = [[UILongPressGestureRecognizer alloc]  initWithTarget:self action:@selector(longPressDetected:)];
longPressRecognizer.minimumPressDuration = 2.0;
longPressRecognizer.delegate = self;
[button addGestureRecognizer:longPressRecognizer]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T19:51:20.393

根据您添加的屏幕截图，您已将按钮链接到`longPressDetected:`情节提要中。您需要在情节提要中将其删除，它会正常工作。

基本上它正在执行也指向相同方法的按钮操作。

# android - Android：有没有办法检测来自 SoundPool 的声音是否仍在播放

> ID：15125431
> 
> 赞同：1
> 
> 时间：2013-02-28T00:42:22.883
> 
> 标签：android

我正在写一个音板。我希望这样当一个人按下按钮播放声音时，它会首先查看声音是否仍在播放。所以它可以停止那个声音并开始新的声音。

是否可以查看声音 id 是否仍在播放，我正在使用以下代码来启动我的声音

```
// Sound code
void StartSound(int id)
{
   AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
    float actualVolume = (float) audioManager
            .getStreamVolume(AudioManager.STREAM_MUSIC);
    float maxVolume = (float) audioManager
            .getStreamMaxVolume(AudioManager.STREAM_MUSIC);

    float volume=(float) ((float)cGlobals.gVol/100.00);
    // Is the sound loaded already?

        soundPool.play(id, volume, volume, 1, 0, 1f);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-14T14:08:47.543

您可以`isMusicActive()`使用`AudioManager`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:53:53.577

```
class AudioSystem{
    /*
     * Checks whether the specified stream type is active.
     *
     * return true if any track playing on this stream is active.
     */
    public static native boolean isStreamActive(int stream, int inPastMs);
} 
```

对于流：

```
/** The audio stream for phone calls */
public static final int STREAM_VOICE_CALL = AudioSystem.STREAM_VOICE_CALL;
/** The audio stream for system sounds */
public static final int STREAM_SYSTEM = AudioSystem.STREAM_SYSTEM;
/** The audio stream for the phone ring */
public static final int STREAM_RING = AudioSystem.STREAM_RING;
/** The audio stream for music playback */
public static final int STREAM_MUSIC = AudioSystem.STREAM_MUSIC;
/** The audio stream for alarms */
public static final int STREAM_ALARM = AudioSystem.STREAM_ALARM;
/** The audio stream for notifications */
public static final int STREAM_NOTIFICATION = AudioSystem.STREAM_NOTIFICATION;
/** @hide The audio stream for phone calls when connected to bluetooth */
public static final int STREAM_BLUETOOTH_SCO = AudioSystem.STREAM_BLUETOOTH_SCO;
/** @hide The audio stream for enforced system sounds in certain countries (e.g camera in Japan) */
public static final int STREAM_SYSTEM_ENFORCED = AudioSystem.STREAM_SYSTEM_ENFORCED;
/** The audio stream for DTMF Tones */
public static final int STREAM_DTMF = AudioSystem.STREAM_DTMF;
/** @hide The audio stream for text to speech (TTS) */
public static final int STREAM_TTS = AudioSystem.STREAM_TTS; 
```

检查您要检查的任何类型的音频流。例如， `AudioSystem.isStreamActive(STREAM_MUSIC, 0)`检查是否有任何音乐处于活动状态。

# php - php的libphonenumber

> ID：15125433
> 
> 赞同：1
> 
> 时间：2013-02-28T00:43:25.710
> 
> 标签：php, libphonenumber

我正在使用[https://github.com/davideme/libphonenumber-for-PHP](https://github.com/davideme/libphonenumber-for-PHP)来格式化电话号码

我有 1800 个号码的问题

```
$formatnumber = "1800123456"
$country = "AU";    

$phoneUtil = PhoneNumberUtil::getInstance();

try {
    $NumberProto = $phoneUtil->parse( $formatnumber , $country );
} catch ( NumberParseException $e ) {
    echo $e;
}

$formattedNumber =  $phoneUtil->format( $NumberProto, PhoneNumberFormat::NATIONAL ); 
```

我期望从中得到的`$formattedNumber`是`"1800 123456"`

我得到的是一个未格式化的数字`"1800123456"`

如果我需要做些什么来使其正确格式化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-01T08:46:05.820

它几乎适用于我的代码：

```
<?php
require __DIR__ . '/vendor/autoload.php';

$formatnumber = "1800123456";
$country = "AU";

$phoneUtil = \libphonenumber\PhoneNumberUtil::getInstance();

try {
    $NumberProto = $phoneUtil->parse($formatnumber, $country);
} catch (NumberParseException $e) {
    echo $e;
}

$formattedNumber = $phoneUtil->format($NumberProto, \libphonenumber\PhoneNumberFormat::NATIONAL);

echo $formattedNumber; 
```

回复：

```
1800 123 456 
```

我正在使用我的 libphonenumber-for-php 版本：[https ://github.com/giggsey/libphonenumber-for-php](https://github.com/giggsey/libphonenumber-for-php)

# php - 使用命名空间的 pdo 库

> ID：15125434
> 
> 赞同：0
> 
> 时间：2013-02-28T00:43:32.510
> 
> 标签：php, pdo

只要我没有添加命名空间，一切正常。在 PDO 之前我添加 /，但 PDO 对象仍然是空的，为什么？我的代码有什么问题？

完整样本：

```
<?php
namespace ProjectM;

class classPDO extends DbCore
{
    public function get()
    {               
        $this->dbLink = new \PDO('mysql:host=localhost;dbname=test_db', 'root', 'pass1312');

        print_r($this->dbLink); // - always empty

        $res = $this->dbLink('SELECT * FROM product')->fetchAll(PDO::FETCH_ASSOC);  

        print_r($res); // - always empty
    } 
```

错误：致命错误：调用未定义的方法 Core\classPDO::dbLink()

为什么“$this->dbLink”为空？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:54:57.793

您的`new \PDO`实例化是正确的。您的属性`->dbLink`创建得很好。但是 PDO 实例没有实现`__call`. 因此这不起作用：

```
$res = $this->dbLink('SELECT ...') 
```

您仍然需要遵循 PDO 类的 API。
在您的情况下，请`->query`在引用您的 PDO 实例属性后使用该方法：

```
$res = $this->dbLink->query('SELECT ...') 
```

# jquery - IE中的jQuery不起作用

> ID：15125435
> 
> 赞同：0
> 
> 时间：2013-02-28T00:43:36.023
> 
> 标签：jquery, internet-explorer

我在 html5 文档上有以下代码，但它在 IE 中不起作用。它在 Chrome 中运行良好，但我读到 IE 对脚本及其编码方式并不那么宽容。

我对 jQuery 很陌生，所以任何帮助都将不胜感激。

```
<div class="gallery">

    <div id='gallery-1' class='gallery galleryid-6 gallery-columns-9 gallery-size-thumbnail'>
        <dl class='gallery-item'>
            <dt class='gallery-icon'>
                <a href='http://mysite.co.uk/homepage-01.jpg'><img src="http://mysite.co.uk/01-90x90.jpg" /></a>
            </dt>
        </dl>
        <dl class='gallery-item'>
            <dt class='gallery-icon'>
                <a href='http://mysite.co.uk/homepage-02.jpg'><img src="http://mysite.co.uk/02-90x90.jpg" /></a>
            </dt>
        </dl>
        <dl class='gallery-item'>
            <dt class='gallery-icon'>
                <a href='http://mysite.co.uk/homepage-03.jpg'><img src="http://mysite.co.uk/03-90x90.jpg" /></a>
            </dt>
        </dl>
    </div>

</div><!--gallery-->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

<script>
    $(document).ready(function () {
        $("div.gallery a").click(function () {
            event.preventDefault();
            $("div.picture").html($("<img>").attr("src", this.href).fadeIn(1000));
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T00:45:30.557

变量`event`未定义，它应该是：

```
$("div.gallery a").click(function (event) {
    event.preventDefault();
    $("div.picture").html($("<img>").attr("src", this.href).fadeIn(1000));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:46:03.177

您需要“传递”`event`给您的点击处理程序：

```
$("div.gallery a").click(function(event) {    // <---- here
        event.preventDefault(); 
```

...否则`event`在单击处理程序中未定义。引用它会导致事情崩溃（我很惊讶它可以在任何地方工作）。

# php - phpunit可以使用多个数据提供者吗

> ID：15125437
> 
> 赞同：38
> 
> 时间：2013-02-28T00:43:45.970
> 
> 标签：php, unit-testing, tdd, phpunit

简而言之一个问题：phpunit 在运行测试时可以使用多个数据提供者吗？

例如，我有一个名为 getById 的方法，我需要为它运行成功和不成功的测试用例。

成功的测试用例意味着它可以返回相应的记录。对于不成功的，输入可以分为两类：无效和失败。

invalid表示输入不合法，failed表示输入可能有效，但没有对应的ID对应的记录。

所以代码是这样的：

```
/** 
 * @dataProvider provideInvalidId
 * @dataProvider provideFailedId
 */
public function testGetByIdUnsuccess($id)
{   
    $this->assertNull($this->model->getById($id));
} 
```

但事实证明，只使用了第一个数据提供者，而忽略了第二个。虽然我不确定这种情况是否常见，但这是问题所在。我们可以使用多个数据提供者吗？如果我们可以，怎么做？

[PS：在这里](http://www.phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers)没有找到太多帮助

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2016-10-09T14:21:16.310

只是对问题的更新，[拉取请求](https://github.com/sebastianbergmann/phpunit/pull/2223)被接受，现在代码：

```
/** 
 * @dataProvider provideInvalidId
 * @dataProvider provideFailedId
 */
public function testGetByIdUnsuccess($id)
{   
    $this->assertNull($this->model->getById($id));
} 
```

将在 PHPUnit 5.7 上工作，您将能够添加任意数量的提供程序。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-27T17:01:01.180

您可以使用如下所示的辅助函数。唯一的问题是，如果所有“子数据提供者”提供的测试用例总数很大，那么找出哪个测试用例导致问题可能会很乏味。

```
/** 
 * @dataProvider allIds
 */
public function testGetByIdUnsuccess($id)
{   
    $this->assertNull($this->model->getById($id));
}  

public function allIds()
{
    return array_merge(provideInvalidId(),provideFailedId());
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T02:23:01.003

您可以向 dataProvider 数组添加注释，以提供相同的功能，同时不需要多个 dataProvider。

```
public static function DataProvider()
{
    return array(
        'Invalid Id'      => array(123),
        'Failed Id'       => array(321),
        'Id Not Provided' => array(NULL),
);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-07T13:03:23.697

您还可以使用[CrossDataProviders](https://github.com/T-Regx/CrossDataProviders)，它允许您相互使用数据提供者的组合

```
<?php

/** 
 * @dataProvider provideInvalidIdAndValues
 */
public function testGetByIdUnsuccess($id, $value)
{   
    $this->assertNull($this->model->getById($id));
}   

function provideInvalidIdAndValues() {
    return DataProviders::cross(
        [[1], [2], [3]],
        [['Rob'], ['John'], ['Dennis']]
    );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-01T01:46:26.033

好吧，你可以从另一边考虑它；）你确切地知道你的预期是什么，例如 getById(1) 预期的结果是 $result_expected，而不是 $result_null 所以，你可以像这样制作一个数据提供者

```
$dataProvider = array(1, 'unexpected'); 
```

然后，你的测试方法是这样的：

```
public function testGetById($id) {
    $this->assertEquals($result_expected, $obj::getById($id));
} 
```

所以，测试结果是：

```
.F 
```

# java - 从安卓上的摄像头流式传输实时视频

> ID：15125439
> 
> 赞同：5
> 
> 时间：2013-02-28T00:44:01.280
> 
> 标签：java, android, camera, video-streaming, live-streaming

我正在尝试制作一个应用程序，该应用程序将使用 TCP 或 UDP 协议通过互联网从安卓手机的摄像头流式传输视频。我目前能够将一个字节数组从 android 手机传输到我的计算机，该计算机正在运行我用 C# 编写的服务器。我之前通过网络发送 .jpeg 并以 30 fps 的速度显示它们来完成流式视频，但这会占用太多带宽。

首先，从相机捕获图像的最佳方式是什么？我在看...

```
onPictureTaken(byte[] data, Camera camera) 
```

或者

```
onPreviewFrame (byte[] data, Camera camera) 
```

我只对 byte[] 数据感兴趣，将其编码/压缩，然后通过网络发送。

其次，我应该如何将这些帧转换为可以通过网络传输的字节数组的压缩视频？我不太关心视频质量，我更关心减少带宽。

这是我想要做的，但我不需要高质量的视频。 [https://code.google.com/p/spydroid-ipcamera/](https://code.google.com/p/spydroid-ipcamera/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T03:59:27.287

如果您打算使用任何编码器自己对数据进行编码，那么用户

```
onPreviewFrame (byte[] data, Camera camera) 
```

或者您可以通过发送 rtsp 流来尝试不同的方法。[SpyDroid](https://code.google.com/p/spydroid-ipcamera/)是一个非常好的项目，可以用来学习这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-03T12:19:32.023

如果您担心带宽，也许您应该尝试发送 JPEG 图像字节数组？由于`data`字节数组是 YUV 格式，它比 JPEG 格式大。运行 JPEG 压缩时，您可以定义它的质量，这会影响发送字节数组的大小。

```
 public void onPreviewFrame(byte[] data, Camera camera){

 YuvImage image = new YuvImage(data, ImageFormat.NV21,
                            size.width, size.height, null);
 baos = new ByteArrayOutputStream();
 int jpeg_quality = 100;

 image.compressToJpeg(new Rect(0, 0, size.width, size.height),
                         jpeg_quality, baos);

 byte[] sending_array = baos.toByteArray();

} 
```

`size`以前定义为

```
Camera.Size size = parameters.getPreviewSize(); 
```

# android - 在 Android 中使用 translateX 和 translateY 时视图上的锚点是什么

> ID：15125440
> 
> 赞同：1
> 
> 时间：2013-02-28T00:44:01.510
> 
> 标签：android

我有一个`RelativeLayout`内部视图。视图超时改变了它的位置，所以我的问题是我遇到了一个问题，说顶部和左侧坐标是最大高度和最大宽度，视图部分显示在屏幕上，而其余部分被切断。

所以我的问题是**当翻译视图时，视图是相对于视图的中心像素还是左下角左上角右下角或右上角进行调整？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T00:50:01.787

在 translateX 和 translateY 的情况下，这无关紧要。无论您使用什么锚点，结果都是一样的。然而，缩放和旋转依赖于 setPivotX/PivotY 定义的锚点（或枢轴）。

# erlang - 如何将存储的 erlang 术语转换为 erlang 之外的字符串

> ID：15125442
> 
> 赞同：0
> 
> 时间：2013-02-28T00:44:18.177
> 
> 标签：erlang, riak

我已将**Erlang**术语存储到**Riak**的存储桶/密钥中。

**这个 Term 由 Erlang 存储为我认为是二进制的**。

例如，这是原始的 erlang 术语：{someAtom,[1,2,3],{"text1","text2"}}

使用**java**程序，我尝试使用 riak 客户端获取数据，但数据已编码。Riak 也将数据存储为二进制，但是 java 客户端有一个 getValueAsString() 方法，但由于源数据是二进制的，所以这不起作用（显然）。

关键是，如果我在 java 中将此数据读取为 byte[]，如何将其解码为表示此文本的字符串：{someAtom,[1,2,3],{"text1","text2"}} ? 更具体地说，erlang 是否存储为代表单个字符的 ASCII 代码的字节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:07:55.870

我几乎可以肯定您使用错误的接口从 Java 访问数据。看看[Riak Java 客户端快速入门](https://github.com/basho/riak-java-client#quick-start)。他们不使用`getValueAsString()`，并且在他们使用的地方有一个代码`RiakResponse.getRiakObjects()`。试试看。

# ruby - 类上下文之外的超级关键字？

> ID：15125443
> 
> 赞同：4
> 
> 时间：2013-02-28T00:44:36.300
> 
> 标签：ruby, chef-infra

有这个文件，`app.rb`它包含以下内容：

```
def initialize(*args)
  super
  @action = :add
end 
```

它不在课堂内。为什么会有`super`关键字？文件在[这里](https://github.com/gchef/nginx-cookbook/blob/master/resources/app.rb#L23)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:01:39.430

该文件将用于创建一个新的**“轻量级”**资源类。定义的方法将被复制到那里而不做任何更改。所以**super**非常有意义，因为新生成的类将继承自 Chef::Resource。

查看有关[轻量级资源和提供者 (LWRP)的更多信息](http://wiki.opscode.com/pages/viewpage.action?pageId=7274964)

# wcf - 我想在执行数据读取器时使用 WCF 流式传输数据

> ID：15125446
> 
> 赞同：0
> 
> 时间：2013-02-28T00:44:48.843
> 
> 标签：wcf, ado.net

我不想阅读整个内容，而是将其放入文件中然后流式传输。我想知道我可以使用 WCF 和 Streaming 以某种方式将数据读取器流式传输到客户端吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:04:01.373

您可以通过使用 MessageContracts 来实现这一点。

当我第一次尝试自己解决这个问题时，我偶然发现了这篇文章，它真的很有帮助： http: [//www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-通过 HTTP](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP)

这是设置合同的一个非常基本的示例：

```
[MessageContract]
public class MyFileInfo : IDisposable
{

    [MessageHeader(MustUnderstand = true)]
    public string FileName;

    [MessageHeader(MustUnderstand = true)]
    public long Length;

    [MessageHeader]
    public string FileHash;

    [MessageHeader]
    public string Status;

    [MessageBodyMember]
    public Stream FileData;

    public void Dispose()
    {
        if (FileData != null)
        {
            FileData.Close();
            FileData = null;
        }
    }
}

[MessageContract]
public class FileRequest
{
    [MessageHeader]
    public string fileName;

} 
```

当我第一次学习 WCF 时，我讨厌默认的应用程序配置文件是多么冗长，所以在一些谷歌搜索/研究之后，我写了一篇博客文章，其中包含关于如何在没有巨大应用程序配置文件的情况下设置 WCF 客户端代理的代码示例：[http：/ /justindonohoo.blogspot.com/2012/08/generic-wcf-client-library-code.html](http://justindonohoo.blogspot.com/2012/08/generic-wcf-client-library-code.html)

# facebook - 如何使用带有 JSF 的 SocialAuth 进行重定向？

> ID：15125452
> 
> 赞同：2
> 
> 时间：2013-02-28T00:45:50.763
> 
> 标签：facebook, jsf, servlets, jsf-2, socialauth

我正在尝试使用SocialAuth，这个想法很简单，`log in`用facebook点击然后将用户重定向到我登录的网站。`log in`我得到它的部分，如下：

1) /index.xhtml

```
<h:form id="login-facebook">
    <h:commandButton id="login" action="#{socialFacebook.login}" value="Login"/>
</h:form> 
```

2)`socialFacebook`豆类

```
package controller;

@ManagedBean(name="socialFacebook")
@RequestScoped
public class SocialFacebook implements Serializable{
    private static final long serialVersionUID = -4787254243136316495L;

    private String code;

    @PostConstruct
    public void init(){
        try {
            HttpServletRequest request=(HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
            SocialAuthManager manager = (SocialAuthManager)FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("authManager");
            Map<String, String> paramsMap = SocialAuthUtil.getRequestParametersMap(request);
            AuthProvider provider = manager.connect(paramsMap);

            // get profile
            Profile p = provider.getUserProfile();
            System.out.println(p.getFullName());
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void login(){
        try {
            HttpServletRequest request=(HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();

            //Create an instance of SocialAuthConfig object
            SocialAuthConfig config  = SocialAuthConfig.getDefault();

            //load configuration. By default load the configuration from oauth_consumer.properties. 
            //You can also pass input stream, properties object or properties file name.
            config.load(); 

            //Create an instance of SocialAuthManager and set config
            SocialAuthManager manager = new SocialAuthManager();
            manager.setSocialAuthConfig(config);

            //URL of YOUR application which will be called after authentication
            //String successUrl = "http://localhost:8080/cc/pages/system/login_facebook.xhtml" + ";jsessionid=" + req.getSession().getId();
            String successUrl = "http://localhost:8080/cc/pages/system/index.xhtml" + ";jsessionid=" + request.getSession().getId();

            // get Provider URL to which you should redirect for authentication.
            // id can have values "facebook", "twitter", "yahoo" etc. or the OpenID URL
            String url = manager.getAuthenticationUrl("facebook", successUrl);

            // Store in session
            FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("authManager", manager);                
            //redirect to the successful login page
            FacesContext.getCurrentInstance().responseComplete();
            FacesContext.getCurrentInstance().getExternalContext().redirect(url);

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public String getCode() {
        return code;
    }

    public void setCode(String code) {
        this.code = code;
    }

    } 
```

3) Facebook 返回以下网址：

```
http://localhost:8080/cc/pages/system/home_facebook.xhtml;jsessionid=e143aa975fa3f313c677fbcb03e3?code=AQAmJXdQX0B__zJHXnRyPfgaG1CfNUEEEEEEEEEEEEEEEZJLEpsT5s1spd3KtWGWI2HYaIOZKLkrn8axKs4iKwJVQJwJQB_WSs2iWkp2DDDDDDDDDDDDtdRPLPG7psp6r2PYmn7CTm2QNNha7f1QlgmoZtBsIEF0SSSSSSSSSSSSSSSSSSSSSSS8RutAU8dqI2KDE57f#_=_ 
```

4) 它按照 BalusC 的建议通过我的 init 方法，但总是打印`nope :(`：

```
@ManagedBean(name="redirectFacebook")
@RequestScoped
public class RedirectFacebook implements Serializable{
    private static final long serialVersionUID = -566276017320074630L;

    private String code;
    private Profile profile;

    @PostConstruct
    public void init(){
        try {
            HttpServletRequest request=(HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
            HttpSession session = (HttpSession) request.getAttribute("jsessionid");

            if (request.getAttribute("code") != null)
                System.out.println("code");
            else
                System.out.println("nope :(");

            if (session != null){
                SocialAuthManager manager = (SocialAuthManager)FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("authManager");
                Map<String, String> paramsMap = SocialAuthUtil.getRequestParametersMap(request);
                AuthProvider provider = manager.connect(paramsMap);

                // get profile
                profile = provider.getUserProfile();
                System.out.println(profile.getFullName());
            }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

5) 它`nope :(`也在我的 home_facebook 页面上打印：

```
<h:form id="redirect-facebook-form">
    <f:metadata>
        <f:viewParam name="code" value="#{redirectFacebook.code}" />
    </f:metadata>
    <h:panelGroup rendered="#{not empty redirectFacebook.profile}"> 
        Hello, you're successfully associated as #{socialFacebook.profile.firstName} on Facebook
    </h:panelGroup>
    <h:panelGroup rendered="#{empty redirectFacebook.profile}"> 
        Nope :(
    </h:panelGroup>
</h:form> 
```

但是，我有点困惑如何在我的 bean 中获取结果并进行一些验证，例如用户是否已注册。我知道，在 Google 中查找一些代码，我必须这样做，但是我怎样才能重定向到我的 bean 并执行此操作并将用户重定向到正确的页面？

```
 SocialAuthManager manager = (SocialAuthManager)FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("authManager");
    Map<String, String> paramsMap = SocialAuthUtil.getRequestParametersMap(request);
    AuthProvider provider = manager.connect(paramsMap);

    // get profile
    Profile p;
    p = provider.getUserProfile(); 
```

这真的需要几个晚上才能弄清楚。任何想法都非常感谢，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:00:19.820

`localhost`除了您在 URL中使用之外，我没有看到任何代码级别的问题。这是一个[wiki 链接](http://code.google.com/p/socialauth/wiki/HowToRunApplicationWithLocalhostOnWindows)，它描述了如何使用`localhost`.

如果这不起作用，请告诉我。

# opengl - 在OpenGL中清除屏幕

> ID：15125456
> 
> 赞同：0
> 
> 时间：2013-02-28T00:46:14.337
> 
> 标签：opengl, opengl-es, opengl-es-2.0

我正在寻找一种方法来清洁屏幕只到一个点，而不必再次重绘其中的所有对象。那可能吗？“最多一个点”是指如果我在屏幕上有 20 个对象，每个对象都存储在单独的缓冲区中，就目前而言，每次我想删除一个对象时，我都必须清除整个屏幕，`glClean`然后重新绘制剩下的对象。我想要的是只删除最后一个对象，而不必重新绘制整个对象。这些对象是先进先出的，所以没有排序问题。我希望有类似推送一个上下文的东西，比如说 10 个对象，并且只清理/重绘该上下文而不是所有对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T00:49:59.883

包含“后面”的像素缓冲区数据；您要删除的对象已经从光栅化中丢失。您必须再次渲染剩余的对象，以便正确计算您移除的对象后面应该出现的内容。

# scala - 测试某个东西不能编译的断言

> ID：15125457
> 
> 赞同：49
> 
> 时间：2013-02-28T00:46:18.310
> 
> 标签：scala, testing, types, shapeless, type-level-computation

## 问题

当我使用支持类型级编程的库时，我经常会发现自己在写如下注释（来自[Paul Snively 在 Strange Loop 2012 中](http://www.infoq.com/presentations/Types-Tests)提出[的示例](https://github.com/psnively/types_vs_tests/blob/master/src/main/scala/Shapeless.scala#L37)）：

```
// But these invalid sequences don't compile:
// isValid(_3 :: _1 :: _5 :: _8 :: _8 :: _2 :: _8 :: _6 :: _5 :: HNil)
// isValid(_3 :: _4 :: _5 :: _8 :: _8 :: _2 :: _8 :: _6 :: HNil) 
```

或者，来自[Shapeless](https://github.com/milessabin/shapeless)存储库中[的示例](https://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/uniqueness.scala#L71)：

```
/**
 * If we wanted to confirm that the list uniquely contains `Foo` or any
 * subtype of `Foo`, we could first use `unifySubtypes` to upcast any
 * subtypes of `Foo` in the list to `Foo`.
 *
 * The following would not compile, for example:
 */
 //stuff.unifySubtypes[Foo].unique[Foo] 
```

这是一种非常粗略的方式来表明关于这些方法的行为的一些事实，我们可以想象想要使这些断言更正式——用于单元或回归测试等。

为了给出一个具体的例子来说明为什么这可能在像 Shapeless 这样的库的上下文中很有用，几天前我写了以下内容作为对[这个问题](https://groups.google.com/d/msg/shapeless-dev/HvV63toSBNM/K84lmwSsYzwJ)的快速第一次尝试：

```
import shapeless._

implicit class Uniqueable[L <: HList](l: L) {
  def unique[A](implicit ev: FilterAux[L, A, A :: HNil]) = ev(l).head
} 
```

目的是编译：

```
('a' :: 'b :: HNil).unique[Char] 
```

虽然这不会：

```
('a' :: 'b' :: HNil).unique[Char] 
```

我惊讶地发现这种类型级`unique`for 的实现`HList`不起作用，因为 Shapeless 很乐意`FilterAux`在后一种情况下找到一个实例。换句话说，即使您可能不希望它编译，以下内容也会编译：

```
implicitly[FilterAux[Char :: Char :: HNil, Char, Char :: HNil]] 
```

在这种情况下，我看到的是[一个错误](https://groups.google.com/d/msg/shapeless-dev/HvV63toSBNM/vqglyMwyf3QJ)——或者至少是一些类似错误的东西——并且它[已经被修复了](https://github.com/milessabin/shapeless/commit/6201d4505d51f40770c620b90bc761f5c3ae620e)。

更一般地说，我们可以想象想要检查隐含在我的期望中的那种不变量，它`FilterAux` *应该*如何处理单元测试之类的东西——就像谈论测试这样的类型级代码听起来很奇怪，所有最近关于类型*与*测试的相对优点的辩论。

## 我的问题

问题是我不知道任何类型的测试框架（适用于任何平台）允许程序员断言某些东西不能*编译*。

我可以想象的一种方法是`FilterAux`使用旧的[implicit-argument-with-null-default技巧](https://stackoverflow.com/a/12648663/334519)：

```
def assertNoInstanceOf[T](implicit instance: T = null) = assert(instance == null) 
```

这将让您在单元测试中编写以下内容：

```
assertNoInstanceOf[FilterAux[Char :: Char :: HNil, Char, Char :: HNil]] 
```

不过，以下内容会更加方便和富有表现力：

```
assertDoesntCompile(('a' :: 'b' :: HNil).unique[Char]) 
```

我要这个。我的问题是，是否有人知道任何支持远程类似东西的测试库或框架——对于 Scala 来说是理想的，但我会满足于任何东西。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-28T10:19:45.553

不是一个框架，但 Jorge Ortiz ( [@JorgeO](https://twitter.com/JorgeO) ) 提到了他在 2012 年在 NEScala 为 Foursquare 的 Rogue 库的测试中添加的一些实用程序，这些实用程序支持非编译测试：你可以在[这里](https://github.com/foursquare/rogue/blob/master/rogue-lift/src/test/scala/com/foursquare/rogue/QueryTest.scala#L578)找到示例。很长一段时间以来，我一直想在无形中添加这样的东西。

最近，Roland Kuhn ( [@rolandkuhn](https://twitter.com/rolandkuhn) ) 添加了一个类似的机制，这次使用 Scala 2.10 的运行时编译来[测试 Akka 类型化通道](https://github.com/akka/akka/blob/master/akka-channels-tests/src/test/scala/akka/channels/ChannelSpec.scala#L156)。

当然，这些都是动态测试：如果不应该编译的东西发生了，它们会在（测试）运行时失败。无类型宏可能提供静态选项：即。宏可以接受无类型树，对其进行类型检查，如果成功则抛出类型错误）。这可能是在无形的宏观天堂分支上尝试的东西。但显然不是 2.10.0 或更早版本的解决方案。

**更新**

自从回答了这个问题后，由于 Stefan Zeiger ( [@StefanZeiger](https://twitter.com/StefanZeiger) )[而出现](https://github.com/slick/slick/commit/1fe9863472a7d208c78dddab9d4105a55a252e22)了另一种方法。这个很有趣，因为就像上面提到的无类型宏一样，它是编译时而不是（测试）运行时检查，但是它也与 Scala 2.10.x 兼容。因此，我认为它比 Roland 的方法更可取。

我现在[使用 Jorge 的方法](https://github.com/milessabin/shapeless/blob/scala-2.9.x/core/src/main/scala/shapeless/test/typechecking.scala)为[2.9.x 添加了 shapeless 实现，使用 Stefan 的方法为 2.10.x 添加了实现，](https://github.com/milessabin/shapeless/blob/master/core/src/main/scala/shapeless/test/typechecking.scala)[使用无类型宏方法](https://github.com/milessabin/shapeless/blob/topic/macro-paradise/core/src/main/scala/shapeless/test/typechecking.scala)为宏天堂添加了实现。可以在[此处找到 2.9.x](https://github.com/milessabin/shapeless/blob/scala-2.9.x/core/src/test/scala/shapeless/hlist.scala#L97)、[此处为 2.10.x](https://github.com/milessabin/shapeless/blob/master/core/src/test/scala/shapeless/hlist.scala#L95)和[此处为宏天堂](https://github.com/milessabin/shapeless/blob/topic/macro-paradise/core/src/test/scala/shapeless/hlist.scala#L95)的相应测试示例。

无类型宏测试是最干净的，但 Stefan 的 2.10.x 兼容方法紧随其后。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-03-12T21:46:52.893

[ScalaTest 2.1.0 的Assertions](http://doc.scalatest.org/2.1.0/index.html#org.scalatest.Assertions@checkingThatCodeDoesNotCompile)语法如下：

```
assertTypeError("val s: String = 1") 
```

对于[Matchers](http://doc.scalatest.org/2.1.0/index.html#org.scalatest.Matchers@checkingThatCodeDoesNotCompile)：

```
"val s: String = 1" shouldNot compile 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-28T10:52:03.353

你知道Scala 项目中的[partest吗？](https://github.com/scala/scala/tree/master/src/partest)例如[CompilerTest](https://github.com/scala/scala/blob/master/src/partest/scala/tools/partest/CompilerTest.scala)有以下文档：

```
/** For testing compiler internals directly.
* Each source code string in "sources" will be compiled, and
* the check function will be called with the source code and the
* resulting CompilationUnit. The check implementation should
* test for what it wants to test and fail (via assert or other
* exception) if it is not happy.
*/ 
```

例如，它能够检查这个源[https://github.com/scala/scala/blob/master/test/files/neg/divergent-implicit.scala](https://github.com/scala/scala/blob/master/test/files/neg/divergent-implicit.scala)是否会有这个结果[https://github.com/scala /scala/blob/master/test/files/neg/divergent-implicit.check](https://github.com/scala/scala/blob/master/test/files/neg/divergent-implicit.check)

它不适合您的问题（因为您没有根据断言指定测试用例），但可能是一种方法和/或给您一个良好的开端。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-10T14:46:43.293

根据我提供的链接，`Miles Sabin`我能够使用 akka 版本

```
import scala.tools.reflect.ToolBox

object TestUtils {

  def eval(code: String, compileOptions: String = "-cp target/classes"): Any = {
    val tb = mkToolbox(compileOptions)
    tb.eval(tb.parse(code))
  }

  def mkToolbox(compileOptions: String = ""): ToolBox[_ <: scala.reflect.api.Universe] = {
    val m = scala.reflect.runtime.currentMirror
    m.mkToolBox(options = compileOptions)
  }
} 
```

然后在我的测试中我像这样使用它

```
def result = TestUtils.eval(
  """|import ee.ui.events.Event
     |import ee.ui.events.ReadOnlyEvent
     |     
     |val myObj = new {
     |  private val writableEvent = Event[Int]
     |  val event:ReadOnlyEvent[Int] = writableEvent
     |}
     |
     |// will not compile:
     |myObj.event.fire
     |""".stripMargin)

result must throwA[ToolBoxError].like {
  case e => 
    e.getMessage must contain("value fire is not a member of ee.ui.events.ReadOnlyEvent[Int]") 
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-03-09T19:44:32.850

[`compileError`](https://github.com/lihaoyi/utest#compile-error)µTest 中的宏就是这样做的：

```
compileError("true * false")
// CompileError.Type("value * is not a member of Boolean")

compileError("(}")
// CompileError.Parse("')' expected but '}' found.") 
```

# c# - 将 C# 桌面应用程序与 Rails Web 应用程序链接

> ID：15125458
> 
> 赞同：1
> 
> 时间：2013-02-28T00:46:37.490
> 
> 标签：c#, .net, ruby-on-rails, database, web-applications

我有一个 Windows 桌面应用程序（使用 .NET 2.0 框架使用 C# 开发），我想连接到 Rails Web 应用程序。理想情况下，该方案将按如下方式工作：

用户运行 Windows 桌面应用程序并生成一些结果。然后，桌面应用程序将结果上传到数据库，Rails Web 应用程序可以对其进行操作并做一些有趣的事情（例如，制作漂亮的图表）。

我在 .NET 方面的经验有限，但我在 RoR 方面有相当深厚的背景。我目前对使用哪种类型的数据库以及如何使两个应用程序操作同一个数据库感到困惑。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:58:30.717

1.  您可以使用任何可用的数据库。`.NET`或 ROR 不会限制您的选择。

2.  您可以让 rails 应用程序轮询数据库以获取所述数据（不太好）。或者，您可以开发一个 Web 服务并让桌面应用程序调用它来触发数据操作。

[轨道上的 Web 服务。](http://www.ibm.com/developerworks/opensource/library/os-ws-rubyrails/index.html)

[如何在 C# winforms 中使用 web 服务](https://stackoverflow.com/questions/756345/how-to-add-webservice-to-c-sharp-winform)

[有关在 C# winforms 中使用 Web 服务的更多信息](http://omegacoder.com/?p=41)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:50:21.967

数据库可以是 .NET 和 RoR 都可以与之通信的任何您想要的东西。我不是 RoR 专家，但 .NET 可以与您想要的任何数据库对话。

应用程序之间的通信是通过数据库进行的。您通过 C# 应用程序插入/操作数据，然后读取数据并使用 RoR 应用程序对其进行处理。两个应用程序之间真的不应该有直接的（应用程序到应用程序）通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T01:06:15.723

> “我目前对使用哪种类型的数据库感到困惑”

说出你的毒药！:) 您可以通过 .NET 和 Ruby/RoR 与地球上几乎所有的数据库进行对话，包括：

*   关系数据库，如 SQL Server、DB2、Oracle、MySql、ProgreSQL 等。
*   文档数据库，如 MongoDB、CouchDB、RavenDB 等。
*   其他 NOSQL 键值存储包括 Cassandra、Dynamo、Riak、Redis、Memcache、Azure Table Storage 等。

选择一个满足您需求的产品并继续努力。

> “如何允许两个应用程序之间的通信”

我不太清楚你的意思是什么，但我假设你的意思是，在上传数据后，你的应用程序应该打开一个网页，显示一个漂亮的数据图表？如果是这样，这是微不足道的，并且不需要在您的 .NET 应用程序和您的 RoR 站点之间直接集成，除了您的 .NET 应用程序产生一个 Web 浏览器的实例并要求它打开给定的网页：

```
var process = new Process();
process.StartInfo.FileName = "iexplore";
process.StartInfo.Arguments = @"http:\\myreportgenerator.com?customerid=1234";
process.Start(); 
```

如果您希望您的 .NET 应用程序能够要求您的 RoR 站点执行特定操作，请考虑[将 REST Web 服务 API 添加到您的 RoR 站点](http://www.ibm.com/developerworks/java/library/j-cb08016/index.html)。

更进一步，您实际上可以从 .NET 应用程序中删除所有 DB 代码，只需让它通过 REST（JSON/XML over HTTP）调用请求数据并将数据发送到您的 RoR 站点，在内部执行所有 DB IO。

# bash - 在 ssh 中将参数传递给远程 shell

> ID：15125459
> 
> 赞同：2
> 
> 时间：2013-02-28T00:46:49.640
> 
> 标签：bash, ssh

例如：

```
ssh localhost echo *([^.]) 
```

要求我将 -O extglob 传递给远程 shell bash，如下所示：

```
ssh localhost -O extglob echo *([^.]) 
```

但是，ssh 然后认为 -O 是为自己的，所以我再试一次：

```
ssh localhost -- -O extglob echo *([^.]) 
```

但随后 bash 认为 -- 是为了它自己。

如何通过 ssh 将 -O extglob 传递给 bash？

谢谢。

更新：我不希望 ssh 要求 bash 启动另一个 bash：

```
ssh yourserver bash -O extglob -c "'echo *([^.])'" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:52:05.710

更新：正如评论中提到的，extglob 将导致语法错误。我通过将命令传送到标准输入来管理它：

```
ssh yourserver -- bash -O extglob <<'EOF'
echo *([^.])
EOF 
```

* * *

我会远程启动一个附加的shell。像这样：

```
ssh yourserver bash -O extglob -c 'ls -al' 
```

*尽管在此*示例中不需要它，但我建议您`--`在 ssh 参数之后使用（如您所述）：

```
ssh yourserver -- bash -O extglob -c 'ls -al' 
```

这将阻止 ssh 解析命令以作为参数远程执行。

* * *

但是您也可以使用`shopt`内置的 bash 将选项传递给 shell ssh 本身为您启动。请注意，`;`将两个命令分开。

```
ssh yourserver -- 'shopt -s extglob; ls -al' 
```

# objective-c - 使用 OpenGL ES 2.0 iOS 进行裁剪（对比使用 Core Image）

> ID：15125461
> 
> 赞同：3
> 
> 时间：2013-02-28T00:46:57.373
> 
> 标签：objective-c, cocoa-touch, opengl-es, avfoundation, core-image

我很难找到有关在 iPhone 或 iPad 上使用 OpenGL ES 裁剪图像的任何文档。

具体来说，我正在以较快的速度（20 FPS）捕获视频帧，并且需要快速裁剪图​​像的东西。在这里使用OpenGL可行吗？如果是这样，它会比使用 Core Image 及其相关方法进行裁剪更快吗？

似乎使用 Core Image 方法，我无法实现超过 10-12 FPS 输出的速度，我正在寻找一种达到 20 的方法。关于使用 OpenGL 的任何建议或指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:42:26.267

显然，使用 OpenGL ES 会比 Core Image Framework 更快。裁剪图像将通过设置纹理坐标来完成，一般来说，纹理坐标总是这样，

```
{
0.0f,1.0f,
1.0f,1.0f,
0.0f,0.0f,
1.0f.0.0f
} 
```

整个图像将使用上面的纹理坐标绘制。如果你只想要图像的右上角，你可以像这样设置纹理坐标，

```
{
0.5f,1.0f,
1.0f,1.0f,
0.5f,0.5f,
1.0f.0.5f
} 
```

这将在右上角获得整个图像的四分之一。你永远不会忘记 OpenGL ES 的坐标原点在左下角

# python - 在 Python-RQ 中减少机器上的工人数量？

> ID：15125464
> 
> 赞同：4
> 
> 时间：2013-02-28T00:47:17.390
> 
> 标签：python, redis, python-rq

在 Python-RQ 中减少机器上工作人员数量的好方法是什么？

[根据文档](http://python-rq.org/docs/workers/)，我需要向机器上的一个工作进程发送一个 SIGINT 或 SIGTERM 命令：

> ### 打倒工人
> 
> 如果在任何时候，worker 收到`SIGINT`(via `Ctrl+C`) 或`SIGTERM`(via `kill`)，worker 会等到当前运行的任务完成，停止工作循环并优雅地注册自己的死亡。
> 
> 如果在此删除阶段`SIGINT`或`SIGTERM`再次收到，worker 将强制终止子进程（发送它`SIGKILL`），但仍会尝试注册自己的死亡。

这似乎意味着大量的编码开销：

*   需要跟踪工作进程的 PID
*   需要有一种从远程机器发送 SIGINT 命令的方法

我真的需要自定义构建这个吗，或者有没有办法使用 Python-RQ 库或其他一些现有的库轻松地做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T09:12:57.537

1.  让所有正在运行的工作人员使用`rq.Worker.all()`
2.  选择你想杀死的工人
3.  采用`os.kill(worker.pid, signal.SIGINT)`

# python - Python 正则表达式和版权符号

> ID：15125465
> 
> 赞同：8
> 
> 时间：2013-02-28T00:47:24.090
> 
> 标签：python, regex, text, utf-8

## 编辑

有趣的故事，我在搜索之前清理了文本，我清理过程的一部分是删除所有这些符号。因此，我使用的正则表达式工作得很好:) 无论如何，谢谢大家的帮助！

## 原来的

我正在尝试使用 python 和正则表达式在 UTF8 文本文档中检测版权符号 ©。我遇到的问题是我不知道如何在正则表达式中表示版权符号。

我还将寻找 TM 和 (R)，因此这些也将不胜感激，尽管我怀疑一旦我拥有 (C)，就很容易确定其他人。

我一直在谷歌上勇敢地寻找答案，但还没有找到任何有效的方法。

如果有一些明亮的火花可以告诉我，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T00:53:59.030

您可以将文本转换为 unicode 并使用 unicode 正则表达式模式。

这些是您提到的三个符号：

```
In [213]: print(u'\N{COPYRIGHT SIGN} \N{TRADE MARK SIGN} \N{REGISTERED SIGN}')
© ™ ® 
```

这是一些 utf-8 编码字符串：

```
In [223]: content = u'\N{TRADE MARK SIGN}'.encode('utf-8') 
```

在这里，我们将其转换为 unicode：

```
In [224]: text = content.decode('utf-8') 
```

这是对三个符号中任何一个的正则表达式搜索：

```
In [225]: re.search(u'(\N{COPYRIGHT SIGN}|\N{TRADE MARK SIGN}|\N{REGISTERED SIGN})', text)
Out[225]: <_sre.SRE_Match at 0x9a1ebe0> 
```

* * *

有些[网页](http://unicode-table.com/en/#control-character) [对每个](http://en.wikipedia.org/wiki/List_of_Unicode_characters) [unicode](http://www.unicode.org/charts/)字符进行了分类。但是分配的 unicode 码位有几十万个，所以通过手动浏览来搜索字符是不可行的。

因此，我编写了下面的程序来按名称搜索 unicode。

```
import sys
import unicodedata as ud
import re
import argparse
import functools

__usage__ = '''\
unicode_lookup.py -u '\d'    # Shows all unicode symbols that regex match '\d'
unicode_lookup.py number     # Shows all unicode symbols whose name regex matches 'number'
'''

def lookup(name_pat=None, from_num=0, to_num=0x10ffff, unicode_pattern=None,
           category_pattern=None, ignore_unnamed=True,
           combining=False):
    fmt = u"{symbol} {num} {cat} {bi} {w} {comb} {mir} '{name}'"
    print(fmt.format(
        symbol='Symbol', num='Num', name='NAME',
        cat='Category', bi='Bidirectional', w='Width',
        comb='Combining', mir='Mirrored'))
    for num in range(from_num, to_num + 1):
        s = unichr(num)
        if unicode_pattern and not unicode_pattern.match(s):
            continue
        category = ud.category(s)
        if category_pattern and not category_pattern.match(category):
            continue
        try:
            name = ud.name(s)
            if name_pat and not name_pat.search(name):
                continue
        except ValueError:
            if ignore_unnamed:
                continue
            else:
                name = '?'
        bidirectional = ud.bidirectional(s)
        combining_class = ud.combining(s)
        if combining and not combining_class:
            continue
        mirrored = ud.mirrored(s)
        width = ud.east_asian_width(s)
        data = dict(num=num, symbol=s, name=name,
                    cat=category, bi=bidirectional, w=width,
                    comb=combining_class, mir=mirrored)
        print(fmt.format(**data).encode('utf-8'))

def parse_options():
    parser = argparse.ArgumentParser(
        epilog=__usage__,
        formatter_class=argparse.RawDescriptionHelpFormatter)
    parser.add_argument('name_pat',
                        type=functools.partial(re.compile, flags=re.IGNORECASE))
    parser.add_argument('-f', '--from_num', default=0, type=int)
    parser.add_argument('-t', '--to_num', default=0x10ffff, type=int)
    parser.add_argument('-u', '--unicode_pattern',
                        type=functools.partial(re.compile, flags=re.UNICODE))
    parser.add_argument('--category_pattern', type=re.compile)
    parser.add_argument('--show_unnamed', action='store_true')
    parser.add_argument('--combining', action='store_true')
    return parser.parse_args()

if __name__ == '__main__':
    opt = parse_options()
    lookup(name_pat=opt.name_pat, from_num=opt.from_num, to_num=opt.to_num,
           unicode_pattern=opt.unicode_pattern,
           category_pattern=opt.category_pattern,
           ignore_unnamed=not opt.show_unnamed,
           combining=opt.combining) 
```

跑步

```
% unicode_lookup.py "copyright|trade|registered" 
```

产量

```
Symbol Num Category Bidirectional Width Combining Mirrored 'NAME'
© 169 So ON N 0 0 'COPYRIGHT SIGN'
® 174 So ON A 0 0 'REGISTERED SIGN'
℗ 8471 So ON N 0 0 'SOUND RECORDING COPYRIGHT'
™ 8482 So ON A 0 0 'TRADE MARK SIGN' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T00:59:58.813

你在寻找这样的东西吗？

```
import re

text = 'StackOverflow® © 2013 - A great place to code™'
for m in re.finditer(r"[©®™]", text):
    print '%02d-%02d: %s' % (m.start(), m.end(), m.group(0)) 
```

这个的输出是：

```
13-14: ®
15-16: ©
45-46: ™ 
```

# coldfusion - 在 Win2k8 R2 x64 上的 ColdFusion 10 中处理 404 错误时出现问题？

> ID：15125471
> 
> 赞同：3
> 
> 时间：2013-02-28T00:48:10.377
> 
> 标签：coldfusion, iis-7.5, http-status-code-404, coldfusion-10, custom-error-handling

我在使用 IIS 中的自定义错误处理程序（执行 URL）在 Windows 2008 R2 x64 上的 ColdFusion 10 中正确处理 404 错误时遇到了困难。我已经在以前版本的 CF 中做到了这一点，没有任何问题。在 IIS 中，在网站功能下，我打开“错误页面”并将其设置为对所有 404 错误执行“/404.cfm”。

我遇到的问题是 404.cfm 页面的输出没有完全发送回浏览器，并且页面没有正确加载。有时我一无所获，有时我得到 1K，有时我得到更多。这是非常不一致的。

除了在 IIS 中设置 404.cfm 处理程序外，我还在 Application.cfm 中的 onMissingTemplate() 方法中调用它：

```
<cffunction name="onMissingTemplate"
    returnType="boolean"
    output="true">

    <cfargument name="thePage" type="string" required="true">

    <cftry>

        <cfmodule template="../../../404.cfm" thePage="#Arguments.thePage#">

        <cfcatch>
            <cfoutput><p>An error occurred</p></cfoutput>
        </cfcatch>

    </cftry>

    <cfreturn true />
</cffunction> 
```

在我的**404.cfm**错误处理程序中，我正在调用：

```
<cfheader statuscode="404" statustext="Not Found"> 
```

...然后我输出一堆东西。

当我在 404.cfm 中删除对 cfheader 的调用时，错误处理程序会正确加载 [for ColdFusion requests]。那是因为没有任何东西通过 IIS - 相反，它只是通过 ColdFusion 中的 onMissingTemplate() 方法。但是，响应头给了我一个 200 状态码，这是一个问题！出于显而易见的原因，它需要是 404 状态码。

当我包含 cfheader 调用**或**请求非 ColdFusion 页面时（IIS 将生成 404 状态代码），我的 404.cfm 处理程序的输出未完全返回到浏览器。我认为这与 IIS 采取行动有关。

我确实在 CF 错误数据库中报告了这一点，但我想知道我是否做错了什么。错误在这里：[https ://bugbase.adobe.com/index.cfm?event=bug&id=3488063](https://bugbase.adobe.com/index.cfm?event=bug&id=3488063)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-13T03:25:24.123

这个错误确实最终在 CF10 中修复，更新 11。请参阅[http://blogs.coldfusion.com/post.cfm/coldfusion-10-update-11-an-update-with-50-fixes](http://blogs.coldfusion.com/post.cfm/coldfusion-10-update-11-an-update-with-50-fixes)。它只是顺便提到它（“8\. Web Container/Tomcat - CGI.server_port, IIS custom error handlers”），但它就在那里。

并且上面引用的错误报告也已更新，表明它已通过此更新修复。

但是让我提出一个警告：有些人说（在错误报告中）他们发现即使在应用更新之后问题也没有解决。

有一个很可能的解释：请注意，在应用更新 11 后，您必须更新或重建 IIS 的 Web 连接器。有关更多信息，请参阅[http://blogs.coldfusion.com/post.cfm/coldfusion-10-does-the-connector-need-to-be-re-installed-for-update-11](http://blogs.coldfusion.com/post.cfm/coldfusion-10-does-the-connector-need-to-be-re-installed-for-update-11)。

更具体地说，如果您查看 Coldfusion10\config\wsconfig[nn\ 文件夹（其中 nn 是一个数字，其中您有多个文件夹），并且您的 isapi_redirect.dll 的日期不是 2013 年 5 月，那么您还没有尚未完成所需的更新 11 并且似乎仍然存在问题。

如果 wsconfig 下有多个这样的文件夹，请务必更新所有连接器。如果在这样做之后，并且可能重新启动 IIS，如果您仍然遇到问题，那么请在错误报告中报告确认这一点。也许可能还有其他东西可以解释，但我们想先排除这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T00:53:49.933

我已经更新了错误基础错误，但将在这里重新迭代我的解决方法。

我能够通过使用 CFSaveContent 包装 404 处理程序的内容然后强制写入内容长度来解决问题：-

```
<cfsavecontent variable="thePage">
Your 404 code here
</cfsavecontent>
<cfcontent reset="Yes" type="text/html"><cfheader name="Content-Length" value="#len(thePage)#"><cfoutput>#thePage#</cfoutput><cfabort> 
```

注意：我在一行中将 cfcontent 传递到 cfabort，因此没有额外的空格。

CF9 似乎没有设置内容长度标头，但似乎没有什么区别。但是 CF10 ...... Tomcat 不能在 CF 处理结束时添加魔法成分并将其传递回 IIS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T09:36:59.600

我还没有找到更新 11 的工作。即使在连接器更新之后。另一个笨拙的修复：

```
<CFPARAM default="0" name="URL.r">
<CFPARAM default="0" name="URL.t">
<CFSET ErrUrl = "/cfm/global/404error.cfm">
<CFIF URL.r IS 0>
<CFIF FindNoCase( ".htm", CGI.HTTP_REFERER ) GT 0>
    <CFLOCATION url="#ErrUrl#?r=1&t=htm">
</CFIF>
<CFIF FindNoCase( ".cfm", CGI.HTTP_REFERER ) GT 0>
    <CFLOCATION url="#ErrUrl#?r=1&t=cfm">
</CFIF>
    <CFLOCATION url="#ErrUrl#?r=1"> 
</CFIF>
<CFIF URL.t IS "htm">
    <CFHEADER statuscode="404" statustext="Page Not Found">
</CFIF> 
```

放置在错误页面的顶部（将 ErrUrl 更改为指向错误页面）适用于 CFM 和 HTM(L) 页面。这很恶心，但似乎有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T04:26:21.473

修复我在反复试验后想出的问题是在您在 iis7 中路径到的 custom404.cfm 中输入以下代码

```
<cfinclude template="/inc_mypathtoroot/my404.cfm">
<cfheader name="Connection" value="Close"> 
```

然后在根目录中创建文件 my404.cfm（包含的路径需要是您的包含路径）

在 my404.cfm 文件中放置您的处理代码。但不要在该文件中的任何位置使用 <CFABORT>，因为它会导致连接被重置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-16T16:41:10.503

在我的 404 处理程序中，我添加了：

```
<cfheader statuscode="404" statustext="Not Found">
<cfheader name="Connection" value="Close"> <!--- this is the fix! ---> 
```

出于某种原因，关闭连接似乎有效。

为了输出页面，我正在做：

```
<cfcontent reset="Yes" type="text/html">
<cfheader name="Content-Length" value="#Len(fullpage)#">
<cfoutput>#fullpage#</cfoutput> 
```

...其中变量 fullpage 是 404 处理程序的内容。

现在，我现在可以始终返回 404 状态代码错误和错误页面的全部内容。但是，当请求非 ColdFusion 页面时，CGI 值不正确。在 CF10 之前，我可以通过查看 CGI 参数，特别是 CGI.query_string 来获取请求的页面，它曾经看起来像：“404; [http://www.example.com/some/file.html](http://www.example.com/some/file.html) “现在我得到：”404；[http://www.example.com/jakarta/isapi_redirect.dll](http://www.example.com/jakarta/isapi_redirect.dll) ”，这使得无法获取请求的页面。

然而，我现在可以返回整个文档的事实使得这至少是解决该错误的部分解决方法，该错误仍然是开放的（在 CF10 发布一年多之后）！现在，我没有试图找出请求的页面并查看我的站点地图，而是简单地输出一个标准的“找不到页面”错误。

我还应该提到，我在 Application.cfc 的 onMissingTemplate 方法中使用了相同的 404 处理程序。请求的页面被传递到此方法中，然后我将其传递给 Attribute 范围内的 404 处理程序，并将我的 404 处理程序称为 cfmodule。因此，当请求的是 ColdFusion 页面时，这是一个完整的解决方案，而当请求的是非 CF 页面时，这只是部分解决方案（因为我们无法确定请求的文件）。

# php - Magento 以访客身份结账时通过 url 或会话自动填写帐单地址表格

> ID：15125474
> 
> 赞同：1
> 
> 时间：2013-02-28T00:48:35.437
> 
> 标签：php, magento, zend-form

**情况**：以访客身份结帐（数据库中没有客户帐单地址）。

**问题**：如何使用来自 url 或 session 的变量自动填写帐单地址表？

对我来说完美的解决方案是：

1.  尽可能少地改变，例如在这个文件中

    > app/design/frontend/default/my_theme_name/template/persistent/checkout/onepage/billing.phtml

2.  并以这种方式访问​​变量

    > $this->getAddress()->getName();

我的临时解决方案：

```
/* array comes from url or session */

$myAddress = array (
    'firstname' => 'John',
    'lastname' => 'Smith',
    'street' => array (
        '0' => '1st Street',
        '1' => '2056',
    ),
    'city' => 'Maspeth',
    'region_id' => '',
    'region' => '',
    'postcode' => 'NY11378',
    'country_id' => 'US',
    'telephone' => '0017183209872'
    );

$customAddress = Mage::getModel('customer/address');
$customAddress->setData($myAddress);

/* $this = Mage_Checkout_Block_Onepage_Billing */

$this
    ->setBillingAddress(Mage::getSingleton('sales/quote_address')
    ->importCustomerAddress($customAddress));

/* insert value into input field */

echo $this->getBillingAddress()->getName(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:25:01.800

```
$this
->setBillingAddress(Mage::getSingleton('sales/quote_address')
->importCustomerAddress($customAddress)); 
```

不要`"$this"`在这里使用它必须是一个报价对象（`Mage_Sales_Model_Quote`）而不是一个计费块（`Mage_Checkout_Block_Onepage_Billing`）。使用`$this->getQuote()`.

# c++ - 带有引用和指针的 C++ 构造函数？

> ID：15125479
> 
> 赞同：0
> 
> 时间：2013-02-28T00:49:20.707
> 
> 标签：c++, pointers, reference, constructor, copy-constructor

我找到了这个示例面试问题，并希望得到一些帮助来理解它：

```
#include <iostream>

class A
{
public:
    A(int n = 0)
        : m_n(n)
    {
        ++m_ctor1_calls;
    }

    A(const A& a)
        : m_n(a.m_n)
    {
        ++m_copy_ctor_calls;
    }

public:
    static int m_ctor1_calls;
    static int m_copy_ctor_calls;

private:
    int m_n;
};

int A::m_ctor1_calls = 0;
int A::m_copy_ctor_calls = 0;

void f(const A &a1, const A &a2 = A())
{
}

int main()
{
    A a(2), b = 5;
    const A c(a), &d = c, e = b;
    std::cout << A::m_ctor1_calls << A::m_copy_ctor_calls;
    b = d;
    A *p = new A(c), *q = &a;
    std::cout << A::m_copy_ctor_calls;
    delete p;
    f(3);
    std::cout << A::m_ctor1_calls << A::m_copy_ctor_calls << std::endl;

    return 0;
} 
```

按照我的理解，main 的第一行创建了两个新对象，导致对构造函数的 2 次调用。在第二行中，我看到他们使用 c(a) 和 e = b 的复制构造函数。复制构造函数不用于 &d = c 因为它只引用 c 对吗？还有一件事我不明白的是，如果复制构造函数需要引用，那么如何将对象传递给它而不是对对象的引用？带指针之后的部分让我很困惑。有人可以提供一些见解吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:24:24.237

> 复制构造函数不用于 &d = c 因为它只引用 c 对吗？

是的。d 成为 c 的别名。

> 还有一件事我不明白的是，如果复制构造函数需要引用，那么如何将对象传递给它而不是对对象的引用？

传递给接受引用的函数的对象会自动“转换”为引用。该参数现在是传入对象的别名。

> 带指针之后的部分让我很困惑。有人可以提供一些见解吗？

p 指向一个新分配的 A 对象，从 c 复制而来。q 指向 a。（1个复制构造函数）。然后删除 p。

f(3) 变得有趣。它构造一个用 3 初始化的临时 A 来绑定到 a1。a2 得到一个临时默认构造的 A。在 f(3) 完成后，这两个临时对象被销毁。

函数结束，A 的剩余实例被销毁。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T01:04:33.830

在面试之外，您可以将此代码粘贴到 IDE 中，并使用调试器逐步完成。

如果您想知道，这里是输出（添加了空格）：2 2 3 4 3

# vbscript - 从 wscript.exe 进程获取脚本名称

> ID：15125480
> 
> 赞同：2
> 
> 时间：2013-02-28T00:49:32.263
> 
> 标签：vbscript

我正在使用这段代码：

```
Dim name
name = CreateObject("WScript.Shell").ExpandEnvironmentStrings("%computername%")
Set wmi = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" _ 
    & name & "\root\cimv2")
For Each hwnd In wmi.InstancesOf("Win32_Process")
    If hwnd.Name = "wscript.exe" Then
        'get name and possibly location of currently running script
    End If
Next 
```

我成功地列出了所有进程并选择了`wscript.exe`. 但是，我已经搜索并没有找到在 中运行的脚本的名称`wscript.exe`，即。是它`myscript.vbs`还是`jscript.js`什么。如果有办法找到脚本的整个路径，则可以加分。

**编辑：**

通过更多搜索，我找到了解决方案。在上面的脚本中，`hwnd`变量存储了`wscript.exe`进程的句柄。句柄有一个属性：`hwnd.CommandLine`。它显示了如何从命令行调用它，所以它会是这样的：

```
"C:\Windows\System32\wscript.exe" "C:\path\to\script.vbs" 
```

所以我可以解析`hwnd.CommandLine`字符串以找到所有正在运行的脚本的路径和名称。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T07:19:31.257

你有`ScriptName`和`ScriptFullName`属性。

```
' in VBScript
WScript.Echo WScript.ScriptName
WScript.Echo WScript.ScriptFullName

// in JScript
WScript.Echo(WScript.ScriptName);
WScript.Echo(WScript.ScriptFullName); 
```

[编辑] 给你（使用`.CommandLine`属性）：

```
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" _
    & "." & "\root\cimv2")

Set colProcesses = objWMIService.ExecQuery( _
    "Select * from Win32_Process " _
    & "Where Name = 'WScript.exe'", , 48)

Dim strReport
For Each objProcess in colProcesses
    ' skip current script, and display the rest
    If InStr (objProcess.CommandLine, WScript.ScriptName) = 0 Then
        strReport = strReport & vbNewLine & vbNewLine & _
            "ProcessId: " & objProcess.ProcessId & vbNewLine & _
            "ParentProcessId: " & objProcess.ParentProcessId & _
            vbNewLine & "CommandLine: " & objProcess.CommandLine & _
            vbNewLine & "Caption: " & objProcess.Caption & _
            vbNewLine & "ExecutablePath: " & objProcess.ExecutablePath
    End If
Next
WScript.Echo strReport 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-10T05:56:24.887

```
myProcess="wscript.exe"               
Set Processes = GetObject("winmgmts:").InstancesOf("Win32_Process")
For Each Process In Processes
 If StrComp(Process.Name, myProcess, vbTextCompare) = 0 Then     'check if process exist      
   CmdLine=process.commandline                  
 End If
Next
myArr=split(CmdLine,"\")
mySN=replace(myArr(ubound(myArr)),"""","")
Wscript.Echo "Full Pth: " & Cmdline &vbcrlf&"Script Name: "& mySN 
```

# html - 动态输入框中的字符数

> ID：15125482
> 
> 赞同：0
> 
> 时间：2013-02-28T00:49:41.547
> 
> 标签：html, css, pixel

我有一个特殊的数学问题。我正在使用支持多种设备的 HTML/CSS/JS 开发一个混合移动应用程序。为此我没有指定输入框的宽度。

现在我需要截断输入框中的文本，但由于未指定宽度，我无法将文本字段的长度与硬编码值进行比较。但是，我可以获得输入框的长度（以 px 为单位）并且我使用的字体大小是固定的（10 px） 有没有一种方法可以计算 Xpx by Ypx 输入框中可以容纳多少个 14px 字体大小的字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:05:09.037

我过去实现这一目标的方式可能效率不高，但它确实有效（差不多）。

这里的关键是克隆您的文本并开始对其进行更改。您可以使用 javascript 即时进行克隆。将它放在页面外的不可见 div 中，然后将文本分成单个字符块。然后可以将这些字符中的每一个都包装在一个跨度中。

下一步是确保您知道输入框的宽度，并开始将跨度的宽度相加，从前面开始。这应该只是在您的自定义“屏幕外”div 中获取所有 span 元素并遍历它们的情况。

一旦你点击了魔法宽度数字（或超过它），你就会知道你的单词中可以在框中包含的字符数。

当然，您所描述的内容有一个小问题，那就是您可能还需要计算出您可以在框中容纳多少“行”文本，并相应地修改您的“总宽度”（如果你有 1 行是 100px 宽，你的最大宽度是 100px，但如果它是 3 行深，最大宽度是 300px）。

正如我所说，这可能不是有效的处理器使用......但它是一个解决方案，它不需要你的字体是特定的大小或类型。

# java - 不可修改的 Map 仍然接受添加条目而不返回 UnsupportedOperationException

> ID：15125491
> 
> 赞同：-1
> 
> 时间：2013-02-28T00:51:24.860
> 
> 标签：java, collections, map, unmodifiable

我正在尝试向不可修改的 Map 添加条目，JVM 在将条目添加到原始 Map 的子视图时捕获 UnsupportedOperationException，但 JVM 不关心直接添加到原始视图，代码说明：

```
ConcurrentMap<String, Integer> origView= new ConcurrentHashMap<String, Integer>();
                Map<String,Integer> subView = Collections.unmodifiableMap(origView);
                origView.put("s", 44); // ok
                subView.put("p", 77); // java.lang.UnsupportedOperationException 
```

但是 Collections.unmodifiableSortedMap() 的文档说：

> 尝试修改返回的排序地图，无论是直接的、通过它的集合视图，还是通过它的 subMap、headMap 或 tailMap 视图，都会导致 UnsupportedOperationException。

请伸出援手，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T00:54:08.990

> “尝试修改**返回**的排序图......”

它只会在调用返回时抛出一个`UnsupportedOperationException`不`Map`包括`unmodifiableMap(...)`原始`Map`.

`Map`返回的`unmodifiableMap(...)`与原来的*不同*`Map`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T00:56:35.553

`Collections.unmodifiableMap()`返回原始地图的不可修改视图；**它不会以任何方式改变原始地图**。这意味着原始地图仍然可以修改。如果您尝试修改不可修改的视图，您只会得到一个异常。

# java - 电池百分比

> ID：15125495
> 
> 赞同：0
> 
> 时间：2013-02-28T00:51:41.007
> 
> 标签：java, windows-7, jna, battery

使用 Java JNA Library using [How to get the remaining battery life in a Windows system?](https://stackoverflow.com/questions/3434719/how-to-get-the-remaining-battery-life-in-a-windows-system) 作为参考，我做了一个程序。[不幸的是，http: //msdn.microsoft.com/en-us/library/aa373232.aspx](http://msdn.microsoft.com/en-us/library/aa373232.aspx)中描述的 BatteryLife Percent 函数显示为 -1 或未知。谁能解释一下如何让它知道？我知道这似乎是一个愚蠢的问题，但我似乎无法让它发挥作用。任务栏上的电池图标显示百分比精细，并且由于它也很可能使用相同的功能，我认为 JNA 库可能有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T15:43:55.690

我有同样的问题，这就是我解决它的方法。我使用了与您相同的解决方案，并发现 getFieldOrder() 中的字段顺序很重要，否则您会得到不正确的输出。它必须与您使用的 SYSTEM_POWER_STATUS 结构相同。Reserved1 的位置似乎无关紧要：

```
@Override
protected List getFieldOrder() {
    ArrayList<String> fields = new ArrayList<String>();
    fields.add("ACLineStatus");
    fields.add("BatteryFlag");
    fields.add("BatteryLifePercent");   
    fields.add("BatteryLifeTime");
    fields.add("BatteryFullLifeTime");
    fields.add("Reserved1");
    return fields;
} 
```

# c# - 从 ICollectionView CurrentItem 的属性创建 CollectionViewSource

> ID：15125497
> 
> 赞同：1
> 
> 时间：2013-02-28T00:51:53.373
> 
> 标签：c#, wpf, data-binding, mvvm, collectionviewsource

我正在尝试从 ICollectionView CurrentItem 的属性（相关表 1..Many）在 XAML 中创建 CollectionViewSource，但出现此错误：“System.Windows.Data.BindingListCollectionView”视图不支持排序。

在我的虚拟机中，我有 ICollectionView，它是 UserControls 的 DataContext。

```
public ICollectionView Clients 
```

客户端有 Loans 属性，这是我想绑定到列表框的。如果我只绑定到 CurrentItem 的属性，它就可以工作：

```
ItemsSource="{Binding Clients/Loans}" 
```

但我的问题是排序。我想按属性对贷款进行排序，因此我尝试从该列表中创建一个 CollectionViewSource，但随后出现上述错误。

```
<Grid.Resources>
   <CollectionViewSource Source="{Binding Clients/Loans}" x:Key="loan_cv">
       <CollectionViewSource.SortDescriptions>
          <scm:SortDescription PropertyName="CreatedDate" Direction="Descending" />
       </CollectionViewSource.SortDescriptions>
   </CollectionViewSource>
</Grid.Resources> 
```

这在 XAML 中是否可能而不在 VM 中创建新属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:52:29.490

如果其他人有同样的问题，我只是在 VM 中创建了一个 IEnumerable<> 对象，可以订购。每次当 collectionViewSource 上的 CurrentItem 属性发生变化时，我都会重置 IEnumerable<> 对象。它工作得很好，但是对于大型物体，它可能会很慢..

# html - Twitter Bootstrap 脚手架问题（布局）

> ID：15125502
> 
> 赞同：0
> 
> 时间：2013-02-28T00:52:43.373
> 
> 标签：html, twitter-bootstrap, jsfiddle

我在使用 Twitter 的 Bootstrap 网格布局网站 UI 时遇到了几个问题。

首先，[这是我的 UI 模型的 jsFiddle](http://jsfiddle.net/JvxT3/1/)。

我已经使用 Firebug 探索了 UI 布局，但事情似乎并不正确。我设置了一个居中的 div（不使用 offset*，但实际上通过使用我定义的 centeredDiv 类在页面中保持居中，而不管窗口大小如何），其中包含所有手风琴和`div`内容所在的白色矩形。

手风琴和内容 div 分别是 span2 和 span8 类。所以它们加起来填满了它们父 div 的空间，即 span10 类的 div。

问题如下：

1.  手风琴的背景底部和白色内容矩形的底部没有对齐。
2.  包含教会信息的底部黄色 div 未与白色内容 div 正确对齐。
3.  底部黄色 div 中的文本未水平居中。我需要它。

我真的很感激帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T04:06:30.617

JSfiddle for you [see it in action](http://jsfiddle.net/shail/JvxT3/11/show/)
问题 1：手风琴背景和白色背景没有对齐，因为您为手风琴设置了错误的高度，它必须是`height:661px`。

问题2：可以通过修改您排列列的方式来解决。在主行内和内容 div 之后使用页脚。

```
<!--Menu and Content-->

<div class="row" id="rowEntirePage">
 <div class="span10 centeredDiv" id="divContentStage">
  <div class="row" id="rowContentStage"> 
  <!--Menu-->
   <div class="span2 accordion" id="menuAccordion"> 
    <!--MINISTRIES-->
    <div class="accordion-group">
      <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2"
                    href="#collapseOne"> MINISTRIES </a> </div>
      <div id="collapseOne" class="accordion-body collapse in">
        <div class="accordion-inner">
          <ul class="nav nav-pills nav-stacked">
            <li class="active"><a href="#">WORSHIP</a> </li>
            <li><a href="#">CHILDREN</a> </li>
            <li><a href="#">YOUTH</a> </li>
            <li><a href="#">WOMEN</a> </li>
            <li><a href="#">DISCIPLESHIP</a> </li>
            <li><a href="#">MEDIA/TECH</a> </li>
          </ul>
        </div>
      </div>
    </div>
    <!--About Us -->
    <div class="accordion-group">
      <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2"
                    href="#collapseTwo"> ABOUT US </a> </div>
    </div>
    <!--THE TEAM -->
    <div class="accordion-group">
      <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2"
                    href="#collapseTwo"> THE TEAM </a> </div>
    </div>
    <!--EVENTS -->
    <div class="accordion-group">
      <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2"
                    href="#collapseTwo"> EVENTS </a> </div>
    </div>
    <!--SMALL GROUPS-->
    <div class="accordion-group">
      <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2"
                    href="#collapseTwo"> SMALL GROUPS </a> </div>
    </div>
    <!--MEDIA CENTER-->
    <div class="accordion-group">
      <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2"
                    href="#collapseTwo"> MEDIA CENTER </a> </div>
    </div>
    <!--BLOG -->
    <div class="accordion-group">
      <div class="accordion-heading"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2"
                    href="#collapseTwo"> BLOG </a> </div>
    </div>
  </div>
  <!--Content-->
  <div class="span8" id="divContent"></div>
  <!--Contact Info-->
  <div id="rowContactInfo" class="span8">
    <div id="divContactInfo">
      <p id="paragraphContactInfo">Church Name / Address / Town, State Zip Code Phone # / <a>Email Us</a> <br>
        <a>Maps&amp; Directions</a> </p>
    </div>
  </div>
</div> 
```

并为联系人 div 指定以下属性：

```
#rowContactInfo {
background: linear-gradient(#F4D987, #FFFFFF) repeat scroll 0 0 transparent;
color: #FF0000;
height: 75px;
margin: 0;
border-bottom-left-radius: 10px;
border-bottom-right-radius: 10px;
vertical-align: top;
} 
```

问题 3：我没有看到任何问题。你能给我看一张你想要的照片吗？

**更新：**问题 3：请正确编写样式并格式化您的页脚列表。与当前的表示形式一样，它只是 text 。

提示：如果在调整大小时有任何内容不对齐，可能是因为您必须按照以下方式为自定义样式编写媒体查询以获得不同的分辨率：

```
@media (min-width: 768px) and (max-width: 979px) {

 }
 @media (max-width: 767px) {

    }
  @media (max-width: 480px) {

   } 
```

只需为在所需分辨率下看起来不太好的特定部分添加自定义样式

# python - 杀死一个 Python 线程

> ID：15125506
> 
> 赞同：0
> 
> 时间：2013-02-28T00:53:16.247
> 
> 标签：python, multithreading, terminate

正如标题所暗示的，我如何从创建它的主线程中杀死一个 python 线程？我目前正在与我的主线程分开的线程（比如线程 2）中运行第 3 方代码，有时他们的代码只是遇到了一个无限循环，该循环以一揽子 try/except 语句为界。这意味着我不能简单地在线程 2 中引发异常来停止它。此外，我无法修改第 3 方代码以使他们的代码对线程更友好。根据堆栈溢出的许多问题，我理解杀死线程通常是一种不好的模式，但我相信这是当前情况下的最佳解决方案。

# ios - “将二进制文件与库链接”是什么意思？

> ID：15125514
> 
> 赞同：1
> 
> 时间：2013-02-28T00:54:05.290
> 
> 标签：ios, objective-c, xcode

当您告诉您的项目将二进制文件与库链接时，我很难理解究竟发生了什么。我知道需要在您的项目中包含一个框架，但是任何人都可以了解幕后发生的事情吗？我真正从中得到的只是项目现在可以访问框架的头文件。

任何帮助是极大的赞赏！

谢谢！

# c# - 通过在 C# 中重复初始值来扩展和填充数组？

> ID：15125519
> 
> 赞同：-3
> 
> 时间：2013-02-28T00:54:25.713
> 
> 标签：c#, .net, arrays

如果我有一个数组 1：1、21、30

当前大小为 3

如果我想将数组扩展为大小 n，并通过重复初始数组中的值来填充额外的索引，我该如何在 C# 中做到这一点？

例如，假设 n = 8，输出应该是一个值为 1、21、30、1、21、30、1、21 的数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:58:07.897

完全未经测试，但这应该让你开始：

```
int initialSize = myArr.Length
Array.Resize(ref myArr, 8);
for(int i = initialSize;i< myArr.Length; i++)
{
   myArr[i] = myArr[ i % initialSize ];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:01:37.127

如果您使用模数，您可以在构建最终数组时在初始数组中找到正确的元素。

```
const int[] patternArray = { 1, 21 , 30 };

int[] array = new int[n];  
for (int i = 0; i < n; i++){
    int patternIdx = i % 3;
    array[I] = patternArray[patternIdx];
} 
```

注意：我在我的手机上写了这个，所以对任何小的语法问题表示歉意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T00:58:30.380

使用泛型`List<T>`来存储您的数组以允许它根据需要增长。您可以使用其[AddRange()](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx)方法添加多个值。

# haskell - 高阶函数中的存在类型

> ID：15125522
> 
> 赞同：10
> 
> 时间：2013-02-28T00:54:32.393
> 
> 标签：haskell, existential-type

我有一个函数，它的工作是计算一些类型的最佳值`a`wrt 一些类型的值函数`a -> v`

```
type OptiF a v = (a -> v) -> a 
```

然后我有一个容器想要将这样的函数与另一个使用值的函数一起存储：

```
data Container a = forall v. (Ord v) => Cons (OptiF a v) (a -> Int) 
```

这个想法是，任何实现类型函数的人`OptiF a v`都不应该被它的细节所困扰，`v`除非它是`Ord`.

所以我写了一个函数，它接受这样一个值函数和一个容器。使用`OptiF a v`它应该计算出最佳值 wrt`val`并将其插入容器的`result`函数中：

```
optimize :: (forall v. (Ord v) => a -> v) -> Container a -> Int
optimize val (Cons opti result) = result (opti val) 
```

到目前为止一切顺利，但我不能打电话`optimize`，因为

```
callOptimize :: Int
callOptimize = optimize val cont
   where val = (*3)
         opti val' = if val' 1 > val' 0 then 100 else -100
         cont = Cons opti (*2) 
```

不编译：

```
Could not deduce (v ~ Int)
from the context (Ord v)
  bound by a type expected by the context: Ord v => Int -> v
  at bla.hs:12:16-32
  `v' is a rigid type variable bound by
      a type expected by the context: Ord v => Int -> v at bla.hs:12:16
Expected type: Int
  Actual type: Int
Expected type: Int -> v
  Actual type: Int -> Int
In the first argument of `optimize', namely `val'
In the expression: optimize val cont 
```

第 12:16-32 行在哪里`optimize val cont`。

在这种情况下，我是否误解了存在类型？`forall v`声明中的`optimize`意思是否可以`optimize`期望得到它想要的`a -> v`任何东西？`v`或者这是否意味着除此之外`optimize`可能没有任何期望？`a -> v``Ord v`

我想要的是`OptiF a v`any 不是固定的`v`，因为我想`a -> v`稍后插入一些。我想施加的唯一约束是`Ord v`. 甚至可以使用存在类型（或其他）来表达类似的东西吗？

我设法通过一个额外的类型类来实现这一点，它提供了`optimize`一个与`OptiF a v`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T02:22:26.233

这是很容易出错的事情。

你所拥有的`optimize`不是*存在*主义的，而是普遍的。

...因为存在主义无论如何都有些过时了，让我们将您的数据重写为 GADT 形式，这样可以更清楚地说明这一点，因为语法与多态函数基本相同：

```
data Container a where
  (:/->) :: Ord v =>                       -- come on, you can't call this `Cons`!
     OptiF a v -> (a->Int) -> Container a 
```

观察`Ord`约束（这意味着这里是`forall v...`）位于类型变量参数化函数签名之外，即*`v`当我们想要构造一个`Container`值*时，我们可以从外部指定一个参数。换句话说，

> 对于所有`v`存在的构造`Ord` **函数**`(:/->) :: OptiF a v -> (a->Int) -> Container a`

这就是“存在类型”这个名字的由来。同样，这类似于普通的多态函数。

另一方面，在签名

```
optimize :: (forall v. (Ord v) => a -> v) -> Container a -> Int 
```

您有一个`forall`内部签名术语本身，这意味着`v`可能采用的具体类型将由被*调用者*,`optimize`内部决定——我们从外部控制的只是它在`Ord`. 没有什么是“存在的”，这就是为什么这个签名实际上不会单独编译`XExistentialQuantification`或`XGADTs`单独编译：

```
<interactive>:37:26:
    Illegal symbol '.' in type
    Perhaps you intended -XRankNTypes or similar flag
    to enable explicit-forall syntax: forall <tvs>. <type> 
```

`val = (*3)`显然不满足`(forall v. (Ord v) => a -> v)`，它实际上需要一个并非所有s 都有的`Num`实例。`Ord`事实上，`optimize`不应该需要 rank2 类型：它应该适用于调用者可能给它的任何`Ord`类型。`v`

```
optimize :: Ord v => (a -> v) -> Container a -> Int 
```

但是，在这种情况下，您的实现不再起作用：因为`(:/->)`它实际上是一个存在构造函数，它只需要包含*任何* `OptiF`函数，对于*某些*未知类型`v1`。因此，optimize 的调用者可以自由选择针对任何特定类型的 opti 函数，以及针对任何其他可能的固定类型优化的函数——这是行不通的！

您想要的解决方案是：*`Container`也不应该是存在的*！opti-function 应该适用于 in 中的任何类型`Ord`，而不仅仅是一种特定类型。好吧，作为 GADT，这看起来与您最初拥有的通用量化签名大致相同`optimize`：

```
data Container a where
  (:/->) :: (forall v. Ord v => OptiF a v) -> (a->Int) -> Container a 
```

现在，优化工作

```
optimize :: Ord v => (a -> v) -> Container a -> Int
optimize val (opti :/-> result) = result (opti val) 
```

并且可以随心所欲地使用

```
callOptimize :: Int
callOptimize = optimize val cont
   where val = (*3)
         opti val' = if val' 1 > val' 0 then 100 else -100
         cont = opti :/-> (*2) 
```

# algorithm - 按总和的顺序生成 k 个元素子集的算法

> ID：15125524
> 
> 赞同：3
> 
> 时间：2013-02-28T00:54:56.010
> 
> 标签：algorithm, sorting, dynamic-programming

如果我有一组未排序的大`n`整数（比如`2^20`它们），并且想生成`k`每个元素的子集（`k`比如小`5`），它们的总和顺序是递增的，那么最有效的方法是什么？

*为什么我需要以这种方式生成这些子集是因为我想找到满足某个条件的最小和的 k 元素子集，因此我会将条件应用于生成的每个 k 元素子集。*

另外，算法的复杂度是多少？

这里有一个类似的问题：[Algorithm to get every possible subset of a list, in order to their product, without building and sort the entire list (ie Generators)](https://stackoverflow.com/questions/5111395/algorithm-to-get-every-possible-subset-of-a-list-in-order-of-their-product-wit) about generate subsets of their product,但它不适合我由于集合的尺寸非常大，因此需要`n`

我打算在 Mathematica 中实现该算法，但也可以在 C++ 或 Python 中实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:07:35.020

你的意思是 20 个整数，还是 2^20？如果它真的是 2^20，那么您可能需要经过大量[（2^20 选择 5）](http://www.wolframalpha.com/input/?i=2%5E20%20choose%205)个子集才能找到满足您条件的子集。在现代 100k MIPS CPU 上，假设只有 1 条指令可以计算一个集合并评估该条件，那么通过整个集合仍然需要[3 万亿年](https://www.google.com/search?q=10%5E28%20/%20100million&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a#hl=en&client=firefox-a&hs=KQa&rls=org.mozilla%3aen-US%3aofficial&sclient=psy-ab&q=1e20%20seconds%20in%20years&oq=1e20%20seconds%20in%20years&gs_l=serp.3...5149.5977.1.6128.4.4.0.0.0.0.74.265.4.4.0.les;..0.0...1c.1.5.psy-ab.PDd5M0iiufQ&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.43148975,d.dmQ&fp=fbf4be04f4283f29&biw=1920&bih=952)。因此，即使您需要经历其中的一小部分，它也不会在您的一生中完成。

即使整数个数更小，这似乎也是解决这个问题的一种相当暴力的方法。我猜想您可能能够将您的条件表达为[混合整数程序](http://en.wikipedia.org/wiki/Integer_programming#Mixed_Integer_and_Zero-one_Linear_Programs)中的约束，在这种情况下，解决以下问题可能是获得解决方案的一种比蛮力枚举更快的方法。假设你的整数是`w_i`, i 从 1 到 N：

```
min sum(i) w_i*x_i
    x_i binary
    sum over x_i = k
subject to (some constraints on w_i*x_i) 
```

如果你的 MIP 的[线性规划松弛](http://en.wikipedia.org/wiki/Linear_programming_relaxation)很紧，那么你会很幸运并且有一个非常有效的方法来解决这个问题，即使是 2^20 整数（例如：[max-flow/min-cut 问题](http://en.wikipedia.org/wiki/Max-flow_min-cut_theorem#Linear_program_formulation)。 ) 此外，您可以使用[列生成](http://en.wikipedia.org/wiki/Column_generation)的方法来找到解决方案，因为您可能有大量无法同时解决的值。

如果您发布更多有关您感兴趣的约束的信息，我或其他人可能能够为您提出一个不涉及蛮力枚举的更具体的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T03:37:05.667

即使 1000 个 k 大小的集合中只有 1 个符合您的条件，那仍然有太多组合无法测试。我相信运行时会随着 nCk（n 选择 k）而扩展，其中 n 是未排序列表的大小。Andrew Mao 的回答与这个值有链接。10^28/1000 仍然是 10^25。即使每秒进行 1000 次测试，这仍然是 10^22 秒。=10^14 年。

如果允许的话，我认为你需要从你的大集合中消除重复的数字。您删除的每个重复项都会大大减少您需要执行的评估次数。对列表进行排序，然后杀死受骗者。

另外，您是否在这里寻找唯一的最佳答案？谁来验证答案，需要多长时间？我建议实施遗传算法并在一夜之间运行一堆实例（只要你有时间）。这将在比宇宙持续时间短得多的时间内产生一个非常好的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T03:40:19.923

如果您想要的小子集的属性（称为它`P`）相当普遍，那么概率方法可能会很好用：

1.  对整数进行排序`n`（对于数百万个整数，即 10 到 100 MB 的内存，这应该不是问题），并求和`k-1`最小的。呼叫此总`offset`。
2.  生成一个随机`k`子集（例如，通过抽样`k`随机数 mod `n`）并检查它的`P`-ness。
3.  在比赛中，记下子集的总和。从中减去`offset`以找到`k`等效总和的任何子集的最大元素的上限。
4.  将您的整数集限制`n`为小于或等于此界限的整数。
5.  重复（转到 2），直到在某个固定次数的迭代中找不到匹配项。

注意初始排序是`O(n log n)`. 步骤 4 中隐含的二分查找是`O(log n)`.

显然，如果`P`这种情况非常罕见，以至于随机投篮不太可能得到匹配，那么这对你没有好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T03:43:35.177

这是执行您所说的大致方法。

首先，对列表进行排序。然后，考虑一些长度为 5 的索引向量`v`，对应于排序列表中的位置，其中最大索引是某个数字`m`，以及一些其他索引向量`v'`，具有一些最大索引`m' > m`。所有这些向量`v'`的最小和总是大于所有向量的最小和`v`。

所以，这里是你如何循环遍历元素，总和近似增加：

```
sort arr

for i = 1 to N
   for v = 5-element subsets of (1, ..., i)
     set = arr{v}
     if condition(set) is satisfied
       break_loop = true
       compute sum(set), keep set if it is the best so far
   break if break_loop 
```

基本上，这意味着您不再需要检查 5 元素组合`(1, ..., n+1)`是否在 中找到令人满意的分配`(1, ..., n)`，因为任何具有最大索引的令人满意的分配`n+1`将具有更大的总和，并且您可以在该集合之后停止。但是，没有简单的方法可以循环遍历`(1, ..., n)`while 的 5 个组合，以保证总和始终在增加，但至少您可以在找到满意的集合后停止检查 some `n`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T03:58:59.877

[这看起来是 map-reduce ( http://en.wikipedia.org/wiki/MapReduce](http://en.wikipedia.org/wiki/MapReduce) )的完美候选。如果您知道任何巧妙地划分它们的方法，以便通过的候选者平等地出现在每个节点中，那么您可能会获得很大的吞吐量。

可能真的不需要完整的排序，因为 map 阶段可以处理它。然后，每个节点都可以根据 k 元组验证条件并将结果输出到一个文件中，该文件可以稍后聚合/减少。

如果您知道发生的概率并且不需要所有结果，请尝试查看概率算法以收敛到答案。

# javascript - 通过重叠的 JS 播放音频

> ID：15125528
> 
> 赞同：8
> 
> 时间：2013-02-28T00:55:20.500
> 
> 标签：javascript, html, audio, html5-canvas, game-engine

我有以下基于画布的游戏的 JS 代码。

```
var EXPLOSION = "sounds/explosion.wav";

function playSound(str, vol) {
  var snd = new Audio();
  snd.src = str;
  snd.volume = vol;
  snd.play();
}

function createExplosion() {
  playSound(EXPLOSION, 0.5);
} 
```

这可行，但是每次调用它都会发送一个服务器请求以下载声音文件。或者，如果我事先声明了 Audio 对象：

```
var snd = new Audio();
snd.src = EXPLOSION;
snd.volume = 0.5;

function createExplosion() {
  snd.play();
} 
```

这可行，但是如果在声音播放完毕之前调用 createExplosion 函数，它根本不会播放声音。这意味着一次只允许播放一次声音文件 - 在发生多次爆炸的情况下，它根本不起作用。

有什么方法可以正确播放与自身重叠的音频文件多次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-04T13:24:20.113

你可以只复制节点`cloneNode()`和`play()`那个复制节点。

我的音频元素如下所示：

```
<audio id="knight-audio" src="knight.ogg" preload="auto"></audio> 
```

我有一个`onClick`听众就是这样做的：

```
function click() {
    const origAudio = document.getElementById("knight-audio");
    const newAudio = origAudio.cloneNode()
    newAudio.play()
} 
```

由于`audio`不会显示元素，因此您实际上不必将节点附加到任何东西。

我在客户端和服务器端验证了 Chrome 只尝试下载一次音频文件。

警告：我不确定性能影响，因为在我的网站上，此剪辑的播放次数不会超过页面最大约 40 倍。如果您正在做比这更大的事情，您可能需要清理音频节点？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:04:27.340

尝试这个：

```
(function() {
    var snds = {};
    window.playSound(str,vol) {
        if( !snds[str]) (snds[str] = new Audio()).src = str;
        snds[str].volume = vol;
        snds[str].play();
    }
})(); 
```

然后第一次调用它时它会获取声音，但之后每次它都会重用相同的声音对象。

* * *

编辑：您还可以预先加载重复项，以允许声音一次播放不止一次：

```
(function() {
    var snds = {}
    window.playSound = function(str,vol) {
        if( !snds[str]) {
            snds[str] = [new Audio()];
            snds[str][0].src = str;
        }
        var snd = snds[str], pointer = 0;
        while( snd[pointer].playing) {
            pointer++;
            if( pointer >= snd.length) {
                snd.push(new Audio());
                snd[pointer].src = str;
            }
        }
        snd[pointer].volume = vol;
        snd[pointer].play();
    };
})(); 
```

请注意，如果您播放与自身重叠的声音过多，这将发送多个请求，但它应该很快返回 Not Modified，并且只有在您播放的次数比以前多时才会这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-18T11:20:25.090

我在我正在构建的俄罗斯方块游戏中寻找这个已经很久了，我认为这个解决方案是最好的。

```
function playSoundMove() {
  var sound = document.getElementById("move");
  sound.load();     
  sound.play();
} 
```

只需将其加载并准备好即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-08T09:01:42.973

在我的游戏中，我正在使用预加载，但是在启动声音之后（根本不预加载或在页面加载时预加载所有内容并不那么聪明，某些游戏中根本没有播放一些声音，为什么要加载它们）

```
const audio {};
audio.dataload = {'entity':false,'entityes':[],'n':0};
audio.dataload.ordernum = function() {
  audio.dataload.n = (audio.dataload.n + 1)%10;
  return audio.dataload.n;
}
audio.dataload.play =  function() {

    audio.dataload.entity = new Audio('/some.mp3');
    for (let i = 0; i<10;i++) {
      audio.dataload.entityes.push(audio.dataload.entity.cloneNode());
    }

    audio.dataload.entityes[audio.dataload.ordernum()].play();

}

audio.dataload.play() // plays sound and preload sounds to memory when it isn't 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-12T11:05:00.733

更多地依赖内存而不是处理时间，我们可以制作一个包含多个音频克隆的数组，然后按顺序播放它们：

```
function gameSnd() {
    t = new Audio('sounds/tick.wav');
    v = new Audio('sounds/victory.wav');
    c = 0;
    ticks = [];

    for (var i = 0; i<10;i++)
        ticks.push(t.cloneNode());

    tick = function(){
        c = (c + 1)%10;
        ticks[c].play();
    }

    victory = function(){
        v.play();
    }
} 
```

# ajax - Rails 3 Endless 页面，will_paginate 与页面上的其他 AJAX

> ID：15125531
> 
> 赞同：1
> 
> 时间：2013-02-28T00:55:41.643
> 
> 标签：ajax, ruby-on-rails-3, twitter-bootstrap, will-paginate

我正在使用 twitter 引导程序和 will_paginate。我有一个带有索引功能的笔记本电脑 MVC，它显示数据库中的所有笔记本电脑。我在页面上还有一个隐藏表单，允许用户输入价格范围，并且仅通过 AJAX 调用显示该价格范围内的笔记本电脑。我正在尝试关注 Railscast 第 114 集（修订版），但代码与价格范围的内容冲突，我不知道如何修复它。下面的代码：

**index.js.erb**

```
 $("#laptops").html("<%= escape_javascript(render(@laptops)) %>");
  $("#laptops").append('<%= j render(@laptops) %>');
  $('.pagination').replaceWith('<%= j will_paginate(@laptops) %>'); 
```

**笔记本电脑.js.coffee**

```
jQuery ->
  if $('.pagination').length
    $(window).scroll ->
      url = $('.pagination .next_page').attr('href')
      if url && $(window).scrollTop() > $(document).height() - $(window).height() - 100
        $('.pagination').text('Fetching more results...')
        $.getScript(url)
    $(window).scroll 
```

**index.html.erb**

```
 <div id="hidden_form">
    <%= form_tag laptops_path, :method => :get, :remote => true do %>

    <%= hidden_field_tag "min_price", params[:min_price] %>
    <%= hidden_field_tag "max_price", params[:max_price] %>
    <%= submit_tag "Get Laptops", class: "btn btn-primary", :name => nil %>

    <% end %>
  </div>

      <div class="laptops" id="laptops">
      <%= render @laptops %> <%#use :locals => ... to send other vars to partial%>
      </div>

      <%= will_paginate %> 
```

**笔记本电脑控制器：**

```
@laptops = Laptops.search(min,max).paginate(page: params[:page], per_page: 10) 
```

# php - 如何压缩一组唯一的自然数并比较两个这样的集合？

> ID：15125535
> 
> 赞同：2
> 
> 时间：2013-02-28T00:56:11.130
> 
> 标签：php, algorithm, search, binary, compression

Web 应用程序比较成对的正整数集。每个集合只有唯一的值，不大于 210 000 000（适合 28 位）。每组最多 5 000 000 个值。

比较集合 A 和 B，需要三个结果集：“A 唯一”、“B 唯一”、“A 和 B 通用”。具体任务是回答一个问题“数字 N 是否存在于集合 S 中？”

到目前为止，该项目在 LAMP 堆栈下的共享主机的有限资源中运行。我想出的 Quick'n'dirty 解决方案是将工作外包给托管的 MySQL，它拥有更多的资源。每个集合的临时表，唯一带有数字的列是主索引。很少有集合足够小以适合引擎=内存，这很快。它可以工作，但是太慢了。

寻找一种将这样的集合保存在内存中的方法，对于在其中搜索特定数字的任务有效。尽可能降低内存占用。

我想到了将每个集合编码为 2^28 位 (32 Mb) 的位掩码的想法。集合中存在的数字 = 1 位集合。500 万个数字 = 2.1 亿个中的 500 万个比特。许多零==可以有效压缩？

好像我在发明一辆自行车。请指导我找到针对这种二进制压缩特殊情况的“众所周知”的解决方案。我读到了霍夫曼编码，这似乎不是正确的解决方案，因为它的重点是减小大小，而我的任务需要对压缩集进行多次搜索。

**更新。**刚刚找到一篇关于[Golomb 编码](http://en.wikipedia.org/wiki/Golomb_coding#Use_for_run-length_encoding)的文章及其[在运行长度编码中的应用示例](http://www.seas.gwu.edu/~ayoussef/cs225/lossless.html#golomb)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:39:46.160

有一种标准的压缩技术可用于表示范围内的大型整数集，它允许有效的迭代（因此它可以轻松地进行交集、并集、集差等）但不允许随机访问（所以它对“在 S 中是 N”）。对于这个特定的问题，它将数据集减少到每个大约 7 位，对于大小为 5,000,000 的集合，这将是大约 8MB。如果它有用，我将在下面描述它。

大小为 210,000,000 位（每个大约 26MB）的位向量在计算上是高效的，既可以回答“S 中的 N”查询，也可以用于位运算，因为您可以使用现代处理器上的向量化指令快速完成它们；它可能与 5,000,000 个元素的交集计算一样快。它消耗大量内存，但如果你有那么多内存，那就去吧。

如果集合是指定大小的均匀分布的随机样本，则压缩技术很简单并且几乎是最佳的，如下所示：

1.  对集合进行排序（或确保已排序）。

2.  将“当前值”设置为 0。

3.  对于集合中的每个元素，按顺序：

    一种。从元素中减去“当前值”；

    湾。虽然该差至少为 32，但输出`1`一位并从差中减去 32；

    C。输出一个`0`位，然后是编码为五位的差异。

    d。将“当前值”设置为比元素多一

为了证明我的说法，即压缩将导致每个元素大约 7 位：

很明显，每个元素将占用 6 位（`0`加上 5 位增量）；此外，我们必须考虑`1`步骤 3b 中的位。但是请注意，所有增量的总和恰好是集合中最大的元素，它不能超过 210,000,000，因此，我们执行步骤 3b 的次数不能超过 210,000,000/32 次。所以步骤 3b。将占不到 700 万位，而步骤 3c 将占 6 * 5,000,000 位，总共 3700 万或每个元素 7.4 位（实际上，通常会比这少一点）。

# javascript - 使用 alertify.js 递归导致自动关闭警报

> ID：15125537
> 
> 赞同：2
> 
> 时间：2013-02-28T00:56:22.200
> 
> 标签：javascript, callback, settimeout, alert, nonblocking

我正在尝试将以下旧学校代码段转换为[alertify.js](http://fabien-d.github.com/alertify.js/) 0.3.8：

```
window.doPrompt = function() {
  var str;
  do str = prompt("Enter your name");
  while (str === "" && (alert("Can't be empty!") || true));
  if (str) document.getElementsByTagName("body")[0].innerHTML += ("<pre>Your name is: " + str + "</pre>");
} 
```

[以上的JSFiddle](http://jsfiddle.net/J2pbZ/)

这是我第一次尝试的：

```
window.doPrompt = function() {
  alertify.prompt(
    "Enter your name", 
    function(confirmed, str) { 
      if (confirmed) { 
        if (str.length === 0) {
          alertify.alert(
            "Can't be empty!", 
            function() { doPrompt(); }
          ); 
        } else {
          document.getElementsByTagName("body")[0].innerHTML += ("<pre>Your name is: " + str + "</pre>");
        }
      }
    }
  );
} 
```

[以上的JSFiddle](http://jsfiddle.net/9vbJm/)

它没有按预期工作。例如，在 Firefox 19 中，如果您使用键盘提交提示为空，“错误”警报只会显示很短的时间，然后会自行消失，这不是以前的工作方式。

我尝试通过在每个 alertify 调用周围插入`window.setTimeout`超时设置来中断递归。`0`它没有帮助。

如果您可以向我推荐一个具有类似 API 的备用 JavaScript 库，我可以使用它来代替（当然没有这个问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:24:26.900

这似乎不是问题`alertify.js`，而是 Firefox。如果您搜索与（根据[消息来源在对话框动画中使用）](https://github.com/fabien-d/alertify.js/blob/0.3.8/src/alertify.js)[相关的错误`transitionend`](https://bugzilla.mozilla.org/buglist.cgi?quicksearch=transitionend)，您将看到您遇到的问题的一些潜在候选者（特别是[“当有多个转换时未触发transitionend 事件”](https://bugzilla.mozilla.org/show_bug.cgi?id=652543)）。这与您所经历的一致 - 如果您尝试显示一个对话框，而另一个对话框仍在原处（即前一个对话框仍在转换中间），那么事情就会中断。

不过，我可以提供一种解决方法。它不漂亮，但可以完成工作。但首先，我在所有浏览器中发现了一个不相关的问题：

1.  `body`如果您将内容附加到;库似乎会变得混乱 使用“目标”`div`来解决问题：

    ```
    <div id="target"></div>
    ...
    document.getElementById("target").innerHTML += ("<pre>Your name is: " + str + "</pre>"); 
    ```

2.  在显示警报和重新显示提示时，您都应该`setTimeout`按照您的建议使用。但是，超时为零是不够的，因为这里的问题出在`transitionend`. 设置一个足够高的值以使上一个对话框完成隐藏并修复问题：

    ```
     setTimeout(function() {
              alertify.alert(
                "Can't be empty!", 
                function() {
                    setTimeout(function() {
                        doPrompt(); 
                    }, 500);
                }
              ); 
            }, 500); 
    ```

    （如果值不够高，它不仅会在 Firefox 上一直损坏，还会损坏 Chrome 等曾经工作的浏览器，所以请记住这一点）

[工作示例](http://jsfiddle.net/mgibsonbr/9vbJm/1/)。在 Firefox 19.0、Chrome 25 和 Safari 4.0.4 中成功测试。

# c# - 指定的包含路径无效。EntityType 'SpiceShop.Models.Product' 未声明名为 'Products' 的导航属性

> ID：15125540
> 
> 赞同：3
> 
> 时间：2013-02-28T00:56:44.373
> 
> 标签：c#, asp.net-mvc, linq

我有包含 2 个表的数据库

```
TABLE Categories (CategoriesId, Name, Description)
TABLE Products (ProductId, CategoriesId, Title, ProductImageUrl) 
```

类别通过 CategoriesId 链接到产品。

我正在尝试使用 LINQ 来获取所有特定的标题。

```
 public ActionResult Browse(string categories)
 {
     var spices = spiceDB.Products.Include("Products").Single(p => p.Title == categories);                 
     return View(spices);
 } 
```

产品型号

```
namespace SpiceShop.Models
{
    public class Product
    {
        [Key]
        public int ProductId { get; set; }

        public int CategoriesId { get; set; }
        public string Title { get; set; }

        public string ProductImageUrl { get; set; }
        public List <Categorie> Name { get; set; }
    }
} 
```

类别型号

```
namespace SpiceShop.Models
{
    public class Categorie
    {
        [Key]
        public int CategoriesId { get; set; }
        public string Name  { get; set; }

        public string Description { get; set; }
        //public List<Product> ProductId { get; set; }
        public List<Product> Products { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T01:00:35.260

只需删除 .Include("Products")，这不是它的使用方式。

错误很明显，您的“产品”模型中没有“产品”属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T01:18:26.077

**编辑：**

看起来您的视图需要一个模型，它是“产品”类型的单个对象。

此外，我尝试为每个标识符/变量指定一个最能传达其含义和意图的名称。

* * *

**编辑2：**

请注意，更改方法上的任何输入参数名称都需要相应更改调用该方法的视图代码。
在 MVC 中，Action-Method 参数是[自动映射](http://msdn.microsoft.com/en-au/library/dd410269%28v=vs.100%29.aspx)的。
您的调试显示了一个 URL `Browse?categories=Sauces`，它自动映射到方法“Browse”，输入参数`categories`设置为“Sauces”。但是（我的版本） Browse 方法需要一个`categoryName`参数，而不是`categories`. 因此，您需要确保 URL 属性和方法参数具有完全相同的名称。

* * *

因此，如果您确实需要将所选类别的名称作为输入参数传递：

```
public ActionResult Browse(string categoryName)
{
    // Gets the CategoryId for the given categoryName, or zero if not found.
    var categoryId = spiceDB.Categories
        .Where(c => c.Name == categoryName)
        .Select(c => c.CategoriesId)
        .FirstOrDefault();

    // Gets the first Product (only) for the specified categoryId.
    var firstProduct = category.Products
        .FirstOrDefault(p => p.CategoriesId == categoryId);

    return View(firstProduct);
} 
```

但是，支持这种类型的“父子”关系的更常见的使用场景是：

*   您的类别列表在单击时按 ID 调用查询，而不是按名称查询（即 3，而不是“Pickles”）
*   您的视图支持所有相关产品，而不仅仅是第一个（即类型的模型`List<Product>`，而不仅仅是`Product`）

例如

```
public ActionResult Browse(int categoryId)
{
    var products = spiceDB.Products
        .Where(p => p.CategoriesId == categoryId) 
        .ToList();

    return View(products);
} 
```

即使您的产品列表更全面，您的数据访问代码更简单、更高效。

# spring-mvc - Spring MVC 中的多次提交

> ID：15125541
> 
> 赞同：1
> 
> 时间：2013-02-28T00:56:46.963
> 
> 标签：spring-mvc

我正在研究 Spring MVC 中的同步器令牌模式。当第一个请求已经提交并且第二个请求已经提交时，我的问题在控制器中，我丢失了我的第一个请求。我实际上想忽略我的第二个请求并继续处理第一个请求，以便向用户显示第一个请求的响应，使用 Struts2 我们可以通过使用 TokenSessionStoreInterceptor 来实现这一点，但我们如何在 Spring MVC 中做到这一点？

# emacs - 如何在覆盖层周围重新定位 Emacs 缓冲区

> ID：15125542
> 
> 赞同：1
> 
> 时间：2013-02-28T00:56:51.153
> 
> 标签：emacs, elisp

我想重新定位 Emacs 缓冲区，以便尽可能多地显示覆盖及其周围的上下文。具体来说，我想要这种行为：

*   如果叠加层适合可见窗口，我想在它之前的行和之后的行中显示一样多；
*   否则，我希望显示覆盖的开头。

这种行为有点类似于我在使用`ediff`.

有没有一种不那么复杂的方法来实现这一目标？我试图研究`ediff`代码（特别是`ediff-util.el`），但对我来说事情似乎很复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T03:33:42.363

我不太确定您在寻找什么用途，但是这段代码应该可以满足您的需求。可以使用叠加层调用它，或者如果以交互方式调用，将选择当前位置的叠加层之一并对其执行操作。

```
(defun make-overlay-visible (overlay)
  "given an overlay, center it on the window
(or make beginning visible if it cannot fit in the window)"
  (interactive (list (car (overlays-at (point)))))
  (when overlay
    (goto-char (overlay-start overlay))
    (recenter 0)
    (when (and (pos-visible-in-window-p (overlay-start overlay))
               (pos-visible-in-window-p (overlay-end overlay)))
      (goto-char (/ (+ (overlay-start overlay) (overlay-end overlay)) 2))
      (recenter)))) 
```

# git - 有没有办法克隆本地 git 存储库及其分阶段和非分阶段更改？

> ID：15125544
> 
> 赞同：0
> 
> 时间：2013-02-28T00:57:09.443
> 
> 标签：git, git-clone

我想编写一个脚本，多次克隆本地 git 存储库，但也将所有未提交的更改复制到克隆的存储库。这可能吗？

看过[git-clone](http://www.kernel.org/pub//software/scm/git/docs/git-clone.html)，但没​​有看到这样的选项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T00:58:41.870

分阶段和非分阶段的更改不是存储库的一部分，所以不，你不能这样做。如果你愿意，你可以只复制带有 repo 和工作副本的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:37:26.237

您是否可以直接访问要克隆的存储库？如果是这样，您只需提交源 repo ( `git add -A`, `git commit -m "non-commited changes"`) 中的所有更改。然后克隆存储库并`git reset HEAD^`在其他存储库中运行。完成克隆后，还可以`git reset HEAD^`在源代码库中运行。

那应该完全符合您的要求。

# ruby-on-rails - Rails - 如何遍历关联对象？

> ID：15125545
> 
> 赞同：0
> 
> 时间：2013-02-28T00:57:09.173
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想在网页上显示一个新颖的对象以及与之相关的每个插图。1.不知道如何正确编写代码来获取小说的相关插图。2\. 我不知道如何正确引用插图对象的属性。3\. 我认为我的错误可能来自无关的东西。

新型号：

```
Class Novel < ActiveRecord::Base
   has_many :illustrations
   attr_accessible :id, :name, :author, :edition, :publisher, :publication_city, :publication_date, :illustrations
   validates :id, uniqueness: true, presence: true
   validates :name, :author, :edition, :publisher, :publication_city, :publication_date,     presence: true
end 
```

插图模型：

```
class Illustration < ActiveRecord::Base
  belongs_to :novel
  attr_accessible :id, :illustrator, :image_url,
  :image_thumbnail_url, :name, :source, :tags,
  :description, :novel_id
  validates :id, uniqueness: true
  validates :name, :source, presence: true
  validates :image_url, 
  format: { with: %r{\.{gif|.jpg|.png}\Z}i, 
  message: 'must be a URL for .gif, .jpg, or .png'}
  validates :image_thumbnail_url, 
  format: { with: %r{\.{gif|.jpg|.png}\Z}i, 
  message: 'must be a URL for .gif, .jpg, or .png'}
  validates :illustrator, :tags, :description, presence: true
 end 
```

小说索引类：

```
<% if notice %>
<p id="notice"><%= notice %></p>
<% end %>

<h1 style="padding-left:25px">Archive Overview</h1>

<% @novels.each do |novel| %>
<%= illustrations = novel.map(&:illustration) %>
<div class="row">
    <div class="span3" style="padding:0px 0px 25px 25px">
        <%= link_to novel.name, novel %>
    </div>
    <div class="span4">
        <p><%= novel.author%></p>
        <p><%= novel.publisher %></p>
        <p><%= novel.publication_date %></p>
    <div class="span5">
        <ul>    
            <% for illustrations.each do |illustration| %>
            <li><%= illustration.name %></li>
            <% end %>
        </ul>
    </div>
    </div>
</div>
<% end %> 
```

我在illustration.each上使用for循环语法的任何组合得到的错误：

```
SyntaxError in Booklist#index

Showing /home/joe/Documents/workspace/archive/app/views/booklist/index.html.erb where line #21 raised:

/home/joe/Documents/workspace/archive/app/views/booklist/index.html.erb:21: syntax error, unexpected '\n', expecting tCOLON2 or '[' or '.'
Extracted source (around line #21):

18:             <ul>    
19:                 <% for illustrations.each do |illustration| %>
20:                 <li><%= illustration.name %></li>
21:                 <% end %>
22:             </ul>
23:         </div>
24:         </div>
Trace of template inclusion: app/views/booklist/index.html.erb

Rails.root: /home/joe/Documents/workspace/archive 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:01:58.547

您`for`很少将其语法与 each 方法混合。你应该这样做

```
<% illustrations.each do |illustration| %>
  <li><%= illustration.name %></li>
<% end %> 
```

# angularjs - AngularJS 中的详细信息表

> ID：15125547
> 
> 赞同：0
> 
> 时间：2013-02-28T00:57:28.460
> 
> 标签：angularjs

我已经在 AngularJS 应用程序中加载了表格数据。我想在表格中显示它们。但我也希望有一些行的详细视图。就像是：

```
<table>
    <tr ng-repeat="datum in data">
        <!-- if datum.showDetail => detail view -->

            <td colspan="N">
                <h1>{{ datum.field1 }} <small>{{ datum.field2 }}</small></h1>
                ...
                <p>{{ datum.fieldN }}</p>
            </td>

        <!-- else => row view -->

            <td>{{ datum.field1 }}</td>
            <td>{{ datum.field2 }}</td>
            ...
            <td>{{ datum.fieldN }}</td>
    </tr>
</table> 
```

Angular 的做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:09:44.070

为什么不向 td 添加`ng-show`和`ng-hide`指令？

```
<table>
    <tr ng-repeat="datum in data" >
        <!-- if datum.showDetail => detail view -->

            <td colspan="N" ng-show="datum.showDetail">
                <h1>{{ datum.field1 }} <small>{{ datum.field2 }}</small></h1>
                ...
                <p>{{ datum.fieldN }}</p>
            </td>

        <!-- else => row view -->

            <td ng-hide="datum.showDetail">{{ datum.field1 }}</td>
            <td ng-hide="datum.showDetail">{{ datum.field2 }}</td>
            ...
            <td ng-hide="datum.showDetail">{{ datum.fieldN }}</td>
    </tr>
</table> 
```

另请注意，如果您使用 Angular UI 扩展，该`ui-if`指令可能更合适，因为它实际上会从表中删除未使用的 td，而不是仅仅隐藏它们，例如`ng-hide`.

# css - Safari 6、FF 19 与 IE 8 中的 CSS

> ID：15125548
> 
> 赞同：0
> 
> 时间：2013-02-28T00:57:35.383
> 
> 标签：css, internet-explorer, firefox, safari

我创建的分页在 FF 19 和 Safari 6 中看起来不错，但在 IE 8 中却很糟糕（见我的截图）。如何让 IE 8 像 FF 一样显示它？

FF 19：

![法拉盛 19](../Images/a1e2dbbd2441ce16d59fe4e90f6bfa7c.png)

即 8：

![即 8](../Images/9620d972cb41eb760e98a2055d7e0a2a.png)

这是我的HTML：

```
<div class="tc_page_top">
    <a title="erste Seite" href="#1"><img src="images/resultset_first_small.png"/></a>
    <a title="vorige Seite" href="#0"><img src="images/resultset_previous_small.png"/></a>
    &emsp;Seite 1 von 7&emsp;
    <a title="nächste Seite" href="#2"><img src="images/resultset_next_small.png"/></a>
    <a title="letzte Seite" href="#7"><img src="images/resultset_last_small.png"/></a>
    &emsp;
    <a  class="on" href="#1">1</a>
    <a href="#2">2</a>
    <a href="#3">3</a>
    <a href="#4">4</a>
    <a href="#5">5</a>
    <a href="#6">6</a>
    <a href="#7">7</a>
</div> 
```

和 CSS：

```
#tc_frame {
    background-color: #FFFFFF;
    border: thin solid #666666;
    border-radius: 2px 2px 2px 2px;
    box-shadow: 0 4px 5px #222222;
    font-family: "Lucida Grande","Lucida Sans Unicode",sans-serif;
    margin: 50px auto 0;
    padding: 20px 30px;
    width: 760px;
}
.tc_page_top, .tc_page_bottom {
    font-size: 0.7em;
    font-weight: bold;
    color: #006;
    text-align: center;
    margin-top: 2em;
}
.tc_page_top a {
    display: inline-block;
    border: thin solid #999;
    margin: 1px;
    padding: 0px 2px 0px 2px;
    text-decoration: none;
    color: #666;
    background-color: #eee;
    border-radius: 2px;
}
.tc_page_top a:hover {
    color: #fff;
    background-color: #333;
    border-style: inset;
}
.tc_page_top a.on {
    color: #003;
    background-color: #9CF;
    border-color: #009;
}
.tc_page_top a img {
    vertical-align: text-bottom;
} 
```

现在，通过添加`border="0"`-tag `img`，我摆脱了这些边界。仍然， ...

*   按钮未在底部垂直对齐

*   `border-radius`被 IE 8 完全忽略

![在此处输入图像描述](../Images/07d7f9063a8beb8f79a0042381ad0b81.png)![在此处输入图像描述](../Images/d51305531d11c1f4d1407ecce3026e00.png)![在此处输入图像描述](../Images/fc7d7a743b15ca3a654f419fdbcb94a9.png)![在此处输入图像描述](../Images/e32c496f5c262cf7799453941626e6c0.png)

我怎样才能在 IE 8 中解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:24:14.537

.Internet explorer 不支持像border-radius 这样的css 圆角。并且还使用vertical-align:bottom。使用overflow:hidden到所有a标签的父元素，然后在所有a标签上使用float:left

# linux - 共享主机上的自动 cpanel 备份

> ID：15125549
> 
> 赞同：0
> 
> 时间：2013-02-28T00:57:36.797
> 
> 标签：linux, backup, cpanel

我一直在寻找一种方法来备份完整的 cpanel，包括共享主机上本地的所有文件和数据库。
cpanel 中没有提供备份选项。
我用谷歌搜索了它，但我能找到的只是在远程主机上使用 FTP 进行自动备份的 php 脚本。
我正在寻找的是在本地共享主机上备份的方式。
我已经尝试通过将值更改为我的本地共享主机所具有但对我不起作用的值，来使用远程主机上的 FTP 备份[代码。](http://www.webhostingtalk.com/showthread.php?t=1016697)将备份保存在本地听起来毫无用处，但这是我们现在唯一的选择。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T14:15:51.527

如果您不想备份到远程 FTP 服务器，请查看此[备份脚本生成器](http://www.ericzhang.me/projects/cpanel-auto-backup/)，它允许您将备份保存到本地共享主机（只需将 FTP 服务器部分留空）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:03:41.203

您可以备份什么或不能备份什么由主机决定。您应该联系他们的支持（这更容易）。我不明白你在寻找什么代码。最可靠的备份是在硬盘上保留文件的副本，而 FTP 可能是最可靠的备份方式。我可能错了，但是...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-03T16:19:53.913

您可以使用 cPanel UAPI 来做到这一点。cPanel 完整备份包含所有内容。[这是GoDaddy 免费自动远程备份](https://forum.webseodesigners.com/web-design-seo-and-hosting-f16/free-automated-remote-backup-for-godaddy-save-usd3-t3614.html)的示例代码。

# algorithm - 各种排序算法的“稳定”和“不稳定”是什么意思？

> ID：15125552
> 
> 赞同：38
> 
> 时间：2013-02-28T00:57:45.853
> 
> 标签：algorithm, sorting

有人可以解释与各种排序算法有关的“稳定”和“不稳定”的含义> 如何确定算法是否稳定，以及不稳定的排序算法通常有哪些应用程序（因为它们不稳定）？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-28T01:00:09.960

如果说排序算法是“不稳定的”，这意味着对于任何排名相同的项目，绑定成员的顺序不能保证与该集合的连续排序保持相同。对于“稳定”排序，被绑定的条目在排序时将始终以相同的顺序结束。

以应用为例，快速排序算法是不稳定的。这对于按优先级对操作进行排序之类的操作很好（如果两个操作具有相同的优先级，您可能不会关心先执行平局的哪些元素）。

另一方面，稳定的排序算法适用于在线游戏排行榜之类的事情。如果您要使用不稳定的排序，例如按点排序，那么在网页上查看排序结果的用户可能会在页面刷新时遇到不同的结果，并且分页结果等操作将无法正常运行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-28T01:04:41.807

稳定的排序保留相同项目的顺序。通过将行索引附加到键，可以使任何排序变得稳定。不稳定的排序，例如堆排序和快速排序，本来就没有这个属性，但是使用它们是因为它们往往比稳定排序更快、更容易编码。据我所知，没有其他理由使用不稳定的排序。

# c# - 从 Assembly 动态生成 W inForms TreeView

> ID：15125553
> 
> 赞同：2
> 
> 时间：2013-02-28T00:57:47.603
> 
> 标签：c#, treeview, nodes, .net-assembly

我几乎做到了，但我很难优雅地完成最后一部分。此答案是根据 Jeremy Thompson 提交的答案更新的。这是我到目前为止所拥有的：

```
public void SetupTree()
{
    var types = Assembly.Load("Data").GetTypes().Where(t => t.IsPublic && t.IsClass);

    if (types.Count() > 0)
    {
        if (treeView_left.Nodes.Count == 0)
        {
            treeView_left.Nodes.Add(new TreeNode("Structure Data"));
            treeView_left.Nodes[0].Nodes.Add(types.First().GetHashCode().ToString(), types.First().Name);
        }

        foreach (Type type in types)
        {
            BuildTree(types, type, treeView_left.Nodes[0].Nodes[0]);
        }
    }

    treeView_left.Refresh();
}

private void BuildTree(IEnumerable<Type> types, Type type, TreeNode parentNode)
{
    var tempNodes = treeView_left.Nodes.Find(type.BaseType.GetHashCode().ToString(), true);
    if (tempNodes.Count() > 0)
    {
        parentNode = tempNodes[0];
        if (tempNodes.Count() != 1)
        {
            //TODO: warning
        }
    }

    if (parentNode != null)
    {
        if (treeView_left.Nodes.Find(type.GetHashCode().ToString(), true).Count() == 0)
        {
            parentNode.Nodes.Add(type.GetHashCode().ToString(), type.Name);
        }

        foreach (Type t in types.Where(x => x.IsSubclassOf(type)))
        {
            BuildTree(types, t, parentNode.Nodes[type.GetHashCode().ToString()]);
        }
    }
} 
```

这产生了我正在寻找的结果，但我怀疑我正在做一些困难的事情。如果有人可以为最后一部分指出一种更清洁的方法，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:26:49.990

我还没有对此进行测试，但请注意递归`LoadAllChildren`调用本身。

```
public void SetupTree()
{
    Assembly dataLib = Assembly.Load("Data");
    TreeNode theTree = new TreeNode("Assembly Data");

    foreach (Type type in dataLib.GetTypes())
    {
        LoadAllChildren(dataLib, type, theTree);
    }

    treeView_left.Nodes.Add(theTree);  //Optimisation - bind all nodes in one go rather than adding individually
}

private void LoadAllChildren(Assembly dataLib,Type type, TreeNode parentNode)
{
    if (type.IsPublic && type.IsClass)
    {            
        TreeNode node = new TreeNode(type.Name);
        parentNode.Nodes.Add(node);           

        var types = dataLib.GetTypes().Where(x => x.IsSubclassOf(type));
        foreach (Type t in types)
        {
            LoadAllChildren(dataLib, t, node);
        }
    }
} 
```

我希望这足以让你克服障碍，请随时问 Q

*由于我的电脑即将重建，我不会快速响应:(*

# jquery - jQuery 验证插件无法与远程规则一起正常工作（最新的 jquery 和最新的插件）

> ID：15125554
> 
> 赞同：0
> 
> 时间：2013-02-28T00:58:00.597
> 
> 标签：jquery, jquery-validate

我需要一些有关远程规则的 jquery 验证插件的帮助。即使输入无效，表单似乎也会提交。当我第一次提交表单时，验证工作正常，但如果我再次单击该按钮，表单将提交无效输入。

有任何想法吗？谢谢

```
<html lang="en">
 <head><meta charset="utf-8"><title>test</title></head>
  <body>
     <form id="validate" method="post" action="?go=submit">
      <input type="text" placeholder="test 1" id="test1" name="test1" value="test@test.com" class="required email">
      <br/>
      <input type="text" placeholder="test 2" id="test2" name="test2" value="" class="required" minlength="5">
      <button type="submit">Save</button>
    </form>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/jquery.validate.min.js"></script>
<script>
$(function() {
    $("#validate").validate();
    $("#validate").removeAttr("novalidate");
    if($('#test1').length)  {$("#test1").rules("add", {remote: "/test1", messages: {remote: "test 1 failed."}});}
    if($('#test2').length) {$("#test2").rules("add", {remote: "/test2", messages: {remote: "test 2 failed."}});}
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T11:05:12.063

我也面临上述问题。我用新的“jquery-1.7.1.min.js”替换了我的 JQuery 文件“jquery-1.4.1.js”，我的问题就解决了。试试可能对你有帮助。

# iphone - appcelerator 钛 iPhone twitter 时间线调整大小

> ID：15125558
> 
> 赞同：0
> 
> 时间：2013-02-28T00:58:13.353
> 
> 标签：iphone, twitter, appcelerator, titanium-mobile

我在 appcelerator 工作，我有一个选项卡，它是个人资料。上半部分是头像、姓名和其他杂项，下半部分是推特时间线。当我开始添加 twitter 时间线代码时，它占据了整个屏幕。有没有办法减少时间线，只占用屏幕的一部分才能看到其他项目？

这是我的推特时间线代码：

```
var twitterUserName = "foundationsix";
var httpClient = Ti.Network.createHTTPClient();
httpClient.timeout = 10000;
httpClient.open("GET","http://api.twitter.com/1/statuses/" + 
"user_timeline.json?count=10&screen_name=" + twitterUserName);

var twitterData = [];
httpClient.onload = function() {
try {

    var tweets = JSON.parse(this.responseText);
    for (var i=0; i < tweets.length; i++) {

        var tweetText = tweets[i].text;
        var user = tweets[i].user.screen_name;
        var avatar = tweets[i].user.profile_image_url;
        var created_at = tweets[i].created_at;

        var row = Ti.UI.createTableViewRow({hasChild:true,
            height:'auto'});

            var postView = Ti.UI.createView({
            height:'55',
            top:5,
            bottom:5,
            left:5,
            right:5,

        });

        var avatarImageView = Ti.UI.createImageView({
            image:avatar,
            left:0,
            top:0,
            height:48,
            width:48
        });

        postView.add(avatarImageView);

        var userLabel = Ti.UI.createLabel({
            text:user,
            left:54,
            width:120,
            top:-48,
            bottom:2,
            height:16,
            textAlign:'left',
            color:'#444444',
            font:{fontFamily:'Trebuchet MS',fontSize:14,
                fontWeight:'bold'}
        });

        postView.add(userLabel);

        var dateLabel = Ti.UI.createLabel({
            text:created_at,
            right:0,
            top:-18,
            bottom:2,
            height:14,
            textAlign:'right',
            width:110,
            color:'#444444',
            font:{fontFamily:'Trebuchet MS',fontSize:12}
        });

        postView.add(dateLabel);

        var tweetTextLabel = Ti.UI.createLabel({
            text:tweetText,
            left:54,
            top:0,
            bottom:2,
            height:'auto',
            width:236,
            textAlign:'left',
            font:{fontSize:14}
        });

        postView.add(tweetTextLabel);
        row.add(postView);
        twitterData[i] = row;
    }

    var tableview = Titanium.UI.createTableView({data:twitterData,
        minRowHeight:58});
    win1.add(tableview);

} 
catch(E) {
    alert(E);
}
 };
          httpClient.send(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:08:05.847

请记住..我们需要使用顶部和左侧或底部和右侧..不要在同一元素中混合顶部和底部....

来解决你的问题..把顶部放到桌子上，让它下来.......

我创建了顶视图，您可以在其中指定用户名等

您可以在下面发布时间表

```
var win1=Ti.UI.createWindow()

///// this is top portion 
var topView=Ti.UI.createView({
    top:0,
    left:0,
    height:100,
    background:"#2d2d2d"
})

var username=Ti.UI.createLabel({
    text:"foundationsix",
    color:"#fff"
})

topView.add(username)
 win1.add(topView)

var twitterUserName = "foundationsix";
var httpClient = Ti.Network.createHTTPClient();
httpClient.timeout = 10000;
httpClient.open("GET","http://api.twitter.com/1/statuses/" + "user_timeline.json?count=10&screen_name=" + twitterUserName);

var twitterData = [];
httpClient.onload = function() {
try {

    var tweets = JSON.parse(this.responseText);
    for (var i=0; i < tweets.length; i++) {

        var tweetText = tweets[i].text;
        var user = tweets[i].user.screen_name;
        var avatar = tweets[i].user.profile_image_url;
        var created_at = tweets[i].created_at;

        var row = Ti.UI.createTableViewRow({hasChild:true,
            height:'auto'});

            var postView = Ti.UI.createView({height:55});

        var avatarImageView = Ti.UI.createImageView({
            image:avatar,
            left:0,
            top:0,
            height:48,
            width:48
        });

        postView.add(avatarImageView);

        var userLabel = Ti.UI.createLabel({
            text:user,
            left:54,
            width:120,
            top:-48,
            bottom:2,
            height:16,
            textAlign:'left',
            color:'#444444',
            font:{fontFamily:'Trebuchet MS',fontSize:14,
                fontWeight:'bold'}
        });

        postView.add(userLabel);

        var dateLabel = Ti.UI.createLabel({
            text:created_at,
            right:0,
            top:-18,
            bottom:2,
            height:14,
            textAlign:'right',
            width:110,
            color:'#444444',
            font:{fontFamily:'Trebuchet MS',fontSize:12}
        });

        postView.add(dateLabel);

        var tweetTextLabel = Ti.UI.createLabel({
            text:tweetText,
            left:54,
            top:0,
            bottom:2,
            height:'auto',
            width:236,
            textAlign:'left',
            font:{fontSize:14}
        });

        postView.add(tweetTextLabel);
        row.add(postView);
        twitterData[i] = row;
    }

    var tableview = Titanium.UI.createTableView({
        data:twitterData,
        minRowHeight:58,
        top:100
        });
    win1.add(tableview);

} 
catch(E) {
    alert(E);
}
 };
          httpClient.send();

win1.open() 
```

# ios - 使用 [NSJSONSerialization dataWithJSONObject:] 转换为 NSData 时保持 NSDictionary 键的顺序

> ID：15125562
> 
> 赞同：16
> 
> 时间：2013-02-28T00:58:40.563
> 
> 标签：ios, objective-c, cocoa-touch

我有以下情况：

```
NSDictionary *params = @{
    @"Checkout" : @{
        @"conditions" : @{@"Checkout.user_id" : @1},
        @"order" : @{@"Checkout.id" : @"DESC"}
    },
    @"PaymentState" : @[],
    @"Offer" : @[]
}; 
```

此字典包含用于传递带有 Web 服务 URL 的 JSON 字符串的 Web 服务请求的参数。我使用 NSJSONSerialization 类获取 JSON 字符串，如下所示：

```
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:params options:0 error:nil];
NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]; 
```

问题是： jsonString "keys" 的顺序与原始 params 字典键顺序不同，如下所示：

```
{
"Offer":[],
"PaymentState":[],
"Checkout":{
    "conditions":{"Checkout.user_id":6},
    "order":{"Checkout.id":"DESC"}
} 
```

}

也就是说，“PaymentState”和“Offer”键首先出现在 jsonString 中，我需要保持原始顺序。这很重要，像这样：

```
{
"Checkout":{
    "conditions":{"Checkout.user_id":6},
    "order":{"Checkout.id":"DESC"}
},
"Offer":[],
"PaymentState":[] 
```

}

所以伙计们，我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T01:06:43.937

每当我需要保持字典键的顺序时，我都会使用[CocoaWithLove 中的 OrderedDictionary 。](http://www.cocoawithlove.com/2008/12/ordereddictionary-subclassing-cocoa.html)

基本上，`OrderedDictionary`其中包含一个`NSMutableDictionary`和一个`NSMutableArray`键，用于跟踪键的顺序。它实现了子类化所需的方法`NSDictionary`/`NSMutableDictionary`并且只是将方法调用“传递”到 internal `NSMutableDictionary`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-28T01:11:46.263

根据[JSON 规范](http://www.json.org)，JSON 对象是特别无序的。每个 JSON 库都会考虑到这一点。因此，即使您暂时解决了这个问题，您几乎肯定会在以后遇到问题；因为您所做的假设不成立（键是有序的）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-07-01T15:28:47.410

虽然`NSDictionary`并且`Dictionary`不维护其键的任何特定顺序，但从 iOS 11 和 macOS 10.13 开始，通过指定选项`JSONSerialization`支持按字母顺序对键进行排序（[请参阅 Apple 文档）。](https://developer.apple.com/documentation/foundation/jsonserialization.writingoptions/2888322-sortedkeys)`sortedKeys`

例子：

```
let data: [String: Any] = [
    "hello": "world",
    "a": 1,
    "b": 2
]

let output = try JSONSerialization.data(withJSONObject: data, options: [.prettyPrinted, .sortedKeys])
let string = String(data: output, encoding: .utf8)

// {
//  "a" : 1,
//  "b" : 2,
//  "hello" : "world"
// } 
```

# c - 初始化开关盒

> ID：15125569
> 
> 赞同：1
> 
> 时间：2013-02-28T00:59:21.833
> 
> 标签：c, visual-studio-2010

我正在使用成绩报告构建一个程序，但在使用 switch case 计算我的 GPA 时遇到了麻烦。我不确定为什么它没有分配正确的值。我还想知道是否有一种方法可以询问所学课程的数量，然后让循环执行该次数。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
struct Grades
{ 
char Name[20];
int Hrs;
int ID;
char ClassName[20];
char Grade;
char ClassID[6];
};

int main ()
{
struct Grades Transcript[6];
int classCnt = 0;
int vHrs=0, vGPA=0, totalHours=0, totalPoints = 0;
char vGrade;
char vName[20], vCID[6], vClassName[20];

printf("Enter Students Name: ");
    fgets(vName, 20, stdin);

do
{   printf("\nEnter Class ID: ");
        fgets(vCID, 6, stdin);
        fflush(stdin);
        strcpy_s(Transcript[classCnt].ClassID, vCID);
    printf("Enter Class Name: ");
        fgets(vClassName, 20, stdin);
        strcpy_s(Transcript[classCnt].ClassName, vClassName);
    printf("Enter Class Hours: ");
        fflush(stdin);
        scanf("%d", &vHrs);
        Transcript[classCnt].Hrs = vHrs;
    printf("Enter Class Grade: ");
        fflush(stdin);
        scanf("%c", &vGrade);
        Transcript[classCnt].Grade = vGrade;
    classCnt++;
    fflush(stdin);
    totalHours+=vHrs;
    switch (vGrade) {
    case 'A':
    case 'a': 4*vHrs; 
        break;
    case 'B':
    case 'b': 3*vHrs; 
        break;
    case 'C':
    case 'c': 2*vHrs; 
        break;
    case 'D':
    case 'd': 1*vHrs; 
        break;
    case 'F':
    case 'f': 0; 
        break;
    default: printf("Invalid Grade");}
    totalPoints += vGrade;
    vGPA = (totalPoints/totalHours);
}while(classCnt<=5);

printf("********************************** Grade Report:        *************************************");

printf("\n%d\n", totalHours);
printf("%d\n", vGPA);
system("Pause");
return 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:02:15.300

表达式语句：

```
4*vHrs; 
```

在 C 中肯定是有效的，但它实际上并没有*做*任何事情^((a))。

也许您可能想将其分配给某些东西，例如：

```
addPoints = 4 * vHrs; 
```

（当然是事先声明`addPoints`）然后用*它*来影响`totalPoints`以后：

```
totalPoints += addPoints; 
```

在要求类计数方面，您可以使用`scanf("%d",...)`从用户那里获取一个整数，然后在循环中使用该整数：

```
#include <stdio.h>

int main (void) {
    int num, count;

    printf ("Enter countdown value: ");
    scanf ("%d", &count);
    for (num = count; num > 0; num--)
        printf ("%d ", num);
    puts ("BLAST OFF");
    return 0;
} 
```

示例运行是：

```
Enter countdown value: 10
10 9 8 7 6 5 4 3 2 1 BLAST OFF 
```

* * *

^((a))即使是这样的陈述`42;`也是有效的，尽管没有用。允许这样做的原因是因为您可以在表达式中产生副作用。经典案例，虽然没有多少学习者立即看到这一点，但却是尊者`i++;`。

这是一个表达式，它为您提供当前值`i`（除非您以某种方式使用它，否则您会丢弃它），然后`i`作为副作用递增。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:05:39.227

```
case 'A':
    case 'a': 4*vHrs; 
        break;
    case 'B':
    case 'b': 3*vHrs; 
        break;
    case 'C':
    case 'c': 2*vHrs; 
        break;
    case 'D':
    case 'd': 1*vHrs; 
        break;
    case 'F':
    case 'f': 0; 
```

这些行都不会对您编写的程序产生任何影响。您可能希望将`3*vHrs`等分配`4*vHrs`给变量，然后进行以下计算。你可能是这个意思`vHrs *= 3`或`vHrs *=4`类似的意思？

# ios - 客户端和服务器之间的加密密钥交换

> ID：15125570
> 
> 赞同：1
> 
> 时间：2013-02-28T00:59:26.583
> 
> 标签：ios, security, interception, confidentiality

我已经看到很多使用安全框架 API 验证客户端或服务器证书的[示例](https://stackoverflow.com/questions/5044477/determining-trust-with-nsurlconnection-and-nsurlprotectionspace)，但这只会解决`Identification`安全功能的问题，但`Confidentiality`数据呢？如何在客户端和服务器之间交换私钥和公钥？`Interception`, `Modifications`, 或`Fabrication`攻击呢？如果有人按照客户的预期假装并发送正确的证书怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:29:58.213

如您所记，通过验证证书来提供标识。通过加密提供机密性。通过对数据签名来提供身份验证。它们通常通过网络连接上的 TLS 实现。

简而言之，如果您正确实施和部署 HTTPS，并验证您的证书，那么您将获得您所描述的所有内容。`NSURLConnection`如果您只使用“https”URL，默认情况下几乎所有这些都将为您完成。

* * *

如果您在服务器上部署证书并保护其私钥，那么攻击者假装拥有该证书是不可行的。只有服务器拥有服务器的私钥（由您来保护私钥不被复制或盗窃）。

一种典型的方法是使用商业证书，其中像 Verisign 这样的证书颁发机构 (CA) 证明私钥是颁发给给定主机的所有者（称为 CN 或通用名称）的。这是一种简单易用的方法，通常具有成本效益。去一个著名的 CA 并购买证书。

但是，您也可以创建自己的公钥/私钥对、保护私钥并在客户端中分发公钥。然后，您可以将您的客户端配置为只接受一个证书而不接受其他证书。这实际上比商业证书更安全。有关这方面的示例，请参阅[SelfCert](https://github.com/rnapier/security-blunders/blob/master/SelfCert/SelfCert/Connection.m)。这是来自我的[CocoaConf-RTP-2012 演讲](http://robnapier.net/blog/cocoaconf2012)。我将在[CocoaConf-DC-2013](http://cocoaconf.com/dc-2013/home)上进行类似的演讲。它还在[iOS:PTL](http://iosptl.com/)的第 15 章中详细讨论。

客户端证书不太常见。它们用于验证客户端，而不是服务器。要使客户端证书正常工作，每个客户端都必须拥有自己的证书。您不能将私钥作为捆绑包的一部分发送。如果这样做，任何人都可以使用该私钥来模拟客户。（相反，将服务器的公钥放在捆绑包中是完全可以的。它是公开的；你不在乎谁看到它。）

使用`CFNetwork`，连接后，您需要使用`CFReadStreamCopyProperty`来获取`kCFStreamPropertySSLPeerTrust`. 然后，您可以评估返回的`SecTrust`对象。也就是说，`NSURLConnection`如果您可以使用它，我推荐该代码。如果您需要较低级别的访问权限，您仍然可以使用`NSStream`. Jeff Lamarche 在[NSStream: TCP and SSL](http://iphonedevelopment.blogspot.com/2010/05/nsstream-tcp-and-ssl.html)中讨论了这个问题。但如果您需要对 TCP+SSL 进行较低级别的控制，我会推荐使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)或[CocoaAsyncSocket之类的工具。](https://github.com/robbiehanson/CocoaAsyncSocket)

# highstock - 在 HighStock 图表导航器中禁用把手

> ID：15125572
> 
> 赞同：0
> 
> 时间：2013-02-28T00:59:35.683
> 
> 标签：highstock

我已经搜索了 API，并且有很多关于禁用和设置滚动条和导航器样式的示例。我想保持两者完好无损，但禁止车把可拖动。我试着玩这个小提琴的风格：

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/navigator/handles/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/navigator/handles/)

```
navigator: {
        handles: {
            backgroundColor: 'yellow',
            borderColor: 'red'
        }
    } 
```

但根据 API，只有 backgroundColor 和 borderColor 是可访问的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:24:29.123

您可以使用 setExtremes：

[http://jsfiddle.net/B7vCR/3/](http://jsfiddle.net/B7vCR/3/)

```
xAxis: {
                minRange:6 * 30 * 24 * 3600 * 1000,
                events: {
                    afterSetExtremes: function(e) {
                        var maxDistance = 10 * 30 * 24 * 3600 * 1000; //8 months time
                        var xaxis = this;
                        if ((e.max - e.min) > maxDistance) {
                            var min = e.max - maxDistance;
                            var max = e.max;
                            window.setTimeout(function() {
                                xaxis.setExtremes(min, max);
                            }, 1);
                        }
                    }
                }
            }, 
```

# google-app-engine - 使用 endpoints-proto-datastore，如何将属性传递给 EndpointsModel 中不包含的方法

> ID：15125573
> 
> 赞同：3
> 
> 时间：2013-02-28T00:59:41.433
> 
> 标签：google-app-engine, google-cloud-endpoints, endpoints-proto-datastore

我正在尝试将属性传递给我的[EndpointsModel](https://code.google.com/p/endpoints-proto-datastore/source/browse/endpoints_proto_datastore/ndb/model.py?r=183ab0ff336857e081148ac2fdaa73543ca44452#593)中不包含的 API 调用。例如，假设我有以下模型：

```
class MyModel(EndpointsModel):
  attr1 = ndb.StringProperty() 
```

然后假设我想`attr2`作为参数传入，但我不想`attr2`被用作过滤器，也不希望它存储在模型中。我只是想传入一些字符串，在方法中检索它并使用它来执行一些业务逻辑。

文档描述了`query_fields`用于指定要传递给方法的字段的参数，但这些似乎与模型中包含的属性耦合，因此您不能传入模型中未指定的属性。

同样，文档指出您可以通过路径变量传递属性：

```
@MyModel.method(request_fields=('id',),
                path='mymodel/{id}', name='mymodel.get'
                http_method='GET')
def MyModelGet(self, my_model):
  # do something with id 
```

但这需要您更改 URL，而且这似乎与`query_fields`（该属性必须存在于模型中）具有相同的约束。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T01:29:55.353

仅针对此用例，`EndpointsAliasProperty`已[创建](https://code.google.com/p/endpoints-proto-datastore/source/browse/endpoints_proto_datastore/ndb/properties.py?r=183ab0ff336857e081148ac2fdaa73543ca44452#90). 它的行为与`@property`Python 中的非常相似，因为您可以指定 getter、setter 和 doc，但在此上下文中没有指定删除器。

由于这些属性将通过网络发送并与 Google 的 API 基础设施一起使用，因此必须指定类型，因此我们不能只使用`@property`. 此外，我们需要典型的属性/字段元数据，例如`repeated`,`required`等。

它的使用已[记录](http://endpoints-proto-datastore.appspot.com/examples/custom_alias_properties.html)在其中一个示例中，但对于您的特定用例，

```
from google.appengine.ext import ndb
from endpoints_proto_datastore.ndb import EndpointsAliasProperty
from endpoints_proto_datastore.ndb import EndpointsModel

class MyModel(EndpointsModel):
  attr1 = ndb.StringProperty()

  def attr2_set(self, value):
    # Do some checks on the value, potentially raise
    # endpoints.BadRequestException if not a string
    self._attr2 = value

  @EndpointsAliasProperty(setter=attr2_set)
  def attr2(self):
    # Use getattr in case the value was never set
    return getattr(self, '_attr2', None) 
```

由于没有`property_type`传递给`EndpointsAliasProperty`的值，因此使用默认的`protorpc.messages.StringField`。如果你想要一个整数，你可以改用：

```
@EndpointsAliasProperty(setter=attr2_set, property_type=messages.IntegerField) 
```

# python - 如何将匹配的字符串提取到 defaultdict(set) 中？Python

> ID：15125575
> 
> 赞同：2
> 
> 时间：2013-02-28T01:00:09.017
> 
> 标签：python, string, translation, text-alignment, defaultdict

我有一个包含这样行的文本文件（见下文），其中一个英语句子后跟一个西班牙语句子，等效翻译表由“ `{##}`”分隔。（如果你知道它是 的输出`giza-pp`）

> 你要求在接下来的几天里，在这个部分会议期间就这个主题进行辩论。{##} sus señorías han solicitado un 辩论 sobre el tema para los próximos días , en el curso de este período de sesiones 。{##} 0-0 0-1 1-2 2-3 3-4 4-5 5-6 6-7 7-8 8-9 12-10 13-11 14-11 15-12 16-13 17 -14 9-15 10-16 11-17 18-18 17-19 19-21 20-22

翻译表是这样理解的，`0-0 0-1`意思是英语中的第0个单词（ie `you`）匹配西班牙语中的第0个和第1个单词（ie `sus señorías`）

假设我想`course`从句子中知道西班牙语的翻译是什么，通常我会这样做：

```
from collections import defaultdict
eng, spa, trans =  x.split(" {##} ")
tt = defaultdict(set)
for s,t in [i.split("-") for i in trans.split(" ")]:
  tt[s].add(t)

query = 'course'
for i in spa.split(" ")[tt[eng.index(query)]]:
  print i 
```

**有没有一种简单的方法来完成上述操作？可以`regex`吗？`line.find()`?**

经过一些尝试后，我必须这样做以涵盖许多其他问题，例如 MWE 和缺少翻译：

```
def getTranslation(gizaline,query):
    src, trg, trans =  gizaline.split(" {##} ")
    tt = defaultdict(set)
    for s,t in [i.split("-") for i in trans.split(" ")]:
        tt[int(s)].add(int(t))
    try:
        query_translated =[trg.split(" ")[i] for i in tt[src.split(" ").index(query)]]
    except ValueError:
        for i in src.split(" "):
            if "-"+query or query+"-" in i:
                query = i
                break
        query_translated =[trg.split(" ")[i] for i in tt[src.split(" ").index(query)]]

    if len(query_translated) > 0:
        return ":".join(query_translated)
    else:
        return "#NULL" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:53:25.560

这种方式效果很好，但我会稍微不同，使用`list`而不是`set`这样我们就可以正确排序单词（`set`将按字母顺序输出单词，而不是我们想要的）：

**文件：q_15125575.py**

```
#-*- encoding: utf8 -*-
from collections import defaultdict

INPUT = """you have requested a debate on this subject in the course of the next few days , during this part-session . {##} sus señorías han solicitado un debate sobre el tema para los próximos días , en el curso de este período de sesiones . {##} 0-0 0-1 1-2 2-3 3-4 4-5 5-6 6-7 7-8 8-9 12-10 13-11 14-11 15-12 16-13 17-14 9-15 10-16 11-17 18-18 17-19 19-21 20-22"""

if __name__ == "__main__":
    english, spanish, trans = INPUT.split(" {##} ")
    eng_words = english.split(' ')
    spa_words = spanish.split(' ')
    transtable = defaultdict(list)
    for e, s in [i.split('-') for i in trans.split(' ')]:
        transtable[eng_words[int(e)]].append(spa_words[int(s)])

    print(transtable['course'])
    print(transtable['you'])
    print(" ".join(transtable['course']))
    print(" ".join(transtable['you'])) 
```

**输出：**
['curso']
['sus', 'se\xc3\xb1or\xc3\xadas']
curso
sus señorías

它的代码稍长，因为我使用的是实际单词而不是索引 - 但这允许您直接从`transtable`

**但是**，您的方法和我的方法都在同一个问题上失败：重复单词。
`print(" ".join(transtable['this'])`
给出：
`el este`
至少按照单词出现的顺序，所以它是可行的。想要第一次出现`'this'`翻译？
`transtable['this'][0]`会给你第一个字。

并使用您的代码：

```
tt = defaultdict(set)
for e, s in [i.split('-') for i in trans.split(' ')]:
    tt[int(e)].add(int(s))

query = 'this'
for i in tt[eng_words.index(query)]:
    print i 
```

给出：
`7`

您的代码只会打印单词*第一次*出现的索引。

# javascript - Closing child window from parent window

> ID：15125577
> 
> 赞同：5
> 
> 时间：2013-02-28T01:00:12.307
> 
> 标签：javascript, jquery, parent-child

I cant figure out why this won't work. Is there something wrong with this code? The function is being called I checked with an alert but it just won't close the window.

```
 $('#click').click(function() {
   var win = window.open("test3.html","something","width=550,height=170");
 });

 function closeit(){
   win.close();
 } 
```

and on test3.html

```
 window.opener.closeit(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T01:01:30.760

Your `win` variable is scoped to the function that handles the click event. Put it in a scope shared by both that function and `closeit`.

In this case, that would probably look like:

```
var win;

…

    $('#click').click(function() {
        win = window.open("test3.html", "something", "width=550,height=170");
    });
});

function closeit() {
    win.close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T01:02:45.743

The first `win` is a local variable in the callback scope, while the second is a global object. Move the definition (`var win`) to outside the function and it should work.

# excel - VBA Print #1 选择范围（用于从 Excel 导出到文件）？

> ID：15125578
> 
> 赞同：2
> 
> 时间：2013-02-28T01:00:18.423
> 
> 标签：excel, vba, export

我有一个简单的宏，可以将所需的单元格导出到 txt 文件。我可以选择一系列单元格，而不是单独告诉宏我要导出哪些单元格吗？

这是我拥有的非常简单的代码：

```
Sub TEST()
    Open "C:\text.txt" For Output As #1
        Print #1, Cells(1, 1) & Cells(1, 2)
        Close
End Sub 
```

有了它，我可以导出 Excel 工作表单元格 A1、A2。但是如果我想导出大范围的单元格，这种方法就不太方便了。那么有没有办法，比如说轻松导出单元格 A1:A100？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:18:11.493

我看到 joseph4tw 已经回复了，但我的答案有点不同，可能会给你另一个想法，所以我还是把它放在这里。

```
Sub TEST()
    Dim c As Range, r As Range
    Dim output As String
    For Each r In Range("A1:C3").Rows
        For Each c In r.Cells
            output = output & c.Value & ","
        Next c
        output = output & vbNewLine
    Next r
    Open "H:\My Documents\text.txt" For Output As #1
    Print #1, output
    Close
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:12:24.200

您可以使用`InputBox`并将类型设置为`8`，这将允许用户在 Excel 中单击并选择一个范围。

这是一个例子：

```
Sub test()
    Dim r As Excel.Range, cell As Excel.Range
    On Error Resume Next
    Set r = Application.InputBox("Select Range", "Select Range", Type:=8)
    On Error GoTo 0
    If r Is Nothing Then Exit Sub

    Open "C:\text.txt" For Output As #1
    For Each cell In r
        Print #1, cell.Value
    Next
    Close
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-21T16:43:41.987

我注意到 mkingston 的示例将逗号放在首位。这将导致一切从 .csv 的第二列开始（第一列为空白）。更好的办法是将逗号放在语句的末尾。您可以使用 REPLACE() 删除最后一个“，”，但这不是必需的。

```
 Dim c As range, r As range
        Dim output As String
        For Each r In range(DataRange).Rows
            For Each c In r.Cells
                output = output & c.Value & ","
            Next c
            output = output & vbNewLine

        Next r 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-10T16:28:54.357

如果要选择所有非空单元格（连续），请使用：

```
Range("A1").CurrentRegion.Select 
```

然后，您可以以任何您喜欢的方式导出它；）

# javascript - 无法使用 jquery/javascript 在 html5 视频中设置 video.currentTime

> ID：15125581
> 
> 赞同：8
> 
> 时间：2013-02-28T01:00:28.093
> 
> 标签：javascript, jquery, html, google-chrome, video

无论是从控制台还是在我的标签中，我都无法使用 javascript 设置 html5 视频元素的当前时间。我也在使用 jQuery，但我不知道这是否与问题有关。我在 Ubuntu 上使用 Google Chrome 24.0.1312.57；下面是我正在尝试做的一个例子

```
<html>
<script type="text/javascript">
    var video = document.getElementById("video");
    var videoSourceString = "<source src=http://URL:PORT" + path + " type='video/mp4'></source>";
    $(video).html(videoSourceString);
    video.load();
    var frameRate = 24;
    video.currentTime += 1/frameRate;// doesn't do anything, leaves currentTime same as before
</script>
<body>
<video id="video">
</video>
</body>
</html> 
```

视频可以正常播放和暂停，但是每当我尝试手动更改时间时，它都不起作用。

我已经查看了[HTML5 Video - Chrome - 错误设置 currentTime](https://stackoverflow.com/questions/3165444/html5-video-chrome-error-settings-currenttime)并且控制台中没有此类错误，实际上它没有显示任何错误。我也无法使用 video.currentTime += 1 或 document.getElementById("video").currentTime = 0 任意数字从控制台更改 currentTime。

非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T20:25:40.433

即使我一直等到加载元数据事件到达，结果证明是 web.py 不支持 HTTP 字节范围请求，这阻止了查找。在 HTML5 视频中搜索需要 HTTP 字节范围请求，结果 web.py 不支持它们，所以我使用 Apache 提供视频，它运行完美。谢谢您的反馈！

# python - PyCharm + Matplotlib？

> ID：15125583
> 
> 赞同：1
> 
> 时间：2013-02-28T01:00:32.073
> 
> 标签：python, macos, matplotlib, pycharm

我似乎无法让 pycharm 识别我的 matplotlib 模块。它从 IDLE 运行良好，但无法从 IDE 导入，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T04:16:42.653

我把它修好了，我只是将我的模块移到 opt/bin 中...... PyCharm 似乎正在工作......

# php - php 为 sql 即时将 time() 转换为日期格式

> ID：15125584
> 
> 赞同：0
> 
> 时间：2013-02-28T01:00:34.980
> 
> 标签：php, mysql, sql

我从特定日期向用户`while`声明了一些数据。`echo`我以这种格式将日期存储在我的数据库中：`time()`我想以这种格式编写我的 sql 语句来仅检查 date `date("m/d/y", some time)`。像这样：

```
$page_visits_count = $mysqli->query("SELECT COUNT(`id`) FROM `visits` WHERE date('m/d/y', `time`) = '$date' "); 
```

这部分`date('m/d/y', ``time``)`显然是错误的，但我该如何解决这个问题？注意：我尝试将一天 (3600 * 24) 添加到我的时间。但这有时会让我在第二天的中间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:08:23.010

如果我理解正确，您希望将 UNIX 时间戳（存储在 DB 列中`time`）转换为日期格式，然后将该日期与`$date`变量进行比较。

如果这是真的，[那么 FROM_UNIXTIME](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)就是你可能会遇到的：

```
"SELECT COUNT(`id`) FROM `visits` WHERE FROM_UNIXTIME(`time`, '%m/%d/%Y') = '$date'"); 
```

您可能需要调整该`%m/%d/%Y`部分以匹配`$date`变量的格式，请参阅`FROM_UNIXTIME`我链接到的文档以获取有关可用格式的列表。

# javascript - 交叉图像关闭灯箱

> ID：15125588
> 
> 赞同：1
> 
> 时间：2013-02-28T01:00:52.780
> 
> 标签：javascript, jquery, html, jquery-ui, html-lists

我有一个立方体，当你点击立方体时，一个灯箱会打开.....现在我需要点击外面来关闭立方体......我打算实现一个十字图标来关闭立方体...... . 你能告诉我如何包含十字图标来关闭立方体......在下面提供我的代码......

[http://jsfiddle.net/rajkumart08/wWaKs/1/](http://jsfiddle.net/rajkumart08/wWaKs/1/)

```
 $(window).bind('resize', function() {
                location.reload();

                Gallery.setOptions({
                    size: 78,
                    lightbox: false,
                    //animation:  'drop'
                    //speed:      500,
                    //closeOnEsc: true,
                    //slideshow:  false,
                    //slideshow_speed: 3000,
                    //cube_speed: 1000
                });

            }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:04:16.263

> 如果您想使用“关闭按钮”，例如上面示例中的“X”图形，请在 lightbox.js 文件的顶部指定其位置。

```
var closeButton = 'close.gif'; 
```

[http://lokeshdhakar.com/projects/lightbox/](http://lokeshdhakar.com/projects/lightbox/)

# c++ - 独特的骰子计数器无法正常工作（初学者）

> ID：15125598
> 
> 赞同：0
> 
> 时间：2013-02-28T01:02:07.627
> 
> 标签：c++

我正在尝试制作一个掷骰子，它可以跟踪出现了多少个唯一数字。例如（1 2 3 3 1 5 = 4 个唯一编号，1 1 1 1 1 1 = 1 个唯一编号，1 2 3 4 5 6 = 6 个唯一编号）。但每次它只返回一个“0”来表示唯一数字的数量。任何人都可以帮忙吗？

```
#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

int numberGenerator()        //generates 1-6
{
int x = (rand() % 6) + 1;
return x;
}

int diceCounter()
{

int counter[6] = {0,0,0,0,0,0};

for (int i = 0; i > 6; i++)
    {
    int k = numberGenerator();     //records if the dice number has been rolled
        if (k == 1)
           counter[0] = 1;
        if (k == 2)
           counter[1] = 1;
        if (k == 3)
           counter[2] = 1;
        if (k == 4)
           counter[3] = 1;
        if (k == 5)
           counter[4] = 1;
        if (k == 6)
           counter[5] = 1;
     }
return counter[0]+counter[1]+counter[2]+counter[3]+counter[4]+counter[5];  
}                      //returns amount of unique dice numbers

int main()
{
srand(time(NULL));
cout << diceCounter() << endl;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:09:13.310

`for(int i = 0; i < 6; i++)`代替`for(int i = 0; i > 6; i++)`

目前，您的循环永远不会执行，因为`6`不小于`0`并且`for()`条件失败 - 这就是您得到全 0 的原因。

`for(initializer; if-this-condition-is-true-then-execute-for-loop-else-dont ; increment)`<- 考虑 for 循环的一般方法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:08:44.557

您的`for`循环条件是向后的，因此您的循环将永远不会运行：

```
for (int i = 0; i > 6; i++)
                  ^ 
```

# java - 十六进制到二进制到字符串

> ID：15125601
> 
> 赞同：-2
> 
> 时间：2013-02-28T01:02:12.247
> 
> 标签：java, string, append

我需要从这个字节数组中获取十六进制数字并将它们转换为二进制，然后将所有二进制放入一个字符串中。一种

```
public static void main (String[] args)
{
    String binary;
    byte [] ex;
    ex = new byte [] {(byte)0xFF, (byte)0x11, (byte)0xEE, (byte)0x22, (byte)0xDD, (byte)0x33, (byte)0xCC, (byte)0x44};
    printByteArray(ex);
    binary = hexToBin(ex);
    System.out.println(binary);
}

public static String hexToBin(byte [] array)
{
    String binStr = null;
    for(int i = 0; i < array.length; i++)
    {
        binStr.append(Integer.toBinaryString(array[i]));
    }
    return binStr;
} 
```

但由于我如何初始化字符串（我的第一次尝试），我的输出中有'null'。任何想法如何解决这个问题？另外，我只是将其更改为 append 以解决我遇到的 null 问题，现在我不知道为什么，但它不会让我使用它。

**编辑 编辑 编辑 编辑 编辑 **

好的，所以现在我有：

```
 public static void main (String[] args){

    String binary;
    String binary2;
    byte [] ex;
    byte [] wx;
    ex = new byte [] {(byte)0xFF, (byte)0x11, (byte)0xEE, (byte)0x22, (byte)0xDD, (byte)0x33, (byte)0xCC, (byte)0x44};
    wx = new byte [] {(byte)0x12, (byte)0xCD, (byte)0xD8, (byte)0x53, (byte)0xFA, (byte)0x01, (byte)0x1C, (byte)0x40};
    printByteArray(ex);
    binary = hexToBin(ex);
    System.out.println(binary);
    binary2 = hexToBin(wx);
    System.out.println(binary2);

}

public static String hexToBin(byte [] array)
{
    StringBuilder binStr = new StringBuilder();
    for(int i = 0; i < array.length; i++){
        binStr.append(Integer.toBinaryString(array[i]));
    }
    return binStr.toString();
} 
```

但这是我的输出：

```
11111111111111111111111111111111100011111111111111111111111111110111010001011111111111111111111111111011101110011111111111111111111111111110011001000100
1001011111111111111111111111111001101111111111111111111111111110110001010011111111111111111111111111111110101111001000000 
```

知道为什么它们是不同的长度吗？以及我怎样才能使它们具有相同的长度。就像第一个FF应该是'11111111'但是如果我在转换它们时在数组中的单独字节之间放置空格，FF就会变成'1111111111111111111111111111111111111111111111111'，我只想要8位表示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:05:18.283

您可以使用仅用`binStr` `String`a 替换类型`StringBuilder`：

```
public static String hexToBin(byte[] array) {
   StringBuilder binStr = new StringBuilder();
   for (int i = 0; i < array.length; i++) {
      binStr.append(Integer.toBinaryString(array[i]));
   }

   return binStr.toString();
} 
```

**更新：**

由于`toBinaryString`没有左填充零，您可能想要使用（8 位 LHS 填充）：

```
String binaryString = String.format("%8s", Integer.toBinaryString(array[i] & 0xFF)).replace(' ', '0');
binStr.append(binaryString); 
```

# ruby - 对 Ruby 长度属性感到困惑

> ID：15125602
> 
> 赞同：1
> 
> 时间：2013-02-28T01:02:14.213
> 
> 标签：ruby, string

为什么我的`foo()`函数打印出长度为 5 的字符串“YAAR”？

```
def foo() 
map = Hash.new
File.open('dictionary.txt').each_line{ |s|
    word = s.split(',')
    if word.any? { |b| b.include?('AA') }
        puts word.last
        puts word.last.length
    end
    }
end 
```

一些文件.txt

```
265651,YAAR
265654,YAARS 
```

**输出**

```
YAAR
5
YAARS
6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:07:42.460

你在两个字符串的末尾都有一个换行符 '\n' 。因此，您的拆分正在接收：

```
"265651,YAAR\n"
"265654","YAARS\n" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T01:13:01.177

从文件中读取，您将在所有行的末尾获得一个新行字符 (\n)（可能最后一行除外）

代替

```
word = s.split(',') 
```

在你的循环中，使用这个

```
word = s.split(',').map { |s| s.chomp } 
```

# ruby-on-rails - 骨干分页器 + Rails 在生产服务器中不起作用

> ID：15125604
> 
> 赞同：0
> 
> 时间：2013-02-28T01:02:19.313
> 
> 标签：ruby-on-rails, backbone.js, backbone.paginator

```
parse: (response, options) =>
  @totalRecords = parseInt(response.result_count)
  @totalPages = Math.ceil(@totalRecords / @perPage)
  response.data 
```

在本地开发环境、本地生产环境中完美运行。但是当部署到生产环境时，解析函数无法取回任何数据（甚至没有被触发）。

在浏览器控制台中播放，使用 collection.fetch()，它有响应，但无法将它传递到我的收藏中。

![在此处输入图像描述](../Images/df80c0e46a96dcd1ce879a498c21a724.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:03:11.237

听起来这不是代码问题，而是部署问题。如果您可以在本地进行生产，这应该意味着您的代码可以正常工作。

问题可能是资产在需要时未预编译（或未在生产服务器上更新）。请记住，对于 Heroku 和一些提供程序，您需要在部署或确保它们在服务器上构建时推送预编译资产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:05:15.903

感谢@bodacious，我能够解决这个问题。这是服务器端的事情。对于 nginx+unicorn 的情况，只需添加

```
proxy_buffering off 
```

到您在 nginx.conf 中的位置块，一切都恢复正常了！

此处参考：[Rails 3 应用程序返回的不完整响应正文与 RABL](https://stackoverflow.com/questions/11738924/incomplete-response-body-being-returned-from-rails-3-app-with-rabl/11774914?noredirect=1#comment21897116_11774914)

谢谢你们！

# ruby-on-rails - Rails 多父关系

> ID：15125606
> 
> 赞同：0
> 
> 时间：2013-02-28T01:02:42.763
> 
> 标签：ruby-on-rails, ruby

三种型号：

```
User
List
Item 
```

一个`User`可以有很多`Lists`，一个`List`可以有很多`Items`。每个都`List`可以`Item`由 ANY 添加`User`。例如，这意味着您可以创建一个列表，我可以向其中添加项目。说得通？我们继续吧。

我希望能够在任何时间点找到`Items`由 X 创建的所有内容。`User`

```
class User < ActiveRecord::Base
  has_many :lists
  has_many :items
end
class List < ActiveRecord::Base
  belongs_to :user
  has_many :items
end
class Item < ActiveRecord::Base
  belongs_to :list
  belongs_to :user
end 
```

我不喜欢这个。它有一种时髦的气味，但我无法将手指放在它上面。我觉得应该有更好的东西。创建新的时`Item`，我必须编写如下所示的内容：

```
list = List.find(params[:list_id])
@item = list.items.new(params[:item])
user = User.first
@item.user = user
@item.save! 
```

那么，我错过了什么？我的关系错了吗（很可能）？告诉我！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:49:51.263

似乎项目和用户之间可能存在*两种*不同的关系：1）`items`被添加到`lists`，`users`2）`lists`被创建`users`。

只有一个用户可以创建列表。许多用户可以在创建项目后将项目添加到列表中。

所以建模这需要两种不同的关系

```
class User < ActiveRecord::Base
  has_many :lists
  has_many :items_added, :class_name => "Item", :foreign_key => "added_by_user_id"
end
class List < ActiveRecord::Base
  belongs_to :user
  has_many :items
end
class Item < ActiveRecord::Base
  belongs_to :list
  belongs_to :added_by_user, :class_name => "User",  :foreign_key => "user_id"
end 
```

假设您需要所有这些关系是有道理的——也就是说，一个列表在创建时需要一个 user_id 以显示谁创建了它。同样，一个项目需要记录谁将它添加到列表中。

您需要将该`added_by_user_id`列添加到您的`items`表中以使其正常工作并跟踪哪个用户添加了该项目。

所以你可以这样做：

```
# To create a user and a list is easy!
user = User.create(user_params)
list = user.create_list(list_params)

# but when adding an item, you need to know which user is adding it
item = list.create_item({:added_by_user => current_user, :item_name => 'name', etc}) 
```

现在您可以使用以下命令查找用户添加的所有项目：

```
all_user_items = user.items_added 
```

我没有对此进行测试，它有点复杂，所以我可能在代码中有 1-2 个错误，但通常这是可以建模的一种方式。

# c++ - 程序的类似休眠的保存状态

> ID：15125609
> 
> 赞同：3
> 
> 时间：2013-02-28T01:02:52.387
> 
> 标签：c++, memory

在 C++ 或 Java 或 Python 中是否有任何方法可以让我保存程序的状态，不问任何问题？例如，我花了一个小时学习如何将树状结构保存到文件中。很有教育意义，但我觉得我可以这样做：

```
saveState(file); 
```

“文件”将包含我的程序使用的整个内存。就像操作系统的“休眠”或“挂起到磁盘”功能一样。我知道提升序列化，这可能不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:33:43.740

您最可能想要的是我们所说的[序列化](http://en.wikipedia.org/wiki/Serialization)或对象[编组](http://en.wikipedia.org/wiki/Marshalling_%28computer_science%29)。数据/对象序列化有一大堆学术问题，你可以很容易地用谷歌搜索。

话虽这么说，给定正确的库（可能非常原生），您可以像“特定于操作系统的休眠”一样对正在运行的程序进行真实快照。这是在 Linux 上执行此操作的 SO 答案：[https ://stackoverflow.com/a/12190830/318174](https://stackoverflow.com/a/12190830/318174)

要进行上述快照，您很可能需要来自要保存的进程的外部进程。我强烈建议你不要那样做。**而是以您选择的语言**阅读/查找（顺便说一句，欢迎使用 SO，不要标记每种语言......这会让人们生气）如何进行[序列化](http://en.wikipedia.org/wiki/Serialization)或对象[编组](http://en.wikipedia.org/wiki/Marshalling_%28computer_science%29)......提示......现在大多数人都选择 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:41:20.897

围绕这个有几个框架。如果您需要对 Java、Python 和 C++ 的支持，请查看 Google Protocol Buffers [https://developers.google.com/protocol-buffers/](https://developers.google.com/protocol-buffers/) 我在一些项目中使用过它并且效果很好。

还有 Thrift（最初来自 Facebook） [http://thrift.apache.org/](http://thrift.apache.org/) 虽然我没有任何经验。

另一种选择是@QuentinUK 建议的。使用继承自可流式传输的类和/或制作可流式操作符/函数的类。

我会使用一个框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T01:22:54.150

我认为您所描述的将是很少有人真正想将其用于真实系统的功能。通常你想保存一些东西以便它可以传输，或者你可以停止运行程序，或者防止程序退出（或电源故障）的可能性。

在大多数生产系统中，人们希望对磁盘的写入小而增量，以便系统可以保持响应，并且可以避免写入不一致的数据。定期将所有内存写入磁盘可能会导致大量无响应时间。您需要锁定整个系统以避免不一致的状态。

但是，编写自己的持久性很乏味且容易出错，因此您可能会发现这个 SO 问题很有趣：[Persisting graph data (Java)](https://stackoverflow.com/questions/1530959/persisting-graph-data-java)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T02:48:28.043

这是你的问题：

*   [http://en.wikipedia.org/wiki/Address_space_layout_randomization](http://en.wikipedia.org/wiki/Address_space_layout_randomization)

回到古代历史（带有扩展器的 16 位 DOS 程序），编译器曾经支持存储相对地址的“基于”指针。这些可以安全地批量序列化。应用程序这样做了，保存了代码和数据，序列化的模块被称为“覆盖”。

今天，您需要在工具链中提供基于指针的支持（导致每次指针访问都需要额外调整），或者遍历所有数据，将指针与其他数据区分开来（如何？）并将它们调整为新的存储位置，以防操作系统已经在旧程序用于其堆的同一地址加载了一些库。在现代“托管”环境中，已经必须为垃圾收集器识别指针，即使不经常这样做也是可行的。在本机代码中，这非常困难，尽管创建元数据是为了启用共享库的重定位。

因此，人们最终会手动遍历他们的整个数据结构，并将对象链接（指针）转换为可以在另一端恢复的东西，即使对象有一个新地址（同样，因为旧地址可能已用于共享库）。

请注意，许多处理器具有支持基于寻址的功能......并且由于基于寻址不再常见，编译器继续使用这些指针算术功能来加速用户代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T01:22:40.357

是的，从流式类派生对象并添加流式处理函数。然后，您可以将所有内容流式传输到磁盘。为此，您将需要一个库，例如 MFC。

# php - 在 codeigniter 中执行命令行 - PHP

> ID：15125612
> 
> 赞同：1
> 
> 时间：2013-02-28T01:03:09.503
> 
> 标签：php, codeigniter, shell

我有一个`Codeigniter`框架，我正在它之上构建一个测试框架。测试框架的一个特点是远程部署测试套件。因此，我正在尝试部署`Python`我从网页编写的测试套件：

```
public function deploy_test()
{
    if( !$this->input->is_cli_request() ) {
       echo json_encode(system("python test_suit.py"));
    }
} 
```

从我的控制器，所以，当一个测试部署时，我想运行它。为了概念证明，我这样做了。但是，该作业永远不会被部署，命令行也不会被执行。当我从终端运行那段代码时，它按预期工作。我在这里想念什么？谢谢

** 当我执行它时，它很好奇地提到`ls -l`它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:50:48.490

基本上，这是一个坏主意——如果主机拒绝访问服务器上执行的东西（毕竟，它怎么知道你的代码不是恶意的），你真的不应该尝试解决这个问题，至少没有与您的提供商交谈并询问他们是否可以让您这样做！

毕竟，执行 LS 并不是真正的恶意，但您可以尝试执行一个 Python 脚本，该脚本将 'rm -rf' 作为服务器。

现在，您也许可以找到解决方法，但在我看来，问题是您应该这样做吗？他们可能会将此解释为黑客攻击。

# filepicker.io - 使用 filepicker.IO 上传图片

> ID：15125613
> 
> 赞同：0
> 
> 时间：2013-02-28T01:03:27.313
> 
> 标签：filepicker.io

我正在尝试使用 Filepicker IO API 让用户上传图像。我正在尝试复制“开始”视频中显示的步骤，但我遇到了障碍。Filepicker 可以正常打开，但它似乎没有调用我在 div 中的 javascript 函数 (openFilePicker())（当在 div 中设置了 filepicker 设置时，它会起作用）。此外，在我上传图片后，我不知道如何获取信息，以便我可以将其显示在另一个页面上（使用 php 等存储它。）如果你能帮助我，我将不胜感激。这是代码：

```
<script type="text/javascript">

    function openFilePicker() {

        filepicker.setKey('MYKEYHERE');

        filepicker.pick({
                        mimetypes: ['image/*', 'text/plain'],
                        container: 'window',
                        services:['COMPUTER', 'FACEBOOK', 'GMAIL', 'PICASA', 'DROPBOX', 'INSTAGRAM', 'FLICKR'],
                        },
                        function(FPFile){
                        console.log(JSON.stringify(FPFile));

                        //UPLOAD COMPLETE
                        UpdateHTMLWithUploadedFile(FPFile.url);

                        },
                        function(FPError){
                        console.log(FPError.toString());
                        }
                        );

    }

</script>

<script type="text/javascript" src="//api.filepicker.io/v1/filepicker.js"></script>

<div class="row margin" id='img-row'>
 <input id="filename" disabled="disabled" class="input-text file-input-value" type="text" style="width: 360px;" value=""/>
  <input name="img" data-fp-class="form-simple-action-btn filepicker_launcher" data-fp-button-text="Choose Image" data-fp-container="modal" type="filepicker" data-fp-apikey="MYKEYHERE" id='campaign-img-input' onclick="javascript:openFilePicker()">
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:17:10.180

您似乎将[filepicker.io 小部件](https://developers.filepicker.io/docs/web/#widgets-pick)的文档与[filepicker.io javascript api](https://developers.filepicker.io/docs/web/#pick)的文档混合在一起。如果您想绑定到对象的 onclick 事件并`filepicker.pick`直接使用调用，您应该使用标准按钮而不是文件选择器输入类型，即

```
<button onclick="javascript:openFilePicker()">Choose Image</button> 
```

# java - Java 泛型：通配符

> ID：15125616
> 
> 赞同：7
> 
> 时间：2013-02-28T01:03:59.783
> 
> 标签：java, generics

所以我正在阅读泛型以重新熟悉这些概念，尤其是在涉及通配符的地方，因为我几乎从未使用过它们或遇到过它们。从我所做的阅读中，我无法理解他们为什么使用通配符。我经常遇到的一个例子如下。

```
void printCollection( Collection<?> c ) {
  for (Object o : c){
    System.out.println(o);
  }
} 
```

你为什么不把它写成：

```
<T> void printCollection( Collection<T> c ) {
    for(T o : c) {
        System.out.println(o);
    }
} 
```

oracle网站的另一个例子：

```
public static double sumOfList(List<? extends Number> list) {
    double s = 0.0;
    for (Number n : list)
        s += n.doubleValue();
    return s;
} 
```

为什么这不写成

```
public static <T extends Number> double sumOfList(List<T> list) {
    double s = 0.0;
    for (Number n : list)
        s += n.doubleValue();
    return s;
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T02:16:02.330

来自[甲骨文](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)：

> 出现的一个问题是：什么时候应该使用泛型方法，什么时候应该使用通配符类型？为了理解答案，让我们检查一下 Collection 库中的一些方法。

```
interface Collection<E> {
     public boolean containsAll(Collection<?> c);
     public boolean addAll(Collection<? extends E> c);
 } 
```

> 我们可以在这里使用泛型方法：

```
interface Collection<E> {
     public <T> boolean containsAll(Collection<T> c);
     public <T extends E> boolean addAll(Collection<T> c);
     // Hey, type variables can have bounds too!
 } 
```

> 但是，在 containsAll 和 addAll 中，类型参数 T 只使用一次。返回类型不依赖于类型参数，也不依赖于方法的任何其他参数（在这种情况下，只有一个参数）。这告诉我们类型参数被用于多态性；它的唯一作用是允许在不同的调用站点使用各种实际的参数类型。如果是这种情况，应该使用通配符。通配符旨在支持灵活的子类型化，这就是我们在这里想要表达的。

因此，对于第一个示例，这是因为操作不依赖于类型。

第二，因为它只依赖于 Number 类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T01:09:27.313

为什么要让事情变得比他们需要的更复杂？这些示例演示[了可能可行的最简单的事情](http://c2.com/cgi/wiki?DoTheSimplestThingThatCouldPossiblyWork)——这些示例并不是试图说明通用方法。

> 你为什么不把它写成：
> 
> ```
> <T> void printCollection( Collection<T> c ) {
>     for(T o : c) {
>         System.out.println(o);
>     }
> } 
> ```

因为`System.out.println()`可以接受对象，所以不需要更具体。

> 为什么这不写成
> 
> ```
> public static <T extends Number> double sumOfList(List<T> list) {
>     double s = 0.0;
>     for (Number n : list)
>         s += n.doubleValue();
>     return s;
> } 
> ```

同样，因为您不需要为每个不同的`T extends Number`. 接受 a 的非泛型方法`List<? extends Number>`就足够了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-28T01:20:20.190

确实，如果方法参数类型具有带上限的第一级通配符，则可以将其替换为类型参数。

反例（通配符不能被类型参数替换）

```
 List<?> foo()  // wildcard in return type  

    void foo(List<List<?>> arg)   // deeper level of wildcard

    void foo(List<? super Number> arg)   // wildcard with lower bound 
```

现在对于可以通过通配符或类型参数解决的情况

```
 void foo1(List<?> arg)

    <T> void foo2(List<T> arg) 
```

一般认为`foo1()` 比`foo2()`. 这可能有点主观。我个人认为`foo1()`签名更容易理解。并且`foo1()`在行业中被压倒性地采用，因此最好遵循惯例。

`foo1()`也处理`arg`得更抽象一点，因为你不能轻易地`arg.add(something)`在`foo1()`. 当然，这可以很容易地解决（即将 arg 传递给`foo2()`！）。公共方法看起来像一个常见的做法`foo1()`，它在内部转发给私有方法`foo2()`。

在某些情况下，通配符不起作用并且需要类型参数：

```
 <T> void foo(List<T> foo1, List<T> foo2);  // can't use 2 wildcards. 
```

到目前为止，这个讨论是关于方法签名的。在其他地方，在无法引入类型参数的情况下，通配符可能是必不可少的。

# c# - .net SoundPlayer 事件从不触发

> ID：15125625
> 
> 赞同：1
> 
> 时间：2013-02-28T01:04:36.920
> 
> 标签：c#, .net, events, asynchronous, soundplayer

所以我正在尝试使用声音播放器来加载 wav 文件，然后在加载完成后触发一个事件。原因是我不希望我的程序在 WAV 完全加载并准备好之前继续运行（如果有其他方法可以做到这一点，请告诉我）。

但不幸的是，LoadCompleted 事件永远不会触发！

这是我尝试的最后一个。我究竟做错了什么？

```
this.audio = new SoundPlayer(); 
audio.SoundLocation = "songs\\" + songname + ".wav"; 
audio.LoadAsync(); 
```

属于歌曲数据对象。然后我有这是主类的主要方法：

```
this.songdata.audio.LoadCompleted += new AsyncCompletedEventHandler(audio_LoadCompleted);

this.songdata.audio.Play(); 
```

最后在主类中：

```
void audio_LoadCompleted(object sender, AsyncCompletedEventArgs e)
{
    MessageBox.Show("aaa");
} 
```

文件开始播放，但消息框永远不会出现。顺便说一句，我正在使用 Visual Studio 2010 和 .NET 4.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-08T06:27:45.400

我得到了以下代码来向我发送一个 LoadCompleted 事件，但是，我有一个与 SoundPlayer 对象在同一个类中的“事件回调函数”。

```
class MediaPlayer{

System.Media.SoundPlayer soundPlayer;

public MediaPlayer(MemoryStream stream){
   soundPlayer = new System.Media.SoundPlayer(stream);
   soundPlayer.LoadCompleted += new AsyncCompletedEventHandler(player_LoadCompleted);
   soundPlayer.Load();
}

public void Play(){

   soundPlayer.Play();

}

// Handler for the LoadCompleted event.
private void player_LoadCompleted(object sender, AsyncCompletedEventArgs e){   
   Console.WriteLine("LoadCompleted"); 
} 
} 
```

# r - 将数学符号和下标与常规字母混合

> ID：15125628
> 
> 赞同：61
> 
> 时间：2013-02-28T01:04:52.157
> 
> 标签：r, ggplot2, mathematical-typesetting

我想绘制一个看起来像这样的标签`ggplot2`：

`Value is $\sigma$, R^{2} = 0.6`其中`Value is`是普通字体，`$\sigma$`是希腊小写 sigma 字母，`R^{2} = 0.6`显示为 an `R`，带有上标`2`，后跟等号 ( `=`)，后跟`0.6`. 如何在 ggplot`factor`和 R 之类的参数中使用它`xlab,ylab`？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-28T01:16:43.707

像这样的东西：

```
g <- ggplot(data=data.frame(x=0,y=0))+geom_point(aes(x=x,y=y))
g+ xlab( expression(paste("Value is ", sigma,",", R^{2},'=0.6'))) 
```

**编辑**

另一种选择是使用`annotate`with `parse=T`：

```
g+ annotate('text', x = 0, y = 0, 
        label = "Value~is~sigma~R^{2}==0.6 ",parse = TRUE,size=20) 
```

![在此处输入图像描述](../Images/8e020bda0325c7e9bccf66b195601280.png)

**编辑**

如果在绘图期间计算常数 0.6，则该`paste`解决方案可能很有用。

```
r2.value <- 0.90
g+ xlab( expression(paste("Value is ", sigma,",", R^{2},'=',r2.value))) 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-02-28T01:29:51.313

比 paste() 更简单的可能是：

```
g <- ggplot(data=data.frame(x=0,y=0))+geom_point(aes(x=x,y=y))
 g + xlab( expression(Value~is~sigma~R^{2}==0.6))
 # ~ for spaces, and * for no-space between (unquoted) expressions 
```

通常`paste`，如果您使用正确的绘图连接词，则不需要所有这些成对的引号。即使您想要以其他方式创建希腊字母的文本，您所需要做的就是将其用引号括起来，并在两边加上 a`*`或`~`。向新手提供 plotmath 表达式的一个问题`paste`是，他们认为它`paste`与语言的其他部分相同。

# python - 在没有外壳的情况下使用 subprocess.call 时如何将字符串传递给脚本

> ID：15125629
> 
> 赞同：2
> 
> 时间：2013-02-28T01:04:52.433
> 
> 标签：python, subprocess

我在用

```
subprocess.call(['prog', 'arg'], shell=False) 
```

执行 prog 并让我自己逃脱 arg。

现在有时 prog 需要来自 STDIN 的一些输入。在外壳中我可以使用

```
echo 'some input' | prog arg 
```

使用管道。如何在不转义 arg 的情况下使用子进程执行此操作？这甚至可能吗？

或者是这样做的唯一方法

```
subprocess.call('echo "%s" | prog "%s"' % ('some input', 'arg'), shell=True) 
```

这根本不安全。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T01:11:09.177

```
proc = subprocess.Popen(['prog', 'arg'], shell=False, stdin=subprocess.PIPE)
out, err = proc.communicate('some input') 
```

这基本上就是`call`幕后的工作，除了周围的物体让你有机会调用`communicate`它。（然后返回码在`proc.returncode`.）

请注意，如果您想实际获取 stdout 或 stderr，则还需要将它们传递`PIPE`给构造函数。如上所述，它们都会以`None`.

[文档](http://docs.python.org/2/library/subprocess.html)。

* * *

**事后**思考：如果你要打很多外部电话，你可能还想[试一试plumbum](http://plumbum.readthedocs.org/en/latest/)；它做了一堆运算符重载hackery，以提供类似于shell的语法。

# c++ - 从带有原始指针的向量中删除 std::unique_ptr 的最佳方法？

> ID：15125631
> 
> 赞同：8
> 
> 时间：2013-02-28T01:04:53.177
> 
> 标签：c++, std, smart-pointers, stdvector

所以我有一个像这样的向量：

```
std::vector<std::unique_ptr<SomeClass>> myVector; 
```

然后我有另一个包含原始指针的向量`SomeClass`：

```
std::vector<SomeClass*> myOtherVector; 
```

如果里面有一个元素，`myOtherVector`它也会在里面`myVector`，所以我想遍历每个元素`myOtherVector`并从中删除相同的元素`myVector`。然后清除向量。这就是我想出的：

```
for(size_t i = 0; i < myOtherVector.size(); i++)
{
    myVector.erase(std::remove(myVector.begin(), myVector.end(), myOtherVector[i]), myVector.end());
}
myOtherVector.clear(); 
```

这会产生编译时错误，因为`myVector`拥有唯一的指针，但我给`remove()`函数一个原始指针。这是我需要帮助的地方，因为我不知道解决这个问题的正确方法是什么。我将行更改为：

```
myVector.erase(std::remove(myVector.begin(), myVector.end(), std::unique_ptr<SomeClass>(myOtherVector[i])), myVector.end()); 
```

首先这是不正确的，因为现在我有两个`std::unique_ptr`s 引用同一个对象。里面的元素`myVector`包含一个引用，上面一行中唯一指针的构造是另一个引用。而且我什至不知道构造一个新的指针来获得相同的类型在概念上是否是正确的方法。因此，我将唯一指针更改为共享指针：

```
std::vector<std::shared_ptr<SomeClass>> myVector;
std::vector<SomeClass*> myOtherVector;

for(size_t i = 0; i < myOtherVector.size(); i++)
{
    myVector.erase(std::remove(myVector.begin(), myVector.end(), std::shared_ptr<SomeClass>(myOtherVector[i])), myVector.end());
}
myOtherVector.clear(); 
```

当我运行应用程序时，该`myVector.erase()`行导致运行时错误，显示“ApplicationName.exe 已触发断点”。单击继续后，我得到了调试断言失败。

所以很明显我做错了什么，但我不知道是什么。使用原始指针从向量中擦除智能指针的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:13:05.013

`std::unique_ptr`有一个成员函数 ，`get`它返回拥有的指针。

考虑以下：

```
std::sort(myOtherVector.begin(), myOtherVector.end());

myVector.erase(std::remove_if(myVector.begin(), myVector.end(),
[&](std::unique_ptr<SomeClass> const& p) -> bool
{
    return std::binary_search(myOtherVector.begin(), myOtherVector.end(),
                              p.get());
}));

myOtherVector.clear(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T01:13:29.840

我就是这样做的。性能可以提高，但只要它不会成为您的应用程序的瓶颈，我不会为此烦恼。该算法简单明了。

它用于`remove_if`有选择地从第一个容器 ( `myVector`) 中删除所有指向由第二个容器 (myOtherVector) 的元素指向的对象的元素；然后，它清除第二个容器。谓词通过 lambda 函数实现：

```
#include <vector>
#include <memory>
#include <algorithm>

struct SomeClass { /* ... */ };

int main()
{
    std::vector<std::unique_ptr<SomeClass>> myVector;
    std::vector<SomeClass*> myOtherVector;

    myVector.erase(
        std::remove_if( // Selectively remove elements in the second vector...
            myVector.begin(),
            myVector.end(),
            [&] (std::unique_ptr<SomeClass> const& p)
            {   // This predicate checks whether the element is contained
                // in the second vector of pointers to be removed...
                return std::find(
                    myOtherVector.cbegin(), 
                    myOtherVector.cend(), 
                    p.get()
                    ) != myOtherVector.end();
            }),
        myVector.end()
        );

    myOtherVector.clear();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T05:54:45.587

如果你不能简化你的问题，那么 std::set_difference 或它的其中一个（[http://www.cplusplus.com/reference/algorithm/set_difference/](http://www.cplusplus.com/reference/algorithm/set_difference/)）怎么样？

您需要指定一个比较函数来获取（）来自 unique_ptr 的原始指针

# javascript - DocsList 函数在表格脚本中不起作用

> ID：15125637
> 
> 赞同：0
> 
> 时间：2013-02-28T01:05:01.133
> 
> 标签：javascript, google-apps-script, google-docs, google-drive-api

我是这方面的初学者，所以这个错误可能是由于编码错误，但这就是我在这里的原因！哈哈。

我编写了一个 Sheets 函数，它（理论上）将遍历特定文件夹中的所有文件并找到特定单词的所有实例，然后返回该单词的实例数。这是我写的代码：

```
function commentCount(name) {

  var files = DocsList.getFolderById('FOLDER ID GOES HERE').getFiles();
  var counter = 0;

  for(i in files) {
    var doc = DocumentApp.openById(files[i].getId());

    var text = doc.getText();
    text = text.replace( /\./g, "" );
    var textArray = text.split(" ");

      for(w in textArray){
        if(textArray[w] == name){
          counter++;
      }
   }
}
return counter;
} 
```

当我在表格中调用该函数时，显示错误 - 错误：您无权调用 getFolderById（第 3 行，文件“commentCount”）

我尝试过使用 getFolder("Folder name") 和 getFolder(path)，并且出现同样的错误。似乎 DocList 函数无法正常工作。

不知道问题是什么，因为当我调试函数时一切似乎都很好。

在我发现这个错误之前，我无法确定我的其余代码是否正确。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:06:04.970

Phil Bozak 澄清说，Spreadsheets 中调用脚本函数的公式没有获得完全权限，这使得在这种情况下无法使用 getFolderByID 函数。

# objective-c - 两个圆圈之间不需要的线 - 石英

> ID：15125639
> 
> 赞同：0
> 
> 时间：2013-02-28T01:05:09.967
> 
> 标签：objective-c, ipad, quartz-graphics

我画了两个圆圈。它们被绘制出来，但有一条线将它们连接起来。如何删除它？这是我的代码：

```
 //Background styling
CGContextSetRGBFillColor(context, 202.0/225.0, 255.0/225.0, 112.0/225.0, 1);

//Background setup
background = CGRectMake(1, 1, 1024, 786);               
CGContextAddRect(context, background);
CGContextDrawPath(context, kCGPathFill);

//Styling
CGContextSetLineWidth(context, 2.0);
CGContextSetRGBStrokeColor(context, 0.0/225.0, 0.0/225.0, 225.0/225.0, 1);
CGContextSetRGBFillColor(context, 0.0/225.0, 0.0/255.0, 225.0/225.0, 1);

//first tower setup
CGContextAddArc(context, 200, 150, 10, 0, 2*3.14159265359, YES);

//second tower setup
CGContextAddArc(context, 800, 150, 10, 0, 2*3.14159265359, YES);

//Draw towers
CGContextDrawPath(context, kCGPathFillStroke); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:26:15.140

`CGContextMoveToPoint()`如果要在单个路径中开始新的未连接行，则需要添加 a 。

编辑：如文档中所述[`CGContextAddArc`](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html)：

> 如果当前路径已经包含子路径，Quartz 会添加一条连接当前点和圆弧起点的线。如果当前路径为空，Quartz 会创建一个新的新子路径，其起点设置为弧的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:33:35.773

CGContextAddArc() API 参考说：如果当前路径已经包含子路径，Quartz 会添加一条连接当前点和弧起点的线。因此，在第二个 CGContextAddArc() 之前添加一个“移动”：

```
CGContextMoveToPoint(context, 800+10, 150); 
```

# java - 如何使用 cvFitLine Java

> ID：15125646
> 
> 赞同：0
> 
> 时间：2013-02-28T01:05:55.613
> 
> 标签：java, opencv

我有以下代码：

'

```
 [...]cvCvtColor(subtraction, grayBuffer, CV_BGR2GRAY);
        cvThreshold(grayBuffer, grayBuffer, 127, 255, CV_THRESH_BINARY);
        cvFindContours(grayBuffer, mem, contours, Loader.sizeof(CvContour.class) , CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE, cvPoint(0,0));
        //cvFitLine(Mat(contours[0]),lines,2,0,0.01,0.01);
        cvFitLine(contours, CV_DIST_L2, 2, 0.01, 0.01, line);

        int lefty = (int)((int)(-line[2]*line[1]/line[0])+line[3]);
        int righty = (int) ((int)((grayBuffer.width()-line[2])*line[1]/line[0])+line[3]);
        line(grayBuffer.width()-1,0,righty,lefty); [...]´ 
```

这给了我一个致命的错误。

有人知道如何使用fitLine吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:24:39.670

这是一个使用 cvFitLine 的 javacv 程序（为处理语言编写，它提供 setup() 和 exit() 方法）：

```
import com.googlecode.javacv.*;
import com.googlecode.javacv.cpp.*;
import com.googlecode.javacpp.IntPointer;

final int numPoints = 10;
int pt2[] = new int[numPoints*2], x = 0, y = 1;
float testPar[] = new float[4];// to store the results

void setup() {
  for (int i = 0; i < numPoints; i++) {
    pt2[ i*2 ] = i * 5; pt2[ i*2 + 1 ] = i * 5;
  }

  opencv_core.CvMat point_mat = opencv_core.cvMat(1, numPoints, opencv_core.CV_32SC2, new IntPointer(pt2));
  opencv_imgproc.cvFitLine(point_mat, opencv_imgproc.CV_DIST_HUBER, 0, 0.01, 0.01,testPar);

  for (int i = 0; i < testPar.length; i++) 
    println("i: " + i + ", testPar: " + testPar[i]);
  exit(); 
} 
```

输出：

```
i: 0, testPar: 0.70710677
i: 1, testPar: 0.70710677
i: 2, testPar: 22.5
i: 3, testPar: 22.5 
```

# php - 将数组的值的第一个字母更改为大写

> ID：15125647
> 
> 赞同：1
> 
> 时间：2013-02-28T01:06:06.127
> 
> 标签：php, arrays, multidimensional-array

```
$arr = array ('name'=>'bunt','game'=>'battlefield','fame'=>'hero');

foreach ($arr as $key=>$val){
  $val = ucfirst($val);
}

var_dump($arr);
// result would be
// 'name' => 'Bunt', 'game' => 'Battlefield', 'fame' => 'Hero' 
```

我在这里遗漏了一些东西....如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T01:06:52.947

利用[`array_map()`](http://us3.php.net/manual/en/function.array-map.php)

```
$new_array = array_map('ucfirst', $arr); 
```

[看到它在行动](http://codepad.viper-7.com/glZmC3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T01:11:25.890

`$val`只是每次迭代中的临时变量。要更新每个键的值，您需要将其作为参考传递。做这个。

```
foreach ($arr as $key => &$val) {
    $val = ucfirst($val);
} 
```

注意`&`以下`$val`。

[这里](http://php.net/manual/en/language.references.php)有一些关于 PHP 引用的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T01:11:14.323

foreach ($arr as $key=>&$val){ $val = ucfirst($val); }

在 $val 之前放一个 & 符号。这将使它引用变量而不是分配值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T01:18:51.067

为什么不直接使用密钥来访问数组呢？

```
<?php
$arr = array('name' => 'bunt', 'game' => 'battlefield');

foreach ($arr as $key => $val) {
    $arr[$key] = ucfirst($val);
}

var_dump($arr); 
```

# ruby-on-rails - Ruby中的绝对符号是什么意思？

> ID：15125650
> 
> 赞同：2
> 
> 时间：2013-02-28T01:06:42.523
> 
> 标签：ruby-on-rails, ruby

例如

```
func(@param) do |f|
    some code here
end 
```

和

```
@param.each do |sth|
    some code here
end 
```

绝对值符号在这里有什么作用？我不明白这两段代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T01:11:35.293

它是块内的局部变量，因此对于该行：

```
@param.each do |sth| 
```

您正在迭代`@param`正确，其中的每个项目`@param`都单独称为`sth`.

所以 if`@param`指的是一个包含数字的数组

```
[1,3,5,4] 
```

在第一次迭代期间`sth`将是`1`，然后`3`，然后`5`，然后`4`。

同样适用于：

```
func(@param) do |f| 
```

除了现在调用局部变量`f`！你可以随心所欲地称呼它，甚至`|ihavenoideawhatimdoing|`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T01:08:31.180

这是一个局部变量，它表示对于`do`...之间的代码块，定义`end`了变量。`f`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T01:15:51.507

它是块的参数。块是 do 和 end 之间的代码部分。该代码块可以使用`f`or `sth`，在您的示例中可能由`func`or设置`each`。

[Ruby 块](http://pine.fm/LearnToProgram/?Chapter=10)的教程可能会有所帮助。

[Labmda 演算](http://en.wikipedia.org/wiki/Lambda_calculus)- 更抽象，但这是我第一次看到这些东西的背景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T01:12:02.447

它表示实例变量。如果人们使用像**attr_accessor这样的****attr_***方法，您经常会看到它互换，这使得**@someattr**和**self.some_attr**在实例方法中等效。

# android - 在android中将日期从yyyy-mm-dd（2013-01-01）转换为月日，年（2013年1月1日）

> ID：15125655
> 
> 赞同：0
> 
> 时间：2013-02-28T01:07:15.797
> 
> 标签：android

我需要知道如何在 Android 中将日期从`yyyy-mm-dd`（例如`2013-01-01`）转换为月日、年（例如）。`Jan 1, 2013`

我想将 database( `2013-01-01`) 中的日期转换为这样的字符串`Jan 1, 2013`。并将其放入android中的编辑文本中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:17:01.573

如果您将日期作为 a 获取`String`，则可以使用 a`SimpleDateFormat`将其转换为 a `Date`。然后再次使用 a`SimpleDateFormat`以您需要的格式获取`Date`as a `String`。

这应该可以满足您的要求。

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
Date date = sdf.parse(yourDateAsString);
sdf = new SimpleDateFormat("MMM dd, yyyy");
String yourFormatedDateString = sdf.format(date); 
```

# javascript - 主干.js 服务调用更改请求类型

> ID：15125657
> 
> 赞同：2
> 
> 时间：2013-02-28T01:07:22.610
> 
> 标签：javascript, backbone.js

```
[WARN][TiAPI   (  480)]  [REST API] apiCall  [object Object]
[WARN][TiAPI   (  480)]  [REST API TYPE] apiCall  POST
[WARN][TiAPI   (  480)]  [object Object]
[WARN][TiAPI   (  480)]  [REST API] apiCall  [object Object]
[WARN][TiAPI   (  480)]  [REST API TYPE] apiCall  PUT 
```

当我第一次访问该服务时，该服务被调用为 POST 类型，但第二次它发送的是 PUT 而不是 POST。我如何才能真正使请求类型始终为 POST。

[http://backbonejs.org/#Model-save](http://backbonejs.org/#Model-save)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:34:41.093

Backbone 执行 POST 是因为它不知道将内容放置到的特定 URL。但是，当您事先知道 URL 时，PUT 是正确的方法。默认情况下，Backbone 使用“id”属性（如果存在）来构建 URL。因此，如果没有“id”，它假定您希望服务器填充它，如下所示：

```
=>
POST {"foo":"bar"} /things
<=
200 OK {"foo":"bar","id":"a36f933"} 
```

但是，如果您在客户端生成 id，或者如果您已经知道 id，Backbone 将执行 PUT，并假定服务器将接受它，如下所示：

```
=>
PUT {"foo":"bar","id":"12345abc"} /things/12345abc
<=
200 OK {"foo":"bar","id":"12345abc"} 
```

这完全符合 RESTful URL 的工作方式以及非幂等 POST 请求与幂等 PUT 请求背后的意图和含义。如果您了解幂等性，Backbone 的行为就开始有意义了 :)

[http://en.wikipedia.org/wiki/幂等性](http://en.wikipedia.org/wiki/Idempotence)

[http://quoderat.megginson.com/2011/11/17/post-put-idempotence-and-self-identification/](http://quoderat.megginson.com/2011/11/17/post-put-idempotence-and-self-identification/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:14:55.560

*默认情况下*， Backbone用于`CRUD`与数据端点同步。这意味着第一个 API 调用是一个`POST`（用于*创建*操作），然后，在第二次调用时，由于模式有一个`id`，Backbone 将发送一个`PUT`（用于*更新*操作）

要强制使用`POST`，您需要覆盖[Backbone.sync](http://backbonejs.org/#Sync)。

# linux - mxe 交叉编译 linux 到 windows vtk 示例

> ID：15125666
> 
> 赞同：3
> 
> 时间：2013-02-28T01:08:10.670
> 
> 标签：linux, windows, vtk, cross-compiling, mxe

我想知道是否有一个示例，或者有人可以发布一个示例，用于使用[MXE](http://mxe.cc/)编译 vtk .exe 应用程序。标头和库已构建，但我似乎无法使其正常工作。我已经设法让 Qt 工作。我通常使用自己的 makefile，对 cmake、qmake 等不太熟悉。我需要一个示例来向我展示如何使这些东西工作。一个工作示例，显示了从 mxe 构建的库和头文件构建基本功能 vtk.exe 应用程序所需的包含和链接。

我努力了：

```
export PATH=/home/.../mxe/usr/bin:$PATH 
i686-pc-mingw32-g++ -Wall -g -Wno-deprecated -I/home/.../include/vtk-5.8 -c app.cpp 
i686-pc-mingw32-g++ -o appWindows app.o -L/home/.../lib/vtk/5.8 -lvtkRendering -lvtkGraphics -lvtkCommon -lvtkFiltering -l.. -l... etc. 
```

我也试过：

```
cmake -DCMAKE_TOOLCHAIN_FILE=/home/.../mxe/usr/i686-pc-mingw32/share/cmake/mxe-conf.cm‌​ake. 
```

获取 libvtkRendering 错误。同样的过程适用于我的 Linux 头文件和二进制文件。

我还尝试了点云库中的二进制文件。也没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T19:25:57.667

我正在从 MXE 的 master 上的 git clone 测试这个。阅读邮件列表以获取校验和错误修复。我目前在编译 vtk6 期间遇到 opengl 错误。我没有看到上面提到的错误。

我将在今晚晚些时候发布新的错误消息。如果您仍然收到错误，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T09:01:54.247

两年后，CMake 越来越成为参考！
查看此最新帖子[C/C++ Development for Windows Sans Windows](http://www.kitware.com/blog/home/post/877)

# sockets - AIR SocketServer 移动应用程序和策略文件

> ID：15125668
> 
> 赞同：1
> 
> 时间：2013-02-28T01:08:27.077
> 
> 标签：sockets, air

构建一个基于 AIR 的移动应用程序，该应用程序只能在本地 wifi 网络上使用。

SocketServer 类将用于加载和保存高分。

我需要使用策略文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T07:18:41.633

很可能，如果您从与 .swf 来源相同的端口和主机以外的任何地方请求资源，您可能需要一个策略服务器和一个跨域文件。

编辑：这样做的原因是安全性。想象一下，您在防火墙后面的公司办公室工作，浏览网页。恶意 Flash 广告位于您正在访问的站点上，并开始从您的浏览器（位于防火墙后面）复制 Intranet 文件并将它们上传到一个秘密位置。策略服务器确保您访问的服务器希望您访问它们，并且可以指定您被允许访问的确切内容。

# python - libeay32.dll 的包装器：如何导入宏？

> ID：15125670
> 
> 赞同：1
> 
> 时间：2013-02-28T01:08:29.720
> 
> 标签：python, openssl, ctypes

我正在`libeay32.dll`用 Python 为 OpenSLL 编写小型包装器。对于大多数功能，可以按如下方式导入它们：

```
self.Function_Name = self._dll.Function_Name
self.Function_Name.restype = ctypes.c_int #for example
self.Function_Name.argtypes = [list of ctypes arguments] 
```

不幸的是，我无法以这种方式导入任何宏：

`X509_get_notAfter`等`X509_get_notBefore`。

任何想法，如何做到这一点`ctypes`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:10:40.907

您不能导入宏。您要导入的是来自 DLL 的函数。宏不是从 DLL 中导出的，所以没有什么要导入的。

幸运的是，大多数宏都非常简单，因此您可以在 Python 中重新实现它们。

或者，在 C 中创建一个包装 DLL，为每个宏定义一个函数，编译并链接该函数，然后使用`ctypes`.

或者您可能想要使用[`Cython`](http://www.cython.org)或其他一些技术来代替`ctypes`. 它们通常的工作方式是生成和编译包装 C 库并导出 Python 类型和函数的 C 代码，并且通常将 C 宏导出为 Python 函数就像导出 C 函数一样容易。

或者，最简单的…… [PyOpenSSL 是否](https://pypi.python.org/pypi/pyOpenSSL)已经包装了你需要的一切？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:49:38.683

经过一番研究，我决定回答我自己的问题。X509_get_notAfter 的宏如下所示：

```
#define X509_get_notAfter(x) ((x)->cert_info->validity->notAfter) 
```

x - 是 X509 结构，其中包含 X509_CINF 结构，其中包含 X509_VAL 结构，其中包含指向 notAfter 的指针 :)

所以我的计划是在 python 代码中实现整个 X509、X509_CINF 和 X509_VAL 结构。

在 C 中它看起来像这样

```
struct x509_st
{
X509_CINF *cert_info;
X509_ALGOR *sig_alg;
ASN1_BIT_STRING *signature;
int valid;
int references;
char *name;
CRYPTO_EX_DATA ex_data;
/* These contain copies of various extension values */
long ex_pathlen;
long ex_pcpathlen;
unsigned long ex_flags;
unsigned long ex_kusage;
unsigned long ex_xkusage;
unsigned long ex_nscert;
ASN1_OCTET_STRING *skid;
AUTHORITY_KEYID *akid;
X509_POLICY_CACHE *policy_cache;
STACK_OF(DIST_POINT) *crldp;
STACK_OF(GENERAL_NAME) *altname;
NAME_CONSTRAINTS *nc;
#ifndef OPENSSL_NO_RFC3779
STACK_OF(IPAddressFamily) *rfc3779_addr;
struct ASIdentifiers_st *rfc3779_asid;
#endif
#ifndef OPENSSL_NO_SHA
unsigned char sha1_hash[SHA_DIGEST_LENGTH];
#endif
X509_CERT_AUX *aux;
} /* X509 */; 
```

X509_CINF 看起来像这样：

```
typedef struct x509_cinf_st
{
ASN1_INTEGER *version;      /* [ 0 ] default of v1 */
ASN1_INTEGER *serialNumber;
X509_ALGOR *signature;
X509_NAME *issuer;
X509_VAL *validity;
X509_NAME *subject;
X509_PUBKEY *key;
ASN1_BIT_STRING *issuerUID;     /* [ 1 ] optional in v2 */
ASN1_BIT_STRING *subjectUID;        /* [ 2 ] optional in v2 */
STACK_OF(X509_EXTENSION) *extensions;   /* [ 3 ] optional in v3 */
ASN1_ENCODING enc;
} X509_CINF; 
```

这是 X509_VAL：

```
typedef struct X509_val_st
{
ASN1_TIME *notBefore;
ASN1_TIME *notAfter;
} X509_VAL; 
```

为了使整个任务更容易，我决定用 ctypes.c_void_p 替换所有指向我不想访问的结构的指针

所以我的python代码现在看起来像这样：

```
class X509_val_st(ctypes.Structure):

_fields_ = [('notBefore',       ctypes.c_void_p),
            ('notAfter',        ctypes.c_void_p)]

class X509_cinf_st(ctypes.Structure):

_fields_ = [('version',         ctypes.c_void_p),
            ('serialNumber',    ctypes.c_void_p),
            ('signature',       ctypes.c_void_p),
            ('issuer',          ctypes.c_void_p),
            ('validity',        X509_val_st),
            ('subject',         ctypes.c_void_p),
            ('key',             ctypes.c_void_p),
            ('issuerUID',       ctypes.c_void_p),
            ('subjectUID',      ctypes.c_void_p),
            ('extensions',      ctypes.c_void_p),
            ('enc',             ctypes.c_uint)]

class X509_st(ctypes.Structure):

_fields_ = [('cert_info',     X509_cinf_st),
            ('sig_alg',       ctypes.c_void_p),
            ('signature',     ctypes.c_void_p),
            ('valid',         ctypes.c_int),
            ('references',    ctypes.c_int),
            ('name',          ctypes.c_void_p),
            ('ex_data',       ctypes.c_int),
            ('ex_pathlen',    ctypes.c_long),
            ('ex_pcpathlen',  ctypes.c_long),
            ('ex_flags',      ctypes.c_ulong),
            ('ex_kusage',     ctypes.c_ulong),
            ('ex_xkusage',    ctypes.c_ulong),
            ('ex_nscert',     ctypes.c_ulong),
            ('skid',          ctypes.c_void_p),
            ('akid',          ctypes.c_void_p),
            ('policy_cache',  ctypes.c_void_p),
            ('crldp',         ctypes.c_void_p),
            ('altname',       ctypes.c_void_p),
            ('nc',            ctypes.c_void_p),
            ('rfc3779_addr',  ctypes.c_void_p),
            ('rfc3779_asid',  ctypes.c_void_p),
            ('sha1_hash',     ctypes.c_char),
            ('aux',           ctypes.c_void_p)] 
```

最后一步：将结构分配给从函数 X509_new() 接收到的指针：

```
self.X509_new = self._lib.X509_new
self.X509_new.restype = ctypes.POINTER(X509_st)
self.X509_new.argtypes = [] 
```

因此 OpenSSL 宏 X509_get_notBefore 的 python 函数将如下所示：

```
def X509_get_notBefore(self):
    return self.X509[0].cert_info.validity.notBefore 
```

# windows - Windows批处理文件计算所有文件和子目录但不列出

> ID：15125673
> 
> 赞同：0
> 
> 时间：2013-02-28T01:08:51.120
> 
> 标签：windows, batch-file, cmd, dir

我需要基本上得到“DIR/s”的摘要，但没有列出。我希望能够查看使用的文件/文件夹/字节数和可用字节数 - 并将所有这些通过管道传输到文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:36:50.197

```
@echo off
setlocal EnableDelayedExpansion
for /F %%a in ('dir') do (
   set files=!dirs!
   set dirs=%%a
)
echo %files% Files(s), %dirs% Dir(s) 
```

如果需要，可以轻松修改以前的批处理文件以获取已使用和可用字节的数量。

安东尼奥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:22:29.960

虽然这可以使用命令行脚本来完成，但使用 PowerShell 更容易。

在不知道您要为每个文件夹收集哪些信息并作为摘要的情况下，目前无法提供有效的解决方案。

但是，我鼓励您通读并尝试以下线程中提供的脚本和答案：

*   [用于查找包含数百万个文件的文件夹的文件大小和文件数的 PowerShell 脚本？](https://stackoverflow.com/questions/7080654/a-powershell-script-to-find-the-file-size-and-file-count-of-a-folder-with-millio)
*   [PowerShell：如何运行文件夹大小总和？](https://stackoverflow.com/questions/543621/powershell-how-do-you-run-a-folder-size-summation?rq=1)
*   [powershell 文件夹统计](https://stackoverflow.com/questions/5064104/powershell-folder-stats?rq=1)

HTH。

# java - 如何动态地将新页面添加到 viewPager？

> ID：15125679
> 
> 赞同：1
> 
> 时间：2013-02-28T01:09:29.913
> 
> 标签：java, android, android-viewpager

我使用自定义寻呼机适配器将每个页面表示为片段，如下代码所示：

```
private static class MyFragmentPagerAdapter extends FragmentStatePagerAdapter {

    public MyFragmentPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int index) {
        return pages.get(index);
    }

    @Override
    public int getCount() {
        return MAX_NUMBER_PAGES;
    }       
} 
```

上面的PageAdapter类需要我提前知道viewPager的页数。但是我不知道在 ViewPager 中有多少页。那么，是否可以在 getCount() 方法中返回 1，然后在按钮单击事件或 onPageChangeListener() 中添加新页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:23:42.767

我做了与您所要求的类似的事情，除了我使用 FrameLayout 而不是 Fragment。您也许可以从我的代码中进行调整： [dynamicall add and remove view to viewpager](https://stackoverflow.com/questions/13664155/dynamically-add-and-remove-view-to-viewpager)

# c# - 使用 CryptoStreams 加密和 HMAC 数据

> ID：15125680
> 
> 赞同：4
> 
> 时间：2013-02-28T01:09:30.433
> 
> 标签：c#, encryption, cryptography, digital-signature, hmac

假设我们有一条使用 HMAC 签名的消息，然后该消息和 HMAC 被加密，然后通过 TCP 套接字发送：

```
// endpoint info excluded
TcpClient client = new TcpClient();
var stream = client.GetStream();

// assume pre-shared keys are used and set at this point
AesManaged aes = new AesManaged();
var aesEncryptor = aes.CreateEncryptor();
CryptoStream aesStream = new CryptoStream(
    stream, aesEncryptor, CryptoStreamMode.Write);

// assume pre-shared keys here too
HMACSHA256 mac = new HMACSHA256();
CryptoStream macStream = new CryptoStream(
    aesStream, mac, CryptoStreamMode.Write);

// assume a message with actual data is written to the macStream
// which updates the hash of the HMAC and also pipes the message
// to the aesStream which encrypts the data and writes it to the
// TCP socket stream
byte[] message = new byte[1024];
macStream.Write(message, 0, message.Length);
macStream.FlushFinalBlock();

// flushing the final block of the macStream actually flushes the
// final block of the aesStream, so I get an error when trying to
// write the HMAC hash to the aesStream
aesStream.Write(mac.Hash, 0, mac.Hash.Length);
aesStream.FlushFinalBlock(); 
```

我抽象了很多代码，所以这不是一个工作示例。我可能可以解决这个问题，我将数据写入两次，一次是 HMAC.TransformBlock，另一次是 aesStream，但我想避免这种情况。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-09-13T07:42:48.560

由于我正在处理类似主题的atm，我将在这里回答：

就像 Maarten Bodewes 写的那样，我建议你先加密然后 MAC。

然后，您可以`FlushFinalBlock()`在`aesStream`.

不要忘记处理 CryptoStreams 和 Algorithms 对象！

```
var stream = client.GetStream();

HMACSHA256 mac = new HMACSHA256();
CryptoStream macStream = new CryptoStream(stream, mac, CryptoStreamMode.Write);

AesManaged aes = new AesManaged();
var aesEncryptor = aes.CreateEncryptor();
CryptoStream aesStream = new CryptoStream(macStream, aesEncryptor, CryptoStreamMode.Write);

byte[] message = new byte[1024];
aesStream.Write(message, 0, message.Length);
aesStream.FlushFinalBlock();

//No need to FlushFinalBlock() on macStream, would throw

//Write HMAC here
stream.Write(mac.Hash, 0, mac.Hash.Length);

//Dispose
aesStream.Dispose();
aes.Dispose();
macStream.Dispose();
mac.Dispose(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T00:05:47.140

您确实应该在 MAC 之前执行加密以创建安全的解决方案，*特别是*如果您通过套接字发送数据（因为您可能容易受到填充 oracle 攻击）。因此，尽管您的问题是有效的，但最好更改流的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T00:57:18.467

因此，我实施了一个似乎暂时有效的 hack。我创建了一个名为`ProtectedStream`. 这是要点：

```
public class ProtectedStream : Stream
{
  private Stream stream;

  public ProtectedStream(Stream stream)
  {
    if(stream == null)
      throw new ArgumentNullException("stream");

    this.stream = stream;
  }

  public override void Close()
  {
    this.stream.Close();
    base.Close();
  }

  public override int Read(byte[] buffer, int offset, int count)
  {
    return this.stream.Read(buffer, offset, count);
  }

  public override void Write(byte[] buffer, int offset, int count)
  {
    this.stream.Write(buffer, offset, count);
  }

  // and continue overriding every other overridable Stream member
  // in the same fashion
} 
```

然后原始代码如下所示：

```
// assume pre-shared keys are used and set at this point
AesManaged aes = new AesManaged();
var aesEncryptor = aes.CreateEncryptor();
CryptoStream aesStream = new CryptoStream(
    stream, aesEncryptor, CryptoStreamMode.Write);

// assume pre-shared keys here too
HMACSHA256 mac = new HMACSHA256();
CryptoStream macStream = new CryptoStream(
    new ProtectedStream(aesStream), mac, CryptoStreamMode.Write); 
```

请注意，`aesStream`它包裹在一个`ProtectedStream`. 这隐藏了`aesStream`a `CryptoStream`from`macStream`所以当你调用它`FlushFinalBlock`时`macStream`它不会调用`FlushFinalBlock`的事实`aesStream`。

# cakephp - 在 Cakephp 中加入表

> ID：15125682
> 
> 赞同：0
> 
> 时间：2013-02-28T01:09:46.253
> 
> 标签：cakephp

我有两张桌子；历史和用户。我需要显示如下数据：

* * *

## 编号 | 用户名 | 最新创建的帖子 | 首次创建的帖子

id 和 username 的数据来自 users 表，最后创建和首次创建的 post 数据来自历史记录。我需要查看所有用户，他们最近创建的帖子和他们第一个创建的帖子。请帮我制作控制器并查看谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:56:38.613

下面试试。

```
<?php
    $users = $this->User->find('all',array
    (
        'conditions' => array
        (
            //conditions goes here
        ),
        'fields' => array
        (
            'User.id',
            'User.username',
            'History.Lastest created Post',
            'History.First created Post'
        )
    ));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:45:54.523

假设 'User' 和 'History' 表之间的关系是一对一的，并且 History 表中有一个 'user_id' 列**，您可能需要在 History****模型**中指定它们之间的关系，例如：

 **```
 var $hasOne = array(
     'User' => array(
            'className' => 'User',
            'foreignKey' => 'user_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
       )
    ); 
```

然后，您需要执行`joins`此操作。例如，在您的**User**模型中的某处，尝试这样的操作：

```
 class User extends AppModel {    

        ....  

       function getAllUsersHistory{

             $allHistories = $this->find('all', array(
                'joins' => array(
                    'table' => 'history',
                    'alias' => 'HistoryJoin'
                    'type' => 'INNER',
                    'conditions' => array(
                        // your conditions, for example: 'History.user_id' => 'User.id'
                    )
                ),  
                'fields' => array(
                    'User.id', 
                    'User.username', 
                    'History.lastest_created_post', 
                    'History.first_created_post'
                )           
             ));   

          return $allHistories; 

         }

         .....

    } 
```**

# ruby-on-rails - 一条有问题的路线没有正确测试

> ID：15125692
> 
> 赞同：1
> 
> 时间：2013-02-28T01:10:49.423
> 
> 标签：ruby-on-rails, testing, rspec, routes, capybara

我正在使用 rspec-rails、capybara 和 poltergeist (phantomjs) 进行测试。我正在使用 Sorcery 进行身份验证 gem。

到目前为止，我只实现了基本的用户模型，我所有的路线都可以工作，除了`signup_path`......我不知道为什么这是唯一似乎被打破的路线。如果我在自己的浏览器 localhost:3000/register 中访问它，它确实可以正常工作

这是我的测试代码作为示例

```
it "shows a valid signup path", js: true do
  visit signup_path
  page.should have_content("Sign Up")
end 
```

我收到此错误：

```
expected there to be text "Sign Up" in 
"Internal Server Error undefined method `escape' for 
nil:NilClass WEBrick/1.3.1 (Ruby/1.9.3/2012-04-20) at 127.0.0.1:55402" 
```

我可以用`signup_path`我的应用程序中的任何其他路线替换。测试会失败，但至少会说“找不到注册`<insert content of that page here>`”。因此，即使测试失败，我也可以直接在测试输出中看到该页面的内容。对于 signup_path 它只是直接失败，我自己无法查看错误，因为如果我在自己的浏览器中访问它，它会起作用。

这是我的路线

```
 # User
  get 'register' => 'users#new', :as => 'signup'
  resources :users, :only => [:create, :edit, :update]

  # Session Authentication
  get 'login'  => 'sessions#new',     :as => 'login'
  get 'logout' => 'sessions#destroy', :as => 'logout'
  resources :sessions, :except => [:new, :destroy] 
```

# java - Java 应用程序性能根据其执行方式而变化

> ID：15125694
> 
> 赞同：4
> 
> 时间：2013-02-28T01:11:07.873
> 
> 标签：java, performance, netbeans

希望这是一个简单而快速的问题。我最近在 Netbeans 中开发了一个 CPU 密集型 Java 应用程序。它使用每秒数万次的 A* 寻路来解决瓷砖匹配游戏。该应用程序已完成，并且运行得非常快（我一直在 netbeans 中进行测试）。我将其计时为每秒 700 次尝试（每次尝试可能是 20 次左右的寻路）。当我构建项目时，它会创建一个 jar，我可以在 netbeans 之外运行它。如果我使用命令行（Windows 7）并使用 java -jar theFile.jar，我会以每秒 1000 次尝试的速度计时。这是可以理解的，因为 IDE 可能使用了一些 cpu 电源并阻止它（我的应用程序是多核的，您可以设置数字。我通常使用 3/4，因此它不会使我的系统减慢太多）。现在，令人困惑的部分。显然我不 不希望用户每次想在 Windows 上运行此应用程序时都必须使用命令行。他们应该能够点击罐子。问题是，当我双击 jar 文件时，程序每秒运行 300 次尝试！

为什么这三种运行完全相同的程序的方式会在其他条件不变的情况下对性能产生如此巨大的影响？我的解决方法是创建一个脚本来通过命令行运行 .jar，还是你们知道这里发生了什么？非常感谢！

编辑：新信息

我使用以下命令创建了一个批处理文件： java -jar theFile.jar 执行此命令时，它的运行速度与我在控制台中运行它的速度相同（因此，1000 att/sec）

但是，我还用一个简单的 c++ 程序制作了一个可执行文件。该程序只有几行，并且是 System("java -jar theFile.jar"); 并返回 0；。令人难以置信的是，它以双击 jar 文件的速度运行，大约 300att/sec。多么奇怪！它很可能是不同的 IDE 参数，但我不确定如何检查默认系统参数，或者如何针对这个特定的 jar 修改它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T03:15:31.067

[您可能会遇到 HotSpot VM](http://en.wikipedia.org/wiki/HotSpot)的客户端和服务器版本之间的差异。从[这篇文章](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/index.html)：

> *   在通常用于客户端应用程序的平台上，JDK 附带了一个称为 Java HotSpot™ Client VM（客户端 VM）的 VM 实现。客户端 VM 已针对减少启动时间和内存占用进行了调整。它可以在启动应用程序时使用 -client 命令行选项来调用。
>     
>     
> *   在所有平台上，JDK 都带有 Java 虚拟机的实现，称为 Java HotSpot Server VM（服务器 VM）。服务器 VM 旨在实现最大的程序执行速度。它可以在启动应用程序时使用 -server 命令行选项来调用。

我猜测单击`jar`文件可能会调用客户端 VM，除非您设置了`-server`标志。[本文](http://www.oracle.com/technetwork/java/hotspotfaq-138619.html)提供了更多详细信息：

> **-client 和 -server 系统有什么区别？**
> 
> 这两个系统是不同的二进制文件。它们本质上是两个不同的编译器 (JIT)，它们连接到同一个运行时系统。客户端系统最适合需要快速启动时间或占用空间小的应用程序，服务器系统最适合整体性能最重要的应用程序。一般来说，客户端系统更适合交互式应用程序，例如 GUI。其他一些差异包括编译策略、堆默认值和内联策略。
> 
> **我从哪里获得服务器和客户端系统？**
> 
> 客户端和服务器系统都通过 32 位 Solaris 和 Linux 下载来下载。对于 32 位 Windows，如果您下载 JRE，您只能获得客户端，您需要下载 SDK 才能获得这两个系统。
> 
> 对于 64 位，仅包括服务器系统。在 Solaris 上，64 位 JRE 是 32 位发行版之上的覆盖。但是，在 Linux 和 Windows 上，它是一个完全独立的发行版。
> 
> **我希望java默认为-server。我有很多无法更改（或不想更改）的脚本。有没有办法做到这一点？**
> 
> 从 Java SE 5.0 开始，除了 32 位 Windows 之外，服务器 VM 将在服务器级机器上自动选择。服务器级机器的定义可能因版本而异，因此请查看相应的人体工程学文档以了解您的版本的定义。对于 5.0，它是 5.0 Java[tm] 虚拟机中的人体工程学。
> 
> **我应该先预热循环以便 Hotspot 编译它们吗？**
> 
> 不需要为 HotSpot 预热循环。HotSpot 包含堆栈替换技术，该技术将编译一个正在运行（解释）的方法，并在它仍在循环中运行时替换它。无需浪费您的应用程序时间来预热看似无限（或非常长时间运行）的循环以获得更好的应用程序性能。

# python - Sublime Text 2 :: Python 代码补全

> ID：15125699
> 
> 赞同：5
> 
> 时间：2013-02-28T01:11:21.767
> 
> 标签：python, ide, sublimetext2, sublimetext

我正在尝试让代码建议（下拉框）正确建议。

现在它没有。它只是或多或少地建议已经在正在编辑的文件中的标识符和模块（意味着文件范围内）。例如，如果我试试这个：

import numpy <--- 不建议输入 numpy。

numpy.a <--- 在这里，不建议以“a”开头。

我已经在各个站点上实现了许多建议，包括以下内容，但没有成功获得正确的代码完整建议出现，或者有时根本出现：

```
- Installed SublimeRope
- "use_simple_completion": true  (in SublimeRope.sublime-settings)
- "auto_complete_triggers": [ {"selector": "source.python - string - comment - constant.numeroc", "characters": "."} ]  (in Pyhon.sublime-settings)
- etc. 
```

我错过了什么吗（我当然是:)）。欣赏建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T22:32:15.937

Sublime 的自动完成功能旨在匹配当前文件。

如果你想基于语言的句法特性来完成代码，你有很多选择，但我建议以下一些组合：

*   安装[CodeIntel 包](https://github.com/Kronuz/SublimeCodeIntel)（[包控制说明在这里](https://tutsplus.com/lesson/package-control/)）
*   使用片段
    *   通过包控制安装 Python 片段（我喜欢 sublime-unittest）。
    *   [创建自己的片段的说明](https://tutsplus.com/lesson/your-first-snippet/)。

希望有帮助。

# javascript - jQuery 使用下一个/上一个按钮滚动到下一个 div 类

> ID：15125703
> 
> 赞同：7
> 
> 时间：2013-02-28T01:11:44.757
> 
> 标签：javascript, jquery, scroll, frontend

我想要的是固定导航，使用 NEXT 和 PREV 按钮基本上将页面滚动到具有“section”类的下一个 div。

我已经设置 jQuery 实质上为 NEXT 和 PREV href 添加了一个点击功能。然后，此单击功能将使用 ScrollTop 移动到具有 .section 类的下一个 duv。

这是jQuery：

```
$('div.section').first();
// binds a click event-handler to a elements whose class='display'
$('a.display').on('click', function(e) {
    // prevents the default action of the link
    e.preventDefault();
    // assigns the text of the clicked-link to a variable for comparison purposes
    var t = $(this).text(),
      that = $(this);
      console.log(that.next())    
      // checks if it was the 'next' link, and ensures there's a div to show after the currently-shown one
      if (t === 'next' && that.next('div.section').length > 0) {
      //Scroll Function
      $('html, body').animate({scrollTop:that.next('div.section').scrollTop()});
  } 
    // exactly the same as above, but checking that it's the 'prev' link
    else if (t === 'prev' && that.prev('div.section').length > 0) {
      //Scroll Function
       $('html, body').animate({scrollTop:that.prev('div.section').scrollTop()});     
  }
}); 
```

我目前正在使用带有大量评论的 jQuery 开发 JSfiddle，以帮助您消化：http: [//jsfiddle.net/ADsKH/1/](http://jsfiddle.net/ADsKH/1/)

我有一个 console.log 目前正在检查 (that.next()) 以确定下一个 .section 将是什么，但它给了我一些非常奇怪的结果。

为什么这没有按预期工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T01:58:37.383

你`that`找不到 a`.next('.section')`因为它嵌套在里面`.navigation`。

来自`.next()`.

> 获取匹配元素集中每个元素的紧随其后的兄弟。

[这是一个基于您的代码的工作示例](http://jsfiddle.net/aVJBY/)

# java - 从字符串中获取数值

> ID：15125705
> 
> 赞同：0
> 
> 时间：2013-02-28T01:11:50.067
> 
> 标签：java, regex, string

如果我有字符串

```
thisIsSomthing=4891\r\n
thisIsSomthingElse=27398472\r\n
thisIsNumber1=1\r\n 
```

我怎么找到

thisIsNumber1

然后使用正则表达式返回 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:21:44.103

这假设您确实将发布的内容放在字符串中，而不是在文件中。在处理属性时，您应该使用`Properties`而不是正则表达式：

```
 String yourString = ...
    Properties prop = new Properties();
    try {
        prop.load(new StringReader(yourString));
        String result = prop.getProperty("thisIsNumber1");
        System.out.println(result);
    } catch (IOException e) {
        System.out.println("Error loading properties:");
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:15:02.153

/thisIsNumber1=(\d+).*/

它将在捕获组 1 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T01:25:14.047

```
 String line="thisIsNumber1=1\r\n";
 String temp=line.split("\\r?\\n")[0].split("=")[1];
 System.out.println("Value="+temp+"*"); // 1* "*" shows nothing is concatenated after 
 the character in the output 
```

# drupal - Drupal CMS 页面最新消息仅显示给管理员

> ID：15125707
> 
> 赞同：0
> 
> 时间：2013-02-28T01:11:52.460
> 
> 标签：drupal, drupal-7

我有一个从另一家公司接手的客户页面，Drupal 中的“最新消息”页面有些奇怪。当用户发布新闻文章时，信息会显示在首页块中，并且还意味着显示在最新的新闻页面上。在最新的新闻页面中，只有当您以用户身份登录时才会显示新闻，而不是未登录的人。

编辑页面时，将执行以下查询以获取最新消息。

```
 SELECT node.nid AS nid, node.title AS node_title, node.created AS node_created, 'node' AS field_data_field_news_image_node_entity_type, 'node' AS field_data_body_node_entity_type
FROM 
{node} node
WHERE (( (node.status = '1') AND (node.type IN  ('news')) ))
ORDER BY node_created DESC
LIMIT 4 OFFSET 0 
```

由于我在 Drupal 中没有得到很好的修饰，因此它可能是非常基本的东西，并且会喜欢任何人的想法。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:18:21.983

网站上可能有匿名页面缓存设置。你可以去配置 -> 开发 -> 性能来确认它是否打开，修改设置，如果需要，清除它。

# jquery - 悬停可放置时更改拖动克隆的大小？

> ID：15125708
> 
> 赞同：1
> 
> 时间：2013-02-28T01:11:52.627
> 
> 标签：jquery, drag-and-drop, hover, height, width

```
$(".drag").draggable({
helper: 'clone',
appendTo: "body"
});

$( ".drop" ).droppable({
over: function(event, ui) {
       $(ui.draggable).css({width:'30px',height:'30px'});
        },

drop: function( event, ui ) {
    if($(ui.draggable).parent() !==$(this)){
        $(ui.draggable).appendTo($( this ));
        $(ui.draggable).tooltip({ disabled: true });
        $(ui.draggable).css({float:'left'});
      }
      }}); 
```

当我将鼠标悬停在可放置区域上时，我试图更改拖动的克隆项目的大小，但保持原来的大小相同（这样当我在正确的放置区域上时，附加到鼠标的项目会缩小）。此代码更改原始但不更改克隆。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:25:26.717

这完成了这项工作。直接访问克隆助手。

```
$( ui.helper).css({width:'30px',height:'30px'}); 
```

# android - 使用 FragmentStatePagerAdapter 时刷新片段视图

> ID：15125710
> 
> 赞同：8
> 
> 时间：2013-02-28T01:12:17.900
> 
> 标签：android, android-fragments, android-viewpager, checkedtextview, fragmentstatepageradapter

似乎之前讨论过刷新问题，但没有一个解决方案对我有用。

**我正在尝试做的事情：** 我正在使用 FragmentStatePagerAdapter。适配器的每个位置都包含一个片段，该片段具有线性布局，具有象棋一样的外观，每个单元格都由 CheckedTextView 表示。

还有一个侦听器，它应该侦听点击并删除单元格上的先前选择并进行新选择。

**什么工作：** 每个片段都正确加载了所有数据/默认状态（在片段加载到列表中时计算）

当我单击一个单元格时，保存的单元格列表中的所有状态都被正确获取，并且我可以在调试时更改查看代码中的状态更改。同时，我为表示单元格的 CheckedTextView 分配了一个新状态。设置如下：

```
CheckedTextView cellView = (CheckedTextView) GridRow.getChildAt(c);
                                cellView.setSelected(false);
                                cellView.setChecked(false);
                                cellView.setTag(cellsChess.get(i).get(c)); 
```

**问题：** 即使正确存储和分配了值，也无法刷新视图，但视图中单元格的值也不会更新。

**我尝试过但不起作用的提示：** *1\. 调用 adapter.notifyDataSetChanged:* 只有在我们覆盖了 FragmentStatePagerAdapter 时才能调用：

```
@Override
    public int getItemPosition(Object object){
        return POSITION_NONE;
    } 
```

*2\. 为 DestroyItem 添加 Overriden 方法，并将片段添加到 getItem 上的 Map：*

这不合适，因为我正在使用 FragmentStatePagerAdapter，因此使用此 pagerAdapter 的全部目的将不复存在。

*3.调用invalidate：* 这个场景不合适，需要实时刷新。

*4\. instanceiteItem() 中的 setTag() 方法：* 我认为这在这种情况下不合适。

**引用的线程：** [在恢复活动时刷新 FragmentStatePagerAdapter 上的图像](https://stackoverflow.com/questions/13695649/refresh-images-on-fragmentstatepageradapter-on-resuming-activity)

[ViewPager PagerAdapter 不更新视图](https://stackoverflow.com/questions/7263291/viewpager-pageradapter-not-updating-the-view)

[动态更新 ViewPager？](https://stackoverflow.com/questions/10849552/android-viewpager-cant-update-dynamically)

[notifyDataSetChanged 无法更新 ListView](https://stackoverflow.com/questions/14137760/notifydatasetchanged-fails-to-update-listview)

我试图尽可能清楚地说明我的问题，如果有人需要更多说明，请询问。

紧急回复将不胜感激，

干杯

****更新*****

我使用的是 ViewPagerIndicator，而不是默认的 ViewPager。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T17:08:48.507

关于 notifyDataSetChanged() 函数，我有两种不同的体验。

当我使用[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)的子类来更新 ListView 时，它可以正常工作。当我调用 notifyDataSetChanged() 时，ListView 项目被更新。

但是，当我使用[FragmentStatePagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html#pubmethods)的子类更新 ViewPager 时，调用 notifyDataSetChanged() 不起作用。NotifyDataSetChanged() 负责调用所有注册的[DataSetObserver](http://developer.android.com/reference/android/database/DataSetObserver.html)的 onChanged() 函数，但观察者并没有像 ArrayAdapter 中那样自动注册。你必须自己做地面工作。

令我惊讶的是，DataSetObserver 不是一个接口，而是一个抽象类。所以我不能简单地在我的片段子类中实现它。我必须定义 DataSetObserver 的子类，然后在此类中定义一个成员字段作为对我的片段的引用，并在覆盖的 onChanged() 函数中更新您的视图显示。代码如下：

```
public class DetailFragDataSetObserver extends DataSetObserver {
private DetailTextFragment view_instance;
protected static ArrayList<DetailFragDataSetObserver> list = new ArrayList<DetailFragDataSetObserver>();

public DetailFragDataSetObserver(DetailTextFragment f){
    view_instance = f;
    list.add(this);
}
public DetailTextFragment getView(){
    return view_instance;
}
public static DataSetObserver findDataSetObserverFor(DetailTextFragment f){
    for ( int i = 0; i<list.size(); i++){
        if ( list.get(i).getView() == f)
            return list.get(i);
    }
    return null;
}
public static void release(DataSetObserver observer){
    list.remove(observer);
    ((DetailFragDataSetObserver)observer).view_instance = null;
}
@Override
public void onChanged(){
    assert null != view_instance;

    view_instance.vUpdateData();
}
} 
```

你必须要小心。您需要记住在覆盖的 fragment.onDestroy() 中取消引用并取消注册 DataSetObserver 对象，否则无法对 Fragment 进行垃圾收集。

后来，通过查看源代码，我发现 ArrayAdapter 和 FragmentStatePagerAdapter 并不是兄弟姐妹。他们完全不同。它们实际上来自不同的包：

```
 android.widget.ArrayAdapter
  android.support.v4.app.FragmentStatePagerAdapter 
```

这就是为什么前者很容易工作，而后者却没有。

# python - 如何获取带有特定标签的 RackSpace 服务器？

> ID：15125712
> 
> 赞同：5
> 
> 时间：2013-02-28T01:12:32.153
> 
> 标签：python, openstack, rackspace-cloud, rackspace, pyrax

试图获取在某个标签下注册到我们的 RackSpace 帐户的所有服务器。

使用 RackSpace 的 OpenStack 的 Python 绑定[`pyrax`](https://github.com/rackspace/pyrax/blob/master/docs/pyrax_doc.md)，我们还没有找到一种方法来做到这一点。有没有办法用那个库来实现它，或者是否有另一个 Python 库可以做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T16:13:33.920

我是 的作者`pyrax`。目前无法通过 pyrax 访问标签信息，因为该信息不会从 API 返回。但我同意这将是有用的信息，所以我正在与相关的各个团队交谈，看看有什么可能。当我听到什么时，我会在这里跟进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T15:44:49.993

在我看来，云服务器的元数据当前可用，其中似乎包含服务器的标签。

您可以使用 pxrax 列出服务器并过滤元数据。

# scheme - 为什么这个打印是反的？

> ID：15125715
> 
> 赞同：1
> 
> 时间：2013-02-28T01:12:53.103
> 
> 标签：scheme, racket

```
(define (square-list items)
  (define (iter things answer)
    (if (null? things)
        answer
        (iter (cdr things)
              (cons (square (car things))
                    answer))))
  (iter items nil)) 
```

当我进入

```
(square-list (list 1 2 3 4)) 
```

它返回 (16 9 4 1) - 为什么会倒退？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T01:29:16.560

您正在使用尾递归构造输出列表，为此，您`answer`通过附加到列表的*头部*来累积。自然地，这将产生一个反向列表。你有几个选项可以解决这个问题，一个是放弃尾递归：

```
(define (square-list items)
  (if (null? items)
      nil
      (cons (square (car items))
            (square-list (cdr items))))) 
```

其他，在处理之前反转列表：

```
(define (square-list items)
  (define (iter things answer)
    (if (null? things)
        answer
        (iter (cdr things)
              (cons (square (car things))
                    answer))))
  (iter (reverse items) nil)) 
```

还有另一种选择：在末尾附加元素，而不是使用它们：

```
(define (square-list items)
  (define (iter things answer)
    (if (null? things)
        answer
        (iter (cdr things)
              (append answer
                      (list (square (car things)))))))
  (iter items nil)) 
```

但是，每个选项都有自己的取舍：

*   第一个选项不是尾递归（尽管它是[尾递归模 cons](http://en.wikipedia.org/wiki/Tail_call#Tail_recursion_modulo_cons)）
*   第二个选项需要一个额外的遍历和一个额外的列表（当列表反转时会发生这种情况）
*   第三个选项是二次的，因为每个追加操作都会遍历列表以在末尾添加元素

考虑到所有因素，最好的尾递归选项将是第二个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:20:15.733

问题是你的`cons`陈述。如果您从以下位置切换订单：

`(cons (square (car things)) answer)`

到：

~~`(cons answer (square (car things)))`~~

您的列表将按照您想要的顺序出现。

我总是觉得这样写要容易得多：

```
(define (square-list2 items)
  (square-list-helper items '())
)

(define (square-list-helper items squares)
  (cond
    [(empty? items) squares]
    [else (append 
             squares 
             (square-list-helper (cdr items) (list (square (car items)))))]
    )
 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T01:30:40.877

看两个元素的简单案例：

```
(square-list '(2 3)) 
```

这导致：

```
(iter '(3)
      (cons (square 2) nil)) 
```

==

```
(iter '(3) '(4)) 
```

然后递归调用：

```
(iter '()
      (cons (square 3) '(4)) 
```

==

```
(iter '() '(9 4)) 
```

然后这将调用 的基本情况`iter`，它只返回`answer`。

所以它正向遍历列表，但是在处理每个元素时，正方形被放在列表的*前面*，`answer`所以结果是向后构建的。

简单的解决方法是更改`(cons (square (car things)) answer)`​​为：

```
(append answer (list (square (car things)))) 
```

这会将新结果放在末尾而不是开头。然而，这通常被认为是一种糟糕的方法，因为它每次都必须重建结果列表，复制 O(n) 个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T01:30:45.920

您的 cons-ing 顺序错误：首先是递归处理的列表的其余部分，然后是处理当前元素的结果。这将在处理它的同时反转您的列表。试试这个：

```
(define (square-list items)
  (define (iter things answer)
    (if (null? things)
      answer
      (iter (cdr things)
            (append answer (list (square (car things)))))))
(iter items (list))) 
```

# java - 了解'getView（）'

> ID：15125723
> 
> 赞同：0
> 
> 时间：2013-02-28T01:13:33.513
> 
> 标签：java, android

我有一个数组，我需要访问依赖于 listView 中的哪个项目已被单击的元素。

发送到 getView() 方法的第一个 int 值，即 int arg0，这是被点击的数组元素的 ID？我是否需要从列表视图 onClickListner 分配 ID？

```
public View getView(int arg0, View arg1, ViewGroup arg2) {
} 
```

我相信以下两种重写方法也必须实现：

```
@Override
public Object getItem(int arg0) {
    return null;
}

@Override
public long getItemId(int arg0) {
    return 0;
} 
```

目前我的应用程序只允许我访问数组的元素 0（第一个元素），所以我相信它会忽略其他 19 个元素，无论单击我的列表视图中的哪个项目。

```
private List<GeoName> names = new ArrayList<GeoName>();

@Override
public Object getItem(int arg0) {
    return null;
}

@Override
public long getItemId(int arg0) {
    return 0;
}

@Override
public View getView(int arg0, View arg1, ViewGroup arg2) {

    GeoName location = this.names.get(arg0);

    Location l = location.getGeometry().getLocation();

    Latt = l.getLat();
    Longg = l.getLng(); 
```

从上面的代码来看，在调用 name.get()' 方法时是否应该自动为 'arg0' 分配元素 ID 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:00:25.613

ListView 中的每个项目都是一个视图，getView 负责为您的 Listview 创建这些视图。以下是 Android 文档的摘录：

```
public abstract View getView (int position, View convertView, ViewGroup parent)

**Parameters** 
```

> **position：**该项目在适配器的数据集中我们想要查看的项目的位置。 **convertView：** 如果可能的话，要重用的旧视图。注意：在使用之前，您应该检查此视图是否为非空且类型合适。如果无法将此视图转换为显示正确的数据，则此方法可以创建一个新视图。异构列表可以指定其视图类型的数量，以便此视图始终是正确的类型（参见 getViewTypeCount() 和 getItemViewType(int)）。 **parent ：** 此视图最终将附加到的父级

以下是有关如何为 ListView 实现侦听器的示例代码片段：

```
lv = (ListView) findViewById(R.id.listview);
lv.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, listview_array));
lv.setOnItemClickListener(new OnItemClickListener()
{
    public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
    {
        AlertDialog.Builder adb = new AlertDialog.Builder(
        ListviewOnclickExample.this);
        adb.setTitle("ListView OnClick");
        adb.setMessage("Selected Item is = "+ lv.getItemAtPosition(position));
        adb.setPositiveButton("Ok", null);
        adb.show();                     
    }
 }); 
```

我建议您使用 ConvertView 和 ViewHolder 样式来使您的 Listview 高效。[这](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)是一个很好的链接，描述了这种风格是如何工作的。[您可以在此处](https://github.com/asabbarwal/EffecientListViewDesign)从我的这种样式的实现中下载完整的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:21:07.620

getView 与点击无关。它获取列表中第 N 个位置的视图，其中 N 是第一个参数。它只能由 ListView 本身调用，ListView 在滚动时使用它来初始化其视图。

# php - Ajax 搜索不会运行

> ID：15125725
> 
> 赞同：-1
> 
> 时间：2013-02-28T01:13:41.030
> 
> 标签：php, jquery, ajax, pdo

我已经将我的脚本上传到 Fiddle，可以在这里找到：http: [//jsfiddle.net/XdPk5/1/](http://jsfiddle.net/XdPk5/1/)

我似乎无法让它运行，我正在尝试添加错误，例如行数 = 0 以及是否已发送空帖子

javascript:

```
 $(document).ready(function(){
            $(".search").click(function(){
                $.post(
                    "search.php", 
                    { keywords: $(".keywords").val() }, 
                      function(data) {
                        $("div#search").empty();
                        obj = JSON.parse(data);
                        $("div#search").append(obj.id + " " + obj.title);
                      },
                    "json"
                );
            });
        }); 
```

php:

```
<?php
$db = new PDO('mysql:host=localhost;dbname=db','root','');

$keywords = (isset($_POST['keywords']) === true) ? $_POST['keywords'] : '';
if (empty($keywords) === true) {
    echo json_encode( "error" );

} else {
    $query = $db->prepare("SELECT `media`.`id`, `media`.`title` FROM `media` WHERE `media`.`title` LIKE :keywords");

    if ($query->rowCount() == 0) {
        echo 'empty';

    } else {
        $query->bindValue(':keywords', '%' . $keywords . '%', PDO::PARAM_STR);

        $arr = array();
        $query->execute();
        while( $row = $query->fetch(PDO::FETCH_ASSOC) ) {
            $arr[] = array( "id" => $row["id"], "title" => $row["title"]);
        }
        echo json_encode( $arr );
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:20:29.443

这是错误的：

```
$query = $db->prepare("SELECT `media`.`id`, `media`.`title` FROM `media` WHERE `media`.`title` LIKE :keywords");

if ($query->rowCount() == 0) {
    echo 'empty';

} else {
    $query->bindValue(':keywords', '%' . $keywords . '%', PDO::PARAM_STR); 
```

*   `rowCount`执行查询之前没有；
*   如果输入了多个单词，则需要构建 sql 查询，添加单个关键字并使用`OR`or将它们链接在一起`AND`。

此外，您在哪里`echo 'empty';`没有返回有效的 json。

在 javascript 中，您的意思可能`dataType: "json"`不仅仅是`"json"`因为这不是一个有效的选项。

# facebook - 与 Facebook API 的 Web 应用程序交互

> ID：15125726
> 
> 赞同：0
> 
> 时间：2013-02-28T01:13:42.953
> 
> 标签：facebook, facebook-c#-sdk

忍受我:)

我有一个网站 (ASP.NET MVC4)，我打算在其中允许用户在 Facebook 上分享偶尔的照片。这些照片是不公开的，所以链接是不够的。相反，我想将照片上传到用户的 Facebook 帐户。据我了解，我的 Facebook 应用程序可以支持这一点，并且它将在用户的个人资料中创建一个特定于应用程序的相册。这是理想的。

现在，我的 Facebook 开发经验（以及一般的 OAuth 经验）充其量是最少的。但据我所知，流程会是这样的：

*   向用户显示 Facebook 资源的链接，其中包含：
    *   我的 Facebook 应用程序 ID
    *   我请求的权限
    *   回电到我的网站
*   Facebook 会提示用户接受权限并重定向到回调（如果他们已经授予权限，则立即重定向）
*   重定向回我网站上的资源将在查询字符串中包含一个时间敏感的令牌，我将在我的服务器端代码（在本例中为 C# SDK）中使用它来上传到用户的配置文件，也许还有要在图形 API 请求中使用的用户 Facebook ID。

在这一点上这只是概念性的，而我一直在寻找一些具体的例子。我发现的任何示例都倾向于涉及稍微不同的流程来完成略有不同的事情，并且*超出*了我想要完成的范围。所以这就是为什么我说我一直在“拼凑”。

这个概念流程准确吗？这是我应该如何进行的吗？如果是这样，那么问题的实质是：

*   我将引导用户访问的 Facebook 资源的格式是什么？
*   我要返回的回调参数的格式是什么？

或者......我在这里完全走错了方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:46:27.980

你已经正确地将它拼凑在一起。但对于第三点，它有点不同。Facebook 会重定向回您网站上的资源，但它会在查询字符串中包含一个简单的访问代码，而不是访问令牌。
`http://yoursite.com/FacebookShare.aspx?code=access_code`

您必须将此代码与用户访问令牌交换，以便您可以代表用户调用图形 API。

有关如何交换和您后面的两个问题，请阅读本[教程](http://www.thepcwizard.in/2013/02/working-with-facebook-c--sharp-sdk.html)。
如果您遇到任何问题，请发表评论。一个 MVC 特定的教程在[这里](http://blog.ntotten.com/2012/12/19/facebook-authentication-with-the-facebook-c-sdk-and-asp-net-mvc-4/)。

# c++ - 通过指向其非模板父类的指针将模板值分配给类模板

> ID：15125730
> 
> 赞同：3
> 
> 时间：2013-02-28T01:14:08.280
> 
> 标签：c++, templates, inheritance, polymorphism, virtual

我正在尝试制作一个`Template`可以存储模板值的 C++ 类。但是，我需要在知道模板值的类型之前创建指向此类的指针。为此，我创建了一个`Base`模板类继承自的抽象类。我创建指向 的指针`Base`，当它们被分配时，我使用`basePtr = new Template<TYPE>`.

这里的问题在于给`Template`. 我能想到的每一种方法（我想使用重载的赋值运算符）都需要一个带有模板数据类型的方法作为形式参数。因为`Template`对象只能通过`Base`指针访问，所以我必须在`Base`. 但是，虚方法不能包含模板数据类型，并且`Base`' 签名中的虚方法必须与`Template`' 方法匹配。

这是我要做的一个例子：

```
class Base {
    public:
        /* THIS IS ILLEGAL - can't have template virtual method
        template <class V>
        virtual void operator =(const V& newValue) = 0;
        */
};

template <class ValueType>
class Template : public Base {
    private:
        ValueType *value;
    public:
        void operator =(const ValueType& newValue) {
            *value = newValue;
        }
};

int main() {
    Base *theObject;                  // Datatype for template not known 
    theObject = new Template<string>; // At this point, it will be known

    // NOW, THIS DOESN'T WORK - no virtual assignment overload in Base
    *theObject = "Hello, world!";

    return 0;
} 
```

如果我以完全错误的方式进行此操作，并且如果我的方法很愚蠢，我深表歉意——这是我第一次尝试真正的 OOD。有没有办法解决我没有看到的这个问题？我知道我可以创建一长串纯虚函数，`Base`用不同的输入类型重载赋值运算符，如下所示：

```
virtual void operator =(const string& newValue) = 0;
virtual void operator =(const int& newValue) = 0;
virtual void operator =(const long& newValue) = 0;
... 
```

但是，我希望用户能够在`Template::value`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:56:41.177

实现您想要实现的目标的一种方法是使用[Boost.Any](http://www.boost.org/doc/libs/1_53_0/doc/html/any.html)（一个著名的仅标头库）。下面是一个演示。代码是一步一步注释的，所以你应该能看懂，下面**[是](http://liveworkspace.org/code/10CpDi%2467)**一个活生生的例子：

```
#include <stdexcept>       // Standard header for exception classes
#include <string>          // Standard header for std::string
#include <boost/any.hpp>   // The Boost.Any library header
#include <iostream>        // This program prints some output

class Base
{
public:
    virtual void operator = (boost::any val) = 0;
    //                       ^^^^^^^^^^
    //                       This can hold (almost) "any" value

    // You need a virtual destructor if you want to delete objects
    // of subclasses of this class through a pointer to this class!
    virtual ~Base() { }
};

template <class ValueType>
class Template : public Base
{
private:
    ValueType value;
//  ^^^^^^^^^
//  I do not see why using a pointer in this case. Manual memory
//  management just complicates things. However, if your really
//  need to do it and your really know what you're doing, go ahead.
//  Just remember to delete your pointer at destruction and not to
//  dereference it before it points to an allocated object (in your
//  original text, both of these things are NOT done correctly).
public:
    virtual void operator = (boost::any val)
    {
        // Attempt a cast to detect if the value we are trying to
        // assign to this object is of the appropriate type...
        ValueType* pVal = boost::any_cast<ValueType>(&val);
        if (pVal == nullptr)
        {
            // ...it is not! Throw an exception...
            throw std::logic_error("Incompatible type");
        }

        // The value is OK: assign it...
        value = *pVal;
    }
};

int main()
{
    Base *theObject;
    theObject = new Template<std::string>;

    try
    {
        // This assignment will succeed...
        // Wrapping the string literal in a std::string object is necessary
        // because boost::any cannot be initialized from an array (and in C++
        // string literals are arrays of characters).
        *theObject = std::string("Hello, world!");

        // This assignment will fail!
        *theObject = 1;
    }
    catch (std::logic_error const& e)
    {
        // Handle the exception...
        std::cout << e.what();
    }

    delete theObject; // <=== DON'T FORGET THIS!

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:12:38.160

听起来 boost::any 有点像你正在寻找的东西。不需要奇怪的继承层次结构，它可以自己存储任意类型（有一定的限制）。

现在我关心的是你打算如何重新获得你的价值？您的代码如何确定该单元格是否包含 int、std::string 或其他一些它以前从未听说过的用户定义类型，而不是尝试将其 any_cast 到某个类型列表（如果类型未列出...）？

# html - 如何使用表单 (HTML) 导航 iframe

> ID：15125732
> 
> 赞同：1
> 
> 时间：2013-02-28T01:14:25.367
> 
> 标签：html, forms, iframe, navigation, submit

好的，我在一个名为“iframe”的网站上嵌入了一个 iFrame，一个名为“form”的单行文本表单和一个名为“navigate”的提交按钮

当我按“导航”时，我希望“iframe”导航到在“表单”中键入的 url

另外：是否可以将 iframe 的 url**添加**到网页 url 的末尾，**例如** [http://www.example.com.htm/http://www.stackoverflow.com/](http://www.example.com.htm/http://www.stackoverflow.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:33:27.690

您可以通过让“导航”按钮调用 onClick javascript 函数或在提交时执行操作来设置 iframe URL

```
<form action="JavaScript:navigate()">...</form> 
```

至于函数本身，您可以为 iframe 设置一个 ID，javascript 可以使用它来更改 URL 位置。

```
<script> function navigate(){ window.frames['Iframe'].document.location.href = document.getElementByID('newLink').value; } </script> 
```

对于 iframe 做：

```
<iframe id="Iframe" src=""></iframe> 
```

所以你的最终代码应该是这样的。

```
 <html>
    <head>
    <title>iFrame</title>
    <script>
    function navigate(){
window.frames['Iframe'].document.location.href =  document.getElementByID('newLink').value;
}    
</script>
    </head>
    <body>
    <form action="JavaScript:navigate()">URL: <input type="text" id="newLink"> 
```

```
 <iframe id="Iframe" src=""></iframe> 

    </body>
    </html> 
```

# php - 在mysql中插入多个复选框值

> ID：15125733
> 
> 赞同：0
> 
> 时间：2013-02-28T01:14:32.330
> 
> 标签：php, joomla

我有一个用于预约的 joomla 组件，并且我有用于预约开始日期的复选框...我的问题是我一次只能预约一个，我希望能够选中多个框，因此这些框的值可以保存在mysql中，当我选中多个复选框时，只有最后一个选中的复选框保存在数据库中...

这是来自joomla组件的代码，我认为必须对其进行调整，所以如果可以的话，请帮助大家...

这是复选框的代码...

```
$timetableHTML .= '<td class="timeSlot timeFree" ><input type="checkbox" name="appointment[]" value="'.$startKey.'" onclick="changeTimes(\''.$calendar->min_duration.'\',\''.$startKey.'\',\''.$endKey.'\')"/></td>'; 
```

这是组件控制器中的保存功能...

```
function save() {
    global $app;
    JRequest::checkToken() or jexit( 'Invalid Token' );

    $db =& JFactory::getDBO();
    $row =& JTable::getInstance('appointments', 'Table');
    $post   = JRequest::get( 'post',4 );
    if (!$row->bind( $post )) { JError::raiseError(500, $row->getError() ); }
    for ($i=1;$i<=10;$i++) {
        if (is_array($row->{'field'.$i})) $row->{'field'.$i} = implode('|',$row->{'field'.$i}); $row->{'field'.$i} = strip_tags($row->{'field'.$i});
    }
    if (!$row->check()) { JError::raiseError(500, $row->getError() ); }
    if (!$row->store()) { JError::raiseError(500, $row->getError() ); }
    $row->checkin();

            if ($this->config->emails){
                $this->notifyOwner(array($row->id));
                $this->notifyAppointee(array($row->id));
            }

            $url = JRoute::_('index.php?option=com_jxtcappbook'.(JRequest::getInt( 'pop', 0) ? '&view=complete&tmpl=component' : ''));
    $this->setRedirect($url ,JText::_( 'Termin je zakazan!'.$pop ));
} 
```

我用谷歌搜索了一下，我想我需要用数组设置 jrequest::get，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:57:51.690

假设 Joomla >1.6。由于您使用`JRequest`了合理的数量：

```
$appointments = JRequest::getVar('appointments', null, 'post', 'array'); 
```

或者更好，因为这将在 3.0 后被弃用，您可以使用 JInput：

```
$jinput = JFactory::getApplication()->input;
$appointments = $jinput->post->get('appointments', 'null', 'ARRAY'); 
```

清理输入并添加到数据库：

```
foreach (array_keys($appointments ) as $element) {
    $myappointments[] = $db->quote($element);
}

// construct query using implode and use comma separator
$myappointments = implode(',', $myappointments );
$db =& JFactory::getDBO();
$query  = $db->getQuery(true);
$query = sprintf('UPDATE $db->quoteName(#__mytable) SET $db->quote(...) WHERE $db->quote(...) IN (%s)', $myappointments );
$db->setQuery($query);
$db->query(); 
```

你明白了……

**编辑（根据您的评论）：**

我仍然不知道你想要达到什么目的。所以我很难提供方向。我会再试一次。我猜你想把从表单中检查的值放入数据库中。

```
//this pulls out the values in an array of all the things that have been "checked" (selected in the checkbox)
$jinput = JFactory::getApplication()->input;
$appointments = $jinput->post->get('appointments', 'null', 'ARRAY');

//**This is not code you need** I just want to illustrate what you are getting.
//This is looping through the values of the checkboxes to see what you have
for($i=0; $i < count($appointments); $i++){
    echo "Selected " . $appointments[$i];
} 
```

我之前提供的代码向您展示了如何获取值并将其存储到数据库中。我无法对数据库给出说明，因为我不知道数据库结构。

# ios - 保存和删除 NSManagedObject & NSManagedObjectContext

> ID：15125734
> 
> 赞同：3
> 
> 时间：2013-02-28T01:14:33.867
> 
> 标签：ios, core-data, fetch, save, nsfetchrequest

三个问题，但它们都是相关的。如果你喜欢我可以把它们分成三个问题，这样你就可以获得更多的学分。如果你想让我这样做，请告诉我。

我有以下代码允许我访问 NSManagedObject

```
self.managedObjectContext = [(STAppDelegate *)[[UIApplication sharedApplication]  delegate] managedObjectContext];

NSError *error;
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"LetsMeet" inManagedObjectContext:managedObjectContext]];
NSArray *objectArray = [managedObjectContext executeFetchRequest:request error:&error];
if(objectArray.count==0){
    letsMeet = (LetsMeet *) [NSEntityDescription insertNewObjectForEntityForName:@"LetsMeet" inManagedObjectContext:managedObjectContext];
    } else{
    letsMeet = (LetsMeet *)[objectArray objectAtIndex:0];
    } 
```

上面的代码允许我保存和检索属性。即我可以访问letsMeet.attribute 来保存和获取。

问题 1：如何删除并启动一个全新的 managedObjectContext。即用户有一个他在场景之间填写的表格。当用户点击导航控制器上的 Next 按钮时，每个场景的所有内容都会保存到 CoreData。经过几个屏幕后，用户想要取消表单。在这一点上，我想删除到目前为止已保存的所有内容。请提供代码示例。

问题 2：假设用户接近表单末尾并决定保存表单以供以后检索。如何将整个表单的副本保存为 Core Data 中的一个对象。请提供代码示例。

问题 3：我以后如何从 Core Data 中检索保存的对象并显示所有用户保存的内容？请提供代码示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T02:37:51.077

1.  要删除，您只需要从中删除`letsMeet`对象`NSManagedObjectContext`。

    `NSError *error;`
    `[managedObjectContext deleteObject:letsMeet];`
    `[managedObjectContext save:&error];`

由于您始终只有一个对象，因此获取的引用`letsMeet`不是问题。您可以像在代码中那样做。
**更新：** 并且您不需要删除托管对象上下文。它只是一个处理您的对象的空间。问题末尾有更多解释。

2\. 如果`LetsMeet`实体以所有表单元素都是属性的方式建模`LetsMeet`，当您像在代码中那样`managedObjectContext`创建`LetsMeet`对象后保存时，这将保存为单个对象。

3.您已经知道如何检索对象，因为这就是您在代码中所做的事情。一切都变得简单，因为您只使用一个对象。在多个对象获取唯一对象的情况下，您应该实现一个主键，（可能是 formID，即；向 LetsMeet 添加另一个属性）或者您应该知道`objectId`每个对象是什么，然后设置您的谓词相应地获取请求。

```
NSFetchRequest *request = [[NSFetchRequest alloc]init];
[request setEntity:letsMeet];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"formId like %@", formId];
[request setPredicate:predicate];

NSArray *resultsArray =[managedObjectContext executeFetchRequest:request error:&error]; 
```

如果您的 formId 是唯一的，这将返回一个对象数组。

但是，如果您使用 core-data 仅处理一个对象，则可以使用`NSUserDefaults`或写入 plist 文件来执行此操作。这有点矫枉过正。

**更新：** 获取 NSManagedObject 的 objectId：

```
 [letsMeet objectId]; 
```

ManagedObjectContext 就像一个白板。您在数组中拥有的对象，在托管对象上下文中的对象，都是一样的。您可以更改对象、添加对象、删除对象等。只有当您执行 a 时，对象的当前状态是什么`[managedObjectContext save:]`，即写入磁盘。

# c# - 数据编码 - PHP 与 C#

> ID：15125735
> 
> 赞同：0
> 
> 时间：2013-02-28T01:14:41.230
> 
> 标签：c#, php, encryption, md5

我有类似的东西用 PHP 写的：

```
$signature = md5($tosigndata); 
```

现在，我正在尝试在 C# 中复制它：

```
MD5.Create().ComputeHash(Tools.GetBytes(tosigndata)) 
```

但这给了我完全不同的结果。如何更改我的 C# 代码以匹配 PHP 哈希？

PS。是的，我知道`.ComputeHash()`返回`byte[]`，但这并没有改变任何东西，我尝试解码它，它仍然是一个不同的字符串。

**编辑**：`Tools.GetBytes()`返回`Encoding.UTF8.GetBytes(tosigndata);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:48:19.187

在 C# 中试试这个：

```
byte[] asciiBytes = ASCIIEncoding.ASCII.GetBytes(tosigndata); // tosigndata is your string variable
byte[] hashedBytes = MD5CryptoServiceProvider.Create().ComputeHash(asciiBytes);
string hashedString = BitConverter.ToString(hashedBytes).Replace("-", "").ToLower();
// hashString contains your hash data similar to php md5 
```

# java - 使输入读取整数转换并汇总为等式

> ID：15125738
> 
> 赞同：0
> 
> 时间：2013-02-28T01:14:56.697
> 
> 标签：java

我有这段代码，它接受用户输入的数字并将其放入最后的等式中。但是，我在编译时不断收到错误/异常；“错误：变量 convertToNumL 可能尚未初始化。” 我理解错误在说什么，但是，我不知道如何调试它。

这就是我所知道的，try/catch 块以某种方式阻止了变量 convertToNum（它是从 .readLine () 方法派生的）。谁能告诉我如何解决这个问题？

非常感激。

我的部分代码：

```
 if (realNumber2)
    {
      //Question 4: Height
      while (realNumber2 = true) {
        System.out.println ("3) Please enter the height of the triangle face.");

        try
        {
          stringTriangleHeight = myInput.readLine ();

          convertToNumH = Double.parseDouble (stringTriangleHeight);

          Integer.parseInt (stringTriangleHeight);

          System.out.println ("Your triangle height is " + stringTriangleHeight + " " + Units + ".");
          realNumber3 = true;

          break;
        }
        catch (Exception e)
        {
          System.out.println ("That was either a smart remark, a negative number or jibberish.");
          realNumber3 = true;
        }
      }
      while (realNumber3) {

      total1 = convertToNumL * convertToNumW;         //base area, length x width
      total2 = convertToNumL * convertToNumH / 2;     //triangle area using sidelength 'length', base x height / 2
      total3 = convertToNumW * convertToNumH / 2;     //triangle area using sidelength 'width  ,  base x height / 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:23:12.897

这与 try catch 块无关。问题是`convertToNumH`在while循环中初始化。不能保证 while 循环运行（条件可能第一次评估为 false），因此该值可能永远不会被初始化。

要么在循环之外初始化它，要么使用 Do-While 循环。

# ruby - 如何开发 Ruby GEM 而无需先安装？

> ID：15125742
> 
> 赞同：5
> 
> 时间：2013-02-28T01:15:14.243
> 
> 标签：ruby, gem

我正在开发一个我已经分叉的 GEM，我正在尝试为我的应用程序稍微修改它。

我发现它既困难又耗时，因为我所做的每一次改变都必须

1.  卸载
2.  建造
3.  重新安装
4.  运行应用程序

有没有更简单的方法不需要重复上述所有步骤？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T01:24:41.723

## 使用捆绑器在某些应用程序中使用它

如果您的意思是在应用程序中使用它来测试它/使用它，您可以为您的 gem 指定一个路径，甚至指向 Gemfile [http://gembundler.com/gemfile.html中的 git repo](http://gembundler.com/gemfile.html)

喜欢

```
gem "mygem", :path => "~/code/gems/mygem" 
```

## 将其用作独立的宝石。即：像可以在应用程序之外运行的 rspec 或 rake。

只需在运行 gem 命令时指定 gem 二进制文件的路径，例如：

```
$ ~/path_to_my_gem/bin/mygem some args 
```

如果您可以在 gem 目录中执行（即：该命令不会在当前目录中创建文件，或者需要当前目录中的任何特定文件），只需执行以下操作：

```
$ ./bin/mygem some args 
```

请注意，最后一个仅供将来参考，我认为它不适用于 OP 上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T18:23:31.000

使用 require_relative 包含您的文件：

```
require_relative 'yourgem/yourclass' 
```

这是[函数的文档](http://extensions.rubyforge.org/rdoc/classes/Kernel.html)。

# bash - 创建新 shell 时自动源 bash 脚本

> ID：15125743
> 
> 赞同：2
> 
> 时间：2013-02-28T01:15:15.340
> 
> 标签：bash, ubuntu

我有 bash 脚本，其中声明了一些函数，我喜欢在创建新 shell 时自动获取它，以便我可以立即使用这些函数。加个`source ~/setsetup.sh`好像`~/.bashrc`不行。

编辑： ~/.profile 和 ~/.bashrc 都有效。在获取脚本时，我只是有一个愚蠢的错字。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:17:04.050

有几个文件。相关的可能`~/.profile`适合您的情况。它通常用于来源`.bashrc`。

检查`man .profile`详情。何时`bash`启动，因为登录 shell`.profile`是相关的，否则`.bashrc`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T03:00:15.893

如果您创建的新 shell 是登录 shell，它将执行`.bash_login`、`.bash_profile`或`.profile`（无论它先找到哪个）中的一个，而不是`.bashrc`. 通常，如果您使用它们，`.bashrc`则从两个`bash`特定的其中之一获取。您不应该在 中放置任何`bash`特定的命令`.profile`，因为该文件可能会被其他非`bash`shell 读取。例如，如果您决定从 获取脚本`.profile`，则应使用该`. setsetup.sh`表单，并确保`bash`该脚本中没有任何具体内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T01:17:18.123

您正在寻找的是每次创建新的 bash shell 时*应该*`~/.profile`执行哪个。

# ios - 关于 xCode 4.6 的非信息异常信息

> ID：15125747
> 
> 赞同：-1
> 
> 时间：2013-02-28T01:15:30.177
> 
> 标签：ios, xcode, exception, crash

如果我的应用程序崩溃，我会`All Output`像这样在窗口上获取信息：

> 未捕获的异常：*** -[NSPlaceholderMutableString initWithString:]: nil argument 2013-02-28 04:09:15.209 Cpp[948:907]****由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“* ****-[NSPlaceholderMutableString initWithString:]: nil argument' *** First throw call stack: (0x3336b3e7 0x3b05c963 0x3336b307 0x33bf0eb5 0x33c0ab8b 0xd16ed 0xd0a63 0xc3e79 0xc5cfd 0x3336ead4 0x332c628f 0x332c5de3 0x39be081b 0x3336d737 0x332c5208 0x3336ead4 0x332c628f 0x3930bc5b 0x39348ce1 0x333408f7 0x3334015d 0x3333ef2f 0x332b223d 0x332b20c9 0x36e9033b 0x351ce2b9 0xc0109 0xc00a0) libc++abi .dylib：终止调用抛出异常（lldb）***

 ***调用堆栈是这样的：

![在此处输入图像描述](../Images/6ba56ac01a021a6c8af4ace67c62ff61.png)

哪里有帮助解决问题的方法？调用堆栈上的方法在哪里？我的代码行在哪里？xCode 有什么问题以及如何解决此问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T01:29:42.597

这是我为获取堆栈跟踪所做的事情。

在您的 AppDelegate.m 文件中：

```
void uncaughtExceptionHandler(NSException *exception) {

    NSLog(@"Call Stack: %@", exception.callStackSymbols);
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    NSSetUncaughtExceptionHandler(&uncaughtExceptionHandler);

    // The rest of your method here...
} 
```***

# c++ - 主函数返回时的核心转储

> ID：15125749
> 
> 赞同：0
> 
> 时间：2013-02-28T01:16:00.087
> 
> 标签：c++, segmentation-fault, coredump

我有一个应该写入下面定义的 gml 文件的类。该类有一种编写方法。如果我调用该函数，当主函数返回时，我会得到一个核心转储。我可以毫无问题地创建类的对象，它只在调用 write 函数时发生。该函数也没有错误地返回并且程序的其余部分运行。

GML 作家：

```
class GMLWriter {
public:
    void write(List<User*> usr, const char* filename);
};

void GMLWriter::write(List<User*> usr, const char* filename)
{
    cout << "Filename: " << filename << endl;
    ofstream outfile;
    outfile.open(filename);
    if (!outfile.is_open())
        cout << "Couldn't open the file..." << endl;
    outfile << "graph [\n";

    // Write user data
    for (int n = 0; n < usr.size(); n++) {
        cout << "Writing node..." << endl;
        outfile << "node [\n";
        outfile << "id " << usr[n]->getID() << "\n";
        outfile << "name \"" << usr[n]->getName() << "\"\n";
        outfile << "age " << usr[n]->getAge() << "\n";
        outfile << "zip " << usr[n]->getZip() << "\n";
        outfile << "]\n";
    }

    // Write associations
    for (int n = 0; n < usr.size(); n++) {
        List<int> tList = usr[n]->getFriends();
        cout << "Writing edge..." << endl;
        //List<int> tempL = usr[n]->getFriends();
        for (int i = 0; i < tList.size(); i++) {
            outfile << "edge [\n";
            outfile << "source " << usr[n]->getID() << "\n";
            outfile << "target " << tList[i] << "\n";
            outfile << "]\n";
        }
    }

    outfile << "]"; // end graph
    cout << "End function" << endl;
    outfile.close();
} 
```

用户只包含要写入文件的变量，这些方法工作正常。

我已经在调试器中花了几个小时来解决这个问题，但一直没能找到问题所在。任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:27:24.893

尝试查看核心转储： http: [//www.network-theory.co.uk/docs/gccintro/gccintro_38.html](http://www.network-theory.co.uk/docs/gccintro/gccintro_38.html)

# jquery - jquery 变量从一个函数到另一个函数？

> ID：15125751
> 
> 赞同：0
> 
> 时间：2013-02-28T01:16:04.473
> 
> 标签：jquery, function, global-variables

我有 2 个函数，我希望将一个名为“url”的变量传递给第二个函数。

第一个函数从“url”的值中获取一个 href 属性，因为它从我的数据库中吐出，并且是打开模式窗口的触发器。

```
 <a class=\"trigger3\" url=\"".$url."\" href=\"#\"> 
```

函数看起来像这样。

```
 <script type="text/javascript">
 $(document).ready(function(){
    $(".trigger3").click(function(){
            var url=$(this).attr("url");
            $(".panel3").toggle("fast");
            $(this).toggleClass("active");
            return false;
    });
 });
 </script> 
```

我已经确认变量在那里。

第二个函数应该捕获这个变量并将它与提交表单数据一起返回。

这是第二个功能。

```
 <script type="text/javascript">
 function submitForm2() {
    $.ajax({type:'POST', url: 'flagadd.php', data:$('#flagProxy').serialize()+'&url=url', success: function(response) {
    $('#flagProxy').find('.form_result2').html(response);
}});

return false;
 } 
 </script>

 <div class="panel3">
 <form id="flagProxy" onsubmit="return submitForm2();">
 <textarea style="resize:none" name="flag" cols="25" rows="5"></textarea>
 <input type="hidden" name="url" />
 <br>
 <input type="submit" name="submit" value="Submit" />
 <input type="button" name="cancel" value="Cancel" class="trigger3" />
 <div class="form_result2"></div>
 </form>
 </div> 
```

几天来我一直试图解决这个问题，但我不知道该怎么做。我在想要么从函数中调用一个函数，要么以某种方式使变量对这两个函数都是全局的。

感谢您提供的任何帮助，非常感谢，我可以睡个好觉:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:21:03.700

您可以从另一个函数调用一个函数，将值作为参数传递，但如果两个函数都是事件触发的，那么我将使用全局变量来保存该值：

```
 <script type="text/javascript">

 var global;

 $(document).ready(function(){
    $(".trigger3").click(function(){
            var url=$(this).attr("url");
            $(".panel3").toggle("fast");
            $(this).toggleClass("active");
            global = 3;
            return false;
    });
 });

function submitForm2() {
    console.log(global); // 3
    $.ajax({type:'POST', url: 'flagadd.php', data:$('#flagProxy').serialize()+'&url=url', success: function(response) {
    $('#flagProxy').find('.form_result2').html(response);
}});

return false;
}

 </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:26:05.983

不要只是组成 HTML 属性名称。如果您想存储数据，请使用 HTML5`data-*`属性——例如，`data-url="..."`改为。

如果您只想将其作为表单的一部分发送，为什么不在表单中添加一个隐藏字段并更新它呢？

```
<input type="hidden" name="url"> 
```

+

```
var url = $(this).data('url');  // jquery understands HTML5 data-* attributes too
$('#flagProxy input[name=url]').val(url); 
```

更好的是，而不是链接，只需在表单内使用带有值的按钮。

```
<input type="submit" name="url" value="..."> 
```

（我会使用`<button>`，但较旧的 IE 真的很笨，不能正确处理发送其表单值。）

# azure - 在 Azure 上的不同 URL 部署和维护同一 Web 应用程序的多个副本

> ID：15125752
> 
> 赞同：0
> 
> 时间：2013-02-28T01:16:34.707
> 
> 标签：azure

我目前正在调查我的公司使用 Azure 的可能性。

我们自己运行的当前托管情况包括在 IIS 中为我​​们的每个客户提供一个单独的站点，每个客户都有一个虚拟目录，指向我们使用 ASP.Net Web 表单构建的 CMS。我们可以更新该虚拟目录的内容，然后立即为所有客户提供最新版本的 CMS。

我不希望在 Azure 中重现这种确切情况，但我感兴趣的是弄清楚如何在 Visual Studio 中创建单个 Web 应用程序，以这样的方式将该应用程序发布到 Azure 多个站点（我已经指定) 在 Azure 上创建。然后我希望能够对该应用程序进行更改，并以这样一种方式再次发布它，即它的所有站点都一起更新，而不需要每个站点/客户端手动完成某些操作。

我找到的最接近的解释是这个：

[http://www.wadewegner.com/2011/02/running-multiple-websites-in-a-windows-azure-web-role/](http://www.wadewegner.com/2011/02/running-multiple-websites-in-a-windows-azure-web-role/)

这让我很接近，但我不明白的是，当我将此应用程序发布到 Azure 时，我仍然只能在 Azure 管理控制台中看到一个可用的应用程序/URL。当我发布它时，额外的“站点”节点不应该导致另一个站点可用吗？为什么不呢？有没有完全独立的方法来完成我没有使用的这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:28:44.587

当您查看管理控制台时，您看到的是您已部署的 Web 角色，而不是属于该 Web 角色的站点，这就是您只看到一个的原因。只要您正确遵循了说明，那么是的，您确实有两个站点正在运行。问题是您只能通过该默认 URL 访问主站点。假设您的 url 看起来像 customer1.mysite.com 和 customer2.mysite.com，您需要确保已将它们设置为子站点中的主机标头，然后更改您的 DNS，以便这两个域都指向 URL您可以在门户中看到（例如 mysite.cloudapp.net）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T03:52:15.283

在考虑多租户解决方案时，理想情况下，您应该将 Web 应用程序设计为能够响应多个租户（您的每个客户）的单个网站，而不是为每个租户创建一个网站/Web 应用程序. 这使得整个系统的更新变得易于管理。您的 Web 应用程序可以根据几个选项（例如部分 url（例如 myapp/tenant1 与 myapp/tenant2）或通过主机标头（例如，tenant1.myapp.cloudapp.net 与 tenant2.myapp.cloudapp）来划分和识别不同的租户。网）

高温高压

# prolog - Prolog - 如何计算元素的总数

> ID：15125756
> 
> 赞同：1
> 
> 时间：2013-02-28T01:16:46.230
> 
> 标签：prolog

当列表中可以有列表时，如何计算列表中的元素总数？（将所有列表的长度相加）

```
?- sumOfLists([[1,2],[],[a,s,d],[a,1,3],[1]],S).
    S = 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:35:18.063

这是我知道的更短的方法，使用[flatten](http://www.swi-prolog.org/pldoc/doc_for?object=flatten/2) /2：

```
sumOfLists(Ls, S) :-
  flatten(Ls, Flat),
  length(Flat, S). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-24T12:51:38.970

您可以在不展平和不使用 maplist 的情况下执行此操作。

这是我的建议：

```
%element atomic? -> count
deep_len([H|T],N) :- atomic(H), deep_len(T, M), N is M + 1.

%element list? -> recurse for head and tail and sum results
deep_len([H|T],N) :- is_list(H), deep_len(H, Sum1), deep_len(T, Sum2), N is Sum1+Sum2. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T11:04:51.940

首先，用`maplist`它的长度替换每个列表，然后总结长度。

使用这样的`sum`谓词：

```
sum(L, S) :- sum(L, S, 0).
sum([], Acc, Acc).
sum([X|Xs], Sum, Acc) :- 
  Acc1 is Acc + X, 
  sum(Xs, Sum, Acc1). 
```

它归结为：

```
sumOfLists(L, S) :- maplist(length, L, Lengths), sum(Lengths, S). 
```

# verilog - 在始终块内使用电线？

> ID：15125760
> 
> 赞同：1
> 
> 时间：2013-02-28T01:17:14.553
> 
> 标签：verilog, digital-logic

我可以在 always 块内使用电线吗？例如：

```
 wire [3:0]a;
        assign a=3;

        always @(c)
           begin
                d=a+c;
           end 
```

它被编译而没有抛出任何错误。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T06:06:48.660

是的，您可以在 always 块中使用连线的值，只是不能在 always 或 initial 块中为连线分配值。

wire 和 reg 之间唯一真正的区别是分配值的语法。

在上面的示例中，d 也可以创建为线，它们是等效的：

```
reg [3:0] answer_reg;
always @* begin
  answer_reg = a + c;
end

wire [3:0] answer_wire;
assign answer_wire = a + c; 
```

# facebook - 如何在 iOS UIwebview 中获取 Facebook 访问令牌？

> ID：15125763
> 
> 赞同：0
> 
> 时间：2013-02-28T01:17:31.373
> 
> 标签：facebook, ios5

嗨，我仍然是 iOS 开发的新手，我遇到了这个问题。我制作了一个使用 facebook 帐户的应用程序。并且有一个链接可以打开 safari 应用程序并转到 facebook 页面。但是，我希望该链接具有 facebook 帐户，以便在打开 safari 应用程序时，facebook 页面已经使用我的应用程序中的设置登录。

我也试过这个 NSString *accessToken = [[FBSession activeSession] accessToken]; 但它为空

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:45:32.883

不，没有办法向 Safari 应用程序发送“使用 facebook 登录用户然后转到页面”请求。这是不可能的。

# c# - 什么是正确的类修饰符来传递一个对象而不允许用户创建一个

> ID：15125764
> 
> 赞同：0
> 
> 时间：2013-02-28T01:17:47.433
> 
> 标签：c#

所以我有一个板用户控制

```
 public partial class BoardController : UserControl
    {
        List<HotSpot> _hotSpots;
        List<Area> _areas;
        public BoardController()
        {
            InitializeComponent();
            InitializeHitSpots();
            InitializePlacementArrays();
        }... 
```

还有一个游戏控制器

```
public class GameController
{
    private BoardController _board;
    private List<PlayerController> _players;

    public GameController()
    {
        _board = new BoardController();
        _players = new List<PlayerController>();

    }
    public BoardController Board
    {
        get
        {
            return _board;
        }
    }... 
```

现在，即使我有一个公共属性 Board，如果我将 BoardController 类设为内部，我也会在下一行抛出一个错误

```
 private void Form1_Load(object sender, EventArgs e)
    {
        game = new GameController();           
        this.Controls.Add(game.Board); //<-- this line 
    } 
```

.

```
 Error:  GameController.Board' is inaccessible due to its protection level 
```

什么是正确的类修饰符声明，以便同一程序集中的类可以使用 BoardController，但其他程序集不能创建 BoardController 对象，也不能在程序集之外修改 BoardController？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:23:48.330

> 什么是正确的类修饰符声明，以便同一程序集中的类可以使用 BoardController，但其他程序集不能创建 BoardController 对象，也不能修改游戏控制器内的 BoardController？

为防止*实例化*，请标记*构造函数* `internal`：

```
internal BoardController() { ... } 
```

`BoardController`但是，目前尚不清楚尝试“修改内部”是什么意思`GameController`。如果您想防止修改`Board` *属性*引用，您已经通过不提供 setter 来做到这一点。如果您试图使`BoardController`类*本身*在程序集之外不可变，则需要将任何修改状态的属性/方法也限制为`internal`.

# php - $_SERVER 查询没有返回正确的值

> ID：15125766
> 
> 赞同：1
> 
> 时间：2013-02-28T01:17:57.573
> 
> 标签：php

当我尝试为我的网站设置导航时，我不断收到此错误：

> 未找到
> 
> 在此服务器上未找到请求的 URL /services。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

我想要的是让**内容 div**是动态的。因此，当用户单击“关于我们”时，该 div 将显示“关于我们”等。页面的其余部分现在将是静态的。但是，每当我单击任何导航时，都会出现上述错误。当我检查 URL 时，它只显示：`http://www.fts.us/about_us`

到目前为止，这是我所拥有的：

```
<?php #main index 
 set_include_path('var/chroot/home/content/22/10350022/html'); // path to root on ftp

 include($_SERVER['DOCUMENT_ROOT']."/config/setup.php"); //include setup file 
?>

<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; 
charset=utf-8">
<title>Untitled Document</title>
</head>
<link rel="stylesheet" type="text/css" href="/css/styles.css">

<body>
    <div class ="header tempBloc">
          <?php include($_SERVER['DOCUMENT_ROOT']."/templates/header.php");?>

     </div>

    <div class ="navs   tempBloc">
          <?php include($_SERVER['DOCUMENT_ROOT']."/templates/navs.php");?>

        </div>
    <div class ="main_content   tempBloc">
         <?php
               $page = basename($_SERVER['QUERY_STRING']);
                   if(!$page){
                     include('/content/home.php');
                   } else {
                   if(file_exists('/content/'.$page.'.php')){
                     include('/content/'.$page.'.php');
                   } else {
                     echo('This page does not exist!');
                   } 
                 }  

            #var_dump($_SERVER)
            ?> 

      </div>
      <div class ="footer   tempBloc">
          <?php include($_SERVER['DOCUMENT_ROOT']."/templates/footer.php");?>   
      </div>

    </body>
    </html> 
```

当我试图转储 _$SERVER 以查看其中的内容时，我得到了这个：

```
array(42) { ["TMPDIR"]=> string(29) "/home/content/22/10350022/tmp" ["PHPRC"]=> string(41) "/var/chroot/home/content/22/10350022/html" ["TEMP"]=> string(29) "/home/content/22/10350022/tmp" ["PHP_FCGI_CHILDREN"]=> string(1) "0" ["PATH"]=> string(29) "/sbin:/usr/sbin:/bin:/usr/bin" ["PWD"]=> string(12) "/web/cgi-bin" ["SHLVL"]=> string(1) "0" ["RAILS_ENV"]=> string(10) "production" ["SPI"]=> string(4) "TRUE" ["TMP"]=> string(29) "/home/content/22/10350022/tmp" ["PHP_FCGI_MAX_REQUESTS"]=> string(6) "100000" ["FCGI_ROLE"]=> string(9) "RESPONDER" ["UNIQUE_ID"]=> string(24) "US6vlq3JxKUAAAhxGA8AAADI" ["SCRIPT_URL"]=> string(10) "/index.php" ["SCRIPT_URI"]=> string(47) "http://www.fts.us/index.php" ["HTTP_HOST"]=> string(30) "www.fts.us" ["HTTP_CONNECTION"]=> string(5) "close" ["HTTP_ACCEPT"]=> string(63) "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8" ["HTTP_USER_AGENT"]=> string(108) "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.97 Safari/537.22" ["HTTP_ACCEPT_ENCODING"]=> string(17) "gzip,deflate,sdch" ["HTTP_ACCEPT_LANGUAGE"]=> string(14) "en-US,en;q=0.8" ["HTTP_ACCEPT_CHARSET"]=> string(30) "ISO-8859-1,utf-8;q=0.7,*;q=0.3" ["SERVER_SIGNATURE"]=> string(75) "
Apache Server at www.fts.us Port 80
" ["SERVER_SOFTWARE"]=> string(6) "Apache" ["SERVER_NAME"]=> string(30) "www.fts.us" ["SERVER_ADDR"]=> string(12) "72.167.0.128" ["SERVER_PORT"]=> string(2) "80" ["REMOTE_ADDR"]=> string(14) "76.116.108.244" ["DOCUMENT_ROOT"]=> string(41) "/var/chroot/home/content/22/10350022/html" ["SERVER_ADMIN"]=> string(26) "support@supportwebsite.com" ["SCRIPT_FILENAME"]=> string(51) "/var/chroot/home/content/22/10350022/html/index.php" ["REMOTE_PORT"]=> string(5) "51614" ["GATEWAY_INTERFACE"]=> string(7) "CGI/1.1" ["SERVER_PROTOCOL"]=> string(8) "HTTP/1.1" ["REQUEST_METHOD"]=> string(3) "GET" ["QUERY_STRING"]=> string(0) "" ["REQUEST_URI"]=> string(10) "/index.php" ["SCRIPT_NAME"]=> string(10) "/index.php" ["PHP_SELF"]=> string(10) "/index.php" ["REQUEST_TIME"]=> int(1362014102) ["argv"]=> array(0) { } ["argc"]=> int(0) } 
```

URL/URI 似乎不正确，它应该显示：`http://www.fts.us/index.php?page=about_us.php`。但它不是。

哦，这是我的导航……如果有帮助的话。

```
include($_SERVER['DOCUMENT_ROOT']."/config/setup.php");
?>
 <a href="home">home</a>
 <a href="services">services</a>
 <a href="about_us">about_us</a>
 <a href="3_things">3_things</a>
 <a href="free_stuff">free_stuff</a> 
```

感谢任何帮助将不胜感激。

# python - Python Word 问题

> ID：15125767
> 
> 赞同：2
> 
> 时间：2013-02-28T01:18:01.870
> 
> 标签：python

这是单词问题：生产一个项目需要 2 分 7 秒。不幸的是，在生产了 143 件产品后，制造商必须冷却 5 分 13 秒才能继续生产。编写一个程序，计算制造给定数量的物品所需的时间。

测试数量为1340项。

```
numItems = 1340
produceitem = 2 * 60 + 7  #2 minutes and 7 seconds
cooldown = 5 * 60 + 13 #5 minutes and 13 seconds
items_before_delay = 143
productiontime = 0

if numItems <= 143:
    productiontime = produceitem * numItems
if numItems > 143:
    productiontime = (produceitems * numItems) - (numItems / items_before_delay * cooldown) 
print str(productiontime) + "seconds" 
```

测试号的输出应该是 172997 秒，但我的程序将其输出为 167363 秒。

谁能让我知道我可以做些什么来改善这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:21:50.157

您正在减去冷却时间，而不是添加它。而已。

所以，改变这个：

```
productiontime = (produceitems * numItems) - (numItems / items_before_delay * cooldown) 
```

……对此：

```
productiontime = (produceitems * numItems) + (numItems / items_before_delay * cooldown) 
```

然而，当我们在这里时：

*   您定义了`produceitem`，但使用了`produceitems`. 如果这确实有效，那可能是因为您在交互式解释器中很幸运，并且已经定义`produceitems`了。
*   如果你要定义一个常量`items_before_delay`，不要直接使用数字 143，使用`items_before_delay`.
*   `if a <= b:`那就不要这样做`if a > b:`；只需将第二个更改为`else:`.
*   事实上，你根本不需要`if`。如果`numItems <= 143`,`(numitems / items_before_delay * cooldown)`将是 0，所以第二个版本仍然会给出正确的答案。
*   除非您处理的是相当旧的 Python 版本，否则通常显式使用`//`截断整数除法比使用`/`. 这意味着您的代码仍然可以在 Python 3.x 中运行，或者如果有人执行了`__future__`语句等，更重要的是，这意味着人类可以阅读和理解您的代码，而无需猜测它是用于 2.x 还是3.x。 X。
*   为您的名字使用一致的风格。`items_before_delay`遵循 PEP8 建议，但`numItems`不遵循。
*   无需像`productiontime`在设置变量之前那样“声明”变量。
*   连接两个字符串之间不会有空格，而且您可能不希望`172997seconds`没有空格。
*   尽量避免将行写得太长而无法容纳 80 列。即使您认为没有人关心老式的文本编辑器，它仍然是 StackOverflow 等新型 Web 界面的问题。（没有人喜欢不必要的水平滚动条。）

所以：

```
num_items = 1340
produce_item = 2 * 60 + 7  #2 minutes and 7 seconds
cooldown = 5 * 60 + 13 #5 minutes and 13 seconds
items_before_delay = 143

total_cooldown = num_items // items_before_delay * cooldown
production_time = (produce_item * num_items) + total_cooldown
print '{} seconds'.format(production_time) 
```

# asp.net - 使用 WebMatrix 上传时出现 IIS 7.0 HTTP 错误 403.14 和 404.3？

> ID：15125770
> 
> 赞同：0
> 
> 时间：2013-02-28T01:18:11.783
> 
> 标签：asp.net, webmatrix

我有一个问题，我在访问 domain.com 时遇到 2 个 IIS 错误，在访问 domain.com/default.cshtml 时遇到另一个错误

我正在尝试使用 WebMatrix 上传。我在 Webmatrix 中没有配置，但从页面模板制作“入门站点”。当我将它上传到我的服务器并访问时。

我需要更改服务器配置中的某些内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T17:38:31.287

要启用将文件上传到您的服务器，您需要确保正确设置了权限。运行您的应用程序池的用户帐户需要对您尝试上传文件的目录具有写入权限。这与将普通 ASP.NET 应用程序配置为具有对 IIS 的上传权限没有什么不同，所以这是一个很好的问题：

[Windows Server 2008 - 授予我的 ASP.NET 网站对文件夹的写入权限](https://stackoverflow.com/questions/10026819/windows-server-2008-give-my-asp-net-website-write-permission-to-a-folder)

祝你好运！

# string - Lisp - 显示要列出的字符串

> ID：15125772
> 
> 赞同：0
> 
> 时间：2013-02-28T01:18:29.800
> 
> 标签：string, list, lisp, common-lisp

我一直在寻找一种将用户输入（读取行）转换为我可以更轻松地操作的原子列表的方法。例如：

> SendInput() 这是我的输入。希望这有效。

我想回来..（这是我的意见。希望这有效。）

最终，删除任何句点、逗号、引号等都是理想的。但现在我只想将用户输入存储在列表中（不是字符串）

所以。现在我正在使用

```
(setf stuff (coerce (read-line) 'list)) 
```

然后返回给我... (#\T #\h #\i #\s #\Space #\i #\s #\Space #\m #\y #\Space #\i #\n # \p #\u #\t #. #\Space #\H #\o #\p #\e #\f #\u #\l #\l #\y #\Space #\t #\h # \i #\s #\空格 #\w #\o #\r #\k #\s #.)

所以现在我正在寻找一个可以获取该列表并正确格式化它的函数......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T10:52:30.943

Rainer's answer is better in that it's a bit more lightweight (and general), but you could also use [CL-PPCRE](http://www.weitz.de/cl-ppcre) , if you already have it loaded (I know I always do).

You can use `SPLIT` directly on the string you get from `READ-LINE`, like so:

```
(cl-ppcre:split "[ .]+" (read-line)) 
```

(Now you have two problems)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T01:53:27.800

您要做的是将一个字符序列（一个字符串）拆分为一个较小的字符串或符号列表。

使用 Lisp 库中提供的一些拆分序列函数（参见例如[cl-utilities](http://common-lisp.net/project/cl-utilities/)）。

在带有`SPLIT-SEQUENCE`函数的 LispWorks 中）例如，我会写：

```
CL-USER 8 > (mapcar #'intern
                    (split-sequence '(#\space #\.)
                                    "This is my input. Hopefully this works."
                                    :coalesce-separators t))
(|This| |is| |my| |input| |Hopefully| |this| |works|) 
```

请记住，要获得名称保留大小写的符号，它们被竖线包围。竖线不是符号名称的一部分——就像双引号不是字符串的一部分——它们是分隔符。

您也可以打印它：

```
CL-USER 19 > (princ (mapcar #'intern
                            (split-sequence '(#\space #\.)
                                            "This is my input. Hopefully this works."
                                            :coalesce-separators t)))
(This is my input Hopefully this works)
(|This| |is| |my| |input| |Hopefully| |this| |works|) 
```

上面打印列表。第一个输出是由 REPL 打印的数据`PRINC`，第二个输出是由*REPL*完成的。

如果你不想要符号，而是字符串：

```
CL-USER 9 > (split-sequence '(#\space #\.)
                            "This is my input. Hopefully this works."
                            :coalesce-separators t)
("This" "is" "my" "input" "Hopefully" "this" "works") 
```

# servlets - 读取 JSON 响应时遇到问题

> ID：15125779
> 
> 赞同：0
> 
> 时间：2013-02-28T01:19:13.230
> 
> 标签：servlets, request, response, extjs4.1

我向返回数据库查询结果的 servlet 发出 ajax 请求。我可以用 firebug 看到响应，我想将这些结果放在我已经创建的列表（或其他..）中。

我试图阅读[这篇文章](http://www.sencha.com/forum/showthread.php?168602-Newbie-Having-trouble-getting-ExtJS-v4-to-read-JSON-Array)，但它没有帮助我..

代码：

这是ajax请求：

```
 Ext.Ajax.request({
                        url: '/VIProject/Container',

                        success: function (action){alert('Lista caricata!'); console.debug(action); },
                        failure: function (){alert('Errore nel caricamento...');},
                        headers: {
                            'my-header': 'foo'
                        },
                        params: { action: "GETCONTAINERLIST" }
                    }); 
```

来自 servlet（萤火虫）的响应：

```
{"message":"OK","container":[{"idOrdine":"1","numLotto":"123"},{"idOrdine":"2","numLotto":"321"},{"idOrdine":"3","numLotto":"876"}],"success":true} 
```

列表：

```
 var listView = Ext.create('Ext.grid.Panel', {
    width:425,
    height:250,
    id: 'lista',
    collapsible:true,
    title:'Simple ListView <i>(0 items selected)</i>',
    store: //???
    multiSelect: true,
    viewConfig: {
        emptyText: 'No images to display'
    },

    columns: [{
        text: 'idOrdine',
        flex: 15,
        sortable: true,
        dataIndex: 'idOrdine'
    },{
        text: 'Last Modified',
        flex: 20,
        sortable: true,
        dataIndex: 'numLotto'
    }]
}); 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:40:06.213

我已修改您的代码以使用商店：

```
Ext.define('MyModel', {
    extend: 'Ext.data.Model',
    fields: ['idOrdine', 'numLotto']
})

var listView = Ext.create('Ext.grid.Panel', {
    width:425,
    height:250,
    id: 'lista',
    collapsible:true,
    title:'Simple ListView <i>(0 items selected)</i>',
    store: store: {
        model: MyModel,
        autoLoad: true,
        proxy: {
            type: 'ajax',
            url: '/VIProject/Container',
            reader: {
                type: 'json',
                root: 'container'
            }
        }
    },
    multiSelect: true,
    viewConfig: {
        emptyText: 'No images to display'
    },

    columns: [{
        text: 'idOrdine',
        flex: 15,
        sortable: true,
        dataIndex: 'idOrdine'
    },{
        text: 'Last Modified',
        flex: 20,
        sortable: true,
        dataIndex: 'numLotto'
    }]
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T18:57:23.963

即使以这种方式，它也可以工作：

```
 var proxy=new Ext.data.HttpProxy({url:'/VIProject/Container'});

    var reader=new Ext.data.JsonReader({},[
          {name: 'idOrdine', mapping: 'idOrdine'},
          {name: 'numLotto', mapping: 'numLotto'}
     ]);

     var store=new Ext.data.Store(    {
         proxy:proxy,
         reader:reader
     });

    store.load(); 
```

我尝试了各种方式..但我不知道该怎么做！

# php - 使用 PHP 生成的 Html 表单未插入所有数组

> ID：15125780
> 
> 赞同：0
> 
> 时间：2013-02-28T01:19:13.443
> 
> 标签：php, html, mysql

我有一个用 php 生成的表单

下面是我的 account.php $student_id 是由会话设置的，我正在查找与该 student_id 关联的所有文件名。我使用 php 生成了一个 HTML 表单，其中该学生的每个文件名都以复选框格式显示，每个复选框下方都有一个描述输入。

```
<?php 
$find = mysql_query("SELECT file_name FROM chemlab_files WHERE student_id = 
'$student_id'") or die  ("Could not search!");
while($row = mysql_fetch_array($find)){
$file_name = $row['file_name'];
$_SESSION['file_name'] = $file_name;
echo "<label class='checkbox'><input type='checkbox' name='file_name[]'    
value='{$file_name}'>$file_name</label><br><input type='text' name='description[]'    
value='' placeholder='description'>";
}
?> 
```

这现在是 handler.php 的一部分我在插入时遇到问题，但它为未选中的复选框插入空白

```
if(is_array($_POST['description'])){
foreach(str_replace('#', '', $_POST['description']) as $strip){ 
                $description_backslash = $strip . '/';
                $description = mysql_real_escape_string($strip);
                $query = "INSERT INTO file_list(description) VALUE ('$description')";
                $q= mysql_query($query) or die ('Error posting data');
                //print_r($description);
                //print '<br>';
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:32:17.840

未选中的复选框不会发送到服务器，因此如果未选中所有复选框，则复选框索引和`file_name`输入之间将不匹配。

为了避免这个问题，您必须在表单字段中添加索引，以便您知道什么`description`属于什么`file_name`，并能够遍历`description`'s 并丢弃未设置的那些。

# java - 支持java中的goto吗？

> ID：15125785
> 
> 赞同：1
> 
> 时间：2013-02-28T01:20:10.780
> 
> 标签：java, obfuscation, goto

不支持 java 中的关键字“goto”。我曾经在某处读过它在 java 字节码**中**受支持，并且有一个混淆器使用它来创建不可读的意大利面条代码。但是，我再也找不到这个页面了，所以我在这里问这个问题：goto 关键字是否以编译形式工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:21:14.167

Java 关键字列表指定 goto 关键字，但它是保留的。表示未使用。

如果您尝试使用它会显示错误

这可能是为了将其添加到更高版本的 Java 中。

如果 goto 不在列表中，并且稍后将其添加到语言中，则使用 goto 这个词作为标识符（变量名称、方法名称等）的现有代码将会中断。但是因为 goto 是一个关键字，所以这样的代码现在甚至无法编译，并且它仍然有可能在以后使其实际执行某些操作，而不会破坏现有代码。

查看此视频.. [James gosling 讲述 goto](http://www.youtube.com/watch?v=9ei-rbULWoA&t=17m25s) ...他在设计 java 编译器时使用 goto

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T01:26:30.730

是的，“goto”是 JVM 的一部分。许多结构都依赖于它（如 if / else、while 等）。

它相当于汇编语言中的“调用”。

但你是对的，它在 java 源代码中不可用，仅在字节码中可用。

其他基于 jvm 的语言可能会实现它。

这是关于它的 Jasmin 页面： [https](https://www.vmth.ucdavis.edu/incoming/Jasmin/ref-_goto.html) : //www.vmth.ucdavis.edu/incoming/Jasmin/ref-_goto.html（操作码是 0xA7）

# python - 如何将 JSON 字典转换为 python 字典？

> ID：15125787
> 
> 赞同：0
> 
> 时间：2013-02-28T01:20:18.350
> 
> 标签：python, json, python-2.7, web-scraping

我有一个仅包含 JSON 字典的 JSON 文件（例如： http: [//www.collegeswimming.com/results/17172/event/4/](http://www.collegeswimming.com/results/17172/event/4/)）。Python中是否有任何模块可以轻松地将其转换为我可以在Python中使用的对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T01:22:17.413

Python 的 JSON 解析器[http://docs.python.org/2/library/json.html](http://docs.python.org/2/library/json.html)

```
>>> import json
>>> json.loads('["foo", {"bar":["baz", null, 1.0, 2]}]')
[u'foo', {u'bar': [u'baz', None, 1.0, 2]}]
>>> json.loads('"\\"foo\\bar"')
u'"foo\x08ar'
>>> from StringIO import StringIO
>>> io = StringIO('["streaming API"]')
>>> json.load(io)
[u'streaming API'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T01:22:25.360

顺便说一下，这就是所谓的 JSON。它不是 JavaScript。恰当地，该模块被称为`json`.

试试看[`json.loads`](http://docs.python.org/3/library/json#json.loads)！

# actionscript-3 - 如何强制派生类在 AS3 中实现方法？

> ID：15125794
> 
> 赞同：3
> 
> 时间：2013-02-28T01:21:21.267
> 
> 标签：actionscript-3, oop

我有一个关于 OOP（在 AS3 中）的相当简单的理论问题，我不知道如何用谷歌搜索：

我需要一个抽象类之类的东西，它需要依赖类实现一些接口，如下所示：

```
Interface ISomething
{
   public function somethingize(otherThing:type):void;
}

abstract public class AbstractSomething implements ISomething
{
   public function AbstractSomething()
   {
        // ...
   }

   public function doSomething():void
   {
       //code here
       // ...
       this.somethingize();
       // ...
   }
} 
```

实现这样的事情的唯一方法是删除“抽象”关键字，并将 somethingize 移动到 SomethingWrapper （通过抛出“未实现的异常”的实现），还是有更好的建模方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T02:44:56.927

ActionScript 不支持抽象类（很遗憾）。

我认为有一些技术可以尝试和模仿抽象，但我的方法也只是在我的抽象类中抛出错误以阻止它们被直接使用，例如：

```
public class AbstractSomething implements ISomething
{
    public function AbstractSomething()
    {
        throw new Error("this is an abstract class. override constructor in subclass");
    }

    public function doSomething():void
    {
        throw new Error("this is an abstract class. override doSomething in subclass");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:54:33.590

如果没有关于具体实现的更多信息，在这种情况下，我更喜欢*组合*而不是*继承*，特别是依赖注入。

```
public interface ISomething {
    function somethingize(thing:*):void;
}

public class SomeWorker {

    private var _something:ISomething;

    public function SomeWorker(something:ISomething) {
       this._something = something;
    }

    public function doSomething():void {

        // work
        this._something.somethingize(obj);
        // more work

    }
} 
```

SomeWorker 的继承类可以为他们需要做的工作注入正确的 ISomething 实现，或者可以在其他地方解决依赖关系。

# android - 在 Android 中测量电池消耗的廉价方法

> ID：15125795
> 
> 赞同：0
> 
> 时间：2013-02-28T01:21:22.950
> 
> 标签：android

我需要以编程方式计算每小时的电池消耗量。例如，每小时平均消耗 2% 的电池电量。

理想情况下，我需要在每个屏幕上计算这个值，或者就在 Froyo 之前的关机/重启之前。

计算此值的廉价/电池有效方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T02:16:54.160

Android 开发者网站有一个[页面](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)描述了如何从电池获取信息，其中包括确定当前电池电量。

我想你可以监控微小的变化，然后在更长的时间内预测这意味着什么。例如 -0.05% 每分钟 = -3% 每小时

# c++ - 为什么这些掷骰子的结果如此平均？

> ID：15125796
> 
> 赞同：0
> 
> 时间：2013-02-28T01:21:23.867
> 
> 标签：c++

这应该掷 6 个骰子，并记录有多少是唯一的。例如：1 2 3 4 5 6 = 6 个唯一号码，1 1 1 1 1 1 = 1 个唯一号码，1 2 3 3 3 3 = 3 个唯一号码。每掷一次骰子，我一直得到一个非常均匀的百分比，大约 16.7%。

```
#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

int numberGenerator()
{
int x = (rand() % 6) + 1;
return x;
}

int diceCounter()
{

int counter[6] = {0,0,0,0,0,0};

for (int i = 0; i < 6; i++)
    {
    int k = numberGenerator();
        if (k == 1)
           counter[0] = 1;
        if (k == 2)
           counter[1] = 1;
        if (k == 3)
           counter[2] = 1;
        if (k == 4)
           counter[3] = 1;
        if (k == 5)
           counter[4] = 1;
        if (k == 6)
           counter[5] = 1;
     }
return counter[0]+counter[1]+counter[2]+counter[3]+counter[4]+counter[5];
}                 // returns how many unique numbers were rolled

int main()
{
srand(time(NULL));
cout << diceCounter() << endl;

int a1 = 0;
int a2 = 0;
int a3 = 0;
int a4 = 0;
int a5 = 0;
int a6 = 0;
int p;

for (int j = 0; j < 1000000; j++)
{
p = numberGenerator();        // for number of unique numbers, it adds +1 to counter
if (p == 1)
a1 += 1;
if (p == 2)
a2 += 1;
if (p == 3)
a3 += 1;
if (p == 4)
a4 += 1;
if (p == 5)
a5 += 1;
if (p == 6)
a6 += 1;
}
cout << "1 ==> " << (a1 / 1000000.0)*100 << "%" << endl;
cout << "2 ==> " << (a2 / 1000000.0)*100 << "%" << endl;
cout << "3 ==> " << (a3 / 1000000.0)*100 << "%" << endl;
cout << "4 ==> " << (a4 / 1000000.0)*100 << "%" << endl;
cout << "5 ==> " << (a5 / 1000000.0)*100 << "%" << endl;
cout << "6 ==> " << (a6 / 1000000.0)*100 << "%" << endl;

                // this results in uniform 16.7% percentages
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:27:48.477

在您的循环中，您正在调用`numberGenerator`而不是`diceCounter`.

因此，不是计算滚动 6 个骰子的唯一结果的数量，而是计算单个掷骰的每个数字。正如您所期望的那样，每个数字都有 1/6 的时间出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:32:31.300

添加到@MichaelAnderson的答案：

随机数实际上都是伪随机数。

他们致力于`seed`价值观。因此，每次调用时`rand()`，请`srand()`在此之前调用以重新设置随机数生成器的种子：像这样：

```
srand(time(NULL));
int r = rand(); 
```

# algorithm - 算法面试题

> ID：15125805
> 
> 赞同：0
> 
> 时间：2013-02-28T01:22:19.427
> 
> 标签：algorithm, analysis

我潜伏了很长时间，刚刚接受了谷歌的采访，他们问了我这个问题：

*给定一个不可能的请求时间 d（即在已经安排好的表演的 5 天内），给出一个 O(log n) 时间算法来找到下一个可用的日期 d2 (d2 > d)。*

我不知道如何解决它，现在面试结束了，我很想弄清楚如何解决它。知道你们大多数人有多聪明，我想知道您是否可以在这里帮帮我。这不适用于家庭作业或任何类似的东西。我只是想学习如何在以后的面试中解决它。我试着问后续问题，但他说这就是我能告诉你的全部。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T01:25:41.413

这完全是从臀部发射的，因为我不确定问题是否完整，但是如果您在数组中有一个日期列表，例如 d[0] < d[1] < ... < d[n] ，简单的答案是第二天找到二叉搜索树。

# python - wxpython 服务器

> ID：15125807
> 
> 赞同：1
> 
> 时间：2013-02-28T01:22:27.903
> 
> 标签：python, sockets, matplotlib, wxpython, real-time-data

我正在尝试通过套接字将数据从 C 程序发送到 python 脚本，以便使用 matplotlib 执行数据的实时可视化。我还使用 wxPython 创建了一个 GUI。我用过socket模块、SocketServer模块和twisted。在每一个中，我都有不同的问题。

使用套接字模块，我收到了不止一条消息。我减少了 recv() 函数的缓冲区大小，但我只得到一个包，之后什么也没有。

然后我开始使用twisted。我仍然将这些包裹作为一个集合而不是一个一个地收集。此外，当在 C 文件中插入延迟时，我的 python 脚本崩溃了。

然后我搬到了 SocketServer 并创建了一个线程来运行服务器。消息如我所愿，但我无法再与 GUI 交互。

我想要做的就是向 Python 脚本发送一串 4 个值，剥离它并绘制它，拥有一个交互式 UI，但我找不到服务器、matplotlib 和 wxPython 协作的示例。

这是我找到并正在使用的 C 代码：

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>
#include <string.h>
#include <unistd.h>
#define PORT        9992
#define HOST        "localhost"
#define DIRSIZE     8192

main(argc, argv)
int argc; char **argv;
{
char hostname[100];
char dir[DIRSIZE];
int sd;
struct sockaddr_in sin;
struct sockaddr_in pin;
struct hostent *hp;
char message[50];
int i = 0;
int count = 50;

strcpy(hostname,HOST);
if (argc>2)
{ strcpy(hostname,argv[2]); }

/* go find out about the desired host machine */
if ((hp = gethostbyname(hostname)) == 0) {
    perror("gethostbyname");
    exit(1);
}

/* fill in the socket structure with host information */
memset(&pin, 0, sizeof(pin));
pin.sin_family = AF_INET;
pin.sin_addr.s_addr = ((struct in_addr *)(hp->h_addr))->s_addr;
pin.sin_port = htons(PORT);

/* grab an Internet domain socket */
if ((sd = socket(AF_INET, SOCK_STREAM, 0)) == -1) {
    perror("socket");
    exit(1);
}

/* connect to PORT on HOST */
if (connect(sd,(struct sockaddr *)  &pin, sizeof(pin)) == -1) {
    perror("connect");
    exit(1);
}

/* send a message to the server PORT on machine HOST */
while (i < 100){
    sprintf(message, "%d %d %d %d \n", count, count + 50, count + 100, count + 130);
    if (send(sd, message, strlen(message), 0) == -1) {
        perror("send");
        exit(1);
    }
    count = count + 50;
    i++;
    sleep(1);
}

shutdown (sd, 2);
} 
```

这是我目前拥有的 Python 代码（在网上搜索后）：

```
class ThreadedEchoRequestHandler(SocketServer.StreamRequestHandler):

def handle(self):
    cur_thread = threading.currentThread()
    line = self.rfile.readline()
    while True:
        line = self.rfile.readline()
        if not line: break
        print "%s wrote: %s" % (self.client_address[0], line.rstrip())
        self.wfile.write(line)
    return 

class ThreadedEchoServer(SocketServer.ThreadingMixIn, SocketServer.TCPServer):
    pass
########################################################################################
class MyFrame(wx.Frame):
def __init__(self, parent, title):
    wx.Frame.__init__(self, parent, -1, title, size=(1024,768))

    self.SetIcon(wx.Icon('sim.ico', wx.BITMAP_TYPE_ICO))
    self.SetBackgroundColour('#ece9d8')

    self.add_toolbar()
    self.Centre()

    #Flag variables
    self.isLogging = False
    self.threads = []
    server = ThreadedEchoServer(('localhost',9997), ThreadedEchoRequestHandler)
    t = threading.Thread(target=server.serve_forever)
    t.start()

    #Create data buffers

    #Some GUI Design Code

    #Create timer to read incoming data and scroll plot

    #Create start/stop button
    self.start_stop_button = wx.Button(self, label="Start", pos=(80,550), size=(150,150))
    self.start_stop_button.SetFont(wx.Font(14, wx.DEFAULT, wx.NORMAL, wx.NORMAL, False))
    self.start_stop_button.Bind(wx.EVT_BUTTON, self.onStartStopButton)

def add_toolbar(self):
    # Toolbar code

def onStartStopButton(self, event):
    if not self.isLogging:
        self.isLogging = True
        self.start_stop_button.SetLabel("Stop")
        call(["/home/user/Misc/socketTest/socketTest"])   
    else:
        self.isLogging = False
        self.start_stop_button.SetLabel("Start")                

def GetSample(self, msg):
### Manipulate Data from socket for matplotlib update

if __name__ == '__main__':
     app =wx.App(False)
     frame = MyFrame(None, 'Sim')
     frame.Show(True)
     app.MainLoop() 
```

抱歉，我是 Python 新手。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:26:30.893

我不能说套接字通信的最佳方法是什么，它实际上取决于您的应用程序的需求、正在传输的数据的类型和格式、数量等。但我可以帮助与 GUI 应用程序集成.

在向 GUI 应用程序添加诸如套接字服务之类的东西时，需要注意一些关键原则。首先，为了保持 UI 对用户的响应，您不应该在 UI 事件处理程序或其他可能阻塞“用户可察觉”时间的回调中做任何事情。其次，您不应该从 UI 线程以外的线程创建或操作任何 GUI 元素。

因此，您从另一个线程运行 SocketServer（或您最终使用的任何东西）的直觉是好的。这使您可以将线程的全部注意力集中在处理通信上，而不必处理更复杂的事情，例如定期轮询、UI 事件处理等。它可以阻塞等待传入的数据。

有几种方法可用于将来自套接字的传入数据传送到 UI 线程。可能最简单的是使用 wxPython 的 wx.CallAfter 函数。它允许您指定一些应该调用的可调用对象，以及要传递给它的参数，然后它将导致该调用在此后不久在 UI 线程的上下文中发生。

# javascript - tomandjerryhostel.com 不会向下滚动

> ID：15125812
> 
> 赞同：4
> 
> 时间：2013-02-28T01:22:48.863
> 
> 标签：javascript, html, css, google-chrome, scroll

我在 Google Chrome 中遇到了在任何其他网络浏览器中都没有发生的问题。

这是网站：[tomandjerryhostel.com](http://tomandjerryhostel.com)

无论我做什么，谷歌浏览器都不会滚动。我试过在网上寻找修复程序，但我似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:27:42.503

你有一个 position: relative 在你的身体标签：

```
<body id="page1" style="position: relative; min-height: 100%; top: 0px;"> 
```

我不明白你为什么需要它，删除它，你会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T02:00:37.293

这是因为你有

```
media="all"
  html, body {
  height: 100%;
} 
```

在你的`http://tomandjerryhostel.com/public/style.css`

并且 body 设置为从您的 style.css`position:relative`中删除`height: 100%;`，然后您将拥有卷轴 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T01:27:47.793

问题是您已`overflow`设置为`hidden`on `.wrapper`。我假设这不是故意的，但这就是导致滚动条被隐藏的原因。

使用 Chrome 的检查元素并发现`.wrapper`您可以禁用该样式属性并且行为变得正常，从而发现您的问题。

![截屏](../Images/0cf18e6a4f28132348bedc732840b701.png)

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-02-28T01:36:36.660

尝试在你的身体标签上添加它 scroll="yes"

```
 <body id="page1"  onLoad="" scroll="yes"> 
```

# c# - 如何在 WPF 中创建具有可绑定项的 DependancyProperty 集合

> ID：15125815
> 
> 赞同：0
> 
> 时间：2013-02-28T01:22:54.733
> 
> 标签：c#, wpf, binding

我需要创建一个 DependancyProperty 集合并以某种方式绑定或能够知道每个项目何时更改

这个问题不好解释。。

要声明一个简单的 DependancyProperty，我们这样做：

```
public static readonly DependencyProperty SelectedColorProperty =
        DependencyProperty.Register("SelectedColor", typeof(Color),
    typeof(MyClass), new PropertyMetadata(Colors.Red));

public Color SelectedColor
{
 get { return (Color)GetValue(SelectedColorProperty); }
 set { SetValue(SelectedColorProperty, value); }
} 
```

稍后在 XAML 中，我们可以这样做：

```
<MyClass SelectedColor="{Binding blah blah}"/> 
```

如果我在静态声明中添加一个简单的值更改回调，那么`new PropertyMetadata(Colors.Red)`
我将拥有：`new PropertyMetaData(Colors.Red,MyCallback)`
每次更改值时，我都能够从后面的代码中对更改做出反应。

好的，现在我想要的是用 XAML 编写的东西，如下所示：

```
<MyClass>
   <MyClass.SelectedColors>
    <Color>{Binding blah1}</Color>
    <Color>{Binding blah2}</Color>
    <Color>{Binding blahN}</Color>
   <MyClass.SelectedColors>
</MyClass> 
```

但是，我不能使用多重绑定，因为我想知道哪种颜色发生了变化，并且多重绑定给了我一个聚合器策略，这意味着当我完成编写多重绑定转换器时，我将同时从所有“blahs”中获取所有值并且将不知道哪一个是改变的..

我开始写一些简单的东西，如下所示：

```
public static readonly DependencyProperty SelectedColorsProperty =
           DependencyProperty.Register("SelectedColors", typeof(List<Color>),
       typeof(MyClass),
           new PropertyMetadata(new List<Color>()));

  public List<Color> SelectedColors
        {
            get { return (List<Color>)GetValue(SelectedColorsProperty); }
            set { SetValue(SelectedColorsProperty, value); }
        }

   public MyClass()
        {
            foreach(var item in SelectedColors)
            {
        //dunno what goes here.. or how to bind the color change?
            }
        } 
```

所以现在我不能创建一个回调来处理每个项目的每次更改，对吧？然而，这正是我所需要的，能够对每个项目的变化做出反应..

但是它确实允许我表达我需要的 XAML 语法..

有任何想法吗？以前有人遇到过这种问题吗？我注意到 MSDN 中的解释非常简短，但我不确定它是否对我有帮助以及如何使用它，如果有帮助的话，它是页面中的最后一段提到了关于使用

```
Freezable<T> 
```

[http://msdn.microsoft.com/en-us/library/aa970563.aspx](http://msdn.microsoft.com/en-us/library/aa970563.aspx)

感谢您的帮助，谢谢。

* * *

更新：如果允许区分哪些值发生了变化（在我们的示例中，哪个颜色发生了变化），那么 MultiBinding 解决方案也可以。
这种情况下的标记可能如下所示：

```
<MyClass>
   <MyClass.SelectedColors>
      <MultiBinding..
        <Binding Path="FillColor" ElementName="MyRectWhichHasFillColorDProperty"/>
        <Binding blah2 which is Color2 />
        <Binding blah3 which is ColorN /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:28:55.447

将您的颜色包装在实现 INotifyPropertyChanged 的​​类中，然后为构造函数中的每种颜色设置 PropertyChanged 事件的侦听器。

包装类

```
public class ColorViewModel : INotifyPropertyChanged
{
    private Color color;
    public Color Color
    {
        get { return color; }
        set
        {
            if (value != color)
            {
                color = value;
                NotifyPropertyChanged("Color");
            }
        }
    }

    // INotifyPropertyChanged implementation goes here
} 
```

然后在您的事件侦听器中，您将获得触发属性更改事件的单个 ColorViewModel。

我之前必须解决一个非常类似的问题，我创建了我的 ViewModel 类的 ObservableCollection，以便我可以订阅集合更改并将我的事件侦听器附加/分离到更改的项目。

我是在 Surface 上从内存中输入的，所以可能有很多拼写错误，您应该将代码示例作为 sudo 代码。

希望这可以帮助。

编辑

这是您的 Xaml 的外观：

```
<namespace:MyClass>
    <namespace:MyClass.SelectedColors>
        <namespace:ColorViewModel Color="{Binding SomeValue}" />
        <namespace:ColorViewModel Color="{Binding OtherValue}" />
    </namespace:myClass.SelectedColors>
</namespace:MyClass> 
```

`Colors`的集合在哪里`ColorViewModel`。

您将无法在构造函数中连接您的`PropertyChanged`侦听器，因为在构建时颜色中没有 ColorViewModel，因此我只需将 Colors 设为一个`ObservableCollection`并使用该`CollectionChanged`事件将`PropertyChanged`侦听器连接到集合中的任何新增内容。

您可能只想使用 SolidColorBrush 而不是 ColorViewModel 类，因为它具有`Color`属性和`Changed`事件。

# ios - 我应该在 Google Analytics 中使用“在复制期间去除调试符号”和“去除链接的产品”吗？

> ID：15125816
> 
> 赞同：2
> 
> 时间：2013-02-28T01:22:59.290
> 
> 标签：ios, xcode, debugging, google-analytics, testflight

我使用 TestFlight 进行远程崩溃报告。现在我正在使用谷歌分析。

TestFlight 建议禁用“在复制期间去除调试符号”和“去除链接的产品”。谷歌分析 - 没有。将 TestFlight 更改为 Google Analytics 后是否应该删除它们？

![在此处输入图像描述](../Images/7ad9965479750ac0832b28e8cff4865e.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T12:55:01.277

这取决于崩溃报告的符号化方式：

1.  如果您可以上传 dSYM 以获取符号化的崩溃报告，您**应该**去除调试符号。这样做的好处是可以获得行号，有时甚至可以将应用程序二进制文件缩小 50%。

2.  如果您**不能**上传 dSYM 进行符号化，并且不能/不想下载崩溃报告并在您自己的 Mac 上对其进行符号化，那么您**不应该剥离**符号以获得至少一些东西。仅当您将这些构建的 dSYM 存档并且您可以下载标准格式的崩溃报告时，Mac 上的符号化才会起作用。

# php - PHP/HTML 输出：回显与返回、输出缓冲和语法高亮挑战

> ID：15125817
> 
> 赞同：1
> 
> 时间：2013-02-28T01:23:08.030
> 
> 标签：php, syntax-highlighting, eclipse-pdt, output-buffering

我更喜欢在 php 标记之外编写 html，因此 eclipse 可以使用适当的语法高亮显示 html。连接方法更难编写并且不突出显示（参见下面的两个示例）。

*我为篇幅道歉。这些示例非常简单，因此应该很容易阅读。*

**我不喜欢这样，“引号”和 $o 太多，而且没有语法高亮！：**

```
<?php

display($something){
    $o = '';
    $o .= '<div>';
    $o .=     $something;
    $o .= '</div>';
    return $o;
}

// I want to be able to do this:    
echo display(display('something')); 
```

这使函数有机会完成关闭`<tag>`，甚至在之后添加额外的 html。 *上面的例子在功能上是我想要做的，但由于这些原因（'引号'、$o's 和语法突出显示）我还没有创建这样的系统。*

**下面的例子是我更喜欢写html的方式，但是我不能嵌套输出，因为它不返回！**

```
<?php

function display($something){ ?>
    <div>
        <?=$something?>
    </div>
<?php }

// I'd like to do this, but I can't  
display(display('this doesn't return anything to the first function call...')); 
```

这就是输出缓冲的用武之地，我稍后再谈……

**我所设想的：**

我希望能够用来`func_get_args()`完成这样的事情（注意，这将适用于 OOP 对象，只是在这里保持简单）：

```
<?php

some_panel( title_style_1('Sample Header'),
            panel_content(you_tube($vid_id)),
            small_img_frame($img_src) ); 
```

您基本上可以采用任何这些输出函数并以您喜欢的任何方式嵌套它们。就像您可以将 any`<div>`放入 any 中一样`<p>`，反之亦然。唯一的问题是，您必须确保关闭标签......而且，在这种情况下，您可以在末尾或子项之间添加*任何标记。*

**这就是输出缓冲的用武之地**

```
<?php

function display($something){ 
    ob_start(); // <---- Start buffer ?>
    <div>
        <?=$something?>
    </div>
<?php return ob_end_clean(); // <------ Return output
}

// Now I can do this!!!
echo display(display('this should work!')); 
```

**而且，请打鼓……问题：**

如果我在每个请求中重复缓冲数百甚至数千次，这会影响性能吗？我已经阅读了警告输出缓冲的帖子，原因是：

可靠性：如果在其他地方启动了缓冲区，根据我的阅读，这听起来像这些嵌套并且可能会发生冲突。

可维护性：如果一个缓冲区被启动，你必须保证它会被停止。

对于我的系统，如果在同一个函数调用中启动和停止输出缓冲，这些事情似乎没问题。`<li>`这是我担心的每个开始/停止输出缓冲的潜在 1000 个项目的过度迭代。

此外，如果有人知道任何框架或更好的方法来做我想做的事情，任何建议都将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:26:29.383

通过...输出嵌套输出怎么样？

```
<?php
function foo($itemName) {
?>
    <div class="item">
        <?php bar($itemName); ?>
    </div>
<?php
}

function bar($itemName) {
?>
    <h1><?= $itemName ?></h1>

    <p>Hello, world!</p>
<?php
}
?> 
```

但要回答剩下的问题：基准测试！输出缓冲通常不是问题，但它很可能成为任何人的瓶颈。这取决于。

如果您发现自己经常做这种事情，请考虑将其拆分为多个文件或使用模板系统。[或者不是 PHP。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:36:20.767

输出缓冲可能是一种清洗，它甚至可以提高性能。通过减少 I/O 来节省 CPU 浪费的缓冲。套接字写入实际上是数千条指令。唯一可能成为问题的是输出量会对内存使用产生不利影响。如果你正在缓冲许多兆字节的输出，你可能需要研究某种形式的流媒体。

这是关于这个主题[PHP 输出缓冲的旧帖子 - 听起来是个坏主意，是吗？](https://stackoverflow.com/questions/1556613/php-output-buffering-sounds-like-a-bad-idea-is-it)

# javascript - javascript 媒体查询

> ID：15125820
> 
> 赞同：1
> 
> 时间：2013-02-28T01:23:19.273
> 
> 标签：javascript, jquery, html, jquery-ui, javascript-events

我正在尝试使用媒体查询来减小小屏幕的立方体大小....我在 js 中给出了媒体查询，因为我的立方体大小是在 js 中设置的......但是当我减小时我的立方体大小并没有减小浏览器窗口......你能告诉我为什么它不工作......

[http://jsfiddle.net/rajkumart08/8YK2n/embedded/result/](http://jsfiddle.net/rajkumart08/8YK2n/embedded/result/)

```
$(window).bind('resize', function() { location.reload();

             Gallery.setOptions({
                    size: 78,
                    lightbox: false,
                    //animation:  'drop'
                    //speed:      500,
                    //closeOnEsc: true,
                    //slideshow:  false,
                    //slideshow_speed: 3000,
                    //cube_speed: 1000
                });

         });

        if (screen.width < 600) {

             $(window).bind('resize', function() { location.reload();

             Gallery.setOptions({
                    size: 25,
                    lightbox: false,
                    //animation:  'drop'
                    //speed:      500,
                    //closeOnEsc: true,
                    //slideshow:  false,
                    //slideshow_speed: 3000,
                    //cube_speed: 1000
                });

         }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:27:31.113

可能是因为您使用的是`location.reload()`，它将刷新页面而不运行任何后续代码？

* * *

您还在处理程序*之外*进行检查`resize`，因此您只根据窗口的*原始*大小绑定适当的处理程序。（实际上，如果窗口小于 600，您将绑定*两个*处理程序并且它们都会运行！）您可能希望`if`在处理程序中使用它。

仅供参考，这不是“媒体查询”；这些是具有从 CSS 移植的特定语法的特定新功能。 `screen`是一个古老的 DOM0 东西。

另外我不得不说无休止地旋转的立方体很烦人。

# sql-server - Hibernate 中的 setMaxResults(N) 是如何工作的？

> ID：15125824
> 
> 赞同：7
> 
> 时间：2013-02-28T01:23:31.147
> 
> 标签：sql-server, sql-server-2008, hibernate

我正在使用带有 Hibernate 的 MS SQL Server 2008。我的问题是 Hibernate 如何实现`setMaxResults`

采取以下简单的场景。

如果我有一个返回 100 行的查询并且如果我将 1 传递给`setMaxResults`，这会影响从 SQL 服务器本身返回的结果（就像运行一条`select top 1`语句一样）还是 Hibernate 首先获取所有结果（在这种情况下为所有 100 行）并选择最上面的那个？

我要问的原因是，当行数开始增长时，它会出现巨大的性能问题。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T08:25:44.950

Hibernate 将为所有支持限制查询的方言生成限制类型查询。由于 SQLServerDialect 支持这一点（请参阅`org.hibernate.dialect.SQLServerDialect.supportsLimit()`和`.getLimitString()`），您将获得一个`select top 1`-query。

如果您想绝对确定，您可以打开调试日志记录，或启用 -`showSql`选项并进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T08:08:34.683

可能以下代码段会有所帮助。假设我们有一个托管 Bean 类 EmpBean，我们只需要前 5 条记录。所以下面是代码

```
public List<EmpBean> getData()
{
    Session session = null;
    try
    {
        session = HibernateUtil.getSession();
        Query qry = session.createQuery("FROM EmpBean");
        qry.setMaxResults(5);
        return qry.list();
    }
    catch(HibernateException e)
    {}
    finally
    {           
        HibernateUtil.closeSession(session);
    }
    return null;
} 
```

这里 getSession 和 closeSession 是静态实用程序方法，它们将负责创建和关闭会话

# haskell - 使用 ghci 时如何重用 cabal 编译的模块

> ID：15125825
> 
> 赞同：3
> 
> 时间：2013-02-28T01:23:31.947
> 
> 标签：haskell, ghci

我有一个相当大的 haskell 项目，在某些文件上运行 ghci 可能需要编译数十或数百个模块才能得到提示，这可能需要几分钟。我正在使用 cabal，所以我通常已经在 dist/ 下编译了目标文件。但是 ghci 只查找源 .hs 文件旁边的 .o 文件；它不知道 cabal 的 dist/。是否有任何简单而好的方法可以让 ghci 加载这些目标文件，而不是自己重新编译所有内容？

我要求一种简单而好的方法，因为我有复杂而丑陋的方法来做到这一点。:) 例如，这将使 ghci 重用 cabal 编译的模块。我通过复制和修改 cabal 运行 ghc 的方式提出了这个命令行，确保它将所有内容设置为与上次 cabal 构建相同，这是确保 ghci 加载模块所必需的。

ghci -package-conf dist/package.conf.inplace -i -idist/build/git-annex/git-annex-tmp -i。-idist/build/autogen -Idist/build/autogen -Idist/build/git-annex/git-annex-tmp -optP-include -optPdist/build/autogen/cabal_macros.h -odir dist/build/git-annex/ git-annex-tmp -hidir dist/build/git-annex/git-annex-tmp -stubdir dist/build/git-annex/git-annex-tmp -XHaskell98 dist/build/git-annex/git-annex-tmp /Utility/libdiskfree.o dist/build/git-annex/git-annex-tmp/Utility/libmounts.o

在我看来，“cabal ghci”应该可以计算并运行这个命令行，或者也许有一个我不知道的工具已经这样做了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T19:15:51.607

您可以将 odir 和 ohi 选项设置为指向 cabal 构建目录，如下所示：[http ://www.haskell.org/ghc/docs/7.6.1/html/users_guide/separate-compilation.html#output-files](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/separate-compilation.html#output-files)

# spring - Spring Framework 端到端测试的好策略

> ID：15125832
> 
> 赞同：2
> 
> 时间：2013-02-28T01:24:36.250
> 
> 标签：spring, testing, spring-mvc

所以这是一个相当“大”的问题，但我想要完成的是以下内容：

我有一个运行在 tomcat 上的 Spring 应用程序、MVC、JDBC (MySQL) 和 JSP。

我的目标是使用适当的方法测试整个“堆栈”。

到目前为止，我所拥有的是 Junit 使用 Selenium 来模拟与应用程序交互的实际用户（需要一个虚拟帐户），并执行不同的验证，例如查看页面中是否存在元素，查看数据库是否具有特定的值或值是否与数据库匹配。

第一个问题是这实际上是在使用数据库，因此很难测试某些场景。我真的很想能够模拟数据库。让它模拟特定的帐户配置、数据状态等

第二个问题是，鉴于我使用数据库中的内容，并且数据在不断变化，因此很难预测行为，因此很难正确断言

我查看了 Spring Test，但它允许在 servlet 容器之外进行测试，因此无法进行 JSP 和 Javascript 测试。

我看到了 DBUtils 文档，但不确定在这种情况下它是否对我有帮助

因此，对于我的开发人员，我想请教以下技巧：

*   在模拟数据库上运行 selenium 测试
*   每个测试允许不同的配置
*   保持与 Maven/Gradle 的兼容性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:21:20.033

我已经开始使用有序的自动连线功能来支持这种存根。

这基本上是我从过去使用的 Seam 框架中接管的一个想法，但我在春天找不到类似的东西。
这个想法是有一个优先注释（fw，app，mock，...），它将用于解析自动装配bean的当前实现。这在 xml 中已经很容易了，但在 java config 中却不是。

因此，我们将正常的存储库 bean 放入应用程序优先级和一个测试包，以模拟优先级对这些类进行存根。如果两者都在类路径中，spring 通常会因发现重复 bean 异常而失败。在我们的例子中，扩展的 beanfactory 只是采用具有最高优先级的 bean。

我不确定是否可以直接使用 spring 的 order annotation，但无论如何我更喜欢“定义良好”的优先级范围，所以我们的开发人员会清楚这是什么意思。

！虽然这是一种很好的存根方法，所以用于测试的 bean 我不会使用它来替换数据库定义，而是使用像 hsql 这样的内存数据库，就像之前提到的一些答案一样。！

# iphone - 使用 @ 作为 NSDictionary 字符串中键的一部分

> ID：15125833
> 
> 赞同：0
> 
> 时间：2013-02-28T01:24:38.883
> 
> 标签：iphone, ios, objective-c, ipad

我有以下代码，但是当我尝试使用此键从该字典中获取值时，它崩溃了。当我删除@时，它工作得很好。任何的想法？

```
[self.replacementFBMsgDictionary_ setValue:profileItem.fbId forKey:[NSString stringWithFormat:@"@%@", profileItem.username]]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T01:35:18.927

问题是，键开头的“@”在键值编码中具有特殊意义——它用于集合运算符，如`@count`. 因此，KVC 密钥不能以该字符串开头。`setValue:forKey:`因此，您必须使用 NSDictionary 的原语而不是 KVC `setObject:forKey:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:29:46.357

如果`profile.username`是一个`NSString`，你为什么要这样做？为什么不直接用它做钥匙呢？

```
[self.replacementFBMsgDictionary_ setValue:profileItem.fbId forKey:profileItem.username]; 
```

# c# - 仅对移动客户端使用 ASP.Net MVC

> ID：15125837
> 
> 赞同：4
> 
> 时间：2013-02-28T01:25:21.503
> 
> 标签：c#, mobile, asp.net-mvc-4

我们目前有一个大型 ASP.Net webforms 网站，我们刚刚开始将其中的一些部分转换为 asp.net MVc

我们想专门为移动客户端创建一个网站版本，并且我们想开始使用 MVC。

我知道 MVC 按照惯例支持以 .mobile 结尾的视图文件为移动客户端提供服务。但我的问题是 - 我一般如何设置桌面客户端仍然使用 default.aspx 但移动客户端被重定向到 /home

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T02:15:00.817

浏览器检测的代码应该放在一个基类中，所有页面都将从该基类中派生。试试下面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsMobileBrowser())
    {
         Response.Redirect("/home");    
         return;      
    }

    // your other code
} 

public static bool IsMobileBrowser()
{
    //GETS THE CURRENT USER CONTEXT
    HttpContext context = HttpContext.Current;

    //FIRST TRY BUILT IN ASP.NT CHECK
    if (context.Request.Browser.IsMobileDevice)
    {
        return true;
    }
    //THEN TRY CHECKING FOR THE HTTP_X_WAP_PROFILE HEADER
    if (context.Request.ServerVariables["HTTP_X_WAP_PROFILE"] != null)
    {
        return true;
    }
    //THEN TRY CHECKING THAT HTTP_ACCEPT EXISTS AND CONTAINS WAP
    if (context.Request.ServerVariables["HTTP_ACCEPT"] != null && 
        context.Request.ServerVariables["HTTP_ACCEPT"].ToLower().Contains("wap"))
    {
        return true;
    }
    //AND FINALLY CHECK THE HTTP_USER_AGENT 
    //HEADER VARIABLE FOR ANY ONE OF THE FOLLOWING
    if (context.Request.ServerVariables["HTTP_USER_AGENT"] != null)
    {
        //Create a list of all mobile types
        string[] mobiles =new[]
        {
              "midp", "j2me", "avant", "docomo", 
              "novarra", "palmos", "palmsource", 
              "240x320", "opwv", "chtml",
              "pda", "windows ce", "mmp/", 
              "blackberry", "mib/", "symbian", 
              "wireless", "nokia", "hand", "mobi",
              "phone", "cdm", "up.b", "audio", 
              "SIE-", "SEC-", "samsung", "HTC", 
              "mot-", "mitsu", "sagem", "sony"
              , "alcatel", "lg", "eric", "vx", 
             "NEC", "philips", "mmm", "xx", 
             "panasonic", "sharp", "wap", "sch",
             "rover", "pocket", "benq", "java", 
             "pt", "pg", "vox", "amoi", 
             "bird", "compal", "kg", "voda",
             "sany", "kdd", "dbt", "sendo", 
             "sgh", "gradi", "jb", "dddi", 
             "moto", "iphone"
        };

        //Loop through each item in the list created above 
        //and check if the header contains that text
        foreach (string s in mobiles)
        {
            if(context.Request.ServerVariables["HTTP_USER_AGENT"].ToLower().Contains(s.ToLower()))
            {
                return true;
            }
        }
    }

    return false;
} 
```

更多信息请访问：

[http://www.codeproject.com/Articles/213825/ASP-net-Mobile-device-detection](http://www.codeproject.com/Articles/213825/ASP-net-Mobile-device-detection)

[http://www.codeproject.com/Articles/34422/Detecting-a-mobile-browser-in-ASP-NET](http://www.codeproject.com/Articles/34422/Detecting-a-mobile-browser-in-ASP-NET)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T04:27:14.107

试试这样

```
if (request.Browser.IsMobileDevice)
{
 //rediret the user to mobile views
} 
```

确保删除 webform View Engine。像这样。[移动兼容视图引擎](http://www.hanselman.com/blog/NuGetPackageOfTheWeek10NewMobileViewEnginesForASPNETMVC3SpeccompatibleWithASPNETMVC4.aspx)

```
ViewEngines.Engines.Remove(ViewEngines.Engines.OfType<WebFormViewEngine>().First());
ViewEngines.Engines.Add(new MobileCapableWebFormViewEngine()); // this will come from Nuget Package. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:48:27.537

将以下代码写入 Global.asax。

如果用户将通过桌面访问该网站，它将自动重定向到桌面网站天气用户通过 Android 手机访问它将自动重定向到移动网站

```
 protected void Application_Start()
    {
        DisplayModes.Modes.Insert(0, new DefaultDisplayMode("Android")
        {
            ContextCondition = (context => context.Request.UserAgent.IndexOf
                ("Android", StringComparison.OrdinalIgnoreCase) >= 0)
        });

        DisplayModes.Modes.Insert(0, new DefaultDisplayMode("WindowsPhone")
        {
            ContextCondition = (context => context.Request.UserAgent.IndexOf
                ("Windows Phone OS", StringComparison.OrdinalIgnoreCase) >= 0)
        });
    } 
```

# java - 简单的 XML @Text 导致异常

> ID：15125842
> 
> 赞同：0
> 
> 时间：2013-02-28T01:26:04.547
> 
> 标签：java, xml, simple-framework

我有一个像这样的简单类：

```
 public static class MyData {

        @Text(required = false)
        protected String value;
        @Attribute(required = true)
        protected String id;

        @Text
        public String getValue() {
            return value;
        }

        @Text
        public void setValue(String value) {
            this.value = value;
        }

        public String getId() {
            return id;
        }

        public void setId(String value) {
            this.id = value;
        } 
```

}

它导致异常：

```
Exception Text annotation 
  @org.simpleframework.xml.Text(data=false, empty=, required=true) 
on method 'value' used with elements in class MyData 
```

实际的 XML 是：

```
 <MyData id="fakeId">An HTTP Link is here</MyData> 
```

任何想法：我尝试了一些组合，例如`@Text`在 getValue/setValue 处没有注释，但似乎没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:09:06.543

问题是上课前的这些注释。@Default(DefaultType.FIELD) @Order(元素= { })

删除上述行后，它工作正常。

# facebook - 在 Windows Phone 上使用 Facebook C# sdk 时如何更改用户？

> ID：15125850
> 
> 赞同：1
> 
> 时间：2013-02-28T01:26:42.820
> 
> 标签：facebook, windows-phone-7, dll, windows-phone

我已经开始在我的 WP7 应用程序中使用 C# facebook sdk，它可以工作，但我只能登录一次。我有一个类可以打开一个网络浏览器并加载一个 facebook 登录页面。我输入我的信息，它会做我想做的事。但是一旦我再次尝试登录，它就会记住我之前提供的信息，并且我无法测试其他 Facebook 帐户。有谁知道如何清除我的旧数据以便我可以使用另一个帐户登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:47:11.923

您需要执行注销操作才能使用另一个帐户执行登录操作尝试使用此代码执行注销。

```
public partial class LogoutPage : PhoneApplicationPage
{
    private Uri navigateUrl;
    public FacebookOAuthResult FacebookOAuthResult { get; private set; }

    public LogoutPage()
    {
        var appId = "173963872698818";
        string[] extendedPermissions = new[] { "user_about_me", "offline_access" };
        var oauth = new FacebookOAuthClient { AppId = appId };

        var parameters = new Dictionary<string, object>
                {
                    { "response_type", "token" },
                    { "display", "wap" }    //"popup works, touch not works
                };

        if (extendedPermissions != null && extendedPermissions.Length > 0)
        {
            var scope = new StringBuilder();
            scope.Append(string.Join(",", extendedPermissions));
            parameters["scope"] = scope.ToString();
        }

        var loginUrl = oauth.GetLoginUrl(parameters);
        var logoutParameters = new Dictionary<string, object>
                                       {
                                           { "next", loginUrl }
                                       };            

        //Redirect to the following url.
        // https://www.facebook.com/logout.php?next=YOUR_URL&access_token=ACCESS_TOKEN
        //this.navigateUrl = oauth.GetLogoutUrl(logoutParameters);

        var a = App.Current as App;
        string absoluteURI = " https://www.facebook.com/logout.php?next=http://www.fengshuiexplorer.host56.com&access_token=" + a.myToken;

        this.navigateUrl = new Uri(absoluteURI);

        InitializeComponent();
    }

    private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        webBrowser1.Navigate(this.navigateUrl);
    }

    private void webBrowser1_Navigated(object sender, System.Windows.Navigation.NavigationEventArgs e)
    {
        FacebookOAuthResult result;
        if (FacebookOAuthResult.TryParse(e.Uri, out result))
        {
            this.FacebookOAuthResult = result;
            var a = App.Current as App;
            a.isLoggedIn = false;
            NavigationService.GoBack();
        }
        else
        {
            this.FacebookOAuthResult = null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T04:15:43.430

或者您可以在再次登录之前尝试调用以下代码片段。

```
await new WebBrowser().ClearCookiesAsync(); 
```

# javascript - rAppid.js 用于移动应用程序 - 服务器端渲染实用吗？

> ID：15125853
> 
> 赞同：-1
> 
> 时间：2013-02-28T01:26:58.153
> 
> 标签：javascript, mobile

我正在评估[rAppid.js](http://www.rappidjs.com)框架作为新项目的候选者。该项目将是一个主要针对移动设备的 Web 应用程序（我将使用 Web 视图将其包装为可以提交到 Apple 和 Android 应用程序商店的应用程序）。我意识到这不是构建 rAppid.js 的主要用例，但我认为它可能会很好地工作，至少在我的情况下，这要归功于 rAppid.js 基于 XML 的 UI 语言。

理论上，我可以使用新的 rAppid.js 服务器在那里呈现模板并将呈现的 HTML 发送到客户端吗？

鉴于我希望页面尽快加载，并且应用程序不需要离线工作，我更愿意在服务器端呈现模板并将它们作为纯 HTML 发送到客户端。显然，在这种情况下，框架只能为我提供单向数据绑定（除非我重新编写 rAppid.js 代码以支持类似于[Derby](http://derbyjs.com/)框架的服务器渲染模型），但我认为应用程序的性能改进可能是值得。

也许我对 rAppidJS 在移动设备上的客户端渲染速度过于悲观，但无论如何我很想听听对此的看法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:41:16.960

> 理论上，我可以使用新的 rAppid.js 服务器在那里呈现模板并将呈现的 HTML 发送到客户端吗？

是的，具有节点渲染功能。但请记住，节点渲染是出于 SEO 的原因而开发的。由于这种背景，应用程序的唯一状态是 url。这可能适合您的应用程序概念（例如 /user/{userid}/news）来呈现用户的新闻，但呈现的站点将是完全静态的。

因此，如果您中继用户输入、客户端验证，您应该按照设计方式使用 rAppid:js，并在客户端上呈现完整的应用程序。

> 鉴于我希望页面尽快加载，并且应用程序不需要离线工作，我更愿意在服务器端呈现模板并将它们作为纯 HTML 发送到客户端。显然，在这种情况下，框架只能为我提供单向数据绑定（除非我重新编写 rAppid.js 代码以支持类似于 Derby 框架的服务器渲染模型），但我认为应用程序的性能改进可能是值得。

我从 RIA 获得的经验是，有一个初始加载阶段（Flex 应用程序显示加载器，iOS 原生应用程序显示图像，直到应用程序准备好）并且应用程序可以快速运行而无需额外的加载时间。如果您将应用程序分成模块（rAppid.js 很好地支持这一点）并在启动期间加载所需的模块，应用程序应该加载得非常快。如果将应用程序包装在 Web 视图中，JS 性能会比在移动浏览器中运行它稍好。

您也可以尝试结合使用服务器端和客户端渲染，但不要混合它们。因此，在服务器上渲染页面并在应用程序的加载阶段显示静态 html。只要应用程序完全加载，就可以切换视图。

> 也许我对 rAppidJS 在移动设备上的客户端渲染速度过于悲观，但无论如何我很想听听对此的看法。

在我们最新的项目中，我们还添加了一个预加载器并将项目分成模块。与闪存版本相比，我们还拥有它的 10 倍小，并且在桌面系统中加载速度更快。在移动设备上，由于 Flash 插件，它不会加载，所以我无法比较它。

如果您想在移动设备上获得出色的性能，请将应用程序拆分为多个模块并仅在需要时加载它们。

rAppid:js 支持基于路由的模块加载，因此也可以使用预先选择的模块启动应用程序。

# django - Django 应用程序使用 Heroku 数据库设置中断

> ID：15125854
> 
> 赞同：0
> 
> 时间：2013-02-28T01:27:03.737
> 
> 标签：django, heroku, django-settings

当我在本地运行我的 Django 应用程序时，一切正常，但是当我使用部署到 Heroku 时

```
import dj_database_url 

DATABASES = {'default': dj_database_url.config(default='postgres://')} 
```

对于我的数据库设置，我收到以下错误

```
TypeError at /

cannot concatenate 'str' and 'NoneType' objects 
```

您可以在此处查看完整的错误消息[http://tulsa-staging.heroku.com](http://tulsa-staging.heroku.com)

我已删除所有非必要设置并将问题隔离到此设置。

那么我到底在做什么错呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:53:45.820

为什么不在配置字符串中列出主机？

```
DATABASES = {'default': dj_database_url.config(default='postgres://localhost')} 
```

# c# - 用 Irony 解析 SQL 语句

> ID：15125859
> 
> 赞同：14
> 
> 时间：2013-02-28T01:27:32.800
> 
> 标签：c#, sql, irony

我正在尝试创建一个将常规 sql 语句转换为 c# 对象的方法，因此我决定使用 Irony 来解析 sql 语句，然后我将语句作为包含语句类型及其值的操作返回，具体取决于类型

这是我未完成的代码[因为我很沮丧，因为我不知道该怎么做]

```
private List<Action> ParseStatement(string statement)
{
    var parser = new Parser(new SqlGrammar());
    var parsed = parser.Parse(statement);
    var status = parsed.Status;

    while (parsed.Status == ParseTreeStatus.Parsing)
    {
        Task.Yield();
    }

    if (status == ParseTreeStatus.Error)
        throw new ArgumentException("The statement cannot be parsed.");

    ParseTreeNode parsedStmt = parsed.Root.ChildNodes[0];

    switch (parsedStmt.Term.Name)
    {
        case "insertStmt":
            var table = parsedStmt.ChildNodes.Find(x => x.Term.Name == "Id").ChildNodes[0].Token.ValueString;
            var valuesCount =
                parsedStmt.ChildNodes.Find(x => x.Term.Name == "insertData").ChildNodes.Find(
                    x => x.Term.Name == "exprList").ChildNodes.Count;
            var values = parsedStmt.ChildNodes.Find(x => x.Term.Name == "insertData").ChildNodes.Find(
                    x => x.Term.Name == "exprList").ChildNodes;
            foreach (var value in values)
            {
                string type = value.Token.Terminal.Name;
            }
            break;
    }

    return null;
}

private Type ParseType(string type)
{
    switch (type)
    {
        case "number":
            return typeof (int);
        case "string":
            return typeof (string);
    }

    return null;
} 
```

所以这里的问题是：我如何利用 Irony 将字符串 SQL 语句转换为 ac# 对象？

这是我想要实现的一个例子：

> 插入人的价值观（4，'Nilsen'，'Johan'，'Bakken 2'，'Stavanger'）

并将其转换为

```
return new Action<string type, string table, int val1, string val2, string val3, string val4, string val5>; 
```

动态地取决于方法从语句中读取的内容。

我希望我已经很好地解释了我的想法，所以你们可以帮助我，如果有不清楚的地方请告诉我，我会尽力解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-24T18:18:37.487

我也试图用 Irony 来解析 SQL。我放弃了，因为 Irony 中的示例 SQL 解析器无法处理：CTE、按列号排序、特殊语句的一半，例如

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED 
```

虽然我在学习 Irony 方面度过了愉快的时光，但我没有正确实现上述所有部分的编码能力。

我最终使用了 Microsoft 提供的 SQL 解析库。LINQPad 5 的示例代码如下：

```
// Add a reference to
// C:\Program Files (x86)\Microsoft SQL Server\130\SDK\Assemblies\
//   Microsoft.SqlServer.TransactSql.ScriptDom.dll
// 
// https://blogs.msdn.microsoft.com/gertd/2008/08/21/getting-to-the-crown-jewels/

public void Main()
{
    var sqlFilePath = @"C:\Users\Colin\Documents\Vonigo\database-scripts\Client\Estimate\spClient_EstimateAddNew.sql";
    bool fQuotedIdenfifiers = false;
    var parser = new TSql100Parser(fQuotedIdenfifiers);

    string inputScript = File.ReadAllText(sqlFilePath);
    IList<ParseError> errors;
    using (StringReader sr = new StringReader(inputScript))
    {
        var fragment = parser.Parse(sr, out errors);
        fragment.Dump();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-30T05:12:59.333

如果您不将此作为有趣的练习，我建议您使用 Linq to SQL 生成您的存根类或实体框架作为评论中提到的 Drunken Code Monkey。

这是一篇很好的文章，可以帮助您入门： [Generating EF code from existing DB](http://weblogs.asp.net/jongalloway/generating-ef-code-first-model-classes-from-an-existing-database)

# php - php if 语句如何

> ID：15125861
> 
> 赞同：0
> 
> 时间：2013-02-28T01:27:36.917
> 
> 标签：php, switch-statement

因此，我查看了各种帮助站点，但似乎没有人遇到与我相同的问题，让我在代码后解释一下：

```
 $pgint=$_POST['pg'];

    echo '<li><h4>Insects and Plants</h4>';
    switch($pgint)
    {
    case "1":
    echo '1';
    break;
    case "2":
    echo '2';
    break;
    } 
```

即使“pg”同时设置为 1 和 2，它也没有回声。有人可以帮忙吗？URL 如下所示：[http ://mydomainname.com/index.php?pg=1](http://mydomainname.com/index.php?pg=1)

没有回应任何东西。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T01:28:41.830

您混淆了 POST 和 GET。您需要 GET 因为您要查找的值在查询字符串中：

```
$pgint=$_POST['pg']; 
```

应该：

```
$pgint=$_GET['pg']; 
```

您应该[`error_reporting()`](http://php.net/manual/en/function.error-reporting.php)报告所有错误，包括通知。如果你这样做了，你会立即抓住这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:29:56.057

在这种情况下，pg 是一个 GET 变量，而不是 POST。

# git - 超过 Github 远程推送包大小

> ID：15125862
> 
> 赞同：61
> 
> 时间：2013-02-28T01:27:37.953
> 
> 标签：git, github, git-push

我是 Git 新手，并且有一个相当大的项目，我想将其推送到 Github 上的远程仓库（仓库 B）。最初的项目也在 Github 上，但来自不同的 repo (Repo A)。在我可以在 Repo B 上设置项目之前，我必须对 Repo A 中的文件进行一些更改。我已经设置了遥控器、ssh 密钥等，并且在将代码库推送到 Repo B 时遇到了问题。

我一直收到以下错误：

```
$ git push <remote_repo_name> master
Enter passphrase for key '/c/ssh/.ssh/id_rsa':
Counting objects: 146106, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (35519/35519), done.
fatal: pack exceeds maximum allowed size00 GiB | 154 KiB/s
fatal: sha1 file '<stdout>' write error: Invalid arguments
error: failed to push some refs to 'git@github.com:<repo>.git 
```

我在本地 gitconfig 中更改了以下设置

```
git config pack.packSizeLimit 1g
git config pack.windowMemory 1g 
```

...并运行 git gc （我看到它重新组织了包，使每个包都保持在 1GB 的包大小内）。这不起作用，我得到了上面看到的错误。

我也尝试降低每个包装的尺寸....

```
git config pack.packSizeLimit 500m
git config pack.windowMemory 500m 
```

...并运行 git gc （我看到它重新组织了包，使每个包都保持在 500MB 的包大小内）。这也不起作用，我遇到了同样的错误。

我不确定 Github 的默认包大小限制是多少（如果有的话）。如果重要的话，该帐户是一个微型帐户。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-07-24T06:35:08.330

packsize 限制不影响 git 协议命令（您的推送）。

从[git-config](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)下 `pack.packSizeLimit`：

> 一包的最大尺寸。此设置仅影响重新打包时打包到文件，***即 git:// 协议不受影响***。

执行推送时，无论大小如何，git 总是会创建一个包！

要解决此问题，请使用两个（或更多）推送：

```
git push remoteB <some previous commit on master>:master
...
git push remoteB <some previous commit after the last one>:master
git push remoteB master 
```

这些推送都会有更小的包并且会成功。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2018-07-22T19:03:54.987

正如 onionjake 在他的回答中指出的那样，该`pack.packSizeLimit`设置[不会影响 pushes](https://git-scm.com/docs/git-config#git-config-packpackSizeLimit)。正如他所建议的，这通常可以通过使用每次提交较少的多次推送来解决。rurban 发表了关于如何自动推送 500 次提交的评论。以下是他的评论的修改版本，无论远程分支是否存在或是否存在并且已经包含一些提交，都可以正常工作。当存储库包含多个根提交时，我还在调用中添加了`--first-parent`参数以`git log`防止错误。我还进行了一些调整以提高效率，并添加了一个额外的调用`git push`来推送最终（部分）批次的提交：

```
# Adjust the following variables as necessary
REMOTE=origin
BRANCH=$(git rev-parse --abbrev-ref HEAD)
BATCH_SIZE=500

# check if the branch exists on the remote
if git show-ref --quiet --verify refs/remotes/$REMOTE/$BRANCH; then
    # if so, only push the commits that are not on the remote already
    range=$REMOTE/$BRANCH..HEAD
else
    # else push all the commits
    range=HEAD
fi
# count the number of commits to push
n=$(git log --first-parent --format=format:x $range | wc -l)

# push each batch
for i in $(seq $n -$BATCH_SIZE 1); do
    # get the hash of the commit to push
    h=$(git log --first-parent --reverse --format=format:%H --skip $i -n1)
    echo "Pushing $h..."
    git push $REMOTE ${h}:refs/heads/$BRANCH
done
# push the final partial batch
git push $REMOTE HEAD:refs/heads/$BRANCH 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-03-26T07:56:10.203

好吧，在大多数情况下，限制每次推送中的提交计数（例如 500）是有帮助的。但它无法解决单个大提交导致的错误。

如果单个大提交超过了 git 服务器的限制大小，则限制提交计数（甚至为 1）将无济于事。

修复单个大提交：

1.  如果此提交包含多个文件，则可以通过创建子提交和合并提交来解决。
2.  如果它是一个大文件，那么就没有好的解决方案。

修复包含多个文件的单个大型提交（例如 file1、file2、...、file10）

```
git checkout -b tmp SINGLE_LARGE_COMMIT^
git add file1 file2 file3 file4  # add a sub-class of files inside SINGLE_LARGE_COMMIT
git commit -m 'sub-commit'
git push origin tmp
git merge master  # or any other branch which contains SINGLE_LARGE_COMMIT
git push origin tmp
git checkout master
git push origin master # success 
```

# django - 表单模板加载的 Django/FF 问题

> ID：15125863
> 
> 赞同：0
> 
> 时间：2013-02-28T01:27:41.660
> 
> 标签：django, django-forms, django-templates, django-views, django-urls

当我提交表单时（例如：下面）， url 被重定向到`localhost:8000/test/result/`，我得到了一些结果。这一步工作正常。
但是，当我单击浏览器后退按钮返回初始表单时，Firefox 不会加载表单，尽管 url 已更改为`localhost:8000/test/`. 我得到一个空白页。此外，如果我再次单击后退按钮，它会将我带到`localhost:8000`页面。Chrome 和 IE 都可以。
我做错了什么，我该如何解决这个 FF 问题？
提前谢谢了。

```
#---test.html---
<form id="input-form" action="{% url test.views.main_view %}" method="post" enctype="multipart/form-data">{% csrf_token %}
...
</form>

#---views.py---
class MainView(FormView):
    template_name = 'test.html'
    form_class = UserInputForm
    success_url = 'result/'

    def form_valid(self, form):
        ...

#---urls.py---
urlpatterns =  patterns('test.views',
    url(r'^$', view='main_view', name='main-view'),
    url(r'^result/$', view='result_view', name='result-view'),
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:12:54.367

我有一种感觉[，这](https://stackoverflow.com/q/2638292/1428653)就是问题所在。如果做不到这一点，肯定会起作用的方法是将您的 Cache-Control 标头设置为“无缓存、必须重新验证、无存储”——但这是一个令人讨厌的蛮力解决方案。

# mysql - 当多个表引用时使用 Doctrine 删除 MySQL 中的条目

> ID：15125867
> 
> 赞同：0
> 
> 时间：2013-02-28T01:27:48.247
> 
> 标签：mysql, doctrine-orm, cascade

我有一个数据库模式，其中一张表表示物理地址`Addresses`，两张表表示，一张表示`Manufacturers`，一张表示`Vendors`. 由于我们数据库的性质，a`Manufacturer`和 a`Vendor`可能会引用相同的`Address`.

当我尝试使用 Doctrine 删除`Vendor`引用`Address`a`Manufacturer`也引用的 a 时，我的问题就开始了。 `Manufacturer`并且`Vendor`每个都有`OneToOne`关系`Address`。

我可以在 phpMyAdmin 中很好地删除该条目，并且我已经尝试过 Doctrine 中的`cascade="remove"`and`orphanRemoval=true`选项，但似乎都不起作用。

关于如何使这项工作的任何想法？这就是我`address`在两者中定义的方式`Manufacturer`和`Vendor`：

```
/**
 * @ORM\OneToOne(targetEntity="Address", orphanRemoval=true)
 */
private $address; 
```

我不知道为什么我不能让它在 phpMyAdmin 中工作得很好。该关系是单向的，因此与或`Address`没有任何关系。`Manufacturer``Vendor`

**编辑**（显示实际上应该从数据库中删除实体的代码）：这是实际删除实体的代码（其中`$instance`只是一个表示`id`实体的整数，并且`$entity`是我要删除的实体类型的名称（例如`Address`）：

```
//  Grab entity from Doctrine.
$entry = $this->doctrine->em->getRepository($entity)->find($instance);

//  Remove entity from database.
$this->doctrine->em->remove($entry);

//  Flush the entity manager.
$this->doctrine->em->flush(); 
```

此代码的结果（当尝试删除`Vendor`指向实例也指向的`Address`实例的`Manufacturer`实例时）是服务器 500 错误，error_log 中包含以下内容：

```
PHP Fatal error:  Uncaught exception 'PDOException' with message 'SQLSTATE[23000]: Integrity constraint violation: 1451 Cannot delete or update a parent row: a foreign key constraint fails (`{withheld}`.`Manufacturers`, CONSTRAINT `FK_272810E7F5B7AF75` FOREIGN KEY (`address_id`) REFERENCES `Addresses` (`id`))' in {withheld}/application/libraries/Doctrine/DBAL/Connection.php:754\nStack trace:\n#0 {withheld}/application/libraries/Doctrine/DBAL/Connection.php(754): PDOStatement->execute(Array)\n#1 {withheld}/application/libraries/Doctrine/DBAL/Connection.php(438): Doctrine\\DBAL\\Connection->executeUpdate('DELETE FROM Add...', Array)\n#2 {withheld}/application/libraries/Doctrine/ORM/Persisters/BasicEntityPersister.php(464): Doctrine\\DBAL\\Connection->delete('Addresses', Array)\n#3 {withheld}/application/libraries/Doctrine/ORM/UnitOfWork.php(993): Doctrine\\ORM\\Persisters\\BasicEntityPersister->delete(Object(Proxies\\__CG__\\Entities\\Address))\n#4 {withheld}/application/libraries/Doctrine/ORM/UnitOfWork.php(331): Doctrine\\ORM\\UnitOfWork->executeDeletions(Object(Doctrine\\ORM\\Mapping\\ClassMetadata))\n#5 {withheld}/application/libraries/Doctrine/ORM/EntityManager.php(355): Doctrine\\ORM\\UnitOfWork->commit(NULL)\n#6 {withheld}/application/controllers/ajax.php(70): Doctrine\\ORM\\EntityManager->flush()\n#7 [internal function]: Ajax->delete('vendors', '1')\n#8 {withheld}/system/core/CodeIgniter.php(359): call_user_func_array(Array, Array)\n#9 {withheld}/index.php(202): require_once('{withheld}...')\n#10 {main}\n  thrown in {withheld}/application/libraries/Doctrine/DBAL/Connection.php on line 754 
```

# c# - 带有响应式扩展的流算术

> ID：15125870
> 
> 赞同：5
> 
> 时间：2013-02-28T01:28:44.047
> 
> 标签：c#, system.reactive

我目前正在开发一个通过方程式组合许多数据流的应用程序。我想做的是：

```
var result = (stream1 + stream2) / stream3 + stream4 * 2; 
```

每当`result`任何流更新时都会更新。目前，我可以在 Rx 中表达这一点的唯一方法是：

```
var result = stream1.CombineLatest(stream2, (x,y) => x+y)
  .CombineLatest(stream3, (x,y) => x / y)
  .CombineLatest(stream4, (x,y) => x + y*2); 
```

这几乎不是那么清楚。

我目前的想法如下：

```
Public class ArithmeticStream : IObservable<double>
{
    public static ArithmeticStream operator +(ArithmeticStream xx, ArithmeticStream yy)
    {
        return Observable.CombineLatest(xx,yy, (x,y) => x + y);
    }
    ...
} 
```

问题是 CombineLatest 返回一个`IObservable<double>`而不是 ArithmeticStream。

两个可能的问题：

如何透明地将 a`IObservable<double>`转换为 ArithmeticStream？

有没有其他路线可以让我得到我想要的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T04:08:40.197

嗯......我认为你可以相对容易地做到 DSL 风格（不用摆弄运营商）：

```
public static class Ext
{
    public static IObservable<double> Const(this double constant)
    {
        return Observable.Return(constant);
    }

    public static IObservable<double> Plus(this IObservable<double> left, IObservable<double> right)
    {
        return left.CombineLatest(right, (l,r) => l + r);
    }
    public static IObservable<double> Minus(this IObservable<double> left, IObservable<double> right)
    {
        return left.CombineLatest(right, (l,r) => l - r);
    }
    public static IObservable<double> Times(this IObservable<double> left, IObservable<double> right)
    {
        return left.CombineLatest(right, (l,r) => l * r);
    }
    public static IObservable<double> Over(this IObservable<double> left, IObservable<double> right)
    {
        return left.CombineLatest(right,(l,r) => l / r);
    }
} 
```

所以你的查询是：

```
var result = (s1.Plus(s2)).Over(s3)
        .Plus(s4)
        .Times(2.0.Const()); 
```

或者，对于一个非常健谈的变体：

```
var verboseResult = 
    (s1.Do(Console.WriteLine).Plus(s2.Do(Console.WriteLine)))
    .Over(s3.Do(Console.WriteLine))
    .Plus(s4.Do(Console.WriteLine))
    .Times(2.0.Const())
    .Do(x => Console.WriteLine("(s1 + s2) / s3 + s4 * 2 = " + x)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T17:16:41.920

将其添加为新答案，因为它完全不同...

因此，如果您致力于执行操作员重载路线，那么您需要这样做（嗯，至少是一种方式）......老实说，我不喜欢这种方法 -虽然它确实使查询编写更加简洁，但 DSL 方法具有类似的“简洁性”，但在不依赖运算符重载的意义上更清晰。

```
public static class ArithmeticStreamExt
{
    public static ArithmeticStream Wrap(this IObservable<double> src)
    {
        return new ArithmeticStream(src);
    }
    public static ArithmeticStream Const(this double constValue)
    {
        return new ArithmeticStream(Observable.Return(constValue));
    }
}
public class ArithmeticStream 
{
    private IObservable<double> _inner;

    public ArithmeticStream(IObservable<double> source)
    {
        _inner = source;
    }

    public IObservable<double> Source {get { return _inner; }}

    public static ArithmeticStream operator +(
       ArithmeticStream left, 
       ArithmeticStream right)
    {
        return new ArithmeticStream(
            left._inner.CombineLatest(right._inner, (l, r) => l + r));
    }
    public static ArithmeticStream operator -(
       ArithmeticStream left, 
       ArithmeticStream right)
    {
        return new ArithmeticStream(
            left._inner.CombineLatest(right._inner, (l, r) => l - r));
    }
    public static ArithmeticStream operator *(
       ArithmeticStream left, 
       ArithmeticStream right)
    {
        return new ArithmeticStream(
            left._inner.CombineLatest(right._inner, (l, r) => l * r));
    }
    public static ArithmeticStream operator /(
       ArithmeticStream left, 
       ArithmeticStream right)
    {
        return new ArithmeticStream(
            left._inner.CombineLatest(right._inner, (l, r) => l / r));
    }

    public static ArithmeticStream operator +(
        ArithmeticStream left, 
        IObservable<double> right)
    {
        return new ArithmeticStream(
            left._inner.CombineLatest(right, (l, r) => l + r));
    }
    public static ArithmeticStream operator -(
        ArithmeticStream left, 
        IObservable<double> right)
    {
        return new ArithmeticStream(
            left._inner.CombineLatest(right, (l, r) => l - r));
    }
    public static ArithmeticStream operator *(
        ArithmeticStream left, 
        IObservable<double> right)
    {
        return new ArithmeticStream(
            left._inner.CombineLatest(right, (l, r) => l * r));
    }
    public static ArithmeticStream operator /(
        ArithmeticStream left, 
        IObservable<double> right)
    {
        return new ArithmeticStream(
             left._inner.CombineLatest(right, (l, r) => l / r));
    }
} 
```

还有一个测试台：

```
void Main()
{
    var s1 = new Subject<double>();
    var s2 = new Subject<double>();
    var s3 = new Subject<double>();
    var s4 = new Subject<double>();

    var result = (s1.Wrap() + s2) / s3 + (s4.Wrap() * 2.0.Const());
    using(result.Source.Subscribe(Console.WriteLine))
    {
        s1.OnNext(1.0);
        s2.OnNext(2.0);
        s3.OnNext(3.0);
        s4.OnNext(4.0);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T04:18:58.630

考虑创建一个接受 3、4、5 等 IObservables 和具有匹配数量的结果选择器函数的 CombineLatest 版本。这将使您将算术运算表达为对双精度的普通旧运算 - 非常简单和干净。

如果你需要帮助来实现这些，就这么说吧，我会举个例子。

## 编辑

我所指的 CombineLatest 重载已经存在，只是没有记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T16:38:18.350

这不如运算符重载好，但我很确定你不能做你想要的那种运算符重载，因为扩展方法中不支持运算符重载。

```
var stream1 = Observable.Generate(1.0, x => x < 1000.0, x => x + 0.5, x => x);
var stream2 = Observable.Generate(1.0, x => x < 1000.0, x => x + 0.25, x => x);
var stream3 = Observable.Generate(1.0, x => x < 1000.0, x => x + 0.125, x => x);
var stream4 = Observable.Generate(1.0, x => x < 1000.0, x => x + 0.0625, x => x);
var result = stream1.CombineLatest(stream2, stream3, stream4, (w, x, y, z) => (w + x) / y + z * 2); 
```

否则，JerKimball 给出了一个很好的答案。

# javascript - 当返回内容时，检测 javascript/jquery 中的图像 404 加载？

> ID：15125871
> 
> 赞同：4
> 
> 时间：2013-02-28T01:28:52.580
> 
> 标签：javascript, jquery

我遇到了 jQuery 的 onerror 处理（或者更具体地说是浏览器的 javascript onerror 事件）的困境。我有一个图像处理程序，它从数据库加载图像，如果找不到它，它会返回 404 状态代码，但也会返回默认的未找到图像。

事实证明，除非内容主体为空，否则浏览器不会触发 onerror 事件。jQuery 声明这是基于响应状态代码的，但事实并非如此。有人知道解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:47:17.837

我输入了一个很长的答案，但我的浏览器咀嚼了它……看看下面的文章，看看如果在 DOM 加载*后将OnError 绑定到图像会发生什么：*

[http://maisonbisson.com/post/12150/detecting-broken-images-in-javascript/](http://maisonbisson.com/post/12150/detecting-broken-images-in-javascript/)

但要小心，因为您尝试实现的方法是一种解决方法，实际上是一种有效的行为。

如果您的图像处理程序找不到请求的图像，为什么不直接返回默认图像和 OK，而不是返回 404 和默认图像？毕竟，即使它不是您需要的特定图像，它仍然是有效的（尽管是默认的）响应。

# heroku - Rails、Twitter Bootstrap、Simple Form、Heroku - 使用 ":wrapper => :prepend do" 获取附加跨度时出现奇怪错误

> ID：15125874
> 
> 赞同：0
> 
> 时间：2013-02-28T01:29:08.650
> 
> 标签：heroku, twitter-bootstrap, ruby-on-rails-3.2, simple-form

我有以下代码的形式部分：

```
<%= f.association :client %>
<%= f.input :url, :wrapper => :prepend do %>
    <%= content_tag :span, "http://www.", :class => "add-on" %>
    <%= f.input_field :url, :class => 'span4' %>
<% end %> 
```

尝试加载与此表单部分有关的任何内容，例如新建/编辑等会导致 Heroku 出错。它在本地主机上完美运行。

Heroku 日志中唯一明显的错误是：

```
ActionView::Template::Error (undefined method `source' for nil:NilClass): 
```

恐怕我不太明白这一点，但认为它可能会帮助任何试图回答这个问题的人。

如果我更改表单部分代码，它可以在 Heroku 上运行，完全没有问题，例如

```
<%= f.input :url, :input_html => {:class => 'span4' } %> 
```

显然我失去了我很好的引导插件跨度，所以我宁愿找出问题所在，而不是到处乱跑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:04:34.387

在黑暗中拍摄，但可能是设置前置包装器的初始化程序（如初始化程序/simple_form.rb 或初始化程序/simple_form_bootstrap.rb）没有被 Heroku 运行，要么是因为它没有检入 git，要么是因为某些环境-初始化程序或环境文件中的特定逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:13:22.807

好吧，经过测试和丹的一些帮助，我终于明白了。不幸的是，它似乎非常适合我的情况。

但以防万一有人偶然发现，我遇到的错误如下：

```
ActionView::Template::Error (undefined method `source' for nil:NilClass): 
```

那在日志中，当我按照 Dan 的建议在生产站点上打开错误报告（`consider_all_requests_local = true`在 config/environments/production.rb 中设置）时也是如此。

我认为错误是在模板中引起的，但是，这是模型中的一些验证规则。我的验证规则是一些正则表达式来阻止用户使用某个字符串开始输入。它们在我本地运行得非常好，但 Heroku 真的不喜欢它！

我删除了这些验证规则，瞧，我漂亮的引导插件跨度运行良好。

# crm - OpenERP v7 - 如何将 crm 电话记录限制为用户公司？

> ID：15125876
> 
> 赞同：3
> 
> 时间：2013-02-28T01:29:16.640
> 
> 标签：crm, openerp

在 OpenERP v7 中，我尝试将一些域力添加到一些 osv 对象。除了 crm.phonecall 对象外，它们都工作正常。这是我添加的用于限制访问的代码。

```
<record id="crm_phonecall_comp_rule" model="ir.rule">
<field name="name">CRM Phone Call MutliCompany</field>
<field model="ir.model" name="model_id" ref="crm.model_crm_phonecall"/>
<field eval="True" name="global"/>
<field name="domain_force">['|',('company_id','=',False),('company_id','child_of',    [user.company_id.id])]</field>
</record> 
```

这些代码不起作用......我的代码有什么问题，或者这是 V7 中针对 crm.phonecall 对象的一个​​已知问题？

问候圣人

# java - 关于内部类私有成员变量访问

> ID：15125889
> 
> 赞同：3
> 
> 时间：2013-02-28T01:30:30.847
> 
> 标签：java, private-members

假设有一个名为的类`MyOuter`，它由一个名为 的简单内部类组成`MyInner`。在尝试了解内部类如何工作时，我试图了解外部类私有成员变量是否可以从内部类本身访问。

```
class MyOuter {
  private int x = 7;
  // inner class definition
  class MyInner {
    public void seeOuter() {
      System.out.println("Outer x is " + x);
    }
  } // close inner class definition
} // close outer class 
```

根据我的分析，前面的代码是完全合法的。请注意，内部类确实在访问外部类的私有成员。这很好，因为内部类也是外部类的成员。因此，正如外部类的任何成员（例如，实例方法）可以访问外部类的任何其他成员，无论是否私有，内部类（也是成员）也可以这样做。

请告知我的理由是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:33:04.793

内部类是其封闭类的成员，可以直接访问该对象的方法和字段。有关详细信息，请参阅[嵌套类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)。

# c++ - C++ 在进入函数之前就出现了段错误

> ID：15125891
> 
> 赞同：0
> 
> 时间：2013-02-28T01:30:39.957
> 
> 标签：c++, segmentation-fault

我在尝试压缩文件数据时遇到问题。一切都对压缩调用起作用，但它不是压缩调用本身，因为段错误被抛出在它之前。显示我的代码会更清楚：

```
std::cout << "FILENAME: ";
std::cin >> filename;

if(!fileExists(filename))
{
    std::cout << "ERR: FILE NOT FOUND." << std::endl;
    continue;
}

std::cout << "Compressing file data...";
writeFile(filename, zlib_compress(readFile(filename)));
std::cout << " Done." << std::endl; 
```

在函数 zlib_compress...

```
std::string zlib_compress(const std::string& str)
{
    std::cout << "DEBUG" << std::endl;

    z_stream zs;                        // z_stream is zlib's control structure
    memset(&zs, 0, sizeof(zs));

    if (deflateInit(&zs, 9) != Z_OK)
        std::cout << "deflateInit failed while compressing." << std::endl;

    zs.next_in = (Bytef*)str.data();
    zs.avail_in = str.size();           // set the z_stream's input

    int ret;
    char outbuffer[1073741824];
    std::string outstring;

    // retrieve the compressed bytes blockwise
    do
    {
        zs.next_out = reinterpret_cast<Bytef*>(outbuffer);
        zs.avail_out = sizeof(outbuffer);

        ret = deflate(&zs, Z_FINISH);

        if (outstring.size() < zs.total_out)
        {
            // append the block to the output string
            outstring.append(outbuffer, zs.total_out - outstring.size());
        }
    } while(ret == Z_OK);

    deflateEnd(&zs);

    if(ret != Z_STREAM_END) // an error occurred that was not EOF
    {
        std::ostringstream oss;
        oss << "Exception during zlib compression: (" << ret << ") " << zs.msg;
        std::cout << oss.str();
    }

    return outstring;
} 
```

我知道，我知道，该功能需要工作，我只是从某个地方 C&P 尝试一下。

但事情是这样的：

`std::cout << "DEBUG" << std::endl;`永远**不会**被调用。编译器说段错误来自这里：

```
 std::string zlib_compress(const std::string& str)
> { 
```

但为什么...？它早些时候工作。我只是不知道出了什么问题！

**编辑：**调试器输出。

```
#0 00000000 0x00402cbb in __chkstk_ms() (??:??)
#1 004013BE zlib_compress(str=...) (C:\Users\***\Documents\Work\Programming\Compressor\z.cpp:5)
#2 00401DDA _fu15___ZSt4cout() (C:\Users\***\Documents\Work\Programming\Compressor\main.cpp:80) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T01:33:15.307

字符输出缓冲区[1073741824]；

这太大了，不能放在堆栈上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T04:50:50.857

您在 zlib_compress 中将一个字符串的常量引用作为参数 - 您需要确保 zlib_compress 中的内存可用（无论从您的 readfile 返回什么）。如果您也可以共享 readFile 函数的原型，那就太好了。

# ruby-on-rails - RoR 中 <% %> 和 <%= %> 之间的差异

> ID：15125894
> 
> 赞同：2
> 
> 时间：2013-02-28T01:30:52.003
> 
> 标签：ruby-on-rails, ruby

有什么区别

```
<% some code %> 
```

和

```
<%= some code %> 
```

在 RoR？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T01:57:04.700

可以这样想：

```
<% execute this code and display nothing %> 
```

和

```
<%= execute this code and display the result in the view %> 
```

因此，例如，您可以这样做：

```
<% @values = ['eenie', 'menie', 'miney', 'mo' ] %>
<% @values.each do |value| %>
  The current value is <%= value %>!
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:33:11.250

`<%= some code %>`将评估语句并将其显示在视图中。 `<% some code %>`只会评估语句。

# javascript - 在一段时间内平滑地增加一个数字

> ID：15125895
> 
> 赞同：2
> 
> 时间：2013-02-28T01:30:53.670
> 
> 标签：javascript, timer, setinterval

所以我有这个计数器，它需要每 60 秒将一个数字增加 75。我在下面的代码可以做到这一点，但是由于四舍五入，一些数字比其他数字停留的时间更长，并且一些数字被跳过了。

我宁愿让这个平滑/均匀地计数以获得相同的最终结果。我知道我需要以某种方式计算`setInterval`计时器编号，但我不确定要得到什么。

```
(function(){
    //Numbers
    var num = 0;
    var perMinute = 75;
    var perSecond = perMinute / 60;

    //Element selection
    var count = document.getElementById("count");

    function update(){

        //Add the per-second value to the total
        num += perSecond;

        //Display the count rounded without a decimal
        count.innerHTML = Math.round(num);
    }

    //Run the update function once every second
    setInterval(update, 1000);
})(); 
```

工作示例：http: [//jsfiddle.net/ChrisMBarr/9atym/1/](http://jsfiddle.net/ChrisMBarr/9atym/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:34:04.293

永远不要依赖`Timeout`或`Interval`准确。相反，保存“开始时间”并将其与当前时间进行比较。

```
(function() {
    var start = new Date().getTime(),
        perMinute = 75,
        perMS = perMinute/60000,
        count = document.getElementById('count');
    function update() {
        var elapsed = new Date().getTime()-start;
        count.innerHTML = Math.round(elapsed*perMS);
    }
    setInterval(update,1000);
})(); 
```

请注意，您可以调整`1000`以改变计数器的“平滑度”（对于较大的 值更重要`perMinute`），并且它将始终完美地工作，以在分辨率的过冲范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:38:07.250

移动你的四舍五入似乎可以解决这个问题（编辑：不，它没有。请参阅我在下面放置的更好修复的 jsfiddle 示例）。

```
(function(){
//Numbers
var num = 0;
var perMinute = 75;
var perSecond = perMinute / 60;

//Element selection
var count = document.getElementById("count");

function update(){

    //Add the per-second value to the total
    num += Math.round(perSecond);

    //Display the count rounded without a decimal
    count.innerHTML = num;
}

//Run the update function once every second
setInterval(update, 1000/perSecond);
})(); 
```

编辑：适当的修复 - [http://jsfiddle.net/4y2y9/1/](http://jsfiddle.net/4y2y9/1/)

# matlab - Matlab程序如何将一维转换为二维

> ID：15125896
> 
> 赞同：3
> 
> 时间：2013-02-28T01:31:10.383
> 
> 标签：matlab

我想问一个关于matlab程序的问题。

我有矢量图`a`

```
a = [1 2 3 4 5 6 7 8 9 10 11 12]; 
```

我想将矢量转换`a`为二维数组。通常，我使用此代码进行转换。

```
m =1;
for i=1:4
   for j=1:3
      b(i,j) = a(m);
      m=m+1;
   end
end 
```

然后`b`是一个二维矩阵。

```
b =

     1     2     3
     4     5     6
     7     8     9
    10    11    12 
```

任何人，都有一个不使用循环将 1D 转换为 2D 的想法。

谢谢，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-28T01:50:10.857

查看[`reshape`](http://www.mathworks.com.au/help/matlab/ref/reshape.html)功能和帮助页面。

尤其是，

```
B = reshape(A,m,n) 
```

返回其元素按列从 中获取的`m`逐个`n`矩阵。如果没有元素，则会导致错误。`B``A``A``m*n`

请注意，它是按列排列的，因此我建议您制作一个 3 行 4 列的矩阵，然后将其倾斜（`A.'`将采用矩阵的转置）。

# android - 如何在 android 中自定义和更改微调器的背景颜色？

> ID：15125898
> 
> 赞同：1
> 
> 时间：2013-02-28T01:31:28.897
> 
> 标签：android

我想更改微调器的背景颜色并自定义微调器。当我在 xml android:background="#000000" 中使用此代码时，颜色发生了变化，但微调器上的箭头消失了。如何在不消失箭头的情况下自定义微调器并更改背景颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:37:17.030

默认情况下，箭头为黑色（或接近它），因此它不会显示在黑色背景上。您可以使用XML 中的[android:dropDownSelector 属性](http://developer.android.com/reference/android/widget/Spinner.html#attr_android%3adropDownSelector)更改箭头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T02:20:59.620

微调器上的“背景”属性是指包含背景颜色和箭头的可绘制对象。通过指定背景颜色，不再有任何箭头。要解决此问题，您需要提供一个带有箭头的新 9 补丁可绘制对象。

# java - 使用 EclEmma 进行代码覆盖源注释

> ID：15125900
> 
> 赞同：0
> 
> 时间：2013-02-28T01:31:35.263
> 
> 标签：java, eclipse, annotations, code-coverage, eclemma

我安装了 EclEmma 是因为它具有与代码覆盖率相关的源注释功能，它如何根据代码在执行期间是否被命中来用各种颜色突出显示代码。我打算将此信息用于调试目的。默认安装添加了一个“覆盖启动”按钮，这正是我想要的。这非常适合程序的入口点；整个源文件都得到了漂亮的覆盖信息。不幸的是，没有其他项目文件得到相同的处理。

当我转到新的覆盖率选项卡时，我会看到我的源文件夹结构，并且我的所有源文件都与覆盖率百分比一起列出。这很好，但我真的很想将覆盖注释添加到我的其他源文件中，以便我可以在项目的其余部分中逐行查看代码覆盖率。目前，即使在覆盖率选项卡中单击它们，百分比直接位于右侧，也会打开普通的未注释源文件（好吧，除了 Eclipse 对 Java 代码的正常注释之外，还没有注释）。如何让 EclEmma 将源代码覆盖率信息添加到我的所有源文件中，而不仅仅是包含程序入口点的源文件？

我怀疑我缺少一个简单的修复，但是我可以从相关[文档](http://www.eclemma.org/userdoc/annotations.html)中获得的最好的方法是如何更改注释的颜色。

作为参考，我使用 Eclipse 4.2.1 进行 Java 开发。我的 EclEmma 安装是来自 Eclipse Marketplace 的。

感谢您的时间，

-- 技术火箭9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:09:44.043

由于未知原因，问题似乎已经自行解决。我只能得出结论，EclEmma 不需要更改以显示其他文件的源注释，并且我的特定 Eclipse 安装中的错误触发了该问题，并且该错误已在 Eclipse 或 EclEmma 更新中修复。

# python - 带有网络界面的 Python 桌面软件

> ID：15125903
> 
> 赞同：0
> 
> 时间：2013-02-28T01:31:48.783
> 
> 标签：python, html, google-chrome

我正在构建带有 Python 后端和 Web 界面的桌面软件。目前，我必须启动后端，然后在浏览器中打开界面。如果我不小心刷新了页面 - 那么一切都会清除！我想做的是启动应用程序并出现一个全屏浏览器窗口（使用 Chrome）——这应该不难。我有两个问题：

1.  可以禁用刷新吗？
2.  关闭 Web UI 时是否可以关闭我的程序？

**更新**：

我正在寻找的更像是这样的：[geckofx](https://code.google.com/p/geckofx/)。一种在桌面应用程序中嵌入 Chrome 网页的方法。除了我使用 Python 而不是 C#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:19:10.597

您可以只嵌入 Webkit，而不是嵌入 Chrome（我不知道在 Windows 上，但在 Mac 和 Linux 上很容易）。
应用程序逻辑接缝在服务器端，浏览器仅用作界面。如果是这种情况，你可以在body标签中加入“onbeforeunload”，然后调用一个js函数向服务器发送ajax请求就死掉了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:37:23.103

您的第一个问题是[使用 javascript 禁用 f5 和浏览器刷新](https://stackoverflow.com/questions/2482059/disable-f5-and-browser-refresh-using-javascript)。

对于您的第二个问题，这取决于您正在构建什么样的应用程序，但一般来说，答案是否定的。

如果您可以依靠 JS 来捕捉关闭，例如，在关闭之前向服务发送“退出”消息，那很容易。但是，在很多情况下这不起作用，因为客户无法赶上收盘价。

另一方面，如果您可以依赖客户端和服务之间的持续连接（例如，使用 WebSocket），您可以在连接断开时退出。但通常，你不能。

最后，如果您正在为一个平台编写一些东西，您也许可以使用操作系统级别的信息来处理 JS 无法处理的情况。（例如，在 OS X 上，您可以在默认情况下附加一个侦听器，`NSDistributedNotificationCenter`并在 Chrome 退出时收到通知。）但通常，您不能依赖此，即使可以，它可能*仍然*无法覆盖 100%案例。

因此，您需要使用每个“真实”网络应用程序用于管理会话的相同技巧。例如，客户端可以每5分钟发送一次keepalive，如果5分钟内没有收到任何请求，服务器可以退出。（你仍然可以有一个明确的“退出”命令，你不能总是依赖它。）如果你想了解更多关于如何做到这一点的信息，可能有 300 个关于它的问题。

# sorting - 如何对记录进行分组、排序、计数和输出结果

> ID：15125904
> 
> 赞同：1
> 
> 时间：2013-02-28T01:31:59.723
> 
> 标签：sorting, python-2.7, group-by

我正在尝试创建一个执行以下操作的 python 脚本：

表（dbf 或 csv-我都可以创建）总是只有 4 条记录。第二列（Let）将始终按 a、b、c、d 排序。第 1 列（Num）总是有 0-10 之间的数字，但频率和顺序会有所不同。输出需要按 Num 排序和分组，首先输出最小的数字。如果第一列中的数字出现一次，则只输出对应的字母。如果一个数字出现两次（即两行具有相同的数字），则输出每个对应的字母，并在它们之间加上一个“和”。如果数字出现两次以上，则输出每个字母，它们之间有一个逗号，最后一个字母之前有一个“和”。出现的每个字母组都有自己的输出行。

基本上希望对 4 个选项中的 1 个进行排序、分组和输出：

“无数据”
1 个字母本身
2 个字母由“and”
分隔 3 个字母由逗号分隔，最后一个字母前有一个“and”。

以下是名为 soils_no.dbf 的表的各种版本及其所需的输出，具体取决于输入。

数字............让
0......a
0......b
0...... ..........c
0.......d
打印“无数据”

数字............让
8......a
8......b
2...... ..........c
8.......d
打印 c
打印 a、b 和 d

数字............让
4......a
1......b
7...... ..........c
3.......d
打印 b
打印 d
打印 a
打印 c

数字............让
3......a
3......b
10...... ..........c
1.......d
打印 d
打印 a 和 b
打印 c

数............让
10......a
10......b
10...... ..........c
10.................d
打印 a、b、c 和 d

我知道如何循环并将逗号和“和”放入，但我不知道如何分组和排序。使用 python 2.7 执行此操作。

顺便说一句，我正在尝试学习 python，所以请解释一下代码的含义。我学得越多，就越不依赖陌生人的善意。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:47:23.957

下面讨论。

```
from collections import defaultdict

def pretty_print_lst(lst):
    if not lst:
        return ""
    elif len(lst) == 1:
        return lst[0]
    elif len(lst) == 2:
        # Join together two letters using " and " as the join.
        return " and ".join(lst)
    else:
        # Use a "list slice" to join all in the list but the last item,
        # using ", " as the join, then append " and " and append the
        # last item.  Last item is indexed with -1, which always works no
        # matter how many or few items are in the list.
        return ", ".join(lst[:-1]) + " and " + lst[-1]

def print_rec(seq):
    # group according to counts
    d = defaultdict(list)
    for row in seq:
        n, letter = row  # get count and letter from the row
        d[n] += letter  # append letter to that count list

    # get a list of (key, value) pairs
    # so the list entries are: (count, list_of_letters)
    results = list(d.items())
    results.sort()
    if len(results) == 1 and results[0][0] == 0:
        # if all 4 letters have a count of 0, 
        print("No data")
    else:
        for count, lst in results:
            s = pretty_print_lst(lst)
            print(s)

lst = [ (8, 'a'), (8, 'b'), (2, 'c'), (8, 'd')]
print_rec(lst) 
```

我们使用字典来收集具有相同计数的项目。这是一个“默认字典”；每当我们引用一个不存在的键时，它就会被创建，在这种情况下是一个空列表。所以我们可以只附加值，字典是否为空都没有关系。

然后我们收集非零项目并制作一个列表，然后漂亮地打印列表以匹配您想要的格式。

如果您有任何问题，请随时提问。

# javascript - 响应式站点在 IE 中不起作用（尽管有 css3-mediaqueries.js）

> ID：15125905
> 
> 赞同：7
> 
> 时间：2013-02-28T01:32:02.130
> 
> 标签：javascript, html, css, responsive-design

我正在创建一个响应式网站，但似乎无法让它在 IE 中工作（我正在 IE8 中进行测试）。现在，我知道 Internet Explorer 8 及更低版本不支持 CSS3 媒体查询。但我包含了 css3-mediaqueries.js Javascript 文件（由 Google 托管），但它仍然无法正常工作。

我删除了所有代码，只留下了最少的代码（实际上只有 26 行 HTML 和 34 行 CSS）。HTML 成功验证为 HTML5，CSS 验证为 CSS 级别 3。代码如下：

**HTML**

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, maximum-scale=1.0, minimum-scale=1.0, initial-scale=1.0" />
<title>Responsive Site</title>
<link rel="stylesheet" type="text/css" href="css/custom.css" />
<link rel="stylesheet" type="text/css" media="only screen and (min-width:50px) and (max-width: 800px)" href="css/responsive.css" />

<!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- css3-mediaqueries.js for IE less than 9 -->
<!--[if lt IE 9]>
    <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
<![endif]-->

</head>
<body>
<div class="wrapper">
    <div id="article">&nbsp;</div>
    <div id="side">&nbsp;</div>
</div>
</body>
</html> 
```

**自定义.css：**

```
@charset "UTF-8";

/*html5 display rule*/
article, aside, canvas, details, figcaption, figure, footer, header, hgroup, menu, nav, section, summary {display: block;}

body {margin: 0px; padding:0px}

.wrapper {
    width:78%; 
    margin:0 auto}

#article {
    float:left;
    width:61.224489795%;
    margin:20px 0 0 0;
    padding:0;
    height:500px;
    background-color:#000}

#side {
    float:right;
    width:30.775510204%;
    margin:20px 0 0 0;
    padding:0;
    height:500px;
    background-color:#999} 
```

**响应式.css：**

```
@charset "UTF-8";

#article {
    width:100%}

#side {
    width:100%;
    clear:left} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-19T02:03:12.747

除了无法使用 @imported 样式表（在 github 和 google 代码项目中记录）之外 - 如果没有以类似于以下格式的格式明确说明媒体查询，则会出现问题：

```
@media screen and (min-width: 666px) and (max-width: 1000px) 
```

相比：

```
@media and (min-width: 666px) and (max-width: 1000px) 
```

请在此项目的 github 问题部分查看此问题 - 在尝试设置大约一个小时后 - 我的媒体查询中缺少**屏幕**导致它们无法被识别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T17:32:17.817

我终于想通了！只需更改几行代码。

有朋友指出，css3-mediaqueries.js Javascript 文件的[文档是这样写的：](http://code.google.com/p/css3-mediaqueries-js/)

> **注意：**不适用于 @import'ed 样式表（出于性能原因，您无论如何都不应该使用它）。也不会监听 and 元素的 media 属性。

我在我的 HTML 文件的链接元素中使用了 media 属性。所以，这就是我为解决这个问题所做的事情：

**在我删除的 HTML 文件中：**

```
<link rel="stylesheet" type="text/css" media="only screen and (min-width:50px) and (max-width: 800px)" href="css/responsive.css" /> 
```

**并将其替换为：**

```
<link rel="stylesheet" type="text/css" href="css/responsive.css" /> 
```

**然后我将媒体属性添加到我的 responsive.css 文件中：**

```
@charset "UTF-8";
@media screen and (max-width: 800px) {
#article {
    width:100%}

#side {
    width:100%;
    clear:left}
} 
```

但它仍然没有工作。然后我在我的 responsive.css 文件中更改了媒体和 @charset 属性的顺序。我只是重新排列了第 1 行和第 2 行：

```
@media screen and (max-width: 800px) {
@charset "UTF-8"; 
```

那成功了。不确定为什么字符集的顺序会有所不同？也许有人可以对此有所了解。

感谢大卫的有用建议！在工具棚中有几个选项很好，将来我可能会转向respond.js。但就目前而言，我对 Google 托管的代码感到满意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T02:03:11.850

你试过[response.js](https://github.com/scottjehl/Respond/)吗？

祝你好运！

**更新**

将两个 CSS 文件合并为一个可能更安全。将移动规范添加到您的 custom.css 文件中：

```
@media (min-width: 50px) and (max-width: 800px) {  

  /* mobile CSS here */

} /* close @ media for mobile */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-15T15:40:11.513

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

您必须将其放在*任何*其他元标记之前。

# winforms - 从 SQL Server Compact 数据库中获取实时数据

> ID：15125907
> 
> 赞同：0
> 
> 时间：2013-02-28T01:32:29.283
> 
> 标签：winforms, visual-studio-2010, c#-4.0, sql-server-ce

如何使用 Visual Studio 2010、WinForm、C#.NET、.NET Framework 4.0 从 SQL Server Compact 数据库（*.sdf 文件）获取实时数据以更新控件（Label 和 DataGridView）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T16:52:38.457

您可以使用 longpoll 阅读本网站 [Long poll for read](http://en.wikipedia.org/wiki/Push_technology#Long_polling)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:05:23.367

这个问题有一些解决方案。在数据库方面，您可以使用[事件通知](http://msdn.microsoft.com/en-us/library/ms190427%28v=sql.105%29.aspx)，您可以在其中订阅数据库中发生的更改并处理事件。另一个是轮询，即通过不断运行查询和检查更改来监视您的数据库。

# fonts - 什么是BatangChe、DotumChe、GulimChe、GungsuhChe等字体中的“Che”

> ID：15125910
> 
> 赞同：4
> 
> 时间：2013-02-28T01:33:07.960
> 
> 标签：fonts

有一种字体**Batang**和一种字体**BatangChe**，其他韩国字体 Dotum、Gulim 和 Gungsuh 也是如此。但是有什么区别呢？“车”表示什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:46:38.520

哦，最后，我们来了：

[http://blog.korea.net/?p=7505](http://blog.korea.net/?p=7505)

“Che”变体是等宽的，拉丁字母比韩文更明显。

# jquery - 为 JQuery 对话框下载 api

> ID：15125916
> 
> 赞同：0
> 
> 时间：2013-02-28T01:33:32.287
> 
> 标签：jquery, jquery-ui, dialog

我只需要 jquery-ui 库中的对话框，所以我不想下载整个包（来自[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)）

. 有没有办法选择性地只获取渲染对话框所需的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:38:14.007

这是您需要的选择的链接：

[http://jqueryui.com/download/#!version=1.9.2&components=1111101000010100000000000000000000](http://jqueryui.com/download/#!version=1.9.2&components=1111101000010100000000000000000000)

**Dialog** Widget 需要**UI Core**、**Draggable** and **Resizable** Interactions 和Button **Widget**。

那是可能的最低配置。

# c# - 填字游戏（上下）存储？

> ID：15125919
> 
> 赞同：2
> 
> 时间：2013-02-28T01:33:43.597
> 
> 标签：c#, data-structures, storage, transpose, crossword

例如，如果我创建一个填字游戏，我想将填写的单词存储在 9 x 9 的网格中。我考虑了一个二维数组，但只能存储 Across 单词而不是 Down 单词。即使每个单词都存储为一个对象（指示方向），我也不知道哪些单词与哪些单词相交。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T01:35:43.557

保存方向（上/下/左/右）和起始坐标。

例如

```
 First
    e
    c
    o
    n
third 
```

首先将放置在 1,0 左侧；第二个将下降到 5,0；第三个在左边 0,6。

您还可以将字符保存到二维数组中，这个特定的例子是：

```
[
  [null, 'f','i', 'r', 's', 't'],
  [null, null, null, null, 'e', null ],
  [null, null, null, null, 'c', null ],
  [null, null, null, null, 'o', null ],
  [null, null, null, null, 'n', null ],
  ['t', 'h', 'i', 'r', 'd', null ]
] 
```

第一种保存方式为您提供了拥有单词并知道它们的起点的优势，但它不会强制它遵守填字游戏格式（例如，很难知道哪些字符应该相同，等等）。第二种方式强制执行这一点，但更难辨认出单词。也许将两者结合起来？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T01:47:14.797

有趣的问题。为了好玩，我将从这里开始：

```
class CrosswordItem
{
    int startX;
    int startY;
    string word;
} 
```

祝你的问题好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T01:51:37.723

我会保存一个起点和方向，然后将它们存储在一个对象中，即

```
{'starfish':{'direction':'horizontal','position':[0,4]}, 'ratchet':{'direction':'vertical', 'position':[0,8]} 
```

# javascript - 如何从 JavaScript 中的对象数组中获取不同的值？

> ID：15125920
> 
> 赞同：660
> 
> 时间：2013-02-28T01:33:43.933
> 
> 标签：javascript, arrays, unique

假设我有以下内容：

```
var array = 
    [
        {"name":"Joe", "age":17}, 
        {"name":"Bob", "age":17}, 
        {"name":"Carl", "age": 35}
    ] 
```

能够获得所有不同年龄的数组的最佳方法是什么，以便我获得以下结果数组：

```
[17, 35] 
```

有什么方法可以替代地构造数据或更好的方法，这样我就不必遍历每个数组来检查“age”的值并检查另一个数组是否存在，如果不存在则添加它？

如果有某种方法我可以在不迭代的情况下提取不同的年龄......

我想改进的当前低效方式......如果这意味着不是“数组”是一个对象数组，而是一个具有一些唯一键（即“1,2,3”）的对象的“映射”，那就是也可以。我只是在寻找最高效的方式。

以下是我目前的做法，但对我来说，迭代似乎只是效率低下，即使它确实有效......

```
var distinct = []
for (var i = 0; i < array.length; i++)
   if (array[i].age not in distinct)
      distinct.push(array[i].age) 
```

* * *

## 回答 #1

> 赞同：1047
> 
> 时间：2016-01-29T19:31:14.317

如果您使用的是 ES6/ES2015 或更高版本，您可以这样做：

```
const data = [
  { group: 'A', name: 'SD' }, 
  { group: 'B', name: 'FI' }, 
  { group: 'A', name: 'MM' },
  { group: 'B', name: 'CO'}
];
const unique = [...new Set(data.map(item => item.group))]; // [ 'A', 'B'] 
```

[这](https://codepen.io/vlad-bezden/pen/OMEXJz?editors=0012)是有关如何执行此操作的示例。

* * *

## 回答 #2

> 赞同：277
> 
> 时间：2015-12-10T10:23:43.963

使用 ES6

```
let array = [
  { "name": "Joe", "age": 17 },
  { "name": "Bob", "age": 17 },
  { "name": "Carl", "age": 35 }
];
array.map(item => item.age)
  .filter((value, index, self) => self.indexOf(value) === index)

> [17, 35] 
```

* * *

## 回答 #3

> 赞同：233
> 
> 时间：2019-10-17T09:52:51.453

对于那些想要**返回具有键唯一属性的对象的人**

```
const array =
  [
    { "name": "Joe", "age": 17 },
    { "name": "Bob", "age": 17 },
    { "name": "Carl", "age": 35 }
  ]

const key = 'age';

const arrayUniqueByKey = [...new Map(array.map(item =>
  [item[key], item])).values()];

console.log(arrayUniqueByKey);

   /*OUTPUT
       [
        { "name": "Bob", "age": 17 },
        { "name": "Carl", "age": 35 }
       ]
   */

 // Note: this will pick the last duplicated item in the list.
```

* * *

## 回答 #4

> 赞同：155
> 
> 时间：2013-02-28T01:36:10.203

如果这是 PHP，我会用键构建一个数组并`array_keys`在最后获取，但 JS 没有这样的奢侈。相反，试试这个：

```
var flags = [], output = [], l = array.length, i;
for( i=0; i<l; i++) {
    if( flags[array[i].age]) continue;
    flags[array[i].age] = true;
    output.push(array[i].age);
} 
```

* * *

## 回答 #5

> 赞同：152
> 
> 时间：2015-11-04T01:37:23.127

使用 ES6 功能，您可以执行以下操作：

```
const uniqueAges = [...new Set( array.map(obj => obj.age)) ]; 
```

* * *

## 回答 #6

> 赞同：148
> 
> 时间：2013-02-28T01:37:15.447

您可以使用像这样的字典方法。基本上，您将想要区分的值分配为“字典”中的键（这里我们使用数组作为对象以避免字典模式）。如果该键不存在，则将该值添加为不同的。

这是一个工作演示：

```
var array = [{"name":"Joe", "age":17}, {"name":"Bob", "age":17}, {"name":"Carl", "age": 35}];
var unique = [];
var distinct = [];
for( let i = 0; i < array.length; i++ ){
  if( !unique[array[i].age]){
    distinct.push(array[i].age);
    unique[array[i].age] = 1;
  }
}
var d = document.getElementById("d");
d.innerHTML = "" + distinct;
```

```
<div id="d"></div>
```

这将是 O(n)，其中 n 是数组中对象的数量，m 是唯一值的数量。没有比 O(n) 更快的方法了，因为您必须至少检查每个值一次。

之前的版本使用了一个对象和 for in。这些在本质上是次要的，并且已经在上面进行了次要更新。但是，原始 jsperf 中两个版本之间的性能似乎有所提高的原因是数据样本量非常小。因此，之前版本的主要比较是查看内部映射和过滤器使用与字典模式查找之间的差异。

如前所述，我已经更新了上面的代码，但是，我还更新了 jsperf 以查看 1000 个对象而不是 3 个。3 忽略了许多涉及的性能缺陷（[过时的 jsperf](http://jsperf.com/filter-versus-dictionary)）。

**表现**

[https://jsperf.com/filter-vs-dictionary-more-data](https://jsperf.com/filter-vs-dictionary-more-data)当我运行这本词典时，速度提高了 96%。

[![过滤器与字典](../Images/2bd52904fcb0ead62cf24c8f5ba94320.png)](https://i.stack.imgur.com/HZTBu.png)

* * *

## 回答 #7

> 赞同：137
> 
> 时间：2017-08-25T16:50:07.937

从 2017 年 8 月 25 日起，您将通过 ES6 for Typescript 使用新的 Set 来解决此问题

```
Array.from(new Set(yourArray.map((item: any) => item.id))) 
```

* * *

## 回答 #8

> 赞同：69
> 
> 时间：2013-02-28T01:40:26.913

我只是映射和删除重复：

```
var ages = array.map(function(obj) { return obj.age; });
ages = ages.filter(function(v,i) { return ages.indexOf(v) == i; });

console.log(ages); //=> [17, 35] 
```

**编辑：**好吧！就性能而言，这不是最有效的方法，而是最简单最易读的 IMO。如果您真的关心微优化或者您拥有大量数据，那么常规`for`循环将更加“高效”。

* * *

## 回答 #9

> 赞同：49
> 
> 时间：2018-12-16T16:18:26.380

```
var unique = array
    .map(p => p.age)
    .filter((age, index, arr) => arr.indexOf(age) == index)
    .sort(); // sorting is optional

// or in ES6

var unique = [...new Set(array.map(p => p.age))];

// or with lodash

var unique = _.uniq(_.map(array, 'age')); 
```

ES6 示例

```
const data = [
  { name: "Joe", age: 17}, 
  { name: "Bob", age: 17}, 
  { name: "Carl", age: 35}
];

const arr = data.map(p => p.age); // [17, 17, 35]
const s = new Set(arr); // {17, 35} a set removes duplications, but it's still a set
const unique = [...s]; // [17, 35] Use the spread operator to transform a set into an Array
// or use Array.from to transform a set into an array
const unique2 = Array.from(s); // [17, 35] 
```

* * *

## 回答 #10

> 赞同：33
> 
> 时间：2018-08-02T13:39:58.867

已经有很多有效的答案，但我想添加一个只使用该 `reduce()`方法的答案，因为它干净简单。

```
function uniqueBy(arr, prop){
  return arr.reduce((a, d) => {
    if (!a.includes(d[prop])) { a.push(d[prop]); }
    return a;
  }, []);
} 
```

像这样使用它：

```
var array = [
  {"name": "Joe", "age": 17}, 
  {"name": "Bob", "age": 17}, 
  {"name": "Carl", "age": 35}
];

var ages = uniqueBy(array, "age");
console.log(ages); // [17, 35] 
```

* * *

## 回答 #11

> 赞同：26
> 
> 时间：2019-08-12T22:08:17.823

```
const array = [
  {"id":"93","name":"CVAM_NGP_KW"},
  {"id":"94","name":"CVAM_NGP_PB"},
  {"id":"93","name":"CVAM_NGP_KW"},
  {"id":"94","name":"CVAM_NGP_PB"}
]

function uniq(array, field) {
  return array.reduce((accumulator, current) => {
      if(!accumulator.includes(current[field])) {
        accumulator.push(current[field])
      }
      return accumulator;
    }, []
  )
}

const ids = uniq(array, 'id');
console.log(ids)

/* output 
["93", "94"]
*/
```

* * *

## 回答 #12

> 赞同：22
> 
> 时间：2013-09-20T18:28:17.980

@travis-j的`forEach`答案版本（对现代浏览器和 Node JS 世界很有帮助）：

```
var unique = {};
var distinct = [];
array.forEach(function (x) {
  if (!unique[x.age]) {
    distinct.push(x.age);
    unique[x.age] = true;
  }
}); 
```

在 Chrome v29.0.1547 上快 34%：http: [//jsperf.com/filter-versus-dictionary/3](http://jsperf.com/filter-versus-dictionary/3)

还有一个采用映射器函数的通用解决方案（比直接映射慢一点，但这是意料之中的）：

```
function uniqueBy(arr, fn) {
  var unique = {};
  var distinct = [];
  arr.forEach(function (x) {
    var key = fn(x);
    if (!unique[key]) {
      distinct.push(key);
      unique[key] = true;
    }
  });
  return distinct;
}

// usage
uniqueBy(array, function(x){return x.age;}); // outputs [17, 35] 
```

* * *

## 回答 #13

> 赞同：22
> 
> 时间：2021-01-21T14:11:30.413

我有一个小解决方案

```
let data = [{id: 1}, {id: 2}, {id: 3}, {id: 2}, {id: 3}];

let result = data.filter((value, index, self) => self.findIndex((m) => m.id === value.id) === index); 
```

* * *

## 回答 #14

> 赞同：17
> 
> 时间：2013-02-28T01:45:51.690

我已经开始在所有新项目中默认使用[下划线](http://underscorejs.org/#uniq)，这样我就不必考虑这些小的数据处理问题。

```
var array = [{"name":"Joe", "age":17}, {"name":"Bob", "age":17}, {"name":"Carl", "age": 35}];
console.log(_.chain(array).map(function(item) { return item.age }).uniq().value()); 
```

产生`[17, 35]`.

* * *

## 回答 #15

> 赞同：13
> 
> 时间：2015-02-13T17:47:46.947

这是解决此问题的另一种方法：

```
var result = {};
for(var i in array) {
    result[array[i].age] = null;
}
result = Object.keys(result); 
```

我不知道这个解决方案与其他解决方案相比有多快，但我喜欢更简洁的外观。;-)

* * *

编辑：好的，以上似乎是这里最慢的解决方案。

我在这里创建了一个性能测试用例：http: [//jsperf.com/distinct-values-from-array](http://jsperf.com/distinct-values-from-array)

我没有测试年龄（整数），而是选择比较名称（字符串）。

方法1（TS的解决方案）非常快。有趣的是，方法 7 优于所有其他解决方案，在这里我只是摆脱了 .indexOf() 并使用了它的“手动”实现，避免了循环函数调用：

```
var result = [];
loop1: for (var i = 0; i < array.length; i++) {
    var name = array[i].name;
    for (var i2 = 0; i2 < result.length; i2++) {
        if (result[i2] == name) {
            continue loop1;
        }
    }
    result.push(name);
} 
```

使用 Safari 和 Firefox 的性能差异是惊人的，似乎 Chrome 在优化方面做得最好。

我不确定为什么上述片段与其他片段相比如此之快，也许比我更聪明的人有答案。;-)

* * *

## 回答 #16

> 赞同：11
> 
> 时间：2015-01-21T14:01:59.007

使用[lodash](https://lodash.com)

```
var array = [
    { "name": "Joe", "age": 17 },
    { "name": "Bob", "age": 17 },
    { "name": "Carl", "age": 35 }
];
_.chain(array).pluck('age').unique().value();
> [17, 35] 
```

* * *

## 回答 #17

> 赞同：11
> 
> 时间：2021-04-29T17:11:17.893

如果您需要整个对象，这与 ES6 版本略有不同：

```
let arr = [
    {"name":"Joe", "age":17}, 
    {"name":"Bob", "age":17}, 
    {"name":"Carl", "age": 35}
]
arr.filter((a, i) => arr.findIndex((s) => a.age === s.age) === i) // [{"name":"Joe", "age":17}, {"name":"Carl", "age": 35}] 
```

* * *

## 回答 #18

> 赞同：10
> 
> 时间：2021-04-12T01:57:58.417

```
var array = [
          {"name":"Joe", "age":17}, 
          {"name":"Bob", "age":17}, 
          {"name":"Carl", "age": 35}
      ];

      const ages = [...new Set(array.reduce((a, c) => [...a, c.age], []))];

      console.log(ages);
```

* * *

## 回答 #19

> 赞同：9
> 
> 时间：2020-08-05T23:05:42.963

使用 Maps 的简单不同过滤器：

```
let array = 
    [
        {"name":"Joe", "age":17}, 
        {"name":"Bob", "age":17}, 
        {"name":"Carl", "age": 35}
    ];

let data = new Map();

for (let obj of array) {
  data.set(obj.age, obj);
}

let out = [...data.values()];

console.log(out);
```

* * *

## 回答 #20

> 赞同：7
> 
> 时间：2016-11-29T11:10:10.110

使用[Lodash](https://lodash.com/)

```
var array = [
    { "name": "Joe", "age": 17 },
    { "name": "Bob", "age": 17 },
    { "name": "Carl", "age": 35 }
];

_.chain(array).map('age').unique().value(); 
```

返回 [17,35]

* * *

## 回答 #21

> 赞同：7
> 
> 时间：2021-10-16T22:30:22.583

```
const array =
  [
    { "name": "Joe", "age": 17 },
    { "name": "Bob", "age": 17 },
    { "name": "Carl", "age": 35 }
  ]

const key = 'age';

const arrayUniqueByKey = [...new Map(array.map(item =>
  [item[key], item])).values()];

console.log(arrayUniqueByKey);
```

* * *

## 回答 #22

> 赞同：6
> 
> 时间：2015-12-30T13:35:13.610

```
function get_unique_values_from_array_object(array,property){
    var unique = {};
    var distinct = [];
    for( var i in array ){
       if( typeof(unique[array[i][property]]) == "undefined"){
          distinct.push(array[i]);
       }
       unique[array[i][property]] = 0;
    }
    return distinct;
} 
```

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2016-05-02T17:24:06.173

下划线.js `_.uniq(_.pluck(array,"age"))`

* * *

## 回答 #24

> 赞同：5
> 
> 时间：2017-01-18T13:52:40.793

这是一个使用reduce、允许映射和维护插入顺序的通用解决方案。

*项目*：一个数组

*mapper*：将项目映射到条件的一元函数，或者为空以映射项目本身。

```
function distinct(items, mapper) {
    if (!mapper) mapper = (item)=>item;
    return items.map(mapper).reduce((acc, item) => {
        if (acc.indexOf(item) === -1) acc.push(item);
        return acc;
    }, []);
} 
```

用法

```
const distinctLastNames = distinct(items, (item)=>item.lastName);
const distinctItems = distinct(items); 
```

如果这是您的风格，您可以将其添加到您的 Array 原型中并省略*items参数......*

```
const distinctLastNames = items.distinct( (item)=>item.lastName) ) ;
const distinctItems = items.distinct() ; 
```

您还可以使用 Set 而不是 Array 来加快匹配速度。

```
function distinct(items, mapper) {
    if (!mapper) mapper = (item)=>item;
    return items.map(mapper).reduce((acc, item) => {
        acc.add(item);
        return acc;
    }, new Set());
} 
```

* * *

## 回答 #25

> 赞同：5
> 
> 时间：2020-07-07T13:54:05.120

如果您想返回一个唯一的对象列表。这是另一种选择：

```
const unique = (arr, encoder=JSON.stringify, decoder=JSON.parse) =>
  [...new Set(arr.map(item => encoder(item)))].map(item => decoder(item)); 
```

这将变成这样：

```
unique([{"name": "john"}, {"name": "sarah"}, {"name": "john"}]) 
```

进入

```
[{"name": "john"}, {"name": "sarah"}] 
```

这里的诀窍是，我们首先使用 将项目编码为字符串`JSON.stringify`，然后将其转换为 Set（这使得字符串列表唯一），然后使用 将其转换回原始对象`JSON.parse`。

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2014-07-23T12:10:31.523

刚找到这个，我认为它很有用

```
_.map(_.indexBy(records, '_id'), function(obj){return obj}) 
```

再次使用[下划线](http://underscorejs.org/)，所以如果你有这样的对象

```
var records = [{_id:1,name:'one', _id:2,name:'two', _id:1,name:'one'}] 
```

它只会给你独特的对象。

这里发生的是`indexBy`返回这样的地图

```
{ 1:{_id:1,name:'one'}, 2:{_id:2,name:'two'} } 
```

仅仅因为它是一张地图，所有的键都是唯一的。

然后我只是将此列表映射回数组。

如果您只需要不同的值

```
_.map(_.indexBy(records, '_id'), function(obj,key){return key}) 
```

请记住，它`key`是作为字符串返回的，因此，如果您需要整数，则应该这样做

```
_.map(_.indexBy(records, '_id'), function(obj,key){return parseInt(key)}) 
```

* * *

## 回答 #27

> 赞同：4
> 
> 时间：2017-05-10T12:16:16.443

我认为您正在寻找 groupBy 功能（使用 Lodash）

```
_personsList = [{"name":"Joe", "age":17}, 
                {"name":"Bob", "age":17}, 
                {"name":"Carl", "age": 35}];
_uniqAgeList = _.groupBy(_personsList,"age");
_uniqAges = Object.keys(_uniqAgeList); 
```

产生结果：

```
17,35 
```

jsFiddle 演示：http: [//jsfiddle.net/4J2SX/201/](http://jsfiddle.net/4J2SX/201/)

* * *

## 回答 #28

> 赞同：4
> 
> 时间：2019-10-24T08:00:47.207

```
[...new Set([
    { "name": "Joe", "age": 17 },
    { "name": "Bob", "age": 17 },
    { "name": "Carl", "age": 35 }
  ].map(({ age }) => age))] 
```

* * *

## 回答 #29

> 赞同：4
> 
> 时间：2021-07-16T18:05:28.170

```
 var array = 
    [
        {"name":"Joe", "age":17}, 
        {"name":"Bob", "age":17}, 
        {"name":"Carl", "age": 35}
    ]

    console.log(Object.keys(array.reduce((r,{age}) => (r[age]='', r) , {})))
```

输出：

```
Array ["17", "35"] 
```

* * *

## 回答 #30

> 赞同：3
> 
> 时间：2015-05-20T23:13:22.433

如果您有 Array.prototype.includes 或愿意对其进行[polyfill](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)，则可以：

```
var ages = []; array.forEach(function(x) { if (!ages.includes(x.age)) ages.push(x.age); }); 
```

* * *

## 回答 #31

> 赞同：3
> 
> 时间：2016-01-31T06:54:21.317

如果像我一样，您更喜欢在不影响速度的情况下更“实用”，这个例子使用包装在 reduce 闭包中的快速字典查找。

```
var array = 
[
    {"name":"Joe", "age":17}, 
    {"name":"Bob", "age":17}, 
    {"name":"Carl", "age": 35}
]
var uniqueAges = array.reduce((p,c,i,a) => {
    if(!p[0][c.age]) {
        p[1].push(p[0][c.age] = c.age);
    }
    if(i<a.length-1) {
        return p
    } else {
        return p[1]
    }
}, [{},[]]) 
```

根据这个[测试](http://jsperf.com/filter-versus-dictionary/19)，我的解决方案是建议答案的两倍

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2019-11-12T14:23:18.647

我知道我的代码长度和时间复杂度都很短，但这是可以理解的，所以我尝试了这种方式。

我正在尝试在这里开发基于原型的功能，并且代码也发生了变化。

这里，Distinct是我自己的原型函数。

```
<script>
  var array = [{
      "name": "Joe",
      "age": 17
    },
    {
      "name": "Bob",
      "age": 17
    },
    {
      "name": "Carl",
      "age": 35
    }
  ]

  Array.prototype.Distinct = () => {
    var output = [];
    for (let i = 0; i < array.length; i++) {
      let flag = true;
      for (let j = 0; j < output.length; j++) {
        if (array[i].age == output[j]) {
          flag = false;
          break;
        }
      }
      if (flag)
        output.push(array[i].age);
    }
    return output;
  }
  //Distinct is my own function
  console.log(array.Distinct());
</script>
```

* * *

## 回答 #33

> 赞同：2
> 
> 时间：2019-04-30T07:21:41.607

简单的单线具有出色的性能。[在我的测试](https://jsperf.com/filter-versus-dictionary/32)中比 ES6 解决方案快 6% 。

```
var ages = array.map(function(o){return o.age}).filter(function(v,i,a) {
    return a.indexOf(v)===i
}); 
```

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2019-11-12T08:13:49.993

这里有很多很好的答案，但没有一个解决了以下问题：

> 有什么方法可以替代地构建数据

我会创建一个对象，其键是年龄，每个都指向一个名称数组。

```
var array = [{ "name": "Joe", "age": 17 }, { "name": "Bob", "age": 17 }, { "name": "Carl", "age": 35 }];

var map = array.reduce(function(result, item) {
  result[item.age] = result[item.age] || [];
  result[item.age].push(item.name);
  return result;
}, {});

console.log(Object.keys(map));
console.log(map);
```

通过这种方式，您已将数据结构转换为一种非常容易从中检索不同年龄的数据结构。

这是一个更紧凑的版本，它还存储整个对象而不仅仅是名称（如果您正在处理具有超过 2 个属性的对象，因此它们不能存储为键和值）。

```
var array = [{ "name": "Joe", "age": 17 }, { "name": "Bob", "age": 17 }, { "name": "Carl", "age": 35 }];

var map = array.reduce((r, i) => ((r[i.age] = r[i.age] || []).push(i), r), {});

console.log(Object.keys(map));
console.log(map);
```

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2021-04-20T11:06:31.337

原始类型

```
var unique = [...new Set(array.map(item => item.pritiveAttribute))]; 
```

对于复杂类型，例如对象

```
var unique = [...new DeepSet(array.map(item => item.Object))];

export class DeepSet extends Set {

  add (o: any) {
    for (let i of this)
      if (this.deepCompare(o, i))
        return this;
    super.add.call(this, o);
    return this;
  };

  private deepCompare(o: any, i: any) {
    return JSON.stringify(o) === JSON.stringify(i)
  }
} 
```

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2021-05-17T14:09:07.550

```
const array = [{
    "name": "Joe",
    "age": 17
  },
  {
    "name": "Bob",
    "age": 17
  },
  {
    "name": "Carl",
    "age": 35
  }
]

const uniqueArrayByProperty = (array, callback) => {
  return array.reduce((prev, item) => {
    const v = callback(item);    
    if (!prev.includes(v)) prev.push(v)          
    return prev
  }, [])    
}

console.log(uniqueArrayByProperty(array, it => it.age));
```

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2019-05-10T10:30:07.997

我下面的代码将显示唯一的年龄数组以及没有重复年龄的新数组

```
var data = [
  {"name": "Joe", "age": 17}, 
  {"name": "Bob", "age": 17}, 
  {"name": "Carl", "age": 35}
];

var unique = [];
var tempArr = [];
data.forEach((value, index) => {
    if (unique.indexOf(value.age) === -1) {
        unique.push(value.age);
    } else {
        tempArr.push(index);    
    }
});
tempArr.reverse();
tempArr.forEach(ele => {
    data.splice(ele, 1);
});
console.log('Unique Ages', unique);
console.log('Unique Array', data);``` 
```

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2019-08-27T10:40:10.603

我用 TypeScript 编写了自己的通用案例，就像 Kotlin 的`Array.distinctBy {}`...

```
function distinctBy<T, U extends string | number>(array: T[], mapFn: (el: T) => U) {
  const uniqueKeys = new Set(array.map(mapFn));
  return array.filter((el) => uniqueKeys.has(mapFn(el)));
} 
```

哪里`U`是可散列的，当然。对于对象，您可能需要[https://www.npmjs.com/package/es6-json-stable-stringify](https://www.npmjs.com/package/es6-json-stable-stringify)

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2019-10-10T10:34:28.540

如果您需要整个对象的唯一性

```
const _ = require('lodash');

var objects = [
  { 'x': 1, 'y': 2 },
  { 'y': 1, 'x': 2 },
  { 'x': 2, 'y': 1 },
  { 'x': 1, 'y': 2 }
];

_.uniqWith(objects, _.isEqual); 
```

[对象{x：1，y：2}，对象{x：2，y：1}]

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2019-11-14T02:54:22.880

回答这个老问题毫无意义，但是有一个简单的答案可以说明 Javascript 的本质。Javascript 中的对象本质上是哈希表。我们可以使用它来获取唯一键的哈希：

```
var o = {}; array.map(function(v){ o[v.age] = 1; }); 
```

然后我们可以将散列简化为一个唯一值数组：

```
var a2 = []; for (k in o){ a2.push(k); } 
```

这就是你所需要的。数组**a2**仅包含唯一的年龄。

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2020-01-09T21:40:27.790

```
const array = [
  { "name": "Joe", "age": 17 }, 
  { "name":"Bob", "age":17 },
  { "name":"Carl", "age": 35 }
]

const allAges = array.map(a => a.age);

const uniqueSet = new Set(allAges)
const uniqueArray = [...uniqueSet]

console.log(uniqueArray)
```

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2020-05-09T05:55:59.587

有[linq.js - LINQ for JavaScript](https://github.com/mihaifm/linq/)包 (npm install linq)，对于 .Net 开发人员来说应该很熟悉。

在[示例](https://github.com/mihaifm/linq/blob/master/sample/tutorial.js)中显示的其他方法中， 存在明显的重载。

通过属性值从对象数组中区分对象的示例是

```
Enumerable.from(array).distinct(“$.id”).toArray(); 
```

来自[https://medium.com/@xmedeko/i-recommend-you-to-try-https-github-com-mihaifm-linq-20a4e3c090e9](https://medium.com/@xmedeko/i-recommend-you-to-try-https-github-com-mihaifm-linq-20a4e3c090e9)

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2020-09-29T03:52:12.230

我选择了随机样本并针对以下 100,000 个项目进行了测试：

```
let array=[]
for (var i=1;i<100000;i++){

 let j= Math.floor(Math.random() * i) + 1
  array.push({"name":"Joe"+j, "age":j})
} 
```

这里是每个的性能结果：

```
 Vlad Bezden Time:         === > 15ms
  Travis J Time: 25ms       === > 25ms 
  Niet the Dark Absol Time: === > 30ms
  Arun Saini Time:          === > 31ms
  Mrchief Time:             === > 54ms
  Ivan Nosov Time:          === > 14374ms 
```

另外，我想提一下，由于这些项目是随机生成的，因此第二位是在 Travis 和 Niet 之间进行迭代。

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2021-02-13T12:30:49.373

假设我们有这样的数据`arr=[{id:1,age:17},{id:2,age:19} ...]`，那么我们可以找到这样的独特对象 -

```
function getUniqueObjects(ObjectArray) {
    let uniqueIds = new Set();
    const list = [...new Set(ObjectArray.filter(obj => {
        if (!uniqueIds.has(obj.id)) {
            uniqueIds.add(obj.id);
            return obj;
        }
    }))];

    return list;
} 
```

在这里查看[Codepen 链接](https://codepen.io/akrsh24/pen/MWbJvVj)

* * *

## 回答 #45

> 赞同：0
> 
> 时间：2017-03-28T17:59:50.843

使用新的 Ecma 功能很棒，但并非所有用户都拥有这些功能。

以下代码会将一个名为**distinct**的新函数附加到全局数组对象。如果您尝试获取对象数组的不同值，则可以传递值的名称以获取该类型的不同值。

```
Array.prototype.distinct = function(item){   var results = [];
for (var i = 0, l = this.length; i < l; i++)
    if (!item){
        if (results.indexOf(this[i]) === -1)
            results.push(this[i]);
        } else {
        if (results.indexOf(this[i][item]) === -1)
            results.push(this[i][item]);
    }
return results;}; 
```

查看[我](http://codepen.io/hsavran/pen/evPZOG)在 CodePen 中的帖子以获取演示。

* * *

## 回答 #46

> 赞同：0
> 
> 时间：2017-10-10T22:48:56.583

```
unique(obj, prop) {
    let result = [];
    let seen = new Set();

    Object.keys(obj)
        .forEach((key) => {
            let value = obj[key];

            let test = !prop
                ? value
                : value[prop];

            !seen.has(test)
                && seen.add(test)
                && result.push(value);
        });

    return result;
} 
```

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2019-11-13T07:46:17.677

好吧，您可以使用 lodash 编写一个不那么冗长的代码

方法一：嵌套方法

```
 let array = 
        [
            {"name":"Joe", "age":17}, 
            {"name":"Bob", "age":17}, 
            {"name":"Carl", "age": 35}
        ]
    let result = _.uniq(_.map(array,item=>item.age)) 
```

方法 2：方法链接或级联方法

```
 let array = 
        [
            {"name":"Joe", "age":17}, 
            {"name":"Bob", "age":17}, 
            {"name":"Carl", "age": 35}
        ]
    let result = _.chain(array).map(item=>item.age).uniq().value() 
```

您可以从[https://lodash.com/docs/4.17.15#uniq了解 lodash 的 uniq() 方法](https://lodash.com/docs/4.17.15#uniq)

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2019-11-13T17:07:11.773

从一组键中获取不同值的集合的方法。

您可以从[此处](https://stackoverflow.com/a/53543030/1447675)获取给定的代码，并仅为想要的键添加映射以获取唯一对象值的数组。

```
const
    listOfTags = [{ id: 1, label: "Hello", color: "red", sorting: 0 }, { id: 2, label: "World", color: "green", sorting: 1 }, { id: 3, label: "Hello", color: "blue", sorting: 4 }, { id: 4, label: "Sunshine", color: "yellow", sorting: 5 }, { id: 5, label: "Hello", color: "red", sorting: 6 }],
    keys = ['label', 'color'],
    filtered = listOfTags.filter(
        (s => o =>
            (k => !s.has(k) && s.add(k))
            (keys.map(k => o[k]).join('|'))
        )(new Set)
    )
    result = filtered.map(o => Object.fromEntries(keys.map(k => [k, o[k]])));

console.log(result);
```

```
.as-console-wrapper { max-height: 100% !important; top: 0; }
```

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2020-02-24T21:00:31.300

使用集合和过滤器。这保留了顺序：

```
let unique = (items) => {
    const s = new Set();
    return items.filter((item) => {
      if (s.has(item)) {
        return false;
      }
      s.add(item);
      return true;
    });
  }

  console.log(
  unique(
      [
        'one', 'two', 'two', 'three', 'three', 'three'
      ]
    )
  );

/*
output:
[
  "one",
  "two",
  "three"
]
*/
```

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2020-12-18T10:19:01.103

如果您在使用 ES5 时遇到问题，`new Set`或者`new Map`由于某种原因无法使用，并且您需要一个包含具有唯一键的值的数组（而不仅仅是一个唯一键的数组），您可以使用以下命令：

```
function distinctBy(key, array) {
    var keys = array.map(function (value) { return value[key]; });
    return array.filter(function (value, index) { return keys.indexOf(value[key]) === index; });
} 
```

或者 TypeScript 中的类型安全等价物：

```
public distinctBy<T>(key: keyof T, array: T[]) {
    const keys = array.map(value => value[key]);
    return array.filter((value, index) => keys.indexOf(value[key]) === index);
} 
```

用法：

```
var distinctPeople = distinctBy('age', people); 
```

所有其他答案：

*   返回唯一键数组而不是对象（例如返回年龄列表而不是具有唯一年龄的人）；
*   使用您可能无法使用的ES6`new Set`等；`new Map`
*   没有可配置的键（比如`.age`硬编码到 distinct 函数中）；
*   假设键可用于索引数组，这并不总是正确的，TypeScript 不允许这样做。

这个答案不存在上述四个问题中的任何一个。

* * *

## 回答 #51

> 赞同：0
> 
> 时间：2021-01-18T19:06:38.067

如果您的数组是对象数组，则可以使用此代码。

```
getUniqueArray = (array: MyData[]) => {
    return array.filter((elem, index) => array.findIndex(obj => obj.value == elem.value) === index);
} 
```

MyData 如下所示：

```
export interface MyData{
    value: string,
    name: string
} 
```

**注意**：您不能使用 Set，因为在比较对象时，它们是按引用而不是按值进行比较的。因此，您需要唯一键来比较对象，在我的示例中，唯一键是值字段。有关更多详细信息，您可以访问此链接：[Filter an array for unique values in Javascript](https://dev.to/kannndev/filter-an-array-for-unique-values-in-javascript-1ion)

* * *

## 回答 #52

> 赞同：0
> 
> 时间：2021-07-20T06:32:56.383

```
let mobilePhones = [{id: 1, brand: "B1"}, {id: 2, brand: "B2"}, {id: 3, brand: "B1"}, {id: 4, brand: "B1"}, {id: 5, brand: "B2"}, {id: 6, brand: "B3"}]
 let allBrandsArr = mobilePhones .map(row=>{
        return  row.brand;
      });
let uniqueBrands =   allBrandsArr.filter((item, index, arry) => (arry.indexOf(item) === index));
console.log('uniqueBrands   ', uniqueBrands );
```

* * *

## 回答 #53

> 赞同：0
> 
> 时间：2021-11-16T14:49:17.540

[使用iter-ops](https://github.com/vitaly-t/iter-ops)库的高效和干净的方法：

```
import {pipe, distinct, map} from 'iter-ops';

const array = 
    [
        {name: 'Joe', age: 17}, 
        {name: 'Bob', age: 17}, 
        {name: 'Carl', age: 35}
    ];

const i = pipe(
    array,
    distinct(a => a.age),
    map(m => m.age)
);

const uniqueAges = [...i]; //=> [17, 35] 
```

* * *

## 回答 #54

> 赞同：-1
> 
> 时间：2015-03-31T13:17:27.040

我在这个功能上的两分钱：

```
var result = [];
for (var len = array.length, i = 0; i < len; ++i) {
  var age = array[i].age;
  if (result.indexOf(age) > -1) continue;
  result.push(age);
} 
```

您可以在此处查看结果（方法 8） [http://jsperf.com/distinct-values-from-array/3](http://jsperf.com/distinct-values-from-array/3)

* * *

## 回答 #55

> 赞同：-1
> 
> 时间：2019-09-21T17:43:01.840

如果您想从已知唯一对象属性的数组中过滤掉重复值，可以使用以下代码段：

```
let arr = [
  { "name": "Joe", "age": 17 },
  { "name": "Bob", "age": 17 },
  { "name": "Carl", "age": 35 },
  { "name": "Carl", "age": 35 }
];

let uniqueValues = [...arr.reduce((map, val) => {
    if (!map.has(val.name)) {
        map.set(val.name, val);
    }
    return map;
}, new Map()).values()] 
```

* * *

## 回答 #56

> 赞同：-2
> 
> 时间：2017-11-09T06:09:49.813

这个函数可以唯一的数组和对象

```
function oaunic(x,n=0){
    if(n==0) n = "elem";
    else n = "elem."+n;
    var uval = [];
    var unic = x.filter(function(elem, index, self){
        if(uval.indexOf(eval(n)) < 0){
            uval.push(eval(n));
            return index == self.indexOf(elem);
        }
    })
    return unic;
} 
```

像这样使用

```
tags_obj = [{name:"milad"},{name:"maziar"},{name:"maziar"}]
tags_arr = ["milad","maziar","maziar"]
console.log(oaunic(tags_obj,"name")) //for object
console.log(oaunic(tags_arr)) //for array 
```

* * *

## 回答 #57

> 赞同：-2
> 
> 时间：2019-07-14T08:40:06.383

我知道这是一个古老且答案相对较好的问题，我给出的答案将得到完整的对象（我在这篇文章的很多评论中看到了这一点）。它可能“俗气”，但在可读性方面似乎比许多其他解决方案更干净（尽管效率较低）。

这将返回数组内完整对象的唯一数组。

```
let productIds = data.map(d => { 
   return JSON.stringify({ 
      id    : d.sku.product.productId,
      name  : d.sku.product.name,
      price : `${d.sku.product.price.currency} ${(d.sku.product.price.gross / d.sku.product.price.divisor).toFixed(2)}`
   })
})
productIds = [ ...new Set(productIds)].map(d => JSON.parse(d))``` 
```

* * *

## 回答 #58

> 赞同：-5
> 
> 时间：2017-07-26T11:52:19.210

使用[d3.js v3](https://github.com/d3/d3-3.x-api-reference/blob/master/Arrays.md)：

```
 ages = d3.set(
    array.map(function (d) { return d.age; })
  ).values(); 
```

# ruby-on-rails - Rails 3：获取命名空间模型的 ID

> ID：15125922
> 
> 赞同：0
> 
> 时间：2013-02-28T01:33:50.623
> 
> 标签：ruby-on-rails, routing, namespaces

我有一个名为 的模型`Contributor`，它也充当其他几个模型的命名空间，例如`Contributor::Alias`和`Contributor::Reassignment`。我想使用包含贡献者 ID 的 URL，如下所示：

```
/contributors/1/reassignments/new 
```

但我得到这个错误：

```
No route matches [GET] "/contributors/1/reassignments/new" 
```

我的`routes.rb`文件包括：

```
namespace :contributor do
  resources :reassignments
end
resources :contributors 
```

我也试过：

```
resources :contributors do
  resources :reassignments
end 
```

这会导致不同的错误：

```
uninitialized constant ReassignmentsController 
```

知道如何解决这个问题吗？也许我不应该使用同时充当模型的命名空间？我没有在任何教程中看到这样做，尽管它似乎是可能的。

更新：

如何处理深度嵌套的命名空间模型，例如：

```
resources :contributors do
  resources :reassignments, :module => "contributor" do
    resources :approvals, :module => "reassignment"
  end
end 
```

使用这种方法，我得到了错误：

```
No route matches {:action=>"create", :controller=>"contributor/reassignment/approvals"} 
```

我的控制器目录确实具有以下结构：

```
contributor ->
  reassignment ->
    approvals_controller.rb 
```

这似乎与第一个错误有关，但也许是新事物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:09:13.467

目前尚不清楚您是否有贡献者资源。如果这样做，请在您的 routes.rb 中添加以下内容：

```
resources :contributors do
  resources :reassignments, :module => "contributor"
end 
```

如果没有，请尝试：

```
resources :reassignments, :module => "contributor", :path => "/contributors/:contributor_id/reassignments" 
```

请注意，在第二种情况下，您将需要构造一个 url 并在对 link_to、form_for 和类似位置的调用中明确地将 :contributor_id 传递给它。

如果你想在那里使用 [@contributor,@reassignment] 格式，你最好坚持第一种方法，你确实有一个贡献者资源。

更新：对于三级嵌套，如果您的控制器目录不与资源并行嵌套，您可以显式指定控制器，例如：

```
resources :contributors do
  resources :reassignments, :controller => "contributor/reassignments" do
    resources :approvals, :controller => "reassignment/approvals"
  end
end 
```

但是，请不要那样做。在 Rails 中不鼓励使用 3 层及更多层的嵌套。在这里查看推荐的内容：[http ://weblog.jamisbuck.org/2007/2/5/nesting-resources](http://weblog.jamisbuck.org/2007/2/5/nesting-resources)

# ironpython - 使用 Visual Studio 的 Python 工具将 Python 代码从 WPF 编译为 exe

> ID：15125924
> 
> 赞同：0
> 
> 时间：2013-02-28T01:34:31.030
> 
> 标签：ironpython, ptvs

我已经尝试过 pyc.py 的方法`ipy.exe pyc.py /main:WpfApplication2.py /target:winexe`，但这会生成一个绝对没有任何作用的 exe 文件。

那么怎么做呢？我找不到任何关于它的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:48:03.137

使用以下主要功能创建一个新的 C# 应用程序：

```
using IronPython.Hosting;
using Microsoft.Scripting.Hosting;

namespace Example
{
    class Program
    {
        static void Main(string[] args)
        {
            var ipy = Python.CreateRuntime();
            dynamic py_main= ipy.UseFile("YourCode.py");
            py_main.your_python_main_func();
        }
    }
} 
```

# java - Java：获取静态变量的当前值

> ID：15125927
> 
> 赞同：0
> 
> 时间：2013-02-28T01:34:45.510
> 
> 标签：java

我正在尝试创建一堆具有唯一 ID 的对象。我实现这个的第一个想法是有一个静态变量来计算对象的数量。每次创建对象时，静态变量都会增加一并记下来作为对象的 ID。

兴高采烈地，我就这样实现了代码：

```
 public class Order {
        static int totalOrdersPlaced;
        public int orderID;

        public void Order() {
            totalOrdersPlaced++;
            orderID = totalOrdersPlaced;
        }
    } 
```

*...由于我大致*理解的原因，它会引发“无法对非静态字段进行静态引用”错误。但我不太清楚如何实现我想要的。

tl; dr：如何让程序获取静态变量的当前值并存储它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:36:26.140

[您问题中的代码已编译。](http://ideone.com/bGg6Wm)你的*真实*代码有`public static void Order()`吗？

无论哪种方式，我猜您打算在构造函数中执行此操作，因此请删除`void`：

```
public class Order {
    private static int totalOrdersPlaced;
    public final int orderID;

    public Order() {
        totalOrdersPlaced++;
        orderID = totalOrdersPlaced;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:40:40.087

```
 public class Order {
    static int totalOrdersPlaced;
    public int orderID;

    public void Order() {
        totalOrdersPlaced++;
        orderID = totalOrdersPlaced;
    }
} 
```

如果您将`Order()`方法转换为构造函数，则将起作用。（删除`void`）。

这是一个测试代码：

```
 public class Order {
    static int totalOrdersPlaced;
    public int orderID;

    public Order() {
        totalOrdersPlaced++;
        orderID = totalOrdersPlaced;
    }
    public static void main(String[] args) {
    Order order = new Order();
    System.out.println(order.totalOrdersPlaced);
    Order order2 = new Order();
    System.out.println(order2.totalOrdersPlaced);
}
} 
```

证明：http: [//ideone.com/n06npg](http://ideone.com/n06npg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T01:35:30.217

`void`中删除

```
 public void Order() {
            totalOrdersPlaced++;
            orderID = totalOrdersPlaced;
        } 
```

构造函数不应该有返回类型

.. 最初由 MattBall 确定

为所需变量生成 getter 和 setter，并使用 getter 方法获取值。

# regex - 在正则表达式中转义数字

> ID：15125930
> 
> 赞同：1
> 
> 时间：2013-02-28T01:35:15.440
> 
> 标签：regex

以下正则表达式有效吗？如果是这样，它有什么作用？

```
.*(.)(.)(.)(.)\4\3\2\1.* 
```

似乎找不到任何关于转义数字的信息，为什么是四个 (.) ？

摘自最近在[Slashdot上列出的 Regex Sudoku/Crossword 谜题](http://games.slashdot.org/story/13/02/13/2346253/can-you-do-the-regular-expression-crossword)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:39:23.613

它不是逃避数字；有许多正则表达式库使用该`\#`符号来引用特定的捕获组。即，`\1`是第一个捕获的组。

是`(.)`每个捕获组，所以这将匹配类似

> abcddcba

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T01:45:38.420

它看起来是有效的，是的，并且简单地说，“匹配零个或多个字符，后跟任意四个字符，然后是相同的四个字符，反转，后跟零个或多个字符”。

*   `.*`= 任何字符出现零次或多次
*   `(.)(.)(.)(.)`= 任意四个字符（并“捕获”每个字符以供以后参考）
*   `\4\3\2\1`= 匹配捕获的第四个字符，然后是第 3 个、第 2 个、第 1 个
*   `.*`= 任何字符出现零次或多次

这些都是与 RegEx 匹配的示例：

*   aweqwe12344321
*   12344321asdfas
*   12344321
*   asdf12344321asdf

# python-2.7 - 如何使用 Beautifulsoup 获取非常大的网站内容的大量 href 链接

> ID：15125937
> 
> 赞同：0
> 
> 时间：2013-02-28T01:35:42.650
> 
> 标签：python-2.7, beautifulsoup, urllib

我正在解析一个包含 1000 多个 href 链接的大型 html 网站。我正在使用 Beautifulsoup 来获取所有链接，但是当我再次运行程序时，beautifulsoup 无法处理它。（查找特定的所有'td'标签。我将如何克服这个问题？虽然我可以使用urllib加载html页面，但无法打印所有链接。当我将它与find一个'td'标签一起使用时，它通过了。

```
Tag = self.__Page.find('table', {'class':'RSLTS'}).findAll('td')    
    print Tag           

    for a in Tag.find('a', href= True):
        print "found", a['href'] 
```

现在作为

Tag = self.__Page.find('table', {'class':'RSLTS'}).find('td')
打印标签

```
 for a in Tag.find('a', href= True):
        print "found", a['href'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:47:30.747

您需要遍历它们：

```
tds = self.__Page.find('table', class_='RSLTS').find_all('td')

for td in tds:
    a = td.find('a', href=True)

    if a:
        print "found", a['href'] 
```

虽然如果你有很多东西我只会使用 lxml ：

```
root.xpath('table[contains(@class, "RSLTS")]/td/a/@href') 
```

# linq-to-objects - 寻找不同领域的最大值

> ID：15125939
> 
> 赞同：0
> 
> 时间：2013-02-28T01:35:46.773
> 
> 标签：linq-to-objects

```
Public class Inquiry
{
Public Date Inquirydate;
Public Date submittedDate;
Public Date VerifiedDate;
}

List<Inquiry> InquiryList= new List<Inquiries>(); 
```

形成这个集合，我需要获取最新的 InquiryDate、submittedDate 和 verifyDate。请注意，该系列包含 5 个对象，因此共有 15 个日期。每个对象都有三个字段中的最新日期，结果应该是所有 15 个日期中的最新日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:07:18.013

您可以使用一个小技巧轻松地`Max`从每个对象中的 3 个日期中进行选择：

```
var maxDate = InquiryList.Max(i => (new DateTime[] { i.Inquirydate, i.submittedDate, i.VerifiedDate }).Max()); 
```

或使用`SelectMany`：

```
var = maxDate = InquiryList.SelectMany(i => new DateTime[] { i.Inquirydate, i.submittedDate, i.VerifiedDate }).Max(); 
```

# macos - 以编程方式使用 sysctl 设置 tcp 延迟确认

> ID：15125943
> 
> 赞同：2
> 
> 时间：2013-02-28T01:36:20.047
> 
> 标签：macos, tcp, sysctl

我正在尝试将Delayed_ack 值从OS X 中的3（默认）更改为0。我可以以编程方式更改发送空间，但不能更改delayed_ack。想法？谢谢。

```
int sendspace,retval,new_sendspace,len;
len = sizeof(sendspace);
new_sendspace = 131072;
retval =    sysctlbyname("net.inet.tcp.sendspace", &sendspace, &len,&new_sendspace, &len); 
```

以上工作。

```
// Turn off delayed Ack
int delayed_ack = 0;
len = sizeof(delayed_ack);
retval = sysctlbyname("net.inet.tcp.delayed_ack", &delayed_ack, &len, &delayed_ack, 
    &len);
printf("retval for delayed ack is %d\n",retval); 
```

delay_ack 永远不会被设置为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:51:21.133

找到了我的答案。这就是你的做法。

```
setsockopt(sockfd,IPPROTO_TCP, TCP_NODELAY,(char *) &flag, sizeof(int)); 
```

# python - 开始：停止切片 numpy 和 Pandas 之间的不一致？

> ID：15125961
> 
> 赞同：5
> 
> 时间：2013-02-28T01:38:30.670
> 
> 标签：python, numpy, pandas

我对 numpy 和 Pandas 之间的以下区别有点惊讶/困惑

```
import numpy as np
import pandas as pd
a = np.random.randn(10,10)

> a[:3,0, newaxis]

array([[-1.91687144],
       [-0.6399471 ],
       [-0.10005721]]) 
```

然而：

```
b = pd.DataFrame(a)

> b.ix[:3,0]

0   -1.916871
1   -0.639947
2   -0.100057
3    0.251988 
```

换句话说，numpy 不包含符号中的`stop`索引`start:stop`，但 Pandas 包含。我认为 Pandas 是基于 Numpy 的。这是一个错误吗？故意的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:48:01.297

这*是*记录在案的，它是[Advanced Indexing](http://pandas.pydata.org/pandas-docs/dev/indexing.html#indexing-advanced)的一部分。这里的关键是您根本没有使用停止索引。

该属性是一个特殊的东西，它可以让您*通过标签*`ix`进行各种高级索引 -选择标签列表，使用包含的标签范围而不是半独占的索引范围，以及各种其他事情。

 *如果你不想要那个，就不要使用它：

```
In [191]: b[:3][0]
Out[191]: 
0   -0.209386
1    0.050345
2    0.318414
Name: 0 
```

如果你在不阅读文档的情况下多玩这个，你可能会想出一个例子，你的标签是，`'A', 'B', 'C', 'D'`而不是`0, 1, 2, 3`，突然间，`b.ix[:3]`将只返回 3 行而不是 4 行，你会感到困惑重新来过。

不同之处在于，在这种情况下，`b.ix[:3]`是*索引*切片，而不是*标签*切片。

您在代码中要求的内容实际上在“所有标签最多包括 3”和“所有索引最多但不包括 3”之间是模棱两可的，并且标签总是获胜`ix`（因为如果你不想要标签切片，你不必`ix`首先使用）。这就是为什么我说问题在于你根本没有使用停止索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T01:53:20.373

当索引类型为整数时，`DataFrame.ix`将仅使用基于标签的索引。根据该文件，基于标签的切片将包括开始和停止。

[http://pandas.pydata.org/pandas-docs/dev/indexing.html#advanced-indexing-with-labels](http://pandas.pydata.org/pandas-docs/dev/indexing.html#advanced-indexing-with-labels)

> 带有标签的切片在语义上略有不同，因为切片开始和停止在基于标签的情况下是包含在内的。
> 
> 带有整数轴标签的基于标签的索引是一个棘手的话题。它已经在邮件列表和科学 Python 社区的各个成员中进行了大量讨论。在 pandas 中，我们的一般观点是标签比整数位置更重要。因此，对于整数轴索引，使用 .ix 等标准工具只能进行基于标签的索引。下面的代码会产生异常

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T01:47:55.250

来自（[文档](http://pandas.pydata.org/pandas-docs/stable/indexing.html#advanced-indexing-with-labels)）：

> 切片具有整数切片的标准 Python 语义
> 
> ...
> 
> 带有标签的切片在语义上略有不同，因为切片开始和停止在基于标签的情况下是包含在内的。*

# css - 使用悬停（rails）在 link_to 上显示内容

> ID：15125963
> 
> 赞同：3
> 
> 时间：2013-02-28T01:38:35.927
> 
> 标签：css, ruby-on-rails, hover, link-to, mousehover

目前我有一个link_to，点击它会打开一个弹出窗口。我想添加一个功能，以便当我将鼠标悬停在链接上时，它会显示某些内容。当鼠标悬停时，我想向喜欢类似 facebook 的帖子的用户显示喜欢的用户。

悬停时，我想通过以下方式显示谁喜欢该帖子

```
render micropost.voters_who_voted 
```

微帖子/_micropost：

```
<%= link_to into_it_micropost_path(micropost.id), :onclick => "javascript:window.open('/microposts/#{micropost.id}/into_it','popup','width=285,height=300,top=315,left=200');", id: "feeditemlikes_#{micropost.id}", remote: true do %>
  <%= "#{micropost.votes_for} Into it!" %>
    <ul class="likes">
      <%= render micropost.voters_who_voted %>
    </ul>
<% end %> 
```

CSS：

```
[id^=feeditemlikes] {
  .likes { display: none; }
  &:hover {
    text-decoration: none;
    color: $blue;
    .likes { display: block; }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T04:05:17.263

如果您想使用 CSS 在悬停时显示某些内容，则该内容必须是接收元素的子元素`:hover`（在本例中为链接）。例如：

再培训局：

```
<%= link_to into_it_micropost_path(micropost.id), :onclick => "javascript:window.open('/microposts/#{micropost.id}/into_it','popup','width=285,height=300,top=315,left=200');", id: "feeditemlikes_#{micropost.id}", remote: true do %>
  <%= "#{micropost.votes_for} Into it!" %>
  <ul class="users">
    <%= render @user.names %>
  </ul>
<% end %> 
```

SCSS：

```
[id^=feeditemlikes] {
  .users { display: none; }
  &:hover {
    text-decoration: none;
    color: $blue;
    .users { display: block; }
  }
} 
```

（顺便说一句`[id^=feeditemlikes]`，我不会使用 ，而是在链接上放一个类并参考它。见下文。）

但是如果你想在悬停时显示不是链接子元素的内容，那么你需要使用 JavaScript。

这是一个使用 CoffeeScript 和 jQuery 的示例：

```
$('a.feed-item-likes').hover ->
  $('.users').toggle() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T02:30:22.263

您可以使用这样的插件：http: [//jqueryui.com/tooltip/](http://jqueryui.com/tooltip/) 将鼠标悬停在链接上时创建工具提示。你要做的是让你的视图级代码打印出链接标题标签中的内容，插件会为你弹出它。

# c++ - 理解for循环的日志迭代

> ID：15125964
> 
> 赞同：0
> 
> 时间：2013-02-28T01:38:36.660
> 
> 标签：c++

为什么下面的`for`-loop 计算`floor(log_2(m))`，而不是`ceil(log_2(m))`（这是我所期望的）？

```
for (int m = <some number>; m > 1; m /= 2) //<some number> is integer >= 0
    cout << “Here\n”; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:42:01.973

例如，当 3 和 2 都是整数时，3 / 2 为 1，因此循环将终止而不考虑分数。所以你得到 log_2(3) = 1。

# ruby-on-rails - 我正在尝试执行一个“每个执行”代码，该代码将在同一行中生成我的 alt、src 和标题

> ID：15125965
> 
> 赞同：1
> 
> 时间：2013-02-28T01:38:47.437
> 
> 标签：ruby-on-rails, ruby, arrays, haml

嗨，你如何在 Ruby HAML 上实现这一点，我正在尝试做一个“每个都做”的代码，它将在同一行中生成我的 alt、src 和标题的数组集合，但我不知道如何去做.

**请帮助这是我的代码。**

```
// Page Settings

- @transition = "data-transition"
- @effect = "sliceDown"

- @slides = [ '1.jpg','2.jpg','3.jpg' ]
- @slide_titles = ['Title_1','Title_2']                     
- @alt_name = ['Alt_Name_1','Alt_Name_2'] 
```

**这是我的 each.do 代码**

```
- @slides.each do |slides|
     %img{:src => slides, :alt => @alt_name, :title => @slide_titles, @transition => @effect} 
```

我想编写一个代码，让我可以轻松粘贴大量图像并以备将来使用。我被困在这里。

**这是输出，**

```
<img title="["Title_1", "Title_2"]" src="1.jpg" data-transition="sliceDown" alt="["Alt_Name_1", "Alt_Name_2"]"> 
```

**我期望拥有的是**

```
<img title="Title_1" src="1.jpg" data-transition="sliceDown" alt="Alt_name_1">
<img title="Title_2" src="2.jpg" data-transition="sliceDown" alt="Alt_name_2"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:42:45.967

```
- @slides.each_with_index do |slide, i|
     %img{:src => slide, :alt => @alt_name[i], :title => @slide_titles[i], @transition => @effect} 
```

您的代码没有给出您期望的结果，因为您使用的是`@alt_name`数组和其他代码，而不仅仅是使用您想要的位置。您实际上可以在输出中看到它是一个数组，而不仅仅是一个字符串。

我只是更改`each`了，`each_with_index`所以它也给出了当前幻灯片的索引（位置），然后我们使用索引来获取标题和 alt_name 在同一位置做`@alt_name[index]`

也许是一个实际的例子：

```
alt_name = ['Alt_Name_1','Alt_Name_2']
alt_name[0] #=> 'Alt_Name_1'
alt_name[1] #=> 'Alt_Name_2' 
```

# ios - 将 NSDictionary 添加到图像元数据

> ID：15125967
> 
> 赞同：0
> 
> 时间：2013-02-28T01:38:54.853
> 
> 标签：ios, alassetslibrary, assetslibrary

我正在尝试将带有一些自定义元数据的图像保存到相册中。我想保存的自定义元数据应该是 NSDictionary 的形式。到目前为止，我只成功地将 NSArray 插入到图像元数据中，方法如下：

```
NSMutableDictionary *metadata = [[NSMutableDictionary alloc] init];
[metadata setObject:@[@"ele1", @"ele2"] forKey:(NSString*)kCGImagePropertyIPTCKeywords];
NSMutableDictionary *meta = [[NSMutableDictionary alloc] init];
[meta setObject:metadata forKey:(NSString*)kCGImagePropertyIPTCDictionary];
// pass the meta dictionary into writeImageDataToSavedPhotosAlbum 
```

但我想要的是将字典传递给 setObject。有没有人成功地将自定义元数据插入到元数据是 NSDIctionary 的图像中？

**附加信息**

我正在使用我在这里找到的代码[Save CUSTOM metadata in an image from AVFoundation in iOS](https://stackoverflow.com/q/8937963/1431713)，将字典添加到图像元数据中，但仍然没有运气。原始文件位于临时目录中，最终文件是通过*writeImageDataToSavedPhotosAlbum*创建的。就像在链接中一样，生成的图像不包含字典。任何想法？

```
CGImageSourceRef source = CGImageSourceCreateWithData((CFMutableDataRef)data, NULL);
NSDictionary *metadata = [(NSDictionary *) CGImageSourceCopyPropertiesAtIndex(source,0,NULL)autorelease];
NSMutableDictionary *metadataAsMutable = [metadata mutableCopy];
NSMutableDictionary *RAWDictionary = [[metadataAsMutable objectForKey:(NSString *)kCGImagePropertyRawDictionary]mutableCopy];

if(!RAWDictionary) {
    RAWDictionary = [NSMutableDictionary dictionary];
}

[RAWDictionary setValue:@"value1" forKey:@"key1"];
[RAWDictionary setValue:@"value2" forKey:@"key2"];

[metadataAsMutable setObject:RAWDictionary forKey:(NSString *)kCGImagePropertyRawDictionary];

NSMutableData *newData = [NSMutableData data];

CFStringRef UTI = CGImageSourceGetType(source); 
CGImageDestinationRef destination = CGImageDestinationCreateWithData((CFMutableDataRef)newData, UTI, 1, NULL);

if(!destination) {
    NSLog(@"***Could not create image destination ***");
}

CGImageDestinationAddImageFromSource(destination,source,0, (CFDictionaryRef)metadataAsMutable);
BOOL success = NO;
success = CGImageDestinationFinalize(destination);

if(!success) {
    NSLog(@"***Could not create data from image destination ***");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:14:07.830

尝试这个 ：

```
//covert image to nsdata format
NSData *imageData = [[NSData alloc]initWithContentsOfFile:@"your image path"];
NSMutableDictionary *metadata = [[NSMutableDictionary alloc] init];
[metadata setObject:imageData forKey:@"imageData"]; 
```

# ajax - Ajax 成功功能不起作用

> ID：15125969
> 
> 赞同：0
> 
> 时间：2013-02-28T01:38:57.023
> 
> 标签：ajax, function

我正在使用 Ajax 在我的数据库中添加内容。这是代码：

```
function addToFavorites(){

var recipe_id = $("#recipe_id").val();
var url = connect_url+'addFavorite.php?user_id='+user_id+'&recipe_id='+recipe_id;

$.ajax({
    type: 'POST',
    data: [{
        user_id: user_id,
        recipe_id: recipe_id
    }],
    url: url,
    async: true,
    jsonpCallback: 'userCallback',
    contentType: "application/json",
    dataType: 'jsonp',
    success: function (data) {
        alert("HELLO!!!");
    },
    error: function (e) {
        alert("ERROR!");
    }
});

} 
```

Ajax 调用成功，我能够在数据库中添加记录，但我只是想知道，如果调用成功，为什么它不显示警报消息？我的代码有问题吗？还是我的理解有问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:42:37.450

您必须向 ajax 提供一些信息的响应，否则它将不知道响应成功

# c# - 从列表中拉出对象 一次通过多个ID？

> ID：15125970
> 
> 赞同：1
> 
> 时间：2013-02-28T01:39:09.277
> 
> 标签：c#, .net, linq, list

我有一个`List<Group>`地方`Group`是：

```
class Group
{
  string Id,
  string Name
} 
```

我有一个`List<string>`包含 ID 列表的

我想将所有`Group`对象拉出`List<Group>`其中有一个 Id 的`List<string>`

除了多个ID之外的东西`var groups = groupList.Where(x => x.Id == "id")`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T01:41:22.030

你可以使用类似的东西：

```
List<string> ids = GetTheIDs();

var groups = groupList.Where(x => ids.Contains(x.Id)); 
```

话虽如此，这对于大量 ID 来说效率很低。如果您有许多 ID 值，您可能希望将它们放在 a`HashSet<T>`而不是 a`List<T>`中，因为`Contains()`在这种情况下调用将是 O(1) 而不是 O(n)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T01:41:08.643

```
var groups = groupList.Where(x => listOfStrings.Contains(x.Id)); 
```

`listOfStrings`您的“我有一个`List<string>`包含 ID 列表的”在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T01:45:56.027

```
var groups = groupList.Where(x => stringList.Contains(x.Id)); 
```

# c - 错误：函数的参数太多

> ID：15125978
> 
> 赞同：2
> 
> 时间：2013-02-28T01:40:08.730
> 
> 标签：c, serial-port, raspberry-pi, lcd

我正在开发一个使用非标准`C`库在 LCD 屏幕上显示输出的项目。我的代码运行良好，但遇到了问题。

我对这个程序的预期目的是获取一个命令行文本字符串并将其转换为 ASCII 十进制值，然后将它们显示在屏幕上。将文本输出到屏幕的方式是调用`serialPutchar`函数以显示字母`H`，因为`serialPutchar(fd, 'H');`我希望能够从变量中获取值并输出变量中的字母。

问题是，当我将其编写为`serialPutchar(fd, "%c", H);`或尝试时`serialPutchar(fd, "%d", x);`，出现以下错误：

```
testing.c: In function âmainâ:
testing.c:22:3: warning: passing argument 1 of âserialPutcharâ makes integer from pointer without a cast [enabled by default]
/usr/local/include/wiringSerial.h:30:14: note: expected âintâ but argument is of type âchar *â
testing.c:22:3: error: too many arguments to function âserialPutcharâ
/usr/local/include/wiringSerial.h:30:14: note: declared here 
```

我猜它不能像你那样以那种方式使用`printf`，所以有没有替代方法，或者我只是有一个我没有发现的简单错误。我包含一个指向该`wiringSerial`库文档的链接。同样从我的错误输出中，我得到了错误`testing.c In function main:`和其他几行周围的奇怪字符。有没有办法防止这种情况？链接到[这里](https://projects.drogon.net/raspberry-pi/wiringpi/serial-library/)的库下面是我输出的工作代码`HELLO`：

```
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <time.h>
#include <wiringPi.h>
#include <wiringSerial.h>

int main (int argc, char *argv[])
{
  int fd ;
  if ((fd = serialOpen ("/dev/ttyAMA0", 9600)) < 0)
  {
    fprintf (stderr, "Unable to open serial device: %s\n", strerror (errno)) ;
    return 1 ;
  }

  if (wiringPiSetup () == -1)
  {
    fprintf (stdout, "Unable to start wiringPi: %s\n", strerror (errno)) ;
    return 1 ;
  }
    int H = 1;
         serialPutchar(fd, 'H');
         serialPutchar(fd, 'E');
         serialPutchar(fd, 'L');
         serialPutchar (fd, 'L');
         serialPutchar (fd, 'O');
  } 
```

：：：更新：：：

这是符合我描述的工作代码：

```
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <time.h>
#include <wiringPi.h>
#include <wiringSerial.h>

int main (int argc, char *argv[])
{
  int fd ;
  if ((fd = serialOpen ("/dev/ttyAMA0", 9600)) < 0)
  {
    fprintf (stderr, "Unable to open serial device: %s\n", strerror (errno)) ;
    return 1 ;
  }

  if (wiringPiSetup () == -1)
  {
    fprintf (stdout, "Unable to start wiringPi: %s\n", strerror (errno)) ;
    return 1 ;
  }
        for (int i=1; i<argc; i++){
         serialPrintf (fd, "%s",  argv[i]);
        }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T01:44:18.493

putChar 将 char 作为其第二个参数。不是字符串，不是带参数的格式字符串，只是一个字符。

如果变量 x 中有一个字符，只需执行以下操作：

```
 serialPutchar(fd, x); 
```

# javascript - 如何使用 String.replace() 替换所有出现的模式

> ID：15125989
> 
> 赞同：3
> 
> 时间：2013-02-28T01:41:36.460
> 
> 标签：javascript, jquery, jquery-ui, cross-browser

在许多 div 中，我必须通过用句点替换空格来更改类名......

所以我尝试了这个

```
$(jqueryElements).each(function(index)
{ 
    jqueryElements[index].className.replace(' ','.');
}); 
```

当班级有两个单词时，它可以正常工作......但是当班级名称有 3 个或更多单词时，它会失败......

```
className='one word';
jqueryElement[index].className.replace(' ','.'); // console-> one.word
className='many many words';
jqueryElement[index].className.replace(' ','.'); // console-> many.many words 
```

有事吗？？

我正在使用 Chrome 25、Win7、jQuery 1.8

编辑 2

我需要替换空格来搜索所有具有特定类名的 span 元素。

所以我以这种方式使用jquery...

```
$('#span-container').find('span.'+jqueryElements[index].className.replace(' ','.').text('there are '+span_counter+'spans with this classname'); 
```

这个请求的结果应该是：

```
 $('#span-container').find('span.many.many.words).text('there are '+span_counter+'spans with this classname'); 
```

相反，我有：

```
$('#span-container').find('span.many.many words).text('there are '+span_counter+'spans with this classname'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:43:52.737

改为使用`.replace(/ /g, '.')`。表示全局（如`g`“全局替换”）。不过，我对您要尝试做的事情有些怀疑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T01:54:58.963

不要使用替换，使用`split`和`join`：

```
jqueryElements[index].className.split(' ').join('.'); 
```

# network-programming - FileStream.Seek() 是否通过网络传输数据？

> ID：15125991
> 
> 赞同：0
> 
> 时间：2013-02-28T01:41:45.203
> 
> 标签：network-programming, filestream, smb, random-access, fileserver

我需要通过网络访问一个非常大的文件的随机部分。（SMB 协议）

*   FileStream.Seek() 在执行 fs.Seek() 时是否实际读取数据（在过程中复制整个文件）？

*   我能做些什么来减少或缓冲这个 IO 吗？

我的意图是轮询大文件的末尾以进行更改，如果它们存在，则从 .NET 中的书签（固定位置）向前读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T01:45:01.170

不，它将仅对流数据类型的本地数据进行操作。FileStream 在本地“缓存”并不意味着您正在`.seek()`某个远程文件系统上执行数据，而是将其作为流下载到本地计算机上。请参阅此链接 ( [http://technet.microsoft.com/en-us/library/bb933993(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/bb933993(v=sql.105).aspx) ) 了解有关网络上的 FileStream 的更多信息。

# objective-c - JavaScript 的 || 是否有 Objective-C 等价物？

> ID：15125994
> 
> 赞同：1
> 
> 时间：2013-02-28T01:42:04.317
> 
> 标签：objective-c

在 JavaScript 中，|| 运算符将返回第一个非错误评估操作数。例如：

```
var x = null;
var y = "yup";
var z = x || y; // z is now "yup" 
```

有没有对应的Objective-C？

例如：

```
NSString *x = nil;
NSString *y = @"yup";
NSString *z = x ... y; // z should now be @"yup", if "..." were an operator 
```

请注意：'||' 在 JavaScript 中做短路

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:48:38.903

有一个 C 的编译器扩展（因此 ObjC）可以满足您的需求：

z = x ?: y;

（对于标准 C/ObjC 版本：z = x ? x : y）