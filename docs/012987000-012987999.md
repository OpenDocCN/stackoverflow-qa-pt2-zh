# StackOverflow 问答 12987000-12987999

# jquery - Jquery：在单击表行上，查找包含的输入文本的值？

> ID：12987000
> 
> 赞同：0
> 
> 时间：2012-10-20T09:17:16.893
> 
> 标签：jquery

```
 <table class="container">
 <tr>
   <td><input type="text" class="foo"></td>
 </tr>
 <tr>
   <td><input type="text" class="foo"></td>
 </tr>
 <tr>
   <td><input type="text" class="foo"></td>
 </tr>
 </table>

 <script>
 $(".container tr").click(function(){
     alert($(this).find("foo").val());
 });
 </script> 
```

它应该做什么：
当我点击表格行时，它会在这个元素内找到输入并提醒它的值。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:21:57.000

你错过了`.`你的类选择器内部：

```
alert($(this).find(".foo").val()); 
```

**小提琴：http :** [//jsfiddle.net/wUgt5/](http://jsfiddle.net/wUgt5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T09:22:49.620

`$(this).find(".foo")`将返回多个项目，即该类有 3 个元素。注意添加`.`以表示它是一个类名

```
$(".container tr").click(function(){
     $(this).find(".foo").each(function(){
          alert($(this).val());

      });
 }); 
```

`$(this).find("foo")`会尝试找到带有“foo”标签的元素，例如`<foo></foo>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T09:20:46.910

应该是`.find(".foo")`选择类而不是标签

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T11:47:26.567

请进行以下更改，您将 100% 获得解决方案。

```
Change the jquery as below,

function getvalue(elementid) {

var elementid = "#" + elementid;
alert($(elementid).val());
}

and change your HTML as below,`enter code here`

as shown here you need  to call jquery function on click event of each textbox and     also need to give an id to each text box.
<table class="container">
<tr>
<td>
<input type="text" id="txtval1" class="foo" onclick="javascript:test(this.id);"></td>
</tr>
<tr>
<td>
<input type="text" id="txtval2" class="foo" onclick="javascript:test(this.id);"></td>
</tr>
<tr>
<td>
<input type="text" id="txtval3" class="foo" onclick="javascript:test(this.id);"></td>
</tr>
</table> 
```

# javascript - 使用 Angular 加载部分页面并编译控制器

> ID：12987001
> 
> 赞同：6
> 
> 时间：2012-10-20T09:17:21.430
> 
> 标签：javascript, jquery, model-view-controller, dom, angularjs

在大规模应用程序中，我们的 Web 应用程序可能会被组织成单独的部分页面，以增加我们应用程序的模块化。在某些情况下，使用 Angular $http.get 或 JQuery $.load 编译通过 XHR 或 Ajax 请求加载的部分页面会引入错误。

以我的场景为例，我正在使用 Kohana PHP 框架，因此我可以在服务器级别控制我的 Web 应用程序的模块化。像往常一样，所有模板和页面都分开显示，将所有 HTML、JS 和 CSS 放在表示层上。

这将为我在客户端处理上实现 Javascript MVW/MVC 堆栈提供很大的灵活性，因为我的 Web 应用程序严重依赖 AJAX 请求来从后端应用程序获取数据。在我使用 AngularJS 的场景中，下面是关于如何将模型中的数据呈现给客户端的简单伪代码。

> Kohana 模型 > Kohana 控制器 > Kohana 视图 > XHR > JQuery\Angular > DOM

我在我的应用程序中的一个部分，真的让我大吃一惊，让我喝了几瓶新陈代谢饮料来解决应用程序。是我有一个模态对话框的地方，部分页面通过 XHR 从服务器加载并将其附加到选定的 DOM。

问题是当 Angular 尝试编译部分页面时，当它找到 ng-controller 指令时，它将寻找引用已处理指令的函数。由于 DOM 解析器尚未对其进行评估，因此在未找到控制器的情况下会产生错误。但是，当您在加载部分页面之前在应用程序中的某个位置预先声明该功能时，一切正常。下面是我如何设置对话框服务的示例，当我单击所述链接时，该服务将从链接指令中调用。

```
var dialogService = angular.module('dialog.service', []);
dialogService.factory('Dialog', function($http,$compile){
    var dialogService = {};
    dialogService.load = function(url, scope){
        $("#dialog:ui-dialog").dialog( "destroy" );
        $("#dialog").attr('title','Atlantis');

        $http.get(url).success(function (data) {
            html = $compile(data)(scope);
            $('#dialog-content').html(html);

            $("#dialog").dialog({
                width: '600px',
                buttons: {
                    "Ok": function() {
                        $( this ).dialog( "close" );
                        return true;
                    },
                },
                close: function(){
                    if (typeof (onClose) == 'function') { onClose(); }
                },
            });
        });
    }

    return dialogService;
}); 
```

经过一些研究，我找到了一些解决方案，并与其他人分享我对像我这样的初学者的回答。（对不起我的英语不好）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T09:17:21.430

在这个设置上 AngularJS 没有任何问题，其他 JS 大师可能已经知道解决方案并且非常忙于与我们分享，同时发明另一​​个很酷的 Web 开发工具或框架。没关系，继续这样做。这可能不是一个很酷或最后通牒的解决方案，请与我们分享任何改进或提示！

为了克服这个问题，我们需要设置策略，让我从一个示例代码开始，这样我们的大脑就会在信息流过时进行消化。下面的代码是我使用 JQuery 创建模式对话框的占位符，并且将插入 Ajax 内容。

```
<div ng-app="asng" id="dialog" title="" style="display:none">
     <div id="dialog-content"></div>
</div> 
```

作为基础知识，我们必须了解 DOM 解析器是如何工作的。我们可能认为DOMP（DOM Parser）是一个多线程的，这就是我们可以并行加载多个外部资源的原因。实际上，DOMP 在从上到下解析 DOM 元素索引时是单线程的。下面是我将加载到#dialog-content DIV 元素中的部分页面上的示例。

```
<script language="JavaScript" type="text/javascript">
    function Transaction ($scope,$http){
        $scope.items = [{"country":"VN","quantity":"100"}];
        $scope.country_name = $scope.items;
    }
</script>

<style>
</style>

<div id="transaction-panel" class="user" data-ng-controller="Transaction">
        <form id="{{ form_name }}" action="">
        Country : [[ items.country ]] </br>
        Total : [[ items.quantity ]]
    </form>
</div> 
```

实际上这些部分仍然给出错误，尽管我们已经将脚本块放在带有 ng-controller 指令的元素之前。实际上并非如此，我们需要解决的部分是 AngularJS 编译服务如何编译部分 DOM。让我们回到我上面的问题部分并检查我们执行编译的那一行。

```
html = $compile(data)(scope);
$('#dialog-content').html(html); 
```

上面的第一行将在 data 变量中编译 DOM，并插入到根 DOM 不幸的是第一行会报错：找不到控制器事务。

发生这种情况是因为，您的部分页面中的**脚本块**尚未被 DOMP 解析器评估，因为它没有插入到根 DOMP 中。现在你看到亮了，所以我们必须稍微改变编译策略，通过插入新的 DOM，然后我们将解析回插入的 DOM 示例如下：-

```
html = $('#dialog-content').html(data);
$compile(html)(scope); 
```

苗条和简单的解决方案，因为忽略了 DOM 解析的简单概念，我花了几个早上才解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T23:27:42.123

如果我了解您要做什么，这是一个简单的示例。

我想通过 AJAX 发布到 Django 表单，然后用返回的标记替换页面中的表单内容。返回的标记包括一个 ng-controller，我需要在它加载时执行它：

```
.controller('MyForm', function($element, $compile, $scope){
    var scope = $scope;
    var $theForm = $element;
    var $formBlock = $element.find('.the_form');  // is replaced by the form response
    $element.find('.submit_the_form').click(function(){
        // submit the form and replace contents of $formBlock
        $.post($theForm.attr('action'), $theForm.serialize(), function(response){
            var newstuff = $formBlock.html(response);
            $compile(newstuff)(scope); // loads the angular stuff in the new markup
        });
    });
}) 
```

我认为您感兴趣的行是 $compile(newstuff)(scope);

编辑：Crikey，今天早上用其他一些标记尝试了这个但没有奏效，我无缘无故地弄清楚了。原来，如果我没有在新标记中分配 ng-model 的字段，则 $compile 不会执行。添加：

```
<input type="hidden" name="dummy" value="0" ng-model="dummy"/> 
```

...现在它编译了。

# android - Android：标准图标 android.R.drawable 与其他颜色

> ID：12987006
> 
> 赞同：4
> 
> 时间：2012-10-20T09:18:03.887
> 
> 标签：android, user-interface, icons, ui-design

大多数 Android 的标准图标`android.R.drawable`都是灰色的。

我想以其他颜色使用它们，以匹配我的应用程序颜色。而且我不想创建这些图标的副本并在 Photoshop 或任何绘画应用程序中绘制它们。

有没有办法在代码中改变它们的颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T09:31:55.753

是的，可以使用[Drawable.setColorFilter](http://developer.android.com/reference/android/graphics/drawable/Drawable.html#setColorFilter%28int,%20android.graphics.PorterDuff.Mode%29)，[这是](http://www.syedgakbar.com/blog/?p=442)一个相关的教程。

# android - Android 是否有任何 API 提供日期时间作为用户的输入（startActivityForResult）？

> ID：12987008
> 
> 赞同：7
> 
> 时间：2012-10-20T09:18:07.607
> 
> 标签：android, api

我正在寻找提供用户定义的日期时间信息的 API。我在过去的联系人列表中使用过，例如：

```
Intent intent = new Intent(Intent.ACTION_PICK);
    intent.setType(ContactsContract.Contacts.CONTENT_TYPE);
    ((Activity) mContext).startActivityForResult(intent, LauncherUI.RESULT_GOT_CONTACT_INFO); 
```

并`onActivityResult`通过使用

```
Uri contactData = intent.getData();
    //Cursor cursor =  managedQuery(contactData, null, null, null, null);
    Cursor cursor =  cr.query(contactData, null, null, null, null);
    cursor.moveToFirst();
    String name = cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME));
    String id = cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.Contacts._ID)); 
```

我可以提取*姓名*、*电话*和*gmail*。

![在此处输入图像描述](../Images/63642f798c3fdf65e4f7721bbac992a7.png)

现在我的目标是对格式为 YYYY-MM-DD hh:mm:ss 的日期时间做同样的事情。就像是：

![在此处输入图像描述](../Images/e64a33ebe83932c178ba8bd1542effa0.png) ![在此处输入图像描述](../Images/9b9f2e6d7c5758c15ab05ac007b99925.png)

我不想自己实现它，因为这个特性存在（仅在没有 API 的情况下）

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T09:27:39.670

是的，Android 有内置的日期和时间选择器对话框，请参阅[这篇](http://developer.android.com/guide/topics/ui/controls/pickers.html)文章了解详细信息（它使用片段，但您可以简单地使用[DatePickerDialog](http://developer.android.com/reference/android/app/DatePickerDialog.html)和[TimePickerDialog](http://developer.android.com/reference/android/app/TimePickerDialog.html)）。

您还可以使用带有酷炫数据选择器的其他开源库：

*   [https://code.google.com/p/android-dateslider/](https://code.google.com/p/android-dateslider/)
*   [https://code.google.com/p/android-wheel/](https://code.google.com/p/android-wheel/)
*   [https://code.google.com/p/scroll-picker-view-for-android/](https://code.google.com/p/scroll-picker-view-for-android/)
*   ...

（使用 Android UI 模式应用程序[https://play.google.com/store/apps/details?id=com.groidify.uipatterns&hl=es](https://play.google.com/store/apps/details?id=com.groidify.uipatterns&hl=es)查找此类库）

# matlab - 在 MATLAB 中求解复杂方程

> ID：12987018
> 
> 赞同：-3
> 
> 时间：2012-10-20T09:19:31.307
> 
> 标签：matlab

我在求解以下方程时遇到问题

```
A+B+C=0
D+E+3G=0
A+D+G=0
B+E+G=0
C+G=0
(0.74j)A-(0.74j)B-(22.5+10.89j)D+(3.75j)E=1 
```

我已经尝试了求解命令，但它给了我最后一个方程的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:32:10.707

你有一个相当简单的形式线性问题`Ax = b`，

```
%    A          B  C             D     E  G
A = [1          1  1             0     0  0
     0          0  0             1     1  3
     1          0  0             1     0  1
     0          0  0             0     1  1
     0          0  1             0     0  1
     0.74j -0.74j  0 (22.5+10.89j) 3.75j  0];

b = [0
     0
     0
     0
     0
     1];

% x = [ <your factor A>
%       <your factor B>
%       <your factor C>
%       <your factor D>
%       <your factor E>
%       <your factor G>];
%
% We have to solve for x. 
```

您可以使用 Matlab 的反斜杠运算符最轻松地解决这个问题：

```
>> x = A\b

ans =
     -0.017048398623080 + 0.009391773374804i % A
      0.000000000000000 - 0.000000000000000i % B
      0.017048398623080 - 0.009391773374804i % C
      0.034096797246161 - 0.018783546749607i % D
      0.017048398623080 - 0.009391773374804i % E
     -0.017048398623080 + 0.009391773374804i % G 
```

请注意

```
B == 0
C == -A == E == -G == D/2 
```

# c++ - 无法让 OTL 连接到 MySQL

> ID：12987020
> 
> 赞同：5
> 
> 时间：2012-10-20T09:19:57.443
> 
> 标签：c++, mysql, sql, odbc, otl

我正在尝试使用 OTL 来避免 MyODBC 上的 GPL（并且因为它非常好）。它编译得很好，但我得到了一个

> “[Microsoft][ODBC Driver Manager] 未找到数据源名称且未指定默认驱动程序”

控制台上的错误。这段代码不是我的，你可以在网上的几个地方得到它。有人可以帮忙吗？

**已修复：我必须指定一个 DSN 驱动程序名称，我认为它是在向我询问 TCP 信息。对不起大家...**

```
#include <iostream>
using namespace std;

#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define OTL_ODBC // Compile OTL 4.0/ODBC
// The following #define is required with MyODBC 3.51.11 and higher
#define OTL_ODBC_SELECT_STM_EXECUTE_BEFORE_DESCRIBE
// #define OTL_ODBC_UNIX // uncomment this line if UnixODBC is used
#include "otlv4.h" // include the OTL 4.0 header file

otl_connect db; // connect object

void insert()
// insert rows into table
{
otl_stream o(1, // buffer size should be == 1 always on INSERT
"insert into test_tab values "
" (:f1<int>,:f2<char[31]>), "
" (:f12<int>,:f22<char[31]>), "
" (:f13<int>,:f23<char[31]>), "
" (:f14<int>,:f24<char[31]>), "
" (:f15<int>,:f25<char[31]>) ",
// INSERT statement. Multiple sets of values can be used
// to work around the lack of the bulk interface
db // connect object
);

// If the number of rows to be inserted is not known in advance,
// another stream with the same INSERT can be opened
otl_stream o2(1, // buffer size should be == 1 always on INSERT
"insert into test_tab values "
" (:f1<int>,:f2<char[31]>)",
db // connect object
);

char tmp[32];
int i;
for(i=1;i<=100;++i){
sprintf(tmp,"Name%d",i);
o<<i<<tmp;
}
for(i=101;i<=103;++i){
sprintf(tmp,"Name%d",i);
o2<<i<<tmp;
}
}

void update(const int af1)
// insert rows into table
{
otl_stream o(1, // buffer size should be == 1 always on UPDATE
"UPDATE test_tab "
"   SET f2=:f2<char[31]> "
" WHERE f1=:f1<int>",
// UPDATE statement
db // connect object
);
o<<"Name changed"<<af1;
o<<otl_null()<<af1+1; // set f2 to NULL

}

void select(const int af1)
{
otl_stream i(50, // buffer size may be > 1
"select * from test_tab "
"where f1>=:f11<int> "
"  and f1<=:f12<int>*2",
// SELECT statement
db // connect object
);
// create select stream

int f1;
char f2[31];

i<<af1<<af1; // :f11 = af1, :f12 = af1
while(!i.eof()){ // while not end-of-data
i>>f1;
cout<<"f1="<<f1<<", f2=";
i>>f2;
if(i.is_null())
cout<<"NULL";
else
cout<<f2;
cout<<endl;
}

}

int main()
{
otl_connect::otl_initialize(); // initialize ODBC environment
try{

db.rlogon("root/orbit12@mysql3306");
//db.rlogon("UID=scott;PWD=tiger;DSN=mysql35"); // connect to ODBC
//  db.rlogon("scott/tiger@mysql35"); // connect to ODBC, alternative format
// of connect string

otl_cursor::direct_exec
(
db,
"drop table test_tab",
otl_exception::disabled // disable OTL exceptions
); // drop table

otl_cursor::direct_exec
(
db,
"create table test_tab(f1 int, f2 varchar(30))"
//"create table test_tab(f1 int, f2 varchar(30)) type=innoDB" (causes MYSQL error)
);  // create table

insert(); // insert records into the table
update(10); // update records in the table
select(8); // select records from the table

}

catch(otl_exception& p){ // intercept OTL exceptions
cerr<<p.msg<<endl; // print out error message
cerr<<p.stm_text<<endl; // print out SQL that caused the error
cerr<<p.sqlstate<<endl; // print out SQLSTATE message
cerr<<p.var_info<<endl; // print out the variable that caused the error
}

db.logoff(); // disconnect from ODBC

return 0;

} 
```

# php - 使用 Yii 将用户上传的内容与其他用户隔离

> ID：12987021
> 
> 赞同：0
> 
> 时间：2012-10-20T09:20:10.090
> 
> 标签：php, yii, authorization

在我的应用程序中有很多用户，他们可以添加文章，文章可以包含图片，所有图片都存储在上传文件夹中，默认情况下任何用户都可以删除文件夹中的任何图片，当然这不好，什么是最好的解决方法（例如将图像存储在上传//中）或类似的东西？

问题是 - 我如何分离用户上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:07:36.523

由于您包含标签 yii，请查看[Authentication and Authorization-Yii 框架](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth)。它对这个主题有特别的支持。尝试坚持你的框架约定，以首先实现你想要的。这样，您将拥有一个一致的系统和框架社区的力量。

# java - Java - 如何快速转换变量整数 -> 浮点数？

> ID：12987024
> 
> 赞同：1
> 
> 时间：2012-10-20T09:20:20.600
> 
> 标签：java, variables, converter

我是 Java 新手，只是想根据数学运算转换变量。让我们有以下方案：

```
int var_result;
if(addition) {
  var_result = number1+number2; // number1, number2 => integers
}
else if(division){
  var_result = (float) number1 / number2;
  // and here is the problem - I don't know, how to convert "var_result" from integer to float
}

...just print var result ... 
```

有什么快速的方法，在这种情况下如何转换**var_result**变量？此示例中最简单的方法是不转换它而只使用`float var_result_float`，但我不想以这种方式解决它......

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T09:22:30.760

`int var_result;`已经声明了。您不能期望在其中存储浮点数，而不会丢失精度。

当您执行类型转换时，为了评估表达式，该变量被临时视为另一种类型，但这不会改变它的实际情况。

一个 int 仍然是一个 int。你应该去`float var_result_float`存储一个浮动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T09:22:55.970

`int var_result`是一个`int`变量。
如果您需要`float`使用`float var_result`

> 我不想用这种方式解决它...

嗯...这是**唯一**的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T09:24:47.993

如果您需要在变量中存储一个`int`或`float`，您可以使用 a`double`来存储所有可能的值。

`float`恕我直言，如果可以避免它，请不要使用它，因为它的精度相当差。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T09:28:34.623

你不能改变变量的类型，但你可以通过这种方式得到你想要的：

```
Object var_result; 
if(addition) { 
  var_result = new Integer(number1+number2); // number1, number2 => integers 
} 
else if(division){ 
  var_result = new Float( (float) number1 /  (float) number2); 
} 
```

当然要使用数字，您必须使用 instanceof 测试类型并根据需要强制转换为 Float 或 Integer，所以这非常笨拙。

# iphone - iPhone中倒序阿拉伯语的NSString

> ID：12987027
> 
> 赞同：1
> 
> 时间：2012-10-20T09:20:31.427
> 
> 标签：iphone, xcode

我正在集成我的应用程序支持阿拉伯字符。

**如何在阿拉伯语字符串中获取相反的顺序？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:23:46.327

使用以下代码。

所有 NSStrings 都是相同的过程来反转字符串

```
NSString *reverse=@"الكتب";
NSMutableString *reversedString = [NSMutableString string];
NSInteger charIndex = [reverse length];
while (charIndex > 0) {
    charIndex--;
    NSRange subStrRange = NSMakeRange(charIndex, 1);
    [reversedString appendString:[reverse substringWithRange:subStrRange]];
}
NSLog(@"%@", reversedString); 
```

# php - 从 db 中检索具有特定 id 的所有帖子

> ID：12987030
> 
> 赞同：0
> 
> 时间：2012-10-20T09:21:06.003
> 
> 标签：php, mysql, sql, database, mysqli

我想从数据库中检索具有特定 listId 的所有帖子，但只检索最后一个。下面是代码，我做错了什么？

**来自 listModel.php：**

```
public function GetListElements($listId) {

    $query = "SELECT le.listElemId, le.listElemName, le.listElemOrderPlace, led.listElemDesc
                FROM listElement AS le
                INNER JOIN listElemDesc as led
                ON le.listElemId = led.listElemId
                WHERE le.listId=?";

    $stmt = $this->m_db->Prepare($query);

    $stmt->bind_param("i", $listId);

    $listElements = $this->m_db->GetListElements($stmt);

    return $listElements;
} 
```

**从数据库.php：**

```
public function GetListElements(\mysqli_stmt $stmt) {

    if ($stmt === FALSE) {
            throw new \Exception($this->mysqli->error);
    }

    //execute the statement
    if ($stmt->execute() == FALSE) {
            throw new \Exception($this->mysqli->error);
    }

    //Bind the $ret parameter so when we call fetch it gets its value
    if ($stmt->bind_result($listElemId, $listElemName, $listElemOrderPlace, $listElemDesc) == FALSE) {
        throw new \Exception($this->mysqli->error);
    }

    // Hämtar ids och användarnamn och lägger i arrayen.
    while ($stmt->fetch()) {
        $listElements = array('listElemId' => $listElemId,
                             'listElemName' => $listElemName,
                             'listElemOrderPlace' => $listElemOrderPlace,
                             'listElemDesc' => $listElemDesc);
    }

    $stmt->Close();

    return $listElements;    // contains only the last post in the table
} 
```

## 桌子

**listElement：** listElemId、listElemName、listId、listElemDescId、listElemOrderPlace

**listElemDesc：** listElemDescId，listElemId，listElemDesc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:39:26.167

您**在每次迭代时覆盖 $listElements 变量**，要修复它，您可以使用数组变量：

```
$listElements = array();
while ($stmt->fetch()) {
    $listElements[] = array('listElemId' => $listElemId,     //notice brackets: []
                         'listElemName' => $listElemName,
                         'listElemOrderPlace' => $listElemOrderPlace,
                         'listElemDesc' => $listElemDesc); 
```

# css - 博主主页奇怪的空白代码

> ID：12987031
> 
> 赞同：3
> 
> 时间：2012-10-20T09:21:13.587
> 
> 标签：css, blogger

在我的博客主页：[http](http://www.laboiteaprog.com) ://www.laboiteaprog.com上，您可以在右侧的存档菜单中看到一个问题。

我检查了html网页，有这段代码

```
<style type="text/css">
p, li {
    white-space: pre-wrap;
}
</style> 
```

一些时间。

似乎问题只发生在主页上。

就像我们在这一页和其他页面上看到的那样，问题没有发生。 [http://www.laboiteaprog.com/2011/08/language-implementation-patterns.html](http://www.laboiteaprog.com/2011/08/language-implementation-patterns.html)

当我单击模板并修改 html 代码时，我看不到

```
white-space: pre-wrap; 
```

所以我不知道如何删除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T09:27:29.683

如果您在模板中绝对找不到该位，则可以作为临时解决方案在您的 css 中覆盖它：

```
 body p,
    body li {
        white-space: normal;
    } 
```

# javascript - .on() 与 .one() 与 .trigger() 之间的区别

> ID：12987034
> 
> 赞同：-4
> 
> 时间：2012-10-20T09:21:24.817
> 
> 标签：javascript, jquery

这些功能之间的显着差异是什么？在什么基础上决定，使用哪一个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T09:23:42.363

`on`用于在某些元素上将函数附加到事件。 [http://api.jquery.com/on/](http://api.jquery.com/on/)

`one`做同样的事情，但只要它运行一次，动作就会解除绑定。 [http://api.jquery.com/one/](http://api.jquery.com/one/)

`trigger`在任何元素上触发事件。 [http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T09:40:45.800

> 在什么基础上决定，使用哪一个？

好像在问`On what basis do I decide, whether I need to buy nails, clothes or sunglasses`？

你以错误的方式看待它。通常，您知道要完成什么，然后很清楚您需要这些功能中的哪一个。毕竟，他们做的事情非常不同。

如果您无法决定使用哪一个，那么您已经深深地误解了某些东西，或者您还不知道自己要做什么，并认为一些神奇的函数调用可以解决您的情况。

因此，请认真考虑您的问题。它应该做什么？一旦你完全了解你的情况，选择就很**明显**了。

# linux - 在 Linux 中使用 vlimit 来限制进程的资源

> ID：12987039
> 
> 赞同：1
> 
> 时间：2012-10-20T09:22:17.573
> 
> 标签：linux, operating-system, linux-kernel

发现提及 vlimit 以指定进程的资源使用限制。

功能：int vlimit（int资源，int限制）

vlimit 为进程设置资源的当前限制。

它现在是过时的方法吗？它与 prlimit 有何不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T10:07:14.113

`vlimit()`是古老的。POSIX.1-2001 指定[`getrlimit()`](http://www.kernel.org/doc/man-pages/online/pages/man2/getrlimit.2.html)并且[`setrlimit()`](http://www.kernel.org/doc/man-pages/online/pages/man2/setrlimit.2.html)您应该使用它。

[`prlimit()`](http://www.kernel.org/doc/man-pages/online/pages/man2/prlimit.2.html)是一个 Linux 特定的 GNU 扩展，它为任意进程执行相同的任务（如果你有必要的权限）；而不是设置或请求当前进程的限制，您指定要查询/设置其限制的进程的进程 ID。（查询时将第三个参数`NULL`设置`NULL`为

# spring - Spring 事务注释为 tcserver 7.0 抛出回滚异常

> ID：12987040
> 
> 赞同：2
> 
> 时间：2012-10-20T09:22:23.330
> 
> 标签：spring, jdbc, spring-transactions, spring-annotations, tcserver

我有一个场景，我在其中使用带有 JDBC 和 tcServer 6.0 的 Spring Transaction 管理。下面的代码片段

```
@Transactional(rollbackFor = Throwable.class)
public int dropDynamicModelTables(String namespace) {
 .... 
```

执行了一些 DML 操作并删除了一些表。上面的代码工作得很好，但是当我使用 tcServer 7.0 版本时，我得到 Exception as

> org.springframework.transaction.UnexpectedRollbackException：事务回滚，因为它已被标记为仅回滚

有谁知道我为什么面临这个问题。唯一的变化是从 tcServer 6.0 到 tcServer 7.0。是应用程序问题还是服务器问题。

# linux - 在 shell 中递归地从备份文件中恢复

> ID：12987043
> 
> 赞同：1
> 
> 时间：2012-10-20T09:22:27.323
> 
> 标签：linux, shell, unix, restore

我在使用 shell 脚本时犯了一个错误，我有想要恢复的备份文件。我必须恢复我的文件的代码（完美运行）是：

```
for f in *.html~; do mv $f ${f%\~}; done 
```

（备份文件以 .html~ 结尾）。

如何通过文件夹递归地执行此操作？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:27:35.330

您也可以使用 rsync

```
rsync -a /path/to/backup /path/to/restored/folder 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T09:24:29.183

```
find -type f -name "*.html~" |
while read f; do
    mv "$f" "${f%\~}"
done 
```

# crystal-reports - 如何将最后一个总和列添加到交叉表报表中，以汇总每一行的所有度量？

> ID：12987046
> 
> 赞同：0
> 
> 时间：2012-10-20T09:22:31.870
> 
> 标签：crystal-reports

我在水晶报告中做了一个交叉表报告，我必须在最后一个总和列中添加一个总和列，总结每一行中学生的所有分数。有人可以帮忙总结行中的所有措施吗？？？？

```
col1 col2 col3 total
 3    5    6    14
 7    8    10   25
 ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:28:08.440

去***Cross Tab Expert***，在那里你可以找到***Summarized Fields***。添加要求和的行。请参考以下图片

![Cross_Tab_Summary](../Images/36871b969eeed1786146ae0344f0d42c.png)

希望这会有所帮助。请尝试取回您的结果...

# c# - WF4 - 延迟恢复工作流程

> ID：12987049
> 
> 赞同：1
> 
> 时间：2012-10-20T09:22:53.553
> 
> 标签：c#, .net, workflow-foundation-4

我正在尝试在延迟结束时自动恢复工作流（使用延迟活动）如果您使用 WorkflowServiceHost，则会自动完成，但我使用的是 WorkflowApplication。

互联网上有一些代码可以处理这个问题，这是 我使用 WorkflowApplication 来实现这些目标的[示例：](http://adrianot75.wordpress.com/2010/11/04/wf4-persisnce-delay-and-execution-resume/)

*   用户创建一个任务，该任务遵循一个工作流
*   用户使用重新托管的设计器设计自己的工作流程，他的工作流程定义保存在数据库中。
*   每个工作流定义可以在数据库中保存不同的版本，以允许用户修改其工作流，当对任务执行操作并需要恢复书签时，代码使用正确的版本
*   可以使用工作流启动任务，因此在任务表中我存储了用于该任务的工作流定义和版本。

我现在遇到的问题是使用延迟活动时使用上面链接的代码，当检测到可运行实例时，我需要创建一个 WorkflowApplication 并使用 LoadRunnableInstance 方法来加载工作流：

```
if (hasRunnableWorkflows)
{

    Console.WriteLine("Found runnable workflows");
    WorkflowApplication app = new WorkflowApplication(...);
    app.InstanceStore = store;
    app.LoadRunnableInstance();
} 
```

问题是：

*   要调用 LoadRunnableInstance，我需要创建 WorkflowApplication，因此我需要将根活动提供给 WorkflowApplication CTor
*   要创建根活动，我需要知道我需要从数据库加载哪个工作流（和版本）
*   要知道要加载哪个工作流，我需要任务 ID
*   要知道任务 ID，我需要知道 Workflow ID，它只有在调用 LoadRunnableInstance 后才可用

所以......我需要打破这个循环:)

有人知道在加载工作流之前获得工作流 ID 的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:00:09.140

Microsoft wcf 和 wf 示例中的 ControllingWorkflowApplications 示例显示系统必须维护其工作流 ID 列表才能知道要从实例存储加载哪些工作流。在该示例中，他们还保留了应该能够处理您的版本的工作流 xaml 文件的路径。该示例不是最容易遵循的，但是从 PeristenceIOParticipant 继承的 WorkflowAppication 的扩展已添加到 WorkflowApplication。此类提取并定义将与工作流一起保存的附加数据。出于您的目的，这将是 id。

instance.Extensions.Add(() => new WorkflowDefinitionExtension(originalPath, connectionString)); //继承自PeristenceIOParticipant

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-22T19:05:45.140

这对我有用。

当工作流运行时触发延迟活动时，将触发事件**PersistableIdle**，如果它返回**PersistableIdleAction.Persist** ，则延迟活动将自动恢复。如果事件处理程序返回**PersistableIdleAction.Unload**，则延迟活动不会自动恢复。这是示例，

工作流程定义：

```
Variable<string> name = new Variable<string>
{
    Name = "name"
};

wf = new Sequence
{
    Variables =
    {
      name
    },
    Activities =
    {
         new WriteLine()
         {
             Text = "Workflow Triggered"
         },    
         new Delay()
         {
             Duration = TimeSpan.FromSeconds(10)
         },
         new WriteLine()
         {
             Text = "Activity1 Completed"
         },
     }
 }; 
```

工作流程应用：

```
 WorkflowApplication wfApp = new WorkflowApplication(wf);
   wfApp.PersistableIdle = delegate (WorkflowApplicationIdleEventArgs e)
   {
         return PersistableIdleAction.Persist;
   };
   // Start the workflow.
   wfApp.Run(); 
```

# javascript - 可观察数组值未更新

> ID：12987056
> 
> 赞同：0
> 
> 时间：2012-10-20T09:24:02.813
> 
> 标签：javascript, jquery, knockout.js

我正在使用 knockout.js。我有一个可观察数组，其值以列表形式显示。现在我正在尝试更新数组值。当我们第一次单击编辑链接时，该值正在更新，但之后没有显示值`whole function text shows`：

[http://jsbin.com/ihucep/1/edit](http://jsbin.com/ihucep/1/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T09:59:19.287

传递给函数 editCeremony 的仪式对象**是****一个**可**观察**对象，应作为函数调用以获取其**值**：

 ******这是工作小提琴：http: [//jsbin.com/ihucep/4/edit](http://jsbin.com/ihucep/4/edit)******

# asp-classic - 在 vbscript 中创建一个动态数组，其值被保留

> ID：12987062
> 
> 赞同：0
> 
> 时间：2012-10-20T09:24:58.367
> 
> 标签：asp-classic, vbscript

我想要的是一个数组，它将存储来自数据库的所有 ID 值。如何做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T10:49:12.713

这是[ADO GetRows](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675120%28v=vs.85%29.aspx)方法的任务

```
<%
Dim aRs, oConn, oRS, sSQL
Set oConn=Server.CreateObject("ADODB.Connection")
oConn.Provider = Application("Provider")
oConn.Open Application("Database"), Application("UserName"), Application("Password")
sSQL="SELECT ID FROM yourtable ORDER by ID"
Set oRS = oConn.Execute(sSQL)
if not oRS.eof then
        aRS=oRS.GetRows()
end if
oRS.close
oConn.close
%> 
```

# transactions - 使用 JMS 从 AQ 出列 ADT（用户类型）消息

> ID：12987064
> 
> 赞同：2
> 
> 时间：2012-10-20T09:25:05.920
> 
> 标签：transactions, jms, oracle-aq, jmstemplate

我需要通过 JMS 使用带有 ADT 有效负载消息的 Oracle AQ。入队很简单（请参阅文章[http://blog.nominet.org.uk/tech/2007/10/04/spring-jms-with-oracle-aq/](http://blog.nominet.org.uk/tech/2007/10/04/spring-jms-with-oracle-aq/)）：

```
transactionTemplate.execute(new TransactionCallbackWithoutResult() {
    public void doInTransactionWithoutResult(TransactionStatus status) {
      // some code....
      jmsTemplate.send(new MyMessageCreator(myADTMessage));
      // some code...

    }
  }); 
```

MyMessageCreator 将 myADTMessage（使用 jpub 创建）包装到 Message 中。它在事务中工作正常 - 异常回滚 enquing 并且消息没有插入到队列中。

问题始于出队。我必须同步接收消息，所以第一次尝试是：

```
Message messaege = jmsTemplate.receive(); 
```

我得到“必须为具有 ADT 有效负载的目的地指定 JMS-137 有效负载工厂”

我找不到该问题的解决方案，因此我尝试手动初始化底层对象：

```
transactionTemplate.execute(new TransactionCallbackWithoutResult() {
    public void doInTransactionWithoutResult(TransactionStatus status) {
      QueueConnection queueCon = aqConnectionFactory.createQueueConnection();
        AQjmsSession queueSession = (AQjmsSession) queueCon.createQueueSession(true, Session.AUTO_ACKNOWLEDGE);
            QueueReceiver receiver = queueSession.createReceiver(myQueue, MyADTMessageType.getORADataFactory());
            queueCon.start();
            Message message = receiver.receiveNoWait();
            queueCon.stop();
            // some code....
    }
  }); 
```

其中 aqConnectionFactory 是自动装配的 Spring bean。

消息已正确出列，但在本地 jms 事务中！如果没有 queueSession.commit() 他们留在队列中，当我将创建会话更改`createQueueSession(false, Session.AUTO_ACKNOWLEDGE)`为时，出队正在自动提交模式下执行。

所以我在这里卡住了。有谁知道，如何使用 JmsTemplate 通过 receive() 方法将 ADT 类型消息出列，或者如何将 AQjmsSession 推送到现有事务中？

# java - JUnit Matcher#startsWith 的声明在哪里？

> ID：12987065
> 
> 赞同：9
> 
> 时间：2012-10-20T09:25:23.200
> 
> 标签：java, junit, hamcrest

我正在浏览[junit`ExpectedExceptions`的 javadoc](http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/ExpectedException.html)，但我无法理解`startsWith`他们示例中的 来自哪里（在代码中标记为 HERE）。我检查了[`CoreMatcher`实用程序类](http://kentbeck.github.com/junit/javadoc/latest/org/hamcrest/CoreMatchers.html)，但找不到任何静态`startsWith`方法。

该方法位于何处？

（我显然可以自己写，但这不是重点）

```
public static class HasExpectedException {
    @Rule
    public ExpectedException thrown = ExpectedException.none();

    @Test
    public void throwsNullPointerExceptionWithMessage() {
        thrown.expect(NullPointerException.class);
        thrown.expectMessage("happened?");
        thrown.expectMessage(startsWith("What")); //HERE
        throw new NullPointerException("What happened?");
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-17T06:38:17.230

```
import static org.hamcrest.core.StringStartsWith.startsWith; 
```

使两者

```
assertThat(msg, startsWith ("what")); 
```

和

```
ExpectedException.none().expectMessage(startsWith("What")); //HERE 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-20T09:55:34.227

这很可能是`startsWith`来自 Hamcrest[`org.hamcrest.Matchers`类](http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/Matchers.html#startsWith(java.lang.String))的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-20T16:29:28.113

查看[ExpectedException](https://github.com/KentBeck/junit/blob/master/src/main/java/org/junit/rules/ExpectedException.java)，我们可以看到定义了两个 expectMessage 方法，一个 String 和一个 Matcher，确实是`org.hamcrest.Matcher`.

```
/**
 * Adds to the list of requirements for any thrown exception that it should
 * <em>contain</em> string {@code substring}
 */
public void expectMessage(String substring) {
    expectMessage(containsString(substring));
}

/**
 * Adds {@code matcher} to the list of requirements for the message returned
 * from any thrown exception.
 */
public void expectMessage(Matcher<String> matcher) {
    expect(hasMessage(matcher));
} 
```

# jquery - jQuery File Upload：如何动态更改上传 url

> ID：12987066
> 
> 赞同：24
> 
> 时间：2012-10-20T09:25:34.130
> 
> 标签：jquery, jquery-plugins

我正在尝试在我的项目中使用 blueimp [jQuery File Upload 。](http://blueimp.github.com/jQuery-File-Upload/)它非常适合我的需求，但我需要在创建和配置插件后更改 url 文件动态上传。我做了很多调查，但不幸的是，没有发现任何有用的东西。一般来说，我有一个按钮来选择文件和覆盖实际上传的文件上传操作。基本创建如下所示：

```
 $('[upload-button]').fileupload(new FileUploadConfig()) 
```

和配置本身：

```
 function FileUploadConfig() {

     // is set to a unique value for each file upload
     this.url = 'temporary';
     this.fileInput = $('[upload-button]');

     //... some other code
 } 
```

我需要做的是更改此配置中的 url，然后调用`data.submit()`. 我发现，这个配置是使用保存的，`$.data()`并试图用这样的代码解决问题

```
// get the current fileupload configuration
var config = $.data($('[upload-button]').get(0), 'fileupload');

// change the url configuration option
config.options.url = file.link;

//send a file
data.submit(); 
```

但是，这并不像我想要的那样工作。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-10-24T01:55:29.457

只是在这里为后代捕获这个。

在当前 jQuery-upload rev 中，重写 add(evt,data) 函数并设置数据对象的 url 属性：

```
fileupload({
   add: function(e, data) {
      data.url = 'customURL'
      ...
   },
   ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T14:51:28.877

当我想通过设置和绑定回调`autoupload`将文件上传到具有不同 id 参数的 url 时，我已经完成了此操作：`true``fileuploadstart`

```
<script type='text/javascript'>
    $(function () {
        'use strict';
        $('#fileupload').fileupload({
            url: 'originalurl/dest/1'
            autoUpload: true            
        }).bind('fileuploadadd', function (e, data) {
            var that = $(this).data('fileupload');              
            that.options.url = 'originalurl/dest/' + $("#selctedlocation").val();

        });
    }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-19T16:12:19.387

您需要**绑定****fileuploadadd**事件。

假设您将动态 url 保存在一个名为“dynamicURL”的隐藏输入中，那么您应该这样做：

```
$('#fileupload').fileupload({
    // Other options here
}).bind('fileuploadadd', function (e, data) {
    data.url = $('input[name="dynamicURL"]').val();
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-10T12:02:40.443

您需要添加**.bind('fileuploadsubmit')**部分。请参见下面的示例：

```
function fnFileUpload(id, urlFunc, successurl) {
    $(id).fileupload({
        url: urlFunc(),
        dataType: 'json',
        maxFileSize: 10000000,
        singleFileUploads: true,
        done: function (e, data) {
            $(this).fileupload('option', 'url', urlFunc());
            if (data.result.respType == 'S') {
                window.location.href = successurl;
            } else {
                toastr.error(data.result.respDesc, data.result.respTitle);
                var progress = 0;
                $('#progress .progress-bar').css(
                    'width',
                    progress + '%'
                );
            }
        },
        progressall: function (e, data) {
            var progress = parseInt(data.loaded / data.total * 100, 10);
            $('#progress .progress-bar').css(
                'width',
                progress + '%'
            );
        }
    }).bind('fileuploadsubmit', function (e, data) {
        $(this).fileupload('option', 'url', urlFunc());
    });
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-28T01:45:11.527

除了 davbryn 的回答：这个字符串

var that = $(this).data('fileupload');

应该换成这个

var that = $(this).data('blueimpFileupload');

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-13T14:46:19.820

这是一个通用示例，您可以如何执行此操作：

```
$('#fileupload').fileupload({
    url: initial_url,
    done: function (e, data) {
        $(this).fileupload('option', 'url', new_url);
    }
}); 
```

我使用它来根据上传脚本返回的结果更改 URL，因此我在 done 回调的开头设置了 new_url = data.result.new_url。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-18T06:48:08.863

要添加到 davbryn 的答案：

我认为你绑定的事件应该在 fileuploadadd 上，因为 fileuploadstart 不会给你任何数据，它只是给你一个事件。

[https://github.com/blueimp/jQuery-File-Upload/wiki/Options](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-09T01:38:32.763

这应该可以做到，（类似于@Aneon 的回答）似乎对我有用：

```
var file = { link: "http://thenewurl" };

// I used a form element to create the fileupload widget
$('[upload-button]').fileupload("option", "url", file.link);

// Submit the form
$('[upload-button]').submit(); 
```

在此函数调用之后的任何时候提交表单都将使用新的 url

（我的代码在选择图像后立即提交，尚未测试手动提交调用）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-06T14:05:25.673

从元素中取消注册插件，然后使用新 URL 再次注册。

```
$('#pictureUpload, #pictureUpload *').unbind().removeData();

$('#pictureUpload').fileupload({
...
}); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-08-30T09:15:45.153

嗨，似乎有一种更简单的方法来做到这一点。我把我的代码放在下面。uplodify 的基本版本来自这里 [http://www.startutorial.com/articles/view/21](http://www.startutorial.com/articles/view/21)

现在我所做的是从变量中获取**文件夹**的值。然后我每次单击下面的列表项时都会加载uploadify函数，这些列表项是根上传目录中的文件夹名称。因此，当我单击它们时，我会得到该名称并将其附加到实际文件夹路径并再次调用 uploadify。

但是如果我一次又一次地调用它，屏幕上会出现更多的浏览按钮，所以我在调用uploadify之前删除了元素#file_uploadUploader。所以我想问题已经解决了。至少对我来说 ：）

过去两天一直在寻找这个，但最终感觉很好自己解决了它。B-)

* * *

HTML

```
<input id="file_upload" name="file_upload" type="file" /> 
```

*   杰瑞1
*   杰瑞3
*   杰瑞2

* * *

jQuery

```
$(document).ready(function() {

var uploadfer = 'uploads/jerry2';

$("ul li").click(function(){
uploadfer = "uploads/"+$(this).text()+"/";
alert(uploadfer);

$('#file_uploadUploader').remove();

$('#file_upload').uploadify({
'uploader'  : 'js/uploadify.swf',
'script'    : 'upload.php',
'cancelImg' : 'js/cancel.png',
'folder'    : uploadfer,
'auto'      : true
});

});

$('#file_upload').uploadify({
'uploader'  : 'js/uploadify.swf',
'script'    : 'upload.php',
'cancelImg' : 'js/cancel.png',
'folder'    : uploadfer,
'auto'      : true
});

}); 
```

# c - 在 C 中的方法中返回 typedef 结构

> ID：12987067
> 
> 赞同：3
> 
> 时间：2012-10-20T09:25:50.507
> 
> 标签：c, unix

我正在尝试创建一个包含解析信息的结构，并且我想创建一个返回填充数据的结构的方法。这是我到目前为止所拥有的，但我收到一个错误提示 Parser.c:3: error ：在 'parseString' 之前应有 '='、','、';'、'asm' 或 '<strong>attribute'</p>

解析器.h

```
 #include <stdio.h>
    #include <string.h>

    typedef struct 
    {
       char* myArguments;
       char* myProgramName;
           int myNumArguments;

    }ParserData;

    ParserData parseString(int argc, char** argv); 
```

解析器.c

```
 #include "Parser.h"

    ParserData parseString(int argc, char **argv)
    {
         ParserData tempData;

         tempData.myNumArguments = argc;

         return tempData; 
    } 
```

米什.h

```
 #include "Parser.h"

    ParserData myParserData; 
```

米什.c

```
 #include <stdio.h>
   #include <string.h>
   #include <sys/types.h>
   #include <unistd.h>
   #include <sys/wait.h>
   #include "Mish.h"

   #define MAXLINE 1024

   int main(int argc, char *argv[], char **environ)
   {
       char buf[MAXLINE];
       pid_t pid;
           int status;

       printf("mish>"); //Print shell

       myParserData = parseString(argc, argv);

       while (fgets(buf, MAXLINE, stdin) != NULL) 
       {
       buf[strlen(buf) - 1] = 0; /* replace newline with null */

       if ( (pid = fork()) < 0)
       {
          printf("fork error");
       }
       else if (pid == 0) /* child */
       { 
          execlp(buf, argv[1], (char *) 0);
          printf("couldn't execute: %s", buf);
          return(127);
       }

       /* parent */
       if ( (pid = waitpid(pid, &status, 0)) < 0)
       {
          printf("waitpid error");  
          printf("%% ");
       }

       }

  return(0);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:47:31.087

这是一种方法（`main.c`）：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

typedef struct {
    char* myArguments;
    char* myProgramName;
    int myNumArguments;
} ParserData;

ParserData * parseString(int argc, char** argv);

int
main(int argc, char const *argv[])
{
    ParserData *foo = NULL;

    foo = parseString(argc, (char **)argv);
    if (foo) {
        fprintf(stderr, "myNumArguments: %d\n", foo->myNumArguments);
        free(foo);
    }

    return EXIT_SUCCESS; 
}

ParserData *
parseString(int argc, char **argv)
{
    ParserData *tempData;

    tempData = malloc(sizeof(ParserData));
    tempData->myNumArguments = argc;

    return tempData;
} 
```

编译：

```
$ gcc -Wall main.c -o foo 
```

跑步：

```
$ ./foo 
myNumArguments: 1
$ ./foo bar
myNumArguments: 2 
```

这为结构中的两者留下了很多错误检查代码和内存管理`char *`。希望它能帮助您弄清楚将哪些内容拆分为头文件和实现文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T23:13:56.770

好的，所以这不是代码问题，而是文件问题。我注意到 .h 文件有 Mish.h.gch 和 Parser.h.gch。我删除了 .h 和 .h.gch 并重新创建了 .h 文件，然后用“gcc -o mish Parser.c Mish.c”编译，编译成功。我的猜测是新代码没有正确更新是一个问题......

# android - 如何更改选项对象 AndAR 模型查看器

> ID：12987069
> 
> 赞同：0
> 
> 时间：2012-10-20T09:26:04.427
> 
> 标签：android, augmented-reality, andar

如何从[AndAR 模型查看器更改对象选项](http://code.google.com/p/andar/source/browse/#svn/trunk/AndARModelViewer)

下图中的示例

[图片](http://i48.tinypic.com/2h50i6x.png)

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T03:32:24.333

我认为 Google 代码中缺少某些部分代码，但我不确定。但是，我[在 github 上检查了这个项目，该项目](https://github.com/RaghavSood/ProAndroidAugmentedReality/blob/master/Pro%20Android%20AR%208/src/com/paar/ch8/ModelViewer.java)是从您提到的项目中克隆的。您要查找的部分位于 ModelViewer.java 中。看起来该类加载了资产文件夹中的所有 .obj 文件。（你可以看一下第219行）

```
if(modelFileName.endsWith(".obj")) {... 
```

因此，更改选项的最简单方法是将模型放在资产文件夹中并删除不需要的模型。你可以从那里开始。希望这可以帮助。

# python - 在 python 中使用 Newton-Cotes 方法进行集成

> ID：12987072
> 
> 赞同：1
> 
> 时间：2012-10-20T09:26:45.553
> 
> 标签：python, algorithm

我试图在 python 中编写一个函数，该函数将使用 Newton-Cotes 方法集成给定的函数，并返回一些非常奇怪的结果，有时它会给出正确的答案而其他的则不会（大多与 -ve 界限错误）。这是我的代码，如果有人能指出任何错误，将不胜感激:)

```
def integrate(function, a, b):
    coeff = [7,32,12,32,7]
    result = 0
    for i in range(0,len(coeff)):
        x = a + (i*(b-a))/(len(coeff)-1)
        result += coeff[i]*eval(function)
        print eval(function)
    result = result*((b-a)/90.)
    return result 
```

我一直遵循的牛顿科特公式来自[wikipedia](http://en.wikipedia.org/wiki/Newton-Cotes_formulas)。

例子：

```
print integrate("x**3-4*x+9", -7, 7) 
```

返回：`-38`当实际答案是`126`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T09:49:29.010

神秘的数学行为通常是因为忘记了在 Python 2 中，整数除法的默认行为是截断。`print x, eval(function)`在循环内添加：

```
>>> integrate("x**2+4", 0, 5)
0 4
1 5
2 8
3 13
5 29
50.166666666666664 
```

但

```
>>> integrate("x**2+4", 0., 5.)
0.0 4.0
1.25 5.5625
2.5 10.25
3.75 18.0625
5.0 29.0
61.666666666666664 
```

请注意，第一个中的评估点是错误的。加上`from __future__ import division`, or 'a = 1.0*a; b = 1.0*b` 开始：

```
>>> integrate("x**2+4", 0, 5)
0.0 4.0
1.25 5.5625
2.5 10.25
3.75 18.0625
5.0 29.0
61.666666666666664 
```

或以您为例：

```
>>> integrate("x**3-4*x+9", -7, 7)
-7.0 -306.0
-3.5 -19.875
0.0 9.0
3.5 37.875
7.0 324.0
126.0 
```

这`eval`是一个糟糕的设计选择，但它不是错误的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T09:46:29.107

正如@DSM 指出的那样，这是一些有效的代码，问题在于积分限制范围的整数定义。它集成了一个'func()'。

```
#! /usr/bin/python

def integrate(function, a, b):
    coeff = [7,32,12,32,7]
    result = 0
    for i in range(0,len(coeff)):
        x = a + (i*(b-a))/(len(coeff)-1)
        result += coeff[i]*function(x)
        #print function(x)
    result = result*((b-a)/90.)
    return result

def func(x):
    return x**3-4*x+9

print integrate(func,-7.0,7.0) 
```

在我的电脑上它给出了 126。希望有帮助。

# css - 我应该使用媒体查询定位哪些设备/推荐尺寸？

> ID：12987078
> 
> 赞同：3
> 
> 时间：2012-10-20T09:27:33.153
> 
> 标签：css, media-queries

我是响应式网页设计的新手，并且感到困惑，因为对于使用哪些媒体查询和定位哪些设备存在各种偏好。有标准吗？我想定位 iPhone、iPad 和其他流行的设备。

我在网上找到了这个：

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen and (min-device-width : 320px) and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen and (min-device-width : 768px) and (max-device-width : 1024px) and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 and high pixel ratio devices ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

但我不知道它是否已过时。我不知道哪个规则针对 iPhone 4，因为我运行了 iPhone 模拟器并且 CSS 不起作用（参考最后一个 CSS 规则）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T16:55:26.813

我对媒体查询的想法是，您的目标应该是为您的网站制作一个与设备无关的框架。这意味着它需要同时具备分辨率和像素密度意识，因为苹果（和其他公司）正在推进超高分辨率屏幕。

**2018 年更新**：我的方法现在放弃了`screen`和`min-device-pixel-ratio`媒体属性并使用屏幕尺寸范围。因为现在每个设备都注册为`screen`，而且现在几乎所有设备都是高分辨率的 - 你真的不需要这些属性。如果你在一个超高流量的网站上，也许它们仍然有意义。

以下是我在全局范围内布置断点的方式：

```
/* Below 380px is really just the iPhone SE at this point */

@media (min-width: 380px) and (max-width: 480px) {
  /* Most phones fall in here - iPhone, Galaxy, Pixel, etc */
}

@media (min-width: 480px) and (max-width: 768px) { 
  /* Phablets and Tablets - iPad, Galaxy Note, Pixel Slate, Fire */
}

@media (min-width: 768px) and (max-width: 980px) { 
  /* Small desktop, large tablet - Macbooks, sub 12" ultrabooks */
}

@media (min-width: 980px) and (max-width: 1200px) { 
  /* Medium screen desktop (up to about 24") and laptops (13" laptops) */
}

@media (min-width: 1200px) and (max-width: 1600px) {
  /* Large screen desktop (27"), laptops (15+") */
}

@media (min-width: 1600px) { 
  /* Very large screen, 4K desktop + small TVs */
} 
```

**2012 年建议：我已经看到实现双重任务来自 Chris** [Coyier](http://css-tricks.com/snippets/css/retina-display-media-query/)的 CSS-tricks.com：http://css-tricks.com/snippets/css/retina-display-media-query/

这个概念是根据大小创建初始断点，然后进行像素密度媒体查询。这种方法为您提供了三个断点，每个断点都有一个像素密度感知选项。

这是 Coyier 的示例代码（我简化了供应商特定的前缀，以便您掌握概念）：

```
@media only screen and (min-width: 320px) {
  /* Small screen, non-retina */
}

@media only screen and (min-device-pixel-ratio: 2) and (min-width: 320px) { 
  /* Small screen, retina, stuff to override above media query */
}

@media only screen and (min-width: 700px) {
  /* Medium screen, non-retina */
}

@media only screen and (min-device-pixel-ratio: 2) and (min-width: 700px) {
  /* Medium screen, retina, stuff to override above media query */
}

@media only screen and (min-width: 1300px) {
  /* Large screen, non-retina */
}

@media only screen and (min-device-pixel-ratio: 2) and (min-width: 1300px){ 
  /* Large screen, retina, stuff to override above media query */
} 
```

我真的很喜欢这个概念：您可以为较旧的、可能带宽受限的设备节省带宽，同时为新的高分辨率设备提供他们需要的东西。您必须在像素密度媒体查询中添加的唯一代码应该是背景图像内容，因此高分辨率图像会覆盖旧设备上的像素化​​对应物。

意识到你正试图击中一个移动的目标，我的朋友；）这是一个不断发展的概念，css-tricks.com、stackoverflow 和其他博客似乎是跟上步伐的最佳方式。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T09:36:15.393

随着具有不同视口比率的新设备上市，布局中的“断点”可能很快就会过时。也许不是针对特定设备，我更喜欢在您希望中断的设计中设置断点的方法，而不是将您的设计弯曲到特定设备。

这篇文章：[响应式网页设计的与设备无关的方法](http://coding.smashingmagazine.com/2012/03/22/device-agnostic-approach-to-responsive-web-design/)比我做的更好。

或者，您可以参考一些最流行的框架，例如[320 和 Up](https://github.com/malarkey/320andup)或[Twitter Bootstrap](http://twitter.github.com/bootstrap/) - 它们会经常更新，应该为您提供一个良好的媒体查询断点起点。

# nhibernate - 测试唯一约束

> ID：12987082
> 
> 赞同：0
> 
> 时间：2012-10-20T09:27:44.077
> 
> 标签：nhibernate, integration-testing

我不确定如何继续在我的数据库中测试我的独特约束。我正在使用 NHibernate。

我想检查我放入表中的唯一约束是否有效......或者更好地说我想确保我在数据库中的特定列上放置了唯一约束。

我可以轻松编写集成测试来检查唯一约束是否在数据库上工作（我在特定列上保存了两个具有相同值的实体，它必须抛出异常）。但我的问题是：因为我无法在数据库生产中启动集成测试，而只能在我的数据库测试中启动，我如何确定集成测试也在生产数据库中工作？最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:52:43.577

如果没有测试，您无法确定某些东西会按照您的意愿行事。测试不同的设置与测试要确保正常工作的设置不同。

想象一下，你说“我的车坏了”，有人回答“不可能，我的车很好”。

确保测试生产中使用的 Schemacreation（可能是 Nhibernates SchemaExport）并测试生产中使用的 Schemaupdate 过程 a）生产数据库的转储或 b）生产数据库的 SchemaCreation 它现在的版本

# android - 移除 android spinner 中的灰色边框

> ID：12987084
> 
> 赞同：0
> 
> 时间：2012-10-20T09:28:14.980
> 
> 标签：android, android-spinner

嗨，我必须开发一个微调器应用程序。在这里，我如何删除 android spinner item 上的默认灰色边框..请帮助我。

![在此处输入图像描述](../Images/8b5a21f29b776af5059a6c35fa8bf543.png)

如何从此图像中删除默认边框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:38:33.780

使用代码或其他简单方法没有您想要的简单形式

您必须为该微调器创建自己的背景或使用其他主题--浅色、深色、全息……--我认为全息是一个很好的解决方案。

如果您的应用程序正在为 Android 3 开发-您可以使用此[https://github.com/ChristopheVersieux/HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)在每个 Android 版本 1-6+ 中使用 Holo

其他解决方案是获取该组件的 Android 资源并使用 Gimp/photoshop 对其进行编辑并使用编辑图像。

我希望这对你有帮助

# java - java.lang.ClassCastException 当我运行关于 Java 集合接口的 java 代码时发生

> ID：12987085
> 
> 赞同：0
> 
> 时间：2012-10-20T09:28:18.413
> 
> 标签：java, exception, collections, jquery-ui-sortable

当我编译 java 代码时，它无法正确编译。但是当我运行程序时， **线程“main”java.lang.ClassCastException:java.lang.StringBuffer 中的异常无法转换为 java.lang.Comparable。**

所以我有两个问题：

1.  添加到**SortedSet**或**SortedMap**的元素是否必须是**可排序的？**此规则是否也适用于 java 集合框架中的任何其他接口

2.  为什么程序可以正确编译，但无法运行？程序运行时发生了什么

    导入 java.util.*；

    ```
    public class SortMe {
        public static void main(String args[]) {
            SortedSet<StringBuffer> s = new TreeSet<StringBuffer>();
            s.add(new StringBuffer("Red"));
            s.add(new StringBuffer("White"));
            s.add(new StringBuffer("Blue"));
            System.out.println(s.first());
        } 
    ```

    }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T09:29:42.297

`SortedSet`仅`Comparable`在其通用声明中采用类型，因为它们使用它来对插入的元素进行排序。现在由于`StringBuffer`不实施`Comparable`，所以你得到了那个例外。

```
SortedSet<T> --> `T` must implement `Comparable` 
```

来自[`documentation`](http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html)： -

> 插入有序集合的所有元素都必须实现 Comparable 接口（或被指定的比较器接受）。此外，所有此类元素必须相互比较：e1.compareTo(e2)（或comparator.compare(e1, e2)）不得为排序集中的任何元素e1 和e2 抛出ClassCastException。尝试违反此限制将导致有问题的方法或构造函数调用抛出 ClassCastException。

但问题是，你为什么要制作`SortedSet<StringBuffer>`而不是`SortedSet<String>`？

# java - Java 服务器一遍又一遍地接收相同的数据

> ID：12987086
> 
> 赞同：0
> 
> 时间：2012-10-20T09:28:20.107
> 
> 标签：java, sockets

所以我有一个服务器-客户端组合，它应该来回传递一个自定义对象。我使用 ObjectInputStream 和 ObjectOutpustStream 类来实现这一点。

这是服务器的循环：

```
while((inputPosition = (Vector2i) objectIn.readObject()) != null) {
    Print.log("input line: " + inputPosition.toString());
    outputLine = "you moved to " + inputPosition.toString();
    out.println(outputLine);        
} 
```

其中 inputPosition 是一个 Vector2i，一个仅包含 2 个整数 x 和 y 的简单类。

这是客户端的循环：

```
while((serverOutput = in.readLine()) != null) {
    Print.log("Server says: " + serverOutput);
    position = calculatePosition(position, reader);
    Print.log("sending over: " + position.toString());
    objectOut.writeObject(position);
} 
```

计算位置方法如下所示：

```
private static Vector2i calculatePosition(Vector2i position, BufferedReader reader) throws IOException {
    Print.log("i just got this: " + position.toString());
    String entry = reader.readLine().substring(0, 1);
    if(entry.equals("w"))
        position.y++;
    else if(entry.equals("s"))
        position.y--;
    else if(entry.equals("a"))
        position.x--;
    else if(entry.equals("d"))
        position.x++;

    return position;
} 
```

这就是发生的事情。我连接到服务器，成功移动一个坐标后，它只是一遍又一遍地卡在同一个坐标上：

```
Server says: Use wasd to move around.
i just got this: 5, 5
w
sending over: 5, 6
Server says: you moved to 5, 6
i just got this: 5, 6
w
sending over: 5, 7
Server says: you moved to 5, 6
i just got this: 5, 7
a
sending over: 4, 7
Server says: you moved to 5, 6
i just got this: 4, 7 
```

您可以在“发送”行中看到客户端上的 vector2i 对象是最新的，但我从服务器得到的响应一遍又一遍。服务器的日志如下所示：

```
input line: 5, 6
input line: 5, 6
input line: 5, 6 
```

它似乎一遍又一遍地接收相同的数据，但根据我的日志，客户端*应该*正在发送新数据。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:32:45.613

发送一次对象后，它会发送对该对象的引用。这表示

*   如果您改变一个对象并再次发送它，您将看不到更改
*   对象流的内存将不断增长，因为它需要保留对已发送/接收的每个对象的引用。

避免这两个问题的方法是`reset()`定期打电话。图书馆无法为您执行此操作，因为它不知道可以安全地完成什么。

# ios - 有时 lldb po 命令只返回对象地址

> ID：12987088
> 
> 赞同：0
> 
> 时间：2012-10-20T09:28:27.563
> 
> 标签：ios, command, lldb, po

我正在使用 lldb 在 Mountain Lion 10.8.2 中使用 Xcode 4.5.1 调试 iOS 应用程序。

有时我会尝试在断点处检查调试器窗口中的 iVar：

po _currentSale

并会收到回复：

self->_currentSale 的打印描述：(Sale *) _currentSale = 0x081cd7e0

其他时候我会收到这个回复（这是我想要的）：

self->_currentSale 的打印描述: '<'Sale: 0x81cd7e0'>' (entity: Sale; id: 0x81dd670 ; data: { car​​dNumber = "\U2022\U2022\U2022\U2022\U2022\U2022\U2022\U2022\U2022 \U2022\U2022\U20220001"; cvv = 222; emailAddress = "k@w.com"; expirationDate = 0413; lastStatus = 已批准; purchaseNumber = 00000008; saleAmount = 230; saleDate = "2012-10-20 08:06: 45 +0000";sectionIdentifier = 20121020;tipPercentage = 15;交易 = ("0x75df620'<'x-coredata://4A0DEB78-C770-4CE2-8A5D-878F51294D6D/Transaction/p11'>'");邮编 = 33333; })

为什么有时给我对象地址和其他人的完整描述之间的回复会有所不同？我的 Sale 对象是一个 Core Data 对象（如果有什么不同的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:39:58.423

我不肯定，但我认为这不是来自 lldb。 `po`是对调用的薄薄的一层`char *_NSPrintForDebugger(id)`，您可以通过`_NSPrintForDebugger`直接调用自己来轻松测试文本的来源，v。

```
Process 10842 stopped
* thread #1: tid = 0x1f03, 0x00000001000018f9 a.out`main + 153 at objc-prog.m:88, stop reason = step over
    #0: 0x00000001000018f9 a.out`main(argc=1, argv=0x00007fff5fbffb18) + 153 at objc-prog.m:88
   85   
   86       NSString *a = @"hi there";
   87   
-> 88       [object randomFunc];

(lldb) p a
(NSString *) $1 = 0x0000000100002470 @"hi there"   // lldb's built-in NSString summary formatter

(lldb) po a
(NSString *) $2 = 0x0000000100002470 hi there

(lldb) p (char*)_NSPrintForDebugger(a)
(char *) $4 = 0x000000010010f400 "hi there"

(lldb) p (char*)_NSPrintForDebugger(0x0000000100002470)
(char *) $3 = 0x0000000100114c60 "hi there" 
```

# css - 有没有办法使用 CSS 创建软件框的背景阴影？

> ID：12987094
> 
> 赞同：5
> 
> 时间：2012-10-20T09:28:48.827
> 
> 标签：css, background, shadow

想象一个像下面这样的软件盒：

[![](../Images/a33b4eca9fbd8309541d1af7c86b27d3.png)](https://i.stack.imgur.com/xX4gb.gif)
[（来源：[sitellite.org](http://www.sitellite.org/pix/sitellite-box.gif)）]

现在想象阴影不存在。有没有一种 CSS 方法可以模拟该背景阴影，并且至少可以在 Firefox 和 Chrome 上工作，如果不是 IE9 及更高版本的话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:42:54.567

一种方法是从这样的三角形开始

```
<div id="triangle"></div>

#triangle {
    width: 0;
    height: 0;
    border-top: 100px solid grey;
    border-left: 100px solid transparent;
    opacity:0.1;
}​ 
```

[看例子](http://jsfiddle.net/X7Svy/)

然后添加一个线性渐变并将其放置在图像后面。以这个[梯度生成器](http://www.colorzilla.com/gradient-editor/)为起点。

然后你可以使用[transform](http://www.w3schools.com/cssref/css3_pr_transform.asp)稍微倾斜它。

# html - 电子商务产品网格中的 CSS 问题

> ID：12987095
> 
> 赞同：0
> 
> 时间：2012-10-20T09:29:05.803
> 
> 标签：html, css

如何解决 css 中以下图像中的问题（我是 css/html 新手）

![产品列表](../Images/7f9309b7a345ecb62040facaa2bb66d6.png)

问题是如果产品标签太长，`add button`会滑下来。如果标签很短，它会向上滑动。

这是css和html。

```
<div class="product-container">
    <a href="#" class="thumbnail"><img src="img/sample_prod.jpeg" alt="Product name"  class="ProductTopCell img-rounded"></a>
    <div class="product-container-bottom">
        <p class="product-label"><a href="#">Buxted Free Range Skinless Chicken Breast Fillets (430g)</a></p>
        <p style="font-weight:600">Rs 43<small>/Kg</small></p>
        <div class="product-add-button"><span class="quantity-cell">qty <input type="number" class="quantity-number-cell" value="1"> kg</span><button class="btn btn-primary" type="button">Add</button></div>
    </div>
</div>

<div class="product-container">
    <a href="#" class="thumbnail"><img src="img/sample_prod.jpeg" alt="Product name"  class="ProductTopCell img-rounded"></a>
    <div class="product-container-bottom">
        <p class="product-label"><a href="#">Buxted Free Range Range Rang Skinless Chicken Breast Fillets (430g)</a></p>
        <p style="font-weight:600">Rs 43<small>/Kg</small></p>
        <div class="product-add-button"><span class="quantity-cell">qty <input type="number" class="quantity-number-cell" value="1"> kg</span><button class="btn btn-primary" type="button">Add</button></div>
    </div>
</div>

<div class="product-container">
    <a href="#" class="thumbnail"><img src="img/sample_prod.jpeg" alt="Product name"  class="ProductTopCell img-rounded"></a>
    <div class="product-container-bottom">
        <p class="product-label"><a href="#"> Breast Fillets (430g)</a></p>
        <p style="font-weight:600">Rs 43<small>/Kg</small></p>
        <div class="product-add-button"><span class="quantity-cell">qty <input type="number" class="quantity-number-cell" value="1"> kg</span><button class="btn btn-primary" type="button">Add</button></div>
    </div>
</div>

 .product-container .thumbnail {
    background: none;
    border: none;
    padding-bottom: 10px;
    box-shadow: none;
}

.product-container {
    border-bottom: 1px solid #C2BEB7;
    width: 172px;
    padding: 0 5px 15px 5px;
    display: inline-block;
    margin-bottom: 15px;
    height: 280px;
    vertical-align: top;
}

.product-container-bottom {
    background-image: url(img/Dotted-line.gif);
    background-position: top;
    background-repeat: repeat-x;
    padding-top: 10px;
    vertical-align: bottom;
    overflow: hidden;

}

.product-label {
    line-height: 14px;
    text-align: left;
    font-size: 13px;
    direction: ltr;
}

.product-label a {
    color: #004B91;
}

.product-add-button {
    margin-top:3px;
    text-align:right;

    vertical-align:baseline;
}

.quantity-cell {
    font-size:12px;
    vertical-align:bottom;
    margin-bottom: 0px;
    padding-right:7px;
}

.quantity-number-cell {
    width:30px;
    font-size:13px;
    height:90%;
    margin-bottom: 0px !important;
    padding-bottom:1px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T09:42:12.180

实际上，在`<table>`这里使用 a 是可以接受的，并且会解决您的问题。（与流行的看法相反，并非**所有**的桌子都是邪恶的）。

我的例子：

```
<table class="products">
    <tr class="figures">
        <th>
            <a href="#">
                <figure>
                    <img src="img/sample_prod.jpeg" alt="Product name" class="ProductTopCell img-rounded">

                    <p>Very very long description that will definitely break the line, and force the price to go down a bit. That will cause everything else in the row to also go down, even though they weren't directly affected.</p>
                </figure>
            </a>
        </th>
        <th>
            <a href="#">
                <figure>
                    <img src="img/sample_prod.jpeg" alt="Product name" class="ProductTopCell img-rounded">

                    <p>Description</p>
                </figure>
            </a>
        </th>
        <th>
            <a href="#">
                <figure>
                    <img src="img/sample_prod.jpeg" alt="Product name" class="ProductTopCell img-rounded">

                    <p>Description</p>
                </figure>
            </a>
        </th>
    </tr>
    <tr class="price">
        <td>Rs 34/Kg</td>
        <td>Rs 34/Kg</td>
        <td>Rs 34/Kg</td>
    </tr>
    <tr class="quantity">
        <td><label>qty <input type="number" min="0" value="1"> kg</label> <button>Add</button></td>
        <td><label>qty <input type="number" min="0" value="1"> kg</label> <button>Add</button></td>
        <td><label>qty <input type="number" min="0" value="1"> kg</label> <button>Add</button></td>
    </tr>
</table>

<style>
    * {
        padding: 0;
        margin: 0;
        box-sizing: border-box;
    }
    .products {
        width: 100%;
    }
    .products th {
        font-weight: normal;
        vertical-align: top;
    }
    .products td, .products th {
        padding: 10px;
        width: 33.33%;
    }
    .price {
        font-weight: bold;
    }
    .quantity input {
        width: 3em;
    }
    .quantity button {
        padding: .2em .5em
    }
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:40:05.943

好吧，如果我们认为使用灵活的盒子，您的问题将持续存在，那么减少产品信息区域的选项并不是那么糟糕。问题是您可以提供全部信息，只需剪辑显示它的区域，如果用户将鼠标悬停在它上面，那么您将显示全部信息。

我通常会选择固定大小的选项并向客户解释描述的限制，例如字符数，特别是因为这也迫使他们将信息标准化并帮助用户获得更好的数据和比较。

其他选项是在页面中放置您想要绝对的元素，但由于设计、产品数量以及您不确定文本大小和某些内容可能结束的事实，这很可能是不可能的在别的东西之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T09:36:32.677

如我所见，您有两个选择。

**首先**
在您的产品标签上使用 CSS 设置最小高度。下面是一个例子。

```
min-hieght:150px 
```

**其次**
，您可以修剪字符串并使它们的长度完全相同。

```
var myString= " My string";
var numberOfChars = 10;
var finalString = myString.substr(0,numberOfChar) + "..."; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T09:45:09.873

您的产品标签应该是固定高度，将以下 attr 添加到您的产品标签类

```
height: 100px; 
```

进一步的建议，对于跟随线（RS 43/kg），您可能还想添加一类固定高度。如果它具有可变高度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T09:48:57.763

最简单的解决方案是使用 JavaScript 修剪字符串。

`var startLabel = "label text";`

`var labelLength = "12";`

`var label = startLabel.substr(0,labelLength);`

# jquery - 在 Firefox 中翻转有效，然后无效；通过点击带到前面？

> ID：12987096
> 
> 赞同：2
> 
> 时间：2012-10-20T09:29:27.410
> 
> 标签：jquery, firefox, z-index, flip

全部 -

我正在整理一个页面，其中多个卡片可以独立拖动和翻转，将我在其他地方找到并改编的代码片段拼凑在一起，并在这里和那里添加我自己的东西（例如 getelementbyid 上的变量）。[这是到目前为止的页面](http://cheshiredave.com/cf/drag2.html)。

两个问题：

1.  它在 Safari 和 Chrome 中运行良好。当您加载页面时，翻转（虽然没有动画）在 FF 中工作，但是一旦您拖动某些东西，翻转在 FF 中完全停止工作。

2.  我已经让它工作，以便拖动将每张卡片带到前面。但我也希望能够按下每张卡上的翻转按钮，让它把它的卡放在前面。现在，如果一张牌在后面并且你按下按钮，它就会留在后台。

谢谢你的帮助...

# qt - 如何将 QML 插件设置为 Loader 的源

> ID：12987098
> 
> 赞同：1
> 
> 时间：2012-10-20T09:29:44.400
> 
> 标签：qt, qml

我创建了一个 QML 插件，我可以将其用作：

```
import "MyElement" 1.0

Rectangle{
    width:500;height:500;
    MyElem{

    }
} 
```

`MyElem`是插件。
现在我想知道如何使用这个插件作为Loader**元素**的**来源？**loader 的来源需要一个字符串，但这里我们有一个组件。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:07:02.610

您可以像这样将它用于加载程序：

```
import "MyElement" 1.0

Component {
  id: myElement
  MyElem{
  }
}
Loader { sourceComponent: myElement} 
```**

# jquery - 如何使用 jquery 过滤 xml 数据？

> ID：12987099
> 
> 赞同：3
> 
> 时间：2012-10-20T09:30:04.197
> 
> 标签：jquery, xml, xml-parsing, xmlhttprequest

```
 <Item id="419" rank="0.0000" date_added="2012-09-24T19:43:14" date_end="2012-10-15T19:43:14" uid="134333" price="  ,-" district="-1" district_text="Friend" cid="9" cid_text="Underholdning" img_height_thumb="433" />
  <Item id="418" rank="0.0000" date_added="2012-09-24T19:17:42" date_end="2012-10-15T19:17:42" uid="134332" price="  ,-" district="-1" district_text="Friend" cid="9" cid_text="Underholdning" img_height_thumb="254" />
  <Item id="405" rank="102.0000" date_added="2012-09-23T18:55:20" date_end="2012-10-14T18:55:20" uid="134331" price="  102,-" district="-1" district_text="Friend" cid="761" cid_text="Mote" img_height_thumb="280" /> 
```

这是示例 xml 数据。我正在使用这段代码来获取 xml。

```
 xmlDoc = xmlhttp.responseXML;
 var items = xmlDoc.getElementsByTagName("Item"); 
```

//要添加代码

```
for (i = 0; i < items.length && i < 40; i++) {
var bRank = items[i].getAttribute("rank");
} 
```

//想添加代码

我想过滤所有大于 0 的数据等级。我只想在这个地方添加过滤器，这样我的其余代码就不会改变。那么我如何过滤项目变量并在其他变量中获取过滤器值。所以循环不会生效。我可以在 for 循环中更改变量的名称。

请为此建议我任何想法。

**第一次编辑**

```
xmlDoc = xmlhttp.responseXML;
        var items1 = xmlDoc.getElementsByTagName("Item");

        var items = $(items1).filter('Item').each(function () {
            var bRank = $(this).attr('rank');
            var tempRank = bRank.replace("0000", "").replace(".", "");
            if (tempRank > 0)
                return this;
        });

alert(items.length);
        alert(items1.length); 
```

两个警报的答案都是 3。

但是对于第一个警报 1 和第二个警报 3，答案应该是这样的。

但我得到相同的响应每个警报。请检查并告诉我您的建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:36:14.393

尝试这个，

**[现场演示](http://jsfiddle.net/rajaadil/H9CQm/)**

```
var items = $('item').filter(function(){
  if(parseFloat($(this).attr('rank')) > 0)
      return this;
});

for (i = 0; i < items.length && i < 40; i++) {
   var bRank = items[i].getAttribute("rank");
} 
```

您需要将 xml 添加到 DOM 以在 xml 上应用过滤器。之后，您可以将其删除。

**[现场演示](http://jsfiddle.net/rajaadil/H9CQm/5/)**

```
$('#div1').html(xmlDoc); 
var items = $('#div1 item').filter(function(){
  if(parseFloat($(this).attr('rank')) > 0)
      return this;
});
$('#div1').remove();

for (i = 0; i < items.length && i < 40; i++) {
   var bRank = items[i].getAttribute("rank");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T09:34:45.873

```
var filteredArray = [];

for (i = 0; i < items.length && i < 40; i++) {
  if(parseFloat(items[i].getAttribute("rank"), 10) > 0) {
    filteredArray.push(items[i]);
  }
} 
```

`filteredArray`然后将包含所有带有`rank > 0`.

# iphone - 设备选择了错误的视网膜图像

> ID：12987101
> 
> 赞同：2
> 
> 时间：2012-10-20T09:30:18.877
> 
> 标签：iphone, objective-c, ios, uiimage

我在 iPhone 5 上显示背景图像时遇到问题。我在项目中添加了 3 个图像。第一个被命名为`main_background.png`第二个是`main_background@2x.png`，第三个是`main_background-586h@2x.png`。在 init 方法中，我将图像分配给背景，如下所示：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self)
    {
        self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"main_background"]];
    }
    return self;
} 
```

我在 iPhone 5 上运行该应用程序，它选择了 @2x 图像。它开始在 y 轴上重复它。我做错了什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T09:37:03.413

你需要自己处理这个。使用后缀`-586h@2x`仅适用于启动映像。

# c++ - 删除多维矩阵时出错

> ID：12987106
> 
> 赞同：0
> 
> 时间：2012-10-20T09:32:33.787
> 
> 标签：c++, matrix, new-operator, glibc, delete-operator

使用此析构函数删除多维矩阵时：

```
matrix::~matrix(){
     int i;
     for(i=0;i<n;i++){
         delete[] user_matrix[i];}
     delete[] user_matrix;} 
```

我恢复了这个错误：

```
*** glibc detected *** ./a.out: free(): invalid pointer: 0x00007fdb33067778 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7eb96)[0x7fdb32d2db96]
./a.out[0x40157c]
./a.out[0x40172b]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7fdb32cd076d]
./a.out[0x400b09] 
```

其次是“内存映射”。当我通过 valgrind 运行它时，它表明操作员过载时出现错误`*`：

```
 matrix matrix::operator* (matrix param) {
  //n is the size of the square matrix
  if(n!=param.n){
    //returns an empty matrix if they are not of equal size
    matrix blah;
    return blah;}
  //initiates a nxn matrix that is empty
  matrix temp(n,0);
  temp.user_matrix=matrix_mult(user_matrix,param.user_matrix);
  return temp;} 
```

这适合被调用的析构函数，也与析构函数注释掉它运行直到计算机内存不足或计算足够小并完成。

```
#include"matrix.h"
using namespace std;

matrix::matrix(int n1,int initiate){
  srand(3534.34535);
  n=n1;
  //float** user_matrix
  user_matrix=new float* [n];
  int i;
  for(i=0;i<n;i++){
    user_matrix[i]=new float [n];}

  if(initiate==1){

  int j;
  for(i=0;i<n;i++){

    for(j=0;j<n;j++){

      cout<<"please ["<<i<<"]["<<j<<"]"<<endl;

      cin>>user_matrix[j][i];}
  }
  }else if(initiate==2){
    user_matrix=random_matrix(n);}

}

float** matrix::inverse(){
  int i,k;
  float sub_det,detin;

  detin=det();

  if(detin==0){cout<<"uninvertable"<<endl;};

  float** inverse = new float* [n];
  for(i=0;i<n;i++){
  inverse[i]=new float [n];}

  float invertdet=1.0/detin;

  for(i=0;i<n;i++){
    for(k=0;k<n;k++){
      inverse[k][i]=invertdet*pow(-1,i+k)*determinant(sub_matrix(user_matrix,i,k,n),n-1);
    }
  }

  return inverse;}  

void matrix::display(){
  //cout<<"lol"<<endl<<n<<endl;
  int i,j;
  cout.precision(5);
  for(j=0;j<n;j++){
    cout<<"|";
    for(i=0;i<n;i++){

      cout<<user_matrix[i][j]<<"   ";};cout<<"|";
    cout<<endl<<endl;}
  cout<<endl<<endl;
}

float matrix::determinant(float** matrix,int n1){
  if(n1==1){return matrix[0][0];}
  int i;
  float det1=0;
  i=0;
  for(i=0;i<n1;i++){    
    float** temp_matrix=sub_matrix(matrix,i,0,n1);
    det1 = det1 + pow(-1.0,i)*matrix[i][0]*determinant(temp_matrix,n1-1);
    int j=0;
    for(j=0;j<n1-1;j++){delete[] temp_matrix[j];}
    delete[] temp_matrix;
  }
  return det1;}

float matrix::det(){return determinant(user_matrix,n);}

float** matrix::sub_matrix(float** matrix,int colum,int row,int n){
  float **sub_matrix=new float *[n-1];
  int iter;

  for(iter=0;iter<(n-1);iter++){
    sub_matrix[iter]=new float [n-1];}
  int iter2;
  int placeholder1,placeholder2;

  placeholder1=placeholder2=0;

  for(iter=0;iter<n;iter++){

    if(iter==colum){continue;}
    placeholder2=0;
    for(iter2=0;iter2<n;iter2++){
      if(iter2==row){continue;}
      sub_matrix[placeholder1][placeholder2]=matrix[iter][iter2];
      placeholder2++;
    }
    placeholder1++;

  }

  return sub_matrix;}

float** matrix::random_matrix(int n){

  int i,j;
  float** temp_mat=new float* [n];
  for(i=0;i<n;i++){
    temp_mat[i]=new float [n];}

  for(i=0;i<n;i++){
    for(j=0;j<n;j++){
      temp_mat[i][j]=rand()%10 +1;}
  }
  return temp_mat;}

float** matrix::matrix_mult(float** matrix1,float** matrix2){
  int i,j,k;
  float subresult;
  float** ret_mat;
  ret_mat=new float* [n];
  for(i=0;i<n;i++){
    ret_mat[i]=new float [n];}
  for(i=0;i<n;i++){
    for(j=0;j<n;j++){

      for(k=0;k<n;k++){
    subresult=subresult + matrix1[k][i]*matrix2[j][k];
      }
      ret_mat[i][j]=subresult;}
  }
  return ret_mat;}
matrix::~matrix(){
     int i;for(i=0;i<n;i++){delete[] user_matrix[i];};delete[] user_matrix;}

matrix matrix::operator* (matrix param) {
  if(n!=param.n){
    matrix blah;
    return blah;}

  matrix temp(n,0);
  temp.user_matrix=matrix_mult(user_matrix,param.user_matrix);
  return temp;}

int main(){
  int i;
  /*for(i=1;i<20;i++){
  matrix m1(i,2);
  cout<<i<<" "<<m1.det()<<endl;}*/
  matrix m1(16,2),m2(16,2),m3(16,0);
  for(i=0;i<100000;i++){m3=m1*m2;}

return 0;} 
```

没有非错误导致功能的代码。

```
#include"matrix.h"
using namespace std;

matrix::matrix(int n1,int initiate){
  srand(3534.34535);
  n=n1;
  //float** user_matrix
  user_matrix=new float* [n];
  int i;
  for(i=0;i<n;i++){
    user_matrix[i]=new float [n];}

  if(initiate==1){

  int j;
  for(i=0;i<n;i++){

    for(j=0;j<n;j++){

      cout<<"please ["<<i<<"]["<<j<<"]"<<endl;

      cin>>user_matrix[j][i];}
  }
  }else if(initiate==2){
    user_matrix=random_matrix(n);}

}

float** matrix::random_matrix(int n){

  int i,j;
  float** temp_mat=new float* [n];
  for(i=0;i<n;i++){
    temp_mat[i]=new float [n];}

  for(i=0;i<n;i++){
    for(j=0;j<n;j++){
      temp_mat[i][j]=rand()%10 +1;}
  }
  return temp_mat;}

float** matrix::matrix_mult(float** matrix1,float** matrix2){
  int i,j,k;
  float subresult;
  float** ret_mat;
  ret_mat=new float* [n];
  for(i=0;i<n;i++){
    ret_mat[i]=new float [n];}
  for(i=0;i<n;i++){
    for(j=0;j<n;j++){

      for(k=0;k<n;k++){
    subresult=subresult + matrix1[k][i]*matrix2[j][k];
      }
      ret_mat[i][j]=subresult;}
  }
  return ret_mat;}
matrix::~matrix(){
     int i;for(i=0;i<n;i++){delete[] user_matrix[i];};delete[] user_matrix;}

matrix matrix::operator* (matrix param) {
  if(n!=param.n){
    matrix blah;
    return blah;}

  matrix temp(n,0);
  temp.user_matrix=matrix_mult(user_matrix,param.user_matrix);
  return temp;}

matrix & matrix::operator= (const matrix & param)
{
  int i,j;
  float** new_array=new float* [param.n];
  for(i=0;i<param.n;i++){
    new_array[i]=new float [param.n];}
  for(i=0;i<param.n;i++){
    for(j=0;j<param.n;j++){
      new_array[i][j]=param.user_matrix[i][j];}
  }

  for(i=0;i<param.n;i++){
    delete[] user_matrix[i];}
  delete[] user_matrix;
  user_matrix=new_array;
  n=param.n;
  return *this;

}

int main(){
  int i;
  matrix m1(16,2),m2(16,2),m3(16,0);
  for(i=0;i<100000;i++){m3=m1*m2;}

return 0;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:53:16.307

当您有一个分配内存的对象时，只需要注意该对象的复制方式。您需要定义一个复制构造函数和一个赋值运算符，根据您的对象分配的内存来做正确的事情。否则，当您删除对象时会出错，通常是因为您最终删除了两次相同的内存。

您似乎没有定义复制构造函数或赋值运算符。定义析构函数时，几乎总是需要定义复制构造函数和赋值运算符。这被称为“三法则”。您可以在此处查看有关如何执行此操作的一些指南（或者只是阅读一本好的 C++ 书籍）。

[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T09:52:15.767

在没有看到更多代码的情况下，我只能猜测您可能

*   没有适当的复制构造函数，因此 user_matrix 指针被复制，或者
*   默认构造函数不会初始化成员 user_matrix，或者
*   matrix_mult 返回一个无效的指针。

但至少有一件事是错的。temp.user_matrix 在 temp.user_matrix=... 之前被删除

# ruby-on-rails - HAML 错误 - 2 个空格用于缩进

> ID：12987108
> 
> 赞同：0
> 
> 时间：2012-10-20T09:32:49.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml

在站点中使用 HAML 和分区

显示.html.haml

```
%ul
  =render :partial => "layouts/brand", :collection => @main_foreign_brands, :as => :brand 
```

布局/_brand.html.haml

```
%li=link_to brand.name, brand.url 
```

但我有一个错误：显示 /my_site/app/views/mains/show.html.haml 其中第 11 行提出：

缩进不一致：缩进使用了 2 个空格，但文档的其余部分使用 4 个空格缩进。

怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T09:39:06.937

您需要确保不要混合使用制表符和空格进行缩进。如果您更改编辑器配置或粘贴来自其他来源的文本，则可能会发生这种情况。许多编辑器提供将空格转换为制表符的命令，反之亦然。尝试在您的编辑器中找到它。

在 Sublime Text 2 中，您可以使用右下角的缩进菜单来执行此操作，它有选项说：“将缩进转换为空格”和“将缩进转换为制表符”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T12:24:55.713

Jesper 的回答足以让您修复代码。如果您对此仍有疑问，[可以使用此链接](http://html2haml.heroku.com/)将 html 转换为 haml。使用 haml 时使用 sublime2 或 notepad++ :)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-20T12:45:19.993

%ul= 渲染 :partial => "布局/品牌", :collection => @main_russian_brands, :as => :brand

这是工作

# google-chrome - 在 chrome 中加载/重新加载页面时边框不透明度转换失败

> ID：12987110
> 
> 赞同：2
> 
> 时间：2012-10-20T09:34:16.657
> 
> 标签：google-chrome, css, border, opacity, css-transitions

我在 web 和 stackoverflow 上搜索了这个问题，但我似乎没有找到解决我的问题的方法。我尝试这样做，因此当您将鼠标悬停在列表项上时，会出现一个从 0 到 100% 不透明度的底部边框。但是当我加载/重新加载页面时，我的列表项下会出现一个边框并立即被删除。这里有几张图片来说明我的意思：

1）加载/重新加载页面（显示边框） ![重新加载时显示边框](../Images/847961e6d11b29b2f428f20fab22af8a.png)

2）边界消失（它实际上应该像这样开始！） ![就像第一次加载时一样](../Images/bfd168c8abc9d5eb24fa10f499fcfa6f.png)

3) 悬停时（过渡完成后） ![悬停时](../Images/34c97eb23da21df4195b8b8fd240fd54.png)

4) 这是我目前正在开发[的网站的链接。](http://student.devine.be/nicholas.olivier/nchls)铬版本：22.0.1229.94

这里是我使用的 html 和 css：

**一）HTML**

```
 <ul id="menu">
            <li><a href="index.html#">home</a></li>
            <li><a href="index.html#">contact</a></li>
            <li><a href="index.html#">find me</a></li>
            <li><a href="index.html#">downloads</a></li>
        </ul> 
```

**二）CSS**

```
#menu li+li:before
{
    content: '//';
    color:#e27c18;
    font-size:1.2em;
    margin-right:10px;
}

#menu li a
{
    border-bottom:1px solid rgba(226, 124, 24, 0);
    -webkit-transition:border-bottom-color 300ms ease-in 200ms;
    -moz-transition:border-bottom-color 300ms ease-in 200ms;
    -o-transition:border-bottom-color 300ms ease-in 200ms;
    transition:border-bottom-color 300ms ease-in 200ms;
}
#menu li a:hover
{
    border-bottom:1px solid #e27c18;
    border-bottom:1px solid rgba(226, 124, 24, 1);
    -webkit-transition:border-bottom 300ms ease-in 200ms;
    -moz-transition:border-bottom 300ms ease-in 200ms;
    -o-transition:border-bottom 300ms ease-in 200ms;
    transition:border-bottom 300ms ease-in 200ms;
} 
```

现在我想要的是，当您重新加载或加载页面时，没有带有正确过渡的可见边框（这是过渡正确反应的唯一方式）。

**编辑：我注意到只有少数人有这个问题，这使得修复这个错误变得更加困难：/。**

# mysql - 针对无法实时发生的繁重工作负载的策略？（Webapp、用户匹配、缓存）

> ID：12987113
> 
> 赞同：0
> 
> 时间：2012-10-20T09:34:48.830
> 
> 标签：mysql, sql, ruby-on-rails, postgresql, nosql

我目前正在用 Ruby on Rails 编写一个 webapp，它根据用户回答的问题来匹配用户。然后他们可以搜索一系列用户，系统将搜索者与该范围内的每个用户进行匹配，并以有序列表的形式返回它们，因此最高匹配首先出现。

问题是这个操作的工作量非常大，我认为我不能即时完成。我已经将我的 SQL 优化到最大，并在一个 SQL 查询中完全实现了我的匹配算法，计算 2 个用户（本地机器）之间的匹配百分比大约需要 8.2 毫秒。问题是当有 5000 个用户被搜索时，Rails 获取这个用户数组，遍历他们并执行这个查询 5000 次，这在我的本地机器上大约需要 50 秒。如果我转移到 PostgresSQL 并将其设为存储过程，我可以减少这种情况吗？

我现在的问题是，有哪些方法，例如后台进程、缓存，以便当用户按下搜索时，结果显示只需几秒钟？或者这不可能在这么大的范围内，我必须预先计算匹配并将它们存储在 NoSQL 或类似的东西中，因为对于 50k 用户来说已经有 25 亿行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:56:30.633

1.  一种方法是尝试有一个 SQL 查询。现在您正在为每个用户执行一个查询，但我的意思是一个查询。因此，当您遍历用户时，一个查询将完成您正在做的工作。

2.  您可以做一个数据库缓存，并每天为每个用户存储结果。为此，您不需要 NoSQL 数据存储，只需一个 cron 作业即可将结果写入数据库。

3.  您还可以将结果存储在内存缓存中。内存缓存将在您的 Web 应用程序的 Rails 实例之间共享，因此所有实例都可以使用一份副本。我将通过一种检查过期条件的方法来访问结果，以测试它是否需要刷新数据。

# asp.net-mvc-3 - 在 MVC3 asp.net 中实现 CustomRoleProvider 并使用角色进行授权

> ID：12987115
> 
> 赞同：0
> 
> 时间：2012-10-20T09:35:04.870
> 
> 标签：asp.net-mvc-3, authorization, roleprovider

我一直在学习如何从一些教程中实现 CustomRoleProvider 并设法实现了以下两种主要方法

```
 public override string[] GetRolesForUser(string userName)
    {
        string connectionString =
          ConfigurationManager.ConnectionStrings["myDb"].ConnectionString;
        DataContext context = new DataContext(connectionString);
        Table<UserObj> usersTable = context.GetTable<UserObj>();
        UserObj userObj = usersTable.SingleOrDefault(u => u.UserName == userName);
        string roleId = userObj.UserRoleID;

        if (roleId != null)
            return roleId.Select(c => c.ToString()).ToArray();
        else
            return new string[] { }; 

    }

    public override bool IsUserInRole(string userName, string roleName)
    {
        string connectionString =
         ConfigurationManager.ConnectionStrings["myDb"].ConnectionString;
        DataContext context = new DataContext(connectionString);
        Table<UserObj> usersTable = context.GetTable<UserObj>();
        UserObj userObj = usersTable.SingleOrDefault(u => u.UserName == userName);

        if (userObj != null)
        {
            string roleId = userObj.UserRoleID;
            if (roleId.Equals(roleName))
                return true;
        }
       return false;
    } 
```

然后我在控制器的索引方法上添加了 [Authorize(Roles = "admin")]，我希望只有管理员可以访问。当我尝试访问该页面时，它似乎执行了一个限制，例如，如果我输入了 url：

```
 http://localhost:60353/module 
```

..它把我重定向到

```
 http://localhost:60353/Account/LogOn?ReturnUrl=%2fmodule 
```

但是，角色似乎没有被检查。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T06:13:07.173

我也面临同样的问题，但我可以调用 CustomProvider 方法：

> IsUserInRoles()

明确地，但它似乎是正确的，因为可访问性没有改变......它总是只重定向到登录屏幕......

# xcode - 从另一个类缩放 MkMapView

> ID：12987120
> 
> 赞同：0
> 
> 时间：2012-10-20T09:35:33.220
> 
> 标签：xcode, uitableview, mkmapview

我有一个在 xib 中设计的带有 UITableView *myTable 和 MKMapView *myMap 的 ViewController，但是表委托/数据源和地图委托在另一个名为 SubClass 的类中。当我在 ViewController 中按下一个按钮时，子类从 xml 远程文件中解析表格单元的纬度和经度，现在我想在每次选择 myTable 的行时将 myMap 缩放到这个坐标：嗯，我找不到方法从子类调用这个缩放。这是，简化，我的代码：

视图控制器.h

```
// ViewController.h

#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import "SubClass.h"

@interface ViewController : UIViewController {
    IBOutlet UITableView *myTable;
    IBOutlet MKMapView *myMap;
    SubClass *subClassIstance;
}

- (void)buttonPressed:(id)sender
@property (nonatomic, retain) IBOutlet MKMapView *myMap; 
```

视图控制器.m

```
// in ViewController.m

- (void)buttonPressed:(id)sender {
    subClassIstance = [[SubClass alloc] init];
    myTable.delegate = SubClass;
    myTable.dataSource = SubClass;
    [myTable reloadData];

    subClassIstance = [[SubClass alloc] loadMap:myMap];
} 
```

子类.h

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface SubClass : NSObject <UITableViewDataSource, UITableViewDelegate, MKMapViewDelegate> {
}

- (void)loadValues;
- (id)loadMap:(MKMapView *)mapView;
- (id)zoomTheMap:(NSMutableString *)string1 :(NSMutableString *)string2 :(MKMapView *)mapView; // IS IT RIGHT??? 
```

子类.m

```
- (id)init{
    self = [super init];
 if ( self != nil ) {
     [self loadValues];
 }
    return self;
}

- (void)loadValues {

  // CODE TO PARSE VALUES OF LONGITUDE AND LATITUDE TO PASS IN THE TABLE CELLS
 latitudeFromLoadValues = // NSMutableString parsed value from a xml remote file
 longitudeFromLoadValues = // NSMutableStringparsed value from a xml remote file
}

- (id)loadMap:(MKMapView *)mapView
{
    if (self) {
    mapView.delegate = self; // CODE TO LOAD ANNOTATIONS AND OTHER STUFF. IT WORKS!
    }
    return self;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
latitudeFromLoadValues = [dataParsed objectAtIndex:indexPath.row];
longitudeFromLoadValues = [data2Parsed objectAtIndex:indexPath.row];
[self zoomTheMap:latitudeFromLoadValues :longitudefromLoadValues :???]; // IS IT CORRECT? WHAT IS THE RIGHT *MKMAPVIEW?
}

- (id)zoomTheMap:(NSMutableString *)string1 :(NSMutableString *)string2 :(MKMapView *)mapView {

    NSLog(@"%@",string1);
    NSLog(@"%@",string2);

    MKCoordinateRegion region;
    region.center.latitude = [string1 floatValue];
    region.center.longitude = [string2 floatValue];
    region.span.latitudeDelta = 2.0;
    region.span.longitudeDelta = 2.0;

    // I KNOW, I HAVE TO CALL myMap from ViewController! But with an istance?

    mapView.delegate = self;
    mapView.region = region;    

    return self;
} 
```

好吧，其余的代码工作！我可以看到 ViewController 中的 *myMap 加载了在 SubClass 中声明的一些注释，并且 *myTable 加载了填充有在 SubClass 中解析的纬度和经度的单元格；我还可以看到在 string1 和 string2 中传递的正确经度和纬度，但是当我选择单个表格单元格时，我没有看到 myMap 缩放，我认为我使用了错误的方法。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:30:53.860

`loadMap`不应该 return `self`，只有 init 方法应该这样做。在`buttonPressed`你分配一个新的子类，对它做一些事情，然后分配另一个子类并调用它的`loadMap`函数。最后一行应该是`[subClassIstance loadMap:myMap]`，但您还需要在每次按下该按钮时重新考虑分配一个新的子类。

我认为你真的走错了路。为什么需要一个子类（BTW 的名字很糟糕，它没有说明它的用途）？它扩展了什么类？如果 ViewController 有 MKMapView，它通常是向地图发出命令的那个。我可以理解您对 tableview 有一个单独的数据源，但其余的没有。如果您使 VC 成为自己的表和映射委托，您将简化很多事情。

如果你真的想在你的代码中有一个子类，那么你应该在你在 buttonPressed 的第一行创建的实例上调用 loadMap

```
- (void)buttonPressed:(id)sender {
    subClassIstance = [[SubClass alloc] init];
    myTable.delegate = SubClass;
    myTable.dataSource = SubClass;
    [myTable reloadData];

    [subClassIstance loadMap:myMap];
} 
```

你的 loadMap 看起来像

```
- (void)loadMap:(MKMapView *)mapView
{
    mapView.delegate = self; 
} 
```

但是，如果这就是 loadMap 的全部内容，您是否不需要为此功能，您可以让 buttonPressed 完成所有操作。

```
- (void)buttonPressed:(id)sender {
    subClassIstance = [[SubClass alloc] init];
    myTable.delegate = SubClass;
    myTable.dataSource = SubClass;
    [myTable reloadData];

    myMap.delegate = subClassIstance;
} 
```

初始化函数示例：

```
- (id)initiWithMapView: (MKMapView)* mapView
{
    self = [super init];
    if(self)
    {
       theMap = mapView;
       theMap.delegate = self;
       [self loadValues];
       ....
    }
    return self;
 } 
```

如果您使用它，您将不必一直设置地图委托或返回 self ，并且您可以在每个函数中使用 theMap （如您的答案中所声明的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:44:23.143

好吧，对于那些感兴趣的人，我找到了一个简单的解决方案：首先，我在我的 SubClass.h 中定义了一个通用的 MKMapView *theMap，现在看起来像：

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface SubClass : NSObject <UITableViewDataSource, UITableViewDelegate, 

MKMapViewDelegate> {
        MKMapView *theMap // NEW CODE!!!
    }

- (void)loadValues;
- (id)loadMap:(MKMapView *)mapView;
- (id)zoomTheMap:(NSMutableString *)string1 :(NSMutableString *)string2 :(MKMapView *)mapView; 
```

在 loadMap 方法中，我将 *theMap 与 VC 中的 SubClassIstance 调用的 mapView 进行了比较（我想要缩放的 *myMap），所以现在我们有了：

```
- (id)loadMap:(MKMapView *)mapView
{
    if (self) {
    mapView.delegate = self; 
    theMap = mapView; // NEW CODE !!!

    // CODE TO LOAD ANNOTATIONS AND OTHER STUFF. IT WORKS!
    }
    return self;
} 
```

在 didSelectRowAtIndexPath 我已将 *theMap 作为 zoomTheMap 方法的 mapView 参数传递：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
latitudeFromLoadValues = [dataParsed objectAtIndex:indexPath.row];
longitudeFromLoadValues = [data2Parsed objectAtIndex:indexPath.row];
[self zoomTheMap:latitudeFromLoadValues :longitudefromLoadValues :theMap]; // NEW CODE !!!
} 
```

zoomTheMap 方法没有改变，现在，“神奇地”，每次我按下表格的一行时，在 VC xib 中设计的 *myMap（但在 SubClass 中有委托）都会放大存储在单元格中的坐标：

```
- (id)zoomTheMap:(NSMutableString *)string1 :(NSMutableString *)string2 :(MKMapView *)mapView {

    MKCoordinateRegion region;
    region.center.latitude = [string1 floatValue];
    region.center.longitude = [string2 floatValue];
    region.span.latitudeDelta = 2.0;
    region.span.longitudeDelta = 2.0;

    mapView.delegate = self; // here mapView is *theMap passed in didSelectRowAtIndexPath, AKA original mapView istance used to delegate *myMap in VC
    [mapView setRegion:region animated:YES];   

    return self;
} 
```

也许它不是一种“优雅”的方式，但它现在有效！;=)

# android - Android片段中的EditText值不刷新

> ID：12987121
> 
> 赞同：11
> 
> 时间：2012-10-20T09:35:44.150
> 
> 标签：android, android-edittext, android-viewpager, fragment

我正在使用`Viewpager`3 之间切换`fragments`，一切正常，除了第二个选项卡（或`fragment`）的刷新。在这个选项卡中，我有一张图片、一些静态`Textviews`、一些动态`TextViews`和一些`EditText`字段。

每次选择第二个选项卡时，都会调用`setText()`所有动态字段。TextView 组件和微调器正在刷新和更新其内容，但 EditText 元素不会。我不明白为什么这些字段没有更新。标签更改后，我调用`notifiyDataSetChanged()`. 每次我更改标签时`TabsAdapter`它都会调用。`onViewCreated()`在`onViewCreated()`第二个片段中，我正在更改元素的内容。

这是我的片段的代码：

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    hA = (HelloAndroidActivity)this.getSherlockActivity();
    appState = ((TestApplication)this.getSherlockActivity().getApplicationContext());
    final PersistenceHelper pH = new PersistenceHelper(appState);
    m = pH.readMitarbeiter(toDisplay);

     // Inflate the layout for this fragment
    v = inflater.inflate(R.layout.detailfragment, container, false);

    if(m==null) {           
        //If Mitarbeiter is empty
        pH.closeDB();
        return v;
    }

    //Inflating Elements

    employeeName = (TextView)v.findViewById(R.id.employee_name);
    cDate = (TextView)v.findViewById(R.id.department);
    currentPlace = (TextView)v.findViewById(R.id.place_label);

    comment_text = (EditText)v.findViewById(R.id.comment_text);
    reachable = (EditText)v.findViewById(R.id.reachable_text);
    state = (Spinner)v.findViewById(R.id.spinner_state);
    durchwahl = (EditText)v.findViewById(R.id.durchwahl);
    department = (EditText)v.findViewById(R.id.department_edit);
    email = (EditText)v.findViewById(R.id.email_edit);

    img = (ImageView)v.findViewById(R.id.userPic);

    changeData = (Button)v.findViewById(R.id.changeButton);

    //Setting Elements

    employeeName.setText(m.getL_name());
    currentPlace.setText(m.getStatus());    

    comment_text.setText(m.getBemerkung());

    reachable.setText(m.getErreichbar());       

    email.setText(m.getS_name()+"");        
    durchwahl.setText(m.getDurchwahl()+"",TextView.BufferType.EDITABLE);

    department.setText(m.getFunktion(),TextView.BufferType.NORMAL);

    //Spinner

    String[] values = { "Anwesend", "Mittagspause" , "Ausser Haus" , "Dienstreise", "Krankenstand" ,"Zeitausgleich", "Urlaub","Abwesend" };
    ArrayAdapter spinnerArrayAdapter = new ArrayAdapter(this.getSherlockActivity(), android.R.layout.simple_spinner_item,values);
    state.setAdapter(spinnerArrayAdapter);

    state.setSelection(StateMapper.returnState(m.getStatus()));

    //Image
    //.......
    return v;
} 
```

正如我之前提到的，我的 Image、TextView 和 Spinner 元素正在刷新它们的内容。我还检查了所有变量的内容，一切似乎都很好，除了这些 EditText 元素。如果我将 EditText 元素转换为 TextView，则内容会发生变化（在代码中但不在 GUI 中）。让我绝望的是，EditText 在我第一次设置值时会刷新。

有谁知道，我如何能够刷新我的`EditText`领域的内容？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-20T09:56:11.817

我不确定，但尝试`onResume()`将您的文本设置为恢复状态。

或尝试

选项卡更改时的 Intent.FLAG_ACTIVITY_CLEAR_TOP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:30:29.843

您还可以尝试向消息队列发布一个可运行对象，以便在渲染后更新 EditText（在 MonoDroid/C# 中，请参阅[How to run a Runnable thread in Android?](https://stackoverflow.com/questions/1921514/how-to-run-a-runnable-thread-in-android) for java）：

```
public override View OnCreateView(LayoutInflater inflater, ViewGroup container, Bundle bundle)
{
    EditText et = FindViewById<EditText>(...);

    et.Post(() => { et.Text = "content"; });
} 
```

此外，如果您有一个 TextChanged 事件处理程序（例如在文本更改时显示保存图标/按钮），也将其发布在可运行文件中，并在 et.Text 分配之后执行。否则，TextChanged 事件将在分配初始 et.Text 内容时触发，从而在 USER 未更改任何内容时触发 TextChanged 事件（即，显示保存按钮）：

```
public override View OnCreateView(LayoutInflater inflater, ViewGroup container, Bundle bundle)
{
    EditText et = FindViewById<EditText>(...);

    et.Post(() => 
        { 
            et.Text = "content"; 
            et.TextChanged += TextChangedHandler;
        });
}

private void TextChangedHandler(object o, EventArgs args)
{
    ShowSaveButton();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-29T12:53:23.883

我在 2021 年遇到了这个问题。我只需要在设置文本之前再次调用 findViewById。

```
 myEditText = (EditText)view.findViewById(R.id.myEditText);
    myEditText.setText(String.valueOf(newValue)); 
```

# vb.net - 如何将 microsoft.visualbasic.compatibility.vb6.format 的文化与 application.currentCulture 同步？

> ID：12987123
> 
> 赞同：1
> 
> 时间：2012-10-20T09:35:59.090
> 
> 标签：vb.net, compatibility

上下文：用VB.NET编写的程序，在VisualStudio2012中开发/维护，针对框架v3.5。

几年前，该程序在 VB(6) 中，我们将其“翻译”为 VB.NET。由于大部分是自动化的转换，我们在代码中仍有相当多的地方处理文本表示的双精度（和日期/...）格式，如下所示：

```
Dim sValue As String = Microsoft.VisualBasic.Compatibility.VB6.Format(dblValue, "0.00") 
```

相反，当我们需要从这样的字符串中提取 Double 值时，我们使用

```
Dim dblValue As Double = CDbl(sValue) 
```

CDbl“监听”应用程序线程的 System.Globalization.CultureInfo.CurrentCulture，当您在代码运行期间通过控制面板更改区域设置时，这不会改变。

但是，在代码中执行的 VB6.Format 开始符合应用程序的 currentCulture（如您所料），但显然（我不知道这一点，但偶然发现）在区域设置中收听 CHANGES 和立即响应您在程序执行期间所做的任何更改。这意味着 CDbl() 和 VB6.Format() 变得相互不一致。

当然，在程序执行期间更改区域设置很麻烦，而且，如果您希望支持它，您可以通过捕获 SystemEvents.UserPreferenceChanged（和 -Changing）事件来管理它并根据它们的发生采取行动。

然而，关于文化/区域设置的变化，VB6.FORMAT 与“正常”转换为 CDbl(someString) 的“不同行为”让我觉得不受欢迎。最好让 VB6.Format 始终遵守应用程序/线程 CurrentCulture，然后您可以选择您希望代码如何响应用户偏好更改。此外，我想对这个问题有更多的了解。

因此，我的问题是：有没有办法编译/安排/...诸如 (Microsoft.VisualBasic.Compatibility.)VB6.Format 监听应用程序-CurrentCulture 并且不响应 - 未经“我们的同意” -更改区域设置？

附加信息：该程序是用 - 对于 visualbasic 的东西 - 项目 (VisualStudio2012) 中的一个引用来编译的：C:\Windows\Microsoft.Net\Framework\V2.0.50727\Microsoft.VisualBasic.Compatibility.dll （和.. .Data.dll）。

欢迎任何“教育”信息或建议。这个问题并没有在我们的程序中造成任何真正的问题，但我觉得我们应该/可能有更好的理解，甚至可能有方法让事情变得更健壮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:23:28.703

VB6 Format() 函数实际上是一个操作系统函数。VarFormat()，oleaut32.dll 导出的函数。背景回答[在这里](https://stackoverflow.com/questions/4072490/is-there-a-way-to-programmatically-convert-vb6-formatting-strings-to-net-format/4072859#4072859)。MSDN 库文章[在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221128%28v=vs.85%29.aspx)。

从 MSDN 文章中可以看出，该功能不允许指定文化或文化特定设置，除了星期几规则。这个功能可以追溯到 1996 年，那时的生活要简单得多。所以你现在看到的很容易解释，它对 .NET Thread.CurrentCulture 设置一无所知。

# php - PHP 如果 IP 或域检测功能

> ID：12987126
> 
> 赞同：7
> 
> 时间：2012-10-20T09:36:20.297
> 
> 标签：php

有没有办法使用 php 来检测字符串是 Ip 还是 Domain，例如下面的示例。

```
$string = "http://192.168.0.0";
$string = "http://example.com"; 
```

因此，如果字符串是 IP，则脚本/函数将执行某些操作，如果它将其检测为域，它将执行其他操作。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T09:41:07.923

您可以像这样简单地测试它：

```
$isIP = (bool)ip2long($_SERVER['HTTP_HOST']); 
```

函数[ip2long](http://php.net/manual/en/function.ip2long.php)将返回`false`主机不是域名等有效 IP 地址。使用`ip2long`函数的好处是它还可以验证提供的 IP 地址。所以例如地址是 4.4.4.756 会给你假的。

因此，要测试给定的字符串，您可以执行以下操作：

```
$string = "http://192.168.0.0";
$parts = parse_url($string);
$isIP = (bool)ip2long($parts['host']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-05T12:01:51.740

您还可以比较 HTTP_HOST 和 SERVER_ADDR。对于 IP v6，您还应该修剪 HTTP_HOST 上的方括号。

```
$isIP = @($_SERVER['SERVER_ADDR'] === trim($_SERVER['HTTP_HOST'], '[]')); 
```

似乎比正则表达式更有效，但不确定 ip2long 方法是否更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T09:45:51.617

您可以使用正则表达式。

在这里您可以找到示例：

[匹配 DNS 主机名或 IP 地址的正则表达式？](https://stackoverflow.com/questions/106179/regular-expression-to-match-hostname-or-ip-address)

代码/正则表达式模式：

```
ValidIpAddressRegex = "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$";

ValidHostnameRegex = "^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$"; 
```

如何在 php 中使用正则表达式：

[php.net 上的预赛手册](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T09:43:08.517

你有关于那个 SO 问题的正则表达式：[Regular expression to match DNS hostname or IP Address?](https://stackoverflow.com/questions/106179/regular-expression-to-match-hostname-or-ip-address)

您将需要使用 PHP 函数：[preg_match](http://php.net/manual/fr/function.preg-match.php)

# php - PHP preg_replace 文本仅在 href 属性中

> ID：12987128
> 
> 赞同：0
> 
> 时间：2012-10-20T09:36:28.913
> 
> 标签：php, regex, preg-replace

```
<a href="http://www.example.com/foo/bar/" title="foo">
    <img src="http://www.example.com/foo/bar/" alt="foo" />
</a> 
```

如何仅在 href 属性中preg_replace 单词**foo ？**

注意：页面上有多个链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:38:17.700

你可以这样做：

```
$str = preg_replace('/(href="[^"]*)foo/', '$1replacement', $str); 
```

或者，您可以使用lookbehind：

```
$str = preg_replace('/(?<=href="[^"]*)foo/', 'replacement', $str); 
```

请注意，这仅在您的属性中没有`'`-delimited 属性并且没有转义时才有效`"`。

这就是为什么您应该[真正](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)考虑使用 DOM 解析器，而不是使用正则表达式来操作 HTML。

**更新：**这是一个使用解析器的正确实现（我刚刚选择了 PHP Simple HTML DOM Parser，因为它是第一个出现在 Google 上的解析器）：

```
require "simple_html_dom.php";

$html = file_get_html($filename);
foreach($html->find('a') as $element)
{
    $element->href = preg_replace('/foo/', 'replacement', $element->href);
} 
```

现在`echo`ing`$html`或将其保存到文件中，将包含正确替换的 HTML。（使用 DOM 解析器非常简单。）；）

# java - 两个Java类构造的区别

> ID：12987135
> 
> 赞同：1
> 
> 时间：2012-10-20T09:37:05.190
> 
> 标签：java, constructor

> **可能重复：**
> [java中的实例变量初始化](https://stackoverflow.com/questions/1994218/instance-variable-initialization-in-java)
> [什么时候调用构造函数之外的初始化？](https://stackoverflow.com/questions/11810716/when-are-initializations-outside-a-constructor-called)

`A1`和有什么区别`A2`吗？

```
class A1 {
   B b = new B();
   A1() {
   }
}

//and  

class A2 {
   B b;
   A2() {
      b = new B();
   }
} 
```

`B b`如果我实例化`A1`and类，我想知道该类何时进行构造`A2`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:47:06.360

它们之间没有区别。编译器自动将实例变量初始化放入您声明的每个构造函数中，在初始化程序块中。

所以，你的第一种方式，编译后变成：

```
class A1 {
   B b;
   A1() {
      {
         b = new B();
      }
   }
} 
```

但是，第二种方式更具可读性。

简而言之Java一书[-Chapter#3](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_02.htm)：

> 但是，字段声明不是任何方法的一部分，因此它们不能像语句一样执行。相反，Java 编译器会自动生成实例字段初始化代码并将其放入类的一个或多个构造函数中。初始化代码按照它在源代码中出现的顺序插入到构造函数中，这意味着字段初始化器可以使用在它之前声明的字段的初始值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T09:52:53.283

`B b`当您调用 and 的构造函数时，`A1`这两个类都会进行构造`A2`，因为构造函数用于初始化非静态数据成员并且`B b`是数据成员的引用类型。如果你定义

```
class A1{
  static B b=new B();
  A1(){
  }
} 
```

然后它将在类加载时加载。编译器将加载类`B`并在类加载时创建一个实例，`B`否则两者之间没有区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T09:43:38.297

不在您给出的示例中-没有区别。他们都会在对象创建时启动对 B 的引用。

但是，就风格而言，我个人倾向于`A2`.

如果我们对类`A1`进行更多的解包，它就相当于：

```
class A1 {
   B b;

   {
       b = new B();
   }

   A1() {
   }
} 
```

上面未命名的代码块是初始化块，每次创建对象时都会运行的代码块（与调用的构造函数无关，它在构造函数之前运行。）它在语义上等同于将所有在每个构造函数开始时在其中声明，这使我们回到`A2`. 因此，它们是相同的。

# jquery - 使用 jquery 模板的嵌套列表

> ID：12987139
> 
> 赞同：0
> 
> 时间：2012-10-20T09:37:49.803
> 
> 标签：jquery, jquery-templates

我的 jquesy ajax 调用返回这个结果。

```
var clientData = [
     { name: "test1", id: 1, parentid: 0, desc: "test desc1"  },
     { name: "test2", id: 2, parentid: 0, desc: "test desc1"  },
     { name: "test3", id: 3, parentid: 0, desc: "test desc1"  },
     { name: "test1-1", id: 4, parentid: 1, desc: "test desc4"  },
     { name: "test1-2", id: 5, parentid: 1, desc: "test desc5"  },
     { name: "test2-1", id: 6, parentid: 2, desc: "test desc6"  }
 ]; 
```

我想使用 jquery 模板为此数据创建嵌套的 ul li 列表。

像。

*   测试 1（测试说明 1）
    *   测试 1-1（测试 desc4）
    *   测试 1-2（测试 desc5）
*   测试 2（测试 desc2）

    *   测试 2-1（测试 desc6）
*   测试 3（测试 desc3）

谁能帮我写jQuery模板。

代码我使用模板创建 li 元素并将其附加到 ul like....

```
 <script id="menuTemplate_inner" type="text/x-jquery-tmpl">  

       {{if parentid == 0}}
           <li  class="f_level" id="cat_${id}"> 
       {{else}}
            <li  class="inner_level" id="cat_${id}"> 
       {{/if}}    
        ${name} (${desc}) 
       </li>      
</script> 
```

我不知道如何让它嵌套

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:40:50.660

首先，分层模板通常提供分层数据，因此它们可以更自然地调用子模板。下面的示例将更适合您的数据并导致更简单的模板：

```
var clientData = [
    { name: "test1", id: 1, parentid: 0, desc: "test desc1", children: [
        { name: "test1-1", id: 4, parentid: 1, desc: "test desc4" },
        { name: "test1-2", id: 5, parentid: 1, desc: "test desc5" }
    ] },
    { name: "test2", id: 2, parentid: 0, desc: "test desc1", children: [
        { name: "test2-1", id: 6, parentid: 2, desc: "test desc6" }
    ] },
    { name: "test3", id: 3, parentid: 0, desc: "test desc1" }
]; 
```

现在，假设您无法更改正在使用的数据的表示，您确实可以使用单个模板从平面数组构建元素层次结构，主要是因为：

*   模板可以递归调用自己，

*   模板调用可以带参数（与 合并的对象`$item`）。

如果我们将模板视为“常规”函数（毕竟，这正是它被编译成的内容），那么接受一个`parentId`参数并仅渲染与指定父项匹配的项目是有意义的。您已经将`0`（无父项）用于顶级项，这很适合我们，并允许我们以当前项作为新父项递归调用该函数。

让我们从第一次调用开始。我们需要传递顶级父 ID `0`（但我们不会调用它`parentId`以避免与`parentid`数据项中的现有属性混淆）。矛盾的是，我们还必须传递数据数组。这似乎是多余的，因为它已经是[tmpl()](http://api.jquery.com/tmpl/)的第一个参数，但这是因为调用的模板只能看到当前项，而不是原始数组，除非我们显式传递它。生成的代码类似于：

```
$("#menuTemplate_inner").tmpl(clientData, {
    clientData: clientData,  // Pass original array.
    forParent: 0             // Start at top-level.
}).appendTo("ul"); 
```

现在，模板本身。它需要执行三个任务：

*   如果当前项与指定的父项匹配，则呈现当前项，

*   公开适当的类（`f_level`对于顶级，`inner_level`否则），这可以通过[${}](http://api.jquery.com/template-tag-equal/)模板标签和[三元条件运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)来实现，

*   以原始数据数组和当前项为新的父项递归调用自身，通过[{{tmpl}}](http://api.jquery.com/template-tag-tmpl/)模板标签实现。

生成的模板是：

```
<script id="menuTemplate_inner" type="text/x-jquery-tmpl">
    {{if parentid == $item.forParent}}
        <li class="${ parentid ? 'inner_level' : 'f_level' }" id="cat_${id}">
            ${name} (${desc})
        </li>
        <ul>
            {{tmpl($item.clientData, {
                clientData: $item.clientData,
                forParent: id
            }) "#menuTemplate_inner"}}
        </ul>
    {{/if}}
</script> 
```

你可以在[这个 fiddle](http://jsfiddle.net/Sj6gc/)中测试它。

# google-plus - 邀请环聊参与者

> ID：12987140
> 
> 赞同：3
> 
> 时间：2012-10-20T09:38:05.757
> 
> 标签：google-plus, hangout

我正在创建一个基本的环聊 API。是否可以通过 API 本身向我拥有的特定电子邮件发送邀请。

不过，如果我想从环聊页面邀请更多人，我可以邀请。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:05:38.207

环聊或 REST API 都没有邀请组件，但这不会阻止您使用其他方式发送电子邮件并提供环聊的 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T02:42:45.270

我所做的另一个技巧是使用 gapi.hangout.getHangoutUrl() 获取 URL 并将它们发布回您的服务器（或通过 websockets）。然后，您可以创建一个简单的 url 来查看这些“房间”。当然，您可以选择发送这些 url 的方式，因此电子邮件是另一种解决方案。

# java - 如何在多宿主配置中控制源 IP

> ID：12987141
> 
> 赞同：1
> 
> 时间：2012-10-20T09:38:05.163
> 
> 标签：java, sockets, tcp, multihomed

我在一个刀片上运行了 14 个 java 进程。每个进程都绑定到 ProxyServer (F5) 识别的虚拟 IP，因此当外部客户端调用 F5 时，他的调用重定向到 14 个进程之一。

最重要的是，我的进程（14 个中的一个）执行对在不同刀片上运行的另一个应用程序的调用。

**这是一个问题：**如何在 TCP 客户端上使用虚拟 IP 运行的 Java 进程上控制传出 TCP 数据包中的源 IP？换句话说，我正在寻找一种将虚拟 IP 设置为传出 TCP 数据包中的源地址的方法。（默认设置为刀片的物理 IP）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:44:48.363

您可以使用以下 Socket 构造函数：

```
Socket(String remoteHost, int remotePort, InetAddress localAddress, int localPort) 
```

或在创建套接字后使用 Socket.bind() 。

请参阅[http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:14:22.883

暂时忘记语言/库...您为连接套接字定义本地地址和/或本地端口，就像为侦听套接字定义一样。您可以`bind()`将套接字连接到您想要的任何 IP 地址和/或端口。不绑定与绑定到*零*值相同。

当该值为零时，操作系统将为您选择： 对于地址，它将绑定到用于发送到目的地的接口的地址。对于端口，它将选择一个当前未使用的非特权端口 (>1023)。

# php - 重定向到另一个页面

> ID：12987148
> 
> 赞同：0
> 
> 时间：2012-10-20T09:38:40.333
> 
> 标签：php, joomla

我正在使用 joomla 建立一个网站。在此站点中，当用户请求我站点的任何页面时，应将他重定向到免责声明页面。在免责声明页面中存在一个表格。提交电子邮件后，当用户按下提交时验证码，他应该被重定向到先前请求的页面。

那么当用户浏览网站的其他页面时，不应该出现免责声明页面。

如何记住用户输入的请求 url，以便在按下提交时将他重定向到那里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:45:25.490

试试`JURI::current()`它会给你当前的 url。当你重定向到免责声明页面时，将它作为参数添加到 url，而不是在那里使用它。

[更多关于 JURI](http://docs.joomla.org/JURI)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T09:50:56.747

你试过[这个](https://stackoverflow.com/questions/12948109/return-to-previous-page-in-joomla)吗？

```
<?php
  $url = htmlspecialchars($_SERVER['HTTP_REFERER']);
  $this->setRedirect($url);
?> 
```

# high-availability - Windows消息服务的主动-主动高可用性设计？

> ID：12987149
> 
> 赞同：2
> 
> 时间：2012-10-20T09:38:41.603
> 
> 标签：high-availability, failover, nlb, failovercluster

我试图弄清楚设计使用复制数据库的主动-主动集群的最佳方法是什么。对于网络负载平衡和故障转移，我可以使用 Windows NLB。对于数据库，我可以使用 MySQL，它可以开箱即用地进行主主复制。这是简单的部分。

现在我的问题是如何对连接到复制数据库的消息传递服务进行编程。设计它以使两个服务都使用相同的表而不会发生冲突的最佳方法是什么？失败时，来自失败节点的未完成事务必须由另一个节点承担。

以下是消息服务的工作方式。Web 客户端将调用具有收件人和消息的 Web 服务。Web 服务会将消息插入到数据库队列中。当满足特定条件时，将发送消息。这可能会在几秒钟内或几天后发生。

我在互联网上进行了广泛的搜索，但无济于事。有没有人做过类似的事情？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:32:57.763

如果 mysql 不是必需的，我建议使用 nosql 内存优化数据库，例如[http://ravendb.net/](http://ravendb.net/)，它比 mysql 更适合高可用性。只是一个想法。

聊天应用程序通常不需要事务/高度可靠性。

TSQL 更适合以数据可靠性为重点的金融应用程序，对于聊天，您可能最好使用以速度为重点的数据库。

只是我的 2 美分，因为这看起来更像是征求意见。

**编辑**

看起来 raven 支持 ACID 事务，所以更好。

# android - Eclipse 中的 INSTALL_PARSE_FAILED_NO_CERTIFICATES 错误

> ID：12987150
> 
> 赞同：10
> 
> 时间：2012-10-20T09:38:43.410
> 
> 标签：android, eclipse

嗨，我一直在查看与错误 INSTALL_PARSE_FAILED_NO_CERTIFICATES Eclipse 中的错误主题不同的帖子，但我还没有找到原因以及如何解决它。我附上了我的 Eclipse 的屏幕截图，以查看视觉上的想法。

我不知道如何解决这个问题。

在google play上签名申请发布，从那以后，我就报这个错误了，可以吗？我可以？因为如果他们失去了项目......

非常感谢！

[捕捉我的日食](https://i.stack.imgur.com/0sdG1.png)

![重复的 Android 清单](../Images/2eecd32939d4c748fa0f2565b4de4cfb.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T06:20:34.757

首先[使用 jarsigner 签名您的 apk](https://stackoverflow.com/questions/10930331/how-to-sign-an-already-compiled-apk)，然后使用重新安装`adb install -r <apkfile>`（或首先卸载使用适当证书签名的应用程序）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-15T18:07:42.593

对于有这个问题的人...

**选择 V1（jar 签名）而不是 V2（完整的 apk 签名）**

选择 V2 也可能导致此问题。[![在此处输入图像描述](../Images/58368de54ef23bffb2e1c5fffb8d83d6.png)](https://i.stack.imgur.com/IOl5f.jpg)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-03T12:56:57.530

我有同样的错误，并且能够以这种方式修复它：

1.  卸载旧应用程序
2.  清理项目
3.  再次运行并重新安装

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-20T09:43:09.203

如果您在设备上获得了没有证书的旧应用程序并尝试安装带有证书的新应用程序，这将是一个问题。

卸载旧的，然后再试一次。

对于您的下一个问题，请从和`eclipse.ini`更改参数。你的将是并将它们设置为和`-XmsAm``-XmxBm``-Xms40m``-Xmx384m``-Xms512m``-Xmx512m`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-20T09:55:32.490

这是一个丑陋但快速的解决方案：使用 JDK 6 而不是 7。很多人都遇到过 jdk 7 的问题。试试jdk 6

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-20T11:02:09.337

您的**asserts ， bin ， res** 格式无效，删除这些文件并再次粘贴到项目中，然后再次**清理 && 构建** 项目..可能会产生积极的结果

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-10T11:59:20.483

大多数情况下，此错误的解决方案非常简单：正如我在中回答的那样：[什么是 INSTALL_PARSE_FAILED_NO_CERTIFICATES 错误？](https://stackoverflow.com/questions/2914105/android-what-is-install-parse-failed-no-certificates-error/15925139#15925139)

> 1.  卸载你的apk。
> 2.  清理你的安卓项目。
> 3.  构建你的安卓项目。
> 4.  安装/运行你的apk

玩得开心

# asp.net - 在 Visual Studio.NET 的服务器资源管理器中修改 SQL Server 数据库表

> ID：12987158
> 
> 赞同：0
> 
> 时间：2012-10-20T09:39:59.387
> 
> 标签：asp.net, sql-server, visual-studio-2010

我正在将 Visual Studio.NET 中服务器资源管理器中的 SQL Server 数据库用于 ASP.NET 应用程序，并且我需要将一些表字段的数据类型从`int`更改为`uniqueidentifier`. 我收到以下错误消息：

> 连接的数据库服务器不支持从“int”转换为“uniqueidentifier”。

我可以得到一些帮助我该如何做这个修改，谢谢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:52:19.800

你必须手动运行下面的脚本来改变它

首先从表中删除数据，然后

```
`ALTER TABLE dbo.TableName
ALTER ColumnName varchar(50)` 
```

`接着 ````
ALTER TABLE dbo.TableName
ALTER ColumnName uniqueidentifier

```` 

而已。`

# silverlight - 找不到 async 修饰符所需的所有类型

> ID：12987161
> 
> 赞同：5
> 
> 时间：2012-10-20T09:40:50.827
> 
> 标签：silverlight, task-parallel-library, silverlight-5.0, async-await, reactiveui

我收到以下两个编译器错误（Resharper 7.0.1 没有报告错误）：

> 未定义或导入预定义类型“System.Runtime.CompilerServices.IAsyncStateMachine”

> 找不到“异步”修饰符所需的所有类型。您的目标是错误的框架版本，还是缺少对程序集的引用？

但这段代码不会编译：

```
public class Class1
{
    public Class1()
    {
        Um();
    }
    public async Task<DownloadStringCompletedEventArgs> Um()
    {
        var client = new WebClient();
        return await Observable.FromEvent<DownloadStringCompletedEventHandler, DownloadStringCompletedEventArgs>(x => client.DownloadStringCompleted += x,
                                    x => client.DownloadStringCompleted -= x);
    }
} 
```

我已经看到[MSBuild 没有找到异步所需的引用](https://stackoverflow.com/questions/9600282/msbuild-doesnt-find-async-required-references)，除了我有 VS 2012 NOT VS 11 Beta - 尽管它已安装。我也在一个全新的程序集中尝试了它，没有指向应用程序的 xaml 命名空间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T10:34:38.800

您需要在 Silverlight 5中支持[Async Targeting Pack 。](http://nuget.org/packages/Microsoft.CompilerServices.AsyncTargetingPack)`async`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T16:51:05.233

我们刚刚发布了 .NET Framework 4、Silverlight 4 和 5 以及 Windows Phone 7.5 的 Async 测试版：http: [//blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await -无网络框架4-5.aspx](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T13:06:34.607

您不能在 Visual Studio 2012 中使用 AsyncCTP。您可以为 Silverlight 5 使用 Async Targeting Pack（可在 NuGet 上获得）。对于 Silverlight 4，尚无可用的解决方案，不确定是否会有。

# python - 使用 scikit_learn 和特征矩阵的奇怪卡方结果

> ID：12987162
> 
> 赞同：2
> 
> 时间：2012-10-20T09:41:04.150
> 
> 标签：python, classification, scikit-learn, chi-squared

我正在使用 scikit learn 计算基本卡方统计数据（sklearn.feature_selection.chi2(X, y)）：

```
def chi_square(feat,target):
"""   """
from sklearn.feature_selection import chi2
ch,pval =  chi2(feat,target)
return ch,pval

chisq,p = chi_square(feat_mat,target_sc)
print(chisq)
print("**********************")
print(p) 
```

我有 1500 个样本，45 个特征，4 个类。输入是一个 1500x45 的特征矩阵和一个包含 1500 个分量的目标数组。特征矩阵不是稀疏的。当我运行程序并打印包含 45 个组件的数组“chisq”时，我可以看到组件 13 具有负值且 p = 1。这怎么可能？或者这是什么意思，或者我正在做的大错误是什么？

我附上 chisq 和 p 的打印输出：

```
[  9.17099260e-01   3.77439701e+00   5.35004211e+01   2.17843312e+03
   4.27047184e+04   2.23204883e+01   6.49985540e-01   2.02132664e-01
   1.57324454e-03   2.16322638e-01   1.85592258e+00   5.70455805e+00
   1.34911126e-02  -1.71834753e+01   1.05112366e+00   3.07383691e-01
   5.55694752e-02   7.52801686e-01   9.74807972e-01   9.30619466e-02
   4.52669897e-02   1.08348058e-01   9.88146259e-03   2.26292358e-01
   5.08579194e-02   4.46232554e-02   1.22740419e-02   6.84545170e-02
   6.71339545e-03   1.33252061e-02   1.69296016e-02   3.81318236e-02
   4.74945604e-02   1.59313146e-01   9.73037448e-03   9.95771327e-03
   6.93777954e-02   3.87738690e-02   1.53693158e-01   9.24603716e-04
   1.22473138e-01   2.73347277e-01   1.69060817e-02   1.10868365e-02
   8.62029628e+00]

**********************

[  8.21299526e-01   2.86878266e-01   1.43400668e-11   0.00000000e+00
   0.00000000e+00   5.59436980e-05   8.84899894e-01   9.77244281e-01
   9.99983411e-01   9.74912223e-01   6.02841813e-01   1.26903019e-01
   9.99584918e-01   1.00000000e+00   7.88884155e-01   9.58633878e-01
   9.96573548e-01   8.60719653e-01   8.07347364e-01   9.92656816e-01
   9.97473024e-01   9.90817144e-01   9.99739526e-01   9.73237195e-01
   9.96995722e-01   9.97526259e-01   9.99639669e-01   9.95333185e-01
   9.99853998e-01   9.99592531e-01   9.99417113e-01   9.98042114e-01
   9.97286030e-01   9.83873717e-01   9.99745466e-01   9.99736512e-01
   9.95239765e-01   9.97992843e-01   9.84693908e-01   9.99992525e-01
   9.89010468e-01   9.64960636e-01   9.99418323e-01   9.99690553e-01
   3.47893682e-02] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:57:38.367

如果您在[代码定义](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/feature_selection/univariate_selection.py#L138) `chi2`中放置一些打印语句，

```
def chi2(X, y):
    X = atleast2d_or_csr(X)
    Y = LabelBinarizer().fit_transform(y)
    if Y.shape[1] == 1:
        Y = np.append(1 - Y, Y, axis=1)
    observed = safe_sparse_dot(Y.T, X)          # n_classes * n_features
    print(repr(observed))
    feature_count = array2d(X.sum(axis=0))
    class_prob = array2d(Y.mean(axis=0))
    expected = safe_sparse_dot(class_prob.T, feature_count)
    print(repr(expected))
    return stats.chisquare(observed, expected) 
```

你会看到`expected`最终有一些负值。

```
import numpy as np
import sklearn.feature_selection as FS

x = np.array([-0.23918515, -0.29967287, -0.33007592, 0.07383528, -0.09205183,
              -0.12548226, 0.04770942, -0.54318463, -0.16833203, -0.00332341,
              0.0179646, -0.0526383, 0.04288736, -0.27427317, -0.16136621,
              -0.09228812, -0.2255725, -0.03744027, 0.02953499, -0.17387492])

y = np.array([1, 2, 2, 1, 1, 1, 1, 3, 1, 1, 3, 2, 2, 1, 1, 2, 1, 2, 1, 1],
             dtype = 'int64')

FS.chi2(x.reshape(-1,1),y) 
```

产量

```
observed:
array([[-1.31238179],
       [-0.76922812],
       [-0.52522003]])

expected:
array([[-1.56409796],
       [-0.78204898],
       [-0.26068299]]) 
```

`stats.chisquared(observed, expected)`然后被调用。在那里，`observed` 并且`expected`被假定为类别的频率。它们都应该是非负数，因为频率是非负的。

我对 scikits-learn 不够熟悉，无法建议您的问题应该如何解决，但您发送到的数据*类型*`chi2`似乎是错误的，因为`expected`应该是非负数。

（例如，`x`上面的值是否应该都是正数并代表观察频率？）

# dns - DHCP DNS DualServer 配置错误：服务器未授权

> ID：12987164
> 
> 赞同：0
> 
> 时间：2012-10-20T09:41:37.800
> 
> 标签：dns, replication, dhcp

我目前正在为我的项目使用[双 DHCP DNS 服务器](http://sourceforge.net/projects/dhcp-dns-server/)在我的网络系统中进行复制和故障转移。

我清楚地按照说明进行区域复制，但我不断收到关于“服务器未授权”的错误消息。因此，我无法将我的配置从主服务器复制到辅助服务器。

这是我在 DUAL DHCP DNS 服务器文件夹中的 config.ini 的摘录。

> [ZONE_REPLICATION]
> 
> 主要=192.168.20.1
> 
> 次要=192.168.20.2

有谁知道这是什么原因造成的？防火墙/错误的配置等？

![调试模式](../Images/6aa1cd934a452272a17a01908fd62db8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:49:14.797

在 [DOMAIN_NAME] 部分下，您应该将域名设置为：-

[DOMAIN_NAME] landed.com=168.192.in-addr.arpa

第二部分 (168.192.in-addr.arpa) 是反向区域，基于您的子网。这两个部分都是授权操作所必需的，授权服务器只能进行复制。

# android - 使用相机拍照后堆内存增长更多

> ID：12987165
> 
> 赞同：1
> 
> 时间：2012-10-20T09:41:41.433
> 
> 标签：android, memory-leaks, out-of-memory, heap-memory

在我的应用程序中使用相机时出现内存问题。我用 SurfaceView 拍照。在 log cat 中拍照后，它显示堆内存增长到 30 mb，有时也增长到 40mb。因此，有时应用程序也会崩溃“OutofMemoryException”。在这里我提供我的代码。请帮我。

```
surfaceView = (SurfaceView) findViewById(R.id.camerapreview);
surfaceHolder = surfaceView.getHolder();
surfaceHolder.addCallback(this);
surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

capture.setOnClickListener(new Button.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            camera.takePicture(myShutterCallback, myPictureCallback_RAW,
                    myPictureCallback_JPG);
            capture.setClickable(false);
        }
    });

PictureCallback myPictureCallback_RAW = new PictureCallback() {
    @Override
    public void onPictureTaken(byte[] arg0, Camera arg1) {
        System.out.println("myPictureCallback_RAW");
    }
};

 PictureCallback myPictureCallback_JPG = new PictureCallback() {
    @Override
    public void onPictureTaken(byte[] arg0, Camera arg1) {

        try {

            bitmapPicture = BitmapFactory.decodeByteArray(arg0, 0,
                    arg0.length);

        }
        catch (OutOfMemoryError e) {
                Toast.makeText(FromCamera.this, "Please try again",
                        Toast.LENGTH_SHORT).show();
        }catch (Exception e) {
            Toast.makeText(FromCamera.this, "Please try again",
                    Toast.LENGTH_SHORT).show();
        }

        capture.setEnabled(false);
        buttonBack.setVisibility(View.VISIBLE);
        buttonDone.setVisibility(View.VISIBLE);
        buttonBack.setEnabled(true);
        buttonDone.setEnabled(true);
    }
};

ShutterCallback myShutterCallback = new ShutterCallback() {
    @Override
    public void onShutter() {
        System.out.println("onShutter");
    }
}; 
```

我试过强制垃圾收集，但仍然没有用。

```
public void surfaceDestroyed(SurfaceHolder holder) {
    if (camera != null) {
        camera.stopPreview();
        camera.release();
        camera = null;
    }
    previewing = false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:49:23.210

您应该检查您的应用程序的内存分配，请参阅[此处](http://android-developers.blogspot.hu/2011/03/memory-analysis-for-android.html)的相关帖子（最后还链接了一些很棒的文章）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T09:57:12.973

使用后你会释放你的相机吗？完成拍照后，尝试使用 camera.release() 释放相机，并再次评估内存使用情况。

您可以尝试的另一件事是在使用后破坏表面，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T10:09:31.060

当您处理 Bitmap 时，垃圾收集器可能会失败一段时间......当您不使用位图时，请确保释放位图内存

```
if(!mBitmap.isRecycled())
mBitmap.recycle(); 
```

释放位图内存

# ios - TabBarController - 切换标签保持横幅视图；

> ID：12987172
> 
> 赞同：1
> 
> 时间：2012-10-20T09:43:48.173
> 
> 标签：ios, uitabbarcontroller, iad, selectedindex, adbannerview

我有一个带有四个视图控制器的 TabBarController。在我的第一个视图控制器中，我有以下两种方法：

```
-(void)loadclistview
{
    [self.tabBarController setSelectedIndex:2];
}

-(void)loadglistview
{
    [self.tabBarController setSelectedIndex:1];
} 
```

我使用它们将视图从一个选项卡更改为另一个选项卡。但是以这种方式更改选项卡不会保留我的横幅视图，它不会将横幅加载到新的视图控制器（选项卡）中。如果我使用标签栏更改标签，所有视图都会正确加载横幅。请在这里帮助我 - 我不知道为什么会这样，我应该怎么做才能通过选择器切换选项卡，以便横幅将加载到新视图中。

编辑：

我通过将当前横幅视图作为子视图添加到选项卡栏中选定的视图控制器来解决它；像这样：

```
[self.tabBarController.selectedViewController.view addSubview:_bannerView]; 
```

我看到这也适用于将横幅视图添加到导航控制器的后续视图 - 就像在构成选项卡的主视图的子视图中显示横幅一样；

```
[self.navigationController.view addSubview:_bannerView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:54:38.150

以这种方式添加子视图很好，但是当存在或不存在 iAd 时，您还必须处理它的显示/隐藏，以及调整内容视图的大小以为显示子视图腾出空间。Apple [iAdSuite](http://developer.apple.com/library/ios/samplecode/iAdSuite/Introduction/Intro.html)示例中的 TabbedBanner 项目很好地封装了此功能。

# vb.net - 如何关闭子窗体

> ID：12987173
> 
> 赞同：0
> 
> 时间：2012-10-20T09:44:15.490
> 
> 标签：vb.net, winforms

使用 MDI 和子窗体

代码。

```
childform_load

Me.MdiParent = MDIMain 
```

'

```
 Private Sub form1_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown
     If e.KeyCode = Keys.Escape Then
         Me.Close()
     End If
 End Sub 
```

上面的代码适用于 MDI 表单（表单名称为 mdiform1），但不适用于子表单 1，当我按下退出键时，它正在关闭 MDI 表单而不是子表单。

我还检查了子表单名称，名称仅为 form1。

有什么问题，我需要更改子表单的任何属性。

需要代码帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T09:48:21.067

这对我有用

```
Private Sub Form1_KeyDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles MyBase.KeyDown
        If e.KeyCode = Keys.Escape Then
            For Each child As Form In Me.MdiParent.MdiChildren
                child.Close()
            Next child
        End If
    End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T09:46:21.903

每当您尝试触发子表单事件时，它都会触发父表单“form1_KeyDown”事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T01:32:34.223

**这似乎是因为表单的（键预览）属性。** 所以尝试在 MDIMain 窗体中将 Key preview 设置为 False，并在子窗体中将其设置为 true。

# html - 使用 isPointInPath() 进行 HTML5 画布命中测试

> ID：12987177
> 
> 赞同：1
> 
> 时间：2012-10-20T09:44:36.067
> 
> 标签：html, canvas

出于使用 HTML5 画布进行命中测试的目的，我正在考虑：

1）存储形状（例如矩形）的坐标 - x，y，w，h 2）当鼠标移动或单击时，矩形再次被绘制到屏幕画布上，但*没有被*描边或填充 - 所以它实际上并没有被绘制到画布上并且不可见。3) 现在可以使用 isPointInPath() 测试路径

这很好用——尽管速度似乎或多或少与使用尚未添加到 DOM 的屏幕外画布相同。

有人有意见吗？特别是关于更多涉及的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:57:21.953

让你的画布变小，比如 10x10。它不应该影响路径计算并且占用更少的内存。

您可以在这里测试更复杂的路径性能：http: [//jsperf.com/ispointinpath-boundary-test-speed](http://jsperf.com/ispointinpath-boundary-test-speed)

# python - 根据python中的字典值对列表进行排序？

> ID：12987178
> 
> 赞同：20
> 
> 时间：2012-10-20T09:44:39.493
> 
> 标签：python, list, sorting, dictionary

假设我有一本字典，然后我有一个包含字典键的列表。有没有办法根据字典值对列表进行排序？

我一直在尝试这个：

```
trial_dict = {'*':4, '-':2, '+':3, '/':5}
trial_list = ['-','-','+','/','+','-','*'] 
```

我去使用：

```
sorted(trial_list, key=trial_dict.values()) 
```

并得到：

```
TypeError: 'list' object is not callable 
```

然后我去创建一个可以调用的函数`trial_dict.get()`：

```
def sort_help(x):
    if isinstance(x, dict):
        for i in x:
            return x[i]

sorted(trial_list, key=trial_dict.get(sort_help(trial_dict))) 
```

我不认为该`sort_help`功能对排序有任何影响。我不确定 using`trial_dict.get()`是否也是解决此问题的正确方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-20T09:49:43.827

是的[dict.get](http://docs.python.org/library/stdtypes.html#dict.get)是正确的（或至少是最简单的）方法：

```
sorted(trial_list, key=trial_dict.get) 
```

正如 Mark Amery 评论的那样，等效的显式 lambda：

```
sorted(trial_list, key=lambda x: trial_dict[x]) 
```

可能会更好，至少有两个原因：

1.  排序表达式可见且可立即编辑
2.  它不会抑制错误（当列表包含不在字典中的内容时）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-20T09:46:25.940

[`sorted`](https://docs.python.org/2/library/functions.html#sorted)内置函数（或列表的方法）中的关键参数[`sort`](https://docs.python.org/2/library/stdtypes.html#mutable-sequence-types)必须是一个函数，它将您正在排序的列表的成员映射到您想要排序的值。所以你想要这个：

```
sorted(trial_list, key=lambda x: trial_dict[x]) 
```

# c - 如果应用程序打开多个到 syslog 的连接会发生什么？

> ID：12987180
> 
> 赞同：4
> 
> 时间：2012-10-20T09:44:58.423
> 
> 标签：c, linux, syslog

`syslog`我有一个用于记录的应用程序。此应用程序中的另一个库显式调用`openlog()`它自己的用法，在这种情况下会发生一些奇怪的事情：stderr 输出被发送到我已经打开的 tcp 套接字。当我将lib的输出日志更改为`stderr`或`stdout`一切正常时。我想知道这是两个`syslog`连接的问题，还是只是代码中的某个地方搞砸了？

这是主应用程序的系统日志初始化：

```
openlog( "app", LOG_PID|LOG_NDELAY, LOG_LOCAL1 ); 
```

这是 lib 的 syslog 初始化：

```
openlog("lib", LOG_CONS | LOG_PID | LOG_NDELAY, LOG_LOCAL1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:05:31.740

它可能取决于实现。如果您使用[MUSL libc](http://musl-libc.org/)，则代码在[syslog.c](http://git.musl-libc.org/cgit/musl/tree/src/misc/syslog.c?)中，您可以看到只有一个 fd 用于 syslog（因此两个`openlog`-s 共享相同的`log_fd`）。查看[GNU libc](http://www.gnu.org/software/libc/)源代码以了解在大多数 Linux 实现中发生了什么。您也可以使用`strace`或`ltrace`

# javascript - 在 WordPress 中使用 Javascript 表单验证 - Firefox 问题

> ID：12987183
> 
> 赞同：0
> 
> 时间：2012-10-20T09:45:34.940
> 
> 标签：javascript, forms, wordpress, validation

我一直在努力让 javascript 验证使用单选按钮的基于 WordPress 的 HTML 表单。我终于想出了一个有点冗长但有效的解决方案——至少在 IE 和 Chrome 中——但是，它在 Firefox 中不起作用（这表明我的代码有点草率）。我认为我的单选按钮参考是问题所在。任何人都可以帮助我做错了什么 - 除了使用低效的验证方法:-)？

我的表格的简化版本：

```
<script>
function validateForm()
{
var aa=document.forms["personalise"]["motivation"]["1a"];
var ab=document.forms["personalise"]["motivation"]["1b"];
var ac=document.forms["personalise"]["motivation"]["1c"];
var ad=document.forms["personalise"]["motivation"]["1d"];
var ae=document.forms["personalise"]["motivation"]["1e"];
if (!(aa.checked == true || ab.checked == true || ac.checked == true || ad.checked == true || ae.checked == true))
 {
  alert("Question 1 must be completed");
  return false;
 }
}
</script>
<form name="personalise" action="insertdatatest.php" onsubmit="return validateForm()" method="post">
1\. Are you seriously planning to quit </b>:&nbsp;&nbsp;
    <input id="1a" type="Radio" title="" name="motivation" value="1" />  Within the next 2 weeks
    <input id="1b" type="Radio" title="" name="motivation" value="2" />  Within the next 30 days
    <input id="1c" type="Radio" title="" name="motivation" value="3" />  Within the next 3 months
    <input id="1d" type="Radio" title="" name="motivation" value="4" />  No, I am not currently planning to quit
    <input id="1e" type="Radio" title="" name="motivation" value="5" />  I have already quit
<input type="submit" value = "Submit">
</form> 
```

我是网络开发的真正新手，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:16:30.617

再次感谢 TheDeadMedic 的帮助。实际上，我发现了一种稍微不同的方法，它适用于所有三个为多个单选按钮问题设置的浏览器（因此是 blOK 条目）。如果它对其他人有用，代码如下。弗利克斯。

```
<script>
function validateForm() { 
var inputs;
var i;
var blOK;
 blOK = false;
 inputs = document.getElementsByName( "motivation" ); 
 for (i=0;i<inputs.length;i++)
 {
   if ( inputs[i].checked   ) {
                                blOK = true ;
        break ;           
                                }
}
        if (!blOK) 
        {
alert( "Question 1 must be completed" ); 
return false;  
        }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T09:58:56.437

这是一种更清洁的做事方式：

```
function validateForm() {
    var inputs = document.getElementsByName( "motivation" );
    for ( var i = 0; i < inputs.length; i++ ) {
        if ( inputs[i].checked ) return true;
    }

    alert( "Question 1 must be completed" );
    return false;
} 
```

# java-me - Try/Catch 在 Java ME 中似乎什么也没做

> ID：12987186
> 
> 赞同：1
> 
> 时间：2012-10-20T09:45:46.003
> 
> 标签：java-me, try-catch, nokia-s40

考虑一下：

```
public class Minesweeper extends MIDlet implements CommandListener {
  public static String error = "";

  public void startApp() throws MIDletStateChangeException {

    try{
        int int = 5;
    } catch (Exception e) {
        error = e.toString();
    }
  }
} 
```

`int`是一个无效的名称`int`，所以肯定应该捕获并注册错误`error`吗？（这个错误是故意存在的，所以我可以抓住它）

您可能已经猜到了，错误似乎没有被捕获，并且应用程序以`java/lang/Error Unresolved compilation problem: syntax error on token 'int'...`.

我究竟做错了什么。

（顺便说一句，这只是一个测试，所以我知道我可以正确捕获错误，我显然不会在最终版本中使用该代码。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T10:00:05.380

这是你的问题 - “int int = 5;” - 你不能使用“int”作为变量名；）

您正在尝试使用保留字作为变量名。编译问题与您的 try-catch 块工作或不工作无关，编译器永远不会那么远。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T12:40:03.113

Try/catch 块不能用于这种错误。

如果您尝试加载不存在的文件，则会触发。尝试这个：

```
 Image img = Image.createImage("blabla.png"); 
```

# objective-c - 更新后，应用程序不会从 Documents 文件夹加载现有文件

> ID：12987187
> 
> 赞同：0
> 
> 时间：2012-10-20T09:45:46.613
> 
> 标签：objective-c, ios, xcode, nsfilemanager

我在临时更新后从应用程序的文档文件夹加载现有图像时遇到问题。

我在互联网上搜索了答案，我发现我必须使用文件的相对路径，以便在更新应用程序时路径保持不变。

有人可以告诉我怎么做吗？

现在，当 ImagePicker 完成时，我使用以下内容保存文件（图像）：

```
NSString *imageFilename = [NSString stringWithFormat:@"%@-profilePhoto.jpg",[NSDate date]];
NSArray *paths = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];

imagePath = [NSString stringWithFormat:@"%@/%@", paths, imageFilename]; 
```

请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:26:12.310

我找到了解决方案：

我没有从完整路径加载图像，而是选择让系统在它们的名称之后搜索它们。

所以而不是：

```
//Full path stored in a dictionary:
    profilePhotoPath = [userDict objectForKey:@"profilepic"];
//Load the image from path:
    profilePhoto = [[UIImage alloc] initWithContentsOfFile:profilePhotoPath]; 
```

我现在使用以下内容：

```
//Load image from documentsDirectory, filename
    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    profilePhotoPath = [userDict objectForKey:@"profilepic"];
    profilePhotoPath = [documentsDirectory stringByAppendingPathComponent:[profilePhotoPath lastPathComponent]];
    profilePhoto = [[UIImage alloc] initWithContentsOfFile:profilePhotoPath]; 
```

通过使用“lastPathComponent”属性，我基本上从路径中删除了除文件名之外的所有内容，然后我使用 NSSearch 给我我的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T09:51:40.650

这条线使问题

```
NSArray *paths = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject]; 
```

这里的问题是变量路径的类型`NSArray`不是`NSString`

改成，

```
NSString *paths = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject]; 
```

或者

```
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *paths = [path objectAtIndex:0]; 
```

# javascript - jQuery 选中的选项卡

> ID：12987189
> 
> 赞同：0
> 
> 时间：2012-10-20T09:45:49.480
> 
> 标签：javascript, jquery

我想从我的标签中获取选定的 ID。我尝试了任何方法，但我的 javascript 非常薄弱。这是我的标签。

```
<li><a href="#tab" class="days" id="day_1">Pondelok</a></li>
<li><a href="#tab" class="days" id="day_2">Utorok</a></li>
<li><a href="#tab" class="days" id="day_3">Streda</a></li>
<li><a href="#tab" class="days" id="day_4">Štvrtok</a></li>
<li><a href="#tab" class="days" id="day_5">Piatok</a></li>
<li><a href="#tab" class="days" id="day_6">Sobota</a></li>
<li><a href="#tab" class="days" id="day_7">Nedeľa</a></li> 
```

这是我的尝试，它返回未定义。

```
<script>
     var selected_tab = $(".ui-state-active").attr("id"); 
     document.write(selected_tab);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:47:16.970

这将提醒您单击的选项卡的 ID

```
$('.days').click(function(){
  alert($(this).attr('id'));
}); 
```

如果您想将其写在文档上，请使用此

```
$('.days').click(function(){
  document.write($(this).attr('id'));
}); 
```

现场演示

[http://jsfiddle.net/zgDYZ/](http://jsfiddle.net/zgDYZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T10:25:01.553

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.days').click(function () {
            alert($(this).attr('id'));
        });
    });
</script> 
```

验证的另一种最佳方法

$('a.days').click(function(){

alert($(this).attr('id')); });

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T09:49:52.323

```
<script>
var selecId = "";
$('.days').click(function(){
  selecId = $(this).attr('id');
});
</script> 
```

`selecId`随心所欲使用..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T10:01:44.797

您正在尝试从`.ui-state-active`根据您的标记不存在的类中获取属性。所以你的代码不会工作：

尝试以下方法，这将起作用：

```
$(function() {
            $("ul li").each(function() {
            var selected_tab = $(this).find("a").attr("id"); 
            alert(selected_tab);

            })
        }); 
```

# c++ - 如何将ls命令的输出获取到c ++中的数组

> ID：12987192
> 
> 赞同：3
> 
> 时间：2012-10-20T09:46:00.960
> 
> 标签：c++, linux, arrays, ls, output

有没有办法从 c++ 运行 linux 命令 ls，并在 c++ 中将所有输出存储在一个数组中？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T09:55:38.447

如果您坚持实际运行`ls`，您可以使用`popen`启动进程并读取输出：

```
FILE *proc = popen("/bin/ls -al","r");
char buf[1024];
while ( !feof(proc) && fgets(buf,sizeof(buf),proc) )
{
    printf("Line read: %s",buf);
} 
```

但是您最好自己阅读目录内容和文件信息，使用`opendir`and `readdir`。

# asp.net - Jquery UI 按钮服务器 + 客户端点击处理程序

> ID：12987196
> 
> 赞同：0
> 
> 时间：2012-10-20T09:46:13.913
> 
> 标签：asp.net, jquery-ui, button, onclick, onclientclick

我正在尝试使用 asp.net 和 Jquery UI 编写一个简单的 HTML 表单，但是在尝试处理此表单中按钮上的单击事件处理程序时遇到了问题。我尝试使用 OnClientClick 和 OnClick 但是一旦客户端方法被访问并返回布尔值，服务器端方法就不会被相应地调用（实际上根本没有调用）链接到代码，因为我无法让代码标签正常工作：[http ://pastebin.com/LZNMqASt](http://pastebin.com/LZNMqASt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T09:54:12.630

我发现了问题，实际上您在对话框中显示“div#loginForm”元素，它没有采用表单元素。

将表单元素放入**“div#loginForm”**容器中，问题将得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:58:32.423

由于某种原因，javascript 方法的返回类型未被接受为有效的布尔值。以下解决方案修复了 OnClientClick 事件

```
<asp:Button runat="server" ID="btnLogin" Text="Login" OnClick="btnLogin_OnClick"
                    OnClientClick="if(ValidateLoginForm() != true) return(false);" UseSubmitBehavior="False" /> 
```

# iphone - 在 iPhone 中为 unicode 字符设置自定义字体

> ID：12987197
> 
> 赞同：0
> 
> 时间：2012-10-20T09:46:15.300
> 
> 标签：iphone, unicode, uilabel, custom-font

我有一个 @"¾ÕÁõ ¦ºöÂ ¿£ Å¢ÕõÒÅ¡Â¡¸" 字符串和一个以**.ttf**格式读取的字体。我尝试使用以下代码，但字体没有显示在`UILabel`. 任何人都可以帮我找到解决方案吗？

这是我尝试过的：

```
FontLabel *label = [[FontLabel alloc] initWithFrame:CGRectMake(10, 10, 0, 0) fontName:@"ELCOT-Kanchi" pointSize:20.0f];
[label setText:@"¾ÕÁõ ¦ºöÂ ¿£ Å¢ÕõÒÅ¡Â¡¸"];
[label sizeToFit]; 
```

但我没有得到结果。

我还将字体添加到我的资源文件中，并包含在应用程序提供的字体数组下的 info plist 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:00:15.557

嗨，清理您的构建并确保将字体添加到项目的复制资源包中，查看随附的屏幕截图。

![在此处输入图像描述](../Images/3a95f685c91ab8423bddd81a55665cdb.png)

我希望这对你有帮助，快乐编码:)

# c - 在 C 中基于 gnome 的系统上加载 bmp 文件的库

> ID：12987198
> 
> 赞同：0
> 
> 时间：2012-10-20T09:46:20.903
> 
> 标签：c, fedora, gnome, bmp

这是我们大学要求我们完成的一个项目（在第三方上寻求帮助不受限制）我们必须构建一个 3D 场景，其中物体与纹理进行映射。

我被困在需要将 BMP 文件的数据加载到程序中的地方。我们必须使用系统中已经存在的库（禁止对其进行编码）。

*我的要求是*：使用 fedora（gnome 环境），是否存在一个预构建的库，其中存在加载 BMP 文件并返回指向有效负载的指针的函数？

**编辑**：我们禁止安装任何额外的库，该库必须是 Fedora 的预构建库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:47:38.977

查看 GDK 库和函数 gdk_pixbuf_new_from_file。正如[您在 API 中看到的，](http://developer.gnome.org/gdk-pixbuf/stable/gdk-pixbuf-File-Loading.html#gdk-pixbuf-new-from-file)您可以使用：

```
GdkPixbuf *bmp_pixbuf;
GError *error = NULL;
bmp_pixbuf = gdk_pixbuf_new_from_file ("/tmp/myfile.bmp", &error);
if (bmp_pixbuf == NULL) {
    /* Error codes are GDK_PIXBUF_ERROR and G_FILE_ERROR */
} 
```

首先使用以下方法检查 GDK 中的 BMP 支持非常重要：

```
$ gdk-pixbuf-query-loaders-64 | grep bmp 
```

你需要一个像 libpixbufloader-bmp.so 这样的库。

我不知道您使用什么库来创建 3D 场景，但是您可以在使用[gdk_pixbuf_get_pixels](http://developer.gnome.org/gdk-pixbuf/stable/gdk-pixbuf-The-GdkPixbuf-Structure.html#gdk-pixbuf-get-pixels)加载 pixbuf 后获取原始像素，然后加载到表面中。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:32:29.937

freeimage 是具有上传 bmp 图像的方法的包名。从 freeimage 项目页面的在线文档中，我可以看到 API：

```
DLL_API FIBITMAP *DLL_CALLCONV FreeImage_Load(FREE_IMAGE_FORMAT fif, const char
*filename, int flags FI_DEFAULT(0)); 
```

你可以

```
yum install freeimage-devel 
```

在 Fedora 上进行开发。使用此方法并链接到库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:51:26.117

我将重用以前的答案：

[Sean Barrett 的 stb_image.c](http://nothings.org/stb_image.c)是一个独立的单文件公共域图像加载器，用于 JPEG、PNG、BMP、TGA、PSD、GIF、HDR 和 PIC 文件。

# python - 将我的 PyGtk 3 应用程序移植到 Win32

> ID：12987206
> 
> 赞同：0
> 
> 时间：2012-10-20T09:47:10.373
> 
> 标签：python, windows, linux, gtk, pygtk

我最近使用 Anjuta 用 pygtk 制作了我的第一个应用程序。它在Linux下运行良好，是时候分享给亲朋好友了。我在 Windows 上安装了 Python、pygtk 和 Gtk 一体化软件包（Cairo、pyGobject 等）并尝试运行它。

我有一个错误说`self.builder.add_from_file(UI_FILE)`

在代码中挖掘了一下，我发现我的 UI_FILE 包含

`<!-- interface-requires gtk+ 3.0 -->`

我的 python 控制台说：

```
>>> import gtk
>>> gtk.gtk_version
(2, 22, 1) 
```

据我所知，我在我的 win32 机器上安装了最新版本的 Gtk。现在不知道怎么解决：重新设计接口兼容gtk2.22.1？（然后如何？）使用我的 linux 发行版中的交叉编译器？（复杂性/稳定性的代价是什么？）

谢谢你的时间，你回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:20:27.083

从您的界面中删除所有与 GTK 2 不兼容的小部件（例如`Grid`、`Overlay`等）。如果您有 3.8 系列的 Glade 版本，我认为您可以通过转到项目属性并选择来自动检查哪些小部件是合适的GTK 2.24 作为目标版本。然后有一个名为“验证小部件版本和弃用”的按钮，您可以单击该按钮以确保您使用的所有小部件都适用于该版本。

顺便说一句，2.22.1 绝对不是 Windows 的最新版本。它是 2.24.7 或 .8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-12T14:30:49.510

对此的最新答案是，您可以在 Windows 上使用 Gtk3，使用可在此处下载的最新[PyGobject](http://sourceforge.net/projects/pygobjectwin32/files/)[包](https://wiki.gnome.org/Projects/PyGObject)。

然后而不是使用以下（加载pygtk）：

```
import gtk 
```

你应该使用

```
from gi.repository import Gtk 
```

* * *

如果您的代码曾经依赖于 pygtk，您有以下选择（请参阅[移植指南](https://wiki.gnome.org/Projects/PyGObject/IntrospectionPorting)）

*   使用模块 pygtkcompat (它允许你继续支持 Gtk 2.x)
*   移植到自省方法，可以通过所述移植指南中提供的脚本大部分自动化，[`pygi-convert.sh`](http://git.gnome.org/browse/pygobject/tree/pygi-convert.sh)（仅包含许多正则表达式替换）

# cakephp - CakePHP 2 验证码

> ID：12987210
> 
> 赞同：0
> 
> 时间：2012-10-20T09:47:35.297
> 
> 标签：cakephp, cakephp-2.x

嗨我想使用 KCaptcha 插件，但是当我将代码添加到控制器时

> ```
> public $components = array(
> 'Kcaptcha.Captcha',
> ); 
> ```

我收到此错误

> 缺少数据库表错误：在数据源默认值中找不到模型留言簿的表留言簿。注意：如果要自定义此错误消息，请创建 app/View/Errors/missing_table.ctp

KCaptcha 放置在 /plugins 中，它是从另一个插件 app/Plugin/Guestbook 调用的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T09:56:03.377

如错误消息中所述，这不是 Kcaptha 问题。但是您已经定义`Guestbook model`了没有表定义的`Guestbook model`.

尝试`guestbooks`按照错误消息中的说明定义您的表。最好显示您的模型定义和控制器的各个部分。

# ruby-on-rails - 使用带有 Rspec 测试的回形针上传文件（ruby on rails）

> ID：12987211
> 
> 赞同：-1
> 
> 时间：2012-10-20T09:48:04.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, paperclip, rspec-rails

> **可能重复：**
> [使用 rspec 测试文件上传 - rails](https://stackoverflow.com/questions/7260394/test-a-file-upload-using-rspec-rails)

我不知道如何为文件上传编写测试用例。你能帮我么

我有用户照片、姓名、电子邮件的表格。我为姓名和电子邮件编写测试用例

喜欢

```
 fill_in "user_name", :with => "xyz"
 fill_in "user_email", :with => "test@test.com" 
```

但是我如何为选择照片编写测试用例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:11:20.323

如果您使用过回形针，那么我可以在这方面为您提供帮助。

像这样写你的测试用例

```
def do_upload_file
# write the request for the action as defined in your routes file
# get :upload_file, :id => :user_id (id of the user)
end

before do
 # set the session variables and other parameters here..
end

it "should upload the file correctly" do
  @user.should_receive(:update_attributes).and_return(true)
  do_upload_asset
  response.should redirect_to(whatever_path)
end 
```

对我有用，希望也对你有用....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:19:56.473

你可以这样做：

```
obj.asset = fixture_file_upload('/dummy_file.png', 'image/png') 
```

您可以在规范助手中将夹具路径定义为：

```
config.fixture_path = "#{Rails.root}/spec/fixtures" 
```

[官方文档](http://apidock.com/rails/ActionController/TestProcess/fixture_file_upload)

# asp.net - 如何根据 Gridview 行数在 Gridview 中隐藏模板字段编辑列

> ID：12987215
> 
> 赞同：-1
> 
> 时间：2012-10-20T09:48:21.763
> 
> 标签：asp.net, gridview

我有一个gridview，我可以在其中添加/删除行。我不想在第一行提供删除选项，即我可以删除任何行但不能删除第一行。如何禁用第一行的编辑选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:54:24.170

您可以像使用模板字段一样从[GridView.RowDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)`FindControl`禁用该单元格，您可以使用方法然后禁用该单元格。

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowIndex == 0)
    { 
        //Disable that cell here..
    }
} 
```

# javascript - 获取反向引用值并修改这些值

> ID：12987220
> 
> 赞同：4
> 
> 时间：2012-10-20T09:48:54.830
> 
> 标签：javascript, jquery, regex

您能否解释一下为什么我无法从匹配的正则表达式结果中获取反向引用的值并在有效替换之前对其进行一些修改？

预期的结果是将例如字符串替换`".coord('X','Y')"`为`"X * Y"`. 但是如果`X`> 到某个值，则将该值除以 2，然后在替换中使用这个新值。

这是我目前正在测试的代码：

看`/*>>1<<*/`& `/*>>2<<*/`& `/*>>3<<*/`，这就是我卡住的地方！

我希望能够根据反向引用值在替换之前对反向引用进行修改。

`/*>>2<<*/`&之间的区别`/*>>3<<*/`只是自调用匿名函数参数

该方法`/*>>2<<*/`是`i`可以理解的预期工作解决方案。但奇怪的是，替换工作不正常，用别名`$1 * $2`而不是值替换......？

你可以测试[jsfiddle](http://jsfiddle.net/EecPe/2/)

```
//string to test
".coord('125','255')"

//array of regex pattern and replacement //just one for the example
//for this example, pattern matching alphanumerics is not necessary (only decimal in coord) but keep it as it
var regexes = [ //FORMAT is array of [PATTERN,REPLACEMENT]
    /*.coord("X","Y")*/ [/\.coord\(['"]([\w]+)['"],['"]?([\w:\.\\]+)['"]?\)/g, '$1 * $2']
                  ];
function testReg(inputText, $output) {
    //using regex
    for (var i = 0; i < regexes.length; i++) {
        /*==>**1**/ //this one works as usual but dont let me get backreferences values
         $output.val(inputText.replace(regexes[i][0], regexes[i][2]));

         /*==>**2**/ //this one should works as i understand it
         $output.val(inputText.replace(regexes[i][0], function(match, $1, $2, $3, $4) { 
            $1 = checkReplace(match, $1, $2, $3, $4);
            //here want using $1 modified value in replacement
            return regexes[i][3]; 
        }));

         /*==>**3**/ //this one is just a test by self call anonymous function
         $output.val(inputText.replace(regexes[i][0], function(match, $1, $2, $3, $4) {
            $1 = checkReplace(match, $1, $2, $3, $4);
            //here want using $1 modified value in replacement
            return regexes[i][4];
        }()));

        inputText = $output.val();
    }
}

function checkReplace(match, $1, $2, $3, $4) {
    console.log(match + ':::' + $1 + ':::' + $2 + ':::' + $3 + ':::' + $4);
    //HERE i should be able if lets say $1 > 200 divide it by 2
    //then returning $1 value
    if($1 > 200) $1 = parseInt($1 / 2);
    return $1; 
}​ 
```

当然我错过了一些东西，但无法得到它！

谢谢你的帮助，问候。

**编辑工作方法：** 终于得到它，正如 Eric 提到的：

> 关键是该函数返回要替换的文字文本，而不是为反向引用而解析的字符串。​​</p>

[JSFIDDLE](http://jsfiddle.net/EecPe/4/)

所以完整的工作代码：（请注意，每个匹配的模式都会改变模式替换，速度代码的优化在这里不是问题，我会保持这样）

```
 $('#btn').click(function() {
    testReg($('#input').val(), $('#output'));
});

//array of regex pattern and replacement //just one for the example
var regexes = [ //FORMAT is array of [PATTERN,REPLACEMENT] /*.coord("X","Y")*/ 
    [/\.coord\(['"]([\w]+)['"],['"]?([\w:\.\\]+)['"]?\)/g, '$1 * $2']
                     ];

function testReg(inputText, $output) {
    //using regex
    for (var i = 0; i < regexes.length; i++) {
        $output.val(inputText.replace(regexes[i][0], function(match, $1, $2, $3, $4) {
            var checkedValues = checkReplace(match, $1, $2, $3, $4);
            $1 = checkedValues[0];
            $2 = checkedValues[1];
            regexes[i][1] = regexes[i][1].replace('$1', $1).replace('$2', $2);
            return  regexes[i][1];
        }));
        inputText = $output.val();
    }
}

function checkReplace(match, $1, $2, $3, $4) {
    console.log(match + ':::' + $1 + ':::' + $2 + ':::' + $3 + ':::' + $4);
    if ($1 > 200) $1 = parseInt($1 / 2);
    if ($2 > 200) $2 = parseInt($2 / 2);
    return [$1,$2];
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T10:24:19.707

```
.replace(regexes[i][0], function(match, $1, $2) {
    if ($1 > 200) $1 = parseInt($1 / 2);
    if ($2 > 200) $2 = parseInt($2 / 2);
    return $1 + "*" + $2;
})); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:24:09.827

如果我理解正确，你没有得到你想要的结果，因为

```
'str'.replace( /(str)/, function(match,a){return '$1';} ) // "$1" 
```

因此，您的初始数组不是根据您的使用方式构建的。
尝试类似的东西

```
var regexes = [
    [ /\.coord\(['"]([\w]+)['"],['"]?([\w:\.\\]+)['"]?\)/g, function(match, $1, $2){return $1 + ' * ' + $2;} ]
]; 
```

并调用

```
return regexes[i][1](match, $1, $2, $3, $4); 
```

# expect - 解析 Expect 并将输出设置为字符串

> ID：12987225
> 
> 赞同：-1
> 
> 时间：2012-10-20T09:49:10.687
> 
> 标签：expect

我试图弄清楚如何在期望中解析命令的输出，然后将它返回的内容设置为变量。基本上我有一个看起来像列表 IE 的命令输出：

OneA
OneB
OneB
TwoA
TwoB
TwoC
ThreeA
ThreeB
ThreeC

基本上我需要它来查找所有以 One 开头的值，然后对每个实例运行另一个命令。像
stat OneA 并打印输出，
然后是 Stat OneB
，然后是 Stat OneC ......
希望这是有道理的。

谢谢

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:27:29.183

使用 shell 管道可能更容易：

```
send -- "yourCommand | grep '^One' | xargs -L 1 stat\r" 
```

在预期中，这将是这样的：

```
send -- "yourCommand\r"
expect -re $thePrompt
foreach line [split $expect_out(buffer) \n] {
    if {[string match {One*} $line]} {
        send -- "stat $line\r"
        expect -re $thePrompt
    }
} 
```

# django - django-admin-tools 在仪表板中看不到某些应用程序

> ID：12987227
> 
> 赞同：1
> 
> 时间：2012-10-20T09:49:23.317
> 
> 标签：django, django-admin-tools

在 devserver 上一切正常，但在生产中，管理仪表板中没有一些应用程序。

设置.py

```
INSTALLED_APPS = (
    'admin_tools',
    'admin_tools.theming',
    'admin_tools.menu',
    'admin_tools.dashboard',

    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',

    'sorl.thumbnail',
    'file_resubmit',
    'django_pencil',

    'blog',
    'core',
    'gallery',
    'nav',
    'options',
    'pages',
    'themes',

    'django_cleanup',
) 
```

这是 CustomIndexDashboard 的代码。

```
class CustomIndexDashboard(Dashboard):
    """
    Custom index dashboard for coffee.
    """
    def init_with_context(self, context):
        site_name = get_admin_site_name(context)
        # append a link list module for "quick links"
        self.children.append(modules.LinkList(
            _('Quick links'),
            layout='inline',
            draggable=False,
            deletable=False,
            collapsible=False,
            children=[
                [_('Return to site'), '/'],
                [_('Change password'),
                 reverse('%s:password_change' % site_name)],
                [_('Log out'), reverse('%s:logout' % site_name)],
            ]
        ))

        self.children.append(
            modules.ModelList(u'Navigation', [
                'nav.*',
            ])
        )
        self.children.append(
            modules.ModelList(u'Content', [
                'pages.*',
                'django_pencil.*',
            ])
        )

        self.children.append(
            modules.ModelList(u'Gallery', [
                'gallery.*',
            ])
        )
        self.children.append(
            modules.ModelList(u'Blog', [
                'blog.*',
            ])
        )

        self.children.append(
            modules.ModelList(u'Options', [
                'options.*',
            ])
        ) 
```

在仪表板中没有“页面”和“图库”应用程序。如果我关闭 django-admin-tools，就会出现这些应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T22:04:33.633

验证生产站点上的 DashboardPreferences 是否具有旧配置。创建一个视图只是为了重置当前配置以确保首选项是干净的。

```
def reset_dashboard(request):
    prefs = DashboardPreferences.objects.filter(user=request.user)
    prefs.delete()
    prefs = DashboardPreferences(user=request.user)
    prefs.data = '{}'
    prefs.save()
    return HttpResponseRedirect(reverse('admin:index')) 
```

# mosync - mosync c++ 或 javascript

> ID：12987231
> 
> 赞同：1
> 
> 时间：2012-10-20T09:49:56.843
> 
> 标签：mosync

使用 mosync 开发的应用程序的性能是否与使用 html5 和 javascript 开发的应用程序相同。使用 c++ 或使用 javascript 的优缺点是什么。

问候，

潘卡伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:50:59.617

简而言之，“不”！

当您使用 c++ 时，您实际上使用的是 CPU（或至少是操作系统），但如果您使用“HTML”编写程序，则会添加一个额外的层。浏览器（Android 和 Iphone 中的 Webkit）解释 html/js，特别是在 android 中速度明显降低（在 android 4.x 上更好，但 mosync 现在不支持它）！

但是用 HTML 设计用户界面很容易！对于简单的应用程序，它值得 IMO！

# c# - 通过单击按钮在线程上播放声音，但无法通过另一个按钮将其从主线程中停止

> ID：12987233
> 
> 赞同：0
> 
> 时间：2012-10-20T09:50:18.750
> 
> 标签：c#, .net, multithreading

我只是想通过单击按钮来播放 .wav 声音，通过使用 .Net 4.0 - Task.Factory 选择的次数，它播放得很好，但是有一刻我想通过其他按钮快速停止这个声音，我可以说停止按钮，但它并没有快速停止声音，它只有在完全播放后才会停止......下面是我的代码......

```
CancellationTokenSource tokenSource = new CancellationTokenSource();

private void btnStartPlaying_Click(object sender, EventArgs e)
{
            tokenSource = new CancellationTokenSource();                       
            List<Task> tasks = new List<Task>();
            var ui = TaskScheduler.FromCurrentSynchronizationContext();
            int playTimes = 3;

            var compute = Task.Factory.StartNew(() =>
            {
                Playing(playTimes);

            }, tokenSource.Token);
            tasks.Add(compute);

            var displayResults = compute.ContinueWith(resultTask =>                                     
                                                        Environment.NewLine,
                                                        CancellationToken.None,
                                                        TaskContinuationOptions.OnlyOnRanToCompletion,
                                                    ui);
            var displayCancelledTasks = compute.ContinueWith(resultTask =>                                               
                                                                Environment.NewLine,
                                                                CancellationToken.None,
                                                                TaskContinuationOptions.OnlyOnCanceled, ui);            
            Task.Factory.ContinueWhenAll(tasks.ToArray(),
                result =>
                {

                }, CancellationToken.None, TaskContinuationOptions.None, ui);
}

private void btnStopPlaying_Click(object sender, EventArgs e)
{
      tokenSource.Cancel();            
}

public void Playing(int times)
{
     try
     {
      using (SoundPlayer player = new SoundPlayer("mySoundFile.wav"))
                {
                    for (int i = 0; i < times; i++)
                    {
                        tokenSource.Token.ThrowIfCancellationRequested();
                        player.PlaySync();
                    }
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show("Stopped!!!!!");
            }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:12:59.357

您不是要立即停止播放。而是要停止文件重复播放。

想象一下，当代码已经开始执行时，您取消了任务`player.PlaySync();`。应用程序无法知道已请求取消。它仅在下一次迭代期间引发任务取消异常。

Task 类也强调合作取消，这意味着您不希望声音突然停止播放。

# javascript - 内容加载后自动调整fancybox

> ID：12987235
> 
> 赞同：-3
> 
> 时间：2012-10-20T09:50:40.210
> 
> 标签：javascript, jquery, fancybox-2

我使用 fancybox 来显示一些自定义 div。在展示了 fancybox 之后，我调用了处理 div 的自定义函数。该函数改变了 div 内容的大小并且是第三方的。

因此，在调用它后，内容比幻想框大，并且出现滚动条。

如何根据我的内容手动自动调整 fancybox 的大小？

我这样称呼幻想：

```
$(document).ready(function() {
        $(".fancybox").fancybox(
        {
            afterLoad   : function() 
            { 
             initializePuzzle();  
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:00:39.260

使用`$.fancybox.resize()`或`$.fn.fancybox.resize()`调整花式框的大小。将此代码放在相关函数执行之后。

# php - Facebook应用程序喜欢一个页面

> ID：12987238
> 
> 赞同：0
> 
> 时间：2012-10-20T09:51:03.173
> 
> 标签：php, javascript, facebook, facebook-graph-api

我正在尝试构建一个使用[RFID](http://en.wikipedia.org/wiki/Radio-frequency_identification)阅读器并与 Facebook 连接的应用程序。但是当我尝试点赞一个页面时，我会在 RFID 阅读器点击赞框*时*发送一​​个[URL 。](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)我希望用户在点击*喜欢*框后立即[喜欢](http://en.wikipedia.org/wiki/Like_button)我的页面。因此，现在我想构建一个应用程序，该应用程序访问用户 ID，并在他/她点击喜欢框时代表他/她请求获得*喜欢页面的权限。*该操作将按如下方式执行：-

 ***1.  用户点击一个喜欢的框。
2.  点赞框发送带有用户 ID 的 URL（Facebook 应用程序 URL）。
3.  我收到*喜欢*后续页面的动作。
4.  用户现在*喜欢*该页面。

我被困在第四点上。如何让用户喜欢我的页面？

我正在使用 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:16:27.213

我的理解是，你想要完成的事情是无法完成的。您不能使用[PHP](http://en.wikipedia.org/wiki/PHP)来“喜欢”一个页面。他们的 API 不支持它。它必须使用 Facebook JavaScript 或[类似按钮](http://en.wikipedia.org/wiki/Like_button)的 iframe 来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T07:34:11.727

通常，您的应用不能代表用户喜欢页面。您所能做的就是通过 javascript 捕获 FB“喜欢”事件（当用户喜欢页面时触发）并执行一些自定义操作（例如，回发到服务器或 smth）。那有意义吗？***

# c - 如何在 C 中生成由 4 个十六进制数字组成的代码？

> ID：12987241
> 
> 赞同：0
> 
> 时间：2012-10-20T09:51:17.763
> 
> 标签：c

如何生成由 4 个十六进制数字组成的代码？代码满足以下条件： -第一位和第三位相同 -第二位为偶数 -第三位大于9 -第四位随机（无条件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:21:41.770

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main()
{
  int code1, code2, code4;
  srand(time(NULL)); // set random seed
  code1 = random()%6+10;   // random between 10 and 15
  code2 = random()%8*2;    // even
  code4 = random()%16;     // random between 0-15
  printf("%X%X%X%X\n",code1, code2, code1, code4);
} 
```

这里有几点需要注意。第一个是我生成 3 个“代码”，因为第三个总是与第一个相同。

要生成 0-15 的随机数，请使用`random()%16` 我正在使用类型`int`来存储这些，这可能无关紧要。打印时，我使用`%X`而不是更常见的`%d`，因为`%X`它将以十六进制打印。我打印四个十六进制数字（当然重用 code1）。最后一部分是满足你的条件。code1 是 0-5 范围内的随机数，并在其上加 10（使其大于 9）
code2 是`random()%8*2`在 0-7 范围内生成随机数，然后将其加倍（使其均匀） code4 只是一个随机数数字从 0-15

您没有解释如何处理生成的代码，所以我只是打印了它。`sprintf`如果您需要将其打印成字符串以供进一步工作，您可以使用该函数。

# c++ - (N)RVO 的完整示例

> ID：12987245
> 
> 赞同：6
> 
> 时间：2012-10-20T09:51:44.143
> 
> 标签：c++, move-semantics, nrvo

我一直在阅读有关 (N)RVO 的内容，并且想要一份完整的场景描述。我希望这个问题能帮助其他 C++ 学习者澄清他们的想法。

假设这种情况：

```
string get_string() {
    string x("racecar");
    //work on x...
    return x;
}

string a( get_string() );
string b = get_string(); 
```

请暂时忽略 C++11 移动语义。

*   如果不执行 (N)RVO，将执行多少个构造函数/赋值/析构函数？（请指出它们所指的对象）

*   如果应用 (N)RVO，会发生什么变化？

*   最后，假设`std::string`支持移动语义的 C++11 中的情况如何变化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T10:14:10.400

1) 在内部`get_string`，一个字符串对象 (x) 将使用构造函数来构造，该构造函数采用`const char*`.

2）当函数返回时，内部构造的字符串会被复制构造到调用者空间中的一个临时字符串对象中。

3）临时将被复制构造到`a`。

4) 见 1

5) 见 2

6）见3，但副本将转到`b`

使用 RVO，2 和 5 可以通过在函数内部通过不可见的引用构造临时来消除。通过进一步的复制省略（不是 RVO），可以消除 3 和 6。所以这给我们留下了 2 个构造，都使用`const char*`构造函数。

使用 C++11 移动语义，如果编译器足够好来完成所有复制省略，情况就不会改变。如果没有复制省略，那么 2、3、5 和 6 仍然存在，但变成移动而不是复制。然而，与复制省略不同，这些移动不是可选的优化。一个符合要求的编译器必须执行它们，假设它还没有执行复制省略。

# visual-studio-2010 - CrystalReports 要求提供数据库登录凭据

> ID：12987250
> 
> 赞同：0
> 
> 时间：2012-10-20T09:52:38.153
> 
> 标签：visual-studio-2010, c#-4.0, crystal-reports

嗨，我的项目中有一个 Windows 窗体和一个 Crystal Report (.rpt)。我正在使用水晶报表查看器来查看报表。但是当我加载表单时，它要求数据库登录，即用户名和密码！我的数据库没有任何用户名和密码，它具有集成的安全性。我尝试检查集成安全框，将字段留空，但它没有让我登录！请帮忙，因此我无法查看报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:58:06.867

`<startup useLegacyV2RuntimeActivationPolicy="True">`在 app.config 文件中使用。

# java - 当使用 Oracle 的 Java 7 时，File.list() 在 Mac OS X 上错误地检索带有非 ASCII 字符的文件名

> ID：12987252
> 
> 赞同：18
> 
> 时间：2012-10-20T09:52:44.050
> 
> 标签：java, macos, utf-8, filenames

在使用 Oracle 的 Java 7 时，我在使用 File.list() 时遇到问题，其文件名中的非 ASCII 字符在 Mac OS X 上被错误地检索。

我正在使用以下示例：

```
import java.io.*;
import java.util.*;

public class ListFiles {

  public static void main(String[] args) 
  {
    try { 
      File folder = new File(".");
      String[] listOfFiles = folder.list(); 
      for (int i = 0; i < listOfFiles.length; i++) 
      {
        System.out.println(listOfFiles[i]);
      }
      Map<String, String> env = System.getenv();
      for (String envName : env.keySet()) {
        System.out.format("%s=%s%n",
            envName,
            env.get(envName));
      }
    } catch (Exception e) { 
      e.printStackTrace(); 
    } 
  }

} 
```

使用 Apple 的 Java 6 运行此示例，一切正常：

```
....
Folder-ÄÖÜäöüß
吃饭.txt
.... 
```

使用 Oracle 的 Java 7 运行此示例，结果如下：

```
....
Folder-A��O��U��a��o��u����
������.txt
.... 
```

但是，如果我将环境设置如下（以上两种情况都没有设置）：

```
LANG=en_US.UTF-8 
```

来自 Oracle 的 Java 7 的结果与预期的一样：

```
....
Folder-ÄÖÜäöüß
吃饭.txt
.... 
```

我的问题是我不想设置 LANG 环境变量。这是一个 GUI 应用程序，我想将其部署为 Mac OS X 应用程序，并且这样做，LSEnvironment 设置

```
<key>LSEnvironment</key>
<dict>
  <key>LANG</key>
  <string>en_US.UTF-8</string>
</dict> 
```

在 Info.plist 中无效（另请参见[此处](https://stackoverflow.com/questions/10535085/lsenvironment-section-of-info-plist-take-no-effects)）

如何在 Mac OS X 上的 Oracle 中正确检索 Java 7 中的文件名，而无需设置 LANG 环境？在 Windows 和 Linux 中，这个问题不存在。

**编辑：**

如果我打印单个字节：

```
byte[] x = listOfFiles[i].getBytes();
for (int j = 0; j < x.length; j++) 
{
    System.out.format("%02X",x[j]);
    System.out.print(" ");
}
System.out.println(); 
```

正确的结果是：

```
Folder-ÄÖÜäöüß
46 6F 6C 64 65 72 2D 41 CC 88 4F CC 88 55 CC 88 61 CC 88 6F CC 
88 75 CC 88 C3 9F 
吃饭.txt
E5 90 83 E9 A5 AD 2E 74 78 74 
```

错误的结果是：

```
Folder-A��O��U��a��o��u����
46 6F 6C 64 65 72 2D 41 EF BF BD EF BF BD 4F EF BF BD EF BF BD 
55 EF BF BD EF BF BD 61 EF BF BD EF BF BD 6F EF BF BD EF BF BD 
75 EF BF BD EF BF BD EF BF BD EF BF BD  
������.txt
EF BF BD EF BF BD EF BF BD EF BF BD EF BF BD EF BF BD 2E 74 78 74 
```

所以可以看到 Files.list() 用 UTF-8 "EF BF BD" = Unicode U+FFFD = Replacement Character 替换了一些字节，如果 LANG 没有设置（只有 Oracle 的 Java 7）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T11:46:20.123

如果其他一切都失败了，请为设置 LC_CTYPE 环境变量的 JVM 创建一个包装器，然后启动您的应用程序。OS X 不在乎 plist 告诉它运行哪个程序，是吗？在 shell 脚本中创建这个包装器可能是最简单的：

```
#!/bin/bash
export LC_CTYPE="UTF-8" # Try other options if this doesn't work
exec java your.program.Here 
```

问题在于 Java（Apple 或 Oracle 的任何 Java 版本）从文件系统读取文件名的方式。文件系统上的文件名本质上是二进制数据，必须对其进行解码才能在 Java 中作为字符串使用。（您可以在我的博客中[阅读有关此问题的更多信息。）](http://jonisalonen.com/2012/java-and-file-names-with-invalid-characters/)

编码的检测因平台和版本而异，因此这一定是 Apple Java 6 和 Oracle Java 7 不同的地方：Java 6 正确检测到系统设置为 UTF-8，而 Java 7 则错误。

奇怪的是，当我尝试使用以下程序重现该问题时，我发现 Java 6 和 Java 7 都*正确*使用 UTF-8 来解码文件名（它们被正确打印到终端）。对于其他 I/O，Java 6u35 使用 MacRoman 作为默认字符集，而 Java 7u7 使用 UTF-8（由`file.encoding`系统属性显示）。

```
import java.io.*;

public class Test {
  public static void main(String[] args) {
    System.setOut(new PrintStream(System.out, true, "UTF-8"));
    System.out.println(System.getProperty("file.encoding"));
    for (File f: new File(".").listFiles) {
      System.out.println(g.getName());
    }
  }
} 
```

当我`locale`在 OS 10.7 上运行时，我得到了这个输出。在我的系统上，Java 6 似乎没有正确解释为 LC_CTYPE 给出的值。据我所知，系统没有自定义，一切都设置为英文，所以这应该是默认配置：

```
LANG=
LC_COLLATE="C"
LC_CTYPE="UTF-8"
LC_MESSAGES="C"
LC_MONETARY="C"
LC_NUMERIC="C"
LC_TIME="C"
LC_ALL= 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T09:59:53.487

由于从 Java6 运行会给出正确的结果，这是否会：

```
System.out.println(new String(listOfFiles[i].getBytes(),"UTF-8")); 
```

解决这个问题？

这个建议的[构造](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String%28byte%5b%5d,%20java.lang.String%29)函数将 listOfFiles[i] 字符串显式解释为 UTF-8 编码字符串。

编辑：

由于它不起作用，这意味着 UTF-8 不是 os x 的默认编码。不过，维基百科说[Mac OS Roman](http://en.wikipedia.org/wiki/Mac_OS_Roman)是。所以我建议尝试：

```
System.out.println(new String(listOfFiles[i].getBytes(),"MacRoman")); 
```

但这应该[与](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#String%28byte%5b%5d%29)

```
System.out.println(new String(listOfFiles[i].getBytes())); 
```

因此，如果这也不起作用，那么就会得出结论，正如 Andrew Thomson 在对您的问题的评论中所说的那样，这可能是一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:04:10.440

这是 OpenJDK 中的一个已知错误。OS X 10.6 和 OS X 10.7 为默认语言环境返回不同的值。请参阅错误[http://java.net/jira/browse/MACOSX_PORT-204](http://java.net/jira/browse/MACOSX_PORT-204)和[http://java.net/jira/browse/MACOSX_PORT-165](http://java.net/jira/browse/MACOSX_PORT-165)。如果您遇到此问题，请投票支持解决此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-12T20:51:00.540

将您的 JDK 降级到内置的 Mac OSX JDK。如果你这样做，问题应该会消失。

此外，您可能还希望将 Eclipse 中的运行配置设置为以 UTF-8 运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-24T13:58:03.500

这是旧的 java File api 中的一个错误（可能只是在 mac 上）。无论如何，这一切都在新的 java.nio 中得到了修复。

我有几个文件在文件名和内容中包含无法使用 java.io.File 和相关类加载的 unicode 字符。在将我的所有代码转换为使用[java.nio.Path](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)之后，一切都开始工作了。我用[java.nio.Files](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html)替换了 org.apache.commons.io.FileUtils （有同样的问题） ......

...并确保使用适当的字符集读取和写入文件的内容，例如： Files.readAllLines(myPath, StandardCharsets.UTF_8)

# c - C：在这种情况下，字符串的表现如何？

> ID：12987256
> 
> 赞同：1
> 
> 时间：2012-10-20T09:53:24.383
> 
> 标签：c, string, variables, pointers, char

> **可能重复：**
> [文字字符串放在哪里，为什么我可以返回指向它们的指针？](https://stackoverflow.com/questions/11060504/where-are-literal-strings-placed-and-why-can-i-return-pointers-to-them)

假设我有一些如下代码：

```
char *string;

void foo(char *s)
{
   string = s;
}

foo("bar"); 
```

内部发生了什么？因为我没有明确声明我传递给 foo 的内容，例如通过做类似的事情。

```
char s[] = "bar";
foo(s); 
```

“bar”会一直存储在同一个内存位置吗？是否会自动为其分配一些内存？如果是这样，这个地址是否保持不变，所以“string”总是指向一个包含“bar”的 char 数组？

我想我要问的更一般的问题是：当您将参数传递给函数而不首先将其显式分配给某个变量，然后传入该变量时，内部会发生什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T09:57:27.293

```
char *string;

void foo(char *s)
{
   string = s;
}

foo("bar"); 
```

`"bar"`是一个字符串文字。字符串文字具有静态存储持续时间，它们的生命周期（与所有具有静态存储持续时间的对象一样）是程序的整个执行。

所以基本上在程序启动时内存中的某处有一个`"bar"`数组对象，并且在程序执行期间您将指针传递给它的第一个元素，这完全没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T09:57:36.300

您的代码本质上等同于

```
char *string;

string = "bar"; 
```

在这种情况下，假设一个健全的实现，`"bar"`作为字符串文字，将存储在可执行文件中的一个恒定位置并加载到（可能是只读的）内存中，也加载到内存中的相同（虚拟）地址，`string`以便总是指向一个有效的字符串。

# sql - 多个联合都在公用表表达式中

> ID：12987257
> 
> 赞同：0
> 
> 时间：2012-10-20T09:53:25.193
> 
> 标签：sql, recursive-query

我只是在玩 cte 打印 1 到 10 或打印 12 个月

```
create table eventlist 
  (
    id int identity(1,1) not null, 
    edate smalldatetime 
  )
  select * from eventlist

  insert into eventlist select '01/01/2012'

  ;with cte AS
    (
       select edate from eventlist 
       union all 

       select dateadd(M,1,edate) from cte where MONTH(edate)<12

    )

    select MONTH(edate), YEAR (edate) from cte 
```

但突然间，我只是像这样将 cte 中的另一个联合所有部分组合在一起

```
;with cte AS
    (
       select edate from eventlist 
       union all 

       select dateadd(M,1,edate) from cte where MONTH(edate)<12
       union all 
       select dateadd(Y,1,edate) from cte where YEAR(edate)<2013

    )

    select MONTH(edate), YEAR (edate) from cte 
```

当我运行这个我会得到这个错误

**声明终止。在语句完成之前，最大递归 100 已用完。**

由于递归限制，我理解这个错误，但是 **`i just want to understand how will this recurssion will work ?`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:17:12.380

`Y`是 DateOfYear 的缩写，而不是年份。尝试`yy`甚至`yyyy`更好的`year`.

你得到的错误是因为你超过了 recursion 限制。您要求 CTE 从日期 ( `'2012-01-01'`) 开始，并且在每个（递归）步骤中，生成一个月后的第二天（`'2012-01-01'`第一步）**和**第二天（`'2012-01-02'`第一步）。然后在第二步中，必须再生产 4 行，第一步生产的每行新行 2 行。然后是 8，然后是 16，依此类推（该条件`MONTH(edate)<12`仅在您在第 11 步中产生 2^10 新行之后才有效。即使那样，它也只会稍微限制后续步骤中产生的行数。您原来的如果没有递归限制，查询将创建数百万行）。

这就是为什么您的 CTE 不会像您期望的那样返回 24 行，而是返回 90 行（即使您更改`Y`为`Year`），因为双重递归。

用这个：

```
; with cte AS
(
   select edate from eventlist 
   union all 
   select dateadd(Month,1,edate) from cte where MONTH(edate)<12
)

, cte2 AS
(
   select edate from cte 
   union all 
   select dateadd(Year,1,edate) from cte2 where YEAR(edate)<2013
)

select MONTH(edate), YEAR(edate) from cte2 ; 
```

或者我认为更简单的这个：

```
; with cte AS
(
   select edate from eventlist 
   union all 
   select dateadd(Month,1,edate) from cte where edate < '2013-12-01'
)

select MONTH(edate), YEAR(edate) from cte ; 
```

# c++ - 为什么非静态数据成员引用不是变量？

> ID：12987259
> 
> 赞同：12
> 
> 时间：2012-10-20T09:53:30.207
> 
> 标签：c++, variables, c++11, standards, definition

*C++11中变量*的定义如下（§3/6）：

> *变量*是由非静态数据成员或对象以外的引用的声明引入的。变量的名称表示引用或对象。

所以非静态数据成员引用不是变量。为什么这种区分是必要的？这里的理由是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T10:23:07.440

这是我可以在 C++ 中声明变量的一种方法：

```
int scientist = 7; 
```

在这个声明（和定义，在这种情况下）之后，我可以使用`scientist`它来读取和设置它的值，获取它的地址等。这是另一种声明：-

```
class Cloud {
    public:
    static int cumulonimbus = -1;
}; 
```

这个有点复杂，因为我必须将新变量称为`Cloud::cumulonimbus`，但我仍然可以读取并设置它的值，所以它显然仍然是一个变量。这是一种不同的声明：-

```
class Chamber {
    public:
    int pot;
}; 
```

但是在这个声明之后，没有一个名为`pot`, 或的变量`Chamber::pot`。事实上根本没有新的变量。我已经声明了一个新类，*当我稍后声明该类的一个实例时，*它将有一个名为 的成员`pot`，但现在，什么都没有。

类的非静态数据成员本身不会创建新变量，它只是帮助您定义类的属性。如果它确实创建了一个新变量，您将能够编写如下代码：

```
class Chamber {
    public:
    int pot;
};

void f(bool b) {
    if (b)
        Chamber::pot = 2;
} 
```

这甚至意味着什么？它会找到每个实例`Chamber`并将它们的所有`pot`s 设置为 2 吗？这是胡说八道。

一个快速的脚注：这里的标准语言专门讨论引用，但为了使示例更容易，我一直在使用非引用。我希望你能看到这并没有改变它的原则。

# mod-rewrite - 如何使用真实姓名将url重定向到httpd.conf中的另一个站点

> ID：12987261
> 
> 赞同：2
> 
> 时间：2012-10-20T09:54:10.577
> 
> 标签：mod-rewrite, httpd.conf

我的配置很简单：2 Apache 服务器

*   服务器 1：带有域的“IP1”（test.com）
*   服务器 2：没有域的“IP2”

在我的服务器 1 的文件 httpd.conf 中，我想访问：

*   安装在服务器 1 上的 tomcat 的 url 为：test.com
*   到具有虚拟主机的服务器 2 的 apache，其 url 为：test.com/server2

*httpd.conf / 服务器 1*

```
RewriteRule ^/server2$ http://'IP2'/web/test.php/  [L]
ProxyPass / ajp://'IP1':PORT/ retry=5 
```

它可以工作，但第二个 URL 不显示**test.com/server2**而是**http://'IP2'/web/test.php/**。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:04:41.523

作为重写`http://'IP2'`规则目标的一部分，自动 302 重定向浏览器。但是由于它在不同的机器上，并且您不希望浏览器中的 URL 地址栏发生变化，因此您需要使用 mod_proxy 而不是 mod_rewrite。

`RewriteRule`将行更改为，`ProxyPass`以便它反向代理请求而不是重定向：

```
ProxyPassMatch ^/server2$ http://'IP2'/web/test.php/ 
```

# android - ActionBarSherlock 中溢出图标和操作项之间的间距

> ID：12987263
> 
> 赞同：5
> 
> 时间：2012-10-20T09:54:15.100
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock

我在我的项目中使用 ActionBarSherlock(ABS)，溢出图标在操作项的左侧占据了太多的边距。我的项目中有最新的 ABS 库。您可以看到下面提到的问题的屏幕截图。

![夏洛克动作棒果冻豆](../Images/7804e5af0cbb0d6b3eb4e78c1039a96e.png)

手机在 JellyBean 版本上运行。如何减少溢出图标和操作项之间的空间？

**更新**

我尝试通过应用自定义主题来更改操作项属性

```
<style name="DelightActionButtonStyle" parent="Widget.Sherlock.ActionButton">
        <!--  <item name="android:background">?attr/actionBarItemBackground</item> -->
        <item name="android:background">@color/black</item>
        <item name="android:minHeight">?attr/actionBarSize</item>

        <item name="android:minWidth">0dp</item>
        <item name="android:gravity">center</item>
        <item name="android:paddingLeft">20dp</item>
        <item name="android:paddingRight">20dp</item>
        <item name="android:scaleType">center</item>
    </style> 
```

只有背景属性在没有菜单按钮的设备上生效。我玩了改变边距和填充的属性，似乎没有任何效果。有没有办法控制操作项的这些属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T08:59:10.243

如果你真的需要改变它，这里是如何减少溢出按钮的宽度：

```
<style name="AppTheme" parent="Theme.Sherlock">
    <item name="android:actionOverflowButtonStyle">@style/MyOverflowButton</item>
</style>

<style name="MyOverflowButton" parent="Widget.Sherlock.ActionButton.Overflow">
    <item name="android:minWidth">32dip</item>
    <item name="android:padding">0dip</item>
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T15:40:58.187

您的操作按钮太小。它们不应小于 48dp。如果必须这样做（不应该这样做），您可以覆盖该`actionButtonStyle` `android:minWidth`属性：

[https://stackoverflow.com/a/10808259/377260](https://stackoverflow.com/a/10808259/377260)

一定要包括`android:actionButtonStyle`.

# python - 如果使用嗅探器重新执行金字塔应用程序的测试将失败

> ID：12987265
> 
> 赞同：2
> 
> 时间：2012-10-20T09:54:29.770
> 
> 标签：python, testing, pyramid, zope.interface

我刚刚开始为一个金字塔网络应用程序建立并运行我的测试环境。我只有一些基本的测试，包括一些由金字塔贴纸模板创建的示例。如果我通过`nosetest`一切运行它们，一切正常。

如果我通过[sniffer](http://pypi.python.org/pypi/sniffer)运行它们，第一次运行也可以正常工作。但是如果我更改我的代码并且嗅探器再次运行测试，我会得到以下堆栈跟踪：

```
======================================================================
ERROR: Failure: TypeError (isinstance() arg 2 must be a class, type, or tuple of classes and types)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/domma/Develop/WebApps/Gligg/gligg_env/lib/python2.7/site-packages/nose/loader.py", line 390, in loadTestsFromName
    addr.filename, addr.module)
  File "/Users/domma/Develop/WebApps/Gligg/gligg_env/lib/python2.7/site-packages/nose/importer.py", line 39, in importFromPath
    return self.importFromDir(dir_path, fqname)
  File "/Users/domma/Develop/WebApps/Gligg/gligg_env/lib/python2.7/site-packages/nose/importer.py", line 86, in importFromDir
    mod = load_module(part_fqname, fh, filename, desc)
  File "/Users/domma/Develop/WebApps/Gligg/Gligg/gligg/__init__.py", line 1, in <module>
    from pyramid.config import Configurator
  File "/Users/domma/Develop/WebApps/Gligg/gligg_env/lib/python2.7/site-packages/pyramid/__init__.py", line 1, in <module>
    from pyramid.request import Request
  File "/Users/domma/Develop/WebApps/Gligg/gligg_env/lib/python2.7/site-packages/pyramid/request.py", line 27, in <module>
    from pyramid.response import Response
  File "/Users/domma/Develop/WebApps/Gligg/gligg_env/lib/python2.7/site-packages/pyramid/response.py", line 28, in <module>
    class Response(_Response):
  File "/Users/domma/Develop/WebApps/Gligg/gligg_env/lib/python2.7/site-packages/zope/interface/declarations.py", line 306, in __call__
    classImplements(ob, *self.interfaces)
  File "/Users/domma/Develop/WebApps/Gligg/gligg_env/lib/python2.7/site-packages/zope/interface/declarations.py", line 244, in classImplements
    spec = implementedBy(cls)
  File "/Users/domma/Develop/WebApps/Gligg/gligg_env/lib/python2.7/site-packages/zope/interface/declarations.py", line 169, in implementedByFallback
    if isinstance(spec, Implements):
TypeError: isinstance() arg 2 must be a class, type, or tuple of classes and types

---------------------------------------------------------------------- 
```

在我的设置中，我有：

```
self.config = testing.setUp()
engine = create_engine('sqlite://')        
DBSession.configure(bind=engine)
Base.metadata.create_all(engine) 
```

在我的拆解中：

```
DBSession.remove()
testing.tearDown() 
```

导入时已经发生错误`Configurator`，所以我想我错过了一些重置一些内部的清理代码。但我不知道它可能是什么。任何提示都会非常受欢迎！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:50:47.567

这听起来像是嗅探器中的一些奇怪行为，它在运行之间没有正确重新加载应用程序。您的拆卸代码看起来不错，应该关闭当前线程中未完成的数据库连接，并弹出 Pyramid 使用的任何线程本地。

# javascript - 互斥锁（JS）在浏览器的多个选项卡之间共享？

> ID：12987272
> 
> 赞同：11
> 
> 时间：2012-10-20T09:55:44.110
> 
> 标签：javascript, browser, mutex

浏览器中的两个选项卡有什么方法可以共享 Mutex（在 JavaScript 中）？

我正在使用 node.js 和 socket.io 开发一个网络应用程序，我希望各种选项卡与服务器共享一个连接。所谓的“领导”选项卡是唯一保持连接的选项卡，而发送到其余选项卡的消息都通过此选项卡中继。现在，我正在使用领导者选举算法来选择领导者，但考虑到如果当前领导者出现故障，重新选举新领导者需要一两秒钟，我想知道是否有更好的方法来做相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-16T12:47:27.263

有各种库要么尝试直接解决锁定问题，要么提供选项卡之间的消息传递，您可以将其用作构建块。查看：

*   [https://github.com/tejacques/crosstab](https://github.com/tejacques/crosstab)
*   [https://github.com/slimjack/IWC](https://github.com/slimjack/IWC)
*   [https://github.com/nodeca/tabex](https://github.com/nodeca/tabex)
*   [http://balpha.de/2012/03/javascript-concurrency-and-locking-the-html5-localstorage/](http://balpha.de/2012/03/javascript-concurrency-and-locking-the-html5-localstorage/)
*   [https://github.com/jitbit/TabUtils](https://github.com/jitbit/TabUtils)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-16T15:01:24.713

有一个模块通过在 BroadcastChannel-API 上使用领导者选举来解决这个问题。[看](https://github.com/pubkey/broadcast-channel)

# c++ - 错误“表达式：字符串下标超出范围”

> ID：12987273
> 
> 赞同：2
> 
> 时间：2012-10-20T09:56:02.090
> 
> 标签：c++, visual-c++

我正在尝试编写一个代码以允许用户输入一个非常大的数字“大于正常“int”的大小，因此我试图将用户输入作为字符串并从字符串中获取每个值并传递它到一个 int 例如`s="3786473646768"`所以 int 将获取每个值并将其保存在一个向量中。

这是一个非常简单的语法，我输入两个字符串，但如果它们不相等，它会给我一个窗口，上面写着“表达式：字符串下标超出范围”有什么帮助吗？

```
#include "stdafx.h"
#include <iostream>
#include <sstream>
#include <string>
#include <vector>

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{

  int val1=0,val2=0,val3=0,val4=0;
  string i,p;
  vector <int>add;
  vector <int>sub; 
  cout<<"Enter a number: "<<endl;
  cin>>i;
  int sizei=i.length();
  cout<<"Enter a number: "<<endl;
  cin>>p;
  int sizep=p.length();

  for (int n=0; n<sizei; n++)
   {
     val1=int(i[n]);
     val1=val1-48;
     val2=int(p[n]);
     val2=val2-48;
     val3=val1+val2;
     val4=val1-val2;
     add.push_back(val3);
     sub.push_back(val4);
   }
  cout<<"\n";
  for(unsigned int a=0;a<add.size();a++)
      cout<<add.at(a);
  cout<<"\n";
  for(unsigned int a=0;a<sub.size();a++)
      cout<<sub.at(a);
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:05:39.193

```
for (int n=0; n<sizei; n++) 
```

在这个循环中，n 的值从`0 ... sizei - 1`

但是，如果**sizep**小于`sizei - 1`，它将尝试访问`p[n]`或等效 地访问`p[sizei-1]`，这超出了您声明​​的字符串的范围。

# ios - iOS 身份与钥匙串不匹配

> ID：12987277
> 
> 赞同：0
> 
> 时间：2012-10-20T09:56:09.327
> 
> 标签：ios, xcode, code-signing

每次我注销并登录到我的远程 Mac 时，我都会在存档时收到此错误：

```
The identity 'XXXX' doesn't match any valid, non-expired certificate/private key pair in your keychains. 
```

每次，我都需要申请新证书，更新我在 iTunes Connect 网站上的所有配置文件，并重建我的应用程序。

从最近开始，这对我来说根本不是问题。但现在我需要在每次登录时执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:35:55.580

好的，我想通了。在钥匙串中，从 login-certificates 中选择已知可与您的配置文件一起使用的证书。选择文件->导出项目。它将询问您选择的密码。提供它，并将文件另存为 .p12 在您喜欢的位置。

重新登录后，启动钥匙串。如果您的证书未显示在登录证书下的钥匙串中，请执行此操作。

*   文件->导入项目
*   选择之前保存的 p12 文件。它会要求输入密码。输入先前指定的。
*   证书将出现，带有一个下拉箭头。单击此箭头将显示私钥。只有这样的证书是有效的，错误的原因正是因为它没有找到你的私钥。
*   在 XCode 管理器中的设备下，进行刷新。您指定的配置文件现在应该显示为有效。归档您的应用程序，不会有错误。

**注意：** 当您也需要将开发转移到另一台 Mac 时，可以使用相同的方法。在重新登录到目标 mac 后执行这些步骤，从源 mac 获取 p12 导出文件。

# php - PHP：使用 CLI 或 Crontab 而不是 Sleep() 延迟指令

> ID：12987282
> 
> 赞同：2
> 
> 时间：2012-10-20T09:56:48.883
> 
> 标签：php, multithreading, cron

**上下文**
我需要通过在他们离线时向他们发送电子邮件来警告我的网站用户发生的事件，或者如果他们在线（使用 websockets/push 事件）向他们显示 javascript 通知。
其中一些事件应**在一定时间后**触发（针对特定的应用程序/业务逻辑）。

我不会使用*sleep()*因为它可能会导致性能问题。

您将如何使用 Crontab 和/或 CLI 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:25:04.160

如果您有一个套接字并且您可以发送并且它会被交付，那么就可以了。你可以检查一下。否则必须邮寄。这就是整个逻辑。因此，请尝试查看是否可以通过套接字发送，否则可以发送邮件。不要等待它：

为此使用一些队列软件，这确实是一个干净的消息队列，可以通过非常标准的解决方案来实现。所以只需将其发送到队列并在队列脚本中执行逻辑。

除非您有非常特殊的需求，否则您永远无法比擅长等待的队列更好地实现等待。

一些更具体的回答选项： [http ://www.javacodegeeks.com/2012/04/rabbitmq-scheduled-message-delivery.html](http://www.javacodegeeks.com/2012/04/rabbitmq-scheduled-message-delivery.html)

[具有延迟的简单可扩展工作/消息队列](https://stackoverflow.com/questions/2364080/simple-scalable-work-message-queue-with-delay)

# ios - 更改 Apple 开发者资料的名称

> ID：12987283
> 
> 赞同：9
> 
> 时间：2012-10-20T09:56:52.190
> 
> 标签：ios, xcode

我昨天接手了我父亲的 Apple Developer Account，但我真的不知道如何更改它以在 Member Center 和 iTunes Connect 中显示我的名字。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T11:17:43.700

这也发生在我身上，几个月前我为我的兄弟购买了一个开发者帐户，他最终决定他不想付出努力。此时我通过电子邮件和电话联系了 Apple，他们解释说我认为无法将帐户转移到我的名下（单个开发人员不能拥有多个帐户）。

之后，我决定将帐户提供给有兴趣学习可可的朋友并重复联系 Apple 的过程，结果发现“每个开发人员限制 1 个”规则并不是我无法转移帐户的唯一原因。 .. 基本上他们告诉我我运气不好。

创建开发者帐户后，您可以更改帐户名称的**唯一方法是将其从个人帐户迁移到企业帐户。**

很抱歉这么说，但你坐在一个 99 美元的无用帐户上。（我就在你身边）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:01:37.373

您可以联系 Apple 开发人员支持以获取此类信息。他们会帮助你。

# c++ - 负的或超大的 stl deque？

> ID：12987284
> 
> 赞同：0
> 
> 时间：2012-10-20T09:56:55.647
> 
> 标签：c++, indexing, deque

我有双端队列并想向后迭代。我还需要索引（否则我会使用 reverse_iterator）所以我尝试了：

```
if ( _children.size( ) > 0 ) // debugging purpose
{
    unsigned si( _children.size( ) ); // debugging purpose
    int s( _children.size( ) - 1 ); // debugging purpose
    for ( unsigned c ( 0 ) ; c < _children.size( ) ; ++c )
        if ( this->_children[ ( _children.size( ) - 1 ) - c ]->Topmost( ) && 
             this->_children[ ( _children.size( ) - 1 ) - c ]->BorderRectangle( ).IsIn( X , Y ) )
               return std::pair< int, WindowPointer >( ( _children.size( ) - 1 ) - c, this->_children[ ( _children.size( ) - 1 ) - c ]->WindowAt( x, y ) ); 
```

但我得到一个 sigsev。调试后我得到那个索引是-65。我检查了 _children.size()

```
unsigned si = _children.size( ); 
```

它是 4294967232。和

```
long s = _children.size( ) - 1; 
```

是-65。我如何获得这样的价值观？以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T10:02:40.770

你应该使用`reverse_iterator`. 如果要跟踪索引，可以像这样在 for 循环中添加一个变量：

```
int counter = 0;
for (xx::reverse_iterator it = yy.rbegin(); it != yy.rend(); ++it, ++counter) {
    // Do something
} 
```

这比你正在做的更不容易出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T10:11:57.190

可能你得到这些奇怪的值是因为你的代码中有一个错误。

您可以使用反向迭代器并获取索引，如下所示

```
for (T::reverse_iterator i = x.rbegin(); i != x.rend(); ++i)
{
    size_t index = i.base() - x.begin();
    // Do something
} 
```

反向迭代器的基本方法返回相应的正向迭代器，从中减去 x.begin() 并获得索引。

# iphone - dispatch_async 内存问题

> ID：12987286
> 
> 赞同：0
> 
> 时间：2012-10-20T09:57:12.083
> 
> 标签：iphone, objective-c, ios, xcode, grand-central-dispatch

我`touchesEnded`在我的绘图应用程序中调用以下代码。但是，每次调用它时，内存使用量都会增加大约 2MB。最终它可能在 90-100MB 左右，如果用户快速绘制，应用程序将崩溃。

我在这里做错了什么？我怎样才能使这段代码快速但内存使用最少？

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{

    if(_pagessavedbg.count > selectedIndex)
        self.topimage = [[UIImage alloc] initWithCGImage:[[_pagessavedbg objectAtIndex:selectedIndex] CGImage]];

    else
        self.topimage = [[UIImage alloc] initWithCGImage:[[UIImage imageNamed:@"BlankImage.png"] CGImage]];

    UIImage *bottomimage = [notification.userInfo objectForKey:@"Image"];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    NSError *error2 = nil;

    NSURL *documentsURL = [[NSFileManager defaultManager]
                           URLForDirectory:NSDocumentDirectory
                           inDomain:NSUserDomainMask
                           appropriateForURL:nil
                           create:YES
                           error:nil];

    CGSize size = CGSizeMake(874, 732);
    UIGraphicsBeginImageContextWithOptions(size, NO, 1);
    [self.topimage drawInRect:CGRectMake(0, 0, size.width, size.height)];
    [bottomimage drawInRect:CGRectMake(0, 0, size.width, size.height)];
    UIImage *latest = UIGraphicsGetImageFromCurrentImageContext();
    [activeView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *latest2 = UIGraphicsGetImageFromCurrentImageContext();
    CGContextFlush(UIGraphicsGetCurrentContext());
    UIGraphicsEndImageContext();

    if(_pages.count > selectedIndex)
    {
    if([_pages objectAtIndex:selectedIndex])
    [_pages replaceObjectAtIndex:selectedIndex withObject:latest];
    }

    if(_pages.count > selectedIndex)
    {
    if([_pagessavedbg objectAtIndex:selectedIndex])
    [_pagessavedbg replaceObjectAtIndex:selectedIndex withObject:latest2];

    else
    [_pagessavedbg insertObject:latest2 atIndex:selectedIndex];
    }

    NSData *data = UIImageJPEGRepresentation(latest, 1.0);

    NSError *error = nil;

    NSDictionary *fileObjectMap = @{
    @"ImageData" : data,
    };

    for (NSString *filename in fileObjectMap)
    {
        NSData       *data = [NSPropertyListSerialization
                              dataWithPropertyList:fileObjectMap[filename]
                              format:NSPropertyListXMLFormat_v1_0
                              options:0
                              error:&error];

        if (!data) {
            NSLog(@"Failed to serialize array for filename %@ (contents %@) with error %@", filename, fileObjectMap[filename], error);
            return;
        }

        NSURL        *fileURL = [[documentsURL URLByAppendingPathComponent:filename]
                                 URLByAppendingPathExtension:@"txt"];

        if (![data writeToURL:fileURL options:NSDataWritingAtomic error:&error]) {
            NSLog(@"Failed to write data to file URL %@ for filename %@ (data %@) with error %@", fileURL, filename, data, error);
            return;
        }
    }

    NSString *indexnotext = [defaults objectForKey:@"IndexNumber"];
    myInt = [indexnotext intValue];

    dispatch_async(dispatch_get_main_queue(), ^{
    [self.sidebar reloadData];
    [self.sidebar scrollRowAtIndexToVisible:_sidebar.selectedIndex];
    });    

    if (!documentsURL) {
        NSLog(@"Failed to get documents URL: %@", error2);
        return;
    }

    NSMutableArray *imageDatas = [NSMutableArray arrayWithCapacity:self.pages.count];

    for (UIImage *image in [_pages copy])
    {

        if(!image)
        break;

        else
        [imageDatas addObject:UIImageJPEGRepresentation(image, 1.0)];

    }

    NSMutableArray *imageDatas2 = [NSMutableArray arrayWithCapacity:self.pagessavedbg.count];

    for (UIImage *image2 in [self.pagessavedbg copy])
    {
        if(!image2)
        break;

        else
        [imageDatas2 addObject:UIImageJPEGRepresentation(image2, 1.0)];

    }

    NSDictionary *fileObjectMap2 = @{
    [NSString stringWithFormat:@"SavedPages%i", [_indexnumber intValue]] : imageDatas,
    [NSString stringWithFormat:@"SavedPagesBG%i", [_indexnumber intValue]] : imageDatas2,
    };

    for (NSString *filename2 in fileObjectMap2)
    {
        self.data2 = [NSPropertyListSerialization
                              dataWithPropertyList:fileObjectMap2[filename2]
                              format:NSPropertyListXMLFormat_v1_0
                              options:0
                              error:&error2];

        if (!self.data2) {
            NSLog(@"Failed to serialize array for filename %@ (contents %@) with error %@", filename2, fileObjectMap2[filename2], error2);
            return;
        }

        NSURL        *fileURL2 = [[documentsURL URLByAppendingPathComponent:filename2]
                                 URLByAppendingPathExtension:@"txt"];

        if (![self.data2 writeToURL:fileURL2 options:NSDataWritingAtomic error:&error2]) {
            NSLog(@"Failed to write data to file URL %@ for filename %@ (data %@) with error %@", fileURL2, filename2, self.data2, error2);
            return;
        }

    }

}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-20T11:39:46.323

使用 XCODE 仪器工具

1.  点击产品 -> 简介
2.  单击泄漏
3.  检查[链接](http://www.streamingcolour.com/blog/tutorials/tracking-iphone-memory-leaks/)

# opengl - 使用 OpenGL 的散点图：如何设置标记样式

> ID：12987288
> 
> 赞同：2
> 
> 时间：2012-10-20T09:57:19.810
> 
> 标签：opengl, graphics, 3d, scatter-plot

我正在尝试使用 OpenGL（出于性能原因）来绘制散点图。我对 2D 和 3D 都感兴趣。

我有哪些*样式*标记选项，例如使不同的组可见？

显然我可以改变颜色。但在“传统”散点图中，也使用圆形、加号、Xes、框等 - 我如何在 OpenGL 散点图中最好地实现这些？

我是否应该将所需的 2D 标记渲染为一个小纹理，然后为每个标记绘制一个带有纹理的三角形？我可以将纹理仅用于 Alpha，但使用动态颜色吗？（例如有纹理=类，颜色=其他分数）？

在 OpenGL 中是否有任何我在常规绘图库（例如 gnuplot）中没有的样式标记的更酷方法？

任何性能提示？显示列表或顶点缓冲区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T10:07:11.713

这是很多问题。让我一一解决。

> 我有哪些样式标记选项，例如使不同的组可见？

颜色、形状、大小，甚至动画。

> 显然我可以改变颜色。但在“传统”散点图中，也使用圆形、加号、Xes、框等 - 我如何在 OpenGL 散点图中最好地实现这些？

广告牌精灵（[教程](http://www.lighthouse3d.com/opengl/billboarding/)）。这个想法是绘制一个小四边形，使其始终面向相机。这种旋转可以在 CPU 上完成，但如果相机移动并且您需要在每一帧重新计算它，那么在顶点着色器中执行它可能会更快。

> 我是否应该将所需的 2D 标记渲染为一个小纹理，然后为每个标记绘制一个带有纹理的三角形？

两个三角形（即一个正方形）是常用的方法，因为正方形更容易纹理化。

> 我可以将纹理仅用于 Alpha，但使用动态颜色吗？（例如有纹理=类，颜色=其他分数）？

是的。如果您使用固定管道，纹理将由当前颜色调制。换句话说，如果您的纹理中有一个带有 alpha 的白色标记，并且您将当前颜色设置为红色，您将得到一个红色标记。如果您使用着色器，则必须在片段着色器中执行此操作。

> 在 OpenGL 中是否有任何我在常规绘图库（例如 gnuplot）中没有的样式标记的更酷方法？

就像我提到的：动画。你可以让你的标记旋转，上下摆动，或者以不同的速度随机摆动。我曾经听说过一种计算机网络可视化系统，其中水会从计算机图标中滴出以指示数据包丢失，并且会冒烟和火来指示 CPU 过热。极限是你的想象力！

> 任何性能提示？显示列表或顶点缓冲区？

顶点缓冲区。可能是着色器。但是根据您的数据集的大小和您使用 OpenGL 的经验，您可以在没有任何一个的情况下侥幸逃脱。

先尝试最简单的事情，如果太慢，就用更快的实现来代替瓶颈。不要试图一次做所有事情；让一件事发挥作用，然后逐步添加和改进一个步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:04:38.290

OpenGL 在它为您提供的图形基元方面是非常基础的。任何比点、线或三角形更复杂的东西，无论是否有纹理，都必须由用户实现。

我认为最好的做法是在标记位置绘制小四边形。使用实例化绘图和着色器可以非常有效地完成此操作。寻找现代粒子系统渲染技术来获得这个想法。标记的形状可以由纹理定义，或者，这就是我要做的，在片段着色器中通过求解一些描述标记形状的方程来程序化，并且`discard`- 将所有片段不属于形状的一部分.

# php - 在 Zend 中，在两个动作之间传递值而不通过 url 传递它们？

> ID：12987291
> 
> 赞同：1
> 
> 时间：2012-10-20T09:57:38.853
> 
> 标签：php, zend-framework, zend-studio

有没有什么特定的方法可以在两个动作之间传递值而不通过 Zend 中的 url 传递它们？

```
<a href="#">View</a> 
```

这是我必须使用它的地方。当我单击视图时，我应该被重定向到另一个控制器上的不同操作，并且我必须在那里获取值。此外，在我的情况下不允许使用会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:36:46.087

在您的情况下，要将值从 phtm 传递到另一个控制器操作，您必须通过 get /post 方法传递它。像这样 `<a href="/yourcontroller/action/param_name/value">View</a>`，在你的行动中使用`$this->getRequest()->getParam('param_name');`

```
below given may be helpful 
```

完成一个动作后调用另一个动作使用 forward

```
`$this->_forward('controller','action2');` 
```

然后使用

```
 $test=$this->getRequest()->getParam('yourparam'); 
```

或者`keep in zend registry`如果你在引导程序中有值

`Zend_Registry::set('param ', value);`

# django - Django 自定义文件编辑器字段

> ID：12987293
> 
> 赞同：1
> 
> 时间：2012-10-20T09:57:49.257
> 
> 标签：django, django-models

我想在 django 中创建一个自定义字段，它模拟一个普通的文本文件编辑器，但与文件系统而不是数据库交互。

例如：

```
class FileEditorField(models.TextField):
    #...

class Params(models.Model):
    name = models.CharField(max_length=100)
    config = FileEditorField(path='/path') 
```

**FileEditor**将从文件系统读取/保存值。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T12:17:08.317

好的！事实证明这比我想象的要容易。这个想法是创建一个新的自定义模型字段（[docs](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/)），如下所示：

```
class FileEditorField(models.TextField):

    def __init__(self, *args, **kwargs):
        self.path = kwargs.get('path', '/')
        if 'path' in kwargs: kwargs.pop('path')
        kwargs['null']=True
        kwargs['blank']=True
        return super(FileEditorField, self).__init__(*args, **kwargs)

    def value_from_object(self, obj):
        return open(self.path).read()

    def save_form_data(self, instance, data):
        f = open(self.path, 'wb')
        f.write(data) 
```

# c++ - 是否保证 std::list 顺序？

> ID：12987296
> 
> 赞同：5
> 
> 时间：2012-10-20T09:58:03.270
> 
> 标签：c++, stl, containers

元素的顺序是否`std::list`保证保持有序（当然，除非发生排序或其他事情）？

此外，列表是否存在任何潜在的未定义行为，可能会使它们混乱？

我曾经/现在的印象是，`std::deque`诸如此类的容器是订单安全的，但可惜`std::deque`不是双重链接的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T10:00:20.650

是的，订单在[`std::list`](http://en.cppreference.com/w/cpp/container/list). 由于 UB 可能发生任何事情，因此可以混合 std::list 的顺序（尽管我认为不太可能）。

简短的回答是，如果您的列表没有按照您认为的顺序排列，那么最可能的原因是您的程序中存在错误。

# php - 交互插件 CakePHP 2

> ID：12987298
> 
> 赞同：0
> 
> 时间：2012-10-20T09:58:46.723
> 
> 标签：php, cakephp-2.0

我正在开发一个基于 CakePHP 2.2 的 webapp。我创建了一些适合主应用程序的插件。在主应用程序中，我有一个动态菜单。现在我希望插件在这个菜单中显示 op。

我认为，最好的方法是让插件在主应用程序中注册其菜单项。然后主应用程序构建菜单（使用帮助程序）。但我不知道该怎么做。是否可以让插件与主应用程序交互，即使它的 AppController 没有被触及？我想显示所有插件，而不仅仅是当前的插件操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:15:22.207

这取决于您的实施细节。一般来说，您应该将插件视为真正的插件。因此，如果可用，您的应用程序可以使用它。所以概念代码例如：

```
if(pluginAvailable('PagesPlugin')) {
  $this->set('menu', $this->PagesPluginComponent->getMenuItems());
} 
```

您的应用程序可以依赖它，但它也不能在这里。这是插件的通用概念。在现实世界中，这要困难得多，因为没有菜单就无法显示您的网页，从而产生了真正的依赖关系。

插件应该是可重用的。

一些选项：

# 完全基于插件的页面结构

您创建一个插件，它本身具有表格页面。该插件有一个加载菜单项的组件和一个支持显示它们的助手。

所以在你的 appcontroller 加载组件，在这里你设置依赖。在 before_filer 中加载菜单数据并将其发送到视图。

在您的 default.ctp（或其他布局文件）中，您使用数据调用插件助手。

# 做一个 requestAction

在您的插件控制器中创建一个方法并调用 requestAction：[http ://book.cakephp.org/2.0/en/controllers.html#Controller::requestAction](http://book.cakephp.org/2.0/en/controllers.html#Controller::requestAction)

所以你可以调用：yourplugin/menus/index，它会返回一个完整的 MVC 进程。所以插件中的控制器从模型中获取菜单项，将数据发送到它的视图，然后在 index.ctp 中呈现菜单。您在应用程序中返回 HTML 结果，完全完整。

# 仅使用助手创建插件

如果您想要模型中的数据，插件将无济于事，但仍然：如果您有一个复杂的功能可以生成样式良好的菜单，则可以将其放入插件助手中。

在您的应用程序中，您自己在您的应用程序中进行加载，因此您在那里拥有所有的灵活性。您将其发送到视图，但您使用插件来呈现您的菜单。这样，您也可以毫无问题地重复使用菜单助手。

# 让 appController 扩展你的插件 appController

不喜欢它，但有可能：您可以在插件中创建一个新的 AppController 来处理设置菜单和所有其他事情。然后，您的应用程序 appController 可以扩展该版本，而不是普通的 AppController 扩展 Controller。所以你得到：AppController 扩展了你的PluginAppController。虽然我一般不喜欢这种模式，因为调用和依赖关系不再可见，但实际上是自动添加和执行的。

可选：对于更灵活的工作方式，CakePHP 添加了新的：事件[http://book.cakephp.org/2.0/en/core-libraries/events.html](http://book.cakephp.org/2.0/en/core-libraries/events.html)，非常有趣。您可以在例如您的应用程序控制器中放置有趣的事件，并在插件中为其附加侦听器。这将使您免于硬编码调用这些方法。所以这可能会奏效，但它是相当新的，并且存在一些小故障，因为它是全新的。文档尚未完成，并且经过验证的使用尚未发布太多。

# asp.net - 使用数据表在 Radgrid 中显示图像

> ID：12987304
> 
> 赞同：3
> 
> 时间：2012-10-20T10:00:04.283
> 
> 标签：asp.net, c#-4.0, telerik-grid, radgrid

我在图像文件夹中有一张图像；我想在 RadGrid 中使用从后面的代码填充的数据表来展示这一点

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T10:01:53.937

```
DataTable dt = new DataTable();
dt.Columns.Add("Image Column");
dt.Rows.Add("<img src= ../image/image.png   />");
RadGrid1.DataSource = dt; 
```

# symfony - Class 'Symfony\Component\HttpKernel\DependencyInjection\ConfigurableExtension' not found

> ID：12987310
> 
> 赞同：2
> 
> 时间：2012-10-20T10:00:48.017
> 
> 标签：symfony, symfony-2.0, jmsserializerbundle

After installing [JMS Serializer Bundle](https://github.com/schmittjoh/JMSSerializerBundle) following the [provided instructions using the deps file](http://jmsyst.com/bundles/JMSSerializerBundle/master/installation#using-the-deps-file-symfony-2-0-x), I get the following error:

```
Fatal error: Class 'Symfony\Component\HttpKernel\DependencyInjection\ConfigurableExtension' not found in /vendor/bundles/JMS/SerializerBundle/DependencyInjection/JMSSerializerExtension.php on line 30 
```

The class does not exist within Symfony. I am using Symfony v2.0.17\. Is there any fix for this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T10:07:04.423

It's not mentioned in the docs that you need to use a particular version of the bundle for Symfony 2.0.x:

```
[JMSSerializerBundle]
    git=git://github.com/schmittjoh/JMSSerializerBundle.git
    target=bundles/JMS/SerializerBundle
    version=0.9.0 
```

# c# - 字符串别名在没有 System.String 的情况下工作，但 String 没有

> ID：12987315
> 
> 赞同：2
> 
> 时间：2012-10-20T10:01:46.353
> 
> 标签：c#, asp.net, .net, string

今天我遇到了一个奇怪的困惑。尽管我在这篇文章中阅读了 C# 中字符串[和字符串之间的区别：C# 中的字符串和字符串有什么区别？](https://stackoverflow.com/questions/7074/what-is-the-difference-between-string-and-string). 但是当我尝试在`String`不使用 namespace 的情况下使用大写字母时`System`，它无法识别。像

此代码有效，

```
using System;

String s = ""; 
```

但是不使用`System`，它会给出错误。

而`string`使用小写字母可以使用和不使用`System`命名空间。

如果 String 和 string 是相同的东西，那么为什么一个只适用于它的命名空间而其他的也适用于和不使用命名空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T10:12:49.600

`string`是一个 C# 构造，在*编译*期间将`System.String`.

每个 C# 程序默认都有：

```
using string = System.String;
using char = System.Char;
using int = System.Int32;
using double = System.Double; 
```

`System.String`是类。`String`如果无法访问命名空间，则无法使用该类型`System`（因此，完全限定为`System.String`，或使用`using System;`指令）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:12:04.143

`String`是 的别名`System.String`。请参阅您链接到的 SO 答案中得分为 728 的答案，以获取一些别名的列表。如果您使用别名，它会自动获取该`System.`位，因此您不需要显式引用它，因为它已经是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T10:16:05.863

System.String 是 System 命名空间的一个类。字符串直接引用它。

当您键入字符串时，您可以访问 System.String 的所有方法（和构造函数等）。

同样的事情`Nullable<T>`：你可以写，例子

```
int? myInt = 2; 
```

这是同一件事

```
Nullable<int> myInt = 2; 
```

仅别名实用程序

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T10:19:40.817

好吧，如下所示

假设我们有一个命名空间 Foo，它有一个名为 Boo 的类。现在，如果我们需要调用 Boo，我们需要使用“Using”关键字将其包含在项目中。

如果我们为 ex 创建一个别名（不确定是否可能）： Foo.Boo > NewBoo

在这种情况下，编译器会将其视为 Foo.Boo

在字符串的情况下。

当我们编写编译为 System.String 的**字符串**时，因此我们不需要对系统命名空间进行任何形式的包含来访问字符串。

但在 Just String 的情况下，我们需要包含它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-20T10:19:44.550

这是真的，这不会编译没有`using System;`行中有一个波浪线`String name = "me";`

```
class Program
{

    static void Main(string[] args)
    {
        string name1 = "me";

        String name2 = "me";
    }

} 
```

当我把鼠标放在`string`它上面`class System.String`时，当我把它放在上面时`String`它说`the type or namespace String could not be found`

# mysql - 将多个查询结果插入到mysql表中

> ID：12987317
> 
> 赞同：-1
> 
> 时间：2012-10-20T10:01:52.983
> 
> 标签：mysql

我想将以下查询结果插入到新表中。请帮我这样做。这是查询

```
$result = mysql_query("SELECT item_name as 'Item Name', item_type as 'Item Type', 
                           (SUM(item_qty)-(
                                 SELECT SUM(srv_qty) FROM jos_sales 
                                 WHERE item_name=srv_name)
                           ) AS Balance,
                           (SUM(item_qty)-(
                                 SELECT SUM(srv_qty) FROM jos_sales 
                                 WHERE item_name=srv_name)
                           ) * item_price AS 'Total Cost' 
                       FROM jos_item c GROUP BY item_name"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:07:41.670

就像使用[insert ...select](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)语法一样简单：

```
 ("Insert into your_table ( columns )
   SELECT item_name as 'Item Name', item_type as 'Item Type', 
       (SUM(item_qty)-(
       ...
 "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T10:07:51.157

首先创建一个与查询的列结构匹配的新表，然后在查询前添加`INSERT INTO newtable ...`- 您可以将结果直接插入到表中，而无需通过 PHP 或其他检索接口运行它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T10:09:26.473

利用`INSERT... SELECT`

```
INSERT INTO newTable(item_name, item_type, Balance, TotalCost)
SELECT item_name as 'Item Name', item_type as 'Item Type', 
                           (SUM(item_qty)-(
                                 SELECT SUM(srv_qty) FROM jos_sales 
                                 WHERE item_name=srv_name)
                           ) AS Balance,
                           (SUM(item_qty)-(
                                 SELECT SUM(srv_qty) FROM jos_sales 
                                 WHERE item_name=srv_name)
                           ) * item_price AS 'Total Cost' 
                       FROM jos_item c GROUP BY item_name 
```

# in-app-purchase - 在 iPhone 中的应用程序购买问题

> ID：12987322
> 
> 赞同：2
> 
> 时间：2012-10-20T10:02:44.140
> 
> 标签：in-app-purchase

我已经在我的应用程序中集成了消耗品的应用程序购买。当用户进行购买时，一些数据会上传到我们的服务器。所以我有代码发布成功和失败交易的通知。根据通知，它会调用相应的方法来上传数据或通知用户交易失败。我的问题是方法 finishTransaction 被多次调用，因此多次发布通知。由于此数据被多次上传。请提出任何解决方案。这是我的代码的一部分：

```
- (void)finishTransaction:(SKPaymentTransaction *)transaction wasSuccessful:(BOOL)wasSuccessful
{
   //[[NSUserDefaults standardUserDefaults] objectForKey:@"user_id"];

    // remove the transaction from the payment queue.
    //[[SKPaymentQueue defaultQueue] finishTransaction:transaction];
    [myque finishTransaction:transaction];

    NSDictionary *userInfo = [NSDictionary dictionaryWithObjectsAndKeys:transaction, @"transaction" , nil];
    if (wasSuccessful)
    {
        [[NSNotificationCenter defaultCenter] postNotificationName:kInAppPurchaseManagerTransactionSucceededNotification object:self userInfo:userInfo]; 
```

# c++ - 如何在排序列表中找到距离大于 19.0f 的第一个元素？

> ID：12987324
> 
> 赞同：0
> 
> 时间：2012-10-20T10:02:51.207
> 
> 标签：c++, algorithm, stl

在 std::pair 的排序列表中，按与原点的距离升序排序

```
pair<float,float> origin;
list<pair<float,float> > points;
float distance=19.0f; 
```

如何在列表中找到距离大于 distance(19.0f) 的第一个元素？如何申请列表二分查找？（迭代效率不够，列表很长）？有更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T10:05:54.870

列表并不真正适合二进制搜索。这是因为您只能**按顺序**访问列表中的元素（您只能`k`从 element访问元素`k-1`），因此如果您必须使用列表，您别无选择，只能线性搜索更大的第一个元素比`distance`。

如果您想进行二分搜索，您可以使用[`vector`](http://en.cppreference.com/w/cpp/container/vector)允许直接访问元素的容器（如`myvector[i]`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T10:07:39.283

使用[find_if](http://www.cplusplus.com/reference/algorithm/find_if/)。如前所述，`binary_search`不能使用 on`std::list`因为您无法访问列表中的随机元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T10:05:38.987

您不能对链表进行二分搜索。考虑用`vector`or替换它`multiset`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-20T10:06:05.047

您不能有效地对链表执行二进制搜索，因为随机访问时间是`O(n)`，而`O(1)`二进制搜索正常工作需要。

您需要遍历列表，没有其他方法，除非您选择不同的数据结构。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-20T13:32:30.210

您可以使用[`boost::flat_set`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost/container/flat_multiset.html)which 在常规向量之上实现有序容器的语义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-16T18:06:29.340

> 如何在列表中找到距离大于距离（19.0f）的第一个元素？如何应用于列表二分搜索？（迭代效率不够，list很长）

正如其他几个回答者所说，二分查找不适用于`std::list`; 但如果您将您的更改`list`为 a `vector`，那么您正在寻找的算法是拼写的**[`std::partition_point`](https://en.cppreference.com/w/cpp/algorithm/partition_point)。**

```
using Point = std::pair<float, float>;
float distance_between(Point, Point);

Point origin(0, 0);
std::vector<Point> points = { some stuff... };

// sort in ascending order by distance from origin point
std::sort(
    points.begin(), points.end(),
    [&](const auto& p1, const auto& p2) {
        return distance_between(origin, p1) < distance_between(origin, p2);
    }
); 
```

现在这是您想知道的部分：

```
// find first element with distance bigger than 19.0f
auto it = std::partition_point(
    points.begin(), points.end(),
    [&](const auto& pt) {
        return distance_between(origin, pt) < 19.0f;
    }
); 
```

返回的迭代器将是这样的：

```
if (it > points.begin()) {
    assert(distance_between(origin, *(it-1)) < 19.0f);
}
if (it < points.end()) {
    assert(distance_between(origin, *it) >= 19.0f);
} 
```

# delphi - 如何从我的 Delphi 应用程序中调用 IDM（Internet 下载管理器）

> ID：12987326
> 
> 赞同：1
> 
> 时间：2012-10-20T10:03:28.527
> 
> 标签：delphi, com, download-manager

为客户端应用程序提供了`IDM`一些 API：http: [//www.internetdownloadmanager.com/support/idm_api.html](http://www.internetdownloadmanager.com/support/idm_api.html)

我怎样才能通过德尔福做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:18:03.403

行。假设我们安装了 IDM。

似乎`IDManTypeInfo.tlb`库不包含有关 IDM 库的数据类型的信息。在这种情况下，使用该库的唯一方法是将 c++ 头文件重写为 Delphi：

```
unit IDMan;

interface
uses windows, ActiveX;

const
    CLSID_CIDMLinkTransmitter : TGUID = '{AC746233-E9D3-49CD-862F-068F7B7CCCA4}';

    IID_ICIDMLinkTransmitter  : TGUID = '{4BD46AAE-C51F-4BF7-8BC0-2E86E33D1873}';
    IID_ICIDMLinkTransmitter2 : TGUID = '{94D09862-1875-4FC9-B434-91CF25C840A1}';
type
    ICIDMLinkTransmitter = interface(IInterface)
        ['{4BD46AAE-C51F-4BF7-8BC0-2E86E33D1873}']

        function SendLinkToIDM(
            Url : WideString;
            Referer : WideString;
            Cookies : WideString;
            Data: WideString;
            User: WideString;
            Password: WideString;
            LocalPath: WideString;
            LocalFileName: WideString;
            Flags : longint):HRESULT; stdcall;
    end;

    ICIDMLinkTransmitter2 = interface(ICIDMLinkTransmitter)
        ['{94D09862-1875-4FC9-B434-91CF25C840A1}']
        function SendLinkToIDM2(
            Url : WideString;
            Referer: WideString;
            Cookies: WideString;
            Data: WideString;
            User: WideString;
            Password: WideString;
            LocalPath: WideString;
            LocalFileName: WideString;
            Flags : longint;
            reserved1 : Variant;
            reserved2 :Variant): HResult; stdcall;

        function SendLinksArray(
            location : WideString;
            LinksArray : PSafeArray):HResult; stdcall;
    end;

implementation

end. 
```

将此单元添加到您的项目中并尝试使用下一个代码：

```
uses IDMan, ComObj;
....
procedure TMainForm.TestIDM();
var lt : ICIDMLinkTransmitter;
begin
    lt := CreateComObject(CLSID_CIDMLinkTransmitter) as ICIDMLinkTransmitter;
    lt.SendLinkToIDM('http://www.internetdownloadmanager.com/trans_kit.zip', 'teran.karelia.pro','','','','','','', 0);
end; 
```

我没有安装 IDM，所以我没有检查此代码。我不确定它是否 100% 正确，但请尝试一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-27T07:13:59.673

```
uses ShellAPI,Registry;

function GetProgramFilesDir: string;
begin
  with TRegistry.Create do begin
  try
    RootKey := HKEY_LOCAL_MACHINE;
    OpenKeyReadOnly('SOFTWARE\Microsoft\Windows\CurrentVersion');
    Result := ReadString('ProgramFilesDir');
  finally
   Free;
  end;
  end;
end;

var url:string;

begin
url:='http:\\yourfile';
if FileExists(GetProgramFilesDir+'\Internet Download Manager\IDMan.exe') then
ShellExecute(Handle, 'open',pchar('"'+GetProgramFilesDir+'\Internet Download Manager\IDMan.exe"'),PChar(' /d "'+url+'"'),nil, 1) else
ShellExecute(Handle, 'open',nil,PChar(url),nil, 1) ; //1=show --
 end; 
```

工作 100%

# xcode - 无法从 XCode 将我的应用程序上传到 iTunes

> ID：12987327
> 
> 赞同：0
> 
> 时间：2012-10-20T10:03:37.597
> 
> 标签：xcode, app-store-connect

我已经看到很多关于这种错误类型的问题，但解决它们没有帮助。我尝试将我的应用程序的更新上传到 iTunes，但 xCode 给我一个错误的文本：“上传到 iTunes Store 时发生错误”。最新版本 4.5.1 的 XCode。我认为这个问题是在去年 10 月 Java 更新 2012-006 之后开始的。我试过这样做：

```
cd /System/Library/Frameworks/JavaVM.framework/Versions
sudo ln -s CurrentJDK /System/Library/Frameworks/JavaVM.framework/Versions/1.5
sudo ln -s CurrentJDK /System/Library/Frameworks/JavaVM.framework/Versions/1.5.0 
```

但没有结果。同样的错误一次又一次。谁有同样的问题以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:34:49.337

好的，在我搜索得更好之后，我[在这里找到了适合我的解决方案](https://stackoverflow.com/a/12965533/902424)

希望它会帮助某人

# wpf - 在 WPF 中渲染位图内存不足（内存不足异常）

> ID：12987330
> 
> 赞同：0
> 
> 时间：2012-10-20T10:04:04.813
> 
> 标签：wpf, .net-3.5

框架：.NET 3.5 技术：WPF

使用 RenderTargetBitmap.Render(Canvas) 时，画布包含大约 40-50 个图像。渲染显示 OutOfMemoryException。有任何可能的解决方案吗？

我知道 .NET 4.0 中的 CachedComposition，但由于这是一个较低的框架 - 是否有可用的等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T03:53:24.920

我认为问题在于您的画布尺寸太大或用于渲染的 dpiX/dpiY 超过了可接受的阈值（这取决于您计算机的 RAM 容量）。默认 dpi 为 96。

# c - Ansi C 中的 Netdb.h

> ID：12987333
> 
> 赞同：2
> 
> 时间：2012-10-20T10:04:33.247
> 
> 标签：c, gcc, network-programming, ansi, compiler-flags

有没有办法在 ansi C 中使用 netdb.h？我想将 gcc 与 -ansi 标志一起使用，但我有类似的错误，如这篇文章[netdb.h not linking proper](https://stackoverflow.com/questions/7571870/netdb-h-not-linking-properly)，是否有可能解决 ansi c - 合规性？如果不是，我应该使用哪些网络库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:38:28.613

`-ansi`只是告诉编译器要使用哪种模式。这不应该在这里造成任何问题。此外，`-ansi`即使是现在，大多数编译器也遵循默认标准。

你看到的只是一个编译错误。在您的系统上找到`netdb.h`它，并将其包含在您的源代码中，并带有正确的路径。如果没有，请从 Internet 下载并包含它，然后尝试编译以查看错误是否消失。

# user-interface - 桌面应用程序设计建议

> ID：12987349
> 
> 赞同：-1
> 
> 时间：2012-10-20T10:06:54.323
> 
> 标签：user-interface, desktop-application

我正在为桌面应用程序设计线框，它的协作系统是为辅助医疗人员设计的，比如聊天和交流的东西。

现在我需要创建 GUI，任何人都可以建议我，如果我在 Photoshop 中制作它，那么最佳实践是什么，或者任何人都可以建议我一些其他的 GUI 工具吗？

非常感谢你提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:09:16.237

UI 的模型可以用任何你想要的方式完成。常用工具是笔和纸，例如[Balsamiq Mockups](http://www.balsamiq.com/products/mockups)、PowerPoint、Visio、Photoshop 以及任何你能想到的东西。我也在 Visual Studio 中使用 WPF 制作了原型。

最重要的是，我认为您的模型应该*看起来*像是模型，而不是实际的屏幕截图。因为当它看起来可能是实际的应用程序屏幕截图时，人们倾向于对像素进行模糊处理。当只是手绘时，他们倾向于更多地关注重要的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T06:38:23.340

我的工具非常受欢迎：[MockupScreens](http://www.MockupScreens.com) - 您可以即时切换“皮肤”（Mac、Windows 等）。

以下是类似工具的完整列表： [http ://c2.com/cgi/wiki?GuiPrototypingTools](http://c2.com/cgi/wiki?GuiPrototypingTools)

# android - div滚动时错放文本字段

> ID：12987355
> 
> 赞同：0
> 
> 时间：2012-10-20T10:07:20.217
> 
> 标签：android, jquery, cordova

我已经使用 jquery 和 javascript 开发了 android phonegap。我有一个带有滚动条的 div（带有许多文本框）。在文本框的 onfocus 中，我需要将 div 滚动到顶部位置，以便聚焦的文本框移动到 div 的顶部位置。

这是我的代码：

```
$('input:text').live('focus', function() 
{
    var container = $(this);
   container.scrollTop(0);

}); 
```

请指导我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:54:41.367

在应用程序标签的清单中给出以下行

```
android:configChanges="orientation|keyboardHidden" 
```

# java - Is Java constructor a Method?

> ID：12987361
> 
> 赞同：3
> 
> 时间：2012-10-20T10:08:04.210
> 
> 标签：java, constructor

This question is really confusing

A `________` is a *special method* that has the same name as the class and is invoked automatically whenever an object of the class is instantiated. Answers:

*   constructor

*   setter

*   getter

*   static method

I was thinking constructor is the only with the same name as the class, but wait! constructor is not really a method, it differs from method. So i read [this](http://www.javaworld.com/jw-10-2000/jw-1013-constructors.html) article and came to a conclusion that this question is wrongly formatted, am I right?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T10:12:15.570

`Constructors` are in fact a special method, that are used to initialize the state of the newly created instance. When you create an instance like:-

```
A obj= new A(); 
```

Then, the instance of class A is created using `new` keyword, and then the constructor `A()` is invoked on that newly created instance.

**Further from that article that says: -**

> Constructors have one purpose in life: to create an instance of a class.

**No this is wrong**. Constructor don't create instance, its the `new` keyword that does it. And then constructor initializes the state of the instance created as I stated above.

From [`JLS - Section 8.8`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8): -

> Constructors are invoked by class instance creation expressions (§15.9), by the conversions and concatenations caused by the string concatenation operator + (§15.18.1), and by explicit constructor invocations from other constructors (§8.8.7).
> 
> Constructors are never invoked by method invocation expressions (§15.12).

Also from [oracle tutorial](http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)

> **Point originOne = new Point(23, 94);**
> 
> The above statement has three parts (discussed in detail below):
> 
> **Declaration**: The code set in bold are all variable declarations that associate a variable name with an object type.
> **Instantiation**: The new keyword is a Java operator that creates the object.
> **Initialization**: The new operator is followed by a call to a constructor, which initializes the new object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T10:23:31.363

Constructors are special methods. They are distinct from "normal" methods. But they are methods. Look at this:

```
public class A {    
    public A() {
        this(5); // calls A(int)
    }        
    public A(int arg) {
        // ...
    }        
} 
```

# opencl - OpenCL 内核未矢量化

> ID：12987362
> 
> 赞同：2
> 
> 时间：2012-10-20T10:08:15.737
> 
> 标签：opencl, vectorization

我正在尝试构建一个内核来进行并行字符串搜索。为此，我倾向于使用有限状态机。fsm 的转换表处于内核参数状态。编码：

```
 __kernel void Find ( __constant char *text,
        const      int offset,
        const      int tlenght,
        __constant char *characters,
        const int clength,
        const int maxlength,
        __constant int *states,
        const int statesdim){

    private char c;
    private int state;
    private const int id = get_global_id(0);

    if (id<(tlenght-maxlength)) {

        private int cIndex,sd,s,k;

        for (int i=0; i<maxlength; i++) {

            c = text[i+offset];

            cIndex = -1;

            for (int j=0; j<clength; j++) {

                if (characters[j]==c) {
                    cIndex = j;
                }       
            }    

            if (cIndex==-1) {

                state = 0;
                break;

            }  else {

                s = states[state+cIndex*statesdim];

            }

            if (state<=0) break;

        }    
    }
} 
```

如果我使用 iocgui 编译这个内核，我会得到结果：

```
Using default instruction set architecture.
Intel OpenCL CPU device was found!
Device name: Pentium(R) Dual-Core CPU       T4400  @ 2.20GHz
Device version: OpenCL 1.1 (Build 31360.31426)
Device vendor: Intel(R) Corporation
Device profile: FULL_PROFILE
Build started
Kernel <Find> was successfully vectorized
Done.
Build succeeded! 
```

当我更改确定新状态的行时：

```
state = states[state+cIndex*statesdim]; 
```

结果是：

```
Using default instruction set architecture.
Intel OpenCL CPU device was found!
Device name: Pentium(R) Dual-Core CPU       T4400  @ 2.20GHz
Device version: OpenCL 1.1 (Build 31360.31426)
Device vendor: Intel(R) Corporation
Device profile: FULL_PROFILE
Build started
Kernel <Find> was not vectorized
Done.
Build succeeded! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:06:56.153

该声明

```
X = states[state+cIndex*statesdim]; 
```

不能向量化，因为索引不一定评估跨线程对后续字节的访问。

请注意，在您的第一个内核中，您的目标变量`s`尚未写回全局内存。因此，编译器可能会优化代码并删除`s = states[state+cIndex*statesdim];`语句。因此，看起来您的陈述已被矢量化，但事实并非如此。

# diff - 如何在不创建 repo 的情况下通过 JGit 区分两个文件？

> ID：12987364
> 
> 赞同：5
> 
> 时间：2012-10-20T10:08:20.433
> 
> 标签：diff, jgit

当我使用 JGit`diff`处理两个文件时，我必须先创建一个 repo。但是在 Git 中，我只需要使用 command `git diff --no-index 1.txt 2.txt`。

有没有办法`diff`在不创建 repo 的情况下在 JGit 中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T05:58:35.567

谢谢你！我已经解决了这个问题！

## 方法如下

```
private static String getDiff(String file1, String file2) {
    OutputStream out = new ByteArrayOutputStream();
    try {
        RawText rt1 = new RawText(new File(file1));
        RawText rt2 = new RawText(new File(file2));
        EditList diffList = new EditList();
        diffList.addAll(differ.diff(COMP, rt1, rt2));
        new DiffFormatter(out).format(diffList, rt1, rt2);
    } catch (IOException e) {
        e.printStackTrace();
    }
    return out.toString();
} 
```

* * *

谢谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:21:47.333

嗯，我不完全理解这个问题，但也许你正在寻找类似 gitective 的东西，这使得它在他的`BlobUtils`“区分[两个文件](https://github.com/kevinsawicki/gitective#diff-two-files)”的帮助下变得更容易。

# ms-access-2010 - vba访问sql server的访问表

> ID：12987366
> 
> 赞同：1
> 
> 时间：2012-10-20T10:09:13.210
> 
> 标签：ms-access-2010

我有一个`MS access 2010`包含很多表格的文件。此信息需要写入`SQL server`.

这似乎很容易，但我坚持这种代码和平；

```
stSQL = "INSERT INTO sqltablename ([sqlcolumn_name]) VALUES ('test') " 
```

我想我必须替换 test 以获取我的一个表中的列的链接，但是如何在不输入任何（非常）长的代码的情况下修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:58:46.230

您可能需要提供更多信息..

我假设您想将信息从 Access 表写入链接的 SQL Server 表。您可以轻松编写附加到 SQL Server 链接表的 Access 查询，这应该适合您的需要。

# jquery - 无法通过 JQuery 获取 OnOff Flipswtich 当前状态

> ID：12987374
> 
> 赞同：2
> 
> 时间：2012-10-20T10:09:46.630
> 
> 标签：jquery, css

[这是我的 js 小提琴](http://jsfiddle.net/v9zHV/)

[这是它的原始版本](http://proto.io/freebies/onoff/)

代码就像：

HTML：

```
<fieldset  class="onoffswitch">
    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="xmonoffswitch">
    <label class="onoffswitch-label" for="xmonoffswitch">
        <div class="onoffswitch-inner">
            <div class="onoffswitch-active">Published</div>
            <div class="onoffswitch-inactive">Unpublished</div>
        </div>
        <div class="onoffswitch-switch"></div>
    </label>
</fieldset >
<div class="result"></div> 
```

CSS：

```
.onoffswitch {
    position: relative; width: 182px;
    border: 0px;
    -webkit-user-select:none; -moz-user-select:none; -ms-user-select: none;
}
.onoffswitch-checkbox {
    display: none;
}
.onoffswitch-label {
    display: block; overflow: hidden; cursor: pointer;
    border: 2px solid #FFF3E4; border-radius: 50px;
}
.onoffswitch-inner {
    width: 200%; margin-left: -100%;
    -moz-transition: margin 0.3s ease-in 0s; -webkit-transition: margin 0.3s ease-in 0s;
    -o-transition: margin 0.3s ease-in 0s; transition: margin 0.3s ease-in 0s;
}
.onoffswitch-inner > div {
    float: left; width: 50%; height: 41px; padding: 0; line-height: 41px;
    font-size: 20px; color: white; font-family: Trebuchet, Arial, sans-serif; font-weight: normal; font-style: italic;
    -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box;
}
.onoffswitch-inner .onoffswitch-active {
    padding-left: 14px;
    background-color: #F0B78B; color: #E67817;
}
.onoffswitch-inner .onoffswitch-inactive {
    padding-right: 14px;
    background-color: #F0B78B; color: #999999;
    text-align: right;
}
.onoffswitch-switch {
    width: 38px; height: 38px; margin:1.5px;
    background: #A1A1A1;
    border: 2px solid #FFF3E4; border-radius: 50px;
    position: absolute; top: 0; bottom: 0; right: 137px;
    -moz-transition: all 0.3s ease-in 0s; -webkit-transition: all 0.3s ease-in 0s;
    -o-transition: all 0.3s ease-in 0s; transition: all 0.3s ease-in 0s;
}
.onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-inner {
    margin-left: 0;
}
.onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-switch {
    right: 0px;
    background-color: #E67817;
} 
```

这基本上是一个开关按钮，它有两种状态：已发布（打开）和未发布（关闭）。我想通过 JQuery 获取当前选定的状态，但无法获取它。有人会告诉这可能是什么 JQuery 片段吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T10:18:00.350

脚本应该是：

```
function getStatus(){
    // will return true in case of "ON" and false in case of "OFF"
    return $("input#xmonoffswitch").is(":checked");
} 
```

**[演示](http://jsfiddle.net/v9zHV/5/)**

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:22:47.980

你可以通过检查复选框的值来检查它

```
 if($('.onoffswitch-checkbox').is(':checked'))​
   {
       alert('Published');
   } 
   else
   {
       alert('Unpublished');
   } 
```

当您切换按钮时，此演示将为您提供复选框的状态

[http://jsfiddle.net/v9zHV/4/](http://jsfiddle.net/v9zHV/4/)

# jquery - 切换 CSS 自动展开高度

> ID：12987377
> 
> 赞同：0
> 
> 时间：2012-10-20T10:10:38.420
> 
> 标签：jquery, css

我想让框显示在页面中间，我有两个块，一个在左侧，一个在右侧，我使用“浮动”选项对齐每个边缘，但我无法获得实际高度（或自动高度）通过展开显示/隐藏面板。如果我删除`float`选项，它可以正常工作，但我确实需要浮动，并且还需要集中该框。如果有人可以帮忙？多谢

这就是我所做的，

**标记**

```
<div id="box">
 <div class="selection">Some selection</div>
 <div class="open">Click ME</div>
 <div class="showpanel">This is content</div>
</div> 
```

**CSS**

```
#box{
    border:2px solid #000;
    width:450px;
    min-height:300px;
    padding:10px 0;
    margin:0 auto;

}
.open {
    width:350px;
    height:50px;
    background:blue;
    margin:5px auto 0px auto;
    color:#fff;
    text-align:right;
    float:right;
}
.showpanel{
    width:350px;
    height:300px;
    margin:0 auto 10px auto;
    background:red;
    display:none;
    float:right;
}

.selection{
background:green;
width:100px;
height:140px;
float:left;

} 
```

**​JS**

 **```
$('.open').click(function() {

    $('.showpanel').slideToggle('slow');

});​ 
```

​</p>

[样品在这里](http://jsfiddle.net/PJDbb/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T10:14:01.193

要在滑动切换浮动子项时根据需要扩展外部 div，添加`overflow: hidden`到外部 DIV ( `#box`) 应该可以。

查看**演示：http:** [//jsfiddle.net/PJDbb/1/](http://jsfiddle.net/PJDbb/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T10:14:49.787

你需要清除`float`

```
<div id="box">
 <div class="selection">Some selection</div>
 <div class="open">Click ME</div>
 <div class="showpanel">This is content</div>
</div> 
```

[演示](http://jsfiddle.net/PJDbb/2)

或使用`overflow`hack（保持相同的标记）

```
#box {
    border:2px solid #000;
    width:450px;
    min-height:300px;
    padding:10px 0;
    margin:0 auto;
    overflow:hidden;

} 
```

[演示](http://jsfiddle.net/PJDbb/3/)**

# ios - Iphone 应用程序中的 Like 图像

> ID：12987380
> 
> 赞同：0
> 
> 时间：2012-10-20T10:11:18.347
> 
> 标签：ios, iphone, facebook, facebook-like

我想在我的应用程序中添加“Like”功能并放置 Facebook 的 Like 图像（它与 facebook 中的实际like 无关）。那是允许的吗？使用“喜欢”图像？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:13:07.173

这是版权不允许的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T10:19:10.413

这与在 iOS 应用程序中添加类似功能有关

如果您正在寻找相同的东西，请尝试

[如果 ray wenderlich 这是一个很好的教程](http://www.raywenderlich.com/1626/how-to-post-to-a-users-wall-upload-photos-and-add-a-like-button-from-your-iphone-app)

# c++ - 如何在 Visual C++ 2010 中使用 C++ 库

> ID：12987386
> 
> 赞同：0
> 
> 时间：2012-10-20T10:12:11.663
> 
> 标签：c++, visual-c++-2010

> **可能重复：**
> [visual c++：#include 来自同一解决方案中其他项目的文件](https://stackoverflow.com/questions/601268/visual-c-include-files-from-other-projects-in-the-same-solution)

我是 C++ 的新手。在这个项目中，我使用 Visual C++ 2010 Express。我正在尝试使用**[parserlib](https://github.com/axilmar/parserlib)**。下载了文件，甚至打开了示例。现在我尝试创建一个空项目，并且迷失了如何包含它的文件......我尝试将 parserlib 放入“源文件”中，并像这样包含它：

```
#include "parserlib/parserlib.hpp"
// OR
#include "parserlib.hpp" 
```

两者都没有工作。我想我需要设置一些包含路径之类的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:18:45.110

1.  右键单击项目，然后选择属性。
2.  选择配置属性->C/C++->常规。
3.  在 Additional Include Directories 下设置路径。

然后包括使用：

```
#include "parselib.hpp" 
```

您可以阅读此堆栈问题的详细答案：[visual c++: #include files from other projects in the same solution](https://stackoverflow.com/questions/601268/visual-c-include-files-from-other-projects-in-the-same-solution)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T10:16:52.487

您需要配置项目属性。在 C++ 下添加额外的包含目录以指向头文件的位置。例如，将其指向您的 parserlib 文件夹，然后

```
#include <parserlib.hpp> 
```

应该管用。您还需要配置链接器选项，以便它链接到任何 .lib 文件。将保存 .lib 文件的目录添加到其他库目录，然后将特定 .lib 文件添加到其他库文件。

查看您指定的 github 项目。您必须自己从源 .cpp 文件构建 .lib 文件。否则，您将在链接时得到未解决的参考错误。即编译器从头文件中读取声明，但找不到函数的定义（在.cpp 文件中）。

有关如何执行此操作的帮助，请参阅以下内容：http: [//msdn.microsoft.com/en-us/library/ms235627.aspx](http://msdn.microsoft.com/en-us/library/ms235627.aspx)

# python - 在 python 中使用 Logging 模块进行用户事件跟踪

> ID：12987388
> 
> 赞同：0
> 
> 时间：2012-10-20T10:12:31.467
> 
> 标签：python, wxpython

我在 python 中开发了 UI（用户界面）应用程序（它有 5 个窗口框架，每个窗口有 2 个按钮）。这个应用程序可以被n个用户同时访问（它的多用户业务应用程序）。

现在我正在尝试开发可以跟踪用户访问事件的定制记录程序，例如示例：当用户单击登录按钮时，我需要跟踪“user_name”，“fun_name_raised”，“module_name_fun_present”，“time_stamp”，“debug_level_raised”， “file_path”来实现这一点，我将在我的应用程序中放置等`logger_customized_info()`，只要`logger_customized_debug()`我需要跟踪上述参数（、、、、、）。我 不想用户流处理程序或日志包的文件处理程序给出完整的打印所有以前日志的缓冲流（我喜欢只打印调用日志），请告诉我如何实现这一点。`ser_name``fun_name_raised``module_name_fun_present``time_stamp``debug_level_raised`

```
application.py
---------------
def main():
    obj=Util_logger()
    obj.logger_customized_info(user_name=******,fun_name_raised,module_name_fun_present,time_stamp,debug_level=”INFO”)#custmozied logger calling
    window_frame()#calling windows frames

custom_logger.py
-----------------
class  Util_logger:
       def logger_customized_info(u ser_name=**,fun_name_raised,module_name_fun_present,time_stamp,debug_level=”INFO”): 
```

谢谢穆克西尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:20:18.443

如果多个脚本尝试同时写入同一个文件，您最终可能会遇到文件锁定问题或竞争条件。而不是记录，我建议“记录”到像 postgres 或 firebird 甚至 MySQL / MariaDB 这样的数据库。一个好的数据库可以毫无问题地一次处理大量连接。

# android - 在每个列表视图项目行中使用复选框，需要将所选项目名称显示到另一个活动中

> ID：12987395
> 
> 赞同：-2
> 
> 时间：2012-10-20T10:13:42.230
> 
> 标签：android, android-listview

我`checkbox`在每个项目行中使用 es `listview`，现在我需要将选定的`item(s)`名称显示到另一个活动中，这里我使用 JSON 解析器获取数据。

我不知道如何将所选`listview`项目名称添加到另一个活动，一旦用户完成选择，我将使用提交按钮`checkbox`，他/她只需要单击提交并需要将所选项目名称显示到另一个活动中。我知道如何使用意图将数据发送到另一个活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:23:16.510

我认为您正在寻找像我以前一样的解决方案。阅读[本](http://www.vogella.com/articles/AndroidListView/article.html#listadvanced_interactive)教程，它将对您有所帮助 :-)

# oracle-sqldeveloper - 无法在 sql developer 中创建新的数据库连接即使使用连接类型：基本和角色：默认或 SYSDBA

> ID：12987398
> 
> 赞同：2
> 
> 时间：2012-10-20T10:13:52.193
> 
> 标签：oracle-sqldeveloper

即使使用连接类型 :Basic 和 Role: Default 或 SYSDBA 。发现错误：

> 状态：失败 - 测试失败：IO 错误：网络适配器无法建立连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T00:47:22.177

发出这些命令并发布输出

```
lsnrctl stop
lsnrctl start
lsnrctl status
lsnrctl service
set 
```

我前段时间遇到过这个问题。我猜你安装了虚拟机

# javascript - 咖啡脚本类的范围

> ID：12987400
> 
> 赞同：9
> 
> 时间：2012-10-20T10:14:03.027
> 
> 标签：javascript, scope, coffeescript

我想在一个类属性中嵌套一些函数，如下所示。
不幸的是，他们无法访问课程的主要范围。

我可以在不向每个嵌套函数传递引用的情况下解决这个问题`this`吗？

```
class myClass

  constructor: -> @errors = []

  doSomething: -> @errors.push "I work as expected"

  functions:
    doStuff: ->
      @errors.push "I cant access @errors" # => TypeError: Cannot call method 'push' of undefined

    ugly: (context) ->
      context.errors.push "It works, but I am ugly" # Works fine but requires scope injection 
```

使用建议的粗箭头的非工作替代方案：

```
class myClass
  constructor: ->
    @errors = []

    @functions:
      doStuff: =>
        @errors.push "I wont work either" # TypeError: Cannot call method 'toString' of undefined 
```

可选的替代方法，它不写入全局`this.errors`属性：

```
class myClass

  constructor: ->

    @functions =
      errors: []
      doStuff: ->
        @errors.push "I will write to functions.errors only" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T11:42:25.243

在 JavaScript 中（结果，CoffeeScript 也是如此），方法使用`this`包含方法的对象。

```
method()                  // this == globalObject
object.method()           // this == object
Math.random()             // this == Math 
```

这通常效果很好，除非你处理像你这样的例子：

```
object.functions.method() // this == object.functions 
```

在处理 JavaScript 时，我会避免为函数使用命名空间——即使有变通方法，它也不能很好地发挥作用。例如，您可以尝试将`this`对象的引用放入 中`object.functions`，这样任何函数`object.functions`都可以访问它。

```
class MyClass
  constructor: ->
    @errors = []
    @functions.self = this

  doSomething: ->
    @errors.push "I work as expected"

  functions:
    alsoDoSomething: ->
      @self.errors.push "Also works!" 
```

起初这似乎可行，但当您使用类似`apply`或`call`之类的属性时可能会令人困惑，`obj1.functions.alsoDoSomething.call(obj2)`因为`obj2`对象不正确（用户应该这样做`obj2.functions`，这可能会令人困惑）。

真正的解决方案是：*不要*。JavaScript 不适合这样的滥用。所有对象方法都应该直接在对象原型中。如果你有对象，它的所有方法都不是你的对象的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:05:57.103

作为 GlitchMr 答案的附录，我将解释为什么您的每次尝试都失败了。

1.  该`functions`对象在原型上声明，因此`@errors`被编译为 `myClass.errors`. 但是，该`errors`对象被声明为实例成员，而不是原型成员。
2.  `functions`当它应该是一个对象时，您可以使用 CoffeeScript 的函数符号来定义。错误信息是 CoffeeScript 编译器错误；在修复了这个语法错误之后，它就可以正常工作了！
3.  你在这个例子前面加上为什么它不起作用，所以我不会告诉你两次！

这是在这种情况下正确使用[粗箭头的示例。](http://coffeescript.org/#fat_arrow)

```
class MyClass

  constructor: ->
    @errors = []
    @functions = 
      doStuff: =>
        @errors.push "I can and do access @errors"

c = new MyClass
c.functions.doStuff()
console.log c.errors # ["I can and do access @errors"] 
```

希望这有助于揭开错误的神秘面纱并展示 CoffeeScript 胖箭头的力量！

# cakephp - Cakephp 多个子域

> ID：12987402
> 
> 赞同：0
> 
> 时间：2012-10-20T10:14:11.253
> 
> 标签：cakephp, subdomain

我的共享服务器中目前有以下目录结构

```
/

-public_html

--subdomain_1

--- app

--- cake

--- cgi-bin

--- nbproject

--- plugin

--- vendors 
```

我的问题是：

1.  我需要在自己的子域中设置多个应用程序，但共享相同的 cakephp 核心，例如 subdomain1.mydomain.com、subdomain2.mydomain.com 等，其结构如下：

/

-public_html

--subdomain_1

- - 应用程序

- - 蛋糕

--- cgi-bin

--- nb项目

- - 插入

--- 供应商

--subdomain_2

- - 应用程序

- - 蛋糕

--- cgi-bin

--- nb项目

- - 插入

--- 供应商

--subdomain_3

- - 应用程序

- - 蛋糕

--- cgi-bin

--- nb项目

- - 插入

--- 供应商

1.  请通过指出我应该修改我的应用程序中的哪些文件来回答
2.  我是否需要修改 htaccess 文件，如果需要，如何修改。

我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:57:43.883

就像它在[文档](http://book.cakephp.org/2.0/en/deployment.html#multiple-cakephp-applications-using-the-same-core)中所说的那样。

由于您无法更改共享托管服务器上的 php.ini，只需更改`CAKE_CORE_INCLUDE_PATH`每个文件中的常量`webroot/index.php`，然后您只需上传 Cake 核心一次并让您的所有子域都使用它。

# ios - 如何为一对多关系正确配置 CoreData 数据模型和 NSManagedObjects？

> ID：12987403
> 
> 赞同：2
> 
> 时间：2012-10-20T10:14:23.167
> 
> 标签：ios, core-data, nsmanagedobject

如何为一对多关系正确配置 CoreData 数据模型和 NSManagedObjects？我觉得我错误地配置了 xcdatamodeld 文件，但我找不到问题所在。我生成了一个新的单视图项目，并选择了 CoreData。下面的代码很简单，我可以解释这个问题。

```
Parent *parent = [NSEntityDescription insertNewObjectForEntityForName:@"Parent"      inManagedObjectContext:[self managedObjectContext]];

Child *child = [NSEntityDescription insertNewObjectForEntityForName:@"Child" inManagedObjectContext:[self managedObjectContext]];    

child.parent = parent; 
```

当我打电话时

```
[parent.children count]; 
```

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[Child count]：无法识别的选择器发送到实例 0x7450370”

当我打电话

```
NSMutableSet *children = [parent mutableSetValueForKey:@"children"]; 
```

'实体'父'的 NSManagedObjects 不支持 -mutableSetValueForKey: 属性'子''

此外，似乎没有生成任何生成的添加/删除方法来修改子集合，例如

```
- (void)addChildObject:(Child *)value;
- (void)removeChildObject:(Child *)value; 
```

## xcdatamodeld

实体

*   子
    关系：父
    目标：父
    逆：子

*   父
    关系：子
    目标：子
    逆：父

*   配置（默认）
    实体：子
    类：子

    实体：父
    类：父

## 父母.h

```
@interface Parent : NSManagedObject
  @property (nonatomic, retain) NSSet *children;
@end 
```

## 父母.m

```
@implementation Parent
  @dynamic children;
@end 
```

## 孩子.h

```
@interface Child : NSManagedObject
  @property (nonatomic, retain) NSManagedObject *parent;
@end 
```

## 孩子.m

```
@implementation Child
  @dynamic parent;
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:35:58.900

您应该在 Xcode 中使用“Editor -> Create NSManagedObject Subclass...”来创建托管对象子类文件。这可确保您拥有正确的访问器功能。另一个优点是 Xcode 知道访问器函数并自动完成。

还要确保该`children`关系在 Core Data Inspector 中定义为“多对多关系”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:07:54.033

现在使用 iPad，所以我的代码不方便。我上周刚做了这个，我所做的就是完全按照 Apple 的指令，使用 Core Data 编程指南——多对多指令接近尾声，并在目录中引用。

然后我使用 Xcode 创建对象模板，并使用 Xcode 创建的生成的可变方法添加对象。

如果您希望我发布我进行多对多关联的确切行，我稍后可以访问我的代码发表评论。

编辑：所以我在 Core Data 模型的图形视图中看到的是两个由两侧的双箭头连接的对象 - 这将告诉你它已正确连接。然后，在生成的代码中，我有一个 Xcode 为我生成的方法：

```
- (void)addProductsObject:(Product *)value; 
```

在我的应用程序中，有包含产品的订单，正如您想象的那样，这是多对多的。它一切正常。当你建立关联时，你只需要做一次（就像上面一样，我将一个产品添加到一个订单中，订单到产品的关联会自动发生。

# javascript - Raphael set.mouseover() - 停止事件传播

> ID：12987407
> 
> 赞同：3
> 
> 时间：2012-10-20T10:14:53.440
> 
> 标签：javascript, raphael

我正在使用 Raphael.js 绘制美国地图，您可以在此处查看：[http ://www.motionflashdesigns.com/usabbr/](http://www.motionflashdesigns.com/usabbr/)

我已经开始使用 set() 添加状态缩写，因此状态的路径和它的文本缩写都在同一个对象中。

我在整个集合对象上添加了一个鼠标悬停事件处理程序，但是子文本也注册了鼠标悬停事件，这实际上导致了集合上的鼠标移出，有人知道如何停止集合子对象上的事件传播吗？

在 jquery 中，我会使用`mouseenter`or `event.stopPropagation`，但 Raphael 似乎都不支持这些。

这是JS：

```
$(function () {

    var stateNames = new Array();
    var stateURLs = new Array();
    var stateModes = new Array();
    var stateColors = new Array();
    var stateOverColors = new Array();
    var stateClickedColors = new Array();
    var stateText = new Array();

    var offColor;
    var strokeColor;
    var mapWidth;
    var mapHeight;
    var useSideText;
    var textAreaWidth;
    var textAreaPadding;

    var mouseX = 0;
    var mouseY = 0;
    var current = null;

    // Detect if the browser is IE.
    var IE = $.browser.msie ? true : false;

    $.ajax({
        type: 'GET',
        url: 'xml/usaMapSettings.xml',
        dataType: $.browser.msie ? 'text' : 'xml',
        success: function (data) {

            var xml;
            if ($.browser.msie) {
                xml = new ActiveXObject('Microsoft.XMLDOM');
                xml.async = false;
                xml.loadXML(data);
            } else {
                xml = data;
            }

            var $xml = $(xml);

            offColor = '#' + $xml.find('mapSettings').attr('offColor');
            strokeColor = '#' + $xml.find('mapSettings').attr('strokeColor');
            mapWidth = $xml.find('mapSettings').attr('mapWidth');
            mapHeight = $xml.find('mapSettings').attr('mapHeight');
            useSideText = $xml.find('mapSettings').attr('useSideText');
            textAreaWidth = $xml.find('mapSettings').attr('textAreaWidth');
            textAreaPadding = $xml.find('mapSettings').attr('textAreaPadding');

            if (useSideText == 'true') {
                $("#text").css({
                    'width': (parseFloat(textAreaWidth) - parseFloat(textAreaPadding * 2)) + 'px',
                    'height': (parseFloat(mapHeight) - parseFloat(textAreaPadding * 2)) + 'px',
                    'display': 'inline',
                    'float': 'right',
                    'padding': textAreaPadding + 'px'
                });

                $('#text').html($xml.find('defaultSideText').text());
            }

            //Parse xml
            $xml.find('stateData').each(function (i) {

                var $node = $(this);

                stateText.push($node.text());
                stateNames.push($node.attr('stateName'));
                stateURLs.push($node.attr('url'));
                stateModes.push($node.attr('stateMode'));
                stateColors.push('#' + $node.attr('initialStateColor'));
                stateOverColors.push('#' + $node.attr('stateOverColor'));
                stateClickedColors.push('#' + $node.attr('stateSelectedColor'));
            });

            createMap();
        }
    });

    function createMap() {

        //start map
        var r = new ScaleRaphael('map', 930, 590),
            attributes = {
                fill: '#d9d9d9',
                cursor: 'pointer',
                stroke: strokeColor,
                'stroke-width': 1,
                'stroke-linejoin': 'round',
                'font-family':'Verdana', 
                'font-size':'19px', 
                'font-weight': 'bold'
            },
            arr = new Array();

            var usa = {};

            usa.alabama = r.set();
            usa.alaska = r.set();
            usa.arizona = r.set();
            usa.arkansas = r.set();
            usa.california = r.set();
            usa.colorado = r.set();
            usa.connecticut = r.set();
            usa.delaware = r.set();
            usa.dc = r.set();
            usa.florida = r.set();
            usa.georgia = r.set();
            usa.hawaii = r.set();
            usa.idaho = r.set();
            usa.illinois = r.set();
            usa.indiana = r.set();
            usa.iowa = r.set();
            usa.kansas = r.set();
            usa.kentucky = r.set();
            usa.louisiana = r.set();
            usa.maine = r.set();
            usa.maryland = r.set();
            usa.massachusetts = r.set();
            usa.michigan = r.set();
            usa.minnesota = r.set();
            usa.mississippi = r.set();
            usa.missouri = r.set();
            usa.montana = r.set();
            usa.nebraska = r.set();
            usa.nevada = r.set();
            usa.newHampshire = r.set();
            usa.newJersey = r.set();
            usa.newMexixo = r.set();
            usa.newYork = r.set();
            usa.northCarolina = r.set();
            usa.northDakota = r.set();
            usa.ohio = r.set();
            usa.oklahoma = r.set();
            usa.oregon = r.set();
            usa.pennsylvenia = r.set();
            usa.rhodeIsland = r.set();
            usa.southCarolina = r.set();
            usa.southDakota = r.set();
            usa.tennessee = r.set();
            usa.texas = r.set();
            usa.utah = r.set();
            usa.vermont = r.set();
            usa.virginia = r.set();
            usa.washington = r.set();
            usa.westVirginia = r.set();
            usa.wisconsin = r.set();
            usa.wyoming = r.set();

            var boxattrs = {'cursor': 'pointer', 'fill' : "#000"};
            var i = 0;

        for (var state in usamappaths) {
            //Create obj
            var obj = usa[state];
            obj.attr(attributes);

            if (stateModes[i] == 'OFF') {
                boxattrs = {'cursor': 'default', 'fill' : offColor};
            } else {
                boxattrs = {'cursor': 'pointer', 'fill' : stateColors[i], 'id' : i};
            }

            obj.push(r.path(usamappaths[state].path).attr(boxattrs));
            obj.push(r.text(usamappaths[state].textX, usamappaths[state].textY, usamappaths[state].text).attr(
                {"font-family":"Arial, sans-serif",
                 "font-weight":"bold",
                 "font-size":"14",
                 "font-color":"#000",
                 'cursor': 'pointer'}));

                obj[0].node.id = i;
                obj.mouseover(function (e) {
                    e.stopPropagation();

                    var id = $(this.node).attr('id');

                    if (stateModes[id] != 'OFF') {

                    //Animate if not already the current state
                        if (this != current) {
                            this.animate({
                                fill: stateOverColors[id]
                            }, 500);
                        }

                        //tooltip
                        $('#map').next('.point').remove();
                        $('#map').after($('<div />').addClass('point'));
                        $('.point').html(stateNames[id]).css({
                            left: mouseX - 50,
                            top: mouseY - 70
                        }).fadeIn();
                    }
                 });

        obj.mouseout(function (e) {

                var id = $(this.node).attr('id');

                if (stateModes[id] != 'OFF') {

                //Animate if not already the current state
                 if (this != current) {
                    this.animate({
                        fill: stateColors[id]
                    }, 500);
                }

                $('#map').next('.point').remove();

                }

         });

        obj.mouseup(function (e) {

                var id = $(this.node).attr('id');

                if (stateModes[id] != 'OFF') {
                    //Reset scrollbar
                    var t = $('#text')[0];
                    t.scrollLeft = 0;
                    t.scrollTop = 0;

                    //Animate previous state out
                    if (current) {
                        var curid = $(current.node).attr('id');
                        current.animate({
                            fill: stateColors[curid]
                        }, 500);
                    }

                    //Animate next
                    this.animate({
                        fill: stateClickedColors[id]
                    }, 500);

                    current = this;

                    if (useSideText == 'true') {
                        $('#text').html(stateText[id]);
                    } else {
                        //change "_self" to "_blank" if using in WP iframe
                        window.open(stateURLs[id], '_self');
                    }
                }
            });

         i++;
    }

    resizeMap(r);
    /*
    //Might use that for east coast states
    var t = r.text(120, 50, "WA").attr(
          {"font-family":"Arial, sans-serif",
           "font-weight":"bold",
           "font-size":"14",
           "font-color":"#000",
           "pointer-events":"none",
           'disabled': 'true'});

    var rect = r.rect(t.getBBox().x,t.getBBox().y,t.getBBox().width,t.getBBox().height).attr({'cursor': 'pointer'});
    */
}

// Set up for mouse capture
if (document.captureEvents && Event.MOUSEMOVE) {
    document.captureEvents(Event.MOUSEMOVE);
}

// Main function to retrieve mouse x-y pos.s

function getMouseXY(e) {

    var scrollTop = $(window).scrollTop();

    if (e && e.pageX) {
        mouseX = e.pageX;
        mouseY = e.pageY-scrollTop;
    } else {
        mouseX = event.clientX + document.body.scrollLeft;
        mouseY = event.clientY + document.body.scrollTop;
    }
    // catch possible negative values
    if (mouseX < 0) {
        mouseX = 0;
    }
    if (mouseY < 0) {
        mouseY = 0;
    }

    $('#map').next('.point').css({
        left: mouseX - 50,
        top: mouseY - 70
    })
}

// Set-up to use getMouseXY function onMouseMove
document.body.onmousemove = getMouseXY;

    function resizeMap(paper) {

        paper.changeSize(mapWidth, mapHeight, true, false);

        if (useSideText == 'true') {
            $(".mapWrapper").css({
                'width': (parseFloat(mapWidth, 10) + parseFloat(textAreaWidth, 10)) + 'px',
                'height': mapHeight + 'px'
            });
        } else {
            $(".mapWrapper").css({
                'width': mapWidth + 'px',
                'height': mapHeight + 'px'
            });
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:40:36.117

您应该使用 mouseenter 和 mouseleave 事件而不是 mouseover 和 mouseout。

[如何禁用由子元素触发的 mouseout 事件？](https://stackoverflow.com/questions/350639/how-to-disable-mouseout-events-triggered-by-child-elements)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:40:07.547

查看[Jonathan Greene](https://github.com/gthmb)的[raphael.set.hoverset](https://github.com/gthmb/raphael.set.hoverset)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T16:03:47.867

我不确定到底是什么问题，但如果我理解正确，你试图在不影响文本的情况下影响该区域。我解决这个问题的方法是将这两个元素推到一起

```
var North_Text = paper.set();
    North_Text.push(
    paper.text(80, 40, 'Dartford'),
    paper.circle(75, 32, 3)
);
North_Text.attr({
    id: 'North_Text',
}).data('id', 'North_Text');

var North_Kent = paper.set();
    var North = paper.circle(75, 32, 300);
    North.attr({id: 'West',parent: 'North_Kent'}).data('id', 'North');
North_Kent.attr({'id': 'North_Kent','name': 'North_Kent'});

North_Kent.push(North,North_Text); 
```

然后使用此功能独立于文本影响区域。我很确定 iv 从过去的某些东西中调整了它，并对其进行了调整以适应变量函数，这样我就可以将它放在 for 循环中并影响数组中的多个对象。

```
// Variable function "theEndFunction"
var theEndFunction = function(areaGroups,area){
    areaGroups.mouseover(function(){
        area.attr({"fill":"#099f1d"});
        area.animate({ stroke: "#099f1d", 'stroke-width': 2, opacity: .75 }, 1000, 'elastic');

    if(Raphael.type != 'VML')
    areaGroups.toFront();
        });

    areaGroups.mouseout(function(){ 
        area.attr({"fill":"#39B54A"});
        area.stop().animate({ stroke: "#39B54A", 'stroke-width': 0, opacity: .75 }, 1000, 'elastic');
    }); 
}

theEndFunction(North_Kent,North); 
```

我希望这在某种程度上有所帮助，如果我以后有机会，我会试着扔一个小提琴

# mysql - SQL：返回带有计算列的用户表以获取匹配百分比？

> ID：12987413
> 
> 赞同：5
> 
> 时间：2012-10-20T10:16:00.933
> 
> 标签：mysql, sql, postgresql, stored-procedures, common-table-expression

我目前正在编写一个基于已回答问题匹配用户的网络应用程序。我已经在一个查询中实现了我的匹配算法，并对其进行了调整，以至于计算 2 个用户之间的匹配百分比需要 8.2 毫秒。但是我的 webapp 必须获取用户列表并遍历执行此查询的列表。对于 5000 个用户，在我的本地计算机上花费了 50 秒。是否可以将所有内容放在一个查询中，该查询返回一列具有 user_id 的列和一列具有计算匹配的列？还是存储过程是一种选择？

我目前正在使用 MySQL，但如果需要，我愿意切换数据库。

对于任何对架构和数据感兴趣的人，我创建了一个 SQLFiddle：[http ://sqlfiddle.com/#!2/84233/1](http://sqlfiddle.com/#!2/84233/1)

和我的匹配查询：

```
SELECT COALESCE(SQRT( (100.0*as1.actual_score/ps1.possible_score) * (100.0*as2.actual_score/ps2.possible_score) ) - (100/ps1.commonquestions), 0) AS perc
  FROM (SELECT SUM(imp.value) AS actual_score 
      FROM user_questions AS uq1
      INNER JOIN importances imp ON imp.id = uq1.importance
      INNER JOIN user_questions uq2 ON uq2.question_id = uq1.question_id AND uq2.user_id = 101
        AND (uq1.accans1 = uq2.answer_id 
          OR uq1.accans2 = uq2.answer_id
          OR uq1.accans3 = uq2.answer_id
          OR uq1.accans4 = uq2.answer_id)
      WHERE uq1.user_id = 1) AS as1, 
  (SELECT SUM(value) AS possible_score, COUNT(*) AS commonquestions
      FROM user_questions AS uq1
      INNER JOIN importances ON importances.id = uq1.importance
      INNER JOIN user_questions uq2 ON uq1.question_id = uq2.question_id AND uq2.user_id = 101
      WHERE uq1.user_id = 1) AS ps1,
  (SELECT SUM(imp.value) AS actual_score 
      FROM user_questions AS uq1
      INNER JOIN importances imp ON imp.id = uq1.importance
      INNER JOIN user_questions uq2 ON uq2.question_id = uq1.question_id AND uq2.user_id = 1
        AND (uq1.accans1 = uq2.answer_id 
          OR uq1.accans2 = uq2.answer_id
          OR uq1.accans3 = uq2.answer_id
          OR uq1.accans4 = uq2.answer_id)
      WHERE uq1.user_id = 101) AS as2, 
  (SELECT SUM(value) AS possible_score 
      FROM user_questions AS uq1
      INNER JOIN importances ON importances.id = uq1.importance
      INNER JOIN user_questions uq2 ON uq1.question_id = uq2.question_id AND uq2.user_id = 1
      WHERE uq1.user_id = 101) AS ps2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:20:14.657

我很无聊，所以：这是您查询的重写版本 - 基于您的架构的 PostgreSQL 端口 - 一次计算所有用户配对的匹配：

[http://sqlfiddle.com/#!12/30524/6](http://sqlfiddle.com/#!12/30524/6)

我已经检查过，它为用户对 (1,5) 产生了相同的结果。

```
WITH
userids(uid) AS (
    select distinct user_id from user_questions
),
users(u1,u2) AS (
    SELECT u1.uid, u2.uid FROM userids u1 CROSS JOIN userids u2 WHERE u1 <> u2
),
scores AS (
        SELECT
            sum(CASE WHEN uq2.answer_id IN (uq1.accans1, uq1.accans2, uq1.accans3, uq1.accans4) THEN imp.value ELSE 0 END) AS actual_score,
            sum(imp.value) AS potential_score,
            count(1) AS common_questions,
            users.u1,
            users.u2
        FROM user_questions AS uq1
        INNER JOIN importances imp ON imp.id = uq1.importance
        INNER JOIN user_questions uq2 ON uq2.question_id = uq1.question_id
        INNER JOIN users ON (uq1.user_id=users.u1 AND uq2.user_id=users.u2)
        GROUP BY u1, u2
),
score_pairs(u1,u2,u1_actual,u2_actual,u1_potential,u2_potential,common_questions) AS (
    SELECT s1.u1, s1.u2, s1.actual_score, s2.actual_score, s1.potential_score, s2.potential_score, s1.common_questions
    FROM scores s1 INNER JOIN scores s2 ON (s1.u1 = s2.u2 AND s1.u2 = s2.u1)
    WHERE s1.u1 < s1.u2
)
SELECT
    u1, u2, 
    COALESCE(SQRT( (100.0*u1_actual/u1_potential) * (100.0*u2_actual/u2_potential) ) - (100/common_questions), 0) AS "match"
FROM  score_pairs; 
```

你没有理由不能把它移植回 MySQL，因为 CTE 只是为了可读性而存在，它不会做任何你不能用`FROM (SELECT ...)`. 没有`WITH RECURSIVE`从多个其他 CTE 引用的子句和 CTE。你会有一些可怕的嵌套查询，但这只是一个格式挑战。

变化：

*   生成一组不同的用户
*   自加入该组不同的用户以创建一组用户配对
*   然后加入分数查询中的配对列表以生成分数表
*   通过组合可能的分数 1 和可能分数 2、实际分数 1 和实际分数 2 的大量重复查询来生成分数表。
*   然后在最终的外部查询中对其进行总结

我没有优化查询；正如所写，它在我的系统上运行 5 毫秒。在更大的数据上，您可能需要重组其中的一些或使用一些技巧，例如将一些 CTE 子句转换为`SELECT ... INTO TEMPORARY TABLE`临时表创建语句，然后在查询之前对其进行索引。

您也可能希望将`users`行集的生成移出 CTE 并`FROM`移入`scores`. 这是因为`WITH`需要充当子句之间的优化栅栏，因此数据库必须实现行并且不能使用诸如向上或向下推送子句之类的技巧。

# c# - 在 C# 中正确处理对象层次结构

> ID：12987416
> 
> 赞同：1
> 
> 时间：2012-10-20T10:16:21.133
> 
> 标签：c#, .net, dispose, idisposable, finalize

我正在开发一个特定类层次结构实现 IDisposable 的项目。

一些类还实现了一个 Finalize 方法（ ~MyClass() ）

一般来说，它看起来像这样：

```
public class BaseClass : IDisposable
{
}

public class SomeClass : BaseClass
{
    ~SomeClass()
    {
        Dispose();
    }

    Dispose()
    {
        // Do some stuff.
        base.Dispose();
    }
}

public class AnoterClass : SomeClass
{
    ~AnoterClass()
    {
        Dispose();
    }

    Dispose()
    {
        // Do some stuff.
        base.Dispose();
    }
} 
```

我想知道处理对 Dispose 的调用的正确方法是什么，因为似乎这些对象是通过调用 Dispose() 来处理的，然后由于调用了 Finalize 方法而导致崩溃。

最好将标志保留在层次结构中的最低类（受保护的布尔处理），并在类层次结构的每个级别中检查它？

我发现每个可能的解决方案都需要一些代码重复，这不是我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T10:21:35.990

如果您手动处理对象，则需要禁止完成。

要遵循的模式是[here](http://msdn.microsoft.com/en-us/library/b1yfkh5e%28v=vs.71%29.aspx)

编辑：

我认为你只需要在类层次结构的特定级别上实现，如果你有一些新的东西要在那个层次上处理，否则我相信基类中的处理会做你需要的一切。如果您在任何特定类中的实现只是调用`base.Dispose(disposing)`，那么就不需要它，如果它必须做一些干净的 uop，然后调用，`base.Dispose()`那么您需要它。

按照您的建议拥有一个受保护的标志应该没问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T12:12:29.390

如果您的基类实现了[标准的 IDisposable 模式](http://msdn.microsoft.com/en-us/library/b1yfkh5e%28v=vs.71%29.aspx)，那么您需要做的就是将覆盖添加到本身拥有或非托管资源`Dispose(bool disposing)`的每个派生类：`IDisposable`

```
protected override void Dispose(bool disposing)
{
    try
    {
        if (disposing)
        {
            // Release managed resources
        }
        // Release unmanaged resources
    }
    finally
    {
        base.Dispose(disposing);
    }
} 
```

您不应该在任何派生类中实现终结器。

而且，当然，层次结构中没有自己的`IDisposable`资源的任何类都不需要此覆盖。

# 3d - 3D 建模：将冗余面减少到单个 tri/quad

> ID：12987420
> 
> 赞同：1
> 
> 时间：2012-10-20T10:16:41.510
> 
> 标签：3d, blender, discrete-mathematics

这是场景：

我在 Blender 中有一个视频游戏关卡设计，需要定义物理边界。现在，我通过获取尽可能多的相邻面来完成此操作，这些面总体上形成三/四边形并提取到单独的网格中。这个单独的网格将成为它的物理墙。

我想为它写一个 Python 脚本。基本上，该脚本将为每个三边形/四边形的表面创建一个物理边界。

条件是：

1.  网格中的每个面都必须是三角形。
2.  如果物理墙有多个面，每个面必须具有相同的法线。
3.  如果物理墙有多个面，每个面都必须具有整体的三边形/四边形。

因此，如果您在 Blender 中获取一个立方体并多次细分面，但实际上并未移动任何顶点，则脚本将生成原始立方体，但面位于单独的网格中。

我一直在尝试为此提出一种算法，而我能想到的最好的方法是：

```
for each unprocessed face starting from -axii to +axii (distance from origin):
    select face
    while selected faces have adjacent faces with the same normal:
        select adjacent faces with the same normal
    traverse outermost edges on all faces starting from -axii
    while more than 4 edges with different directions are found
        deselect outermost-face with the greatest +axii (distance from origin)
        traverse outermost edges on all faces starting from -axii
    create a physics wall with the 3 or 4 outermost verticies
    mark all selected faces as processed
    deselect all faces 
```

在我开始编写这个脚本之前，现有的脚本或我想做的部分是否已经存在？有没有人看到以这种方式编写脚本有问题？

# mongodb - 当数组嵌套在多个级别的嵌入式文档中时如何删除数组元素？

> ID：12987426
> 
> 赞同：0
> 
> 时间：2012-10-20T10:17:17.573
> 
> 标签：mongodb

给定以下 MongoDB 示例集合（“学校”），如何从所有俱乐部中删除学生“111”？

```
[
  {
    "name": "P.S. 321",
    "structure": {
      "principal": "Fibber McGee",
      "vicePrincipal": "Molly McGee",
      "clubs": [
        {
          "name": "Chess",
          "students": [
            ObjectId("111"),
            ObjectId("222"),
            ObjectId("333")
          ]
        },
        {
          "name": "Cricket",
          "students": [
            ObjectId("111"),
            ObjectId("444")
          ]
        }
      ]
    }
  },
  ...
] 
```

我希望除了使用光标循环遍历每所学校，然后是每个俱乐部，然后是俱乐部中的每个学生 ID 之外，还有其他方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:26:07.560

MongoDB 对数组内的数组（数组内......）没有很好的支持。我看到的最简单的解决方案是将整个文档读入您的应用程序，在那里进行修改然后保存。这样，当然，操作不是原子的，但对于您的应用程序来说可能没问题。

# objective-c - MKMapView NSUnknownKeyException

> ID：12987431
> 
> 赞同：-1
> 
> 时间：2012-10-20T10:18:02.970
> 
> 标签：objective-c, mkmapview, mkannotationview

也许这个问题已经被问过了，但我找不到它。我得到的错误真的让我头疼！

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<MapViewController 0x8095670> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key mapView.' 
```

我认为这是设置注释并调用事件的时间。我的代码：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

static NSString *identifier = @"MyLocation";
if ([annotation isKindOfClass:[PlaceMark class]]) {

    MKPinAnnotationView *annotationView = 
    (MKPinAnnotationView *)[myMapView dequeueReusableAnnotationViewWithIdentifier:identifier];

    if (annotationView == nil) {
        annotationView = [[MKPinAnnotationView alloc] 
                          initWithAnnotation:annotation 
                          reuseIdentifier:identifier];
    } else {
        annotationView.annotation = annotation;
    }

    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;

    // Create a UIButton object to add on the 
    UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton setTitle:annotation.title forState:UIControlStateNormal];
    [annotationView setRightCalloutAccessoryView:rightButton];

    UIButton *leftButton = [UIButton buttonWithType:UIButtonTypeInfoDark];
    [leftButton setTitle:annotation.title forState:UIControlStateNormal];
    [annotationView setLeftCalloutAccessoryView:leftButton];

    return annotationView;
}

return nil; 
} 
```

我是 ObjC 的新手。但是，如果您需要任何代码以进行更多检查，我很乐意将其发送给您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:17:57.680

我在您显示的代码中看不到它，但是您是否尝试在控制器上的某个地方设置 mapview 但没有将其设置为属性？也许您在声明中使用了错误的名称并且您正在调用`viewcontroller.mapView = ....`

# cakephp - 在 CakePHP 站点中出现“无法写入”错误

> ID：12987434
> 
> 赞同：4
> 
> 时间：2012-10-20T10:18:23.363
> 
> 标签：cakephp, cakephp-2.0

我有一个抛出错误的 CakePHP 站点（一开始很好，并且已经在线几个月了——不确定问题是什么时候开始的）。

我越来越：

> 警告（512）：_cake_core_ 缓存无法将“cake_dev_en-us”写入 Apc 缓存 [CORE/Cake/Cache/Cache.php，第 310 行] 警告（512）：_cake_core_ 缓存无法将“cake_en-us”写入Apc 缓存 [CORE/Cake/Cache/Cache.php，第 310 行] 警告 (512)：_cake_model_ 缓存无法将“default_projects”写入 Apc 缓存

```
[CORE/Cake/Cache/Cache.php, line 310]
Warning (512): _cake_model_ cache was unable to write 'default_projects' to Apc cache [CORE/Cake/Cache/Cache.php, line 310]
Warning (512): _cake_model_ cache was unable to write 'default_clients' to Apc cache [CORE/Cake/Cache/Cache.php, line 310]
Warning (512): _cake_model_ cache was unable to write 'default_clients' to Apc cache [CORE/Cake/Cache/Cache.php, line 310]
Warning (512): _cake_model_ cache was unable to write 'default_projectpages' to Apc cache [CORE/Cake/Cache/Cache.php, line 310]
Warning (512): _cake_model_ cache was unable to write 'default_projectpages' to Apc cache [CORE/Cake/Cache/Cache.php, line 310]
Warning (512): _cake_model_ cache was unable to write 'default_settings' to Apc cache [CORE/Cake/Cache/Cache.php, line 310]
Warning (512): _cake_model_ cache was unable to write 'default_settings' to Apc cache [CORE/Cake/Cache/Cache.php, line 310] 
```

我已确保 tmp 目录是可写的（已将其以及所有包含的文件夹和文件设置为 0777；还检查了它是否正确更新，并且确实如此）；我还通过将调试级别设置为 0 来关闭 core.php 中的错误报告。

大多数站点都很好，但是这个特定的页面是由 AJAX 引入的，我不知道这是否有什么不同。

我已经通过在 cake-error 上设置“display：none”来修补它，但我需要了解为什么会发生这种情况。首先，是什么导致了错误？其次，为什么忽略核心设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-10T06:07:42.427

在 Zend Server 7 上运行 CakePHP 站点时，我遇到了这个 APC 缓存错误。不幸的是，Zend Server 似乎附带了一个***假/替代***APC 层，并且根据我的测试，变量数据存储不起作用（函数总是返回 false ) 这就是 CakePHP 所抱怨的。

ZendServer 仪表板中的这个屏幕显示了 APC。

![Zend Server 7 中的 APC 兼容层](../Images/1fbac4a6147f5b7852a7baf05c225712.png)

解决方案是：

1.  通过编辑`app/Config/core.php`以注释掉以下行来完全禁用 APC 缓存...

    ```
    /*if (extension_loaded('apc') && function_exists('apc_dec') && (php_sapi_name() !== 'cli' || ini_get('apc.enable_cli'))) {
        $engine = 'Apc';
    }*/ 
    ```

2.  或者，您只能有条件地加载 APC。就我而言，我只想在本地开发服务器上禁用它，但让它在生产中保持活动状态。

    ```
    $isLocalDevelopment = strpos($_SERVER['SERVER_NAME'], '.dev');
    if (!$isLocalDevelopment && extension_loaded('apc') && function_exists('apc_dec') && (php_sapi_name() !== 'cli' || ini_get('apc.enable_cli'))) {
        $engine = 'Apc';
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T17:47:41.013

我有时会遇到这个错误，我认为这是由于 APC 内存不足引起的（由于应用程序负载过重）。APC 的错误配置也可能是造成这种情况的原因。

[http://php.net/manual/en/apc.configuration.php](http://php.net/manual/en/apc.configuration.php)：

> 服务器运行后，应将与扩展捆绑在一起的 apc.php 脚本复制到 docroot 的某个位置并使用浏览器查看，因为它提供了对 APC 内部工作的详细分析。如果在 PHP 中启用了 GD，它甚至会显示一些有趣的图形。当然，首先要确保的是它实际上是在缓存文件。如果 APC 正在工作，缓存完整计数（左侧）将显示缓存达到最大容量并且必须强制清除在最后 apc.ttl 秒内未访问的任何条目的次数。这个数字在配置良好的缓存中被最小化。

所以我建议分析 apc.php 的输出（在 ubuntu 上存储在 /usr/share/doc/php-apc/ 中），并作为增加分配给 APC 的内存段大小的第一个修复。

在 php.ini 添加行

`apc.shm_size = 64M`（或任何合适的大小，默认为 32M）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-24T03:32:15.577

它是关于apache用户写权限的，我通常在开发模式下做一个

```
# chmod -R 777 app/tmp 
```

但在生产中，您必须为 apache Web 服务器用户执行可写的 app/tmp 目录

此致

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-03-07T13:49:16.877

更改应用缓存的 tmp 文件夹中的组所有者：

```
sudo chown -R User:_www /Applications/Site/app/tmp/ 
```

然后确保您已经设置了足够的权限 775

# python - 在我的自定义表单中将外键字段从选择框更改为 raw_id_fields

> ID：12987445
> 
> 赞同：1
> 
> 时间：2012-10-20T10:19:48.313
> 
> 标签：python, django, forms, foreign-keys

我没有使用 admin.py 有什么方法可以让我使用外键字段而不是下拉选择框，一个动态搜索框（对用户建议），就像我们在 admin.py 中有 raw_id_fields 一样。

模型.py

```
class model2(models.Model)
     reg = models.ForeignKey(model1, db_column='reg')
     class Meta:
         db_table = u'table2' 
```

表格.py

```
class model2Form(ModelFOrm)
    def __init__(self, *args, **kwargs):
        super(model2Form, self).__init__(*args, **kwargs)
        instance = getattr(self, 'instance', None)
        if instance and instance.id:
            self.fields['reg'].required = False
            self.fields['reg'].widget.attrs['disabled'] = 'disabled'
    def clean_regid(self):
        if self.instance and self.instance.pk:
            return self.instance.reg
        else:
            return self.cleaned_data['reg']
    class Meta:
        model = model2
        exclude = ('id') 
```

视图.py

```
def add(request):
    if request.method == 'POST': # If the form has been submitted...
        form = model2Form(request.POST)
        if form.is_valid():
           form.save()
           return list(request) 
        else :
            raise RuntimeError('Form is invalid')
    else :
        action = model2().get_add_url()
        form = model2Form()
        c = {'form': form, 'action' : action}
        c.update(csrf(request))
        return render_to_response('add.html', c, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:57:20.937

您可以轻松拥有[自动完成功能](http://djangopackages.com/grids/g/auto-complete)。

# visual-studio-2010 - 项目的调试和发布版本。

> ID：12987446
> 
> 赞同：0
> 
> 时间：2012-10-20T10:19:53.073
> 
> 标签：visual-studio-2010

我有一个 Windows 8 应用程序，它有十几个在云（部署）和我的开发机器（开发）上运行的 WCF 服务。我在开发和部署之间切换了很多，每次切换时我总是必须更改服务端点。有没有自动化的方法来做到这一点？创建项目的调试和发布版本？

# java - System.getProperty("line.separator") 与 Android 的 "\n"

> ID：12987451
> 
> 赞同：11
> 
> 时间：2012-10-20T10:21:34.753
> 
> 标签：java, android, linux, httpresponse

我的疑问是`System.getProperty("line.separator")`Android`"\n"`网络操作是否相同。我的意思是说。我将从某些服务器获得行分隔的响应，所以哪个更好用`System.getProperty("line.separator")`？`"\n"`

refred [Carriage 在 Android 中的字符串中返回/换行符，](https://stackoverflow.com/questions/8693544/carriage-returns-line-breaks-with-n-in-strings-in-android)但仍不确定网络操作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T10:28:31.893

如果您得到行分隔的响应，请使用`BufferedReader.readLine()`读取每一行，然后`System.getProperty("line.separator")`如果您想将换行符插入回字符串中，请使用。

# java-me - try/catch 在 Java ME 中什么都不做

> ID：12987454
> 
> 赞同：2
> 
> 时间：2012-10-20T10:21:41.197
> 
> 标签：java-me, try-catch, midp, lcdui, nokia-s40

所以我有以下代码：

```
public class Minesweeper extends MIDlet implements CommandListener {
  public static String error = "";

  public void startApp() throws MIDletStateChangeException {
    Display display = Display.getDisplay(this);

    canvas = new MCanvas();

    canvas.addCommand(exitCommand);
    canvas.addCommand(okCommand);
    canvas.addCommand(newCommand);

    canvas.setCommandListener(this);

    try{
        display.setCurrent(canvas);
    } catch (Exception e) {
        error = e.toString();
    }
  }
} 
```

当我离开`display.setCurrent(canvas);`try 块之外时，应用程序失败并显示`NullPointerException`. 当我注释掉该行时，该应用程序可以正常工作（尽管显然没有添加画布）。**所以错误是由那条线引起的，或者是那条线引起的。**

所以我用 try/catch 包围了那条线。尽管错误是由该行引起的，但当该行被 try/catch 包围时，错误仍然会发生。**我怎样才能发现错误？**（我也试过这个`Throwable`，但仍然没有被抓住。

画布：

```
import javax.microedition.lcdui.Canvas;
import javax.microedition.lcdui.Font;
import javax.microedition.lcdui.Graphics;

public class MCanvas extends Canvas {

protected void paint(Graphics g){
    //Minesweeper.p("repaint");

    Space[] data = Minesweeper.topaint;

    for(int x=0; x<data.length; x++){
        data[x].print();

        int r = data[x].row * 10;
        int c = data[x].col * 10;
        int v = data[x].value;
        String s = "";

        //System.out.println("r:"+Integer.toString(r)+" c:"+Integer.toString(c)+" s:"+Integer.toString(v));

        g.setColor(250, 0, 0);

        //Minesweeper.p("if");

        if(data[x].open){
            switch(v){
            case 0:
                g.setColor(50, 50, 50);
                break;
            case 1:
                g.setColor(100, 50, 50);
                s = "1";
                break;
            case 2:
                g.setColor(150, 50, 50);
                s = "2";
                break;
            case 3:
                g.setColor(200, 50, 50);
                s = "3";
                break;
            case 4:
                g.setColor(250, 50, 50);
                s = "4";
                break;
            case 5:
                g.setColor(250, 100, 100);
                s = "5";
            break;
            case 6:
                g.setColor(250, 125, 125);
                s = "6";
                break;
            case 7:
                g.setColor(250, 150, 150);
                s = "7";
                break;
            case 8:
                g.setColor(250, 175, 175);
                s = "8";
                break;
            case 9:
                g.setColor(250, 200, 200);
                break;
            default:
                g.setColor(250, 100, 100);
            }
        } else {
            g.setColor(0,0,0);
        }

        g.fillRect(c, r, 10, 10);

        g.setColor(250, 250, 250);
        Font font = Font.getFont(Font.FACE_SYSTEM, Font.STYLE_PLAIN, Font.SIZE_SMALL);  
        g.setFont(font);
        g.drawString(s, c+5, r+8, Graphics.HCENTER | Graphics.BASELINE);

        if(data[x].hover){
            g.setColor(250, 250, 250);
            g.drawLine(c, r, c, r+9);
            g.drawLine(c, r, c+9, r);
            g.drawLine(c+9, r, c+9, r+9);
            g.drawLine(c, r+9, c+9, r+9);
        }

        //Minesweeper.p("here?");
    }

    //Minesweeper.p("here");

    //Minesweeper.p(Minesweeper.error);

    if(Minesweeper.error != null){
        g.drawString(Minesweeper.error, 10, 10, Graphics.HCENTER | Graphics.BASELINE);
    }

    Minesweeper.p("msg:"+Minesweeper.message);

    g.setColor(0, 0, 0);
    Font font = Font.getFont(Font.FACE_SYSTEM, Font.STYLE_PLAIN, Font.SIZE_LARGE);  
    g.setFont(font);
    g.drawString(Minesweeper.message, this.getWidth()/2, this.getHeight()-10, Graphics.HCENTER | Graphics.BASELINE);

    Font fontsm = Font.getFont(Font.FACE_SYSTEM, Font.STYLE_PLAIN, Font.SIZE_SMALL);  
    g.setFont(fontsm);
}

protected void keyPressed(int keyCode) {
    int gameaction = getGameAction(keyCode);

    int c = Minesweeper.selected.col;
    int r = Minesweeper.selected.row;

    switch (gameaction) {
    case UP:
        Minesweeper.p("UP");

        if(r>0){
            Minesweeper.selected.leavehere();
            Minesweeper.getSpace(Minesweeper.selected.row - 1, Minesweeper.selected.col).gohere();
        }
        break;
    case DOWN:
        Minesweeper.p("DOWN");

        if(r<Minesweeper.height-1){
            Minesweeper.selected.leavehere();
            Minesweeper.getSpace(Minesweeper.selected.row + 1, Minesweeper.selected.col).gohere();
        }
        break;
    case LEFT:
        Minesweeper.p("LEFT");

        if(c>0){
            Minesweeper.selected.leavehere();
            Minesweeper.getSpace(Minesweeper.selected.row, Minesweeper.selected.col - 1).gohere();
        }
        break;
    case RIGHT:
        Minesweeper.p("RIGHT");

        if(c<Minesweeper.length-1){
            Minesweeper.selected.leavehere();
            Minesweeper.getSpace(Minesweeper.selected.row, Minesweeper.selected.col + 1).gohere();
        }
        break;
    }
    repaint();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:10:04.443

如[Display.setCurrent API javadocs](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Display.html#setCurrent%28javax.microedition.lcdui.Displayable%29)中所述，

> ...该`setCurrent()`方法立即返回，无需等待更改发生...

由于上述原因，`setCurrent`可能（并且很可能*会*）触发的调用中可能发生的异常会通过您的 try-catch。

为了能够捕获和报告此类异常，应该研究 setCurrent 触发了哪些调用（在您的情况下，这些调用在用于[Canvas 的 API javadocs，事件传递部分](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Canvas.html#eventdelivery)中进行了解释），在适当的情况下通过 try-catch 块覆盖这些并设计如果发生这些异常，则以适当的方式报告异常。

在您的情况下，try-catch 可能会包围代码`MCanvas.paint`（这是可能发生 NPE 的地方），并且可能会报告异常，例如通过从 catch 块`Alert`调用该屏幕来显示带有错误消息的适当屏幕（例如） 。`setCurrent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:53:42.130

如果我是你，我会继续在 MCanvas 类中插入 try/catch 块。

如果不查看更多代码，任何人都很难弄清楚 NullPointerException 发生在哪里。

从您到目前为止粘贴的代码中，我能想到的唯一问题是：

您的扫雷类是否包含一个名为 topaint 的静态对象空间数组？您是否声明了它但可能忘记用数据填充它？

```
Space[] topaint = new Space[20]; // Declared, but nothing in it yet. 
```

尝试访问 Minesweeper.topaint[0] 将给出 NullPointerException，除非您也这样做

```
topaint[0] = new Space(); 
```

# c# - 使用 ASP.net 捕获窗口屏幕几分钟

> ID：12987459
> 
> 赞同：1
> 
> 时间：2012-10-20T10:22:05.413
> 
> 标签：c#, asp.net

“通过这个问题，我只使用 asp.net 在客户端谈论”

我的要求是“捕获几分钟的窗口屏幕并将其存储为任何格式的视频。”

例如，如果我想捕获窗口的屏幕并以某种 jpeg 或 gif 格式存储，我可以使用 system.windows.forms 库并可以实现如下代码

```
public void StartCapturing(object sender, EventArgs e)
{

        System.Drawing.Bitmap bitmap = new System.Drawing.Bitmap(Screen.PrimaryScreen.WorkingArea.Width, Screen.PrimaryScreen.WorkingArea.Height);
        System.Drawing.Graphics graphics = System.Drawing.Graphics.FromImage(bitmap as System.Drawing.Image);
        graphics.CopyFromScreen(25, 25, 25, 25, bitmap.Size);
        bitmap.Save(@"D:\Raghu\MyScreenshots\myscreenshot3.bmp", System.Drawing.Imaging.ImageFormat.Bmp);
} 
```

所以我的问题是我可以包含任何库，以便通过添加一些尽可能简单的代码来满足我的需求。我见过一些工具，如 snagit 等，但对此我不清楚。任何澄清表示赞赏...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-20T11:01:19.653

您可能想尝试查看 Selenium 以捕获您网站的快照，请参阅[使用 Selenium WebDriver 截取屏幕截图](https://stackoverflow.com/questions/3422262/take-a-screenshot-with-selenium-webdriver)

# android - 从 Manifest.xml 中读取应用程序标签和名称

> ID：12987462
> 
> 赞同：3
> 
> 时间：2012-10-20T10:22:27.037
> 
> 标签：android, xml

如何从已安装应用程序的清单中检索以下信息？

```
activity android:label="Movie Player" 
android:name=".MoviePlayer" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:01:56.250

PackageInfo类提供对清单内容的访问，它包含[具有](http://developer.android.com/reference/android/content/pm/PackageInfo.html)您需要的字段的[ActivityInfo对象（以及其他对象）。](http://developer.android.com/reference/android/content/pm/ActivityInfo.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-28T06:58:37.713

要从清单中读取应用程序标签，请使用[PackageInfo](http://developer.android.com/reference/android/content/pm/PackageInfo.html)类

Kotlin 代码

```
packageManager.getPackageInfo(packageName,0).applicationInfo.nonLocalizedLabel.toString() 
```

# wordpress - 简单的 Jquery 下拉菜单适用于 jsfiddle 但不适用于浏览器（使用 Wordpress）

> ID：12987463
> 
> 赞同：0
> 
> 时间：2012-10-20T10:22:30.780
> 
> 标签：wordpress, browser, drop-down-menu, jsfiddle

脚本

```
 // Wait for the page and all the DOM to be fully loaded
    $('body').ready(function() {

   // Add the 'hover' event listener to our drop down class
   $('.dropdown').hover(function() {
    // When the event is triggered, grab the current element 'this' and 
    if ($(this).find('.sub_navigation').is(":visible")) {
        // find it's children '.sub_navigation' and display/hide them
        $(this).find('.sub_navigation').slideUp();
    } else {
        $(this).find('.sub_navigation').slideDown();

    }

    });
    });​ 
```

首先这里是小提琴 //

[http://jsfiddle.net/Hv2HZ/](http://jsfiddle.net/Hv2HZ/)

我正在使用 wordpress 创建我的网站...（如果这很重要）有人帮助我让下拉菜单更好地工作。但是自从我添加了新的 JQuery 脚本后，这个链接就不起作用了。我尝试将鼠标悬停在它上面，但没有掉下菜单。

当我将鼠标悬停在小提琴上时，它可以工作。为什么是这样？我该如何解决这个问题？！:(

# php - 在 domdocument 中加载后字符串的结果不同

> ID：12987465
> 
> 赞同：4
> 
> 时间：2012-10-20T10:23:02.497
> 
> 标签：php, domdocument

我想在加载 domdocument 后得到相同的结果。怎么做？

```
echo "Café"; 

$s = <<<HTML
<html>
<head>
</head>
<body>
Café
</body>
</html>
HTML;

$d = new domdocument;
$d->loadHTML($s);

echo $d->textContent; 
```

第一个回声的结果是 = Café
第二个回声的结果是 =Café

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T10:32:38.947

您需要将您的 HTML 标记为 UTF-8 编码

```
$s = <<<HTML
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
</head>
<body>
Café
</body>
</html>
HTML;

$d = new domdocument;
$d->loadHTML($s);

echo $d->textContent; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:31:35.840

您的问题是编码，
对于第一个回声，您使用默认编码回显文本，
但对于通过 DOMDocument 排序的文本，
e+撇号被分成两个字符，

我不知道如何对 DOMDoc 强制执行正确的编码......
**但我相信这是你的问题**

希望我有所帮助，祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T10:35:34.140

在 HTML 之前使用 First echo，您可以使用服务器默认编码发送 HEADERS。这会忽略任何下一组编码。您必须先回显

```
<Html tag and encodings etc.. 
```

而不是回显任何其他值..

# jquery - JQuery - 从同一个父元素的另一个子元素中检索值

> ID：12987469
> 
> 赞同：1
> 
> 时间：2012-10-20T10:23:27.077
> 
> 标签：jquery

我对 JQuery 相当陌生，并且在某些我确信很简单的事情上遇到了麻烦。这是我正在使用的一些 html 的示例：

```
<tr>
<td><div class="testclass"><p>Test text</p></div></td>
<td><button class="testButton">Button text</button></td>
</tr>​ 
```

单击按钮时，我想`<p>`在前一个单元格中获取值。这是我目前尝试选择它的方式：

```
var text = $(".testButton").parent().parent().closest('p').text(); 
```

在`onClick`按钮的功能内，我也尝试过：

```
$(this).prev('p').text(); 
```

然而，它总是`null`。我已经在 jsfiddle 上搞砸了一段时间，试图做到这一点，但没有运气。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T10:27:49.787

尝试使用：

```
$(".testButton").click(function(){
 alert($(this).parent().parent().find('p').text());
}); 
```

演示：http: [//jsfiddle.net/ZsLZ2/](http://jsfiddle.net/ZsLZ2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T10:25:45.267

为什么不

```
var text = $(".testButton").parent().prev().find('p').text(); 
```

请注意，如果您有很多按钮，则应使用 $(this) 选择好的按钮：

```
$('.testButton').click(function(){
    var text = $(this).parent().prev().find('p').text();
    alert(text);
});​ 
```

[示范](http://jsfiddle.net/DZPRc/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T10:32:09.190

在您的情况下，您可以使用[兄弟姐妹](http://api.jquery.com/siblings/)：

```
$('.testButton').click(function() {
    alert($(".testButton").siblings().text())
}); 
```

**演示：http:** [//jsfiddle.net/3a69A/](http://jsfiddle.net/3a69A/)

# android - 由代码创建时，Android 重新关注 EditText

> ID：12987477
> 
> 赞同：2
> 
> 时间：2012-10-20T10:24:37.030
> 
> 标签：android, focus, android-edittext

每当我单击一个按钮时，我都在使用代码来创建一个新的 TextView 和一个新的 EditText。创建了 TextView 和 EditText 但问题是当我专注于新的 EditText 时，不可能重新关注以前的。也许用户输入了错误的信息，所以我想重新获得对该 EditText 的访问权限。

我向您展示我使用的代码：

```
public void anadir(View view){
    TextView nuevoTexto = new TextView(this);
    EditText nuevoEdito = new EditText(this);

    nuevoTexto.setText("Dirección correo nº"+contador);
    nuevoTexto.setTextSize(15);
    nuevoTexto.setPadding(margenIzquierdoTexto, margenArribaTexto, 0, 0);

    nuevoEdito.setEms(10);
    nuevoEdito.setInputType(InputType.TYPE_CLASS_TEXT);
    nuevoEdito.setImeOptions(EditorInfo.IME_ACTION_NEXT);
    nuevoEdito.setFocusable(true);
    nuevoEdito.setPadding(margenIzquierdoEdito, margenArribaEdito, 0, 0);

    padreTexto.addView(nuevoTexto);
    padreEdito.addView(nuevoEdito);
    textos.add(nuevoTexto);
    editos.add(nuevoEdito);
    contador++;
    margenArribaTexto += 40;
    margenArribaEdito += 40;
} 
```

我已使用以下选项重新获得该访问权限，但它不起作用。

```
nuevoEdito.setFocusable(true);
nuevoEdito.setFocusableInTouchMode(true);
nuevoEdito.setClickable(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:10:03.437

尝试：

```
nuevoEdito.requestFocus(); 
```

# ruby - 如何从数组构建哈希

> ID：12987478
> 
> 赞同：2
> 
> 时间：2012-10-20T10:24:38.027
> 
> 标签：ruby, arrays, hash

这是一个石头剪刀布游戏。从 irb，game.class 说它是一个数组。我希望找到赢得比赛的人的姓名（在本例中为 Player2）。

> 游戏 = [[“玩家 1”，“P”]，[“玩家 2”，“S”]]

想到的方法是返回一个拆分名称值的哈希。然后通过该值搜索该哈希以获取玩家名称。

```
h = Hash.new(0)
game.collect do |f|
  h[f] = f[1]
end
h
#=> {["Player1", "P"]=>"P", ["Player2", "S"]=>"S"} 
```

这是接近但没有雪茄。我想

```
{"Player1" => "P", "Player2" => "S"} 
```

我再次尝试使用注入方法：

```
game.flatten.inject({}) do |player, tactic| 
  player[tactic] = tactic  
  player 
end
#=> {"Player1"=>"Player1", "P"=>"P", "Player2"=>"Player2", "S"=>"S"} 
```

这不起作用：

```
Hash[game.map {|i| [i(0), i(1)] }]
#=> NoMethodError: undefined method `i' for main:Object 
```

我会很感激一些可以帮助我理解的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T10:36:21.987

您也可以简单地执行此操作。

```
game = [["Player1", "P"], ["Player2", "S"]]
#=> [["Player1", "P"], ["Player2", "S"]]
Hash[game]
#=> {"Player1"=>"P", "Player2"=>"S"} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T10:31:45.027

采用：

```
game.inject({}){ |h, k| h[k[0]] = k[1]; h } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T21:51:07.757

使用`each_with_object`意味着您不需要在块中有两个语句，就像在 xdazz 的答案中一样

```
game.each_with_object({}){ |h, k| h[k[0]] = k[1] } 
```

您可以通过解构第二个块参数来使其更具可读性

```
game.each_with_object({}){ |hash, (name, tactic)| hash[name] = tactic } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-12T13:06:33.510

您可以为此使用 Ruby 内置的[Array#to_h](http://ruby-doc.org/core-2.1.0/Array.html#method-i-to_h)方法：

```
game.to_h
#=> {"Player1"=>"P", "Player2"=>"S"} 
```

# function - Emacs 功能自动接受提示

> ID：12987483
> 
> 赞同：0
> 
> 时间：2012-10-20T10:25:15.560
> 
> 标签：function, emacs, prompt

我正在尝试找到一种方法来自动接受来自 minibuffer 的第一个提案。

```
(defun find-file-at-point-without-prompt ()
(interactive )
(find-file-at-point)
) 
```

调用结果提示：“ `Find file or URL: ......`”。我只想要一个自动的“是”。

传递参数不起作用。对于其他情况也可能很有趣。在此之前我使用了一个宏，它只会调用 find-file-at-point 后跟一个 RET。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:39:44.940

似乎没有变量可以自动接受提示。

您可以`ffap-read-file-or-url`通过删除正在执行提示的部分来重新定义功能。它仍然是这样的

```
(defun ffap-read-file-or-url (prompt guess)
  "Read file or URL from minibuffer, with PROMPT and initial GUESS."
  (or guess (setq guess default-directory))
  (let (dir)
    ;; Tricky: guess may have or be a local directory, like "w3/w3.elc"
    ;; or "w3/" or "../el/ffap.el" or "../../../"
    (or (ffap-url-p guess)
    (progn
      (or (ffap-file-remote-p guess)
          (setq guess
            (abbreviate-file-name (expand-file-name guess))
            ))
      (setq dir (file-name-directory guess))))
    ;; Do file substitution like (interactive "F"), suggested by MCOOK.
    (or (ffap-url-p guess) (setq guess (substitute-in-file-name guess)))
    ;; Should not do it on url's, where $ is a common (VMS?) character.
    ;; Note: upcoming url.el package ought to handle this automatically.
    guess)) 
```

# javascript - 用 JavaScript 编写循环

> ID：12987488
> 
> 赞同：1
> 
> 时间：2012-10-20T10:25:43.877
> 
> 标签：javascript

我想创建一个脚本，当我编写一个字符串来检查这个字符串是否是数字时，如果它不是数字，它应该再次给我输入对话框，这是我尝试过的代码：

```
<script>

var nombre;
nombre = parseInt(prompt("Donnez un nombre entre 0 et 999: "));
var nombreIsInt = false;

while(!nombreIsInt)
{
    if(isNaN(nombre))
        prompt("Svp Saisie un nombre entre 0 et 999: ");
    else
        nombreIsInt = true;
}

</script> 
```

问题是当我写一个数字时，它又给了我输入对话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T10:29:54.360

尝试一个 do-while 循环：

```
do {
    var nombre = parseInt(prompt("Donnez un nombre entre 0 et 999: "));
    var nombreIsInt = !isNaN(nombre);
} while (!nombreIsInt); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T10:28:49.060

您需要将提示分配给 nombre。这里：

```
<script>

var nombre;
nombre = parseInt(prompt("Donnez un nombre entre 0 et 999: "));
var nombreIsInt = false;

while(!nombreIsInt)
{
    if(isNaN(nombre))
        nombre = prompt("Svp Saisie un nombre entre 0 et 999: "); // the problem is here
    else
        nombreIsInt = true;
}

</script> 
```

# iphone - ABPeoplePickerNavigationController 仅在模拟器中被解散时崩溃

> ID：12987491
> 
> 赞同：3
> 
> 时间：2012-10-20T10:25:46.777
> 
> 标签：iphone, objective-c, ios, ios-simulator

我只在模拟器中遇到了这个崩溃。在真实设备上，它可以正常工作和调试。（因此它不是太重要，但我正在做一个模拟器可以派上用场的演示文稿。）

```
- (BOOL)peoplePickerNavigationController:

(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {

    [self displayPerson:person];

    if ([self respondsToSelector:@selector(dismissViewControllerAnimated:completion:)]){
        [self dismissViewControllerAnimated:YES completion:nil];
    } else {
        [self dismissModalViewControllerAnimated:YES];
    }

    return NO;
} 
```

崩溃发生在：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

我所看到的是：`"Thread 1: EXC_BREAKPOINT (code=EXC_I386_BTP, subcode=0x0)"`

调试窗口中没有特定的输出。Zoombies 已启用。我做ARC。我正在使用情节提要，但我使用以下代码以编程方式调用 ABPersonPicker...：

```
-(void)showPeoplePickerController
{

    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];

    picker.peoplePickerDelegate = self;

    if ([self respondsToSelector:@selector(presentViewController:animated:completion:)]) {
        [self presentViewController:picker animated:YES completion:nil];
    } else {
        [self presentModalViewController:picker animated:YES];
    }

    return;
} 
```

请记住，它在我拥有的设备（iPod Touch 第 4 代、iPhone 4 和 iPhone 4S）上运行良好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T12:55:14.097

您的问题是您没有强烈引用选择器。添加一个 ivar 来保存它，然后在委托回调中完成后，使用主队列上的调度异步块将 ivar 清零并释放它。（抱歉，没有从 iPad 输入的代码）

编辑：查看您的 showPeoplePickerController 方法 - 您创建选择器并将其保存在一个自动的中，当您退出该方法时它会被释放。您希望通过使用 ivar 而不是自动选择器来保持对选择器的强引用。

然后你不想在委托回调中释放选择器 - 这通常有效，但会在意想不到的时候咬你，所以你想在委托回调完成后释放这种类型的对象。事实上，如果我可以使用 'picker = nil' 释放它，我通常首先将对象委托属性设置为 nil。在一个块中，“picker”变成了“self->picker”。您也可以使用 performSelector:afterDelay:0 我只是更喜欢块。

EDIT2：所以我在做什么

```
- (BOOL)peoplePickerNavigationController:shouldContinueAfterSelectingPerson: 
```

只是返回NO。我等到这条消息：

```
- (void)peoplePickerNavigationControllerDidCancel: 
```

解雇它。我还有一些其他代码会弹出一个操作表，该操作表确认保存选定的地址并关闭，但它的旧代码现在不确定它是如何工作的。无论如何，希望这会有所帮助。

# javascript - Jquery动画负顶部并返回0 - 第三次点击后开始混乱

> ID：12987493
> 
> 赞同：0
> 
> 时间：2012-10-20T10:26:20.663
> 
> 标签：javascript, jquery, jquery-animate, slide

有问题的网站是这个：

[http://www.pickmixmagazine.com/wordpress/](http://www.pickmixmagazine.com/wordpress/)

当您单击其中一个帖子（任何框）时，iframe 将从顶部向下滑动，其中包含内容。单击 iframe 左上角的“主页”按钮后，iframe 会向上滑动。这在前 2 次完美运行，在第 3 次点击帖子时，内容会向下滑动，但是当点击主页按钮时，内容会正常滑回，但一旦它一直滑动到它的位置应该在，iframe 会直接下降到单击主页按钮之前的位置，我再次单击它，然后它就可以工作了。

这是我用于向上和向下滑动功能的代码：

```
/* slide down function */

var $div = $('iframe.primary');
var height = $div.height();
var width = parseInt($div.width());
$div.css({ height : height });
$div.css('top', -($div.width()));

$('.post').click(function () {
      $('iframe.primary').load(function(){
            $div.animate({ top: 0 }, { duration: 1000 });
      })

      return false;
 });

 /* slide Up function */

 var elm = parent.document.getElementsByTagName('iframe')[0];
 var jelm = $(elm);//convert to jQuery Element
 var htmlElm = jelm[0];//convert to HTML Element

 $('.homebtn').click(function(){
      $(elm).animate({ top: -height }, { duration: 1000 });

      return false;
 }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:57:26.290

您是否考虑过在 jquery 中使用 Ajax，例如 load()、ready() 来更好地控制它们？

我也不确定您要对此做什么。

```
var height = $div.height();
$div.css({ height : height }); 
```

可能你想获取当前窗口的高度？在哪里可以通过这种方式获得

```
var $dDiv = $('iframe.primary');
var innerH = window.innerHeight;
$dDiv.height(innerH); 
```

还请尝试避免使用默认名称（如高度、宽度、div 等）命名您的自定义变量...您会混淆自己并使调试变得痛苦。

# c# - 将日期字符串转换为日期时间

> ID：12987497
> 
> 赞同：3
> 
> 时间：2012-10-20T10:26:53.720
> 
> 标签：c#, datetime

当我使用以下代码时，我有格式的日期字符串`dd-MMM-yyyy`并希望将其转换为`datetime`

```
DateTime.ParseExact("20-Oct-2012", "yyyy-MM-dd HH:mm tt", null) 
```

它导致错误

> *字符串未被识别为有效的日期时间。*

当我修改上面的代码

```
DateTime.ParseExact("20-Oct-2012", "dd-MMM-yyyy", null) 
```

然后我得到格式（`mm/dd/yyyy`）的日期时间：`10/20/2012 12:00:00 AM`

但我需要它应该转换为`yyyy/mm/dd`格式。请在这方面帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T10:31:25.590

你应该试试这个

```
DateTime.ParseExact("20-Oct-2012", "dd-MMM-yyyy", null).ToString("yyyy/mm/dd") 
```

有关格式的进一步阅读，[请查看此](http://www.codeproject.com/Articles/14743/Easy-String-to-DateTime-DateTime-to-String-and-For)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:34:34.280

您需要区分两个不同的问题：将原始字符串解析为抽象`DateTime`表示，以及将后者转换回另一个字符串表示。

在您的代码中，您只处理前者，并依靠隐式`ToString()`方法调用（使用系统的当前语言环境）将其转换回字符串。如果要控制输出格式，需要显式指定：

```
// Convert from string in "dd-MMM-yyyy" format to DateTime.
DateTime dt = DateTime.ParseExact("20-Oct-2012", "dd-MMM-yyyy", null);

// Convert from DateTime to string in "yyyy/MM/dd" format.
string str = dt.ToString("yyyy/MM/dd"); 
```

另请注意，`mm`格式说明符代表分钟；月由 表示`MM`。

**编辑**：'转换后的日期包含值“10/20/2012 12:00:00 AM”。' 小心你的意思。构造的`DateTime`值包含*独立*于任何格式的解析日期和时间的抽象表示。

但是，为了显示它，您需要将其转换回某种字符串表示形式。当您在调试器中查看变量时（您可能正在这样做），Visual Studio 会自动调用 上的无参数[`ToString()`](http://msdn.microsoft.com/en-us/library/k494fzbf.aspx)方法，该方法在`DateTime`当前文化下呈现日期和时间（在您的情况下，假定为美国文化）。

要更改此行为以使其以自定义格式呈现日期和时间，您需要显式调用[`ToString(string)`](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)重载（或其他重载之一），如我在上面的示例中所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T10:35:36.103

你可以试试这个：

```
Convert.ToDateTime("20-Oct-2012").ToString("yyyy/MM/dd") 
```

希望这会有所帮助！

# php - 如何在href中发布标题中的数据

> ID：12987500
> 
> 赞同：0
> 
> 时间：2012-10-20T10:27:15.360
> 
> 标签：php, html

我需要`$number`从页面中读取`pagination.php`

```
echo "<span class='pagination'><a href='pagination.php' >  ".$number."    </a></span>"; 
```

可能吗？如何？谢谢你 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T10:29:41.583

我认为您可以使用 get 来解决它：

```
echo "<span class='pagination'><a href='pagination.php?number=". $number ."' >  ". $number ."    </a></span>"; 
```

这样，在 pagination.php 中，您将能够通过阅读来检索它

```
$_GET['number'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:37:52.290

您应该尝试将数字作为参数附加到 url：

```
echo '<span class="pagination">'
   . '<a href="pagination.php?number=' . urlencode($number) . '">' . htmlspecialchars($number) . '</a>'
   . '</span>'; 
```

在 pagination.php 上，您将拥有数字作为`$_GET['number']`变量。为避免跨站点脚本问题，您应该在将数字插入页面源（此页面和 pagination.php）时对其进行编码。更好的是`$number`在将其插入页面源之前将其限制为整数（如果它只允许整数值），例如：

```
$number = (int)$number; 
```

这样你就可以像这样安全地插入它：

```
echo '<span class="pagination">'
   . '<a href="pagination.php?number=' .$number . '">' . $number . '</a>'
   . '</span>'; 
```

希望这可以帮助。

# jquery - jQuery Mobile 点击事件没有触发？

> ID：12987501
> 
> 赞同：0
> 
> 时间：2012-10-20T10:27:28.900
> 
> 标签：jquery, events, jquery-mobile

我整个早上都在尝试解决这个问题，所以如果可以的话，请帮助我。

我有这个代码：

```
$(document).bind('pageinit', function(){
    var menuOpen;
    // Menu
    $('#menu-trigger').on('click', function(e){
        e.preventDefault();
        alert('click!');
        if(menuOpen != true) {
            $('.ui-page-active').animate({
                'margin-left': '390px'
            }, 300, function(){
                menuOpen = true
            });
            return false;
        } else {
            $('.ui-page-active').animate({'margin-left': 0}, 300, function(){menuOpen = false});
            return false;
        }
    });
}); 
```

我的问题是我从来没有收到“**点击！** ”警报。单击带有 的元素后`id` `#menu-trigger`，没有任何反应。

我已经尽我所能，但仍然没有结果。

我的代码在一个`script`标签内，就在 jQuery Mobile 脚本包含的下方。

PS：这是HTML代码片段：

```
<header data-role="header" class="with-logo">
  <a href="#" id="#menu-trigger" data-role="button" class="ui-btn-left"><img src="images/menu-trigger-icon.png"></a>
  <h1><img src="images/logo.png"></h1>
</header><!-- /header --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:41:36.883

您必须从锚的 id 属性值中删除哈希符号。

锚标签应该是这样的：

```
<a href="#" id="menu-trigger" data-role="button" class="ui-btn-left"> 
```

并且事件处理程序脚本应该是这样的：

```
<script>
    $(document).on('click', '#menu-trigger', function(e){
        // your code
    });
</script> 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:53:39.797

您应该将 pageinit 绑定到具有 div 的 div，`data-role = "page"`而不是文档。

还取决于您的 html 的外观，您可能在错误的元素上使用了“on”。它必须是要将代码绑定到单击事件的元素的父元素。所以就像

```
$('#someparent').on('click', yourfunctionasdefinedabove, '#menu-trigger'); 
```

（如果 menu-trigger 是父级，请忽略第二部分）

# javascript - 将谷歌地图多边形保存到 MySQL

> ID：12987503
> 
> 赞同：-2
> 
> 时间：2012-10-20T10:27:46.293
> 
> 标签：javascript, google-maps, google-maps-api-3

> **可能重复：**
> [谷歌地图使用 PHP 在 MySQL 中保存多边形和点](https://stackoverflow.com/questions/5161350/google-maps-save-polygon-and-points-in-mysql-using-php)

在我的项目中，我必须向客户（食品公司）提供谷歌地图，它将通过在谷歌地图上绘制多边形来定义其自定义本地区域。我已经做到了这一点。

我想知道如何保存这个多边形，以便我可以确定客户（其 latlong 已知）是否在 tat 区域内。我使用谷歌地图 api 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:53:07.670

Google 没有提供将多边形保存到 MySql 的方法。如果您在地图上显示了多边形，请遍历多边形的顶点并将它们发送到您的服务器以存储在 MySql 中。

这是[一个示例](http://www.geocodezip.com/blitz-gmap-editor/test5b.html)，将修改后的多边形输出为 JSON 或 KML，从[该项目修改](http://code.google.com/p/blitz-gmap-editor/)

# wpf - WPF 中的 if(pictureBox.Image == null)

> ID：12987508
> 
> 赞同：1
> 
> 时间：2012-10-20T10:27:54.050
> 
> 标签：wpf

我想控制我的图像对象是或不是`null`。`if(pictureBox.Image == null)`工作 C# 但我找不到 WPF 的代码。我应该为此写什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:33:41.843

你可以这样做 ：-

```
 private PictureBox p1= null; 
```

现在您可以将值设置为 null

```
 p1= (PictureBox)image; 
```

最后，您可以将其用作：-

```
 if(p1 == null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:36:22.143

WPF 没有`PictureBox`控件。等效的是`Image`（[如此处所示](http://msdn.microsoft.com/en-us/library/ms750559.aspx)），因此您可以这样做：

```
if(myImage.Source == null) ... 
```

除非您正在做一些更复杂的事情并在 WPF 中托管 WinForm 控件？

# cocos2d-iphone - CCTouchesBegan 的问题

> ID：12987509
> 
> 赞同：0
> 
> 时间：2012-10-20T10:27:55.500
> 
> 标签：cocos2d-iphone

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touch = [touches anyObject];
    CGPoint point1 = [touch previousLocationInView:[touch view]];
    CGPoint point2 = [touch locationInView:[touch view]];

    point1 = [[CCDirector sharedDirector]convertToGL:point1];
    point2 = [[CCDirector sharedDirector]convertToGL:point2];

    pre = point1;
    curr = point2;
    CCLOG(@"the pre location is %@",NSStringFromCGPoint(pre));
    CCLOG(@"the curr location is %@",NSStringFromCGPoint(curr));

} 
```

上面的代码有什么问题？pre 和 curr 变量都给出相同的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:47:49.220

当触摸开始时，显然没有先前的触摸，因为触摸刚刚开始。所以previousLocation和location都是一样的。

如果您在 ccTouchesMoved 中运行此代码，它将按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:56:26.033

您只需在 ccTouchesEnded 方法中打印您的当前位置。它会给你两点之间的差异。

```
-(void) ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

所以你只需要进入`previousLoaction`ccTouchesBegan 方法。

# android - android将适配器设置为线性布局

> ID：12987514
> 
> 赞同：1
> 
> 时间：2012-10-20T10:28:35.420
> 
> 标签：android, listview

我试图将列表视图放在滚动视图中，这是不可能的，因为我在几个类似的问题中发现了这一点。

我有一个很大的菜单要放在列表视图上方，它完全隐藏了小屏幕上的列表视图，所以我需要一个不可能的滚动视图。我读到我应该使用线性布局而不是列表视图来解决这个问题。但不确定如何在线性布局上设置适配器。我正在使用惰性适配器在列表视图中加载图像。

代码：

```
LinearLayout list=(LinearLayout)findViewById(R.id.listActivities);
adapter=new LazyAdapter(this, activityList);
list.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:12:45.183

您可以在列表视图标题中添加 Horizo​​ntalScrollView，在 Horizo​​ntalScrollView 中您可以在其中添加线性布局和水平菜单

或者

另一种选择是在列表视图的标题中有一个简单的按钮说操作并单击带有菜单（操作）列表的打开的新对话框等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:43:22.980

您可以将视图作为标题添加到列表视图，这将解决您的问题，它将视图放置在列表视图中，但位于列表项的顶部。

`listview.addHeaderView(yourview)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T10:45:36.477

正如我从您的问题中了解到的那样，您不会将一个视图放在列表视图的顶部。尝试`ListView.addHeaderView(View v)`用于该目的。有关更多信息，请参阅[android API 文档](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)。

# jquery - JQuery 文件上传动作=server/php

> ID：12987515
> 
> 赞同：0
> 
> 时间：2012-10-20T10:28:46.177
> 
> 标签：jquery, ruby-on-rails, file-upload

我试图开始使用[JQuery 文件上传器](https://github.com/blueimp/jQuery-File-Upload)，但遇到了困难。我已将他们拥有的所有文件和文件夹复制并粘贴到我的 rails 项目文件夹中。但是“添加文件”按钮不起作用。我可以选择文件，但之后没有任何反应。我研究了代码并发现：

```
<!-- The file upload form used as target for the file upload widget -->
    <form id="fileupload" action="server/php/" method="POST" enctype="multipart/form-data">
        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload --> 
```

一个名为“action =“server/php”的动作。他们没有具有这样一个动作的控制器，他们有一个这样的名称是一个文件夹[/server/php](https://github.com/blueimp/jQuery-File-Upload/tree/master/server/php)。所以这个动作对应一个文件夹。我也下载了它并且放在我的rails项目中。我不想将所有内容上传到服务器，我想先看看它是否与更简单的“rails s”一起使用。但我不知道如何链接

```
action="server/php" 
```

在

```
<form id="fileupload" action="server/php/" method="POST" enctype="multipart/form-data"> 
```

到我的服务器/php 文件夹。

如果有人帮助我处理它，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:30:30.140

我遇到了一个类似的问题，但是在一个 PHP 站点上。

尝试

```
action="server/php/index.php" 
```

# ruby-on-rails - 运行 Mongrel 时出现错误“未初始化的常量 ActionController::CgiRequest>”

> ID：12987517
> 
> 赞同：0
> 
> 时间：2012-10-20T10:28:58.417
> 
> 标签：ruby-on-rails, ruby, redmine, mongrel

我正在使用 Mongrel 运行一个 ruby​​ 应用程序（Redmine）。它可以成功启动，但是，一旦收到 HTTP 请求，它就会遇到以下错误：

```
** Signals ready.  TERM => stop.  USR2 => restart.  INT => stop (no restart).
** Rails signals registered.  HUP => reload (without restart).  It might not work well.
** Mongrel 1.2.0.pre2 available at 0.0.0.0:9001
** Use CTRL-C to stop.
2012-10-20 11:20:21 -0700: **Error calling Dispatcher.dispatch #<NameError: uninitialized constant ActionController::CgiRequest>
/usr/local/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2/lib/mongrel/rails.rb:76:in `block in process'
<internal:prelude>:10:in `synchronize'**
/usr/local/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2/lib/mongrel/rails.rb:74:in `process'
/usr/local/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2/lib/mongrel.rb:165:in `block in process_client'
/usr/local/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2/lib/mongrel.rb:164:in `each'
/usr/local/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2/lib/mongrel.rb:164:in `process_client'
/usr/local/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2/lib/mongrel.rb:291:in `block (2 levels) in run' 
```

有没有人有任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:54:20.100

原来是**如何启动 Mongrel**的问题：

ruby script/rails server mongrel --> 这成功启动了我的 ruby​​ 应用程序。

mongrel_rails start --> 这带来了上面的错误信息。

**这两个命令有什么区别？**

我的红宝石应用程序是 Redmine。

# tdd - Meteor 测试驱动开发

> ID：12987525
> 
> 赞同：120
> 
> 时间：2012-10-20T10:30:13.900
> 
> 标签：tdd, meteor

我看不到如何在流星中进行测试驱动开发。

我在文档或常见问题解答中没有看到任何地方提到它。我没有看到任何例子或类似的东西。

我看到一些软件包正在使用 Tinytest。

我需要开发人员的回应，关于此的路线图是什么。类似于以下内容：

*   可能的，没有文档，自己想办法
*   流星不是以您可以制作可测试应用程序的方式构建的
*   这是计划中的功能
*   ETC

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-10-21T16:05:16.687

**更新 3**：从 Meteor 1.3 开始，meteor 包含一个[测试指南](http://guide.meteor.com/testing.html)，其中包含单元、集成、验收和负载测试的分步说明。

**更新 2**：截至 2015 年 11 月 9 日，[Velocity 不再维护](http://xolv.io/velocity-announcement)。Xolv.io 正在将精力集中在[Chimp](http://xolv.io/products/chimp)上，而[Meteor Development Group 必须选择一个官方的测试框架](http://xolv.io/blog-posts/2015/11/8/xkybpw2cdvg6ytncjbh7hmvu5f9jbw)。

**更新**：[Velocity](http://velocity.meteor.com)是[Meteor 从 0.8.1 开始的官方测试解决方案](https://www.meteor.com/blog/2014/07/14/meteor-testing-framework-velocity)。

* * *

目前关于使用 Meteor 进行自动化测试的文章不多。我希望 Meteor 社区能够在正式文档中建立任何内容之前发展测试最佳实践。毕竟，本周 Meteor 达到了 0.5，而且情况仍在迅速变化。

好消息：**您可以将[Node.js 测试工具](https://stackoverflow.com/questions/4706020/bdd-and-tdd-for-node-js)与 Meteor 一起**使用。

[对于我的 Meteor 项目，我使用Mocha](http://visionmedia.github.com/mocha/)运行我的单元测试，使用[Chai](http://chaijs.com/)进行断言。如果您不需要 Chai 的完整功能集，我建议使用[should.js](https://github.com/visionmedia/should.js)代替。目前我只有单元测试，不过你也可以用 Mocha 编写集成测试。

确保[将您的测试放在“tests”文件夹](https://stackoverflow.com/questions/11785917/where-should-unit-tests-be-placed-in-meteor/11819459)中，这样 Meteor 就不会尝试执行您的测试。

Mocha 支持[CoffeeScript](http://coffeescript.org)，这是我为 Meteor 项目选择的脚本语言。这是一个[示例 Cakefile](https://gist.github.com/3927320)，其中包含运行 Mocha 测试的任务。如果您在 Meteor 中使用 JS，请随意调整 Makefile 的命令。

您的 Meteor 模型需要稍作修改才能将自己暴露给 Mocha，这需要了解 Node.js 的工作原理。将每个 Node.js 文件视为在其自己的范围内执行。Meteor 自动将不同文件中的对象相互公开，但普通的 Node 应用程序（如 Mocha）不会这样做。为了使我们的模型可以通过 Mocha 测试，请使用以下 CoffeeScript 模式[导出每个 Meteor 模型：](https://stackoverflow.com/questions/5311334/what-is-the-purpose-of-nodejs-module-exports-and-how-do-you-use-it)

```
# Export our class to Node.js when running
# other modules, e.g. our Mocha tests
#
# Place this at the bottom of our Model.coffee
# file after our Model class has been defined.
exports.Model = Model unless Meteor? 
```

...在你的 Mocha 测试的顶部，导入你想要测试的模型：

```
# Need to use Coffeescript's destructuring to reference
# the object bound in the returned scope
# http://coffeescript.org/#destructuring
{Model} = require '../path/to/model' 
```

有了它，你就可以开始用你的 Meteor 项目编写和运行单元测试了！

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-05-26T13:56:25.393

大家好，结帐[laika](http://arunoda.github.io/laika/) - 全新的流星测试框架 [http://arunoda.github.io/laika/](http://arunoda.github.io/laika/)

您可以同时测试服务器和客户端。

*   在这里查看一些[莱卡示例](http://arunoda.github.io/laika/examples.html)
*   请参阅此处了解[功能](http://arunoda.github.io/laika/features.html)
*   查看laika[背后的概念](http://arunoda.github.io/laika/concepts.html)
*   请参阅[Github 存储库](https://github.com/arunoda/laika)

免责声明：我是莱卡的作者。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-12-27T05:22:28.587

I realize that this question is already answered, but I think this could use some more context, in the form of an additional answer providing said context.

I've been doing some app development with meteor, as well as package development, both by implementing a package for meteor core, as well as for [atmosphere](https://atmosphere.meteor.com/).

It sounds like your question might be actually a question in three parts:

1.  How does one run the entire meteor test suite?
2.  How does one write and run tests for individual [smart packages](http://docs.meteor.com/#smartpackages)?
3.  How does one write and run tests for his own application?

And, it also sounds like there may be a bonus question in there somewhere: 4\. How can one implement continuous integration for 1, 2, and 3?

I have been talking and begun collaborating with [Naomi Seyfer (@sixolet)](https://twitter.com/sixolet) on the meteor [core team](http://www.meteor.com/about/people) to help get definitive answers to all of these questions into the documentation.

I had submitted an initial pull request addressing 1 and 2 to meteor core: [https://github.com/meteor/meteor/pull/573](https://github.com/meteor/meteor/pull/573).

I had also recently answered this question: [How do you run the meteor tests?](https://stackoverflow.com/questions/10760601/how-do-you-run-the-meteor-tests/14035031#14035031)

I think that @Blackcoat has definitively answered 3, above.

As for the bonus, 4, I would suggest using [circleci.com](https://circleci.com/) at least to do continuous integration for your own apps. They currently support the use case that @Blackcoat had described. I have a project in which I've successfully gotten tests written in coffeescript to run unit tests with mocha, pretty much as @Blackcoat had described.

For continuous integration on meteor core, and smart packages, Naomi Seyfer and I are chatting with the founder of circleci to see if we can get something awesome implemented in the near term.

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-18T07:31:32.113

RTD 现在已被弃用并被 Velocity 取代，这是 Meteor 1.0 的官方测试框架。由于 Velocity 正在大力开发，文档仍然相对较新。[您可以在Velocity Github 存储库](https://github.com/meteor-velocity/velocity)、[Velocity 主页](http://velocity.meteor.com)和[The Meteor 测试手册](http://www.meteortesting.com)（付费内容）上找到更多信息

免责声明：我是 Velocity 的核心团队成员之一，也是本书的作者。

* * *

[在rtd.xolv.io](http://rtd.xolv.io)中查看 RTD，这是 Meteor 的完整测试框架。它支持 Jasmine/Mocha/custom 并且适用于纯 JS 和咖啡。它还包括结合了单元/服务器/客户端覆盖率的测试覆盖率。

还有一个示例项目[here](https://github.com/xolvio/real-time-development-with-meteor)

[在这里](http://blog.xolv.io/2013/04/unit-testing-with-meteor.html)解释使用 Meteor 进行单元测试的博客

[在此处](http://blog.xolv.io/2013/04/end-to-end-testing-for-web-apps-meteor.html)使用 Selenium WebdriverJS 和 Meteor 的 e2e 验收测试方法

希望有帮助。免责声明：我是 RTD 的作者。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-12-14T12:48:08.267

关于 tinytest 的使用，你可能想看看那些有用的资源：

1.  此截屏视频解释了基础知识： [https ://www.eventedmind.com/feed/meteor-testing-packages-with-tinytest](https://www.eventedmind.com/feed/meteor-testing-packages-with-tinytest)

2.  一旦你理解了这个想法，你就会想要`tinytest`. `tinytest`目前，唯一的文档位于包源的末尾： [https ://github.com/meteor/meteor/tree/devel/packages/tinytest](https://github.com/meteor/meteor/tree/devel/packages/tinytest)

3.  此外，截屏视频谈到`test-helpers`，您可能想在这里查看所有可用的帮助程序： [https](https://github.com/meteor/meteor/tree/devel/packages/test-helpers) ://github.com/meteor/meteor/tree/devel/packages/test-helpers 每个里面通常都有一些文档文件

4.  挖掘流星包的现有测试将提供很多示例。一种方法是在meteor的源代码的包目录中搜索`Tinytest.`或`test.`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-03-28T16:03:00.630

我经常使用此页面并尝试了所有答案，但从初学者的角度来看，我发现它们很混乱。一旦我遇到任何麻烦，我就对如何解决它们感到困惑。

这个解决方案很容易上手，如果还没有完整的文档，所以我推荐给像我这样想要做 TDD 但不确定 JavaScript 测试如何工作以及哪些库插入什么的人：

[https://github.com/mad-eye/meteor-mocha-web](https://github.com/mad-eye/meteor-mocha-web)

仅供参考，我发现我还需要使用[路由器 Atmosphere 包](https://atmosphere.meteor.com/package/router)来创建一个“/tests”路由来运行并显示测试结果，因为我不希望它每次加载时都会弄乱我的应用程序。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-02-02T15:00:14.620

在即将发布的 1.3 版本中，测试成为 Meteor 的核心部分。最初的解决方案是基于 Mocha 和 Chai。

最小可行设计的原始讨论[可以在这里找到](https://forums.meteor.com/t/meteor-application-testing-a-minimum-viable-design/13599)，第一个实现的细节[可以在这里找到](https://forums.meteor.com/t/a-first-implementation-of-meteor-app-testing-for-1-3/17097)。

MDG 已经制作了测试指南文档的初始框架，[可以在这里找到](https://github.com/meteor/guide/blob/testing-modules-content/content/testing.md)，这里有[一些示例测试](https://github.com/meteor/todos/blob/testing/imports/api/todos/todos.tests.js)。

这是来自上述链接的发布测试示例：

> ```
>  it('sends all todos for a public list when logged in', (done) => {
>     const collector = new PublicationCollector({userId});
>     collector.collect('Todos.inList', publicList._id, (collections) => {
>       chai.assert.equal(collections.Todos.length, 3);
>       done();
>     });
>   }); 
> ```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-01-27T03:52:29.480

我正在浏览器中使用 Meteor + Mocha进行*功能/集成测试。*我有以下内容（在咖啡脚本中以提高可读性）：

在客户端...

```
Meteor.startup ->
    Meteor.call 'shouldTest', (err, shouldTest) ->
        if err? then throw err
        if shouldTest then runTests()

# Dynamically load and run mocha. I factored this out in a separate method so
# that I can (re-)run the tests from the console whenever I like.
# NB: This assumes that you have your mocha/chai scripts in .../public/mocha.
# You can point to a CDN, too.
runTests = ->
    $('head').append('<link href="/mocha/mocha.css" rel="stylesheet" />')
    $.getScript '/mocha/mocha.js', ->
      $.getScript '/mocha/chai.js', ->
        $('body').append('<div id="mocha"> </div>')
        chai.should() # ... or assert or explain ...
        mocha.setup 'bdd'
        loadSpecs() # This function contains your actual describe(), etc. calls.
        mocha.run() 
```

...在服务器上：

```
Meteor.methods 'shouldTest': -> true unless Meteor.settings.noTests  # ... or whatever. 
```

当然，您可以以相同的方式进行客户端*单元*测试。不过，对于集成测试来说，拥有所有 Meteor 基础设施是很好的。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-11-14T10:11:55.807

正如 Blackcout 所说，Velocity[是 Meteor 的官方 TDD 框架](http://info.meteor.com/blog/meteor-testing-framework-velocity)。但是目前velocity的网页没有提供好的文档。所以我推荐你看：

*   [速度背后的概念](https://youtu.be/eqzJ6KAjlUI?t=504)
*   [分步教程](https://doctorllama.wordpress.com/2014/09/22/bullet-proof-internationalised-meteor-applications-with-velocity-unit-testing-integration-testing-and-jasmine/)
*   特别是[官方示例](https://github.com/meteor-velocity/velocity-examples)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-05-25T00:51:38.520

另一个选项，从 0.6.0 开始很容易使用，是在本地智能包之外运行整个应用程序，在包之外使用最少的代码来启动应用程序（可能调用一个特定的智能包，它是你的基础应用程序）。

然后，您可以利用 Meteor 的 Tinytest，它非常适合测试 Meteor 应用程序。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-11-23T09:58:16.820

**流星+实习生**

不知何故，我设法用 TheIntern.js 测试了 Meteor 应用程序。

**虽然这是根据我的需要。**但我仍然认为它可能会引导某人走向正确的方向，我正在分享我为解决这个问题所做的工作。

有一个`execute`函数允许我们运行 JS 代码，我们可以访问浏览器`window`对象，因此`Meteor`也可以。

想了解更多关于[执行](https://theintern.github.io/leadfoot/Session.html#execute)

这就是我`test suite`寻找**功能测试的方式**

```
define(function (require) {
    var registerSuite = require('intern!object');
    var assert = require('intern/chai!assert');
    registerSuite({
        name: 'index',

        'greeting form': function () {
            var rem = this.remote;
            return this.remote
                .get(require.toUrl('localhost:3000'))
                .setFindTimeout(5000)
                .execute(function() {
                        console.log("browser window object", window)
                        return Products.find({}).fetch().length
                    })
                .then(function (text) {
                    console.log(text)
                    assert.strictEqual(text, 2,
                        'Yes I can access Meteor and its Collections');
                });
        }
    });
}); 
```

**要了解更多，这是我的[要点](https://gist.github.com/harpreetkhalsagtbit/55022792c1b6ab4367c4)**

注意：我仍处于此解决方案的早期阶段。我不知道我是否可以用这个进行复杂的测试。但我对此非常有信心。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-08-14T05:56:46.517

我已经成功地使用 xolvio:cucumber 和 velocity 来做我的测试。工作得非常好并且连续运行，所以你总是可以看到你的测试正在通过。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-12-10T21:03:14.573

速度还不成熟。我面临使用速度的 setTimeout 问题。对于服务器端单元测试，您可以使用[这个包](https://github.com/imran-aspire/meteor-server-unit-test)。

它比速度更快。当我通过登录测试任何规范时，Velocity 需要大量时间。使用 Jasmine 代码，我们可以测试任何服务器端方法和发布。

# google-maps - 如何在 iOS 6 中在新的 Apple 地图上获取路线？

> ID：12987528
> 
> 赞同：1
> 
> 时间：2012-10-20T10:30:48.697
> 
> 标签：google-maps, navigation, ios6, mapkit

我有一个为 iOS < 6 构建的应用程序，在此之前所有功能都可以完美运行。现在我使用了一个开关来识别设备上安装的 iOS，然后我的应用程序打开正确的地图以获取从本地位置到另一个位置的方向（地图上的一些引脚）。问题是在 iOS 6 之前，应用程序会打开原生地图并向用户显示路线。现在，如果设备使用 iOS 6，该应用程序会打开 Apple 地图，但会显示一个弹出窗口，其中包含“无法在这 2 个位置之间获取方向”之类的内容。为什么？有人可以帮我解决这个问题吗？

在这里，我如何将坐标从显示按钮传递给地图：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control {

    [self.navigationController pushViewController:[[UIViewController alloc] init] animated:YES];

    if (SYSTEM_VERSION_LESS_THAN(@"6.0")) {
         NSString* addr = [NSString stringWithFormat:@"http://maps.google.com/maps?daddr=%1.6f,%1.6f&saddr=Posizione attuale", view.annotation.coordinate.latitude,view.annotation.coordinate.longitude];
         NSURL* url = [[NSURL alloc] initWithString:[addr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
         [[UIApplication sharedApplication] openURL:url];
    }

    else {
        NSString* addr = [NSString stringWithFormat:@"http://maps.apple.com/maps?daddr=%1.6f,%1.6f&saddr=Posizione attuale", view.annotation.coordinate.latitude,view.annotation.coordinate.longitude];
        NSURL* url = [[NSURL alloc] initWithString:[addr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
        [[UIApplication sharedApplication] openURL:url];

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T22:06:43.163

虽然您可以对地图 ( ) 使用 URL 方法`http://maps.apple.com/...`，但我发现它在呈现特定位置时并不是很好。您最好的选择是在 iOS 6 及更高版本上使用 MapKit 对象。

例子：

```
CLLocationCoordinate2D location;
location.latitude = ...;
location.longtitude = ...;

MKPlacemark* placemark = [[MKPlacemark alloc] initWithCoordinate:location addressDictionary:nil];

MKMapItem* item = [[MKMapItem alloc] initWithPlacemark:placemark];
//... Any Item customizations

NSDictionary* mapLaunchOptions = ...;
[item openInMapsWithLaunchOptions:mapLaunchOptions]; 
```

这将使用您提供的项目直接打开 Apple 地图。

为了处理方向，使用`MKLaunchOptionsDirectionsModeKey`启动选项，并通过以下方式提供开始和结束地图项：

```
[MKMapItem openMapsWithItems:mapItems launchOptions:launchOptions]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T04:33:33.870

只是为了澄清另一个答案，在指示时您有两种选择：开车或步行。以下是每一种方法：

```
MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:CLLocationCoordinate2DMake(coordinate.latitude,coordinate.longitude) addressDictionary:nil];
MKMapItem *destination = [[MKMapItem alloc] initWithPlacemark:placemark];

//This is for driving
[MKMapItem openMapsWithItems:@[destination] launchOptions:@{MKLaunchOptionsDirectionsModeKey: MKLaunchOptionsDirectionsModeDriving}];

//This is for walking
[MKMapItem openMapsWithItems:@[destination] launchOptions:@{MKLaunchOptionsDirectionsModeKey: MKLaunchOptionsDirectionsModeWalking}]; 
```

[来自Apple 文档的](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html)更多信息在这里。

# drupal - 将 HTML 模板转换为 Drupal 7

> ID：12987529
> 
> 赞同：5
> 
> 时间：2012-10-20T10:31:00.770
> 
> 标签：drupal, drupal-7, drupal-theming, drupal-themes

我有一个 HTML 主题。如何将我们的 HTML 模板转换为 Drupal 7 主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:35:34.090

您可以从以下视频教程开始：

*   [第1部分](http://www.youtube.com/watch?v=h_Fk5d8ovYg)
*   [第2部分](http://www.youtube.com/watch?v=vr15GTUo0IU)
*   [第 3 部分](http://www.youtube.com/watch?v=siWbRB4iCVg)
*   [第 4 部分](http://www.youtube.com/watch?v=zLBXY2Ig4go)

希望这能让你走上正轨……穆罕默德。

# php - 使用 API 在附加链接中创建新租户

> ID：12987530
> 
> 赞同：2
> 
> 时间：2012-10-20T10:31:00.987
> 
> 标签：php, api

```
<?php

define( 'SITELINK_URL', "https://www.smdservers.net/CCWs_3.5/CallCenterWs.asmx?WSDL");
define( 'SITELINK_CORP_CODE', "CCTST" );
define( 'SITELINK_LOC_CODE', "Demo" );
define( 'SITELINK_CORP_LOGIN', "Administrator" );
define( 'SITELINK_CORP_PASS', "Demo" );

$client = new SoapClient( SITELINK_URL );
$params = new stdClass; // as stdClass
$params = array("sCorpCode" => SITELINK_CORP_CODE,"sLocationCode" =>SITELINK_LOC_CODE,"sCorpUserName" => SITELINK_CORP_LOGIN,"sCorpPassword" => SITELINK_CORP_PASS,"First_name" => "Rahul","Last_name" => "Singh");

try
{
$tenant = $client->TenantNew($params);
$tenantResult = $tenant->TenantNewResult->any;
}
catch (Exception $e )
{
    die( 'Error: '.$e->getMessage().'<br>'.$e );
}
  echo htmlentities($tenantResult);

?> 
```

尝试使用上述代码创建一个新租户，但它返回 (-99)，这是一个一般异常。我在上面的代码中做错了什么。同样在成功时，我需要使用 ReservationNew 方法进行预订。请帮助解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T15:48:09.493

这是“有效”的代码*。我查看了 WSDL 文件以查看它们用于各种参数的名称，并将“first_name”和“last_name”更改为“sTenantFirstName”和“sTenantLastName”

*通过“工作”我的意思是它给出了看起来更有意义的响应，而不仅仅是一个错误代码

参考：[https ://www.smdservers.net/CCWs_3.5/CallCenterWs.asmx?WSDL](https://www.smdservers.net/CCWs_3.5/CallCenterWs.asmx?WSDL)

```
<?php

define( 'SITELINK_URL', "https://www.smdservers.net/CCWs_3.5/CallCenterWs.asmx?WSDL"); 
define( 'SITELINK_CORP_CODE', "CCTST" );
define( 'SITELINK_LOC_CODE', "Demo" );
define( 'SITELINK_CORP_LOGIN', "Administrator" );
define( 'SITELINK_CORP_PASS', "Demo" );

$client = new SoapClient( SITELINK_URL );
$params->sCorpCode = SITELINK_CORP_CODE;
$params->sLocationCode = SITELINK_LOC_CODE;
$params->sCorpUserName = SITELINK_CORP_LOGIN;
$params->sCorpPassword = SITELINK_CORP_PASS;
$params->sTenantFirstName = "Rahul";
$params->sTenantLastName = "Singh";

try
{
    $tenant = $client->TenantNew( $params );
    $tenantResult = $tenant->TenantNewResult->any;
}
catch (Exception $e ) {
    die( 'Error: '.$e->getMessage().'<br>'.$e ); 
}

echo htmlentities($tenantResult);  

?> 
```

# ios6 - 如何制作适用于 iphone 5 和 4s 的应用程序

> ID：12987538
> 
> 赞同：2
> 
> 时间：2012-10-20T10:32:52.530
> 
> 标签：ios6, xcode4.5, iphone-5

我正在 使用最新的 Xcode 即**Xcode 4.5.1制作一个****iphone 应用程序。** 当前的 XIB 文件适用于**iphone 5**。我不确定如何制作适用于两种屏幕尺寸（即**3.5 和 4 英寸**）的应用程序？

 ******是不是我也使用**了两组不同**的***XIB** *s？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:32:03.143

看看这个[答案](https://stackoverflow.com/a/12537190)，这是我采取的方法。

基本上，创建两个不同的 xib 或故事板，然后选择在应用程序启动时使用哪一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:42:51.740

2 个不同的 xib 是一种解决方案，但如果您不想创建不同的 xib，则需要使用 View 的 AutoResizing 属性。您还需要为 iPhone4 使用 Default@2x.png，为 iPhone5 使用 Default-568@2x.png，这些是用于识别应用程序是在 iPhone4 还是 iPhone4 上运行的 SplashScreen 图像。

如果您创建了与 iPhone4 兼容的应用程序，则只需添加 Default-568@2x.png 图像。您的应用程序将适用于 iPhone5。但是您需要为此处理 UI。例如，如果您使用的是 UITableView，那么只需使用灵活高度而不是硬核框架。******

# version-control - 将更改从基础存储库合并到 fork

> ID：12987540
> 
> 赞同：0
> 
> 时间：2012-10-20T10:32:59.787
> 
> 标签：version-control, mercurial, merge, tortoisehg

假设我们有一个基础存储库 R 和一个 fork F。编码人员仍在对 R 进行更改，并且 F 需要在添加这些更改时包含这些更改。

我如何告诉 hg 用 R 中的最新更改更新 F 而不会丢失我在 F 上所做的工作？

使用 diff 工具是一项非常耗时的任务，它无助于我前进。

我正在使用 TortoiseHG。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:56:00.940

你知道`merge`吗？如果您是并且您的问题是合并冲突，那么您的差异工具就是您需要继续进行的方式。

这样做的方法，假设您在 F 本地工作并且 F 的尖端是您当前的工作目录：

*   ... 提交所有工作在 F ...
*   从 R 中提取新的变更集
*   右键单击R中工作的尖端并选择“与本地合并”
*   填写你的提交信息“merge in xyz from R”
*   ...在F做更多的工作...

就是这样。如果 R 和 F 中的更改不重叠，您应该完成并准备继续。如果在 R 和 F 中工作都修改了相同文件的相同部分，则需要使用 diff 工具来解决这些合并冲突。

# c++ - app.config 视觉工作室创建

> ID：12987542
> 
> 赞同：2
> 
> 时间：2012-10-20T10:33:31.930
> 
> 标签：c++, .net, visual-studio-2010, app-config

一个简单的问题，我可能只是忽略了显而易见的问题。

我正在尝试使用 Visual Studio 2010 Express 在 C++ (.NET) 中使用 ApplicationSettings（我也使用 2008 pro）

但是我对此无能为力 - 如果我尝试使用表单设计器添加设置，我会得到“项目中不存在设置文件。添加设置文件并重试”。如何添加设置文件 (app.config)？任何“添加”部分都没有选项。我尝试从 VS（创建新文件并保存）和资源管理器中手动添加文件。

在我破解并编写一些代码来读取 XML 配置文件之前——请有人解释设置和使用 app.config 的正确方法——例如，保存主窗体的位置和大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:46:27.180

这是一个托管的 C++ 项目吗？

设置文件基于 .Net`ApplicationSettingsBase`和`ConfigurationManager`类，因此除非您使用 .Net，否则您将无法轻松使用它们。

编辑：我刚刚创建了一个托管 C++ 项目，你是对的，没有添加设置文件的选项。

在 C# 项目中，这会生成一个派生自 的静态类`ApplicationSettingsBase`，Visual Studio 会从基于 GUI 的配置屏幕自动更新该类。我只能假设不支持自动生成托管 C++ 类。对不起。

# c#-4.0 - 在按钮单击时在 GridView winform 中添加新行

> ID：12987543
> 
> 赞同：0
> 
> 时间：2012-10-20T10:33:35.887
> 
> 标签：c#-4.0

在按钮单击时在 GridView winform 中添加新行。需要在网格中有单个按钮而不是 DataGridViewButtonColumn

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:42:09.597

您可以使用添加它

GridView1.DataSource = 数据表；

然后通过这个添加新行

数据表.Rows.Add();

这将添加新行并将控件 ID 提供给 add()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:35:49.437

```
use this 

public partial class Form1 : Form
    {
        Button textBoxDgv1 = new Button();
        Label labelDgv1 = new Label();
the next is on the Form_Load event

private void Form1_Load(object sender, EventArgs e)
        {
            labelDgv1.Text = "Delete";
            labelDgv1.Height = 20;
            labelDgv1.AutoSize = false;
            labelDgv1.BorderStyle = BorderStyle.FixedSingle;
            labelDgv1.TextAlign = ContentAlignment.MiddleCenter;
            int Xdgv1 = this.dataGridView1.GetCellDisplayRectangle(2, -1, true).Location.X;
            labelDgv1.Width = this.dataGridView1.Columns[2].Width + Xdgv1;
            labelDgv1.Location = new Point(0, this.dataGridView1.Height - textBoxDgv1.Height);
            this.dataGridView1.Controls.Add(labelDgv1);

and one more section is in dataGridView1_CellPainting

private void dataGridView1_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
{
       int sum = 0;
       for (int i = 0; i < this.dataGridView1.Rows.Count; i++)
       {
           if (dataGridView1.Rows[i].Cells[3].Value != string.Empty)
           {
               sum += Convert.ToInt32(this.dataGridView1[3, i].Value);
           }
       }
           textBoxDgv1.Text = sum.ToString();
           int Xdgvx = this.dataGridView1.GetCellDisplayRectangle(2, -1, true).Location.X;
           labelDgv1.Width = this.dataGridView1.Columns[2].Width + Xdgvx;
           labelDgv1.Location = new Point(0, this.dataGridView1.Height - textBoxDgv1.Height);
           textBoxDgv1.Width = this.dataGridView1.Columns[3].Width;
           Xdgvx = this.dataGridView1.GetCellDisplayRectangle(3, -1, true).Location.X;
           textBoxDgv1.Location = new Point(Xdgvx, this.dataGridView1.Height - textBoxDgv1.Height);
} 
```

# mysql - 用于 MySQL 和可扩展性的 Spider

> ID：12987546
> 
> 赞同：3
> 
> 时间：2012-10-20T10:33:53.697
> 
> 标签：mysql, scalability

我很想知道是否有人在使用 Spider for MySQL 引擎来扩展 MySQL。我需要能够将我的数据库扩展到超过 Amazon RDS 的 1TB 限制，Spider 似乎是一个很好的解决方案，允许您查询“集群”中的服务器，就好像它是一个大数据库一样。

没有任何深入的文档和讨论这项技术，我想知道它有多好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T01:06:54.103

Spider for MySQL 没有文档，代码也没有测试套件。它似乎是由一个开发人员开发的。

该项目自 2012 年 2 月（撰写本文时 9 个月前）以来没有任何版本，其最后一个版本是 MySQL 5.5.14 的 2.28 版本（当前版本是 MySQL 5.5.28）。Launchpad 显示自 2011 年 5 月（18 个月前）以来没有代码提交。

这让我想知道 2.28 的最终更改是否从未真正提交给源代码控制。这让我怀疑软件质量。

虽然 Spider for MySQL 是一个勇敢的概念证明，但我认为它是一个废弃的实验。
鉴于以上所有情况，我不建议将其用于生产用途。

至于您的缩放问题，我认为您有以下选择：

*   调整您的应用程序架构以支持多个数据库实例。
*   减少您的数据，使其适合 1TB。

    *   归档较少使用的数据和索引。
    *   选择更节省空间的数据类型。
    *   压缩庞大的 BLOB 和 TEXT 数据。
*   离开 Amazon RDS，例如转移到 Amazon EC2，这样您就可以管理自己的存储。

# jquery - jquery each() 函数的正确用法

> ID：12987551
> 
> 赞同：0
> 
> 时间：2012-10-20T10:35:28.140
> 
> 标签：jquery, html

我正在尝试使用 jquery`each()`函数，但我认为有问题。
这是html和jquery代码。

```
<div class="tribute">
<div class="image"></div>
<div class="links"></div>
</div>

<div class="tribute odd">
<div class="image"></div>
<div class="links"></div>
</div>

<div class="tribute">
<div class="image"></div>
<div class="links"></div>
</div>

<div class="tribute odd">
<div class="image"></div>
<div class="links"></div>
</div>

<div class="tribute">
<div class="image"></div>
<div class="links"></div>
</div>

<div class="tribute odd">
<div class="image"></div>
<div class="links"></div>
</div> 
```

和jquery函数

```
 jQuery('.odd').each(function(index, value){

     var oddLinks = jQuery('.odd').find('.links').detach();
     jQuery('.odd .image').before(oddLinks);

    }); 
```

这段代码不适合我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T10:40:13.293

`.odd`迭代时尝试使用当前的上下文：

```
jQuery('.odd').each(function(index, value) {
    var oddLinks = jQuery(this).find('.links').detach();
    jQuery('.image', this).before(oddLinks);
}); 
```

`.odd`选择`.odd`页面上的所有元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:40:43.330

你的意思是改变`.odd`div中图像和链接的位置吗？如果是这样，你甚至不需要分离它。

***[观看现场演示。](http://jsfiddle.net/kbQVP/)***

```
$('.odd').each(function() {
  $(this).find('.image').before($(this).find('.links'));
}); 
```

# configuration-files - 如何使用 FinalBuilder 更新 .properties 文件？

> ID：12987556
> 
> 赞同：0
> 
> 时间：2012-10-20T10:35:40.020
> 
> 标签：configuration-files, finalbuilder

有一个 .properties 文件包含许多名称-值对，用“=”分隔。FinalBuilder 中是否有任何标准方法来更新某些属性的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:19:11.963

可以使用“文本查找/替换”操作及其通配符功能。只需更换：

```
 <propertyname>=* 
```

和

```
 <propertyname>=<YourDesiredProperty> 
```

# java - Java Swing：使用相应的键盘按钮时显示按下的按钮

> ID：12987557
> 
> 赞同：5
> 
> 时间：2012-10-20T10:35:46.620
> 
> 标签：java, swing, button, actionlistener, key-bindings

我正在用 Java 编写一个程序，使用 Swing，带有一个包含箭头键的 GUI。方向键对应键盘上的方向键。

当我按下键盘上的向上箭头键时，我希望 GUI 上的向上箭头键显示为被按下。在我释放箭头键之前，它应该显示它仍然被按下，并且在释放时它也应该释放。

到目前为止我的代码片段（仅适用于“向上”按钮），我认为这在被按下的节目类别中是完全错误的：

```
...
if (e.getKeyCode() == KeyEvent.VK_UP) {
                    actionArrowUp();
                    JButton buttonUp = (JButton) mainTab.getComponent(4);
                    buttonUp.setSelected(true);
                }
...
@Override
public void keyReleased(KeyEvent e) { 
            if (e.getKeyCode() == KeyEvent.VK_UP)
                actionArrowUpRelease();
                buttonUp.setSelected(true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T12:58:47.710

这[`LinePanel`](https://stackoverflow.com/a/5797965/230513)使用[*Key Bindings*](http://download.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)并调用`doClick()`in`actionPerformed()`来实现类似于您描述的效果。

附录：由于您希望按钮在按下键*时*显示为按下状态，您可以使用可选`onKeyReleased`参数`KeyStroke.getKeyStroke()`. 如 中所述`ButtonModel`，您需要使模型同时启用并按下以模拟鼠标按下按钮。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T14:26:51.733

使用 keyBindings （正如@trashgod 已经提到的）是要走*的路。*获得与通过空格/输入激活按钮完全相同的视觉行为（当它被聚焦时）

*   实现委托给为按下/释放按钮注册的默认操作的操作
*   需要绑定到按键的按下和释放来模拟
*   在 WHEN_ANCESTOR 类型的 inputMap 中安装到按钮父级的绑定

在代码中：

```
// the delegating  action
public static class SimulateButtonAction extends AbstractAction {

    AbstractButton button;

    public SimulateButtonAction(AbstractButton model, String fire) {
        super(fire);
        this.button = model;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        Action delegate = button.getActionMap().get(getName());
        delegate.actionPerformed(new ActionEvent(button, 
                ActionEvent.ACTION_PERFORMED, getName()));
    }

    public String getName() {
        return (String) getValue(Action.NAME);
    }

}

// example usage
JComponent content = new JPanel(new GridLayout(0, 5));
Action log = new AbstractAction() {

    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println("triggered: " + ((AbstractButton) e.getSource()).getText());
    }

};
String pressed = "pressed";
String released = "released";
ActionMap actionMap = content.getActionMap();
InputMap inputMap = content.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
String[] arrows = {"UP", "DOWN", "LEFT", "RIGHT"};
for (int i = 0; i < arrows.length; i++) {
    JButton button = new JButton(log);
    button.setAction(log);
    button.setText(arrows[i]);
    content.add(button);
    // simulate pressed
    String pressedKey = pressed + arrows[i];
    inputMap.put(KeyStroke.getKeyStroke(arrows[i]), pressedKey);
    actionMap.put(pressedKey, new SimulateButtonAction(button, pressed));
    String releasedKey = released + arrows[i];
    inputMap.put(KeyStroke.getKeyStroke(released + " " +arrows[i]), releasedKey);
    actionMap.put(releasedKey, new SimulateButtonAction(button, released));
} 
```

# java - 单例是否意味着哈希码总是返回相同的？

> ID：12987558
> 
> 赞同：2
> 
> 时间：2012-10-20T10:35:54.740
> 
> 标签：java, equals, hashcode

我有两个对象，来自同一类的 o1 和 o2。

如果`o1.hashcode() == o2.hashcode()`，我可以告诉它们是同一个对象吗？

另外`o1==o2`，有没有其他方法可以告诉单例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T10:38:12.730

如果您有该类的单个实例，则`==`和`equals`比较将始终返回`true`。

但是，`hashcode`对于不同的对象， 可以相等，因此仅通过具有相等的哈希码并不能保证相等。

[这](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)是对`hashcode`和`equals`合同的一个很好的解释。

检查相等性并不足以确保您有一个单例，只有实例被认为是相等的。

如果你想拥有一个 java 类的单个实例，最好使用静态成员和方法。

[在这里](https://stackoverflow.com/questions/70689/what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java)，演示了几种处理单例的方法。

编辑：正如 emory 所指出的 - 实际上，您可以覆盖`equals`以返回随机的东西，从而违反所需的反身性（`x.equals(x) == true`）。由于您无法在 java 中覆盖运算符，`==` 因此这是确定相同对象的唯一可靠方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T10:44:52.140

不，不同的对象可以有相同的`hashCode()`：

```
"hypoplankton".hashCode()
"unheavenly"  .hashCode() 
```

两者都返回相同的`427589249`哈希值，但它们显然不相等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T10:51:24.577

您的问题（来自标题）似乎是“将`hashCode()`始终为同一个对象返回相同的值”......答案是**否定**的。

实现可以自由地返回任何东西，尽管为了表现良好，它*应该*为同一个对象返回相同的值。例如，这是一个有效但很差的实现：

```
@Override
public int hashCode() {
    return (int) (Math.random() * Integer.MAX_VALUE);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-07T16:11:32.690

**hashCode**的一般合同如下所述（*Effective Java，第 92 页*）。第 3 项表示在不相等的对象上调用 hashCode() 结果不需要唯一。

1.  在同一个程序中，hashCode() 的结果不能改变
2.  如果使用两个对象调用 equals() 返回 true，则对这些对象中的每一个调用 hashCode() 必须返回相同的结果
3.  如果使用两个对象调用 equals() 返回 false，则对这些对象中的每一个调用 hashCode() 不必返回不同的结果

# c# - 如何在没有数据库的情况下生成水晶报表，仅用于显示用户在 c# 表单应用程序中填写的表单数据

> ID：12987565
> 
> 赞同：3
> 
> 时间：2012-10-20T10:36:51.510
> 
> 标签：c#

我想在不使用任何数据库的情况下创建一个水晶报表我只想显示用户输入的文本。见下图::![在此处输入图像描述](../Images/4c39050e863a63d8e008491cf532b1ab.png)

我是 C# 表单应用程序的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:31:30.497

假设你是 C#；在设计模式下在水晶报表中创建所需的文本对象（如果没有水晶许可证，您不能动态添加它）。如果您的 WinForm 中有四个值，并且您希望将这些值发布到 Crystal Report 中；您将需要创建四个 TextObject。完成此操作后，只需在按钮单击事件中键入此代码：

```
/*Initialize the Report Object*/
ReportDocument cryRpt = new ReportDocument();
/*Load the designed report*/
cryRpt.Load(Application.StartupPath + "\\MyReport.rpt");

/*initialize required TextObjects*/
/*SYNTAX :
TextObject objectName = (TextObject)cryRpt.ReportDefinition.Sections["name of report section"].ReportObjects["Name of textobject"];

*/
TextObject txt1 = (TextObject)cryRpt.ReportDefinition.Sections["Section1"].ReportObjects["TextObject1"];

TextObject txt2 = (TextObject)cryRpt.ReportDefinition.Sections["Section1"].ReportObjects["TextObject2"];

/*Pass the text value from WinForm TextBox to Crystal Report TextObject*/
txt1.Text = textbox1.Text;
txt2.Text = textbox2.Text;

/*Create a Form and display the crystal report*/
Form frm = new Form();
frm.Height = 800;
frm.Width = 600;

CrystalDecisions.Windows.Forms.CrystalReportViewer crystalReportViewer1 = new CrystalDecisions.Windows.Forms.CrystalReportViewer();
crystalReportViewer1.Dock = System.Windows.Forms.DockStyle.Fill;

crystalReportViewer1.ReportSource = cryRpt;
crystalReportViewer1.Refresh();

frm.Controls.Add(crystalReportViewer1);
frm.ShowDialog(); 
```

* * *

就是这样 :) /* 快乐编码 :) */

# java - Java用数字初始化数组

> ID：12987566
> 
> 赞同：2
> 
> 时间：2012-10-20T10:36:59.263
> 
> 标签：java

> 6、9
> 
> 2、5
> 
> 4、6

如何在二维数组中初始化这些数字？

这是我的答案，但有输出。

```
int[][] num = new int [3][2];

    num[0][0] = 6;
    num[0][1] = 9;
    num[1][0] = 2;
    num[1][1] = 5;
    num[2][0] = 4;
    num[2][1] = 6;

System.out.println(num); 
```

> [[我@70f87478（输出）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T10:41:25.507

除了您调用`toString`数组并期望得到有用的东西之外，该输出没有任何问题。如果你[`Arrays.deepToString()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#deepToString%28java.lang.Object%5B%5D%29)改用，你会得到一个更明智的结果。（您通常只需要`Arrays.toString()`，但您需要“深度”版本，因为它是一个数组数组。）

此外，您可以更紧凑地初始化数组。将两者结合起来：

```
import java.util.Arrays;

public class Test {

    public static void main(String[] args) {
        int[][] num = { { 6, 9 }, { 2, 5 }, { 4, 6 } };
        System.out.println(Arrays.deepToString(num));
    }
} 
```

输出：

```
[[6, 9], [2, 5], [4, 6]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:40:58.130

```
int[][] num = {{6,9},{2,5},{4,6}}
System.out.println(Arrays.deepToString(num)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T10:42:31.707

类似的逻辑`deepToString`

```
 int [][] test = new int[1][1];
        StringBuilder builder  = new StringBuilder();
        for (int[] ints : test) {
           builder.append(Arrays.toString(ints)); 
        }
        System.out.println(builder.toString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T10:42:43.213

当你这样做

```
System.out.println(num); 
```

您将打印对象的默认“toString”方法，该方法打印对象的引用。要打印内容，您可以使用 2 个嵌套的 for 循环或一个 for-each 循环。

# facebook - 在左侧渲染 Facebook 之类的弹出窗口

> ID：12987567
> 
> 赞同：5
> 
> 时间：2012-10-20T10:37:02.870
> 
> 标签：facebook, facebook-javascript-sdk, facebook-like

我的页面右下角有我的“喜欢”按钮。当用户单击它时，它会部分离开屏幕。我可以将弹出窗口渲染到按钮的左侧和上方吗？在文档中找不到它，也没有明显的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T08:43:52.757

Facebook 将弹出按钮移到了点赞按钮中`<iframe>`，因此不幸的是，您不能再使用 CSS 对其进行样式设置。

# javascript - IE 中的骨干路由 - 去掉 # 符号？

> ID：12987568
> 
> 赞同：0
> 
> 时间：2012-10-20T10:37:06.023
> 
> 标签：javascript, internet-explorer, backbone.js, pushstate, backbone-routing

使用 Backbone 路由时，有什么方法可以阻止`#`出现在地址栏中，pushState 与否？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:37:02.217

@Kay，您的 Babckbone 应用程序应该在所有主流浏览器中都能正常工作，并且 IE8-9 仍然被广泛使用（是的，不幸的是，甚至 IE6-7）。使用哈希和 no`pushState`更可靠，许多大型应用程序都使用它们（例如 Facebook）。问题是，如果您在链接中使用硬编码的路由，并且它们不是散列，那么如果 pushState 在浏览器中不起作用，您就会被搞砸。因此，您要么必须使用 pushState 并在应该由路由器拾取的链接中使用普通路径名，要么不要使用 pushState 并使用散列。后者更优选IMO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:40:37.460

当前版本的 IE 不支持`pushState`. （它出现在 IE10 预览中）。

您的选择是下拉到普通（非 Ajax）链接/表单提交/等，或者使用 hashbang hack。

我对骨干网的了解还不足以肯定地说，但以下内容可能足以回退到正常路由：

```
if (window.history && window.history.pushState) {
    Backbone.history.start({pushState: true});
} 
```

# php - 如何在文件夹系统中获取我的网站 url？

> ID：12987569
> 
> 赞同：-3
> 
> 时间：2012-10-20T10:37:11.673
> 
> 标签：php

> **可能重复：**
> [使用 .htaccess 删除 .php 扩展名](https://stackoverflow.com/questions/4026021/remove-php-extension-with-htaccess)

现在我的网站网址是这样的：

```
www.viaviweb.com/about_us.php 
```

我希望它看起来像这样：

```
www.viaviweb.com/aboutus 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T10:44:20.693

您必须使用`RewriteRule`重写引擎启用来执行此操作。创建一个名为的空文件`.htaccess`并将其放在您网站的基本文件夹中，然后将其输入到文件中：

```
Options +FollowSymlinks
RewriteEngine On

RewriteRule ^aboutus$    about_us.php [L] 
```

确保`mod_rewrite`在您的 Apache 服务器中启用该模块以使其正常工作。在此处阅读有关在 Apache 中重写的更多信息：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:33:08.587

您必须在 .htaccess 中创建一些规则，在您的主文件夹中，您有一个名为 . **htaccess**（如果它不可用，您必须创建一个）并放置这些规则。

```
RewriteCond %{HTTP_HOST} ^www\.domain\.com
RewriteCond %{THE_REQUEST} ^GET\ (.*)\.php\ HTTP
RewriteRule (.*)\.php$ $1 [R=301] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T10:43:20.127

[如何使用 URL 重写 / mod_rewrite 删除 .php 扩展名](http://olimpsys.com/blog/how-to-remove-php-extension-using-url-rewriting-mod_rewrite/)

我希望这可能对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T10:44:13.637

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^\.]+)$ $1.php [NC,L] 
RewriteRule about_us.php(.*)$ aboutus?$1 [L,QSA] 
```

# c++ - 两个向量的并集

> ID：12987574
> 
> 赞同：3
> 
> 时间：2012-10-20T10:38:06.927
> 
> 标签：c++, vector

我有包含数字 1,7,9,9,3,13,3 的向量 A 我有包含数字 9,11,7,7,3,2,1 的向量 B

我需要获取向量 C，它将包含下面两个向量中的每个元素，但每个元素只有一次（例如向量 A 中的数字 9 不应重复），因此 C 应包含 1、7、9、3、13、11、2

此代码将生成向量 C，它将是两个向量的并集，但会有一些重复的数字（如果一个向量包含 3x 数字 1，则 C 也包含 3x 数字 1）

```
vector<int>union(vector<int>A,vector<int>B)
{ 
    sort(A.begin(),A.end());
    sort(B.begin(),B.end());
    vector<int> C(A.size()*2);            //vector A has same size as vector B

    vector<int>::iterator it= set_union(A.begin(),A.end(),B.begin(),B.end(),C.begin());
    C.resize(it-C.begin());
    return C;
} 
```

它必须尽可能快地工作。这样做的最好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:44:42.360

这个问题的正确解决方案是先对每个向量进行排序，然后以类似于`sink`排序的方式进行交集/并集/过滤。

# ios - iOS 方向跨多个视图更改

> ID：12987579
> 
> 赞同：0
> 
> 时间：2012-10-20T10:38:49.090
> 
> 标签：ios

我正在使用带有故事板的 iOS 5.1 SDK 编写一个 iOS 标签栏应用程序，用于我的 UI 设计。我的要求是每当应用程序旋转到横向模式时，我都需要显示一个日历。我已经弄清楚了日历部分，但我不确定如何以适用于整个应用程序的方式实施解决方案。基本上，我要避免的是在每个视图的基础上处理方向变化。不管我在哪个视图中，如果我旋转到横向，我需要显示这个日历视图，当然当我切换回纵向模式时，我会回到我的原始视图。

任何人的任何线索或想法都会很有用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:18:41.423

当您的方向变为横向时，您需要`subclass`全部添加日历视图`viewcontrollers`并添加当前视图。`subview`

您还可以将日历类设置为`singleton`使用相同实例访问项目中的任何位置。

# c++ - 这里有一个错误：“字符串下标超出范围”

> ID：12987581
> 
> 赞同：0
> 
> 时间：2012-10-20T10:39:05.180
> 
> 标签：c++, visual-c++

这段代码通过加法运算添加两个整数，包括进位过程，我在这里遇到错误，但我不知道这里到底是什么！该程序的目的是使c ++采用“大于int大小”的大数字并进行加法过程..我真的需要帮助！谢谢 ！

```
#include "stdafx.h"
#include <iostream>
#include <string>
#include <math.h>
using namespace std;

class BigDecimalInt
{
    protected:
    int num1;
    public:
    string s1;

    string getstring()
    {
        return s1;
    }
    void setstring(string s2)
    {
        s1=s2;
    }
    BigDecimalInt (string decStr){s1=decStr;}
    BigDecimalInt (int decInt); // Initialize from integer
    BigDecimalInt operator+ ();
    BigDecimalInt operator- (BigDecimalInt anotherDec);
};

BigDecimalInt operator+ (BigDecimalInt firstDec,BigDecimalInt secDec)
{
    int size,diff,carry=0,x,y,z,counter=0;
    BigDecimalInt temp("");
    string c1,c2,result,smaller,bigger;
    c1=firstDec.getstring();
    c2=secDec.getstring();
    if(c1.length()<c2.length())
        {
            smaller = c1;
            bigger = c2;
        }
    else
       {
           smaller = c2;
           bigger = c1;
       }
    diff = bigger.length()-smaller.length();
    size = smaller.length();
    for(int i=size-1;i>=0;i--)
        {
            y = int(bigger[i+diff]);
            y-=48;
            x = int(smaller[i]);
                x-=48;
            z = x+y+carry;
            if(z<=9)
            {
                result+=char(z+48);
                carry = 0;
            }
            else
            {
                result+=char(z+38);
                carry = 1;
            }
        }
    while((carry==1)&&(counter<bigger.length()))
    {
        counter = size;
        x = int(bigger[counter])-48+carry;
        if(x<=9)
            {
                result+=char(x+48);
                carry = 0;
            }
        else
        {
            result+=char(x+38);
            carry = 1;
        }
        counter++;
    }
    if(counter==bigger.length())
        {
            if(carry==1)
            result+=char(49);
        }
    else
        for(int o=counter;o>=0;o++)
            result+=bigger[o];

    temp.s1=result;

    return temp;
}
int _tmain(int argc, _TCHAR* argv[])
{
     string k1,k2;

    cout<<"Enter first num : \n";
    cin>>k1;
    BigDecimalInt c1(k1);
    cout<<"Enter second num : \n";
    cin>>k2;
    BigDecimalInt c2(k2);

    BigDecimalInt c3("");

    c3=c1+c2;
    cout<<c3.s1;
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:51:09.647

如果`counter == bigger.length()`你下标`bigger`，`bigger.length()`而最后一个有效索引是`bigger.length() - 1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:55:53.027

这个 for 循环与众不同

```
for(int o=counter;o>=0;o++) 
```

所有其他人都在倒数*到*零，但这似乎正在数数。

# http - 使用 RESTAS 分块 HTTP 回复

> ID：12987582
> 
> 赞同：0
> 
> 时间：2012-10-20T10:39:11.887
> 
> 标签：http, http-headers, common-lisp, hunchentoot

假设我想发送一个相当大的文件（例如 10MB）并且我想使用 HTTP1.1 分块传输编码来做到这一点。我将如何在 RESTAS 中执行此操作？

# postgresql - PostgreSQL CallableStatement：偏移量 6 处的格式错误的函数或过程转义语法

> ID：12987583
> 
> 赞同：1
> 
> 时间：2012-10-20T10:39:37.883
> 
> 标签：postgresql, jdbc, callable-statement

我在使用 CallableStatement 调用 Postgres 存储函数的 Java 应用程序中出现错误。错误如下：

```
org.postgresql.util.PSQLException: Malformed function or procedure escape syntax at offset 6.
    at org.postgresql.jdbc2.AbstractJdbc2Statement.modifyJdbcCall(AbstractJdbc2Statement.java:2390)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.<init>(AbstractJdbc2Statement.java:149)
    at org.postgresql.jdbc3.AbstractJdbc3Statement.<init>(AbstractJdbc3Statement.java:40)
    at org.postgresql.jdbc3g.AbstractJdbc3gStatement.<init>(AbstractJdbc3gStatement.java:26)
    at org.postgresql.jdbc3g.Jdbc3gStatement.<init>(Jdbc3gStatement.java:28)
    at org.postgresql.jdbc3g.Jdbc3gPreparedStatement.<init>(Jdbc3gPreparedStatement.java:21)
    at org.postgresql.jdbc3g.Jdbc3gCallableStatement.<init>(Jdbc3gCallableStatement.java:17)
    at org.postgresql.jdbc3g.Jdbc3gConnection.prepareCall(Jdbc3gConnection.java:45)
    at org.postgresql.jdbc3.AbstractJdbc3Connection.prepareCall(AbstractJdbc3Connection.java:316)
    at org.postgresql.jdbc2.AbstractJdbc2Connection.prepareCall(AbstractJdbc2Connection.java:203)
    at com.mchange.v2.c3p0.impl.NewProxyConnection.prepareCall(NewProxyConnection.java:632)
    at zm.co.freight.model.user.UserRoleModel.getUserRoleDocumentPermission(UserRoleModel.java:212) 
```

需要注意的是，我使用的是 Postgres 9.2、posgresql-9.1-902.jdbc3.jar 和一个 c3p0-0.9.2-pre4.jar 连接池。

这是我要调用的存储函数：

```
CREATE OR REPLACE FUNCTION user_role_document_permission_select_all_per_user_role(userroleidin integer)
  RETURNS refcursor AS
$BODY$
declare
    mycurs refcursor;
begin
    open mycurs for
        select document._name,
          document_user_role_permission.viewing,
          document_user_role_permission.processing,
          document_user_role_permission.editing,
          document_user_role_permission.updating,
          document_user_role_permission.user_role_id,
          document_user_role_permission.document_id
       from document_user_role_permission, document where document_user_role_permission.document_id = document.id and document_user_role_permission.user_role_id =  userroleidin;
    return mycurs;
end;
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100; 
```

进行调用的 Java 方法：

```
public ArrayList<UserRoleDocumentPermissionDao> getUserRoleDocumentPermission (int userRoleId){
        ArrayList<UserRoleDocumentPermissionDao> result = new ArrayList<UserRoleDocumentPermissionDao>();
        try{
            cstmt = myConnection.prepareCall("{ ? = \"user_role_document_permission_select_all_per_user_role\"(?)}");
            cstmt.registerOutParameter(1, Types.OTHER);
            cstmt.setInt(2, userRoleId);
            cstmt.execute();
            rs = (ResultSet) cstmt.getObject(1);
            ResultSetMetaData rsmd = rs.getMetaData();
            int columnCount = rsmd.getColumnCount();
            UserRoleDocumentPermissionDao udao;
            while (rs.next()){
                udao = new UserRoleDocumentPermissionDao();
                for (int i = 1; i <= columnCount; i++){
                    if (i == 1){                                // document name
                        udao.setDocumentName(rs.getString(i));
                    } else if (i == 2){                         // view
                        udao.setViewing(rs.getBoolean(i));
                    } else if (i == 3){                         // process
                        udao.setProcessing(rs.getBoolean(i));
                    } else if (i == 4){                         // edit
                        udao.setEditing(rs.getBoolean(i));
                    } else if (i == 5){                         // update
                        udao.setUpdating(rs.getBoolean(i));
                    } else if (i == 6){                         // userRoleId
                        udao.setUserRoleId(rs.getInt(i));
                    } else if (i == 7){                         // documentId
                        udao.setDocumentId(rs.getLong(i));
                    }
                }
                result.add(udao);
            }
        } catch (SQLException e){
            System.out.println("SQL Exception: ");
            e.printStackTrace();
        } finally {
            closeConnection();
        }

        return result;
    } 
```

超类中的一些全局变量

```
protected  Connection myConnection;
    protected  Statement stmt;
    protected  CallableStatement cstmt;
    protected  ResultSet rs; 
```

道：

```
public class UserRoleDocumentPermissionDao {

    private String documentName;
    private boolean viewing;
    private boolean processing;
    private boolean editing;
    private boolean updating;
    private int userRoleId;
    private Long documentId;

    public UserRoleDocumentPermissionDao(){}

    public UserRoleDocumentPermissionDao(String docName, boolean view, 
            boolean process, boolean edit, boolean update, int userRoleIdin, Long docId){
        this.documentName = docName;
        this.viewing = view;
        this.processing = process;
        this.editing = edit;
        this.updating = update;
        this.userRoleId = userRoleIdin;
        this.documentId = docId;
    }
/////// getters and setters 
```

我不知道为什么会这样。我已经能够成功地从一个返回 refcursor 的 Postgres 存储函数中获得结果，而且我似乎无法弄清楚该函数/函数调用与这个函数/函数调用之间的任何区别。

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T19:19:31.983

您忘记了`call`关键字：

```
cstmt = myConnection.prepareCall("{ ? = call user_role_document_permission_select_all_per_user_role(?)}"); 
```

# c# - 在 C# 中创建大于表单的地图

> ID：12987584
> 
> 赞同：3
> 
> 时间：2012-10-20T10:39:37.960
> 
> 标签：c#, winforms, graphic

我正在尝试创建某种模拟程序，并且在网上搜索了答案，但找不到合适的答案。

我的程序将有类似 10000 x 10000 的带有 X 和 Y 坐标的地图，我想找到一种方法来拥有这个大“地图”，但只在表单/面板上显示该地图的选定部分。（你可以在地图上移动按钮或按键并不重要我知道如何做那部分）

我正在寻找一种不使用 XNA、DirectX 或任何其他高级图形引擎的方法来创建和显示这个大地图，就像简单的 system.graphic 和/或 system.graphic2d

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T11:26:25.753

在您的表单上放置一个面板，调整到适当的尺寸。然后在面板中放置一个图片框，其大小与地图图形的尺寸一致（换句话说，图片框现在大于其容器控件面板）。将 Picturebox.Sizemode 设置为“正常”。

将面板的 Autoscroll 属性设置为“True”。

加载地图。滚动条可用于导航地图图像，您还可以设置一些按钮或其他导航。

您可以在 VS 设计器中完成上述所有操作，也可以使用代码以编程方式完成。

这是基本的，但它会完成工作（或者，无论如何，开始了！）希望有帮助。

# c# - 奇数 System.Net.NetworkInformation.NetworkInformationException

> ID：12987589
> 
> 赞同：2
> 
> 时间：2012-10-20T10:40:13.497
> 
> 标签：c#, linq, exception, networking

以下表达式偶尔会引发以下异常：

```
NetworkInterface[] interfacesToUse = (from outer in NetworkInterface.GetAllNetworkInterfaces()
                                                  select outer).ToArray();

IPv4InterfaceStatistics[] stats = (from current in interfacesToUse select current.GetIPv4Statistics()).ToArray(); 
```

> 基本异常类型：System.Net.NetworkInformation.NetworkInformationException (0x80004005)：系统找不到在 System.Net.NetworkInformation.SystemNetworkInterface.GetIPv4Statistics() 的 System.Net.NetworkInformation.SystemNetworkInterface.GetIPv4Statistics() 处指定的文件.Linq.Enumerable.WhereSelectArrayIterator `2.MoveNext() at System.Linq.Buffer`1..ctor（IEnumerable `1 source) at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 源）
> 
> 堆栈跟踪：在 System.Net.NetworkInformation.SystemNetworkInterface.GetIPv4Statistics() 在 System.Net.NetworkInformation.SystemIPv4InterfaceStatistics.GetIfEntry(Int64 index) 在 System.Linq.Enumerable.WhereSelectArrayIterator `2.MoveNext() at System.Linq.Buffer`1..ctor(IEnumerable `1 source) at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 源)

我一直无法找到任何可能提供对该错误的一些见解的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:39:29.053

> 偶尔

我想知道为什么它偶尔会发生。你使用如图所示的代码吗？来自 .NET 3.5的方法`SystemIPv4InterfaceStatistics.GetIfEntry(Int64 index)`调用 .NET 中的[`GetIfEntry`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365939%28v=vs.85%29.aspx)函数`Iphlpapi.dll`。从 .NET 4 开始，[`GetIfEntry2`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365941%28v=vs.85%29.aspx)调用该函数。根据您的堆栈跟踪，我假设您使用的是 .NET 3.5。

错误 2，翻译为“系统找不到指定的文件”（但实际上只是`ERROR_NOT_FOUND`）在将未知索引传递到时返回`GetIfEntry()`。

这不应该在 .NET 中发生，因为`NetworkInterface.GetAllNetworkInterfaces()`应该只返回系统已知的网络接口，因此它们的所有（私有）`index`属性都应该设置为系统已知的索引。

* * *

编辑：使用以下代码重现了错误：

```
var interfaces = NetworkInterface.GetAllNetworkInterfaces();

while (true)
{

    foreach (var i in interfaces)
    {
        var s = i.GetIPv4Statistics();

        Console.WriteLine("Received: {0}, Sent: {1}", s.BytesReceived, s.BytesSent);
    }                
} 
```

当我开始一个 VPN 连接时，我有一个额外的界面将被打印出来。第二次我禁用此连接，该`GetIPv4Statistics()`接口上的将抛出您提到的异常。

我想这取决于你在运行这段代码的机器上做什么。我认为`NetworkInterface.GetAllNetworkInterfaces()`每次要获取接口数据时都必须调用。

# node.js - 表达将默认文件扩展名与静态内容请求相关联的常用方法是什么？

> ID：12987590
> 
> 赞同：2
> 
> 时间：2012-10-20T10:40:13.437
> 
> 标签：node.js, express

我在后端使用 Express (v3)，它还提供静态内容，如下所示：

```
app.use(allowCrossDomain);
app.use(disableETag);
app.use(app.router);
app.use(express["static"](webRootDir));
app.use(express.methodOverride());
app.use(express.bodyParser());
app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
app.set('view engine', 'html');
app.set('views', webRootDir);
app.engine("html", handlebarsEngine); 
```

因此，对“/customers.html”的请求由`express.static`中间件提供服务。但是，请求“/customers”不起作用，因为没有“customers”文件，也没有这样的动态内容路由。

当然，我可以按照[使用 Express 在动态路由上提供静态文件中](https://stackoverflow.com/questions/11569181/serve-static-files-on-a-dynamic-route-using-express)解释的路径，从动态路由中提供文件“customers.html” 。

但是，我认为这是一种矫枉过正，这种事情应该可以通过默认文件扩展名简单地配置，但我只是找不到如何。谁能给我看？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-13T11:11:44.637

express static 基于serve-static，因此您传入一个带有扩展属性集的选项对象。对于您的示例，以下内容将起作用：

```
app.use(express.static(webRootDir, {'extensions': ['html']})); 
```

这设置了 express 以便如果找不到文件，例如`/customers`它将尝试将每个扩展名附加到路径中，所以在你的情况下`/customers.html`

[请参阅https://github.com/expressjs/serve-static#serve-files-with-vanilla-nodejs-http-server](https://github.com/expressjs/serve-static#serve-files-with-vanilla-nodejs-http-server)上的文档

# eclipse - Eclipse 增量生成器插件不起作用

> ID：12987596
> 
> 赞同：3
> 
> 时间：2012-10-20T10:41:00.640
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, builder, eclipse-pde

我最近开始在 Eclipse RCP (4.2.1 Juno) 上使用 Eclipse 的插件开发环境。我使用增量生成器模板创建了一个项目。我的目标是在 Java Build 结束后对用户代码执行构建过程。问题是，我不知道如何使用 Builder。我尝试将项目导出到“可部署的插件和片段”jar 文件中，然后将 jar 文件放置在多个位置，例如 Development Workspace、Runtime Workspace 以及 Development Eclipse 的 plugins 文件夹中。我将插件项目作为“Eclipse 应用程序”运行，运行时 Eclipse 出现，我创建了一个项目，并为该项目定义了一个构建器，并将导出的 jar 作为构建器文件，并将其作为工作目录，然后构建该项目并希望魔术发生！但是愚弄我...

```
Errors occurred during the build.
Errors running builder 'Integrated External Tool Builder' on project 'A'.
Exception occurred executing command line.
Cannot run program "<$Address>/Getter_1.0.0.201210200958.jar" (in directory "<$Address>"):     error=13, Permission denied
Exception occurred executing command line.
Cannot run program "<$Address>Getter_1.0.0.201210200958.jar" (in directory "<Address>"): error=13, Permission denied 
```

我认为这与我的插件的位置有关，但是除了运行时 eclipse 的 plugins 文件夹之外，我已经尝试过任何地方，因为我认为它与开发 eclipse 相同......有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T11:42:47.460

据我所知，增量构建器示例具有一种性质。因此，如果您只是用 next next 完成创建增量构建器示例，并将其作为“eclipse 应用程序”运行，那么您应该创建一个 java 项目，右键单击它，然后选择“add .... nature”。然后构建器将被启用，您将看到它是否工作。所以启用自然。

您可以通过检查项目属性来检查是否在项目上启用了构建器。有一个建设者部分：

![在此处输入图像描述](../Images/68c8af7e9da5ea18dfa7a023bc19c190.png)

这里有一个完整的建设者教程[。](http://goo.gl/YMTJa)

# java - 线程更新先前创建的线程变量？

> ID：12987602
> 
> 赞同：0
> 
> 时间：2012-10-20T10:41:35.013
> 
> 标签：java, multithreading

我正在尝试执行以下操作 -

1.  创建了一个线程
2.  创建新线程时，它会更新前一个线程的变量`limit`
3.  第三个线程的进度重复，即该线程更新`limit`线程 ID1 和 ID2 的变量。

这是一些示例代码

**主班**

```
public class TaskImplementer {
    public static int End;
    public static int threadCount = 5;

    public static void main(String[] args) {
    int i=0;

    findEnd();

    while (i < threadCount) {
        if(isPossible()) {      // check for some condition
        createThread aThread = new createThread(i, End);
        aThread.start();
        }
        i++;
        //updateGUI();  //updateGUI - show working Threads
    }
    }

    private static void findEnd() {
    //updates End variable
    }

    private static boolean isPossible() {
    //.....
    //Check for a condition
    return false;

    }
} 
```

**创建线程类**

```
public class createThread extends Thread {
    private static int ID;
    private static int limit;
    private static int startfromSomething;

    public createThread(int ThreadID, int End) {
    ID = ThreadID;
    limit = End;
    }

    private void doSomething() {
    //does work
    }

    @Override
    public void run() {

    while(startfromSomething < limit) {
        doSomething();
    }
    TaskImplementer.i--;
    }

} 
```

`limit`成功创建后，每个线程都需要更新该变量。有可能吗，请提出一些建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:22:06.987

根据您在步骤中给出的逻辑，您可以创建一个 CreateThread 数组并设置 id 和 limit 的参数。

```
public class TaskImplementer {
    static int End;
    static int threadCount = 5;

    public static void main(String[] args) {
        int i = 0;
        CreateThread[] tasks = new CreateThread[threadCount];
        while (i < threadCount) {
            int j = 0;
            while (j <= i) {

                if (tasks[j] != null) {
                    // Set ID and limit
                    tasks[j] = new CreateThread(j, End);
                    tasks[j].start();
                }
                j++;
            }
            i++;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:33:33.117

问题显然是由于您在不应该使用的地方使用了“静态”！它应该是这样的：

```
public class CreateThread extends Thread {
   private int ID;
   private int limit;
   private static int startfromSomething; //Don't know about this one. If this value is the same for every thread, "static" is correct. Otherwise remove "static".

   public createThread(int ThreadID, int End) {
      ID = ThreadID;
      limit = End;
   }
} 
```

如果您想在此类的所有实例和静态内容之间共享一个字段，则使用“静态”。

还有一件事：Java 代码约定希望您的类名以大写字母开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T10:51:37.350

我认为您应该在 createThread 类中包含原子整数，并且还应该通过列表保存可用线程（createThread）对象，然后每次要运行另一个线程时，您必须将其添加到列表中，同时减少或增加限制变量其他正在运行的线程通过它们在线程列表中的引用，我的意思是你必须实现类似线程池的东西。

# arrays - asm中的布尔数组

> ID：12987608
> 
> 赞同：-1
> 
> 时间：2012-10-20T10:42:33.683
> 
> 标签：arrays, assembly

我可以创建任意大小的数组。好的，让我们创建一个布尔数组。所以这是我的问题：我如何处理我的数组的 i(th) 位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:06:02.793

伪代码（因为未指定架构）：

访问 i(th) 位：

将布尔值视为寄存器中的一组标志：其中 0 = false 和 1 = true

考虑一台 8 位机器：

```
 76543210
registerA = 00100100
-----------------------

-----------------------
To access 5th bit      : if ((00100100 & 00100000)>>5) == 1: 5th bit is true; else: false
To access 6th bit      : if ((00100100 & 01000000)>>6) == 1: 6th bit is true; else: false
similarly for nth bit  : if (((number)&(1 << n)) >> n) == 1: nth bit is true; else: false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:46:57.943

第一种方式 - 面具：

```
or byte ptr [array+x], %mask% ; %mask% - any value that 1 byte can hold (i.e.: 40h - 1100 0000, 7th & 8th bit will be set on little-endian architecture) 
```

显然，您可以将更大的掩码与 WORD、DWORD（或 x64 上的 QWORD）一起使用。

第二种方式 - [BT*](http://faydoc.tripod.com/cpu/index_b.htm)：

```
bts [array], x ; x-th but will be set, previous state will be stored @ CF 
```

# objective-c - 目标 c 中具有属性的 c 数组

> ID：12987617
> 
> 赞同：0
> 
> 时间：2012-10-20T10:43:48.330
> 
> 标签：objective-c

我正在使用下一个代码来定义我的 c 数组（除了警告之外效果很好）：

**在 .h 文件上：**

```
@interface memory : NSObject 
{
     int places[60];
     int lastRecordSound;  
}

@property int *places; 
```

然后在我的`.m`我没有同步它（它工作）但如果我尝试同步它：

```
@synthesize places; 
```

我得到错误：

```
type of preperty "places does not match type of ivar places (int[60] ) 
```

如果没有，我会收到警告：

```
auto synthesized property places will be use synthesized instance variable _places... 
```

**那么，定义这个 c 数组的最佳方法是什么？**（是的，我需要 c ..）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:01:18.057

代替

> @同步地点；

你必须写

> @synthesize 地方；

还将 iVar 从 更改`int places[60];`为`int *places;`甚至您可以完全删除这些行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:20:13.917

这个？（非 ARC）

```
#import <Foundation/Foundation.h>

@interface Memory:NSObject
@property int *places;
@end

@implementation Memory
@synthesize places;
@end

int main(int argc, char *argv[]) {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    int *p;
    if( p = malloc(60 * sizeof(int)) ) {
        p[1] = 99;
        Memory *aMemory = [[Memory alloc] init];
        aMemory.places = p;

        int *q = aMemory.places;
        printf("q[1] = %d\n",q[1]);

        free(p);
        [aMemory release];
    }
    else {
        printf("ERROR: unable to malloc p\n");
    }

    [pool release];
} 
```

打印`q[1] = 99`到控制台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:15:23.257

自动生成的访问器函数不能将`int *`属性与`int[]`数组关联。但是，如果您将属性声明为

```
@property(readonly) int *places; 
```

在您的 .h 文件中，并提供自定义 getter 函数

```
- (int *)places
{
    return self->places;
} 
```

在您的 .m 文件中。

现在您可以通过属性访问数组：

```
memory *mem = [[memory alloc] init];
mem.places[23] = 12; 
```

当然，编译器不知道数组只有 60 个元素，所以如果你赋值，你不会得到编译器警告

```
mem.places[999] = 12; 
```

一切不好的事情都可能发生。

将属性声明为`read-only`有意义，因为您无法更改 int 数组的地址。`nonatomic`（如果您不需要同步访问，您可能还想添加到属性属性，但这是一个不同的主题。）

# mysql - 数据库规范化 - 外键

> ID：12987618
> 
> 赞同：2
> 
> 时间：2012-10-20T10:43:50.423
> 
> 标签：mysql, database, database-design

我试图理解数据库规范化，我理解一般的想法，但什么是正确的方法，什么是多余的。

例如，我有一个标准的员工部门数据库作为第一步。

表是

```
EMPLOYEES:
id, first_name, last_name, dob, email, city, address, department_name 
```

因此，为了将其标准化为第一步，我会将部门名称移动到单独的表中，并在必要时以多对一的形式加入。

```
EMPLOYEES:
id, first_name, last_name, dob, email, city, address, department_id
DEPARTMENTS
id, name 
```

这是否足以进行规范化，还是将所有其他字段移动`department_id`到第二个表（例如）更好`employees_meta`？想象一下，如果我们在描述员工的表中还有 20 个字段，那么什么是正常的？

如果我们谈论的是优化网页，正确的规范化是否只有我们在处理员工表时总是显示的字段，以及我们不经常使用的所有其他信息移动到不同的表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T15:51:47.433

```
EMPLOYEES:
id, first_name, last_name, dob, email, city, address, department_name 
```

> 因此，为了将其标准化为第一步，我会将部门名称移动到单独的表中，并在必要时以多对一的形式加入。

```
EMPLOYEES:
id, first_name, last_name, dob, email, city, address, department_id
DEPARTMENTS
id, name 
```

当您基于函数依赖进行规范化时，您的原始表*总是*以较少的列结束。你从 8 开始，以 8 结束。

您将原始表中的“department_name”替换为“department_id”。*没有*规范化指南说“用 ID 号替换文本”。这不仅与规范化*无关*，它还引入了以前不需要的强制连接。

这并不一定意味着用 ID 号替换文本是错误的做法。这*确实*意味着您不应该将其称为标准化。因为不是。

规范化的*第一步*是识别候选键和功能依赖关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T11:04:36.553

将城市字段移动到分隔表中，我认为这足以正常。[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)的简单关键是避免重复值并将其分离到单个表中。但是，有些数据不需要像sex字段那样分开，最好使用枚举数据类型然后分开到其他表中。

注意：查询连接表过多会降低性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T16:25:57.590

规范化处理实体。代表模型中实体的所有内容都应该分开（规范化）。

如果您有一个包含人员（名字、姓氏等）的表，并且所有这些人员也是具有登录用户名和密码的用户，那么您不需要规范化。

但是，如果只有一些人将成为用户，则您应该规范化为 2 个表（人员，使用 person_id 作为人员实体链接的用户），并且如果您需要将人员和用户实体存储在几个不同的地方（人员之间的关系，标记记录与创建和最后修改的用户），那么你最好规范化。

因此，正如 CatCall 所说，规范化不会更改带有 id 的名称。那只是创建查找。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-29T17:43:18.333

如果您有关于某个位置以及城市的其他信息，例如（城市、州、邮政编码），那么只需将邮政编码与员工数据一起存储。有一个单独的表，称为“美国位置索引”或任何包含邮政编码作为主键、城市和州的表。您可以存储 2 种状态名称变体，全称和缩写。基本上重点是城市和州很容易通过邮政编码确定......你可以这样想。美国的每个州都有很多城市，每个城市都有很多邮政编码，但每个邮政编码标识一个特定城市和州的组合。例如，在 NYC，邮政编码 10010 将标识为 new York, NY，而 10001 将标识为 new York, NY。但 11222 将标识为纽约布鲁克林。希望这可以帮助。

# css - Bootstrap 主题按钮

> ID：12987621
> 
> 赞同：0
> 
> 时间：2012-10-20T10:44:15.807
> 
> 标签：css, twitter-bootstrap

我下载了一个 Bootstrap 主题 - 并试图更改按钮的颜色（在此链接的右上角：http: [//twcc.se/onepageproduct/](http://twcc.se/onepageproduct/)） - 我似乎无法替换主蓝色颜色（活动按钮）到例如深红色....

真的不确定为什么这不起作用 - 我尝试更改连接到按钮的 css 元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:53:42.430

只需转到他们的 general.css 第 114 行

```
 .navbar .nav .active a {
-moz-border-bottom-colors: none;
-moz-border-left-colors: none;
-moz-border-right-colors: none;
-moz-border-top-colors: none;
background: -moz-linear-gradient(center top , #92DBFF 0%, #4FB6E9 5%, #39A0D3 100%) repeat scroll 0 0 #FFFFFF;
border-color: #3CA3D7 #3799CA #338BB8;
border-image: none;
border-radius: 16px 16px 16px 16px;
border-style: solid;
border-width: 1px;
box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
color: #FFFFFF;
text-shadow: 0 -1px 0 #3799CA; 
```

}

将背景颜色更改为您需要的颜色。

注意：他们正在使用渐变按钮使用此[Link1](http://gradients.glrzad.com/)和[Link2](http://cssgradientbutton.com/)了解更多详细信息

# python - numpy、scipy、matplotlib 和 pylab 之间的混淆

> ID：12987624
> 
> 赞同：143
> 
> 时间：2012-10-20T10:44:33.373
> 
> 标签：python, numpy, matplotlib, scipy

Numpy、scipy、matplotlib 和 pylab 是使用 python 进行科学计算的常用术语。

我只是了解了一点pylab，我很困惑。每当我想导入 numpy 时，我总是可以这样做：

```
import numpy as np 
```

我只是认为，一旦我这样做

```
from pylab import * 
```

numpy 也将被导入（带有`np`别名）。所以基本上第二个比第一个做了更多的事情。

我想问几件事：

1.  pylab 只是 numpy、scipy 和 matplotlib 的包装器，对吗？
2.  由于 np 是 pylab 中的 numpy 别名，那么 pylab 中的 scipy 和 matplotlib 别名是什么？（据我所知，plt 是 matplotlib.pyplot 的别名，但我不知道 matplotlib 本身的别名）

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-10-20T11:22:50.887

1.  不，`pylab`是`matplotlib`(in `matplotlib.pylab`) 的一部分，并试图为您提供类似 MatLab 的环境。`matplotlib`有许多依赖项，`numpy`其中它在 common alias 下导入`np`。`scipy`不是 的依赖项`matplotlib`。

2.  如果您运行`ipython --pylab`自动导入，则会将所有符号从`matplotlib.pylab`全局范围内。就像您写的那样，以别名`numpy`导入。别名下的`np`符号来自。`matplotlib``mpl`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-10-15T23:54:06.513

**Scipy 和 numpy**是科学项目，旨在为 python 带来高效、快速的数值计算。

**Matplotlib**是 python 绘图库的名称。

**Pyplot**是 matplotlib 的交互式 api，主要用于 jupyter 等笔记本。您通常像这样使用它：`import matplotlib.pyplot as plt`.

**Pylab**与 pyplot 相同，但具有额外的功能（目前不鼓励使用它）。

*   **pylab** = **pyplot + numpy**

在此处查看更多信息：[Matplotlib、Pylab、Pyplot 等：它们之间有什么区别以及何时使用它们？](http://queirozf.com/entries/matplotlib-pylab-pyplot-etc-what-s-the-different-between-these)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-09-13T14:24:09.190

由于某些人（像我一样）可能仍然对 pylab 的使用感到困惑，因为`pylab`互联网上有使用的示例，因此这里引用了官方 matplotlib 常见问题解答：

> pylab 是一个方便的模块，可在单个名称空间中批量导入 matplotlib.pyplot（用于绘图）和 numpy（用于数学和处理数组）。虽然很多例子都使用了pylab，但是已经不再推荐了。

所以，TL；DR；是不要使用pylab，期间。根据需要单独使用`pyplot`和导入。`numpy`

[这是](https://matplotlib.org/faq/usage_faq.html#matplotlib-pyplot-and-pylab-how-are-they-related)进一步阅读和其他有用示例的链接。

# javascript - Javascript：在高阶函数中访问对象范围成员

> ID：12987631
> 
> 赞同：1
> 
> 时间：2012-10-20T10:45:29.327
> 
> 标签：javascript, oop, scope, higher-order-functions

领域模型

```
var Question = function(text, answerType){
    this.id = 0
    this.text = text;
}

var Form = function(){
    this.questions = [] 
    this.addQuestion = function(question){
        question.id = this.questions.length + 1
        this.questions.push(question)
    }
} 
```

呈现表单

```
var FormRenderer = function(){
    this.wrapperSelector = "#wrapper"
    this.render = function(form){
       // how to access renderQuestion member of FormRenderer within the higher-order function?
       $(form.questions).each( function(){ **this.renderQuestion(form, this) }**) 
    }

    this.renderQuestion = function(form, question){
        var questionDomId = "question" + question.id

        var questionText = '<input type="text" size="75" name="questionText" value="'+ question.text +'" /><br/><br/><br/>'
        var questionWrapper  = "<div id='" + questionDomId + "'>" + questionText + "</div>"

        // how do i access wrapperSelector member of FormRender when renderQuestion is called as higher-order function?
        **$(this.wrapperSelector).append(questionWrapper)** 
    }
} 
```

客户端代码

```
var q1= new Question("question1", "Text Box")
var form = new Form()
form.addQuestion(q1)

var formRenderer = new FormRenderer()
formRenderer.render(form) 
```

问题与标题相同。我已经就上面带有 Javascript 注释的特定示例寻求帮助。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:15:08.377

您需要像这样存储对对象的引用：

```
var FormRenderer = function(){
    this.wrapperSelector = "#wrapper"
    this.render = function(form){
       $(form.questions).each( this.renderQuestion) ;
    }

   var self = this; // <--------------- 

   this.renderQuestion = function(form, question){
        var questionDomId = "question" + question.id

        var questionText = '<input type="text" size="75" name="questionText" value="'+ question.text +'" /><br/><br/><br/>'
        var questionWrapper  = "<div id='" + questionDomId + "'>" + questionText + "</div>"

        // now use self instead of this
        $(self.wrapperSelector).append(questionWrapper);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:33:02.357

`this`您可以通过如下方式调用成员函数来获取父对象实例。

如果`object`是您的实例，并且`func`是您希望在其中`this`成为您的实例本身的成员函数，那么您可以将成员函数称为：

```
obj.func.call(obj, <params>); 
```

代替

```
object.func(<params>); 
```

* * *

在您的情况下，这将是：

```
var fR = new FormRenderer(<params>);
...
fR.renderQuestion.call(fR, <params>); 
```

你`renderQuestion`可以`this`像在外面一样使用。IE

```
var FormRenderer = function(){
    this.wrapperSelector = "#wrapper"
    ...
    this.renderQuestion = function(form, question){

        // this refers to the object itself, so you can call        
        $(this.wrapperSelector).append(...);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T12:51:38.113

不得不根据来自 Pumbaa80 和 Bergi 的意见进行一些重组以解决问题。感谢您的回答。

```
var FormRenderer = function(){
    this.render = function(form){
        var formEventHandler = new FormEventHandler(form)
        $(form.questions).each(new RenderQuestion(formEventHandler).render)
    }

    RenderQuestion = function(formEventHandler){
        this.formEventHandler = formEventHandler
        this.wrapperSelector = "#wrapper"
        var self = this
        this.render = function(index, question){
            var questionDomId = "question" + question.id

            // generate elements
            var questionText = '<input type="text" size="75" name="questionText" value="'+ question.text +'" /><br/>'
            var questionWrapper  = "<div id='" + questionDomId + "'>" + questionText + "</div>"

            // append to dom
            $(self.wrapperSelector).append(questionWrapper)
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T21:21:40.143

不要使用[`jQuery.each`](http://api.jquery.com/jQuery.each/)- 它会更改对`this`不寻常事物的引用。你可以像这样使用[ES 5.1`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)和正常的[`forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)：

```
FormRenderer.prototype.render = function(form) {
    form.questions.forEach(this.renderQuestion.bind(this, form));
}; 
```

我建议使用经典的 for 循环，它比任何高阶事物更容易阅读和更快：

```
FormRenderer.prototype.render = function(form) {
    for (var i=0; i<form.questions.length; i++)
        this.renderQuestion(form, form.questions[i]);
}; 
```

如果您真的想要/需要使用，则需要在变量`jQuery.each`中保留对当前`FormRenderer`实例 ( ) 的引用：`this`

```
FormRenderer.prototype.render = function(form) {
    var renderer = this;
    $.each(form.questions, function(i) {
        renderer.renderQuestion(form, this);
    });
}; 
```

# azure - Azure 本地存储和 Azure 虚拟机 HD

> ID：12987634
> 
> 赞同：1
> 
> 时间：2012-10-20T10:45:43.453
> 
> 标签：azure, local-storage

将文件存储在本地存储中与存储在 Azure 虚拟机 HD（如 d:\ 或 e:）上是否有区别？据我了解，它们是相同的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:03:36.360

不确定为什么要将本地存储与 Azure Virtual Machin 的 HD 进行比较，因为本地存储适用于 Web/工作者角色方案 (PaaS)，而虚拟机硬盘适用于持久性 VM 方案 (IaaS)。更恰当的比较是本地存储和 Azure 驱动器。

据我了解，Windows Azure 中的本地存储是临时的。这意味着如果您的角色实例出现故障并且无法恢复，则存储在本地存储中的任何内容都将消失。其次，本地存储特定于角色实例，您不能跨角色实例共享它。第三，本地存储的最大大小受角色实例大小的限制。例如，如果您的应用程序部署在“小型”虚拟机中，则您可以拥有的最大本地存储量为 229.4 MB（参考：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh369931 .aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh369931.aspx)）。

与 Azure 虚拟机 HD 相比，它们是由 Windows Azure Blob 存储支持的持久存储。这些在 Blob 存储中保存为页 Blob。由于这个事实，您最多可以拥有 1 TB（页 blob 的最大大小）的可用存储空间。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:50:14.550

文件应存储在 BLOB 存储中。除了 MongoDB，我不会在 VM 磁盘中保存任何文件。VM 文件位于 blob 存储上。如果它是永久的，它应该在 BLOB 上，临时的我会把它保存在本地。

# css - 将徽标放在菜单左侧

> ID：12987637
> 
> 赞同：1
> 
> 时间：2012-10-20T10:46:29.407
> 
> 标签：css

所以我正在调整一些 CSS，但我不擅长它。

我有那些

```
#logop {
  text-align: left;
  height: 50px;
}

#menu {
  font-family: "Arial Black", Impact, Arial, sans-serif;
  text-align: center;
  width: 100%;
  height: 50px;
  padding-top: 13px;
  z-index: 30;
}

.nav {
  height: 100px;
  position: fixed;
  top: 0px;
  z-index: 20;
  width: 100%;
  background-color: rgb(41, 35, 30);
  -moz-box-shadow: 0px 2px 15px #000;
  -webkit-box-shadow: 0px 15px 5px #000;
  box-shadow: 0px 2px 15px #000;
  background-image: image-url('damask.png');
} 
```

还有这个

```
<div id="container" class="spacer">
    <div class="nav" id="top">
        <div id="menu">
            <div id="logop"> <%= image_tag('logo.png') %></div>
            <ul>
                <li><a href="#top">HOME</a></li>
                <li><a href="#one">ABOUT</a></li>
            </ul>
        </div>
    </div>
</div> 
```

我试图让菜单左侧的标志。如果我`float:left`只希望它离开菜单时，我使用徽标一直到页面的角落。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:54:56.587

您需要使用`float: left`in`#logop`和`float: right`in `#menu`。工作示例：http: [//jsfiddle.net/CxgTA/](http://jsfiddle.net/CxgTA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:08:10.660

只需尝试以下链接即可`float:left`用于菜单样式和徽标

```
<div id="container" class="spacer">
<div class="nav" id="top">
    <div id="menu">
        <div id="logop" style="float:left;"> <%= image_tag('logo.png') %></div>
        <ul style="float:left;">
            <li><a href="#top">HOME</a></li>
            <li><a href="#one">ABOUT</a></li>
        </ul>
    </div>
</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T11:02:48.977

你没有提到容器的样式，

首先定义容器的大小，例如

```
 #container{width:1000 px; }   (you can specify it as per your requirements )

 and then divide it again in tow parts . 

  #logo{ width:100 px; float :left;  }
    #logo{ width:900 px; float :left;  } 
```

所以会是这样

```
 <div id =logo>
      </logo>
     <div id = menu>
         </menu>
         </container > 
```

这些尺寸只是为了让你理解。希望它清除了这个想法

# java - 学校的一个小例子有问题

> ID：12987640
> 
> 赞同：0
> 
> 时间：2012-10-20T10:47:16.523
> 
> 标签：java

该示例来自一门课​​程，用于比较 java 中的两个对象：

```
public class Complex {

    ...

    public boolean equals (Object obj) {
        if (obj instanceof Complex) {    // if obj is "Complex" (complex number) 
            Complex c =  (Complex) obj   // No idea
            return (real == c.real) && (imag == c.imag); 
            // I'm guessing real means [this].real
        }
        return false;
    }
} 
```

所以，我的问题是：“这是什么意思：`Complex c = (Complex) obj`实际上是什么意思”？

我也使用过 python 和 c++，java 对我来说是新的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T10:57:49.420

请参阅我的内联评论。

```
 public class Complex {

...

public boolean equals (Object obj) {
    if (obj instanceof Complex) {    // you first need to check whetever the obhect passed to the equal method is indeed of type "Complex" because i guess what you want here is to compare two Complex objects.
        Complex c =  (Complex) obj   // If the object is complex then you need to treat it as complex so cast it to Complex type in order to compare the "real" and "imag" values of the object.
        return (real == c.real) && (imag == c.imag); 
        // I'm guessing real means [this].real
        // yes, it does.
    }
    return false;
} 
```

}

`type casting`在[此处](http://www.javabeginner.com/learn-java/java-object-typecasting)阅读更多信息

您还可以检查`boxing and unboxing`概念。

希望这会有所帮助，丹

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T10:51:36.213

```
obj instanceof Complex 
```

这意味着 obj 可能是 Complex 或其子类的实例。

```
Complex c =  (Complex) obj 
```

意味着如果它是子类对象，则将其类型转换为复杂类对象

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T10:51:58.120

这意味着将输入`Object`类型转换为`Complex`类型，在此行之后您可以使用`Complex`类中的所有 api。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T11:00:09.847

```
 Complex c =  (Complex) obj 
```

Typecasting Complex 是将对象 obj 类型转换为 Complex 类型的类

可以参考此链接以[获取 C++](http://www.codeproject.com/Articles/447634/A-Beginners-Tutorial-Type-Casting-and-Type-Convers) [对 Java 的参考](http://www.javabeginner.com/learn-java/java-object-typecasting)

如果错了请纠正我

# android - 使用受保护的 void onStop() Android 从其他类（活动）关闭的线程类

> ID：12987644
> 
> 赞同：2
> 
> 时间：2012-10-20T10:47:39.920
> 
> 标签：android, multithreading, class

我在关闭线程时遇到问题。我将使用 onStop、onPause 和 onDestroy 关闭线程。这是我在活动类中的来源：

```
 @Override
protected void onStop(){
   super.onStop();
   finish();
} 

@Override
protected void onPause()  { 
     super.onPause(); 
     finish();
    } 

@Override
public void onDestroy() {
        this.mWakeLock.release();
        super.onDestroy();
} 
```

和线程类：

```
public class GameThread extends Thread {

private SurfaceHolder mSurfaceHolder;
private Handler mHandler;
private Context mContext;
private Paint mLinePaint;
private Paint blackPaint;

//for consistent rendering
private long sleepTime;
//amount of time to sleep for (in milliseconds)
private long delay=1000/30;
//state of game (Running or Paused).
int state = 1;
public final static int RUNNING = 1;
public final static int PAUSED = 2;
public final static int STOPED = 3;

GameSurface gEngine;

public GameThread(SurfaceHolder surfaceHolder, Context context, Handler handler,GameSurface gEngineS){

    //data about the screen
    mSurfaceHolder = surfaceHolder;
    mHandler = handler;
    mContext = context;
    gEngine=gEngineS;
}

//This is the most important part of the code. It is invoked when the call to start() is
//made from the SurfaceView class. It loops continuously until the game is finished or
//the application is suspended.
private long beforeTime;
@Override
public void run() {

    //UPDATE
    while (state==RUNNING) {
        Log.d("State","Thread is runnig");
        //time before update
        beforeTime = System.nanoTime();
        //This is where we update the game engine
        gEngine.Update();

        //DRAW
        Canvas c = null;
        try {
            //lock canvas so nothing else can use it
            c = mSurfaceHolder.lockCanvas(null);
            synchronized (mSurfaceHolder) {
                //clear the screen with the black painter.
                //reset the canvas
                c.drawColor(Color.BLACK);
                //This is where we draw the game engine.
                gEngine.doDraw(c);
            }
        } finally {
            // do this in a finally so that if an exception is thrown
            // during the above, we don't leave the Surface in an
            // inconsistent state
            if (c != null) {
                mSurfaceHolder.unlockCanvasAndPost(c);
            }
        }

        this.sleepTime = delay-((System.nanoTime()-beforeTime)/1000000L);

        try {
            //actual sleep code
            if(sleepTime>0){
                this.sleep(sleepTime);

            }
        } catch (InterruptedException ex) {
            Logger.getLogger(GameThread.class.getName()).log(Level.SEVERE, null, ex);
        }

        while (state==PAUSED){
            Log.d("State","Thread is pausing");
            try {
                this.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
}} 
```

我如何从活动类中关闭线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:56:30.327

您可以将 currentState 变量定义为静态变量，然后您可以通过静态函数访问它以将其状态更改为可以停止或暂停线程的状态，但我认为您可以使用最适合此类工作的 Android 内部组件例如服务，您可以向他们发送消息，或者可以将消息发送回您的活动，或者您可以 AsyncTask 。看看[这个](http://www.vogella.com/articles/AndroidPerformance/article.html)

# apache - 如何在apache中重写网址？

> ID：12987646
> 
> 赞同：1
> 
> 时间：2012-10-20T10:47:49.373
> 
> 标签：apache

我对重写 URL 有一些问题。

我的网站是 www.abc.com/admin/index.php?nam=123 （管理员是文件夹）

如何从 www.abc.com/admin/index.php?name=123 重写为 www.abc.com/admin/123 ？

```
My rewrite: 

RewriteEngine on
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond  %{REQUEST_FILENAME} !-d
RewriteRule  /admin/^(.*)$ index.php?name=$1 [QSA,L] 
```

需要结果：www.abc.com/admin/123

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:50:47.027

尝试这个：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteRule ^admin/([0-9]+)$    index.php?name=$1 [L] 
```

# python - ImportError: Could not import settings

> ID：12987648
> 
> 赞同：35
> 
> 时间：2012-10-20T10:48:05.633
> 
> 标签：python, django

I am trying to develop an sample project in Django and getting errors when I run the syncdb command.

This is how my project structure looks like:

/Users/django_demo/godjango/bookings:

```
manage.py
    registration/
        forms.py
        views.py
        models.py
        urls.py
    bookings/
        settings.py
        urls.py 
```

And my manage.py file is as follows:

```
#!/usr/bin/env python
import os
import sys

if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "bookings.settings")
    from django.core.management import execute_from_command_line
    execute_from_command_line(sys.argv) 
```

And my PYTHONPATH and DJANGO_SETTINGS_MODULE are set as below

```
$echo $DJANGO_SETTINGS_MODULE
bookings.settings

$ echo $PYTHONPATH
/Users/django_demo/godjango/bookings 
```

And my WSGI.py file looks like below:

```
 import os
 os.environ.setdefault("DJANGO_SETTINGS_MODULE", "bookings.settings")
 from django.core.wsgi import get_wsgi_application
 application = get_wsgi_application() 
```

When I run the python manage.py syncdb command, I am getting the following error.

```
Traceback (most recent call last):
  File "manage.py", line 11, in <module>
    execute_from_command_line(sys.argv)
  File "/Users/django_demo/godjango/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Users/django_demo/godjango/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Users/django_demo/godjango/lib/python2.7/site-packages/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/Users/django_demo/godjango/lib/python2.7/site-packages/django/core/management/__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/Users/django_demo/godjango/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Users/django_demo/godjango/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 8, in <module>
    from django.core.management.sql import custom_sql_for_model, emit_post_sync_signal
  File "/Users/django_demo/godjango/lib/python2.7/site-packages/django/core/management/sql.py", line 6, in <module>
    from django.db import models
  File "/Users/django_demo/godjango/lib/python2.7/site-packages/django/db/__init__.py", line 11, in <module>
    if DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "/Users/django_demo/godjango/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/Users/django_demo/godjango/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "/Users/django_demo/godjango/lib/python2.7/site-packages/django/conf/__init__.py", line 95, in __init__
    raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
ImportError: Could not import settings 'bookings.settings' (Is it on sys.path?): No module named unipath 
```

Could someone suggest what I am missing?

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-20T12:10:24.960

The error says `ImportError: Could not import settings 'bookings.settings' (Is it on sys.path?): No module named unipath`

So, is your path `/Users/django_demo/godjango/bookings` within the python-sys.path?

Check it in your shell with:

```
$ python
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> for path in sys.path: print path
... 

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/suds-0.4-py2.7.egg
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.6-intel.egg
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL-1.1.7-py2.7-macosx-10.6-intel.egg
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/spyne-2.8.2_rc-py2.7.egg
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/lxml-3.0alpha2-py2.7-macosx-10.6-intel.egg
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pytz-2012d-py2.7.egg
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django_debug_toolbar-0.9.4-py2.7.egg
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django_social_auth-0.7.7-py2.7.egg
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/python_openid-2.2.5-py2.7.egg
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/oauth2-1.5.211-py2.7.egg
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.4.1-py2.7.egg
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/httplib2-0.7.6-py2.7.egg
/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages
/Library/Python/2.7/site-packages
>>> 
```

If not - you need to add it or simply move your `bookings` app into one of the paths represented in your `sys.path`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-14T14:02:19.910

Modify your wsgi.py file from

```
 import os
 os.environ.setdefault("DJANGO_SETTINGS_MODULE", "bookings.settings")
 from django.core.wsgi import get_wsgi_application
 application = get_wsgi_application() 
```

to

```
import os, sys    
sys.path.append(' /Users/Sreek/django_demo/godjango/bookings')
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "bookings.settings")
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-20T12:15:58.117

The significant part of the traceback here is right at the very end. It says "No module named unipath". You've referred to that somewhere in your code, but you don't seem to have it in your project - it's not part of the standard library, so you'll need to install it somewhere that Python can see it.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-19T18:26:47.980

Alternatively, you can even pass the settings path at run time like so:

```
python manage.py syncdb --settings=bookings.settings --pythonpath=/Users/django_demo/godjango/bookings 
```

This should override the environment variable `(DJANGO_SETTINGS_MODULE)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-16T20:34:44.027

Review hour /etc/apache2/httpd.conf file; you must include the WSGIPythonPath directive, to indicate the folder which contains your Django project (manage.py file), like:

WSGIPythonPath /home/user/Projects/Django/MyProject

also if you used some weird port in your VirtualHost, specify if for listening:

Listen 90

Hope this helps somebody

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-31T17:23:23.160

`ImportError: Could not import settings 'settings' (Is it on sys.path? Is there an import error in the settings file?): No module named setting`

In my case I was using `__init__.py` to import other files and there was an error in it, so settings might actually exist but be flawed.

# c++ - 代码块调试预处理器

> ID：12987650
> 
> 赞同：6
> 
> 时间：2012-10-20T10:48:36.633
> 
> 标签：c++, codeblocks, c-preprocessor

我正在编写一个带有代码块的 C++ 程序，出于调试目的，我需要知道代码块的构建目标是否设置为“DEBUG”或“RELEASE”。

我已经尝试过了：

```
#ifdef DEBUG
    printf("Debug-Message");
#endif 
```

还有这个

```
#ifdef _DEBUG
    printf("Debug-Message");
#endif 
```

但是这些词都没有定义。我是否必须自己定义 DEBUG 并更改它，每次更改 Building-Target 时，还是有一个我不知道的词？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T11:46:43.040

> 我是否必须自己定义 DEBUG 并更改它，每次更改 Building-Target 时，还是有一个我不知道的词？

我不知道 Code::Blocks 是否默认设置了什么。但是，如果您定义自己的#defines

```
Project->Build options...->[Debug|Release]->#defines 
```

在构建目标（DEBUG 或 RELEASE）之间切换时，您不必更改它们。它允许您定义特定于 Debug 构建的值，以及特定于 Release 构建的值。

为了避免每次为每个新项目手动输入它，您可以只使用 Debug/Release #defines 创建一个小项目并将其保存为**项目模板**，然后从该项目模板创建新项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T10:51:52.283

通常的方法，如[assert(3)](http://linux.die.net/man/3/assert)手册页和习惯（`<assert.h>`在 C 或`<cassert>`C++ 中）所建议的那样，是`NDEBUG`在命令行定义`gcc -Wall -DNDEBUG`非调试编译（例如用 编译）。在`Makefile`你可以`CPPFLAGS += -DNDEBUG`在发布模式下（并`g++ -Wall -g`在调试模式下编译）。

我自己的习惯可能是有类似的东西

```
#ifndef NDEBUG
#define dbgprintf(Fmt,...) do{fprintf(stderr,"%s:%d:" Fmt "\n", \
                               __FILE__, __LINE__, \ 
                              ##__VA_ARGS__);}while(0)
#else
#define dbgprintf(Fmt,...) do{}while(0)
#endif 
```

在一个通用的头文件中，并`dbgprintf("i=%d", i)`在代码的其他地方使用。请注意，我在宏参数上使用了常量字符串连接`Fmt`，我在它后面附加了一个常量换行符，并且我的调试输出包含源文件名和行号（`__func__` 如果你愿意，你也可以使用）。在纯 C++ 代码中，我可能有

```
#ifndef NDEBUG
#define DBGOUT(Out) do{std::out << __FILE__ << ":" << __LINE__ \
                       << " " << Out << std::endl;}while(0)
#else
#define DBGOUT(Out) do{}while(0)
#endif 
```

并使用对我的类型`DBGOUT("i=" << i)`使用特定定义的优势。`operator <<`

# php - 通过 cURL 请求可靠地检测调用者域？

> ID：12987652
> 
> 赞同：0
> 
> 时间：2012-10-20T10:48:46.300
> 
> 标签：php, web-services, security, curl, dns

好的，所以服务器端的安全性不是我的强项。基本上，我正在构建一项服务，用户只能在他们注册时规定的域上使用（通过 SDK）。

SDK 通过 PHP 中的 cURL 调用我的 Web 服务。

我是否认为我无法可靠地检测到调用者域是正确的，即强制它与他们在注册时规定的域相同？

cURL 当然会通过标头发送此信息，但标头总是可以（？）被伪造。

是否有更好的行动方案来强制执行此类事情的域？

（注意，我也已经在使用 API 密钥了——我也想限制域）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:54:25.230

您从 cURL 调用中获得的唯一信息是`REMOTE_ADDR`环境变量中的远程 IP。

AFAIK，这*很难*有意义地伪造（即当调用者想要实际接收数据时。）

因此，如果您可以忍受将客户限制为*IP*，则通过检查该变量应该是相当安全的。

但是，当然，这使您无法控制他们将数据用于哪个域。这是不可能的——一个IP可以用于多个域。

但是，您可以尝试将域名解析为其 IP，并将其与`REMOTE_ADDR`您获得的 IP 进行比较。

总的来说，我认为这不是一个好主意。见我上面的评论。

# android - 如何访问 ListView android 中的视图项？

> ID：12987654
> 
> 赞同：-1
> 
> 时间：2012-10-20T10:49:01.143
> 
> 标签：android, android-listview

我有`ListView`。我能够成功地填充它，`ListView`但现在想要的是当用户长按`ListItem`它时应该使一个按钮可见，我在填充时使其不可见`ListView`。

这是我尝试过的片段。

mItemListView.setOnItemLongClickListener(new OnItemLongClickListener() {

```
 @Override
        public boolean onItemLongClick(AdapterView<?> adapterview, View arg1,
                int arg2, long arg3) {
            LinearLayout view=(LinearLayout) mItemListView.getChildAt(arg2);
            view.getChildAt(0).setVisibility(View.VISIBLE);
            return false;
        }
    }); 
```

我的适配器正在扩展`BaseAdapter`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T10:53:08.800

使用传递给您的`onItemLongClick(AdapterView<?> adapterview, View arg1, int arg2, long arg3)`方法的视图。例如

```
mItemListView.setOnItemLongClickListener(new OnItemLongClickListener() {

    @Override
    public boolean onItemLongClick(AdapterView<?> adapterview, View arg1,
            int arg2, long arg3) {
          arg1.setVisibility(View.VISIBLE);
          return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T10:55:31.190

我假设此按钮是填充在每个列表项中的线性布局中的布局的一部分？在这种情况下，使用`view.findViewById(id_of_your_button)`并获取按钮视图并将其设置为**可见**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T10:57:28.577

您必须在适配器上调用 notifyDataSetChanged() 才能重绘列表。但是要小心，如果您在适配器的 getView 方法中将按钮设置为不可见，这会将可见性反转回不可见。

您可能应该使用一个单独的数组来保存每个按钮的可见性状态，切换该状态，并在绘制时使用它来设置按钮状态。

# iphone - 从 id 中找到 objectType

> ID：12987656
> 
> 赞同：0
> 
> 时间：2012-10-20T10:49:29.637
> 
> 标签：iphone, objective-c, ios

我没有得到布尔类型？

这是我的代码，我做错了什么？

```
id val = [ dict objectForKey:key ];

if ([ val isKindOfClass:[ NSString class ] ] )
   print "string";
else if( [ val  isKindOfClass:[ NSNumber class ] ] )
   print "number";
else if( [ val  isKindOfClass:[ BOOL class ] ] )
   print "bool"; 
```

没有得到布尔类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:58:07.933

您不能直接保存`BOOL`价值，`NSDictionary`因为它不是对象。因此，首先您必须将其更改，`NSNumber`然后将其保存，`NSDictionary`然后进行比较`isKindOfClass:[NSNumber Class]`而不是比较`[BOOL class]`.

例子：-

```
BOOL value = YES;
NSDictionary *dict = [[NSDictionary alloc]initWithObjectsAndKeys:[NSNumber numberWithBool:value],@"Bool", nil];

id val = [dict valueForKey:@"Bool"];
if([val isKindOfClass:[NSNumber class]])
{
    //NSNumber Class
} 
```

**编辑：**

您不能直接将`BOOL`值转换为`NSString`。如果您想要格式`BOOL`的价值，`NSString`您将不得不制作自己的方法。这是一个使用`macro`.

定义这个`macro`你想在哪个类中转换一个`BOOL`值`NSString`。

```
#define NSStringFromBOOL(aBOOL) aBOOL? @"YES" : @"NO" 
```

然后简单地称之为 -

```
NSString *bool_string = NSStringFromBOOL(YES);
NSLog(@"%@",bool_string); 
```

它将打印`YES`而不是“1”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T10:53:27.443

`BOOL`不是类也不是 Objective-C 对象类型。它是一个标量，从 C 原始类型 ( `signed char`) 类型化而来。你不能这样使用它。

# java - 避免 spring cglib 代理的问题

> ID：12987658
> 
> 赞同：7
> 
> 时间：2012-10-20T10:49:57.023
> 
> 标签：java, spring, proxy, cglib

在 spring 中使用 cglib 代理会导致：

a) 构造函数的双重调用

b) 不允许拦截从另一个方法调用的方法

但是为什么spring创建一个bean然后是一个代理？是否可以动态生成扩展指定 bean 类的类，然后只调用一次构造函数？这将解决公共和受保护方法的a）和b）。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T11:05:24.247

好问题。我认为这是由于 Spring 引导应用程序上下文的方式：它首先创建所有原始 bean，然后应用后处理器，例如添加 AOP（包括事务）。这种分层架构需要先创建普通 bean，然后再包装它。有人可能会争辩说，这种方法遵循*组合优于继承的*原则。

另请注意，*a)*应该不是问题。类不应在构造函数中执行初始化，而应在`@PostConstruct`方法中执行 - 该方法仅被调用一次。另一方面，这会导致另一个问题：

c) 不能将构造函数注入与 CGLIB 代理一起使用，请参阅[SPR-3150](https://jira.springsource.org/browse/SPR-3150)

但我理解你的沮丧。猜猜唯一有效的解决方法是对我们完整的 AspectJ 编织。

# doctrine-orm - Doctrine 2 - 多对一延迟加载中的多对一失败

> ID：12987663
> 
> 赞同：1
> 
> 时间：2012-10-20T10:50:55.493
> 
> 标签：doctrine-orm, lazy-loading

我的问题与 Doctrine 2 的延迟加载功能有关。

假设我有这两个实体：

*   区域
*   场地

以下是快速规格：

*   一个区域可以包含其他区域（子区域...）
*   场地仅位于 1 个区域
*   Area::getFullName() 应输出“父区域名称（如果有）> 区域名称”

我的 PHP 实体是：

```
class Area extends AbstractEntity {
/**
 * @ORM\ManyToOne(targetEntity="Area", inversedBy="children")
 */
private $parent;

public function getFullName() {
    if (!isset($this->fullName)) {
        $this->fullName = ($this->getParent() ? $this->getParent()->name . ' > ' : '') . $this->name;
    }
    return $this->fullName;
}

class Venue extends AbstractEntity {

/** 
 * @ORM\ManyToOne(targetEntity="Area")
 */
private $area; 
```

假设“Paris”区域包含一个名为“Center”的子区域

如果我打电话：

```
$area = $repoArea->findByUrl("paris/center")
echo $area->getFullName();
// --> "Paris > Center" 
```

到现在为止还挺好。

但现在让我们说，“Fouquet's”餐厅是巴黎市中心的一个地点：

```
$venue = $repoVenue->findByName("Fouquet's");
echo $venue->getArea()->getFullName()
// --> " > Center" 
```

不输出父区名称（-->“Paris”）...

```
$this->fullName = ($this->getParent() ? $this->getParent()->name . ' > ' : '') . $this->name; 
```

但父区域代理对象不为 NULL。它只是没有初始化。因此调用属性“名称”返回 NULL。

似乎“双重”（或“多对一的多对一”......）延迟加载失败。就像是：

```
$venue->getArea()->get(Parent)Area()->name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:10:39.597

> 使用 Doctrine 时，属性永远不应该是公开的。这将导致延迟加载在 Doctrine 中的工作方式出现错误。

**资料来源：** [教义入门](http://docs.doctrine-project.org/en/latest/tutorials/getting-started.html#a-first-prototype)

* * *

基本上，您应该`getName()`向您的类添加一个方法`Area`并使用`->getName()`，而不是`->name`这样 Doctrine 可以拦截调用并加载代理对象的数据。;-)

# c# - 在代码隐藏中动态添加文本后，文本框被禁用

> ID：12987671
> 
> 赞同：1
> 
> 时间：2012-10-20T10:51:41.570
> 
> 标签：c#, .net, sql, linq

不能完全弄清楚发生了什么，但背景是我在网页中动态添加表格行，并且一些单元格包含下拉菜单等控件。其中一列将大小拉入其中。

但是，我遇到问题的列是下一列，它从先前的下拉列表中获取文本并显示适当的价格。但是，在执行 htis 时，正在创建的文本框似乎变成了一个标签，因为我无法选择或调整已放入其中的文本。

```
 var gotPrice =(from a in getPrice.Sizes
                     where a.Size1 == Size.SelectedValue
                     select a).First();

         TextBox Price = new TextBox();
            Price.Width = 100;
            PriceField.Controls.Add(Price);
            PriceField.Text = gotPrice.RackRate.ToString(); 
```

我试过然后调用 .Enabled 但文本框仍然不可编辑。

任何帮助表示赞赏。

# group-by - 数据表 C# ASP.NET 中的分组和小计

> ID：12987677
> 
> 赞同：-1
> 
> 时间：2012-10-20T10:52:27.203
> 
> 标签：group-by, grouping, subtotal

我有一个数据表：

```
 COLUMN:  City    Deposittype  DepositAmount                  
                ROWS :  city1     new          100
                        city1     new          200
                        city2     old          200
                        city2     old          100
                        city2     new          200
                         city3    new          100 
```

想按城市分组，计算指定存款类型的存款金额总和。

例如，对于条件 depositType= new

我想要一行

```
 city1 city2 city3
                300   200   100 
```

我想要具有特定存款类型的按城市分组的存款金额总和。即结果行应该将city1 city2 city3 作为列名，在该列名下，指定贷款类型的“Depositamounts”总和说Deposittype = new。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:01:15.993

```
SELECT City, SUM(DepositAmount) FROM myTable
WHERE Deposittype = 'new'
GROUP BY City 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:01:52.783

```
SELECT  
   (
    SELECT SUM(DepositAmount) FROM myTable 
    WHERE Deposittype = 'New' AND City = 'City1'
   ) AS City1,
   (
    SELECT SUM(DepositAmount) FROM myTable 
    WHERE Deposittype = 'New' AND City = 'City2'
   ) AS City2,
   (
    SELECT SUM(DepositAmount) FROM myTable 
    WHERE Deposittype = 'New' AND City = 'City3'
   ) AS City3

FROM    myTable 
```

# java - 如何在 Java 项目中使用 Project Lombok

> ID：12987678
> 
> 赞同：2
> 
> 时间：2012-10-20T10:52:29.143
> 
> 标签：java, lombok

我想特别尝试[龙目岛](http://projectlombok.org/)`@NoArgsConstructor`和`@Getter`，`@Setter`

但是，当我尝试使用它并执行以下操作时：

```
User user = new User(); // error, even if User have @NoArgsConstructor annotation 
```

我在这里错过了什么吗？

**错误：**

```
The constructor User() is undefined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:37:35.650

您是否安装了 Lombok 并将其添加到您的 pom 文件中？

见：http: [//jnb.ociweb.com/jnb/jnbJan2010.html#installation](http://jnb.ociweb.com/jnb/jnbJan2010.html#installation)

# php - PHP：从编码解码？

> ID：12987681
> 
> 赞同：-1
> 
> 时间：2012-10-20T10:52:56.647
> 
> 标签：php, base64, decode, encode

我正在使用可以选择对链接进行编码的 Flash 播放器。我可以使用下面的代码成功地对它们进行编码，但我找不到解码回来的方法，而且它们不提供该选项。

链接正在与播放器一起使用，当我需要编辑它们时，我的问题就开始了。我看到的不是普通链接，而是编码版本。

```
<?php
    function uppod_enc_replace($str){
            $uppod_tmp_a=Array('G','d','R','0','M','Y','4','v','6','u','t','i','f','c','s','l','B','5','n','2','V','Z','J','m','L','=');
            $uppod_tmp_b=Array('1','w','Q','o','9','U','a','N','x','D','X','7','z','H','y','3','e','g','T','W','b','8','k','I','p','r');
            $uppod_tmp=$str;
            $uppod_tmp_from=$uppod_tmp_a;
            $uppod_tmp_to=$uppod_tmp_b;

            for($i=0;$i<sizeof($uppod_tmp_from);$i++){

                $uppod_tmp=uppod_enc_replace_ab($uppod_tmp_from[$i],$uppod_tmp_to[$i],$uppod_tmp);
            }
            return $uppod_tmp;
    }
    function uppod_enc_replace_ab($a,$b,$tmp){
            $tmp=preg_replace('/'.$a.'/','___',$tmp);
            $tmp=preg_replace('/'.$b.'/',$a,$tmp);
            $tmp=preg_replace('/___/',$b,$tmp);
            return $tmp;
    }
    function uppod_encode($str,$lkey=''){
            $tmp=uppod_enc_replace(base64_encode($str));
            if($lkey!=''){
                    $tmpn=rand(0,strlen($tmp));
                    $tmp=substr($tmp,0,$tmpn).uppod_enc_replace(base64_encode($lkey)).substr($tmp,$tmpn);
            }
            return $tmp;
    }
?> 
```

到目前为止我已经尝试过：

```
switching places 
                    $uppod_tmp_from=$uppod_tmp_a;
                    $uppod_tmp_to=$uppod_tmp_b;
changing base64_encode to base64_decode 
```

测试：

```
stackoverflow.com
encodes to:
HlQhUWXNwIbs8I6NwsgjVWor

changing base64_encode to base64_decode and switching places with $uppod_tmp_from=$uppod_tmp_a; $uppod_tmp_to=$uppod_tmp_b;
decodes to:
n!RB▒▒▒▒▒▒#Yj+[ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:24:04.490

通过稍微修改`uppod_enc_replace`功能：

```
function uppod_enc_replace($str, $direction = 'encode'){
    $uppod_tmp_a=Array('G','d','R','0','M','Y','4','v','6','u','t','i','f','c','s','l','B','5','n','2','V','Z','J','m','L','=');
    $uppod_tmp_b=Array('1','w','Q','o','9','U','a','N','x','D','X','7','z','H','y','3','e','g','T','W','b','8','k','I','p','r');
    $uppod_tmp=$str;
    if($direction == 'encode'){
        $uppod_tmp_from = $uppod_tmp_a;
        $uppod_tmp_to = $uppod_tmp_b;
    }else{
        $uppod_tmp_to = $uppod_tmp_a;
        $uppod_tmp_from = $uppod_tmp_b;
    }

    for($i=0;$i<sizeof($uppod_tmp_from);$i++){
        $uppod_tmp=uppod_enc_replace_ab($uppod_tmp_from[$i],$uppod_tmp_to[$i],$uppod_tmp);
    }
    return $uppod_tmp;
} 
```

解码函数将如下所示：

```
function uppod_decode($str, $lkey = ''){
    if($lkey!=''){
        $eKey = uppod_enc_replace(base64_decode($lkey));
        $str = str_replace($eKey, '', $str);
    }
    return base64_decode(uppod_enc_replace($str, 'decode'));
} 
```

测试用例：

```
$url = 'http://www.google.com/';

$encoded = uppod_encode($url);
$decoded = uppod_decode($encoded);

var_dump($decoded);

$key = base64_encode('p45sw0rd');

$encoded2 = uppod_encode($url, $key);
$decoded2 = uppod_decode($encoded2, $key);

var_dump($decoded2);

// outputs:
// string(22) "http://www.google.com/"
// string(22) "http://www.google.com/" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:06:01.707

编码脚本正在做：

1.  base64_encode()
2.  切换一些字母

因此，要对其进行解码，您需要：

1.  换回字母
2.  base64_decode() 之后

# c++ - 有效地使用带有数组的 KMP 来计算词频计数

> ID：12987682
> 
> 赞同：0
> 
> 时间：2012-10-20T10:53:03.237
> 
> 标签：c++, c

我想计算一篇文章的词频。

我的想法是首先创建一个结构数组

```
 struct{
       char[WORD_SIZE]
 }data[MAX_WORD_NUMBER]; 
```

然后读取每个字符然后确定

```
isalpha(); 
```

然后通过转换为小写

```
tolower(); 
```

然后将一个单词存储到每个结构中。

然后为每个单词制作失败函数，

然后通过调用它来测试每个单词。

1.但我不知道如何计算由于重复引起的频率。

（我以为每次读插入词都可以比较一下，但是效果太差了，有没有更高效的方法？）

2.我认为我的方法调用函数的时间太多了。

如何更有效地使用 KMP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T11:04:15.500

您正在使用 C 或 C++ 编程？你用两者都标记了你的问题。

`std::map`假设您使用的是 C++，那么您将在数词方面做得更好。像这样的东西

```
#include <map>
#include <string>

std::map<std::string, int> data;

std::string word;

data[word] = 0; // set word count to zero
data[word]++; // increment word count

// print out all the word counts
for (std::map<std::string, int>::iterator i = data.begin();
  i != data.end(); ++i)
{
  cout << "word " << i->first << " occurs " << i->second << "times\n";
} 
```

如果您为工作选择正确的工具，这项任务将**变得容易得多。**当然，如果您使用 C 进行编程，那么这些都无济于事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:17:17.723

如果您打算在 C 中执行此操作，请像这样扩展您的结构：

```
struct {
    char[WORD_SIZE];
    int count;
} data[MAX_WORD_NUMBER]; 
```

然后每当你在这个结构数组中存储一个新单词时，也将相应的设置`count`为 0。

然后，如果您发现一个单词已经在数组中，请增加相应的`count`.

在程序结束时打印计数。

# c# - 线程不在后台运行

> ID：12987684
> 
> 赞同：0
> 
> 时间：2012-10-20T10:53:11.270
> 
> 标签：c#, multithreading, windows-phone-7, xna

我正在尝试在新线程中播放声音，以便在播放时其他声音不会中断它。

但它不起作用。尽管新线程在后台运行（我假设），但随后播放的声音会中断它。

```
ParameterizedThreadStart pts;
        Thread t;

private void playStreak(Object p)
        {
            SoundEffect sound = SoundEffect.FromStream(Application.GetResourceStream(new Uri("SOUNDFX/BOMB.wav", UriKind.Relative)).Stream);
            SoundEffectInstance instance = sound.CreateInstance();
            instance.Play();
        }

private void playAsThread()
{
     pts = new ParameterizedThreadStart(playStreak);
     t = new Thread(pts);
     t.Name = "Streak sound!";
     t.Start();
} 
```

我想播放各种声音而不会互相打断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:06:07.573

我认为您不需要使用线程。您可以同时拥有 16 个 SoundEffectInstance。还不够吗？

检查[这个例子](http://go.microsoft.com/fwlink/?LinkID=207868)。

他们只持有三个`SoundEffect`实例。

```
 private SoundEffect coyoteSound;
    private SoundEffect birdSound;
    private SoundEffect ambienceSound; 
```

并通过某些事件播放它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:00:35.647

如果确实需要使用线程，请使用[BackgroundWorker](http://www.dotnetperls.com/backgroundworker)。这很好，很容易！

# asp.net - http:// 类型的未知 http 请求 /cache/<32 位字母数字键>

> ID：12987688
> 
> 赞同：3
> 
> 时间：2012-10-20T10:53:45.197
> 
> 标签：asp.net, .net, iis-7.5, httpmodule

我收到很多具有这种结构的传入请求：

> //域名/缓存/22092e9b25c40809dfb94b6179166b26。

我正在运行一个从 IIS 7.5 提供的 .NET 4.0 网站。很多这些 URL 没有引荐来源 URL，并且使用不同的 32 位字母数字密钥随机出现。而且我的网站上没有任何资源，例如“.../cache/...”。

我只是想消除此类请求，并想了解这些请求的来源。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T08:15:24.007

Chrome 浏览器似乎有一个错误（问题 132059:) [http://code.google.com/p/chromium/issues/detail?id=132059](http://code.google.com/p/chromium/issues/detail?id=132059) 对于特定版本（19.0.1084.52-2 19.0.1084.56 不是 18\. xx)

但是：我在我的服务器上发现，那些 CHROME 用户仍在发送这些请求，即使使用较新的 chrome 版本。(铬/22.0.1229.94)

**2012-10-21 的日志**

> 188.6.141.189 - - [21/Oct/2012:08:51:04 +0100] "GET /{{MYPAGE}}/cache/99e668d4c3ad55d2f2c876540bf3e7e6 HTTP/1.1" 200 16307 "http://{{MYSERVER}}/{ {MYPAGE}}" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4"
> 
> 95.233.53.220 - - [21/Oct/2012:08:55:01 +0100] "GET /cache/4d8f7265aa32291438a3a9b9e158f843 HTTP/1.1" 404 1376 "http://{{MYSERVER}}/{{MYPAGE}}" " Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4"
> 
> 80.99.63.141 - - [21/Oct/2012:08:56:34 +0100] "GET /{{MYPAGE}}/cache/575c44ac6fcb338b52bac212665cb165 HTTP/1.1" 200 16307 "http://{{MYSERVER}}/{ {MYPAGE}}" "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4"
> 
> 78.1.148.185 - - [21/Oct/2012:08:56:41 +0100] "GET /{{MYPAGE}}/cache/3ee13ff1e23d8873ddb0e0042c6a3910 HTTP/1.1" 200 16229 "http://{{MYSERVER}}/{ {MYPAGE}}" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4"
> 
> 80.180.181.64 - - [21/Oct/2012:09:00:41 +0100] "GET /cache/c4f56b1faa9ea9bb7789728409bfc21f HTTP/1.1" 404 1376 "http://{{MYSERVER}}/{{MYPAGE}}" " Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4"
> 
> 79.36.123.193 - - [21/Oct/2012:09:05:19 +0100] "GET /cache/11ff17cacc601d7ee9790cb2933e86c9 HTTP/1.1" 404 1376 "http://{{MYSERVER}}/{{MYPAGE}}" " Mozilla/5.0 (Windows NT 6.0) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4"
> 
> 5.102.21.234 - - [21/Oct/2012:09:06:54 +0100] "GET /{{MYPAGE}}/cache/fc8ccc9bd6e960b7e4f4af0165e839a6 HTTP/1.1" 200 16386 "http://{{MYSERVER}}/{ {MYPAGE}}" "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4"
> 
> 149.210.41.194 - - [21/Oct/2012:09:07:05 +0100] "GET /{{MYPAGE}}/cache/4e4055517809a8bbc8de1acb4ee9e560 HTTP/1.1" 200 15998 "http://{{MYSERVER}}/{ {MYPAGE}}" "Mozilla/5.0 (Windows NT 6.0) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4"

有可能，

1] Chrome 仍然有我提到的这个错误。

2] 一些 Chrome 插件/扩展正在发送这些请求。

# wcf - 使用 WCF 构建 Web 服务以供使用 WSDL 的现有 Java 客户端使用

> ID：12987692
> 
> 赞同：0
> 
> 时间：2012-10-20T10:53:52.047
> 
> 标签：wcf, wsdl, contract-first

我有一个现有的 Java 客户端，我需要在 .NET 4.0 中构建一个 Web 服务。该接口已经使用 WSDL 文件定义，因此我创建了一个类库并使用[WSCF.blue](http://wscfblue.codeplex.com/)生成了服务器端存根（我也尝试了 svcutil，但没有成功）。WSCF.blue 负责引用并添加文件（很棒的工具:-)）所以我只用一些代码替换了生成的 System.NotImplementedException。然后我将结果托管在一个 ASP.NET 开发服务器中。

我想我需要一些额外的步骤，因为我得到了著名的“在服务'Hello' 实现的合同列表中找不到合同名称'WsdlWebService.IHello'。” 在浏览器中查找服务时（请参阅[WCF Contract Name 'IMyService' could not be found?](https://stackoverflow.com/questions/691746/wcf-contract-name-imyservice-could-not-be-found)）。但这里是一个 ServiceContractAttribute，我希望它可以完成这项工作。

如果有人能指出我所缺少的，我将不胜感激......

这是生成的接口和实现：

```
 namespace WsdlWebService
    {
        [System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
        [System.ServiceModel.ServiceContractAttribute(Namespace="http://webservice.com", ConfigurationName="IHello")]
        public interface IHello
        {
            [System.ServiceModel.OperationContractAttribute(Action="http://webservice.com/IHello/helloName", ReplyAction="http://webservice.com/IHello/helloNameResponse")]
            [System.ServiceModel.XmlSerializerFormatAttribute(SupportFaults=true)]
            [return: System.ServiceModel.MessageParameterAttribute(Name="helloNameReturn")]
            string helloName(string name);
        }

        [System.ServiceModel.ServiceBehaviorAttribute(InstanceContextMode=System.ServiceModel.InstanceContextMode.PerCall, ConcurrencyMode=System.ServiceModel.ConcurrencyMode.Single)]
        public class Hello : IHello
        {
            public virtual string helloName(string name)
            {
                return "Hello world from (via wsdl extraced server) " + name + "!";
            }
        }
    } 
```

这是 web.config：

```
 <?xml version="1.0"?>
    <configuration>
      <system.web>
        <compilation debug="false" targetFramework="4.0" />
      </system.web>
      <system.webServer>
        <modules runAllManagedModulesForAllRequests="true"/>
      </system.webServer>
      <system.serviceModel>
        <behaviors>
          <serviceBehaviors>
            <behavior name="MyServiceTypeBehaviors">
              <serviceMetadata httpGetEnabled="true" />
              <serviceDebug includeExceptionDetailInFaults="false" />
            </behavior>
          </serviceBehaviors>
        </behaviors>
        <services>
          <service name="WsdlWebService.Hello"
                 behaviorConfiguration="MyServiceTypeBehaviors">
            <endpoint address="" binding="basicHttpBinding"
                 contract="WsdlWebService.IHello"/>
            <endpoint contract="IMetadataExchange"
               binding="mexHttpBinding" address="mex"/>
          </service>
        </services>
      </system.serviceModel>
    </configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:09:38.067

我只是猜测，因为我没有遇到该错误，但我注意到您`ConfigurationName = "IHello"`在服务合同上设置了，但您在配置中将其称为“WsdlWebService.IHello”。我至少会检查配置名称是原子的还是仍然只是命名空间的一部分。

# perl - 如何使用 $mech->proxy 设置代理服务器凭据

> ID：12987693
> 
> 赞同：-1
> 
> 时间：2012-10-20T10:53:59.143
> 
> 标签：perl, proxy, web-scraping

我正在制作一个爬虫脚本。为了避免我的脚本被阻止，我正在使用一个代理服务，它给了我用户名和密码（我以前没有做过）。如何在我的代码中实现这一点是一个问题。我在做

我的 $proxy = '64.120.237.206:8080';

$mech->proxy('http', "http://$proxy");

我的问题是我应该如何以及在哪里设置代理服务提供商提供的用户名和密码。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:16:36.810

您想查看[LWP::UserAgent](https://metacpan.org/module/LWP%3a%3aUserAgent)类，它是 WWW::Mechanize 的基类。它将解释您可以为代理用户名和密码设置环境变量。

此外，[lwpcook](https://metacpan.org/module/lwpcook#PROXIES)页面有一个部分解释了如何将用户名和密码设置为 proxy() 命令的一部分。但我不建议这样做，因为将密码放入源代码通常是个坏主意。

* * *

2012-12-02：创建一组代理 URL/端口对，使用随机数生成器选择一个。

# c# - C#/WPF：在启动时在单独的线程上创建和运行事件

> ID：12987697
> 
> 赞同：3
> 
> 时间：2012-10-20T10:54:27.510
> 
> 标签：c#, wpf, naudio

我试图避免在 stackoverflow 上问一些似乎微不足道的问题。上次我问一个问题时，我得到了很多否定的回答，所以我想我会尝试自己解决这个问题。所以大概一个月，两本书，还有一些视频教程之后，我还是很困惑。:)

我的 MainWindow.xaml.cs 类的第 39 行根据我的调试器被调用，但注释 30 或 31 似乎没有触发 UI 上的任何内容，有一次它确实触发了，但它也给了我一个运行时错误。在被难住了几周之后，我休息了一下，开始做其他事情，所以我不确定我做了什么来摆脱运行时错误。所以，现在我正在寻求帮助，请:)

**更新**

MainWindow.xaml.cs 第 45 行返回的异常：

> “对象，因为不同的线程拥有它。”

**我的 MIDI 课：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NAudio.Midi;

namespace StaveHelper
{
public sealed class  MIDIMain 
{
    private static MIDIMain midiMain = null;
    public static int noteOnNumber;
    public static int noteOffNumber;
    public MidiIn midiIn;
    public bool noteOn;
    private bool monitoring;
    private int midiInDevice;

    private MIDIMain()
    {
        GetMIDIInDevices();
    }

    public static MIDIMain GetInstance()
    {
        if (null == midiMain)
        {
            midiMain = new MIDIMain();
        }
        return midiMain;
    }

    public string[] GetMIDIInDevices()
    {
        //Get a list of devices
        string[] returnDevices = new string[MidiIn.NumberOfDevices];

        //Get the product name for each device found
        for (int device = 0; device < MidiIn.NumberOfDevices; device++)
        {
            returnDevices[device] = MidiIn.DeviceInfo(device).ProductName;
        }
        return returnDevices;
    }

    public void StartMonitoring(int MIDIInDevice)
    {
        if (midiIn == null)
        {
            midiIn = new MidiIn(MIDIInDevice);
        }
        midiIn.Start();
        monitoring = true;
    }

    public void midiIn_MessageReceived(object sender, MidiInMessageEventArgs e)
    {
        //int noteNumber;
        // Exit if the MidiEvent is null or is the AutoSensing command code  
        if (e.MidiEvent != null && e.MidiEvent.CommandCode == MidiCommandCode.AutoSensing)
        {
            return;
        }

        if (e.MidiEvent.CommandCode == MidiCommandCode.NoteOn)
        {
            // As the Command Code is a NoteOn then we need 
            // to cast the MidiEvent to the NoteOnEvent  
            NoteOnEvent ne;
            ne = (NoteOnEvent)e.MidiEvent;
            noteOnNumber = ne.NoteNumber;
        }

        if (e.MidiEvent.CommandCode == MidiCommandCode.NoteOff)
        {
            NoteEvent ne;
            ne = (NoteEvent)e.MidiEvent;
            noteOffNumber = ne.NoteNumber;
        }        
    }

    //// send the note value to the the MainWindow for display
    //public int sendNoteNum(int noteNumber)
    //{
    //    noteOnNumber = noteNumber;
    //    noteOn = true;
    //    return noteOnNumber;
    //}
} 
```

}

**我的 MainWindow.xaml.cs**

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using NAudio.Midi;
using System.Threading;
using System.Windows.Threading;

namespace StaveHelper
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public  partial class MainWindow : Window
{
    Config config;
    MIDIMain midiMain;

    public delegate void mon(object sender, MidiInMessageEventArgs e);
    public MainWindow()
    {
        this.InitializeComponent();

        // Insert code required on object creation below this point.
        midiMain = MIDIMain.GetInstance();
        config = new Config();
        config.load_MIDIIn_Devices();
        //Thread t = new Thread(monitorNotes);
        midiMain.midiIn.MessageReceived += new EventHandler<MidiInMessageEventArgs>(monitorNotes); 
    }

    public void monitorNotes(object sender, MidiInMessageEventArgs e)  //LINE 39: MONITOR NOTES
    {

        switch ( MIDIMain.noteOnNumber)
        {
            case 30:
                C3.Opacity = 100;               //LINE 45: "The calling thread cannot access this 
                C3Dot.Opacity = 100;            //object because a different thread owns it."
                break;
            case 31:
                D3Dot.Opacity = 100;
                break;
        }
    }

    ~MainWindow()
    {

    }

    private void btnConfig_Click(object sender, RoutedEventArgs e)
    {
        config.Show();
    }

}
} 
```

所以看来答案是要改变：

```
switch ( MIDIMain.noteOnNumber)
    {
        case 30:
            C3.Opacity = 100;               //LINE 45: "The calling thread cannot access this 
            C3Dot.Opacity = 100;            //object because a different thread owns it."
            break;
        case 31:
            D3Dot.Opacity = 100;
            break;
    }
} 
```

进入

```
switch ( MIDIMain.noteOnNumber)
        {
            case 60:
                C3.Dispatcher.BeginInvoke(
                    System.Windows.Threading.DispatcherPriority.Normal,
                    new System.Windows.Threading.DispatcherOperationCallback
                        (delegate
                        {
                            C3.Opacity = 100;
                            C3Dot.Opacity = 100;
                            MIDIMain.noteOffNumber = -1;
                            return null;
                        }), null);
                 break;
            case 61:
                D3Dot.Dispatcher.BeginInvoke(
                    System.Windows.Threading.DispatcherPriority.Normal,
                    new System.Windows.Threading.DispatcherOperationCallback
                        (delegate
                        {
                            D3Dot.Opacity = 100;
                            D3Dot.Opacity = 100;
                            MIDIMain.noteOnNumber = -1;
                            return null;
                        }), null);
                break;
        } 
```

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T08:24:27.253

您的例外是因为您试图从后台线程修改 WPF GUI 组件。您需要使用调度程序。这里有很多关于堆栈溢出的问题可以对此提供帮助。例如，您可以使用[此答案中的代码](https://stackoverflow.com/a/3095107/7532)

```
yourControl.Dispatcher.BeginInvoke(
   System.Windows.Threading.DispatcherPriority.Normal, 
   new System.Windows.Threading.DispatcherOperationCallback(delegate
   {
        // update your GUI here    
        return null;
   }), null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:44:22.380

如果您查看该`StartMonitoring()`方法 - 如果`midiIn`为 null 它创建一个新实例然后调用`Start()`，但在这种情况下没有人订阅，`MessageReceived`所以在这种情况下您似乎忘记订阅`midiIn.MessageReceived`事件并且`midiIn_MessageReceived`永远不会调用方法。所以`noteOnNumber`iremains 未分配，因为仅在此方法 ( ) 中，我看到了一个为变量`midiIn_MessageReceived`分配值的代码。`noteOnNumber`

尝试更新 StartMonitoring() 方法：

```
if (midiIn == null)
{
   midiIn = new MidiIn(MIDIInDevice);
   midiIn.MessageReceived += midiIn_MessageReceived;
} 
```

# asp.net - 如何在页面加载时在选项卡容器中的特定选项卡面板上重定向？

> ID：12987701
> 
> 赞同：0
> 
> 时间：2012-10-20T10:54:42.577
> 
> 标签：asp.net, tabs, tabpanel

我正在使用 Ajax Tabcontainer 和 Tab 面板。有 4 个选项卡。不同的用户可以使用这个应用程序。基于某些条件，我希望用户在页面加载时重定向到特定的选项卡。

我们怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:07:55.370

您可以将`TabControl.ActiveTabIndex`与您的标签索引号一起使用。这将根据您的情况直接在该标签页上重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:00:05.017

用于`ActiveTabIndex`选择`page_load`事件中所需的选项卡。

**[更多信息](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/Tabs/Tabs.aspx)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T11:54:50.140

```
If (Username == "Admin")
    TabContainer.ActiveTabIndex = 0;
else
    TabContainer.ActiveTabIndex = 1; 
```

# javascript - JavaScript - 如何在不替换的情况下随机抽样项目？

> ID：12987719
> 
> 赞同：7
> 
> 时间：2012-10-20T10:56:42.640
> 
> 标签：javascript, random, probability, random-sample

**JavaScript**

我试过搜索这样的东西，但我找不到它。

这是一个简单的想法：

一种。取一个 0 到 10 之间的随机数。

湾。假设滚动的随机数是 3。

C。然后，保存数字（3）。

d。现在，再取一个 0 到 10 之间的随机数，但它不可能是 3，因为它已经出现了。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-20T11:05:55.617

一种解决方案是生成一个包含您要选择的所有值的数组（“桶”），在这种情况下，所有数字都是从 0 到 10。然后从数组中随机选择一个并将其从桶中删除。请注意，下面的示例不检查存储桶是否为空，因此如果您调用下面的函数超过 10 次，您将收到错误。

```
var bucket = [];

for (var i=0;i<=10;i++) {
    bucket.push(i);
}

function getRandomFromBucket() {
   var randomIndex = Math.floor(Math.random()*bucket.length);
   return bucket.splice(randomIndex, 1)[0];
}

// will pick a random number between 0 and 10, and can be called 10 times
console.log(getRandomFromBucket()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:03:52.280

```
Var rnd = getRnd();

While(rnd != lastRnd)
  rnd = getRnd(); 
```

`getRnd()`生成随机数的函数在哪里。

实际上，您必须检查您当前的随机数是否在一个数组中......如果您的可能随机数列表很小，请注意无限循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-01T16:52:44.247

使用[d3](https://github.com/d3/d3-array "d3 数组")：

```
var bucket = d3.shuffle(d3.range(11));

while(bucket.length) {
  console.log(bucket.pop());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T11:11:43.870

你可以使用这样的东西：

```
/**
* range Get an array of numbers within a range
* @param min {number} Lowest number in array
* @param max {number} Highest number in array
* @param rand {bool} Shuffle array
* @return {array}
*/
range: function( min, max, rand ) {
  var arr = ( new Array( ++max - min ) )
    .join('.').split('.')
    .map(function( v,i ){ return min + i })
  return rand
    ? arr.map(function( v ) { return [ Math.random(), v ] })
       .sort().map(function( v ) { return v[ 1 ] })
    : arr
} 
```

并像这样使用它：

```
var arr = range( 1, 10, true ) 
```

现在您有一个数组，其中包含从 1 到 10 的 10 个随机顺序且从不重复的数字。所以接下来你可以这样做：

```
arr.forEach(function( num, i ) { 
  // do something, it will loop 10 times 
  // and num will always be a different number
  // from 1 to 10
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T12:59:58.177

只是为了好玩：源自[@Strilles](https://stackoverflow.com/users/1535827/strille)回答“桶构造函数”

```
function RandomBucket(from,until){
  min = (Number(from) || 0);
  max = (Number(until) || 10)+1;
  this.bucket = String(Array(max-min)).split(',').map(function(i){
     return min++;
  });

  if (!RandomBucket.prototype.get){
   RandomBucket.prototype.get = function(){
      var randomValue = 
        this.bucket.length < 2
        ? this.bucket.shift()
        : this.bucket.splice(Math.floor(Math.random()*this.bucket.length),1);
       return randomValue || 'bucket empty';
      };
  }
} 
```

有关使用示例，请参见[**JsFiddle**](http://jsfiddle.net/KooiInc/h3fD8/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-12T15:54:53.397

大多数时候，我会坚持使用其他答案建议的方法 - 即创建一个可能性数组，创建一个随机版本，然后将前 n 个值作为您的样本（所有操作简单通用，可以不可更改地执行）。

但是，如果与您要使用的内存量相比，或者与您要绘制的随机值相比，可能性的范围很大（尽管@Strilles 解决方案使用内存，但不会随机绘制很多值，所以即使对于我下面的用例来说也可能是最好的）。

您的问题似乎建议的解决方案可能如下所示：

```
// select n integers from the range [from, to] (inclusive at both sides),
// don't use this approach for large values of n
// taking random values from the randomSource as needed
function randomNumbersWithoutReplacement(n, from, to, randomSource = Math.random) {
    const result = [];
    for (let i = 0; i < n; ++i) {
        // i values have already been taken
        // the +1 makes it inclusive
        const rangeWidth = to - from - i + 1

        let value = Math.floor(rangeWidth * randomSource()) + from

        // correct the value compared to the already sampled integers
        for (let j = 0; j < result.length; ++j) {
            if (result[j] <= value) {
                value++
            }
        }

        result.push(value)

        // sorting makes the correction loop simpler
        // (and it's nice to report the result sorted too)
        result.sort((a, b) => a - b)
    }
    return result
} 
```

你为什么想要这个？

```
const quantumLottoNumbers = randomNumbersWithoutReplacement(6, 1, 59, quantumRandomSource) 
```

# c# - 在后台运行程序

> ID：12987720
> 
> 赞同：0
> 
> 时间：2012-10-20T10:56:46.920
> 
> 标签：c#, windows, vb.net, background

我有一个我必须在“信息系统安全”主题中做的迷你项目，这个想法是当用户浏览网络并执行一些操作时我必须在后台运行一个程序。
我做了一些搜索，我想我可能需要编写一个 Windows 服务程序。那是对的吗？或者我应该怎么做才能让我的程序在后台运行？
请任何帮助。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:03:15.530

要使您的程序在后台运行，您可以使用`Shown`表单的事件。

将其放入 Shown 事件中：

```
 private void Form1_Shown(object sender, EventArgs e)
    {
        this.WindowState = FormWindowState.Minimized;
        this.Hide();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:05:56.460

如果您不想编写服务程序，您可以在程序启动后隐藏您的程序窗口

```
ShowWindow(HWND,int); 
```

为了让 Window-Handler 到您自己的窗口，您可以使用例如

```
HWND explorer=::FindWindow(NULL,"explorer.exe"); 
```

或者

```
HWND h = ::GetTopWindow(0);
while ( h )
{    if(IsWindowVisible(h)==1 && /*check if it's your Window*/)
     {   ShowWindow(h,0);//will hide Window
         break;
     }
     h = ::GetNextWindow( h , GW_HWNDNEXT);
} 
```

你不得不

```
#include <winuser.h> 
```

使用此功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T02:05:38.380

只需创建一个 Winforms 应用程序，删除表单，然后将代码放入 Program.cs 的 Main() 方法中。只要您需要，就让它保持活跃，并运行您需要的任何后台任务。

# vb.net - 如何对文本框中的无值进行 VB 异常处理

> ID：12987722
> 
> 赞同：-1
> 
> 时间：2012-10-20T10:57:20.237
> 
> 标签：vb.net, validation

当用户在文本框中没有输入任何值并尝试通过按下按钮进一步处理时，我想捕获一个异常，我知道我可以使用“If else”语句来实现它。但就“Try and Catch”块而言，我不知道如何。这是代码示例。

```
Dim NameString As String

   Try
      NameString = OperatorNameTextBox.Text
   Catch ex As ArgumentException
      MessageBox.Show("Enter a String Value")
   End Try 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T10:58:48.947

为什么不使用验证器来防止用户不填写字段？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:45:45.793

就个人而言，我会使用文本框“离开”事件（失去焦点可能也可以）并检查是否输入了文本。不知道这是否有帮助..

私有子 TextBox1_Leave(....)

如果 textbox1.text = vbnullstring 那么

“你的代码”

如果结束子则结束

然后对于您的 button_click 事件，您可以使用与离开事件相同的代码。

SchmitzIT 的回答也很好。有很多方法可以检查空字符串，所有个人喜好。

# adobe - 学习 Adob e 后效的基础知识

> ID：12987726
> 
> 赞同：-4
> 
> 时间：2012-10-20T10:57:47.107
> 
> 标签：adobe, after-effects

我是adobe的新手。我想在 adobe 中设计一个电影细节效果...给一些教程网站和示例电子书。

我刚开始学习adobe after effects。我对导演电影更有兴趣。我想为我的电影标题和其他人使用 adobe after effect。为此，我必须了解更多关于后效的信息。

我已经尝试阅读[ae tutsplus 了](http://ae.tutsplus.com)。如果您知道其他教程网站和书籍..请参考我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:15:02.480

如果你谷歌它，你可以找到很多教程。我将简化您的工作只需使用下面给出的本教程。

[视频副驾驶](http://www.videocopilot.net/tutorials/)

[创意牛](http://library.creativecow.net/tutorials/adobeaftereffects)

[洪家](http://www.hongkiat.com/blog/adobe-after-effect-tutorials-beginners-intermediate-advanced-users/)

这些网站有很多教程学习它们

# php - 具有 MySQL SPATIAL 数据类型的 PropelORM

> ID：12987737
> 
> 赞同：1
> 
> 时间：2012-10-20T10:59:21.403
> 
> 标签：php, mysql, pdo, propel, spatial-index

我正在`PropelORM 1.6`为一个项目使用和实施某种 GIS 服务。在数据库 ( *MySQL* ) 中，对于坐标，我使用 POINT 字段类型来存储各种项目的坐标。

在`schema.xml`构建表模型时，我已将此（*POINT*）字段设置为`VARCHAR(255)`，因为尚不支持 AFAIK 空间数据类型。

使用 组织该字段的选择查询是可以的`Criteria::CUSTOM`，但是当我想更新这个字段时，使用众所周知`GeomFromText`的 Propel，我得到下一个错误：

> 警告：PDOStatement::execute(): SQLSTATE [22003]：数值超出范围：1416 无法从您发送到 /var/www/.../propel/util/BasePeer.php 中的 GEOMETRY 字段的数据中获取几何对象在线 425

我正在使用设置字段值

> `$object->setGeo("GeomFromText( 'POINT(48.211055 16.383728)' )");`

我想这个字符串被 ORM 视为一个字符串值，而`GeomFromText`不是像它应该的那样被视为一个函数。

不幸的是，没有`Criteria::CUSTOM`设置字段值。

如何使用 PropelORM 更新这些字段？

**更新：**对于这类任务，PropelORM 中可能有类似的东西吗`ZendFramework`？`Zend_Db_Expr`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:51:51.567

我现在找到的解决方案是使用自定义查询并`GEOMETRY`在保存记录后更新字段。

这是我用来扩展功能的函数。

```
/**
 * Update spatial data field from numerical values of record
 * If record ID is not defined - all records will be updated from their own values
 *
 * @param int $record Record ID to update
 */
public function updateGEO($record = null) {

    $sql = 'UPDATE `'.TablePeer::TABLE_NAME.'` SET '.TablePeer::GEO.' = GeomFromText(CONCAT( \'POINT(\', '.TablePeer::LATITUDE.', \' \', '.TablePeer::LONGITUDE.', \')\' ))'.(!empty($record) ? ' WHERE '.TablePeer::ID.' = '.$record : null);

    return \Propel::getConnection(TablePeer::DATABASE_NAME)
            ->prepare($sql)
            ->execute();
} 
```

# c# - 我在 MVVM 中使用实体获得的数据更少

> ID：12987738
> 
> 赞同：2
> 
> 时间：2012-10-20T10:59:38.153
> 
> 标签：c#, entity-framework

我在模型中添加了视图。之后我创建了域服务。

我试图将视图数据添加到网格中。

```
VReportViewer.GrdReport.ItemsSource = dcBusinessAccountingContext.SalesDetailViews; 
```

如果我在 sql server 中使用相同的视图运行。我得到 170 行数据。但是使用实体我只得到 94 行数据。任何人都可以给我任何我做错的地方的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:45:23.383

在 edmx 中检查实体键。

进入 ADO.Net 实体数据模型（edmx 文件），您可以找到表和视图，当导入新视图时，一些字段会自动设置为“实体键”（单击字段然后检查属性）。有时自动生成的实体键是错误的，在这种情况下，当您运行 linq 查询结果与 sql 不同。要解决问题，请找到正确的“实体密钥”或删除所有“实体密钥”（只读视图），还要检查 nullble/non nullable property foreach 并以正确的方式设置。

在类似的情况下，这对我有用。（抱歉迟到了）希望对您有所帮助。

# php - 由于 php 超时，50 个或更多文件上传未完成

> ID：12987739
> 
> 赞同：2
> 
> 时间：2012-10-20T10:59:44.330
> 
> 标签：php, file-upload

```
if(isset($_POST['add_magazine']))
{
    $magazine_images=array();
    $magazine_images=implode(",",$_FILES['images']['name']);

    $path="images/magazines/";
    $mag_img=array();
    $mag_img=explode(",",$magazine_images);
    $img_count=count($mag_img);

    move_uploaded_file($_FILES['cover']['tmp_name'],$path . $_FILES['cover']['name']);
    for($i=0;$i<$img_count;$i++)
    {
        move_uploaded_file($_FILES['images']['tmp_name'][$i],$path . $mag_img[$i]);
    }
} 
```

HTML 代码：

```
<tr>
    <th valign="top">Magazine Images</th>
    <td>:</td>
    <td><input type="file" name="images[]" value="" multiple></td>
</tr> 
```

我制作了一个用于一次上传 40 或 50 多个文件的 php 表单。当我在本地服务器上运行此表单时，它会上传数据库中的所有文件，但是当我在实时服务器上运行此表单时，上传文件需要太多时间，它只上传 19 或 20 个文件。

为什么会发生这种情况，解决方案是什么？这是因为服务器超时吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T11:06:36.023

如果您无法控制服务器配置，您可以使用 javascript 上传文件以防止文件上传超时。作为奖励，您可以创建一个不错的进度条。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T11:03:27.443

您需要更改`max_execution_time = 30`为所需的值并重新启动服务器。

顺便说一句，将文件存储在数据库中并不是一个好主意（正如您在问题中提到的那样）。将它们保存在文件系统和数据库存储链接到上传文件。

**注意：**也可能影响上传过程的事情：

1.  最大输入时间 = 60
2.  post_max_size = 8M
3.  上传最大文件大小 = 128M

如果您无权访问 php.ini，您可以使用 php 脚本直接设置它[`ini_set`](http://php.net/manual/en/function.ini-set.php)

```
ini_set('max_execution_time', $desiredValueInSeconds); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T11:07:07.130

假设您遇到了类似的致命错误`Maximum execution time of [amount of] seconds exceeded`

`php.ini`文件中有一个设置`max_execution_time`。此设置很可能在实时服务器上更短（有充分的理由）。

如果您无法在实时服务器上修改此值，您可以使用该`set_time_limit`选项在运行时更改此设置的值。以这种方式增加秒数仅适用于执行脚本。

[http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T07:53:12.657

许多网络服务器都有一个设置`max_input_time`（在 Apache 上），它定义了它们等待发布数据的时间，无论大小。如果这个时间用完，连接就会关闭，甚至不接触 php.ini。

所以你的问题不一定只能用 php 解决，但你需要更改服务器设置。

你可以试试这个：

将此添加到 htaccess 文件中：

```
<IfModule mod_php5.c>
php_value post_max_size 200M
php_value upload_max_filesize 200M
php_value memory_limit 300M
php_value max_execution_time 259200
php_value max_input_time 259200
php_value session.gc_maxlifetime 1200
</IfModule> 
```

[在http://www.pacecode.com/blog/2008/09/22/magic-with-htaccess-file-increase-execution-time-session-expiry-time-and-file-upload-](http://www.pacecode.com/blog/2008/09/22/magic-with-htaccess-file-increase-execution-time-session-expiry-time-and-file-upload-size-limit/)上阅读有关这些设置的更多信息[尺寸限制/](http://www.pacecode.com/blog/2008/09/22/magic-with-htaccess-file-increase-execution-time-session-expiry-time-and-file-upload-size-limit/)

# hyperlink - 链接到 iOS6 App Store 中的 App Review 选项卡

> ID：12987743
> 
> 赞同：4
> 
> 时间：2012-10-20T11:00:18.253
> 
> 标签：hyperlink, app-store, ios6

任何人都可以分享一个链接，将用户直接从 iOS 应用程序内部带到 iOS6 App Store 上应用程序的“评论”选项卡吗？

此处和整个网络上的所有当前答案似乎都是特定于 iOS4/5 的和/或仅将您带到 iOS6 App Store 中的“详细信息”选项卡。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:45:47.700

试试这个。只需更改代码中的应用 ID。这以前对我有用。它在 4.3 下工作，但由于我不再使用这种方法，我不能确定这可能对你有用。

```
NSString *str = @"itms-
apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?
type=Purple+Software&id=337064413"; //replace the id param's value with your App's id

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:str]]; 
```

希望这可以帮助。阿德里安

# ruby-on-rails-3 - HTML 编码博客文章

> ID：12987745
> 
> 赞同：0
> 
> 时间：2012-10-20T11:01:00.377
> 
> 标签：ruby-on-rails-3

我有一个 Rails 3 博客，文本存储在数据库中，其中包含标记标签，但是当我显示帖子时，我看到的是标记标签而不是预期的输出。因此，我在博客文章中看到**了一些文本**，而不是一些粗体文本。

如何使文本变为粗体？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:23:03.027

试试这个 ：

```
<%= str.html_safe %> 
```

# android - 无法在我的应用程序中接收消息

> ID：12987753
> 
> 赞同：0
> 
> 时间：2012-10-20T11:02:10.183
> 
> 标签：android, broadcastreceiver

在我的应用程序中，我正在尝试接收来自特定号码的消息。所以我写了一个带有动作的接收器类`"android.provider.Telephony.SMS_RECEIVED"`。安装到手机后。我能够第一次在我的应用程序中收到它。如果我关闭并重新打开应用程序或导航到我的应用程序中的任何其他活动，我将无法再次接收它。请参阅下面给出的我的代码。

我的清单文件。

```
<receiver android:name=".SmsReceiver" >
        <intent-filter android:priority="1000" >
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
   </receiver> 
```

我的课

```
public class SmsReceiver extends BroadcastReceiver {

StringBuilder sb;

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction()
            .equals("android.provider.Telephony.SMS_RECEIVED")) {
        System.out.println("^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ RECEIVED SMS ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^");
        Bundle extras = intent.getExtras();
        if (extras != null) {
            Object[] pdus = (Object[]) extras.get("pdus");

            if (pdus.length < 1)
                return; // Invalid SMS. Not sure that it's possible.

            sb = new StringBuilder();
            String sender = null;
            for (int i = 0; i < pdus.length; i++) {

                SmsMessage message = SmsMessage
                        .createFromPdu((byte[]) pdus[i]);
                if (sender == null)
                    sender = message.getOriginatingAddress();

                String text = message.getMessageBody();
                if (text != null)
                    sb.append(text);
                this.abortBroadcast();
            }
            if (sender != null && sender.equals("*********")) {
                // Process our sms...

                Intent broadcastIntent = new Intent();
                broadcastIntent.setAction("SMS");

                broadcastIntent.putExtra("data", sb.toString());

                context.sendOrderedBroadcast(broadcastIntent, null);
                System.out.println("MESSAGE FROM SERVER -->"
                        + sb.toString());

            }
            return;
        }       }
} 
```

}

# c# - 在没有结束和重新开始的情况下更改 spriteBatch 变换矩阵

> ID：12987754
> 
> 赞同：0
> 
> 时间：2012-10-20T11:02:11.953
> 
> 标签：c#, xna, draw, spritebatch

我试图在彼此后面绘制变换的纹理，但绘制不同的 spriteBatch.Begin(...,matrix); spriteBatch.End(); 部分使分层不起作用，最后绘制的纹理在顶部。

是否可以在 Begin 方法之后更改矩阵，或者是否有其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:05:50.397

AFAIK 这是不可能的。我建议您使用 graphicsdecive 编写自己的 spritebatch。

# c++ - 通过引用传递 char 数组

> ID：12987760
> 
> 赞同：14
> 
> 时间：2012-10-20T11:02:47.280
> 
> 标签：c++, arrays, pass-by-reference

我通过引用传递一个 char 数组，但是当我从函数返回并打印数组时，它什么也不显示。我究竟做错了什么？

```
#include <iostream>

using namespace std;

void func(char []);
int main()
{
   char a[100];
   func(a);

   cout << a<<endl;
   return 0;
}

void func(char *array)
{
   array="Inserting data in array a";
   cout << array<<endl;
} 
```

问候

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T11:20:07.833

您可能可以做的是：

```
void func( char (& array)[10] ) {

} 
```

这意味着：通过引用 ( ) 传递一个包含`[..]`10 ( `[10]`) 个字符 ( )的数组 ( )。`char``(& ..)`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-20T11:07:49.320

你没有通过引用传递数组（你也不应该，这对你没有好处）。您正在传递一个指向其第一个元素的指针。然后，您重新分配该指针以指向函数内的其他内容。这对阵列没有影响。如果要更改数组的内容，则需要将数据复制到指针指向的位置。您可以使用 strcpy 或类似的：

```
strcpy(array, "Inserting data in array a"); 
```

作为旁注，但非常重要。我们不再需要在 C++ 中处理这样的事情了。这就是你在 C 中做事的方式。下面是我们在 C++ 中做事的方式：

```
#include <string>
#include <iostream>

void func(std::string & str)
{
    str = "Inserting data into the string";
    std::cout << str << std::endl;
}

int main()
{
    std::string a;
    func(a);
    std::cout << a << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-20T11:09:41.203

您可以通过引用传递指针。为此，您需要以下语法：

```
void func(char *&array)
{
    // ....
} 
```

在函数内部，你使用这个参数作为一个简单的指针。如果修改了值，这些更改在外部可见。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-20T11:47:58.783

尝试以下操作：

```
void function(char* MyArray)
{
    MyArray = "Hello World";
    std::cout << "Address of MyArray inside function: " << (void*)MyArray << std::endl;
}

int main()
{
    char MyArray[10];
    std::cout << "Address of MyArray outside function: " << (void*)MyArray << std::endl;
    function(MyArray);
    std::cout << "Address of MyArray outside function: " << (void*)MyArray << std::endl;

    std::cin.get();
    return 0;
} 
```

有了这个，你会看到指向你的数组的指针只是函数内部的一个副本。通过分配“Hello World”，您只更改副本的地址，而不是主函数中数组的地址。

这个例子实际上可以工作，因为这样你在函数中没有指针的副本：

```
void function(char** MyArray)
{
    *MyArray = "Hello World";
    std::cout << "Address of MyArray inside function: " << (void*)*MyArray << std::endl;
}

int main()
{
    char* MyArray = 0;
    std::cout << "Address of MyArray outside function: " << (void*)MyArray << std::endl;
    function(&MyArray);
    std::cout << "Address of MyArray outside function: " << (void*)MyArray << std::endl;

    std::cin.get();
    return 0;
} 
```

但这仍然是不好的风格。使用字符数组时，您应该执行以下操作：

```
void function(char* MyArray)
{
    strcpy(MyArray, "Hello World");
    std::cout << "Address of MyArray inside function: " << (void*)MyArray << std::endl;
}

int main()
{
    char* MyArray = 0;
    MyArray = new char[15];

    std::cout << "Address of MyArray outside function: " << (void*)MyArray << std::endl;
    function(MyArray);
    std::cout << "Address of MyArray outside function: " << (void*)MyArray << std::endl;

    delete [] MyArray;

    std::cin.get();
    return 0;
 } 
```

但正如其他人提到的，我会使用 std::string 并通过引用传递它，而不是使用字符数组。因为与 std::string 相比，字符数组是不安全的。像这样：

```
void function(std::string& MyString)
{
    MyString = "Hello World";
}

int main()
{
    std::string MyString;
    function(MyString);

    std::cin.get();
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-11T09:30:53.953

我使用了上面的答案，但我必须扩展它，所以我可以打印出数组的实际大小，如下所示：

```
template<size_t n> void foo(char (&array)[n])
{
    // ...
    std::cout << "array size: " << n << std::endl;
    // ...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T11:10:33.793

您正在传递一个指向数组 ( `func (char* array)`) 的指针，然后在函数内部将指针的值更改为指向静态字符串。

您要么需要将新数据复制到数组中，`strcpy()`要么通过引用将指针传递给数组：

```
void func(char*& array); // reference to pointer 
```

或者：

```
strcpy(array, "data"); 
```

最好使用`std::vector<>`or`std::string`代替。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-09T11:46:27.280

对本机数组的引用是非常强大的 C++ 武器之一。加上模板。这是一个可能不平凡但仍然简单的示例。

```
// set all element of a given native array reference 
// to the same value
// return the reference to the same array
    template<typename T, size_t N, typename array_type = T[N] >
    inline
        array_type&  /* return reference to T[N] */
        all_val 
         (  T(&arf)[N],  /* arg reference to T[N] */
            T val   )
    {
        // range for() works on native arrays
        // begin(arf) / end(arf)
        // work as expected
        for (auto & elem : arf) {
            elem = val ;
        }
        // array can not be returned by value
        // but this is allowed in standard C++
        // return type is native array reference
        return arf;
    } 
```

使用上述方法时，应该考虑并将返回的类型保留为原生数组引用。

```
 using charray_type = char[0xF];
        charray_type charray;
        // decaying to pointer to T*
        // you do not want this
        auto pointer_to_char = all_val(charray, '*');
        // you do want this
        // preserving the ref to array
        charray_type& charray_ref = all_val(charray, '*');
        // normal native arr usage
        charray_ref[0] = '*';
        assert(charray[0] == charray_ref[0]); 
```

我认为这对于标准 C++ 来说是相当简单和独特的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-25T02:09:32.243

我知道这篇文章有点老了，但我最近遇到了一种将 char 数组作为参考传递的风格，并在你的示例中实现了它。

我不知道为什么在传递 char 数组作为引用时使用 [0] 作为数组索引，但这段代码有效。

我花了很多时间在网上寻找如何做到这一点，所以也许它可以帮助某人

```
#include <iostream>

using namespace std; 

void  func(char arr[3]);

int main()
{
  char a[3];
  a[0] ='a'; 
  a[1] ='b';
  a[2] ='c';

 //passing the char array as a refrence
 func(&a[0]);

 cout<< "checking the values outside of the func"<<endl;
 cout << a<<endl;
 return 0;
}

void func(char arr[3])
{
   cout<<"Inserting data in array a in the function " <<endl;
   cout << &arr[0]<<endl;
} 
```

将对象作为引用传递的主要思想是没有对象的副本，因为这可能会占用内存资源。因此，在 char 数组的情况下，您可能有非常大的数组，因此将整个 char 数组 objet 作为参数发送是低效的。这就是为什么我们会通过引用来代替

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-20T11:46:29.950

错误第一行**iostream.h** ...其次，您没有将任何元素插入数组...并且您在函数中传递 a ，您必须将数组的地址传递给该函数，但在此之前将代码重写为你的数组里有东西

# c# - 我怎样才能让richTextBox 向上滚动文本而不是条形？

> ID：12987762
> 
> 赞同：-1
> 
> 时间：2012-10-20T11:03:03.703
> 
> 标签：c#

> **可能重复：**
> [如何将 RichTextBox 滚动到底部？](https://stackoverflow.com/questions/895470/how-do-i-scroll-a-richtextbox-to-the-bottom)

我在构造函数中做了：

```
richTextBox1.ScrollBars = RichTextBoxScrollBars.Both; 
```

但是当从顶部开始的文本下降时，我需要向下拖动条来查看文本。相反，我怎样才能使文本将条向下推，所以如果我想查看上部/旧文本，我需要向上拖动条？所以一直以来，我都会从底部发出下一个/新的文本。

```
private void init()
        {
            cancel = false;
            currentCrawlingSite = new List<string>();
            sitesToCrawl = new List<string>();
            richTextBox1.Clear();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:16:09.517

```
for(int i=0;i<=RichTextBox1.Text.Length;i++)
    RichTextBox1.SelectionStart = i 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-20T14:54:47.127

我找到的解决方案是：

```
private void richTextBox1_TextChanged(object sender, EventArgs e)
        {
            richTextBox1.SelectionStart = richTextBox1.Text.Length;
            richTextBox1.ScrollToCaret();
        } 
```

将其放入 TextChanged 事件中。现在它的工作完美。

谢谢你们。

# shell - 验证文件是否存在（脚本外壳）

> ID：12987764
> 
> 赞同：2
> 
> 时间：2012-10-20T11:03:30.490
> 
> 标签：shell

这是我的代码：

```
 nb_lignes=`wc -l $1 | cut -d " " -f1`
 for i in $(seq $(($nb_lignes - 1)) )
 do
 machine=`head $1 -n $i | tail -1`
 machine1=`head $1 -n $nb_lignes | tail -1`
 ssh  root@$machine -x " scp /home/file.txt root@$machine1:/home && rm -r /home/file.txt"
 done 
```

我想在 scp et rm 之前验证 file.txt 是否存在于此类机器中，请问我该如何修改这个脚本？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:08:12.250

您可以使用`test`命令：`test -f file && scp ...`

```
 ssh  root@$machine -x " test -f /home/file.txt && scp /home/file.txt
root@$machine1:/home && rm -r /home/file.txt" 
```

# apache-flex - flex 移动验证：如何删除红色错误边框？

> ID：12987765
> 
> 赞同：0
> 
> 时间：2012-10-20T11:03:30.930
> 
> 标签：apache-flex, flex4, flex4.5, flex-mobile, flex4.6

我在我的 flex 移动应用程序中使用验证器。当验证器触发错误时，我想删除红色边框。

```
 <mx:EmailValidator id="emailV"  source="{login_txt}" property="text"  triggerEvent="click" trigger="{connexion_btn}"  />
    <mx:StringValidator id="passwordV" source="{password_txt}" property="text"  trigger="{connexion_btn}"  triggerEvent="click" /> 
```

我试过：

```
target.errorString = null; // not good 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:19:35.610

通常我会将errorString设置为空字符串；我在带有红色字符串的组件实例上执行此操作。我相信在这种情况下，它将是您的触发组件：

```
login_txt.errorString = '';
password_txt.errorString = ''; 
```

如果您设置 errorString 的目标与指定为验证器源的实际组件相同，我不清楚基于提供的有限代码。可能是，我们只是没有提供足够的信息来确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-09T17:34:17.480

红色光芒在 spark.skins.spark.ErrorSkin 中定义，它是 UIComponent 的 errorSkin 属性的默认值。不能将此属性设置为 null，但可以扩展 ErrorSkin 类并覆盖生成发光的方法（即 updateDisplayList 和 processBitmap）。

我创建了一个 NullFocusSkin，用于移除红色错误光晕和蓝色焦点光晕。我将组件的 errorSkin 和 focusSkin 属性设置为那个，嘿 presto - 不再有讨厌的发光，也无需手动清除 errorString！

```
import spark.skins.spark.HighlightBitmapCaptureSkin;

public class NullFocusSkin extends HighlightBitmapCaptureSkin
{
    override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
    {   
        // Do nothing.
    }

    override protected function processBitmap():void
    {
        // Do nothing.
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-12T09:32:59.013

除了将错误字符串设置为空之外，我还必须调用 showFocus()，否则红色边框不会消失。

```
login.errorString = '';
login.focusManager.showFocus(); 
```

# javascript - 使用 javascript 调用 CGI

> ID：12987767
> 
> 赞同：0
> 
> 时间：2012-10-20T11:03:39.613
> 
> 标签：javascript, cgi

我有一个使用 python 的 CGI 并放置在服务器中。现在我有一个 URL 来调用该 CGI，在该 url 中我需要传递值以在数据库中更新。那么我如何使用 javascript 在该 url 中传递值。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:10:35.277

使用 jQuery 并进行调用`$.ajax("http://yourhost/someMethod?someParameter=someValue")`，但真正的解决方案取决于您的 URL 的预期格式、方法，即 GET 或 POST 等。

# python - Python - 用于带计数器

> ID：12987781
> 
> 赞同：2
> 
> 时间：2012-10-20T11:06:16.600
> 
> 标签：python

> **可能重复：**
> [在 Python for 循环中访问索引](https://stackoverflow.com/questions/522563/accessing-the-index-in-python-for-loops)

我想知道：Python 有类似的东西吗？

```
for (i=0; i < length; i += 1){ .... } 
```

当然，我可以说

```
i = 0
for item in items:
 #.....
 i += 1 
```

但我认为应该有类似的东西`for(i = 0;...)`，不是吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T11:06:59.207

使用[`enumerate()`功能](http://docs.python.org/library/functions.html#enumerate)：

```
for i, item in enumerate(items):
     print i, item 
```

或使用[`range()`](http://docs.python.org/py3k/library/functions.html#func-range)：

```
for i in range(len(items)):
     print i 
```

（在 python 2 上你会使用[`xrange()`](http://docs.python.org/library/functions.html#xrange)）。

`range()`让您逐步完成`i`以下步骤`1`：

```
>>> list(range(0, 5, 2))
[0, 2, 4]
>>> list(range(4, -1, -1))
[4, 3, 2, 1, 0] 
```

不过，您*通常*不需要对序列使用索引；与[`itertools`库](http://docs.python.org/library/itertools.html)或[`reversed()`函数](http://docs.python.org/library/functions.html#reversed)无关；涵盖了“特殊”索引值范围的大多数用例：

```
>>> menu = ['spam', 'ham', 'eggs', 'bacon', 'sausage', 'onions']
>>> # Reversed sequence
>>> for dish in reversed(menu):
...     print(dish)
... 
onions
sausage
bacon
eggs
ham
spam
>>> import itertools
>>> # Only every third
>>> for dish in itertools.islice(menu, None, None, 3):
...     print(dish)
... 
spam
bacon
>>> # In groups of 4
>>> for dish in itertools.izip_longest(*([iter(menu)] * 4)):
...     print(dish)
... 
('spam', 'ham', 'eggs', 'bacon')
('sausage', 'onions', None, None) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T11:43:39.127

尝试这是一种经过深思熟虑的语言选择。大多数时候确实会遍历低级语言中的数字，这些数字被用作序列中的索引。对于确实需要数字的情况，应该使用`range`内置函数 - 它返回具有所需`range([start], end, [step])` 输入值的迭代。

更常见的是，一个序列的项目和它们的索引都需要，在这种情况下，应该使用 builtn`enumerate`代替：

```
for index, letter in enumerate("word"):
     print index, letter 
```

最后，在 C 和派生语言（Java、PHP、Javascript、C#、Objective C）中，`for`语法只是 while 循环的一些（非常粗略的）语法糖——您可以在 Python 中编写相同的 while 循环。

而不是： `for (start_expr, check_expr, incr_expr) { code_body}`你做：

```
start_expr
while check_expr:
    code_body
    incr_expr 
```

它的工作原理完全相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T11:34:24.917

```
for i in range(length):
    #do something 
```

[是什么`range`。](http://docs.python.org/library/functions.html#range)

# android - 如何在android中开发一个windows方式的切换按钮？

> ID：12987787
> 
> 赞同：0
> 
> 时间：2012-10-20T11:06:49.817
> 
> 标签：android, togglebutton

我需要为我的 android 应用程序设计一个类似于 windows 的切换按钮。我不知道该使用哪一个。我尝试使用 SeekBar & ToggleButton。我无法以相同的方式模拟。

![在此处输入图像描述](../Images/e5b889bb4a6deaa200f9e86fa46acb2b.png)

当你点击它时，它会滑到另一端。不是滑块的确切方式。当您单击它时，如果它处于关闭状态。它将滑动到另一端并使其启用。

SeekBar 中有没有我可以实现的方法。对于界面，我将使用下面的图标

![在此处输入图像描述](../Images/98a772f84d792a99c478bb4d2ec01339.png)

![在此处输入图像描述](../Images/ab3cff5fa6d0e5ffb7b79c33da2ee58d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:14:24.337

也许 Switch 适合你[http://developer.android.com/reference/android/widget/Switch.html](http://developer.android.com/reference/android/widget/Switch.html)？

# vb.net - 将值从 ASP 页访问到 ASPX.VB

> ID：12987790
> 
> 赞同：-1
> 
> 时间：2012-10-20T11:07:13.170
> 
> 标签：vb.net, asp-classic

我有 asp 页面，我从查询字符串中获取值并存储在 session 中。 **代码是**

```
username = Trim(Request.querystring("username"))
Session("login")=username
NewUserName=Session("login") 
```

现在我想在 Asp.vb Page **code is(.aspx page)中访问这个 NewUserName 值**

```
<script type="text/javascript" language="javascript">

var login = '<%= Session["NewUserName"].ToString(); %>';
Session("login")=Login;
alert(login);

</script> 
```

**代码是（.aspx.vb）**

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

Login = Session("login")
    If Session("login") Is Nothing Then
        Response.Redirect("../Default.aspx")
    End If
    Session("qid") = 0
End Sub 
```

但这会产生错误并且无法访问该值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:16:02.260

从 asp.net 页面访问内存中的 Classic ASPSESSION 可以做的最简单的桥接是这样的：

*   在 ASP 端：一个用于输出会话的 asp 页面，称之为 asp2netbridge.asp

    ```
    <%
    'Make sure it can be only called from local server '
    if (request.servervariables("LOCAL_ADDR") = request.servervariables("REMOTE_ADDR")) then
        if (Request.QueryString("sessVar") <> "") then
            response.write Session(Request.QueryString("sessVar"))
        end if
    end if
    %> 
    ```

*   在.net 端，远程调用该asp 页面。：

    ```
    private static string GetAspSession(string sessionValue)
     {
        HttpWebRequest _myRequest = (HttpWebRequest)WebRequest.Create(new Uri("http://yourdomain.com/asp2netbridge.asp?sessVar=" + sessionValue));
        _myRequest.ContentType = "text/html";
        _myRequest.Credentials = CredentialCache.DefaultCredentials;
        if (_myRequest.CookieContainer == null)
            _myRequest.CookieContainer = new CookieContainer();
        foreach (string cookieKey in HttpContext.Current.Request.Cookies.Keys)
        {
            ' it is absolutely necessary to pass the ASPSESSIONID cookie or you'll start a new session ! '
            if (cookieKey.StartsWith("ASPSESSIONID")) {
                HttpCookie cookie = HttpContext.Current.Request.Cookies[cookieKey.ToString()];
                _myRequest.CookieContainer.Add(new Cookie(cookie.Name, cookie.Value, cookie.Path, string.IsNullOrEmpty(cookie.Domain)
                    ? HttpContext.Current.Request.Url.Host
                    : cookie.Domain));
            }
        }
        try
        {
            HttpWebResponse _myWebResponse = (HttpWebResponse)_myRequest.GetResponse();

            StreamReader sr = new StreamReader(_myWebResponse.GetResponseStream());
            return sr.ReadToEnd();
        }
        catch (WebException we)
        {
            return we.Message;
        }
    } 
    ```

# c# - 删除 arrayList 中的元素后出现 InvalidOperationException

> ID：12987799
> 
> 赞同：1
> 
> 时间：2012-10-20T11:08:30.487
> 
> 标签：c#

嗨，我正在尝试从 arrayList 中删除所有可被 2 整除的数字。问题是在删除一个元素后，我得到了 InvalidOperationException。

```
 private ArrayList RemoveDivTwo(ArrayList list) {
        int count = 0;
        foreach(int i in list){
            if ((i > 2) && (i % 2 == 0)) {
                list.RemoveAt(count); 
            }
            count++;
        }

        return list;
    } 
```

我怎样才能解决这个问题，这样我就不会得到异常并且能够删除所有可被二整除的元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T11:13:20.793

尝试以这种方式迭代它。

```
for(int i = 0; i < list.Count(); i++){
   if ((list[i] > 2) && (list[i] % 2 == 0)) {
                list.RemoveAt(i); 
                i--; //as offsets have shifted by one due to removal
            }
} 
```

您不再遍历列表。所以这应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:36:47.223

抛出异常的原因是，foreach 循环在开始遍历项目列表之前调用了 collectionName.GetEnumerator 方法。除非您在集合上启动新的 foreach 循环，否则不会再次调用 GetEnumerator。该列表不能在 foreach 循环内修改，它仅用于列表上的只读操作。

您可以使用 for 循环进行迭代以及修改列表中的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T14:04:28.593

我什至不会打扰删除元素。只需将您想要的元素作为新列表返回：

```
List<int> RemoveDivTwo(List<int> list) {
    return list.Where(i => i % 2 == 1 || i <= 2).ToList();
} 
```

# mysql - 带有 MySQL 的可移植 SpringMVC 应用程序

> ID：12987800
> 
> 赞同：2
> 
> 时间：2012-10-20T11:08:34.307
> 
> 标签：mysql, spring-mvc, batch-file, tomcat6

我正在尝试在包含 apache-tomcat-6.0.28、安装的 MySQL5 服务器和 Jre6 的笔式驱动器中运行便携式应用程序。我有一个 .bat 文件定义如下。

```
@Echo Off
 Title Connect To Server
 set ELEARNING_CONFIGS=.
 set JRE_HOME=.\\jre1.6.0_04
set CATALINA_HOME=.\\apache-tomcat-6.0.28\\
cd /d .
 rem echo %OLDDIR%
rem run mysql.bat
cd .\\mysql5

 bin\\mysqld --defaults-file="my.ini"
 ping 1.0.0.0 -n 1 -w 5000 >nul
 bin\\mysqld --defaults-file="my.ini"

cd ..
rem cd .\apache-tomcat-6.0.28\bin
set CLASSPATH=.\\apache-tomcat-6.0.28\\bin\\bootstrap.jar
CALL .\\apache-tomcat-6.0.28\\bin\\startup.bat 
ping 1.0.0.0 -n 1 -w 20000 >nul
START "" "http://localhost/core-web/"
Echo Processing Please Wait......
ping -n 10 127.0.0.1>nul 
```

有时这可以正常工作，没有任何问题。但有时我发现我们必须运行 2 次批处理文件才能运行应用程序。有时我的应用程序由于“未知数据库”错误而无法启动。

请向我提供任何解决此问题的指针。

谢谢

沙希德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:04:11.617

你正在尝试的事情不是一件平常的事情。您能否让我确切地知道您为什么希望 Web 应用程序具有可移植性？

如果是需要随身携带的演示应用程序或培训资料等，那么我建议您使用 HSQLDB（或任何其他 java 内存数据库），它是不需要安装的简单 java api 数据库，但只要 jar 文件就足够了。HSQL DB 具有基于文件的数据库，因此您可以与 jar 一起携带磁盘文件，并且它可以在任何地方正常工作。

在我看来，MySQL 不应该像那样可移植。所以如果你真的只想要便携，你最好选择内存或基于文件的数据库。

# qt - Qt中的弹出颜色菜单

> ID：12987802
> 
> 赞同：0
> 
> 时间：2012-10-20T11:08:44.933
> 
> 标签：qt, colors, picker

在 Qt 中，像这样弹出颜色选择器菜单的最佳方法是什么：

![http://www.servicehighway.com/docs/img/menu_transaction_context_color.jpg](../Images/358b7c0bdd3b335a876d7baf8dd8fd47.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:08:18.997

Qt 没有用于此的 QWidget 类。您将需要自己编写。或者使用现有的，例如 QtSolutions 中的[QColorPicker](ftp://ftp.qt.nokia.com/qt/solutions/lgpl/ "Qt解决方案")。

# javascript - 单击网站上的按钮时注入执行扩展程序代码的 JS 代码

> ID：12987806
> 
> 赞同：-1
> 
> 时间：2012-10-20T11:09:09.393
> 
> 标签：javascript, google-chrome-extension

单击网站上的按钮时，我想执行另一个功能。我想知道这是否可以通过 chrome 扩展功能实现，这样做是否合乎道德，很高兴知道我使用扩展程序执行的代码对同一网站代码有很多添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:13:33.373

为此，只需向您尝试在内容脚本中操作的元素添加一个事件侦听器：

```
document.querySelector('#button').addEventListener('click', function(evt) {
   evt.preventDefault(); // prevent default action of the button
   otherStuff();
} 
```

也不要忘记将此内容脚本添加到您的[`manifest.json`](http://developer.chrome.com/extensions/content_scripts.html)

如果它符合扩展的目的，那当然是合乎道德的，因此我们有 JavaScript :)。

# java - youtube恢复上传java sdk后文件被锁定

> ID：12987807
> 
> 赞同：2
> 
> 时间：2012-10-20T11:09:14.840
> 
> 标签：java, youtube-api

我的 java 代码直接上传了视频，之后程序可以将文件移动到文件夹中。

我刚刚更改了代码以进行可恢复上传，但现在上传后文件无法移动。我可以看到，至少在 Windows“Files.move”上使用 jdk 7，“文件正在被另一个进程使用”——（不是确切的消息，但类似）。同样在带有 jdk6 的 mac lion 上，我可以确认文件移动不再起作用，但我看不到错误消息，因为 Files.move 显然在 jdk7 上可用。

我试着像这样关闭文件。

```
ms.getInputFileStream().close(); 
```

还有这个

```
new FileInputStream(ms.getMedaiFile()).close() 
```

但没有运气。

有人可以指出我正确的方向吗？

可恢复代码本质上是 youtube api 示例/演示包中的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:25:48.140

您可以发布代码以测试这种情况吗？也许您可以在 Java 7 中使用“try-with-resource”解决这个问题。

看：

[http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

[http://www.javaspecialists.eu/archive/Issue190.html](http://www.javaspecialists.eu/archive/Issue190.html)

# php - 使用 php 将 mysql 查询转换为 mongodb

> ID：12987812
> 
> 赞同：0
> 
> 时间：2012-10-20T11:10:03.200
> 
> 标签：php, mongodb

目前我有一个这样的mysql表：

```
+---------+----------+------+-----+---------+----------------+
| Field   | Type     | Null | Key | Default | Extra          |
+---------+----------+------+-----+---------+----------------+
| id      | int(11)  | NO   | PRI | NULL    | auto_increment |
| mediaID | int(11)  | NO   |     | NULL    |                |
| date    | datetime | NO   |     | NULL    |                |
+---------+----------+------+-----+---------+----------------+ 
```

在这张表中，我存储了为特定媒体制作的每个点击。我保存了媒体 ID 和此点击发生的日期。所以......当我想显示趋势媒体（特定时间段内观看次数最多的媒体）时，我使用这个 mysql 查询：

```
SELECT  mediaID, COUNT(*) as cnt FROM hits WHERE DATE(date) = CURDATE() - INTERVAL 1 DAY GROUP BY mediaID ORDER BY cnt DESC LIMIT 0,10 
```

现在.. 我打算在 MongoDB 中移动它。目前，我收集了以下文件的“命中”：

```
{
    _id: ObjectId("50827eaaae1c3ced6c00000f"),
    mediaID: "2",
    ts: ISODate("2012-10-20T13:36:26+03:00")
}
{
    _id: ObjectId("50827ebeae1c3ced6c000010"),
    mediaID: "1",
    ts: ISODate("2012-10-20T13:36:46+03:00")
}
{
    _id: ObjectId("50827ec3ae1c3c6167000008"),
    mediaID: "2",
    ts: ISODate("2012-10-20T13:36:51+03:00")
} 
```

所以，我的问题是如何将我以前的查询转换为能够使用 MongoDB？PS 我正在使用 php 和 php mongodb 驱动程序。

问候，米伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:23:31.917

使用[聚合框架](http://docs.mongodb.org/manual/reference/aggregation/)。您只想计算过去 24 小时的点击次数，按 mediaID 分组，然后从高到低排序并显示前十，对吗？

在外壳中：

```
today = new Date();
// this gets you yesterday but you can change this to be any time period
cutoff = new Date(today.getYear(), today.getMonth(), today.getDate()-1);
db.hits.aggregate( [
   {$match: {ts: {$gt: cutoff} } },
   {$group: {_id: "$mediaID", cnt: {$sum: 1} } },
   {$project: {mediaID: "$_id", cnt:1, _id:0 } },
   {$sort: { cnt:-1 } },
   {$limit: 10}
] ) 
```

您将返回您显示的示例数据：

```
{
    "result" : [
        {
            "mediaID" : "2",
            "cnt" : 2
        },
        {
            "mediaID" : "1",
            "cnt" : 1
        }
    ],
    "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:00:02.167

只是另一个建议。

因为你用`int`with `mediaID`，但是你`mediaID`在mongodb里面的数据是用的`string`，所以你应该先用`intval()`转换数据再存入`mediaID`。

如果您使用`string`而不是`int`. [是否可以在 MongoDB 查询中进行转换？](https://stackoverflow.com/questions/3521601/is-it-possible-to-cast-in-a-mongodb-query)

# c# - 获取 UIElement 的高度和宽度？

> ID：12987814
> 
> 赞同：4
> 
> 时间：2012-10-20T11:10:12.360
> 
> 标签：c#, wpf, height, width, uielement

我目前创建了一个继承自`Popup`.

最后，它将用于在编辑时向用户显示带有验证规则的弹出窗口，例如`TextBox`.

因此，到目前为止，我使用此构造函数创建了 ValidationPopup：

```
public ValidationPopup(UIElement parent, double width) : base()
{
   this.parent = parent;
   this.width = width;
   InitControl();
} 
```

我想将弹出窗口的大小设置为 PlacementTarget 父级的大小。为了让许多不同的控件能够拥有这些 ValidationPopups 之一，我将一个`UIElement`作为父级而不是`TextBox`etc 传递。我的问题是，在构建 ValidationPopup 的实例时，我必须传递该控件的宽度和高度值，以便适当调整大小。

是否可以从中获取这些值`UIElement`？我在 MSDN 上看到了 RenderSize，但它只给了我 0.0 的宽度和高度值。

这是我设置 ValidationPopup 的一个实例的地方：

```
txtOperator = new TextBox();
layoutGrid.Children.Add(txtOperator);
operatorVPU = new ValidationPopup(txtOperator, txtOperator.Width); 
```

我尝试使用 RenderSize 但这在整个 UI 完全完成之前不起作用。

此时有没有办法获取 UIElement 的高度和宽度值？是否有其他更好的方法可以达到相同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:16:24.430

听起来您需要使用这些`ActualWidth/Height`属性。如果它们仍然是 0 或 NaN，您可以尝试在视图创建的稍后部分执行此代码。

# windows-8 - Windows 8 - 可用的字体系列以及如何设置全局字体

> ID：12987815
> 
> 赞同：0
> 
> 时间：2012-10-20T11:10:14.027
> 
> 标签：windows-8, winrt-xaml

我有两个关于 Windows 8 Metro 风格应用程序开发的字体相关问题：

1.  是否有可用字体系列的列表，它们是否存在于任何 Windows 8 设备中？

2.  如何将字体系列设置为全局字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:35:01.163

您不仅限于系统字体。您可以通过 CSS 加载您自己的字体[`@font-face`](https://developer.mozilla.org/en-US/docs/CSS/@font-face)。如果您想更改每个元素的字体，请使用`*`样式表中的选择器并设置`font-family`为您喜欢的字体。我不建议使用星选择器，决定哪些元素应该得到你的字体。

```
@font-face {
  font-family: "your-font";
  src: url(/to-your/local-font.ttf);
}

* {
 font-family: your-font;
} 
```

# python - 无法运行特定的 .pyc 文件

> ID：12987818
> 
> 赞同：7
> 
> 时间：2012-10-20T11:10:24.370
> 
> 标签：python, pyc

使用在 unix-working python 文件中编译后

```
import py_compile
py_compile.compile('server.py') 
```

我在同一个目录中获得了 .pyc 文件，但是当我尝试在 putty 中使用 './server.pyc' 运行该文件时，我得到的只是作为输出的加扰代码，并且没有真正发生任何事情。

所以问题是，如何将 .py 文件正确编译为 .pyc 文件，以及如何运行这个 .pyc 文件？

ps：我确实测试了编译和运行一个基本脚本，它有效..

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-20T11:16:38.907

与 C 不同，编译 python 文件不会产生可执行文件。您必须使用 Python 解释器解释编译后的 Python 代码。

```
$ python
>>> import py_compile
>>> py_compile.compile('server.py')
>>> ^D
$ python ./server.pyc 
```

编译后的 Python 代码的唯一变化是加载时间略短。Python 解释器在加载时已经编译了代码，这根本不需要很长时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-20T11:15:07.707

运行第一个命令以生成 server.pyc 文件。然后第二个命令可以运行 server.pyc 模块。python 文档中描述了-c[选项](http://docs.python.org/using/cmdline.html#cmdoption-c)和[-m 选项。](http://docs.python.org/using/cmdline.html#cmdoption-m)

```
python -c "import server"
python -m server 
```

# sonarqube - Sonar-Runner 未启动（c#）

> ID：12987823
> 
> 赞同：1
> 
> 时间：2012-10-20T11:11:06.883
> 
> 标签：sonarqube, sonar-runner

当我启动 Sonar runner 时，我遇到了这个异常。它不工作，也没有开始。我能做些什么？请帮助我，谢谢。（我正在尝试在我的 Windows 7 64 位操作系统中配置 Sonar 3.2）

```
C:\Users\ea\Desktop\sonar-runner-2.0\sonar-runner-2.0\bin>sonar-runner
ôSONAR_RUNNER_HOME = C:\Users\ea\Desktop\sonar-runner-2.0\sonar-runner-2.0\
bin\..ö
ôPROJECT_HOME = C:\Users\ea\Desktop\sonar-runner-2.0\sonar-runner-2.0\bin\.
.ö
Runner configuration file: C:\Users\ea\Desktop\sonar-runner-2.0\sonar-runne
r-2.0\bin\..\conf\sonar-runner.properties
Project configuration file: NONE
Runner version: 2.0
Java version: 1.7.0_07, vendor: Oracle Corporation
OS name: "Windows 7", version: "6.1", arch: "amd64"
Default locale: "en_US", source code encoding: "windows-1254" (analysis is platf
orm dependent)
Server: http://localhost:9000  
Work directory: C:\Users\ea\Desktop\sonar-runner-2.0\sonarrunner    2.0\.sonar
13:59:34.477 [main] WARN  o.s.r.i.batch.SonarProjectBuilder - /!\ The 'sources'
property is deprecated and is replaced by 'sonar.sources'. Don't forget to updat
e your files.
13:59:36.207 WARN  .c.p.DefaultDatabase - H2 database should be used for evaluat
ion purpose only
13:59:36.207 INFO      o.s.c.p.Database - Create JDBC datasource to url jdbc:h2:
tcp://localhost/sonar
13:59:37.390 INFO  actDatabaseConnector - Initializing Hibernate
13:59:38.851 WARN  StudioProjectBuilder - The specified '.sln' path does not poi
nt to an existing file: C:\Users\ea\Desktop\sonar-runner-2.0\sonar-runner-2
.0\bin\..\sinav_bildir
Total time: 7.632s
Final Memory: 7M/171M
Exception in thread "main" org.sonar.runner.RunnerException: org.picocontainer.P
icoLifecycleException: PicoLifecycleException: method 'public final void org.son
ar.api.batch.bootstrap.ProjectBuilder.start()', instance 'org.sonar.plugins.csha
rp.core.VisualStudioProjectBuilder@7986f7af, java.lang.RuntimeException: wrapper

    at org.sonar.runner.Runner.delegateExecution(Runner.java:288)
    at org.sonar.runner.Runner.execute(Runner.java:151)
    at org.sonar.runner.Main.execute(Main.java:84)
    at org.sonar.runner.Main.main(Main.java:56)
Caused by: org.picocontainer.PicoLifecycleException: PicoLifecycleException: met
hod 'public final void org.sonar.api.batch.bootstrap.ProjectBuilder.start()', in
stance 'org.sonar.plugins.csharp.core.VisualStudioProjectBuilder@7986f7af, java.
lang.RuntimeException: wrapper
    at org.picocontainer.monitors.NullComponentMonitor.lifecycleInvocationFa
iled(NullComponentMonitor.java:77)
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.monitorAndThr
owReflectionLifecycleException(ReflectionLifecycleStrategy.java:132)
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod(
ReflectionLifecycleStrategy.java:115)
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.start(Reflect
ionLifecycleStrategy.java:89)
    at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter
.start(AbstractInjectionFactory.java:84)
    at org.picocontainer.behaviors.AbstractBehavior.start(AbstractBehavior.j
ava:169)
    at org.picocontainer.behaviors.Stored$RealComponentLifecycle.start(Store
d.java:132)
    at org.picocontainer.behaviors.Stored.start(Stored.java:110)
    at org.picocontainer.DefaultPicoContainer.potentiallyStartAdapter(Defaul
tPicoContainer.java:1009)
    at org.picocontainer.DefaultPicoContainer.startAdapters(DefaultPicoConta
iner.java:1002)
    at org.picocontainer.DefaultPicoContainer.start(DefaultPicoContainer.jav
a:760)
    at org.sonar.api.platform.ComponentContainer.startComponents(ComponentCo
ntainer.java:70)
    at org.sonar.batch.bootstrap.Module.start(Module.java:82)
    at org.sonar.batch.bootstrap.BootstrapModule.doStart(BootstrapModule.jav
a:121)
    at org.sonar.batch.bootstrap.Module.start(Module.java:83)
    at org.sonar.batch.Batch.execute(Batch.java:104)
    at org.sonar.runner.internal.batch.Launcher.executeBatch(Launcher.java:6
9)
    at org.sonar.runner.internal.batch.Launcher.execute(Launcher.java:61)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.sonar.runner.Runner.delegateExecution(Runner.java:285)
    ... 3 more
Caused by: java.lang.RuntimeException: wrapper
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.monitorAndThr
owReflectionLifecycleException(ReflectionLifecycleStrategy.java:130)
    ... 24 more
Caused by: org.sonar.api.utils.SonarException: No valid '.sln' file could be fou
nd. Please read the previous log messages to know more.
    at org.sonar.plugins.csharp.core.VisualStudioProjectBuilder.createVisual
StudioSolution(VisualStudioProjectBuilder.java:169)
    at org.sonar.plugins.csharp.core.VisualStudioProjectBuilder.build(Visual
StudioProjectBuilder.java:82)
    at org.sonar.api.batch.bootstrap.ProjectBuilder.start(ProjectBuilder.jav
a:47)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod(
ReflectionLifecycleStrategy.java:110)
    ... 23 more 
```

声纳项目。属性；

```
# Project identification  
sonar.projectKey=DMG:WindowsFormsApplication2
sonar.projectVersion=1.0-SNAPSHOT  
sonar.projectName=my c #
sonar.projectVersion=1.0

# Info required for Sonar  
sources=.
sonar.language=cs

#Core C# Settings  
sonar.dotnet.visualstudio.solution.file=C:/Users/ea/Desktop/sonar-runner-2.0/sonar-runner-    2.0/bin/WindowsFormsApplication2.sln
#sonar.silverlight.4.mscorlib.location=C:/Program Files (x86)/Reference             Assemblies/Microsoft/Framework/Silverlight/v4.0sonar.dotnet.excludeGeneratedCode=true
sonar.dotnet.4.0.sdk.directory=C:/WIndows/Microsoft.NET/Framework/v4.0.30319
sonar.dotnet.version=4.0 
#Gendarme  
sonar.gendarme.assemblies=\build\\DmgTech*.*  
sonar.gendarme.mode=skip  

# Gallio  
sonar.gallio.mode=skip  

# FXCop  
sonar.fxcop.installDirectory=C:/Program Files/Microsoft FxCop 1.36
sonar.fxcop.assemblyDependencyDirectories=/bin/Debug

#StyleCop  
sonar.stylecop.mode=skip 
```

我的文件夹；

```
WindowsFormsApplication2
WindowsFormsApplication2.sln
sonar-project.properties
sonar-runner.bat 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T06:39:43.387

该消息非常简单：

```
No valid '.sln' file could be found. Please read the previous log messages to know more. 
```

这是因为“sonar.dotnet.visualstudio.solution.file”属性必须指向一个 SLN 文件，而不是您指定的文件夹。

更重要的是，您的“sonar-project.properties”文件中有太多无用的属性：

*   当您将其设置为默认值时，无需指定以下属性：

    *   声纳.host.url

    *   sonar.jdbc.username

    *   sonar.jdbc.password

*   您指定了“sonar.jdbc.username”和“sonar.jdbc.password”两次...

# blackberry - 如何通过代码打开黑莓“文件”应用程序？

> ID：12987826
> 
> 赞同：0
> 
> 时间：2012-10-20T11:11:32.277
> 
> 标签：blackberry, invoke

现在我可以使用*Invoke.invokeApplication()*来调用黑莓中的系统应用程序，例如消息、日历等。

但是，我不知道如何启动“文件”应用程序，该应用程序管理黑莓智能手机的文件，并定位到所需的路径。

你能给我一个答案吗？多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:41:33.377

这是一个[链接](http://docs.blackberry.com/en/developers/deliverables/11935/Create_new_blank_sms_text_msg_565423_11.jsp)，描述了如何调用 BlackBerry® Device Software 应用程序，例如联系人应用程序、电话应用程序和媒体应用程序。

# joomla - 自己的模板安装后 Joomla 服务器错误 500

> ID：12987830
> 
> 赞同：1
> 
> 时间：2012-10-20T11:12:11.047
> 
> 标签：joomla, server-error, joomla3.0

我制作了一个在本地工作得很好的模板，但是当我将它安装在服务器上并将其设置为默认值时，我收到服务器错误 500。所有其他（默认）模板似乎工作正常，但是......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:18:42.637

查看本教程（管理工具 - 更改文件夹和文件权限）：

[http://www.ostraining.com/blog/joomla/admin-tools-the-quick-and-easy-way-to-change-folder-and-file-permissions/](http://www.ostraining.com/blog/joomla/admin-tools-the-quick-and-easy-way-to-change-folder-and-file-permissions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:31:45.760

您可能需要检查您的服务器错误日志，看看是否有更详细的信息。

500 是一般错误（如果 Joomla 没有提供其他信息！）。

# hadoop - Apache Pig 的登录用户的权限被拒绝错误

> ID：12987831
> 
> 赞同：0
> 
> 时间：2012-10-20T11:12:22.637
> 
> 标签：hadoop, apache-pig

当我尝试运行 pig -help 时出现以下错误。

```
Exception in thread "main" java.io.IOException: Permission denied
    at java.io.UnixFileSystem.createFileExclusively(Native Method)
    at java.io.File.checkAndCreate(File.java:1717)
    at java.io.File.createTempFile0(File.java:1738)
    at java.io.File.createTempFile(File.java:1815)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:115) 
```

这是我的配置 - Apache Hadoop - 1.0.3 Apache Pig - 0.10.0 OS - Ubuntu 64 位

看到错误的用户 - “sumod”这是一个管理员级别的帐户。我还在 HDFS 中为他创建了目录。未看到此错误的用户 - “hadoop”。我已经为 hadoop 作业创建了这个用户。他不是管理员用户。但他属于 HDFS 上的“超级组”。为两个用户正确设置了路径。我不必在运行“pig -help”命令时启动 hadoop。我只想确保 Pig 安装正确。我正在关注 Apache 文档，我的理解是我不必成为 hadoop 用户来运行 Pig，我可以成为一般系统用户。

为什么我会收到这些错误？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T05:34:44.810

我看到了同样的异常错误。我的原因是我运行 pig 的用户没有 ${hadoop.tmp.dir} 的写权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T08:47:12.633

请检查放置pigscript的目录的权限。

每当执行 pigscript 时，错误都会记录在日志文件中，该文件写入您当前的工作目录中。

假设您的 pigscript 在 dir1 中，并且您的 pwd 是 dir2 并且因为您正在以用户 sumod 执行；sumod 应该在 dir2 中具有写权限。

# c++ - 使用 sizeof 获得两个的最大幂

> ID：12987834
> 
> 赞同：1
> 
> 时间：2012-10-20T11:13:02.777
> 
> 标签：c++, c, types, sizeof

C/C++ 中有没有一种方法可以使用 sizeof 运算符计算某种数据类型可表示的 2 的最大幂？

例如，假设我有一个`unsigned short int`. 它的值可以在`0`和之间`65535`。因此 an`unsigned short int`可以包含的最大二的幂是`32768`。

我将它传递`unsigned short int`给一个函数，我（目前）和算法看起来像这样：

```
if (ushortParam > 32768) {
    ushortParam = 32768; // Bad hardcoded literals
} 
```

但是，将来，我可能想更改变量类型以合并更大的 2 次方。是否有使用 sizeof() 的与类型无关的公式可以实现以下目标：

```
if (param > /*Some function...*/sizeof(param) )
{
    param = /*Some function...*/sizeof(param);
} 
```

请注意，该参数永远不需要浮点精度 - 仅整数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T11:17:06.757

设置该参数大小的变量的最高有效位将为您提供 2 的最高幂。

```
1 << (8*sizeof(param)-1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T11:17:51.517

关于什么：

```
const T max_power_of_two = (std::numeric_limits<T>::max() >> 1) + 1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T13:01:21.970

要获得某个整数类型可表示的 2 的最高幂，您可以使用它`limits.h`来代替`sizeof`运算符。例如：

```
#include <stdlib.h>
#include <stdio.h>
#include <limits.h>

int main() {

  int max   = INT_MAX;
  int hmax  = max>>1;
  int mpow2 = max ^ hmax;

  printf("The maximum representable integer is %d\n",max);
  printf("The maximum representable power of 2 is %d\n",mpow2);
  return 0;
} 
```

这应该始终有效，因为始终定义正整数的右移。引用标准 C 第 6.5.7.5 节（按位移位运算符）：

> **E1** >> **E2**的结果是**E1**右移**E2**位位置。如果**E1** 具有无符号类型或**E1**具有有符号类型和非负值，则结果的值是 **E1**的商除以数量的整数部分，2 的幂**E2**。

如果使用`sizeof`是强制性的，您可以使用：

```
1 << (CHAR_BIT*sizeof(param)-1) 
```

对于无符号整数类型和：

```
1 << (CHAR_BIT*sizeof(param)-2) 
```

对于有符号整数类型。上面的行仅适用于**没有填充位**的整数类型。确保这些线路正常工作的标准 C 部分在第 6.2.6.2 节中。尤其是：

> **对于 unsigned char**以外的无符号整数类型，对象表示的位应分为两组：值位和填充位（后者不需要任何一个）。如果有 N 个值位，每个位应表示 1 和 2N-1 之间的 2 的不同幂，以便该类型的对象应能够使用纯二进制表示表示从 0 到 2N-1 的值；这应称为值表示。

保证第一种方法在以下情况下起作用：

> 对于有符号整数类型，对象表示的位应分为三组：值位、填充位和符号位。不需要任何填充位；应该只有一个符号位。
> 
> ...
> 
> 符号位为零的有符号整数类型的有效（非陷阱）对象表示是相应无符号类型的有效对象表示，并且应表示相同的值。

解释了为什么第二行给出了正确的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-26T15:37:38.633

接受的答案可能适用于 Posix 平台，但不是通用的 C/C++。它假定 CHAR_BIT 为 8，不指定类型，并假定该类型没有填充位。

以下是任何/所有无符号整数类型的更通用版本，不需要包含任何标题、依赖项等：

```
#define MAX_VAL(UNSIGNED_TYPE) ((UNSIGNED_TYPE) -1)

#define MAX_POW2(UNSIGNED_TYPE) (~(MAX_VAL(UNSIGNED_TYPE) >> 1))

#define MAX_POW2_VER2(UNSIGNED_TYPE) (MAX_VAL(UNSIGNED_TYPE) ^ (MAX_VAL(UNSIGNED_TYPE) >> 1))

#define MAX_POW2_VER3(UNSIGNED_TYPE) ((MAX_VAL(UNSIGNED_TYPE) >> 1) + 1) 
```

标准，甚至 C90，保证将 -1 强制转换为无符号类型总是产生该类型可以表示的最大值。从那里开始，上面的所有按位运算符都得到了很好的定义。

[http://c0x.coding-guidelines.com/6.3.1.3.html](http://c0x.coding-guidelines.com/6.3.1.3.html)

> 6.3.1.3 有符号和无符号整数
> 
> 682 当整数类型的值转换为_Bool以外的其他整数类型时，如果该值可以用新的类型表示，则保持不变。
> 
> 683**否则，如果新类型是无符号的，则在新类型所能表示的最大值的基础上反复加减1，直到该值在新类型的范围内。**
> 
> 684 否则，新类型有符号，值不能在其中表示；
> 
> 685 结果是实现定义的，或者产生了实现定义的信号。

无符号类型的最大值是 2 的幂次方小 1，并且设置了所有值位。上述表达式导致仅设置最高位，这是该类型可以表示的 2 的最大幂。

[http://c0x.coding-guidelines.com/6.2.6.2.html](http://c0x.coding-guidelines.com/6.2.6.2.html)

> 6.2.6.2 整数类型
> 
> 593 对于 unsigned char 以外的无符号整数类型，对象表示的位应分为两组：值位和填充位（后者不需要任何一个）。
> 
> 594 如果有 N 个值位，每个位应表示 1 和 2^(N - 1) 之间的 2 的不同幂，因此该类型的对象应能够使用 a 表示从 0 到 2^N - 1 的值纯二进制表示；
> 
> 595 这应称为值表示。
> 
> 596 未指定任何填充位的值。

# css - Dynamically position bottom elements vertically with HTML5 and CSS

> ID：12987840
> 
> 赞同：2
> 
> 时间：2012-10-20T11:14:01.437
> 
> 标签：css, html, position

I've got a fairly simple page where I want to create something like this:

[------------------div - 100px filler color-----------------]
[------------------h1 - height 100px----------------------]
[--------------- div - 100%-(100px+100px)-------------]

The HTML I'm working with is:

```
<body>
    <div id="header">
    </div>

    <h1>Big Old Text</h1>

    <div id="footer">
    </div>
</body> 
```

The CSS is:

```
body {
    margin: 0px;
    padding: 0px;
}

.background {
/*  background: url(rotate.php) no-repeat center fixed; */
    background: url(background_image_05.jpg) no-repeat center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}

#header {
    background-color: rgba(255,0,255,0.10);
    height: 100px;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

h1 {
    letter-spacing: 0.1em;
    font-size: 72px;
    text-align: center;
    padding-bottom: 25px;
    padding-top: 30px;
    display: block;
    position: relative;
    height: 100px
}

#footer {
    position: relative;
    top: 0;
    bottom: 0;
    right: 0;
    left: 0;
    background-color: rgba(255,0,255,0.10);
} 
```

I don't want any scroll bars. I tried to modify a version of this earlier [answer](https://stackoverflow.com/questions/2898221/make-div-fill-remainder-of-page-vertically), but it's not quite working out the way I want it to.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:45:08.283

I was trying to understand what you are looking for...

**HTML**:

```
<body>
<div id="wrapper">
    <div id="header">
    </div>
    <h1>Big Old Text</h1>
    <div id="content">
    </div>
    <div id="footer">
    </div>
</div> 
```

**CSS:**

```
*{box-sizing:border-box;}

body{
    margin:0;
    padding:0;
}

#content{
    width:100%;
    position:absolute;
    top:200px;
    bottom:100px;
    border:red 2px solid;
}​ 
```

You could also see the example here: [http://jsfiddle.net/dZEQQ/3/](http://jsfiddle.net/dZEQQ/3/)

I hope this is what you are looking for(pay attention to #content styles).

# php - php自动化后期测试

> ID：12987842
> 
> 赞同：-2
> 
> 时间：2012-10-20T11:14:06.693
> 
> 标签：php, post, curl

我的站点中有一个页面为 test.php 。 test.php 的内容如下：

```
<?php
$testpostvalue=$_POST["testpostvalue"];
chmod("testpost.php", 0755);
$my_file = "testpost.php";
$handle = fopen($my_file, "w") or die("Cannot open file:  ".$my_file);
fwrite($handle, $testpostvalue);
chmod("testpost.php", 0644);
?> 
```

我想从我的本地主机运行以下代码：

```
<?
$testpostvalue='
<html>
<title>test post</title>
<head>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>
<center>
<style>
body{background-color:#000000;color:#000000;}
</style>
<img src="http://3.bp.blogspot.com/-2xHOAvaIImM/Ts-S6N8lSeI/AAAAAAAADDo/zBr0JfTVvSs/s320/image-708144.jpg"WIDTH="500" HEIGHT="500"</a>
<center>
<body>';

$useragent="Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.1; .NET CLR 1.1.4322; Alexa Toolbar; .NET CLR 2.0.50727)";
$url2='http://mysite.com/test.php';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url2);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS,"testpostvalue=".$testpostvalue);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_USERAGENT, $useragent);
curl_setopt($ch, CURLOPT_COOKIEJAR, "COOKIE.txt"); 
curl_setopt($ch, CURLOPT_COOKIEFILE, "COOKIE.txt"); 
$buffer = curl_exec($ch); 
```

但是当我从本地主机运行此代码时，帖子正在更新。但是图像链接存在一些问题。图像链接在 test.php 上显示如下：

```
<img src=/"http://3.bp.blogspot.com/-2xHOAvaIImM/Ts-S6N8lSeI/AAAAAAAADDo/zBr0JfTVvSs/s320/image-708144.jpg"WIDTH="500" HEIGHT="500"</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:19:15.163

我会首先尝试清理 HTML 代码，因为存在一些错误，特别是在图像检查周围：

```
<html>
<head>
    <title>test post</title>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <style>
        body{background-color:#000000;color:#000000;}
    </style>
</head>
<body>
    <center>
        <img src="http://3.bp.blogspot.com/-2xHOAvaIImM/Ts-S6N8lSeI/AAAAAAAADDo/zBr0JfTVvSs/s320/image-708144.jpg"WIDTH="500" HEIGHT="500" />
    <center>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-20T11:21:01.423

你的代码工作文件，但我不建议你发送这样的html文件尝试

```
curl_setopt($ch, CURLOPT_POSTFIELDS,"testpostvalue=". bin2hex($testpostvalue)); 
```

和

```
fwrite($handle, pack("H*",$testpostvalue)); 
```

# sql-server - 在没有创建链接服务器权限的情况下从存储过程执行另一个数据库服务器中的 SQL Server 存储过程

> ID：12987846
> 
> 赞同：2
> 
> 时间：2012-10-20T11:14:35.710
> 
> 标签：sql-server, stored-procedures, shared-hosting, execute

我有 2 个存储过程，每个存储过程都位于不同物理服务器上的单独数据库中。这两个数据库都是在（单独的）共享网络主机中创建的，因此，我没有服务器级别的访问权限。这两个服务器都具有有效的 IP 地址，并且我创建了具有适当权限的用户帐户，以便在其相应的服务器中运行这些存储过程。

问题是：我想从另一个执行这些过程之一，但我无法创建链接服务器（因为两个数据库都在共享托管环境中）。如何从第一个存储过程内部执行远程存储过程？

（ps）我检查了很多关于这个问题的问题，但他们都认为可以在这两个服务器之间创建一个链接服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:18:20.717

> 我想从另一个执行这些过程之一，但我无法创建链接服务器

如果没有链接服务器，这通常是不可能的。

正如[@Martin 评论](https://stackoverflow.com/questions/12987846/executing-a-sql-server-stored-procedure-in-another-database-server-from-a-stored/12987876#comment17617305_12987876)的那样，您可以尝试[OPENDATASOURCE](http://msdn.microsoft.com/en-us/library/ms179856.aspx)，但这不太可能起作用，因为它默认被禁用并且不太可能由托管公司启用。

在这些情况下，您唯一的选择是将每个存储过程与您的应用程序分开运行并在应用程序中处理结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T16:40:33.410

如果您对两台服务器都有访问详细信息，则可以创建 .NET CLR 并在服务器上进行部署。

将登录名、密码、存储过程名称和参数传递给 CLR 函数，并在 CLR 代码中连接并执行它。

这是一篇如何从 CLR 返回表的文章：http: [//msdn.microsoft.com/en-us/library/ms131103.aspx](http://msdn.microsoft.com/en-us/library/ms131103.aspx)

要连接到 SQL 服务器，您需要使用通用 .Net 库：System.Data.SqlClient

要使用的对象：SqlConnection、SqlCommand 和 SqlDataAdapter。

我自己没有做过，更容易创建链接服务器，但我不明白为什么它不应该工作，当然你必须有权在服务器上上传程序集。

# sql-server - 如何减少 Sql Server 中的搜索时间

> ID：12987847
> 
> 赞同：3
> 
> 时间：2012-10-20T11:14:47.787
> 
> 标签：sql-server, winforms

我创建了一个使用 SQL Server 数据库的 Windows 窗体。Windows 窗体包含一个搜索网格，其中包含一个人的所有银行帐户信息。搜索网格包含一个特殊字段“账户数”，它显示一个人与银行关联的账户数。

从中提取数据的表中有超过 100,000 条记录。我只是想知道在从搜索网格中的表中获取数据时应该如何减少响应时间或搜索时间。

当我运行该页面时，需要花费大量时间才能将记录显示在搜索网格中。此外，除非我提供搜索条件（搜索日期和日期），否则它不会获取数据

他们是否有任何可能的方法来减少搜索时间，以便数据应该显示在网格中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T11:22:11.170

您可以做几件事：

1.  仅获取结果所需的最少数据量 - 这意味着仅选择所需的列并限制行数。
2.  除了上述之外，还可以考虑在 UI 上使用分页，这样可以进一步限制返回的数据量。向用户显示 100,000 行是没有意义的。
3.  如果您还没有这样做，请向表中添加索引（尽管在 100,000 行时，事情应该不会那么慢）。我无法详细说明如何做到这一点。

# c - 选择只工作一次

> ID：12987858
> 
> 赞同：2
> 
> 时间：2012-10-20T11:16:39.343
> 
> 标签：c, linux, systems-programming

```
 /* Wait up to 1 min */
   tv.tv_sec = 60;
   tv.tv_usec = 0;

   FD_ZERO(&readfd);
   FD_ZERO(&writefd);
   for(i=0;i<3;i++)
   {
     FD_SET(my_rdfd[i], &readfd);
     FD_SET(my_wrfd[i], &writefd);
   }

   for(int i=0;i<10;i++)
   {
     retval = select((NRFDS)+1, &readfd, &writefd, (fd_set*)0, &tv);//NRFDS is a macro

     if (retval == -1)
       printf("select() error");
     else if (retval)
     {
       printf("data found\n");
       //do something with the data recieved
     }
     else
       printf("Timeout.\n");
   } 
```

问题是 for 循环内的 select() 第一次按预期工作，很好，对于后续循环，它不起作用。我究竟做错了什么？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T11:21:13.507

尝试将其放在 for 循环中：

```
for(i=0;i<10;i++)
{
  tv.tv_sec = 60;
   tv.tv_usec = 0;

   FD_ZERO(&readfd);
   FD_ZERO(&writefd);
   for(j=0;j<3;j++)
   {
     FD_SET(my_rdfd[j], &readfd);
     FD_SET(my_wrfd[j], &writefd);//Note that you should use a different inside forloop
   }

   //select statement here

} 
```

返回时`select()`，它会更改集合以显示哪些文件描述符已准备好进行读/写/异常。所有其他标志都将被清除。

重新启用在开始另一个选择之前清除的文件描述符很重要，否则，您将不再等待这些文件描述符。

# c++ - 编写一个类似于“std::cout”但在末尾添加换行符的简单函数

> ID：12987860
> 
> 赞同：0
> 
> 时间：2012-10-20T11:16:55.167
> 
> 标签：c++, function, stl, stream, cout

在 C++ 中有一个名为 的标准库函数`cout`，它可以让我将文本发送到控制台。我相信你知道这一点。

```
#include <iostream>
using std::cout;
cout << "Some Text " << 15 << " Other Text"; 
```

最后要换行，我需要使用`endl`.

```
cout << "Some Text " << 15 << " Other Text" << endl; 
```

如何编写一个名为的函数`coutl`，它的行为类似于`cout`但也添加了一个likebreak？我想使用相同的语法`cout`，尤其是`<<`运算符。

```
coutl << "Some Text " << 15 << " Other Text"; // coutl should add a linebreak 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T11:26:17.880

`<< endl`通过创建一个添加其析构函数的小代理对象：

```
class AddEndl
{
public:
  AddEndl(std::ostream& os) : _holder(new Holder(os)) {}

  template <class T>
  friend std::ostream& operator<< (const AddEndl& l, const T& t)
  {
    return (l._holder->_os) << t;
  }

private:
  struct Holder {
    Holder (std::ostream& os) : _os(os) {}
    ~Holder () { _os << std::endl; }

    std::ostream& _os;
  };

  mutable std::shared_ptr<Holder> _holder;
} 
```

然后你需要一个函数，这样你就会得到一个临时的：

```
AddEndl wrap(std::ostream& os)
{
  return AddEndl(os);
} 
```

这应该可以工作：

```
wrap(std::cout) << "Hello"; 
```

**更新：**

`std::endl`我移动了将 a 添加到 a 拥有的内部对象的析构函数，`std::shared_ptr<>`以便该示例不再依赖于 Copy Elision。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:22:43.447

仅在堆栈上创建一个具有完整功能范围的非临时对象是不可能的。对象怎么会知道这是对 的最后一个链式调用`<< operator`？

你可以尝试这样的黑客

```
class coutl
{
    public:
    ~coutl()
    {
        cout<<endl;
    }

    template<class T>
    coutl &operator<<(const T &x)
    {
        cout<<x;
        return *this;
    }

};

int main()
{
    coutl()<<"Hello"<<10<<"World";
    coutl()<<"Hello"<<20<<"World";
} 
```

使用析构函数的另一个类似 hack

```
class myostream
{
    public:
    ~myostream()
    {
        cout<<endl;
    }

    template<class T>
    myostream &operator<<(const T &x)
    {
        cout<<x;
        return *this;
    }

};

int main()
{
    {
        myostream coutl;
        coutl<<"Hello"<<10<<"World";
    }

    {
        myostream coutl;
        coutl<<"Hello"<<10<<"World";
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T14:26:32.983

`coutl << "Some Text " << 15 << " Other Text"; // coutl should add a linebreak`

你的想法无法实现。其实`cout << str1;`相当于`cout.operator<<(str1)`which返回了cout本身的一个引用。所以`cout << a << b << c;`可以解决 `((cout << a) << b) << c;`它不知道最后一次调用插入换行符是什么时候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T11:28:46.073

其实代码

```
cout << "Some Text " << 15 << " Other Text" << endl; 
```

调用操作员函数

```
// (pseudo code)
std::ostream& operator<<(std::ostream, [type] obj); 
```

操作员每次使用几次`<<`。要实现您想要的，您需要创建一个行为类似于 的类`std::ostream`，但“神奇地”知道何时`operator<<`发出“最后”调用并附加换行符。如果没有另一个跟踪语句范围的对象，恕我直言，这是不可能的。

# c++ - 求有限图 G 的顶点排序

> ID：12987861
> 
> 赞同：1
> 
> 时间：2012-10-20T11:16:58.130
> 
> 标签：c++, algorithm, graph, implementation, graph-algorithm

我试图在 C++ 中实现这个算法，但它有一些问题。我需要一些建议如何让它更快、更正确地工作。

算法 正如 Batagelj & Zaversnik (2003) 所描述的，有可能找到有限图 G 的顶点排序，通过重复删除最小度数的顶点，在线性时间内优化排序的着色数。更详细地说，算法进行如下：

*   初始化一个输出列表 L。
*   为 G 中的每个顶点 v 计算一个数字 dv，即不在 L 中的 v 的邻居数。最初，这些数字只是顶点的度数。
*   初始化一个数组 D，使得 D[i] 包含一个顶点 v 的列表，这些顶点 v 不在 L 中，其中 dv = i。
*   将 k 初始化为 0。
*   重复n次：

    1\. 扫描数组单元 D[0], D[1], ... 直到找到 D[i] 不为空的 i。

    2.将k设置为max(k,i)

    3.从D[i]中选择一个顶点v。将 v 添加到 L 的开头并将其从 D[i] 中删除。

    4\. 对于 v 的每个邻居 w，从 dw 中减去一个并将 w 移动到与 dw 的新值对应的 D 的单元格中。

在算法结束时，k 包含 G 的简并性，L 包含一个顶点列表，该列表以着色数的最佳顺序排列。G 的 i 核是 L 的前缀，由在 k 首先取大于或等于 i 的值之后添加到 L 的顶点组成。初始化变量 L、dv、D 和 k 可以很容易地在线性时间内完成。找到每个连续移除的顶点 v 并调整包含 v 邻居的 D 的单元格所花费的时间与该步骤中 dv 的值成正比；但是这些值的总和是图的边数（每条边都对两个端点中的后者的总和中的项有贡献），因此总时间是线性的。

这是我的代码（Susedia = 邻居）

```
 int his_place_inArray(int x,vector<int> A)
{
    for(int i=0;i<A.size();i++)
        if(*(A.begin()+i)==x) return i;

}

vector<int> vertex_ordering(vector<int> A) {

vector<int> L;
vector<vector<int>> D(100);
vector<int> d(A.size());
vector<int> N;                   //tsusedia

//Compute a number dv for each vertex v in G, the number of neighbors of v
//that are not already in L. Initially, these numbers are just the degrees 
//of the vertices.
for (int i = 0; i < A.size(); i++) {
     N = susedia(A[i], L);
    d[i] = N.size();

    //Initialize an array D such that D[i] contains a list of the vertices 
    //v that are not already in L for which dv = i.

        D[d[i]].push_back(A[i]);

}
int i;
int k = 0; //Initialize k to 0.
int chosen;     //chosen
vector<int> chosen_N;   //Neighbors of chosen

for (int j = 0; j < A.size(); j++) {     //for n times

    for (i = 0; i < 10; i++) {
        if (D[i].empty() == false) {
            k = max(k, i);
            break;
        }
    }

    chosen = D[i][0];
    L.push_back(chosen);
    D[i].erase(D[i].begin());
    chosen_N = susedia(chosen, L);
    int n; //neighbor

    //For each neighbor w of v, subtract one from dw and move w to the cell of D corresponding to the new value of dw.
    for (int w = 0; w < chosen_N.size(); w++) {

        n = chosen_N[w];

        int p = his_place_inArray(n,A);       //chosen neighbor place in A

         int p_inD = his_place_inArray(n,D[d[p]]);  //chosen neighbor place in D

        D[d[p]].erase(D[d[p]].begin()+p_inD);
        d[p]--;
        D[d[p]].push_back(n);
    }
}
return L;
} 
```

# cakephp - cakephp 文件 notempty 验证 - 错误？

> ID：12987862
> 
> 赞同：1
> 
> 时间：2012-10-20T11:17:05.303
> 
> 标签：cakephp

如何获取输入类型文件以验证蛋糕中的 notempty？

当您提交表单而不添加文件时，即使 $this->request->data 显示该文件，验证也会显示它为空。

// 模型/Product.php

```
class Product extends AppModel {
  public $validate = array(
    'name' => array(
        'rule' => 'notEmpty'
    ),
 );

} 
```

// 控制器/ProductController.php

```
 public function add() {
    if ($this->request->is('post')) {
        $this->Product->create();
        if ($this->Product->save($this->request->data)) {
            $this->Session->setFlash('Your product has been saved.');
        } else {
            $this->Session->setFlash('Unable to add your product.');
            debug($this->request->data);
            debug($this->Product->validationErrors);
        }
    }
} 
```

// 查看/产品/add.ctp

```
echo $this->Form->create('Product', array('type' => 'file'));
echo $this->Form->input('name', array('type' => 'file'));
echo $this->Form->end('Save Post'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T12:35:02.070

我认为您实际上不能在 -some special- file 字段上使用 notEmpty。文件字段的处理方式与任何其他输入字段不同，因为它返回超全局 $_FILES 作为结果。因此，您应该稍微检查一下。[CakePHP 文档](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#validating-uploads)中实际上有一个很好的例子。

现在这是实际上传的文件，但您可以通过检查`name`密钥是否不为空并实际设置来轻松更改它。像这样作为模型中的自定义验证规则的东西应该可以解决问题：

```
public function fileSelected($file) {
    return (is_array($file) && array_key_exists('name', $file) && !empty($file['name']));
} 
```

然后将其设置为文件字段的验证规则：

```
public $validate = array(
   'name' => array(
       'rule' => 'fileSelected'
   ),
); 
```

# java - 如何在我的网站上实现oauth安全协议（tomcat+jersey+hibernate）

> ID：12987871
> 
> 赞同：2
> 
> 时间：2012-10-20T11:17:56.233
> 
> 标签：java, oauth

我有一个以 tomcat 7 作为服务器和 mysql db 的网站。另外，我还有一些休息服（球衣）。现在我想通过 iOS/Android 设备使用用户名和密码登录我的网站，并保护所有其他服务。我听说过 oauth 协议，它似乎非常适合我的需求，但我在网上找不到任何好的教程如何将此 oauth 协议添加到我的网站。你有很好的教程和代码示例吗？谢谢

# android - 在横向模式下将元素添加到文本框视图

> ID：12987873
> 
> 赞同：1
> 
> 时间：2012-10-20T11:18:02.000
> 
> 标签：android, view, android-edittext, landscape-portrait

当您激活 editText 并且您的应用程序处于横向模式时，您的视图将发生变化，您所看到的只是一个白屏和您的文本框。

我有很多文本框，用户必须填写信息。由于白色区域被拉伸到屏幕的整个宽度和高度，这可能会非常令人困惑。您不知道现在激活了哪个文本框。

这就是为什么我想为editText 框的每个纵向视图添加一个文本标签。怎么可能做到这一点？

编辑：

```
android:imeOptions="flagNoExtractUi" 
```

不是解决方案，因为软键盘隐藏了一些编辑文本框。

# android - Android 进度条在中间停止工作

> ID：12987880
> 
> 赞同：0
> 
> 时间：2012-10-20T11:18:43.360
> 
> 标签：android, progressdialog

我正在使用 ASYNTask。而且我使用了自定义进度条。它在旋转一段时间后停止工作，然后出现一个空白（黑色）屏幕 2 秒，然后我的下一个屏幕的 UI 加载。

```
public class LoginActivity extends Activity {
    /** Variable define here. */
    private EditText metLoginUserName, metLoginPassword;
    private Button mbtnLogin;
    private ImageView ivRegister;
    private String Host, username, password;
    private int Port;
    private UserChatActivity xmppClient;
    public static ArrayList<String> all_user = new ArrayList<String>();
    public static CustomProgressDialog mCustomProgressDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.loginlayout);

        metLoginUserName = (EditText) this.findViewById(R.id.etLoginUserName);
        metLoginPassword = (EditText) this.findViewById(R.id.etLoginPassword);
        mbtnLogin = (Button) findViewById(R.id.btnLogin);
        ivRegister = (ImageView) findViewById(R.id.ivRegister);

        /** Set the hint in username and password edittext */
        metLoginUserName = CCMStaticMethod.setHintEditText(metLoginUserName,
                getString(R.string.hint_username), true);
        metLoginPassword = CCMStaticMethod.setHintEditText(metLoginPassword,
                getString(R.string.hint_password), true);

        /** Click on login button */
        mbtnLogin.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                /** Login Activity */
                username = metLoginUserName.getText().toString();
                password = metLoginPassword.getText().toString();
                CCMStaticVariable.musername = username;
                CCMStaticVariable.musername = password;
                if(CCMStaticMethod.isInternetAvailable(LoginActivity.this)){
                    LoginUserTask loginUserTask = new LoginUserTask(v.getContext());
                    loginUserTask.execute();
                }
            }
        });

        /** Click on forgot button */
        this.findViewById(R.id.ivForgot).setOnClickListener(
                new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        startActivity(new Intent(LoginActivity.this,
                                ForgotPassActivity.class));
                    }
                });

        /** Click on register button */
        ivRegister.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                startActivity(new Intent(LoginActivity.this,
                        RegisterActivity.class));
            }
        });
    }

    public class LoginUserTask extends AsyncTask<Void, Void, XMPPConnection> {
        public LoginUserTask(Context context) {
            super();
            this.context = context;
        }
        private Context context;

        @Override
        protected void onPostExecute(XMPPConnection result) {
            if (result != null) {
                /**Start services*/
                startService(new Intent(LoginActivity.this, UpdaterService.class));
                /**Call usermenu activity*/ 
                finish();
                startActivity(new Intent(LoginActivity.this,UserMenuActivity.class));
            } else {
                DialogInterface.OnClickListener LoginUnSuccessOkAlertListener = new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                    }
                };
                CCMStaticMethod.showAlert(context, "Login",
                        "Invalid Username or Password. Try Again !", R.drawable.unsuccess,
                        true, true, "Ok", LoginUnSuccessOkAlertListener, null,
                        null);
            }
            mCustomProgressDialog.dismiss();
        }

        @Override
        protected void onPreExecute() {
            mCustomProgressDialog = CustomProgressDialog.createDialog(
                    LoginActivity.this, "", "");
            mCustomProgressDialog.show();
        }

        @Override
        protected XMPPConnection doInBackground(Void... params) {
            CCMStaticVariable.CommonConnection = XMPPConn.checkXMPPConnection(username,
                    password);
            return CCMStaticVariable.CommonConnection;
        }
    }
} 
```

用户菜单活动

```
public class UserMenuActivity extends ExpandableListActivity {

    private XMPPConnection connection;
    String name,availability,subscriptionStatus;
    TextView tv_Status;
    public static final String ACTION_UPDATE = "ACTION_UPDATE";

    /** Variable Define here */
    private String[] data = { "View my profile", "New Multiperson Chat",
            "New Broad Cast Message", "New Contact Category", "New Group",
            "Invite to CCM", "Search", "Expand All", "Settings", "Help",
    "Close" };
    private String[] data_Contact = { "Rename Category","Move Contact to Category", "View my profile",
            "New Multiperson Chat", "New Broad Cast Message",
            "New Contact Category", "New Group", "Invite to CCM", "Search",
            "Expand All", "Settings", "Help", "Close" };

    private String[] data_child_contact = { "Open chat", "Delete Contact","View my profile",
            "New Multiperson Chat", "New Broad Cast Message",
            "New Contact Category", "New Group", "Invite to CCM", "Search",
            "Expand All", "Settings", "Help", "Close" };
    private String[] menuItem = { "Chats", "Contacts", "CGM Groups", "Pending","Request" };
    private List<String> menuItemList = Arrays.asList(menuItem);

    private int commonGroupPosition = 0;
    private String etAlertVal;
    private DatabaseHelper dbHelper;
    private int categoryID, listPos;
    /** New Code here.. */
    private ArrayList<String> groupNames;
    private ArrayList<ArrayList<ChildItems>> childs;
    private UserMenuAdapter adapter;
    private Object object;
    private CustomProgressDialog mCustomProgressDialog;

    private String[] data2 = { "PIN Michelle", "IP Call" };
    private ListView mlist2;
    private ImageButton mimBtnMenu;
    private LinearLayout mllpopmenu;
    private View popupView;
    private PopupWindow popupWindow;
    private AlertDialog.Builder alert;
    private EditText input;
    private TextView mtvUserName, mtvUserTagLine;
    private ExpandableListView mExpandableListView;
    public static List<CategoryDataClass> categoryList;
    public static ArrayList<String> chatUser;
    private boolean menuType = false;
    private String childValContact="";
    public static Context context;

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.usermenulayout);
        dbHelper = new DatabaseHelper(UserMenuActivity.this);
        XMPPConn.getContactList();
        connection = CCMStaticVariable.CommonConnection;
        registerReceiver(UpdateList, new IntentFilter(ACTION_UPDATE));

    }

    @Override
    public void onBackPressed() {
        if (mllpopmenu.getVisibility() == View.VISIBLE) {
            mllpopmenu.setVisibility(View.INVISIBLE);
        } else {
            if (CCMStaticVariable.CommonConnection.isConnected()) {
                CCMStaticVariable.CommonConnection.disconnect();
            }
            super.onBackPressed();
        }
    }

    @SuppressWarnings("unchecked")
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_MENU) {
            if (mllpopmenu.getVisibility() == View.VISIBLE) {
                mllpopmenu.setVisibility(View.INVISIBLE);
            } else {
                if (commonGroupPosition >= 4 && menuType == true) {
                    if(childValContact == ""){
                        mllpopmenu.setVisibility(View.VISIBLE);

                        mlist2.setAdapter(new ArrayAdapter(UserMenuActivity.this,
                                R.layout.listviewtext, R.id.tvMenuText,
                                data_Contact));

                    }else{
                        mllpopmenu.setVisibility(View.VISIBLE);
                        mlist2.setAdapter(new ArrayAdapter(UserMenuActivity.this,
                                R.layout.listviewtext, R.id.tvMenuText,
                                data_child_contact));

                    }

                } else if (commonGroupPosition == 0) {
                    mllpopmenu.setVisibility(View.VISIBLE);
                    mlist2.setAdapter(new ArrayAdapter(UserMenuActivity.this,
                            R.layout.listviewtext, R.id.tvMenuText, data));
                }
            }
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    protected void onResume() {
        super.onResume();
        mCustomProgressDialog = CustomProgressDialog.createDialog(
                UserMenuActivity.this, "", "");
        mCustomProgressDialog.show();
        new Thread(){
            public void run() {
                XMPPConn.getContactList();
                expendableHandle.sendEmptyMessage(0);
            };
        }.start();
        super.onResume();
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();

        unregisterReceiver(UpdateList);
    }

    public boolean onChildClick(ExpandableListView parent, View v,
            int groupPosition, int childPosition, long id) {
        if(groupPosition == 0){
            Intent intent = new Intent(UserMenuActivity.this,UserChatActivity.class);
            intent.putExtra("userNameVal",chatUser.get(childPosition));
            intent.putExtra("message","");          
            startActivity(intent);
        }else if (groupPosition == 1 && childPosition == 0) {
            startActivity(new Intent(UserMenuActivity.this,
                    InvitetoCCMActivity.class));
        } else if (groupPosition == 1 && childPosition != 0) {
            Intent intent = new Intent(UserMenuActivity.this,
                    UserChatActivity.class);
            intent.putExtra("userNameVal",
                    XMPPConn.mfriendList.get(childPosition - 1).friendName);
            intent.putExtra("message","");
            startActivity(intent);
        } else if (groupPosition == 2 && childPosition == 0) {
            startActivity(new Intent(UserMenuActivity.this,
                    CreateGroupActivity.class));
        } else if (groupPosition == 2 && childPosition != 0) {
            String GROUP_NAME = childs.get(groupPosition).get(childPosition)
            .getName().toString();
            int end = GROUP_NAME.indexOf("(");
            CCMStaticVariable.groupName = GROUP_NAME.substring(0, end).trim();
            startActivity(new Intent(UserMenuActivity.this,
                    GroupsActivity.class));
        } else if (groupPosition >= 4) {
            childValContact = childs.get(groupPosition).get(childPosition).getName().trim();
            showToast("user==>"+childValContact, 0);
        }
        return false;
    }

    private void setExpandableListView() {
        /***###############GROUP ARRAY ############################*/
        final ArrayList<String> groupNames = new ArrayList<String>();
        chatUser = dbHelper.getChatUser();
        groupNames.add("Chats ("+chatUser.size()+")");  
        groupNames.add("Contacts (" + XMPPConn.mfriendList.size() + ")");
        groupNames.add("CGM Groups (" + XMPPConn.mGroupList.size() + ")");
        groupNames.add("Pending (1)");

        XMPPConn.getGroup();
        categoryList = dbHelper.getAllCategory();
        /**Group From Sever*/
        if (XMPPConn.mGroupList.size() > 0) {
            for (int g = 0; g < XMPPConn.mGroupList.size(); g++) {
                XMPPConn.getGroupContact(XMPPConn.mGroupList.get(g).groupName);
                groupNames.add(XMPPConn.mGroupList.get(g).groupName + "("
                        + XMPPConn.mGroupContactList.size()+ ")");
            }
        } 
        if(categoryList.size() > 0){
            for (int cat = 0; cat < categoryList.size(); cat++) {
                groupNames.add(categoryList.get(cat).getCategoryName()+ "(0)");
            }
        }
        this.groupNames = groupNames;

        /*** ###########CHILD ARRAY * #################*/
        ArrayList<ArrayList<ChildItems>> childs = new ArrayList<ArrayList<ChildItems>>();
        ArrayList<ChildItems> child = new ArrayList<ChildItems>();
        if(chatUser.size() > 0){
            for(int i = 0; i < chatUser.size(); i++){
                child.add(new ChildItems(userName(chatUser.get(i)), "",0,null));
            }
        }else{
            child.add(new ChildItems("--No History--", "",0,null));
        }       
        childs.add(child);

        child = new ArrayList<ChildItems>();
        child.add(new ChildItems("", "",0,null));
        if (XMPPConn.mfriendList.size() > 0) {
            for (int n = 0; n < XMPPConn.mfriendList.size(); n++) {
                child.add(new ChildItems(XMPPConn.mfriendList.get(n).friendNickName,
                        XMPPConn.mfriendList.get(n).friendStatus, 
                        XMPPConn.mfriendList.get(n).friendState,
                        XMPPConn.mfriendList.get(n).friendPic));
            }
        }
        childs.add(child);
        /************** CGM Group Child here *********************/
        child = new ArrayList<ChildItems>();
        child.add(new ChildItems("", "",0,null));

        if (XMPPConn.mGroupList.size() > 0) {
            for (int grop = 0; grop < XMPPConn.mGroupList.size(); grop++) {
                child.add(new ChildItems(
                        XMPPConn.mGroupList.get(grop).groupName + " ("
                        + XMPPConn.mGroupList.get(grop).groupUserCount
                        + ")", "",0,null));
            }
        }
        childs.add(child);

        child = new ArrayList<ChildItems>();
        child.add(new ChildItems("Shuchi",
                "Pending (Waiting for Authorization)",0,null));
        childs.add(child);
        /************************ Group Contact List *************************/
        if (XMPPConn.mGroupList.size() > 0) {
            for (int g = 0; g < XMPPConn.mGroupList.size(); g++) {
                /** Contact List */
                XMPPConn.getGroupContact(XMPPConn.mGroupList.get(g).groupName);
                child = new ArrayList<ChildItems>();
                for (int con = 0; con < XMPPConn.mGroupContactList.size(); con++) {
                    child.add(new ChildItems(
                            XMPPConn.mGroupContactList.get(con).friendName,
                            XMPPConn.mGroupContactList.get(con).friendStatus,0,null));
                }
                childs.add(child);
            }
        } 
        if(categoryList.size() > 0){
            for (int cat = 0; cat < categoryList.size(); cat++) {
                child = new ArrayList<ChildItems>();
                child.add(new ChildItems("-none-", "",0,null));
                childs.add(child);
            }
        }
        this.childs = childs;

        /** Set Adapter here */
        adapter = new UserMenuAdapter(this, groupNames, childs);
        setListAdapter(adapter);
        object = this;

        mlist2 = (ListView) findViewById(R.id.list2);
        mimBtnMenu = (ImageButton) findViewById(R.id.imBtnMenu);
        mllpopmenu = (LinearLayout) findViewById(R.id.llpopmenu);
        mtvUserName = (TextView) findViewById(R.id.tvUserName);
        mtvUserTagLine = (TextView) findViewById(R.id.tvUserTagLine);

        //Set User name..
        System.out.println("CCMStaticVariable.loginUserName==="
                + CCMStaticVariable.loginUserName);
        if (!CCMStaticVariable.loginUserName.equalsIgnoreCase("")) {
            mtvUserName.setText("" + CCMStaticVariable.loginUserName);
        }
        /** Expandable List set here.. */
        mExpandableListView = (ExpandableListView) this
        .findViewById(android.R.id.list);
        mExpandableListView.setOnGroupClickListener(new OnGroupClickListener() {
            @Override
            public boolean onGroupClick(ExpandableListView parent, View v,
                    int groupPosition, long id) {   

                if (parent.isGroupExpanded(groupPosition)) {
                    commonGroupPosition = 0;
                }else{
                    commonGroupPosition = groupPosition;
                }
                String GROUP_NAME = groupNames.get(groupPosition);
                int end = groupNames.get(groupPosition).indexOf("(");
                String GROUP_NAME_VALUE = GROUP_NAME.substring(0, end).trim();
                if (menuItemList.contains(GROUP_NAME_VALUE)) {
                    menuType = false;
                    CCMStaticVariable.groupCatName = GROUP_NAME_VALUE;
                } else {
                    menuType = true;
                    CCMStaticVariable.groupCatName = GROUP_NAME_VALUE;
                }
                long findCatId = dbHelper.getCategoryID(GROUP_NAME_VALUE);
                if (findCatId != 0) {
                    categoryID = (int) findCatId;
                }
                childValContact="";
                //showToast("Clicked on==" + GROUP_NAME_VALUE, 0);
                return false;
            }
        });

        /** Click on item */
        mlist2.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int pos,long arg3) {
                if (commonGroupPosition >= 4) {
                    if(childValContact == ""){
                        if (pos == 0) {
                            showAlertEdit(CCMStaticVariable.groupCatName);
                        }                   
                        /** Move contact to catgory */
                        if (pos == 1) {
                            startActivity(new Intent(UserMenuActivity.this,AddContactCategoryActivity.class));
                        }
                    }else{
                        if(pos == 0){
                            Intent intent = new Intent(UserMenuActivity.this,UserChatActivity.class);
                            intent.putExtra("userNameVal",childValContact);
                            startActivity(intent);
                        }
                        if(pos == 1){
                            XMPPConn.removeEntry(childValContact);
                            showToast("Contact deleted sucessfully", 0);
                            Intent intent = new Intent(UserMenuActivity.this,UserMenuActivity.class);
                        }
                    }

                } else {
                    /** MyProfile */
                    if (pos == 0) {
                        startActivity(new Intent(UserMenuActivity.this,
                                MyProfileActivity.class));
                    }
                    /** New multiperson chat start */
                    if (pos == 1) {
                        startActivity(new Intent(UserMenuActivity.this,
                                NewMultipersonChatActivity.class));
                    }
                    /** New Broadcast message */
                    if (pos == 2) {
                        startActivity(new Intent(UserMenuActivity.this,
                                NewBroadcastMessageActivity.class));
                    }
                    /** Click on add category */
                    if (pos == 3) {
                        showAlertAdd();
                    }
                    if (pos == 4) {
                        startActivity(new Intent(UserMenuActivity.this,
                                CreateGroupActivity.class));
                    }

                    if (pos == 5) {
                        startActivity(new Intent(UserMenuActivity.this,
                                InvitetoCCMActivity.class));
                    }
                    if (pos == 6) {
                        startActivity(new Intent(UserMenuActivity.this,
                                SearchActivity.class));
                    }
                    if (pos == 7) {
                        onGroupExpand(2);
                        for (int i = 0; i < groupNames.size(); i++) {
                            mExpandableListView.expandGroup(i);
                        }
                    }
                    /** Click on settings */
                    if (pos == 8) {
                        startActivity(new Intent(UserMenuActivity.this,
                                SettingsActivity.class));
                    }
                    if (pos == 10) {
                        System.exit(0);
                    }

                    if (pos == 14) {
                        if (mllpopmenu.getVisibility() == View.VISIBLE) {
                            mllpopmenu.setVisibility(View.INVISIBLE);
                            if (popupWindow.isShowing()) {
                                popupWindow.dismiss();
                            }
                        } else {
                            mllpopmenu.setVisibility(View.VISIBLE);

                            mlist2.setAdapter(new ArrayAdapter(
                                    UserMenuActivity.this,
                                    R.layout.listviewtext, R.id.tvMenuText,
                                    data));
                        }
                    }
                }
            }
        });
    }

    /** Toast message display here.. */
    private void showToast(String msg, int time) {
        Toast.makeText(this, msg, time).show();
    }

    /** Show EditAlert Box */
    private void showAlertEdit(String msg) {
        alert = new AlertDialog.Builder(UserMenuActivity.this);
        input = new EditText(UserMenuActivity.this);
        input.setSingleLine();
        input.setText(msg);
        alert.setTitle("Edit Category Name");
        alert.setView(input);
        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                dialog.cancel();
                etAlertVal = input.getText().toString();
                /** isGroupFromServerOrMobile */
                RosterGroup isGroupExists = CCMStaticVariable.CommonConnection
                .getRoster().getGroup(CCMStaticVariable.groupCatName);
                if (isGroupExists == null) {
                    dbHelper.updateCategory(categoryID, etAlertVal);
                    Intent intent = new Intent(UserMenuActivity.this,
                            UserMenuActivity.class);
                    startActivity(intent);
                    showToast("Category updated sucessfully", 0);
                } else {
                    CCMStaticVariable.CommonConnection.getRoster()
                    .getGroup(CCMStaticVariable.groupCatName)
                    .setName(etAlertVal);
                    Intent intent = new Intent(UserMenuActivity.this,
                            UserMenuActivity.class);
                    startActivity(intent);
                    showToast("Category updated sucessfully", 0);
                }
            }
        });

        alert.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                dialog.cancel();
            }
        });
        alert.show();
    }

    /** ShowAlertBox Edit */
    private void showAlertAdd() {
        alert = new AlertDialog.Builder(UserMenuActivity.this);
        input = new EditText(UserMenuActivity.this);
        input.setSingleLine();
        alert.setTitle("New Category Name");
        alert.setView(input);
        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                dialog.cancel();
                etAlertVal = input.getText().toString();
                if (!etAlertVal.equalsIgnoreCase("request")) {
                    long lastInsertedId = dbHelper.insertCategory(etAlertVal);
                    CCMStaticVariable.groupCatName = etAlertVal;
                    Intent intent = new Intent(UserMenuActivity.this,AddContactCategoryActivity.class);                 
                    startActivity(intent);
                }
            }
        });
        alert.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                dialog.cancel();
            }
        });
        alert.show();
    }

    public String showSubscriptionStatus(String friend){
        return friend;
    }
    public String userName(String jid){
        String username = "";
        if(jid.contains("@")){
            int index = jid.indexOf("@");
            username = jid.substring(0, index);
        }else{
            username = jid;
        }       
        return username;
    }

    /**Set expandable handler here..*/
    Handler expendableHandle = new Handler(){
        public void handleMessage(android.os.Message msg) {
            mCustomProgressDialog.dismiss();
            setExpandableListView();
        };
    };

    BroadcastReceiver UpdateList = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            Toast.makeText(UserMenuActivity.this, "CALLED", Toast.LENGTH_SHORT).show();
            adapter.notifyDataSetChanged();

        }
    };

} 
```

请建议我这里有什么问题。我看过很多帖子，并尝试了很多关于相同的事情。但它对我不起作用。请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:29:39.503

这个

```
 startActivity(new Intent(LoginActivity.this,UserMenuActivity.class)); 
```

这个

```
CCMStaticMethod.showAlert(context, "Login",
                        "Invalid Username or Password. Try Again !", R.drawable.unsuccess,
                        true, true, "Ok", LoginUnSuccessOkAlertListener, null,
                        null);
            } 
```

和这个

```
 mCustomProgressDialog.dismiss(); 
```

不要从异步任务执行 UI 事件。改为使用`activity.runOnUiThread()`。

# android - 如何在 SVN 中获取下一个修订号

> ID：12987885
> 
> 赞同：4
> 
> 时间：2012-10-20T11:19:22.747
> 
> 标签：android, eclipse, svn

我正在使用 eclipse 和 svn 开发 android 应用程序进行版本控制。

在提交我的项目源代码之前，我想知道 svn 的下一个修订号。

Form `Properties->Team->Show History`，我可以获得当前的修订号，但我不能假设下一个修订号将始终为 +1 ，因为从分支中如果进行了任何提交，那么下一个修订号将是 +2 或 +3 取决于提交的数量从分支。

所以请有人告诉我如何获得下一个修订号。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T11:31:08.330

> 在提交我的项目源代码之前，我想知道 svn 的下一个修订号。

我认为这是不可能的，因为你说的确切原因是：在你收到号码和提交之间可能会有修改。据我所知，Subversion 不允许“锁定”修订号——也没有任何意义。

> 我正在尝试将下一个修订号设置为我的版本代码

有一个既定的工作流程可将修订号插入您的代码库。这可能就是你想要的。在[这个问题中进行了解释。](https://stackoverflow.com/questions/2008843/subversion-add-revision-data-to-code-file-on-commit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T06:58:54.683

无需设置*下一个*修订号。没关系，如果您使用当前修订版 + 1，或当前修订版 + 42，或当前修订版 - 123，只要您始终使用相同的常量（因此版本代码会随着修订版的*增加而**增加*）。

鉴于上述*所有*常量的可能选择，当前版本 + 0 是最容易选择和实现的，因为大多数版本控制系统可以将该数字直接嵌入文件中。

# java - 使用Java中的数组更好的最小和最大算法

> ID：12987892
> 
> 赞同：2
> 
> 时间：2012-10-20T11:20:08.117
> 
> 标签：java, algorithm

我试图写一个简单的 max 和 min 方法，当我写它时，我不禁觉得它不应该这么复杂......也许我错了？我的最大代码是这样工作的，请原谅我糟糕的伪代码：

用 10 个随机数填充一个数组。创建一个初始化为 0 的最大变量，因为 0 是最低的最大值。将每个元素与最大值进行比较如果元素大于最大值，则将最大值替换为有问题的元素

我不喜欢我必须将 max 初始化为 0 的事实，我觉得可能有更好的方法呢？

我的 min 代码的工作原理类似，除了我：比较我的 min 低于数组元素。如果元素较低，请替换 min。

我真正不喜欢的是我必须将我的最小值初始化为最大随机数，在本例中为 50。

我的问题是：有没有更好的方法来做到这一点？有没有更有效的方法来编写这段代码？

```
import java.util.Random;

public class Main {

public static void main(String[] args) {

    //Declare min and max
    int max=0;
    int min;
    //Array of 10 spaces
    int[] ar=new int[10];
    //fill an array with random numbers between 0 and 50

    for(int i=0;i<10;i++)
    {
        ar[i]=new Random().nextInt(50);
    }

    //Test max algorithm
    //loop trough elements in array
    for(int i=0;i<10;i++)
    {
        //max is set to 0, there should always be a maximum of 0
        //If there isnt 0 will be the maximum

        //If element is greater then max
        //replace max with that element
        if(ar[i]>max)
        {
            max=ar[i];
        }
    }
    System.out.println("The max is "+ max);

    //Test min
    //Initialising min to maximum Random number possible?
    min=50;
    for(int i=0;i<10;i++)
    {
        if(ar[i]<min){
            min=ar[i];
        }
    }
    System.out.println("The min is "+min);

} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T11:26:13.560

您始终可以将数组的第一个元素（即`numbers[0]`）作为初始值并从第二个元素开始循环。

```
int[] numbers = new int[10];
int max, min;
...
min = max = numbers[0];
for(int i = 1; i < numbers.length; ++i) {
    min = Math.min(min, numbers[i]);
    max = Math.max(max, numbers[i]);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-20T11:37:18.003

好的，虽然其他人已经发布了答案，但我已经花时间将您的代码编辑成我认为更有用的东西。

1.  制作静态方法。那些可以重复使用。
2.  使用省略号 (...)，因为您可以像在代码中一样调用数组参数的方法，也可以使用可变数量的参数作为`min(5,3,8,4,1)`.
3.  用数据类型提供的最小/最大可能数字初始化
4.  要检查您的代码是否有效，您必须先打印出数组中的项目，因为当您不知道其中的内容时，就无法判断结果是否正确。
5.  将您的代码基于标准库中的现有方法，因为众所周知，这些方法经过了彻底的测试并且可以有效地工作（我知道，min/max 看起来像一个太微不足道的例子）。
6.  除非您真的可以证明您的代码中存在性能问题，否则我不会过多关注性能。优先级应该更像是第一正确性、第二可读性/可维护性、第三性能。

其他人已经提到了大部分内容，但无论如何，这是代码：

```
import java.util.Random;

public class MinMax {

    public static int min(int... args) {
        int m = Integer.MAX_VALUE;
        for (int a : args) {
            m = Math.min(m, a);
        }
        return m;
    }

    public static int max(int... args) {
        int m = Integer.MIN_VALUE;
        for (int a : args) {
            m = Math.max(m, a);
        }
        return m;
    }

    public static void main(String[] args) {

        // fill an array with random numbers between 0 and 50
        int[] ar = new int[10];
        for (int i = 0; i < 10; i++)
        {
            ar[i] = new Random().nextInt(50);
            System.out.println(ar[i]);
        }

        int maxValue = max(ar);
        int minValue = min(ar);

        System.out.println("The max is " + maxValue);
        System.out.println("The min is " + minValue);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T11:30:06.973

几个小贴士：

1.  使用第一个元素初始化`min`并从第二个元素开始：

    ```
    int min = ar[0];
    for(int i=1;i<10;i++) 
    ```

2.  ...或从：

    ```
    int min = Integer.MAX_VALUE; 
    ```

    如果您希望您的数组可以是空的，这种方法会更好。

3.  用于`Math.min`避免显式条件（有些人可能会说它更慢）：

    ```
    for(int i=0;i<10;i++)
    {
       min = Math.min(min, ar[i]);
    } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T11:26:29.917

当数字改变时，将最大值初始化为 0 和最小值为 50 将不起作用。更合适的方式是：
1\. 将它们初始化为数组的第一个元素。
2\. 使用`length`代替常数。

```
max = ar[0];  
    for(i=0;i<ar.length; i++)  
    {  
            if(ar[i]>max)  
            {  
                max=ar[i];  
            }  
    } 
```

分钟相同：

```
min = ar[0];
for(i=0;i<ar.length; i++)
{
        if(ar[i]<min)
        {
            min=ar[i];
        }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T06:19:55.070

```
public static void main(String[] args) {
     int[] myArray = {9, 7,9, -40, -10, 40};
    //int[] myArray = {};
    //int[] myArray = {4};
    System.out.println("Difference between max and min = "
            + findDifference(myArray));
}

// Find difference between Max and Min values for a given array
public static int findDifference(int[] arr) {

    if (arr.length == 0) {
        // Log
        System.out.println("Input Array is empty");

        return Integer.MIN_VALUE;
    }

    int min = arr[0];
    int max = arr[0];

    for (int i = 1; i < arr.length; i++) {
        if (arr[i] < min)
            min = arr[i];
        else if (arr[i] > max)
            max = arr[i];
        // Just to check if logic works fine
        System.out.println("Min=" + min + " Max=" + max);
    }

    return max - min;

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-02T01:17:31.013

```
import java.io.*;

public class MultiDimensionalArrayIO {

public static void main(String[] args)throws IOException {
BufferedReader c= new BufferedReader (new InputStreamReader (System.in) );

System.out.print ( "Enter Number Column : " );
int column = Integer.parseInt(c.readLine());
System.out.print ( "Enter Number Row : " );
int row = Integer.parseInt(c.readLine());

int array [][] = new int [column][row];
int max = array [0][0];
int min = array [0][0];
int sum= 0;
for ( int i=0 ; i < array.length; i++){   
for (int j=0 ; j<array[i].length; j++){
    System.out.print("Enter Array Values ["+i+"]["+j+"]: " );
    array[i][j]= Integer.parseInt (c.readLine()); 

        min = Math.min(min , array[i][j]);
        max = Math.max(max , array[i][j]);
        sum += array[i][j];
}    
}

    System.out.println("The Min Number :"+ min);
    System.out.println("The Max Number :"+ max+ " total is "+ sum);

}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-21T09:44:25.993

根据您是否希望在同一方法中使用 max 和 min 函数，您还必须考虑返回类型。

到目前为止，大多数建议都将两者分开，这意味着可以返回一个 int。但是，如果将 max 和 min 函数放入 findLargestDifference 方法中，则必须返回 long 查看，因为 int 数组中任何给定数字之间的最大差异可能是 2 个 int 的大小。您还不必在 int 数组上循环两次。

此外，我建议为角落和边缘案例编写单元测试，而不是在主方法中打印。它有助于在实现逻辑时尽早测试您的逻辑，因此通常会使代码更清晰。

请参阅下面的示例代码。

```
public class LargestDifference {

public static long find(int[] numbers) {
    if (numbers == null || numbers.length == 0) {
        throw new IllegalArgumentException("Input cannot be null or empty.");
    }else {
        long currentMax = numbers[0];
        long currentMin = numbers[0];

        for (int i=0; i < numbers.length; i++) {
            if (currentMin > numbers[i]) {
                currentMin = numbers[i];
            }else if (currentMax < numbers[i]) {
                currentMax = numbers[i];
            }
        }
        return currentMax - currentMin;
    }
} 
```

# wordpress - 类别列表页面，帖子过滤到 Wordpress 博客上的选定标签

> ID：12987895
> 
> 赞同：0
> 
> 时间：2012-10-20T11:20:37.550
> 
> 标签：wordpress, wordpress-theming

我正在开发一个 Wordpress 3.4 项目。我有类别，然后是几个标签，还有一个自定义分类法作为类型。

就处理所有分类页面而言，Wordpress 非常棒，但我无法弄清楚如何让我有类别列表页面（带分页）的页面专门过滤到选定的标签或自定义分类。

所以基本上我想要分类，但话又说回来，我还需要一个分类页面，将所有帖子过滤到特定标签，然后进行分页。

我试图弄清楚如何做到这一点，但无法找到确切的文档或帮助。问题还在于 URL，它是如何形成的？

知道如何解决这个问题，或者任何插件来完成这些事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:42:23.263

我认为这两个法典页面将帮助您一路走好。

[http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query) 和 [http://codex.wordpress.org/images/1/18/Template_Hierarchy.png](http://codex.wordpress.org/images/1/18/Template_Hierarchy.png)

您可以使用 WP_Query 根据标签和类别/自定义分类等查询帖子。

如果您查看模板层次结构，您会发现您也可以将特殊模板文件用于标签和分类法。如果您在创建模板时没有看到这些模板被使用，请记住刷新您的永久链接。

# android - 在 Android 中运行 ffmpeg 命令会为图像路径提供 Protocol not found 错误

> ID：12987896
> 
> 赞同：1
> 
> 时间：2012-10-20T11:20:42.157
> 
> 标签：android, command-line, ffmpeg

我正在尝试使用 Android 命令行中的 ffmpeg 将图像转换为视频。我已将我的图像序列存储在 sdcard 上。当我运行 ffmpeg 命令将图像转换为视频时， ffmpeg 命令给我错误`Protocol not found`。

我的命令是这样的：

```
/data/data/package/files/ffmpeg -r 40 -qscale 2 -i /mnt/sdcard/images/img%d.jpg /mnt/sdcard/images/finalvideo.mp4 
```

错误是这样的`/mnt/sdcard/vid.mp4: Protocol not found`

我发现`error.c`文件中提到的相同错误消息。但是当它抛出错误时，我没有得到错误的类型和条件。此外，当我从 Android 和 Linux 运行 ffmpeg 命令时`ffmpeg -protocols`，支持的协议数量也不相同。

我发现 Android 中缺少文件和许多协议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:15:41.173

看看这个链接：[https](https://github.com/halfninja/android-ffmpeg-x264) ://github.com/halfninja/android-ffmpeg-x264 我不确定你使用的是NDK FFMPEG

# objective-c - NSDateFormetter 失去一年

> ID：12987901
> 
> 赞同：0
> 
> 时间：2012-10-20T11:21:02.433
> 
> 标签：objective-c, ios, nsstring, nsdate, nsdateformatter

我`NSDateFormatter`用来将日期`NSString`实例转换为`NSDate`对象。有一次，我意识到有些地方不对劲，当我进行检查`NSDateFormatter`时，从字符串转换为`NSDate`.

代码如下所示：

```
NSString *dateString = [dictionary objectForKey:@"match_date_time"];
if (dateString) {
     // dateString is "2012-10-30 04:30:00"

     NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
     [formatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
     [formatter setDateFormat:@"YYYY-MM-dd HH:mm:ss"];

     self.date = [formatter dateFromString:dateString];
     // self.date ends up 2011-10-30 04:30:00 +0000, yes 2011 not 2012.
} 
```

有谁知道为什么`NSDateFormatter`失败如此悲惨？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:24:33.540

只需写下面的代码

```
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
```

# r - R从csv文件中获取符号

> ID：12987903
> 
> 赞同：-3
> 
> 时间：2012-10-20T11:21:13.010
> 
> 标签：r, quantmod

我正在尝试使用 R 中的 getSymbols (quantmod) 包从 .csv 文件中的股票列表中下载股票价格。

我已将 .csv 文件导入 R 但不确定如何使用 getSymbols 从 .csv 文件中读取

所以我有我的股票代码列表，我希望 getSymbols 下载列表中每个代码的价格数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T11:46:35.490

我看到的唯一困难是`getSymbols`将字符向量作为输入，而不是一个因素。`stringsAsFactors = FALSE`因此，从文件中读取符号时必须小心并使用：

```
csv <- read.csv(textConnection("

SYMBOLS
IBM
GOOG
YHOO

"), stringsAsFactors = FALSE)

library(quantmod)
getSymbols(csv$SYMBOLS)
# [1] "IBM"  "GOOG" "YHOO" 
```

或者，如果您已经将符号放在名为 的因子中`x`，则可以运行`getSymbols(as.character(x))`.

# jpa - JPA EntityManagerFactory

> ID：12987904
> 
> 赞同：0
> 
> 时间：2012-10-20T11:21:16.413
> 
> 标签：jpa, hibernate-entitymanager

我在我的项目中使用 jpa。但我必须调用所有方法并连接到数据库。我想用 entitymanagerfactory 和其他想要使用的方法连接一次数据库。我制作了静态 entitymanagerfactory 和 entitymanager，因此我接受了一个错误，即事务处于活动状态。

如何与jpa公开联系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:49:40.543

我怀疑以后还会有其他问题，我建议您按照[本教程](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/SettingUpJPA/SettingUpJPA.htm)学习如何制作 Java SE JPA 应用程序。[此处](http://glassfish.java.net/javaee5/persistence/persistence-example.html)更完整的基础教程非常关注 Sun 自己的工具集和组件，但底层基础知识和示例代码可能会对您有所帮助。

无论如何，开始看起来像这样：

```
public static void main(String[] args) {
    EntityManagerFactory emf = Persistence.createEntityManagerFactory("PersistenceUnitName");
    EntityManager em = emf.createEntityManager();

    // let's start a transaction, everything we do from here on can be either
    // committed or rolled back, ensuring the integrity of our data
    em.getTransaction().begin();
    // update the database here

    // okay, done
    em.getTransaction().commit();

    // and housekeeping, close em an emf
    em.close();
    emf.close(); 
```

}

如您所见，em 和 emf 都不必是静态的。如果您（应该）将项目细分为对象，则可以将它们传递`em`给这些对象，这些对象将使用它与数据库进行交互。此外，您不限于只有一个跨越应用程序整个生命周期的大事务，您可以有几个连续的事务。

# matlab - 如何在matlab中使曲线平滑？

> ID：12987905
> 
> 赞同：9
> 
> 时间：2012-10-20T11:21:32.360
> 
> 标签：matlab, signal-processing, curve-fitting

![渐变图像](../Images/0ba1bf57ea7785bee845b16c67810eb6.png)

蓝色情节是原始情节（红色）的嘈杂情节。有没有办法将蓝色图近似为红色图？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-20T12:38:12.157

让我们定义一个波浪函数：

```
x = 0:.1:20;
y1 = 5*sin(x) + 2*x - x.^2 +.3*x.^3 - .2*(x-15).^4 - 10*x.^2.*cos(x./3+12).^3 + .5*(x-12).^4; 
```

并添加大量噪音：

```
r = randi(1000,1,201) - 500;
y2 = y1+r; 
```

现在制作一个一维高斯滤波器，对其进行归一化并与我们的函数进行[卷积：](http://www.mathworks.nl/help/matlab/ref/conv.html)

```
g = gausswin(20); % <-- this value determines the width of the smoothing window
g = g/sum(g);
y3 = conv(y2, g, 'same') 
```

让我们看看结果

```
figure;
hold on; 
plot(y1, 'r', 'linewidth', 3); 
plot(y2, 'b'); 
plot(y3, 'g', 'linewidth', 3); 
```

红色是原始函数，蓝色是嘈杂版本，绿色是平滑的“恢复”函数。

![平滑函数的折线图](../Images/b8604ab684cc5a8645f857a5ea488ca2.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-20T16:27:57.053

另一种选择是使用“平滑”。我喜欢使用它，因为它是**单行**函数。使用@Junuxx 上一个答案的代码：

```
x = 0:.1:20;
y1 = 5*sin(x) + 2*x - x.^2 +.3*x.^3 - .2*(x-15).^4 - 10*x.^2.*cos(x./3+12).^3 + .5*(x-12).^4;
r = randi(1000,1,201) - 500;
y2 = y1+r; 
```

现在应用平滑：

```
ys = smooth(x,y2,0.25,'rloess');
plot(x,y2,x,ys) 
```

![在此处输入图像描述](../Images/e94c1b6702424ff019d90055d94b18c3.png)

欲了解更多信息：

```
doc smooth 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-03T14:53:44.337

`gausswin()`需要*信号处理工具箱*

`smooth()`需要*曲线拟合工具箱*

如果你没有这些工具箱，这里有一个简单的`smooth()`实现：

**平滑.m：**

```
function yy = smooth(y, span)
    yy = y;
    l = length(y);

    for i = 1 : l
        if i < span
            d = i;
        else
            d = span;
        end

        w = d - 1;
        p2 = floor(w / 2);

        if i > (l - p2)
           p2 = l - i; 
        end

        p1 = w - p2;

        yy(i) = sum(y(i - p1 : i + p2)) / d;
    end
end 
```

**的结果`y3 = smooth(y2, 15)`，使用@Junuxx 代码：**

[![在此处输入图像描述](../Images/2efba4b6c79843a82c100057a5ae6025.png)](https://i.stack.imgur.com/6pRis.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-20T14:04:35.020

只是添加一个额外的选项：

`cftool`在matlab的提示符下使用：

*   [matlab中的cftool是什么](http://www.mathworks.com/help/curvefit/cftool.html)
*   [如何使用 cftool 一个例子](http://www.swarthmore.edu/NatSci/echeeve1/Ref/MatlabCurveFit/MatlabCftool.html)

![在此处输入图像描述](../Images/ead8d203dd187060b329f6b2ad353651.png)

# git - Git：如何提交手动删除的文件？

> ID：12987907
> 
> 赞同：104
> 
> 时间：2012-10-20T11:21:39.970
> 
> 标签：git, github

在我的 git 存储库中，我在将文件（`rm`）移动到另一个文件夹后手动删除了它。我将所有更改提交到我的仓库，但现在当我这样做时`git status .`

```
ronnie@ronnie:/home/github/Vimfiles/Vim$ git status .
# On branch master
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       deleted:    plugin/dwm.vim
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

现在，我应该如何提交以便`dwm.vim`从我的远程仓库的插件文件夹中删除。我知道我必须使用`git add && git commit`，但我没有要提交/添加的文件，因为`/plugin/dwm.vim`已被删除。

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-10-20T11:24:34.113

答案就在[这里](https://stackoverflow.com/questions/492558/removing-multiple-files-from-a-git-repo-that-have-already-been-deleted-from-disk)，我想。

不过，如果你这样做会更好`git rm <fileName>`。

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2012-10-20T11:25:12.683

使用`git add -A`，这将包括已删除的文件。

注意：`git rm`用于某些文件。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-10-20T11:24:59.047

它在输出中说`git status`：

```
#   (use "git add/rm <file>..." to update what will be committed) 
```

所以就这样做：

```
git rm <filename> 
```

# python - 使用 ElementTree 输出“未使用”的 XML 命名空间

> ID：12987908
> 
> 赞同：2
> 
> 时间：2012-10-20T11:21:41.357
> 
> 标签：python, xml, elementtree

我正在使用 Python 3.2's `xml.etree.ElementTree`，并尝试像这样生成 XML：

```
<XnaContent xmlns:data="Model.Data">
    <Asset Type="data:MyData">
        ... 
```

格式不受我控制（它是 XNA）。请注意，`data`XML 名称空间实际上从未用于限定元素或属性，而是用于限定 XNA 的属性值。我的代码如下所示：

```
root = Element('XnaContent')
ET.register_namespace('data', 'Model.Data') 
asset = SubElement(root, 'Asset', {"Type": "data:MyData"}) 
```

但是，输出看起来像（我打印得很漂亮）：

```
<XnaContent>
    <Asset Type="data:MyData">
        ...
    </Asset>
</XnaContent> 
```

如何获取`data`输出中包含的 XML 命名空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:12:31.730

```
>>>print ET.tostring(doc, pretty_print=True)
<XnaContent>
  <Asset Type="data:MyData"/>
  <Asset Type="data:MyData"/>
</XnaContent>
>>> tree=ET.ElementTree(doc)
>>> root=tree.getroot()
>>> nsmap=root.nsmap
>>> nsmap['data']="ModelData"
>>> new_root = ET.Element(root.tag, nsmap=nsmap)
>>> print ET.tostring(new_root, pretty_print=True)
<XnaContent xmlns:data="ModelData"/>
>>> new_root[:] = root[:]
>>> print ET.tostring(new_root, pretty_print=True)
<XnaContent xmlns:data="ModelData">
  <Asset Type="data:MyData"/>
  <Asset Type="data:MyData"/>
</XnaContent> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T13:05:06.497

```
import xml.etree.ElementTree as ET
content = '''
<XnaContent>
  <Asset Type="data:MyData"/>
  <Asset Type="data:MyData"/>
</XnaContent>'''
doc = ET.fromstring(content)
ET.register_namespace('data','ModelData')
tree = ET.ElementTree(doc)
root = tree.getroot()
root.tag = '{ModelData}XnaContent'
print(ET.tostring(root, method = 'xml')) 
```

产量

```
<data:XnaContent xmlns:data="ModelData">
      <Asset Type="data:MyData" />
      <Asset Type="data:MyData" />
    </data:XnaContent> 
```

# android - SmsManager 的结果错误是什么意思？

> ID：12987909
> 
> 赞同：8
> 
> 时间：2012-10-20T11:22:06.300
> 
> 标签：android

当我使用 发送短信时`SmsManager`，广播的结果意图的值为 5

```
Activity.RESULT_OK
SmsManager.RESULT_ERROR_GENERIC_FAILURE
SmsManager.RESULT_ERROR_NO_SERVICE
SmsManager.RESULT_ERROR_NULL_PDU
SmsManager.RESULT_ERROR_RADIO_OFF 
```

他们每个人的意思是什么？请提及一个可以生成每个测试用例的测试用例。我知道 RESULT_OK 表示成功发送的短信。GENERIC_FAILURE 出现一般错误（例如我没有信用）。

但是我已经激活了飞行模式并尝试发送短信。我以为它会触发 NO_SERVICE 错误，但触发了 RADIO_OFF。官方文档也没有很好地展示它们。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-20T11:51:35.503

这是我对[SmsManager 文档的评论](http://developer.android.com/reference/android/telephony/SmsManager.html#RESULT_ERROR_GENERIC_FAILURE)：

*   `RESULT_ERROR_GENERIC_FAILURE`:*一般故障原因*

    出了点问题，没有办法说出是什么，为什么或如何。

*   `RESULT_ERROR_NO_SERVICE`:*失败，因为服务当前不可用*

    您的设备根本无法接收手机信号。你可能在偏僻的地方，在里面的某个地方，地下，或者在太空中。当然远离任何手机信号塔。

*   `RESULT_ERROR_NULL_PDU`:*失败，因为没有提供 pdu*

    SMS 堆栈出现问题，同时使用[协议描述单元 (PDU)](http://www.dreamfabric.com/sms/)（很可能将其放在一起进行传输）。

*   `RESULT_ERROR_RADIO_OFF`:*失败，因为无线电被明确关闭*

    您将设备切换到飞行模式，这会准确地告诉您的设备“关闭所有无线电”（手机、wifi、蓝牙、NFC……）。

最后，大多数应用程序不需要关心*为什么*发送短信失败（除了询问用户飞行模式是否开启以防万一`RESULT_ERROR_RADIO_OFF`），因为应用程序本身无法补救。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-28T15:01:40.193

应该可以进一步了解 RESULT_ERROR_GENERIC_FAILURE 背后的原因。在接收 SMS 发送结果的接收器中：

```
@Override
public void onReceive(Context context, Intent intent) {

    // Other code processing other outcomes

    if (getResult() == SmsManager.RESULT_ERROR_GENERIC_FAILURE) {
        int errorCode = intent.getIntExtra("errorCode", -1);
        if (errorCode != -1) {
            // process errorCode ...
            }
        }

    // More code ...
    } 
```

我尚未证明这一点，但[此处](http://www.smssolutions.net/tutorials/gsm/gsmerrorcodes/ "这里")和[此处](https://www.nowsms.com/gsm-modem-cms-error-code-list)提供的列表提供了可能对`errorCode`. [这里](https://www.simsurprise.co.uk/articles/1118-mobile-phone-abbreviations)的首字母缩略词提供了一些关于如何理解这些列表的解释。例如：

号码问题

*   1 您发送的号码根本没有被任何人使用。
*   28 您要发送的号码存在，但没有与之关联的电话。目前没有分配给 SIM 卡。
*   195 您发送的号码无效。
*   196 您发送的号码被禁止（或被您不清楚）。

其他问题

*   42 网络太忙
*   38 网络出现故障（可能有一段时间）

在我看来，代码之间有相当多的重叠，但我不是这些方面的专家。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-24T09:17:20.667

**SmsManager.RESULT_ERROR_GENERIC_FAILURE**

当消息对于 1 条 SMS 而言太长时，通常会出现此错误。在这种情况下使用这个：

```
ArrayList<String> texts = smsManager.divideMessage(text);
smsManager.sendMultipartTextMessage(phone, null, texts, null, null) 
```

# dropwizard - 限制 dropwizard 管理页面

> ID：12987911
> 
> 赞同：10
> 
> 时间：2012-10-20T11:22:18.380
> 
> 标签：dropwizard

如何对 Dropwizard 管理门户进行身份验证，以限制普通用户访问？请帮忙

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-20T21:09:51.740

在您的配置中，您可以像这样设置`adminUsername`和`adminPassword`下`http`：

```
http:
  adminUsername: user1234
  adminPassword: pass5678 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-05-23T12:01:46.020

对于 DW 0.7，我的方法是：

```
public class AdminConstraintSecurityHandler extends ConstraintSecurityHandler {

    private static final String ADMIN_ROLE = "admin";

    public AdminConstraintSecurityHandler(final String userName, final String password) {
        final Constraint constraint = new Constraint(Constraint.__BASIC_AUTH, ADMIN_ROLE);
        constraint.setAuthenticate(true);
        constraint.setRoles(new String[]{ADMIN_ROLE});
        final ConstraintMapping cm = new ConstraintMapping();
        cm.setConstraint(constraint);
        cm.setPathSpec("/*");
        setAuthenticator(new BasicAuthenticator());
        addConstraintMapping(cm);
        setLoginService(new AdminMappedLoginService(userName, password, ADMIN_ROLE));
    }
}

public class AdminMappedLoginService extends MappedLoginService {

    public AdminMappedLoginService(final String userName, final String password, final String role) {
        putUser(userName, new Password(password), new String[]{role});
    }

    @Override
    public String getName() {
        return "Hello";
    }

    @Override
    protected UserIdentity loadUser(final String username) {
        return null;
    }

    @Override
    protected void loadUsers() throws IOException {
    }
} 
```

并以这种方式使用它们：

```
environment.admin().setSecurityHandler(new AdminConstraintSecurityHandler(...)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-12T23:12:42.837

较新的 Jetty 版本没有`MappedLoginService`，所以@Kamil 的回答不再有效。我已经修改了他们的答案以使其从 Dropwizard 1.2.2 开始工作：

```
public class AdminConstraintSecurityHandler extends ConstraintSecurityHandler {

    private static final String ADMIN_ROLE = "admin";

    public AdminConstraintSecurityHandler(final String userName, final String password) {
        final Constraint constraint = new Constraint(Constraint.__BASIC_AUTH, ADMIN_ROLE);
        constraint.setAuthenticate(true);
        constraint.setRoles(new String[]{ADMIN_ROLE});
        final ConstraintMapping cm = new ConstraintMapping();
        cm.setConstraint(constraint);
        cm.setPathSpec("/*");
        setAuthenticator(new BasicAuthenticator());
        addConstraintMapping(cm);
        setLoginService(new AdminLoginService(userName, password));
    }

    public class AdminLoginService extends AbstractLoginService {

        private final UserPrincipal adminPrincipal;
        private final String adminUserName;

        public AdminLoginService(final String userName, final String password) {
            this.adminUserName = Objects.requireNonNull(userName);
            this.adminPrincipal = new UserPrincipal(userName, new Password(Objects.requireNonNull(password)));
        }

        @Override
        protected String[] loadRoleInfo(final UserPrincipal principal) {
            if (adminUserName.equals(principal.getName())) {
                return new String[]{ADMIN_ROLE};
            }
            return new String[0];
        }

        @Override
        protected UserPrincipal loadUserInfo(final String userName) {
            return adminUserName.equals(userName) ? adminPrincipal : null;
        }
    }
} 
```

# java - 带有@Consumes、@Produces 和 JAXB 的简单 JAX-RS 示例

> ID：12987912
> 
> 赞同：4
> 
> 时间：2012-10-20T11:22:24.613
> 
> 标签：java, web-services, rest, jakarta-ee, jax-rs

我正在尝试使用`@Produces`、`@Consumes`注释和 JAXB 创建和运行 JAX-RS 的简单示例。

```
@Stateless
@LocalBean
@Path("/hotel")
public class RestMain {

  @GET
  @Produces(MediaType.APPLICATION_XML)
  @Path("{hotelId}")
  public HotelRESTInfo read(@PathParam("hotelId") long hotelId) {
    HotelDataSourceFake hotelDataSourceFake = new HotelDataSourceFake();
    HotelRESTInfo hotelInfo = hotelDataSourceFake.getFakePlaceById(hotelId);
    return hotelInfo;
  }
} 
```

网页.xml：

```
<servlet>
    <servlet-name>REST App</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Jersey Web Application</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

第二个应用程序是客户端。现在我有以下客户端代码：

```
import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
...
Client client = Client.create();
String uri ="http://localhost:8080/RESTJEE/rest/hotel/" + hotelId;
WebResource resource = client.resource(uri);
ClientResponse response = resource.accept("application/xml").get(ClientResponse.class);
HotelRESTInfo hotelRestInfo = response.getEntity(HotelRESTInfo.class); 
```

但我不想使用球衣的 Client、ClientResponse 和 WebResource。我想用`@Consumes`. 客户端应用程序是否应该`web.xml`包含一些额外的参数？

双方（客户端和服务器）都包含`HotelRESTInfo`类：

```
@XmlRootElement
public class HotelRESTInfo {
...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T12:11:44.457

我认为你不匹配的东西。

一方面是发出请求的 HttpClient，而在另一台计算机上是构建响应的 HttpServer。这是基本的，我想你明白了。

事情是`@GET read ()method` **消费**请求正文，并**产生**响应正文。

所以你可以拥有：

```
@GET
@Consumes(MediaType.APPLICATION_XML) //client sends also xml
@Produces(MediaType.APPLICATION_XML)
@Path("{hotelId}")
public HotelRESTInfo read(@PathParam("hotelId") long hotelId) {
    (...)
} 
```

显然，您希望您的*客户端使用 Web 服务*，因此`@Consume` **在 Client 端绝对有意义**。

不幸的是，JaxRS 是在 2008 年左右构建在服务器端的，没有考虑与 Java 客户端的协同作用。@Consumes 绝对是一个服务器注释，我在[文档中没有看到任何关于在客户端重用](http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e573)注释的内容。

Jersey 客户端是最近才出现的，它符合 JaxRS 2 规范。您的问题表明这些规范可能很难编写！

# iphone - 如何从 iPhone 应用程序启动另一个应用程序

> ID：12987914
> 
> 赞同：9
> 
> 时间：2012-10-20T11:22:33.543
> 
> 标签：iphone, objective-c, ios, mapkit

我正在我的 iPhone 应用程序中开发地图应用程序。

我有一个按钮`go`。

当用户在此方法中单击此按钮时，我想检查用户是否已`waze`在他的 iphone 上安装了该应用程序。如果是，则导航到 waze 应用程序，否则打开 iPhone 的默认地图应用程序。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-20T17:37:08.260

尝试这样做：

```
NSString *wazeAppURL = @"waze://";
NSString *mapsAppURL = @"maps://";

BOOL canOpenURL = [[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:wazeAppURL]];

NSString *url = canOpenURL ? wazeAppURL : mapsAppURL;
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:url]]; 
```

在这里，`canOpenURL`您可以测试您的 iPhone 上是否安装了 Waze 应用程序。如果 iPhone 可以打开该 url `waze://`，则意味着您已经拥有该应用程序，它将启动它。否则它将启动默认的地图应用程序。不会调用 Safari。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T10:04:43.583

要打开应用程序，您需要调用

```
BOOL canOpenURL = [[UIApplication sharedApplication] 
                       canOpenURL:[NSURL URLWithString:@"app://"]];
if ( canOpenUrl ) [[UIApplication sharedApplication] 
                       openURL:[NSURL URLWithString:url]]; 
```

要查找所有 url，请转到此页面：[http ://handleopenurl.com/](http://handleopenurl.com/)

特别是对于 waze，[http://handleopenurl.com/scheme/waze](http://handleopenurl.com/scheme/waze)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-24T20:12:34.380

请注意，在 iOS 上，您还可以导航到 Google 地图——并传递查询字符串或地理点。这是导航到特定地理点的一个示例：

```
if (self.mapView.userLocation.location) {
    NSString *urlAsString = [NSString stringWithFormat:@"comgooglemaps://?q=%f,%f", self.mapView.userLocation.location.coordinate.latitude, self.mapView.userLocation.location.coordinate.longitude];
    if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:urlAsString]]) {
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlAsString]];
    }
} 
```

只是一个提升用户体验的建议。

# c# - 如何获得特定的属性值？

> ID：12987917
> 
> 赞同：1
> 
> 时间：2012-10-20T11:22:52.883
> 
> 标签：c#, .net, html-agility-pack, selectsinglenode

有一个输入元素如下：

```
<input type="hidden" value="908" name="a"> 
```

我想`908`使用`DocumentNode.SelectSingleNode`. 我怎样才能做到这一点？
下面的代码不起作用？

```
string a = htmlDoc.DocumentNode.SelectSingleNode("//input[@name='a']").GetAttributeValue("value", true).ToString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:45:13.057

您为`GetAttributeValue()`. 尝试使用字符串作为第二个参数而不是布尔值：

```
string a = htmlDoc.DocumentNode.SelectSingleNode("//input[@name='a']").GetAttributeValue("value", "default"); 
```

# ruby-on-rails - 在 HAML 中保持复选框处于选中状态

> ID：12987920
> 
> 赞同：3
> 
> 时间：2012-10-20T11:23:12.390
> 
> 标签：ruby-on-rails, haml

我在 HAML 文档上有一些复选框，当我单击“刷新”按钮时，它们应该会更改显示的结果。这很好用，但是当页面重新加载时，被选中的框都再次被取消选中。

如何重新配置​​ HAML 以在页面视图中保持复选框选中状态？

```
= form_tag movies_path, :method => :get do
  Include:
  - @all_ratings.each do |rating|
    = rating
    = check_box_tag "ratings[#{rating}]", '1', true
  = submit_tag 'Refresh' 
```

我还指定默认情况下应选中复选框，但在加载页面时不会选中它们...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T23:15:27.807

这将完成你想要的：

```
 = form_tag movies_path, :method => :get do
      Include:
      - @all_ratings.each do |rating|
        = rating
        = check_box_tag "ratings[#{rating}]", rating, if params[:ratings]; params[:ratings].include?(rating) end
    = submit_tag 'Refresh' 
```

该`params[:ratings]`实例在调用后仍然存在，因此您可以使用它来标记用户之前单击的框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-04T21:53:51.527

supernova32 非常接近。

唯一缺少的是基于您的最后一行“...指定默认情况下应选中复选框。”

您的代码应如下所示：

= check_box_tag "ratings[#{rating}]", 1, if params[:ratings]; params[:ratings].include?(rating) else true end

只需在参数不存在时包含 ELSE 语句（默认状态）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T12:26:16.627

我想这些复选框并不代表您的业务数据的某些持久状态（否则这将不适用），但它们实际上是一种“过滤器”或类似的临时配置视图。

在这种情况下，您应该只使用 AJAX 请求结果，而不是复选框。因此，您不必将它们存储在任何地方，因为它们不会消失。

# swing - 如何根据 JComboBox 中的选择显示/隐藏某些 JTable 列

> ID：12987921
> 
> 赞同：1
> 
> 时间：2012-10-20T11:23:15.400
> 
> 标签：swing, jtable, hidden, visible

我有一个`JTable`和一个`JComboBox`。当我在组合框中选择一个项目时，我希望某些列隐藏，当我在组合框中选择另一个项目时，相同的隐藏列重新出现。我写的，

```
jTable1.getColumnModel().getColumn(8).setMinWidth(0)
jTable1.getColumnModel().getColumn(8).setMaxWidth(0)
jTable1.getColumnModel().getColumn(8).setWidth(0) 
```

隐藏列，但是当我再次写

```
jTable1.getColumnModel().getColumn(8).setMinWidth(100)
jTable1.getColumnModel().getColumn(8).setMaxWidth(100)
jTable1.getColumnModel().getColumn(8).setWidth(100) 
```

隐藏的列不可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:52:38.670

原因是 setMin/setMax 都强制执行关系

```
min <= width <= max 
```

这就是方法调用的顺序

```
// hiding
column.setMinWidth(0);
column.setMaxWidth(0);

// showing
column.setMaxWidth(100);
column.setMinWidth(100); 
```

请注意，您无需调用 setWidth，这是在内部处理的。

也就是说：强制尺寸是..一种黑客行为。考虑使用一个干净的解决方案，例如[SwingX](http://swingx.java.net)之类的框架，它具有（以及其他细节:-) 对列隐藏的全面支持

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T13:37:07.910

> *上面的代码有什么问题*？

除了 kleopatra 的有用[见解](https://stackoverflow.com/a/12996788/230513)，记录[在这里](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableColumn.html#setMinWidth%28int%29)，一些 L&F 或多或少是合作的。例如，`com.apple.laf.AquaLookAndFeel`总是在 之后留下足够的宽度来拖动`setMinWidth(0)`，尽管可以手动将列强制为零宽度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T10:46:52.463

使用`JTable#removeColumn`和`JTable#addColumn`。这些操作只影响视图端，不影响模型端

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T08:42:30.530

```
for (int i = 0; i < 2; i++) {
    jTable1.getColumnModel().getColumn(8).setMinWidth(100)
    jTable1.getColumnModel().getColumn(8).setMaxWidth(100)
    jTable1.getColumnModel().getColumn(8).setWidth(100)
} 
```

列将变得可见。

# javascript - three.js hello world 示例：画布不渲染

> ID：12987928
> 
> 赞同：1
> 
> 时间：2012-10-20T11:24:19.827
> 
> 标签：javascript, three.js

我正在尝试让这个 hello world 示例在我自己的计算机上运行：http: [//jsfiddle.net/GKCx6/](http://jsfiddle.net/GKCx6/)

到目前为止，我已经在此处提供了我的努力：[https ://dl.dropbox.com/u/2070405/wtf/index.html](https://dl.dropbox.com/u/2070405/wtf/index.html)

一切似乎都很好，除了没有渲染的事实。我该如何调试呢？到目前为止，我已经使用了萤火虫。

这是 index.html 的内容：

```
<!doctype html>
<html>
    <head>
        <title>learningthree.js boiler plate for three.js</title>
        <meta charset="utf-8">
    </head>
<body>
    <!-- three.js container -->
        <div id="container"></div>
    <!-- info on screen display -->

</body>
<script src="three.js"></script>
<script src="main.js"></script>
</html> 
```

这是 main.js 的内容：

```
// RequestAnimationFrame.js:
if ( !window.requestAnimationFrame ) {

    window.requestAnimationFrame = ( function() {

        return window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function( callback, element ) {

            window.setTimeout( callback, 1000 / 60 );

        };

    } )();

}

// Hello World1 from https://github.com/mrdoob/three.js

var camera, scene, renderer,
    geometry, material, mesh;

init();
//console.log("renderer defined? ", renderer);
animate();

function init() {

    camera = new THREE.Camera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
    camera.position.z = 1000;

    console.log("THREE.Scene available? ", THREE.Scene);
    scene = new THREE.Scene();
    console.log("scene created? ", scene);

    geometry = new THREE.CubeGeometry( 200, 200, 200 );
    material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );

    mesh = new THREE.Mesh( geometry, material );
    scene.add( mesh );

    renderer = new THREE.CanvasRenderer();
    renderer.setSize( 800, 600 );
    //renderer.setSize( window.innerWidth, window.innerHeight );

    container = document.getElementById("container");
    container.appendChild(renderer.domElement);

    }

    function animate() {

        // Include examples/js/RequestAnimationFrame.js for cross-browser compatibility.
        requestAnimationFrame( animate );
        console.log("animate in action");
        render();

    }

    function render() {

        mesh.rotation.x += 0.01;
        mesh.rotation.y += 0.02;
        console.log("renderer in action");
        renderer.render( scene, camera );

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:40:12.250

您正在复制适用于旧版本 three.js 的代码。从这里的 three.js zip 存储库下载您的示例：[https](https://github.com/mrdoob/three.js) ://github.com/mrdoob/three.js 。

有关更新的小提琴，请参阅 jsfiddle.net/GKCx6/142/

# java - GridBagLayout 辅助

> ID：12987929
> 
> 赞同：0
> 
> 时间：2012-10-20T11:24:24.743
> 
> 标签：java, layout-manager, gridbaglayout

我尝试了所有组合并查看了所有文档，但我不知道如何使用 GridBagLayout。

我在 JPanel 中有 3 个组件，其中 GridBagLayout 是 JPanel 的 LayoutManager 并在 3 个组件上使用 GridBagConstraints。

使用当前代码（如下所示），3 个元素正确显示在面板上。问题是第一个组件是一个有时很长的 JLabel，如果是这种情况，那么它将扩展并使其他 2 个组件更小。

我的目标是有一个 GridBagLayout 为 1 行和 4 列的 JPanel，其中第一个元素占据前 2 列，其他 2 个元素占据剩余的 2 列，并且这些元素不会从它们的列。

```
private static void setConstraints(GridBagConstraints constraints, int gridx, int gridy, int weightx, Insets insets) {
    constraints.gridx = gridx;
    constraints.weightx = weightx;
    constraints.insets = insets;
}

gridBagLayout = new GridBagLayout();
constraints = new GridBagConstraints();
centerPanel = new JPanel(gridBagLayout);

constraints.fill = GridBagConstraints.HORIZONTAL;
fileNameLabel = new JLabel("Resolving: '" + EngineHelpers.trimStringToFitPanel(urlTextField.getText(), 70) + "'");
setConstraints(constraints, 0, 0, 2, new Insets(0, 5, 5, 0));
gridBagLayout.setConstraints(fileNameLabel, constraints);
progressBar = new JProgressBar();
progressBar.setStringPainted(true);
setConstraints(constraints, 1, 0, 1, new Insets(0, 5, 5, 0));
gridBagLayout.setConstraints(progressBar, constraints);
cancelDownloadButton = new JButton("Cancel");
setConstraints(constraints, 2, 0, 1, new Insets(0, 0, 0, 0));
gridBagLayout.setConstraints(cancelDownloadButton, constraints);

centerPanel.add(fileNameLabel);
centerPanel.add(progressBar);
centerPanel.add(cancelDownloadButton); 
```

在此先感谢大家，对于愚蠢的问题感到抱歉！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:53:16.893

您可能希望`weightx`将按钮和进度条都设置为 0。对于标签，将权重设置为 1。这将阻止按钮和进度条完全展开，并让进度条占据所有额外空间。

还将`gridwidth`进度条约束设置为 2，因此它实际上使用 2 列。

最后，根据`centerPanel`放置的位置，它可能不会实际扩展以填充容器。如果 centerPanel 被放置在具有 BorderLayout 的父级中，它应该展开。为了确保，您可以添加一个`centerPanel.setBorder(BorderFactory.createLineBorder(Color.RED))`用于调试的边框。这在按钮、标签和进度条上也很有用。

# c# - wpf无边框窗口焦点未触发

> ID：12987933
> 
> 赞同：1
> 
> 时间：2012-10-20T11:24:48.310
> 
> 标签：c#, wpf

我有以下 WPF 窗口定义，但是当我点击远离应用程序时，焦点/丢失焦点事件没有触发，有什么想法吗？

```
<Window x:Class="BevaClient.windowMain"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:l="clr-namespace:BevaClient"
    xmlns:forms="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
    Title="VPN Tool" Height="500" Width="370"
    Focusable="True"
    WindowStyle="None"
    ResizeMode="NoResize"
    Topmost="True"
    Style="{StaticResource defaultWindow}"
    Loaded="Window_Loaded"
    GotFocus="Window_GotFocus"
    LostFocus="Window_LostFocus"> 
```

我尝试将 topmost 设置为 false 以查看这是否是问题所在，但这没有区别。

对此问题的任何建议将不胜感激。

谢谢，

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:32:56.077

而是挂钩`Activated`和事件。`Deactivated`

# android - 如何在java中访问可绘制资源（颜色）

> ID：12987934
> 
> 赞同：8
> 
> 时间：2012-10-20T11:24:49.297
> 
> 标签：android, android-layout

我想访问定义为可绘制资源的颜色资源并希望在 JAVA 中切换背景颜色，基本上使用下面提到的可绘制 XML 更改了按钮的背景。我尝试访问按钮并修改颜色属性，但这将按钮的形状更改为普通方形。我想保持可绘制 XML 中定义的形状并手动更改背景颜色。

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<item android:state_pressed="true">
    <shape android:shape="rectangle">
        <solid android:color="#EAEAEA" />

        <corners android:bottomLeftRadius="8dip"
             android:bottomRightRadius="1dip"
             android:topLeftRadius="1dip" 
             android:topRightRadius="8dip" />
    </shape>
    </item>

<item><shape android:shape="rectangle">
        <solid android:color="#EAEA00" />

        <corners android:bottomLeftRadius="8dip" 
            android:bottomRightRadius="1dip" 
            android:topLeftRadius="1dip" 
            android:topRightRadius="8dip" />
    </shape>
     </item> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T11:50:27.433

你有两种可能性：

*   `myButton.setBackgroundColor(Color.CHOOSE_ONE);`
*   `myButton.setBackgroundResource(R.color.youCustomColor);`

如果要从十六进制值设置颜色，只需使用`Color`类的静态方法：

```
myButton.setBackgroundColor(Color.parseColor("#RRGGBB"));
//http://developer.android.com/reference/android/graphics/Color.html#parseColor%28java.lang.String%29 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:45:03.377

您可以使用以下代码更改按钮的颜色 -

```
button.setBackgroundColor(Color.rgb(red, green, blue)); 
```

并从以下链接获取 rgb 值 -

[http://www.ceveni.com/2009/08/set-rgb-color-codes-for-android-and-rgb.html](http://www.ceveni.com/2009/08/set-rgb-color-codes-for-android-and-rgb.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T18:16:50.500

如果您使用的是资源颜色，您可能应该使用以下方法解决它`getResources().getColor(R.color.example_color)`

对于此选项，您的代码如下：

```
myButton.setBackgroundResource(getResources().getColor(R.color.example_color)); 
```

# .net - 找不到 PInvoke DLL SqlCeme35.dll？

> ID：12987937
> 
> 赞同：0
> 
> 时间：2012-10-20T11:25:04.173
> 
> 标签：.net, sql-server-ce, compact-framework2.0

我正在使用没有 GUI 的摩托罗拉设备 xr480。

当我尝试访问设备中的 .sdf 文件时，使用以下代码出现上述错误：

```
string Connection_String = @"Data Source=Application\RFID_FR_Data.sdf;Persist Security Info=False";
SqlCeConnection cn = new SqlCeConnection(Connection_String); 
```

请指导我解决问题。

# php - AJAX 奇怪的重定向？

> ID：12987939
> 
> 赞同：2
> 
> 时间：2012-10-20T11:25:17.030
> 
> 标签：php, ajax

我有一些 AJAX 代码在按下按钮时重定向。

它正在重定向到 members.php

这是 AJAX 代码：

```
<script language="javascript" type="text/javascript">

    function ajaxFunction(){
            var ajaxRequest;  // The variable that makes Ajax possible!

            try{
                // Opera 8.0+, Firefox, Safari
                ajaxRequest = new XMLHttpRequest();
            } catch (e){
                // Internet Explorer Browsers
                try{
                    ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                } catch (e) {
                    try{
                        ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                    } catch (e){
                        // Something went wrong
                        alert("Please update your browser.");
                        return false;
                    }
                }
            }
        }

        // Create a function that will receive data sent from the server
        ajaxRequest.onreadystatechange = function(){
            // We still need to write some code here
                if(ajaxRequest.readyState == 4){
                    // Get the data from the server's response
                    response = ajaxRequest.responseText;
                }
        }
        ajaxRequest.open("GET", "accept.php?id=<?php echo $articleid; ?>&state=accept$p=a9dafdd0fe68c6f64841e265e1c8832a", true);
        ajaxRequest.send(null);                 
    }       

</script> 
```

这是按钮：

```
<input type="submit" onChange="ajaxFunction();" /> 
```

这是accept.php的内容：

```
<?php
    echo "ACCEPTED";
?> 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:33:45.037

这是什么？

```
"&state=accept$p=a9dafdd0fe68c6f64841e265e1c8832a", 
```

...应该是这样的

```
"&state=accept&p=a9dafdd0fe68c6f64841e265e1c8832a", 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:39:11.123

members.php 是你表单上的操作？如果是这样，我会删除该操作并重试，看看会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T11:26:34.650

```
<input type="submit" onChange="ajaxFunction();" />

should be

<input type="submit" onclick="ajaxFunction();" /> 
```

并 `return false;`在函数结束时使用

或者你可以使用简单的 jquery

```
$("#submit").click(function(){
// or $("#form").submit(function(){
$.get("accept.php?id=<?php echo $articleid; 
?>&state=accept&p=a9dafdd0fe68c6f64841e265e1c8832a",function(data){
rasponce=data;
  })

 return false;
}) 
```

# makefile - 从 sublime text 2 运行各种 make 目标

> ID：12987940
> 
> 赞同：2
> 
> 时间：2012-10-20T11:25:17.030
> 
> 标签：makefile, sublimetext2, sublimetext

我主要从事网络开发，最近决定尝试一下 sublime 2。

对于我的典型项目，我有`Makefile`多个目标。（例如：*javascript* --> 压缩 javascript，*部署*--> 上传到服务器，*样式*--> 从 less 构建 css，*coffee* --> 将 coffeescript 编译为 javascript 等）

Sublime 识别 make 文件并运行“所有”目标工作得很好。但是对于运行所有东西的大型项目需要很长时间，所以我想配置 sublime，所以它只构建一个特定的 make 目标。

有什么方法可以将 Sublime 配置为仅运行我想要的 make 目标。是否有可能使用项目根目录中的文件（并通过 git 跟踪）来​​执行此操作，因此构建甚至可以在另一台计算机上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:34:11.483

我不确定这是否是你要找的东西，但看看这个论坛，可能会让你对多个构建有一些了解：-

[Sublime 论坛：构建系统中的多个命令？](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=4370)

如果没有，那么您可以在那里的论坛上查看和询问，它将更专门用于这些功能:)

这是从那里开始的，可能是您想要的？

:- “不幸的是，构建系统中不支持多个命令。我在使用 java 时遇到了这个问题。最好的选择是使用命令制作一个 bash 文件，并拥有一个运行 bash 文件的构建系统。在构建系统方面，我不是专家，所以我只能提供帮助。

希望这能为你指明正确的方向。”

所以也许你可以指出你想要使用的特定“make”命令......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:14:28.013

以 Sublime 的当前状态，这是不可能的。

# symfony - Symfony2 - 缺少父定义“doctrine.orm.security.user.provider”

> ID：12987950
> 
> 赞同：2
> 
> 时间：2012-10-20T11:26:32.817
> 
> 标签：symfony, doctrine, symfony-2.1

我目前在尝试实施 Symfony2 食谱以使用学说创建自定义用户提供程序时遇到一些挫折：http: [//symfony.com/doc/2.0/cookbook/security/entity_provider.html](http://symfony.com/doc/2.0/cookbook/security/entity_provider.html)

这是我的 security.yml 文件：

```
security:
    encoders:
        Rep\Bundle\ProjectBundle\Model\User:
            algorithm:        sha1
            encode_as_base64: false
            iterations:       1

    role_hierarchy:
        ROLE_USER:        ROLE_USER
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH ]

    providers:
        user_db:
            entity: { class: ProjectBundle:User, property: username }

    firewalls:
        admin_area:
            pattern:    ^/admin
            http_basic: ~

    access_control:
        - { path: ^/admin, roles: ROLE_ADMIN } 
```

这是我的错误：

![](../Images/37dcd544edd09645d6c8f1ca5e8e45f9.png)

## 明显的问题：

1.  我是否安装了学说？是的。并在内核中注册。
2.  我是否创建了用户界面和提供程序。是的。

另外，我选择构建它而不是使用 FOSUserBundle，因为它对于我需要的东西来说太“笨重”了，所以任何帮助都是理想的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:16:49.720

问题是由于缺少原则的配置信息引起的，但是捆绑包已在内核中注册。奇怪的错误消息并不指向缺少配置，但消除过程解决了我的问题。

# javascript - 框不会出现在 chrome 上

> ID：12987952
> 
> 赞同：2
> 
> 时间：2012-10-20T11:27:28.190
> 
> 标签：javascript

在我的登录页面上，我有新成员和现有成员的单选按钮。如果用户单击现有成员的按钮 - 只有 2 个输入框出现：用户名和密码。它适用于 IE，但不适用于 chrome。这是脚本。有人可以帮忙吗？？

```
<script> 
    function dispLoing(val) 
    { 
        var obj=document.getElementById?document.getElementById("loginForm").style : document.all? document.all.loginForm : document.loginForm; 

        if (val=="new") 
        { 
            document.all.login(0).checked=true; 
            obj.display="none"; 
        } 
        if (val=="existing") 
        { 
            document.all.login(1).checked=true; 
            obj.display=""; 
        } 
    } 
</script> 

<td> 
   <div id="loginForm" style="position:relative;top:0px;left:0px;z-index:80;display:none;"> 
         <table border=0> 
            <tr> 
              <td><font style="font-size: 14px">Username:</font></td> 
               <td><input type="text" name="username" style="width: 100px; height:17px; font-size: 12px;"></td> 
             </tr> 
             <tr> 
             <td><font style="font-size: 14px">Password:</font></td> 
             <td><input type="password" name="pass" style="width: 100px; height:17px; font-size: 12px;"></td> 
            </tr> 
           </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:07:16.653

不要使用`document.all`，它不适用于所有浏览器。`document.getElementById`是标准化的，可以在任何地方工作。

# mysql - 2 列合为 1，不包括预定义值

> ID：12987956
> 
> 赞同：0
> 
> 时间：2012-10-20T11:28:26.320
> 
> 标签：mysql, activerecord

假设我有下表：

```
messages
-------
id
sender
recipient
msg 
```

我想获取用户的对话，但不包括他自己，所以我最终得到以下列：`id, user, msg`。`user`将是另一个人。显然我们要排除的用户是已知的。

我想到了类似的东西：`CONCAT(sender,"-",recipient)`，然后替换`idu-`or`-idu`什么都没有。但我希望有更清洁的东西！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:31:09.230

尝试这个 ：：

```
REPLACE(REPLACE(CONCAT(sender,"-",recipient),'idu-',''),'-idu','') 
```

# javascript - JavaScript - 警报为空，为什么？

> ID：12987957
> 
> 赞同：0
> 
> 时间：2012-10-20T11:28:28.200
> 
> 标签：javascript, html

为什么输出为空而不是长度（这是代码：）

```
<i>
 <input type="text" name="webAdress" />
<input type="button" value="CheckLegnth" onclick="myFunction()" />
     <script type="text/javascript">
            function myFunction() {
                var webAdress = document.getElementById('webAdress');
                alert(webAdress);
            }

  </script>  
</i> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:30:37.693

`name`您在输入字段上定义了属性，而不是`id`.

因此，要么将输入字段中的属性更改为：

```
<input type="text" id="webAdress" /> 
```

或者将您的 JavaScript 调整为此（[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)）：

```
function myFunction() {
  var webAdress = document.getElementsByName('webAdress')[0];
  alert(webAdress);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:12:04.277

尝试了所有建议并在 chrome 中运行它们，除了以下之外，它们都没有工作，

```
function myFunction() {
  var webAdress1 = webAdress.value;
  alert(webAdress1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T11:33:53.947

这将起作用：

```
<i>
 <input type="text" id="webAdress" name="webAdress" />
<input type="button" value="CheckLegnth" onclick="myFunction()" />
     <script type="text/javascript">
            function myFunction() {
                var webAdress = document.getElementById('webAdress').value;
                alert(webAdress);
            }

  </script>  
</i> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T11:34:50.740

尝试这个：

```
<input type="text" id="webAdress" name="webAdress"/>
    <input type="button" value="CheckLegnth" onclick="myFunction()" />
         <script type="text/javascript">
                function myFunction() {
                    var webAdress = document.getElementById('webAdress').value;
                    alert(webAdress);
                }

      </script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T11:43:54.657

```
 function myFunction() {
      var webAdress = document.getElementsByName('webAdress')[0];
      alert(webAdress);
    } 
```

根据您的脚本，它应该如上所示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T11:30:31.817

`getElementById`是 use `id`，但是`webAdress`是 name 属性。

# android - Android App：如何在设置下阅读字体大小？

> ID：12987958
> 
> 赞同：11
> 
> 时间：2012-10-20T11:28:30.773
> 
> 标签：android, accessibility

我正在开发一个 Android 应用程序，我想阅读**Settings->Display->Font** Size 下的字体大小。

因此，如果用户将他的字体大小设置为小/大/巨大，我想将其自动应用于我的所有文本

我使用的是三星 Galaxy Nexus，Android 4.1.2

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T11:30:10.087

尝试[`FONT_SCALE`从`android.provider.Settings.System`](http://developer.android.com/reference/android/provider/Settings.System.html#FONT_SCALE).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T15:52:20.917

您还可以使用与“dp”相同的“sp”单位定义文本大小，但根据用户系统设置的文本大小进行缩放。无需自己从系统中读取字体大小。

# jasper-reports - PDF 格式的报告不显示 X 和 Y 轴标签等文本以及图例中的文本

> ID：12987960
> 
> 赞同：2
> 
> 时间：2012-10-20T11:28:43.260
> 
> 标签：jasper-reports

我正在使用*JasperRepotrs 3.7.5*在我的项目中生成报告。

一切都很顺利，但是当我在 Linux 环境中执行我的项目时，报告以我设计的*PDF*格式生成，但我的报告中的图例和图形没有显示文本，如 X 和 Y 轴标签和图例中的文本。

请对此问题有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-07T04:09:01.800

选择图表然后转到属性

在`BarPlot Properties` 勾下`Show Tick Labels`

# javascript - 在没有 jQuery 的新选项卡中打开外部链接

> ID：12987963
> 
> 赞同：10
> 
> 时间：2012-10-20T11:29:12.327
> 
> 标签：javascript, hyperlink

在不使用 jQuery 的情况下，使用 JavaScript 在新选项卡中打开所有外部链接（与当前域不匹配的 URL）的最佳方法是什么？

这是我当前使用的 jQuery：

```
// Open external links in new tab
$('a[href^=http]').click(function () {
    var a = new RegExp('/' + window.location.host + '/');
    if (!a.test(this.href)) {
        window.open(this.href);
        return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-30T20:39:24.550

纯JS：

```
function externalLinks() {
  for(var c = document.getElementsByTagName("a"), a = 0;a < c.length;a++) {
    var b = c[a];
    b.getAttribute("href") && b.hostname !== location.hostname && (b.target = "_blank")
  }
}
;
externalLinks(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-25T23:43:19.870

**links**属性返回文档中所有元素的集合，并`<area>`带有`<a>`href 属性的值。

```
 var links = document.links;
    for(var i = 0; i < links.length; i++) {
      if (links[i].hostname != window.location.hostname) {
        links[i].target = '_blank';
      } 
    } 
```

[https://developer.mozilla.org/en-US/docs/Web/API/Document/links](https://developer.mozilla.org/en-US/docs/Web/API/Document/links)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T11:41:01.727

将 target="_blank" 添加到标签中。您可以在 onload 事件期间在预处理器（例如 PHP）或 JS 中执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T11:46:27.930

```
 $("a[href^=http]").each(function(){
          if(this.href.indexOf(location.hostname) == -1) {
             $(this).attr({
                target: "_blank",
                title: "Opens in a new window"
             });
          }
       }) 
```

这个脚本应该适合你。

更新：试试这个小提琴[http://jsfiddle.net/sameerast/GuT2y/](http://jsfiddle.net/sameerast/GuT2y/)

JS版

```
 var externalLinks = function(){
      var anchors = document.getElementsByTagName('a');
      var length = anchors.length;
      for(var i=0; i<length;i++){
        var href = anchor[i].href;
        if(href.indexOf('http://sample.com/') || href.indexOf('http://www.sample.com/')){
          return;
        }
        else{
          anchor[i].target='_blank';
        }
      }
    }; 
```

# javascript - 验证所需的对象

> ID：12987964
> 
> 赞同：1
> 
> 时间：2012-10-20T11:29:15.477
> 
> 标签：javascript

我正在尝试验证 javascript 中的代码。这是我的代码：

```
if(document.getElementById("name").value == ""){
    alert("Name is a required field");
    document.getElementById("name").focus();
    return false;
} 
```

`name`在我的 html 页面中是 id：

```
<div class="app-form-box">
  {% if review %}
    {% if not review.name %}
      <input type="text" alt="" onkeyup="return validateField(name)" tabindex="2" name="name" id="name" class="disabled inputtxtlarge" onfocus="highlightInput(this.id)" onblur="return (!validateField(name) || unhighlightInput(this.id))" maxlength="50" value="{{name|moonescape}}" disabled="disabled"/><span> </span>
    {% else %}
      <input type="text" alt="" onkeyup="return validateField(name)" tabindex="2" name="name" id="name" class="inputtxtlarge" onfocus="highlightInput(this.id)" onblur="return (!validateField(name) || unhighlightInput(this.id))" maxlength="50" value="{{name|moonescape}}"/><span> </span>
    {% endif %}
  {% else %}
    <input type="text" alt="" onkeyup="return validateField(name)" tabindex="2" name="name" id="faname" class="inputtxtlarge" onfocus="highlightInput(this.id)" onblur="return (!validateField(name) || unhighlightInput(this.id))" maxlength="50" value="{{name|moonescape}}"/><span> </span>
  {% endif %}
  <div class="servererror">
    {% if form_errors.name %}
      * {{ form_errors.name|join:"| " }}<br/>
    {% endif %}
  </div>
</div> 
```

但我越来越`OBJECT REQUIRED`。请建议如何为此检查 js 文件。谢谢

# javascript - 使用 cron 执行用 PHP 脚本编写的 AJAX

> ID：12987965
> 
> 赞同：-1
> 
> 时间：2012-10-20T11:29:37.067
> 
> 标签：javascript, ajax, facebook, cron, cron-task

我编写了一个 PHP 脚本，它从 Facebook 用户的个人资料中读取数据并通过 AJAX 将其发送到我的服务器。这个脚本需要间隔运行，所以我加了一个cron。所有 PHP 函数以及通过 MySQL 与数据库的交互都使用 cron。但 AJAX 不是。我知道它是（JavaScript）客户端脚本，但还有其他方法吗？我如何执行通过 cron 编写在文件中的 JavaScript (AJAX)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:35:28.120

Ajax 是一种客户端技术，您无法在 PHP 控制台中运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:40:21.317

Ajax 调用由一个 API（[应用程序编程接口](http://en.wikipedia.org/wiki/Application_programming_interface)）组成。API 是客户端（浏览器）与服务器（服务器）通信的调用系统。

在您的情况下，客户端是运行 PHP 脚本的计算机，而服务器是您的服务器。如果您可以在 PHP 中复制 JavaScript 中使用的 API，那么您将远离 hack。

例如，假设您正在与之通信的服务器有一个名为“postupdate.php”的服务，并且它采用一个名为“update”的值，那么 API 调用在 JavaScript 中可能如下所示：

```
<script type="text/javascript">
var response;

$.ajax({
  url: "http://www.example.com/postupdate.php?update=This_is_my_update"
}).success(function(text) { 
  response = text;
});

</script> 
```

相同的 API 调用在 PHP 中可能如下所示：

```
<?php

$response = file_get_contents("http://www.example.com/postupdate.php?update=This_is_my_update")

?> 
```

此示例假定 API 使用 HTTP GET 方法。使用 HTTP POST 方法的 API 更复杂，但也可以在 PHP 中使用。

# ruby-on-rails - fields_for has_many 关联的复数未显示在视图中

> ID：12987967
> 
> 赞同：5
> 
> 时间：2012-10-20T11:29:52.793
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nested-attributes, fields-for

目前，一个**Item** *属于*一个**Company**并且*has_many* **ItemVariants**。

我正在尝试使用嵌套的 fields_for 通过 Item 表单添加 ItemVariant 字段，但是使用 :item_variants 不会显示该表单。它仅在我使用单数时显示。

我检查了我的关联，它们似乎是正确的，这可能与嵌套在公司下的项目有关，还是我错过了其他东西？

提前致谢。

*注意：下面的片段中省略了不相关的代码。*

**编辑：**不知道这是否相关，但我使用 CanCan 进行身份验证。

**路线.rb**

```
resources :companies do
  resources :items
end 
```

**项目.rb**

```
class Item < ActiveRecord::Base
  attr_accessible :name, :sku, :item_type, :comments, :item_variants_attributes

  # Associations
  #-----------------------------------------------------------------------
  belongs_to :company
  belongs_to :item_type
  has_many   :item_variants

  accepts_nested_attributes_for :item_variants, allow_destroy: true

end 
```

**item_variant.rb**

```
class ItemVariant < ActiveRecord::Base
  attr_accessible :item_id, :location_id

  # Associations
  #-----------------------------------------------------------------------
  belongs_to :item

end 
```

**项目/new.html.erb**

```
<%= form_for [@company, @item] do |f| %>
  ...
  ...
  <%= f.fields_for :item_variants do |builder| %>
    <fieldset>
      <%= builder.label :location_id %>
      <%= builder.collection_select :location_id, @company.locations.order(:name), :id, :name, :include_blank => true %>
    </fieldset>
  <% end %>
  ...
  ...
<% end %> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T12:22:04.660

您应该预先填充`@item.item_variants`一些数据：

```
def new # in the ItemController
  ...
  @item = Item.new
  3.times { @item.item_variants.build }
  ...
end 
```

来源：[http ://rubysource.com/complex-rails-forms-with-nested-attributes/](http://rubysource.com/complex-rails-forms-with-nested-attributes/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T12:20:43.320

试试这个方法

在你`item controller` `new action` 写的

```
def new
  ...
    @item = # define item here
    @item.item_variants.build if @item.item_variants.nil?
  ...
end 
```

并且在`item/new.html.erb`

```
<%= form_for @item do |f| %>
  ...
  ...
  <%= f.fields_for :item_variants do |builder| %>
    ...
  <% end %>
  ...
  ...
<% end %> 
```

有关更多信息，请参阅视频 -[嵌套模型表单](http://railscasts.com/episodes/196-nested-model-form-part-1)

# linux - 将 Linux 配置文件保存在 SVN (Subversion) 中

> ID：12987974
> 
> 赞同：1
> 
> 时间：2012-10-20T11:30:27.553
> 
> 标签：linux, security, svn

**在版本控制系统（例如SVN ）中保留****Linux**配置文件的想法有多好？例如，要查看防火墙中的所有更改，请更改历史记录。特别是，可以保留这些文件组 -

 ***   访问文件
*   引导和登录/注销
*   文件系统
*   系统管理
*   联网
*   系统命令
*   守护进程

...

即例如，我正在对防火墙进行更改并将文件提交到存储库。然后，如果不是这样，我可以提取文件并将其与原文件进行比较。这可以帮助检测一些未经授权的访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:31:27.170

这是老帽子，可以这么说。

看看[这个](http://joeyh.name/code/etckeeper/)。**

# java - 无法在 angengine 中显示 SVG

> ID：12987976
> 
> 赞同：0
> 
> 时间：2012-10-20T11:30:33.820
> 
> 标签：java, android, andengine

我正在尝试使用 andengine 将 SVG 渲染到屏幕上，但不幸的是它没有被显示。此外，在运行项目时我没有收到任何异常或错误，因此我发现很难调试。

我看过[这篇文章](https://stackoverflow.com/questions/8680842/loading-svg-in-andengine)，但我想`BlackPawnTextureBuilder`GLES2 上不可用。

我在下面包含了我的部分代码，

```
public void onCreateResources(OnCreateResourcesCallback pOnCreateResourcesCallback) throws Exception
{
BuildableBitmapTextureAtlas buildableBitmapTextureAtlas = new BuildableBitmapTextureAtlas(this.getTextureManager(), 2048, 2048, TextureOptions.BILINEAR);
logoSplashITextureRegion = SVGBitmapTextureAtlasTextureRegionFactory.createFromAsset(buildableBitmapTextureAtlas, this, "gfx/BrickRed.svg", 80, 40);
buildableBitmapTextureAtlas.load();
pOnCreateResourcesCallback.onCreateResourcesFinished();
}

public void onCreateScene(OnCreateSceneCallback pOnCreateSceneCallback) throws Exception
{
logoSplashScene = new Scene();
logoSplashSprite = new Sprite(0, 0, logoSplashITextureRegion,mEngine.getVertexBufferObjectManager())
{
@Override
protected void preDraw(GLState pGLState, Camera pCamera)
{
    super.preDraw(pGLState, pCamera);
    pGLState.enableDither();
}
};
logoSplashSprite.setPosition((CAMERA_WIDTH - logoSplashSprite.getWidth()) * 0.5f, (CAMERA_HEIGHT - logoSplashSprite.getHeight()) * 0.5f);
logoSplashScene.attachChild(logoSplashSprite);
pOnCreateSceneCallback.onCreateSceneFinished(BrickActivity.logoSplashScene);
} 
```

我是否忘记了代码中的某些内容？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:16:01.007

我终于设法使它工作。

似乎当我使用 GLES2 时，我必须在加载我的 textureAtlas 之前包含以下行。

`buildableBitmapTextureAtlas.build(new BlackPawnTextureAtlasBuilder<IBitmapTextureAtlasSource, BitmapTextureAtlas>(0, 1, 0));`

现在我的 onCreateResources 看起来像这样，

```
try
{
buildableBitmapTextureAtlas = new BuildableBitmapTextureAtlas(textureManager, 2048, 2048, TextureOptions.BILINEAR);
SVG redBrick = SVGParser.parseSVGFromAsset(assertManager, "gfx/BrickRed.svg");
iTextureRegion = SVGBitmapTextureAtlasTextureRegionFactory.createFromSVG(buildableBitmapTextureAtlas, redBrick, 80, 40);
buildableBitmapTextureAtlas.build(new BlackPawnTextureAtlasBuilder<IBitmapTextureAtlasSource, BitmapTextureAtlas>(0, 1, 0));
buildableBitmapTextureAtlas.load();
} catch (TextureAtlasBuilderException e)
{
e.printStackTrace();
} 
```

# wordpress - 重写wordpress url

> ID：12987978
> 
> 赞同：1
> 
> 时间：2012-10-20T11:30:39.233
> 
> 标签：wordpress, url, rewrite

我有一个这样的网址

`xxxxx.com/?s=&cp_state=Porto&refine_search=yes`

我试着做一个这样的网址

`xxxxx.com/Porto`

已经尝试使用此代码：

```
 function search_url_rewrite_rule() {
    if ( is_search() && !empty($_GET['s'])) {
        wp_redirect(home_url("/search/") . urlencode(get_query_var('s')));
        exit();
    }   
}
add_action('template_redirect', 'search_url_rewrite_rule'); 
```

但是这段代码给了我一个这样的网址

`xxxxx.com/search/`

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:48:50.117

我不能发誓这会起作用，但你正在寻找这样的东西：

```
add_rewrite_rule('([^/]*)/?','index.php?s=&cpstate=$matches[1]&refine_search=yes','top'); 
```

我怀疑根据 URL 中的第一段进行重写是否明智，以防您稍后想要切换到站点其余部分的漂亮链接，您会得到很多奇怪的结果。例如 example.com/blog 会搜索 blog，example.com/search 会搜索 search 等等......如果你想要别的东西，你可以编辑正则表达式，使它适合你想要的。

在此处阅读更多信息：http: [//codex.wordpress.org/Rewrite_API/add_rewrite_rule](http://codex.wordpress.org/Rewrite_API/add_rewrite_rule)

# python - Python充当键盘

> ID：12987979
> 
> 赞同：1
> 
> 时间：2012-10-20T11:30:44.897
> 
> 标签：python, keyboard, python-2.7

> **可能重复：**
> [Python 中的按键](https://stackoverflow.com/questions/136734/key-presses-in-python)

我想知道是否有一种简单的方法可以让 python 充当键盘。我有一台使用 Mach 3 运行 windows 机器的 CNC 铣床。

我想创建一个 python 脚本，它将为我慢跑。要慢跑磨机，您只需按键盘上的按钮即可正常移动。

那么是否有一个 python 库可以在不同的程序中充当键盘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:45:39.983

如果您必须使用 python，请尝试[pywinauto](http://code.google.com/p/pywinauto/)或[AutoPy](http://www.autopy.org/)。

我更喜欢[AutoIt](http://www.autoitscript.com/site/autoit/)或[AutoHotKey](http://www.autohotkey.com/)。

# vb.net - 将 VB6 升级到 VB.NET - 用户控件不可用，因为我无法编译项目

> ID：12987984
> 
> 赞同：0
> 
> 时间：2012-10-20T11:31:53.713
> 
> 标签：vb.net, vb6-migration

我已使用升级向导将 VB6 项目升级到 VB.NET。

我想我现在陷入了一个恶性循环：

我的主窗体中有一个用户控件，可以从许多其他窗体访问。

IDE 告诉我它显示了最大数量的错误（102），并且显示的都是这样的：

```
ucPage is not a member of prjMyProject.frmMain
ucPage is not a member of prjMyProject.frmMain
ucPage is not a member of prjMyProject.frmMain
EB1 is not a member of prjMyProject.frmMain
EB1 is not a member of prjMyProject.frmMain 
```

我需要用标准控件替换 EB1，但我无法在设计器中加载 frmMain，因为 IDE 仍在嘲笑表单上缺少的 ucPage 控件。

并且工具箱中没有用户控件“ucPage”，因为我还没有能够编译项目，所以我什至不能把它放在我的表单上。我认为这是一个恶性循环。

有人对如何解决它有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:15:12.820

如果您将 VB6 项目转换为 VB.NET（尤其是 UI），请准备好遇到很多错误，因为许多 VB6 技巧与 VB.NET 不兼容。有一种方法可以在 VB.NET 中手动编辑表单设计器代码：

1.  `Solution Explorer - Show All Files`. 请注意，您的表单文件`Solution Explorer`现在可以展开。
2.  展开有问题的表格，然后双击`Designer.vb`文件。
3.  如果设计器文件不存在，很可能设计器代码位于 vb 文件中`#Region "Form Designer generated code"`，通常位于最顶部。

# javascript - 为什么jquery ajax调用会擦除当前数据？

> ID：12987985
> 
> 赞同：1
> 
> 时间：2012-10-20T11:32:06.090
> 
> 标签：javascript, jquery

我有一些代码调用了一个新的 html 文件，以添加到一个 div 中。我想知道为什么 div 中的内容被替换而不是添加。一旦我理解了“为什么”，我想知道如何将外部标记添加到 div 中，同时保留该 div 中已经存在的内容.

```
 $.ajax({
 url: 't3.html',
 success: function(data) {
 $('.ajax').html(data);
 }
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:34:10.420

尝试`.append`

```
 $.ajax({
 url: 't3.html',
 success: function(data) {
   $('.ajax').append(data);
  }
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:35:20.890

因为您正在用数据替换 .ajax div 的整个 HTML。如果要保留该控件的现有 HTML，请使用以下 $('.ajax').html($('.ajax').html() + data);d

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T11:37:39.757

代替：

```
$('.ajax').html(data); 
```

采用：

```
$('.ajax').append(data); 
```

# java - Slick2D 使用光标键平滑移动对象

> ID：12987986
> 
> 赞同：1
> 
> 时间：2012-10-20T11:32:06.740
> 
> 标签：java, slick2d

我正在玩 Slick2D，但在尝试使用光标键移动一个简单的矩形时遇到了问题。

功能方面，代码有效。但是，如果您按住其中一个光标键，则在看屏幕的动作中时不时会出现一点小插曲。

任何人都可以建议改进代码以使矩形平滑移动吗？

这是我使用的测试代码：

```
public class SlickGame extends BasicGame {
// ==================================================================================
// Fields
// ==================================================================================
private Rectangle mPlayer;

// ==================================================================================
// Constructor
// ==================================================================================
public SlickGame() {
    super("SlickGame");
}

// ===========================================================
// Methods for/from SuperClass/Interfaces
// ===========================================================
@Override
public void init(GameContainer pGameContainer) throws SlickException {
    // create the player centered on the screen
    mPlayer = new Rectangle(pGameContainer.getWidth()/2 - 20, pGameContainer.getHeight()/2 - 20, 40, 40);
}

@Override
public void update(GameContainer pGameContainer, int pDelta) throws SlickException {
    Input input = pGameContainer.getInput();
    int speed = 200;
    float distance = speed * ((float)pDelta/1000);

    if (input.isKeyDown(Input.KEY_LEFT)) {
        mPlayer.setX(mPlayer.getX() - distance);
    }
    if (input.isKeyDown(Input.KEY_RIGHT)) {
        mPlayer.setX(mPlayer.getX() + distance);
    }
    if (input.isKeyDown(Input.KEY_UP)) {
        mPlayer.setY(mPlayer.getY() - distance);
    }
    if (input.isKeyDown(Input.KEY_DOWN)) {
        mPlayer.setY(mPlayer.getY() + distance);
    }
}

@Override
public void render(GameContainer pGameContainer, Graphics pGraphics) throws SlickException {
    pGraphics.fill(mPlayer);
}

// ==================================================================================
// Methods
// ==================================================================================
public static void main(String[] args) {
     try {
         // create the game's container app
         AppGameContainer container = new AppGameContainer(new SlickGame());
         // adjust the resolution and disable fullscreen
         container.setDisplayMode(800, 600, false);
         // specify desired FPS
         container.setTargetFrameRate(60);
         // start the game
         container.start();
     }
     catch (SlickException e ) {
         e.printStackTrace();
     }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:49:41.630

谢谢，naughty_hacker。添加`container.setVSync(true);`成功了。

# java - 从android服务启动的线程是否与服务一样运行？

> ID：12987987
> 
> 赞同：2
> 
> 时间：2012-10-20T11:32:07.973
> 
> 标签：java, android, multithreading, service, kill

我正在从一个 android 服务启动一个线程，该服务使用 tcp 连接以恒定的时间间隔不断地将文件上传到服务器。该线程有一个执行此操作的 while(true) 循环。操作会执行一段时间，但随后会停止。我尝试使用 adb logcat 进行调试，并看到我在线程内打印的某些消息仅一段时间。之后他们也停了下来。此外，当我停止服务时，我得到了 NullPointerException，因为在服务的 onDestroy() 方法中我使用了线程对象。

只要服务运行，线程是否会被杀死并且不运行？我是否需要在服务类本身的 onStart() 中执行此 while(true) 操作而不生成新线程？

提供的任何解决方案都会有很大帮助。

代码如下：

```
 public void run() 
    {           
        Log.d("TAG","Starting Thread");         
        String data = "";   
        updateServer();
        while(flag)
        {                   
            String path = extStorageDirectory + "/" + appFolder + "/" + "SAT_pingLog_" + Long.toString(System.currentTimeMillis()) + ".txt";
            createFile(path);
            int count = 0;
            while(flag && count < 32768)
            {                               
                data = "";          
                String result = Long.toString(getLatency(url));                                     
                data = Long.toString(System.currentTimeMillis()) + " " + gps[0] + " " + gps[1] + " " + strength + " " + result;
                Log.d("DEBUGGING",data);
                writeToLog(path,data);
                try 
                {
                    Thread.sleep(sleepTime);
                } 
                catch (InterruptedException e) 
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                count++;
            }
            updateServer();
        }           
    }public long getLatency(String Url)
    {
        long startTime = 0, endTime = 0, latency = 0;                   
        try 
        {
            HttpParams httpParameters = new BasicHttpParams();
            // Set the timeout in milliseconds until a connection is established.
            // The default value is zero, that means the timeout is not used. 
            int timeoutConnection = 10000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
            // Set the default socket timeout (SO_TIMEOUT) 
            // in milliseconds which is the timeout for waiting for data.
            int timeoutSocket = 10000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
            DefaultHttpClient httpclient = new DefaultHttpClient(httpParameters);
            HttpHead httphead = new HttpHead(Url);
            //HttpParams httpParameters = new BasicHttpParams();                
            //HttpConnectionParams.setConnectionTimeout(httpParameters, 5000);
            //HttpConnectionParams.setSoTimeout(httpParameters, 5000);
            //HttpClient httpClient = new DefaultHttpClient(httpParameters);
            //request.setURI(new URI("http://www.google.com"));
            System.out.println("Executing request " + httphead.getURI());
            Log.d("DEBUGGING","STARTING EXECUTE");
            startTime = System.currentTimeMillis();             
            HttpResponse response = httpclient.execute(httphead);
            endTime = System.currentTimeMillis();
            Log.d("DEBUGGING","ENDING EXECUTE");
            int status = response.getStatusLine().getStatusCode();
            if (status == HttpStatus.SC_OK)                                
                latency = endTime - startTime;                                      
            else
                latency = 0;
        } 
        catch(Exception e)
        {
            Log.d("DEBUGGING","EXCEPTION CAUGHT");
            e.printStackTrace();
        }   
        Log.d("DEBUGGING","LATENCY:"+Long.toString(latency));
        return latency;
    }       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T11:36:35.280

> 只要服务运行，线程是否会被杀死并且不运行？

Android 组件不会注意到不是它们创建的线程。因此，虽然`IntentService`会处理它为使用而创建的线程，但`onHandleIntent()`普通人`Service`不会注意您自己 fork 的任何线程。

一旦服务被销毁，它泄漏的任何线程都将继续运行，直到 Android 终止该进程。

如果您的线程意外停止，那与`Service`- 再一次，*您*对自己分叉`Service`的线程一无所知。确保您没有通过空块默默地吃异常，因为我的猜测是某些事情正在引发异常，导致您退出循环，但由于某种原因您没有记录它。*`catch`*

# mysql - 创建非自动增量排序键

> ID：12987989
> 
> 赞同：-1
> 
> 时间：2012-10-20T11:32:10.123
> 
> 标签：mysql, sorting, auto-increment

目前，我需要按以下顺序对 3 个值进行排序：gameDate、some-column-that-guarantees-insertion-order、团队得分。

显然，将第二个排序参数作为唯一键，第三个排序参数将被忽略。因此，在生产应用程序中，我创建了一个“排序”列，存储一个非唯一的递增值（参见下面的查询结果），而不是按游戏结果 PK id 排序，然后允许

`SORT BY gameDate, sort, total DESC`

按总数排序让我首先获得获胜（或平局）球队，所以我不必

`if(teamA.total >= teamB.total) // show winner on left, loser on right`

在应用层生成每周游戏报告。

因此，为了获得我的排序蛋糕，而不是维护中间排序列，日期时间或时间戳似乎可以解决问题；但是，问题是我需要对插入日期进行非唯一的排序（两个参与者团队结果行的日期值必须相同），否则，它与对游戏结果 PK id 的排序相同，第 3 个排序列将被忽略。

为什么我需要这样做？要求是最近的游戏结果应该在任何给定的游戏日期最后显示（按gameDate，PK id排序），我自己的要求是总的第3列排序是可以达到的（这也是不可能的唯一键列作为第二个排序参数）。

可能即使到现在这也很清楚;-)

**原始**
我有一个需要在报告中显示的游戏结果列表，按游戏日期排序，然后是固定的排序顺序（即不能按游戏 ID 排序，因为最近显示的游戏必须在报告中的每个日期最后显示) 最后通过获胜的团队得分。

在当前版本的应用程序中，我使用了一个 int 排序列，在提交游戏结果时，会查询该列，然后为 db insert 操作增加 1。最终结果是我可以运行如下查询：

```
SELECT id, gameID, gameDate, teamID, total, sort 
FROM games 
ORDER BY gameDate, sort, total desc

+----+--------+------------+--------+-------+------+
| id | gameID | gameDate   | teamID | total | sort |
+----+--------+------------+--------+-------+------+
|  1 |      3 | 2011-12-01 |    798 |     6 |  161 |
|  2 |      3 | 2011-12-01 |    106 |     3 |  161 |
|  3 |      4 | 2011-12-01 |     78 |     8 |  162 |
|  4 |      4 | 2011-12-01 |    106 |     7 |  162 |
|  5 |      5 | 2011-12-04 |    106 |     4 |  163 |
|  6 |      5 | 2011-12-04 |    167 |     3 |  163 |
+----+--------+------------+--------+-------+------+ 
```

但是，我宁愿不处理维护排序列。是的，我可以在查询中按 gameDate 排序，然后按游戏结果 id PK 排序，并在应用层确定获胜团队排序，做一个`if(teamA.total >= teamB.total) ....`，但这也很丑 ;-)

我在想也许 DateTime 或 Timestamp（如果允许非唯一）可能会起作用。有点冒险，因为我记得 MySQL 不处理微秒，所以同时提交 2 个不同的游戏结果的问题是可能的（这可能导致游戏报告显示不正确）。

无论如何，底线是我需要找到一种按比赛日期排序*并*保留插入顺序的方法，这样我就可以获得球队比赛得分的最后一个排序子句（即按获胜球队排序）。

想法赞赏

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:41:31.573

从我的评论中进一步讨论：

1) 如果您知道每场比赛只有 2 支球队，则无需以这种方式标准化。类似于：gameID、team1ID、team1Total、team2ID、team2Total、tsPosted 可能会更好。

那么1）现在就足够了。本来要提到的是，您可以自行加入一个表并以这种方式找到获胜者，而无需应用层上的任何逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:06:25.713

将插入存储为 DateTime 似乎是更容易且更易于维护的方法（与当前存在的黑客排序列相比）；然后排序子句变为：

```
SORT BY gameDate, createDate, gameID, total DESC 
```

其中 createDate 是非唯一的，这意味着可以访问后续的排序列。在这种情况下，即使同时提交了 2 个单独的游戏结果，也没有关系，因为 gameID 排序提供了通向所需最终排序（获胜团队）的途径；-)

所以基本上我可以在应用层做：

```
games.map(x=> dao.insert(x)) 
```

其中游戏结果中的每个参与者团队对于 createDate 列具有相同的 DateTime 值。

应该做的伎俩...

# c# - 我无法部署我的单声道应用程序，因为 o DllNotFoundException

> ID：12987992
> 
> 赞同：0
> 
> 时间：2012-10-20T11:32:28.300
> 
> 标签：c#, mono

当我尝试使用以下命令运行我的单声道应用程序时：

```
mono SimpleBrowser.exe 
```

我在我的 Mac 上收到以下错误：

```
Unhandled Exception: System.TypeInitializationException: An exception  was thrown by the type initializer for Gtk.Application ---> System.DllNotFoundException: glibsharpglue-2
  at (wrapper managed-to-native) GLib.Thread:glibsharp_g_thread_supported ()
  at GLib.Thread.get_Supported () [0x00000] in <filename unknown>:0
  at Gtk.Application..cctor () [0x00000] in <filename unknown>:0    
  --- End of inner exception stack trace ---
  at SimpleBrowser.MainClass.Main (System.String[] args) [0x00000] in <filename unknown>:0  [ERROR]
  FATAL UNHANDLED EXCEPTION: System.TypeInitializationException: An exception was thrown by the type initializer for Gtk.Application ---> System.DllNotFoundException: glibsharpglue-2
  at (wrapper managed-to-native) GLib.Thread:glibsharp_g_thread_supported ()
  at GLib.Thread.get_Supported () [0x00000] in <filename unknown>:0
  at Gtk.Application..cctor () [0x00000] in <filename unknown>:0
  --- End of inner exception stack trace ---
  at SimpleBrowser.MainClass.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

我尝试在我的 Mac 上搜索丢失的 glibsharpglie-2 库，但找不到。我不确定问题是什么，因为应用程序在我从 Monodevelop 启动时运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T09:37:04.693

您需要在执行应用程序之前设置此环境变量：

```
export DYLD_FALLBACK_LIBRARY_PATH="/Library/Frameworks/Mono.framework/Versions/Current/lib:/usr/local/lib:/usr/lib" 
```

由于每次执行应用程序时都很难做到这一点，因此您应该创建一个为您执行此操作的包装脚本：

```
#!/bin/bash 
export DYLD_FALLBACK_LIBRARY_PATH="/Library/Frameworks/Mono.framework/Versions/Current/lib:/usr/local/lib:/usr/lib"
mono SimpleBrowser.exe "$@" 
```

这只是一个最小的示例，这里有一些更高级的：

```
#!/bin/bash 
MONO_FRAMEWORK=/Library/Frameworks/Mono.framework/Versions/Current/
export DYLD_FALLBACK_LIBRARY_PATH="$MONO_FRAMEWORK/lib:/usr/local/lib:/usr/lib"
EXE_DIR=`dirname $0`
$MONO_FRAMEWORK/mono $MONO_OPTIONS $EXE_DIR/SimpleBrowser.exe "$@" 
```

您所要做的就是确保脚本与可执行文件位于同一目录中以执行它。它允许您将选项传递给单声道（例如 --debug ）。这通常是 mono 的做法（`cat /usr/bin/mkbundle`例如），它在[官方应用程序部署指南](http://www.mono-project.com/Guidelines:Application_Deployment)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:44:07.240

来自具有类似问题的博客条目：http: ~~[//ngeor.net/blog/post/2012/08/25/Mac-and-Mono.aspx](http://ngeor.net/blog/post/2012/08/25/Mac-and-Mono.aspx)~~编辑：更新链接： http: [//ngeor.net/2012/08 /mac和单声道/](http://ngeor.net/2012/08/mac-and-mono/)

这里的问题是缺少环境变量。我像这样修改了/etc/profile（第二行和第三行应该在同一行没有点，我只是把它分解以适应页面）：

`export MONO_FRAMEWORK_PATH=/Library/Frameworks/Mono.framework/Versions/Current export DYLD_FALLBACK_LIBRARY_PATH="$MONO_FRAMEWORK_PATH/lib:... ...$DYLD_FALLBACK_LIBRARY_PATH:/usr/local/lib:/lib:/usr/lib"`

# google-apps-script - 向使用 scriptDB 存储的对象添加新属性

> ID：12987996
> 
> 赞同：0
> 
> 时间：2012-10-20T11:32:50.687
> 
> 标签：google-apps-script

我创建了一个数据库（scriptDB）并存储了信息（大约 600 人的 40 多个属性-学生-）。

```
var obj = {

alumne_id: email,

alumne_ordre: nomsencer_ordre,

alumne_timestamp: {created: new Date (). getTime (), changed:'', editor: 'unedited'},

alumne_nom: {nom: nomREAD, cognom1: cognom1READ, cognom2: cognom2READ, cognoms: cognomsREAD, nomsencer: nomsencerREAD},

(...)

} 
```

  我将此对象存储在我的数据库中：

```
var stored = db.save(ob); 
```

我因此定义了对象的属性并存储了我的。这完美地工作并更新数据，例如，将“alumne_nom.nom”更改为新值：'Joana'

现在我想为所有或部分这些对象（学生）添加新属性。

问题是我可以添加一个属性

```
newproperty1 
```

和：

```
stored.newproperty1 = '50 ' 
```

但我不能这样做：

```
stored.newproperty1.sub1

stored.newproperty1.sub2

stored.newproperty1.sub3 
```

有谁知道我如何添加这些子属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T14:44:56.687

要添加“子属性”，您需要首先定义属性。您可以通过为其设置一个空对象来做到这一点，例如

```
stored.newproperty1 = {};
//then all subs should work
stored.newproperty1.sub1 = 10; 
```

您也可以像处理对象一样在大括号上传递 subs 定义：

```
stored.newproperty1 = {sub1:10, sub2:20, etc:'value'}; 
```

# winapi - 使用 C 打开 LED

> ID：12987999
> 
> 赞同：0
> 
> 时间：2012-10-20T11:33:13.950
> 
> 标签：winapi, led, parallel-port

我想用 C 打开一个 LED，这意味着我想在并行端口上写。

但代码不起作用。

我使用`char ledStatus`而不是`BYTE ledStatus`. 有什么区别吗？？

这段代码有什么问题？

```
#include <windows.h>
#include <conio.h>
#include <staio.h>
#define LED_ON  1

int main()
{
   HANDLE h;
   unsigned long  dwSize=1;
   int success;

   h = CreateFile(
      L"LPT1",
      GENERIC_WRITE, // access (read-write) mode
      0, // share mode
      NULL, // pointer to security attributes
      OPEN_EXISTING, // how to create
      FILE_ATTRIBUTE_NORMAL, // file attributes
      NULL // handle to file with attributes to copy
   );

   if (INVALID_HANDLE_VALUE == h)
   {
      //Handle Error
      printf("CreateFile failed with error %d\n", GetLastError());
      exit(1);
   }
   else
   {
      printf("CreateFile1 Successful\n");
   }

   char   ledStatus;
   // turn on LED
   ledStatus = LED_ON;
   success = WriteFile(h, &ledStatus, 1, &dwSize, NULL);
   if (success)
   {
      printf("File Write Successful - %i bytes\n", dwSize);
   }
   else
   {
      printf("File Write Failed\n");
   }

   // close port
   CloseHandle(h);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:24:28.257

您的问题记录得很差，您没有描述您使用的信号或如何连接 LED。有很多方法可以弄错。但是你没有希望让它与标准的 Windows 并行驱动程序一起工作。它被写入接口并行设备，如打印机。这需要握手来为设备提供一个字节的时钟。驱动器打开 STROBE 信号，设备必须打开 ACK 信号以确认它复制了字节。这当然不会发生，WriteFile() 调用仅填充驱动程序中的缓冲区。

您需要另一个驱动程序来直接控制输出线，Inpout32 是一个常见的选择。[在Jan Axelson 的书中](http://www.lvr.com/parprtib.htm)找到必要的建议，还包括到 Inpout32 的链接。