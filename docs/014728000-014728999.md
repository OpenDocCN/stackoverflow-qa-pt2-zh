# StackOverflow 问答 14728000-14728999

# c++ - 省时的 std::vector::resize

> ID：14728004
> 
> 赞同：0
> 
> 时间：2013-02-06T11:30:09.397
> 
> 标签：c++, performance, stdvector

我有一个事件向量，第一个是更容易计算的守卫。我已经实现了如下的重置操作：

```
void reset()
{
    myVector.resize(1);
} 
```

这样就只剩下第一个元素了。此操作是否重新分配内存？我会循环调用它，所以我希望它非常省时。如果是这样，那么什么是有效的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:39:16.820

分配内存的唯一函数是`reserve`插入（`insert`和`push_back`）。在`shrink_to_fit`C++11 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:44:31.240

> 此操作是否重新分配内存？

如果向量中没有元素，则第一次调用`resize(1);`将进行分配。否则，没有。

> 什么是有效的替代方案？

有效的替代方法是在构造过程中为向量分配足够的空间。然后你确定不会发生重新分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:49:18.143

如果新大小小于当前大小，`std::vector::resize`则不分配内存。它只是破坏向量中的剩余元素。最坏情况下的复杂性与元素数量呈线性关系。

# objective-c - 从 Mac OS X 应用程序访问 iPhone 数据？

> ID：14728012
> 
> 赞同：0
> 
> 时间：2013-02-06T11:30:51.067
> 
> 标签：objective-c, iphone, macos

是否有可以允许我从 Mac OS X 应用程序访问我的 iPhone 数据的类库或 Objective-C 框架？

例如，如果我开发了一个编辑图片的应用程序，我想在不使用 iTunes 的情况下从该应用程序访问我的 iPhone 图片。我将我的 iPhone 作为 USB 设备连接，图片显示在应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:45:30.327

Apple 不支持（最近的）iDevices 的这种模式。有一些应用程序（主要在 Windows 上）可以做这种事情，但我认为你不会找到任何库来简化它。您可能需要检查越狱网站。他们可能会提供更好的信息。

# android - ActionBarSherlock 上自定义布局的位置

> ID：14728013
> 
> 赞同：1
> 
> 时间：2013-02-06T11:30:54.090
> 
> 标签：android, android-layout, actionbarsherlock

我是 ABS 的新手，以及与它相关的所有事情。我也是Android开发的新手，所以请原谅noobish问题:)

我整天都在学习如何使用 ABS。我的活动由一个 MapView 和操作栏中的一个搜索字段 (EditText) 以及一个按钮（放大镜）组成。

EditText 和 Button 位于我已添加到操作栏菜单的自定义 XML 中。但是，它似乎是 RightAligned，也就是说，我似乎无法将自定义布局移动到操作栏上我选择的位置（将其放在应用程序标题/图标旁边）。

我的问题？如何将我的自定义布局向左移动？或者，是否有更好的内置替代方案？

我只需要一个 EditText 和一个搜索按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:44:20.937

您不必使用 EditText 来搜索。而是使用 ActionBarSherlock 提供的 SearchView。它的用法与蜂窝 API 中的 SearchView 相同。就像设置菜单项一样简单。

[http://developer.android.com/guide/topics/search/search-dialog.html#UsingSearchWidget](http://developer.android.com/guide/topics/search/search-dialog.html#UsingSearchWidget)

ABS 示例中还有一个[SearchView 演示](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/SearchViews.java)

# android - 在 Android 应用程序中搜索 SQLite 数据库

> ID：14728016
> 
> 赞同：0
> 
> 时间：2013-02-06T11:30:59.293
> 
> 标签：android, android-sqlite

我的应用程序中有一个搜索功能。它几乎可以正常工作，我的问题是它只从一开始就捕获类似于 searchWord 的结果。

例如：如果 searchWord 是“ada”，则结果将包含所有以“ada”开头的记录，但不包含其中某处包含“ada”的记录。

我知道它必须只是一点点修改，但这是我做过的第一件数据库处理。

那么我必须如何修改它以搜索**任何包含**，而不是**开始于**？

代码：

```
public Cursor getMatchingFromContacts(String searchWord) throws SQLException {

    String queryString = "SELECT _id, full_name FROM "
            + SF_CONTACT_TABLE;

    if (searchWord != null) {
        searchWord = searchWord.trim() + "%";
        queryString += " WHERE " + FULL_NAME + " LIKE ?";
    }
    String params[] = { searchWord };

    if (searchWord == null) {
        params = null;
    }
    try {
        Cursor cursor = db.rawQuery(queryString,
                params);
        if (cursor != null) {
            cursor.moveToFirst();
            return cursor;
        }
    } catch (SQLException e) {
        Log.e("AutoCompleteDbAdapter", e.toString());
        throw e;
    }

    return null;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:44:18.923

只需在此处修改您的块：

```
if (searchWord != null) {
    searchWord = "%" + searchWord.trim() + "%";
    queryString += " WHERE " + FULL_NAME + " LIKE ?";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T11:56:31.020

试试这个..

```
if (searchWord != null) 
{
    searchWord = "%" + searchWord + "%";
    queryString += " WHERE " + FULL_NAME + " LIKE ?";
} 
```

# r - qplot：根据数据框中的顺序用线连接点

> ID：14728017
> 
> 赞同：1
> 
> 时间：2013-02-06T11:31:08.193
> 
> 标签：r, ggplot2

我有一个看起来像这样的 R 脚本：

```
library(ggplot2)

df <- read.table("path/to/file.txt", header=TRUE)

df$seq <- 1:nrow(df)

p1 <- qplot(x=ref_PA,y=RMSD,data=df) + geom_line()
print(p1) 
```

然后我绘制如下所示的数据：

![在此处输入图像描述](../Images/129d1c447bf49f8dcfa4b8ed475fe279.png)

问题是这些点是通过它们出现在 x 轴上的顺序连接的，有没有办法通过`seq`我在我的数据框中生成的列来连接这些点（`df`）

我的数据框示例如下所示：

```
> head(df)
  ref_pdb next_pdb   RMSD ref_PA next_PA delta_PA seq
1    1qiv     1lin 0.5879   1337    1388       51   1
2    1lin     1a29 0.3970   1388    1362       26   2
3    1a29     3ewt 1.1926   1362    1380       18   3
4    3ewt     3ewv 1.2140   1380    1412       32   4
5    3ewv    3gof2 1.6565   1412    1418        6   5
6   3gof2    3gof1 0.3080   1418    1419        1   6 
```

我知道你们都喜欢可重现的例子，所以这是我的数据框，`seq`列：

```
structure(list(ref_pdb = structure(c(13L, 8L, 1L, 42L, 43L, 45L, 
44L, 15L, 14L, 20L, 16L, 17L, 18L, 10L, 9L, 30L, 28L, 21L, 23L, 
22L, 33L, 46L, 49L, 4L, 32L, 40L, 24L, 25L, 38L, 7L, 31L, 29L, 
27L, 26L, 39L, 6L, 19L, 11L, 47L, 48L, 41L, 2L, 36L, 37L, 50L, 
3L, 12L, 5L, 34L, 35L, 51L, 52L), .Label = c("1a29", "1cll", 
"1clm", "1cm1", "1exr", "1ggz", "1iq5", "1lin", "1mxe1", "1mxe2", 
"1ooj", "1osa", "1qiv", "1qiw1", "1qiw2", "1qs71", "1qs72", "1qtx", 
"1rfj", "1vrk", "1wrz", "1yr5", "1zuz", "2f3y", "2f3z", "2ix71", 
"2ix72", "2k0j", "2k61", "2l7l", "2lgf", "2o5g", "2o60", "2r281", 
"2r282", "2v01", "2v02", "2vay", "2ygg", "3bxl", "3cln", "3ewt", 
"3ewv", "3gof1", "3gof2", "3gp2", "3sjq1", "3sjq2", "3sui", "4cln", 
"4g27", "4g28"), class = "factor"), next_pdb = structure(c(9L, 
1L, 42L, 43L, 45L, 44L, 15L, 14L, 20L, 16L, 17L, 18L, 11L, 10L, 
30L, 28L, 21L, 23L, 22L, 33L, 46L, 49L, 4L, 32L, 40L, 24L, 25L, 
38L, 8L, 31L, 29L, 27L, 26L, 39L, 7L, 19L, 12L, 47L, 48L, 41L, 
2L, 36L, 37L, 50L, 3L, 13L, 5L, 34L, 35L, 51L, 52L, 6L), .Label = c("1a29", 
"1cll", "1clm", "1cm1", "1exr", "1g4y", "1ggz", "1iq5", "1lin", 
"1mxe1", "1mxe2", "1ooj", "1osa", "1qiw1", "1qiw2", "1qs71", 
"1qs72", "1qtx", "1rfj", "1vrk", "1wrz", "1yr5", "1zuz", "2f3y", 
"2f3z", "2ix71", "2ix72", "2k0j", "2k61", "2l7l", "2lgf", "2o5g", 
"2o60", "2r281", "2r282", "2v01", "2v02", "2vay", "2ygg", "3bxl", 
"3cln", "3ewt", "3ewv", "3gof1", "3gof2", "3gp2", "3sjq1", "3sjq2", 
"3sui", "4cln", "4g27", "4g28"), class = "factor"), RMSD = c(0.5879, 
0.397, 1.1926, 1.214, 1.6565, 0.308, 1.736, 1.2785, 1.8785, 0.8899, 
0.7611, 1.7691, 1.9543, 0.3456, 1.6468, 1.9575, 1.2693, 0.6397, 
0.8545, 2.1215, 2.0911, 1.4976, 2.312, 2.3692, 2.6759, 2.0306, 
0.4719, 0.7809, 1.6036, 2.2123, 3.8186, 9.2451, 2.4978, 14.0809, 
2.1417, 2.1248, 1.6743, 1.2079, 0.2223, 1.2878, 0.2746, 0.5786, 
0.5356, 0.6444, 0.7692, 0.3618, 0.4772, 2.1024, 1.1866, 22.9332, 
0.2094, 0.8705), ref_PA = c(1337, 1388, 1362, 1380, 1412, 1418, 
1419, 1384, 1425, 1493, 1423, 1426, 1508, 1436, 1438, 1476, 1484, 
1512, 1466, 1504, 1507, 1456, 1441, 1413, 1510, 1432, 1499, 1463, 
1432, 1465, 1475, 1469, 1499, 1486, 1647, 1635, 1634, 1571, 1637, 
1638, 1623, 1627, 1596, 1602, 1641, 1631, 1677, 1652, 1577, 1603, 
1649, 1645), next_PA = c(1388, 1362, 1380, 1412, 1418, 1419, 
1384, 1425, 1493, 1423, 1426, 1508, 1436, 1438, 1476, 1484, 1512, 
1466, 1504, 1507, 1456, 1441, 1413, 1510, 1432, 1499, 1463, 1432, 
1465, 1475, 1469, 1499, 1486, 1647, 1635, 1634, 1571, 1637, 1638, 
1623, 1627, 1596, 1602, 1641, 1631, 1677, 1652, 1577, 1603, 1649, 
1645, 1653), delta_PA = c(51, 26, 18, 32, 6, 1, 35, 41, 68, 70, 
3, 82, 72, 2, 38, 8, 28, 46, 38, 3, 51, 15, 28, 97, 78, 67, 36, 
31, 33, 10, 6, 30, 13, 161, 12, 1, 63, 66, 1, 15, 4, 31, 6, 39, 
10, 46, 25, 75, 26, 46, 4, 8), seq = 1:52), .Names = c("ref_pdb", 
"next_pdb", "RMSD", "ref_PA", "next_PA", "delta_PA", "seq"), row.names = c(NA, 
-52L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:42:56.307

我认为您正在寻找`geom_path`而不是`geom_line`. 见`?geom_path`。

```
p1 <- qplot(x=ref_PA,y=RMSD,data=df) + geom_path()
p1 
```

![在此处输入图像描述](../Images/346ea0d8c5087633b10c44fc3bd691ed.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:49:01.193

除了@plannapus，连接的顺序基于行的顺序。例如随机化`seq`和重新排序行：

```
library(reshape)
df$seq = sample(df$seq)
df = sort_df(df, "seq") 
```

现在顺序不同了：

```
qplot(x=ref_PA,y=RMSD,data=df) + geom_path() 
```

![在此处输入图像描述](../Images/f0665e6322e8532ed6c49e5b56d8772a.png)

# symfony - symfony2 验证继承

> ID：14728018
> 
> 赞同：5
> 
> 时间：2013-02-06T11:31:09.120
> 
> 标签：symfony, yaml

我有一个父实体，它有多个继承其方法的子实体。当验证表单的时候到了，我不知道如何不重复每个父字段验证约束。

这是一些代码：

```
#validation.yml
Dir\Entity\Parent:
    properties:
        name:
          - NotBlank: {message: 'name.empty'}

Dir\Entity\Child1:
    properties:
        name:
          - NotBlank: {message: 'name.empty'}
        age:
          - NotBlank: {message: 'age.empty'}

Dir\Entity\Child2:
    properties:
        name:
          - NotBlank: {message: 'name.empty'}
        title:
          - NotBlank: {message: 'title.empty'} 
```

如您所见，name 属性在子约束中一次又一次地出现。有没有办法将父约束直接包含在子约束中，这样我就不必重复父约束修改了？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T09:37:48.720

抱歉 Yokoloko 我有时会忘记给出解决方案。这是我所做的：

我已经为父级创建了一个约束验证，因此我不必在每次创建子级时重现代码。因此，我只在必要时专注于儿童领域。

这就是启发我的原因[http://symfony.com/doc/master/cookbook/validation/custom_constraint.html](http://symfony.com/doc/master/cookbook/validation/custom_constraint.html)

如果您需要更多详细信息，请告诉我

# animation - 如何在 Unity 中碰撞 .fbx 动画

> ID：14728023
> 
> 赞同：1
> 
> 时间：2013-02-06T11:31:36.823
> 
> 标签：animation, unity3d, unityscript

我是新来的团结。我有两个 .fbx 格式的动画。它们可以移动..现在我想当两者相互碰撞时会产生声音。有什么想法我会怎么做。提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:28:09.640

我认为您需要了解物理的工作原理，以及如何处理触发事件和碰撞检测。

在这里阅读[这个](http://docs.unity3d.com/Documentation/Manual/Physics.html)，和[这个](http://www.unity3dstudent.com/2010/07/beginner-b01-basic-collision-detection/)。第一个让您深入了解 Unity 引擎的工作原理。后者提供了有关如何进行碰撞检测的视频教程。

如果您不想这样做而只想要代码，我在快速谷歌上找到了[这个：](http://docs.unity3d.com/Documentation/ScriptReference/AudioSource.PlayOneShot.html)

```
var crashSound : AudioClip; // set this to your sound in the inspector function   
OnCollisionEnter (collision : Collision) {    
    // next line requires an AudioSource component on this gameobject5\.    
    audio.PlayOneShot(crashSound);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:49:25.713

You can add a MeshCollider to the fbx meshes. Anyway, this is not a good idea because this will cause performance issues.

You can create an empty gameobject for each character, and add to them: the fbx animation and a simple collider (some cube, sphere, capsule, etc). Then, when you use a script for them, you attach it to the parent object and from there you handle the whole thing.

If you want that the collider moves from specific places from the animation (Like the punch movement, or a kick),then you can ask to your 3D animator/modeler to add a simple mesh on that points. For example, a sphere on one punch, which will move with the animation. Then, in Unity, you will hide the mesh of the sphere but add a mesh collider to it. :)

Hope it helps!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T22:58:03.163

大多数情况下，如果您将动画应用于对象，那么您将失去物理反应。不相信我？见这里：[http ://www.youtube.com/watch?v=oINKQUJZc1Q](http://www.youtube.com/watch?v=oINKQUJZc1Q)

显然，动画不是 Unity 物理的一部分。想一想…… Unity 物理根据牛顿和朋友定律决定物体的位置和旋转。你认为这些规律如何能符合一个关键帧的任意动画？他们不能：因此当你尝试时你会得到疯狂的结果。

如何解决？将 Unity 物理也用于动画：学习掌握[rigidbody.AddForce以及](http://docs.unity3d.com/Documentation/ScriptReference/Rigidbody.AddForce.html)[此处](http://docs.unity3d.com/Documentation/ScriptReference/Rigidbody.html)描述的所有其他内容。

您可能总是希望将物理和动画分开。[这样你才能摆脱困境](http://www.youtube.com/watch?v=dYT9RjS9Mqw)。

如果你真的想知道：这是我关于如何用动画来调节物理的个人经验。

> 有时，即使将一个简单的参数绑定到物理，另一个绑定到动画（或调解用户输入的脚本），也可能导致灾难性的结果。我制作了一艘星际飞船：用户鼠标旋转控制器（通过标记“阻止刚体旋转”），物理方向和速度。它在一个盒子对撞机里面。想象一下，如果一个以几度角定向的立方体遇到平坦的地面会发生什么：它应该下落并旋转，直到其中一个面完全放在地面上。这是不可能的，因为我阻止了与身体旋转的任何物理交互：结果盒子想平放在地上但不能。这种紧张关系最终使它永远向前发展：这在现实世界中是不可能的。为了调解这个错误，我做了“块轮换” 参数根据用户输入动态变化：当船在移动时，旋转由用户控制，但一旦用户停止控制船，旋转参数就会返回给物理引擎。另一种解决方案是向对撞机投射光线，检查地面是否靠近，如果船没有移动，则避免碰撞（我认为这就是 Halo Combat Evolved 中的女妖控制方式）。在玩电子游戏时，请始终注意您的用户输入是如何传递到物理引擎中的：您可能会发现普通玩家通常不会注意到的东西。另一种解决方案是向对撞机投射光线，检查地面是否靠近，如果船没有移动，则避免碰撞（我认为这就是 Halo Combat Evolved 中的女妖控制方式）。在玩电子游戏时，请始终注意您的用户输入是如何传递到物理引擎中的：您可能会发现普通玩家通常不会注意到的东西。另一种解决方案是向对撞机投射光线，检查地面是否靠近，如果船没有移动，则避免碰撞（我认为这就是 Halo Combat Evolved 中的女妖控制方式）。在玩电子游戏时，请始终注意您的用户输入是如何传递到物理引擎中的：您可能会发现普通玩家通常不会注意到的东西。

# c# - 从 HTML 访问 C# 值

> ID：14728037
> 
> 赞同：-4
> 
> 时间：2013-02-06T11:32:21.437
> 
> 标签：c#, javascript, html

我在 C# 中定义了一个变量“str”：

```
 public string str= "hello"; 
```

我有一个需要从“str”读取值的 HTML 文件。我没有使用 ASP.NET。如何从 HTML 文件中读取 JavaScript 中的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:40:27.833

如果这个字符串，正如你的意思，是在 C# 文件中定义的，这意味着这个变量驻留在服务器端。您的 HTML 是客户端的，这意味着您不能“仅”访问此变量。您将需要一个像 Web 服务这样的连接来公开变量。然后可以通过 JavaScript 调用此服务。jQuery 在这里会很有帮助。

访问变量的另一种方法是将值放在隐藏字段或其他一些 HTML 控件中。然后使用一小段 JavaScript 就很容易获得价值。

**编辑：** 假设您使用的是 ASP.NET，以下将起作用：

**C＃：**

```
private string str = "Hello World!";

protected void Page_Load(object sender, EventArgs e)
{
    StrHiddenField.Value = str;
} 
```

**页：**

```
<asp:HiddenField ID="StrHiddenField" runat="server" />
<script type="text/javascript" language="javascript">
    var theValue = document.getElementById('<%=StrHiddenField.ClientID%>').value;
    alert(theValue);
</script> 
```

**编辑2：**

或者使用 jQuery（不要忘记[***下载***](http://jquery.com/download/)并包含文件）

```
var theValue = $('#<%=StrHiddenField.ClientID%>').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:49:02.310

如果您正在使用`C# MVC`：您可以直接从模型中分配隐藏字段：

```
 @Html.HiddenFor(m => m.str) 
```

然后在您的 JavaScript 文件中，您可以执行以下操作：

```
var str = document.getElementById('str'); 
```

如果您正在使用`ASP.NET WebForms`，您可以使用服务器端控件：

```
<asp:TextBox ID="txtStr" runat="server" />

public void Page_Load(object sender, EventArgs e) 
{
      txtStr.Text = str;
} 
```

您必须使用 Internet Explorer ( )`Document Object Model`中的开发人员工具检查该控件的名称。`F12`然后，您可以引用服务器端控件并使用我提到的相同方法将其分配给 JavaScript 变量： `document.getElementById`

# download - 禁用来自谷歌驱动器的大文件通知

> ID：14728038
> 
> 赞同：18
> 
> 时间：2013-02-06T11:32:30.023
> 
> 标签：download, google-drive-api

在下载 zip 文件（我假设超过 25MB）时，我收到以下通知，

```
Sorry, we are unable to scan this file for viruses.

The file exceeds the maximum size that we scan. Download anyway 
```

在浏览器中。是否有任何选项可以禁用它，这样我就可以直接下载任何大文件而不必收到诸如中断之类的消息。

想知道谷歌驱动器中是否有任何设置，以便我可以禁用该代理消息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-25T08:21:01.283

> *已过时：此方法在 2016 年 8 月 31 日之后不再有效*

我发现以下模式允许禁用大文件通知：

```
https://googledrive.com/host/file-id 
```

我想任何人都知道如何找到 Google Drive 文件的**文件 ID**。

请记住，此方法仅适用于使用“在网络上公开”选项共享文件的情况。

但此功能已弃用，并将在 2016 年 8 月 31 日之后停止工作：http: [//googleappsdeveloper.blogspot.com/2015/08/deprecating-web-hosting-support-in.html](http://googleappsdeveloper.blogspot.com/2015/08/deprecating-web-hosting-support-in.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-11-30T19:56:29.297

在花费了无数个小时试图获得绕过病毒扫描的直接下载链接后，我终于偶然发现了它。以下格式的 URL 以及您的 Google API 密钥将绕过病毒扫描。我在任何地方都找不到此文档（[这里是官方文档](https://developers.google.com/drive/v3/web/manage-downloads)），因此使用风险自负，因为未来的更新可能会破坏它。[https://www.googleapis.com/drive/v3/files/fileid/?key=yourapikey&alt=media](https://www.googleapis.com/drive/v3/files/fileid/?key=yourapikey&alt=media)

您还可以使用来自 google oauth 的授权访问令牌而不是 apikey。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-02T04:32:29.003

我不相信有任何方法可以绕过 Google Drive 的警告，即文件太大而无法扫描病毒。

曾经，Google Drive 通过类似于 googledrive.com/host/[doc id] 的 webViewLink URL 提供网络托管支持。但该功能已被弃用，并将在 2016 年 8 月 31 日之后停止工作。

[http://googleappsdeveloper.blogspot.com/2015/08/deprecating-web-hosting-support-in.html](http://googleappsdeveloper.blogspot.com/2015/08/deprecating-web-hosting-support-in.html)

[https://developers.google.com/drive/v2/web/publish-site](https://developers.google.com/drive/v2/web/publish-site)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-19T07:01:11.763

用于`zip-extractor`下载文件并提取到您的 Google Drive。它在您找到链接的网站上作为一个选项提供。您必须在 Google Drive 上登录才能使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-16T09:46:16.687

更好的选择是使用[Google Cloud Bucket](https://cloud.google.com/storage/docs/downloading-objects)。

1.  在 Google Cloud Platform Console 中打开 Cloud Storage 浏览器。
2.  根据您的需要创建多区域或区域的存储桶。
3.  将文件上传到存储桶并公开。
4.  使用公共 url 使用脚本、浏览器、gcloud 命令、wget 或 curl 下载文件。

这适用于任何文件大小。Cloud Bucket 服务真的很便宜。Google 为您提供免费积分以开始使用，并且免费积分可以很好地涵盖存储桶的使用。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-06T11:39:43.590

好吧，您可以尝试“仍然下载”

如果这不起作用，我在 Gmail 中发现通过将扩展名更改为*.txt*可以下载/传输文件，然后在下载后您可以将其更改回*.zip*

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-02-02T17:59:26.103

如果您简单地使用以下链接约定，您可以绕过预览、病毒扫描并获得正确的文件名：

[https://drive.google.com/uc?export=download&confirm=yTib&id=FILE_ID](https://drive.google.com/uc?export=download&confirm=yTib&id=FILE_ID)

谷歌驱动器文件 ID 替换 FILE_ID 的位置。

谢谢，米克

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2019-03-21T11:02:56.430

方法是使用 Mick 建议的链接格式：

[https://drive.google.com/uc?export=download&confirm=CONFIRM_CODE&id=FILE_ID](https://drive.google.com/uc?export=download&confirm=CONFIRM_CODE&id=FILE_ID)

确认代码对每个文件无限期有效。它不会随着时间而改变。到目前为止，找出确认代码（或就此而言，完整链接）的唯一方法是 curl [https://drive.google.com/uc?export=download&id=FILE_ID](https://drive.google.com/uc?export=download&id=FILE_ID)然后提取“无论如何下载”下的链接"按钮，其中包括确认代码。

干杯。

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2015-07-09T14:38:16.643

您必须禁用 Chrome 的病毒扫描，但它会禁用浏览器的所有活动的病毒扫描。在 Chrome 偏好设置中，显示高级设置并取消选中“启用网络钓鱼和恶意软件防护”。

# hadoop - 如何用 PIG 计算唯一用户数

> ID：14728039
> 
> 赞同：1
> 
> 时间：2013-02-06T11:32:31.507
> 
> 标签：hadoop, apache-pig

以下代码没有准确返回我要计算的内容；唯一用户的数量。任何的想法？

```
data = LOAD 'input_initial' AS (user_id,item_id,rating,timestamp);
data = FOREACH data GENERATE user_id,item_id;
STORE data INTO 'input_final';
data_users = FOREACH data GENERATE user_id;
group_users = GROUP data_users BY user_id;
count_users = FOREACH group_users GENERATE COUNT(data_users);
STORE count_users INTO 'count_users'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:55:08.083

您需要修改最终的 GROUP 操作以作用于“全部”而不是单个字段：

```
group_users = GROUP data_users BY user_id;
grp_all = GROUP group_users ALL;
count_users = FOREACH grp_all GENERATE COUNT(group_users); 
```

# eclipse - WTP - m2e 不部署传递依赖项

> ID：14728040
> 
> 赞同：12
> 
> 时间：2013-02-06T11:32:35.203
> 
> 标签：eclipse, maven, m2e, eclipse-wtp

我有一个以这种方式构建的 Web 应用程序：

**A.jar -> B.war -> C.war**

我正在使用 Eclipse Juno 并且**WTP 版本是 1.1**。A.jar 是 B.war 包含的工作空间实用程序项目。B.war 是 C.war 作为覆盖包含的战争项目。这就是我这样做[的方式：](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)

```
<dependency>
    <groupId>com.projects</groupId>
    <artifactId>B</artifactId>
    <version>1.0-SNAPSHOT</version>
    <type>war</type>
    <scope>runtime</scope>
</dependency> 
```

之后，我将 C 项目部署到 Tomcat 服务器。如果我手动将 Maven 生成的战争部署到 Tomcat，这就像一个魅力，因为 A.jar 包含在*WEB-INF/lib*中。但是，当我让**m2e-wtp**进行部署时，我的问题就来了，因为它正确地进行了覆盖，但不包括 A 传递依赖。我尝试将它作为一个 pom 包含在内，因为我在这里的某个地方读到了，但我得到了相同的结果。

```
<dependency>
    <groupId>com.projects</groupId>
    <artifactId>B</artifactId>
    <version>1.0-SNAPSHOT</version>
    <type>war</type>
    <scope>runtime</scope>
</dependency>

<dependency>
    <groupId>com.projects</groupId>
    <artifactId>B</artifactId>
    <version>1.0-SNAPSHOT</version>
    <type>pom</type>
</dependency> 
```

我正在使用最新版本的**m2e** (1.2) 和**m2e-wtp** (0.16) 并使用 Maven 配置更新我的项目。

是 m2e-wtp 问题还是我必须以其他方式组织我的项目？

* * *

**已编辑**

我注意到 m2e-wtp 配置存储在 Eclipse 的*project./settings/org.eclipse.wst.common.component*文件中。这就是我的战争的样子：

```
<dependent-module deploy-path="/"
    handle="module:/overlay/prj/B?includes=**/**&amp;excludes=META-INF/MANIFEST.MF">
    <dependency-type>consumes</dependency-type>
</dependent-module>
<dependent-module deploy-path="/"
    handle="module:/overlay/slf/?includes=**/**&amp;excludes=META-INF/MANIFEST.MF">
    <dependency-type>consumes</dependency-type>
</dependent-module> 
```

正如我所见，战争依赖项设置为**使用**，而 jar 依赖项设置为**使用**。

发布的 m2e-wtp 0.17 版似乎没有修复它。

* * *

**已编辑 (2013-08-30)**

今天我又回到了同样的问题。即使我安装了开箱即用的[最新稳定版 WTP](http://wiki.eclipse.org/M2E-WTP/New_and_Noteworthy/1.0.0)的 Eclipse 开普勒，这个问题似乎仍然存在。我以为它已经解决了，但我显然错误地检查了它......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T23:00:04.517

我认为这不是您的项目组织的问题。[您的问题与此 m2e-wtp错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=398138)非常相似 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T21:37:23.167

这似乎是 Eclipse Juno 和 WTP 插件问题。

我有同样的问题，我以这种方式解决了：

1.  备份您的 Eclipse 工作区和项目代码
2.  从 Eclipse 中删除您的项目（不删除内容）
3.  打开命令终端（cmd）
4.  运行*mvn eclipse:clean*
5.  运行*mvn eclipse:eclipse -Dwtpversion=2.0*
6.  使用文本编辑器编辑 Eclipse 类路径文件：%PROJECT_PATH%\.classpath
7.  从*.classpath*文件中删除所有具有属性*kind="var"的行。*例如： *> < classpathentry kind="var" path="M2_REPO/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar" sourcepath="M2_REPO/javax/servlet/servlet-api/2.5/servlet-api-2.5 -sources.jar"/>* 
**   保存文件并关闭编辑器。*   在eclipse中，点击：file->Import...->Maven->import existing maven project，再次导入你的项目*   Maven -> 更新项目（如果需要）*

*您可以在 Eclipse 项目属性中的*部署程序集上看到问题已解决，并且存在 maven 依赖项。*

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T13:44:08.653

我也有这个问题。我有一个丑陋的解决方法：

将*所有*原始战争的依赖项放在一个单独的项目（类型 jar）中，并使原始战争和覆盖战争都依赖于它。所以对于这个例子：

**A.jar -> B.war -> C.war**

变成

**A.jar -> B-dependencies.jar**（创建了名为 B-dependencies 的新模块）

**B-dependencies.jar -> B.war**

**B-dependencies.jar -> C.war**

请注意，它并非特定于 Tomcat。我正在使用 JBoss。*

# jquery - 循环遍历元素时的上一个和下一个链接

> ID：14728046
> 
> 赞同：0
> 
> 时间：2013-02-06T11:32:53.307
> 
> 标签：jquery

我正在尝试使用以下 jquery 设置一个简单的自定义滑块

```
var divs = $('div[class^="slide-holder-"]').hide(),
    i = 0,
    $slide = $("#banner > div");

(function cycle() { 
    divs.eq(i).fadeIn(400)
              .delay(2000)
              .fadeOut(400, cycle);

i = ++i % divs.length;
})(); 
```

使用以下html

```
<div id="banner">
   <div class="slide-holder-1">
      <div class="slide-1"> some content </div>
   </div>
   <div class="slide-holder-2">
      <div class="slide-2"> some content </div>
   </div>
</div> 
```

我希望添加上一个和下一个链接以直接返回/前进但没有任何运气，我将不胜感激任何帮助！

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:17:28.910

它不是很优雅，但添加到 div 以在 html 中向前或向后切换：

```
<div id="banner">
   <div id="backward" style="float:left">&lt;</div>
   <div id="forward" style="float:right">&gt;</div>
   <div class="slide-holder-1">
      <div class="slide-1"> some content 1 </div>
   </div>
   <div class="slide-holder-2">
      <div class="slide-2"> some content 2 </div>
   </div>
   <div class="slide-holder-3">
      <div class="slide-3"> some content 3 </div>
   </div>
</div> 
```

然后停止动画，`i`如有必要进行更改并`cycle`为我重新开始工作。

```
$(function() {

  var divs = $('div[class^="slide-holder-"]').hide(),
      i = 0,
      $slide = $("#banner > div");

  function cycle() { 
      divs.eq(i).fadeIn(400)
          .delay(2000)
          .fadeOut(400, cycle);
      i = ++i % divs.length;
  }

  $('#forward').click(function() {
      divs.stop(true).hide();
      cycle();
  });

  $('#backward').click(function() {
      divs.stop(true).hide();
      i = (i-2+divs.length) % divs.length;
      cycle();
  });

  cycle();

}); 
```

我需要为此创建`cycle`一个“可见”功能。不能快速翻阅项目，因为`fadeIn`需要显示当前元素才能翻页到下一个，但也许它至少是一个起点。

# python - IOS 上的本机 NodeJS - ./configure 问题

> ID：14728050
> 
> 赞同：1
> 
> 时间：2013-02-06T11:33:10.000
> 
> 标签：python, ios, node.js, native, jailbreak

我正在尝试在 jaibroken iPad 3 上的 iOS 6.1 上安装本机 NodeJS。我已经安装了 apt、自定义 python 2.7.3、GNU C 编译器（带有第三方 libgcc）、修改了 nodejs ./configure 以使用 gcc，但在配置过程中有一些问题：

```
#check if we have lastest python
ipad:/var/mobile/node-v0.8.18 root# python
Python 2.7.3 (default, Aug 11 2012, 10:54:38)
[GCC 4.2.1 Compatible Apple Clang 3.0 (tags/Apple/clang-211.11)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> exit()

#check if we have working gcc
ipad:/var/mobile/node-v0.8.18 root# gcc
gcc: no input files
root@localhost's password:

ipad:~ root# cd /var/mobile/node-v0.8.18
ipad:/var/mobile/node-v0.8.18 root# ./configure
{ 'target_defaults': { 'cflags': [],
                       'default_configuration': 'Release',
                       'defines': [],
                       'include_dirs': [],
                       'libraries': []},
  'variables': { 'armv7': 0,
                 'clang': 0,
                 'gcc_version': 42,
                 'host_arch': 'arm',
                 'node_install_npm': 'true',
                 'node_install_waf': 'true',
                 'node_prefix': '',
                 'node_shared_openssl': 'false',
                 'node_shared_v8': 'false',
                 'node_shared_zlib': 'false',
                 'node_tag': '',
                 'node_unsafe_optimizations': 0,
                 'node_use_dtrace': 'false',
                 'node_use_etw': 'false',
                 'node_use_openssl': 'true',
                 'target_arch': 'arm',
                 'v8_no_strict_aliasing': 1,
                 'v8_use_arm_eabi_hardfloat': 'false',
                 'v8_use_snapshot': 'true'}}
creating  ./config.gypi
creating  ./config.mk
Traceback (most recent call last):
  File "tools/gyp_node", line 58, in <module>
    run_gyp(gyp_args)
  File "tools/gyp_node", line 18, in run_gyp
    rc = gyp.main(args)
  File "./tools/gyp/pylib/gyp/__init__.py", line 511, in main
    return gyp_main(args)
  File "./tools/gyp/pylib/gyp/__init__.py", line 503, in gyp_main
    generator.GenerateOutput(flat_list, targets, data, params)
  File "./tools/gyp/pylib/gyp/generator/make.py", line 2095, in GenerateOutput
    part_of_all=qualified_target in needed_targets)
  File "./tools/gyp/pylib/gyp/generator/make.py", line 764, in Write
    self.Pchify))
  File "./tools/gyp/pylib/gyp/generator/make.py", line 1137, in WriteSources
    cflags = self.xcode_settings.GetCflags(configname)
  File "./tools/gyp/pylib/gyp/xcode_emulation.py", line 260, in GetCflags
    sdk_root = self._SdkPath()
  File "./tools/gyp/pylib/gyp/xcode_emulation.py", line 247, in _SdkPath
    return os.path.join(self._GetSdkBaseDir(),
  File "./tools/gyp/pylib/gyp/xcode_emulation.py", line 230, in _GetSdkBaseDir
    stderr=subprocess.STDOUT)
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

我必须解决各种问题：

*   缺少 python 构建要素
*   ./configure 仍然尝试使用 xcode 来处理我指定使用 gcc 的面部之外的东西：

    CC = os.environ.get('CC', 'cc')

至：

```
CC = os.environ.get('GCC', 'gcc') 
```

然后我得到列出的错误。有什么建议么？谢谢！

# c# - wpf 用户控件中的用户控件没有响应

> ID：14728054
> 
> 赞同：0
> 
> 时间：2013-02-06T11:33:22.107
> 
> 标签：c#, wpf

我的项目中有一个奇怪的问题。有由用户控件和菜单栏（也是用户控件）组成的页面。

这是我的用户控件，其中包含几个按钮

```
public partial class UpperBar : UserControl
{       
    public UpperBar()
    {
        InitializeComponent();
    }

    public event EventHandler EventbtClicked;
    private void btConnect_Click(object sender, System.Windows.RoutedEventArgs e)
    {
        EventbtClicked(this, e);
    }    
} 
```

我在我的页面中添加了如下：

```
<local:UpperBar VerticalAlignment="Top" Grid.Row="0" Height="78" Grid.ColumnSpan="3" Margin="0,2,0,0"/> 
```

在我的页面中尝试调用事件：

```
public PageStatus()
{
    InitializeComponent();
    Plc.ExecuteRefresh += new EventHandler(RefreshLeds);

   UpperBar.EventbtCliced += new EventHandler(UpperBatButtonClick);  
}

protected void UpperBarButtonClick(object sender, EventArgs e)
{
    //do something
} 
```

但是我无法使用它访问我的活动`UpperBar.EventbtCliced`，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:03:27.103

您需要访问 PageStatus 中的 UpperBar 类的实例，而不是 UpperBar 类本身！

最简单的方法在这里：

*   在 XAML 中命名 UpperBar，例如：

`<local:UpperBar x:Name="_myBar" x:FieldModifier="private"/>`

*   然后在您的 PageStatus.xaml.cs 中使用此实例：

    ```
    public partial class MainWindow : Window    {
    public MainWindow()
    {
        InitializeComponent();

        _myBar.EventbtClicked += new EventHandler(UpperBarButtonClick);
    }

    protected void UpperBarButtonClick(object sender, EventArgs e)
    {
        //do something
    } 
    ```

    }

现在，如果您在 WPF 中认真工作，您应该真正了解数据绑定和 MVVM，以这种方式捕获事件根本不是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:03:31.927

您应该使用自定义命令 (RoutedUICommand) 而不是来自用户控件的冒泡事件。

与您的方法相比，这里有一些要遵循的步骤：

1：创建类 myCustomCommand。

```
 namespace WpfApplication1

      {

         public  class myCustomCommand.
          {

               private static RoutedUICommand _luanchcommand;//mvvm

                 static myCustomCommand.()
                  {
               System.Windows.MessageBox.Show("from contructor"); // static consructor is                                                 called when static memeber is first accessed(non intanciated object)
       InputGestureCollection gesturecollection = new InputGestureCollection();
       gesturecollection.Add(new KeyGesture(Key.L,ModifierKeys.Control));//ctrl+L
       _luanchcommand =new RoutedUICommand("Launch","Launch",typeof(myCustomCommand.),gesturecollection);

   }
   public static  RoutedUICommand Launch
   {
       get
       {
           return _luanchcommand;
       }
   }

}

   } 
```

在 UserControl 的 xaml 中：

```
 <UserControl x:Class="WpfApplication1.UserControl1"

         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"

         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 

          xmlns:CustomCommands="clr-namespace:WpfApplication1"

         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">

                <UserControl.CommandBindings> 
              <CommandBinding Command="CustomCommands:myCustomCommand.Launch" Executed="CommandBinding_Executed">

    </CommandBinding>
</UserControl.CommandBindings>
<Grid >
    <TextBox  Name="mytxt"   Height="30" Width="60" Margin="50,50,50,50" ></TextBox>
    <Button Name="b" Height="30" Width="60" Margin="109,152,109,78" Command="CustomCommands:ZenabUICommand.Launch"></Button>

</Grid> 
```

现在在用户控制代码中

处理 command_executed

```
 private void CommandBinding_Executed(object sender, ExecutedRoutedEventArgs e)
    {
        mytxt.Text = "invoked on custom command";
    }
} 
```

}

# eclipse - eclipse 上带有 spring 的 aop

> ID：14728060
> 
> 赞同：1
> 
> 时间：2013-02-06T11:33:47.517
> 
> 标签：eclipse, spring, aop

我正在尝试用春天做一个小程序

```
<bean
    id="mybean" 
    class="com.spr.main.Persona"
    p:name="Peter" 
    p:age="33" 
    p:address="LA" 
    p:company="Googel" 
    p:email="Peter@google.com"
/>

<bean id="logger" class="com.spr.main.Log" />

  <aop:config>
    <aop:aspect ref="logger">
        <aop:pointcut id="testPointcut"
                      expression="execution(* com.spr.main.Person.toString(..)) and target (bean)" />
        <aop:before method="logInfo" pointcut-ref="testPointcut" arg-names="bean"/>
        <aop:after-returning method="logWarning" pointcut-ref="testPointcut" arg-names="bean"/>
    </aop:aspect>
</aop:config> 
```

bean 工作正常，但 aop 不显示日志消息，这是 Log 类：

```
public class Log 
{

public static void logInfo()
{
    Logger.getLogger(Log.class.getName()).log(Level.INFO, "Info Message...");
}

public static void logWarning()
{
    Logger.getLogger(Log.class.getName()).log(Level.WARNING, "Warning Message...");
}
} 
```

# android - 无法从原始文件夹中找到文件

> ID：14728061
> 
> 赞同：0
> 
> 时间：2013-02-06T11:34:01.027
> 
> 标签：android, resources, audio

我使用拖放在我的原始文件夹中添加了一些 mp3 文件。但是在使用 R.raw... 代码时我找不到它们。我不知道为什么。我的文件名都是字母，没有空格。这是它的打印屏幕。

![在此处输入图像描述](../Images/7d8cea0cb2b01eb09f722cb6926bd1cf.png)

您对造成这种情况的原因有任何想法吗？谢谢！

# mysql - MySQL 分区显示性能低下

> ID：14728066
> 
> 赞同：1
> 
> 时间：2013-02-06T11:34:11.167
> 
> 标签：mysql, partitioning

我试图检查实现 MySQL 数据库分区是否对我们的应用程序有益。我听说过很多关于对大量记录使用分区的好处。但令人惊讶的是，在实施分区后进行负载测试时，应用程序的响应时间减少了 3 倍。有人可以帮忙解释为什么会发生这种情况吗？

让我详细解释一下：

下面是分区“未”到位时表的 DDL。

```
CREATE TABLE `myTable` ( 
`column1` bigint(20) unsigned NOT NULL AUTO_INCREMENT, 
`column2` char(3) NOT NULL, 
`column3` char(3) NOT NULL, 
`column4` char(2) NOT NULL, 
`column5` smallint(4) unsigned NOT NULL, 
`column6` date NOT NULL, 
`column7` varchar(2) NOT NULL, 
`column8` tinyint(3) unsigned NOT NULL COMMENT 'Seat Count Ranges from 0-9.', 
`column9` varchar(2) NOT NULL, 
`column10` varchar(4) NOT NULL, 
`column11` char(2) NOT NULL, 
`column12` datetime NOT NULL, 
`column13` datetime DEFAULT NULL, 
PRIMARY KEY (`column1`), 
KEY `index1` (`column2`,`column3`,`column4`,`column5`,`column7`,`column6`), 
KEY `index2` (`column2`,`column3`,`column6`,`column4`) 
) ENGINE=InnoDB AUTO_INCREMENT=342024674 DEFAULT CHARSET=latin1; 
```

下面是基于日期字段实现“范围”分区后同一张表的 DDL。

```
CREATE TABLE `myTable` ( 
`column1` bigint(20) unsigned NOT NULL AUTO_INCREMENT, 
`column2` char(3) NOT NULL, 
`column3` char(3) NOT NULL, 
`column4` char(2) NOT NULL, 
`column5` smallint(4) unsigned NOT NULL, 
`column6` date NOT NULL, 
`column7` varchar(2) NOT NULL, 
`column8` tinyint(3) unsigned NOT NULL COMMENT 'Seat Count Ranges from 0-9.', 
`column9` varchar(2) NOT NULL, 
`column10` varchar(4) NOT NULL, 
`column11` char(2) NOT NULL, 
`column12` datetime NOT NULL, 
`column13` datetime DEFAULT NULL, 
PRIMARY KEY (`column1`,`column6`), 
KEY `index1` (`column2`,`column3`,`column4`,`column5`,`column7`,`column6`), 
KEY `index2` (`column2`,`column3`,`column6`,`column4`) 
) ENGINE=InnoDB AUTO_INCREMENT=342024674 DEFAULT CHARSET=latin1 
PARTITION BY RANGE COLUMNS(`column6`) 
(PARTITION date_jul_11 VALUES LESS THAN ('2011-08-01') ENGINE = InnoDB, 
PARTITION date_aug_11 VALUES LESS THAN ('2011-09-01') ENGINE = InnoDB, 
PARTITION date_sep_11 VALUES LESS THAN ('2011-10-01') ENGINE = InnoDB, 
PARTITION date_oct_11 VALUES LESS THAN ('2011-11-01') ENGINE = InnoDB, 
PARTITION date_nov_11 VALUES LESS THAN ('2011-12-01') ENGINE = InnoDB, 
PARTITION date_dec_11 VALUES LESS THAN ('2012-01-01') ENGINE = InnoDB, 
PARTITION date_jan_12 VALUES LESS THAN ('2012-02-01') ENGINE = InnoDB, 
PARTITION date_feb_12 VALUES LESS THAN ('2012-03-01') ENGINE = InnoDB, 
PARTITION date_mar_12 VALUES LESS THAN ('2012-04-01') ENGINE = InnoDB, 
PARTITION date_apr_12 VALUES LESS THAN ('2012-05-01') ENGINE = InnoDB, 
PARTITION date_may_12 VALUES LESS THAN ('2012-06-01') ENGINE = InnoDB, 
PARTITION date_jun_12 VALUES LESS THAN ('2012-07-01') ENGINE = InnoDB, 
PARTITION date_jul_12 VALUES LESS THAN ('2012-08-01') ENGINE = InnoDB, 
PARTITION date_aug_12 VALUES LESS THAN ('2012-09-01') ENGINE = InnoDB, 
PARTITION date_sep_12 VALUES LESS THAN ('2012-10-01') ENGINE = InnoDB, 
PARTITION date_oct_12 VALUES LESS THAN ('2012-11-01') ENGINE = InnoDB, 
PARTITION date_nov_12 VALUES LESS THAN ('2012-12-01') ENGINE = InnoDB, 
PARTITION date_dec_12 VALUES LESS THAN ('2013-01-01') ENGINE = InnoDB, 
PARTITION date_jan_13 VALUES LESS THAN ('2013-02-01') ENGINE = InnoDB, 
PARTITION date_feb_13 VALUES LESS THAN ('2013-03-01') ENGINE = InnoDB, 
PARTITION date_mar_13 VALUES LESS THAN ('2013-04-01') ENGINE = InnoDB, 
PARTITION date_apr_13 VALUES LESS THAN ('2013-05-01') ENGINE = InnoDB, 
PARTITION date_may_13 VALUES LESS THAN ('2013-06-01') ENGINE = InnoDB, 
PARTITION date_jun_13 VALUES LESS THAN ('2013-07-01') ENGINE = InnoDB, 
PARTITION date_oth VALUES LESS THAN (MAXVALUE) ENGINE = InnoDB); 
```

下面是一个示例查询，用于进行负载测试以测试性能。

```
SELECT column8, column9
FROM myTable
WHERE column2 = ? AND column3 = ? AND column4 =? AND column5 = ? AND column7 = ? AND column6 = ?
LIMIT 1 
```

`?`以上内容已替换为数据库中存在的真实值以进行测试。

请注意，“myTable”表中的记录数约为 3.42 亿，用于进行性能测试的测试数据数约为 200 万。

然而，正如我所说，实施分区后的性能下降了惊人的 3 倍。知道是什么原因造成的吗？

另外，如果对表结构或索引进行任何进一步的更改可能有助于解决此问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:19:11.523

请记住，分区的目标是加快查询速度，因为您的查询限制了可以在其中找到结果的分区数量。我认为问题出`column6 = ?`在您的测试查询中。我猜想 column6 需要一个精确的值，而不是一个范围，这会将你的结果集减少到很少的值。因此，在缩小分区的过程中，您已经基本找到了结果。并且由于索引跨多个分区进行拆分，因此缩小过程会产生成本。

您期望从 column6 上的分区中受益的那种查询是返回一系列值的查询，仅限于少数分区。例如，尝试这样的测试查询：

```
SELECT column8, column9
FROM myTable
WHERE column6 < ? AND column6 > ? AND column2 = ? AND column3 = ? AND column4 =? AND column5 = ? 
```

其中 column6 范围跨越大约 2 个分区，并且总结果计数预计会相当大。

这可能会有所帮助：[http ://dev.mysql.com/tech-resources/articles/partitioning.html](http://dev.mysql.com/tech-resources/articles/partitioning.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T13:23:28.400

看到这里，我会考虑几件事。

第一个也是最明显的问题是，当您将数据分布在不同的设备（磁盘）上时，分区的巨大好处就出现了——而发布的代码中没有证据表明这一点。

接下来，您的分区被硬编码到特定的日期范围 - 因此当 date_oth 开始填满时，您将不得不提出一个更好的计划。

> 和第 6 列 = ?

所以你只测试了来自单个分区的数据的性能？充其量这不会比一张表中的所有数据快。

正如 Nathan 指出的那样，您正在按第 6 列进行分区-但您的任何索引的前面都没有这个，因此 DBMS 必须搜索每个分区中的索引以查找数据-这可能是为什么性能太差了。（我不同意分区仅有助于范围查询）。

# google-compute-engine - gcutil 不显示图像或内核

> ID：14728074
> 
> 赞同：5
> 
> 时间：2013-02-06T11:34:32.223
> 
> 标签：google-compute-engine

谷歌计算引擎的 gcutil 工具在 list 子命令中没有显示任何图像/内核：

```
$ gcutil listimages --project <project_name>
+------+-------------+---------------+--------+
| name | description | creation-time | kernel |
+------+-------------+---------------+--------+
+------+-------------+---------------+--------+ 
```

虽然如果我们在配置实例时不指定图像，它会提供一组图像选项：

```
$ gcutil addinstance cj-test-001

1: projects/google/global/images/centos-6-2-v20120326
2: projects/google/global/images/centos-6-2-v20120503
3: projects/google/global/images/centos-6-2-v20120611
4: projects/google/global/images/centos-6-2-v20120621
...
22: projects/google/global/images/ubuntu-12-04-v20120611
23: projects/google/global/images/ubuntu-12-04-v20120621
24: projects/google/global/images/ubuntu-12-04-v20120912 
```

如何解决通过 gcutil 列出图像的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T19:20:15.140

默认情况下，该`gcutil listimages`命令会列出项目的自定义图像。

要列出 Google 提供的默认图像，请运行以下命令：

```
$ gcutil --project=google listimages 
```

此处文档中的更多详细信息：[https ://developers.google.com/compute/docs/images](https://developers.google.com/compute/docs/images)

# c# - DB2 'SQL0901 SQL 系统错误。' 尝试从包含 UNION 的视图中选择时

> ID：14728076
> 
> 赞同：3
> 
> 时间：2013-02-06T11:34:34.443
> 
> 标签：c#, .net-4.0, db2, ibm-midrange

我正在使用 AS400 DB2 数据库。在那个数据库中，我得到了 3 个视图。

所有视图都具有完全相同的列名和数据类型。视图 1 和 2 每个都包含一个 Select 语句，该语句在同一源表上具有聚合函数。只是 WHERE 条件和聚合函数有点不同。

View 3 只是 VIEW 1 和 2 上的 UNION SELECT 合并结果。

所以这是我的问题。

```
SELECT 2 AS CLIENT, COLUMN1, COLUMN2, COLUMN3, COLUMN4, VALUE 
FROM SOME_DATABASE.VIEW3
WHERE COLUMN1 = @COLUMN1 AND COLUMN2 = @COLUMN2 ORDER BY COLUMN3 
```

我可以在 VIEW 1 和 2 上从我的 c# 程序执行参数化的 SELECT 语句（如上面的那个）而没有问题，但是当我尝试在 VIEW 3 上使用参数化的 SELECT 时，我得到一个“SQL0901 SQL 系统错误”。但是，当我不使用参数时，它就可以正常工作。

谁能向我解释这种行为？

AS400 DB2 版本是 v5r2m0 该程序是在 VS 2012 的 .NET 4.0 上用 c# 编写的，使用“IBM.Data.DB2.iSeries.dll”来访问数据库

定义视图1：

```
SELECT  COLUMN1,  
        COLUMN2,  
        COLUMN3,  
        COLUMN4,  
        SUM(CAST((TRIM(SUBSTR(COLUMN5,104,1))||TRIM(SUBSTR(COLUMN5,94,3))||TRIM(SUBSTR(COLUMN5,98,3))||'.'||TRIM(SUBSTR(COLUMN5,102,2))) AS DECIMAL(10,2))) AS VALUE
FROM    SOME_DATABASE.SOME_TABLE  
WHERE   TRIM(SUBSTR(COLUMN5,105,3)) <> ''
AND     SUBSTR(COLUMN5,103,5) <> '  EUR'  
AND     COLUMN4 IN ('  $NEHHZ','$NEHHZVE','$NEHWMVE','  $NEHWW','$NEHWWVE','$NEHWWSK',' $NEHKW1',' $NEHKW2',' $NEHSK1',' $NEHSK2','  $NEHNV',' $NEHKZ1',' $NEHLZ1',' $NEHSZ1')  
GROUP BY  COLUMN1,  
        COLUMN2,  
        COLUMN3,  
        COLUMN4 
```

定义视图2：

```
SELECT  COLUMN1,  
        COLUMN2,  
        COLUMN3,  
        COLUMN4,  
        SUM(CAST(TRIM(SUBSTR(COLUMN5,109,1))||TRANSLATE(TRIM(SUBSTR(COLUMN5,99,10)),'.',',') AS DECIMAL(10,2))) AS VALUE  
FROM    SOME_DATABASE.SOME_TABLE  
WHERE   COLUMN6 != 0  
AND     COLUMN4 IN (' SUM$HKV',' SUM$KWZ',' SUM$KZ',' SUM$LZ',' SUM$SZ',' SUM$WMZ',' SUM$WWZ')  
GROUP BY COLUMN1,  
        COLUMN2,  
        COLUMN3,  
        COLUMN4 
```

定义视图3：

```
SELECT COLUMN1, COLUMN2, COLUMN3, COLUMN4, VALUE
FROM SOME_DATABASE.VIEW1
UNION
SELECT COLUMN1, COLUMN2, COLUMN3, COLUMN4, VALUE
FROM SOME_DATABASE.VIEW2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:36:07.180

看起来视图上的视图不支持参数化的 SELECT 语句。我刚刚将第 3 个视图替换为包含视图 1 UNION 视图 2 定义的语句，例如：

 `````
SELECT  COLUMN1,  
        COLUMN2,  
        COLUMN3,  
        COLUMN4,  
        SUM(CAST((TRIM(SUBSTR(COLUMN5,104,1))||TRIM(SUBSTR(COLUMN5,94,3))||TRIM(SUBSTR(COLUMN5,98,3))||'.'||TRIM(SUBSTR(COLUMN5,102,2))) AS DECIMAL(10,2))) AS VALUE
FROM    SOME_DATABASE.SOME_TABLE  
WHERE   TRIM(SUBSTR(COLUMN5,105,3)) <> ''
AND     SUBSTR(COLUMN5,103,5) <> '  EUR'  
AND     COLUMN4 IN ('  $NEHHZ','$NEHHZVE','$NEHWMVE','  $NEHWW','$NEHWWVE','$NEHWWSK',' $NEHKW1',' $NEHKW2',' $NEHSK1',' $NEHSK2','  $NEHNV',' $NEHKZ1',' $NEHLZ1',' $NEHSZ1')  
GROUP BY  COLUMN1,  
        COLUMN2,  
        COLUMN3,  
        COLUMN4

UNION

SELECT  COLUMN1,  
        COLUMN2,  
        COLUMN3,  
        COLUMN4,  
        SUM(CAST(TRIM(SUBSTR(COLUMN5,109,1))||TRANSLATE(TRIM(SUBSTR(COLUMN5,99,10)),'.',',') AS DECIMAL(10,2))) AS VALUE  
FROM    SOME_DATABASE.SOME_TABLE  
WHERE   COLUMN6 != 0  
AND     COLUMN4 IN (' SUM$HKV',' SUM$KWZ',' SUM$KZ',' SUM$LZ',' SUM$SZ',' SUM$WMZ',' SUM$WWZ')  
GROUP BY COLUMN1,  
        COLUMN2,  
        COLUMN3,  
        COLUMN4 
````  `现在它完美地工作了。但我仍然不明白为什么会发生这个错误。``

# wcf - 从 WindowService 中托管的 WCF 运行 UI

> ID：14728080
> 
> 赞同：0
> 
> 时间：2013-02-06T11:34:56.913
> 
> 标签：wcf, windows-services, usersession

我有一个托管 wcf 的窗口服务：

```
protected override void OnStart(string[] args)
{
    if (serviceHost != null)
    {
        serviceHost.Close();
    }
    serviceHost = new ServiceHost(typeof('myservicetype'));
        NetTcpBinding binding = new NetTcpBinding(SecurityMode.None);
        serviceHost.AddServiceEndpoint
            (typeof('myservicetype'),
            binding, ConfigurationManager.AppSettings["myconfig"]
            );
        serviceHost.Open();
        Console.ReadLine();
} 
```

wcf 监听请求，其中一个请求是在服务器上打开记事本，
这不起作用，因为服务在会话 0 上运行（没有 gui ...），
我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:51:44.963

如果与服务关联的身份获得足够的权限，则无论您使用什么（Windows 应用程序、服务等）都可以打开记事本。然后你可以使用`Process.Start("notepad.exe", yourTextFile);`

或者只是`Process.Start(yourTextFile);`记事本是处理文本文件的默认程序。

# windows - Azure 云服务无法在开发中运行

> ID：14728081
> 
> 赞同：3
> 
> 时间：2013-02-06T11:34:57.513
> 
> 标签：windows, azure, azure-web-app-service

我在 Visual Studio 2012 的 Windows 8 机器上运行了一个 Azure 云服务项目。它有一个网站和一些 ddl 项目。解决方案已签入 Team Foundation Server。

当我在 Windows 7 中运行该项目时，它会启动模拟器并且运行良好。

当我在 Windows 8 中运行项目时，模拟器启动，但网站永远不会启动。Visual Studio 2012 底部有一条消息，内容如下：程序“[4188] WaIISHost.exe: Managed (v4.0.30319)”已退出，代码为 0 (0x0)。操作被取消。

我该如何调试它并让它工作？

编辑 14/04/2014 我在使用 Visual Studio 2013 时遇到了同样的问题。

# android - 具有多个子列表的列表视图

> ID：14728082
> 
> 赞同：-1
> 
> 时间：2013-02-06T11:35:00.000
> 
> 标签：android, listview, expandablelistview

我想开发具有多个孩子的列表视图，如下图所示，我谷歌但没有任何类似的解决方案。  

```
 Job 1
     Floor 1
          Floor 2 
          Floor 3               
                    Room 1
                    Room 2
                    Room 3
 Job 2
        Floor 2
                    Room 2
 Job 3
 Job 4 
```

![在此处输入图像描述](../Images/0c2ff72120d616df77f8f2883ab702fc.png)

有人可以建议我吗？如何实现类似的东西，任何提示或链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:42:22.280

您是否看过并尝试过这个：

[http://code.google.com/p/tree-view-list-android/](http://code.google.com/p/tree-view-list-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:44:14.853

一般来说 ExpandableListView 只支持 2 级 ListView。

这是[3 级 ListView 的示例，](http://androidcodesnips.blogspot.in/2011/09/three-level-expandable-list.html)您可以添加更多级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:46:28.233

您可以通过以下链接找到可扩展列表视图的工作示例：

[http://developer.android.com/reference/android/widget/ExpandableListView.html](http://developer.android.com/reference/android/widget/ExpandableListView.html)

[http://www.coderzheaven.com/expandable-listview-android-simpleexpandablelistadapter-simple-example/](http://www.coderzheaven.com/expandable-listview-android-simpleexpandablelistadapter-simple-example/)

点击孩子，你可以这样处理。

```
getExpandableListView().setOnChildClickListener(new OnChildClickListener() 
            {               
                public boolean onChildClick(ExpandableListView parent, View v,int groupPosition, int childPosition, long id) 
                { 
               // your code...
                }
            } 
```

希望这会帮助你。

# python - 用机械化填写搜索表

> ID：14728091
> 
> 赞同：2
> 
> 时间：2013-02-06T11:35:31.210
> 
> 标签：python, forms, mechanize

我正在尝试使用[mechanize](http://wwwsearch.sourceforge.net/mechanize/)在网站上进行搜索（第一次体验这个库，我几乎不知道 html 和浏览机制）。

它可以登录网站，但我无法在下一页填写搜索表格。对于登录我使用：

```
 from mechanize import Browser
    br = Browser()
    br.open(top_url)
    br.select_form(nr=0)
    br["login"] = username
    br["password"] = password
    br.submit() 
```

然后我在表单上使用循环来查看表单字段的名称：

```
>>> for i in br.forms():
...     print i
...     break
... 
```

这给了我这个：

```
<naurp_form POST https://sd.priocom.com/fx/$sd/servlet.ru.naumen.sd.search.SearcherServlet multipart/form-data
  <TextControl(sdsearch_ServiceCallIdSearchType=)>
  <SubmitControl(dosearchsdsearch_ServiceCallIdSearchType=>) (readonly)>
  <HiddenControl(hidden_dosearchsdsearch_ServiceCallIdSearchType=) (readonly)>
  <TextControl(sdsearch_ServiceCallDescriptionSearchType=)>
  <SubmitControl(dosearchsdsearch_ServiceCallDescriptionSearchType=>) (readonly)>
  <HiddenControl(hidden_dosearchsdsearch_ServiceCallDescriptionSearchType=) (readonly)>
  <HiddenControl(searchType__exists=1) (readonly)>
  <SelectControl(searchType=[ClientTitleSearchType, *ClientTitleSearchType, CrmLiteJuridicalClientContactPersonSearchType, CrmLiteByPhoneSearchType, ServiceTitleSearchType, ContractTitleSearchType, CrmLiteNaturalClientSearchType, CrmLiteJuridicalClientSearchType, SDTaskIdSearchType, SDTaskDescriptionSearchType, SDTaskIdSearchType, ServiceCallIdSearchType, ServiceCallCommentSearchType, CoreEmployeeSearchType, CoreOUSearchType, CoreEmployeeSearchType, CoreClientSearchType, CoreContractTitleSearchType, CoreServiceSearchType, KBaseSearchType, CMDBObjectTitleSearchType, CMDBObjectInvNumberSearchType])>
  <TextControl(searchString=)>
  <SubmitControl(doSearch=>) (readonly)>
  <HiddenControl(hidden_doSearch=) (readonly)>
  <HiddenControl(searchUUID=) (readonly)>
  <CheckboxControl(searchInResult=[on])>
  <HiddenControl(searchInResult__exists=1) (readonly)>
  <HiddenControl(backURL=/fx/sd/ru.naumen.sd.published_jsp?uuid=coreboqme50d80000il15pbh3tiac13s) (readonly)>
  <SubmitControl(doClear=╨Ю╤З╨╕╤Б╤В╨╕╤В╤М ╤А╨╡╨╖╤Г╨╗╤М╤В╨░╤В╤Л) (readonly)>
  <HiddenControl(hidden_doClear=) (readonly)>
  <HiddenControl(__form_id=searchTab.searchForm) (readonly)>
  <HiddenControl(first_load=true) (readonly)>> 
```

表格总数 = 3 (0,1,2) 与网站完全匹配的内容。我对第一种形式感兴趣，`"sdsearch_ServiceCallIdSearchType"`. 在实际网站上，它看起来像一个字段和一个按钮“>>”，显然`dosearchsdsearch_ServiceCallIdSearchType`

所以我正在尝试这个：

```
br.select_form(nr = 0)
br['sdsearch_ServiceCallIdSearchType'] = '2770' 
#also tried br.form['sdsearch_ServiceCallIdSearchType'] = '2770'
response = br.submit("dosearchsdsearch_ServiceCallIdSearchType")
tt_page = br.response().read() 
```

**UPD**：也尝试了`.click()`方法

```
response = br.click(type = 'submit',name = "dosearchsdsearch_ServiceCallIdSearchType")
tt_page = br.response().read() 
```

但在`tt_page`我仍然收到第一个搜索页面（我试图填写搜索表单的页面）。

任何提示表示赞赏。

PS：我需要的网站上的搜索表单代码（我不知道它是什么意思。我可以猜测但不能确定我的猜测是否正确）：

```
<!--formbutton.jsp-->
<tr id="sdsearch_ServiceCallIdSearchType_outer" >
    <th style="width:25%;">
        TT number
    </th>
    <td  align="left"
        style="width:100%;vertical-align:middle;">
        <table border="0" cellpadding="0" cellspacing="0"><tr><td style="border:0px">
        <input type="text"
               id="sdsearch_ServiceCallIdSearchType"
               name="sdsearch_ServiceCallIdSearchType"
               size="30"
               value=""
               maxlength="254"               
               style="" 
        />
        </td><td style="border:0px">
<span id="dosearchsdsearch_ServiceCallIdSearchType_outer"
    name="dosearchsdsearch_ServiceCallIdSearchType_outer"
    ><input
        onclick="
                mark_as_pressed(window.event, this);
                "
        style="margin:1px;"    
    type="submit"
    id="dosearchsdsearch_ServiceCallIdSearchType"
    name="dosearchsdsearch_ServiceCallIdSearchType"
    value="&#062;"
/></span>
<input type="hidden" id="hidden_dosearchsdsearch_ServiceCallIdSearchType" name="hidden_dosearchsdsearch_ServiceCallIdSearchType"></td></tr></table></td>
</tr> 
```

PPS： [这篇文章很有帮助](http://stockrt.github.com/p/handling-html-forms-with-python-mechanize-and-BeautifulSoup/)，还有这个网站上的一些帖子。但是没有人给我任何提示，为什么在我的情况下它不起作用。

仍然找不到填写该表格并转到下一页的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T04:01:32.820

罗宾说的应该有效，除了我必须使用的表格

```
br['sdsearch_ServiceCallIdSearchType'] = ['2770'] 
```

否则我们几乎是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:50:38.313

```
br.select_form(nr = 0)
br['sdsearch_ServiceCallIdSearchType'] = '2770' 
br.submit() 
```

这应该适用于提交表单以进行搜索！

# mysql - 根据mysql中的下一行选择行

> ID：14728094
> 
> 赞同：0
> 
> 时间：2013-02-06T11:35:43.590
> 
> 标签：mysql, select, where

我有一张这样的桌子：

```
Type | Time
1    | 234234
2    | 234235
1    | 234238
3    | 234239
4    | 234240
1    | 234242
2    | 234245 
```

我想计算所有那些行的数量 where`type=1`和 next row's `type=2`。
例如：这里的结果是`2`。我不知道如何将`where`条款放在`next row`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:49:37.107

您应该能够实现[用户定义的变量](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)来获得总数：

```
select count(*) Total
from
(
  select type, 
    @row:=(case when @prev=1 and type=2 then 'Y' else 'N' end) as Seq,
    @prev:=type 
  from yourtable, (SELECT @row:=null, @prev:=null) r
  order by time, type
) src
where Seq = 'Y' 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/aa76c/11)

# java - 间歇性“java.sql.SQLException：org.apache.commons.dbcp.DelegatingStatement 已关闭。”

> ID：14728095
> 
> 赞同：0
> 
> 时间：2013-02-06T11:35:45.807
> 
> 标签：java, tomcat

很长一段时间以来，我一直面临着这个例外。
我的 tomcat/java Web 应用程序没有非常大的数据库事务。
我使用 MSSQL 服务器作为后端，并在 tomcat 中使用 DBCP、数据库连接池。
我有以下使用它的做法。

我的 servlet 中的数据库池。

```
//Skeleton
dopost
{
  //geting connection using JNDI
  //Creating statement object
  // calling method of execution of Business Logic 
}
finally
{
  //closing all DB resorces
}
Business Logic
{
  //do all Database transaction
}

//Original code spinet
public class Frm_mst_operation_II extends HttpServlet
{

protected void doPost(HttpServletRequest httpservletrequest, HttpServletResponse httpservletresponse) throws ServletException, IOException
{
    try
    {
        String option=httpservletrequest.getParameter("option");            
        InitialContext initialcontext = new InitialContext();
        if(initialcontext == null)
            throw new Exception("Boom - No Context");

        InitialContext initialcontext2 = new InitialContext();
        if(initialcontext2 == null)
            throw new Exception("Boom - No Context");
        Context context = (Context)initialcontext.lookup("java:/comp/env");
        Context context2 = (Context)initialcontext.lookup("java:/comp/env");
        DataSource datasource = (DataSource)context.lookup(RuntimeConf.abi_database);
        DataSource datasource_sql = (DataSource)context2.lookup(RuntimeConf.abi_sql_database);
        if(datasource != null)
        {
            if(dbcon == null)
            {
                dbcon = datasource.getConnection();
            }
            else
            {
                if(!dbcon.isClosed())
                {
                    dbcon.close();
                }
                dbcon = datasource.getConnection();
            }

            if(dbcon_sql == null)
            {
                dbcon_sql = datasource_sql.getConnection();
            }
            else
            {
                if(!dbcon_sql.isClosed())
                {
                    dbcon_sql.close();
                }
                dbcon_sql = datasource_sql.getConnection();
            }

            if(dbcon_sql != null)
            {
                dbcon.setAutoCommit(false);
                dbcon_sql.setAutoCommit(false);
                stmt_ora1 = dbcon.createStatement();
                stmt = dbcon_sql.createStatement();

                if(option.equals("Insert_cge_Data"))
                { 
                    Insert_CGE_Data(httpservletrequest);                
                }

                dbcon.close();
                dbcon_sql.close();
                dbcon=null;
                dbcon_sql=null;
            }
        }
        else
        {
            System.out.println("Data Source Not Found - Error : Exception In Frm_mst_operation_II");
        }

        httpservletresponse.sendRedirect(url);
    }
    catch(Exception exception)
    {
        System.out.println("Exception In Frm_mst_operation_II And Exception Is :: "+exception);
        exception.printStackTrace();
    }
    finally
    {
        if(rset != null) 
        { 
            try 
            {
                rset.close(); 
            }
            catch(SQLException e) 
            {
                System.out.println("Exception in Frm_mst_operation_II "+e);
            }
            rset = null;
        }
        if(stmt != null) 
        {    
            try
            {
                stmt.close(); 
            }
            catch(SQLException e) 
            {
                System.out.println("Exception in Frm_mst_operation_II "+e);
            }
            stmt = null;
        }
        if(stmt_ora1 != null) 
        {    
            try
            {
                stmt_ora1.close(); 
            }
            catch(SQLException e) 
            {
                System.out.println("Exception in Frm_mst_operation_II "+e);
            }
            stmt_ora1 = null;
        }
        if(dbcon != null) 
        { 
            try
            {
                dbcon.close(); 
            }
            catch(SQLException e)
            {
                System.out.println("Exception in Frm_mst_operation_II "+e);
            }
            dbcon = null;

        }
        if(dbcon_sql != null) 
        { 
            try
            {
                dbcon_sql.close(); 
            }
            catch(SQLException e)
            {
                System.out.println("Exception in Frm_mst_operation_II "+e);
            }
            dbcon_sql = null;

        }
    }
}//End Of doPost() Method ...

public void Insert_CGE_Data(HttpServletRequest request) throws IOException,
ServletException, SQLException {

    try 
    {

        query_th_ora = "  INSERT INTO PR_OPR_TH " + " ( "
        + " COMP_N, YR_N, TRN_N, TRN_C, "
        + " TRN_D, MCH_N, SHIFT_N, STRT_TIME, "
        + " END_TIME,  PROD_N, BODY_N, "
        + " CAR_N , FIRE_N, CREATED_UID," + " CREATED_D , " +
        // " UPDATED_UID, UPDATED_D" +
        " TRNTYP , TOT_QTY " + " , RSN_N ) " + " VALUES " + " ( "
        + " '" + comp_cd + "', '" + yr_n + "', '" + TRN_N
        + "', 'CGE" + TRN_C + "', " + " to_date('" + trn_d
        + "', 'dd/mm/yyyy') , '" + mch_nm
        + "', '" + shift + "', to_date('" + in_time
        + "', 'dd/mm/yyyy hh:mi:ss AM'), " + " to_date('"
        + out_time + "', 'dd/mm/yyyy hh:mi:ss AM'), '" + prod_n
        + "', '" + body_n + "', " + " '" + car_n + "', '"
        + fire_n + "',  '" + user_cd + "',to_date('"+ora_sysdt+"', 'dd/mm/yyyy  HH24:MI:SS'), " + " 'CGE', '" + tot_qty + "'"
        + " , '"+RSN_N+"' ) " + " ";

        //SQL MD20230302

        query_th_sql = "  INSERT INTO PROD.PR_OPR_TH " + " ( "
        + " COMP_N, YR_N, TRN_N, TRN_C, "
        + " TRN_D, MCH_N, SHIFT_N, STRT_TIME, "
        + " END_TIME,  PROD_N, BODY_N, "
        + " CAR_N , FIRE_N, CREATED_UID," + " CREATED_D , " +
        // " UPDATED_UID, UPDATED_D" +
        " TRNTYP , TOT_QTY " + " , RSN_N, FLAG) " + " VALUES " + " ( "
        + " '" + comp_cd + "', '" + yr_n + "', '" + TRN_N
        + "', 'CGE" + TRN_C + "', " + " PROD.to_date('" + trn_d
        + "', 'dd/mm/yyyy') , '" + mch_nm
        + "', '" + shift + "', PROD.to_date('" + in_time
        + "', 'dd/mm/yyyy hh:mi:ss AM'), " + " PROD.to_date('"
        + out_time + "', 'dd/mm/yyyy hh:mi:ss AM'), '" + prod_n
        + "', '" + body_n + "', " + " '" + car_n + "', '"
        + fire_n + "',  '" + user_cd + "', PROD.to_date('" + sysdt
        + "', 'dd/mm/yyyy hh:mi:ss AM'), " + " 'CGE', '" + tot_qty + "'"
        + " , '"+RSN_N_SQL+"', 'Y'  ) " ;

        //ORA
        query_td_ora = "INSERT INTO PR_OPR_TD" + " ("
        + " COMP_N, YR_N,  TRN_N, TRN_C,  "
        + " TRN_D, TRNDTL_N, SRNO_C, QTY, SMPL_RMK,  "
        + " OPR_N, OPRGRP_N, NXT_OPR,  REJTYP_N,  "
        + " REJ_QTY,  STATUS,  SRNO_N,  DECK_NO,  "
        + " CREATED_UID , CREATED_D , " +
        " TRNTYP, PREV_OPR, GOOD_QTY, PREV_STATUS,  "
        + " BODY_N, BARCODE_NO, PREVTRNDTL_N, PROD_N, " + "" +
        " glzsrno_c, good_wt, exttrn_d," +
        " glztrn_d, unit_wt, layer_n, zones_n, SOTTRN_D, ASSBLD_STS" +
        " )" + " VALUES"
        + "(" + " '" + comp_cd + "', '" + yr_n + "', '" + TRN_N
        + "', 'CGE" + TRN_C + "', " + " to_date('" + trn_d
        + "', 'dd/mm/yyyy'), '" + trndtl_n + "',  '" + srno_c + "', '" + accept_qty
        + "',  '" + barcode_no + "', " + " '" + OPR_N + "', '"
        + OPRGRP_N + "', '" + NXT_OPR + "', '" + REJTYP_N + "',  "
        + " '" + rej_qty + "', '" + status + "', '" + srno_n
        + "', '" + deck_no + "', " + " '" + user_cd
        + "',  to_date('"+ora_sysdt+"', 'dd/mm/yyyy HH24:MI:SS'), "
        + " 'CGE', '" + opr_n + "', '" + good_qty + "', '"
        + PREV_STATUS + "',  " + " '" + body_n + "', '"
        + barcode_no + "', '" + TRNDTL_N + "'" + " , '"+prod_n+"', " +
        " '" + glzsrno_c + "', '" + good_wt + "', to_date('" + exttrn_d + "' , 'dd/mm/yyyy'), " +
        " to_date('" + glztrn_d + "' , 'dd/mm/yyyy'), '" + unit_wt + "', '" + layer_n + "', " +
        " '" + zones_n + "', to_date('"+SOTTRN_D+"', 'dd/mm/yyyy'),'"+ASSBLD_STS+"' " +
        ")";
        //SQL MD20230302
        query_td_sql = "INSERT INTO PROD.PR_OPR_TD" + " ("
        + " COMP_N, YR_N,  TRN_N, TRN_C,  "
        + " TRN_D, TRNDTL_N, SRNO_C, QTY, SMPL_RMK,  "
        + " OPR_N, OPRGRP_N, NXT_OPR,  REJTYP_N,  "
        + " REJ_QTY,  STATUS,  SRNO_N,  DECK_NO,  "
        + " CREATED_UID , CREATED_D , " +
        " TRNTYP, PREV_OPR, GOOD_QTY, PREV_STATUS,  "
        + " BODY_N, BARCODE_NO, PREVTRNDTL_N, PROD_N, " + "" +
        " glzsrno_c, good_wt, exttrn_d," +
        " glztrn_d, unit_wt, layer_n, zones_n, FLAG, SOTTRN_D, ASSBLD_STS" +
        " )" + " VALUES"
        + "(" + " '" + comp_cd + "', '" + yr_n + "', '" + TRN_N
        + "', 'CGE" + TRN_C + "', " + " PROD.to_date('" + trn_d
        + "', 'dd/mm/yyyy'), '" + trndtl_n + "',  '" + srno_c + "', '" + accept_qty
        + "',  '" + barcode_no + "', " + " '" + OPR_N + "', '"
        + OPRGRP_N + "', '" + NXT_OPR + "', '" + REJTYP_N_SQL + "',  "
        + " '" + rej_qty + "', '" + status + "', '" + srno_n
        + "', '" + deck_no + "', " + " '" + user_cd
        + "', PROD.to_date('" + sysdt + "', 'dd/mm/yyyy hh:mi:ss AM'), "
        + " 'CGE', '" + opr_n + "', '" + good_qty + "', '"
        + PREV_STATUS + "',  " + " '" + body_n + "', '"
        + barcode_no + "', '" + TRNDTL_N + "'" + " , '"+prod_n+"', " +
        " '" + glzsrno_c + "', '" + good_wt + "', PROD.to_date('" + exttrn_d + "' , 'dd/mm/yyyy'), " +
        " PROD.to_date('" + glztrn_d + "' , 'dd/mm/yyyy'), '" + unit_wt + "', '" + layer_n + "', " +
        " '" + zones_n + "', 'Y', PROD.to_date('"+SOTTRN_D+"', 'dd/mm/yyyy'), '"+ASSBLD_STS+"' " 
        +")";

        //System.out.println(query_th_ora);
        stmt_ora1.executeUpdate(query_th_ora);
        //System.out.println(query_th_sql);
        stmt3.executeUpdate(query_th_sql);

        //System.out.println(query_td_ora);
        stmt_ora1.executeUpdate(query_td_ora);
        //System.out.println(query_td_sql);
        stmt3.executeUpdate(query_td_sql);

    } 
    catch (SQLException e) 
    {
        dbcon.rollback(); 
        dbcon_sql.rollback();
        e.printStackTrace();

    }
    catch (Exception e) 
    {
        dbcon.rollback(); 
        dbcon_sql.rollback();
        e.printStackTrace();
    }

} 
```

并且在业务逻辑方法之间的一些地方我总是得到那个异常。
奇怪的是，我总是在我的 servlet 中遇到这个异常，只是在 Databean 中从来没有。
我知道为什么会引发此异常，但我不明白原因。
第二件事我的tomcat服务也间歇性地挂起。
变得完全没有响应，需要重新启动才能再次运行应用程序。

所以请你们所有人回答我的查询/问题/问题并帮助我摆脱这个泥袋。值得一提的是，我的客户端机器在 WiFi 网络上运行，这对引发此问题有影响吗？

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:54:57.123

尝试使用 while its close 时会出现此异常此[问题](https://stackoverflow.com/questions/3184312/org-apache-commons-dbcp-delegatingpreparedstatement-is-closed)`PreparedStatemen`中详细介绍了此 ID

# jquery - 在下拉列表中查找所选选项的值

> ID：14728098
> 
> 赞同：0
> 
> 时间：2013-02-06T11:36:00.913
> 
> 标签：jquery

我有以下 HTML 标记：

```
<table>
    <tr>
        <th><label>Item Name</label></th>
        <th><label>Quantity</label></th>
     </tr>
    <tr>
        <td><input type="text" class="itemized-list-item" size="20"/></td>
        <td><select>
                <option class="quantity" value="1">1</option>
                <option class="quantity" value="2">2</option>
                <option class="quantity" value="3">3</option>
                <option class="quantity" value="4">4</option>
                <option class="quantity" value="5">5</option>
            </select>
        </td>
    </tr>
    <tr>
        <td><input type="text" class="itemized-list-item" size="20"/></td>
        <td><select>
                <option class="quantity" value="1">1</option>
                <option class="quantity" value="2">2</option>
                <option class="quantity" value="3">3</option>
                <option class="quantity" value="4">4</option>
                <option class="quantity" value="5">5</option>
            </select>
        </td>
    </tr>
</table> 
```

我尝试了以下方法来获取输入类型中的项目值和下拉列表中的选定数量选项：

```
var quantity;
var item;
$('.itemized-list-item').each(function() {
    item = $(this).val();
    quantity = $(this).next('.quantity:selected').attr('value');
} 
```

我得到了项目值，但没有得到选定的选项。

我已经尝试了几个小时的许多方法，但无济于事。我希望有人可以阐明我哪里出错了。

干杯，导航

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:39:57.507

如果您要遍历输入，那么获取相关选择元素的一种方法是从当前输入向上导航到最近的 tr，然后返回到选择：

```
var quantity;
var item;
$('.itemized-list-item').each(function() {
    item = $(this).val();
    quantity = $(this).closest('tr').find('select').val();
    // do something with item and quantity
}); 
```

Your use of `.next('.quantity:selected')` didn't work because the `.next()` method doesn't search through the document looking for the next matching element, it simply selects the immediate following sibling *if* there is one and it matches the selector you supplied and otherwise selects nothing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:37:42.723

试试这个：

```
var quantity;
var item;
$('.itemized-list-item').each(function() {
    item = $(this).val();
    quantity = $(this).parent().next.find('.quantity:selected').attr('value');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:40:10.533

```
var quantity,
    item;

$('.itemized-list-item').each(function() {
    item = this.value;
    quantity = $(this).parent().next().find('select').val();
}); 
```

# liferay - 添加一个全局 Jsp 以包含在 Liferay tomcat-6 中

> ID：14728100
> 
> 赞同：4
> 
> 时间：2013-02-06T11:36:07.497
> 
> 标签：liferay, tomcat6

当用户打开任何 jsp 时，我有一个动态需要包含在整个项目中的 Jsp。即当用户打开一个jsp 时，我的jsp 应该会自动包含在内。

我在Tomcat的web.xml中写了这个

```
<jsp-property-group>
        <url-pattern>/webapps/ROOT/html/*.jsp</url-pattern>
        <url-pattern>*.jspf</url-pattern>
        <el-ignored>false</el-ignored>
        <scripting-invalid>false</scripting-invalid>
        <is-xml>false</is-xml>
        <include-prelude>/WEB-INF/jsp/tracker.jsp</include-prelude>
        <!-- <include-coda>/template/coda.jspf</include-coda> -->
</jsp-property-group> 
```

我将我的 jsp 保存在 WEB-INF/jsp/ 下的 tomcat 中，我想将它包含到每个 porject 中，因为它包含一个跟踪用户日志的代码。

或任何其他方式来实现这一点。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T08:08:33.643

还有另一种方法可以为整个门户和停靠栏包含您的 JSP。

您可以创建一个钩子并将您的 jsp 包含在`/html/portlet/dockbar/view.jsp`using `<jsp:include />`or or `<liferay-util:include />`or simple中`<%@ include file="" />`（这将是静态的）。

```
<jsp:include page="/jsp/yourJSPPageToBeIncluded.jsp" /> 
```

或者

```
<liferay-util:include page="/jsp/yourJSPPageToBeIncluded.jsp" /> 
```

或者

```
<%@ include file="/jsp/yourJSPPageToBeIncluded.jsp" /> 
```

注意：路径可能会有所不同，具体取决于您将放置 JSP 的位置。

为什么我选择停靠栏​​是因为它出现在 liferay 的所有门户页面上。如果您要打开诸如配置弹出窗口或外观弹出窗口或其他自定义对话框弹出窗口之类的弹出窗口，这将不起作用，因为弹出窗口中不存在停靠栏。要在弹出窗口中使用，您必须`portal_pop_up.vm`在自定义主题中覆盖并按照@VikasV 的建议编写代码

```
$theme.include($themeServletContext, "/jsp/yourJSPPageToBeIncluded.jsp") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:05:59.953

有两种方法。

简单的方法是将您的 JSP 包含在主题中。当你的 Theme 被应用到你的项目中，并且当 Theme 被渲染时，你项目中的任何页面都会渲染这个包含的 JSP。

下面的代码示例。这必须放在 vm 文件（navigation.vm）中。

`$theme.include($themeServletContext, "/jsp/yourJSPPageToBeIncluded.jsp")`

这里，JSP 文件夹直接放在 Theme war 里面。

另一种方式（乏味的一种）是将此 JSP 包含在您希望包含它的每个 JSP 页面中。

`<jsp:include>`为此使用元素。

一些参考资料，

[参考](http://profesores.elo.utfsm.cl/~agv/elo330/2s03/projects/Tomcat/doc/1.2/syntaxref1214.html) [1 参考 2](https://stackoverflow.com/questions/9110148/include-another-jsp-file)

# xpath - 带有 MSXML 的 XPath，XPath 表达式的“范围”

> ID：14728102
> 
> 赞同：1
> 
> 时间：2013-02-06T11:36:10.037
> 
> 标签：xpath, msxml, paradox

我在使用带有 XPath 表达式的 Microsoft XML Core Services 6.0 (MSXML) 时遇到了理解问题。我已将问题分解为最简单的情况。因此，让我们采用以下 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <element name="E1A1">
        <subEle value="1a"/>
        <subEle value="1b"/>
        <subEle value="1c"/>
    </element>

    <element name="E2A1">
        <subEle value="2a"/>
        <subEle value="2b"/>
        <subEle value="3b"/>
    </element>

    <element name="E3A1">
        <subEle value="3a"/>
        <subEle value="3b"/>
        <subEle value="3c"/>
    </element>
</root> 
```

我想获得`value`每个“元素”的“”属性。我将使用伪代码来描述我的问题，我将专注于重要的事情，所以我不会写我如何初始化 Msxml2.DOMDocument 变量等。。首先，我得到所有`element`具有-属性的“”-节点`name`：

```
oNodeList = oDom.selectNodes("//element[@name]") 
```

selectNodes 语句的结果是一个节点列表，我在 for 循环中逐个节点访问项目。在这个循环中，我执行另一个 selectNodes 语句，这给了我（至少我是这么认为的）`subEle`每个“”的“ `element`”：

```
for i from 1 to oNodeList.length
    oNodeMain = oNodeList.nextNode()    
    oNodeResList = oNodeMain.selectNodes("//subEle")
    msgInfo("n items", oNodeResList.length)
endFor 
```

问题来了：循环中的 selectNodes 语句似乎在范围内具有*所有*“subEle”；消息框弹出 3 次，告诉我节点列表的长度是 9。我原以为它会弹出 3 次，每次都告诉我节点列表的长度为 3（因为每个“ `element`”正好有 3 个“ `subEle`” s），因为我在“”上执行 selectNodes 语句`oNodeMain`，它在每个循环中获取下一个节点。也许我只需要在循环中修改 XPath 表达式并且不要使用“ `//`”，因为它可以工作，但我不知道为什么。

我为此使用的程序是 Paradox 11，我使用 OLE 的 MSXML。这种行为“正常”吗，我的误解在哪里？欢迎任何有关如何实现我正在尝试的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:51:11.530

不要使用以 开头的绝对路径`/`，而是使用相对路径，即`oNodeMain.selectNodes("subEle")`选择 的所有`subEle`子元素`oNodeMain`并`oNodeMain.selectNodes(".//subEle")`选择 的所有后代`subEle`元素`oNodeMain`。

您的路径`//`从根节点（也称为文档节点）开始搜索。

# c++-cli - __ptr32 到 pin_ptr 在 x64 配置上给出编译错误

> ID：14728104
> 
> 赞同：0
> 
> 时间：2013-02-06T11:36:14.430
> 
> 标签：c++-cli, 32bit-64bit

我在 C++/CLI 中包装了一个 dll(c++) 的方法。我正在使用带有 Vc++ 2010 的 x86 windows-xp 机器。

我的 c++/CLI 项目中有 x86 和 x64 配置。

我只在 x64 中收到编译错误。这是代码片段

```
struct A
{
    int data;
    A *__ptr32 next;
}

pin_ptr<A *>pinned = &obj->next; // A obj 
```

以上行仅在 x86 配置中编译。在 x64 中，我收到编译错误：`can't convert A * to pin_ptr <Type>`

编译器选项：/clr

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:41:53.587

__pt32 将指针限制为仅适用于 x86 的 32 位指针。

x64 适用于 64 位指针...

只需删除大小约束并像常规指针一样使用它：

```
 struct A
  {
   int data;
   A* next;
  } 
```

# jquery - 在 IE8 中使用 jquery 定位动画

> ID：14728109
> 
> 赞同：1
> 
> 时间：2013-02-06T11:36:46.667
> 
> 标签：jquery, jquery-animate

我在这里发现了几十个类似的问题，但我读到的问题都没有明确回答我的问题：如何在 IE8 中使用 jQuery 为位置设置动画？

适用于所有其他浏览器的相同代码在 IE8 中不起作用。

这是我的情况：我有一个页脚，其中包含一个分为 2 部分的导航 - 每个 100% 屏幕宽度宽。为了显示菜单的第二部分，我使用了动画。

这是我的页脚代码：

```
<div id="footer-wrapper">   

            <footer id="footer">                        
                <div id="menu-wrapper-primary">             
                    <nav class="menu-main-menu-container">
                        <ul id="menu-main-menu" class="menu">
                            <li id="menu-item-37" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-37">
                            ... 
                            </li>
                        </ul>
                    </nav>              
                    <div id="menu-next">
                        <span class="menu-next-text">more this way</span>
                        <img src="design/img/menu_more.png" alt="menu_next">                        
                    </div>

                </div>
                <!-- /menu-wrapper-primary -->

                <div id="menu-wrapper-secondary">   

                    <nav class="menu-secondary-menu-container">
                        <ul id="menu-secondary-menu" class="menu">                      
                            <li id="menu-item-483" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-483">
                            ...
                            </li>

                        </ul>
                    </nav>  

                    <div id="menu-prev">
                        <img src="/design/img/menu_back.png" alt="menu_previous">
                        <span class="menu-back-text">back to main menu</span>   
                    </div>

                </div>
                <!-- /menu-wrapper-secondary -->

            </footer>

    </div> 
```

这是相关的CSS：

```
#footer-wrapper {
    width: 200%;
    background: black;
    height: 50px;
    position: relative;
}

#footer {
    border-top: 1px solid #333;
    border-bottom: 1px solid #333;
    position: relative;
    height: 45px !important;
    top: 1px;
}

#menu-wrapper-primary, #menu-wrapper-secondary {
    display: inline-block;
    width: 49%;
    position: relative;
} 
```

这是JS：

```
$( '#menu-next' ).click( function(){
        $( '#footer' ).animate( { left: '-49%' }, 'slow' )
    } );    
    $( '#menu-prev' ).click( function(){
        $( '#footer' ).animate( { left: '0' }, 'slow' )
    } ); 
```

# listview - 在 jquery mobile 中，如何制作一个由几个按钮控制的列表过滤器，而不是输入文本？

> ID：14728110
> 
> 赞同：0
> 
> 时间：2013-02-06T11:36:47.277
> 
> 标签：listview, jquery-mobile, filter

假设我想制作一个讨论 4 个不同主题的会议应用程序。所以我有一个清单，列出了一周内发生的所有事件。但作为用户，我只想查看有关生物技术的内容。但不时能看到所有的事件也很好。

所以我只想要一个带有按钮的页面，可以控制我在列表中看到的内容，而无需使用嵌套列表。所以我仍然可以在同一天看到所有事件混合在一起。

谢谢您的帮助

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:04:58.567

您可以让按钮在单击时为搜索过滤器设置特定值。您只需要在过滤器上触发“keyup”事件，列表就会更新。如果过滤器的输入字段被隐藏，这甚至可以工作，尽管您仍然需要列表视图来`data-filter="true"`设置属性。

[这是一个要演示的小提琴](http://jsfiddle.net/5RfJm/3/)，它使用与 jQM 文档中的[“搜索过滤器隐藏数据”](http://jquerymobile.com/test/docs/lists/lists-search-filtertext.html)示例相同的列表。

# java - 在 JAVA 中读取文件、操作其数据和写入另一个文件的优化解决方案

> ID：14728113
> 
> 赞同：0
> 
> 时间：2013-02-06T11:37:09.477
> 
> 标签：java, memory, io

我有一个包含大约 10 万行的文件“文件 1”。

我必须逐行读取此文件，并在每一行添加一些文本并将其写入另一个文件“文件 2”。

我不想对每一行的“文件 2”执行写操作，因为它很昂贵。

将“文件 1”的每个修改行保存在内存中的更好选择是什么？

ArrayList 或 StringBuilder 或其他什么？

最后我会将内存中的完整数据写入“文件2”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:44:52.213

使用适当大小的缓冲区可能没有您想象的那么昂贵。当您的问题看起来更像是流处理时，将所有内容保留在内存中听起来是个坏主意。

从 a 读取文件 1 `BufferedReader`，更改某些内容并将结果传递给 a`BufferedWriter`可能是您最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:47:21.727

只需使用 BufferedOutputStream 来减少物理写入次数：

```
BufferedReader reader = new BufferedReader(
    new InputStreamReader (new FileInputStream ("input.txt")));
Writer writer = 
    new OutputStreamWriter(
        new BufferedOutputStream (new FileOutputStream ("output.txt")));

String line;
while ((line = reader.readLine ()) != null)
{
    writer.write (line + " foo \n");
}

reader.close ();
writer.close (); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:53:53.360

好吧，我认为逐行阅读不会对性能产生巨大影响，如果您使用的是 java 5 及更高版本，则可以使用 java.nio 来使用本机操作系统进程

检查此链接以获取更多信息

[http://docs.oracle.com/javase/tutorial/essential/io/file.html](http://docs.oracle.com/javase/tutorial/essential/io/file.html)

# c# - WPF 验证未按预期工作

> ID：14728115
> 
> 赞同：0
> 
> 时间：2013-02-06T11:37:14.383
> 
> 标签：c#, wpf, validation, textbox, wpf-controls

我有一个`TextBox`要验证的 WPF。我`Binding`用来验证它：

```
<TextBox Text="{Binding Path=Name, UpdateSourceTrigger=Explicit}" TabIndex="0" LostFocus="TextBox_OnLostFocus">
</TextBox> 
```

事件`LostFocus`：

```
private void TextBox_OnLostFocus(object sender, RoutedEventArgs e)
{
    ((Control) sender).GetBindingExpression(TextBox.TextProperty);
} 
```

验证背后的代码：

```
public string Name
{
    get { return _name; }
    set
    {
        _name = value;
        this.OnPropertyChanged(new PropertyChangedEventArgs("Name"));

    }
}

public string Error { get { return this[null]; } }

public string this[string columnName]
{
    get
    {
        string result = string.Empty;
        columnName = columnName ?? string.Empty;
        if (columnName == string.Empty || columnName == "Name")
        {
            if (string.IsNullOrEmpty(this.Name))
            {
                result += Properties.Resources.ValidationName + Environment.NewLine;
            }
        }
        return result.TrimEnd();
    }
} 
```

我有一些疑问：

**1.**当我第一次加载我的窗口时，我的控件被一个红色方块包围（验证方块），但我希望它仅在我触发它时出现（在`Explicit`侧面）。

**2.**我如何知道我的所有字段是否都已验证？我的意思是，当我按下按钮时，我**只需要知道**如何知道所有控件**是否都已验证**。

**注意：**我在构造函数上有这个上下文：

```
User u = new User();
DataContext = u; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:03:50.677

1.  您的第一个问题可能会[在这里](https://stackoverflow.com/questions/1516588/binding-updatesourcetrigger-explicit-updates-source-at-program-startup)得到解答您是否尝试将绑定模式设置为默认？
2.  [Validation.HasError](http://msdn.microsoft.com/en-us/library/system.windows.controls.validation.haserror.aspx)附加属性将告诉您特定 UI 元素上的任何绑定是否有任何绑定验证错误。在您需要验证的每个控件上使用它。先试试那个。如果您使用像 MVVM 这样的模式，您可以在 VM 上创建属性以绑定到 Validation.HasError 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:37:53.597

实际上，我的问题与我用来验证的课程有关。班级这样做：

```
public ErrorProvider()
{
    this.DataContextChanged += new DependencyPropertyChangedEventHandler(ErrorProvider_DataContextChanged);
    this.Loaded += new RoutedEventHandler(ErrorProvider_Loaded);
} 
```

因此，每当它第一次加载时，它都会订阅该`Load`事件，然后启动它：

```
private void ErrorProvider_Loaded(object sender, RoutedEventArgs e)
{
    Validate();
} 
```

所以我评论了它，并`Validate()`在需要时启动了该方法....

# c++ - eclipse CDT：将库路径从调试复制到发布模式

> ID：14728124
> 
> 赞同：3
> 
> 时间：2013-02-06T11:37:40.077
> 
> 标签：c++, eclipse, configuration, build, eclipse-cdt

我一直在开发 C++ 应用程序并在调试模式下运行，现在我已将活动构建设置为发布模式，并意识到我必须重新添加所有包含路径和库（其中有很多！）有什么方法可以自动执行此操作/批量复制粘贴？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:51:59.337

您还可以在设置路径的菜单中选择“所有配置”。设置项目的典型工作流程是首先设置“所有配置”，做你的事情，然后有选择地放入调试/发布特定的东西（如 NDEBUG 符号或优化器标志）。无需复制。请注意，大多数优秀的 IDE 都具有此功能（包括 Visual Studio）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:45:31.760

刚刚想通了（有点）。您可以突出显示所有库并复制它们，然后只需单击发布对话框中的框并点击粘贴。

# http - 如何在 C 中通过 HTTP 协议发送图像？

> ID：14728125
> 
> 赞同：6
> 
> 时间：2013-02-06T11:37:40.507
> 
> 标签：http, networking, web, network-programming

我是一名正在做 Web 服务器练习的学生，我需要一些帮助。

我的网络服务器在文本页面上运行良好，但每当浏览器发送`---GET /img.jpg HTTP/1.1`请求时，我不知道如何处理它。我听说 HTTP 协议是基于文本的，那么如何在我的 HTTP 响应中发送图像？

这是我创建正常 HTTP 响应的部分，我计划用它`readresult == 2`来表示图像。

```
if(readresult == 1){
    sprintf(toreturn, "%s\r\n%s\r\n%s\r\n\r\n%s", "HTTP/1.1 200 OK", "Content-Type: text/html", "Connection: close", readpagestring);
    returnflag = 1;
}
else if(readresult == 2){
    returnflag = 2;
}
else{
    sprintf(toreturn, "%s\r\n%s\r\n%s\r\n\r\n%s", "HTTP/1.1 404 Not Found", "Content-Type: text/html", "Connection: close", readpagestring);
    returnflag = 0;
} 
```

以及它调用的函数

```
int readpage(char *readaddress, char *pagereturn){
    FILE *inputfile = (FILE *)calloc(1,sizeof(FILE));
    int flag;
    int c;
    int n = 0;
    readaddress++;
    inputfile=fopen(readaddress,"r");
    if (inputfile==NULL){
        FILE *missingfile;
        missingfile=fopen("404.html","r");
        while ((c = fgetc (missingfile)) != EOF){
            *(pagereturn+n) = c;
            n++;
        }
        flag = 0;
        fclose (missingfile);
    }
    else{
        while ((c = fgetc (inputfile)) != EOF){
            *(pagereturn+n) = c;
            n++;
        }
        flag = 1;
        fclose (inputfile);
    }
    return flag;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T11:47:00.450

你必须`HTTP response`像这样返回：（非常少，你可以添加所有你需要的标题）

```
HTTP/1.1 200 OK\r\n
Content-Type: image/gif\r\n
Content-Length: [length in bytes of the image]\r\n
\r\n
[binary data of your image] 
```

显然，您还必须根据图像的类型设置内容类型。

您可以使用 a 构建标头`sprintf`，然后`memcpy`在最后一个之后的图像的二进制数据`\r\n`

确保`toreturn`缓冲区足够大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:45:20.813

图像数据被发送到客户端。它不会转换为文本或任何东西。如果您使用正确的内容类型，您的示例可能已经适用于图像。

# css - Adobe cq - 背景图片 / CSS

> ID：14728129
> 
> 赞同：0
> 
> 时间：2013-02-06T11:37:57.207
> 
> 标签：css, aem

例如，当我们通常通过类将背景图像添加到样式表中时，是否可以在 cq 中由作者指定图像，而 cq 本身可以修改 CSS 以添加类和背景图像规范。我猜另一种方法是让 sling 资源添加一个内联样式表。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:13:07.223

我在使用内联样式表修改 CRX(DE) 中的组件时做了类似的事情，以便他们的对话窗口有额外的字段供用户输入。我在图像组件中添加了一个字段，用于在单击时从 DAM 中选择目标图像作为目标。

您可以按照以下方式做一些事情：

组件属性

```
/yoursite/components/content/-yourcomponent-/dialog/items/bgImage (your component tree may vary slightly)

fieldLabel : String = Image to Link to
jcr:primaryType : Name = cq:Widget
name : String = ./bgImage
xtype : String = pathfield 
```

将以下内容添加到 /yoursite/components/content/-yourcomponent-/yourcomponent.jsp

```
<%
String bgImage = properties.get("bgImage", "");
String cssStyle = "";
if (bgImage != null) {
  cssStyle = "background:url(" + bgImage + ") no-repeat;";
}
%>

<div style="<%= cssStyle %>">
  // Other output here
</div> 
```

这是一个非常粗略的草稿，但您应该明白这一点。

**更新：**如果您希望在外部添加 CSS 类，并在代码中引用它们。但是，您仍然必须将用户选择的图像附加为内联或内部。

*   在 CRX(DE) 中，在您的开发/作者实例中展开 /etc/designs/-yoursite-/styles.css/files
*   相应地添加新的 CSS 文件，或将代码附加到现有文件
*   系统会将所有 CSS 文件合并为一个巨大的 styles.css 文件
*   styles.css 由系统缓存，因此可能不会根据应用程序设置立即发生更改。

`<div class="imageDiv" style="<%= cssStyle %>"> </div>`

# php - 如何读取传入电子邮件的 IP 地址

> ID：14728131
> 
> 赞同：1
> 
> 时间：2013-02-06T11:38:09.193
> 
> 标签：php, cakephp, imap

我为我的班级设置了一个连续的项目，可以在线上供学生和家长互动。所以我要求学生每天通过电子邮件发送他们的项目进度。我使用 imap 获取信息并在线显示。

我了解电子邮件地址可能会被欺骗。我怎样才能知道邮件是否真的来自 yahoo、gmail 或 hotmail。我可以使用哪个 imap 功能。我试过这个

> imap_headerinfo($inbox, $emails[$x])

但它没有给我它通过的服务器的 IP 地址。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T12:02:30.667

```
$mailinfo = imap_headerinfo($inbox, $emails[$x]);
print_r($mailinfo->from); 
```

应该给你： `personal, adl, mailbox, and host`

以下任何内容都可以帮助您**$mailinfo->...**：（
*有关完整参考，请查看[http://php.net/manual/en/function.imap-headerinfo.php](http://php.net/manual/en/function.imap-headerinfo.php)）*

`->to - an array of objects from the To: line, with the following properties: personal, adl, mailbox, and host`

`->from - an array of objects from the From: line, with the following properties: personal, adl, mailbox, and host`

`->ccaddress - full cc: line, up to 1024 characters`

`->cc - an array of objects from the Cc: line, with the following properties: personal, adl, mailbox, and host`

`->bccaddress - full bcc: line, up to 1024 characters`

`->bcc - an array of objects from the Bcc: line, with the following properties: personal, adl, mailbox, and host`

`->reply_toaddress - full Reply-To: line, up to 1024 characters`

`->reply_to - an array of objects from the Reply-To: line, with the following properties: personal, adl, mailbox, and host`

`->senderaddress - full sender: line, up to 1024 characters`

`->sender - an array of objects from the Sender: line, with the following properties: personal, adl, mailbox, and host`

`->return_pathaddress - full Return-Path: line, up to 1024 characters`

`->return_path - an array of objects from the Return-Path: line, with the following properties: personal, adl, mailbox, and host`

**为什么主机名很重要：** ![在此处输入图像描述](../Images/0e9a65489762be904b7305b5429db8e2.png)

*（抱歉，坐在火车上，图像不稳定）*

# java - 多线程程序每次都有不同的输出

> ID：14728135
> 
> 赞同：-3
> 
> 时间：2013-02-06T11:38:22.097
> 
> 标签：java, multithreading

当我尝试多次执行以下多线程代码时，输​​出与前一个不同。是因为 JVM 行为还是可能是其他原因。请帮我一个。

```
program:

package example.thread.com;

class MyThread1 implements Runnable {
    Thread t;

    MyThread1(String s) {
        t = new Thread(this, s);
        t.start();
    }

    public void run() {
        for (int i = 0; i < 5; i++) {
            System.out.println("Thread Name  :"
                    + Thread.currentThread().getName());
            try {
                Thread.sleep(2000);
            } catch (Exception e) {
            }
        }
    }
}

public class RunnableThread1 {
    public static void main(String args[]) {
        System.out.println("Thread Name :" + Thread.currentThread().getName());
        MyThread1 m1 = new MyThread1("My Thread 1");
        MyThread1 m2 = new MyThread1("My Thread 2");
    }
} 
```

输出：如果我第一次运行

```
Thread Name :main
Thread Name  :My Thread 1
Thread Name  :My Thread 2
Thread Name  :My Thread 1
Thread Name  :My Thread 2
Thread Name  :My Thread 2
Thread Name  :My Thread 1
Thread Name  :My Thread 1
Thread Name  :My Thread 2
Thread Name  :My Thread 1
Thread Name  :My Thread 2 
```

输出：如果我第二次运行

```
Thread Name :main
Thread Name  :My Thread 2
Thread Name  :My Thread 1
Thread Name  :My Thread 2
Thread Name  :My Thread 1
Thread Name  :My Thread 2
Thread Name  :My Thread 1
Thread Name  :My Thread 1
Thread Name  :My Thread 2
Thread Name  :My Thread 1
Thread Name  :My Thread 2 
```

输出：如果我第三次运行

```
Thread Name :main
Thread Name  :My Thread 1
Thread Name  :My Thread 2
Thread Name  :My Thread 2
Thread Name  :My Thread 1
Thread Name  :My Thread 1
Thread Name  :My Thread 2
Thread Name  :My Thread 2
Thread Name  :My Thread 1
Thread Name  :My Thread 2
Thread Name  :My Thread 1 
```

像这样请建议.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:42:22.837

这正是示例的重点。它表明线程是随心所欲地安排的，并且不能保证输出按顺序发生。

在其他编程语言和系统中，期望输出错误并非不合理，例如：

```
Thread Name :main
Thread Name  :My Thread 1
Thread NThread Name  :My Thread 2ame  :My Thread 2
Thread Name  :My Thread 1
Thread Name  :My Thread 2
Thread Name  :My Thread 1
ThreaThread Name  :My d Name  :My ThrThread 2ead 1
Thread Name  :My Thread 2
Thread Name  :My Thread 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:41:20.763

您有两个并行运行的线程并多次打印它们的名称。根据许多因素，线程 1 可能首先启动，也可能是线程 2。这或多或少是随机的。

然后睡眠没有非常精确的分辨率，因此一个线程可能会休眠 2001 毫秒，而另一个线程可能会休眠 1999 毫秒——这又是相当随机的。

注意：您不应该从构造函数启动线程，最好执行以下操作：

```
MyThread1 m1 = new MyThread1("My Thread 1");
new Thrad(m1).start(); 
```

并从 MyThread1 中删除对线程的所有引用 - 您可以顺便重命名 MyRunnable1 以保持一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:43:58.497

我认为您应该阅读 JAVA 的多线程和并发概念。首先阅读概念然后动手使用代码始终是一个好习惯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T12:01:52.950

> 那是因为 JVM 行为...

是的。Java 线程（以及其他语言中的线程）的许多方面都是[不确定的](http://en.wiktionary.org/wiki/nondeterminism)。也就是说，它们无法预测，并且根据您无法控制的因素在一次运行中有所不同。

因此，当您编写多线程应用程序时，您需要确保它的正确性不依赖于这些非确定性点之一。

在这种情况下，非确定性源于许多来源。例如：

*   当您调用`thread.start()`时，未指定在调用返回之前是否`thread`实际开始执行指令。

*   当您调用`thread.sleep(2000)`时，线程休眠的实际时间长度*至少*为 2000 毫秒。

*   当有许多活动线程*可以*运行时，您无法预测哪些（甚至有多少）*将*运行。它取决于操作系统级别的线程调度程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T12:04:23.993

您在 MyThread1 中的 run() 方法同时在 2 个不同的线程中运行。每个线程计数为 5，每次计数打印其名称。写入输出的操作是原子的，这意味着一次只有一个线程可以进行写入。因此，当线程准备好写入但另一个线程首先到达那里时，它必须等到另一个线程完成写入才能开始写入。没有办法知道哪个线程会先到达那里，所以每次都不同。

想象一下，有 2 个人被要求在一张纸上写下他们的名字 5 次。只有一张纸，他们必须分享。为了写下他们的名字，他们首先得到了那张纸。如果其他人有它，他们会等待。当他们写完他们的名字后，他们放开了那张纸。当两个人都准备好再次写下他们的名字并且没有人有纸时，谁先得到它是随机的机会。

所以每次结果都不一样...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T12:26:16.600

您看到的效果只是 JVM 行为的部分结果。JVM 只是创建线程并启动它们。操作系统负责决定哪个线程何时在哪个处理器上运行。您的线程不仅会相互竞争处理器的使用，还会与您的计算机正在执行的所有工作竞争。

当一个线程休眠时，它不再是一个可以使用处理器的可运行线程。当它到达睡眠时间结束时，它又回到可运行状态，并争夺处理器的使用。在那之后的某个时间，操作系统会选择它作为线程在处理器上运行，它会继续计算。它保持处理器直到它终止、休眠、必须等待其他东西，或者操作系统决定轮到另一个线程了。

没有理由期望两个线程之间的顺序从运行到运行是相同的。编写能够提供一致结果的多线程程序需要一些努力。

我建议从一些关于多线程编程的基本教程开始。当您准备好更深入地了解该主题时，我推荐[Java Concurrency in Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)

# authentication - 大型应用程序中登录系统的工作

> ID：14728139
> 
> 赞同：1
> 
> 时间：2013-02-06T11:38:47.977
> 
> 标签：authentication

我很高兴知道登录系统如何在 Facebook、Gmail、youtube、雅虎等大型应用程序中工作。输入凭据后，服务器响应速度更快。这怎么可能？

必须有更多的数据库服务器来存储用户信息。所以我的问题是

1.  他们如何通过更多数据库服务器查找身份验证信息？
2.  他们是否查看所有数据库服务器以检查特定用户，如果是，它如何更快地响应？
3.  他们是否根据用户的地理位置分配数据库服务器？
4.  他们是否还有更多的应用程序服务器以及它们如何相互连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:45:42.090

1.  RDBMS 具有链接在异构数据源上发出分布式查询、更新、命令和事务的服务器的功能。

2.  数据库系统将使用某种形式的关于用户的缓存信息，在 SQL Server 中存储执行计划并在执行查询时使用。数据库管理系统将决定采用哪个执行计划以生成最快的结果或使用缓存的数据集。注意：谷歌、Facebook、亚马逊等将在后台使用大量服务器处理能力，这将使其看起来是即时的。他们还将有专门的团队来管理他们的数据库、执行索引、调整、优化和识别瓶颈。

3.  服务器的地理位置可能是一个因素。服务器离用户越近，他们获取信息的速度就越快，但 IMO 这将是纳秒/毫秒差异的问题，具体取决于他们的数据中心所在的位置。如果服务器太忙，那么负载平衡会将您/其他用户迁移到具有更多可用资源的服务器。

4.  是的。在这样的场景中需要使用多个 Web 服务器，并且与问题的第 3 部分相关，您访问的服务器取决于最近的服务器拥有多少可用资源以及它是否会接受您的连接。它们是分布式的，但整个过程对用户来说似乎是透明的，即他们认为他们使用与其他所有客户端相同的服务器。它们可以通过使用会话管理、Web 服务和其他互操作性技术和技术相互连接。

# ios - iOS - 使用非 iTunes Store 付款的应用内付款

> ID：14728146
> 
> 赞同：4
> 
> 时间：2013-02-06T11:39:09.093
> 
> 标签：ios, in-app-purchase, payment, braintree

我想知道使用外部支付系统（如 Braintree）在 iOS 上进行应用内购买的规则是什么。我们已经运行了一个通过网络运行的流媒体音乐服务，我们希望开发适用于 Android+iOS 的应用程序。这是一项订阅服务，我们目前通过 Braintree 进行所有付款。如果可能的话，我们希望继续这样做。

我对何时允许以及何时禁止的确切细节有点模糊。

这将允许用户在应用程序中流式传输完整的曲目（否则他们得到的只是 30 秒的预览），但它也允许他们在线和在其他平台上使用订阅。那么，这是否是“Apple 法律”允许使用的第三方支付系统？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T11:54:14.743

从指南：

11.1

使用 App Store 以外的机制解锁或启用附加特性或功能的应用程序将被拒绝

11.2

使用应用内购买 API (IAP) 以外的系统购买应用中的内容、功能或服务的应用将被拒绝

[https://developer.apple.com/app-store/review/guidelines/](https://developer.apple.com/app-store/review/guidelines/)

# c# - EF：分离与急切加载与noTracking

> ID：14728148
> 
> 赞同：3
> 
> 时间：2013-02-06T11:39:21.460
> 
> 标签：c#, asp.net, entity-framework

我对以下内容的含义有些困惑：

它们之间有什么区别？

1) `AsNoTracking`- 表示没有脏污检查。（与将 EntityState 更改为`Detached`?）

2) `context.Detach(order)`- (与将 EntityState 更改为`Detached`?)

3)`NoTracking`急切加载也需要？

```
 creativeWorkshopEntities.Job.MergeOption = MergeOption.NoTracking;
    var q = from c in creativeWorkshopEntities.Job.Include("Files")
            where c.Id == jobId                    
            select c; 
```

我想做的就是分离实体

我`using`的`BL class`.

从数据库中填充缓存后，我无法分离实体

因为我仍然在应用程序流中调用它的属性。我猜它会抛出运行时异常（`objectContext is desposed`）

你觉得我的逻辑对吗？

```
public static Group GetMamData(string stamp, MaMDBEntities maMDBEntities)
{
    Group group = MamDataCacheManager.GetMamData(stamp);
    if (group == null)
    {
        //was not found in the cache
        //check for aveilable test with status 'start' - 1
        group = GetGroupsFromDb(stamp, maMDBEntities);

        if (group != null)
        {
            maMDBEntities.Entry(group).State = EntityState.Detached;
            MamDataCacheManager.InsertMamData(stamp, group);
        }
    }

    //option B: attache a new context
    if (maMDBEntities.Entry(group).State == EntityState.Detached)
    {
        maMDBEntities.Groups.Attach(group);
    }
    return group;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:10:14.643

ORM (EF) 的主要功能之一是更改跟踪：跟踪更改/删除/新实体，以便生成正确的 SQL。

但是更改跟踪不是免费的，它需要相当多的一些空间。因此，当您不需要它时，请`AsNoTracking`用作优化。

> 1) AsNoTracking - 表示不进行脏污检查。（与将 EntityState 更改为 Detached 相同？）

最终结果是相同的，但在不跟踪的情况下加载它比稍后关闭它更便宜。

> 2) context.Detach(order) - （与将 EntityState 更改为 Detached 相同？）

基本上，是的。但我认为打电话`Detach()`是正确的方式。

> 3) 急切加载是否也需要 NoTracking？

不，我不这么认为。

# asp.net-web-api - UriPathExtensionMapping 控制 WebAPI 中的响应格式

> ID：14728152
> 
> 赞同：3
> 
> 时间：2013-02-06T11:39:37.307
> 
> 标签：asp.net-web-api, asp.net-web-api-routing

我在让 UriPathExtensionMapping 在 ASP.NET WebAPI 中工作时遇到问题。我的设置如下：

我的路线是：

```
 config.Routes.MapHttpRoute(
                name: "Api UriPathExtension",
                routeTemplate: "api/{controller}.{extension}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );

            config.Routes.MapHttpRoute(
               name: "Api UriPathExtension ID",
                routeTemplate: "api/{controller}/{id}.{extension}",
                defaults: new { id = RouteParameter.Optional }
            );

            config.Routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            ); 
```

我的全球 ASAX 文件是：

```
 AreaRegistration.RegisterAllAreas();

    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles); 
```

我的控制器是：

```
public IEnumerable<string> Get()
{
    return new string[] { "Box", "Rectangle" };
}

// GET /api/values/5
public string Get(int id)
{
    return "Box";
}

// POST /api/values
public void Post(string value)
{
}

// PUT /api/values/5
public void Put(int id, string value)
{
}

// DELETE /api/values/5
public void Delete(int id)
{
} 
```

使用 curl 发出请求时，JSON 是默认响应，即使我明确请求 XML，我仍然会得到 JSON：

```
curl http://localhost/eco/api/products/5.xml 
```

回报：

```
"http://www.google.com" 
```

谁能看到我的设置有问题？

以下代码在配置路由后映射 Global.asax 文件中的扩展：

```
 GlobalConfiguration.Configuration.Formatters.JsonFormatter.
        MediaTypeMappings.Add(
            new UriPathExtensionMapping(
                "json", "application/json"
        )
    );

    GlobalConfiguration.Configuration.Formatters.XmlFormatter.
        MediaTypeMappings.Add(
            new UriPathExtensionMapping(
                "xml", "application/xml"
        )
    ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T12:09:30.497

您是否需要像这样注册扩展映射：

```
config.Formatters.JsonFormatter.MediaTypeMappings.Add(new UriPathExtensionMapping("json", "application/json"));
config.Formatters.XmlFormatter.MediaTypeMappings.Add(new UriPathExtensionMapping("xml", "application/xml")); 
```

示例在[这里](https://github.com/mccalltd/AttributeRouting/issues/150)找到。

**更新**

如果您查看[`UriPathExtensionMapping`](https://github.com/mono/aspnetwebstack/blob/master/src/System.Web.Http/Routing/UriPathExtensionMapping.cs)扩展的占位符的代码是

```
/// <summary>
/// The <see cref="T:System.Uri"/> path extension key.
/// </summary>
public static readonly string UriPathExtensionKey = "ext"; 
```

因此，您的路线需要更改为（{ext} 而不是 {extension}）：

```
config.Routes.MapHttpRoute(
            name: "Api UriPathExtension",
            routeTemplate: "api/{controller}.{ext}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-02T22:09:12.853

作为这个答案的附录，因为我还不能发表评论，你还应该确保你的 web.config 包含该行

```
<modules runAllManagedModulesForAllRequests="true" /> 
```

节内`<system.webServer>`。

我的没有，这个例子对我没有用，直到我添加了那行。

# c# - chromes 最常访问的页面是否有 Winforms 实现？

> ID：14728153
> 
> 赞同：1
> 
> 时间：2013-02-06T11:39:39.843
> 
> 标签：c#, .net, winforms, controls

我实际上正在尝试制作一个控件，它的作用类似于 chromes 最常访问的页面（例如此处的屏幕截图：http: [//www.favbrowser.com/wp-content/uploads/2011/10/googlechrome15.jpg](http://www.favbrowser.com/wp-content/uploads/2011/10/googlechrome15.jpg)），它会自动居中，如果调整了窗口大小，则调整大小并移动控件（在我的程序中）/页面（在 chrome 中）。

我知道我可以采取 a`FlowLayoutPanel`或 a`TabelLayoutPanel`来实现这一点，但这将花费很多时间，尤其是调整大小和移动部分。

所以我的问题是：是否已经有一个开源/免费的控件具有这样的功能？

任何帮助将不胜感激。

# android - 动态网格布局

> ID：14728157
> 
> 赞同：12
> 
> 时间：2013-02-06T11:39:52.030
> 
> 标签：android

我在另一个班级犯了一个错误，这就是为什么它不起作用。下面的代码似乎是正确的

我正在尝试创建一个动态 GridLayout。在另一个类（不是这个类）中，我有一种方法可以设计网格布局的行和列。在下面的课程中，我向我的 GridLayout 添加了一些按钮：

```
int buttons= 6;//the number of bottons i have to put in GridLayout
int buttonsForEveryRow = 3; // buttons i can put inside every single row
int buttonsForEveryRowAlreadyAddedInTheRow =0; // count the buttons added in a single rows
int columnIndex=0; //cols index to which i add the button
int rowIndex=0; //row index to which i add the button

for(int i=0; i < buttons;i++){          
    /*if numeroBottoniPerRigaInseriti equals numeroBottoniPerRiga i have to put the other buttons in a new row*/
    if(buttonsForEveryRowAlreadyAddedInTheRow ==buttonsForEveryRow ){
        rowIndex++; //here i increase the row index
        buttonsForEveryRowAlreadyAddedInTheRow  =0;  
        columnIndex=0; 
    }   

    Spec row = GridLayout.spec(rowIndex, 1); 
    Spec colspan = GridLayout.spec(columnIndex, 1);
    GridLayout.LayoutParams gridLayoutParam = new GridLayout.LayoutParams(row, colspan);
    gridLayout.addView(button_to_add,gridLayoutParam);

    buttonsForEveryRowAlreadyAddedInTheRow ++;
    columnIndex++; 
```

在下图中，您可以看到我得到了什么：缺少按钮 3 和 6。恐怕我没有`GridLayout.spec`正确使用。

![在此处输入图像描述](../Images/caeefdf21a4cd4801743d41a4eccbef2.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-07-23T08:38:56.003

使用下面的代码，您可以使用列跨度和行跨度动态地将图像视图添加到网格布局。

```
 gridLayout = (GridLayout) findViewById(R.id.gridview);

    gridLayout.removeAllViews();

    int total = 10;
    int column = 3;
    int row = total / column;
    gridLayout.setColumnCount(column);
    gridLayout.setRowCount(row + 1);
    for (int i = 0, c = 0, r = 0; i < total; i++, c++) {
        if (c == column) {
            c = 0;
            r++;
        }
        ImageView oImageView = new ImageView(this);
        oImageView.setImageResource(R.drawable.ic_launcher);            

        oImageView.setLayoutParams(new LayoutParams(100, 100));

        Spec rowSpan = GridLayout.spec(GridLayout.UNDEFINED, 1);
        Spec colspan = GridLayout.spec(GridLayout.UNDEFINED, 1);
        if (r == 0 && c == 0) {
            Log.e("", "spec");
            colspan = GridLayout.spec(GridLayout.UNDEFINED, 2);
            rowSpan = GridLayout.spec(GridLayout.UNDEFINED, 2);
        }
        GridLayout.LayoutParams gridParam = new GridLayout.LayoutParams(
                rowSpan, colspan);
        gridLayout.addView(oImageView, gridParam);

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T11:50:28.350

使用 GridLayout 时存在限制，以下引用来自[文档](http://developer.android.com/reference/android/widget/GridLayout.html)。

> “GridLayout 不提供对权重原则的支持，如权重中定义的那样。一般而言，因此不可能配置 GridLayout 以在多行或多列之间以非平凡的比例分配多余的空间......为了完全控制行或列中的多余空间分布；使用 LinearLayout 子视图将组件保存在关联的单元格组中。”

这是一个使用 LinearLayout 子视图的小示例。（我使用了占用未使用区域并将按钮推到所需位置的空间视图。）

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" android:orientation="horizontal">
    <Space
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1" />
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 1" />
    <Space
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1" />
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="start"
        android:text="Button 2" />
    <Space
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1" />
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
>
    <Space
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1" />
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 3" />
    <Space
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1" />
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="start"
        android:text="Button 4" />
    <Space
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1" />
</LinearLayout> 
```

# xcode - 添加 messageUI.framework 后应用停止工作

> ID：14728162
> 
> 赞同：0
> 
> 时间：2013-02-06T11:40:04.037
> 
> 标签：xcode, messageui, initwithcoder

# 添加 messageUI.framework 后应用停止工作

我创建了一个可以正常工作的应用程序，我想添加一些新功能。我添加了`messageUI.framework`它并停止工作。如果我删除框架，它会再次起作用，但这不是想法。

我收到的错误是：

`-[Account initWithCoder:]: unrecognized selector sent to instance 0x1cd953a0`

我有一个`NSObject`名为 Account 的自定义，加载时出现错误：

```
myAccounts = [[NSMutableArray alloc] init];
myAccounts = [NSKeyedUnarchiver unarchiveObjectWithFile:savePath]; //Crashes in this line 
```

以前保存时：

```
[NSKeyedArchiver archiveRootObject:myAccounts toFile:savePath]; 
```

它可能是由一些重叠的变量或类似的东西引起的吗？

# 笔记：

`Account.h`就好像：

```
#define kAccName                @"name"
#define kAccID                  @"identifier"
#define kAccInitAmount          @"initAmount"
#define kAccActive              @"active"

#import <Foundation/Foundation.h>
#import "Transfer.h"

@interface Account : NSObject

@property (nonatomic, strong) NSString *name;
@property (nonatomic, strong) NSString *identifier;
@property (nonatomic) double initAmount;
@property (nonatomic) BOOL active;

- (id)initWithID:(NSString *)ident;

@end 
```

并且`Account.m`是：

```
#import "Account.h"

@implementation Account
@synthesize name;
@synthesize identifier;
@synthesize initAmount;
@synthesize active;

- (id)init {
    self = [super init];
    if (self) {
        self.active = TRUE;
    }
    return self;
}

- (id)initWithID:(NSString *)ident {
    self = [super init];
    if (self) {
        self.active = TRUE;
        self.identifier = ident;
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)decoder {
    if (self = [super init]) {
    self.name           = [decoder decodeObjectForKey:kAccName];
    self.identifier     = [decoder decodeObjectForKey:kAccID];
    self.initAmount     = [decoder decodeDoubleForKey:kAccInitAmount];
    self.active         = [decoder decodeBoolForKey:kAccActive];
}
    return self;
}

- (void)encodeWithCoder:(NSCoder *)encoder {
    [encoder encodeObject:self.name             forKey:kAccName];
    [encoder encodeObject:self.identifier       forKey:kAccID];
    [encoder encodeDouble:self.initAmount       forKey:kAccInitAmount];
    [encoder encodeBool:self.active             forKey:kAccActive];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T19:53:59.270

我刚刚遇到了这个问题，我无法告诉你确切的原因，但是将你的 Account 对象重构为任何其他名称，我使用了 Accounts，它可以工作。MessageUI.framework 在运行时与您的 Account 对象名称发生冲突。

# php - 如何将自定义跟踪数据从另一个域发送到我的服务器

> ID：14728166
> 
> 赞同：0
> 
> 时间：2013-02-06T11:40:13.783
> 
> 标签：php, javascript, jquery, ajax, http

我正在创建一个表单处理服务，该服务将允许用户复制和粘贴表单操作，该服务会将数据存储在数据库中并重定向到用户网站上的确认页面。

**我想要达到的目标：**

我想在表单上包含一些分析，例如完成每个字段所需的时间、表单视图、表单激活等。我猜这需要一些 javascript 也粘贴在用户页面上，这些页面将链接到外部脚本（在我的网站上）。但我的问题是，这在实践中如何运作？

我不能使用 ajax，因为它会在不同的域上，我也希望尽可能少的代码被用户复制和粘贴。

我的问题不是我需要在这里使用什么特定的代码，而是我应该采取什么方法？

我认为它将类似于他们提供的用于跟踪的谷歌分析片段，但我不能 100% 确定它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:56:11.177

对于跨站点请求，总是可以选择使用脚本注入，就像[JSONP](http://en.wikipedia.org/wiki/JSONP)一样。例如，您可以使用[jQuery.getJSON](http://api.jquery.com/jQuery.getJSON/)将一些数据作为 GET 参数传递到另一个站点。当然，只能做 GET 请求是一个缺点。如果您想要/需要执行发布请求，您可以将初始请求包装在 Web 服务中，该服务基本上将 GET 参数转换为 POST 参数并转发您的请求；[例如， YQL](https://stackoverflow.com/questions/5579467/can-i-post-data-to-php-page-using-yql)可以做到这一点。

# wpf - 如何在 wpf 中使用 GridViewHyperLinkColumn 的 NavigateURL 属性？

> ID：14728167
> 
> 赞同：0
> 
> 时间：2013-02-06T11:40:15.523
> 
> 标签：wpf, datagrid, hyperlink

如何在 wpf 中使用 GridViewHyperLinkColumn 的 NavigateURL 属性？

问题：在我的数据网格中，我有一个属于 GridViewHyperLinkColumn 的列，现在当我在网格中单击 GridViewHyperLinkColumn 的数据时，我必须得到一个弹出屏幕，它是另一个 xaml（比如 SetPassword.xaml）文件。那么当我单击数据网格中的 GridViewHyperLinkColumn 数据时如何获得弹出屏幕？以及我必须将 URL 分配给哪个 prpoerty，以便当我单击 GridViewHyperLinkColumn 数据时应该显示一个弹出窗口？

谢谢， 苏柴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:47:31.677

我假设你的意思是`DataGridHyperlinkColumn`因为没有内置`GridViewHyperLinkColumn`. 该列类型仅设计用于基于 uri 的导航，例如，如果您有一个 WPF 导航应用程序并希望它跳转到不同的页面，则可以使用它。由于您想要打开新窗口的完全不同的行为，您需要从代码中执行此操作，这意味着使用不同的机制。使用模板列，您可以添加可以具有 Click 事件处理程序或绑定命令（如果使用 MVVM）的超链接。这是使用 Click 的示例：

```
<DataGridTemplateColumn IsReadOnly="True">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock>
                <Hyperlink Click="Hyperlink_Click_1">
                    <TextBlock Text="{Binding Path=SomePropertyForThisColumn}"/>
                </Hyperlink>
            </TextBlock>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

# android - 无法获取“我的位置”谷歌地图 Android

> ID：14728168
> 
> 赞同：0
> 
> 时间：2013-02-06T11:40:26.257
> 
> 标签：android, google-maps

我正在尝试获取“蓝点”我的位置坐标并将其设置为我的初始地图视图加载的中心。但我得到一个空指针异常。

我在这里想念什么？

```
public class GetLocationActivity extends MapActivity implements OnClickListener {
private MapView location;
private LocationMarker locationMarker;
private MyLocationOverlay locationOverlay;
private GeoPoint destination;
private GeoPoint source;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.location);

    location = (MapView) this.findViewById(R.id.location);
    location.setBuiltInZoomControls(true);
    location.setClickable(true);
    location.setLongClickable(true);
    location.getController().setZoom(12);
    locationMarker = new LocationMarker(this, location, marker,
            (ImageView) findViewById(R.id.drag));
    location.getOverlays().add(locationMarker);
    locationOverlay = new MyLocationOverlay(this, location);
    location.getOverlays().add(locationOverlay);
    source = locationOverlay.getMyLocation();
    location.getController().setCenter(
            new GeoPoint(source.getLatitudeE6(), source.getLongitudeE6()));
} 
```

在`source.getLatitudeE6()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:08:58.690

在这里忘记我的基础知识:)。我需要使用 LocationManager 获取我的位置。

```
lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,
            (LocationListener) this); 
```

# javascript - JQuery 切换功能在应该替换处理程序时隐藏

> ID：14728171
> 
> 赞同：1
> 
> 时间：2013-02-06T11:40:34.723
> 
> 标签：javascript, jquery

我有[这个](http://jsfiddle.net/6sNgK/)。

```
$(function()
 {
    $("#test_div").toggle(
        function() { $("#test_div").css({"background-color": "#00ff00"}); },
        function() { $("#test_div").css({"background-color": "#0000ff"}); }
    );
}); 
```

根据[文档](http://api.jquery.com/toggle-even/)，每次我在 div 中单击时，切换中的功能都应该以另一种方式执行。首先第一个参数中的函数应该执行，第二次单击后第二个参数中的函数应该执行。

但是，div 只是隐藏起来。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:46:22.640

如果您使用的是 jQuery 1.9.0 或更高版本，他们删除了切换事件。尝试使用 toggleClass()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T11:52:29.133

使用[toggleClass()](http://api.jquery.com/toggleClass/)。用你想要的背景创建一个类并切换它..简单易读..:)

试试这个

**查询**

```
 $("#test_div").click(function(){
     $(this).toggleClass("newClass");
 }); 
```

**CSS**

```
 #test_div
 {
   background-color: #ff0000;
   width: 100px;
   height: 100px;
 }
 #test_div.newClass
 {
   background-color: #0000ff;
 } 
```

[在这里摆弄](http://jsfiddle.net/bipen/6sNgK/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:47:07.180

这个功能`.toggle`在 jQuery 1.9 中被移除了，这是有充分理由的。维护要在内部切换的项目的状态相当简单，可能像这样：

```
$("#test_div").on('click', function () {
    var $this = $(this);
    if ($this.css('background-color') == '#00ff00') {
        $this.css('background-color', '#0000ff');
    }
    else {
        $this.css('background-color', '#00ff00');
    }
}); 
```

如果这样做不好，您可以只使用`.data`“toggleState”之类的参数，这可能是一个更好的主意，因为您不能依赖`.css`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:48:39.320

尝试像这样使用

```
$(function()
 {
    $("#test_div").click(
function() { 
            if ($("#test_div").css("background-color") == "rgb(0, 255, 0)")
                $("#test_div").css({"background-color": "#0000ff"});
            else
                $("#test_div").css({"background-color": "#00ff00"});
            }
    );
}); 
```

[看演示](http://jsfiddle.net/Dineshkani/6sNgK/2/)

# jquery - Jquery获取动态生成的控件ID

> ID：14728172
> 
> 赞同：2
> 
> 时间：2013-02-06T11:40:46.830
> 
> 标签：jquery, dynamic, controls, auto-generate

我有一个页面，其中 ID 更改为`ctl00_MainContent_txt_insurance`. 在这种情况下，我不能将实际 ID 用作`$("#txt_insurance")`. 所以我所做的是使用`$("#<%= txt_insurance.ClientID %>")`，现在可以正常工作了。

但是现在如果我想替换上面的 ID 并显示它，我这样做了：

```
divToChangeVisible = $("#<%= txt_insurance.ClientID %>");
divToChangeVisible.replace("txt_", "val_").show(); 
```

这会给我一个对象并抛出一个错误，说不能被替换。有没有办法获得`txt_insurance`身份而无需更换`ctl00_MainContent_`？

***编辑::***如果我这样做`$("#<%= txt_insurance.ClientID %>").attr('id')`将再次返回动态ID ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:44:19.343

您可以使用 Jquery 选择器，例如“ID 以”结尾：-

```
$("[id$='txt_insurance']") 
```

上述语句获取 ID 以“txt_insurance”结尾的元素。

例如：-

```
var eleid=$("[id$='txt_insurance']").attr('id');
var rep=eleid.replace("txt_", "val_");
alert(rep);
$("[id$='txt_insurance']").attr('id',rep);
//this will replace old ID with new which is 'ctl00_MainContent_val_insurance' 
```

更新：-

```
 var ele=eleid.split("_");
alert(ele[ele.length-2]+'_'+ele[ele.length-1]);
    var originalid=ele[ele.length-2]+'_'+ele[ele.length-1];
    // originalid will give you original id of element :- 
```

所以你可以继续： -

```
$('.myform :input').each(function () 
{
    var id = this.id; 
    var orgid=id.split("_");
    var orgid1=orgid[orgid.length-2]+'_'+orgid[orgid.length-1];
    var id2 = $("[id$=" + orgid1 + "]");
 }); 
```

# jpa - JPA 2 标准为 gt 运算符提供运行时类型

> ID：14728176
> 
> 赞同：1
> 
> 时间：2013-02-06T11:41:07.677
> 
> 标签：jpa, persistence, jpa-2.0, criteria, criteria-api

我正在 JPA Criteria 之上构建一个高度通用的查询机制。我得到一个描述查询的 XML 作为输入，如下所示：

```
<?xml version='1.0' encoding='UTF-8' standalone='yes'?>
<Criteria xmlns='criteria' maxResults='2'>
    <Expression>
        <CompareRestriction propertyType='Date' operator='GREATER_THAN_OR_EQUALS' propertyName='deliveryDate'>2010-07-02</CompareRestriction>
        <CompareRestriction propertyType='Float' operator='GREATER_THAN_OR_EQUALS' propertyName='weight'>10f</CompareRestriction>
        <Restriction operator='NOT_NULL' propertyName='maxDiameter'/>
        <LogicalExpression operator='OR'>
           <LeftHandSideCompare propertyType="Integer" operator="EQUALS" propertyName="weight">31</LeftHandSideCompare>
           <RightHandSide operator='NOT_NULL' propertyName='lastChangedDate'/>
        </LogicalExpression>        
        <LogicalExpression operator='OR'>
           <LeftHandSideCompare propertyType="Integer" operator="EQUALS" propertyName="weight">31</LeftHandSideCompare>
           <RightHandSide operator='NOT_NULL' propertyName='lastChangedDate'/>
        </LogicalExpression>
     </Expression>
     <Order propertyName='deliveryDate' type='DESC'/>
</Criteria> 
```

我解析这个东西并建立相应的标准。目前，当我处理不同的数值类型时，我遇到了比较运算符（<、>、<=、=>）的问题：我有浮点、整数或长整型值的字段。因此，当我映射时，我会执行以下操作：

```
switch (leftHandSideCompareRestriction.getOperator().value()) {
...
case "LESS_THAN" : innerPredicates.add(criteriaBuilder.gt(rootQuery.<Number>get(propName), NumberUtils.createNumber((value))));
case "LESS_THAN_OR_EQUALS" : innerPredicates.add(criteriaBuilder.gt(rootQuery.<Number>get(propName), NumberUtils.createNumber(value)));
...
} 
```

NumberUtils 是[apache commons NumberUtils 实用程序类](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/math/NumberUtils.html#createNumber%28java.lang.String%29)

根据提供的输入（浮点、整数、长整数或双精度）返回数值类型。现在我需要一种机制来为

```
rootQuery<T>.get(propName) 
```

在运行时，否则 JPA 会抱怨我提供了 Float 而不是 Integer 或其他方式。我尝试了几件事，现在我有点想不通了。对于如何以稳健的方式实现这一目标，我将不胜感激并提出想法、想法和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:03:47.450

我似乎最初错过了一些东西 - 我不确定如何。在不同的部分存在某种问题。所以，像这样进行查询：它肯定会工作。我尝试了以下类型：

```
Integer
Float 
```

它对以下操作按预期工作：>、<、<=、=>。总之，使用 Number 和 NumberUtils 以非常优雅的方式解决了这个问题，因为适当的类型是由 NumberUtils 创建的，而 JPA 占据了 Number 层次结构的顶部。

# android - onCheckedChangeListener 用于可展开列表中的复选框

> ID：14728181
> 
> 赞同：0
> 
> 时间：2013-02-06T11:41:21.137
> 
> 标签：android, checkbox, expandablelistview, expandablelistadapter, oncheckedchanged

我创建了一个带有自定义组和子视图的可扩展列表视图。每个组和孩子都有一个复选框。请告诉我如何分别为组和子设置自定义 onCheckedChangedListener。如果选中复选框，我想获取父视图的标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:44:23.060

[这个例子](http://mylifewithandroid.blogspot.com.es/2010/02/expandable-lists-and-check-boxes.html)对我有用。

你可以[在这里](http://pallergabor.uw.hu/androidblog/elistcbox.zip)下载。

希望能帮到你。

# sql-server - 如何将单个 CSV 文件中的数据加载到具有关系的多个表中？

> ID：14728183
> 
> 赞同：1
> 
> 时间：2013-02-06T11:41:36.660
> 
> 标签：sql-server, csv, ssis, flat-file

我有一个 CSV 文件，需要将其加载到 SQL 数据库中。问题是，我需要将一些数据拆分到不同的表中。在加载过程中，我需要确保当第一部分加载到第一个表中时，当我尝试加载数据库中的其他数据时，我会获得将放入第二个表的外键字段中的 ID。

如何通过保持数据完整性将数据加载到来自 CSV 文件的数据的多个表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:18:17.790

-- 我的源文件

```
Part1,Part2
A,a
B,b
C,c 
```

- 脚步

1.  创建临时表

    创建表 [dbo].[Part1And2]( [RowID] [int] IDENTITY (1,1) NOT NULL, [Part1] varchar NULL, [Part2] varchar NULL ) ON [PRIMARY]

2.  使用执行 SQL 任务截断此表

3.  DFT 1：将文件加载到临时表中。现在第 1 部分和第 2 部分字段集已耦合。源：您的源文件目标：您创建的表。

4.  DFT 2：拆分数据源：刚刚加载的临时表 将其馈送到多播 tsk 从多播创建两个输出并将它们连接到各个表（例如 Part1 和 Part2） 选择每个表的字段 在我们的示例中，表 Part1将有两个字段 RowID 和 Part1 表 Part2 ：RowID 和 Part2

这只是起点。想想当你拿到下一组文件时你会怎么做。如何分配 ID？

# android-layout - 单击时在按钮上显示动画而不是文本

> ID：14728193
> 
> 赞同：0
> 
> 时间：2013-02-06T11:42:04.323
> 
> 标签：android-layout, button

我正在尝试构建一个带有进度条的按钮，该进度条显示在按钮的中心，而不是文本，只要点击按钮，同时进行一些后台处理。我正在做的是有一个自定义按钮并将动画设置为按钮左侧的可绘制对象，并在 onDraw 中将动画移动到按钮的中心。但是，在点击按钮后的一小段时间内，我不知道为什么按钮上有2个进度条。

```
public class ButtonWithProgressBar extends Button {
protected int progressId = R.drawable.progress_bar;
protected Drawable progress;
protected CharSequence buttonText;

@Override
public void setText(CharSequence text, BufferType type) {
    super.setText(text, type);
    if (Strings.notEmpty(text)) {
        buttonText = text;
    }
}

public void startSpinning()
{
    if(isSpinning()){
        return;
    }

    progress = getContext().getResources().getDrawable(progressId);
    final Drawable[] old = getCompoundDrawables();
    setCompoundDrawablesWithIntrinsicBounds(old[0], old[1], progress, old[3]);
    setEnabled(false);

    if(progress instanceof Animatable){
        ((Animatable)progress).start();
    }
    setText("");

}

public void stopSpinning()
{
    if(!isSpinning()){
        return;
    }

    if(progress instanceof Animatable){
        ((Animatable)progress).stop();
    }
    setEnabled(true);
    setText(buttonText);
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    if (progress != null) {
        final int drawableHeight = progress.getIntrinsicHeight();
        final int drawableWidth = progress.getIntrinsicWidth();
        final int drawableTop = (getHeight() - drawableHeight) / 2;
        final int drawableLeft = (getWidth() - drawableWidth) / 2;
        progress.setBounds(drawableLeft, drawableTop, drawableLeft + drawableWidth, drawableTop + drawableHeight);

        progress.draw(canvas);
    }
} 
```

}

这会在点击后显示一小段时间，然后一切都看起来像我想要的那样： ![在此处输入图像描述](../Images/fa9df10b2a40a901cc58643376893062.png)

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:28:36.877

发现问题。将代码更新为工作版本。

# javascript - Javascript函数中的语法错误

> ID：14728199
> 
> 赞同：0
> 
> 时间：2013-02-06T11:42:13.407
> 
> 标签：javascript, ajax, jquery

Java 脚本

```
$('#senurl').click(function () {

    $.ajax({
        type: "POST",
        url: "/Admin/Coupon1/Reject",
        dataType: "json",
        data:  "id="+@Model.id+"&url="+@url

    });
}); 
```

> ReferenceError: Expired is not defined
> [Break On This Error]
> data: "id="+2925+"&url="+Expired

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:44:59.953

您可能想要（但另见下文）：

```
$('#senurl').click(function () {

    $.ajax({
        type: "POST",
        url: "/Admin/Coupon1/Reject",
        dataType: "json",
        data:  "id=@Model.id&url=@url"

    });
}); 
```

...因为您必须考虑*浏览器*看到的内容，以及是否`@url`被服务器替换`Expired`，从错误中您可以看出浏览器看到的代码是：

```
data: "id="+2925+"&url="+Expired // <=== What the browser sees with your current code 
```

更好的是，让 jQuery 通过传递一个对象来处理所需的任何潜在 URI 编码：

```
$('#senurl').click(function () {

    $.ajax({
        type: "POST",
        url: "/Admin/Coupon1/Reject",
        dataType: "json",
        data:  {id: @Model.id, url: "@url"}
    });
}); 
```

如果您不想向 jQuery 传递一个对象并让它为您处理 URI 编码，那么您需要自己处理它：

```
data:  "id=@Model.id&url=" + encodeURIComponent("@url") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:05:12.213

$('#senurl').click(function () {

```
$.ajax({
    type: "POST",
    url: "/Admin/Coupon1/Reject",
    dataType: "json",
data: "{id:'" + @Model.id + "', 'url': " + @url + "}",  
   success: function (response) {
    alert( response.d); 
},
error: function (data) {
    alert(data);
},
failure: function (msg) {

}
}); 
```

});

试试这个它工作正常。如果您使用的是 url 路由，那么您可能会遇到一些其他错误。所以最好得到响应输出并检查..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T11:45:24.013

我认为这是因为 @url 变量被分配了`Expired`不带引号的数据。

# asp.net - LINQ 返回 NULL

> ID：14728203
> 
> 赞同：0
> 
> 时间：2013-02-06T11:42:20.390
> 
> 标签：asp.net, linq, null

```
Item_SubContractor Item = (
    from Isc in db.Item_SubContractors
    where Isc.SubContract_id == tempSubContractId
    && Isc.Item_id == BOQItem.id
    select Isc).ToList().FirstOrDefault(); 
```

`Item`正在返回 NULL，当我断点并运行它时，都返回一些`db.Item_SubContractors`东西`tempSubContractId``BOQItem.id`

有人有任何想法我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:18:41.270

如果您的数据库中没有该值，则将返回，然后确保您的数据库中存在相同的`FirstOrDefault()`项目`NULL`

你可以测试一下

```
bool exist = db.Item_SubContractors.Any(
                          Isc=> Isc.SubContract_id == tempSubContractId 
                          && Isc.Item_id == BOQItem.id) 
```

检查您的数据库中是否有此项目

# php - 将 PHP 和 XML 插入 MYSQL

> ID：14728208
> 
> 赞同：1
> 
> 时间：2013-02-06T11:42:22.593
> 
> 标签：php

我正在使用以下代码从我们的服务提供商那里为 LBS 提取数据。我想做的是将收到的信息加载到 mysql 中。

使用此代码我没有收到任何错误，并且位置和地图 API 运行良好，但它根本没有将绘制的数据放入 mysql 中。

```
<?php
function parseXML($fstr,$tstr_start,$tstr_end) {

if ( ! strstr($fstr,$tstr_start) || !strstr($fstr,$tstr_end) ){
return ;
}

$start = strpos($fstr,$tstr_start) + strlen($tstr_start);
$stop = strpos($fstr,$tstr_end, $start);
$length = $stop - $start;
return trim(substr($fstr, $start, $length));

}
define ("MAP_API_KEY","***");
define ("MAP_BASE_URL","http://maps.googleapis.com/maps/api/staticmap?");
$Data = $GLOBALS["HTTP_RAW_POST_DATA"];

//--- Get XML data into variables
$DataAry['ResponseType'] = parseXML($Data,'Response Type="','"');
$DataAry['RefNo'] = parseXML($Data,'RefNo="','"');
$DataAry['SeqNo'] = parseXML($Data,'SeqNo="','"');
$DataAry['Network'] = parseXML($Data,'<NetworkID>','</NetworkID>');
$DataAry['Lat'] = (int) parseXML($Data,'<Lat>','</Lat>');
$DataAry['Lon'] = (int) parseXML($Data,'<Lon>','</Lon>');
$DataAry['Accuracy'] = parseXML($Data,'<Accuracy>','</Accuracy>');
$DataAry['DateTime'] = parseXML($Data,'<DateTime>','</DateTime>');

$DataAry["Lat"] = $DataAry['Lat']/1000000;
$DataAry["Lon"] = $DataAry["Lon"]/1000000;

$con = mysql_connect("localhost","****","****");
if (!$con)
{
die('Could not connect: ' . mysql_error());
} 

mysql_select_db("****", $con);

$sql="INSERT INTO trace (Lat, Lon, DateTime, RefNo)
VALUES
('$_POST[Lat]','$_POST[Lon]','$_POST[DateTime]','$_POST[RefNo]')";

if (!mysql_query($sql,$con))
{
die('Error: ' . mysql_error());
}

// ---Create link to map
$link = MAP_BASE_URL . "center={$DataAry['Lat']},    
{$DataAry['Lon']}&zoom=15&size=500x500&key=" . MAP_API_KEY . "&sensor=true&markers=      
{$DataAry['Lat']},{$DataAry['Lon']}";

$handle = fopen("requests.php","c");
fwrite($handle, "<br/>Location Request @ ". date("Y-m-d H:i:s")  . "<br/><textarea      
style='width:500px;height:200px' readonly>" . $GLOBALS["HTTP_RAW_POST_DATA"] . " 
</textarea><br/><img  style='border:1px solid #000;width:500px;height:500px'  
src='$link'/><hr/>");
fclose ($handle);

echo "done!";
?> 
```

但是它确实按照要求将其放入 requests.php 页面，但我需要将信息提取到 msql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:52:07.200

`$_POST`第一个问题是数组的字符串键索引周围没有引号。您可能想要放入`!mysql_query($sql,$con)`一个 try-catch 以查看您是否捕获任何错误。此外，不推荐在 PHP 中使用 mysql_* 函数，不应再使用。因为您使用的是 mysql_* 函数，所以您也容易受到 SQL 注入的攻击。

# java - 更改/设置 BorderLayout 中 JTextField 的高度

> ID：14728209
> 
> 赞同：2
> 
> 时间：2013-02-06T11:42:23.647
> 
> 标签：java, swing, height, jtextfield, border-layout

我正在尝试设置 a 的高度`JTextField`。目前其展示的全尺寸`JFrame`。任何想法如何将高度设置为 50？

编辑：这是修改后的代码以及截图谢谢！

![ps.png](../Images/72c80a12e4d5cd28f36d8394772453eb.png)

```
public class Display extends JFrame {

    private DrawCanvas canvas;
    private JTextField Altitude;
    private JTextField TASpeed;
    private JLabel altButton;
    private int countA = 0;
    private int countS = 0;
    private int Bcount1 = 0;
    public String Ccount = Integer.toString(Bcount1);

    public Display() {
        canvas = new DrawCanvas();
        canvas.setPreferredSize(new Dimension(CANVAS_WIDTH, CANVAS_HEIGHT));
        canvas.setLayout(new BorderLayout());
        Container cp = getContentPane();
        cp.setLayout(new BorderLayout());
        cp.add(canvas, BorderLayout.LINE_START);

        //here are the 2 side fields![enter image description here][2]
        Altitude = new JTextField("0", 5);
        Altitude.setHorizontalAlignment(JTextField.CENTER);
        Altitude.setEditable(false);
        Altitude.setOpaque(false);
        Altitude.setFont(Altitude.getFont().deriveFont(25f));

        TASpeed = new JTextField("0", 5);
        TASpeed.setHorizontalAlignment(JTextField.CENTER);
        TASpeed.setEditable(false);
        TASpeed.setOpaque(false);
        TASpeed.setFont(Altitude.getFont().deriveFont(25f));

        altButton = new JLabel();
        altButton.setText(Ccount);

        canvas.add(altButton, BorderLayout.SOUTH);

        canvas.add(Altitude, BorderLayout.LINE_END);
        canvas.add(TASpeed, BorderLayout.LINE_START);

        canvas.add(new JLabel(Ccount), BorderLayout.SOUTH);

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setTitle("FLIGHT DISPLAY");
        pack();
        setVisible(true);
        requestFocus();
    }

    class DrawCanvas extends JPanel {

        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            setBackground(CANVAS_BACKGROUND);

            g.setColor(GROUND_COLOR);
            g.drawString(Ccount, 100, 100);

        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                new Display();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:15:38.963

正如@kleopatra 正确评论的那样，`JTextField`可以根据平台设计者对`Font`. 这个例子改变了大小。

![图片](../Images/a38ea3f87bcd989587cf921847104313.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

/** @see http://stackoverflow.com/a/14734937/230513 */
public class Test {

    private void display() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JTextField tfCount = new JTextField("42", 8);
        tfCount.setHorizontalAlignment(JTextField.CENTER);
        tfCount.setFont(tfCount.getFont().deriveFont(50f));
        f.add(tfCount, BorderLayout.NORTH);
        f.add(new JPanel() { //placeholder

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(320, 240);
            }
        }, BorderLayout.CENTER);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().display();
            }
        });
    }
} 
```

# ruby-on-rails - 仅将身份验证设计为 API

> ID：14728211
> 
> 赞同：1
> 
> 时间：2013-02-06T11:42:42.890
> 
> 标签：ruby-on-rails, devise, angularjs, http-post, http-get

我正在尝试将设计身份验证与 Angular.js 一起使用。除了我想隐藏服务器端登录表单，即请求的结果`/users/sign_in` `GET`只留下请求的可能性之外，一切都已经在工作了`/users/sign_in` `POST`。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:55:25.433

我认为您需要在 routes.rb 中跳过您的 devise_for 调用中的会话（或者甚至不调用它）并坚持使用 devise_scope 来设置您的登录路径。因此，您的 routes.rb 将如下所示：

```
devise_for :users, :skip => :sessions

devise_scope do
  post "/users/sign_in" => "devise/sessions#create"
  delete "/users/sign_out" => "devise/sessions#destroy"
end 
```

# php - 相同的文件只能在网站上使用？

> ID：14728212
> 
> 赞同：0
> 
> 时间：2013-02-06T11:42:50.993
> 
> 标签：php, forms

我被要求检查为什么特定表格不起作用。即使我对php一无所知，我确实有一个我在这个网站上测试过的工作表格，但它没有用。

我只是将我拥有的相同文件上传到了两个不同的网站。但它对其中一个不起作用。它不是不正确的代码。我不知道为什么它只适用于网站

编辑：是的，恐怕它们托管在其他地方，在不同的服务器上

编辑：这是简化的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>FORM with validation examples</title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script language=javascript>
function valida ()
{

if (document.example.name.value=="")
{
alert ('NAME field is empty!');
return false;
}

else if (document.example.email.value=="")
{
    alert ('EMAIL field is empty!');
    return false;
 }

else
{
return true;
}
}
</script>

</head>
<body>

<form name="example" id="example" action="submit-example.php" method="post" onsubmit="return valida();">    
<fieldset>

<label for="name">Name:</label>
<input type="text" name="name" id="name"/>

<label for="email">Email:</label>
<input type="text" name="email" id="email"/>    

<input type="submit" value="submit" />

</fieldset>
</form> 

</body>
</html> 
```

和

```
<?php

$recebename = $_POST['name'];
$recebeemail = $_POST['email'];

$headers = "From: mail@gmail.com\r\n";
$headers .= "Content-type:text/html; charset=utf-8";

$para = "mail.ccs@gmail.com";

$mensagem   = "<h4>Name:</h4> ";
$mensagem  .= $recebename;

$mensagem  .= "<h4>Email:</h4> ";
$mensagem  .= $recebeemail;

$envia =  mail($para,"E-mail do Site",$mensagem,$headers);

$mensagem2  = "<p>Olá <strong>" . $recebename . "</strong>. Recebemos sua solicitação. Entraremos em contato em breve.</p>";

$mensagem2 .= "<p>Observação - Não é necessário responder esta mensagem.</p>";

$envia =  mail($recebeemail,"Sua mensagem foi recebida!",$mensagem2,$headers);

echo "Mensagens Recebidas com Sucesso!";
echo "<meta http-equiv='refresh' content='2;URL=http://www.google.com.br'>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:51:41.257

检查文件中是否包含包含（如 include 'header.php'; ）。如果是这样，您需要更正路径。尝试添加完整路径（/folder1/subfolder/header.php）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:54:59.960

我可能有几件事，首先想到的是：
两台服务器都支持 PHP 吗？
表单上的操作是否指向单独的文件？
如果是这样，命名是否正确？
表单上的操作是相对路径还是绝对路径？
需要单独的 js 文件的表单是否有验证？
表单（或提交）上是否有 ajax 功能？
...
两台服务器都可以发送电子邮件吗？

# php - Codeigniter 在自定义库中设置常量

> ID：14728215
> 
> 赞同：3
> 
> 时间：2013-02-06T11:43:01.140
> 
> 标签：php, codeigniter

我正在为一个项目使用 codeigniter。我有一个自定义库，其中有一些常量，我将在库中的自定义函数中使用这些常量。我如何声明这样的常量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T11:47:28.693

如果您打算仅在您的库中使用该常量，则必须在您的类中声明它：

```
<?php
class my_class {
    const MY_CONSTANT = 10; 
```

然后调用它：

```
self::MY_CONSTANT 
```

如果你需要你的常量在应用程序的其余部分可用，你必须在你的`application/config/constants.php`文件中声明它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T11:09:22.033

以这种方式访问​​库中的常量。有用。

```
 $this->load->library('library_name');
 echo library_name::MY_CONSTANT; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-19T15:21:10.717

`config/constants.php`您应该按如下方式声明常量：

```
class MyConstantsClass {

    public static function get_timezones_list() {
        return array(
            "-12" => "(GMT -12:00) Eniwetok, Kwajalein",
            "-11" => "(GMT -11:00) Midway Island, Samoa",
            "-10" => "(GMT -10:00) Hawaii",
            "-9" => "(GMT -9:00) Alaska",
            "-8" => "(GMT -8:00) Pacific Time (US &amp; Canada)",
            "-7" => "(GMT -7:00) Mountain Time (US &amp; Canada)",
            "-6" => "(GMT -6:00) Central Time (US &amp; Canada), Mexico City",
            "-5" => "(GMT -5:00) Eastern Time (US &amp; Canada), Bogota, Lima",
            "-4" => "(GMT -4:00) Atlantic Time (Canada), Caracas, La Paz",
            "-3.5" => "(GMT -3:30) Newfoundland",
            "-3" => "(GMT -3:00) Brazil, Buenos Aires, Georgetown",
            "-2" => "(GMT -2:00) Mid-Atlantic",
            "-1" => "(GMT -1:00) Azores, Cape Verde Islands",
            "0" => "(GMT) Western Europe Time, London, Lisbon, Casablanca",
            "1" => "(GMT +1:00) Brussels, Copenhagen, Madrid, Paris",
            "2" => "(GMT +2:00) Kaliningrad, South Africa",
            "3" => "(GMT +3:00) Baghdad, Riyadh, Moscow, St. Petersburg",
            "3.5" => "(GMT +3:30) Tehran",
            "4" => "(GMT +4:00) Abu Dhabi, Muscat, Baku, Tbilisi",
            "4.5" => "(GMT +4:30) Kabul",
            "5" => "(GMT +5:00) Ekaterinburg, Islamabad, Karachi, Tashkent",
            "5.5" => "(GMT +5:30) Bombay, Calcutta, Madras, New Delhi",
            "6" => "(GMT +6:00) Almaty, Dhaka, Colombo",
            "7" => "(GMT +7:00) Bangkok, Hanoi, Jakarta",
            "8" => "(GMT +8:00) Beijing, Perth, Singapore, Hong Kong",
            "9" => "(GMT +9:00) Tokyo, Seoul, Osaka, Sapporo, Yakutsk",
            "9.5" => "(GMT +9:30) Adelaide, Darwin",
            "10" => "(GMT +10:00) Eastern Australia, Guam, Vladivostok",
            "11" => "(GMT +11:00) Magadan, Solomon Islands, New Caledonia",
            "12" => "(GMT +12:00) Auckland, Wellington, Fiji, Kamchatka"
        );
    }   

    public static function get_codes() {        
        return array();
    }

   // .... and so on....

} 
```

然后在您的自定义库中：

```
class MyLibraryClass {

    private $timezones;

    public function __construct(){
        $this->CI =& get_instance(); //in case you need it
        $this->timezones = MyConstantsClass::get_timezones_list();
    }

    //do whatever you want with your constants
    echo $current_timezone = $this->timezones['-5']; //print (GMT -5:00) Eastern Time (US &amp; Canada), Bogota, Lima

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:50:05.287

通常 Codeigniter 常量应该在里面`config/constants.php`。然后只有我们可以访问整个应用程序中的所有常量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T11:54:37.567

您可以创建自己的常量文件并将其包含在您的库中：

配置/myconstants.php

在你的图书馆里，

包括（APPPATH。'config/myconstants.php'）；

# javascript - window.resize 用于计算框

> ID：14728217
> 
> 赞同：0
> 
> 时间：2013-02-06T11:43:02.823
> 
> 标签：javascript, jquery, mobile, responsive-design, height

我有这个js代码：

```
$(window).resize(function() {
    var formHeight = $(".box-demo").outerHeight() + 40;
    $(".box-demo").css("top",-formHeight+"px");
}); 
```

当您调整窗口大小时。盒子演示正在重新计算表单的高度。但现在我在移动设备上遇到了这个问题。

只有当改变宽度。然后必须执行此功能。现在它发生在文档更改高度和宽度时。我怎么能做这个。仅当我更改文档的宽度时才会执行此操作。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:45:26.043

这样做可能有更好的方法，但您可以基于预设的窗口宽度值。只有当宽度发生变化时才会发生调整大小：

```
var windowWidth;

$(document).ready(function() {
    windowWidth = $(window).width();
})

$(window).resize(function() { 
    if($(this).width() != windowWidth)
    {
        var formHeight = $(".box-demo").outerHeight() + 40;
        $(".box-demo").css("top",-formHeight+"px");
        windowWidth = $(this).width();
    }
}); 
```

编辑：您还可以避免使用以下方法附加“px”：

```
$(".box-demo").css({top: -formHeight}); 
```

编辑2：如果你想在只有宽度改变时改变它，你也可以添加一个高度检查：

```
var windowHeight;
...
if($(this).width() != windowWidth && $(this).height) == windowHeight) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:45:48.260

提取方法，并将其绑定到准备好的文档上。

# jquery-ui - jQuery UI 选项卡：禁用“第一个选项卡”

> ID：14728218
> 
> 赞同：0
> 
> 时间：2013-02-06T11:43:06.463
> 
> 标签：jquery-ui, tabs

我正在寻找加载 jQuery UI 选项卡小部件而不默认加载“第一个选项卡”。

我尝试了以下操作，但仍显示第一个选项卡：

```
 $('#tabs').tabs({
      selected: -1
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:49:30.730

您可以将[可折叠](http://api.jqueryui.com/tabs/#option-collapsible)选项设置为`true`，将[活动](http://api.jqueryui.com/tabs/#option-active)选项设置为`false`：

```
$("#tabs").tabs({
    collapsible: true,
    active: false
}); 
```

# android - Speech API RecognizerIntent - 绕过没听懂。再试一次消息

> ID：14728219
> 
> 赞同：1
> 
> 时间：2013-02-06T11:43:06.053
> 
> 标签：android, speech-recognition

我已经实现了 RecognizerIntent 并调用了谷歌的语音识别服务，它工作正常，我得到了结果。但是，有时如果我喃喃自语或离我的设备太远，我会收到消息“没听清。再试一次。” 信息。有没有办法绕过这个而不显示这个消息，因为我不希望用户必须按 OK 才能继续？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:45:00.570

如果您想控制 UI，请使用[SpeechRecognizer 。](https://developer.android.com/reference/android/speech/SpeechRecognizer.html)

如果我理解正确，那么您正在启动`RecognizerIntent`，这将由 Google 搜索应用程序（或 Google 语音搜索，或当前碰巧调用的任何活动）中的一项活动处理。现在，由于这是一个*活动*，它接管了 UI，即它弹出一个对话框，显示一个提示和一个 VU 表等。如果出现错误情况，它原则上可以通过发送将控制权返回给您的应用程序错误代码之一，例如`RESULT_NO_MATCH`（如文档所示），但它选择不这样做。相反，它会弹出一条“重试”消息。返回活动的唯一方法是按 BACK，或希望识别成功。

如果您想控制更多的用户体验，请使用[SpeechRecognizer](https://developer.android.com/reference/android/speech/SpeechRecognizer.html)。这样您就可以调用*服务*，然后通过回调与它进行交互。您将完全控制 UI。或者几乎，例如谷歌应用程序在识别开始时会发出哔声，并且没有办法将其关闭并提供您自己的哔声。

请注意，这个答案是谷歌语音识别服务的特定（特定版本），它不是 Android 本身的一部分。它实现了`RecognizerIntent`/ `SpeechRecognizer`API 的一部分，但它的不同版本在 API 覆盖范围和它们的确切行为方面有所不同。所以这个答案将来可能会出错。

# python-2.7 - 在另一个 wx.textctrl 中输入的 python 代码显示 wx.textctrl wigdet 中的当前输出

> ID：14728220
> 
> 赞同：0
> 
> 时间：2013-02-06T11:43:11.400
> 
> 标签：python-2.7, wxpython, exec

我在我的 wxApp 中使用了两个 wx.TextCtrl 小部件。
第一个用于由应用用户提供 Python 代码，例如：

```
from time import sleep  
for i in range(4):  
    print i  
    sleep(4) 
```

第二个用于显示输出。
为了处理用户代码，我使用 EXEC。
但是我在动态显示输出时遇到了问题。

当前输出显示在第二个 wx.TextCtrl 小部件中，但在处理整个代码之后（16 秒后）。

我想在上面的代码中每 4 秒显示一次用户的代码输出。怎么做？

我试图使用线程，但是在线程的情况下使用 exec 会出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:36:27.363

time.sleep 将阻塞 GUI 的主循环，这就是您看不到任何输出的原因。如果你想走那条路，你必须把它放到一个单独的线程中。否则，您可以使用 wx.Timer。

这是一个教程： http: [//www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/](http://www.blog.pythonlibrary.org/2009/08/25/wxpython-using-wx-timers/)

我不认为你应该使用 Python 的 exec 命令。这可能导致代码注入问题。相反，您应该考虑使用 subprocess 模块。

# views - 将参数传递给 couchbase 视图

> ID：14728221
> 
> 赞同：2
> 
> 时间：2013-02-06T11:43:14.480
> 
> 标签：views, couchbase

我正在寻找存储桶中的特定 JSON 文档，但我不知道它的文档 ID，我只知道其中一个子键的值。我查看了 API 文档，但在涉及到我的特定用例时仍然感到困惑：

在 mongo 中，我可以执行如下动态查询：

```
bucket.get({ "name" : "some-arbritrary-name-here" }) 
```

对于 couchbase，我的印象是您需要创建一个索引（例如在 name 属性上）并使用 startKey / endKey 但这感觉不对 - 您最终还能返回多个文档吗？能够将参数传递给可以执行精确匹配的视图会很好。另外，我们将如何处理多维搜索？即名称和类别。

我想在 couchbase 实例上进行尽可能多的过滤，理想情况下将其缩小到一条记录，而不是在返回到 App Tier 时进行过滤。类似于将动态值传递给映射函数并仅发出匹配的文档。

我知道你可以使用 LINQ 和 couchbase 进行过滤，但如果我正确阅读了文档，这个过滤仍然是在客户端完成的，但至少如果我们可以将返回的数据集缩小到一个合理的子集，客户端过滤就不会这么*重要*。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:08:27.720

因此，您在某一点上是正确的，您需要创建一个视图（确实是一个索引）才能查询 JSON 文档的内容。

因此，在您的情况下，您必须使用这种代码创建一个视图：

```
function (doc, meta) {
 if (doc.type == "youtype") { // just a good practice to type the doc
   emit(doc.name);
 }
} 
```

因此，这将创建一个索引 - 分布在集群的所有节点上 - 您现在可以在应用程序中使用它。您可以使用“key”参数指向特定值

# javascript - 如何在 JavaScript 中增加页面加载时文本字段的值？

> ID：14728228
> 
> 赞同：1
> 
> 时间：2013-02-06T11:43:26.923
> 
> 标签：javascript, html

我想在 JavaScript 中增加页面加载时文本字段的值。例如

```
<input type="text" name="itemquantity[]" value="1"/> 
```

页面加载后它应该像

```
<input type="text" name="itemquantity[]" value="2"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:14:50.370

你可以这样做 ：

```
<input id="myid" type="text" name="itemquantity[]" value="1"/>
<script>
   localStorage['myid'] =
      document.getElementById('myid').value =
          parseInt(localStorage['myid'] || '0', 10) + 1;
</script> 
```

每次加载页面时，该值将增加 1，初始值为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:10:02.103

```
<input id="textField1" type="text" name="itemquantity[]" value="1"/>

<script>
window.onload=function()
{
document.getElementById('textField1').value=document.getElementById('textField1').value+1
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:45:21.803

您需要使用 cookie 或 localStorage 来实现这一点。由于每次加载页面时网页的状态都会丢失，因此 localStorage 处于救援状态

```
<!DOCTYPE html>
<html>
<body>

<div id="result"></div>
<script>
if(typeof(Storage)!=="undefined")
  {
 if(localStorage.itemquantity) {
  localStorage.itemquantity = parseInt(localStorage.itemquantity, 10) +1;
  document.getElementById("result").innerHTML="Value: " + localStorage.itemquantity;
}
else
{
    localStorage.itemquantity = 1;
}
  }
else
  {
alert('browser does not support local storage');
  }
</script>

</body>
</html> 
```

现在您有了可以将其分配给文本字段的值

**更新**

```
<script type="text/javascript">  
if(typeof(Storage)!=="undefined")  
{  
 if(localStorage.itemquantity) {  
  localStorage.itemquantity = parseInt(localStorage.itemquantity, 10) +1;  
  document.getElementById("txtFieldID").value = localStorage.itemquantity;  
}  
else  
{  
    localStorage.itemquantity = 1;  
}  
  }  
else  
  {  
alert('browser does not support local storage');  
  }  
</script> 
```

**注意**保留`txtFieldID`作为您的文本框 ID，在第一次加载时，该值将设置为 1，并且每次加载时它都会增加 1
希望这会有所帮助

# sql - Oracle 自动加入？

> ID：14728233
> 
> 赞同：0
> 
> 时间：2013-02-06T11:43:44.120
> 
> 标签：sql, oracle, join

我在 Oracle 中有一个查询。此查询的结果应该是父表的“子”表列表：

```
WITH tempTab AS
 (SELECT owner          ,
         constraint_name,
         table_name
 FROM    sys.all_constraints
 WHERE   owner           = 'PARENT_OWNER'
 AND     table_name      = 'PARENT_TABLE'
 AND     constraint_type = 'P'
 )
 ,
 acTemp AS
 (SELECT DISTINCT ac.owner                       AS child_owner,
                                   ac.table_name AS child_table,
                                   ac.constraint_name
                  FROM             sys.all_constraints ac,
                                   tempTab tt
                  WHERE            ac.constraint_type   = 'R'
                  AND              ac.r_constraint_name = tt.constraint_name
 )
SELECT act.child_owner,
   act.child_table
FROM   acTemp act 
```

它工作正常（我得到了一些行）。但是当我修改这个查询的最后几行（最后一个选择）时：

```
WITH tempTab AS
 (SELECT owner          ,
         constraint_name,
         table_name
 FROM    sys.all_constraints
 WHERE   owner           = 'PARENT_OWNER'
 AND     table_name      = 'PARENT_TABLE'
 AND     constraint_type = 'P'
 )
 ,
 acTemp AS
 (SELECT DISTINCT ac.owner                       AS child_owner,
                                   ac.table_name AS child_table,
                                   ac.constraint_name
                  FROM             sys.all_constraints ac,
                                   tempTab tt
                  WHERE            ac.constraint_type   = 'R'
                  AND              ac.r_constraint_name = tt.constraint_name
 )
SELECT act.child_owner,
   act.child_table
FROM   acTemp act ,
   acTemp act2,
   tempTab tt
WHERE  tt.owner      = act2.child_owner
AND    tt.table_name = act2.child_table 
```

我没有得到任何行。为什么？在第二个查询中，我不过滤 act 表，因此结果应该与第一个查询中的相同，但事实并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:35:10.097

尝试这样的事情：

```
SELECT
     parent_table.owner
    ,parent_table.table_name AS parent_table
    ,child_table.table_name AS child_table
    ,parent_table.constraint_name AS constraint_name
FROM sys.all_constraints parent_table
INNER JOIN sys.all_constraints child_table ON ( child_table.constraint_name = parent_table.r_constraint_name AND child_table.owner = parent_table.owner)
WHERE parent_table.owner = 'PARENT_OWNER'
AND parent_table.table_name = 'PARENT_TABLE'
AND parent_table.constraint_type = 'R'; 
```

# iphone - iPhone在全屏模式下禁用/隐藏scrubbar mpmovieplayercontroller

> ID：14728245
> 
> 赞同：2
> 
> 时间：2013-02-06T11:44:14.783
> 
> 标签：iphone, ios, ios5, custom-controls, mpmovieplayercontroller

我正在创建一个带有视频剪辑（除其他外）的 iphone 应用程序，我需要在实际视频剪辑之前播放一个或多个广告。自然，我的客户不希望用户能够在广告期间快进，但同时他们必须能够退出视图，因此我无法将 controlStyle 设置为 MPMovieControlStyleNone。

我不希望破解默认视图并删除scrubbar，所以看来我唯一的选择是使用单个“完成”/“返回”按钮实现自定义栏。

我已经用谷歌搜索了我的眼睛试图找到示例代码，但没有骰子。我在这里也看到过类似的问题，但没有给出可以帮助我的答案。我是一个新手 IOS 开发人员，并且可以真正使用 som 帮助（自定义控制栏，带有单个“完成”按钮，用于全屏 MPMoviePlayerController，以可接受的方式显示/隐藏点击或禁用擦洗栏 - 在全屏模式下）。

任何人都这样做过或知道在哪里可以找到一些示例代码？谢谢！

# ios - 通过 NSInputStream/NSOutputStream 传输多个图像

> ID：14728252
> 
> 赞同：1
> 
> 时间：2013-02-06T11:44:27.597
> 
> 标签：ios, image, nsstream, nsinputstream, nsoutputstream

我有两个`NSInputStream`并`NSOutputStream`通过网络相互连接。我想将核心数据对象和相关图像从一台设备传输到另一台设备。我已成功将核心数据对象转换为`JSON`并传输到流的另一端，然后从`JSON`. 现在有与每个记录相关联的图像。图像在光盘上，只有路径存储在核心数据对象中。现在，当您写入`output stream`. 我已经准备好了`XML`（包含`JSON`）。
1\. 但是如何将图像 ( `NSData *`) 与`XML`(also `NSData *`) 一起传输？我将如何在阅读端 ( `NSInputStream`) 区分 XML 和图像？
2.另外，我要传输多张图片，最后我们如何判断`NSInputStream`一张图片的字节已经完成，下一张图片的字节已经开始？
3.我们怎么知道哪个图像（名称）被转移了？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:27:58.807

将`NSData`（每个`UIImage`）转换为`NSString`表示，然后将所有`NSString`对象放入`NSDictionary`并序列化该字典。这样，当您传输数据时，您可以反转过程以提取图像，知道哪些关键点指向哪个图像。这样，您应该能够传输多个图像。

希望这可以帮助。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:07:11.620

我通过以下步骤解决了这个问题：
1\. 将每个托管对象转换为`NSDictionary`
2\. 将所有字典放入`NSArray`
3\. 转换`NSArray`为`NSData`使用`NSKeyedArchiver`
4.`NSData`通过流 传输

在接收器端，我颠倒了上述步骤。
谢谢马吕斯·库尔戈纳斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-21T23:15:05.070

听起来很荒谬，每个答案。尝试这样的事情：

```
case NSStreamEventHasBytesAvailable: {
            NSLog(@"NSStreamEventHasBytesAvailable");
            uint8_t * mbuf[DATA_LENGTH];
            mlen = [(NSInputStream *)stream read:(uint8_t *)mbuf maxLength:DATA_LENGTH];
            NSLog(@"mlen == %lu", mlen);
            [mdata appendBytes:(const void *)mbuf length:mlen];
            NSLog(@"mdata length == %lu", mdata.length);
            if (mlen < DATA_LENGTH) {
                NSLog(@"displayImage");
                UIImage *image = [UIImage imageWithData:mdata];
                [self.peerConnectionViewController.view.subviews[0].layer setContents:(__bridge id)image.CGImage];
                mdata = nil;
                mlen  = DATA_LENGTH;
                mdata = [[NSMutableData alloc] init];
            }
        } break; 
```

  ...    

```
- (void)captureOutput:(AVCaptureOutput *)output didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    CVPixelBufferLockBaseAddress(imageBuffer,0);
    uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer);
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
    size_t width = CVPixelBufferGetWidth(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef newContext = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
    CGImageRef newImage = CGBitmapContextCreateImage(newContext);
    CGContextRelease(newContext);
    CGColorSpaceRelease(colorSpace);
    UIImage *image = [[UIImage alloc] initWithCGImage:newImage scale:1 orientation:UIImageOrientationUp];
    CGImageRelease(newImage);
    CVPixelBufferUnlockBaseAddress(imageBuffer,0);

    NSData *data = [NSData dataWithData:UIImageJPEGRepresentation(image, 0.25)];

    __block BOOL baseCaseCondition = NO; // obviously this should be data driven, not hardcoded
    __block NSInteger _len = DATA_LENGTH;
    __block NSInteger _byteIndex = 0;
    typedef void (^RecursiveBlock)(void (^)());
    RecursiveBlock aRecursiveBlock;

    aRecursiveBlock = ^(RecursiveBlock block) {
        NSLog(@"Block called...");
        baseCaseCondition = (data.length > 0 && _byteIndex < data.length) ? TRUE : FALSE;
        if ((baseCaseCondition) && block)
        {
            _len = (data.length - _byteIndex) == 0 ? 1 : (data.length - _byteIndex) < DATA_LENGTH ? (data.length - _byteIndex) : DATA_LENGTH;
            //
            NSLog(@"START | byteIndex: %lu/%lu  writing len: %lu", _byteIndex, data.length, _len);
            //
            uint8_t * bytes[_len];
            [data getBytes:&bytes range:NSMakeRange(_byteIndex, _len)];
            _byteIndex += [self.outputStream write:(const uint8_t *)bytes maxLength:_len];
            //
            NSLog(@"END | byteIndex: %lu/%lu wrote len: %lu", _byteIndex, data.length, _len);
            //
            dispatch_barrier_async(dispatch_get_main_queue(), ^{
                block(block);
            });
        }
    };

    if (self.outputStream.hasSpaceAvailable)
            aRecursiveBlock(aRecursiveBlock);
} 
```

# ruby-on-rails - 无法让设计 ajax 工作

> ID：14728256
> 
> 赞同：2
> 
> 时间：2013-02-06T11:44:31.093
> 
> 标签：ruby-on-rails, devise

我正在尝试做的是通过 ajax 登录，但如果身份验证失败则返回表单（有错误）。默认情况下，`devise`将返回一般错误。这是我的控制器：

```
class SessionsController < Devise::SessionsController
  respond_to :js

  def new
    self.resource = build_resource(nil, :unsafe => true)
    clean_up_passwords(resource)
    render_user_form(resource, false)
  end

  def create
    self.resource = warden.authenticate!(scope: resource_name, recall: "#{controller_path}#new")
    sign_in(resource_name, resource)
    render_user_form(resource, true)
  end

  def render_user_form(resource, success)
    render json: {
      success: success,
      content: render_to_string(partial: 'users/login_form', locals: { user: resource })
    }
  end

end 
```

`new`并按照此处的建议`create`采取和自定义操作：[自定义登录以进行设计](https://stackoverflow.com/questions/5159237/custom-sign-in-for-devise)`Devise::SessionsController`

然而这会返回一个错误：

```
"You need to sign in or sign up before continuing." 
```

我的js：

```
 $('#login-form').bind 'ajax:success', (xhr, data, status) ->
    alert data.content 
```

有人可以帮助正确地构建这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:46:07.870

诀窍是更改设计配置并注册：

```
config.http_authenticatable_on_xhr = false
config.navigational_formats = ["*/*", :html, :json] 
```

# jquery - 点击外部关闭菜单。棘手的例子

> ID：14728257
> 
> 赞同：0
> 
> 时间：2013-02-06T11:44:34.227
> 
> 标签：jquery

我有一个由选项卡组成的菜单。

我希望此菜单在外部单击时关闭，并在您单击其中并打开选项卡时保持活动状态。

我在[这里找到了解决方案](https://stackoverflow.com/questions/2868582/click-outside-menu-to-close-in-jquery)

它看起来像这样：

```
$('html').click(function() {
    //Hide the menus if visible
});

$('#menucontainer').click(function(event){
    event.stopPropagation();
}); 
```

但在我的情况下它不起作用，因为应用它后，选项卡变得不可点击。

这是我的标记：

```
<button>Open menu</button>
<div class="menu">Tabbable content here</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:54:11.123

您需要执行以下操作才能完成此工作：

**HTML**

```
<button id= "open">Open menu</button>
<div class="menu">Tabbable content here</div> 
```

**jQuery**

```
$(".menu").hide();
$('html').click(function() {
$(".menu").hide();
});

$('#open').click(function(event){
event.stopPropagation();
$(".menu").show();
}); 
```

[**JsFIDDLE 在这里**](http://jsfiddle.net/aaaheatair/F9bf6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:54:55.013

检查 html click 事件，点击不是来自菜单或按钮，如果不是，则关闭它，类似于：

* * *

[**演示**](http://jsfiddle.net/qLPBn/)- 仅在单击菜单或按钮以外的任何内容时隐藏

* * *

这样做的好处是，您无需将点击事件绑定到多个元素，`stopPropagation`而是在一个地方保存您的逻辑。

此外，任何依赖点击冒泡的功能都保持不变，因为您只在需要您区分它的重点范围内检查点击源。

来自 DEMO 的代码：

```
$('html').click(function(event) {
  var $menu = $(".menu");
  var $button = $("#open");

  if(event.target !== $menu[0] && event.target !== $button[0]){
    // add code here to close your menu...
    $(".menu").hide(); // or similar code
  }
});

$('#open').click(function(event) {
  $(".menu").show();
}); 
```

在大多数情况下，您只有 1 次点击，`stopPropagation`这很好，但在您需要更多控制的情况下，我相信检查源可能是更好的选择。

当然，将点击事件与`stopPropagation`所有其他元素绑定也可以正常工作。

# java - 日期范围与已注册日期之间的差异

> ID：14728258
> 
> 赞同：0
> 
> 时间：2013-02-06T11:44:40.033
> 
> 标签：java, sql, oracle, date

我需要一种方法来计算一系列日期与数据库中已保存的其他日期的差异，即：

作为论点，我想告知以下内容：

```
from 15/JAN/2013 to 27/JAN/2013 
```

在数据库/集合中，我有：

```
START_DATE, END_DATE
-------------------------------------------
01/JAN/2013 00:00:00, 17/JAN/2013 22:30:00
23/JAN/2013 17:00:00, 31/JAN/2013 23:59:00 
```

回报必须是：

```
17/JAN/2013 22:30:01, 23/JAN/2013 16:59:59 
```

**原因：我的文件在日期范围内最多包含 4 万行。日期之间相交的文件包含相同的数据。这就是为什么我只需要在日期范围间隙中插入数据。**

感谢所有可以帮助我的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:04:12.620

```
select start_gap, end_gap
from(
  select 
     end_date start_gap, 
     lead(start_date) over (order by start_date) as end_gap
  from your_table
)
where end_gap is not null; --last line is not interesting 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:06:18.587

问题不清楚。使用 Between 运算符：日期介于 2013 年 1 月 15 日和 2013 年 1 月 27 日之间。你会得到你的回报。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T11:49:15.680

尝试这个：

```
select START_DATE,END_DATE from tablename where START_DATE>max(START_DATE) and END_DATE<max(END_DATE) 
```

# android - EditText 没有四舍五入

> ID：14728259
> 
> 赞同：0
> 
> 时间：2013-02-06T11:44:47.783
> 
> 标签：android, xml, layout

我正在尝试获得一个圆形的 EditText。

我在布局中的 EditText 就像

```
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp" >

    <EditText
        android:id="@+id/EditTextSearch"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/edit_round"
        android:padding="5dip"
        android:singleLine="true" >

        <requestFocus />
    </EditText>

    <ImageView
        android:id="@+id/searchBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:src="@android:drawable/ic_menu_search" />
</FrameLayout> 
```

我用作EditText背景的drawable就像

```
 <?xml version="1.0" encoding="utf-8"?>
 <!-- res/drawable/rounded_edittext.xml -->
 <shape xmlns:android="http://schemas.android.com/apk/res/android"
  android:padding="10dp"
 android:shape="rectangle" >

<solid android:color="#FFFFFF" />

<corners
    android:bottomLeftRadius="12dp"
    android:bottomRightRadius="12dp"
    android:topLeftRadius="12dp"
    android:topRightRadius="12dp" />

</shape> 
```

在我的 XML 图形布局中，我的 edittext 看起来很好且圆润，但在模拟器和设备中它看起来不像那样？

有谁知道为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:51:23.487

删除该`android:padding="10dp"`属性以使可绘制对象看起来像这样。我刚刚对其进行了测试，删除填充属性显示圆角就好了。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="#FFFFFF" />

    <padding
        android:bottom="10dp"
        android:left="10dp"
        android:right="10dp"
        android:top="10dp" />

    <corners
        android:bottomLeftRadius="12dp"
        android:bottomRightRadius="12dp"
        android:topLeftRadius="12dp"
        android:topRightRadius="12dp" />

</shape> 
```

要添加`padding`到`Shape Drawable`，请注意上面代码中添加的 padding 属性。

*证据就在布丁里：;-)*

**设备截图：**

![在此处输入图像描述](../Images/4065a9ba8d7c665aaf5a9b9e2f93c747.png)

**模拟器截图：**

![在此处输入图像描述](../Images/c562d650ab654e3e39415df93284fc95.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:59:17.313

您没有提供该`stroke`元素，因此您可能只是看不到背景（因为它只是一个白色填充！）。当您更改背景或添加笔触时，它应该是可见的。

添加：

```
<stroke android:width="2dp" android:color="#000000" /> 
```

和噗！矩形是可见的 :) BTW 填充不是问题 - 它只是被忽略了。

# database - db或上一层的业务规则

> ID：14728261
> 
> 赞同：0
> 
> 时间：2013-02-06T11:44:53.597
> 
> 标签：database, oracle

在一个系统中，业务逻辑应该在哪里实现？？它是在数据库中使用 PL/SQL 块还是在其上一层使用 java / .net？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:57:07.737

我不想太无用，但业务逻辑应该在业务逻辑层实现。

如果您实际上是在询问业务逻辑层应该在哪里，那么这实际上取决于您希望如何构建系统。

听起来（我假设）您指的是经典的 3 层架构：

**UI <--> 业务逻辑 <--> 数据库**

这告诉我们应该将 UI 代码与业务逻辑与数据库逻辑分开。鉴于您的情况，这意味着您应该从任何 PL/SQL 代码块中省略业务逻辑。

# javascript - 如何访问 UI5 事件处理程序中的某些事件参数？

> ID：14728262
> 
> 赞同：-1
> 
> 时间：2013-02-06T11:44:53.707
> 
> 标签：javascript, sapui5

我正在尝试使用 SAPUI5 构建应用程序。现在，我有一个页面，其节点以树的形式列出，并且在中心有一个导航框架。我想根据树中选择的节点在导航框架中加载各种页面。

我尝试通过以下方式处理 JS 事件，但它似乎不起作用。

```
function Tree_Click(oControlEvent){
    alert(oControlEvent.getParameters.node);
}

// Create the Tree control for the MENU block
var MenuTree = new sap.ui.commons.Tree("MenuTree", {select : Tree_Click});
MenuTree.setTitle("Home");
MenuTree.setWidth("100%");
MenuTree.setHeight("auto");
MenuTree.setShowHeaderIcons(true);
MenuTree.setShowHorizontalScrollbar(false);
//create Tree Nodes
var Node1 = new sap.ui.commons.TreeNode("Node_fruit", {
    text: "Fruit",
    expanded: true
});
var Node2 = new sap.ui.commons.TreeNode("Node_veg", {
    text: "Vegetables",
    expanded: true
});
var Node1_1 = new sap.ui.commons.TreeNode("Node_app", {
    text: "Apple",
}); 
var Node2_1 = new sap.ui.commons.TreeNode("Node_carr", {
    text: "Carrot",
});

Node2.addNode(Node2_1);
Node1.addNode(Node1_1);

// Add Tree Node root to the Tree
MenuTree.addNode(Node1);
MenuTree.addNode(Node2);

MenuTree.placeAt("menu_tree"); 
```

警报似乎又回来了`undefined`。
我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T09:13:42.653

尝试：

```
alert(oControlEvent.getParameter("node")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T19:59:14.153

或`oControlEvent.getParameters().node`。

`oControlEvent.getParameters`不带括号的是函数指针，不是函数调用的返回值...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T12:51:38.603

仅供参考：您可以从传递的事件对象中提取更多信息：

```
var oNode = oEvent.getParameters().node;
var nodeId = oNode.sId; //eg "Node_fruit"
var msg = oNode.getProperty("text");   //eg "fruit"
alert("Node id: <" + nodeId + "> \n"+"Node property (text): <"+msg+">"); 
```

# php - 如何打开图像流？

> ID：14728265
> 
> 赞同：0
> 
> 时间：2013-02-06T11:45:04.063
> 
> 标签：php, image

我有一个~~javascript strict~~ PHP 函数，可以让我裁剪图像。

我的问题是生成的图像始终是与裁剪场大小相同的黑色图像，它不包含原始图像的裁剪部分。

我的一个朋友说问题是不加载流图像，但我不确定他的意思，也没有预设任何解决方案来解决我的问题。有谁知道该怎么做？

这是我到目前为止所拥有的：

```
if(isset($_POST['decupata'])){
    $new_width=$_POST['w'];//width of the crop field
    $new_height=$_POST['h'];//height of the crop field
    $x=$_POST['x1']; // x of crop field
    $y=$_POST['y1'];// y of crop field
    $num=$_POST['nume'];//name of the original picture

    $old_width=imagesx("../upload/original/".$num);
    $old_height=imagesy("../upload/original/".$num);

    $min_rand=rand(0,1000);
    $max_rand=rand(100000000000,10000000000000000);
    $new_num=rand($min_rand,$max_rand);

    $new_image = imagecreatetruecolor($new_width, $new_height);
    $image = imagecreatefromjpeg("../upload/original/".$num);
    imagecopyresampled($new_image, $image, 0, 0, $x, $y, $new_width, $new_height, $old_width, $old_height);
    imagejpeg($new_image,"../upload/".$new_num.$num,100);
    header('Location:lista_imagini.php');
}
<form action="<?php $_PHP_SELF ?>" method="post" enctype="multipart/form-data" id="coords">
    <input type="text" size="4" id="x1" name="x1"  />
    <input type="text" size="4" id="y1" name="y1"  />   
    <input type="text" size="4" id="x2" name="x2"  />
    <input type="text" size="4" id="y2" name="y2"  />
    <input type="text" size="4" id="w" name="w"  value="<?php echo $width;?>" />
    <input type="text" size="4" id="h" name="h"  value="<?php echo $height;?>" />
    <input type="text" size="4" id="nume" name="nume"  value="<?php echo $num;?>" />
    <input type="text" size="4"  value="<?php echo $old_width;?>" />

    <input type="submit" name="decupata" value="Adauga imaginea" class="buton">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:52:19.447

您从 url 而不是从创建的图像中获取 imagesy 和 imagex 。首先从此文件中创建图像，例如 imagecreatefromjpeg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:52:29.027

我认为这个问题与加载图像有关。你应该检查路径和目录。根据您的平台注意目录。例如 '\' 和 '/' 在 Linux 、 Unix 和不同版本的 windows 中是不同的

# c++ - 打开文件的字符串变量

> ID：14728266
> 
> 赞同：0
> 
> 时间：2013-02-06T11:45:04.480
> 
> 标签：c++, string, file

我的代码应该打开 100 个文件（并对它们做一些事情），路径中的下一个索引如下：“c:\Naprzeme\NAPRZ100.IN”下一个是“c:\Naprzeme\NAPRZ101.IN”等：

```
for (int as=100;as<159;as++){
    ostringstream ss;
    ss << as;
    string cherk = ss.str();
string supremeCounter = "c:\\Naprzeme\\NAPRZ"+cherk+".IN";
fstream infile(supremeCounter);
//....other code here
} 
```

并`fstream infile(supremeCounter)`返回错误

```
28 31 C:\Users\talent\Documents\File.cpp [Error] no matching
 function for call to     'std::basic_fstream<char>::basic_fstream(std::string&)' 
candidates are: //(here some libs)... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:46:59.937

`fstream infile(supremeCounter.c_str());`

# eclipse - 带有 LWUIT 的 Eclipse 中的 J2ME - 出现异常

> ID：14728275
> 
> 赞同：4
> 
> 时间：2013-02-06T11:45:22.503
> 
> 标签：eclipse, netbeans, java-me, lwuit, lwuit-form

我在 NetBeans 中创建了很多 J2ME 应用程序。现在我想创建

Eclipse 中的 J2ME 应用程序而不是 NetBeans。

所以我是 Eclipse 新手，我已经在 Eclipse 3.7.2 Indigo 中安装了 MTJ 插件

以及用于设备的 J2ME 无线工具包。

我可以创建应用程序然后运行，但是当我使用 LWUIT.jar 和

制作简单的 Hello world 项目然后我无法创建它。

当我选择编译器级别时（Java 中的编译器投诉级别

编译器）到 1.3 然后我得到一个异常，例如，

```
Running with storage root DefaultColorPhone
java.lang.NoClassDefFoundError: com/sun/lwuit/Display
    at HelloMidlet.startApp(+1)
    at javax.microedition.midlet.MIDletProxy.startApp(+7)
    at com.sun.midp.midlet.Scheduler.schedule(+270)
    at com.sun.midp.main.Main.runLocalClass(+28)
    at com.sun.midp.main.Main.main(+116)
Execution completed.
709909 bytecodes executed
4 thread switches
742 classes in the system (including system classes)
3658 dynamic objects allocated (101416 bytes)
2 garbage collections (87640 bytes collected) 
```

当我将其他编译器级别设置为 1.4、1.5、1.6 或 1.7 等其他编译器级别时，我

有一个例外，例如，

```
Running with storage root DefaultColorPhone
Method............: 1016db58 'com/sun/midp/midlet/MIDletState.createMIDlet 

(static)' 
Stack Chunk.......: 194b53c
Frame Pointer.....: 194b5e0
Current IP........: 101f1715 = 101f1707 + offset 14
Previous Frame....: 194b5a8
Previous IP.......: 101d42d4 (offset 52)
Frame size........: 7 (1 arguments, 6 local variables)
Argument[0].......: 194a0d4
Local[1]..........: 194b5a8
Local[2]..........: 101d42d1
Local[3]..........: 194a578
Local[4]..........: 1016d950
Local[5]..........: 194b53c
Local[6]..........: 0
Operand[1]........: 194a0d4

Method............: 1015a558 'com/sun/midp/midlet/Scheduler.schedule 

(virtual)' 
Stack Chunk.......: 194b53c
Frame Pointer.....: 194b5a8
Current IP........: 101d42d4 = 101d42a0 + offset 52
Previous Frame....: 194b574
Previous IP.......: 101dec85 (offset 28)
Frame size........: 7 (2 arguments, 5 local variables)
Argument[0].......: 194a738
Argument[1].......: 1937b98
Local[2]..........: 194a0d4
Local[3]..........: 194b574
Local[4]..........: 101dec81
Local[5]..........: 194b588
Local[6]..........: 1015a478
Operand[1]........: 194a738

Method............: 1016224c 'com/sun/midp/main/Main.runLocalClass (static)' 
Stack Chunk.......: 194b53c
Frame Pointer.....: 194b574
Current IP........: 101dec85 = 101dec69 + offset 28
Previous Frame....: 194b550
Previous IP.......: 101de6fc (offset 116)
Frame size........: 3 (1 arguments, 2 local variables)
Argument[0].......: 194ad1c
Local[1]..........: 1937b98
Local[2]..........: 194b550

Method............: 101621ac 'com/sun/midp/main/Main.main (static)' 
Stack Chunk.......: 194b53c
Frame Pointer.....: 194b550
Current IP........: 101de6fc = 101de688 + offset 116
Previous Frame....: 0
Previous IP.......: 1
Frame size........: 3 (1 arguments, 2 local variables)
Argument[0].......: 194b828
Local[1]..........: 194ad1c
Local[2]..........: 194a114

VM status:
Instruction pointer.: 101f1715 (offset within invoking method: 14)
Next instruction....: 0x4c
Frame pointer.......: 194b5e0
Local pointer.......: 194b5c4
Stack size..........: 256; sp: 194b5f8; ranges: 194b544-194b744;194b270-

194b470;
Contents of the current stack frame:
    194b5c4: 194a0d4 (lp)
    194b5c8: 194b5a8
    194b5cc: 101d42d1
    194b5d0: 194a578
    194b5d4: 1016d950
    194b5d8: 194b53c
    194b5dc: 0
    194b5e0: 194b5a8 (fp)
    194b5e4: 101d42d4
    194b5e8: 194b5c0
    194b5ec: 1016db58
    194b5f0: 194b53c
    194b5f4: 0 (end of frame)
    194b5f8: 194a0d4 (sp)
Execution stack contains 184 items: 
194b828  
194ad1c  
194a114  
0  
1  
194b540  
101621ac  
194b53c  
0  
194ad1c  
1937b98  
194b550  
194b550  
101de6fc  
194b564  
1016224c  
194b53c  
0  
194a738  
1937b98  
194a0d4  
194b574  
101dec81  
194b588  
1015a478  
194b574  
101dec85  
194b588  
1015a558  
194b53c  
0  
194a738  
194a0d4  
194b5a8  
101d42d1  
194a578  
1016d950  
194b53c  
0  
194b5a8  
101d42d4  
194b5c0  
1016db58  
194b53c  
0  
194a0d4  

Execution completed.
707559 bytecodes executed
4 thread switches
740 classes in the system (including system classes)
3583 dynamic objects allocated (99164 bytes)
1 garbage collections (0 bytes collected)
Execution completed.
707559 bytecodes executed
4 thread switches
740 classes in the system (including system classes)
3583 dynamic objects allocated (99164 bytes)
1 garbage collections (0 bytes collected)
ALERT: java/lang/ClassFormatError: Bad version information. 
```

如果您对此有任何想法，请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:45:50.663

保持项目编译器级别为 1.3。

[从http://www.oracle.com/technetwork/java/javame/javamobile/download/lwuit/index.html](http://www.oracle.com/technetwork/java/javame/javamobile/download/lwuit/index.html)下载 Lwit 1.5 版

在 lib 文件夹中，您可以找到 LWUIT_MIDP.jar 确保使用此文件。

**更新**

NoClassDefFoundError: com/sun/lwuit/Display 可能是由 LWUIT jar 未标记为导出库引起的。查看项目属性 .. Java 构建路径 .. 排序和导出。必须标记 LWUIT_MIDP.jar。

# nsis - 未翻译的LangString 怎么可以使用默认语言？

> ID：14728283
> 
> 赞同：2
> 
> 时间：2013-02-06T11:45:44.460
> 
> 标签：nsis

我的安装必须支持多种语言，但我不能绝对翻译所有消息。未翻译消息时如何使用默认语言？

例如：

```
!insertmacro MUI_LANGUAGE "English" 
!insertmacro MUI_LANGUAGE "Spanish" 
!insertmacro MUI_LANGUAGE "TradChinese" 
!insertmacro MUI_LANGUAGE "SimpChinese"

LangString EMBEDED ${LANG_ENGLISH} "Installation single user" 
LangString EMBEDED ${LANG_SPANISH} "Instalación usuario único" 
```

我希望如果安装是繁体中文，EMBEDED 字符串将使用英文翻译，因为中文没有 EMBEDED。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T22:41:23.127

`LangFile.nsh`包含帮助程序代码来创建具有后备支持的语言文件（由 MUI 等使用），但每种语言都必须位于单独的 .nsh 文件中。

如果要将所有翻译保留在 .nsi 中，则必须制作自己的自定义宏：

```
!macro MyLangInit lnam nlf
!ifndef MYLANG
    !define MYLANG ${lnam}
    !ifndef MYLANG_${lnam}
        !define MYLANG_${lnam}
        LoadLanguageFile "${NSISDIR}\Contrib\Language files\${nlf}.nlf"
        !ifndef LANG_${lnam}
            !define LANG_${lnam} ${LANG_${nlf}}
        !endif
    !endif
!endif
!macroend
!define MyLangInit "!insertmacro MyLangInit "
!macro MyLangSet mode nam str
!ifndef MYLANG_${MYLANG}_${nam}
    !define MYLANG_${MYLANG}_${nam} "${str}"
!else
    !if ${mode} != 0
        !ifdef MYLANG_${MYLANG}_${nam}
            LangString ${nam} "" "${MYLANG_${MYLANG}_${nam}}"
            !undef MYLANG_${MYLANG}_${nam}
        !endif
    !endif
!endif
!macroend
!macro MyLangLoad lnam
!define MyLangSet "!insertmacro MyLangSet 0 "
!insertmacro ${lnam}
!insertmacro ${MYLANG_FALLBACK}
!undef MyLangSet
!define MyLangSet "!insertmacro MyLangSet 1 "
!insertmacro ${lnam}
!insertmacro ${MYLANG_FALLBACK}
!undef MyLangSet
!undef MYLANG
!macroend

!macro English
${MyLangInit} English English
${MyLangSet} foo "bar"
${MyLangSet} bar "baz"
!macroend

!macro Bork
${MyLangInit} Bork Swedish ; Based on Swedish
${MyLangSet} foo "bork"
; Missing: ${MyLangSet} bar "barkz"
!macroend

!macro Danish
${MyLangInit} Danish Danish
; All strings are missing!
!macroend

!define MYLANG_FALLBACK English ; Language to use for missing strings
!insertmacro MyLangLoad Bork
!insertmacro MyLangLoad Danish
!insertmacro MyLangLoad English

Function .onInit
StrCpy $LANGUAGE ${LANG_BORK} ; TODO: Use LangDLL or some algorithm to select the language here
FunctionEnd

Section
SetDetailsView show
DetailPrint LangId=$LANGUAGE
DetailPrint "$(foo)"
DetailPrint "$(bar)"
SectionEnd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:50:58.343

我在 NSIS 论坛上问了同样的问题，但没有成功。最后，我创建了一个小的 Perl 脚本，它解析我的 NSIS 代码并检测包含的语言和所有语言字符串，检测丢失的翻译，并创建初始化为默认语言的语言字符串：

```
#!/usr/bin/perl
#
# filltranslationgaps.pl 

# Get list of included languages
my $tmp = uc(`grep "^!insertmacro MUI_LANGUAGE" installer.nsi |grep -v ";" |cut -f2 -d\\"`);
my @lang = split(/\n/, $tmp);
my $DEFAULTLANGUAGE = $lang[0];

# Get langstrings
open( $fh, "<installer.nsi");
while (<$fh>) {
        if (/LangString *(.*?) *\${LANG_(.*?)} *\"(.*)\"/)  {
                $phrases{$1}{$2}=$3;
        }
}
close $fh;

# Foreach Langstring, check if it's defined in all included languages.
foreach my $k (keys %phrases) {
        foreach my $j (@lang) {
                if (not defined $phrases{$k}{$j}) {
                        #print "MISSING PAIR: $k\t$j\n";
                        print "LangString $k \${LANG_$j} \"$phrases{$DEFAULTLANGUAGE}{$j}\"\n";
                }
        }
} 
```

我的编译脚本：

```
#/bin/sh
perl filltranslationgaps.pl >missingphrases.nsi
makensis installer.nsi 
```

在installer.nsi 我需要包含生成的nsi：

```
!include  missingphrases.nsi 
```

希望能帮助到你。

# css - 如何在所有浏览器中设置占位符属性的样式？

> ID：14728285
> 
> 赞同：10
> 
> 时间：2013-02-06T11:45:47.410
> 
> 标签：css, html

我有这样的元素`<input type="text" placeholder="lorem ipsum">`。

如何`placeholder`在 CSS 中设置此属性的样式，使其适用于所有浏览器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T11:59:25.897

输入中的占位符文本（在目前实现它的浏览器中）是浅灰色的。要设置样式，您需要供应商前缀 CSS 属性。

```
::-webkit-input-placeholder {
   color: red;
}

:-moz-placeholder { /* Firefox 18- */
   color: red;  
}

::-moz-placeholder {  /* Firefox 19+ */
   color: red;  
}

:-ms-input-placeholder {  
   color: red;  
} 
```

您也可以检查这个非常相似的问题：

*   [使用 CSS 更改 HTML5 输入的占位符颜色](https://stackoverflow.com/questions/2610497/change-an-inputs-html5-placeholder-color-with-css)

# windows-phone-8 - 更新推送通知中的辅助磁贴

> ID：14728287
> 
> 赞同：1
> 
> 时间：2013-02-06T11:45:54.983
> 
> 标签：windows-phone-8

我研究了一个示例，并使用服务中的磁贴通知更新了辅助磁贴。我在磁贴通知的 xml 内容中包含了“id”

特定的瓷砖已更新，很好。我有一个疑问

1.  我们可以同时更新辅助磁贴和应用磁贴吗？

2.  如果用户没有固定辅助磁贴，那么特定磁贴的更新通知会被浪费吗？

# java - 导入 google-play-service 依赖 red cross

> ID：14728293
> 
> 赞同：12
> 
> 时间：2013-02-06T11:46:29.483
> 
> 标签：java, android, eclipse, google-maps, google-play-services

我是法国人，我会使用“google-play-service”，所以我按照[官方网站上的程序在此处](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)和[此处使用谷歌](http://developer.android.com/google/play-services/setup.html)

我在这一步被阻止了：

> 要将对 Google Play 服务的依赖项添加到您的项目项目 -> 属性 -> Android -> 库中，添加 -> google-play-services_lib "

我解释：通常“依赖”必须是左侧的“绿色检查”。

按下“应用”按钮后，“绿色检查”始终为绿色，但是当我离开窗口（按下“确定”按钮）并返回此窗口时（鼠标右键>属性>Android）我没有一个“绿色检查”，但我现在有一个“红十字”（shoot3）......我不明白为什么？

你有同样的问题吗？

[截图一](https://www.dropbox.com/s/xb5ds5so324lol4/shoot1.PNG)、[截图二](https://www.dropbox.com/s/b2cexn5zc8fluex/shoot2.PNG)、[截图三](https://www.dropbox.com/s/gly02xee2ckqix7/shoot3.PNG)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T17:58:22.647

尝试将`google-play-services_lib`next 复制到项目目录并从那里打开它。

此外，您不必再使用 Google Api - 您可以使用 Android Api。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-28T11:12:46.273

**我也有同样的问题。谷歌播放服务的位置和你的项目应该是相同的。**

如果 Google Play 服务在您的工作空间中，那么也将您的项目移至工作空间。

**将项目移动到工作空间：**导入项目并检查复制到工作空间！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T13:50:08.237

可能会出现以下错误之一： 1\. 路径错误 2\. 由于您已经导入了项目，所以如果您错误地从工作区中删除了这个导入的项目，并且在删除时勾选了从磁盘删除内容，它会删除所有文件android-sdk\extras\google\google_play_services\libproject\google-play-services_lib。在这种情况下，从 sdk 管理器重新安装 google 服务。3.在导入项目时不要忘记选中“将项目复制到工作区”框

# c# - 检查字符串是否包含列表中的所有输入

> ID：14728294
> 
> 赞同：12
> 
> 时间：2013-02-06T11:46:32.387
> 
> 标签：c#

我希望能够检查字符串是否包含列表中的所有值；因此，如果您的答案中包含列表中的所有“关键词”，它只会给您一个“正确答案”。这是我累了一半失败的东西；（不检查所有数组，只接受一个）。代码我累了：

```
 foreach (String s in KeyWords)
        {
            if (textBox1.Text.Contains(s))
            {
                correct += 1;
                MessageBox.Show("Correct!");
                LoadUp();
            }
            else
            {
                incorrect += 1;
                MessageBox.Show("Incorrect.");
                LoadUp();
            }
        } 
```

基本上我想做的是：

> 问：心理学的定义是什么？

arraylist中的关键词：**学习，心理过程，行为，人**

> 答：心理学是对**人类****心理过程**和**行为**的**研究**

 ******现在，当且仅当上面的答案包含所有关键词时，我的代码才会接受答案。我希望我已经清楚这一点。

**编辑：**谢谢大家的帮助。所有答案都已投票，我感谢大家的快速回答。我投票赞成可以轻松适应任何代码的答案。:)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-06T11:50:32.420

使用 LINQ：

```
// case insensitive check to eliminate user input case differences
var invariantText = textBox1.Text.ToUpperInvariant();
bool matches = KeyWords.All(kw => invariantText.Contains(kw.ToUpperInvariant())); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T11:53:20.630

这应该有助于：

```
 string text = "Psychology is the study of mental process and behaviour of humans";
 bool containsAllKeyWords = KeyWords.All(text.Contains); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T11:50:07.637

您可以使用一些 LINQ 方法，例如：

```
if(Keywords.All(k => textBox1.Text.Contains(k))) {
   correct += 1;
   MessageBox.Show("Correct");
} else {
   incorrect -= 1;
   MessageBox.Show("Incorrect");
} 
```

当函数为列表中的所有项目返回 true 时，该[`All`](http://msdn.microsoft.com/en-us/library/bb534754.aspx)方法返回 true。******

# html - reqest.getParameter() 为 JSP 中的选择框返回 null

> ID：14728297
> 
> 赞同：1
> 
> 时间：2013-02-06T11:46:36.160
> 
> 标签：html, jsp, jstl

我在 jsp 文件（在 Adob​​e CQ 上）中有以下代码，但是它返回 null。不知道为什么。我期望 out.println 行返回 40，因为它是默认选择值。

```
<select id="itemsperpage" name="itemsperpage">
<option value="20">20</option>
<option value="40" selected>40</option>
<option value="100">100</option>
<option value="200">200</option>
</select>
<%
String itemsPerPage = request.getParameter("itemsperpage");
out.println("Items: " + itemsPerPage );
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:51:14.050

您的代码将始终返回`null`。`page source`运行您的应用程序后尝试查看。的值`Items`始终是`null`。

尝试以下代码：（在此代码中，每次更改组合框的值时我都会发送请求）

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body onload="form1.submit();">
<form action="#" name="form1">
<select id="itemsperpage" name="itemsperpage" onchange="submit();">
<option value="20">20</option>
<option value="40" selected>40</option>
<option value="100">100</option>
<option value="200">200</option>
</select>
</form>
<%
String itemsPerPage = request.getParameter("itemsperpage");
out.println("Items: " + itemsPerPage );
%>
</body>
</html> 
```

[注意：我建议你不要`scriplets`在你的 jsp 文件中使用，你可以使用 AJAX 、 JSTL 等。]

# magento - 在 Magento 后端获取客户地址详细信息

> ID：14728300
> 
> 赞同：0
> 
> 时间：2013-02-06T11:46:54.903
> 
> 标签：magento, backend

对于我的 magento 后端，我需要一个包含不同客户信息的链接。所以我想从后端获取特定的信息，但我不知道如何。我已经查看了 adminhtml/.../template/sales/order/view/info.phtml 并找到了以下行：

```
<?php echo $this->htmlEscape($_order->getCustomerName()) ?> 
```

这很好，但我需要客户名称、-街道、-邮政编码、城市的不同变量来建立这样的链接：www.domain.de/category&name=CustomerName&Street=CustomerStreet& ....我怎样才能得到这些变量？非常感谢每一个回答！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:10:32.210

客户理论上可以有很多地址。如果您需要随订单提供的账单地址，请使用

```
$address = $order->getBillingAddress() 
```

这将返回一个`Mage_Sales_Model_Order_Address`类型的对象，您可以通过它访问其属性

```
$address->getCity()
$address->getStreet() 
```

等等

否则，您可以通过调用获取客户的默认帐单地址

```
$address = $order->getCustomer()->getPrimaryBillingAddress() 
```

您还可以访问整个客户地址集合：

```
$customerAddresses = $customer->getAddressesCollection() 
```

# css - 找不到样式表文件

> ID：14728304
> 
> 赞同：6
> 
> 时间：2013-02-06T11:47:02.567
> 
> 标签：css, jsf-2

尝试使用以下标记在 JSF2 中包含样式表

```
<h:outputStylesheet name="css/test.css"  /> 
```

但是它没有选择，样式表的目录结构如下

> WebContent-->css-->test.css

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T11:49:40.313

( `<h:outputStylesheet>`and `<h:outputScript>`and `<h:graphicImage>`) 引用特殊`/resources`子文件夹中的 JSF 资源。只需创建该子文件夹并将您`css/test.css`的放入其中。

```
WebContent
 |-- resources
 |    `-- css
 |         `-- test.css
 : 
```

然后你可以继续使用

```
<h:outputStylesheet name="css/test.css"  /> 
```

### 也可以看看：

*   [如何在 Facelets 模板中引用 CSS / JS / 图片资源？](https://stackoverflow.com/questions/8367421/how-to-reference-resource-in-facelets-template/8368727#8368727)

# c - 为什么我需要分配内存？

> ID：14728307
> 
> 赞同：0
> 
> 时间：2013-02-06T11:47:08.700
> 
> 标签：c, arrays, pointers, malloc, printf

```
#include<stdio.h>
#include<stdlib.h>

void main()
{
char *arr;
arr=(char *)malloc(sizeof (char)*4);
scanf("%s",arr);
printf("%s",arr);
} 
```

在上面的程序中，我真的需要分配 arr 吗？即使不使用 malloc，它也会给我结果。我的第二个疑问是'我期待第 9 行出现错误，因为我认为它必须是 printf("%s",*arr); 或者其他的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T11:48:29.030

> 我真的需要分配arr吗？

是的，否则您将取消引用未初始化的指针（即写入随机的内存块），这是**未定义的行为**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:04:41.937

就个人而言，我认为这是分配内存的一个非常糟糕的例子。

在现代操作系统/编译器中， A`char *`将占用至少 4 个字节，而在 64 位机器上，将占用 8 个字节。因此，您使用四个字节来存储三个字符串的四个字节的位置。不仅如此，malloc 还会产生开销，这可能会给实际分配的内存增加 16 到 32 个字节。因此，我们使用 20 到 40 个字节来存储 4 个字节。这比实际需要的多5-10倍。

该代码还强制转换 malloc，这在 C 中是错误的。

并且缓冲区中只有四个字节，`scanf`溢出的可能性很大。

最后，没有调用`free`将内存返回给系统。

使用会更好：

```
int len;
char arr[5];
fgets(arr, sizeof(arr), stdin);
len = strlen(arr);
if (arr[len] == '\n') arr[len] = '\0'; 
```

这不会溢出字符串，并且只使用 9 个字节的堆栈空间（不计算任何填充...），而不是 4-8 个字节的堆栈空间和更多的堆空间。我在数组中添加了一个额外的字符，以便它允许换行。还添加了代码以删除 fgets 添加的换行符，否则有人会抱怨这一点，我敢肯定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:10:50.200

*   `In the above program, do I really need to allocate the arr?`

你打赌你会的。

* * *

*   `It is giving me the result even without using the malloc.`

当然，这完全有可能……`arr`是一个指针。它指向一个内存位置。在你对它做任何事情之前，它是未初始化的......所以它指向一些随机内存位置。这里的关键是它指向的地方是你的程序不能保证拥有的地方。这意味着您可以在指向该值`scanf()`的那个随机位置执行 and ，但是另一个程序可以覆盖该数据。`arr`

当您说`malloc(X)`您是在告诉计算机您需要 X 字节的内存供您自己使用时，其他人无法触及。然后，当`arr`捕获数据时，它将安全地供您使用，直到您调用`free()`（*顺便说一句，您忘记在程序中执行此操作*）

这是一个很好的例子，说明为什么`NULL`在创建指针时应该始终初始化指针……它提醒您，您不拥有它们所指向的东西，最好在使用它们之前将它们指向有效的东西。

* * *

*   `I am expecting an error in 9th line because I think it must be printf("%s",*arr)`

不正确。`scanf()`想要一个地址，这就是`arr`指向的东西，这就是为什么你不需要这样做：`scanf("%s", &arr)`。而 printf 的 "%s" 具体需要一个字符数组（一个指向字符串的指针），这又是什么`arr`，所以不需要尊重。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T18:26:27.583

> 我真的需要分配arr吗？

您需要设置`arr`为指向您拥有的一块内存，方法是调用`malloc`或将其设置为指向另一个数组。否则，它指向一个随机内存地址，您可能访问也可能无法访问。

在 C 中，`malloc`不鼓励使用¹的结果；`stdlib.h`这是不必要的，并且在某些情况下，如果您忘记包含或没有范围内的原型，可能会掩盖错误`malloc`。

我通常建议`malloc`调用写成

```
T *ptr = malloc(N * sizeof *ptr); 
```

where`T`是您使用的任何类型，并且`N`是您要分配的该类型的元素数。 `sizeof *ptr`等效于`sizeof (T)`，因此如果您更改`T`，则无需在`malloc`调用本身中复制该更改。只是少了一个维护头痛。

> 即使不使用 malloc，它也会给我结果

因为您没有在声明中显式初始化它，所以 的初始`arr`值为*indeterminate* ²；它包含一个随机位串，该位串可能对应于一个有效的可写地址，也可能不对应。尝试通过无效指针读取或写入的行为是*undefined*，这意味着编译器没有义务警告您您正在做一些危险的事情。未定义行为的可能结果之一是您的代码*似乎*按预期工作。在这种情况下，您似乎正在访问一个随机的内存段，该段恰好是可写的并且不包含任何重要的内容。

> 我的第二个疑问是'我期待第 9 行出现错误，因为我认为它必须是 printf("%s",*arr); 或者其他的东西。

`%s`转换说明符告诉相应的`printf`参数是 type `char *`，所以`printf("%s", arr);`是正确的。如果您使用了`%c`转换说明符，那么是的，您需要`arr`使用`*`运算符或下标取消引用，例如`printf("%c", *arr);`or `printf("%c", arr[i]);`。

此外，除非您的编译器文档明确将其列为有效签名，否则*不应*将其定义`main`为`void main()`; 使用`int main(void)`或`int main(int argc, char **argv)`代替。

* * *

^(1\. C++ 中需要强制转换，因为 C++ 不允许您在`void *`没有显式强制转换的情况下将值分配给其他指针类型)
^(2\. 对于在块范围内声明的指针也是如此。在文件范围（在任何函数之外）或使用`static`关键字声明的指针被隐式初始化为 NULL。)

# java - Java - 当前线程完成时启动一个线程

> ID：14728308
> 
> 赞同：2
> 
> 时间：2013-02-06T11:47:08.953
> 
> 标签：java, multithreading

当前运行的线程退出时是否可以启动新线程？我为框架编写的代码启动了一个线程并锁定（不是 java 并发锁定）一个文件。我需要处理同一个文件，但我不能这样做，因为锁是由框架启动的线程持有的。我的要求是在框架启动的线程完成后启动一个新线程来处理文件

谢谢，森希尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:02:25.120

使用 Thread.join() 方法
参考[示例](http://javahowto.blogspot.co.uk/2007/05/when-to-join-threads.html)

参考[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T20:51:06.240

这是一个在另一个线程结束时启动第二个线程的示例：

```
public class TwoThreads {

    public static void main(String[] args) {

        class SecondThread implements Runnable {
            @Override
            public void run() {
                System.out.println("Start of second thread");

                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) { }

                System.out.println("End of second thread");
            }
        }

        class FirstThread implements Runnable {
            @Override
            public void run() {
                System.out.println("Start of first thread");

                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) { }

                // Second thread gets launched here
                new Thread(new SecondThread()).start();

                System.out.println("End of first thread");
            }
        }

        new Thread(new FirstThread()).start();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:01:32.883

你的基本代码结构应该和他的一样

```
public void run(){
//prepare
synchronized{
//Access File
}
//non-trivial statements
} 
```

# ios - iPhone app 中集成 Tapjoy sdk 后，如何在 UiViewcontroller 中展示广告、视频？

> ID：14728309
> 
> 赞同：3
> 
> 时间：2013-02-06T11:47:10.337
> 
> 标签：ios, uiviewcontroller, sdk, ads, tapjoy

在我的 iPhone 应用程序中，我必须集成 Tapjoy SDK，并且想要显示广告、视频。在 Tapjoy SDK 演示中，他们只显示连接状态，而广告、视频呢？如何在 UiViewController 中显示这个？我需要向我的项目经理展示我的应用演示，但我在 Tapjoy 上没有得到任何解决方案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:27:59.580

在开始展示广告之前，您需要在应用中设置货币。如果您的应用没有虚拟货币，您需要设置非奖励货币并将该 ID 传递给我们的服务器，然后才能展示广告。您还应该将您的设备添加到货币的测试设备列表中。您的应用无需在应用商店中发布即可测试广告是否正确显示。

发布者 SDK 应该包含一个示例应用程序供您查看。您也可以访问我们的知识中心了解更多信息 ( [https://knowledge.tapjoy.com/en/integration/getting-started-guide-for-publishers](https://knowledge.tapjoy.com/en/integration/getting-started-guide-for-publishers) )。

# php - 以编程方式创建显示缺货的可下载产品

> ID：14728314
> 
> 赞同：2
> 
> 时间：2013-02-06T11:47:26.803
> 
> 标签：php, magento, magento-1.7

我在 magento 1.7 中创建了可下载的产品。它创建成功，但它显示`Availability: Out of stock`在产品视图页面上。我必须从管理面板保存产品以使其可用

我的代码如下

```
Mage::getSingleton("core/session", array("name" => "frontend"));

    $storeId = Mage::app()->getStore()->getId(); // get store id

    $filePath = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA);

    try {
        $product = Mage::getModel('catalog/product');
        $product->setStoreId($storeId);
        $product->setWebsiteIds(array(
                Mage::app()->getStore($storeId)->getWebsiteId()));
        $product->setAttributeSetId(4);
        $product->setHasOptions(4);
        $product->setTypeId('downloadable');
        $product->setSku(date('YmdHis'));
        $product->setPrice('1.23');
        $product->setStatus(1);
        $product->setVisibility(4);
        $product->setTaxClassId(0);
        $product->setStockData(array('is_in_stock'=>0, 'qty' => 1));
        $product->setLinksPurchasedSeparately(0);
        $product->setEnableGooglecheckout(0);
        $product->setIsImported(0);
        $product->setLinksExist(false);
        $product->setDescription($desc);
        $product->setShortDescription($desc); //added, meta description to 'short description' field, you can change this value
        $product->setMetaKeyword($desc);
        $product->setCustomLayoutUpdate(NULL);
        $product->setName($album_name."-".date('ymdis'));
        $product->setMetaTitle($desc);
        $product->setMetaDescription($desc);
        $product->setLinksTitle("Download");

        $product->setStockData(array(
                'use_config_manage_stock' => 1, 
                'qty' => 1, 
                'min_qty' => 0, 
                'use_config_min_qty' => 0, 
                'min_sale_qty' => 0, 
                'use_config_min_sale_qty' => 0, 
                'max_sale_qty' => 0, 
                'use_config_max_sale_qty' => 1, 
                'is_qty_decimal' => 0, 
                'backorders' => 0, 
                'notify_stock_qty' => 0, 
                'is_in_stock' => 1
        ));

        $linkfile = array();
        $samplefile = array();
        $_highfilePath = "/highresolution/".$album_name."/" . $fname;
        $_samplefilePath = "/lowresolution/".$album_name."/" . $fname;

        $paths = array('highurl' => $_highfilePath, 'sampleurl' => $_samplefilePath);
        $samplefile[] = array(
                'file' => $_samplefilePath,
                'name' => $fname,
                'size' => $files['size'][0],
                'status' => 'new'
        );

        $linkfile[] = array(
                'file' => $_highfilePath,
                'name' => $fname,
                'size' => $files['size'][0],
                'status' => 'new'
        );

        $tmpBasePath = Mage::getBaseDir('media') . DS . 'highresolution' . DS . $album_name;
        $tmpSampleBasePath = Mage::getBaseDir('media') . DS . 'lowresolution' . DS . $album_name;

        $BashPathUrl = $filePath.'highresolution/'.$album_name.'/'.$fname;
        $SamplePathUrl = $filePath.'lowresolution/'.$album_name.'/'.$fname;

        $product->addImageToMediaGallery($tmpSampleBasePath. DS. $fname, array ('image','small_image','thumbnail'), false, false);
        $product->save();

        $linkFileName = Mage::helper('downloadable/file')->moveFileFromTmp(
                Mage_Downloadable_Model_Link::getBaseTmpPath(),
                Mage_Downloadable_Model_Link::getBasePath(),
                $linkfile
        );

        $linkModel = Mage::getModel('downloadable/link')->setData(array(
                'product_id' => $product->getId(),
                'sort_order' => 0,
                'number_of_downloads' => 0, // Unlimited downloads
                'is_shareable' => 2, // Not shareable
                'link_url' => '',
                'link_type' => 'file',
                'link_file' => json_encode($linkfile),
                'sample_url' => $SamplePathUrl,
                'sample_file' => json_encode($samplefile),
                'sample_type' => 'url',
                'use_default_title' => false,
                'title' => 'downloadable link',
                'default_price' => 0,
                'price' => 0,
                'store_id' => 0,
                'website_id' => $product->getStore()->getWebsiteId(),
        ));

        $linkModel->setLinkFile($linkFileName)->save();
        return $product->getProductUrl();
    } catch (Exception $e) {
        echo "Exception : ".$e->getMessage();
        exit;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:45:53.257

在您的代码中：

```
'min_qty' => 1, 
```

表示设置“物品状态变为缺货的数量”，因此如果与“数量”具有相同的值，则会显示“缺货”。增加数量或将此值减少到 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:06:38.310

我已经改变了它并且它正在工作

首先删除此代码

```
$product->setStockData(array(
            'use_config_manage_stock' => 1, 
            'qty' => 1, 
            'min_qty' => 0, 
            'use_config_min_qty' => 0, 
            'min_sale_qty' => 0, 
            'use_config_min_sale_qty' => 0, 
            'max_sale_qty' => 0, 
            'use_config_max_sale_qty' => 1, 
            'is_qty_decimal' => 0, 
            'backorders' => 0, 
            'notify_stock_qty' => 0, 
            'is_in_stock' => 1
    )); 
```

然后添加以下代码

```
$product->save();
$stockItem = Mage::getModel('cataloginventory/stock_item')->loadByProduct($product->getId());
$stockItemId = $stockItem->getId();
$stock = array();
if (!$stockItemId) {
    $stockItem->setData('product_id', $product->getId());
    $stockItem->setData('stock_id', 1);
} else {
        $stock = $stockItem->getData();
}
$stockItem->setIsInStock(1);
$stockItem->save(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T00:26:15.300

您是否检查了项目状态为缺货的数量的后端设置：如果设置为大于 1，那么您的项目将显示缺货。您可以检查的另一件事

干杯

# windows-phone-7 - Windows Phone 互斥锁问题

> ID：14728316
> 
> 赞同：0
> 
> 时间：2013-02-06T11:47:27.030
> 
> 标签：windows-phone-7, mutex

我对互斥体进行了一些研究，但找不到任何值得澄清我想要的东西的东西。我可以轻松地在 Linux 上使用互斥锁。但我不知道为什么我的互斥锁不能在我的应用程序上工作。我还找了一些例子，并实现了它。但没办法；

这是我的互斥量初始化；

```
public static Mutex mutex = new Mutex(true,"mut"); 
```

在这里我用我的互斥锁来锁定；

```
private void button4_Click(object sender, RoutedEventArgs e) //Challenge Start/Stop
        {

            StartLocationService(GeoPositionAccuracy.High);
            mutex.WaitOne();
            mutex.WaitOne();

                MessageBox.Show("I'm in mutex");
///...
        } 
```

我这样做只是为了看看我的应用程序是否关心互斥锁。但没有办法，我的应用程序显示“IM in mutex”消息，而没有从某处获得任何释放信号。通常，必须有死锁，但没有。

我想要做的是，在 StartLocationService 完全完成之前，我不希望出现该消息。我也试过 mutex.ReleaseMutex(); 在 StartLocationService 函数的末尾。但它也没有奏效。

我希望信号量存在于 WP 中。

请帮我; 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:51:10.393

您没有死锁，因为您为互斥锁的第一个参数传递了“真”，这意味着互斥锁最初归创建它的线程所有。也就是说，你的主线程。

对于您的示例，您必须做的是将构造函数的参数设置为 False，然后调用`mutex.WaitOne()`. 这应该有效地阻止您的主线程。然后，`mutex.ReleaseMutex()`在方法结束时调用`StartLocationService`。

现在这是理论。我不建议你这样做，因为主线程是 UI 线程。这意味着在定位服务完成初始化之前，UI 将变得无响应，这是糟糕的 UX。您应该显示某种加载屏幕，并在`StartLocationService`方法结束时将其隐藏。

请注意，您可以使用[ManualResetEvent](http://msdn.microsoft.com/en-us/library/vstudio/system.threading.manualresetevent%28v=vs.95%29.aspx)代替互斥锁。最终结果将是相同的，但使用起来可能更直观一些。

# javascript - 是否可以动态更改 Youtube Player 参数？

> ID：14728317
> 
> 赞同：0
> 
> 时间：2013-02-06T11:47:30.477
> 
> 标签：javascript, youtube-api

我正在为我的项目摆弄 Youtube API ，尤其是[iFrame API](https://developers.google.com/youtube/iframe_api_reference)。我想做的是仅在播放时显示播放器控件，而不是在停止或暂停时显示。我已经搜索了该功能的所有 API，但似乎只能通过破坏并创建一个新的来更改播放器的外观。

那么问题来了，这是真的吗？或者我还能以某种方式改变播放器吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:55:48.363

我 99% 确信你只能通过“摧毁”它并重新开始来做到这一点。正如您所说[，文档中没有提及它，](https://developers.google.com/youtube/)并且参数是在加载时发送的，因此您必须以某种方式重新发送它们，并且不允许回复更改视频。

我唯一建议的是，您能否使用 API 跟踪视频中发生更改的时间，然后使用新参数重新加载页面并从您离开的地方开始播放视频？

# php - PHP 拒绝在子目录中运行

> ID：14728318
> 
> 赞同：0
> 
> 时间：2013-02-06T11:47:36.947
> 
> 标签：php, apache, opensuse

```
cat /etc/issue
Welcome to openSUSE 12.1 "Asparagus" - Kernel \r (\l). 
```

当 Apache 为我提供服务时`/srv/www/htdocs/phpinfo.php`，我得到了预期的输出，但是如果我将其移动到`/srv/www/htdocs/test/phpinfo.php`突然 Apache 直接在浏览器中为我提供 PHP 代码，就像 Apache 根本不识别（或更可能忽略）它是 PHP 代码一样。

我能做些什么来解决这个问题？我试过用谷歌搜索一下，我相当肯定它与 Apache 设置有关，但我不知道从哪里开始。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:53:50.563

我之前在 Ubuntu 服务器上遇到过这个问题，并创建了一篇关于它的博客文章供我参考，我认为你在你的 mods_available 中遇到了同样的问题。

这是博客文章，请让我知道您尝试后得到了什么[http://www.anchorx.com/ali/2011/02/23/ubuntu-server-not-pasring-php/](http://www.anchorx.com/ali/2011/02/23/ubuntu-server-not-pasring-php/)

# django - 将数据从模板发送到视图 django

> ID：14728319
> 
> 赞同：1
> 
> 时间：2013-02-06T11:47:36.893
> 
> 标签：django, django-templates

在我的应用程序中，显示有关条目的数据，详细说明了它们的信息。您可以通过超链接在条目之间导航。到目前为止的代码：

```
<a href="/parks/{{ park.id }} ">{{park.name}}</a> 
```

处理这件事已经足够了。id 在 urls.py 和 views.py 中捕获

我现在面临的问题是处理我的“位置”条目。位置的示例是“欧洲、英国”、“美国、纽约”。我知道：

```
<a href="/parks/{{ park.location }} ">{{park.location}}</a> 
```

和：

```
url(r'^location/(?P<park_location>\d+)$', Location_Main), 
```

由于空格和逗号等原因，无法正常工作。

我将如何解决这个问题？我还想要“位置”视图和“位置”网址来处理母公司的位置说（）

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T12:42:22.953

为什么不通过 pass`park.id`然后在 view 中获取 park 对象然后获取它的位置：

网址：

```
url(r'^location/(?P<park_id>\d+)$', Location_Main, name="park_location"), 
```

模板：

```
<a href="{% url park_location park.id %}">{{park.location}}</a> 
```

风景：

```
def Location_Main(request, park_id):
    park = get_object_or_404(Park, pk=park_id)
    location = park.location 
```

或者将位置作为`GET`参数发送：

网址：

```
url(r'^location/$', Location_Main, name="park_location"), 
```

模板：

```
<a href="{% url park_location %}?location={{park.location}}">{{park.location}}</a> 
```

风景：

```
def Location_Main(request):
    location = request.GET.get('location') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:55:08.893

```
 url(r'^location/(?P<park_location>[a-zA-Z0-9_.-]+)/$', Location_Main), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:55:35.810

在网址中使用它们之前，您需要从位置名称中删除标点符号和非英语字符。或者，您可以在定义时删除它们`park.location`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T12:17:56.183

您可以使用`urlencode`模板过滤器将字符转义为

```
<a href="/parks/{{ park.location|urlencode }} ">{{park.location}}</a> 
```

参考[这个问题](https://stackoverflow.com/questions/3675368/django-url-pattern-for-20)，您可能必须将 url 模式更改为

```
url(r'^location/(?P<park_location>[\w|\W]+)$', Location_Main) 
```

# c# - 如何从 boo 调用 c# 中定义的函数？

> ID：14728323
> 
> 赞同：2
> 
> 时间：2013-02-06T11:47:46.500
> 
> 标签：c#, boo

我在`Boo`需要运行用户定义脚本的 C# 程序中用作脚本引擎。如何从`Boo`脚本内部调用在我的 C# 代码中定义的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:11:37.100

您应该使用定义必要方法的类导入程序集。比创建类的实例并调用方法，或者如果它是静态的就调用它。如果您使用 Rhino DSL，另一种方法是将函数调用添加到隐式基类。无论如何，了解更多细节会很好。

# r - 从 Github 安装时，包中缺少 Collat e 字段中的文件

> ID：14728326
> 
> 赞同：6
> 
> 时间：2013-02-06T11:48:04.573
> 
> 标签：r, build, package

注意：我在这里交叉发布了这个问题：[https ://github.com/hadley/devtools/issues/245](https://github.com/hadley/devtools/issues/245)

更新：@hadley 刚刚关闭了这个问题，因为他现在可以安装了。我刚刚对其进行了测试，并且也`install_github`可以在 Windows 上运行。显然我需要等待一段时间让 Github 存档包含新提交的更改。对于遇到同样问题的人，@hadley 指出我在 R/ 中有 .R 和 .r 文件，并且 DESCRIPTION collat​​e 中的所有文件都有 .r 扩展名。

我正在编写一个 R 包并将其放在 Github 上。我可以在自己的计算机上构建和加载。但是，运行后`install_github("KineticEval",username="zhenglei-gao")`，我收到以下错误：

```
* installing *source* package 'KineticEval' ...
** R
Error in .install_package_code_files(".", instdir) : 
files in 'Collate' field missing from 'C:/Users/z.gao/AppData/Local/Temp/RtmpUzWWYn    /R.INSTALLd3c17515a0/KineticEval/R':
  kingraph.r
  kinplot.r
  FOCUS2006A.r
  FOCUS2006B.r
  FOCUS2006C.r
  FOCUS2006D.r
  modFit1.r
  IRLSkinfit.full.r
  mkinfit.full.r
ERROR: unable to collate and parse R files for package 'KineticEval'
* removing 'C:/Users/z.gao/R-dev/KineticEval' 
```

这里有一个相关问题：[从不正确的 .Rbuildignore 文件构建后，包中缺少整理字段中的文件](https://stackoverflow.com/questions/11729592/files-in-collate-field-missing-from-package-after-build-from-incorrect-rbuildig)

但我无法弄清楚该错误是否也与我的 .Rbuildignore 文件有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T21:51:59.970

对于遇到同样问题的人，Hadley（来自 Github）指出我在 R/ 中有 .R 和 .r 文件，并且 DESCRIPTION collat​​e 中的所有文件都有 .r 扩展名。我用来`roxygenize`在DESCRIPTION中生成整理字段。

我所做的是删除本地存储库中 R/ 中的所有文件并复制回来，将其推送到 Github。**仅在Windows**下将 .R 重命名为 .r不会更改远程存储库。然后错误再次发生，所以我在这里询问是否有更多我应该修复的东西。但一天后，错误消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-05T11:08:52.670

我有同样的问题。我的`.Rbuildignore`. 我丢失的文件被命名为`OutputPlotGenerator.R`，我的`.Rbuildignore`文件包含该行`output`，因此删除/忽略了我的 R 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-29T08:43:18.133

出于某种原因，我的描述中有两次相同的名字。一个带有 .r 扩展名，一个带有 .R 作为扩展名。删除错误的解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-08T05:47:58.280

对我来说，我有一个`.R`没有添加到文件`collate`字段中的新`DESCRIPTION`文件。

只需将其添加到该字段即可解决问题。

[哈德利在这里](http://r-pkgs.had.co.nz/man.html)的几个地方谈到了它。

# sql-server - SQL Server/Oracle 调用规范索引

> ID：14728330
> 
> 赞同：-4
> 
> 时间：2013-02-06T11:48:12.063
> 
> 标签：sql-server, oracle

以下是面试官问我的数据库（SQL Server/Oracle）问题。

> **如果我有多个索引，我如何调用特定索引？**

我对此一无所知。我在谷歌搜索但失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:29:38.127

您可以向优化器提供[提示。](http://docs.oracle.com/cd/B10500_01/server.920/a96533/hintsref.htm)

索引提示如下所示：

```
SELECT /*+ INDEX(<table name> <index name> <optional free text comment> */ field1, field2... 
```

例子：

```
SELECT /*+ INDEX(patients sex_index) use sex_index because there are few
   male patients  */ name, height, weight
FROM patients
WHERE sex = 'm'; 
```

# string - 如何在两个jsp页面之间传递字符串？

> ID：14728331
> 
> 赞同：0
> 
> 时间：2013-02-06T11:48:12.963
> 
> 标签：string, jsp

我想在我的两个jsp页面之间传递一个字符串（用户名），

Login.jsp 和 Details.jsp。

请告诉它怎么做？

```
I tries this in Login.Jsp
<html>
......
<%
session.setAttribute("key","value"); 
%>
.....
</html>

In Details.jsp
<html>
......
<%
session.getAttribute("key"); 
%>
.....
</html>

It showed  "NULL" as output. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:52:37.763

尝试这个

jsp1.jsp

```
 request.setAttribute("name",somevalue);

    RequestDispatcher dispatcher = request.getRequestDispatcher("jsp2.jsp");
    if (dispatcher != null){
            dispatcher.forward(request, response);
    } 
```

jsp2.jsp

```
out.println(request.getAttribute("name")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:55:47.147

通常在登录后，您应该将用户数据保存在会话中：

```
session.setAttribute("key","value"); 
```

然后从其他页面访问

```
session.getAttribute("key"); 
```

如果您需要更多信息，这里有很多： http: [//www.jsptut.com/sessions.jsp](http://www.jsptut.com/sessions.jsp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:56:06.550

有几种方法可以将数据从一个网页传递到另一个网页：

1.  放一张表格`Login.jsp`，让它张贴到`Details.jsp`。这会将表单中的值发布到`Details.jsp`.
2.  重定向到`Details.jsp?username=ARJUN`. 这将`Details.jsp`在查询字符串中传递一个变量。
3.  将用户名放入 cookie 中。cookie 将被提交到`Details.jsp`（以及所有其他页面），这使得确定每个页面中的用户名成为可能。
4.  将用户名放入会话中。类似于 cookie，但会话存储在服务器上并与当前正在查看您的网站的用户相关联。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T15:21:27.490

首先在编写这段代码时创建 servlet： 这里我们可以使用 requet.getParameter("name"); 这里，name 是上一页的文本框名称

`<%! String name=request.getParameter("name")%>`
`<% out.println("Welcome :"+name) %>`

# java - 过滤后无法重置列表视图

> ID：14728332
> 
> 赞同：0
> 
> 时间：2013-02-06T11:48:16.133
> 
> 标签：java, android, filter

我目前有一个列表视图填充在我的“onCreate”中一个 LIKE 语句，它被过滤。在我从编辑文本中删除字符串搜索的那一刻（即它是空白的），我希望重新显示所有内容。目前我无法做到这一点，显示的数据仅显示最后过滤的数据。

这是我的过滤器：

```
 searchName = (EditText) findViewById(R.id.inputName);
    searchedListResults.setTextFilterEnabled(true);
    searchName.addTextChangedListener(new TextWatcher() {
        @Override
        public void afterTextChanged(Editable s) {
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            cursorAdapter.getFilter().filter(s.toString());
        }
    });

    getCons = new DBHandler(this, null, null);
    cursorAdapter.setFilterQueryProvider(new FilterQueryProvider() {
        public Cursor runQuery(CharSequence constraint) {
            getCons.open();
            return getCons.getChanges(constraint.toString());
        }
    }); 
```

这是我的数据库处理程序类中的方法，起初我认为这是因为我在我的“IF”中关闭了游标，但这似乎有所作为。

```
public Cursor getChanges(String constraintPassed) {

        String [] columns = new String[]{KEY_ROWID, KEY_NAME, KEY_TEL, KEY_EMAIL, KEY_COMMENTS};
        Cursor c = null;
         if(constraintPassed == "" || constraintPassed.length() == 0)
         {
             c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, KEY_NAME + " ASC", null); 
             c.close();

         }

         else
         {

            c = ourDatabase.query(DATABASE_TABLE, columns, KEY_NAME + " LIKE'" + constraintPassed + "%'", null, null, null, KEY_NAME + " ASC", null);

         }

        if( c != null)
            {
                c.moveToFirst();
                return c;

            }
        return null;
    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T10:10:54.660

您应该在过滤后使用它：

```
((EfficientAdapter)listview.getAdapter()).notifyDataSetChanged(); 
```

`EfficientAdapter`您的适配器类在哪里。

希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T10:17:48.397

换线试试

```
cursorAdapter.getFilter().filter(s.toString()); 
```

和

```
yourclassname.this.cursorAdapter.getFilter().filter(s.toString()); 
```

在你的`onTextChanged`方法中。

# ios - 释放类对象时使用块进行内存管理

> ID：14728334
> 
> 赞同：1
> 
> 时间：2013-02-06T11:48:19.173
> 
> 标签：ios, block, memory-management

假设执行了如下所示的示例块。

```
[testBlock testPerformWithBlock:^(BOOL finished) {
    if (finished) {
       self.textField.text = @"Finished";
       NSLog(@"Edited to add an textfield update inside block");

    }
}]; 
```

如果我在块返回 BOOL 值之前弹出包含对象 testBlock 的视图控制器会发生什么。对象会被正确释放吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:52:36.217

块内的所有内容都会保留，直到该块从内存中释放。如果对象`testBlock`仍在执行`testPerformWithBlock`且块仍处于活动状态，则保留块内的所有内容。

你只是`NSLog`在那里做一个，所以什么都不会改变。

但是，如果您这样做：

```
if (finished) {
    [self doSomething];
} 
```

`self`正在使用，它会被保留，所以如果你将块存储在某个地方的某个 ivar 中，请小心

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:55:56.547

我不明白你在问什么。在您的示例中，内存管理没有问题。如果您没有显式保留某些内容，则不需要显式释放它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T17:55:55.133

您将收到警告，在块内强烈捕获自我将导致保留周期，它不会崩溃，但您需要这样做是不合适的，因为他们说强弱舞蹈。您可以这样做。

```
__weak typeof(self)ref=self;

^(<your bock>){

__strong typeof(ref)strongSelf=ref;

if(strongSelf)//or if(!strongSelf)return;
{
[strongSelf-><variable>  methodCall];

}
}; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-11-22T09:28:57.197

不会有解除分配的错误。
虽然“testBlock”的retainCount在调用后不会改变，但在运行到结束之前不会释放块。
结果是无论“testBlock”dealloc 与否，程序都将完美运行。
示例代码如下：

```
- (void)lazyFetchingImage:(void (^)(void))finishBlock {
    [[NSOperationQueue mainQueue] addOperationWithBlock:finishBlock];
}
MainVCAppDelegate *dd = [MainVCAppDelegate new];
NSLog(@"count==%i",[dd retainCount]);
[dd lazyFetchingImage:^{
    NSLog(@"22");
}];
NSLog(@"count==%i",[dd retainCount]);
[dd release]; 
```

输出应该是：
count==1
count==1
22

# linux - 创建带有时间戳的 PostgreSQL 备份文件

> ID：14728339
> 
> 赞同：6
> 
> 时间：2013-02-06T11:48:30.327
> 
> 标签：linux, bash, postgresql, shell, backup

我正在做这样的转储`pg_dump prod-db -U postgres > prod-db.sql`，但如果我能像这样进行转储`pg_dump prod-db -U postgres > prod-db-{date}.sql`并能够`prod-db-06-02-13.sql`通过 shell 生成文件会很酷......
我不知道如何开始也不知道在哪里寻找。任何想法、链接、文档将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-06T11:52:00.147

试试这个：

```
pg_dump prod-db -U postgres > prod-db-$(date +%d-%m-%y).sql 
```

这是[日期手册](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/date.html)，用于其他格式选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T11:53:30.850

使用反引号和`date`命令。

IE

```
pg_dump prod-db -U postgres > prod-db-`date +%d-%m-%y`.sql 
```

# tfs - 如何使 TFS 2012 按项目框架构建单独的输出二进制文件

> ID：14728341
> 
> 赞同：0
> 
> 时间：2013-02-06T11:48:33.010
> 
> 标签：tfs, tfsbuild

目前我的 TFS 构建将所有二进制文件输出到同一目录。如果 TFS 将 silverlight 项目中的二进制文件输出到一个目录，而将 .net 框架项目输出到另一个目录，那么我将能够在测试时区分它们。有人知道我该怎么做吗？

这是我想做的一个例子[http://lajak.wordpress.com/2011/05/07/customize-binaries-folder-in-tfs-team-build/](http://lajak.wordpress.com/2011/05/07/customize-binaries-folder-in-tfs-team-build/)除了在那个例子中他们使用配置和项目名称而不是项目框架。

我不想对任何源代码进行任何更改，我想保留对构建定义的更改。

# aptana - Aptana 搜索打开的文件不起作用

> ID：14728345
> 
> 赞同：0
> 
> 时间：2013-02-06T11:48:54.550
> 
> 标签：aptana

我正在尝试使用 Aptana 的搜索功能来搜索所有打开的文件。我已经设置了*打开文件*的范围，并且我知道某些标准存在。

谁能告诉我它可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T10:48:20.443

我找到了解决方案。Aptana 需要有一个项目文件才能在所有其他文件中搜索

# android - 获得图像联系的最佳方式

> ID：14728348
> 
> 赞同：0
> 
> 时间：2013-02-06T11:49:00.547
> 
> 标签：android, image

嗨，我正在尝试从联系人获取图像，但此方法不适用于 2.3.6 的 Galaxy S。是否有适用于所有电话的功能？在模拟器上工作正常。这是我的代码

```
 String idContact = fetchContactIdFromPhoneNumber(number, paramContext);

        if (idContact.compareTo("") != 0 )  {
            Log.i("Valore ",idContact);
              Bitmap bit= loadContactPhoto(paramContext.getContentResolver(),Long.parseLong(idContact));
              sms_rubrica.add(0,bit);
          }
         else  sms_rubrica.add(0,No_Foto);

public static Bitmap loadContactPhoto(ContentResolver cr, long  id) {
            Uri uri =    ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, id);
           InputStream input = ContactsContract.Contacts.openContactPhotoInputStream(cr, uri);

            if (input == null) {
                return null;
            }
            return BitmapFactory.decodeStream(input);
    } 
```

使您的功能适应我的小部件，它会引发 sql 异常

```
 public Uri getPhotoUri(String id,Context ctx) {
        try {
            Cursor cur = ctx.getContentResolver().query(
                    ContactsContract.Data.CONTENT_URI,
                    null,
                    ContactsContract.Data.CONTACT_ID + "=" + id + " AND "
                            + ContactsContract.Data.MIMETYPE + "='"
                            + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE + "'", null,
                    null);
            if (cur != null) {
                if (!cur.moveToFirst()) {
                    return null; // no photo
                }
            } else {
                return null; // error in cursor process
            }
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
        Uri person = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, Long
                .parseLong(id));
        return Uri.withAppendedPath(person, ContactsContract.Contacts.Photo.CONTENT_DIRECTORY);
    } 
```

这是堆栈跟踪：

```
 02-06 13:17:43.684: W/System.err(240): android.database.sqlite.SQLiteException:   near    "AND": syntax error: , while compiling: SELECT data_version, contact_id, lookup, data12,   data11, data10, mimetype, data15, data14, data13, data_sync1, data_sync3, data_sync2, data_sync4, account_type, custom_ringtone, status_updates.status AS status, data1, data4, data5, data2, data3, data8, data9, group_sourceid, data6, account_name, data7, display_name, in_visible_group, contacts_status_updates.status_res_package AS contact_status_res_package, is_primary, contacts_status_updates.status_ts AS contact_status_ts, raw_contact_id, times_contacted, contacts_status_updates.status AS contact_status, status_updates.status_res_package AS status_res_package, status_updates.status_icon AS status_icon, contacts_status_updates.status_icon AS contact_status_icon, presence.mode AS mode, version, last_time_contacted, res_package, _id, status_updates.status_ts AS status_ts, dirty, is_super_primary, photo_id, send_to_voicemail, contacts_status_updates.status_label AS contact_status_label, status_updates.status_label AS status_label, starred, agg_presence.mode AS contact_presence, sourceid FROM view_data_restricted data LEFT OUTER JOIN agg_presence ON (agg_presence.presence_contact_id=contact_id) LEFT OUTER JOIN status_updates contacts_status_updates ON (status_update_id=contacts_status_updates.status_update_data_id) LEFT OUTER JOIN presence ON (presence_data_id=data._id) LEFT OUTER JOIN status_updates ON (status_updates.status_update_data_id=data._id) WHERE (1) AND (contact_id= AND mimetype='vnd.android.cursor.item/photo')
  02-06 13:17:43.684: W/System.err(240):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:158)
  02-06 13:17:43.684: W/System.err(240):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
 02-06 13:17:43.684: W/System.err(240):     at android.content.ContentProviderProxy.bulkQuery(ContentProviderNative.java:326)
 02-06 13:17:43.684: W/System.err(240):     at android.content.ContentProviderProxy.query(ContentProviderNative.java:345)
02-06 13:17:43.684: W/System.err(240):  at android.content.ContentResolver.query(ContentResolver.java:202)
02-06 13:17:43.684: W/System.err(240):  at com.imrankhanandroid.HomeWidgetRandomNum.Randomnuberwidget.getPhotoUri(Randomnuberwidget.java:186)
  02-06 13:17:43.684: W/System.err(240):    at com.imrankhanandroid.HomeWidgetRandomNum.Randomnuberwidget.onUpdate(Randomnuberwidget.java:114) 
```

02-06 13:17:43.684: W/System.err(240): 在 android.appwidget.AppWidgetProvider.onReceive(AppWidgetProvider.java:61) 02-06 13:17:43.684: W/System.err(240) : 在 com.imrankhanandroid.HomeWidgetRandomNum.Randomnuberwidget.onReceive(Randomnuberwidget.java:244) 02-06 13:17:43.684: W/System.err(240): 在 android.app.ActivityThread.handleReceiver(ActivityThread.java:2637 ) 02-06 13:17:43.684: W/System.err(240): 在 android.app.ActivityThread.access$3100(ActivityThread.java:119) 02-06 13:17:43.684: W/System.err( 240): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1913) 02-06 13:17:43.684: W/System.err(240): 在 android.os.Handler.dispatchMessage(Handler.java :99) 02-06 13:17:43.684: W/System.err(240): 在 android.os.Looper.loop(Looper.java:123) 02-06 13:17:43.694: W/System.err (240)：在 android.app。ActivityThread.main(ActivityThread.java:4363) 02-06 13:17:43.694: W/System.err(240): 在 java.lang.reflect.Method.invokeNative(Native Method) 02-06 13:17:43.694 : W/System.err(240): 在 java.lang.reflect.Method.invoke(Method.java:521) 02-06 13:17:43.694: W/System.err(240): 在 com.android。 internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) 02-06 13:17:43.694: W/System.err(240): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java :618) 02-06 13:17:43.694: W/System.err(240): 在 dalvik.system.NativeStart.main(本机方法)错误（240）：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run（ZygoteInit.java:860）02-06 13:17:43.694：W/System.err（240）：在 com.android.internal .os.ZygoteInit.main(ZygoteInit.java:618) 02-06 13:17:43.694: W/System.err(240): at dalvik.system.NativeStart.main(Native Method)错误（240）：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run（ZygoteInit.java:860）02-06 13:17:43.694：W/System.err（240）：在 com.android.internal .os.ZygoteInit.main(ZygoteInit.java:618) 02-06 13:17:43.694: W/System.err(240): at dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:52:14.557

可能这会对您有所帮助（联系人由 getId() 识别）：

```
/**
 * @return the photo URI
 */
public Uri getPhotoUri() {
    try {
        Cursor cur = this.ctx.getContentResolver().query(
                ContactsContract.Data.CONTENT_URI,
                null,
                ContactsContract.Data.CONTACT_ID + "=" + this.getId() + " AND "
                        + ContactsContract.Data.MIMETYPE + "='"
                        + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE + "'", null,
                null);
        if (cur != null) {
            if (!cur.moveToFirst()) {
                return null; // no photo
            }
        } else {
            return null; // error in cursor process
        }
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
    Uri person = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, Long
            .parseLong(getId()));
    return Uri.withAppendedPath(person, ContactsContract.Contacts.Photo.CONTENT_DIRECTORY);
} 
```

**用法是：**

```
Uri u = objItem.getPhotoUri();
if (u != null) {
        mPhotoView.setImageURI(u);
} else {
        mPhotoView.setImageResource(R.drawable.ic_contact_picture_2);
} 
```

# javascript - 在按键上更改背景位置

> ID：14728352
> 
> 赞同：3
> 
> 时间：2013-02-06T11:49:08.823
> 
> 标签：javascript, jquery, html, css

**我是 JavaScript 游戏的新手。**

我对游戏有一个想法，例如，如果我以**Solidsnake 的角色**为例。

我想在按下导航键时更改字符视图。如果我按左键，它应该显示左视图，右键显示右视图等等。如何在按键时更改图像，如何在 javascript 中执行此操作？游戏理念—— ![**我猜的主题-**](../Images/e1e73b452b65780f02c1340c65853502.png)

代码简介——

```
var leftKey,upKey,rightKey,downKey;
    var box = $("#plane"),
        left = 37,
        up = 38,
        right = 39,
        down = 40;

function key(e) {
    console.log(e.keyCode);
    var $key = e.keyCode;

    $(document).keydown(function(e) {
        if (e.keyCode == left) 
        leftKey = true;

    if (e.keyCode == up) 
        upKey = true;

    if (e.keyCode == right) 
        rightKey = true;

    if (e.keyCode == down) 
        downKey = true;

    }).keyup(function(e) {
       if (e.keyCode == left) 
        leftKey = false;

    if (e.keyCode == up) 
        upKey = false;

    if (e.keyCode == right) 
       rightKey = false;

    if (e.keyCode == down) 
        downKey = false;

    });

}

$("body").keydown(function(){
   key(event); 
});

setInterval(function() {

    if (upKey) {
        box.css("top", "-=10");
    }
    if (rightKey) {
        box.css("left", "+=10");
    }
    if (downKey) {
        box.css("top", "+=10");
    }
    if (leftKey) {
        box.css("left", "-=10");
    }

},20); 
```

现在我有这个带有简单导航动作的代码。

[Js小提琴](http://jsfiddle.net/stackmanoz/VMM5P/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:52:24.390

当您这样做时`e.keyCode == up`，您可以更改图像源：

```
if (e.keyCode == up) {
    upKey = true;
    $("#plane").attr('src', 'up-img-src');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T12:01:23.387

您可以使用 CSS 来设置它并避免多个图像请求。您需要有一个连续包含角色所有图像的精灵，然后用`div`您需要显示的区域进行遮罩。然后使用 javascript，您可以使用`marginLeft`or`marginRight`或`left`and更改图像的位置`right`（您需要设置位置`relative`或`absolute`for `left`and `right`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T12:06:47.937

要么这样做：http: [//jsfiddle.net/VMM5P/1/](http://jsfiddle.net/VMM5P/1/)

更改`image src`on 按键：

```
if (upKey) {
    box.attr("src", "http://cdn3.iconfinder.com/data/icons/blackblue/128/iChat.png");
}
if (rightKey) {
    box.attr("src", "http://cdn2.iconfinder.com/data/icons/blackblue/128/guitar.png");
}
if (downKey) {
    box.attr("src", "http://cdn3.iconfinder.com/data/icons/blackblue/128/TextEdit.png");
}
if (leftKey) {
    box.attr("src", "http://cdn2.iconfinder.com/data/icons/blackblue/128/preview.png");
} 
```

或者您可以制作一个精灵并相应地定位它们：

*`Suppose box is the div which has a background sprite image`*

```
if (upKey) {
    box.css("background-position", "0px 0px"); // pos 1
}
if (rightKey) {
    box.css("background-position", "120px 0px"); // pos 2
}
if (downKey) {
    box.css("background-position", "240px 0px"); // pos 3
}
if (leftKey) {
    box.css("background-position", "360px 0px"); // pos 4
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:52:57.993

您可能想要更改图像的 attr 源。

```
if (leftKey) {
    box.find('img').attr('src', 'ENTER NEW IMAGE URL HERE');
} 
```

# php - PHP SQL 计数并获取数据

> ID：14728362
> 
> 赞同：0
> 
> 时间：2013-02-06T11:49:33.163
> 
> 标签：php, sql, sql-server, count

我想得到 id 和 id 的数量。所以，我写了这个命令sql：

```
SELECT count(id), id 
FROM tblExample 
```

这是行不通的。你有我的解决方案吗？用于获取我的 id 的值和 id 的数量。

或者一个函数 PHP 来计算我的结果集。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T11:50:03.813

只需添加一个`GROUP BY id`：

```
SELECT id, COUNT(id)
FROM tblExample
GROUP BY id; 
```

[**演示**](http://www.sqlfiddle.com/#!3/657cb/1)

* * *

**更新：**

您发布的查询：

```
SELECT count(id), id 
FROM tblExample; 
```

在大多数 RDBMS 中不起作用，也不应该。在 SQL Server 中，你会得到一个错误；说：

> 列“id”在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。

~~**奇怪**的是，MySQL 允许这样做（OP 没有说他使用的是什么 RDBMS），在这种情况下，它将获得一个任意值（这也取决于设置的选项），用于`id`列，`COUNT`并且这种情况将是所有 id 的计数。~~

~~但不建议这样做。~~

# c# - 在 UI 层使用 DataTable 而不是实体

> ID：14728363
> 
> 赞同：1
> 
> 时间：2013-02-06T11:49:35.497
> 
> 标签：c#, ado.net, datatable, data-access-layer

我的基本 3 层应用程序由一个与我的 BLL 对话的 DAL 和与 UI 交互的 BLL 组成。

到目前为止，我一直在使用老式的方式来构建带有数据读取器和更新/插入命令的 DAL。这很有效，因为我的大部分需要在哪里阅读。

现在我需要越来越多的更新数据库信息并检查一些基本的并发性。我正在考虑使用数据表使我的 UI 在编辑和持久化数据库表中的数据时更加灵活。

现在`List<InventoryItem>`我的 UI 中有一个，每当我需要时，我都会将此列表发送到 BLL->DAL 以进行更改。

在我看来，我必须让我的 BLL 将数据表返回给 UI，以使我的 UI 更容易响应更新？

我的主要问题是如何将 3 层逻辑（UI-BLL-DAL）与 DataAdapter/DataSets/DataTables 模型的优点进行逻辑绑定......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:38:40.833

起初这似乎是正确的，但这样做只会破坏分层架构。通过将类型化数据集 ( `datatable`) 带到`UI`，您只需启用`UI`to 直接使用`CRUD`操作。那么就不需要使用其他层了。

这只会破坏抽象。

使用 N 层架构是一种选择，是否使用它取决于您的要求。也许，首先你需要决定你是否真的需要它；除非你能想出一个正确的推理，否则你不需要使用它。

# javascript - Jvector图，如何关注一个标记？

> ID：14728371
> 
> 赞同：3
> 
> 时间：2013-02-06T11:49:59.780
> 
> 标签：javascript, jquery, jvectormap

我在使用 Jvectormap 时遇到的另一个令人沮丧的问题是，我希望通过 lngLat 专注于页面/地图加载上的标记，我该怎么做？理想情况下，最好说专注于这个标记或专注于 latlng。每张地图我只会显示 1 个标记，但我不知道 x/y 只是 lngLat 或可能的国家代码。可能有一种更简单的方法可以做到这一点，因此欢迎提出建议。感谢您在高级方面的帮助

```
 var markers = [ {latLng: [47.774099, -52.793427], name: "loc 1", label: "This blahblah"}]
   $(function(){
    $('#map1').vectorMap({
                  map: 'world_mill_en',
                  scale: ['#C8EEFF', '#0071A4'],
                  normalizeFunction: 'polynomial',
                  hoverOpacity: 0.7,
                  hoverColor: false,
                  markerStyle: {
                    initial: {
                          fill: '#F8E23B',
                          stroke: '#383f47'
                    }
                  },
                  backgroundColor: '#383f47',
                  markers: markers,
                  focusOn:{
                    latLng: [47.774099, -52.793427],
                    scale: 5
                  },
                  onMarkerLabelShow: function(event, label, index) {
                       label.html( ''+markers[index].label+'');            
                   }
            });
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T03:26:58.787

我需要和你一样的东西，遇到了你没有回答的问题。这是我为自己解决问题而编写的代码（从 jVectorMap 源中复制、粘贴和修改斜线）。我希望你和其他人觉得它有帮助。

只需将比例、经度和纬度传递给 setFocusLatLng。

我可能会尝试让这个或类似的东西被 GitHub 上的 jVectorMap 项目接受，所以以后可能会有更好的方法来做到这一点。

*免责声明：地图边缘的点不会居中。不过，它们应该在视图中。*

编辑：根据要求，这是 jsfiddle 的全部内容：http: [//jsfiddle.net/BryanTheScott/rs7H5/](http://jsfiddle.net/BryanTheScott/rs7H5/)

编辑：还添加了以下 JS 的其余部分：

```
$(function(){
    var smallMap = $('#my_map_container').vectorMap({
        map: 'world_mill_en',
        zoomOnScroll: true,
        zoomMax:5,
        zoomMin:5,
        regionStyle: {
            initial: {
                fill: '#222222',
                "fill-opacity": 1,
                stroke: '#444444',
                "stroke-width": 1,
                "stroke-opacity": 0.7
            },
            hover: {
                "fill-opacity": 0.8,
                fill: '#333333'
            }
        },
        markerStyle: {
            initial: {
                fill: "#000000",
                "stroke": "#7FC556",
                "stroke-width": 2,
                r: 3
            }
        },
        markers: [[37.770172,-122.422771]]
    });

    var mapObj = $('#my_map_container').vectorMap('get', 'mapObject');

    mapObj.setFocusLatLng = function(scale, lat, lng){
        var point,
            proj = jvm.WorldMap.maps[this.params.map].projection,
            centralMeridian = proj.centralMeridian,
            width = this.width - this.baseTransX * 2 * this.baseScale,
            height = this.height - this.baseTransY * 2 * this.baseScale,
            inset,
            bbox,
            scaleFactor = this.scale / this.baseScale,
            centerX,
            centerY;

        if (lng < (-180 + centralMeridian)) {
            lng += 360;
        }

        point = jvm.Proj[proj.type](lat, lng, centralMeridian);

        inset = this.getInsetForPoint(point.x, point.y);
        if (inset) {
            bbox = inset.bbox;

            centerX = (point.x - bbox[0].x) / (bbox[1].x - bbox[0].x);
            centerY = (point.y - bbox[0].y) / (bbox[1].y - bbox[0].y);

            this.setFocus(scale, centerX, centerY);
        }
    }

    mapObj.setFocusLatLng(5, 37.770172,-122.422771);
}); 
```

# python - 我希望 Python argparse 抛出异常而不是使用

> ID：14728376
> 
> 赞同：47
> 
> 时间：2013-02-06T11:50:13.647
> 
> 标签：python, argparse

我认为这是不可能的，但我想自己处理来自 argparse 的异常。

例如：

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('--foo', help='foo help', required=True)
try:
    args = parser.parse_args()
except:
    do_something() 
```

当我运行它时：

```
$ myapp.py
usage: myapp --foo foo
myapp: error: argument --foo is required 
```

但我希望它改为例外。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-06T11:54:51.593

当发生错误时，您可以子类`ArgumentParser`化并覆盖该方法以执行不同的操作：`error`

```
class ArgumentParserError(Exception): pass

class ThrowingArgumentParser(argparse.ArgumentParser):
    def error(self, message):
        raise ArgumentParserError(message)

parser = ThrowingArgumentParser()
parser.add_argument(...)
... 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-03-19T06:21:05.647

就我而言， argparse 打印“参数太少”然后退出。阅读 argparse 代码后，我发现它只是在打印一些消息后调用 sys.exit() 。由于 sys.exit() 只会抛出 SystemExit 异常，因此您只需捕获此异常即可。

所以试试这个，看看它是否适合你。

```
 try:
        args = parser.parse_args(args)
    except SystemExit:
        .... your handler here ...
        return 
```

# android - 相对于父视图滚动视图

> ID：14728381
> 
> 赞同：0
> 
> 时间：2013-02-06T11:50:29.113
> 
> 标签：android

![在此处输入图像描述](../Images/8e5dcd6f2221ebbe5a80c778a74c9b64.png)

嗨，伙计们，我的问题很简单

我想像 flowlayout 或 GridLayout 一样在一行中添加图像，如下图所示

在该布局上方，我想添加一个按钮，使其位于行之间。当我滚动我的网格视图时，按钮图像也会与网格视图一起滚动。

任何人都可以建议我一些想法如何成为可能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:24:51.783

如果它总是第四个项目 - 那肯定没问题。

使用 android:numColumns="3" 执行 GridView

在您的适配器中实现三种视图类型

这个想法是在第二行中添加两个空白项，并在中间添加一个按钮。

```
private static final int TYPE_NORMAL = 0;
private static final int TYPE_BLANK = 1;
private static final int TYPE_BUTTON = 2;

@Override
public int getViewTypeCount() {
    return 3;
}

@Override
public int getCount() {
    return yourdata.size() + 3;
}

// return your real data by skipping row with the button
@Override
public Object getItem(int position) {
    if (position > 3) {
        position += 3;
    }
    return yourdata.get(position);
}

// return your real data ID by skipping row with the button  The button probably should catch it's own onClickListemer
@Override
public long getItemId(int position) {
    if (position > 3) {
        position += 3;
    }
    return yourdata.get(position).getId();
}

@Override
public int getItemViewType(int position) {
    switch(position) {
        case 4:
        case 6:
            return TYPE_BLANK;

        case 5:
            return TYPE_BUTTON;

        default:
            return TYPE_NORMAL;
    }
}

// only your items should be clickable
@Override
public boolean isEnabled(int position) {
    return position < 4 && position > 6;
}

// nope, only your specific data items are enabled.
@Override
public boolean areAllItemsEnabled() {
    return false;
} 
```

在您的 getView 方法中，只需检查项目视图类型并膨胀正确的视图。有关实现具有多种项目类型的适配器的更多详细信息，请参阅带有节标题等的 ListView 示例。

[如何在某些部分上方生成带有标题的 ListView？](https://stackoverflow.com/questions/2394514/how-to-generate-a-listview-with-headers-above-some-sections)

[http://w2davids.wordpress.com/android-sectioned-headers-in-listviews/](http://w2davids.wordpress.com/android-sectioned-headers-in-listviews/)

# c# - c#我如何比较两个具有匹配字母但一个有空格的字符串

> ID：14728388
> 
> 赞同：3
> 
> 时间：2013-02-06T11:50:55.830
> 
> 标签：c#, string, if-statement, whitespace, equals

下面是我的代码，我怎样才能使`if`返回为真，因为它当前跳过`if`语句，因为字符串值中有一个空格。

```
string instrucType = "FM";
string tenInstrucType = "FM ";
if (tenInstrucType.Equals(instrucType))
{
    blLandlordContactNumberHeader.Visible = true;
    lblLandlordContactNumber.Text = landlordData.LandlordContact.DefPhone;
    lblLandlordEmailHeader.Visible = true;
    lblLandlordEmail.Text = landlordData.LandlordContact.DefEmail;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:52:44.340

使用修剪功能：

```
if (tenInstrucType.Trim().Equals(instrucType.Trim())) 
```

不过，这只会从末端修剪。如果中间可能有空格，请使用替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:53:01.177

如果空格仅位于字符串的末尾，则修剪两个字符串：

```
if (tenInstrucType.Trim().Equals(instrucType.Trim())) 
```

如果要忽略所有空白字符，可以将它们从字符串中删除：

```
string normalized1 = Regex.Replace(tenInstrucType, @"\s", "");
string normalized2 = Regex.Replace(instrucType, @"\s", "");

if (normalized1 == normalized2) // note: you may use == and Equals(), as you like
{         
    // ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:52:46.827

试试这个条件：

```
if (tenInstrucType.Replace(" ",string.Empty).Equals(instrucType.Replace(" ",string.Empty)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:53:02.837

修剪字符串：

```
if (tenInstrucType.Trim().Equals(instrucType.Trim())) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T12:30:23.813

```
if (tenInstrucType.Replace(" ","").Equals(instrucType.Replace(" ",""))) 
```

using`Trim`似乎适合这种情况，但请注意`Trim`仅删除前导或结尾空格；内部空间不会被删除。

# c - makefile 错误（可执行文件）

> ID：14728397
> 
> 赞同：0
> 
> 时间：2013-02-06T11:51:41.233
> 
> 标签：c, makefile

嗨，在之前没有安装 makedepend 的问题（现已解决）之后，我现在在尝试运行我的 makefile 时遇到以下错误：

```
$ make
makedepend --  -- -I /usr/include/linux -I include 
cp  executables
cp: missing destination file operand after `executables'
Try `cp --help' for more information.
make: *** [executables] Error 1 
```

这是我的makefile：

```
CMDLINE_SRC=$(wildcard commandLine/*.c)
CMDLINE_OBJS = $(CMDLINE_SRC:.c=.o)
EXECUTABLES = $(CMDLINE_SRC:.c=)

LIB_SRC=$(wildcard c/*.c)
LIB_OBJ = $(LIB_SRC:.c=.o)
LIB_OUT = lib/libclinrisk.a

INCLUDES = -I include

# compiler
CC = gcc
CCFLAGS = 
LDFLAGS = 

# library paths
LIBS = -Llib -lclinrisk -lm

.SUFFIXES: .c

default: dep executables

executables: $(EXECUTABLES)
    cp $(EXECUTABLES) executables

$(EXECUTABLES): $(LIB_OUT)

.c:
    $(CC) $(INCLUDES) $(LDFLAGS) $< -o $@ $(LIBS)

.c.o:
    $(CC) $(INCLUDES) $(CCFLAGS) -c $< -o $@

$(LIB_OUT): $(LIB_OBJ)
    ar rcs $(LIB_OUT) $(LIB_OBJ)

depend: dep

dep:
    makedepend -- $(CFLAGS) -- -I /usr/include/linux $(INCLUDES) $(LIB_SRC)

clean:
    rm -f $(LIB_OBJ) $(LIB_OUT) Makefile.bak
    rm -f $(CMDLINE_OBJ) $(CMDLINE_PROGS) 
    rm -f executables/* 
```

这里有什么问题？我是makefile的新手！同时会尝试解决这个问题。

问题看起来与以下有关：

```
cp $(EXECUTABLES) executables 
```

但是我不知道通往可执行文件的正确途径......

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:53:17.897

您的 Makefile 代码中没有设置`EXECUTABLES`变量，因此它替换为一个空字符串，该字符串`cp`仅使用一个参数调用，从而产生错误。

# java - 在 asp.net 中通过 Javascript 和 Java 获取本地 IP

> ID：14728399
> 
> 赞同：-1
> 
> 时间：2013-02-06T11:51:47.383
> 
> 标签：java, javascript, asp.net, ip

我需要找到用户的本地 IP。服务器在路由器后面，所以我不能使用任何服务器端方法。我也不想使用任何 3rd 方服务，`http://jsonip.appspot.com/`因为我对其进行了测试，并且它的服务器不时出现故障。

使用Java，我想通过类似的方式获得IP

```
<script type="text/javascript">
        function myIP() {
            var yip2 = java.net.InetAddress.getLocalHost();
            var yip = yip2.getHostAddress();
            return yip;
        } //end myIP

        alert("your machine's local network IP is " + myIP())
    </script> 
```

但它不起作用。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:02:41.267

我已将其用于您的要求：

[http://jsonip.appspot.com/?callback=getip](http://jsonip.appspot.com/?callback=getip)

试试这个代码：

```
<script type="application/javascript">
    function getip(json){
      //json.ip will have the client IP and this will alert it
      alert(json.ip);
    }
</script>

<script type="application/javascript" src="http://jsonip.appspot.com/?callback=getip"></script> 
```

这与 java 无关（java-script 是另一回事）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:46:14.127

1.  没有服务器端
2.  没有第三方

听起来你已经“卡住”了你已经提供的东西。您的脚本实际上让我感到好奇，因为乍一看，您似乎在混合服务器和客户端（java 和 javascript）+ 所有评论都指向它。但好奇心是件好事：）

显然，虽然不是很可靠，但您*可以在***支持浏览器**中调用 Java 方法。Java 也是客户端（丢失的概念）。

我将复制并粘贴这个，我从未尝试过（因为我从未像你一样受到限制）：

```
if (java && java.net)
ip = ''+java.net.InetAddress.getLocalHost().getHostAddress();
else ip = 'unknown'; 
```

取自[About.com](http://javascript.about.com/library/blip.htm) - 它还描述了您需要做些什么才能至少给它一个工作的机会（上传，不能从本地完成）。

* * *

## 更新：

忘了它。正如@Esailija 所指出的那样，我不是Java 人（首先），上面的脚本将不再（不再）工作：

> **2.1.5 不推荐使用的功能：全局包、java 和 netscape 关键字**
> 
> Mozilla 浏览器系列历来支持从 JavaScript 访问 Java 语言，即使在不包含 Java 小程序的网页上也是如此。在这个浏览器系列中，有可供 JavaScript 代码使用的全局 java、netscape 和 Packages 关键字，它们允许调用静态方法、访问静态字段和创建 Java 类的新实例，其方式与上面的 per-applet Packages 关键字类似。
> 
> 当网页上有多个小程序可用时，这些关键字的语义就会出现问题。如果您想访问一个特定小程序的用户定义类（例如，在 com.mycompany 包中），全局 Packages 关键字如何知道要引用哪个小程序？新的 Java 插件还支持将多个 Java 虚拟机实例附加到 Web 浏览器以执行小程序。在这种情况下，这些全局关键字的语义变得更加复杂。
> 
> **因此，不推荐使用全局 java、netscape 和 Packages JavaScript 关键字。**它们继续在 Firefox 浏览器中运行，但强烈建议使用它们转换现有代码以使用新的 per-applet Packages 关键字。无法使用这些全局关键字访问用户定义的类；尝试这样做会产生不确定的结果。

参考[这里](http://jdk6.java.net/plugin2/liveconnect/#DEPRECATED_FUNCTIONALITY)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:14:56.967

> 服务器在路由器后面

配置路由器以添加[X-Forwarded-For](http://en.wikipedia.org/wiki/X-Forwarded-For)标头。它包含路由器转发请求的IP（或“正确”实现中的IP链），即客户端IP。现在，客户端 IP 当然也可以是另一个代理，但是是的。

# c# - Lambda 复合连接

> ID：14728401
> 
> 赞同：0
> 
> 时间：2013-02-06T11:51:52.427
> 
> 标签：c#, join, lambda

我正在尝试加入一个查询的结果以过滤第二个查询的结果。

**第一次查询**

```
// get the compound centre number and languageId key
var centreKeys = unitOfWork.CentreTranslationRepository.GetAll()
    .Where(w => w.Language.cuture == searchCulture || w.language_id == 1)
    .GroupBy(g => g.Centre.number)
    .Select(s =>
        new
        {
            CentreNumber = s.Key,
            LanguageId = s.Max(g => g.language_id)
        }); 
```

这以以下形式返回结果：

```
{ CentreNumber = 1589, LanguageId = 27 }

{ CentreNumber = 261, LanguageId = 1 }  

{ CentreNumber = 1257, LanguageId = 1 }

{ CentreNumber = 925, LanguageId = 1 } 
```

ETC

**第二次查询**

```
// join onto the translated table
var centres = unitOfWork.CentreTranslationRepository.GetAll()
    .Join(centreKeys,
          centreTranslation => new { centreTranslation.Centre.number, centreTranslation.language_id },
          centreKey => new { centreKey.CentreNumber, centreKey.LanguageId },
          (centreTranslation, centreKey) =>
              new Centre
              {
                  CentreNumber = centreTranslation.Centre.number,
                  name = centreTranslation.Centre.name
                  // etc
              }); 
```

使用单个键执行连接没有问题，但是如上所示，我正在尝试使用匿名复合键进行连接。

这是我收到错误的时候：

```
Error   1   The type arguments for method 'System.Linq.Enumerable.Join<TOuter,TInner,TKey,TResult>(System.Collections.Generic.IEnumerable<TOuter>, System.Collections.Generic.IEnumerable<TInner>, System.Func<TOuter,TKey>, System.Func<TInner,TKey>, System.Func<TOuter,TInner,TResult>)' cannot be inferred from the usage. Try specifying the type arguments explicitly.    C:\Development\SVN\Projects\CentreDirectoryService\CentreDirectoryService\Services\DomainService.cs 32  65  CentreDirectoryService 
```

我在第二个查询中做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T12:03:30.357

这个：

```
new { centreTranslation.Centre.number, centreTranslation.language_id } 
```

和这个：

```
new { centreKey.CentreNumber, centreKey.LanguageId } 
```

定义*不同*匿名类型的对象。为了统一匿名类型，它们需要它们的成员具有**相同的名称、相同的类型和相同的顺序**。当您不提供成员名称时，编译器将使用提供的表达式，因此第一个使用成员`number`and生成类型`language_id`，第二个使用成员创建类型`CentreNumber`and `LanguageId`。

尝试将第一个更改为

```
new {
        CentreNumber = centreTranslation.Centre.number, 
        LanguageId  = centreTranslation.language_id 
    } 
```

（并进行必要的下游更改）。

# android - 日期选择器警报对话框

> ID：14728402
> 
> 赞同：1
> 
> 时间：2013-02-06T11:51:55.080
> 
> 标签：android, datepicker

当我在 android 3.2 和 android 4.0.3 中运行我的代码时，它显示了不同的日期选择器..我希望日期选择器像第一个图像一样作为轮子..我知道 2.3.3 显示旧的选择器..但我不知道为什么我在 4.0.3 中变老了，它在 3.2 中给出了新的。Number Picker 也发生了同样的情况。

这是我的代码：

```
private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {
    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {
        mYear = year;
        mMonth = monthOfYear;
        mDay = dayOfMonth;
        if (picker == 1) {
            final long lDate = mDay;
            dateStart.set(Calendar.YEAR, mYear);
            dateStart.set(Calendar.MONTH, mMonth);
            dateStart.set(Calendar.DATE, mDay);
            Log.d("startdate", "" + dateStart);
            if (lDate != -1) {
                UpdateStartDateTimeView();

                return;
            }

        }

        updateDisplay();
    }
}; 
```

![这是我在 3.2 中得到的](../Images/e50b1c91b2833f3b517d567245e81749.png) ![这是我在 4.0.3 中得到的](../Images/629404eff076930ad888bf5c1144a5ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:06:39.910

如果使用原生选择器，Android 会自动选择当前版本对应的。您只能通过创建自定义对话框来确保呈现唯一的对话框，无论 Android 版本如何。因此，您需要查看独特的选择器是否值得设计自定义选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T00:57:37.097

如果我理解正确，那么您将在 4 以上的 Andoid 版本中获得旧的对话框样式。当我为对话框片段设置**STYLE_NO_FRAME时遇到了这个问题。**在这种情况下，日期选择器的设计一直很旧，我不知道为什么会这样。如果您想始终获得现代 UI，请确保将**STYLE_NORMAL**设置为对话框片段。为此，您需要在对话框片段的 OnCreate 回调方法中添加以下行。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setStyle(DialogFragment.STYLE_NORMAL, 0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T14:38:43.383

DatePickerDialog 有一个接受主题的构造函数

```
DatePickerDialog(Context context, int theme, DatePickerDialog.OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth) 
```

只需更新您的代码

用于光全息主题

```
DatePickerDialog datePickerDialog = new DatePickerDialog(this,
            android.R.style.Theme_Holo_Light_Dialog_NoActionBar, 
new DateListener(v), mTime.year, mTime.month, mTime.monthDay); 
```

或者

用于黑暗全息主题

```
DatePickerDialog datePickerDialog = new DatePickerDialog(this,
            android.R.style.Theme_Holo__Dialog_NoActionBar, 
new DateListener(v), mTime.year, mTime.month, mTime.monthDay); 
```

# android - 将 sqlite db 路径更改为应用缓存目录

> ID：14728404
> 
> 赞同：1
> 
> 时间：2013-02-06T11:51:55.983
> 
> 标签：android, sqlite

是否可以将 sqlite DB 的默认路径更改为应用程序的应用程序缓存目录。我有一个显示 web 视图的应用程序。我无法判断页面是否在缓存中，所以我已经将页面路径写入 sqlite db。如果用户删除缓存目录，那么我也希望删除数据库。

这可能吗？

提前致谢

[编辑]

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.provider.BaseColumns;
import android.util.Log;

public class BmiDB {

    private static final String TAG = BmiDB.class.getSimpleName();

        //table websitecache  column names
        public static final String C_ID_WEBSITE_CACHE = BaseColumns._ID;
        public static final String C_PATH_FROM_ROOT = "pathfromroot";
        public static final String C_VERSION = "version";

    Context context;
    DBHelper dbhelper;
    ApplicationExt appObj;

    public BmiDB(Context context) {

        this.context = context;
        dbhelper = new DBHelper();
        appObj = (ApplicationExt)context.getApplicationContext();

    }

    public void deleteTableWebsiteCache() {
        // open database
        SQLiteDatabase db = dbhelper.getWritableDatabase();

        // delete contents of table
        db.delete(DBHelper.TABLEWEBSITECACHE, null, null);

        // close database
        db.close();
    }

    /**
     * inner class to create/open/upgrade database
     * 
     * @author matt
     * 
     */
    private class DBHelper extends SQLiteOpenHelper {

        // database name and version number
        public static final String DB_NAME = "bmi.db";
        public static final int DB_VERSION = 1;

        //table names

        public static final String TABLEWEBSITECACHE = "websitecache";

        public DBHelper() {
            super(context, DB_NAME, null, DB_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {

            String sqlToCreateWebsiteCache = String
                    .format("create table %s ( %s INTEGER primary key, %s TEXT, %s TEXT)",
                            TABLEWEBSITECACHE, C_ID_WEBSITE_CACHE, C_PATH_FROM_ROOT, C_VERSION );

            db.execSQL(sqlToCreateWebsiteCache);
            Log.e(TAG, "oncreate " + sqlToCreateWebsiteCache);

        }//end of onCreate

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

            db.execSQL("drop table if exists " + TABLEWEBSITECACHE);
            Log.e(TAG, "onUpgrade dropped table");
            this.onCreate(db);

        }//end of onUpGrade

    }//end of DBHelper

    public void close() {

        dbhelper.close();
    }

    public void insertIntoWebsiteCache(ContentValues values) {

        SQLiteDatabase db = dbhelper.getWritableDatabase();

        db.insertWithOnConflict(DBHelper.TABLEWEBSITECACHE, null, values,
                SQLiteDatabase.CONFLICT_REPLACE);

        db.close();

    }

    public Cursor queryAllFromWebsiteCacheTable() {

        // open database
        SQLiteDatabase db = dbhelper.getReadableDatabase();

        return db.query(DBHelper.TABLEWEBSITECACHE, null, null, null, null, null,null);

    }

}//end of class 
```

.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:56:12.347

目前尚不清楚`files/documents/users/servername/data`是相对于您的应用程序还是根文件系统。

经验法则：不要使用指向/指向根文件系统的绝对路径名。曾经。事情会破裂并最终变成愚蠢的错误！

要获取应用程序的根目录，请使用以下命令：

```
String ROOT_DIR = context.getFilesDir().getAbsolutePath(); 
```

从那里，将您的数据库移动到您想要的任何位置（在您的应用程序的存储树下）。

# android - 在网格视图中显示所有已安装的应用程序

> ID：14728407
> 
> 赞同：0
> 
> 时间：2013-02-06T11:52:02.187
> 
> 标签：android, list

大家好，你能帮我在主屏幕上显示所有已安装的应用程序吗？你能给我一些简单网格视图的源代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:19:28.747

看看这段代码。

```
package com.example.android.apis.view;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.ResolveInfo;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup; 
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import java.util.List;
import com.example.android.apis.R;

public class Grid1 extends Activity {

GridView mGrid;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    loadApps(); // do this in onresume?

    setContentView(R.layout.grid_1);
    mGrid = (GridView) findViewById(R.id.myGrid);
    mGrid.setAdapter(new AppsAdapter());
}

private List<ResolveInfo> mApps;

private void loadApps() {
    Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
    mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);

    mApps = getPackageManager().queryIntentActivities(mainIntent, 0);
}

public class AppsAdapter extends BaseAdapter {
    public AppsAdapter() {
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView i;

        if (convertView == null) {
            i = new ImageView(Grid1.this);
            i.setScaleType(ImageView.ScaleType.FIT_CENTER);
            i.setLayoutParams(new GridView.LayoutParams(50, 50));
        } else {
            i = (ImageView) convertView;
        }

        ResolveInfo info = mApps.get(position);
        i.setImageDrawable(info.activityInfo.loadIcon(getPackageManager()));

        return i;
    }

    public final int getCount() {
        return mApps.size();
    }

    public final Object getItem(int position) {
        return mApps.get(position);
    }

    public final long getItemId(int position) {
        return position;
    }
}
} 
```

源 API 演示..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:53:49.373

这是获取当前安装的软件包的方法。

```
 PackageManager packageManager = null;
        List<ApplicationInfo> appsList = new ArrayList<ApplicationInfo>();
        try {
            packageManager = getPackageManager();
            if (packageManager != null) {
                appsList = packageManager.getInstalledApplications(0);
            }
        } catch (Exception e1) {
            Log.v("TAG", "This is my error: ", e1);
        } 
```

然后，您可以从 ApplicationInfo 对象中检索各种信息（包括图标、名称等）。

# ios - 从IOS中的json响应中提取错误代码

> ID：14728414
> 
> 赞同：0
> 
> 时间：2013-02-06T11:52:09.533
> 
> 标签：ios, json, nsinteger

```
{ 
ErrorCodes = ( 
   12 
); 
Success=0; 
} 
```

我有上面的 json 响应，我想从错误代码中获取 12，以便我可以显示适当的错误消息。我正在这样做

```
NSInteger err = [[dict objectForKey:@"ErrorCodes"] integerValue]; 
```

但这会给出异常错误，例如

```
[__NSArrayM integerValue]: unrecognized selector sent to instance 
```

我究竟做错了什么？以及如何将错误代码 12 转换为 NSInteger ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:56:43.557

`ErrorCodes`这是一个数组，这就是您收到错误的原因。你应该尝试这样的事情：

```
[[[dict objectForKey:@"ErrorCodes"] objectAtIndex:0] integerValue]; 
```

# batch-file - 定义批处理文件的通用参数

> ID：14728415
> 
> 赞同：1
> 
> 时间：2013-02-06T11:52:09.727
> 
> 标签：batch-file

我们有一个需求，我们定义了一组通用参数，并使用它各种批处理文件。对于 Unix，我们过去常常在一个脚本中定义，并将此脚本包含在我们想要使用参数的其他脚本中。我们批量有这样的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:24:00.663

你可以建立一个 settings.bat

```
set global1=On
set global2=C:\temp 
```

并将其*包含*在您的任何脚本中`call settings.bat`

# drupal-7 - 带有 XMLHttpRequest 的 CORS

> ID：14728418
> 
> 赞同：0
> 
> 时间：2013-02-06T11:52:19.320
> 
> 标签：drupal-7, cors

我正在尝试在两个站点之间发出 POST 请求。

我已经看到需要使用 access-allow 更改服务器端的请求标头。我的问题是，当我发送请求时，我在响应标头中看不到此修改。

如果我直接在页面上继续，标题会发生变化。如果我使用 GET 发送请求，我也可以看到标头已更改。也许有跨域POST请求被禁止的http服务器配置？

我正在使用为 Drupal 站点提供服务的 Ngnix 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T12:08:17.320

据我所知，您应该更改的标头是接收请求的站点（或站点 2）的响应标头。因此，它允许客户端（或站点 1）执行 CORS 请求，将标头“Access-Control-Allow-Origin”和站点 1（或“*”）的域添加到响应中。

# c# - C#将类导入另一个类不起作用

> ID：14728422
> 
> 赞同：30
> 
> 时间：2013-02-06T11:52:23.603
> 
> 标签：c#, class, main

我对 C# 很陌生，并且已经创建了一个我想在我的主类中使用的类。这两个类位于不同的文件中，但是当我尝试使用 将一个导入另一个时`using`，cmd 说

> 找不到类型或命名空间名称“MyClass”（您是否缺少 using 指令或程序集引用？

我知道在Java中我必须搞砸`CLASSPATH`才能让这样的事情起作用，但我对C#一无所知。

额外细节：

您可能已经知道，我正在通过命令提示符编译和执行。`/target:library`我正在使用（我听说只有主类应该是 .exe 文件）编译我的非主类。

我的代码如下所示：

```
public class MyClass {
    void stuff() {

    }
} 
```

和我的主要课程：

```
using System;
using MyClass;

public class MyMainClass {
    static void Main() {
        MyClass test = new MyClass();
        /* Doesn't work */
    }
} 
```

我试图将我的非主类包含`namespace MyNamespace { }`并导入它，但它也不起作用。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-06T12:15:11.693

**更新**：从 C# 6 开始，如果要使用类的**静态成员**而不指定类名，可以使用[using static 指令](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/using-static)将静态成员导入当前范围，如下所示：

```
using static MyNamespace.MyClass; 
```

尽管这不是最初的问题，但您会收到与 OP 得到的类似的错误，因此我提供它是为了完整性。

**回答OP的问题**：

`using`仅用于命名空间 - 如果两个类都在同一个命名空间中，只需删除`using`.

编译 .exe 时必须引用第一步中创建的程序集：

```
csc /t:library /out:MyClass.dll MyClass.cs
csc /reference:MyClass.dll /t:exe /out:MyProgram.exe MyMainClass.cs 
```

如果您只是将文件编译在一起，您可以使事情变得更简单：

```
csc /t:exe /out:MyProgram.exe MyMainClass.cs MyClass.cs 
```

或者

```
csc /t:exe /out:MyProgram.exe *.cs 
```

**编辑**：这是文件的样子：

**MyClass.cs**：

```
namespace MyNamespace {
    public class MyClass {
        void stuff() {

        }
    }
} 
```

**MyMainClass.cs**：

```
using System;

namespace MyNamespace {
    public class MyMainClass {
        static void Main() {
            MyClass test = new MyClass();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-12-16T07:58:13.660

我知道这是一个非常古老的问题，但我有同样的要求，只是发现在 c#6 之后你可以使用静态来导入类。

我希望这可以帮助别人....

```
using static yourNameSpace.YourClass; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-06T11:55:59.050

那么你必须“导入”（使用）的是`MyClass`不是类名本身的命名空间。如果两个类都在同一个命名空间中，则不必“导入”它。

定义`MyClass.cs`

```
namespace Ns1
{
    public class MyClass
    {
        ...
    }
} 
```

用法`AnotherClass.cs`

```
using Ns1;

namespace AnotherNs
{
    public class AnotherClass
    {
        public AnotherClass()
        {
            var myInst = new MyClass();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T11:59:35.687

如果它们是同一个项目中的单独类文件，那么您不需要有“import”语句。直接使用类。如果文件位于不同的项目中，则需要先添加对该项目的引用，然后才能对其使用“导入”语句。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-08T13:17:28.240

如果另一个类被编译为库（即 dll）并且这是您想要的方式，您应该添加来自 Visual Studio 的引用，浏览并指向 dll 文件。

如果您想要将 OtherClassFile.cs 合并到您的项目中，并且命名空间已经相同，您可以：

1.  关闭您的解决方案，
2.  打开 **YourProjectName.csproj**文件，然后查找此部分：

    ```
    <ItemGroup>                                            
        <Compile Include="ExistingClass1.cs" />                     
        <Compile Include="ExistingClass2.cs" />                                 
        ...
        <Compile Include="Properties\AssemblyInfo.cs" />     
    </ItemGroup> 
    ```

1.  检查您要添加的 .cs 文件是否位于项目文件夹中（与解决方案中的所有现有类相同的文件夹）。

2.  如下在里面添加一个条目，保存并打开项目。

    ```
    <Compile Include="OtherClassFile.cs" /> 
    ```

您的班级现在将作为项目的一部分出现并运行。不需要使用。这可以一次完成多个文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-06T11:56:57.830

`MyClass`是一个**类**而不是一个**命名空间**。所以这段代码是错误的：

```
using MyClass //THIS CODE IS NOT CORRECT 
```

您应该检查`MyClass`（例如：MyNamespace）的命名空间。然后以适当的方式调用它：

```
MyNamespace.MyClass myClass =new MyNamespace.MyClass(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-06T11:57:11.357

`using`用于导入命名空间而不是类。

所以如果你的类在命名空间中`X`

```
namespace X
{
    public class MyClass {
         void stuff() {

         }
    }
} 
```

然后在您想要的另一个名称空间中使用它

```
using System;
using X;

public class MyMainClass {
    static void Main() {
        MyClass test = new MyClass();
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-06T11:56:37.473

```
namespace MyNamespace
{
    public class MyMainClass
    {
        static void Main()
        {
            MyClass test = new MyClass();
        }
    }

    public class MyClass
    {
        void Stuff()
        {

        }
    }
} 
```

你不需要使用命名空间，因为它都包含在同一个命名空间中。

如果您不确定您的类位于哪个命名空间，请键入该类（您希望使用区分大小写），然后将光标放在该类上，使用`CTRL`+ `.`，它将为您提供手动导入。

# html - 连续显示图像并指示选择 - HTML 和 CSS

> ID：14728425
> 
> 赞同：0
> 
> 时间：2013-02-06T11:52:26.980
> 
> 标签：html, css

## 我想达到什么（目标）...

我正在尝试在 html 中显示一行图像（图像下方的图像名称），如下所示：

![在此处输入图像描述](../Images/36fefd9190aa1c431cfe24faa68e1928.png)

当用户单击图像时，我希望在图像上出现一个正方形，以像这样指示选择（用户单击了 Tile1）：

![在此处输入图像描述](../Images/22214dd80a33f269f3444a8a49f1bff2.png)

* * *

## 到目前为止我所做的...

到目前为止，我已经设法连续显示瓷砖：

![在此处输入图像描述](../Images/2200d5f9d3bfd78e8d309df7a2ae3383.png)

**这是生成上图的 html 代码：**

```
<div id='default_tiles_view'>
    <div class="default_tiles_view_square" id="tile1">
        <img src="https://raw.github.com/andrespagella/Making-Isometric-Real-time-Games/master/img/tile.png">
        <p>Tile1</p>
    </div>
    <div class="default_tiles_view_square" id="tile2">
        <img src="https://raw.github.com/andrespagella/Making-Isometric-Real-time-Games/master/img/dirt.png">
        <p>Tile2</p>
    </div>
</div> 
```

**和CSS：**

```
#default_tiles_view {
    width: 490px;
    height: 160px;
    overflow-y: auto;
}
.default_tiles_view_square {
    display: inline-block;
}
.default_tiles_view_square p {
    text-align: center;
} 
```

**还有一个显示上面例子的小提琴：http:** [//jsfiddle.net/jamiefearon/t8d6U/](http://jsfiddle.net/jamiefearon/t8d6U/)

* * *

## 实现目标的策略...

我正在考虑将图像及其标题包装在 div 中，然后更改 div 的背景颜色。这是结果和代码：

![在此处输入图像描述](../Images/db574b393566b8442d3c8dd2611481df.png)

**HTML：**

```
<div id='default_tiles_view'>
    <div class="tile_wrap" id="tile1">
        <div class="default_tiles_view_square">
            <img src="https://raw.github.com/andrespagella/Making-Isometric-Real-time-Games/master/img/tile.png">
            <p>Tile1</p>
        </div>
    </div>
    <div class="tile_wrap" id="tile2">
        <div class="default_tiles_view_square">
            <img src="https://raw.github.com/andrespagella/Making-Isometric-Real-time-Games/master/img/dirt.png">
            <p>Tile2</p>
        </div>
    </div>
</div> 
```

**CSS：**

```
#default_tiles_view {
    width: 490px;
    height: 160px;
    overflow-y: auto;
}
.tile_wrap {
    display: inline-block;
}
.default_tiles_view_square p {
    text-align: center;
}
#tile1 {
    background-color:red;
} 
```

* * *

## 问题..

它看起来不太好，实际图像没有被红色覆盖。也许可以将 div 覆盖在 wrap div 上，将其设置为不透明度 < 1 并更改其背景颜色。

怎么想？有没有人对实现目标的好方法有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:11:17.440

像这样的东西应该可以解决问题：http: [//jsfiddle.net/t8d6U/1/](http://jsfiddle.net/t8d6U/1/)

因此，最初只需使用 display:none（或左：-9999px）隐藏覆盖 DIV，然后在单击时显示它们。

CSS：

```
#default_tiles_view {
    overflow: auto;
}

.default_tiles_view_square {
    float: left;
    margin: 5px 10px 10px 10px;
    position: relative;
    height: 128px;
    width: 128px;
}
.default_tiles_view_square p {
    text-align: center;
}

.content {
    position: absolute;
    z-index: 1;
    top: 0;
    left: 0;
}

.overlay {
    position: absolute;
    z-index: 2;
    background: red;
    opacity: 0.5;
    height: 128px;
    width: 128px;
    top: 0;
    left: 0;
} 
```

HTML：

```
<div id='default_tiles_view'>

    <div class="default_tiles_view_square" id="tile1">
        <div class="content">
         <img src="https://raw.github.com/andrespagella/Making-Isometric-Real-time-Games/master/img/tile.png">
         <p>Tile1</p>
        </div>
        <div class="overlay"></div>
    </div>

    <div class="default_tiles_view_square" id="tile2">
        <div class="content">
         <img src="https://raw.github.com/andrespagella/Making-Isometric-Real-time-Games/master/img/dirt.png">
         <p>Tile2</p>
        </div>
        <div class="overlay"></div>
    </div>

</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:21:49.033

我接受了 Gaurav 在评论中所说的话，改变了不透明度：

**HTML**

```
<div id='default_tiles_view'>
    <div class="tile_wrap" id="tile1">
        <div class="default_tiles_view_square">
            <img src="https://raw.github.com/andrespagella/Making-Isometric-Real-time-Games/master/img/tile.png">
            <p>Tile1</p>
        </div>
    </div>
    <div class="tile_wrap" id="tile2">
        <div class="default_tiles_view_square">
            <img src="https://raw.github.com/andrespagella/Making-Isometric-Real-time-Games/master/img/dirt.png">
            <p>Tile2</p>
        </div>
    </div>
</div> 
```

**CSS**

```
#default_tiles_view {
    width: 490px;
    height: 160px;
    overflow-y: auto;
}
#tile1:hover{
    background:red; 
    opacity:0.4; 
}

.tile_wrap {
    display: inline-block;
}
.default_tiles_view_square p {
    text-align: center;
} 
```

**小提琴：http:** [//jsfiddle.net/jamiefearon/BY9Fp/](http://jsfiddle.net/jamiefearon/BY9Fp/)

将鼠标悬停在 Tile1 上以查看效果。

# c# - C# 性能和检查位数组状态的最佳实践

> ID：14728430
> 
> 赞同：0
> 
> 时间：2013-02-06T11:52:31.207
> 
> 标签：c#, algorithm

这是我的问题：

*   我有两个班级：`ClassObj`和`ClassProperty`;
*   `ClassObj`（我们称它为`lstProperty`）的属性之一`List`是`ClassProperty`（表示对象的当前实例具有的属性）；
*   `Array`在运行时，我已经存储了所有可能的某个地方`ClassProperty`，我们将调用它`Array` `arrPossibleProperty`。

我的问题是找到一种非常快速的方法来检查一个实例是否`ClassObj`匹配一个特定的集合`ClassProperty`（如果他有`lstProperty`一个`ClassProperty`给定的集合）。

我正在考虑创建一个`array`代表姿势`Bit`序列的`ClassProperty`of `ClassObj`。使用`Array` `arrPossibleProperty`, 和他的索引作为参考`Property`。

因此，例如，如果我们有 10 个属性，并且 a`InstanceA`有`ClassObj`第 1 个、第 4 个和第 9 个，我将生成这个位数组：1001000010

我的问题是，**我如何检查例如（最快和最高性能的解决方案）位数组是否具有（例如）第三和第四属性？**

当然，如果您需要有更高效的方法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:05:07.270

您需要使用按位运算，例如`&`, `|`,`^`或`~`（取决于您的需要）

以 1001000010 为例，要确定是否设置了第 3 位，您需要这样做：`1001000010 & 0000000100 != 0000000000`，或者更确切地说

```
bool isSet = myProperty & (1 << (option - 1)) != 0; // to find out if `myProperty` has the property `option` set.
myProperty |= 1 << (option -  1); // to set property `option` 
```

有关按位运算的更多信息：[http ://en.wikipedia.org/wiki/Bitwise_operation](http://en.wikipedia.org/wiki/Bitwise_operation)

**或者**，更容易实现的是使用枚举。

```
[Flags]
enum ClassProperty
{
    None = 0x00,
    First = 0x01,
    Second = 0x02,
    Third = 0x04,
    Fourth = 0x08
    // add more if needed
} 
```

然后，你会像这样使用枚举

```
myProperty = ClassProperty.First | ClassProperty.Second; // sets both First and Second
bool thirdIsSet = myProperty.HasFlag(ClassProperty.Third); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:15:24.350

您说所有可能的 ClassProperty-objects ( `arrPossibleProperty`) 的数组在运行时被初始化。然后我假设您不知道该数组可能有多大。这排除了枚举，根据定义，枚举是硬编码的。如果您改用您在问题中指出的某种位图，则需要在某些时候迭代 arrPossibleProperty*和*您的 ClassProperty 列表`lstProperty`以进行映射和取消映射。

我的意思是，你做了很多假设，声称做这个位摆弄更快，而你实际上是在使用高级 C# 对象。永远不要假设。测试。措施。

这是一个[与您的问题非常相似](https://stackoverflow.com/questions/5162810/c-sharp-check-if-one-collection-of-values-contains-another)的问题，其中答案使用标准 .NET 库函数来执行您想要的操作：

```
HashSet<T>().IsSupertSetOf(). 
```

速度*够快*吗？然后使用它而不是使用位操作创建更多不可读的代码。

# c++ - 使用修改的指向常量的指针返回指向非常量的指针

> ID：14728432
> 
> 赞同：0
> 
> 时间：2013-02-06T11:52:38.930
> 
> 标签：c++, constants

从函数返回指向非的指针的最佳实践是什么`const`，该指针是通过修改（非`const`）指向的指针获得的`const`？像这样：

```
NODE *top_level(const NODE *input)
{
  while (input->parent != nullptr)
    input = input->parent;  // NODE::parent is (non-const) NODE*

  return input;  // Compile failure: 
                 // Cannot convert from 'const NODE *' to 'NODE *'
} 
```

我可以`const_cast`在`const`返回时离开，这似乎很好，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T11:55:56.310

至少在标准库中，最佳实践是提供`const`和非`const`重载。例如`std::strchr`被声明`<cstring>`为

```
char *strchr(char *s, int c);
char const *strchr(char const *s, int c); 
```

同样，类似的函数也`std::map<T>::find`有重载，例如

```
iterator find(const Key& key);
const_iterator find(const Key& key) const; 
```

请注意，`const`第一个版本没有限定符，即使它`find`本身没有理由修改`map`.(*) 关键是你从中得到的东西`find`可以*用来*修改地图，所以通过一种“传递性可变性”，`find`不能`const`。我认为，同样的情况也适用于你的问题。

或者，您可以使用 a `const_cast`，但对我来说，这感觉就像违背了承诺。

这种情况的有趣之处在于，如果您可以保证永远不会在树的顶部项目（或任何输入）上调用您的函数，那么就不需要强制转换或重载：

```
struct node {
    node *parent;
};

node *top(node const *n)
{
    node *p = n->parent;
    while (p->parent != 0)
        p = p->parent;
    return p;
} 
```

编译没有任何警告。

(*) 如果`std::map`实现为展开树，`find`则必须对其进行修改，但我认为由于复杂性保证，标准不允许展开树。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T12:24:16.277

[编辑：在我们的两次编辑之后，我认为我的答案和 larsmans' 现在是相同的，但是对于不同的选项，事情的顺序不同，细节层次也不同。我鼓励人们不要费心赞成这个答案，除非你看到它和 larsmans' 之间的一些重要区别。如果没人找到，我会删除它。]

*如果*您确定`const`-ness 不*应该*`*input`暗示该函数不会为您提供修改列表更靠前的某个其他节点的方法，那么解决方法是：

 *```
NODE *top_level(const NODE *input_)
{
  NODE *input = const_cast<NODE*>(input_);
  while (input->parent != nullptr)
    input = input->parent;

  return input;
} 
```

但这对我来说似乎是错误的，*因为该函数可以返回与传入的完全相同的指针值*。

因此，由于它可以为其他代码（尽管是调用者）提供修改其输入的方法，因此不应将其输入标记为`const`. “正确”的解决方案是提供 const 和非 const 重载，因为这就是避免编写“走私 constness”的函数的方式，例如非重载 C 版本的`strstr`和其他返回非 const 的字符串搜索函数。

如果不是因为从指向同一个节点的指针中删除 const 的风险（想象一下输入以某种方式保证不是顶级节点，并想象你仍然确定第一个节点的 constness 应该'不暗示列表中其他节点的常量），那么你可以这样写：

```
NODE *top_level(const NODE *input)
{
  NODE *result = input->parent;
  while (result->parent != nullptr)
    result = result->parent;

  return result;
} 
```

请注意，我们不再需要`const_cast`，当我们添加使函数本身成为负责任的 const 安全公民所必需的假设时，它就消失了。系统有效！;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:55:33.387

至少在接口级别，通常的解决方案是重载`const`，提供两个函数`NODE const* top_level( NODE const* input )`和`NODE* top_level( NODE* input )`。如果您不想复制代码，则可以使用`const_cast`另一个来实现一个。*

# entity-relationship - 如何在实体关系图中设计产品和类别表

> ID：14728437
> 
> 赞同：0
> 
> 时间：2013-02-06T11:52:49.063
> 
> 标签：entity-relationship

我正在设计一个 ERD。我正在考虑如何将 a 链接`product entity`到 a`category` 我有两个类别：

```
 1\. BrandCategory (i.e. Apple, Nokia etc.)
 2\. TypeCategory (Smartphone, Laptop, Tablet etc.) 
```

一个产品可以属于一个`BrandCategory`和一个`TypeCategory.`

somoene 可以告诉我如何将这些联系起来吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T00:38:19.263

这很容易。首先看看你的对象：P = Product，BC = BrandCategory，TC = TypeCategory

1) BC 和 TC 互不相关。

2) P 与 TC 有关。让我们看看对象：

```
 P_1 ----> TC_1 (read as: Product_1 belongs to TypeCategory_1)
    P_2 ----> TC_1
    P_3 ----> TC_2 
```

如我们所见，ONE 产品属于 ONE typeCategory。ONE typeCategory 可以有很多产品。

所以我们在这里有一对多的关系。

![在此处输入图像描述](../Images/9789b2fda3c708db593bf56ab684a9a3.png)

对brandCategory 执行相同的操作。并且模型应该是完整的。

但我建议你在这里有继承权。您也可以使用继承对其进行建模，这可能更有意义。谷歌“实体关系”以获取更多信息。

问候

# javascript - 如何并排放置 2 个 div（替代解决方案）

> ID：14728439
> 
> 赞同：0
> 
> 时间：2013-02-06T11:52:58.150
> 
> 标签：javascript, html, css, tags

我正在尝试完成一些简单的事情，比如将 div 并排放置。问题是我在 CSS 方面非常有能力，但是我尝试使用的解决方案不能按预期工作，这就是问题所在。

我用过：（所以两个 div 并排放置）

> 显示：块；
> 向左飘浮;
> 右边距：15px；

**它在本地**完美地工作，问题是我将其创建为模板解决方案，将 html 和 css 构建到系统中，然后将生成到 javascript 标记。然后，javascript 标记将被投放到不同的网站，因此，它在所有浏览器中的作用相同非常重要。

然后我尝试将 div （放在一边的那个）定位到：absolute 并使用 left 将它定位在一边......这也不起作用，因为它绝对是实现标签的位置，这意味着它会出现不同的地方取决于实施标签的站点。

所以我的问题是，有没有一种方法可以使用 css 或 javascript，所以无论我在哪里实现标签，我的 div 都是并排的？

下面是我的代码：

HTML：

```
<!DOCTYPE html>
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Sidekick</title>     
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="scripts/sidekick.js"></script>      
    <link href="css/style.css" rel="stylesheet" type="text/css">    
    </head>
        <body>  
        <div class="eas_sidekick_divs">     
            <div id="eas_sidekick">
                <div class="eas_sidekick_open">x</div>
            </div>
            <div id="eas_sidekick_container"></div>             
        </div>  
    </body>
</html> 
```

CSS：

```
.eas_sidekick_divs div
{
    display: block;
    float: left;
    margin-right:15px;  
}

#eas_sidekick
{
    width:300px;
    height:600px;
    background: #ccc;
}

#eas_sidekick_container
{   
    width: 850px;
    height:600px;
    background: #ccc;           
} 
```

如前所述，此解决方案在本地有效，但在我将其生成到标签之后无效。您可以在此处查看示例：http: [//yoursource.eu/stuff/Templates/sidekick/300x250/javascript.html](http://yoursource.eu/stuff/Templates/sidekick/300x250/javascript.html)

查看不同的浏览器，例如：IE 和 Chrome，看看它们的区别以及它的行为有多奇怪。

单击右侧小横幅的按钮，说明：“退出我”，您会看到 div 展开，展开后的 div 是我想要一直放在右边的那个。

希望你能帮助我！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:21:40.903

您可以使用 display:inline-block; 或显示：块；两者都可以，但是正如您提到的“#eas_sidekick_container”宽度应该等于或不应超过父元素宽度，请更正“#eas_sidekick_container”宽度。

这是更正后的代码

```
<!DOCTYPE html>
<html>
<head>
<title></title>
  <style type="text/css">
   .eas_sidekick_divs div
    {        
        float: left;
        margin-right:15px;  
    }

  #eas_sidekick
  {
      width:300px;
      height:600px;
      background: #ccc;
  }

  #eas_sidekick_container
  {   
      width: 300px;
      height:600px;
      background: #ccc;           
  }
  </style>
</head>
<body>
  <div class="eas_sidekick_divs">     
   <div id="eas_sidekick">
      <div class="eas_sidekick_open">x</div>
   </div>
   <div id="eas_sidekick_container"></div>              
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:03:49.740

我已经找到了一个解决我的问题的 javascript 解决方案。

我已经在所有浏览器中使用绝对位置来修复它，然后创建了一个 javascript，根据网站的宽度，它始终将自身定位在我的容器右侧 10 像素处。

下面是我的代码：

```
$(document).ready(function() {

    var cssWidth = 1024;
    var cssPos = 10;

    $("#eas_sidekick_container").hide();
    $("#eas_sidekick_container").css(
    {
        width: '0px',
        position: 'absolute',
        top: '0px',
        left: cssWidth + cssPos
    });

 $(".eas_sidekick_open").click(
            function() {
                $("#eas_sidekick_container").show();
            $("#eas_sidekick_container").animate({
                width: '850px'              
            });
            $('html, body').animate({
                scrollLeft: '850'
            });
    });

 $(".eas_sidekick_close").click(
            function() {
                $("#eas_sidekick_container").animate({
            width: '0px'
            });
            setTimeout( function(){
                $("#eas_sidekick_container").css(
                    'display' , 'none' 
                );
            }, 350);
    });
}); 
```

# ruby-on-rails - 注册时 - 在另一个站点上创建具有相同凭据的重复帐户

> ID：14728450
> 
> 赞同：-1
> 
> 时间：2013-02-06T11:53:42.633
> 
> 标签：ruby-on-rails, devise, devise-confirmable

我正在使用设计来处理注册过程。

如何使用相同的凭据在另一个站点上通过 ajax 创建重复帐户？

我可以覆盖注册控制器，但不知道如何获取未加密的密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:02:10.270

您无法获得未加密的密码。

Devise 使用 Bcrypt，这是一种单向加密算法。创建精确副本的唯一方法是直接复制加密密码，而不是使用未加密的版本。

但是我强烈建议不要这样做，你想达到什么目的？有没有更好的方法来处理这个问题 - OAuth？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:05:05.817

您需要覆盖设计注册控制器。

在该`create`方法上，获取用户输入，将其发送到您的其他网站，然后通过设计调用`super`处理注册。

由于 CSRF 保护，您当然希望通过 API 将数据发送到其他网站。

# sql - 两列上的 PSQL 唯一约束

> ID：14728451
> 
> 赞同：4
> 
> 时间：2013-02-06T11:53:44.150
> 
> 标签：sql, constraints, unique, relationship, psql

我有一个表，我用它以一对多的关系将另外两个表链接在一起。

```
TableA
id
name

TableB
id
name

LinkTable
TableA_id
TableB_id 
```

基本上，一个 TableA 可以有多个 TableB。非常简单。我现在遇到的问题是创建一个遵循这种关系规则的约束：

```
LinkTable
TableA_id    TableB_id
1            1
1            2
1            3
2            1
2            2
2            3 
```

我想创建一个唯一约束，将两列组合在一起作为唯一值。所以在上面的链接表中，有了这个新的约束，我可以

```
INSERT INTO LinkTable (TableA_id, TableB_id) VALUES (1, 4);
INSERT INTO LinkTable (TableA_id, TableB_id) VALUES (1, 5);
INSERT INTO LinkTable (TableA_id, TableB_id) VALUES (2, 6);
INSERT INTO LinkTable (TableA_id, TableB_id) VALUES (3, 1);

With out any problems

And if I try to insert:

INSERT INTO LinkTable (TableA_id, TableB_id) VALUES (1, 1);
INSERT INTO LinkTable (TableA_id, TableB_id) VALUES (1, 3); 
```

约束将触发，因为已经有一行包含 1,1 和 1,3。我将如何创建一个 postgres 约束来做到这一点？如果我对两行都设置了唯一约束，那么我不能有多个相同的 TableA_id 和多个相同的 TableB_id。

解决办法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T11:57:09.273

您是否尝试将两列都设置为唯一的？

```
ALTER TABLE LinkTable 
ADD CONSTRAINT LinkTable_Unique UNIQUE (TableA_id, TableB_id); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T11:57:53.397

```
create table LinkTable (
    TableA_id integer REFERENCES TableA(id),
    TableB_Id integer REFERENCES TableB(id),
    UNIQUE(tableA_id, tableB_id)
); 
```

# css - 如何在输入字段上重新启用文本选择

> ID：14728460
> 
> 赞同：3
> 
> 时间：2013-02-06T11:53:59.787
> 
> 标签：css, firefox, selection

根据[MDN](https://developer.mozilla.org/en-US/docs/CSS/user-select) ，元素的`-moz-user-select`-property 也将设置在所有子元素上。它还指出可以使用`-moz-user-select:text`.

我无法让它在 Firefox 中的输入元素上工作，但它在 Chrome 中工作。关于如何解决这个问题的任何想法？

示例： http: [//jsfiddle.net/NBNpF/3/](http://jsfiddle.net/NBNpF/3/)（尝试将焦点放在输入框中，它仅适用于 Chrome，不适用于 Firefox）。我正在使用 FireFox 18.0.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:51:16.357

我找到了我认为的解决方案，关键是替换`-moz-user-select: none;`为`-moz-user-select: -moz-none;`。

所以你的 CSS 必须是这样的：

```
.unselectable {
  -moz-user-select: -moz-none;
  -webkit-user-select: none;
} 
```

我更新了你的 jsfiddle：http: [//jsfiddle.net/NBNpF/7/](http://jsfiddle.net/NBNpF/7/)

我希望这有帮助。

# jboss - mod集群中的负载平衡不起作用

> ID：14728466
> 
> 赞同：2
> 
> 时间：2013-02-06T11:54:14.287
> 
> 标签：jboss

我在 Linux 盒子里有 Jboss 服务器。我在 Windows 机器上配置了 apache 服务器。我可以在我的 modcluster 管理器控制台中看到所有 jboss 服务器节点。我在所有 jboss 服务器上部署了一个骆驼应用程序。我已经用 2,4,6 个节点进行了性能测试。但是没有性能差异......

找到jboss配置

```
<subsystem xmlns="urn:jboss:domain:modcluster:1.0">
            <mod-cluster-config proxy-list="x.x.x.x:6666" advertise="false">
                <dynamic-load-provider>
                    <load-metric type="busyness"/>
                </dynamic-load-provider>
            </mod-cluster-config>
        </subsystem> 
```

对于节点的并行执行，我是否必须做任何其他配置......

提前致谢................

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-07T16:56:06.907

[1 - 在此链接](http://www.jboss.org/mod_cluster)下载最新版本的 mod_cluster并将其解压缩。 2 - 在 httpd.conf 文件中配置您的 mod_cluster ，如上..

```
Listen ##PUT THE BALANCER IP HERE##:80

############### mod_cluster Setting - STARTED ###############

<IfModule ssl_module>
SSLRandomSeed startup builtin
SSLRandomSeed connect builtin
</IfModule>
# MOD_CLUSTER_ADDS
# Adjust to you hostname and subnet.
<IfModule manager_module>
  Listen ##PUT THE BALANCER IP HERE##:6666
  ManagerBalancerName mycluster
  <VirtualHost ##PUT THE MACHINE IP HERE##:6666>
    <Location />
     Order deny,allow
     Deny from all
     Allow from 192.168.0
    </Location>

    KeepAliveTimeout 300
    MaxKeepAliveRequests 0
    AdvertiseFrequency 5
    EnableMCPMReceive

    <Location /mod_cluster_manager>
       SetHandler mod_cluster-manager
       Order deny,allow
       Deny from all
       Allow from 192.168.0
    </Location>

  </VirtualHost>
</IfModule>

############### mod_cluster Setting - ENDED ############### 
```

3 - 设置每个 jboss 节点的名称

```
<server name="node1" xmlns="urn:jboss:domain:1.2"> 
```

4 - 在 web 子系统中添加 instance-id 属性，如下所示在两个独立节点中

```
<subsystem xmlns="urn:jboss:domain:web:1.1" instance-id="${jboss.node.name}" default-virtual-server="default-host" native="false">
    <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http"/>
    <connector name="ajp" protocol="AJP/1.3" scheme="http" socket-binding="ajp"/>
    .
    .
    .
</subsystem> 
```

5 - 在 modcluster 子系统的 mod-cluster-config 属性中添加代理列表，该属性将具有运行 Apache 服务器（平衡器）的 IP 地址和端口，以便 JBoss 服务器可以与其通信，如图所示在两个独立节点下方

```
<subsystem xmlns="urn:jboss:domain:modcluster:1.0">
    <mod-cluster-config advertise-socket="modcluster" proxy-list="##PUT THE BALANCER IP HERE##:80">
    .
    .
    .
    </mod-cluster-config>
</subsystem> 
```

6 - 现在你可以去`http://BALANCER_IP:80`测试它并使用 mod_cluster 管理 jboss 实例去`http://BALANCER_IP:6666/mod_cluster_manager`

**Obs：如果您想在独立模式下运行 jboss，则不能使用带有 ip 0.0.0.0 的“-b”标志来侦听来自所有 IP 的请求。我建议您使用运行 jboss 本身的机器的 IP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:09:05.743

使用sticky-session="true"（默认），平衡器会不断向会话所属的特定节点发送请求，只要它是健康的。

如果你告诉我你是如何测试的，特别是：有多少客户与多少请求，或者没有等，我将能够帮助你。

此外，考虑编辑*load-metric*元素的*容量*属性。

 *顺便说一句：“*忙碌*”认为线程池中的线程正被服务请求占用。您可能会发现这不是您系统的瓶颈。您可能想要添加*heap*、*requests*或其他指标。见[http://docs.jboss.org/mod_cluster/1.2.0/html_single/](http://docs.jboss.org/mod_cluster/1.2.0/html_single/)*

# java - 生成随机长用户ID

> ID：14728474
> 
> 赞同：2
> 
> 时间：2013-02-06T11:54:41.280
> 
> 标签：java, random, statistics, long-integer, stochastic

我正在编写一个 android 应用程序，通过这个公式为每个客户端提供一个长用户 ID：

`long userID = (long) (Math.random() * 2 * Long.MAX_VALUE - Long.MAX_VALUE);`

我是否正确利用了 MAX_VALUE，即利用了每一个可能的长期价值？

我有 10k、100k 或 1m 用户的两个重复用户 ID 的可能性有多大？我怎么能计算这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T11:58:02.797

您可以使用以下任何一种：

1.  使用以毫秒表示的当前日期和时间，而不是使用随机获取长用户 ID。

2.  使用随机 UUID

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-23T17:05:18.963

[https://github.com/bigfatsea/SUID](https://github.com/bigfatsea/SUID)简单唯一标识符

您可能会期望 136 年后在同一实例上出现重复的 id，这对于中小型项目来说已经足够了。

例子：

```
long id = SUID.id().get(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:56:45.403

您可以使用生成随机 UUID`randomUUID()`

[文件](http://java.sun.com/j2se/1.5.0/docs/api/java/util/UUID.html#randomUUID%28%29)

# android - Android：解析json文件

> ID：14728476
> 
> 赞同：-2
> 
> 时间：2013-02-06T11:54:48.550
> 
> 标签：android, json, parsing

我需要调用此 URL：[https ://login.skype.com/json/validator?new_username=name.surname](https://login.skype.com/json/validator?new_username=name.surname)

我获得了一个 json 文件格式。我只需要获取与标签“状态”相关的元素。对于上面的链接是“状态”：406，所以我需要值 406。实现只获取这个元素的解析器的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T11:59:54.407

你得到这个响应作为一个字符串了吗？这是您的第一步，但是当您要求解析器时，我假设您已经完成了此操作。如果是这样，其余的很容易：

```
String jsonString = parsedString; //The downloaded JSON String
JSONObject firstObj = new JSONObject(parsedString);
String status = firstObj.getString("status"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:57:15.683

[您可以使用JSONObject](http://developer.android.com/reference/org/json/JSONObject.html)检索它们。这是一个非常简单的例子，只解析出一个节点的 id：

```
JSONObject object = new JSONObject(myJsonString);     
JSONObject nodes = object.getJSONObject("nodes");
JSONObject zero = nodes.getJSONObject("0");
JSONObject myNode = zero.getJSONObject("node");
String id myNode = myNode.getString("id"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T12:01:31.610

对于这种特殊情况，最简单的方法是

```
JSONObject obj=new JSONObject(myJSONString);
String status=obj.getString("status"); 
```

您必须处理 JSONException 以防找不到标签“status”。

# hadoop - hadoop map reduce中分组比较器有什么用

> ID：14728480
> 
> 赞同：23
> 
> 时间：2013-02-06T11:54:53.833
> 
> 标签：hadoop, mapreduce, hadoop-partitioning

我想知道为什么在二级mapreduce中使用分组比较器。

根据二次排序的权威指南示例

我们希望键的排序顺序是按年份（升序）然后按温度（降序）：

```
1900 35°C
1900 34°C
1900 34°C
...
1901 36°C
1901 35°C 
```

通过设置一个 partitioner 来按 key 的 year 部分进行分区，我们可以保证同一年的记录去同一个 reducer。然而，这仍然不足以实现我们的目标。partitioner 确保只有一个 reducer 接收一年内的所有记录；它不会改变 reducer 在分区中按键分组的事实。

既然我们已经编写了自己的分区器，它将负责将映射输出键发送到特定的减速器，那么我们为什么要对它进行分组。

提前致谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-11-01T23:02:50.243

为了支持所选的答案，我补充说：

继[这个解释](http://vangjee.wordpress.com/2012/03/20/secondary-sorting-aka-sorting-values-in-hadoops-mapreduce-programming-paradigm/)

```
**Input**:

    symbol time price
    a      1    10
    a      2    20
    b      3    30

**Map output**: create composite key\values like so:

> symbol-time time-price
>
>**a-1**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1-10
>
>**a-2**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2-20
>
>**b-3**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3-30 
```

**Partitioner** : 将 a-1 和 a-2 键路由到同一个 reducer，尽管键不同。它还将 b-3 路由到单独的减速器。

**GroupComparator**：一旦复合键\值到达reducer而不是reducer得到

```
>(**a-1**,{1-10})
>
>(**a-2**,{2-20}) 
```

***由于组合后的唯一键值，会发生上述情况。***

组比较器将确保减速器获得：

```
(a-1,{**1-10,2-20**}) 
```

分组值的键将是组中第一个出现的值。这可以通过键比较器来控制。

```
**[[In a single reduce method call.]]** 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-07T05:53:07.580

让我改进一下语句“......照顾到特定减速器的映射输出键”。

Reducer 实例与 reduce 方法：每个 Reduce 任务创建一个 JVM，每个 JVM 都有一个 Reducer 类的实例。这是 Reducer 实例（我从现在开始称之为 Reducer）。在每个 Reducer 中，reduce 方法被调用多次，具体取决于在'key grouping'上。每次调用reduce时，'valuein'都有一个map输出值列表，这些值由你在'grouping comparison'中定义的键分组。默认情况下，分组比较器使用整个map输出键。

例子中map output key改为'year and temperature'来实现排序。除非你定义一个分组比较器，只使用map output key的'year'部分，否则你不能做同一年的所有记录转到相同的 reduce 方法调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T03:19:29.193

您需要引入一个由年份和温度组合而成的中间键；对自然键（年份）进行分区并引入一个比较器，该比较器将对整个复合键进行排序。没错，通过按年份进行分区，您将在同一个减速器中获得一年的所有数据，因此比较器将有效地按温度对每年的数据进行排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-19T23:49:41.967

默认的 partitioner 计算 key 的 hash，那些 hash 值相同的 key 会被发送到同一个 reducer。如果您的映射器中有一个复合（自然+增强）键，并且如果您想将具有相同自然键的键发送到同一个减速器，那么您必须实现一个自定义分区器。

```
public class SimplePartitioner implements Partitioner {
@Override
public int getPartition(Text compositeKey, LongWritable value, int numReduceTasks) {
    //Split the key into natural and augment
    String naturalKey = compositeKey.toString().split("separator")

    return naturalKey.hashCode();
} 
```

}

现在，如果您希望将**数据分区中的所有相关行发送到单个 reducer**，您还必须实现一个仅考虑自然键的分组比较器

```
public class SimpleGroupingComparator extends WritableComparator {

@Override
public int compare(Text compositeKey1, Text compositeKey2) {

return compare(compositeKey1.getNaturalKey(),compositeKey2.getNaturalKey());
} 
```

}

# javascript - 如果 javascript 被禁用，则移动链接页面或显示弹出窗口

> ID：14728491
> 
> 赞同：0
> 
> 时间：2013-02-06T11:55:22.173
> 
> 标签：javascript, jquery, html, popup, onclick

我为禁用 javascript 的浏览器编写了这个脚本。

这是HTML：

```
<a href="http://www.google.com/" onClick="jstest();">Google</a> 
```

这是Javascript：

```
<script type="text/javascript">
    function jstest() {
    alert("Success");
    // show popup
    return false;
    };
</script> 
```

如果启用了 javascript，它应该提醒一个显示成功的弹出窗口。如果它被禁用，它应该移动到谷歌页面。一个朋友告诉我这样做。它适用于 jsFiddle.net。但如果我尝试在我的工作中做到这一点，那就不行了。

当我点击时它会显示弹出窗口，当我关闭弹出窗口时它会移动到谷歌页面。

我希望它保持在同一页面上。我不希望它在链接页面上移动。

只有在禁用 javascript 时它才会移动。

我在这个脚本中做错了什么？

谢谢你，

基肖尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:57:08.453

您需要在它尝试分配处理程序的元素*之后*`onclick`包含该脚本。或者将该代码包装在`onload`处理程序中。否则 JS 在元素被解析之前执行所以`getElementById("goo")`找不到它。

顺便说一句，您不需要内联 html 属性`onclick`以及在 JS 中分配处理程序。该属性正在尝试调用`jstest()`您的代码中不存在的全局函数。您可以删除该`document.getElementById("goo").onclick =`部分，只需声明与内联 html 属性中使用的名称相同的函数`onclick`。

我猜它可以在 jsfiddle.net 上工作，因为默认情况下 jsfiddle 将您的代码包装在一个`onload`处理程序中（您可以通过左侧的面板更改它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:01:37.040

不明白为什么您的代码中嵌入了 onclick

jQuery :

```
$(function() {
    $("#goo").click(function(e){
      e.preventDefault();
      // Do whatever you want here
    })
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:06:36.663

你可以使用 jQuery 来做这样的事情

```
$(document).ready(function() {
    $("#goo").click(function(event){
      event.preventDefault();
      alert("Success");
    });
}); 
```

希望这可以帮助

这是一个[链接](http://jsfiddle.net/rogerblake/792qP/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T14:43:54.573

试试这个作为你的超链接：

```
<a href="http://www.google.com/" onClick="return jstest();"> 
```

onClick 中的返回应该确认您的函数的返回 false 应该冒泡到超链接的行为。

# mvvm - MEF 对象之间的通信

> ID：14728492
> 
> 赞同：0
> 
> 时间：2013-02-06T11:55:24.557
> 
> 标签：mvvm, mef, mvvm-light

我正在构建一个工作台/IDE 风格的应用程序，它使用 MEF 在启动时将工具定位并加载到工作台中。

我正在使用 MVVM Light 来构建工作台和单独的工具。我现在有一点，我希望工具能够相互通信以及工作台。

我不是指直接交流，更像是“嘿，如果有人感兴趣，我这里有一些数据”，感兴趣的工具可以获取数据。

这看起来很像 C# 事件，我知道我可以从定义事件的工具中导出一个接口，但我也想知道使用 MVVM Light messenger 来提供通信。

我在这里看到人们正在使用 Prism 的 EventAggregator 来做同样的事情，因为 MVVM Light 的信使大致类似，我想我可以使用它。

我真的在寻求建议，有没有人使用 MEF 的信使 - MEF 对象，你会提倡它而不是普通的旧 C# 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:39:19.727

您在这里看到的是中介者模式。您可以使用普通的旧 C# 事件来做同样的事情......但如果做对了，您很可能最终会实现自己的发布/订阅模式。如果你要这样做，为什么要重新发明轮子？

我喜欢使用 prism 的 EventAggregator，因为它是注入 MEF 的 Prism 框架的一部分。我使用了 Prism 的许多其他东西，所以很高兴能“免费”获得它。它还促进了与您的组件的松散耦合，并且像所有好的中介实现一样，它是使用弱事件模式实现的，这可以防止您在销毁已订阅事件的对象时需要避免的内存问题。

值得一提的是，我曾经使用过 MVVM Light，但我发现 Prism 是一个更成熟的框架，有更好的文档、示例和更大的用户群可供学习。这只是我的观点——我认识很多喜欢 MVVM Light 的人。和他们一起玩，然后选择一个让你开心的:)

# backbone.js - 将 Kendo.Grid 与 Backbone.Collection 集成

> ID：14728498
> 
> 赞同：0
> 
> 时间：2013-02-06T11:55:38.333
> 
> 标签：backbone.js, kendo-ui

## 背景

我正在一个基于客户端-服务器 REST 的应用程序中工作，该应用程序管理各种信息并定义了一个`EntitiesCollection`扩展`Backbone.Collection`. 它`EntitiesCollection`有一个用于 CRUD 操作、过滤、排序等的 API（它扩展了 Backbone.Collection API）。

我的团队需要编写一个可以显示和操作`EntitiesCollection`对象的 Grid 组件。该网格将基于一些 3rd 方组件，我们正在认真考虑使用`Kendo.Grid`.

## 挑战

我的第一个问题是，是否有人曾尝试**使用其 data\data-source 实际上是 Backbone.Collection 的 Kendo.Grid，这**是否是一个好的和适用的想法？

我看过各种关于**Kendo**和**Backbone**集成的文章，包括 Derick Bailey 的[Backbone And Kendo UI: A Beautiful Combination](http://www.kendoui.com/blogs/teamblog/posts/12-11-26/backbone_and_kendo_ui_a_beautiful_combination.aspx)。但是，这些文章讨论了视图级别的集成（`Kendo.Grid`用 a包装`Backbone.View`）。我正在寻找的是数据级集成 -`Kendo.Grid`与`Backbone.Collection`.

## 选项

据我所知，到目前为止，它`Kendo.Grid`与 a 一起工作，`Kendo.DataSource`而后者又拥有一个内部集合 - a `Kendo.ObservableArray`。

假设我们要这样做，我会看到几个实现选项：

1.  我们讨论的选项之一是将我们的转换`EntitiesCollection`为 a`Kendo.DataSource`但这似乎不是一个选项 - 与服务器的通信必须通过我们自己的对象完成。

2.  替换为`Kendo.DataSource`-`EntitiesCollection`我们`EntitiesCollection`将实现`Kendo.DataSource`API，并且网格将使用它作为它的 dataSource 对象。我不喜欢这个解决方案，因为我认为我会失去 Kendo 在`Kendo.DataSource`对象中为我提供的许多功能。

3.  将`Kendo.DataSource`包装我们自己的`EntitiesCollection`并将请求委托给它。

4.  包含的`Kendo.ObservableArray`对象`Kendo.DataSource`将包装我们的`EntitiesCollection`（参见我在网上找到的[这个示例实现）。](https://github.com/telerik/kendo-backbone)这种方法似乎适用于简单的用例，但是对我来说似乎有些问题-我认为这`Backbone.Collection`不是`data`对象（在剑道术语中）而是`DataSource`对象-因为它是与远程服务器交互并获取数据的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:03:44.720

所有 Kendo UI 小部件（包括网格）只能**绑定**到`kendo.data.DataSource`.

我创建了“ [kendo-backbone](https://github.com/kendo-labs/kendo-backbone) ”项目来展示一种将 Kendo UI 与 Backbone 集成的可能方式。该项目将现有的 Backbone Collection 包装为 Kendo ObservableArray。后者就像一个简单的代理，完全与 Backbone 集合一起工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T19:33:59.803

您可能对我刚刚发布的这篇文章感兴趣：

[http://www.kendoui.c​​om/blogs/teamblog/posts/13-02-07/wrapping_a_backbone_collection_in_a_kendo_data_datasource.aspx](http://www.kendoui.com/blogs/teamblog/posts/13-02-07/wrapping_a_backbone_collection_in_a_kendo_data_datasource.aspx)

在其中，我介绍了构建适配器以使用 Backbone.Collection 作为 DataSource 的后备存储并将其连接到 Kendo UI Grid 所需的基本知识。

I haven't completely solved all of your needs - for example, no paging support - but hopefully this will get you down the path far enough.

# javascript - 关闭的javascript问题

> ID：14728503
> 
> 赞同：0
> 
> 时间：2013-02-06T11:55:53.657
> 
> 标签：javascript, closures

给定以下代码：

```
String.method('deentityify', function () {
    var entity = {
        quot: '"',
        lt: '<',
        gt: '>'
    };

    return function () {
        return this.replace(/&([^&;]);/g,
            function (a, b) {
                var r = entity[b];
                return typeof r === 'string' ? r : a;
            }
        );
    };
}());
document.write('deentityify: ' + '&lt;&quot;&gt;'.deentityify() + '<br>'); 
```

关于

```
function (a, b) {
    var r = entity[b];
    return typeof r === 'string' ? r : a;
} 
```

匿名函数怎么会得到参数值a、b？当然我试过了，输出是对的。谁能帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:02:43.323

该函数实际上是“替换”调用的参数。正则表达式匹配作为参数传递给函数。以另一种方式编写代码，它看起来：

```
function match(a, b) {
    var r = entity[b];
    return typeof r === 'string' ? r : a;
}

var result = this.replace(/&([^&;]);/g, match) 
```

参数 (a & b) 的名称无关紧要，可以是您喜欢的任何名称。第一个参数将是匹配值，后续参数将是匹配组的值。所以为了清楚起见，函数可以写成：

```
function matchFn(match, group1, group2, group3) {
    var r = entity[group1];
    return typeof r === 'string' ? r : match;
} 
```

引用[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)

> 要调用的函数以创建新的子字符串（代替从参数 #1 接收的子字符串）。提供给此函数的参数在下面的“将函数指定为参数”部分中进行了描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:03:45.647

您可以将函数作为第二个参数移交给`replace()`. 该函数充当某种回调函数，并`replace`以固定顺序从调用中接收它的参数，如[Docs](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)中所述。

`a`并且`b`只是任意名称 -`a`是匹配的子字符串和`b`捕获组`([^&;])`。

# android - 如何在android中清除'text-watcher'以前的值？

> ID：14728505
> 
> 赞同：2
> 
> 时间：2013-02-06T11:55:56.023
> 
> 标签：android, textwatcher

我 在我的活动中使用附加到**MultiAutoCompleteTextView的文本观察器****的 onTextChanged(CharSequence s, int start, int before, int count) 。**

 **当我为例如输入一些文本时。**MultiAutoCompleteTextView**中的“nik” ，然后下拉列表打开一些建议的句子，当从下拉列表中选择一个项目时，例如。(nikhil kaushik;) 然后我也按回删除一个字符，所有的东西都会被删除，除了初始搜索值'Nik'。

如何防止这种情况，我不希望所有内容都被删除，只应从“nikhil kaushik;”中删除最后一个字符。

请你帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:30:22.210

在方法或 Override方法`""`末尾的文本视图中设置空字符串，并使用空字符串设置文本视图。`onTextChanged``afterTextChanged``text watcher`**

# php - 在 CakePHP 表单中创建查找字段

> ID：14728507
> 
> 赞同：0
> 
> 时间：2013-02-06T11:56:02.113
> 
> 标签：php, cakephp, cakephp-2.1

我有一个使用 Bake 创建的视图，该视图具有以下内容：

```
<fieldset>
    <legend><?php echo __('Edit Device'); ?></legend>
<?php
    echo $this->Form->input('DeviceID');
    echo $this->Form->input('DeviceTypeID');
    echo $this->Form->input('UserID');
    echo $this->Form->input('Type');
    echo $this->Form->input('KeyPadID');
    echo $this->Form->input('Version');
    echo $this->Form->input('Description');
    echo $this->Form->input('UpdateID');
?>
</fieldset> 
```

保存到表中：

```
CREATE TABLE `device` (
    `DeviceID` VARCHAR(255) NOT NULL ,
    `DeviceTypeID` INT(11) NOT NULL ,
    `UserID` INT(10) NOT NULL ,
    `Type` VARCHAR(10) NULL DEFAULT NULL ,
    `KeyPadID` INT(10) NULL DEFAULT NULL ,
    `Version` VARCHAR(255) NULL DEFAULT NULL ,
    `Description` TINYBLOB NULL ,
    `UpdateID` INT(11) NULL DEFAULT NULL ,
    PRIMARY KEY (`DeviceID`),
    INDEX `FK_USER` (`UserID`),
    INDEX `FK_devices_updates` (`UpdateID`),
    INDEX `FK_device_devicetype` (`DeviceTypeID`),
    CONSTRAINT `FK_device_devicetype` FOREIGN KEY (`DeviceTypeID`) REFERENCES `devicetype` (`DeviceTypeID`),
    CONSTRAINT `FK_devices_updates` FOREIGN KEY (`UpdateID`) REFERENCES `update` (`ID`) ON UPDATE CASCADE ON DELETE CASCADE,
    CONSTRAINT `FK_USER` FOREIGN KEY (`UserID`) REFERENCES `user` (`UserID`) ON UPDATE CASCADE ON DELETE CASCADE
) 
```

我的问题是，当显示表单时，它显示 DeviceTypeID 和 UserID 以及 UpdateID 作为外键值，而不是下拉菜单，标题是文本，值是 ID 列。我将如何将外部表中的字段设置为显示字段并将 id 设置为值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:39:11.187

**2013 年 11 月 2 日更新**

首先，我强烈建议相应地转换您的主键和外键，以便它们符合 CakePHP 命名约定。

这意味着：

*   `DeviceID`应该是`id`。
*   `DeviceTypeID`应该`device_type_id`
*   `UserID`应该`user_id`

此外，表中的所有主键都应命名为`id`. 这样，您将永远不必担心任何关于您的模型等的事情。

之后，您的所有表格都必须是**复数**形式。这意味着`device`table 应该是`devices`，所以你也应该重命名它。我假设您还有以下表格：`devices_types`和`users`.

在这一点上，我应该注意到我更喜欢有一个名为`devicetype`. 我避免使用下划线的名称，因为为每个对象、类等使用正确的形式很容易出错。所以我不必担心是否应该使用 CamelCase。

反正

你的`Device`模型应该是这样的：

```
<?php
/** Device.php **/
class Device extends AppModel {
    public $name = 'Device';
    public $belongsTo = array(
        'DeviceType' => array(
            'className' => 'DeviceType',
            'foreignKey' => 'device_type_id'
            /** Specify other keys that meet your needs **/
        ),
        'User' => array(
            'className' => 'User',
            'foreignKey' => 'user_id'
        )
    );
};
?> 
```

您的`DeviceType`模型也应该类似于

```
<?php
/** DeviceType.php **/
class DeviceType extends AppModel {
    public $name = 'DeviceType';
}; 
```

在您的`edit()`方法中，您应该`DeviceType`像这样查询您的：

```
...
$devicetypes = $this->Device->DeviceType->find('list', array('id', 'caption'));
$this->set(compact('devicetypes'));
... 
```

这样，在您的视图中，相应的表单元素会`<select>`正确设置菜单。

PS：您应该遵循关于模型命名等的 CakePHP 约定......我的只是一个例子。

# perl - 在 perl 中解析 csv 文件

> ID：14728511
> 
> 赞同：-1
> 
> 时间：2013-02-06T11:56:08.563
> 
> 标签：perl, csv

我正在使用以下代码来读取 csv 文件的最后一行。如何将收到的行拆分为数组？

```
use warnings;
use Tie::File;

tie my @file, 'Tie::File', 'server1-20130205.csv', mode=>O_RDONLY or die $!;
print $file[-1]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:06:07.127

CPAN 模块是什么：Text::CSV

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T12:07:40.203

请参阅[文本::CSV](http://p3rl.org/Text%3a%3aCSV)。

```
use Text::CSV;

my $csv    = Text::CSV->new;
my $status = $csv->parse($file[-1]);
my @fields = $csv->fields; 
```

使用`$file[-1]`假设您的字段中没有换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:04:54.087

你必须使用[`split`](http://perldoc.perl.org/functions/split.html). 假设您的字段分隔符是逗号，请这样做：

```
my $data = split /,/, $file[-1]; 
```

# mysql - MySQL 每天按一周中的一天计算的总数

> ID：14728512
> 
> 赞同：1
> 
> 时间：2013-02-06T11:56:10.177
> 
> 标签：mysql

我的购物车收入似乎因一周中的每一天而异，周一和周四是淡季，周三和周六是旺季。因此，我想显示一个显示总计的网页，如下所示：

```
Week #    Sun    Mon    Tue    Wed    Thu    Fri    Sat
Week 1   $5.00  $1.00  $3.00  $9.00  $1.00  $3.00  $9.00
Week 2   $5.23  $1.07  $2.98  $8.75  $0.02  $3.14  $7.51
Week 3   etc. 
```

我可以像这样查询一周中的某一天：

```
SELECT count( id ) AS orders, 
       order_date, 
       date_format( order_date, '%a' ) AS weekday, 
       sum( total) AS revenue
FROM `ss_orders`
WHERE dayofweek( order_date ) = 1
      AND order_date >= date_add( now( ) , INTERVAL -83 DAY )
GROUP BY order_date
ORDER BY order_date DESC 
```

这给了我过去 12 周内所有星期日的每日总数。因此，我可以进行 7 次查询来获得我需要的信息（一周中的每一天都有 1 次查询）。看来我应该能够在一个查询中得到整个事情。

查询应该是什么？谢谢！

编辑：这是来自首选解决方案的更正查询。

```
SELECT 
  week( o.order_date ) as WkNumber,
  sum( if( weekday( o.order_date ) = 6, 1, 0 ) * o.total ) as SalesSun,
  sum( if( weekday( o.order_date ) = 6, 1, 0 )) as OrdersSun,
  sum( if( weekday( o.order_date ) = 0, 1, 0 ) * o.total ) as SalesMon,
  sum( if( weekday( o.order_date ) = 0, 1, 0 )) as OrdersMon,
  sum( if( weekday( o.order_date ) = 1, 1, 0 ) * o.total ) as SalesTue,
  sum( if( weekday( o.order_date ) = 1, 1, 0 )) as OrdersTue,
  sum( if( weekday( o.order_date ) = 2, 1, 0 ) * o.total ) as SalesWed,
  sum( if( weekday( o.order_date ) = 2, 1, 0 )) as OrdersWed,
  sum( if( weekday( o.order_date ) = 3, 1, 0 ) * o.total ) as SalesThu,
  sum( if( weekday( o.order_date ) = 3, 1, 0 )) as OrdersThu,
  sum( if( weekday( o.order_date ) = 4, 1, 0 ) * o.total ) as SalesFri,
  sum( if( weekday( o.order_date ) = 4, 1, 0 )) as OrdersFri,
  sum( if( weekday( o.order_date ) = 5, 1, 0 ) * o.total ) as SalesSat,
  sum( if( weekday( o.order_date ) = 5, 1, 0 )) as OrdersSat,
  sum( o.total ) as SalesWeek,
  sum( 1 ) as OrdersWeek
from
  ss_orders o
where
  o.order_date > date_add( now(), INTERVAL -13 WEEK )
group by
  week( o.order_date )
order by o.order_date desc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:42:47.370

按周然后按天分组？

```
SELECT count( id ) AS orders, 
       date_format( order_date, '%a' ) AS weekday, 
       WEEK(order_date) AS week_number,
       sum( total) AS revenue
FROM 
       `ss_orders`
WHERE 
       order_date >= date_add( now( ) , INTERVAL -83 DAY )
GROUP BY 
       WEEK(orderdate), DAY(orderdata)
ORDER BY 
       order_date DESC 
```

应该给你这样的结果：

```
orders | weekday | week_number | revenue
5        Sun       1             20
6        Mon       1             15
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:57:50.063

您实际上正在寻找一种数据透视表查询。

```
SELECT 
      week( o.order_date ) as WkNumber,
      sum( if( weekday( o.order_date ) = 6, 1, 0 ) * o.total ) as SalesSun,
      sum( if( weekday( o.order_date ) = 6, 1, 0 ) as OrdersSun,
      sum( if( weekday( o.order_date ) = 0, 1, 0 ) * o.total ) as SalesMon,
      sum( if( weekday( o.order_date ) = 0, 1, 0 ) as OrdersMon,
      sum( if( weekday( o.order_date ) = 1, 1, 0 ) * o.total ) as SalesTue,
      sum( if( weekday( o.order_date ) = 1, 1, 0 ) as OrdersTue,
      sum( if( weekday( o.order_date ) = 2, 1, 0 ) * o.total ) as SalesWed,
      sum( if( weekday( o.order_date ) = 2, 1, 0 ) as OrdersWed,
      sum( if( weekday( o.order_date ) = 3, 1, 0 ) * o.total ) as SalesThu,
      sum( if( weekday( o.order_date ) = 3, 1, 0 ) as OrdersThu,
      sum( if( weekday( o.order_date ) = 4, 1, 0 ) * o.total ) as SalesFri,
      sum( if( weekday( o.order_date ) = 4, 1, 0 ) as OrdersFri,
      sum( if( weekday( o.order_date ) = 5, 1, 0 ) * o.total ) as SalesSat,
      sum( if( weekday( o.order_date ) = 5, 1, 0 ) as OrdersSat,
      sum( o.total ) as SalesWeek,
      sum( 1 ) as OrdersWeek
   from
      ss_orders o
   where
      o.order_date > date_add( now(), INTERVAL -12 WEEK )
   group by
      week( o.order_date ) 
```

如果您在一周的中间，您可能需要调整 WHERE 子句以真正获得 12 个完整的周...例如将 NOW() 更改为 date_add( now(), interval -weekday(now()) 之类的东西，但我不得不在这方面考虑更多。

# java - 如何在 Eclipse Juno（不是 jsp）中使用 facelets？

> ID：14728517
> 
> 赞同：2
> 
> 时间：2013-02-06T11:56:21.053
> 
> 标签：java, eclipse, jsp, jsf

我正在使用 eclipse juno，我正在尝试建立一个网站。我正在构建用户界面，我想使用 JSF。以下代码运行，当我运行文件时，信息会正确显示在屏幕上。

```
<%@ taglib prefix="f"  uri="http://java.sun.com/jsf/core"%>
<%@ taglib prefix="h"  uri="http://java.sun.com/jsf/html"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

 <link rel="stylesheet" type="text/css" href="Stylesheets/flashcard.css" />

<title>Insert title here</title>
</head>
<body>
<f:view>
        <h:form>
        <h:commandButton value="Click"></h:commandButton>

        </h:form>
</f:view> 
```

但是我读过这样写代码是更好的做法。此代码仅显示一个空白页。

```
<html xmlns="http://www.w3.org/1999/xhtml" 
xmlns:f="http://java.sun.com/jsf/core" 
xmlns:h="http://java.sun.com/jsf/html">
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

         <link rel="stylesheet" type="text/css" href="Stylesheets/flashcard.css" />

        <title>Insert title here</title>
        </head>
        <body>
        <f:view>
                <h:form>
                <h:commandButton value="Click"></h:commandButton>

                </h:form>
        </f:view>
    </body>
    </html> 
```

区别是微妙的，但在第二个文件中，如果有意义的话，我不使用 jsp <%@ 标记。创建第二个文件时，我选择了 JSF xhtml 之类的。有谁知道问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:53:04.017

只需将物理视图文件的扩展名从 重命名`some.jsp`为`some.xhtml`. 您无需更改最初使用的 URL 中的扩展名。如果您打开它`/some.jsf`，那么您应该继续打开它`/some.jsf`。

请注意，我假设您使用的是 JSF2 而不是旧版 JSF 1.x。JSF 1.x 本身并不支持 Facelets。另请注意，Facelets 不仅仅是“一种更好的实践”，您**必须**在 JSF2 中使用它，因为 JSP 已被弃用。

### 也可以看看：

*   [我们的 JSF wiki 页面](https://stackoverflow.com/tags/jsf/info)- 包含一个 Hello World
*   [JSF Facelets：有时我看到 URL 是 .jsf，有时是 .xhtml。为什么？](https://stackoverflow.com/questions/3008395/jsf-facelets-sometimes-i-see-the-url-is-jsf-and-sometimes-xhtml-why/3008504#3008504)- 可能会消除关于扩展的困惑

# struts - 具有共同前端的 Jboss 上的多次战争

> ID：14728519
> 
> 赞同：0
> 
> 时间：2013-02-06T11:56:25.333
> 
> 标签：struts, java-ee-6, jboss7.x, struts-1

我正在尝试在 JBOSS AS 7 和 Struts 1.2.8 中设置应用程序。我们有一个庞大的项目，需要将其分解为单独的部署，以便我们可以对不同的模块进行微观管理（即进行热部署或仅部署需要更改的部分）。所以有一个门户——里面有几个模块——尽管这些模块共享一些通用功能，比如与后端的一些（不是全部）通用数据库和相同的 ESB 交互。然而，在功能上，所有模块都是相当独立的。因此，我们要部署一个 Common.war - 它将具有登录页面并管理身份验证和授权。然后所有其他模块将部署在自己的战争中。任何常见的功能，如与数据库和 ESB 的通信都将被推送到 JNDI 数据源和无状态 EJB。现在说当用户登录时，他会去

1.  [https://myportal.com/login](https://myportal.com/login) - 这是由 Common.war 托管和服务的
2.  登录后，他将存储在会话中并重定向到 URL [https://myportal.com/module1/action1](https://myportal.com/module1/action1)
3.  第二个 url 将由 war module1.war 提供服务。现在，当此操作尝试访问会话并检查用户是否是登录的用户时 - 它是否能够访问会话以进行 Common.war 部署？不太确定会话是按战争还是按应用程序服务器。如果没有，任何解决方法？
4.  所有常见的后端集成逻辑都将被部署为 EJB——所以我想任何战争都可以访问它。还是有更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:07:26.240

您必须引入**会话复制**和**单点登录**才能让不同的 web 应用程序共享登录（和其他）信息。我不确定你如何在 JBoss 上做到这一点，我在 Glassfish 上试过，它奏效了。

也许[这个链接](https://community.jboss.org/wiki/JBossWebSingleSignOn)或[那个链接](http://docs.jboss.org/jbportal/v2.6.7/referenceGuide/html/sso.html)可能有用。

# c# - 将bmp保存到字典c#

> ID：14728521
> 
> 赞同：0
> 
> 时间：2013-02-06T11:56:30.733
> 
> 标签：c#, dictionary, bmp

我正在尝试使用此代码将 bmp 文件保存到字典 im

```
Dictionary<string,MemoryStream> dict = new Dictionary<string,MemoryStream>();

dict.Add("mypicture.png",new MemoryStream());

image.Save(dict["mypicture.png"]); 
```

但由于某种原因，我在最后一句话中有一个错误，我不知道为什么，我应该在最后一个函数中添加一个缺少的参数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:00:31.667

尝试这个：

```
image.Save(dict["mypicture.png"], ImageFormat.Png); 
```

不要忘记包括图书馆

```
using System.Drawing.Imaging; 
```

以下是定义图像格式的方法：

```
if (ImageFormat.Jpeg.Equals(image.RawFormat))
{
    // JPEG
}
else if (ImageFormat.Png.Equals(image.RawFormat))
{
    // PNG
}
else if (ImageFormat.Bmp.Equals(image.RawFormat))
{
    // BMP
} 
```

所以最好的解决方案是

```
 image.Save(dict["mypicture.bmp"], image.RawFormat); 
```

# java - 无法在 Android 中使用 Java 设置 EditText 高度？

> ID：14728522
> 
> 赞同：0
> 
> 时间：2013-02-06T11:56:35.990
> 
> 标签：java, android, android-edittext

这是我的代码：

```
LinearLayout llgrower= new LinearLayout(this);
int percent_x=80,percent_y=10;
Display display = getWindowManager().getDefaultDisplay();
edittextwidth = (int) ((int)(display.getWidth())*percent_x/100);
edittextheight= (int) ((int)(display.getHeight())*percent_y/100); 
```

EditTextObject 包含 settext、setwidth、setheight 等默认方法

```
EditTextObject objedt=new EditTextObject(this);                         
objedt.setText("Some text");
objedt.setWidth(edittextwidth);
objedt.setHeight(edittextheight);
llgrower.addView(objedt); 
```

setWidth 工作正常，但 setHeight 不适用于 Edittext。我在 TextView 上尝试了相同的代码，setWidth 和 setHeight 都正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:22:45.930

`edittext`像这样使用设置比实际尺寸小的高度。也不要忘记，`setTextSize`因为您的文本的某些部分可能会进入不可见状态。

```
EditText et = (EditText) findViewById(R.id.et);
et.setLayoutParams(new LinearLayout.LayoutParams(200,15)); 
et.setTextSize(10); 
```

我希望这能帮到您。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:26:30.570

在Java中你可以试试这个：

```
 DisplayMetrics metrics = new DisplayMetrics();
        WindowManager wm = (WindowManager) this.getSystemService(Context.WINDOW_SERVICE);
        wm.getDefaultDisplay().getMetrics(metrics);
        final float height = metrics.heightPixels;

        EditText e = (EditText) findViewById(R.id.edit);
        e.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, (int) (height/2)));

        LinearLayout l = (LinearLayout) findViewById(R.id.layout);
        l.requestLayout();
    }
} 
```

**给定一个布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/layout"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
        >
    <EditText android:id="@+id/edit"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:text="@string/hello"
            />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:56:43.253

尝试使用**.setLayoutParams(***params*** )**

这个话题的重复？：

[如何在android中以编程方式设置EditText框的高度和宽度](https://stackoverflow.com/questions/9224927/how-to-set-edittext-box-height-and-width-programmatically-in-android)

```
...
final LayoutParams lparams = new LayoutParams(10,20); // Width , height
final EditText edittext = new EditText(this);
edittext.setLayoutParams(lparams);
... 
```

# objective-c - 需要帮助理解 Objective-C 协议

> ID：14728527
> 
> 赞同：1
> 
> 时间：2013-02-06T11:56:43.080
> 
> 标签：objective-c, protocols

```
#import <UIKit/UIKit.h>

@protocol myProtocol <NSObject>

-(void)aMethod;

@end

@interface ViewController : UIViewController

@property (weak) id<myProtocol> dSource;

@end 
```

我试图牢牢掌握 Obj-c 协议，我正在阅读苹果[文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithProtocols/WorkingwithProtocols.html#//apple_ref/doc/uid/TP40011210-CH11-SW1)来学习，我不清楚。以下是doc的要点：

1.  饼图视图类接口需要一个属性来跟踪数据源对象。（上面的代码，我们大多是这样声明协议的，当我在我的类中声明协议时为什么需要一个跟踪对象，或者协议可以在独立的类中定义？为此我们需要跟踪对象？）

2.  通过在属性上指定所需的协议一致性，如果您尝试将属性设置为不符合协议的对象，则会收到编译器警告。

3.  如果您尝试在符合上面定义的协议的 id 上调用 respondsToSelector: 方法，您将收到一个编译器错误，即没有已知的实例方法。一旦你用协议限定了一个 id，所有的静态类型检查都会回来；如果您尝试调用未在指定协议中定义的任何方法，您将收到错误消息。避免编译器错误的一种方法是将自定义协议设置为采用 NSObject 协议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:04:51.030

1.  我不明白这个问题
2.  正确，该属性要求该属性是符合您的属性的 id，如果您尝试将其设置为其他内容，编译器会正确地抱怨
3.  这是因为 respondsToSelector: 是`NSObject` 协议上的一个方法，所以你可以让你的协议扩展`NSObject` （标准），或者你可以将属性声明为 NSObject

# grails - Grails 应用程序中格式良好的 URL

> ID：14728529
> 
> 赞同：0
> 
> 时间：2013-02-06T11:56:43.883
> 
> 标签：grails

我有一个注册用户的应用程序。我通过各种页面获取用户，每个人都从用户那里获取一些数据，该信息存储在会话中，并且仅在最后一页中，数据存储在 DDBB 中。

当用户完成第一页时，他单击“下一步”按钮：

```
<div class='btn_sig_pag_uno'>
                <!--  <fieldset id="barra">-->
                <g:actionSubmit action="registro2"
                    title="${message(code:'infoPersonal.siguiente') }"
                    name="siguiente" class="siguiente"
                    value="${message(code: 'infoPersonal.siguiente', default: 'Siguiente')}"
                    style="cursor:pointer" />

                <!--  </fieldset>-->
            </div> 
```

在控制器中，在操作“registro2”中验证了用户引入的数据，并显示了“registro2.gsp”......但显示的 url 与第一页中的相同。我希望它是控制器/动作......并且不知道为什么 url 不会改变。

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:04:35.660

您需要做的是创建一个要显示的操作`registro2.gsp`，然后在执行`registro2`如下操作后进行重定向：

```
redirect(action: "showRegistro2") 
```

这样 URL 就会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:08:15.450

我认为这是表单的工作方式，也是 Grails 处理 actionSubmit 的方式。表单提交默认为 POST。由于 POST 是关于发送数据（而不是发送到某个地方，例如 GET），因此 URL 保持不变。

您可以将表单更改为具有 method="GET"，但我认为这不会在使用 Grails 的 actionSubmit 时得到您想要的，因为它仍然使用相同的 URL（但使用 ?_action_actionSubmitActionName=param 作为 URL 参数）。

通常，您只需重定向到接收表单 POST 的操作的另一个操作：

```
redirect(action: "registroFinished") 
```

并为最终结果创建一个 registroFinished.gsp。

# php - 将位图和更多信息传递给 PHP 服务器并使用 $_FILES[]

> ID：14728531
> 
> 赞同：-1
> 
> 时间：2013-02-06T11:56:49.490
> 
> 标签：php, android, http

我需要将拍摄的照片上传到 PHP 服务器，但我不知道如何传递此图像（位图）和其他信息，如名称和登录名，并使用 $_FILES[] 在服务器端获取它们。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:02:30.177

```
 $target = "folder_name/"; 

 $target = $target . basename( $_FILES['uploaded']['name']) ; 
 $ok=1; 
 echo "<pre>"; print_r($_FILES);echo "</pre>";
 echo $target."<br>";
 $uploaded_size=$_FILES['uploaded']['size'];
 $uploaded_type=$_FILES['uploaded']['type'];
 //This is our size condition 
 if ($uploaded_size > 350000) 
 { 
 echo "Your file is too large.<br>"; 
 $ok=0; 
 } 

 //This is our limit file type condition 
 if ($uploaded_type !="image/bmp") 
 { 
 echo "No PHP files<br>"; 
 $ok=0; 
 } 

 //Here we check that $ok was not set to 0 by an error 
 if ($ok==0) 
 { 
 echo "Sorry your file was not uploaded"; 
 } 

 //If everything is ok we try to upload it 
 else 
 { 
 if(move_uploaded_file($_FILES['uploaded']['tmp_name'], $target)) 
 { 
 echo "<b>The file ". basename( $_FILES['uploaded']['name']). " has been uploaded</b>"; 
 } 
 else 
 { 
 echo "Sorry, there was a problem uploading your file."; 
 } 
 } 
```

# jquery - 下一个兄弟元素内的元素的 jQuery 选择器

> ID：14728535
> 
> 赞同：4
> 
> 时间：2013-02-06T11:56:58.437
> 
> 标签：jquery, jquery-selectors

谁能告诉我如何从“active_page”类的“li”中选择“a”？我尝试了以下方法，但它不起作用：

```
if($('.active_page').next('.page_link').length==true){
    go_to_page(new_page);
}

<ul>
    <li>
        <a class="previous_link" href="javascript:go_to_previous();">Prev</a>
    </li>
    <li>
        <a class="page_link active_page" href="javascript:go_to_page(0)" longdesc="0">1</a>
    </li>
    <li>
        <a class="page_link" href="javascript:go_to_page(1)" longdesc="1">2</a>
    </li>
    <li>
        <a class="page_link" href="javascript:go_to_page(2)" longdesc="2">3</a>
    </li>
    <li>
        <a class="next_link" href="javascript:go_to_next();">Next</a>
    </li>
</ul> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T12:01:37.907

你必须上一层，因为它`<li>`是兄弟姐妹：

```
if ($(".active_page").parent().next().children('.page_link').length) {

} 
```

如果这对您来说有点冗长，您可以使用索引：

```
if ($(".page_link").eq($(".active_page").index("li .page_link") + 1)).length) {

} 
```

只是为了证明这两个都有效：http: [//jsfiddle.net/ExplosionPIlls/t5NDX/](http://jsfiddle.net/ExplosionPIlls/t5NDX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T11:59:25.570

`next`寻找兄弟，但该`a`元素没有兄弟。它的父母`li`这样做：

```
if($('.active_page').parent().next().find('.page_link').length){
    go_to_page(new_page);
} 
```

另外，`length`是一个数字，不要与`true`. 如果您想知道 if `length`is not `0`，则上述方法有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:59:45.823

不知道你想做什么，但

```
$('.active_page'); 
```

本身应该给你`<a>`元素

# python - Selenium webdriver 没有任何桌面浏览器

> ID：14728544
> 
> 赞同：1
> 
> 时间：2013-02-06T11:57:15.717
> 
> 标签：python, selenium, command-line, selenium-webdriver, htmlunit

我正在使用硒。我有以下代码：

```
from selenium import webdriver
from selenium.common.exceptions import NoSuchElementException
from selenium.webdriver.common.keys import Keys
browser = webdriver.Firefox()
browser.get("http://www.mysite.com")
x = browser.find_elements_by_xpath("//div[@id='containeriso3']/div/a[1]")
hrefs = [i.get_attribute('href') for i in x] 
```

现在，这行得通。

但我想在运行 ubuntu 命令行的服务器上执行此操作。这意味着我不能使用它

```
browser = webdriver.Firefox() 
```

在我的代码中。通过命令行可以使用什么替代方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T12:03:53.963

您可以使用基于 Rhino javascript 引擎的无头浏览器 HtmlUnitDriver。

[http://code.google.com/p/selenium/wiki/HtmlUnitDriver](http://code.google.com/p/selenium/wiki/HtmlUnitDriver)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:22:15.680

如果您的 Ubuntu 服务器和桌面位于同一网络上，请使用 Selenium Grid。您的代码将在 Linux 服务器上启动，您的测试将在您的桌面上执行。

看看下面的链接：

[http://code.google.com/p/selenium/wiki/Grid2](http://code.google.com/p/selenium/wiki/Grid2)

这些示例是用 Java 编写的，但我相信您可以将它们改编为 Python，或者至少了解您需要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:26:22.313

我认为您也可以尝试使用基于 phantomjs 的 ghost 驱动程序：

[https://github.com/detro/ghostdriver](https://github.com/detro/ghostdriver)，或者您也可以尝试在 Xvfb 上运行常用的 firefox 驱动程序。

这取决于你需要什么。

# utf-8 - 如何在 html.erb 页面上的 ruby 脚本 (options_for_select) 中解释 utf-8 字符

> ID：14728545
> 
> 赞同：0
> 
> 时间：2013-02-06T11:57:18.173
> 
> 标签：utf-8

我想在 ruby​​ 脚本（options_for_select）中使用 utf-8 字符。

我尝试了以下方法：

*   添加`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />`和`# encoding: utf-8`
*   `.html_safe`并且`raw`- 虽然我是 ruby​​ 新手，但我可能没有尝试过所有可能的组合。

我已经尝试解决这个问题一天了，此时我没有想法。将不胜感激一个简单的修复。

先感谢您。

这是之前的 ruby​​ 脚本：

`<%= select_tag "quantity", options_for_select(%w(x1(&pound;49.00) x2&nbsp;(&pound;98.00) x3&nbsp;(&pound;147.00) x4&nbsp;(&pound;196.00) x5&nbsp;(&pound;245.00) x10&nbsp;(&pound;441.00) x100&nbsp;(&pound;3920.00)), 1), id: 'quantity' %>`

这里没有 utf-8 字符：

`<%= select_tag "quantity", options_for_select(%w(x1(49.00) x2(98.00) x3(147.00) x4(196.00) x5(245.00) x10(441.00) x100(3920.00)), 1), id: 'quantity' %>`

这是完整的红宝石脚本：

`<%= select_tag "quantity", options_for_select(%w(x1(&pound;49.00) x2&nbsp;(&pound;98.00) x3&nbsp;(&pound;147.00) x4&nbsp;(&pound;196.00) x5&nbsp;(&pound;245.00) x10&nbsp;(&pound;441.00) x100&nbsp;(&pound;3920.00)), 1), id: 'quantity' %> <%= hidden_field_tag "preorder", true %> <%= submit_tag "Checkout", :class => "blue_button disabled", :id => "amazon_button" %> <% end %>`

# matlab - 在matlab中将矩阵转换为单元格

> ID：14728546
> 
> 赞同：-2
> 
> 时间：2013-02-06T11:57:26.293
> 
> 标签：matlab, matrix, 2d

我有一个像这样的二维矩阵：

```
0   0   0   0   0   0
0   0   0   0   0   1
0   0   0   0   1   0
0   0   0   0   1   1
0   0   0   1   0   0
0   0   0   1   0   1
0   0   0   1   1   0
0   0   0   1   1   1
0   0   1   0   0   0
0   0   1   0   0   1
0   0   1   0   1   0
0   0   1   0   1   1
0   0   1   1   0   0
0   0   1   1   0   1
0   0   1   1   1   0
0   0   1   1   1   1
0   1   0   0   0   0
0   1   0   0   0   1
0   1   0   0   1   0
0   1   0   0   1   1
0   1   0   1   0   0
0   1   0   1   0   1
0   1   0   1   1   0
0   1   0   1   1   1
0   1   1   0   0   0
0   1   1   0   0   1
0   1   1   0   1   0
0   1   1   0   1   1
0   1   1   1   0   0
0   1   1   1   0   1
0   1   1   1   1   0
0   1   1   1   1   1
1   0   0   0   0   0
1   0   0   0   0   1
1   0   0   0   1   0
1   0   0   0   1   1
1   0   0   1   0   0
1   0   0   1   0   1
1   0   0   1   1   0
1   0   0   1   1   1
1   0   1   0   0   0
1   0   1   0   0   1
1   0   1   0   1   0
1   0   1   0   1   1
1   0   1   1   0   0
1   0   1   1   0   1
1   0   1   1   1   0
1   0   1   1   1   1
1   1   0   0   0   0
1   1   0   0   0   1
1   1   0   0   1   0
1   1   0   0   1   1
1   1   0   1   0   0
1   1   0   1   0   1
1   1   0   1   1   0
1   1   0   1   1   1
1   1   1   0   0   0
1   1   1   0   0   1
1   1   1   0   1   0
1   1   1   0   1   1
1   1   1   1   0   0
1   1   1   1   0   1
1   1   1   1   1   0
1   1   1   1   1   1 
```

我想将此矩阵转换为以下内容：

```
100000
100001
100010 
```

等等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:12:58.190

尝试[`mat2cell`](http://www.mathworks.com/help/matlab/ref/mat2cell.html)

```
 c = mat2cell( x, ones(1, size(x,1)), size(x,2) ); 
```

但是，从您的示例来看，您似乎对以下内容更感兴趣[`dec2bin`](http://www.mathworks.com/help/matlab/ref/dec2bin.html)：

```
 n = 6; % all binary numbers with n bits
 c = dec2bin( 0:(2^n - 1), n ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:36:04.180

@Shai 的答案可能是您正在寻找的，但我读了您的问题，询问如何连接矩阵的行以形成向量。

然后，它取决于您希望输出的格式类型，但这是获取数字向量而不是矩阵的一种方法。

```
>> A = eye(3)

A =

     1     0     0
     0     1     0
     0     0     1 
```

将矩阵转换为字符串：

```
>> B = num2str(A)

B =

1  0  0
0  1  0
0  0  1 
```

提取`char`对应于数字的 s（并省略空格）：

```
>> C = B(:,1:3:end)

C =

100
010
001 
```

在这里，您将值作为字符串，这可能是您想要的（即使它不是真正的向量）。您也可以将其转换回数字，但随后您将获得以下类型的输出：

```
>> D = str2num(C)

D =

   100
    10
     1 
```

# c - 如何将几个连续的结构放入内存？

> ID：14728547
> 
> 赞同：2
> 
> 时间：2013-02-06T11:57:27.470
> 
> 标签：c, memory, struct, malloc, space

我正在实施 PSO 算法。我使用这个数据结构：

```
typedef struct {
  float x;
  float y;
} C_struct_Class2D;

typedef struct {
  C_struct_Class2D *pos;
  C_struct_Class2D *best_pos;
  C_struct_Class2D *vel;
} C_struct_Particle;

typedef struct { <br>
  C_struct_Particle **particles;
  C_struct_Particle *g;
} C_struct_Swarm; 
```

我必须使用 C，而不是 C++。这就是为什么我在类中使用结构。

结构说明：

有一个 Swarm(C_struct_Swarm)，它由几个 Particles(**particles) 和一个最佳 Particles(*g) 组成。每个粒子都有一个“C_struct_Class2D”类型的位置、最佳位置和速度。

在一些方法中，我为每个数据分配内存空间并对其进行初始化。但我喜欢整个数据结构在内存中是连续的。这样所有的结构都在地址空间中彼此落后。

内存应如下所示：

```
C_struct_Swarm
粒子[0]
粒子[0]->pos
粒子[0]->best_pos
粒子[0]->vel
粒子[1]
粒子[1]->pos
粒子[1]->best_pos
粒子[1]->vel
...
...
...
...
粒子[n]
粒子[n]->pos
粒子[n]->best_pos
粒子[n]->vel
g->位置
g->best_pos
g->vel

```

我怎样才能做到这一点？

问候 sw

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:09:09.967

**按值组成成员**

在 C_struct_Particle 中按值包含 C_struct_Class2D：

```
typedef struct {
    C_struct_Class2D pos; 
    C_struct_Class2D best_pos; 
    C_struct_Class2D vel; 
} C_struct_Particle; 
```

这保证了这些成员的顺序（pos 在 best_pos 之前在 vel 之前）。

**分配一个项目数组，而不是一个指向项目的指针数组**

```
typedef struct {
    C_struct_Particle *particles;
    int num_particles;
    C_struct_Particle g;
} C_struct_Swarm; 
```

我应该注意到，粒子指向的数据与其他成员不连续，所以你所要求的并不完全可能，除非你做一些其他的事情，比如设置 g 始终是第一个粒子，即包含在粒子“阵列”。

**注意填充**

如果您不关心填充（并且在您的代码示例中看起来您不关心），请跳过此。否则它是特定于平台/编译器的。例如，在 GCC 中，您可以使用[packed 属性](http://gcc.gnu.org/onlinedocs/gcc/Type-Attributes.html)：

```
struct __attribute__ ((__packed__)) my_packed_struct
{
    char c;
    int  i;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:02:58.130

你不能以你所描述的方式。如果您想要连续的内存块，唯一的解决方案（据我所知）是使用缓冲区（请参阅我的[类似答案](https://stackoverflow.com/questions/14623502/structure-and-pointer/14624300#14624300)，可能会让您了解如何实现它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:31:05.317

如果您使用 gcc，对于静态对象，您可以尝试`__attribute__`...更多信息在这里[http://gcc.gnu.org/onlinedocs/gcc-3.1/gcc/Variable-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc-3.1/gcc/Variable-Attributes.html)

以iw源代码为例

# objective-c - dateFromString 在 ios6 中工作，但在 ios5 中不工作

> ID：14728552
> 
> 赞同：0
> 
> 时间：2013-02-06T11:57:57.057
> 
> 标签：objective-c, ios5, ios6, nsdate, nsdateformatter

我知道有很多关于这个主题的主题，我已经阅读了所有主题。

在我的特殊情况下，当在 iPhone 6.1 模拟器上测试时，dateFromString 工作正常，但在 iPhone 5.1 模拟器上返回 null。我还在 iOS6 和 iOS5 的几台设备上对其进行了测试，得出了相同的结论。

“输入”中的格式为：2013-02-15T18:00:00+03:00

我写了以下代码：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
NSLocale *enUSPOSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
[dateFormatter setLocale:enUSPOSIXLocale];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss+zz:zz"];
NSDate *dateFromString = [[NSDate alloc] init];
dateFromString = [dateFormatter dateFromString:input];

[dateFormatter setDateFormat:@"EEE'. 'dd' 'MMM' 'yyyy', 'HH':'mm"];
NSString *stringFromDate = [dateFormatter stringFromDate:dateFromString];
return stringFromDate; 
```

...在模拟器和设备上的 iOS6 上的 stringFromDate "Fri. 15 Feb 2013, 18:00" 和 iOS5 上的 "null" 中获取。

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:04:04.857

这不是 iOS5 或 iOS 6 的问题。请**检查设置中设置的时间格式**是12小时格式还是24小时格式。

它会解决你的问题

# c# - EF 中的重复键异常

> ID：14728558
> 
> 赞同：0
> 
> 时间：2013-02-06T11:58:30.037
> 
> 标签：c#, entity-framework

这是使用 EF 向 sql server 添加新实体的简单代码

```
 var isNewEntity = entity.Id == 0;

        if (isNewEntity)
        {
            _unitOfWork.Context.DbTripReportDefinitionSectionSet.Add(entity);
        }
        else
        {
            ObjectStateEntry stateEntry;
            _unitOfWork.ObjectStateManager.TryGetObjectStateEntry(entity, out stateEntry);

            if (stateEntry == null)
            {
                _unitOfWork.Context.DbTripReportDefinitionSectionSet.Attach(entity);
            }

            _unitOfWork.ObjectStateManager.ChangeObjectState(entity, EntityState.Modified);
        }

        _unitOfWork.Save();

        return entity.Id; 
```

问题是我有一个例外

> 'ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。对于已经存在但未跟踪的实体。

所以`_unitOfWork.ObjectStateManager.TryGetObjectStateEntry(entity, out stateEntry);`返回 false 并且这段代码`_unitOfWork.Context.DbTripReportDefinitionSectionSet.Attach(entity);`抛出异常。我猜是因为已经附加了导航属性。如何在没有导航属性的情况下附加这些实体？或者我该如何以另一种方式解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:46:24.467

Without further information, I may advise you to create a new `Context` instance.

Most probably your assumption about navigation properties is right; but instead of trying to fix the code, it is better for you to create a new `context` unless there are operations which require to be committed in the same transaction (I am assuming you are employing unit of work pattern).

# java - Android EditText 行号

> ID：14728560
> 
> 赞同：0
> 
> 时间：2013-02-06T11:58:34.240
> 
> 标签：java, android

我正在制作一个 html IDE，并希望将行号添加到 EditText。我在 EditText 旁边尝试了一个 think TextView，但它有它的问题。有任何想法吗？

**编辑：**

```
private List<String> items = null;
private EditText ideText;
private TextView ln;

     @Override
        public void onCreate(Bundle icicle) {
            super.onCreate(icicle);
            setContentView(R.layout.main);
            ideText = (EditText) findViewById(R.id.ide);
            ln = (TextView) findViewById(R.id.lineNumbers);
            // Create Line Numbers
           for(int i=0;i<ideText.getLineCount();i++){
               ln.append(i +"\n");
           }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T07:05:14.050

您应该创建一个扩展 EditText 的自定义视图。

# javascript - 如何在 Opera 中将焦点移至子窗口？

> ID：14728565
> 
> 赞同：1
> 
> 时间：2013-02-06T11:58:58.750
> 
> 标签：javascript, window, focus, opera

Opera 使用以下代码失败：

```
var w;

$('button').on('click', function () {
  if (w && !w.closed && window.focus) {
    w.focus();
  } else {
    w = window.open('http://google.com', 'google');
  }
}); 
```

在我们打开新窗口并返回父窗口后，我们无法在 Opera 中将焦点设置回子窗口。但其他浏览器工作正常。甚至 IE。有什么想法吗？

[您可以在 jsbin 上](http://jsbin.com/unadat/1/edit)尝试此代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:58:41.053

看看选项

> 首选项 > 高级 > 内容 > JavaScript 选项 > 允许提升窗口

此页面底部附近有此首选项对话框的屏幕截图： [http ://www.javascripter.net/faq/windowresizeto.htm](http://www.javascripter.net/faq/windowresizeto.htm)

# ruby-on-rails - Rails 3 资产管道和 jQuery Mobile

> ID：14728568
> 
> 赞同：0
> 
> 时间：2013-02-06T11:59:12.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-mobile, asset-pipeline

如果我尝试在资产管道中的任何位置包含从 jQuery Mobile 网站下载的任何文件`.js`，`.css`我会遇到各种视图渲染问题，从找不到图像到未应用 CSS，再到执行 jQuery js 文件时出现错误。但是，当我使用示例代码时：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css">
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

在我的 Rails 3.2.11 应用程序的标题中，它可以正常工作。

为什么是这样？

我尝试以多种方式融入其中`application.js`。`application.css`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:09:22.517

1.  通过相应的资产 gem添加`jquery-rails`和到您的 Gemfile。`jquery-mobile`
2.  从您的 application.js 和 application.css 或您已配置的清单中要求他们的资产。
3.  不要在你的布局中包含这样的脚本标签，否则你会绕过 Rails 资产管道。

你的宝石文件：

```
group :assets, :development do
  gem 'jquery-rails'
  gem 'jquery_mobile_rails'
end 
```

`application.js`您的资产清单（`application.css`默认情况下）应该像解释的那样：[https ://github.com/tscolari/jquery-mobile-rails#installation](https://github.com/tscolari/jquery-mobile-rails#installation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:01:43.660

好的，所以 Vicente 先生的解决方案绝对是最简单的，但它不允许您使用 JQuery Mobile 主题滚动器包含自定义 CSS 主题。我所做的基本上是复制原始 CSS 并将其放入“自定义”css 文件中，该文件又可以根据需要设置提供的主题的样式。不理想，因为您想自己构建自定义主题，但可以。

# html - 导航菜单幽灵

> ID：14728572
> 
> 赞同：0
> 
> 时间：2013-02-06T11:59:21.380
> 
> 标签：html, css, google-chrome, menu

我已经为我们公司创建了一个网站，还没有完成，还有很多内容缺失。

目前，该菜单在 IE 上运行良好，但在 Chrome 上查看时，将鼠标悬停在各个部分上时，下拉菜单会出现轻微的重影。

请参阅下面从 Header-actions.php 获取的代码

```
/**
* Navigation
*
* @since 1.0
*/
function synapse_nav() {
global $options, $themeslug; //call globals 

if ($options->get($themeslug.'_hide_home_icon') == "0" && $options->get($themeslug.'_hide_search') == "0" OR $options->get($themeslug.'_hide_home_icon') == "1" && $options->get($themeslug.'_hide_search') == "0" ) {
    $grid = 'twelve columns';
}

else {
    $grid = 'nine columns';
}

?>

<div class="container">
    <div class="row">

        <div class="twelve columns" id="imenu">

        <div id="nav" class="<?php echo $grid; ?>">
        <?php if ($options->get($themeslug.'_hide_home_icon') != "0"):?><div id="home"><a href="<?php echo home_url(); ?>"><img src="<?php echo get_template_directory_uri() ;?>/images/home.png" alt="home" /></a></div><?php endif;?>
        <?php if ($options->get($themeslug.'_hide_home_icon') == "0"):?>
        <div id="nohome"></div>
        <?php endif;?>
        <?php wp_nav_menu( array(
        'theme_location' => 'header-menu', // Setting up the location for the main-menu, Main Navigation.
        'fallback_cb' => 'menu_fallback', //if wp_nav_menu is unavailable, WordPress displays wp_page_menu function, which displays the pages of your blog.
        'items_wrap'      => '<ul id="nav_menu">%3$s</ul>',
            )
        );
        ?>
        </div>
        <?php if ($options->get($themeslug.'_hide_search') != "0"):?>
        <div class="three columns">
            <?php get_search_form(); ?>
        </div>
        <?php endif;?>
    </div>
</div>
</div>
 <?php
}

/**
* End
*/ 
```

和CSS：

```
 /#nav{position:relative;z-index:2000}
#nav .parent > a, #nav .parent > a:hover{background-image:url(../images/arrow.png);background-position:right;background-repeat:no-repeat}
#nav ul ul .parent > a, #nav ul ul .parent:hover > a:hover, #nav ul ul li:hover ul .parent > a, #nav ul ul li:hover ul .parent > a:hover{background-image:url(../images/arrow-right.png);background-position:right;background-repeat:no-repeat}
#nav ul, #nav ul li{display:inline;list-style:none;padding:0;margin:0}
#nav ul li a{display:inline-block;font-family:'Lucida Grande',Helvetica,Arial,Verdana,sans-serif;font-size:14px;color:#fff;line-height:36px;text-decoration:none;text-shadow:1px 1px 1px #333;padding:0 15px;margin-left:-4px;border-right:#006747 1px solid}
#nav ul li a:hover{box-shadow:inner 0 0 5px #000;-moz-box-shadow:inset 0 0 5px #000;-webkit-box-shadow:inset 0 0 5px#000;background:#004f36}
#nav .current-menu-item a{color:#FFF;}
#nav .current-menu-item .sub-menu a{color:#fff;text-shadow:1px 1px 1px #333}
#nav .menu > li:first-child a:hover{border-radius:0}
#nav .menu .sub-menu li a:hover{border-radius:0}
#nav ul li{position:relative}
#nav li ul{display:none;position:absolute;top:27px;left:7px}
#nav li ul a{background:#009051}
#nav ul ul li:hover ul, #nav ul ul ul li:hover ul{left:0;margin:-37px 0 11px 180px}
#nav ul li:hover ul{display:inline-block}
#nav ul ul, #nav ul li:hover ul ul, #nav ul ul li:hover ul ul{display:none}
#nav ul li:hover ul, #nav ul ul li:hover ul, #nav ul ul ul li:hover ul{display:block}
#nav ul li:hover ul li a, #nav ul ul li:hover ul li a, #nav ul ul ul li:hover ul li a{border:#006747 1px solid;margin:-1px 0 0 -11px}
#nav ul li:hover ul li a{width:150px;padding:0 14px}
#nav ul ul li:hover ul li a{width:150px;padding:0 14px;background-color:#888}
#nav ul ul ul li:hover ul li a{width:150px;padding:0 14px;background-color:#aaa}
#nav .children {z-index: 4000;} 
```

希望有人可以提供帮助，我有一段时间没有做这方面的工作了，我从一开始就遇到了麻烦。

参考：[http ://burytest.tk](http://burytest.tk)

* * *

负片已从

```
#nav ul li:hover ul li a, #nav ul ul li:hover ul li a, #nav ul ul ul li:hover ul li a{border:#006747 1px solid;margin:-1px 0 0 0} 
```

阳性从

```
#nav ul ul li:hover ul, #nav ul ul ul li:hover ul{left:0;margin:-37px 0 0 180px} 
```

似乎完成了这项工作。

此外，关于我的标记，唯一的问题是，在创建它时，我在单独的页面上添加了一个 doctype 标签，之后我发现将它添加到标题中更容易。

它是 wordpress 和我添加的许多插件可能存在某种错误的事实也无济于事！

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:39:52.153

首先，您应该删除这些错误。 [http://validator.w3.org/check?uri=http%3A%2F%2Fburytest.tk%2F&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fburytest.tk%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)

您可以通过删除负边距并添加负定位来解决重影问题。

在 style.css 中更改此行：

```
Line #156: #nav li ul{display:none;position:absolute;top:27px;left:-4px}
Line #162: #nav ul li:hover ul li a, #nav ul ul li:hover ul li a, #nav ul ul ul li:hover ul li a{border:#006747 1px solid;margin:-1px 0 0 0} 
```

这只是一个快速而肮脏的修复。

# java - 如何解决replaceAll的replaceAll

> ID：14728574
> 
> 赞同：3
> 
> 时间：2013-02-06T11:59:22.720
> 
> 标签：java, search, replaceall

我有一个小问题。我有一段文字，我必须在浏览器中多次阅读。每次，我打开这段文字，都会自动启动我写的replaceAll。它非常简单，基本但问题是当我下次替换时（每次我阅读这篇文章）我有一个replaceAll 的replaceAll。例如我在文本中有：

```
XIII 
```

我想把它换成

```
<b>XIII</b> 
```

和：

```
txt.replaceAll("XIII","<b>XIII</b>") 
```

第一次一切都很好，但是当我再次阅读文本时，它变成了：

```
<b><b>XIII</b></b> 
```

这是一个愚蠢的问题，但我现在从 Java 开始。我读到可以使用正则表达式。有人可以发布一个小例子吗？

谢谢，请原谅我糟糕的英语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:02:56.407

您需要消极的lookbehind 以防止匹配已标记的字符串：

```
txt.replaceAll("(?<!>)XIII","<b>XIII</b"); 
```

这个表达式看起来有点复杂，但它是这样分解的：

*   `(?<! ... )`是负面后视的模板；
*   `>`是我们要确保不会出现在您的字符串前面的特定字符。

我还应该警告您，使用正则表达式修复 HTML 通常会变成一个升级正则表达式以处理另一种特殊情况的恶魔般的循环，只是看到它在下一个特殊情况下失败。它最终变成了一个没人能读懂的怪物，更不用说改进了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:04:17.873

有一个非常快速的解决方案。在自己做之前做相反的替换。

让我展示：

```
txt.replaceAll("<b>XIII</b>","XIII").replaceAll("XIII","<b>XIII</b>") 
```

所以你先把你的`<b>`变成正常的，然后再把它转回来，`<b>`它会达到同样的结果，而不需要增加新的水平`<b>`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T12:06:50.573

那这个呢：

```
txt = txt.replaceAll ("XIII", "<b>XIII</b>").
    replceAll ("<b><b>", "<b>").replaceAll ("</b></b>", "</b>"); 
```

我认为`<b><b>`并且`</b></b>`在 HTML 中没有多大意义，因此即使在其他地方也可以删除重复项。

# php - 将域重定向到主域上的路径

> ID：14728582
> 
> 赞同：0
> 
> 时间：2013-02-06T11:59:38.737
> 
> 标签：php, .htaccess

我有一些域名：

*   `http://domainmain.com`
*   `http://domainone.com`
*   `http://domaintwo.com`

我的辅助域目前托管在主域下。没有子目录，没有其他路径。所以每个域都得到`http://domainmain.com`.

*为了更好地理解：这些文件都指向同一个文件：`http://domainmain.com/index.php`, `http://domainone.com/index.php`, `http://domaintwo.com/index.php`.*

对于每个域，我都有一个文件夹位于`http://domainmain.com`：

```
domainname       folder / path
--------------   -----------
domainmain.com   /
domainone.com    /domainone
domaintwo.com    /domaintwo 
```

我的目标是将每个域重定向到相应的 dir / path `http://domainone.com`。

例如：`http://domainone.com`必须显示 path 的内容`/domainone`。访客必须看到`http://domainone.com`。这也应该有效：`http://domaintwo.com/images`显示`http://domainmain.com/images`。

* * *

我在文件中开始使用的一些代码`.htaccess`：

```
RewriteCond %{HTTP_HOST} domainone.com [NC]
RewriteCond %{REQUEST_URI} !^/domainone
RewriteRule ^(.*)$ /domainone/$1 [NC,L] 
```

还有一些 PHP（但我想使用重定向而不是`file_get_contents()`：

```
if ($_SERVER['SERVER_NAME'] == 'domaintwo.com') {
    echo file_get_contents('http://domainmain.com/domaintwo');
    die();
} 
```

* * *

*注意：文件只能`.htaccess`位于`http://domainmain.com`. 我的服务器运行 PHP5。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:08:58.843

您的问题与在网站管理员部分提出的问题非常相似；

[如何将不同的域重定向到不同的子目录。](https://webmasters.stackexchange.com/questions/39868/how-can-i-use-htaccess-to-rewrite-different-domains-to-different-sub-directorie)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:06:31.223

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(domainone)\.com$ [NC]
RewriteRule (?!^domainone(/.*|)$)^.*$ /%1%{REQUEST_URI} [NC,L]

RewriteCond %{HTTP_HOST} ^(domaintwo)\.com$ [NC]
RewriteRule (?!^domaintwo(/.*|)$)^.*$ /%1%{REQUEST_URI} [NC,L] 
```

# php - 在非对象上调用成员函数 mysql_affected_rows()

> ID：14728590
> 
> 赞同：-3
> 
> 时间：2013-02-06T12:00:21.490
> 
> 标签：php

我有一个错误说

> 在第 189 行调用 C:\xampp\htdocs\initializr\search.php 中非对象的成员函数 mysql_affected_rows()

当我点击我的提交按钮时。

```
if(isset($_POST['select'])) {
    $studId = $_REQUEST['studid'];

    foreach ($studId as $ch) {
        $result = $mysqli->query("INSERT INTO tbl_tempCand (datetime, names) VALUES (CURRENT_TIMESTAMP(), '".$ch."')");
        //this is my line 189 error
        if($row->mysql_affected_rows($result)==0) {
            header("Location: registercand.php");
        } else {
            echo "nothing happen";
        }
    }
} 
```

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:03:21.510

使用这个查询

```
$result = $mysqli->query("INSERT INTO tbl_tempCand (`datetime`, `names`) VALUES (CURRENT_TIMESTAMP(), '".$ch."')");
                                                    ^ // here was the problem 
```

`datetime`是一个**保留字**，`mysql`因此查询失败。如果您想使用这种保留字作为列，请在其中引用它们````

改变

```
if($row->mysql_affected_rows($result)==0) 
```

至

```
if($mysqli->affected_rows > 0) 
```

# android - ViewPager 与 FragmentPagerAdapter OutOfMemory

> ID：14728595
> 
> 赞同：1
> 
> 时间：2013-02-06T12:00:40.850
> 
> 标签：android, android-viewpager

我有一个包含多种类型页面（图像、视频）的 viewpager，所以我使用了 FragmentPagerAdapter。

现在的问题是，当我有大约 14 页（主要是图像）时，我在滑动到后者时出现内存不足错误。更改页面时我可以看到内存泄漏，因为内存使用量只会增加而不会下降。

我尝试按照其他帖子中的建议重新实现 onDEstroyItem 方法，但这似乎适用于视图而不是片段。

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T12:07:49.047

您应该使用[FragmentStatePagerAdapter而不是 FragmentPagerAdapter ，如此](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html)[处](https://stackoverflow.com/questions/10396321/remove-fragment-page-from-viewpager-in-android)所述。如前所述，还尝试减小[setOffscreenPageLimit](https://stackoverflow.com/questions/11446687/outofmemoryerror-on-viewpager)设置的值。

# php - 从本地服务器请求 Google Analytics 数据

> ID：14728597
> 
> 赞同：8
> 
> 时间：2013-02-06T12:00:55.620
> 
> 标签：php, google-analytics-api

我想编写一个从 GA 导入网络统计数据的 PHP 脚本。该脚本可通过 Web 前端访问（用于触发导入）并位于本地服务器 (127.0.0.1) 上。

![在此处输入图像描述](../Images/40e27d92b4599639ac1efc87f07ad144.png)

正如我从文档中了解到的那样，有两种用于验证和使用核心 API 的选项：

1.  **API 密钥**- 仅授予对统计信息的访问权限
2.  **OAuth2** - 完全授权

如果我正确理解 OAuth2 的机制，那么在我的场景中这不是一个选项，因为我无法指定回调 URL。我想到了一些骇人听闻的解决方案——比如建立一个从浏览器直接连接到 GA 的 Web 配置文件身份验证，然后通过 JavaScript 获取数据并将其提供给导入脚本——但我宁愿避免使用这种解决方案。还因为触发导入过程的浏览器交互将来可能会被 cron 作业取代。

API 密钥似乎正是我想要的，但来自浏览器的 GET 请求失败。

**获取请求：**

```
https://www.googleapis.com/analytics/v3/data/ga
  ?ids=ga:[profile ID]
  &start-date=2013-01-01&end-date=2013-01-05
  &metrics=ga:visits
  &key=[the API key] 
```

**回复：**

```
{
  error: {
  errors: [
    {
      domain: "global",
      reason: "required",
      message: "Login Required",
      locationType: "header",
      location: "Authorization"
    }
  ],
  code: 401,
  message: "Login Required"
  }
} 
```

URL虽然应该没问题。[除了关键参数之外，它与使用http://ga-dev-tools.appspot.com/explorer/](http://ga-dev-tools.appspot.com/explorer/)生成的参数相同（在这种情况下使用 AOuth2）。API 密钥是新的。

然后再次生成一个新的 API 密钥给我带来了下一个不便，即显然该密钥仅在一天内有效。

* * *

所以归根结底，我的问题是：

**是否可以在上述场景中获取数据，而无需每天手动进行身份验证或生成 API 密钥？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:43:37.783

正如已经建议的那样，使用这个库：[https](https://code.google.com/p/google-api-php-client/) ://code.google.com/p/google-api-php-client/ 但是，不要使用 oauth，而是从 api 控制台创建一个**服务帐户（只需选择服务器应用程序）。**这将为您提供客户端 ID、标识服务帐户的电子邮件以及保存私钥的 *.p12 文件。

然后，您必须以管理员用户身份将服务帐户（电子邮件）添加到您的分析中，以获得所需的数据。

要使用该服务：

```
$client = new Google_Client();
$client->setApplicationName('test');

$client->setAssertionCredentials(
    new Google_AssertionCredentials(
        EMAIL,
        array('https://www.googleapis.com/auth/analytics.readonly'),
        file_get_contents(PRIVATE_KEY_FILEPATH)
    )
);
$client->setClientId(CLIENT_ID);
$client->setAccessType('offline_access');

$analytics = new Google_AnalyticsService($client); 
```

获取一些数据：

```
$analytics->data_ga->get(PROFILE_ID, $date_from, $date_to, $metrics, $optParams) 
```

有关详细信息，请查看 api 文档。另外，请注意，有查询上限（除非您付费）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T22:50:06.470

我认为要使其正常工作，您需要使用 OAuth 但稍作修改即可从服务器运行它。Google 将此身份验证方法称为“[将 OAuth 2.0 用于 Web 服务器应用程序](https://developers.google.com/accounts/docs/OAuth2WebServer)”

如该页面所述，您可以使用 PHP 客户端库来完成身份验证。客户端库位于[此处](https://code.google.com/p/google-api-php-client/wiki/OAuth2)。

有关如何使用此客户端库的示例位于同一项目的[帮助页面](https://code.google.com/p/google-api-php-client/)上。请注意，您必须对代码进行一些修改，因为注释说将令牌存储在 db 中并定期刷新它。

```
<?php
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_PlusService.php';

// Set your cached access token. Remember to replace $_SESSION with a
// real database or memcached.
session_start();

$client = new Google_Client();
$client->setApplicationName('Google+ PHP Starter Application');
// Visit https://code.google.com/apis/console?api=plus to generate your
// client id, client secret, and to register your redirect uri.
$client->setClientId('insert_your_oauth2_client_id');
$client->setClientSecret('insert_your_oauth2_client_secret');
$client->setRedirectUri('insert_your_oauth2_redirect_uri');
$client->setDeveloperKey('insert_your_simple_api_key');
$plus = new Google_PlusService($client);

if (isset($_GET['code'])) {
  $client->authenticate();
  $_SESSION['token'] = $client->getAccessToken();
  $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
  header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}

if (isset($_SESSION['token'])) {
  $client->setAccessToken($_SESSION['token']);
}

if ($client->getAccessToken()) {
  $activities = $plus->activities->listActivities('me', 'public');
  print 'Your Activities: <pre>' . print_r($activities, true) . '</pre>';

  // We're not done yet. Remember to update the cached access token.
  // Remember to replace $_SESSION with a real database or memcached.
  $_SESSION['token'] = $client->getAccessToken();
} else {
  $authUrl = $client->createAuthUrl();
  print "<a href='$authUrl'>Connect Me!</a>";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T18:35:48.280

我有类似的设置。您没有意识到的是，您可以将`http://localhost`or`http://127.0.0.1`或其他任何内容指定为源和回调 URL。您需要在本地服务器上设置一些 Web 界面，为具有 GA 访问权限的用户启动 OAuth 设置。请注意，这是一次。回调处理程序必须是这样的：

注意：此处使用的库与上一个答案相同，详细代码在包装器中。

```
$redirect = 'http://' . $_SERVER['HTTP_HOST'] . '/content/business-intelligence';
if (isset($_GET['code'])) {
    require_once 'GAPI.php';
    $client = GAPI::init(); //create client instance of Google_Client
    $client->authenticate(); //convert auth code to access token
    $token = $client->getAccessToken();
    $retVal = CF_GAPI::persistToken($token); //save token
    if($retVal)
        $redirect .= "?new_token";
    else
        $redirect .= "?bad_token";
}
header('Location: ' . $redirect); //redirect to bi index 
```

保存令牌后，您必须在客户端中设置它，然后再向 GA 发出请求以获取您的分析数据。像：

```
try {
    $token = GAPI::readToken(); //read from persistent storage
} catch (Exception $e) {
    $token = FALSE;
}

if($token == FALSE) {
    $logger->crit("Token not set before running cron!");
    echo "Error: Token not set before running cron!";
    exit;
}

$client = GAPI::init(); //instance of Google_Client
$client->setAccessToken($token); 
```

`GAPI::init()`实现如下：

```
$client = new Google_Client();
$client->setApplicationName(self::APP_NAME);

$client->setClientId(self::CLIENT_ID);
$client->setClientSecret(self::CLIENT_SECRET);
$client->setRedirectUri(self::REDIRECT_URI);
$client->setDeveloperKey(self::DEVELOPER_KEY);

//to specify that the token is stored offline
$client->setAccessType('offline');

//all results will be objects
$client->setUseObjects(true);

//tell that this app will RO from Analytics
$client->setScopes('https://www.googleapis.com/auth/analytics.readonly');

return $client; 
```

我的 mysql 表具有`id, title, send_to_emails, frequency, dimensions, metrics, filters, profile_id`完全定义从 GA 生成的每个报告的列。您可以使用[文档](https://developers.google.com/analytics/devguides/reporting/core/v3/reference)、[指标和维度列表](https://developers.google.com/analytics/devguides/reporting/core/dimsmets)以及您已经了解的[沙盒测试器来玩弄它们。](http://ga-dev-tools.appspot.com/explorer/)

# xml - XSLT 条件测试

> ID：14728601
> 
> 赞同：0
> 
> 时间：2013-02-06T12:01:18.677
> 
> 标签：xml, xslt, conditional

我的考试答案正确吗？

## 给定输入 XML：

```
<weather> 

<date>2011-07-14T8:00</date> 

<region sky="sunny">

 <name>Karlsruhe</name>
 <temperature>26.54</temperature>

</region>

<region sky="rainy">
  <name>Stuttgart</name> 
  <temperature>12.54</temperature>

</region>

<region sky="sunny">
   <name>Freiburg</name>
   <temperature>40</temperature> 

 </region>
 </weather> 
```

## 必需的：

e) XSLT（20 分）编写一个 XSL 转换，接收给定的 XML 作为输入，并输出具有至少 24 摄氏度温度的所有区域名称的文本。对于上述 XML，输出应如下所示： Karlsruhe: 26.54 Freiburg: 24.21

## 我的回答不知道是否正确：

```
<?xml version="1.0" ?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <output method="text"/>
 <xsl:template match="/">

  <xsl:for-each select="weather/region">
  <xsl:if test="temperature>30">

      <xsl:value-of select="name"/>
      <xsl:value-of select="temperature"/>

  </xsl:if>
  </xsl:for-each>

 </xsl:template>
 </xsl:stylesheet> 
```

* * *

我不确定我是否应该使用

```
 <xsl:value-of select="name"/><xsl:value-of select="temperature"/> 
```

或者 `<apply-template select="name"/> : <apply-template select="temperature"/>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:22:03.823

看起来不错，只是`output`元素需要其命名空间前缀：

```
<xsl:output method="text"/> 
```

并且说明说“至少 24 度”，所以这将是：

```
<xsl:if test="temperature >= 24"> 
```

为了正确输出值，我建议使用`concat()`：

```
<xsl:stylesheet version="1.0"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
  <xsl:for-each select="weather/region">
    <xsl:if test="temperature >= 24">
      <xsl:value-of select="concat(name, ': ', temperature, ' ')"/>
    </xsl:if>
  </xsl:for-each>

 </xsl:template>
</xsl:stylesheet> 
```

更好的方法是使用模板和 XPath 选择来评估条件，但我不确定这是否会超出您的课程范围：

```
<xsl:stylesheet version="1.0"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
  <xsl:apply-templates select="weather/region[temperature >= 24]" />
 </xsl:template>

 <xsl:template match="region">
   <xsl:value-of select="concat(name, ': ', temperature, ' ')" />
 </xsl:template>
</xsl:stylesheet> 
```

# r - R中的广义矩阵（求解线性方程组）

> ID：14728602
> 
> 赞同：-1
> 
> 时间：2013-02-06T12:01:20.363
> 
> 标签：r, matrix, system

我需要在 R 中求解一个线性方程组——我已经能够做得很好。请看下面的代码：

```
A<-matrix(c(1:5,2,1,2:4,3,2,1:3,4:2,1,2,5:1),nrow=5) #Creates a matrix of the coefficients
A #Displays the matrix of coefficients (below)

     [,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
[2,]    2    1    2    3    4
[3,]    3    2    1    2    3
[4,]    4    3    2    1    2
[5,]    5    4    3    2    1

kv<-matrix(c(7,-1,-3,5,17),nrow=5) #Creates a column vector of the known values

kv #Displays the column vector

     [,1]
[1,]    7
[2,]   -1
[3,]   -3
[4,]    5
[5,]   17

solve(A,kv) #Solves the continuous equation

     [,1]
[1,]   -2
[2,]    3
[3,]    5
[4,]    2
[5,]   -4 
```

问题是我现在需要概括我的解决方案，它可以用于具有相同结构但更大尺寸的方程组 - 无需像上面那样键入矩阵 A 的所有值。

有没有人能指出我如何做系数矩阵的正确方向，但该程序可以用来解决其他系统？

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:57:36.960

如果我理解正确：

```
bandmat <- function(n){
require(Matrix)
as.matrix(bandSparse(n,n,-(n-1):(n-1),diag=lapply(c(n:1,2:n),function(i) rep(i,n))))
}

bandmat(4)

     [,1] [,2] [,3] [,4]
[1,]    1    2    3    4
[2,]    2    1    2    3
[3,]    3    2    1    2
[4,]    4    3    2    1 
```

可能有一种更方便的方法来构建它。

编辑：这是你如何使用它。

```
#create some vector
set.seed(42)
kv <- sample(-10:10,10)
#[1]  9  8 -5  4  0 -2  1 -9  5  2

#solve equation system
solve(bandmat(length(kv)),kv)
#[1]  0.0 -6.0 11.0 -6.5  1.0  2.5 -6.5 12.0 -8.5  2.0 
```

# android - 根据语言选择对齐文本视图（左-右）

> ID：14728604
> 
> 赞同：5
> 
> 时间：2013-02-06T12:01:21.003
> 
> 标签：android, android-layout, android-linearlayout, android-xml

我有一个线性布局，其中包含水平排列的 textView 和 EditText。我有一个选项可以在以前的活动中选择语言（英语和阿拉伯语）。当我选择英语时，当前对齐很好，但是当我选择阿拉伯语时，它应该从右到左显示，这意味着 textView 位置应该向右（在布局中它将从左开始），然后是 editText。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/darkblue_bg"
android:orientation="vertical">

<LinearLayout
android:layout_width="match_parent"
android:layout_height="wrap_content" >

<EditText
android:id="@+id/editusername"
android:layout_width="196dp"
android:layout_height="wrap_content"
android:background="@drawable/textfield_default"
android:ems="10" >

</EditText>

<TextView
android:id="@+id/username"
android:layout_width="wrap_content"
android:layout_height="wrap_content"

/>

</LinearLayout>

</LinearLayout> 
```

任何人请给我解决方案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:04:37.277

您可以通过将布局放置在适当的布局文件夹中来指定特定于语言的布局。我不知道阿拉伯语的代码是什么，但应该类似于`/layout-aa/`

然而，今天更好的是使用相对布局，您使用`android:gravity="start"`或类似的位置，根据语言方向而不是严格的左/右对齐它。这适用于 API 版本 14 及更高版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-20T11:44:10.637

如果你想在文本视图中同时使用阿拉伯语和英语，首先你应该把它的布局：重力=“开始”如果你有一个英语句子它从左手边开始，阿拉伯语从右手边开始，这对你有帮助边。如果你想要它的组合，你必须像这样使用阿拉伯字符串 + \u200e\u202a 英文字符串 + \u202c + 阿拉伯字符串

反过来：

myEnglish String + "\u202B" + myArabicString + "\u202C" + moreEnglish

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-14T11:39:14.733

您可以在 textview 中使用 android:layout_alignParentRight="true"

# cakephp - cakephp中主域和子域共享一个tmp文件夹

> ID：14728605
> 
> 赞同：0
> 
> 时间：2013-02-06T12:01:21.323
> 
> 标签：cakephp

我有两个域，一个是主域，第二个是子域。我需要在他们两个之间共享一个 tmp 文件夹。在 core.php 中，我确实喜欢这个`define('CACHE_DIR', TMP.'cache'.DS.$_SERVER['SERVER_NAME']);`，`Cache::config('default', array('engine' => 'File', 'path' => ROOT.DS.'tmp'.DS));`但它不起作用。请如果有人知道这个问题，请帮助我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:06:01.650

一种解决方案是设置从子域 tmp 文件夹到主域 tmp 文件夹的符号链接。

[http://www.tech-recipes.com/rx/172/create_a_symbolic_link_in_unix_solaris_linux/](http://www.tech-recipes.com/rx/172/create_a_symbolic_link_in_unix_solaris_linux/)

然后子域应用程序可以像任何普通应用程序一样对待 tmp 文件夹。

可能有一种特殊的蛋糕方式可以做到这一点，但这也应该有效:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T22:51:39.223

TMP 常量将被定义在子域的应用程序目录中，因此您最终将保存文件

```
/subdomain-path/app/tmp/cache/domainname 
```

TMP 常量在 bootstrap.php 中定义，但您可以通过在 index.php 中自己定义来覆盖它

如果您将 TMP 设置到正确的位置，所有临时、会话和缓存文件都将写入该位置。所以认为如果会话数据存储在共享目录中是一个问题

**重要的**

请务必为每个网站设置不同的缓存*$prefix*。否则为一个网站缓存的模型也会被另一个网站使用，**这可能会导致使用错误数据库中的数据！！**这个变量可以在你的 app/Config/core.php 中设置

**重要2**

我强烈建议您**不要**使用该`$_SERVER['SERVER_NAME']`变量。如果您的网站使用 serverAliases（例如，两者都处理*www.example.com*和*example.com*），那么两个（子）域将使用单独的缓存目录。最好设置固定路径。

# c# - c#中如何避免重复记录

> ID：14728611
> 
> 赞同：0
> 
> 时间：2013-02-06T12:01:35.583
> 
> 标签：c#, linq

我分两步从服务器获取数据。

首先是从我的表中随机获取 25 条记录并将该记录显示给用户，现在我添加了一个按钮。当用户单击该按钮时，我必须显示数据库中的下 25 条记录，但我需要确保这些记录不包含已显示的任何人。如何在 C# 中执行此操作

这是我获得前 25 条记录的代码

```
var records = context.couponservice.Query().Take(25).ToList(); 
```

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:03:51.457

您可以`.Skip(pageSize * numberOfPages)`在 之前使用`.Take(pageSize)`来跳过您不想显示的许多记录/页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:04:42.967

怎么样

```
int position = 25; // Increase this for each page
var nextRecords = context.couponservice.Query().Skip(position).Take(25).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:07:01.960

试试这个

```
for(i=0;i<noOfPages;i++)
{
   var records = context.couponservice.Query().Skip(i * 25).Take(25).ToList();
} 
```

这会给你每次新的记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T12:40:51.463

跟踪您已经提取的项目。例如，将 ID 存储在列表或其他内容中。然后仅从您的来源收集其 ID 不在列表中的项目。从该结果中，您可以选择 25 个随机项目。

例如：

```
//Your datasource
var source = new Dictionary<int, string>
{
    {1, "One"},
    {2, "Two"},
    {3, "Three"},
    {4, "Four"},
    {5, "Five"},
    {6, "Six"},
    {7, "Seven"},
    {8, "Eight"},
    {9, "Nine"},
    {10, "Ten"}
};

//The ID's of already fetched items
var taken = new List<int> { 2, 7, 3, 6 };

//Subset: all items that haven't been taken yet:
var temp = source.Where(s => taken.Contains(s.Key) == false); 
```

现在，您可以从“temp”中选择随机元素并将这些项目的 ID 添加到“taken”列表中。

# android - AudioSource.VOICE_CALL 在 android 4.0 中不工作，但在 android 2.3 中工作

> ID：14728615
> 
> 赞同：11
> 
> 时间：2013-02-06T12:01:44.997
> 
> 标签：android, service, version, broadcast, mediarecorder

```
VOICE_CALL, VOICE_DOWNLINK ,VOICE_UPLINK 
```

不在android 4.0上工作，但在android 2.3（实际设备）上工作，我上传了一个虚拟项目来记录所有拨出电话，以便您自己查看

[http://www.mediafire.com/?img6dg5y9ri5c7rrtcajwc5ycgpo2nf](http://www.mediafire.com/?5qlwqipvtjotxww/ "下载源")

你只需要更改`audioSource = MediaRecorder.AudioSource.MIC;`到`audioSource = MediaRecorder.AudioSource.VOICE_CALL;`第 118 行`TService.java`

如果您遇到任何错误，请告诉我。任何与之相关的建议都将被接受。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-09T07:32:06.590

经过大量搜索，我发现一些制造商已经关闭了对此类功能的访问，因为在某些国家/地区不允许通话录音。如果有人发现这样的问题并以其他方式获得解决方案，那么将其发布在这里可能对许多人有帮助，因为很多人都有同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T08:18:17.057

尝试使用`MediaRecorder.AudioSource.VOICE_RECOGNITION`. 我遇到了同样的问题 - 默认情况下，ASUS Transformer 在后置摄像头附近使用麦克风，在这种情况下音频非常静音。`VOICE_CALL`在这款平板电脑上不起作用，我已经尝试过`VOICE_RECOGNITION`- 在这种情况下，它使用前置麦克风并且音量可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-13T07:04:05.100

好的，就我而言，[这段代码](https://stackoverflow.com/a/41376974/375958)（谢谢[eyal](https://stackoverflow.com/users/341497/eyal)！）适用于三星 Galaxy Note 6：

```
String manufacturer = Build.MANUFACTURER;
if (manufacturer.toLowerCase().contains("samsung")) {
    recorder.setAudioSource(MediaRecorder.AudioSource.VOICE_COMMUNICATION);
} else {
    recorder.setAudioSource(MediaRecorder.AudioSource.VOICE_CALL);
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-05-23T13:52:24.060

你尝试添加这个，它可能是

```
new Handler().postDelayed(new Runnable() {
    @Override
    public void run() {
        // TODO Auto-generated method stub
        mMediaRecorder.start();
    }
}, 1000); 
```

# windows-phone-7 - 在 XNA 中加载调整大小的纹理

> ID：14728620
> 
> 赞同：0
> 
> 时间：2013-02-06T12:02:04.793
> 
> 标签：windows-phone-7, memory, xna, texture2d, rendertarget

我正在为 Windows Phone XNA 开发并希望加载尺寸较小的纹理以减少不需要完整图像的内存影响。

我目前的解决方案是使用一个渲染目标来绘制并返回该渲染目标作为一个较小的纹理来使用：

```
public static Texture2D LoadResized(string texturePath, float scale)
{
    Texture2D texLoaded = Content.Load<Texture2D>(texturePath);
    Vector2 resizedSize = new Vector2(texLoaded.Width * scale, texLoaded.Height * scale);
    Texture2D resized = ResizeTexture(texLoaded, resizedSize);
    //texLoaded.Dispose();
    return resized;
}

public static Texture2D ResizeTexture(Texture2D toResize, Vector2 targetSize)
{
    RenderTarget2D renderTarget = new RenderTarget2D(
        GraphicsDevice, (int)targetSize.X, (int)targetSize.Y);

    Rectangle destinationRectangle = new Rectangle(
        0, 0, (int)targetSize.X, (int)targetSize.Y);

    GraphicsDevice.SetRenderTarget(renderTarget);
    GraphicsDevice.Clear(Color.Transparent);

    SpriteBatch.Begin();
    SpriteBatch.Draw(toResize, destinationRectangle, Color.White);
    SpriteBatch.End();
    GraphicsDevice.SetRenderTarget(null);

    return renderTarget;
} 
```

这样做的原因是纹理被调整了大小，但从内存使用情况来看，纹理“texLoaded”似乎没有被释放。当使用未注释的 Dispose 方法时，SpriteBatch.End() 将抛出一个已处理的异常。

任何其他方式来加载调整大小以减少内存使用的纹理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:16:48.900

你的代码*几乎*没问题。它有一个小错误。

您可能会注意到，它只会在您*第二*次调用`LoadResized`任何给定纹理时抛出该异常。这是因为`ContentManager`它保留了它加载的内容的内部缓存 - 它“拥有”它加载的所有内容。这样，如果您加载两次，它只会将缓存的对象返回给您。通过调用`Dispose`，您正在将对象置于其缓存中！

因此，解决方案是不用于`ContentManager`加载您的内容 - 至少不是默认实现。您可以从不缓存项目的类中继承您自己的类`ContentManager`，如下所示（代码基于[此博客文章](http://blogs.msdn.com/b/shawnhar/archive/2007/03/09/contentmanager-readasset.aspx)）：

```
class FreshLoadContentManager : ContentManager
{
    public FreshLoadContentManager(IServiceProvider s) : base(s) { }

    public override T Load<T>(string assetName)
    {
        return ReadAsset<T>(assetName, (d) => { });
    }
} 
```

传入`Game.Services`创建一个。不要忘记设置`RootDirectory`属性。

然后使用这个派生的内容管理器来加载您的内容。您现在可以安全地（现在应该！）`Dispose`您自己从中加载的所有内容。

您可能还希望将事件处理程序附加到`RenderTarget2D.ContentLost`事件，以便在图形设备“丢失”的情况下重新创建调整大小的纹理。

# java - 如何使用 Java MP3 ID3 标签库检索专辑封面

> ID：14728621
> 
> 赞同：17
> 
> 时间：2013-02-06T12:02:07.923
> 
> 标签：java, id3v2

我正在制作一个 mp3 播放器。我正在使用[Java mp3 id3 标记库](http://sourceforge.net/projects/javamusictag/?source=dlp)。我知道专辑封面被编码为 ID3v2 标签。

我可以访问 mp3 文件的 ID3v2 标签，但是我无法获得艺术品！[API](http://javamusictag.sourceforge.net/api/index.html)中的 AbstractID3v2 类中的所有方法 似乎都没有检索图片。

如何使用这个库？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-07T10:55:35.563

我最终使用了另一个库，我使用[了 mp3agic](https://github.com/mpatric/mp3agic)

这是一个很棒的库，易于使用。这是我用来获取专辑封面的示例代码

```
Mp3File song = new Mp3File(filename);
if (song.hasId3v2Tag()){
     ID3v2 id3v2tag = song.getId3v2Tag();
     byte[] imageData = id3v2tag.getAlbumImage();
     //converting the bytes to an image
     BufferedImage img = ImageIO.read(new ByteArrayInputStream(imageData));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-31T12:16:11.367

还有可以读/写 Mp3、Mp4（Mp4 音频、M4a 和 M4p 音频）Ogg Vorbis、Flac 和 Wma 以及其他一些（专辑艺术）的 Jaudiotagger [。](http://www.jthink.net/jaudiotagger/)

```
MP3File f = (Mp3File)AudioFileIO.read(testFile);
List<Artwork> artworkList;
if (f.hasID3v1Tag()) {
    ID3v1Tag v1tag = f.getID3v1Tag();
    artworkList = (List<Artwork>) v1tag.getArtworkList();
    /* ... */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-18T15:38:46.433

您可以使用 mp3agic 来做到这一点，这是另一种方式！

在此处获取 Jar：[https ://jar-download.com/artifacts/com.mpatric/mp3agic/0.9.0/source-code](https://jar-download.com/artifacts/com.mpatric/mp3agic/0.9.0/source-code)

```
Mp3File mp3file = new Mp3File("SomeMp3File.mp3");
if (mp3file.hasId3v2Tag()) {
   ID3v2 id3v2Tag = mp3file.getId3v2Tag();
   byte[] imageData = id3v2Tag.getAlbumImage();
}

if (imageData != null) {
   String mimeType = id3v2Tag.getAlbumImageMimeType();
   RandomAccessFile file = new RandomAccessFile("album-artwork", "rw");
   file.write(data);
   file.close();
} 
```

# r - 从表结果中提取因子标签以用作数据框列

> ID：14728626
> 
> 赞同：0
> 
> 时间：2013-02-06T12:02:15.403
> 
> 标签：r, dataframe, syntax, r-factor

我正在使用原始行输入格式 UID=character, Win/Lose=Boolean 进行点击流日志文件摘要。我要创建的输出摘要是表单行 UID、sumWin、sumLose。我已经使用表格来获得我想要的部分内容，但是我无法找出正确的语法来从表格结果中提取因子标签以用于摘要 df。下面的示例构建了一个小测试用例并显示了我卡住的地方：我无法从表格结果中获取因子标签。（当然，你认为有一种更好的方法来处理整个事情——这显然也会非常有用！）

我在这里的编辑器中仍然无法格式化 - 显然这是我接下来需要问的问题......！

```
foo <- data.frame(Uid=character(4), Win=logical(4), stringsAsFactors=FALSE)  
  foo$Uid <- c("UidA", "UidB", "UidA", "UidC")  
  foo$Win <- c(FALSE, TRUE, TRUE, FALSE)  
  #display foo  
  foo  
   Uid   Win  
1 UidA FALSE  
2 UidB  TRUE  
3 UidA  TRUE  
4 UidC FALSE  

  # my desired summary df is, for each UID: NWin (foo$Win=TRUE), NRunUp (foo$Win=FALSE)   
  # here I initialise a holder for it  
  fooNUniques <- length(unique(foo$Uid))  
  fooSummary <- data.frame(Uids=character(fooNUniques),NWins=numeric(fooNUniques),NRunUps=numeric(fooNUniques))   
  fooSummary

  Uids NWins NRunUps

1          0       0  
2          0       0  
3          0       0  
  #I can reference in to the result of applying table to get part of what I want  
  #First I get the table, this gets me a table by win/lose value  
  fooTable <- table(foo$Uid, foo$Win)  
  fooTable  

         FALSE TRUE  
  UidA     1    1  
  UidB     0    1  
  UidC     1    0  

  # I can get at the actual results via unname which gives me a matrix  
  fooTableAsMat <- unname(fooTable)  
  fooTableAsMat  
     [,1] [,2]  
[1,]    1    1  
[2,]    0    1  
[3,]    1    0  

  #but the UID vec is hidden in the table structure *somewhere* and   
  # I can't work out how to reference it out  

  #coercing the result to a dataFrame doesn't work

  as.data.frame(fooTable)  
    Var1  Var2 Freq  
  1 UidA FALSE    1  
  2 UidB FALSE    0  
  3 UidC FALSE    1  
  4 UidA  TRUE    1  
  5 UidB  TRUE    1  
  6 UidC  TRUE    0  

  #I have also tried 'aggregate' but have not made friends with it 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:28:46.213

这有帮助吗？

使用`plyr`：

```
> ddply(foo, .(Uid), summarise, NWin = sum(Win), NRunUp = sum(!Win))
#    Uid NWin NRunUp
# 1 UidA    1      1
# 2 UidB    1      0
# 3 UidC    0      1 
```

# java - 将值从活动传递到广播接收器时出现 NullPointerExceptoin

> ID：14728627
> 
> 赞同：0
> 
> 时间：2013-02-06T12:02:18.397
> 
> 标签：java, android, android-activity, broadcastreceiver

我有一个简单的问题。

我在主要活动中声明了文本视图，并从 XML ( `findViewById`) 创建了它。我想将此值传递给广播接收器的子类。以下是我的广播构造函数：

```
public Broadcast(TextView text_dBm) {   
    this.text_dBm = text_dBm;   
} 
```

在我的主要活动中，我创建了一个新的广播对象并在其中传递了我的 textview 值，如下所示：

```
new Broadcast(text_dBm); 
```

但我的`text_dBm`. 无论如何（除了静态方法）在活动和广播接收器之间传递值吗？

哦，是的。我的广播接收器以编程方式注册（在服务中），并且运行良好。

感谢您的时间！

PS：*我已经在 SO 中检查了一些线程，但我没有找到答案：* [如何从广播接收器中的活动传递值？](https://stackoverflow.com/questions/7846338/how-to-pass-value-from-an-activity-in-an-broadcast-receiver)

**主要活动类：**

```
public class MainActivity extends Activity {
    TextView text_dBm, text_time, text_rssi;
    Intent startServiceFromActivity;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        text_dBm = (TextView) findViewById(R.id.textView_dBm);

        new Broadcast(text_dBm);
        startServiceFromActivity = new Intent(this, WifiService.class);
        startService(startServiceFromActivity); 
    }
} 
```

**广播接收器类：**

```
public class Broadcast extends BroadcastReceiver {
    WifiInfo wifiInfo;
    WifiManager wifiManager_service;
    TextView text_dBm;

    public Broadcast(WifiManager wifiManager_service) { 
        this.wifiManager_service = wifiManager_service; 
    }

    public Broadcast(TextView text_dBm) {       
        this.text_dBm = text_dBm;
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("RECEIVER", "Receiver running"); // LOG   

        text_dBm.setText("textview"); // nullpointerexception
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:06:46.627

通过意图传递数据

活动 -

```
Intent i = new Intent(Activity.this, Broadcast.class);
Bundle b = new Bundle();
b.putString("key", "value");
i.putExtras(b);
startActivity(i); 
```

在您的广播接收器类`onReceive`方法中

```
@Override
public void onReceive(Context context, Intent intent) 
{
    String result = intent.getString("key");
    // your method
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T12:16:46.067

您不能使用 Intents 传递视图。为了做你想做的事，你需要你的广播接收器成为你活动的内部类。接收者应该在活动开始**时**注册，在活动停止时取消注册。否则你会泄漏内存。这意味着您只能在实际在活动屏幕本身上接收消息。

如果您需要能够接收活动之外的广播，您将需要：

1.  在给定操作的清单中注册您的接收器（或在服务中，但不要忘记取消注册）
2.  启动活动并使用额外的意图传递消息以在文本视图中显示
3.  当活动开始时，检查意图是否包含任何要在文本视图中显示的内容并执行必要的操作

* * *

从您的评论中：

1.  将接收器创建为活动的内部类（不是静态的，因此它可以访问活动的 TextView 实例）
2.  在 onStart 中注册接收器
3.  在 onStop 中取消注册接收器
4.  在接收器的 onReceive 方法中执行： textView.setText(intent.getStringExtra("dbm"));
5.  服务通过传递一个名为“dbm”的额外意图并包含您要显示的文本来发送广播

-

```
public class MainActivity extends Activity {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    dbmView = (TextView) findViewById(R.id.textView_dBm);
  }

  @Override
  protected void onStart() {
    super.onStart();
    IntentFilter intentFilter = new IntentFilter("com.example.broadcasts.DBM_UPDATE");
    registerReceiver(receiver, intentFilter);
  }

  @Override
  protected void onStop() {
    unregisterReceiver(receiver);
    super.onStop();
  }

  private TextView dbmView;

  private BroadcastReceiver receiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        dbmView.setText(intent.getStringExtra("dbm"));
    }
  }

} 
```

在服务中：

```
Intent i = new Intent("com.example.broadcasts.DBM_UPDATE");
i.putExtra("dbm", "it works!");
sendBroadcast(i); 
```

# xml - 扫描特定数据包的端口，并根据数据包中的数据创建 XML

> ID：14728631
> 
> 赞同：0
> 
> 时间：2013-02-06T12:02:24.603
> 
> 标签：xml, networking, udp, snmp

我需要创建一个程序/脚本，不断扫描计算机上的传出流量，搜索 SNMP 陷阱数据包（位于端口 162 上），并根据该特定数据包内的描述，创建一个包含多个字段的 XML ，在其中一个字段中使用数据包中的数据。

我查看了不同的端口扫描解决方案，但还没有真正找到可以用于该特定目的的任何东西。

有人可以指出我正确的方向吗？从哪里开始，我应该使用什么工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:42:14.363

我认为您应该使用[PCAP 库](http://www.tcpdump.org/pcap.htm)。

基本上，您必须过滤具有目的地`port 162`的数据包（查看`pcap_compile()`和`pcap_set_filter()`函数）并剖析`pcap_next`.

如果发现有用的东西，则转储内容或其他内容。

查看上面链接页面中的**“实际嗅探”**部分。其中的代码将使用目标或源端口 23 捕获数据（查看`filter_exp`字符串）。从那里开始并根据您的需要进行调整。

**更新**

如果您对 感觉更舒服`python`，则`libpcap`存在一个名为[Pcapy的接口](http://corelabs.coresecurity.com/index.php?module=Wiki&action=view&type=tool&name=Pcapy)

`Perl`提供与[Net::Pcap 库相同的功能](http://search.cpan.org/~kcarnut/Net-Pcap-0.05/Pcap.pm)

这是[Ruby 绑定](http://sourceforge.net/apps/trac/rubypcap/)

对于许多其他现代语言也是如此......

# c# - 在 Npgsql 中使用带时区的时间戳

> ID：14728632
> 
> 赞同：1
> 
> 时间：2013-02-06T12:02:28.203
> 
> 标签：c#, .net, database, npgsql, postgresql-9.2

需要在数据库中保存带有时区的时间戳。表中的目标字段声明为

```
"UploadTime" timestamp with time zone 
```

我正在使用命令参数插入数据：

```
var uploadTime = DateTimeOffset.Now;
var insertQuery = @"INSERT INTO ""Table"" (""UploadTime"") VALUES :uploadTime"; 
var uploadTimeParam = new NpgsqlParameter("uploadTime", NpgsqlDbType.TimestampTZ);
uploadTimeParam.Value = uploadTime;
var insertCommand = new NpgsqlCommand(insertQuery, databaseConnection);
insertCommand.Parameters.Add(uploadTimeParam); 
```

值作为没有时区的 DateTime 存储和返回。我猜那是因为“带时区的时间戳”数据库类型默认映射到 DateTime。可能这可以通过检查源并对 TimestampTZ 进行相应的更改来解决，但它会干扰使用 Nuget 管理项目依赖项的想法。也许有一些不太复杂的方法可以实现这一目标？存储刻度并将它们转换为 DateTimeOffset 是一种开销，在我的情况下查询执行不起作用之前使用“SET TIME ZONE INTERVAL”破解。提前感谢任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:47:32.920

通过存储手动映射到 DateTimeOffset 的附加时间戳 RTT 字段解决了问题。

# c# - javascript自定义转换器反序列化json数组

> ID：14728633
> 
> 赞同：0
> 
> 时间：2013-02-06T12:02:28.643
> 
> 标签：c#, json

我有一个包含 long 数组的对象模型，并且我正在反序列化一个包含使用自定义 javascript 转换器和 javascript 序列化程序类的数组的 json 字符串。

我认为这会起作用，但它不会：

```
List<long> TheList = new List<long>;

if (dictionary.ContainsKey("TheArray") && dictionary["TheArray"] != null)
{
    TheList = serializer.ConvertToType<List<long>>(dictionary["TheArray"]); //bug
    TheObject.TheObjectList = (from s in TheList 
                               select Convert.ToInt64(s)).ToList<long>();
} 
```

错误就行`TheList = serializer.ConvertToType...`了，错误信息是：

> 无法将“System.String”类型的对象转换为“System.Collections.Generic.List`1[System.Int64]”类型

我也试过这个：

```
var TheStringArray = serializer.ConvertToType<string>(dictionary["TheArray"]);

TheObject.TheObjectList = (from s in TheStringArray.Split(',') 
                           select Convert.ToInt64(s)).ToList<long>(); 
```

但随后我收到此错误消息：

> 数组的反序列化不支持类型“System.String”。

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:46:40.617

Array is visible to `JavaScriptConverter` as `ArrayList`, you may approach the deserialization like this:

```
List<long> theArray = null;

if (dictionary.ContainsKey("TheArray") && dictionary["TheArray"] is ArrayList)
{
    theArray = new List<long>();
    ArrayList serializedTheArray = (ArrayList)dictionary["TheArray"];
    foreach (object serializedTheArrayItem in serializedTheArray)
    {
        if (serializedTheArrayItem is Int64)
            theArray.Add((long)serializedTheArrayItem);
    }
} 
```

This will do all types checking in case there is somethign unexpected in the JSON. Of course it assumes that `TheArray` property in JSON in fact contains an Array, not inner JSON string which represents Array (the error message might suggest this kind of issue).

# android - 如何为活动中的类编写 Junit 测试用例？

> ID：14728637
> 
> 赞同：0
> 
> 时间：2013-02-06T12:02:41.313
> 
> 标签：android, junit, gps

我有`GPSLocationListener` 一个在 Activiy 中的类名，我想测试作为类方法的`onLocationChanged()`方法。`GPSLocationListener`所以我可以在同一个 Actvity 中编写测试用例，还是我必须为该类创建不同的测试`GPSLocationListener`类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:38:43.120

我强烈建议您为当前项目制作一个单独的测试项目。

假设您使用的是 eclipse，只需右键单击您当前的项目 --> 新建 --> 其他 --> 在“Android”下找到“Android Test Project”并选择目标项目。

现在您可以向您的测试项目添加一个类，并让它像这样扩展 AndroidTestCase：

```
public class MainActivityTest extends AndroidTestCase {

    public void methodTest() {
        //Your method specific test here
    }

    public void testSanity() {
        assertEquals(2, 1 + 1);
    }
} 
```

# windows-8 - 从辅助磁贴启动时如何调试 Windows 应用商店应用程序

> ID：14728646
> 
> 赞同：1
> 
> 时间：2013-02-06T12:03:06.557
> 
> 标签：windows-8, windows-runtime, windows-store-apps

我想在通过辅助磁贴启动时调试应用程序，据我所知，没有办法设置启动参数或类似的东西，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T12:14:50.357

试试这个。在 Visual Studio 中，右键单击您的项目 > 属性 > 调试 > 选中不启动，但在启动时调试我的代码

# c++ - 如何使用语言支持等进行“轻量级”构建 GCC？

> ID：14728652
> 
> 赞同：25
> 
> 时间：2013-02-06T12:03:23.683
> 
> 标签：c++, gcc, build

基本上我想制作一个只支持 C/C++ 的 GCC 的轻量级版本。这可以轻松完成还是需要手动修改源代码？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-06T12:13:47.657

这在[安装 GCC](http://gcc.gnu.org/install/)和[配置中有所介绍](http://gcc.gnu.org/install/configure.html)

> --enable-languages=lang1,lang2,...
> 指定只应构建特定的编译器子集及其运行时库。对于 langN 的有效值列表，您可以在 GCC 源代码树的 gcc 目录中发出以下命令：
> 
> ```
>  grep language= */config-lang.in 
> ```
> 
> 目前，您可以使用以下任何一种：all、ada、c、c++、fortran、go、java、objc、obj-c++。构建 Ada 编译器有特殊要求，见下文。如果您不传递此标志，或指定选项 all，则将配置 gcc 子树中可用的所有默认语言。Ada、Go 和 Objective-C++ 不是默认语言；其余的是。

因此，对于您的情况，使用：

```
../gcc/configure --enable-languages=c,c++ 
```

当然，除了其他需要的选项外，应该就足够了。

另请[参阅](http://gcc.gnu.org/install/build.html)

> 请注意，在调用 `make' 时重新定义 LANGUAGES**不再起作用**！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-29T23:42:11.107

您还可以使用：

```
make install-strip 
```

显着减小您的安装尺寸

# android - Android - 打开 Facebook 应用程序以注销

> ID：14728654
> 
> 赞同：0
> 
> 时间：2013-02-06T12:03:27.023
> 
> 标签：android, facebook, single-sign-on, logout

如果我使用 SSO 登录我的应用程序并且现在我想注销，是否可以打开 Facebook 应用程序进行注销或以其他方式注销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:11:14.807

不，但您可以强制在用户下次尝试登录您的应用程序时显示 facebook auth 对话框，即使当时他仍会在 Facebook 应用程序中使用他的帐户登录。

```
facebook.authorize(activity, FACEBOOK_PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, facebookDialogListener); 
```

# inno-setup - 如何迭代 Inno-Setup 预处理器数组？

> ID：14728662
> 
> 赞同：1
> 
> 时间：2013-02-06T12:03:54.190
> 
> 标签：inno-setup

我有一个这样定义的 Inno Setuo 预处理器数组

```
#dim MYARRAY[3]
#define MYARRAY[0] 'foo'
#define MYARRAY[1] 'bar'
#define MYARRAY[1] 'baz' 
```

不，我想遍历该数组并将其内容放入我的翻译中，例如（非工作）：

```
#define i 0
#define NUMBERELEMENTS 3

#for {i = 0; i < NUMBERELEMENTS; i++} {#MYARRAY[i]} 
```

不过，我发现以下方法可行，但这是唯一可行的方法吗？使用`i`作为“全局”变量感觉和简单使用`#sub`感觉是错误的。

```
#sub mysub
    {#MYARRAY[i]}
#endsub
#for {i = 0; i < NUMBERELEMENTS; i++} mysub 
```

**编辑：**

令我困惑的是，以下内容不会在翻译中产生任何内容：

```
#define GetElement() MYARRAY[i]
#for {i = 0; i < NUMBERELEMENTS; i++} GetElement(i) 
```

我希望它会`MYARRAY`在翻译中的每个元素生成一行内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:00:17.717

A`#sub`是在这种情况下唯一有效的方法。行目前只能通过先前定义的`#sub`或 via输出到翻译`#emit`，后者是语句，不能从表达式上下文中调用。

请注意，您可以通过`#define private i`在定义 sub 之前和`#undef i`for 循环之后使用来减轻“讨厌的全局变量”的感觉。

[已提交问题](https://github.com/jrsoftware/issrc/issues/25)以增强 ISPP；如果你愿意，你可以尝试在那里添加你的声音。

另外，我已经有一个脚本可以做这种事情（`CurStepChanged`通过`#include`d 文件挂钩）；它还没有完全准备好供公众使用，但我计划在接下来的一两天内把它清理干净并发布到网上。因此，如果您可以坚持一段时间，那么您可以查看或使用它。（一旦发布，我将使用链接编辑我的答案。）

# windows-runtime - 强制 GridView 创建不回收控件

> ID：14728663
> 
> 赞同：2
> 
> 时间：2013-02-06T12:03:54.493
> 
> 标签：windows-runtime, winrt-xaml, windows-store-apps

我在具有 ItemContainerStyleSelector 的 Windows 商店应用程序中有一个 GridView。在样式中是一个 Image 控件，它有一个自定义的依赖属性来设置源（这样我就可以获得 Image 的句柄并连接到 unloaded 事件）。我的问题是图像永远不会被卸载并且似乎被重用了。这意味着当我设置源时，图像也会设置在 GridView 中的其他项目上（例如，我有一个没有图像的对象，但在滚动离开然后再返回它有来自另一个对象的图像）。

我试图将虚拟化模式设置为标准，但它没有帮助。任何想法将不胜感激。

这是样式中包含的图像。设置时将其传递给方法“OnRemoteURISourceChanged”。每当调用该方法时，我都希望有一个不同的图像控件，但事实并非如此。

```
<Image x:Name="BackgroundImage" DataContext="{Binding CurrentBackdrop}" helpers:ImageExtensions.RemoteURISource="{Binding Uri}" Stretch="UniformToFill"/> 
```

这是我的 GridView

```
<GridView x:Name="ItemsGrid" Grid.Row="1" ItemsSource="{Binding BrowseResults}" SelectedItem="{Binding SelectedItem, Mode=TwoWay}" Margin="20,0,20,0"
              IsItemClickEnabled="True" ItemClick="ItemsGrid_ItemClick" VirtualizingStackPanel.VirtualizationMode="Standard">
        <GridView.ItemContainerStyleSelector>
            <controls:UPnPCDStyleSelector CDObject="{StaticResource somestyle1}" Container="{StaticResource somestyle2}" Item="{StaticResource somestyle3}"/>
        </GridView.ItemContainerStyleSelector>
        <GridView.ItemsPanel>
            <ItemsPanelTemplate VirtualizingStackPanel.VirtualizationMode="Standard">
                <WrapGrid Orientation="Vertical" VirtualizingStackPanel.VirtualizationMode="Standard"/>
            </ItemsPanelTemplate>
        </GridView.ItemsPanel>
    </GridView> 
```

更新：问题似乎是 WrapGrid。如果我将其更改为 VirtualizingStack 面板并将 VirtualizationMode 设置为 Standard，那么一切都按预期工作，但显然我的项目只出现在一行上，而不是我希望的多行上。

如何设置 WrapGrid 的虚拟化模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-28T12:36:14.243

您确定加载 img 源的任务在等待时返回到默认 ui 上下文吗？我认为设置 Image.Source 属性表单代码不是一个好主意。更好的解决方案是创建一个自定义的 observable 任务类并将 im 源绑定到它的结果。在后台你可以调用任务。您需要控件为图像吗？因为如果它是一个带有模板的控件，那么你这样做会更容易。如果您愿意，我可以向您发送执行此操作的课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T16:21:32.297

当您的属性或其属性值为空时，您是否有可能`helpers:ImageExtensions.RemoteURISource`不清除？`Image.Source``CurrentBackdrop``Uri`

# jquery - 如何检查ajax响应是否包含特定值

> ID：14728664
> 
> 赞同：4
> 
> 时间：2013-02-06T12:03:54.433
> 
> 标签：jquery, ajax

如何检查返回的结果是否包含特定值？

```
$(function () {
    $('form').submit(function (e) {
        e.preventDefault();
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            success: function (result) {

               //here i wanna check if the result return contains value "test"
               //i tried the following..
                 if($(result).contains("test")){
                 //do something but this doesn't seem to work ...
                 }

                }
            },
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-06T12:07:19.170

## [Array.prototype.indexOf()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)

```
if(result.indexOf("test") > -1) 
```

* * *

由于这仍然会获得投票，我将编辑一个更现代的答案。

使用 es6，我们现在可以使用一些更高级的数组方法。

## [Array.prototype.includes()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)

`result.includes("test")`这将返回一个真或假。

## [Array.prototype.some()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)

如果您的数组包含对象而不是字符串，您可以使用

`result.some(r => r.name === 'test')`如果数组中的对象具有名称 test，它将返回 true。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-06T12:09:53.677

jQuery 对象没有`contains`方法。如果您期望返回的结果是一个字符串，您可以检查您的子字符串是否包含在其中：

```
if ( result.indexOf("test") > -1 ) {
    //do something
} 
```

如果您的结果是 JSON，并且您正在检查顶级属性，您可以执行以下操作：

```
if ( result.hasOwnProperty("test") ) {
    //do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:30:18.747

:contains() 是一个选择器。你可以从这里查看[http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

对于这个例子，你可以使用 indexOf 如下

# objective-c - NSService 没有调用它的 NSMessage

> ID：14728671
> 
> 赞同：2
> 
> 时间：2013-02-06T12:04:20.827
> 
> 标签：objective-c, macos, cocoa, finder

我正在尝试添加一个 Finder 服务，在我希望该服务完成其工作之前，一切看起来都很好。

这是我的 AppDelegate.m 中的方法：

```
-(void)uploadFromPasteboard:(NSPasteboard *)pboard userData:(NSString *)udata error:(NSString **)err
{
    NSString *filename = [pboard stringForType:NSURLPboardType];
    dbg(@"file: %@", filename);
} 
```

plist配置：

```
<key>NSServices</key>
<array>
    <dict>
        <key>NSRequiredContext</key>
        <dict/>
        <key>NSMenuItem</key>
        <dict>
            <key>default</key>
            <string>Upload File</string>
        </dict>
        <key>NSMessage</key>
        <string>uploadFromPasteboard</string>
        <key>NSPortName</key>
        <string>Finder</string>
        <key>NSSendTypes</key>
        <array>
            <string>NSURLPboardType</string>
        </array>
        <key>NSReturnTypes</key>
        <array/>
    </dict>
</array> 
```

一切似乎都很好，该服务显示在服务菜单中，但是当我单击它时，什么也没有发生，没有日志或其他任何东西，就像根本没有调用它一样。

有人能指出我怎么了，因为我开始几乎不拔头发了:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:08:03.470

你在设置你的服务提供者实例吗？像这样（来自：[提供服务](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/SysServices/Articles/providing.html#//apple_ref/doc/uid/20000853-BABDICBI)）：

```
EncryptoClass* encryptor = [[EncryptoClass alloc] init];
[NSApp setServicesProvider:encryptor]; 
```

仅在您的应用程序委托类中使用此方法是不够的。在标准应用程序设置中，在您的应用程序委托中使用它可能就足够了：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [NSApp setServicesProvider: self];
} 
```

您还为`NSPortName`. 这可能是不正确的。来自[服务属性](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/SysServices/Articles/properties.html#//apple_ref/doc/uid/20000852-CHDJDFIC)（强调我的）：

> NSPortName 是应用程序应该侦听服务请求的端口的名称。它的值取决于服务提供者应用程序的注册方式。**在大多数情况下，这是应用程序名称。**对于用作服务的 Automator 工作流，此属性将被忽略。

我对文档的阅读是，名称在 NSPortName 中的应用程序是用于处理服务请求的应用程序。如果您的应用程序的名称不是“Finder”（出于显而易见的原因，它*不应该*是），那么您的应用程序将永远不会被服务调用。

# ios - AFNetworking/NSURLConnection HTTPS 保持活动显示奇怪的行为

> ID：14728673
> 
> 赞同：12
> 
> 时间：2013-02-06T12:04:25.100
> 
> 标签：ios, https, nsurlconnection, afnetworking, keep-alive

我们目前正在处理我们的应用程序中的性能问题，我们认为其中一些问题可能与应用程序和底层 AFNetworking 网络堆栈似乎忽略 HTTP 1.1 上的 keep-alive 的事实有关。

我们从 Apple 获得的信息表明，持久连接分别在 3、6 或 30 秒后被清除，具体取决于 iOS 版本和 WiFi/WWAN 连接，无论服务器端保持活动信息如何。

在监控服务器上的连接握手时，我们注意到来自 iOS 设备上的应用程序的 SSL 连接保持打开状态而不是通过 FIN 数据包关闭的奇怪行为。一旦从应用程序发出新请求，前一个请求的剩余连接就会使用 FIN 数据包关闭，并创建一个新连接。

虽然我们知道 iOS 会清除连接以保持低电池消耗，但我们想知道它没有正确终止现有连接并将该终止推迟到新请求的开始。

有人可以解释这种行为，并提出解决方案来避免在常规条件下保持活动覆盖的连接中昂贵的 SSL 握手吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T20:09:01.513

几周前我遇到了同样的问题。解决方案是强制网络服务器忽略来自 iOs 设备的 keepalive http 标头并立即关闭连接。

# api - 如何使用沙盒中选择的 PayPal Payments Pro（使用 Pro 代表自己作为商家）选项创建测试账户？

> ID：14728677
> 
> 赞同：1
> 
> 时间：2013-02-06T12:04:33.710
> 
> 标签：api, paypal, sandbox

我无法使用 PayPal Payments Pro 选项创建 Paypal 沙盒测试帐户（用于使用 Pro 将自己代表为商家）。我在创建测试帐户期间选择了该选项，但是当我查看该帐户的详细信息时，它会显示

```
Account Type : Seller (Use to represent yourself as the merchant). 
```

请帮助我，因为我无法使用沙盒进行信用卡支付集成，因为它正在显示

**错误**：

```
Array
(
    [TIMESTAMP] => 2013-02-06T10:40:57Z
    [CORRELATIONID] => 2732f8af3ec70
    [ACK] => Failure
    [VERSION] => 85.0
    [BUILD] => 5060305
    [L_ERRORCODE0] => 10501
    [L_SHORTMESSAGE0] => Invalid Configuration
    [L_LONGMESSAGE0] => This transaction cannot be processed due to an invalid merchant configuration.
    [L_SEVERITYCODE0] => Error
    [AMT] => 100.00
    [CURRENCYCODE] => USD
) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:24:42.207

沙盒环境中的 API 凭证使用您拥有的默认买家帐户。在沙盒环境中创建买家账户时，您需要确保使用“payments pro”选项。然后，您将在 API 凭据下看到一组新的 API 凭据……</p>

以下步骤：

1.  转到链接[https://developer.paypal.com/us/cgi-bin/devscr?cmd=_sandbox-acct-session](https://developer.paypal.com/us/cgi-bin/devscr?cmd=_sandbox-acct-session)并使用您的沙箱凭据登录

2.  然后单击链接 Preconfigured 将带您到[https://developer.paypal.com/us/cgi-bin/devscr?cmd=_create-account-session](https://developer.paypal.com/us/cgi-bin/devscr?cmd=_create-account-session)

3.  从选项中选择 Website Payments Pro（使用 Pro 将您自己代表为商家）并创建一个测试帐户并将这些详细信息用于沙盒

# .htaccess - 用于利用浏览器缓存的 htaccess 不起作用

> ID：14728678
> 
> 赞同：7
> 
> 时间：2013-02-06T12:04:35.603
> 
> 标签：.htaccess, http, caching, http-headers, browser-cache

我在使用浏览器缓存时遇到问题。我已经创建了这个 .htaccess 文件并在我的服务器上使用它，但它似乎不起作用，我从这里复制了这个“ [http://www.samaxes.com/2011/05/improving-web-performance-with- apache 和 htaccess/](http://www.samaxes.com/2011/05/improving-web-performance-with-apache-and-htaccess/) "。我很可能犯了一个基本错误，所以任何帮助都会很好。这里有一些细节。我正在开发一个子域，我们将其称为“子”，将主域称为“示例”。所以我希望[http://sub.example.com/](http://sub.example.com/)中的所有内容都可以处理 htaccess 文件。例如，在我的服务器上，我将 .htaccess 文件放在子目录的主目录中，该目录与主目录分开。

我正在运行一个同时启用了 mod_headers 和 mod_expires 的 apache2 服务器。

干杯。

```
<ifModule mod_deflate.c>
AddOutputFilterByType DEFLATE text/html text/xml text/css text/plain
AddOutputFilterByType DEFLATE image/svg+xml application/xhtml+xml application/xml
AddOutputFilterByType DEFLATE application/rdf+xml application/rss+xml application/atom+xml
AddOutputFilterByType DEFLATE text/javascript application/javascript application/x-javascript application/json
AddOutputFilterByType DEFLATE application/x-font-ttf application/x-font-otf
AddOutputFilterByType DEFLATE font/truetype font/opentype
</ifModule>
<ifModule mod_expires.c>
 ExpiresActive On
 ExpiresDefault "access plus 5 seconds"
 ExpiresByType image/x-icon "access plus 2592000 seconds"
 ExpiresByType image/jpeg "access plus 2592000 seconds"
 ExpiresByType image/png "access plus 2592000 seconds"
 ExpiresByType image/gif "access plus 2592000 seconds"
 ExpiresByType application/x-shockwave-flash "access plus 2592000 seconds"
 ExpiresByType text/css "access plus 604800 seconds"
 ExpiresByType text/javascript "access plus 216000 seconds"
 ExpiresByType application/javascript "access plus 216000 seconds"
 ExpiresByType application/x-javascript "access plus 216000 seconds"
 ExpiresByType text/html "access plus 600 seconds"
 ExpiresByType application/xhtml+xml "access plus 600 seconds"
 </ifModule>
 <filesMatch "\\.(ico|pdf|flv|jpg|jpeg|png|gif|swf|mp3|mp4)$">
 Header set Cache-Control "max-age=2592000, private"
 Header set Expires "Sun, 17 July 2013 20:00:00 GMT"
 </filesMatch>
 <filesMatch "\\.(css|css.gz)$">
 Header set Cache-Control "max-age=604800, private" 
 </filesMatch>
 <filesMatch "\\.(js|js.gz)$">
 Header set Cache-Control "max-age=604800, private"
 </filesMatch>
 <filesMatch "\\.(xml|txt)$">
 Header set Cache-Control "max-age=216000, private, must-revalidate"
 </filesMatch>
 <filesMatch "\\.(html|htm)$">
 Header set Cache-Control "max-age=7200, private, must-revalidate"
 </filesMatch>
 FileETag None 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T19:03:38.723

看起来很乱。

您还有多余的规则，例如

`ExpiresByType application/javascript "access plus 216000 seconds"`

和

```
<filesMatch "\\.(js|js.gz)$">
Header set Cache-Control "max-age=604800, private"
</filesMatch> 
```

[尝试使用html5-boilerplate](https://github.com/h5bp/html5-boilerplate/blob/master/dist/.htaccess)中的更简洁（和最新）规则或检查所有 [**h5bp 服务器配置**](https://github.com/h5bp/server-configs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T15:14:06.993

只使用这个并试一试：

```
 <ifModule mod_expires.c>
 ExpiresActive On
 ExpiresDefault "access plus 5 seconds"
 ExpiresByType image/x-icon "access plus 2592000 seconds"
 ExpiresByType image/jpeg "access plus 2592000 seconds"
 ExpiresByType image/png "access plus 2592000 seconds"
 ExpiresByType image/gif "access plus 2592000 seconds"
 ExpiresByType application/x-shockwave-flash "access plus 2592000 seconds"
 ExpiresByType text/css "access plus 604800 seconds"
 ExpiresByType text/javascript "access plus 216000 seconds"
 ExpiresByType application/javascript "access plus 216000 seconds"
 ExpiresByType application/x-javascript "access plus 216000 seconds"
 ExpiresByType text/html "access plus 600 seconds"
 ExpiresByType application/xhtml+xml "access plus 600 seconds"
 </ifModule> 
```

就像@Anthony Hatzopoulos 指出的那样，您正在使用重复的配置，它们可能会发生冲突。当然，如果您愿意，也可以使用“fileMatch”方式，但问题是它们不是很好的代码。请注意，如果您使用“fileMatch”，那么您不使用该代码。

# c# - Windows 窗体 - 向数据绑定数据添加新行

> ID：14728684
> 
> 赞同：1
> 
> 时间：2013-02-06T12:04:53.977
> 
> 标签：c#, winforms, datagridview, visual-studio-2012

我有一个`Windows Form`dgv。现在它只是用于演示目的，所以我使用虚拟数据来填充一行数据。我还有一个名为的按钮，每次单击时`Add New Row`只需添加新的空行。`dataGridView`对于 dgv 的初始填充，我使用如下`load`形式的事件：

```
private void Form1_Load(object sender, EventArgs e)
{
    dataGridView1.AutoGenerateColumns = false;

    MyData td13 = new MyData();

    td13.colorCombinationColumn = "aff";

    td13.remarksColumn = "abcdddd";

    td13.prodColumn = true;

    td13.LastModifiedColumn = "ab";

    td13.ByColumn = "abc";

    MyData[] arr = new MyData[2];
    arr[0] = td13;

    dataGridView1.DataSource = arr;

} 
```

`MyData`这堂课在哪里：

```
public class MyData
{
    private int mId;

    private string mCombination;

    private string mremarks;

    private bool mprod;

    private string mLastModified;

    private string mBefore;

    public int Id
    {
        get
        {
            return mId;
        }

        set
        {
            ... 
```

到目前为止一切顺利，但后来我添加了我的按钮并处理他的`click`事件：

```
private void btnAddRow_Click(object sender, EventArgs e)
{
    SoleData[] arr = new SoleData[1];
    dataGridView1.DataSource = arr;
} 
```

这就是问题所在。如果我只是`dataGridView1.Rows.Add(1);`说`Rows cannot be programmatically added to the DataGridView's rows collection when the control is data-bound.`。如您所见，我尝试了其他一些方法，但到目前为止没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:08:21.060

尝试使用 a`BindingList<MyData>`而不是`MyData[] arr`. 您对列表所做的任何修改都将反映在 DGV 中，无需进一步的代码。（另外，将列表声明为表单的私有字段。）

# c# - protobuf-net 序列化返回空数组

> ID：14728692
> 
> 赞同：2
> 
> 时间：2013-02-06T12:05:12.970
> 
> 标签：c#, protobuf-net

我使用“protobuf-net”序列化结构，但它返回一个空数组。

```
public static byte[] PacketToArray(Packet packet)
{
    IFormatter formatter = new BinaryFormatter();
    MemoryStream stream = new MemoryStream();

    Serializer.Serialize(stream, packet);
    byte[] packetArray = stream.GetBuffer();

    stream.Close();

    return packetArray;
} 
```

packetArray[] 在结尾 "{byte[0]}" 但应该有一些数据。 "packet" 的数据是：

```
[ProtoContract]
public struct Packet
{
    [ProtoMember(1)] 
    public int opcode;

    [ProtoMember(2)] 
    public string message;
} 
```

在测试中，操作码的值为 0，消息为空。哪里有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:22:13.347

> 在测试中，操作码的值为 0，消息为空。哪里有问题？

是什么让你觉得有问题？0 字节对于 protobuf-net 来说是完全合法的，并且在这种情况下是可以预期的，因为没有什么有趣的序列化；它可以反序列化 a`0`和 a`null`而不需要任何外部数据。这里的关键点：如果你*反序列化*相同的零字节，你***会得到***一个`Packet`带有`0`操作码和`null`消息的 a。任务完成。

如果您希望它处理“框架”以便可以单独阅读多条消息，请使用`SerializeWithLengthPrefix`(and `DeserializeWithLengthPrefix`)，但是：这里没问题。

实际上，您的代码中有一个错误，但是：

```
byte[] packetArray = stream.GetBuffer(); 
```

如果您在`GetBuffer()`不跟踪 的情况下使用`.Length`，您将获得*超大*的后备缓冲区，其中包含垃圾（在本例中为零）。改为使用`ToArray()`。所以：

```
public static byte[] PacketToArray(Packet packet) {
    using(MemoryStream stream = new MemoryStream()) {
        Serializer.Serialize(stream, packet); // or SerializeWithLengthPrefix
        return stream.ToArray();
    }
} 
```

# html - 使用 CSS 对 div 应用可见性效果

> ID：14728693
> 
> 赞同：0
> 
> 时间：2013-02-06T12:05:17.650
> 
> 标签：html, css, web

我很难在我的网站项目中达到我想要的效果。

我想将指针悬停，然后出现一个注册框。我没有登录和产品的菜单下拉菜单。但我不能在注册时做到这一点。请帮忙。 **这是代码：**

```
<div class="menu">
    <!-- enter code here -->
    <ul>
        <li><a href="index.html" class="active">Home</a></li>
        <li><a href="products.html">Products</a>
            <ul>
                <li><a href="books.html">Books</a></li>
                <li><a href="magazine">Magazines</a></li>
                <li><a href="audio.html">Audio CDs</a></li>
                <li><a href="dvd.html">DVDs</a></li>
            </ul>
        </li>
        <li><a href="">login</a>
            <ul >
                <li><input type="text" name="username" value="" placeholder="Username" style="color:#939393" ></li>
                <li><input type="password" name`enter code here`="password" value="" placeholder="Password" style="color:#939393" ></li>
                <li><input type="button" value="login" style="color:#939393;width:158px" ></li>
            </ul>
        </li>
        <li><a href="#register">Register</a></li>
        <ul>
            <!--This is the div I want to show-->     
            <div id="register">
                <input type="text" placeholder="First Name" value="">
            </div>
        </ul>
    </ul> 
```

这是我的CSS。请注意，产品选项卡和登录选项卡正在工作。

```
.menu { padding:38px 0 0 0; margin:0 ; width:380px;  float:left; font-size:13px}
.menu ul {list-style:none; margin:0;padding:0; }
.menu li {float:left;position:relative; }
.menu li ul{ position:absolute; top:30px; left:0; visibility:hidden; background:url(images/main_bg.gif);}
.menu li:hover ul{visibility:visible; z-index:20;}
.menu li ul li {float:none;}
.menu ul li { float:left; margin:0; padding:0 10px; border:0;}
.menu ul li a { float:left; margin:0; padding:12px 0; color:#939393; font:normal 11px Arial, Helvetica, sans-serif; text-decoration:none; text-transform:uppercase;}
.menu ul li a:hover { color:#ddd;}
.menu ul li a.active { color:#ddd;}

.menu li:hover *#register{visibility:visible; z-index:20;}
#register {position:absolute; top:30px; left:0; visibility:hidden; background:url(images/main_bg.gif);} 
```

最后两行似乎不起作用。感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:17:38.537

“登录”链接是弹出窗口的兄弟，两者都包含在同一个`<li>`中，而“注册”链接和弹出窗口位于不同`<li>`的 s 中。如果您以相同的方式设置它们，则可以正常工作。

[http://jsfiddle.net/GrERY/](http://jsfiddle.net/GrERY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:23:44.367

更正此部分

```
<li><a href="#register">Register</a></li>
<ul>
    <!--This is the div I want to show-->     
    <div id="register">
        <input type="text" placeholder="First Name" value="">
    </div>
</ul> 
```

和

```
<li><a href="#register">Register</a>
    <ul>
        <li>
            <div id="register">
                <input type="text" placeholder="First Name" value="">
            </div>
        </li>
    </ul>
</li> 
```

# c# - 如何将单个组合框添加到随机位置的datagridview中

> ID：14728695
> 
> 赞同：0
> 
> 时间：2013-02-06T12:05:30.283
> 
> 标签：c#, .net, vb.net

我想将 DatatGridViewComboBoxCell 添加到 datagridview 上动态确定的单元格中。

到目前为止，我发现的所有示例要么将整个列的单元格变成组合框，要么不起作用。

这是我能想到的最简单的例子。我已经尝试将数据绑定到有效的来源。这些项目存在于 combobox.items 但在 datagridview 上，组合框为空，您无法选择值

![没有显示任何项目的组合框](../Images/1e5ff0a4eeb05e61edb6cef811c20a85.png)

```
DataGridArticles.Columns.Add("columna", "columna")
Dim combo As New DataGridViewComboBoxCell

combo.Items.Add("b")
combo.Items.Add("ba")
combo.Items.Add("ca")

DataGridArticles.Rows.Add()
DataGridArticles.Rows(0).Cells(0) = combo 
```

是否可以将组合框添加到 datagridview 中的特定单元格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:31:16.487

我从来没有遇到过 DataBound 的任何问题`DataGridViewComboBoxCell`。

我这样使用它：

```
Dim cell As New DataGridViewComboBoxCell()
cell.DisplayMember = "Name"
cell.ValueMember = "Id"
cell.DataSource = list

DataGridArticles.Rows(0).Cells(0) = cell

cell.Value = 0 //It will select and display item with Id = 0, if you do not set it
               //then combobox will look exactly like yours on image posted (like
               //there is no items in it). 
```

每次我使用它时它都能完美运行。因此，如果它对您不起作用，则可能。

因此，要解决您的问题，请在将项目添加到组合框后添加此行：

```
combo.Value = "b"; 
```

希望能帮助到你 ：）

# winforms - 是否有任何解决方法可以让人们在 VS 2012 的 ReportViewer 中显示远程 SQL Server 2005 SSRS 报告

> ID：14728696
> 
> 赞同：1
> 
> 时间：2013-02-06T12:05:34.247
> 
> 标签：winforms, reporting-services, visual-studio-2012, reportingservices-2005

我有一个 .NET 4.5、Visual Studio 2012 winforms 项目，它应该使用 Visual Studio 2012 ReportViewer 控件显示相当多的 SSRS 2005 远程报告。

显然，要在 Visual Studio 2012 中使用 reportViewer 显示远程报表，Reporting Services 报表服务器必须是 SQL Server 2008 或更高版本。所以我很困惑，想知道是否有解决方法，或者是否可以在 VS 2012 项目中使用 VS 2008 的 reportViewer。

我得到的是

"***远程报表处理需要 Microsoft SQL Server 2008 Reporting Services 或更高版本***"

这就是设置报告源的方式

```
private void SetReportParameters()
        {
            //Set Processing Mode
            reportViewer1.ProcessingMode = ProcessingMode.Remote;

            // Set report server and report path
            reportViewer1.ServerReport.ReportServerUrl = new Uri("http://Server/ReportServer");
            reportViewer1.ServerReport.ReportPath = "/MyApplicationReports/ReportName";

            ReportParameterInfoCollection pInfo = default(ReportParameterInfoCollection);
            System.Collections.Generic.List<ReportParameter> paramList = new System.Collections.Generic.List<ReportParameter>();

            paramList.Add(new ReportParameter("EmpID", OriginalEmployeeID.ToString(), false));
            reportViewer1.ServerReport.SetParameters(paramList);
            pInfo = reportViewer1.ServerReport.GetParameters();

            // Process and render the report
            reportViewer1.RefreshReport();

        } 
```

接着

```
 private void EmployeeLeaveHistory_Load(object sender, EventArgs e)
    {
        SetReportParameters();
        this.reportViewer1.RefreshReport();
    } 
```

或者是否可以先获取远程报表，将其转换为本地报表对象并在报表查看器中显示本地报表对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:56:57.513

我有一个解决方案。我去了项目引用并删除了 Visual Studio 2012 的 Microsoft.ReportViewer.Common.dll 和 Microsoft.ReportViewer.WinForms.dll。

然后，我为 Visual Studio 9（VS 2008）重新添加了对 Microsoft.ReportViewer.Common.dll 和 Microsoft.ReportViewer.WinForms.dll 的引用，现在 VS 2008 的报告查看器正在 VS 2012 中工作。

# android - 如何在 android 中检查 EditText 中的符号？

> ID：14728697
> 
> 赞同：4
> 
> 时间：2013-02-06T12:05:41.947
> 
> 标签：android, android-edittext

我在 android 中有一个 EditText，应该输入 IP 地址。单击按钮时，我想检查从 EditText 检索到的文本是否：

*   没有任何空格
*   没有任何字母
*   不是空的

*   只包含数字

*   并且只包含句点`"."`

我有这个 if else 条件来检查用户是否被允许进入下一个活动，但它仍然有一些错误。我不知道如何只允许月经

```
 if(((ip.length() != 0) || ip.contains(" ") == false || ip.matches("[a-z]+") == false) && (ip.matches("[0-9]+") && ip.contains(".")))
                    {
                        next = false;
                    }
                    else
                    {
                        next = true;
                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:09:17.230

您可以使用此正则表达式来检查输入

```
"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$" 
```

编辑：

不要使用正则表达式，因为当 IPv6 到来时事情会中断，请改用它

[http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/InetAddressValidator.html](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/InetAddressValidator.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:10:40.700

使用正则表达式非常简单

> ```
> private static final String PATTERN = 
>     "^([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
>     "([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
>     "([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
>     "([01]?\\d\\d?|2[0-4]\\d|25[0-5])$";
> 
>  public static boolean validate(final String ip){          
> 
>   Pattern pattern = Pattern.compile(PATTERN);
>   Matcher matcher = pattern.matcher(ip);
>   return matcher.matches();             
>   } 
> ```

我希望它会帮助你。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-06T14:04:07.317

您可以通过使用[android.util.Patterns](http://developer.android.com/reference/android/util/Patterns.html)做到这一点非常优雅：

```
import android.util.Patterns
...
boolean isIPvalid (String input) {
    return Patterns.IP_ADDRESS.matcher(input).matches();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T12:56:40.550

这将起作用：

```
<EditText
    android:inputType="number"
    android:digits="0123456789."
/> 
```

只允许`numbers and .`

# iphone - 带有 EKEventAttribute 的自定义 NSObject 类

> ID：14728700
> 
> 赞同：0
> 
> 时间：2013-02-06T12:05:53.007
> 
> 标签：iphone, ios, objective-c, nsobject, ekevent

我有一个自定义 NSObject 类，我在其中声明了以下属性和函数。

```
@property (nonatomic, retain, readonly) NSDate *date;
@property (nonatomic, retain, readonly) NSString  *dateTime;
@property (nonatomic, retain, readonly) NSString *title;
@property (nonatomic, retain, readonly) EKEvent *event;

+(Appointment*)AppointmentNamed: (NSString *)title 
                       dateTime:(NSString *)dateTime
                           date:(NSDate *)date 
                          event:(EKEvent *)event;

-(id) initWithName:(NSString *)title 
          dateTime:(NSString *)dateTime 
              date:(NSDate *)date 
             event:(EKEvent *)event; 
```

在我的 .m 中，我执行以下操作。

```
+(Appointment*)AppointmentNamed:(NSString *)aTitle
                       dateTime:(NSString *)aDateTime 
                           date:(NSDate *)aDate 
                          event:(EKEvent *)aEvent {
    return [[Appointment alloc]initWithName:aTitle
                                   dateTime:aDateTime 
                                       date:aDate 
                                      event:aEvent];
}
-(id)initWithName:(NSString *)aTitle 
         dateTime:(NSString *)aDateTime 
             date:(NSDate *)aDate 
            event:(EKEvent *)aEvent{
    if((self = [super init])){
        date = [aDate copy];
        dateTime = [aDateTime copy];
        title = [aTitle copy];
        event = [aEvent copy];

    }
    return self;
} 
```

我通过以下方式添加新约会。

```
[appointments addObject:[Appointment AppointmentNamed:event.title 
                                             dateTime:dateString 
                                                 date:event.endDate 
                                                event:event]]; 
```

但是当我这样做时，我得到一个抱怨的错误`-[EKEvent copyWithZone:]:`

有人可以帮我吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:18:12.787

事件的可用性设置。CalDAV 和 Exchange 服务器使用此设置来指示应如何处理事件以用于计划目的。如果事件的日历不支持可用性设置，则此属性的值为`EKEventAvailabilityNotSupported`。

请参阅此链接[EKEventAvailability](http://www.rubymotion.com/developer-center/api/EKEventAvailability.html)以及此[EKEvent](http://www.rubymotion.com/developer-center/api/EKEvent.html)

我希望这对你有帮助......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:29:04.107

你只能复制已经实现了 NSCopying 协议的对象（例如 NSDate）。EKEvent 没有实现 NSCopying 协议，因此您无法使用复制创建 EKEvent 实例。将事件属性设为可读写可能会很有用，因此您不能使用副本。

# javascript - event.keycode issue

> ID：14728702
> 
> 赞同：0
> 
> 时间：2013-02-06T12:05:55.043
> 
> 标签：javascript, jquery

i have a javascript code like below,

```
if (event.keycode != 37 && event.keycode != 39)
{
    var phoneNumber = $('#phoneNumber').val();
    if (phoneNumber.length < 1 && event.keyCode != 48)
        $('#phoneNumber').val(0)
    else if ((phoneNumber.length < 2 && event.keyCode == 48) )
        event.preventDefault();
    else
        $('#phoneNumber').val(phoneNumber)
} 
```

keycode 37 = left arrow, keycode 39 = right arrow but when i pressed these keys on keyboard condition which is between if block being executed, i am using chrome browser, also i used the if statement below,

```
if (event.keycode != 37 || event.keycode != 39)
{
    var phoneNumber = $('#phoneNumber').val();
    if (phoneNumber.length < 1 && event.keyCode != 48)
        $('#phoneNumber').val(0)
    else if ((phoneNumber.length < 2 && event.keyCode == 48) )
        event.preventDefault();
    else
        $('#phoneNumber').val(phoneNumber)
} 
```

urgent helps greatly appreciated,

Thanks everybody.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:10:09.270

One issue is capitalization: it's `keyCode`, not `keycode`. Your code is using them inconsistently.

# image - 如何防止谷歌新的图片搜索设计被盗链？

> ID：14728707
> 
> 赞同：1
> 
> 时间：2013-02-06T12:06:02.400
> 
> 标签：image, .htaccess, redirect, jpeg, hotlinking

自从谷歌发布了新的图片搜索设计，我的流量下降了 50%。
用户只需单击“查看原始图像”，谷歌将他们直接带到图像源.. (www.mydomain.com/image.jpg)
我能做些什么，也许是来自热链接的 jpg/png 的重定向？
我正在考虑一个 htaccess 热链接块，但这会让我取消索引。不确定它是否值得。谷歌实际上是在窃取我的带宽，我似乎对此无能为力.. :(

帮助？

# single-sign-on - wso2 saml sso授权后返回目标url

> ID：14728709
> 
> 赞同：3
> 
> 时间：2013-02-06T12:06:04.650
> 
> 标签：single-sign-on, wso2, saml-2.0

我正在使用 wso2 saml sso 授权在 java 上创建简单的服务提供程序 (SP)。

我以这种方式实现它（如果我错了，请纠正我）：

1.  用户在浏览器中输入一些目标 URL
2.  我的 SP 的 servlet 将重定向发送到 WSO2 IDM。
3.  IDM 授权用户并使用 SAMLResponse 和 RelayState 参数重定向到我的消费者 URL。

现在 SP 必须处理此请求并将用户重定向到目标 Url，而无需再次重定向到 IDM。否则我会得到无限循环，所以我认为在第 1 步和第 2 步之间应该再走一步......

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:23:45.523

典型实现

1 用户尝试访问受保护的站点

2 过滤器检查用户是否具有经过身份验证的会话。

2.1 如果没有，重定向到IDP/IDM

2.1.1 IDM 验证用户身份并通过身份证明重定向回 SP

2.1.2 SP 创建认证会话

2.1.3 用户被重定向到目标 URL 一切再次从 2 开始。

[在这里](http://mylifewithjava.blogspot.no/2012/05/saml-web-profile.html)，我有一篇文章更详细地描述了流程

# css - 远程桌面上的@font-face 渲染

> ID：14728718
> 
> 赞同：1
> 
> 时间：2013-02-06T10:08:57.570
> 
> 标签：css, fonts, remote-desktop

所以事情就是这样，我们有一个 saas web 应用程序，它使用一种特殊的字体来显示图标。因此，我们不使用大量的 png，而是使用 a`<span>`和 class `icon`。

CSS文件以@font-face标签开头，主要由[fontsquirrel](http://www.fontsquirrel.com/fontface/generator)生成，如下所示：

```
@font-face {
    font-family: 'iconsregular';
    src: url('../../Content/fonts/icons-webfont.eot');
    src: url('../../Content/fonts/icons-webfont.eot?#iefix') format('embedded-opentype'),
         url('../../Content/fonts/icons-webfont.woff') format('woff'),
         url('../../Content/fonts/icons-webfont.ttf') format('truetype'),
         url('../../Content/fonts/icons-webfont.svg#iconsregular') format('svg');
         font-weight: normal;
         font-style: normal;
 } 
```

这在我们所有支持的浏览器（IE7、8、9、FF、Safari 和 Chrome）中都能完美显示。但是当通过远程桌面客户端访问该网站时。不使用网络字体。*但是会*下载CSS 文件和 .eot 文件。

**重现错误**

所以我开始测试并试图重现这个问题。当我采取这些步骤时，发生了错误：

1.  连接到远程桌面 A (Server 2008)
2.  打开 IE9
3.  浏览网站
4.  未显示字体。

然后我连接到另一台服务器：

1.  连接到远程桌面 B (Server 2008)
2.  打开火狐
3.  浏览网站
4.  显示字体！
5.  用IE9打开网站
6.  还显示了字体，其中一些适用于 Chrome

在这个惊喜之后，我再次重新连接到 RD A。

1.  打开 IE9
2.  显示字体...

似乎 RDP 客户端在某处某时缓存其字体。

**这种情况何时以及如何发生？有没有办法强制 RDP 客户端下载和显示@font-face webfonts？**

# php - 使用 php 从大量内容中提取文本

> ID：14728719
> 
> 赞同：-1
> 
> 时间：2013-02-06T12:06:43.067
> 
> 标签：php

我有一个文本，我需要找出一个用双引号括起来的文本。敌人的例子

```
this is the "dummy text for the" content 
```

我需要将值作为`dummy text for the`

有谁知道如何使用php获得这个？

或任何为此的php函数？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:57:43.440

```
<?php
$subject = 'this is the "dummy text for the" content';
$pattern = '/"(.*?)"/';
preg_match_all($pattern, $subject, $matches, PREG_SET_ORDER);
echo $matches[0][1];
?> 
```

# git - git pull 合并误区

> ID：14728724
> 
> 赞同：1
> 
> 时间：2013-02-06T12:06:51.357
> 
> 标签：git, git-merge

我的本地 git 存储库中有两个分支，master 和 Logging。两个分支在 BitBucket 上都有遥控器。master 是我目前正在从事的项目的主要分支。当其他开发人员完成功能后，他们会将他们的分支合并到 master。Logging 是我当前的功能分支，是从 master 创建的。

为了获得最新的更新并减少我的合并痛苦，我经常做一个：

```
git pull origin master 
```

当 Logging 分支被签出时。我对这个命令的理解是它从 master 分支的远程来源获取并将任何更改合并到本地 master 中。

然后我做：

```
git merge master 
```

我打算在这里做的是合并我刚刚拉入 Logging 分支的更改。然而 git 总是响应：

```
Already up-to-date. 
```

确实查看 git log 和 gitk 似乎表明我的本地 Logging 分支确实已经包含了刚刚提取的 master 内容。我没想到做一个“git pull origin master”会影响我的日志分支。我在这里不明白什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T12:22:54.460

Git pull 包括一个合并：

```
git pull origin master 
```

相当于

```
git fetch origin
git merge origin/master 
```

即它将指定来源的分支合并到*当前**签出的分支*中。

独自一`git fetch origin`人根本不查看当前签出的分支。它所做的是获取修订并将远程头存储在`refs/remotes/origin`命名空间下。这就是从那里`git merge origin/master`提取它的地方（如果 name 不符合`refs/something`， git 会在`refs/heads`和`refs/tags`中查找`refs/remotes`）。

# php - PHP RadioButton 提交表单

> ID：14728726
> 
> 赞同：0
> 
> 时间：2013-02-06T12:06:54.387
> 
> 标签：php, post, radio-button, submit

我一直在创建一个网站，以允许用户对其他用户上传的图像进行评分。我的代码运行良好。用户会看到图像、一个标记图像的按钮、10 个用于选择评分的单选按钮和一个提交按钮（都在同一个表单中）。

我的问题是，当用户单击单选按钮时，我想删除提交按钮并处理表单。这样做的问题是标志按钮（图像按钮）也在提交表单。我的代码如下：

**HTML**

```
<form name="ratebox" action="Box.php?bid=<?php echo $boxId ?>" method="post">
    <table style="margin: 0 auto;">
        <tr>
            <td colspan="2"><img src="img/boxes/<?php echo $boxId ?>.png" title="<?php echo $boxName ?>" height="350" width="350"></td>
        </tr>
    <tr>
    <input
        type="image"
        name="flag_submit"
        src="img/Flag.png"
        onmouseover="this.src='img/Flag_Click.png'"
        onmouseout="this.src='img/Flag.png'"
        height="30"
        width="30"
        />
        </td>
    </tr>
    <tr>
        <td colspan="2" style="text-align:center;">
            1<input type="radio" name="rdoRate" value="1" >
            2<input type="radio" name="rdoRate" value="2" >
            3<input type="radio" name="rdoRate" value="3" >
            4<input type="radio" name="rdoRate" value="4" >
            5<input type="radio" name="rdoRate" value="5" >
            6<input type="radio" name="rdoRate" value="6" >
            7<input type="radio" name="rdoRate" value="7" >
            8<input type="radio" name="rdoRate" value="8" >
            9<input type="radio" name="rdoRate" value="9" >
            10<input type="radio" name="rdoRate" value="10" > 
        </td>
    </tr>
    <tr><td colspan='4' align='center'><input type='submit' name='rate_submit' value='Rate'></td></tr>
</table>
</form> 
```

**PHP**

```
if (isset($_POST['flag_submit_x']))
{
        //Code to process the flagged image
}

if (!empty($_POST['rate_submit']))
{
        //Code to process the rated image
} 
```

有什么方法可以在按下单选按钮时提交表单并检索已按下的单选按钮的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:10:46.837

是的，您需要为此使用 Javascript。使用 jQuery，

```
$('input[type=submit]').click(function(){
     return false;
});

$('input[type=radio]').click(function(){
    $('form').submit();
}); 
```

您需要学习如何使用 $.ajax() 将信息传入和传出 PHP。[读这个。](https://stackoverflow.com/questions/2269307/using-jquery-ajax-to-call-a-php-function)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:12:02.297

当然有，为什么不为每个按钮附加一个 js 函数并让它将值发送到服务器，无论是 ajax 还是常规的。

```
function submitRate(image_id, rating){
//here you would do the magic:)
//maybe grab other form fields or just the rating
} 
```

在你的按钮中`onclick="submitRate()"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:27:38.697

1）删除提交输入。

2）使表单提交为假：

```
<form id="ratebox" name="ratebox" action="" method="" onSubmit="return false;"> 
```

3）将邮政编码放到提交页面：

```
$.post("Box.php?bid=<?php echo $boxId ?>", $("#ratebox").serialize()); 
```

# c# - Crystal Report 不显示所有报表页面

> ID：14728727
> 
> 赞同：1
> 
> 时间：2013-02-06T12:06:58.047
> 
> 标签：c#, asp.net, crystal-reports

我的水晶报表中有多个页面，但它显示`1,2 and 258`页面正常但第 3 页到第 257 页页面未显示在我的报表页面上

我这样编码

```
private void Page_Init(object sender, EventArgs e)
{
    if (Session["reportDocument"] != null)
    {        
        reportDocument = (ReportDocument)Session["reportDocument"];
        Session["reportDocument"] = null;
        rptClients.ReportSource = reportDocument;
        Session["reportDocument"] = reportDocument;
    }
} 
```

我用打击代码填充会话值

```
protected void FillClientsReport()
{
    int _group = Convert.ToInt32(rbtnlClients.SelectedValue);
    int CompanyId = int.Parse(ddlCompany.SelectedValue);

    rptClients.ReportSource = null;

    reportDocument.Load(Server.MapPath("~/Report/ClientList.rpt"));

    DataSet ds = _clientService.GetClientsReport(_group, CompanyId);
    reportDocument.SetDatabaseLogon
    (myLogOnInfo.ConnectionInfo.UserID, myLogOnInfo.ConnectionInfo.Password, myLogOnInfo.ConnectionInfo.ServerName, myLogOnInfo.ConnectionInfo.DatabaseName);
    reportDocument.SetParameterValue("@GroupBy", _group);
    reportDocument.SetParameterValue("@CompanyID", CompanyId);
    reportDocument.SetDataSource(ds.Tables[0]);
    rptClients.Visible = true;
    //ViewState["reportDocument"] = reportDocument;
    Session["reportDocument"] = reportDocument;
    rptClients.ReportSource = reportDocument;
    rptClients.DataBind();
    rptClients.RefreshReport();
} 
```

# java - 如何在我的应用程序中添加 SSL？

> ID：14728736
> 
> 赞同：0
> 
> 时间：2013-02-06T12:07:36.013
> 
> 标签：java, http, jsp, ssl, https

**我刚刚使用Java**完成了聊天应用程序，它运行良好。

现在我的团队负责人要求我在应用程序中添加安全套接字层 ( **SSL** )。

**没有 SSL：我在****server.xml**中使用了这个配置

 **```
<Connector connectionTimeout="20000" maxThreads="200" port="8089" protocol="HTTP/1.1" redirectPort="8443" URIEncoding="UTF-8" /> 
```

**添加 SSL：**我在**server.xml中添加了以下代码**

```
<Connector SSLEnabled="true" clientAuth="false"  maxThreads="150" port="8090" protocol="HTTP/1.1" scheme="https" secure="true" sslProtocol="TLS"  /> 
```

但我正在获取该页面，因为**Internet Explorer 无法显示该网页**

谁能告诉我如何添加该功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:53:45.507

1.  首先，您必须创建一个证书：

    %JAVA_HOME%\bin\keytool -genkey -alias tomcat -keyalg RSA

    （您必须选择一个密码，例如“123456”）

    填写完所有信息后，您将在主目录 (C:/Users/tim/.keystore) 中获得一个 .keystore。

2.  从连接器中删除协议和 sslProtocol！

3.  添加

    ```
    keystoreFile="C:/Users/tim/.keystore" 
    ```

    和

    ```
    keystorePass="123456" 
    ```

    到连接器。

开始了。启动服务器，打开浏览器并导航到 https://localhost/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:15:11.343

我猜您指的是 Tomcat，请参阅[SSL Configuration HOW-TO](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)以了解如何设置 SSL。为了启用 SSL，您需要一个证书，您应该阅读上面链接的教程并逐步完成。

> 但我正在获取该页面，因为 Internet Explorer 无法显示该网页

然后您应该检查日志文件 (catalina.out) 的内容。**

# razor - 在 razorview 中显示复选框的文本

> ID：14728747
> 
> 赞同：10
> 
> 时间：2013-02-06T12:08:39.343
> 
> 标签：razor, asp.net-mvc-4

使用 ASP .Net MVC 4，剃刀视图

我有一个`CheckBoxFor`：

```
 <div class="editor-checkbox-field">
        @Html.CheckBoxFor(model => model.Is2ndMailBody, new { @name = "secMailBody", @id = "secMailBody", @class = "secMailBody", @onclick = "disable(this.form.secMailBody)", @value = "Create Table", @text = "Create Table" })
    </div> 
```

但是 CheckBox 本身正在显示。我如何显示 CheckBox 的文本？

我的模型有：

```
public bool IsChecked { get; set; } 
```

javascript 工作正常，css 也可以。我只想知道如何显示此复选框的文本？

**编辑 1：**

![这就是显示的](../Images/f2fc065256a5e249f67560a629440cb4.png)

我希望复选框右侧的文本**创建第二个邮件正文。**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-12-14T06:58:51.567

答案 1：只需将字符串放在 CheckBox 之后，如下所示。

```
<div class="checkbox">
    <label>
        @Html.CheckBoxFor(m => m.Is2ndMailBody) Create Second Mail Body

    </label>
</div> 
```

答案 2：在模型中，

```
[Display(Name = "Create Second Mail Body")]
public bool Is2ndMailBody{ get; set; } 
```

在视图中

```
<div>
    @Html.CheckBoxFor(m => m.IsChecked)
    @Html.LabelFor(m => m.Is2ndMailBody)
</div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T12:10:37.147

首先将过滤器添加到调用的模型中`DisplayAttribute`

```
[Display(Name = "Some Text")]
public bool IsChecked { get; set; } 
```

您可以使用标签作为模型

```
@Html.LabelFor(model => model.Is2ndMailBody) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-28T08:49:27.383

您可以使用

```
@Html.DisplayNameFor 
```

代替

```
@Html.LabelFor 
```

在Alizra的回答中。这样， .label css 样式将不会应用于您的文本。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-28T02:07:48.393

如果您使用的是引导程序，您可以这样做

```
<div class="checkbox">
    <label>
        @Html.CheckBoxFor(m => m.Is2ndMailBody) Create Second Mail Body
        @Html.ValidationMessageFor(m => m.Is2ndMailBody)
    </label>
</div> 
```

示例来自： http: [//getbootstrap.com/css/](http://getbootstrap.com/css/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-10T10:02:03.207

在您的模型类中，使用数据注释为属性提供显示名称

您需要在模型类之上有这个 using 语句

```
using System.ComponentModel.DataAnnotations; 
```

然后设置显示名称属性

```
[Display(Name = "Create second mail body")]
public bool IsChecked { get; set; } 
```

之后，在您的视图中使用以下 div 标签包装复选框。如果没有，您将需要在视图中引用引导 CSS

```
<div class="checkbox">
    @Html.CheckBoxFor(m => m.Is2ndMailBody, new { htmlAttributes = new { @class = "form-control" } })
    @Html.LabelFor(m => m.Is2ndMailBody, new { @class = "control-label" })
</div> 
```

希望这会有所帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-03T11:47:04.417

你可以试试这个：

```
<div class="editor-checkbox-field">
<label> Create Second Mail Body @Html.CheckBoxFor(model => model.Is2ndMailBody, new { @name = "secMailBody", @id = "secMailBody", @class = "secMailBody", @onclick = "disable(this.form.secMailBody)", @value = "Create Table", @text = "Create Table" }) </label>
</div> 
```

那是：

```
 <label> Your text @HTML.checkBoxFor() </label> 
```

# git - 推送 git repo 失败并出现错误：包含 '.git'

> ID：14728751
> 
> 赞同：3
> 
> 时间：2013-02-06T12:08:48.203
> 
> 标签：git, mercurial

我使用 hg-fast-export 工具将一些 mercurial repos 转换为 git，虽然它们都转换得很好，但当我推送 repo 时出现以下错误。

```
$ git remote add origin git@github.com:asdf/zxcv.git
$ git push -u origin master
Counting objects: 7840, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (2817/2817), done.
error: object 324f9ca2aaae7b1d716db3fc31c02d391c1c2c16:contains '.git'
fatal: Error in object
error: pack-objects died of signal 13
error: failed to push some refs to 'git@github.com:asdf/zxcv.git' 
```

“包含'.git'”错误具有非常广泛的术语并且找不到任何文档，所以我尝试在原始存储库中搜索现有的'.git'文件夹并且我做到了。有一个 subsubsub-folder 包含我用 git rm 删除的旧 git 存储库的实例，但是问题仍然存在。

无论如何我可以将它推送到 github 或者一个新的干净的 repo 是唯一的选择吗？

对此的任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T15:15:53.223

您可以使用带有文件映射的*命令*`convert`从存储库中剥离 git 存储库。之后它将从历史记录中消失，并且存储库可以安全地导入到 git。

 *例子：

```
$ echo "exclude path/to/.git" > my-filemap
$ hg convert --filemap my-filemap originalrepo newrepo 
```

请注意，这`convert`是一个捆绑的扩展，您首先需要`.hgrc`像这样启用它：

```
[extensions]
convert = 
```

有关详细信息，请参阅`hg help convert`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:09:20.457

您尝试推送的变更集包含`.git`在他们的历史记录中，即使不在最新的变更集中，所以我认为您需要创建一个干净的存储库。

但是，另一种方法可能是重新设置一些变更集。提供您想要推送的内容在`.git`添加无关内容之前具有变更集，并且您不介意丢失一点历史细节，您可以将[它们](http://git-scm.com/docs/git-rebase)重新设置为一个变更集并尝试推送它。理论上（！！）该`.git`目录将被有效地“编辑”出历史。

这是一个例子（注意，我不像 Mercurial 那样使用 git，所以不知道这是否可行，或者我的命令是否有效，但它可以给你一个起点）：

```
$ git log --oneline  
1234567 More changes
abcdefa made changes
a5b6482 Added .git sub-sub-sub-directory to repo!
dead123 More things

$ git rm sub-sub-sub/.git
$ git commit -m "Removed .git sub-sub-sub-directory"
$ git log --oneline  
beef456 Removed .git sub-sub-sub-directory
1234567 More changes
abcdefa made changes
a5b6482 Added .git sub-sub-sub-directory to repo!
dead123 More things

$ git rebase -i HEAD~4
... at this point you need to interactively specify what to do*
$ git log --oneline  
eeee987 Some new commit message that sums up the changes
dead123 More things 
```

当我尝试这个时，要“压缩”的变更集列表出现在编辑器中，这与我见过的所有教程都不同 - 我猜是由于添加和删除文件的冲突。我将四个变更集中的三个的命令修改为“squash”而不是“pick”，这指示 rebase-merge 将该变更集压缩到其父项中。我基本上将所有变更集压缩为一个。它似乎对我有用，其余的变更集都没有删除的文件。这是否允许你推动，我不知道。

当然，先在克隆或其他东西上试试这个。*

# javascript - 使用 javascript 克隆 - 重命名表格中表单元素的 ID

> ID：14728756
> 
> 赞同：0
> 
> 时间：2013-02-06T12:09:05.533
> 
> 标签：javascript, clone

我有一些我正在使用的代码，可以根据需要多次克隆 div 的内容。

原始代码将重命名每个表单字段的名称/ID。所以第一个克隆名称将是“name1”第二个克隆“name2”等......

问题是当我出于设计目的将表单字段放在 div 或表格中时。

代码不再重命名表单字段，因为它似乎指的是表或 div 的顶部元素（取决于我使用的）

这是包含此示例所需所有内容的代码的精简版本（可以复制到编辑器中并按原样工作。您将看到字段 id 没有被重命名）：

www.jsbin.com/oyavez/1/edit

```
 <script type="text/javascript">
var formCounter = 0;

function init() {
    document.getElementById('moreFields').onclick = moreFields;
    moreFields();
}

function moreFields() {
      formCounter++;
        var newFields = document.getElementById('readroot').cloneNode(true);
        newFields.id = '';
    newFields.style.display = 'block';
    var newField = newFields.childNodes;
for (var i=0;i<newField.length;i++) {
        var theName = newField[i].name
    if (theName)
        newField[i].name = theName + formCounter;
}
var insertHere = document.getElementById('writeroot');
insertHere.parentNode.insertBefore(newFields,insertHere);
}

window.onload = moreFields;
</script>

<title>Add Orders IO TOC</title>
</head>
<body>

<!--  Template -->

<div id="readroot" style="display: none">

<table>
<tr><td colspan="2"><h3>Order <script>document.write(formCounter);</script></h2></td></tr>
<tr><td>Order ID: </td><td><input type="text" id="OrderID  name="OrderID[]" ></input></td>
<td>Order Name: </td><td><input type="text" id="OrderName" name="OrderName[]" ></input></td>

</table>
<br /><br /><input type="button" value="Remove Above Order" style="width:200px;"  onclick="this.parentNode.parentNode.removeChild(this.parentNode);" /><br /><br />

<!-- ROW -->

</div>

<!--  END Template -->

<!-- Start of form -->
<form method="get" action="form.php">

<table>
<tr><td align="center" colspan="2"><h2>Contract</h2></td></tr>
<!-- Static part of the form not to be cloned -->

 <tr><td>Contract: </td><td><input type="text" id="Contract" name="Contract" ></input></td>
 <td>Signed Date: </td><td><input type="text" id="datepicker0" name="SignedDate" ></input></td>

 <tr><td align="center" colspan="2"><h2>Orders</h2></td></tr>

</table>

<!-- ROW -->

<!-- Cloned parts of the form appear here -->

<span id="writeroot"></span>
<table>
<tr><td align="center" >    <input type="button" style="width:200px;" value="Add another order     below" onclick="moreFields()" /></td>
<td align="center" ><input type="submit" value="Submit IO and all Orders" style="width:200px;"  ></td></tr>

</table>

</form> 
```

任何人都知道如何找到桌子的孩子吗？

谢谢！

# c# - 虚拟方法和抽象方法之间的区别

> ID：14728761
> 
> 赞同：206
> 
> 时间：2013-02-06T12:09:17.807
> 
> 标签：c#, oop, virtual-functions, abstract-function

[这是来自MSDN](http://msdn.microsoft.com/en-us/library/ms173150.aspx)的一些代码：

```
// compile with: /target:library 
public class D
{
    public virtual void DoWork(int i)
    {
        // Original implementation.
    }
}

public abstract class E : D
{
    public abstract override void DoWork(int i);
}

public class F : E
{
    public override void DoWork(int i)
    {
        // New implementation.
    }
} 
```

任何人都可以就抽象方法和虚拟方法之间的区别解释上述代码吗？

* * *

## 回答 #1

> 赞同：481
> 
> 时间：2013-02-06T12:23:01.630

虚拟方法有一个实现，并为派生类提供覆盖它的选项。抽象方法不提供实现并强制派生类覆盖该方法。

因此，抽象方法中没有实际代码，子类必须覆盖该方法。虚拟方法可以有代码，这通常是某些东西的默认实现，并且任何子类都可以使用`override`修饰符覆盖该方法并提供自定义实现。

```
public abstract class E
{
    public abstract void AbstractMethod(int i);

    public virtual void VirtualMethod(int i)
    {
        // Default implementation which can be overridden by subclasses.
    }
}

public class D : E
{
    public override void AbstractMethod(int i)
    {
        // You HAVE to override this method
    }
    public override void VirtualMethod(int i)
    {
        // You are allowed to override this method.
    }
} 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2014-09-24T07:25:27.753

首先，您应该知道虚拟方法和抽象方法之间的区别。

# 抽象方法

*   抽象方法驻留在抽象类中，它没有主体。
*   抽象方法必须在非抽象子类中被覆盖。

# 虚方法

*   虚拟方法可以驻留在抽象类和非抽象类中。
*   没有必要在派生中重写虚方法，但可以。
*   虚拟方法必须有主体......可以被“覆盖关键字”覆盖......

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-08-09T07:30:25.633

**抽象方法：**

*   如果在类中定义了抽象方法，则该类应声明为抽象类。

*   抽象方法应仅包含方法定义，不应包含方法主体/实现。

*   抽象方法必须在派生类中被覆盖。

**虚拟方法：**

*   虚拟方法可以在派生类中被覆盖，但不是强制性的。
*   虚拟方法必须具有方法主体/实现以及定义。

**例子：**

```
public abstract class baseclass
        {
            public abstract decimal getarea(decimal Radius);

            public virtual decimal interestpermonth(decimal amount)
            {
                return amount*12/100;
            }

            public virtual decimal totalamount(decimal Amount,decimal principleAmount)
            {
                return Amount + principleAmount;
            }
        }

        public class derivedclass:baseclass
        {
            public override decimal getarea(decimal Radius)
            {
                return 2 * (22 / 7) * Radius;
            }

            public override decimal interestpermonth(decimal amount)
            {
                return amount * 14 / 100;
            }
        } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-11-08T12:37:55.760

抽象方法必须在派生类中调用覆盖，否则它将给出编译时错误，并且在虚拟中你可能会或可能不会覆盖它取决于它是否足够好使用它

例子：

```
abstract class twodshape
{
    public abstract void area(); // no body in base class
}

class twodshape2 : twodshape
{
    public virtual double area()
    {
        Console.WriteLine("AREA() may be or may not be override");
    }
} 
```

# mysql - 无条件加入同一张表 - mysql

> ID：14728765
> 
> 赞同：0
> 
> 时间：2013-02-06T12:09:25.473
> 
> 标签：mysql, sql, join

我有一张有记录的表

```
id_queue | 用户 ID | 身份证 | 地位

```

```
   69 | 5 | 4 | 1

```

```
   133 | 3 | 4 | 2

```

```
   142 | 1 | 4 | 0

```

我想要一个能给我这个结果的查询

```
id_queue | id_queue

```

```
   69 | 142    

```

```
   133 | 无效的 

```

我试过这样的东西

```
选择 s1.`id_queue`,s2.`id_queue` FROM `second` as s1
LEFT JOIN `second` as s2 ON s2.`book_id`=4 AND s2.`status` IN (0)
WHERE s1.`book_id`=4 AND s1.`status` IN (1,2,4)

```

但它不断给我带来这个结果。

```
id_queue | id_queue

```

```
   69 | 142    

```

```
   133 | 142

```

我认为这是因为我没有任何相同的条件。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:37:11.253

我相信发生这种情况是因为您在多列上设置同一列的多个值......这样它最终可能看起来像多行。

似乎如果您在选择之后放置一个“DISTINCT”命令，它不会导致任何值消失，因为它会检查该行的所有列是否与另一列相同。

但是您始终可以尝试将 DISTINCT 放在您不想重复的值之前并检查它是否有效。

希望我能帮助你更多。

例子：

```
 SELECT s1.`id_queue`, DISTINCT (s2.`id_queue`)
    FROM `second` as s1
    LEFT JOIN `second` as s2 ON s2.`book_id`=4 AND s2.`status` IN (0)
    WHERE s1.`book_id`=4 AND s1.`status` IN (1,2,4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:09:11.373

问题是你加入的`book_id`不是状态，所以你总是有一个匹配的行。

如果要隐藏第二个实例，`id_queue`则可以使用用户定义的变量：

```
select Queue1,
  case when seq = 1 then queue2 else null end Queue2
from
(
  select 
    Queue1,
    Queue2,
    @row:=(case when @prev=Queue2 then @row else 0 end) +1 as Seq,
    @prev:=Queue2 
  from
  (
    SELECT 
      s1.`id_queue` Queue1,
      s2.`id_queue` Queue2
    FROM `second` as s1
    LEFT JOIN `second` as s2 
      ON s1.`id_book` = s2.`id_book`
      AND s2.`status` = 0
    WHERE s1.`id_book`=4 
      AND s1.`status` IN (1,2,4)
  ) src, (SELECT @row:=0, @prev:=null) r
  order by Queue1, Queue2
) s1
order by Queue1, Queue2 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/a212d/34)

结果是：

```
| QUEUE1 | QUEUE2 |
-------------------
|     69 |    142 |
|    133 | (null) | 
```

# jsf - JSF 强制 URL 重写

> ID：14728766
> 
> 赞同：0
> 
> 时间：2013-02-06T12:09:25.403
> 
> 标签：jsf, url-rewriting, tabs

我使用 JSF，我想避免在我的浏览器中共享 2 个选项卡的同一个会话。我认为一个简单的方法是强制 url 重写而不是使用 cookie。

谁能告诉我如何强制使用 JSF 重写 url？

谢谢。

斯蒂芬妮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:42:34.437

> *我想避免同一个会话在我的浏览器中共享 2 个选项卡*

对不起，但这没有任何意义。这不是您可以从服务器端控制的东西。所有浏览器在所有打开的选项卡/窗口中使用相同的会话（除了匿名选项卡/窗口，如通过 Ctrl+Shift+N 的 Chrome Ingognito）。这就是所有浏览器的工作方式，完全超出您的控制范围。

如果您遇到问题，那么您绝对应该以不同于尝试在多个浏览器选项卡/窗口中禁用会话共享的方式来解决它（这根本不可能）。这听起来很像您在会话范围 bean 中错误地存储请求或查看范围数据。你不应该那样做。您应该将请求范围数据存储在请求范围 bean 中，并在视图范围 bean 中查看范围数据。会话范围应仅用于会话范围的数据，例如登录用户及其首选项（如语言设置）。

我认为视图范围实际上是您正在寻找的；只要您通过回发与相同的视图（阅读：相同的浏览器窗口/选项卡）交互并且它不在其他浏览器窗口/选项卡中共享，它就会存在。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

# c# - 最适合创建可以通过 USB 和蓝牙与硬件进行串行通信的 Windows 应用程序的语言？

> ID：14728773
> 
> 赞同：0
> 
> 时间：2013-02-06T12:09:45.567
> 
> 标签：c#, .net, bluetooth, serial-port, usb

所以我需要创建一个 PC 应用程序，它可以通过 USB 和蓝牙与硬件设备进行串行通信。

编辑：这个设备是由我工作的公司制造的，我将与嵌入式程序员携手合作，他们将负责设备上的软件。我唯一真正关心的是在 PC 上创建一个接口，并通过任何一种方式将该信息串行发送到该设备。

绝大多数应用程序将保持不变，包括串行数据，唯一的区别是通信类型。

我有相当多的 Java 经验，一些 C/C++ 和更多的 Android 经验。

我在考虑使用 C# 来简化 GUI 和它的 .NET 功能。

任何基于知识或经验的建议将不胜感激。

谢谢

PS。有关不同 PC 之间蓝牙协议如何变化的任何信息也将非常有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:15:19.953

我已经使用 Arduino 微控制器通过蓝牙串行完成了这一点。我使用 C# 与 micro 接口，使用 XNA 显示信息（3D 图形）。

不能再推荐它作为一种方法，C# 真的很容易用于串行。

查看[可视化串行数据：Arduino、I2C 和 XNA](http://capnfabs.net/blog/2011/10/14/visualising-serial-data-arduino-i2c-xna-and-more-tlas-than-are-worth-it-imo/)以获得详细说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T22:01:40.957

Windows 的蓝牙软件供应商有很多：Microsoft、Broadcom/Widcomm、BlueSoleil 等。他们通常可以使用任何 USB 加密狗。

使用 .NET 的另一个好理由是您可以使用我的蓝牙库，它支持所有这些堆栈等等。:-) [http://32feet.codeplex.com/](http://32feet.codeplex.com/)

与 BluetoothClient 等连接，例如[32feet.NET 文档——通用蓝牙数据连接](http://32feet.codeplex.com/wikipage?title=General%20Bluetooth%20Data%20Connections)

# fortify - 在多台机器上加强扫描

> ID：14728774
> 
> 赞同：4
> 
> 时间：2013-02-06T12:09:50.333
> 
> 标签：fortify

我们在一个团队中工作，并在本地机器上运行 Fortify 软件。我们都在不同的根目录中设置了项目代码，例如我在 C:\work\development\ 有项目代码，我的几个同事有 C:\Development\mainCodeLine\ 等类似的东西，即项目所在的根文件夹-代码所在的位置不同。最初只有我在 Fortify 上工作，但现在团队中有很多成员在运行 Fortify。我们目前共享保存在存储库中的 FPR 文件。我们从存储库下载它并在同一文件上运行 SCA 命令，以保留隐藏/抑制问题等详细信息。在一段时间内，我们观察到：

1.  生成的唯一实例 ID 仅在单台机器上是唯一的。即，唯一实例 ID 仅在我的机器上扫描时保持不变，并且在我队友的机器上进行扫描时它会改变。有什么方法可以配置 Fortify 在多台机器上的多次扫描中保持相同？因此，我们不能在过滤器文件中使用唯一实例 ID。

2.  如果我和我的队友在 2 台不同的机器上以相同的代码并行运行扫描（如前所述，只有项目的根目录不同），那么我们有什么办法可以整合这 2 份报告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T19:49:41.810

确实有一些方法可以组合在不同机器上生成的扫描结果。我认为实现这一目标的最佳方法是利用 Fortify 软件安全中心 (SSC)。用户每次都进行“新”扫描，当上传到 SSC 中的项目时，它们将被合并 - 保留任何以前的审计信息。

另一种方法是使用命令行 FPRUtility。（目前我面前没有安装，因此名称可能略有不同 - 但它与 sourceanalyzer 和 auditworkbench 一起位于 bin 目录中）。该`-h`选项应提供开始合并 FPR 的信息。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-28T11:02:31.970

如果不同的 IID 被不同的整体根更改，那似乎是一个错误。SCA 通常使用规范根，因此它的放置位置不应该有任何区别。Xelco52 部分正确，但如果您想在它们具有不同 IID 时进行合并，最好将 FPRUtility 与`-forceMigration`选项一起使用，例如：

```
FPRUtility -merge -project Results1.fpr -source Results2.fpr -f mergedResults.fpr -forceMigration 
```

您还应该能够通过`com.fortify.model.ForceIIDMigration=true`在 Core/config/fortify.properties 中设置（并重新启动 AWB）在 AWB 中获得这种影响

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-17T00:24:18.327

如果可能，请考虑使用 HP Fortify 软件安全中心 (SSC)。这将允许用户将扫描上传到中央存储库并合并结果。这有助于创建扫描的运行历史并知道谁上传了什么。

此外，这将允许您的团队使用名为“协作审计”的功能，该功能将让每个开发人员将最新的 FPR 从软件安全中心 (SSC) 拉到他们的 IDE 中。然后，开发人员可以进行更改并推送回 SSC，结果再次合并。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-27T21:26:35.150

我不认为合并是正确的方法。我会这样做：（1）​​在所有开发人员（user#）中，在他们自己的机器上，建立ProjectRoot的命名约定（指向user#的代码库，即/home/user#/mycode）和工作目录（即 /local/sharebuild）

(2) 每个用户在自己的机器上使用以下命令： (2a) CLEAN CACHE: ~/sourceanalyzer -b user# -Dcom.fortify.sca.ProjectRoot=/home/user#/mycode -Dcom.fortify.WorkingDirectory= /local/sharebuild/ -logfile /local/sharebuild/user#.sca.log -clean
(2b) 翻译：~/sourceanalyzer -b user# -64 -Xmx11000M -Xss24M -Dcom.fortify.sca.ProjectRoot=/home/ user#/mycode/ -Dcom.fortify.WorkingDirectory=/local/sharebuild/ -logfile /local/sharebuild/user#.sca.log -source 1.5 -cp 'your_class_path' -extdirs '你的 *.war 文件' '/home /user#/mycode/**/*'

(3) 将所有中间代码集成到构建机器：每个用户将他的整个 /local/sharebuild/sca#.## 复制到集中构建机器的目录 /local/sharebuild/sca#.##/build/ 下（你将找到包含所有中间代码树 (.nst) 的子目录 ./user#（每个用户的构建 ID）。

(4) SCAN：在构建服务器上，使用以下命令进行扫描：~/sourceanalyzer -b user1 -b user2 -b user3 -b user# -64 -Xmx11000M -Xss24M -Dcom.fortify.sca.ProjectRoot=/home/user #/mycode/ -Dcom.fortify.WorkingDirectory=/local/sharebuild/ -logfile /local/sharebuild/scan.sca.log -scan -f build_all.fpr

第 4 步将拾取所有 .nst（规范化语法树）文件并执行扫描。

如果每个用户在步骤 2a 将他的代码部分安装到集中式机器上，则可以省略步骤 3。

# php - 如何将格式日期从 PHP 转换为 Javascript

> ID：14728779
> 
> 赞同：2
> 
> 时间：2013-02-06T12:10:05.853
> 
> 标签：php, javascript

我有一个 php 文件，稍后我将其更改为 HTML 文件的形式，当前的约束是： **- 使用 Javascript 的日期格式。**

她的脚本如下所示：

```
<script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="js/script.js"></script>
    <?php
        /* Set start and end dates here */
        $startDate  = strtotime("15 August 2012 12:00:00");
        $endDate    = strtotime("15 November 2012 12:00:00");
        /* /Set start and end dates here */
    ?>
    <script type="text/javascript">
        $(document).ready(function(){
            JBCountDown({
                secondsColor : "#ffdc50",
                minutesColor : "#9cdb7d",
                hoursColor   : "#378cff",
                daysColor    : "#ff6565",

                startDate   : "<?php echo $startDate; ?>",
                endDate     : "<?php echo $endDate; ?>",
                now         : "<?php echo strtotime('now'); ?>",
                seconds     : "<?php echo date("s"); ?>"
            });
        });
    </script> 
```

请帮助我克服它。我想在从属的 javascript 中运行一个 php 脚本。

例子：

```
<script type="text/javascript">
        $(document).ready(function(){
            JBCountDown({
                secondsColor : "#ffdc50",
                minutesColor : "#9cdb7d",
                hoursColor   : "#378cff",
                daysColor    : "#ff6565",

                startDate   : startDate,  //format time in JS
                endDate     : endDate,  //format time in JS
                now         : strtotime('now'),  //format time in JS
                seconds     : date("s")
            });
        });
    </script> 
```

请帮助，问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T02:41:56.800

这一切都可以在javascript中完成。

```
<script type="text/javascript">

        $(document).ready(function(){

        //http://www.convert-unix-time.com/

        var unix = Math.round(+new Date()/1000);  //unix timestamp for todays date
        //alert(unix);

            JBCountDown({
                secondsColor : "#ffdc50",
                secondsGlow  : "none",

                minutesColor : "#9cdb7d",
                minutesGlow  : "none",

                hoursColor   : "#378cff",
                hoursGlow    : "none",

                daysColor    : "#ff6565",
                daysGlow     : "none",

                startDate   : "1362096000 ", //unix timestamp for ' Friday 1st March 2013 12:00:00 AM'
                endDate     : "1373328000", //unix timestamp for 'Tuesday 9th July 2013 01:00:00 AM'
                now         : unix,
                seconds     : unix % 60 //unix timestamp for seconds in realtime
            });
        });
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:14:44.117

使用 strtotime() 和 date()：

```
$originalDate = "2010-03-21";
$newDate = date("d-m-Y", strtotime($originalDate)); 
```

（请参阅PHP 站点上的[strtotime](http://php.net/strtotime)和[date文档）。](http://php.net/date)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:14:58.847

```
<?php
        /* Set start and end dates here */
$startDate  = new DateTime("15 August 2012 12:00:00");
$endDate    = new DateTime("15 November 2012 12:00:00");
/* /Set start and end dates here */

print $startDate->format('FORMAT');
?> 
```

查看所有日期时间格式：[http ://www.php.net/manual/en/datetime.formats.php](http://www.php.net/manual/en/datetime.formats.php)

# .htaccess - .htaccess 重定向不适用于带参数的 url

> ID：14728780
> 
> 赞同：-1
> 
> 时间：2013-02-06T12:10:06.463
> 
> 标签：.htaccess

我想将我的网站网址重定向到新网站

```
http://www.oldsite.com/user/profile/?type_id=1 
```

至

```
http://www.newsite.com/newuser/profile_one 
```

我已经修复了要使用的 URL`.htaccess`

代码`.htaceess`如下

**编辑代码**

```
Options +FollowSymLinks +SymLinksIfOwnerMatch
RewriteEngine On
#http://www.oldsite.com/user/profile/?type_id=1
RewriteCond %{QUERY_STRING} type_id=1 [NC]
RewriteRule ^user/profile/$ http://www.newsite.com/newuser/profile_one$1? [R=301,L] 
```

这工作正常，但对于`type_id 1 to 10`它只选择 1的值，`type_id 20 to 29`并且需要 2 条记录...

所以我很确定它只读取第一个数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T04:14:16.413

我给出的答案是

```
RewriteCond %{QUERY_STRING} type_id=1$ [NC] 
```

我们必须`$`在查询字符串结束时添加。

# ruby - 关于如何在 watir 中关闭弹出窗口的问题

> ID：14728784
> 
> 赞同：2
> 
> 时间：2013-02-06T12:10:18.803
> 
> 标签：ruby, watir

单击按钮后，将打开一个新的 Windows 警报。我尝试使用此代码：

```
 browser.button(:name => 'OpProvisionalCreate').click     

 browser.execute_script("window.confirm = function() {return true}")  

 browser.window(:title => "Message from webpage").use do
   browser.button(:id => "close").click
 end 
```

但我收到一条错误消息：

```
:in `<top (required)>': undefined method `window' for #<Watir::IE:0x1a76990> (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T15:11:22.163

您可能正在使用旧版本的 watir-classic。`Browser#window`方法是在 watir-classic 3.0.0 中添加的。但是关闭 JavaScript 弹出窗口应该在 Alert API 的帮助下完成：

```
# this will open the popup? Use #click_no_wait in that case.
browser.button(:name => 'OpProvisionalCreate').click_no_wait
# close the popup
browser.alert.close 
```

[从Container](http://rubydoc.info/github/watir/watir-classic/Watir/Container#alert-instance_method) and [Alert 文档](http://rubydoc.info/github/watir/watir-classic/Watir/Alert)中了解更多信息。如果要使用上面提到的 Alert API，则需要使用 watir-classic 3.1.0 或更新版本。

# c# - 使用键盘导航时，保持在列表框中的同一个文本框控件上

> ID：14728789
> 
> 赞同：1
> 
> 时间：2013-02-06T12:10:43.603
> 
> 标签：c#, wpf, textbox, listbox, wpf-controls

我对 WPF 很陌生，所以轻松一点

我有一个绑定列表框，它反弹到数据源。

我已经为列表框中的项目创建了一个数据模板，并且某些数据列需要可编辑。为了使它们可编辑，我在资源文件的数据模板中创建了一个绑定文本框。

我的问题是。一旦我进入文本框并编辑了数据。然后我如何使用键盘向下箭头到下一行并让它自动将焦点放在下一行的同一个文本框上。

我已经搜索了 2 天，但似乎没有适合我的问题的解决方案

资源文件中的模板；

```
<DataTemplate x:Key="myTemplate" x:Name="dTemplate">
    <StackPanel Orientation="Horizontal">
        <Label Content="{Binding Path=b2b_StockCode}" Control.Template="{StaticResource lvTemplate}" Width="80"/>
        <Label Content="{Binding Path=b2b_PartNo}" Control.Template="{StaticResource lvTemplate}" Width="70"/>
        <Label Content="{Binding Path=b2b_desc}" Control.Template="{StaticResource lvTemplate}" Width="245"/>
        <TextBox x:Name="liProfileStockQty" HorizontalContentAlignment="Right" Text="{Binding Path=b2b_ProfileStockQty}" Control.Template="{StaticResource lvTextBoxTemplate}" Width="50"/>
        <Label Content="{Binding Path=b2b_StockQty}" Control.Template="{StaticResource lvLabelRightAlignTemplate}" Width="50"/>
        <Label Content="{Binding Path=b2b_DBCost}" Control.Template="{StaticResource lvLabelRightAlignTemplate}" Width="50"/>
        <Label Content="{Binding Path=b2b_InternetCost}" Control.Template="{StaticResource lvLabelRightAlignTemplate}" Width="50"/>
        <Label Content="{Binding Path=b2b_PerCost}" Control.Template="{StaticResource lvLabelRightAlignTemplate}" Width="50"/>
        <Label Content="{Binding Path=b2b_TotalCost}" Control.Template="{StaticResource lvLabelRightAlignTemplate}" Width="50"/>            
        <Separator Width="2"/>
        <Label Content="{Binding Path=b2b_TradePrice}" Control.Template="{StaticResource lvLabelRightAlignTemplate}" Width="50"/>
        <Label Content="{Binding Path=b2b_PerTrade}" Control.Template="{StaticResource lvLabelRightAlignTemplate}" Width="50"/>
        <TextBox x:Name="liDiscountTrade" HorizontalContentAlignment="Right" Text="{Binding Path=b2b_DiscountTrade}" Control.Template="{StaticResource lvTextBoxTemplate}" Width="50"/>
    </StackPanel>
</DataTemplate> 
```

我的主要 Xaml 看起来像这样......

```
<Window x:Class="B2BPricing.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:s="clr-namespace:System;assembly=mscorlib" 
    xmlns:my="clr-namespace:B2BPricing" 
    Title="B2B Pricing"  Height="768" Width="1024" WindowStartupLocation="CenterScreen" 
    WindowStyle="ThreeDBorderWindow" ResizeMode="CanMinimize" Icon="/B2BPricing;component/NewCEF.ico" >
<Window.Resources>        
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="ListViewResources.xaml" />                
        </ResourceDictionary.MergedDictionaries>
        <my:B2BPricingDataSet x:Key="b2bPricing" />
        <CollectionViewSource x:Key="b2bPricingViewSource" Source="{Binding Path=B2bPricing, Source={StaticResource b2bPricing}}" />
        <CollectionViewSource x:Key="b2bPricingsupplierViewSource" Source="{Binding Path=B2bPricing_supplier, Source={StaticResource b2bPricingViewSource}}" />            
    </ResourceDictionary>
</Window.Resources>

<Grid DataContext="{StaticResource b2bPricingViewSource}" Name="MainGrid" >
    <Label Content="Label" Height="28" HorizontalAlignment="Left" Margin="836,12,0,0" Name="resultLabel" VerticalAlignment="Top" />
    <Label Content="Stock Code" Height="28" HorizontalAlignment="Left" Margin="13,34,0,0" Name="lblStockCode" VerticalAlignment="Top" />
    <Label Content="Part No." Height="28" HorizontalAlignment="Right" Margin="0,34,864,0" Name="lblPartNo" VerticalAlignment="Top" />
    <Label Content="Description" Height="28" HorizontalAlignment="Right" Margin="0,34,776,0" Name="lblDescription" VerticalAlignment="Top" />
    <Grid HorizontalAlignment="Left" Margin="51,609,0,0" Name="grid2" VerticalAlignment="Top">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Label Content="Stock Code" Grid.Column="0" Grid.Row="0" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
        <TextBox Grid.Column="1" Grid.Row="0" Height="23" HorizontalAlignment="Left" Margin="3" Name="b2b_StockCodeTextBox" Text="{Binding Path=b2b_StockCode, Mode=TwoWay, ValidatesOnExceptions=true, NotifyOnValidationError=true}" VerticalAlignment="Center" Width="120" />
    </Grid>

    <Grid HorizontalAlignment="Left" Margin="51,644,0,0" Name="grid1" VerticalAlignment="Top">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Label Content="Description" Grid.Column="0" Grid.Row="0" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
        <TextBox Grid.Column="1" Height="23" HorizontalAlignment="Left" Margin="3" Name="b2b_descTextBox" Text="{Binding Path=b2b_desc, Mode=TwoWay, ValidatesOnExceptions=true, NotifyOnValidationError=true}" VerticalAlignment="Center" Width="386" />
    </Grid>

    <Grid HorizontalAlignment="Left" Margin="297,609,0,0" Name="grdSupplier" VerticalAlignment="Top" Width="219">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Label Content="Supplier" Grid.Column="0" Grid.Row="0" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
        <TextBox Grid.Column="1" Height="22" HorizontalAlignment="Left" Margin="3,4,0,6" Name="tbSupplier" VerticalAlignment="Center" Width="150" Text="159" />
    </Grid>

    <ListBox ItemsSource="{Binding}" ItemTemplate="{StaticResource myTemplate}" Height="542" HorizontalAlignment="Stretch" 
             Margin="0,60,0,0" Name="lbPricing" VerticalAlignment="Top" Width="983" IsManipulationEnabled="True" 
             SelectionMode="Extended" IsSynchronizedWithCurrentItem="True" 
             KeyboardNavigation.TabNavigation="Continue"
             KeyboardNavigation.DirectionalNavigation="Once">
        <ListBox.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <Label Content="{Binding Path=Name}" Padding="4" Background="{StaticResource myGroupingBrush}" Foreground="White">
                        </Label>
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
            </GroupStyle>
        </ListBox.GroupStyle>
    </ListBox>

    <Button Content="_Load" Height="23" HorizontalAlignment="Left" Margin="52,694,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
    <ProgressBar HorizontalAlignment="Stretch" Margin="230,311,246,385" Name="progressBar1" VerticalAlignment="Stretch" Width="526" Visibility="Visible" IsIndeterminate="False" />        

    <Grid DataContext="{StaticResource b2bPricingsupplierViewSource}" HorizontalAlignment="Left" Margin="12,-3,0,0" Name="grid4" VerticalAlignment="Top">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Label Content="Supplier: " Grid.Column="0" Grid.Row="0" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" FlowDirection="LeftToRight" />
        <Label Content="{Binding Path=sup_fullname}" Grid.Column="1" Grid.Row="0" Height="28" HorizontalAlignment="Left" Margin="3" Name="sup_fullnameLabel" VerticalAlignment="Center" />            
    </Grid>
    <Button Content="_Show" Height="23" HorizontalAlignment="Left" Margin="156,694,0,0" Name="btnTextBoxContents" VerticalAlignment="Top" Width="75" Click="btnTextBoxContents_Click" />
</Grid> 
```

和 C#：

```
 private void btnTextBoxContents_Click(object sender, RoutedEventArgs e)
    {
        ListBoxItem item = (lbPricing.SelectedItem as ListBoxItem);
        TextBox tb = (TextBox)lbPricing.ItemsPanel.FindName("liProfileStockQty", lbPricing);
        //TextBox tb = dTemplate.FindName("liProfileStockQty") as TextBox;
        resultLabel.Content = tb.Text;
    } 
```

这不是我尝试过的唯一方法。我也试过复制这样的东西。

```
foreach (LinePosition item in this.ListLinePositions.Items)
                {
                      CheckBox cb = FindByName("checkedPosition",
                                                (ListViewItem)this.ListLinePositions.ItemContainerGenerator.ContainerFromItem(item)) as CheckBox;    
                } 
```

但是用我要查找的文本框控件替换该示例复选框

# sharepoint - SharePoint 2010 调查视图

> ID：14728792
> 
> 赞同：2
> 
> 时间：2013-02-06T12:10:50.260
> 
> 标签：sharepoint

我需要为用户添加为调查列表添加自定义视图的功能。使用 Designer 不是一种选择。

为了添加新视图，我现在打开标准 SharePoint 表单“/_layouts/ViewNew.aspx?List={SurveyListID}”。我设置了一个新视图，选择了我想查看的字段。然后，当我查看此视图​​时，无论我做什么，它看起来都像是标准的“{SurveyTitle}/overview.aspx”视图。但我需要它看起来更像一个 SharePoint 列表视图。我看过几十篇博客文章，人们使用这种方法，但没有人提到我遇到的任何问题。我已经使用 3 个不同的 SharePoint 场尝试了这种方法，并且得到了相同的行为。

通过复制“所有响应”视图和编辑，我能够使用 Designer 创建一个可以正常工作的视图。但是，强制用户使用 Designer 并不是一个好主意。

有谁知道强制我的自定义视图在调查列表中正确显示的简单方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-05T21:26:29.470

**最后，我找到了解决方案。**

1.  打开页面 /_layouts/ViewType.aspx?List={SurveyListID}
2.  基于“所有响应”视图创建视图
3.  完毕！无需使用设计器

# android - Appcelerator Titanium 中的自定义导航栏

> ID：14728793
> 
> 赞同：0
> 
> 时间：2013-02-06T12:10:58.770
> 
> 标签：android, ios, navigation, appcelerator, titanium-mobile

我是钛新手。我按照帖子创建了导航栏

[http://mobile.tutsplus.com/tutorials/appcelerator/drilldown-navigation-with-titanium/](http://mobile.tutsplus.com/tutorials/appcelerator/drilldown-navigation-with-titanium/)

在这里，我想自定义默认工具栏和后退按钮（按窗口命名）。

请指导我的朋友，GANESH M

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-05T01:32:47.680

Titanium Docs 中有一个关于此的教程。如果你遵循这个，它应该对你有用。[注意使用 Titanium 3.3+ 和 3.2- http://docs.appcelerator.com/titanium/3.0/#!/guide/Android_Themes](http://docs.appcelerator.com/titanium/3.0/#!/guide/Android_Themes)之间的区别

# c# - 如何更新样式的内容？

> ID：14728798
> 
> 赞同：0
> 
> 时间：2013-02-06T12:11:25.473
> 
> 标签：c#, wpf, xaml

我有课：

```
class NoExp : Expander
{ 
    public long Id { get; set; }
    public string btnBackGround { get;set;}
    public bool btnEnabled { get; set; }
    public string btnForeground { get; set; }
    public string tbText { get; set; }
    public string tbTime { get; set; }
    public string tbNumber { get; set; }
    public string tbForeground { get; set; }
    public ServiceReference.PickerItemItem[] DGItemSource { get; set; }} 
```

和风格：

```
 <Style x:Key="ExpanderStyle" TargetType="{x:Type local:NoExp}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:NoExp}">
                    <Grid>
                        <Button Content="Собран"  Height="35.5" Margin="5,0,1,0" VerticalAlignment="Top"
                                Foreground="{Binding btnForeground, RelativeSource={RelativeSource TemplatedParent}}"
                                Background="{Binding btnBackGround, RelativeSource={RelativeSource TemplatedParent}}" 
                                IsEnabled="{Binding btnEnabled, RelativeSource={RelativeSource TemplatedParent}}" 
                                Tag="{Binding Id, RelativeSource={RelativeSource TemplatedParent}}"
                                Style="{DynamicResource ButtonStyle1}" Click="Button_Click_1"/> 
```

在我试图改变的代码中：

```
 foreach (NoExp exp in listBox.Items)
                {
                    exp.btnForeground = "#808080";
                } 
```

数据有变化，但界面没有变化。请告诉我应该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:42:06.537

您是否考虑过使用可观察的集合？

您的实体需要继承 INotifyPropertyChanged 并在设置属性时调用 NotifyPropertyChanged。假设您的实体对象包含在 ObservableCollection 中，您的控件绑定到所有内容都会更新正常。

我在 Silverlight 中成功地对 PivotViewer 使用了它。

阅读更多： [Silverlight 数据绑定 – 可观察集合](http://weblogs.asp.net/joelvarty/archive/2008/11/17/silverlight-databinding-the-observable-collection.aspx%20Silverlight%20Databinding%20the%20observable%20collection)

# c# - 从 SharePoint 列表中获取所选项目

> ID：14728799
> 
> 赞同：0
> 
> 时间：2013-02-06T12:11:26.333
> 
> 标签：c#, asp.net, sharepoint, sharepoint-2010

如果在我的列表中添加这两个项目，我只能在详细信息视图中显示列表中的第一个更新项目，所以我的问题是，如果我在列表中有 10 个项目，它应该在所有项目上显示标题，然后当我点击我希望每个超链接按钮从 id 显示有关该标题的信息

这是我想做的图片链接。 [http://i.stack.imgur.com/ZhJmc.jpg](http://i.stack.imgur.com/ZhJmc.jpg)

```
protected void ButtonChoose_Click(object sender, EventArgs e)
{
    try
    {

        if (DropDownListNewsFeed.SelectedItem.Value == "All")
        {
            SPWeb web = SPContext.Current.Web;

            SPSiteDataQuery query = new SPSiteDataQuery();

            query.Lists = "<Lists>" +
            "<List ID=" + web.Lists.TryGetList("Staff News").ID.ToString() + " />" +
            "<List ID=" + web.Lists.TryGetList("Company News").ID.ToString() + " />" +
            "<List ID=" + web.Lists.TryGetList("Management News").ID.ToString() + " />" +
            "</Lists>";

            query.ViewFields = "<FieldRef Name=\"Title\" /><FieldRef Name=\"Date1\" Nullable=\"TRUE\"/>";
            query.Query = "<OrderBy><FieldRef Name='Modified' Ascending='FALSE'></FieldRef></OrderBy>";
            query.Webs = "<Webs Scope=\"SiteCollection\" />";

            query.RowLimit = 10;

            DataTable dt = web.GetSiteData(query);
            DataView dv = new DataView(dt);

            GridViewNewsFeed.DataSource = dv;
            GridViewNewsFeed.DataBind();
        }
        else if(DropDownListNewsFeed.SelectedItem.Value == "Staff News")
        {
            SPWeb web = SPContext.Current.Web;

            SPSiteDataQuery query = new SPSiteDataQuery();

            query.Lists = "<Lists><List ID=" + web.Lists.TryGetList("Staff News").ID.ToString() + " /></Lists>";

            query.ViewFields = "<FieldRef Name=\"Title\" /><FieldRef Name=\"Date1\" Nullable=\"TRUE\"/>";
            query.Query = "<OrderBy><FieldRef Name='Modified' Ascending='FALSE'></FieldRef></OrderBy>";
            query.Webs = "<Webs Scope=\"SiteCollection\" />";

            query.RowLimit = 10;

            DataTable dt = web.GetSiteData(query);
            DataView dv = new DataView(dt);

            GridViewNewsFeed.DataSource = dv;
            GridViewNewsFeed.DataBind();
        }
        else if (DropDownListNewsFeed.SelectedItem.Value == "Management News")
        {
            SPWeb web = SPContext.Current.Web;

            SPSiteDataQuery query = new SPSiteDataQuery();

            query.Lists = "<Lists><List ID=" + web.Lists.TryGetList("Management News").ID.ToString() + " /></Lists>";

            query.ViewFields = "<FieldRef Name=\"Title\" /><FieldRef Name=\"Date1\" Nullable=\"TRUE\"/>";
            query.Query = "<OrderBy><FieldRef Name='Modified' Ascending='FALSE'></FieldRef></OrderBy>";
            query.Webs = "<Webs Scope=\"SiteCollection\" />";

            query.RowLimit = 10;

            DataTable dt = web.GetSiteData(query);
            DataView dv = new DataView(dt);

            GridViewNewsFeed.DataSource = dv;
            GridViewNewsFeed.DataBind();
        }
        else if (DropDownListNewsFeed.SelectedItem.Value == "Company News")
        {
            SPWeb web = SPContext.Current.Web;

            SPSiteDataQuery query = new SPSiteDataQuery();

            query.Lists = "<Lists><List ID=" + web.Lists.TryGetList("Company News").ID.ToString() + " /></Lists>";

            query.ViewFields = "<FieldRef Name=\"Title\" /><FieldRef Name=\"Date1\" Nullable=\"TRUE\"/>";
            query.Query = "<OrderBy><FieldRef Name='Modified' Ascending='FALSE'></FieldRef></OrderBy>";
            query.Webs = "<Webs Scope=\"SiteCollection\" />";

            query.RowLimit = 10;

            DataTable dt = web.GetSiteData(query);
            DataView dv = new DataView(dt);

            GridViewNewsFeed.DataSource = dv;
            GridViewNewsFeed.DataBind();
        }

    }
    catch (Exception x)
    {
        LabelException.Text = x.Message;
    }
}

protected void LinkButton1_Click(object sender, EventArgs e)
{
    try
    {
        SPWeb web = SPContext.Current.Web;

        SPSiteDataQuery query = new SPSiteDataQuery();

        query.Lists = "<Lists>" +
                      "<List ID=" + web.Lists.TryGetList("Staff News").ID.ToString() + " />" +
                      "<List ID=" + web.Lists.TryGetList("Company News").ID.ToString() + " />" +
                      "<List ID=" + web.Lists.TryGetList("Management News").ID.ToString() + " />" +
                      "</Lists>";

        query.ViewFields = "<FieldRef Name=\"Title\" />" +
                        "<FieldRef Name=\"Authors\" />" +
                        "<FieldRef Name=\"Link\" />" +
                        "<FieldRef Name=\"Contents\" />" +
                        "<FieldRef Name=\"_Category\" />" +
                         "<FieldRef Name=\"Date1\" Nullable=\"TRUE\"/>";

        //query.Query = "<OrderBy><FieldRef Name='Modified' Ascending='FALSE'></FieldRef></OrderBy>";
        query.Webs = "<Webs Scope=\"SiteCollection\" />";

        query.RowLimit = 10;

        DataTable dt = web.GetSiteData(query);
        DataView dv = new DataView(dt);

        DetailsViewShowNews.DataSource = dv;
        DetailsViewShowNews.DataBind();
    }
    catch (Exception x)
    {

        LabelException.Text = x.Message;
    }
} 
```

这是我的 asp gridview 代码：

```
<asp:GridView AutoGenerateColumns="False" ID="GridViewNewsFeed" runat="server" BackColor="White" 
    BorderColor="#DEDFDE" BorderStyle="Solid" BorderWidth="1px" CellPadding="4" 
    EnableModelValidation="True" GridLines="Vertical" ForeColor="Black" >

    <FooterStyle BackColor="#CCCC99" />
    <HeaderStyle BackColor="#6B696B" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#F7F7DE" ForeColor="Black" HorizontalAlign="Right" />
    <RowStyle BackColor="#F7F7DE" />
    <SelectedRowStyle BackColor="#CE5D5A" Font-Bold="True" ForeColor="White" />

    <AlternatingRowStyle BackColor="White" />            
            <Columns>
                <asp:TemplateField HeaderText="Title">
                  <ItemTemplate>                        
                      <asp:LinkButton ID="LinkButton1" OnClick="LinkButton1_Click" runat="server" Text='<%# Bind("Title") %>'></asp:LinkButton>                       
                  </ItemTemplate>
                </asp:TemplateField> 

                <asp:templatefield headertext="Date">
                    <itemtemplate>
                            <asp:label id="lblDate" runat="server" text='<%# DateTime.Parse(Eval("Date1").ToString()).ToString("d") %>' />
                    </itemtemplate>
                </asp:templatefield>                                                                                                
            </Columns>
</asp:GridView> 
```

这是我的 asp detailsview 代码：

```
<asp:DetailsView AutoGenerateRows="False" ID="DetailsViewShowNews" runat="server" 
    BackColor="White" BorderColor="#336666" BorderWidth="1px" 
    CellPadding="4" EnableModelValidation="True" GridLines="Horizontal" 
    Height="226px" Width="301px" BorderStyle="Solid"  >
    <EditRowStyle BackColor="#339966" ForeColor="White" Font-Bold="True" />
    <FooterStyle BackColor="White" ForeColor="#333333" />
    <HeaderStyle BackColor="#336666" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#336666" ForeColor="White" 
        HorizontalAlign="Center" />

     <Fields>
        <asp:TemplateField >                      
            <ItemTemplate>
                <asp:Label ID="Label12" runat="server" Text='<%#Eval("Title") %>' Font-Size="Large" Font-Bold="True"></asp:Label>   
            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField>                      
            <ItemTemplate>
                <asp:TextBox ID="TextBox22" runat="server" Text='<%#Eval("Contents") %>' TextMode="MultiLine" Height="100%" BorderStyle="None" ReadOnly="True" Width="250px" style="overflow:auto;"></asp:TextBox>   
            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField>                      
            <ItemTemplate>
                <asp:Label ID="Label72" runat="server" Text='<%#Eval("_Category") %>' ></asp:Label>   
            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField>
            <ItemTemplate>
                <asp:Label ID="Label52" runat="server" Text='<%#Eval("Authors") %>' ></asp:Label>   
            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField>                      
            <ItemTemplate>
                <asp:Label ID="Label32" runat="server" Text='<%#DateTime.Parse(Eval("Date1").ToString()).ToString("d") %>' ></asp:Label>   
            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField>                      
            <ItemTemplate>                   
                <a href="<%#Eval("Link") %>"><asp:Label ID="Label42" runat="server" Text='<%#Eval("Link") %>' ></asp:Label>   </a>
            </ItemTemplate>
        </asp:TemplateField>               

        <asp:TemplateField>                      
            <ItemTemplate>                   
                <asp:LinkButton ID="LinkButtonComment" OnClick="LinkButtonComment_Click" runat="server">Leave a comment</asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>          
    </Fields>

    <RowStyle BackColor="White" ForeColor="#333333" />

</asp:DetailsView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:30:16.847

首先，您可以减少代码并使其更通用，如下所示：

```
 try
            {
                SPWeb web = SPContext.Current.Web;
                SPSiteDataQuery query = new SPSiteDataQuery();

                switch (DropDownListNewsFeed.SelectedItem.Value)
                {
                    case "ALL":
                        query.Lists = "<Lists>" +
                        "<List ID=" + web.Lists.TryGetList("Staff News").ID.ToString() + " />" +
                        "<List ID=" + web.Lists.TryGetList("Company News").ID.ToString() + " />" +
                        "<List ID=" + web.Lists.TryGetList("Management News").ID.ToString() + " />" +
                        "</Lists>";
                        break;
                    case "Staff News":
                        query.Lists = "<Lists><List ID=" + web.Lists.TryGetList("Staff News").ID.ToString() + " /></Lists>";
                        break;
                    case "Management News":
                        query.Lists = "<Lists><List ID=" + web.Lists.TryGetList("Management News").ID.ToString() + " /></Lists>";
                        break;
                    case "Company News":
                        query.Lists = "<Lists><List ID=" + web.Lists.TryGetList("Company News").ID.ToString() + " /></Lists>";
                        break;
                }

                query.ViewFields = "<FieldRef Name=\"Title\" /><FieldRef Name=\"Date1\" Nullable=\"TRUE\"/>";
                query.Query = "<OrderBy><FieldRef Name='Modified' Ascending='FALSE'></FieldRef></OrderBy>";
                query.Webs = "<Webs Scope=\"SiteCollection\" />";

                query.RowLimit = 10;

                DataTable dt = web.GetSiteData(query);
                DataView dv = new DataView(dt);

                GridViewNewsFeed.DataSource = dv;
                GridViewNewsFeed.DataBind();
            }
            catch (Exception x)
            {
                LabelException.Text = x.Message;
            } 
```

关于你的问题：

尝试将项目 ID（最好是通过 UniqueId）作为链接按钮上的“CommandArgument”传递。要指定这一点，您只需将项目 ID 字段绑定到 CommandArgument 属性：

```
<asp:LinkButton ID="LinkButton1" OnClick="LinkButton1_Click" CommandArgument="<%# Bind("ItemId") %>" runat="server" Text='<%# Bind("Title") %>'></asp:LinkButton> 
```

在单击按钮时背后的代码上，您可以使用下一行代码获取它：

```
LinkButton button = (LinkButton) sender;
string itemID = button.CommandArgument; 
```

获得 ID 后，只需使用以下子句获取它：

```
query.Query =    <Where>
      <Eq>
         <FieldRef Name='ID' />
         <Value Type='Text'>ID</Value>
      </Eq>
   </Where>"; 
```

编辑：

> 要从 SharePoint 中获取字段，请在 query.VieweFields 中添加“UniqueId”字段。这将从 Sharepoint 获取并在 DataTable 中生成：
> 
> ```
> query.ViewFields = "<FieldRef Name=\"UniqueId\"/>"; 
> ```
> 
> 要在按钮事件方法中的代码后面获取此字段的值，请执行以下操作：
> 
> ```
> SPFieldLookupValue f = new SPFieldLookupValue(button.CommandArgument);
> string itemID = f.LookupValue; 
> ```

希望能帮助到你，

安德鲁

# scala - 如何使用 scala reflect 获取给定类/特征的所有实例？所有参考给定的实例？

> ID：14728800
> 
> 赞同：2
> 
> 时间：2013-02-06T12:11:33.227
> 
> 标签：scala, reflection, instance, scala-2.10

我知道获取一个类的成员和给定实例的成员是可能的，但是为什么很难获取给定类的所有实例呢？JVM 不跟踪类的实例吗？[这在 Java 中不起作用](https://stackoverflow.com/questions/5067987/java-reflection-get-instances-of-a-given-class-found-by-entering-its-name)：

```
 myInstance.getClass.getInstances() 
```

新的 scala 反射库可以做到这一点吗？有可能的解决方法吗？在 SO 和 google 上搜索反射 scaladoc，但奇怪的是找不到关于这个非常明显的问题的任何信息。

我想试验/破解一个超图数据库，受超图数据库的启发，直接查询对象图，留出序列化。

此外，我需要访问对给定对象的所有引用。现在这个信息肯定是存在的（GC），但它可以通过反射访问吗？

谢谢

编辑：这似乎至少可以通过使用 com.sun.jdi.ReferenceType.instances 从另一个 JVM“调试”JVM

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:05:41.010

“跟踪”类的所有实例几乎是不可取的，至少默认情况下是不可取的。这样做的成本很高，并且该机制必须避免硬引用，因为硬引用会阻止回收其他未引用的实例。这意味着使用其中一种引用类型和所有相关的机器。

垃圾收集不需要是类感知的。它只关心实例是否可达。

也就是说，您可以编写代码来逐个类地跟踪实例化。您必须使用其中一个参考类[`java.lang.ref`](http://docs.oracle.com/javase/6/docs/api/java/lang/ref/package-summary.html)来跟踪它们。

# linq - Linq选择最高分组的前1名

> ID：14728801
> 
> 赞同：1
> 
> 时间：2013-02-06T12:11:34.787
> 
> 标签：linq

我有一个如下列表

```
Name Score Date
S1   2     15/02/2013
S1   4     15/02/2013
S2   0     15/02/2013
My desired out should be
S1   6     15/02/2013 
```

为此，我将 LINQ 代码编写为

```
(from _data in _rawData
    group _data by new { _data.Date, _data.Name } into gp orderby gp.Key.Date             
             select new
             {                 
                 score = gp.Sum(_score => _score.Score),
                 store = gp.Max(_store => _store.Name),
                 Date = gp.Max(_Date => _Date.Date)
             }).OrderByDescending(_score => _score.score)
           .ToList().
           ForEach(item => _timeLiner.Add(new TimeLiner()
           {
               id = _id++.ToString(),
               start = item.auditDate.ToString(),
               title = "TopStore: " + item.store
           } 
```

我尝试使用`.Take(1).ToList()`, `Single()`, `SingleOrDefault()`，`First()`但未能获得所需的输出。相反，我得到了

```
S1    6     15/02/2013
S2    0     15/02/2013 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:25:25.920

`top`是一个新的范围变量，它包含一天最高分名称的摘要数据

```
from d in _rawData
group d by d.Date into dateGroup
let top = dateGroup.GroupBy(x => x.Name)
                   .Select(g => new { Name = g.Key, Score = g.Sum(x => x.Score)})
                   .OrderByDescending(x => x.Score)
                   .First()
select new
{                 
     Name = top.Name,
     Score = top.Score,
     Date = dateGroup.Key
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:15:06.950

以下内容应为您提供所需的输出：

```
(from _data in _rawData
 group _data by new { _data.Date, _data.Name } into gp orderby gp.Key.Date
 select new
 {                 
     score = gp.Sum(_score => _score.Score),
     store = gp.Max(_store => _store.Name),
     Date = gp.Max(_Date => _Date.Date)
 }).OrderByDescending(_score => _score.score)
   .First(); 
```

或者，更具可读性：

```
_rawData.GroupBy(x => new { x.Date, x.Name })
        .Select(g => new {
                             Score = g.Sum(x => x.Score),
                             Store = g.Key.Name,
                             Date = g.Key.Date
                         }
        .OrderByDescending(x => x.Score)
        .First() 
```

# android - 如何防止 onDraw 中的 Thread.Sleep 影响其他活动？

> ID：14728807
> 
> 赞同：0
> 
> 时间：2013-02-06T12:11:41.093
> 
> 标签：android, multithreading, ondraw, thread-sleep

我有一个正在绘制图像的自定义视图类。问题是当我使用 Thread.sleep(200); 在 onDraw 方法中，它还会影响同一活动中的 XML 元素。所以我必须等待 200 毫秒，直到有事情发生。

```
MainPage extends Activity implements OnClickListener{
    onCreate(...){

        RelativeLayout rl = (RelativeLayout) findViewById(R.id.main_rl);
        rl.addView(new CustomView(this));
    }

    onClick(View v){
        switch(v.getId){
            ...
        };
    }
}

CustomView extends View{

    onDraw(){
        try{
            Thread.sleep(200);
            ....
        }
    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:14:39.340

切勿在 Android 的任何 UI 侦听器回调（或在 UI 线程上运行的任何其他位置）中运行长时间操作。相反，创建一个新线程来执行睡眠，然后做任何需要做的事情。请记住，如果您想再次与 UI 交互，则需要在 UI 线程中进行，您可以通过调用`runOnUiThread()`.

```
CustomView extends View{

    onDraw(){
        (new Thread(myRunnable)).start();
    }
}

Runnable myRunnable = new Runnable() {
    void run() {
        try { Thread.sleep(...); } catch...;
        do_non_ui_things_if_needed();
        runOnUiThread(some_runnable_for_this_if_needed);
    }
} 
```

# css - span10 offset1 不居中

> ID：14728808
> 
> 赞同：0
> 
> 时间：2013-02-06T12:11:43.993
> 
> 标签：css, twitter-bootstrap

我对一个基本问题感到困惑，我不知道该怎么做——

看看 www.hncharity.com

如果您查看内容 div，它会稍微偏离中心（当您进入移动视图时，它会变得更加明显）。

div 的结构如下：

```
<div class="container">
  <div class="span10 offset1">
    <div class="content">
         ....
    </div>
  </div>
</div> 
```

.content 类具有白色背景，在 span10 offset1 div 周围添加填充和边距，以使宽度看起来更小。

这是内容的CSS

```
 margin:40px;
  padding:40px;
  position:relative;
  margin-top:-200px;
  z-index:1201;
  background-color:white; 
```

如您所见，内容似乎没有居中。我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:14:26.097

您错过了在跨度之前和容器之后添加具有类行的容器。

正确方法：

```
<div class="container">
  <div class="row">
    <div class="span10 offset1">
      <div class="content">
         ....
      </div>
    </div>
  </div>
</div> 
```

# css - CSS：防止绝对图像扩展到特定的 div

> ID：14728809
> 
> 赞同：0
> 
> 时间：2013-02-06T12:11:46.797
> 
> 标签：css

有没有办法防止绝对放置的图像延伸到某些元素中？

原因：我允许我的用户通过添加图像来自定义他们的网站。但是他们可以将图像以覆盖表单按钮的方式放置 - 然后他们无法再次将其删除。

```
#parent{
    position:relative;
}

#my_img {
    position:absolute; 
    # top, left can be anything
}

<div id = "parent">
    <img id = "my_img" src = "my_pic.jpg" >
</div>
<div id = "other_div">
    I always want to see this text regardless of my_img top and left
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:56:03.293

确定您的 html 元素的布局顺序，而不是您需要定位元素（相对、绝对或固定）并为元素`z-index`赋值的文档结构。

您还需要为定位元素分配至少顶部/底部和左/右，以防止旧 IE 版本出现问题。

```
#other_div {
    position: relative;
        top: 0;
        left: 0;
    z-index: 1337;
} 
```

# php - php中对应的嵌套三元运算符？

> ID：14728810
> 
> 赞同：0
> 
> 时间：2013-02-06T12:11:46.457
> 
> 标签：php, if-statement, ternary-operator

我想将以下转换`if else condition`为`nested ternary`运算符。

```
if ($projectURL) {
    echo $projectURL;
} elseif ($project['project_url']) {
    echo $project['project_url'];
} else {
    echo $project['project_id'];
} 
```

我写了如下。

```
echo ($projectURL)?$projectURL:($project['project_url'])?$project['project_url']: $project['project_id']; 
```

但是发现它不能正常工作。这不是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:14:33.407

三元运算符在 PHP 中很棘手，因为它们是左关联的（与所有其他语言不同，它是右关联的）。在这种情况下，您需要使用括号来告诉 PHP 您到底想要什么：

```
echo ($projectURL ? $projectURL : ($project['project_url'] ? $project['project_url'] : $project['project_id'])); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-04-05T07:36:01.890

我们`php 7`可以使用[Null 合并运算符](http://php.net/manual/en/migration70.new-features.php#migration70.new-features.null-coalesce-op)

```
echo $projectURL ?? $project['project_url'] ?? $project['project_id']; 
```

# javascript - Javascript window.onload 不等待 DOM 加载

> ID：14728815
> 
> 赞同：0
> 
> 时间：2013-02-06T12:11:54.867
> 
> 标签：javascript, html, dom

我对编程有点陌生，并且一直在阅读 Head First HTML5 Programming 一书。在第 65 页，他们有一个练习，可帮助您将 javascript 函数插入 HTML 头部，该函数将更改位于页面正文中的项目符号点处的文本。当我在浏览器中打开 HTML 文件时，页面会加载，但 Javascript 函数的内容不会添加到项目符号中。我已经确定这是因为脚本在 DOM 完成之前运行，因为当我将书的代码更改为 时`<body onload="addSongs()">`，页面加载正确。

这是书中的代码（似乎不起作用）：

```
<!doctype html>
<html>
<head>
<title>My Playlist</title>
<meta charset="utf-8">
<script>
function addSongs() {
var song1 = document.getElementById("song1");
var song2 = document.getElementById("song2");
var song3 = document.getElementById("song3");

song1.innerHTML = "Blue Suede Strings, by Elvis Pagely";
song2.innerHTML = "Great Objects on Fire, by Jerry JSON Lewis";
song3.innerHTML = "I Code the Line, by Johnny Javascript";

window.onload = addSongs;
}
</script>
</head>
<body>
<h1> My Awesome Playlist! </h1>
<ul id="playlist">
<li id="song1"></li>
<li id="song2"></li>
<li id="song3"></li>
</ul>
</body>
</html> 
```

我已经阅读了不同的帖子，很多人建议使用 JQuery（我希望在接下来的几个月内学习），但我只是好奇`window.onload = function;`自从这本书出版以来它是否已被弃用，或者我是否正在制作某处的错误。本书中的很多练习都使用了这个原理，在我弄明白之前我不能继续前进。任何建议或不同的方法表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:14:00.200

您需要移动该行：

```
window.onload = addSongs; 
```

到函数*之外*。

> *“我已经确定这是因为脚本在 DOM 完成之前运行”*

该脚本正在运行，但它所做的只是声明一个函数，它从未调用它（因为上述行位于错误的位置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:16:32.307

这只是一个错字。

您`window.onload = addSong;`输入了函数 addSong 的定义。所以 window.onload 永远不会被设置，因为 addSong 永远不会被调用。

```
function addSongs() {
    var song1 = document.getElementById("song1");
    var song2 = document.getElementById("song2");
    var song3 = document.getElementById("song3");

    song1.innerHTML = "Blue Suede Strings, by Elvis Pagely";
    song2.innerHTML = "Great Objects on Fire, by Jerry JSON Lewis";
    song3.innerHTML = "I Code the Line, by Johnny Javascript";

}

window.onload = addSongs; //move this line out of function definition. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:22:30.857

您需要`window.onload = addSongs;`在定义函数之后移动，而不是在它之前移动。像这样：

```
<!doctype html>
<html>
<head>
<title>My Playlist</title>
<meta charset="utf-8">
<script>
function addSongs() {
    var song1 = document.getElementById("song1");
    var song2 = document.getElementById("song2");
    var song3 = document.getElementById("song3");

    song1.innerHTML = "Blue Suede Strings, by Elvis Pagely";
    song2.innerHTML = "Great Objects on Fire, by Jerry JSON Lewis";
    song3.innerHTML = "I Code the Line, by Johnny Javascript";
}
window.onload = addSongs;

</script>
</head>
<body>
<h1> My Awesome Playlist! </h1>
<ul id="playlist">
    <li id="song1"></li>
    <li id="song2"></li>
    <li id="song3"></li>
    </ul>
</body>
</html> 
```

# android - XML 布局文件无法识别在 strings.xml 中创建的字符串

> ID：14728817
> 
> 赞同：0
> 
> 时间：2013-02-06T12:11:57.167
> 
> 标签：android

我在 strings.xml 中创建了新字符串并保存了它。当我尝试在我的 layout.xml 中使用它时，我收到此错误：

找不到与给定名称匹配的资源（在“文本”处，值为“@string/breadth”）

**我试图使用字符串的 xml 代码是：**

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#2F4F4F"
    android:text="@string/breadth"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

创建的字符串是：

```
 <string name="breadth ">Breadth in cms</string> 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:23:30.527

你有一个错字。代替：

```
<string name="breadth ">Breadth in cms</string> 
```

利用：

```
<string name="breadth">Breadth in cms</string> 
```

注意删除的空格 ( `)。`

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:49:52.790

`name="breadth "`从您的 string.xml 文件中的字符串中删除空格，如下所示：

> ```
> <string name="breadth">Breadth in cms</string> 
> ````

# jakarta-ee - 为什么 JPA 查询返回不同的对象

> ID：14728818
> 
> 赞同：1
> 
> 时间：2013-02-06T12:11:59.113
> 
> 标签：jakarta-ee, jpa

我在我的 Java ee 应用程序中使用 JPA。我有一个映射到类 A 的表 A。现在，当我查询实体（例如，通过它的 id）时，它总是返回一个不同的对象。例子：

```
public A getAById(int id) {
    A obj = (A) em.createNamedQuery("getAById")
            .setParameter("id", id).getSingleResult();
    return obj;
}

public void test(){
    getAById(1)==getAById(1) //is false
} 
```

有没有办法告诉 JPA 在从数据库查询时不要总是创建新实例，而是在已经查询到现有对象时返回它？

//编辑这篇文章对我帮助很大： [http ://en.wikibooks.org/wiki/Java_Persistence/Caching#Example_JPA_2.0_Cacheable_annotation](http://en.wikibooks.org/wiki/Java_Persistence/Caching#Example_JPA_2.0_Cacheable_annotation)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:18:42.040

*有没有办法告诉 JPA 在从数据库查询时不要总是创建新实例，而是在已经查询到现有对象时返回它？*

JPA 从不为选择查询创建新实体。请参阅以下示例

```
Query qry = em.createNamedQuery("SELECT r FROM BusinessUnit r WHERE r.buKey = :buKey");
Object result1 = qry.setParameter("buKey", "32").getSingleResult();
qry = em.createNamedQuery("SELECT r FROM BusinessUnit r WHERE r.buKey = :buKey");
Object result2 = qry.setParameter("buKey", "32").getSingleResult();
System.out.println(result1 == result2); 
```

对于上述情况，我是`result1 == result2`真的，因为`hashCode`方法在实体类中被覆盖。

如果您的实体类被方法覆盖`equals`，您可以使用equals方法进行测试，而不是与对象引用进行比较。

```
public void test(){
    getAById(1).equals(getAById(1)) ;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T13:14:49.910

JavaEE 容器将 JPA 提供者 EntityManager 包装在一个代理中，因此您看到的行为很可能是因为您的容器在事务之外获得了一个新的 EM。您的两个 getAById(1) 调用将转到两个不同的实体管理器。您可以通过将它们包装在单个事务中来解决此问题，强制容器在事务的生命周期内使用相同的实体管理器。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-06T12:17:26.727

**如果持久化上下文**中已经存在实体实例，是的，但是您需要使用**EntityManager**操作，例如**entityManager.find(entity.class, id)**；这样做将要求**entitymanager**首先从关联的**PersistenceContext**中查找实体，如果找不到它将从 DB 中查询。一旦实体实例第一次加载到关联的 PersistenceContext 中，针对相同实体 ID 的其余查询将不会触发 DB 查询，并且始终重用缓存在 PersistenceContext 中的查询。这是 JPA 一级缓存。

使用**JPQL**将不符合您的要求，因为**JPQL**将绕过**PersistenceContext**并始终直接与 DB 通信，这最终会得到不同的 java 对象（就主键而言是相同的实体）。

# php - 在 php 代码中添加 javascript 和在 Javascript 中添加 php 代码

> ID：14728820
> 
> 赞同：0
> 
> 时间：2013-02-06T12:12:01.733
> 
> 标签：php, javascript

我试图在 PHP`if`语句中将信息从 PHP 变量获取到 JavaScript。我不确定出了什么问题。我试图转义 PHP 代码，然后我认为我不能在 PHP 代码中使用 PHP 代码标签。

**这是我的代码，但这不起作用：**

```
$user =& JFactory::getUser();
if ($user->guest) 
    echo '<script type="text/javascript">_gaq.push([\'_setCustomVar\',1,\'User_Status\',\'Guest\',1])</script>';
    echo '<script type="text/javascript">_gaq.push([\'_setCustomVar\',2,\'UserID\',\'GuestUser\',1])</script>';
} else {
    echo '<script type="text/javascript">_gaq.push([\'_setCustomVar\',1,\'User_Status\',\'LoggedIn\',1])</script>';
    echo '<script type="text/javascript">_gaq.push([\'_setCustomVar\',2,\'UserID\',\' "echo $user->id "\', 1])</script>';
} 
```

你能帮忙吗？
非常感谢
杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:16:53.890

应该

```
echo '<script type="text/javascript">_gaq.push([\'_setCustomVar\',2,\'UserID\',\''.$user->id.'\', 1])</script>'; 
```

我猜... echo 内部没有 echo 并通过连接字符串`.`

您还可以尝试以下方法：

```
<?php 
   $user =& JFactory::getUser();
   if ($user->guest) {
   ?>
      <script type="text/javascript">_gaq.push(['_setCustomVar',1,'User_Status','Guest',1])</script>
      <script type="text/javascript">_gaq.push(['_setCustomVar',2,'UserID','GuestUser',1])</script>
   <?php
   } else {
   ?>
      <script type="text/javascript">_gaq.push(['_setCustomVar',1,'User_Status','LoggedIn',1])</script>
      <script type="text/javascript">_gaq.push(['_setCustomVar',2,'UserID','<?=$user->id?>', 1])</script>   
   <?php
   }
   ?> 
```

这可能更容易阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:17:14.593

您不能像上次回显中那样访问 php 变量，以动态获取 user->id 使用它

```
echo '<script type="text/javascript">_gaq.push([\'_setCustomVar\',2,\'UserID\',\' '.$user->id.' "\', 1])</script>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:17:50.167

javascript代码在php中被视为字符串。只需将您的变量值与字符串连接起来，它就会起作用。

尝试这个：

```
echo '<script type="text/javascript">_gaq.push([\'_setCustomVar\',2,\'UserID\',\'' . $user->id . '\', 1])</script>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T12:18:11.850

代替：

```
echo '<script type="text/javascript">_gaq.push([\'_setCustomVar\',2,\'UserID\',\' "echo $user->id "\', 1])</script>'; 
```

尝试这个：

```
echo '<script type="text/javascript">_gaq.push([\'_setCustomVar\',2,\'UserID\',\' ' . $user->id . '\', 1])</script>'; 
```

不能嵌套`echo`的。相反，您必须使用字符串连接。

但是，为了提高效率，我建议这样做：

```
<?php
    $user =& JFactory::getUser();
    $userStatus = 'LoggedIn';  // Set default values first.
    $userId = $user->id;
    if ($user->guest) {
        $userStatus = 'Guest'; // Override defaults if the user is a guest.
        $userId = 'GuestUser';
    }
?>
<script type="text/javascript">_gaq.push(['_setCustomVar',1,'User_Status','<?=$userStatus  ?>',1])</script>
<script type="text/javascript">_gaq.push(['_setCustomVar',2,'UserID','<?=$userId ?>',1])</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T12:16:14.850

引号正在破坏您的字符串！在这种情况下，我通常会使用引号之间的字符串部分并将其放入变量中。例如 $setcustomvar="'_setCustomVar\'" 然后你将它添加到你的回显代码中，如下所示：

```
'<script type="text/javascript">_gaq.push([\'.$setcustomvar.' 
```

ETC..

就像其他人说的那样，您不能在字符串中放置回声。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-06T12:27:29.460

试试这个会起作用：

```
$user =& JFactory::getUser();
if ($user->guest) 
    echo '<script type="text/javascript">_gaq.push([\""_setCustomVar"\",1,\""User_Status"\",\""Guest"\",1])</script>';
    echo '<script type="text/javascript">_gaq.push([\""_setCustomVar"\",2,\""UserID"\",\""GuestUser"\",1])</script>';
} else {
    echo '<script type="text/javascript">_gaq.push([\""_setCustomVar"\",1,\""User_Status"\",\""LoggedIn"\",1])</script>';
    echo '<script type="text/javascript">_gaq.push([\""_setCustomVar"\",2,\""UserID"\",\"" $user->id "\", 1])</script>';
} 
```

您不需要在 php echo中提供**echo $user_id 。**只需**$user_id**即可

# wpf - 将格式设置为 DataGrid -WPF 中显示的数据

> ID：14728822
> 
> 赞同：1
> 
> 时间：2013-02-06T12:12:12.970
> 
> 标签：wpf, mvvm, datagrid, format

我想将格式设置为**xaml**中 DataGrid的列，这些列包含双数据。

到目前为止，我在代码中做到了如下：

```
string format = "{0:F3}";
double nExm= 4.24;
string newExm= string.Format(format, nExm); 
```

数据网格：

```
<DataGrid x:Name="DG" ItemsSource="{Binding List}" AutoGenerateColumns="False">
     <DataGrid.Columns>
          <DataGridTextColumn Header="{x:Static p:Resources.Exm}" Binding="{Binding Exm}"></DataGridTextColumn>
     </DataGrid.Columns>
 </DataGrid> 
```

newExm 它包含在包含绑定到 DataGrid 的列表的类 X 中

X类：

私有字符串 exm；

```
 public string Exm
    {
        get { return exm; }
        set
        {
            exm= value;
            NotifyPropertyChanged("Exm");
        }
    } 
```

有没有办法通过 XAML 设置格式？（我想将变量翻倍并在列上设置格式）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:19:06.960

您可以`StringFormat`在 XAML 中设置：

```
<TextBox Text="{Binding paymentAmount, StringFormat={0:C2}}"/> 
```

[这](http://matthiasshapiro.com/2010/05/28/silverlight-4-binding-and-stringformat-in-xaml/)是一篇很棒的文章

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:19:19.160

你可以使用`StringFormat`你`Binding`的格式化它：

*   [http://blogs.msdn.com/b/llobo/archive/2008/05/19/wpf-3-5-sp1-feature-stringformat.aspx](http://blogs.msdn.com/b/llobo/archive/2008/05/19/wpf-3-5-sp1-feature-stringformat.aspx)

`Binding="{Binding YourDoublePropertyHere, StringFormat=F3}"`

如果`StringFormat`不能满足您所有的格式化需求（在这种情况下应该足够了），或者您有更复杂的转换逻辑，那么您可以编写一个`Converter`来处理数据。

*   [http://wpftutorial.net/ValueConverters.html](http://wpftutorial.net/ValueConverters.html)

# android - 如何更改android中的锁屏壁纸？

> ID：14728824
> 
> 赞同：3
> 
> 时间：2013-02-06T12:12:31.317
> 
> 标签：android, wallpaper, lockscreen

我想更改android的**锁屏**壁纸。我能够通过更改主屏幕壁纸`WallpaperManager.setResource`

但无法设置**锁屏壁纸**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-02T18:13:24.843

这现在可以通过 API 级别**24**中更新的 Android API 实现。

您必须通过该方法提供目标**WallpaperManager.FLAG_LOCK**标志。`setResource`

```
int setResource (int resid, int which) 
```

请参阅更新的[文档](https://developer.android.com/reference/android/app/WallpaperManager.html#setResource(int,%20int))`WallpaperManager`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T04:15:53.553

**编辑：请参阅 Mikepenz 对 API 24+ 的回答。**

~~根据 CommonsWare（他一般都知道他在说什么）的说法，没有锁屏壁纸这样的东西，也没有办法通过 API 更改锁屏背景。~~

~~请参阅[https://stackoverflow.com/a/2654241/153225](https://stackoverflow.com/a/2654241/153225)。~~

* * *

## 回答 #3

> 赞同：-14
> 
> 时间：2013-02-06T12:24:50.787

1.  转到**主菜单**并搜索图标**壁纸**
2.  点击那个图标。您将获得三个选项：
    *   *画廊*
    **   动态壁纸*
    *   *墙纸*
3.  点击您要从中选择新壁纸的来源。选择**图库**会将您带到已保存的图像和照片。
4.  确定新壁纸后，点击 **设置壁纸** 按钮。

# php - 应用程序内的 Heroku 命令

> ID：14728825
> 
> 赞同：1
> 
> 时间：2013-02-06T12:12:51.667
> 
> 标签：php, heroku

我在 Heroku 上有一个使用 PHP 和 PostgreSQL 的应用程序。现在我想定期备份我的数据库，把它放在服务器上的一个文件夹中，或者记录它的 S3 url 并下载它。

*   我一直在研究这个话题。似乎最好的方法是使用我已经拥有并且可以在本地命令行上使用的 pgbackups 插件，例如：`heroku pgbackups:url --app=APP_NAME`

*   我想自动化这个过程，让我们说在一个 cron 工作中。我看到我们在 Heroku 上有工作人员，但我从未使用过他们，这仍然是一个开发环境。免费计划没有工人。此外，我的应用程序并不需要后台工作人员。我不想只为自动数据库备份购买工人测功机。我应该走哪条路？

*   如果我可以在 Heroku 上创建 PHP cron 作业，那么我需要知道：如何在 PHP 中运行 Heroku 命令？我尝试了 exec 和 passthru，但它们似乎都不能在 Heroku 服务器上运行。在我的本地主机上，上述命令 ( `heroku pgbackups`) 运行良好，提供安装在本地服务器上的 Heroku 工具带。

*   对于 Ruby，他们有用于服务器端命令的[https://github.com/heroku/工具包。](https://github.com/heroku/)但是我在寻找 PHP 分支时没有运气......

总体目的是进行数据库备份并将其存储在服务器上并下载。（即使 Heroku 自己进行备份，我们也希望看到它在我们手中 :)

我怎样才能让它发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:52:21.853

最好的办法可能是在备份服务器上运行一个 cron 作业`heroku pgbackups:url`并获取最新 pgbackup 的 URL，然后使用`curl`. 像这样的东西：

```
curl $(heroku pgbackups:url) > latest_backup 
```

有关更多信息`heroku pgbackups:url`，请参阅： [https ://devcenter.heroku.com/articles/pgbackups#downloading-a-backup](https://devcenter.heroku.com/articles/pgbackups#downloading-a-backup)

用工人测功机做任何事情都没有真正意义，因为除非您正在下载并重新上传它或其他东西，否则这不会真正帮助您将备份备份到备份服务器。只需在备份服务器上运行一次 cron 作业下载一次就更直接了。

# java - JSP请求中的属性变为0

> ID：14728826
> 
> 赞同：5
> 
> 时间：2013-02-06T12:12:53.513
> 
> 标签：java, jsp, servlets, request, tomcat6

我试图通过 Java HttpServlet 向 JSP 发送两个属性。问题是它们在我的 JSP 文件中都显示为 0（数字）。

这是我的 RegisterDeveloper.java 文件中的 doGet 方法：

```
public void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        // Fill up default attributes for the template
        req.setAttribute("validation-error", false);
        req.setAttribute("validation-error-message", "");

        // Redirect to register page
        req.getRequestDispatcher("/register.jsp").forward(req, resp);
} 
```

非常简单，当我单步执行时，属性被添加到请求中，并且浏览器被重定向到 /register.jsp 页面。

这是 register.jsp 页面的问题部分：

```
<c:if test="${validation-error}">
    <div id="validationError">
        <span id="errorText">
            ${validation-error-message}
        </span>
    </div>
</c:if> 
```

由于某种原因，我添加到请求中的属性都变成了“0”。

浏览器中显示的错误是：

```
HTTP Status 500 - javax.el.ELException: Cannot convert 0 of type class java.lang.Long to class java.lang.Boolean 
```

我的 web.xml 以防它是相关的：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">

    <display-name>RServer</display-name>
    <welcome-file-list>
        <welcome-file>homepage.html</welcome-file>
    </welcome-file-list>

    <servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>*.css</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>RegisterDeveloper</servlet-name>
        <servlet-class>com.steven.RegisterDeveloper</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>RegisterDeveloper</servlet-name>
        <url-pattern>/register</url-pattern>
    </servlet-mapping>

</web-app> 
```

我正在使用Tomcat6。这一切看起来都非常简单，而且我在其他页面上也有非常相似的代码，所以我真的很难看到我错过了什么！

任何帮助，非常感谢。

我的 /WEB-INF/lib/ 文件夹中有 javax.servlet.jsp.jstl-1.2.1.jar 和 javax.servlet.jsp.jstl-api-1.2.1.jar ..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T12:28:23.870

从[我用谷歌搜索的规范](http://jsp.java.net/spec/jsp-2_1-fr-spec-el.pdf)

> 标识符被限制为 Java 标识符 - 例如，no -、no / 等。

`validation-error`不是 Java 标识符，而是`validation` 和的减法运算`error`。由于您尚未定义这些，因此它们是`null`并且这适用：

> 1.7.1 二元运算符 - A {+,-,*} B ■ 如果 A 和 B 为空，则返回 (Long)0

所以我猜测试变成了`if( (Long)0 == true )`.

尝试`req.setAttribute("validationError", false);` `${validationError}`

# css-transitions - CSS3：链接悬停上的发光背景（不是文本发光）

> ID：14728832
> 
> 赞同：6
> 
> 时间：2013-02-06T12:13:38.827
> 
> 标签：css-transitions, css, glow

我有一个菜单，包含几个链接。当我将它们悬停时，我希望这些链接在背景中具有发光效果。

我几乎已经在链接上使用 css 过渡、框阴影和较浅的背景颜色。

问题是过渡效果会影响 box-shadow，因此当过渡开始时，链接没有 box-shadow，这给了它们一个正方形的背景颜色。过渡结束后，发光的背景看起来很好。

请参阅我的 jsFiddle：http: [//jsfiddle.net/xCJ46/](http://jsfiddle.net/xCJ46/)。

非常感谢您对此提供的帮助。

这是我的 CSS 的摘录：

```
<html><style>
div a:hover {
    background: #527fa9;

    -webkit-box-shadow: inset 0 0 30px 15px #49628a;
    -moz-box-shadow: inset 0 0 30px 15px #49628a;
    box-shadow: inset 0 0 30px 15px #49628a;

    -webkit-transition: 500ms linear 0s;
    -moz-transition: 500ms linear 0s;
    -o-transition: 500ms linear 0s;
    transition: 500ms linear 0s;
}
</style></html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T12:38:55.463

将 box-shadow 添加到链接的属性（不是悬停）。

```
div a { box-shadow: inset 0 0 30px 15px #49628a; } 
```

# php - strtotime('First Monday ..') 当它是该月的第一天时返回错误的日期

> ID：14728833
> 
> 赞同：2
> 
> 时间：2013-02-06T12:13:40.077
> 
> 标签：php

```
 echo date('Y-m-d', strtotime('First Monday '.date('F o', strtotime("-4 months"))); 
```

上面的代码返回 2012-10-08，这是不正确的 - 2012 年 10 月的第一个星期一应该返回 2012-10-01。

手册中的变更日志（[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)）指定以下内容：

```
In PHP 5 prior to 5.2.7, requesting a given occurrence of a given weekday in a 
month where that weekday was the first day of the month would incorrectly add
one week to the returned timestamp.

This has been corrected in 5.2.7 and later versions. 
```

似乎很清楚这是导致错误返回日期的原因，但是我使用的是 PHP 版本 5.4.7（在 localhost 上运行 xamp）！

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T12:17:23.577

`of`尝试检索该月的第一天时缺少关键字

```
echo date('Y-m-d', strtotime('First Monday of '.date('F o', strtotime("-4 months"))); 
```

我在这个[错误报告中找到了信息](https://bugs.php.net/bug.php?id=53539)

我当前的版本是 PHP 5.4.4，以防它仍然不适合你

# netbeans - JSF 中的 Kendo UI JSP 标签库

> ID：14728838
> 
> 赞同：1
> 
> 时间：2013-02-06T12:13:59.433
> 
> 标签：netbeans, jsf-2, kendo-ui

是否可以在 JSF 文件中插入 Kendo UI JSP 标记库（通常是所有 JSP 标记库）？如果是，如何？

特别是我使用NetBeans，我在我的项目中添加了Kendo UI库，但是我不明白如何将标签集成到我的jsf文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:21:34.413

JSP自 JSF2（2009 年 12 月）起**已弃用，并由**[Facelets](https://stackoverflow.com/tags/facelets/info)接替。JSP 标记库在 Facelets 中根本不起作用。你基本上需要一个与 Facelets 兼容的标签库，例如 PrimeFaces、RichFaces、ICEfaces、OpenFaces、Tomahawk、OmniFaces 等。

您可以像使用 JSF 1.x 一样在 JSF2 中继续使用旧版 JSP，但是您将无法受益于新的 JSF2 标记/功能，例如`<f:ajax>`、`<h:head>`、`<h:outputScript>`等，更不用说通过 Facelets`<ui:xxx>`标记使用模板了。

Kendo UI 就可用的基于 Java 的标记库而言，显然仍停留在古老的 J2EE 时代，并且仍要赶上新的 Java EE 时代。

# java - Eclipse：edittext 更改了侦听器，edittext 长度为微调器项

> ID：14728840
> 
> 赞同：0
> 
> 时间：2013-02-06T12:14:01.773
> 
> 标签：java, android, android-edittext, listener

我有这个代码：

```
public class SentSMSActivity extends Activity {

    private Button btnSend;
    private EditText etPlain, etCipher, etDest, key2;
    private String plaintext, tempCipher = null, ciphertext = "";
    private int keyRF, keyCaesar;
    private CheckBox cbEncrypt;
    private String dest, msgSend;
    private Spinner sp;
    private String numbers[];
    private ArrayAdapter<String> adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sentsms_activity);
        btnSend = (Button) findViewById(R.id.btnSent);
        etPlain = (EditText) findViewById(R.id.etPlainSent);
        etDest = (EditText) findViewById(R.id.etDestSent);
        key2 = (EditText) findViewById(R.id.etKey2Sent);
        cbEncrypt = (CheckBox) findViewById(R.id.cbEnc);
        sp = (Spinner) findViewById(R.id.spKey1);
        //      String numbers[] = { "0", "1", "2", "3", "4", "5", "6", "7", "8", "9",
        //              "10", "11", "12", "13", "14", "15", "16", "17", "18", "19",
        //              "20", "21", "22", "23", "24", "25" };

        key2.setEnabled(false);
        keyRF = 2;

        final TextWatcher textWatcher = new TextWatcher() {

            @Override
            public void beforeTextChanged(CharSequence charSequence, int i,
                    int i1, int i2) {
            }

            @Override
            public void onTextChanged(CharSequence charSequence, int i, int i1,
                    int i2) {
            }

            @Override
            public void afterTextChanged(Editable editable) {

                for (int k = 0; k < etPlain.length() - 1; k++) {
                    numbers[k] = String.valueOf(k);
                }
            }
        };

        //third, we must add the textWatcher to our EditText

        sp.setClickable(false);
        cbEncrypt
                .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked) {
                        if (cbEncrypt.isChecked()) {
                            key2.setEnabled(true);
                            sp.setClickable(true);
                            etPlain.addTextChangedListener(textWatcher);
                            adapter = new ArrayAdapter<String>(
                                    SentSMSActivity.this,
                                    android.R.layout.simple_spinner_item,
                                    numbers);
                            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                            sp.setAdapter(adapter);
                        } else {
                            key2.setText("");
                            key2.setEnabled(false);
                            sp.setClickable(false);
                        }
                    }
                });
    }
} 
```

它应该用`edittext`字符串中的数字制作一个微调器，但是在运行时它会给出如下错误：

```
02-06 20:02:21.205: E/AndroidRuntime(513): FATAL EXCEPTION: main
02-06 20:02:21.205: E/AndroidRuntime(513): java.lang.NullPointerException
02-06 20:02:21.205: E/AndroidRuntime(513):  at java.util.Arrays$ArrayList.<init>(Arrays.java:47)
02-06 20:02:21.205: E/AndroidRuntime(513):  at java.util.Arrays.asList(Arrays.java:169)
02-06 20:02:21.205: E/AndroidRuntime(513):  at android.widget.ArrayAdapter.<init>(ArrayAdapter.java:125)
02-06 20:02:21.205: E/AndroidRuntime(513):  at com.hery.androidkripto.SentSMSActivity$2.onCheckedChanged(SentSMSActivity.java:97)
02-06 20:02:21.205: E/AndroidRuntime(513):  at android.widget.CompoundButton.setChecked(CompoundButton.java:124)
02-06 20:02:21.205: E/AndroidRuntime(513):  at android.widget.CompoundButton.toggle(CompoundButton.java:86)
02-06 20:02:21.205: E/AndroidRuntime(513):  at android.widget.CompoundButton.performClick(CompoundButton.java:98)
02-06 20:02:21.205: E/AndroidRuntime(513):  at android.view.View$PerformClick.run(View.java:9080)
02-06 20:02:21.205: E/AndroidRuntime(513):  at android.os.Handler.handleCallback(Handler.java:587)
02-06 20:02:21.205: E/AndroidRuntime(513):  at android.os.Handler.dispatchMessage(Handler.java:92)
02-06 20:02:21.205: E/AndroidRuntime(513):  at android.os.Looper.loop(Looper.java:123)
02-06 20:02:21.205: E/AndroidRuntime(513):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-06 20:02:21.205: E/AndroidRuntime(513):  at java.lang.reflect.Method.invokeNative(Native Method)
02-06 20:02:21.205: E/AndroidRuntime(513):  at java.lang.reflect.Method.invoke(Method.java:507)
02-06 20:02:21.205: E/AndroidRuntime(513):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-06 20:02:21.205: E/AndroidRuntime(513):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-06 20:02:21.205: E/AndroidRuntime(513):  at dalvik.system.NativeStart.main(Native Method) 
```

我对这个错误很困惑，已经尝试解决了3个小时没有任何进展，所以我希望一些成员能给我一个解决方案。

***问题：带有来自edittext字符串长度的数字项的微调器***

**感谢用户 vetal-lebed 回答：**

```
public class MyActivity extends Activity {
private ArrayList <String> list = new ArrayList<String>();
private EditText et;
private Spinner spinner;
private ArrayAdapter<String> adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    spinner = (Spinner)findViewById(R.id.spinner);
    et = (EditText)findViewById(R.id.et);
    et.addTextChangedListener(watcher);
    adapter = new ArrayAdapter<String>(MyActivity.this,android.R.layout.simple_spinner_item, list);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);
}

private TextWatcher watcher = new TextWatcher() {
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {}
    public void onTextChanged(CharSequence s, int start, int before, int count) {}

    public void afterTextChanged(Editable s) {
        for (int i = 0; i < s.length(); i ++){
            list.add(String.valueOf(s.charAt(i)));
            adapter.notifyDataSetChanged();
        }
    }
}; 
```

}

并感谢其他成员

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:19:24.983

因为您没有为数组“数字”分配内存。您应该执行以下操作：

```
numbers = new String[0]; 
```

在您的 afterTextChanged() 方法中，您应该创建具有所需长度的新数组（您可以从可编辑中获取它）。然后您可以初始化数组的所有元素并从适配器调用 notifyDataSetChanged()。

**UPD**

```
public class MyActivity extends Activity {
private ArrayList <String> list = new ArrayList<String>();
private EditText et;
private Spinner spinner;
private ArrayAdapter<String> adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    spinner = (Spinner)findViewById(R.id.spinner);
    et = (EditText)findViewById(R.id.et);
    et.addTextChangedListener(watcher);
    adapter = new ArrayAdapter<String>(MyActivity.this,android.R.layout.simple_spinner_item, list);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);
}

private TextWatcher watcher = new TextWatcher() {
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {}
    public void onTextChanged(CharSequence s, int start, int before, int count) {}

    public void afterTextChanged(Editable s) {
        for (int i = 0; i < s.length(); i ++){
            list.add(String.valueOf(s.charAt(i)));
            adapter.notifyDataSetChanged();
        }
    }
}; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:22:39.553

看起来数字在调用 onCheckedChange() 之前尚未初始化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:28:16.817

初始化数组时使用以下代码

ArrayList lst = new ArrayList();

# mysql - 用于为动态创建的表单保存表单数据的 DB 结构

> ID：14728842
> 
> 赞同：-1
> 
> 时间：2013-02-06T12:14:03.327
> 
> 标签：mysql, mongodb, database-design

我正在考虑一个用例，其中应用程序的每个用户都可以创建 N 个具有不同数据类型的不同表单字段的表单。然后，每个用户都可以在他们各自的表单中接收表单数据。然后可以更新、编辑、搜索、排序等数据。

我想知道，如何在 MySQL 中为此设计数据库架构。

我最初的方法是将表单结构以序列化形式保存在一个表中，其中 form_id 作为主键。另一个表，数据应包含以下列的记录：form_id，record_id，order，value。在这里， order 将是表示字段在表单结构中的位置的数字。value 列应具有该字段的值。这种方法使我有 10 行（对于具有 10 个字段的表单）用于 1 组记录。另外，我不认为可以编写这样的查询来搜索特定表单的记录。

我确实想过在这个用例中使用 mongodb，其中表单结构应存储在一个数组中，并且在该数组中，应存储该特定表单的所有记录。我从来没有使用过 mongodb，但我猜想 mongodb 对大小有某种限制，如果我将文档存储在一个文档中。那么，使用 MySQL（或任何其他适合此类用例的数据库）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:22:30.357

每个 mongoDB 文档的大小限制为 16mb。如果您需要每个文档更大，那么您需要适当地调整您的设计。[MongoDb](http://docs.mongodb.org/manual/applications/gridfs/)还包含允许您将较大的文件分成块的 GridFS。

在您的示例中，您可以将表单字段作为数组存储在 mongoDB 中，但也可以将它们存储为嵌入式文档。无论您选择哪种方式，[您在 mongoDB 中的模式设计都](http://docs.mongodb.org/manual/core/data-modeling/)需要匹配您的数据访问模式。

通过您的应用程序向 mongoDB 文档添加新的键：值对很容易。伪代码将是：

```
if user adds form field
db.collection.update({'id':1},{$addToSet {'newField':'value'}}) 
```

我知道您的问题是关于 MySQL 结构的，但我认为值得展示它如何在 mongoDB 中工作（显然需要适应您选择的语言）。

# c# - 如何定义将被 wcf 忽略的映射代码优先成员

> ID：14728843
> 
> 赞同：0
> 
> 时间：2013-02-06T12:14:19.097
> 
> 标签：c#, .net, wcf, entity-framework, ef-code-first

我有一个存储在数据库中的 EF 实体（实体中的每个成员都保存在数据库中）。通过 WCF 传递实体时，我想忽略一些成员。

具体来说，我遇到的问题是一些成员描述了与其他表的关系，导致 WCF 要么传递大量不必要的数据，要么失败。

有没有办法将某个成员定义为 EF 中的映射成员，但 NotMapped 用于 WCF？

我现在的解决方案是定义一个 EF 实体的浅等价物，并通过 WCF 传递它。我不喜欢这样，因为我几乎要复制我的大部分数据结构。有没有更好的办法？

顺便说一句 - 通过将成员声明为“NotMapped”“DataMember”，我看到另一个方向是可能的（？）。我正在寻找相反的声明（成员属于 EF，被 WCF 忽略）

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:19:26.873

您可以使用[[IgnoreDataMember]](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.ignoredatamemberattribute.aspx)属性。

例子：

```
[DataContract]
public class Foo
{
    [DataMember]
    public string NonIgnoredProperty { get; set; }

    [IgnoreDataMember]
    public string IgnoredProperty { get; set; }

    // ....
} 
```

# c# - 网格不会在横向扩展

> ID：14728847
> 
> 赞同：0
> 
> 时间：2013-02-06T12:14:37.443
> 
> 标签：c#, .net, silverlight, windows-phone-7

我的页面中有这个网格，我有一个问题，在横向模式下它会旋转并且文本框和按钮卡在中心而不是拉伸，知道如何解决它吗？

```
 <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="0,0,0,0" >
        <StackPanel Orientation="Vertical" Margin="0,0,0,0" Width="480">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Center">
                <TextBox Name="searchTextBox" Height="72" TextWrapping="Wrap" Text="" VerticalAlignment="Top" Margin="10,0,0,0" TextChanged="SearchTextDidChange" HorizontalContentAlignment="Left" VerticalContentAlignment="Top" Width="349" HorizontalAlignment="Left"/>
                <Button Content="Search" Margin="0,-3,0,0" VerticalAlignment="Top" Height="77" Click="DidPressSearchButton" HorizontalContentAlignment="Right" VerticalContentAlignment="Top" Padding="14,5,10,6" HorizontalAlignment="Right"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:26:44.583

这是因为您使用stackpanel，只使用网格而不是像这样设置列定义！

```
 <Grid x:Name="ContentPanel"
          Grid.Row="1"
          Margin="0,0,0,0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition Width="130" />
        </Grid.ColumnDefinitions>
                <TextBox Name="searchTextBox"
                         Grid.Column="0"
                         Height="72"
                         TextWrapping="Wrap"
                         Text=""
                         VerticalAlignment="Top"
                         Margin="10,0,0,0"
                         TextChanged="SearchTextDidChange"
                         HorizontalContentAlignment="Left"
                         VerticalContentAlignment="Top"
                          />
                <Button Content="Search"
                        Grid.Column="1"
                        Margin="0,-3,0,0"
                        VerticalAlignment="Top"
                        Height="77"
                        Click="DidPressSearchButton"
                        HorizontalContentAlignment="Right"
                        VerticalContentAlignment="Top"
                        Padding="14,5,10,6"
                        HorizontalAlignment="Right" />
    </Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:28:46.603

首先从第一个**StackPanel**中删除 Width="480" 属性。**还要从TextBox**元素中删除 Width="349" 属性。

这应该允许元素在横向模式下拉伸。

# rtc - GHS MULTI 与 Rational Team Concert 的集成

> ID：14728851
> 
> 赞同：1
> 
> 时间：2013-02-06T12:14:47.733
> 
> 标签：rtc, greenhills

我计划使用 IBM RTC 进行配置管理，以便在 GHS MULTI 环境中工作。我们正在从 ClearCase 迁移到 RTC。这种集成有现成的解决方案吗？我们需要一些额外的工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:04:06.463

RTC 和 GHS 之间似乎没有任何可用的本地集成。
我能找到的唯一痕迹是在[这个线程](https://jazz.net/forum/questions/95236/subject-jazz-source-conrol-integration-with-greenhills-multi-ide)中：

> 该工具支持什么单片机接口？
> 在 Windows 上使用 4.x，您可以尝试**[MSSCC](https://jazz.net/library/article/1107)**或 shell（如果它不支持 MSSCC 或集成到 Eclipse 或 Visual Studio 中）。如果该工具支持，您可以尝试使用 SCM 命令行来创建界面。

从[这个线程](https://jazz.net/forum/questions/91726/visual-source-safe-api-available-with-rtc-software)：

> MSSCC 由 Microsoft 定义。MSCC 的任何消费者都必须符合该接口。
> Jazz MSCCI 实现接口的服务器端。
> 这个想法是支持此接口的工具可以使用它并针对 Jazz SCM 工作。
> 由于界面非常古老（我记得大约是 1995 年），它得到了工具的广泛支持

（文档：[wiki 文章](https://jazz.net/search_results.jsp?q=MSScci#page=0&type=type=Document-WikiPage&q=MSScci)、[论坛](https://jazz.net/search_results.jsp?q=MSScci#page=0&type=type=Document-ForumThread&q=MSScci)：您需要一个 jazz.net 帐户才能查看结果）

# javascript - $.ajax 不在 ASP.Net 中调用 WebService

> ID：14728856
> 
> 赞同：0
> 
> 时间：2013-02-06T12:14:56.223
> 
> 标签：javascript, jquery, asp.net, web-services

我正在尝试通过 jQuery 调用 web 服务，但它没有显示任何结果或错误。我的代码是：

```
<script type="text/javascript" language="javascript">
    var empId = '<%= Session["UserName"] %>';
</script>
<script type="text/javascript"> 
    alert(empId);    
    $.ajax({ 
        type: "POST", 
        dataType: "json", 
        contentType: "application/json", 
        url: "ServiceGetUser.asmx/GetEmployee", 
        data: "{'employeeId': '" + empId + "'}", 
        success: function (data) { 
            alert("Employee name: " + data.d); 
        }, 
        error: function () { 
            alert("Error calling the web service.");  
        } 
    }); 
</script> 
```

我`session`通过成功打印它获得一个值，然后将其传递给 web 服务并返回打印名称`Jane Developer`，如我的 web 服务代码所示：

```
using System;
using System.Collections;
using System.ComponentModel;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.Xml.Linq;

namespace MentorMentee
{
    /// <summary>
    /// Summary description for ServiceGetUser
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    [System.Web.Script.Services.ScriptService]
    public class ServiceGetUser : System.Web.Services.WebService
    {

        [WebMethod]
        public string GetEmployee(string employeeId)
        {
            return "Jane Developer";
        }
    }
} 
```

出了什么问题希望得到你的建议

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:21:11.447

你可以把它放在`doc ready block`：

```
$(window).load(function(){
   $.ajax({ 
      type: "POST", 
      dataType: "json", 
      contentType: "application/json", 
      url: "ServiceGetUser.asmx/GetEmployee", 
      data: {'employeeId': '<%= Session["UserName"] %>'}, //<-- try it
      success: function (data) { 
          alert("Employee name: " + data.d); 
      }, 
      error: function () { 
          alert("Error calling the web service.");  
      } 
    });
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:21:28.913

dataType 以 json 形式给出。这意味着 jquery 将从服务器收到的响应解析为 json。但是您在服务中返回字符串。所以 jQuery 会抛出解析错误。

尝试附加`complete(jqXHR jqXHR, String textStatus)`回调。并查看 textStatus

尝试使用

```
<script type="text/javascript" language="javascript">
    var empId = '<%= Session["UserName"] %>';
</script>
<script type="text/javascript"> 
    alert(empId);    
    $.ajax({ 
        type: "POST", 
        dataType: "json", 
        contentType: "application/json", 
        url: "ServiceGetUser.asmx/GetEmployee", 
        data: "{'employeeId': '" + empId + "'}", 
        success: function (data) { 
            alert("Employee name: " + data.d); 
        }, 
        error: function () { 
            alert("Error calling the web service.");  
        } ,
        complete: function(xhr, textStatus) {
            alert(textStatus);
        }
    }); 
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:36:45.613

尝试这个：

```
<script type="text/javascript" language="javascript">
    var empId = '<%= Session["UserName"] %>';
</script>
<script type="text/javascript"> 
    alert(empId);    
    $.ajax({ 
        type: "POST", 
        dataType: "json", 
        contentType: "application/json; charset=utf-8", 
        url: "ServiceGetUser.asmx/GetEmployee", 
        data: '{employeeId: "' + $("#<%=employeeId.ClientID%>")[0].value + '" }',
        success: function (data) { 
            alert("Employee name: " + data.d); 
        }, 
        error: function () { 
            alert("Error calling the web service.");  
        } 
    }); 
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T12:37:15.113

首先尝试像这样对你的json进行字符串化， `alert(JSON.stringify(data))`然后也许你可以找到你的错误..

# ruby-on-rails - rails 3.2中的条件has_many关系

> ID：14728859
> 
> 赞同：1
> 
> 时间：2013-02-06T12:15:02.630
> 
> 标签：ruby-on-rails, conditional, has-many, relation

我正在使用自己的唯一密钥从第三方获取数据。

Level1, data_provider_id Level2, level_1_id, data_provider_id Level3,level_2_id, data_provider_id

level1.rb 的关系

```
 has_many :level2s, :primary_key => :data_provider_id 
  has_many :level3s, :through => :level2s 
```

level2.rb 的关系

```
 has_many :level3s, :primary_key => :data_provider_id 
```

如果我想创建自己的关卡，我必须分配一个 data_provider_id 才能使关系正常工作。我可以采用负数或我知道第 3 方永远不会使用的范围，但我不喜欢这种方法。当 data_provider_id 为 nil 时，有没有办法让关系像默认方式一样工作？

我试过了：

```
 has_many :level2s, :primary_key => (:data_provider_id == nil ? :id : :data_provider_id) 
```

但这不起作用。

提前致谢

# jquery - 如何获取每个国家/地区名称的 Google 地图

> ID：14728863
> 
> 赞同：-3
> 
> 时间：2013-02-06T12:15:09.463
> 
> 标签：jquery, google-maps, jquery-plugins, google-maps-api-3, google-maps-markers

我正在从数据库中检索国家名称，我需要在每个页面中出现自己的国家名称。对不起，这是第一次处理谷歌地图我看到很多插件但最终没有..我想将国家名称发送到谷歌地图，我收到这个国家的地图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:20:00.843

下载一个数据集，如下所示：http: [//blog.stavi.sh/country-list-iso-3166-codes-latitude-longitud](http://blog.stavi.sh/country-list-iso-3166-codes-latitude-longitud)

这将为您提供每个国家/地区的大致位置。

接下来只需为每个国家构建一张地图，并将其集中在上述数据中给出的点上。

# iphone - 具有双界面和 AppStore 的 iPhone 应用程序

> ID：14728871
> 
> 赞同：0
> 
> 时间：2013-02-06T12:15:26.617
> 
> 标签：iphone, appstore-approval

我对 iPhone 上具有双界面的应用程序有疑问（在设置中选择了不同的界面）。默认界面对于标准苹果用户来说可能很漂亮，第二个界面可以很实用。是否可以在 AppStore 上提交这样的应用程序？

——
问候
亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:21:32.873

为什么不？:) 如果您不使用任何违反指南的内容，则可以提交。

# php - 检查 childproduct 属性文本是否为空

> ID：14728872
> 
> 赞同：0
> 
> 时间：2013-02-06T12:15:47.807
> 
> 标签：php, magento

对于空值，我有点困惑获取值。

```
if (empty($childProducts[$productId]["productLabels"] = $product->getAttributeText('preorderdate'))) { 
            echo 'Empty';} 
```

错误：解析错误：语法错误，意外 '='，期待 ')' 在

谁能告诉我这里有什么问题？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:34:10.617

好吧，您将表达式传递给`empty()`.

> 笔记：
> 
> 在 PHP 5.5 之前，empty() 只支持变量；其他任何事情都会导致解析错误。换句话说，以下内容将不起作用：empty(trim($name))。相反，使用 trim($name) == false。

来源：[PHP`empty()`](http://php.net/manual/en/function.empty.php)

假设您要分配该值，然后重写您的代码：

```
// Assign the value outside the condition
$childProducts[$productId]["productLabels"] = $product->getAttributeText('preorderdate');

// empty expects a variable
if (empty($childProducts[$productId]["productLabels"])) {
  echo 'Empty';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:35:51.750

```
$childProducts[$productId]["productLabels"] = $product->getAttributeText('preorderdate');
if (empty($childProducts[$productId]["productLabels"])) { 
      echo 'Empty';
} 
```

如果未设置，默认情况下`$product->getAttributeText('preorderdate');`应返回 false

```
if ($childProducts[$productId]["productLabels"] = $product->getAttributeText('preorderdate');) { 
      echo 'Empty';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:25:43.897

引用[PHP empty()](http://php.net/manual/en/function.empty.php)：

在 PHP 5.5 之前，empty() 只支持变量；其他任何事情都会导致解析错误。换句话说，以下内容将不起作用：empty(trim($name))。相反，使用 trim($name) == false。

你的 PHP 版本是 5.5 吗？

# windows - 如何解释批处理字符串中的变量？

> ID：14728873
> 
> 赞同：2
> 
> 时间：2013-02-06T12:15:53.113
> 
> 标签：windows, shell, scripting, batch-file, dos

我在包含变量的字符串中有问题
我在注册表中读取了一个键，如下所示：

```
call:ReadReg "HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders" "Desktop"
echo %RegValue%

:ReadReg
FOR /F "usebackq tokens=1-3" %%A IN (`REG QUERY "%~1" /v "%~2" 2^>nul`) DO (
    set RegName=%%A
    set RegType=%%B
    set RegValue=%%C
)
goto:eof 
```

但 RegValue 中返回的值是：`%USERPROFILE%\Desktop` 而不是：`C:\Documents and Settings\username\Desktop`

ECHO 线显示：

```
C:\Documents and Settings\alopez>echo %USERPROFILE%\Bureau
%USERPROFILE%\Bureau 
```

我想将注册表值转换成一个好的路径

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T14:28:06.380

替换`set RegValue=%%C`为`call set RegValue=%%C`This会导致变量膨胀两次；一次用于调用命令，然后再次用于设置命令。运行此示例 .bat 脚本以查看它的运行情况。

```
@echo off

set x=%%Path%%
echo %x%
echo.
call echo %x%
call set x=%x%
echo.
echo %x%
pause >nul 
```

# java - DD和dd的Java日期格式

> ID：14728875
> 
> 赞同：0
> 
> 时间：2013-02-06T12:16:09.310
> 
> 标签：java

这种格式有什么问题，注释格式抛出异常，请帮助我使用java中的这个dd和DD来获取日期格式。

```
 SimpleDateFormat dformat = new SimpleDateFormat("yyyyddmm");
//  SimpleDateFormat dformat = new SimpleDateFormat("yyyyDDMM");
     dformat.setLenient(false);
     dformat.parse("20121010"); 
```

**异常：** 错误：无法解析的日期：“20121010”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:18:27.503

它区分大小写。

D 代表一年中的一天，d 代表一个月中的一天。

[http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:19:26.870

`D`（大写）用于表示`DAY IN YEAR`喜欢`123`，`300`等。

而`d`(small-lowercase) 用于表示`DAY OF MONTH`like `12`, `25`, 这里的值 like`36`将无效。

[Javadoc 解释了您可以在 SimpleDateFormat 中使用的所有字母](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:22:03.043

`DD`表示“一年中的一天”，因此您试图同时解析具有第 10 个月（10 月）和第 10 天（绝对是 1 月）的日期，这是不可能的。 `"20121001"`将被很好地解析（第 1 个月（一月）和一年中的第 10 天）。

# c++ - NetApiBufferFree 返回 ERROR_INVALID_PARAMETER（错误代码 87）

> ID：14728883
> 
> 赞同：0
> 
> 时间：2013-02-06T12:16:40.353
> 
> 标签：c++, c, winapi, memory-leaks, free

我一直在开发一个使用 winapi 获取管理员组成员的应用程序。为此，我使用了 NetLocalGroupGetMembers 方法。我的问题是当我尝试释放缓冲区的堆空间时，我从 NetApiBufferFree 方法得到 ERROR_INVALID_PARAMETER （错误代码 87）。我拥有该应用程序的管理员权限。

这是代码：

```
#include <stdio.h>
#include <windows.h>
#include <process.h>
#include <lm.h>
#include <time.h>
#include <assert.h>

#define SLEEP_TIME 2000
#define OS_GROUP_NAME L"administrators"

void createServiceThread();
DWORD WINAPI mainServiceThread( LPVOID lpParam );
char** getUsersByLocalGroup();
void freeNetApiBuffer(LPVOID buffer);

int localGroupUserCount;

int WriteToLog(char* str)
{
    printf("%s\n", str);
    return 0;
}

int main() 
{ 
    createServiceThread();  
}

void createServiceThread(){
    WriteToLog("Application Started...");
    while(TRUE){
        mainServiceThread(NULL);

        Sleep(SLEEP_TIME);
    }
    WriteToLog("Application Closed...");
}

//-------------------------------------------
// A function that represents Main Service Thread
//-------------------------------------------
DWORD WINAPI mainServiceThread( LPVOID lpParam ) 
{
    time_t startTime;
    time (&startTime);
    char startTimeText[30];
    sprintf(startTimeText, "Service Loop Started %s", ctime(&startTime));
    WriteToLog(startTimeText);
    localGroupUserCount = 0;

    char** localGroupUsers = getUsersByLocalGroup();

    WriteToLog("User not found...");

    time_t endTime;
    time (&endTime);
    char endTimeText[30];
    sprintf(endTimeText, "Service Loop Ended %s", ctime(&endTime));
    WriteToLog(endTimeText);
}

char** getUsersByLocalGroup(){
    WriteToLog("getUsersByLocalGroup started");
    LOCALGROUP_MEMBERS_INFO_3 *pBuf;
    DWORD dwLevel = 3;
    DWORD dwPrefMaxLen = MAX_PREFERRED_LENGTH;
    DWORD dwEntriesRead = 0;
    DWORD dwTotalEntries = 0;
    DWORD dwResumeHandle = 0;
    NET_API_STATUS nStatus;

    WriteToLog("Call NetLocalGroupGetMembers"); 
    nStatus = NetLocalGroupGetMembers(
        NULL,
        OS_GROUP_NAME,
        dwLevel,
        (LPBYTE *) &pBuf,
        dwPrefMaxLen,
        &dwEntriesRead,
        &dwTotalEntries,
        NULL
    );  
//  nStatus = ERROR_SUCCESS;
    WriteToLog("NetLocalGroupGetMembers called");
    //
    // If the call succeeds,
    //
    if (nStatus == ERROR_SUCCESS  || nStatus == ERROR_MORE_DATA)
    {
        DWORD i;
        DWORD dwTotalCount = 0;
        WriteToLog("Correct Status");
        if (pBuf != NULL)
        {
            //
            // Loop through the entries.
            //
            for (i = 0; (i < dwEntriesRead); i++)
            {
                assert(pBuf != NULL);

                if (pBuf == NULL)
                {
                    char bufError[] = "";
                    sprintf(bufError, "An access violation has occurred %d", stderr);
                    WriteToLog(bufError);
                    break;
                }
                LPWSTR userNameOnBuffer = pBuf->lgrmi3_domainandname;
                pBuf++;
                dwTotalCount++;     
            }
            localGroupUserCount = dwTotalCount;
            char totalCount[] = "";
            sprintf(totalCount, "Entries enumerated: %d", dwTotalCount);
            WriteToLog(totalCount); 
        }
        //
        // Otherwise, print the system error.
        //
        else{
        char systemError[] = "";
        sprintf(systemError, "An system error has occurred %d - %d", stderr, nStatus);
        WriteToLog(systemError);
        }
    }
    //
    // Free the allocated buffer.
    //  
    if (pBuf != NULL)
    {
        NET_API_STATUS nBufferFreeStatus = NetApiBufferFree((LPVOID)pBuf);
        if(nBufferFreeStatus == NERR_Success){
            WriteToLog("Succesfully freed buffer");
        }
        else{
            WriteToLog("Error occured freeing buffer");
        }
        pBuf = NULL;
    }
    WriteToLog("getUsersByLocalGroup finished");
    return NULL;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:41:40.557

在你的循环中，你有这条线`pBuf++;`。这会修改`pBuf`这意味着您要释放的值不是分配的值。因此无效参数。

此外，这些行

```
char totalCount[] = "";
sprintf(totalCount, "Entries enumerated: %d", dwTotalCount); 
```

创建堆栈缓冲区溢出，这可能会破坏您的`pBuf`变量。几行之后还有另一个例子。

一般来说，调试方法如下：一`NetLocalGroupGetMembers`返回就设置断点。查看其中的值`pBuf`并将其写在安全的地方。当你要调用时再设置一个断点`NetApiBufferFree`。看看`pBuf`你传递的价值。它是否等于您之前记下的值？如果没有，那么你有一个错误。使用调试器找出您传递错误值的原因。

# matlab - 如何检测矩阵的相等行与另一个具有 10% 边距的矩阵进行比较？

> ID：14728884
> 
> 赞同：1
> 
> 时间：2013-02-06T12:16:41.820
> 
> 标签：matlab

我有一个矩阵，我想将此矩阵的行与另一个矩阵的行进行比较，并验证是否有与它们匹配的行。

例如：

```
A = [ 1 2 3;...
      4 5 6;...
      7 8 9 ];

B = [ 54 23 13;...
      54 32 12;...
      1.1 2.2 2.9]; 
```

我需要检测矩阵 A 的第 1 行与矩阵 B 的第 3 行匹配。行不相等，因为我想要 +-10% 的边距。

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:23:29.533

此代码未经测试，但应该这样做：

```
valid = all(abs(A(1,:) - B(3,:)) ./ A(1,:) < 0.1) 
```

一个解释：

*   `A(1,:)`取第一行`A`，`B(3,:)`取第三行`B`。
*   `abs(...)`取绝对值。
*   `abs(...) ./ A(1,:)`给出百分比变化
*   `< 0.1`确保每个元素小于 10%。
*   `all(...)`聚合上一步的值并测试它们是否为真。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T12:55:26.487

一般来说，如果你不知道A的哪一行可能与B匹配，我写了一个for循环，它是Fabian答案的扩展......

```
for i = 1:size(A,1)
      match(:,i) = sum(abs(ones(size(A,1),1)*A(i,:) - B) ./ (ones(size(A,1),1)*A(i,:)) <= 0.100001, 2) == size(A,2)*ones(size(A,1),1);        
  end 
```

如果 B 的第 i 行与 A 的第 j 行匹配，则 match(i,j) == 1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T16:27:59.827

我在其他论坛上问这个问题，我得到了最好的答案：

```
margin = 0.1;
A = [1 2 3; 4 5 6; 7 8 9];
B = [7 8 10; 4 5 12; 1.1 2.2 2.9; 1.101 2 3; 6.3 7.2 9.9];
k = 0;
for i = 1:size(A,1)
    for j = 1:size(B,1)
        if all(abs((A(i,:)-B(j,:))./A(i,:)) <= margin+eps)
            k = k+1;
            match(:,k) = [i;j];
        end
    end
end
fprintf('A row %d matches B row %d.\n',match) 
```

我要感谢你所有的答案，我会给你接受的答案，但我认为这对我来说是最好的代码。

# php - Codeigniter 错误：试图获取非对象的属性

> ID：14728889
> 
> 赞同：-2
> 
> 时间：2013-02-06T12:17:00.293
> 
> 标签：php, codeigniter

**我无法识别为什么这个错误会一次又一次地出现。** 基本上我正在尝试编辑学生的数据

我正在使用以下文件：

控制器 - 学生

查看 - students_edit

模型 - codegen_model

我的控制器如下：

> 函数编辑(){
> $this->load->library('form_validation'); $this->data['custom_error'] = '';
> 
> ```
>  if ($this->form_validation->run('students') == false)
>     {
>          $this->data['custom_error'] = (validation_errors() ? '<div class="form_error">'.validation_errors().'</div>' : false);
> 
>     } else
>     {                            
>         $data = array(
>                 'username' => $this->input->post('username'),
>                 'password' => $this->input->post('password'),                     
>                 'phone' => $this->input->post('phone'),
>                 'email' => $this->input->post('email'),
> 
>         );
>                   if ($this->codegen_model->edit('students',$data,'id',$this->input->post('id'))== TRUE)          {
>           redirect(base_url().'index.php/students/manage/');          }           else            {
>           $this->data['custom_error'] = '<div class="form_error"><p>An Error Occured</p></div>';
> 
>       }       }
> 
>   $this->data['result'] = $this->codegen_model->get('students', 'id,username,password,phone,email', 'id = '.$this->uri->segment(3),NULL,NULL,true);
>           $this->load->view('students_edit', $this->data);        
> } 
> ```

观点如下：

```
<?php     

echo form_open(current_url()); ?>
<?php echo $custom_error; ?>
<?php echo form_hidden('id',$result->id) ?>

        <p>                         
        <input id="username" type="text" name="username" value="<?php echo $result->username ?>"  />
        <?php echo form_error('username','<div>','</div>'); ?>
        </p>

        <p>                         
        <input id="password" type="password" name="password" value="<?php echo $result->password ?>"  />
        <?php echo form_error('password','<div>','</div>'); ?>
        </p>

<p>     <input id="phone" type="text" name="phone" value="<?php echo $result->phone ?>"  />
        <?php echo form_error('phone','<div>','</div>'); ?>
        </p>

        <p>                         
        <input id="email" type="text" name="email" value="<?php echo $result->email ?>"  />
        <?php echo form_error('email','<div>','</div>'); ?>
        </p>       

        <?php echo form_submit( 'submit', 'Submit'); ?>
</p>

<?php echo form_close(); ?> 
```

Codegen_model 如下：

```
function get($table,$fields,$where='',$perpage=0,$start=0,$one=false,$array='array'){

    $this->db->select($fields);
    $this->db->from($table);
    $this->db->limit($perpage,$start);
    if($where){
    $this->db->where($where);
    }

    $query = $this->db->get();

    $result =  !$one  ? $query->result($array) : $query->row() ;
    return $result;
} 
```

当我尝试加载视图 student_edit 时出现以下错误：

```
A PHP Error was encountered

Severity: Notice

Message: Trying to get property of non-object

Filename: views/students_edit.php

Line Number: 5 
```

当我尝试`result->id`其他示例时，它工作正常，但在这里我无法弄清楚错误在哪里。

任何解决方案都会有很大帮助。提前致谢。数控

回答 ：

代码似乎工作正常，但唯一的问题在于查询，@Rick 说的是对的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:24:36.050

听起来您的数据库查询有问题。我会用

```
die($this->db->last_query()); 
```

线后

```
$query = $this->db->get(); 
```

然后尝试运行查询以查看是否有任何错误。

我还将在您的视图中进行一些检查，以查看 $result->id 是否存在，然后再将其回显以避免错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:26:30.087

我怀疑问题是`codegen_model->get`返回 null 不是对象的东西。大概`null`？

试着做一个`var_dump($result)`看看你得到了什么`$this->codegen_model->get('students', 'id,username,password,phone,email', 'id = '.$this->uri->segment(3),NULL,NULL,true);`

顺便说一句，那个可待因模型......这不是你应该在 CI 中使用模型的方式。

# c++ - 无法在 C++ MSVS08 中禁用警告 4700

> ID：14728890
> 
> 赞同：1
> 
> 时间：2013-02-06T12:17:09.303
> 
> 标签：c++, visual-studio-2008, warnings

我的问题是我找不到如何禁用警告 4700（未初始化使用的变量）...我的代码是下一个：

```
#pragma warning(disable :4700)
double** f;
optimumWindowSize(Mv[seed_coord.x][seed_coord.y],f,&winsize);
#pragma warning(default :4700) 
```

在里面`optimumWindowSize`我调用了一个初始化变量f的函数，所以实际上我没有在没有初始化的情况下使用它，但编译器仍然给我警告。我只想在这里禁用它，而不是在所有代码中，但我上面的代码并没有禁用它。

我错过了什么？我怎样才能禁用它？

注意：F 将是函数后的 winsizeXwinsize 矩阵

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-06T14:37:36.550

我找到了答案，只需要使用 Is 来初始化`f`变量，`NULL`警告就消失了。

# javascript - 如何在 Express 3 中挂载子应用

> ID：14728891
> 
> 赞同：0
> 
> 时间：2013-02-06T12:17:10.743
> 
> 标签：javascript, node.js, express

在*sub-app-dir/ **app.js***

快递**2**：

```
app.mounted(function (parent) {
  this.helpers({masterviews: parent._locals.settings.views + '/'});
}); 
```

快递**3**：

*不再支持*app.mounted*和*app.helpers 。*正如迁移指南中所建议的，***app.helpers***可以替换为*app.locals*但没有提供迁移*app.mounted*的文档。*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:15:49.893

不确定这是您想要做的，但我会这样做：

```
var express = require('express')
  , mysubapp = require('./lib/mysubapp/index'); // path is just for example
var app = express();

// then you mount the app
app.use(mysubapp);
// or if mysubapp returns a function
app.use(mysubapp()); 
```*

# c# - 非泛型类中的 C# 协方差

> ID：14728892
> 
> 赞同：2
> 
> 时间：2013-02-06T12:17:13.407
> 
> 标签：c#, covariance

我真的搜索了所有协方差问题，没有什么像我的问题。

我有一个用户控件（这个类不能是通用的，原因很明显），它看起来像这样：

```
class MyUserControl : UserControl
{
    private BaseDao<object> _dao;
    private AppointmentMapping<object> _mapping;

    // I need these 2 generics to type safe the mapping/dao relation
    public void RegisterPersistence<T>(BaseDao<T> dao, AppointmentMapping<T> mapping)
   {
        // These two dont work. even with safe and unsafe casting.
        _dao = dao;
        _mapping = mapping;
   }
} 
```

我已经尝试存储协方差、接口等的委托。它只是不存储对象！我怎样才能做到这一点？使用 Java 很容易实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T15:11:35.367

试试下面这个。这个想法是在使用时捕获 T 并将其存储在“知道以后要做什么”的类中。然后通过接口引用你的类中的项目（省略类型信息）。稍后通过接口调用存储的值。这样你就不需要重构你的泛型类来实现某些接口。

```
class MyUserControl : UserControl
  {

    // hold a reference to the helper - no generics needed here -> "covariant"
    private IHelper helper;

    // I need this 2 generics to type safe the relation between the mapping and the dao
    public void RegisterPersistence<T>(BaseDao<T> dao, AppointmentMapping<T> mapping) {
      // "pass <T>" for later usage
      this.helper = new HelperImpl<T>(dao, mapping);
    }

    // use the stored values...
    public void doStuff() {
      helper.doStuff();
    }

    // the non generic interface
    private interface IHelper
    {
      void doStuff();
    }

    // a generic implementation for storing the items *and* using them.
    private sealed class HelperImpl<T> : IHelper
    {
      private readonly BaseDao<T> dao;
      private readonly AppointmentMapping<T> mapping;

      public HelperImpl(BaseDao<T> dao, AppointmentMapping<T> mapping) {
        this.dao = dao;
        this.mapping = mapping;
      }

      public void doStuff() {
        this.dao.foo();
        this.mapping.foo();
      }
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:41:33.120

使用协变和逆变是必要的接口！

协方差：`IInterface<out T>`

逆变：`IInterface<in T>`

检查此链接以获取更多信息： [http ://weblogs.asp.net/dixin/archive/2009/08/31/understanding-csharp-covariance-and-contravariance-3-samples.aspx](http://weblogs.asp.net/dixin/archive/2009/08/31/understanding-csharp-covariance-and-contravariance-3-samples.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:01:36.010

H.alex is right, best thing would be to move the generic bit on a different layer so you can make the class generic and then have generic class members rather than objects. The class must be able to infer the generic type or you'll have to write something like:

```
public class BaseDao<T>
{
    public T Item { get; set; }
}

public class TestClass
{
    private BaseDao<object> _dao;

    public void RegisterPersistence<T>(BaseDao<T> dao)
    {
        _dao = Activator.CreateInstance<BaseDao<object>>();
        //need to map each member of BaseDao
        _dao.Item = dao.Item;
    }    
} 
```

which is clearly not maintainable as you have to take care of mapping all members on the new instance.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T12:32:38.297

据我所知，这是不可能的。

就像塞巴斯蒂安说的，你能做的就是拥有

```
class MyUserControl : UserControl
{
    private object _dao;
    private object _mapping;

    // I need this 2 generics to type safe the relation between the mapping and the dao
    public void RegisterPersistence<T>(BaseDao<T> dao, AppointmentMapping<T> mapping)
   {
        _dao = dao;
        _mapping = mapping;
   }

   public BaseDao<T> GetDao<T>()
   {
       return _dao as BaseDao<T>;
   }

   public AppointmentMapping<T> GetAppointmentMapping<T>()
   {
       return _mapping as AppointmentMapping<T>;
   }
} 
```

# entity-framework - 实体框架和默认日期

> ID：14728895
> 
> 赞同：5
> 
> 时间：2013-02-06T12:17:19.883
> 
> 标签：entity-framework

我在 SQL 中有一个表，在该表中我有 DateTime 列，其默认值为 GetDate()

在实体框架中，我希望它使用 SQL 日期时间，而不是使用运行控制台应用程序的计算机的本地日期时间（SQL 服务器落后 1 小时）。

该列也不允许空值，目前它传入 1/1/0001 的日期值，我收到一个错误：

将 datetime2 数据类型转换为 datetime 数据类型导致值超出范围。\r\n语句已终止。

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-12T15:13:32.803

1.  打开*edmx*设计器
2.  选择您的 DateTime 列
3.  转到属性并`StoreGeneratedPattern`从更改`None`为`Computed`

这将告诉 EF 不要为该列插入值，因此该列将获得数据库生成的默认值。请记住，您将无法传递某些值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-25T08:22:46.327

如果您使用的是 Fluent API，只需将其添加到您的 DbContext 类中：

```
 modelBuilder.Entity<EntityName>()
            .Property(p => p.PropertyName)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T15:09:28.897

在 OnModelCreating 方法中为该实体设置 columnType：modelBuilder.Entity().Property(s => s.ColumnName).HasColumnType("datetime2");

# mvvm - 如何将 ResourceDictionary 绑定到 ViewModelProperty

> ID：14728896
> 
> 赞同：1
> 
> 时间：2013-02-06T12:17:19.387
> 
> 标签：mvvm, binding

我有带有属性 UriResource 的 MainWindow 的 ViewModel。如何将此属性绑定到 ResourceDictionary？我试过这段代码：

```
 <Window.Resources>
        <ResourceDictionary Source="{Binding UriResource}">
        </ResourceDictionary>
    </Window.Resources> 
```

但我收到错误：添加到 IDictionary 的所有对象都必须具有 Key 属性或与之关联的其他类型的键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:24:55.490

这就是我的 app.settings 的样子：

```
<Application x:Class="PcgTools.App"
  ...
  <Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="....." />
        </ResourceDictionary.MergedDictionaries>
        <local:EnumToBooleanConverter x:Key="EnumToBooleanConverter"/>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <res:Strings
         x:Key="LocStrings"/>
    </ResourceDictionary>
  </Application.Resources>
</Application> 
```

可能您需要添加 x:Key="....."

# java - 如何修改 Solr 给出的搜索结果页面？

> ID：14728903
> 
> 赞同：2
> 
> 时间：2013-02-06T12:17:44.537
> 
> 标签：java, solr, search-engine, nutch

我打算做一个利基搜索引擎。我使用 apache-nutch-1.6 作为爬虫，使用 apache-solr-3.6.2 作为搜索器。我必须说，网络上关于这些技术的更新信息非常少。

我遵循本教程[http://wiki.apache.org/nutch/NutchTutorial](http://wiki.apache.org/nutch/NutchTutorial)并在我的 ubuntu 系统上成功安装了 apache 和 solr。我还成功地将种子 url 注入 webdb 并执行爬网。

使用 solr 接口`http://localhost:8983/solr/admin`，我也可以查询爬取的结果。但这是我收到的输出。![在此处输入图像描述](../Images/ee946a8d1a768b27f3bd855bae2a8165.png).

我在这里遗漏了什么吗，早期的 apache-nutch-0.7 发生了一场战争，它产生了这样一个清晰的 html 输出。![在此处输入图像描述](../Images/5d4990fba77cb35c91f023c2c2ae7d98.png). 我如何做到这一点......或者如果有人可以指出我最新的教程或指南，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:34:55.703

有几件事：

*   如果您刚刚开始，请不要使用 Solr 3.6，直接使用最新的 4.1+。许多事情发生了变化，并添加了许多新功能。
*   您似乎在说您会将 Solr + UI 直接暴露给一般网络 - 这是一个非常糟糕的主意，因为 Solr 完全不安全并且允许基于网络的删除查询。你真的想要一个中间的业务层。
*   在 Solr 4.1 中，有一个漂亮的 Admin UI，还有一个 /browse 页面，显示如何使用 Velocity 来处理 Solr 支持的页面。或者查看[Project Blacklight](http://projectblacklight.org/)之类的示例，了解如何通过 Solr 获取 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T07:06:48.967

我发现下面的链接 [http://cmusphinx.sourceforge.net/2012/06/building-a-java-application-with-apache-nutch-and-solr/](http://cmusphinx.sourceforge.net/2012/06/building-a-java-application-with-apache-nutch-and-solr/) 回答了我的查询。

我同意阅读上述链接上的内容后，我对自己感到非常生气。Solr 包提供了查询 solr 所需的所有对象。

事实上，必备的jar包就是solr-solrj-3.4.0.jar、commons-httpclient-3.1.jar和slf4j-api-1.6.4.jar。

任何人都可以使用这些对象构建 Java 搜索引擎来查询数据库并拥有精美的 UI。

再次感谢。

# ios - 如何根据已选择的段 (UISegmentedControl) 定位弹出框

> ID：14728905
> 
> 赞同：1
> 
> 时间：2013-02-06T12:17:52.230
> 
> 标签：ios, uitableview, uipopovercontroller, uisegmentedcontrol, uistoryboardsegue

我通过集成 8 个段的分段控件以编程方式创建了动态表的自定义单元格。

它运作良好，但一旦我点击其中一个部分，我希望在单元格附近出现一个带有选项的弹出菜单，而不是在表格视图的下端。

我想这是因为我已将 segue 锚定到 tableview。我想避免为每个段分配一个弹出菜单的segue。

是否有可能根据所选段自动重新定位弹出菜单？

这是主视图控制器.m文件中的相关代码

```
-(void)segmentSelectedAtRow: (UISegmentedControl *)sender{
if (self.flipsidePopoverController) {
    [self.flipsidePopoverController dismissPopoverAnimated:YES];
    self.flipsidePopoverController = nil;
} else {
    [self performSegueWithIdentifier:@"segueToChangeValues" sender:sender];
}

UITableViewCell *theParentCell = [[sender superview]superview];
NSIndexPath *indexPathOfSegment = [self.spreadSheetView indexPathForCell:theParentCell];

...
}

...

- (void)flipsideViewControllerDidFinish:(POTFlipsideViewController *)controller {

[self.flipsidePopoverController dismissPopoverAnimated:YES];
self.flipsidePopoverController = nil;
}

- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController {
self.flipsidePopoverController = nil;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"segueToChangeValues"]) {
    [[segue destinationViewController] setDelegate:self];
    UIPopoverController *popoverController = [(UIStoryboardPopoverSegue *)segue popoverController];
    self.flipsidePopoverController = popoverController;
    popoverController.delegate = self;
}
}

@end 
```

这是另一面的 .h 文件

```
@class POTFlipsideViewController;

@protocol POTFlipsideViewControllerDelegate
- (void)flipsideViewControllerDidFinish:(POTFlipsideViewController *)controller;
@end

@interface POTFlipsideViewController : UIViewController

@property (weak, nonatomic) id <POTFlipsideViewControllerDelegate> delegate;

- (IBAction)done:(id)sender;
....
 @end 
```

这是反面 .m 文件的相关代码

```
#import "POTFlipsideViewController.h"

@interface POTFlipsideViewController ()

@end

@implementation POTFlipsideViewController

- (void)awakeFromNib
{
self.contentSizeForViewInPopover = CGSizeMake(320.0, 480.0);
 [super awakeFromNib];
 }

 - (void)viewDidLoad
{
    [super viewDidLoad];

}
return YES;
}

 - (IBAction)done:(id)sender
 {
    [self.delegate flipsideViewControllerDidFinish:self];
}

@end 
```

# c++ - WinApi 线程（指针错误）

> ID：14728910
> 
> 赞同：0
> 
> 时间：2013-02-06T12:18:05.213
> 
> 标签：c++, c, windows, winapi

我有一个问题 :( 我想制作一个给出随机数的程序 :) 我不想使用 rand() 函数 :) 我想为我制作一个然后将其转换为函数 ;) 用于教育目的 :) 但是我有一个问题:(见我的代码:)

```
#include <stdio.h>
#include <iostream>
#include <conio.h>
#include <windows.h>

#define MIN 0
#define MAX 99999

using namespace std;

typedef struct _RANDOM_INFO{
    DWORD random;
    DWORD min;
    DWORD max;
} RANDOM_INFO, * LPRANDOM_INFO;

void Error(LPSTR lpErrorMessage){
    cout << lpErrorMessage << endl;
    exit(EXIT_FAILURE);
}

void GetRandom(LPVOID lpParam){

    DWORD dwListSize = 10000, min = 0, max = 99999;
    LPDWORD lpRandom = (LPDWORD)lpParam;
    LPSTR lpFileSelf, lpKernel, lpNtdll;    
    HMODULE hFileSelf = NULL, hKernel = NULL, hNtdll = NULL;

    hFileSelf = (HMODULE) GetModuleHandle(NULL);
    hKernel = (HMODULE) GetModuleHandle("kernel.dll");
    hNtdll = (HMODULE) GetModuleHandle("ntdll.dll");

    lpFileSelf = (LPSTR) hFileSelf;
    lpKernel = (LPSTR) hKernel;
    lpNtdll = (LPSTR) hNtdll;

    while(1){
        DWORD i;
        for(i = 0; i <= dwListSize; i++){
            *lpRandom = (DWORD)lpFileSelf[i];   
        }
        i = 0;
    }

    return;
}

int main(int argc, char **argv)
{
    DWORD random = 0;

    DWORD getRandomThreadId = 0;

    HANDLE hGetRandomThread = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE)GetRandom, &random, 0, &getRandomThreadId);
    if(hGetRandomThread == INVALID_HANDLE_VALUE)
        Error("Cannot make a random list.");

    getch();

    cout << random << endl;
    Sleep(1500);

    return 0;
} 
```

变量应该在什么时候得到一个值并打印它，但我总是得到 0 并且 Windows 错误有人能告诉我为什么吗？？？还有另一个问题，当我尝试在 GetRandom 函数中使用变量 hKernel 时，我也收到了一个错误:(但它在 hFileSelf 和 hNtdll 的情况下工作正常！！！！是内核保护不被读取？？？

注意：这不是随机数生成 :) 它只是当用户单击键盘上的输入时从内存中获取数字的一种方法 :)，并且对于所有用户来说并不总是相同的时间，所以它并不总是内存中的相同指针 :) 我希望你明白我想要做什么 :) 对不起我的英语不好 :) 只是帮助我解决问题 :)

感谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:36:39.297

> 我想做一个给出随机数的程序

您所做的与随机数生成无关。

这是**一种**方法： [Linear Congruential Generator](https://en.wikipedia.org/wiki/Linear_congruential_generator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:05:32.593

您的`GetRandom()`函数没有正确的`CreateThread()`回调过程签名。试试这个：

```
#include <stdio.h>
#include <iostream>
#include <conio.h>
#include <windows.h>

#define MIN 0
#define MAX 99999

using namespace std;

typedef struct _RANDOM_INFO
{
    DWORD random;
    DWORD min;
    DWORD max;
} RANDOM_INFO, * LPRANDOM_INFO;

void Error(LPSTR lpErrorMessage)
{
    cout << lpErrorMessage << endl;
    exit(EXIT_FAILURE);
}

HMODULE hFileSelf = (HMODULE) GetModuleHandle(NULL);

DWORD WINAPI GetRandomThreadProc(LPVOID lpParam)
{
    LPDWORD lpRandom = (LPDWORD) lpParam;

    DWORD dwListSize = 10000, min = 0, max = 99999;
    LPBYTE lpFileSelf = (LPBYTE) hFileSelf;

    while (1)
    {
        for (DWORD i = 0; i <= dwListSize; ++i)
        {
            *lpRandom = (DWORD) lpFileSelf[i];   
        }

        Sleep(0);
    }

    return 0;
}

int main(int argc, char **argv)
{
    DWORD dwRandom = 0;
    DWORD dwRandomThreadId = 0;

    HANDLE hGetRandomThread = CreateThread(NULL, 0, &GetRandomThreadProc, &dwRandom, 0, &dwRandomThreadId);
    if (hGetRandomThread == INVALID_HANDLE_VALUE)
        Error("Cannot make a random list.");

    do
    {
        getch();
        cout << dwRandom << endl;
    }
    while (WaitForSingleObject(hGetRandomThread, 0) == WAIT_TIMEOUT);

    CloseHandle(hGetRandomThread);

    return 0;
} 
```

# php - 如何将智能关联数组传递给 amChart

> ID：14728914
> 
> 赞同：0
> 
> 时间：2013-02-06T12:18:10.277
> 
> 标签：php, charts, smarty

我是新来的聪明人。我想显示一个 amChart。我已将此 tpl 文件包含在另一个 tpl 文件中。我想将 smarty 关联数组传递给 amChart。我该怎么做，因为我的图表没有被加载。我希望将 smarty 数组传递给 chart.dataprovider 属性。

```
 var chart = new AmCharts.AmPieChart();
    chart.valueField = "value";
chart.titleField = "title";
chart.dataProvider = {$chart_data};
chart.write("chart_div"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:32:24.063

您必须重新创建它，以便 javascript 使用 smarty 循环数组，或者更好的是，使用 php 对数组进行 json_ncode 并输出结果供 javascript 使用

# c - 通过基数和指数显式定义浮点值

> ID：14728919
> 
> 赞同：5
> 
> 时间：2013-02-06T12:18:20.837
> 
> 标签：c, floating-point, notation

我偶然发现了[http://sourceware.org/ml/glibc-cvs/2013-q1/msg00115.html](http://sourceware.org/ml/glibc-cvs/2013-q1/msg00115.html)，其中包括该行

```
#define  TWO5      0x1.0p5      /* 2^5     */ 
```

显然， TWO5 被定义为具有显式 value 的 double `1<<5`。但是，这是我第一次看到这种符号。这种格式是如何使用的，与仅仅写作相比有什么优势`2.5`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T12:21:55.947

这种表示法是在 C99 中引入的。优点是该值以十六进制形式表示，因此当您在基础表示形式和十进制形式之间转换浮点值时，它不会受到舍入等的影响。

有很多页面描述了这种表示法，例如：

[http://www.exploringbinary.com/hexadecimal-floating-point-constants/](http://www.exploringbinary.com/hexadecimal-floating-point-constants/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T12:21:55.083

这是 C99 附带的十六进制浮点表示法（我认为）。优点是它允许用它们精确的可表示值来指定这些常量。（这假设浮点基数是 2、4、8 或 16 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T12:40:25.040

[这是C99 草案](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf)中定义的十六进制浮点常量的语法，写成正则表达式：

```
0[xX]([a-fA-F0-9]*[.][a-fA-F0-9]+|[a-fA-F0-9]+[.]?)[pP][+-]?[0-9]+[flFL]? 
```

其中包括4部分：

*   `0[xX]`: 十六进制前缀，这两个中的任何一个：

    ```
    0x
    0X

    ```

*   `([a-fA-F0-9]*[.][a-fA-F0-9]+|[a-fA-F0-9]+[.]?)`：十六进制小数常数，例如：

    ```
    34.2f
    .de
    b3。

    ```

    或十六进制数字序列（十六进制整数），例如：

    ```
    2f4
    10

    ```

    第二部分主要描述尾数。

*   `[pP][+-]?[0-9]+`: 二进制指数部分（以十进制指定），例如：

    ```
    p-4
    p20

    ```

    我们通过以十六进制指定尾数和以十进制指定指数 b（用于基数 2）来指定十六进制浮点常量。

*   `[flFL]?`: 可选的浮动后缀，表示类型（`float`,`double`或`long double`）。

# objective-c - 如何为 NSDictionary 实现自定义键

> ID：14728921
> 
> 赞同：3
> 
> 时间：2013-02-06T12:18:25.173
> 
> 标签：objective-c, collections

我正在尝试实现一个类以用作 NSDictionary 中的键。文档说，为了用作键，对象需要实现我已经完成的 NSCopying 协议。

我看到一些非常奇怪的行为，即使我可以看到对象被正确存储在字典中，值似乎也神秘地变成了 nil。

据我所知，我已经正确实现了 copyWithZone: 和 isEqual: ，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T12:18:25.173

文档没有明确说明的是，要将对象用作 NSDictionary 中的键，它必须同时覆盖 isEqual: 和哈希方法，以及实现 NSCopying。

isEqual: 和 hash 的约定是，如果 isEqual: 为 2 个对象返回 YES，那么它们的 hash 方法必须返回相同的值。两个不相等的对象具有相同的散列是可以的，但如果它们相等，那么它们必须具有相同的散列。

当您尝试从字典中读取和写入时，未能正确覆盖哈希将导致各种难以调试的问题。

# php - 根据id php添加数据库字段

> ID：14728924
> 
> 赞同：1
> 
> 时间：2013-02-06T12:18:31.623
> 
> 标签：php, mysql, sql, database

我一直在尝试根据他们的输出我的数据库字段`empid`，但不知何故我做不到。它给了我这个错误..

> 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 16 行的 C:_webhost\Apache24\htdocs\eis\usercp.inc.php 中给出

```
<?php       
$firstname =  getuserfield('txtFname');
$lastname = getuserfield('txtLname');
echo 'Hello '.$firstname.' '.$lastname.'.';
$empid = getuserfield('empid');
$query = "SELECT type_of_leave,specific_reason,date_from,date_to,num_of_days FROM `hrf_leave` WHERE `empid` = '$empid' AND `formStatus` = 0";
$query_run = mysql_query($query);
echo "<table border=1>
<tr>
<th>Type of Leave</th>
<th>Specific Reason</th>
<th>Date From</th>
<th>Date To</th>
<th>Number of Days</th>
</tr>";
while($record = mysql_fetch_array($query_run)){ // line 16
echo "<tr>";
echo "<td>" . $record['type_of_leave'] . "</td>";
echo "<td>" . $record['specific_reason'] . "</td>";
echo "<td>" . $record['date_from'] . "</td>";
echo "<td>" . $record['date_to'] . "</td>";
echo "<td>" . $record['num_of_days'] . "</td>";
echo "</tr>";
}
echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:29:02.777

由于您的 sql 语句无效，`false`因此传递了一个布尔值。因此返回上述错误。`mysql_query()``$query``mysql_fetch_array()`

试试这个 as `$query`，如果它是我希望的语法错误，它将解决。

```
 $query= SELECT * FROM hrf_leave WHERE empid = '$empid' AND formStatus = 0"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:24:45.593

看到可能有两件事：-

1.  首先，您在查询中使用的**empid**可能是整数，并且您使用引号传递值。
2.  其次，查询没有返回任何结果。回显查询并在 phpmyadmin 或任何 mysql 查询浏览器中运行它。

建议：在使用 mysql_fetch_array 之前，使用 mysql_num_rows 检查查询是否返回了任何行。

注意：mysql_* 函数正在折旧。所以避免他们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:00:41.037

在你做任何事情之前，请尽量不要使用不再支持的 mysql_ 函数你可以使用 pdo。贝娄是如何使用 pdo 从那里连接到数据库，您必须学习如何查询 pdo gudluck 。获取消息（）；} ?>

# jquery - 需要滑动菜单栏的代码

> ID：14728929
> 
> 赞同：-7
> 
> 时间：2013-02-06T12:18:48.917
> 
> 标签：jquery, html, css

我正在为滑动菜单栏寻找一些 JQuery 代码，就像[这个](http://rebekahmoses.co/home.html) 页面上的一样。如果有人可以提供帮助。这个站点的菜单栏是用 css3 和 html5 完成的。尽量避免。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:41:50.550

如果你正在寻找一个原始的 jQuery 菜单，你可以使用 animate()。有关示例，请参见此 JSFiddle：

[http://jsfiddle.net/turiyag/7tcbc/3/](http://jsfiddle.net/turiyag/7tcbc/3/)

```
$("#menu").animate({"width":"80%"},10000); 
```

# angularjs - AngularJS 绑定到动态模型名称

> ID：14728931
> 
> 赞同：3
> 
> 时间：2013-02-06T12:19:01.123
> 
> 标签：angularjs

我有一个像这样的通用 JSON 结构

```
{
 "parameters":
              [
                {
                  "key":"fieldName","posibleValues":["Val1,"Val2"],
                  "key":"anotherField","posibleValues":["ValA,"ValB"]
                }
              ]
 } 
```

不，我想做这样的事情：

```
<div ng-repeat="parameter in parameters">
  <ng-form name="paramForm">
    {{parameter.key}}: <select ng-model="request.parameter.{parameter.key}" ng-option="..." />    
  </ng-form>

</div> 
```

问题伴随着

```
select ng-model="request.parameter.{parameter.key}" 
```

所以我想设置一个名为“request.parameter.fieldName”的模型（根据JSON结构中的“key”。

这可能吗？还是我必须通过 ng-change 帮助自己？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-19T14:26:53.273

如果有人以这种方式寻找任何东西，您可以使用以下语法：

```
request.parameter[parameter.key] 
```

# web - 关于CPanel中的DNS配置，请帮助我

> ID：14728932
> 
> 赞同：0
> 
> 时间：2013-02-06T12:19:06.210
> 
> 标签：web, dns, subdomain, cpanel

我想问一下cPanel，我的客户问过，他们使用cPanel作为网站控制面板，所以情况是这样的。

我的客户有 cPanel WHM，他们的域名 myClient.com 可以由 cPanel 控制，目前他们有一个现有的网站托管在 www.existingMyClient.com，所以他们想创建子域，例如 oldsite.myClient.com，显示内容www.existingMyClient.com,

那么，为此我必须在 cPanel 中配置什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:58:58.617

1.  转到帐户 existingMyClient.com 的 Cpanel 上的停放域
2.  创建一个托管域 oldsite.myClient.com

这个停放的子域（或域）指向existingMyClient.com

# php - 简单的 PHP 正则表达式

> ID：14728934
> 
> 赞同：1
> 
> 时间：2013-02-06T12:19:07.203
> 
> 标签：php, regex

晚上好，我正在学习 PHP 的正则表达式。我无法做到 1 到 30 和 1 到 10。对于 1 到 9，我认为 [1-2-3-4-5-6-7-8-9] 或 [1-9]{1}，哪个更正确？提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:35:21.303

对于 1 到 9，有一个直接的正则表达式，即`[1-9]`.
对于 1 到 10 和 1 到 30，将应用规则组合。
对于 1 到 10，您可以使用：

```
10|[1-9] 
```

对于 1 到 30，可以使用此正则表达式：

```
(30)|([12][0-9])|([1-9]) 
```

或者

```
(30)|([12]\d)|([1-9]) 
```

第一部分`30`，将寻找完全匹配，即 30。
第二部分`[12]\d`或`[12][0-9]`，将寻找 10 到 29 之间的数字。
最后一部分`[1-9]`将寻找 1-9 之间的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:25:53.437

以下是 0 到 9 之间单个数字的有效正则表达式模式：

*   `[0123456789]`
*   `[0-9]`
*   `\d`

以上都是等价的。

您建议的版本`[1-2-3-4-5-6-7-8-9]`不正确。

要匹配 1 到 30 之间的数字，Regex 不是最好的工具，但如果您*必须*使用 regex，那么最简单的 regex 将是：

```
([012]?\d|30) 
```

但请注意，这也将匹配`0`，因此它实际上是 0-30 模式。

如果你真的想要 1-30，那就更复杂了：

```
([1-9]|[12]\d|30) 
```

如果数字 1-30 是您要查找的整个字符串，那么不要忘记添加`^`到模式的开头和`$`结尾以锚定它，以便它拒绝包含 1-30 和其他字符的字符串.

我确实提到正则表达式是仅用于匹配数字的错误工具，不是吗？如果您可以避免为此使用正则表达式，那么它对您来说会简单得多。这只是一个案例`if($var >= 1 && $var <= 30)`。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:35:20.397

试试这个正则表达式：

```
30|[12]?\d 
```

它将匹配 1 到 30 之间的数字，没有前导零

# gwt - GWT RequestFactory：更新未传播到级联对象

> ID：14728939
> 
> 赞同：0
> 
> 时间：2013-02-06T12:19:12.610
> 
> 标签：gwt, jpa, requestfactory

我有一个带有引用对象 ItemVersion 的实体公司，我使用 JPA (eclipselink) 作为持久层。此处给出了代码摘录：

```
@Entity
public class Company{
    private String instance;

    @OneToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "fk_item_version_id")
    private ItemVersion itemVersion;
}

@Entity
public class ItemVersion{
    private String comment;
...
} 
```

我可以创建一个 Company 对象并将其持久化。我还可以找到新对象，更新属性“实例”并将其持久化，一切正常。当我更改引用的 ItemVersion 对象的属性“comment”时，此更改不会存储在服务器端。

创建/更新测试代码如下所示：

```
final EventBus eventBus = new SimpleEventBus();
final AftdRequestFactory requestFactory = GWT.create(AftdRequestFactory.class);
requestFactory.initialize(eventBus);

final CompanyRequest request = requestFactory.companyRequest();
final CompanyProxy newCompany = request.create(CompanyProxy.class);
newCompany.setInstance("1");
ItemVersionProxy newVersion = request.create(ItemVersionProxy.class);
newVersion.setComment("first comment");
newCompany.setItemVersion(newVersion);

request.persist().using(newCompany).fire(new Receiver<Void>() {
    @Override
    public void onSuccess(Void arg0) {
    final CompanyRequest request2 = requestFactory.companyRequest();
    Request<CompanyProxy> p = request2.findCompany(1L).with("itemVersion");
    p.to(new Receiver<CompanyProxy>() {
        @Override
        public void onSuccess(CompanyProxy response) {
            final CompanyRequest request3 = requestFactory.companyRequest();
            final CompanyProxy editableCompany2 = request3.edit(response);
            editableCompany2.setInstance("2");
            editableCompany2.getItemVersion().setVersionNumber(2);
            request3.persist().using(editableCompany2).fire(new Receiver<Void>() {
                @Override
                public void onSuccess(Void arg0) {
                    // persist company version
                    System.out.println("company updated"); 
```

但是，“instance”和“comment”的更新通过了网络（检查了客户端和服务器之间的wireshark），但是在Company的persist方法中，引用的ItemVersion对象及其“comment”属性在“instance”时不会更新" 被更新，因此旧评论被存储。

Company 的 persist 方法如下所示：

```
public void persist() throws PersistenceException {
    EntityManager em = emf.createEntityManager();
    EntityTransaction tx = null;
    try {
        tx = em.getTransaction();
        tx.begin();
        Company existingEntity = findCompany(getId());
        if (existingEntity == null) {
            em.persist(this);
        } else {
            setId(existingEntity.getId());
            em.merge(this);
        }
        tx.commit();
    } catch (RuntimeException e) {
        tx.rollback();
        throw e;
} 
```

使用搜索解决方法并根据搜索结果使用 em.persist 或 em.merge 是必要的，因为简单的持久化不存储任何更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:43:30.087

您**必须**在 RequestFactory中使用 open-session-in-view/session-per-request 模式（即`EntityManager`在请求的生命周期内共享相同的实例）；有关详细信息，请参阅[https://code.google.com/p/google-web-toolkit/issues/detail?id=7827](https://code.google.com/p/google-web-toolkit/issues/detail?id=7827)。

# android - 播放/停止其他活动的声音

> ID：14728945
> 
> 赞同：1
> 
> 时间：2013-02-06T12:19:30.277
> 
> 标签：android, audio, transition

我有 3 个活动。我想为所有这些活动播放一首背景音乐。我使这成为可能。这样做。

在活动 1 中：

```
bgmp = MediaPlayer.create(this, R.raw.menu);
bgmp.setLooping(true);
bgmp.start(); 
```

这将使我的音乐播放到第三个活动。在活动三。我需要停止此背景音乐，因为当我进行第 4 项活动时，将播放另一种背景音乐。如何在第一个活动中创建的第三个活动中停止音乐。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:25:53.953

使用需要参数在公共类中定义方法，并在您的活动中使用该方法。

```
public class CommonMethod {
public static MediaPlayer player;
    public static void SoundPlayer(Context ctx,int raw_id){
            player = MediaPlayer.create(ctx, raw_id);
            player.setLooping(false); // Set looping
            player.setVolume(100, 100);

            //player.release();
             player.start();
        }
} 
```

在您的第三个活动中，为停止媒体编写代码。

> CommonMethod.player.stop();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:29:49.373

创建一个服务来播放声音并将所有播放器代码移动到服务中。

之后将您的活动绑定到此服务并控制音乐播放器的（播放下一个、返回、暂停、停止等）功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T12:37:25.307

创建一个单例类并将您的音乐播放代码添加到其中以停止和启动，并在您的所有 3 个活动中使用该单例类，例如：

```
public class MusicManager {

    private static MusicManager refrence = null;

    public static MusicManager getInstance(){
        if(refrence == null){
            refrence = new MusicManager ();
        }
        return refrence;
    }

} 
```

向这个单例类添加一个公共方法来启动和停止音乐，比如

```
public void initalizeMediaPlayer(Context context, int musicId){

// add initalization of media player in it and loop it 
}

public void startPlaying(){
// add code to start playing music
}

public void stopPlaying(){
// add code to stop playing music
} 
```

为了使用这个类，像这样使用

```
MusicManager.getInstance().initalizeMediaPlayer(this, R.raw.menu); // to initalize of media player
MusicManager.getInstance().startPlaying();// to start playing music
MusicManager.getInstance().stopPlaying(); // to stop playing music 
```

让我知道这是否对您有帮助。同时，您也可以使用在后台运行`service`来执行此任务。`service`您可以在代码中随时启动`service`和停止`service`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T12:33:31.747

您应该启动在后台运行的服务并编写用于在服务中播放音乐的代码..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-20T15:35:17.747

您所要做的就是将这段代码添加到最后一个活动的意图中：

`yourMediaPlayer.pause()`

所以整个代码是：

```
yourMediaPlayer.pause();
Intent i ...
startActivity(i); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-23T10:51:21.983

只需将`player.stop()`功能放在按钮内，即可带您进入下一个活动：

```
example: @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                player.stop();
                Intent i=new Intent(iotmain.this,MainActivity.class);
                startActivity(i);
                Toast.makeText(getBaseContext(),"Chatting mode ON",Toast.LENGTH_SHORT).show();
            } 
```

# xaml - 如何在 XAML 中使用来自 dll / 程序集的控件？

> ID：14728946
> 
> 赞同：2
> 
> 时间：2013-02-06T12:19:32.720
> 
> 标签：xaml, windows-8, visual-studio-2012, windows-runtime, c++-cx

我`CustomControl`在 dll ( `MyNamespace.UI`) 中有一个派生类。如何在我的主应用程序中使用此控件？我尝试添加对项目的引用，然后使用自定义 XAML 命名空间指向我的命名空间，但找不到它：

```
<Page ...
    xmlns:ui="using:MyNamespace.UI"
    ...>
<Canvas>
    <ui:MyControl />
</Canvas>
</Page> 
```

我收到一个错误：

> 名称空间“using:MyNamespace.UI”中不存在名称“MyControl”。

环顾四周，我设法找到了以下报价：

> 映射中未指定定义 XAML 命名空间的支持类型的程序集的名称。可用程序集的逻辑在应用定义级别进行控制，并且是基本应用部署和安全原则的一部分。将要作为 XAML 的代码定义源包含的任何程序集声明为项目设置中的依赖程序集。

[http://msdn.microsoft.com/en-gb/library/windows/apps/jj150588.aspx](http://msdn.microsoft.com/en-gb/library/windows/apps/jj150588.aspx)

有人可以指出项目设置中“依赖程序集”设置的方向吗？

**编辑**在确保根命名空间项目设置与我的控件（`MyNamespace.UI`）的命名空间匹配后，我可以编译项目。但我无法让它运行，因为我收到了大量的崩溃信息，其中包含以下信息：

> WinRT 信息：无法创建类型为“MyNamespace.UI.MyControl”的实例 [行：44 位置：37]

没有关于它*为什么*无法控制的信息......我逐步完成了的构造函数，`MyControl`异常被抛出`InitializeComponent()`。这是我的 UserControl ( `MyControl`) 的 XAML：

```
<UserControl
    x:Class="MyNamespace.UI.MyControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400">

    <Grid>

    </Grid>
</UserControl> 
```

**编辑 2**我删除了`Grid`控件，构建并运行，它工作，所以我把`Grid`控件放回去，它仍然工作。很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:31:55.423

您需要确保`MyNamespace.UI`程序集具有`RootNamespace`匹配的属性`MyNamespace.UI`。此属性无法在项目设置页面中更改，但您可以通过记事本或等效工具进行更改。我`RootNamespace`的设置为`UI`，当我更改它时，它开始工作。

# hadoop - mapreduce 程序未在分布式模式下产生所需的输出

> ID：14728951
> 
> 赞同：0
> 
> 时间：2013-02-06T12:20:03.583
> 
> 标签：hadoop, maps, mapreduce

我的 map-reduce 代码需要一些帮助。代码在 Eclipse 和独立模式下完美运行，但是当我打包代码并尝试在伪分布式模式下本地运行时，输出与我预期的不同。

```
Map input records = 11
Map input records = 11

Reduce input records = 11
Reduce output records = 0 
```

这些是我得到的值。

当我在 Eclipse 或独立模式下使用相同的配置和输入文件运行相同的代码时

```
Map input records = 11
Map output records = 11

Reduce input records = 11
Reduce output records = 4 
```

谁能告诉我怎么了..？？

我尝试了为 eclipse -> 导出 -> 可运行 jar 和表单终端构建 .jar 文件的两种方法（javac -classpath hadoop-core-1.0.4 -d classes mapredcode.java && jar -cvf mapredcode.jar -C类/。）

以及如何调试这个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T08:26:04.807

你在用`combiner()`方法吗？如果是的话。那么combiner的o/p和mapper的o/p一样吗？

因为在 Hadoop 中，Combiner 由 Hadoop 本身运行，在您的情况下可能不会在伪分布式模式下运行。组合器本身只不过是一个用于降低网络流量的减速器。

并且代码应该是这样的，即使没有运行组合器，reducer 也应该从映射器获得预期的格式。

希望能帮助到你。

# ssas - 在 BIDS 中更改多维数据集或项目的默认 NullProcessing 设置

> ID：14728952
> 
> 赞同：3
> 
> 时间：2013-02-06T12:20:11.240
> 
> 标签：ssas, bids

简单的问题 - 有没有办法将默认的 NullProcessing 设置从 Automatic 更改为 Preserve？

当您在某些行中有一个带有 NULL 值的度量时，由于默认的 NULLProcessing 设置，这些 NULL 值默认更改为 0。我想更改此设置，因此默认值为 Preserve。

亲切的问候，索伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:05:17.567

是的。

将度量的 NullProcessing 属性更改为 Preserve。当您展开 Source 文件夹时，您可以在属性窗口中找到它。Preserve 是四个可用选项中的第一个。

# c++ - 0 在纯虚函数中意味着什么

> ID：14728953
> 
> 赞同：3
> 
> 时间：2013-02-06T12:20:13.133
> 
> 标签：c++, constructor, pure-virtual

由于明显的原因，下面的程序无法编译：

```
#include <iostream>
using namespace std;

class A {
 public:
  A() { pVirt(); }
  virtual void pVirt() const = 0 { count<<"A::pVirt()"; }
};

int main() {
 A aObj;
 aObj.pVirt();
 reutrn 0;
} 
```

问题： 1\. 签名“virtual void pVirt() const = 0”中的 0 是什么意思？这是表示 vtable 中的 NULL 内存偏移量还是只是语法约束？

1.  如果 0 是 NULL 内存偏移量（如果是的话）那么为什么 VC++ 不允许指定另一个内存地址，这就是我们不能从外部构造函数调用纯虚函数的原因（可能是因为 vtable 是在对象完全构造后创建。）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T12:23:32.117

> 签名“virtual void pVirt() const = 0”中的 0 表示什么？

该部分`=0`称为*纯说明符*。它使虚函数*纯*，类*抽象*。

纯虚函数不需要定义。您可以*选择*在类外部提供定义，并且非抽象派生类*仍然*必须*覆盖*该函数。

```
class A
{
 public:
     virtual ~A() {};
     virtual void f() =0;
};

void A::f() { std::cout << "A::f" << std::endl; } //optional 
```

的定义`f`不会使类成为非抽象类，因此您不能创建 的实例`A`：

```
A a; //error - A is abstract 
```

此外，派生类必须重写`A::f`才能成为非抽象类：

```
class B : public A {};

B b; //error : B is still an abstract class as it didn't override A::f 
```

和

```
class C : public A { void f() {} };

C c; //okay : C override A::f 
```

而派生类实现可以选择调用基类实现：

```
class D : public A { void f() {  A::f(); } }; //defaults to A::f

D d; //okay : D override A::f, but calls A::f internally 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T12:22:05.470

这只是表示该函数是纯虚函数的语法。它没有任何实际意义。C++ 设计者也可以选择使用`pure`或`abstract`代替`= 0`. 我怀疑不这样做的唯一原因是他们不想在语言中引入新的保留字（因为这会破坏任何已经使用新保留字作为标识符的现有代码）。

（没有必要保留这样一个词，因为它是一个上下文相关的关键字，但是上下文相关的关键字的概念直到最近才进入主流用法，而且这种语法更古老。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T12:33:24.610

函数声明中的`= 0`只是语法：两个标记序列意味着函数是纯的，仅此而已。而且你不能用其他任何东西替换任何一个标记：`= 0L`例如，这是不合法的。

您收到错误的原因仅仅是因为不允许使用语法。由于历史原因，如果没有别的。如果要为纯虚函数提供定义，则必须在类之外进行。

如果*你*提供一个纯虚函数的定义，你可以从构造函数中调用它；您只需要停用虚拟呼叫机制；例如`A::pVirt()`。如果实际的函数调用涉及动态解析，并且解析结果是纯虚函数，则无论函数是否定义，都是未定义行为。这里的动机是让你不要定义它；通常，无论你调用与否，都必须定义一个虚函数，因为编译器必须将它的地址放在 中`vtable`，如果没有定义，就没有地址。使函数成为纯虚函数告诉编译器它不应该将它的地址放在`vtable`. 所以你不必定义它。但是如果您尝试通过 vtable 调用该函数，您可能会感到惊讶。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T12:23:52.297

虚函数后面的`= 0`意思是“这是纯虚函数，必须在派生函数中实现”。与您的示例一样，仍然可以实现该功能。它本身没有其他含义——您不能使用其他数字、地址或其他任何东西。你可以有几个函数`=0`，它仍然是相同的含义。

# css - 为什么 CSS 媒体查询在 Text Mate 1 中被标记为无效？

> ID：14728955
> 
> 赞同：0
> 
> 时间：2013-02-06T12:20:26.460
> 
> 标签：css, media-queries, textmate

在我的 TextMate 1 版本（最新版本）中，所有媒体查询都被标记为无效，这让我很困扰：

```
@media screen and (max-width: 320px) {
...
} 
```

如何解决这个问题？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:23:21.183

因为它们*是*无效的。`max-width`应该在括号中。

```
@media screen and (max-width: 320px) {
...
} 
```

* * *

问题更新后编辑 - 使用括号，它在最新版本的 TextMate 中验证良好。

![在此处输入图像描述](../Images/59eb5a7182527b8557439f2e5e707601.png)

# php - 有没有办法在 PHP 中捕获未定义的全局变量，并提供一个值，如自动加载，但用于变量？

> ID：14728957
> 
> 赞同：1
> 
> 时间：2013-02-06T12:20:28.237
> 
> 标签：php, autoload, globals

我们有很多现有的代码，而不是创建一个类的实例，或者在该类上使用静态函数，而是在该类的全局单例上调用该方法。

例如（stringclass.php）：

```
class String {
   function endsWith($str, $search) { 
      return substr($str, -strlen($search)) == $search;
   }
}
$STRING_OBJECT = new String(); 
```

然后它将以下列方式使用它：

```
include_once("stringclass.php");
if ($STRING_OBJECT->endsWith("Something", "thing")) {
   echo "It's there\n";
} 
```

我意识到这不是一种非常明智的调用函数的方式，但我想知道我们是否可以修复所有人们忘记使用自动加载器包含正确类的地方，而无需更改使用这些单例的所有代码. 它将检测未声明的全局变量的使用，并根据被引用的全局变量的名称包含正确的类文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:48:52.973

您可以使用 ArrayAccess 接口

[http://php.net/manual/en/class.arrayaccess.php](http://php.net/manual/en/class.arrayaccess.php)

```
class Ztring implements arrayaccess
{
    private $container = array ();

    public function offsetSet ($offset, $value)
    {
        $this->container[$offset] = $value;
    }

    public function offsetGet ($offset)
    {
        // exception
        if ($offset == 'something')
        {
            return 'works!';
        }

        return $this->container[$offset];
    }

    public function offsetExists ($offset)
    {
        return isset($this->container[$offset]);
    }

    public function offsetUnset ($offset)
    {
        unset ($this->container[$offset]);
    }
}

$x = new Ztring ();

$x['zzz'] = 'whatever';
echo $x['zzz']."\n";

echo $x['something']."\n"; 
```

# android - Android 设备关机 - 想要“ShutdownThread->shutdown()”而不是“su reboot -p”

> ID：14728959
> 
> 赞同：5
> 
> 时间：2013-02-06T12:20:40.163
> 
> 标签：android, shutdown, android-permissions

关于关闭有根安卓设备的几个问题都有答案说你应该在“su”外壳中运行“rebo​​ot -p”。但是，[这个答案](https://stackoverflow.com/questions/9598522/android-root-poweroff/9600769)说重新启动是非常低级和肮脏的，并且在拔掉插头之前没有做足够的整理。相反，它建议使用`android.internal.app.ShutdownThread.shutdown()`. 查看[代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/com/android/internal/app/ShutdownThread.java#ShutdownThread.shutdown%28android.content.Context,boolean%29)，我可以看到它做了一大堆我想要的家务，而且它还有一个方便的“确认”参数，似乎让您无需确认即可关闭，这很好。

我的问题是 - 应用程序必须具备哪些属性才能调用`ShutdownThread.shutdown()`？如果设备已植根，是否需要可以设置的特定权限，或者是否必须使用固件密钥或完全其他方式进行签名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-29T01:00:56.000

关闭设备需要您持有`android.permission.SHUTDOWN`仅对系统应用程序或使用平台证书签名的应用程序可用的设备。

# selenium-webdriver - 如何在不执行/不执行 InitElements 的情况下获取 PageFactory 中的最新对象？

> ID：14728960
> 
> 赞同：1
> 
> 时间：2013-02-06T12:20:42.833
> 
> 标签：selenium-webdriver

我在 selenium 框架（WebDriver，Java）中使用 PageFactory 模型。

测试：在应用程序中创建一个实体并等待它完成（要验证实体的状态（已完成/正在进行），我必须在创建的实体前面验证状态图像）。

问题/查询： *** * 我应该如何等待特定状态应该从进行中更改为完成？（因为完成后整个页面没有刷新，只有该图像正在刷新 - AJAX/JSON 调用）

***我应该如何使用 PageFactory 获取最新的页面对象？我曾尝试使用 PageFactory.InitElements(driver, classname.class)，但它不起作用。

*** *有什么办法，我们只能刷新PageFactory Cache？像具有“BrowserPage.FlushCache()”的 SilkTest？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T15:08:39.817

使用 @FindBy 注释定义的 WebElement 是有效的代理。每次使用 WebElement 执行操作时，它都会使用 @FindBy 注释中的定位器再次在页面上查找该元素。

PageFactory.InitElements(driver, classname.class) 只是设置这些代理，它实际上并没有找到元素，所以你不需要一次又一次地调用它。

您可以使用 @CacheLookup 注释缓存单个 WebElement，如果您使用它，WebElement 将在您第一次使用它时被延迟评估，但从那时起它将不再被查找（这意味着您可以开始获取 StaleElementExceptions如果元素发生变化）。

最新信息保存在 Selenium Wiki 中：

[http://code.google.com/p/selenium/wiki/PageFactory](http://code.google.com/p/selenium/wiki/PageFactory)

# php - 用于将联系表发送到电子邮件的 PHP 脚本

> ID：14728962
> 
> 赞同：0
> 
> 时间：2013-02-06T12:21:01.800
> 
> 标签：php, email

我在我的联系表格中使用以下 PHP 脚本向我的电子邮件地址发送查询。我使用 XAMP 对其进行了测试，但没有收到任何电子邮件。这是因为它是在本地主机上测试的，还是我的代码有问题？请在下面查看并告诉我，因为您可以告诉我我对 PHP 很陌生。

谢谢，

乔。

```
 <?php
    if(isset($_POST['email'])) {

    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "angliojoe@gmail.com";
    $email_subject = "eMail enquiry";

     function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted.         ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['first_name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['telephone']) ||
        !isset($_POST['comments'])) {
        died('We are sorry, but there appears to be a problem with the form you   submitted.');       
    }

    $first_name = $_POST['first_name']; // required
    $email_from = $_POST['email']; // required
    $telephone = $_POST['telephone']; // not required
    $comments = $_POST['comments']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
          if(!preg_match($string_exp,$first_name)) {
           $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
         if(strlen($comments) < 2) {
          $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
           if(strlen($error_message) > 0) {
           died($error_message);
  }
           $email_message = "Form details below.\n\n";

        function clean_string($string) {
          $bad = array("content-type","bcc:","to:","cc:","href");
          return str_replace($bad,"",$string);
        }

        $email_message .= "First Name: ".clean_string($first_name)."\n";
        $email_message .= "Email: ".clean_string($email_from)."\n";
        $email_message .= "Telephone: ".clean_string($telephone)."\n";
        $email_message .= "Comments: ".clean_string($comments)."\n";

    // create email headers
    $headers = 'From: '.$email_from."\r\n".
     'Reply-To: '.$email_from."\r\n" .
    'X-Mailer: PHP/' . phpversion();
    @mail($email_to, $email_subject, $email_message, $headers);  
    ?>

    <!-- include your own success html here -->

     Thank you for contacting us. We will be in touch with you shortly.

     <?php
     }
     ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:21:34.023

是的，这可能是因为您的本地计算机上没有安装邮件服务器。

您可能想尝试将其上传到还安装了电子邮件服务器的 Linux Web 服务器（我假设您使用的是 Windows）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:34:08.400

您可以尝试使用 PHPMailer，但是您需要一个 smtp 服务器。[sourceforge 的 PHPMailer](http://sourceforge.net/projects/phpmailer/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:41:44.593

删除 mail() 之前的 @ 符号并检查 apache 错误日志以了解实际的邮件程序问题。

**注意：**问题应该在邮件配置中。您必须在 php.ini 中定义 smtp 详细信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T12:49:49.747

检查 phpinfo(); 是否有任何 smtp 条目？发邮件？如果你安装了 smtp 服务器然后打电话给 mail('you@yourmail.com','subject','bodyMessage') 看看你有没有收到邮件？

# c# - Linq2SQL 生成的奇怪 SQL

> ID：14728963
> 
> 赞同：3
> 
> 时间：2013-02-06T12:21:04.443
> 
> 标签：c#, sql, linq, linq-to-sql

我有一个如下所示的 linq 查询：（更大查询的一部分，但这说明了问题）

```
from guarantee in tblGuarantees
from nextExptDev in
            (from gd in tblGuaranteeDevaluations
             where gd.fkGuaranteeId == guarantee.pkGuaranteeId &&
                   gd.Date == null
             orderby gd.ExpectedDate ascending
             select new
             {
                gd.Sum,
                gd.CurrencyId,
                gd.ExpectedDate
             }).Take(1).DefaultIfEmpty()
select new
{
    guarantee.pkGuaranteeId,
    nextExptDev.Sum,
    nextExptDev.CurrencyId,
    nextExptDev.ExpectedDate
} 
```

它生成以下 SQL：

```
SELECT [t0].[pkGuaranteeId],
       [t3].[Sum]          AS [Sum],
       [t3].[CurrencyId]   AS [CurrencyId],
       [t3].[ExpectedDate] AS [ExpectedDate2]
FROM   [dbo].[tblGuarantee] AS [t0]
       CROSS APPLY ((SELECT NULL AS [EMPTY]) AS [t1]
                    OUTER APPLY (SELECT TOP (1) [t2].[Sum],
                                                [t2].[CurrencyId],
                                                [t2].[ExpectedDate]
                                 FROM   [dbo].[tblGuaranteeDevaluation] AS [t2]
                                 WHERE  ( [t2].[fkGuaranteeId] = [t0].[pkGuaranteeId] )
                                        AND ( [t2].[Date] IS NULL )
                                 ORDER  BY [t2].[ExpectedDate]) AS [t3])
ORDER  BY [t3].[ExpectedDate] -- Why here? 
```

我的问题是，为什么最后一个`ORDER BY`？在我更大的查询中，这确实会损害性能，我无法弄清楚为什么需要它。

此外，任何关于以更好的方式编写此内容的提示都值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:43:22.720

在查询中，您正在执行 order by

```
from gd in tblGuaranteeDevaluations
         where gd.fkGuaranteeId == guarantee.pkGuaranteeId &&
               gd.Date == null
         orderby gd.ExpectedDate ascending 
```

这使得内部查询在内部块中按顺序进行

```
SELECT TOP (1) [t2].[Sum], [t2].[CurrencyId], [t2].[ExpectedDate]
    FROM [dbo].[tblGuaranteeDevaluation] AS [t2]
    WHERE ([t2].[fkGuaranteeId] = [t0].[pkGuaranteeId]) AND ([t2].[Date] IS NULL)
    ORDER BY [t2].[ExpectedDate] 
```

但是您正在“加入” 2 个不同的集合，即空集和内部块集，为此，为了确保顺序，代码必须为“加入”的结果集设置另一个**order by**，所以为什么order 在外部集合中，是自动代码生成，但是由于集合已经排序，最后一个**order by**不应该降低性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T20:32:16.550

如果你`DefaultIfEmpty()`用`Take(1)`通话切换会发生什么？用一个`FirstOrDefault`电话代替两者怎么样？只使用`let nextExptDev = ...`而不是`from nextExptDev in ...`呢？

为我尝试最后一件事......似乎将 放在`order by`投影中是向查询的其余部分传达您希望整个事物按此排序。相反，看看您是否可以从订购的源中选择它。即：`from gd in tblGuaranteeDevaluations.OrderBy(t => t.ExpectedDate)`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T21:05:17.107

in your query you're doing this:

`orderby gd.ExpectedDate ascending` and that is reflected in the SQL generated.

# python - 二维最小二乘拟合

> ID：14728966
> 
> 赞同：1
> 
> 时间：2013-02-06T12:21:19.560
> 
> 标签：python, curve-fitting, least-squares

我有一个二维数据集，有一些固定维度（`xLen`和`yLen`），其中包含一条正弦曲线。

我已经确定了正弦曲线的频率，并且我已经使用频率生成了我自己的正弦数据

```
SineData = math.sin((2*math.pi*freqX)/xLen + (2*math.pi*freqY)/yLen) 
```

其中`freqX`和`freqY`以及曲线在 X 和 Y 方向上的振荡频率。

但现在我想做一个线性最小二乘拟合（或类似的东西），这样我就可以拟合正确的幅度。据我所知，线性最小二乘法是正确的方法，但如果有另一种方法也可以。

该`leastsq`功能是 SciPy 不进行多维拟合。是否有用于 2/多维最小二乘拟合算法的 python 实现

**编辑：**我从二维 FFT 中找到了正弦波的二维频率。数据包含 2D 正弦 + 噪声，所以我只选择了 2D FFT 的最大峰值并取其倒数。现在我有一条正弦曲线，但幅度是关闭的。有没有办法做一个二维最小二乘（或类似的），并拟合幅度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:25:17.967

如果您的数据可以通过使用三角函数得到很好的服务，您还可以考虑使用 2D 有限/离散傅里叶变换 (FFT/DFT)。

NumPy 内置了[DFT](http://docs.scipy.org/doc/numpy/reference/routines.fft.html)解决方案。

有很多地方可以帮助您入门；谷歌找到[了这个](https://dsp.stackexchange.com/questions/724/low-pass-filter-and-fft-for-beginners-with-python)。

从您的原始数据开始。变换将告诉您您的频率解决方案是否正确以及是否还有其他重要的频率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T20:15:47.747

在最小二乘拟合中，最小化残差函数，可能是卡方。由于这涉及对与模型减去数据的每个点的差平方相对应的估计求和，因此在制作残差时“忘记”了维数。因此，二维差分函数数组中的所有值都可以复制到一维数组，作为提供给例如 的残差函数的结果`leastsq`。在我对这个问题的回答中给出了复数到实数而不是 2D 到 1D 的示例：[Least Squares Minimization Complex Numbers](https://stackoverflow.com/questions/16745588/least-squares-minimization-complex-numbers/20104454#20104454)

# php - Magento：货币变化不会影响前端

> ID：14728967
> 
> 赞同：1
> 
> 时间：2013-02-06T12:21:21.730
> 
> 标签：php, magento, currency

我最近设法将我的网站迁移/复制到新主机。

现在我想更改网站的货币，我去典型的 Admin > Config > General --> Currency Options: Deslelect all other currency that I didn't, and Change the **Display Currency** to what it has to, but still未能显示正确的货币...

我重新索引，没有运气清理chache，有人知道如何强制吗？万一没有别的办法？

提前致谢！:D

干杯。

**20023 年 7 月 2日更新：** 我更改了以下 xml，以尝试更改区域设置选项并为秘鲁新索尔添加缺少的符号：en.xml en_US.xml es.xml es_ES.xml config.xml（上的那个`lib/Zend/Data..`）

有趣的是，在 Magento 的后端，它显示正确的货币 (S/.) 但我不知道为什么它不会显示在前端...我清理了所有可能的缓存，甚至是会话文件夹，但它仍然没有'不要从欧元改变......

有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-29T18:39:56.600

我有一个类似的问题。我发现问题是：

1）我没有为新添加的货币设置汇率（因此系统无法计算新汇率中的价格）。解决方案：系统 -> 管理货币 -> 汇率 -> 导入然后保存。

2) 我自己的浏览器被cookies 使用特定货币，因为我在网站上使用了货币兑换器（在前端，即最终用户的视图中）。解决方法：货币选择器，或者删除cookies。

# memory - 速度比较eeprom-flash-sram

> ID：14728968
> 
> 赞同：12
> 
> 时间：2013-02-06T12:21:27.137
> 
> 标签：memory, avr

目前为 atmel tiny45 微控制器编码，我使用了几个查找表。存放它们的最佳地点在哪里？您能否大致了解一下 sram-flash-eeprom 之间的内存速度差异？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T11:06:37.377

EEPROM 是迄今为止最慢的替代方案，写入访问时间在 10 毫秒左右。读取访问与 FLASH 访问一样快，加上地址设置和触发的开销。因为 EEPROM 的地址寄存器没有自动递增，所以*每个*字节读取至少需要 4 条指令。

SRAM 访问是最快的（直接寄存器访问除外）。

FLASH 比 SRAM 慢一点，并且在每种情况下都需要间接寻址（Z 指针），SRAM 访问可能需要也可能不需要，具体取决于表的结构和访问模式。

有关指令的执行时间，请参阅[AVR 指令集](http://www.atmel.com/images/doc0856.pdf)，尤其是`LPM`与`LDS`、`LD`和`LDD`指令的对比。

# ios - 用 UIWebView 滚动 UIImageView？

> ID：14728969
> 
> 赞同：0
> 
> 时间：2013-02-06T12:21:29.013
> 
> 标签：ios, webview, scrollview

所以我有一个 UIScrollView，里面有一个图像，下面我有一个 webView。我怎样才能使当我向上/向下滚动 webView 时，滚动视图也会向上/向下滚动？就像在 Safari 中滚动一样，URL 栏也会随之移动。

这是我正在使用的：

![帽子电影](../Images/eee896ae738f203b5b3dd086b83029ee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:23:58.870

*   首先在另一个 UIScrollVIew 中添加 UIWebView 和 UIScrollView+UIimageView
*   通过迭代其子视图来禁用 UIWebView 的本机滚动
*   禁用包含 UIImageView 的 UIScrollView 的滚动

通过这样做将有助于您的事业

# asp.net-mvc-3 - Orchard CMS 小部件显示类型

> ID：14728974
> 
> 赞同：4
> 
> 时间：2013-02-06T12:21:34.943
> 
> 标签：asp.net-mvc-3, orchardcms

我有一个小部件，它使用查询来显示详细信息。是否可以指定小部件的显示类型（查询使用摘要并且全部显示为我想要的），因为小部件的标题具有详细的显示类型，我希望它使用摘要，因此我可以覆盖形状当我将它放在不同的部分（主要是标题文本）时，但在内容区域中时，我希望它是详细信息。我正在使用引导主题。所以基本上，如果我将我的小部件粘贴在除内容之外的任何地方，我希望它使用摘要

希望这是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T15:11:02.717

啊，我们又见面了。

小部件在一个名为 的类中构建并注入到布局中`Orchard.Widgets.Filters.WidgetFilter`。似乎没有任何方法可以修改用于小部件的显示类型（默认`WidgetFilter`使用默认值“详细信息”）。

为了解决这个问题，您可以使用自己的`WidgetFilter`. 将现有代码复制到您自己的类中，并为您的类添加一个`[OrchardSuppressDependency("Orchard.Widgets.Filters.WidgetFilter")]`属性。这将确保现有`WidgetFilter`的未被使用，而您的被使用。

如果您通读该`OnResultExecuting`方法，您会看到在接近尾声的地方有一个对`BuildDisplay`. 此方法的第二个参数可以是显示类型。您可以检查`widgetPart.Record.Zone`小部件的放置位置，并相应地为 displayType 参数传递不同的值。

我不确定这是否是最优雅的方式，但这是我要开始的地方。也许其他人可能有一个更整洁的解决方案。

# c# - 在 PixelSense / WPF 中的 SurfaceListBox 中进行滑动过渡

> ID：14728994
> 
> 赞同：0
> 
> 时间：2013-02-06T12:22:22.863
> 
> 标签：c#, wpf, swipe, pixelsense

我有一个`SurfaceListBox`使用`ScrollViewer.CanContentScroll="True"`，所以过渡看起来不像是连续拖动，但它是即时的，你可以在这里看到它是如何工作的：http: [//youtu.be/zyWmiN8GtpI](http://youtu.be/zyWmiN8GtpI)。
这里有两个问题：过渡是即时的；当我走到尽头并向右滑动（以获取左侧的项目）时，它会将我送回第一个项目。现在我想为此添加一个滑动效果过渡，就像您在大多数智能手机上看到的那样，您可以在这里看到：http: [//youtu.be/O9xGHRL0Zn4](http://youtu.be/O9xGHRL0Zn4)，这两种方式都可以正常工作。

我正在使用`SurfaceListBox`，但这可以通过其他方式进行，只需使用 WPF。
我环顾四周，在 WPF 中发现了一些东西，但对于我的目的来说都过于复杂了。

有人对如何做到这一点有任何建议吗？

*可以在此处下载带有 SurfaceListBox 的示例项目：http: [//sdrv.ms/TJd3oy](http://sdrv.ms/TJd3oy)