# StackOverflow 问答 15414000-15414999

# python - python中的多线程 - 阻止在后台运行的调用

> ID：15414001
> 
> 赞同：4
> 
> 时间：2013-03-14T15:52:54.200
> 
> 标签：python, multithreading, udp

我最近一直在研究一个程序（正如你可能从我之前提出的问题中看到的那样），我在理解和实现多线程方面遇到了真正的麻烦。

我按照教程（[二进制潮汐](http://www.binarytides.com/python-socket-programming-tutorial/2/)）设置了一个 UDP 服务器，效果很好。但是，我遇到的问题是，当我在新线程上创建阻塞 UDP 套接字时，我在最初创建线程的主程序中的代码不起作用。这是我的一些代码：

主要.py：

```
from thread import*
import connections

start_new_thread(networkStart.startConnecton())
print 'This should print!' 
```

网络启动.py：

```
def startConnecton():
    userData.s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)  
    print 'Socket created'
    try:
        userData.s.bind((HOST, PORT))
    except socket.error, msg:
        print 'Bind failed. Error code: ' +str(msg[0]) + 'Message' +msg[1]
        sys.exit()
    print 'Socket bind complete'
    userData.s.listen(10) 
    # Set the socket to listening mode, if there are more than 10 connections waiting reject the rest
    print 'Socket now listening' 
    #Function for handling connections. Each new connection is handled on a separate thread
    start_new_thread(connections.connectionListen()) 
```

连接.py：

```
def connectionListen():
    while 1:
            print 'waiting for connection'
            #wait to accept a connection - blocking call
            conn, addr = userData.s.accept()
            userData.clients += 1
            print 'Connected with ' + addr[0] + ':' + str(addr[1])
            #start new thread takes 1st argument as a function name to be run, second is the tuple of arguments 
            start_new_thread(users.clientthread ,(conn, userData.clients)) 
```

我基本上只是希望能够在新线程上调用 startConnection 函数后执行 main.py 中的任何代码（即，在此实例中打印字符串）。

我一直在为这个程序苦苦挣扎，Python 对我来说是新的，我发现它很有挑战性。我假设我在实现多线程的方式上一定犯了一些错误，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:21:56.977

`start_new_thread`接收一个函数和一个参数列表，但您直接使用函数调用：`start_new_thread(networkStart.startConnecton())`.

但是，我建议您使用具有更高抽象级别的`threading`模块（[官方文档这样做）。](http://docs.python.org/2/library/thread.html)

```
import threading
import connections

threading.Thread(target=networkStart.startConnecton).start()
print 'This should print!' 
```

# sql - SQL SSAS 计算成员显示 #NUM！在多维数据集？

> ID：15414005
> 
> 赞同：1
> 
> 时间：2013-03-14T15:53:15.323
> 
> 标签：sql, sql-server, ssas

我在我的 SQL Server 2008 SSAS 多维数据集中定义了 3 个计算成员。

```
CALCULATE;         
/* Calculate Sales Volume */
CREATE MEMBER CURRENTCUBE.[Measures].[Ship Volume]
 AS [Measures].[QTY SHIPPED] + [Measures].[QTY ADJUST], 
FORMAT_STRING = "Standard", 
NON_EMPTY_BEHAVIOR = { [QTY SHIPPED], [QTY ADJUST] }, 
VISIBLE = 1 ,  DISPLAY_FOLDER = 'Calculated Members' ,  ASSOCIATED_MEASURE_GROUP = 'Sales';       
CREATE MEMBER CURRENTCUBE.[Measures].[Avg Price USD]
 AS [Measures].[NET SALES] / [Measures].[SHIP VOLUME], 
FORMAT_STRING = "Standard", 
VISIBLE = 1 ,  DISPLAY_FOLDER = 'Calculated Members' ,  ASSOCIATED_MEASURE_GROUP = 'Sales'  ;    
CREATE MEMBER CURRENTCUBE.[Measures].[Avg Price CAD]
 AS [Measures].[NET SALES CAD] / [Measures].[SHIP VOLUME], 
FORMAT_STRING = "Standard", 
VISIBLE = 1 ,  DISPLAY_FOLDER = 'Calculated Members' ,  ASSOCIATED_MEASURE_GROUP = 'Sales'  ; 
```

语法工作正常，但是当我通过 Excel 查看我的多维数据集时，一些值有 #NUM！作为价值..不知道这是为什么？这是因为除以零的问题吗？我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:00:09.353

也许检查 -`A/B = C`如果`B`不等于 0 ？：

```
CALCULATE;         
/* Calculate Sales Volume */
CREATE MEMBER CURRENTCUBE.[Measures].[Ship Volume]
 AS [Measures].[QTY SHIPPED] + [Measures].[QTY ADJUST], 
FORMAT_STRING = "Standard", 
NON_EMPTY_BEHAVIOR = { [QTY SHIPPED], [QTY ADJUST] }, 
VISIBLE = 1 ,  DISPLAY_FOLDER = 'Calculated Members' ,  ASSOCIATED_MEASURE_GROUP = 'Sales';       
CREATE MEMBER CURRENTCUBE.[Measures].[Avg Price USD]
 AS Case
    When IsEmpty([Measures].[SHIP VOLUME] )
    THEN 0
    ELSE [Measures].[NET SALES] / [Measures].[SHIP VOLUME] END, 
FORMAT_STRING = "Standard", 
VISIBLE = 1 ,  DISPLAY_FOLDER = 'Calculated Members' ,  ASSOCIATED_MEASURE_GROUP = 'Sales'  ;    
CREATE MEMBER CURRENTCUBE.[Measures].[Avg Price CAD]
 AS Case
    When IsEmpty([Measures].[SHIP VOLUME] )
    THEN 0
    ELSE [Measures].[NET SALES CAD] / [Measures].[SHIP VOLUME] END, 
FORMAT_STRING = "Standard", 
VISIBLE = 1 ,  DISPLAY_FOLDER = 'Calculated Members' ,  ASSOCIATED_MEASURE_GROUP = 'Sales'  ; 
```

你也可以尝试改变`IsEmpty([Measures].[SHIP VOLUME] )`

到`[Measures].[SHIP VOLUME]=0`

**编辑**

尝试将其更改`IsEmpty([Measures].[SHIP VOLUME] )`为

`[Measures].[SHIP VOLUME] is null OR [Measures].[SHIP VOLUME]=0`

# xamarin.ios - 应用程序在 6.x 上崩溃（设备 + 模拟器）

> ID：15414007
> 
> 赞同：0
> 
> 时间：2013-03-14T15:53:21.733
> 
> 标签：xamarin.ios

有一个在 5.x 中运行良好但在 6.x 上崩溃的应用程序 - 尝试了所有方法，但没有正确的错误日志等

当应用程序在设备上崩溃时，它会导致设备显示 Apple 标志，我必须进行恢复才能修复设备。同时它也会导致模拟器崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:02:24.657

参考错误：

[https://bugzilla.xamarin.com/show_bug.cgi?id=11126](https://bugzilla.xamarin.com/show_bug.cgi?id=11126)

这是 Xamarin Studio IDE 中的一个问题。

# winforms - 在 WinForms 中拖放实体框架对象集

> ID：15414008
> 
> 赞同：0
> 
> 时间：2013-03-14T15:53:25.707
> 
> 标签：winforms, entity-framework-5

在 WinForms 4.5 中，我从数据库中添加了一个 EntityModel。

然后，在 DataSource 窗口中，我可以看到实体集。但是，它不允许我将它们拖放到表单上。

如果我创建一个代理类，它只有

```
List<Customer> {get;set;} 
```

然后我可以在 DataSource 窗口中查看并拖放。

设计师只寻找 IList<>，而不是 ObjectSet<> 的问题？

我做错了什么还是只是它在 VS12 中的工作方式？

# sharepoint - 通过 odata 更新共享点项目多查找字段

> ID：15414010
> 
> 赞同：2
> 
> 时间：2013-03-14T15:53:32.653
> 
> 标签：sharepoint, odata

我需要一些帮助来整理一些语法，以便从应用程序更新到 sharepoint 中的列表项。以下是有关情况的简要说明：

此 sp 站点中有两个列表。一个列表是产品列表，第二个列表是定价。然而，这些列表的设置方式是一对多的方案。一种产品可以有多个定价记录。然后，该产品有一个针对它的列，该列是一个支持多个值的查找字段。

使用 REST 和 oData 我现在可以很容易地查询和获取定价信息，但我的问题是当我需要更新产品记录以添加价格时。

对于常规查找字段，我通常只为对象设置 ID 属性，然后为该列表调用 update 和 savechanges 方法。然而，定价列支持多条记录，无需设置 ID，并且该字段是一个排序数组。添加定价对象（列表项）并更新和保存更改实际上并没有保存。没有抛出错误，但是当查看列表时它实际上并没有保存。

如何向我的产品添加价格查询？

我写了一个小方法来查询每个价格并将它的初始价格添加到下面的产品中进行测试：

```
InventoryCatalogDataContext dc = new InventoryCatalogDataContext(_pushinTinSvc);
        dc.Credentials = CredentialCache.DefaultCredentials;

        List<PricingItem> pricing = (from q in dc.Pricing
                                     select q).ToList<PricingItem>();

        foreach (PricingItem price in pricing)
        {                
            var query = (DataServiceQuery<ProductsItem>)
                        dc.Products
                        .Expand("Pricing")
                        .Where(p => p.Id.Equals(price.StockCodeId));

            List<ProductsItem> prods = query.ToList<ProductsItem>();
            ProductsItem product = prods[0];

            product.Pricing.Add(price);
            dc.UpdateObject(product);
        }

        try
        {
            dc.SaveChanges();
        }
        catch (Exception ex)
        {
            string stopHere = ex.Message;
        } 
```

我不确定我做错了什么或者这是一个错误。如果我在 SaveChanges 之后检查该项目，该项目仍然附加了定价项目查找，显示计数为 1。在代码块的末尾，如果我重新查询该产品，那么它甚至仍然具有附价格。但是，一旦该方法完成并返回 UI，定价不再附加，当您查看 sharepoint 中的列表时，这些字段为空，但版本确实会增加。所以我有点失落...

# php - PHP POST表单验证错误

> ID：15414012
> 
> 赞同：0
> 
> 时间：2013-03-14T15:53:36.397
> 
> 标签：php

我有一个 HTML 表单：

```
 <div id="registration">
  <p> SGU is for youth who have completed 6th through 12th grades. Please complete this entire form for EACH CAMPER. (<a href="PDFs/SGU_Registration_Form_2013.pdf">Download Form to Print</a>)<br />
  <br />
  * Denotes required field</p>
  <form action="form-to-email.php" method="post" name="camper_registration" id="camper registration">

  <label>Last Name*: </label>
  <input name="lastname" type="text" id="lastname" required="required"/>
  <br />
  <label>First Name*: </label><input name="firstname" type="text" id="firstname" required="required"/><br />
  <label>Middle Initial: </label><input type="text" name="initial" size=1 maxlength=1 /><br /><br />

  <label>Street Address*: </label><input name="streetaddress" type="text" id="streetaddress" required="required"/><br />
  <label>Address Line 2: </label><input type="text" name="addressline2" /><br />
  <label>City*: </label><input name="city" type="text" id="city" required="required"/><br />
  <label>State/Province/Region*: </label><input name="state" type="text" id="state" required="required"/><br />
  <label>Zipcode*: </label>
  <INPUT NAME="zip" input type="tel" SIZE=5 MAXLENGTH=5
     onKeyPress="return numbersonly(this, event)" required="required"><br /><br />
  <label>Youth's Email*: </label><input type="email" name="email" id="email" required="required"/><br /><br />
  <label>Youth's Cell*: </label>(<input type="tel" name="youth_area" size="3" maxlength="3" onKeyPress="return numbersonly(this, event)" required="required" />) <input type="tel" name="youth_phone" size="7" maxlength="7" onKeyPress="return numbersonly(this, event)" required="required" /><SCRIPT TYPE="text/javascript">
  <!--
  autojump("youth_area", "youth_phone", 3);
  //-->
  </SCRIPT><br /><br />
  <label>Date of Birth*: </label><INPUT NAME="month" input type="tel" SIZE=2 MAXLENGTH=2
     onKeyPress="return numbersonly(this, event)" required="required">/
     <INPUT NAME="day" input type="tel" SIZE=2 MAXLENGTH=2
     onKeyPress="return numbersonly(this, event)" required="required">/
     <INPUT NAME="year" input type="tel" SIZE=4 MAXLENGTH=4
     onKeyPress="return numbersonly(this, event)" required="required">
      <SCRIPT TYPE="text/javascript">
      autojump("month", "day", 2); autojump("day", "year", 2);
      </SCRIPT><br /><br />
  <label>Grade completed in<br /> Spring 2013*: </label><input type="tel" name="grade" size=2 maxlength=2 required="required"/><br /><br />
  <label>Gender*:</label><input type="radio" name="gender" value="Male" required="required"> Male
  <input type="radio" name="gender" value="Female" required="required"> Female
  <br /> <br />
  <label>Parent/Guardian(s) First Name*: </label><input name="guardian_first" type="text" id="guardian_first" required="required"/><br /><br />
  <label>Parent/Guardian(s) Last Name*: </label><input name="guardian_last" type="text" id="guardian_last" required="required"/> <br /><br />
  <label>Parent Phone*: </label>(<INPUT NAME="areacode" input type="tel" SIZE=3 MAXLENGTH=3
     onKeyPress="return numbersonly(this, event)" required="required">)<INPUT NAME="cellphone" input type="tel"SIZE=7 MAXLENGTH=7
     onKeyPress="return numbersonly(this, event)" required="required"><br />
     <SCRIPT TYPE="text/javascript">
  <!--
  autojump("areacode", "cellphone", 3);
  //-->
  </SCRIPT>
  <label>Parent/Guardian Email*: </label><input name="parent_email" type="email" id="parent_email" required="required"/><br />
  <b>This email will be used for confirmation of <br />
  registration and all future contact</b><br /><br />
  <label>1st Emergency Contact*: </label><input name="emergency_contact_1" type="text" id="emergency_contact_1" required="required"/><br />
  <label>Contact Number*: </label>(<INPUT NAME="emergency_contact_1_areacode" input type="tel" SIZE=3 MAXLENGTH=3
     onKeyPress="return numbersonly(this, event)" required="required">)<INPUT NAME="emergency_contact_1_phone" input type="tel"SIZE=7 MAXLENGTH=7
     onKeyPress="return numbersonly(this, event)" required="required"><br /><br />
     <SCRIPT TYPE="text/javascript">
  <!--
  autojump("emergency_contact_1_areacode", "emergency_contact_1_phone", 3);
  //-->
  </SCRIPT>
  <label>2nd Emergency Contact*: </label><input name="emergency_contact_2" type="text" id="emergency_contact_2" required="required"/><br />
  <label>Contact Number*: </label>(<INPUT NAME="emergency_contact_2_areacode" input type="tel" SIZE=3 MAXLENGTH=3
     onKeyPress="return numbersonly(this, event)" required="required">)<INPUT NAME="emergency_contact_2_phone" input type="tel"SIZE=7 MAXLENGTH=7
     onKeyPress="return numbersonly(this, event)" required="required"><br /><br />
        <SCRIPT TYPE="text/javascript">
  <!--
  autojump("emergency_contact_2_areacode", "emergency_contact_2_phone", 3);
  //-->
  </SCRIPT>
  <label>Name of Home Church: </label><input type="text" name="home_church" /><br />
  <label>Phone Number: </label>(<INPUT NAME="church_areacode" input type="tel" SIZE=3 MAXLENGTH=3
     onKeyPress="return numbersonly(this, event)">)<INPUT NAME="church_phone" input type="tel"SIZE=7 MAXLENGTH=7
     onKeyPress="return numbersonly(this, event)"><br />
        <SCRIPT TYPE="text/javascript">
  autojump("church_areacode", "church_phone", 3);
  </SCRIPT>
  <label>Contact Person: </label><input type="text" name="contact_person" /><br /><br /> 
  <b>Special Needs</b><br />
  Some campers may have needs that might require special attention from our staff; accessibility, health concerns, diet, allergies, etc. <br /><br />
  <label>Please list any special needs: </label>
  <textarea rows="10" cols="20" name="special_needs">
  </textarea> <br /><br />
  <label>T-Shirt Size*: </label><input type="radio" name="shirt size" value="Small" required="required"> Small
  <input type="radio" name="shirt size" value="Medium" required="required"> Medium
  <input type="radio" name="shirt size" value="Large" required="required"> Large
  <input type="radio" name="shirt size" value="XL" required="required"> XL
  <input type="radio" name="shirt size" value="2XL" required="required"> 2XL<br /><br />
  <b>Roommate</b><br />
  There are double and many single occupancy dorm rooms at Grinnell college campus - if possible we will honor your request for ONE preferred roommate.<br /><br />
  <label>Roommate Preference: </label>
  <input type="text" name="roommate" /><br /><br />
  <div id="satellites">
        <p><b>Satellite Choices</b>
          List your first, second, and third choices.  You will be given your first choice if it is not full.  ALL events have limited capacity. If you do not choose a satellite, one will be assigned for you.<br /><br />
          <label>First Choice*: </label>
          <select name="satellite1" id="satellite1" required="required" onchange="clearOthers()">
            <option value="" disabled>Select</option>
            <option value="art">Art</option>
            <option value="basketball">Basketball</option>
            <option value="dance">Dance</option>
            <option value="drama">Drama</option>
            <option value="football">Football</option>
            <option value="missions">Missions</option>
            <option value="photo1">Landscape & Still Life Photography</option>
            <option value="photo2">People Photography</option>
            <option value="scrap-booking">Scrap-Booking</option>
            <option value="sgjr">Summer Games Jr. Training</option>
            <option value="soccer">Soccer</option>
            <option value="ultimate">Ultimate Frisbee</option>
            <option value="video_games">Video Games</option>
            <option value="volleyball">Volleyball</option>
            <option value="water_park">Water Park</option>
          </select><br />

          <label>Second Choice*: </label>
          <select name="satellite2" id="satellite2" required="required">
            <option value="" disabled>Select</option>
            <option value="art">Art</option>
            <option value="basketball">Basketball</option>
            <option value="dance">Dance</option>
            <option value="drama">Drama</option>
            <option value="football">Football</option>
            <option value="missions">Missions</option>
            <option value="photo1">Landscape & Still Life Photography</option>
            <option value="photo2">People Photography</option>
            <option value="scrap-booking">Scrap-Booking</option>
            <option value="sgjr">Summer Games Jr. Training</option>
            <option value="soccer">Soccer</option>
            <option value="ultimate">Ultimate Frisbee</option>
            <option value="video_games">Video Games</option>
            <option value="volleyball">Volleyball</option>
            <option value="water_park">Water Park</option>
          </select><br />

          <label>Third Choice*: </label>
          <select name="satellite3" id="satellite3" required="required">
            <option value="" disabled>Select</option>
            <option value="art">Art</option>
            <option value="basketball">Basketball</option>
            <option value="dance">Dance</option>
            <option value="drama">Drama</option>
            <option value="football">Football</option>
            <option value="missions">Missions</option>
            <option value="photo1">Landscape & Still Life Photography</option>
            <option value="photo2">People Photography</option>
            <option value="scrap-booking">Scrap-Booking</option>
            <option value="sgjr">Summer Games Jr. Training</option>
            <option value="soccer">Soccer</option>
            <option value="ultimate">Ultimate Frisbee</option>
            <option value="video_games">Video Games</option>
            <option value="volleyball">Volleyball</option>
            <option value="water_park">Water Park</option>
        </select>
  <script type="text/javascript">
  function clearOthers() {
    document.getElementById("secondchoice").options.selectedIndex=0;
    document.getElementById("thirdchoice").options.selectedIndex=0;
  }
  </script>    
    </div> 
```

然后用这个 PHP 处理它：

```
 <?php
    if($_SERVER['REQUEST_METHOD'] !== 'POST')
    {
        //This page should not be accessed directly. Need to submit the form.
        echo "error; you need to submit the form!";
        die;
    }

    $firstname = $_POST['firstname']; $lastname = $_POST['lastname']; $initial = $_POST['initial']; $streetaddress = $_POST['streetaddress']; $addressline2 = $_POST['addressline2']; $city = $_POST['city']; $state = $_POST['state']; $zip = $_POST['zip']; $email = $_POST['email']; $month = $_POST['month']; $day = $_POST['day']; $year = $_POST['year']; $grade = $_POST['grade']; $gender = $_POST['gender']; $guardian_first = $_POST['guardian_first']; $guardian_last = $_POST['guardian_last']; $areacode = $_POST['areacode']; $cellphone = $_POST['cellphone']; $contact1 = $_POST['emergency_contact_1']; $contact1areacode = $_POST['emergency_contact_1_areacode']; $contact1phone = $_POST['emergency_contact_1_phone']; $contact2 = $_POST['emergency_contact_2']; $contact2areacode = $_POST['emergency_contact_2_areacode']; $contact2phone = $_POST['emergency_contact_2_phone']; $homechurch = $_POST['home_church']; $churchareacode = $_POST['church_areacode']; $churchphone = $_POST['church_phone']; $contactperson = $_POST['contact_person']; $specialneeds = $_POST['special_needs']; $shirtsize = $_POST['shirt size']; $roommate = $_POST['roommate']; $firstchoice = $_POST['satellite1']; $secondchoice = $_POST['satellite2']; $thirdchoice = $_POST['satellite3']; $youth_area = $_POST['youth_area']; $youth_phone = $_POST['youth_phone']; 

    //Validate first

    /*
    Simple form validation
    check to see if required fields were entered
    */
    if ($_POST['firstname'] == "" || $_POST['lastname'] == "" || $_POST['streetaddress'] == "" || $_POST['city'] == "" || $_POST['state'] == "" || $_POST['zip'] == "" || $_POST['email'] == "" || $_POST['month'] == "" || $_POST['day'] == "" || $_POST['year'] == "" || $_POST['grade'] == "" || $_POST['gender'] == "" || $_POST['guardian_first'] == "" || $_POST['guardian_last'] == "" || $_POST['areacode'] == "" || $_POST['cellphone'] == "" || $_POST['emergency_contact_1'] == ""  || $_POST['emergency_contact_1_areacode'] == ""  || $_POST['emergency_contact_1_phone'] == ""  || $_POST['emergency_contact_2'] == ""  || $_POST['emergency_contact_2_areacode'] == ""  || $_POST['emergency_contact_2_phone'] == ""  || $_POST['shirt size'] == ""  || $_POST['satellite1'] == ""  || $_POST['satellite2'] == ""  || $_POST['satellite3'] == "" || $_POST['youth_area'] == "" || $_POST['youth_phone'] == "" ) {
            echo "Please fill in all required boxes. \n";
            var_dump($_POST);}
      else {

    $email_from = 'chris569x@gmail.com';//<== update the email address
    $email_subject = "New Registration"; 
    $email_body = "You have received a new registration.\n". 
    "Camper: $firstname $initial $lastname \n".
    "Address: $streetaddress \n".
    "$addressline2 \n".
    "$city, $state $zip \n".
    "Email: $email \n".
    "Date of Birth: $month/$day/$year \n".
    "Grade Completed: $grade \n".
    "Gender: $gender \n".
    "Youth Cell Phone: ($youth_area) $youth_phone \n".
    "Guardian: $guardian_first $guardian_last \n".
    "Guardian Cell Phone: ($areacode) $cellphone \n".
    "First Emergency Contact: $contact1  Contact Number: ($contact1areacode) $contact1phone \n".
    "Second Emergency Contact: $contact2  Contact Number: ($contact2areacode) $contact2phone \n".
    "Home Church: $homechurch Contact Number: ($churchareacode) $churchphone Contact Person: $contactperson \n".
    "Special Needs: $specialneeds \n".
    "T-Shirt Size: $shirtsize \n".
    "Roommate Preference: $roommate \n".
    "Satellite Preferences: 1.$firstchoice 2.$secondchoice 3.$thirdchoice \n".
    " \n";
    $to = "elaineknudtson@gmail.com,chris569x@gmail.com";//<== update the email address
    $headers = "From: $email_from \r\n";
    //Send the email!
    mail($to,$email_subject,$email_body,$headers);
    //done. redirect to thank-you page.
    header("Location: thanks2.htm",303);
    echo "<meta http-equiv='refresh' content='0; url=thanks2.htm'>";
    }
    ?> 
```

我包括了 var_dump，因为我不断收到“请填写所有必需的框”。错误。当我查看转储时，没有没有值的字符串。我很困惑，断开连接在哪里？

var_dump：

请填写所有必需的方框。array(38) { ["lastname"]=> string(4) "test" ["firstname"]=> string(4) "test" ["initial"]=> string(1) "t" ["streetaddress "]=> string(8) "123 test" ["addressline2"]=> string(4) "test" ["city"]=> string(9) "testville" ["state"]=> string(10 ) "测试状态" ["zip"]=> string(5) "12345" ["email"]=> string(13) "test@test.com" ["youth_area"]=> string(3) "123 " ["youth_phone"]=> string(7) "1234566" ["month"]=> string(2) "21" ["day"]=> string(2) "21" ["year"]=>字符串（4）“2121”[“等级”]=>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:22:24.070

你错过了 if 中的下划线：

```
 if ($_POST['firstname'] == "" || 
```

`$_POST['shirt size']`应该是 shirt_size 。
                                                                         ^

* * *

这发生在你身上是因为你的方法不优雅，那个巨大`If`是讨厌的讨厌讨厌的 xD。

你应该看看`foreach()`学习循环遍历数组。还可以查看php 文档`empty()`并`isset()` 在其中查看，这些是您进行验证的第一批朋友。

* * *

**它是如何制作的：**

基本上为了搜索你的错误，我复制粘贴了你的 if 子句和 var_dumped 数组，对它们使用了一些正则表达式魔法，因此它们成为有效的 php 数组：

```
$arr = array("lastname"=>"test", "firstname"=>"test", "initial"=>"t", "streetaddress"=>"123 test", "addressline2"=>"test", "city"=>"testville", "state"=>"test state", "zip"=>"12345", "email"=>"test@test.com", "youth_area"=>"123", "youth_phone"=>"1234566", "month"=>"21", "day"=>"21", "year"=>"2121", "grade"=>"12", "gender"=>"Male", "guardian_first"=>"test test", "guardian_last"=>"test test", "areacode"=>"123", "cellphone"=>"1231231", "parent_email"=>"test@test.com", "emergency_contact_1"=>"test test", "emergency_contact_1_areacode"=>"123", "emergency_contact_1_phone"=>"1231231", "emergency_contact_2"=>"test testy", "emergency_contact_2_areacode"=>"123", "emergency_contact_2_phone"=>"1232132", "home_church"=>"church test", "church_areacode"=>"321", "church_phone"=>"6548976", "contact_person"=>"tester tests", "special_needs"=>"none. testing", "shirt_size"=>"XL", "roommate"=>"none", "satellite1"=>"drama", "satellite2"=>"photo1", "satellite3"=>"volleyball", "submit"=>"Submit");
$arr2 = array('firstname', 'lastname', 'streetaddress', 'city', 'state', 'zip', 'email', 'month', 'day', 'year', 'grade', 'gender', 'guardian_first', 'guardian_last', 'areacode', 'cellphone', 'emergency_contact_1', 'emergency_contact_1_areacode', 'emergency_contact_1_phone', 'emergency_contact_2', 'emergency_contact_2_areacode', 'emergency_contact_2_phone', 'shirt size', 'satellite1', 'satellite2', 'satellite3', 'youth_area', 'youth_phone'); 
```

下次请使用 var_export() 输出一个有效的 php 数组，人们可以复制粘贴它！！

然后我使用这个循环来确定它们是否匹配：

```
foreach($arr2 as $k=>$v){
    if(!array_key_exists($v, $arr)){
        echo "$v not in array 1 <br/>";
    }
} 
```

输出：**衬衫尺寸不在数组 1 中**

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:12:21.403

```
<?php 
    if (isset($_POST['submit'])) {
         $firstname = $_POST['firstname'];
         $lastname  = $_POST['lastname'];

         if (empty($firstname == '' || $lastname == '')) {
             echo "empty";
         }
    }

?> 
```

或类似的东西：

```
// Required field names
$required = array('login', 'password', 'confirm', 'name', 'phone', 'email');

// Loop over field names, make sure each one exists and is not empty
$error = false;
foreach($required as $field) {
  if (empty($_POST[$field])) {
    $error = true;
  }
}

if ($error) {
  echo "All fields are required.";
} else {
  echo "Proceed...";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:12:25.263

请用

```
 if(empty($_POST['firstname']) && $_POST['firstname']) 
```

代替 ：

```
 if($_POST['firstname']=="") 
```

对于每个字段。您的数组非常大，您可能错过了任何字段，empty() 将检查它是否已设置，下一条语句将检查它是否为非零。更多关于[空（）](http://www.php.net/manual/en/function.empty.php)

希望它会有所帮助！

# jsf - JSF 选择项格式标签编号

> ID：15414013
> 
> 赞同：2
> 
> 时间：2013-03-14T15:53:36.787
> 
> 标签：jsf, converter, selectonemenu

我有一个数字列表（范围 500 - 5000，步长 500）。我想添加一个小数点 1000 -> 1.000；2500 -> 2.500 等，但只是为了不将标签保存为值。我尝试了以下但没有奏效：

```
<h:selectOneMenu value="#{bean.selectedValue}">
    <f:convertNumber type="currency" locale="de-DE" pattern="#,###" />
    <f:selectItems itemValue="#{bean.selectItemslist}" var="item" itemLabel="#{item.label}" itemValue="#{item.value} />
</h:selectOneMenu> 
```

但这没有做任何事情:(

尝试了几种模式并包含 integerOnly="true" 但似乎没有任何效果:(感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T16:00:25.510

转换器仅适用于项目值，而不适用于项目标签。这就解释了为什么它“失败”。在这种特殊情况下，您最好的选择是创建一个[自定义 EL 函数](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function/7080174#7080174)，这样您最终会得到如下结果：

```
<f:selectItems ... itemLabel="#{my:formatNumber(item.label, '#,###')}" /> 
```

JSF 实用程序库[OmniFaces](http://omnifaces.org)有几个，另请参阅[OmniFaces*函数/数字*展示](http://showcase.omnifaces.org/functions/Numbers)。

# android - Android：后台后的第一个活动

> ID：15414018
> 
> 赞同：0
> 
> 时间：2013-03-14T15:53:43.403
> 
> 标签：android, android-activity, background, android-manifest, launch

我在运行应用程序并且应用程序进入后台时遇到问题。如果我再次单击应用程序图标它会显示活动标记为 LAUNCHER：

```
<activity android:name=".LoginScreen" android:label="@string/app_name"
    android:theme="@style/defaultStyle">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>            
</activity> 
```

但我想在背景之前显示最后一个活动。我的 AndroidManifest 有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:57:30.810

写`android:launchMode="singleTask"` 在清单中

# c - sscanf 与字符串的奇怪行为

> ID：15414022
> 
> 赞同：0
> 
> 时间：2013-03-14T15:53:50.877
> 
> 标签：c, scanf

我遇到了麻烦`sscanf`。为了检查它，我制作了一个简单的文件，所以当我编译它时：

```
#include <stdio.h>
main(){
    char *a;
    /* */
    char *s = "GET /something HTTP/1.1\r\n";
    printf("sscanf: %d\n", sscanf(s, "GET %s HTTP", a));
    printf("a: %s\n", a);
    /* */
    printf("sscan: %d\n", sscanf("GET /more HTTP/1.1\r\n", "GET %s HTTP", a));
    printf("a: %s\n", a);
} 
```

我得到正确的输出：

```
sscanf: 1
a: /something
sscan: 1
a: /more 
```

但是当我在空评论之间唱评论行时，我得到：

```
sscan: 0
a: (null) 
```

**问题1**：怎么会这样？

还有一点：如果我写`char *a = NULL`，我会得到：

```
sscanf: 0
a: (null)
sscan: 0
a: (null) 
```

**问题2**：为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:58:02.677

您正在将字符串复制到未初始化的指针 ( `a`)。您需要为其分配存储空间（使用`malloc`），或声明一个数组。

当您不分配任何存储空间时，实现有时会正常工作。当您将 NULL 分配给 时`a`，`sscanf`无法存储任何内容，因此您尝试使用 NULL 指针打印“字符串”（`printf`打印为`(null)`）。在某些系统上，您的程序只会崩溃。

有一个编译器/库扩展允许自动分配字符串，但显然这不是可移植的，并且并非所有编译器都支持它。

```
char *a;
scanf("%ms", &a;) // allocates storage for a 
```

您可以将未初始化的指针传递给函数，但请注意`&`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:57:51.730

您正在将未初始化的指针传递给 sscanf。更改`char *a;`为`char a[100]`，它应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:30:18.220

好吧，我认为，就我而言，唯一正确的事情是：

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

main(){
    char *s = strdup("GET /something HTTP/1.1\r\n");
    char *a, *e, *ans;
    char *end = s + strlen(s);
    a = strstr(s, "GET");
    if(!a) return -1;
    a += 4;
    if(a >= end) return -1;
    e = strstr(a, "HTTP/1.1");
    if(!e) return -1;
    *(--e) = 0;
    ans = strdup(a);
    printf("ans: %s\n", ans);
} 
```

在通常情况下，字符串`s`的大小可能非常大，因此最好不要分配太多内存，而是根据需要正确分配。

“%as”的大小写不适用于我的 gcc (4.7.2)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:57:36.380

您正在将数据写入未分配的空间。`char *a;`只是一个指向随机内存的指针。在您尝试将数据放入“字符串”后，您会调用未定义的行为，并且任何事情都可能发生。

# php - 从命令行linux运行php

> ID：15414023
> 
> 赞同：0
> 
> 时间：2013-03-14T15:53:53.950
> 
> 标签：php, ubuntu

我正在尝试在 Ubuntu 服务器上从命令行运行一个 php 文件（我想最终将其放入 cron 作业中）。输入命令时似乎没有任何反应。我试过了：

```
php -f foo.php 
```

和

```
php foo.php 
```

我已经安装了 cli 并且 foo.php 设置为可执行文件。

该脚本应该测试它是否仍然可以访问数据库并通过电子邮件发送结果。从网络浏览器访问时它工作正常。

知道我做错了什么吗？

编辑：

php -v 的输出

```
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies
with Suhosin v0.9.33, Copyright (c) 2007-2012, by SektionEins GmbH 
```

编辑：脚本：

```
 <?php

require_once __DIR__.'/../Classes/DBConnection.php';
require_once __DIR__.'/../Classes/Mail.php';

$dbSlave = DBConnection::getSlaveDB();
$db = DBConnection::getDB();

$unique = uniqid();
try{
    $query = 'INSERT INTO tblzzTestSlave (token) VALUES (:token)';
    $statement = $db->prepare($query);
    $statement->bindValue(':token', $unique);
    $statement->execute();

    $slaveQuery = "SELECT id FROM tblzzTestSlave WHERE token=:token";
    $slave = $dbSlave->prepare($slaveQuery);
    $slave->bindValue(':token', $unique);
    $slave->execute();
    $result = $slave->fetch();

}catch (Exception $e){
    $result = null;

}

if(!$result){
    Mail::smtpMailer('email', 'email', 'from','Slave Not Working', 'The Slave has stopped       working');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:09:16.907

您可以检查 PHP 是否使用了正确的配置文件。

这在命令行和在服务器环境中运行可能会有所不同。

键入此以查看它使用的配置：

```
php --ini 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T19:54:43.113

我真蠢啊。这一行：

```
require_once __DIR__.'/../Classes/Mail.php'; 
```

邮件需要另一个试图检查会话 cookie 的文件。当然我没有，因为我是从命令行运行它的。这就是它在浏览器中工作的原因（我已登录）。当没有会话 cookie 时，它​​会尝试将我重定向到登录页面，这显然不适用于 CL。

# dependency-injection - 依赖注入中的一些概念

> ID：15414024
> 
> 赞同：2
> 
> 时间：2013-03-14T15:53:56.857
> 
> 标签：dependency-injection

我是依赖注入的新手，并且在 StackOverflow 和其他地方都在阅读它。在实践中，我无法正确使用它。

为了解释这个问题，这里有一个我不确定如何使用 DI 的基本情况：假设我有一些对象将在几个不同的类中使用。但是，为了使该对象可用，它需要某些我在启动时没有的参数。

我可以看到使用 DI 执行此操作的一种可能的方法是创建此对象的空白实例、使用必要参数对其进行初始化的方法以及是否已初始化的标志。

对我来说，这感觉像是 hack，因为对象不应该真的存在，我只是传递一个容器，等待负责的代码初始化它。这是它的意思，还是我错过了重点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:48:22.427

在开始使用 DI 时，这确实是一件很难理解的事情，而且也不容易解释。

您认为创建稍后将通过方法初始化的“空白”对象可能是次优解决方案的想法是正确的 - 对象应该能够随时完成其工作；`Initialize()`方法就是 Mark Seemann 在他*的 .NET 中的依赖注入*一书中所说的“时间耦合” 。这是一种反模式，它使使用对象的代码依赖于该对象的内部工作，从而破坏了封装。

问题是什么时候需要的信息可用，“负责初始化它的代码”是什么，它从哪里获取信息 - 以及它如何访问对象来初始化它。理想情况下，这个初始化代码本身会被注入到您的对象中，并且每当您的对象的方法/属性被访问时，它都会从其他依赖项中请求初始化。

另外，如果`IsInitialized`标志返回 false 会发生什么？那仍然是有效的程序状态吗？

一般来说，作为依赖注入对象图中的对象，我应该知道我在创建时的所有“配置”数据，或者知道可以将其提供给我的人（某人是作为依赖项注入的另一个对象）。

如果您可以提供有关对象需要什么样的参数以及它们需要来自何处的更多详细信息，这可能会有所帮助。

**编辑**

您在评论中所描述的几乎正是我第一次遇到此类问题；我当时在SO上的某个地方发布了一个问题。

重要的是构建单独的类（通常，可能会有例外，但那些是经验问题），您假设该类需要的所有内容都存在。当程序运行时，需要有其他类来确保假设不会失败。

Setter 注入是我通常尽量避免避免所说的时间耦合的东西。根据 Mark Seemann 的说法，setter 注入通常应该只在你已经有一个很好的默认值并且你只是通过 setter 覆盖时才使用。但是，在这种情况下，如果没有这种依赖关系，对象将无法正常运行。

这可能不是最优雅的方法（我通常可以在非常封闭的纯代码环境中应用 DI 而不必担心 UI），但它会工作（有点 - 它可以编译，但仍然是伪代码）：

```
public class MainForm
{
    private readonly IDataManager _dataManager;
    private readonly IConnectionProvider _connectionProvider;
    private readonly IConnectionReceiver _connectionReceiver;

    public MainForm(IDataManager dataManager, IConnectionProvider connectionProvider, IConnectionReceiver connectionReceiver)
    {
        this._dataManager = dataManager;
        this._connectionProvider = connectionProvider;
        this._connectionReceiver = connectionReceiver;
    }

    public void btnConnect_Click()
    {
        IConnection connection = this._connectionProvider.GetConnection();

        if (null != connection)
        {
            this._connectionReceiver.SetConnection(connection);

            this.SetFormControlsEnabled(true);
        }
    }

    private void SetFormControlsEnabled(bool doEnable)
    {
    }
}

public interface IConnectionProvider
{
    IConnection GetConnection();
}

public interface IConnectionReceiver
{
    void SetConnection(IConnection connection);
}

public interface IConnection
{
    IConnectionWebService ConnectionWebService { get; }
}

public class ConnectionBridge : IConnection, IConnectionReceiver
{
    private IConnection _connection;

    #region IConnectionReceiver Members

    public void SetConnection(IConnection connection)
    {
        this._connection = connection;
    }

    #endregion IConnectionReceiver Members

    #region IConnection Members

    public IConnectionWebService ConnectionWebService
    {
        get { return this._connection.ConnectionWebService; }
    }

    #endregion
}

public interface IConnectionWebService {}

public interface IDataManager { }

public class DataManager : IDataManager
{
    public DataManager(IConnection connection)
    {
    }
} 
```

所以，`MainForm`是把这一切结合在一起的东西。它从禁用其控件开始，因为它知道它们需要一个工作`IDataManager`并且（按照惯例）需要一个连接。单击“连接”按钮时，表单会询问其`IConnectionProvider`对连接的依赖关系。它不关心连接来自哪里；连接提供者可能会显示另一种形式来询问凭据，或者可能只是从文件中读取它们。

然后表单知道必须将连接传递给`IConnectionReceiver`实例，然后可以启用所有控件。这不是任何 DI 原则，这就是我们定义它的`MainForm`方式。

另一方面，数据管理器从一开始就拥有它所需的一切——一个`IConnection`实例。这不能做它最初应该做的事情，但是还有其他代码可以防止它引起问题。

`ConnectionBridge`既是实际`IConnection`实例的装饰器，也是将连接获取与连接消耗解耦的适配器。它通过使用*接口隔离原则*来做到这一点。

作为旁注，请注意，虽然依赖注入是一项重要的技术，但它只是编写所谓的“干净代码”应遵循的几个原则之一。最著名的是*SOLID*原则（DI 就是其中之一），但还有其他一些原则，例如*命令-查询-分离 (CQS)*、*“不要重复自己”(DRY)*和得*墨忒耳定律*。最重要的是，练习单元测试，准确地说是*测试驱动开发 (TDD)*。这些事情确实产生了巨大的影响——但如果你是自愿使用 DI，那么你已经有了一个良好的开端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:04:37.727

我同意 GCATNM 所说的，我想补充一点，每当我觉得有这样的对象时，我就会去使用工厂模式变体之一（无论是抽象工厂、静态工厂等），然后我会注入该对象的配置信息源的工厂。所以正如 Marc Seemann 所说，我没有引用：工厂是依赖注入的一个很好的伴侣，你偶尔会需要它们。

# java - java.lang.NoSuchMethodError: javax.ws.rs.ext.MessageBodyWriter.isWriteable

> ID：15414026
> 
> 赞同：3
> 
> 时间：2013-03-14T15:54:04.463
> 
> 标签：java, spring, jax-rs

我按照这里的指南[http://docs.neo4j.org/chunked/milestone/server-java-rest-client-example.html](http://docs.neo4j.org/chunked/milestone/server-java-rest-client-example.html)关于如何发送 POST 请求。使用下面的代码，我得到了错误`java.lang.NoSuchMethodError: javax.ws.rs.ext.MessageBodyWriter.isWriteable`，这似乎是我正在使用的库的问题。

```
public Object getResponse(Object responseClass) {
    Client client = Client.create();

    WebResource webResource = client.resource(getUrl());
    ClientResponse response = webResource
            .type(MediaType.APPLICATION_JSON)
            .entity(responseClass)
            .post(ClientResponse.class);

    if (response.getStatus() != 201)
        return null;

    return response.getEntity(responseClass.getClass());
} 
```

我不确定我是否缺少依赖项或什么...

我的 pom.xml 包括

```
 <dependency>
      <groupId>org.codehaus.jackson</groupId>
      <artifactId>jackson-jaxrs</artifactId>
      <version>1.9.12</version>
  </dependency>
  <dependency>
      <groupId>org.apache.cxf</groupId>
      <artifactId>cxf-rt-frontend-jaxrs</artifactId>
      <version>2.1.2</version>
  </dependency> 
```

**pom.xml**

```
 <dependencies>
      <dependency>
          <groupId>log4j</groupId>
          <artifactId>log4j</artifactId>
          <version>1.2.17</version>
      </dependency>
      <dependency>
          <groupId>mysql</groupId>
          <artifactId>mysql-connector-java</artifactId>
          <version>5.1.23</version>
      </dependency>
      <dependency>
          <groupId>org.apache.axis</groupId>
          <artifactId>axis</artifactId>
          <version>1.4</version>
      </dependency>
      <dependency>
          <groupId>commons-logging</groupId>
          <artifactId>commons-logging</artifactId>
          <version>1.1.1</version>
      </dependency>
      <dependency>
          <groupId>commons-discovery</groupId>
          <artifactId>commons-discovery</artifactId>
          <version>0.4</version>
      </dependency>
      <dependency>
          <groupId>javax.xml</groupId>
          <artifactId>jaxrpc-api</artifactId>
          <version>1.1</version>
      </dependency>
      <dependency>
          <groupId>wsdl4j</groupId>
          <artifactId>wsdl4j</artifactId>
          <version>1.6.2</version>
      </dependency>
      <dependency>
          <groupId>javax.mail</groupId>
          <artifactId>mail</artifactId>
          <version>1.4.4</version>
      </dependency>
      <dependency>
          <groupId>javax.activation</groupId>
          <artifactId>activation</artifactId>
          <version>1.1.1</version>
      </dependency>
      <dependency>
          <groupId>org.apache.commons</groupId>
          <artifactId>commons-lang3</artifactId>
          <version>3.1</version>
      </dependency>
      <dependency>
          <groupId>org.apache.cxf</groupId>
          <artifactId>cxf-rt-frontend-jaxrs</artifactId>
          <version>2.1.2</version>
      </dependency>
      <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>slf4j-api</artifactId>
          <version>1.7.2</version>
      </dependency>

      <!-- Jersey & Jackson -->
      <dependency>
          <groupId>org.codehaus.jackson</groupId>
          <artifactId>jackson-jaxrs</artifactId>
          <version>1.9.12</version>
      </dependency>
      <dependency>
          <groupId>org.codehaus.jackson</groupId>
          <artifactId>jackson-xc</artifactId>
          <version>1.9.12</version>
      </dependency>
      <dependency>
          <groupId>com.sun.jersey</groupId>
          <artifactId>jersey-server</artifactId>
          <version>1.17</version>
      </dependency>
      <dependency>
          <groupId>com.sun.jersey</groupId>
          <artifactId>jersey-json</artifactId>
          <version>1.17</version>
      </dependency>
      <dependency>
          <groupId>com.sun.jersey</groupId>
          <artifactId>jersey-servlet</artifactId>
          <version>1.17</version>
      </dependency>
      <dependency>
          <groupId>com.sun.jersey</groupId>
          <artifactId>jersey-grizzly2</artifactId>
          <version>1.17</version>
      </dependency>
      <dependency>
          <groupId>com.sun.jersey</groupId>
          <artifactId>jersey-client</artifactId>
          <version>1.17.1</version>
      </dependency>

      <!-- Spring, Hibernate -->
      <dependency>
          <groupId>org.hibernate</groupId>
          <artifactId>hibernate-core</artifactId>
          <version>4.1.9.Final</version>
      </dependency>
      <dependency>
          <groupId>org.hibernate.javax.persistence</groupId>
          <artifactId>hibernate-jpa-2.0-api</artifactId>
          <version>1.0.1.Final</version>
      </dependency>
      <dependency>
          <groupId>org.hibernate</groupId>
          <artifactId>hibernate-entitymanager</artifactId>
          <version>4.1.9.Final</version>
      </dependency>
      <dependency>
          <groupId>org.hibernate</groupId>
          <artifactId>hibernate-annotations</artifactId>
          <version>3.5.6-Final</version>
      </dependency>
      <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>spring-core</artifactId>
          <version>3.2.1.RELEASE</version>
      </dependency>
      <dependency>
          <groupId>org.springframework</groupId>
          <artifactId>spring-context</artifactId>
          <version>3.2.1.RELEASE</version>
      </dependency>
      <dependency>
          <groupId>org.springframework.data</groupId>
          <artifactId>spring-data-jpa</artifactId>
          <version>1.2.0.RELEASE</version>
      </dependency>
  </dependencies> 
```

**更新** 删除以下条目修复了它

```
 <dependency>
      <groupId>org.apache.cxf</groupId>
      <artifactId>cxf-rt-frontend-jaxrs</artifactId>
      <version>2.1.2</version>
  </dependency> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:29:51.830

您的类路径中似乎有不同的 javax.ws.rs.ext.MessageBodyWriter 类。一个来自 jsr311-api-0.8.jar，另一个来自 jersey-core-1.17.jar。所以请谨慎管理依赖关系。

顺便说一句，如果您使用[JFind](http://sourceforge.net/projects/jfind/?source=dlp)（在目录/JAR 中查找类）和[jd-gui](http://java.decompiler.free.fr/?q=jdgui)（反编译 JAR）等工具，您可以轻松解决此类问题。

以下是我的 JFind 输出：

```
ClassName = javax/ws/rs/ext/MessageBodyWriter.class
JarName = C:\Users\lhuang\.m2\repository\com\sun\jersey\jersey-core\1.17\jersey-core-1.17.jar
----------------
ClassName = javax/ws/rs/ext/MessageBodyWriter.class
JarName = C:\Users\lhuang\.m2\repository\javax\ws\rs\jsr311-api\0.8\jsr311-api-0.8.jar
---------------- 
```

# python - Multiprocessing.Pool 使 Numpy 矩阵乘法变慢

> ID：15414027
> 
> 赞同：22
> 
> 时间：2013-03-14T15:54:06.897
> 
> 标签：python, numpy, multiprocessing, pool

所以，我在玩`multiprocessing.Pool`and `Numpy`，但似乎我错过了一些重要的点。为什么`pool`版本慢很多？我看了看，`htop`可以看到创建了几个进程，但它们都共享一个 CPU，加起来约为 100%。

```
$ cat test_multi.py 
import numpy as np
from timeit import timeit
from multiprocessing import Pool

def mmul(matrix):
    for i in range(100):
        matrix = matrix * matrix
    return matrix

if __name__ == '__main__':
    matrices = []
    for i in range(4):
        matrices.append(np.random.random_integers(100, size=(1000, 1000)))

    pool = Pool(8)
    print timeit(lambda: map(mmul, matrices), number=20)
    print timeit(lambda: pool.map(mmul, matrices), number=20)

$ python test_multi.py 
16.0265390873
19.097837925 
```

**[更新]**

*   更改为`timeit`用于基准测试流程
*   具有多个我的内核的 init 池
*   改变了计算，以便有更多的计算和更少的内存传输（我希望）

还是没有变化。`pool`版本仍然较慢，我可以看到`htop`只使用了一个核心，还产生了几个进程。

**[更新2]**

目前我正在阅读@Jan-Philip Gehrcke 关于使用`multiprocessing.Process()`and的建议`Queue`。但与此同时，我想知道：

1.  为什么我的示例适用于 tiago？它无法在我的机器[1](https://stackoverflow.com/questions/15414027/multiprocessing-pool-makes-numpy-matrix-multiplication-slower#comment22155148_15414027)上运行的原因可能是什么？
2.  在我的示例代码中，进程之间是否有任何复制？我打算让我的代码给每个线程一个矩阵列表的矩阵。
3.  我的代码是一个不好的例子，因为我使用`Numpy`?

我了解到，当其他人知道我的最终目标时，通常会得到更好的答案：我有很多文件，这些文件是 atm 以串行方式加载和处理的。处理是 CPU 密集型的，所以我认为并行化可以获得很多。我的目标是调用并行分析文件的python函数。此外，我认为这个函数只是 C 代码的一个接口，这会有所不同。

[1](https://stackoverflow.com/questions/15414027/multiprocessing-pool-makes-numpy-matrix-multiplication-slower#comment22155148_15414027) Ubuntu 12.04、Python 2.7.3、i7 860 @ 2.80 - 如果您需要更多信息，请发表评论。

**[更新3]**

以下是 Stefano 示例代码的结果。由于某种原因，没有加速。：/

```
testing with 16 matrices
base  4.27
   1  5.07
   2  4.76
   4  4.71
   8  4.78
  16  4.79
testing with 32 matrices
base  8.82
   1 10.39
   2 10.58
   4 10.73
   8  9.46
  16  9.54
testing with 64 matrices
base 17.38
   1 19.34
   2 19.62
   4 19.59
   8 19.39
  16 19.34 
```

**[更新 4] 回答[Jan-Philip Gehrcke 的评论](https://stackoverflow.com/questions/15414027/multiprocessing-pool-makes-numpy-matrix-multiplication-slower#comment22155148_15414027)**

对不起，我没有让自己更清楚。正如我在更新 2 中所写，我的主要目标是并行化第 3 方 Python 库函数的许多串行调用。这个函数是一些 C 代码的接口。建议我使用`Pool`，但这不起作用，所以我尝试了一些更简单的方法，如上例所示`numpy`。但在那里我也无法实现性能改进，即使它看起来“令人难以接受的可并行化”。所以我想我一定错过了一些重要的事情。这个信息就是我在这个问题和赏金中寻找的信息。

**[更新5]**

感谢您的所有巨大投入。但是阅读你的答案只会给我带来更多的问题。出于这个原因，当我更清楚地了解我不知道的内容时，我将阅读[基础知识并创建新的 SO 问题。](http://www.scipy.org/ParallelProgramming)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-26T21:09:54.363

关于所有进程都在同一个 CPU 上运行的事实，[请参阅我的答案](https://stackoverflow.com/questions/15639779/python-what-determines-whether-different-processes-are-assigned-to-the-same-or/15641148#15641148)。

在导入期间，`numpy`更改父进程的 CPU 亲和性，这样当您以后使用`Pool`它产生的所有工作进程时，最终将争夺同一个核心，而不是使用您机器上所有可用的核心。

您可以`taskset`在导入后调用`numpy`以重置 CPU 关联性，以便使用所有内核：

```
import numpy as np
import os
from timeit import timeit
from multiprocessing import Pool

def mmul(matrix):
    for i in range(100):
        matrix = matrix * matrix
    return matrix

if __name__ == '__main__':

    matrices = []
    for i in range(4):
        matrices.append(np.random.random_integers(100, size=(1000, 1000)))

    print timeit(lambda: map(mmul, matrices), number=20)

    # after importing numpy, reset the CPU affinity of the parent process so
    # that it will use all cores
    os.system("taskset -p 0xff %d" % os.getpid())

    pool = Pool(8)
    print timeit(lambda: pool.map(mmul, matrices), number=20) 
```

输出：

```
 $ python tmp.py                                     
    12.4765810966
    pid 29150's current affinity mask: 1
    pid 29150's new affinity mask: ff
    13.4136221409 
```

如果您在运行此脚本时观察 CPU 使用`top`情况，您应该会看到它在执行“并行”部分时使用了所有内核。正如其他人指出的那样，在您的原始示例中，酸洗数据、流程创建等所涉及的开销可能超过了并行化带来的任何可能的好处。

**编辑：**我怀疑单个进程似乎始终更快的部分原因是，它`numpy`可能有一些技巧可以加快逐元素矩阵乘法的速度，当作业分布在多个内核上时，它无法使用这些技巧。

例如，如果我只使用普通的 Python 列表来计算斐波那契数列，我可以从并行化中获得巨大的加速。同样，如果我以不利用矢量化的方式进行逐元素乘法，我会在并行版本中获得类似的加速：

```
import numpy as np
import os
from timeit import timeit
from multiprocessing import Pool

def fib(dummy):
    n = [1,1]
    for ii in xrange(100000):
        n.append(n[-1]+n[-2])

def silly_mult(matrix):
    for row in matrix:
        for val in row:
            val * val

if __name__ == '__main__':

    dt = timeit(lambda: map(fib, xrange(10)), number=10)
    print "Fibonacci, non-parallel: %.3f" %dt

    matrices = [np.random.randn(1000,1000) for ii in xrange(10)]
    dt = timeit(lambda: map(silly_mult, matrices), number=10)
    print "Silly matrix multiplication, non-parallel: %.3f" %dt

    # after importing numpy, reset the CPU affinity of the parent process so
    # that it will use all CPUS
    os.system("taskset -p 0xff %d" % os.getpid())

    pool = Pool(8)

    dt = timeit(lambda: pool.map(fib,xrange(10)), number=10)
    print "Fibonacci, parallel: %.3f" %dt

    dt = timeit(lambda: pool.map(silly_mult, matrices), number=10)
    print "Silly matrix multiplication, parallel: %.3f" %dt 
```

输出：

```
$ python tmp.py
Fibonacci, non-parallel: 32.449
Silly matrix multiplication, non-parallel: 40.084
pid 29528's current affinity mask: 1
pid 29528's new affinity mask: ff
Fibonacci, parallel: 9.462
Silly matrix multiplication, parallel: 12.163 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-14T17:05:16.117

通信开销和计算加速之间不可预测的竞争绝对是这里的问题。你所观察的一切都很好。您是否获得净加速取决于许多因素，并且必须正确量化（就像您所做的那样）。

**那么为什么`multiprocessing`在你的情况下如此“出乎意料地慢”？** `multiprocessing`'s`map`和`map_async`函数实际上通过连接父进程和子进程的管道来回腌制 Python 对象。这可能需要相当长的时间。在那段时间里，子进程几乎无事可做，这就是在`htop`. 在不同的系统之间，可能存在相当大的管道传输性能差异，这也是为什么对于某些人来说，你的池代码比你的单 CPU 代码快，尽管对你来说不是（其他因素可能在这里起作用，这只是举例说明效果）。

**你能做些什么来让它更快？**

1.  **不要在符合 POSIX 的系统上腌制输入。**

    如果您使用的是 Unix，则可以通过利用 POSIX 的进程分叉行为（写入时复制内存）来解决父->子通信开销：

    创建您的工作输入（例如大型矩阵列表）以在*全局可访问变量*中的父进程中工作。然后通过调用`multiprocessing.Process()`自己来创建工作进程。在子项中，从全局变量中获取作业输入。简单地说，这使得子进程访问父进程的内存没有任何通信开销（*，解释如下）。通过例如 a 将结果发送回父级`multiprocessing.Queue`。这将节省大量的通信开销，尤其是在输出与输入相比较小的情况下。此方法不适用于例如 Windows，因为`multiprocessing.Process()`它会创建一个全新的 Python 进程，它不会继承父进程的状态。

2.  **使用 numpy 多线程。** 根据您的实际计算任务，可能会发生完全`multiprocessing`没有帮助的情况。如果您自己编译 numpy 并启用 OpenMP 指令，那么大型矩阵上的操作可能会变得非常高效地多线程（并且分布在许多 CPU 内核上；GIL 在这里不是限制因素）。基本上，这是您可以在 numpy/scipy 的上下文中最有效地使用多个 CPU 内核。

*孩子一般不能直接访问父母的记忆。但是，在 之后`fork()`，父母和孩子处于等效状态。将父级的整个内存复制到 RAM 中的另一个位置是愚蠢的。这就是copy-on-write原理跳进来的原因。只要孩子不*改变*它的内存状态，它实际上访问了父母的内存。只有在修改后，相应的点点滴滴才会被复制到孩子的内存空间中。

**主要编辑：**

让我添加一段代码，它使用多个工作进程处理大量输入数据，并遵循建议“1\. 不要在符合 POSIX 的系统上腌制输入。”。此外，传输回工作管理器（父进程）的信息量非常少。这个例子的繁重计算部分是单值分解。它可以大量使用 OpenMP。我已多次执行该示例：

*   一次有 1、2 或 4 个工作进程`OMP_NUM_THREADS=1`，因此每个工作进程创建的最大负载为 100%。在那里，提到的工人数计算时间扩展行为几乎是线性的，并且净加速因子对应于所涉及的工人数量。
*   一次使用 1、2 或 4 个工作进程`OMP_NUM_THREADS=4`，这样每个进程创建的最大负载为 400%（通过产生 4 个 OpenMP 线程）。我的机器有 16 个真正的核心，因此 4 个进程，每个进程的最大负载为 400%，*几乎*可以获得机器的最大性能。缩放不再是完全线性的，加速因素不是所涉及的工作人员数量，但`OMP_NUM_THREADS=1`与工作进程数量相比，绝对计算时间显着减少，时间仍然显着减少。
*   曾经有更大的输入数据、4 个核心和`OMP_NUM_THREADS=4`. 它导致平均系统负载为 1253%。
*   一次与上次相同的设置，但是`OMP_NUM_THREADS=5`. 它导致平均系统负载为 1598%，这表明我们从那台 16 核机器上得到了一切。然而，与后一种情况相比，实际的计算墙时间并没有改善。

编码：

```
import os
import time
import math
import numpy as np
from numpy.linalg import svd as svd
import multiprocessing

# If numpy is compiled for OpenMP, then make sure to control
# the number of OpenMP threads via the OMP_NUM_THREADS environment
# variable before running this benchmark.

MATRIX_SIZE = 1000
MATRIX_COUNT = 16

def rnd_matrix():
    offset = np.random.randint(1,10)
    stretch = 2*np.random.rand()+0.1
    return offset + stretch * np.random.rand(MATRIX_SIZE, MATRIX_SIZE)

print "Creating input matrices in parent process."
# Create input in memory. Children access this input.
INPUT = [rnd_matrix() for _ in xrange(MATRIX_COUNT)]

def worker_function(result_queue, worker_index, chunk_boundary):
    """Work on a certain chunk of the globally defined `INPUT` list.
    """
    result_chunk = []
    for m in INPUT[chunk_boundary[0]:chunk_boundary[1]]:
        # Perform single value decomposition (CPU intense).
        u, s, v = svd(m)
        # Build single numeric value as output.
        output =  int(np.sum(s))
        result_chunk.append(output)
    result_queue.put((worker_index, result_chunk))

def work(n_workers=1):
    def calc_chunksize(l, n):
        """Rudimentary function to calculate the size of chunks for equal 
        distribution of a list `l` among `n` workers.
        """
        return int(math.ceil(len(l)/float(n)))

    # Build boundaries (indices for slicing) for chunks of `INPUT` list.
    chunk_size = calc_chunksize(INPUT, n_workers)
    chunk_boundaries = [
        (i, i+chunk_size) for i in xrange(0, len(INPUT), chunk_size)]

    # When n_workers and input list size are of same order of magnitude,
    # the above method might have created less chunks than workers available. 
    if n_workers != len(chunk_boundaries):
        return None

    result_queue = multiprocessing.Queue()
    # Prepare child processes.
    children = []
    for worker_index in xrange(n_workers):
        children.append(
            multiprocessing.Process(
                target=worker_function,
                args=(
                    result_queue,
                    worker_index,
                    chunk_boundaries[worker_index],
                    )
                )
            )

    # Run child processes.
    for c in children:
        c.start()

    # Create result list of length of `INPUT`. Assign results upon arrival.
    results = [None] * len(INPUT)

    # Wait for all results to arrive.
    for _ in xrange(n_workers):
        worker_index, result_chunk = result_queue.get(block=True)
        chunk_boundary = chunk_boundaries[worker_index]
        # Store the chunk of results just received to the overall result list.
        results[chunk_boundary[0]:chunk_boundary[1]] = result_chunk

    # Join child processes (clean up zombies).
    for c in children:
        c.join()
    return results

def main():
    durations = []
    n_children = [1, 2, 4]
    for n in n_children:
        print "Crunching input with %s child(ren)." % n
        t0 = time.time()
        result = work(n)
        if result is None:
            continue
        duration = time.time() - t0
        print "Result computed by %s child process(es): %s" % (n, result)
        print "Duration: %.2f s" % duration
        durations.append(duration)
    normalized_durations = [durations[0]/d for d in durations]
    for n, normdur in zip(n_children, normalized_durations):
        print "%s-children speedup: %.2f" % (n, normdur)

if __name__ == '__main__':
    main() 
```

输出：

```
$ export OMP_NUM_THREADS=1
$ /usr/bin/time python test2.py 
Creating input matrices in parent process.
Crunching input with 1 child(ren).
Result computed by 1 child process(es): [5587, 8576, 11566, 12315, 7453, 23245, 6136, 12387, 20634, 10661, 15091, 14090, 11997, 20597, 21991, 7972]
Duration: 16.66 s
Crunching input with 2 child(ren).
Result computed by 2 child process(es): [5587, 8576, 11566, 12315, 7453, 23245, 6136, 12387, 20634, 10661, 15091, 14090, 11997, 20597, 21991, 7972]
Duration: 8.27 s
Crunching input with 4 child(ren).
Result computed by 4 child process(es): [5587, 8576, 11566, 12315, 7453, 23245, 6136, 12387, 20634, 10661, 15091, 14090, 11997, 20597, 21991, 7972]
Duration: 4.37 s
1-children speedup: 1.00
2-children speedup: 2.02
4-children speedup: 3.81
48.75user 1.75system 0:30.00elapsed 168%CPU (0avgtext+0avgdata 1007936maxresident)k
0inputs+8outputs (1major+809308minor)pagefaults 0swaps

$ export OMP_NUM_THREADS=4
$ /usr/bin/time python test2.py 
Creating input matrices in parent process.
Crunching input with 1 child(ren).
Result computed by 1 child process(es): [22735, 5932, 15692, 14129, 6953, 12383, 17178, 14896, 16270, 5591, 4174, 5843, 11740, 17430, 15861, 12137]
Duration: 8.62 s
Crunching input with 2 child(ren).
Result computed by 2 child process(es): [22735, 5932, 15692, 14129, 6953, 12383, 17178, 14896, 16270, 5591, 4174, 5843, 11740, 17430, 15861, 12137]
Duration: 4.92 s
Crunching input with 4 child(ren).
Result computed by 4 child process(es): [22735, 5932, 15692, 14129, 6953, 12383, 17178, 14896, 16270, 5591, 4174, 5843, 11740, 17430, 15861, 12137]
Duration: 2.95 s
1-children speedup: 1.00
2-children speedup: 1.75
4-children speedup: 2.92
106.72user 3.07system 0:17.19elapsed 638%CPU (0avgtext+0avgdata 1022240maxresident)k
0inputs+8outputs (1major+841915minor)pagefaults 0swaps

$ /usr/bin/time python test2.py 
Creating input matrices in parent process.
Crunching input with 4 child(ren).
Result computed by 4 child process(es): [21762, 26806, 10148, 22947, 20900, 8161, 20168, 17439, 23497, 26360, 6789, 11216, 12769, 23022, 26221, 20480, 19140, 13757, 23692, 19541, 24644, 21251, 21000, 21687, 32187, 5639, 23314, 14678, 18289, 12493, 29766, 14987, 12580, 17988, 20853, 4572, 16538, 13284, 18612, 28617, 19017, 23145, 11183, 21018, 10922, 11709, 27895, 8981]
Duration: 12.69 s
4-children speedup: 1.00
174.03user 4.40system 0:14.23elapsed 1253%CPU (0avgtext+0avgdata 2887456maxresident)k
0inputs+8outputs (1major+1211632minor)pagefaults 0swaps

$ export OMP_NUM_THREADS=5
$ /usr/bin/time python test2.py 
Creating input matrices in parent process.
Crunching input with 4 child(ren).
Result computed by 4 child process(es): [19528, 17575, 21792, 24303, 6352, 22422, 25338, 18183, 15895, 19644, 20161, 22556, 24657, 30571, 13940, 18891, 10866, 21363, 20585, 15289, 6732, 10851, 11492, 29146, 12611, 15022, 18967, 25171, 10759, 27283, 30413, 14519, 25456, 18934, 28445, 12768, 28152, 24055, 9285, 26834, 27731, 33398, 10172, 22364, 12117, 14967, 18498, 8111]
Duration: 13.08 s
4-children speedup: 1.00
230.16user 5.98system 0:14.77elapsed 1598%CPU (0avgtext+0avgdata 2898640maxresident)k
0inputs+8outputs (1major+1219611minor)pagefaults 0swaps 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T16:56:45.860

你的代码是正确的。我只是在我的系统上运行它（有 2 个内核，超线程）并获得以下结果：

```
$ python test_multi.py 
30.8623809814
19.3914041519 
```

我查看了流程，正如预期的那样，并行部分显示了几个以接近 100% 的速度工作的流程。这必须是您的系统或 python 安装中的某些内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T09:01:01.747

测量算术吞吐量是一项非常困难的任务：基本上你的测试用例太简单了，我看到了很多问题。

首先，您正在测试整数算术：有什么特殊原因吗？使用浮点，您可以获得在许多不同架构中具有可比性的结果。

~~第二个`matrix = matrix*matrix`覆盖输入参数（矩阵通过 ref 而不是值传递），每个样本必须处理不同的数据......~~

最后的测试应该在更广泛的问题规模和工人数量上进行，以便掌握总体趋势。

所以这是我修改后的测试脚本

```
import numpy as np
from timeit import timeit
from multiprocessing import Pool

def mmul(matrix):
    mymatrix = matrix.copy()
    for i in range(100):
        mymatrix *= mymatrix
    return mymatrix

if __name__ == '__main__':

    for n in (16, 32, 64):
        matrices = []
        for i in range(n):
            matrices.append(np.random.random_sample(size=(1000, 1000)))

        stmt = 'from __main__ import mmul, matrices'
        print 'testing with', n, 'matrices'
        print 'base',
        print '%5.2f' % timeit('r = map(mmul, matrices)', setup=stmt, number=1)

        stmt = 'from __main__ import mmul, matrices, pool'
        for i in (1, 2, 4, 8, 16):
            pool = Pool(i)
            print "%4d" % i, 
            print '%5.2f' % timeit('r = pool.map(mmul, matrices)', setup=stmt, number=1)
            pool.close()
            pool.join() 
```

和我的结果：

```
$ python test_multi.py 
testing with 16 matrices
base  5.77
   1  6.72
   2  3.64
   4  3.41
   8  2.58
  16  2.47
testing with 32 matrices
base 11.69
   1 11.87
   2  9.15
   4  5.48
   8  4.68
  16  3.81
testing with 64 matrices
base 22.36
   1 25.65
   2 15.60
   4 12.20
   8  9.28
  16  9.04 
```

[更新] 我在家里的另一台计算机上运行此示例，获得一致的减速：

```
testing with 16 matrices
base  2.42
   1  2.99
   2  2.64
   4  2.80
   8  2.90
  16  2.93
testing with 32 matrices
base  4.77
   1  6.01
   2  5.38
   4  5.76
   8  6.02
  16  6.03
testing with 64 matrices
base  9.92
   1 12.41
   2 10.64
   4 11.03
   8 11.55
  16 11.59 
```

我不得不承认，我不知道该怪谁（numpy、python、编译器、内核）...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-14T16:15:15.537

默认情况下，`Pool`只使用 n 个进程，其中 n 是您机器上的 CPU 数量。您需要指定您希望它使用多少个进程，例如`Pool(5)`.

[请参阅此处了解更多信息](http://docs.python.org/3/library/multiprocessing.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-02T04:56:12.653

## 解决方案

*在任何计算之前*设置以下环境变量（`import numpy`对于一些早期版本的 numpy，您可能需要在执行之前设置它们）：

```
os.environ["OMP_NUM_THREADS"] = "1"
os.environ["MKL_NUM_THREADS"] = "1"
os.environ["OPENBLAS_NUM_THREADS"] = "1"
os.environ["VECLIB_MAXIMUM_THREADS"] = "1"
os.environ["NUMEXPR_NUM_THREADS"] = "1" 
```

## 它是如何工作的

numpy 的实现*已经在*使用多线程和优化库，例如 OpenMP 或 MKL 或 OpenBLAS 等。这就是为什么我们自己实现多处理并没有看到太多改进的原因。更糟糕的是，我们遭受了太多线程。例如，如果我的机器有 8 个 CPU 核心，当我编写*单*处理代码时，numpy 可能会使用 8 个线程进行计算。然后我使用多处理启动 8 个进程，得到 64 个线程。这是没有好处的，并且线程之间的上下文切换和其他开销可能会花费更多时间。通过设置上述环境变量，我们将每个进程的线程数限制为 1，因此我们得到了最有效的总线程数。

## 代码示例

```
from timeit import timeit
from multiprocessing import Pool
import sys
import os

import numpy as np

def matmul(_):
    matrix = np.ones(shape=(1000, 1000))
    _ = np.matmul(matrix, matrix)

def mixed(_):
    matrix = np.ones(shape=(1000, 1000))
    _ = np.matmul(matrix, matrix)

    s = 0
    for i in range(1000000):
        s += i

if __name__ == '__main__':
    if sys.argv[1] == "--set-num-threads":
        os.environ["OMP_NUM_THREADS"] = "1"
        os.environ["MKL_NUM_THREADS"] = "1"
        os.environ["OPENBLAS_NUM_THREADS"] = "1"
        os.environ["VECLIB_MAXIMUM_THREADS"] = "1"
        os.environ["NUMEXPR_NUM_THREADS"] = "1"

    if sys.argv[2] == "matmul":
        f = matmul
    elif sys.argv[2] == "mixed":
        f = mixed

    print("Serial:")
    print(timeit(lambda: list(map(f, [0] * 8)), number=20))

    with Pool(8) as pool:
        print("Multiprocessing:")
        print(timeit(lambda: pool.map(f, [0] * 8), number=20)) 
```

我在具有 8 个 vCPU（不一定意味着 8 个内核）的 AWS p3.2xlarge 实例上测试了代码：

```
$ python test_multi.py --no-set-num-threads matmul
Serial:
3.3447616740000115
Multiprocessing:
3.5941055110000093

$ python test_multi.py --set-num-threads matmul
Serial:
9.464500446000102
Multiprocessing:
2.570238267999912 
```

在设置这些环境变量之前，串行版本和多处理版本没有太大区别，都在3秒左右，通常多处理版本比较慢，就像OP演示的一样。设置好线程数后，我们看到串口版本耗时 9.46 秒，变慢了很多！这证明 numpy 即使在使用单个进程时也在使用多线程。多处理版本耗时 2.57 秒，略有改进，这可能是因为在我的实现中节省了跨线程数据传输时间。

由于 numpy 已经在使用并行化，因此这个示例没有显示出多处理的强大功能。当普通的 Python 密集型 CPU 计算与 numpy 操作混合时，多处理是最有益的。例如

```
$ python test_multi.py --no-set-num-threads mixed
Serial:
12.380275611000116
Multiprocessing:
8.190792100999943

$ python test_multi.py --set-num-threads mixed
Serial:
18.512066430999994
Multiprocessing:
4.8058130150000125 
```

这里将线程数设置为 1 的多处理是最快的。

备注：这也适用于其他一些 CPU 计算库，例如 PyTorch。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-24T12:08:12.247

既然你提到你有很多文件，我会建议以下解决方案；

*   制作文件名列表。
*   编写一个函数来加载和处理名为输入参数的单个文件。
*   用于`Pool.map()`将函数应用于文件列表。

由于现在每个实例都加载自己的文件，因此传递的唯一数据是文件名，而不是（可能很大）numpy 数组。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-05T14:54:04.223

我还注意到，当我在 Pool.map() 函数中运行 numpy 矩阵乘法时，它在某些机器上的运行速度要慢得多。我的目标是使用 Pool.map() 并行化我的工作，并在我机器的每个核心上运行一个进程。当事情运行得很快时，numpy 矩阵乘法只是并行执行的整体工作的一小部分。当我查看进程的 CPU 使用率时，我可以看到每个进程在运行缓慢的机器上可以使用例如 400+% 的 CPU，但在运行速度快的机器上总是 <=100%。对我来说，解决方案是[阻止 numpy 多线程](https://stackoverflow.com/questions/17053671/python-how-do-you-stop-numpy-from-multithreading). 事实证明，在我的 Pool.map() 运行缓慢的机器上，numpy 被设置为多线程。显然，如果您已经在使用 Pool.map() 进行并行化，那么让 numpy 也并行化只会产生干扰。我只是`export MKL_NUM_THREADS=1`在运行我的 Python 代码之前打了电话，它在任何地方都运行得很快。

# php - PHP/Smarty - 每个文件都有自己的语言文件

> ID：15414028
> 
> 赞同：1
> 
> 时间：2013-03-14T15:54:08.103
> 
> 标签：php, smarty

我试图让每个文件都有自己的语言文件。

我混合使用 osDate、SMF 和我自己的代码。osDate 将语言存储在数据库中，但我不想要这个，我希望每个文件都有自己的语言文件，例如 register 在 lang/english/register.php 有自己的语言文件。

我将使用 Smarty，这让我很头疼。

我有下面的 PHP 代码工作，但不知道如何添加或让语言方面工作。

这是我当前的代码。

**tester1.php**

```
<?php

if (!defined('SMARTY_DIR')) {
    include_once('init_test.php');
}

$actionArray = array(
    'register' => array('Register.php', 'Register'),
);

if (!isset($_REQUEST['action']) || !isset($actionArray[$_REQUEST['action']])) {
    echo '<a href="?action=register">test</a>';
} else {
    require_once($actionArray[$_REQUEST['action']][0]);
    call_user_func($actionArray[$_REQUEST['action']][1]);

}

$t->display('index.tpl');

?> 
```

**注册.php**

```
<?php

function Register() {
    global $t;
    $t->assign('rendered_page', $t->fetch('register.tpl'));
}

?> 
```

**索引.tpl**

```
{$rendered_page} 
```

**注册.tpl**

```
Test: {$testlang}<br>
Title: {$title} 
```

**语言文件 - lang/english/register.php**

```
<?php

$lang['testlang'] = 'working';
$lang['title'] = 'This is the title';

?> 
```

因此，在示例中，Register 需要从 Register.php 传递语言以显示在 register.tpl 中。

我知道我可以在 Register.php 文件中分配每个语言字符串，但我希望，我能够只分配 who register 语言文件，然后随机调用它，而不必在 Register 中分配每个语言字符串.php

任何代码，欢迎提示。我已经尝试过谷歌搜索，但它并没有想出太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:46:26.483

你不应该将渲染的东西传递给 Smarty - 你应该传递一个字符串数组来使用。

**注册.php**

```
$lang = array(
    'test' => "working",
    'title' => "This is the title", 
);

function Register() {
   global $lang;
   $t->assign('lang', $lang);
} 
```

**索引.tpl**

```
Test: {$lang['test']}<br>
Title: {$lang['title']} 
```

会按照你的要求去做。

但是 - 您不想像这样编写它，因为当您不可避免地需要将参数传递给字符串时，使用它会非常痛苦。

您应该定义一个[Smarty 函数](http://www.smarty.net/docs/en/language.function.function.tpl)以根据需要显示具有尽可能多的变量的翻译文本，例如

```
{translate string='Greeting' name=$user.name} 
```

翻译函数将从已知字符串列表中提取“Greeting”字符串，该字符串将被定义为`Hello %name%`. 然后它将替换`%name%`为用户名`Hello John`等。

# python - 如何阻止 Python 的 gzip 创建子目录？

> ID：15414033
> 
> 赞同：0
> 
> 时间：2013-03-14T15:54:17.470
> 
> 标签：python, gzip

这可能是我的一个简单错误，但我无法弄清楚如何在不创建大量子目录的情况下压缩文件。

这是我的做法：

```
f_in = open(r'C:\cygwin\home\User\Stuff\MoreStuff\file.csv', 'r')
gzip_file_name = r'C:\cygwin\home\User\Stuff\MoreStuff\file.csv.gz'
f_out = gzip.open(gzip_file_name, 'w')
f_out.writelines(f_in)
f_out.close() 
```

问题是，当我解压缩该`.gz`文件时，我得到的不仅仅是`csv`文件，而是最终以 csv 文件结尾的一长串目录。例如`cygwin\home\User\Stuff\MoreStuff\file.csv`

我的解决方法看起来有点像这样：

```
current_dir = os.getcwd()
os.chdir(r'C:\cygwin\home\User\Stuff\MoreStuff') 
f_in = open('file.csv', 'r')
gzip_file_name = 'file.csv.gz'
f_out = gzip.open(gzip_file_name, 'w')
f_out.writelines(f_in)
f_out.close()
os.chdir(current_dir) 
```

我不知道继续更改当前目录是否是个好主意（特别是因为我可能有多个文件要压缩）。

那么，有没有办法不制作这些子目录？[（我在官方文档](http://docs.python.org/2.6/library/gzip.html)中找不到任何讨论此问题的内容）。

注意：我使用的是 Windows，但我确实需要它是可移植的。我也在使用 Python 2.4。

谢谢你的时间。

编辑：当我在 WinRar 甚至 7zip 中打开压缩文件时，我会看到子目录。如果我这样做`chdir`，那么我不再看到那些子目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:53:34.710

crayzeewulf 提供的上一个问题的[链接工作得很好。](https://stackoverflow.com/questions/1466287/python-gzip-folder-structure-when-zipping-single-file/1466443#1466443)

这可能只是较旧的 Python 发行版中的一个问题。根据那个[差异](http://svn.python.org/view/python/trunk/Lib/gzip.py?r1=72458&r2=75935)（也由 crazyzeewulf 提供），这在较新的版本中已更改，因此您可能无法在 Python 2.7 中重现此问题。

谢谢大家的帮助。

# ruby - Ruby strptime 方法错误

> ID：15414034
> 
> 赞同：0
> 
> 时间：2013-03-14T15:54:23.413
> 
> 标签：ruby

所以我正在完成一个构建事件管理器程序的教程，我有点卡住了。我想构建一种方法，该方法将从 .csv 文件中获取注册数据，然后提取人们注册的时间。但是我无法让它工作。这是我到目前为止所拥有的：

```
def reg_hour(regtime)
    regtime = DateTime.new
    DateTime.strptime(regtime, "%H")

end 
```

当我运行代码时，虽然我收到了这个错误：

```
 `block in _strptime_i': undefined method `sub!' for #<DateTime: -4712-01-01T00:00:00+00:00 (-1/2,0,2299161)> (NoMethodError) 
```

我很困惑，任何帮助将不胜感激。

如果有人感兴趣，这里是教程的链接。 [http://tutorials.jumpstartlab.com/projects/eventmanager.html](http://tutorials.jumpstartlab.com/projects/eventmanager.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:09:50.670

不确定您在使用 DateTime.new 做什么并覆盖 regtime 变量（我自己是 ruby​​ 新手）。如果 regtime 来自 csv 文件，它可能以字符串的形式出现。也许您可以使用正则表达式，只要 regdate 格式是一致的。

如果 regdate 是：“11/12/08 10:47”

然后使用：

```
regdate.scan(/\s\d+:/) 
```

将返回 [" 10:"]。也许你可以将它存储在一个数组变量中，并通过删除空格和冒号来清理它。可能有一个更优雅的解决方案，但这是我的新手蛮力方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:17:56.603

我不太确定我是否完全理解您的意图，但在这里重写：

```
require 'time'

def reg_hour(regtime)
    DateTime.strptime(regtime, "%H")
end

d = reg_hour("21/03/2011 14:39:11.642")
puts d.year 
```

这是你想做的事情吗？

# google-app-engine - javax.servlet.UnavailableException：java.security.AccessControlException：GAE 上的访问被拒绝

> ID：15414039
> 
> 赞同：1
> 
> 时间：2013-03-14T15:54:41.503
> 
> 标签：google-app-engine

我已经使用 GAE 实现了一个长轮询应用程序，该应用程序在我的本地机器上运行良好，但是当我尝试部署它时，GAE 出现以下错误（顺便说一句，我没有使用 log4j 进行日志记录）：

```
Uncaught exception from servlet
javax.servlet.UnavailableException: java.security.AccessControlException: access denied (java.lang.RuntimePermission modifyThreadGroup)
    at org.mortbay.jetty.servlet.ServletHolder.makeUnavailable(ServletHolder.java:415)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:451)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:219)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:194)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:134)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:454)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T21:11:44.590

您是否使用其中一种受支持的方法启动胎面？[（请参阅https://developers.google.com/appengine/docs/java/runtime#The_Sandbox](https://developers.google.com/appengine/docs/java/runtime#The_Sandbox)中的“线程” ）

如果没有，请尝试。如果是，请显示您用于生成线程的代码。

# youtube-api - Youtube 视频播放器全屏点击事件

> ID：15414044
> 
> 赞同：3
> 
> 时间：2013-03-14T15:54:53.287
> 
> 标签：youtube-api, fullscreen, onclicklistener, youtube-javascript-api

我正在尝试将自定义控件添加到嵌入式 YouTube 播放器。我正在覆盖一个 html 菜单。但是，当用户单击 YouTube 中的全屏按钮时，我的 html 菜单将不再在较大的播放器上可用。

我预见有两种可能的解决方案。

首先，如果我能找出为全屏播放器生成的元素，那么我可以在上面覆盖控件。

其次，如果我可以抓住全屏点击事件，我可以使用 javascript 来获取当前可用的窗口定义，并将视频缩放到可用的房地产。

我发现了这个：[https ://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode?redirectlocale=en-US&redirectslug=DOM%2FUsing_full-screen_mode](https://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode?redirectlocale=en-US&redirectslug=DOM%2FUsing_full-screen_mode)

但是，我不确定它是否适用于大多数浏览器，其次它看起来像是处于测试阶段。

我正在寻找的答案是：什么是元素或如何找到为全屏播放器生成的元素？

或者

如何捕获全屏点击事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T00:18:20.583

您想捕捉屏幕上任意位置或菜单链接上的点击吗？

如果您想捕获对菜单上链接的点击，我认为这个插件可以作为一个有用的示例：

[http://www.seanmccambridge.com/tubular/](http://www.seanmccambridge.com/tubular/)

[https://code.google.com/p/jquery-tubular/source/browse/trunk/js/jquery.tubular.1.0.js](https://code.google.com/p/jquery-tubular/source/browse/trunk/js/jquery.tubular.1.0.js)

# javascript - 从网络工作者发布数据后的参考

> ID：15414046
> 
> 赞同：1
> 
> 时间：2013-03-14T15:54:54.177
> 
> 标签：javascript, web-worker

我认为您从网络工作者使用“postMessage”发送的对象的序列化是使用 JSON.serialize 进行的，而反序列化是使用 JSON.parse 进行的。但是我用那个工作代码做了一个测试（在 Firefox 中）：

```
function A() {
    this.id = 3;
    this.save;
}

var a1 = new A();
var a2 = new A();

a1.save = a2;

postMessage({
    'a1' : a1,
    'a2' : a2    
}); 
```

现在在主文件中你有：

```
w.onmessage = function(event) {
    event.data.a2.id = 7;
}; 
```

问题是之后 a1.save.id 中的值也是 7。所以必须有一个引用，但是当你使用 JSON.serialze 和 JSON.parse 时没有引用......那么序列化是如何进行的？我可以在所有浏览器中假设该引用吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:57:37.257

不，Worker 通信不使用 JSON 进行序列化。您可以手动执行并传递字符串，但您不需要这样做。

[MDN 声明](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers#Passing_data)：

> 在主页和工作人员之间传递的消息是复制的，而不是共享的。对象在交给工作人员时会被序列化，然后在另一端反序列化。页面和工作人员不共享同一个实例，因此最终结果是在每一端都创建了一个副本。大多数浏览器将此功能实现为[结构化克隆](https://developer.mozilla.org/en-US/docs/DOM/The_structured_clone_algorithm)。

事实上，[Worker 规范`postMessage`](http://dev.w3.org/html5/workers/#dom-dedicatedworkerglobalscope-postmessage)说参数被传递给底层`MessagePort`的 's `postMessage`，并且[被指定](http://www.whatwg.org/specs/web-apps/current-work/#dom-messageport-postmessage)为在参数上使用[结构化克隆算法](http://www.w3.org/TR/html5/infrastructure.html#safe-passing-of-structured-data)`message`。

# android - 错误：列表网格应该没有在 xml 中声明的子项

> ID：15414048
> 
> 赞同：0
> 
> 时间：2013-03-14T15:54:57.687
> 
> 标签：android, listview, android-linearlayout

我正在尝试在我的 android 布局文件中创建一个 listview 布局。ListView 的结构是这样的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".Table" >

<ListView
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:onClick="launch_booklayout"
        android:text="@string/demo"
        android:textIsSelectable="true" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:onClick="launch_booklayout"
        android:text="@string/demo"
        android:textIsSelectable="true" />
</ListView> 
```

我在 Eclipse 中得到以下错误：

> 列表/网格不应该有在 XML 中声明的子级

有谁知道我应该解决什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:58:41.327

正是错误所说的。改变

```
<ListView
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" > 
```

至

```
<ListView
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" /> 
```

并取出`</ListView>`. 现在，你有它不允许的`TextViews`作为孩子`ListView`

**编辑**

如果您正在扩展`ListActivity`，您的`list`. 你需要改变

```
<ListView
android:id="@+id/linearLayout1"
... 
```

至

```
<ListView
android:id="@android:id/list"
... 
```

如果您正在扩展，`Activity`那么您将不需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:59:41.880

你不能把任何孩子放在你的列表视图之间删除你的文本视图，它会解决你的问题

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".Table" >

<ListView
android:id="@+id/linearLayout1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:onClick="launch_booklayout"
    android:text="@string/demo"
    android:textIsSelectable="true" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:onClick="launch_booklayout"
    android:text="@string/demo"
    android:textIsSelectable="true" /> 
```

如果你想在你的列表视图中显示 2 个文本视图，你需要使用`customAdapter`类来实现这个目标

这是一个很好的列表视图教程： [http ://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# php - CodeIgniter：尝试调用构造方法来检查用户是否登录（导致无限的重定向循环）

> ID：15414049
> 
> 赞同：1
> 
> 时间：2013-03-14T15:55:01.560
> 
> 标签：php, codeigniter, authentication, constructor

我遇到了 CodeIgniter 2.1.2 的问题并坚持了几个小时尝试解决它：-/

我知道有很多（！）关于这个的线程，但我找不到我的问题的解决方案。

我想在我的构造函数中加载一个方法来检查用户是否登录，所以我尝试了这个：

```
class my_class extends CI_Controller
{
public function __construct();
parent::__construct();

$this->check(); //doesn't work, endless redirection loop
} 
```

“检查（）”是：

```
public function check()
{
    if (! $this->session->userdata('logged_in'))  
    {     
        redirect('/login'); // tried with & without '/'
    }
} 
```

方法“login()”如下所示：

```
public function login()
{
  ...
  //do form validation stuff and on success:
  if ($this->form_validation->run() == TRUE)
    {
     $this->session->set_userdata('logged_in', TRUE);
     redirect('/entry'); 
    }
   //load login_view
} 
```

方法“入口（）”：

```
public function entry()
{
  //$this->check();//Old (redundant) Version

  //Authorized and Happy...
} 
```

// 其他一些方法，也先调用check()方法

所以我的问题是，为什么方法中的调用有效（但有很多冗余调用）并且构造函数中的调用给了我一个无限循环？我错过了什么吗？（我也没有更改 htaccess 文件中的内容..）

提前谢谢:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:56:11.377

详细说明评论者所说的话：

暂时完全忽略`MY_Controller`解决方案，问题是您的`__construct()`方法 - 以及随后`$this->check()`- 在每个控制器上都被调用，包括您的登录控制器。

1.  加载主页。构造函数加载`check()`。
2.  未登录。重定向到`/login`。
3.  登录构造函数加载`check()`。
4.  未登录。重定向到`/login`。

... 等等等等。

解决方案是**检查正在访问的 URL**，如果它属于您的登录控制器/方法，则不要执行重定向。

```
public function check()
{
    if ($this->uri->uri_string() !== 'login' && ! $this->session->userdata('logged_in'))
    {     
        redirect('login');
    }
} 
```

相反，您的登录方法应该检查用户是否确实已经登录，如果是，则将他重定向到您的主页或其他地方。但我离题了。

* * *

该`MY_Controller`解决方案涉及[创建一个基本控制器](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-base-Classes-Keeping-it-DRY)，其构造函数执行登录检查。然后，您想要执行该检查的任何控制器都应该扩展`MY_Controller`而不是`CI_Controller`.

请注意，您的登录控制器**不会**扩展`MY_Controller`，因为您不想执行检查，否则您的无限循环将再次出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:16:04.997

这很难准确，但这里有。

我假设 login()*不是*my_class 类/控制器中的方法。如果是，这可能是错误的原因，因为每次都会调用构造函数。

更好的方法是让安全控制器扩展 CI_Controller，例如 Auth_Controller。这将在 application/libraries/MY_Controller.php 文件中。

您的安全控制器将扩展 Auth_Controller，并且 check() 将在其构造函数中进行。登录控制器不会扩展 Auth_Controller。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:01:35.180

这里有一些快速的建议，但首先要确保在 config/autoload.php 中自动加载会话库

这不是登录类。您不会在登录类中有重定向，您只需直接转到 $this->enterLogin() 或任何方法名称，这样它就不会循环。

```
 // Capitalize the first letter of the class!!
 class My_class extends CI_Controller
 {
     public function __construct();
     parent::__construct();

     // check if login is false
     // redirect here in the constructor, not buried in a method
     // note the underscore in the name _checkLogin() to make that method private

     if ( $this->_checkLogin() == false ) 
    { redirect( '/login/', 'refresh' );  }

 } // end constructor

 // private function 
 function _checkLogin(){
    if (! $this->session->userdata('logged_in'))  
    {   return false ;  }
    else
    { return true; } 

  } // 
```

# javascript - Jquery toolTip 从 HiddenField 获取？

> ID：15414051
> 
> 赞同：-1
> 
> 时间：2013-03-14T15:55:05.423
> 
> 标签：javascript, jquery, asp.net, jquery-ui

我有 asp.net 日历我嵌入了 asp.net HiddenField 控制器，我把消息值归因于我想问我如何将 HiddenField 值用于 JQ 工具提示

```
$("#hf_taskID_cal").tooltip($("#hf_taskID_cal").val()); 
```

错误

```
Uncaught Error: cannot call methods on tooltip prior to initialization; attempted to call method 'TaskID:10047   Start Date:2/25/2013 12:00:00 AM    End Date:2/26/2013 12:00:00 AM' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:58:04.240

您需要使用 jQuery 通过 jQuery 正确调用您的元素`$`

```
$("#hf_taskID_cal").tooltip($('#hf_taskID_cal').val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:54:27.787

用这个

```
 $("#Calendar1 td").has("#ClassPerentORchilld").tooltip({ content: $("#hf_taskID_cal").val() }) 
```

# monkeytalk - 猴话安卓

> ID：15414057
> 
> 赞同：2
> 
> 时间：2013-03-14T15:55:16.117
> 
> 标签：monkeytalk

我正在使用 Monkey Talk Android 代理，我成功记录了登录页面，但是当我导航到应用程序内的日历屏幕时，它崩溃了。谁能帮我解决一下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-16T05:42:16.067

实际上这是因为当我们当时尝试导航到日历时，相同的事件被触发了两次，我知道当我与我的开发人员进行调试时，我猜这是 Gorilla 逻辑的问题，希望他们能在下一个版本中修复它.

# noindex - FAST Search 验证 noindex

> ID：15414063
> 
> 赞同：0
> 
> 时间：2013-03-14T15:55:26.377
> 
> 标签：noindex, fastsearch

在 FAST Search 中，可以通过以下几种方式忽略内容 -

*   通过使用元标记
*   通过将链接包含在标签中

除了在搜索结果上做之前和之后，有没有办法验证这是否真的有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:38:52.590

否。如果您有疑问，请在小型内容源上进行测试。如果您使用的是 2010 或更早版本，则可以使用 docpush 和 doclog 来测试和记录单个文档的结果。

# c# - 中止 HttpWebRequest 不起作用

> ID：15414064
> 
> 赞同：2
> 
> 时间：2013-03-14T15:55:30.387
> 
> 标签：c#, .net, wpf

我正在使用这种方法来获取谷歌建议查询：

```
public void GetSuggestFromGoogle(string query)
    {
        try
        {
            query = HttpUtility.UrlEncode(query);
            string targetUrl = "http://suggestqueries.google.com/complete/search?ds=yt&output=toolbar&hl=en-US&q=" + query;

            UTF8Encoding utf8 = new UTF8Encoding();
            byte[] bytes = utf8.GetBytes(targetUrl);
            targetUrl = targetUrl.ToString();

            request = HttpWebRequest.Create(new Uri(targetUrl)) as HttpWebRequest;
            request.Method = "GET";

            IsDownload = true;
            request.BeginGetResponse(new AsyncCallback(FinishWebRequest), request);
        }
        catch
        {
            IsDownload = false;
            failCallback();
        }

    } 
```

在我调用这个方法之前，我使用：

```
public void CancelGoogleRequest()
    {
        if (IsDownload)
        {
            request.Abort();
            IsDownload = false;
        }
    } 
```

这是完成请求方法：

```
private void FinishWebRequest(IAsyncResult result)
    {
        try
        {
            HttpWebResponse wResponse = (result.AsyncState as HttpWebRequest).EndGetResponse(result) as HttpWebResponse;
            Stream stream = wResponse.GetResponseStream();

            StreamReader reader = new StreamReader(stream);
            string xml = reader.ReadToEnd();

            List<string> list = this.ParseXml(xml);
            finishCallback(list);
            IsDownload = false;
        }
        catch//(Exception erere)
        {
            IsDownload = false;
            failCallback();
        }
    } 
```

我的问题是 Abort `HttpWebRequest`，即使我在调用新`FinishWebRequest`方法之前中止请求，也可以取消它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:03:54.290

从[HttpWebRequest.Abort](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.abort.aspx)的备注部分：

> 如果在这些操作中的任何一个未完成时调用 Abort 方法，Abort 方法将同步执行指定给 BeginGetRequestStream 或 BeginGetResponse 方法的回调。

所以你不能回避电话。但是您已经有了自己的`IsDownload`标志并且可以这样使用它：

```
private void FinishWebRequest(IAsyncResult result)
{
    if (IsDownload)
    {
        // handle response
    }
} 
```

当您像这样更改 Cancel 方法时：

```
public void CancelGoogleRequest()
{
    if (IsDownload)
    {
        IsDownload = false; // set before Abort
        request.Abort();
    }
} 
```

* * *

更新：如果您不能使用该`IsDownload`标志，您可以简单地依赖以下内容（也来自备注）：

> Abort 方法取消对资源的请求。取消请求后，调用 GetResponse、BeginGetResponse、EndGetResponse、GetRequestStream、BeginGetRequestStream 或 EndGetRequestStream 方法会导致 WebException，其 Status 属性设置为 RequestCanceled

由于您的响应处理代码周围已经有一个 try 块，所以一切都应该没问题。`IsDownload = false`但是，当新请求已经启动时，您不应该在异常处理程序中设置，至少在 WebException 状态为`RequestCanceled`：

```
private void FinishWebRequest(IAsyncResult result)
{
    try
    {
        // handle response
    }
    catch (WebException webEx)
    {
        if (webEx.Status != WebExceptionStatus.RequestCanceled)
        {
            IsDownload = false;
            failCallback();
        }
    }
    catch
    {
        IsDownload = false;
        failCallback();
    }

} 
```

* * *

另一个想法。由于同步`Abort`调用`FinishWebRequest`回调，您可以使用如下`IsAborted`标志：

```
public void CancelGoogleRequest()
{
    if (IsDownload)
    {
        IsDownload = false; // set before Abort
        IsAborting = true;
        request.Abort();
        IsAborting = false;
    }
} 
```

使用这样的回调：

```
private void FinishWebRequest(IAsyncResult result)
{
    if (!IsAborting)
    {
        // handle response
    }
} 
```

# highcharts - Highcharts 堆积条形负/正总

> ID：15414065
> 
> 赞同：3
> 
> 时间：2013-03-14T15:55:31.347
> 
> 标签：highcharts, bar-chart, stacked

我有一个这样的堆积条形图：http: [//jsfiddle.net/XFX5T/](http://jsfiddle.net/XFX5T/)

我想知道是否可以将负+正值的总和作为堆叠标签。

如果总数为正，则在条形顶部显示标签。如果总数为负数，则在条形底部显示标签。

例如，示例中的葡萄列将有 40 作为标签。

查看了文档，但似乎没有为此的默认配置设置。

```
stackLabels: {
   enabled: true,
   style: {
     fontWeight: 'bold',
     color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
   }
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T17:15:49.213

您可以尝试使用 stackLabels 格式化程序。例如：

```
stackLabels: {
  formatter: function(){
    var sum = 0;
    var series = this.axis.series;

    for (var i in series){
      sum+=series[i].yData[this.x];
    }
    if (sum < 0 && this.isNegative || sum >= 0 && !this.isNegative)
      return sum;
  }
...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T17:24:22.450

公认答案的一个缺点是它不适用于分组堆栈，因为您将获得所有堆栈系列的总数，而不仅仅是每个组中的系列。

这是一个适用于分组堆栈的函数（不是很漂亮）：

```
 function() {
        var stackItem = this;
        var allStacks = stackItem.axis.stacks;
        for (var key in allStacks) {
            if (allStacks[key][stackItem.x] == stackItem) {
                var oppositeKey = stackItem.isNegative ? key.slice(1) : '-' + key;
                var oppositeItem = allStacks[oppositeKey] && allStacks[oppositeKey][stackItem.x];
                if (oppositeItem === undefined) {
                    if (stackItem.total != 0.0) {
                        return Highcharts.numberFormat(stackItem.total, 0);
                    }
                } else {
                    var sum = stackItem.total + oppositeItem.total;
                    if (stackItem.isNegative ^ sum > 0) {
                        return Highcharts.numberFormat(sum, 0);
                    }
                }
            }
        }
    }; 
```

注意我是`this`从格式化程序传递过来的。

这是一个[工作示例](http://jsfiddle.net/kippr/ULwa3/4/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T20:18:38.583

如果您碰巧遇到此问题，但您的 x 轴使用`type: 'datetime'`，则可以使用此双循环解决方案`stackLabels.formatter`使其工作：

```
formatter: function () {
    var sum = 0;
    var series = this.axis.series;

    for (var i = 0; i < series.length; i++){
        for(var j = 0; j < series[i].xData.length; j++) {
            if(series[i].xData[j] == this.x) {
                sum += series[i].yData[j];
                break;
            }
        }
    }

    if(sum < 0 && this.isNegative)
        return sum;
    else if(sum >= 0 && !this.isNegative)
        return sum;

     return;
} 
```

正如[这个 JSFiddle](http://jsfiddle.net/aTh7F/4/)演示的那样。

# ruby - 在 Sketch Up Ruby 脚本中旋转对象

> ID：15414066
> 
> 赞同：2
> 
> 时间：2013-03-14T15:55:33.963
> 
> 标签：ruby, sketchup

我正在尝试创建一个带有循环的几个圆柱体，每次在 3 个维度上稍微旋转每个圆柱体，随机量。

这是我到目前为止所拥有的：

```
until i == 200
        x += rand(10)
        y += rand(10)
        z += rand(10)
        xyz = rand(2)
        circle = entities.add_circle([x,y,z], axis[xyz], r, n)
        base = entities.add_face(circle)
        base.pushpull -h
        base.transform_entities(Geom::Transformation.rotation([0,0,0],[1,0,0],rand(360)),base)
        i += 1
        #sleep 0.2
    end 
```

transform_entities 抛出此错误：

```
Error: #<NoMethodError: undefined method `transform_entities' for <Sketchup::Face:0x18836040>> 
```

有什么想法可以让我完成这项工作吗？我已经浏览了 API 文档，但找不到解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:18:48.693

我错误地将转换应用于基础而不是实体。

应该：

```
entities.transform_entities(Geom::Transformation.rotation([0,0,0],[1,0,0],rand(360)),base) 
```

# python - 转换日期的优雅方式

> ID：15414068
> 
> 赞同：0
> 
> 时间：2013-03-14T15:55:37.387
> 
> 标签：python, django

与 django 合作，我得到了以下表格

```
class ReportDataForm(forms.Form):
start_date = forms.DateField(input_formats=settings.DATE_INPUT_FORMATS)
end_date = forms.DateField(input_formats=settings.DATE_INPUT_FORMATS) 
```

我的日期字段具有以下格式：“mm/dd/yy”与 DATE_INPUT_FORMATS 之一匹配

这些日期时间字段通过 GET 请求提交并用于查询。现在，我的观点看起来很丑：

```
 if request.method == 'GET':
    form = ReportDataForm(request.GET)
    context={'form':form}
    if form.is_valid():
        start_date = datetime.strptime("%m/%d/%y")
        end_date = datetime.strptime("%m/%d/%y")
        report = Mymodel.objects.filter(date__gte=start_date)\
                                .filter(date__lte=end_date) 
```

有没有办法避免这种转换或在验证器中的某个地方进行，因为它与视图逻辑无关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:57:45.527

它已经为你完成了。只需访问`form.cleaned_data['start_date']`等。

# apache - 从一个子目录重定向到另一个子目录，但阻止直接访问后一个子目录

> ID：15414070
> 
> 赞同：0
> 
> 时间：2013-03-14T15:55:38.380
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

就像标题所暗示的那样，我想将一个子目录重定向到另一个子目录，同时阻止对后一个子目录的直接访问。例如，我想阻止直接访问`domain.com/foo`：

```
RewriteRule ^foo [F,NC] 
```

但我想`domain.com/bar`重定向到`domain.com/foo`：

```
RewriteRule ^bar/* /foo/ [R=301] 
```

是否可以将这两个规则合二为一，所以*会*`domain.com/bar`加载`domain.com/foo`但`domain.com/foo`不会加载？*`domain.com/foo`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:14:51.043

通过启用 mod_rewrite 和 .htaccess`httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# block direct access to /foo/*
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+foo[/\s] [NC]
RewriteRule ^ - [L,F]

# allow access to /foo/* via /bar/*
RewriteRule ^bar/(.*)$ /foo/$1 [L,NC] 
```*

# sql-server-2005 - 数据库设计 101：如何链接两列

> ID：15414071
> 
> 赞同：0
> 
> 时间：2013-03-14T15:55:40.733
> 
> 标签：sql-server-2005, database-design, constraints

我正在尝试在 MSSQL 2005 中为我的公司设置电话列表。

我拥有的当前架构有效，但我想在名为“EmployeeCompany”的员工表中添加一个列，并让它从部门的“CompanyName”列中提取。

如果 Department 表中的 CompanyName 不是 PK，我将如何链接这两列？

任何帮助是极大的赞赏。

谢谢你，CJ

![数据库设计示例](../Images/aacd67c29aed56aab661dcda6d68223a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T11:41:22.990

如果你知道员工的部门，你知道部门的公司，那么你也知道员工的公司。您可以将其表示为 SQL 中的简单 JOIN，如果您希望简化客户端代码，甚至可以将此 JOIN“隐藏”在 VIEW 后面。

作为一般规则：除非您试图解决特定的性能问题，否则**不应存储可以推断的数据。**

让我分解一下这个思路：

*   如果可以从数据库中已有的数据中**推断出**一条数据，
*   然后尝试将其存储在数据库中是**多余的**
*   并且不必要地占用**存储空间**
*   并可能导致**数据不一致**¹
*   因此**不应物理存储**在数据库中，
*   除非您尝试通过缓存冗余数据来解决**特定的、可测量的性能问题，**否则该问题足够严重²以证明数据不一致的危险是合理的。

*但是，有一种方法可以通过“滥用”引用完整性迁移*属性这一事实来同时具有冗余和完整性。[达米尔回答](https://stackoverflow.com/a/15417061/533120)的“案例2”解释了一种方式，让我提供另一种方式：

![在此处输入图像描述](../Images/ef3682a80bfc60533b77aee29c274e4c.png)

如您所见，外键（`FKx`在上图中）不必引用主键 - 它也可以引用备用键（`Ux`）。这使您可以保留`Company_id`和`Department_id`作为各自表的主键，并避免干扰模型的其余部分³。

* * *

*¹如果有两条数据描述同一事物，其中一条已更新，那么您总是有可能忘记更新另一条（例如，由于应用程序错误）。除非您可以诱使 DBMS 自己为您做这件事，如答案中所述。*

*²例如过多的 JOIN 或昂贵的聚合。*

*³即可能引用公司或部门的其他表格。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:13:41.890

案例 1——使用 ID

![在此处输入图像描述](../Images/21489692ca0fa657ba440f2056b4a500.png)

* * *

案例 2——自然的复合键

![在此处输入图像描述](../Images/4c7b1fc85ef6d0913bb73b8e47f0c3da.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T15:58:10.840

在部门表中，您存储的`company_id`是键，而不是`company name`.

当你想查询员工所在的公司时，你可以这样做：

```
SELECT
   LastName,
   FirstName,
   CompanyName
FROM
   Employee
   INNER JOIN Department ON employee.department_id = department.department_id
   INNER JOIN Company ON department.company_id = company.company_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T15:57:44.137

我将创建第三个名为 Company 的表，它有两列 - CompanyId（主键）和 CompanyName。然后我会使用 CompanyId 作为 Department 中的外键，然后使用 DepartmentId 作为 Employee 中的外键。

# javascript - 为什么这个 Javascript 自动点击不起作用？

> ID：15414075
> 
> 赞同：0
> 
> 时间：2013-03-14T15:55:50.320
> 
> 标签：javascript, jquery

```
<!DOCTYPE HTML><html><head><title>Test</title>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.5.1.min.js" type="text/javascript"></script>

<script type="text/javascript">
$('.todoitem').click(function() {
alert('ok');
}).click();
</script>

</head>

<body>
<h1>25 Feb 2011</h1>
<h3>ABC</h3>
<ul>
<div>
<a href="http://www.barnsley-chronicle.co.uk" class="todoitem">I want to click here</a>    </div>
</li>
</ul>
</body>
</html> 
```

我很困惑。我需要做的就是单击 class="todoitem" 中的链接。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:59:25.847

您正在分配 onClick 功能以链接您的代码，您想做`$(".target").click();`

顺便说一句，在 Google 上找到“jquery click on link”的第一个链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:07:25.410

尝试这个：

```
$(document).ready(function(){
    $(".todoitem").click(function() {
        alert('Item selected');
        return false;
    });
}); 
```

否则，您将没有时间查看该`'Item selected'`消息，因为在显示该消息后，浏览器会立即转到您链接中指定的 URL。上面的代码在执行后取消了事件处理`alert()`。

要自动点击链接，请使用`click()`这里很多人提到的方法：

```
$(document).ready(function(){
    $(".todoitem").click();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:21:40.547

尝试这个：

```
 <!DOCTYPE HTML><html><head><title>Test</title>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.5.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
    $(".todoitem").click(function() {
        alert('Item selected');
        window.location = $(this).attr("href");
    });

    $(".todoitem").click();
});
</script>
</head>
<body>
<h1>25 Feb 2011</h1>
<h3>ABC</h3>
<ul>
<div>
<a href="http://www.barnsley-chronicle.co.uk" class="todoitem">I want to click here</a></div>
</li>
</ul>
</body> 
```

[http://jsfiddle.net/Z72Xh/](http://jsfiddle.net/Z72Xh/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T16:02:02.450

你总是可以做一个 window.location = ""; 页面加载后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T15:57:49.097

要自动点击，您应该这样做：

```
$('.todoitem').click(); 
```

这是您在[JSFiddle](http://jsfiddle.net/NqML7/)中的示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T16:00:24.910

这不是设置“自动点击”。`$('.todoitem').click()`会做你正在寻找的。

你实际上是在设置一个监听器。所以如果你点击`.todoitem`它就会有那个动作。

```
$('.todoitem').click() 
```

是您正在寻找的功能。

如果您需要设置侦听器并自动单击，您可以这样做

```
$('.todoitem').click(function() {
    alert('ok');
}).click(); 
```

# pdf - 将多个 PDF 合并为一个 PDF

> ID：15414077
> 
> 赞同：5
> 
> 时间：2013-03-14T15:55:53.393
> 
> 标签：pdf, google-apps-script, export-to-pdf, pdf-manipulation

我的代码有一些问题。我正在尝试遍历包含许多 PDF 的 Drive 文件夹，然后将它们合并到一个文件中。当我使用我的代码时，它只是为 Drive 文件夹中的最后一个 PDF 创建一个 PDF，而不是按预期将它们合并在一起。

```
function MergeFiles(){
  var folder = DocsList.getFolderById('myFolderID'); 
  var files = folder.getFiles(); 
  var blobs = [];    
  for( var i in files )   
    blobs.push(files[i].getBlob().getBytes());
  Logger.log(blobs.push(files[i].getBlob().getBytes()));
  var myPDF = Utilities.newBlob(blobs.pop(), "application/pdf", "newPDF.pdf");
  folder.createFile(myPDF);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2019-08-17T03:59:53.157

因此，这不仅仅是简单地组合来自每个文件的数据。每个文件的实际可用数据与标记和其他代码（类似于 HTML 和其他文档格式）“打包”。您实际上必须解码每个 PDF 文件，组合必要的部分，然后使用新的“包装”重新编码。这需要了解 PDF 规范和结构的工作知识，可从 Adob​​e[此处](https://www.adobe.com/content/dam/acom/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)免费获得。

我使用这些信息编写了一个足以满足我需求的脚本。然而，它并没有考虑到所有可能性，因此特别是合并任何需要 PDF-1.4 和更高版本的文档，这将需要相当多的工作。

```
/**
 * Merges all given PDF files into one.
 *
 * @param {Folder} directory the folder to store the output file
 * @param {string} name the desired name of the output file
 * @param {File} pdf1 the first PDF file
 * @param {File} pdf2 the second PDF file
 * @param {File} opt_pdf3 [optional] the third PDF file; add as many more as you like
 *
 * @return {File} the merged file
 */
function mergePdfs(directory, name, pdf1, pdf2, opt_pdf3) {

  if (name.slice(-4) != '.pdf') {

    name = name + '.pdf';

  }
  var newObjects = ['1 0 obj\r\n<</Type/Catalog/Pages 2 0 R >>\r\nendobj'];
  var pageAddresses = [];
  for (var argumentIndex = 2; argumentIndex < arguments.length; argumentIndex++) {

    var bytes = arguments[argumentIndex].getBlob().getBytes();
    var xrefByteOffset = '';
    var byteIndex = bytes.length - 1;
    while (!/\sstartxref\s/.test(xrefByteOffset)) {

      xrefByteOffset = String.fromCharCode(bytes[byteIndex]) + xrefByteOffset;
      byteIndex--;

    }
    xrefByteOffset = +(/\s\d+\s/.exec(xrefByteOffset)[0]);
    var objectByteOffsets = [];
    var trailerDictionary = '';
    var rootAddress = '';
    do {

      var xrefTable = '';
      var trailerEndByteOffset = byteIndex;
      byteIndex = xrefByteOffset;
      for (byteIndex; byteIndex <= trailerEndByteOffset; byteIndex++) {

        xrefTable = xrefTable + String.fromCharCode(bytes[byteIndex]);

      }
      xrefTable = xrefTable.split(/\s*trailer\s*/);
      trailerDictionary = xrefTable[1];
      if (objectByteOffsets.length < 1) {

        rootAddress = /\d+\s+\d+\s+R/.exec(/\/Root\s*\d+\s+\d+\s+R/.exec(trailerDictionary)[0])[0].replace('R', 'obj');

      }
      xrefTable = xrefTable[0].split('\n');
      xrefTable.shift();
      while (xrefTable.length > 0) {

        var xrefSectionHeader = xrefTable.shift().split(/\s+/);
        var objectNumber = +xrefSectionHeader[0];
        var numberObjects = +xrefSectionHeader[1];
        for (var entryIndex = 0; entryIndex < numberObjects; entryIndex++) {

          var entry = xrefTable.shift().split(/\s+/);
          objectByteOffsets.push([[objectNumber, +entry[1], 'obj'], +entry[0]]);
          objectNumber++;

        }

      }
      if (/\s*\/Prev/.test(trailerDictionary)) {

        xrefByteOffset = +(/\s*\d+\s/.exec(/\s*\/Prev\s*\d+\s/.exec(trailerDictionary)[0])[0]);

      }

    } while (/\s*\/Prev/.test(trailerDictionary));
    var rootObject = getObject(rootAddress, objectByteOffsets, bytes);
    var pagesAddress = /\d+\s+\d+\s+R/.exec(/\/Pages\s*\d+\s+\d+\s+R/.exec(rootObject)[0])[0].replace('R', 'obj');
    var pagesObject = getObject(pagesAddress, objectByteOffsets, bytes);
    var objects = getDependencies(pagesObject, objectByteOffsets, bytes);
    var newObjectsInsertionIndex = newObjects.length;
    for (var objectIndex = 0; objectIndex < objects.length; objectIndex++) {

      var newObjectAddress = [(newObjects.length + 3) + '', 0 + '', 'obj'];
      if (!Array.isArray(objects[objectIndex])) {

        objects[objectIndex] = [objects[objectIndex]];

      }
      objects[objectIndex].unshift(newObjectAddress);
      var objectAddress = objects[objectIndex][1].match(/\d+\s+\d+\s+obj/)[0].split(/\s+/);
      objects[objectIndex].splice(1, 0, objectAddress);
      if (/\/Type\s*\/Page[^s]/.test(objects[objectIndex][2])) {

        objects[objectIndex][2] = objects[objectIndex][2].replace(/\/Parent\s*\d+\s+\d+\s+R/.exec(objects[objectIndex][2])[0], '/Parent 2 0 R');
        pageAddresses.push(newObjectAddress.join(' ').replace('obj', 'R'));

      }
      var addressRegExp = new RegExp(objectAddress[0] + '\\s+' + objectAddress[1] + '\\s+' + 'obj');
      objects[objectIndex][2] = objects[objectIndex][2].replace(addressRegExp.exec(objects[objectIndex][2])[0], newObjectAddress.join(' '));
      newObjects.push(objects[objectIndex]);

    }
    for (var referencingObjectIndex = newObjectsInsertionIndex; referencingObjectIndex < newObjects.length; referencingObjectIndex++) {

      var references = newObjects[referencingObjectIndex][2].match(/\d+\s+\d+\s+R/g);
      if (references != null) {

        var string = newObjects[referencingObjectIndex][2];
        var referenceIndices = [];
        var currentIndex = 0;
        for (var referenceIndex = 0; referenceIndex < references.length; referenceIndex++) {

          referenceIndices.push([]);
          referenceIndices[referenceIndex].push(string.slice(currentIndex).indexOf(references[referenceIndex]) + currentIndex);
          referenceIndices[referenceIndex].push(references[referenceIndex].length);
          currentIndex += string.slice(currentIndex).indexOf(references[referenceIndex]);

        }
        for (var referenceIndex = 0; referenceIndex < references.length; referenceIndex++) {

          var objectAddress = references[referenceIndex].replace('R', 'obj').split(/\s+/);
          for (var objectIndex = newObjectsInsertionIndex; objectIndex < newObjects.length; objectIndex++) {

            if (arrayEquals(objectAddress, newObjects[objectIndex][1])) {

              var length = string.length;
              newObjects[referencingObjectIndex][2] = string.slice(0, referenceIndices[referenceIndex][0]) + newObjects[objectIndex][0].join(' ').replace('obj', 'R') +
                string.slice(referenceIndices[referenceIndex][0] + referenceIndices[referenceIndex][1]);
              string = newObjects[referencingObjectIndex][2];
              var newLength = string.length;
              if (!(length == newLength)) {

                for (var subsequentReferenceIndex = referenceIndex + 1; subsequentReferenceIndex < references.length; subsequentReferenceIndex++) {

                  referenceIndices[subsequentReferenceIndex][0] += (newLength - length);

                }

              }
              break;

            }

          }

        }

      }

    }
    for (var objectIndex = newObjectsInsertionIndex; objectIndex < newObjects.length; objectIndex++) {

      if (Array.isArray(newObjects[objectIndex])) {

        if (newObjects[objectIndex][3] != undefined) {

          newObjects[objectIndex] = newObjects[objectIndex].slice(2);

        } else {

          newObjects[objectIndex] = newObjects[objectIndex][2];

        }

      }

    }

  }
  newObjects.splice(1, 0, '2 0 obj\r\n<</Type/Pages/Count ' + pageAddresses.length + ' /Kids [' + pageAddresses.join(' ') + ' ]>>\r\nendobj');
  newObjects.splice(2, 0, '3 0 obj\r\n<</Title (' + name + ') /CreationDate (D' +
       Utilities.formatDate(new Date(), CalendarApp.getDefaultCalendar().getTimeZone(), 'yyyyMMddHHmmssZ').slice(0, -2) + "'00) /ModDate (D" + Utilities.formatDate(new Date(),
       CalendarApp.getDefaultCalendar().getTimeZone(), 'yyyyMMddHHmmssZ').slice(0, -2) + "'00)>>\r\nendobj");
  var byteOffsets = [0];
  var bytes = [];
  var header = '%PDF-1.3\r\n';
  for (var headerIndex = 0; headerIndex < header.length; headerIndex++) {

    bytes.push(header.charCodeAt(headerIndex));

  }
  bytes.push('%'.charCodeAt(0));
  for (var characterCode = -127; characterCode < -123; characterCode++) {

    bytes.push(characterCode);

  }
  bytes.push('\r'.charCodeAt(0));
  bytes.push('\n'.charCodeAt(0));
  while (newObjects.length > 0) {

    byteOffsets.push(bytes.length);
    var object = newObjects.shift();
    if (Array.isArray(object)) {

      var streamKeyword = /stream\s*\n/.exec(object[0])[0];
      if (streamKeyword.indexOf('\n\n') > streamKeyword.length - 3) {

        streamKeyword = streamKeyword.slice(0, -1);

      } else if (streamKeyword.indexOf('\r\n\r\n') > streamKeyword.length - 5) {

        streamKeyword = streamKeyword.slice(0, -2);

      }
      var streamIndex = object[0].indexOf(streamKeyword) + streamKeyword.length;
      for (var objectIndex = 0; objectIndex < streamIndex; objectIndex++) {

        bytes.push(object[0].charCodeAt(objectIndex))

      }
      bytes = bytes.concat(object[1]);
      for (var objectIndex = streamIndex; objectIndex < object[0].length; objectIndex++) {

        bytes.push(object[0].charCodeAt(objectIndex));

      }

    } else {

      for (var objectIndex = 0; objectIndex < object.length; objectIndex++) {

        bytes.push(object.charCodeAt(objectIndex));

      }

    }
    bytes.push('\r'.charCodeAt(0));
    bytes.push('\n'.charCodeAt(0));

  }
  var xrefByteOffset = bytes.length;
  var xrefHeader = 'xref\r\n';
  for (var xrefHeaderIndex = 0; xrefHeaderIndex < xrefHeader.length; xrefHeaderIndex++) {

    bytes.push(xrefHeader.charCodeAt(xrefHeaderIndex));

  }
  var xrefSectionHeader = '0 ' + byteOffsets.length + '\r\n';
  for (var xrefSectionHeaderIndex = 0; xrefSectionHeaderIndex < xrefSectionHeader.length; xrefSectionHeaderIndex++) {

    bytes.push(xrefSectionHeader.charCodeAt(xrefSectionHeaderIndex));

  }
  for (var byteOffsetIndex = 0; byteOffsetIndex < byteOffsets.length; byteOffsetIndex++) {

    for (var byteOffsetStringIndex = 0; byteOffsetStringIndex < 10; byteOffsetStringIndex++) {

      bytes.push(Utilities.formatString('%010d', byteOffsets[byteOffsetIndex]).charCodeAt(byteOffsetStringIndex));

    }
    bytes.push(' '.charCodeAt(0));
    if (byteOffsetIndex == 0) {

      for (var generationStringIndex = 0; generationStringIndex < 5; generationStringIndex++) {

        bytes.push('65535'.charCodeAt(generationStringIndex));

      }
      for (var keywordIndex = 0; keywordIndex < 2; keywordIndex++) {

        bytes.push(' f'.charCodeAt(keywordIndex));

      }

    } else {

      for (var generationStringIndex = 0; generationStringIndex < 5; generationStringIndex++) {

        bytes.push('0'.charCodeAt(0));

      }
      for (var keywordIndex = 0; keywordIndex < 2; keywordIndex++) {

        bytes.push(' n'.charCodeAt(keywordIndex));

      }

    }
    bytes.push('\r'.charCodeAt(0));
    bytes.push('\n'.charCodeAt(0));

  }
  for (var trailerHeaderIndex = 0; trailerHeaderIndex < 9; trailerHeaderIndex++) {

    bytes.push('trailer\r\n'.charCodeAt(trailerHeaderIndex));

  }
  var idBytes = Utilities.computeDigest(Utilities.DigestAlgorithm.MD5, (new Date).toString());
  var id = '';
  for (var idByteIndex = 0; idByteIndex < idBytes.length; idByteIndex++) {

    id = id + ('0' + (idBytes[idByteIndex] & 0xFF).toString(16)).slice(-2);

  }
  var trailer = '<</Size ' + (byteOffsets.length) + ' /Root 1 0 R /Info 2 0 R /ID [<' + id + '> <' + id + '>]>>\r\nstartxref\r\n' + xrefByteOffset + '\r\n%%EOF';
  for (var trailerIndex = 0; trailerIndex < trailer.length; trailerIndex++) {

    bytes.push(trailer.charCodeAt(trailerIndex));

  }
  return directory.createFile(Utilities.newBlob(bytes, 'application/pdf', name));
  function getObject(objectAddress, objectByteOffsets, bytes) {

    objectAddress = objectAddress.split(/\s+/);
    for (var addressIndex = 0; addressIndex < 2; addressIndex++) {

      objectAddress[addressIndex] = +objectAddress[addressIndex];

    }
    var object = [];
    var byteIndex = 0;
    for each (var offset in objectByteOffsets) {

      if (arrayEquals(objectAddress, offset[0])) {

        byteIndex = offset[1];
        break;

      }

    }
    object.push('');
    while (object[0].indexOf('endobj') <= -1) {

      if (/stream\s*\n/.test(object[0])) {

        var streamLength;
        var lengthFinder = object[0].slice(object[0].indexOf(/\/Length/.exec(object[0])[0]));
        if (/\/Length\s*\d+\s+\d+\s+R/.test(lengthFinder)) {

          var lengthObjectAddress = /\d+\s+\d+\s+R/.exec(/\/Length\s*\d+\s+\d+\s+R/.exec(lengthFinder)[0])[0].split(/\s+/);
          lengthObjectAddress[2] = 'obj';
          for (var addressIndex = 0; addressIndex < 2; addressIndex++) {

            lengthObjectAddress[addressIndex] = +lengthObjectAddress[addressIndex];

          }
          var lengthObject = ''
          var lengthByteIndex = 0;
          for each (var offset in objectByteOffsets) {

            if (arrayEquals(lengthObjectAddress, offset[0])) {

              lengthByteIndex = offset[1];
              break;

            }

          }
          while (lengthObject.indexOf('endobj') <= -1) {

            lengthObject = lengthObject + String.fromCharCode(bytes[lengthByteIndex]);
            lengthByteIndex++;

          }
          streamLength = +(lengthObject.match(/obj\s*\n\s*\d+\s*\n\s*endobj/)[0].match(/\d+/)[0]);

        } else {

          streamLength = +(/\d+/.exec(lengthFinder)[0]);

        }
        var streamBytes = bytes.slice(byteIndex, byteIndex + streamLength);
        object.push(streamBytes);
        byteIndex += streamLength;
        while (object[0].indexOf('endobj') <= -1) {

          object[0] = object[0] + String.fromCharCode(bytes[byteIndex]);
          byteIndex++;

        }
        return object;

      }
      object[0] = object[0] + String.fromCharCode(bytes[byteIndex]);
      byteIndex++;

    }
    return object[0];

  }
  function arrayEquals(array1, array2) {

    if (array1 == array2) {

      return true;

    }
    if (array1 == null && array2 == null) {

      return true;

    } else if (array1 == null || array2 == null) {

      return false;

    }
    if (array1.length != array2.length) {

      return false;

    }
    for (var index = 0; index < array1.length; index++) {

      if (Array.isArray(array1[index])) {

        if (!arrayEquals(array1[index], array2[index])) {

          return false;

        }
        continue;

      }
      if (array1[index] != array2[index]) {

        return false;

      }

    }
    return true;

  }
  function getDependencies(objectString, objectByteOffsets, bytes) {

    var dependencies = [];
    var references = objectString.match(/\d+\s+\d+\s+R/g);
    if (references != null) {

      while (references.length > 0) {

        if (/\/Parent/.test(objectString.slice(objectString.indexOf(references[0]) - 8, objectString.indexOf(references[0])))) {

          references.shift();
          continue;

        }
        var dependency = getObject(references.shift().replace('R', 'obj'), objectByteOffsets, bytes);
        var dependencyExists = false;
        for each (var entry in dependencies) {

          dependencyExists = (arrayEquals(dependency, entry)) ? true : dependencyExists;

        }
        if (!dependencyExists) {

          dependencies.push(dependency);

        }
        if (Array.isArray(dependency)) {

          dependencies = dependencies.concat(getDependencies(dependency[0], objectByteOffsets, bytes));

        } else {

          dependencies = dependencies.concat(getDependencies(dependency, objectByteOffsets, bytes));

        }

      }

    }
    return dependencies;

  }

} 
```

本质上，这里发生的是每个文件都具有包含其页面的对象及其内容和资源。然后这些对象被重新编号并使用新文件的新“打包”格式化。

我编写了这段代码用于两个文件，但我想可能需要更多，所以我让代码为此工作。要对函数开头的原始问题有效，

```
function(mergePdfs(directory, name, pdf1, pdf2, opt_pdf3) {

  if (name.slice(-4) != '.pdf') {

    name = name + '.pdf';

  }
  var newObjects = ['1 0 obj\r\n<</Type/Catalog/Pages 2 0 R >>r\nendobj'];
  var pageAddresses = [];
  for (var argumentIndex = 2; argumentIndex < arguments.length; argumentIndex++) {

    var bytes = arguments[argumentIndex].getBlob().getBytes(); 
```

应该替换为

```
function mergePdfs(directory, name) {

  if (name.slice(-4) != '.pdf') {

    name = name + '.pdf';

  }
  var newObjects = ['1 0 obj\r\n<</Type/Catalog/Pages 2 0 R >>\r\nendobj'];
  var pageAddresses = [];
  var files = directory.getFiles();
  for (var fileIndex = 0; fileIndex < files.length; fileIndex++) {

    var bytes = files[fileIndex].getBlob().getBytes(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-13T17:07:20.590

我也有同样的问题，我暂时使用 RestFul API 来合并 PDF：[https ://www.convertapi.com/pdf-to-merge](https://www.convertapi.com/pdf-to-merge)

```
function merge() {
  var folder = DriveApp.getFolderById('<ID FOLDER>'); // folder with files pdf
  var files = folder.getFiles(); // get all files pdf

  var formData = {};
  var index = 0;
  while(files.hasNext()) {
    var file = files.next();
    formData['Files[' + index + ']'] = file.getBlob();
    index++;
  }

  var options = {
    'method' : 'post',
    'payload' : formData,
    'muteHttpExceptions': true
  };

  var response = UrlFetchApp.fetch('https://v2.convertapi.com/pdf/to/merge?Secret=<YOUR SECRET>', options);

  if(response.getResponseCode() == 200) {
    var contentText = JSON.parse(response.getContentText());
    var blob = Utilities.base64Decode(contentText.Files[0].FileData);
    folder.createFile(Utilities.newBlob(blob, 'application/pdf', 'merge.pdf'));
  }
}
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T09:37:52.710

多页 pdf 绝对不是多个 pdf 文件内容的简单串联......我怀疑你能用这种方法得到任何结果，即使我承认它看起来很诱人......

我也一直在寻找类似的东西，但直到现在都没有成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T02:09:40.177

The `.getBytes()` method returns a binary array for each file, so what you're created is an array of arrays with:

```
blobs.push(files[i].getBlob().getBytes()); 
```

Instead, I'd concatenate the array for the current item in the loop with an accumulator array that grows with each loop iteration. Then, after exiting the loop the contents of the accumulator array can be passed into `.newBlob()` or `.setBytes()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T23:58:08.750

您的代码的行为与您编写的代码完全相同。 `blobs`是一个数组，当您执行 a 时`blobs.pop()`，您将获得数组中的最后一项（这是您的最后一个 PDF）。

您应该做的是连接 blob，而不是在数组中，而是在单个`blob`对象中。但是，我不确定如何在 GAS 中做到这一点

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-11-10T22:30:41.350

这是连接 blob 的代码，但就像 Serge 提到的那样，它实际上不起作用，并且 PDF 出现损坏。

```
function MergeFiles(){
var folder = DocsList.getFolderById('myFolderID'); 
var files = folder.getFiles(); 

var blobs = "";    
for( var i in files )   
blobs=blobs+(files[i].getBlob().getBytes());
Logger.log(blobs);
var myPDF = Utilities.newBlob(blobs, "application/pdf", "newPDF.pdf");
folder.createFile(myPDF);

    } 
```

# r - 考虑到第一个数据框中的一个变量，如何计算百分比是另一个数据框中不同值的汇总和

> ID：15414082
> 
> 赞同：4
> 
> 时间：2013-03-14T15:56:01.483
> 
> 标签：r

当我尝试计算百分比时，我遇到了两个数据框的问题。在第一个数据框中，我累积了一个人进行的不同操作的数量。这些是数据框，第一个是包含每个人信息的原始数据框：

```
z=data.frame(ID=c("0001","0002","0002","0001","0003","0003","0004","0004","0001","0003"),Amount=c(10,20,10,30,50,10,40,10,10,30),Place=c("KFC","Marcys","Ezone","Ezone","Italocafe","Italocafe","KFC","Walmart","KFC","KFC")) 
```

当我聚合后，我有这个：

```
 ID       Final.Amount
1 0001           50
2 0002           30
3 0003           90
4 0004           50 
```

我想计算与 Place 变量相关的每个 ID 的百分比，我尝试使用 plyr 但我没有得到结果。我找这样的人：

```
 ID     Final.Amount Perct.KFC Perct.Macys Perct.Ezonne Perct.Italocafe Percent.Walmart
1 0001           50       40%         0%          60%           0%              0% 
2 0002           30        0%         67%         33%           0%              0%
3 0003           90       33%         0%           0%           67%             0%
4 0004           50       80%         0%           0%           0%             20% 
```

我尝试使用 plyr 但我没有得到正确的结构，我不知道我是否需要 sqldf 或其他包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:06:22.640

`data.table`这是使用and base's重写的答案`reshape`。在计算百分比后，我必须求助于整形函数。

```
require(data.table)
w  <- data.table(z)
w1 <- w[, list(val=sum(Amount)), by=list(ID, Place)][, list(Place=Place, 
                       percent=val/sum(val) * 100), by=ID]
reshape(w1, idvar="ID", timevar="Place", direction="wide")

#      ID percent.KFC percent.Ezone percent.Marcys percent.Italocafe percent.Walmart
# 1: 0001    40.00000      60.00000             NA                NA              NA
# 2: 0002          NA      33.33333       66.66667                NA              NA
# 3: 0003    33.33333            NA             NA          66.66667              NA
# 4: 0004    80.00000            NA             NA                NA              20 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:11:09.373

使用的解决方案`reshape2`：

```
library(reshape2)
d <- acast(z, ID~Place, value.var="Amount", fun=sum)
prop.table(d,1)*100 
```

这使 ：

```
 Ezone Italocafe      KFC   Marcys Walmart
0001 60.00000   0.00000 40.00000  0.00000       0
0002 33.33333   0.00000  0.00000 66.66667       0
0003  0.00000  66.66667 33.33333  0.00000       0
0004  0.00000   0.00000 80.00000  0.00000      20 
```

# android - Alertdialog 多个侦听器

> ID：15414084
> 
> 赞同：0
> 
> 时间：2013-03-14T15:56:03.693
> 
> 标签：android, android-alertdialog, onitemclicklistener, onlongclicklistener

我创建了一个显示项目列表的对话框。

现在我还需要捕获长按事件以进行编辑。

这怎么可能存档？

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle(R.string.select_a_person);
    final UserAdapter adapter = new UserAdapter(this);
    builder.setAdapter(adapter, new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            selecteduUser = (User) adapter.getItem(which);
            if (selecteduUser != null) {
                mName.setText(selecteduUser.getName());
            }
        } 
    });
    builder.create().show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:52:14.277

目前我看到两个解决方案

**选项1：**

创建您自己的自定义对话框。使用列表视图（或您喜欢的列表活动）创建一个活动并将其主题设置为对话框。

```
android:theme="@android:style/Theme.Dialog" 
```

在那里您可以轻松处理列表项单击。然后在启动此自定义对话框活动时传递您要显示的列表数据。

**选项 2：**

在您的方法中的 alertdialog 中设置[setOnShowListener 。](http://developer.android.com/reference/android/app/Dialog.html#setOnShowListener%28android.content.DialogInterface.OnShowListener%29)让我从你的最后一行代码编辑

```
AlertDialog dialog = builder.create();

dialog.setOnShowListener(new OnShowListener() 
{       
    @Override
    public void onShow(DialogInterface dialog) 
    {       
        ListView list = ad.getListView();
        list.setOnItemLongClickListener(new OnItemLongClickListener() 
        {
            @Override
            public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) 
            {
                // DO your task
                return true;
            }           
        });     
    }
});
dialog.show(); 
```

# python - python libsvm核心转储

> ID：15414085
> 
> 赞同：4
> 
> 时间：2013-03-14T15:56:07.240
> 
> 标签：python, segmentation-fault, libsvm, coredump

我的 Python 代码在我的开发环境（Ubuntu 12.04）上运行良好，但在我的生产环境（运行 CentOS 的 Linode）上转储了核心。

```
*** glibc detected *** python2.7: double free or corruption (out): 0x090cba60 ***
======= Backtrace: =========
/lib/i686/nosegneg/libc.so.6(+0x717b1)[0xb763d7b1]
/lib/i686/nosegneg/libc.so.6(+0x73f01)[0xb763ff01]
/home/michael/libsvm-3.16/python/../libsvm.so.2(svm_free_model_content+0xe2)[0xb6e0c6b2]
/home/michael/libsvm-3.16/python/../libsvm.so.2(svm_free_and_destroy_model+0x2c)[0xb6e0c70c]
/home/michael/lib/python2.7/lib-dynload/_ctypes.so(ffi_call_SYSV+0x17)[0xb71e375f]
/home/michael/lib/python2.7/lib-dynload/_ctypes.so(ffi_call+0x5b)[0xb71e35ab]
/home/michael/lib/python2.7/lib-dynload/_ctypes.so(_ctypes_callproc+0x32d)[0xb71d82ad]
/home/michael/lib/python2.7/lib-dynload/_ctypes.so(+0x703e)[0xb71d003e]
python2.7(PyObject_Call+0x4a)[0x805d90a]
python2.7(PyEval_EvalFrameEx+0x3c0a)[0x80e04ba]
python2.7(PyEval_EvalCodeEx+0x7bb)[0x80e2c1b]
python2.7[0x813ee2a]
python2.7(PyObject_Call+0x4a)[0x805d90a]
python2.7[0x80657f1]
python2.7(PyObject_Call+0x4a)[0x805d90a]
python2.7(PyEval_CallObjectWithKeywords+0x42)[0x80db852]
python2.7[0x80af616]
python2.7[0x80a928e]
python2.7[0x808e024]
python2.7[0x8067c5b]
python2.7[0x808c079]
python2.7(PyDict_SetItem+0x87)[0x808cfa7]
python2.7(_PyModule_Clear+0x123)[0x8090693]
python2.7(PyImport_Cleanup+0x175)[0x80f2ca5]
python2.7(Py_Finalize+0x10c)[0x80ffacc]
python2.7(Py_Main+0x53d)[0x8058c1d]
python2.7(main+0x1b)[0x805839b]
/lib/i686/nosegneg/libc.so.6(__libc_start_main+0xe6)[0xb75e2ce6]
python2.7[0x80582e1]
======= Memory map: ========
08048000-0817d000 r-xp 00000000 ca:00 430104     /home/michael/bin/python2.7
0817d000-081ab000 rw-p 00134000 ca:00 430104     /home/michael/bin/python2.7
081ab000-081b4000 rw-p 00000000 00:00 0
... 
```

它经常发生，但并非总是如此。此外，如果我在我的 libsvm 子目录中删除 *.pyc 文件，那么它似乎可以正常工作，但是一旦重新生成 *.pyc 文件（在第一次运行之后），它往往会再次转储核心。

此外，如果我尝试将标准错误传送到文件，它永远不会崩溃。

一些可能相关的信息：

*   它只是在我安装 Python 2.7 时才开始发生的。Python 2.6 没有发生这种情况
*   Python2.7 安装到我的主目录中（来自源代码，因为 CentOS 没有 python2.7 包）

我应该如何解决这个问题？问题最可能出在哪里？它是在 libsvm 源代码还是 Python 包装器中？我很确定它不在我的 Python 源代码中，因为我不应该像那样使解释器崩溃。

**编辑**

我在生产环境中重新训练了模型，问题似乎已经消失了。作为参考，以下是我使用的两种模型的开发环境和生产环境之间的差异。

标头差异第一个模型：

```
4,7c4,7
< total_sv 8858
< rho -0.500251 -0.215012 2.99972 -0.00159202 0.000223509 1.00003
< label 3 2 1 0
< nr_sv 549 6095 587 1627
---
> total_sv 8782
> rho -2.99981 0.000329574 -1.00015 -0.335094 -0.999424 -0.66958
> label 0 3 2 1
> nr_sv 1586 535 6083 578
-bash-4.1$ diff model.svm model2.svm | head -n 20
4,7c4,7
< total_sv 8858
< rho -0.500251 -0.215012 2.99972 -0.00159202 0.000223509 1.00003
< label 3 2 1 0
< nr_sv 549 6095 587 1627 
```

标头差异第二个模型：

```
4,7c4,7
< total_sv 116
< rho 2.30068 -0.145028 0.169511 -1.09344 0.723723 -0.865381
< label 3 0 2 1
< nr_sv 18 32 34 32
---
> total_sv 132
> rho 0.72381 -2.00473 -0.220492 -0.962109 0.998243 -0.14499
> label 0 1 3 2
> nr_sv 43 35 18 36 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T08:47:03.650

错误的原因是 svm_load_model 中未初始化的指针，以及对`free`. 这是一个补丁：

```
misha@misha-diginnos:~$ diff libsvm-3.16/svm.cpp.original libsvm-3.16/svm.cpp -p
*** libsvm-3.16/svm.cpp.original        2013-03-17 17:34:00.235661297 +0900
--- libsvm-3.16/svm.cpp 2013-03-17 17:39:29.677294903 +0900
*************** svm_model *svm_load_model(const char *mo
*** 2747,2752 ****
--- 2747,2753 ----
        model->probB = NULL;
        model->label = NULL;
        model->nSV = NULL;
+     model->sv_indices = NULL;

        char cmd[81];
        while(1)
*************** void svm_free_model_content(svm_model* m
*** 2973,2980 ****
        free(model_ptr->probB);
        model_ptr->probB= NULL;

!       free(model_ptr->sv_indices);
!       model_ptr->sv_indices = NULL;

        free(model_ptr->nSV);
        model_ptr->nSV = NULL;
--- 2974,2984 ----
        free(model_ptr->probB);
        model_ptr->probB= NULL;

!     if (model_ptr->sv_indices)
!     {
!         free(model_ptr->sv_indices);
!         model_ptr->sv_indices = NULL;
!     }

        free(model_ptr->nSV);
        model_ptr->nSV = NULL; 
```

我已经通知了作者。他们意识到了这个问题，并将在下一个版本中解决它。

# android - Android - 在活动重新创建期间是否保留了意图？

> ID：15414093
> 
> 赞同：29
> 
> 时间：2013-03-14T15:56:26.013
> 
> 标签：android, android-intent

我正在构建一个 android 应用程序，并想询问启动活动的意图（可通过**getIntent ()**方法访问）是否在活动重新创建过程中保存/保留，例如设备方向，或者只是 android 可以如果它在后台删除应用程序状态并重建它（如果内存不足）？

这是一个说明问题的简单示例：

应用程序启动活动**A**。然后用户点击一个按钮来启动一个新的活动**B**。活动**A**通过意图（使用**putExtra**方法）向活动**B**发送了一个值为**Hello**的字符串**X。**

 ****在活动**B**中，我可以通过检索意图（通过**getIntent ()**方法）然后检索字符串内容（通过**getStringExtra方法）来检索字符串****X**的内容。

 ****如果由于设备旋转而重新创建活动，我是否仍然能够从意图中检索额外的字符串，甚至是意图本身，...？

**或者我应该在onSaveInstanceState**方法中保存额外的字符串？

我已经尝试过设备旋转场景，并且意图（以及额外的字符串）总是可以访问的。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-14T16:01:30.430

> 如果由于设备旋转而重新创建活动，我是否仍然能够从意图中检索额外的字符串，甚至是意图本身

是的。在配置更改之后，您将拥有与配置更改之前相同的`Intent`（或至少是 的副本）。`Intent`********

# jquery - jQuery AJAX 调用中的内存泄漏

> ID：15414094
> 
> 赞同：5
> 
> 时间：2013-03-14T15:56:26.687
> 
> 标签：jquery, ajax, memory-leaks, setinterval

我编写了一个聊天框小部件，它每秒运行一个 ajax 调用，以获取已发布的新消息。问题是它正在泄漏内存，仅在打开大约 15 分钟后，它就使我的浏览器 (Firefox) 崩溃。

可能是我，因为我是一个相对新手，我确定我错过了一些东西或者没有取消我的变量等。

```
var chat = {}
chat.fetchMessages = function() {
    $.ajax({
        url: '/chat_ajax.php',
        type: 'post',
        data: { method: 'fetch'},
        success : function(data) {
            $('#chat .messages').html(data);
            $("#chat").scrollTop($("#chat")[0].scrollHeight);
        }
    });
}
chat.interval = setInterval(chat.fetchMessages, 1000);
chat.fetchMessages(); 
```

有人可以看看我的（基本）代码，看看你是否能发现内存泄漏发生在哪里，以及我做错了什么？我需要取消设置一些变量还是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:00:42.347

*永远不要*使用`setInterval()`ajax，否则你的请求永远不会保持同步。改为使用`setTimeout()`然后挂起您的逻辑，在回调中`setTimeout()`递归启动。`complete`

例子。

```
$(DoMyAjax); // start your ajax on DOM ready
function DoMyAjax() {
   $.ajax({ 
      complete: function() {
          // your logic here
          setTimeout(DoMyAjax, 1000);
      }
   });
} 
```

# cocoa - Cocoa 在第二个屏幕上打开一个全屏窗口，保持应用在第一个屏幕上可见

> ID：15414099
> 
> 赞同：1
> 
> 时间：2013-03-14T15:56:33.473
> 
> 标签：cocoa, fullscreen, nswindow

我正在 OSX 10.7 上开发一个应用程序，我正在尝试，目标是在第二个屏幕上打开一些图像，而应用程序必须在第一个屏幕上正常运行。

所以代码如下：

```
NSScreen *screen = [[NSScreen screens] objectAtIndex:1];

fullScreenWindow = [[NSWindow alloc] initWithContentRect:[screenFrame]
                                               styleMask:NSBorderlessWindowMask
                                                 backing:NSBackingStoreBuffered
                                                   defer:NO
                                                  screen:screen];
[fullScreenWindow setLevel: NSMainMenuWIndowLevel + 1];
[fullScreenWindow setOpaque: YES];
[fullScreenWindow setBackgroundColor:[NSColor yellowColor]];

fullScreenView = [[NSView alloc] initWithFrame:NSMakeRect(0.0f, 0.0f, fullScreenWindow.frame.size.width, fullScreenWindow.frame.size.height)];
// Adding a test button
NSButton *testButton = [[NSButton alloc] initWithFrame(50.0f, 50.0f, 100.0f, 50.0f)];
[testButton setTarget:self];
[testButton setAction:@selector(closeExternalWindow)];
[fullScreenView addSubview:testButton];

// Present the fullscreen window
[fullScreenWindow.contentView addSubview:fullScreenView];
[fullScreenWindow makeKeyAndOrderFront:self]; 
```

这样，在第一个屏幕上应用程序正确显示，但在第二个屏幕上我只看到一个全屏黑色窗口。

有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:13:21.163

阅读Apple的文档`initWithContentRect:styleMask:backing:defer:screen:`说明**屏幕**参数..

> *如果要在主屏幕以外的屏幕中绘制窗口，则指定绘制窗口内容矩形的位置。内容矩形是相对于屏幕左下角绘制的。*

因此，在使用时，`[screen frame]`您实际上是将其移出第二个屏幕，因为定位已经相对于该屏幕。

为了使其出现在预期的位置，您可以将代码更改为

```
[[NSWindow alloc] initWithContentRect:NSMakeRect(0, 0, [screen frame].size.width, [screen frame].size.height)
                            styleMask:NSBorderlessWindowMask
                              backing:NSBackingStoreBuffered
                                defer:NO
                               screen:screen]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:40:27.650

几天后，我有可能再次处理此代码，现在它可以工作了：

```
NSScreen *screen = [[NSScreen screens] objectAtIndex:1];
NSRect mainDisplayRect = [screen frame];
fullScreenWindow = [[NSWindow alloc] initWithContentRect: mainDisplayRect styleMask:NSBorderlessWindowMask
                                                 backing:NSBackingStoreBuffered defer:YES];
[fullScreenWindow setLevel:NSMainMenuWindowLevel+1];
[fullScreenWindow setOpaque:YES];
[fullScreenWindow setHidesOnDeactivate:YES];
[fullScreenWindow setBackgroundColor:[NSColor redColor]];

NSRect viewRect = NSMakeRect(0.0, 0.0, mainDisplayRect.size.width, mainDisplayRect.size.height);
fullScreenView = [[PresenterView alloc] initWithFrame:viewRect];
[fullScreenWindow setContentView: fullScreenView];
[fullScreenWindow makeKeyAndOrderFront:self]; 
```

杰感谢您的支持；）

# php - 在 PHPDoc 中记录数组选项的最佳方法？

> ID：15414103
> 
> 赞同：81
> 
> 时间：2013-03-14T15:56:57.700
> 
> 标签：php, cakephp, phpdoc

我正在努力编写可读且易于理解的文档，这些文档描述了传递给函数的数组选项的多树结构。

这是一个示例数组结构。

```
$arr = [
   'fields' => [
       'title' => [
           'name'     => 'Document.title',
           'format'   => 'string',
           'readonly' => true
       ]
   ]
]; 
```

上述数组有许多可能的选项，但它被用作理解该结构的函数的参数。

```
function doSomething(array $arr) { ... } 
```

我想记录应该如何在 PHPDoc 中构造数组，但我不确定正确的方法是什么。

这就是我现在所拥有的。

```
/**
 * Holds configuration settings for each field in a model.
 * Defining the field options
 *
 * array['fields'] array Defines the feilds to be shown by scaffolding.
 * array['fields'][fieldName] array Defines the options for a field, or just enables the field if array is not applied.
 * array['fields'][fieldName]['name'] string Overrides the field name (default is the array key)
 * array['fields'][fieldName]['model'] string (optional) Overrides the model if the field is a belongsTo assoicated value.
 * array['fields'][fieldName]['width'] string Defines the width of the field for paginate views. Examples are "100px" or "auto"
 * array['fields'][fieldName]['align'] string Alignment types for paginate views (left, right, center)
 * array['fields'][fieldName]['format'] string Formatting options for paginate fields. Options include ('currency','nice','niceShort','timeAgoInWords' or a valid Date() format)
 * array['fields'][fieldName]['title'] string Changes the field name shown in views.
 * array['fields'][fieldName]['desc'] string The description shown in edit/create views.
 * array['fields'][fieldName]['readonly'] boolean True prevents users from changing the value in edit/create forms.
 * array['fields'][fieldName]['type'] string Defines the input type used by the Form helper (example 'password')
 * array['fields'][fieldName]['options'] array Defines a list of string options for drop down lists.
 * array['fields'][fieldName]['editor'] boolean If set to True will show a WYSIWYG editor for this field.
 * array['fields'][fieldName]['default'] string The default value for create forms.
 *
 * @param array $arr (See above)
 * @return Object A new editor object.
 **/ 
```

我的问题是，当生成 HTML 文档时，它的格式不是很好。另外，我不确定上面是否清楚地解释了数组结构。

有替代方法吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2016-04-22T09:25:23.413

这就是我的做法：

```
/**
 * Class constructor.
 *
 * @param array $params Array containing the necessary params.
 *    $params = [
 *      'hostname'     => (string) DB hostname. Required.
 *      'databaseName' => (string) DB name. Required.
 *      'username'     => (string) DB username. Required.
 *      'password'     => (string) DB password. Required.
 *      'port'         => (int) DB port. Default: 1433.
 *      'sublevel'     => [
 *          'key' => (\stdClass) Value description.
 *      ]
 *    ]
 */
 public function __construct(array $params){} 
```

认为它很干净，很容易理解`$params`应该是什么。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2018-06-25T21:42:16.527

我[为 phpstorm 编写了一个插件](https://plugins.jetbrains.com/plugin/9927-deep-assoc-completion)，允许指定这样的键：

（基本上只是@siannone 格式的稍微严格的版本）

```
/**
 * @param array $arr = [
 *     'fields' => [ // Defines the feilds to be shown by scaffolding
 *         $anyKey => [
 *             'name' => 'sale', // Overrides the field name (default is the array key)
 *             'model' => 'customer', // (optional) Overrides the model if the field is a belongsTo associated value.
 *             'width' => '100px', // Defines the width of the field for paginate views. Examples are "100px" or "auto"
 *             'align' => 'center', // Alignment types for paginate views (left, right, center)
 *             'format' => 'nice', // Formatting options for paginate fields. Options include ('currency','nice','niceShort','timeAgoInWords' or a valid Date() format)
 *             'title' => 'Sale', // Changes the field name shown in views.
 *             'desc' => 'A deal another person that results in money', // The description shown in edit/create views.
 *             'readonly' => false, // True prevents users from changing the value in edit/create forms.
 *             'type' => 'password', // Defines the input type used by the Form helper
 *             'options' => ['option1', 'option2'], // Defines a list of string options for drop down lists.
 *             'editor' => false, // If set to True will show a WYSIWYG editor for this field.
 *             'default' => '', // The default value for create forms.
 *         ],
 *     ],
 * ]
 */
public static function processForm($arr)
{
    $fieldName = 'sale';
    $arr['fields'][$fieldName][''];
} 
```

[![在此处输入图像描述](../Images/5b56f4aee26a7eff83aec59613b06a79.png)](https://i.stack.imgur.com/kb2Br.png)

它还允许指定`@return`键：

```
/**
 * @return array [
 *     'success' => true,
 *     'formObject' => new Form,
 *     'errors' => [],
 * ]
 */
public static function processForm($arr); 
```

[![在此处输入图像描述](../Images/0aee1c82bdb211aee42143ae2e8ecd41.png)](https://i.stack.imgur.com/vgZM9.png)

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2013-03-14T16:35:59.443

只需添加一些表格即可使其看起来不错且易于理解

```
/**
 * Holds configuration settings for each field in a model.
 * Defining the field options
 *
 * array['fields']              array Defines the fields to be shown by scaffolding.
 *          [fieldName]         array Defines the options for a field, or just enables the field if array is not applied.
 *              ['name']        string Overrides the field name (default is the array key)
 *              ['model']       string (optional) Overrides the model if the field is a belongsTo associated value.
 *              ['width']       string Defines the width of the field for paginate views. Examples are "100px" or "auto"
 *              ['align']       string Alignment types for paginate views (left, right, center)
 *              ['format']      string Formatting options for paginate fields. Options include ('currency','nice','niceShort','timeAgoInWords' or a valid Date() format)
 *              ['title']       string Changes the field name shown in views.
 *              ['desc']        string The description shown in edit/create views.
 *              ['readonly']    boolean True prevents users from changing the value in edit/create forms.
 *              ['type']        string Defines the input type used by the Form helper (example 'password')
 *              ['options']     array Defines a list of string options for drop down lists.
 *              ['editor']      boolean If set to True will show a WYSIWYG editor for this field.
 *              ['default']     string The default value for create forms.
 *
 * @param array $arr (See above)
 * @return Object A new editor object.
 **/ 
```

嵌套列表方法：

```
<ul>
    <li>
        array['fields'] array Defines the fields to be shown by scaffolding.
        <ul>
            <li>
                [fieldName]             array Defines the options for a field, or just enables the field if array is not applied.
                <ul>
                    <li> ['name']       <i><u>string</u></i> Overrides the field name (default is the array key) </li>
                    <li> ['model']      <i><u>string</u></i> (optional) Overrides the model if the field is a belongsTo associated value.</li>
                    <li> ['width']      <i><u>string</u></i> Defines the width of the field for paginate views. Examples are "100px" or "auto"</li>
                    <li> ['align']      <i><u>string</u></i> Alignment types for paginate views (left, right, center)</li>
                    <li> ['format']     <i><u>string</u></i> Formatting options for paginate fields. Options include ('currency','nice','niceShort','timeAgoInWords' or a valid Date() format)</li>
                    <li> ['title']      <i><u>string</u></i> Changes the field name shown in views.</li>
                    <li> ['desc']       <i><u>string</u></i> The description shown in edit/create views.</li>
                    <li> ['readonly']   <i><u>boolean</u></i> True prevents users from changing the value in edit/create forms.</li>
                    <li> ['type']       <i><u>string</u></i> Defines the input type used by the Form helper (example 'password')</li>
                    <li> ['options']    <i><u>array</u></i> Defines a list of string options for drop down lists.</li>
                    <li> ['editor']     <i><u>boolean</u></i> If set to True will show a WYSIWYG editor for this field.</li>
                    <li> ['default']    <i><u>string</u></i> The default value for create forms.</li>
                </ul>
            </li>
        </ul>
    </li>
 </ul> 
```

结果：

*   array['fields'] array 定义要通过脚手架显示的字段。
    *   [fieldName] array 定义字段的选项，或者如果未应用 array，则仅启用该字段。
        *   ['name'] *字符串*覆盖字段名称（默认为数组键）
        *   ['model'] *字符串*（可选）如果字段是 belongsTo 关联值，则覆盖模型。
        *   ['width'] *字符串*定义分页视图的字段宽度。例如“100px”或“auto”
        *   ['align'] *字符串*分页视图的对齐类型（左、右、中）
        *   ['format'] *字符串*分页字段的格式选项。选项包括（'currency','nice','niceShort','timeAgoInWords' 或有效的 Date() 格式）
        *   ['title'] *字符串*更改视图中显示的字段名称。
        *   ['desc'] *字符串*编辑/创建视图中显示的描述。
        *   ['readonly'] *boolean* True 防止用户更改编辑/创建表单中的值。
        *   ['type'] *string*定义表单助手使用的输入类型（例如'password'）
        *   ['options'] *数组*定义下拉列表的字符串选项列表。
        *   ['editor'] *boolean*如果设置为 True 将显示该字段的所见即所得编辑器。
        *   ['default'] *字符串*创建表单的默认值。

如果你想让它看起来花哨，用一点 Css 就会创造奇迹！xd

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2020-04-22T16:07:29.740

在广泛接受的密钥类型文档格式中，我想在这里提几个流行的：

### [诗篇](https://psalm.dev/docs/annotating_code/type_syntax/array_types/#object-like-arrays)/ [PHPStan](https://phpstan.org/writing-php-code/phpdoc-types#array-shapes) / [phan](https://github.com/phan/phan/wiki/Generic-Types#function-templates)格式

```
/** @param array{foo: string, bar: int} $args */ 
```

*作为奖励，还可以使用他们的工具进行[静态代码分析](https://phpstan.org/user-guide/command-line-usage)*

### [WordPress](https://make.wordpress.org/core/handbook/best-practices/inline-documentation-standards/php/#1-1-parameters-that-are-arrays)格式

```
/**
 * @param array $args {
 *     Optional. An array of arguments.
 *
 *     @type type $key Description. Default 'value'. Accepts 'value', 'value'.
 *                     (aligned with Description, if wraps to a new line)
 *     @type type $key Description.
 * }
 */ 
```

[[两者都由[deep-assoc-completion](https://plugins.jetbrains.com/plugin/9927-deep-assoc-completion)插件支持]]

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2013-03-14T16:29:49.427

你可以使用对象而不是数组吗？这将使文档变得容易。

```
class Field {

    /**
     * The name of the thing.
     * @var string
     */
    protected $name;

    protected $model;
    protected $width;
    //...

    public function getName() {...}
    public function setName() {...}
    //...
}

class FieldList implements SomeKindOfIterator {

    /**
     * Some fields.
     * @var Field[]
     */
    protected $fields = array();

    /**
     * ...
     */
    public function push(Field $field) {
         $this->fields[] = $field;
    }

    //...
} 
```

然后，您可以在需要该类的地方使用类型提示。

```
/**
 * Do something.
 * @param FieldList $field_list The field.
 */
function doSomething(FieldList $field_list) {...} 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2017-05-19T04:40:11.283

[Markdown Syntax for Object Notation](https://github.com/apiaryio/mson/blob/master/MSON%20Specification.md#mson-specification) (MSON) 可能是更好的选择。

例子

```
/**
 * @param array $config
 *   + app (string, required) - app directory name
 *   + view (string, required) - view directory name
 *   + type (enum[string]) - site type
 *     + pc - PC version
 *     + wap - mobile version
 *     + other - other, default value
 *   + table_prefix (string) - database table prefix
 */ 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-11-14T19:47:29.887

我比较喜欢这个：

```
 * @param array $doc
 *          'type'=>Doc::MY_DOC_TYPE,
 *          'created'=>$now,
 *          'modified'=>$now 
```

我只是将代码粘贴到它被初始化的地方，快速而简单。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-08-02T12:24:50.463

PHP 中的数组实际上更像是匿名结构。

对于任意数据结构，有许多模式验证器，但不幸的是，它在类型提示中并未得到广泛支持。也许一些常见的方案有插件？问题是事情只在一个或几个地方工作。您可能会为您的 IDE 找到正确的工作，但运行静态分析，这一切都可能陷入困境。

需要注意将事物分开，以便如果可能，其他不支持方案的工具（例如通过插件）将简单地忽略它。

PHPDoc 往往在所有地方都受到支持，但也非常有限。

经常有提案，但没有真正好的标准。大多数解决方案都是非标准的、没有得到广泛支持的、有限制的部分破解或纯粹肤浅的（文档）。

在特定的地方有特定的实现，但没有广泛和专用于 PHP 本身。尽管您可以在 PHP IDE 中创建自己的模式，但往往缺乏像样的代码桥，即使是那些名称中有 PHP 的模式。

您应该单独定义您的字段结构。您的外部数据结构是伪代码`@key fields field[]`，而不是表示为多维数组。从概念上讲，您可以做到以下几点：

```
@start struct custom
@key \stdClass *
@end struct

@start struct fields
@key string hostname
@key string databaseName
@key string password
@key int port=1433
@key custom|undefined sublevel
@end struct

@start struct connection
@key fields fields
@end struct 
```

或者从C中窃取然后发明一种语言......

```
struct connection {
    struct fields {
        string hostname;
        string databaseName;
        string password;
        int port = 1433;
        custom optional sublevel {
            stdClass *;
        };
    };
}; 
```

您可以发明基于结构的模式以允许平面和嵌套。嵌套应该是默认设置，事物应该只被定义为可访问，因为它们需要重用。

一种不寻常的方法是使用对象。这不一定需要使用诸如数组访问之类的接口。在 PHP 中，对象为属性包装了一个数组。可以将数组转换为对象（没有实现，只有属性）并返回。

如果您将对象用作关联数组（$array[$key] 与 $object->{$key}），那么您可以制作虚拟对象以至少欺骗 IDE...

```
final class PersonStruct {
    /** @var int */
    public $x;

    /** @var int $y */

    public int $z;
} 
```

这三个选项中可能起作用也可能不起作用取决于所使用的工具。

然后你可以撒谎...

```
/** @var PersonStruct $ps */
$ps = (object)['x' => 0, 'y' => 1, 'z' => 2];

/**
 * @param PersonStruct $ps
 * @return PersonStruct
 */
function f(object $ps):object {
    return $ps;
}

/**
 * @param PersonStruct $ps
 * @return PersonStruct
 */
function f(stdClass $ps):stdClass {
    return $ps;
} 
```

问题在于它意味着将数组转换为对象。这既有性能影响，也有通过值传递到引用传递的变化。哪个更快是有争议的。理论上数组应该更快，尽管对象在默认情况下具有引用的好处，并且与 PHP 不同，JSON 将对象与数组分开可以更好地工作。

对象也不支持在类型提示方面可能设置得不好的属性，即使对象中的属性只是一个 PHP 数组（使用`->{key}`而不是`[key]`）。还有可能发生其他奇怪的事情。

如果性能是一个真正的问题，您可以将 PHP 转换为编译语言。以同样的方式，您可以扩展接口以使对象可编译，您可以对可能使用 OOP 和自动完成的所有操作执行相同的操作，但随后可以通过指定它包装的属性来执行内联类的等效操作，然后使用反射几乎可以用匹配方法的内容替换使用，需要一些额外的位（标记要内联或转换为程序的内容，要包装的单个属性或多个属性等）。

这个概念类似于装箱和拆箱。如果您真的对 SA 支持和对 IDE（自动完成、检查等）、分析器、工具等的广泛支持感到疯狂，那么它可能是唯一的方法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-14T16:29:11.403

因为这纯粹是显示而不是指令，并且应该在文档中保留空格格式，所以我倾向于使用缩进而不是字符墙来提高可读性：

```
 * array['fields'] array Defines the feilds to be shown by scaffolding.
 *           [fieldName] array Defines the options for a field, or just enables
 *                             the field if array is not applied.
 *                 ['name'] string Overrides the field name (default is the
 *                                  array key)
 *                 ['model'] string (optional) Overrides the model if the field is
 *                                  a belongsTo assoicated value.
 *                 ['width'] string Defines the width of the field for paginate
 *                                  views.
 *                                  Examples are "100px" or "auto"
 *                 ['align'] string Alignment types for paginate views (left, 
 *                                 right, center)
 *                 ['format'] string Formatting options for paginate fields.
 *                                   Options include 'currency', 'nice',
 *                                  'niceShort', 'timeAgoInWords' or a valid 
 *                                  Date() format)
 *                 ['title'] string Changes the field name shown in views.
 *                 ['desc'] string The description shown in edit/create views.
 *                 ['readonly'] boolean True prevents users from changing the
 *                                 value in edit/create forms.
 *                 ['type'] string Defines the input type used by the Form helper
 *                                  (example 'password')
 *                 ['options'] array Defines a list of string options for drop-
 *                                  down lists.
 *                 ['editor'] boolean If set to True will show a WYSIWYG editor
 *                                  for this field.
 *                 ['default'] string The default value for create forms. 
```

尽管使用带有缩进的实际 PHP 数组定义更加简洁

# php - 查询数据库中的数据

> ID：15414107
> 
> 赞同：0
> 
> 时间：2013-03-14T15:57:16.100
> 
> 标签：php, html

我正在尝试使用 html 表单从我的客户端数据库中检索数据。

谁能告诉我我的代码有什么问题，这个 php 代码从我的数据库中收集数据并返回答案。我对 html/php 非常陌生，任何帮助表示赞赏。

```
 <?php
      echo $_POST['term']; 
mysql_connect ("localhost", "root","")  or die (mysql_error());
 mysql_select_db ("client");
 $term = $_POST['term'];
 $sql = mysql_query("select * from `client` where first_name like '%".mysql_real_escape_string($term)."%'");
while ($row = mysql_fetch_array($sql))
{
    echo 'ID: '.$row['ID'];
    echo '<br/> First Name: '.$row['first_name'];
    echo '<br/> Last Name: '.$row['last_name'];
    echo '<br/> Phone: '.$row['Phone'];
    echo '<br/><br/>';
    }

?>

    </body>
</html> 
```

注意：未定义索引：第 19 行 C:\xampp\htdocs\getdata.php 中的术语

注意：未定义索引：第 22 行 C:\xampp\htdocs\getdata.php 中的术语

警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 24 行的 C:\xampp\htdocs\getdata.php 中给出

仍然收到上述通知

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:02:50.533

这是您的直接问题：

```
$sql = mysql_query("select * from 'client' where first_name like '%$term%'"); 
```

表名周围的引号`client`不正确。为此使用反引号：

```
$sql = mysql_query("select * from `client` where first_name like '%$term%'"); 
```

你应该保护自己：

```
$sql = mysql_query("select * from `client` where first_name like '%".mysql_real_escape_string($term)."%'"); 
```

但说真的，请保证阅读**SQL 注入**，并且**不要再使用 mysql_ 函数**了！

**请使用 PDO**

阅读这些：

*   [使用 PDO 选择](https://stackoverflow.com/a/15410966/1667004)
*   [插入 PDO](https://stackoverflow.com/a/15390836/1667004)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:06:55.617

除了 ppeterka 的解决方案之外，在 while 循环结束之前还有一个缺少引号和分号

```
echo '<br/><br/>
} 
```

应该读

```
echo '<br/><br/>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:03:41.983

嗨，快速浏览一下，我会说，错误出在 MySQL 查询本身。您在表名周围使用单引号，我认为这是不正确的。尝试不使用任何引号或使用单个“反引号”或您所称的 - 符号：`

# html - IE中两个相邻div之间的奇怪差距

> ID：15414108
> 
> 赞同：0
> 
> 时间：2013-03-14T15:57:16.767
> 
> 标签：html, css, internet-explorer

我在 IE 中遇到了 div 的问题。下面给出了在 FF 和 IE 中查看的一组 div 的两个图像。

![FF中的div对齐](../Images/5d0ba10447f1f767f9f4b7461240d631.png)

![IE中的div对齐](../Images/fdca37c6740fa976635acccf5c723177.png)

您可以看到边框处出现一条白线。我正在动态创建这个 div。

```
<DIV style="WIDTH: 49px" class=ganttview-grid-row-cell sizset="36" sizcache07230265382227504="352">
<br/>
<DIV style="TEXT-ALIGN: center; WIDTH: 11px" class=ganttview-grid-row-cell-partition></DIV>
<br/>
<DIV style="TEXT-ALIGN: center; WIDTH: 11px" class=ganttview-grid-row-cell-partition></DIV>
<br/>
<DIV style="TEXT-ALIGN: center; WIDTH: 11px" class=ganttview-grid-row-cell-partition></DIV>
<br/>
<DIV style="TEXT-ALIGN: center; WIDTH: 11px" class="ganttview-grid-row-cell-partition last"></DIV><br/></DIV> 
```

上面给出的是为 div 动态生成的代码。为 div 定义的类如下所示：

```
div.ganttview-grid-row-cell {
float: left;

/* IE problem */
position:relative;

/*top: 0;
left: 0;*/
z-index:0; 
```

}

```
div.ganttview-grid-row-cell-partition {
border-right : 1px dotted #6B6659; 
font-size: 150%;
color: black;
height: 21px;
line-height: 120%; 
float : left; 
```

}

```
div.ganttview-grid-row-cell-partition.last {
border-right: none;
margin-right: 0px; 
```

}

我在所有 IE 版本中都有这个差距。不知道我哪里出错了。我确实找到了与此相关的其他问题并尝试了所有但它不起作用。例如

1）添加

```
 <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8"/> 
```

在头部标签中。

2) 将位置设置为绝对

3）将边距填充所有内容设置为零。

经过一些测试后添加更多点。如前所述，这些是动态创建的 div，下面给出了 jquery 中如何创建它的代码。

```
for(var z = 1 ; z <= 4 ; z++ ) {                                                                        
                $i5MinPartition = jQuery("<div>", 
                        {   
                    "class": "ganttview-grid-row-cell-partition",
                    "css": { "width": ((cellWidth/4) - 1) + "px", "text-align": "center"} 
                        });
                if(bgData[count] && bgData[count].workloadValue >= j) {
                    $i5MinPartition.css({"background": "#669900"});
                }
                if(bgData[count] && bgData[count].scheduleAllocationValue >= j) {
                    $i5MinPartition.text('x');
                }                       
                cellDiv.append($i5MinPartition);

                count++;
            } 
```

这里的 cellWidth 是 50。现在我发现 IE 没有采用十进制的宽度值，而 Firefox 采用了它。

方程

> (单元格宽度/4) - 1

在 FF 中为 11.5，而在 IE 中为 11。

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:04:30.350

嗨，尝试将此添加到父元素。

```
font-size: 0 
```

# multithreading - 秒表从可运行中获取静态值，在可运行中编辑变量

> ID：15414111
> 
> 赞同：1
> 
> 时间：2013-03-14T15:57:24.497
> 
> 标签：multithreading, handler, runnable, stopwatch

我要创建秒表，但遇到了一些麻烦。我的代码看起来是：

**1 对于开始按钮：**

```
 start.setOnClickListener(new OnClickListener() {
        @Override
    public void onClick(View v) {
               // some code
      mHandler.removeCallbacks(mUpdateTimeTask);
      mHandler.postDelayed(mUpdateTimeTask, 1);
      start.setText("Lap");
     }}); 
```

**2 对于可运行：**

> 公共可运行 mUpdateTimeTask = new Runnable() {

```
 public void run() {
          EditText licznik = (EditText)findViewById(R.id.editText1);
          // some code
          licznik.setText(time+"");
mHandler.postDelayed(this, 1);

      }
   }; 
```

我的秒表适用于：开始，停止。

但是我无法在重置按钮的 onclicklistener 操作中创建：`licznik.setText("");` 因为 licznik 是在 mUpdateTimeTask 内部启动的，所以我也无法将 licznik 移到 mUpdateTimeTask 之外，因为它当时不起作用。

此外，正如您注意到单击后我的开始按钮将更改为 lap 并且 lap 应该从 runnable 获得实际时间。我不知道怎么做，因为 runnable 是动态的。

有人有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:59:04.707

不确定，如果这会有所帮助，但您可以通过`Runnable`以下方式创建：

```
class UpdateTimeTask implements Runnable {
    private final EditText whatever;

    UpdateTimeTask(EditText whatever) {
        this.whatever = whatever;
    }

    @Override
    public void run() {
        // act upon whatever
    }
} 
```

# jquery - 如何使用 json 填充 jqGrid 表

> ID：15414121
> 
> 赞同：0
> 
> 时间：2013-03-14T15:57:44.290
> 
> 标签：jquery, json, jqgrid

我正在从 json 字符串“ [http://www.ok-soft-gmbh.com/jqGrid/John.txt](http://www.ok-soft-gmbh.com/jqGrid/John.txt) ”创建一个 jqgrid

我编写了类似于“ [http://www.ok-soft-gmbh.com/jqGrid/John.htm](http://www.ok-soft-gmbh.com/jqGrid/John.htm) ”的 JavaScript 和 指向 john.txt 文件的**url 。**

它给了我一张没有任何行的桌子。请帮忙。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Demonstration how to read simple JSON text</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/themes/redmond/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-3.8.2/css/ui.jqgrid.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.5.1.min.js"></script>
    <script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-3.8.2/js/i18n/grid.locale-en.js"></script>
    <script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-3.8.2/js/jquery.jqGrid.min.js"></script>

        <script type="text/javascript">
        //<![CDATA[
            jQuery(document).ready(function () {
                $('#jqgrid').jqGrid({
                    url: 'http://www.ok-soft-gmbh.com/jqGrid/John.txt',
                    datatype: 'json',
                    colNames: ['Col1', 'Col2', 'Col3'],
                    colModel: [
                        { name: 'col1' },
                        { name: 'col2' },
                        { name: 'col3' }
                    ],
                    jsonReader: { repeatitems: false },
                    height: 'auto'
                });
                });
        //]]>
        </script>
    </head>
    <body>
        <table id="jqgrid"><tr><td/></tr></table>
    </body>
    </html> 
```

这就是我的代码......
这就是我得到的

[http://tinypic.com/view.php?pic=vqps1x&s=6](http://tinypic.com/view.php?pic=vqps1x&s=6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:51:36.877

首先，由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)限制，您应该小心使用`url`“ [http://www.ok-soft-gmbh.com/jqGrid/John.txt](http://www.ok-soft-gmbh.com/jqGrid/John.txt) ”形式。您只能对数据使用 ajax 请求来自同一个网站。因此，为防止这种情况，您应该使用不带**协议、域和端口前缀的****url**。由于您尝试访问的数据来自另一个域，因此您无法将其直接传递给参数。解决方案是你必须使用自己的**json**数据来分配或你自己的域**url**来获取数据。或者你可以用**json**数据设置一个局部变量并将其分配给**jqGrid******`url`****

 ******* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:53:21.273

我认为这是因为，您正在对另一个域中的资源发出 ajax 请求。

试试这个，将下面给出的数据保存到文件 John.txt 并更改您的 URL 以指向此

`url: 'John.txt'`,

```
{
    "total": 2,
    "page": 1,
    "records": 12,
    "rows": [
        {
            "id": "1",
            "col1": "cell11",
            "col2": "cell12",
            "col3": "cell13" 
        },
        {
            "id": "2",
            "col1": "cell21",
            "col2": "cell22",
            "col3": "cell23" 
        } 
    ] 
} 
```******

# runtime - 是否可以在 OS X 上捆绑 Mono 运行时（不使用 Xamarin）？

> ID：15414125
> 
> 赞同：3
> 
> 时间：2013-03-14T15:57:46.083
> 
> 标签：runtime, monodevelop, bundle, monomac, xamarin.mac

我想将 Mono 运行时与我的 OS X 应用程序捆绑在一起，这样用户就不需要安装额外的框架来运行我的应用程序。

当尝试使用 MonoDevelop 的自动打包功能并检查“在应用程序包中包含 Mono 运行时”时，我被告知我需要 Xamarin.Mac。现在，对于像我这样的小公司来说，Xamarin 的价格相当高，我希望我不必为了捆绑运行时而购买整个 Xamarin 包。

我的猜测是还有其他方法可以做到这一点。我特别记得读过一些关于包含框架和设置环境变量的内容，但我再也找不到了。互联网上有评论和提示，即使在 SO 上也是如此，并且共识似乎是确实有可能，但我还没有找到关于*如何*做到这一点的描述。大多数答案似乎都链接到现在已经消失的 mono-project.com 网页的某些部分，因为我怀疑它已被移动到 Xamarin 包中。

那么，是否有任何非 Xamarin 方式在我的应用程序包中包含 Mono 运行时，让用户在不安装 Mono 的情况下运行它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T14:09:15.217

我相信斯蒂芬的回答是不完整的。只要您为最终用户提供独立于您升级单声道运行时的能力，您就可以捆绑单声道运行时。而且您不必捆绑整个运行时，只需捆绑您的应用程序需要的部分。

这是一篇较早的文章，描述了一些步骤： http: [//mono.1490590.n4.nabble.com/Embedding-into-XCode-project-td1751644.html](http://mono.1490590.n4.nabble.com/Embedding-into-XCode-project-td1751644.html)

祝你好运。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-14T16:06:18.017

单声道运行时是双重许可的，GPLv2 和 Xamarin。使用您拥有的 GPL 许可版本，您在法律上不能捆绑运行时（即使它在技术上是可行的）。通过购买 Xamarin.Mac，你主要购买了运行时的 GPL 免费版本的权利，你可以将其嵌入到你的应用程序中。

您仍然可以使用 MonoMac 开发和分发应用程序，但是您的用户将需要安装 mono（通过某种安装程序），并且您将无法发布到 App Store。

另请参阅[Xamarin.Mac 和 Mono:OSX 之间的区别在哪里](https://stackoverflow.com/questions/13890861/where-is-the-difference-between-xamarin-mac-and-monoosx)

# c# - C#：如何从另一个类访问“父”类中的静态变量

> ID：15414127
> 
> 赞同：-4
> 
> 时间：2013-03-14T15:57:50.613
> 
> 标签：c#, class, variables

好的，所以我有一个我正在尝试创建的简单程序，其中基本上有两个类 -`bird`和`egg`. 在`Program`类中，我设置了 a `list`of`bird`和 a `list`of `egg`- 两者都`main`在类中的方法之上声明`Program`。该`bird`对象有一个名为的方法`layEgg`，我想将一个新`egg`对象添加到`list`of 中`egg`。但我不太确定如何`list`从父类访问 a 。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:30:09.623

我可能错了，但您的方法似乎是错误的。尝试这个：

```
namespace BirdsAndEggs
{
    public class Bird
    {
        public string Name { get; set; }
        public List<Egg> Eggs { get; set; }
    }
    public class Egg
    {
        public string Size { get; set; }
    }

    public class Main
    {
        List<Bird> TheBirds = new List<Bird>();

        void main()
        {
            TheBirds.Add(new Bird()
            {
                Name = "Bird 1"
            });
            TheBirds.Add(new Bird()
            {
                Name = "Bird 2"
            });
            TheBirds.Add(new Bird()
            {
                Name = "Bird 3"
            });

            layEgg(0, "Large");
            layEgg(1, "Medium");
            layEgg(2, "Small");
        }

        void layEgg(int i, string size)
        {
            TheBirds[i].Eggs.Add(new Egg() { Size = size });
        }
    }
} 
```

我的意思是，这是对你想要什么的一个非常随机的猜测，我什至不知道你对 C# 有多熟悉......：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:19:46.197

如果我理解正确，您所说的*父类*并不是真正的父类。也就是说，您并不是说该类`bird`继承自该父类；你的意思是它是**在**那个类中声明的。比如这样：

```
class Program
{
  private class egg { }

  private static List<egg> listOfEggs;

  private class bird
  {
    public void layEgg()
    {
      // How to access listOfEggs from here?
    }
  }

  private static List<bird> listOfBirds;

  static void Main(string[] args)
  {
    // Initialise the lists, then:
    listOfBirds[0].layEgg();
  }
} 
```

如果是这样，答案很简单：`listOfBirds`可以直接访问，因为它在类中完全可见，`bird`即使一切都是`private`：

```
 private class bird
  {
    public void layEgg()
    {
      listOfEggs.Add(new egg()); // No problem
    }
  } 
```

# codeigniter - 无法在 wamp 中导航第一个 uri 段（控制器）

> ID：15414128
> 
> 赞同：0
> 
> 时间：2013-03-14T15:57:51.740
> 
> 标签：codeigniter, wamp

当我在 localhost (127.0.0.1/myproject) 上导航到我的主页时，我没有任何问题。它按应有的方式显示页面。

但是，它要求登录，当我单击链接时，它直接将我带回 WAMP 详细信息页面。它导航到 (127.0.0.1/myproject/tank/auth/)

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:05:42.493

我使用 XAMP，但我认为环境相似。诀窍是正确获取基本网址。

您在 config.php 中设置的基本 url 是什么？

我的看起来像：

```
$config['base_url'] = "http://localhost/myWWWdirectory/MySpecificProject/"; 
```

我的 CI 文件位于“MySpecificProject”文件夹中。

在我的机器上，`myWWWdirectory/MySpecificProject`在我的`htdocs`文件夹中。

# jsp - 从位于目录中的 jsp 调用位于包中的 servlet

> ID：15414134
> 
> 赞同：-1
> 
> 时间：2013-03-14T15:58:04.340
> 
> 标签：jsp, servlets, refresh

我有一个名为“addpicture”的servlet，位于一个名为“AdminClasses”的包中，一个名为“add_picture”的JSP页面位于一个名为“AdminPages”的文件夹中。

现在，我想从这个 jsp 页面调用 servlet。但是，由于 jsp 页面位于该文件夹内，因此它会引发错误，因为 resource not available 。当我将 JSP 页面移动到主网页文件夹时，它工作正常。但是，我不想这样做，因为我所有的管理页面都在“adminPages”文件夹中，如果我移动它们，那将是一团糟。那么，有什么方法可以从该 jsp 页面调用该 servlet，而它位于 adminPages 文件夹中？

帮助将不胜感激，在您帮助的同时，您还可以告诉我如何解决刷新问题；即当我刷新页面时，表单被重新提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:12:59.850

你的 servlet 应该有一个与之关联的 URL，它应该在你的[**web.xml**](http://docs.oracle.com/cd/E13222_01/wls/docs81/webapp/web_xml.html)文件中用[**servlet-mapping**](http://docs.oracle.com/cd/E13222_01/wls/docs92/webapp/configureservlet.html)定义。

例如，在 JSP 中，您必须在[**表单操作**](http://www.w3schools.com/tags/att_form_action.asp)中使用 servlet 的 URL 。servlet 类是否在其他包中并不重要。

# jquery - 锚标记在 Chrome 中不起作用

> ID：15414136
> 
> 赞同：1
> 
> 时间：2013-03-14T15:58:04.927
> 
> 标签：jquery, html, google-chrome

我在我的脚本中使用锚标记，这样当我回到页面时，我可以保存我所在的位置。问题是它仅在我单击链接时才有效。当我刷新页面或返回它时它不会。我没看到什么？信不信由你……这是 Chrome 的一个问题 - 它实际上在 IE 中运行良好！！！（我不敢相信我刚才这么说）

```
function parseXML(xml)
{
    //find every Category and print the title
    var output = '';    
    var ms = 0;
    $(xml).find("category").each(function()
    {   

        output += '<h3>' +$(this).find("title").text() + '<a name="m' + (ms+1) + '"></a> </h3> ' ;
        var div = '<div>';
        output += '<ul>';   
        $(this).find('items > item').each(function() {
            var text = $(this).find("text").text();
            var slink = $(this).find("link").text();
            output += "<li class='subLink' src='"+ slink + "'><a href='#m"+ms+"'>"  + text + "</a></li>";

        });

        output += '</ul>';      
        ms++;
    });         
    var icons = {
  header: "ui-icon-circle-arrow-e",
  activeHeader: "ui-icon-circle-arrow-s"
};
    var hashNum = 0;
    if (window.location.hash != ''){
        hashNum = parseInt(window.location.hash.replace("#m", "")); 

    };
$('<div>')
.attr('id','accordionSub')
.html(output)       
.appendTo('#accordionSubB').delay(1).queue(function(){
    $( "#accordionSub" ).accordion({
                heightStyle: "content",
                collapsible: true,
                icons: icons,
                active: hashNum
            });
});

} 
```

输出：

```
<h3 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons ui-state-hover"
role="tab" id="ui-accordion-accordionSub-header-22" aria-controls="ui-accordion-accordionSub-panel-22"
aria-selected="false" tabindex="-1">
    <span class="ui-accordion-header-icon ui-icon ui-icon-circle-arrow-e"></span>Pressure Transducers
    <a name="m23"></a>
</h3> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:24:50.610

在锚点中使用 id 而不是 name。

HTML 链接 - id 属性 id 属性可用于在 HTML 文档中创建书签。

提示：书签不会以任何特殊方式显示。它们对读者是不可见的。

示例 HTML 文档中带有 id 的锚点：

```
<a id="tips">Useful Tips Section</a> 
```

在同一文档中创建指向“有用提示部分”的链接：

```
<a href="#tips">Visit the Useful Tips Section</a> 
```

或者，从另一个页面创建指向“有用提示部分”的链接：

```
<a href="http://www.w3schools.com/html_links.htm#tips"> 
```

访问有用的提示部分

[http://www.w3schools.com/html/html_links.asp](http://www.w3schools.com/html/html_links.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:21:24.627

找到了一个我必须添加的解决方案：

```
$(window).load(function(){
    var hashNum = 0;
    if (window.location.hash != ''){
        hashNum = window.location.hash.replace("#m", "");   
        console.log('hashNum: ' + hashNum); 
    };

    hashMenu = $("#m"+hashNum-1).offset().top;

      $('html,body').animate({
          scrollTop: hashMenu
    }, 1000);

    }); 
```

# typescript - 在 Typescript 的模块内使用 get/set 创建变量

> ID：15414138
> 
> 赞同：9
> 
> 时间：2013-03-14T15:58:06.983
> 
> 标签：typescript

我想在模块内创建一个具有 get/set 属性的变量。我看到了一些在类中创建 get/set 属性的工作示例，如下所示：

```
class MyClass {
    private view;
    get View() { return this.view; }
    set View(value) { this.view = value }
} 
```

但我想在模块内做同样的事情：

```
module MyModule {
    export var view;
    //I want to create get/set methods for view property here
} 
```

我怎么做 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T17:48:22.170

我认为这只是一个疏忽。我会向设计团队提出这个问题（除了“我们还没有实现它”之外，我没有看到任何明显的理由来禁止它）。解决缺乏一流语言支持的问题相当简单：

```
module Bar {
    var _qua = 42;

    declare export var qua: number;
    Object.defineProperty(Bar, 'qua', {
        get: function() { return _qua; },
        set: function(value) { _qua = value; }
    }); 
}

// Works
var x = Bar.qua;
console.log(x);
Bar.qua = 19;
console.log(Bar.qua); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T17:48:44.010

访问器仅适用于“成员”。成员只能是类的一部分，至少 typescript 是这样的。

访问器是在类原型上定义的，这是模块所没有的。如果你真的想，你可以手动定义它，它确实有效。

```
module MyModule {
    var view;
    export var View;
    Object.defineProperty(MyModule, "View", {
        get: function () {
            console.log(1);
            return view;
        },
        set: function (val) {
            console.log(2, val);
            view = val;
        },
        enumerable: true,
        configurable: true
    });
}

MyModule.View = 555;
window["mm"] = MyModule.View; 
```

正如预期的那样，我得到了以下输出：

```
> 2 555
> 1 
```

虽然老实说我不会:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-06T07:20:29.847

您还可以将其包装在具有静态属性的类中：

```
module MyModule {
  export class MyClass {
    private static view;
    static get View() { return this.view; }
    static set View(value) { this.view = value }
  }
} 
```

# javascript - 从另一个 Ajax 函数内部调用函数。适用于纯 javascript

> ID：15414144
> 
> 赞同：0
> 
> 时间：2013-03-14T15:58:16.050
> 
> 标签：javascript, ajax

我有一个非常罕见的问题，或者我不知道，因为我是初学者:)

我正在用 ajax 创建一个 DOM 树，输出很完美，只是我调用的函数不起作用。. 如果我用纯 JavaScript 创建相同的三个。它实际上调用了该函数。好吧，很难解释，将显示一些代码。

```
function stickers(){
    $(document).ready(function() {
        $('#add-new-sticker-btn').click(function() {
            $.get('xml/data.xml', function(data) {
                $('#page-content-wrapper').empty();

                $(data).find('car').each(function() {
                    var $car = $(this);
                    var sticker = '<div class="sticker">';
                    sticker += '<div class ="sticker-drag">' + '</div>';
                    sticker += '<textarea>' + $car.find('product').text() + '</textarea>';
                    sticker += '<div class="sticker-close">' + '</div>';

                    $('#page-content-wrapper').append(sticker);
                });
            });
            return false;
        });
    }); 
    movewrap();  // <!-- this is the function that I'm trying to call.
} 
```

但如果我改为编写纯 javascript

```
function stickers(){
    var sticker = createElementWithClass('div', 'sticker'),
    textArea = document.createElement('textarea');
    var stickerDrag = createElementWithClass('div','sticker-drag')
    var stickerClose = createElementWithClass('div','sticker-close')

    sticker.appendChild(stickerDrag);
    sticker.appendChild(textArea);
    sticker.appendChild(stickerClose);

    document.getElementById('page-content-wrapper').appendChild(sticker);

    movewrap(); 
} // its calling the moveWrap function. 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:07:07.173

`moveWrap`在 AJAX 回调结束时调用 to 。目前它是在发出请求后调用的，而不是在收到响应后调用的，并且由于 DOM 元素还不存在，它不会有任何事情要做。

# linux - 漂亮的 ascii 日志的 Bash 格式

> ID：15414145
> 
> 赞同：1
> 
> 时间：2013-03-14T15:58:19.020
> 
> 标签：linux, bash, logging, ascii

我已经编写了一个函数来对文件、文件夹等的不同方面进行一些记录，并且我将让这个函数自动向我的员工发送电子邮件。这一切都很好，但我不介意一些指示和帮助使编队更好 - 这将作为脚本的一部分通过 mailutils 发送出去。

只是在寻找一些不错的间距技巧等

```
function report(){
lsb_release -a
echo "OS:               $(uname -s)"
echo "ARCH:             $(uname -m)"
echo "VER:              $(uname -r)"

echo "Apache running "
ps aux|grep -i apache2

echo "Showing if SSL is open"
apache2ctl -M | grep ssl

echo "Space on local disk"
df -h

echo "Showing permissions for the web folders"
echo $'*** /var/www// ***'
ls -l /var/www | awk '{print $1 "  " $3 "  " $4 "  " $9}'
ls -l /var/www/user1 | awk '{print $1 "  " $3 "  " $4 "  " $9}'
ls -l /var/www/user2 | awk '{print $1 "  " $3 "  " $4 "  " $9}'

echo "Showing network status"
ifconfig eth0
echo " DNS "
tail /etc/resolv.conf

echo "Current workspaces set up on the local server "
grep user2 /var/www/temp/text.txt | grep -E -o '[0-9]+[0-9]'

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:55:50.340

在使用 awk 或 cut 之后，尝试使用“column”命令代替或使用管道。

```
ls -l | awk '{print $1" "$3" "$4" "$9}' | tail -n +2 | column -t 
```

查看“mount”和“mount | column -t”或“df -PH and df -PH | column -t”之间的区别

如果您想连接具有相同数字或关系字段的信息列，您可以使用流程重定向和“粘贴”。

```
paste -d ' ' <(cat /sys/class/scsi_host/host*/device/fc_host:host*/port_name) \
             <(cat /sys/class/scsi_host/host*/device/fc_host:host*/speed) \
             <(cat /sys/class/scsi_host/host*/device/fc_host:host*/port_state)
0x218000e05a0001aa 4 Gbit Online
0x218000e05a2001aa 4 Gbit Online 
```

# iphone - UITableView prepareForSegue 将 indexPath 分配给发件人？

> ID：15414146
> 
> 赞同：11
> 
> 时间：2013-03-14T15:58:24.310
> 
> 标签：iphone, objective-c, cocoa-touch, uitableview, segue

在下面的代码中，我只是尝试直接`UIViewController`从`DetailViewController`. 我通常从`UITableViewCell`（我认为更清楚）做segue，但这次我只是想尝试直接从`ViewController`using`-tableView:didSelectRowAtIndexPath:`

**我的问题是：**我遇到了需要`UITableViewCell` `indexPath`从`-prepareForSegue:sender:`我的解决方案中访问的情况是发送`indexPath`via `sender`。通常我会将 sender 设置在`self`这里，我环顾四周，找不到任何参考，我只是好奇使用 sender 传递 indexPath 是否可以接受？我很确定是这样，而且我确信我以前在某个地方读过你可以，但我现在找不到任何参考。

```
// ------------------------------------------------------------------- **
// DELEGATE: UITableView
// ------------------------------------------------------------------- **
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"%s", __PRETTY_FUNCTION__);
    [self performSegueWithIdentifier:@"SEGUE_TWO" sender:indexPath];
}

// ------------------------------------------------------------------- **
// SEGUE: ViewController_ONE > DetailViewController
// ------------------------------------------------------------------- **
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    NSLog(@"%s", __PRETTY_FUNCTION__);
    if([[segue identifier] isEqualToString:@"SEGUE_TWO"]) {
        NSUInteger cellRow = [(NSIndexPath *)sender row];
        DetailViewController *destinationController = [segue destinationViewController];
        [destinationController setDataString:[[self dataList] objectAtIndex:cellRow]];
    }
} 
```

**编辑：**在这种情况下我正在寻找的是

```
NSIndexPath *indexPath = [[self tableView] indexPathForSelectedRow]; 
```

本质上是一种无需通过 sender 参数 (in )即可`indexPath`进入的方式`-performForSegue:sender:``-performSegueWithIdentifier:sender:`

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-14T16:06:38.873

我通常避免使用 sender in`prepareForSegue:`因为它可能是*任何东西*。这使得断言您的发件人是您所期望的更加麻烦和脆弱。此外，我更喜欢检查destinationViewController 对象的类而不是segue 名称。您的功能与您的对象（或更具体地说是它的接口）相关联，而不是与您的 segue 的标题相关联，因此检查您的类可以清楚地了解您要完成的工作。

下面是我在生产中从`UITableView`. 请注意，您应该*始终*检查destinationViewController 是否嵌入在导航控制器中，然后还要检查对象的类以确保正确处理它。最后，使用断言来确保您没有添加一些您忘记处理的新 segue。

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // unwrap the controller if it's embedded in the nav controller.
    UIViewController *controller;
    UIViewController *destVC = segue.destinationViewController;
    if ([destVC isKindOfClass:[UINavigationController class]]) 
    {
        UINavigationController *navController = (UINavigationController *)destVC;
        controller = [navController.viewControllers firstObject];
    } 
    else 
    {
        controller = destVC;
    }

    if ([controller isKindOfClass:[DetailViewController class]]) 
    {
        DetailViewController *vc = (DetailViewController *)controller;
        NSIndexPath *ip = [self.tableView indexPathForSelectedRow];
        [vc setDataString:[[self dataList] objectAtIndex:ip.row]];

    } 
    else 
    {
        NSAssert(NO, @"Unknown segue. All segues must be handled.");
    }

} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-14T16:08:15.330

你可以使用 UITableView 的方法`indexPathForCell`。我希望你有一个 tableView 实例变量。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if([sender isKindOfClass:[UITableViewCell class]]) {
        NSIndexPath * indexPath = [self.tableView indexPathForCell:sender];
        //Your code here
    }
} 
```

# twitter-bootstrap - 随机播放后的引导弹出窗口

> ID：15414150
> 
> 赞同：1
> 
> 时间：2013-03-14T15:58:30.137
> 
> 标签：twitter-bootstrap, popover, shuffle

我有内容的div：

```
<div class="mydiv">
<a class="mybutton btn btn-primary btn-small" rel="popover" data-html="true" data-placement="bottom" data-content="some individual content"></a>
</div> 
```

弹出框使用此代码

```
$(function () {
   $("a[rel=popover]").popover(); 
}); 
```

我需要洗牌这个 div，所以我有这个代码

```
$('.jp-random').unbind('click');
$('.jp-random').click(function() {
  $(".mydivs .mydiv").shuffle();
}); 
```

洗牌后弹出框不起作用。
**更新：** 好的，我更新了 2.3.1 版的引导工具提示和弹出框代码，并设置了 data-container=".mydivs"。现在我的弹出窗口在左上角，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:09:21.187

当您调用`popover()`jquery 对象时，它会将侦听器附加到该按钮。 `shuffle()`将其完全分离，同时删除所有附加的侦听器。

这应该是一个简单的问题，`popover()`在你洗牌 div 之后再次调用。

# android - CSS + Phonegap = 未正确渲染

> ID：15414158
> 
> 赞同：2
> 
> 时间：2013-03-14T15:58:52.453
> 
> 标签：android, css, cordova, render

我面临一个我一直在努力解决的问题，但我仍然没有答案。我在大量的论坛和网站上寻找它，但没有一个真正有效。有人遇到同样的问题并解决了吗？

问题：我有一个页面上有多个 div，每个 div 都是一个页面。每次我单击一个按钮时，其中一个 div 变得可见，而其他 div 则隐藏起来。问题来了：如果我在不同的链接上单击多次（以更改可见的 div），它会停止呈现正确的内容并阻止其中一个链接。我注意到内容已加载，只是不要在屏幕上呈现。我注意到了这一点，因为如果我将手机转为横向然后纵向，内容会正确呈现并显示我想要的内容。

似乎发生此错误是因为手机无法正确呈现内容。有没有办法解决它？也许强制渲染？我怎样才能做到？我找不到任何东西。

我查看并尝试了大量代码，对我有用的代码是使用以下 css，但它给我带来了很多问题。当我输入时，文本框开始移动，有时它不接受某些字符，以及许多其他奇怪的问题。

编码：`-webkit-transform: translate3d(0px,0px,0px);`

我还在我的 html 文件中使用以下代码`<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">`：它允许我在不使用任何 js 库的情况下拥有固定的标题。

我正在使用的工具：Phonegap 2.5、android 2.3.4

任何想法？

谢谢

PS：我决定不发布代码，因为它似乎与我写的内容无关，但有一些错误..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:03:39.373

我想如果我没记错的话，Android 2.3x 浏览器不支持 translate3d 这应该是问题尝试在 4.x AVD 上运行它，看看它是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T20:05:56.880

我有一个类似的问题，这个错误是因为我使用了“css content”属性（内容：'';）。

如果您正在使用它，请尝试删除。

最好的，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:06:52.927

这个人解决了这个问题：

[Android WebView 呈现空白/白色，视图不会在 css 更改或 HTML 更改时更新，动画不连贯](https://stackoverflow.com/questions/13500452/android-webview-renders-blank-white-view-doesnt-update-on-css-changes-or-html?rq=1)

似乎这是正确解决它的唯一方法，除了这个解决方案我没有找到任何东西......

# vector - 如何保持盒子的同一侧垂直于 povray 中的相机位置？

> ID：15414159
> 
> 赞同：3
> 
> 时间：2013-03-14T15:58:57.923
> 
> 标签：vector, normals, povray

我在 povray 中有一个由两个 3 维向量定义的框对象。V1 指定框的左上角，而 V2 指定框的右下角。盒子的一侧是 jpeg。我试图弄清楚当相机位置发生变化时如何旋转盒子，以便带有jpeg的盒子的一侧始终垂直于相机的位置。“看”向量将保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:38:10.080

您可以设置适用于盒子和相机的变换。

```
#declare your_box= box{V1,V2,pigment{*etc.* }}

#declare some_transform=transform{*rotate translate, etc.*}

#object{your_box
transform{some_transform}
}

camera{*settings that point it perfectly at your box*
transform{some_transform}} 
```

# python - django 命令“django-admin.py startproject mysite”

> ID：15414165
> 
> 赞同：0
> 
> 时间：2013-03-14T15:59:16.403
> 
> 标签：python

```
 D:\python\Project>c:\Python30\Scripts\django-admin.py startproject mysite
Traceback (most recent call last):
File "C:\Python30\Scripts\django-admin.py", line 2, in <module>
from django.core import management
File "c:\python30\Lib\site-packages\django\core\management\__init__.py", line
9, in <module>
from django.core.management.base import BaseCommand, CommandError, handle_de
fault_options
File "c:\python30\Lib\site-packages\django\core\management\base.py", line 15,
in <module>
from django.utils.encoding import force_str
File "c:\python30\Lib\site-packages\django\utils\encoding.py", line 13, in <mo
dule>
from django.utils.functional import Promise
File "c:\python30\Lib\site-packages\django\utils\functional.py", line 350, in
<module>
from functools import total_ordering
ImportError: cannot import name total_ordering 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:12:20.490

您使用 Python 3.x 版本。这个 Python 版本在最新的 django 版本 1.5 中具有实验性支持，但无论如何，这并不是那么有用。

您现在需要使用 Python 2.7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:42:48.663

您需要将 Python 降级到 2.7，或者将 Python 升级到 3.2 或更高版本（当前稳定的 3.x 为 3.3）并使用 Django 1.5。如果您想要稳定性，我会推荐降级选项。

> [Django 1.5](https://www.djangoproject.com/weblog/2013/feb/26/15/)是第一个支持 Python 3（特别是 Python 3.2 和更新版本）的 Django 版本。**Python 3 支持仍然被认为是实验性的**——主要是因为它没有得到我们想要的那么多的实际测试——但是如果你想尝试一下，可以使用 Python 3 移植指南，我们将考虑将 Python 3 兼容性错误作为未来版本的障碍。

# android - 在 dalvik.system.NativeStart.main（本机方法）

> ID：15414169
> 
> 赞同：0
> 
> 时间：2013-03-14T15:59:24.237
> 
> 标签：android

当我加载模拟器并单击我制作的按钮时，我不断收到此错误

03-14 15:47:37.096: E/AndroidRuntime(281): at dalvik.system.NativeStart.main(Native Method)

那么body可以解释这个错误的含义吗

```
android:id="@+id/Linear Layout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/Login_Button"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin Top="14dp"
    android:on Click="Login_on Click"
    android:text="My Training Plan" />

<Button
    android:id="@+id/Workouts_Button"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:on Click="Workouts_Button_on Click"
    android:text="Offensive Workouts" />

<Button
    android:id="@+id/Defensive_workouts"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:on Click="Defensive_workouts_on Click"
    android:text="Defensive Workouts" />

<Button
    android:id="@+id/Shot_Tracker_Button"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:on Click="Shot_Tracker_Button_on Click"
    android:text="Shot Tracker"/>

<Button
    android:id="@+id/About_Basketball_App_Button"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin Top="163dp"
    android:on Click="About_Basketball_App_Button_on Click"
    android:text="About Basketball App" />

<Button
    android:id="@+id/contact Basketball app_Button"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:on click="contact Basketball app_on Click"
    android:text="Contact Basketball app" /> 
```

<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-25T07:31:31.107

验证您是否在 AndroidManifest.xml 中声明了上述活动类。我认为它可能未在您的 AndroidManifest.xml 文件中声明。

```
<activity
        android:label="@string/your_app_name"
        android:name=".YourActivity" >
    </activity> 
```

# android - 导入没有 .project 文件的项目

> ID：15414170
> 
> 赞同：12
> 
> 时间：2013-03-14T15:59:24.317
> 
> 标签：android, eclipse, import

我正在尝试在 Eclipse 中导入一个项目（它是[Google Play 服务库](https://developers.google.com/maps/documentation/android/intro#sample_code)，与 Google Maps Android API v2 一起使用，从 SDK 管理器下载并位于我的计算机上`<android-sdk-folder>/extras/google/google_play_services/libproject/google-play-services_lib`）。

根据我的发现，它不起作用，因为`.project`项目根目录中没有该文件。Eclipse 说“找不到要导入的项目”。

[这是一个屏幕截图。](https://i.imgur.com/IWxgBTm.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-14T16:22:31.417

从现有源创建一个新的 Android 项目，而不是导入它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T12:50:12.923

**小心，请按照以下步骤操作并节省您的时间**

1.  右键单击您的项目资源管理器。

2.  从现有代码中选择新建-> 项目-> Android 应用程序项目

3.  仅浏览此路径 - “C:\Users**your path**\Local\Android\android-sdk\extras\google\google_play_services”

4.  **小心，只关注 - google_play_services 而不是 google_play_services_lib**

5.  这样您就可以导入 google play 服务库。

如果您对此有任何疑问，请告诉我。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-13T13:18:06.550

当我尝试导入通用项目而不是导入 android 项目时出现此错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-11T23:06:20.293

我对此的解决方案是

1.- 复制并粘贴 google-play-services_lib 到您的桌面

2.- 使用现有项目导入

```
Select New -> Existing Project in your Workspace I selected Desktop directory checked copy projects to your workspace and Finish 
```

有效

也许如果你使用原始目录，它的路径太大了，也许 eclipse 把它剪掉了（我猜它）

# facebook - PhoneGap + Drupal + Drupal for Facebook 模块

> ID：15414171
> 
> 赞同：1
> 
> 时间：2013-03-14T15:59:25.010
> 
> 标签：facebook, drupal, cordova

我正在使用 Phonegap 开发 Iphone 应用程序，我从 Drupal 网站获取了它的所有数据，现在我需要让用户连接到 facebook 登录，并且在网站中我使用 Drupal 进行 facebook 模块。

我是否需要在我的应用程序中添加新的 facebook 连接系统，或者有办法在 Drupal 网站上使用相同的 facebook 连接按钮？

# javascript - 单击按钮使标签视图可编辑 - Sproutcore

> ID：15414177
> 
> 赞同：1
> 
> 时间：2013-03-14T15:59:32.260
> 
> 标签：javascript, javascript-framework, sproutcore, textfield, sproutcore-views

我对sproutcore很陌生。虽然我知道`SC.InlineEditable`mixin 和`isEditable`字段，但问题是当我单击按钮进行`labelView`可编辑时。标签保持不变，我必须双击标签才能输入文本。

我想要的是当我点击编辑按钮时，标签应该变成一个文本字段并且应该成为第一响应者，即光标应该在 textfied 上闪烁。

我找不到任何像样的文档（sproutcore 没有多大帮助）或教程来做到这一点。指向此类参考的链接也将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:37:40.613

根据[陈列柜](http://showcase.sproutcore.com/#ui/SC.LabelView)，您应该能够按以下方式完成此操作：

```
SC.LabelView.extend({
  classNames: ['my-label-view'],
  isEditable: true,
  layout: { width: 300, height: 16, centerX: 0, centerY: 0 },
  value: 'Double-click this label to edit inline.'
}) 
```

如果这不起作用，您能告诉我们您使用的是什么版本的 SC，以及什么浏览器/版本吗？这可能是一个潜在的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:13:07.667

对我来说，启用标签感觉就像是应用程序中的不同状态。在这种情况下，您最好将按钮的操作与状态图联系起来。因此，您首先创建一个带有 isEditing 属性的控制器，该属性为 false（默认情况下）。

```
myApp.myController = SC.Controller.create({
  isEditing: false;
}); 
```

现在您在当前状态下创建一个函数，该函数由按钮上的操作调用。这将导致进入 EDITING 状态，在 enterState 中将 isEditing 属性设置为 true，在 exitState 中设置为 false。

我不知道如何将标签视图的编辑状态绑定到这个 isEditing 属性，但是假设这是可能的，您可以通过这种方式同时控制所有字段的编辑状态，并且您将确定编辑完成后所有字段也将恢复正常。

# compare - SQL 与下一行中的值进行比较

> ID：15414180
> 
> 赞同：0
> 
> 时间：2013-03-14T15:59:38.410
> 
> 标签：compare, row, next

我一直是这个论坛的长期读者，它对我有很大帮助，但是我有一个问题我找不到特定于我的要求的解决方案，所以这是我第一次不得不问任何问题。我有一个选择语句，它返回按日期排序的仪表读数（顶部的最新读数），在 99.9% 的情况下，仪表读数总是随着日期的推移而上升，但是由于系统错误偶尔会下降，我需要为了确定下面行中的读数（先前读数）大于最新读数（当前单元格）的实例，我遇到了 LEAD 函数，但它仅在 Oracle 或 SS-MS-2012 中，我使用的是 SS- MS-2008。这是我的选择语句的简化版本：

```
SELECT  Devices.SerialNumber,
    MeterReadings.ScanDateTime,
    MeterReadings.TotalMono,
    MeterReadings.TotalColour

FROM    dbo.MeterReadings AS MeterReadings

JOIN    DBO.Devices AS Devices 
ON      MeterReadings.DeviceID = Devices.DeviceID
WHERE   Devices.serialnumber = 'ANY GIVEN DEVICE SERIAL NUMBER'
AND     Meterreadings.Scandatetime > 'ANY GIVEN SCAN DATE TIME'

ORDER BY MeterReadings.ScanDateTime DESC, Devices.SerialNumber ASC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:23:17.077

这是我最后使用的代码

```
WITH readings AS
(
SELECT
    d.SerialNumber
    , m.TotalMono
    , m.TotalColour
    , m.ScanDateTime
FROM dbo.MeterReadings m
INNER JOIN dbo.Devices d ON m.DeviceId = d.DeviceId
WHERE m.ScanDateTime > '2012-01-01'

) 

SELECT top 1 *
FROM readings r
LEFT JOIN readings p ON p.SerialNumber = r.SerialNumber
                and p.ScanDateTime < r.ScanDateTime
                and p.TotalMono > r.TotalMono
order by r.serialnumber, p.TotalMono desc, r.TotalMono asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:15:07.053

尝试这样的事情。

```
;WITH readings AS
(
    SELECT
        d.SerialNumber
        , m.TotalMono
        , m.TotalColour
        , m.ScanDateTime
    FROM dbo.MeterReadings m
    INNER JOIN dbo.Devices d ON m.DeviceId = d.DeviceId
)

SELECT *
FROM readings r
LEFT JOIN readings p ON p.SerialNumber = r.SerialNumber
                    AND p.ScanDateTime < r.ScanDateTime
WHERE p.reading > r.reading 
```

# android - 使用摄像机的 Adob e AIR 3.6 应用程序在 Google Nexus 7 Android 4.2.2 上崩溃

> ID：15414181
> 
> 赞同：0
> 
> 时间：2013-03-14T15:59:41.587
> 
> 标签：android, air, adobe, android-camera

我正在为需要访问摄像机的移动设备开发 AIR 应用程序。到目前为止，它在 iOS 上运行良好，但在我的 Google Nexus 7 设备上，该应用程序在激活摄像机后不久就崩溃了。我已经设置了正确的权限并且可以访问设备上的“前置”摄像头。有时我会看到我添加到舞台的视频图像快速闪烁，但随后应用程序崩溃并返回到 google nexus 屏幕。

我正在使用-运行 android 4.2.2 的 Adob​​e AIR 3.6.0.6090 SDK AS3（显然）Google Nexus 7

有没有人注意到这种行为？有什么我可以改变的还是这是一个 android / air bug？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:07:00.463

我认为这只是因为我正在远程调试应用程序而发生。当我在没有远程调试器的情况下运行应用程序时，它运行良好。视频已加载并显示正常。把这个问题留在这里，以防它为任何人节省一些时间来解决类似的问题:-)

# jmeter - 在Jmeter中将变量从一个http请求传递到另一个

> ID：15414183
> 
> 赞同：2
> 
> 时间：2013-03-14T15:59:44.900
> 
> 标签：jmeter

我必须将一个变量从 jmeter 中的 xpath 提取器传递给另一个 http 请求。
我怎样才能做到这一点？

我想在 http 请求的标头中传递变量。
我已将 xpath 提取器中的变量保存为`LoginToken`.
试图在第二个 http 请求的标头中检索，`${LoginToken}`但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:50:01.223

1.  首先确保您的 xpath 表达式确实返回任何结果。
    将`Default Value`XPath Extractor 中的字段设置为任何值，并使用例如[Debug Sampler](http://jmeter.apache.org/usermanual/component_reference.html#Debug_Sampler)在 XPath Extractor 执行后查看 LoginToken 变量的值。
2.  如果您使用 XPath Extractor 解析 HTML 响应，请确保选中**Use Tidy（容错解析器）**选项。

# kendo-ui - 网格中命令部分的剑道变量

> ID：15414186
> 
> 赞同：0
> 
> 时间：2013-03-14T15:59:53.113
> 
> 标签：kendo-ui, kendo-grid

我注意到可以在列部分的模板中包含一些剑道逻辑和变量。

这是我的专栏部分模板中的一个示例

```
 template: "#= myVariable#  #if(myBoolean) {# <img src='/images/myImage.png' /> #}#" 
```

请注意，myVariable 和 myBoolean 是网格每一行的变量（字段）。不幸的是，我在模板的命令部分尝试了相同的操作。我收到以下错误“ReferenceError: myVariable is not defined”

有没有办法在列中添加变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:56:10.653

据我所知，`columns.command`甚至没有记录使用模板：尽管它有效。您可以执行以下操作：

```
columns   : [
    {
        command: {
            template : "# console.log('this', this); console.log('data', data); # toto"
        }
    },
    ...
] 
```

甚至喜欢：

```
command: {
    template : function (arg) {
        console.log("this" ,this);
        console.log("arg", arg);
        console.log("data", data);
        return "toto";
    }
} 
```

但是模板返回的内容必须是 a`string`并且在浏览器的控制台中您会看到 ,是`this`对象并且是包含网格数据的。`window``arg``command``data``array`

虽然您可以包含额外的参数：

```
command: {
    template : function (arg) {
        console.log("this" ,this);
        console.log("arg", arg);
        console.log("arg.a", arg.a);
        console.log("data", data);
        return "toto";
    },
    a: "extra argument"
} 
```

我在其中添加了一个额外的`a`参数，`arg.a`您仍然无法访问当前行`data`，因为该元素仍未插入。

而不是我建议做的事情是：

```
columns   : [
    {
        title: " ",
        template: "#= myVariable#  #if(myBoolean) {# <img src='/images/myImage.png' /> #}#"
    },
    ...
] 
```

您不需要将其作为命令，对吗？为什么需要它作为命令？

# c# - 将单个值绑定到 aspx 页面

> ID：15414192
> 
> 赞同：0
> 
> 时间：2013-03-14T16:00:09.850
> 
> 标签：c#, asp.net

试图将代码中的值绑定到 aspx 页面。

```
<div>
   <table>
        <tr>
          <th>Item</th>
        </tr>
        <tr>
          <td><asp:Label ID="Label1" runat="server" Text='<%# Eval("ItemId")%>'/></td>   
         </tr>
   </table> 
 </div> 
```

后面的代码：

```
int ItemId = 3; 
```

注意：我尝试过：

```
<%=ItemId%> AND <%:ItemId%> 
```

但没有快乐！我究竟做错了什么？我要做的就是绑定到单个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:09:31.840

```
<asp:Label ID="Label1" runat="server" Text='<%# ItemId %>'/> 
```

这是页面上的正确格式，但您还需要在代码隐藏中执行数据绑定事件：

```
int ItemId = 3;
this.DataBind(); 
```

尽管 philreed 说得对，因为您已经在使用标签，您最好只`label.Text`使用您的值更新属性，而不是通过数据绑定过程。`<%# ItemId %>`当您想在常规页面标记而不是 ASP 控件中间粘贴随机数据值时，最好使用，如下所示：

```
<div>
    The number you picked is <%# ItemId %>.
</div> 
```

执行此操作时，它仍然需要`DataBind()`在您的代码隐藏中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:04:18.887

如果它只有一个值，为什么不在你的代码中使用它呢？

```
Label1.Text = ItemId.ToString(); 
```

并`<%# Eval("ItemId")%>`从您的标记中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:05:52.460

```
<asp:Label ID="Label1" runat="server" Text='<%# ItemId %>'/> 
```

# java - 我可以在 Eclipse 中显示 Ant 构建文件的路径信息吗？

> ID：15414193
> 
> 赞同：0
> 
> 时间：2013-03-14T16:00:10.050
> 
> 标签：java, eclipse, svn, ant

在 Eclipse 4.2 中，有没有办法显示 Ant 视图中包含的 Ant 构建文件的路径或项目名称信息？

在我的工作区中，我目前有两个版本的项目签出，一个来自我们的 myproject/trunk，另一个来自 myproject/branches/feature

从每个分支中，我将项目中的适当 build.xml 拖到 Ant 视图中。但是，由于主干和功能分支都具有相同的项目名称和相同的目标，因此在 Ant 视图中无法区分两者之间的区别。有没有办法a）显示build.xml的关联项目名称/路径或b）重命名显示而不直接编辑build.xml？

我知道我可以为我的存储库中的每个分支/标签手动更新项目名称以使用自定义名称，但这似乎更像是一个 hack 而不是解决方案。有没有更好的办法？

下面是我想做的一个模型。

![我想看的样机](../Images/f7c289ef8f95e1b15a89cbbec1598fc9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:17:34.327

试试这个插件 => [r2tech-eclipse](http://sourceforge.net/projects/r2tech-eclipse/)[截图](http://r2tech-eclipse.sourceforge.net/antview-2.2.jpg)显示了 AntView，它列出了带有路径的构建文件
。

**编辑**：不适用于 Eclipse 3.7.x (Indigo)，最新版本是 2002 年的。
源代码可供下载，因此您可以使用它来修补 Eclipse 附带的 ant view。
eclipse 内置的 ant 视图应该提供相同的功能。
另一种选择是在[错误报告中填写](https://bugs.eclipse.org/bugs/)ant 视图的功能请求。

要从构建脚本内部访问 buildfilelocation，请使 projectpath
可用作 ant 的属性，如下所示：

```
Window > Preferences > Ant > Runtime > Properties 
```

并创建一个名为 projectpath 的属性，其值为：

```
${project_loc} 
```

然后在你的 buildscript 中使用类似的东西：

```
<echo>$${projectpath} => ${projectpath}</echo> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:32:35.267

目前看来这是不可能的。我向 Eclipse 项目提交了一个错误报告，因此将来可能会提供更多信息。错误报告的链接如下

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=403514](https://bugs.eclipse.org/bugs/show_bug.cgi?id=403514)

# cuda - 定义了局部行为的 CUDA 和 Monte Carlo

> ID：15414194
> 
> 赞同：0
> 
> 时间：2013-03-14T16:00:16.520
> 
> 标签：cuda, montecarlo

我有一个关于 CUDA 中奇怪行为的问题。我目前正在开发粒子轨迹的蒙特卡罗模拟，我正在做以下事情。

我的粒子在给定日期 t(n) 的位置 p(n) 取决于我的粒子在前一个日期 t(n-1) 的位置 t(n-1)。实际上，假设值 v(n) 是根据值 p(n-1) 计算得出的。这是我的代码的简化示例：

```
__device__ inline double calculateStep( double drift, double vol, double dt, double randomWalk, double S_t){
  return exp((drift - vol*vol*0.5)*dt + randomWalk*vol*sqrt(dt))*S_t;
}    

__device__ double doSomethingWhith(double v_n, ….) {
  ...
  Return v_n*exp(t)*S
}

__global__ myMCsimulation( double* matrice, double * randomWalk, int nbreSimulation, int nPaths, double drift, ……) {

  double dt = T/nPaths;
  unsigned int tid = threadIdx.x + blockDim.x * blockIdx.x; 
  unsigned int stride = blockDim.x*gridDim.x;
  unsigned int index = tid;  
  double mydt = (index - nbreSimulation)/nbreSimulation*dt + dt;

  for ( index = tid; index < nbreSimulation*nPaths; index += stride) {
    if (index >= nbreSimulation)
    {
     double v_n = DoSomethingWith(drift,dt, matrice[index – nbreSimulation]);
     matrice[index] = matrice[index - nbreSimulation ] * calculateStep(drift,v_n,dt,randomWalk[index]); // 
    }
...} 
```

最后一行代码：

```
matrice[index] = matrice[index - nbreSimulation ] * calculateStep(drift,v_n,dt,randomWalk[index]); 
```

使我能够只填写矩阵矩阵的第二行。我不知道为什么。

当我通过以下方式更改代码行时：

```
matrice[index] =  DoSomethingWith(drift,dt, matrice[index – nbreSimulation]); 
```

我的矩阵填得很好，我的所有值都改变了，然后我可以取回`matrice[index – nbreSimulation]`. 我认为这是一个并发访问，但我不确定，我试过`__syncthreads()`但没有奏效。

有人可以帮忙吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:09:11.880

我已经通过以下内容更改了我的代码，现在它可以完美运行。

```
if (index < nbreSimulation) {
            matrice[index] = S0;    
            for (workingCol=1; workingCol< nPaths; workingCol++) {
                previousMove = index; 
                index = index + nbreSimulation;
                  ................
                matrice[index] = calculateStep(drift,vol_int[index],dt,randomWalk[index], matrice[previousMove]);             }
       }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:04:40.727

我尝试了以下事情：

我已经声明了一个共享变量（一个双精度数组），其中包含每次迭代计算的值：

```
__shared__ double mat[];

......
for ( index = tid; index < nbreSimulation*nPaths; index += stride) {
   .....
  mat[index] = computedValue;
   ......
 } 
```

没有成功。有没有人看到这个问题？

# php - 在不离开当前页面的情况下更改语言

> ID：15414195
> 
> 赞同：2
> 
> 时间：2013-03-14T16:00:21.857
> 
> 标签：php

我正在尝试更改语言但留在当前页面上：即：

www.myurl.com/english/aboutus.php

www.myurl.com/german/aboutus.php

www.myurl.com/french/aboutus.php

所以只有语言目录会改变。我有以下但无法让它工作：

```
<?php 
$full_url = $_SERVER['FULL_URL'] ;  

$temparray = explode(".com/",$full_url,2); 

$englishtemp = $temparray[0] . ".com/english/" . $temparray[1]; 
$englishlink = "<a href=$englishtemp><img src=../images/english-flag.jpg></a>"; 

echo $englishlink; 
?> 
```

我将 url 从“/french/aboutus.php”更改为“/english”，但它不记得页面名称“aboutus.php”并返回到索引页面。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:14:08.343

用于`basename($_SERVER['PHP_SELF'])`当前页面。

```
$englishtemp = "/english/" . basename($_SERVER['PHP_SELF']); 
$englishlink = "<a href=$englishtemp><img src=../images/english-flag.jpg></a>";
echo $englishlink; 
```

请参阅[$_SERVER 上的 PHP 文档](http://php.net/manual/en/reserved.variables.server.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:25:25.290

试试这个。它将为除当前选定的语言之外的所有语言生成链接:)

```
<?php
$full_url = $_SERVER['REQUEST_URI']; //select full url without the domain name
$languages = array('english', 'french', 'german'); //array of all supported languages

$url_bits = explode('/', $full_url); //divide url into bits by /
$current_language = $url_bits[1]; //current language is held in the second item of the array

//find current language in the array and remove it so we wouldn't have to display it
unset($languages[array_search($current_language, $languages)]);

$links = '';

foreach ($languages as $language) {
    //generate links with images for the rest of the languages
    $links .= '<a href="/' . $language . '/' . $url_bits[2] . '"><img src="../images/' . $language . '-flag.jpg" title="'.ucfirst($language).'" /></a>';
}

echo $links;
?> 
```

# ios - dateFromString 在 ios 6 中工作，但在 ios 5 中不工作

> ID：15414201
> 
> 赞同：1
> 
> 时间：2013-03-14T16:00:30.300
> 
> 标签：ios, objective-c, ios5, ios6, nsdate

此代码适用于 iOS 6.0 模拟器，但不适用于 iOS 5.0

```
NSString *unformattedDate = @"2008-09-25T20:41:11.000+00:00";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSSZZZZZ"];
NSDate *dateFromString = [dateFormatter dateFromString:unformattedDate];
[dateFormatter setDateFormat:@"dd.MM.yy"];
NSLog(@"%@", [dateFormatter stringFromDate:dateFromString]); 
```

有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:39:32.560

由于`ZZZZZ`日期格式说明符是在 iOS 6 中添加的，因此您无法`+99:99`格式化具有 iOS 5 格式的时区的日期。两个版本都支持`+9999`使用`ZZZZ`. 如果你知道你的日期/时间字符串总是有一个带有冒号的时区，那么你可以去掉冒号。

```
NSString *unformattedDate = @"2008-09-25T20:41:11.000+00:00";
NSRange range = [unformattedDate rangeOfString:@":" options:NSBackwardsSearch];
if (range.location != NSNotFound && range.location >= unformattedDate.length - 4) {
    unformattedDate = [unformattedDate stringByReplacingCharactersInRange:range withString:@""];
}
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
NSLocale *posix = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
[dateFormatter setLocale:locale];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSSZZZZ"];
NSDate *dateFromString = [dateFormatter dateFromString:unformattedDate];
[dateFormatter setDateFormat:@"dd.MM.yy"];
NSLog(@"%@", [dateFormatter stringFromDate:dateFromString]); 
```

请注意，对于像这样的固定格式，您必须将格式化程序的语言环境设置为特殊的“en_US_POSIX”语言环境。

# android - FragmentTabsPager - 标签问题

> ID：15414203
> 
> 赞同：0
> 
> 时间：2013-03-14T16:00:35.420
> 
> 标签：android, android-fragments, android-tabhost, android-fragmentactivity

我遵循了 FragmentTabsPager 的 ABS 示例，但我遇到了这个问题：

*   Activity A 有两个片段：F1、F2，它们是使用 TabsAdapter 在 A 的 onCreate() 方法中添加的。
*   Activity A 可以选择根据 [http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity刷新片段](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)
*   活动 A 可以选择启动活动 B，它将项目添加到 F1（因此需要更新 F1）

但是，在完成 B 之后，碎片不再附加到 A 上。经过一番调试，我发现 A 的 onCreate() 方法在完成 B 后调用了包含此条目的 savedInstanceState：

```
android:support:fragments=android.support.v4.app.FragmentManagerState$41bfffe0 
```

我的理解是 FragmentActivity 在启动 B 之前保存了片段，在重新启动 A 之后，它会尝试恢复它们。稍微追查发现，在完成 B 之后，这些动作被称为：

```
Activity A: constructor called
Fragment F1: constructor called
Fragment F2: constructor called
Fragment F1: onAttach
Fragment F1: onCreate
Fragment F2: onAttach
Fragment F2: onCreate
Activity A: onCreate
Activity A: TabsAdapter created    
TabsAdapter: addTab android.widget.TabHost$TabSpec@41d949f8
Fragment F1: constructor called
TabsAdapter: addTab android.widget.TabHost$TabSpec@41d965d0
Fragment F2: constructor called
Fragment F1: onActivityCreated
Fragment F1: onCreateLoader
Fragment F2: onActivityCreated
Fragment F2: onCreateLoader
Activity A: onStart
Fragment F1: onResume
Fragment F1: onCreateLoader
Fragment F2: onResume
Fragment F2: onCreateLoader
Activity B: onStop
Fragment F1: onLoadFinished
Fragment F2: onLoadFinished 
```

每个片段有 2 个实例，显示的片段不附加到活动。

我该如何解决这个问题？我究竟做错了什么？也许如果有办法获得恢复的碎片？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:28:48.840

如果我理解正确，这就是我的建议：

1.  由于`Fragment`s F1 和 F2 位于`Activity`A 中，因此`Activity`B**不应创建或尝试**与其中任何一个交互`Fragment`。
2.  让`Activity`A 使用 开始`Activity`B [`startActivityForResult`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)，并让 B 将项目（要添加到`Fragment`F1）传回给 A。
3.  `Activity``Fragment`A 应该使用`interface`（就像您所做的那样）处理将新项目发送到F1。
4.  从 A接收到新项目（在您的`interface`方法中）后`Activity`，`Fragment`F1 应更新其数据并刷新其`View`s。

另一件需要注意的事情，确保你的`Activity`A 只添加你`Fragment`的 s 一次`onCreate`，它可以使用s`savedInstanceState`来知道它是否正在被重新创建，或者它是否是它的第一次创建。请参阅[http://developer.android.com/training/basics/fragments/fragment-ui.html](http://developer.android.com/training/basics/fragments/fragment-ui.html)。

## **编辑**

啊，现在我看到了更多你在问什么。您可以通过多种方式前往此处。

1.  使用`FragmentManager`and 标记技巧将`Fragment`s 从 中取出`ViewPager`，并根据需要更新它们。
    *   这稍微危险一些，因为它会返回`Fragment`可能不在的 s`onResume`并且需要在与之交互之前进行检查。
2.  将模型与控制器分离，例如将数据放入静态单例、SQLite DB 甚至首选项中。这将允许应用程序的其他部分访问和编辑数据，而无需传递它。
    *   在`onResume`中，您`Fragment`的 s 将需要检查和更新他们的数据，以防数据被更改。
    *   如果更改发生时s 已经存在，您还需要通过一种方法`Activity`给他们一个刷新信号。`interface``Fragment``onResume`
    *   或者，`Loader`在您`Fragment`的 s 中使用 a 来监控数据集并让它`Fragment`通过`interface`回调自动更新 的 UI。

# mysql - phpmyadmin 将文本添加到字段

> ID：15414204
> 
> 赞同：0
> 
> 时间：2013-03-14T16:00:37.303
> 
> 标签：mysql, database, phpmyadmin, field

我想将文本添加`fred`到表 products_description 中的 products_head_keywords_tag 字段，但我不想清除该字段中的其余文本。

以下内容清除了文本并添加了 fred，但我只想在该字段中已经存在的其他文本之后添加文本 fred。

```
UPDATE products_description SET products_head_keywords_tag = "fred" 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:48:42.837

这在 T-SQL 中起到了作用：

```
update products_description SET products_head_keywords_tag = convert(nvarchar(max),products_head_keywords_tag) + 'fred' 
```

我猜mysql会处理它非常相似。

编辑：在 MySQL concat() 中是要走的路：

```
UPDATE products_description SET products_head_keywords_tag = CONCAT(products_head_keywords_tag, 'fred') 
```

# android - 在一个 Activity 中使用不同的（AsyncTask）加载器

> ID：15414206
> 
> 赞同：2
> 
> 时间：2013-03-14T16:00:40.890
> 
> 标签：android, android-loader, asynctaskloader

我想在我的 Activity 中使用不同的 AsyncTaskLoaders（它们的返回类型不同），实现回调方法的最佳方法是什么？

这不起作用：

> 公共类 MyActivity 扩展 Activity 实现 LoaderManager.LoaderCallbacks<MyPojo>、LoaderManager.LoaderCallbacks<MyOtherPojo>

日食 说

```
The interface LoaderCallbacks cannot be implemented more than once with different arguments 
```

那我该怎么办？我的想法是制作活动

> 实现 LoaderManager.LoaderCallbacks<Object>

然后在回调方法中检查它是什么类型的对象，但这似乎不太优雅。有没有更好的办法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T16:20:43.977

为每个回调创建一个内部类怎么样？

```
public class MyClass extends Activity {

  private class Callback1 implements LoaderManager.LoaderCallbacks<MyPojo> {
    ...
  }
  private class Callback2 implements LoaderManager.LoaderCallbacks<MyOtherPojo> {
    ...
  }
} 
```

# android - TableLayout宽度异常

> ID：15414210
> 
> 赞同：0
> 
> 时间：2013-03-14T16:00:45.197
> 
> 标签：android, android-layout, user-interface, android-view

我有一个嵌套的 TableLayout（TableLayout->TableRow->TableLayout->TableRow）。内部 TableLayout 的宽度设置为 MATCH_PARENT。它没有扩展以匹配其父级。请参阅随附的屏幕截图。![子表布局](../Images/a1ab7d4e487eb1206b2d20999dedb413.png) ![父表行](../Images/784f8ee1a5e3df71d7b208b60d9e7eff.png)

**编辑：**

我可以使用 android:weight 和设置 android:layout_width="0dp" 来调整宽度。我仍然想了解这种行为。

# cocoa - 如何遍历 UIImage 的所有像素？

> ID：15414211
> 
> 赞同：0
> 
> 时间：2013-03-14T16:00:45.993
> 
> 标签：cocoa, core-graphics

嘿，伙计们，我目前正在尝试遍历 UIImage 的所有像素，但我实现它的方式需要很长时间。所以我认为这是我实施它的错误方式。这是我如何获得像素的 RGBA 值的方法：

```
+(NSArray*)getRGBAsFromImage:(UIImage*)image atX:(int)xx andY:(int)yy count:(int)count
{
    // Initializing the result array
    NSMutableArray *result = [NSMutableArray arrayWithCapacity:count];

    // First get the image into your data buffer
    CGImageRef imageRef = [image CGImage];                      // creating an Instance of
    NSUInteger width = CGImageGetWidth(imageRef);               // Get width of our Image
    NSUInteger height = CGImageGetHeight(imageRef);             // Get height of our Image
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); // creating our colour Space

    // Getting that raw Data out of an image
    unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));

    NSUInteger bytesPerPixel = 4;                               // Bytes per pixel defined
    NSUInteger bytesPerRow = bytesPerPixel * width;             // Bytes per row
    NSUInteger bitsPerComponent = 8;                            // Bytes per component

    CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                                 bitsPerComponent, bytesPerRow, colorSpace,
                                                 kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace); // releasing the color space

    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
    CGContextRelease(context);

    // Now your rawData contains the image data in the RGBA8888 pixel format.
    int byteIndex = (bytesPerRow * yy) + xx * bytesPerPixel;
    for (int ii = 0 ; ii < count ; ++ii)
    {
        CGFloat red   = (rawData[byteIndex]     * 1.0) / 255.0;
        CGFloat green = (rawData[byteIndex + 1] * 1.0) / 255.0;
        CGFloat blue  = (rawData[byteIndex + 2] * 1.0) / 255.0;
        CGFloat alpha = (rawData[byteIndex + 3] * 1.0) / 255.0;
        byteIndex += 4;

        UIColor *acolor = [UIColor colorWithRed:red green:green blue:blue alpha:alpha];
        [result addObject:acolor];
    }

    free(rawData);
    return result;
} 
```

这是我如何解析所有像素的代码：

```
 for (NSUInteger y = 0 ; y < self.originalPictureWidth; y++) {
        for (NSUInteger x = 0 ; x < self.originalPictureHeight; x++) {
            NSArray * originalRGBA = [ComputerVisionHelperClass getRGBAsFromImage:self.originalPicture atX:(int)x andY:(int)y count:1];
            NSArray * referenceRGBA = [ComputerVisionHelperClass getRGBAsFromImage:self.referencePicture atX:(int)referenceIndexX andY:(int)referenceIndexY count:1];
// Do something else ....
        }
    } 
```

有没有更快的方法来获取 uiimage 实例的所有 RGBA 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:08:25.533

对于每个像素，您都在生成图像的新副本，然后将其丢弃。是的，只需获取一次数据然后在该字节数组上进行处理会快得多。

但这在很大程度上取决于“做其他事情”中的内容。有许多 CoreImage 和 vImage 函数可以非常快速地进行图像处理，但您可能需要以不同的方式处理问题。这取决于你在做什么。

# javascript - Javascript 警报仅针对表中的第一行启动

> ID：15414217
> 
> 赞同：0
> 
> 时间：2013-03-14T16:01:04.667
> 
> 标签：javascript, jquery

我试图在每次单击按钮时发出警报，这是表格中的一列。

但是，只有当用户单击顶行中的按钮时，警报才会起作用。它下面的所有行都不起作用。为什么？！

```
<span class="inline" id="part-name" style="font-size:20px;font-weight:bold;"> {{unipart.part}}</span>

    <td id ="Buy">
                <a class="btn btn-warning" href="{{offer.buynow_url}}">BUY NOW </a>
            </td>

<script type="text/javascript">
$('#Buy').click(function() {
   var myPart = $('#part-name').text();
   alert (myPart);
});
</script> 
```

`id="Buy"`注意我在`td`标签和标签中都尝试过`a`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:05:20.920

如果要绑定到多个 DOM 元素，请绑定到它们共享的类（创建一个新类并在每个元素上使用该类）。

您的 DOM 结构似乎有些混乱，但如果我理解正确，这应该可以。

```
<span class="inline" id="part-name" class="part-name" style="font-size:20px;font-weight:bold;"> {{unipart.part}}</span>

<td class="buy" id ="Buy">
            <a class="btn btn-warning" href="{{offer.buynow_url}}">BUY NOW </a>
        </td>

<script type="text/javascript">
$('.buy').click(function() {
   var myPart = $(this).closest('tr').children('.part-name').text();
   alert (myPart);
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:06:07.437

而不是 ID“购买”，给类名“购买”，然后使用下面的代码

```
 $('.Buy').on('click',function(){
     alert($('#part-name').text());
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:07:35.600

这是因为您正在通过 id 选择 s。Id 应该是唯一的，所以 jQuery 抢占了第一个。如果你使用类，它会工作得更好。

```
<span class="inline" id="part-name" style="font-size:20px;font-weight:bold;"> {{unipart.part}}</span>

<td class='Buy'>
  <a class="btn btn-warning" href="{{offer.buynow_url}}">BUY NOW </a>
</td>

<script type="text/javascript">
$('.Buy').click(function() {
  var myPart = $('#part-name').text();
  alert (myPart);
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T16:10:21.110

也许你可能想做这样的事情：

```
 <span class="inline" id="part-name-{{partID}}" style="font-size:20px;font-weight:bold;"> {{unipart.part}}</span>

    <td class ="Buy">
                <a class="btn btn-warning" href="{{offer.buynow_url}}" partId="{{partID}}">BUY NOW </a>
            </td>

<script type="text/javascript">
$('.Buy').click(function() {
   var myPart = $("#part-name-"+$(this).attr("partId")).text();
   alert (myPart);
});
</script> 
```

除非您使用 HTML5，否则这将破坏验证。

# java - 将一个数组的内容复制到另一个数组并删除旧数组的内容

> ID：15414225
> 
> 赞同：0
> 
> 时间：2013-03-14T16:01:26.693
> 
> 标签：java, android, arrays, copy

单击按钮后，我试图将数组的内容复制到另一个数组。我希望 oldArray 在复制到 newArray 后清除以前的数据。我有这个代码，我迷路了。谁能指导我如何做到这一点？这是我到目前为止所拥有的。

```
 final String [] oldArray;

    oldArray = new String[5];
    oldArray[0] = "c";
    oldArray[1] = "h";
    oldArray[2] = "a";
    oldArray[3] = "r";
    oldArray[4] = "m";

    for (i = 0; i < 5; i++);

        {
            oldarrayOut.setText(oldArray[i]);
        }

    bOk.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            String[] newArray = new String[5];

            for (i = 0; i < 5; i++);
                {
                    newArray[i] = oldArray[i];
                    newarrayOut.setText(newArray[i]);
                }

        }
    }); 
```

如果我的代码有问题，请随时通知我。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:02:54.773

只需使用：

```
oldArray = new String[5]; 
```

或者

```
oldArray = null; 
```

所以旧数组不会指向真正的旧数组，而是指向一个新数组。

如果您知道要再次使用它，并且知道数组的长度，第一个会更好。另一个需要安全处理，因为如果您访问它可能会导致 NPE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:05:47.953

我不确定 oldarrayOut 和 newarrayOut 字段在做什么，但它似乎把

```
oldArray = null; 
```

在您的 onClick 方法中的 for 循环之外会执行此操作。

您似乎成功地复制了数组，只是在完成复制后没有初始化 oldArray 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:06:38.483

在 for 循环之后有一个分号：

```
for (i = 0; i < 5; i++);
                       ^-- here 
```

它将 for 循环转换为在每次迭代中什么都不做的循环。去掉它。

要清除旧数组，只需使用

```
for (i = 0; i < 5; i++) {
    newArray[i] = oldArray[i];
    oldArray[i] = null;
    newarrayOut.setText(newArray[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T16:06:41.283

```
String[] newArray = (String[]) oldArray.clone(); 
```

将一个数组的内容复制到另一个。试试这个将 oldArray 复制到 newArray。

```
Arrays.fill( oldArray, null ); 
```

删除旧数组的内容

# c# - DataVisualization.Chart 的图形和工具提示样式化

> ID：15414229
> 
> 赞同：2
> 
> 时间：2013-03-14T16:01:32.247
> 
> 标签：c#, .net, xaml, charts, styles

我正在创建 DataVisualization.Chart 类型的 UserControl 组件。我正在构建基于 url 示例的组件：[http://www.dotnetcurry.com/ShowArticle.aspx?ID=553](http://www.dotnetcurry.com/ShowArticle.aspx?ID=553)。此图表将生成选择为柱、条、线、饼图类型的图表...在组件的构造中，我插入的数据源比通过另一个视图传递的数据源。到现在为止还挺好。正常生成所有类型的图表。我现在需要做的是对组件进行 3 次修改。但我找不到解决这些修改的方法：

*   当用户将鼠标放在图形生成的值上时，工具提示出现对象的值。我需要的是工具提示文本显示为 IndependentValuePath，这将是名称 + 值，格式如下：“名称（价值）”;
*   生成图表时，它会根据图表的 x 轴或 y 轴（如图所示）作为一种标签插入。我需要删除它（图片中的示例）；
*   对于 Column 类型的图形（可能还有其他尚未确认的图形），矩形的轮廓必须与内部颜色相同。除了颜色相同之外，每个矩形都会根据预定义的范围改变颜色，这将作为上一个 View 的 DataSource 传递。这是什么：如果值低于 200，则颜色为红色，如果在 200 到 350 之间，则为黄色……以此类推。我将有大约 5 个限制；

![示例修改](../Images/951093e05d3448ca3aa8d69bb35768e9.png)

PS：最后**THIS**是**tooltip**。

有谁知道我如何对这些图表和工具提示进行样式化？

最好的问候，古斯塔沃

编辑：这是我的用户控制图：

```
<UserControl x:Class="Library.Core.GUI.WPF.Controls.ChartUCControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:ct="clr-namespace:Library.Core.GUI.WPF.Controls"
         xmlns:chart="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit"
         xmlns:sys="clr-namespace:System;assembly=mscorlib"
         mc:Ignorable="d" 
         x:Name="ChartUCControl1">
<UserControl.Resources>

    <Style TargetType="chart:ColumnDataPoint">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type chart:ColumnDataPoint}">

                        <!--<Border BorderThickness="0" Background="Red" ToolTip="asdfasdf"/>-->
                        <Rectangle>
                            <Rectangle.Fill>
                                <LinearGradientBrush>
                                    <GradientStop Color="Black" Offset="0"/>
                                    <GradientStop Color="White" Offset="1"/>
                                </LinearGradientBrush>
                            </Rectangle.Fill>
                        </Rectangle>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</UserControl.Resources>

<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="auto"/>
    </Grid.RowDefinitions>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <ScrollViewer VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Width="auto"
                      HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" >
            <chart:Chart Name="chartView" Grid.Row="0" Title="{Binding TitleGraphic, Mode=TwoWay, ElementName=ChartUCControl1, UpdateSourceTrigger=PropertyChanged}" 
                       ScrollViewer.HorizontalScrollBarVisibility="Auto"
                       ScrollViewer.VerticalScrollBarVisibility="Auto"
                       ScrollViewer.IsDeferredScrollingEnabled="True"
                       Width="{Binding WidthScrollViewer, Mode=TwoWay, ElementName=ChartUCControl1, UpdateSourceTrigger=PropertyChanged}"
                       MinWidth="{Binding MinWidthScrollViewer, Mode=TwoWay, ElementName=ChartUCControl1, UpdateSourceTrigger=PropertyChanged}"
                       HorizontalAlignment="{Binding HorizontalAlignmentGraphic, Mode=TwoWay, ElementName=ChartUCControl1, UpdateSourceTrigger=PropertyChanged}"  >

                <chart:Chart.Series>
                    <chart:ColumnSeries >
                        <ToolTipService.ToolTip>
                            <ContentControl Content="asdçlfkj"/>
                        </ToolTipService.ToolTip>
                        <chart:ColumnSeries.IndependentAxis>
                            <chart:CategoryAxis Orientation="X" Visibility="Visible" Height="0"/>
                        </chart:ColumnSeries.IndependentAxis>
                    </chart:ColumnSeries>
                </chart:Chart.Series>
                <!--<ToolTipService.ToolTip>
                    <ContentControl Content="{TemplateBinding IndependentValue}" />
                </ToolTipService.ToolTip>-->
                <!--PreviewMouseMove="chartView_PreviewMouseMove"-->

                <!--<chart:Chart.Series>
                    <chart:ColumnSeries>
                        <chart:DataPointSeries.DataPointStyle>
                            <Style TargetType="chart:ColumnDataPoint">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="{x:Type chart:ColumnDataPoint}">
                                            <Border BorderBrush="Black" >
                                                <ToolTipService.ToolTip>
                                                <ContentControl Content="{Binding ToolTip}"/>
                                            </ToolTipService.ToolTip>
                                                <Border BorderBrush="Black" BorderThickness="1"/>
                                                <ToolTipService.ToolTip>
                                                    <ContentControl Content="asçldfkj"/>
                                                </ToolTipService.ToolTip>
                                            </Border>
                                            <ToolTip Content="çlkjasf"/>

                                            <Rectangle>
                                                <Rectangle.Fill>
                                                    <SolidColorBrush Color="Blue"/>
                                                </Rectangle.Fill>
                                            </Rectangle>

                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </chart:DataPointSeries.DataPointStyle>
                    </chart:ColumnSeries>
                </chart:Chart.Series>-->

                <!--<Style TargetType="{x:Type chart:ColumnDataPoint}">
                            <Setter Property="Background" Value="Orange" />
                            <Setter Property="BorderBrush" Value="Black" />
                            <Setter Property="BorderThickness" Value="1" />
                            <Setter Property="IsTabStop" Value="False" />
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type chart:ColumnSeries}">
                                        <Border BorderBrush="Azure" BorderThickness="10" Opacity="10" x:Name="Root">
                                            <Grid Background="Black">
                                                <Rectangle>
                                                    <Rectangle.Fill>
                                                        <LinearGradientBrush>
                                                            <GradientStop Color="Black" Offset="0" />
                                                            <GradientStop Color="Black" Offset="1" />
                                                        </LinearGradientBrush>
                                                    </Rectangle.Fill>
                                                </Rectangle>
                                                <Border BorderBrush="#ccffffff" BorderThickness="1">
                                                    <Border BorderBrush="#77ffffff" BorderThickness="1" />
                                                </Border>
                                                <Rectangle x:Name="SelectionHighlight" Fill="Red" Opacity="0" />
                                                <Rectangle x:Name="MouseOverHighlight" Fill="White" Opacity="0" />
                                            </Grid>
                                            <ToolTipService.ToolTip>
                                                <ContentControl Content="as" />
                                            </ToolTipService.ToolTip>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>-->

                <!--<ToolTipService.ToolTip>
                                                    <ContentControl Content="{Binding Identificacao}"/>
                                                </ToolTipService.ToolTip>-->
                <!--<Grid>
                                                <Rectangle>
                                                    <Rectangle.Fill>
                                                        <LinearGradientBrush>
                                                            <GradientStop Color="Blue" Offset="0"/>
                                                            <GradientStop Color="Black" Offset="1"/>
                                                        </LinearGradientBrush>
                                                    </Rectangle.Fill>
                                                </Rectangle>
                                            </Grid>-->

                <chart:Chart.Axes>
                    <chart:LinearAxis Orientation="X" Interval="{Binding IntervalAxis, ElementName=ChartUCControl1, Mode=TwoWay}" 
                                    MouseEnter="chartView_PreviewMouseMove"
                                    Maximum="{Binding MaximumAxis, ElementName=ChartUCControl1, Mode=TwoWay}"/>
                    <!-- This section configures labels of X Orientation -->
                    <chart:CategoryAxis Orientation="X" Visibility="Hidden"/>
                </chart:Chart.Axes>

                <chart:Chart.LegendStyle>
                    <Style TargetType="Control">
                        <Setter Property="Width" Value="0"/>
                        <Setter Property="Height" Value="0"/>
                    </Style>
                </chart:Chart.LegendStyle>

                <chart:Chart.PlotAreaStyle>
                    <Style TargetType="Grid">
                        <Setter Property="Background" Value="Transparent"/>
                        <!--<Setter Property="ToolTip" Value="{x:Null}"/>-->
                    </Style>
                </chart:Chart.PlotAreaStyle>
            </chart:Chart>
        </ScrollViewer>
    </Grid>
</Grid>
</UserControl> 
```

**如果**需要查看我的代码隐藏：

```
namespace Library.Core.GUI.WPF.Controls
{
    public partial class ChartUCControl : UserControl, INotifyPropertyChanged
    {
        #region Constructors

        public ChartUCControl()
        {
            InitializeComponent();
        }

        #endregion

        #region ChartType Property

        public static ChartTypes GetChartType(DependencyObject d)
        {
            return (ChartTypes)d.GetValue(ChartTypeProperty);
        }

        public static void SetChartType(DependencyObject d, ChartTypes value)
        {
            d.SetValue(ChartTypeProperty, value);
        }

        public static readonly DependencyProperty ChartTypeProperty =
            DependencyProperty.RegisterAttached(
                "ChartType",
                typeof(ChartTypes),
                typeof(ChartUCControl),
                new FrameworkPropertyMetadata(ChartTypeChangedCallback)
                );

        private static void ChartTypeChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            Chart instance = (d as Chart);
            if (instance.IsNull())
                return;

            SetChartType(d, (ChartTypes)e.NewValue);

            ChartUCControl instance2 = (d as ChartUCControl);
        }

        private ChartTypes chartType;
        public ChartTypes ChartType
        {
            get { return chartType; }
            set { chartType = value; }
        }

        #endregion

        #region ChartAreaSelected Property

        public static readonly DependencyProperty ChartAreaProperty =
            DependencyProperty.RegisterAttached(
                "ChartArea",
                typeof(Boolean),
                typeof(ChartUCControl),
                        new FrameworkPropertyMetadata(ChartAreaChangedCallback));

        private static void ChartAreaChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            ChartUCControl instance = (d as ChartUCControl);

            if (instance.IsNull())
                return;

            instance.ChartArea = (Boolean)e.NewValue;
        }

        private Boolean chartArea;
        public Boolean ChartArea
        {
            get { return chartArea; }
            set
            {
                chartArea = value;
                if (value)
                {
                    cmbChart.SelectedItem = ChartTypes.Area;
                    DoRenderizeGraphic();
                }
            }
        }

        #endregion

        #region ChartBarSelected Property

        public static readonly DependencyProperty ChartBarProperty =
            DependencyProperty.RegisterAttached(
                "ChartBar",
                typeof(Boolean),
                typeof(ChartUCControl),
                new FrameworkPropertyMetadata(ChartBarChangedCallback));

        private static void ChartBarChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            ChartUCControl instance = (d as ChartUCControl);

            if (instance.IsNull())
                return;

            instance.ChartBar = (Boolean)e.NewValue;
        }

        private Boolean chartBar;
        public Boolean ChartBar
        {
            get { return chartBar; }
            set
            {
                chartBar = value;
                if (value)
                {
                    cmbChart.SelectedItem = ChartTypes.Bar;
                    DoRenderizeGraphic();
                }
            }
        }

        #endregion

        #region ChartColumnSelected Property

        public static readonly DependencyProperty ChartColumnProperty =
            DependencyProperty.RegisterAttached(
                "ChartColumn",
                typeof(Boolean),
                typeof(ChartUCControl),
                new FrameworkPropertyMetadata(ChartColumnChangedCallback)
                );

        private static void ChartColumnChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            ChartUCControl instance = (d as ChartUCControl);
            if (instance.IsNull())
                return;

            instance.ChartColumn = (Boolean)e.NewValue;
        }

        private Boolean chartColumn;
        public Boolean ChartColumn
        {
            get { return chartColumn; }
            set
            {
                chartColumn = value;

                if (value)
                {
                    cmbChart.SelectedItem = ChartTypes.Columns;
                    DoRenderizeGraphic();
                }
            }
        }

        #endregion
        #region ChartLinesSelected Property

        public static readonly DependencyProperty ChartLinesProperty =
            DependencyProperty.RegisterAttached(
                "ChartLines",
                typeof(Boolean),
                typeof(ChartUCControl),
                new FrameworkPropertyMetadata(ChartLinesChangedCallback));

        private static void ChartLinesChangedCallback(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            ChartUCControl instance = (d as ChartUCControl);
            if (instance.IsNull())
                return;

            instance.ChartLines = (Boolean)e.NewValue;
        }

        private Boolean chartLines;
        public Boolean ChartLines
        {
            get { return chartLines; }
            set
            {
                chartLines = value;
                if (value)
                {
                    cmbChart.SelectedItem = ChartTypes.Lines;
                    DoRenderizeGraphic();
                }
            }
        }

        #endregion

        #region FieldForIndependentValue Property

        /// <summary>
        /// String containing list of the only characters allowed, others will be filtered
        /// </summary>
        public String FieldForIndependentValue
        {
            get { return (String)GetValue(FieldForIndependentValueProperty); }
            set { SetValue(FieldForIndependentValueProperty, value); }
        }

        public static readonly DependencyProperty FieldForIndependentValueProperty =
            DependencyProperty.Register("FieldForIndependentValue", typeof(String), typeof(ChartUCControl));

        #endregion

        #region FieldForDependentValue Property

        /// <summary>
        /// String containing list of the only characters allowed, others will be filtered
        /// </summary>
        public String FieldForDependentValue
        {
            get { return (String)GetValue(FieldForDependentValueProperty); }
            set { SetValue(FieldForDependentValueProperty, value); }
        }

        public static readonly DependencyProperty FieldForDependentValueProperty =
            DependencyProperty.Register("FieldForDependentValue", typeof(String), typeof(ChartUCControl));

        #endregion

        #region TitleGraphic Property

        public String TitleGraphic
        {
            get { return (String)base.GetValue(TitleGraphicProperty); }
            set { base.SetValue(TitleGraphicProperty, value); }
        }

        public static readonly DependencyProperty TitleGraphicProperty =
            DependencyProperty.RegisterAttached(
                "TitleGraphic",
                typeof(String),
                typeof(ChartUCControl),
                new FrameworkPropertyMetadata(null)
                );

        #endregion

        #region MinWidthScrollViewer Property

        public String MinWidthScrollViewer
        {
            get { return (String)base.GetValue(MinWidthScrollViewerProperty); }
            set { base.SetValue(MinWidthScrollViewerProperty, value); }
        }

        public static readonly DependencyProperty MinWidthScrollViewerProperty =
            DependencyProperty.RegisterAttached(
            "MinWidthScrollViewer",
            typeof(String),
            typeof(ChartUCControl),
            new FrameworkPropertyMetadata(null));

        #endregion

        #region Width ScrollViewer Property

        public String WidthScrollViewer
        {
            get { return (String)base.GetValue(WidthScrollViewerProperty); }
            set { base.SetValue(WidthScrollViewerProperty, value); }
        }

        public static readonly DependencyProperty WidthScrollViewerProperty =
            DependencyProperty.RegisterAttached(
                "WidthScrollViewer",
                typeof(String),
                typeof(ChartUCControl),
                new FrameworkPropertyMetadata(null)
                );

        #endregion

        #region ItemsSource Property

        public IEnumerable ItemsSource
        {
            get { return (IEnumerable)base.GetValue(ItemsSourceProperty); }
            set { base.SetValue(ItemsSourceProperty, value); }
        }

        public static readonly DependencyProperty ItemsSourceProperty =
            DependencyProperty.RegisterAttached(
            "ItemsSource",
            typeof(IEnumerable),
            typeof(ChartUCControl),
            new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.AffectsRender));

        #endregion

        #region Methods

        private void ImageButton_Click_1(object sender, RoutedEventArgs e)
        {
            DoRenderizeGraphic();
        }

        public void DoRenderizeGraphic()
        {
            while (this.chartView.Series.Count() - 1 >= 0)
                this.chartView.Series.Remove(this.chartView.Series[0]);

            DataPointSeries objChar = null;

            if (!cmbChart.SelectedItem.IsNull())
                switch ((ChartTypes)cmbChart.SelectedValue)
                {
                    case ChartTypes.Bar:
                        this.chartView.Series.Add(new BarSeries());
                        objChar = this.chartView.Series[0] as BarSeries;
                        break;

                    case ChartTypes.Columns:
                        this.chartView.Series.Add(new ColumnSeries());
                        objChar = this.chartView.Series[0] as ColumnSeries;

                        break;

                    case ChartTypes.Pie:
                        this.chartView.Series.Add(new PieSeries());
                        objChar = this.chartView.Series[0] as PieSeries;
                        break;

                    case ChartTypes.Lines:
                        this.chartView.Series.Add(new LineSeries());
                        objChar = this.chartView.Series[0] as LineSeries;
                        break;

                    case ChartTypes.Area:
                        this.chartView.Series.Add(new AreaSeries());
                        objChar = this.chartView.Series[0] as AreaSeries;
                        break;

                    default:
                        break;
                }

            if (!objChar.IsNull())
            {
                objChar.IsSelectionEnabled = true;

                objChar.DependentValuePath = FieldForDependentValue;
                objChar.IndependentValuePath = FieldForIndependentValue;
                objChar.ItemsSource = ItemsSource;

                if (this.chartView.Axes.Count > 0
                   && (!this.chartView.ActualAxes[0].IsNull() || !this.chartView.ActualAxes[0].DependentAxes.IsNull()))
                    foreach (var item in this.chartView.ActualAxes[0].DependentAxes)
                    {
                        this.chartView.ActualAxes[0].DependentAxes.Remove(item);
                    }

            }
        }

        #endregion

        #region Properties

        private String[] chartTypesList;
        public String[] ChartTypesList
        {
            get { return chartTypesList; }
            set
            {
                chartTypesList = value;
                OnPropertyChanged("ChartTypesList");
            }
        }

        private String chartTypeSelectedValue;
        public String ChartTypeSelectedValue
        {
            get { return chartTypeSelectedValue; }
            set
            {
                chartTypeSelectedValue = value;
                OnPropertyChanged("ChartTypeSelectedValue");
            }
        }

        #endregion

        #region INotifyPropertyChanged event and method

        public event PropertyChangedEventHandler PropertyChanged;

        private void OnPropertyChanged(String info)
        {
            if (!PropertyChanged.IsNull())
                PropertyChanged(this, new PropertyChangedEventArgs(info));
        }

        #endregion

        #region Preview Mouse events

        private void chartView_PreviewMouseMove(object sender, System.Windows.Input.MouseEventArgs e)
        {
            var t = ((e.OriginalSource) as FrameworkElement).DataContext;

            if (!t.IsNull() && e.OriginalSource.GetType().Equals(typeof(System.Windows.Shapes.Rectangle)))
            {
                Object a = null;

                foreach (PropertyInfo item in ((e.OriginalSource) as FrameworkElement).DataContext.GetType().GetProperties())
                {
                    a = item.GetValue(((e.OriginalSource) as FrameworkElement).DataContext, null);
                    break;
                }

                if (a == null)
                    a = "";
                ((FrameworkElement)(e.OriginalSource)).ToolTip = a;
            }
        }

        #endregion

        #region ReflectionReturn Seekers

        public List<Control> FindAllControls(DependencyObject parent)
        {
            var list = new List<Control>() { };

            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(parent); i++)
            {
                var child = VisualTreeHelper.GetChild(parent, i);
                if (child is Control)
                {
                    list.Add(child as Control);

                }
                list.AddRange(FindAllControls(child));
            }
            return list;
        }

        public IEnumerable<FieldInfo> GetAllFields(Type t)
        {
            if (t.IsNull())
                return Enumerable.Empty<FieldInfo>();

            BindingFlags flags = BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Static | BindingFlags.Instance;

            return t.GetFields(flags).Union(GetAllFields(t.BaseType));
        }

        #endregion

    }
    #region Enum

    public enum ChartTypes
    {
        Bar,
        Columns,
        Pie,
        Lines,
        Area
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:26:33.910

**答案 1**

您可以在`ColumnDataPoint`样式中声明工具提示。最简单的方法是向模型添加一个新属性并绑定到它。

例如，如果图表项类有 2 个属性，则为工具提示添加第 3 个属性：

```
public class ChartItem
{
    public string Title { get; set; } // coil456

    public double Value { get; set; } // 334

    public string TooltipLabel 
    { 
        get { return string.Format("{0}({1})", this.Title, this.Value); } // coil456(334)
    }
} 
```

然后为数据点样式添加绑定：

```
<Style x:Key="ColumnDataPointStyle" TargetType="chart:ColumnDataPoint">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type chart:ColumnDataPoint}">
                <Rectangle ToolTipService.ToolTip="{Binding TooltipLabel}">
                    <Rectangle.Fill>
                        <LinearGradientBrush>
                            <GradientStop Color="Black" Offset="0"/>
                            <GradientStop Color="White" Offset="1"/>
                        </LinearGradientBrush>
                    </Rectangle.Fill>
                </Rectangle>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

更改后的行：`ToolTipService.ToolTip="{Binding TooltipLabel}"`. 我使用了一个简单的绑定，因为我绑定到 DataContext，而不是模板。

然后更改您的代码隐藏，以便列系列使用以下样式：

```
case ChartTypes.Columns:
    objChar = new ColumnSeries();
    objChar.DataPointStyle = (Style)this.Resources["ColumnDataPointStyle"];
    this.chartView.Series.Add(objChar);

    break; 
```

同样，您可以使用`AxisLabelStyle`属性和样式为轴添加工具提示`NumericAxisLabel`。

**答案 3** 一切都以同样的方式：向模型添加一个属性并绑定到它。

C# 模型

```
public class ChartItem
{
    public string Title { get; set; }

    public double Value { get; set; }

    public string TooltipLabel 
    { 
        get { return string.Format("{0}({1})", this.Title, this.Value); } 
    }

    public SolidColorBrush ColumnBrush
    {
        get 
        { 
            if (this.Value < 200)
            {
                return Brushes.Red;
            }
            else if (this.Value < 350)
            {
                return Brushes.Yellow;
            }
            else
            {
                return Brushes.Green;
            }
        } 
    }
} 
```

模板

```
<Style x:Key="ColumnDataPointStyle" TargetType="chart:ColumnDataPoint">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type chart:ColumnDataPoint}">
                <Rectangle ToolTipService.ToolTip="{Binding TooltipLabel}" Fill="{Binding ColumnBrush}">
                </Rectangle>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# asp.net - 如何将工作按钮放在数据绑定控件中

> ID：15414231
> 
> 赞同：0
> 
> 时间：2013-03-14T16:01:34.183
> 
> 标签：asp.net, webforms, custom-controls, postback, page-lifecycle

如果我制作自己的自定义控件，我必须确保在 OnInit 中添加所有控件，否则回发将不起作用。ProcessPostData 在 Init() 和 Load() 之间调用，因此如果我在 Load() 中添加我的控件，则在我的控件出现在页面上之前已经完成了发布数据步骤。

但是，如果我在 ASP.NET 转发器中放置一个按钮，并且仅在 Page_Load() 中将数据绑定到转发器，转发器将触发 ItemCommand 事件，即使在初始化期间控件不在页面上也是如此。这是如何运作的？如何制作自己的自定义控件，将按钮添加到 Load() 或 PreRender() 中的控件？

我想要这样的东西：

```
public class WrappedButton : WebControl
{
    protected override void OnPreRender(EventArgs e)
    {
        base.OnPreRender(e);
        var button = new Button { Text = "Hello" };
        button.Click += SomeCommand;
        Controls.Add(button);
    }

    private void SomeCommand(object sender, EventArgs e)
    {
        Page.Response.Write("This won't get executed");
    }
} 
```

# regex - 如何解析文件以包含 perl 中字符之间的行？

> ID：15414232
> 
> 赞同：-1
> 
> 时间：2013-03-14T16:01:35.650
> 
> 标签：regex, perl

如何使用文件中的perl打印+s之间的行，包括+s？我在一个文件中有这些行。

```
blah blah
+++++++++++++++++++++++++++++++++
this line should be included.
this line should be included too.
+++++++++++++++++++++++++++++++++
abcd  100101001010 
```

所需的输出：

```
+++++++++++++++++++++++++++++++++
this line should be included.
this line should be included too.
+++++++++++++++++++++++++++++++++ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:11:23.570

您可以像这样使用范围运算符`...`：

```
perl -nlwe 'print if /^\++$/ ... /^\++$/' input.txt 
```

三点范围运算符有一个特殊功能，可以在这里使用。来自[perldoc perlop](http://perldoc.perl.org/perlop.html#Range-Operators)

> [“双点”“..”运算符]可以测试正确的操作数，并在它变为真的相同评估中变为假（如在 awk 中），但它仍然返回一次真。如果您不希望它在下一次评估之前测试正确的操作数，如在 sed 中，只需使用三个点（“...”）而不是两个点。在所有其他方面，“...”的行为就像“..”一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:05:09.713

像这样的东西可以工作：

```
while(<>){
    print if /^\++$/ .. /^\++$/;
} 
```

# django - pip install django-adaptors 覆盖 1.5 版本的 Django

> ID：15414235
> 
> 赞同：1
> 
> 时间：2013-03-14T16:01:57.380
> 
> 标签：django

当我使用 它安装[django-adaptors](http://django-adaptors.readthedocs.org/en/latest/)`pip install django-adaptors`时，它似乎也在安装 django 1.4，这会覆盖我的 django 1.5 安装。

如何在不覆盖我的 Django 版本的情况下安装 django-adaptors？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:08:25.140

`pip install django-adaptors --no-deps`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:09:07.863

您可以`pip install django -U`在安装后简单地运行`django-adaptors`. 这将为您提供 django-adaptors、*它的所有依赖*项和 django 1.5。您也可以简单地下载`django-adaptors`并更改其依赖文件。

这种方法的优点是当您移动到生产服务器（例如在*结构*脚本中）时，它很容易重复。

不过需要注意的是：阅读[django 1.5 发行说明](https://docs.djangoproject.com/en/1.5/releases/)以了解您是否可能遇到任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T06:23:18.540

我刚刚上传了 django-adaptors 0.2.4，它集成了 Andrew Ingram 来解决这个问题。

那么，你只需要再做一次：

```
pip install django-adaptors 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T16:13:18.197

这是包的问题`setup.py`。您可以在此处查看源代码：[https ://raw.github.com/anthony-tresontani/django-adaptors/master/setup.py](https://raw.github.com/anthony-tresontani/django-adaptors/master/setup.py)

它定义`'Django==1.4'`而不是`'Django>=1.4'`安装 Django 1.4，因此会覆盖您的 1.5 安装。

我所能建议的就是改变你上面的`requirements.txt`so ，所以当pip安装1.5时，将在安装1.4之后安装。`django-adaptors``Django==1.5``django-adaptors`

# asp.net-mvc - N2CMS MVC - 垃圾箱下的新页面

> ID：15414236
> 
> 赞同：0
> 
> 时间：2013-03-14T16:01:59.573
> 
> 标签：asp.net-mvc, n2cms

我正在使用 N2 CMS（采用模板 Dinamico MVC 项目）。我还创建了一个新模型“TextPage”和相应的控制器。我用“TextPageRegistration”类注册了页面。我将此类型的父类型设置为起始页。但是当我运行该站点时，我会在“垃圾箱”下看到此页面，而不是在“起始页”下。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:04:52.330

这些东西只控制在什么类型的页面下可以创建什么类型的页面（即，您可以创建一个“TextPage”类型的页面作为结构中“起始页面”类型的页面的子级。

如果垃圾箱中有东西，那是因为您（或其他人）删除了该页面。尝试将其移回，或创建一个新页面？

# paypal - 如何在涉及在线支付的页面中安全地测试代码更新？

> ID：15414237
> 
> 赞同：0
> 
> 时间：2013-03-14T16:02:00.093
> 
> 标签：paypal

我有一个正在生产的客户网站，其中包含 PayPal 结帐和 PayPal pro 信用卡付款。有时我需要更新代码，但我想 100% 确定代码有效。但是我无法对其进行测试，因为我必须为此付出真正的代价。

你如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:36:41.690

您可以针对沙盒运行测试事务并测试不同的 API 调用。您需要在 developer.paypal.com 上设置一个开发者帐户。然后创建几个测试账户，例如卖家账户和买家账户。为您的测试卖家账户生成 API 凭证。然后将它们插入您的代码，并针对该帐户进行测试 API 调用。您可以设置您的测试账户来模仿您的真实账户。

# python - 来自 Python 的 awk：错误的子进程参数？

> ID：15414244
> 
> 赞同：2
> 
> 时间：2013-03-14T16:02:15.217
> 
> 标签：python, awk, pattern-matching, subprocess

我需要在**Python中运行以下（工作）****命令**：

 **```
ip route list dev eth0 | awk ' /^default/ {print $3}' 
```

使用`subprocess`，我必须执行以下操作：

```
first = "ip route list dev eth0"
second = "awk ' /^default/ {print $3}'"
p1 = subprocess.Popen(first.split(), stdout=subprocess.PIPE)
p2 = subprocess.Popen(second.split(), stdin=p1.stdout, stdout=subprocess.PIPE)
p1.stdout.close()  # Allow p1 to receive a SIGPIPE if p2 exits.
output = p2.communicate()[0] 
```

出了点问题`p2`。我得到：

```
>>> awk: cmd. line:1: '
awk: cmd. line:1: ^ invalid char ''' in expression 
```

我该怎么办？在终端上它工作得很好。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T16:06:13.873

`split`在任何空格上拆分，包括单引号参数内的空格。如果你真的需要，请使用`shlex.split`：

```
import shlex
p2 = subprocess.Popen(shlex.split(second), stdin=p1.stdout, stdout=subprocess.PIPE) 
```

然而，直接指定命令通常更有意义：

```
first = ['ip', 'route', 'list', 'dev', 'eth0']
second = ['awk', ' /^default/ {print $3}']
p1 = subprocess.Popen(first, stdout=subprocess.PIPE)
p2 = subprocess.Popen(second, stdin=p1.stdout, stdout=subprocess.PIPE) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T16:08:03.130

不是最佳解决方案，但在等待最佳答案时，您仍然可以这样做：

```
cmd = "ip route list dev eth0 | awk ' /^default/ {print $3}'"
p2 = subprocess.Popen(cmd, stdin=subprocess.PIPE, stdout=subprocess.PIPE, shell=True) 
```**

# asp.net - 使用 ASP.net 和 Access 数据库从 SQL 注入中保护网站

> ID：15414246
> 
> 赞同：4
> 
> 时间：2013-03-14T16:02:32.013
> 
> 标签：asp.net, sql, ms-access, security, sql-injection

我目前有一个正常注册和登录的网站，用 ASP.net 编码。我正在使用 Access 数据库，同时使用我朋友编写的 C# 类来处理大多数数据库操作（executeQuery、executeRead、isExits...）。

现在我几乎完成了我的网站的构建，我想开始添加安全性 - 主要是添加到我的数据库中。我已经搜索了一段时间来寻找有关该主题的教程，但是除了一篇旧的 microsoft msdn 文章之外，我找不到任何好的东西，我无法真正让它的代码工作。我现在最远的就是不允许在用户名和密码中使用任何危险字符（例如'，--，;），但感觉好像这是我可以使用的更糟糕的解决方案（为什么不应该我的用户不使用这个字符吗？）。

我认为我找到的最佳解决方案是在声明后以某种方式将变量插入查询字符串（与“WHERE username=@user”或类似的东西有关），但我无法使用它访问并使用我的 oleDBManager。

这是我目前的注册码。handle() 正在从字符串中删除所有 '，而 Validate() 检查字符串中的危险部分。

```
 string username = user.Text;
        string password = pass.Text;
        bool isThingy = false;
        if (handle(ref password)) isThingy = true;
        if (handle(ref username)) isThingy = true;

        if (username != "" && username != null)
        {
            if (password != "" && password != null)
            {
                if (Validate(username, password))
                {
                    if ((db.IsExist("SELECT * FROM Table1 WHERE username='" + username + "'") == false))
                    {
                        int a = db.ExecuteQuery("INSERT INTO `Table1`(`username`, `password`, `logins`, `email`, `fname`, `lname`, `country`, `city`, `birthday`, `userid`) VALUES ('" + username + "', '" + password + "', '0', '', '', '', '', '', '', '" + Convert.ToString(Convert.ToInt32(db.ExecuteCellRead("SELECT MAX(userid) FROM Table1")) + 1) + "');");

                        if (!isThingy) errorLabel.Text = "Your user has been successfully registered";
                        else errorLabel.Text = "The ' token is invalid. your user was registered absence the '.";
                    }
                    else
                        errorLabel.Text = "This username is already taken";
                }
                else errorLabel.Text = "Invalid name format";

            }
            else errorLabel.Text = "Please enter a password";
        }
        else errorLabel.Text = "Please enter a user name"; 
```

至于 oleDBManager （在我的代码中命名为 db ）：

```
 private OleDbConnection link; // The link instance
    private OleDbCommand command; // The command object
    private OleDbDataReader dataReader; // The data reader object
    private OleDbDataAdapter dataAdapter; // the data adapter object
    private DataTable dataTable; // the data table object
    private string dbName; // the Database filename
    private int version; // the usersTableG office version
    private string connectionString; // the connection string for the database connection
    private string provider; // the matching driver string for the connection string
    private string path; // the path to the database file

...

    public int ExecuteQuery(string query)
    {
        this.link.Open();
        int rowsAffected;
        // ---
        this.command = new OleDbCommand(query, this.link);
        try
        {
            rowsAffected = this.command.ExecuteNonQuery();
        }
        catch (InvalidOperationException e)
        {
            if (e.Data == null)
                throw;
            else
                rowsAffected = -1;
        }
        finally
        {
            this.command.Dispose();
            this.link.Close();
        }
        // ---
        return rowsAffected;
    }

    public bool IsExist(string query)
    {
        this.link.Open();
        // ---
        this.command = new OleDbCommand(query, this.link);
        this.dataReader = this.command.ExecuteReader();
        bool a = this.dataReader.Read();
        // ---
        this.command.Dispose();
        this.link.Close();
        // ---
        return a;
    }

    public string ExecuteCellRead(string query)
    {
        string output = "";
        this.dataTable = this.ExcecuteRead(query);

        foreach (DataRow row in this.dataTable.Rows)
        {
            foreach (object obj in row.ItemArray)
            {
                output += obj.ToString();
            }
        }

        return output;
    } 
```

因此，如您所见，主要问题是用户现在不能将字符用作 '. 它假设最好的解决方案是在 SQL 查询中使用 @ 变量，但我不知道如何。

[感谢您的帮助] PS。我已经改变了我的桌子的名字；）

编辑：你们中的大多数人都告诉我使用这些参数化查询，但如果你能给我一个如何使用它们的例子，那就太好了，因为我从来没有这样做过

* * *

* * *

所以，感谢@Remou，我的**最终**代码是：

```
 db.DoWeirdStackOverFlowStuff(
    "INSERT INTO `Table1`(`username`, `password`, `logins`) VALUES (@username, @password, '0');"
    , new string[] { "@username", "@password" }
    , new string[] { username, password }); 
```

和

```
 public int DoWeirdStackOverFlowStuff(string query, string[] vars, string[] reps)
    {
        this.link.Open();
        int rowsAffected;
        // ---
        this.command = new OleDbCommand();
        this.command.CommandText = query;
        this.command.CommandType = System.Data.CommandType.Text;
        this.command.Connection = this.link;

        //Parameters in the order in which they appear in the query
        for (int i = 0; i < vars.Length; i++)
            this.command.Parameters.AddWithValue(vars[i], reps[i]);

        try
        {
            rowsAffected = this.command.ExecuteNonQuery();
        }
        catch (InvalidOperationException e)
        {
            if (e.Data == null)
                throw;
            else
                rowsAffected = -1;
        }
        finally
        {
            this.command.Dispose();
            this.link.Close();
        }
        // ---
        return rowsAffected;
    } 
```

对于需要这个的人=]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:45:50.160

一些笔记

在 MS Access 中，我保存了一个名为 UpdateUser 的查询，它看起来像这样：

```
 UPDATE INTERNETSETTINGS 
       SET url = [@url], 
           databasename = [@databasename], 
           port = [@port], 
           username = [@username],
           [password] = [@password] 
```

我可以使用命令对象在我的代码中按名称引用此查询：

```
 OleDbCommand Command = new OleDbCommand();

        Command.CommandText = "UpdateUser"; //saved query
        Command.CommandType = System.Data.CommandType.StoredProcedure;
        Command.Connection = cn; //a connection to the database

        //Parameters in the order in which they appear in the query
        Command.Parameters.AddWithValue("@url", "a"); //a,b,c etc for my test run
        Command.Parameters.AddWithValue("@databasename", "b");
        Command.Parameters.AddWithValue("@port","c");
        Command.Parameters.AddWithValue("@username", "d");
        Command.Parameters.AddWithValue("@password", "e");

        Command.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:12:05.053

我不记得 Access 是否在这里与 SQL Server 做同样的事情，但在 SQL Server 中，您可以通过加倍来转义单引号：

```
username = username.Replace("'", "''"); 
```

所以你可以在字符串中包含单引号，你可以将它们存储在数据库中，并且它们不能用作恶意字符串终止符。

# eclipse - 为什么我不能在 Eclipse Juno 中保存文件？

> ID：15414249
> 
> 赞同：13
> 
> 时间：2013-03-14T16:02:37.920
> 
> 标签：eclipse, eclipse-juno

有时我无法在 Eclipse Juno 中保存文件。

*File->Save*选项灰显，Ctrl *+S*不起作用。这是怎么回事？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T16:02:37.920

这是 Eclipse Juno 中的一个已知问题：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=396418](https://bugs.eclipse.org/bugs/show_bug.cgi?id=396418)

作为一种解决方法，请使用“全部保存”：*Shft+Ctrl+S*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-13T20:24:56.970

试试：另存为。它会告诉你代码中有什么问题。可能您做了“复制粘贴”，并且某些字符无法使用“US-ASCII”编码字符进行映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T08:24:12.143

您还可以重新启动 Eclipse。
如果您没有使用提到的“全部保存”解决方法，您当然会丢失所有未保存的进度。
通过重新启动 Eclipse，您将能够再次使用“正常”保存（直到它再次变灰……对我来说，这就像每天发生一次）

# android - 我如何知道文件名是否是 Android 中的别名？

> ID：15414250
> 
> 赞同：1
> 
> 时间：2013-03-14T16:02:37.873
> 
> 标签：android, symlink

我正在尝试找出一种在 Android 设备中查找可移动 SD 卡的方法。我发现了几种可以提供始终如一的良好结果的方法。有时我会发现两个不同的文件路径似乎指向完全相同的位置。

例如：

`/mnt/sdcard` 和 `/storage/sdcard0`

在某些设备上似乎指向同一位置。我的结论是其中一个是别名，但两者都可用于写入 SD 卡。我不太熟悉别名的使用，但**有没有办法找出其中一个或两个文件是否是别名？是否可以确定“真实”文件路径？**

我知道 Android 是基于 Linux 内核构建的，并且采用了一些文件系统约定。有没有标准的 Linux 方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:11:22.347

我认为您的意思是符号链接。

这基本上是他们在[Apache Commons](http://svn.apache.org/viewvc/commons/proper/io/trunk/src/main/java/org/apache/commons/io/FileUtils.java?view=markup)中的做法（取决于[他们的许可证](http://www.apache.org/licenses/LICENSE-2.0)）：

此答案中还提到：[Java 1.6 - 确定符号链接](https://stackoverflow.com/questions/813710/java-1-6-determine-symbolic-links)

```
public static boolean isSymlink(File file) throws IOException {
  File canon;
  if (file.getParent() == null) {
    canon = file;
  } else {
    File canonDir = file.getParentFile().getCanonicalFile();
    canon = new File(canonDir, file.getName());
  }
  return !canon.getCanonicalFile().equals(canon.getAbsoluteFile());
} 
```

# xcode - 通过 TestFlight 安装 App

> ID：15414258
> 
> 赞同：0
> 
> 时间：2013-03-14T16:02:56.723
> 
> 标签：xcode, provisioning, testflight

我有一个问题：

当使用我用于将应用程序分发到应用程序商店的同一台计算机时，我能够成功打包应用程序，以便 beta 测试人员可以使用 TestFlight 在他们的设备上安装应用程序。

我有第二台计算机，我已使用 XCode 中的导出/导入功能将所有代码签名项目从这台计算机转移到。

我花了几天时间试图让相同的过程在 TestFlight 中工作。我能够成功存档应用程序并将其加载到测试飞行中，但是当 Beta 测试人员尝试安装该应用程序时，他们会收到熟悉的警报：“无法下载应用程序”。

在此警报出现之前，安装图标通过进度条大约 3/4，这让我相信配置文件存在问题。我曾多次尝试清理并重新安装团队的代码签名导出文件，并得到了结果。

此外，我已经完成了摆脱 TestFlight 的过程，它是 Safari 的配置文件和清除的 Cookie、数据和历史记录。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T11:45:07.387

检查您是否已使用 Provisioning Profile for **Distribution**构建并签署了您的应用程序！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-01T10:08:49.930

使用 XCode 中的“自动管理签名”选项进行代码签名签名，而不是导出证书并在那里使用。我每天使用“fastlane”将构建推送到 Testflight。它也节省了开发人员的时间。

# java - Java：BufferedImage 到字节数组并返回

> ID：15414259
> 
> 赞同：70
> 
> 时间：2013-03-14T16:02:57.320
> 
> 标签：java, arrays, byte, bufferedimage

我看到很多人都遇到了类似的问题，但是我还没有尝试找到我正在寻找的东西。

所以，我有一个读取输入图像并将其转换为字节数组的方法：

```
 File imgPath = new File(ImageName);
    BufferedImage bufferedImage = ImageIO.read(imgPath);
    WritableRaster raster = bufferedImage .getRaster();
    DataBufferByte data   = (DataBufferByte) raster.getDataBuffer(); 
```

我现在要做的是将它转换回 BufferedImage（我有一个需要此功能的应用程序）。请注意，“test”是字节数组。

```
 BufferedImage img = ImageIO.read(new ByteArrayInputStream(test));
    File outputfile = new File("src/image.jpg");
    ImageIO.write(img,"jpg",outputfile); 
```

但是，这会返回以下异常：

```
 Exception in thread "main" java.lang.IllegalArgumentException: im == null! 
```

这是因为 BufferedImage img 为空。我认为这与以下事实有关：在我从 BufferedImage 到字节数组的原始转换中，信息被更改/丢失，因此数据不再被识别为 jpg。

有人对如何解决这个问题有任何建议吗？将不胜感激。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-03-14T16:11:28.323

建议转换为字节数组

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ImageIO.write(img, "jpg", baos);
byte[] bytes = baos.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-02-28T10:49:03.260

请注意，调用`close`or`flush`将什么都不做，您可以通过查看他们的源/文档来自己查看：

> 关闭 ByteArrayOutputStream 无效。
> 
> OutputStream 的 flush 方法什么都不做。

因此使用这样的东西：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream(THINK_ABOUT_SIZE_HINT);
boolean foundWriter = ImageIO.write(bufferedImage, "jpg", baos);
assert foundWriter; // Not sure about this... with jpg it may work but other formats ?
byte[] bytes = baos.toByteArray(); 
```

以下是有关尺寸提示的一些链接：

*   [Java：节省内存的 ByteArrayOutputStream](https://stackoverflow.com/questions/7255232/java-memory-efficient-bytearrayoutputstream)
*   [jpg 每像素位数](https://stackoverflow.com/questions/4305101/jpg-bits-per-pixel)

当然，请务必阅读您正在使用的版本的源代码和文档，不要盲目依赖 SO 答案。

# php - HTML 表单 - 如何使用 GET 方法也生成电子邮件？

> ID：15414260
> 
> 赞同：-1
> 
> 时间：2013-03-14T16:03:00.920
> 
> 标签：php, html, forms, email, get

我希望这个问题有一个简单的答案。

我在一个网站上有一个 HTML 表单，它使用 GET 方法将表单中的变量发送到 PHP 页面，即

```
<form name="create_landing_page" action="/landing-page/" method="get"> 
```

我还想做的是在提交该表单时生成一封电子邮件，因此我将动态 URL 写在某处，因为我们不将它们保存到数据库中。我尝试在登录页面上放置一些 PHP，该页面使用此方法在页面加载时自动生成电子邮件：[如何在访问页面时发送电子邮件通知？](https://stackoverflow.com/questions/6021183/how-to-send-an-email-notification-when-a-page-is-visited)，但我没有收到任何测试邮件。

有没有一种非常简单的方法可以从提交的表单中获取变量并通过电子邮件发送，或者从登录页面获取 URL 并通过电子邮件发送？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:07:48.043

最好的方法是从表单中检索值，然后通过电子邮件发送这些值：

注意：我没有以任何方式清理输入 - 所以如果您要使用数据库，请确保清理它们！

**登陆页面.html**

```
<form name="create_landing_page" action="/landing-page/" method="get">
<input name="email_address" value="Enter your email" />
<input name="name" value="Enter your name" />
</form> 
```

**登陆页面（.php）**

```
 if(isset($_GET['email_address']) && !empty($_GET['email_address'])){
    $emailAddress = $_GET['email_address'];
    }

        if(isset($_GET['name']) && !empty($_GET['name'])){
    $name= $_GET['name'];
    }

        $to      = $emailAddress;
        $subject = 'the subject';
        $message = 'hello ' . $name;
        $headers = 'From: youremail@example.com' . "\r\n" .
            'Reply-To: youremail@example.com' . "\r\n" .
            'X-Mailer: PHP/' . phpversion();

        if(!mail($to, $subject, $message, $headers))
        {
            die('There was an error sending out the email');
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:10:11.093

原因可能是你的系统上没有邮件服务，试试：

```
$result=mail($mailAddress,$subject,$content);
if(!$result)
    die("Mail subsystem error!"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:09:28.170

如果您想知道脚本正在运行的页面的完整路径（包括任何参数），您可以使用`_SERVER["REQUEST_URI"]`.

根据您的应用程序的托管位置和服务器的配置方式，发送邮件可能会很棘手。托管服务有时会禁用该`mail()`命令以减少垃圾邮件。如果您使用的是共享托管服务，您可能需要检查是否`mail()`可用。

# c# - 为什么网络数据包分析器不通过 Web 客户端捕获 Http Post 请求

> ID：15414263
> 
> 赞同：1
> 
> 时间：2013-03-14T16:03:04.770
> 
> 标签：c#, http, networking, wireshark

我正在使用 Web 客户端的上传文件方法将事务发布到特定 URL。我正在使用 wireshark 来捕获这个网络通信，但令人惊讶的是，wireshark 没有在我的 UAT 系统中显示这个请求的 URL。因为它是一个 HTTP 请求，所以我使用特定的 IP 地址和 Http 对其进行了过滤，它显示了我通过 Web 浏览器执行的所有其他请求，但没有显示我通过 webclient 类执行的特定请求。

示例代码：-

```
string url = ConfigurationSettings.AppSettings["https_url"];
                WebClient wc = new WebClient();

                wc.QueryString = q;

                string ResultString = string.Empty;
                byte[] postBytes = wc.UploadFile(url, "POST", strFileName); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:20:29.040

如果我正确理解您的代码，您是通过 HTTPS 上传文件吗？如果是这种情况，除非您将wireshark 配置为正确解密SSL 流量，否则您的流量只会显示为SSL（不会被过滤为HTTP）。

一些信息：[http ://wiki.wireshark.org/SSL](http://wiki.wireshark.org/SSL)

如果您不想处理设置 wireshark 来解密 HTTPS 流量，我建议调整您的 url 以通过 http 发送 POST，然后将显示在您的 wireshark 嗅探中。

# ios - 从日历 tjeervurig 中选择两个日期

> ID：15414266
> 
> 赞同：0
> 
> 时间：2013-03-14T16:03:23.560
> 
> 标签：ios, objective-c

我使用这个日历[https://github.com/TjeerdVurig/Vurig-Calendar](https://github.com/TjeerdVurig/Vurig-Calendar)

我如何选择两个日期并在选择这两个日期后执行操作并使这两个日期之间的所有日期都被选中突出显示为蓝色

作为示例，我选择 1 - 1/3/2013 2 - 5/3/2013

在我点击两个日期后，它会用蓝色突出显示 {1,2,3,4,5}/3/2013 之间的所有日期，然后执行操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T09:49:19.293

```
 id markedDateObj1 = [self.markedDates objectAtIndex:1];
    NSDate *date1 = (NSDate *)markedDateObj1;
    id markedDateObj0 = [self.markedDates objectAtIndex:0];
    NSDate *date0 = (NSDate *)markedDateObj0;
    if ([date0 day]-1 && i==[date0 day]-1) {
        CGRect rectangleGrid = CGRectMake(targetX,targetY,kVRGCalendarViewDayWidth+2,kVRGCalendarViewDayHeight+2);
        CGContextAddRect(context, rectangleGrid);
        CGContextSetFillColorWithColor(context, [UIColor colorWithHexString:@"0x006dbc"].CGColor);
        CGContextFillPath(context);

        CGContextSetFillColorWithColor(context,
                                       [UIColor whiteColor].CGColor);
    }
    if ([date1 day]-1 && i==[date1 day]-1) {
        CGRect rectangleGrid = CGRectMake(targetX,targetY,kVRGCalendarViewDayWidth+2,kVRGCalendarViewDayHeight+2);
        CGContextAddRect(context, rectangleGrid);
        CGContextSetFillColorWithColor(context, [UIColor colorWithHexString:@"0x006dbc"].CGColor);
        CGContextFillPath(context);

        CGContextSetFillColorWithColor(context,
                                       [UIColor whiteColor].CGColor);
    }
    for (int ai=[date0 day]; ai<[date1 day]-1; ai++) {

        if (ai && i==ai) {
            CGRect rectangleGrid = CGRectMake(targetX,targetY,kVRGCalendarViewDayWidth+2,kVRGCalendarViewDayHeight+2);
            CGContextAddRect(context, rectangleGrid);
            CGContextSetFillColorWithColor(context, [UIColor colorWithHexString:@"0x0095FF"].CGColor);
            CGContextFillPath(context);

            CGContextSetFillColorWithColor(context,
                                           [UIColor whiteColor].CGColor);
        }
    } 
```

# c++ - free() 下一个大小无效（快速）-C++ 内存错误

> ID：15414270
> 
> 赞同：-6
> 
> 时间：2013-03-14T16:03:34.680
> 
> 标签：c++, exception, pointers, memory-management

我的程序 mycpp.c 抛出内存错误，我认为由于覆盖对象指针而引发了此错误，但我无法找出错误的根本原因。我觉得“ref3 [1] = ref3 [0]”行+参考；" 引起了问题，我对此发表了评论。但它对我没有帮助。请您帮我解决错误。 **mycpp.c**

```
void mycpp::filldata(ptrStructda pStData)
   1871 {
             ../stmt/...

   1947         String s2("");
   1948         strcat(ref3[0],reference);
   1949         strcat(s2,ref3[0]);
   1950            // ref3[1]= ref3[0] +reference;
   1951             s2.replace_char('-','.');
   1952            // Clean and hold the output value
   1953             temp_Buffer->erase();
   1954         *temp_Buffer = "";
   1955         cout<<"S2:\t"<<s2<<endl;
   1956 //      strcpy(*temp_Buffer,s2);
   1957 } 
```

**字符串.c**

```
String::String()
{
        _text = new char[1024];
}

String::String(char *ch)
{
        if (ch == NULL )
        {
                // if input char* is empty - allocate short buffer
                // and set it to ""
                _text = new char[2];
                strcpy(_text, "");
        }
        else
        {   
                _text = new char[strlen(ch) + 1];
                    if(_text)
                         strcpy(_text, ch);
                else
                {
                        _text = new char[2];
                        strcpy(_text, "");
                }
        }

}

String::String(int iLen)
{
        _text = new char[iLen+1];
}
String::String(String const & string)//jl202 added const
{
       _text = new char[string.length() + 1];

       strcpy(_text,string);
}
String::~String()
{
        delete[] _text;
}
String &String::operator=(String &ptrStr)
{

        delete[] _text;
        _text = new char[ptrStr.length() + 1];
        strcpy(_text, ptrStr);
        return *this;
}
String &String::operator=(char *ch)
{
        delete[] _text;
        _text = new char[strlen(ch) + 1];

        strcpy(_text, ch);
        return *this;
}
void String::erase()
{
        delete[] _text;
        _text = new char[1];
} 
```

字符串.h

```
class String
{
    private:
            char *_text;

            friend class String_Iterator;
    public:
            // ctors and dtor
            explicit String ();                     // create String as of 1024 chars
            explicit String (char *);
            explicit String (int );
            String (String const & );               // copy ctor
            ~String();

            /////////////////
            // conversions:
            /////////////////
            //  to C-like type char *
            operator  char *() {return _text;}

            operator const char*()const
            {
               return (const_cast <char *>(_text) );
            }
 }; 
```

**用于观察的 gdb 输入**

```
(gdb) bt

   #5  0x0000000000402fda in String::~String (this=0x7fffffffd2f0, __in_chrg=<value optimized out>) at String.c:55
**#6  0x000000000040d58c in mycpp::filldata (this=0x61f0e0, pStData=0x7fffffffdd50) at mycpp.c:1955**
#7  0x000000000041159d in mycpp::base (this=0x61f0e0, pStData=0x7fffffffdd50, account_id=0x6418e0 "0300130",
    page_balance=0x7fffffffdf38, items_on_page=0x7fffffffdf34, txn_per_acc=0x7fffffffdf30, total_cash_bal=0x7fffffffdf28, total_cv_bal=0x7fffffffdf20)
    at mycpp.c:1328
#8  0x0000000000414e77 in mycpp::Proc (this=0x61f0e0) at mycpp.c:899
#9  0x000000000041704e in mycpp::Run (this=0x61f060) at mycpp.c:97
#10 0x0000000000417146 in main (argc=3, argv=0x7fffffffe1f8) at mycpp.c:2264 
```

感谢您查看这个。寻求您有价值的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:44:52.453

试试`std::string`。那应该行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:33:43.360

```
String s2("");
...
strcat(s2,...); 
```

绝对是个坏主意。在第一行中，您将分配一个`char`长度为 1 的数组并将其分配给`s2._text`. 并且`strcat`，您尝试将字符附加到`s2._text`但您没有为其保留其他字符，因此您正在覆盖（破坏）您不应该写入的内存（在程序的随机位置造成意外影响），当然除非第二个的参数`strcat(..)`是空字符串。

# java - Java 7 的 fork/join 框架没有使用所有可用的 CPU 能力

> ID：15414271
> 
> 赞同：4
> 
> 时间：2013-03-14T16:03:38.483
> 
> 标签：java, multithreading, performance, java-7, fork-join

我正在使用[Java 的 fork-join 框架](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)来处理 CPU 密集型计算。

我已经稍微调整了“顺序阈值”（用于确定是创建子任务还是完成工作），但令我失望的是，从单线程到 4+4 内核仅使整体性能翻了一番。该池确实报告了 8 个 CPU，当我手动设置 2、3、4、.. 时，我看到性能逐渐提高，但仍然达到单线程吞吐量的两倍左右。此外，该 Java 进程的 Linux 系统活动监视器在 50% 左右徘徊。

另一个非常可疑的事实是，当我启动多个 Java 进程时，集体吞吐量更加一致（几乎比单个线程快 4 倍）并且系统活动监视器显示更高的 CPU 使用率。

是否有可能在 Java、Linux 或 fork/join 框架中存在不允许完全 CPU 使用的限制？有什么建议或类似的经历吗？

注意。这是在具有 4 个内核和 4 个超线程内核的 Intel 3770 CPU 上，在 Linux Mint 机器上运行 Oracle Java 7r13。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:35:39.457

谢谢大家的想法和回答！根据您的建议，我得出的结论是问题不在于框架本身，并继续进行了一些测试，发现几分钟后 CPU 负载下降到 15% ！

事实证明，Random（我广泛使用）在多线程设置中性能很差。解决方案是改用 ThreadLocalRandom.current().nextXXX()。我现在的使用率达到了一致的 80%（仍然有一些连续的段落）。甜的！

再次感谢您让我走上正轨。

# c# - iPad 作为非特定视图

> ID：15414274
> 
> 赞同：0
> 
> 时间：2013-03-14T16:03:46.017
> 
> 标签：c#, ipad, mobile, asp.net-mvc-4

基于这篇文章[http://www.asp.net/mvc/tutorials/mvc-4/aspnet-mvc-4-mobile-features](http://www.asp.net/mvc/tutorials/mvc-4/aspnet-mvc-4-mobile-features)显示如何识别特定视图。

MVC4 将 iPad 的请求识别为移动设备，但我希望它识别为桌面设备而不是移动设备，因此我使用了以下代码：

```
DisplayModeProvider.Instance.Modes.Insert(0, new DefaultDisplayMode("")
{
    ContextCondition = (context => context.GetOverriddenUserAgent().IndexOf("iPad", StringComparison.OrdinalIgnoreCase) >= 0)
}); 
```

还有其他更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:12:45.787

跨多个设备处理多个屏幕分辨率的最佳方法是通过级联样式表。您实际上可以指定哪个分辨率应该运行您的布局的变化。

您还可以使用 Javascript 来实现它，它可以让您创建一个真正的动态分辨率相关布局。可以在[此处](http://www.particletree.com/features/dynamic-resolution-dependent-layouts/)找到此类示例。

你可以`Media Query`为你的样式表做一个，或者一个`Viewport`.

一个例子是：

```
@media screen and (max-width: 980px) {

    #pagewrap {
        width: 95%;
    }

    #content {
        width: 60%;
        padding: 3% 4%;
    }

    #sidebar {
        width: 30%;
    }
    #sidebar .widget {
        padding: 8% 7%;
        margin-bottom: 10px;
    } 
```

这将占用任何小于 980 像素的屏幕并调整页面。

您也可以在此处找到一些关于[此类的](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)调整。您提到的那篇文章实际上也建议使用`Media Queries`and `Viewports`。

需要注意的是，一些移动设备已经提高了分辨率。所以看起来他们看起来和处理一个正常的桌面网站是正确的，但他们通常不会。例如， a`hover effect`在电话上无法正常工作，因为他们单击。它不知道手何时在按钮上方。触摸屏经常不能正确处理桌面界面。在你的设计过程中记住这一点。

希望这会有所帮助，或者为您指明正确的方向。

# fortran - FORTRAN 在哪里存储局部变量？

> ID：15414277
> 
> 赞同：3
> 
> 时间：2013-03-14T16:03:50.633
> 
> 标签：fortran, local-variables

从商业程序的程序员手册中发布的源代码中，我分离出了​​一个让我很困惑的代码片段。

下面的函数预计会被内核多次调用，并且应该在由许多互连组件组成的系统中实现组件的时间行为（我已经从函数原型中删除了输入/输出参数，因为它们与我打算提高的点）。

为了区分相同块类型的不同实例，内核在 INFO(1) 元素中传递一个实例编号。

据我了解，该程序的设计者花费了大量精力，试图节省在每次调用时将参数值从 PAR 向量复制到具有有意义名称的局部变量所花费的时间（好像它们不是知道编译器可以做的优化）。在我看来，他们只想在第一次调用时将它们分配给局部变量，或者当调用者切换到相同类型的不同实例时。

但是，如果局部变量未使用“save”关键字声明为静态，我无法理解这将如何工作。FORTRAN 是否静态存储局部变量，即不在堆栈上？（如果这个问题听起来很愚蠢，我很抱歉，我已经习惯了 C/C++ 语言）

谢谢你。

```
SUBROUTINE TYPE151(PAR, INFO, *)

    IMPLICIT NONE

    INTEGER*4 INFO(15), IUNIT
    DOUBLE PRECISION PAR, QMAX

    PARAMETER (NP=1)
    DIMENSION PAR(NP)

    ! First call
    IF (INFO(7).EQ.-1) THEN

        IUNIT = INFO(1)

        QMAX = PAR(1)

        RETURN 1
    ENDIF

    ! later calls
    IF(INFO(1).NE.IUNIT) THEN

        IUNIT = INFO(1)

        QMAX = PAR(1)
    ENDIF

    ! Making use of QMAX in some ways...

    RETURN 1 
END SUBROUTINE TYPE151 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:43:28.977

存储方法不是语言标准的一部分。旧的 FORTRAN 编译器（FORTRAN 77 和更早版本）经常静态存储所有变量。该语言要求您对变量使用“SAVE”，在调用过程时应保留其值。但由于 FORTRAN 77 时代编译器的典型设计，许多程序员忽略了这一要求，并依赖于所有变量都保留其值的行为。

现代 Fortran 编译器通常以不同的方式使用内存，如果省略 SAVE，过程的局部变量并不总是保留它们的值。当使用当前编译器编译旧程序时，这经常会导致错误。编译器通常提供恢复旧行为的选项。否则，识别大型遗留程序中需要将 SAVE 属性添加到其声明中的所有变量可能需要大量工作。

# r - 逻辑运算符 - 短（关系）与长（向量）形式

> ID：15414283
> 
> 赞同：4
> 
> 时间：2013-03-14T16:04:06.847
> 
> 标签：r, comparison, vectorization, logical-operators, relational

我对在 R 中使用短形式和长形式的逻辑运算符感到有些困惑。

如果我有以下值

```
A <- FALSE
B <- TRUE
X <- 3
Y <- 2 
```

我想评估 NOT(A) **OR** NOT(B) **AND** X < Y

我希望`FALSE`给定参数

这是我找到的用于评估它的表达式，`R`因此它`FALSE`按我的预期返回：

```
!A & X < Y || !B & X < Y 
```

我可以消除重复`X < Y`比较吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:06:31.883

你的意思是：

```
> (!A || !B) && X < Y
[1] FALSE 
```

?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T16:13:59.513

简短的形式给你一个向量。
长格式给你一个单一的价值。相比：

```
 x <- c(TRUE, TRUE, FALSE)
   y <- c(TRUE, FALSE, FALSE)

   X && Y
   X & y

   x || y
   x | y 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T16:17:09.290

另一种可能：

```
!(A * B) && X < Y 
```

# c# - 在 OnInit 中递归遍历控件会禁用 GridView RowCommand 并丢失 Viewstate

> ID：15414284
> 
> 赞同：3
> 
> 时间：2013-03-14T16:04:08.253
> 
> 标签：c#, asp.net, webforms

如果我递归遍历页面的控件，则 GridView 中的 LinkBut​​tons 不再触发 RowCommand 事件。事实上，看起来 GridView 的 ViewState 丢失了。为什么？我该如何解决这个问题？

在您取消注释该`//recurse(this.Controls)`行之前，下面的代码将正常工作。然后，当您点击链接时，GridView 消失并且 RowCommand 永远不会被触发。

我的页面的完整`<body>`：

```
<form id="form1" runat="server">
    <asp:GridView ID="gv" AutoGenerateColumns="False" runat="server" onrowcommand="gv_RowCommand">
        <Columns><asp:TemplateField HeaderText="Link"><ItemTemplate>
            <asp:LinkButton ID="lnk" runat="server" CommandArgument = 'xxx'>xxx</asp:LinkButton>
        </ItemTemplate></asp:TemplateField></Columns>
    </asp:GridView>
</form> 
```

我背后的代码：

```
 protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        //recurse(this.Controls);
    }
    private static void recurse(ControlCollection controls)
    {
        foreach (Control control in controls)
            recurse(control.Controls);
    }
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            var dt = new DataTable();
            dt.Columns.Add("Link", typeof(string));
            DataRow dr = dt.NewRow();
            dr["Link"] = "google.com";
            dt.Rows.Add(dt);
            DataSet ds = new DataSet();
            ds.Tables.Add(dt);
            gv.DataSource = ds;
            gv.DataBind();
        }
    }
    protected void gv_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (this.Application["counter"] == null)
            this.Application["counter"] = 0;
        this.Application["counter"] = (int)this.Application["counter"] + 1;
        Response.Write("JUNK" + this.Application["counter"]);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:54:26.003

@jbl 找到了一些对我来说足够好的解释（感谢搜索技巧！）。这个问题之前在这里看到过：[http ://forums.asp.net/t/1043999.aspx/1](http://forums.asp.net/t/1043999.aspx/1)

总结该页面，`.Controls`在 Init 阶段以任何方式访问 GridView 的属性都会破坏其 ViewState。没有解释为什么，但无论如何它已经被观察到了。

该页面上有一个对我来说足够好的解决方法。如果您检查每个控件是否有`.HasControls()`，如果没有则不访问其`.Controls`属性，ViewState 不会丢失，因此事件将正常触发。

PS我猜这是一个错误，但由于向后兼容性，它当然不能永远更改:(

# c++ - 体素化 .OFF 和 .OBJ 文件中的 3D 对象

> ID：15414292
> 
> 赞同：0
> 
> 时间：2013-03-14T16:04:22.530
> 
> 标签：c++, opengl

我需要一个 C++ 程序，它允许体素化 3D 模型（来自 .Obj、.OFF、...）并以相同格式的文件（.obj、.OFF）提供结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:37:03.320

查看[`binvox`](http://www.cs.princeton.edu/~min/binvox/)和/或[`poly2vox`](http://advsys.net/ken/download.htm)体素化步骤。

您必须滚动自己的体素到 OBJ 例程。但这应该很容易，具体取决于您想要获得的复杂程度。

# java - 为 JDBCTemplate.QueryForObject 转换返回值

> ID：15414293
> 
> 赞同：0
> 
> 时间：2013-03-14T16:04:22.650
> 
> 标签：java, casting

我发现这种形式的查询对于从数据库调用返回单个值/单行非常方便，如果出现问题，我可以很好地抛出异常。但在我的脑海中，做演员通常是一种不好的做法。

这里的演员是不是很不满意？

```
String name = (String)getJdbcTemplate().queryForObject(
        sql, new Object[] { custId }, String.class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:25:20.203

从 Spring 3.1 开始，[JdbcTemplate](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html)可以将泛型和可变参数与[queryForObject](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#queryForObject%28java.lang.String,%20java.lang.Class,%20java.lang.Object...%29)一起使用：

```
String name = getJdbcTemplate().queryForObject(sql, String.class, custId); 
```

在 Spring 3.1 之前，这可以通过 getSimpleJdbcTemplate() 获得

```
String name = getSimpleJdbcTemplate().queryForObject(sql, String.class, custId); 
```

编辑：

这需要 JDK 1.5 或更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:25:57.913

如果您使用的是 Spring 的最新版本，则不必强制转换，因为它是一个通用方法，并且该方法的[签名](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#queryForObject%28java.lang.String,%20java.lang.Class%29)现在是：

```
public <T> T queryForObject(String sql, Class<T> requiredType) throws DataAccessException 
```

如果您使用的是旧版本，请转换或升级到最新版本。

# if-statement - 根据 WinBugs/JAGS 中的 if - else 条件选择不同的分布

> ID：15414303
> 
> 赞同：11
> 
> 时间：2013-03-14T16:04:40.133
> 
> 标签：if-statement, model, distribution, winbugs, jags

我正在尝试编写一个 Winbugs/Jags 模型来建模多粒度主题模型（正是这篇论文-> [http://www.ryanmcd.com/papers/mg_lda.pdf](http://www.ryanmcd.com/papers/mg_lda.pdf)）

在这里，我想根据特定值选择不同的分布。例如：我想做类似的事情

```
`if ( X[i] > 0.5 )
{
Z[i] ~ dcat(theta-gl[D[i], 1:K-gl])
W[i] ~ dcat(phi-gl[z[i], 1:V])
}
else 
{
Z[i] ~ dcat(theta-loc[D[i], 1:K-loc])
W[i] ~ dcat(phi-loc[z[i], 1:V])
}
` 
```

这可以在 Winbugs/JAGS 中完成吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-11T21:13:25.340

Winbugs/JAGS 不是一种过程语言，所以你不能使用这样的结构。使用`step`功能。从手册中引用：

> step(e) ...... 1 如果 e >= 0; 0 否则

所以你需要一个技巧来改变条件：

```
X[i] > 0.5   <=>     
X[i] - 0.5 > 0  <=> 
!(X[i] - 0.5 <= 0) <=>
!(-(X[i] - 0.5) >= 0) <=>
!(step(-(X[i] - 0.5)) == 1) <=>
step(-(X[i] - 0.5)) == 0 
```

然后将其用于索引技巧：

```
# then branch
Z_branch[i, 1] ~ dcat(theta-gl[D[i], 1:K-gl])
W_branch[i, 1] ~ dcat(phi-gl[z[i], 1:V])

# else branch
Z_branch[i, 2] ~ dcat(theta-loc[D[i], 1:K-loc])
W_branch[i, 2] ~ dcat(phi-loc[z[i], 1:V])

# decision here
if_branch[i] <- 1 + step(-(X[i] - 0.5)) # 1 for "then" branch, 2 for "else" branch
Z[i] ~ Z_branch[i, if_branch[i]]
W[i] ~ W_branch[i, if_branch[i]] 
```

# java - FilenotFoundException java文件android

> ID：15414305
> 
> 赞同：0
> 
> 时间：2013-03-14T16:04:40.743
> 
> 标签：java, android, file, file-io, filenotfoundexception

```
 File fXmlFile = new File("D:\\Praias.xml");

        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(fXmlFile); 
```

我的文件在 D:\

为什么我有这个例外？

**日志**

```
 W/System.err(  845): java.io.FileNotFoundException: /D:/Praias.xml
  W/System.err(  845):    at org.apache.harmony.luni.platform.OSFileSystem.open(OS
  FileSystem.java:244)
  W/System.err(  845):    at java.io.FileInputStream.<init>(FileInputStream.java:7
  7)
  W/System.err(  845):    at javax.xml.parsers.DocumentBuilder.parse(DocumentBuild
  er.java:138)
  W/System.err(  845):    at inescporto.seawatch.BeachesParser.parserXML(BeachesPa
  rser.java:36) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:32:07.477

当您将文件直接保存在计算机驱动器下时，某些操作系统会出现问题。尝试将文件保存在目录中。为了安全起见，请使用正斜杠 (/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:37:18.547

问题是，当我在编写一个 Android 应用程序时，我试图在 D:\ 目录中打开一个文件，所以你可以很容易地注意到这个目录在 android 设备中不存在。

# php - Yii 自定义 CGridView 未定义常量

> ID：15414308
> 
> 赞同：0
> 
> 时间：2013-03-14T16:04:47.697
> 
> 标签：php, yii, cgridview

我是 Yii 的新手，我有以下代码，`'columns'=>array( 'id', 'name', 'email', array( 'name' => 'deleted', 'value' => $model->deleted == 1 ? 'Yes' : 'No', ),` 如果从数据库中删除的字段等于 1，我想显示 YES，否则显示 NO。它不断给我一个 PHP 通知：使用未定义的常量是的。提前致谢。

**编辑** 我的洞wedgit

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'users-grid',
'dataProvider'=>$model->search(),
'filter'=>$model,
'columns'=>array(
    'id',
    'name',
    'email',
    array(
        'name' => 'deleted',

    ),
    /*
    'pass',
    'salt',

    'first',
    'last',
    'phone',
    'attempts',
    'locked',
    'gender',
    'birth',
    'joined',
    'updated',
    'active',
    'reset',
    'permission',
    'appress',
    'deleted',
    */
    array(
        'class'=>'CButtonColumn',
        'template'=>'{view}{ban}',
        'buttons' => array(
            'ban' => array
            (
            'label'=> 'Ban User',
            'url'=>'Yii::app()->createUrl("users/delete", array("id"=>$data->id))' ,

             'click'=>'function(){confirm("Are you sure you want to Ban this ?");}',
            ),
        )
    ),
), 
```

));

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T18:28:50.097

试试这个

```
'columns'=>array(
    'id', 
    'name',
    'email',
    array(
        'name' => 'deleted', 
        'value' => '$data->deleted == 1 ? "Yes" : "No"',
     ),
) 
```

或 YII 方式

```
'columns'=>array(
        'id', 
        'name',
        'email',
        'deleted:boolean'
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:17:08.450

在`value`部分，您正在尝试指定是否`$model->deleted`！如果是这种情况，则在之前提供一个布尔表达式`'?'`

假设 delete 返回 1 为真，否则为假；前任：

```
'columns'=>array( 'id', 'name', 'email', array( 'name' => 'deleted', 
  'value' => $model- >deleted == 1 ? 'Yes' : 'No', ), 
```

# c# - 在线程中设置全局变量 - C#

> ID：15414312
> 
> 赞同：25
> 
> 时间：2013-03-14T16:05:02.607
> 
> 标签：c#, .net-4.0, thread-safety

我有一个使用 HTTP 侦听器编写的 HTTP 服务器，我想以某种方式声明某些变量可以从线程中的任何位置访问。

*   我的网络服务器类是基于实例的，所以我不能真正使用静态变量。
*   我可以使用实例变量，因为所有代码都在一个类中，但是……我不知道。

我想过使用字典：`Dictionary</*[type of Thread ID here]*/,ThreadData>`，但我担心可能存在线程问题。`ThreadData`可能*是*一个类实例，但我可能会使用一个结构，这取决于哪个更有效。

*   如果我将字典键入线程 ID 并对其进行编程，以便一个线程*只*在字典中请求它自己的条目，那么在访问字典时是否会出现任何与线程相关的问题？
*   每个线程都会添加自己的条目。添加新线程项时是否必须锁定字典？如果是这样，我是否可以使用单独的锁定对象来允许线程同时访问自己的数据？

使用并发字典会有优势吗？还有另一种更线程安全的方法吗？

我目前正在使用`ThreadPool.QueueUserWorkItem`. 我不确定这是否为每个项目使用了一个新线程。如果没有，那么我也可以将其键入上下文。

**更新：**根据[ThreadPool 类 - MSDN](http://msdn.microsoft.com/en-us/library/system.threading.threadpool%28v=vs.100%29.aspx)，它确实重用了线程。而且它不会清除线程数据。

> 线程池重用线程时，不会清除线程本地存储中的数据，也不会清除带有 ThreadStaticAttribute 属性标记的字段中的数据。因此，当一个方法检查线程本地存储或标记有 ThreadStaticAttribute 属性的字段时，它找到的值可能是线程池线程的早期使用遗留下来的。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-14T16:22:14.007

一种解决方案是使用具有以下属性的**公共静态字段**[`ThreadStatic`](http://msdn.microsoft.com/en-us/library/system.threadstaticattribute.aspx)：

```
[ThreadStatic]
public static int ThreadSpecificStaticValue; 
```

> 标有 ThreadStaticAttribute 的静态字段不在线程之间共享。每个执行线程都有一个单独的字段实例，并独立设置和获取该字段的值。如果在不同的线程上访问该字段，它将包含不同的值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T16:21:42.510

您可以使用线程类的内置存储机制：

```
public class Program
{
  private static LocalDataStoreSlot _Slot = Thread.AllocateNamedDataSlot("webserver.data");

  public static void Main(string[] args)
  {
    var threads = new List<Thread>();

    for (int i = 0; i < 5; i++)
    {
      var thread = new Thread(DoWork);
      threads.Add(thread);
      thread.Start(i);
    }

    foreach (var thread in threads) thread.Join();
  }

  private static void DoWork(object data)
  {
    // initially set the context of the thread
    Thread.SetData(_Slot, data);

    // somewhere else, access the context again
    Console.WriteLine("Thread ID {0}: {1}", Thread.CurrentThread.ManagedThreadId, Thread.GetData(_Slot));
  }

} 
```

样本输出：

![在此处输入图像描述](../Images/c3a6897094d225cf78bb729dfce52d1b.png)

这也适用于线程池产生的线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:08:57.033

如果您的网络服务器是基于实例的，为什么不将所有必需的数据保留在其中？如果每个实例都锁定到某个线程，应该没有问题。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-14T16:25:30.167

为什么要创建 HTTP 服务器，使用[SignalR](http://signalr.net/)，看起来很奇怪的答案，但想想看

# php - Laravel 3 通过使用 PDO::FETCH_ASSOC 返回的数组中的每一个

> ID：15414314
> 
> 赞同：0
> 
> 时间：2013-03-14T16:05:12.563
> 
> 标签：php, foreach, laravel, eloquent, laravel-3

我正在使用 Laravel 3，我认为它很棒。好的，我将我的数据库配置设置为返回关联数组来帮助我。我的控制器工作正常，我遇到的问题是：如何将返回到刀片模板的多个数组传递给每个数组？

例如：

```
 Route::get('allprop', function() {

    $data= User::find(165)->property;

}); 
```

这将返回：

```
 array(45) {
  [0]=>
  object(Property)#42 (5) {
    ["attributes"]=>
   array(52) {
  ["id"]=>
  int(71)
  ["code"]=>
  string(32) "b073d07a1357bebf0a6c8b0a193a561b"
  ["ownerid"]=>
  int(165)
  ["profileid"]=>
  int(23)
  ["unit_num"]=>
  string(3) "101"
  ["street_num"]=>
  string(3) "498"
  ["address1"]=>
  string(10) "Mifarm Rd."
  ["address2"]=>
  string(8) "Address2"
  ["city"]=>
  string(11) "White Stone"
  ["county"]=>
  string(4) "York"
  ["subdivision"]=>
  string(11) "White Stone"
  ["state"]=>
  string(2) "VA"
  ["postcode"]=> 
```

当我将 $data 数组传递给模板时，我迷失了如何访问数组的每个属性

当我尝试时，它说变量 $data 未找到：

```
 foreach ($data as $thumb){
  echo $thumb->postcode;
  } 
```

任何帮助都会很棒，我知道这可能很简单，但我似乎无法在文档或 Code Happy 上找到答案......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:11:58.967

为了访问`$data`您的模板，您需要将其传递给您的模板，如下所示：

```
return View::make("yourtemplate")
    ->with("data", $data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:39:56.113

文档对此非常清楚：

[http://laravel.com/docs/views#binding-data-to-views](http://laravel.com/docs/views#binding-data-to-views)

# plsql - 创建删除和更新其他表中数据的触发器

> ID：15414320
> 
> 赞同：0
> 
> 时间：2013-03-14T16:05:25.163
> 
> 标签：plsql, triggers

我有 2 张桌子。我需要在 PL/SQL 中编写一个触发器，随时更新或删除表 1（赋值）中的 PROJCODE，更新项目中的代码，并从项目中删除不再出现在表 1 中的代码。然后在项目表中打印出列（代码）

我尝试编写此代码，但仍然收到代码未声明的错误，并且 :new.code 和 :old.code 是错误的绑定变量 'OLD.CODE'！

```
CREATE OR REPLACE TRIGGER update_1
  BEFORE UPDATE OR DELETE OF PROJCODE
  ON ASSIGNMENT
  FOR EACH ROW
BEGIN
  IF UPDATING THEN
    UPDATE PRODUCT P
    SET P.CODE = :new.CODE
    WHERE P.CODE = :old.CODE;
  ELSE
     DELETE FROM PROJECT WHERE :old.CODE= CODE ;
  END IF;
     DBMS_OUTPUT.PUT_LINE(CODE);
END; 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:26:55.193

你的触发器应该变成：

```
CREATE OR REPLACE TRIGGER update_1
  BEFORE UPDATE OR DELETE ON PROJCODE
  REFERENCING new AS new old AS old
  FOR EACH ROW
BEGIN
  IF UPDATING THEN
    UPDATE PRODUCT P
    SET P.CODE = :new.CODE
    WHERE P.CODE = :old.CODE;
  ELSE
     DELETE FROM PROJECT WHERE :old.CODE= CODE ;
  END IF;
     DBMS_OUTPUT.PUT_LINE(CODE);
END;
/ 
```

# reporting-services - 单击钻取链接到子报表时，SSRS 显示正在加载...gif

> ID：15414323
> 
> 赞同：0
> 
> 时间：2013-03-14T16:05:33.087
> 
> 标签：reporting-services, sql-server-2008-r2, reportviewer2008

我有一个带有详细钻取报告的摘要报告。用户抱怨钻取不起作用。它正在工作，但在某些情况下，渲染需要几秒钟以上的时间。并且没有迹象表明子报表已被调用并且正在“加载”。所以他们最终会点击多次，等等。

当用户单击操作链接时，似乎什么都没有发生。虽然报告被调用并生成。没有显示“加载” gif，因为他们习惯于在单击“查看报告”时看到。

用户访问 ReportBuilder 类型页面，他们可以在其中调用预设报告并选择参数和查看报告。

有没有办法让操作链接在单击时显示“正在加载”消息？与单击查看报告一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:14:04.503

不，不是直接在语言中。您将不得不涉及其他框架来执行诸如 SSRS Web 服务之类的事情，而托管不这样做。您可以尝试另外两件事，但它们更先进。

1.  弹出报告而不是使用操作进行深入分析。您将一些 javascript 混入其中，您可以弹出窗口而不是钻取。这将显示另一个报告加载。我得到这个的网站已经关闭，但它可能会恢复： [http ://tavislovell.com/wordpress/how-to-make-ssrs-reports-in-a-performancepoint-dashboard-pop-out-or-在新窗口中打开 2/](http://tavislovell.com/wordpress/how-to-make-ssrs-reports-in-a-performancepoint-dashboard-pop-out-or-open-in-a-new-window-2/)

我相信它与此类似：

```
javascript:void(window.open('http:// (ServerName)/ReportServer/Pages/ReportViewer.aspx?%2F(PathToReport)&Impacted=true', '', 'width=1000, height=800, top=0, resizable=yes')) 
```

本质上，您破解您的服务，让 javascript 打开一个窗口，将您的报告与现有报告分开。这很好用，但我不确定我是否为示例捕获了所有正确的单引号。我使用了一个表达式，所以我从中解码它。

1.  通过 ASP.NET 或 HTML 站点处理所有内容，并通过调用使表单完成所有工作。有些人不喜欢 SSRS 前端，所以他们建立了自己的站点，只调用 Web 服务。这是很多工作，所以只有你愿意花时间才能完成。

最后的一些想法是要记住，与其他更华丽的图表选项相比，SSRS 有一些明确的限制。它做得很好，但仅此而已。做实时仪表板或分层报告真的不是很好。与其他一些报告选项相比，它确实在快速处理 SQL Server 数据方面表现出色，并且可以针对速度进行高度优化。如果你想做一些事情，比如向用户显示加载屏幕、实时事件驱动的操作或分层报告，SSRS 会让你失望。

# javascript - indexeddb 从对象存储中获取所有键

> ID：15414326
> 
> 赞同：3
> 
> 时间：2013-03-14T16:05:37.403
> 
> 标签：javascript, html, indexeddb, persistent-object-store

我是 indexeddb 的新手。假设我将几个对象放入索引数据库：

```
transaction.objectStore("some_store").put(some_object, some_key); 
```

现在我想从该对象存储中获取所有密钥。那可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T05:12:16.137

正如 Kristof 所说，可以使用 openCursor 方法。它效率不高，因为请求值游标对象*可能*涉及反序列化。

您还应该注意，您的 put 方法返回插入对象的主键。

目前，如果您想要非常有效的键检索，请为内联键对象存储索引 keyPath。对于离线对象存储，您很不走运。使用索引，您可以按如下方式检索键：

```
transaction.objectStore("some_store").index('id').openKeyCursor(); // here id is primary key path 
```

有一个直接请求对象存储的 openKeyCursor 方法的[错误报告。](https://www.w3.org/Bugs/Public/show_bug.cgi?id=19955)希望下一个 IndexedDB 规范会有它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:48:14.537

您将需要使用 openCursor 方法逐个检索所有记录。仅获取密钥是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-10T10:41:55.290

有：**IDBObjectStore.getAllKeys()**方法，它将从对象存储中返回所有键。

有关此方法的更多信息，请参阅：[https ://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore/getAllKeys](https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore/getAllKeys)

您可以将其与**IDBObjectStore.getAll()**方法一起使用并组合结果。

缺点是在执行这些方法之间不应将任何数据添加到存储中。

# authentication - Worklight 5.0.5.1 && 保护应用程序

> ID：15414327
> 
> 赞同：1
> 
> 时间：2013-03-14T16:05:38.593
> 
> 标签：authentication, ibm-mobilefirst

我正在使用示例“Module_21_-_Form_Based_Authentication”（可在[IBM 入门网站](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html)上获得）

在此示例中，保护位于适配器 (DummyAdapter.xml)

```
<procedure name="getSecretData" securityTest="DummyAdapter-securityTest"/> 
```

我想对应用程序进行保护。为了做到这一点，我在 application-descriptor.xml 中有以下行

```
<common securityTest="DummyAdapter-securityTest"/> 
```

**使用 Worklight v5.0.5 evrything 可以完美运行，但使用 Worklight v5.0.5.1 我有一个问题**。登录表单未正确显示（不透明度），“正在加载”仍然可见。

```
<div id="WLbusyContainer">
     <div id="WLbusyOverlay"></div>
      <div id="WLbusy" style="left: 695.5px; top: 218px;">
     <h1 id="WLbusyTitle">Loading</h1></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:04:15.220

当显示忙碌指示符（“正在加载...”）时，会显示不透明度，实际上是应用程序上的覆盖。在 v5.0.5.1 中，忙指示符有一些不幸的错误。即将发布的 v5.0.6 中进行了修复，它还解决了始终显示忙碌指示器的问题。

作为同时的解决方法，您可以在 yourApplication\common\js\initOptions.js 中将 connectOnStartup 设置为“false”

或者，您可以将 connectOnStartup 保持为“true”，并在 wlCommonInit 中尝试以下操作：

```
setTimeout(function(){
   WL.Client.__hideBusy();
}, 500); 
```

# c# - 从 Excel 文件推断 XSL 工作表

> ID：15414335
> 
> 赞同：0
> 
> 时间：2013-03-14T16:06:04.073
> 
> 标签：c#, xml, excel, xslt

我不确定这是否可能，但就是这样。我知道可以从 XML 生成 Excel 文件并使用 XSL 对其进行格式化。是否可以通过一些 C# 代码提供 Excel 文件以从中推断 XSL？我想要做的是在 Excel 中创建一个模板，推断一个 XSL 表，然后我将使用它通过我的系统解析一些 XML，并使用 XSL 格式填充一个 Excel 表。我知道这听起来令人困惑，但在我浪费更多时间上网之前，我想知道是否有人知道这是否可能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:28:52.020

嗯，我不太了解 Excel 的 XML 格式，我更喜欢 OpenDocument 格式，它适用于 OpenDocument 工作表、.ods 文件（OpenOffice、LibreOffice ...）。它是完整的 XML，因此您可以肯定地从 XML 输入生成它。我使用 XSLT 从 .ods 生成 XML 或从 XML 生成 .ods。我认为 Excel 是一样的，只要您可以访问 Excel 文件的 XML 内容。

# inno-setup - 如何在设置输出文件名中包含版本信息？

> ID：15414336
> 
> 赞同：18
> 
> 时间：2013-03-14T16:06:06.800
> 
> 标签：inno-setup

我有一个带有版本信息的应用程序，我想将其包含在设置输出文件名中。例如，如果应用程序有版本`3.10.1`，我想获取`setup_3.10.1.exe`输出文件而不是默认值`setup.exe`作为由 Inno Setup 生成的输出文件。

是否可以在设置输出文件名中包含某个应用程序的版本信息？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-14T16:19:42.953

使用该[`OutputBaseFilename`](http://jrsoftware.org/ishelp/topic_setup_outputbasefilename.htm)指令并将[`GetFileVersion`](http://jrsoftware.org/ispphelp/topic_getfileversion.htm)预处理器函数的结果分配给它的值：

```
#define AppVer GetFileVersion('MyApp.exe')

[Setup]
OutputBaseFilename=setup_{#AppVer}
... 
```

# google-plus - 澄清 Google Plus API 配额

> ID：15414337
> 
> 赞同：3
> 
> 时间：2013-03-14T16:06:07.560
> 
> 标签：google-plus, quotas

[Google API](https://code.google.com/apis/console)`Google+ API`控制台区分和`Google+ API (Sign-in)`。这里的确切区别是什么，即后者指的是什么特定的调用？

（登录配额显示为每个用户每秒显示的数量，如果它真的只是单个用户登录，这似乎过多。我猜这是一个任意值。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:30:28.080

需要`https://www.googleapis.com/auth/plus.login`范围授权的方法属于“Google+ API（登录）”配额。所有其他 Google+ 方法都属于“Google+ API”配额。

“Google+ API（“登录”）配额涵盖以下方法：

*   人员列表
*   人.get
*   时刻.插入
*   时刻.删除
*   时刻表

Google+ API 配额： - 所有其他方法

[有关配额的文档信息](https://developers.google.com/+/api/#quota)

# lua - 嵌套的 for 循环无法正常工作

> ID：15414339
> 
> 赞同：0
> 
> 时间：2013-03-14T16:06:11.700
> 
> 标签：lua

我有将两个表的条​​目相互比较并将具有相同值的条目放入第三个表的代码：

```
for i = 1, #hand do
    for j = i+1, #hand do
        if( hand[i].number == hand[j].number ) then
            if not done[i] then
                done[i] = true;
                table.insert(cards, hand[i]);
            end
            if not done[j] then
                done[j] = true;
                table.insert(cards, hand[j]);
            end
        end
    end
end 
```

我遇到的问题是它会添加至少一个不同的其他条目。我检查了打印件，我注意到的一件事是，至少在一种情况下，它添加的附加条目是单独的倍数。即，如果要检查的值是 6、6、10、10，我希望前 2 个条目被插入到第三个表中，而不是最后两个。如何设置此代码以防止将来发生这种情况？谢谢。

编辑： done 是在 for 循环之外创建的本地表。此代码的目的是每次只查找表“hand”中的最低倍数，其中“hand”按数字从低到高排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:29:00.193

```
for i = 1, #hand - 1 do
  if hand[i].number == hand[i+1].number then
     local j = i
     while hand[i].number == hand[j].number do
        if not done[j] then
           done[j] = true
           table.insert(cards, hand[j])
        end
        j = j + 1
     end
     break
  end
end 
```

# django - Django ElasticBeanstalk 更改存储桶

> ID：15414343
> 
> 赞同：1
> 
> 时间：2013-03-14T16:06:17.180
> 
> 标签：django, amazon-s3, amazon-elastic-beanstalk

我一直在使用亚马逊 ElasticBeanstalk 的服务，它似乎会自动为 Django 应用程序创建一个存储桶以保存静态文件。我想在此服务中上传我的第二个 django 应用程序，但是我担心将同一个存储桶与两个不同的应用程序一起使用。我查看了 .ebextesions/name_app.config 以分配一个新的存储桶，但我找不到任何东西。

我在这里有两个问题。

新的 django 应用程序是否会通过使用相同的存储桶来干扰其他应用程序？

是否可以在 ElasticBeanstalk 中使用新存储桶？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-13T07:30:50.670

1.  ElasticBeanstalk`elasticbeanstalk-region-account-id` 为您创建环境的每个区域创建一个 S3 存储桶。

您的新 django 应用程序不会干扰同一存储桶中的其他应用程序，因为它会创建 django 环境的两个不同文件夹，它们各自的运行时文件夹具有当前版本文件驻留在此处：

```
bucketName/resources/environments/environmentID/_runtime/_versions 
```

2.  您无法为 elasticBeanstalk 应用程序创建新的存储桶，您可以通过更改其存储桶策略将其删除。

希望这对你有帮助！

# ipad - xCode 4.6，iPad 是否可以将“老派”弹簧支柱用于情节提要而不是约束？

> ID：15414345
> 
> 赞同：0
> 
> 时间：2013-03-14T16:06:19.770
> 
> 标签：ipad, interface, constraints, xcode4.6, autoresizingmask

我最近不幸升级到 xCode 4.6 并注意到当我为旧的 <--> |--| 布置故事板时 视图的弹簧和支柱消失了，取而代之的是一些相对于视图的奇怪内容偏移。我不再理解我的观点会发生什么，并想使用我习惯的“老派”弹簧和支柱。是否可以强制 xCode 4.6 显示故事板/笔尖文件的弹簧和支柱，就像它们在旧 xCode 中一样？

这是我想看到的（自动调整蒙版）： ![旧弹簧和支柱](../Images/ee2ab5ae16da9a8684f45dafd413a60c.png)

这就是我看到的（约束）：

![在此处输入图像描述](../Images/5a63487b5065bec399173b9a976ccef4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:25:00.997

只需`Use autoLayout`从您的文件检查器中取消选中。它会自动从您的 xib 中删除约束

选择故事板文件，然后选择右侧面板中的第一个图标，标志位于所提供图像的底部。 ![在此处输入图像描述](../Images/9582c9189952faebc03e1df4ca34130a.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:09:47.450

在 XCode 中打开 Utilities 面板，选择您的 XIB 并在 Xcode Utilities 面板中单击 Show File Inspector。它是顶部最左侧的图标。取消选中“使用自动布局”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:09:00.217

是的。在导航器中选择文件，然后在右侧，切换到文件属性窗格并关闭约束。

# performance - Firefox 在 Highcharts 和 Highstocks 上的性能问题

> ID：15414346
> 
> 赞同：2
> 
> 时间：2013-03-14T16:06:21.493
> 
> 标签：performance, firefox, highcharts, highstock

*这个问题主要是[Highcharts 支持团队的 FOA，他们说他们会关注 StackOverflow](http://highslide.com/forum/viewtopic.php?f=9&t=7673)，但如果你想回答，请随意。*

我在使用 Firefox 时遇到性能问题。这是我的配置：

```
Firefox: 19.0.2  
OS: ubuntu 12.04 (x64) 
```

问题是当将鼠标拖过一条线时，动画（工具提示、标记、十字准线的显示...）会滞后。这发生在[具有 52K 点的 Highstock (1.2.5) 演示上](http://www.highcharts.com/stock/demo/data-grouping)，但更令人担忧的是，它也发生在[少于 200 点的简单 Highcharts (2.3.5) 图表上](http://jsfiddle.net/gT6mK/2/)。我对 Chrome (25.0.1364.160) 没有任何问题。

**您能否提供一些有关此性能问题的反馈（您是否遇到同样的情况？这是否仅影响 Firefox？这是否仅影响某些版本？，您知道/是否有解决方案可用？...）？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:58:11.923

你看过这篇文章吗？[http://www.highcharts.com/component/content/article/2-news/48-loading-millions-of-points-in-highcharts](http://www.highcharts.com/component/content/article/2-news/48-loading-millions-of-points-in-highcharts)

您还可以尝试禁用阴影/动画并比较此修改是否对性能有影响。

# c# - 如何批量循环遍历IEnumerable

> ID：15414347
> 
> 赞同：97
> 
> 时间：2013-03-14T16:06:22.467
> 
> 标签：c#, ienumerable

我正在开发一个 C# 程序，它有一个“IEnumerable 用户”，它存储了 400 万用户的 id。我需要遍历 IEnumerable 并每次提取一批 1000 个 id 以在另一种方法中执行一些操作。

如何从 IEnumerable 开始一次提取 1000 个 id，做其他事情，然后获取下一批 1000 等等？

这可能吗？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2013-03-14T16:10:37.980

您可以使用[MoreLINQ 的 Batch 运算符](https://github.com/morelinq/MoreLINQ#batch)（可从 NuGet 获得）：

```
foreach(IEnumerable<User> batch in users.Batch(1000))
   // use batch 
```

* * *

如果不能选择简单地使用库，则可以重用实现：

```
public static IEnumerable<IEnumerable<T>> Batch<T>(
        this IEnumerable<T> source, int size)
{
    T[] bucket = null;
    var count = 0;

    foreach (var item in source)
    {
       if (bucket == null)
           bucket = new T[size];

       bucket[count++] = item;

       if (count != size)                
          continue;

       yield return bucket.Select(x => x);

       bucket = null;
       count = 0;
    }

    // Return the last bucket with all remaining elements
    if (bucket != null && count > 0)
    {
        Array.Resize(ref bucket, count);
        yield return bucket.Select(x => x);
    }
} 
```

顺便说一句，为了性能，您可以简单地返回存储桶而不调用`Select(x => x)`. Select 针对数组进行了优化，但仍会在每个项目上调用选择器委托。所以，在你的情况下，最好使用

```
yield return bucket; 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-03-14T16:10:38.020

听起来您需要使用对象的 Skip 和 Take 方法。例子：

```
users.Skip(1000).Take(1000) 
```

这将跳过前 1000 个并取接下来的 1000 个。您只需要增加每次调用跳过的数量

您可以将整数变量与 Skip 参数一起使用，您可以调整跳过的数量。然后，您可以在方法中调用它。

```
public IEnumerable<user> GetBatch(int pageNumber)
{
    return users.Skip(pageNumber * 1000).Take(1000);
} 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-03-14T16:08:17.260

最简单的方法可能就是使用[`GroupBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)LINQ 中的方法：

```
var batches = myEnumerable
    .Select((x, i) => new { x, i })
    .GroupBy(p => (p.i / 1000), (p, i) => p.x); 
```

但是对于更复杂的解决方案，请参阅这篇[博客文章](http://www.make-awesome.com/2010/08/batch-or-partition-a-collection-with-linq/)，了解如何创建自己的扩展方法来执行此操作。为后代复制这里：

```
public static IEnumerable<IEnumerable<T>> Batch<T>(this IEnumerable<T> collection, int batchSize)
{
    List<T> nextbatch = new List<T>(batchSize);
    foreach (T item in collection)
    {
        nextbatch.Add(item);
        if (nextbatch.Count == batchSize)
        {
            yield return nextbatch;
            nextbatch = new List<T>(); 
            // or nextbatch.Clear(); but see Servy's comment below
        }
    }

    if (nextbatch.Count > 0)
        yield return nextbatch;
} 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2018-07-05T17:42:59.383

怎么样

```
int batchsize = 5;
List<string> colection = new List<string> { "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"};
for (int x = 0; x < Math.Ceiling((decimal)colection.Count / batchsize); x++)
{
    var t = colection.Skip(x * batchsize).Take(batchsize);
} 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2013-03-14T16:11:45.393

尝试使用这个：

```
 public static IEnumerable<IEnumerable<TSource>> Batch<TSource>(
        this IEnumerable<TSource> source,
        int batchSize)
    {
        var batch = new List<TSource>();
        foreach (var item in source)
        {
            batch.Add(item);
            if (batch.Count == batchSize)
            {
                 yield return batch;
                 batch = new List<TSource>();
            }
        }

        if (batch.Any()) yield return batch;
    } 
```

并使用上述功能：

```
foreach (var list in Users.Batch(1000))
{

} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-03-14T16:08:29.377

您可以使用 Take and Skip Enumerable 扩展方法来实现。有关使用检查[linq 101的更多信息](http://code.msdn.microsoft.com/LINQ-Partitioning-Operators-c68aaccc)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-03-14T16:13:46.603

像这样的东西会起作用：

```
List<MyClass> batch = new List<MyClass>();
foreach (MyClass item in items)
{
    batch.Add(item);

    if (batch.Count == 1000)
    {
        // Perform operation on batch
        batch.Clear();
    }
}

// Process last batch
if (batch.Any())
{
    // Perform operation on batch
} 
```

您可以将其概括为通用方法，如下所示：

```
static void PerformBatchedOperation<T>(IEnumerable<T> items, 
                                       Action<IEnumerable<T>> operation, 
                                       int batchSize)
{
    List<T> batch = new List<T>();
    foreach (T item in items)
    {
        batch.Add(item);

        if (batch.Count == batchSize)
        {
            operation(batch);
            batch.Clear();
        }
    }

    // Process last batch
    if (batch.Any())
    {
        operation(batch);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-14T16:10:59.450

您可以使用`Take operator linq`

链接：http: [//msdn.microsoft.com/fr-fr/library/vstudio/bb503062.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/bb503062.aspx)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-11-20T16:22:03.273

在流式上下文中，枚举器可能在批处理中间被阻塞，仅仅是因为尚未生成值（yield），因此有一个超时方法很有用，以便在给定时间后生成最后一批。例如，我用它来跟踪 MongoDB 中的游标。这有点复杂，因为枚举必须在另一个线程中完成。

```
 public static IEnumerable<List<T>> TimedBatch<T>(this IEnumerable<T> collection, double timeoutMilliseconds, long maxItems)
    {
        object _lock = new object();
        List<T> batch = new List<T>();
        AutoResetEvent yieldEventTriggered = new AutoResetEvent(false);
        AutoResetEvent yieldEventFinished = new AutoResetEvent(false);
        bool yieldEventTriggering = false; 

        var task = Task.Run(delegate
        {
            foreach (T item in collection)
            {
                lock (_lock)
                {
                    batch.Add(item);

                    if (batch.Count == maxItems)
                    {
                        yieldEventTriggering = true;
                        yieldEventTriggered.Set();
                    }
                }

                if (yieldEventTriggering)
                {
                    yieldEventFinished.WaitOne(); //wait for the yield to finish, and batch to be cleaned 
                    yieldEventTriggering = false;
                }
            }
        });

        while (!task.IsCompleted)
        {
            //Wait for the event to be triggered, or the timeout to finish
            yieldEventTriggered.WaitOne(TimeSpan.FromMilliseconds(timeoutMilliseconds));
            lock (_lock)
            {
                if (batch.Count > 0) //yield return only if the batch accumulated something
                {
                    yield return batch;
                    batch.Clear();
                    yieldEventFinished.Set();
                }
            }
        }
        task.Wait();
    } 
```

# android - android语音识别一直没有答案

> ID：15414349
> 
> 赞同：-1
> 
> 时间：2013-03-14T16:06:26.297
> 
> 标签：android, voice-recognition

我想创建一个等待特定关键字语音的 android 应用程序：当用户说出这个关键字时，服务准备好接收用户语音命令。所以我正在寻找一个连续的语音识别器，

比如这个人：

[我可以让语音识别器无限期地收听吗？](https://stackoverflow.com/questions/10182893/can-i-keep-the-speech-recognizer-listening-indefinitely)

比如这个人：

[Android中的连续语音识别](https://stackoverflow.com/questions/6027466/continuous-speechrecognition-in-android)

还有这个人：

[连续语音识别 Android](https://stackoverflow.com/questions/3148603/continuous-speech-recognition-android)

但说真的，所有这些都没有一个明确的答案！有没有人能够管理这个？有源代码吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T16:47:32.267

创建一个服务并将您的识别器代码放在那里，它将起作用。您的意图需要以下内容

```
mSpeechRecognizerIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                                    RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, 
                                    this.getPackageName()); 
```

有关更多信息，请参阅[http://developer.android.com/reference/android/speech/RecognizerIntent.html](http://developer.android.com/reference/android/speech/RecognizerIntent.html)。

# algorithm - 算法的时间复杂度是多少？

> ID：15414352
> 
> 赞同：1
> 
> 时间：2013-03-14T16:06:35.003
> 
> 标签：algorithm, time-complexity

这是算法教科书中的一个问题，我认为时间复杂度是 log(n!)，但我的同学说它是 nlog(n)。非常感谢您的回复！！

```
count ← 0
for i ← 1 to n do
    j ← ⌊n/2⌋
    while j ≥ 1 do
        count ← count + 1
        if j is odd then
           j←0
        else
           j ← j/2
        end if
    end while
 end for 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:54:41.500

> 我认为时间复杂度是`log(n!)`，但我同学说是`nlog(n)`。

你俩都是对的。从[斯特林公式](http://en.wikipedia.org/wiki/Stirling%27s_approximation)可以看出，

```
log n! = n * log n - n +O(log(n)), 
```

（`log`这里是自然对数）更准确地说：

```
log n! = (n + 1/2) * log n - n + 1/2 * log (2π) + O(1/n) 
```

所以`O(log n!)`和`O(n*log n)`是同一类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:16:30.377

取最坏情况，n = 2 ^p

*   循环 1 到 n
*   对于每个循环，将*j*除以 2 直到它 < 1

所以，`n * log`[2]`(n)`次迭代，或时间复杂度`O(n log(n))`

--

（根据评论，日志基数在复杂性上不是必需的，因为*log [2] (x)*实际上是*log(x)/log(2)*即*log(x) 乘以常数*）

# facebook - 通过 iframe 处理 url

> ID：15414356
> 
> 赞同：1
> 
> 时间：2013-03-14T16:06:40.697
> 
> 标签：facebook, angularjs, facebook-apps

我有一个用 angularjs 编写的 facebook 应用程序，除了当我浏览应用程序的各种链接（例如[http://[baseurl]/#/item/25](http://[baseurl]/#/item/25) ）时，这一切都像一个魅力导航栏中显示的 url 仍然是[http://apps.facebook.com/MyTestApp/](http://apps.facebook.com/MyTestApp/)

所以我在这里需要的是能够在包含我的应用程序的 iframe 之外反映 angularjs 路由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:07:36.280

最后，我通过解析 url 中的参数来管理这种情况，例如

[http://apps.facebook.com/MyTestApp/index.php?p=goto#item/48](http://apps.facebook.com/MyTestApp/index.php?p=goto#item/48)

因此，一方面，一旦我登陆 index.php，我通过 php 检查 $_GET['vairable'] 并将其用作触发器来获取哈希字符串以提供直接执行的 javascript 变量, 在包括角度之前。因此，一旦 mainController（与索引关联的角度控制器）被执行，带有路径的变量就已经被实例化了。此时 angular 检测到有一个变量强制路径去某个地方，它将在那里获得路由。

这是一些代码

标记中的 index.php，就在 jquery lib 包含之后和 angular 包含之前

```
<script language="javascript" type="text/javascript">
    var redirect_to = null;

    $(function() {
        <?php
                // redirecting rulez
            if(isset($_GET['p'])) {
                ?>
                    redirect_to = window.parent.location.hash.substring(1);
                <?php
            }
        ?>

    });
</script> 
```

mainControl.js 是在您加载 index.php 时受到打击的那个

```
if(redirect_to != null)
    $location.path(redirect_to); 
```

在其他控制器中

```
if(redirect_to != null) 
    window.parent.location.hash = "#" + $location.path(); 
```

对所有其他控制器重复。请享用

# sql - 内连接错误（multi-part identifier could not be bound error only on using）

> ID：15414359
> 
> 赞同：3
> 
> 时间：2013-03-14T16:06:42.210
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我在 SQL SERVER 2008 上的存储过程中编写了以下查询：（我故意截断了表名，并使查询更易于阅读）

1)

```
select Pr.Id from D D , DP DP, P P, Pr Pr
where D.Id = DP.Id AND DP.Id = P.Id AND P.Id = Pr.Id; 
```

它工作得很好，但是当我使用 Inner Joins 编写相同的查询时

2)

```
select Pr.PId  from D D
INNER JOIN DP DP ON D.Id = DP.Id
INNER JOIN P P ON DP.Id = P.Id 
INNER JOIN Pr Pr ON P.Id = Pr.Id 
```

它引发错误：无法绑定多部分标识符“Pr.Id”。

3）我再次尝试了另一个版本：

```
select Pr.Id  from Pr Pr
INNER JOIN P P ON Pr.Id = P.Id
INNER JOIN DP DP ON P.Id =  DP.Id
INNER JOIN Dealer D ON DP.Id = D.Id 
```

我不明白为什么 1 & 3 工作而 2 不工作。虽然我觉得他们都是一个意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:23:51.403

由于示例 2) 和 3) 之间的区别在于`Pr`表的位置，并且由于您的错误引用`Pr.Id`，我的假设是您尝试`Pr`在连接序列中引用表之前使用列。

一个简单的例子：

```
select a.ID
from a
join b on a.id = b.id and a.id = c.id <--- referenced too early.
join c on c.id = b.cid 
```

会给你错误：

```
The multi-part identifier "c.id" could not be bound. 
```

由于您试图在表别名出现在您的连接序列中之前引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:58:22.227

在 2) 你有

> 选择 Pr.PId

在 1) 和 3) 中，您有

> 选择 Pr.Id

Pr 有 PId 列吗？还是只是一个错字？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:23:57.067

您的 Pr 表需要别名吗？我不知道你缩短了你的表名。按原样发布代码将帮助我们识别问题。

尝试：

```
select Pr.PId  from D D
INNER JOIN DP DP ON D.Id = DP.Id
INNER JOIN P P ON DP.Id = P.Id 
INNER JOIN Pr Pr ON P.Id = Pr.Id
```

# ruby - 使用正则表达式在 Ruby 中查找字符串中的两个数字

> ID：15414361
> 
> 赞同：1
> 
> 时间：2013-03-14T16:06:47.360
> 
> 标签：ruby, regex

我有一个看起来像这样的字符串：

结果 1 - 10 的 20

我如何在 Ruby 中使用正则表达式找到该句子的数字 10 和 20？

就像是：

```
first_number, second_number = compute_regex(my_string)... 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:11:13.813

像这样：

```
first, second = *source.scan(/\d+/)[-2,2] 
```

**解释**

`\d+`匹配任何数字

`scan`查找其正则表达式参数的所有匹配项`source`

`[-2,2]`返回数组中的最后两个数字：`-2`从末尾的索引开始，返回下一个`2`

`*`splat 运算符将这两个匹配项解压缩到变量中`first`，并且`second`（**注意**：此运算符不是必需的，您可以删除它，我喜欢[这个](http://4loc.wordpress.com/2009/01/16/the-splat-operator-in-ruby/) [概念](http://endofline.wordpress.com/2011/01/21/the-strange-ruby-splat/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:10:37.560

试试这个：

```
a = "Results 1 - 10 of 20"
first_number, second_number = a.match(/\w+ (\d) \- (\d+) of (\d+)/)[2..3].map(&:to_i) 
```

这`map`部分是必要的，因为返回的正则表达式`MatchData`对象是字符串。

# java - java中的int用完了20亿，还有其他选择吗？

> ID：15414364
> 
> 赞同：-8
> 
> 时间：2013-03-14T16:07:01.257
> 
> 标签：java, integer, max

我在Java应用程序中使用int作为PK，现在它已经达到了最大int值（20亿），即使在DB中它也可以存储比它更多的数字。但是 java int 只能容纳大约 20 亿。

我无法将 int 更改为 long 以与 DB 对齐。因为这是巨大的努力。

除了这个，有人有什么办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T16:11:18.480

Java 中整数的最大值为 2,147,483,647。如果您需要更大的数字，则必须更改为 long。您也可以使用整数的负值范围，但如果您已经达到最大值，您可能很快就会用完空间。

但是，如果数据库中没有 20 亿个元素，则可以重用未使用的主键。这可能效率低下，因为您必须搜索未使用的密钥。

我建议只是通过更改代码的努力。从长远来看，现在付出努力会得到回报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:09:58.900

> 我无法将 int 更改为 long 以与 DB 对齐。因为这是巨大的努力。

从长远来看，您别无选择。开始编码。

实际上，如果您有条不紊地进行，您可能会发现这根本不是一项巨大的努力。Java IDE 非常适合帮助您进行此类更改。

* * *

@jjnguy 建议您让键环绕为负数。这将为您提供 20 亿左右的额外密钥，但是：

*   您可能会比第一个 20 亿更快地使用第二个 20 亿，并且
*   您的应用程序（或数据库）可能依赖于始终增加的键。

所以我会避免这种情况，除非即将发生翻车。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:09:47.810

我假设您没有对 ID 使用负值。如果是这种情况，您可以让值溢出为负值。这将给您一些时间来重构您的代码以使用 a`long`来存储您的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-16T13:36:23.770

你只需要用 uint、long 等替换 int 就没有别的办法了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-05T20:31:36.573

这里大家建议改成long。在我看来，这也是最直接的方法。但是，你要求一个不同的。

您还可以创建另一个具有长值的列，从 PK 中复制该值，然后将其设置为 PK。虽然我认为这在技术上是更多的工作，但对于您的情况来说，它可能会更好，严格来说，这是对您对另一种方法的问题的回答。

（也许你有某种分片情况，有数千个分片，你不可能同时交换所有分片）。无论哪种方式都要非常小心！运行测试！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-11-21T15:06:07.713

`BigInteger`在 Java 中使用类。你可以变大，我的意思是非常大的值。请参考此链接：[如何使用 BigInteger？](https://stackoverflow.com/questions/1783912/java-how-to-use-biginteger)

# sql - 搜索“没有这些词”的 SQL 查询

> ID：15414367
> 
> 赞同：-5
> 
> 时间：2013-03-14T16:07:04.313
> 
> 标签：sql, sql-server, tsql, sql-server-2012

我想创建一个查询并获取特定单词不在搜索结果中的结果。

知道我该怎么做吗？

我正在使用 SQL Server 2012

表 1：客户信息

```
名
姓
客户ID
报告
```

我想在报告字段中搜索数据。那是一种`NVARCHAR`数据类型。

所以在我的示例中，我想查找所有不包含“止赎”一词的报告

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:10:37.047

```
WHERE [field name] NOT IN ("word1","word2","...")

WHERE [field name] NOT LIKE '%@myword%'

WHERE @myword NOT IN [field name] 
```

等等

编辑

```
WHERE [Report] NOT LIKE '%foreclosure%' 
```

否则，请查看联机丛书中的 CHARINDEX 或任何数量的其他字符串函数。

# java - 未调用 Java Paintcomponent

> ID：15414372
> 
> 赞同：0
> 
> 时间：2013-03-14T16:07:16.170
> 
> 标签：java, paint

```
public class AnaMetod {

    public static void main(String[] args) {
        Grafik2D g2 = new Grafik2D(10, 50,  "StackOverFlow");
    }
}

package kibAr2D;

import java.awt.Graphics;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class Grafik2D extends JPanel {
    public static int a, b = 0;
    public static String c = "";

    public Grafik2D(int a, int b, String c) {
        this.a = a;
        this.b = b;
        this.c = c;
        JFrame j = new JFrame();
        j.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        j.setTitle("kibAr");
        j.setBounds(150, 200, 613, 253);
        j.setVisible(true);
    }

    public void paintComponent(Graphics g){
        super.paintComponents(g);
        g.drawString(c, a, b);

    }
} 
```

我不明白为什么不调用paint方法？也许当JFrame创建然后自动paintComponent和paint方法调用..那么我该如何替换这个问题？

对不起我的英语不好..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:14:50.890

您的代码有两个问题：

1.) 你的类的一个实例`Grafik2D`需要在可视化树中。你应该像这样添加它：

```
public Grafik2D(int a, int b, String c) {
     // ...
     JFrame j = new JFrame();
     // ...
     j.add(this);
} 
```

2.）您应该删除对`paintComponents`或更正拼写的调用：

```
super.paintComponent(g); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:14:06.900

问题是您创建了一个空的`JFrame`，但您没有向其中添加任何组件。由于您的 `Grafik2D`课程是 a `JPanel`，因此您需要将其添加到带有以下行的框架中：

```
j.add(this); 
```

在构造函数中。

# ruby-on-rails - permission.rb 的语法错误

> ID：15414373
> 
> 赞同：1
> 
> 时间：2013-03-14T16:07:18.297
> 
> 标签：ruby-on-rails

我无法解决permission.rb 上的这个语法错误。它说它需要一个额外的“结束”，但是当我添加它时，Safari 无法加载页面。我在这两个文件上尝试了几种不同的方法，似乎都没有。有任何想法吗？

错误：

```
 SyntaxError in UsersController#new

/Users/lexi87/dating/app/controllers/application_controller.rb:20: syntax error, unexpected keyword_end, expecting end-of-input
Rails.root: /Users/lexi87/dating

Application Trace | Framework Trace | Full Trace
app/controllers/users_controller.rb:1:in `<top (required)>' 
```

permission.rb（没有额外的“结束”）：

```
class Permission < Struct.new(:user)
  def allow?(controller, action)
    if user.nil?
      controller == "galleries" && action.in?(%w[index show])
    elsif user.admin?
      true
    else
      controller == "galleries" && action != "destroy"
    end
  end 
```

应用程序控制器：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

private

  def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
  end
  helper_method :current_user

  def current_permission
    @current_permission || ::Permission.new(current_user)
  end
end
  def authorize
    if !current_permission.allow?(params[:controller], params[:action])
      redirect_to root_url, alert: "Not authorized."
    end
  end
end 
```

**更新**

```
Here's my users_controller:

class UsersController < ApplicationController
  before_filter :authorize

  def new
    @user = User.new
  end

  def profile
    @profile = User.profile
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      UserMailer.registration_confirmation(@user).deliver
      session[:user_id] = @user.id
      redirect_to root_url, notice: "Thank you for signing up!"
    else
      render "new"
    end
  end

  def show
    @user = User.find(params[:id])
  end

    def edit
      @user = User.find(params[:id])
end

  def index
    @users = User.all
  end

  def destroy
     User.find(params[:id]).destroy
     flash[:success] = "User deleted."
     redirect_to users_url
   end

def update
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      flash[:success] = "Account updated"
      redirect_to @user
      authorize! :update, @user
    else
      render 'edit'
    end
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:12:58.290

看起来您需要`end`在 permission.rb 中使用另一个，**并且**需要在 application_controller.rb 中移动一个：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

private

  def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
  end
  helper_method :current_user

  def current_permission
    @current_permission || ::Permission.new(current_user)
  end
end  # this shouldn't be here
  def authorize
    if !current_permission.allow?(params[:controller], params[:action])
      redirect_to root_url, alert: "Not authorized."
    end
  end
# it should be here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:13:17.613

您不必关闭`private`关键字。

`end`之后_

```
def current_permission 
```

没有必要 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:14:58.037

## 更正

**1.**

你绝对需要`end`在末尾`permission.rb`

**2.**

您不需要和端到端的**私有**部分`ApplicationController`。private 关键字下方的所有内容都被视为“私有”。所以你需要移动“授权”方法。

## 解决方案

所以完整的代码是（将一种方法移动到“公共”中）：

权限.rb：

```
class Permission < Struct.new(:user)
  def allow?(controller, action)
    if user.nil?
      controller == "galleries" && action.in?(%w[index show])
    elsif user.admin?
      true
    else
      controller == "galleries" && action != "destroy"
    end
  end
end 
```

应用程序控制器：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  def authorize
    if !current_permission.allow?(params[:controller], params[:action])
      redirect_to root_url, alert: "Not authorized."
    end
  end

private

  def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
  end
  helper_method :current_user

  def current_permission
    @current_permission || ::Permission.new(current_user)
  end

end 
```

# html - 如何使用 CSS 创建动态角框？

> ID：15414375
> 
> 赞同：1
> 
> 时间：2013-03-14T16:07:21.400
> 
> 标签：html, css, border

如何使用 CSS 创建如下图所示的动态角框？![在此处输入图像描述](../Images/87132cc1e6fe3cb518e7cb602ff60b22.png)

下面是我目前的解决方案，但它不够动态，因为我有两个不同宽度的内容，

```
 <p class="description-header">
        <span class="frame-header frame-header-top"></span>
        <span class="description-text"><?php echo $home->excerpt;?></span>
        <span class="frame-header frame-header-bottom"></span>
    </p> 
```

的CSS，

```
.description-header {
    position:absolute;
    bottom:0;
    right:0;
    width:182px;
    font-size:12px;
    line-height:14px;
    margin:0;
    padding:0;
    border:0 solid red;
}

.frame-header {
    display:block;
    width:182px;
    height:10px;
    float:none;
    background-image:url(../images/frame-header.jpg);
    background-repeat: no-repeat;
    margin:0;
    border:0 solid red;
}

.frame-header-top {
    background-position: top left;
}

.frame-header-bottom {
    background-position: bottom left;
}

.description-text {
    width:160px;
    display:block;
    float:none;
    margin: 0 auto;
    border:0 solid red;
} 
```

有更好的想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T16:51:58.067

这是一个激进的纯 CSS 解决方案，仅使用 1 个 HTML 元素、一个框架（包装器）和内容，我假设它是一个段落。[在 jsfiddle 上查看](http://jsfiddle.net/K9nAb/1/)。

这个想法是在 2 个 HTML 元素上使用`:before`伪`:after`元素来添加角。2 个 HTML 元素的 2 个伪元素允许我们创建 4 个角。

我只在 Chrome 和 Firefox 中测试过。

* * *

编辑：我更改了 CSS，所以它更通用一点，如果你有超过一个段落的内容，或者[一个标题后面跟着段落](http://jsfiddle.net/K9nAb/2/)，[甚至只是 spans](http://jsfiddle.net/K9nAb/3/) ，它仍然可以工作。

# 的HTML

```
<div class="frame">
    <p>
        Lorem ipsum dolor...
    </p>   
    <p>
        Mauris bibendum mauris non
    </p>
</div> 
```

# CSS

```
.frame {
    position:relative;
    padding:5px;
}
.frame:before {
    height:10px;
    position:absolute;
    top:0px;
    left:0px;
    right:0px;
    border-left:1px solid black;
    border-right:1px solid black;
    content: " ";
}
.frame:after {
    height:10px;
    position:absolute;
    bottom:0px;
    left:0px;
    right:0px;
    border-left:1px solid black;
    border-right:1px solid black;
    content: " ";
}
.frame > p {
    text-align:justify;
    margin:0;
    padding:0;
}
.frame :first-child:before {
    position:absolute;
    top:0px;
    bottom:0px;
    left:0px;
    width:10px;
    border-top:1px solid black;
    border-bottom:1px solid black;
    content: " ";
}

.frame :first-child:after {
    position:absolute;
    top:0px;
    bottom:0px;
    right:0px;
    width:10px;
    border-top:1px solid black;
    border-bottom:1px solid black;
    content: " ";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:24:47.190

你可以尝试这样的事情：

html:

```
<p class="description-header">
    <?php echo $home->excerpt;?></span>
</p> 
```

CSS：

```
.description-header{
    position:absolute;
    bottom:0;
    right:0;
    width:182px;
    font-size:12px;
    line-height:14px;
    margin:0;
    border:0 solid red;
    background: url(../images/frame-header.jpg) left top no-repeat, url(../images/frame-header.jpg) left bottom no-repeat;
    padding: 10px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T16:29:07.980

**演示：http: [//jsfiddle.net/4QkYA/](http://jsfiddle.net/4QkYA/)**

-- html --

```
<div class="frame">
    <div class="top-l"></div>
    <div class="top-r"></div>
    <img src="http://lorempixel/200/200/sports/2" alt=""/>
    <div class="bottom-l"></div>
    <div class="bottom-r"></div>
</div> 
```

--css --

```
img {
    margin: 0;
    padding: 3px;
    position: relative;
    z-index: 1;
    display: block;
}

.frame {
    position: relative;
    display: inline-block;
}

.frame > div {
    width: 18px;
    height: 18px;
    border: 3px solid black;
    position: absolute;
    z-index: 0;
}

.top-l { top: 0; left: 0; }
.top-r { top: 0; right: 0; }
.bottom-l { bottom: 0; left: 0; }
.bottom-r { bottom: 0; right: 0; } 
```

# python - matplotlib 中具有不规则数据网格的二维曲面图

> ID：15414390
> 
> 赞同：2
> 
> 时间：2013-03-14T16:08:14.083
> 
> 标签：python, numpy, matplotlib, scipy

我正在尝试在 2D 曲面图上绘制一些数据。数据代表 T 形样品的特性变化。但是，我使用的方法（文档中的标准方法）在整个方形网格上进行插值，超出了 T 组件尺寸的位置。

我想将插值限制在 T 分量内。

我假设这是通过定义 T 形网格（或您想要插值的任何形状）来完成的，这是正确的吗？如果是这样，我将如何创建一个 T 形网格进行插值？我正在考虑将 2 个`linspace`数组附加在一起以创建 T 形，但到目前为止大量失败 =/

非常感谢！

编辑 1)

普通网格：

```
xxxxxxxxx
xxxxxxxxx
xxxxxxxxx
xxxxxxxxx 
```

我要插值的区域形状：

```
xxxxxxxxx
xxxxxxxxx
000xxx000
000xxx000 
```

with `x`= 要插值的数据点和`0`s 表示不应包含任何插值的空隙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:26:47.117

您可以使用以下方式填充要显示的数组`np.nan`：

```
>>> import matplotlib.pyplot as plt
>>> a = np.random.rand(100, 100)
>>> plt.imshow(a)
<matplotlib.image.AxesImage object at 0x03EEB030>
>>> plt.show() 
```

![在此处输入图像描述](../Images/57bcbb3afd08689fa39dbf93a198280f.png)

现在：

```
>>> a[50:, :25] = np.nan
>>> a[50:, 75:] = np.nan
>>> plt.imshow(a)
<matplotlib.image.AxesImage object at 0x040C81B0>
>>> plt.show() 
```

![在此处输入图像描述](../Images/d8663cda90e54600ce174da1de7fd670.png)

# .net - 如何从 .cpp 文件访问文本框？

> ID：15414394
> 
> 赞同：1
> 
> 时间：2013-03-14T16:08:20.213
> 
> 标签：.net, windows, winforms, c++-cli

**如何`Form1.h`从文件中访问（在 Windows 窗体上）中的文本框`.cpp`？**

我希望当用户按下表单上的按钮时，一些文本会添加到同一表单上的文本框中。当按下按钮时，我想在`.cpp`文件中调用一个类，该类将（经过一些计算等等）向文本框添加一些文本。

我一直试图弄清楚这一点，但无济于事。

有人愿意分享我如何做到这一点吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:20:28.573

如果 cpp 文件用于 Form1 `#include "Form1.h"`，则`this->textBox`.

如果 cpp 文件用于另一个类，则需要传递对 Form1 对象或 TextBox 的引用。可能在类的构造函数中传递它是最简单的方法。如果您决定传递 Form1 对象，请执行相同的 #include。如果您决定只传递 TextBox，请不要忘记执行`using namespace`.

# java - 终结者，关闭文件和流

> ID：15414396
> 
> 赞同：1
> 
> 时间：2013-03-14T16:08:20.770
> 
> 标签：java, effective-java

在 Joshua Bloch 的书“Effective Java”第 7 条第二版中，他建议避免使用 finally 语句，特别是在关闭文件时，他说“依赖终结器来关闭文件是一个严重错误”。两页后，他说合法的两个用例之一是显式终止方法模式

```
Foo foo = new Foo();
try{
    ///process foo
} finally{
    foo.terminate();
} 
```

具有终止方法的类包括 FileInputStream 和 FileOutputStream。那么这是否意味着在 finally 语句中关闭文件？

1) Joshua Bloch 的第 7 项是否矛盾？

2）是否需要终止方法模式？如果没有具有相同效果的 finally 语句，您就不能编写上面的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:14:52.417

我猜作者的意思是您应该使用`finally`块代码（这不是终结器）`try-catch`来关闭/清理您的资源，而不是减轻`finalize`方法（这是终结器）。

有关终结[器的更多信息，请查看 Java 中何时调用 finalize() 方法？](https://stackoverflow.com/q/2506488/1065197)

# sql - 根据表列动态合并两个或多个列？

> ID：15414398
> 
> 赞同：2
> 
> 时间：2013-03-14T16:08:21.837
> 
> 标签：sql, sql-server, pivot

我有一个名为`SectionNames`如下的表

```
SectionID SectionCode 小节
   1 xYz 个人
   2 xYz 家庭
   3 CYD 朋友
   4 PCPO 1 级
   5 PCPO 2 级
   6 PCPO 3 级
```

很快。所以将来我们可以为每个部分代码添加一个或多个小节。

并且还有一张表，它是上`SectionNames`表和`Employee`员工数据表的参考表。

```
ID EmployeeID SectionID 成本    
1 1 1 $200
2 1 2 $300    
3 1 3 $40
4 1 4 $10
5 1 5 无等级
6 1 6 无级别
7 1 7 $20
8 1 8 无级别
9 1 9 无级别
```

所以我希望这些表的输出应该如下所示：

```
EmployeeID     Individual_xyz_Cost    Family_xyz_Cost    Friends_xyz_cost  level1_PCPO_cost  level2_PCPO_Cost
   1                 $200                 $300               $400              $10             NoLevel 
```

我的员工表中几乎没有员工记录。我希望这是动态的。就像如果将来如果`Relatives`再为部分添加一个小节，`XYZ`那么我的查询应该返回`Relatives_XYZ_Cost`。

如何动态编写此查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T16:18:55.587

您将希望使用该`PIVOT`函数将数据从列转换为行。如果您将有未知数量的需要作为列的值，那么您将需要使用动态 SQL。

更容易先查看静态或硬编码版本，然后将其转换为动态 SQL 版本。当您有已知数量的值时，使用静态版本：

```
select *
from
(
  select e.employeeid,
    s.subsection +'_'+s.sectioncode+'_Cost' Section,
    e.cost
  from employee e
  inner join sectionnames s
    on e.sectionid = s.sectionid
) src
pivot
(
  max(cost)
  for section in (Individual_xYz_Cost, Family_xYz_Cost,
                  Friends_CYD_Cost, level1_PCPO_Cost,
                  level2_PCPO_Cost, level3_PCPO_Cost)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/b1451/4)。

如果您需要灵活的查询，则将其转换为使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(subsection +'_'+sectioncode+'_Cost') 
                    from SectionNames
                    group by subsection, sectioncode, sectionid
                    order by sectionid
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT employeeid,' + @cols + ' 
              from 
             (
                select e.employeeid,
                  s.subsection +''_''+s.sectioncode+''_Cost'' Section,
                  e.cost
                from employee e
                inner join sectionnames s
                  on e.sectionid = s.sectionid
            ) x
            pivot 
            (
                max(cost)
                for section in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b1451/8)

两者的结果是：

```
| EMPLOYEEID | INDIVIDUAL_XYZ_COST | FAMILY_XYZ_COST | FRIENDS_CYD_COST | LEVEL1_PCPO_COST | LEVEL2_PCPO_COST | LEVEL3_PCPO_COST |
----------------------------------------------------------------------------------------------------------------------------------
|          1 |                $200 |            $300 |              $40 |              $10 |         No Level |         No Level | 
```

# sql - 如何在插入语句中使用 Sequel SQL 函数？

> ID：15414406
> 
> 赞同：2
> 
> 时间：2013-03-14T16:08:36.863
> 
> 标签：sql, ruby, sequel

在将新值插入数据集时，我想使用 SQL 函数。但是，我不断收到`TypeError: can't convert Sequel::SQL::Function into String`错误。Sequel 文档解释了如何使用函数进行选择，而不是插入。

理想情况下，我想避免`DB.run`，因为我是动态插入的，并且原始 SQL 混乱且不灵活。

这就是我想要做的：

```
INSERT INTO dataset (col1, col2, col3) VALUES ('something', 3, func(value)) 
```

这就是我在续集中所拥有的：

```
x = 'something'
y = 3
func_value = Sequel.function(:func, value)
DB[:dataset].insert (:col1 => x, :col2 => y, :col3 => func_value) 
```

这可能吗？如果是这样，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T18:46:17.933

弄清楚了。创建一个 Sequel::function 对象，然后将其设为哈希值。

```
irb(main):028:0> tbl
=> #<Sequel::MySQL::Dataset: "SELECT * FROM `foo`.`bar`">
irb(main):029:0> uhex = Sequel.function(:unhex,7)
=> #<Sequel::SQL::Function @args=>[7], @f=>:unhex>
irb(main):030:0>  tbl.insert_sql( {:field_name => uhex })
=> "INSERT INTO `foo`.`bar` (`field_name`) VALUES (unhex(7))" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T15:11:22.737

看起来在 Sequel 中调用 SQL 函数有几种不同的语法方式：http: [//sequel.rubyforge.org/rdoc/files/doc/dataset_filtering_rdoc.html](http://sequel.rubyforge.org/rdoc/files/doc/dataset_filtering_rdoc.html)

# javascript - 在计时器内执行 onload $(function () {}，并将参数传递给它

> ID：15414407
> 
> 赞同：0
> 
> 时间：2013-03-14T16:08:38.607
> 
> 标签：javascript, jquery, parameters, timer

我在 jquery 中有一个 onload 函数，例如：

```
$(function () {
    $('.over').hover(function () {

            //FIRST PARAMETER RIGT, LEFT, TOP, BOTTOM
        if ($(this).attr('data-direction') == 'right') {
            $(this).addClass('flipping-right');
        }   
        else if ($(this).attr('data-direction') == 'left') {
            $(this).addClass('flipping-left');
        }
        else if ($(this).attr('data-direction') == 'top') {
            $(this).addClass('flipping-top');
        }
                 //ETC.

    //SECOND gal1,gal2,gal3,gal4
    if ($(this).attr('gal') == 'gal1'){    
        img = $(this).find('img');
        setTimeout(function() {
           img.attr('src', arrFirstYellowCard[i]);
           i++;
           if(i > arrFirstYellowCard.length-1)
              i=0;
       }, 100);
    }

    else   if ($(this).attr('gal') == 'gal2'){    
        img = $(this).find('img');
        setTimeout(function() {
           img.attr('src', arrSecondPurpleCard[j]);
           j++;
           if(j > arrSecondPurpleCard.length-1)
              j=0;
       }, 100);
    } 
```

我想要一个函数每秒执行一次该函数，但使用数组中的参数，例如

```
var array_param = ["right,gal1","top,gal3","bottom,gal4","left,gal2","right,gal5"]; 
```

哪些是允许的组合

我想要一个计时器，所以每个参数每秒都会被调用一次

```
var timer = $.timer($('.over').hover(array_param( 0 ) ), 1000);
timer.play(); 
```

但我不知道如何实现此功能，以及如何将参数添加到 onload 中分配的函数：

`$(function () { $('.over').hover(function () {...`

[请看看我的jsfiddle](http://jsfiddle.net/fUsPh/40/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:25:22.260

您无法再次触发准备就绪。您可以创建一个命名函数并将其称为一堆。

```
$(function () {
    index = 0;
    window.setInterval(function () {
        if (index > array_param.length) index = 0;
        myFunction(array_param[index++]);
    }, 1000); // call myFunction every second
});

myFunction = function (image) {
    $('.over').hover(function () {
        // rest of your code goes here
        ...
}; 
```

# bots - NoFollow 规则后的 Bot 功能

> ID：15414408
> 
> 赞同：0
> 
> 时间：2013-03-14T16:08:38.730
> 
> 标签：bots, noindex

我只是想知道在元标记中使用 no follow 规则后，googlebot 或任何其他搜索引擎蜘蛛/bot 的功能是什么。大概机器人在您的网站上，并通过链接重定向等方式进入页面，但如果链接页面包含代码`<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">`，那么机器人会去哪里？它是返回上一页还是执行其他功能？希望这听起来不是一个愚蠢的问题，但我只是好奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:25:36.693

通常，网络爬虫在遇到给定网页时不会直接访问在给定网页上找到的链接，而是将这些链接添加到等待列表中，当蜘蛛完成当前页面的加载时，他只需查看该列表并弹出另一个 url从那里开始，新链接不需要来自最后获取的页面，它可以来自上一页甚至另一个网站（取决于列表的组织方式）。

# c# - 使用 C#, webdriver 和 Xunit 是 Xunit 中存在的任何侦听器，它将侦听通过或失败的测试用例的数量，例如 TestNG 中的 IReporter

> ID：15414411
> 
> 赞同：0
> 
> 时间：2013-03-14T16:08:45.007
> 
> 标签：c#, selenium, webdriver

使用 C#, webdriver 和 Xunit 是 Xunit 中存在的任何侦听器，它将侦听通过或失败的测试用例的数量，例如 TestNG 中的 IReporter

# .htaccess - joomla 网站中的友好网址

> ID：15414412
> 
> 赞同：0
> 
> 时间：2013-03-14T16:08:45.247
> 
> 标签：.htaccess, joomla, sef

我正在尝试使我的 joomla 网站的网址更加友好。目前，典型的 url 是这样的：
**www.mysite.com/index.php?option=com_content&view=article&id=5&Itemid=10&hotel=182**。

我想要一个如下所示的网址：
**www.mysite.com/hotel_name**，其中hotel_name 的值将是我的数据库中字段“hotel_name”的值！
为了实现这一目标，.htaccess 文件中需要哪些流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:36:02.247

开启 SEF 后，根据组件文件夹中的 router.php 文件设置 url 的结构。(com_content/router.php.)

或者您可以使用组件制作自己的网址[http://extensions.joomla.org/extensions/site-management/sef](http://extensions.joomla.org/extensions/site-management/sef)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:11:26.417

根据您使用的网络服务器（Apache、Nginx 等），有一个 [http://docs.joomla.org/Enabling_Search_Engine_Friendly_%28SEF%29_URLs的教程](http://docs.joomla.org/Enabling_Search_Engine_Friendly_%28SEF%29_URLs)

# c# - 试图设置抓取所有未处理的异常，但它不起作用

> ID：15414426
> 
> 赞同：0
> 
> 时间：2013-03-14T16:09:12.483
> 
> 标签：c#, asp.net-mvc-3, razor

我有一个运行良好的剃须刀网站，但偶尔会遇到未处理的异常。我正在尝试追踪它，但现在我想在他们看不到的地方更改它：

```
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Exception: Test

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 
```

这是我到目前为止所拥有的，但它没有抓住它。

全球.asax.cs：

```
public static void RegisterRoutes(RouteCollection routes)
{      
  routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
  routes.MapRoute("UnhandledExceptions", "Error", new { controller = "Error", action = "Index" });
  routes.MapRoute("Default", "{controller}/{action}/{id}", new { controller = "Account", action = "Logon", id = UrlParameter.Optional });
} 
```

我的 ErrorController.cs：

```
using System.Web.Mvc;

namespace SuburbanCustPortal.Controllers
{
  public class ErrorController : Controller
  {
    public ActionResult Index()
    {
      return View("Error");
    }
  }
} 
```

我的测试代码生成错误：

```
public ActionResult Test()
{
  throw new Exception("Test");
} 
```

我的 web.config 中有这个：

```
<customErrors mode="On" >
  <error statusCode="403" redirect="~/Error"/>
  <error statusCode="404" redirect="~/Error"/>
  <error statusCode="500" redirect="~/Error"/>
</customErrors> 
```

我错过了什么？

**====== 编辑#1 ======**

我根据 Mike 的回答进行了更改，并将 web.config 更改为：

```
<customErrors mode="On" defaultRedirect="~/Error/">
</customErrors> 
```

我收到这条消息：

```
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Exception: Test

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[Exception: Test]
   SuburbanCustPortal.Controllers.HomeController.Test() in D:\Suburban\s\Web Projects\WebPortal\SuburbanCustPortal\Controllers\HomeController.cs:133
   lambda_method(Closure , ControllerBase , Object[] ) +79
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +264
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +39
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +129
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +826266
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +314
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +825488
   System.Web.Mvc.Controller.ExecuteCore() +159
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +335
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +62
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +20
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +54
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +469
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375 
```

这是我尝试运行上述测试时遇到的异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:18:14.057

Based on what your code says you are trying to do, what you want is this:

```
<customErrors mode="On" defaultRedirect="~/Error/">
</customErrors> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T04:29:51.807

要捕获任何未处理的异常，请在 global.asax 中使用以下构造：

```
public class MvcApplication : System.Web.HttpApplication
{
  public MvcApplication()
  {
    Error += MvcApplication_Error;
  }

  private void MvcApplication_Error(object sender, EventArgs e)
  {
    Exception exception = application.Server.GetLastError();
    ...process exception...

    // clear the exception from the server
    application.Server.ClearError();
  }
} 
```

# excel - CountIf 列标题匹配星期几

> ID：15414430
> 
> 赞同：2
> 
> 时间：2013-03-14T16:09:19.900
> 
> 标签：excel, excel-formula, countif

我有一个包含多个星期的表格的电子表格，它的列和行如下：

```
 Mon Tue Wed Thu Fri Sat Sun Mon Tue Wed Thu Fri Sat Sun Mon 
```

1.  用户 1
2.  用户 2
3.  用户 3
4.  用户 4

当用户预订某个假期时，将为用户/天输入一个字母“H”，我需要为每个用户计算他们每天作为假期的天数。

我写了公式：`=COUNTIF(INDEX($N:$NMMATCH("Sun",$N:$NM)),"H")`

但这显然只返回它找到的第一个“太阳”列的计数，并忽略之后的所有星期日。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:37:13.173

如果用户 1 的范围是 N2:NM2 并且标题在 N1:NM1 中，请尝试使用此公式计算带有“H”的太阳

`=COUNTIFS(N$1:NM$1,"Sun",N2:NM2,"H")`

您可以为所有用户复制它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:37:42.647

使用 COUNTIFS：

```
=COUNTIFS(2:2;"H";$1:$1;"Sun") 
```

现在，如果您制作一张小桌子，上面有 Mon up to Sun 作为标题，并参考第 4 个参数，您可以放弃“Sun”

# jquery - zclip 不工作？

> ID：15414437
> 
> 赞同：1
> 
> 时间：2013-03-14T16:09:33.143
> 
> 标签：jquery, copy, flash, zclip

我包括脚本：

```
<script src="http://www.cv-library.co.uk/js/zclip.js"></script> 
```

然后调用它：

```
$('a#adminBTBlue').zclip({
    path:'/flash/ZeroClipboard.swf',
    copy:$('#copypath').text(),
}); 
```

使用 HTML：

```
 <div id="copypath">im some text</div>
    <a href="" class="adminBTBlue" id="adminBTBlue">Copy</a> 
```

但我得到：未捕获的类型错误：对象[对象对象]没有方法'zclip'

我已经检查了脚本的路径并且它可以工作......感到困惑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:32:28.057

看到这个：**[样本](http://jsfiddle.net/BXeTZ/1/)**

```
$("a#adminBTBlu").on('click', function (e) {
   e.preventDefault();
}).zclip({
   path: 'http://www.steamdev.com/zclip/js/ZeroClipboard.swf',
   copy: function () {
       return $('#copypath').text();
   }
}); 
```

您正在尝试的文件可能有问题..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:18:29.160

你有 jQuery 吗？你有其他错误吗？

我做了一个 jsFiddle 来测试，但没有任何东西被复制到我的剪贴板，但我也没有收到任何错误。

[http://jsfiddle.net/UU8MZ/](http://jsfiddle.net/UU8MZ/)

你的代码：

```
$('a#adminBTBlue').zclip({
    path:'http://www.cv-library.co.uk/flash/ZeroClipboard.swf',
    copy:$('#copypath').text(),
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T14:16:13.580

尝试使用 jQuery 1.8.3 - zClip 似乎与 jQuery 1.9 引入的 jQuery 2.0 API 不兼容。

# sql - SQL - Rails 深度嵌套连接

> ID：15414440
> 
> 赞同：1
> 
> 时间：2013-03-14T16:09:39.520
> 
> 标签：sql, ruby-on-rails, join, tags, include

首先，我是法国人，很抱歉我丑陋的英语。

我有以下型号：

**店铺**

```
has_and_belongs_to_many :products 
```

**产品**

```
has_and_belongs_to_many :shops
has_many :taggings
has_many :tags, through: :taggings 
```

**标记**

```
belongs_to :tag
belongs_to :product 
```

**标签**

```
has_many :taggings
has_many :products, through: :taggings 
```

我希望能够做到`Shop.first.tags`，所以如果可能的话，我想在一个请求中获取所有商店的产品标签。如果我能解释一下就好了:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:14:32.690

您尚未`tags`在`Shop`模型上指定关系。您需要添加该关系才能调用`#tags`单个对象。

```
class Shop
  # ...
  has_many :tags, :through => :products
  # ...
end 
```

# asp.net - Hooking into 3rd Party Web Service (WCF) calls

> ID：15414452
> 
> 赞同：0
> 
> 时间：2013-03-14T16:10:09.947
> 
> 标签：asp.net, wcf, iis, integration, httphandler

At my workplace we are in the process of upgrading our Time and Attendance setup. Currently, we have physical terminals that employees use to check in and check out. These terminal communicate to a 3rd party T&A system via web service calls.

About the T&A web service:

*   Hosted on IIS 6
*   Communication is with WCF over HTTP
*   We're only interested in one of the exposed methods (let's call it **Beep()**)

What I need to do:

*   Leave the original T&A system in place, untouched
*   Write a custom service that *also* reacts to calls to **Beep()**

So, essentially, I need to piggy-back on all the calls to **Beep()**, but I'm not sure what the best approach is.

What has been considered already:

1.  Write a custom webservice that implements the exact same same contract as the T&A service and direct all the terminals to that custom service. The idea being that I can then invoke the original T&A service from my custom service, as well as applying any other logic required.
    *   This seems overly invasive to me, and seems needlessly risky. We want to leave the original system as unmodified as possible.
2.  Write a custom HTTP Handler to intercept calls to the original T&A service.
    *   We've actually already done something like this in house, but our implementation takes the original HttpRequest, extracts the contents, invokes a custom service, and finally create a *new* HttpRequest based on the original request so that the original web service call to **Beep()** is made.
    *   What I don't like about this approach is that the original HttpRequest is lost. Yes, a second, supposedly identical, request is created, but I don't know enough about HttpRequests to guarantee this is safe.

I prefer option 2, but it's still not perfect. Ideally we wouldn't need to destroy the original HttpRequest. Does anyone know if this is possible?

If not, can anyone suggest another way of doing this? Can IIS be configured to fork requests to two destinations?

Thanks

### UPDATE #1

I have found a solution (documented [here](https://stackoverflow.com/a/15478768/569777)), but I'm still open to other options.

### UPDATE #2

I like flup's solution (and justification). He gets the bounty :) Thanks flup!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:00:57.593

You can configure the web service to use a custom operation invoker, an [`IOperationInvoker`](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ioperationinvoker.aspx).

WCF deserializes the original HTTP request as always, but instead of calling `Beep()` on the existing web service class, it will call your invoker instead. The invoker does its special thing, and then calls `Beep()` on the original service.

Advantage over implementing an `IHTTPModule` would be that all things HTTP are still handled by the original web service's configuration, unchanged. You fork off at a higher level of abstraction, namely on the web service's interface, at the `Beep()` method.

The nitty gritty of setting up a custom operation invoker *without changing the existing service class* (which makes it harder):

*   Implement a custom `IOperationBehavior` which sets the custom `IOperationInvoker` on the service's `Beep()` method in its `ApplyDispatchBehavior` method.
*   Implement a custom `IEndpointBehavior` which sets the custom `IOperationBehavior` in its `ApplyDispatchBehavior` method.
*   Put these two behaviors, with your `IOperationInvoker`, in a class library and add it to the existing service
*   Then configure the service to use the `IEndpointBehavior`.

See [When and where to set a custom IOperationInvoker?](https://stackoverflow.com/questions/1155208/when-and-where-to-set-a-custom-ioperationinvoker) and [http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/17/wcf-extensibility-ioperationinvoker.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/17/wcf-extensibility-ioperationinvoker.aspx) for the invoker bit.

See [Custom Endpoint Behavior using Standard webHttpEndpoint](https://stackoverflow.com/questions/5559552/custom-endpoint-behavior-using-standard-webhttpendpoint) on how to configure a custom endpoint.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:47:29.060

Sounds actually like you want to integrate your system into an ESB pattern. Now the MS solution to the ESB problem is Biztalk. Biztalk is the thermonuclear warhead nut cracker in this case. You don't want Biztalk.

Check out the results here for [lightweight alternatives](https://stackoverflow.com/questions/41353/net-esbs-out-there)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:05:13.957

I have found a solution using a custom `IHttpModule`. See sample below:

```
using System;
using System.Text;
using System.Web;

namespace ForkHandles
{
    public class ForkHandler : IHttpModule
    {
        public void Init(HttpApplication application)
        {
            application.BeginRequest += new EventHandler(application_BeginRequest);
        }

        void application_BeginRequest(object sender, EventArgs e)
        {
            var request = ((HttpApplication)sender).Request;

            var bytes = new byte[request.InputStream.Length];
            request.InputStream.Read(bytes, 0, bytes.Length);
            request.InputStream.Position = 0;

            var requestContent = Encoding.ASCII.GetString(bytes);

            //  vvv
            // Apply my custom logic here, using the requestContent as input.
            //  ^^^
        }

        public void Dispose()
        {
        }
    }
} 
```

This will allow me to inspect the contents of a webservice request and react to it accordingly.

I'm open to other solutions that may be less invasive as this one will require changing the deployed 3rd party web service's configuration.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T05:38:13.193

If you want to intercept the message to the T&A WCF service i would suggest using custom listener which can be plugged into the service call by making changes in the web.cofig.

This will be transparent.

**Please look for WCF Extensibility – Message Inspectors.**

```
system.diagnostics>
    <sources>
      <source name="System.ServiceModel.MessageLogging">
        <listeners>          
          <add name="ServiceModelMessageLoggingListener">
            <filter type=""/>
          </add>
        </listeners>
      </source>
    </sources>
</system.diagnostics> 
```

# c# - C#：在所有派生类中具有 *required* 实现的静态基类方法存根

> ID：15414460
> 
> 赞同：1
> 
> 时间：2013-03-14T16:10:29.337
> 
> 标签：c#, methods, static, abstract

我需要 C# 中静态抽象方法的替代方法：

```
// fantasy code
abstract public class BaseClass
{
    static abstract public void RequiredStaticMethod();
} 
```

我只有两个条件`RequiredStaticMethod`：

1.  所有派生类都必须实现它（由编译器强制执行）。
2.  它必须在没有类实例的情况下可用；即，`DerivedClass.RequiredStaticMethod()`必须工作。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:29:29.450

您无法在*compile-time*验证它。但是，如果您要使用反射调用该方法（因此您不需要任何类型的多态性），您可以只*记录*每个具体派生类必须实现特定方法，然后编写一个单元测试来检查程序集所有派生类型并检查它们是否符合。

它不如编译时检查那么好，但假设您控制了所有涉及的程序集，并且假设您已经足够频繁地运行单元测试，它应该是相当轻松的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:17:24.560

您不能在 C# 中执行此操作。相反，它可能会帮助您使用抽象实例方法和单例模式：

```
abstract public class BaseClass
{
    abstract public void RequiredStaticMethod();
}

sealed class Subclass : BaseClass
{
    public static readonly Subclass Instance = new Subclass();

    public void RequiredStaticMethod() {}    
} 
```

您可能想要添加对您要解决的潜在问题的进一步描述。通常，您使用抽象类将消费者与实际实现*分离*，方法是让它们使用抽象类型。然而，这显然不能用静态成员来完成。正如乔恩评论的那样，我还看不出你打算如何消费`BaseClass`。

您也可以使用接口，并通过反射找到所有实现类型。这将产生一个类型化的可迭代对象`IFoo`并以实例绑定的方式调用您的方法：

```
class Program
{
    public static void Main()
    {
        var classes = Assembly.GetExecutingAssembly().GetTypes().Where(t => t.GetInterface("IFoo") != null);
        foreach(var foo in classes.Select(c => Activator.CreateInstance(c)).Cast<IFoo>())
        {
            foo.RequiredNonStaticMethod();
        }
    }
}

public interface IFoo
{
    void RequiredNonStaticMethod();
}

public class FooImpl : IFoo
{
    public void RequiredNonStaticMethod()
    {
        Console.WriteLine("Foo");
    }
} 
```

# objective-c - Objective-C -> 如果从子类调用超类方法，则无法访问 NSDatePicker

> ID：15414461
> 
> 赞同：-1
> 
> 时间：2013-03-14T16:10:30.623
> 
> 标签：objective-c, cocoa, nstableview, nsdatepicker

我有一个具有以下内容的类 HelloWorldViewController

```
-(void) addDate method
    NSDate *myDate = [myDatePIcker dateValue];
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"YYYYMMdd"];   
    NSLog(@"addDate date is:%@",[dateFormat stringFromDate:myDate]); 
```

当我像这样从 IBAction 调用上述方法时......

```
- (IBAction)myAddDate:(id)sender {
    [self addDate];
} 
```

它按预期工作（请参阅下面的 NSLog）

```
 2013-03-14 09:05:33.149 APPNAME[3531:303] AWAKENED in Hello 2013-03-14 16:05:33 +0000
  2013-03-14 09:05:33.150 APPNAME[3531:303] AWAKENED in Hello (null)
  2013-03-14 09:05:35.898 APPNAME[3531:303] addDate date is:20130314
  2013-03-14 09:05:35.899 APPNAME[3531:303] addDate completed with date 20130314 
```

但是，如果我从另一个子类 (TableViewController) 中的方法 (datePickerAction) 调用 -(void) 函数，请参见下文......

```
@implementation TableViewController:HelloWorldViewController

-(IBAction)datePickerAction:(id)sender{
    [self addDate];
} 
```

这是 NSLog 的输出

```
2013-03-14 09:08:01.719 APPNAME[3549:303] AWAKENED in Hello 2013-03-14 16:08:01 +0000
2013-03-14 09:08:01.720 APPNAME[3549:303] AWAKENED in Hello (null)
2013-03-14 09:08:03.321 APPNAME[3549:303] addDate date is:(null)
2013-03-14 09:08:03.322 APPNAME[3549:303] addDate completed with date (null)
2013-03-14 09:08:03.323 APPNAME[3549:303] addDate date is:(null)
2013-03-14 09:08:03.323 APPNAME[3549:303] addDate completed with date (null) 
```

我是绿色的，放轻松:-)任何建议表示赞赏！

更新：我尝试实施以下解决方案。这是更新的和附加的代码。该应用程序现在不会启动......任何建议。

```
@implementation HelloWorldViewController;

-(id) init{

HelloWorldViewController *myHelloWorldController = [[HelloWorldViewController alloc] init];
return self;
}

#import <Foundation/Foundation.h>
#import <Cocoa/Cocoa.h> 
#import "HelloWorldViewController.h"
#import "Date.h" 
```

>

```
@interface TableViewController : NSTableView <NSTableViewDataSource> {

IBOutlet NSTableView *tableview;
NSMutableArray *list;}

#import "TableViewController.h"
#import "HelloWorldViewController.h"

 @implementation TableViewController{
HelloWorldViewController *myHelloWorldViewController;}

 - (id) init{

self = [super init];
if (self) {
    list = [[NSMutableArray alloc] init];
}
return self;}

 - (IBAction)datePickerAction:(id)sender{
    [myHelloWorldViewController  addDate];

    //NSLog(@"Action Finished with date %@", myRename);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:43:21.700

您的问题中没有足够的信息来找出问题所在，因此以下是猜测...

您可能对子类化的工作方式感到困惑。

在您的`addDate`方法中，您引用了一个变量`myDatePicker`。由于未在其中声明，`addDate`因此它要么是类的实例变量，要么是不太可能的全局变量。

查看`addDate`它的局部变量`myDate`将是`nil`if `myDatePicker`is `nil`-`nil`在 Objective-C 中允许消息并返回`nil`。

您必须有一个`addDate`的类实例`HelloWorldViewController`, 才能使您的第一个测试成功，并且该实例必须具有非 nil `myDatePicker`。

现在到你的第二个类，`TableViewController`，它是 的一个子类`HelloWorldViewController`。在其实例方法中`datePickerAction`，您将其`addDate`作为继承方法调用，但在这种情况下，您会发现它不起作用，而是产生空值。

这表明您的`TableViewController`实例继承的`myDatePicker`实例变量是`nil`.

这就是对子类化的混淆可能出现的地方。您必须完全区分对象：第一个是`HelloWorldViewController`类的实例；第二个是`TableViewController`类的实例。第二个对象包含其超类的实例变量作为其*自身*`HelloWordlViewController`的一部分，并且这些变量与 的其他实例中的任何其他变量*不同*`HelloWordlViewController`，特别是您的第一个对象的那些...

我的猜测是你的第一个对象有一个非零`myDatePicker`，而你的第二个对象是零。

这*可能*表明您的设计不是`TableViewController`子类，而是`HelloWorldViewController`要求它包含对单独实例的*引用，类似于以下内容：*`HelloWorldViewController`

```
@interface TableViewController : NSViewController or NSObject
   ...
@end

@implementation TableViewController
{
   HelloWorldViewController *myHelloWorldViewController; // set up in init etc.
}

- (IBAction)myAddDate:(id)sender
{
   [myHelloWorldViewController addDate];
}

...

@end 
```

HTH，但请记住，这是一个猜测，因为您的问题中没有足够的信息来知道这是否是您的问题。

**评论回复**

您似乎确实误解了基本对象和继承模型。您现在已添加到`HelloWorldViewController`：

```
-(id) init
{
   HelloWorldViewController *myHelloWorldController = [[HelloWorldViewController alloc] init];
   return self;
} 
```

首先，您*必须*在 init 方法中初始化您的超类，这通常只是语句：

```
self = [super init]; 
```

没有这个，您的实例将无法正确构建。

其次，您似乎正在尝试初始化另一个类的实例变量，因为您正在方法`HelloWorldViewController` *中*创建实例并将其分配给恰好与实例变量同名的局部变量-这两个变量没有任何联系（因为世界上所有被称为“威廉”的人都不是同一个人）。`init``HelloWorldViewController``TableViewController`

**但是你有一个更大的问题**，你`HelloWorldViewController`的`init`方法现在调用你`HelloWorldViewController`的`init`方法，它调用......是的，那是无限的，这在你的计算机上意味着直到内存填满并且你的应用程序死于可怕的死亡。

您可能需要研究类和实例概念，因为您的代码表明您没有正确理解它们。任何关于（基于继承的）面向对象概念的好文章都应该这样做；这些概念在大多数当前的面向对象语言中基本相同，包括 Java 和 C#。

高温高压

# javascript - 使用 jquery 更改 img src

> ID：15414462
> 
> 赞同：-1
> 
> 时间：2013-03-14T16:10:30.833
> 
> 标签：javascript, jquery, html, css

```
<div class="s4-titlelogo">
 <a href="/sites/mysite">
<img name="onetidHeadbnnr0" id="ctl00_onetidHeadbnnr2" style="border-right-width: 0px; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px;" alt="bobpub" src="/_layouts/images/blank.gif" complete="complete"/>
</a>
</div> 
```

如果 img 的 src 属性是空白.gif，那么我想将 src 属性设置为我的图标 url“/_layouts/images/myicon.gif”。我需要将 img 引用为 $('.s4-titlelogo img')。

至今：

```
iconurl = $('.s4-titlelogo a>img').attr("src");
            if (iconurl == ""/_layouts/images/blank.gif")
            {

            } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-14T16:13:15.183

> 如果img的src属性是blank.gif...

```
if($('.s4-titlelogo img').attr('src') === '/_layouts/images/blank.gif') 
```

> ...然后我想将 src 属性设置为我的图标 url。

```
$('.s4-titlelogo img').attr('src', '/_layouts/images/myicon.gif'); 
```

编辑：立即投下三票？呃……为什么？

这是一个[JSFiddle](http://jsfiddle.net/z2MhJ/)示例来证明这是有效的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T16:29:13.063

就这样做...

**现场演示：http:** [//jsfiddle.net/oscarj24/FW4kj/](http://jsfiddle.net/oscarj24/FW4kj/)

```
$(function(){

    //Get the element
    elem = $('.s4-titlelogo img');

    //If 'src' attribute contains 'blank.gif'
    if (elem.prop('src').indexOf('blank.gif') > 0)
        //Replace 'src' attribute with 'myicon.gif'
        elem.prop('src', '/_layouts/images/myicon.gif');

    //Alert new 'src' attribute just to verify
    alert('New image url is: ' + elem.prop('src'));

}); 
```

# c++ - 无法获得输出联合集

> ID：15414479
> 
> 赞同：-2
> 
> 时间：2013-03-14T16:11:16.470
> 
> 标签：c++, c

实际上这是一个纯 C 程序。当我用 Xcode 编译时。没有错误。但是仍然无法获得输出，除非您强制停止，否则该过程不会停止。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
int LocateElem(int *p1,int e,int leng1);
void Display(int max, int array[]);
int GetElem(int * p, int pass);
int Union(int *p1,int *p2, int leng1, int leng2);
int ListInsert(int **p, int e, int lengA);
int* GetData(int* pArray, int Array_size);
void Show(int *p, int leng);

void InitList_Sq(int  *L);
int *p_A,*p_B;
int m,n;

int main()
{
    clock_t begin, end;
    double  cost;
    begin = clock();

    printf("How many elements of A u want:");
    scanf("%d",&m);
    if (m<0) {
        printf("Error!");
        return 0;
    }
    printf("How many elements of B u want:");
    scanf("%d",&n);
    if (n<0) {
        printf("Error!");
        return 0;
    }

    p_A=(int *)malloc(m*sizeof(int));
    p_B=(int *)malloc(n*sizeof(int));
    if (p_A==NULL) {
        printf("Error allocating memory!\n"); //print an error message
        return 0; //return with failure
    }
    if (p_B==NULL) {
        printf("Error allocating memory!\n"); //print an error message
        return 0; //return with failure
    }

    int *pLast_A, * pLast_B;
    printf("Array A is :\n");
    pLast_A=GetData(p_A, m);
    printf("\nArray B is :\n");
    pLast_B=GetData(p_B, n);

    int newLeng;
    newLeng=Union(p_A,p_B,m,n);

    printf("\nThe Union set is :\n");
    Show(p_A, newLeng);

    free(p_A);
    free(p_B);
    end = clock();
    cost = (double)(end - begin) / CLOCKS_PER_SEC;
    printf("\n%lf seconds", cost);
    return 1;

}

int* GetData(int* pArray, int Array_size){
    int* pFill= pArray;
    int count;
    srand((unsigned) time(NULL));
    for ( count=0; count< Array_size; count++) {
        *(pFill+count)=rand()%1000;
        printf("%d\t", * (pFill+count));
    }
    return pFill+count-1;
}

int Union(int *p1,int *p2, int leng1, int leng2){
    for (int count=0; count<leng2; count++) {
        int e=GetElem(p2, count);
        while(LocateElem(p1, e, leng1)==0){
            leng1=ListInsert(&p1, e, leng1);
        }
    }
    return leng1;
}

int GetElem(int *p, int pass){
    return  *(p+pass);
}

int LocateElem(int *p1,int e,int leng1){
    for (int count=0; count<leng1; count++)
        if (e==*(p1+count))
            return 1;
        else
            return 0;
}

int ListInsert(int **p, int e, int lengA){
    lengA+=1;
    int* temp;
    temp=(int*)realloc(*p, lengA*sizeof(int));
    if (temp==NULL) {
        printf("Error allocating memory!\n"); //print an error message
        free(temp);
        return 0; //return with failure
    }
    else{
        *p=temp;
        *(*p+lengA-1)=e;

    }
    return lengA;

}

void Show(int *p, int leng){
    for (int count=0; count<leng; count++) {
        printf("%d\t", *(p+leng));
    }
} 
```

它一直在运行，可用内存一直在减少！请帮助我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:15:53.937

线

```
while(LocateElem(p1, e, leng1)==0) 
```

总是返回 true 并且 while 循环永远不会退出并继续运行该行：

```
leng1=ListInsert(&p1, e, leng1); 
```

这反过来又会永远分配内存

```
int ListInsert(int **p, int e, int lengA){
    lengA+=1;
    int* temp;
    temp=(int*)realloc(*p, lengA*sizeof(int));
    .
    .
    . 
```

# python - Python-opencv：从标准输入读取图像数据

> ID：15414480
> 
> 赞同：6
> 
> 时间：2013-03-14T16:11:17.797
> 
> 标签：python, opencv

如何从标准输入而不是从文件中读取图像数据？

使用 C++ 接口，似乎是可能的：[https](https://stackoverflow.com/a/5458035/908515) ://stackoverflow.com/a/5458035/908515 。该函数`imdecode`在 Python 中也可用。但它需要一个`numpy array`as (first) 论点。我不知道如何转换标准输入数据。

这是我尝试过的：

```
import cv
import sys
import numpy

stdin = sys.stdin.read()
im = cv.imdecode(numpy.asarray(stdin), 0) 
```

结果：`TypeError: <unknown> data type = 18 is not supported`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T18:27:58.763

看起来 python 标准输入缓冲区对于图像来说太小了。您可以使用`-u`标志运行程序以删除缓冲。[此](https://stackoverflow.com/a/3670470/723891)答案中的更多详细信息。

其次，`numpy.asarray`从数据中获取 numpy 数组的方法可能不是正确的，`numpy.frombuffer`对我来说效果很好。

所以这里是工作代码（只是我使用`cv2`而不是`cv`希望它不会太重要）：

```
import sys
import cv2
import numpy

stdin = sys.stdin.read()
array = numpy.frombuffer(stdin, dtype='uint8')
img = cv2.imdecode(array, 1)
cv2.imshow("window", img)
cv2.waitKey() 
```

可以这样执行：

```
python -u test.py < cat.jpeg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-04T12:54:49.743

我已经尝试了上述解决方案，但无法使其工作。用 sys.stdin.buffer.read() 替换 sys.stdin.read() 完成了这项工作：

```
import numpy as np
import sys
import cv2

data = sys.stdin.buffer.read()
image = np.frombuffer(data, dtype="uint8")
image = cv2.imdecode(image, cv2.IMREAD_COLOR)
cv2.imshow('stdin Image',image)
cv2.waitKey() 
```

# linux - 如何找到内核结构元素的偏移量？

> ID：15414481
> 
> 赞同：0
> 
> 时间：2013-03-14T16:11:17.823
> 
> 标签：linux, kernel, structure

在linux内核中，我需要找到内核结构的成员变量的偏移量。我尝试使用 offsetof，但它声称我有一个未定义的结构。可以在用户空间做吗？由于不允许在用户空间中使用内核结构，因此我无法使用 offsetof 找到它。还有其他方法可以找到这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:36:34.857

在内核中，使用：

```
#include <linux/stddef.h> 
```

它被定义为：

```
#define offsetof(TYPE,MEMBER) __compiler_offsetof(TYPE,MEMBER) 
```

这在整个 Linux 内核中都使用。

如果您尝试在用户模式下使用它，libc 包含中可能存在类似的结构。

# mysql - MySQL在同一张表上更新后触发

> ID：15414483
> 
> 赞同：1
> 
> 时间：2013-03-14T16:11:21.767
> 
> 标签：mysql, triggers

我有一个 MySQL 触发器，它使用 `BEFORE INSERT ON table`计算值并在用户在特定列中插入值后更新同一个表。这按预期工作。但是用户在输入时出错并修复了错误，我想编写一个触发器，在修复错误后更新计算值。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T16:15:57.227

触发器可以访问行中的`BEFORE UPDATE ON table`现有值以及新提供的值，并且可以根据我们想要的任何条件和表达式设置表中任何列的值。

例如，可以测试一个或多个关注列的值是否已被修改，然后将其他列设置为某个表达式。

```
DELIMITER $$

CREATE TRIGGER my_before_update_trigger
BEFORE UPDATE ON my_table
FOR EACH ROW
BEGIN
   IF NOT ((NEW.col1 <=> OLD.col1) AND (NEW.col2 <=> OLD.col2)) THEN
      SET NEW.col3 = NEW.col1 * NEW.col2 ;
   END IF;
END$$

DELIMITER ; 
```

# android - 如何在 ListView 底部添加新项目并同时从顶部删除旧项目？

> ID：15414487
> 
> 赞同：1
> 
> 时间：2013-03-14T16:11:24.387
> 
> 标签：android, listview

我有一个在 ListView 中显示数千个项目的任务。所以我需要将这些项目的数据加载到内存中。但是每一项的数据都大于1KB，因此将所有数据加载到内存中会耗尽内存并导致OOM异常。事实上，我一开始只加载了这些数据的一部分，如果用户滚动到 ListView 的底部，更多的数据将被添加到 ListView 中。但是如果用户一直滚动到底部，最后所有的数据都会被加载到内存中，就会出现OOM。

为了解决这个问题，我想我可以对 ListView 的长度设置一个最大限制。例如，设置最大长度为 500。当用户一直滚动到 ListView 的底部时，在 ListView 的末尾添加 50 个新项，同时从顶部删除 50 个项，即最大长度ListView 的保持不变。我知道如何将新项目添加到末尾并从 ListView 顶部删除旧项目，但是当我尝试一起执行此操作时，会发生奇怪的事情，ListView 的内容不是我所期望的。

那么，有谁知道如何解决我的问题？

任何有用的答案将不胜感激，但请不要要求我更改项目的数据大小，因为我无权这样做。

伪代码（将 scrollListener 设置为 ListView）：

```
class MyOnScrollListener implements OnScrollListener{

     public void onScrollChange(View, int, int, int){
         if(reach the bottom){
            add50ItemsToTheBottomOfTheList();
            remove50FromTheTopOfTheList();
            myListViewAdapter.notifyDataSetChanged();
         }
     }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:49:45.977

我试图从 ListView 的顶部删除一些项目，但这会导致 ListView 出现奇怪的行为。因此，我只是将列表顶部的这些项目设置为 null，并在用户向后滚动时再次从网络加载它们。

# vba - 代码中的数据类型不匹配 - 为什么是现在？

> ID：15414489
> 
> 赞同：0
> 
> 时间：2013-03-14T16:11:27.797
> 
> 标签：vba, ms-access

到目前为止，我的代码一直运行良好 - 但由于某种未知原因，它不再工作并抛出错误：

```
Run-time error '13':
Type mismatch 
```

这是发生错误的地方：

```
Dim rst As Recordset
Set rst = CurrentDb.OpenRecordset("qryGetEventsByNonPharmacists") 
```

该查询存在并且它是一个基本的 SELECT 查询。这以前从来都不是问题，为什么会抛出错误？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:22:02.167

那应该是：

```
Dim rst As DAO.Recordset 
```

虽然您可以长期使用 Recordset，并且您没有对 ADO 库的引用，或者当 ADO 库出现在 DAO 库之后，但在大多数情况下，始终使用对库的显式引用会更好记录集。

# joomla2.5 - 如何根据另一个菜单的子菜单项显示菜单（Joomla 2.5）

> ID：15414505
> 
> 赞同：1
> 
> 时间：2013-03-14T16:12:00.110
> 
> 标签：joomla2.5

这可能真的很容易做到，我可能错过了树木的木材，但我试图在包含来自等效主菜单项的子菜单项的页面选择上显示一个菜单。

例如，主菜单列出了“产品”（父项）和“产品 1”、“产品 2”和“产品 3”作为子菜单项（子项）。是否可以（不创建重复的文章）创建一个仅显示子项目但链接到与主菜单相同的文章的子菜单？

我已经阅读了有关使用菜单别名的信息，但我发现的所有文档都没有给出明确的信息。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:55:20.053

1) 去`Menus -> Menu Manager -> Add Menu`。

2）在其中添加一个新菜单项，选择类型`Menu Item Alias`并在右侧*菜单项*下选择您希望它作为副本的*菜单*（不是真实副本，而是别名）。

3) 对要显示的所有菜单项重复 2)

4）在`Module Manager`，添加新`Menu`模块，选择您新创建的菜单，将其分配到某个位置并发布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T10:53:39.863

@Marko D 的解决方案效果很好，可以定制以适应多种变化。

在这种情况下还有另一个选项，您不需要创建另一个菜单或菜单别名。

1）在模块管理器中，添加一个新的菜单模块，命名它，定位它，将它应用到相关页面，然后**在基本选项下选择有问题的主菜单和2的开始级别**并发布

2) 没有数字 2 ;)

拥有超过 1 个选项总是好的！

# javascript - 骨干模型更新未传播到集合

> ID：15414508
> 
> 赞同：2
> 
> 时间：2013-03-14T16:12:13.530
> 
> 标签：javascript, backbone.js

我有一个基本的骨干模型集合。

我正在使用的视图显示有关模型的信息，允许编辑。

在我的视图渲染中，我根据传入的“id”捕获模型。

```
render: function() {

     this.model = myCollection.get(this.options.passedInId);

     // do the render...
} 
```

然后我有一个单击事件，它更新模型并调用渲染以使用更新重新渲染

```
 updateModel: function() {
        var me = this;

        this.model.set('someFlag', true);

        this.model.save(this.model.toJSON(), {
              success: function(model, resp) {
                 me.render();
              }

    } 
```

我的问题是，当它第二次通过渲染返回时，集合中的 get 返回模型的不同实例（我可以在其上看到不同的 cId），其中不包含我更改的“someFlag”属性。因此，重新渲染视图时不会显示我的编辑。我知道可能有一种更有效的方法来处理这个问题，但我的问题是为什么会发生这种情况？从集合中获取的模型不应该包括我对该模型所做的编辑吗？

唯一的另一件事是，此示例中的“myCollection”可能已在初始获取和编辑后的下一次获取之间重置，但 id 仍然存在，它会找到一个没有任何更新的模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:26:24.020

我的问题是集合在 render 方法和 updateModel 方法之间被重置。

这会导致模型与集合不同步以纠正问题，我需要做的就是在重置时绑定并确保我的模型使用“新”版本进行更新。我将此添加到我的渲染中。

```
var me = this;  
this.collection.on('reset', function () {
     me.model = this.get(me.model.id);
}; 
```

# css - 四个盒子同样分开，但一个不听

> ID：15414510
> 
> 赞同：0
> 
> 时间：2013-03-14T16:12:20.163
> 
> 标签：css, block

这是一个问题。[http://www.jsfiddle.net/PL6KX/](http://www.jsfiddle.net/PL6KX/) 我不知道问题出在哪里。非常感谢帮助。谢谢。

我想从边缘按比例居中。水平中心。

HTML：

```
<div id="firstleft-box"></div>
<div id="secondleft-box"></div>
<div id="firstright-box"></div>
<div id="secondright-box"></div> 
```

CSS：

```
#firstleft-box {
    position: absolute;
    display:block;
    left: 20%;
    border: 2px solid black;
    width: 100px;
    height: 100px;
}

#secondleft-box {
    position: absolute;
    display:block;
    left: 40%;
    border: 2px solid black;
    width: 100px;
    height: 100px;
}

#firstright-box {
    position: absolute;
    display:block;
    left: 60%;
    border: 2px solid black;
    width: 100px;
    height: 100px;
}

#secondright-box {
    position: absolute;
    display:block;
    left: 80%;
    border: 2px solid black;
    width: 100px;
    height: 100px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:17:38.370

Use `float` to get divs next to each other, `margin` to make space between them and then wrap one div around them and center it with `margin: 0px auto;` your approach is too complicated

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:27:15.790

请参阅下面的 JS Fiddle，了解为什么您的代码没有产生您期望的输出。

[http://jsfiddle.net/PL6KX/2/](http://jsfiddle.net/PL6KX/2/)

基本上，您将每个框的左侧对齐在 20、40、60、80 等处。您假设它将对齐框的中心。我在上面的小提琴中所做的是创建 5 个 20% 宽的框，以便它们相遇和接触的点分别代表 20%、40%、60% 和 80%。如您所见，顶部的框将其左边缘与这些百分比对齐。

你需要什么：（小提琴中的第三组盒子）

[http://jsfiddle.net/PL6KX/4/](http://jsfiddle.net/PL6KX/4/)

**HTML：**

```
<div class="container">
<div id="new-box"></div>
<div id="new-box"></div>
<div id="new-box"></div>
<div id="new-box"></div>
</div> 
```

**CSS：**

```
.container {
    margin: 0 auto;
    width: 450px;
    border: 1px solid red;
    overflow: hidden;
    clear: both;
    margin-top: 20px;
}

#new-box {
    box-sizing: border-box;
    float: left;
    width: 100px;
    height: 100px;
    margin-left: 10px;
    border: 1px solid black;
} 
```

# c# - 使用 Newtonsoft JSON 反序列化 IList 对象

> ID：15414515
> 
> 赞同：4
> 
> 时间：2013-03-14T16:12:28.423
> 
> 标签：c#, .net, json, deserialization, json.net

我正在使用 ConcreteCollectionTypeConverter 反序列化 IList 类型的对象。我可能做错了，因为我不断收到异常“无法将列表转换为 IList”

我的对象接口看起来像这样：

```
[JsonObject(MemberSerialization.OptIn)]
public IMyInterface {

    [JsonProperty("associatedContact")]
    [JsonConverter(typeof(ConcreteCollectionTypeConverter<IList<ISomeOtherInterface>, List<SomeOtherInterface>>))]
    IList<ISomeOtherInterface> MyObject { get; set; }
} 
```

我的对象实现如下所示：

```
public MyImplementation : IMyInterface {

    public List<SomeOtherImplementation> MyObject { get; set; }

    public MyImplementations () {
        MyObject = new List<SomeOtherImplementation>();          
    }
} 
```

我的 Json 转换器如下所示：

```
class ConcreteCollectionTypeConverter<TInterface, TImplementation> : JsonConverter where TImplementation : TInterface
{
    public override bool CanConvert(Type objectType)
    {
        return true;
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        serializer.Serialize(writer, value);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        return serializer.Deserialize<TImplementation>(reader);
    }
} 
```

我在我的项目的其他地方调用反序列化方法，如下所示：

```
var myDeserializedObject = JsonConvert.DeserializeObject<MyImplementation>(jsonObject.ToString()); 
```

我上面提到的 jsonObject 被正确解析。

我知道这是可能的，因为我在这里看到了一个用户对 SO 的评论，称他已经完成了它（[在 JSON.NET 中进行反序列化的转换接口](https://stackoverflow.com/questions/5780888/casting-interfaces-for-deserialization-in-json-net)- 已接受答案的第一条评论）。

这种方法适用于非集合项目（即使用 JsonConverer(typeof(ConcreteTypeCONverter)) 反序列化接口类型 IIterface MyObject 的对象）。

如果我只使用列表而不是 IList，我什至不需要类型转换器，但我的要求是确保使用 ICollections，因为可能存在非标准实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-10T19:39:02.290

我相信这将满足您的需求：

```
public class ConcreteListTypeConverter<TInterface, TImplementation> : JsonConverter where TImplementation : TInterface 
{
    public override bool CanConvert(Type objectType)
    {
        return true;
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        var res = serializer.Deserialize<List<TImplementation>>(reader);
        return res.ConvertAll(x => (TInterface) x);
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        serializer.Serialize(writer, value);
    }
} 
```

# php - 堆叠 PHP 5.3 三元运算符 - 安全吗？

> ID：15414520
> 
> 赞同：3
> 
> 时间：2013-03-14T16:12:41.033
> 
> 标签：php, ternary-operator

我知道链接`expr ? var1 : var2`代码的几个注意事项。

不过，我尝试堆叠 PHP 5.3`?:`运算符，它似乎在多个后备方案中运行良好：

```
php > $a=$b=0;
php > $c=5;
php > echo $a ?: $b ?: $c;
5
php > $b=2;
php > echo $a ?: $b ?: $c;
2
php > $a=1;
php > echo $a ?: $b ?: $c;
1 
```

在上面的例子中，我设置了一个后备值链，返回值（如预期的那样）是最左边的非零值。

有没有我没有考虑的情况，这可能会导致意想不到的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:14:21.360

是和不是:)

阅读有关三元操作的信息： [http ://www.mcgarvie.net/2013/02/27/programming/php-shorthand-if-notation-or-the-ternary-operator/](http://www.mcgarvie.net/2013/02/27/programming/php-shorthand-if-notation-or-the-ternary-operator/)

它有一些很好的例子来说明如何使用和不使用它们！

# ruby-on-rails - 不经过路由测试控制器

> ID：15414531
> 
> 赞同：3
> 
> 时间：2013-03-14T16:13:10.593
> 
> 标签：ruby-on-rails, testing, rspec, controllers

我正在尝试单独测试我的控制器的动作链。具体来说，我想确保我想要的行为适用于我的所有控制器的操作。例如，测试我的所有操作是否需要身份验证：

```
context "when not authenticated" do

  # single case
  describe "GET index" do
    it "responds with 401" do
      get :index
      response.code.should be(401)
    end
  end

  # all of them...
  described_class.action_methods.each do |action|
    ['get', 'put', 'post', 'delete', 'patch'].each do |verb|
      describe "#{verb.upcase} #{action}" do
        it "responds with 401" do
          send verb, action
          response.code.should == "401"
        end
      end
    end   
  end

end 
```

我希望这会起作用，但事实并非如此。我得到一些`ActionController::RoutingErrors`。这是因为我的一些路线需要参数，在某些情况下我没有提供它们（比如当我打电话时`post :create`）。我明白了。但我不明白的是：*这*有什么关系！？

对于这些测试，路由是一个单独的问题。我关心我的行动链，而不是我的请求（这就是我所拥有`routing specs`和`request specs`追求的）。在这个级别上，我不需要担心我的路线限制。

所以我的问题是：有没有办法只测试动作链而不模拟请​​求？

**编辑：一些研究**

看起来路线正在[TestCase#process 中进行](https://github.com/rails/rails/blob/d42d97d2e3f0bdef2163cc14daa181903e0b198d/actionpack/lib/action_controller/test_case.rb#L424)。这是必要的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T17:45:15.733

一种解决方法是放松路由引擎的约束。这不会绕过路由，但确实可以更轻松地进行测试。

在您的规格中添加如下内容：

```
before(:all) do
  Rails.application.routes.draw { match ':controller(/:action)' }
end
after(:all) do
  Rails.application.reload_routes!
end 
```

虽然严格来说不是这个问题的答案，但它可能是一个足够好的解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T17:10:30.057

我认为路由不是控制器规范的单独关注点。原因之一是根据传递到 url 中的值将值添加到 params 哈希中，并且控制器中的代码可能取决于这些值。

无论如何，我假设您在`ApplicationController`. 单独测试每个控制器似乎有点多余。这是我的做法：

```
require "spec_helper"

describe ApplicationController do
  describe "require_current_user" do
    ACTIONS_AND_VERBS = [
      [:index,   :get],
      [:show,    :get],
      [:new,     :get],
      [:create,  :post],
      [:edit,    :get],
      [:update,  :put],
      [:destroy, :delete],
    ]

    controller do      
      ACTIONS_AND_VERBS.each do |action, _|
        define_method(action) do
        end
      end
    end

    ACTIONS_AND_VERBS.each do |action, verb|
      describe "#{verb.to_s.upcase} '#{action}'" do
        it "should be successful" do
          send(verb, action, id: -1)
          response.code.should eq("401")
        end
      end
    end
  end
end 
```

在我的`ApplicationController`我会有类似的东西......

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  before_filter :require_current_user

  def require_current_user
    head :unauthorized
  end
end 
```

**编辑：**如果我理解正确，我们真正测试的是您的`require_current_user`，或您想要进行的任何等效授权过程，是否按预期工作。在这种情况下，我们可以只测试一个动作，并相信它`before_filter`可以正常工作。

```
require "spec_helper"

describe ApplicationController do
  describe "require_current_user" do
    controller do
      def index
      end
    end

    it 'should head unauthorized for unauthorized users' do
      get :index
      response.code.should eq("401")
    end
  end
end 
```

# ios - 清理协作 Xcode 项目中的空文件引用

> ID：15414534
> 
> 赞同：1
> 
> 时间：2013-03-14T16:13:12.983
> 
> 标签：ios, xcode, macos, git

我的 Xcode 文件系统中的这些空壳是什么？安全删除它们的程序是什么？还在 Xcode File Navigator 中搜索了重复的引用，但没有找到。

**旁注：**项目是通过 git 协作的，我怀疑这与他们的存在有关。有时，在合并功能分支后，我们会在 myproject.pbxproj 文件中遇到冲突，并且必须通过删除重复的文件引用手动解决冲突，因此可能会漏掉一些。对于任何陷入类似混乱的人：清理它的标准方法是什么？

![在此处输入图像描述](../Images/fc78f2128917d8417879e9044a1400dd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:51:45.913

是的，我在合并时遇到了同样的问题：

这是因为您的`project.pbxproj`文件未成功更新。对于我们添加的每个文件，它的引用都添加到 project.pbxproj file.here 中，这些文件已经包含您的 project.pbxproj 文件的条目（如果您查看文件的关闭，例如 E00021389E899）并且另一个用户也添加了相同的文件然后，您的 project.pbxproj 文件中将有 2 个条目用于相同的 .h/.m，这就是它显示此错误的原因。

出于清理目的，您只需右键单击并删除该文件。不会有任何问题。并且不要忘记定期更新您的代码。如果您的 project.pbxproj 中有冲突，则需要正确解决它或尝试获取新副本。

# android - FragmentPagerAdapter 的问题

> ID：15414535
> 
> 赞同：9
> 
> 时间：2013-03-14T16:13:13.870
> 
> 标签：android, android-fragments, android-viewpager, fragmentpageradapter, android-pageradapter

我正在尝试使用 viewpager 和片段制作一个幻灯片屏幕，以便我可以为每个片段加载不同的布局并为每个页面提供不同的功能。

我按照[教程](http://wptrafficanalyzer.in/blog/implementing-horizontal-view-swiping-using-viewpager-and-fragmentpageradapter-in-android/)完成了这个。

悬停时出现的错误`public Fragment getItem(int arg0)`：返回类型不兼容`FragmentPagerAdapter.getItem(int)`

和错误＃2：构造函数`FragmentPagerAdapter(FragmentManager)`未定义->悬停时获取此构造函数`super(fm);`

```
package com.example.spui;

import android.os.Bundle;
import android.app.Fragment;
import android.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;

public class MyFragmentPagerAdapter extends FragmentPagerAdapter{

    final int PAGE_COUNT = 5;

    /** Constructor of the class */
    public MyFragmentPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    /** This method will be invoked when a page is requested to create */
    @Override
    public Fragment getItem(int arg0) {

        MyFragment myFragment = new MyFragment();
        Bundle data = new Bundle();
        data.putInt("current_page", arg0+1);
        myFragment.setArguments(data);
        return myFragment;
    }

    /** Returns the number of pages */
    @Override
    public int getCount() {
        return PAGE_COUNT;
    }
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-14T16:16:20.683

您使用了错误的`FragmentManager`导入。改为使用`android.support.v4.app.FragmentManager`。

同样的问题`Fragment`- 使用`android.support.v4.app.Fragment`

注意：如果您正在构建一个仅 API11+ 的应用程序并且想要使用本机 Fragments，那么您应该改为将`FragmentPagerAdapter`导入更改为`android.support.v13.app.FragmentPagerAdapter`.

# android - 在 4.1 上摆脱状态栏

> ID：15414537
> 
> 赞同：1
> 
> 时间：2013-03-14T16:13:16.223
> 
> 标签：android

我需要摆脱 Android 4.1 平板电脑上的系统栏，因为平板电脑将处于商业/零售环境并用于商业用途。我的应用程序将是平板电脑上唯一使用的应用程序，它需要尽可能多的屏幕空间来完成我们正在尝试做的事情。我已经搜索过了，我发现有办法在有根的平板电脑上做到这一点，但是由于这将在一个企业中部署到数百或数千个企业，我不能让所有的平板电脑都植根于法律和安全问题。（如果我要根植它们，我真的会在法律上遇到问题吗？）

我知道您可以使状态栏变暗并使按钮成为圆点，但这确实不是最佳选择。

如果没有办法摆脱它，是否可以更改状态栏图标和功能？我问这个是因为我们的应用程序顶部有一个状态栏，我们可以将其移动到底部并更改状态栏的图标和功能以匹配应用程序的状态栏，因此不会丢失屏幕空间。

我读过 4.2 为应用程序添加了一些全屏功能。这是真的？状态栏可以隐藏在 4.2 中而不是 4.1 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:20:30.030

> I need to get rid of the system bar on Android 4.1 tablets

That is not possible, except via rooted devices and/or ROM mods. Moreover, the user needs this bar to be there, otherwise they have no access to the HOME and BACK buttons.

> Would I really have issues legally though if I were to root them?

StackOverflow is not a law office. Please consult with qualified legal counsel regarding such concerns.

> is it possible to change the status bar icons and functionality?

That is not possible, except via rooted devices and/or ROM mods.

> I have read that 4.2 adds some fullscreen functionality for apps. Is this true?

Not exactly. The bottom navigation bar (HOME, BACK, RECENTS) can be hidden, but they will return as soon as the user touches the screen. The top status bar (signal strength, battery level, etc.) can be removed via a `Fullscreen` theme.

# c++ - 对于哪个标准容器（如果有），end() 返回的迭代器是持久的？

> ID：15414541
> 
> 赞同：1
> 
> 时间：2013-03-14T16:13:18.940
> 
> 标签：c++, containers

我需要一种快速访问容器中数据的方法。

所以我记得那个数据位置的迭代器。之后可能会修改容器（添加和删除元素），但如果我使用不会使我的迭代器无效的容器类型（如`std::map`or `std::list`）我很好。

另外我的数据可能不在容器中（还），所以我设置了一个迭代器`container.end()`来反映这一点。

哪个标准容器保证`end()`在添加和删除元素时不会改变？所以我仍然可以将我的迭代器与返回的值进行比较，`container.end()`而不会得到假阴性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T16:30:47.127

23.2.4/9 说关联容器：

> insert 和 emplace 成员不应影响迭代器和对容器的引用的有效性，而擦除成员应仅使迭代器和对被擦除元素的引用无效

现在，有些地方标准谈到不使“迭代器和对容器元素的引用”无效，因此不包括`end()`. 我不相信这是其中之一——我很确定`end()`迭代器是“容器的迭代器”。

23.3.5.4/1 表示`std::list`“`insert`不影响迭代器和引用的有效性”，而 23.3.5.4/3 表示`erase`“仅使迭代器和对已擦除元素的引用无效”。同样，`end()`迭代器是迭代器，因此不排除它们的有效性。

需要注意的一件事是，对于任何容器，`swap`都可以使 end() 迭代器无效（我认为这是因为有两种“自然”行为，即 end 迭代器指向同一个容器的末尾，或者指向末尾它被交换的一个，但标准不想规定或排除其他可能性）。但你不是在交换，只是添加和删除元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T16:19:38.880

根据我的经验，迭代器从擦除或添加调整大小时会中断（这也适用于`std::vector`' s 的存储）。并且不分配内存块：它们通常分配单个节点（并且大多数实现将桶作为项目的链接列表（例如，））。`std::dequeue``std::string``std::list``std::map``std::unordered_map``std::list`

如果您需要一个幸存的`end()`迭代器，请选择一个`std::list`（我这样做是为了我的 Signal/Slots 实现，为了他们的令牌）或使用`std::vector`/进行您自己的个人簿记`std::dequeue`。

***编辑***：因此，`std::list`如果您的列表本身永远不会消失（它们不会），那么这是让您的迭代器始终有效的好方法。从另一个答案中，如果您需要标准的清晰度：

> 23.3.5.4/1 说 std::list 插入“不影响迭代器和引用的有效性”，而 23.3.5.4/3 说擦除“仅使迭代器和对被擦除元素的引用无效”。同样， end() 迭代器是迭代器，因此不排除它们的有效性。-[另一个答案](https://stackoverflow.com/a/15414926/1357649)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:19:48.583

代替迭代器，使用 a`vector`并存储索引值。他们将在任何重组中幸存下来。迭代器主要用于指定范围的成对使用；如您所见，挂在单个迭代器上会变得混乱。

# ruby-on-rails - 基础设施：从 Rails 应用程序执行远程命令

> ID：15414542
> 
> 赞同：0
> 
> 时间：2013-03-14T16:13:19.793
> 
> 标签：ruby-on-rails, ruby, windows

从 Rails 应用程序在远程 Windows 机器上运行命令的最佳方式是什么？我需要启动/停止进程，并上传/下载文件。

目前，我曾想过编写一个 ruby​​ 脚本或可执行文件，驻留在 rails 应用程序可以与之通信的机器上，但我以前从未这样做过，希望对此有所了解。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:25:05.197

您需要结合使用本地工具（ruby 脚本、内置系统命令等）和`#system`命令。您可以在[http://rubyquicktips.com/post/5862861056/execute-shell-commands上看到如何从 Ruby 执行 shell 命令的一个很好的概述](http://rubyquicktips.com/post/5862861056/execute-shell-commands)

建议使用`#system`，因为它根据任务的结果提供布尔响应。

```
system("ruby -e 'puts RUBY_VERSION'")
2.0.0
=> true

system("ruby -e 'raise StandardError'")
-e:1:in `<main>': StandardError (StandardError)
=> false 
```

# android - 得到“android.content.res.resources$notfoundexception”

> ID：15414544
> 
> 赞同：1
> 
> 时间：2013-03-14T16:13:30.133
> 
> 标签：android, android-listview, contextmenu

我有 3 个选项卡，每个选项卡都有一个列表视图。我已经为上下文菜单注册了这些列表视图。我有三个不同的数组列表，我在其中存储各个列表视图的项目。

现在我想要被点击的列表视图项目的位置。

我的代码是：

```
public boolean onContextItemSelected(MenuItem item) {

     AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

      switch(item.getItemId()){

   case R.id.mycards_contextmenu_1:

       if(mCurrentTab.equals("Tab 1")){
           try{
           int pos= info.position;
           Toast.makeText(getBaseContext(), pos, Toast.LENGTH_LONG).show();
           }catch(Exception e){
               Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG).show();
           }
           }
    break;

  } 
```

我正进入（状态

```
 android.content.res.resources$notfoundexception 
```

我哪里出错了？

编辑：

```
Stack Trace :

 03-14 22:06:12.488: E/AndroidRuntime(3055): FATAL EXCEPTION: main
 03-14 22:06:12.488: E/AndroidRuntime(3055): android.content.res.Resources$NotFoundException: String resource ID #0x0
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at android.content.res.Resources.getText(Resources.java:229)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at android.widget.Toast.makeText(Toast.java:265)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at neeraj.cardXchange.myCardsPackage.myCardsActivity.onContextItemSelected(myCardsActivity.java:211)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at android.app.Activity.onMenuItemSelected(Activity.java:2552)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at com.android.internal.policy.impl.PhoneWindow$DialogMenuCallback.onMenuItemSelected(PhoneWindow.java:3601)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at com.android.internal.view.menu.MenuDialogHelper.onClick(MenuDialogHelper.java:167)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:924)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at android.widget.AbsListView.performItemClick(AbsListView.java:1086)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2855)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at android.widget.AbsListView$1.run(AbsListView.java:3529)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at android.os.Handler.handleCallback(Handler.java:615)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at android.os.Handler.dispatchMessage(Handler.java:92)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at android.os.Looper.loop(Looper.java:137)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at android.app.ActivityThread.main(ActivityThread.java:4745)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at java.lang.reflect.Method.invokeNative(Native Method)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at java.lang.reflect.Method.invoke(Method.java:511)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
 03-14 22:06:12.488: E/AndroidRuntime(3055):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:40:47.907

```
Toast.makeText(getBaseContext(), pos, Toast.LENGTH_LONG).show(); 
```

应该

```
Toast.makeText(getBaseContext(), String.valueOf(pos), Toast.LENGTH_LONG).show(); 
```

`Toast`还有一个[`makeText()`](http://developer.android.com/reference/android/widget/Toast.html#makeText%28android.content.Context,%20int,%20int%29)接受 String 资源 id 的方法（它是 an `int`），并且通过 pasing `pos`，您调用该方法，该方法找不到具有该 id 的 String 资源，因此

```
android.content.res.Resources$NotFoundException 
```

# sql - 用于 ORM 框架的 Informix 中的串行字段

> ID：15414546
> 
> 赞同：1
> 
> 时间：2013-03-14T16:13:32.120
> 
> 标签：sql, informix

我们使用非常旧版本的 Informix (SE)。我正在尝试在 C# 中创建一个 ORM 类型框架来处理 CRUD 过程。我很难想出一种方法来处理包含 SERIAL 字段的表。

基本上，我想以某种方式创建一个唯一值，我可以合理地确定在插入记录时仍然是唯一的，或者至少获得我刚刚插入的记录的值。如果许多用户同时使用该表，这必须有效（因此是数据库范围的方案）。

我知道较新的版本具有可以设置的“序列”对象，但 SE 没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T05:24:37.803

仅供参考：**Informix ODBC 驱动程序和 .NET 驱动程序不正式支持 SE**；它可能仍然有效。我对 SE 的了解也很有限；我在下面列出的信息可能比 SE 与 IDS 更相关。

您正在尝试的驱动程序是**.NET Framework Data Provider for ODBC**；它不适用于 Informix 串行数据类型。**Informix 本机 .NET 提供程序**支持IDS 中的串行，但该驱动程序从未针对 SE 进行过测试。如果您愿意冒险，那么成功的机会可能会更高。

我认为您不必使用任何复杂的算法来使服务器上的序列值唯一。下面的例子将更好地解释它。

```
 CREATE TABLE tab ( c1 SERIAL );
    INSERT INTO tab VALUES ( 0 ); 
    INSERT INTO tab VALUES ( 4 );  
    INSERT INTO tab VALUES ( 0 ); 
    INSERT INTO tab VALUES ( 3 ); 
    INSERT INTO tab VALUES ( 3 );
    INSERT INTO tab VALUES ( 0 ); 
    SELECT * FROM tab;

     1
     4
     5
     3
     3
     6

DROP TABLE tab;
CREATE TABLE tab ( c1 INT, c2 SERIAL PRIMARY KEY );
INSERT INTO tab VALUES ( 11, 0 );
INSERT INTO tab VALUES ( 12, 0 );
INSERT INTO tab VALUES ( 13, 0 );
INSERT INTO tab VALUES ( 14, 0 );
INSERT INTO tab VALUES ( 15, 0 );
SELECT * FROM TAB;

c1          c2

11           1
12           2
13           3
14           4
15           5 
```

如果您正在尝试在客户端生成序列类型值，例如添加到 DataTable 等的条目，那么**DataColumn**上的以下属性可能很有用： **AutoIncrement**、 **AutoIncrementStep**、 **AutoIncrementSeed**。

# c - 如何在 CTRL-C 之前保持输入

> ID：15414548
> 
> 赞同：1
> 
> 时间：2013-03-14T16:13:39.173
> 
> 标签：c, unix, ubuntu

有了这段代码，我在 Stack 上找到了：

```
...
char buffer[256]

while((count=read(0, buffer, 256)) > 1)
   {
   if(buffer[count] = '\n') break;
   }

   buffer[n-1] ='\0'; 
```

我可以从标准输入中读取，但我有 2 个问题：

1.  为什么`'='`在 if() 中使用而不是`'=='`？
2.  如果我`CTRL-C`在写完东西后按，我怎么能保留我写的东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:51:24.460

> 为什么在 if() 中使用 '=' 而不是 '=='？

在 if 语句中，这可能是一个错字。因为

```
buffer[count] = '\n' 
```

将始终为 '\n'，并且在 C 中为“true”（非空）。

> 如果我在写完东西后按 CTRL-C，我怎样才能保留我写的东西？

在终端中按 CTRL-C 将向正在运行的进程发送一个 SIGINT。通常，您的应用程序将立即退出，无论它在做什么。

[你可以用几行代码](https://stackoverflow.com/a/4217052/2165444)来捕捉 SIGINT 事件，但是“保留你写的东西”有什么意义呢？

# regex - 分组重复正则表达式？

> ID：15414554
> 
> 赞同：0
> 
> 时间：2013-03-14T16:13:53.843
> 
> 标签：regex

我想匹配以下文本：

```
PokerStars Hand #95528134282: Tournament #2013004001, $0.10+$0.01 USD Hold'em No Limit - Level VI (100/200) - 2013/03/14 15:35:36 WET [2013/03/14 11:35:36 ET]
Table '2013004001 5898' 9-max Seat #1 is the button
Seat 1: Pucharrin (7250 in chips) 
Seat 2: pahol (24180 in chips) 
Seat 3: dno16 (2000 in chips) 
Seat 4: sogd20i07 (150 in chips) is sitting out
Seat 5: koaollie (13680 in chips) 
Seat 6: vovik770 (6307 in chips) 
Seat 7: gab341978 (6920 in chips) 
Seat 8: 19gow63 (1000 in chips) 
Seat 9: pokerplayer (9048 in chips) 
pahol: posts small blind 100
dno16: posts big blind 200
*** HOLE CARDS ***
Dealt to pokerplayer [3s 9d]
sogd20i07: folds 
koaollie: folds 
vovik770: folds 
gab341978: folds 
19gow63: raises 800 to 1000 and is all-in
pokerplayer: folds 
Pucharrin: folds 
pahol: raises 1000 to 2000
dno16: calls 1800 and is all-in
*** FLOP *** [4s 7c Ah]
*** TURN *** [4s 7c Ah] [Qs]
*** RIVER *** [4s 7c Ah Qs] [Ks]
*** SHOW DOWN ***
pahol: shows [Qc Qd] (three of a kind, Queens)
dno16: shows [6h 2h] (high card Ace)
pahol collected 2000 from side pot
19gow63: shows [Kd 2s] (a pair of Kings)
pahol collected 3000 from main pot
19gow63 re-buys and receives 1000 chips for $0.10
dno16 re-buys and receives 2000 chips for $0.20
*** SUMMARY ***
Total pot 5000 Main pot 3000\. Side pot 2000\. | Rake 0 
Board [4s 7c Ah Qs Ks]
Seat 1: Pucharrin (button) folded before Flop (didn't bet)
Seat 2: pahol (small blind) showed [Qc Qd] and won (5000) with three of a kind, Queens
Seat 3: dno16 (big blind) showed [6h 2h] and lost with high card Ace
Seat 4: sogd20i07 folded before Flop (didn't bet)
Seat 5: koaollie folded before Flop (didn't bet)
Seat 6: vovik770 folded before Flop (didn't bet)
Seat 7: gab341978 folded before Flop (didn't bet)
Seat 8: 19gow63 showed [Kd 2s] and lost with a pair of Kings
Seat 9: pokerplayer folded before Flop (didn't bet) 
```

我想以“Seat somenumber: someplayername (somenumber in chips) someoptionaltext” 开头的行作为一个组。我尝试了以下正则表达式：

```
PokerStars.*?Level .+? \(\d+\/(\d+)\) (?:.|\s)*?((?:Seat \d+: .*? \(\d+ in chips\)(?:.|\s)*?)+)(?:.|\s)*?(.*?) collected (\d+) 
```

但它只捕获了第一次出现的“座位 1：Pucharrin（筹码 7250）”。

如何更改它以捕获组？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:25:30.243

这是一个捕获您需要的数据的正则表达式。当您指定这些元素的语法/顺序时，我可以为您修改它

`(Seat\s(\d)+:\s+([\w\d\-\_\.]+)\s+\((\d+)\s+in\s+chips\)(.*))`

我用你的服务和输入来测试它，似乎工作正常。

- 编辑 -

除非您希望整个块从最后一个开始`PokerStars`并在最后一个停止`)` 然后可能：

```
if (preg_match('/((?:PokerStars.*\s*Table.*[\r\n]*)(?:Seat.*\s+)+)/i', $subject, $regs)) {
    $result = $regs[0];
} else {
    $result = "";
} 
```

# java - 将 JTable 编辑保存到二维数组

> ID：15414555
> 
> 赞同：0
> 
> 时间：2013-03-14T16:13:54.667
> 
> 标签：java, swing, jtable, defaulttablemodel

我有一个 JTable，其单元格是可编辑的。但是，如果我编辑一个单元格并刷新表格。未保存更改。这就是我定义表格的方式：

```
 String [] columnNames = {"Application number",
                            "Name",
                            "date",
                            "fileLoc",
                            "Country"};
    //Data for the table
    String [][] data = table.tableArray;//tableArray is an array of array of strings.

    TableModel model = new DefaultTableModel(data, columnNames);
    JTable mainTable = new JTable(model);
    model.isCellEditable(data.length,columnNames.length);
    contentPane.add(new JScrollPane (mainTable)); 
```

我在网上看了看，但似乎找不到任何关于保存对单元格所做的更改的建议。非常欢迎任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:34:17.297

> 我想我并没有像这样刷新桌子。我使用 frame.dispose() 然后创建一个包含表格的新框架。

*   那么您丢失了在当前 DefaultTableModel 中所做的所有更改

*   不要使用新的 DefaultTableModel 和新的 JTable 创建新的 JFrame

*   来自 TableCellEditor 的所有更改都是在 JTables 视图中显示的更改

*   JTable（及其模型）为这项工作做好了准备，不要在运行时重新创建这些对象

*   DefaultTableModel 已实现所有通知程序，无需覆盖任何其他事件，也无需以编程方式触发 XxxXxx()，但 AbstractTableModel 需要这些事件

*   为您的 JTable 定义添加此代码行`mainTable.putClientProperty("terminateEditOnFocusLost", Boolean.TRUE);`

*   DefaultTableModel 代表您所需的二维数组

# photoshop - 如何在 Photoshop 中创建如下图所示的区域栏？

> ID：15414562
> 
> 赞同：-2
> 
> 时间：2013-03-14T16:14:11.783
> 
> 标签：photoshop, photoshop-cs4, photoshop-cs3

我如何在顶部和底部也为区域创建像下面的图像栏一样的区域栏？我搜索了很多，但没有找到它，我该怎么做？

![点击这里](../Images/a94d8b1cfc9e88aa4ac1b8ed56103886.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T16:51:39.593

您可以使用**矩形选框工具**并填充所需的颜色。

`Marquee tool`也有`add and subtract`选项，您也可以`different shapes`根据自己的形象进行制作。

# javascript - 从一个获取“数据”属性 in jQuery I have a system loading in a youtube video using an object tag with the id="cstmVideoContent" and the data=(youtube link). I need to extract the content in the object's data property using javascript/jquery 问问题 问问题 2013-03-14T16:14:14.313 184 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a system loading in a youtube video using an object tag with the id="cstmVideoContent" and the data=(youtube link). I need to extract the content in the object's data property using javascript/jquery and render it elsewhere on the page. Here's my relevant html: Based on my admittedly crude knowledge of javascript/jquery, it seems like this should work: var videolink = $('object#cstmVideoContent').attr('data'); But it is coming back as "undefined" every time. Is this method possible, am I doing something wrong, or is there a better way? Thanks! hammer.js http://eightmedia.github.com/hammer.js/ is one of the best javascript library for such problems.. javascriptjquery 4 1 回答 1 This answer is useful 3 这就是我为数据所做的： var personalvideo = $('#cstmVideoContent').data('link'); 这是基于 HTML5 的，因此您需要考虑在多个浏览器中进行测试以确保兼容性。 见：http ://api.jquery.com/data/ 于 2013-03-14T16:18:56.867 回答 Related 3 python - 如何将列表拆分为较小的列表？ 0 magento - 首次使用 Graph API Explorer 发布自定义操作 2 functional-programming - 如何使用 Scheme 中的原始表达式找到第 6 个根？ 1 java - 在任何 JTextComponent 中显示换行符？ 1 java - java包声明 4 c - strdup的使用 1 facebook - 如何检查 Facebook 帖子是否可评论 1 django - Django admin.ModelAdmin 如何调用 change_view 方法 1 delphi - System.copy 和 StrUtils.MidStr 之间的区别 4 java - 从目录中过滤和选择文件 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15414563
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, jquery

I have a system loading in a youtube video using an object tag with the id="cstmVideoContent" and the data=(youtube link). I need to extract the content in the object's data property using javascript/jquery and render it elsewhere on the page.

Here's my relevant html:

```
<object id="cstmVideoContent" width="400" height="320" type="application/x-shockwave-flash" data="NEED THE VIDEO LINK THAT IS HERE" style="visibility: visible;"></object> 
```

Based on my admittedly crude knowledge of javascript/jquery, it seems like this should work:

```
var videolink = $('object#cstmVideoContent').attr('data'); 
```

But it is coming back as "undefined" every time. Is this method possible, am I doing something wrong, or is there a better way? Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:18:56.867

这就是我为数据所做的：

```
<object id="cstmVideoContent" width="400" height="320" type="application/x-shockwave-flash" data-link="NEED THE VIDEO LINK THAT IS HERE" style="visibility: visible;"></object>

var personalvideo = $('#cstmVideoContent').data('link'); 
```

这是基于 HTML5 的，因此您需要考虑在多个浏览器中进行测试以确保兼容性。

见：[http ://api.jquery.com/data/](http://api.jquery.com/data/)

# c++ - 从标准输入读取文本文件

> ID：15414567
> 
> 赞同：0
> 
> 时间：2013-03-14T16:14:24.553
> 
> 标签：c++, file, stdin

我正在尝试查看从包含信息的文本文件中读取输入的最简单方法：

```
7
12
v1-v2 7
v1-v3 11
v1-v4 1
v2-v4 12
v2-v5 5
v3-v4 8
v3-v6 10
v4-v5 6
v4-v6 3
v4-v7 4
v5-v7 9
v6-v7 2 
```

通常这应该很简单，但我需要考虑前两行，其中包含所需的 2 个不同数字。

到目前为止，我已经设置：

```
int nodes;
int lines;
string line;

int count=0;

while(cin) {
  getline(cin, line);

  for(int i = 0; i < line.length(); i++) {
    if(count >2)
        break;

   if(! (s[i] >= '0' && s[i] <= '9') 
     break;
   else if(count=0) {
     nodes = s[i]-'0';
   }
   else
     lines = s[i]-'0';

     count++;
  }

 //Space for code to account for other lines

} 
```

所以这是一个关于获得前两个数字的方法，但我相信应该有一种更简单的方法来做到这一点。任何建议或是否有人可以指出我正确的方向

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:20:05.700

为什么不读取循环前的两个数字：

```
cin >> nodes >> lines; 
```

如果输入中没有任何内容，则变量将设置为 0。

如果您需要以更好的方式处理此问题，您可以执行类似的操作：

```
if (cin) cin >> nodes;
else { /* handle error situation */ }

if (cin) cin >> lines;
else { /* handle error situation */ } 
```

# javascript - FancyBox 2 Prevent Bubbling

> ID：15414568
> 
> 赞同：0
> 
> 时间：2013-03-14T16:14:25.757
> 
> 标签：javascript, jquery, fancybox-2, event-bubbling

In FancyBox2 I want to prevent bubbling of a element inside an element.
On both elements there is fancybox attached.
But if you click on the the inner element the outer element also fired.
How can I stop the event-bubbling?

HTML :

```
<div class="outside" data-fancybox-href="#content">OUT
    <div class="inside" data-fancybox-href="#content">IN</div>
</div>
<div id="content">content</div> 
```

CSS :

```
.outside {
    background :yellow;
    height:100px;
    width:100px;
}
.inside {
    background : orange;
    height:50px;
    margin:0 25px;
    width:50px;
}

#content
{
    display:none;
} 
```

JS :

```
jQuery(".outside").fancybox({
    beforeLoad: function () {
        alert("outside");
    }
});

jQuery(".inside").fancybox({
    beforeLoad: function () {
        alert("inside");
    }
}); 
```

Here is an example : [http://jsfiddle.net/zrH6g/](http://jsfiddle.net/zrH6g/)

**EDIT 1**
Fixed it by loading the content and with clicks [http://jsfiddle.net/483uM/2/](http://jsfiddle.net/483uM/2/)

**EDIT 2**
Edit 1 was a solution but it wasn't working since the content(DOM Elements) were copied and not moved. FancyBox 1 copies and paste the DOM Elements.
FancyBox 2 Moves it and puts it back(Cut/Paste).

What I've done now is I created a new div and click on that and remove it when fancybox closes.

```
//Results Cup
    jQuery('.beakerLink').click(function(event)
    {
        //Stop Default + Event Bubbling
        event.preventDefault();
        event.stopPropagation();

        //Set CSS Class + DataFancyBoxHref
        var fancyBoxRemoveCssClass = "NEED_TO_HIDE_THIS_AFTER_FANCYBOX_CLOSE";
        var dataFancyBoxHref = jQuery(this).attr("data-fancybox-href");

        //Dirty FIX : Add div to click for beaker link
        //Reason : Can't prevent event bubbling of beaker
        jQuery(".kalender_overview").append("<div class='" + fancyBoxRemoveCssClass + "' data-fancybox-href='" + dataFancyBoxHref + "'>REMOVE AFTER FANCYBOX CLOSES</div>");

        //Init FancyBox
        jQuery("." + fancyBoxRemoveCssClass).fancybox(
        {
            //Before Closing
            beforeClose: function()
            {
                //Remove Created Temp Div Element (Dirty FIX)
                jQuery("." + fancyBoxRemoveCssClass).remove();
            }
        });

        //Click
        jQuery("." + fancyBoxRemoveCssClass).click();
    }); 
```

# java - RMS 的快速计算在 Java 中给出了 NaN - 浮点错误？

> ID：15414572
> 
> 赞同：3
> 
> 时间：2013-03-14T16:14:38.077
> 
> 标签：java, algorithm, math, floating-point, nan

我用浮点数做数学得到了一个令人困惑的结果。我的代码永远不会产生负数，这会在我尝试取平方根时导致 NaN。

这段代码似乎在测试中运行良好。然而，当对真实世界的数字（即可能非常小，七个和八个负指数）进行运算时，总和最终变为负数，导致 NaN。理论上，减法步骤只会删除已经添加到`sum`;的数字。这是一个浮点错误问题吗？有什么办法可以解决吗？

编码：

```
public static float[] getRmsFast(float[] data, int halfWindow) {
    int n = data.length;
    float[] result = new float[n];
    float sum = 0.000000000f;
    for (int i=0; i<2*halfWindow; i++) {
        float d = data[i];
        sum += d * d;
    }
    result[halfWindow] = calcRms(halfWindow, sum);

    for (int i=halfWindow+1; i<n-halfWindow; i++) {
        float oldValue = data[i-halfWindow-1];
        float newValue = data[i+halfWindow-1];
        sum -= (oldValue*oldValue);
        sum += (newValue*newValue);
        float rms = calcRms(halfWindow, sum);
        result[i] = rms;
    }

    return result;
}

private static float calcRms(int halfWindow, float sum) {
    return (float) Math.sqrt(sum / (2*halfWindow));
} 
```

对于某些背景：我正在尝试优化一个计算信号数据的滚动均方根 (RMS) 函数的函数。优化非常重要；这是我们加工的热点。基本方程很简单 - [http://en.wikipedia.org/wiki/Root_mean_square](http://en.wikipedia.org/wiki/Root_mean_square) - 将窗口上数据的平方相加，将总和除以窗口大小，然后取平方。

原代码：

```
public static float[] getRms(float[] data, int halfWindow) {
    int n = data.length;
    float[] result = new float[n];
    for (int i=halfWindow; i < n - halfWindow; i++) {
        float sum = 0;
        for (int j = -halfWindow; j < halfWindow; j++) {
            sum += (data[i + j] * data[i + j]);
        }
        result[i] = calcRms(halfWindow, sum);
    }
    return result;
} 
```

这段代码很慢，因为它在每一步都从数组中读取整个窗口，而不是利用窗口中的重叠。预期的优化是通过删除最旧的值并添加最新的值来使用该重叠。

我已经非常仔细地检查了新版本中的数组索引。它似乎按预期工作，但我在那个领域肯定是错的！

**更新：**`sum`使用我们的数据，将类型更改为双精度 就足够了。不知道为什么我没有想到。但是我留下了否定的检查。而且 FWIW，我还能够实现一个 sol'n，其中每 400 个样本重新计算总和可以提供很好的运行时间和足够的准确性。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:21:48.007

> 这是一个浮点错误问题吗？

是的。由于四舍五入，您很可能在减去前一个和后得到负值。

例如：

```
 float sum = 0f;
    sum += 1e10;
    sum += 1e-10;
    sum -= 1e10;
    sum -= 1e-10;
    System.out.println(sum); 
```

在我的机器上，这打印

```
-1.0E-10 
```

即使在数学上，结果也完全为零。

这是浮点的本质：`1e10f + 1e-10f`给出与 完全相同的值`1e10f`。

就缓解策略而言：

1.  您可以使用`double`而不是`float`提高精度。
2.  有时，您可以完全重新计算平方和以减少舍入误差的影响。
3.  当总和变为负数时，您可以按照上面的 (2) 进行完全重新计算，或者简单地将总和设置为零。后者是安全的，因为您知道您会将总和推向其真实价值，并且永远不会偏离它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:26:26.633

尝试在第二个循环中检查您的索引。`i`will`n-halfWindow-1`和`n-halfWindow-1+halfWindow-1`is的最后一个值`n-2`。

您可能需要将循环更改为`for (int i=halfWindow+1; i<n-halfWindow+1; i++)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:26:47.910

您遇到了浮点数的问题，因为您认为它们就像数学实数一样。它们不是，它们是实数的近似值，映射为离散数字，并添加了一些特殊规则。

如果您打算经常使用浮点数，请花时间阅读[每个程序员应该了解的浮点数知识。](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)如果不小心，浮点数和实数之间的差异可能会以最糟糕的方式回来并咬你。

或者，相信我的话，并且知道每个浮点数都“非常接近”请求的值，其中一些“完全”准确，但大多数“大部分”准确。这意味着您需要考虑测量误差并在计算后牢记这一点，否则可能会在计算值结束时相信您有准确的结果（您没有）。

# watir - 使用 classic-watir 访问新的浏览器选项卡

> ID：15414573
> 
> 赞同：1
> 
> 时间：2013-03-14T16:14:41.037
> 
> 标签：watir

在我的应用程序中，当您单击某些链接时，它们会在新选项卡中打开该 url。我在尝试访问新标签时遇到问题。

我试过使用`send_keys`，但无法让它工作。我使用的是经典 watir (1.9.0)，而不是 watir-webdriver。不幸的是，每当我尝试对此进行搜索时，都会得到很多引用 watir-webdriver 的结果，但没有引用经典 watir。

我知道在某个时候我应该升级到 watir-webdriver，但是目前，我真的没有时间升级我所有的测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:33:03.263

附加到选项卡与附加到窗口相同。

您可以`attach`到新选项卡：

```
ie2 = Watir::IE.attach(:title, 'new_windows_title')
ie2.close   #close the new tab 
```

或者可以使用`window`or`windows`方法（注意这在 watir-classic 和 watir-webdriver 中都可以使用）：

```
#Close the last opened tab
ie.windows.last.use do
  ie.close
end

#Close a specific tab
ie.window(:title => 'new_windows_title').use do
  ie.close
end 
```

# wpf - PresentationFramework.dll 中出现“System.InvalidOperationException”类型的第一次机会异常

> ID：15414574
> 
> 赞同：2
> 
> 时间：2013-03-14T16:14:44.090
> 
> 标签：wpf, entity-framework, exception, invalidoperationexception

全部，

我正在使用数据库优先实体框架 v4.4。在数据库（和数据模型）中是 Table1，它与 Table2 具有 1:many 关系。

我将 WPF 中的 DataGrid 绑定到 Table1.Local.First().Table2 （为简单起见，假设 Table1.Local 中有一个实体开始）。

视图模型：

```
Public SomeEntityDBContextWithTable1AndTable2 Container { get; set; }
Public ICollection Table2ToDisplay { get { return Container.Table1.Local.First().Table2; } } //Note: :Many navigation properties return ICollection<T>, but the object type is of ObservableCollection<T>. 
```

在 XAML 中，我有以下内容

```
<GroupBox Header=Table2 DataContext="{Binding Path=Table2ToDisplay, UpdateSourceTrigger=PropertyChanged}">
    <DataGrid ItemsSource="{Binding}" AutoGenerateColumns="False" CanUserAddRows="True">
        <DataGrid.Columns>
            <!--A bunch of columns-->
        </DataGrid.Columns>
    </DataGrid>
</GroupBox> 
```

在恰好是文本框的 NewItemPlaceHolder 内单击时，我得到了 PresentationFramework.dll 中发生的 System.InvalidOperationException。这不会使我的应用程序崩溃，但我会在输出中看到它。我的猜测是实体是在另一个线程上添加的，因此 CollectionChanged 事件会在另一个线程上触发，这会导致 InvalidOperationException。但是，由于代码主要是通过 XML 完成的，我似乎找不到处理这个异常的方法（或者它已经被处理了，只是它正在被报告给输出）。是否有一种安全的方法可以将 CanUserAddRows="True" 与 EntityFramework 一起使用，其中“:Many”导航属性的类型为 ObservableCollection？

我应该指出，我还尝试将 Table2ToDisplay 属性包装在 CollectionViewSource 中，但我仍然在输出中看到 InvalidOperationException。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:47:36.380

我将大胆猜测，因为并非所有细节都存在（更新代码、堆栈跟踪等），您正在更改非 ui 线程中的绑定集合。

在这种情况下，您需要：

（在更新逻辑中）

```
Application.Current.Dispatcher.Invoke((Action)(() =>
    {
       // update collection here
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:48:08.710

好的。更改 Visual Studio 的调试器以停止所有异常导致我进入一些现场。例外是“在 AddNew... 期间不允许使用 NewItemPlaceHolder”，这是由于我的实体上的 PropertyChanged 事件而发生的。原来这个异常已经被处理了，所以我觉得我很好。

# python - 如何将一个 DataFrame 分成两个小的 DataFrame

> ID：15414579
> 
> 赞同：2
> 
> 时间：2013-03-14T16:14:59.757
> 
> 标签：python, pandas

我有一个大`DataFrame`的如下：

```
 count   mean  median    min    max   std
datet                                               
2001-05-16     17    NaN     NaN    NaN    NaN   NaN
2001-05-17     24   8.28    8.27   8.15   8.46  0.09
2001-05-18     24   8.41    8.31   8.18   8.85  0.19
2001-05-19     24  10.44   10.64   9.03  10.98  0.60
2001-05-20     24  10.53   10.56   9.98  10.92  0.28
2001-05-21     24  10.28   10.31   9.90  10.66  0.23
2001-05-22     24  10.40   10.42  10.17  10.67  0.17
2001-05-23     24  10.04   10.03   9.87  10.17  0.08
2001-05-24     24   9.63    9.66   9.41   9.88  0.15
2001-05-25     24   9.21    9.22   9.01   9.41  0.11 
```

如何`DataFrame`根据日期'2001-05-20'之前或之后将其分成两个小部分？如下所示：

```
df1:
         count   mean  median    min    max   std
datet                                               
2001-05-16     17    NaN     NaN    NaN    NaN   NaN
2001-05-17     24   8.28    8.27   8.15   8.46  0.09
2001-05-18     24   8.41    8.31   8.18   8.85  0.19
2001-05-19     24  10.44   10.64   9.03  10.98  0.60
2001-05-20     24  10.53   10.56   9.98  10.92  0.28

df2:
     count   mean  median    min    max   std
datet                                               
2001-05-21     24  10.28   10.31   9.90  10.66  0.23
2001-05-22     24  10.40   10.42  10.17  10.67  0.17
2001-05-23     24  10.04   10.03   9.87  10.17  0.08
2001-05-24     24   9.63    9.66   9.41   9.88  0.15
2001-05-25     24   9.21    9.22   9.01   9.41  0.11 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:38:37.383

对于单个拆分前/拆分后，我认为按布尔标准分组是最直接的方法。

```
In [1]: df = DataFrame(np.random.randn(10),
                       index=pd.date_range('2001-05-16', '2001-05-25'))

In [2]: grouper = df.groupby(df.index < pd.Timestamp('2001-05-21'))

In [3]: before, after = grouper.get_group(True), grouper.get_group(False)

In [4]: before
Out[4]: 
               0
2001-05-16  2.560516
2001-05-17 -2.207314
2001-05-18  0.646882
2001-05-19  0.660611
2001-05-20  0.437303 
```

并且`after`出来也是正确的。有人可以改进我的`In [3]`吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T17:01:10.393

0.11-dev（.ix 将等效地工作）

```
In [16]: df.loc[:'20010520']
Out[16]: 
                   0
2001-05-16  0.105445
2001-05-17  1.660771
2001-05-18  0.485668
2001-05-19 -0.102616
2001-05-20 -0.228228

In [17]: df.loc['20010521':]
Out[17]: 
                   0
2001-05-21 -0.024324
2001-05-22 -1.004362
2001-05-23  2.342225
2001-05-24  1.124695
2001-05-25 -0.291302 
```

或（ix 也可以在这里工作，这更明确）

```
 In [27]: i = df.index.get_loc('20010520')

In [28]: df.iloc[:i+1]
Out[28]: 
                   0
2001-05-16  0.105445
2001-05-17  1.660771
2001-05-18  0.485668
2001-05-19 -0.102616
2001-05-20 -0.228228

In [29]: df.iloc[i+1:]
Out[29]: 
                   0
2001-05-21 -0.024324
2001-05-22 -1.004362
2001-05-23  2.342225
2001-05-24  1.124695
2001-05-25 -0.291302 
```

# php - 使用 JQuery 可排序的新值更新 MySQL

> ID：15414582
> 
> 赞同：0
> 
> 时间：2013-03-14T16:15:10.730
> 
> 标签：php, jquery, html, mysql, jquery-ui-sortable

**问题：**如何使用 JQuery 可排序列表中的新值更新我的 MySQL 数据库？

**这是我到目前为止的代码：**

```
<?php

echo '
<form action="" method="post"> 
<ul id="sortable">';

$array = str_split("ABCDEFGHI", 3);

for($i = 0; $i < count($array); $i++) {
  echo '
    <li class="ui-state-default">
    <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>' . $array[$i] . '<input type="hidden" name="pos[]" value="'.$array[$i].'">
    </li>';
}

echo '
</ul><br>

<input type="submit" name="submit" value="Show order">
</form>

</body>
</html>';

if(isset($_POST['submit'])) {
    foreach($_POST['pos'] as $value){
        echo $value;
    }

}

?> 
```

**信息：**

`$value`保存我想用来更新 MySQL 数据库的 JQuery 可排序列表中的新值。但不能在foreach之外使用。那么我该怎么做呢？我知道我可以像这样创建一个包含 SQL 查询（在 foreach 中）的变量：

```
$query ="UPDATE test SET order='" . $value . "' WHERE id='" . $random_function . "'"; 
```

但是如何使用该变量`$query`来执行实际的 SQL 查询呢？

**`$_POST['pos']`数组结构：**

```
Array ( [0] => ABC [1] => DEF [2] => GHI ) Array ( [0] => ABC [1] => DEF [2] => GHI ) Array ( [0] => ABC [1] => DEF [2] => GHI ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:31:51.823

我这样做是这样的：

在 JavaScript 中

```
var ids = [];
rows.each(function (index, value)
{
    ids.push($(value).attr("data-item-id"));
});
$.post('/url/to/save/order/, {orderMap:JSON.stringify(ids)}, function() {}, 'json'); 
```

在 PHP 中：

```
$orderMap = json_decode(stripslashes($this->getPost("orderMap")));
$statements = array();
foreach ($orderMap as $itemId => $position) {
    $statements[] = sprintf("UPDATE `{$tableName}` SET `{$fieldName}`=%d WHERE `{$fieldIdName}`=%d", $position, $itemId);
}
$this->db->executeMultiQuery(implode(";", $statements)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:55:55.527

试试这个 。

```
$str = '';
if(isset($_POST['submit'])) {
  foreach($_POST['pos'] as $value){
    $str = $str.$value;
  }
 }

$query ="UPDATE test SET order='" . $str . "' WHERE id='" . $random_function . "'";
mysql_query($query); 
```

# javascript - 当javascript包含标签库时如何将javascript放入脚本页面

> ID：15414584
> 
> 赞同：0
> 
> 时间：2013-03-14T16:15:16.237
> 
> 标签：javascript, jquery, jsp, jsp-tags

我面临一个限制，因此我必须将所有 jquery 脚本放在我的 jsp 页面中。

我有很多这样的代码

```
$.get("<c:url value="/deletepage" />", {id: id} ) 
```

我希望将所有这些代码放入单独的 js 文件中，但由于脚本包含标签库，我无法做到。有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:17:36.993

Sure you can just save the JavaScript files as JSP and set the header to output JavaScript to the browser.

I imagine something like this would do the trick:

```
<%@ page language="java" contentType="text/javascript; charset=UTF-8" pageEncoding="UTF-8"%> 
```

# eclipse - 如何使用 Apache Tomcat 服务器运行 Eclipse 动态 Web 应用程序？

> ID：15414586
> 
> 赞同：3
> 
> 时间：2013-03-14T16:15:23.183
> 
> 标签：eclipse, tomcat, servlets, deployment, localhost

我尝试在 Eclipse 上运行 Apache Tomcat Server 并遇到以下问题：

1.  Catalina_Base 正在使用临时位置！
2.  我无法部署依赖项“jar 文件”！
3.  运行我的 Web 项目时出现以下异常：

```
SEVERE: Servlet.service() for servlet [jsp] in context with path [] threw exception [java.lang.AbstractMethodError: javax.servlet.jsp.JspFactory.getJspApplicationContext(Ljavax/servlet/ServletContext;)Ljavax/servlet/jsp/JspApplicationContext;] with root cause java.lang.AbstractMethodError: javax.servlet.jsp.JspFactory.getJspApplicationContext(Ljavax/servlet/ServletContext;)Ljavax/servlet/jsp/JspApplicationContext; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T19:20:30.497

通过执行以下步骤，我设法解决了上述 3 个问题：

1- 双击您的服务器（在这种情况下为 tomcat）[如果您看不到它，请转到`Windows -> Show/View -> Other -> Server -> Servers`]。您的服务器名称将类似于：“Tomcat v7.0 Server at localhost”。

双击服务器并确保服务器位置设置为：“使用 Tomcat 安装（控制 Tomcat 安装）”。如果您无法编辑服务器位置：停止服务器，`right-click the server and select Publish`. 如果您仍然无法编辑它：

> 右键单击服务器 --> 添加和删除并删除您的项目，然后再次发布。

选择“使用 Tomcat 安装”的原因是 Catalina_Base 将指向一个临时位置，看起来像：

```
"-Dcatalina.base="C:\workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp1" 
```

即使尝试打开 Apache Tomcat 起始页，这也会导致 404 错误。选择“使用 Tomcat 安装”时，Catalina_Home 和 Catalina_Base 值将相同，并且都将指向 Tomcat 安装目录：示例：

```
-Dcatalina.base="C:\apache-tomcat-7.0.37" -Dcatalina.home="C:\apache-tomcat-7.0.37" 
```

要查看参数：

> 双击服务器，然后单击“打开启动配置”，值将出现在“参数”选项卡中。

2- 使用依赖项（例如外部 Jar 文件）时，确保文件位于：Web-Inf/lib 中，然后通过执行以下操作将它们添加到类路径：

> 右击项目 --> Build-path --> Configure Build Path 选择“Libraries”选项卡 点击 Add External JARs 并选择 Web-Inf/lib 中的 jar 文件

接下来，您需要部署依赖项： 为此：

> 右键单击项目 -> 属性 从左侧选择“部署程序集” 在右侧单击添加 -> Java 构建路径条目 -> 下一步 添加项目所需的所有 jar 文件。

否则，您将获得已使用的 jar 文件的类未找到异常。

3- 确保 Web-Inf/lib 不包含来自 Apache Tomcat 的任何 jar 文件，因为这会导致冗余并给出上述异常！

# maven - CKFinder 不在 Maven 仓库中

> ID：15414595
> 
> 赞同：0
> 
> 时间：2013-03-14T16:16:10.677
> 
> 标签：maven, ckfinder

全部！

我已经下载了捆绑到演示 WAR 文件中的 CKFinder 插件来使用它。但我无法构建此示例，因为在任何 Maven 存储库中都找不到下面列出的 Maven 工件。有任何想法吗？

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.ckfinder</groupId>
    <artifactId>CKFinderJava</artifactId>
    <name>CKFinder for Java - Web Application</name>
    <version>2.3.1</version>
    <packaging>war</packaging>
    <url>http://ckfinder.com/</url>
    <organization>
        <name>CKSource - Frederico Knabben</name>
        <url>http://cksource.com</url>
    </organization>
    ...
        <dependency>
            <groupId>${project.groupId}</groupId>
            <artifactId>CKFinder</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>${project.groupId}</groupId>
            <artifactId>CKFinderPlugin-FileEditor</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>${project.groupId}</groupId>
            <artifactId>CKFinderPlugin-ImageResize</artifactId>
            <version>${project.version}</version>
        </dependency> 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:20:13.787

Commercial software can rarely found in open source repositories :-)

Use [mvn install:install-file](http://maven.apache.org/plugins/maven-install-plugin/usage.html) or [mvn deploy:deploy-file](http://maven.apache.org/plugins/maven-deploy-plugin/usage.html) to install the JARs and POMs locally.

# php - wordpress 中的外部 php 文件/链接

> ID：15414596
> 
> 赞同：0
> 
> 时间：2013-03-14T16:16:13.710
> 
> 标签：php, html, wordpress, external

我想显示这个

[http://www.bwbsv.de/bbsb/service/extern/standings.php?start=http://www.bwbsv.de/bbsb/service/extern/start.htm&end=http://www.bwbsv。 de/bbsb/service/extern/end.htm&t=401](http://www.bwbsv.de/bbsb/service/extern/standings.php?start=http://www.bwbsv.de/bbsb/service/extern/start.htm&end=http://www.bwbsv.de/bbsb/service/extern/end.htm&t=401)

（这只是一个例子）
在我的 wordpress 网站的一个页面上。start.htm 包含

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="de" xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Demonstration Tabellen-Integration</title>
<link rel="stylesheet" type="text/css" 
href="http://www.bwbsv.de/bbsb/service/extern/demo.css" />
</head>
<body> 
```

而 end.htm 看起来像

```
</body>
</html> 
```

“t=401”指定要显示的联赛。

将其实现到页面中的最佳方法是什么？

编辑：我忘记了一些东西。start.htm 和 end.htm 的 url 存储在本地，而standings.php 不是。这样做的重点是拥有一个最新的排行榜，而不是手动进行。

编辑2：进一步澄清：第一个链接只是它应该是什么样子的一个例子。可以根据用户需求进行定制，例如 t=401 表示 id=401 的联赛。自定义后它应该看起来像这样

[http://www.bwbsv.de/bbsb/service/extern/standings.php?start=http:/yourServer.com/start.htm&end=http://http:/yourServer.com/end.htm&t=123](http://www.bwbsv.de/bbsb/service/extern/standings.php?start=http:/yourServer.com/start.htm&end=http://http:/yourServer.com/end.htm&t=123)

此链接提供了最新的联赛 id 为 123 的联赛表。更新不是由我完成的，它们是从 bwbsv 页面提供的。我想将此表集成到我的 wordpress 网站上的普通页面/小部件/侧边栏/...中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:22:31.717

正如我在第一篇文章中提到的，由于[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)，您无法加载外部内容，抱歉。

使用`jQuery` [负载（）](http://api.jquery.com/load/)

给表一个`id`，`league-table`然后：

```
$('#league-table').load('path/to/your_file'); 
```

这是一个工作示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="de" xmlns="http://www.w3.org/1999/xhtml">
<head>
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<title>Demonstration Tabellen-Integration</title>
<link rel="stylesheet" type="text/css" 
href="http://www.bwbsv.de/bbsb/service/extern/demo.css" />
</head>
<body>
<script type="text/javascript">
console.log("here");
$(document).ready(function(){
console.log("here");
  $('#league').load('path_to_your_file.html');
  alert("finished loading");
  });

</script>

  <div id="league">

  </div>

</body>
</html> 
```

**文件.html**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="de" xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Demonstration Tabellen-Integration</title>
<link rel="stylesheet" type="text/css" 
href="http://www.bwbsv.de/bbsb/service/extern/demo.css" />
</head>
<body>

<table id="league" class="standings">
    <tbody><tr>
        <th class="hpl">Pl.</th>
        <th class="hteam">Team</th>
        <th class="hg">G</th>
        <th class="hv">V</th>
        <th class="hpct">.pct</th>
        <th class="hgb">GB</th>
    </tr>
        <tr>
            <td class="pl">1.</td>
            <td class="team">
              Kehl Mosquitos              
            </td>
            <td class="g">0</td>
            <td class="v">0</td>
            <td class="pct">.000</td>
            <td class="gb">0</td>
        </tr>
        <tr>
            <td class="pl">2.</td>
            <td class="team">
              Ulm Falcons             
            </td>
            <td class="g">0</td>
            <td class="v">0</td>
            <td class="pct">.000</td>
            <td class="gb">0</td>
        </tr>
        <tr>
            <td class="pl">3.</td>
            <td class="team">
              Sindelfingen Squirrels              
            </td>
            <td class="g">0</td>
            <td class="v">0</td>
            <td class="pct">.000</td>
            <td class="gb">0</td>
        </tr>
        <tr>
            <td class="pl">4.</td>
            <td class="team">
              Heidelberg Hedgehogs            
            </td>
            <td class="g">0</td>
            <td class="v">0</td>
            <td class="pct">.000</td>
            <td class="gb">0</td>
        </tr>
        <tr>
            <td class="pl">5.</td>
            <td class="team">
              Schriesheim Raubritter              
            </td>
            <td class="g">0</td>
            <td class="v">0</td>
            <td class="pct">.000</td>
            <td class="gb">0</td>
        </tr>
        <tr>
            <td class="pl">6.</td>
            <td class="team">
              Göppingen Green Sox             
            </td>
            <td class="g">0</td>
            <td class="v">0</td>
            <td class="pct">.000</td>
            <td class="gb">0</td>
        </tr>
        <tr>
            <td class="pl">7.</td>
            <td class="team">
              Freiburg Knights            
            </td>
            <td class="g">0</td>
            <td class="v">0</td>
            <td class="pct">.000</td>
            <td class="gb">0</td>
        </tr>
        <tr>
            <td class="pl">8.</td>
            <td class="team">
              Tübingen Hawks 2            
            </td>
            <td class="g">0</td>
            <td class="v">0</td>
            <td class="pct">.000</td>
            <td class="gb">0</td>
        </tr>
        <tr>
            <td class="pl">9.</td>
            <td class="team">
              Neuenburg Atomics 2             
            </td>
            <td class="g">0</td>
            <td class="v">0</td>
            <td class="pct">.000</td>
            <td class="gb">0</td>
        </tr>
</tbody></table>

</body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T08:12:43.023

尝试添加 iframe：

```
<iframe border="0" width="600px" height="auto" src="http://www.bwbsv.de/bbsb/service/extern/standings.php?start=http://www.bwbsv.de/bbsb/service/extern/start.htm&end=http://www.bwbsv.de/bbsb/service/extern/end.htm&t=401"></iframe> 
```

您可以更改其尺寸以最适合页面。

# javascript - 如何通过 Ajax 向我的 Ruby 控制器提交表单数据？

> ID：15414597
> 
> 赞同：0
> 
> 时间：2013-03-14T16:16:16.753
> 
> 标签：javascript, ruby-on-rails, ruby, ajax, controller

我的视图中有一个 semantic_form_for，它设置了一个搜索过滤器，并通过一个按钮添加了更多过滤器，该按钮通过 JavaScript 添加了更多过滤器。

```
 <%= semantic_form_for current_coach, :remote => true, :html => { :class => "custom-form rb-form", :id => "filter", :'data-url' => "#{roster_builder_coach_index_path}" } do |f| %>
  <div class="filter_parent_container">
    <% @search.conditions.each do |condition| %>
        <%= render "filter", :condition => condition %>
    <% end %>
  </div>

  <div class="bottom-info">
    <div class="count">
      <p class="num"><%= @athletes.count %></p>
      <p>identified with this filter set</p>
    </div>
    <input type="submit" class="send-request" id="search-button" value="" />
    <input type="button" class="add_filter" value="Add Another Filter" />
  </div>
  <div class="cl">&nbsp;</div>
<% end %> 
```

我需要通过 ajax 提交表单，但事实并非如此。我正在检查控制器中的参数，它们是：

```
{"action"=>"roster_builder", "controller"=>"coach"} 
```

这是控制器（记录器正在检查参数）：

```
def roster_builder
authorize! :access_roster_builder, current_coach

logger.info("**************");
logger.info("**************");
logger.info("**************");
logger.info("**************");
logger.info("**************");
logger.info(params);
@search = Search.new(sport: current_coach.primary_sport, conditions: params[:search])
@athletes = @search.query.page(params[:page]).per_page(8)

render "athletes" if request.format.js?
end 
```

这是 Ajax 调用：

```
$("#filter").submit(function(){
  $.ajax({
    url: $("#filter").attr("data-url"),
    type: 'POST',
    success: function(data) {
      $(".results")[0].parentNode.removeChild($(".results")[0]);
    }
  });
}); 
```

在我使用 :remote => true 之前，它可以工作，但我需要过滤器（包括通过 JS 添加的过滤器）的持久性，所以我需要 Ajax 来执行搜索而不是刷新页面。既然 Ajax 正在发送表单数据，为什么 params 不能正常工作？我什至尝试通过 Ajax 将数据作为序列化发送，但无济于事，如下所示：

```
$.ajax({
  url: $("#filter").attr("data-url"),
  type: 'POST',
  data: $("form#filter").serialize(),
  success: function(data) {
    $(".results")[0].parentNode.removeChild($(".results")[0]);
  }
}); 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:24:04.473

*   不要`remote: true`在表单的提交事件中同时使用 AND ajax 调用。

*   如果您自己调用ajax，那么您肯定需要传递参数`data: $("form").serialize()`

*   您必须返回 false，或者在提交事件中执行 e.preventDefault()，因为您实际上并不希望提交表单，因为您自己使用 ajax 调用发送数据。

*   这个处理 ajax 表单的插件很棒： http: [//www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)

# c# - 从日期时间获取小时和分钟

> ID：15414599
> 
> 赞同：0
> 
> 时间：2013-03-14T16:16:23.330
> 
> 标签：c#, datetime

退出时间：2013-03-08 15:00:00.000

时间：2013-03-08 11:21:03.290

**当(Out Time - In Time)**时，我需要从上面分别获取同一日期的**小时**和**分钟**。

 **我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T16:18:12.563

我想你可能只是想要：

```
TimeSpan difference = outTime - inTime;
int hours = (int) difference.TotalHours;
int minutes = difference.Minutes; 
```

请注意，这`Minutes`将为您提供“仅分钟（从不超过 59）”，而`TotalHours`（截断为零）将为您提供“总小时数”，如果时间间隔超过一天，则可能超过 23 小时。

如果值为负数，您还应该考虑您想要做什么 - 要么考虑它，要么通过验证它来明确排除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:18:04.090

类上的`Subtract`方法`DateTime`将允许您从另一个日期中减去该日期。

它会给你一个`TimeSpan`不同的地方。

我会把它留给你来计算实际的代码。

[http://msdn.microsoft.com/en-GB/library/8ysw4sby.aspx](http://msdn.microsoft.com/en-GB/library/8ysw4sby.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:18:38.220

您可以使用 Hours 属性和 Minutes

链接：http: [//msdn.microsoft.com/en-us/library/system.datetime.hour.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.hour.aspx)**

# php - PHP睡眠延迟

> ID：15414605
> 
> 赞同：33
> 
> 时间：2013-03-14T16:16:37.390
> 
> 标签：php, for-loop, delayed-execution, timedelay

在 PHP 中，我想在循环的每次迭代中放置一些秒延迟。

```
for ($i=0; $i <= 10; $i++) {
    $file_exists=file_exists($location.$filename);
    if($file_exists) {
        break;
    }

    //sleep for 3 seconds
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-14T16:18:26.617

使用`PHP sleep()`功能。[http://php.net/manual/en/function.sleep.php](http://php.net/manual/en/function.sleep.php) 这会在给定的秒数内停止执行下一个循环。所以像这样

```
for ($i=0; $i <= 10; $i++) {
    $file_exists=file_exists($location.$filename);
    if($file_exists) {
        break;
    }
    sleep(3); // this should halt for 3 seconds for every loop
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-14T16:39:58.220

我明白你在做什么......你延迟脚本以不断检查文件系统上的文件（我假设正在上传或由另一个脚本编写的文件）。这是一种不好的方法。

1.  您的脚本将运行缓慢。如果有多个用户正在运行该脚本，则会阻塞服务器。
2.  对于某些用户，您的服务器可能会超时。
3.  HDD 访问是一种昂贵的资源。
4.  有更好的方法来做到这一点。

你可以使用 Ajax。并使用超时每隔几秒钟调用一次您的 PHP 脚本。这将避免缓慢的脚本加载。你也可以不断地这样做（当前的 for 循环只会运行 33 秒然后停止）。

您可以使用数据库。在某些情况下，数据库访问比 HDD 访问更快。尤其是视图和缓存。创建文件/上传文件的脚本可以在表中设置一个标志（即file_exists），然后您可以有一个脚本来检查数据库中的该字段。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-14T16:20:22.767

您可以使用`sleep(3)`which 使线程休眠 3 秒。

**修正**php 中的sleep 方法[是以秒为单位的](http://php.net/manual/en/function.sleep.php)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-31T15:59:42.100

野兔有两种方法可以让 php 脚本休眠一段时间。当您有代码并想暂停脚本工作一段时间时，请使用这些功能。在这些示例**中，第一部分代码**将在脚本运行时完成，**第二部分代码**将在时间延迟下完成。

1.  使用[sleep()](http://php.net/manual/en/function.sleep.php)函数，您可以以秒为单位定义睡眠时间。

例子：

```
echo "Message 1";
// The first part of code.
$timeInSeconds = 3;
sleep($timeInSeconds);
// The second part of code.
echo "Message 2"; 
```

这样就可以让 php 脚本休眠 3 秒。使用此功能，您可以将脚本休眠整数（整数）秒。

2.  使用[usleep()](http://php.net/manual/en/function.usleep.php)函数，您可以以微秒为单位定义睡眠时间。对于需要比一秒更精确的时间的间隔，此睡眠时间很方便。

例子：

```
echo "Message 1";
// The first part of code.
$timeInMicroSeconds = 2487147;
usleep($timeInMicroSeconds);
// The second part of code.
echo "Message 2"; 
```

如果您想让 php 的时间值小于秒（浮点数），则可以使用此功能。在这个例子中，我让脚本休眠了 2.487147 秒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-31T02:03:35.937

您是否考虑过使用[supervisorD](http://supervisord.org/)使用 PHP 守护程序脚本。我在需要一直运行的多个任务中使用它。

关键是确保每次运行脚本时检查内存资源。如果它太高，请停止该过程，然后让它重新启动。

我已成功使用此过程来始终检查数据库记录以查找要处理的任务。

这可能有点矫枉过正，但值得考虑。

# java - 使用 MQClient java 和 MQExplorer 错误 JMSWMQ2013 将 JMS 连接到 MQ

> ID：15414606
> 
> 赞同：1
> 
> 时间：2013-03-14T16:16:39.797
> 
> 标签：java, jms, jndi, ibm-mq, mq

我正在使用 MQexplorer 来处理队列管理器，当我使用 JMS 和 JNDI 查找连接到 MQ 时，使用`qcf.createQueueConnection();`时`JMSWMQ2013: The security authentication was not valid that was supplied for QueueManager`出现错误。所有帖子/博客都提到了这个错误，但他们说要删除队列管理器的 CHAUTH 等等......我如何使用 MQExplorer 解决这个问题？请帮我解决这个问题！

我正在使用可以连接远程机器（不是绑定）的 MQ 客户端（在 LDAP 上使用 JNDI）连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:50:41.853

实际上不建议禁用 CHLAUTH，因为这样做会使您的队列管理器向世界开放。如果这是一个测试队列管理器就可以了。使用 runmqsc 您可以禁用通道身份验证。在 runmqsc 发出“ALTER QMGR CHLAUTH(DISABLED)”命令以禁用通道身份验证。

请阅读 WMQ 信息中心或这本[红皮书](http://www.redbooks.ibm.com/redbooks/pdfs/sg248087.pdf)的第 20 章，或者只是在 CHLAUTH 的这个论坛中搜索 T.Rob 的帖子。[这里](https://stackoverflow.com/questions/12889953/unable-to-connect-to-queue-manager-in-websphere-mq-7-1/12914860#12914860)[的](https://stackoverflow.com/questions/8886627/websphere-mq-7-1-help-need-access-or-security/8886813#8886813)链接很少，这个

# sql - 零关系的 SQL 计数记录

> ID：15414610
> 
> 赞同：0
> 
> 时间：2013-03-14T16:16:52.977
> 
> 标签：sql

我正在尝试查找名为“Jack”的玩家的 ID 以及他们玩过的游戏数量：

```
Select p.id, count(*) as numOfGamePlayed
from player p, game g
where p.name = 'Jack' and p.id = g.id
group by p.id; 
```

问题是，这只会列出至少玩过一场游戏的名为 Jack 的玩家。我怎样才能列出那些没有玩过任何游戏的人？

编辑：对于那些玩家，numOfGamePlayed 必须为 0。如果我这样做

```
Select p.id, count(*) as numOfGamePlayed
from player p LEFT JOIN game g ON p.id = g.id
where p.name = 'Jack'
group by p.id; 
```

没有玩过任何游戏的人仍然会显示 numOfGamePlayed 为 1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:19:30.573

停止对初学者使用隐式连接。这无论如何都是一个坏习惯。然后你可以这样做：

```
Select p.id, count(g.id) as numOfGamePlayed
from player p
LEFT JOIN game g
 ON p.id = g.id
where p.name = 'Jack'
group by p.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:18:55.903

您需要玩家和游戏之间的外部连接

```
SELECT p.ID, 
  COUNT(*) AS numOfGamePlayed
FROM player p
LEFT OUTER JOIN game g
ON p.id = g.id
WHERE p.name = 'Jack'
GROUP BY p.ID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:19:11.060

```
SELECT p.id, count(*) as numOfGamePlayed
FROM player p
LEFT JOIN game g ON g.id = p.id
WHERE p.name = 'Jack'
--AND g.id IS NULL
GROUP BY p.id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T16:53:17.753

你必须做 count(game.PlayerId) 而不是 count(*)

[在此处查看 SQL Fiddle 演示](http://www.sqlfiddle.com/#!6/8013d/11/0)

```
select p.PNAME, g.gameplayed
from player p 
left outer join game g
ON p.pid = g.pid;

Select p.pid, count(g.pid) as numOfGamePlayed
from player p 
LEFT JOIN game g 
ON p.pid = g.pid
where p.pname = 'Jack'
group by p.pid; 
```

# python - 一个多余但很酷的动态python结构和关于装饰器、理解、语法的问题

> ID：15414611
> 
> 赞同：2
> 
> 时间：2013-03-14T16:16:55.717
> 
> 标签：python, operator-overloading, decorator, list-comprehension

这只是一个有趣的问题，关于你可以用 python 语法做的一些事情。

当我从 matlab 迁移到 python 时，我创建了一个与 matlab 的结构类似的类

```
class DynStruct(AbstractPrintable):
    ' dynamical add and remove members '
    def __init__(self, child_exclude_list=[]):
        super(DynStruct, self).__init__(child_exclude_list) 
```

它只是一个对象，您可以在其中动态添加成员而无需使用字典（因为我讨厌输入引号）

我还制作了一个很酷的帮助类，它可以很好地打印出该类的成员，这样您就可以在使用 IPython 时看到自己在做什么。（我忽略了我的进口，但它只是一些标准的东西以及一些 numpy）

```
class AbstractPrintable(object):
    'A base class that prints its attributes instead of the memory address'
    def __init__(self, child_print_exclude=[]):
        self._printable_exclude = ['_printable_exclude'] + child_print_exclude
    def __str__(self):
        head = printableType(self)
        body = self.printable_attributes()
        body = re.sub('\n *\n *\n','\n\n',body)
        return head+('\n'+body).replace('\n','\n    ')

    def printable_attributes(self, type_bit=True):
        body = ''
        attri_list = []

        for key in self.__dict__.iterkeys():
            if key in self._printable_exclude: continue
            val = self.__dict__[key]
            namestr = str(key)
            valstr  = printableVal(val)
            typestr = printableType(val)
            max_valstr = 10000
            if len(valstr) > max_valstr:
                valstr = valstr[0:max_valstr/2]+valstr[-max_valstr/2:-1]
            attri_list.append( (typestr, namestr, valstr) )

        attri_list.sort()
        for (typestr, namestr, valstr) in attri_list:
            entrytail = '\n' if valstr.count('\n') <= 1 else '\n\n'
            typestr2 = typestr+' ' if type_bit else ''
            body += typestr2 + namestr + ' = ' + valstr + entrytail
        return body
#---------------
def printableType(val):
    if type(val) == numpy.ndarray:
        info = npArrInfo(val)
        _typestr = info.dtypestr
    elif isinstance(val, object):
        _typestr = val.__class__.__name__
    else:
        _typestr = str(type(val))
        _typestr = _typestr.replace('type','')
        _typestr = re.sub('[\'><]','',_typestr)
        _typestr = re.sub('  *',' ',_typestr)
        _typestr = _typestr.strip()
    return _typestr 
```

然后我遇到了一个需要从我的 DynStruct 中获取一堆元素的情况，所以我添加了一个函数，它返回一个我想要的元素的元组。

```
# I added this function to DynStruct
def getprops(self, *prop_list):
    return tuple([self.__dict__[prop_name] for prop_name in prop_list]) 
```

例如：

```
>> point = DynStruct()
>> point.x = 3
>> point.y = 1
>> point.z = 60
>> print point

DynStruct
    int x = 3
    int y = 1
    int z = 60

 >> # Now I want to get the points
 >> (x,y,z) = point.getprops('x','y','z') 
```

现在，这很好用，它使调试变得非常容易。但是我遇到了一个案例，我想一次设置一堆属性（有点像上面）。而且我意识到还有其他方法可以做到这一点，但我真的很想有一个 setprop ，语法如下：

```
point.setprops('x','y','z') = (14, 22, 30) 
```

我不确定，但我觉得可能有一种方法可以做到这一点，因为 @someobj.setter 装饰器。但我不知道如何重载等于运算符以这种方式使用它，或者它是否可能。

我想同时我会这样写 point.setprops('x','y','z', 14, 22, 30)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T01:09:38.630

马上，你*不需要*这个 - 因为你可以这样做：

```
point.x, point.y, point.z = (14, 22, 30)
# Tuple unpacking ... is there nothing it cannot do? 
```

但是，假设这还不够清楚，您确实需要能够一次设置多个字段。然后你可以使用[`__setitem__`](http://docs.python.org/2/reference/datamodel.html#object.__setitem__)：

```
def __setitem__(self, key, value):
    if isinstance(key, tuple):
        for k, v in zip(key, value):
            setattr(self, k, v)
    else:
        setattr(self, key, value) 
```

然后你可以这样做：

```
point['x', 'y', 'z'] = (14, 22, 30) 
```

然后你也可以用`getprops`方法替换你的[`__getitem__`](http://docs.python.org/2/reference/datamodel.html#object.__getitem__)方法，类似地实现并且能够做到：

```
x, y, z = point['x', 'y', 'z'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:44:27.647

> 它只是一个对象，您可以在其中动态添加成员而无需使用字典（因为我讨厌输入引号）

也许我在你的解释中遗漏了一些东西，但你不能这样做吗？例如

```
class Foo(Object):
    def __init__(self):
        pass

f = Foo()
f.x = 1
f.y = 2
f.z = 3

print f.x, f.y, f.z # outputs 1 2 3 
```

至于你问题的第二部分，关于获取这种语法，

`point.setprops('x','y','z') = (14, 22, 30)`

不幸的是，我不确定这是否可能。原因是

`point.setprops('x', 'y', 'z')`

是一个“呼叫”表达式。由于解析python的方式，我认为您不能在赋值语句的左侧有调用表达式。据我所知，您只能拥有变量名称或切片/索引表达式的列表。话虽这么说，我不是100％肯定。你可以做一些疯狂的 python ninja 东西来完成这项工作。

# php - Codeigniter 2.1 - fileupload 您没有选择要上传的文件

> ID：15414612
> 
> 赞同：0
> 
> 时间：2013-03-14T16:16:56.963
> 
> 标签：php, codeigniter, codeigniter-2

模型功能：

```
public function file_upload($folder, $allowed_type, $max_size = 0, $max_width = 0, $max_height = 0)
    {
        $folder = $this->path . $folder;

        $files = array();
        $count = 0;

        foreach ($_FILES as $key => $value) :

            $file_name = is_array($value['name']) ? $value['name'][$count] : $value['name'];
            $file_name = $this->global_functions->char_replace($file_name, '_');
                $count++;
                $config = array(
                'allowed_types' => $allowed_type,
                'upload_path'   => $folder,
                'file_name'     => $file_name,
                'max_size'      => $max_size,
                'max_width'     => $max_width,
                'max_height'    => $max_height,
                'remove_spaces' => TRUE
                 );

        $this->load->library('image_lib');
            $this->image_lib->clear();
            $this->load->library('upload');
            $this->upload->initialize($config);

            if (!$this->upload->do_upload($key)) :
                $error = array('error' => $this->upload->display_errors());
            var_dump($error);
                return FALSE;
            else :
                $file = $this->upload->data();
                $files[] = $file['file_name'];
            endif;

        endforeach;

        if(empty($files)):
            return FALSE;
        else:
            return implode(',', $files);
        endif;
    } 
```

此功能部分工作。文件正在上传到所选文件夹，但我收到此错误：**您没有选择要上传的文件。****结果**是FALSE ？似乎有什么问题？（表单正在使用**form_open_multipart**）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:31:47.033

请确保您的文件标签字段具有以下名称：

```
 $key='userfile' //which is name of input type field name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T00:38:59.540

发生这种情况时，您的任何文件输入是否为空？`$_FILES`如果没有为输入指定文件，将包含一个“空”数据数组。比如我的文件输入名称是`one`，我提交的时候没有指定文件：

```
Array
(
    [one] => Array
        (
            [name] => 
            [type] => 
            [tmp_name] => 
            [error] => 4
            [size] => 0
        )
) 
```

在处理上传之前，您应该检查文件数据是否为空。PHP[`is_uploaded_file()`](http://php.net/manual/en/function.is-uploaded-file.php)对此很有用。

# c - 如何在 GtkTable 上实现按钮按下事件

> ID：15414613
> 
> 赞同：2
> 
> 时间：2013-03-14T16:16:59.693
> 
> 标签：c, gtk

在网上搜索答案并不能解决我的问题：

如果我单击一个单元格，我不想让我的 GtkTable 引发事件。

由于没有单击事件，因此接受 GtkButton，我想实现**GDK_BUTTON_PRESS_MASK**和**GDK_BUTTON_RELEASE_MASK以在***单击*期间捕捉鼠标在表格上的位置。与 GtkDrawingArea 一起使用非常好！

尝试了下面的片段，但没有发生任何事情，也许有人可以给我一个线索:)

小样本：

```
static void table_press(GtkWidget *widget, GdkEventButton *event)
{
    printf("table pressed");
} 

int main(int argc, char **argv)
{
    GtkWidget *window;
    GtkWidget* table;

    gtk_init(&argc, &argv);
    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_window_set_title(GTK_WINDOW (window), "table click");

    table = gtk_table_new(2, 5, TRUE);

    gtk_container_add(GTK_CONTAINER (window), table);

    gtk_widget_add_events(table, GDK_BUTTON_PRESS_MASK);

    g_signal_connect(GTK_OBJECT (table), "button-press-event",
        G_CALLBACK (table_press), NULL);
    g_signal_connect_swapped(G_OBJECT(window), "destroy",
        G_CALLBACK(gtk_main_quit), G_OBJECT(window));

    gtk_widget_show_all(window);

    gtk_main();
    main_exit();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T23:11:01.240

您不会收到事件，因为`GtkTable`没有`GdkWindow`与之关联的事件。您可以使用`GtkEventBox`which 让您接受通常不接受事件的小部件上的事件。这是派生自`GtkBin`因此有趣的代码看起来像这样。

```
table = gtk_table_new(2, 5, TRUE);
event_box = gtk_event_box_new();
gtk_container_add(GTK_CONTAINER (window), event_box);
gtk_container_add(GTK_CONTAINER (event_box), table);
g_signal_connect(GTK_OBJECT (event_box), "button-press-event",
    G_CALLBACK (table_press), NULL); 
```

# jakarta-ee - Difference between RequestScoped/SessionScoped in javax.faces.bean and javax.enterprise.context

> ID：15414618
> 
> 赞同：2
> 
> 时间：2013-03-14T16:17:13.670
> 
> 标签：jakarta-ee, jsf-2

[Here](https://stackoverflow.com/questions/15411009/java-ee-session-bean-initialization) @partlov added comment that we can use `RequestScoped`/`SessionScoped` from two packages - `javax.faces.bean` and `javax.enterprise.context`. I'm new in JSF/Java EE and I don't know the dfference. I use a lot of `RequestScoped`/`SessionScoped` from `javax.faces.bean` package. I will be grateful if somebody will write the difference.

# excel - populate combobox in VBA with array elements

> ID：15414619
> 
> 赞同：5
> 
> 时间：2013-03-14T16:17:16.303
> 
> 标签：excel, excel-2007, vba

I have a VBA procedure (in Excel 2007) where I aspire to set the ListFillRange property of a combobox styled as a list using an array.

I know this works if I right click the combobox and write "Sheet1!$F2:$F17" next to the "ListFillRange" property. I can also do this in code. However, I am interested in dynamically setting the value of this property by assigning it an array.

I know for sure the array works as I tested it; there is probably a syntax error here:

```
ThisWorkbook.Worksheets("Sheet1").OLEObjects("cmbS").ListFillRange = ar 
```

when I do this I get: "Type mismatch" error.

The result of this action should be that the component is populated with the array elements, from element(0) ... to the last element (n-1) of the array. Any pointers, thank you very much!

I also tried:

```
ThisWorkbook.Worksheets("Sheet1").cmbS.list = ar 
```

and it says "permission denied"

Here are the combobox properties in case it helps: ![enter image description here](../Images/60cfb521097f61b4cfef55515d70881d.png)

After testing and trying, I found this works:

```
ThisWorkbook.Worksheets("Sheet1").cmbS.ListFillRange = ""

Dim i As Integer
For i = LBound(ar) To UBound(ar)
    ThisWorkbook.Worksheets("Sheet1").cmbS.AddItem (ar(i))

Next 
```

However, I am interested in populating with **all values at once** for faster effect, **not just adding element by element**.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-22T13:59:32.817

我知道它已经晚了，但也许它会帮助别人。至少以下代码对我来说有效（比元素的元素快得多）。

```
dim arr() as variant

arr = Worksheets("Total").Range("C2:"&lrow).Value
Worksheets("Menu").ComboBox2.List = arr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:04:32.373

使用数组内容填充组合框的唯一方法是逐个元素地进行。我很难相信无论您的阵列有多大，这将是一个非常缓慢的过程。

# git - 特定 git 分支更改时的 Jenkins 构建

> ID：15414620
> 
> 赞同：0
> 
> 时间：2013-03-14T16:17:17.697
> 
> 标签：git, jenkins, jenkins-plugins, post-update

我正在为詹金斯使用 git 插件。它工作得很好，除了它会在给定项目上的任何分支发生更改时重建我的目标。我需要它做的是仅在特定分支已更改时才重建。有没有办法做到这一点？现在我正在使用 git 钩子和插件的 notifyCommit 选项。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:46:58.993

在`Source Code Management`您可以将`Branches to build`字段设置为所需的分支。

# ios - Can i put multiple text boxes in an alert box in ios?

> ID：15414622
> 
> 赞同：0
> 
> 时间：2013-03-14T16:17:23.920
> 
> 标签：ios, alertview

can I put multiple text input boxes on the alert box in iOS?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:20:42.367

最好的解决方案是编写或使用具有您需要的文本字段的自定义警报视图。如果您只需要 1 个文本字段（或用户名/密码），您仍然可以通过设置[alertViewStyle 属性](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAlertView_Class/UIAlertView/UIAlertView.html)来使用 UIAlertView 。

已经编写了自定义警报视图，例如[这个](http://iphonedevelopment.blogspot.com/2010/05/custom-alert-views.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:29:21.257

是的，这是可能的。只需将 UITextField 作为子视图添加到 UIAlertView。为每个 UITextField 设置标签，以便稍后检索输入的文本。

```
 UIAlertView* alert=[[UIAlertView alloc] initWithTitle:@"Title" message:@"Message" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];

    UITextField *textField1 = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 50.0, 260.0, 25.0)];
    textField1.tag=0;
    textField1.borderStyle=UITextBorderStyleRoundedRect;
    textField1.delegate=self;

    [alert addSubview:textField1];

    UITextField *textField2 = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 85.0, 260.0, 25.0)]; 
    textField2.tag=1;
    textField2.delegate=self;
    textField2.borderStyle=UITextBorderStyleRoundedRect;

    [alert addSubview:textField2];

    [alert show]; 
```

请注意，这是一种不好的做法，因为它依赖于 UIAlertView 作为 UIView 的子类。正如下面的MusiGenesis 所指出的，它从iOS 7 开始就不能工作了。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-06T22:39:19.870

如果你想要 2 个文本框，你可以使用登录样式，但是将第二项 secureTextEntry 设置为 NO，参考 [http://forums.macrumors.com/threads/uialertviews-with-textfields.1355954/](http://forums.macrumors.com/threads/uialertviews-with-textfields.1355954/)

# symfony - how to get currency symbol in twig, symfony2?

> ID：15414624
> 
> 赞同：3
> 
> 时间：2013-03-14T16:17:25.243
> 
> 标签：symfony, twig, symfony-2.1

I am currently able to get currency symbol in symfony2 controller

```
$formatter = new \NumberFormatter($this->getRequest()->getLocale(),\NumberFormatter::CURRENCY);
$symbol = $formatter->getSymbol(\NumberFormatter::CURRENCY_SYMBOL); 
```

and then pass it to twig.

However, because I need to get this currency symbol in many twig templates, inserting that piece of code in the corresponding controllers is not a pleasant thing to do. So, is there any better/easier way to do this directly in twig?

Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T12:40:21.267

这是我创建自定义树枝功能的方法

```
namespace Acme\DemoBundle\Twig;

class AcmeExtension extends \Twig_Extension
{
    public function getFunctions() {
        return array(
            'currencySymbol' => new \Twig_Function_Method($this, 'currencySymbolFunction'),
        );
    }

    public function currencySymbolFunction($locale) {
        $locale = $locale == null ? \Locale::getDefault() : $locale;
        $formatter = new \NumberFormatter($locale, \NumberFormatter::CURRENCY);
        $symbol = $formatter->getSymbol(\NumberFormatter::CURRENCY_SYMBOL);

        return $symbol;
    }

    public function getName() {
        return 'acme_extension';
    }
} 
```

服务：

```
acme.twig.acme_extension:
    class: Acme\DemoBundle\Twig\AcmeExtension
    tags:
        - { name: twig.extension } 
```

因为我需要获取 symfony2 parameters.ini 中当前定义的语言环境并将其传递给 twig 函数，所以我定义了一个全局 twig 值：

```
twig:
    globals:
        locale: %locale% 
```

最后在树枝模板中：

```
{{ currencySymbol(locale) }} 
```

# regex - 将 URL 拆分为两部分（字符串）

> ID：15414627
> 
> 赞同：0
> 
> 时间：2013-03-14T16:17:31.423
> 
> 标签：regex, vb.net

我正在尝试找到一种将路径（原始 URL）轻松拆分为两部分的方法：例如：/search/criteria/newyork/list

我想填充一个包含第三个斜杠之前的所有内容的字符串，在这种情况下：“/search/criteria” 我还想将第二部分放入一个字符串：“newyork/list”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:22:00.807

试试这个：

```
Dim sAux() As String = sURL.Split("/"c)
Dim sResult As String = ""

If sAux.Length > 3 Then
    For i As Integer = 2 to sAux.Length - 1
        sResult &= sAux(i) & "/"
    Next
End If 
```

或这个：

```
Dim sAux As New List(Of String)(sURL.Split("/"c))
sAux.RemoveRange(0,2)    

sResult = String.Join("/", sAux.ToArray()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:28:05.157

您可以使用`IndexOf`查找第三个斜线（假设第一个字符始终是第一个斜线，并且字符串中至少有三个斜线）：

```
Dim index3 = url.IndexOf("/"c, url.IndexOf("/"c, 1) + 1) 
```

然后，您可以使用`Substring`该斜线之前和之后的部分：

```
Dim path As String = url.Substring(0, index3)
Dim resource As String = url.Substring(index3 + 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:33:18.633

```
 Dim ar As String()
        Dim str1 As String
        Dim str2 As String
        Dim a As Integer
        Dim splitPosition = 3
        Dim urlToSplit = "/search/criteria/newyork/list"
        ar = urlToSplit.Split("/"c)

        If UBound(ar) < splitPosition Then
            ' there are 3 or less slashes. do what you want here, error or just exit
        Else
            For a = 0 To splitPosition - 1
                If Not String.IsNullOrEmpty(ar(a)) Then str1 += ar(a) + "/"
            Next
            For a = splitPosition To UBound(ar)
                If Not String.IsNullOrEmpty(ar(a)) Then str2 += ar(a) + "/"
            Next
        End If 
```

`str1`将包含`/search/criteria/` `str2`将包含`newyork/list/`

此代码将处理任意数量的`/`组合，并且不应该为格式错误的 Url 出错

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T16:53:58.820

如果您的字符串始终采用相同的格式并且具有相同数量的元素（在拆分数组中），您可以使用`String.Format`方法 as；

```
Dim arr() As String =  "/search/criteria/newyork/list".Split("/"c)
Dim str1 As String = String.Format("/{1}/{2}", arr) '/search/criteria
Dim str2 As String = String.Format("{3}/{4}", arr) 'newyork/list 
```

# wpf - WPF DataGrid ClipboardBinding Multibinding possible?

> ID：15414631
> 
> 赞同：2
> 
> 时间：2013-03-14T16:17:37.240
> 
> 标签：wpf, multibinding

is there a solution to bind multiple properties to my ClipboardBinding. I tried the following code but this didnt work:

```
<DataGridTemplateColumn CanUserSort="True" SortMemberPath="Characteristic.Area.Name.ActualTranslation" MinWidth="120" >
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" Margin="5,0,5,0">
                <TextBlock Text="{Binding Characteristic.Area.Name.ActualTranslation}"></TextBlock>
                <TextBlock Text="  "></TextBlock>
                <TextBlock Text="{Binding AreaItem.Value}"></TextBlock>
            </StackPanel>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
    <DataGridTemplateColumn.HeaderTemplate>
        <DataTemplate>
            <TextBlock Text="{lex:Loc Area}"></TextBlock>
        </DataTemplate>
    </DataGridTemplateColumn.HeaderTemplate>
    <DataGridTemplateColumn.ClipboardContentBinding>
        <!-- TODO: ClipboardBinding Area -->
        <MultiBinding  StringFormat="{}{0} {1}">
            <Binding Path="Characteristic.Area.Name.ActualTranslation" />
            <Binding Path="AreaItem.Value" />
        </MultiBinding>
    </DataGridTemplateColumn.ClipboardContentBinding>
</DataGridTemplateColumn> 
```

i'd appreciate adivce for a workaround too. Please help

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:38:54.920

您应该使用转换器 ( [msdn](http://msdn.microsoft.com/en-US/library/system.windows.data.imultivalueconverter.aspx) )。

```
class StringFormatConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return string.Format(parameter.ToString(), values);
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

XAML：

```
<DataGridTemplateColumn.ClipboardContentBinding>      
    <MultiBinding  
        ConverterParameter=" {0} {1}"
        Converter="{StaticResource conString}">
        <Binding Path="Characteristic.Area.Name.ActualTranslation" />
        <Binding Path="AreaItem.Value" />
    </MultiBinding>
</DataGridTemplateColumn.ClipboardContentBinding> 
```

# ios - 无法识别的选择器发送到 UIImage？

> ID：15414635
> 
> 赞同：0
> 
> 时间：2013-03-14T16:17:57.550
> 
> 标签：ios, objective-c, rubymotion

希望你能帮助我。代码是 Rubymotion，但我很确定这是 iOS 问题。代码很简单，希望 Rubymotion 不会妨碍答案。而且我可以阅读 Obj-C，所以如果你只能用 Obj-C 回答，那我很好。

我有一个 UIImage 对象。我试图得到它的大小。当我执行以下操作时：

```
image = info.objectForKey(UIImagePickerControllerOriginalImage) 
@image = UIImage.alloc.initWithCIImage(image)
puts @image.to_s
puts @image.size
puts @image.to_s 
```

我得到这个输出：

```
#<UIImage:0x9513710>
NSInvalidArgumentException: -[UIImage extent]: unrecognized selector sent to instance 0x10fb7410 (RuntimeError)
#<UIImage:0x9513710> 
```

我已经读过，当您收到范围错误时，这往往意味着该对象已被释放并且不再在内存中，但如果我注释掉 .size 行，第 3 行仍然运行意味着它尚未被释放。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T16:56:07.107

您在某处使用 UIImage 实例而不是 CIImage 实例...... CIImage 上有一个名为“Extent”的函数（来自快速谷歌），而 UIImage 没有。也许您将图像传递给使用此“范围”函数的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:08:32.023

感谢 Dave 引导我回答这个问题。代码需要写成 `@image.CIImage.size`

这将起作用。

# c# - 无论类型如何（string[]、decimal[] 等）都可以查看数组

> ID：15414639
> 
> 赞同：0
> 
> 时间：2013-03-14T16:18:06.883
> 
> 标签：c#, arrays, view, types

我知道如何枚举一个数组，但是无论类型如何，我该怎么做？

代码：

```
ViewArray(saClosestVehicles); 
```

```
public static void ViewArray(object[] ar) {
    #region Examples (Quickly display an arrays contents)
    // object[] ar = new object[] { "blah", 4, "whatever" }; 
    // ViewArray(ar); 
    #endregion

    string strArrayContents="";
    for(int cnt=0; cnt<ar.Length; cnt++)
        strArrayContents+=ar[cnt]+" ";

    MessageBox.Show(strArrayContents, "Array Contents");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:18:53.283

考虑泛型声明：

```
public static void ViewArray<T>(T[] ar) {
    MessageBox.Show(String.Join(", ", ar.Select(x => x.ToString()).ToArray()), "Array Contents");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:20:42.280

```
object[] objArray = new object[]{"blah", 4, "whatever"};

foreach(var value in objArray)
{
    // do something with value
} 
```

this what you want?

# ant - 如何使用参数在 cumstom ant 任务中调用宏定义？

> ID：15414645
> 
> 赞同：4
> 
> 时间：2013-03-14T16:18:27.613
> 
> 标签：ant, task, macrodef

我想创建一个自定义的 ant 任务，它从文件中读取以获取列表参数，然后遍历列表以使用列表项作为参数来调用宏定义。如何使用参数在 cumstom ant 任务中调用宏定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T04:00:45.007

在您的自定义任务中，您可以调用

```
 org.apache.tools.ant.taskdefs.MacroInstance macro = (org.apache.tools.ant.taskdefs.MacroInstance) getProject().createTask("myMacroName"); 
        macro.setDynamicAttribute("name", value);
        macro.execute(); 
```

# javascript - 使用“下一个”和“上一个”按钮循环浏览不同的 DIV

> ID：15414662
> 
> 赞同：0
> 
> 时间：2013-03-14T16:18:55.713
> 
> 标签：javascript, jquery, html

我在网上找到了这段代码，这正是我所需要的，我需要它有完成按钮来提交表单，但我无法让它工作

```
Put some code here. 
```

[jsFiddle](http://jsfiddle.net/sushanth009/Ur7SW/36/)

你有什么想法可以给我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:58:12.357

这个脚本只是循环通过几个 div。
但是您可以使用“c”变量来设置隐藏表单输入的值。
把你的表格放在下面`<div class="innerContent">`

```
<form action='YourTargetPage.php' method='post'>
<input type='hidden' value='3' id='selectedDiv'>
<input type='submit' value='submit'>
</form> 
```

并将其添加到 loadContent() jQuery 脚本中：

```
$('#selectedDiv').val(c); 
```

然后，您将在 yourTargetPage.php 中拥有一个包含“c”值的 $_POST['selectedDiv']。

c 变量是从零开始的，因为它是数组的索引...所以 0=project 1, 1=Project 2 等。

隐藏输入的默认 (onload) 值应与脚本的默认值相同`var c = 3;`，以防用户选择第一个项目而不触发 loadContent() 函数。
;)

# jquery - Css 和 jquery 背景颜色变化

> ID：15414668
> 
> 赞同：0
> 
> 时间：2013-03-14T16:19:09.703
> 
> 标签：jquery, css

在这里，我有一些示例，并且 1.case 中的相同代码不起作用，但在 2.case 中有效。为什么？

所以我需要在 1.case 中工作，就像按钮在 2.case 中一样。

这是js代码：http: [//jsfiddle.net/mwsvP/8/](http://jsfiddle.net/mwsvP/8/)

```
$(".ca_button, .ca_button1,.button").click(function () {

    var t = $(this);

    $par = t.parent();

    $par.find(".ca_button, .ca_button1").css("background-color", "#bababa");

    if ($(this).hasClass("ca_button1")) {
        t.find("a").css("background-color", "#0F0");
    } else if ($(this).hasClass("ca_button")) {
        t.find("a").css("background-color", "#F00");
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:23:56.450

从此更改您的html：

```
<div>PRICE - 1.case
<a href="javascript:void(0)" class="ca_button" onClick="setQuality(-100, 'price_quality', '{$lang501}/{$lang502}');">Disadvantage</a>
<a class="button">Average</a> 
```

优势

对此：

```
<div>PRICE - 1.case
<div class="ca_button"><a href="javascript:void(0)" class="ca_button" onClick="setQuality(-100, 'price_quality', '{$lang501}/{$lang502}');">Disadvantage</a>
    </div>
<a class="button">Average</a> 
```

优势

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:24:08.310

因为`t.find("a")`.

在您的第一种情况下，没有`a`类`ca_button`或“ca_button”元素的子元素。

在您的代码中，您已经注册了 click 事件，`.ca_button`并且`.ca_button``, so the`t `will be pointing to that, then in the code where you are changing the color you are looking for a`a` 元素作为被点击目标的子元素。

这种情况与情况 1 不匹配。

```
$(".ca_button, .ca_button1,.button").click(function () {

    var t = $(this);

    $par = t.parent();

    $par.find(".ca_button, .ca_button1").css("background-color", "#bababa");

    var t1 = t.is('a') ? t : t.find('a');

    if (t.hasClass("ca_button1")) {
        t1.css("background-color", "#0F0");
    } else if (t.hasClass("ca_button")) {
        t1.css("background-color", "#F00");
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/mwsvP/18/)

# android - Android 搜索小部件 - onQueryTextSubmit 和向 SearchableActivity 发送 Intent 之间的区别？

> ID：15414673
> 
> 赞同：9
> 
> 时间：2013-03-14T16:19:27.007
> 
> 标签：android, search, android-intent, voice-recognition

我有一个包含 SearchView 小部件的活动。我正在使用 onQueryTextSubmit 侦听器处理文本搜索的结果，这很好用。（活动本身被指定为可搜索活动）。

我最近决定通过在 searchable.xml 文件中添加“voiceSearchMode”属性来添加语音识别：

**可搜索的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_name"
    android:hint="@string/search_hint"
    android:voiceSearchMode="showVoiceSearchButton|launchRecognizer">
</searchable> 
```

当我添加语音识别时，在提供语音输入后不会调用 onQueryTextSubmit 侦听器（但是，在使用 editText 框提供文本输入后仍会调用它）。语音识别器将 ACTION_SEARCH Intent 发送回同一个 Activity（可以在 onCreate 方法中处理）。有没有办法使用语音识别器激活 onQueryTextSubmit 方法（或不需要重新创建活动的类似方法？）我问的原因是因为如果识别器必须发送意图，我必须创建和发送一个带有 APP_DATA 的附加包，这似乎不起作用。

所以我的问题是：

**(1) 您如何使用（或可以使用）启用语音识别搜索的 onQueryTextSubmit 侦听器？**（与常规基于文本的搜索一起使用它的方式相同）

**(2) 如果 (1) 不可能，那么如何通过意图通过语音识别搜索查询传递附加数据？**我尝试通过 onSearchRequested() 添加它，如下所示：

```
@Override
public boolean onSearchRequested() {
    Bundle appData = new Bundle();
    appData.putInt("testKey", 44);
    this.startSearch(null, true, appData, false);
    return true;
} 
```

但是当我尝试在 onCreate 中访问它时，appData 为空：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.overview_list);

    Bundle extras = getIntent().getExtras();
    Bundle appData = getIntent().getBundleExtra(SearchManager.APP_DATA);

    // Receive search intents (from voice recognizer)
    Intent intent = getIntent();
    if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
      String query = intent.getStringExtra(SearchManager.QUERY);
      //doMySearch(query);
    }
} 
```

（另外，当我添加 onSearchRequested 处理程序时，按下放大镜图标的效果是在彼此之上展开搜索小部件两次 - 我想这是因为除了设置可搜索的 xml 之外，我还手动开始搜索配置）。

在相关说明中，与在同一活动中使用侦听器相比，发送意图有什么优势？我知道，如果您的 SearchableActivity 是另一个活动，那么您会想向它发送一个意图；但是在 SearchableActivity 是包含搜索小部件的同一个活动的情况下，使用意图的意义何在？

任何意见和建议将不胜感激。如果我需要提供任何其他详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T22:42:36.660

(1) 据我所知，当我通过语音识别器按钮输入搜索查询时，onQueryTextSubmit 永远不会被调用。但是，有一个简单的解决方法 - 见下文。

(2) 我通过将活动启动模式设置为“singleTop”解决了我的问题 - 这意味着不是在语音搜索后重新创建活动，而是在 onNewIntent() 中活动的现有实例中处理新的 ACTION_SEARCH 意图处理程序。因此，您可以访问现有活动的所有私有成员，并且无需通过修改搜索意图来通过包传递任何数据。

**AndroidManifest.xml**：将 launchmode=singleTop 属性添加到您的可搜索活动中：

```
<activity
    android:name=".SearchableActivity"
    android:label="@string/app_name"
    android:uiOptions="splitActionBarWhenNarrow"
    android:launchMode="singleTop">

    <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
    </intent-filter>
    <meta-data android:name="android.app.searchable"
        android:resource="@xml/searchable" />
</activity> 
```

在**SearchableActivity**中，添加 onNewIntent() 方法：

```
@Override
public void onNewIntent(Intent intent) {
    super.onNewIntent(intent);      
    setIntent(intent);
    handleIntent(intent);
}

private void handleIntent(Intent intent) {
    if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        // Gets the search query from the voice recognizer intent
        String query = intent.getStringExtra(SearchManager.QUERY);

        // Set the search box text to the received query and submit the search
        mSearchView.setQuery(query, true);
    }
} 
```

这实质上是接收语音识别器查询并将其放入文本框中，然后像往常一样提交由 onQueryTextSubmit 处理的文本框搜索。

# android - 在页面周围自由移动图像视图

> ID：15414676
> 
> 赞同：0
> 
> 时间：2013-03-14T16:19:37.130
> 
> 标签：android, xml, eclipse, imageview

我正在使用 Eclipse 制作一个 android 应用程序。我是一个初学者，我想知道如何在我的页面上放置我想要的图像。由于对齐，它会一直锁定在某些地方。当然，您必须能够单击图像视图并将其拖到所需的位置？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:26:47.760

如果使用 RelativeLayout 或 FrameLayout 作为容器，则可以将内部 Views 放置在您想要的任何位置。它们仍然必须以某种方式对齐，但通过更改边距，它们可以位于父级中的每个位置。

# powershell - 如何解码 Base64 字符串？

> ID：15414678
> 
> 赞同：81
> 
> 时间：2013-03-14T16:19:38.987
> 
> 标签：powershell, base64

我在 Powershell 中有一个来自包含 Base64 文本的文本文件的普通字符串；它存储在`$x`. 我试图这样解码它：

```
$z = [System.Text.Encoding]::Unicode.GetString([System.Convert]::FromBase64String($x)); 
```

如果`$x`是在 Powershell 中创建的 Base64 字符串，则此方法有效（但不是）。这不适`$x`用于来自文件的 Base64 字符串，`$z`只是以`䐲券`.

我错过了什么？例如，`$x`可能是`YmxhaGJsYWg=`哪个是 Base64 的`blahblah`.

简而言之，`YmxhaGJsYWg=`是在一个文本文件中，然后在这个 Powershell 代码中放入一个字符串，我尝试对其进行解码，但最终得到`䐲券`等。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-03-14T17:06:13.033

编码不是将文本转为 base64，解码不是将 base64 转回文本吗？你似乎把它们混在一起了。当我使用[这个在线解码器解码](http://www.base64decode.org/)时，我得到：

```
BASE64: blahblah
UTF8: nVnV 
```

不是相反。我无法在 PS 中完全重现它。请参阅下面的示例：

```
PS > [System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String("blahblah"))
nV�nV�

PS > [System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes("nVnV"))
blZuVg== 
```

**编辑**我相信你为你的文本使用了错误的编码器。编码的 base64 字符串是从 UTF8（或 ASCII）字符串编码的。

```
PS > [System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String("YmxhaGJsYWg="))
blahblah

PS > [System.Text.Encoding]::Unicode.GetString([System.Convert]::FromBase64String("YmxhaGJsYWg="))
汢桡汢桡

PS > [System.Text.Encoding]::ASCII.GetString([System.Convert]::FromBase64String("YmxhaGJsYWg="))
blahblah 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2019-04-14T22:02:20.120

还***没有*用于 Base64 转换的 PowerShell 原生命令（从 PowerShell [Core] 7.1 开始），但在**[GitHub 问题 #8620](https://github.com/PowerShell/PowerShell/issues/8620)中建议添加专用 cmdlet 。
目前，需要直接使用 .NET。

**重要**：

*   [Base64 编码](https://en.wikipedia.org/wiki/Base64)是使用*字节***对*二进制*数据**进行编码，其值被限制在表示*可打印字符*的 ASCII 字符集的明确定义的 64 字符*子范围*内，设计时发送任意字节存在问题，尤其是高位集 (字节值 > 0x7f)。

****   因此，**您必须始终*明确*指定Base64 字节应该/应该代表什么*字符编码***。*** 

 **尔格：

*   在**转换为 Base64**时，您必须首先使用 Base64 字符串的*使用者*期望的字符编码来**获取***您尝试编码的字符串的***字节表示。****

***   在**从 Base64 转换**时，您必须*使用与创建 Base64 表示相同的编码***将生成的字节数组解释为字符串** 。** 

 *****例子：**

笔记：

*   以下示例在*UTF-8*编码字符串之间进行转换：

*   要与*UTF-16LE*（“Unicode”）相互转换，请替换`[Text.Encoding]::Unicode`为`[Text.Encoding]::UTF8`

**转换为 Base64：**

```
PS> [Convert]::ToBase64String([Text.Encoding]::UTF8.GetBytes('Motörhead'))
TW90w7ZyaGVhZA== 
```

**从 Base64 转换：**

```
PS> [Text.Encoding]::Utf8.GetString([Convert]::FromBase64String('TW90w7ZyaGVhZA=='))
Motörhead 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-08-28T06:55:20.833

当您在谷歌上搜索如何转换为 base64 时会显示此页面，因此为了完整起见：

```
$b  = [System.Text.Encoding]::UTF8.GetBytes("blahblah")
[System.Convert]::ToBase64String($b) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-12-24T15:38:37.843

Base64 编码将三个 8 位字节 (0-255) 转换为四个 6 位字节 (0-63 aka base64)。四个字节中的每一个都索引一个 ASCII 字符串，该字符串将最终输出表示为四个 8 位 ASCII 字符。索引字符串通常是 'A-Za-z0-9+/' ，其中 '=' 用作填充。这就是编码数据长 4/3 的原因。

Base64 解码是逆过程。正如人们所期望的那样，解码后的数据是原来的 3/4。

虽然 base64 编码可以编码纯文本，但它的真正好处是编码不可打印的字符，这些字符可能被传输系统解释为控制字符。

我建议原始海报将 $z 渲染为字节，每个位都对应用程序有意义。将不可打印的字符呈现为文本通常会调用 Unicode，它会根据系统的本地化生成字形。

Base64decode("生命宇宙万物的答案") = 00101010

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-04-29T07:49:25.897

我的输出之间出现空格问题，并且根本没有在线答案来解决这个问题。我确实花了很多时间试图找到一个解决方案，并从玩弄代码到我几乎不知道在我让它工作时输入了什么的地步找到了一个解决方案。这是我对这个问题的修复：`[System.Text.Encoding]::UTF8.GetString(([System.Convert]::FromBase64String($base64string)|?{$_}))`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-20T17:34:49.637

仍然不是“内置”，而是发布到画廊，由 MS 撰写：

[https://github.com/powershell/textutility](https://github.com/powershell/textutility)

# 文本实用程序

*   ConvertFrom-Base64
    返回从 base64 解码的字符串。
*   ConvertTo-Base64
    返回字符串的 base64 编码表示。*****

# javascript - Jquery根据数据库设置克隆下拉列表的选定值

> ID：15414681
> 
> 赞同：0
> 
> 时间：2013-03-14T16:19:44.947
> 
> 标签：javascript, jquery, database, json, drop-down-menu

嗨，如果字段具有某些值，我正在使用 jquery 从数据库 n 中提取数据，我正在调用克隆函数来创建下拉列表并使用该值设置下拉框的选定值。就像在数据库下面的代码中返回分数一样，所以我试图将下拉列表的选定值设置为分数。ANDCriteria2 是使用克隆创建的下拉列表。即使我尝试打印默认情况下应为 total_balance 的 ANDCriteria 的选定值，它也会显示空警报框（`alert($('#ANDCriteria2').val()`），好像下拉菜单甚至不存在

### HTML

```
 <div id="ListOne">
    <div id="crit">
    <div id="innerDiv2">

    <select name="ANDCriteria2">
        <option value="total_balance">Total Balance</option>
        <option value="collector_code">Collector Code</option>
        <option value="score">Score</option>
        <option value="standard_desc">SDC</option>
        <option value="acct_age">Account Age</option>
        <option value="attempts_total">Total Attempts</option>
        <option value="phone_age">Phone Age</option>
        </select>

    </div>
    </div>
    </div> 
```

### jQuery准备功能

```
 (document).ready(function(){
    $('#lst').change(function(){    

    $.ajax({
        type: "GET",
        url: "getter.php",
        data: "list=" + $(this).val(),      
        success: function(data){
    var items = JSON.parse(data)
    var andc2 = items[5];   
    if(andc2 === 'score               ') {
        clone ();   
            alert("BEFORE");    

 //$('#ANDCriteria2 option').eq(2).attr('selected', 'selected');
     //alert( $('.innerDiv2 ANDCriteria2').text());
         $('#ANDCriteria2 > .innerDiv2 >.crit  option[value=score]').attr('selected','selected');

        alert("AFTER"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:50:34.950

我认为你的意思是`$("[name='ANDCriteria']")`而**不是** `$("#ANDCriteria")`。`#`用于基于 ID 的选择。

罪魁祸首：

```
<select name="ANDCriteria2"> 
```

你正在使用：

```
$('#ANDCriteria2 > .innerDiv2 >.crit  option[value=score]') 
```

# ios - 将 OpenGLES 代码从 iOS 移植到 Mac

> ID：15414686
> 
> 赞同：2
> 
> 时间：2013-03-14T16:19:53.310
> 
> 标签：ios, macos, opengl, opengl-es

我正在将几百行 iOS 代码移植到 Mac 上，`OpenGLES`特别是使用.`EAGLContext``CAEAGLLayer`

到目前为止，我将其更改`OpenGLES.framework`为`OpenGL.framework`并添加：

```
#if TARGET_OS_IPHONE
#import <OpenGLES/EAGL.h>
#import <OpenGLES/EAGLDrawable.h>
#import <OpenGLES/ES1/gl.h>
#import <OpenGLES/ES1/glext.h>
#else
#import <OpenGL/OpenGL.h>
#endif

#if TARGET_OS_IPHONE
#define MYOpenGLContext EAGLContext
#define MYOpenGLLayer CAEAGLLayer
#else
#define MYOpenGLContext NSOpenGLContext
#define MYOpenGLLayer CAOpenGLLayer
#endif 
```

然后将所有出现的`EAGLContext`和分别更改`CAEAGLLayer`为`MYOpenGLContext`和`MYOpenGLLayer`。

这还不够，因为无法识别`glOrthof`和等功能。我应该用什么来代替它们？`glBindFramebufferOES``glGenRenderbuffersOES`

# c# - Same Error again in Update query-Visual Studio 2010- Oracle 11g Express edition

> ID：15414687
> 
> 赞同：0
> 
> 时间：2013-03-14T16:19:56.323
> 
> 标签：c#, asp.net, visual-studio-2010, oracle11g

[![Error Again](../Images/f29237cf95be48b146ac4224bb2d6cd1.png)](https://i.stack.imgur.com/RBiXL.jpg)

I am trying to perform update action in Visual Studio 2010 ultimate with Windows form as the front end and Oracle 11g express as the back end. I am using c# to code this.

```
 private void update_student(string STUDENT_ID, string STUDENT_NAME, string STUDENT_ADDRESS)
    {
        con.Open();

        String sql = "UPDATE STUDENT SET STUDENT_NAME = :STUDENT_NAME, STUDENT_ADDRESS= :STUDENT_ADDRESS WHERE STUDENT_ID= :STUDENT_ID";

        OracleCommand query = new OracleCommand(sql, con);

        OracleParameter[] updatestud = new OracleParameter[3];

        //updatestud[0] = query.Parameters.Add("STUDENT_ID", OracleDbType.Varchar2, STUDENT_ID, ParameterDirection.Input);
        updatestud[0] = query.Parameters.Add("STUDENT_ID", OracleDbType.Int32, STUDENT_ID, ParameterDirection.Input);
        updatestud[1] = query.Parameters.Add("STUDENT_NAME", OracleDbType.Varchar2, STUDENT_NAME, ParameterDirection.Input);
        updatestud[2] = query.Parameters.Add("STUDENT_ADDRESS", OracleDbType.Varchar2, STUDENT_ADDRESS, ParameterDirection.Input);

        query.ExecuteNonQuery();

        MessageBox.Show("Row Updated");

        con.Close();

    } 
```

After performing insertion and retrieval actions I am now trying out Update query.

I couldn't understand the flow of parameters and values of the following code that I have used in my application. I get the following error in the query.ExecuteNonQuery(); line:

ORA-01722: invalid number I got suggestions to check the Oracle Type. But in spite of the correction, I find the same error. Even After correcting the Oracle type, I find the same error. Any suggestions?

# jquery-ui - 将行放在可排序表之外时，Jquery UI Sortable ie7 问题

> ID：15414689
> 
> 赞同：0
> 
> 时间：2013-03-14T16:20:01.310
> 
> 标签：jquery-ui, internet-explorer-7, jquery-ui-sortable, jquery-ui-droppable

在 ie8 上，我的可排序列表一切正常。但是，我在 ie7 上遇到了问题。

我的页面为每个员工设置了一个表格。有一个需要分配的工作列表，我将这些工作行拖放到员工表中。

起初，我遇到了无法放入已经为空的员工表的问题，但我通过在每个表中使用 .dontinclude 行的组合并添加接收函数（见下文）解决了这个问题：

```
jQuery_1_9_1(function() {
            jQuery_1_9_1('[id$="' + tname + '"] ').sortable({
                items: "tr:not(.dontinclude)",
                connectWith: ".connectedSortable ",
                receive:  function(ev, ui) {
                    //debugger;
                    ui.item.parent().find('tbody').append(ui.item);
                }
            }).disableSelection();
        }); 
```

我在创建表时添加了 .dontinclude 行（它们是动态构建的，而不是声明的），这意味着它是那里的第一行。添加前

```
:not(.dontinclude) 
```

这些行不会添加到空表中。添加那行之后，它们会添加到表格中，但是它们会添加到 tbody 标记之后，这没有用。添加接收函数指定接收后添加的*位置*，这意味着元素现在出现在 tbody 中。

所以，在 ie8 中一切正常，直到我发现有些用户会在 ie7 上。一切都很顺利，直到我不小心在拖放过程中放开了一行，但没有超过我的一个可排序表。结果就彻底消失了。我检查了 DOM 页面，这些行再次添加到 tbody*之外*（可能导致它们在 ie7 上消失）。如果我在接收函数中放置一个调试器，我发现在这种情况下没有调用该函数 - 只有在我在可排序表上时才会调用它。

所以我认为我需要找到将项目放在可排序区域之外时调用的行为，并可能覆盖它。

这可能吗？也许与jquery droppable有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:22:36.080

好的，我明白了这一点。

看起来我最初把事情复杂化了。

不需要使用接收功能。

```
jQuery_1_9_1(function() {
            jQuery_1_9_1('[id$="' + tname + '"] tbody ').sortable({
                items: "tr:not(.dontinclude)",
                connectWith: ".connectedSortable tbody"
            }).disableSelection();
        }); 
```

我只需要在选择器和connectWith 中指定tbody。除了拥有 .dontinclude 行（在我的表格中，这只是表格标题行）之外，这似乎解决了这个问题，并确保仍然*在*tbody 标记中添加值。

*编辑*我还应该添加，我的 'tname' id 和类 'sortable' 在 table 标签上指定。

# perl - 在 Perl 中使用多重继承时，有没有办法指示要使用哪个 SUPER 函数？

> ID：15414696
> 
> 赞同：1
> 
> 时间：2013-03-14T16:20:17.207
> 
> 标签：perl

根据标题，我正在编写一段尴尬的代码，它使用多重继承并要求`SUPER`调用这两个函数。有没有办法向 Perl 指示我想从两个父类中的哪一个运行该函数？根据[文档](http://perldoc.perl.org/perlobj.html#Inheritance)，使用`$self->SUPER::foo($bar);`仅运行第一个匹配函数。`@ISA`

下面给出了如何继承类的概念：

```
 [Base Class]
               |
 ----------------------------
 |                          |
[A]                        [B]
 |                          |
 ----------------------------
               |
              [C] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T16:32:34.413

只需指定它：

```
$self->A::foo($bar) 
```

或者

```
$self->B::foo($bar) 
```

您可能还想查看[mro](https://metacpan.org/module/mro)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:57:55.047

有多种选择。

如果总是只有两个候选超类，可以强制`@ISA`双向搜索，所以

```
$self->SUPER::method;
{
    local @ISA = reverse @ISA;
    $self->SUPER::method;
} 
```

或者如果你想做一些更聪明的事情，你可以在运行时构建所有超类方法的名称：

```
my ($caller) = (caller(0))[3] =~ /([^:]+)\z/;
for my $super (@ISA) {
    my $method = join '::', $super, $caller;
    $self->$method if exists &$method;
} 
```

第一行获取当前正在执行的方法的名称，并去掉包名信息，只留下裸名。然后将其附加到每个包名中`@ISA`，如果存在则调用该方法。

# websphere - WebSphere 8.5：导入 6.1 配置文件以“未能部署应用程序 isclite”结尾

> ID：15414704
> 
> 赞同：0
> 
> 时间：2013-03-14T16:20:51.463
> 
> 标签：websphere, websphere-8

在我运行的 6.1 服务器上...

> $AdminTask exportWasprofile {-archive c:/tmp/my.car}

在我看到的 8.5 服务器上...

> $AdminTask importWasprofile {-archive c:/tmp/my.car} WASX7015E: 异常运行命令：“$AdminTask importWasprofile {-archive c:/tmp/my.car}”；异常信息：com.ibm.wsspi.configarchive.ConfigArchiveException com.ibm.wsspi.configarchive.ConfigArchiveException：部署应用程序isclite失败

为了正确迁移配置文件，我需要做些什么特别的事情吗？有没有一个地方可以让我了解更多关于出了什么问题的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:34:48.373

从[IBM WebSphere Application Server Migration Toolkit](http://www.ibm.com/developerworks/websphere/downloads/migtoolkit/config.html)的网站：

> IBM® WebSphere® Application Server Migration Toolkit 是一套工具和知识集合，使您的组织能够快速且经济高效地迁移到 WebSphere Application Server V7、V8 或 V8.5，无论是从先前版本的 WebSphere Application Server或竞争应用服务器，包括 Apache Tomcat Server、JBoss Application Server、Oracle Application Server 和 Oracle® WebLogic Server。

您应该使用它，因为它捆绑在 WebSphere Application Server 6.1（和更高版本）中，并提供了两个脚本来帮助您进行迁移：[WASPreUpgrade](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/topic/com.ibm.websphere.nd.doc/info/ae/ae/rmig_WASPreUpgrade.html)和[WASPostUpgrade](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/topic/com.ibm.websphere.nd.doc/info/ae/ae/rmig_WASPostUpgrade.html)。

**WASPreUpgrade** *“将先前安装的 WebSphere Application Server 版本的配置保存到特定于迁移的备份目录中。”* 而**WASPostUpgrade** *“从您指定的 backupDirectory 中检索由 WASPreUpgrade 命令创建的已保存配置。”* （引用他们的页面）。

尽管他们可能正在使用 wsadmin/Jython，但我认为您使用这两个命令行实用程序可能会取得更大的成功。

# jquery - rails jquery datepicker don't popup TypeError: $(...).datepicker is not a function

> ID：15414706
> 
> 赞同：2
> 
> 时间：2013-03-14T16:20:58.893
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jquery-ui-datepicker

我正在尝试让一个简单的 jquery datepicker 工作。我已经关注了 railscasts 的情节，甚至能够下载并让他的版本正常工作。我不确定为什么它不适用于我的项目。但是当我在里面点击时，没有任何动作，也没有弹出日期选择器。

控制台显示以下错误：

```
TypeError: $(...).datepicker is not a function
[Break On This Error]   

dateFormat: 'yy-mm-dd' 
```

更多控制台测试产生：

```
Object[input#datemodel_dated]

>>> $('#datemodel_dated').datepicker

undefined

>>> $('#datemodel_dated').datepicker()

TypeError: $(...).datepicker is not a function
[Break On This Error]   

$('#datemodel_dated').datepicker() 
```

erb代码：

```
<div class="field">
    <%= f.label :dated %><br />
    <%= f.text_field :dated %>
</div> 
```

从萤火虫中提取的代码：

```
(function() {
jQuery(function() {
return $('#datemodel_dated').datepicker({
dateFormat: 'yy-mm-dd'
});
});
}).call(this); 
```

咖啡脚本代码：

```
jQuery ->
  $('#datemodel_dated').datepicker
    dateFormat: 'yy-mm-dd' 
```

宝石文件

```
group :assets do
  # ...
  gem 'jquery-ui-rails'
end 
```

应用程序/资产/javascripts/application.js

```
//= require jquery.ui.datepicker 
```

应用程序/资产/样式表/application.css

```
 *= require jquery.ui.datepicker 
```

这是生成的 HTML

```
<!DOCTYPE html>
<html>
<head>
  <title>Realestate</title>
  <meta name="description" content="...">

  <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon" /> 
  <link href="/assets/jquery.ui.core.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.theme.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/jquery.ui.datepicker.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/normalize.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/defaults.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/forms.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/blogs.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/borrowers.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/buyers.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/contacts.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/home.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/lenders.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/prospective_properties.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/sellers.css?body=1" media="all" rel="stylesheet" type="text/css" />

<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.core.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.ui.datepicker.js?body=1" type="text/javascript"></script>
<script src="/assets/datemodels.js?body=1" type="text/javascript"></script>
<script src="/assets/account_members.js?body=1" type="text/javascript"></script>
<script src="/assets/accounts.js?body=1" type="text/javascript"></script>
<script src="/assets/blogs.js?body=1" type="text/javascript"></script>
<script src="/assets/borrowers.js?body=1" type="text/javascript"></script>
<script src="/assets/buyers.js?body=1" type="text/javascript"></script>
<script src="/assets/companies.js?body=1" type="text/javascript"></script>
<script src="/assets/contacts.js?body=1" type="text/javascript"></script>
<script src="/assets/customers.js?body=1" type="text/javascript"></script>
<script src="/assets/home.js?body=1" type="text/javascript"></script>
<script src="/assets/journal_entries.js?body=1" type="text/javascript"></script>
<script src="/assets/journals.js?body=1" type="text/javascript"></script>
<script src="/assets/labels.js?body=1" type="text/javascript"></script>
<script src="/assets/leases.js?body=1" type="text/javascript"></script>
<script src="/assets/lenders.js?body=1" type="text/javascript"></script>
<script src="/assets/pages.js?body=1" type="text/javascript"></script>
<script src="/assets/properties.js?body=1" type="text/javascript"></script>
<script src="/assets/prospective_properties.js?body=1" type="text/javascript"></script>
<script src="/assets/rent_logs.js?body=1" type="text/javascript"></script>
<script src="/assets/rental_units.js?body=1" type="text/javascript"></script>
<script src="/assets/roles.js?body=1" type="text/javascript"></script>
<script src="/assets/sellers.js?body=1" type="text/javascript"></script>
<script src="/assets/users.js?body=1" type="text/javascript"></script>
<script src="/assets/vendors.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>

  <meta content="authenticity_token" name="csrf-param" />
<meta content="2kpUpKPNVpHhk9UfDo1CutyVebDLvkwQXUe86qkmIPM=" name="csrf-token" />

  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29109749-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>
<body>
  <div id="contents">
  <div class="header">
  <div class="menu">
   ...
  </div>

  <div class="section">
    <div class="column1">
      <img alt="Mini_lion_logo" src="/assets/mini_lion_logo.png" width="100px" />
    </div>
    <div class="left column2">
      <div class = "row">
        <form action="/sellers/new" class="button_to" method="get"><div><input type="submit" value="Sell" /></div></form>
        ...
      </div>
      <div class = "hide">
        <div class="row">
          <form action="/buyers/new" class="button_to" method="get"><div><input type="submit" value="Buy/Rent" /></div></form>
         ...
        </div>
      </div>
    </div>
  </div> 
</div>

<div class="section">
  <p class="notice"></p>
    <h1>New datemodel</h1>

 <form accept-charset="UTF-8" action="/datemodels" class="new_datemodel" id="new_datemodel" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="2kpUpKPNVpHhk9UfDo1CutyVebDLvkwQXUe86qkmIPM=" /></div>

  <div class="field">
    <label for="datemodel_dated">Dated</label><br />
    <input id="datemodel_dated" name="datemodel[dated]" size="30" type="text" />
  </div>
  <div class="actions">
    <input name="commit" type="submit" value="Create Datemodel" />
  </div>
</form>
</div>
</div>
</body> 
</html> 
```

* * *

为了更好地衡量，我在开发日志中没有看到任何问题，但我可能不知道要寻找什么：

```
Started GET "/pm/leases/2/edit" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Processing by Pm::LeasesController#edit as HTML
  Parameters: {"id"=>"2"}
  User Load (0.2ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Lease Load (0.4ms)  SELECT `leases`.* FROM `leases` WHERE `leases`.`id` = 2 LIMIT 1
  RentalUnit Load (0.4ms)  SELECT `rental_units`.* FROM `rental_units` WHERE `rental_units`.`id` = 1 LIMIT 1
  Property Load (0.3ms)  SELECT `properties`.* FROM `properties` WHERE `properties`.`id` = 1 LIMIT 1
  Rendered pm/leases/_lease_form.html.erb (142.2ms)
  Rendered pm/leases/_form.html.erb (160.7ms)
  Rendered pm/leases/edit.html.erb within layouts/application (163.2ms)
  Rendered layouts/_analytics.html.erb (0.0ms)
  Rendered layouts/_home_header.html.erb (3.8ms)
  Rendered layouts/_home_footer.html.erb (0.0ms)
Completed 200 OK in 490ms (Views: 205.0ms | ActiveRecord: 9.0ms)

Started GET "/assets/datemodels.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /datemodels.js - 200 OK (0ms)

Started GET "/assets/jquery.ui.theme.css?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /jquery.ui.theme.css - 304 Not Modified (2ms)
[2013-03-14 18:17:45] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/home.css?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /home.css - 304 Not Modified (0ms)
[2013-03-14 18:17:45] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/lenders.css?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /lenders.css - 304 Not Modified (0ms)

Started GET "/assets/jquery.ui.core.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /jquery.ui.core.js - 304 Not Modified (0ms)
[2013-03-14 18:17:45] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-14 18:17:45] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/jquery.ui.datepicker.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /jquery.ui.datepicker.js - 304 Not Modified (0ms)
[2013-03-14 18:17:45] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/account_members.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /account_members.js - 304 Not Modified (0ms)
[2013-03-14 18:17:45] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/accounts.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /accounts.js - 304 Not Modified (0ms)
[2013-03-14 18:17:45] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/borrowers.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /borrowers.js - 304 Not Modified (0ms)

Started GET "/assets/buyers.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /buyers.js - 304 Not Modified (0ms)
[2013-03-14 18:17:45] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/companies.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /companies.js - 304 Not Modified (0ms)
[2013-03-14 18:17:45] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-14 18:17:45] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/contacts.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /contacts.js - 304 Not Modified (0ms)
[2013-03-14 18:17:45] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/blogs.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /blogs.js - 304 Not Modified (0ms)
[2013-03-14 18:17:45] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/home.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /home.js - 304 Not Modified (0ms)
[2013-03-14 18:17:45] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/customers.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:45 +0200
Served asset /customers.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/journal_entries.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /journal_entries.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/journals.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /journals.js - 304 Not Modified (1ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/labels.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /labels.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/leases.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /leases.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/lenders.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /lenders.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/properties.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /properties.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/pages.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /pages.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/prospective_properties.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /prospective_properties.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/rent_logs.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /rent_logs.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/rental_units.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /rental_units.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/sellers.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /sellers.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/roles.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /roles.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /users.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/vendors.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /vendors.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/jquery.ui.core.css?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /jquery.ui.core.css - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/jquery.ui.datepicker.css?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /jquery.ui.datepicker.css - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/borrowers.css?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /borrowers.css - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/buyers.css?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /buyers.css - 304 Not Modified (0ms)

Started GET "/assets/contacts.css?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /contacts.css - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/prospective_properties.css?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /prospective_properties.css - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/blogs.css?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /blogs.css - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/forms.css?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /forms.css - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /jquery_ujs.js - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/sellers.css?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /sellers.css - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/normalize.css?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /normalize.css - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/defaults.css?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /defaults.css - 304 Not Modified (0ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-03-14 18:17:46 +0200
Served asset /jquery.js - 304 Not Modified (1ms)
[2013-03-14 18:17:46] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

我已经阅读了这里的所有其他文章，但找不到解决方案。我确定这很简单...

我正在使用 Rails 3.2.12、Ruby 1.9.3

# css - 响应式引导导航栏中的下拉菜单

> ID：15414714
> 
> 赞同：0
> 
> 时间：2013-03-14T16:21:42.473
> 
> 标签：css, drop-down-menu, twitter-bootstrap, navbar

我使用引导程序中的（响应式）导航栏。如果浏览器大小处于“响应”模式（-> 更小，以便出现 nav-btn），我想防止弹出我的下拉菜单。

问题：当列出子项时，菜单占用了很多空间。我还找不到任何有用的东西。

源：

```
 <div class="navbar navbar-fixed-top" align="right" style="border:1px solid #EFEFEF;"> <!--  -->
  <div class="navbar-inner">
    <div class="containerr" align="center">
        <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"><font size="+1" color="#FFA500">Menu</font></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>

        </button>     

      <table width="100%" border="0" cellpadding="0" cellspacing="2">
       <tr>
        <td align="left" valign="middle"><a href="http://www.abc.com"> <img alt="" src="img/logo.jpg"/></a></td>
        <td align="left" valign="middle"><div class="font-effect-3d-float obenrechts">Slogan</div></td>
       </tr>
      </table>

      <div class="nav-collapse">

        <ul class="nav">

          <li class="active"><a href="home.html" target="mainframe" class="activator">Home</a></li>
          <li class="divider-vertical"></li>

          <li class="dropdown" id="iddropdown">
            <a href="service.html" class="dropdown-toggle activator" data-hover="dropdown" target="mainframe" id="idservice">
            Service </a>
            <ul class="dropdown-menu">
              <li><a target="mainframe" href="service.html#1" class="activator">Option 1</a></li>
              <li><a target="mainframe" href="service.html#2" class="activator">Option 2</a></li> 
            </ul>
          </li>

         </tr>
         </table>
         </a></li>
        </ul>   
       </div><!-- /.nav-collapse -->
      </div><!-- /.container -->
     </div><!-- /.navbar-inner -->
    </div><!-- /.navbar --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:11:40.973

这有效：

```
$(window).resize(function() {

  if ( $(window).width() < 980) {
      $("#iddropdown").removeClass("dropdown");
  }
  else if ( !$("#iddropdown").hasClass('dropdown') )
  {
      $("#iddropdown").addClass("dropdown");
  }

}); 
```

# jquery - jQuery dataTables 中的日期范围搜索

> ID：15414718
> 
> 赞同：0
> 
> 时间：2013-03-14T16:21:51.403
> 
> 标签：jquery, jquery-datatables

我有列出日期的列，我想搜索一个日期范围（FromDate，ToDate）..这是我的代码

```
$(document).ready(function() {
var oTable = $('#listings_row').dataTable();
var asInitVals = new Array();
        $("thead input").keyup( function () {
                oTable.fnFilter( this.value,  parseInt($(this).attr('id')) );
            } );
   $("#dateaddedSto").datepicker();
$("#dateaddedS").datepicker();
}); 
```

这是简单的小提琴[http://jsfiddle.net/n4UKd/1/](http://jsfiddle.net/n4UKd/1/)

# c# - 具有多个构造函数的单个 DTO - 这似乎是一个合适的解决方案吗？

> ID：15414728
> 
> 赞同：0
> 
> 时间：2013-03-14T16:22:25.167
> 
> 标签：c#, .net, web-services, web-applications, architecture

我有一个名为“Set”的实体，其中包含卡片。有时我想查看整个卡片及其内容（卡片视图），而有时我只想知道集合中有多少张卡片（表格视图）。为了保持干燥，我决定尝试使用多个构造函数重新使用我的 SetDto 类，如下所示：

```
public class SetDto
    {
        public SetDto()
        {
            Cards = new List<CardDto>();
        }

        // Called via SetDto(set, "thin")
        public SetDto (Set set, string isThin)
        {
            var setDto = new SetDto()
                {
                    SetId = set.SetId,
                    Title = set.Title,
                    Details = set.Details,
                    Stage = set.Stage,
                    CardCount = set.Cards.Count
                };

            return setDto;
        }

        // Called via SetDto(set)
        public SetDto(Set set)
        {
            SetId = set.SetId;
            UserId = set.UserId;
            Title = set.Title;
            Details = set.Details;
            FolderId = set.FolderId;
            Stage = set.Stage;
            IsArchived = set.IsArchived;
            Cards = new List<CardDto>();
            foreach (Card card in set.Cards)
            {
                Cards.Add(new CardDto(card));
            }

        }

        /// property definitions 
```

我最初有两个不同的 DTO 用于集合 - ThinSetDto 和 FullSetDto - 但这似乎很混乱且更难测试。上述解决方案看起来不错，还是我违反了已知的最佳实践？感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:25:21.603

我将在 SetManager 类（处理 CRUD 操作的类）中创建三个方法，而不是在 DTO 中。

dto 里面没有这样的逻辑。无论如何，我同意你的观点，复制是无用的（而且是邪恶的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:28:33.370

相反，我更喜欢通过在 Set 类中声明所有属性并通过传递所需参数来修改属性的扩展方法。否则，通过添加所需的属性和调用扩展方法来初始化 baseDTO 并具有各种版本以创建所需的版本 DTO 并返回 baseDTO。

```
public static Set SetDto(this Set set, bool isThin)
{

  if(isThin)
  {

  }  

   return objSet;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:29:39.553

```
public class BaseSetDTO
{
  public BaseSetDTO()
  {
    Set();
  }
  internal virtual void Set()
  {
    //Do your base set here with base properties
  }
}
public class SetDTO : BaseSetDTO
{
  internal override void Set()
  {
    //Do a full set here
  }
} 
```

创建一个基类，然后让您的类型处理它们应该设置的内容。为您的 ThinSetDTO 创建一个新的 on 并再次覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T16:41:36.340

一个常见的解决方案是让存储库（或等效的）返回您想要的 DTO/实体的“风格”，方法是使用不同的访问方法，即：`Get() ... GetSet()`，或者枚举相关实体的“风格”并传递它到您的“获取”（或等效）方法，即：

```
enum ContactCollectionFlavors { Full, CountOnly, CountWithNames .... }
...
foo = ContactRepository.GetByLastName('Jones', ContactCollectionFlavors.CountWithNames); 
```

这可能会有点混乱，根据经验，相关实体应该有某种方式知道它是什么“味道”，因为它破坏了封装和关注点的分离，所以闻起来很糟糕 - 但在我看来，最好捏住你的鼻子并保留一些带外数据，以便稍后您可以延迟加载实体，从而将“轻口味”转变为完全填充的实体。

# excel - 最大 Vlookup Excel

> ID：15414734
> 
> 赞同：0
> 
> 时间：2013-03-14T16:22:35.193
> 
> 标签：excel, vba

我正在尝试在列中找到最大日期。例如：

```
Column A
2011
2010
2010
2009
2013 
```

我想要查找 2013 的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:26:15.517

如果您只是想找到一个最大值，那么 Vlookup 就大材小用了。 `=Max(A:A)`将在 A 列中找到最大值。

如果您尝试在 VBA 中执行此操作，则该函数将是`Application.Max(Range("A:A"))`.

# c++ - OpenGL将RGBA字节像素转换为图像整数数组

> ID：15414735
> 
> 赞同：-1
> 
> 时间：2013-03-14T16:22:35.383
> 
> 标签：c++, opengl

我像通常那样将 OpenGL 纹理 2D 中的像素读取到字节数组（无符号字符）中。但现在我需要将其转换为图像数组（我想是整数），以便从 CPU 加载图像的布局和像素范围逆过程。我的问题是 - 仅仅做就足够了：

```
glGetTexImage(GL_TEXTURE_2D,0,GL_RGBA,GL_UNSIGNED_INT,bytes); 
```

代替 ：

```
glGetTexImage(GL_TEXTURE_2D,0,GL_RGBA,GL_UNSIGNED_BYTE,bytes); 
```

然后遍历每个整数并将其从 0-1 范围转换为 0-255？在不使用 3 方图像库的情况下，我还没有真正找到任何进行此类转换的示例。

如果我这样做：

```
 size_t lenght=_viewWidth * _viewHeight ;
    GLubyte *bytes=(GLubyte*)malloc(lenght);
    ///////////////  read pixels from tex  /////////////////////
    glBindTexture(GL_TEXTURE_2D,tex);
    glGetTexImage(GL_TEXTURE_2D,0,GL_BGR,GL_UNSIGNED_BYTE,bytes);
           uint8_t Rc, Gc, Bc;
       for(x = 0; x < lenght; x+=3)
    {
        Bc = *bytes + x;
        Gc = *bytes + x + 1;
        Rc = *bytes + x + 2;

             } 
```

Rc、Gc 和 Bc 会在 0-255 范围内吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:09:24.563

当 OpenGL 加载纹理时，它将传入的像素转换为调用中指定的*内部格式*`glTexImage*()`提供的格式。此操作可能包括从像素*格式*（`glTexImage*()`的第三个参数）到内部格式的映射步骤，并且通常包括映射到范围 [0,1] 或 [-1,1] 之一，然后映射到范围每个组件的内部格式。例如，GL_FLOAT 的像素格式和 GL_RGBA8 的内部格式将导致输入值从范围 [0,1] 映射到范围 [0,255]。

当您使用 检索纹素时`glGetTexImage()`，该过程反向完成，因此输出像素值（每个组件）将在指定输出类型的范围内（例如，在您的情况下为 GL_UNSIGNED_INT）。无符号整数的范围是 [0,2 ^(32) -1]，因此这将是整数图像数组中返回的值的范围。如果您需要不同范围内的这些值（例如，GL_UNSIGNED_BYTES），那么您需要手动将值转换为您需要的范围。

就个人而言，如果 OpenGL 可以返回的数据类型之一与您需要的值范围相匹配，请尝试使用该类型。

# jquery - Jquery：如何获取每个锚链接的位置？

> ID：15414737
> 
> 赞同：0
> 
> 时间：2013-03-14T16:22:43.403
> 
> 标签：jquery

我怎样才能获得这些`<a name="link1"></a> , <a name="link2"></a>`等的位置/位置

例如当我点击`<a href="#link1">link1</a>`

我想获取页面上的位置/位置，即值`<a name="link1"></a>` 等等。

我有以下代码，我想获取页面中的位置值* *（例如顶部=500px）* *`<a name="link1"></a>`等`<a name="link2"></a>`并将其传递到此处

```
$('ul#mainNav li a').click(function (e) {
    e.preventDefault();
    if($(this).attr('href') !== '#'){
        var location = $($(this).attr('href')).offset().top - 150; /* For your header height, subtract 150 or whatever it ends up being */
        $('html, body').animate({scrollTop: location}, 600);
    } else {
        $('html, body').animate({scrollTop: 0}, 600);
    }
});

<div id="wrapper">

    <div id="branding">
    <h1>Branding</h1>
    <ul id="mainNav"> 
    <li class="first"><a href="#">Home</a></li> 
    <li><a href="#link1">link1</a></li> 
    <li><a href="#link2">link2</a></li> 
    <li><a href="#link3">link3</a></li> 

    </ul> 

    </div> 

    <div id="content"> 

        <div id="form-b">

        <form id="comments_form" action="#" method="post">

    <fieldset>
      <legend>Your Contact Details  Link1 <a name="link1"></a> </legend>

      <p>
      <label for="author">Name: <span class="required">(Required)</span></label>
      <input name="author" id="author" type="text" />
      </p>

      <p>
      <label for="email">Email Address: <span class="feedback">Incorrect email address. Please try again.</span></label>
      <input name="email" id="email" type="text" />
      </p>

      <p>
      <label for="url">Web Address:</label>
      <input name="url" id="url" type="text" />
      </p>
    </fieldset>

    <fieldset>
      <legend>Your Contact Details  Link 2<a name="link2"></a> </legend>
      <p>
      <label for="author">Name: <span class="required">(Required)</span></label>
      <input name="author" id="author" type="text" />
      </p>

      <p>
      <label for="email">Email Address: <span class="feedback">Incorrect email address. Please try again.</span></label>
      <input name="email" id="email" type="text" />
      </p>

      <p>
      <label for="url">Web Address:</label>
      <input name="url" id="url" type="text" />
      </p>
    </fieldset>
    <fieldset>
      <legend>Your Contact Details  Link 3<a name="link3"></a></legend>
      <p>
      <label for="author">Name: <span class="required">(Required)</span></label>
      <input name="author" id="author" type="text" />
      </p>

      <p>
      <label for="email">Email Address: <span class="feedback">Incorrect email address. Please try again.</span></label>
      <input name="email" id="email" type="text" />
      </p>

      <p>
      <label for="url">Web Address:</label>
      <input name="url" id="url" type="text" />
      </p>
    </fieldset>

    <fieldset>
      <legend>Your Contact Details  </legend>
      <p>
      <label for="author">Name: <span class="required">(Required)</span></label>
      <input name="author" id="author" type="text" />
      </p>

      <p>
      <label for="email">Email Address: <span class="feedback">Incorrect email address. Please try again.</span></label>
      <input name="email" id="email" type="text" />
      </p>

      <p>
      <label for="url">Web Address:</label>
      <input name="url" id="url" type="text" />
      </p>
    </fieldset>

    <fieldset id="submit-b">
      <legend>  </legend>
    <div class="wrap">  
      <p>
    <input id="submit" class="submit" name="submit" type="submit"/>
    </p>
    </div>
    </fieldset>

    </form>

        </div>

    </div> 

    <div id="footer">
    <p>Footer</p>
    </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:29:45.920

如果您将“href”称为位置，则可以通过

```
$("a").click(function() {
  alert($(this).attr('href'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:36:55.110

如果您指的是实际位置，则可以使用`position`jQuery ( [http://api.jquery.com/position/](http://api.jquery.com/position/) ) 中的方法，如下所示：

```
$(document).on("click", "a", function () {
    var pos = $("[name='" + $(this).attr('href').replace("#", '') + "']").position();
    alert("left = " + pos.left + ", top = " + pos.top);
}); 
```

jsfiddle在这里：http: [//jsfiddle.net/hZJPw/](http://jsfiddle.net/hZJPw/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T16:29:37.960

```
<li><a href="#link1">link1</a></li> 
<li><a href="#link2">link2</a></li> 
<li><a href="#link3">link3</a></li> 
```

然后在你的html代码中。

```
<div id="#link1"> Duis autem vel eum iriure </div>

<div id="#link2"> Duis autem vel eum iriure </div>

<div id="#link3"> Duis autem vel eum iriure </div> 
```

这是那里使用的结构。所以点击link1去id="#link1"

# android - 使用 usbaccessory 库的共享库不可用

> ID：15414738
> 
> 赞同：2
> 
> 时间：2013-03-14T16:22:50.843
> 
> 标签：android

在模拟器（android 4.2）上构建 adk2011 项目时，我的 logcat 出现此错误

包`com.google.android.DemoKit`需要不可用的共享库`com.android.hardware.usb;`失败！

我在 androidManifest 文件中添加了这个库“ `com.android.hardware.usb`”，但它没有任何改变。

# excel - 在列中查找重复项并从另一列添加它们的对应值

> ID：15414739
> 
> 赞同：0
> 
> 时间：2013-03-14T16:22:53.137
> 
> 标签：excel, vba, excel-2007

我在 A 列有员工 ID 和工作时间在 K 列。

我想如果员工 ID 出现多次以添加工作时间并将结果放在与该员工 ID 的第一个实例相对应的另一列中，并且重复项为 0。

这是一份月度报告，任何时候都可能有超过 2k 条记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:38:38.280

正如其他人所说，数据透视表确实是最好的方法。如果您不确定如何使用数据透视表或它有什么用处，[请参阅我详细解释的这篇 SO 帖子](https://stackoverflow.com/questions/14896188/how-to-count-repeated-values-using-vba/14902257#14902257)。

无论如何，我整理了以下 VBA 函数来帮助您入门。这绝不是最有效的方法。它还做出以下假设：

> *   `Sheet 1`拥有所有数据
> *   `A`有员工编号
> *   `B`有小时
> *   `C`为总小时数保留
> *   `D`将可用于处理状态输出

当然，这一切都可以通过稍微更改代码来轻松更改。查看代码，它已被注释以供您理解。

`Status`列必须存在的原因是为了避免处理`Staff Id`已经处理过的 a。您可以更改代码以避免需要此专栏，但这是我做事的方式。

**代码**

```
Public Sub HoursForEmployeeById()

    Dim currentStaffId As String
    Dim totalHours As Double

    Dim totalStaffRows As Integer
    Dim currentStaffRow As Integer
    Dim totalSearchRows As Integer
    Dim currentSearchRow As Integer

    Dim staffColumn As Integer
    Dim hoursColumn As Integer
    Dim totalHoursColumn As Integer
    Dim statusColumn As Integer

    'change these to appropriate columns
    staffColumn = 1
    hoursColumn = 2
    totalHoursColumn = 3
    statusColumn = 4

    Application.Calculation = xlCalculationManual
    Application.ScreenUpdating = False
    totalStaffRows = Sheet1.Cells(Rows.Count, staffColumn).End(xlUp).Row
    For currentStaffRow = 2 To totalStaffRows
        currentStaffId = Cells(currentStaffRow, staffColumn).Value

        'if the current staff Id was not already processed (duplicate record)
        If Not StrComp("Duplicate", Cells(currentStaffRow, statusColumn).Value, vbTextCompare) = 0 Then
            'get this rows total hours
            totalHours = CDbl(Cells(currentStaffRow, hoursColumn).Value)
            'search all subsequent rows for duplicates
            totalSearchRows = totalStaffRows - currentStaffRow + 1
            For currentSearchRow = currentStaffRow + 1 To totalSearchRows
                If StrComp(currentStaffId, Cells(currentSearchRow, staffColumn), vbTextCompare) = 0 Then
                    'duplicate found: log the hours worked, set them to 0, then mark as Duplicate
                    totalHours = totalHours + CDbl(Cells(currentSearchRow, hoursColumn).Value)
                    Cells(currentSearchRow, hoursColumn).Value = 0
                    Cells(currentSearchRow, statusColumn).Value = "Duplicate"
                End If
            Next
            'output total hours worked and mark as Processed
            Cells(currentStaffRow, totalHoursColumn).Value = totalHours
            Cells(currentStaffRow, statusColumn).Value = "Processed"
            totalHours = 0  'reset total hours worked
        End If
    Next
    Application.ScreenUpdating = False
    Application.Calculation = xlCalculationAutomatic

End Sub 
```

**前**

![在此处输入图像描述](../Images/97801b7cd574e9b9b466dbe6d5d40491.png)

**后**

![在此处输入图像描述](../Images/1d29f3e02b1a45cedcd326e0e49a9d2e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:26:22.590

试试下面的代码：

```
Sub sample()

    Dim lastRow As Integer, num As Integer, i As Integer
    lastRow = Range("A65000").End(xlUp).Row

    For i = 2 To lastRow
        num = WorksheetFunction.Match(Cells(i, 1), Range("A1:A" & lastRow), 0)

        If i = num Then
            Cells(i, 3) = WorksheetFunction.SumIf(Range("A1:A" & lastRow), Cells(i, 1), Range("B1:B" & lastRow))
        Else
            Cells(i, 1).Interior.Color = vbYellow
        End If
    Next

End Sub 
```

前

![在此处输入图像描述](../Images/7e136cbda5fcf96482d7659b1f5e7450.png)

后

![在此处输入图像描述](../Images/92bd675cf6947716ea4582a1032fd38a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:40:36.060

这是位于范围 A1:B10 中的数据表的解决方案，其中标题和结果写入列 C。

```
Sub Solution()

Range("c2:c10").Clear

Dim i
For i = 2 To 10

    If WorksheetFunction.SumIf(Range("A1:a10"), Cells(i, 1), Range("C1:C10")) = 0 Then

        Cells(i, "c") = WorksheetFunction.SumIf( _
                         Range("A1:a10"), Cells(i, 1), Range("B1:B10"))
    Else
        Cells(i, "c") = 0
    End If
Next i

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-04T10:07:09.783

下面的代码标识列中的重复值并用红色突出显示。希望这可能会有所帮助。

```
 iLastRow = Cells(chosenExcelSheet.Rows.Count, 1).End(xlUp).Row 'Determine the last row to look at     
    Set rangeLocation = Range("A1:A" & iLastRow)

    'Checking if duplicate values exists in same column
        For Each myCell In rangeLocation
            If WorksheetFunction.CountIf(rangeLocation, myCell.Value) > 1 Then
                myCell.Interior.ColorIndex = 3'Highlight with red Color
            Else
                myCell.Interior.ColorIndex = 2'Retain white Color
            End If
        Next 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-06-25T16:31:42.393

```
Sub SelectColoredCells()
    Dim rCell As Range
    Dim lColor As Long
    Dim rColored As Range

    'Select the color by name (8 possible)
    'vbBlack, vbBlue, vbGreen, vbCyan,
    'vbRed, vbMagenta, vbYellow, vbWhite
    lColor = RGB(156, 0, 6)

    'If you prefer, you can use the RGB function
    'to specify a color
    'Default was lColor = vbBlue
    'lColor = RGB(0, 0, 255)

    Set rColored = Nothing
    For Each rCell In Selection
        If rCell.Interior.Color = lColor Then
            If rColored Is Nothing Then
                Set rColored = rCell
            Else
                Set rColored = Union(rColored, rCell)
            End If
        End If
    Next
    If rColored Is Nothing Then
        MsgBox "No cells match the color"
    Else
        rColored.Select
        MsgBox "Selected cells match the color:" & _
            vbCrLf & rColored.Address
    End If
    Set rCell = Nothing
    Set rColored = Nothing
End Sub 
```

这突出了重复项

# java - Selenium WebDriver - 什么是“Selenium 客户端和 WebDriver 语言绑定”

> ID：15414747
> 
> 赞同：0
> 
> 时间：2013-03-14T16:23:27.777
> 
> 标签：java, selenium, selenium-webdriver, language-binding

在 selenium 下载页面中，我看到了“Selenium Client & WebDriver Language Bindings”部分

1) 什么是语言绑定？和

2) 什么是客户端驱动程序？（我不是来自技术背景）

有人可以解释从硒下载页面获取的以下内容：（ [http://docs.seleniumhq.org/download/](http://docs.seleniumhq.org/download/)）

*

> 为了创建与 Selenium 服务器交互的脚本（Selenium RC、Selenium Remote Webdriver）或创建本地 Selenium WebDriver 脚本，您需要使用特定于语言的客户端驱动程序。这些语言包括 1.x 和 2.x 风格的客户端。虽然存在其他语言的语言绑定，但这些是托管在 google 代码上的主项目支持的核心绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:48:11.783

其中一些文档很旧。它来自旧的 Selenium 1.x 版本。Selenium WebDriver 现在有很大的不同，有 2.x 版本（最新的是 2.31）。Selenium 2.x 版本的绑定隐藏在您的视图中。您定义功能并启动新的 RemoteWebDriver，Hub+Node 会在后台处理绑定。

现在，要进行类似于 RC 的交互，您需要：

```
 1\.  To start a Grid Hub on port 4444
  2\.  Start 1 Node Hub on port 5555 on either your local machine or a remote machine.  It has configuration that tells it how to connect to the Hub.
  3\.  In your script, start a new client using:

 URL hubURL = new URL("127.0.0.1:4444"); // always use IP address
 DesiredCapabilities capability = DesiredCapabilities.internetExplorer();
 RemoteWebDriver driver = new RemoteWebDriver(new URL(hubURL), capability); 
```

[我有一个示例项目，您可以在这里尝试](https://github.com/djangofan/WebDriverTestingTemplate)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:32:48.910

2) 什么是客户端驱动程序？

Selenium 使用许多客户端驱动程序 java、python....所以要使用每种编程语言都有不同的驱动程序。在我的理解中，这只不过是一个 JAR。

# java - 如何在android中使用带有'onCheckedChanged'方法的switch语句？

> ID：15414749
> 
> 赞同：3
> 
> 时间：2013-03-14T16:23:36.583
> 
> 标签：java, android, switch-statement, oncheckedchanged

我已经尝试了很长时间来让它工作，我想要它，以便我可以将两个 checkChanged 放在一个 OnCheckedChanged 方法中。到目前为止我所拥有的不起作用，但是就像我之前只有一个案例一样，没有 switch 语句起作用。请你看看我的代码，看看我如何修复它以使其工作？

这是代码：

```
public class MainActivity extends Activity implements OnClickListener, OnCheckedChangeListener {

    Button sensorButton;
    Button newScreen;
    Switch vibrateToggle;
    Switch lightsToggle;
    NotificationManager nm1;
    NotificationManager nm2;
    static final int uniqueID1 = 12345;
    static final int uniqueID2 = 54321;
    OnCheckedChangeListener vibrateListener;
    OnCheckedChangeListener lightsListener;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        sensorButton = (Button)this.findViewById(R.id.sensorButton);
        sensorButton.setOnClickListener(this);

        newScreen = (Button)this.findViewById(R.id.newScreen);
        newScreen.setOnClickListener(this);

        nm1 = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        nm1.cancel(uniqueID1);

        nm2 = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        nm2.cancel(uniqueID2); 

        vibrateToggle = (Switch)this.findViewById(R.id.switch1);
        vibrateToggle.setOnCheckedChangeListener(vibrateListener);

        lightsToggle = (Switch)this.findViewById(R.id.lightSwitch);
        lightsToggle.setOnCheckedChangeListener(lightsListener);    
    }

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        // TODO Auto-generated method stub
        switch(buttonView.getId()){

        case R.id.switch1:
            Toast.makeText(this, "Vibrate Notification is " + (isChecked ? "ON" : "OFF"),
                Toast.LENGTH_SHORT).show();
                if (isChecked) {
                    // The toggle is enabled
                    Intent vibrateIntent = new Intent(this, MainActivity.class);
                    PendingIntent vibratePi = PendingIntent.getActivity(this, 0, vibrateIntent, 0);
                    NotificationCompat.Builder vibrateN = new NotificationCompat.Builder(this);
                    vibrateN.setContentIntent(vibratePi);
                    vibrateN.setDefaults(Notification.DEFAULT_VIBRATE);
                    Notification vn = vibrateN.build();
                    nm2.notify(uniqueID2, vn);
                } else {
                    // The toggle is disabled
                }

        case R.id.lightSwitch:
            Toast.makeText(this, "Lights Notification is " + (isChecked ? "ON" : "OFF"),
                    Toast.LENGTH_SHORT).show();
                    if (isChecked) {
                        // The toggle is enabled
                        Intent lightsIntent = new Intent(this, MainActivity.class);
                        PendingIntent lightsPi = PendingIntent.getActivity(this, 0, lightsIntent, 0);
                        NotificationCompat.Builder lightsN = new NotificationCompat.Builder(this);
                        lightsN.setContentIntent(lightsPi);
                        lightsN.setDefaults(Notification.DEFAULT_LIGHTS);
                        Notification ln = lightsN.build();
                        nm2.notify(uniqueID2, ln);
                    } else {
                        // The toggle is disabled
                    }

             break;
        }
    } 
```

这是我得到的 logcat：

```
03-14 16:46:21.139: D/dalvikvm(532): Not late-enabling CheckJNI (already on)
03-14 16:46:22.218: I/dalvikvm(532): threadid=3: reacting to signal 3
03-14 16:46:22.338: I/dalvikvm(532): Wrote stack traces to '/data/anr/traces.txt'
03-14 16:46:22.728: I/dalvikvm(532): threadid=3: reacting to signal 3
03-14 16:46:22.739: I/dalvikvm(532): Wrote stack traces to '/data/anr/traces.txt'
03-14 16:46:23.238: I/dalvikvm(532): threadid=3: reacting to signal 3
03-14 16:46:23.278: I/dalvikvm(532): Wrote stack traces to '/data/anr/traces.txt'
03-14 16:46:23.509: D/gralloc_goldfish(532): Emulator without GPU emulation detected.
03-14 16:46:25.258: D/AndroidRuntime(532): Shutting down VM
03-14 16:46:25.258: W/dalvikvm(532): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
03-14 16:46:25.288: E/AndroidRuntime(532): FATAL EXCEPTION: main
03-14 16:46:25.288: E/AndroidRuntime(532): java.lang.IllegalStateException: Could not find a method onSwitchToggle(View) in the activity class com.example.sensor.MainActivity for onClick handler on view class android.widget.Switch with id 'switch1'
03-14 16:46:25.288: E/AndroidRuntime(532):  at android.view.View$1.onClick(View.java:3031)
03-14 16:46:25.288: E/AndroidRuntime(532):  at android.view.View.performClick(View.java:3511)
03-14 16:46:25.288: E/AndroidRuntime(532):  at android.widget.CompoundButton.performClick(CompoundButton.java:100)
03-14 16:46:25.288: E/AndroidRuntime(532):  at android.view.View$PerformClick.run(View.java:14105)
03-14 16:46:25.288: E/AndroidRuntime(532):  at android.os.Handler.handleCallback(Handler.java:605)
03-14 16:46:25.288: E/AndroidRuntime(532):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-14 16:46:25.288: E/AndroidRuntime(532):  at android.os.Looper.loop(Looper.java:137)
03-14 16:46:25.288: E/AndroidRuntime(532):  at android.app.ActivityThread.main(ActivityThread.java:4424)
03-14 16:46:25.288: E/AndroidRuntime(532):  at java.lang.reflect.Method.invokeNative(Native Method)
03-14 16:46:25.288: E/AndroidRuntime(532):  at java.lang.reflect.Method.invoke(Method.java:511)
03-14 16:46:25.288: E/AndroidRuntime(532):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-14 16:46:25.288: E/AndroidRuntime(532):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-14 16:46:25.288: E/AndroidRuntime(532):  at dalvik.system.NativeStart.main(Native Method)
03-14 16:46:25.288: E/AndroidRuntime(532): Caused by: java.lang.NoSuchMethodException: onSwitchToggle [class android.view.View]
03-14 16:46:25.288: E/AndroidRuntime(532):  at java.lang.Class.getConstructorOrMethod(Class.java:460)
03-14 16:46:25.288: E/AndroidRuntime(532):  at java.lang.Class.getMethod(Class.java:915)
03-14 16:46:25.288: E/AndroidRuntime(532):  at android.view.View$1.onClick(View.java:3024)
03-14 16:46:25.288: E/AndroidRuntime(532):  ... 12 more
03-14 16:46:25.948: I/dalvikvm(532): threadid=3: reacting to signal 3
03-14 16:46:25.958: I/dalvikvm(532): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:00:55.143

如日志：

> NoSuchMethodException：onSwitchToggle [类 android.view.View]

表示您已`android:onClick="onSwitchToggle"`在 View xml 中添加了一个属性，`Switch`但您忘记在`Activity`代码中定义该方法。

因为是添加`setOnCheckedChangeListener()`到`Switch`View 中`Activity`，所以不需要`onClick()`在 XML 中为`Switch`View 设置。只需`android:onClick="onSwitchToggle"`从 XML 中删除该属性。

# delphi - URL 停止使用 Delphi 服务

> ID：15414751
> 
> 赞同：1
> 
> 时间：2013-03-14T16:23:43.723
> 
> 标签：delphi, url, browser

我想用 Delphi 7 编写后台服务，以阻止任何浏览器加载特定的 URL。这可能吗？

谁能指出我的方向？

提前致谢。

谢恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:50:02.930

有两种方法，其中第二种在技术上是最好的：

*   编写一个[注入所有进程](https://www.google.com/search?q=delphi+dll+injection)的 DLL，如果这些进程用于浏览器，则必须拦截和过滤所有流量，例如使用 Windows 套接字

*   编写一个有点像防火墙的[分层服务提供者](http://en.wikipedia.org/wiki/Layered_Service_Provider)（在操作系统中的较低级别）

我曾在互联网过滤软件工作过，我可以告诉你两者都是*大*事业。我们最初采用第一种方法，然后切换到另一种，因为它在技术上更好。[而且我们从未完成过渡，因为公司倒闭了；-(]

我们没有编写自己的 LSP（这本身就是一项大工作），而是使用了[Komodia](http://www.komodia.com/)的产品。尽管他们是为 C 编写的，但人们在回答我们有关移植到 Delphi 的问题时非常乐于助人。

但正如我之前所说，这很重要：您必须处理 32 位和 64 位代码、http 与 https、保护服务不被停止等。您可以找到的任何非编程解决方案都更好（尽管很容易规避） .

如果您仍然想编程：准备使用 LSP 进行 1 人年的编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:27:46.350

服务，不，我不这么认为。但是您可以编辑“hosts”文件，使 url 的域指向 127.0.0.1。您可以创建一个“保护”此文件的服务，尽管服务本身必须具有更高的权限才能编辑它，当然，如果用户有权这样做，服务本身也可以被杀死。

无论如何，如果您设法编辑文件，浏览器将无法通过域名找到服务器。当然，不能以这种方式阻止具有 IP 地址的 URL，您也不能阻止特定的 URL，只能阻止整个域。

但总的来说，这不是使用自定义服务来解决的问题，而是在 PC 或路由器上的防火墙中解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:31:24.740

For Internet Explorer, you can write a [Browser Helper Object](http://msdn.microsoft.com/en-us/library/bb250436%28v=VS.85%29.aspx) that IE itself loads and passes browser events to. The BHO can then accept/reject URLS on a per-request basis as needed.

# java - C++ 和 Java 进程之间的共享内存

> ID：15414753
> 
> 赞同：24
> 
> 时间：2013-03-14T16:23:46.717
> 
> 标签：java, c++, java-native-interface, shared-memory

我的目标是将数据从 C++ 进程传递到 Java 进程，然后接收返回的结果。

我已经通过命名管道实现了这一点，但我更愿意共享数据而不是传递或复制它，假设访问会更快。

最初，我想用 C++ 创建一个可以用 Java 读写的共享段，但我不确定这是否可以通过 JNI 实现，更不用说安全了。

我相信在 Java 中可以使用 ByteBuffer.allocateDirect 分配内存，然后使用 GetDirectBufferAddress 访问 C++ 中的地址，但如果我是正确的，这是针对 JNI 中的本机调用，我无法在我的 C++ 进程中获取此地址?

丢失的。

提前谢谢了。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-14T17:20:46.517

如果您有共享内存，例如使用[`CreateFileMapping`](http://comsci.liu.edu/~murali/win32/SharedMemory.htm)(Windows) 或`shmget`(Unix)，您所需要的只是 Java 端的本机方法。然后您可以创建一个[`ByteBuffer`](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html)直接**访问**共享内存的方法，[`NewDirectByteBuffer`](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html#NewDirectByteBuffer)如下所示：

```
JNIEXPORT jobject JNICALL Java_getSharedBuffer(JNIEnv* env, jobject caller) {
    void* myBuffer;
    int bufferLength; 
```

现在你必须得到一个指向共享内存的指针。在 Windows 上，你会使用这样的东西：

```
 bufferLength = 1024; // assuming your buffer is 1024 bytes big
    HANDLE mem = OpenFileMapping(FILE_MAP_READ, // assuming you only want to read
           false, "MyBuffer"); // assuming your file mapping is called "MyBuffer"
    myBuffer = MapViewOfFile(mem, FILE_MAP_READ, 0, 0, 0);
    // don't forget to do UnmapViewOfFile when you're finished 
```

现在你可以创建一个`ByteBuffer`由这个共享内存支持的：

```
 // put it into a ByteBuffer so the java code can use it
    return env->NewDirectByteBuffer(myBuffer, bufferLength);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T16:26:32.497

您是否考虑过使用[0MQ](http://www.zeromq.org/)，它同时支持[Java](http://zguide.zeromq.org/java:_start)和[C++](http://zguide.zeromq.org/cpp:_start)，并且会更可靠。我认为如果你想在 Java 中做共享内存，它必须通过 JNI，上次我看没有其他方法可以做到这一点。

这表明如果你走那条路，你必须通过[JNI来做。](http://www.codeproject.com/Articles/2460/Using-Memory-Mapped-Files-and-JNI-to-communicate-b)虽然我找到的解决方案是特定于 Windows 的，但可能不适用于您。

# javascript - 在 ng-repeat 中显示/隐藏按钮

> ID：15414759
> 
> 赞同：0
> 
> 时间：2013-03-14T16:24:02.333
> 
> 标签：javascript, angularjs

我正在尝试在 ng-repeat （一个简单的表格）上显示/隐藏按钮。删除按钮替换为一致按钮。

这是我的代码

```
..... Angular stuff .....

function ContactsCtrl($scope, $http) {
    $scope.order = '-id';
    $scope.currentPage = 0;
    $scope.pageSize = 15;
    $http.get('/events/<%= @event.id -%>/contacts.json').success(function(data) {
        $scope.contacts = data;
        $scope.numberOfPages=function(){
            return Math.ceil($scope.contacts.length/$scope.pageSize);
        }
    });

    $scope.clickDelete = function(e,t) {
        console.log("delete");
            // rest api stuff...
        $scope.contacts.splice(e, 1); // This WORKS!
    };
    $scope.showDelete = function(e,t) {
        e.showDeleteButton = true; // This DOES NOT
    };
} 
```

在 HTML 中：

```
 <tr ng-repeat="contact in contacts | filter:search | orderBy:order |      startFrom:currentPage*pageSize | limitTo:pageSize">
<td><a href="/contacts/{{contact.id}}/edit">{{contact.email}}</a></td>

                        ...
<td><a href="#" ng-click="showDelete(contact)" class="btn btn-small">delete</a>
<a href="/contacts/{{contact.id}}" ng-show="showDeleteButton" ng-click="clickDelete(contact)" class="btn btn-small btn-danger">confirm</a>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:29:17.537

您似乎没有从 showDelete 函数返回值。看起来 JSON 对象“showDeleteButton”上有一个属性，您可以直接绑定到该属性。

plnkr 示例：http: [//plnkr.co/edit/eZTFyw9tGeWEfYw0U0I8](http://plnkr.co/edit/eZTFyw9tGeWEfYw0U0I8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T16:15:05.900

似乎您要做的是让删除按钮设置一个标志，该标志将显示确认按钮，该按钮将实际执行删除，对吗？ `ng-repeat`为每个元素创建一个新的子范围，因此您可以在子范围上设置一个“可确认”标志并使用它（[***小提琴***](http://jsfiddle.net/jgoemat/39HAh/1/)）：

```
<a ng-click="confirmable = true">delete</a>
<a ng-show="confirmable" ng-click="clickDelete(contact)">confirm</a>
<a ng-show="confirmable" ng-click="confirmable = false">cancel</a> 
```

此外，您似乎正在将`contact`对象传递给您的`clickDelete`函数并将其用作数组的索引，所以我不知道为什么会这样。小提琴用于`indexOf`查找要删除的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:35:56.003

我是这样做的：

JavaScript：

```
$scope.clickDelete = function(contact,i) {/* ... */ $scope.contacts.splice(i, 1);};
$scope.clickShowConfirm = function(contact) {contact.showdelete = true;};
$scope.clickCancel = function(contact) {contact.showdelete = false;}
$scope.showOrHide = function(contact) {return contact.showdelete;}; 
```

HTML：

```
<a href="#" ng-click="clickShowConfirm(contact)" ng-hide="showOrHide(contact)" class="btn btn-small">delete</a>
<a href="/contacts/{{contact.id}}" ng-click="clickDelete(contact,$index)" class="btn btn-small btn-danger" ng-show="showOrHide(contact)">ok</a>
<a href="#" ng-show="showOrHide(contact)" ng-click="clickCancel(contact)" class="btn btn-small">cancel</a> 
```

# javascript - 如何在外部 Javascript 文件中使用 Firebase

> ID：15414761
> 
> 赞同：2
> 
> 时间：2013-03-14T16:24:07.457
> 
> 标签：javascript, firebase

这可能是一个非常简单的问题，但我一直在尝试在与 HTML 文件一起使用的外部 javascript 文件中使用 Firebase，但无法使其正常工作。我计划将此文件用于许多其他类似的页面，因此我宁愿将其保存在外部文档中。具体来说，我的代码是：

```
$(function() {

var head= document.getElementsByTagName('head')[0];
var script= document.createElement('script');
script.src= 'https://cdn.firebase.com/v0/firebase.js';
head.appendChild(script);

var Database = new Firebase('https://myfirebase.firebaseIO.com/');
... 
```

但是当我尝试运行它时，它说 Firebase 对象/关键字未定义。我知道脚本已正确附加到 HTML 页面，因为我在运行代码后检查了页面上的 HTML。

我还在某处读到过，您可能需要一台个人服务器来运行 Firebase，但坦率地说，我真的不知道这意味着什么——无论如何，我使用 Mac OSX 并在 Chrome 中运行我所有的 HTML 和 Javascript。

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:40:34.773

问题是使用 document.createElement 不会强制在调用包含脚本之前加载和呈现脚本（现在正在调用它）。此方法无法保证您包含的脚本何时会被调用。

此外，您正在加载脚本 onDomReady，方法是将其放入`$(function() {...})`；您可能希望立即将其插入标题中，而不是等待整个文档加载。

最简单的答案就是把 Firebase 放到 html 页面的头部；您还没有在这里真正解释您的限制，但我认为这不是您的选择。如果是，亲吻。

另一个简单的答案是使用 jQuery，因为您显然可以使用它。

```
$.getScript('https://cdn.firebase.com/v0/firebase.js', function() {

    // now I can use Firebase

}); 
```

您也可以使用其他方法完成此操作（等到使用 setInterval 定义 Firebase；使用除 document.createElement 之外的其他脚本检索方法——尝试谷歌搜索“通过 javascript 加载顺序动态加载脚本”），但我认为这足以满足您的需求.

# java - 在带有 Spring Data 的 Mongo 实体中使用 jodatime

> ID：15414765
> 
> 赞同：2
> 
> 时间：2013-03-14T16:24:11.837
> 
> 标签：java, jodatime, querydsl, spring-data-mongodb

我有一个实体，它将与 Spring Data 一起保存到 Mongo 数据库：

```
@Document
public class MyEntity {

    @Id
    private String id;

    @QueryType(PropertyType.DATETIME)
    private DateTime lastUpdate;

} 
```

这是我的存储库：

```
public interface MyEntityRepository extends
    MongoRepository<MyEntity, String>,
    QueryDslPredicateExecutor<MyEntity> {} 
```

以及我的 pom.xml 中用于 QueryDSL 生成的插件

```
 <plugin>
            <groupId>com.mysema.maven</groupId>
            <artifactId>apt-maven-plugin</artifactId>
            <version>1.0.8</version>
            <executions>
                <execution>
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>process</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>target/generated-sources</outputDirectory>
                        <processor>org.springframework.data.mongodb.repository.support.MongoAnnotationProcessor</processor>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

尽管如此，它将 DateTime 视为常规实体（我尝试过使用和不使用 QueryType）。我希望它被视为日期，所以我可以进行比较，因为现在我不能：

```
Predicate predicate = QMyEntity.myentity.lastUpdate... // where are the lessThan or greaterThan methods? 
```

当然，如果可能的话，我想坚持使用 JodaTime，而不是回退到 Java Date，或者将日期存储为毫秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:40:04.647

如果您使用的是最新版本的 Spring Data MongoDB（在撰写本文时为 1.2.0.RELEASE），如果您在类路径中有库（请参阅[相应的票证](https://jira.springsource.org/browse/DATAMONGO-606)）`Converter`，则应注册 JodaTime 类型的必要实现。

如果您必须使用它的旧版本，您需要手动编写和注册这些转换器，如[参考文档](http://static.springsource.org/spring-data/data-mongodb/docs/current/reference/html/mongo.core.html#mongo.custom-converters)中所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T07:21:11.420

`org.joda.time.DateTime`Querydsl 通常会将其视为 DateTime 类型，因此一些额外的标志使 Querydsl 将其视为实体类型。

例如，该额外标志可能是 DateTime 类型的属性在某处由`@Embedded`or注释`@Embeddable`。

如果这不能解决问题，请在 GitHub 上为 Querydsl 打开一张票。

# c# - asp.net 中页面重定向引发的异常

> ID：15414766
> 
> 赞同：2
> 
> 时间：2013-03-14T16:24:15.070
> 
> 标签：c#, asp.net, redirect

我有这个代码

```
protected void Button_Click(object sender, EventArgs e)
{
    try
    {
        // some code

        con.Open();
        string result = command.ExecuteScalar().ToString();

        if (result != string.Empty)
        {
             // some code
             Response.Redirect("Default.aspx");
        }
    }
    catch (Exception ex)
    {
        throw new Exception(ex.Message);
    }
    finally
    {
        con.Close();
    } 
```

它给出了一个例外`Response.Redirect("Default.aspx");`

> 例如：线程被中止。

知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:26:54.217

从 Try...Catch 语句中重定向将导致抛出此异常，因此这不是您想要做的。

我会将您的代码更新为；

```
string result = string.Empty;

try
{
    // some code
    con.Open();
    result =  command.ExecuteScalar().ToString();        
}
catch (Exception ex)
{
    throw new Exception(ex.Message);
}
finally
{
    con.Close();
}

if (result != string.Empty)
{
     // some code
     Response.Redirect("Default.aspx");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:27:52.403

这是 ASP.NET 在执行重定向时抛出的典型异常。它在 Internet 上有很好的记录。

尝试下面的 catch 块来吞下异常，一切都应该没问题。它应该什么都不做！

```
catch(ThreadAbortException)
{
}
catch (Exception ex)
{
    throw new Exception(ex.Message);
}
finally
{
    con.Close();
} 
```

# file-io - 使用 naudio 在 wav 文件中插入 wav 文件

> ID：15414767
> 
> 赞同：1
> 
> 时间：2013-03-14T16:24:15.673
> 
> 标签：file-io, insert, wav, naudio, overwrite

我有一个录音机应用程序（CSHARP），我使用 NAudio 来录制/播放音频。我们需要在现有的 wav 文件中插入和覆盖音频。目前，为了插入音频，我使用 wav 文件的当前位置并进行拆分。将新的 wav 文件合并到原始文件并与文件的其余部分合并。覆盖时，我采用原始音频的当前位置并从该位置合并新音频。这个过程似乎工作正常，但出于某种原因，我认为读取文件和写入文件需要付出很大的代价。当我们进行快速录制时，停止录制，倒带，录制，停止录制等等..对文件的请求被阻塞，并且在某些时候我得到文件 IO 异常错误，说“文件正在被另一个进程使用.. " （注：我们使用脚踏设备，分配了 3 个按键用于录音，播放和倒带。我们遇到的问题是当我们更快地踩踏板时。）

我真的被困在这一点上，因为我无法解决这个问题。我需要一些专家的帮助。有没有办法在不进行拆分和合并的情况下从文件中的特定位置插入音频？请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:41:34.413

覆盖 WAV 文件中的音频并不太难，当我需要这样做时，我使用`WaveFileWriter`可以打开现有 WAV 文件的自定义版本，并允许您在数据块中重新定位。

另一方面，插入总是会有问题，因为您需要在插入点向前移动之后移动所有音频。我很想创建一个单独的“插入”wav 文件，然后在完成整个录制会话后，将这些部分拼接成最终的 WAV 文件。

# jquery - 尽管在浏览器中存在，但源代码中缺少 Div Id

> ID：15414768
> 
> 赞同：0
> 
> 时间：2013-03-14T16:24:19.373
> 
> 标签：jquery

如果从另一个页面收到新的 div id，我有这个脚本可以重定向页面：

第 1 页

```
<script type="text/javascript">
jQuery(function($){
$('#result').load('logged.html #intro');
});

if ($("#intro").length > 0){
window.location.href = "logged.html";
}
</script>

<div id="result"></div> 
```

来自第 2 页的 div

```
<div id="intro">Hi, this is the Intro!</div> 
```

我在第 1 页上收到正确的消息，如果我在那里检查元素但如果页面新 div 的开源代码丢失。这是为什么 ？我需要它来根据他的存在触发事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:25:48.717

任何页面的来源都是服务器发送的原始文件。如果您修改 DOM，这些更改将*不会*出现在源代码中。

# ios - 在横向视图中有纵向标签

> ID：15414773
> 
> 赞同：0
> 
> 时间：2013-03-14T16:24:34.163
> 
> 标签：ios, xib

我创建了一个带有横向 UIView 的 .xib。

我要解决的问题是我希望 UILabel 沿着侧面垂直运行，文本从视图底部读取到顶部，但我不知道该怎么做。那可能吗？

图像显示我的意思

![在此处输入图像描述](../Images/f41018645336cf429b9b9a5198641b1c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:06:50.830

您需要旋转然后翻译它以将其放置在您想要的位置。旋转发生在标签的中心周围，这就是您需要翻译它的原因。如果您将文本标签的左上角放置在您希望它结束​​的位置（即显示的标签看起来像它围绕标签的左上角点旋转），您将使用如下代码：

```
- (void)viewDidLayoutSubviews {
    CGAffineTransform transform = CGAffineTransformMakeRotation(3 * M_PI_2);
    CGAffineTransform transform2 = CGAffineTransformConcat(transform, CGAffineTransformMakeTranslation(floor(-self.label.bounds.size.width / 2), floor(-self.label.bounds.size.width / 2)));
    self.label.transform = transform2;
} 
```

您可能需要稍微调整平移值以获得所需的值，但您肯定希望它们是整数（我已经用 floor 完成了），因此标签清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:45:56.320

当然可以。你需要做一个转换。

```
yourlabel.transform = CGAffineTransformMakeRotation(-M_PI/2); 
```

# php - 在后端的 Magento 订单视图页面中添加产品的缩略图

> ID：15414775
> 
> 赞同：3
> 
> 时间：2013-03-14T16:24:39.397
> 
> 标签：php, magento

我正在尝试在Magento的订单视图页面 ( `sales_order`/ ) 区域中显示产品的图像缩略图。`view`将产品的预览图像添加为列。

我的行如下：

```
load($_item->getProductId()); ?>init($_product, 'thumbnail')->resize(75, 75); ?>"   
alt="<?php echo $this->htmlEscape($_product['name']); ?>" border="0" width="75" /> 
```

但这只是通过一个没有图像的空白框，甚至没有 Magento 默认图像。

它可能只是字段名称或属性稍有偏差？或者甚至是外壳？但真的看不出我做错了什么。

如果我更换：

```
load($_item->getProductId()); 
```

和：

```
load($_item['product_id'])->getData('image') 
```

我可以拉入页面上显示的图像的位置。但无法让它实际显示图像。

可以在产品网格页面上很好地提取产品缩略图，但无法找到要从中复制代码的页面。

任何有助于完善上述内容的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:29:53.790

最终代码如下。要使其正常工作，请将其添加到`/app/design/adminhtml/default/default/template/sales/order/view/items/renderer/default.phtml`

```
<td class="a-center">
  <?php $product = Mage::getModel('catalog/product')->setStoreId($_item->getOrder()->getStoreId())->load($_item->getProductId());?>
  <p align="center">
  <img src="<?php echo Mage::helper('catalog/image')->init($product, 'small_image')->resize(75); ?>" width="75" height="75" />
  </p>
</td> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-28T05:00:30.170

您可以使用以下代码显示订购的商品图片

```
$order   = Mage::getModel('sales/order')->load($orderId);    
foreach($order->getAllItems() as $item){    
    $product=Mage::getModel('catalog/product')->load($item->getProductId());
    echo  Mage::helper('catalog/image')->init($product, 'small_image')->resize(50,50);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T05:04:43.210

这对你有帮助我认为你只需要放置你的属性值

[http://magentocodes.blogspot.in/2013/01/get-custom-attribute-value-in-magento.html](http://magentocodes.blogspot.in/2013/01/get-custom-attribute-value-in-magento.html)

# iphone - iOS应用程序中的线程问题

> ID：15414780
> 
> 赞同：1
> 
> 时间：2013-03-14T16:24:52.990
> 
> 标签：iphone, ios, objective-c, ipad

我对 iOS 开发有些陌生，并且遇到了线程问题。我正在调用一个返回 json 数据的 Web 服务，并且执行此操作的代码按预期工作。对于测试，我希望能够单击一个按钮，检索数据并使用格式化结果填充 textview 控件。这是我从按钮单击事件处理程序中摘录的代码：

```
dispatch_queue_t que = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(que, ^{
    thisRiverGauge = [[RiverGauge alloc] initWithStationInfo:gauge forHistoryInHours:5 inThisFormat:@"json"];
    [txtResults setText:rval];
}); 
```

尝试从线程内更新 textview (txtResults) 时，出现运行时错误。当我将更新放在线程之外的 textview 时，显然它不会更新，因为线程完成所需的时间比事件处理程序的执行要长。什么可能是解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:26:37.297

您应该在主线程上执行与 GUI 相关的任务，在要更新 textview 值的代码周围添加主队列/线程块。

```
ispatch_queue_t que = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(que, ^{
    thisRiverGauge = [[RiverGauge alloc] initWithStationInfo:gauge forHistoryInHours:5 inThisFormat:@"json"];

  dispatch_async(dispatch_get_main_queue(), ^{
    [txtResults setText:rval];
  });
}); 
```

# java - javafx 独立应用程序中的 RMI 连接

> ID：15414781
> 
> 赞同：0
> 
> 时间：2013-03-14T16:24:55.637
> 
> 标签：java, javafx, rmi

我的 javafx 应用程序存在以下问题：我正在使用 RMI 将客户端应用程序连接到服务器，一切正常，直到我在 Web 浏览器或独立模式下运行应用程序。在这种情况下，RMI 不能正常工作，但不要抛出任何异常。我无法向服务器发送任何消息。当我在 IDE 中运行程序或单击 jar 文件时，问题消失了。

我认为，它可以与某些浏览器权限连接，并且在该上下文中启动的应用程序可能无法访问网络适配器。

任何想法如何解决这个问题？

编辑：有一个对我来说不可见的异常：java.net.SocketPermission。所以正如我所想，访问 socked 被拒绝。这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:15:02.973

未签名的小程序只能连接到加载它的主机。所以，要么改变你的拓扑结构，要么[签署小程序](http://docs.oracle.com/javafx/2/deployment/packaging.htm#BABJGFBH)。

# mdx - 如何删除存在特定空单元格的寄存器？- MDX - Pentaho

> ID：15414782
> 
> 赞同：0
> 
> 时间：2013-03-14T16:24:58.873
> 
> 标签：mdx, business-intelligence, pentaho, mondrian

我是 MDX 的新手，我需要从结果中删除所有寄存器，即我的名为 Ticket 的事实表中的字段*solvedate_id为空。*

任何想法？

下面是带来所有寄存器的代码：

*选择*

NON EMPTY {[Measures].[Ticket id]} ON COLUMNS，

NON EMPTY Order({([Dimgroup.Grupo].[All Dimgroup.Grupo], [Dimstatus.Status].[All Dimstatus.Statuss], [Dimtempoabertura.AnoAbertura].[All Dimtempoabertura.AnoAbertura], [Dimtempoabertura.MesAbertura] .[All Dimtempoabertura.MesAberturas])}, [Measures].[Ticket id], ASC) ON ROWS

*来自 [GLPI]*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:40:45.890

确保您具有“状态”的寄存器层次结构，该层次结构等同于“启用”字段。然后只需将其添加到 MDX 中，无论是在 where 子句中还是在行上交叉连接。

[寄存器].[启用].[真]

（但是它会找你）

# c# - 如何比较多维数组是否相等？

> ID：15414784
> 
> 赞同：5
> 
> 时间：2013-03-14T16:25:02.187
> 
> 标签：c#, multidimensional-array, compare, equals

我知道您可以使用[Enumerable.SequenceEqual](http://msdn.microsoft.com/en-us/library/bb348567.aspx)来检查相等性。但是多维数组没有这样的方法。*关于如何比较二维数组的任何建议？*

**实际问题：**

```
public class SudokuGrid
{
    public Field[,] Grid
    {
        get { return grid; }
        private set { grid = value; }
    }
}

public class Field
{
    private byte digit;
    private bool isReadOnly;
    private Coordinate coordinate;
    private Field previousField;
    private Field nextField;
} 
```

所有这些属性都在`SudokuGrid`构造函数中设置。所以所有这些属性都有**私有**设置器。我想保持这种状态。

现在，我正在使用 C# 单元测试进行一些测试。我想比较 2`Grids`他们的价值观，而不是他们的参考。

因为我通过构造函数使用私有设置器设置了所有内容。类中的这个 Equal 覆盖`SudokuGrid`是正确的，但不是我需要的：

```
public bool Equals(SudokuGrid other)
{
    if ((object)other == null) return false;

    bool isEqual = true;

    for (byte x = 0; x < this.Grid.GetLength(0); x++) // 0 represents the 1st dimensional array
    {
        for (byte y = 0; y < this.Grid.GetLength(1); y++) // 1 represents the 2nd dimensional array
        {
            if (!this.Grid[x, y].Equals(other.Grid[x, y]))
            {
                isEqual = false;
            }
        }
    }

    return isEqual;
} 
```

这不是我需要的，因为我正在做测试。所以如果我的实际数独是：

```
SudokuGrid actual = new SudokuGrid(2, 3); 
```

那么我预期的数独不能只是：

```
SudokuGrid expected = new SudokuGrid(2, 3); 
```

但应该是：

```
Field[,] expected = sudoku.Grid; 
```

所以我不能使用该类来比较它的网格属性，因为我不能只设置网格，因为 setter 是私有的。如果我不得不更改我的原始代码以便我的单元测试可以工作，那将是愚蠢的。

**问题：**

*   那么他们是一种实际比较多维数组的方法吗？*（那么我可以覆盖多维数组使用的 equal 方法吗？）*
*   有没有其他方法可以解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:30:20.547

您可以使用以下扩展方法，但您必须`Field`实现`IComparable`

```
public static bool ContentEquals<T>(this T[,] arr, T[,] other) where T : IComparable
{
    if (arr.GetLength(0) != other.GetLength(0) ||
        arr.GetLength(1) != other.GetLength(1))
        return false;
    for (int i = 0; i < arr.GetLength(0); i++)
        for (int j = 0; j < arr.GetLength(1); j++)
            if (arr[i, j].CompareTo(other[i, j]) != 0)
                return false;
    return true;
} 
```

# android - getFragmentManager() 返回 null

> ID：15414785
> 
> 赞同：1
> 
> 时间：2013-03-14T16:25:03.887
> 
> 标签：android, android-fragments

我的应用面向 API 8 及更高版本，并使用 ActionbarSherlock。`Activity`延伸`SherlockFragmentActivity`。_ 我的 viewpager 片段适配器如下：

```
public class MyFragmentAdapter extends FragmentPagerAdapter {

  public Fragment getItem(int position) {
        ...
    }

  @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        super.destroyItem(container, position, object);

        FragmentManager manager = ((ListFragment) object).getSherlockActivity().getSupportFragmentManager();
        FragmentTransaction trans = manager.beginTransaction();
        trans.remove((Fragment) object);
        trans.commit();
    }
} 
```

`destroyItem`用于删除 a 的页面`FragmentPagerAdapter`。这第一次工作正常，也许前两次页面被删除。但是在继续删除页面的某些时候，`manager`返回 null 并且应用程序崩溃了`manager.beginTransaction()`。

我似乎无法弄清楚这是为什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:30:31.800

我解决了这个问题。事实证明，`ListFragment`传入的`destroyItem`有它`FragmentManager == null`，因为我没有正确删除`WeakReference`列表中的空项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T08:18:41.163

最后，几天前我发现了我的错误。

解决方案很简单：

只需创建一个新的 Bundle 变量作为全局变量

```
Bundle datosGuardados; 
```

存储 savedInstanceState 的数据

```
datosGuardados = savedInstanceState; 
```

最后只检查它是否为空，而不是使用任何 getFragmentManager

```
if (datosGuardados != null) infoF = (InformacionFragment) getFragmentManager().findFragmentById(R.id.posicionamiento_layout); 
```

# parameters - zf2 zend 路由获取 $this->params()->fromQuery() 的请求参数不起作用

> ID：15414787
> 
> 赞同：1
> 
> 时间：2013-03-14T16:25:06.927
> 
> 标签：parameters, routing, request, zend-framework2

我已将此 zf2 路由配置添加到标准骨架应用程序中：（编辑：这里是我的完整配置：）

```
'router' => array(
    'routes' => array(
        'home' => array(
            'type' => 'Zend\Mvc\Router\Http\Literal',
            'options' => array(
                'route' => '/',
                'defaults' => array(
                    'controller' => 'Application\Controller\Index',
                    'action' => 'index',
                ),
            ),
        ),
        'test' => array(
                'type'    => 'literal',
                'options' => array(
                    'route'    => '/test',
                    'defaults' => array(
                           'controller' => 'Application\Controller\Index',
                           'action'     => 'test',
                    ),
                ),
                'may_terminate' => true,
                'child_routes'  => array(
                    'query' => array(
                        'type' => 'Query',
                        'options' => array(
                            'defaults' => array(
                                'testparam' => 'bar'
                            ),
                        ),
                    ),
                ),    
        ),

        // The following is a route to simplify getting started creating
        // new controllers and actions without needing to create a new
        // module. Simply drop new controllers in, and you can access them
        // using the path /application/:controller/:action
        'application' => array(
            'type'    => 'Literal',
            'options' => array(
                'route'    => '/application',
                'defaults' => array(
                    '__NAMESPACE__' => 'Application\Controller',
                    'controller'    => 'Index',
                    'action'        => 'index',
                ),
            ),
            //'may_terminate' => true,
            'child_routes' => array(
                'default' => array(
                    'type'    => 'Segment',
                    'options' => array(
                        'route'    => '/[:controller[/:action]]',
                        'constraints' => array(
                            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                            'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                        ),
                        'defaults' => array(
                        ),
                    ),
                ),
            ),
        ),

    ),
), 
```

在控制器中，我想在 testAction 中获取请求参数：（编辑：这里是我的完整控制器）：

```
 namespace Application\Controller;

    use Zend\Mvc\Controller\AbstractActionController;
    use Zend\View\Model\ViewModel;

    class IndexController extends AbstractActionController
    {
        public function indexAction()
        {
            var_dump(
                    $this->params()->fromQuery(),
                    $this->getRequest()->getQuery(),
                    $this->getEvent()->getRouteMatch()->getParams()
             );

            return new ViewModel();
        }

        public function testAction(){
            var_dump(
                    $this->params()->fromQuery(),
                    $this->getRequest()->getQuery(),
                    $this->getEvent()->getRouteMatch()->getParams()
             );

            return new ViewModel();
        }
    } 
```

**URL：** `/test?testparam=123123`
**结果：**参数不正确！
在这里，如果我删除 may_terminate，我希望 PARAM 为“123123” ，然后我得到

```
PARAM = "bar" (see default value for "testparam")

array(0) { } object(Zend\Stdlib\Parameters)#195 (1) { ["storage":"ArrayObject":private]=> array(0) { } } array(3) { ["controller"]=> string(28) "Application\Controller\Index" ["action"]=> string(4) "test" ["testparam"]=> string(3) "bar" } 
```

**URL：** `/?testparam=123123`
**结果：**参数正常！

```
array(1) { ["testparam"]=> string(6) "123123" } object(Zend\Stdlib\Parameters)#88 (1) { ["storage":"ArrayObject":private]=> array(1) { ["testparam"]=> string(6) "123123" } } array(2) { ["controller"]=> string(28) "Application\Controller\Index" ["action"]=> string(5) "index" } 
```

这些都不起作用我只收到带有这个 URL 的 NULL 值：`/test?testparam=testvalue`

如果我提出这个请求，它会起作用：`/?xxx=xycvxcv`

（但我需要从内部获取参数`testAction()`）

我确实重新安装了骨架应用程序->相同的结果（仅在`indexAction`（“home-route”）内可以获得请求参数...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:37:45.090

如果您使用流动路由，第一种和第二种方法应该适合您：

```
'home' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route' => '/',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Index',
                        'action' => 'index',
                    ),
                ),
            ), 
```

**网址： `http://localhost/project/public/?ad=23`**

var_dump：

> 数组“广告”=> 字符串“23”（长度=2）
> 
> 对象（Zend\Stdlib\Parameters）[106] 公共“广告”=> 字符串“23”（长度=2）

**编辑 ** : 也许你应该从数组中删除 'may_terminate' 子句

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-11T05:52:18.143

```
   Query qoute 部分 (Zend\Mvc\Router\Http\Query) 已弃用
    将您的配置更改为如下所示
     '测试' => 数组（
                '类型' => '文字'，
                '选项' => 数组（
                    '路线' => '/测试',
                    '默认值' => 数组（
                           '控制器' => '应用程序\控制器\索引'，
                           '行动' => '测试',
                    ),
                )

```

# mysql - Mysql比较两个表中的两列

> ID：15414788
> 
> 赞同：1
> 
> 时间：2013-03-14T16:25:09.513
> 
> 标签：mysql, database, xampp, relational-database

我有 2 张桌子，即 Products & Purchase：

```
products: id, productname, quantityleft.

purchase:id, productname, quantity. 
```

**产品表**- 将购买所有新产品。这意味着表产品中不会存在相同的产品名称。所有独特产品的列表

**PURCHASE TABLE** - 具有唯一 Purchase_ID 的所有购买产品的列表。

这是我的场景/问题：

*   如果我想在**PURCHASE**中添加或插入值，表**PRODUCTS将获取****购买**的所有值，但仅当*购买*中的**产品**名称不存在于产品的“产品名称”中时。

*   如果*productname* **购买**已经存在于*productname* **products**中，则 products 中的**数量**将*加上*具有相同*productname*的**购买***数量*的值。

 ******到目前为止，我之前还没有遇到过这种情况，但如果我得到了这个，我很容易编写这个代码。我现在想的是使用，`distinct`但我知道这不是正确的做法。你能建议我实现这一目标的最佳和正确方法吗？除了我真的一无所知，我不能用谷歌搜索它。希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:55:28.243

好吧，我将按照以下方式
更改场景，

```
products: id, productname.  
purchase: id, productname, quantity, prd_id. 
```

购买的物品；检查**产品中是否存在名称**
如果不存在
- 分配新**产品 ID**
- 插入**产品**和**购买**表。
否则，如果现有商品已购买（检查产品 ID）
-**产品**表中没有任何内容 -**购买**时
更新**数量+当前数量** **`where prd_id = products.id`********

# c# - 完全 ASP.NET 样式的 AppDomain 程序集隔离

> ID：15414791
> 
> 赞同：0
> 
> 时间：2013-03-14T16:25:16.973
> 
> 标签：c#, appdomain

我正在为需要健壮的自动化调度程序编写插件架构，因此我正在尝试执行 ASP.NET/IIS 样式的 AppDomains——即每个 AppDomain 都被真正视为其自己的不同应用程序，之间没有共享对象他们。

我正在设置`ApplicationBase`,`ConfigurationFile`和`ShadowCopyFiles`在`AppDomainSetup`.

我为每个插件加载的自动化调度程序中有一个通用程序集——它处理加载插件的主程序集、捕获未捕获的异常和日志记录。我发现这种方法有一些弱点：

*   通过设置`ApplicationBase`插件的存储位置，将不再解析公共程序集（位于不同路径中）的任何依赖项。我通过挂钩`AssemblyResolve`事件来解决这个问题，但这会导致其他问题。

*   通用程序集和插件可能都引用了它们自己的同名程序集的副本——可能每个都有不同的版本。或者可能是同名但内容完全不同的程序集。覆盖`AssemblyResolve`，插件的副本将始终首先加载。

*   并不是真的担心这个，但从安全的角度来看，我认识到插件可能会覆盖调度程序的依赖关系，导致它做一些邪恶的事情，或者反映到公共程序集中并进入内部。

所以我决定，也许正确地做到这一点的唯一方法就是不这样做——强制一个干净的分离并且不将任何程序集加载到 AppDomain 中。我不确定最好的方法是什么，或者即使它是最好的方法。

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:16:32.527

我不确定这是否能准确回答您的问题，但我们有一个类似的设置，其中我们有一个独立的子 AppDomain 和一个共享 DLL 文件夹，我们在不使用 AssemblyResolve 的情况下取得了成功。

我们的文件结构是：

```
[PathToApplication]\OurApplication.exe
[PathToApplication]\AddIns\[SharedAssemblies]\*.dll
[PathToApplication]\AddIns\[FirstAddIn]\*.dll
[PathToApplication]\AddIns\[SecondAddIn]\*.dll 
```

方括号中的部分被实际路径替换。

在我们的例子中，共享程序集也由主 AppDomain 加载，因此我们在主 AppDomain 中进行`App.config`如下设置。

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <probing privatePath="AddIns\[SharedAssemblies]" />
  </assemblyBinding>
</runtime> 
```

确保共享程序集不存在于主可执行文件旁边，否则它将从那里加载它们，并且会默默地停止在所有 AppDomain 之间共享内存中的 DLL。

然后，对于每个加载项的 AppDomain，我们对其进行了配置，因此基本路径是加载项文件夹和共享文件夹上方的文件夹，并设置了私有 bin 路径，以便它以正确的顺序搜索正确的子文件夹：

```
var basePath = @"[PathToApplication]\AddIns";

var configFile = Path.Combine(
        basePath, 
        addInFolder, 
        addInAssemblyName + ".dll.config");

var binPaths = new [] { "[SharedAssemblyFolder]", addInFolder };

setup = new AppDomainSetup
{
    ApplicationBase = basePath,
    ConfigurationFile = configFile,
    LoaderOptimization = LoaderOptimization.MultiDomain,
    PrivateBinPath = string.Join(";", binPaths),
    PrivateBinPathProbe = string.Empty,
}; 
```

这样，它总是首先搜索共享文件夹，因此即使加载项提供了自己的同名 DLL，它也会被忽略。

我们`[System.LoaderOptimization(LoaderOptimization.MultiDomain)]`在应用程序入口点上使用 set 运行它，并验证了 DLL 实际上是在内存中共享的（很容易出错并默默地阻止这种情况发生）。

希望这在某种程度上有所帮助。

# asp.net-mvc-4 - 浏览器后退按钮问题 iasp.net MVC4

> ID：15414793
> 
> 赞同：0
> 
> 时间：2013-03-14T16:25:20.740
> 
> 标签：asp.net-mvc-4, browser-cache, back-button

我正在使用以下代码行在注销后禁用浏览器后退按钮问题`asp.net MVC4.`

```
[OutputCache(NoStore = false, Duration = 0, VaryByParam = "None")] 
        public ActionResult Logout()
        {
            try
            {
                if (Session["username"] != null)
                {
                    Session.Abandon();
                    Session.Clear();
                    Session.RemoveAll();
                    Session["username"] = null;
                    Response.Cache.SetCacheability(HttpCacheability.NoCache);
                    Response.Cache.SetExpires(DateTime.UtcNow.AddHours(-1));
                    Response.Cache.SetNoStore();
                    return RedirectToAction("Index", "AdminPanel");
                }

               return RedirectToAction("Error", "Home");
            }
            catch (Exception e)
            {
                return RedirectToAction("Error", "Home");
            }
        } 
```

但是，这段代码有一个问题，假设我有三个页面，第一个是登录页面`(Index.cshtml)`，第二个页面是成功登录页面`(home.cshtml)`，第三个页面是关于页面`(about.cshtml)`，现在我登录然后它会在页面上重定向我，`home.cshtml`因为我继续前进第三页 about.cshtml 之后我从`about.cshtml`页面注销，它将我重定向到`login.cshtml`页面上。现在，如果我单击浏览器后退按钮，然后`about.cshtml`再次将我重定向到页面上，但用户无法更改或添加任何内容。所以让我知道是否有任何适当的代码或方法来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:37:50.503

如果您将它放在呈现 about.cshtml 的控制器方法中，它将按照您的描述工作：

```
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetExpires(DateTime.UtcNow.AddHours(-1));
Response.Cache.SetNoStore(); 
```

不太理想，但会让你走上正轨。基本上，浏览器从他们登录时就缓存了 about.cshtml。告诉 logout 方法不要缓存响应并没有多大作用，因为它执行的是重定向而不是渲染。

# asp.net - asp页面中的updatecommand不起作用

> ID：15414800
> 
> 赞同：2
> 
> 时间：2013-03-14T16:25:38.700
> 
> 标签：asp.net, sqldatasource, templatefield, updatecommand

好的，我通过使用更新参数而不是将模板字段放在我的网格视图而不是绑定字段上解决了我的最后一个问题。

它显示正常，唯一的问题是更新按钮似乎不起作用。当我单击它时，它只是返回到上一个窗口而不更新数据库中的数据字段。

你能看看下面的代码并告诉我我是否在这里遗漏了什么吗？谢谢....

# 在职的：

```
 <asp:GridView DataKeyNames="BenutzerID" ID="grdBenutzer" runat="server" Visible="False" AutoGenerateColumns="False" DataSourceID="SqlDataSource1" OnRowCommand="GridView1_RowCommand">
            <Columns>
                <asp:BoundField ReadOnly="true" DataField="BenutzerID" HeaderText="ID" />
                <asp:TemplateField HeaderText="Titel">
                    <ItemTemplate>
                        <%# Eval("Titel")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtTitel" Text='<%# Bind("Titel")%>'></asp:TextBox>
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Bezeichnung">
                    <ItemTemplate>
                        <%# Eval("Bezeichnung")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:DropDownList AppendDataBoundItems="true" runat="server" ID="ddwnBezeichnung" Text='<%# Bind("Bezeichnung")%>'>
                            <asp:ListItem Text="Mitarbeiter" Value="Mitarbeiter"></asp:ListItem>
                            <asp:ListItem Text="Praktikant" Value="Praktikant"></asp:ListItem>
                            <asp:ListItem Text="Azubi" Value="Azubi"></asp:ListItem>
                            <asp:ListItem Text="Umschüler" Value="Umschüler"></asp:ListItem>
                        </asp:DropDownList>
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Vorname">
                    <ItemTemplate>
                        <%# Eval("Vorname")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtVorname" Text='<%# Bind("Vorname")%>'/>
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Nachname">
                    <ItemTemplate>
                        <%# Eval("Nachname")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtNachname" Text='<%# Bind("Nachname")%>'/>
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:BoundField ReadOnly="true" HeaderText="Geburtsdatum" DataField="Geburtsdatum" />
                <asp:BoundField ReadOnly="true" HeaderText="Geburtsort" DataField="Geburtsort" />
                <asp:TemplateField HeaderText="Straße">
                    <ItemTemplate>
                        <%# Eval("Straße")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtStraße" Text='<%# Bind("Straße")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Nationalität">
                    <ItemTemplate>
                        <%# Eval("Nationalität")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtNationalität" Text='<%# Bind("Nationalität")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Hausnummer">
                    <ItemTemplate>
                        <%# Eval("Hausnummer")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtHausnummer" Text='<%# Bind("Hausnummer")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="PLZ">
                    <ItemTemplate>
                        <%# Eval("PLZ")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtPLZ" Text='<%# Bind("PLZ")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Ort">
                    <ItemTemplate>
                        <%# Eval("Ort")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtOrt" Text='<%# Bind("Ort")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Land">
                    <ItemTemplate>
                        <%# Eval("Land")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:DropDownList AppendDataBoundItems="true" runat="server" ID="ddwnLand" Text='<%# Bind("Land")%>'>

                        </asp:DropDownList>
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Mobil">
                    <ItemTemplate>
                        <%# Eval("Mobil")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtMobil" Text='<%# Bind("Mobil")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:BoundField ReadOnly="true" DataField="Status" HeaderText="Status" />
                <asp:TemplateField HeaderText="Benutzerart">
                    <ItemTemplate>
                        <%# Eval("Benutzerart")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:DropDownList AppendDataBoundItems="true" runat="server" ID="ddwnBenutzerart" Text='<%# Bind("Benutzerart")%>'>
                            <asp:ListItem Text="Mitarbeiter" Value="Mitarbeiter"></asp:ListItem>
                            <asp:ListItem Text="Geschäftsführung" Value="Geschäftsführung"></asp:ListItem>
                            <asp:ListItem Text="Führungskraft" Value="Führungskraft"></asp:ListItem>
                            <asp:ListItem Text="Administrator" Value="Administrator"></asp:ListItem>
                        </asp:DropDownList>
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Homepage">
                    <ItemTemplate>
                        <%# Eval("Homepage")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtHomepage" Text='<%# Bind("Homepage")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Email">
                    <ItemTemplate>
                        <%# Eval("Email")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtEmail" Text='<%# Bind("Email")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Festnetz">
                    <ItemTemplate>
                        <%# Eval("Festnetz")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtFestnetz" Text='<%# Bind("Festnetz")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Fax">
                    <ItemTemplate>
                        <%# Eval("Fax")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtFax" Text='<%# Bind("Fax")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Urlaubstage">
                    <ItemTemplate>
                        <%# Eval("UrlaubstageInsgesamt")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox runat="server" ID="txtUrlaubstageInsgesamt" Text='<%# Bind("UrlaubstageInsgesamt")%>' />
                    </EditItemTemplate>                        
                </asp:TemplateField>
                <asp:CommandField HeaderText="Ändern" ButtonType="Button" ShowEditButton="true" ShowCancelButton="true" />
                <asp:CommandField HeaderText="Neu" ButtonType="Button" ShowInsertButton="true" />
                <asp:CommandField HeaderText="Archivieren" ButtonType="Button" ShowDeleteButton="true"/>
            </Columns>
        </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:43:04.973

在您`EditItemTemplate`的 s 中到处都有以下代码：

```
Text='<%# Eval("fieldName")%>' 
```

您需要将其更改为：

```
Text='<%# Bind("fieldName")%>' 
```

`Eval`用于单向（只读）数据绑定。您需要双向数据绑定，以便更新数据库值。

* * *

您还需要在您[`DataKeyNames`的](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeynames.aspx)`GridView`：

```
<asp:GridView ID="grdBenutzer" runat="server" Visible="False" AutoGenerateColumns="False" DataSourceID="SqlDataSource1" OnRowCommand="GridView1_RowCommand" DataKeyNames="BenutzerID" > 
```

根据文档（上面链接），这是自动更新功能正常工作所必需的：

> 使用 DataKeyNames 属性指定表示数据源主键的一个或多个字段。您必须设置 DataKeyNames 属性才能使 GridView 控件的自动更新和删除功能起作用。

# c# - gridview 中的最后一行没有到达 rowCommand 代码块

> ID：15414801
> 
> 赞同：1
> 
> 时间：2013-03-14T16:25:39.187
> 
> 标签：c#, asp.net, webforms

我有一个将 rowCommand 设置为其中一列的 gridview。一切正常，但我在 gridview 中的每一行都遇到了这个奇怪的错误。RowCommand 块不执行。除最后一行外，所有其他行都有效。如果我对网格视图进行排序并且最后一行位于顶部，则它可以正常工作，但是任何行都位于底部，再次无法正常工作。

```
<asp:GridView id="gvSchedules" runat="server" AutoGenerateColumns="False"
DataSourceID="odsSchedules" AllowPaging="True" AllowSorting="True" EmptyDataText="gvSchedules"
OnRowCommand="gvSchedules_RowCommand" CssSelectorClass="NormalGridView"
EnableViewState="false">
<Columns>
    <asp:TemplateField SortExpression="ScheduleName" HeaderText="gvSchedulesName">
        <ItemStyle Width="100%"></ItemStyle>
        <HeaderStyle Wrap="false" />
        <ItemTemplate>
            <asp:hyperlink id="lnkEdit" runat="server" NavigateUrl='<%# EditUrl("ScheduleID", Eval("ScheduleID").ToString(), "edit", "SpaceID=" + PanelSecurity.PackageId) %>'>
                <%# PortalAntiXSS.Encode((string)Eval("ScheduleName")) %>
            </asp:hyperlink>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField SortExpression="ScheduleTypeID" HeaderText="gvSchedulesType"
        ItemStyle-Wrap="false" HeaderStyle-Wrap="false">
        <ItemTemplate>
            <%# GetSharedLocalizedString("ScheduleType." + Eval("ScheduleTypeID").ToString()) %>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:BoundField DataField="NextRun" SortExpression="NextRun" HeaderText="gvSchedulesNextRun"
        ItemStyle-Wrap="false" HeaderStyle-Wrap="false"></asp:BoundField>
    <asp:BoundField DataField="LastRun" SortExpression="LastRun" HeaderText="gvSchedulesLastRun"
        ItemStyle-Wrap="false" HeaderStyle-Wrap="false"></asp:BoundField>
    <asp:TemplateField HeaderText="gvSchedulesStatus" ItemStyle-Wrap="false">
        <ItemTemplate>
            <asp:ImageButton ID="cmdStart" runat="server" ToolTip="Start" SkinID="StartMedium" Visible='<%# !IsScheduleActive((int)Eval("StatusID")) %>'
                CommandName="start" CommandArgument='<%# Eval("ScheduleID") %>' />
            <asp:ImageButton ID="cmdStop" runat="server" ToolTip="Stop" SkinID="StopMedium" Visible='<%# IsScheduleActive((int)Eval("StatusID")) %>'
                CommandName="stop" CommandArgument='<%# Eval("ScheduleID") %>' />
            <%# GetScheduleStatus((int)Eval("StatusID")) %>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="gvSchedulesResult" HeaderStyle-Wrap="false" ItemStyle-Width="150px">
        <ItemTemplate>
            <%# GetAuditLogRecordSeverityName((int)Eval("LastResult"))%>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField SortExpression="PackageName" HeaderText="gvSchedulesSpace">
        <ItemStyle Wrap="False"></ItemStyle>
        <ItemTemplate>
            <asp:hyperlink id="lnkSpace" runat="server"
                NavigateUrl='<%# GetSpaceHomePageUrl((int)Eval("PackageID")) %>'>
                <%# Eval("PackageName") %>
            </asp:hyperlink>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField SortExpression="Username" HeaderText="gvSchedulesUser">
        <ItemStyle Wrap="False"></ItemStyle>
        <ItemTemplate>
            <asp:hyperlink id="lnkUser" runat="server"
                NavigateUrl='<%# GetUserHomePageUrl((int)Eval("UserID")) %>'>
                <%# Eval("Username") %>
            </asp:hyperlink>
        </ItemTemplate>
        <HeaderStyle Wrap="False" />
    </asp:TemplateField>
</Columns>
</asp:GridView>
<div class="GridFooter">
    <asp:Label ID="lblScheduledTasks" runat="server" meta:resourcekey="lblScheduledTasks" Text="Scheduled Tasks:"></asp:Label>
    <uc4:Quota ID="quotaTasks" runat="server" QuotaName="OS.ScheduledTasks" />
</div>

<asp:ObjectDataSource ID="odsSchedules" runat="server" EnablePaging="True" SelectCountMethod="GetSchedulesPagedCount"
    SelectMethod="GetSchedulesPaged" SortParameterName="sortColumn" TypeName="WebsitePanel.Portal.SchedulesHelper" OnSelected="odsSchedules_Selected">
    <SelectParameters>
        <asp:ControlParameter ControlID="chkRecursive" Name="recursive" PropertyName="Checked" />
        <asp:ControlParameter ControlID="searchBox" Name="filterColumn" PropertyName="FilterColumn" />
         <asp:ControlParameter ControlID="searchBox" Name="filterValue" PropertyName="FilterValue" />
    </SelectParameters>
</asp:ObjectDataSource> 
```

和我的服务器端代码

```
protected void Page_Load(object sender, EventArgs e)
        {
            Response.Write("zarejdame stranitsata <br />");
            //BindServerTime();

            // set display preferences
            gvSchedules.PageSize = UsersHelper.GetDisplayItemsPerPage();

            if (!IsPostBack)
            {

                chkRecursive.Visible = (PanelSecurity.EffectiveUser.Role != UserRole.User);
                // toggle controls
                //btnAddItem.Enabled = PackagesHelper.CheckGroupQuotaEnabled(
                 //   PanelSecurity.PackageId, ResourceGroups.Statistics, Quotas.STATS_SITES);

                searchBox.AddCriteria("ScheduleName", GetLocalizedString("Text.ScheduleName"));
                searchBox.AddCriteria("Username", GetLocalizedString("Text.Username"));
                searchBox.AddCriteria("FullName", GetLocalizedString("Text.FullName"));
                searchBox.AddCriteria("Email", GetLocalizedString("Text.Email"));

                bool isUser = PanelSecurity.SelectedUser.Role == UserRole.User;
                gvSchedules.Columns[gvSchedules.Columns.Count - 1].Visible = !isUser;
                gvSchedules.Columns[gvSchedules.Columns.Count - 2].Visible = !isUser;
                Response.Write("page load za parvi pat<br />");
            }

            Response.Write("krai na page load<br />");
        }

protected void odsSchedules_Selected(object sender, ObjectDataSourceStatusEventArgs e)
        {
            if (e.Exception != null)
            {
                ProcessException(e.Exception);
                e.ExceptionHandled = true;
            }
        }

protected void gvSchedules_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        Response.Write("1111");
        Response.Write("aaaa " + e.CommandArgument + "<br />");
        int scheduleId = Utils.ParseInt(e.CommandArgument.ToString(), 0);
        if (e.CommandName == "start")
        {
            Response.Write("start schedule<br />");
            try
            {
                int result = ES.Services.Scheduler.StartSchedule(scheduleId);
                if (result < 0)
                {
                    ShowResultMessage(result);
                    return;
                }
            }
            catch (Exception ex)
            {
                ShowErrorMessage("SCHEDULE_START_TASK", ex);
                return;
            }
        }
        else if (e.CommandName == "stop")
        {
            try
            {
                int result = ES.Services.Scheduler.StopSchedule(scheduleId);
                if (result < 0)
                {
                    ShowResultMessage(result);
                    return;
                }
            }
            catch (Exception ex)
            {
                ShowErrorMessage("SCHEDULE_STOP_TASK", ex);
                return;
            }
        }

        // rebind grid
        gvSchedules.DataBind();
    } 
```

我的 PageLoad 中没有任何内容。通过调试，我可以看到输入触发了最后一行的回发，它到达了页面加载，但从未到达 rowCommand 代码块。Response.Write("1111"); 永远不会出现。任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:29:23.527

你可以`OnRowCommand="gvSchedules_RowCommand"`在你的gridview上添加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T07:41:27.863

我也遇到了类似的问题，我得到了原因。您的问题可能已经解决，但我在这里写它，因为它可能会帮助其他陷入同样情况的人。

onrowcommand 事件将自身与网格的行索引相关联，这有助于跟踪单击了哪一行。

如果在绑定数据后将任何标题或行添加到网格中，则行索引会更改，并且 rowcommand 将仅对找到索引的那些行执行。

就我而言，我添加了一个标题，并且 rowindex 偏移了一个。这就是它在最后一行找不到 rowcommand 控件的原因。可能这也是你的问题。

要解决它，请在 onrowcreated 事件期间添加标题，这不会弄乱行索引。

# sitecore - Sitecore 安装名称不是唯一错误

> ID：15414802
> 
> 赞同：5
> 
> 时间：2013-03-14T16:25:42.310
> 
> 标签：sitecore

我试图设置一个 Sitecore 开发实例，但我不小心安装到了错误的路径。解决此问题的最简单方法似乎是删除 IIS 实例，并删除 Sitecore DB。

不幸的是，当我尝试卸载时出现错误（“错误导致 Sitecore 安装向导过早结束”），当我尝试安装新实例时出现“不是唯一名称”错误。我需要做什么才能让我再次使用相同的实例名称？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T18:31:40.487

所以，@OptimizedQuery 帮了我大忙，直到 Windows 卸载程序停止工作。然后我进入注册表，在这里找到了相关条目`[HKEY_LOCAL_MACHINE\SOFTWARE\Sitecore CMS]`。

所以，这里有一个步骤列表。

1.  尝试使用 Sitecore 安装程序并选择删除有问题的实例。
2.  如果失败，请在`Programs and Features`应用程序中使用卸载程序之前手动将其从 IIS 中删除并删除数据库。
3.  如果失败，请使用`regedit`并删除`[HKEY_LOCAL_MACHINE\SOFTWARE\Sitecore CMS]`. 确保只删除具有匹配`InstanceName`键的那个。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T16:46:36.170

尝试通过控制面板中的 Windows 程序和功能对话框卸载该 Sitecore 实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-09T17:42:04.930

@cwallenpoole 路径错误。Sitecore 安装在不同的位置，如下所示：

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Sitecore CMS]

因此，卸载步骤如下所示：

1.  尝试使用 sitecore 安装程序卸载并选择要卸载的实例
2.  尝试从“控制面板”>“程序和功能”中删除，然后选择要删除或卸载的实例
3.  如果以上步骤都失败，则进入注册表，选择路径[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Sitecore CMS]，然后选择要卸载的实例

希望，它适用于大多数情况。如果您发现更多步骤，请添加这些步骤：）祝您卸载愉快！

# java - Red Hat Linux 上的 Spring 问题

> ID：15414803
> 
> 赞同：1
> 
> 时间：2013-03-14T16:25:42.990
> 
> 标签：java, linux, spring, jar, oracle11g

我是 Spring 3.x 的新手，使用 Spring 3.x 的应用程序在 Solaris10 上运行良好，并带有我从[Spring Source Site](http://www.springsource.org/download/community?project=Spring%2520Framework&version=3.0.3.RELEASE)下载的捆绑 jar 。想知道相同的 jar 集是否也适用于 Red Hat linux 以及独立应用程序？我问这个的原因是因为我`java.net.SocketException: Connection reset`在使用 Spring Jdbc 模板进行数据库操作期间看到。是`org.springframework.jdbc-3.0.3.RELEASE`特定平台的吗？请注意，非 Spring 应用程序可以正常工作。如果有人能对此有所了解，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:27:25.960

不，对我来说，Spring 3.2.1 在 RedHat 上运行良好。

我认为您有一些与网络相关或与数据库相关的问题。

# opengl-es - 如何在 OpenGL 中使两个平滑形状相交？

> ID：15414808
> 
> 赞同：4
> 
> 时间：2013-03-14T16:25:52.747
> 
> 标签：opengl-es, opengl-es-2.0, alpha, masking, blending

我已经成功地在 OpenGL 中绘制了两个平滑的形状，使用一个生成三角形条带的例程，该三角形条带的最外边线的所有顶点都位于`alpha 0`. 现在我想将它们相交，但我似乎总是失去一个形状的光滑边缘。这是我正在使用的代码：

```
// Draw: smooth black shape as normal

glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_TRUE);
// Draw: smooth black shape into alpha channel

glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);
glBlendFunc(GL_DST_ALPHA, GL_SRC_ALPHA);
// Draw: Yellow overlay shape with black shape's alpha

// Reset blending modes for rest of program 
```

[![组合形状](../Images/461e1d217a735b9944fb0d3536195a5e.png)](https://i.stack.imgur.com/AYHri.jpg)

这是结果（在底部）——黄色形状失去了平滑的右侧边缘，因为这些像素中的 alpha 现在为 1。我怎样才能获得平滑的相交形状？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:11:01.077

你需要这样的片段：

```
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
glBlendEquation(GL_FUNC_ADD);
glEnable(GL_BLEND); 
```

我认为一个关键要素是 glEnable(GL_BLEND)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T07:29:55.653

我为这个问题苦苦挣扎了很长时间，并尝试了每个绘图顺序和和的`glColorMask`组合`glBlendEquation`。最后我意识到有一个非常简单的解决方案——预乘 alpha。

`alpha=0`在我的“平滑形状”绘图例程中，我允许指定外部平滑颜色，而不是将外部平滑边缘绘制为相同颜色。对于黄色形状，我指定了黑色，这给了我一个平滑的边缘，同时整个形状也有一个平滑的边缘——即使黄色形状的右侧边缘没有被 Alpha 通道掩盖。

# sql - 如果第一列值相同，则连接第二列值

> ID：15414809
> 
> 赞同：-1
> 
> 时间：2013-03-14T16:25:52.600
> 
> 标签：sql, oracle, string-aggregation

我有一个如下查询并列出了它的输出：

```
SELECT DISTINCT TRACKING_NUM,TITLE_OF_DOC_SEC 
FROM some_table  
WHERE  TRACKING_NUM IS NOT NULL; 
```

o/p：

```
TRACKING_NUM   TITLE_OF_DOC_SEC
007            Email Flow
007            Test Bug 53306
007            Title 1119
007            Title Test
007            test bug
009            1156
089            Title 21173
098            test Doc Section 
```

我想重新编写查询，以便得到这样的输出：

```
TRACKING_NUM    TITLE_OF_DOC_SEC
007             Email Flow,Test Bug 53306,Title 1119,Title Test,test bug
009             1156
089             Title 21173
098             test Doc Section 
```

谁能帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:30:21.093

在 11g 中使用 Listagg() 或在 10g 中使用 WM_Concat()：

```
 SELECT LISTAGG(TITLE_OF_DOC_SEC, ',') WITHIN GROUP (ORDER BY TRACKING_NUM) AS TITLE_OF_DOC_SEC 
     FROM your table
    WHERE....

   SELECT WM_CONCAT(TITLE_OF_DOC_SEC) AS TITLE_OF_DOC_SEC
     FROM your table
    WHERE.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:30:24.273

如果您使用的是 Oracle 11g+，那么您可以使用[`LISTAGG()`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)：

```
SELECT TRACKING_NUM,
  LISTAGG(TITLE_OF_DOC_SEC, ', ') WITHIN GROUP (ORDER BY TRACKING_NUM) AS TITLE_OF_DOC_SEC 
FROM some_table  
WHERE  TRACKING_NUM IS NOT NULL
GROUP BY TRACKING_NUM; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/edeae/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T16:38:36.867

在 11g Listagg 中是最好的选择：

```
SQL> select tracking_num,
  2         listagg(title_of_doc_sec,',') within group (order by title_of_doc_sec) title_of_doc_sec
  3    from (select distinct tracking_num , title_of_doc_sec from some_table)
  4   group by tracking_num;

TRA TITLE_OF_DOC_SEC
--- ----------------------------------------------------------------------
007 Email Flow,Test Bug 53306,Title 1119,Title Test,test bug
009 1156
089 Title 21173
098 test Doc Section 
```

10g 你可以使用`wm_concat`（但请注意这没有记录）：

```
SQL> select tracking_num,
  2         wm_concat(title_of_doc_sec) title_of_doc_sec
  3    from (select distinct tracking_num , title_of_doc_sec from some_table)
  4   group by tracking_num;

TRA TITLE_OF_DOC_SEC
--- ----------------------------------------------------------------------
007 Title Test,test bug,Title 1119,Email Flow,Test Bug 53306
009 1156
089 Title 21173
098 test Doc Section 
```

甚至是示范条款：

```
SQL> with data as (select distinct tracking_num , title_of_doc_sec from some_table)
  2  select tracking_num, title_of_doc_sec
  3    from (select *
  4            from data
  5          model
  6          partition by (tracking_num)
  7          dimension by (row_number() over (partition by tracking_num order by title_of_doc_sec) rn)
  8          measures (title_of_doc_sec t, cast(null as varchar2(4000)) title_of_doc_sec,
  9                    count(*) over (partition by tracking_num) cnt)
 10          rules(
 11            title_of_doc_sec[any] = case when t[cv() - 1 ] is null
 12                                        then t[cv()]
 13                                        else title_of_doc_sec[cv()-1]||', '|| t[cv()]
 14                                      end
 15          ))
 16   where cnt = rn;

TRA TITLE_OF_DOC_SEC
--- ----------------------------------------------------------------------
007 Email Flow, Test Bug 53306, Title 1119, Title Test, test bug
009 1156
089 Title 21173
098 test Doc Section 
```

# configuration - Nginx 中的 $host 和 $http_host 有什么区别

> ID：15414810
> 
> 赞同：206
> 
> 时间：2013-03-14T16:25:54.447
> 
> 标签：configuration, nginx, http-headers

在 Nginx 中，变量`$host`和`$http_host`.

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2013-03-14T16:25:54.447

`$host`是[核心](https://nginx.org/en/docs/http/ngx_http_core_module.html#var_host)模块的变量。

> $主机

> 如果 Host 标头不可用，此变量等于请求标头中的行 Host 或处理请求的服务器的名称。

> 在这种情况下，此变量可能与 $http_host 具有不同的值： 1）当 Host 输入标头不存在或具有空值时，$host 等于 server_name 指令的值；2）当 Host 的值包含端口号时，$host 不包含该端口号。从 0.8.17 开始，$host 的值总是小写。

`$http_host`也是同一个模块的一个变量，但你不会用那个名字找到它，因为它通常被定义为`$http_HEADER`( [ref](https://nginx.org/en/docs/http/ngx_http_core_module.html#var_http_) )。

> $http_HEADER

> HTTP 请求头 HEADER 的值，当转换为小写并且将“破折号”转换为“下划线”时，例如 $http_user_agent, $http_referer...;

* * *

总结：

*   `$http_host`始终等于`HTTP_HOST`请求标头。
*   `$host`等于`$http_host`，**小写且不带端口号**（如果存在），**除非`HTTP_HOST`不存在或为空值**。在这种情况下，`$host`等于`server_name`处理请求的服务器的指令的值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2021-04-23T08:50:05.273

接受的答案及其评论似乎不正确（不再）。文档（[http://nginx.org/en/docs/http/ngx_http_core_module.html#var_host](http://nginx.org/en/docs/http/ngx_http_core_module.html#var_host)）说`$host`是

> 按此优先顺序：请求行中的主机名，或“主机”请求标头字段中的主机名，或与请求匹配的服务器名

标题字段`$http_host`的值也是如此。`Host`如果请求行（如果指定）中的主机与`Host`标头字段不同，它们可能会有所不同。或者，如果`Host`未设置标题。

`server_name`仅匹配`Host`标头字段（[http://nginx.org/en/docs/http/request_processing.html](http://nginx.org/en/docs/http/request_processing.html)），因此`$host`可能与匹配的`server_name`.

# java - 如何调用具有接口作为参数的方法？

> ID：15414813
> 
> 赞同：3
> 
> 时间：2013-03-14T16:25:57.557
> 
> 标签：java

我在一个类中有以下方法：

```
public void Process(Measurable x)
{
    String y = x.getResult();

    for (int k = 0; k<item.length; k++)
    {
        if (y.equals(item[k])) tally[k]++;
    }
} 
```

我的问题是，如何调用 Process 方法？调用它

```
Process(Measurable y); 
```

在默认构造函数或驱动程序类中不起作用，也不会在没有参数的情况下调用它（如我所料）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:31:39.690

```
// How to call your Process method
Measureable y = new ConcreteMeasureable()
Process(y);

// Assuming you have something like this... 
class ConcreteMeasureable implements Measureable
{
    @Override
    public String getResult()
    {
        return "something here";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:32:22.793

您需要创建一个实现的对象`Measurable`：

```
public class Test {
  public static void main(String args[]) {
    new Test().test();
  }

  public interface Measurable {
    String getResult();
  }

  // Here to make `Process` compile.
  String[] item;
  int[] tally;

  public void Process(Measurable x) {
    String y = x.getResult();

    for (int k = 0; k < item.length; k++) {
      if (y.equals(item[k])) {
        tally[k]++;
      }
    }
  }

  static class M implements Measurable {

    @Override
    public String getResult() {
      return "M";
    }

  }

  public void test() {
    // Create an Object on the fly that implements Measurable (in a rather silly way).
    Process(new Measurable() {

      @Override
      public String getResult() {
        return "Hello";
      }

    });
    // Do it a bit more normally.
    Process(new M());
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T16:30:05.667

用实现接口`Process`的类的实例调用方法；`Measurable`即使是[匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)也可以。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T16:30:43.673

`Measurable`你可以用一个实现接口的类来调用它。例如：

假设您有课程：

```
class Foo implements Measurable {
    @Overrride
    public String getResult(){ return "bar"; }
} 
```

然后你可以这样调用`Process`：

```
Process(new Foo()); 
```

这利用了称为[多态](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)的面向对象编程思想。

人们还提到您可以像这样使用[匿名内部类](https://stackoverflow.com/questions/355167/how-are-anonymous-inner-classes-used-in-java)：

```
Process(new Measurable(){
    @Override
    public String getResult() {
        return "hey!";
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T16:29:52.970

[您可以使用polymorphism](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)将实现接口的对象视为接口类型，即使您不能直接实例化它的对象。

例如，如果`Measurable`是一个接口，我们有一个这样的类：

```
public class MeasuredObject implements Measurable {
    ...
} 
```

然后我们可以执行以下操作：

```
MeasuredObject object = new MeasuredObject();
Measurable measurableObject = (Measurable) object; 
```

这应该表明调用您的方法是可能的。

```
Process(measurableObject); 
```

虽然显式类型转换不是必需的，但它应该有助于说明这个概念。

*（附带说明：考虑遵守 Java 编码标准并将您的方法名称改为`camelCase`. 它使您的代码更具可读性。）*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T16:33:58.240

尝试类似：

```
public class Driver {
    public static void main(String...args) {
        Driver driver = new Driver();
        Foo foo = new Foo();
        driver.process(foo);
    }

    public void process(Measurable x) {
        String y = x.getResult();

        for (int k = 0; k<item.length; k++) {
            if (y.equals(item[k])) tally[k]++;
        }
    }

    private class Foo implements Measurable {
        String getResult() {
            /* Do stuff */
        }
    }

    public interface Measurable {
        String getResult();
    }
} 
```

还有一个`y`, `item`, 和`tally`在某处。

PS 在 Java 中，方法名称通常是小写的驼峰式。

# ios - 如何在sqlite中使用GROUP BY有效地获取n个最近的行？

> ID：15414817
> 
> 赞同：4
> 
> 时间：2013-03-14T16:25:59.110
> 
> 标签：ios, sql, sqlite

我有一个事件结果表，我需要为给定的玩家列表获取每个玩家最近的 n 个事件。

这是在 iOS 上，所以它需要很快。我查看了很多使用子查询或连接的 top-n-per-group 解决方案，但即使在 macbook pro 上，这些解决方案对于我的 100k 行数据集也运行缓慢。到目前为止，我的愚蠢解决方案是执行 6 个单独的查询，因为我最多只能运行 6 个玩家。它不是很慢，但必须有更好的方法，对吧？这是我现在正在做的事情的要点：

```
results_by_pid = {} 
player_ids = [1,2,3,4,5,6]
n_results = 6
for pid in player_ids:
  results_by_pid[pid] = exec_sql("SELECT * 
                                  FROM results
                                  WHERE player_id = #{pid}
                                  ORDER BY event_date DESC
                                  LIMIT n_events") 
```

然后我继续我的快乐之路。但是我怎样才能把它变成一个单一的快速查询呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:52:10.470

这不会是一个很大的答案，但这里......

我发现让事情变得非常快可能涉及来自数据和模式本身的性质的想法。例如，搜索有序列表比搜索无序列表要快，但您必须预先支付设计和执行成本。

所以问问自己，你的数据上是否有任何自然分区可能会减少 SQLite 必须搜索的记录数量。您可能会问最近的 n 个事件是否属于特定时间段。它们都来自过去 7 天吗？最后一个月？如果是这样，那么您可以构建查询以在执行更复杂的搜索之前排除整个数据块。

此外，如果你不能让事情快速工作，你可以考虑 UX 诡计！很多工程师对他们的用户体验并不聪明。您的查询会作为视图控制器推送的结果运行吗？然后将事情从 PREVIOUS 视图控制器设置在后台线程中，并让它在 iOS 动画时工作。推送动画需要多长时间？.2 秒？您的用户在什么时候向应用程序（通过一些 UX 控件）指示`playerids`要查询的内容？只要他触摸那个按钮或 TVCell，您就可以预取一些数据。因此，如果您要做的总工作是*O(n log n)*，这意味着您可以将其分解为*O(n)*和*O(log n)*部分。

只是一些想法，而我避免*自己*努力工作。

* * *

***更多想法***

一个包含前 n 个插入的 id 的单独表怎么样？如果表的大小增长到 n 以上，您可以添加一个触发器来删除旧的 id。说..

```
CREATE TABLE IF NOT EXISTS recent_results
   (result_id INTEGER PRIMARY KEY, event_date DATE);
// is DATE a type? I don't know. you get the point

CREATE TRIGGER IF NOT EXISTS optimizer
   AFTER INSERT ON recent_results
   WHEN (SELECT COUNT(*) FROM recent_results) > N
   BEGIN
      DELETE FROM recent_results
      WHERE result_id = (SELECT result_id
                         FROM recent_results
                         WHERE event_date = MIN(event_date));
// or something like that. I have no idea if this will work,
// I just threw it together. 
```

或者，您可以创建一个基于内存的临时表，在应用加载时填充该表，并在应用执行期间执行事务时保持最新。这样，您只需支付一次高昂的价格！

只是给你一些想法。要有创意，记住你通常可以定义你想要的数据结构和算法。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:28:19.573

没有更好的办法。SQLite 中没有实现可能有帮助的 SQL 窗口函数。

SQLite 被设计为嵌入式数据库，其中大部分逻辑都保留在应用程序中。与应避免网络通信的客户端/服务器数据库相比，混合 SQL 命令和程序逻辑没有性能劣势。

一个不那么愚蠢的解决方案需要您事先做一些事情`SELECT player_id FROM somewhere`，这应该不成问题。

为了使单个查询高效，请确保您在两列上有一个索引，`player_id`并且`event_date`.

# ruby - 红宝石确定季节（秋季、冬季、春季或夏季）

> ID：15414831
> 
> 赞同：2
> 
> 时间：2013-03-14T16:26:47.150
> 
> 标签：ruby, datetime

我正在编写一个脚本，该脚本应该根据日期范围确定一年中的“季节”：

例如：

```
January 1 - April 1: Winter
April 2 - June 30: Spring
July 1 - September 31: Summer
October 1 - December 31: Fall 
```

我不确定如何以最好的方式（或最好的红宝石方式）去做这件事。其他人遇到如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T17:28:55.260

9 月 31 日？

正如 leifg 所建议的，这里是代码：

```
require 'Date'

class Date

  def season
    # Not sure if there's a neater expression. yday is out due to leap years
    day_hash = month * 100 + mday
    case day_hash
      when 101..401 then :winter
      when 402..630 then :spring
      when 701..930 then :summer
      when 1001..1231 then :fall
    end
  end
end 
```

一旦定义，就可以这样称呼它：

```
d = Date.today
d.season 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:33:20.363

您可以尝试使用范围和日期对象：

[http://www.tutorialspoint.com/ruby/ruby_ranges.htm](http://www.tutorialspoint.com/ruby/ruby_ranges.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T17:26:16.287

没有范围。

```
 require 'date'

    def season
      year_day = Date.today.yday().to_i
      year = Date.today.year.to_i
      is_leap_year = year % 4 == 0 && year % 100 != 0 || year % 400 == 0
      if is_leap_year and year_day > 60
        # if is leap year and date > 28 february 
        year_day = year_day - 1
      end

      if year_day >= 355 or year_day < 81
        result = :winter
      elsif year_day >= 81 and year_day < 173
        result = :spring
      elsif year_day >= 173 and year_day < 266
        result = :summer
      elsif year_day >= 266 and year_day < 355
       result = :autumn
      end

      return result
    end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-22T08:57:48.623

[尼尔斯莱特的回答](https://stackoverflow.com/a/15416170/210980)方法很棒，但对我来说，这些日期并不完全正确。他们显示秋季将于 12 月 31 日结束，在我能想到的任何情况下都不是这样。

利用[北方气象](https://www.timeanddate.com/calendar/aboutseasons.html)季节：

> *   春季从 3 月 1 日持续到 5 月 31 日；
> *   夏季从 6 月 1 日持续到 8 月 31 日；
> *   秋季（秋季）从 9 月 1 日到 11 月 30 日；和
> *   冬季从 12 月 1 日到 2 月 28 日（闰年的 2 月 29 日）。

代码需要更新为：

```
require "date"

class Date
  def season
    day_hash = month * 100 + mday
    case day_hash
      when 101..300 then :winter
      when 301..531 then :spring
      when 601..831 then :summer
      when 901..1130 then :fall
      when 1201..1231 then :winter
    end
  end
end 
```

# matlab - 如何在matlab中保存多维数组？

> ID：15414840
> 
> 赞同：3
> 
> 时间：2013-03-14T16:27:05.140
> 
> 标签：matlab

我有一个数组`M=(1000000,12,2,2)`。

如何将其写入文件以供以后处理？

```
save('filename.txt','M','-ASCII') 
```

似乎不起作用...

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:28:46.583

为什么不将其保存为 mat 文件（二进制）？

```
save('filename.mat', 'M' ); 
```

之后你只需加载它

```
% some code ...
M = [];
load( 'filename.mat' );
% now you have M
% code handling multi-dim M 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:51:43.073

1）就像@Shai的答案一样，您可以将其保存为mat文件

2）如果你想把它保存为txt文件，你可以这样做：

```
clear;clc;
M=[1000000,12,2,2];
dlmwrite('a.txt',M); % save M to file--a.txt
type a.txt; % print content in a.txt
M = dlmread('a.txt'); % load content of a.txt to M and then you will have 'M=[1000000,12,2,2]' 
```

3) 您也可以使用 fopen、fprintf、fclose 将矩阵保存到文件中。查看这篇文章：[如何在 MATLAB 中将数据保存在 .txt 文件中](https://stackoverflow.com/questions/2925623/how-to-save-data-in-txt-file-in-matlab+)

4）对于您拥有的代码，我对其进行了测试。有用。我的 Matlab 版本是 R2011b。请再次检查您的代码。我用来测试的代码如下：

```
clear;clc;
M=[1000000,12,2,2];

save('b.txt','M','-ASCII');

clear;clc;
M = load('b.txt','-ASCII'); 
```

# c++ - 如果沿函数传递，右值引用是否得到优化？

> ID：15414841
> 
> 赞同：2
> 
> 时间：2013-03-14T16:27:12.393
> 
> 标签：c++, c++11, pass-by-reference, rvalue-reference

我有[简化]代码：

```
class AClass{
public:
    AClass( BigClass && bc ) : m_bc{std::move(bc)} {}

private:
    BigClass m_bc;
};

AClass * aFunction( BigClass && bc ){
    return new AClass( std::move(bc) );
} 
```

有用。但它正确吗？BigClass 数据在调用过程中移动而不创建临时对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:08:53.870

是的，你所拥有的是正确的。您需要使用`std::move`，否则代码将无法编译。原因可能不是很明显。如果我们这样调用你的函数：

```
AClass *a = aFunction(BigClass{}); 
```

`aFunction`使用右值调用，右值是`BigClass`的默认构造函数的返回值。但在内部`aFunction`，变量`bc`是一个**左值**。请记住，如果它有名称，它就是一个左值。为了使用的移动构造函数，我们必须`bc`变成一个右值。`std::move``AClass`

为了更清楚地看到这一点，让我们添加一些打印输出（和一个复制构造函数）到`AClass`：

```
AClass( BigClass & bc ) : m_bc{bc} { std::cout << "Copy\n"; }
AClass( BigClass && bc ) : m_bc{std::move(bc)} { std::cout << "Move\n"; } 
```

如果你离开`std::move`了`aFunction`，你会得到副本。有了它，你就会行动起来。

# java - Maven Cobertura HTML 报告未生成

> ID：15414843
> 
> 赞同：1
> 
> 时间：2013-03-14T16:27:16.267
> 
> 标签：java, html, maven, report, cobertura

我一直在阅读关于 SO 的问题，尽管应用了提到的修复程序，但仍然没有结果。

我只是想要一份关于我的 Cobertura 报道的 html 报告，但在我的任何目标目录中都没有生成任何内容。这是相关的 pom.xml 片段

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

  <build>
    <sourceDirectory>src/main/java</sourceDirectory>
    <plugins>        
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>cobertura-maven-plugin</artifactId>
         <configuration>
        <formats>
          <format>html</format>
        </formats>
      </configuration>
        <executions>
          <execution>
            <goals>
              <goal>clean</goal>
              <goal>check</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>${java-version}</source>
          <target>${java-version}</target>
        </configuration>
      </plugin>     
      <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.2</version>
        <configuration>
          <warSourceDirectory>src/main/webapp</warSourceDirectory>
          <failOnMissingWebXml>true</failOnMissingWebXml>
        </configuration>
      </plugin>
    </plugins>

     <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-site-plugin</artifactId>
          <version>3.2</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-project-info-reports-plugin</artifactId>
          <version>2.6</version>
        </plugin>
       <plugin>
          <groupId>org.codehaus.mojo</groupId>
          <artifactId>cobertura-maven-plugin</artifactId>
          <version>2.5.2</version>
          <configuration>
          <instrumentation>          

          </instrumentation>
            <check>
              <haltOnFailure>true</haltOnFailure>
              <branchRate>75</branchRate>
              <lineRate>75</lineRate>
              <totalBranchRate>75</totalBranchRate>
              <totalLineRate>75</totalLineRate>
              <packageBranchRate>75</packageBranchRate>
              <packageLineRate>75</packageLineRate>
            </check>
          </configuration>
        </plugin>          
      </plugins>
    </pluginManagement>
  </build>

  <dependencies>

    <!-- testing stuff -->
      <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>${junit.version}</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-test</artifactId>
      <version>${org.springframework-version}</version>
      <scope>test</scope>
    </dependency>      

  </dependencies>

  <!-- Reporting -->
  <reporting>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>cobertura-maven-plugin</artifactId>
        <version>2.5.2</version>
        <configuration>
        <formats>
        <format>html</format>
        </formats>
        </configuration>
      </plugin>         
    </plugins>
  </reporting>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-05T21:35:07.207

您需要将`cobertura`目标添加到您的 pom.xml 中。

# ruby-on-rails - Rspec 中的 test.host 测试 Rails 重定向

> ID：15414847
> 
> 赞同：10
> 
> 时间：2013-03-14T16:27:32.157
> 
> 标签：ruby-on-rails, rspec, capybara

这是我`test.rb`在 Rails 3.1.12 应用程序中的环境文件中的一行：

```
config.action_mailer.default_url_options = config.action_controller.default_url_options = { :host => "127.0.0.1", :port => 3000 } 
```

现在这是我做的测试：

```
subject { get :success }
subject.should redirect_to(:home) 
```

这会产生一个错误：

```
Failure/Error: subject.should redirect_to(:home)
       Expected response to be a redirect to <http://127.0.0.1:3000/> but was a redirect to <http://test.host/> 
```

我做错了什么？或者，在哪里配置测试主机？

这是 spec_helper.rb 文件以供完整参考。

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] = 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
require 'capybara/rspec'

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = true

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false

  # Run specs in random order to surface order dependencies. If you find an
  # order dependency and want to debug it, you can fix the order by providing
  # the seed, which is printed after each run.
  #     --seed 1234
  config.order = "random"
end
Capybara.configure do |config|
  config.app_host    = 'http://127.0.0.1'
  config.server_port = 3000
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T16:38:36.017

要使用 Capybara 设置应用程序主机和服务器端口，请将以下行添加到您的`spec/spec_helper.rb`文件中

```
Capybara.configure do |config|
  config.app_host   = 'http://127.0.0.1'
  config.server_port = 3000
end 
```

-- 编辑#1

[可以在http://blog.joncairns.com/2012/12/testing-domains-with-rails-and-test-unit/](http://blog.joncairns.com/2012/12/testing-domains-with-rails-and-test-unit/)获得关于测试域的一个很好的概述

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-06T20:12:11.670

这是似乎为我解决了问题的解决方法：

在 spec/rails_helper.rb 添加这个

```
module ActionDispatch
  class TestRequest
    # Override host, by default it is test.host
    def host
      'localhost:3000'
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-18T04:28:55.867

这对我有用：

```
# spec/controllers/whatever_controller_spec.rb
before :each do
  @request.host = '127.0.0.1:3000'
end 
```

基于提供的链接@dan-reedy。必须在 config/environments、spec/spec_helper.rb 和这里再次配置完全相同的参数是非常烦人的……所有这些都以略微不同的方式（使用“http://”或不使用，指定端口号或端口）分别地）。甚至`Capybara.configure`语法似乎也无法在版本之间保持一致......

但试一试，看看是否能解决问题。

# php - 如何使用 PHP 创建数百个具有不同 MySQL 数据的动态页面

> ID：15414850
> 
> 赞同：1
> 
> 时间：2013-03-14T16:27:36.647
> 
> 标签：php, mysql, scripting

我在下面有一个简单的 MySQL 表，目前正在用这篇文章底部的代码显示它的内容。

为了演示起见，我在这里只包含了 3 条记录，但实际上我有数百条记录，并且希望找到某种方法来动态生成数百个页面，其中每个页面显示数据库中的不同行。

例如：

```
page1.php -(contents)- Jonathan Smith
page2.php -(contents)- Samantha Rafael
page3.php -(contents)- Robert Weadababitzaboi 
```

实现这一目标的最简单方法是什么？任何方向将不胜感激。

成员表

id firstName lastName
1 Jonathan Smith
2 Samantha Rafael
3 Robert Weadababitzaboi

```
<?php  

$db = new mysqli('localhost', 'root', '', 'test');
$sql = 'SELECT * FROM members;
$result = $db->query($sql);
echo displayResults($result);
$db->close();

function displayResults($result) {
//build it
while($row = $result->fetch_object()) {
    $r .= '<div id="firstName"><img src="';
            $r .=  htmlspecialchars($row->firstName) ;
    $r .= '"></div>';
            $r .= '<div id="lastName">';
            $r .=  htmlspecialchars($row->lastName) ;
    $r .= '</div>';
}
return $r;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:32:21.030

您可以使用 .htaccess（如果您使用的是 Apache）并进行一些可以在此页面上看到的重写：[http ://wiki.dreamhost.com/More_.htaccess_mod_rewrite_examples](http://wiki.dreamhost.com/More_.htaccess_mod_rewrite_examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:50:39.497

将成员的 ID 作为 GET 参数传递给您的 URL：

`domain.example.org/member.php?id=42`

准备一条语句以从数据库中检索该成员的详细信息：

```
 $stmt = $db->prepare("SELECT * FROM members WHERE id = ?");
    $stmt->bind_param('i', $_GET['id']);
    $stmt->execute();
    $result = $stmt->fetch(); 
```

并使用结果呈现您的页面。

您可能不需要做任何比这更复杂的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:33:41.743

如果要创建文件，这就是您所需要的：`[http://php.net/manual/en/function.fopen.php](http://php.net/manual/en/function.fopen.php)`

# java - 在 Felix 的 HTTPService 中配置 CORS（由 Jetty 支持）

> ID：15414856
> 
> 赞同：0
> 
> 时间：2013-03-14T16:27:59.130
> 
> 标签：java, cross-domain, jetty, apache-felix, httpserver

我正在运行一个带有 Jetty 实现的 HttpService 的 felix 容器。

Jetty 使用 Cross-Origin-Filter 支持 CORS，它通常在 web.xml 中配置，如[这里所示](https://stackoverflow.com/questions/8303162/jetty-cross-origin-filter)

[不幸的是，据我所知](http://felix.apache.org/documentation/subprojects/apache-felix-http-service.html)， Felix HTTPService 没有公开任何类型的东西，所以问题是：我如何将该配置获取到我的“felix 包装”码头？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:06:12.950

我还没有想出如何突破 Felix 障碍以编程方式配置 Cross-Origin-Filters，*但*如果需要非常简单的过滤器，一种可能的解决方法是手动添加必填字段，如下所示：

```
resp.addHeader("Access-Control-Allow-Origin", "*"); 
```

# ruby - 如何在 ruby 2 上安装 gems？

> ID：15414858
> 
> 赞同：1
> 
> 时间：2013-03-14T16:28:03.523
> 
> 标签：ruby, gem, installation

我刚刚在 MacMountainLion 上安装了 ruby​​ 2，如何安装 gems？实际上我都安装了，但是有问题。也许全新安装可以解决。

```
macbook:~m$ gem install rails
ERROR:  Loading command: install (LoadError)
    cannot load such file -- openssl
ERROR:  While executing gem ... (NoMethodError)
    undefined method `invoke_with_build_args' for nil:NilClass
macbook:~ m$ ruby -v
ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin12.2.0]
macbook:~ m$ gem -v
2.0.3
macbook:~ m$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:48:43.783

我有同样的问题，但修复如下：

显然，OS X Mountain Lion 的 OpenSSL 版本比 Ruby 2 所能承受的要旧。使用 . 下载并安装最新的 OpenSSL `./Configure darwin64-x86_64-cc --prefix=/usr/local --openssldir=/usr/local/openssl; make; sudo make install`。然后使用`./configure --with-openssl-dir=/usr/local/openssl; make; sudo make install`. Ruby 的配置抱怨这`--with-openssl-dir`是一个未知选项，但构建显然仍然使用它，因为任何依赖 SSL 的东西，包括 gem 安装，现在都可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:34:25.020

安装像 rails 这样的 gem 需要很多依赖库，你必须手动下载和安装

或者，您可以尝试使用[Homebrew](http://mxcl.github.com/homebrew/)安装所有依赖库。如果您是 ROR 开发新手，我强烈建议您使用[rvm](https://rvm.io/rvm/install/)来管理不同版本的 ruby

一旦您使用 Homebrew 安装了所有必要的依赖库，那么安装 gem 就相当简单了，在将“gemname”替换为您感兴趣的 gem 之后执行以下操作

```
gem install <<gemname>> 
```

# ios - 取消选择该行后，如何取消突出显示 UITableView 中的附件？

> ID：15414861
> 
> 赞同：0
> 
> 时间：2013-03-14T16:28:06.433
> 
> 标签：ios, uitableview

我有一个带有自定义附件按钮的 UITableView。When the table cell is selected, the accessory button is placed in a highlighted state. 好吧，这是一件好事。When another cell is selected, causing the first to deselect, the accessory button is not changed back to an unhighlighted state.

这是一个屏幕截图，显示了一个不再被选中的单元格 (Rose)，但仍然选择了辅助按钮。

![在此处输入图像描述](../Images/8523148d3941c94a626f5ac285f516f8.png)

我已经尝试过这里建议的解决方案。[AccessoryDe​​tailDisclosureButton 在我调用 deselectRowAtIndexPath 后没有取消选择](https://stackoverflow.com/questions/2204835/accessorydetaildisclosurebutton-not-deselecting-after-i-call-deselectrowatindexp)它不起作用。我重新加载了表格中的每个单元格，但它仍然没有将附件按钮置于未突出显示的状态。

我已经尝试在新选择的按钮的选择器和`tableView:accessoryButtonTappedForRowWithIndexPath:`方法中明确取消突出显示单元格中的按钮。没有喜悦。

这是创建按钮的代码：

```
- (UITableViewCell *) tableView: (UITableView *) tableView cellForRowAtIndexPath: (NSIndexPath *) indexPath {
...
    UIButton *folderButton = [UIButton buttonWithType: UIButtonTypeCustom];
    folderButton.frame = CGRectMake(0.0, 0.0, 33.0, 33.0);
    [folderButton setImage: [UIImage imageNamed: @"open_document.png"] forState: UIControlStateNormal];
    [folderButton addTarget: self action: @selector(documentButtonAction:) forControlEvents: UIControlEventTouchUpInside];
    [folderButton setTag: [program tag]];
    cell.accessoryView = folderButton;

...
} 
```

到目前为止，我发现的唯一解决方案是将突出显示的按钮图像设置为未突出显示的图像，但这也很糟糕，因为点击时按钮不会突出显示。

如何取消突出显示附件按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:31:26.783

试试这个...

```
[tableView reloadRowsAtIndexPaths:@[indexPathToDeselect]
                 withRowAnimation:UITableViewRowAnimationNone]; 
```

where`indexPathToDeselect`是之前突出显示的行的索引路径。这将强制重新绘制该行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:32:03.117

您可以尝试使用委托方法`tableView:willDeselectRowAtIndexPath:`或`tableView:didDeselectRowAtIndexPath:` 在那里取消选择您的自定义附件视图。

# javascript - 每个和 $.post 的闭包

> ID：15414863
> 
> 赞同：0
> 
> 时间：2013-03-14T16:28:09.863
> 
> 标签：javascript, jquery, ajax, closures

我有一个要编辑的项目列表

```
<form id="mainForm" action="machin_chose">
    <div><input name="field" value="chouchouette" /></div>
    <div class="modified><input name="field" value="trutruc" /></div>
    <div class="modified"><input name="field" value="machin" /></div>
</form> 
```

并在每个修改的项目上发布 ajax

```
$('#mainForm div.modified').each(function () {
    item = $(this);
    $.post(
        $('#mainForm').attr('action')
      , $(this).find(':input').serialize()
      , function (data) {
            item.removeClass('modified');
        }
    });
}; 
```

成功发布的项目应该被删除他们的`modified`班级。
我尝试使用闭包`item`来保留当前修改的闭包。
但是因为它是异步的，所以`item`总是包含最后修改的。

如何在成功处理程序中检索当前发布的项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:30:33.757

您需要`item`使用`var`.

```
var item = $(this); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T16:31:17.477

您的代码的问题是您没有使用闭包；该`item`变量是全局的，因为您没有在函数中声明它。

只需更改此：

```
item = $(this); 
```

到：

```
var item = $(this); 
```

现在循环中的每次迭代都有自己的变量。

* * *

你也可以使用发送给函数的参数，但是你有一个对 DOM 元素的引用，而不是一个 jQuery 对象：

```
$('#mainForm div.modified').each(function (i, item) {
  $.post(
    $('#mainForm').attr('action')
    , $(item).find(':input').serialize()
    , function (data) {
      $(item).removeClass('modified');
    }
  });
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T16:30:32.437

```
$('#mainForm div.modified').each(function (index, valueOfElement) { 
```

`this`您可以使用 jQuery 提供的“valueOfElement”参数来代替使用`$.each()`. 请注意，valueOfElement 指的是正在迭代的集合中的当前对象/字符串/等。

# google-apps-script - 表单身份验证，保持会话 Google Apps 脚本

> ID：15414864
> 
> 赞同：0
> 
> 时间：2013-03-14T16:28:10.133
> 
> 标签：google-apps-script, forms-authentication

我有一个 Google Apps 脚本来与外部程序通信。该程序需要身份验证来进行身份验证：

“应该使用POST方法，并且内容类型应该设置为“application/x-www-form-urlencoded”。用户名应该在参数“ *UserName* ”中给出，密码应该在参数中给出“*密码*”。所以发布数据将类似于“*用户名*=xxx&*密码*=yyy”。请记住，当不发送每个请求的用户名和密码时，应该保留会话（或保留它的对象）活。”

这是有效的：

```
 var payload = "_UserName_="+username+"&_Password_="+password
 var options = {
 "method" : "POST",
 "payload" : payload,
 "contentType" : "application/x-www-form-urlencoded"
};

 var xml = UrlFetchApp.fetch("https://start.application.nl/docs/XMLDivisions.aspx",        options); 
```

但在这里我想提出下一个要求：

```
 var xml = UrlFetchApp.fetch("https://start.application.nl/docs/XMLDownload.aspx?PartnerKey="+partnerKey+"&Topic=Accounts"); 
```

但未通过身份验证？

如何让 GAS 会话保持活动状态？

一个使用 PHP 的工作示例：

```
 <?php
$baseurl = "https://start.exactonline.nl";
$username = "<username>";
$password = "<password>";
$partnerkey = ""; /* If you have one, the partnerkey with or without curly braces */
$division = "<division code>";  /* Check the result of the first division retrieving for the division codes */
$cookiefile = "cookie.txt";
$crtbundlefile = "cacert.pem"; /* this can be downloaded from http://curl.haxx.se/docs/caextract.html */

/* Logging in */
$header[1] = "Cache-Control: private";
$header[2] = "Connection: Keep-Alive";

/* init, don't term until you're completely done with this session */
$ch = curl_init();

/* Set all options */
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookiefile);
curl_setopt($ch, CURLOPT_CAINFO, $crtbundlefile);
curl_setopt($ch, CURLOPT_POSTFIELDS, array("_UserName_"=>"$username", "_Password_"=>"$password"));

/* Retrieving divisions, the current should be the one in which the user worked the last time */
$url = "$baseurl/docs/XMLDivisions.aspx";
curl_setopt($ch, CURLOPT_URL, $url);
$result = curl_exec($ch);

/* Switching divisions */
$url = "$baseurl/docs/ClearSession.aspx?Division=$division&Remember=3";
curl_setopt($ch, CURLOPT_URL, $url);
$result = curl_exec($ch);

/* Retrieving divisions, the current should now be the one supplied in the switching divisions. This is only the current for this session! */
$url = "$baseurl/docs/XMLDivisions.aspx";
curl_setopt($ch, CURLOPT_URL, $url);
$result = curl_exec($ch);

/* Upload an xml file */
$topic = "Invoices";
$url = "$baseurl/docs/XMLUpload.aspx?Topic=$topic&PartnerKey=$partnerkey";
curl_setopt($ch, CURLOPT_URL, $url);
/* Send the xml along with the request */
$filename = "Invoices.xml";
$fp = fopen($filename, "r");
$xml = fread($fp, filesize($filename));
curl_setopt($ch, CURLOPT_POSTFIELDS, utf8_encode($xml));
$result = curl_exec($ch);

/* Finally close as we're finished with this session */
curl_close($ch);

echo $result;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-27T00:01:09.823

我想你错过了饼干。

尝试这样的事情：

```
var payload = "_UserName_="+username+"&_Password_="+password
 var options = {
 "method" : "POST",
 "payload" : payload,
 "contentType" : "application/x-www-form-urlencoded"
};

 var xml = UrlFetchApp.fetch("https://start.application.nl/docs/XMLDivisions.aspx",        options);

var cookie = response.getAllHeaders()['Set-Cookie']; 
```

然后，将第二个请求中的 cookie 与**其他准备好的标头一起发送。**

```
var header = {'Cookie':cookie};
var opt = {"headers":header};

var xml = UrlFetchApp.fetch("https://start.application.nl/docs/XMLDownload.aspx?PartnerKey="+partnerKey+"&Topic=Accounts",opts); 
```

我认为这应该可行，但有时服务器不仅需要 cookie 中的会话，还需要相同的 IP 地址发出请求，在这种情况下，谷歌 IP 有时会改变......

# authentication - 在 jetty 8 中启用身份验证领域

> ID：15414865
> 
> 赞同：1
> 
> 时间：2013-03-14T16:28:19.157
> 
> 标签：authentication, jetty, restful-authentication, jetty-8

我尝试按照[官方教程](http://wiki.eclipse.org/Jetty/Tutorial/Realms)为我在码头上运行的唯一网络应用启用 MD5 身份验证。Nginx 管理 ssl 并重定向到码头

我放置

```
 <Call name="addBean">
      <Arg>
        <New class="org.eclipse.jetty.security.HashLoginService">
          <Set name="name">My Realm</Set>
          <Set name="config"><SystemProperty name="jetty.home" default="."/>/etc/realm.properties</Set>
          <Set name="refreshInterval">0</Set>
        </New>
      </Arg>
    </Call> 
```

在`jetty.xml`, 和 realm.properties 的内容是：

```
test: MD5:098f6bcd4621d373cade4e832627b4f6,user 
```

在教程中，他们没有告诉在哪里将领域分配给上下文，所以我不知道在哪里放置：

```
<Configure class="org.eclipse.jetty.webapp.WebAppContext">
   <Get name="securityHandler">
       <Set name="realmName">My Realm</Set>
   </Get>
</Configure> 
```

我尝试输入 in`jetty-context.xml`和 in `web.xml`，但仍然无法正常工作。当我将其放入时收到 502（错误网关）`jetty.xml`，在其他情况下，我会从 Web 服务获得正常的 json 结果（我不应该得到 503 - 未授权吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:41:55.837

“上下文 XML 文件”（如[配置安全领域](http://wiki.eclipse.org/Jetty/Tutorial/Realms)中所述）指的是[使用 ContextProvider 的 Webapp 部署](http://wiki.eclipse.org/Jetty/Feature/ContextDeployer)（默认情况下在 jetty-distribution 上启用）。

这通过使用 XML 文件部署 webapps，通常可以在`${jetty.home}/contexts/`其中找到该 webapp 在磁盘上的位置的描述，以及有关您希望如何部署该 webapp 的一些详细信息。

您还可以使用[`WEB-INF/jetty-web.xml`](http://wiki.eclipse.org/Jetty/Reference/jetty-web.xml)将这个 Context 配置嵌入到您的 WAR 文件中。

# ajax - 尝试使用 Ajax.ActionLink 加载部分视图

> ID：15414871
> 
> 赞同：0
> 
> 时间：2013-03-14T16:28:40.233
> 
> 标签：ajax, asp.net-mvc-3, partial-views

在阅读了这里的其他一些帖子之后，我已经尝试通过单击链接加载部分视图（一旦我通过这个概念验证阶段，文本链接实际上可能会变为图像）。问题是我在点击时被定向到部分视图，而不是在我点击链接的视图中填充 div：

布局：

```
<script src="@Url.Content("~/scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

风景：

```
 @Ajax.ActionLink("Item 1 Ajax", "Details", "Portfolio", new { name = "test" }, new AjaxOptions
                        { 
                            HttpMethod = "Post",
                            InsertionMode = InsertionMode.Replace,
                            UpdateTargetId = "row1Content",
                            OnComplete = "portfolioItemLoaded"
                        })

<div id="row1content"></div>

<script type="text/javascript">
        function portfolioItemLoaded() {
            alert("Done");
        }
    </script> 
```

控制器：

```
public class PortfolioController : Controller
    {
        public ActionResult Details(string name)
        {
            return PartialView(name);
        }
    } 
```

部分（显然命名为 test.cshtml）：

```
<p>Item 1 test</p> 
```

我错过了什么明显的东西吗？这是我第一次尝试在 MVC 中使用 AJAX，所以可能会出现一两个男生错误。

我计划有几个不同的 Ajax 动作链接调用不同的局部视图，因此我将名称传递给控制器​​。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:00:24.793

代码固定

你想试试这个吗，你有一个更好的控制，如果错误等等...... HTML with helper

```
@Html.ActionLink("Item 1 Ajax", "Details", "Portfolio", Nothing, New With {.Id = "myLink"}) 
```

JavaScript

```
 <script type="text/javascript">

$(document).ready(function() {

    $('#myLink').click(getIt);

});

function getIt() {
        $.ajax({
            type: "POST",
            url: $(this).attr('href'),
            error: function () { 
                //show error handler
                },
            success: function (r) {
                $('#row1content').html(r);
            }
        });

        return false;
    }

</script> 
```

# php - 添加索引对查询时间的影响

> ID：15414872
> 
> 赞同：0
> 
> 时间：2013-03-14T16:28:41.513
> 
> 标签：php, mysql, codeigniter

我正在尝试缩短查询时间。我正在使用 codeigniter ...查询表中的记录为 100 或更少...查询需要 2 毫秒。一个查询从表中获取 1 条记录，并且有 2 条 where 语句需要 35 毫秒……该表有 5000 条记录……

```
 $this->db -> where ('DealSiteId', $q1['DealSiteId'] );
        $this->db -> where ('DealUniqueId',$q1['DealUniqueId'] );

        $dup= $this-> db -> get ('deals');
        $dup1 = $dup -> result();

      if (count($dup1)!=0){

            $data['error']="Duplicate, This deal already exists. ";
            return $data;
        } 
```

我在 where 子句中的两个字段上添加索引...索引类型 BTREE。有更快的方法来检查重复项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:42:15.590

确定您的查询是否尽可能高效的任何简单方法都是使用[MySQL`EXPLAIN`](http://dev.mysql.com/doc/refman/5.5/en/explain.html)。要在 CodeIgniter 中执行此操作，您可以执行以下操作：

```
$this->db->where('DealSiteId', $q1['DealSiteId'] );
$this->db->where('DealUniqueId',$q1['DealUniqueId'] );

$result = $this->db->get('deals');
echo $this->db->last_query(); 
```

获取该打印结果并针对 MySQL 命令运行它：`EXPLAIN <your query>`这将告诉您有关该查询的有用信息。即如果它使用索引，它扫描多少行，如果它使用排序，创建临时表等。从那里你可以优化你的查询以获得最佳结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:32:12.827

如果您创建了包含这两个字段的复合索引，则您的查询可以使用单个索引，从而提高效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:32:28.453

您是在两个字段上添加单独的索引还是在一个组合中添加一个索引？

无论哪种方式，您都应该直接在 mysql（或类似 phpMyAdmin）中测试您的查询并使用它`EXPLAIN`来查看发生了什么： http: [//dev.mysql.com/doc/refman/5.5/en/explain.html](http://dev.mysql.com/doc/refman/5.5/en/explain.html)

在您的特定情况下，您也许可以为和`unique`的组合添加索引/约束。这看起来像（未经测试，只是为了给你一个想法......）：`DealSiteId``DealUniqueId`

```
ALTER TABLE `deals` ADD UNIQUE `some_name` ( `DealSiteId` , `DealUniqueId` ); 
```

# listview - 如何检测我的 WTL::CListViewCtrl 中的选择更改，而不是父级中的更改？

> ID：15414874
> 
> 赞同：1
> 
> 时间：2013-03-14T16:28:49.027
> 
> 标签：listview, visual-c++, wtl, selectionchanged

我有自己的 WTL 派生列表控件。

```
CPopupList : public CWindowImpl<CPopupList, WTL::CListViewCtrl>, 
```

它工作正常，除了一件事：我想在选择更改时捕获通知。不在父窗口中（像这样：[How to detect a CListCtrl selection change?](https://stackoverflow.com/questions/1462895/how-to-detect-a-clistctrl-selection-change)），而是在CPopupList本身，然后做一些事情。

实际上，我希望在当前所选项目旁边出现一个小提示窗口，作为当前项目的附加信息。就像 VS 在自动完成期间所做的那样，提供有关功能/属性的更多信息。

有没有人有任何提示如何做到这一点？非常感谢。

* * *

**更新：**

试过：

```
BEGIN_MSG_MAP(CPopupList)
    REFLECTED_NOTIFY_CODE_HANDLER(LVN_ITEMCHANGED, OnListItemChanged)
    DEFAULT_REFLECTION_HANDLER()
END_MSG_MAP() 
```

但是 OnListItemChanged() 没有被调用。在父级

```
REFLECT_NOTIFICATIONS() 
```

被添加。

* * *

**更新 2 - 解决方案**

我发现了问题：

父母的 MSG_HANDLER：

```
BEGIN_MSG_MAP(CEditorCtrl)
    MESSAGE_RANGE_HANDLER(WM_KEYFIRST,WM_KEYLAST,DelegateMessages)
    ...
    MESSAGE_
    ...
    NOTIFY_CODE_HANDLER(LVN_ITEMCHANGED,OnListItemChanged)
    CHAIN_MSG_MAP(parentType)
    ALT_MSG_MAP(11)
    COMMAND_HANDLER(IDC_PRINT_MONOCHROME,BN_CLICKED,OnPrintMonochromeButton)
    REFLECT_NOTIFICATIONS()
END_MSG_MAP() 
```

将 REFLECT_NOTIFICATIONS() 移到 ALT_MSG_MAP(11) 上方，最后在控件中调用 OnListItemChanged。

正确的：

```
 REFLECT_NOTIFICATIONS()
    ALT_MSG_MAP(11)
    COMMAND_HANDLER(IDC_PRINT_MONOCHROME,BN_CLICKED,OnPrintMonochromeButton) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:04:50.170

无论如何，通知消息都会发送给父母，您无法更改此设置。您通常做的是从父母到孩子的消息反射，以便[改进的]孩子可以处理其祖先生成的通知。

父窗口将在消息映射上具有反射处理程序：

```
#include <atlcrack.h>

BEGIN_MSG_MAP_EX(CMyDialog)
    // ...
    REFLECT_NOTIFICATIONS()
END_MSG_MAP() 
```

并且该控件将具有由控件父反映的 WM_NOTIFY 通知的处理程序：

```
BEGIN_MSG_MAP_EX(CPopupList)
    // ...
    //MSG_OCM_CTLCOLORSTATIC(OnReflectedCtlColorStatic) // Reflected WM_CTLCOLORSTATIC
    MSG_OCM_NOTIFY(OnReflectedNotify) // Reflected WM_NOTIFY
    DEFAULT_REFLECTION_HANDLER()
END_MSG_MAP() 
```

`OnReflectedNotify`是您可以处理控件通知的地方，但父级负责转发它们（有或没有自己的处理）。

另请参阅[WTL 宏中的 CodeProject 上关于此的一个词，用于处理反射消息](http://www.codeproject.com/Articles/4028/WTL-for-MFC-Programmers-Part-IV-Dialogs-and-Contro#wtlreflmacros)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-15T12:38:48.360

OP的问题已经解决。但是对于那些仍未收到通知消息的人，请继续阅读...

您可能必须对窗口进行[子类化！](https://docs.microsoft.com/en-us/windows/desktop/winmsg/about-window-procedures#window-procedure-subclassing)

假设您已正确配置所有消息映射。通过调试器，您会看到父对话框正在尝试将消息传递给控件。

换句话说，您会看到它调用`SendMessage`来传递消息。如果`WM_NOTIFY`被父级反映，`OCM_NOTIFY`则将被发送到派生控件。

然而，派生控件的消息处理程序中什么也没有发生。

如果您的父窗口代码只执行类似的操作，`MyDerivedControl.Attach(hwndControl)`那么您将不会在派生控件类上收到任何消息。在幕后`Attach`将复制窗口句柄（`HWND`），仅此而已。为了能够处理来自您的派生控件的消息，系统需要设置其他一些东西。

在实践中，这意味着调用`SubclassWindow`而不是`Attach`.

# jquery - 显示 + 或 - 结果的 jQuery 表单字段计算

> ID：15414875
> 
> 赞同：1
> 
> 时间：2013-03-14T16:28:51.123
> 
> 标签：jquery, forms

我正在制作一个表格，其中有一个预期总数和一个实际总数。最后一个字段应显示字段值的差异。所以代码应该做的是在比较字段中的数据后显示一个负数或正数，如果这些基数改变，结果也应该改变。这是我到目前为止所拥有的：

我上面有更多代码，下面的代码工作正常，只是没有显示数字是负数还是正数。

```
var difference = ztotal - total; 
```

这是我遇到问题的地方，代码的第一部分工作正常并显示负数，但第二部分添加了“+-”。如果 ztotal 或总金额发生变化以反映正确的结果，我需要删除加号或减号。

```
 if(ztotal > total){
    $('#difference').val(parseFloat(difference).toFixed(2) * -1);
  }
  else {
    $('#difference').val('+' + parseFloat(difference).toFixed(2)); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:39:47.327

您的代码存在一些问题：

1.  该`parseFloat`函数将类型变量转换`String`为您需要的任何类型，在本例中为浮点数。只需废弃该功能的使用
2.  为什么要检查一个是否大于另一个，而不仅仅是简单地输出数字。例如：

    ```
    var difference = total - ztotal;
    $("#difference").val((difference > 0 ? "+" : "") + difference.toFixed(2)); 
    ```

该示例使用简写 if-else 结构。这是看起来像这样的部分：

```
 difference > 0 ? "+" : "" 
```

这意味着如果变量`difference`大于 0，则写一个“+”，否则，写一个“”（空白字符串）。它只是节省空间！

# macos - 使用 find 和 grep 模拟 findstr 命令

> ID：15414876
> 
> 赞同：1
> 
> 时间：2013-03-14T16:28:57.277
> 
> 标签：macos, unix, terminal, grep, find

我最近从 Windows 开发环境切换到 Apple 开发环境。此举是一个具有挑战性的过程，但我正在努力在终端中选择基于 UNIX 的命令来补充我每天在 Windows 命令提示符下使用的命令。任何帮助将不胜感激，对提供的命令中发生的事情的基本解释对我来说是一个巨大的好处，因为我试图掌握 UNIX 命令，但是阅读`man`ual 就像阅读外语一样我大部分时间。

这是我的问题：是否有一个单行命令，最好足够短以便记忆，我可以执行该命令来模仿或产生与以下 Windows CMD 命令非常相似的输出：

```
findstr /s /c:"this piece of text" *.code 
```

我经常在 Windows 上使用此命令来生成一个结果集，该结果集向我显示引号之间的文本驻留在与任何子目录中的 *.code 模式匹配的任何文件中的位置。这可用于检查从服务器拉回的大量文件的版本号，以查找在大型项目中声明变量的位置。输出以这种形式出现：

```
file1.code: other text this piece of text other text
file2.code: other text this piece of text other text
file3.code: other text this piece of text other text
file4.code: other text this piece of text other text
file5.code: other text this piece of text other text 
```

其他文本是在给定文件中与我的搜索字符串位于同一行的任何其他文本。我在这里搜索了问题，发现有几个人使用`find . -name *.code`在子目录中构建文件列表。然后，他们使用命令中的`-exec`标志`find`与序列配对`grep`来搜索文本。我以上述几种方式进行了尝试，但都失败了，我认为是由于转义序列或丢失的字符。如果有一种方法可以在它刚刚搜索的引号之间给命令一个字符串，那就太棒了。

我尝试了以下但没有得到任何结果......也许是语法错误？

```
find . -exec grep -H .getItemToChange().getItemAttributes() 
```

**更新** 下面提供了正确的代码，John 给出了很好的解释。如果这有助于你喜欢它帮助我给他的答案一个upvote！

我希望在一个大型项目中找到带有此函数调用的 .java 文件。它没有给我任何结果，也没有办法只过滤到 *.java。

有谁可以帮我离开这里吗？非常感谢您对命令的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:34:17.210

```
find . -name '*.code' -exec grep -H 'pattern' {} + 
```

确保引用`'*.code'`，以便 shell 不会扩展`*`通配符。通常我们确实希望 shell 进行扩展，但在这种情况下，我们希望将文字字符串`*.code`传递给它，`find`以便它可以自己进行通配符扩展。

使用`-exec`时需要放在`{}`某个地方；它是找到的文件名的占位符。您还需要`\;`或`+`在命令末尾。这就是您向's 参数`find`的结束位置发出信号的方式（可以在 's 之后进行其他操作）。将导致每个文件运行一次，而对所有文件运行一次。`-exec``-exec``\;``grep``+``grep`

```
find . -name '*.code' -print0 | xargs -0 grep -H 'pattern' 
```

另一种常见的方法是将`find`和链接在一起`xargs`。我喜欢使用`-exec`更好，但`find`+`xargs`也同样有效。这里的想法是`xargs`获取在标准输入上传递的文件名并运行带有这些文件名的命名命令。为了获得传入的文件名的合适列表，我们将`find`命令的输出通过管道传输到`xargs`.

该`-print0`选项告诉`find`打印它找到的每个文件以及一个 NUL 字符 ( `\0`)。`xargs`这与's`-0`选项齐头并进。使用`-print0`并`-0`确保我们可以正确处理带有不寻常字符（如空格和引号）的文件名。

# python - python中的浏览器变量是什么？

> ID：15414883
> 
> 赞同：0
> 
> 时间：2013-03-14T16:29:15.443
> 
> 标签：python, variables, selenium, nameerror

我是一个尝试使用 Python 编写 Selenium 脚本的新手。在脚本的一部分中，我要求程序等到 iframe 出现后再选择另一个元素。

我有错误：

NameError：未定义全局名称“浏览器”

我了解问题的本质 - 需要先定义变量才能使用它，但我不知道用什么初始化变量！

我知道这听起来像是一个奇怪的问题，为什么我要使用一个我没有初始化的变量。问题是，我从这里的修复中获取的那部分代码没有给出变量的定义。

非常感谢任何帮助。

```
from selenium import webdriver 
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
from selenium.common.exceptions import NoSuchElementException
from selenium.webdriver.support.wait import WebDriverWait
import unittest, time, re

class Gymboxtest3(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(5)
        self.base_url = "http://gymbox.com"
        self.verificationErrors = []
        self.accept_next_alert = True

    def test_gymboxtest3(self):
        driver = self.driver
        driver.get(self.base_url + "/Login")
        time.sleep(30)

        frame = WebDriverWait(browser, 30).until(lambda x: x.find_element_by_id("iframe"))
        browser.switch_to_frame(frame) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:31:07.970

错误在：

```
def test_gymboxtest3(self):
    driver = self.driver
    driver.get(self.base_url + "/Login")
    time.sleep(30)

    frame = WebDriverWait(browser, 30).until(lambda x: x.find_element_by_id("iframe"))
    browser.switch_to_frame(frame) # <-- here 
```

也许你的意思是`driver.switch_to_frame(frame)`？您正在使用`browser`自己，但您从未事先定义过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:33:10.870

替换`browser`为`driver`：

```
frame = WebDriverWait(driver, 30)...
driver.switch_to_frame(frame) 
```

# asp.net-mvc - 使用 DataAnnotationsModelValidator 适配器进行 MVC3 远程验证

> ID：15414887
> 
> 赞同：2
> 
> 时间：2013-03-14T16:29:20.460
> 
> 标签：asp.net-mvc, asp.net-mvc-3, data-annotations, model-validation, remote-validation

我想使用自定义 DataAnnotationsAttribute 验证模型的 DTO 属性上的各种电话号码属性。我不想将 DataAnnotations 复制到 ViewModel 上，以保持代码 DRY，而是使用 DataAnnotationsModelValidatorProvider 注册了一个用于客户端验证的自定义适配器。此适配器提供 ModelClientValidationRemoteRules，通常由 RemoteAttribute 使用。jQuery 不显眼的验证然后调用我的验证操作，它验证各个字段。

但是，这种设置还不够。

1.  该属性当前使用其 ContainerType 来确定要调用哪个验证操作。然而，DTO 在不同嵌套级别的不同视图模型上使用，因此我们不确切知道在操作上使用什么前缀。根据模型层次结构中 ProfileDto 的位置，操作前缀需要更改

2.  验证操作使用 Request.Form.Keys 来确定应该验证的属性。我知道为了单元测试等原因，最好远离 Action 中的 Request 对象。

有没有一种好方法可以在回发中包含要验证的字段名称，所以我可以在我的操作中将它作为附加参数而不是使用 Request.Form？

有没有办法让模型绑定器绑定我的属性，因为它们将使用取决于子模型名称的前缀回发？

提前致谢！

* * *

属性如下：

```
public class PhoneNumberAttribute : ValidationAttribute
{
    public PhoneNumberType RequiredType { get; set; }

    public PhoneNumberAttribute()
        : base("{0} is not a valid phone number.")
    {
    }

    public override bool IsValid(object value)
    {
        string s = value as string;
        if (s == null)
        {
            return false;
        }
        if (!PhoneNumberUtils.IsValidNumber(s, RequiredType))
        {
            return false;
        }

        return true
    }

    public override string FormatErrorMessage(string name)
    {
        return string.Format(ErrorMessageString, name);
    }
} 
```

和适配器：

```
public class PhoneNumberAttributeAdapter : DataAnnotationsModelValidator<PhoneNumberAttribute>
{
    public PhoneNumberAttributeAdapter(ModelMetadata metadata, ControllerContext context, PhoneNumberAttribute attribute)
        : base(metadata, context, attribute)
    {
    }

    public override IEnumerable<ModelClientValidationRule> GetClientValidationRules()
    {
        var errorMessage = Attribute.FormatErrorMessage(Metadata.GetDisplayName());
        var routeData = new RouteValueDictionary { 
            { "controller", "Validate" },
            { "action", Metadata.ContainerType.Name },
        };

        var path = RouteTable.Routes.GetVirtualPathForArea(ControllerContext.RequestContext, routeData);

        var rule = new ModelClientValidationRemoteRule(
            errorMessage, 
            path.VirtualPath, 
            "POST", 
            "*." + Metadata.PropertyName);

        return new[] { rule };
    }
} 
```

这是行动：

```
public ActionResult ProfileDto([Bind(Prefix = "Dto")]ProfileDto model)
{
    string fieldToValidate = Request.Form.Keys[0];
    if (ModelState.IsValidField(fieldToValidate))
    {
        return Json(true);
    }

    var fieldErrors = ModelState[fieldToValidate].Errors;

    return Json(fieldErrors.First().ErrorMessage);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:05:29.020

看一下这个例子[，这里](http://setiabud.blogspot.com/2013/03/custom-validation-attribute-client-side_17.html)展示了如何在自定义 jQuery 验证器中获取嵌套属性，即使有前缀。

其次，MVC 模型绑定器应该自动绑定你的前缀。

# android - 从服务意图启动已经运行的活动

> ID：15414890
> 
> 赞同：0
> 
> 时间：2013-03-14T16:29:25.833
> 
> 标签：android, android-service

RE：启动另一个应用程序 并[从服务启动 Intent](https://stackoverflow.com/questions/15412846/launching-intent-from-service-causes-crash)[后移回应用程序导致崩溃](https://stackoverflow.com/questions/15396585/move-back-to-app-after-launching-another-app)

我现在可以从我的服务正确启动终端，但是我的下一步是在服务启动终端意图后重新启动应用程序的主要活动。

我正在使用：

```
public void backtoEmplayer(){
    Intent intenti = new Intent(MainService.this,MainActivity.class);
    intenti.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    intenti.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
    startActivity(intenti);
} 
```

这样它就会简单地提出仍应运行的主要活动（因为在此设备上启动的唯一两件事将是我的应用程序和终端）。但是，当我运行上面的代码时，出现以下错误：

```
E/AndroidRuntime (1859): FATAL EXCEPTION: Thread-931

E/AndroidRuntime (1859): android.util.AndroidRuntimeException: Calling startActvitiy() from outside of an Activity context requires the FLAT_ACTIVITY_NEW_TASK flas. Is this really what you want?

E/AndroidRuntime (1859): at android.app.ContextImpl.startActivity(ContextImpl.java:864)

E/AndroidRuntime (1859): at android.content.ContentWrapper.startActivity(ContextWrapper.java 276)

E/AndroidRuntime (1859): at packagename.MainService.backtoEmplayer(MainService.java:187) 
```

我不明白的是，我正在使用 FLAT_ACTIVITY_NEW_TASK 标志，但它仍然不起作用。

我的完整服务类现在看起来像：

```
public class MainService extends Service {

    boolean copied = false;
    private String mHandle;
    private static final int REQUEST_WINDOW_HANDLE = 1;

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public void onCreate() {

    }

    @Override
    public void onDestroy() {

    }

    @Override
    public void onStart(Intent intent, int startId) {
        Thread usbUpdateThread = new Thread() {
            public void run() {             
                while (true) {
                    while (!copied) {
                        try {
                            Thread.sleep(180000);
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                    runCommand("chmod -R 777 /media/cdrom/");
                    copied = false; 
                }
            }
        };
        Thread InternetThread = new Thread() {
            public void run() {
                while (true){
                        try {
                            Thread.sleep(3600000);
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        runCommand("php update.php");

                }
            }
        };
        Thread CheckThread = new Thread() {
            public void run() {
                while (true) {
                        try {
                            Thread.sleep(300000);
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        runCommand("sh check.sh");
try {

Thread.sleep(10000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    backtoEmplayer();
                    }

            }
        };

        InternetThread.start();
        CheckThread.start();
        usbUpdateThread.start();
    }

    public boolean runCommand(String command) {
        Intent intent = new Intent("jackpal.androidterm.RUN_SCRIPT");
        intent.addCategory(Intent.CATEGORY_DEFAULT);
        intent.putExtra("jackpal.androidterm.iInitialCommand", command);
        intent.putExtra("jackpal.androidterm.window_handle", MainActivity.mHandle);
        startActivity(intent);

        return true;
    }
    public void backtoEmplayer(){

        Intent intenti = new Intent(MainService.this,MainActivity.class);
        intenti.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        intenti.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
        startActivity(intenti);
    }

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T16:35:40.040

消除

```
intenti.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); 
```

从你的代码。

# c# - 如何在带有配置文件的 Powershell 脚本中使用自定义 WCF 代理？

> ID：15414891
> 
> 赞同：9
> 
> 时间：2013-03-14T16:29:26.170
> 
> 标签：c#, .net, wcf, powershell, configuration-files

我在它自己的程序集中有一个手写的 WCF 代理，它非常简单：

```
public class MyServiceClient : ClientBase<IMyService>, IMyService
{
    public MyServiceClient()
    {
    }

    public MyServiceClient(string endpointConfigurationName) :
        base(endpointConfigurationName)
    {
    }
} 
```

我将其加载到 Powershell 脚本中：

```
Add-Type -Path "$LocalPath\MyService.Client.dll"
Add-Type -Path "$LocalPath\MyService.Contracts.dll" 
```

然后，我尝试设置 App.config（根据SO 上的[其他帖子](https://stackoverflow.com/questions/835862/powershell-calling-net-assembly-that-uses-app-config)），以便可以使用在配置中定义的端点来实例化客户端，而不是在脚本本身中：

```
[System.AppDomain]::CurrentDomain.SetData("APP_CONFIG_FILE", "$LocalPath\MyService.Client.dll.config") 
```

我检查了 AppDomain 并将配置文件设置为其`ConfigurationFile`属性。

当我创建客户端实例时：

```
$endpointName = "MyServiceHttpEndpoint" # defined in the app.config file
$myclient = New-Object MyService.Client.MyServiceClient($endpointName) 
```

它倒下说：

`Exception calling ".ctor" with "1" argument(s): "Could not find endpoint element with name 'MyServiceHttpEndpoint' and contract 'MyService.Contracts.IMyService' in the ServiceModel client configuration section. This might be because no configuration file was found for your application, or because no endpoint element matching this name could be found in the client element."`

有任何想法吗？我不想在脚本文件中手动创建端点——它需要从 config.xml 中读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-25T21:51:34.790

Powershell 和 Powershell ISE 处理此问题的方式似乎有所不同。

使用 ISE（至少是我正在使用的版本），您必须清除配置以强制重新加载。不过，我想您也可以将 .dll.config 文件的内容放入 powershell ISE 配置中。然而，这似乎很糟糕。下面发布的代码有效。我发现它的一部分在谷歌上搜索这个问题。

```
# $dllPath is the path to the dll we want to load
# first point to the correct config file
[System.AppDomain]::CurrentDomain.SetData("APP_CONFIG_FILE", "$dllPath.config")

# PowerShell ISE is a PITA we have to override the config
if ($psISE -ne $null) {
    Add-Type -AssemblyName System.Configuration
    [Configuration.ConfigurationManager].GetField("s_initState", "NonPublic, Static").SetValue($null,0)
    [Configuration.ConfigurationManager].GetField("s_configSystem", "NonPublic, Static").SetValue($null,$null)
    ([Configuration.ConfigurationManager].Assembly.GetTypes() | where {$_.FullName -eq "System.Configuration.ClientConfigPaths"})[0].GetField("s_current", "NonPublic, Static").SetValue($null, $null)
}

#Now load the DLL
$null = [Reflection.Assembly]::LoadFrom($dllPath)

# DLL and Config should be loaded - test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T00:32:18.773

如果您发布完整的配置会更容易，但听起来您缺少以下部分。

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="ServiceAddress"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding"
        contract="MyService.Contracts.IMyService" name="MyServiceHttpEndpoint" />
    </client>
</system.serviceModel> 
```

尽管您听起来很确定事实并非如此。

因此，让我们尝试确保您的 powershell 应用程序正确获取配置...

要确定 powershell 应用程序是否按预期拾取配置，请将以下内容添加到您的 powershell 文件中：

```
Get-Content $LocalPath\MyService.Client.dll.config | foreach {Write-Output $_} 
```

如果不是那么它不是配置问题，我认为我们可以就此达成一致。

那么dll可以看到配置中的设置吗？现在我们知道powershell可以看到配置并且可以调用你的dll。

配置是否与dll位于同一位置？

add-type 会做我们不期望的事情吗？查看 msdn 文档，它看起来像 add-type

> 将 Microsoft .NET Framework 类型（类）添加到 Windows PowerShell 会话。

如果该类现在处于 powershell 会话中，它是否可以像往常一样访问配置？我不知道。

也许尝试一下`[Reflection.Assembly]::LoadFrom`，`add-type`看看这是否有什么不同？

恐怕我没有确切的答案，但我希望我的胡言乱语有些帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:31:01.313

您的程序集是作为 32 位还是 64 位目标构建的？

我在多种情况下遇到了 32/64 问题。

请注意，如果您在 64 位操作系统上运行，您有两个 PowerShell，一个 64 位（通常）和一个 32 位（当您需要 32 个外部程序集时很有趣）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:45:06.503

好像您缺少绑定类型，当您在 powershell 中时应该是 basicHttpBinding

使您的代码看起来像：

```
$endpointName = "MyServiceHttpEndpoint" 
$httpBinding = new-object System.ServiceModel.WSHttpBinding
$myclient = New-Object MyService.Client.MyServiceClient($httpBinding, $endpointName) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-03T07:42:44.767

如果可能，我建议一起跳过配置文件。如果您的 api 提供 MEX 或 WSDL 端点，请尝试通过查询它们来创建您的代理，并用于`WsdlImporter`在内存中构建绑定配置。从那时起，您可以在必要时在内存中对其进行修改。

这就是我为我所从事的项目所做的，该项目在配置 WCF 服务方面非常繁重，因为它与使用`WS-Trust`.

对于类似的[问题](https://stackoverflow.com/questions/13518877/get-adfs-token-in-powershell)，我建议尝试使用图库中提供的[WcfPS](https://www.powershellgallery.com/packages/WcfPS)模块。因为与其他问题有重叠，所以我将引用其中的一部分。

> 该模块的[代码](https://github.com/Sarafian/WcfPS)是开源的，尽管它在脚本中，但它在很大程度上依赖于 .net 框架类和来自`System.ServiceModel`和程序集的`System.IdentityModel`程序集。我提到这一点是因为这些程序集中的大多数 api 在 .NET 标准 2 中不可用，因此该模块很遗憾无法在非 Windows 操作系统中运行。[您还可以在我的文章WCFPS-PowerShell 模块](https://sarafian.github.io/sdl/knowledge-center/2016/06/07/wcfps.html)中阅读有关它的更多信息，以使用 SOAP 端点。

这是[自述文件中的示例](https://github.com/Sarafian/WcfPS/blob/master/README.md)

```
#region Initialize the channel/client
$svcEndpoint="http://myserviceprovider/Service1.svc"

$wsImporter=New-WcfWsdlImporter -Endpoint $svcEndpoint -HttpGet
$proxyType=$wsImporter | New-WcfProxyType

# select the endpoint and implicitly the binding from the imported configuration
$endpoint=$wsImporter | New-WcfServiceEndpoint -Endpoint $svcEndpoint
$channel=New-WcfChannel -Endpoint $endpoint -ProxyType $proxyType
#endregion

#region Use the channel/client
$channel.Method1()
$channel.Method2()
#endregion 
```

使用这种方法，您不需要任何内联 .net 类型的导入，也不需要在 Visual Studio 上使用的代理，也不需要配置。很可能您将不得不根据您的用例对其进行调整。如果您可以改进模块的功能，请提交拉取请求。

# java - 如何为 Android 存储单用户登录数据？

> ID：15414894
> 
> 赞同：0
> 
> 时间：2013-03-14T16:29:36.450
> 
> 标签：java, android, sqlite, login, sharedpreferences

[参考关于在 Android 应用中存储单个用户的最佳方式](https://stackoverflow.com/questions/14035045/best-way-to-store-a-single-user-in-an-android-app)的问答？

共享偏好实际上是如何工作的？

我想做的是：

*   用户首次打开应用程序时会添加登录 ID 和密码
*   下次用户打开应用程序时使用以前的 id/密码和数据登录。（我不希望自动登录，因为我的应用程序中的数据很敏感，因此即使是使用手机的朋友也不应该看到它。）
*   用户可以更改此 ID/密码

这可以通过共享首选项实现吗？还是我需要使用 SQLlite？我对 Android 完全陌生，所以如果您附上工作代码和解释，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:40:33.280

只要您愿意在其中存储合理的机密数据，您就可以使用共享偏好来执行此操作。在存储和检索之间您将需要一些共享代码：

```
final static String pfName = "com.super.stuff.preffile.name";
final static String pfCodeForID = "com.super.stuff.pf.id";
final static String pfCodeForPassword = "com.super.stuff.pf.passwd";
final static String pfNoStringPresent = "NO-STRING-PRESENT-HERE";

final static pfCodes = MODE_PRIVATE; // See http://developer.android.com/reference/android/content/Context.html#getSharedPreferences(java.lang.String, int) 
```

要存储信息：

```
String ID = //whatever;
String password = //whatever;

SharedPreferences settings = context.getSharedPreferences(pfName, pfCodes);
SharedPreferences.Editor editor = settings.edit();
editor.putString(pfCodeForID, ID);
editor.putString(pfCodeForPassword, password);
editor.commit(); 
```

要检索信息：

```
SharedPreferences settings = context.getSharedPreferences(pfName, pfCodes);

String ID = editor.getString(pfCodeForID, pfNoStringPresent);
String password = editor.getString(pfCodeForPassword, pfNoStringPresent);

if (ID.contentEquals(pfNoStringPresent) && password.contentEquals(pfNoStringPresent)) {
     // Handle the case of nothing stored, ie get ID and password
     } 
```

显然，如果用户名和密码都与 pfNoStringPresent 相同，则会失败！

如果您担心以这种方式存储敏感数据，那么您需要将其存储在数据库中，或者以某种方式对其进行加密。您将需要确定当信息存储在属于提供您 ID 信息的人的设备上时保护信息的重要性，从手机获取此信息对小偷的重要性等等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T18:05:20.557

与 AccountManager 集成，然后使用 setUserData ......这是我认为的最佳方式。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:57:59.010

使用 Sqlite，它相当简单。按照这个：

```
public SQLiteDatabase sampleDB;  
sampleDB =  this.openOrCreateDatabase(TABLE_NAME, MODE_PRIVATE, null);    
sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                TABLE_NAME+ "(" + COLUMN_ID
                + " integer primary key autoincrement, " + COLUMN1
                + " text not null,"+ COLUMN2
                + " text not null);"); 
```

这里我有三个字段，其中 column1 和 column2 是具有值“用户名”和“密码”的字符串。创建完成后，您可以根据需要执行查询。

# c# - 使用 C# 在 irc 上进行跨网络消息传递

> ID：15414899
> 
> 赞同：1
> 
> 时间：2013-03-14T16:29:47.853
> 
> 标签：c#, irc

我正在尝试将某个 IRC 频道的活动记录到另一个频道中。我可以让我的程序向活动发送消息，但是在错误的网络上。第二个频道在不同的网络上，我很难同时连接到两个频道，它在网络 A 上接收消息并将其也在网络 A 上发布，而应该是 B

```
static void _irc_IRCMessageReceived(object sender, string message, User user, IRCChannel channel)
{
    if (message.StartsWith("!Op"))
    {       
        _irc.SendMessage(message, channel1);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:52:43.030

在您的代码中，您将其发布到您从中接收它的同一网络。'_irc' 是您从中获取消息的网络 A，然后您转身将其发送回网络。您需要保留对网络 B 的 IRCClient 类的引用，并将其发送到该消息而不是“_irc”（网络 A）。

旁注：我很久以前写了那个 IRC 库，当时我还没有经验。我建议使用我的一个 IRC 机器人中的 IRC 组件：http: [//github.com/Amrykid/Sayuka](http://github.com/Amrykid/Sayuka)

# android - 内部 DialogFragment 类是否应该是静态的？

> ID：15414908
> 
> 赞同：9
> 
> 时间：2013-03-14T16:30:05.883
> 
> 标签：android, android-dialogfragment

这是我用来学习 Android 的项目中的一段代码：

```
private void enableLocationSettings() {
    Intent settingsIntent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
    startActivity(settingsIntent);
}

@SuppressLint("ValidFragment")
public class EnableGpsDialogFragment extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new AlertDialog.Builder(getActivity())
            .setTitle("Tytuł")
            .setMessage("wiadomosc")
            .setPositiveButton("odpal", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    enableLocationSettings();
                }

            })
            .create();
    }
} 
```

如您所见，我必须添加`@SuppressLint`才能使我的应用程序正常工作，但在[指南](http://developer.android.com/guide/topics/ui/dialogs.html)中，此注释不是必需的。

我究竟做错了什么？

这是我的进口：

```
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.provider.Settings;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.DialogFragment;
import android.view.Menu;
import android.view.View;
import android.widget.TextView;
import android.widget.ToggleButton; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-14T16:33:16.080

该示例没有这些注释，因为该类位于其自己的文件中。这意味着它*独立*于使用 Fragment 的 Activity。

在您的情况下，您的 Fragment 位于 Activity 内，并且不使用 static 修饰符。这意味着它与 Activity 实例相关联。

让 Fragment 依赖于 Activity 实例是一个坏主意，这两个类都有复杂的生命周期（特别是因为 Activity 经常被销毁和重新创建）并且应该彼此独立。

您将需要 make`EnableGpsDialogFragment`的修饰符`static`。

```
public static class EnableGpsDialogFragment extends DialogFragment { 
```

一个`static`类不依赖于封闭类的实例，因此警告将消失。

有关更多信息，请阅读有关[嵌套类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)的 Java 教程。

编辑以响应您的编辑：现在这些类不依赖于彼此的实例，您将不得不取出一个实例，`YourActivity`因此您可以通过强制转换调用`enabledLocationSettings()`一种方法，并且仅在`EnableGpsDialogFragment`仅由以下人员使用时才有效`YourActivity`：

```
@Override
public void onClick(DialogInterface dialog, int which) {
  enableLocationSettings();
} 
```

到

```
@Override
public void onClick(DialogInterface dialog, int which) {
  ((YourActivity)getActivity()).enableLocationSettings();
} 
```

如果这个 Fragment 将被多个 Activity 使用，您应该[创建一个`interface`由每个 Activity 来实现](http://developer.android.com/training/basics/fragments/communicating.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-26T10:18:59.430

所有 DialogFragments 都应该是公共的，并且 - 如果是内部类 - 是静态的。它们还应该有一个公共的无参数构造函数，并且只依赖 setArguments() 进行参数传递。

一段时间以来，未能遵守这一规定会产生一个 Lint 警告，如果你真的想要，你可以抑制它，但从 Android 支持库 v25 及更高版本开始，如果试图显示一个不存在的 DialogFragment，你实际上会得到一个异常遵守这些规则：

`java.lang.IllegalStateException: Fragment TestActivity$TestDialogFrament must be a public static class to be properly recreated from instance state.`

如前所述，原因是操作系统必须能够重新创建所有片段，以防在将应用程序置于后台时，诸如内存不足的情况迫使它销毁片段。当应用程序再次置于前台时，应该可以从序列化的应用程序状态重新创建片段，这对于非静态内部类来说是不可能的，而不是来自封闭外部类的实例，并且重新-creation 不是从那个上下文中完成的。

不幸的是，这使对话框变得更加复杂，因为创建一个覆盖 onCreateDialog 的匿名子类通常非常方便。但是，这样的对话框根本无法重新创建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-10T12:33:26.150

不应该！

从我的角度来看，我不希望我的 DialogFragment（您的 NetworkConnectionError）是静态的，因为我希望能够从中调用我的包含类（Activity）的变量或方法。
所以它不会是静态的。但我也不想产生 memoryLeaks。
那么解决方案是什么？
很简单，当你进入 onStop 时，确保你杀死你的 DialogFragment，就这么简单。所以代码看起来像这样：

```
public class CarActivity extends AppCompatActivity{

/**
 * The DialogFragment networkConnectionErrorDialog 
 */
private NetworkConnectionError  networkConnectionErrorDialog ;
//...  your code ...//
@Override
protected void onStop() {
    super.onStop();
    //invalidate the DialogFragment to avoid stupid memory leak
    if (networkConnectionErrorDialog != null) {
        if (networkConnectionErrorDialog .isVisible()) {
            networkConnectionErrorDialog .dismiss();
        }
        networkConnectionErrorDialog = null;
    }
}
/**
 * The method called to display your dialogFragment
 */
private void onDeleteCurrentCity(){
    FragmentManager fm = getSupportFragmentManager();
     networkConnectionErrorDialog =(DeleteAlert)fm.findFragmentByTag("networkError");
    if(networkConnectionErrorDialog ==null){
        networkConnectionErrorDialog =new DeleteAlert();
    }
    networkConnectionErrorDialog .show(getSupportFragmentManager(), "networkError");
} 
```

这样你就可以避免内存泄漏（因为它很糟糕）并且你确保你没有一个他妈的静态片段无法访问你的活动的字段和方法。从我的角度来看，这是处理该问题的好方法。

# php - 查找没有结尾斜杠的 url 模式

> ID：15414909
> 
> 赞同：1
> 
> 时间：2013-03-14T16:30:08.220
> 
> 标签：php, preg-match-all, regex-negation

我正在寻找 preg_match_all 模式来查找页面上没有斜杠的所有 URL。

例如：如果我有

1.  a href="/testing/abc/">以斜线结尾

2.  a href="/testing/test/mnl">没有结束斜线

结果将是#2

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:39:37.387

最好使用 DOM 解析器提取所有 href 链接，并查看 URL 是否以斜杠结尾。不需要正则表达式。

对于提供的示例的正则表达式解决方案，您可以使用此正则表达式：

```
/href=(['"])[^\s]+(?<!\/)\1/ 
```

### 现场演示：[http ://www.rubular.com/r/f2XJ6rF5Fb](http://www.rubular.com/r/f2XJ6rF5Fb)

### 解释：

```
href=   -> match text href=
(['"])  -> match single or double quote and create a group #1 with this match
[^\s]+  -> match 1 or more character until a space is found
(?<!\/) -> (negative lookbehind) only match if is not preceded by /
\1      -> match closing single or double quote (group #1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:50:42.780

确实，使用 DOM 解析器^([[为什么？](https://stackoverflow.com/a/1732454/165154)]) . 这是一个例子：

```
// let's define some HTML
$html = <<<'HTML'
<html>
<head>
</head>
<body>
    <a href="/testing/abc/">end with slash</a>
    <a href="/testing/test/mnl">no ending slash</a>
</body>
</html>
HTML;

// create a DOMDocument instance (a DOM parser)
$dom = new DOMDocument();
// load the HTML
$dom->loadHTML( $html );

// create a DOMXPath instance, to query the DOM
$xpath = new DOMXPath( $dom );

// find all nodes containing an href attribute, and return the attribute node
$linkNodes = $xpath->query( '//*[@href]/@href' );

// initialize a result array
$result = array();

// iterate all found attribute nodes
foreach( $linkNodes as $linkNode )
{
    // does its value not end with a forward slash?
    if( substr( $linkNode->value, -1 ) !== '/' )
    {
        // add the attribute value to the result array
        $result[] = $linkNode->value;
    }
}

// let's look at the result
var_dump( $result ); 
```

# android - Android SAX Parser - 多个级别的相同标签名称

> ID：15414911
> 
> 赞同：0
> 
> 时间：2013-03-14T16:30:14.337
> 
> 标签：android, tags, sax, saxparser

我一直在寻找一种解决方案来解析在多个级别上具有相同标签名称的 xml。这是我必须处理的 XML 示例（这些部分不是静态的）：

```
<xml>
  <section id="0">
     <title>foo</title>
     <section id="1">
        <title>sub foo #1</title>
        <section id="2">
          <title>sub sub foo</title>
        </section>
     </section>
     <section id="3">
        <title>sub foo #2</title>
     </section>
  </section>
<xml> 
```

我一直在尝试几种可能性，例如尝试列表、堆栈，但是我对 SAX 所做的事情还没有产生任何正确的结果；换句话说，我被困住了:(

我创建了一个名为 Section 的类：

```
public class Section {
public String id;
public String title;
public List<Section> sections; } 
```

我想知道我是否还应该添加一个父变量？

```
public Section parent; 
```

如果有人有解决方案，我非常感谢！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:40:07.600

实际上，您可能至少需要一个堆栈。

通过（我希望）对您的类（setter/getter 和添加部分的方法）进行明确的更改`Section`，此处理程序似乎可以解决问题：

由于您的布局似乎允许`<section>`在根下方立即使用多个标签`<xml>`，因此我已经实现了它并将结果放入`List<Section>`.

```
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

import java.util.ArrayList;
import java.util.List;
import java.util.Stack;

public class SectionXmlHandler extends DefaultHandler {

    private List<Section> results;
    private Stack<Section> stack;
    private StringBuffer buffer = new StringBuffer();

    @Override
    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
        if ("xml".equals(localName)) {
            results = new ArrayList<Section>();
            stack = new Stack<Section>();
        } else if ("section".equals(localName)) {
            Section currentSection = new Section();
            currentSection.setId(attributes.getValue("id"));
            stack.push(currentSection);
        } else if ("title".equals(localName)) {
            buffer.setLength(0);
        }
    }

    @Override
    public void endElement(String uri, String localName, String qName) throws SAXException {
        if ("section".equals(localName)) {
            Section currentSection = stack.pop();
            if (stack.isEmpty()) {
                results.add(currentSection);
            } else {
                Section parent = stack.peek();
                parent.addSection(currentSection);
            }
        } else if ("title".equals(localName)) {
            Section currentSection = stack.peek();
            currentSection.setTitle(buffer.toString());
        }
    }

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        buffer.append(ch, start, length);
    }

    public List<Section> getResults() {
        return results;
    }
} 
```

# oauth - 服务提供商登录 oauth

> ID：15414912
> 
> 赞同：0
> 
> 时间：2013-03-14T16:30:16.113
> 
> 标签：oauth, cas

如何使用服务提供商凭据（例如 facebook）登录 OAuth 消费者（例如桌面应用程序）。我也需要在 CAS 中配置 login-webflow.xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:01:34.963

对于 CAS 服务器，您可以启用两种 OAuth 支持：客户端和服务器。看看文档：[https ://wiki.jasig.org/display/CASUM/OAuth](https://wiki.jasig.org/display/CASUM/OAuth)

# php - jQuery、AJAX 和 PHP：服务器和客户端数据上的数组

> ID：15414915
> 
> 赞同：0
> 
> 时间：2013-03-14T16:30:20.473
> 
> 标签：php, json, jquery

我的目标是通过 PHP 动态显示信息，然后可以通过 AJAX/json 进行编辑。我有这个为服务器数据的单个实例工作，但是当我进入多个实例时，我迷失了如何通过 json 页面上的数组以及主页面上的 jQuery 输出来保持元素和 div 身份不同页。

这是当前的主页（减去与这个问题 PHP 记录抓取无关的部分）。jQuery 中的引用并不完全正确，例如

```
data:$("#form_static_").serialize() 
```

因为它将动态标识符放在我不知道如何处理的 static_ 之后。

```
<html>
<head>
<title>My Form</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="ckeditor/ckeditor.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("#myForm").submit(function(){
        $.ajax({
            type:"POST",
            url:"ajax_form_test2-json.php",
            data:$("#form_static_").serialize(),
            dataType:"json",
            success:function(msg){
                $("#formResponse_").removeClass('error');
                $("#formResponse_").addClass(msg.status_);
                $("#formResponse_").html(msg.message_);
                $("#static_name_").html(msg.name_);
                $("#static_description_").html(msg.description_);
            },
            error:function(){
                $("#formResponse_").removeClass('success');
                $("#formResponse_").addClass('error');
                $("#formResponse_").html("There was an error submitting the form. Please try again.");
                }
            });
        return false;
    });
});
</script>

</head>
<body>
  <div id="tabs-left-2" class="content">
    <h1 class="page-title">Static Info</h1>
      <?php do { ?>
        <div id="static_name_<?php echo $row_rsStatic['id']; ?>" class="small_content_heading"><?php echo $row_rsStatic['name']; ?></div>
        <div id="static_description_<?php echo $row_rsStatic['id']; ?>" class="small_content"><?php echo $row_rsStatic['description']; ?></div>
        <div id="static_update_<?php echo $row_rsStatic['id']; ?>" style="display:inherit">
        <form id="form_static_<?php echo $row_rsStatic['id']; ?>" name="form_static_<?php echo $row_rsStatic['id']; ?>" method="post" action="">
          <div id="formResponse_<?php echo $row_rsStatic['id']; ?>"></div>
          <div id="form_static_name_<?php echo $row_rsStatic['id']; ?>" class="small_content_heading">
            <input name="id<?php echo $row_rsStatic['id']; ?>" type="hidden" value="<?php echo $row_rsStatic['id']; ?>">
            <input name="name<?php echo $row_rsStatic['id']; ?>" type="text" value="<?php echo $row_rsStatic['name']; ?>"></div>
          <div id="form_static_description_<?php echo $row_rsStatic['id']; ?>">
            <textarea name="description<?php echo $row_rsStatic['id']; ?>"><?php echo $row_rsStatic['description']; ?></textarea>
          <script>CKEDITOR.replace('description<?php echo $row_rsStatic['id']; ?>');</script>
          </div>
        </form>
        </div>    
        <hr>
      <?php } while ($row_rsStatic = mysql_fetch_assoc($rsStatic)); ?>
    </div>
</body>
</html> 
```

这是 json 页面，在相应的“_”之后再次保留了动态标识符，因为我不知道如何以编程方式实现这一点：

```
<?php
//response array with status code and message
$response_array = array();

//validate the post form
//check the name field
if(empty($_POST['static_name_'])){

    //set the response
    $response_array['status_'] = 'error';
    $response_array['message_'] = 'Name is blank';

//check the message field
} elseif(empty($_POST['static_description_'])) {

    //set the response
    $response_array['status_'] = 'error';
    $response_array['message_'] = 'Description is blank';

//form validated
} else {

//(update record here)

    //set the response
    $response_array['status_'] = 'success';
    $response_array['message_'] = 'Success!';
    $response_array['name_'] = $_POST['static_name_'];
    $response_array['description_'] = $_POST['static_description_'];
}
echo json_encode($response_array);
?> 
```

我一直在做 PHP，但对 AJAX/JSON/jQuery 世界很陌生，所以不确定这种设置方式是否适合动态生成/更新的数据。非常感谢任何想法或建议......谢谢！

编辑＃1：我将文件更改为以下内容，并且知道我仍然缺少一些东西，因为它没有正确更新：

```
<html>
<head>
<title>My Form</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="ckeditor/ckeditor.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("form").submit(function(e){
        e.stopPropagation();

        var form = $(this);  // We're going to use this instead of all those IDs
        $.ajax({
            type:"POST",
            url:"ajax_form_test2-json.php",
            data: form.serialize(),
            dataType:"json",
            success:function(msg){
                $(".response", form)
                    .removeClass('error')
                    .addClass(msg.status)
                    .html(msg.message);
                $(".name", form).html(msg.name);
                $(".description", form).html(msg.description);
            },
            error:function(){
                $(".response", form)
                    .removeClass('success')
                    .addClass('error')
                    .html("There was an error submitting the form. Please try again.");
            }
        });
        return false;
    });
});
</script>

</head>
<body>
      <div class="small_content_heading name"><?php echo $row_rsSafety['name']; ?></div>
      <div class="small_content description"><?php echo $row_rsSafety['description']; ?></div>
      <div style="display:inherit">   
        <form method="post" action="">
          <div class="response"></div>
          <div class="small_content_heading">
            <input name="id" type="hidden" value="<?php echo $row_rsSafety['id']; ?>">
            <input name="name" type="text" value="<?php echo $row_rsSafety['name']; ?>">
          </div>
          <div>
            <textarea name="description"><?php echo $row_rsSafety['description']; ?></textarea>
            <script>CKEDITOR.replace('description');
            function CKupdate(){
    for ( instance in CKEDITOR.instances )
        CKEDITOR.instances[instance].updateElement();
}
            </script>
          </div>
          <input type="submit" name="submitForm" value="Edit" onClick="CKupdate();">
        </form>
     </div>    
     <hr>

</body>
</html> 
```

JSON文件：

```
<?php
//connect to DB
require_once('Connections/job_tool.php');
mysql_select_db($database_job_tool, $job_tool);

//response array with status code and message
$response_array = array();

//validate the post form
//check the name field
if(empty($_POST['name'])){
    //set the response
    $response_array['status'] = 'error';
    $response_array['message'] = 'Name is blank';
//check the message field
} elseif(empty($_POST['description'])) {
    //set the response
    $response_array['status'] = 'error';
    $response_array['message'] = 'Message is blank';
//form validated
} else {

    //set update variables
    $update_name = $_POST['name'];
    $update_desc = $_POST['description'];
    $update_id = $_POST['id'];

    //update file on server

    $sql = "UPDATE static_fields SET name='$update_name', description='$update_desc' WHERE id='$update_id'";
    $update_sql = mysql_query($sql, $job_tool) or die('Could not update data: ' . mysql_error());
    mysql_close();

    //set the response
    $response_array['status'] = 'success';
    $response_array['message'] = 'Update complete!';
    $response_array['name'] = $_POST['name'];
    $response_array['description'] = $_POST['description'];
}
echo json_encode($response_array);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:52:14.110

不要一直使用 ID，而是使用 jQuery 上下文和类：

```
<script type="text/javascript">
$(document).ready(function(){
    $("form").submit(function(e){
        e.stopPropagation();

        var form = $(this);  // We're going to use this instead of all those IDs
        $.ajax({
            type:"POST",
            url:"ajax_form_test2-json.php",
            data: form.serialize(),
            dataType:"json",
            success:function(msg){
                $(".response", form)
                    .removeClass('error')
                    .addClass(msg.status);
                    .html(msg.message);
                $(".name", form).html(msg.name);
                $(".description", form).html(msg.description);
            },
            error:function(){
                $(".response", form)
                    .removeClass('success')
                    .addClass('error')
                    .html("There was an error submitting the form. Please try again.");
            }
        });
        return false;
    });
});
</script> 
```

所以，而不是这样：

```
<div id="static_description_<?php echo $row_rsStatic['id']; ?>" class="small_content"><?php echo $row_rsStatic['description']; ?></div> 
```

您将改用一个类：

```
<div class="small_content description"><?php echo $row_rsStatic['description']; ?></div> 
```

该方法：

*   为您的 DIV 使用泛型类
*   为 INPUT 使用通用名称
*   在您的 PHP`$_POST`处理程序中，使用隐藏的 ID 字段来了解您正在使用的记录
*   在您的 JSON 响应中，使用通用`status`、`message`、`name`和`description`键

# css - 在单行表中居中图像

> ID：15414917
> 
> 赞同：0
> 
> 时间：2013-03-14T16:30:22.380
> 
> 标签：css, html

我试图在一行上获得三张图像，一张左对齐，一张居中，最后一张右对齐。我已经决定使用单行表来完成它，但是很难让图像在它们各自的单元格中居中。

有没有比我选择的更好的方法？我不打算使用该`<td align="center">`属性，因为它在 HTML5 中已被弃用，所以我正在寻找一种使用 CSS 的方法。这就是我目前所拥有的（我已将表格边框属性设置为“1”，因此我可以看到单元格内的图像对齐方式如何呈现）：

```
<style>
  .centre_image
  {
  float:center;
  }
</style>

<body>
<table border="1">
    <tr>
    <td class="centre_image">
        <object type="image/svg+xml" data="images/lawfirms.svg">   
          <img src="images/lawfirms.png" alt=""/>     
        </object>
    </td>
    <td class="centre_image">
        <object type="image/svg+xml" data="images/industry.svg">     
          <img src="images/industry.png" alt=""/>     
        </object>
    </td>
    <td class="centre_image">
        <object type="image/svg+xml" data="images/in-house.svg">     
          <img src="images/in-house.png" alt=""/>     
        </object>
    </td>
    </tr>
</table> 
```

这在 Ubuntu 上的 Firefox 19.0 中给出了以下结果： ![在此处输入图像描述](../Images/b97781d24f82ca8cfd5273e75557ef7f.png)

在 Chrome 25.0 中出现以下结果： ![在此处输入图像描述](../Images/7f4a03e511fd8f8b7a616e6d189786d7.png)

编辑 - 这是在 j08691 的答案中进行更改后的完整 HTML：

```
<!DOCTYPE html>     
<html xmlns="http://www.w3.org/1999/xhtml">     
<head>
<meta charset="UTF-8"/>     
<title>SVG Included with <object> tag</title>

<style>
.centre_image
{
text-align:center;
}
</style>
</head>

<body>
<table border="1" style="width:100%">
    <tr>
    <td class="centre_image">
        <object type="image/svg+xml" data="images/lawfirms.svg">   
          <img src="images/lawfirms.png" alt=""/>     
        </object>
    </td>
    <td class="centre_image">
        <object type="image/svg+xml" data="images/industry.svg">     
          <img src="images/industry.png" alt=""/>     
        </object>
    </td>
    <td class="centre_image">
        <object type="image/svg+xml" data="images/in-house.svg">     
          <img src="images/in-house.png" alt=""/>     
        </object>
    </td>
    </tr>
</table>

 </body>
</html> 
```

这是 Naresh Kumar 回答的结果： ![在此处输入图像描述](../Images/2d9e075b3248bd66fbaa5d3a91d46b80.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:33:25.847

由于没有`float:center`财产，你试过`text-align:center`吗？

```
.centre_image {
    text-align:center;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ESWnh/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:34:45.657

尝试类似：

```
.centre_image{
    text-align:center;
    margin-left:auto;
    margin-right:auto;
} 
```

我希望这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:37:15.847

在 HTML5 中，不推荐使用 vAlign。这是将所有三个图像放在侧 li 标签中的提示。并在 CSS 中为 li 标签分配一个属性 display: inline 块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T17:03:31.667

有很多方法不能使它正确。特别是'浮动：中心'。

我在这里[摆弄了一个例子](http://jsfiddle.net/ESWnh/1/)，在此处摆弄了一个[基本的 .css](http://jsfiddle.net/ESWnh/2/)重置

由于您想在 TD 标签中水平居中，您可以简单地对齐它..

```
<td align="center"> 
```

但是你会注意到'align' 属性是'deprecated' 并且建议你改用CSS。为此，其他人已经向您展示了答案

```
.centre_image {
    text-align:center;
    vertical-align:middle;
} 
```

只要您的元素不是“浮动”的，这个 CSS 就可以工作

ps 'DEPRECATED' 并不邪恶。

ps w3school在 StackOverflow 上的[名声不太好。](https://meta.stackoverflow.com/search?tab=votes&q=w3school)

# rotation - 将段落或单元格旋转任意度数——Itext

> ID：15414923
> 
> 赞同：11
> 
> 时间：2013-03-14T16:30:40.263
> 
> 标签：rotation, itext, cell, paragraph

我有一个网站，用户可以在其中上传照片并创建相册。此外，他们可以在绝对位置、旋转和对齐位置添加文本。文本可以有新行。

我一直在使用 Itext 库来自动创建稍后打印的 Photobooks 高质量 Pdf。

将用户上传的图像添加到 PDF 非常简单，当我尝试添加文本时问题就来了。

理论上我需要做的是定义一段具有一定宽度和高度的段落，设置用户文本、字体、字体样式、对齐方式（居中、左、右、对齐），最后设置旋转。

对于我读过的有关 Itext 的内容，我可以创建一个段落来设置用户属性，并使用 ColumnText 对象来设置绝对位置、宽度和高度。但是，不可能设置任何大于单线的旋转。

我也不能使用表格单元格，因为旋转方法只允许 90 的倍数。

`ColumnText.showTextAligned()`有没有办法添加一段旋转（比如 20 度）的段落，而不必使用该方法和所有涉及的数学逐行添加文本？

**---- 编辑：08-Ago-2013 ----**

如果它可以帮助任何人，这是我用来解决这个问题的代码（感谢布鲁诺）：

```
//Create the template that will contain the text
PdfContentByte canvas = pdfWriter.getDirectContent();
PdfTemplate textTemplate = canvas.createTemplate(imgWidth, imgHeight); //The width and height of the text to be inserted

ColumnText columnText = new ColumnText(textTemplate);

columnText.setSimpleColumn(0, 0, imgWidth, imgHeight);
columnText.addElement(paragraph);

columnText.go();

//Create de image wraper for the template
Image textImg = Image.getInstance(textTemplate);

//Asign the dimentions of the image, in this case, the text
textImg.setInterpolation(true);
textImg.scaleAbsolute(imgWidth, imgHeight);
textImg.setRotationDegrees((float) -textComp.getRotation()); //Arbitrary number of degress
textImg.setAbsolutePosition(imgXPos, imgYPos);

//Add the text to the pdf
pdfDocument.add(textImg); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T06:35:07.637

*   创建一个`PdfTemplate`对象；只是一个矩形。
*   画上你`ColumnText`的`PdfTemplate`；不用担心旋转，只需用您要添加到列中的任何内容填充矩形。
*   包裹`PdfTemplate`里面的一个`Image`物体；这只是为了方便，避免数学。这并不意味着您的文本将被光栅化。
*   现在对 应用旋转和绝对位置`Image`并将其添加到您的文档中。

你的问题现在解决了;-)

PS：我是 iText in Action 书籍的作者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T12:36:53.917

感谢我们的两位朋友（Bruno 和 BernalCarlos），我为在项目中使用“RTL”的用户提供的最终代码如下：

```
// step 1
Document document = new Document();
document.setPageSize(PageSize.A4);

// step 2
PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(destination_file));
CreateBorder event = new CreateBorder();
writer.setPageEvent(event);

// step 3
document.open();

// step 4
int imgWidth=400;
int imgHeight=50;
//Create the template that will contain the text
PdfContentByte canvas = writer.getDirectContent();
PdfTemplate textTemplate = canvas.createTemplate(imgWidth, imgHeight);
//The width and height of the text to be inserted

ColumnText columnText = new ColumnText(textTemplate);
columnText.setSimpleColumn(0, 0, imgWidth, imgHeight);
columnText.setRunDirection(PdfWriter.RUN_DIRECTION_RTL);
columnText.addElement(new Paragraph("محاسبه بار غیر متعادل", font_IranSemiBold));
columnText.go();

//Create de image wraper for the template
Image textImg = Image.getInstance(textTemplate);

//Asign the dimentions of the image, in this case, the text
textImg.setInterpolation(true);
textImg.scaleAbsolute(imgWidth, imgHeight);
textImg.setRotationDegrees(90); //Arbitrary number of degress
textImg.setAbsolutePosition(50, 200);

//Add the text to the pdf
document.add(textImg);

// step 5
document.close(); 
```

# ruby-on-rails - 如何使用我的 Mac Mini 服务器上的 ActionMailer 加快电子邮件发送速度？

> ID：15414928
> 
> 赞同：1
> 
> 时间：2013-03-14T16:31:07.330
> 
> 标签：ruby-on-rails, actionmailer, postgresql-9.2, rails-postgresql

我目前正在使用运行 OS X Server 的 Mac Mini Server。该服务器使用 Phusion Passenger 托管多个 Ruby on Rails 应用程序，其中两个使用 PostgreSQL 数据库。其中一个应用程序有一个使用 ActionMailer 发送电子邮件的邮件列表数据库。在撰写本文时，当我们发送时事通讯时，应用程序将发送 224 封电子邮件。

我们在 SMTP 配置中使用了 GoDaddy 电子邮件地址。这些电子邮件只用了五分钟就发送出去了。但是 GoDaddy 每天只允许发送 250 封电子邮件。他们还只允许您一次购买 50 个继电器，最少三个月。我们不确定随着邮件列表的增长，这对我们有多大的帮助。按照我们的增长速度，我们可以在我们已经支付的三个月内将 50 人添加到邮件列表中。我觉得我们应该访问在我们的 Mac Mini 服务器上打开邮件服务器。

在从 Apple 得到一些问题的回答后，我能够让邮件服务器正常工作，我可以在其中发送和接收电子邮件。但是，当我发送相同的电子邮件时，需要 30 分钟而不是 5 分钟。OS X Server 的文档仍然有来自 Lion Server 的旧信息，它引用了不再适用于 OS X Server 的服务器管理工​​具。

我希望发送电子邮件的时间可能相同，因为 Rails 应用程序的数据库和邮件服务器在同一台机器上。但是总的来说，我理解在某些情况下使用相同的资源可能会存在一些争议。有什么方法可以加快电子邮件的发送速度？不幸的是，没有为 OS X Server 提供服务器管理工​​具。OS X Server 的文档在很大程度上毫无价值，因为它们引用了不再存在的 Server Admin Tools。

我已经在服务器故障上发布了这个并以不同的方式提问。但是在这里我想问一下我是否可以在我的 Rails 应用程序中做一些特定的事情，这可能会使使用 ActionMailer 发送电子邮件更有效。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T15:01:00.977

我已停止在我的 Mac Mini 服务器上使用邮件服务。我无法通过 Apple 技术支持找到解决方案。直到一个月前，我才经历了这一切，当时我们花了将近一个小时才发送电子邮件。我决定寻找其他 SMTP 选项。

我发现了 Mandrill（由 MailChimp 的创始人创建）。它们允许您每月免费发送 12,000 封邮件，然后每 1000 封电子邮件发送最低金额（我认为）。我所要做的就是更改我的 SMTP 配置以使用 Mandrill 并添加几个 TXT DNS 记录，然后我就设置好了。

在我尝试邮件服务之前，我使用的是 GoDaddy，它花了大约 8 分钟发送大约 250 封电子邮件。我第一次使用 Mandrill 向我的整个邮件列表（近 350 个）发送电子邮件，用时不到三分钟。没有广告或类似的东西。我成功发送了 GoDaddy 和 Mandrill 电子邮件。我已将所有 Rails 应用程序更改为使用 Mandrill SMTP 设置。可用的报告很棒。

[山魈网站](https://mandrillapp.com "山魈网站")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:02:43.960

我们有类似的情况，我们根据面试结果向求职者发送 100-300 封电子邮件。通过 ActionMailer 发送电子邮件很慢，因为每封电子邮件通常需要几秒钟。

也就是说，发送电子邮件是作业队列的经典用例之一。一个[类似的问题提供了一些有用的答案](https://stackoverflow.com/questions/10125663/how-de-we-send-out-5000-emails-per-hour-using-actionmailer-in-ruby-on-rails)，但我可以告诉你，我使用了[Resque](https://github.com/defunkt/resque)和[ResqueMailer](https://github.com/zapnap/resque_mailer)，并且对结果非常满意。它确实需要建立一个[Redis](http://redis.io/)服务，但这样做相对容易。

# angularjs - 带有嵌套模型的 CRUD 模型

> ID：15414930
> 
> 赞同：2
> 
> 时间：2013-03-14T16:31:08.860
> 
> 标签：angularjs

我目前正在为我的应用管理员构建一个 CRUD。我正在使用带有 RESTfull API 的 AngularJS。我可以成功保存一个简单的模型。但是当我有多对多关系时，在设置更新/创建表单时我有点迷茫。我已经建立了一个 Plunker 来展示这个尝试： [http ://plnkr.co/edit/okeNuYBJ5f33gtu6WBoW](http://plnkr.co/edit/okeNuYBJ5f33gtu6WBoW)

## 编辑：

现在使用复选框而不是**Jason**建议的下拉菜单：http:
[//plnkr.co/edit/okeNuYBJ5f33gtu6WBoW](http://plnkr.co/edit/okeNuYBJ5f33gtu6WBoW)
但我的问题 #3 仍未解决。**如何保存那些更新/创建的关系？**

因此，我拥有与角色模型具有多对多关系的用户模型。我能够显示/列出模型及其关系。编辑用户时，我加载所有角色，以便 UI 可以构建要选择的角色下拉列表。我希望有尽可能多的下拉列表。所以我将我的下拉菜单嵌套在一个 repeat="userRole in user.role" 中。

**进行更新时**

**第一个问题**：如果用户有很多角色，它会显示尽可能多的下拉列表，但每个角色的选定角色是第一个关系。

**第二个问题**：我有一个按钮可以为加载的用户添加一个新角色。我不确定我做对了，因为保存时我看不到任何新附加角色的痕迹。

**第三个问题**：保存时我失去了与角色的联系。只有用户被更新。我的表格是错误的，但问题出在哪里？

**进行创建时**

我无法将角色链接到新用户。当我点击*“添加新角色”*时，角色列表的第一个角色被推送给用户。但尚未创建用户。所以我得到一个错误。我的表格又一次错了。错误是什么？保存新用户时如何发布相关角色？

以下是一些代码，以防 Plunker 不起作用：

*索引.html*

```
<!DOCTYPE html>
<html lang="en" xmlns:ng="http://angularjs.org" data-ng-app="CRUD">
    <head>
         <meta charset="UTF-8" />
         <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap.no-icons.min.css" />
         <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/2.0/css/font-awesome.css" />
    </head>
    <body>
        <div class="span6" ng-view></div>
        <script src="http://code.angularjs.org/1.1.0/angular.min.js"></script>
        <script src="http://code.angularjs.org/1.1.0/angular-resource.js"></script>
        <script src="/crud.js"></script>
    </body>
</html> 
```

*crud.js*我的 AngularJS 特定代码

```
var users = [
    {'id':1,'name':'User 1', 'role':[{'id':1,'name':'Role 1'},{'id':2,'name':'Role 2'}]},
    {'id':2,'name':'User 2', 'role':[{'id':2,'name':'Role 2'}]},
    {'id':3,'name':'User 3', 'role':[{'id':1,'name':'Role 1'}]},
    {'id':4,'name':'User 4', 'role':[{'id':3,'name':'Role 3'},{'id':2,'name':'Role 2'}]}
];
var roles = [
    {'id':1,'name':'Role 1'},
    {'id':2,'name':'Role 2'},
    {'id':3,'name':'Role 3'}
];
/* Route */
angular.module('CRUD', []).
    config(['$routeProvider', function ($routeProvider) {
        $routeProvider.
            when('/create', {templateUrl: 'create.html',controller: ctrlCreate}).
            when('/read', {templateUrl: 'read.html',controller: ctrlRead}).
            when('/update/:userId', {templateUrl: 'update.html', controller: ctrlUpdate}).
            otherwise({redirectTo: 'read'});
    }]);

/* Controller CREATE */
function ctrlCreate($scope, $http, $location) {

    // dirty hack to find the user to update (in real life it would be loaded via REST)
    $scope.user = null;
    $scope.roles = roles;

    $scope.save = function() {
        // dirty hack to change the user (in real life it would be trigger a POST request to the server with updated model)
        users.push($scope.user);

        //if a scope digestion is already going on then it will get picked up and you won't have to call the $scope.$apply() method
        if(!$scope.$$phase) { //this is used to prevent an overlap of scope digestion
            $scope.$apply(); //this will kickstart angular to recognize the change
        }
        $location.path('/');
    };

    $scope.addRole = function(){
        $scope.user.role.push(roles[0]);
    };
}
ctrlCreate.$inject = ['$scope','$http','$location'];

/* Controller READ */
function ctrlRead($scope, $http, $location) {
    // dirty hack to find the user to update (in real life it would be loaded via REST)
    $scope.users = users;
    $scope.roles = roles;
}
ctrlRead.$inject = ['$scope','$http','$location'];

/* Controller UPDATE */
function ctrlUpdate($scope, $http, $location, $routeParams) {
    $scope.user = null;
    $scope.roles = roles;
    var id=$routeParams.userId;
    // dirty hack to find the user to update (in real life it would be loaded via REST)
    for (var i = 0; i < users.length; i++) {
        if (users[i].id==id) {
            $scope.user=users[i];
            console.debug($scope.user.role);
        }
    }

    $scope.save = function() {
        // dirty hack to change the user (in real life it would be trigger a PUT request to the server with updated model)
        for (var i = 0; i < users.length; i++) {
            if (users[i].id==id) {
                users[i] = $scope.user;
            }
        }
        //if a scope digestion is already going on then it will get picked up and you won't have to call the $scope.$apply() method
        if(!$scope.$$phase) { //this is used to prevent an overlap of scope digestion
            $scope.$apply(); //this will kickstart angular to recognize the change
        }
        $location.path('/');
    };

    $scope.addRole = function(){
        $scope.user.role.push(roles);
        console.debug($scope.user.role);
    };
}
ctrlUpdate.$inject = ['$scope','$http','$location', '$routeParams']; 
```

现在我的模板：

*创建.html*

```
<form>
    <div class="control-group">
        <label class="control-label">Name</label>
         <input type="text" ng-model="user.name" placeholder="Enter a name here">
    </div>
    <div ng-repeat="userRole in user.role">
        <div class="control-group">
        <label class="control-label">Role</label>
        <select ng-selected="userRole.id">
            <option ng-repeat="role in roles" value="{{role.id}}">{{role.name}}</option>
        </select>
        </div>
    </div>
    <button ng-click="addRole()">Attach another role</button>
    <br />
    <br />
    <input type="submit" value="Submit" ng-click="save()" class="btn btn-primary">
    <a href="#/" class="btn">Cancel</a>
</form> 
```

*读取.html*

```
<br />
<table class="table table-bordered table-striped table-centred table-condensed table-hover">
    <thead>
        <tr>
            <th>User Name</th>
            <th>Role Name</th>
            <th>Action</th>
        </tr>
        </thead>
    <tbody>
        <tr ng-repeat="user in users">
            <td>{{user.name}}</td>
            <td>
                <span ng-repeat="role in user.role">{{role.name}}</span>
            </td>
            <td>
                <a title="edit" href="#/update/{{user.id}}"><i class="icon-edit"></i></a>
            </td>
        </tr>
    </tbody>
</table>
<br />
<a href="#/create" class="btn btn-primary"><i class="icon-plus"></i>&nbsp;Create a new user</a> 
```

*更新.html*

```
<form>
    <div class="control-group">
        <label class="control-label">Name</label>
         <input type="text" ng-model="user.name" placeholder="Enter a name here">
    </div>
    <div ng-repeat="userRole in user.role">
        <div class="control-group">
        <label class="control-label">Role</label>
        <select ng-selected="userRole.id">
            <option ng-repeat="role in roles" value="{{role.id}}">{{role.name}}</option>
        </select>
        </div>
    </div>
    <button ng-click="addRole()">Attach another role</button>
    <br />
    <br />
    <input type="submit" value="Submit" ng-click="save()" class="btn btn-primary">
    <a href="#/" class="btn">Cancel</a>
</form> 
```

如果您看到一些糟糕的编码或错误的架构，请提出建议（我想我可以做一些指令，例如在添加新角色时可能吗？）。我希望这足够清楚。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:58:47.000

您可以通过重新设计 UI 来解决前两个问题。不要使用下拉菜单，而是使用复选框字段。plnkr 示例：http: [//plnkr.co/edit/hgq2hmbRty7B9oryQnkm](http://plnkr.co/edit/hgq2hmbRty7B9oryQnkm)

一旦页面上的移动部分减少，希望调试第三个问题会很容易。

# java - 从按钮单击事件打开另一个 JFrame

> ID：15414937
> 
> 赞同：0
> 
> 时间：2013-03-14T16:31:29.923
> 
> 标签：java, swing, jframe

我的问题是如何`JFrame`在同一个包中打开另一个已经使用按钮 Click 事件创建的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:33:55.357

像这样的东西

```
frame.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:33:39.060

尝试调用：

```
frame.setVisible(true); 
```

`frame`你的JFrame（你打开的那个）在哪里被调用。

# android - 应用程序在 getHeight 和 getWidth 上崩溃

> ID：15414945
> 
> 赞同：1
> 
> 时间：2013-03-14T16:31:49.710
> 
> 标签：android, crash

我需要一些帮助，因为当我想申请`display.getWidth()`and`display.getHeight()`时，Eclipse 中没有错误，但是当我想在虚拟设备上启动它时，应用程序崩溃（应用程序已意外停止......）

```
public class GameState extends Activity {

//Largeur et hauteur de l'écran
Display display = getWindowManager().getDefaultDisplay(); 
int _screenWidth = display.getWidth();
int _screenHeight = display.getHeight();

//La balle
final int _ballSize = 10;
int _ballX = _screenWidth/2;    int _ballY = _screenHeight/2;
int _ballVelocityX = 2;     int _ballVelocityY = 4;

//Les barres
final int _batLength = 75;  final int _batHeight = 10;
int _topBatX = (_screenWidth/2) - (_batLength / 2);
final int _topBatY = 10;
int _bottomBatX = (_screenWidth/2) - (_batLength / 2);  
final int _bottomBatY = _screenHeight - 20; 
```

ETC

在此先感谢（我是法语，所以请使用简单的单词）

编辑 1

像这样 ？

```
public class GameState extends Activity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Display display = getWindowManager().getDefaultDisplay(); 
    setContentView(display);}

//Largeur et hauteur de l'écran
int _screenWidth = display.getWidth();
int _screenHeight = display.getHeight();

//La balle
final int _ballSize = 10;
int _ballX = _screenWidth/2;    int _ballY = _screenHeight/2;
int _ballVelocityX = 2;     int _ballVelocityY = 4; 
```

在这里我得到 3 个错误：Activity 类型中的方法 setContentView(int) 不适用于参数（显示）

并且 2 次：显示无法解决

```
 03-14 16:29:44.655: E/AndroidRuntime(538): FATAL EXCEPTION: main
03-14 16:29:44.655: E/AndroidRuntime(538): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.nicmer.pong/com.salocincreations.pong.P1_vs_P1}: android.view.InflateException: Binary XML file line #8: Error inflating class com.salocincreations.pong.GameView
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.os.Looper.loop(Looper.java:123)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-14 16:29:44.655: E/AndroidRuntime(538):  at java.lang.reflect.Method.invokeNative(Native Method)
03-14 16:29:44.655: E/AndroidRuntime(538):  at java.lang.reflect.Method.invoke(Method.java:507)
03-14 16:29:44.655: E/AndroidRuntime(538):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-14 16:29:44.655: E/AndroidRuntime(538):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-14 16:29:44.655: E/AndroidRuntime(538):  at dalvik.system.NativeStart.main(Native Method)
03-14 16:29:44.655: E/AndroidRuntime(538): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class com.salocincreations.pong.GameView
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.view.LayoutInflater.createView(LayoutInflater.java:518)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
03-14 16:29:44.655: E/AndroidRuntime(538):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.app.Activity.setContentView(Activity.java:1657)
03-14 16:29:44.655: E/AndroidRuntime(538):  at com.salocincreations.pong.P1_vs_P1.onCreate(P1_vs_P1.java:20)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-14 16:29:44.655: E/AndroidRuntime(538):  ... 11 more
03-14 16:29:44.655: E/AndroidRuntime(538): Caused by: java.lang.reflect.InvocationTargetException
03-14 16:29:44.655: E/AndroidRuntime(538):  at java.lang.reflect.Constructor.constructNative(Native Method)
03-14 16:29:44.655: E/AndroidRuntime(538):  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
03-14 16:29:44.655: E/AndroidRuntime(538):  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
03-14 16:29:44.655: E/AndroidRuntime(538):  ... 21 more
03-14 16:29:44.655: E/AndroidRuntime(538): Caused by: java.lang.NullPointerException
03-14 16:29:44.655: E/AndroidRuntime(538):  at com.salocincreations.pong.GameState.<init>(GameState.java:12)
03-14 16:29:44.655: E/AndroidRuntime(538):  at com.salocincreations.pong.GameThread.<init>(GameThread.java:19)
03-14 16:29:44.655: E/AndroidRuntime(538):  at com.salocincreations.pong.GameView.<init>(GameView.java:23)
03-14 16:29:44.655: E/AndroidRuntime(538):  ... 24 more 
```

编辑 2

```
package com.salocincreations.pong;

import android.app.Activity;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.os.Bundle;

public class GameState extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.p1_vs_p1);

    Display display = getWindowManager().getDefaultDisplay(); 
    int _screenWidth = display.getWidth();
    int _screenHeight = display.getHeight();

    //La balle
    final int _ballSize = 10;
    int _ballX = _screenWidth/2;    int _ballY = _screenHeight/2;
    int _ballVelocityX = 2;     int _ballVelocityY = 4;

    //Les barres
    final int _batLength = 75;  final int _batHeight = 10;
    int _topBatX = (_screenWidth/2) - (_batLength / 2);
    final int _topBatY = 10;
    int _bottomBatX = (_screenWidth/2) - (_batLength / 2);  
    final int _bottomBatY = _screenHeight - 20;

    public GameState()
    {
    }

    //The update method
    public void update() {

    _ballX += _ballVelocityX;
    _ballY += _ballVelocityY;

    //DEATH!
    if(_ballY > _bottomBatY + 10 || _ballY < 0)         
    {_ballX = 100;  _ballY = 100;}//Collisions with the goals

    if(_ballX > _screenWidth || _ballX < 0)
                _ballVelocityX *= -1;   //Collisions with the sides     

    if(_ballX > _topBatX && _ballX < _topBatX+_batLength && _ballY - 16 < _topBatY)         
                     _ballVelocityY *= -1;  //Collisions with the bats      

    if(_ballX > _bottomBatX && _ballX < _bottomBatX+_batLength 
                    && _ballY + 16 > _bottomBatY)
                           _ballVelocityY *= -1;
    }

    public boolean surfaceTouched(float posX, float posY) {
        _topBatX = (int) posX;
        _bottomBatX = (int) posX;

        return true;
        }

    //the draw method
    public void draw(Canvas canvas, Paint paint) {

    //Clear the screen
    canvas.drawRGB(0, 0, 0);

    //set the colour
    paint.setARGB(200, 0, 200, 700);

    //draw the ball
    canvas.drawRect(new Rect(_ballX,_ballY,_ballX + _ballSize,_ballY + _ballSize),
                                 paint);

    //draw the bats
    canvas.drawRect(new Rect(_topBatX, _topBatY, _topBatX + _batLength,
                                          _topBatY + _batHeight), paint); //top bat
    canvas.drawRect(new Rect(_bottomBatX, _bottomBatY, _bottomBatX + _batLength, 
                                          _bottomBatY + _batHeight), paint); //bottom bat

        // Nous allons dessiner nos points par rapport à la résolution de l'écran
        int iWidth = canvas.getWidth(); // Largeur
        int iHeight = canvas.getHeight(); // Hauteur

        // Affecter une couleur de manière aléatoire
            paint.setARGB(255, 500, 500, 500);
            // Définir l'épaisseur du segment
            paint.setStrokeWidth (2);
            // Puis dessiner nos points dans le cavenas
            canvas.drawLine(0, iHeight/2, iWidth, iHeight/2, paint);    
            canvas.drawCircle(iWidth/2, iHeight/2, 50, paint);
        }            
    } 
```

编辑 3

```
package com.salocincreations.pong;

import android.app.Activity;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;

public class GameState extends Activity {
    @Override
    public void onWindowFocusChanged(boolean hasFocus) {
     super.onWindowFocusChanged(hasFocus);
     Display display = getWindowManager().getDefaultDisplay(); 
    int _screenWidth = display.getWidth();
    int _screenHeight = display.getHeight();;

    //La balle
    final int _ballSize = 10;
    int _ballX = _screenWidth/2;    int _ballY = _screenHeight/2;
    int _ballVelocityX = 2;     int _ballVelocityY = 4;

    //Les barres
    final int _batLength = 75;  final int _batHeight = 10;
    int _topBatX = (_screenWidth/2) - (_batLength / 2);
    final int _topBatY = 10;
    int _bottomBatX = (_screenWidth/2) - (_batLength / 2);  
    final int _bottomBatY = _screenHeight - 20;

    public GameState()
    {
    }

    //The update method
    public void update() {

    _ballX += _ballVelocityX;
    _ballY += _ballVelocityY;

    //DEATH!
    if(_ballY > _bottomBatY + 10 || _ballY < 0)         
    {_ballX = 100;  _ballY = 100;}//Collisions with the goals

    if(_ballX > _screenWidth || _ballX < 0)
                _ballVelocityX *= -1;   //Collisions with the sides     

    if(_ballX > _topBatX && _ballX < _topBatX+_batLength && _ballY - 16 < _topBatY)         
                     _ballVelocityY *= -1;  //Collisions with the bats      

    if(_ballX > _bottomBatX && _ballX < _bottomBatX+_batLength 
                    && _ballY + 16 > _bottomBatY)
                           _ballVelocityY *= -1;
    }

    public boolean surfaceTouched(float posX, float posY) {
        _topBatX = (int) posX;
        _bottomBatX = (int) posX;

        return true;
        }

    //the draw method
    public void draw(Canvas canvas, Paint paint) {

    //Clear the screen
    canvas.drawRGB(0, 0, 0);

    //set the colour
    paint.setARGB(200, 0, 200, 700);

    //draw the ball
    canvas.drawRect(new Rect(_ballX,_ballY,_ballX + _ballSize,_ballY + _ballSize),
                                 paint);

    //draw the bats
    canvas.drawRect(new Rect(_topBatX, _topBatY, _topBatX + _batLength,
                                          _topBatY + _batHeight), paint); //top bat
    canvas.drawRect(new Rect(_bottomBatX, _bottomBatY, _bottomBatX + _batLength, 
                                          _bottomBatY + _batHeight), paint); //bottom bat

        // Nous allons dessiner nos points par rapport à la résolution de l'écran
        int iWidth = canvas.getWidth(); // Largeur
        int iHeight = canvas.getHeight(); // Hauteur

        // Affecter une couleur de manière aléatoire
            paint.setARGB(255, 500, 500, 500);
            // Définir l'épaisseur du segment
            paint.setStrokeWidth (2);
            // Puis dessiner nos points dans le cavenas
            canvas.drawLine(0, iHeight/2, iWidth, iHeight/2, paint);    
            canvas.drawCircle(iWidth/2, iHeight/2, 50, paint);
        }            
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:37:41.050

在您创建之前，您无法使用它`DisplayManager`来获取您想要的任何信息`Activity`。

```
public class GameState extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.your_layout);

    Display display = getWindowManager().getDefaultDisplay(); 
    int _screenWidth = display.getWidth();
    int _screenHeight = display.getHeight();

    //La balle
    final int _ballSize = 10;
    int _ballX = _screenWidth/2;    int _ballY = _screenHeight/2;
    int _ballVelocityX = 2;     int _ballVelocityY = 4;

    //Les barres
    final int _batLength = 75;  final int _batHeight = 10;
    int _topBatX = (_screenWidth/2) - (_batLength / 2);
    final int _topBatY = 10;
    int _bottomBatX = (_screenWidth/2) - (_batLength / 2);  
    final int _bottomBatY = _screenHeight - 20;

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:41:15.997

在屏幕获得焦点之前，您不会获得宽度和高度。尝试这个：

```
@Override
    public void onWindowFocusChanged(boolean hasFocus) {
     super.onWindowFocusChanged(hasFocus);
Display display = getWindowManager().getDefaultDisplay(); 
    int _screenWidth = display.getWidth();
    int _screenHeight = display.getHeight();

    //La balle
    final int _ballSize = 10;
    int _ballX = _screenWidth/2;    int _ballY = _screenHeight/2;
    int _ballVelocityX = 2;     int _ballVelocityY = 4;

    //Les barres
    final int _batLength = 75;  final int _batHeight = 10;
    int _topBatX = (_screenWidth/2) - (_batLength / 2);
    final int _topBatY = 10;
    int _bottomBatX = (_screenWidth/2) - (_batLength / 2);  
    final int _bottomBatY = _screenHeight - 20;
} 
```

# ruby-on-rails - 在 Rails 模型的表单中添加发送电子邮件选项

> ID：15414952
> 
> 赞同：0
> 
> 时间：2013-03-14T16:32:07.333
> 
> 标签：ruby-on-rails

在我的用户填写表格后，我希望他们可以选择发送或不发送电子邮件。

我可以通过执行以下操作在控制器中轻松完成此操作：

```
send_email if params[:entry] 
```

但我不确定如何在我的 form_for 下引入这个参数，因为它不是模型的一部分。

我怎样才能让这个参数显示在视图中并在提交时可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:48:16.980

在块中使用`#check_box_tag`表单助手`form_for`

它可以像这样简单：

```
<%= form_for @notice do |f| %>
  <%= f.label :text, 'Notice Text' %>
  <%= f.text_area :text %><br />
  <%= label_tag 'entry', 'Send Email?' %>
  <%= check_box_tag 'entry' %>
  <%= f.submit %>
<% end %> 
```

# sql - SQL WHILE 语句错误“列前缀与查询中使用的表名或别名不匹配”

> ID：15414953
> 
> 赞同：0
> 
> 时间：2013-03-14T16:32:08.220
> 
> 标签：sql, sql-server-2008, while-loop, cumulative-sum

我正在尝试运行以下 SQL 语句并收到以下消息

列前缀“timInvtTran”与查询中使用的表名或别名不匹配。

基本上我想要做的是在每次库存交易后获得最终的手头数量（QOH）。对此的一个假设是，当对 TranQty 求和时，您将得到结果 QOH。我正在尝试循环数据并添加 TranQty 的运行总数，根据定义，这将是 QOH。我将我的 QOH 变量命名为 @currQOH 。

我知道问题出在我的 SET 语句中，但我不知道为什么会这样。

作为旁注，我是否走在正确的道路上以获取 TranQty 的运行总数？我不想写入数据库，所以我不想为我的运行总计创建新表。我研究了高低，找不到任何东西。

任何帮助将不胜感激。

```
DECLARE @currQOH INT
SET @currQOH=0

WHILE(  Select ItemKey  from timInvtTran) = 41511
BEGIN
    SET @currQOH = @currQOH + timInvtTran.TranQty
    BREAK

END

select @currQOH, ItemKey, TranID
from timInvtTran
where timInvtTran.ItemKey = 41511  and substring(tranid,12,2) <>'SH'
order by timinvttran.createdate desc 
```

顺便说一句，PI 日快乐！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:49:55.090

试试这个

```
DECLARE @currQOH INT
SET @currQOH= ( select sum(TranQty) from timInvtTran where ItemKey   = 41511 )

select @currQOH, ItemKey, TranID
from timInvtTran
where timInvtTran.ItemKey = 41511  and substring(tranid,12,2) <>'SH'
order by timInvttran.createdate desc 
```

注意最后一行的大小写变化：timinvttran -> timInvttran

# azure - 天蓝色云服务混乱

> ID：15414956
> 
> 赞同：2
> 
> 时间：2013-03-14T16:32:18.240
> 
> 标签：azure

所以我创建了一个云服务并部署了两个角色：worker 和 web。在比例选项卡上，我看到：

```
Role A (small virtual machine): 1 instance 
Role B (small virtual machine): 1 instance 
```

这是否意味着我的角色在不同的虚拟机中运行？如果是这样，每个可用的 RAM 是多少（小 = 1,75 GB 正确？）

还是它们在同一个虚拟机中运行？

无论是哪种情况：实例数是什么意思？

最后，如果我增加每个角色的实例数量，这会影响定价吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:36:59.857

*   *这是否意味着我的角色在不同的虚拟机中运行？如果是这样，每个可用的 RAM 是多少（小 = 1,75 GB 正确？）*

这意味着您的解决方案中配置了 Web 角色和辅助角色项目。Web 角色将为您提供 IIS 功能（ASP .NET、WebAPI 等），而您的 Worker 角色将作为后端处理器工作。

*   *还是它们在同一个虚拟机中运行？*

每个**实例**都是它自己的虚拟机。您项目中的所有 Web 角色实例都是相同的，并且所有 Worker Role 项目都是相同的。Azure 在后台托管一个负载均衡器，将流量正确地引导到每个负载均衡器。

*   *无论是哪种情况：实例数是什么意思？*

实例的数量对应于您为 Web 和工作角色拥有的活动 VM 的数量。请注意，您的 Web 角色可以具有与您的 Worker 角色不同数量的实例。当您增加负载时，您可以使用实例“横向扩展”您的应用程序。

*   *最后，如果我增加每个角色的实例数量，这会影响定价吗？*

是的，您需要为您部署的每个实例付费（无论它是否正在运行）。请注意，要获得 Azure 的 SLA，它们要求您运行每个角色的两个实例。

有关定价的更多信息，请查看[此处](http://www.windowsazure.com/en-us/pricing/calculator/)。

# java - 使用 Eclipse 编辑反编译的 .jar 文件

> ID：15414967
> 
> 赞同：0
> 
> 时间：2013-03-14T16:32:33.310
> 
> 标签：java, class, jar, sms

我有一个网络应用程序，正是 Cyclos SMS 移动银行软件，我需要编辑一些 .jar 文件。我将它作为 .war 文件导入 Eclipse，编辑了我想要的 .java 文件，运行干净；当我尝试使用 jd-gui 检查需要使用此更改进行更新的 .jar 文件时，我发现其中没有任何更改。

所以我决定通过使用jd-gui反编译来编辑.jar文件，并将其保存到源文件中；通过将其导入 Eclipse 来编辑我想要编辑的 .java 文件；将其导出为 .war 文件并将 .jar 替换为 .war。

我决定查看所做的更改，但在我编辑的文件中，我看到它试图调用整个 Cyclos SMS Web 应用程序的其他 .jar 文件中的其他类但看不到它们，所以它只编译有错误。我如何编辑整个 Cyclos SMS 网络应用程序，因为它有许多 .jar 文件，并且一次只处理其中一个并单独重新编译它而不编译整个网络应用程序总是会导致错误。

再次简单地提出问题，如何在大型 Web 应用程序中编辑 .jar 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:50:49.740

尝试阅读 Cyclos 下载页面[http://www.cyclos.org/download](http://www.cyclos.org/download)，看起来有可用的资源。尝试下载源代码并修改

# c# - 费马素性检验

> ID：15414970
> 
> 赞同：6
> 
> 时间：2013-03-14T16:32:37.453
> 
> 标签：c#, math, primes

我试图为[Fermat primality test](http://en.wikipedia.org/wiki/Fermat_primality_test)编写代码，但显然失败了。因此，如果我理解得很好： if `p`is prime then `((a^p)-a)%p=0`where `p%a!=0`。我的代码似乎没问题，因此很可能我误解了基础知识。我在这里想念什么？

```
private bool IsPrime(int candidate)
    {
        //checking if candidate = 0 || 1 || 2
        int a = candidate + 1; //candidate can't be divisor of candidate+1
        if ((Math.Pow(a, candidate) - a) % candidate == 0) return true;
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T16:47:20.867

阅读关于[Fermat primality test](http://en.wikipedia.org/wiki/Fermat_primality_test)的维基百科文章，你必须选择一个`a`小于*你*正在测试的候选者，而不是更多。

此外，正如 MattW 评论的那样，仅测试一个`a`不会给你一个关于候选人是否是素数的决定性答案。`a`在确定一个数字可能是素数之前，您必须测试许多可能的 s。即便如此，[有些数字](http://en.wikipedia.org/wiki/Carmichael_number)可能看起来是素数，但实际上是合数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T16:42:15.287

您正在处理非常大的数字，并尝试将它们存储在双精度数中，即只有 64 位。替身将尽其所能保持你的号码，但你会失去一些准确性。

另一种方法：

请记住，mod 运算符可以多次应用，并且仍然给出相同的结果。因此，为避免获得大量数字，您可以在计算功率时应用 mod 运算符。

就像是：

```
private bool IsPrime(int candidate)
{
    //checking if candidate = 0 || 1 || 2
    int a = candidate - 1; //candidate can't be divisor of candidate - 1

    int result = 1;
    for(int i = 0; i < candidate; i++)
    {
        result = result * a;

        //Notice that without the following line, 
        //this method is essentially the same as your own.
        //All this line does is keeps the numbers small and manageable.
        result = result % candidate;
    }

    result -= a;
    return result == 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T16:54:19.607

您的基本算法是正确的，但如果您想对非平凡数字执行此操作，则必须使用比 int 更大的数据类型。

您不应该以您所做的方式实现模幂运算，因为中间结果是巨大的。这是模幂运算的平方乘法算法：

```
function powerMod(b, e, m)
    x := 1
    while e > 0
        if e%2 == 1
            x, e := (x*b)%m, e-1
        else b, e := (b*b)%m, e//2
    return x 
```

例如，437^13 (mod 1741) = 819。如果使用上面显示的算法，没有中间结果会大于 1740 * 1740 = 3027600。但是如果先进行取幂，则中间结果为 437^13是 21196232792890476235164446315006597，你可能想避免。

即便如此，费马检验也不完美。有一些合数，即 Carmichael 数，无论您选择什么见证，它总是会报告质数。如果您想要更好的方法，请寻找 Miller-Rabin 测试。我谦虚地在我的博客上推荐[这篇](http://programmingpraxis.com/essays)关于素数编程的文章。

# java - 替换双链表中的节点

> ID：15414972
> 
> 赞同：0
> 
> 时间：2013-03-14T16:32:47.437
> 
> 标签：java, linked-list

给定两个双链表，我应该更改的不仅仅是元素，还有其中一个列表的节点，以便相同位置的总和等于某个数字。

```
public void repair(int num){
    Node list1 = head1;
    Node right = head2;

    for(int i = 0; i<size; i++){
        int element = num - list1.element;
        Node p = right.previous;
        Node s = right.next;
        right = new Node(element, null, null);

        p.next = right;
        right.previous = p;
        right.next = s;
        s.previous = right;

        list1 = list1.next;
        right = right.next;
    }
} 
```

size =两个列表的大小相同。我已经尝试了很多东西，但它总是在 p.next = right 和 s.previous = right 上给我 nullpointerexception;

我不明白为什么它会给我这个错误。有人可以解释并向我展示解决此问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:41:50.280

这意味着 p 是`null`

```
Node p = right.previous; 
```

一定要回来`null`

看到 as`right`定义为`head2`，您将不得不查看 head 2 并找出为什么`head2.previous`为 null。我想这是列表的开头或其他东西。

您需要进行空检查，以便仅在下一个/上一个节点不为空时运行操作。

# php - mysql查询计数，结果为数字

> ID：15414973
> 
> 赞同：0
> 
> 时间：2013-03-14T16:32:51.277
> 
> 标签：php, mysql

我尝试做的是让一个 mysql 查询在 kla_abbonnement_groep 列中的表 megabase 中搜索单词 zilver、goud、platina 并将单词在列中的时间量返回为一个数字。

数据库列由 2x zilver、2 x goud、2 x platina 组成。

我有以下代码，但它不起作用。我尝试了很多其他方法，但没有显示任何内容。下面的代码不断显示 1，但它应该显示 6。

```
<?
include 'data/php/config.php';
// create query
$result = mysql_query("SELECT COUNT(*) FROM megabase WHERE kla_abbonnement_groep = 'zilver' AND kla_abbonnement_groep = 'goud' AND kla_abbonnement_groep = 'platina'");
$num_rows = mysql_num_rows($result);
echo "$num_rows";
?> 
```

感谢您提前提供任何帮助。

在 RIKESH 的帮助下将代码更改为以下

```
<?
include 'data/php/config.php';
// create query
$query = "SELECT COUNT(*) FROM megabase WHERE kla_abbonnement_groep = 'zilver' OR     kla_abbonnement_groep = 'goud' OR kla_abbonnement_groep = 'platina'";
print mysql_result(mysql_query($query),0)
?> 
```

剩下的问题是如何使用打印在同一页面上的数字，例如 javascript。

当我添加：

```
$result = mysql_result(mysql_query($query),0); 
```

我得到了错误。

解析错误：语法错误，意外的 T_VARIABLE in ... 第 60 行

我得到了它的工作，感谢大家的帮助，如果没有：

这是工作代码！

```
<?
include 'data/php/config.php';
// create query
$query = "SELECT COUNT(*) FROM megabase WHERE kla_abbonnement_groep = 'zilver' OR kla_abbonnement_groep = 'goud' OR kla_abbonnement_groep = 'platina'";
print mysql_result(mysql_query($query),0);
$result1 = mysql_result(mysql_query($query),0);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:34:59.157

使用应该使用`OR`（任何条件满足）而不是`AND`（所有条件必须满足）。

```
$query = "SELECT COUNT(*) as count FROM megabase
WHERE kla_abbonnement_groep = 'zilver'
OR kla_abbonnement_groep = 'goud'
OR kla_abbonnement_groep = 'platina'"; 
```

**更新：**

```
$result = mysql_query($query) or die(mysql_error());
$row = mysql_fetch_assoc($result);
echo $row['count']; 
```

**笔记：**

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:35:43.413

```
SELECT kla_abbonnement_groep, COUNT(kla_abbonnement_groep) FROM megabase 
WHERE kla_abbonnement_groep = 'zilver' 
OR kla_abbonnement_groep = 'goud' 
OR kla_abbonnement_groep = 'platina'
GROUP BY kla_abbonnement_groep 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:59:03.487

回答：

```
<?
include 'data/php/config.php';
// create query
$query = "SELECT COUNT(*) FROM megabase WHERE kla_abbonnement_groep = 'zilver' OR kla_abbonnement_groep = 'goud' OR kla_abbonnement_groep = 'platina'";
print mysql_result(mysql_query($query),0);
$result1 = mysql_result(mysql_query($query),0);
?> 
```

# java - 我的 vector3 类中的线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常

> ID：15414974
> 
> 赞同：1
> 
> 时间：2013-03-14T16:32:52.060
> 
> 标签：java, 3d, nullpointerexception, paint, java-memory-model

好的，所以我得到了这个空指针异常，我自己和我的讲师都无法弄清楚。（他认为它的逻辑不好，我倾向于同意）

我正在制作自己的 3d 对象，并将其直接渲染为 x 和 y 的屏幕空间坐标。这正是我想要的练习，我能够优化数字以获得平滑的渲染，而不会在我的课程计算机上丢掉很多帧（这意味着我不能为我的讲师重现空指针）但是一旦我运行它家里的野兽机器代码帧似乎运行得更快，并且我正在渲染的立方体反复闪烁，同时向控制台吐出空指针异常（即使我操纵数字以减慢它的速度）。但它永远不会崩溃。

这是正在使用的类。

Viewport.java（附加到 JFrame）

```
package com.my3d.graphics;

import java.awt.BasicStroke;
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Paint;
import java.awt.RenderingHints;
import java.awt.geom.Line2D;
import java.util.ArrayList;

import com.my3d.geometry.Cube;
import com.my3d.utils.Props;

public class Viewport extends Canvas implements Runnable
{
    private static final long serialVersionUID = 1L;
    private static final String DEFAULT_NAME = "Viewport";
    private static int viewportCount = 0;

    private static final BasicStroke stroke = new BasicStroke(0.5f);

    private Cube cube;

    private boolean running;

    private String name;
    private int number;

    public Viewport()
    {   
        super();
        //name the Viewport
        if(viewportCount < 10)
            setThisName(DEFAULT_NAME +"_0" +viewportCount);
        else
            setThisName(DEFAULT_NAME +"_" +viewportCount);

        //set Identity
        setNumber(viewportCount);

        //increment the Viewport counter
        viewportCount++;
        cube = new Cube();
        cube.printCubeVertices();
        cube.rotateZ(20);
        cube.printCubeVertices();
        cube.rotateX(20);
        cube.printCubeVertices();
        running = true;
    }

    public Viewport(String n)
    {   
        setThisName(n);

        viewportCount++;
        cube = new Cube();
        //cube.printCubeVertices();
        //cube.rotateZ(20);
    //  cube.printCubeVertices();
        //cube.rotateX(20);
        //cube.printCubeVertices();
        running = true;
    }
    public void tick()
    {
        //cube.rotateY(0.0001);
        //cube.rotateX(0.0001);
        repaint();
        tock();
    }

    private void tock() 
    {
        tick();

    }

    public void setThisName(String n) 
    {
        name = n;
    }

    private void setNumber(int n)
    {
        number = n;
    }

    public Cube getCube()
    {
        return cube;
    }

    public void paint(Graphics g)
    {
         Graphics2D g2 = (Graphics2D)g;
            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            g2.setStroke(stroke);
            Vertex[] verts = cube.getVerts();
            for(int i = 0; i < verts.length; i++)
            {
                ArrayList<Vertex> links = verts[i].getLinks();
                for(int j = 0; j < links.size(); j++)
                {
                    Line2D l = new Line2D.Double(verts[i].getPosition().x()+500,/**/verts[i].getPosition().y()+400,/*|*/links.get(j).getPosition().x()+500,/**/links.get(j).getPosition().y()+400);
                    g2.setColor(Color.RED);
                    g2.draw(l);
                }
            }
    }

    @Override
    public void run() 
    {
        int frame = 0;
        while(running)
        {   
            if(frame == 1)
            {
                cube.rotateY(0.0004);
                cube.rotateZ(-0.0005);
                cube.rotateX(-0.0003);
            }
            if(frame > 200000)
            {
                //cube.rotateY(0.0001);
                //cube.rotateZ(0.000015);
                repaint();
                frame = 0;
            }
            frame++;
        }

    }

} 
```

立方体.java

```
 package com.my3d.geometry;

import java.util.ArrayList;

import com.my3d.graphics.Vector3;
import com.my3d.graphics.Vertex;

public class Cube 
{
    private static final String DEFAULT_NAME = "Cube";
    private static final double DEFAULT_SIZE = 100;
    private static int cubeCount = 0;

    private Vertex[] corners;
    private Vector3 position;
    private Vector3 rotation;
    private String name;
    private int number;

    public Cube()
    {
        if(cubeCount < 10)
            setName(DEFAULT_NAME +"_0" +cubeCount);
        else
            setName(DEFAULT_NAME +"_" +cubeCount);
        //assign Id
        number = cubeCount;
        //Increment cube counter
        cubeCount++;
        corners = new Vertex[8];
        for(int i = 0; i < 8; i++)
            corners[i] = new Vertex();

        corners[0].setPosition(new Vector3(DEFAULT_SIZE,DEFAULT_SIZE,DEFAULT_SIZE));
        corners[1].setPosition(new Vector3(-DEFAULT_SIZE,DEFAULT_SIZE,DEFAULT_SIZE));
        corners[2].setPosition(new Vector3(-DEFAULT_SIZE,DEFAULT_SIZE,-DEFAULT_SIZE));
        corners[3].setPosition(new Vector3(DEFAULT_SIZE,DEFAULT_SIZE,-DEFAULT_SIZE));

        corners[4].setPosition(new Vector3(DEFAULT_SIZE,-DEFAULT_SIZE,DEFAULT_SIZE));
        corners[5].setPosition(new Vector3(-DEFAULT_SIZE,-DEFAULT_SIZE,DEFAULT_SIZE));
        corners[6].setPosition(new Vector3(-DEFAULT_SIZE,-DEFAULT_SIZE,-DEFAULT_SIZE));
        corners[7].setPosition(new Vector3(DEFAULT_SIZE,-DEFAULT_SIZE,-DEFAULT_SIZE));

        corners[0].addLink(corners[1]);
        corners[1].addLink(corners[2]);
        corners[2].addLink(corners[3]);
        corners[3].addLink(corners[0]);

        corners[0].addLink(corners[4]);
        corners[1].addLink(corners[5]);
        corners[2].addLink(corners[6]);
        corners[3].addLink(corners[7]);

        corners[4].addLink(corners[5]);
        corners[5].addLink(corners[6]);
        corners[6].addLink(corners[7]);
        corners[7].addLink(corners[4]);

//      corners[0].addLink(corners[5]);
//      corners[1].addLink(corners[6]);
//      corners[2].addLink(corners[7]);
//      corners[3].addLink(corners[4]);
//      
//      corners[0].addLink(corners[2]);
//      corners[5].addLink(corners[7]);

        setPosition(new Vector3());
    }

    public Cube(String n)
    {
        setName(n);
        //assign Id
        number = cubeCount;
        //Increment cube counter
        cubeCount++;
    }
    ////////////////////////////////////////////////////////////////
    //Setters
    ////////////////////////////////////////////////////////////////

    private void setName(String n) 
    {
        name = n;
    }

    private void setPosition(Vector3 v) 
    {
        position = v;
    }

    public Vertex[] getVerts()
    {
        return corners;
    }

    public void printCubeVertices()
    {
        for(int i = 0; i < 8; i++)
            System.out.println(corners[i].getPosition().toString());
    }

    public void rotateZ(double degrees)
    {

        for(int i = 0; i < corners.length; i++)
        {
            double tempZ = corners[i].getPosition().z();
            double newX = (corners[i].getPosition().x()-position.x())*Math.cos(degrees)-(corners[i].getPosition().y()-position.y())*Math.sin(degrees);
            double newY = (corners[i].getPosition().x()-position.x())*Math.sin(degrees)+(corners[i].getPosition().y()-position.y())*Math.cos(degrees);
            corners[i].setPosition(new Vector3(newX,newY,tempZ));

        }
    }

    public void rotateX(double degrees)
    {

        for(int i = 0; i < corners.length; i++)
        {
            double tempX = corners[i].getPosition().x();
            double newZ = (corners[i].getPosition().z()-position.z())*Math.cos(degrees)-(corners[i].getPosition().y()-position.y())*Math.sin(degrees);
            double newY = (corners[i].getPosition().z()-position.z())*Math.sin(degrees)+(corners[i].getPosition().y()-position.y())*Math.cos(degrees);
            corners[i].setPosition(new Vector3(tempX,newY,newZ));
        }
    }

    public void rotateY(double degrees)
    {

        for(int i = 0; i < corners.length; i++)
        {
            double tempY = corners[i].getPosition().y();
            double newZ = (corners[i].getPosition().z()-position.z())*Math.cos(degrees)-(corners[i].getPosition().x()-position.x())*Math.sin(degrees);
            double newX = (corners[i].getPosition().z()-position.z())*Math.sin(degrees)+(corners[i].getPosition().x()-position.x())*Math.cos(degrees);
            corners[i].setPosition(new Vector3(newX,tempY,newZ));
        }
    }
} 
```

顶点.java

```
 package com.my3d.graphics;

import java.util.ArrayList;

public class Vertex 
{
    private Vector3 position;
    private ArrayList<Vertex> linked = new ArrayList<Vertex>();

    public Vertex()
    {
        setPosition(new Vector3(0.0,0.0,0.0));
    }

    public Vertex(Vector3 v)
    {
        setPosition(v);
    }

    public void setPosition(Vector3 pos) 
    {
        position = pos;
    }

    public void addLink(Vertex v)
    {
        linked.add(v);
    }

    public void removeLink(Vertex v)
    {
        linked.remove(v);
    }

    /////////////////////////////////////////////////////////////////
    //Getters
    /////////////////////////////////////////////////////////////////

    public Vector3 getPosition()
    {
        return position;
    }

    public ArrayList<Vertex> getLinks()
    {
        return linked;
    }

} 
```

Vector3.java

```
 package com.my3d.graphics;

public class Vector3 
{

    private double[] xyz;
//  public double x;
//  public double y;
//  public double z;

    public Vector3()
    {
        xyz = new double []{0.0,0.0,0.0};
//      x = xyz[0];
//      y = xyz[1];
//      z = xyz[2];
    }

    public Vector3(double x,double y,double z)
    {
        xyz = new double []{x,y,z};
//      xyz[0] = x;
//      xyz[1] = y;
//      xyz[2] = z;
    }

    public Vector3(double[] array)
    {
        try
        {
            if(array.length > 3)
            {
                RuntimeException e =  new RuntimeException("The Vector3 is too big by (" +(array.length - 3) +") elements you muppet.\nremember that a Vector3 supports arrays with a length of 3\. You have (" +array.length +")");
                throw e;
            }
            if(array.length < 3)
            {
                RuntimeException e =  new RuntimeException("The Vector3 is too small by (" +(3 - array.length) +") elements you muppet.\nremember that a Vector3 supports arrays with a length of 3\. You have (" +array.length +")");
                throw e;
            }
            xyz[0] = array[0];
            xyz[1] = array[1];
            xyz[2] = array[2];
        }
        catch(RuntimeException e)
        {
            System.out.println(e);
        }
    }

///////////////////////////////////////////////////////////////////////////

    public void x(double a)
    {
        xyz[0] = a;
    }

    public void y(double a)
    {
        xyz[1] = a;
    }

    public void z(double a)
    {
        xyz[2] = a;
    }

    public double x()
    {
        return xyz[0];
    }

    public double y()
    {
        return xyz[1];
    }

    public double z()
    {
        return xyz[2];
    }

    public void normalize()
    {
        double length = Math.sqrt((xyz[0] * xyz[0]) + (xyz[1] * xyz[1]) + (xyz[2] * xyz[2]));
        xyz[0] = xyz[0]/length;
        xyz[1] = xyz[1]/length;
        xyz[2] = xyz[2]/length;
    }

    public String toString()
    {
        return "(" + xyz[0] + "," + xyz[1] + "," + xyz[2] + ")"; 
    }
} 
```

我能做的最好的事情是`public double x(){return xyz[0];}` 在视口类中调用paint方法时在 Vector3 类中跟踪它，但是当我尝试逐步执行时，它们永远不会为空。我得到的印象是 jvm 在尝试在旋转期间为顶点重新分配新位置时正在赶上自己。

编辑：堆栈跟踪

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at com.my3d.graphics.Vector3.x(Vector3.java:70)
at com.my3d.graphics.Viewport.paint(Viewport.java:107)
at java.awt.Canvas.update(Unknown Source)
at sun.awt.RepaintArea.updateComponent(Unknown Source)
at sun.awt.RepaintArea.paint(Unknown Source)
at sun.awt.windows.WComponentPeer.handleEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

附加信息：

管理器.java

```
 package com.my3d.core;

import java.awt.Color;

import com.my3d.graphics.Viewport;
import com.my3d.graphics.Wind;
import com.my3d.utils.Props;

public class Manager {

    /**
 * @param args
 */
public static void main(String[] args) 
{
    Props.loadPropsFromFile();
    Wind wind = new Wind();
    wind.setVisible(true);
    Viewport view = new Viewport("Main view");
    view.setPreferredSize(Props.getWindowSize());
    view.setBackground(Color.LIGHT_GRAY);
    wind.add(view);
    view.setVisible(true);
    wind.pack();
    view.run();
}

} 
```

Wind.java

```
 package com.my3d.graphics;

import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;

import com.my3d.utils.Props;

import javax.swing.JFrame;

public class Wind extends JFrame
{
    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    private boolean fullScreen = false;
    //Constructor
    public Wind()
    {
        super(Props.getDefaultTitle() +Props.getTitleSplash());
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        fullScreen = Props.getFullScreen();
        if (fullScreen)
        {
            setUndecorated(true);
            GraphicsDevice vc;
            GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
            vc= ge.getDefaultScreenDevice();
            vc.setFullScreenWindow(this);
        }
        else
        {
            setBounds(0,0,Props.getWindowWidth(),Props.getWindowHeight());
            setLocationRelativeTo(null);
        }
    }

    public void setTitle(String s)
    {
        //if(Props.getRandomSplashes())
        super.setTitle(Props.getDefaultTitle() +s);
    }

    public void setRandomTitle()
    {
        if(Props.getRandomSplashes())
            Props.setTitleSplash(Props.randomizeSplash());
            super.setTitle(Props.getDefaultTitle() +Props.getTitleSplash());
    }

    public void setFullScreen(boolean b)
    {
        fullScreen = b;
    }

    //this method wont work >>
    public void refactorWindow()
    {
        if (fullScreen)
        {
            setUndecorated(true);
            GraphicsDevice vc;
            GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
            vc= ge.getDefaultScreenDevice();
            vc.setFullScreenWindow(this);
        }
        else
        {
            setSize(Props.getWindowSize());
            setLocationRelativeTo(null);
        }
    }

} 
```

道具.java

```
 package com.my3d.utils;

import java.awt.Dimension;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Random;
import java.util.Scanner;

import javax.imageio.ImageIO;

public class Props 
{   
    private static String gameTitle;
    private static String splashTitle;

    private static Dimension windowSize;

    //private static int gameState;

    private static boolean fullScreen;
    private static boolean randomSplashes;
    private static BufferedImage tileSheet;

    ///////////////////////////////////////////////////////////////
    //Getters
    ///////////////////////////////////////////////////////////////

    public static Dimension getWindowSize()
    {
        return windowSize;
    }

    public static int getWindowWidth()
    {
        return (int) windowSize.getWidth();
    }

    public static int getWindowHeight()
    {
        return (int) windowSize.getHeight();
    }

    public static String getTitleSplash() 
    {
        return splashTitle;
    }

    public static String getDefaultTitle() 
    {
        return gameTitle;
    }

    public static boolean getFullScreen()
    {
        return fullScreen;
    }

    public static boolean getRandomSplashes()
    {
        return randomSplashes;
    }

    public static BufferedImage getTileSheet()
    {
        return tileSheet;
    }

    /////////////////////////////////////////////////////////////////////
    //Setters
    /////////////////////////////////////////////////////////////////////

    public static void setWindowSize(int width, int height) 
    {   
        windowSize = new Dimension(width,height);   
    }

    public static void setTitleSplash(String s) 
    {
        splashTitle = s;
    }

    private static void setDefaultTitle(String s) 
    {
        gameTitle = s;      
    }

    ////////////////////////////////////////////////////////////////////
    //loader
    ////////////////////////////////////////////////////////////////////

    public static void loadPropsFromFile() 
    {
        File file = new File("res\\config\\props.props");
        try 
        {
            Scanner input = new Scanner(file);
            String lInput = input.nextLine().trim();
            setWindowSize(Integer.parseInt(lInput.substring(lInput.indexOf('=')+1,lInput.indexOf(','))),Integer.parseInt(lInput.substring(lInput.indexOf(',')+1,lInput.length())));
            lInput = input.nextLine().trim();
            if(lInput.substring(lInput.indexOf('=')+1,lInput.length()).equals("true"))
                fullScreen = true;
            else
                fullScreen = false;
            lInput = input.nextLine().trim();
            if(lInput.substring(lInput.indexOf('=')+1,lInput.length()).equals("true"))
            {
                lInput = input.nextLine().trim();
                setDefaultTitle(lInput.substring(lInput.indexOf('=')+1,lInput.length()));
                randomSplashes = true;
                setTitleSplash(randomizeSplash());
            }
            else
            {
                lInput = input.nextLine().trim();
                setDefaultTitle(lInput.substring(lInput.indexOf('=')+1,lInput.length()));
                setTitleSplash("");
                randomSplashes = false;

            }
            lInput = input.nextLine().trim();
            try 
            {
                tileSheet = ImageIO.read(new File(loadFromDirectory(lInput.substring(lInput.indexOf('=')+1,lInput.length()))));
            } 
            catch (IOException e) 
            {
                System.out.println("Tilesheet Cannot be found.");
            }
        } 
        catch (FileNotFoundException e) 
        {
            e.printStackTrace();
        }

    }

    ///////////////////////////////////////////////////////////////////
    //Utility
    ///////////////////////////////////////////////////////////////////

    public static String loadFromDirectory(String key)
    {   
        String s = "";
        File sFile = new File("res\\config\\dirs.dir");
        try 
        {
            Scanner sInput = new Scanner(sFile);
            while(sInput.hasNextLine())
            {   
                String st = sInput.nextLine().trim();
                if(key.equals(st.substring(1,st.length())));
                s = sInput.nextLine().trim();
            }
        } 
        catch (FileNotFoundException e) 
        {
            e.printStackTrace();
        }

        return s;

    }

    public static String randomizeSplash()
    {
        if(randomSplashes)
        {
            File sFile = new File("res\\config\\splash.props");
            ArrayList<String> sArray = new ArrayList<String>();
            try 
            {
                Scanner sInput = new Scanner(sFile);
                while(sInput.hasNextLine())
                {
                    sArray.add(sInput.nextLine().trim());
                }
            } 
            catch (FileNotFoundException e) 
            {
                e.printStackTrace();
            }
            Random rand = new Random();
            String s = sArray.get(rand.nextInt(sArray.size()));
            splashTitle = s;
            return s;
        }
        else
            return "";
    }

} 
```

道具.props

```
windowSize =1000,800
startInFullscreen =false
randomSplashes =false
defaultTitle =3D Prototype
tileSheet =tileSheet 
```

目录.dir

```
<startGame>
res\\img\\button\\Start_game_text.png
res\\img\\button\\Start_game_active.png
res\\img\\button\\Start_game_click.png
<quitGame>
res\\img\\button\\Quit_game_text.png
res\\img\\button\\Quit_game_active.png
res\\img\\button\\Quit_game_click.png
<menuBackground>
res\\img\\Menu_background.png
<resumeGame>
res\\img\\button\\Resume_game_text.png
res\\img\\button\\Resume_game_active.png
res\\img\\button\\Resume_game_click.png
<tileSheet>
res\\img\\Final_Sub_Hunt.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:15:35.833

*更新*：将您的字段标记`xyz`为。我对 JMM 的阅读表明，如果没有同步器或 final，事件调度线程 (EDT) 是合法的，从您的堆栈跟踪而来，在构造函数时看到构造函数尚未初始化的非 final 字段在单独的（您的）线程中运行。请参阅[此 SO 问题](https://stackoverflow.com/questions/11306032/please-explain-initialization-safety-as-spelled-out-in-java-memory-model)或[JMM 常见问题解答](http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html#finalRight)。`Vector3``final``Viewport.run()`

在 JLS 中查看此内容的正确位置是在[第 17.5 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5)中（尽管您确实需要阅读全部 17 篇，并且很多次才能开始理解这一点）：

> 当一个对象的构造函数完成时，它被认为是完全初始化的。只有在对象完全初始化后才能看到对该对象的引用的线程可以保证看到该对象的最终字段的正确初始化值。

请注意，同样的保证不适用于非最终字段；如果你想要那里的安全，你将需要使用某种同步边缘（显式同步器，易失性，等等。）

[来自 Alex Miller](http://tech.puredanger.com/2008/11/26/jmm-and-final-field-freeze/)的相关讨论，我认为他在 StackOverflow 周围的推杆是[https://stackoverflow.com/users/7671/alex-miller](https://stackoverflow.com/users/7671/alex-miller)，如果我们打招呼可能会戳他的头。）还有一个[相关的 SO 问题](https://stackoverflow.com/questions/5299543/java-non-final-ints-visible-after-construction)。

## 原始答案

看起来你的`Vector3(double[])`构造函数中有一个错误，它永远不会初始化该`double[] xyz`字段。只有我能找到该字段不会被初始化并产生 NPE 的地方。

我无法从您的代码中看出您运行了多少线程。如果您`Vector3`在一个线程中创建实例并将它们放入一个集合中，同时它们正在由单独的渲染线程显示，那么您可能会在部分构造状态下观察它们。一般来说，事情的安排使这不太可能（我不记得内存模型关于发布部分构造的对象的内容，但如果你`this`从构造函数中滑出，它可能会发生；我不明白发生在这里。）

JA

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:22:26.137

```
 catch(RuntimeException e)
    {
        System.out.println(e);
    } 
```

此段允许您在不正确初始化数组的情况下创建 Vector3。这是一个潜在的问题。

这两个非默认构造函数在分配它们之前都不会尝试检查 x、y 或 z 是否为空。

我将从那里开始，然后考虑单元测试。

# java - 将 UNIX 时间戳转换为所需的任何格式？

> ID：15414980
> 
> 赞同：-1
> 
> 时间：2013-03-14T16:33:09.793
> 
> 标签：java, android

例如：我能够得到时间戳

```
String date="123456765343";
    final Calendar cal = Calendar.getInstance();
    cal.setTimeInMillis(Long.parseLong(date)*1000);
    Date d = cal.getTime(); // now this reprents the unix timestamp 
```

我想让日期看起来像这样：

**2013 年 3 月 14 日下午 6:31:34**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:37:54.600

您将不得不使用`SimpleDateFormat`（并且您不需要`Calendar`）：

```
Date d = new Date(Long.parseLong(date) * 1000);
SimpleDateFormat sdf = new SimpleDateFormat("dd/MMM/yyyy hh:mm:ss a");
System.out.println(sdf.format(d)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:35:47.030

您可以使用[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)来格式化您的日期。

# ruby-on-rails - Rails seed.db 不保存关系

> ID：15414982
> 
> 赞同：1
> 
> 时间：2013-03-14T16:33:13.087
> 
> 标签：ruby-on-rails

当我尝试使用 db/seeds.rb 文件预填充数据库时，我的代码如下所示：

```
 now = Time.now.beginning_of_hour
later = Time.now.end_of_hour + 1
sch1 = Schedule.create(start_time: now, stop_time: later) 
sch1.channel = channel
sch1.program = cartoon
cartoon.schedules.push(sch1)
sch1.save
cartoon.save 
```

其中 channel 和 cartoon 是在前面的代码中使用 Channel.create 和 Program.create 定义的，并且具有适当的值。

当我查看 rails 控制台时，我看到所有三个对象（频道、节目和时间表）都存在，但没有时间表没有 program_id。（schedule.program 出于某种原因工作得很好）。程序的 program.schedules 也是一个空数组。

作为测试，我在控制台中执行了以下操作：

```
now = Time.now.beginning_of_hour
later = Time.now.end_of_hour + 1
channel = Channel.first
cartoon = Program.first
sch1 = Schedule.create(start_time: now, stop_time: later) 
sch1.channel = channel
sch1.program = cartoon
cartoon.schedules.push(sch1)
sch1.save
cartoon.save 
```

这工作得很好。

种子有什么特别之处？我需要在稍后引用它之前调用 save 吗？该变量显然不为空...

# php - DNS 查找：从 DNS/主机名获取 IP 地址

> ID：15414988
> 
> 赞同：-3
> 
> 时间：2013-03-14T16:33:22.167
> 
> 标签：php, dns, gethostbyname

我需要通过域名获取域的 IP 地址。

1.  网站：hotmail.com / 65.55.72.151
2.  站点：domain.com / 65.254.244.180

可以做到吗，在那种情况下，我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T16:38:14.767

您可以使用以下代码：

```
<?php
$ip = gethostbyname('www.site.com');

echo $ip;
?> 
```

或者，您可以动态操作它...

```
<?php
$url = $_GET['url'];
$ip = gethostbyname($url);

echo $ip;
?> 
```

# php - Pear PHP Mailer 电子邮件发件人和收件人

> ID：15414990
> 
> 赞同：0
> 
> 时间：2013-03-14T16:33:23.857
> 
> 标签：php, email, smtp, pear, sender

我正在使用 Pear PHP Mailer 通过 SMTP 向多个收件人发送电子邮件，但对于每个收件人，它也会向发件人的电子邮件地址发送一封额外的电子邮件。

这是我的代码：感谢任何帮助。

```
...

$from = "$from_email_name <$from_email_addr>";
$html_body = "$html";

$crlf = "\r\n";

$hdrs = array(
            'From'    => $from,
            'Subject' => $subject
            );
$mime = new Mail_mime(array('eol' => $crlf));

$mime->setTXTBody($text_body);
$mime->setHTMLBody($html_body);

$body = $mime->get();
$hdrs = $mime->headers($hdrs);

$mail = Mail::factory('mail',
            array ('host' => $host,
                'port' => $port,
                'auth' => true,
                'username' => $username,
                'password' => $password));

$mail->send($to_email_addr, $hdrs, $body);

.... 
```

此外，在它发送到我的发件人地址的电子邮件中，它说正确的收件人姓名和发件人信息，但它就像发件人正在获取它发送的每个邮件的副本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:48:38.683

它可能是您的邮件服务器提供商的“服务”，可以自动将通过 SMTP 服务器发送的邮件放入您的 IMAP/POP 邮箱。问他是不是这样。

# c# - 数据网格在调整大小时变得模糊

> ID：15414994
> 
> 赞同：2
> 
> 时间：2013-03-14T16:33:28.390
> 
> 标签：c#, winforms, datagrid

我正在使用 Windows 窗体中的 datagridview，并为其分配数据源属性以加载网格。我想更改某些单元格的背景色（当列索引 = 0 时），但是当我这样做并调整表单大小时出现问题，数据网格变得模糊或单元格未正确显示。这些图片将更好地解释它。

调整大小之前： ![在此处输入图像描述](../Images/ba663e5792708539c3703e9c47c2e853.png)

调整大小后： ![在此处输入图像描述](../Images/e2e41b4fa3f17b0428ed7b78e437992f.png)

这是我试图格式化单元格的代码...

```
private void dg_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    // Clients color
    if (e.ColumnIndex == 0)
    {
        int currentClient = e.RowIndex % p.AllClients.Count;
        dg.Rows[e.RowIndex].Cells[0].Style.BackColor = Color.FromArgb(p.AllClients[currentClient].Color);              
     } 
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:49:46.207

问题是即使行也有透明的背景颜色。这是因为您正在使用`Color.FromArgb(int argb)`并且您将 alpha 通道设置为一个透明的低值，因此您`OnBackgrounPaint`的单元格在重新调整大小时无法清除背景。像这样更改最后一行：

```
dg.Rows[e.RowIndex].Cells[0].Style.BackColor = p.AllClients[currentClient].Color; 
```

如果`Color`客户端的属性不是`Color`来自 GDI+ 而是一些 32 位数字，您可以这样做：

```
dg.Rows[e.RowIndex].Cells[0].Style.BackColor = Color.FromArgb(p.AllClients[currentClient].Color); 
Color newColor = dg.Rows[e.RowIndex].Cells[0].Style.BackColor;
dataGridView1.Rows[e.RowIndex].Cells[0].Style.BackColor = Color.FromArgb(255, newColor.R, newColor.G, newColor.B); //remove transparency from the color 
```

# visual-studio-2010 - 在我的可视化 .net 安装应用程序文件夹上设置总控制权限

> ID：15414995
> 
> 赞同：1
> 
> 时间：2013-03-14T16:33:32.153
> 
> 标签：visual-studio-2010, setup-project, folder-permissions

我在 Visual Studio 2010 中开发了一个 winform 应用程序。我创建了一个安装项目来安装应用程序。

当我安装应用程序并选择像 D:\MyAPP 这样的驱动器时，我没有问题，我可以毫无问题地运行我的应用程序，但是当我在 c:\program files\MyAPP 中安装应用程序时，我遇到了问题，因为文件夹和其中的文件对所有用户都没有所有权限，所以一个例子是我不能在数据库文件（sqlce）中写入。

有什么我可以做的吗？安装项目上有配置吗？我可以授予所有用户对文件夹安装及其文件的所有权限吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:37:38.180

“c:\Program 文件的权限”是 Vista/Win7 的事情。这是一个很好的链接：

*   [http://www.vbforums.com/showthread.php?564256-Classic-VB-Where-should-I-store-the-files-that-my-program-uses-creates](http://www.vbforums.com/showthread.php?564256-Classic-VB-Where-should-I-store-the-files-that-my-program-uses-creates)

# iphone - View 在真正的 ipad 设备中无法导航，但在模拟器中运行良好

> ID：15414996
> 
> 赞同：2
> 
> 时间：2013-03-14T16:33:36.423
> 
> 标签：iphone, ios, xcode, ipad

在一个按钮单击中，我将视图导航到另一个 xib，它在真正的 iphone 设备、ipad iphone 两个模拟器中都可以正常工作，但在真正的 ipad 中却不行。这是我的代码：

```
-(IBAction)cardAnimation{
ViewController_ipad *view = [[ViewController_ipad alloc]initWithNibName:@"ViewController_ipad" bundle:nil];

[self.navigationController pushViewController:view animated:YES];
} 
```

但需要注意的一件事是，我`NSLog`在目标类的 viewdidload 方法中完成了这项工作，令人惊讶的是，尽管上面的代码根本没有加载该视图，但该内容正在被记录。可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:25:09.110

我认为您有一个通过 AppDelegate 引用的 MainWindow~ipad.xib 文件，并且您还尝试在 AppDelegate 文件中的 didFinishLaunchingWithOptions: 方法中分配窗口。可能会出现一些问题。每当您尝试推送导航控制器时，它实际上是在推送，但未显示下一个控制器可能是因为该控制器上方的窗口。

它可能会解决您的问题：

**通过单击左侧面板/导航器中的项目-> 选择您的目标并转到摘要选项卡-> 向下滚动到 iPad 部署信息-> 在那里你会找到你的项目设置（不是通过文件-> 项目设置）主界面选项 - >删除名称“MainWindow_iPad”并将其留空并保存。在您的 iPad 上运行该应用程序，它将正常工作。**

祝你好运。:-)

注意：在进行新构建之前，不要忘记清理构建并从设备中删除应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:30:29.793

iPhone 模拟器对文件名不**区分*大小写***。这些设备**区分*大小写***。检查以确保您的笔尖名称实际上不是`Viewcontroller_ipad`或`ViewController_iPad`其他变体。这种行为曾经让我尝试在我的应用程序中使用图像文件 - 它可以在模拟器中工作，而不是在设备上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:51:21.570

尝试全新安装（删除应用程序），如果您是从 xcode 构建，请按住 Option 并转到 Product -> Clean Build Folder

你也用~iphone和~ipad命名你的笔尖吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T17:37:29.097

我遇到了同样的问题，我的 iPad (iOS 5.1.1) 有问题。

当我按下按钮但没有响应时。

那是因为我添加`UIGestureRecognizer`了`self.view`。

**我通过在按钮上添加gestureRecognizer**解决了这个问题。（它只是把戏不是一个合适的解决方案，如果你没有找到任何其他方法，只需实施它。）