# StackOverflow 问答 14337000-14337999

# sql - SQL 中的 IF THEN 语句到 OpenEdge

> ID：14337002
> 
> 赞同：2
> 
> 时间：2013-01-15T11:45:10.610
> 
> 标签：sql, if-statement, openedge

我正在努力通过 ODBC 对 OpenEdge 数据库执行 if 语句。我的查询就像一个魅力，但 Progress 希望我定义不同的 if 语句，我不知道。有没有人可以为我定义正确的查询？

```
 IF            
    {Crediteur code|type=string} = 'HOEFASTE'
 BEGIN       
    (SELECT
        inok."vest-kd-arvo"+RTRIM('-') + RIGHT(CAST((inok."inok-nr" + 1000000) AS varchar(7)),6) AS inokvalue
        ,RTRIM("leso-kd")+RTRIM('-')+inok."vest-kd-arvo"+RTRIM('-')+CAST("inok-nr"AS varchar(6)) AS inokdisplay
        ,RIGHT(CAST((inok."inok-nr") AS varchar(7)),6) + '-' + inok."vest-kd-arvo" + '-' + RTRIM("leso-kd") AS inoknr
        ,RTRIM("leso-kd") AS soortfact
    FROM
        PUB.inok
    WHERE
        inok."vcdc-nr" = {Administratie|type=int32}
        AND inok."inss-kd" NOT IN ('H','G')
    )
ELSE        
    (SELECT   
        inok."vest-kd-arvo"+RTRIM('-') + RIGHT(CAST((inok."inok-nr" + 1000000) AS varchar(7)),6) AS inokvalue
        ,RTRIM("leso-kd")+RTRIM('-')+inok."vest-kd-arvo"+RTRIM('-')+CAST("inok-nr"AS varchar(6)) AS inokdisplay
        ,RIGHT(CAST((inok."inok-nr") AS varchar(7)),6) + '-' + inok."vest-kd-arvo" + '-' + RTRIM("leso-kd") AS inoknr
        ,RTRIM("leso-kd") AS soortfact
    FROM
        PUB.inok
    WHERE
        inok."rela-kd-kre" = {Crediteur code|type=string}
        AND inok."vcdc-nr" = {Administratie|type=int32}
        AND inok."inss-kd" NOT IN ('H','G')
     )
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:17:18.920

如果我理解正确，只有你的`WHERE`-clause 是不同的，基于“Crediteur code”。

您可以将 IF 移动到 -`WHERE`子句内。这将给你留下一个单一的`SELECT`陈述。这种替代方案对您有用吗？

```
SELECT   
    inok."vest-kd-arvo"+RTRIM('-') + RIGHT(CAST((inok."inok-nr" + 1000000) AS varchar(7)),6) AS inokvalue
    ,RTRIM("leso-kd")+RTRIM('-')+inok."vest-kd-arvo"+RTRIM('-')+CAST("inok-nr"AS varchar(6)) AS inokdisplay
    ,RIGHT(CAST((inok."inok-nr") AS varchar(7)),6) + '-' + inok."vest-kd-arvo" + '-' + RTRIM("leso-kd") AS inoknr
    ,RTRIM("leso-kd") AS soortfact
FROM
    PUB.inok
WHERE
    inok."rela-kd-kre" = (CASE WHEN {Crediteur code|type=string} = 'HOEFASTE' THEN inok."rela-kd-kre" ELSE {Crediteur code|type=string} END)
    AND inok."vcdc-nr" = {Administratie|type=int32}
    AND inok."inss-kd" NOT IN ('H','G') 
```

# comments - 如何注释掉 Doxygen 文档中的注释

> ID：14337003
> 
> 赞同：3
> 
> 时间：2013-01-15T11:45:15.610
> 
> 标签：comments, doxygen

我正在使用 Doxygen 的`\page`,`\subpage`和`\section`结构来为我的应用程序制作概述文档。在某处，我使用 HTML 来创建格式良好的表格。

但是，我想删除输出中表格的一部分，而不删除注释本身。例如

```
/*!
\page MAINPAGE Main Page

<table>
   <tr>
      <td>Do This</td>
      <td>100</td>
   </tr>
   <tr>
      <td>Do That</td>
      <td>200</td>
   </tr>
   <tr>
      <td>Yet another one</td>
      <td>300</td>
   </tr>
</table> 
```

我想删除包含“Do That”的行，而不从文件中删除“text”本身。

`//`如果这是简单的源代码，我可以简单地使用or将其注释掉`/* */`。

我发现我可以使用`\if`or `\latexonly`（我们只生成 html 输出），但两者似乎都是一种解决方法（看起来就像`if(false)`在代码中使用来注释掉一个块）。

没有一种干净的方法来评论 Doxygen 中的评论吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:54:21.607

你试过 \cond \endcond 标签吗？它在这里描述[http://www.doxygen.nl/manual/commands.html#cmdcond](http://www.doxygen.nl/manual/commands.html#cmdcond) [http://www.doxygen.nl/manual/commands.html#cmdendcond](http://www.doxygen.nl/manual/commands.html#cmdendcond)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T12:01:00.167

将要排除的部分包含在`@cond`和`@endcond`块中。像这样：

```
@cond DOXYGEN_EXCLUDE
<tr>
    <td>Do That</td>
    <td>200</td>
</tr>
@endcond 
```

并确保您没有`DOXYGEN_EXCLUDE`在 doxygen 可以看到的任何地方定义。`DOXYGEN_EXCLUDE`就是我用的，不是特殊关键字，你可以选择任何你喜欢的名字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T22:12:54.377

除了 \cond...\endcond 您还可以使用 HTML 注释，即在 doxygen 注释中，如手册[http://www.doxygen.org/manual/htmlcmds.html](http://www.doxygen.org/manual/htmlcmds.html)`<!-- this is a comment in a comment -->`中本页底部所述

# asp.net-mvc-3 - 如何在父局部视图中访问模型数据

> ID：14337010
> 
> 赞同：0
> 
> 时间：2013-01-15T11:45:34.153
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4

我有一个控制器，它将传递数据以查看 Index.cshtml

```
public ActionResult Index()
    {
        var empId = @User.Identity.Name;
        var empDetails = empRepository.GetEmployeeDetails(empId);
        var emp = new UserViewModel {EmployeeDetail = empDetails};
        return View(emp);
    } 
```

视图 Index.cshtml 的布局是 Partialview _Layout.cshtml

```
@model HRM.Areas.EmployeeDetails.Models.UserViewModel
@{
       ViewBag.Title = "Index";
       Layout = "~/Areas/EmployeeDetails/Views/Shared/_Layout.cshtml";
 }

 <div>Hello</div> 
```

我想访问从控制器操作传递到_Layout.cshtml 中的Index.cshtml 的数据。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:30:32.280

你的问题对我来说不是很清楚：/

我的假设->如果您将代码更改为如下所示：

```
 public ActionResult Index()
        {
            var empId = @User.Identity.Name;
            var empDetails = empRepository.GetEmployeeDetails(empId);
            var emp = new UserViewModel { EmployeeDetail = empDetails };

            ViewBag.UserViewModel = emp;

            return View(emp);
        } 
```

在布局页面上，您可以访问您的数据：

```
@if (ViewBag.UserViewModel != null)
{
    //do sth with ViewBag.UserViewModel here
    //for example:
    @Html.Partial("_UserView",ViewBag.UserViewModel)

} 
```

如果您详细解释您想要达到的目标，我们将更容易为您提供正确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:53:47.473

你的问题不清楚你想如何访问这些值，所以我在这里做一个假设：

如果你想在你的页面的渲染中包含来自视图的数据，`layout`你可以使用 RenderSection 方法。

布局页面：

```
@RenderSection("ViewSection", false) 
```

查看页面：

```
@section ViewSection {
<div>
    <label>Emp Name:</label>
    @model.EmpDetails.Name    
</div>

} 
```

当你`Layout`被渲染时，它会在你的视图中寻找一个匹配并渲染它的部分。传递一个 false 作为第二个参数告诉布局该部分不是必需的。

有关这方面的更多信息： [http ://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T11:51:35.007

您可以像这样访问模型中的数据：

@Model.EmployeeDetail ...

# excel - 查找数据单元格值，在列中向上移动一个单元格，在列中查找下一个数据单元格并获取下一个值

> ID：14337015
> 
> 赞同：0
> 
> 时间：2013-01-15T11:46:07.650
> 
> 标签：excel, vba

使用下面的代码，我正在尝试执行以下操作：

*   查找与第一个 IF 语句匹配的文件
*   在 wbkOut 中，转到第 2 列并找到第一个包含数据的单元格（底部，向上）并为其分配一个值，以便我们稍后可以将其引用为开始执行循环的位置
*   在 wbkVer 中，找到第一个有数据的单元格，向下偏移 1 个单元格，从 wbkout 调整数据的大小仅为 1 个单元格
*   然后将 wbkOut 单元格的值添加到 wbkVer 单元格
*   以上所有作品
*   没用的是下一块
*   如果脚本已运行，则将要粘贴的单元格偏移一个..并将 wbkOut 单元格向上偏移一个单元格并开始寻找下一个带有数据的单元格，等等...
*   做直到tenln 不再有值

我无法让循​​环正常工作，建议？谢谢！

编辑：我可以得到前 2 个值，然后循环无限期地运行，没有找到其他任何东西。

```
Dim strOutputFile As Variant
Dim wbkOut As Workbook
Dim tenln As Range
Dim tenlnPaste As Range
Dim hasRun As Boolean
Dim wbkVer As Workbook

    If strOutputFile(u) Like "*Lines.csv" Then
        With wbkOut.Worksheets(1)
        Set tenln = wbkOut.Worksheets(1).Cells(Rows.Count, 2).End(xlUp)
        Set tenlnPaste = wbkVer.Worksheets("TLines").Range("A" & .Rows.Count).End(xlUp).Offset(1).Resize(tenln.Rows.Count, 1)
            tenlnPaste.Value = tenln.Value
        hasRun = True
        Do
            If hasRun = True Then
            With wbkOut.Worksheets(1)
                tenlnPaste.Offset(1, 0).Value = tenln.Offset(-1, 0).End(xlUp).Value
            End With
            End If
        Loop Until tenln.value = ""
        End With
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:42:24.290

您所写内容的 do 循环的问题在于您没有进行修改`tenln`，因此您在开始时设置的任何值都将保持不变并且`tenln = ""`始终为 false

如果我正确阅读了这个`tenln`sa range 对象，那么您可以使用 for 循环。

```
For each c in tenln.cells

  'your code here
  If c.value = "" then exit for
Next 
```

# asp.net - 无 Cookie SessionState 和 Web.sitemap

> ID：14337018
> 
> 赞同：0
> 
> 时间：2013-01-15T11:46:15.290
> 
> 标签：asp.net

当使用带有`cookieless=true`选项的 SessionState 时，sessionId 值存储在 url 中，因此修改后的 url 看起来像这样：

```
http://yourserver/(sessionid)/folder/resource.aspx 
```

在这种情况下，如何使 ASP.NET SiteMap 正常工作，是否有可能在`siteMapNode`内部定义时使用通配符`Web.sitemap`？

# frameworks - 实体框架和数据库默认值解决方法

> ID：14337024
> 
> 赞同：2
> 
> 时间：2013-01-15T11:47:07.393
> 
> 标签：frameworks, entity, default

我必须决定一件重要的事情，我需要你的帮助。

我正面临一个巨大的现有数据库，其中**可空**列上**有很多**默认值。

 **团队必须在其之上构建一个新的 MVC4 应用程序（实际上它是对旧的 VB6 应用程序的重写）。

我（作为顾问）已经“强制”使用 EF5 来摆脱所有存储过程并迁移到更现代的技术。

现在，经过我的研究，我很清楚 EF5 不支持默认的数据库默认值。这就是我插入的记录损坏的原因（它们被插入是因为列可以为空，但当然是 N​​ULL）。

出现了一些选项，例如使用构造函数技术、在 edmx 的设计中设置默认值，或者使用 edmx 的 xml。尽管如此，这些方法对我们没有用。在构造器技术对我来说看起来不错的地方，对数据库中的所有表都这样做是不可行的。我也有来自技术人员的“njet”，因为他想将这些价值观保持在一个地方。在设计中设置默认值的情况相同。数据库也不在我们的范围内（阅读：尽可能减少更改以保持现有应用程序运行）。

在这一点上，我不确定 EF 是否是我们项目的正确选择。

有人知道（第 3 方）工具可以在生成的 edmx 文件的 xml 中自动填充数据库默认值吗？

是否有更多关于如何构建此 xml 以及是否有可能干扰该过程的信息？

为什么不应该采用这些默认值？这会在以后的版本中改变吗？

是否有其他好的做法可以应用于该问题而无需重复所有值或大量工作量？

我可以用我的 poco 发电机安排一些东西吗？

我意识到已经有很多关于这个主题的帖子。太糟糕了，没有适合我的解决方案，因为我们已经有了一些东西，并且（恕我直言）我必须说服一个旧的 VB6 团队。

感谢您的反馈意见！**

# java - isInfoEnabled () 用于共享日志记录

> ID：14337030
> 
> 赞同：1
> 
> 时间：2013-01-15T11:47:35.153
> 
> 标签：java, logging, log4j, apache-commons-logging

我`logger.info("statement" + string)`在我的应用程序的很多地方都使用过，包括**for 循环**和**if**语句。

我检查并发现即使`INFO`未启用“”级别，也会首先创建字符串消息。

如何`INFO`在创建字符串之前检查是否已启用，而无需`isInfoEnabled()`在我实现它的每个位置添加。

此外，在使用记录器时减少开销的最佳方法是什么。

如果 `+`我们使用实用方法（例如使用`Stringbuilder`.

我`log4j.xml`用于配置记录器杠杆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T11:51:11.847

正确的解决方案是使用 slf4j/logback，它支持传入原始数据而无需预先生成字符串。使用 Commons Logging 无法做到这一点，如果您替换为，性能也不会提高`+`，`StringBuilder`因为字符串连接表达式已经编译成涉及`StringBuilder`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:53:07.893

我建议您为此创建实用程序调用，您自己的架构在 Logger

像这样的东西（伪代码，我不知道记录器的实现）

```
class OwnLogger extends Logger {

    public static function info(Object o){
        if(isInfoEnabled()){
            super.info(o);
        }
    }

} 
```

# oracle - 在Oracle中将存储过程从数据库复制到另一个

> ID：14337036
> 
> 赞同：0
> 
> 时间：2013-01-15T11:48:00.077
> 
> 标签：oracle

我正在使用 PL/SQL Developer Ver。Oracle 11g 的 7.0.2。我在一个数据库实例中有大量存储过程。每当我完成编码时，我都会将该存储过程的代码复制并粘贴到不同实例中的相同存储过程中。当我编辑了许多 SP 并且必须将其复制到另一个实例时，这是一项乏味的工作。

我正在寻找一种更简单的方法来将所有 SP 从一个实例复制到另一个实例。我怎样才能做到这一点？我更喜欢 java 甚至 sql 来做到这一点。

# ant - 将手写笔文件编译为普通 css 文件的 Ant 任务？

> ID：14337040
> 
> 赞同：0
> 
> 时间：2013-01-15T11:48:08.867
> 
> 标签：ant, stylus

我正在尝试在使用 ANT 构建的项目中使用[手写笔。](http://learnboost.github.com/stylus/)

在打包war之前，我需要将stylus文件编译为普通的css。

有办法吗？

注意：我没有使用 node.js，它是一个简单的 java web 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T16:49:35.733

以下是如何使用它的完整示例：

```
 <property name="css.stylus" value="../folder/to/stylus/files"/>
    <property name="cmd.node" value="C:\Program Files\nodejs\nodevars.bat"/>
    <property name="cmd.stylus" value="C:\Program Files\nodejs\stylus.cmd"/>

    <target name="css_compile" description="compile l'ensemble des CSS avec stylus">
            <exec executable="${cmd.node}" />
            <exec dir="${css.stylus}" executable="${cmd.stylus}" >
                    <arg value="myCSS.styl"/>
                    <arg value="-c"/>
                    <arg value="-o"/>
                    <arg value="..\cssFolder"/>
            </exec>
    </target> 
```

这个例子（我用过）将混淆 CSS 中的 myCSS.styl 转换为 /cssFolder

*   `nodevars.bat`是启动手写笔所必需的。
*   `stylus.cmd`是手写笔本身，因为路径在蚂蚁中不起作用。要知道它在哪里（它在 nodejs 中），您可以在 Windows 上的终端中键入“路径”。

就这样！

# perl - Perl 找出两个名字的区别

> ID：14337042
> 
> 赞同：-1
> 
> 时间：2013-01-15T11:48:17.880
> 
> 标签：perl

我相信可能有更简单的方法可以在两个给定名称中找到不同的名称。我有一个脚本，如果有两个不同的样本非常匹配，它会为表格中的匹配百分比着色。

但是我想对它们进行微调-仅在样本完全不同时才为百分比着色。

例如：如果 SD0098a 匹配 SD0098[bz] 不需要使用不同的颜色，但 SD0098a 匹配 SD0097[az] 应该给出警告颜色。

我有这样的代码：

```
 my @input = get_data();
    @input = @input[28..37] if $ARGV[0] eq 'titchy';
    @input = @input[0..49]  if $ARGV[0] eq 'small';
    my $t0 = time;
    my %map;
    my $tv  = 'A';
    $map{$_}=$tv++ foreach qw(N NN A C G T AC AG AT CA CG CT GA GC GT TA TC TG);
    my %inv_map = reverse %map;
    my $t_store = {};
    my $res;

    my @index;
    my @columns = ( { 'key'   => 'code', 'label' => 'Sample name', 'class'=>q({'enc':'[[r:enc]]'}) });

    my %col_info;
    foreach(@input){
      my ($k,@v) = split m{:}mxs;
      push @index, $k;

      $t_store->{$k} = {
        'code'  => $k,
        'flags' => ( join q(), map { $_ =~ /[ACGT]/ ? q(`) : q( ) } @v ),
        "i_$k"  => q(-),
        'enc'   => join q(), map { $map{$_}||'@' } @v,
      };

      $col_info{$k} = { 'key' => "i_$k", 'label' => $k, 'rotate' => 1,
        'header_class' => q({'enc':').$t_store->{$k}{'enc'}.q('}),
        'format' => [ [ 'r', 'exact', q(-) ], [ 'p0' ] ],
        'class'  => "[[r:c_$k]]",
      };
    }

    @index = sort @index;

    push @columns, map { $col_info{$_} } @index;

    my @t_index = @index;

    my $N = 0;
# get the first element of the array sample a.
    while( my $a = shift @t_index) {
      foreach my $b (@t_index) {
        $N++;
        my $count_flag = $t_store->{$a}{'flags'} & $t_store->{$b}{'flags'};
        my $mismatches = ($t_store->{$a}{'enc'} ^ $t_store->{$b}{'enc'}) | $count_flag;

        my $n_match = $mismatches =~ tr{`}{`};
        my $n_count = $count_flag =~ tr{`}{`};
        my $n_total = length $t_store->{$a}{'flags'};

        #$t_store->{$b}{"o_$a"} = $t_store->{$a}{"o_$b"} = $n_total ? $n_count/$n_total   : 0;
        #$t_store->{$b}{"m_$a"} = $t_store->{$a}{"m_$b"} = $n_count ? 1-$n_match/$n_count : 0;
        my $x = $t_store->{$b}{"i_$a"} = $t_store->{$a}{"i_$b"} = $n_count ? $n_match/$n_count   : q(-);
# This is where the check should go :
        $t_store->{$b}{"c_$a"} = $t_store->{$a}{"c_$b"} = "{'m':$n_match,'i':$n_count,'n':$n_total} gt".
          ( $x eq '-' || $x < 0.7 ? '' : ' id_'.floor($x*20) );
      }
    }

    sub get_data { 
      return  qw(
    SD0098a_SD8r9345843_07-APR-13:T:C:AG:GA:C:A:AG:CA:A:CT:T:GT:AG:G:G:TC:TC:T:A:GA:T:T:GA:T:A:G:CT:CT:GT:CT:A:TC:CT:AG:TC:GA:T:T:T:NN:TC:AG:C:T:G:CT:G:CA:C:CG:AT:G:CG:GA:G:G:C:CT:CT:GA:GT:GA:CG:G:G:G:C:C:A:NN:T:T:TC:G:CT:CA:T:C:G:C:AG:T:GA:A:G:NN:C:G:NN:TC:TA:G:TC:AG:NN:T:GC
    SD0098b_SD8r9345844_07-APR-13:T:C:AG:GA:C:A:AG:CA:A:CT:T:GT:AG:G:G:TC:TC:T:A:GA:T:T:GA:T:A:G:CT:CT:GT:CT:A:TC:CT:AG:TC:GA:T:T:T:G:TC:AG:C:T:G:NN:G:CA:C:CG:AT:G:CG:GA:G:G:C:CT:CT:GA:GT:GA:CG:G:G:G:C:C:A:NN:T:T:TC:G:CT:CA:T:C:G:C:AG:T:GA:A:G:NN:C:G:G:TC:TA:G:TC:AG:NN:T:GC
    SD0098c_SD8r9345845_07-APR-13:T:C:AG:GA:C:A:AG:CA:A:CT:T:GT:AG:G:G:TC:TC:T:A:GA:T:T:GA:T:A:G:CT:CT:GT:CT:A:TC:CT:AG:TC:GA:T:T:T:G:TC:AG:C:T:G:CT:G:CA:C:CG:AT:G:CG:GA:G:G:C:CT:CT:GA:GT:GA:CG:G:G:G:C:C:A:NN:T:T:TC:G:CT:CA:T:C:G:C:AG:T:GA:A:G:NN:C:G:G:C:TA:G:TC:AG:NN:T:NN
    SD0097a_SD8r9345842_07-APR-13:CT:C:AG:G:CA:GA:G:A:G:C:T:GT:AG:G:G:C:T:TC:GA:GA:C:T:A:C:CA:G:T:T:T:C:A:C:T:G:TC:G:CT:GT:TC:T:C:A:CT:T:GA:C:G:CA:C:CG:AT:A:G:GA:AG:AG:T:CT:CT:GA:GT:GA:C:A:G:G:TC:T:G:NN:C:CT:TC:GA:C:C:T:C:G:C:AG:C:NN:A:NN:NN:CT:T:GA:C:A:AG:TC:AG:NN:GT:GC
    SD0097b_SD8r9345841_07-APR-13:CT:C:AG:G:CA:GA:G:A:G:C:T:GT:AG:G:G:C:T:TC:GA:GA:C:T:A:C:CA:G:T:T:T:C:A:C:T:G:TC:G:CT:GT:TC:T:C:A:CT:T:GA:C:G:CA:C:CG:AT:A:G:GA:AG:AG:T:CT:CT:GA:GT:GA:C:A:G:G:TC:T:G:NN:NN:CT:TC:GA:C:C:T:C:G:C:AG:C:GA:A:NN:NN:CT:T:GA:C:A:AG:TC:AG:NN:GT:GC
    );
    } 
```

所以根据这个例子，如果样本 SD0098[ac] 与任何超过 90% 的 SD0097[ab] 匹配，我想给结果百分比一些警告颜色。感谢您的任何提示和建议。

输出将是表格格式的类似内容。它是一个网页输出。（只是一个模型输出而不是确切的输出）：

```
Sample SD0098a SD0098b SD0098c SD0097a SD0097b
SD0098a - 98% 99% 97% 97%
SD0098b 99% - 95% 97% 99%
SD0098c 97% 97% - 100% 100%
SD0097a 97% 97% 100% - 100%
SD0097b 97% 99% 100% 100% - 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:03:49.687

我认为 String::Similarity 可以帮助你。如果我理解正确，您需要进行近似字符串匹配

# javascript - ipad 中的 pdf.js 问题与更多页面

> ID：14337043
> 
> 赞同：2
> 
> 时间：2013-01-15T11:48:29.380
> 
> 标签：javascript, pdf.js

我在我的应用程序中使用 pdf.js，当我尝试在 iPad 上打开长 PDF 文件（超过 15 页）时，我的浏览器会自动关闭。

有什么解决办法吗？

# algorithm - 寻找最大匹配 Topcoder

> ID：14337046
> 
> 赞同：1
> 
> 时间：2013-01-15T11:49:02.527
> 
> 标签：algorithm

这是来自 Topcoder SRM 566 Div2 的算法问题。

问题可以[在这里](http://community.topcoder.com/stat?c=problem_statement&pm=12355)查看。

对于那些没有 topcoder 帐户的人，问题描述如下：

Penguin Pals 是一项配对服务，可使用以下程序将企鹅与新朋友配对：

1.  每只企鹅都被问到一个问题：“你喜欢蓝色还是红色？”
2.  所有的企鹅都排列成一个圆圈，它们间隔相等。
3.  组织者画了一些直线，连接了几对企鹅。每只企鹅最多只能与另一只企鹅相连。如果两只企鹅喜欢不同的颜色，它们就无法连接起来。
4.  每只与其他企鹅相连的企鹅都会沿着这条线找到他们的匹配项。

上述系统的唯一问题是，如果两条线相互交叉，企鹅就会发生碰撞。因此，通过了一条新的附加规则：两条线不得交叉。Penguin Pals 现在有一些企鹅排列在一个圆圈上（在上述过程的第 2 步之后）。他们需要知道他们可以创造的企鹅对的最大数量。

给你一个字符串 colors ，它的第 i 个字符代表圆形排列中第 i 个企鹅（从 0 开始的索引）的首选颜色。如果第 i 个企鹅喜欢红色，第 i 个字符是“R”，如果第 i 个企鹅喜欢蓝色，那么第 i 个字符是“B”。返回可以形成的最大匹配对数。

例子：

“RRBRBRBB”

回报：3

“BBBB”

回报：2

“RRRBRBRBRBRB”

回报：5

**我的方法：**

调用长度为 n 的字符串 s。（请注意，第 0 和第 n-1 索引是连续的）。

我使用了一个递归函数 recurse(string s,int i,int j) 如下：

```
int recurse(string s,int i,int j)
{
     if(i>=j)
           return 0;
     if(s[i]==s[j])
        return(1+recurse(s,i+1,j-1));
     else return max(recurse(s,i,j-1),recurse(s,i+1,j));
} 
```

我从 i=0 和 j=n-1 开始，因为如果它们相等，它们都是连续的，用 (i+1,j-1) 调用函数，如果不是，则同时调用函数递归(s,i,j-1) 和 recurse(s,i+1,j) 并将取这两者中的最大值。

我为每个可能的起始对调用了这个函数，即

对于输入“RRRBRRBB”。

我用输入调用了函数 recurse() ：

1.  s="RRRBRRBB" i=0 j=n-1
2.  s="RRBRRBBR" i=0 j=n-1 （将字符串向左移动，之前的最左边现在是最右边）
3.  s="RBRRBBRR" i=0 j=n-1 （同样的操作）

以此类推，直到涵盖所有案例。

但是我得到了 WA，并且无法确定我的方法中的缺陷为什么它不能工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T13:43:35.707

要更正您的解决方案，您应该在每个递归调用中执行以下操作：

```
s="RRRBRRBB" i=0 j=n-1
s="RRBRRBBR" i=0 j=n-1 (Moved the string left and the earlier leftmost is now the rightmost)
s="RBRRBBRR" i=0 j=n-1 (the same operation)
and so on until all the cases are covered. 
```

但我对这个案子感到 TLE。

**解决方案：** 这是一个简单的问题。

1) 从 s[i] == s[(i+1) % n] 的字符串中删除所有对，并计算计数。（我从 0 到 n-1）。

2）迭代＃1直到你的字符串没有转换为“RBRBRBRB...RB”或“BRBRBRBRBR...BR”，对于这个特殊的大小写结果（长度/ 2） - 1;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T16:59:14.803

值得一提的是，预期的解决方案记录在[SRM566 的问题集分析页面上](http://apps.topcoder.com/wiki/display/tc/SRM+566)。

# slickgrid - 始终在 SlickGrid 中显示垂直 ScrollBar

> ID：14337054
> 
> 赞同：3
> 
> 时间：2013-01-15T11:49:28.487
> 
> 标签：slickgrid

我有一个*SlickGrid* ，里面有不同数量的记录。应用程序代码将检索“块”中的数据，假设每个记录 25 条。

所以我让我的*SlickGrid*显示了很短的时间没有记录。然后前 25 条记录到达并显示 -> 不显示滚动条，因为表中有足够的空间。

然后代码检索第二组 25 条记录，需要并显示一个滚动条。

由于每次对表进行排序时都会发出这些请求，因此可能非常频繁。而整个表格就像是因为滚动条每次出现又消失而跳来跳去。

有没有办法强制 SlickGrid 显示滚动条？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-02T04:22:18.757

通过CSS

```
#myGrid .slick-viewport {
    overflow-y: scroll;
} 
```

# java - 使 Java 对象的属性只能由该对象访问

> ID：14337055
> 
> 赞同：0
> 
> 时间：2013-01-15T11:49:28.803
> 
> 标签：java, private-members

Java 中有没有一种方法可以表示对象 o 的属性 x 只能由 o 本身访问（我的意思是点符号 ox）？明确一点：我说的是 Smalltalk 中的对象级访问，而不是类级访问（因此*私有*还不够私有）？

对不起 - 我敢肯定这个问题之前已经被问过很多次了，但我在搜索时似乎选择了错误的关键字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:11:35.027

这在 Java 中是不可能的（没有什么比标记为“私有”的字段更私有了），但如果你仔细想想，这也是合乎逻辑的：你只能在公共类源代码中修改其他对象的私有字段，并且如果您控制类源代码，那么无论如何您都可以做任何坏事或好事。

顺便说一句，如果没有安装安全管理器，或者安全管理器的策略允许，您甚至可以通过反射访问其他类的私有变量，请参阅：[为什么允许通过反射访问 Java 私有字段？](https://stackoverflow.com/questions/1239581/why-is-it-allowed-to-access-java-private-fields-via-reflection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:08:21.910

你想做的事情是不可能的。每个对象都有自己的一组实例变量，并且只能通过该对象访问，只要它们不是静态的。所以简而言之，如果您想要一个只能由该对象访问的 Java 对象的属性，请保持该对象处于活动状态:)。

# c# - 如何在 TextChanged 中获取新文本？

> ID：14337057
> 
> 赞同：21
> 
> 时间：2013-01-15T11:49:32.613
> 
> 标签：c#, events, text, textbox

在 TextBox 中，我正在监视文本更改。在做一些事情之前，我需要检查文本。但我现在只能检查旧文本。我怎样才能得到新的文本？

```
private void textChanged(object sender, EventArgs e)
{
    // need to check the new text
} 
```

我知道 .NET Framework 4.5 有新`TextChangedEventArgs`类，但我必须使用 .NET Framework 2.0。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-15T11:57:36.327

**获取新值**

您可以只使用`Text`. `TextBox`如果此事件用于多个文本框，那么您将需要使用该`sender`参数来获得正确的`TextBox`控件，就像这样......

```
private void textChanged(object sender, EventArgs e)
{
    TextBox textBox = sender as TextBox;
    if(textBox != null)
    {
        string theText = textBox.Text;
    }
} 
```

* * *

**获取旧值**

对于那些希望获得旧值的人，您需要自己跟踪。我建议一个简单的变量，它以空开头，并在每个事件结束时更改：

```
string oldValue = "";
private void textChanged(object sender, EventArgs e)
{
    TextBox textBox = sender as TextBox;
    if(textBox != null)
    {
        string theText = textBox.Text;

        // Do something with OLD value here.

        // Finally, update the old value ready for next time.
        oldValue = theText;
    }
} 
```

如果您打算大量使用它，您可以创建自己的继承自内置控件的 TextBox 控件，并添加此附加功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T11:52:26.567

查看[文本框事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox_events.aspx)，例如[KeyUp](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keyup%28v=vs.80%29.aspx)、 KeyPress 等。例如：

```
private void textbox_KeyUp(object sender, KeyEventArgs e)
{
    // Do whatever you need.
} 
```

也许这些可以帮助您实现您正在寻找的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T11:54:27.343

即使使用较旧的 .net fw 2.0，如果不在 textbox.text 属性本身中，您仍然应该在 eventArgs 中拥有新旧值，因为事件是在文本更改之后而不是在文本更改期间触发的。

如果您想在更改文本时执行某些操作，请尝试 KeyUp 事件而不是 Changed。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-04-16T10:50:22.553

```
private void stIDTextBox_TextChanged(object sender, EventArgs e)
{        
    if (stIDTextBox.TextLength == 6)
    {
        studentId = stIDTextBox.Text; // Here studentId is a variable.

        // this process is used to read textbox value automatically.
        // In this case I can read textbox until the char or digit equal to 6.
    }
} 
```

# solr - solr.WordDelimiterFilterFactory 在索引时删除 & 但不是在查询时

> ID：14337061
> 
> 赞同：1
> 
> 时间：2013-01-15T11:49:38.293
> 
> 标签：solr, filter, ampersand

我是 Solr 的新手，我有一个案例，在索引时，solr.WordDelimiterFilterFactory 会分析一个值（文本字段），如下所示：

```
<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" preserveOriginal="1"/> 
```

运行这个 solr 管理分析工具，它告诉我这删除了 ​​& 符号。阅读文档这将是因为 generateWordParts="1" 因为它将 & 符号视为分隔符。

让这个过滤器在查询时运行，我期望得到相同的结果，但它不会删除 & 符号。

因此，当搜索“亚当和夏娃”时，它不会被找到。

有谁知道为什么？

# inversion-of-control - MVVMCross 中特定于平台的 IoC

> ID：14337063
> 
> 赞同：4
> 
> 时间：2013-01-15T11:49:40.077
> 
> 标签：inversion-of-control, mvvmcross

我正在试一试 MVVMCross，看看它是否会在一些更大的项目中使用，这很棒。我喜欢导航、viewModel 位置和通用的跨平台方法，这正是我所需要的。但是，我有点坚持根据平台拆分一些依赖注入。

所以，我们有一个基本的应用程序，带有一个共享的可移植库，它在启动时初始化服务引用：

```
 public TwitterSearchApp()
    {
        InitaliseServices();
    }

    private void InitaliseServices()
    {
        this.RegisterServiceInstance<ITwitterSearchProvider>(new TwitterSearchProvider());
    } 
```

美好的。这定义了将在所有平台上使用的服务实现。但是，如果我需要在不同平台上实现不同的实现——例如存储/缓存，核心要求相同，但在手机上的处理方式与在平板电脑上的处理方式不同。

我认为它可能会在某个地方进入安装程序：

```
public class Setup : MvxBaseWinRTSetup
    {
        public Setup(Frame rootFrame): base(rootFrame)
        {
        }

        protected override MvxApplication CreateApp()
        {
            var app = new TwitterSearchApp();//set platorm specific IoC here maybe?
            return app;
        }

        protected override void AddPluginsLoaders(Cirrious.MvvmCross.Platform.MvxLoaderPluginRegistry loaders)
        { // or perhaps here?
            loaders.AddConventionalPlugin<Cirrious.MvvmCross.Plugins.Visibility.WinRT.Plugin>();
            base.AddPluginsLoaders(loaders);
        }
    } 
```

但我不确定。我已经看到了替换 ViewModel 定位器的参考，但是是否有类似的方法来替换其他 IoC 服务？

谢谢，总体而言，在框架上做得很好，我真的很喜欢它的工作方式（除了这一点，我还不太理解）

托比

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T13:01:09.997

有三个基本选项：

**1** . 在您的 UI 项目中添加特定于平台的服务，然后在设置期间将它们注册到覆盖中 - 您使用的覆盖取决于何时需要您的服务，但在大多数情况下，您可以只使用在`InitializeLastChance`初始化结束时调用的覆盖：

```
protected override void InitializeLastChance()
{
    this.RegisterServiceInstance<IMyService>(new SingletonMyService());
    this.RegisterServiceType<IMyService2, PerCallService2>();
    base.InitialiseLastChance();
} 
```

如果“最后机会”对您的服务来说为时已晚 - 如果您在核心应用程序启动期间需要该服务 - 那么您可以覆盖之后的任何初始化步骤`InitializeIoC`- 例如`InitializeFirstChance`。有关初始化步骤的列表和顺序，请参阅[MvxBaseSetup.cs](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross/Platform/MvxBaseSetup.cs)中的`InitializePrimary`和`InitializeSecondary`

**2** . 在 UI 代码的其他一些位中添加特定于平台的注册 - 例如，在特定视图的构造函数中（此选项使用不多......但如果你愿意，你可以在一些奇怪的情况下使用它...... )

**3** . 使用插件 - 所有插件都是 IoC 的包装器。插件的缺点是它们增加了一些开发开销（您必须添加单独的项目和插件样板文件），但它们的优点是它们可以跨应用程序重用，并且更容易为它们编写测试应用程序和测试工具。有关插件的更多信息，请参阅[为 Task/Intent 提供单声道跨平台支持，](https://stackoverflow.com/questions/12564272/making-mono-cross-platform-support-for-task-intent)并参阅[http://slodge.blogspot.co.uk/2012/10/build-new-plugin-for-mvvmcrosss.html](http://slodge.blogspot.co.uk/2012/10/build-new-plugin-for-mvvmcrosss.html)

* * *

我的一般建议 - 如果您想在以后的项目中重用代码，请从第一个选项开始并迁移到插件...

# git - 正确还原提交到原点的 git merge

> ID：14337066
> 
> 赞同：2
> 
> 时间：2013-01-15T11:49:49.877
> 
> 标签：git, git-revert

我的分支的历史如下：

![在此处输入图像描述](../Images/0f143e0b86686c0639e75ba3bd8cd7b7.png)

现在我想恢复与分支 558 的合并。我有它的 sha 代码，所以我正在做：

`git revert -m 1 1784adf300f43fb76391e92f80be01132eddb680`

结果是：

`[master d51e2b3] Revert "Merge branch '558'" 1 files changed, 15 insertions(+), 29 deletions(-)`

此时，当我尝试将我的恢复推送回原点时，我看到只有来自合并`558`分支的最后一次提交被恢复（以及在合并中超过 1 个文件受到影响）。如何从合并的分支中恢复所有提交，或者我在这里做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:05:05.390

您可以指定多个提交，使用`git revert`. 在这里，您需要从分支 558 中找到与 master 不同的第一个提交以及两个分支合并之前的提交。

然后，您可以使用：

```
git revert -n {first_commit}..{last_commit} 
```

在这里，该`-n`选项允许不对每个恢复的提交进行提交，它只分阶段您可以提交的更改，然后提供适当的描述。

如果你的历史很简单，它应该可以工作，就像你的例子一样。

**更正和澄清：** git 不会直接接受合并提交或包含用于恢复的合并的间隔。但是，可以仅使用合并提交和`-m i`i 表示要恢复合并的哪一侧的选项来恢复整个分支（从 1 开始，所以这里是 2）。

整个问题非常微妙，[这篇文档](http://www.kernel.org/pub/software/scm/git/docs/howto/revert-a-faulty-merge.txt)是一本有用的读物​​。

# java - 设置交集的更快方法

> ID：14337067
> 
> 赞同：0
> 
> 时间：2013-01-15T11:49:52.450
> 
> 标签：java, data-structures, hashmap, multimap

我面临一个问题，其中对于多个单词，我调用 HashMultimap (Guava) 来检索一组整数。结果集分别有 10、200 和 600 个项目。我需要计算这三个（或四个，或五个......）集合的交集，并且我需要多次重复整个过程（我有很多单词集合）。然而，我所经历的是，平均而言，这些集合交集需要很长时间来计算（从 0 到 300 毫秒），如果我查看数十万组单词，我的程序需要很长时间才能完成。

有没有更快的方法来实现这一点，特别是考虑到我正在处理（可排序的）整数？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T11:54:41.603

如果您能够将您的集合表示为位数组（位图），则可以用 AND 操作将它们相交。您甚至可以实现它以并行运行。

举个例子（使用 jlordo 的问题）：如果 set1 是 {1,2,4} 而 set2 是 {1,2,5}

然后您的第一组将表示为：00010110（为 1、2 和 4 设置的位）。您的第二组将表示为：00100110（为 1、2 和 5 设置的位）。

如果你将它们和在一起，你会得到：00000110（为 1 和 2 设置的位）

当然，如果您有更大范围的整数，那么您将需要更多字节。位图索引的优点在于每个可能的元素只占用一位，因此占用的空间相对较小。

例如，在 Java 中，您可以使用 BitSet 数据结构（但不确定它是否可以并行执行操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:21:54.793

基于位图的解决方案的一个问题是，即使集合本身非常小，但包含非常大的数字（甚至无界），检查位图也会非常浪费。

例如，另一种方法是对两组进行排序、合并并检查重复项。这可以在 O(nlogn) 时间复杂度和额外 O(n) 空间复杂度中完成，给定集合大小为 O(n)。

您应该选择与您的问题描述相匹配的解决方案（输入范围、预期的集合大小等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T07:29:05.977

帖子[http://www.censhare.com/en/aktuelles/censhare-labs/yet-another-compressed-bitset](http://www.censhare.com/en/aktuelles/censhare-labs/yet-another-compressed-bitset)描述了具有集合操作（​​联合、减号和交集）的有序原始长集的实现。以我的经验，它对于密集或稀疏的价值群体非常有效。

# c# - 将字节数组转换为位图图像

> ID：14337071
> 
> 赞同：34
> 
> 时间：2013-01-15T11:50:00.957
> 
> 标签：c#, wpf, bytearray, bitmapimage

我要将字节数组转换为`System.Windows.Media.Imaging.BitmapImage`并`BitmapImage`在图像控件中显示。

当我使用第一个代码时，注意到发生了！没有错误，也没有显示图像。但是当我使用第二个时它工作正常！谁能说发生了什么事？

第一个代码在这里：

```
public BitmapImage ToImage(byte[] array)
{
   using (System.IO.MemoryStream ms = new System.IO.MemoryStream(array))
   {
       BitmapImage image = new BitmapImage();
       image.BeginInit();
       image.StreamSource = ms;
       image.EndInit();
       return image;
   }
} 
```

第二个代码在这里：

```
public BitmapImage ToImage(byte[] array)
{
   BitmapImage image = new BitmapImage();
   image.BeginInit();
   image.StreamSource = new System.IO.MemoryStream(array);
   image.EndInit();
   return image;
 } 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-15T11:57:29.040

在第一个代码示例中，流`using`在实际加载图像之前关闭（通过离开块）。您还必须设置[BitmapCacheOptions.OnLoad](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapcacheoption.aspx)以实现立即加载图像，否则流需要保持打开状态，如第二个示例所示。

```
public BitmapImage ToImage(byte[] array)
{
    using (var ms = new System.IO.MemoryStream(array))
    {
        var image = new BitmapImage();
        image.BeginInit();
        image.CacheOption = BitmapCacheOption.OnLoad; // here
        image.StreamSource = ms;
        image.EndInit();
        return image;
    }
} 
```

从[BitmapImage.StreamSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.streamsource.aspx)的备注部分：

> 如果您希望在创建 BitmapImage 后关闭流，请将 CacheOption 属性设置为 BitmapCacheOption.OnLoad。

* * *

除此之外，您还可以使用内置类型转换将类型转换为`byte[]`类型`ImageSource`（或派生的`BitmapSource`）：

```
var bitmap = (BitmapSource)new ImageSourceConverter().ConvertFrom(array); 
```

`ImageSource`当您将类型的属性（例如 Image 控件的`Source`属性）绑定到类型为 或 的源属性`string`时，`Uri`会隐式调用 ImageSourceConverter `byte[]`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T11:55:24.263

在第一种情况下，您`MemoryStream`在一个`using`块中定义了您的对象，这会导致在您离开该块时释放对象。因此，您返回`BitmapImage`带有处置（且不存在）的流。

`MemoryStream`s 不保留非托管资源，因此您可以留下内存并让 GC 处理释放过程（但这不是一个好习惯）。

# oracle - 每天安排几个小时的工作安排

> ID：14337075
> 
> 赞同：2
> 
> 时间：2013-01-15T11:50:10.580
> 
> 标签：oracle, plsql, oracle11g, scheduling, jobs

我需要安排从 0600 到 1800 的作业。作业应该每两小时运行一次。例如 0800、1000、1200、1400、1600、1800。

这是我迄今为止设法完成的代码：

```
DECLARE
     l_id binary_integer;
     begin
       sys.dbms_job.submit(job => l_id, what => 'integration_export;', interval => 'TRUNC(SYSDATE,''hh24'')+0/24/60');
       sys.dbms_output.put_line(l_id);    
end; 
```

当然，这将在每 2 小时后运行一次作业，而不会在 1801 - 0759 处停止。如何添加此限制？我认为的一件事是创建另一个调度程序，该程序在 1801 唤醒并更改此作业的 NEXT_DATE。但是，我想知道这是否是一个好主意。

有什么建议么？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T12:13:25.513

`dbms_job`老了。我建议您改用`dbms_scheduler`（在 Oracle 10g 中引入）。

```
dbms_scheduler.create_job(job_name        => 'YOUR_JOB',
                          job_type        => 'PLSQL_BLOCK', 
                          job_action      => 'integration_export;',
                          start_date      => systimestamp,
                          repeat_interval => 'freq=hourly; byhour=8,10,12,14,16,18; byminute=0; bysecond=0;',
                      enabled         => true,
                      auto_drop       => false,
                      comments        => 'some comment about the job'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T12:12:58.023

使用高级 dbms_scheduler 代替 dmbs_job。这是一个例子：

```
begin
  DBMS_SCHEDULER.create_job (
    job_name        => 'Integration_export',
    job_type        => 'PLSQL_BLOCK',
    job_action      => 'integration_export;',
    start_date      => SYSTIMESTAMP,
    enabled         => TRUE,
    repeat_interval => 'freq=daily; byhour=6,8,10,12,14,16,18; byminute=0; bysecond=0');
end;
/ 
```

# fortran - 在 fortran 中写入和读取访问 = 流文件

> ID：14337076
> 
> 赞同：1
> 
> 时间：2013-01-15T11:50:11.920
> 
> 标签：fortran

我有一个 shell 脚本，我从中将一个二进制文件传递给一个 fortran 程序，这样

```
Mth=$1
loop=1
it=1
while test $it -le 12
do 
    Mth=`expr $Mth + $loop`
    file="DataFile"$Mth".bin"
    ./fort_exe ${Yr} ${nt} ${it} 

# Increment loop
it=`expr $it + 1`
done 
```

该脚本用于将 do 循环中的 12 个文件传递给 fortran 程序。在 fortran 程序中，我读取了从 shell 脚本传递的二进制文件，并尝试编写第二个文件，它将在单个文件中编译从连续文件中读取的所有数据，例如

```
 !Open binary file passed from shell script
 open(1,file='Datafile'//TRIM{Mth)//.bin',action='read',form='unformatted',access='direct', &
 recl=4*x*y, status='old')

! Open write file for t 1\. The status is different in t 1 and t > 1 so I open it twice: I guess there is a more elegant way to do this...
 open(2,file='Newfile.bin',action='write',form='unformatted', &
 access='stream', position='append', status='replace')
 irec = 0

 do t = 1, nt
 ! Read input file
  irec = irec + 1
  read(1,rec=irec) val(:,:)

 ! write output file
 irecW= irec + (imonth-1)*nt

 if ( t .eq. 1) write(2,pos=irecW) val(:,:)

 ! Close file after t = 1, update the status to old and reopen. 
 if ( t .eq. 2) then
    close (2)
    open(2,file='Newfile.bin',action='write',form='unformatted', &
         access='stream', position='append',status='old')
  endif

  if ( t .ge. 2) write(2,pos=irecW) val(:,:)

  enddo 
```

我可以从第一个文件中读取二进制数据没有问题，但是当我尝试从另一个程序中读取我在第一个程序中写入的文件中的二进制数据时

```
 open(1,file='Newfile.bin',action='read',form='unformatted', &
 access='stream', status='old')

 irec=0
 do t = 1, nt
! Read input file
     irec = irec + 1
     read(1,pos=irec) val(:,:)
     write(*,*) val(:,:)
 enddo 
```

val(:,:) 只不过是一个零列表。这是我第一次使用 access=stream，我相信这是我可以使用 position='append' 的唯一方法。我尝试使用 gfortran 和 ifort 进行编译，但没有收到任何错误消息。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:33:15.657

首先，我认为您不需要像现在这样关闭并重新打开输出文件。说明`status`符仅与`open`它出现的语句相关：如果它存在，将在打开同名的新文件之前`replace`删除。`Newfile.bin`状态隐式更改为`old`，但这不会影响对文件执行的任何操作。

但是，由于您的 Fortran 代码不知道您运行了 12 次，因此您应该有办法确保文件仅在第一次被替换后才被打开`old`；否则，`Newfile.bin`将仅包含来自最后处理的文件的信息。

至于读入错误的值，这很可能是因为直接访问（您可以选择记录长度）和流访问（您不能）之间的差异。通过流访问，数据被存储为一系列“文件存储单元”。它们的大小通常取决于编译器，但可以通过模块`iso_fortran_env`作为`file_storage_size`; 它通常是 8 位。这意味着每个条目通常会占用多个存储单元，因此您必须注意使用说明`pos =`符进行的读取或写入不会访问错误的存储单元。

* * *

**编辑：**
使用流访问编写和读取一些示例代码：

```
program stream
  use, intrinsic :: iso_fortran_env
  implicit none

  integer :: i, offset
  real(real32), dimension(4,6) :: val, nval

  open(unit=2, file='Newfile.bin', action='readwrite', form='unformatted', &
     access='stream', status='replace')

  do i = 1,2
    call random_number(val)
    write(2) val
  enddo

  ! The file now contains two sequences of 24 reals, each element of which
  ! occupies the following number of storage units:
  offset = storage_size(val) / file_storage_size

  ! Retrieve the second sequence and compare:
  read(2, pos = 1 + offset*size(val)) nval
  print*, all(nval == val)

  close(2)
end program 
```

值**true**应该打印到屏幕上。

另请注意，不一定要指定`pos`将数据写入文件的时间，因为文件将自动定位到读取或写入的最后一条记录之外。

* * *

也就是说，如果您需要以非顺序方式访问数据，则直接或流访问是最有益的。如果您只需要将输入文件合并为一个，则使用顺序访问编写输出文件可能会更容易，您还可以为此指定`recl`和`position = 'append'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:31:52.770

`inquire`您可以使用以下语句在标准 Fortran 中检查文件是否存在：

```
logical :: exist

inquire(file="test.dat", exist=exist)
if (exist) then
  print *, "File test.dat exists"
else
  print *, "File test.dat does not exist"
end if 
```

或者，您可以查看提供类似 libc 的文件操作例程的[modFileSys库。](https://bitbucket.org/aradi/modfilesys)

至于附加和流：当您使用基于“经典”记录的 fortran 文件时，也可以附加文件，您不必为此使用流。

# node.js - 对于节点中的后台进程管理，Kue 有什么好的替代方案吗？

> ID：14337084
> 
> 赞同：1
> 
> 时间：2013-01-15T11:50:25.850
> 
> 标签：node.js, background-process, kue

我正在做一个后台进程呈指数级增长的项目。所以我正在为节点寻找一个好的优先级后台队列。

在网上寻找它时，我发现了[Kue](http://learnboost.github.com/kue/)，但我是新手，所以我不确定这是否是最佳选择。

# arrays - 擦除数组 - 有必要吗？

> ID：14337086
> 
> 赞同：2
> 
> 时间：2013-01-15T11:50:35.450
> 
> 标签：arrays, vb.net

请看下面的代码：

```
Imports System.Data.Common
Imports System.Data.SqlClient
Imports System.Data.OracleClient

Public Class clsParameterValues
    Implements IDisposable

    Private paramValues(0) As DbParameter

    Public Function AssignParameterValues(ByVal strParameterName As String, ByVal strParameterValue As String, ByVal intDatabaseType As Integer) As Integer
        Dim intArrayBound As Integer

        intArrayBound = UBound(paramValues)
        If intArrayBound > 0 Then
            ReDim paramValues(intArrayBound)
        End If

        If intDatabaseType = 1 Then

            paramValues(intArrayBound) = New SqlParameter(strParameterName, strParameterValue)
        ElseIf intDatabaseType = 2 Then
            paramValues(intArrayBound) = New OracleParameter(strParameterName, strParameterValue)
            'paramValues(intArrayBound) = New OracleParameter(":" & strParameterName, OracleType.Int32)
            'paramValues(intArrayBound).Value = strParameterValue
        End If
        Return intArrayBound
    End Function

    Public Function getParameterValues() As DbParameter()
        Return paramValues
    End Function

    Public Sub Dispose() Implements IDisposable.Dispose
        Erase paramValues
        paramValues = Nothing
    End Sub

End Class 
```

网页功能如下所示：

```
Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
            Dim objParameterValues As New clsParameterValues
                Using objParameterValues
                    'Use the objParameterValues class here.
                End Using
                objParameterValues=nothing
            End Using
End Sub 
```

在`IDisposable.Dispose`将数组设置为`Nothing`. 我认为这是不好的做法，因为 Array 类没有实现`IDisposable`. 甚至有必要擦除一个数组并将其设置为`Nothing`吗？（垃圾收集器会处理这个吗？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T12:04:51.710

```
Public Sub Dispose() Implements IDisposable.Dispose
    Erase paramValues
    paramValues = Nothing
End Sub 
```

Erase 语句源自旧版本的 Basic，手动内存管理非常有用。不再，内存管理在 .NET 中是自动的。出于兼容性原因，它仍然受支持。它所做的只是将数组引用设置为 Nothing。所以你的代码相当于：

```
Public Sub Dispose() Implements IDisposable.Dispose
    paramValues = Nothing
    paramValues = Nothing
End Sub 
```

所以没有意义。您*永远不*应该实现 IDisposible 来将变量设置为 Nothing，这不是接口的约定。已处置的对象可能永远不会再次使用。因此，将数组引用设置为 null 没有任何意义，因为这实际上对垃圾收集堆上的真实数组对象没有任何作用。我无法看到您想要提供帮助的场景，任何 clsParameterValues 对象都应该有一个有限的生命周期。当您将数组引用设为空时，它就不再有用了。

只需删除 IDisposable 实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T11:52:30.157

> 甚至有必要擦除一个数组并将其设置为空吗？

不，GC 在它自己的时间里这样做。~~事实上，我什至不确定是否`Erase`真的可以释放资金，或者它是否只是将数组指向其他地方。~~它只是将变量设置为`Nothing`. `Erase`可能与 VB6 不兼容。例如，C# 没有它（它也没有`ReDim`，尽管`Array.Resize`当然存在，尽管语义略有不同）。

另一方面，如果您的数组包含`IDisposable`对象（它不包含），您应该通过迭代数组并依次处理它们来处理方法中的*对象*。`Dispose`但同样，阵列*本身*不需要被擦除。

作为一般评论，您的代码读起来非常像 VB6。改变那个。不要在未初始化变量的情况下声明变量。不要使用`UBound`等（`.Length`而不是属性）。如果您发现自己`ReDim`经常使用 a`System.Collections.Generic.List`而不是数组。

# xml - 通过彩色填充将数据复制到其他工作表

> ID：14337087
> 
> 赞同：0
> 
> 时间：2013-01-15T11:50:41.517
> 
> 标签：xml, excel, vba, data-binding, excel-formula

大家好（vba 编程真的很新——今天开始）假设我想根据逻辑语句将数据从一张表复制到另一张表并从上到下填充第二张表（即彼此之间没有空行）我会如何开始做这样的事情。

![在此处输入图像描述](../Images/54f13ae5fc2c38340e6ccaa831b68afa.png)

从第一张的上面，我想在第二张的下面 - 因为第 1、3、4 和 7 行包含答案

![在此处输入图像描述](../Images/06057db1d6835f941faaf0ad1addef19.png)

但这是测试数据 - 真实文件包含大约 1000 个条目

谢谢各位大侠的帮助。！

一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:21:11.067

这是答案的框架

```
Sub test()
    Application.ScreenUpdating = False
    Sheets("Patient Database").Activate
    Selection.AutoFilter

    With ActiveSheet.Range("$A$2:$D$10")
        .AutoFilter Field:=4, Criteria1:=">0"
        .Offset(1, 0).Resize(.Rows.Count - 1, .Columns.Count).Copy
    End With

    Sheets("Sheet2").Activate

    Sheets("Sheet1").Activate
    ActiveSheet.Range("A2").AutoFilter
    Application.ScreenUpdating = True
End Sub 
```

# c# - 具有大量数据点的 TeeChart Colorgrid 性能

> ID：14337088
> 
> 赞同：0
> 
> 时间：2013-01-15T11:50:44.150
> 
> 标签：c#, .net, teechart

我正在用 Visual Studio Express [C#] 编写一个应用程序，我需要同时实时显示 12 个 ColorGrids [128 x 128]。

这就是我设置图表的方式：

```
 tChart1.Aspect.View3D = false;
        tChart1.Aspect.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighSpeed;
        tChart1.Legend.Visible = false;
        tChart1.Axes.Bottom.Title.Text = "R";
        tChart1.Axes.Bottom.SetMinMax(0, 127);
        tChart1.Axes.Bottom.Increment = 20;
        tChart1.Axes.Left.Title.Text = "D";
        tChart1.Axes.Left.SetMinMax(0, 127); 
```

然后我像这样初始化 ColorGrid：

```
 for (int d = 0; d < 128; d++)
        {
            for (int r = 0; r < 128; r++)
            {
                ColorGrid.Add(r, 0, d);
            }
        } 
```

然后，我所做的只是在一些覆盖整个 128 x 128 范围的 for 循环中实时更新 YValues：

```
 ColorGrid.YValues[index] = value; 
```

在 for 循环之后，我调用：

```
 ColorGrid.BeginUpdate();
        ColorGrid.EndUpdate(); 
```

我目前有 12 个 TChart 控件，它们一起显示在一个窗体上。

我还尝试将 12 个图表组合成一个大图表，将 12 个图表绘制为 6 x 2 “子图”图表，这只会产生很小的性能差异。

有没有办法通过以下方式获得 10+fps：

要么是 12 个单独的 [128 x 128] 图，要么是一个 [128*6 x 128*2] 图？？？

如果我有任何不清楚的地方，请告诉我:-)

谢谢

京东

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:10:48.140

改善 ColorGrid 绘制时间是 Steema 的愿望清单中已经存在的功能请求 (TF02016286)。

另请注意，一般来说，随着要绘制的图表的更多点和元素（网格线、渐变等），绘制图表需要更多时间。所以我不确定它是否可以改进到您需要的程度。

我没有在您的示例中看到实现的提示是隐藏 ColorGrid Pen。这提高了一点性能：

```
ColorGrid.Pen.Visible = false; 
```

另请注意`ColorGrid.BeginUpdate()`，并被`ColorGrid.EndUpdate()`认为在分别清除和重新填充系列之前和之后调用，而不是同时调用和修改系列值之后。

# java - 来自java android的图像序列的视频编码

> ID：14337091
> 
> 赞同：8
> 
> 时间：2013-01-15T11:50:48.733
> 
> 标签：java, android, image, video-encoding, android-image

我想仅在我当前的 android 项目中使用 java 对图像序列中的视频进行编码。我的意思是不使用任何外部工具，例如 NDK。
还有用于从图像序列编码视频的 java 库吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-13T06:39:35.957

您可以使用名为 JCodec ( [http://jcodec.org](http://jcodec.org) ) 的纯 Java 库。它包含一个原始但可以工作的 H.264 (AVC) 编码器和一个功能齐全的 MP4 (ISO BMF) 多路复用器。
这是一个使用低级 API 的**更正代码示例：**

```
public void imageToMP4(BufferedImage bi) {
    // A transform to convert RGB to YUV colorspace
    RgbToYuv420 transform = new RgbToYuv420(0, 0);

    // A JCodec native picture that would hold source image in YUV colorspace
    Picture toEncode = Picture.create(bi.getWidth(), bi.getHeight(), ColorSpace.YUV420);

    // Perform conversion
    transform.transform(AWTUtil.fromBufferedImage(bi), yuv);

    // Create MP4 muxer
    MP4Muxer muxer = new MP4Muxer(sink, Brand.MP4);

    // Add a video track
    CompressedTrack outTrack = muxer.addTrackForCompressed(TrackType.VIDEO, 25);

    // Create H.264 encoder
    H264Encoder encoder = new H264Encoder(rc);

    // Allocate a buffer that would hold an encoded frame
    ByteBuffer _out = ByteBuffer.allocate(ine.getWidth() * ine.getHeight() * 6);

    // Allocate storage for SPS/PPS, they need to be stored separately in a special place of MP4 file
    List<ByteBuffer> spsList = new ArrayList<ByteBuffer>();
    List<ByteBuffer> ppsList = new ArrayList<ByteBuffer>();

    // Encode image into H.264 frame, the result is stored in '_out' buffer
    ByteBuffer result = encoder.encodeFrame(_out, toEncode);

    // Based on the frame above form correct MP4 packet
    H264Utils.encodeMOVPacket(result, spsList, ppsList);

    // Add packet to video track
    outTrack.addFrame(new MP4Packet(result, 0, 25, 1, 0, true, null, 0, 0));

    // Push saved SPS/PPS to a special storage in MP4
    outTrack.addSampleEntry(H264Utils.createMOVSampleEntry(spsList, ppsList));

    // Write MP4 header and finalize recording
    muxer.writeHeader();

} 
```

您可以从项目网站或通过 Maven 下载 JCodec 库，为此将以下代码段添加到您的 pom.xml：

```
<dependency>
    <groupId>org.jcodec</groupId>
    <artifactId>jcodec</artifactId>
    <version>0.1.3</version>
</dependency> 
```

**[更新 1]** Android 用户可以使用以下方法将 Android Bitmap 对象转换为 JCodec 原生格式：

```
public static Picture fromBitmap(Bitmap src) {
    Picture dst = Picture.create((int)src.getWidth(), (int)src.getHeight(), RGB);
    fromBitmap(src, dst);
    return dst;
}

public static void fromBitmap(Bitmap src, Picture dst) {
    int[] dstData = dst.getPlaneData(0);
    int[] packed = new int[src.getWidth() * src.getHeight()];

    src.getPixels(packed, 0, src.getWidth(), 0, 0, src.getWidth(), src.getHeight());

    for (int i = 0, srcOff = 0, dstOff = 0; i < src.getHeight(); i++) {
        for (int j = 0; j < src.getWidth(); j++, srcOff++, dstOff += 3) {
            int rgb = packed[srcOff];
            dstData[dstOff]     = (rgb >> 16) & 0xff;
            dstData[dstOff + 1] = (rgb >> 8) & 0xff;
            dstData[dstOff + 2] = rgb & 0xff;
        }
    }
} 
```

# python - OSError：结果太大

> ID：14337097
> 
> 赞同：1
> 
> 时间：2013-01-15T11:51:10.613
> 
> 标签：python, scapy

我正在玩 scapy，但我无法让它工作。我尝试了不同的代码，但都给了我相同的输出：

```
Traceback (most recent call last):
  File "<module1>", line 7, in <module>
  File "C:\Python26\lib\site-packages\scapy\sendrecv.py", line 357, in srp
    s = conf.L2socket(iface=iface, filter=filter, nofilter=nofilter, type=type)
  File "C:\Python26\lib\site-packages\scapy\arch\pcapdnet.py", line 313, in __init__
    self.outs = dnet.eth(iface)
  File "dnet.pyx", line 112, in dnet.eth.__init__
OSError: Result too large 
```

我正在使用 python 2.6，并为 scapy 安装了所有依赖项。

如何解决这个问题？

# awk - awk 从文件中读取特定列

> ID：14337104
> 
> 赞同：0
> 
> 时间：2013-01-15T11:51:36.380
> 
> 标签：awk

我有一个小问题，我会很感激帮助我解决这个问题。

总之，我有一个文件：

```
1,5,6,7,8,9

2,3,8,5,35,3

2,46,76,98,9 
```

我需要从中读取特定行并将它们打印到另一个文本文档中。我知道我可以使用 ( `awk '{print "$2" "$3"}'`) 将第二列和第三列并排打印。但是，我需要使用两个语句作为 ( `awk '{print "$2"}' >> file.text`) 然后 ( `awk '{print "$3"}' >> file.text`)，但是这两列会出现在彼此下方而不是彼此旁边。

我怎样才能让它们出现在彼此旁边？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:03:06.203

如果您*必须*在单独的进程中提取列，请使用[`paste`](http://man.cx/paste)将它们缝合在一起。我假设您的 shell 是 bash/zsh/ksh，并且我假设您的示例输入中的空行不应该在那里。

```
paste -d, <(awk -F, '{print $2}' file) <(awk -F, '{print $3}' file) 
```

生产

```
5,6
3,8
46,76 
```

没有过程替换：

```
awk -F, '{print $2}' file > tmp1
awk -F, '{print $3}' file > tmp2
paste -d, tmp1 tmp2 > output 
```

* * *

根据您的回答更新：

乍一看，这是一个令人困惑的设置。这行得通吗？

```
for (( x=1; x<=$number_of_features; x++ )); do
    feature_number=$(sed -n "$x {p;q}" feature.txt)
    if [[ -f out.txt ]]; then
        cut -d, -f$feature_number file.txt > out.txt
    else
        paste -d, out.txt <(cut -d, -f$feature_number file.txt) > tmp &&
        mv tmp out.txt
    fi
done 
```

那必须多次读取 file.txt 文件。显然只需要阅读一次会更有效率：

```
awk -F, -f numfeat=$number_of_features '
    # read the feature file into an array
    NR==FNR {
        colno[++i] = $0
        next
    }

    # now, process the file.txt and emit the desired columns
    {
        sep = ""
        for (i=1; i<=numfeat; i++) {
            printf "%s%s", sep, $(colno[i])
            sep = FS
        }
        print ""
    }
' feature.txt file.txt > out.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:04:17.900

感谢所有人为答案做出贡献。我相信我的问题应该更清楚，对此我深表歉意。

我的代码如下：

```
for (( x = 1; x <= $number_of_features ; x++ )) # the number extracted from a text file
do
    feature_number=$(awk 'FNR == "'$x'" {print}' feature.txt)
    awk -F, '{print $"'$feature_number'"}' file.txt >> out.txt
done 
```

基本上，我从文本文档中提取特征编号（与列编号相同），然后打印该列。文本文件可能包含许多特征编号。

问题是，每次我都有不同的功能编号（反映列号）。因此，应用上述解决方案不足以解决此问题。

我希望现在更清楚了。

请等待您的意见。

谢谢艾哈迈德

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T11:56:26.403

而不是使用 awks 文件重定向，而是使用 shell 重定向，例如

```
awk '{print $2,$3}' >> file 
```

逗号被替换为输出字段分隔符的值（默认为空格）。

# file - 节点 isDirectory() 无法正常工作或我遗漏了什么

> ID：14337105
> 
> 赞同：1
> 
> 时间：2013-01-15T11:51:40.940
> 
> 标签：file, node.js, sockets, directory

我想从路径中获取所有文件和目录的名称，并将它们识别为文件和目录。但是当我运行我的代码时，它有时会起作用，有时它会显示目录是文件。这是代码

```
socket.on('data',function(path){
  fs.readdir('path',function(err, data) {
    var filestatus=[];
    var z=0;
    var i=data.length-1;

    data.forEach(function(file){ 
      fs.stat(file, function(err, stats) {  
        filestatus[z]=stats.isDirectory()
        if (z==i){
          socket.emit('backinfo',{names:data,status:filestatus});
        }
        z++;
      })
    })
  })  
}) 
```

在测试过程中，我意识到当我减慢 data.forEach 循环时（使用 console.log(something) 它工作得更好（更少错过）。这很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:37:56.680

**这大约有 96% 不正确，感谢 JohnnyHK 指出我的错误，请参阅下面的评论了解真正的问题/解决方案。**

因为 fs.stat() 函数调用是异步的，所以对 filestatus 数组的操作是重叠的。您应该按照 elmigranto 的建议使用**[异步](https://github.com/caolan/async)**库，或者切换到使用 fs.statSync。

有关正在发生的事情的更多详细信息：

当您调用 fs.stat() 时，它基本上在后台运行，然后立即进入下一行代码。当它获得文件的详细信息后，它会调用回调函数，在您的代码中，该函数是您将信息添加到 filestatus 数组的函数。

因为 fs.stat() 在返回之前没有等待，所以您的程序正在非常快速地遍历数据数组，并且同时运行多个回调并导致问题，因为 z 变量没有立即递增，所以

```
filestatus[z]=stats.isDirectory() 
```

在 z 增加之前，可以由不同的回调多次执行。

希望这是有道理的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-12T17:41:48.037

you are using for statement in NODEJS and this will work if turned the For Statement to recursive function please see the attached code for help

* * *

```
function load_Files(pat,callback) {
console.log("Searching Path is: "+ph);
fs.readdir(pat,(err,files)=>
{
    if(err)
    {
        callback(err);
    }
    else
    {
        var onlydir=[];
        var onlyfiles=[];
        var d=(index)=>
            {
                if (index==files.length)
                    {
                        console.log("last index: "+ index);

                        var ar=[];
                        ar.concat(onlydir,onlyfiles);
                        callback(null,ar);
                        return;
                    }
                fs.stat(files[index],(err,status)=>
                    {
                        console.log("the needed file " +files[index]);
                    if (status.isDirectory())
                        {
                        onlydir.push(files[index]);
                        }
                        else
                        {
                            onlyfiles.push(files[index]);
                        }

                        console.log("only Directory: "+onlydir.length);
                        console.log("index: "+ index);
                        d(index+1);

                    }
                )

            }
        d(0);
    }
}); 
```

}

# java - 使用序列生成 Hibernate 复合 ID 的一部分

> ID：14337106
> 
> 赞同：2
> 
> 时间：2013-01-15T11:51:42.577
> 
> 标签：java, hibernate

给定一个像这样的复合 id/PK 类：

```
@Embeddable
public class ModelObjectPK implements Serializable {

    private String employeeId;
    private Long transactionId;

    @Column(name="EMP_ID")
    public String getEmployeeId() {
        return this.employeeId;
    }

    @Column(name="TX_ID")
    @GeneratedValue(strategy=GenerationType.SEQUENCE name="TX_SEQ")
    @SequenceGenerator(name="TX_SEQ" sequenceName="S_TX")
    public Long getTransactionId() {
        return this.transactionId;
    }

    // setters
} 
```

由于我看到一些答案倾向于否，有人说“好吧，规范说这个......”，并且一些答案引用了可以追溯到石器时代的 Hibernate 版本，我有这个问题：

**是或否**：我可以使用序列生成器生成复合 ID 的一部分吗？

我关心的 Hibernate 版本是 4.1.3 版本。

# php - PHP 复制文件间歇性失败（Debian Squeeze、PHP 5.4、NGINX 1.2.6）

> ID：14337107
> 
> 赞同：2
> 
> 时间：2013-01-15T11:51:42.977
> 
> 标签：php, nginx, debian, installation, file-copying

我有一些代码将文件复制到临时位置，稍后将其包含在 zip 文件中。

我已经将源文件存储在本地缓存目录中，并且还存储了原始文件的 SHA1 哈希值。有问题的文件是 .png 图像，大小从几 kb 到大约 500kb 不等。

我的问题是在高服务器负载下，副本会间歇性地失败。在检查我的日志后，我发现即使源位置中存在一个健康的文件，目标位置也包含一个零字节的文件。

因此，为了弄清楚发生了什么并提高可靠性，我对目标文件实施了 SHA1 检查，这样如果失败，我可以使用 shell 重试副本。

99.9% 的时间，文件复制没有问题。有时，第一次复制失败，但第二次尝试成功。在少数情况下（大约 2,500 分之一；并且始终处于高服务器负载），两个副本都会失败。在几乎所有这些情况下，目标文件的 SHA1`da39a3ee5e6b4b0d3255bfef95601890afd80709`与空文件一致。

在所有情况下，脚本都会继续，并且创建的 zip 包含一个空图像文件。Nginx、PHP 或 PHP-FPM 错误日志中没有任何内容表明存在任何问题。重试时，该脚本将成功复制相同的文件。

我的堆栈是 Debian Squeeze，在 Amazon EBS 支持的 AMI 上带有 .deb PHP 5.4/PHP 5.4 FPM 包和 Nginx 1.2.6。文件系统是 XFS，我没有使用 APC 或其他缓存。在服务器负载 > 每秒 500 次命中时，该问题是一致且可复制的。

我找不到任何可以解释这种行为的已知问题的文档。谁能提供有关可能导致此问题的原因的任何见解，或者就如何更可靠地将图像文件复制到临时位置进行压缩提供建议？

作为参考，这里是用于复制/重新复制文件的代码的摘录。

```
$copy = copy ($cacheFile, $outputFile);

if ($copy && file_exists($outputFile) && sha1_file($outputFile) !== $storedHash) {

    // Custom function to log debug messages
    dbug(array($cacheFile, sha1_file($cacheFile), 
                   $storedHash, $outputFile, 
                   file_exists($outputFile), filesize($outputFile)), 
                   'Corrupt Image File Copy from Cache 1 (native)');

    // Try with exec
    exec ("cp " . $cacheFile . " " . $outputFile);

    if (file_exists($outputFile) && sha1_file($outputFile) !== $storedHash)
    dbug(array($cacheFile, sha1_file($cacheFile), 
                   $storedHash, $outputFile, 
                   file_exists($outputFile), filesize($outputFile)), 
                   'Corrupt Image File Copy from Cache 2 (shell exec)');
} 
```

# ios - 导入委托协议的正确方法

> ID：14337109
> 
> 赞同：3
> 
> 时间：2013-01-15T11:51:48.130
> 
> 标签：ios, import, header, protocols

我尝试在我的头文件中导入尽可能少的内容（使用实现文件代替），对于类我们可以使用@class，但是协议呢？如果我尝试使用@protocol 声明将在该标头中使用的协议，则会收到警告“找不到'...'的协议定义”

仅通过导入执行协议声明的标头来处理此问题的正确方法吗？（所以一个 .h 文件导入另一个 .h）

ListViewController.h 的示例：

```
#import <UIKit/UIKit.h>
#import "JTRevealSidebarV2Delegate.h"  // is this the best way?

@class List;

@protocol JTRevealSidebarV2Delegate;  // this produces a warning.

@interface ListViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, JTRevealSidebarV2Delegate> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T11:55:11.603

你需要`#import`. `@protocol`没有为编译器提供足够的信息来进行类型检查。

（当你声明一个类型的属性时，`List`它只需要知道你真正的意思是`List`不是，比如说，`Lisp`。指向任何对象的指针都是相同的大小。另一方面，协议包含一个类的东西列表需要做。它需要知道什么是“东西”才能做任何有用的事情。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T11:55:22.860

这是正确的，但如果你想挑剔，你总是可以创建一个 .h 文件，你只声明你的协议，并拥有你的`ListViewController`和`JTRevealSidebarV2Delegate`导入它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T11:58:24.863

要做的步骤

1.  制作一个protocol.h 文件声明你的@optional 方法等
2.  在您的 A 类中导入 protocol.h 并实现这些方法。
3.  使用 calss A 的 obj 的引用从任何地方调用它的协议方法。

# wpf - Wpf应用程序窗口中的HelpButton等于什么？

> ID：14337111
> 
> 赞同：1
> 
> 时间：2013-01-15T11:51:57.703
> 
> 标签：wpf, forms

> **可能重复：**
> [帮助“？” 按钮](https://stackoverflow.com/questions/1009983/help-button)

在 Win 表单应用程序表单中存在 Windows 顶部的 HelpButton 但我在 wpf 表单应用程序窗口中找不到它。

# drupal-7 - Drupal 模块页面“统计”图表

> ID：14337125
> 
> 赞同：0
> 
> 时间：2013-01-15T11:53:03.183
> 
> 标签：drupal-7

在 Drupal 模块页面（例如[http://drupal.org/project/views](http://drupal.org/project/views)）的右栏中有显示统计信息的小图，例如“新问题”、“未解决的错误”等。这些图是用模块创建的吗？如果是的话模块叫什么？这对于我正在从事的项目来说是完美的，因为使用“图表和图形”模块，图形不能很好地缩放

谢谢

李

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:56:16.093

我认为这是 drupal.org 使用的一个：http: [//drupal.org/project/project_issue](http://drupal.org/project/project_issue)

# android - 用pocketsphinx进行可怕的语音到文本检测

> ID：14337126
> 
> 赞同：1
> 
> 时间：2013-01-15T11:53:06.747
> 
> 标签：android, voice-recognition

我按照[这里](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)的教程在 Android 上启动并运行 pocketsphinx。我在三星 Galaxy 2 上运行该应用程序并开始讲话。

问题是性能很糟糕。我可能会说“你好”，手机会在屏幕上输出“那个”。它肯定是通过麦克风检测噪音，因为只有在我说话的时候才有输出。我认为我的设置一定有问题。

有谁知道为什么我的表现如此糟糕？

```
public RecognizerTask() {
    pocketsphinx
    //      .setLogfile("/sdcard/Android/data/edu.cmu.pocketsphinx/pocketsphinx.log");
        .setLogfile("/mnt/sdcard/edu.cmu.pocketsphinx/pocketsphinx.log");

    Config c = new Config();
    /*
     * In 2.2 and above we can use getExternalFilesDir() or whatever it's
     * called
     */
    /*
    c.setString("-hmm",
            "/sdcard/Android/data/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k");
    c.setString("-dict",
            "/sdcard/Android/data/edu.cmu.pocketsphinx/lm/en_US/hub4.5000.dic");
    c.setString("-lm",
            "/sdcard/Android/data/edu.cmu.pocketsphinx/lm/en_US/hub4.5000.DMP");
    */
    c.setString("-hmm", "/mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k");
    c.setString("-dict", "/mnt/sdcard/edu.cmu.pocketsphinx/lm/en_US/hub4.5000.dic");
    c.setString("-lm", "/mnt/sdcard/edu.cmu.pocketsphinx/lm/en_US/hub4.5000.DMP");
    c.setString("-rawlogdir", "/mnt/sdcard/edu.cmu.pocketsphinx"); // Only use it to store the audio

    /*
    c.setString("-hmm",
    "/sdcard/Android/data/edu.cmu.pocketsphinx/hmm/zh/tdt_sc_8k");
    c.setString("-dict",
    "/sdcard/Android/data/edu.cmu.pocketsphinx/lm/zh_TW/mandarin_notone.dic");
    c.setString("-lm",
    "/sdcard/Android/data/edu.cmu.pocketsphinx/lm/zh_TW/gigatdt.5000.DMP");
    */
    //c.setString("-rawlogdir", "/sdcard/Android/data/edu.cmu.pocketsphinx");
    c.setFloat("-samprate", 8000.0);
    c.setInt("-maxhmmpf", 2000);
    c.setInt("-maxwpf", 10);
    c.setInt("-pl_window", 2);
    c.setBoolean("-backtrace", true);
    c.setBoolean("-bestpath", false);
    this.ps = new Decoder(c);
    this.audio = null;
    this.audioq = new LinkedBlockingQueue<short[]>();
    this.use_partials = false;
    this.mailbox = Event.NONE;
} 
```

口袋狮身人面像日志

```
INFO: cmd_ln.c(691): Parsing command line:

Current configuration:
[NAME]      [DEFLT]     [VALUE]
-agc        none        none
-agcthresh  2.0     2.000000e+00
-alpha      0.97        9.700000e-01
-ascale     20.0        2.000000e+01
-aw     1       1
-backtrace  no      no
-beam       1e-48       1.000000e-48
-bestpath   yes     yes
-bestpathlw 9.5     9.500000e+00
-bghist     no      no
-ceplen     13      13
-cmn        current     current
-cmninit    8.0     8.0
-compallsen no      no
-debug              0
-dict               
-dictcase   no      no
-dither     no      no
-doublebw   no      no
-ds     1       1
-fdict              
-feat       1s_c_d_dd   1s_c_d_dd
-featparams         
-fillprob   1e-8        1.000000e-08
-frate      100     100
-fsg                
-fsgusealtpron  yes     yes
-fsgusefiller   yes     yes
-fwdflat    yes     yes
-fwdflatbeam    1e-64       1.000000e-64
-fwdflatefwid   4       4
-fwdflatlw  8.5     8.500000e+00
-fwdflatsfwin   25      25
-fwdflatwbeam   7e-29       7.000000e-29
-fwdtree    yes     yes
-hmm                
-input_endian   little      little
-jsgf               
-kdmaxbbi   -1      -1
-kdmaxdepth 0       0
-kdtree             
-latsize    5000        5000
-lda                
-ldadim     0       0
-lextreedump    0       0
-lifter     0       0
-lm             
-lmctl              
-lmname     default     default
-logbase    1.0001      1.000100e+00
-logfn              
-logspec    no      no
-lowerf     133.33334   1.333333e+02
-lpbeam     1e-40       1.000000e-40
-lponlybeam 7e-29       7.000000e-29
-lw     6.5     6.500000e+00
-maxhmmpf   -1      -1
-maxnewoov  20      20
-maxwpf     -1      -1
-mdef               
-mean               
-mfclogdir          
-min_endfr  0       0
-mixw               
-mixwfloor  0.0000001   1.000000e-07
-mllr               
-mmap       yes     yes
-ncep       13      13
-nfft       512     512
-nfilt      40      40
-nwpen      1.0     1.000000e+00
-pbeam      1e-48       1.000000e-48
-pip        1.0     1.000000e+00
-pl_beam    1e-10       1.000000e-10
-pl_pbeam   1e-5        1.000000e-05
-pl_window  0       0
-rawlogdir          
-remove_dc  no      no
-round_filters  yes     yes
-samprate   16000       1.600000e+04
-seed       -1      -1
-sendump            
-senlogdir          
-senmgau            
-silprob    0.005       5.000000e-03
-smoothspec no      no
-svspec             
-tmat               
-tmatfloor  0.0001      1.000000e-04
-topn       4       4
-topn_beam  0       0
-toprule            
-transform  legacy      legacy
-unit_area  yes     yes
-upperf     6855.4976   6.855498e+03
-usewdphones    no      no
-uw     1.0     1.000000e+00
-var                
-varfloor   0.0001      1.000000e-04
-varnorm    no      no
-verbose    no      no
-warp_params            
-warp_type  inverse_linear  inverse_linear
-wbeam      7e-29       7.000000e-29
-wip        0.65        6.500000e-01
-wlen       0.025625    2.562500e-02

INFO: cmd_ln.c(691): Parsing command line:
\
    -nfilt 20 \
    -lowerf 1 \
    -upperf 4000 \
    -wlen 0.025 \
    -transform dct \
    -round_filters no \
    -remove_dc yes \
    -svspec 0-12/13-25/26-38 \
    -feat 1s_c_d_dd \
    -agc none \
    -cmn current \
    -cmninit 56,-3,1 \
    -varnorm no 

Current configuration:
[NAME]      [DEFLT]     [VALUE]
-agc        none        none
-agcthresh  2.0     2.000000e+00
-alpha      0.97        9.700000e-01
-ceplen     13      13
-cmn        current     current
-cmninit    8.0     56,-3,1
-dither     no      no
-doublebw   no      no
-feat       1s_c_d_dd   1s_c_d_dd
-frate      100     100
-input_endian   little      little
-lda                
-ldadim     0       0
-lifter     0       0
-logspec    no      no
-lowerf     133.33334   1.000000e+00
-ncep       13      13
-nfft       512     512
-nfilt      40      20
-remove_dc  no      yes
-round_filters  yes     no
-samprate   16000       8.000000e+03
-seed       -1      -1
-smoothspec no      no
-svspec             0-12/13-25/26-38
-transform  legacy      dct
-unit_area  yes     yes
-upperf     6855.4976   4.000000e+03
-varnorm    no      no
-verbose    no      no
-warp_params            
-warp_type  inverse_linear  inverse_linear
-wlen       0.025625    2.500000e-02

INFO: acmod.c(246): Parsed model-specific feature parameters from /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/feat.params
INFO: feat.c(713): Initializing feature stream to type: '1s_c_d_dd', ceplen=13, CMN='current', VARNORM='no', AGC='none'
INFO: cmn.c(142): mean[0]= 12.00, mean[1..12]= 0.0
INFO: acmod.c(167): Using subvector specification 0-12/13-25/26-38
INFO: mdef.c(517): Reading model definition: /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/mdef
INFO: mdef.c(528): Found byte-order mark BMDF, assuming this is a binary mdef file
INFO: bin_mdef.c(336): Reading binary model definition: /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/mdef
INFO: bin_mdef.c(513): 50 CI-phone, 143047 CD-phone, 3 emitstate/phone, 150 CI-sen, 5150 Sen, 27135 Sen-Seq
INFO: tmat.c(205): Reading HMM transition probability matrices: /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/transition_matrices
INFO: acmod.c(121): Attempting to use SCHMM computation module
INFO: ms_gauden.c(198): Reading mixture gaussian parameter: /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/means
INFO: ms_gauden.c(292): 1 codebook, 3 feature, size: 
INFO: ms_gauden.c(294):  256x13
INFO: ms_gauden.c(294):  256x13
INFO: ms_gauden.c(294):  256x13
INFO: ms_gauden.c(198): Reading mixture gaussian parameter: /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/variances
INFO: ms_gauden.c(292): 1 codebook, 3 feature, size: 
INFO: ms_gauden.c(294):  256x13
INFO: ms_gauden.c(294):  256x13
INFO: ms_gauden.c(294):  256x13
INFO: ms_gauden.c(354): 0 variance values floored
INFO: s2_semi_mgau.c(903): Loading senones from dump file /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/sendump
INFO: s2_semi_mgau.c(927): BEGIN FILE FORMAT DESCRIPTION
INFO: s2_semi_mgau.c(1022): Using memory-mapped I/O for senones
INFO: s2_semi_mgau.c(1296): Maximum top-N: 4 Top-N beams: 0 0 0
INFO: phone_loop_search.c(105): State beam -230231 Phone exit beam -115115 Insertion penalty 0
INFO: dict.c(317): Allocating 10319 * 20 bytes (201 KiB) for word entries
INFO: dict.c(332): Reading main dictionary: /mnt/sdcard/edu.cmu.pocketsphinx/lm/en_US/hub4.5000.dic
INFO: dict.c(211): Allocated 44 KiB for strings, 69 KiB for phones
INFO: dict.c(335): 6212 words read
INFO: dict.c(341): Reading filler dictionary: /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/noisedict
INFO: dict.c(211): Allocated 0 KiB for strings, 0 KiB for phones
INFO: dict.c(344): 11 words read
INFO: dict2pid.c(396): Building PID tables for dictionary
INFO: dict2pid.c(404): Allocating 50^3 * 2 bytes (244 KiB) for word-initial triphones
INFO: dict2pid.c(131): Allocated 30200 bytes (29 KiB) for word-final triphones
INFO: dict2pid.c(195): Allocated 30200 bytes (29 KiB) for single-phone word triphones
INFO: ngram_model_arpa.c(77): No \data\ mark in LM file
INFO: ngram_model_dmp.c(142): Will use memory-mapped I/O for LM file
INFO: ngram_model_dmp.c(196): ngrams 1=5001, 2=436879, 3=418286
INFO: ngram_model_dmp.c(242):     5001 = LM.unigrams(+trailer) read
INFO: ngram_model_dmp.c(288):   436879 = LM.bigrams(+trailer) read
INFO: ngram_model_dmp.c(314):   418286 = LM.trigrams read
INFO: ngram_model_dmp.c(339):    37293 = LM.prob2 entries read
INFO: ngram_model_dmp.c(359):    14370 = LM.bo_wt2 entries read
INFO: ngram_model_dmp.c(379):    36094 = LM.prob3 entries read
INFO: ngram_model_dmp.c(407):      854 = LM.tseg_base entries read
INFO: ngram_model_dmp.c(463):     5001 = ascii word strings read
INFO: ngram_search_fwdtree.c(99): 457 unique initial diphones
INFO: ngram_search_fwdtree.c(147): 0 root, 0 non-root channels, 27 single-phone words
INFO: ngram_search_fwdtree.c(186): Creating search tree
INFO: ngram_search_fwdtree.c(191): before: 0 root, 0 non-root channels, 27 single-phone words
INFO: ngram_search_fwdtree.c(326): after: max nonroot chan increased to 13439
INFO: ngram_search_fwdtree.c(338): after: 457 root, 13311 non-root channels, 26 single-phone words
INFO: ngram_search_fwdflat.c(156): fwdflat: min_ef_width = 4, max_sf_win = 25
INFO: cmd_ln.c(691): Parsing command line:

Current configuration:
[NAME]      [DEFLT]     [VALUE]
-agc        none        none
-agcthresh  2.0     2.000000e+00
-alpha      0.97        9.700000e-01
-ascale     20.0        2.000000e+01
-aw     1       1
-backtrace  no      no
-beam       1e-48       1.000000e-48
-bestpath   yes     yes
-bestpathlw 9.5     9.500000e+00
-bghist     no      no
-ceplen     13      13
-cmn        current     current
-cmninit    8.0     8.0
-compallsen no      no
-debug              0
-dict               
-dictcase   no      no
-dither     no      no
-doublebw   no      no
-ds     1       1
-fdict              
-feat       1s_c_d_dd   1s_c_d_dd
-featparams         
-fillprob   1e-8        1.000000e-08
-frate      100     100
-fsg                
-fsgusealtpron  yes     yes
-fsgusefiller   yes     yes
-fwdflat    yes     yes
-fwdflatbeam    1e-64       1.000000e-64
-fwdflatefwid   4       4
-fwdflatlw  8.5     8.500000e+00
-fwdflatsfwin   25      25
-fwdflatwbeam   7e-29       7.000000e-29
-fwdtree    yes     yes
-hmm                
-input_endian   little      little
-jsgf               
-kdmaxbbi   -1      -1
-kdmaxdepth 0       0
-kdtree             
-latsize    5000        5000
-lda                
-ldadim     0       0
-lextreedump    0       0
-lifter     0       0
-lm             
-lmctl              
-lmname     default     default
-logbase    1.0001      1.000100e+00
-logfn              
-logspec    no      no
-lowerf     133.33334   1.333333e+02
-lpbeam     1e-40       1.000000e-40
-lponlybeam 7e-29       7.000000e-29
-lw     6.5     6.500000e+00
-maxhmmpf   -1      -1
-maxnewoov  20      20
-maxwpf     -1      -1
-mdef               
-mean               
-mfclogdir          
-min_endfr  0       0
-mixw               
-mixwfloor  0.0000001   1.000000e-07
-mllr               
-mmap       yes     yes
-ncep       13      13
-nfft       512     512
-nfilt      40      40
-nwpen      1.0     1.000000e+00
-pbeam      1e-48       1.000000e-48
-pip        1.0     1.000000e+00
-pl_beam    1e-10       1.000000e-10
-pl_pbeam   1e-5        1.000000e-05
-pl_window  0       0
-rawlogdir          
-remove_dc  no      no
-round_filters  yes     yes
-samprate   16000       1.600000e+04
-seed       -1      -1
-sendump            
-senlogdir          
-senmgau            
-silprob    0.005       5.000000e-03
-smoothspec no      no
-svspec             
-tmat               
-tmatfloor  0.0001      1.000000e-04
-topn       4       4
-topn_beam  0       0
-toprule            
-transform  legacy      legacy
-unit_area  yes     yes
-upperf     6855.4976   6.855498e+03
-usewdphones    no      no
-uw     1.0     1.000000e+00
-var                
-varfloor   0.0001      1.000000e-04
-varnorm    no      no
-verbose    no      no
-warp_params            
-warp_type  inverse_linear  inverse_linear
-wbeam      7e-29       7.000000e-29
-wip        0.65        6.500000e-01
-wlen       0.025625    2.562500e-02

INFO: cmd_ln.c(691): Parsing command line:
\
    -nfilt 20 \
    -lowerf 1 \
    -upperf 4000 \
    -wlen 0.025 \
    -transform dct \
    -round_filters no \
    -remove_dc yes \
    -svspec 0-12/13-25/26-38 \
    -feat 1s_c_d_dd \
    -agc none \
    -cmn current \
    -cmninit 56,-3,1 \
    -varnorm no 

Current configuration:
[NAME]      [DEFLT]     [VALUE]
-agc        none        none
-agcthresh  2.0     2.000000e+00
-alpha      0.97        9.700000e-01
-ceplen     13      13
-cmn        current     current
-cmninit    8.0     56,-3,1
-dither     no      no
-doublebw   no      no
-feat       1s_c_d_dd   1s_c_d_dd
-frate      100     100
-input_endian   little      little
-lda                
-ldadim     0       0
-lifter     0       0
-logspec    no      no
-lowerf     133.33334   1.000000e+00
-ncep       13      13
-nfft       512     512
-nfilt      40      20
-remove_dc  no      yes
-round_filters  yes     no
-samprate   16000       8.000000e+03
-seed       -1      -1
-smoothspec no      no
-svspec             0-12/13-25/26-38
-transform  legacy      dct
-unit_area  yes     yes
-upperf     6855.4976   4.000000e+03
-varnorm    no      no
-verbose    no      no
-warp_params            
-warp_type  inverse_linear  inverse_linear
-wlen       0.025625    2.500000e-02

INFO: acmod.c(246): Parsed model-specific feature parameters from /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/feat.params
INFO: feat.c(713): Initializing feature stream to type: '1s_c_d_dd', ceplen=13, CMN='current', VARNORM='no', AGC='none'
INFO: cmn.c(142): mean[0]= 12.00, mean[1..12]= 0.0
INFO: acmod.c(167): Using subvector specification 0-12/13-25/26-38
INFO: mdef.c(517): Reading model definition: /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/mdef
INFO: mdef.c(528): Found byte-order mark BMDF, assuming this is a binary mdef file
INFO: bin_mdef.c(336): Reading binary model definition: /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/mdef
INFO: bin_mdef.c(513): 50 CI-phone, 143047 CD-phone, 3 emitstate/phone, 150 CI-sen, 5150 Sen, 27135 Sen-Seq
INFO: tmat.c(205): Reading HMM transition probability matrices: /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/transition_matrices
INFO: acmod.c(121): Attempting to use SCHMM computation module
INFO: ms_gauden.c(198): Reading mixture gaussian parameter: /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/means
INFO: ms_gauden.c(292): 1 codebook, 3 feature, size: 
INFO: ms_gauden.c(294):  256x13
INFO: ms_gauden.c(294):  256x13
INFO: ms_gauden.c(294):  256x13
INFO: ms_gauden.c(198): Reading mixture gaussian parameter: /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/variances
INFO: ms_gauden.c(292): 1 codebook, 3 feature, size: 
INFO: ms_gauden.c(294):  256x13
INFO: ms_gauden.c(294):  256x13
INFO: ms_gauden.c(294):  256x13
INFO: ms_gauden.c(354): 0 variance values floored
INFO: s2_semi_mgau.c(903): Loading senones from dump file /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/sendump
INFO: s2_semi_mgau.c(927): BEGIN FILE FORMAT DESCRIPTION
INFO: s2_semi_mgau.c(1022): Using memory-mapped I/O for senones
INFO: s2_semi_mgau.c(1296): Maximum top-N: 4 Top-N beams: 0 0 0
INFO: phone_loop_search.c(105): State beam -230231 Phone exit beam -115115 Insertion penalty 0
INFO: dict.c(317): Allocating 10319 * 20 bytes (201 KiB) for word entries
INFO: dict.c(332): Reading main dictionary: /mnt/sdcard/edu.cmu.pocketsphinx/lm/en_US/hub4.5000.dic
INFO: dict.c(211): Allocated 44 KiB for strings, 69 KiB for phones
INFO: dict.c(335): 6212 words read
INFO: dict.c(341): Reading filler dictionary: /mnt/sdcard/edu.cmu.pocketsphinx/hmm/en_US/hub4wsj_sc_8k/noisedict
INFO: dict.c(211): Allocated 0 KiB for strings, 0 KiB for phones
INFO: dict.c(344): 11 words read
INFO: dict2pid.c(396): Building PID tables for dictionary
INFO: dict2pid.c(404): Allocating 50^3 * 2 bytes (244 KiB) for word-initial triphones
INFO: dict2pid.c(131): Allocated 30200 bytes (29 KiB) for word-final triphones
INFO: dict2pid.c(195): Allocated 30200 bytes (29 KiB) for single-phone word triphones
INFO: ngram_model_arpa.c(77): No \data\ mark in LM file
INFO: ngram_model_dmp.c(142): Will use memory-mapped I/O for LM file
INFO: ngram_model_dmp.c(196): ngrams 1=5001, 2=436879, 3=418286
INFO: ngram_model_dmp.c(242):     5001 = LM.unigrams(+trailer) read
INFO: ngram_model_dmp.c(288):   436879 = LM.bigrams(+trailer) read
INFO: ngram_model_dmp.c(314):   418286 = LM.trigrams read
INFO: ngram_model_dmp.c(339):    37293 = LM.prob2 entries read
INFO: ngram_model_dmp.c(359):    14370 = LM.bo_wt2 entries read
INFO: ngram_model_dmp.c(379):    36094 = LM.prob3 entries read
INFO: ngram_model_dmp.c(407):      854 = LM.tseg_base entries read
INFO: ngram_model_dmp.c(463):     5001 = ascii word strings read
INFO: ngram_search_fwdtree.c(99): 457 unique initial diphones
INFO: ngram_search_fwdtree.c(147): 0 root, 0 non-root channels, 27 single-phone words
INFO: ngram_search_fwdtree.c(186): Creating search tree
INFO: ngram_search_fwdtree.c(191): before: 0 root, 0 non-root channels, 27 single-phone words
INFO: ngram_search_fwdtree.c(326): after: max nonroot chan increased to 13439
INFO: ngram_search_fwdtree.c(338): after: 457 root, 13311 non-root channels, 26 single-phone words
INFO: ngram_search_fwdflat.c(156): fwdflat: min_ef_width = 4, max_sf_win = 25 
```

以及日志文件和 .raw 文件的链接

[dl.dropbox.com/s/3dkueyz4wgx174z/pocketsphinx.zip?dl=1](http://dl.dropbox.com/s/3dkueyz4wgx174z/pocketsphinx.zip?dl=1)

# linux - 如何在 linux 中使用 perl 从显示的输出中提取数字

> ID：14337133
> 
> 赞同：1
> 
> 时间：2013-01-15T11:53:38.143
> 
> 标签：linux, perl, shell, unix, jmx

```
# This Perl script open connection and call domains
# $jar stands for path of jmxterm jar file

open JMX, "| java -jar jmxterm-1.0-alpha-4-uber.jar -n"; // jmx jar file 
#print JMX "help \n";

my $host = "127.0.0.1"; // hostname
my $port = 7199; //jmx port number

print JMX "open $host:$port\n";
#print JMX "domains\n";
print JMX "domain org.apache.cassandra.request\n";
print JMX "bean type=ReadRepairStage\n";
print JMX "get CompletedTasks\n"; 
print JMX "close\n";
close JMX; 
```

目前我正在得到`CompletedTasks = 1234`我需要的输出`1234`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:02:32.440

[Jmx4Perl](http://www.jmx4perl.org)提供了一个完整的 Perl API 来访问 JMX 信息。这里不需要启动 JVM，但是需要安装[Jolokia](http://www.jolokia.org)代理（但也有无代理[代理模式](http://www.jolokia.org/features/proxy.html)）。

您也可以轻松地使用纯 shell 脚本访问代理，因为代理通过简单的 JSON 和 HTTP 公开 JMX API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:21:00.173

您不能使用 simple`open`来建立双向通信。更多信息请参见[IPC::Open2](http://p3rl.org/IPC%3a%3aOpen2)。

# ajax - 使用 CodeIgniter 和 jQuery 的简单 AJAX 查询

> ID：14337134
> 
> 赞同：0
> 
> 时间：2013-01-15T11:53:41.713
> 
> 标签：ajax, codeigniter, jquery, preventdefault

我只是想用 AJAX 将一个名为“Load-about.php”的页面中的 div 拉到我的主页上。我一直在学习 tutsnet 课程“学习 jQuery 的 30 天”，但由于我正在使用 CI 并且我正在尝试调整这些课程，因此当它即将从另一个页面加载内容时我被卡住了。

所以我有我的主页：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Load</title>
    <link rel="stylesheet" href="<?php echo base_url('bootstrap/css/bootstrap.min.css'); ?>" >

    <style>
    </style>
</head>
<body>

    <a href="<?php echo site_url('Ajax/lessonTwentyThree/Load-about'); ?>">Try to make AJAX working !</a>
    </br>
    <a href="<?php echo site_url('Ajax/lessonTwentyThree/Load-Contact'); ?>">Contact</a>

    <div class="wrap"></div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
(function() {
    var wrap = $('div.wrap');

    $('a').on('click', function(e) {
        var href = $(this).attr('href');
        wrap.load(href +'.container' ) ;
         e.preventDefault();
    });

})();

    </script>
</body>
</html> 
```

我只是调用一个非常简单的 CI 控制器，它只调用所询问的视图，并且在没有链接的情况下一切正常。

但是现在，我被重定向到页面而不是使用 AJAX 调用。为什么 ？为什么 e.preventDefault(); 或返回假；是不是阻止链接到他们的默认操作？

谢谢

编辑：感谢 Jai，我发现了我的错误，一个简单的昏迷。但是，现在，我得到“GET [http://www.localhost.com/CodeIgniterJQUERY/index.php/Ajax/lessonTwentyThree/Load-Contact.container](http://www.localhost.com/CodeIgniterJQUERY/index.php/Ajax/lessonTwentyThree/Load-Contact.container) 500（内部服务器错误）”

问题来自 .container 因为我想指定类并且 Ci 理解它，因为它是一个参数。

这是控制器：

类 Ajax 扩展 CI_Controller {

```
 /**
     * Nous allons ici nous occuper de toutes les fcts AJAX
     */

    public function lessonTwentyThree($page)
    { // En fait, on a pas besoin de ca, on va directement loader la vue directement.
        $this->load->view($page);
    }

} 
```

我只想从 Load-Contact 抓取一个 div 到主页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:56:32.817

你必须向上移动它：

```
(function($) {
    var wrap = $('div.wrap');

    $('a').on('click', function(e) {
       e.preventDefault(); 
       var href = $(this).attr('href');
       wrap.load(href +'.container' ) ;
    });
})(jQuery); 
```

并且**您必须放置一个`','`点击后处理程序**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T13:42:14.533

**除了杰所说**的。你有一个codeigniter**逻辑**错误。

当你说：

```
$this->load->view($page); 
```

这意味着 codeigniter 将在内部重定向到视图。在您的情况下，您需要取回视图内容而不是加载它。

因此，codeigniter 支持第三个参数，该函数`view()`要求它获取视图内容为`String`. 您可以这样做并发送要加载的视图，如下所示：

```
$string = $this->load->view($page, '', true);
echo $string; 
```

希望这能解决你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:00:40.057

也尝试改变

```
(function() {

})(); 
```

到

```
$(function() {

}); 
```

# heroku - 无法在 Heroku 上访问我的应用程序 - 没有上下文路径

> ID：14337139
> 
> 赞同：0
> 
> 时间：2013-01-15T11:54:19.960
> 
> 标签：heroku, struts2, action-mapping

在过去的两天里，我一直在努力让我的 Struts2 应用程序（只是一个简单的测试页面——现在没有数据库或任何花哨的东西）在 Heroku 上使用 Jetty Runner 启动并运行。我终于做到了——它部署成功，但是当我尝试访问它时出现错误。

在我的本地开发机器上，我访问我的应用程序（名为`TestMaven`），如下所示：

```
http://localhost:8080/TestMaven/ 
```

它有效。但是，当我尝试在 Heroku (myappname.herokuapp.com) 上访问我的应用程序时，我收到此错误：

```
There is no Action mapped for namespace [/] and action name [] associated with context path []. 
```

这看起来像 Heroku 不知道上下文路径是`TestMaven`.

这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
    <display-name>Nebula</display-name>
        <context-param>
        <param-name>org.apache.tiles.definition.DefinitionsFactory.DEFINITIONS_CONFIG</param-name>
        <param-value>/WEB-INF/tiles.xml</param-value>
    </context-param>
    <listener>
        <listener-class>
            org.apache.struts2.tiles.StrutsTilesListener
        </listener-class>
    </listener>
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</web-app> 
```

和struts.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN" "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
    <package name="front" extends="struts-default">
        <result-types>
            <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult" />
        </result-types>
        <action name="" class="com.eleeist.TestMaven.action.Index">
            <result name="success" type="tiles">/index.tiles</result>
        </action>
    </package>
</struts> 
```

# c# - HttpWebResponse 抛出超时异常

> ID：14337152
> 
> 赞同：1
> 
> 时间：2013-01-15T11:55:00.607
> 
> 标签：c#, asp.net, httpwebrequest, forms-authentication

我正在尝试验证一个`HttpWebRequest`. 我的代码是这样的

```
 string url = "http://mydomain.com";
    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
    HttpCookie cookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];
    req.Headers[HttpRequestHeader.Cookie] = string.Format("{0}={1}", cookie.Name, cookie.Value);
    WebResponse res = req.GetResponse(); 
```

一切正常，直到最后一行执行（*WebResponse res = req.GetResponse();*）。当最后一行执行时，代码执行回到第一行（*string url = "string url = "http://mydomain.com";";* ) 并重新开始，这种情况发生了很多次，以至于发生了超时异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:03:08.590

首先 - 不清楚为什么 url 是这样定义的：

```
string url = "HttpContext.Current.Request.Url.AbsoluteUri"; 
```

这不是一个有效的 URL。但如果你有

```
string url = HttpContext.Current.Request.Url.AbsoluteUri; 
```

比您对所在的同一页面产生请求。所以基本上，您只需产生一个循环。您从浏览器调用您的页面，它使用 webrequest 调用自己，然后再次调用自己。因此，在 VS 调试器中，它会像回到第一行一样显示给您。
尝试简单地更改 url 定义，如下所示：

```
string url = "http://wwww.google.com"; 
```

如果你这样做，它应该可以正常工作。基本上，据我了解，您只是使用了错误的 URL，它会创建类似循环的东西（或者更好地说：长链调用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:57:25.513

尝试取消引号`HttpContext`：

```
string url = HttpContext.Current.Request.Url.AbsoluteUri; 
```

您要的是文字 URI 地址“HttpContext.Current.Request.Url.AbsoluteUri”，而不是变量中包含的实际绝对 URI“http://domain.com/” `HttpContext.Current.Request.Url.AbsoluteUri`。

# ios - IOS文字游戏。验证单词性能

> ID：14337153
> 
> 赞同：0
> 
> 时间：2013-01-15T11:55:06.177
> 
> 标签：ios, objective-c, dictionary, word

我正在构建一个拼字游戏，但单词字典有一些问题。它包含约 700,000 个单词，大小约为 18 MB。

现在，我正在将整个 dict 加载到一个数组中，这在 iPhone 4 上需要 12 秒。

```
wordList = [NSMutableArray arrayWithContentsOfFile: [[self applicationDocumentsDirectory] stringByAppendingString:@"/wordlist.plist"]]; 
```

我有两个问题：

1.  有没有更好的方法来更快地加载单词表和/或减少内存？

2.  从一组字母中获取所有可能的单词大约需要 12 秒。有没有可能让它更快？这是代码：

    ```
    -(NSMutableArray *)getValidWords:(NSString *)letters{
        NSMutableArray *list = [[NSMutableArray alloc] init];

        for (int i = 0, c = [wordList count]; i < c; i++){
        if ([self isWordValid: [wordList objectAtIndex: i] forLetters:letters]){
            [list addObject:[wordList objectAtIndex: i]];
        }
    }

    return list; 
    ```

    }

    ```
    - (BOOL)isWordValid:(NSString *)word forLetters:(NSString *)ltrs{
        int i, z;
        NSRange range;
        BOOL found;
        static NSMutableString *letters = nil;

        if ([word length] < 2) return NO;

        if(letters == nil) {
            letters = [[NSMutableString alloc] initWithString:ltrs];
        }
        else {
            [letters setString: ltrs];
        }

        found = NO;
        range.length = 1;
        for(i = 0; i < [word length]; i++){
            for(z = 0; z < [letters length]; z++){
                if([word characterAtIndex:i] == [letters characterAtIndex:z]){
                     range.location = z;
                     [letters deleteCharactersInRange: range];
                     found = YES;
                     break;
                }
           }
           if (found == NO){
                return NO;
           }

           found = NO;
      }

      return YES;
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:23:16.617

你需要改变一些东西来加快速度。

1.  使用快速枚举代替旧的 C 样式循环。

2.  避免大量的方法调用。

3.  如果可能，请使用 NSPredicate 和/或 Regex。

* * *

每当您编写`[letters length]`一个方法时，都会调用它，而不是数百万次找到它（这是在嵌套循环的第三级内），而是将其存储在一个变量中并使用它。

快速枚举：代替`for(int i=0; i<[someArrays count];i++)`使用`for(id object in someArrays)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T12:04:15.017

用这个
`[NSThread detachNewThreadSelector:@selector(fetchWords:) toTarget:self withObject:data];`

不要在主线程中这样做

如果您需要搜索单词，请使用此代码修改它

```
NSMutableArray *subpredicates = [NSMutableArray array];

    for(NSString *term in arryOfWordsToBeSearched) {
        NSPredicate *p = [NSPredicate predicateWithFormat:@"self contains[cd] %@",term];
        [subpredicates addObject:p];
        }

     NSPredicate *filter = [NSCompoundPredicate andPredicateWithSubpredicates:subpredicates];
    result = (NSMutableArray*)[arryOfDummyData filteredArrayUsingPredicate: filter]; 
```

//结果是一个数组

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T12:27:26.800

`NSCharacterSet`只是对于初学者，在调用冗长的函数之前，从你创建一个`letters`并调用这个函数。这是一种更快的检查，可以减少可能性，它应该会缩短您的计算时间。

```
NSCharacterSet* lettersSet = [NSCharacterSet characterSetWithCharactersInString:letters];

- (BOOL)isWordValid:(NSString*)word forLettersSet:(NSCharacterSet*)lettersSet {
    if ([word length] < 2) return NO;

    NSCharacterSet* wordLetters = [NSCharacterSet characterSetWithCharactersInString:word];

    return [lettersSet isSupersetOfSet:wordLetters];
} 
```

理想情况下，您的单词数据库应该预先计算每个单词的字母数（例如`every = {e=2, r=1, v=1, y=1}`，您应该只使用这些结构。请注意，字母的顺序并不重要 - 使用这一事实可以大大提高算法的性能。

你也可以尝试创建一个 Core Data 数据库——每个单词都是一个记录，每个字母都有一个数字字段。然后您可以创建一个请求，该请求将非常快地返回可用的单词。（当然，数据库可能会占用更大的空间）。

编辑：现在我已经找到了`NSCountedSet`类，所以让我们尝试使用它：

```
-(NSCountedSet*)lettersSetFromString:(NSString*)string {
    NSCountedSet* letters = [NSCountedSet set];
    [string enumerateSubstringsInRange:NSMakeRange(0, self.length)  
                               options:NSStringEnumerationByComposedCharacterSequences   
                            usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
        [letters addObject:substring];
    }];
} 

-(NSMutableArray *)validWordsForLetters:(NSString*)letters {
    NSCountedSet* lettersSet = [self lettersSetFromString:letters];

    NSMutableArray* results = [NSMutableArray array];

    for (NSString* word in wordList) {
        if ([word length] < 2) {
            continue;
        }

        NSCountedSet* wordLettersSet = [self lettersSetFromString:word];

        if ([wordLettersSet isSubsetOfSet:lettersSet]) {
            [results addObject:word];
        }
    }

    return results;
}
```

预先为每个单词生成计数集将对性能有很大帮助。对于操作系统内存，使用 Core Data 数据库仍然会更快更好。

# regex - 使用任何程序在字符串中查找特定模式（序列）

> ID：14337154
> 
> 赞同：0
> 
> 时间：2013-01-15T11:55:09.313
> 
> 标签：regex, string, search, match

我需要任何方式（使用任何免费程序）在字符串中查找模式。

例如：

我搜索`12321`

字符串是`dkaowkdlertrelkjh`

搜索字符串具有特定模式（第一个和最后一个字符相同，第二个和第四个相同，第三个与所有其他字符不同）

在字符串中，这与部分匹配，`ertre` `dkaowkdl**ertre**lkjh`因为它遵循相同的模式。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:29:19.373

你可以自己写。这并不难，我们所要做的就是找到如何匹配重复组。我是一名 python 程序员，所以我的解决方案是在**python**上。

[在re 模块](http://docs.python.org/2/library/re.html#module-re)的帮助下，我们发现我们可以像这样命名匹配的组`(?P<name>...)`，然后像`(?P=name)`.

就是这个。我们将使用作为模式描述符的字母模式（不是数字）——它有点简单，让我们能够在内存中存储更多组。

```
import re

def GenerateRegexp(patternDescription, anySequence='.+'):
  '''
  Creates string regexp, that will describe our ABCAB-pattern in terms of regexp
  '''
  used = []
  regexp = ""
  for character in patternDescription:
     if character not in used:
        regexp += "(?P<%s>%s)" % (character, anySequence)  # we should be more attentive here if we expect % here, we can use str.format instead, but still might have a problem with {} symbols
        used.append(character)
     else:
        regexp += "(?P=%s)" % character
  return regexp

def Matches(string, pattern):
    '''
    Returns a bool answer, wheter string matches our pattern
    '''
    r = generate_regexp(pattern)
    SearchPattern = re.compile(r)
    return bool(SearchPattern.match(string)) 
```

使用示例（检查 aabbaabb 字符串是否匹配 'abab' 模板（您的语言中为 1212））：

```
print Matches (patternDescription="abab", string="aabbaabb") 
```

# php - 空返回 preg_split [如何]？

> ID：14337169
> 
> 赞同：0
> 
> 时间：2013-01-15T11:55:38.060
> 
> 标签：php, preg-split

我有这样的字符串

```
$string = '$foo$wow$123$$$ok$'; 
```

我想像这样返回空字符串并将字符串保存在数组中

```
0 = foo
1 = wow
2 = 123
3 = 
4 =
5 = ok 
```

我使用`PREG_SPLIT_NO_EMPTY`，我知道何时`PREG_SPLIT_NO_EMPTY`返回不为空，但我希望任何结果为空，我希望我的结果保存在变量数组中`PREG_SPLIT_NO_EMPTY`，如`$chars[$i];`

这是我的 preg_split ：

```
$chars = preg_split('/[\s]*[$][\s]*/', $string, -1, PREG_SPLIT_NO_EMPTY); 

for($i=0;$i<=5;$i++){
     echo $i.' = '.$chars[$i];
} 
```

我想要，我的结果显示循环。在对象循环中没有我想要纯这个循环：

```
for($i=0;$i<=5;$i++){
     echo $i.' = '.$chars[$i];
} 
```

显示我的结果。

我如何使用这个 preg_split，谢谢你的提前......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:57:10.397

使用爆炸

```
$str = '$foo$wow$123$$$ok$';
$res = explode ("$",$str);

print_r($res);

Array
(
    [0] => 
    [1] => foo
    [2] => wow
    [3] => 123
    [4] => 
    [5] => 
    [6] => ok
    [7] => 
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:12:44.433

使用 explode 将空条目添加到前面和后面。

这个匹配 tc 的预期输出：

```
$str = '$foo$wow$123$$$ok$';
preg_match_all("@(?<=\\$)[^\$]*(?=\\$)@", $str, $res);

echo "<pre>";
print_r($res);
echo "</pre>";

[0] => Array
    (
        [0] => foo
        [1] => wow
        [2] => 123
        [3] => 
        [4] => 
        [5] => ok
    ) 
```

# java - JAVA 中 RESTful Web 服务的 NTLM 解决方案

> ID：14337176
> 
> 赞同：0
> 
> 时间：2013-01-15T11:56:07.217
> 
> 标签：java, web-services, rest, cxf, ntlm

我正在为 Restful Web 服务编写客户端。

```
public static void main(String[] args){
        // Use apache commons-httpclient to create the request/response
        HttpClient client = new HttpClient();
        Credentials defaultcreds = new UsernamePasswordCredentials("aaa", "cdefg");
        client.getState().setCredentials(AuthScope.ANY, defaultcreds);

        GetMethod method = new GetMethod(
                "http://localhost:8080/userService/usersByID/1234");
        try {
            client.executeMethod(method);
            InputStream in = method.getResponseBodyAsStream();
            // Use dom4j to parse the response and print nicely to the output stream
            BufferedReader reader = new BufferedReader(new InputStreamReader(in));
            StringBuilder out = new StringBuilder();
            String line;
            while ((line = reader.readLine()) != null) {
                out.append(line);
            }
            System.out.println(out.toString());
        } catch (IOException e) {
            e.printStackTrace();
        } 
    } 
```

我收到未经授权的错误 401。当我检查服务器日志时。我发现了以下内容。

```
ERROR httpclient.HttpMethodDirector - Credentials cannot be used for NTLM authentication: org.apache.commons.httpclient.UsernamePasswordCredentials 
```

所以，我知道我需要为此使用 NTLM 身份验证。

有人可以告诉我如何修改它以进行 NTLM 身份验证。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:34:41.587

请检查以下链接

[http://hc.apache.org/httpclient-3.x/authentication.html#NTLM](http://hc.apache.org/httpclient-3.x/authentication.html#NTLM) http://davenport.sourceforge.net/ntlm.html

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T19:08:16.287

而不是 setCredentials 尝试使用 setProxyCredentials。

```
client.getState().setProxyCredentials(AuthScope.ANY, defaultcreds); 
```

# api - 基于 REST 的 API 的安全性

> ID：14337177
> 
> 赞同：2
> 
> 时间：2013-01-15T11:56:08.703
> 
> 标签：api, rest, hash, token, salt

我一直在研究保护用于 android/iphone 应用程序或网站应用程序的 API 的技术。
我找到了一种我喜欢的技术，但不确定它是好还是坏（除了是一个非常长的过程）。

**处理（最初是用户端）：**
首先通过散列用户密码创建盐。
然后通过散列请求的 url（通过查询字符串在末尾附加用户名）和 salt 来创建签名。
最后，通过对用户名和签名进行哈希处理来创建令牌。
令牌在标头内传递给服务器（每次）。

**第一个请求：**
第一个请求必须针对验证端点，并包含 device_id 作为查询字符串。
在服务器上进行相同的处理（如上），如果令牌与用户发送的令牌匹配，则将 device_id 存储在数据库中并分配给该用户名以供将来参考（在请求的 url 中找到设备 ID）并用于随后验证用户名/设备。

**所有后续请求：**
对于每个请求，处理必须在用户端和服务器端进行，令牌每次都不同（随着请求的 url 更改）。
没有包含代码，因为它尚未编写。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T14:51:41.030

您的身份验证模型是共享秘密身份验证。在您的情况下，您的用户密码用作共享密钥。您需要确保您有一种安全的方式来提前获取用户和服务器的密码。为了签署请求，您创建一条包含所有请求标头和数据的消息。然后散列该请求。然后该哈希（令牌）将随请求一起传递。服务器将在服务器上执行相同的签名和散列过程，并确保令牌匹配。

在您的示例中，您的声音就像您想使用以下伪代码创建令牌：

```
Token = hmac-sha1( Hash(Pasword + Salt) + RequestUrl + UserName ) 
```

你的方法还不错，但我会将你的方法与亚马逊的 REST Auth 模型进行比较，并实现他们详细说明的更接近的版本。[http://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html](http://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html)

他们的实现：

```
"Authorization: AWS " + AWSAccessKeyId + ":"  + base64(hmac-sha1(VERB + "\n" 
                                 + CONTENT-MD5 + "\n" 
                                 + CONTENT-TYPE + "\n" 
                                 + DATE + "\n" 
                                 + CanonicalizedAmzHeaders + "\n" 
                                 + CanonicalizedResource)) 
```

他们有充分的理由包含您遗漏的一些字段，包括但不限于：

*   时间戳是为了防止重放攻击。
*   content-MD5 是为了防止人们篡改请求数据（与 POST 和 PUTS 相关）

# php - 为什么我在使用 $item->get_permalink() 时会在 SimplePie 中出现内存泄漏？

> ID：14337179
> 
> 赞同：4
> 
> 时间：2013-01-15T11:56:09.710
> 
> 标签：php, memory-leaks, simplepie

我正在使用[SimplePie](http://www.simplepie.org)和 PHP 5.3（启用 gc）来解析我的 RSS 提要。这在执行以下操作时效果很好并且没有问题：

```
$simplePie = new SimplePie();
$simplePie->set_feed_url($rssURL);
$simplePie->enable_cache(false);
$simplePie->set_max_checked_feeds(10);
$simplePie->set_item_limit(0);
$simplePie->init();
$simplePie->handle_content_type();

foreach ($simplePie->get_items() as $key => $item) {
    $item->get_date("Y-m-d H:i:s");
    $item->get_id();
    $item->get_title();
    $item->get_content();
    $item->get_description();
    $item->get_category();
} 
```

内存调试超过 100 次迭代（使用**不同的**RSS 提要）：

![不使用 get_permalink() 的 SimplePie](../Images/e4691bb637955a05134589c47e460aa8.png)

但是在使用 时`$item->get_permalink()`，我的内存调试看起来像这样超过 100 次迭代（使用**不同的**RSS 提要）。

**产生问题的代码**：

```
foreach ($simplePie->get_items() as $key => $item) {
    $item->get_date("Y-m-d H:i:s");
    $item->get_id();
    $item->get_title();
    $item->get_permalink(); //This creates a memory leak
    $item->get_content();
    $item->get_description();
    $item->get_category();
} 
```

![SimplePie get_permalink 内存泄漏](../Images/c3bcbc8518e785426e0d4b3fa2fa3852.png)

**我尝试过的事情**：

*   使用`get_link`代替`get_permalink`
*   使用[这里](http://simplepie.org/wiki/faq/i_m_getting_memory_leaks)`__destroy`提到的（即使它应该为 5.3 修复）

**当前调试过程**：

到目前为止，我似乎已经将问题追溯到`SimplePie_Item::get_permalink`-> `SimplePie_Item::get_link`-> `SimplePie_Item::get_links`-> `SimplePie_Item::sanitize`-> `SimplePie::sanitize`-> `SimplePie_Sanitize::sanitize`-> `SimplePie_Registry::call`-> `SimplePie_IRI::absolutize`。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T12:56:22.213

**这实际上不是内存泄漏，而是没有被清理的静态函数缓存！**

这是由于`SimplePie_IRI::set_iri`(and `set_authority`, and `set_path`)。他们设置了一个静态`$cache`变量，但在创建新实例时不会取消设置或清除它`SimplePie`，这意味着变量只会变得越来越大。

这可以通过更改来解决

```
public function set_authority($authority)
{
    static $cache;

    if (!$cache)
        $cache = array();

    /* etc */ 
```

到

```
public function set_authority($authority, $clear_cache = false)
{
    static $cache;
    if ($clear_cache) {
        $cache = null;
        return;
    }

    if (!$cache)
        $cache = array();

    /* etc */ 
```

..etc 在以下功能中：

*   `set_iri`,
*   `set_authority`,
*   `set_path`,

并且添加一个析构`SimplePie_IRI`函数以使用静态缓存调用所有函数，参数为`true`in $clear_cache，将起作用：

```
/**
 * Clean up
 */
public function __destruct() {
    $this->set_iri(null, true);
    $this->set_path(null, true);
    $this->set_authority(null, true);
} 
```

现在，随着时间的推移，内存消耗不会增加：

![SimplePie 已修复](../Images/597f1ec13c593e36a8970fd4d67a719d.png)

[**Git问题**](https://github.com/simplepie/simplepie/issues/260)

# php - cakephp 属于自定义条件问题

> ID：14337181
> 
> 赞同：1
> 
> 时间：2013-01-15T11:56:13.980
> 
> 标签：php, mysql, cakephp, cakephp-1.3

我正在使用 cakephp 1.3 和 mysql 数据库，引擎是 MISAM，我遇到了关系问题。我有两个表名`Organizatio`n 和`OrgClasses`，这两个表在两个表中都与之相关联`mbo_studio_id`。

**组织**
`Id(PK)`, `name`,`mbo_studio_id`

**org_classes**
`id(PK)` , `name,date`,`mbo_studio_id`

我正在尝试在 的条件下获取数据`mbo_studio_id`，但它通过 的主键添加了另一个条件`OrgClasses`。

```
var $belongsTo = array(

    'OrgClass' => array(
        'className' => 'OrgClass',
        'foreignKey' => 'mbo_studio_id',
        'conditions' => array('OrgClass.mbo_studio_id' => 'Organization.mbo_studio_id'),
        'order' => 'OrgClass.date DESC',
        'dependent' => false,
    )
); 
```

我收到以下查询

```
SELECT `Organization`.`id`, `Organization`.`name, `Organization`.`mbo_studio_id`, `OrgClass`.` id`,`OrgClass`.`mbo_studio_id`, `OrgClass`.`name`, `OrgClass`.`date`
FROM `organizations` AS `Organization` 
LEFT JOIN `org_classes` AS `OrgClass` ON (`Organization`.`mbo_studio_id` = `OrgClass`.`id` AND `OrgClass`.`mbo_studio_id` = Organization.mbo_studio_id) 
```

这里我不要**`Organization`。`mbo_studio_id`= `OrgClass`。`id`**查询中的条件。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T11:58:12.243

然后你需要将foreignKey设置为false：

```
 'foreignKey' => false, 
```

这样它只会使用您的自定义条件。

# bash - 带有 Windows 路径的转义变量

> ID：14337185
> 
> 赞同：0
> 
> 时间：2013-01-15T11:56:21.943
> 
> 标签：bash, shell

我有一个使用 telnet 从 debian 连接到 windows 服务器的小脚本。

服务器上有带有 ips 和路径的文本文件：

```
192.168.1.1 c:\rs_obj\data
192.168.1.2 c:\rs_obj\data
192.168.1.3 c:\new_obj\data 
```

每个服务器都有自己的数据路径。

这是主要脚本

```
 while IFS=" ": read -r ip path; do
    nohup ./tl.sh $ip $path >> tl_$ip.log &
  done < srv_list.txt 
```

这是 tl.sh

```
#!/bin/bash
echo $(date) : $1 $2
expect -f-<<EOF
  set timeout 20
  spawn telnet $1

  expect "login: "
  send "...\r"
  expect "password: "
  send "...\r"
  expect "*="
  send 'cd "$2"\r'
  expect "data>"
....
  send "exit\r"
EOF
exit 
```

问题在于 Windows 路径 - 如何在行中传递正确的字符串`send "cd $2\r"`（转义反斜杠和 \r \n 等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:30:19.130

不要认为真的有什么好方法可以做到这一点。我能想到的两个选择。您可以随意引用报价，直到正确为止。但这很混乱，并且会失去很多代码的可读性。

我的方法是手动转义字符串，例如

```
path=${2// /\\ } # substitutes all instances of ' ' with '\ ' in path
path=${path//\\/\\\\/} # substitutes all instances of '\' with '\\' in path 
```

可以在[此处](http://tldp.org/LDP/abs/html/string-manipulation.html)找到有关在变量中操作字符串的更多详细信息希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:35:32.160

找到了一些解决方案：

```
send "cd $(printf '%q' $2)\r" 
```

# playframework-2.0 - PlayFramework 应用架构

> ID：14337186
> 
> 赞同：-1
> 
> 时间：2013-01-15T11:56:23.183
> 
> 标签：playframework-2.0, angularjs

我正在计划使用 PlayFramework 和 AngularJS 开发一个应用程序。由于此应用程序将具有移动界面，因此我将创建两个不同的播放应用程序。

*   播放应用程序 1，用于 RETSTful API
*   播放应用程序 2，用于 Web 客户端

RESTful API 将包含所有业务逻辑，并将充当服务层，Web 客户端将访问 API。此外，在单独的 API 中拥有业务逻辑将允许我​​的应用程序服务暴露给第三方以使用这些服务并将应用程序服务集成到他们的应用程序中。

请给我您对此配置的专家意见。

有没有其他替代方案或更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:46:02.713

这是一种完全有效的方法——将事情隔离开来。您只需要处理 2 个应用程序的开销。将其转换为模块化应用程序（带有子模块；play 2.1 在这方面有一些更好的东西）也是一个好主意。

当然，您可以始终只使用一个应用程序并从那里提供所有内容，并且仍然保持逻辑分离（例如：不同的控制器/路由来处理不同的内容）。

# c - c语言中的链表插入排序

> ID：14337189
> 
> 赞同：1
> 
> 时间：2013-01-15T11:56:36.720
> 
> 标签：c, sorting, linked-list

程序应该对节点进行插入升序排序，首先它应该检查名称，如果名称相等，它应该对 id 进行排序，我不知道是什么问题没有正确排序。

```
# include <stdio.h>
# include <string.h>
# include <stdlib.h>

typedef struct nd{
int id;
char name[20];
float gpa;
struct nd *next;
}node;

typedef node *list;

//---------------------------------------------------------------

int insertlist(list *head,char *buffer)
{
list p,q,n;
int m,num,k,sc;
p=(list)malloc(sizeof(node));
num=sscanf(buffer,"%d %s %f",&(p->id),(p->name),(&p->gpa));
if(num!=3)
 {
  printf("info not complete\n");
  free(p);
  return 1;
 }
else
{

   if(!*head)
   {
    *head=p;
    p->next = NULL;
   }
//******** sorting tthe names and ids for equal names
   else if(sc=strcmp((*head)->name,p->name)> 0 || ((sc == 0) && ((*head)->id > p->id)))
      {//head is modified
        p->next=*head;
        *head=p;
      }

   else{
        n=*head;
        q=n->next;
        while(q && ((sc=strcmp(q->name,p->name)<0) || ((sc == 0) && (q->id < p->id))))
          {
           n=q;
           q=q->next;
          }
       n->next=p;
       p->next=q;
       }
}

return 0;
}

//------------------------------------------------------

int main()
{
int id,r;
list head,p;
FILE *fp;
char c,buffer[100],filename[10];
if ((fp=fopen("student.txt","r"))==NULL)
{
  printf("error opening %s",filename);
  exit(1);
}
else
 {
head=NULL;

while(fgets(buffer,100,fp)!=NULL)
   {
    buffer[strlen(buffer)-1]=='\0';
    r=insertlist(&head,buffer);
   }
fclose(fp);
 }

for(p=head;p!=NULL;p=p->next)
  printf("%d  %s  %f\n\n",p->id,p->name,p->gpa);
} 
```

内容示例`student.txt`：

```
121513 ala 45.00
121510 wang 21.00 
145852 frank 26.00 
151515 ala 25.00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:52:04.950

首先，解决这个问题：

```
buffer[strlen(buffer)-1]=='\0'; 
```

那是平等比较；不是任务。我相信您正试图在缓冲区末尾抛出换行符。如果是这种情况，您可能需要确保它*有*一个换行符开始抛出（例如，输入文件的最后一行可能不会以一个结尾。无论如何，这仍然是损坏的，需要修复.

接下来，您的排序循环有问题。我在下面包括一个希望更容易阅读和理解的内容，删除了逻辑缺陷（以及相当多的其他课外活动）：

```
int insertlist(list *head, char *buffer)
{
    list p=NULL, q=NULL;
    int sc=0;

    /* allocate new node */
    p = calloc(1, sizeof(*p));
    if(3 != sscanf(buffer,"%d %s %f",&(p->id),(p->name),(&p->gpa)))
    {
        printf("info not complete\n");
        free(p);
        return 1;
    }

    /* initially wire p->next to our list head. then, walk list, 
       advancing p->next. break on first "less" condition */
    p->next = *head;
    while (p->next)
    {
        /* broken out here for clarity; break on first "less" */
        sc = strcmp(p->name, p->next->name);
        if (sc < 0 || (sc == 0 && p->id < p->next->id))
            break;
        q = p->next;
        p->next = q->next;
    }

    /* non-null means we wire q->next to p */
    if (q) 
        q->next = p;

    /* else p is the new head; what head was prior is already in p->next */
    else
        *head = p;

    return 0;
} 
```

使用以下输入文件进行测试：

```
0001 Brook 3.50
0002 James 3.51
0003 Katie 3.52
0004 James 3.87
0005 Brook 2.70 
```

结果：

```
1  Brook  3.500000

5  Brook  2.700000

2  James  3.510000

4  James  3.870000

3  Katie  3.520000 
```

我*强烈建议您在尝试修复这些问题**以及*想要查看代码如何工作时，在调试器中单步执行代码。

最后，不要雪上加霜，你永远不会释放你的名单。即它在程序退出时泄漏内存，这仅次于在“坏”级别执行*期间泄漏内存。*走那张清单，释放那段记忆。养成一个好习惯。

* * *

**EDIT** OP 请求释放链表：

`main()`现在，在声明的末尾`return`就足够了。有时您应该考虑编写一个函数来为您执行此操作：

```
while (head)
{
    list p=head;
    head=head->next;
    free(p);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:22:51.927

您的排序问题是[运算符优先级之一](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B)

`<`并且`>`具有比 更高的优先级`=`，这意味着它将首先被评估，然后进行分配。

所以你的字符串在这两个地方进行比较：

```
else if(sc=strcmp((*head)->name,p->name)> 0 || ((sc == 0) && ((*head)->id > p->id)))
...
while(q && ((sc=strcmp(q->name,p->name)<0) || ((sc == 0) && (q->id < p->id)))) 
```

错了。`sc`分别获得`strcmp((*head)->name,p->name)> 0`and的值`strcmp(q->name,p->name)<0`（请注意，这将始终是`1`or `0`，从不`-1`）

如果您只是这样调整代码：

```
else if((sc=strcmp((*head)->name,p->name))> 0 || ((sc == 0) && ((*head)->id > p->id)))
...
while(q && (((sc=strcmp(q->name,p->name))<0) || ((sc == 0) && (q->id < p->id)))) 
```

你会看到它工作。故事的寓意：不要吝啬你的括号或括号，添加更多内容不会花费你任何东西，它使代码更清晰，并且它可以让你省去调试这样的麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T12:02:24.880

head 是一个指针，因此要在函数中更改它，您需要将指针传递给它。指向指针的指针。

像这样声明：

```
int insertlist(list **head,char *buffer) 
```

像这样称呼它：

```
r=insertlist(&(&head),buffer); 
```

然后在函数中更改您引用它的任何地方以取消引用指针。

# c++ - 如果不存在则创建一个新文件

> ID：14337193
> 
> 赞同：-2
> 
> 时间：2013-01-15T11:57:00.650
> 
> 标签：c++, file, createfile

这是我的`main.cpp`：

```
int main () {
    FILE* file_name;
    file_name= fopen("email1.clear","wb");
return 0;
} 
```

我使用 ssh (Linux) 运行它：

```
g++ main.cpp -o main 
```

但没有创建文件。（我必须使用：FILE*）。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:02:43.957

**>`How Do I Compile/Run My Program?`**

要编译 C/CPP 程序 first.cpp，并创建一个名为 first 的可执行文件，请输入：

```
$ gcc first.cpp -o first 
```

**或者**

```
$ cc first.cpp -o first 
```

要首先执行程序，请输入：

```
$ ./first 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T04:34:04.890

好吧，我建议您使用`"a+"`而不是`wb`首先使用，因为`"a+"`如果文件不存在，则让我们创建一个文件，如果存在，则让您在文件中添加内容。其次，我不知道你是否要使用二进制，因为`b`in`wb`是二进制的，如果你不需要它就不要放它。所以你的代码应该是这样的：

```
int main () {
    FILE* file_name;
    file_name= fopen("email1.clear","a+");//or just use "w" bot work
return 0;
} 
```

该文件也可能放置在保存 .cpp 的位置，它们通常保存在一起。

# c# - 使用 Lambda 查询集合/连接表

> ID：14337197
> 
> 赞同：0
> 
> 时间：2013-01-15T11:57:16.943
> 
> 标签：c#, lambda

我有一个 lambda 'where' 查询，像这样查询 Order 表：

```
List<Order> returnedOrders = _session.Query<Script>()Where(s => s.orderId == orderIdParam).ToList(); 
```

我还想检查相关`OrderDetails`表中列的值。所以`returnedOrders`有一个集合`OrderDetails`，即`returnedOrders.orderDetails`

所以 SQL 查询看起来像：

```
Where OrderId = 12345 and Order.OrderDetail.CreatedDate = '01-Jan-2013' 
```

任何人都可以帮我正确的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:01:23.610

您可以在方法中使用逻辑 AND ( `&&`) `Where`：

```
var date = new Date(2013,1,1);

List<Order> returnedOrders = 
    _session.Query<Script>()
            .Where(s => 
                s.orderId == orderIdParam && 
                s.OrderDetails.Any(d => d.CreatedDate == date))
            .ToList(); 
```

您也可以附加另一种`Where`方法。

```
var date = new Date(2013,1,1);

List<Order> returnedOrders = 
    _session.Query<Script>()
            .Where(s => s.orderId == orderIdParam)
            .Where(s => s.OrderDetails.Any(d => d.CreatedDate == date))
            .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:02:51.027

既然您知道订单 ID，它似乎没用，但是像这样

```
from order in orders 
from detail in order.Details 
where 
    order.Id = orderId && 
    order.Id == detail.OrderId && 
    detail.CreateDate == createDate
select order 
```

# ruby-on-rails - Rails 重命名模型中的 ID 列

> ID：14337199
> 
> 赞同：2
> 
> 时间：2013-01-15T11:57:24.727
> 
> 标签：ruby-on-rails, model

我目前正在考虑将现有系统（用意大利面条 PHP 编写）迁移到 rails。问题是，它必须使用实时数据库。这些不同表上的许多 ID 列都没有命名`id`。例如，customers 表有一个名为 的 ID 列`Customer_ID`。看了之后，我才意识到 rails 确实似乎是通过主键而不是名为`id`.

我以后会在命名这些 ID 列时遇到很多问题，特别是在关系之类的东西上吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-08T02:46:54.640

在 v2.3.8 之后，`set_primary_key :col_name`已弃用。

`self.primary_key = 'col_name'`被推荐。

[http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/PrimaryKey/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/PrimaryKey/ClassMethods.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T12:01:39.453

使用更改模型中的主键属性

`set_primary_key :col_name`

# php - Yii：禁用对控制器/动作的直接访问，仅在路由到时有效

> ID：14337201
> 
> 赞同：2
> 
> 时间：2013-01-15T11:57:25.857
> 
> 标签：php, yii, url-routing

我想禁用对[Yii Framework](http://www.yiiframework.com/)中的 Controller/Action 的直接访问，例如**login/get**，并且只有通过[CUrlManager](http://www.yiiframework.com/doc/api/1.1/CUrlManager)路由才能访问。

在我的配置中，我根据 HTTP 方法将登录请求路由到**login** **/get**和**login/post ：**

```
'urlManager' => array(
    'urlFormat' => 'path',
    'showScriptName' => false,
    'caseSensitive' => false,
    'rules' => array(
        // Rewrite GET requests of "login" to "login/get", and POST requests to "login/post".
        array('login/post', 'pattern' => 'login', 'caseSensitive' => false, 'verb' => 'POST'),
        array('login/get',  'pattern' => 'login', 'caseSensitive' => false, 'verb' => 'GET'),
    ),
), 
```

是否有任何配置设置禁止**登录/获取**和**登录/发布**请求，或者最好的方法是将这些请求路由到诸如**error/404**之类的地方？例如：

```
array('error/404',  'pattern' => 'login/(get|post)(/.*)?') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:54:36.107

那么你自己的解决方案工作得很好，UrlManager 从上到下请求规则，所以它会先尝试 GET/POST

所以完整的答案是

```
'rules' => array(
    // Rewrite GET requests of "login" to "login/get", and POST requests to "login/post".
    array('login/post', 'pattern' => 'login', 'caseSensitive' => false, 'verb' => 'POST'),
    array('login/get',  'pattern' => 'login', 'caseSensitive' => false, 'verb' => 'GET'),
    'login/post'=>'error/404',
    'login/get'=>'error/404',
), 
```

你可能只使用你给正则表达式的规则

```
array('error/404',  'pattern' => 'login/(get|post)(/.*)?' 
```

# c# - 如何使用 C# HttpWebRequest 成功发布到 Google Checkout 的实时服务器？

> ID：14337206
> 
> 赞同：2
> 
> 时间：2013-01-15T11:57:39.550
> 
> 标签：c#, webrequest, google-checkout, android-pay

首先，我的问题类似于“ASP.NET MVC3 和 Google Checkout 入门：Take 2”，但我觉得这个问题没有得到完全回答，而且我的问题与 MVC3 无关。

好的，我已经成功地使用他们的沙盒服务器将 Google Checkout / Wallet 集成到 ASP.NET 应用程序中。现在我们已经准备好上线了，我所做的只是更改了一些参数 - 操作 url、商家 ID 和商家密钥 - 它不再有效。

我已经设置了一个简单的网络项目来尝试找到问题的根源，但我有点不知所措 - 一切似乎都在正常工作。我收到 400 错误请求错误 - 这是我使用 fiddler 捕获的正在发送的内容：

```
POST https://checkout.google.com/api/checkout/v2/checkoutForm/Merchant/XXXXXXXXXXXXXXX         HTTP/1.1
Authorization: Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
Content-Type: application/xml;charset=UTF-8
Host: checkout.google.com
Content-Length: 679
Expect: 100-continue
Connection: Keep-Alive

<?xml version="1.0" encoding="UTF-8"?>
<checkout-shopping-cart xmlns="http://checkout.google.com/schema/2">
    <shopping-cart>
        <merchant-private-data>2390</merchant-private-data>
        <items>
            <item>
                <item-name>Business Cards 107 - White 350gsm Silk</item-name>
                <unit-price currency="GBP">20.40</unit-price>
                <quantity>1</quantity>
                <item-description>25 x1 One sided - Standard Business Cards</item-description>
                <merchant-item-id>2956</merchant-item-id>
            </item>
        </items>
    </shopping-cart>
    <checkout-flow-support>
        <merchant-checkout-flow-support />
    </checkout-flow-support>
</checkout-shopping-cart> 
```

这是 C# 代码 - 它与我在顶部提到的问题中的代码几乎相同：

```
#define LIVE

      string url = string.Format(SandboxMerchantCheckoutUrl, SandboxMerchantId);

#if LIVE
      url = string.Format(ProductionMerchantCheckoutUrl, ProductionMerchantId);
#endif

      string path = HttpContext.Current.Server.MapPath("~/SampleXML/") + "order.xml";
      string xml = File.ReadAllText(path);
      byte[] bytes = Encoding.UTF8.GetBytes(xml);
      string xmlstr = string.Empty;

      HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;

      string authInfo = SandboxMerchantId + ":" + SandboxMerchantKey;

#if LIVE
      authInfo = ProductionMerchantId + ":" + ProductionMerchantKey;
#endif

      authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));

      request.Headers["Authorization"] = "Basic " + authInfo;
      request.Method = "POST";
      request.ContentLength = bytes.Length;
      request.ContentType = "text/xml";
      request.ContentType = "application/xml;charset=UTF-8";

      using (Stream requestStream = request.GetRequestStream())
      {
        requestStream.Write(bytes, 0, bytes.Length);
      }

      using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
      {

        if (response.StatusCode == HttpStatusCode.OK)
        {

          StreamReader reader = new StreamReader(response.GetResponseStream());

          xmlstr = reader.ReadToEnd();

        }
        else
        {

          string message = string.Format("POST failed. Received HTTP {0}", response.StatusCode);

          throw new ApplicationException(message);

        }

      }

      XmlDocument xmldoc = new XmlDocument();
      XmlNamespaceManager nsmgr = new XmlNamespaceManager(xmldoc.NameTable);

      nsmgr.AddNamespace("g", "http://checkout.google.com/schema/2");
      xmldoc.LoadXml(xmlstr);

      string serialNumber = xmldoc.SelectSingleNode("/g:checkout-redirect", nsmgr).Attributes["serial-number"].Value;

      string redirectUrl = xmldoc.SelectSingleNode("/g:checkout-redirect/g:redirect-url", nsmgr).InnerText; 
```

好的，这里更新。我不认为上面有什么问题。登录谷歌卖家账号，查看集成控制台，发现成功收到如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<checkout-shopping-cart xmlns="http://checkout.google.com/schema/2">
  <shopping-cart>
    <merchant-private-data>2390</merchant-private-data>
    <items>
      <item>
        <item-name>Business Cards 107 - White 350gsm Silk</item-name>
        <unit-price currency="GBP">20.40</unit-price>
        <quantity>1</quantity>
        <item-description>25 x1 One sided - Standard Business Cards</item-description>
        <merchant-item-id>2956</merchant-item-id>
      </item>
    </items>
  </shopping-cart>
  <checkout-flow-support>
    <merchant-checkout-flow-support />
  </checkout-flow-support>
</checkout-shopping-cart> 
```

但是，Google 发送了一条错误消息，内容为“购物车必须包含至少一项”。有一个指向谷歌文档的链接说如果购物车中没有任何商品或数量设置为零，则会发生此错误。这些都不适用于这里，所以我仍然不知道为什么这个请求被拒绝。

# function - 构造函数

> ID：14337208
> 
> 赞同：2
> 
> 时间：2013-01-15T11:57:40.827
> 
> 标签：function, matlab, user-defined-functions, anonymous-function

从这段代码开始：

```
 clc, clear all, close all
tic

k1 = 0.01:0.1:100;
k2 = 0.01:0.1:100;
k3 = 0.01:0.1:100;

k = sqrt(k1.^2 + k2.^2 + k3.^2);

c = 1.476;
gamma = 3.9;

colors = {'cyan'};
Ek = (1.453*k.^4)./((1 + k.^2).^(17/6));
E = @(k) (1.453*k.^4)./((1 + k.^2).^(17/6));
E_int = zeros(1,numel(k1));
E_int(1) = 1.5;

for i = 2:numel(k)
    E_int(i) = E_int(i-1) - integral(E,k(i-1),k(i));
end

beta = c*gamma./(k.*sqrt(E_int));

F_11 = zeros(1,numel(k1));
F_22 = zeros(1,numel(k1));
F_33 = zeros(1,numel(k1));

count = 0;
for i = 1:numel(k1)
    count = count + 1;
    phi_11 = @(k2,k3) phi_11_new(k1,k2,k3,beta,i);
    phi_22 = @(k2,k3) phi_22_new(k1,k2,k3,beta,i);
    phi_33 = @(k2,k3) phi_33_new(k1,k2,k3,beta,i);
    F_11(count) = integral2(phi_11,-100,100,-100,100);
    F_22(count) = integral2(phi_22,-100,100,-100,100);
    F_33(count) = integral2(phi_33,-100,100,-100,100);
end

figure
hold on
plot(k1,F_11,'b')
plot(k1,F_22,'cyan')
plot(k1,F_33,'magenta')
hold off 
```

在哪里

```
function phi_11 = phi_11_new(k1,k2,k3,beta,i)
k = sqrt(k1(i).^2 + k2.^2 + k3.^2);
k30 = k3 + beta(i).*k1(i);
k0 = sqrt(k1(i).^2 + k2.^2 + k30.^2);
E_k0 = 1.453.*k0.^4./((1 + k0.^2).^(17/6));
C1 = (beta(i).*k1(i).^2).*(k1(i).^2 + k2.^2 - k3.*k30)./(k.^2.*(k1(i).^2 + k2.^2));
C2 = k2.*k0.^2./((k1(i).^2 + k2.^2).^(3/2)).*atan2((beta(i).*k1(i).*sqrt(k1(i).^2 + k2.^2)),(k0.^2 - k30.*k1(i).*beta(i)));
xhsi1 = C1 - k2./k1(i).*C2;
xhsi1_q = xhsi1.^2;
phi_11 = E_k0./(4.*pi.*k0.^4).*(k0.^2 - k1(i).^2 - 2.*k1(i).*k30.*xhsi1 + (k1(i).^2 + k2.^2).*xhsi1_q);
end

function phi_22 = phi_22_new(k1,k2,k3,beta,i)
k = sqrt(k1(i).^2 + k2.^2 + k3.^2);
k30 = k3 + beta(i).*k1(i);
k0 = sqrt(k1(i).^2 + k2.^2 + k30.^2);
E_k0 = 1.453.*k0.^4./((1 + k0.^2).^(17/6));
C1 = (beta(i).*k1(i).^2).*(k1(i).^2 + k2.^2 - k3.*k30)./(k.^2.*(k1(i).^2 + k2.^2));
C2 = k2.*k0.^2./((k1(i).^2 + k2.^2).^(3/2)).*atan2((beta(i).*k1(i).*sqrt(k1(i).^2 + k2.^2)),(k0.^2 - k30.*k1(i).*beta(i)));
xhsi2 = k2./k1(i).*C1 + C2;
xhsi2_q = xhsi2.^2;
phi_22 = E_k0./(4.*pi.*k0.^4).*(k0.^2 - k2.^2 - 2.*k2.*k30.*xhsi2 + (k1(i).^2 + k2.^2).*xhsi2_q);
end

function phi_33 = phi_33_new(k1,k2,k3,beta,i)
k = sqrt(k1(i).^2+k2.^2+k3.^2);
k30 = k3 + beta(i).*k1(i);
k0 = sqrt(k1(i).^2+k2.^2+k30.^2);
E_k0 = (1.453.*k0.^4./((1+k0.^2).^(17/6)));
phi_33 = (E_k0./(4*pi.*(k.^4))).*(k1(i).^2+k2.^2);
end 
```

这个程序导致我的结果与来自研究的其他一些结果不匹配。我应该匹配的结果发布在下面：

![在此处输入图像描述](../Images/7876b7a704f3acd0a72d277fa63bab5f.png)

而我的看起来像这些

![在此处输入图像描述](../Images/33bbd519eef816edc03a940e47f30ebe.png)

很容易估计只有comp w 与理论结果相匹配；因此，我认为该缺陷可能存在于函数 phi_11_new（和 phi_22_new）之外的 beta 定义中。

你们中的任何人都可以建议如何在 phi_11_new（和 phi_22_new）中计算 beta，而不是我目前的方式吗？

我提前感谢大家的支持。

最好的问候， fpe

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:43:20.070

我改进了插值，使其不再因小值而崩溃。它还返回更正确的值，因为它现在内插值的对数。

这是代码，就像现在一样。

```
function test15()

[k1,k2,k3] = deal(0.01:0.1:400);

k = sqrt(k1.^2 + k2.^2 + k3.^2);

c = 1.476;
gamma = 3.9;

Ek = (1.453*k.^4)./((1 + k.^2).^(17/6));
E_int = 1.5-cumtrapz(k,Ek);
beta = c*gamma./(k.*sqrt(E_int));

[F_11,F_22,F_33] = deal(zeros(1,numel(k1)));

k_vec = k;
beta_vec = beta;

kLim = 100;

for ii = 1:numel(k1)
    phi_11 = @(k2,k3) phi_11_new(k1(ii),k2,k3,k_vec,beta_vec);
    phi_22 = @(k2,k3) phi_22_new(k1(ii),k2,k3,k_vec,beta_vec);
    phi_33 = @(k2,k3) phi_33_new(k1(ii),k2,k3,k_vec,beta_vec);
    F_11(ii) = quad2d(phi_11,-kLim,kLim,-kLim,kLim);
    F_22(ii) = quad2d(phi_22,-kLim,kLim,-kLim,kLim);
    F_33(ii) = quad2d(phi_33,-kLim,kLim,-kLim,kLim);
end

figure
loglog(k1,F_11,'b')
hold on
loglog(k1,F_22,'cyan')
loglog(k1,F_33,'magenta')
hold off
grid on

end

function phi_11 = phi_11_new(k1,k2,k3,k_vec,beta_vec)
k = sqrt(k1^2 + k2.^2 + k3.^2);

log_beta_vec = interp1(log(k_vec),log(beta_vec),log(k(:)),'linear','extrap');
log_beta = reshape(log_beta_vec,size(k));
beta = exp(log_beta);

k30 = k3 + beta*k1;
k0 = sqrt(k1^2 + k2.^2 + k30.^2);
E_k0 = 1.453*k0.^4./((1 + k0.^2).^(17/6));
C1 = (beta*k1^2).*(k1^2 + k2.^2 - k3.*k30)./(k.^2.*(k1^2 + k2.^2));
C2 = k2.*k0.^2./((k1^2 + k2.^2).^(3/2)).*atan2((beta*k1.*sqrt(k1^2 + k2.^2)),(k0.^2 - k30*k1.*beta));
xhsi1 = C1 - (k2/k1).*C2;
xhsi1_q = xhsi1.^2;
phi_11 = E_k0./(4.*pi.*k0.^4).*(k0.^2 - k1^2 - 2*k1*k30.*xhsi1 + (k1^2 + k2.^2).*xhsi1_q);
end

function phi_22 = phi_22_new(k1,k2,k3,k_vec,beta_vec)
k = sqrt(k1^2 + k2.^2 + k3.^2);

log_beta_vec = interp1(log(k_vec),log(beta_vec),log(k(:)),'linear','extrap');
log_beta = reshape(log_beta_vec,size(k));
beta = exp(log_beta);

k30 = k3 + beta*k1;
k0 = sqrt(k1^2 + k2.^2 + k30.^2);
E_k0 = 1.453*k0.^4./((1 + k0.^2).^(17/6));
C1 = (beta*k1^2).*(k1^2 + k2.^2 - k3.*k30)./(k.^2.*(k1^2 + k2.^2));
C2 = k2.*k0.^2./((k1^2 + k2.^2).^(3/2)).*atan2((beta*k1.*sqrt(k1^2 + k2.^2)),(k0.^2 - k30.*k1.*beta));
xhsi2 = (k2/k1).*C1 + C2;
xhsi2_q = xhsi2.^2;
phi_22 = E_k0./(4.*pi.*k0.^4).*(k0.^2 - k2.^2 - 2.*k2.*k30.*xhsi2 + (k1^2 + k2.^2).*xhsi2_q);
end

function phi_33 = phi_33_new(k1,k2,k3,k_vec,beta_vec)
k = sqrt(k1^2+k2.^2+k3.^2);

log_beta_vec = interp1(log(k_vec),log(beta_vec),log(k(:)),'linear','extrap');
log_beta = reshape(log_beta_vec,size(k));
beta = exp(log_beta);

k30 = k3 + beta*k1;
k0 = sqrt(k1^2+k2.^2+k30.^2);
E_k0 = (1.453*k0.^4./((1+k0.^2).^(17/6)));
phi_33 = (E_k0./(4*pi*(k.^4))).*(k1^2+k2.^2);
end 
```

该图似乎与原始结果非常吻合。即使还是有一些不同。

旁注：由于在模拟中将 k 值 100 设置为上限，因此图中大于此值的值是不正确的。它们的计算不使用完整 (k2,k3)-“圆”中的所有值。我们还可以看到这些值的偏差。

![F11、F_22 和 F_33 的新对数图。](../Images/5c5061282fb41176d0efacbbaeb2c0f5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:01:48.873

好的，这就是我目前得到的。我想听听您对此的看法——它还不完美。我无法访问这些函数`integral`，或者`integral2`如果您可以重新插入它们（而不是我`quad2d`的例子）并测试代码，您可能会得到比我现在更好的结果。

我的第一个想法是`beta`在一个 for 循环中计算 -functions`[k1,k2,k3]`中的每个三元组`phi`。结果证明这非常慢，所以我改用了一个`k`-values 向量，并像以前一样计算了相应的向量`beta`。然后将这两个向量传递到`phi`插值函数 ( `interp1`) 中使用这些值的位置，以找到`beta`特定值的值`k`。

```
function myFunction()

[k1,k2,k3] = deal(0.01:0.1:400);

k = sqrt(k1.^2 + k2.^2 + k3.^2);

c = 1.476;
gamma = 3.9;

Ek = (1.453*k.^4)./((1 + k.^2).^(17/6));
E_int = 1.5-cumtrapz(k,Ek);
beta = c*gamma./(k.*sqrt(E_int));

[F_11,F_22,F_33] = deal(zeros(1,numel(k1)));

k_vec = k;
beta_vec = beta;

for ii = 1:numel(k1)
    phi_11 = @(k2,k3) phi_11_new(k1(ii),k2,k3,k_vec,beta_vec);
    phi_22 = @(k2,k3) phi_22_new(k1(ii),k2,k3,k_vec,beta_vec);
    phi_33 = @(k2,k3) phi_33_new(k1(ii),k2,k3,k_vec,beta_vec);
    F_11(ii) = quad2d(phi_11,-100,100,-100,100);
    F_22(ii) = quad2d(phi_22,-100,100,-100,100);
    F_33(ii) = quad2d(phi_33,-100,100,-100,100);
end

figure
loglog(k1,F_11,'b')
hold on
loglog(k1,F_22,'cyan')
loglog(k1,F_33,'magenta')
hold off
grid on

end

function phi_11 = phi_11_new(k1,k2,k3,k_vec,beta_vec)
k = sqrt(k1^2 + k2.^2 + k3.^2);

beta = reshape(interp1(k_vec,beta_vec,k(:)),size(k));

k30 = k3 + beta*k1;
k0 = sqrt(k1^2 + k2.^2 + k30.^2);
E_k0 = 1.453*k0.^4./((1 + k0.^2).^(17/6));
C1 = (beta*k1^2).*(k1^2 + k2.^2 - k3.*k30)./(k.^2.*(k1^2 + k2.^2));
C2 = k2.*k0.^2./((k1^2 + k2.^2).^(3/2)).*atan2((beta*k1.*sqrt(k1^2 + k2.^2)),(k0.^2 - k30*k1.*beta));
xhsi1 = C1 - (k2/k1).*C2;
xhsi1_q = xhsi1.^2;
phi_11 = E_k0./(4.*pi.*k0.^4).*(k0.^2 - k1^2 - 2*k1*k30.*xhsi1 + (k1^2 + k2.^2).*xhsi1_q);
end

function phi_22 = phi_22_new(k1,k2,k3,k_vec,beta_vec)
k = sqrt(k1^2 + k2.^2 + k3.^2);

beta = reshape(interp1(k_vec,beta_vec,k(:)),size(k));

k30 = k3 + beta*k1;
k0 = sqrt(k1^2 + k2.^2 + k30.^2);
E_k0 = 1.453*k0.^4./((1 + k0.^2).^(17/6));
C1 = (beta*k1^2).*(k1^2 + k2.^2 - k3.*k30)./(k.^2.*(k1^2 + k2.^2));
C2 = k2.*k0.^2./((k1^2 + k2.^2).^(3/2)).*atan2((beta*k1.*sqrt(k1^2 + k2.^2)),(k0.^2 - k30.*k1.*beta));
xhsi2 = (k2/k1).*C1 + C2;
xhsi2_q = xhsi2.^2;
phi_22 = E_k0./(4.*pi.*k0.^4).*(k0.^2 - k2.^2 - 2.*k2.*k30.*xhsi2 + (k1^2 + k2.^2).*xhsi2_q);
end

function phi_33 = phi_33_new(k1,k2,k3,k_vec,beta_vec)
k = sqrt(k1^2+k2.^2+k3.^2);

beta = reshape(interp1(k_vec,beta_vec,k(:)),size(k));

k30 = k3 + beta*k1;
k0 = sqrt(k1^2+k2.^2+k30.^2);
E_k0 = (1.453*k0.^4./((1+k0.^2).^(17/6)));
phi_33 = (E_k0./(4*pi*(k.^4))).*(k1^2+k2.^2);
end 
```

这将产生下图。请注意，对于 的最小值，积分不会成功`k1`。

![对数图中的 F_11、F_22 和 F_33。](../Images/008da011ca9b6ee5b231fb1f89c592a5.png)

**编辑 - 关于在 phi 函数中计算 beta 的评论**

由于您基本上尝试了与我最初所做的相同的事情，因此我添加了一个示例，说明如何在-functions 中计算`beta`矩阵。`phi`请注意，这段代码太慢了，我从来没有真正运行过它。

```
function phi_11 = phi_11_new(k1,k2,k3)
k = sqrt(k1^2 + k2.^2 + k3.^2);

c = 1.476;
gamma = 3.9;
beta = zeros(size(k));
E = @(x) (1.453*x.^4)./((1 + x.^2).^(17/6));
for ii = 1:size(k,1)
    for jj = 1:size(k,2)
        E_int = 1.5-quad(E,0.001,k(ii,jj));
        beta(ii,jj) = c*gamma/(k(ii,jj)*sqrt(E_int));
    end
end

k30 = k3 + beta*k1;
k0 = sqrt(k1^2 + k2.^2 + k30.^2);
E_k0 = 1.453*k0.^4./((1 + k0.^2).^(17/6));
C1 = (beta*k1^2).*(k1^2 + k2.^2 - k3.*k30)./(k.^2.*(k1^2 + k2.^2));
C2 = k2.*k0.^2./((k1^2 + k2.^2).^(3/2)).*atan2((beta*k1.*sqrt(k1^2 + k2.^2)),(k0.^2 - k30*k1.*beta));
xhsi1 = C1 - (k2/k1).*C2;
xhsi1_q = xhsi1.^2;
phi_11 = E_k0./(4.*pi.*k0.^4).*(k0.^2 - k1^2 - 2*k1*k30.*xhsi1 + (k1^2 + k2.^2).*xhsi1_q);
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:19:04.317

目前我正在运行上述代码的不同版本。

它如下

```
clc, clear all, close all
tic

k1 = (0.01:0.1:100);

c = 1.476;
gamma = 3.9;

F_11 = zeros(1,numel(k1));
F_22 = zeros(1,numel(k1));
F_33 = zeros(1,numel(k1));

count = 0;
for i = 1:numel(k1)
    count = count + 1;
    phi_11 = @(k2,k3) phi_11_new(k1,k2,k3,gamma,i);
    phi_22 = @(k2,k3) phi_22_new(k1,k2,k3,gamma,i);
    phi_33 = @(k2,k3) phi_33_new(k1,k2,k3,gamma,i);
    F_11(count) = integral2(phi_11,-100,100,-100,100);
    F_22(count) = integral2(phi_22,-100,100,-100,100);
    F_33(count) = integral2(phi_33,-100,100,-100,100);
end 
```

这次 phi_11、phi_22 和 phi_33 分别为

```
function phi_11 = phi_11_new(k1,k2,k3,gamma,i)
k = sqrt(k1(i).^2 + k2.^2 + k3.^2);
beta = gamma./((k.^(2/3)).*sqrt(hypergeom([1/3,17/6],4/3,-k.^(-2))));  
k30 = k3 + beta.*k1(i);
k0 = sqrt(k1(i).^2 + k2.^2 + k30.^2);
E_k0 = 1.453.*k0.^4./((1 + k0.^2).^(17/6));
C1 = (beta(i).*k1(i).^2).*(k0.^2 - 2.*k30.^2 + beta.*k30.*k1(i))./(k.^2.*(k1(i).^2 + k2.^2));
C2 = k2.*k0.^2./((k1(i).^2 + k2.^2).^(3/2)).*atan2((beta.*k1(i).*sqrt(k1(i).^2 + k2.^2)),(k0.^2 - k30.*k1(i).*beta));
xhsi1 = C1 - k2./k1(i).*C2;
xhsi1_q = xhsi1.^2;
phi_11 = E_k0./(4.*pi.*k0.^4).*(k0.^2 - k1(i).^2 - 2.*k1(i).*k30.*xhsi1 + (k1(i).^2 + k2.^2).*xhsi1_q);
end

function phi_22 = phi_22_new(k1,k2,k3,gamma,i)
k = sqrt(k1(i).^2 + k2.^2 + k3.^2);
beta = gamma./((k.^(2/3)).*sqrt(hypergeom([1/3,17/6],4/3,-k.^(-2)))); 
k30 = k3 + beta.*k1(i);
k0 = sqrt(k1(i).^2 + k2.^2 + k30.^2);
E_k0 = 1.453.*k0.^4./((1 + k0.^2).^(17/6));
C1 = (beta.*k1(i).^2).*(k0.^2 - 2.*k30.^2 + beta.*k1(i).*k30)./(k.^2.*(k1(i).^2 + k2.^2));
C2 = k2.*k0.^2./((k1(i).^2 + k2.^2).^(3/2)).*atan2((beta.*k1(i).*sqrt(k1(i).^2 + k2.^2)),(k0.^2 - k30.*k1(i).*beta));
xhsi2 = (k2./k1(i)).*C1 + C2;
xhsi2_q = xhsi2.^2;
phi_22 = E_k0./(4.*pi.*k0.^4).*(k0.^2 - k2.^2 - 2.*k2.*k30.*xhsi2 + (k1(i).^2 + k2.^2).*xhsi2_q);
end

function phi_33 = phi_33_new(k1,k2,k3,gamma,i)
k = sqrt(k1(i).^2+k2.^2+k3.^2);
beta = gamma./((k.^(2/3)).*sqrt(hypergeom([1/3,17/6],4/3,-k.^(-2)))); 
k30 = k3 + beta.*k1(i);
k0 = sqrt(k1(i).^2+k2.^2+k30.^2);
E_k0 = (1.453.*k0.^4./((1+k0.^2).^(17/6)));
phi_33 = (E_k0./(4*pi.*(k.^4))).*(k1(i).^2+k2.^2);
end 
```

请注意，现在 beta 是在 phi 函数中计算的。此外，我正在使用 beta 的等效表达式。欲了解更多详情，请查看下面的图片

![在此处输入图像描述](../Images/2bf25c4f8666a1b20995d6a303235d4f.png)

因此，在更新的模型中，我调用了 hypergeom，它的性能相当慢。这就是为什么我想通过能谱积分来计算第一个代码中的 beta 的主要原因。

顺便说一句，目前我不知道如何成功地执行此操作。

最好的问候， fpe

# c# - 如何使用 sqlite inmemory 在 linq2sql 中测试 puprose

> ID：14337213
> 
> 赞同：1
> 
> 时间：2013-01-15T11:58:03.003
> 
> 标签：c#, sqlite, unit-testing, linq-to-sql

我目前正在开发一个遗留项目，该项目具有 DB first ORM of linq to sql 。我如何使用相同的 DBML 文件并将其更改为使用 sqlite 连接而不是生产中使用的 SQL-Server 连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:38:55.237

您需要找到一个 Sql Lite Linq-to-Sql 提供程序。这个答案指向一个：[https](https://stackoverflow.com/a/459256/736079) ://stackoverflow.com/a/459256/736079 。如果您想要一个开箱即用的简单数据库以进行单元测试，那么您也可以使用 SQL Server Compact Edition。

# c# - 如何在 C# Asp.net 中注销 Page.ClientScript

> ID：14337214
> 
> 赞同：1
> 
> 时间：2013-01-15T11:58:03.167
> 
> 标签：c#, javascript, asp.net, clientscript

我正在将 java 脚本注册到我的 Asp.net 代码隐藏文件，它工作正常。现在，我在同一页面上有一些更新面板，问题是每当任何更新面板发生任何变化时，都会自动调用此脚本。有什么办法可以阻止这种情况发生。我无法从我的页面中删除更新面板，这个脚本也是应用程序的一个非常重要的部分。在这种情况下，我只是在单击保存按钮或调用更新例程时调用警报（具有设置超时功能的 rad 警报），而我在更新面板中几乎没有其他按钮以及任何注册到更新的按钮单击面板时，不情愿地调用了以下脚本。任何人的帮助将不胜感激。

以下是我的 Page.ClientScript

```
 string radalertscript = "<script language='javascript'> Sys.Application.add_load(function(sender, e) {var oWnd = radalert('dialogMessage', 400, 140, 'Saved');window.setTimeout(function () { oWnd.Close(); }, 3000);});</script>";
                Page.ClientScript.RegisterStartupScript(this.GetType(), "radalert", radalertscript); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:00:53.823

您可以将空字符串分配给相同`radalert`的键以删除脚本。

```
if(some_condition)
    Page.ClientScript.RegisterStartupScript(this.GetType(), "radalert", ""); 
```

**编辑：**根据评论，您可以在不使用的情况下使其变得简单`RegisterStartupScript`

在后面的代码中

```
btnSave.Attributes.Add("", "saveButtonFunction();"); 
```

*在 Javascript 中*

```
<script language='javascript'>

   Sys.Application.add_load(function(sender, e) {
           if(btnSaveClicked){
              var oWnd = radalert('dialogMessage', 400,140, 'Saved');
              window.setTimeout(function () { oWnd.Close(); }, 3000);
              btnSaveClicked = false;
           }
    });

    btnSaveClicked = false;
    function saveButtonFunction(){
       btnSaveClicked = true;
    };    

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:24:18.967

非常感谢您的回答阿迪尔。我已经采用了相同的方法，几乎​​没有什么不同。我已从文件后面的代码中取出 JavaScript，并已注册 Sys.Application.add_load 事件，如下所示

```
 Sys.Application.add_load(DisplayRadAlertHandler);
    function DisplayRadAlertHandler() {
        var getMessage = document.getElementById('<%=radAlertDialogHidden.ClientID%>').value;
        if (getMessage != "") {
            document.getElementById('<%=radAlertDialogHidden.ClientID%>').value = "";
            var oWnd = radalert(getMessage, 400, 140, 'Saved');
            window.setTimeout(function () { oWnd.Close(); }, 3000);
        }
    } 
```

在这里，我将我的警报消息设置在来自文件后面代码的隐藏输入字段中，在上面的事件处理程序中，我只是检查消息是否存在，而不是重置隐藏字段并显示消息。你的方法也是正确的，我已经标记了你的答案，但是因为我从多个位置（保存按钮、更新例程等）显示我的消息，所以通过为隐藏的输入字段分配值而不是在上面的事件处理程序中重置看起来更合适。再次感谢您的帮助。

# java - 如何使用rapidminer添加新算子的参数配置？

> ID：14337216
> 
> 赞同：0
> 
> 时间：2013-01-15T11:58:12.737
> 
> 标签：java, rapidminer

在创建一个新的算子并对其进行测试后，我需要设置一些配置，例如频繁项集算法的 minsupp 的定义。实际上，我在我的 java 代码中定义了这个参数。**当我在 Rapidminer GUI 中选择新的算子时，我喜欢在参数列表中查看 minsup 参数**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:59:04.240

如果我理解正确，您想向操作员添加参数，这些参数显示在 GUI 中。

为此，您必须实现操作员的函数 getParameterTypes()。您可以在几乎所有其他运算符中获得有关用法的示例。一个具有许多不同参数的算子可以作为一个很好的参考，例如，在 KMeans 类中实现的 k-Means 算子。基本概念是将 ParameterType 的实例添加到列表并返回该列表。RapidMiner 框架将完成剩下的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T08:47:01.000

解决方案是将 PArameterType 的实例添加到列表并返回该列表。下面是一个例子：

```
@Override
public List<ParameterType> getParameterTypes() {
    List<ParameterType> types = super.getParameterTypes();
    types.add(new ParameterTypeDouble(MinSupp, "Defines the the minimum frequence of an Itemset", 0.0, 1.0));
    types.addAll(RandomGenerator.getRandomGeneratorParameters(this));
    return types;
} 
```

谢谢马吕斯，

# mysql - 选择最近添加的行

> ID：14337218
> 
> 赞同：2
> 
> 时间：2013-01-15T11:58:18.290
> 
> 标签：mysql, sql

我有 3 个具有以下架构的实体（订单、项目和订单项目）：

```
 OrderItems
    Orders      +---------------+
+-----------+   | id (PK)       |     Items
| id (PK)   |==<| order_id (FK) |   +-------+
| createdAt |   | item_id (FK)  |>==| id    |
+-----------+   | createdAt     |   | name  |
                | quantity      |   +-------+
                +---------------+ 
```

我需要保留 OrderItems 的历史记录，这样如果 OrderItem 的数量发生变化，我们就会记录每次连续变化的原始数量。

我的问题是我希望能够为每个订单仅从表中选择最新的项目。例如：

```
First two (initial) OrderItems:
    (id: 1, order_id: 1, item_id: 1, createdAt: 2013-01-12, quantity: 10),
    (id: 2, order_id: 1, item_id: 2, createdAt: 2013-01-12, quantity: 10),

Later order items are amended to have different quantities, creating a new row:
    (id: 3, order_id: 1, item_id: 1, createdAt: 2013-01-14, quantity: 5),
    (id: 4, order_id: 1, item_id: 2, createdAt: 2013-01-14, quantity: 15), 
```

我在查询中执行此操作：

```
SELECT oi.* FROM OrderItems oi
WHERE oi.order_id = 1
GROUP BY oi.item_id
ORDER BY oi.createdAt DESC; 
```

我希望会产生这个：

```
| id | order_id | item_id | createdAt  | quantity |
+----+----------+---------+------------+----------+
| 3  | 1        | 1       | 2013-01-14 | 5        |
| 4  | 2        | 2       | 2013-01-14 | 15       | 
```

实际上产生了这个：

```
| id | order_id | item_id | createdAt  | quantity |
+----+----------+---------+------------+----------+
| 1  | 1        | 1       | 2013-01-12 | 10       |
| 2  | 2        | 2       | 2013-01-12 | 10       | 
```

目前，我认为仅使用 createdAt 时间戳就足以识别项目的历史记录，但是我可能会转向从每个订单项目（链表）链接到前一个项目。如果这样可以更轻松地进行此查询，我将继续进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:01:23.770

试试这个：

```
SELECT 
  oi.*
FROM OrderItems oi
INNER JOIN
(
   SELECT item_id, MAX(createdAt) MaxDate
   FROM OrderItems
   WHERE order_id = 1
   GROUP BY item_id
) o2  ON oi.item_id = o2.item_id
     AND DATE(oi.CreatedAt) = DATE(o2.MaxDate)
ORDER BY oi.createdAt DESC; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/88e70/6)

这会给你：

```
| ID | ORDER_ID | ITEM_ID |  CREATEDAT | QUANTITY |
---------------------------------------------------
|  3 |        1 |       1 | 2013-01-14 |        5 |
|  4 |        1 |       2 | 2013-01-14 |       15 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:39:56.217

这是另一个解决方案：绝对不反对 Mahmoud :D（感谢 sqlfiddle）如果您想尝试一下。

询问：

```
SELECT * FROM orderitems
GROUP BY id
ORDER BY createdAt DESC
LIMIT 2
; 
```

结果：

```
| ID | ORDER_ID | ITEM_ID |                      CREATEDAT | QUANTITY |
-----------------------------------------------------------------------
|  3 |        1 |       1 | January, 14 2013 02:00:00+0000 |        5 |
|  4 |        1 |       2 | January, 14 2013 02:00:00+0000 |       15 | 
```

*   [SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/88e70/12)

# full-text-search - 为什么标题内的全文搜索返回错误

> ID：14337219
> 
> 赞同：7
> 
> 时间：2013-01-15T11:58:19.310
> 
> 标签：full-text-search, wikipedia-api, mediawiki-api

当我使用 Wikipedia API 执行全文搜索时，我无法将其缩小到仅标题 (srwhat=title)。

因此，在任何地方搜索（默认） [http://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=sql&srnamespace=14&format=xml](http://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=sql&srnamespace=14&format=xml)

返回结果，如果我添加 srwhat=title，我得到一个错误：

```
<api servedby="mw69">
  <error code="srsearch-title-disabled" info="title search is disabled"/>
</api> 
```

这个错误甚至列在文档（[http://www.mediawiki.org/wiki/API:Search](http://www.mediawiki.org/wiki/API:Search)）中，但没有任何解释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-22T13:06:36.230

实际上，有一种解决方法，只需`intitle:`在搜索词中添加前缀：

```
srsearch=intitle:sql 
```

你可以在这里找到解释： [https ://en.wikipedia.org/wiki/Help:Searching#Parameters](https://en.wikipedia.org/wiki/Help:Searching#Parameters)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T15:03:09.533

这意味着维基百科使用的搜索引擎（Lucene，我相信）不支持标题搜索。

# php - Google 新闻机器人是如何工作的？

> ID：14337229
> 
> 赞同：-1
> 
> 时间：2013-01-15T11:59:01.830
> 
> 标签：php, symfony, google-news

我正在使用 Symfony2 构建一个新项目，我需要将一些文章从网络上的几个网站拉到我的网站上。我知道我必须小心如何显示这些信息，但这不是重点。

我的问题是，我怎样才能建造一个拾取这些文章的机器人？然后，我想，我将不得不在我的代码中审查它并过滤那些带有标签、标题或关键词的文章。

我应该使用哪种技术？我可以用 php 做到这一点吗？我需要什么 ？哪些知识？我应该使用 RSS 吗？答案越准确（如果你有参考资料）越好！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:07:39.450

它本质上与搜索引擎相同，只是对新闻网站进行了一些调整。[Udacity](http://www.udacity.com/view#Course/cs101/CourseRev/feb2012)提供有关搜索引擎基础知识的课程，因此您可以从那里开始。

# php - 从数据库字段中删除特定 id

> ID：14337231
> 
> 赞同：0
> 
> 时间：2013-01-15T11:59:04.937
> 
> 标签：php, mysql

我正在存储一个使用 分隔的字符串`|`，其中列出了允许的组，现在我的问题是，如果我删除一个组而不是我无法从该特定字段中删除 ID，例如

```
allowed_group_id
+---------------+
1332|4545|5646|7986 
```

例如，我正在删除组说不 5646，那么如何更改脚本并从`allowed_group_id`脚本表中删除该特定组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:01:39.163

你可以试试这个-

```
update table tableName set allowed_group_id = REPLACE(allowed_group_id, '5646', ''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:04:01.400

我建议获取条目，用“|”分解它，删除适当的条目，将其重新分解并更新。

```
$allowedGroupId = '1332|4545|5646|7986';
$parts = explode('|', $allowedGroupId);
if(($key = array_search($deleteGroup, $allowedGroupId)) !== false) {
    unset($allowedGroupId[$key]);
}

$update = " ... "; //update with the new imploded values 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T12:07:05.183

使用 Suresh 响应并改进它：

```
UPDATE TABLE tableName SET allowed_group_id = REPLACE(
    REPLACE(allowed_group_id, '5646', ''),
    '||',
    '|'); 
```

首先，您搜索`'5646'`string in`allowed_group_id`并将其替换为空 string `''`。其次，您`'||'`只用一个 bar 从结果中搜索并替换两个 bar `'|'`。这将避免`'1332|4545||7986'`在您的`allowed_group_id`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T12:10:50.867

使用爆炸：

```
$allowed_ids = explode('|', $current_allowed_group_ids);
if($remove_key = array_search($remove_id, $allowed_ids) !== false) {
    unset($allowed_ids[$remove_key]);
}
$update_query = 'UPDATE table_name SET allowed_group_id = "'. implode('|', $allowed_ids) .'" WHERE id= ...'; 
```

但是你可能想稍微改变你的数据库设计，创建一个数据透视表来检查允许的 id。例子：

```
+------------+
|   GROUPS   |
+----+-------+
| id | name  |
+----+-------+
| 1  | grp_1 |
| 2  | grp_2 |
  ...

+--------------------+
|   ALLOWED_GROUPS   |
+--------------------+
| user_id | group_id |
+---------+----------+
|   2     |    1     |
|   2     |    2     |
|   5     |    2     |
   ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T12:06:15.047

或者您应该有一个包含 2 列 1 的表，其中包含您要允许的操作的 id 和一个具有组 id 的表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T12:09:56.207

虽然其他答案将按原样解决您的问题：您可能需要考虑规范化您的数据库。

例如，如果您当前有一个`table_name`包含`id`and的表，那么您将为每个允许的组`allowed_group_id`创建一个包含多行的新表：`allowed_group`

```
foreign_id | group_id
-----------+---------
1          | 1332
1          | 4545
1          | 5646
1          | 7986 
```

...等等。这里，`foreign_id`是现有`table_name`表中行的 ID。现在，您可以简单地代替上述问题`DELETE FROM allowed_group WHERE foreign_id = 1 AND groupId = 5646`。

这称为将您的数据置于[第一范式](http://en.wikipedia.org/wiki/1NF)。

# ruby - 正则表达式数组 (["number", "number",...])

> ID：14337232
> 
> 赞同：3
> 
> 时间：2013-01-15T11:59:10.220
> 
> 标签：ruby, regex

你能帮我表达数组吗：`["232","2323","233"]`
我试试这个：`/^\[("\d{1,7}")|(,"\d{1,7}")\]$/`
但是这个表达式不能正常工作。
我使用红宝石（导轨）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:05:36.577

你可以试试这个（虽然它可能允许领先`,`）：

```
^\[(,?"\d{1,7}")*]$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:29:39.193

这将很好地验证数组结构，阻止像这样的条目`[,"123"]`

```
^\[(("\d{1,7}")(,"\d{1,7}")*)?\]$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:21:02.690

试试这个：`/^\[("\d{1,7}")(, ?"\d{1,7}")*\]$/`

# c++ - 具有继承和前向声明两种类型的模板类

> ID：14337233
> 
> 赞同：2
> 
> 时间：2013-01-15T11:59:11.483
> 
> 标签：c++, templates, inheritance

我正在解决这个问题。我认为这实际上是不可能的，但只是为了确定我想在这里问一下是否真的有解决方案。考虑以下代码。有 2 个模板类 A 和 B 以及两个非模板类 C 和 D，它们分别派生自 A 和 B。

```
// definition of class A
template <class DerivedA, class DerivedB> class A {
private:
    DerivedB data;
public:
    A(const DerivedB& data) : data(data) {}
    virtual ~A() {}
    DerivedB get() const { return data; }
};

// definition of class B
template <class DerivedA, class DerivedB> class B {
private:
    DerivedA data;
public:
    B(const DerivedA& data) : data(data) {}
    virtual ~B() {}
    DerivedA get() const { return data; }
};

// forward declaration of D
class D;

// definition of class C, derives from A<C, D>
class C : public A<C, D> {
private:
    int extraInfo;
public:
    C(const D& d) : A(d) {}
    virtual ~C() {}
    int getExtraInfo() const { return extraInfo; }
};

// definition of class D, derives from B<C, D>
class D : public B<C, D> {
private:
    int extraInfo;
public:
    D(const C& c) : B(c) {}
    virtual ~D() {}
    int getExtraInfo() const { return extraInfo; }
}; 
```

这里的问题是不能定义类 C，因为类 D 只是前向声明的。因此，当模板 A 被写出时，它不知道它的私有成员的类型是什么。请注意，我不能使用指针，我需要一些已知的功能。是否可以以任何方式编译以使我拥有我的 C 类和 D 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:05:35.160

`C`继承 type 的成员`D`，`D`继承 type 的成员`C`。所以，不，这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:24:35.320

正如您所解释的那样，没有办法解决这个问题，也不应该有。正如你现在拥有的那样：

```
class C : public A<C, D> 
```

意味着`C`将继承类型的数据成员`D`。反过来：

```
class D : public B<C, D> 
```

意味着`D`将继承类型的数据成员`C`。

If `C`has a `D`, which has a `C`, which has a `D`...你有一个很好的无限递归，这意味着在这种情况下任何`C`或`D`对象的大小将是无限的。

因此，除非您使用指针（您可以在任何点插入适当的空指针来切断无限链）或引用（您可以引用以前使用的对象），否则您不能也不应该拥有这种类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:16:02.637

你可以通过让 C 和 D 实现一个纯虚拟类，以及你需要的功能（包括 getter），并让它们将该类作为模板参数传递，从而摆脱这种情况。然后，您实际上在 A 和 B 中使用了指向它的指针，但您保留了所有功能。

像这样的东西（做你自己的改编）

```
// definition of class A
template <class DerivedA, class DerivedB> class A {
private:
    const DerivedB& _data;
public:
    A(const DerivedB& data) : _data(data) {}
    virtual ~A() {}
    DerivedB& get() const { return data; }
};

// definition of class B
template <class DerivedA, class DerivedB> class B {
private:
    DerivedA data;
public:
    B(const DerivedA& data) : data(data) {}
    virtual ~B() {}
    DerivedA get() const { return data; }
};

class TheInterface {
public:
    virtual int getExtraInfo() const = 0;
virtual ~TheInterface() = 0;
};

// definition of class C, derives from A<C, D>
class C : public TheInterface, public A<C, TheInterface> {
private:
    int extraInfo;
public:
    C(const TheInterface& d) : A(d) {}
    virtual ~C() {}
    int getExtraInfo() const { return extraInfo; }
};

// definition of class D, derives from B<C, D>
class D : public TheInterface, public B<C, D> {
private:
    int extraInfo;
public:
    D(const C& c) : B(c) {}
    virtual ~D() {}
    int getExtraInfo() const { return extraInfo; }
}; 
```

# ios - AVCam 到情节提要 - 相机不显示

> ID：14337234
> 
> 赞同：0
> 
> 时间：2013-01-15T11:59:21.290
> 
> 标签：ios, xcode, camera, storyboard, avcam

我从 Apple 下载了 AVCam 示例，并尝试将 xib 文件迁移到 Storyboard。

问题是“newCaptureVideoPreviewLayer”没有在视图中显示视频......视图正在引用“videoPreviewView”的出口，这是视频应该出现的视图。

这是 AVCam 示例中的代码，我只是粘贴了代码并删除了不必要的代码：

```
- (void)viewDidLoad
{
    if ([self captureManager] == nil) {
    AVCamCaptureManager *manager = [[AVCamCaptureManager alloc] init];
    [self setCaptureManager:manager];
    [manager release];

    [[self captureManager] setDelegate:self];

    if ([[self captureManager] setupSession]) {
        // Create video preview layer and add it to the UI
        AVCaptureVideoPreviewLayer *newCaptureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:[[self captureManager] session]];
        UIView *view = [self videoPreviewView];
        CALayer *viewLayer = [view layer];
        [viewLayer setMasksToBounds:YES];

        CGRect bounds = [view bounds];
        [newCaptureVideoPreviewLayer setFrame:bounds];

        [newCaptureVideoPreviewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];

        [viewLayer insertSublayer:newCaptureVideoPreviewLayer below:[[viewLayer sublayers] objectAtIndex:0]];

        [self setCaptureVideoPreviewLayer:newCaptureVideoPreviewLayer];
        [newCaptureVideoPreviewLayer release];

        // Start the session. This is done asychronously since -startRunning doesn't return until the session is running.
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            [[[self captureManager] session] startRunning];
        });
    }
}

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
} 
```

有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:33:59.257

您可能希望确保您的 camerapreview 视图是故事板中的顶部子视图。最后添加它或使用 BringSubviewToFront api。

如果您按拍照，我猜相机正在将照片保存到您的照片相机胶卷中？如果不是，它可能是初始化代码的问题。我不得不更改 ios 6 的 ismirrored 已弃用代码。

# python - 在一行中使用一个表达式两次 - 作为字符串格式的条件和？

> ID：14337236
> 
> 赞同：8
> 
> 时间：2013-01-15T11:59:30.017
> 
> 标签：python, lambda, formatting, conditional

我发现在许多不同的项目中，我正在编写很多代码，我需要评估一个（中等复杂，可能评估成本高昂）表达式，然后用它做一些事情（例如，将它用于字符串格式化），但是仅当表达式为 True/non-None 时。

例如，在很多地方，我最终会执行以下操作：

```
result += '%s '%( <complexExpressionForGettingX> ) if <complexExpressionForGettingX> else '' 
```

...我想这基本上是想要返回表达式的某些函数的更普遍问题的特例，但前提是该表达式为真，即：

```
f( e() ) if e() else somedefault 
```

但无需重新键入表达式（或重新评估它，以防它是一个昂贵的函数调用）。

显然，所需的逻辑可以通过各种冗长的方式很容易地实现（例如，通过将表达式拆分为多个语句并将表达式分配给临时变量），但这有点蹩脚，因为这似乎是一个相当普遍的问题，并且因为 python 非常酷（特别是对于功能性的东西），我想知道是否有一种漂亮、优雅、简洁的方式来做到这一点？

我目前最好的选择是定义一个短暂的 lambda 来处理它（比多个语句更好，但有点难以阅读）：

```
(lambda e: '%s ' % e if e else '')( <complexExpressionForGettingX> ) 
```

或编写我自己的实用程序函数，例如：

```
def conditional(expr, formatStringIfTrue, default='') 
```

...但是由于我在许多不同的代码库中执行此操作，我宁愿使用内置库函数或一些聪明的 Python 语法（如果存在这样的东西）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T12:27:26.503

我绝对喜欢单线。但有时它们是错误的解决方案。

在专业的软件开发中，如果团队规模大于 2，那么您花在理解别人编写的代码上的时间比编写新代码的时间要多。这里介绍的单行语句绝对令人困惑，因此只需执行两行（即使您在帖子中提到了多个语句）：

```
X = <complexExpressionForGettingX>
result += '%s '% X  if X else '' 
```

这是清晰、简洁的，每个人都会立即明白这里发生了什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T12:13:18.787

Python 没有表达式范围（[Haskell 'let' 是否有 Python 等价物](https://stackoverflow.com/questions/12219465/is-there-a-python-equivalent-of-the-haskell-let)），大概是因为语法的滥用和混淆超过了优点。

如果您绝对必须使用表达式范围，那么最糟糕的选择是滥用生成器理解：

```
result += next('%s '%(e) if e else '' for e in (<complexExpressionForGettingX>,)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T13:30:20.280

您可以定义一次条件格式化函数，然后重复使用它：

```
def cond_format(expr, form, alt):
    if expr:
        return form % expr
    else:
        return alt 
```

用法：

```
result += cond_format(<costly_expression>, '%s ', '') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T14:17:15.217

在听到回复后（谢谢大家！）我现在确信如果不定义新函数（或 lambda 函数）就无法在 Python 中实现我想要的，因为这是引入新范围的唯一方法。

为了清楚起见，我决定需要将其实现为可重用函数（而不是 lambda），因此为了他人的利益，我想我会分享我最终想出的函数——它足够灵活，可以处理多个额外的格式字符串参数（除了用于决定是否进行格式化的主要参数）；它还附带 pythondoc 以显示正确性并说明用法（如果您不确定 **kwargs 的工作原理，请忽略它，它只是一个实现细节，并且是我可以看到实现可选 defaultValue= kwarg 以下的唯一方法格式字符串参数的变量列表）。

```
def condFormat(formatIfTrue, expr, *otherFormatArgs, **kwargs):
""" Helper for creating returning the result of string.format() on a 
specified expression if the expressions's bool(expr) is True 
(i.e. it's not None, an empty list  or an empty string or the number zero), 
or return a default string (typically '') if not. 

For more complicated cases where the operation on expr is more complicated 
than a format string, or where a different condition is required, use:
(lambda e=myexpr: '' if not e else '%s ' % e)

formatIfTrue -- a format string suitable for use with string.format(), e.g. 
    "{}, {}" or "{1}, {0:d}". 
expr -- the expression to evaluate. May be of any type. 
defaultValue -- set this keyword arg to override

>>> 'x' + condFormat(', {}.', 'foobar')
'x, foobar.'

>>> 'x' + condFormat(', {}.', [])
'x'

>>> condFormat('{}; {}', 123, 456, defaultValue=None)
'123; 456'

>>> condFormat('{0:,d}; {2:d}; {1:d}', 12345, 678, 9, defaultValue=None)
'12,345; 9; 678'

>>> condFormat('{}; {}; {}', 0, 678, 9, defaultValue=None) == None
True

"""
defaultValue = kwargs.pop('defaultValue','')
assert not kwargs, 'unexpected kwargs: %s'%kwargs
if not bool(expr): return defaultValue

if otherFormatArgs:
    return formatIfTrue.format( *((expr,)+otherFormatArgs) )
else:
    return formatIfTrue.format(expr) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T14:18:02.157

大概，您想*重复*执行此操作以构建字符串。从更全局的角度来看，您可能会发现`filter`(or `itertools.ifilter`) 对值的集合执行了您想要的操作。

你会得到这样的结果：

```
' '.join(map(str, filter(None, <iterable of <complexExpressionForGettingX>>))) 
```

用作`None`for 的第一个参数`filter`表示接受任何真值。作为一个简单表达式的具体示例：

```
>>> ' '.join(map(str, filter(None, range(-3, 3))))
'-3 -2 -1 1 2' 
```

根据您计算值的方式，等效列表或生成器理解可能更具可读性。

# c# - 是否可以派生（伪造）内存中 MemoryStream 文件的位置路径？

> ID：14337238
> 
> 赞同：5
> 
> 时间：2013-01-15T11:59:39.253
> 
> 标签：c#, file-io, .net-3.5, filestream, memorystream

是否可以导出内存文件的位置路径？

我这样做的理由是基于我的 WinForms 应用程序以 Base64 编码字符串格式检索的图像集合。我需要构建一些 HTML 并注入这些图像，以便它们可以在我的应用程序的 WebBrowser 控件中的嵌入页面上呈现。由于我们在这里讨论的是 HTML，所以我需要使用`<IMG>`标签来显示图像。这个元素需要接受一个“src”路径，这意味着我需要确定一种方法来导出每个内存图像的绝对/相对路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:28:07.490

如果您控制在服务器上运行的应用程序（您在评论中指出），那么您应该能够重定向对特定资源的请求。例如，如果用户应用程序请求“http://myserver/memory/imgxxx.jpg”，服务器应该能够拦截该请求，而不是尝试从磁盘提供 imgxxx.jpg，而是从内存，并将其发送给客户端。

现在，如果您只是将 base64 编码的数据发送到客户端，并希望客户端以某种方式访问​​数据并进行转换……那将是一个更难的问题。我可以设想用 JavaScript 做一些事情，用相应的图像替换所有具有某些给定属性的 img 标签。但我怀疑这会变得非常混乱。如果可能的话。

另一种可能性是创建派生`WebBrowser`组件并自定义其行为。[CreateSink](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.createsink.aspx)方法文档中有一个很好的例子。可以编写一个处理程序，当组件想要下载某些东西时调用该处理程序。然后，您可以拦截呼叫并提供您的内存图像。我不确定这是否可能。您可以查看[WebBrowser 定制](http://msdn.microsoft.com/en-us/library/aa770041%28v=vs.85%29.aspx)。不过，我会说，只编写文件并使用“file://”url 可能更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:09:51.147

您可以使用[`HttpListener class`](http://msdn.microsoft.com/en-us/library/system.net.httplistener.aspx).

您将需要使用异步模型。创建一个提供内容的 url，例如“http://*:8080/appdata”，然后在您的 html 中使用该 url (http://localhost:8080/appdata/someinmemoryresource")。

当 HttpListener 收到请求时，查看路径并使用您想要服务的内存数据进行响应！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:41:06.957

`IMG`标签不需要路径，它需要一个 URL 。您不能使用 URL 引用内存中的数据。浏览器将使用标签中提供的 URL 发出第二个 HTTP 请求，此时`IMG`该 URL 必须有效。

考虑添加 MVC 操作或 HTTP 处理程序以返回图像字节。或将其保存到磁盘。

# java - 如何找出for循环迭代是否是最后一个

> ID：14337239
> 
> 赞同：1
> 
> 时间：2013-01-15T11:59:39.863
> 
> 标签：java

我有以下循环

```
for(int i=0;i<1000;i++) { } 
```

我如何确定当前迭代是否是java中的最后一次迭代。谢谢。我正在动态获得的价值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T12:02:58.677

根据您的问题，如果您的比较值是动态的

```
int myval = 1000;

    for(int i=0;i<myval;i++) { 

        if(i == myval -1){
            // last work
        }

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T12:00:32.357

您可以检查`i`equals `999`，当然除非在循环内另外修改它：

```
for(int i=0;i<1000;i++) {
    if (i == 999) {
        // Last iteration
    }
    ... // More code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T12:00:56.333

你只需检查你的运行变量。`if(i == 999)`...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T12:02:33.070

正如其他人建议的那样，您可以看到`if(i==999)`. 这在大多数情况下都会起作用，但并非总是如此。

如果您`i`在循环内部进行修改，您可能会发现自己多次处于迭代 999 中，或者永远不会。

此外，如果您在循环内使用`break`或`return`，您将无法进行第 999 次迭代。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T12:06:26.313

在实践中，这看起来有点不同，然后其他答案显示：

```
int len = 1000;
for (int i=0; i < len; i++) {
  if (i == len-1) {
      // action for last iteration
  }
} 
```

# sqlalchemy - 如何在 sqlalchemy 中的类内查询

> ID：14337244
> 
> 赞同：4
> 
> 时间：2013-01-15T12:00:09.627
> 
> 标签：sqlalchemy

我有一个与 Item 类具有一对多关系的 User 类：

```
class User(Base):
    items=relationship(Item)
    def method(self):
        for item in self.items
            if self.items.itemname=='my item'
                #do something 
```

现在我想在 User 类中的一个方法中访问 User 的一些项目（过滤）。编写在所有项目上运行的 for 循环（如示例中所示）或在类中运行查询是否更有效（性能方面）？（假设普通用户有几千个项目）。我也不知道如何在课堂上运行查询！有什么类似`self.query.filter()`的方法或者我应该在类中定义一个会话并运行`session.query(Items).filter()`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T14:49:54.013

如果您确定当前实例已附加到会话，则可以使用[`sqlalchemy.orm.session.object_session`](http://docs.sqlalchemy.org/en/latest/orm/session.html#sqlalchemy.orm.session.object_session)

所以它将是：

```
from sqlalchemy.orm.session import object_session

class User(Base):
    ...

    def method(self):
        session = object_session(self)
        session.query(Items).filter(...) 
```

**编辑**：

作为替代方案，我可以建议[Dynamic Relationship Loaders](http://docs.sqlalchemy.org/en/rel_0_7/orm/collections.html#dynamic-relationship-loaders)。在这种情况下，您将关系作为可以进一步定义的查询：

```
class User(Base):
    items=relationship(Item, lazy='dynamic')

user1 = session.query(User).get(user_id)
user1.items.filter(...) 
```

# java - 数组循环程序

> ID：14337245
> 
> 赞同：0
> 
> 时间：2013-01-15T12:00:19.463
> 
> 标签：java, arrays, logic

我应该编写一个程序来询问用户想要的行数。例如，如果用户输入 5，它将显示从 25 到 1 的所有数字，排列为 5 列和 5 行。如果输入 5，输出应该是这样的：

```
25  24  23  22  21
16  17  18  19  20  
15  14  13  12  11  
 6   7   8   9  10  
 5   4   3   2   1 
```

如您所见，有一个模式。第一个出现的数字是数字的平方。然后下一个数字是数字的平方减 1。直到它达到 21，将减去 5 得到 16。然后它会加 1 直到达到 20。如您所见，它就像一条蛇。

问题是它适用于任何数字，但输入 1 时除外。0 是输入 1 时的当前结果。

这是我当前的代码：请帮助我，谢谢

```
import java.util.*;
public class ArrayOutput2 
{
    public static void main(String[] args)
    {
        Scanner input = new Scanner(System.in);
        int number = 0;

        System.out.print("Enter number of rows: ");
        number = input.nextInt();

        int[][] num = new int[number][number];
        int k=1, i, j;

            while(k< (number*number))
            {
                for(i=number; i>=1; i--)
                {
                   if (i%2==1)
                   {
                     for(j=number-1; j>=0; j--)
                         {
                             num[i-1][j]=k;
                             k++;
                         }
                   }

                   else
                         for(j=0; j<=number-1; j++)
                         {
                             num[i-1][j]=k;
                             k++;
                         }
                 }
           }

        for(i=0;i<number;i++)
        {
             for(j=0;j<number;j++)

             System.out.print(num[i][j]+"\t");
             System.out.println();   
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:13:29.973

假设用户输入`1`一个值，因此`number == 1`。您分配一个数组 num[1][1]，这是一个只有一个可能的单元格的数组，`number[0][0]`

然后开始循环

```
k=1;
while (k<(number*number)); // which is like while(1<1*1)==FALSE 
```

因此从不使用循环。您可以使用：

1) 一个`do-while`循环至少运行一次循环
2) 或在循环结束后添加一条`if`语句`while()`：

```
// Using an IF statement immediately after the unmodified while()
if (number==1)
{
   num[0][0]=1;
}

// or with a loop DO-WHILE
    do
    {
        for(i=number; i>=1; i--)
        {
           if (i%2==1)
           {
             for(j=number-1; j>=0; j--)
              {
                num[i-1][j]=k;
                k++;
              }
           }
           else
              for(j=0; j<=number-1; j++)
              {
                num[i-1][j]=k;
                k++;
              }
         }
   }while(k<(number*number)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:05:20.617

当`number = 1`2D`array int[][] num`没有进入循环时，它不会被填充`while(k<(1*1))`，因此打印 2D 值的底部 for 循环仅打印，`0`因为数组本身没有被初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:54:57.180

```
if(number == 1 ) {
    System.out.println("1");
    return;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T12:08:14.743

`num[0][0]`由于您没有进入循环，因此尚未初始化。在循环之前试试这个：

```
if (number == 1)
    num[0][0] = 1; 
```

# javascript - 将带有“/”的字符串传递给ajax

> ID：14337246
> 
> 赞同：3
> 
> 时间：2013-01-15T12:00:25.893
> 
> 标签：javascript, jquery, ajax

我有个问题。我如何能够提交包含“/”的字符串。

例如：

```
$link = "string/users";

$.ajax({
    url: '/users/add_to_footer/'+$link,
    success: function(data){
}); 
```

在我的控制器中，我有：

```
public function getString($string = NULL)
{

} 
```

我需要能够保存整个单词“字符串/用户”。但是目前，它只保存“/”之前的单词，它只保存单词“string”而不是“string/users”。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T12:36:45.677

您是否尝试对其进行编码？

```
$link = "string/users";
$.ajax({
    url: '/users/add_to_footer/'+ encodeURIComponent($link),
    success: function(data){
}); 
```

# textures - glkit 立方体纹理 - 每个面都有不同的纹理

> ID：14337250
> 
> 赞同：1
> 
> 时间：2013-01-15T12:00:41.077
> 
> 标签：textures, cube, glkit

我正在使用 GLKit 来绘制一个立方体。我想在每张脸上画出不同的纹理。有人有样品吗？

# c# - 将项目添加到已包含数据的对象的 List<> 中，在 List 中添加重复项

> ID：14337252
> 
> 赞同：0
> 
> 时间：2013-01-15T12:00:50.260
> 
> 标签：c#, wcf, windows-phone-7

我正在开发一个 Windows 手机应用程序，我想从我的 Web 服务中获取前 15 个对象的列表以及一个额外的项目来表示“加载下一个 15 个项目按钮”并将其绑定到列表框。在选择最后一个元素或索引（按钮）时，我想从列表中删除最后一个项目（按钮）并再次调用服务以获取接下来的 15 个项目加上将再次添加到当前列表中的按钮项目清除列表。当我们从列表框中选择最后一项时，同样的过程会继续进行。我的问题是我能够在第一轮中正确获得它。在第二轮中，将接下来的 15 个元素添加到列表中两次。我不知道真正的问题是什么。我也没有收到任何错误或异常。

以下是我到目前为止所做的：

```
private void ListBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

        int LastIndex=app.imgItem.Count - 1;
        if (ListBox1.SelectedIndex == LastIndex)
        {
            app.imgItem.Remove(app.imgItem[app.imgItem.Count-1]);
            proxy.SelectNextItemsCompleted += new EventHandler<ServiceReference1.SelectNextItemsCompletedEventArgs>(proxy_SelectNextItemsCompleted);
            int id = app.imgItem.Last().Id;
            proxy.SelectNextItemsAsync(categoryID, id);
        }

    }

void proxy_SelectNextItemsCompleted(object sender, ServiceReference1.SelectNextItemsCompletedEventArgs e)
    {
        if (e.Error != null)
        {
            MessageBox.Show("Cannot load data.");
            return;
        }
        else
        {
                foreach (var item in e.Result)
                {
                    ImgData idata = new ImgData();
                    idata.CategoryID = item.CategoryID;
                    idata.ImageID = item.ImageID;
                    idata.ImageTitle = item.ImageTitle;
                    idata.Thumbnail = item.Thumbnail;
                    app.imgItem.Add(idata);
                }
        }
        ImageData btnData = new ImageData();
        btnData.CategoryID = 0;
        btnData.ImageID = 0;
        btnData.ImageTitle = "";
        btnData.Thumbnail = "Images/loadButton.jpg";
        app.imgItem.Add(btnData);
        ListBox1.ItemsSource = app.imgItem;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:05:03.160

看起来您在 SelectionChanged 事件处理程序中重新注册了一个事件处理程序，因此，SelectNextItemsCompleted 处理程序可能第二次被调用两次：

```
proxy.SelectNextItemsCompleted += new EventHandler<ServiceReference1.SelectNextItemsCompletedEventArgs>(proxy_SelectNextItemsCompleted); 
```

您可能应该在代码只运行一次的其他地方注册该事件处理程序。

# javascript - 如何识别此 URL 是否来自 Youtube？

> ID：14337254
> 
> 赞同：0
> 
> 时间：2013-01-15T12:00:56.037
> 
> 标签：javascript, jquery, youtube-api

我正在使用以下函数来解析 YouTube URL 以从 YouTube URL 中检索 YouTube ID：

```
function yt_parser()
{
    var yt_url_sub = http://www.youtube.com/watch?v=6nZlXB5okeo; 
    var youtube_id = yt_url_sub.replace(/^[^v]+v.(.{11}).*/,"$1");
    alert(youtube_id);  
} 
```

> 输出：6nZlXB5okeo

但是我应该如何验证这个 URL 是否来自 YouTube？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:05:05.547

您可以为此更改您的正则表达式

```
var url = 'http://www.youtube.com/watch?v=wBnCURIfbPg'

var m = url.match(/:\/\/www.youtube.com\/.*?\bv=([^&]+)/);

if (m) {
  alert(m[1]);
} 
```

[http://jsfiddle.net/zmDZp/](http://jsfiddle.net/zmDZp/)

# android - 为什么我不能使用 MapView？

> ID：14337258
> 
> 赞同：0
> 
> 时间：2013-01-15T12:01:08.327
> 
> 标签：android, android-mapview

我想使用 MapView，所以我得到了 SHA1 指纹，也得到了我的 apikey，但是在我的 MainActivity.java 文件中，当我导入 com.google.android.maps.MapView 它显示这个包不可用所以我不知道在哪里我犯了一个错误

这是我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.mapviewexample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="17"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.mapviewexample.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="my apikey" />
    </application>

</manifest> 
```

这是我的 activity_main.xml 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.MapFragment" />

</RelativeLayout> 
```

这是我的 MainActivity.java 文件

```
package com.example.mapviewexample;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

正如你在上面看到的，当我导入这个时

```
import com.google.android.gms.maps.CameraUpdateFactory; 
```

和其他它表明这些包不可用。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:38:56.430

更改您的项目构建目标，它可能是标准的 android 平台，而不是您应该选择 Google-API 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:04:44.190

MapView 总是显示在`MapActivity`. 你正在使用`Activity`. 尝试使用`MapActivity`和 google api 模拟器。 `<uses-library android:name="com.google.android.maps" />` 把它放在你的应用程序标签中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T08:45:19.990

我没有看到关于将包含 com.google.android.gms.maps 和其他类的库放在类路径上的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T10:32:51.527

要扩展@gaurav-jain 给出的答案，Android 项目不会自动包含谷歌地图。您需要针对 Google API 的适当版本，而不是 Android 的适当版本。

![项目属性](../Images/1867629a59b94c089acf0d8f2078023f.png)

在这里，您可以在 Eclipse 中看到一个 Android 项目。我右键单击该项目并选择属性，然后单击进入 Android 部分。可以看到目标版本是 Android 4.2。

在这个项目中，谷歌地图将不可用。如果我想使用地图，我需要将目标更改为 Google API 4.2。

如果您没有在列表中看到 Google API，那么您需要使用 SDK 管理器下载并安装所需的版本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T12:02:53.827

您需要在清单中使用 uses-library android:name="com.google.android.maps" 并且 sdk 应该是 google-api，转到您的项目属性，然后 android 并从那里选择任何 google api 并扩展您的 Mapactivity 课程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T12:20:52.860

```
First of all **GET THE GOOGLE MAPS API KEY**

To allow you to show maps on your application, Google Maps API needs to identify you and your application (even if you are simply developing). For this you need the API Key for the Android platform.
You can get this by creating an md5 checksum of the debug certificate for you map application (in this case the tutorial).
Find your debug.keystore at
* Windows Vista: C:\Users\<user>\.android\debug.keystore
* Windows XP: C:\Documents and Settings\<user>\.android\debug.keystore
Then use the Keytool (found at C:\Program Files\Java\jdk1.6.0_20\bin) and get the md5 checksum by executing this:
keytool -list -alias androiddebugkey -keystore “C:\Documents and Settings\<user>\.android\debug.keystore” -storepass android -keypass android

after that start coding and be sure **you select the relevant version of Google APIs (in case there’s a newer version by the time you are working on this).**

**strings.xml**

    <?xml version="1.0" encoding="utf-8"?>
<resources>
 <string name="hello">Hello World, HelloGoogleMaps!</string>
 <string name="app_name">Hello,GoogleMaps</string>
 <string name="mapskey">YOUR API KEY</string>
</resources>

**main.xml**

    <?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/mapview"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:clickable="true"
 android:apiKey="YOUR API KEY"
/>

**AndroidManifest.xml**

    <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.example.HelloGoogleMaps2"
 android:versionCode="1"
 android:versionName="1.0">
 <application android:icon="@drawable/icon" android:label="@string/app_name">
 <activity android:name=".HelloGoogleMaps2" android:label="@string/app_name" android:theme="@android:style/Theme.NoTitleBar">
 <intent-filter>
 <action android:name="android.intent.action.MAIN" />
 <category android:name="android.intent.category.LAUNCHER" />
 </intent-filter>
 </activity>
 <uses-library android:name="com.google.android.maps" />
 </application>
 <uses-permission android:name="android.permission.INTERNET" />
</manifest>

**HelloGoogleMaps2.java**

    public class HelloGoogleMaps extends MapActivity
{
 @Override
 public void onCreate(Bundle savedInstanceState)
 {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.main);

 MapView mapView = (MapView) findViewById(R.id.mapview);
 mapView.setBuiltInZoomControls(true);

 List<Overlay> mapOverlays = mapView.getOverlays();
 Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
 HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this);
 GeoPoint point = new GeoPoint(30443769,-91158458);
 OverlayItem overlayitem = new OverlayItem(point, "Laissez les bon temps rouler!", "I'm in Louisiana!");

 GeoPoint point2 = new GeoPoint(17385812,78480667);
 OverlayItem overlayitem2 = new OverlayItem(point2, "Namashkaar!", "I'm in Hyderabad, India!");

 itemizedoverlay.addOverlay(overlayitem);
 itemizedoverlay.addOverlay(overlayitem2);

 mapOverlays.add(itemizedoverlay);
 }
 @Override
 protected boolean isRouteDisplayed()
 {
 return false;
 }
}

    **HelloItemizedOverlay.java**

    public class HelloItemizedOverlay extends ItemizedOverlay<OverlayItem>
{
 private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
 private Context mContext;

 public HelloItemizedOverlay(Drawable defaultMarker, Context context)
 {
 super(boundCenterBottom(defaultMarker));
 mContext = context;
 }

 public void addOverlay(OverlayItem overlay)
 {
 mOverlays.add(overlay);
 populate();
 }
 @Override
 protected OverlayItem createItem(int i)
 {
 return mOverlays.get(i);
 }
 @Override
 public int size()
 {
 return mOverlays.size();
 }
 @Override
 protected boolean onTap(int index)
 {
 OverlayItem item = mOverlays.get(index);
 AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
 dialog.setTitle(item.getTitle());
 dialog.setMessage(item.getSnippet());
 dialog.show();
 return true;
 }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-15T12:46:37.510

1.  确保您的关键工作。先用google例子试试
2.  您必须转发所有[Activity 生命周期方法](https://developers.google.com/maps/documentation/android/map#mapview)。

> ```
> @Override
> public void onViewCreated(View view, Bundle savedInstanceState) {
>     super.onViewCreated(view, savedInstanceState);
>     mapView.onCreate(savedInstanceState);
>     try {
>        MapsInitializer.initialize(mContext);
>     } catch (GooglePlayServicesNotAvailableException e) {
>        e.printStackTrace();
>     }
>  }
> 
> @Override
> public void onPause() {
>     super.onPause();
>     mapView.onPause();
> }
> 
> @Override
> public void onResume() {
>    super.onResume();
>    mapView.onResume();
> }
> 
> @Override
> public void onDestroy() {
>     super.onDestroy();
>     mapView.onDestroy();
> } 
> ```

# excel - 使用变量引用的 Vlookup

> ID：14337266
> 
> 赞同：2
> 
> 时间：2013-01-15T12:01:31.923
> 
> 标签：excel, excel-formula, vba

我希望定义一些变量并将它们放在一个 vlookup 公式中。我在下面概述了我要实现的目标的简单示例。但是我不断收到“438”错误消息。

我已经放入了没有变量的原始 vlookup 和带有变量的 vlookup 不起作用。任何输入将不胜感激。我相信我已经正确定义了变量，但我认为这与我在公式中调用它们的方式有关。

```
Sub Macro1()

Dim Lookupcolumn As Range

Dim columnletter_start As String

Dim columnletter_End As String

columnletter_start = ActiveCell.offfet(0, 1).Value

columnletter_End = ActiveCell.offfet(0, 2).Value

Set Lookupcolumn = Sheets("Pricing Analysis").Cells.Find(What:="Cusip", After:=ActiveCell, LookIn:=xlFormulas, LookAt _
        :=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:= _
        False, SearchFormat:=False)

'ActiveCell.FormulaR1C1 = "=VLOOKUP(R[1]C[-8],'CS Primeview'!C[-6]:C[-4],3,FALSE)"

ActiveCell.FormulaR1C1 = "=VLOOKUP(Lookupcolumn,'CS Primeview'columnletter_start:columnletter_End,3,FALSE)"

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:56:22.090

问题是您确实可以通过`Excel.WorksheetFunction.`结构在 VBA 代码中使用任何 Excel 函数，并使用变量获得正确的结果。但是，对于您的代码，`ActiveCell.FormulaR1C1 = "=VLOOKUP(Lookupcolumn,'CS Primeview'columnletter_start:columnletter_End,3,FALSE)"`您尝试使用**Range**对象作为参考`VLOOKUP`，但 Excel 将参数理解为仅作为`A1`或命名区域的有效参考。

作为一种解决方案，尝试`A1`在您的代码中生成 -similar 参数。对于整个列`A:A`将去。祝你好运！

PS我注意到的另一件事：`'CS Primeview'columnletter_start:columnletter_End`-对于这一部分，您似乎错过了参考前的感叹号，以及连接部分的双引号，即`"'CS Primeview'!" & columnletter_start & ":" & columnletter_End`应该是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-02T12:16:56.887

下面允许您定义变量单元格引用，然后将其转换为以 .formula 方式可读的格式。这是使用变量进行 vlookup 的一种简单方法，因为您可以在 excel 中编写公式，然后将它们复制/粘贴到代码中并更改查找值。这也适用于索引/匹配。

```
lookup_value = Cells(defined_row,defined_column).Address(False,False)
lookup_value = Replace(lookup_value, "", "")

ActiveCell.Formula = "VLOOKUP($" & lookup_value & ",'Sheet1'!$A:$B,2,0)" 
```

# ios - 如何将操作从主队列转移到后台释放主队列

> ID：14337270
> 
> 赞同：0
> 
> 时间：2013-01-15T12:01:41.743
> 
> 标签：ios, objective-c, grand-central-dispatch, dispatch-async

这就是我正在做的事情。

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

dispatch_async(queue, ^{
    NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://myurl"]]];
    dispatch_sync(dispatch_get_main_queue(), ^{
        if(!data) {
            // data not recieved or bad data. Initiate reachability test
            // I have built a wrapper for Reachability class called ReachabilityController
            // ReachabilityController also notifies the user for avaibility, UI 

            ReachabilityController *reachability = [[ReachabilityController alloc] init];
            [reachability checkReachability];
            return;
        }
        //update table
    });
}); 
```

我的问题是在主队列中进行可达性测试，这通常会冻结 UI。我想在后台模式下运行。

我想在后台模式或低优先级模式下处理 ReachabilityTest。但同样，我的可达性控制器确实通知用户当前的网络可用性，所以在某些时候我将不得不再次使用主队列。

我坚信一定有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:10:42.623

然而，这是一个正确的方法。它看起来并不完全漂亮，但这并不意味着它不正确。如果您希望您的代码看起来“更干净”，您可能想看一下`NSThread`并按照自己的方式完成它，但这是一种更容易的方法。

为了使它在我的项目中看起来更容易，我们制作了一个名为 dispatcher 的简单类，它使用块：

```
+ (void)dispatchOnBackgroundAsync:(void(^)(void))block {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), block);
}

+ (void)dispatchOnMainAsync:(void(^)(void))block {
    dispatch_async(dispatch_get_main_queue(), block);
} 
```

像这样使用：

```
[Dispatcher dispatchOnBackgroundAsync:^{
    // background thread code

    [Dispatcher dispatchOnMainAsync:^{
        // main thread code
    }];
}]; 
```

# mocking - 使用 Auto Mocking 容器是好还是坏？

> ID：14337271
> 
> 赞同：6
> 
> 时间：2013-01-15T12:01:42.947
> 
> 标签：mocking, tdd, automocking

我最近一直在做一个项目，该项目已经开始变得相当依赖，并且一直在探索使用 AutoMocking 容器来清理我的测试并使其不那么脆弱的想法。

我听说过 TDD/BDD 纯粹主义者反对使用它们的论点，例如：测试对象需要哪些依赖项并不是很明显，或者您可以添加您并不真正需要的依赖项。听起来都不是反对使用它们的特别有力的论据。

从我的角度来看，引入一个可以让我根据需要进行重构，根据业务需求删除和引入依赖项，而无需不断地返回测试并引入新的模拟/存根来编译代码。

AutoMocking 被认为是一种好/坏的做法吗？是否存在应该使用或不应该使用的特定情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T16:15:31.597

与任何工具或过程一样，使用它们有正确的时间和不正确的时间。没有什么是银弹。你必须问自己“这会帮助我完成工作吗？” 归根结底，我们的工作是提供最大的商业价值。
在进行绿地开发时，自动模拟没有那么有用。一切都是从头开始开发的，带有“传统”模拟的 TDD/BDD 技术效果很好。从理论上讲，依赖关系并没有发生太大的变化，当它们发生变化时，知道什么时候破坏可能会很好。

当处于维护模式（或处理遗留代码库）时，自动模拟可以证明是非常有益的。例如，您的任务是清理技术债务。这可能会涉及大量重构，并且能够将您的测试与这些更改隔离开来可以节省大量时间。请记住，如果您的代码有很多依赖项，它可能会破坏 SOLID 和 SOC，并且您将（或至少应该）进行许多不使用所有依赖项的测试。所以在这种情况下自动模拟是非常有益的。当然，还有许多其他例子也有帮助。

与任何工具一样，您必须确保它不会成为拐杖。利用 automocking 可以随意更改接口和 api 显然是一种反模式。但是如果使用得当，我发现它对我们的项目团队来说是一个巨大的好处。

它只需要在正确的场景中进行批判性思考和应用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T11:05:58.610

手动连接您的依赖项（并记住在单元测试中您的依赖项应该针对极少数主题对象（一个））让您知道什么时候有异味 - 这个类太大了，应该减少。也就是说，我认为自动模拟并不坏，但就像每个工具都应该谨慎使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T15:52:01.730

仅在依赖项开始产生气味的那一刻，自动模拟就开始有用了。Skimedic 的回答和 levelnis 的评论都指向同一个方向。因此，一般应**避免**这种做法，除非在您无法摆脱遗留/技术债务的情况下。即使在其中一些情况下，我认为最好表现得像不存在自动模拟一样，让团队速度的下降成为迫使管理层考虑进行一些重构的另一个原因；或者，如果它是一些不可避免的遗产，那就编写你自己的假建造者；与简单地使用自动模拟和看似简单的测试相比，增加的测试复杂性将是“危险区域”的更好标记。

而且，IMO，您根本不应该在新代码中使用它。

# ios - iOS后台进程类似Android AlarmManager

> ID：14337275
> 
> 赞同：10
> 
> 时间：2013-01-15T12:02:10.150
> 
> 标签：ios, background, task

我必须安排一个固定的任务，以固定的时间间隔检查来自互联网的一些信息。

进入 Android，我使用带有 setRepeating 的 AlarmManager，但我是 iOS 的新手。有一些类似的api可以帮助我吗？我需要一个在应用程序被操作系统杀死时仍然存在的任务。

你知道关于它的教程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:17:13.827

AFAIK 在 iOS 中，您无法实现在其主机应用程序被杀死后仍保持活动状态的服务，也只有几种类型的应用程序可以运行一些后台任务 - 请参阅[此处](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)的文档。您可以在服务器端执行任务并在需要用户注意时发送推送通知 - 如果只有用户允许您的应用接收推送通知。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T12:20:17.917

检查[Apple 的多任务指南](http://developer.apple.com/library/ios/DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW24)上的链接，该链接将 voip 标签添加到`UIBackgroundModes`Info.plist 中，并使用[setKeepAliveTimeout:handler:](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/setKeepAliveTimeout%3ahandler%3a) UIApplication 的方法在应用程序进入睡眠状态后根据需要重新启动它。

注意：为此，您需要获得 Apple 的特殊许可，并且大多数情况下 Apple 会拒绝此类应用。

另一个解决方案： -

您可以存储上次同步日期，如果当应用程序来自后台时同步日期已超过您的时间间隔，您可以开始同步您的数据。

希望这些信息对你有帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-04T05:40:30.507

你需要iOS的本地通知

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-02T20:44:00.530

我发现 UILocalNotification 是最好的选择。不幸的是，您无法触发应用程序打开，但您可以在设定的时间间隔收到通知显示。

[https://developer.apple.com/library/ios/documentation/iPhone/Reference/UILocalNotification_Class/index.html#//apple_ref/doc/c_ref/UILocalNotification](https://developer.apple.com/library/ios/documentation/iPhone/Reference/UILocalNotification_Class/index.html#//apple_ref/doc/c_ref/UILocalNotification)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-09T06:07:22.110

您可以使用**[NSBackgroundActivityScheduler](https://developer.apple.com/documentation/foundation/nsbackgroundactivityscheduler)**定期拉取一些东西。

# html - Rails 3 中的复杂单选按钮

> ID：14337277
> 
> 赞同：0
> 
> 时间：2013-01-15T12:02:18.087
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3

在 rails 3 中，我需要实现一个如下图所示的表单。

我的问题是在 Rails 中做这件事的好方法是什么。我需要将 params[:complete_deal]、params[:camcel_deal] 作为数组获取（例如：params[:complete_deal] = [ 1 ]、params[:cancel_deal] = [2, 4] 和 params[:dont_change] =[ 3])

![在此处输入图像描述](../Images/b25e62c4fee8d19b617e947093fd9254.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:47:23.600

我不知道你可以用普通的 html 做到这一点，但你可以看看你是否对这样的 html 数组有任何运气：[是否可以在 html 中有双重嵌套的输入标签数组？](https://stackoverflow.com/questions/1978664/is-it-possible-to-have-double-nested-input-tag-arrays-in-html?rq=1)

你可以拥有`<input type="radio" name="cancel_deal[]" value="#{row_id}" >`并且它应该创建`cancel_deal = { 0 => 2, 1 => 4 }`. 然后你可以像这样循环`cancel_deal.each { |r| r.values.first.do_something }`

# c++ - 精确的时间测量

> ID：14337278
> 
> 赞同：50
> 
> 时间：2013-01-15T12:02:20.260
> 
> 标签：c++, visual-studio-2010, chrono, ctime

我在 C++ 中使用 time.h 来测量函数的时间。

```
clock_t t = clock();
someFunction();
printf("\nTime taken: %.4fs\n", (float)(clock() - t)/CLOCKS_PER_SEC); 
```

但是，我总是将时间设为 0.0000。分开打印时，clock() 和 t 具有相同的值。我想知道是否有办法在 C++ 中精确测量时间（可能是纳秒级）。我正在使用VS2010。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2014-04-10T22:12:17.083

C++11 引入了[chrono API](http://www.cplusplus.com/reference/chrono/)，你可以使用获取纳秒：

```
auto begin = std::chrono::high_resolution_clock::now();

// code to benchmark

auto end = std::chrono::high_resolution_clock::now();
std::cout << std::chrono::duration_cast<std::chrono::nanoseconds>(end-begin).count() << "ns" << std::endl; 
```

对于更相关的值，最好多次运行该函数并计算平均值：

```
auto begin = std::chrono::high_resolution_clock::now();
uint32_t iterations = 10000;
for(uint32_t i = 0; i < iterations; ++i)
{
    // code to benchmark
}
auto end = std::chrono::high_resolution_clock::now();
auto duration = std::chrono::duration_cast<std::chrono::nanoseconds>(end-begin).count();
std::cout << duration << "ns total, average : " << duration / iterations << "ns." << std::endl; 
```

但请记住`for`循环和分配`begin`和`end`var 也使用一些 CPU 时间。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2013-01-15T12:04:23.633

我通常使用该[`QueryPerformanceCounter`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx)功能。

例子：

```
LARGE_INTEGER frequency;        // ticks per second
LARGE_INTEGER t1, t2;           // ticks
double elapsedTime;

// get ticks per second
QueryPerformanceFrequency(&frequency);

// start timer
QueryPerformanceCounter(&t1);

// do something
...

// stop timer
QueryPerformanceCounter(&t2);

// compute and print the elapsed time in millisec
elapsedTime = (t2.QuadPart - t1.QuadPart) * 1000.0 / frequency.QuadPart; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-15T12:47:37.837

以下我完全同意的文本引用自[Optimizing software in C++](http://www.agner.org/optimize/optimizing_cpp.pdf)（适合任何 C++ 程序员的好读物） -

> 如果时间间隔很短，时间测量可能需要非常高的分辨率。在 Windows 中，您可以使用 `GetTickCount`或 `QueryPerformanceCounter`函数进行毫秒分辨率。使用 CPU 中的时间戳计数器可以获得更高的分辨率，该计数器以 CPU 时钟频率计数。

有一个问题是“时钟频率可能会动态变化，并且由于中断和任务切换而导致测量不稳定”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T12:05:55.153

在 C 或 C++ 中，我通常如下所示。如果仍然失败，您可以考虑使用 rtdsc 函数

```
 struct timeval time;
      gettimeofday(&time, NULL); // Start Time

      long totalTime = (time.tv_sec * 1000) + (time.tv_usec / 1000);

          //........ call your functions here

        gettimeofday(&time, NULL);  //END-TIME

        totalTime = (((time.tv_sec * 1000) + (time.tv_usec / 1000)) - totalTime); 
```

# c# - Facebook 样式的 ASP.NET 按钮

> ID：14337285
> 
> 赞同：0
> 
> 时间：2013-01-15T12:02:39.693
> 
> 标签：c#, asp.net, css, facebook, button

我在 ASP.NET 中对 Facebook 按钮等按钮进行样式设置时遇到问题，可在此处找到：http: [//nicolasgallagher.com/lab/css3-facebook-buttons/](http://nicolasgallagher.com/lab/css3-facebook-buttons/)

我尝试使用`asp:Button`with `CssClass`set，它在大多数情况下都有效，但包含图像的按钮除外，例如：

```
class="uibutton icon add" 
```

如果我使用： Button 那么一切看起来都很好，但是如果不使用 JavaScript 来完成工作，我就无法连接到 C# 代码。

我希望我缺少一些简单的东西（我尝试在 CSS 中使用“背景”和“背景图像”但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:23:42.760

查看提供的链接，您似乎不能使用带有`<input>`标签的图标，只能使用`<button>`或`<a>`标签。幸运的是，它在服务器上的`<asp:LinkButton>`行为与 an 相同`<asp:Button>`，但在客户端呈现为`<a>`标签。

所以尝试使用`<asp:LinkButton CssClass="uibutton icon add" ... >`它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:34:57.810

由于只有一个元素，它应该可以工作。你能发布一个[JSFiddle](http://jsfiddle.net/)吗？

[Bootstrap 遇到了同样的问题，解决它的唯一方法（某种程度上）是使用此处](https://stackoverflow.com/questions/10352535/how-to-use-a-twitter-bootstrap-icon-inside-an-asp-net-button])描述的 LinkBut​​ton 。

# mysql - 在 MySQL 中使用 InnoDB 进行全文搜索

> ID：14337294
> 
> 赞同：7
> 
> 时间：2013-01-15T12:03:10.003
> 
> 标签：mysql, search, innodb, myisam

我有一个 MySQL 数据库（版本 5.5.28），其表如下：

```
products (InnoDB)
-------------------------------------------------
search_id     title               description
1             Levi Blue Jeans     Some cool jeans 
2             Gucci Handbag       Great accessory
3             Prada Dress         Beautiful dress 
```

我想在 MySQL 中做这样的事情：

```
SELECT MATCH(title) AGAINST ('Jeans') AS score, search_id, FROM search WHERE MATCH(title) AGAINST ('Jeans' IN BOOLEAN MODE) 
```

据我所知，你只能在 MyISAM 中做到这一点。是否可以使用 InnoDB 进行类似的搜索，而无需使用以下方法：

*   [狮身人面像](http://sphinxsearch.com/)
*   [弹性搜索](http://www.elasticsearch.org/)
*   [获取似乎还不稳定的 MySQL 5.6.4](http://blogs.innodb.com/wp/2011/12/innodb-full-text-search-in-mysql-5-6-4/)

对于我的应用程序（大约 1000 - 2000 条记录）Sphinx 等似乎有点矫枉过正。但是将每条记录放入一个数组并用 PHP 搜索它似乎也太多了。但也许你不同意。

PS。LIKE 似乎不适合我。结果通常不太准确，您无法像使用 MATCH 一样获得分数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-19T12:10:34.283

将文本列复制`products`到一个新的 MyISAM 表中。两者之间建立1-1的关系，并且为了保证InnoDB提供的ACID'ity，确保你总是和.myISAM表一起访问`products`。

您可能需要添加触发器`products`以保持双射。您还可以创建一个视图，以便在升级到 MySQL v5.6 时将应用程序中的返工降至最低（并放弃这种复杂的解决方法）。

这是[完整的 monty](http://sqlfiddle.com/#!2/d95a7/1)。

您可以完全移动它（即从 删除它`products`），而不是复制文本列。这会更有效率，但是当您想升级时，切换到仅限 InnoDB 的解决方案也会变得更加复杂。

# java - Java编写互斥锁的最快方法？

> ID：14337296
> 
> 赞同：5
> 
> 时间：2013-01-15T12:03:28.370
> 
> 标签：java, multithreading, performance, mutex

[互斥锁](http://en.wikipedia.org/wiki/Mutual_exclusion)在许多编程语言中非常常见，例如 C/C++。我在 Java 中想念他们。但是，我可以通过多种方式编写自己的`class Mutex`：

*   在 .上使用简单的同步关键字`Mutex`。
*   使用二进制[信号量](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)。
*   使用原子变量，就像[这里](https://stackoverflow.com/questions/4938617/implement-a-mutex-in-java-using-atomic-variables)讨论的那样。
*   ...？

**最快（最佳运行时）**方式是什么？我认为同步是最常见的，但是性能呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-15T12:07:19.597

> 互斥锁在许多编程语言中非常常见，例如 C/C++。我在 Java 中想念他们。

不确定我是否关注您（尤其是因为您在问题中给出了答案）。

```
public class SomeClass {
    private final Object mutex = new Object();

    public void someMethodThatNeedsAMutex() {
        synchronized(mutex) {
            //here you hold the mutex
        }
    }
} 
```

或者，您可以简单地使整个方法同步，这相当于使用`this`互斥对象：

```
public class SomeClass {

    public synchronized void someMethodThatNeedsAMutex() {
        //here you hold the mutex
    }
} 
```

> 最快（最佳运行时）方式是什么？

获取/释放监视器本身不会是一个重大的性能问题（您可以阅读[此博客文章](http://vanillajava.blogspot.co.uk/2012/12/can-synchronization-be-optimisede-away.html)以查看影响分析）。但是，如果您有许多线程争夺锁，则会产生争用并降低性能。

在这种情况下，如果您主要读取数据，最好的策略是通过使用“无锁”算法不使用互斥锁（正如 Marko 在评论中指出的那样，无锁使用 CAS 操作，这可能涉及多次重试写入如果你有很多写线程，最终会导致性能下降）甚至更好，避免跨线程共享太多东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T12:09:53.227

情况正好相反：Java 设计者解决得**非常好**，以至于您甚至都认不出它：您不需要一流的`Mutex`对象，只需要`synchronized`修饰符。

如果你有一个特殊的情况，你想以非嵌套的方式处理你的互斥锁，那么总是有`ReentrantLock`并且`java.util.concurrent`提供了一个远远超出原始互斥锁的同步工具的聚宝盆。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T12:21:42.250

在 Java 中，每个对象都可以用作互斥体。
这个对象通常被命名为“lock”或“mutex”。

您可以为自己创建该对象，这是首选的变体，因为它避免了对该锁的外部访问：

```
 // usually a field in the class
    private Object mutex = new Object();

    // later in methods
    synchronized(mutex) {
      // mutual exclusive section for all that uses synchronized
      // ob this  mutex object

    } 
```

更快的是通过考虑如果另一个线程读取非实际值会发生什么来避免互斥锁。在某些情况下，这会产生错误的计算结果，而在其他情况下只会产生最小的延迟。（但比同步更快）

书中详细解释

> Java并发实践

.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T12:19:34.370

> 最快（最佳运行时）方式是什么？

这取决于很多事情。例如，[`ReentrantLock`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html)曾经在争用情况下比 using 表现更好`synchronized`，但是当一个新的 HotSpot 版本（优化`synchronized`锁定）发布时，情况发生了变化。因此，任何一种锁定方式都没有任何固有的东西会偏爱一种互斥锁而不是另一种（从性能的角度来看）——事实上，“最佳”解决方案可以随着您正在处理的数据和您正在使用的机器而改变继续运行。

> 另外，为什么 Java 的发明者没有为我解决这个问题？

他们做到了——以多种方式：`synchronized`、[`Lock`s](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html)、原子变量，以及`java.util.concurrent`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T17:53:59.693

您可以运行每个变体的微基准测试，例如原子、同步、锁定。正如其他人所指出的，这在很大程度上取决于机器和使用的线程数。在我自己递增长整数的实验中，我发现在 Xeon W3520 上只有一个线程，同步胜过原子：原子/同步/锁定：8.4/6.2/21.8，每次递增操作的纳秒数。这当然是一个边界案例，因为从来没有任何争论。当然，在那种情况下，我们也可以看看非同步的单线程长增量，它比原子快六倍。
使用 4 个线程，我得到 21.8/40.2/57.3。请注意，这些都是所有线程的增量，因此我们实际上看到了减速。对于具有 64 个线程的锁来说，它会更好一些：22.2/45.1/45.9。
在使用 Xeon E7-4820 的 4 路/64T 机器上进行的另一项测试产生 1 线程：9.1/7.8/29.1、4 线程：18.2/29.1/55.2 和 64 线程：53.7/402/420。
再多一个数据点，这次是双 Xeon X5560，1T：6.6/5.8/17.8，4T：29.7/81.5/121，64T：31.2/73.4/71.6。
因此，在多插槽机器上，存在沉重的缓存一致性税。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-15T12:25:15.747

您可以像使用互斥锁或 java.util.concurrent.Semaphore 一样使用 java.util.concurrent.locks.Lock。但是使用 synchronized-keyword 是一种更好的方法:-)

问候安德烈

# c# - 如何有效地拆分具有不同块大小的列表？

> ID：14337297
> 
> 赞同：0
> 
> 时间：2013-01-15T12:03:38.903
> 
> 标签：c#, .net, linq, extension-methods

我有以下扩展方法将 a 拆分为具有不同块大小`List<T>`的 's 列表`List<T>`，但我怀疑它的效率。我可以做些什么来改进它，或者它现在还可以吗？

```
public static List<List<T>> Split<T>(this List<T> source, params int[] chunkSizes)
{
    int totalSize = chunkSizes.Sum();
    int sourceCount = source.Count();
    if (totalSize > sourceCount)
    {
        throw new ArgumentException("Sum of chunk sizes is larger than the number of elements in source.", "chunkSizes");
    }

    List<List<T>> listOfLists = new List<List<T>>(chunkSizes.Length);
    int index = 0;
    foreach (int chunkSize in chunkSizes)
    {
        listOfLists.Add(source.GetRange(index, chunkSize));
        index += chunkSize;
    }

    // Get the entire last part if the total size of all the chunks is less than the actual size of the source
    if (totalSize < sourceCount)
    {
        listOfLists.Add(source.GetRange(index, sourceCount - totalSize));
    }

    return listOfLists;
} 
```

示例代码用法：

```
List<int> list = new List<int> { 1,2,4,5,6,7,8,9,10,12,43,23,453,34,23,112,4,23 };
var result =  list.Split(2, 3, 3, 2, 1, 3);
Console.WriteLine(result); 
```

这得到了预期的结果，并且 a 有一个包含 4 个数字的最终列表部分，因为总块大小比我的列表大小小 4。

我特别怀疑这`GetRange`部分，因为我担心这只是一遍又一遍地列举相同的来源......

**编辑：**我想我知道一种枚举源的方法：只需对源本身进行 foreach 并继续检查迭代元素的数量是否与当前的块大小相同。如果是这样，添加新列表并转到下一个块大小。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:13:37.340

这段代码没有性能问题。[`GetRange`](http://msdn.microsoft.com/en-us/library/21k0e39c.aspx)记录为 O(chunkSize)，这也很容易推断，因为它最重要的属性之一`List<T>`就是它允许 O(1) 索引。

也就是说，您可以编写一个更 LINQ-y 版本的代码，如下所示：

```
var rangeStart = 0;
var ranges = chunkSizes.Select(n => Tuple.Create((rangeStart += n) - n, n))
                       .ToArray();
var lists = ranges.Select(r => source.GetRange(r.Item1, r.Item2)).ToList();

if (rangeStart < source.Count) {
    lists.Last().AddRange(source.Skip(rangeStart));
}

return lists; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T17:04:45.217

我建议使用此扩展方法将源列表按指定的块大小分块到子列表：

```
using System.Collections.Generic;
using System.Linq; 
```

...

```
/// <summary>
/// Helper methods for the lists.
/// </summary>
public static class ListExtensions
{
    public static List<List<T>> ChunkBy<T>(this List<T> source, int chunkSize) 
    {
        return source
            .Select((x, i) => new { Index = i, Value = x })
            .GroupBy(x => x.Index / chunkSize)
            .Select(x => x.Select(v => v.Value).ToList())
            .ToList();
    }
} 
```

# magento - Magento 1.7 - 将属性添加到 order_item 和设置值

> ID：14337300
> 
> 赞同：0
> 
> 时间：2013-01-15T12:03:56.157
> 
> 标签：magento, magento-1.7

我想添加一个新属性`order_item`

安装-0.1.0.php

```
$installer->addAttribute('order_item', 'xxx', array('type'=>'text', 'visible' => true, 'required' => false, 'is_user_defined' => true, 'note' => 'Field comment'));  
$installer->addAttribute('quote_item', 'xxx', array('type'=>'text', 'visible' => true, 'required' => false, 'is_user_defined' => true, 'note' => 'Field comment')); 
```

我看到 2 个新行`eav_attribute`

![截屏](../Images/6df12215de5bce07bec5c0eb79619581.png)

运行两次不会打印任何内容：

```
 $item = Mage::getModel('sales/order_item');
    $item->load(91);

    $item->setXxx("test");
    $item->setData("xxx", "test");

    print $item->getXxx();

    $item->save(); 
```

如何在订单项中设置和获取此属性的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:27:37.940

不幸的是`sales/order`，`sales/order_item`并没有继承或使用 Magento 中的 eav_attribute 结构。这篇博客文章很好地解释了它：[http ://www.krilion.net/blog/2012/08/adding-a-custom-attribute-to-a-magento-order/](http://www.krilion.net/blog/2012/08/adding-a-custom-attribute-to-a-magento-order/)

它的要点是您需要创建安装程序脚本以在平面表 ( `sales_flat_order_item`) 中创建一个新列，以便保存您的新值。只要平面表中有 xxx 列，您就应该能够保存您的 xxx 值。这意味着您的安装程序脚本需要扩展`Mage_Sales_Model_Mysql4_Setup`而不是`Mage_Eav_Model_Entity_Setup`.

# mysql - 在 SQL INSERT / UPDATE 查询中插入重复键而不是更新

> ID：14337303
> 
> 赞同：0
> 
> 时间：2013-01-15T12:04:01.867
> 
> 标签：mysql, wordpress, insert-update

我在 Wordpress 中有以下功能。但是，每次更新帖子时都会复制元键*product_price 。*

喜欢这张图片

![在此处输入图像描述](../Images/4eb44e2543d18aa2ab650293ef4d4f22.png)

有什么办法可以防止这种情况发生吗？

```
 function do_my_stuff($post_ID) {
global $post,$wpdb;
$tablename="wp_cart66_products";
if($post->post_type == "post" && strlen( get_post_meta($post_ID, 'price', true))>0        )
{
    $id = $wpdb->get_var("SELECT id FROM ".$tablename." WHERE id=".$post_ID);
    $cny = get_post_meta($post->ID, 'price', true);

   /*Shipping rate */
    if( $cny < 50 )
        $shipping = 14.97;

    else if( $cny >= 50 && $cny < 200 )

        $shipping = 22.59;  

       else if( $cny >= 200 && $cny < 250 )

        $shipping = 24.59;

        else if( $cny >= 250 && $cny < 300 )

        $shipping = 26.60;

    else if( $cny >= 300 )
        $shipping = 29.27;  

    /*Exchange rate  CNY to EURO */

    $cny_to_euro = 0.124;
    $euro =     $cny * $cny_to_euro ;   
    $price = $euro + $shipping;
    $price = number_format($price,2);
    $data=array(
        'id'=>$post_ID,
        'item_number'=>get_post_meta($post->ID, 'scode', true),
        'name'=>$post->post_title,
        'price'=>$price,
        'options_1'=>get_post_meta($post->ID, 'variations', true),
        'shipped'=>'1',
    );
    $where = array("id" => $post_ID);
    // Possible format values: %s as string; %d as decimal number; and %f as               float.
    $format=array( '%d', '%s', '%s', '%s', '%s', '%d');
    $where_format = array( '%d' );
    if($id>0){
        // update
        $wpdb->update( $tablename,$data, $where, $format, $where_format);
    }else{

        // insert
        $wpdb->insert( $tablename,$data,$format);
    }

    AddMetaPrice ( $post_ID ) ; 
}
return $post_ID;
          }
       function AddMetaPrice ( $post_ID ) 
          {
// init
global $post,$wpdb;

// We add the wordpress post ID and price to a meta tag
$metaKey = "product_price" ; 
$tableName = "wp_cart66_products" ; 
$metaQuery = "SELECT price FROM $tableName WHERE id='$post_ID'" ; 
$metaValue = $wpdb->get_var( $metaQuery ) ; 
$tableName = "wp_postmeta" ; 

// Do we have this post already?
if ( $id > 0 ) 
{
    // this already exists. we only need to update
    // $metaQuery = "UPDATE $tableName SET meta_value='$metaValue' WHERE                  meta_key='$metaKey' AND post_id='$id'" ; // we use wordpress's method instead
    $data = array ( "meta_value" => $metaValue ) ; 
    $where = array ( "meta_key" => $metaKey, "post_id" => $post_ID ) ; 
    $wpdb->update( $tableName, $data, $where ) ; 
}
else 
{
    // this is not created, we need to create it now (insert)
    // $metaQuery = "INSERT INTO $tableName (post_id, meta_key, meta_value)  VALUES ('$id', '$metaKey', '$metaValue')" ; // we use wordpress's method instead
    $data = array ( "post_id" => $post_ID, "meta_key" => $metaKey, "meta_value" => $metaValue ) ; 
    $wpdb->insert( $tableName, $data ) ; 
 }
    }
   add_action('publish_post', 'do_my_stuff'); 
```

我在这里[读到](http://www.endyourif.com/mysql-insert-or-update-in-one-sql-statement/)存在 ON DUPLICATE KEY 语句。但我不确定它是否可以在上面的代码中实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:54:44.057

尝试替换那段代码：

```
if ( $metaValue !== NULL ) 
{
   update_post_meta($post_ID, $metaKey, $metaValue); // use built-in function instead
} 
```

它在哪里：

```
// Do we have this post already?
if ( $id > 0 ) 
{
    // this already exists. we only need to update
    // $metaQuery = "UPDATE $tableName SET meta_value='$metaValue' WHERE                  meta_key='$metaKey' AND post_id='$id'" ; // we use wordpress's method instead
    $data = array ( "meta_value" => $metaValue ) ; 
    $where = array ( "meta_key" => $metaKey, "post_id" => $post_ID ) ; 
    $wpdb->update( $tableName, $data, $where ) ; 
} 
```

# c# - WP8 AudioPlaybackAgent 错误？

> ID：14337308
> 
> 赞同：2
> 
> 时间：2013-01-15T12:04:17.077
> 
> 标签：c#, windows-phone, windows-phone-8

`AudioPlaybackAgent`我在运行 WP8的设备上播放音轨时遇到问题。它在 WP7 上完美运行，但不适用于 WP8。它有时仅适用于 WP8，因此也没有关于如何重现它的明确步骤。问题似乎是，当一首新曲目即将播放并且我已将 设置`BackgroundAudioPlayer.Instance.Track`为新的`AudioTrack`时，它没有收到`onPlaystateChanged.TrackReady`。

为什么是这样？我也不收`onError`。

在 WP8 设备上播放音频是否存在已知错误？大约 50% 的时间会发生这种情况，同一条轨道既可以工作也可以不工作。这里有什么问题？请帮忙。任何来自微软的可以帮助解决这个问题？那将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:01:49.823

50% 的时间会发生这种情况，这让我怀疑这可能是 WP7 上没有发生的竞争条件。

更改曲目时，您是否从后台代理执行任何线程锁定（使用`Mutex`等）？`lock()`对于之前在 WP7 上工作的 WP8 后台音频应用程序，我有类似的东西，并将其追溯到我的代码中的死锁。

不要忘记 WP8 现在拥有双核处理器，并且更有可能遇到此类问题。请参阅[Windows Phone 团队中某人关于 WP8 和 7 之间的反向兼容的帖子](http://blogs.msdn.com/b/abhinaba/archive/2012/11/08/windows-phone-8-evolution-of-the-runtime-and-application-compatibility.aspx)。特别有趣的是该帖子中名为“运行时行为更改”的部分。

# view - 修改联系人关联视图以包括潜在客户

> ID：14337313
> 
> 赞同：0
> 
> 时间：2013-01-15T12:04:26.690
> 
> 标签：view, entity, criteria, crm, contact

我们有显示所有客户的联系人关联视图。这些人从高街商店或网上购买了一件或多件商品。但我们也有一组顾客去商店注册新闻信件和优惠。在我们的设置中，这些称为 PROSPECT。

我当前的视图（联系人关联视图）仅显示客户但不显示潜在客户，我想知道将他们包含在此视图中的最佳方式是什么？我不想创建另一个自定义视图，因为我不知道标准是什么。

此外，是否有任何方法可以找出用于创建联系人关联视图的标准以及在其中进行更改是否可行。

任何指导或教程链接将不胜感激。

非常感谢

编辑：我设法在 CONTACT 下创建一个自定义视图，该视图应该列出从该商店购买或未购买商品的所有客户。简单的检查，例如 Customer 等于 y;n

但是当我从这个视图查看联系人时，它只列出了购买的客户。是否有任何主要条件覆盖了这个条件或者我错过了什么？（*如果我听起来很愚蠢，请原谅我，但我来自主要 CSS 规则接管本地 CSS 规则的 SharePoint 世界*）

# c# - 从 c# 类创建 JSON 对象

> ID：14337314
> 
> 赞同：0
> 
> 时间：2013-01-15T12:04:28.450
> 
> 标签：c#, javascript, asp.net-mvc, json

我有一个看起来像这样的视图模型：

```
public class CategoriesJsonViewModel
{
    public int Id { get; set; }
    public string Title { get; set; }
    public List<Description> UsedDescriptions { get; set; }
    public List<Description> UnusedDescriptions { get; set; }
} 
```

我正在我的控制器中创建一个 CategoriesJsonViewModel 列表，并尝试以 Json 格式将其发送到客户端浏览器。我使用 Json() 方法来做到这一点：

```
List<CategoriesJsonViewModel> categoriesVM = new List<CategoriesJsonViewModel>();
List<Category> categories = repo.GetAllCategories();
foreach(var i in categories)
{
            CategoriesJsonViewModel categoryVM = new CategoriesJsonViewModel();
            categoryVM.Id = i.Id;
            categoryVM.Title = i.Title;
            categoriesVM.Add(categoryVM);
            categoryVM.UsedDescriptions = repo.GetUsedDescriptions(i.Id);
            categoryVM.UnusedDescriptions = repo.GetUnusedDescriptions(i.Id);
 }

 return Json(categoriesVM); 
```

虽然 categoriesVM 对象正在正确构建，但由于某种原因，我没有从中获得适当的 Json 对象。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:04:35.410

我建议您获取输出的 json 并放入[jsonlint.com](http://jsonlint.com)

这将帮助您找出导致 json 无效的原因。这可能与您对 Description 对象的定义有关，因为您的 CategoriesJsonViewModel 看起来应该没问题。

# jquery - jQuery 冲突（不在 Chrome 中）

> ID：14337320
> 
> 赞同：0
> 
> 时间：2013-01-15T12:04:40.570
> 
> 标签：jquery

我正在编写一个小部件并且依赖于 jQuery，所以我需要使用 noconflict 以避免网站所有者也在运行 jQuery 的页面出现问题。

到目前为止我有这个：

```
(function () {

    var js13;

var script = document.createElement('script');
script.src = 'http://xxx.xxx.xxx.xxx:8080/socket.io/socket.io.js';
script.type = 'text/javascript';
document.getElementsByTagName('head')[0].appendChild(script);

var script = document.createElement('script');
script.src = 'http://code.jquery.com/jquery-1.8.3.js';
script.type = 'text/javascript';
document.getElementsByTagName('head')[0].appendChild(script);

var script = document.createElement('script');
script.src = 'http://code.jquery.com/ui/1.9.2/jquery-ui.js';
script.type = 'text/javascript';
document.getElementsByTagName('head')[0].appendChild(script);
script.onload = scriptLoadHandler;      

function scriptLoadHandler() {
    js13 = window.jQuery.noConflict(true);

    main();

}

/******** Main function ********/
function main() {
    js13(document).ready(function ($) {

     main widget code is here.....

} // main

})(); 
```

有什么想法可能是错的吗？我得到（Safari）：

```
Type Issue
'undefined' is not an object (evaluating 'window.jQuery.noConflict') 
```

需要它在所有浏览器中工作，无论页面运行什么 jQuery 或其他脚本。

另一个问题是[http://xxx.xxx.xxx.xxx:8080/socket.io/socket.io.js](http://xxx.xxx.xxx.xxx:8080/socket.io/socket.io.js)并不总是加载..

我需要在其他加载之前加载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:14:53.523

这只会回答您问题的一部分，但我无法将其放入评论框中。因此，关于脚本问题，一种可能的解决方案可能是：

```
$.ajax({
    url: 'http://xxx.xxx.xxx.xxx:8080/socket.io/socket.io.js',
    dataType: 'script',
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        //couldn't load the script
    },
    success:function(){ 
        //script has loaded, do stuff here
    } 
```

});

您的其他问题的一个可能解决方案可能是简单地检查是否已经加载了 jQuery：

```
if(typeof jQuery !== 'undefined')
     //jquery is loaded 
```

# mysql - 使用 php 脚本的 mysql 搜索查询的效率

> ID：14337324
> 
> 赞同：0
> 
> 时间：2013-01-15T12:04:57.137
> 
> 标签：mysql, performance

我希望有人了解mysql和mysql（php脚本）中的查询效率，可以给我一些关于以下两种方法中哪种方法更有效的指导。

简化了很多事情，我有两个 mysql 表。

表 A = 200 个单词，每个单词是一个标签。表 B = 每 4 小时上传 8 个标题，因此，每天总共上传 (8 x 6) = 48 个标题，每个标题平均有 10 个单词。

我有一个 php 脚本，在每天结束时，获取表 A 中的每个单词，查看是否在 48 个标题中的任何单词中找到它，如果找到，然后用找到的词。目前，脚本运行良好。

所以基本上它所做的是在 48 个标题中进行 200 次搜索，并在找到表 a 中的一个单词时适当地标记每个标题。

现在，我对网站进行了更改，并希望标记这些标题，而不是每天一次，每 4 小时一次。因此，每次脚本标记时，它只需要标记 8 个新闻（而不是 48 个）并执行相同的 200 次搜索，但仅在 8 个标题中而不是在 48 个标题中进行。它将每天执行 6 次此操作。

更改脚本是否会更有效率，因此与其在 8 个标题（总共有（8 x 10 = 80 个单词）中进行 200 次搜索，不如颠倒它的方式？这意味着，以另一种方式更改它轮所以它看起来是否在表 A 的 200 个单词中出现了 80 个单词（出现在表 B 的 8 个标题中）？

在某些时候，每 2 小时会收集一次标题（因此只有 4 个标题），然后是 1 个（所以 2 个标题），因此要使用脚本更新的“标题”数量会随着时间的推移而减少。

改变脚本的工作方式会更有效吗？改进是否足够相关？

我在想，如果走这条路是要走的路，那么最佳方式可能是双向进行，也就是说，首先看看它要标记多少个标题和多少个标签。如果需要标记多于 X 个标题，则使用脚本 A（实际脚本），但如果需要标记少于 X 的标题，则使用新脚本 B。

我已经解释了这一点，并在小范围内对其进行了简化。该脚本现在在 200 个不同的站点（未来还会有更多）中运行（每个站点都有不同数量的标签和不同数量的每小时要标记的标题），并且很快可以在更多站点上运行，因此改进脚本处理这个问题的效率如何，可以大大提高网站的整体效率。

做这个改变有意义吗？是否可以进行计算以查看此更改何时有意义或如何计算我可能获得的效率可能提高

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:37:08.653

您的数字似乎足够低，以至于任何工作方法对我来说都足够快。要真正判断更改是否重要，您必须对事物进行基准测试，因为这方面的计算很难制定，因为它们取决于*很多*因素。

也就是说，我相信从标题中提取单词并在标签表中搜索它应该比当前的实现更快。我的推理不是基于单词的数量，而是基于索引的使用：标签列表通常是非常静态的，并且在标签词上有一个索引，您将在其中寻找完全匹配的， 正确的？另一方面，标题会经常更改，以至于为其创建索引实际上可能会降低性能。由于您将寻找子字符串匹配，因此普通（即非全文）索引将没有任何用处。

所以我想说确保标签列表有一个正确的索引。当新标题出现时，将它们拆分为 PHP 中的单词，然后将这些单词与索引一起插入到临时 MySQL 表中。然后您可以发出单个更新查询来添加所有标签，然后删除临时表。更新看起来像这样：

```
INSERT INTO post_tags (post_id, tag_id)
SELECT temp_words.post_id, tags.id
FROM temp_words INNER JOIN tags ON temp_words.word = tags.name 
```

这假设您有一个表`post_tags`，其中每一行表示一个帖子上的一个标签，正确的数据库规范化需要它的方式。`temp_tags`是保存新处理标题单词的表。

# django - Heroku 上的 uwsgi

> ID：14337325
> 
> 赞同：2
> 
> 时间：2013-01-15T12:04:59.680
> 
> 标签：django, heroku, uwsgi

我正在为 Heroku 上的 Django 应用程序寻找有效的 uwsgi 配置。

目前我有

```
uWSGI==1.4.4 
```

在`requirements.txt`和：

```
# this is in a single line:
web: uwsgi --http-socket=$PORT --home=$HOME 
           --module="myapp.wsgi:application"
           --master --vacuum --processes=1 --plugins=python 
           --virtualenv="/app/.heroku/python/" 
```

在`Procfile`. 但这失败了：

```
2013-01-15T11:48:17+00:00 app[web.1]: open("./python_plugin.so"): No such file or directory [core/utils.c line 4733]
2013-01-15T11:48:17+00:00 app[web.1]: machine: x86_64
2013-01-15T11:48:17+00:00 app[web.1]: !!! UNABLE to load uWSGI plugin: ./python_plugin.so: cannot open shared object file: No such file or directory !!!
2013-01-15T11:48:17+00:00 app[web.1]: nodename: 71650ed5-006c-4395-8be5-276408f42efb
2013-01-15T11:48:17+00:00 app[web.1]: os: Linux-2.6.32-350-ec2 #57-Ubuntu SMP Thu Nov 15 15:59:03 UTC 2012
2013-01-15T11:48:17+00:00 app[web.1]: *** Starting uWSGI 1.4.4 (64bit) on [Tue Jan 15 11:48:17 2013] ***
2013-01-15T11:48:17+00:00 app[web.1]:
lock engine: pthread robust mutexes
2013-01-15T11:48:17+00:00 app[web.1]: detected max file descriptor number: 10000
2013-01-15T11:48:17+00:00 app[web.1]: current working directory: /app
2013-01-15T11:48:17+00:00 app[web.1]: detected binary path: /app/.heroku/python/bin/uwsgi
2013-01-15T11:48:17+00:00 app[web.1]: your processes number limit is 256
2013-01-15T11:48:17+00:00 app[web.1]: detected number of CPU cores: 4
2013-01-15T11:48:17+00:00 app[web.1]: uwsgi socket 0 bound to UNIX address 25699 fd 3
2013-01-15T11:48:17+00:00 app[web.1]: clock source: unix
2013-01-15T11:48:17+00:00 app[web.1]: *** Operational MODE: single process ***
2013-01-15T11:48:17+00:00 app[web.1]: compiled with version: 4.4.3 on 15 January 2013 11:11:38
2013-01-15T11:48:17+00:00 app[web.1]: Python version: 2.7.2 (default, Oct 31 2011, 16:22:04)  [GCC 4.4.3]
2013-01-15T11:48:17+00:00 app[web.1]: Set PythonHome to /app/.heroku/python/
2013-01-15T11:48:17+00:00 app[web.1]: your memory page size is 4096 bytes
2013-01-15T11:48:17+00:00 app[web.1]: Python main interpreter initialized at 0x123dd80
2013-01-15T11:48:17+00:00 app[web.1]: *** Python threads support is disabled. You can enable it with --enable-threads ***
2013-01-15T11:48:17+00:00 app[web.1]: your server socket listen backlog is limited to 100 connections
2013-01-15T11:48:17+00:00 app[web.1]: mapped 144784 bytes (141 KB) for 1 cores
2013-01-15T11:48:17+00:00 app[web.1]: Traceback (most recent call last):
2013-01-15T11:48:17+00:00 app[web.1]:   File "./myapp/wsgi.py", line 23, in <module>
2013-01-15T11:48:17+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 8, in <module>
2013-01-15T11:48:17+00:00 app[web.1]:     from django.core.wsgi import get_wsgi_application
2013-01-15T11:48:17+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/wsgi.py", line 1, in <module>
2013-01-15T11:48:17+00:00 app[web.1]:     from django import http
2013-01-15T11:48:17+00:00 app[web.1]:     from django.core.handlers.wsgi import WSGIHandler
2013-01-15T11:48:17+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/http/__init__.py", line 116, in <module>
2013-01-15T11:48:17+00:00 app[web.1]:     from django.utils.crypto import constant_time_compare, salted_hmac
2013-01-15T11:48:17+00:00 app[web.1]:     from django.core import signing
2013-01-15T11:48:17+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/utils/crypto.py", line 13, in <module>
2013-01-15T11:48:17+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/site-packages/django/core/signing.py", line 42, in <module>
2013-01-15T11:48:17+00:00 app[web.1]:     from os import urandom as _urandom
2013-01-15T11:48:17+00:00 app[web.1]: ImportError: cannot import name urandom
2013-01-15T11:48:17+00:00 app[web.1]:     import random
2013-01-15T11:48:17+00:00 app[web.1]:   File "/app/.heroku/python/lib/python2.7/random.py", line 47, in <module>
2013-01-15T11:48:17+00:00 app[web.1]: *** no app loaded. going in full dynamic mode ***
2013-01-15T11:48:17+00:00 app[web.1]: unable to load app 0 (mountpoint='') (callable not found or import error)
2013-01-15T11:48:17+00:00 app[web.1]: spawned uWSGI master process (pid: 2)
2013-01-15T11:48:17+00:00 app[web.1]: *** uWSGI is running in multiple interpreter mode ***
2013-01-15T11:48:17+00:00 app[web.1]: spawned uWSGI worker 1 (pid: 3, cores: 1)
2013-01-15T11:49:17+00:00 heroku[web.1]: Error R10 (Boot timeout) -> Web process failed to bind to $PORT within 60 seconds of launch
2013-01-15T11:49:17+00:00 heroku[web.1]: Stopping process with SIGKILL
2013-01-15T11:49:18+00:00 heroku[web.1]: Process exited with status 137
2013-01-15T11:49:18+00:00 heroku[web.1]: State changed from starting to crashed 
```

我猜第二个错误 ( `ImportError: cannot import name urandom`) 可能是第一个错误 ( `open("./python_plugin.so"): No such file or directory`)的结果

该应用程序在默认的 Django 开发 HTTP 服务器上运行良好。

任何想法如何解决这一问题？非常欢迎指向工作配置的指针。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T19:03:16.470

当您使用 pip 安装 uwsgi 时，默认情况下会内置 python（和 gevent）插件，因此您可以删除 --plugin 选项。--vacuum 仅适用于 unix 套接字（您在 heroku 上使用 tcp 套接字）。--home 和 --virtualenv 是同义词（我建议你使用 --virtualenv 因为它更有意义）。最后关于 urandom 问题，请在此处查看：[https ://bugs.launchpad.net/ubuntu/+source/python-defaults/+bug/989856](https://bugs.launchpad.net/ubuntu/+source/python-defaults/+bug/989856)

# c++ - 检查字符

> ID：14337330
> 
> 赞同：0
> 
> 时间：2013-01-15T12:05:06.607
> 
> 标签：c++, string, compare

如何检查字符数组？例如，我正在制作一个要求我输入密码的程序，比如说**ZEZO**，然后它会检查它是否正确，然后打印“ **hello zezo** ”。我目前正在使用 turbo c++ 做学校的东西。我有一个示例程序：

```
#include <iostream.h>
#include <conio.h>

void main()
{
    clrscr();
    char * zezo;
    zezo = "Zezo";

    cout<<"Hello "<<zezo;
} 
```

我只需要知道如何检查单词。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T12:07:29.773

使用 a[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)代替 a `char*`，然后使用其中一个`operator ==`或`compare`来检查字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T12:10:08.290

`iostream.h`和`conio.h`？`void main`? 尽快找到新的学习材料，因为无论你从中学习什么，都非常糟糕。

```
#include <iostream>
#include <string>

int main() {
    std::string s;
    std::cin >> s;
    if (s == "Zezo")
        // Cool
    else
        // Not cool 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:07:18.077

[strcmp](http://www.cplusplus.com/reference/cstring/strcmp/)

```
bool matches = strcmp(zezo, "ZEZO") == 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T12:09:41.167

搜索 strcmp 和更好的 std::string 和相关函数

# php - 在 php 和 mysql 中创建图形

> ID：14337335
> 
> 赞同：0
> 
> 时间：2013-01-15T12:05:24.997
> 
> 标签：php, mysql, graph

我有一个像附图一样的数据库。![在此处输入图像描述](../Images/92fbb1c294e853763572d479532b0180.png)

通过该表，我需要绘制这样的图表![在此处输入图像描述](../Images/f4adb0be5bc2de7b74b9c0101705433f.png)

怎么做？我尝试过使用以下代码：

```
function get_number($hour){
$sql = "SELECT count(POPUP)+count(`DETAIL`)+count(`DETAIL`)+count(`CALL`)+count(`MESSAGE`)+count(`ROUTE`)+count(`SHARE`)+count(`MAP`)+count(`INFO`)+ count(`WEBSITE`) as cp
FROM campaign_logs WHERE EXTRACT(HOUR FROM logDate)=".$hour;    
    $res = mysql_fetch_array(mysql_query($sql));
    return $res['cp'];
}

$sql = "SELECT count(POPUP)+count(`DETAIL`)+count(`DETAIL`)+count(`CALL`)+count(`MESSAGE`)+count(`ROUTE`)+count(`SHARE`)+count(`MAP`)+count(`INFO`)+ count(`WEBSITE`) as cp,EXTRACT(HOUR FROM logDate) as h
FROM campaign_logs GROUP BY EXTRACT(HOUR FROM logDate)";
$res = mysql_query($sql);

$values=array(
"1" => get_number(1),
"2" => get_number(2),
"3" => get_number(3),
"4" => get_number(4),
"5" => get_number(5),
"6" => get_number(6),
"7" => get_number(7),
"8" => get_number(8),
"9" => get_number(9),
"10" => get_number(10),
"11" => get_number(11),
"12" => get_number(12),
"13" => get_number(13),
"14" => get_number(14),
"15" => get_number(15),
"16" => get_number(16),
"17" => get_number(17),
"18" => get_number(18),
"19" => get_number(19),
"20" => get_number(20),
"21" => get_number(21),
"22" => get_number(22),
"23" => get_number(23),
"24" => get_number(24)
);

$img_width=600;
$img_height=400; 
$margins=20;
$graph_width=$img_width - $margins * 2;
$graph_height=$img_height - $margins * 2; 
$img=imagecreate($img_width,$img_height);
$bar_width=20;
$total_bars=count($values);
$gap= ($graph_width- $total_bars * $bar_width ) / ($total_bars +1); 
$bar_color=imagecolorallocate($img,0,64,128);
$background_color=imagecolorallocate($img,240,240,255);
$border_color=imagecolorallocate($img,200,200,200);
$line_color=imagecolorallocate($img,220,220,220); 
imagefilledrectangle($img,1,1,$img_width-2,$img_height-2,$border_color);
imagefilledrectangle($img,$margins,$margins,$img_width-1-$margins,$img_height-1-$margins,$background_color); 
$max_value=max($values);
$ratio= $graph_height/$max_value; 
$horizontal_lines=20;
$horizontal_gap=$graph_height/$horizontal_lines;
for($i=1;$i<=$horizontal_lines;$i++){
$y=$img_height - $margins - $horizontal_gap * $i ;
imageline($img,$margins,$y,$img_width-$margins,$y,$line_color);
$v=intval($horizontal_gap * $i /$ratio);
imagestring($img,0,5,$y-5,$v,$bar_color);
}
for($i=0;$i< $total_bars; $i++){
list($key,$value)=each($values);
$x1= $margins + $gap + $i * ($gap+$bar_width) ;
$x2= $x1 + $bar_width;
$y1=$margins +$graph_height- intval($value * $ratio) ;
$y2=$img_height-$margins;
imagefilledrectangle($img,$x1,$y1,$x2,$y2,$bar_color);
imagestring($img,0,$x1+3,$y1-10,$value,$bar_color);
imagestring($img,0,$x1+3,$img_height-15,$key,$bar_color);
} 

header("Content-type:image/png");
imagepng($img); 
```

但它是不同的东西。它不是单独计算的。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:26:51.993

好吧，我会推荐你​​ Am Charts。最好的！

[上午图表](http://www.amcharts.com/)

您可以使用 json_encode 转换您的查询结果，以便 javascript 可以读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:08:43.463

有一个名为 Highcharts 的 Jquery 插件。你可以使用这个。请参考以下链接

[http://www.highcharts.com/](http://www.highcharts.com/)

# php - 如何在警报中显示正确的数字

> ID：14337345
> 
> 赞同：0
> 
> 时间：2013-01-15T12:05:52.177
> 
> 标签：php, jquery, html

我对警报中显示的问题编号有疑问。它不显示问题编号，而是将问题 ID 显示为问题编号。因此，在警报验证中，它说明了例如：

```
You have errors on question number: 115 
```

`You have errors on question number: 3`例如，当它应该说时

现在这段代码显示问题ID：`value="<?php echo$questionId?>"`

此代码显示问题编号：`echo$searchQuestionNo[array_search($questionId, $searchQuestionId)]`

但是当我尝试这样做时：

```
<input type='hidden' id='num_groups' name='num_groups' value='<?php echo$searchQuestionNo[array_search($questionId, $searchQuestionId)]`?>'> 
```

它不显示 jquery 警报的问题编号。老实说，发生的事情是验证不起作用，因为它没有出现。但是，如果我将上面的代码保留为问题 id 是哪个值：

```
<input type='hidden' id='num_groups' name='num_groups' value='<?php echo$questionId?>'> 
```

然后它在警报中显示 questionId 并且警报实际上有效。

所以我的问题是我如何在警报中包含问题编号值，同时又能够使验证正常工作，就像对 questionid 所做的那样？

以下是主要代码，因此您可以查看所有内容的来源：

**PHP：**

```
 <?

       // This will hold the search results
    $searchQuestionId = array();
    $searchQuestionNo = array();

    // Fetch the results into an array

   // get result and assign variables (prefix with db)
$stmt->bind_result($dbSessionId, $dbSessionName, $dbQuestionId, $dbQuestionNo, $dbQuestionContent, $dbAnswer, $dbAnswerId, $dbQuestionMarks, $dbOptionId, $dbOptionType);

        $searchQuestionId[] = $dbQuestionId;
        $searchQuestionNo[] = $dbQuestionNo;
      } 

?>

</head>

<body>

<form id="PenaltyMarks" action="<?php echo htmlentities($action); ?>" method="post">

<?php

$ques_ans = array();    //to store incorrect answers against ques no.

$q_occ_count = array_count_values($searchQuestionId);
foreach($searchQuestionId as $key => $questionId)
{
.....
}

?>
<table id='penaltytbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='questionth'>Question</th>
</tr>
</thead>
<tbody>
<?php

foreach($ques_ans as $questionId => $inc_ans)
{

?>

<tr class="questiontd">

<td class="questionnumtd q<?php echo$searchQuestionNo[array_search($questionId, $searchQuestionId)]?>_qnum" rowspan="<?php echo$q_row_span?>"><?php echo$searchQuestionNo[array_search($questionId, $searchQuestionId)]?>
<input type="hidden" name="numQuestion" value="<?php echo$questionId?>" />
    </td>

<td class="answermarkstd">
<input class="individualMarks q<?php echo$questionId?>_mark"  q_group="1" name="answerMarks[]" type="text" data-type="qmark" data-qnum="<?php echo$questionId?>" onkeypress="return isNumberKey(event)" maxlength="3" value="0" />
</td>

</tr>
<?php
}

?>
</tbody>
</table>

<p>
<input type='hidden' id='num_groups' name='num_groups' value='<?php echo$questionId?>'>
<input id="submitBtn" name="submitPenalty" type="submit" value="Submit Marks" />
</p>

</form> 
```

**查询：**

```
 < script type = "text/javascript" >

    myClickHandler = function (e) {
      var ng = $('#num_groups').val();
      for (var group = 1; group 
           <= ng; group++) {
        if (!validation(group)) return false;
      }

    });

    function validation(group) {
      var msg = [];

      var nb = 0; // Number of blank values
      $("input[data-qnum='" + group + "']").each(function () {
        if ($(this).val() == '') {
          nb++;
          return false;
        }
      });
      if (nb != 0) {
        msg.push("\u2022 You have not entered in a value in all the Penalty Marks textbox \n");
      }

      if (msg.length >
          0) {
        alert("You have errors on Question Number: " + group + "\n\n" + msg.join("\n"));
        return false;
      } else {
        return true;
      }
    }

    < /script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:02:57.360

我假设，正如您所说，此代码允许检索问题编号：

```
echo$searchQuestionNo[array_search($questionId, $searchQuestionId)] 
```

* * *

`q_number`在输入元素中添加您的问题编号作为属性：

```
<input class="individualMarks q<?php echo$questionId?>_mark" q_number="<?php echo $searchQuestionNo[array_search($questionId, $searchQuestionId)]; ?>" q_group="1" name="answerMarks[]" type="text" data-type="qmark" data-qnum="<?php echo$questionId?>" onkeypress="return isNumberKey(event)" maxlength="3" value="0" /> 
```

并在您的`validation`功能中使用它

```
function validation(group) {
  var msg = [];

  var qNumber = null;

  var nb = 0; // Number of blank values
  $("input[data-qnum='" + group + "']").each(function () {

    //Assign the question number
    qNumber = $(this).attr('q_number');

    if ($(this).val() == '') {
      nb++;
      return false;
    }
  });
  if (nb != 0) {
    msg.push("\u2022 You have not entered in a value in all the Penalty Marks textbox \n");
  }

  //Use qNumber instead of the group variable
  if (msg.length > 0) {
    alert("You have errors on Question Number: " + qNumber + "\n\n" + msg.join("\n"));
    return false;
  } else {
    return true;
  }
} 
```

# javascript - 我可以阻止 Chrome 开发者工具控制台记录图像 404 错误吗？

> ID：14337351
> 
> 赞同：73
> 
> 时间：2013-01-15T12:05:58.480
> 
> 标签：javascript, image, google-chrome-devtools

每次找不到页面资产（包括图像）时，Chrome 开发者工具控制台都会记录一个错误（即返回 404）。

在我的工作中，我经常在图像由第三方提供并且在开发过程中可能不可用的网站上工作。让每个丢失的图像在控制台中显示为错误会使其他更重要的错误（例如 JavaScript 错误）更难注意到。

是否有阻止控制台将未找到的图像记录为错误的设置？

或者是否有某种方法可以按照您可以在“网络”选项卡中过滤请求的相同标准过滤控制台消息？

（参见例如[http://chromium.googlecode.com/issues/attachment?aid=1337330000000&name=Screenshot-Google%2B+-+Google+Chrome.png&token=1F05er8uKjAQEEBrUITFjsIGJ2A%3A1358867878658&inline=1](http://chromium.googlecode.com/issues/attachment?aid=1337330000000&name=Screenshot-Google%2B+-+Google+Chrome.png&token=1F05er8uKjAQEEBrUITFjsIGJ2A%3A1358867878658&inline=1)）

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-20T18:07:58.563

Chromium 团队已经“开始”工作：[https ://code.google.com/p/chromium/issues/detail?id=96212](https://code.google.com/p/chromium/issues/detail?id=96212)

**更新：**该功能请求已于 2013 年 3 月 18 日关闭。我不确定此功能首次出现在哪个版本的 Chrome 中，但我可以在我的 Chrome v33.0.1750.152 (Linux) 中确认控制台过滤选项。

**更新 2：**目前，当输入过滤器（纯文本或正则表达式）时，会针对消息文本（例如`GET http://example.com/foobar 404 (Not Found)`）以及右侧链接的文本（例如`test.html:65`）进行测试。（我已经向 Chromium 提交了一个[问题](https://code.google.com/p/chromium/issues/detail?id=375633)来跟踪这个问题。）

作为一种解决方法，请使用正则表达式过滤器，例如：

`^(?!.* 404 \(Not Found\))(?!.*[file name])`

`[file name]`右侧链接中的文件名在哪里。

例如，如果我的页面是`test.html`，那么`^(?!.* 404 \(Not Found\))(?!.*test\.html)`将起作用。

注意：这还将过滤掉消息文本中具有文件名的消息。我不确定现在有没有办法解决这个问题。

**更新（2019-06-05）：**此表达式将在我当前版本的 Chrome（75.0.3770.80）中过滤掉 404：

```
-/404\s\(Not\sFound\)$/ 
```

在处理每个标记之前，过滤似乎首先用空格分割过滤器字符串，但它也会在正则表达式内分割空格，所以`\s`'s 是必要的。

从技术上讲，这将过滤掉任何以（不区分大小写）字符串“404（未找到）”结尾的消息，包括`console.log`消息。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-04-07T19:45:17.540

在 chrome 开发人员工具中，它位于“控制台”选项卡下。单击“过滤器”，它将作为复选框出现在过滤器行上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:44:15.923

作为替代答案，您可以在开发服务器上运行一些 javascript 来更改有问题的图像的 src 属性（只要确保不将其发布到生产环境！）。

如果您不想实际将 javascript 添加到页面（可以理解），您可以通过 chrome 插件（也许是greasemonkey chrome clone - tampermonkey）在页面加载时运行[脚本](http://en.wikipedia.org/wiki/Greasemonkey)。

nb 感谢您的反馈，特别是要使其正常工作，它需要在 dom 准备好之后和图像加载之前发生在事件中。

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2013-01-23T12:27:21.950

在您的应用程序中，在您的“catch”语句中.. 在“console.warn”下记录异常.. 知道它适用于 firebug。在 Firebug 中，您可以在“警告”选项卡下找到这些“错误”。我想 Chrome 开发者工具也是如此。

实际上一天前做了类似的事情..我的应用程序会因某些错误而停止，所以，我改用了“try”和“catch”块。我的捕获看起来像：catch (e) { console.warn(e); }

# antlr - ANTLR 语法中的电子表格 FixedCell 参考（$a$1、$a1、a$1 等）问题

> ID：14337356
> 
> 赞同：2
> 
> 时间：2013-01-15T12:06:06.013
> 
> 标签：antlr, grammar, lexer

我正在编辑 Web 电子表格的功能，我需要在其中识别单元格引用、范围引用，然后根据我的要求对它们进行着色。我能够识别单元格引用并为其着色，但无法识别固定单元格引用（$a$1、$a1、a$1 等），因为它在输入美元（'$'）符号后抛出错误。谁可以帮我这个事。

当我尝试将单元格引用输入为“$A$1”时，在为行引用输入第二个美元符号后它不会抛出任何可行的异常，我不知道为什么。如何读取“$”符号以识别固定单元格引用？

仅供参考，我已经扩展了 @ [antlr3 找到的语法 - 生成解析树](https://stackoverflow.com/questions/5981206/antlr3-generating-a-parse-tree)

我正在使用语法进行单元格/范围参考，如下所示

```
CELLREFERENCE
    :  '$'?('a'..'z'|'A'..'Z')+'$'?('0'..'9')+
    ;

RANGEREFERENCE
    : '$'?('a'..'z'|'A'..'Z')+'$'?('0'..'9')+ ':' '$'?('a'..'z'|'A'..'Z')+'$'?('0'..'9')+
    ;

This will work for identifying the colon,

RANGEREFERENCE : CELLREFERENCE ((':' CELLREFERENCE)=> ':' CELLREFERENCE)?;

Still not sure about the '$' issue in cell reference. 
```

请在此处找到完整的语法：

```
grammar Excel;

options {
  output=AST;
  language=JavaScript;
}

tokens {
    // define pseudo-operations
    FUNC;
    CALL;
    NEGATE;
}

parse
  :  exp EOF -> exp
  ;

exp
  :  orExp
  ;

orExp
  :  andExp (OR^ andExp)*
  ;

andExp
  :  eqExp (AND^ eqExp)*
  ;

eqExp
    : relExp (( EQUALS | NOTEQUALS)^ relExp)*
    ;

relExp
    : addExp ( (LT^|LTEQ^|GT^|GTEQ^) addExp)*
    ;

addExp
    : multExp ( (PLUS^| MINUS^) multExp)*
    ;
multExp 
    : unaryExp (( MULT^ | DIV^ | MOD^ |POW^| IS^) unaryExp)*
    ;

unaryExp
  :  NOT atom -> ^(NOT atom)
  |  MINUS atom -> ^(NEGATE atom)
  |  ASSIGN atom -> ^(ASSIGN atom)
  |  atom
  ;

atom
  :  TRUE
  |  FALSE
  |  INT
  |  FLOAT
  |  function
  |  CELLREFERENCE
  |  RANGEREFERENCE
  |  '(' exp ')' -> exp
  ;

POW : '^';
DIV : '/';
MOD : '%';
MULT : '*';
PLUS : '+';
MINUS : '-';
LT   : '<';
LTEQ : '<=';
GT   : '>';
GTEQ : '>=';
EQUALS : '==';
ASSIGN: '=';
NOTEQUALS : '<>';
INT    : '0'..'9'+;
FLOAT  : ('0'..'9')* '.' ('0'..'9')+;
OR     : 'or' ;
AND    : 'and' ;
IS     : 'is' ;
NOT    : 'not' ;
TRUE   : 'true' ;
FALSE  : 'false' ;

function
    :   IDENT '(' ( exp (',' exp)* )? ')' -> ^(FUNC IDENT (exp)*)
    ;
CELLREFERENCE
    :  '$'?('a'..'z'|'A'..'Z')+'$'?('0'..'9')+
    ;

RANGEREFERENCE
    : '$'?('a'..'z'|'A'..'Z')+'$'?('0'..'9')+ ':' '$'?('a'..'z'|'A'..'Z')+'$'?('0'..'9')+
    ;

IDENT
    :   ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z' |'0'..'9')*
    ;   

SPACE  : (' ' | '\t' | '\r' | '\n') {$channel=HIDDEN;} ;

ERRCHAR : Err =. { /*console.log($Err);*/ } ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:14:33.640

我无法重现它。

当我复制粘贴您的原始语法时（没有谓词`( ... )=>`！），并将`parse`规则更改为：

```
parse
  :  (t=. {console.log('type:', $t.type, 'text:', $t.text);})* EOF
     //exp EOF -> exp
  ; 
```

然后我生成一个词法分析器/解析器：

```
java -cp antlr-3.3-complete.jar org.antlr.Tool Excel.g
```

并使用测试 html 文件：

```
<html>
  <head>
    <script type="text/javascript" src="antlr3-all-min.js"></script>
    <script type="text/javascript" src="ExcelLexer.js"></script>
    <script type="text/javascript" src="ExcelParser.js"></script>    
    <script type="text/javascript">

    function init() {
      var evalButton = document.getElementById("eval");
      evalButton.onclick = evalExpression;
    }

    function evalExpression() {
      document.getElementById("answer").innerHTML = "";
      var Excelression = document.getElementById("src").value;
      if(Excelression) {
        var lexer = new ExcelLexer(new org.antlr.runtime.ANTLRStringStream(Excelression));
        var tokens = new org.antlr.runtime.CommonTokenStream(lexer);
        var parser = new ExcelParser(tokens);
        parser.parse().getTree();
      }
    }

    </script>
  </head>
  <body onload="init()">
    <input id="src" type="text" size="35" />
    <button id="eval">evaluate</button>
    <div id="answer"></div>
  </body>
</html> 
```

然后`$a$1 $a$1:$a$9`在文本字段中输入输入，我看到以下输出被打印到我的 Chrome 控制台：

```
类型：28 文本：$a$1
类型：29 文本：$a$1:$a$9
```

Excel.tokens 文件包含：

```
细胞参考=28
范围参考=29
```

# jquery - jQuery - :not 选择器中不区分大小写的值

> ID：14337361
> 
> 赞同：1
> 
> 时间：2013-01-15T12:06:52.400
> 
> 标签：jquery, jquery-selectors

**我正在我的文档中选择一个表格行列表。**

以下代码选择：

1.  所有表格行...
2.  包含带有类的 DIV`.val-string`
3.  有一个持有值“null”的孩子`input`。

`$('tr').children('.val-string').children('input'):not([value!=null])').each(function(k,v) { });`

这适用于选择那些包含值“null”的输入，但我也希望它与“Null”、“NULL”甚至“nUlL”一起使用。

我试过使用：

`... children('input'):not([value.toLowerCase()!=null])') ...`

在功能的其他变体/位置中`toLowerCase()`。

**基本上，我所要求的可以在一行代码中执行，就像我在上面尝试执行的代码一样吗？**

[此链接](https://stackoverflow.com/questions/187537/is-there-a-case-insensitive-jquery-contains-selector)似乎建议使用*修改后* `:contains`的函数，但我不想为我的所有代码更改此函数，因为它在其他地方使用并且需要区分大小写。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:12:39.930

没有选择器，**`or`**但您可以使用`filter`

```
$('tr .val-string input').filter(function(){  
    return this.value.toLowerCase() =='null';
}).doSomething(); 
```

# reporting-services - 如何在 SSRS RDL 报告中应用分组

> ID：14337363
> 
> 赞同：1
> 
> 时间：2013-01-15T12:07:04.473
> 
> 标签：reporting-services, ssrs-grouping

我必须创建报告 SSRS RDL。我是新来报告的。

任何人都可以建议我如何设计报告或应用分组，使其看起来像下面给出的格式：

![在此处输入图像描述](../Images/9da71a96b58f69e84b33bd356991572a.png)

以下记录来自数据库：

![在此处输入图像描述](../Images/d5c4eadff6b054dabe517aef3de0cb5c.png)

在哪里

总 AA = 3(1+2),4(3+1)

总 A = 8(3+5),5(4+1)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:14:04.293

右键单击单元格并选择`Add Group`，然后在窗口`Parent Group`下`Row Group`或右键单击您的详细信息组。`Row Groups`

编辑：

附上一些显示过程的图像：

![在此处输入图像描述](../Images/a5c41dffd89cc1793b405be2ab12ae44.png)

然后选择用于分组的字段以及是否要添加页眉/页脚。

![在此处输入图像描述](../Images/777ffa358077f009ea7b18dd18bc9bcb.png)

对于您的总数，您可以使用 [Sum(FieldName)]。

它将仅对该组内的数据求和。

# objective-c - ios - Sparrow 邮件应用程序在 5.0.1 上崩溃 - 想要构建一个修复程序，需要移动基板帮助

> ID：14337367
> 
> 赞同：0
> 
> 时间：2013-01-15T12:07:16.550
> 
> 标签：objective-c, ios5, crash-reports, unrecognized-selector, cydia-substrate

昨天，我下载了麻雀邮件应用程序，启动后立即崩溃。

生成以下崩溃日志：

```
Incident Identifier: [TODO]
CrashReporter Key:   [TODO]
Hardware Model:      iPhone4,1
Process:         Sparrow [64701]
Path:            /var/mobile/Applications/2D0B2A21-4BE0-4A1E-9119-B16FAA3A1572/Sparrow.app/Sparrow
Identifier:      com.sparrowmailapp.iphoneapp
Version:         507.54
Code Type:       ARM
Parent Process:  launchd [1]

Date/Time:       2013-01-14 23:57:46 +0000
OS Version:      iPhone OS 5.0.1 (9A406)
Report Version:  104

Exception Type:  SIGABRT
Exception Codes: #0 at 0x305e132c
Crashed Thread:  0

Application Specific Information:
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '-[UINavigationBar setShadowImage:]: unrecognized selector sent to instance 0x9b1e70' 
```

问题是 UINavigationBar 中的属性“shadowImage”，它在 iOS 5 上不存在。

现在我正在尝试构建一个移动基板插件以避免崩溃，将缺失的属性添加到 UINavigationBar 并覆盖和以下代码：

```
#import <Foundation/Foundation.h>

@interface UINavigationBar(MyNavigationBar)
@property(nonatomic,retain) UIImage *shadowImage NS_AVAILABLE_IOS(6_0) UI_APPEARANCE_SELECTOR;
@end

%hook UINavigationBar

- (void)setShadowImage:(UIImage *)shadowImage forToolbarPosition:(id)topOrBottom {
    %log;
    //%orig;
}

- (void)setShadowImage:(UIImage *)shadowImage {
    %log;
    //%orig;
}

%end; 
```

我不知道要正确设置 shadowImage 或 UI_APPEARANCE_SELECTOR。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:15:45.030

天哪，这些方法应该是 shadowImage 的普通 setter/getter。

问题已解决。

# visio - Visio 2007 - 通过向导生成的组织结构图 - 调整文本大小

> ID：14337372
> 
> 赞同：1
> 
> 时间：2013-01-15T12:07:27.870
> 
> 标签：visio

我正在使用 orgwiz 命令行工具自动生成组织结构图，以便每晚更新。

除了某些形状的文本溢出之外，这一切都按预期工作。

有谁知道是否有办法以某种方式自动调整文本大小，无论是从命令行还是注入脚本调用来遍历页面并自动调整文本大小？这一切都必须在无人看管的情况下完成。

感谢任何帮助，

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:02:34.393

修改 spahe 母版，以便它们根据文本调整大小。 [http://msdn.microsoft.com/en-us/library/office/aa200988(v=office.10).aspx#377](http://msdn.microsoft.com/en-us/library/office/aa200988(v=office.10).aspx#377)

# shell - 使用 .sh 脚本安装库；默认位置不起作用

> ID：14337383
> 
> 赞同：0
> 
> 时间：2013-01-15T12:07:53.297
> 
> 标签：shell, fortran

我正在尝试在此站点[http://people.sc.fsu.edu/~jburkardt/f_src/prob/prob.html编译库](http://people.sc.fsu.edu/~jburkardt/f_src/prob/prob.html)

您可以通过搜索文本 prob.f90 找到该库

该库带有一个用于编译它的 shell 脚本，称为 prob.sh

当我在终端使用 sudo bash prob.sh 时（我使用的是 OSX Lion），我被告知目录 ~/bin//f90split 不存在。

如果我在文本编辑器中打开 prob.sh，看起来 shell 脚本正在尝试将库编译到 ~/bin/$ARCH/f90split

我可以简单地将这行 shell 脚本更改为 /usr/lib/ 并在那里安装库吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:52:41.190

是的，您可以按照您的建议编辑脚本。就我个人而言，我不会`/usr/lib`在第一次尝试时直接将库编译到，我会编译到其他目录，如果出现问题，我可以很容易地清除这些目录。

# javascript - 如何使用 AJAX 自动更新表？

> ID：14337386
> 
> 赞同：0
> 
> 时间：2013-01-15T12:08:04.143
> 
> 标签：javascript, ajax, asp-classic

我需要使用 AJAX 从 asp 页面请求 10 个数字的随机字符串，由“||”分隔 然后将结果显示在表格上。

然而，该表只能显示前 10 个结果，并且随着新行的添加，底部的行应该被碰撞。

我已经这样做了，但我不知道如何使用 AJAX 自动更新表格上的结果，而无需手动刷新。

我不使用 jQuery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:51:43.440

首先，如果你*真的*不想使用 JS 框架，你就得看看[`XMLHttpRequest()`object](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)。要定期轮询，您可以使用良好的[setTimeout()并从](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)[getElementById()](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)和[Node.lastChild 属性](https://developer.mozilla.org/en-US/docs/DOM/Node.lastChild)开始操作 DOM 。

开始玩这些，如果你遇到困难，问一些具体的问题。

# c# - 在 Snapped 视图中如何处理 AppBar 按钮

> ID：14337390
> 
> 赞同：0
> 
> 时间：2013-01-15T12:08:18.287
> 
> 标签：c#, .net, xaml, windows-8, microsoft-metro

我现在有一个包含 4 个按钮的底部应用栏，现在是时候需要添加更多按钮了。

现在，如果您在全屏模式或填充模式下查看，一切都很好，但是当您将应用程序捕捉到一边然后打开应用程序栏时，所有按钮都会相互重叠。问题是我不知道我应该如何处理这个问题，而且我在网上找不到任何解决这个问题的东西。

右侧的按钮与文档/文件本身相关，例如新建、打开、保存等。右侧的按钮更多用于编辑目的。我想要发生的是，当应用程序靠边时，编辑应用程序栏按钮不应该显示，只有新建、打开和保存按钮应该显示。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:49:28.323

您应该为快照视图单独设计应用栏，这是描述您拥有的选项的文章：

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj662742.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj662742.aspx)

基本上，您可以在对齐模式下调整按钮大小，在两行或多行中显示按钮，或者为对齐视图进行单独设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:23:31.547

您可以选择显示一些应用栏按钮或不显示。使用视觉状态管理器来控制可见性

# r - 寻找模块化和社区成员

> ID：14337391
> 
> 赞同：0
> 
> 时间：2013-01-15T12:08:21.000
> 
> 标签：r, social-networking, graph-theory, igraph, modularity

我想找到 1）网络的模块化并找到 2）每个社区中节点的身份。

我认为这是获得模块化的方法：

```
g <- graph.full(5) %du% graph.full(5) %du% graph.full(5)
g <- add.edges(g, c(1,6, 1,11, 6, 11))
ebc <- edge.betweenness.community(g)

sizes(ebc)
#Community sizes
#1 2 3 
#5 5 5 

modularity(g,membership(ebc))
#[1] 0.5757576 
```

但是在[Gabor 的这个链接](http://igraph.wikidot.com/community-detection-in-r#toc2)上，我得到了这个代码：

```
memberships <- list()
G <- graph.full(5) %du% graph.full(5) %du% graph.full(5)
G <- add.edges(G, c(1,6, 1,11, 6, 11))

### edge.betweenness.community
ebc <- edge.betweenness.community(G)
mods <- sapply(0:ecount(G), function(i) {
  g2 <- delete.edges(G, ebc$removed.edges[seq(length=i)])
  cl <- clusters(g2)$membership
  modularity(G, cl)
})

g2 <- delete.edges(G, ebc$removed.edges[1:(which.max(mods)-1)])
memberships$`Edge betweenness` <- clusters(g2)$membership 
```

这似乎和我做的事情一样，我认为`delete.edges`and`clusters`是关于通过删除连接边然后获取每个组件中节点的 ID 将模块拆分为单独的组件。

虽然我有几个问题：

1.  在@Gabor Csardil 的代码中，为什么`modularity`调用使用`clusters(G)$membership`而`ebc`不像我在示例中那样使用？有什么不同？（我会认为这会高估实际的模块化？）似乎也有另一种使用`community.to.membership`

2.  代码返回了这个我不明白的`mods`错误，这也是我无法探索`g2`并`cl`看到更多正在发生的事情的部分原因：

> delete.edges(G, ebc$removed.edges[seq(length = i)]) 中的错误：在 iterators.c:1809：无法创建迭代器，无效的边 id，无效的顶点 id

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T14:52:45.177

一般的答案是 wiki 中的代码已过时。它适用于 igraph 版本 0.5.x，但不适用于 0.6.x。进一步来说：

1.  在 igraph 0.5.x 版本中，没有直接的方法来获取成员向量，在 0.6.x 版本中你可以说`membership(ebc)`.

2.  在 0.5.x 版本中，顶点 id 以 0 开头，在 0.6.x 版本中，它们以 1 开头，因此您不必`delete.edges()`在行中减去 1。

# java - 使 Web 服务在不同的服务器上工作

> ID：14337394
> 
> 赞同：0
> 
> 时间：2013-01-15T12:08:28.150
> 
> 标签：java, eclipse, web-services, soap, android-ksoap2

我正在使用 Eclipse 开发 Web 服务。此服务将通过 Android 访问`ksoap2`。

我在本地 apache tomcat () 上成功测试了该服务，现在想在另一台服务器 (ie )`http://localhost:8080/`上设置此服务。`http://giraffe/`

Eclipse 生成的`.wsdl`文件包含以下行：

```
<wsdlsoap:address location="http://localhost:8080/AndroidService/services/AndroidService"/> 
```

我想如果我只是将`.war`文件添加到`giraffe`并尝试访问该服务，这将无法解决。

我现在的问题如下：为了能够在不同的服务器上使用此服务，我需要进行哪些更改？我只需要改变这个`address location`吗？

如果您需要我发布一些代码/文件，请告诉我。

我的 Eclipse 项目结构如下所示：

![在此处输入图像描述](../Images/4c42c8b830359444126482b91b8485db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:25:07.313

您可以`http://localhost:8080`在 wsdl 上替换为`http://giraffe/`

在服务器上部署后，您是否面临任何问题？

# r - 如何在 50000 条记录数据集上更快地运行 mclust

> ID：14337397
> 
> 赞同：4
> 
> 时间：2013-01-15T12:08:29.923
> 
> 标签：r

我是初学者，我正在尝试使用 package.json 对具有 2 个特征（x，y）的数据框（包含 50,000 条记录）进行聚类[`mclust`](http://www.stat.washington.edu/mclust)。然而，运行一个命令（例如`Mclust(XXX.df)`或`densityMclust(XXX.df)`.

有什么方法可以更快地执行命令？示例代码会有所帮助。

对于您的信息，我使用的是 4 核处理器和 6GB RAM，我花了大约 15 分钟左右使用 Weka 进行相同的分析（聚类），使用 R 进程仍然运行超过 1.5 小时。我真的很想使用 R 进行分析。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T13:25:40.780

使用时处理大型数据集在[技术报告](http://www.stat.washington.edu/research/reports/2012/tr597.pdf)的 11.1 小节中进行`mclust`了描述。

简而言之，功能`Mclust`并`mclustBIC`包括在应用于完整数据集之前在层次聚类阶段使用数据子样本的规定`EM`，以便将该方法扩展到更大的数据集。

通用示例：

```
library(mclust)
set.seed(1)
##
## Data generation
##
N  <- 5e3
df <- data.frame(x=rnorm(N)+ifelse(runif(N)>0.5,5,0), y=rnorm(N,10,5))
##
## Full set
##
system.time(res <- Mclust(df))
# >   user  system elapsed 
# > 66.432   0.124  67.439 
##
## Subset for initial stage
##
M <- 1e3
system.time(res <- Mclust(df, initialization=list(subset=sample(1:nrow(df), size=M))))
# >   user  system elapsed 
# > 19.513   0.020  19.546 
```

“Subsetted”版本在我的双核上运行速度大约快 3.5 倍（尽管`Mclust`只使用单核）。

何时`N<-5e4`（如您的示例中），`M<-1e3`带有子集的版本大约需要 3.5 分钟才能完成。

# java - Spring 3.x 无法加载 applicationContext

> ID：14337398
> 
> 赞同：1
> 
> 时间：2013-01-15T12:08:33.830
> 
> 标签：java, spring-mvc, junit4, applicationcontext

我正在尝试在我的 Spring 3.x MVC 项目上运行一个简单的 junit 测试，并且由于测试错误说明它如何无法加载我不需要用于此特定单元测试的 ApplicationContext 而无法执行此操作。

我正在测试一个简单的控制器，它模拟一个将用户添加到系统但失败的 HTTP 请求。

这是我的测试控制器类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "file:src/test/resources/controller-context-config.xml" })
public class ControllerTest {

    @Autowired
    private UserController controller;

    private String jsonUser = "{ \"Username\":\"jonneymendoza\",\"EmailAddress\":\"jon@google.com\", \"Password\":\"12345678\",\"FirstName\":\"jono\", \"Surname\":\"richy\", \"Country\":\"united kingdom\",\"Bio\":\"Bio stuff goes here about the user. where he comes from etc etc. all is well. lets go go go\" }";
@Before
    public void setup() {
        //controller = new UserController();

        assertNotNull(controller);

    }

@Test
    public void testCreateNewAccount() {

        ResponseEntity<String> response = controller
                .createNewAccount(new HttpEntity<String>(jsonUser));
        assertEquals(HttpStatus.CREATED, response.getStatusCode());

    }

} 
```

控制器类

```
@Controller
public class UserController {

@RequestMapping(value = "/user", method = RequestMethod.PUT,consumes="application/json")
    public ResponseEntity<String>createNewAccount(HttpEntity<String>request) {

        try {

            userService.registerNewUser( JSONObject.fromObject(request.getBody()));
        } catch (JSONException e) {

            e.printStackTrace();
            return new ResponseEntity<String>("Hello World", responseHeaders, HttpStatus.BAD_REQUEST);
        } catch (InvalidDataException e) {

            e.printStackTrace();
            return new ResponseEntity<String>("Hello World", responseHeaders, HttpStatus.BAD_REQUEST);
        }

         return new ResponseEntity<String>(null, responseHeaders, HttpStatus.CREATED);
    }

} 
```

`controller-context-config.xml`位于 src/test/resources 中的文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/mvc 
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:annotation-config />

    <!-- Define controllers here for testing -->

    <bean id="UserController" class="com.jr.freedom.controllers.Controller"></bean>

</beans> 
```

使用命令行输出错误`mvn install -x`：

```
Tests in error:
  testLogin(com.xx.controllers.ControllerTest): Failed to load ApplicationContext
  testCreateNewAccount(com.xx.controllers.ControllerTest): Failed to load ApplicationContext
  testGetUserProfile(com.xx.controllers.ControllerTest): Failed to load ApplicationContext 
```

eclipse Junit的输出：

```
 java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'UserController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.jr.freedom.user.UserService com.jr.freedom.controllers.UserController.userService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.jr.freedom.user.UserService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 24 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.jr.freedom.user.UserService com.jr.freedom.controllers.UserController.userService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.jr.freedom.user.UserService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 39 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.jr.freedom.user.UserService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:952)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:821)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 41 more 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:36:17.643

如果您不需要应用程序上下文，则删除以下注释：

```
@RunWith(SpringJUnit4ClassRunner.class) 
```

然后在`setUp`创建您的被测对象并使用您的模拟手动连接它，例如：

```
controller = new UserController();
controller.setUserService(mockUserService);
... etc... 
```

如果您确实需要应用程序上下文，那么加载它的一种方法是添加`@ContextConfiguration`注释。对于`xml`配置，它可能如下所示：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("/controller-context-config.xml")
public class ControllerTest {
... 
```

# ruby-on-rails - 使用 simple_form 将数据属性添加到单选按钮。

> ID：14337404
> 
> 赞同：5
> 
> 时间：2013-01-15T12:08:56.630
> 
> 标签：ruby-on-rails, ruby, simple-form

我正在尝试使用简单的形式将数据属性与单选按钮区分开来。

我想渲染以下内容 -

```
<input type="radio" name="special_feature[all_editions]" id="special_feature_all_editions_true" value="true" data-enables="edition_select">
<input type="radio" name="special_feature[all_editions]" id="special_feature_all_editions_false" value="false" data-disables="edition_select">

<%= f.input :all_editions,
        as: :radio_buttons
        %> 
```

知道如何添加不同的数据属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:13:46.293

```
 form.radio_button(all_editions, txt, :data-data_attr => some_variable) 
```

或者

```
<%= f.input :all_editions,
        as: :radio_buttons,
       'data-data_attr' => 'some_variable'
%> 
```

# c# - 如何使用 XMLWriter 类追加 XML 文件

> ID：14337405
> 
> 赞同：1
> 
> 时间：2013-01-15T12:09:04.523
> 
> 标签：c#, xml

如何使用 XMLWriter 类追加 XML 文件

```
XmlWriterSettings xmlFragments = new XmlWriterSettings();
            xmlFragments.Indent = true ;
            XmlTextWriter xWriter = new XmlTextWriter(_logFilePath, null);
            xWriter.WriteStartDocument();//starting document

            xWriter.WriteStartElement("values");//starting parent node
            xWriter.WriteStartElement("values1");//1st child node

            xWriter.WriteAttributeString("id", "200");//attributes of child node
            xWriter.WriteAttributeString("name", "ABCD");
            xWriter.WriteString("ISO Company");//innertext
            xWriter.WriteEndElement();
            xWriter.WriteStartElement("num");//2nd child node
            xWriter.WriteAttributeString("more", "500");
            xWriter.WriteAttributeString("less", "101");
            xWriter.WriteString("numeric");
            xWriter.WriteEndElement();
            xWriter.WriteStartElement("r", "runnnig", "");//3rd child node
            xWriter.WriteAttributeString("fast", "500km");
            xWriter.WriteAttributeString("slow", "10km");
            xWriter.WriteString("killometers");
            xWriter.WriteEndElement();
            xWriter.WriteStartElement("character");
            xWriter.WriteAttributeString("char", "a");
            xWriter.WriteAttributeString("another", "b");
            xWriter.WriteEndElement();

            xWriter.WriteEndElement();
            xWriter.WriteEndDocument();
            xWriter.Close(); 
```

我正在尝试在 xmlwriter 中加载 xml 文件，但是这个类会覆盖以前的标签，但我不想覆盖标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:52:00.190

可以通过 XmlDocument 解决。

```
 XmlDocument doc = new XmlDocument();
  doc.Load("test.xml");
  XmlElement el = doc.CreateElement("child");
  el.InnerText = "This row is being appended to the end of the document.";
  doc.DocumentElement.AppendChild(el);
  doc.Save("test.xml"); 
```

[在这里](http://www.codeproject.com/Articles/15278/How-to-Append-to-a-Large-XML-File)查看更多选项。

# ruby-on-rails - Ruby 字符串，获取兼容编码列表

> ID：14337407
> 
> 赞同：3
> 
> 时间：2013-01-15T12:09:18.987
> 
> 标签：ruby-on-rails, ruby, string, encoding

如何获取 Ruby 字符串的兼容编码列表？（MRI 1.9.3）

用例：我有一些用户提供的字符串，用 UTF-8 编码。理想情况下，我需要将它们转换为`ISO/IEC 8859-1`（8 位），但是当存在一些特殊字符时，我还需要回退到 unicode。

另外，有没有更好的方法来完成这个？也许我正在测试错误的东西。

* * *

**编辑-为答案添加更多细节**
坦克，我可能应该添加一些上下文。我知道如何进行编码转换。
我正在寻找一种方法来快速找出一个字符串是否可以安全地编码为另一种编码，或者，以另一种（而且完全错误的）方式，支持该字符串中所有字符 的*最小编码是什么。*

仅将字符串转换为 16 字节不是一种选择，因为它们将作为 SMS 发送并将它们转换为 16 字节编码会将可用字符的数量从 160 个减少到 70 个。

只有当它们包含不支持的特殊字符时，我才需要将它们转换为 16 字节`ISO/IEC 8859-1`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:29:57.117

不幸的是，Ruby 的编码兼容性理念与您的用例并不完全一致。但是，尝试在 ISO-8859-1 中编码您的 UTF-8 字符串并捕获无法转换时引发的错误将实现您所追求的：

```
begin
  'your UTF-8 string'.encode!('ISO-8859-1')
rescue Encoding::UndefinedConversionError
end 
```

如果可能，会将您的字符串转换为 ISO-8859-1，否则将其保留为 UTF-8。

注意这个使用`encode`，它实际上使用*转码*字符串`Encoding::Converter`（即重新分配正确的编码字节模式给字符串的字符表示），不像`force_encoding`，它只是改变编码*标志*（即告诉Ruby根据设置的编码解释字符串的字节流）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T12:28:22.957

Ruby 有[标准库](http://www.ruby-doc.org/core-1.9.3/index.html)，您可以在其中找到类[Encoding和他的名为](http://www.ruby-doc.org/core-1.9.3/Encoding.html)[Encoding::Converter](http://www.ruby-doc.org/core-1.9.3/Encoding/Converter.html)的子类，在这种情况下，它们可能是您最好的朋友。

```
#!/usr/bin/env ruby
# encoding: utf-8

converter = Encoding::Converter.new("UTF-8", "ISO-8859-1")
converted = converter.convert("é")

puts converted.encoding
# => ISO-8859-1

puts converted.dump
# => "\xE9" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T23:39:13.963

`valid_encoding?`（[String 的实例方法](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-valid_encoding-3F)）有用吗？那是：

```
try_str = str.force_encoding("ISO/IEC 8859-1")
str = try_str if try_str.valid_encoding? 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-15T12:20:34.747

要转换为`ISO-8859-1`您可以按照以下代码对其进行编码。

```
1.9.3p194 :002 > puts "é".force_encoding("ISO-8859-1").encode("UTF-8")
Ã©
 => nil 
```

[链接答案](https://stackoverflow.com/questions/14196455/how-to-intentionally-insert-strings-with-the-wrong-encoding-in-mysql/14196580#14196580)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-15T12:22:07.307

```
"Some String".force_encoding("ISO/IEC 8859-1") 
```

您也可以参考[rails encoding 链接](http://yehudakatz.com/2010/05/05/ruby-1-9-encodings-a-primer-and-the-solution-for-rails/)

# c# - 如何在自制的 Windows 资源管理器中正确显示图标？

> ID：14337409
> 
> 赞同：1
> 
> 时间：2013-01-15T12:09:31.833
> 
> 标签：c#, winforms, icons

![图标未显示！[][1]](../Images/362450b0085a2569de28883ed0ec6df5.png)我在 C# WinForms 中工作。我制作了一个显示逻辑目录的 Windows 资源管理器，然后单击它们时，它会在 ListView 中显示其中的文件（旧但很棘手）。我从系统中获取图标，使用：

```
Icon iconForFile = SystemIcons.WinLogo;
ListViewItem lv = new ListViewItem(filData, imageList1.Images.Count);
lv.Tag = file;
iconForFile = Icon.ExtractAssociatedIcon(file);
string Extension = Path.GetExtension(file);

if (!imageList1.Images.ContainsKey(file))
{
    // If not, add the image to the image list.
    iconForFile = System.Drawing.Icon.ExtractAssociatedIcon(file);
    imageList1.Images.Add(file, iconForFile);
}

lv.ImageKey = file;
listView1.SmallImageList = imageList1; 
```

现在的问题是这样的：当单击一级目录时它确实显示图标但是当我单击任何目录中的文件夹（即“C”）时，它不会显示目录子文件夹中的图标. 请帮助我如何自定义它。我的完整代码有点像这样：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        PopulateTreeView(treeView1);
    }

    private void PopulateTreeView(TreeView tv)
    {
        string[] drives = Environment.GetLogicalDrives();
        TreeNode MyCnode = new TreeNode();
        MyCnode = new TreeNode("My Computer");
        tv.Nodes.Add(MyCnode);   
        foreach (string drive in drives)
        {
            TreeNode nodeDrive = new TreeNode();
            nodeDrive.Tag = drive;
            nodeDrive.Text = drive;
            tv.Nodes.Add(nodeDrive);
            // tv.Nodes.Add();
            // nodeDrive.EnsureVisible();
            //  treeView1.Refresh();

            try
            {
                //add dirs under drive
                if (Directory.Exists(drive))
                {
                    foreach (string dir in Directory.GetDirectories(drive))
                    {
                        TreeNode node = new TreeNode();
                        node.Tag = dir;
                        node.Text = dir.Substring(dir.LastIndexOf(@"\") + 1);
                        node.ImageIndex = 1;
                        nodeDrive.Nodes.Add(node);
                    }
                }

            }
            catch (Exception)    
            {
            }
            MyCnode.Expand();
        }
    }

    public TreeNode GetDirectory(TreeNode parentNode)
    {

        DirectoryInfo d = new DirectoryInfo(parentNode.FullPath);
        DirectoryInfo[] dInfo = d.GetDirectories()
                                  .Where(di => !di.Attributes.HasFlag(FileAttributes.System))

                                  .Where(di => !di.Attributes.HasFlag(FileAttributes.Hidden))
                                  .ToArray();

        parentNode.Nodes.Clear();
        if (dInfo.Length > 0)
        {
            TreeNode treeNode = new TreeNode();

            foreach (DirectoryInfo driSub in dInfo)
            {

                treeNode = parentNode.Nodes.Add(driSub.Name);
                treeNode.Nodes.Add("");

            }
        }

        return parentNode;
    }

    private void AddFiles(string strPath)
    {
        try
        {
            listView1.BeginUpdate();
            listView1.Items.Clear();
            //headers listview
           // listView1.Columns.Add("File Name", 200);
            //listView1.Columns.Add("Size", 80);
            //listView1.Columns.Add("Last Accessed", 110);

            string[] dirData = new string[3];
            string[] filData = new string[3];
            string[] files = Directory.GetFiles(strPath);
            foreach (string file in files)
            {
                FileInfo finfo = new FileInfo(file);
                FileAttributes fatr = finfo.Attributes;
                string name = Path.GetFileNameWithoutExtension(file);
                filData[0] = name;
                filData[1] = finfo.Length.ToString();
                filData[2] = File.GetLastAccessTime(file).ToString();
                // Set a default icon for the file.
                Icon iconForFile = SystemIcons.WinLogo;
                ListViewItem lv = new ListViewItem(filData, imageList1.Images.Count);
                lv.Tag = file;
                iconForFile = Icon.ExtractAssociatedIcon(file);
                string Extension = Path.GetExtension(file);
                if (!imageList1.Images.ContainsKey(file))
                {
                    // If not, add the image to the image list.
                    iconForFile = System.Drawing.Icon.ExtractAssociatedIcon(file);
                    imageList1.Images.Add(file, iconForFile);
                }
                lv.ImageKey = file;

                listView1.SmallImageList = imageList1;
                listView1.Items.Add(lv);
            }
        }

        catch (Exception Exc) { MessageBox.Show(Exc.ToString()); }

        listView1.EndUpdate();
    }

    private void listView1_MouseDoubleClick(object sender, MouseEventArgs e)
    {
        string pathdoubleClicked = listView1.FocusedItem.Tag.ToString();

        Process.Start(pathdoubleClicked);
    }

    private void treeView1_AfterExpand(object sender, TreeViewEventArgs e)
    {
        GetDirectory(e.Node);
        treeView1.SelectedNode.Expand();
        AddFiles(e.Node.FullPath.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T10:54:53.833

对于仍然将此视为搜索答案的任何人，需要在将项目添加到图像列表之前完成图像列表的分配。

```
private void AddFiles(string strPath)
{
    try
    {
        listView1.BeginUpdate();
        listView1.Items.Clear();
        listView1.SmallImageList = imageList1; 
```

# c# - 为什么我的 Asp.net 的 CPU 使用率经常是 25% 左右

> ID：14337410
> 
> 赞同：0
> 
> 时间：2013-01-15T12:09:35.457
> 
> 标签：c#, asp.net, .net, performance, cpu-usage

我有一个 ASP.Net 项目和许多报告。我的一些报告计算量很大，我使用 Linq 在内存中计算它们。当我测试此报告时，我的客户端 CPU 使用率约为 25%。

![任务管理器](../Images/31e94015845e8e6e26553f070bd361fe.png)

我的问题是为什么 cpu 使用率没有增加到 80% 或更多？

当我在服务器上发布这个项目时，它有这种行为吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T12:12:14.923

您有 4 个内核（或 2 个超线程内核），这意味着每个单线程最多可以占用总计算能力的 25%（在任务管理器中显示为 25% CPU）。

您的计算可能是单线程的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:48:25.873

你能把你的计算分成几个线程吗？这将使负载更均匀地分布在 CPU 的内核上。

# mysql - MySQL - UPDATE + 查询优化

> ID：14337417
> 
> 赞同：1
> 
> 时间：2013-01-15T12:09:59.243
> 
> 标签：mysql, database, indexing

我有一个优化问题。我还没有真正进入 MySQL 索引。我阅读了一些文章和问题，但我还没有找到我要找的东西。

我在有近 100 万行的表上有一个带有 WHERE 条件的 UPDATE 语句。

我想加快这个 UPDATE 操作。我认为大部分时间都花在寻找 WHERE 中指定的记录上。

我的查询看起来像这样，具有不同的 URL：

```
UPDATE table SET updated = 1, updated_date = now() , [some more fields updated]
WHERE url = 'someurl.com?id=123532js23'; 
```

URL 是唯一的。目前有一个定义为 PRIMARY KEY 的 AUTO INREMENT id 字段。我不需要任何 <、> 或 BETWEEN 操作 - 所以也许我可以使用一些散列？

我应该使用什么引擎和索引以获得最佳性能？

我的一位朋友建议在 url 字段上使用 InnoDB + UNIQUE。还有什么我可以做的吗？这个 UPDATE 运行了很多次——每天大约 1 000 000 次，大多数执行导致更新——大约 95%。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:13:17.773

> 我的一位朋友建议在 url 字段上使用 InnoDB + UNIQUE。还有什么我可以做的吗？这个 UPDATE 运行了很多次——每天大约 1 000 000 次，大多数执行导致更新——大约 95%。

你朋友是对的。

一件事`URL`可能很长，索引键的最大可能长度`InnoDB`是`767`字节。

因此，您最好对 url 进行散列（例如，使用`MD5`）并在包含 url 散列的字段上创建一个`UNIQUE`索引（当然在`WHERE`条件中使用它）：

```
INSERT
INTO    mytable (url, hashed_url, ...)
VALUES  ('someurl.com?id=123532js23', MD5('someurl.com?id=123532js23'))

UPDATE  mytable
SET     ...
WHERE   hashed_url = MD5('someurl.com?id=123532js23') 
```

# geometry - 将三个圆圈移动到另一个位置会减慢运动速度（KineticJS）

> ID：14337418
> 
> 赞同：1
> 
> 时间：2013-01-15T12:09:59.733
> 
> 标签：geometry, kineticjs, move

我试图在它们逐渐淡入后将三个圆圈移动到页面的左上角，以便它们在一个盒子上重叠。目前，我设置了一个超时，但它只适用于第一圈，而且动作非常快。我怎样才能将它们作为一个整体移动并减慢移动速度？

```
 <!DOCTYPE HTML>
   <html>
     <head>
       <style>
         body {
      margin: 0px;
      padding: 0px;
       background-color: #CCCCCC;
             }
    </style>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></head>
<body>
 <div id="container"></div>

<script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.1-beta2.js">        
 </script>
  <script>
var fadeIn = function(shape) {
 var o = shape.getOpacity();
  o = o + 0.05 >=0.5 ? 0.5 : o + 0.05;
shape.setOpacity(o);
shape.getLayer().draw();
if(o !== 0.4) {
    setTimeout(function() {
            fadeIn(shape).delay(3000*3);
        }, 720);
    }
  };
  var stage = new Kinetic.Stage({
    container: 'container',
    width: 800,
    height: 700

    //width: 578,
    //height: 200
  });

  var layer = new Kinetic.Layer();

  var circle = new Kinetic.Circle({
    x: stage.getWidth() / 2,
    y: stage.getHeight() / 2,
    radius: 70,
    fill: '#CCCCCC',
    stroke: 'yellow',
    strokeWidth: 8,
    opacity: 0.1

   });
  circle.hide();
   setTimeout(function() {
        circle.show();
        fadeIn(circle).delay(3000*3);
    }, 1720);

    layer.add(circle);

    var circle2 = new Kinetic.Circle({
    x: stage.getWidth() / 2.1,
    y: stage.getHeight() / 2.1,
    radius: 70,
    fill: '#CCCCCC',
    stroke: 'yellow',
    strokeWidth: 8,
    opacity: 0.1
  });
  circle2.hide();
   setTimeout(function() {
        circle2.show();
        fadeIn(circle2).delay(3000*3);
    }, 5600);

  // add the shape to the layer
  layer.add(circle2);

  var circle3 = new Kinetic.Circle({
    x: stage.getWidth() / 2.2,
    y: stage.getHeight() / 2.2,
    radius: 70,
    fill: '#CCCCCC',
    stroke: 'yellow',
    strokeWidth: 8,
    opacity: 0.1

    });
    circle3.hide();
   setTimeout(function() {
   circle3.show();
        fadeIn(circle3).delay(3000*3);
    }, 12000);

  // add the shape to the layer
  layer.add(circle3);

   // var boxGroup = new Kinetic.Group({
    //x: 10,
    //y: 10,
    //draggable: true
  //});
  var boxGroup = new Kinetic.Group({
    x: -250,
    y: -250,
    draggable: true
  });

    var box = new Kinetic.Rect({
    x: 10,
    y: 10,
    width: 100,
    height: 100,
    fill: '#CCCCCC',
    stroke: 'black'
  });

  boxGroup.add(box);
  layer.add(box);
  layer.add(boxGroup);

  // add the layer to the stage
  stage.add(layer);

  setTimeout(function() {
   circle.moveTo(boxGroup).delay(5000*3);
   circle2.moveTo(boxGroup).delay(5000*3);
   circle3.moveTo(boxGroup).delay(5000*3);
    }, 24000);

  </script>
 </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:37:02.557

[http://jsfiddle.net/SANFM/9/](http://jsfiddle.net/SAnFM/9/)

KineticJS 有一个很棒的 transitionTo() 函数，你可以调用它。它可以为任何数值属性设置动画，例如位置或不透明度。我创建了一个小提琴来展示这一点，因为 setTimeout 与现在使用 RequestAnimationFrame 内置在浏览器中的功能相比有点古老（现在所有主要浏览器都实现了这一点，并且 KineticJS 像大多数其他库一样内置了后备）

为了好玩，我稍微清理了您的代码，删除了注释并添加了一个额外的圆圈。

但实际上你需要的是：

```
myShape.transitionTo({shape configuration, duration}); 
```

例如：

```
circle.transitionTo({
    x: box.getX(),  //coordinates to transition to
    y: box.getY(),
    opacity: 1,  
    duration: 1  // length of time for this animation in seconds, REQUIRED for animation to work
}); 
```

# iphone - NSInvalidArgumentException，原因：'JSON 写入中的类型无效（__NSDate）'

> ID：14337419
> 
> 赞同：25
> 
> 时间：2013-01-15T12:10:02.127
> 
> 标签：iphone, ios, json, nsdate

当我尝试对 NSDate 对象进行 JSON 编码时出现此异常。我相信 NSDate 与 JSON 编码不兼容。但我必须对日期进行编码。任何解决方案？

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Invalid type in JSON write (__NSDate)' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T12:13:03.000

首先将您的数据存储在 NSString 中。然后将您的字符串转换为 NSDate。

您可以参考：

[将 NSString 转换为 NSDate（然后再返回）](https://stackoverflow.com/questions/3917250/converting-nsstring-to-nsdate-and-back-again)

[NSString 到 NSDate 的转换问题](https://stackoverflow.com/questions/3738363/nsstring-to-nsdate-conversion-problem)

[如何使用 NSDateFormatter 将 NSString 转换为 NSDate？](https://stackoverflow.com/questions/11396609/how-to-convert-nsstring-to-nsdate-using-nsdateformatter)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-15T12:13:22.020

将 NSDate 转换为 NSString 并尝试编码。

```
- (NSString *) changeDateToDateString :(NSDate *) date {

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setTimeZone:[NSTimeZone localTimeZone]];
    NSLocale *locale = [NSLocale currentLocale];
    NSString *dateFormat = [NSDateFormatter dateFormatFromTemplate:@"hh mm" options:0 locale:locale];
    [dateFormatter setDateFormat:dateFormat];
    [dateFormatter setLocale:locale];
    NSString *dateString = [dateFormatter stringFromDate:date];
    return dateString;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-04T23:18:32.303

如前所述，您必须首先将您的 NSDate 转换为 NSString。然而，目前还不清楚日期应该用哪种格式表示。答案可以在[这里](https://stackoverflow.com/questions/10286204/the-right-json-date-format "这里")找到：“JSON 本身并没有指定日期应该如何表示，但 Javascript 可以”——ISO8601。

这是来自 NSDate 的帮助程序类别的 ISO8601 转换方法，由[Erica Sadun](https://github.com/erica/NSDate-Extensions)提供：

```
- (NSString *)ISO8601 {
    struct tm time;
    time_t interval = [self timeIntervalSince1970];
    gmtime_r(&interval, &time);
    char *x = calloc(1, 21);
    strftime_l(x, 20, "%FT%TZ", &time, gmtlocale);
    NSString *string = [NSString stringWithUTF8String:x];
    free(x);
    return string;
} 
```

如果您在 JSON 有效负载中返回 ISO8601 字符串并希望将其转换为 NSDate，请对 NSDate 使用此类方法：

```
+ (NSDate *)dateFromISO8601:(NSString *)string {
    if(!string) return nil;
    if (![string isKindOfClass:[NSString class]]) return nil;
    struct tm time;
    strptime_l([string UTF8String], "%FT%TZ", &time, gmtlocale);
    return [NSDate dateWithTimeIntervalSince1970:timegm(&time)];
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-15T12:16:28.457

你有没有尝试过 ？

```
updateDate = [NSNumber numberWithFloat:[[NSDate date] timeIntervalSince1970]]; 
```

如此处所述：[SDK 不支持 NSDate 对象](https://github.com/stackmob/stackmob-ios-sdk/issues/1)

请按照以下**步骤操作：**

**1\. 将日期转换为 JSON 格式：**

```
 NSDateFormatter *formatter = [[[NSDateFormatter alloc] init]autorelease];
 [formatter setDateFormat:@"Z"];
 NSString *updateDate = [NSString stringWithFormat:@"/Date(%.0f000%@)/", [[NSDate date] timeIntervalSince1970],[formatter stringFromDate:[NSDate date]]]; 
```

**2.嵌入一些数组并发布数组。**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-02T21:25:13.030

在 JSON 中存储和检索 NSDate 对象的最简单方法是使用 NSDate 的**timeIntervalSince1970**属性。

返回的 NSTimeInterval (double) 非常标准，可以使用以下方法轻松转换回 NSDate 对象：

```
NSDate dateWithTimeIntervalSince1970:<#(NSTimeInterval)#> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-15T12:13:48.833

在尝试对其进行编码之前，您必须将日期转换为字符串。到处都有足够的例子，所以应该很容易找到

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-14T07:23:34.307

对于我们的案例，我们使用**Mantle**将一个对象转换为 JSON，并且我们的一个具有 NSDate 属性的对象缺少它的 JSONTransformer

```
@property (nonatomic) NSDate *expiryDate; 
```

在哪里：

```
+ (NSValueTransformer *)expiryDateJSONTransformer {
     return [MTLValueTransformer transformerUsingForwardBlock:^id(NSString *dateString, BOOL *success, NSError *__autoreleasing *error) {
        return [self.dateFormatter dateFromString:dateString];
    } reverseBlock:^id(NSDate *date, BOOL *success, NSError *__autoreleasing *error) {
        return [self.dateFormatter stringFromDate:date];
    }];
}

+ (NSDateFormatter *)dateFormatter {
    NSDateFormatter *df = [NSDateFormatter new];
    df.dateFormat = @"yyyy-MM-dd";
    return df;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-26T13:06:46.253

我在我的身体参数编码器中做这样的事情

```
// handle dates
              var _params = [String: Any]()
              params.forEach { (key, value) in
                if let date = value as? Date {
                    _params[key] = DateFormatter.iso8601Full.string(from: date)
                } else {
                    _params[key] = value
                }
              }

              return try? JSONSerialization.data(withJSONObject: _params) 
```

# wcf - 域操作入口 xxx 的参数 xxx 必须是预定义的可序列化类型之一

> ID：14337423
> 
> 赞同：0
> 
> 时间：2013-01-15T12:10:10.933
> 
> 标签：wcf, silverlight, entity-framework, wcf-ria-services

**我有时会**在 SL5 + EF + WCF 应用程序上收到此 Web 服务错误。

“域操作条目‘AddUserPresentationModelToRole’的参数‘角色’必须是预定义的可序列化类型之一。”

[这](http://social.msdn.microsoft.com/Forums/en-US/silverlightwcf/thread/eefb8838-908e-4938-989d-70abdb34404e/)是一个类似的错误，但是他的解决方案对我不起作用。

我有代码生成的 DomainService ，它将数据库实体呈现给我的客户：

```
 [EnableClientAccess()]
public partial class ClientAppDomainService : LinqToEntitiesDomainService<ClientAppUserEntitlementReviewEntities>
{

    public IQueryable<Account> GetAccounts()
    {
        return this.ObjectContext.Accounts;
    }
    //..etc... 
```

和我的自定义服务，它显示了一个演示模型和数据库实体。

```
[EnableClientAccess]    
[LinqToEntitiesDomainServiceDescriptionProvider(typeof(ClientAppUserEntitlementReviewEntities))]
public class UserColourService : DomainService
{

    [Update(UsingCustomMethod = true)]
    public void AddUserPresentationModelToRole(UserPresentationModel userPM, Role role, Reviewer reviewer)
    {
        ...
    }

    public IDictionary<long, byte> GetColourStatesOfUsers(IEnumerable<RBSUser> listOfUsers, string adLogin) 
    {
        //....
    }
} 
```

和 PresentationModel：

```
public class UserPresentationModel
    {
        [Key]
        public long UserID { get; set; }

        public byte UserStatusColour { get; set; }

        public string MessageText { get; set; }

        [Include]
        [Association("asdf", "UserID", "UserID")]
        public EntityCollection<Account> Accounts { get; set; }

        public DateTime AddedDate { get; set; }

        public Nullable<long> CostCentreID { get; set; }

        public DateTime? DeletedDate { get; set; }

        public string EmailAddress { get; set; }

        public long EmployeeID { get; set; }

        public string FirstName { get; set; }

        public Nullable<bool> IsLeaver { get; set; }

        public string LastName { get; set; }

        public DateTime LastSeenDate { get; set; }

        public string LoginDomain { get; set; }

        public string LoginName { get; set; }

        public byte WorldBuilderStatusID { get; set; }

    } 
```

也无法获得可靠失败的解决方案。似乎每当我稍微更改服务时，即重新编译它，一切正常。

[手工构建的 DomainService 上的 RIAServices 不受支持的类型](https://stackoverflow.com/questions/1607973/riaservices-unsupported-types-on-hand-built-domainservice) - 似乎在说同样的事情，用 LinqToEntitiesDomainServiceDescriptionProvider 装饰手工构建的服务应该可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:09:35.223

此处可能的答案也将在[此处](http://social.msdn.microsoft.com/Forums/en-US/silverlightwcf/thread/57960ae2-f5aa-4896-89ca-539423456b9e) 发布结果。

来自 Colin Blair：我有点惊讶它居然能奏效，我认为我之前没有见过有人试图将额外的实体传递到命名更新中。它可能是 RIA 服务中的一个错误，它完全可以工作。你想达到什么目的？

旁注，您的 ObjectContext 存在内存泄漏，因为它没有被正确处理。您是否有理由不使用 LinqToEntitiesDomainSerivce？它会为您管理 ObjectContext 的生命周期。

结果：

1）这是有道理的。现在已经重构为更合理的参数（整数/字符串），并且一切正常。

2) 将我的 3 个独立服务合并为 1 个服务，该服务使用 LinqToEntitiesDomainSerivce。我之前把它分开的原因是假设有一个带有 PresentationModel 的 CustomUpdate 不起作用..我不得不继承 DomainService 。我通过制作一个方法解决了这个问题：

```
// need this to avoid compile errors for AddUserPresentationModelToRole.. should never be called
public IQueryable<UserPresentationModel> GetUserPresentationModel()
{
    return null;
} 
```

# jquery - jquery sortable - 在列表之间移动项目有效但不会传播

> ID：14337424
> 
> 赞同：1
> 
> 时间：2013-01-15T12:10:13.117
> 
> 标签：jquery, jquery-ui

我有两个这样的列表：

```
<ul id="sortable2" class="connectedSortable">
  <li class="ui-state-default ui-corner-all" id="sortable2_1">Martin</li>
  <li class="ui-state-default ui-corner-all" id="sortable2_3">Mirek</li>
</ul>
<ul id="sortable1" class="connectedSortable">
  <li class="ui-state-default ui-corner-all" id="sortable1_2">Karel</li>
</ul> 
```

我有这个 jquery 代码：

```
$( "#sortable1, #sortable2, #sortable0" ).sortable({
        connectWith: ".connectedSortable",
        /**/update : function(){
            $.ajax({
                type: "POST",  
                url: "somescript.php",  
                data: 
                {
                data:$("#sortable1").sortable('serialize')+'&'+$("#sortable2").sortable('serialize')
                }, 
                timeout: 50000,
                async: true,
                cache: false
            });
        }/**/
    }).disableSelection(); 
```

我的问题是，当它发送到脚本时，我得到两个数组 sortable1 和 sortable2，但是如果我将项目从一个移动到另一个，它不会在该脚本中发生。我可以排序 1,3 或 3,1 但永远不会 1,2,3 因为项目编号 2 不会添加到该列表中（但它已添加并且存在于浏览器中，该更改不会被传播到 ajaxcall/保存脚本）

**编辑**：我认为这可能与 LI 元素的 ID 值有关，但我不知道如何以不同的方式进行操作 - 如果我将这些 ID 设置为 sortable_1（而不是 sortable2_1），它们会在序列化后生成一个大列表.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:49:57.523

我知道当您在列表中拖动项目时有些奇怪。

当我遇到这个问题时，我解决了它，复制该项目并删除旧项目......我知道这对我的情况有帮助。

```
 //create list items draggagble
    $(".draggableItem").draggable({
        revert: true  //an effect if dropped outside drop zone
    });

    //create lists droppable
    $("ul").sortable({
        cursor: 'pointer'
    }).droppable({
            tolerance: 'pointer',
            drop: function(ev, ui) {
                //copy list item
                var $li = $('<li>').html(ui.draggable.html()).addClass($(ui.draggable).attr("class")).attr("rel", $(ui.draggable).attr("rel"));
                $li.draggable({revert: true});
                $li.appendTo(this);
                //delete old list item
                $(ui.draggable).remove();
                //execute ajax call

                $.ajax({
                    type: ***,
                    url: ***,
                    data: { *** }
                }).done(function() {
                    ***
                });
            }
    }); 
```

我不知道这是您要寻找的答案，但希望对您有所帮助

# java - Java中基于字符串拆分文本文件

> ID：14337426
> 
> 赞同：0
> 
> 时间：2013-01-15T12:10:23.943
> 
> 标签：java, arraylist, split, text-files

如何使用arraylist分割文本文件`string.endwith("Page 1")` 并存储在arraylist中？

谁能帮我做到这一点？

下面的事情我试图做到这一点。

```
while (readerSplit.hasNextLine()) {
                String sLineDataSplit = readerSplit.nextLine();
                if (!sLineDataSplit.endsWith("Page    1")) {
                    sbSplitData.append(sLineDataSplit);
                    sbSplitData.append(newline);
                } else {
                    sbSplitData.append(sLineDataSplit);
                    sbSplitData.append(newline);
                    if (sbSplitData.length() > 100) {
                        System.out.println("Inside");
                        stringList.add(i, sbSplitData);
                        System.out.println(sbSplitData);
                        i++;
                        sbSplitData.setLength(0);
                    }
                    System.out.println("Outside");
                    System.out.println(sbSplitData);
                }
            } 
```

这是我文件中的一些文本。

```
007                                                     Date  1/04/13           Page    1
   1                                                    Account Number         1000000000
   1                                                    Enclosures
013            Test S.A.(Test)
   1           URB. MARBELLA CALLE AQUILINO DE LA
   1           GUARDIA CON CALLE 47 TORRE BANESCO
   1           PISO 27 Y 28 CIUDAD DE PANAMA
   1           PANAMA
024   As of 1/1/2013, funds in a noninterest-bearing transaction account (including an
   1  IOLTA) will no longer receive unlimited deposit insurance coverage.  They will be
   1  insured to the legal maximum of $250,000 for each ownership category.
   2  ................................ ACCOUNT DETAIL ...............................
   0  ................................ ACCOUNT DETAIL ...............................
   2  CHECKING ACCOUNT FRG AFFL BANK
   0  CHECKING ACCOUNT FRG AFFL BANK             Number of Enclosures                  0
   1  Account Number                1000007904   Statement Dates   1/04/13 thru  1/06/13
   1  Previous Balance               50,226.18   Days in the statement period          3
   1     10 Deposits/Credits        338,888.67   Average Ledger                50,768.40
   1     30 Checks/Debits           338,246.00   Average Collected             50,768.40
   1  Total Fees                           .00
   1  Interest Paid                        .00
   1  Current Balance                50,868.85
   3  Deposits and Additions
   0  Deposits and Additions
   1  Date      Description                                   Amount        Refe
   0  Date      Description                                   Amount        Refe
   1   1/04     WIRE-IN 20130040042300 ATLANTI            300,000.00
   1            OBI:
   1   1/04     WIRE-IN 20130040038800 1/CARVA              4,295.00
   1            OBI:
   1   1/04     WIRE-IN 20130030004900 NEW CHA              1,563.67
   1            OBI:PENSION MES DE DICIEMBRE D
   1   1/04     INTERNAL TRF 20130040011800                13,995.00
007                                                     Date  1/04/13           Page    2
   1                                                    Account Number         1000000000
   1                                                    Enclosures
024   CHECKING ACCOUNT FRG AFFL BANK          1000007904  (Continued)
   2  Checks and Withdrawals
   0  Checks and Withdrawals
   1  Date      Description                                   Amount        Refe
   0  Date      Description                                   Amount        Refe
   1   1/04     Transfer to DDA                           292,000.00-
   1            Acct No.       1000007896-D
   1   1/04     WIRE-IN 20130040024900 CARLOS               5,000.00-
   1            OBI:REINTEGRO NESTMARY
   1   1/04     WIRE-IN 20130040025100 ELIZABE              5,000.00-
   1            OBI:PAGO POR ACTIVIDADES DEPOR
   1   1/04     WIRE-IN 20130040027100 COOPERA              2,622.00-
   1            OBI:PAGO
   1   1/04     WIRE-IN 20130040025900 INGENIA              2,550.00-
   1            OBI:PRESTAMO EFECTIVO
   1   1/04     WIRE-IN 20130040013100 JULIANO              2,500.00-
   1            OBI:
   1   1/04     WIRE-IN 20130040013000 MARIA I              2,089.57-
   1            OBI:
   1   1/04     WIRE-IN 20130040013300 JESUS A              2,012.00-
   1   1/04     WIRE-IN 20130040018000 JOSE FR                200.00-
   1            OBI:
   1   1/04     WIRE-IN 20130040027800 EVELYN                 100.00-
   1            OBI:
   2  Daily Balance Information
   0  Daily Balance Information
   1  Date          Balance
   0  Date          Balance
   1   1/04            50,868.85
   2  For more information about FDIC insurance coverage, visit
   1  http://www.fdic.gov/deposit/deposits/unlimited/expiration.html
007                                                     Date  1/04/13           Page    1
   1                                                    Account Number         1000000000
   1                                                    Enclosures                     25
013            Test
   1           7A AVENIDA 11-59 ZONA 9
   1           EDIFICIO GALERIAS ESPAÑA
   1           GUATEMALA CITY
   1           GUATEMALA
024   As of 1/1/2013, funds in a noninterest-bearing transaction account (including an
   1  IOLTA) will no longer receive unlimited deposit insurance coverage.  They will be
   1  insured to the legal maximum of $250,000 for each ownership category.
   2  ................................ ACCOUNT DETAIL ...............................
   0  ................................ ACCOUNT DETAIL ...............................
   2  FINANCIAL INSTITUTIONS
   0  FINANCIAL INSTITUTIONS                     Number of Enclosures                 25
   1  Account Number                1000059038   Statement Dates   1/01/13 thru  1/06/13
   1  Previous Balance            2,290,044.74   Days in the statement period          6
   1      7 Deposits/Credits        952,853.71   Average Ledger             1,836,411.23
   1     33 Checks/Debits         1,522,979.73   Average Collected          1,836,411.23
   1  Total Fees                           .00
   1  Interest Paid                        .00
   1  Current Balance             1,719,918.72
   3  Deposits and Additions
   0  Deposits and Additions
   1  Date      Description                                   Amount        Refe
   0  Date      Description                                   Amount        Refe
   1   1/02     WIRE-IN 20130020001800 ONMOBIL              2,500.00
   1            OBI:FOR THE FINAL CREDIT OF AN
   1   1/02     WIRE-IN 20130020009400 VIGO RE                114.00
   1            OBI:VIGO SETTLEMENT GTV14
   1   1/03     WIRE-IN 20130030030100 BANCO I            800,000.00
   1            OBI:TRASLADO DE FONDOS DE SU C
   1   1/03     WIRE-IN 20130030013700 MR BEYN              1,324.90
   1            OBI:C/C 17026009260 ANA ANGELI
   1   1/03     Remote Deposit Capture Deposit             70,725.00
   1   1/04     WIRE-IN 20130040010500 VIGO RE             10,826.73
   1            OBI:VIGO SETTLEMENT GTV14
   1   1/04     Remote Deposit Capture Deposit             67,363.08
   2  Checks and Withdrawals
   0  Checks and Withdrawals
   1  Date      Description                                   Amount        Refe
   0  Date      Description                                   Amount        Refe
   1   1/02     WIRE-IN 20130020023200 SAN LAZ            394,020.00-
   1            OBI:/RFB/ F/F/C TO ACCOUNT 569
   1   1/02     WIRE-IN 20130020029300 UNISOUR             22,589.50-
   1            OBI:/RFB/UNIVERSITY EXPENSES S
   1   1/02     WIRE-IN 20130020029700 UNISOUR             10,020.00-
   1            OBI:/RFB/DEPOSIT TO ACCOUNT
   1   1/02       7367*               17,000.00  1/03       7397                15,000.00
   1   1/04       7370*              100,000.00  1/04       7403*               20,000.00
   1   1/03       7371                20,000.00
   1  * Denotes missing check numbers
   2  Daily Balance Information
   0  Daily Balance Information
   1  Date          Balance
   0  Date          Balance       Date          Balance
   0                              Date          Balance
   1   1/01         2,290,044.74   1/03         1,816,672.91
   1   1/02         1,751,993.61   1/04         1,719,918.72
   2  For more information about FDIC insurance coverage, visit
   1  http://www.fdic.gov/deposit/deposits/unlimited/expiration.html
007                                                     Date  1/04/13           Page    1
   1                                                    Account Number         1000000000
   1                                                    Enclosures
013            Test
   1           (SETTELMENT VISA ACCOUNT)
   1           7A AVENIDA 11-59 ZONA 9
   1           EDIFICIO GALERIAS ESPAÑA
   1           GUATEMALA CITY
   1           GUATEMALA
024   As of 1/1/2013, funds in a noninterest-bearing transaction account (including an
   1  IOLTA) will no longer receive unlimited deposit insurance coverage.  They will be
   1  insured to the legal maximum of $250,000 for each ownership category.
   2  ................................ ACCOUNT DETAIL ...............................
   0  ................................ ACCOUNT DETAIL ...............................
   2  FINANCIAL INSTITUTIONS
   0  FINANCIAL INSTITUTIONS                     Number of Enclosures                  0
   1  Account Number                1000062412   Statement Dates   1/01/13 thru  1/06/13
   1  Previous Balance              385,002.47   Days in the statement period          6
   1        Deposits/Credits               .00   Average Ledger               374,620.47
   1      7 Checks/Debits            15,367.65   Average Collected            374,620.47
   1  Total Fees                           .00
   1  Interest Paid                        .00
   1  Current Balance               369,634.82
   3  Checks and Withdrawals
   0  Checks and Withdrawals
   1  Date      Description                                   Amount        Refe
   0  Date      Description                                   Amount        Refe
   1   1/02     WIRE-OUT 20130020006601                     6,293.81-
   1            OBI:4423210000 VSS SETTLEMENT
   1   1/02     WIRE Out Fee                                   20.00-
   1   1/03     WIRE-OUT 20130030011401                     3,541.38-
   1            OBI:4423210000 VSS SETTLEMENT
   1   1/03     WIRE Out Fee                                   20.00-
   1   1/04     Account Service Fee Corresp.Bk                 80.00-
   1   1/04     WIRE-OUT 20130040010401                     5,392.46-
   1            OBI:4423210000 VSS SETTLEMENT
   1   1/04     WIRE Out Fee                                   20.00-
   2  Daily Balance Information
   0  Daily Balance Information
   1  Date          Balance
   0  Date          Balance       Date          Balance
   0                              Date          Balance
   1   1/01           385,002.47   1/03           375,127.28
   1   1/02           378,688.66   1/04           369,634.82
   2  For more information about FDIC insurance coverage, visit
   1  http://www.fdic.gov/deposit/deposits/unlimited/expiration.html 
```

等待任何建议或帮助。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:20:00.740

1.  简单的基本思想是创建一个 ArrayList。
2.  `newLine`如果它不包含，则从方法创建一个 StringBuffer 添加字符串`"Page 1"`。
3.  如果`newLine` 方法返回的字符串包含`"Page 1"`，则将 StringBuffer 添加到 arraylist 并创建新的 StringBuffer 。并再次执行相同的步骤 2。

对于一些建议：[lastIndexOf](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#lastIndexOf%28java.lang.String%29)，您也可以尝试[contains](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)方法。

```
List<StringBuffer> list = new ArrayList<StringBuffer>();
StringBuffer sb = new StringBuffer();
int i = 1; // I think page no is changing form 1 to ...
while (readerSplit.hasNextLine()) {
   String sLineDataSplit = readerSplit.nextLine().trim();
   // take a look for lastIndexOf function.
   if (sLineDataSplit.lastIndexOf("Page    "+i)==9 && sb.length()>0) {
       list.add(sb);
       sb = new StringBuffer();
       sb.append(sLineDataSplit);
       i++; // to get the next page 
    } 
    else{
       sb.append(sLineDataSplit);
    }
  } 
```

# php - 转义空格：%20 或 + - smarty

> ID：14337428
> 
> 赞同：2
> 
> 时间：2013-01-15T12:10:28.157
> 
> 标签：php, escaping, smarty

我使用 smarty 作为模板引擎。我必须转义图像文件路径 {$filepath|urlencode}，问题是空格被转换为“+”，这会阻止在服务器上访问图像：%20 可以工作，如何正确转义我自己的路 ？编辑：更准确地说，我使用 facebook 分享链接

我使用 facebook 共享，共享时不显示图像：

```
`<a href="facebook.com/dialog/feed?app_id={$fbappid}&amp;link={$mainsite|‌​escape:'u‌​rl'}{$someurl|urlencode}&amp;picture={$mainsite|escape:'url'}{$picture()‌​|escape‌​:"url"}&amp;name={$somename}&amp;description=Join%20Us%21 &amp;redirect_uri={$mainsite|escape:'url'}{$some|urlencode}" onclick="window.open(this.href);return false;"></a>` 
```

最终代码看起来像我的具体用法：

```
<a href="http://www.facebook.com/dialog/feed?app_id=...&amp;link=http%3A%2F%2Fmysite.org%2Findex.php%3Fpage%3Dcampaign%26campaign_id%3D18&amp;picture=http%3A%2F%2Fmysite.org%2Ffiles%2Fcampaign%2Fimage%2Foriginals%2F18%2FSans+titre-3.jpg&amp;name=Some text &quot;Text d&#039;Text&quot;, Text&amp;description=Rejoignez%20la%20campagne%21&amp;redirect_uri=http%3A%2F%2Fmysite.org%2Findex.php%3Fpage%3Dcampaign%26campaign_id%3D18"onclick="window.open(this.href);return false;"> 
```

在同一个站点上，所有 facebook 共享链接都可以正常工作，并且图像显示良好！我认为是该特定图像的链接不起作用的原因

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T12:13:09.657

逃避是你正在寻找的东西。看看： [http ://www.smarty.net/docsv2/en/language.modifier.escape.tpl](http://www.smarty.net/docsv2/en/language.modifier.escape.tpl)

```
 {$filepath|escape:"url"} 
```

urlencode 用于编码（而不是转义！）作为 GET var 传递的 URL 内的查询部分的字符串：http: [//php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:18:38.697

URL 编码空间是加号或`%20`. 它们是等价的，并且都被解释为服务器上的一个空间。

如果您在 URL 中看到任何一个，那么服务器将看到一个空格。

你说加号阻止了图像被加载。这听起来比简单地使用错误的编码更深层次的问题。可能它被双重编码？

浏览器中请求的实际 URL 是什么？打开开发工具/Firebug，查看请求以找出答案。如果 URL 包含`%2B`，则加号被双重编码。这是您需要解决的问题。

当然，另一种解决方案是不在网络上的文件名中使用空格。文件名中需要空格的唯一原因是为了可读性，但由于 Web 需要对空格进行 urlencoded，所以无论如何它都会消除这种可读性。拿走空间，问题就会自行消失。

# javascript - 使用jQuery或javascript在屏幕处于特定大小时删除Div标签？

> ID：14337438
> 
> 赞同：2
> 
> 时间：2013-01-15T12:11:12.460
> 
> 标签：javascript, jquery, html

嗨，我想知道使用 jQuery 或 javascript 是否可以删除某个 div 标签，以便当屏幕达到一定大小时它根本不显示，比如说 500px。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:14:57.953

您应该使用`matchMedia`Javascript API，它现在对跨浏览器有很好的支持**。**

例如：

```
var width = window.matchMedia('screen and (width: 500px)'); 
```

`matchMedia`将返回一个`MediaQueryList`对象，其中包含一个`matches`布尔值，指示传入的*媒体查询*当前是否匹配。

这些对象的*伟大之处*在于，当状态发生变化时`MediaQueryList`，它们提供了*添加*和*删除侦听器的方法。*

例如：

```
width.addListener(function( mql ) {
    if( mql.matches ) {
        // yes, the device screen width is now 500 pixels
    } else {
       // no, the width is below 500 pixels
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:14:30.753

你可以在 jQuery 中写这样的东西

```
 $(document).ready(function(){
     $(window).resize(function(){
       if($(window).width()==500)
         $('div').hide();
       else
         $('div').show();
     });
   }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:15:06.307

您可以使用[CSS 媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)来做到这一点：

```
@media screen and (min-width: 500px) {

    div.whatever { display: none; }

} 
```

# r - R中的分段线性和非线性回归

> ID：14337439
> 
> 赞同：6
> 
> 时间：2013-01-15T12:11:18.263
> 
> 标签：r

我有一个问题可能比直接与 r 相关的问题更像是一个统计查询，但可能是我只是错误地调用了一个 r 包，所以我将在此处发布问题。我有以下数据集：

```
x<-c(1e-08, 1.1e-08, 1.2e-08, 1.3e-08, 1.4e-08, 1.6e-08, 1.7e-08, 
1.9e-08, 2.1e-08, 2.3e-08, 2.6e-08, 2.8e-08, 3.1e-08, 3.5e-08, 
4.2e-08, 4.7e-08, 5.2e-08, 5.8e-08, 6.4e-08, 7.1e-08, 7.9e-08, 
8.8e-08, 9.8e-08, 1.1e-07, 1.23e-07, 1.38e-07, 1.55e-07, 1.76e-07, 
1.98e-07, 2.26e-07, 2.58e-07, 2.95e-07, 3.25e-07, 3.75e-07, 4.25e-07, 
4.75e-07, 5.4e-07, 6.15e-07, 6.75e-07, 7.5e-07, 9e-07, 1.15e-06, 
1.45e-06, 1.8e-06, 2.25e-06, 2.75e-06, 3.25e-06, 3.75e-06, 4.5e-06, 
5.75e-06, 7e-06, 8e-06, 9.25e-06, 1.125e-05, 1.375e-05, 1.625e-05, 
1.875e-05, 2.25e-05, 2.75e-05, 3.1e-05)

y2<-c(-0.169718017273307, 7.28508517630734, 71.6802510299446, 164.637259265704, 
322.02901173786, 522.719633360006, 631.977073772459, 792.321270345847, 
971.810607095548, 1132.27551798986, 1321.01923840546, 1445.33152600664, 
1568.14204073109, 1724.30089942149, 1866.79717333592, 1960.12465709003, 
2028.46548012508, 2103.16027631327, 2184.10965255236, 2297.53360080873, 
2406.98288043262, 2502.95194879366, 2565.31085776325, 2542.7485752473, 
2499.42610084412, 2257.31567571328, 2150.92120390084, 1998.13356362596, 
1990.25434682546, 2101.21333152526, 2211.08405955931, 1335.27559108724, 
381.326449703455, 430.9020598199, 291.370887491989, 219.580548355043, 
238.708972427248, 175.583544448326, 106.057481792519, 59.8876372379487, 
26.965143266819, 10.2965349811467, 5.07812046132922, 3.19125838983254, 
0.788251933518549, 1.67980552001939, 1.97695007279929, 0.770663673279958, 
0.209216903989619, 0.0117903221723813, 0.000974437796492681, 
0.000668823762763647, 0.000545308757270207, 0.000490042305650751, 
0.000468780182460397, 0.000322977916070751, 0.000195423690538495, 
0.000175847622407421, 0.000135771259866332, 9.15607623591363e-05) 
```

当情节看起来像这样时： [![分割测试](../Images/a060370d4abc27bd4c1c6213c4b5d69d.png)](https://i.stack.imgur.com/YnINu.png)

然后我尝试使用分割包在三个区域（10^⁻8--10^⁻7,10^⁻7--10^⁻6 和 >10^-6）中生成三个线性回归（黑色实线） ) 因为我有在这些不同地区寻找不同关系的理论基础。显然，但是我尝试使用以下代码是不成功的：

```
lin.mod <- lm(y2~x)
segmented.mod <- segmented(lin.mod, seg.Z = ~x, psi=c(0.0000001,0.000001)) 
```

因此，我的第一个问题 - 除了断点之外，我还可以调整分段的其他参数吗？据我了解，我在这里将迭代设置为默认值。

我的第二个问题是：我可以尝试使用 nls 包进行分割吗？看起来图上的前两个区域（10^⁻8--10^⁻7 和 10^-7--10^-6）比最后一个区域更远离线性，所以也许多项式函数会更好这里？

作为我认为可以接受的结果示例，我已经手动注释了原始图： [![带注释的分割示例](../Images/27f98bd9d57ce0b05098c352dfb675b3.png)](https://i.stack.imgur.com/CPmO4.jpg) .

编辑：使用线性拟合的原因是它们提供的简单性，对我未经训练的眼睛来说，它需要一个相当复杂的非线性函数来将数据集作为一个单元进行回归。我想到的一个想法是将对数正态模型拟合到数据中，因为考虑到沿对数 x 轴的偏斜，这可能会起作用。但是，我在 R 方面没有足够的能力来做到这一点，因为我的知识只扩展到 fitdistr，据我所知，这在这里不起作用。

任何有关方向的帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T13:02:35.093

如果对包不满意`segmented`，可以试试用**火星**算法的[earth](http://cran.r-project.org/web/packages/earth/index.html)包。但是在这里，我发现分段模型的结果是非常可以接受的。请参阅下面的 R 平方。

 **```
lin.mod <- lm(y2~x)
segmented.mod <- segmented(lin.mod, seg.Z = ~x, psi=c(0.0000001,0.000001))
 summary(segmented.mod)

Meaningful coefficients of the linear terms:
              Estimate Std. Error t value Pr(>|t|)    
(Intercept) -2.163e+02  1.143e+02  -1.893   0.0637 .  
x            4.743e+10  3.799e+09  12.485   <2e-16 ***
U1.x        -5.360e+10  3.824e+09 -14.017       NA    
U2.x         6.175e+09  4.414e+08  13.990       NA    

Residual standard error: 232.9 on 54 degrees of freedom
Multiple R-Squared: 0.9468,  Adjusted R-squared: 0.9419 

Convergence attained in 5 iterations with relative change 3.593324e-14 
```

您可以通过绘制模型来检查结果：

```
plot(segmented.mod) 
```

![在此处输入图像描述](../Images/470d5e0e891b445b67314402ee81db39.png)

要获得 plots 的系数，您可以这样做：

```
intercept(segmented.mod)
$x
              Est.
intercept1 -216.30
intercept2 3061.00
intercept3   46.93

> slope(segmented.mod)
$x
             Est.   St.Err.  t value  CI(95%).l  CI(95%).u
slope1  4.743e+10 3.799e+09  12.4800  3.981e+10  5.504e+10
slope2 -6.177e+09 4.414e+08 -14.0000 -7.062e+09 -5.293e+09
slope3 -2.534e+06 5.396e+06  -0.4695 -1.335e+07  8.285e+06 
```**

# php - 回显标题值php上的语法错误

> ID：14337440
> 
> 赞同：-1
> 
> 时间：2013-01-15T12:11:22.007
> 
> 标签：php

这是我的全部回声

```
echo '<a class="delete" onclick="CLBK_foo(\''.$id_encrypted.'\','.($this->uri->segment(3) != '' ? $this->uri->segment(3) : 0).', \'\', \'\', \'#ajax\'); return false;" title="<?php echo $this->lang->line(\'lbl_duplicate\') ?>" href="javascript:void(0);"><img alt="elimina" src="'.base_url().$this->config->item('FAL_assets_front').'/'.$this->config->item('FAL_images').'/delete_min.png"/></a>'; 
```

我的具体问题在这里

```
 title="<?php echo $this->lang->line(\'lbl_duplicate\') ?>" 
```

我有语法错误...我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:12:40.523

替换这个：

```
title="<?php echo $this->lang->line(\'lbl_duplicate\') ?>" 
```

有了这个：

```
title="' . $this->lang->line('lbl_duplicate') . '" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:14:02.500

您已经在`echo`'d 字符串的上下文中，因此您应该连接，而不是`echo`再次 ing，如下所示：

```
echo '<a class="delete" onclick="CLBK_foo(\''.$id_encrypted.'\','.($this->uri->segment(3) != '' ? $this->uri->segment(3) : 0).', \'\', \'\', \'#ajax\'); return false;" title="' . $this->lang->line('lbl_duplicate') . '" href="javascript:void(0);"><img alt="elimina" src="'.base_url().$this->config->item('FAL_assets_front').'/'.$this->config->item('FAL_images').'/delete_min.png"/></a>'; 
```

请注意，这真的不是做你正在做的事情的最佳方式。跳出 PHP 直接输出 HTML 会更清晰，有点像这样：

```
?>
<a class="delete"
    onclick="CLBK_foo('<?= $id_encrypted ?>', '<?=($this->uri->segment(3) != '' ? $this->uri->segment(3) : 0) ?>, '', '', '#ajax\'); return false;"
    title="<?= $this->lang->line('lbl_duplicate') ?>" href="javascript:void(0);">
    <img alt="elimina" src="<?= base_url() . $this->config->item('FAL_assets_front') . '/' . $this->config->item('FAL_images') ?>/delete_min.png"/>
</a>
<?php 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T12:13:55.037

如果是php你可以试试这个

```
$title=$this->lang->line(\'lbl_duplicate\'); 
```

或者

```
<?php
$title=$this->lang->line(\'lbl_duplicate\');
?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-15T12:24:50.643

让它简单

```
<?php $titleValue = $this->lang->line('lbl_duplicate'); ?>

title="<?php echo $titleValue; ?>" 
```

# c++ - 用四元数“看”一个对象

> ID：14337441
> 
> 赞同：11
> 
> 时间：2013-01-15T12:11:23.433
> 
> 标签：c++, opengl, rotation, sfml, quaternions

所以我目前正在尝试创建一个函数，该函数将采用两个 3D 点 A 和 B，并为我提供表示 A 点“查看”B 点所需的旋转的四元数（这样 A 点的局部 Z 轴通过B点，如果你愿意的话）。

我最初发现[了这篇文章](https://stackoverflow.com/questions/13014973/quaternion-rotate-to)，其中的最佳答案似乎为我提供了一个很好的起点。我继续实现以下代码；正如原始答案所暗示的那样，我没有假设默认的 (0, 0, -1) 方向，而是尝试提取一个表示相机实际方向的单位向量。

```
void Camera::LookAt(sf::Vector3<float> Target)
{
    ///Derived from pseudocode found here:
    ///https://stackoverflow.com/questions/13014973/quaternion-rotate-to

    //Get the normalized vector from the camera position to Target
    sf::Vector3<float> VectorTo(Target.x - m_Position.x,
                                Target.y - m_Position.y,
                                Target.z - m_Position.z);
    //Get the length of VectorTo
    float VectorLength = sqrt(VectorTo.x*VectorTo.x +
                              VectorTo.y*VectorTo.y +
                              VectorTo.z*VectorTo.z);
    //Normalize VectorTo
    VectorTo.x /= VectorLength;
    VectorTo.y /= VectorLength;
    VectorTo.z /= VectorLength;

    //Straight-ahead vector
    sf::Vector3<float> LocalVector = m_Orientation.MultVect(sf::Vector3<float>(0, 0, -1));

    //Get the cross product as the axis of rotation
    sf::Vector3<float> Axis(VectorTo.y*LocalVector.z - VectorTo.z*LocalVector.y,
                            VectorTo.z*LocalVector.x - VectorTo.x*LocalVector.z,
                            VectorTo.x*LocalVector.y - VectorTo.y*LocalVector.x);

    //Get the dot product to find the angle
    float Angle = acos(VectorTo.x*LocalVector.x +
                       VectorTo.y*LocalVector.y +
                       VectorTo.z*LocalVector.z);

    //Determine whether or not the angle is positive
    //Get the cross product of the axis and the local vector
    sf::Vector3<float> ThirdVect(Axis.y*LocalVector.z - Axis.z*LocalVector.y,
                                 Axis.z*LocalVector.x - Axis.x*LocalVector.z,
                                 Axis.x*LocalVector.y - Axis.y*LocalVector.x);
    //If the dot product of that and the local vector is negative, so is the angle
    if (ThirdVect.x*VectorTo.x + ThirdVect.y*VectorTo.y + ThirdVect.z*VectorTo.z < 0)
    {
        Angle = -Angle;
    }

    //Finally, create a quaternion
    Quaternion AxisAngle;
    AxisAngle.FromAxisAngle(Angle, Axis.x, Axis.y, Axis.z);

    //And multiply it into the current orientation
    m_Orientation = AxisAngle * m_Orientation;
} 
```

这*几乎*可以工作。发生的情况是相机似乎向目标点旋转了一半的距离。如果我再次尝试旋转，它会执行剩余旋转的一半，无限循环，这样如果我按住“查看按钮”，相机的方向会越来越接近直接看目标，但也会不断它的旋转速度减慢，以至于它永远不会*到达*那里。

请注意，我不想求助于 gluLookAt()，因为我最终还需要此代码来将相机以外的对象相互指向*，*并且我的对象已经使用四元数作为它们的方向。例如，我可能想要创建一个眼球来跟踪在它前面移动的物体的位置，或者创建一个可以更新其方向以寻找目标的射弹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T14:17:19.943

`Axis`在将向量传递给 之前对其进行归一化`FromAxisAngle`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T14:12:39.780

为什么要使用四元数？在这种情况下，您只是让事情变得更复杂并需要更多的计算。要设置矩阵：-

```
calculate vector from observer to observed (which you're doing already)
normalise it (again, doing it already) = at
cross product this with the observer's up direction = right
normalise right
cross product at and right to get up 
```

你就完成了。right, up 和 at 向量是矩阵的第一行，第二行和第三行（或列，取决于您如何设置）。最后一行/列是对象的位置。

但看起来您想在几帧内将现有矩阵转换为这个新矩阵。SLERP 对矩阵和四元数都这样做（当你研究数学时这并不奇怪）。对于转换，存储初始矩阵和目标矩阵，然后在它们之间存储 SLERP，将每帧的数量更改为 SLERP（例如 0、0.25、0.5、0.75、1.0 - 尽管非线性进程看起来更好）。

不要忘记您将四元数转换回矩阵以便将其传递给渲染管道（除非着色器中有一些新功能可以原生处理四元数）。因此，由于使用四元数而产生的任何效率都必须考虑到转换过程。

# r - for 循环更改内置函数的参数值

> ID：14337443
> 
> 赞同：0
> 
> 时间：2013-01-15T12:11:31.630
> 
> 标签：r

我正在尝试编写一个使用内置函数的 for 循环，在每次运行时更改其参数之一的值。

内置函数是来自 msm 包的 qmatrix.mns（多阶段马尔可夫模型）。它计算不同阶段之间的转换率。它的主要论点是：多阶段马尔可夫模型（msm.Full）和协变量（在列表中提供）。

我写了以下函数（它有效）：

```
transRate<-function(grossTon,held, cpue){
  estim<-data.frame(matrix(rep(0,21),7,3))  
  for(i in 1:3){  
    qMatrix<-qmatrix.msm(msm.Full,  ci="normal", covariates=list(grossTon=grossTon,    held=held, cpue=cpue,period=i))

          estim[i]<-qMatrix$estimates[c(5,2,10,7,13,14,15)]# extracts transition rates that I'm interested in
          rownames(estim)<-c("q12","q21","q23","q32","q14","q24","q34")
          colnames(estim)<-c("period 1", "period 2","period 3")
        }

          return(estim)                     
    }                    

    transRate(grossTon=10,held=10,cpue=0.5) 
```

结果是：

```
 period1     period2     period3
q12 0.011523315 0.01100657  0.01051299
q21 0.006939337 0.00528312  0.004022193
q23 0.161752987 0.079884    0.039451841
q32 0.016379169 0.01661803  0.01686038
q14 1.134517831 1.13026321  1.126024543
q24 0.426243172 0.78585263  1.448854529
q34 0.240552571 0.74682982  2.318639844 
```

这很容易，因为协变量“周期”有 3 个可能的值：1、2、3，但是当我尝试使用协变量“grossTon”时情况有所不同，其潜在值在 10 到 120 之间。我想要的是GrossTon 的值为 10、20、30、...、120。

请看看我做了什么：

```
transRate<-function(held, cpue, period){
estim<-data.frame(matrix(rep(0,84),7,12)) 
grossT<-c(10,20,30,40,50,60,70,80,90,100,110,120)
  for(i in grossT){  #I guess the problem is here
    qMatrix<-qmatrix.msm(msm.Full,  ci="normal", covariates=list(grossTon=i, held=held, cpue=cpue,period=period))
    estim[i]<-qMatrix$estimates[c(5,2,10,7,13,14,15)]
    rownames(estim)<-c("q12","q21","q23","q32","q14","q24","q34")
    colnames(estim)<-c("10","20","30","40","50","60","70","80","90","100","110","120")

   }
    return(estim)                     
}                    

transRate(held=10,cpue=0.5,period=1) 
```

我期待的是以下输出：

```
 10  20  30  40  50  60  70  80  90  100 110 120
q12                                             
q21                                             
q23                                             
q32                                             
q14                                             
q24                                             
q34 
```

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:32:05.040

您可以在任何所需的向量上运行循环。因此：

```
for (i in seq(10,120,by=10)) 
```

是解决它的一种方法。在一般情况下，您可以这样做

```
for (i in c(10,15,23,50,100,273)) 
```

或您需要的任何值。

# c++ - 是否可以在没有 pthread 的情况下构建 protobuf？

> ID：14337450
> 
> 赞同：7
> 
> 时间：2013-01-15T12:11:54.843
> 
> 标签：c++, pthreads, protocol-buffers

需要在没有 pthread 的实时操作系统上使用协议缓冲区。我能够以这种方式静态链接 protobuf

```
g++ -g -Wall example.pb.cc example.cc -o example -static -lprotobuf -lpthread 
```

但是，如果没有 pthread，我会收到链接错误。是否可以将 protobuf 配置为在没有 pthread 的情况下工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T12:16:36.427

并不真地。看到[这个](http://code.google.com/p/protobuf/issues/detail?id=248)未解决的问题。

有人修补了较旧的 protobuf 版本，使其不依赖于 pthreads，请参见[此处](http://arachnism.blogspot.no/2010/03/compiling-google-protobuf-without.html)- 如果您真的需要它，您可以查看它，并可能转发端口。

另请注意，在使用 protobuf 时，您应该使用 pkg_config 来获取正确的编译器和链接器标志，例如

```
pkg-config --cflags protobuf         # compiler flags
pkg-config --libs protobuf           # linker flags 
```

# java - 替代会话变量是序列化

> ID：14337451
> 
> 赞同：0
> 
> 时间：2013-01-15T12:11:59.680
> 
> 标签：java, refactoring, session-variables

这是我一直想问的问题。我们总是读到，当我们必须将数据从一页传送到另一页时，最好使用请求对象。现在假设我在 4-5 页上需要大约 10 个不同的数据项。**使用会话变量更好，还是有替代方法？**在我的应用程序中，我有大约 10 个菜单，每个菜单执行不同的操作。在每个这样的菜单中，我都有不同的数据，这些数据在菜单之间并不常见。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:28:56.320

对于这类问题（导航），我更喜欢无状态的方法。也就是说，在 url 或请求正文中传递信息。有状态的方法最终更难，可扩展性更低，每个用户消耗更多内存，并且与任何其他全局变量一样，您必须非常小心地处理它。

请记住，HTTP 是一种无状态协议，因此您应该更喜欢无状态设计。有状态的方法只是双方（客户端和服务器）用来实现你所知道的会话变量的魔法的一种技巧。

在请求中发送所需的信息！

# wordpress - Wordpress tinyMCE 附加按钮，带有弹出窗口，末尾为“0”

> ID：14337452
> 
> 赞同：2
> 
> 时间：2013-01-15T12:12:01.763
> 
> 标签：wordpress, plugins, tinymce

代码的重要部分：

javascript tinymce插件：

```
init : function(ed, url) {

            ed.addCommand('addVocabularyLinkCallout', function() {
                ed.windowManager.open({
                    file : ajaxurl + '?action=addvocabularylinkbutton_function',
                    width : 350 + parseInt(ed.getLang('mytest.delta_width', 0)),
                    height : 250 + parseInt(ed.getLang('mytest.delta_height', 0)),
                    inline : 1
                }, {
                    plugin_url : url
                });
            });
            ed.addButton('addvocabularylink', {
                title : 'Dodaj link do słowniczka',
                cmd : 'addVocabularyLinkCallout',
                image : url+'/../img/tinymce/insertpopup.png'
            });

        }, 
```

wordpress ajax 支持，仅适用于登录用户：

```
add_action('wp_ajax_addvocabularylinkbutton_function', 'addvocabularylinkbutton_function_callback');
function addvocabularylinkbutton_function_callback() {?>
<!DOCTYPE html>
<head>
    <title>Create a Single Link - Button</title>

</head>
<body>
<h2>Test</h2>
</html> 
<?php }; ?> 
```

窗口本身不做任何事情并不重要，困扰我的是弹出窗口代码末尾的“0”：

```
<!DOCTYPE html>
<head>
    <title>Create a Single Link - Button</title>

</head>
<body>
<h2>Test</h2>
</html> 
0 
```

如何摆脱它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:15:08.377

经过这里和那里的挖掘，我发现这不是 TinyMCE 的问题，而是 wp_ajax 标注的问题。它需要：

```
die; 
```

在末尾。

所以正确的代码是：

```
add_action('wp_ajax_addvocabularylinkbutton_function', 'addvocabularylinkbutton_function_callback');
function addvocabularylinkbutton_function_callback() {?>
<!DOCTYPE html>
<head>
    <title>Create a Single Link - Button</title>

</head>
<body>
<h2>Test</h2>
</html> 
<?php 
    die;
}; 
?> 
```

# java - 为什么不推荐从列表到列表的转换？

> ID：14337453
> 
> 赞同：5
> 
> 时间：2013-01-15T12:12:04.930
> 
> 标签：java, list, casting

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T12:14:09.007

苹果**是**水果，但苹果列表**不是**水果列表。

如果是，你可以在苹果列表中放一根香蕉

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T12:58:49.893

直接转换列表是不好的，因为它颠覆了 Java 类型系统。强制转换总是会成功，但程序可能会`ClassCastException`在您稍后检索项目时失败，此时错误的来源可能不清楚。

通常，您希望程序在尽可能接近错误源的位置失败。如果你强制转换列表，它可能会在有人真正尝试访问元素之前传递一段时间，到它抛出 a`ClassCastException`时，可能真的很难追踪到那个强制转换（至少比 if*更难*）该程序在演员表中失败）。

从您的评论看来，您确定其中的所有`listA`内容实际上都是 a`B`在这种情况下，我建议：

```
List<B> listB = new ArrayList(listA.size());
for (A a : listA) {
  if (a == null || a instanceof B) {
    listB.add((B) a);
  } else {
    //Either ignore or throw exception
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T12:17:29.157

为此，您必须了解`List<A>`and`List<B>`是两种不同的类型，没有层次关系，*即使`A`和`B`是层次相关的*。即使`B`是 的子类`A`，将 a 强制转换`List<B>`为 a也是不好的，因为它可以允许您将(但不是) 的`List<A>`实例添加到该列表中，并且编译器会很乐意这样做，即使它与实际的 (运行时) 不一致集合的类型。`A``B`

我不知道你可以在 Java 中规避这一点，但如果你能做到，那只是因为*类型擦除*：因为 Java 创建了一个类，例如`List<Object>`，对于该泛型类的不同“实现”，它只是在你的代码中添加强制转换在编译它之前。这与（比如说）C# 形成对比，C# 实际上`List<T>`只使用作为“编译”模板（称为“通用定义”）来按需创建具体类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T12:53:14.070

泛型的工作方式有所不同，因此**list< B >**不是**list< A >**类型，尽管**B**是**A**的类型。

# solr - 自动产品分类和查询加权

> ID：14337456
> 
> 赞同：3
> 
> 时间：2013-01-15T12:12:20.100
> 
> 标签：solr, lucene, machine-learning, mahout

我在使用 solr 时遇到了排名问题，我被困住了。

给定一个电子商务网站，对于查询“ipad”，我获得：

1.  适用于 ipad 2 的 ipad 外壳
2.  ipad 外壳
3.  ipad 连接套件
4.  ipad 32gb wifi

这是一个问题，因为我们想将主要产品（或产品本身）排在第一位，而 tf/idf 将配件排在第一位，原因是“ipad case compatible with ipad, ipad2, ipad3, ipad Retina, ipad mini 等”。

此外，使用类别我们无法确定是配件还是产品。

我想知道使用自动分类是否会有所帮助。另一个提高此排名的解决方案（如`Named Entity Recognition`）将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T17:36:04.720

你能提供标记数据吗？

如果您有超过 5 万件商品，那么`Naive Bayes`使用基于产品名称训练的二元语言模型几乎可以 99% 的准确率捕获所有配件。我想你可以用 Mahout 训练这样一个朴素的贝叶斯，但是产品名称的双元组数量非常有限，所以现在即使在智能手机上也可以轻松快速地进行训练。

这是典型的机械土耳其人任务，标记一些物品应该不会那么昂贵。但是，如果您坚持使用一些半监督算法，我发现它`Iterative similarity aggregation`非常有用。

主要思想是您提供一些标记，例如“案例”/“电源适配器”，它会迭代地找到指示垃圾邮件的新标记，因为它们出现在相同的上下文中。

[这](http://wwwconference.org/www2011/proceeding/proceedings/p427.pdf)是论文，但我也写了一篇[关于](http://codingwiththomas.blogspot.de/2012/08/set-expansion-by-iterative-similarity.html)此的博文，用简单的语言总结了意图。这篇论文还提到了 Sean 提出的相同的“让用户找到合适的物品”范式，因此两者可以结合使用。

哦，如果你需要一些关于使用 Lucene 和 SOLR 进行机器学习的建议，我可以向你推荐我的朋友 Tommaso Teofili 今年在 ApacheCon Europe 上的演讲。您可以[在 slideshare 上找到幻灯片](http://de.slideshare.net/teofili/text-categorization-with-lucene-and-solr)。还有一个关于谈话的 youtube 视频，只需搜索即可；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:35:25.823

TF/IDF 将根据查询中的单词与您找到的标题中的单词进行排名。听起来这不是“好结果”的正确定义，并且您希望产品胜过配件。

当然，您可以简单地附加启发式方法来修补问题。例如，将标题视为一组单词，而不是多组，因此“iPad”的出现几次没有区别。或者只是提高您知道是产品的项目的分数。这不是学习本身，而是简单，直接反映您的业务知识，并且可能有一些积极的影响。

如果您想在这里学习，您可能需要使用关于什么是最佳结果的最佳知识来源：您的用户。您知道他们在响应每个查询时单击了什么。您可以学习将搜索词与单击的项目相关联的词项模型。你可以看到很多类型的问题——实际上潜在因素推荐模型可以在那里很好地工作。

查看 Ted 关于如何将推荐器用作“搜索引擎”的幻灯片：[http ://www.slideshare.net/tdunning/search-as-recommendation](http://www.slideshare.net/tdunning/search-as-recommendation)

# html - 让跨客户端 HTML 电子邮件中的元素重叠？

> ID：14337457
> 
> 赞同：17
> 
> 时间：2013-01-15T12:12:28.957
> 
> 标签：html, html-email

在浏览器的普通 HTML 中，使元素重叠很容易。

但是在 HTML 电子邮件的黑暗世界中，座右铭是“像 1996 年一样的代码”，因为 Outlook 使用*MS Word*的渲染引擎，Gmail 几乎删除了所有内容，我能想到的使两个元素重叠的每种方法都不合适，因为客户支持不佳：

*   **`Position`**许多客户端不支持，所以 no `position: absolute;`or`position: relative;`和 no `top`, `left`, `right`...
*   **Gmail 和其他人会删除**负边距。**所以，没有负利润。**
***   当标签都需要明确的高度和宽度或布局时，由于缺乏支持和不稳定的处理**`overflow: visible;`**，使用宽度和高度小于元素内容大小的元素的“悬垂”效果不佳s，在大多数情况下[必然需要基于表格](http://htmlemailboilerplate.com/)。（也就是说，如果有任何可能，基于此的东西似乎是最有可能的选择）`<img>``float``<div>`*   不涉及**背景图片**是一个选项，因为这些已在 Gmail 和其他人中删除*   甚至不要考虑尝试在 HTML 电子邮件中使用 CSS3 或 javascript...**

 **是否有任何东西可以可靠地用于在跨客户端 HTML 电子邮件中的元素之间创建重叠？和/或任何使元素从其边界框伸出而不影响其邻居定位的方法？

例如，假设您想做这样的事情（虚线和背景显示边界框），其中大图像*悬挂在*下面的行上而不是向下推...

![在此处输入图像描述](../Images/f8a7907ad73c4deab9aa058fb1c71e14.png)

一个元素（在本例中为`<img>`，但不一定是图像）与其他元素（在本例中为下面的行 - 但不一定是单独的行）重叠，而不会将它们推开。

有没有什么方法可以做到这一点而不会出现重大的客户端兼容性问题？

**编辑：**刚刚发现[了这个疯狂的扭曲天才](https://stackoverflow.com/a/1829885/568458)：使用 colspans 和 rowspans 使表格单元格重叠。这可能是一个选项，但尚未彻底测试其跨客户端渲染，欢迎任何来自先前经验或研究的信息。

* * *

假设我们正在制作时事通讯，我们无法预测客户将使用哪些客户端，所以我们必须支持流行的主流电子邮件客户端：Outlook、Gmail、Yahoo、Hotmail、Thunderbird、iOS/OSX、Android...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-21T18:03:36.297

谈话有点晚了，但[这个类似的答案](https://stackoverflow.com/questions/22380218/issue-in-creating-email-teamplate/22381749#22381749)是你正在寻找的技术。

但是，您的示例要复杂得多，因为您跨越了行和列。我准备好迎接挑战了：

```
<table width="600" border="0" cellpadding="0" cellspacing="0">
  <tr><!-- This row is needed to enforce col widths in Outlook -->
    <td width="100">
    </td>
    <td width="300">
    </td>
    <td width="200">
    </td>
  </tr>
  <tr>
    <td width="400" valign="top" height="80" colspan="2" bgcolor="#bbbbbb">
      Title Here
    </td>
    <td width="200" valign="top" height="120" rowspan="2" bgcolor="#dddddd">
      Image Here
    </td>
  </tr>
  <tr>
    <td width="100" valign="top" height="540" rowspan="2" bgcolor="#cccccc">
      Column<br>...<br>...<br>...
    </td>
    <td width="300" valign="top" height="40" bgcolor="#aaaaaa">
      Heading 1
    </td>
  </tr>
  <tr>
    <td width="500" valign="top" height="500" colspan="2" bgcolor="#eeeeee">
      Content<br>...<br>...<br>...
    </td>
  </tr>
</table> 
```

这是尽可能接近的。您不能制作非矩形，因此正文中的顶部 Header 必须在它自己的单元格中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T07:35:33.670

天才的解决方案在大多数情况下都有效。但是对于 Outlook 2007、2010 和 2013，它不起作用，因为行跨度将被删除。**

# xml - XML 模式编辑器推荐

> ID：14337458
> 
> 赞同：-1
> 
> 时间：2013-01-15T12:12:31.610
> 
> 标签：xml, web-services, soap, wsdl, xsd

我一直在使用 Zend Soap Autodiscovery 为我的 Web 服务创建 WSDL。在使用这个工具几个月后，我发现它不够用。我还发现了一些我同意的观点，基本上听起来像“Zend Autodiscovery 是简单 WSDL 的好工具，但如果你想要更准确的东西就不够了”。

基本上它缺少以下功能：

*   枚举
*   minOccur, maxOccur
*   常用表达

这有助于从我的 PHP 代码中删除许多不必要的逻辑。

我使用过一些 Java 工具，其中包括 XSD 文件的逻辑和物理视图（根据[http://en.wikipedia.org/wiki/XML_Schema_Editor](http://en.wikipedia.org/wiki/XML_Schema_Editor)）。

你能推荐一些好的工具吗？如果它们可以免费用于商业用途，那就太好了，但如果它值得付出代价，我会考虑付费。

最好的问候，并提前感谢您的任何建议。马切伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:21:05.080

我使用[OxygenXml](http://www.oxygenxml.com/)来创作 XSD 文件。它有很好的智能感知，并且很容易从您的 XSD 生成示例 XML。如果您正在创作 XSLT 文件，它（在我看来）是市场上最好的产品，因为它具有出色的智能感知、语法突出显示和调试功能。
[XMLSpy](http://www.altova.com/xmlspy.html)可能是创作 XSD 的行业标准，但价格相当昂贵。

对于测试服务，我通常使用[SoapUi](http://www.soapui.org/)的免费版本，因为它具有很好的测试断言功能 - 但是，它在编辑测试请求时没有智能感知。还可以在 OxygenXML 和 XMLSpy 中生成和测试 Web 服务请求（基于 WSDL）。

# android - 扫描 WiFi 网络

> ID：14337459
> 
> 赞同：-1
> 
> 时间：2013-01-15T12:12:34.377
> 
> 标签：android, android-wifi

我正在尝试为每个 WiFi 网络创建一个按钮。我正在使用以下代码：

```
public void RefreshWifi(View v)
{
    try {
        wifi.startScan();
        wifinetworks = wifi.getScanResults();
        Toast.makeText(this, wifinetworks.toString(), 1).show();
        if (wifinetworks != null) {
            for (ScanResult i : wifinetworks) {
                Button newbutton = new Button(this);
                newbutton.setText(i.getClass().getName());

                wifilayout.addView(newbutton);
            }
        }
    } catch (Exception e) {
        Toast.makeText(this, "Error: " + e.toString(), 1).show();
    }
} 
```

但是我一直在“敬酒” `java.lang.nullpointerexceptions`。

它甚至没有为第一个 toast 声明敬酒。`wifi`是一个`WifiManager`并且`wifinetworks`是一个`List<ScanResult>`。谢谢你。

更新：堆栈跟踪

```
java.lang.NullPointerException
at com.fireoak.hacker.MainActivity.RefreshWifi(MainActivity.java)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at android.view.View$1.onClick(View.java:3592)
at android.view.View.performClick(View.java:4202)
at android.view.View$PerformClick.run(View.java:17340)
at android.os.Handler.handleCallback(Handler.java:725)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5039)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method) 
```

编辑：我是个白痴。忘记设置`wifi`为实际的 WifiManager ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:15:08.550

您在`wifinetworks`空检查之前使用：

```
 Toast.makeText(this, wifinetworks.toString(), 1).show();
    if (wifinetworks != null) { 
```

如果`wifinetworks`在 Toast 上为空，那么您显然会在`wifinetworks.toString()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:18:37.493

在 android manifest.xml 中使用它们

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE"></uses-permission> 
```

# iphone - 如何在 iphone 中以相同的方法加载不同的视图

> ID：14337460
> 
> 赞同：0
> 
> 时间：2013-01-15T12:12:35.243
> 
> 标签：iphone, ios, objective-c

## 头等舱

```
@implementation WatchViewController

- (void)viewDidLoad
{
    [super viewDidLoad];UIButton *watch1 = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
    watch1.frame = CGRectMake(5.0, 10.0, 140.0, 170.0);
    [watch1 setBackgroundImage:[UIImage imageNamed:@"Watch1.png"] forState: UIControlStateNormal];
    [watch1 addTarget:self action:@selector(WatchesPreviewButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [scr addSubview:watch1];

    UIButton *watch2 = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
    watch2.frame = CGRectMake(170.0, 10.0, 140.0, 170.0);
    [watch2 setBackgroundImage:[UIImage imageNamed:@"watch2.png"] forState: UIControlStateNormal];
    [watch2 addTarget:self action:@selector(WatchesPreviewButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [scr addSubview:watch2];
} 
```

## 方法：

```
- (IBAction)WatchesPreviewButtonPressed:(id)sender {

    WatchPreviewViewController *watchesPreviewView = [[WatchPreviewViewController alloc] initWithNibName:@"WatchPreviewViewController"  bundle:nil];
    [self.navigationController pushViewController:watchesPreviewView animated:YES];
    [watchesPreviewView release];
} 
```

## 二等：

```
@implementation WatchPreviewViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
UIScrollView *scr=[[UIScrollView alloc] initWithFrame:CGRectMake(0, 46, 320, 384)];
[self.view addSubview:scr];
NSArray* ds =[NSArray arrayWithObjects:
                      [NSArray arrayWithObjects:[self getPath:@"1a"],[self getPath:@"1b"],[self getPath:@"1c"],[self getPath:@"1d"],nil],
                      [NSArray arrayWithObjects:[self getPath:@"2a"],[self getPath:@"2b"],[self getPath:@"2c"],[self getPath:@"2d"],nil],nil];

 SSView* sv =[SSView createWithFrame:CGRectMake(0, 0, 320, 380) ds:ds];

    if(??????????????????)   //what condition is required for watch1?
{
        sv.curIndexPath =[NSIndexPath indexPathForRow:0 inSection:0];
        [scr addSubview:sv];
}
    else if(?????????????????)          //what condition is required watch2?
{
        sv.curIndexPath =[NSIndexPath indexPathForRow:1 inSection:0];
        [scr addSubview:sv];
} 
```

在第一堂课中，我有两张手表图片，我想通过点击手表来加载下一页视图。为此，我正在使用方法`WatchesPreviewButtonPressed`。在第二类中，我正在创建用于加载按钮单击的页面。在第二堂课中，我在视图中有一个滚动视图。我有图像数组。我想在下次观看点击事件时显示不同的图像。任何人都请我，我是 iphone 开发的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:22:00.800

在 WatchPreviewViewController 中创建类似枚举的样式并创建自己的 init 方法。

```
typedef 枚举 WatchPreviewViewControllerStyleType {
    WatchPreviewViewControllerStyleType1 = 0,
    WatchPreviewViewControllerStyleType2 = 1
    }WatchPreviewViewControllerStyleType;

@interface WatchPreviewViewController : UIViewController
{
    WatchPreviewViewControllerStyleType 样式；
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil andStyle:(WatchPreviewViewControllerStyleType)_style;

```

```
@执行

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil andStyle:(WatchPreviewViewControllerStyleType)_style
{
    self.style=_style;
}

- (void)viewDidLoad
{
    [超级视图DidLoad];

    if(self.style==WatchPreviewViewControllerStyleType1)   
   {

   }
    否则如果（self.style==WatchPreviewViewControllerStyleType2）
   {
   }
}

```

在这个自定义初始化中设置创建控制器时发送的 ivar 样式。然后在 viewDidload 检查样式类型并为该样式添加所需的视图。

并在 WatchViewController

```
@implementation WatchViewController

- (void)viewDidLoad
{
    [超级视图DidLoad];
  UIButton *watch1 = [[UIButton buttonWithType:UIButtonTypeCustom] 保留];
   watch1.tag=123;
    watch1.frame = CGRectMake(5.0, 10.0, 140.0, 170.0);
    [watch1 setBackgroundImage:[UIImage imageNamed:@"Watch1.png"] forState: UIControlStateNormal];
    [watch1 addTarget:self action:@selector(WatchesPreviewButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [scr addSubview:watch1];

    UIButton *watch2 = [[UIButton buttonWithType:UIButtonTypeCustom] 保留];
       watch1.tag=456;
    watch2.frame = CGRectMake(170.0, 10.0, 140.0, 170.0);
    [watch2 setBackgroundImage:[UIImage imageNamed:@"watch2.png"] forState: UIControlStateNormal];
    [watch2 addTarget:self action:@selector(WatchesPreviewButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [scr addSubview:watch2];
}

- (IBAction)WatchesPreviewButtonPressed:(id)sender {

如果（发件人标签==123）
{
   WatchPreviewViewController *watchesPreviewView = [[WatchPreviewViewController alloc] initWithNibName:@"WatchPreviewViewController" bundle:nil andStyle:WatchPreviewViewControllerStyleType1];
    [self.navigationController pushViewController:watchesPreviewView 动画：YES];
    [watchesPreviewView 发布];
}
别的
{
   WatchPreviewViewController *watchesPreviewView = [[WatchPreviewViewController alloc] initWithNibName:@"WatchPreviewViewController" bundle:nil andStyle:WatchPreviewViewControllerStyleType2] ;
    [self.navigationController pushViewController:watchesPreviewView 动画：YES];
    [watchesPreviewView 发布];
}

}

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:31:01.607

在创建每个按钮时在每个按钮上设置标签属性`(void)viewDidLoad` ：

```
watch1.tag = 1    //new code
[scr addSubview:watch1];  //existing code

watch2.tag = 2  //new code
[scr addSubview:watch2];  //existing code 
```

在您`WatchPreviewViewController.h`的 @interface 部分中创建一个属性：

```
@property (assign) int watchType; 
```

然后`- (IBAction)WatchesPreviewButtonPressed:(id)sender`根据按下的按钮设置属性：

```
watchesPreviewView.watchType = sender.tag 
```

（您可能需要对发件人进行类型转换：`(UIView*)sender.tag`，我没有现场测试）

现在你的`if(??????????????????)`测试是`if (self.watchType == 1)`

# pex - PEX 错误 - VS2012 .NET 3.5

> ID：14337461
> 
> 赞同：2
> 
> 时间：2013-01-15T12:12:35.470
> 
> 标签：pex

尝试在 VS2010 中运行 PEX 时出现以下错误。

Microsoft.Pex.Engine.Libraries.MicrosoftVisualBasicLibrary+ProjectErrorRuntimeContextAttribute+Context 未能打开。

有人可以解释一下这里发生了什么吗？

谢谢

# php - 将数据插入数据库时 使用 ajax 显示消息

> ID：14337467
> 
> 赞同：1
> 
> 时间：2013-01-15T12:12:49.017
> 
> 标签：php, ajax

我已经通过 StackOverFlow 进行了搜索，但没有找到我想要的内容，所以我发布了我想问你的内容。

我是 PHP 世界的新人，我是如何开始编写脚本的或管理页面。我已经完成了所有工作，但我喜欢知道如何使用 AJAX 来显示消息，而无需转到特定的处理页面。

进程页面，

```
<?php

include ('connect.php');

$data = ("SELECT * FROM poiinfo");

$poiName = $_REQUEST['Name'];
$poiDes = $_REQUEST['Descrip'];
$poiCon = $_REQUEST['ConInfo'];
/*$poiImg = $_REQUEST['Image']; */

$dbData = "INSERT INTO poiinfo(`Name`, `Des.`, `Contact`) VALUES ('$poiName','$poiDes','$poiCon')";

$putData = mysql_query($dbData);

if ($putData){
echo "Data inserted";
}else {
echo "Not Done";
}
?> 
```

我可以知道如何使用 AJAX 来获取消息吗？

我已经使用了你们给我的代码示例，但我仍然没有完成工作，请你帮我找出我做错了什么。

我的表格，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){
$("#save_data").click(function(){
var name  = document.getElementById("Name");
var desc = document.getElementById("Descrip");
var con = document.getElementById("ConInfo");

var dataString = 'Name='+name'&Descrip='+desc'&ConInfo='con;
$.ajax({
  type:'POST',
  data:dataString,
  url:'addpoipro.php',
  success:function(data){
   if(data="Data inserted") {
      alert("Insertion Success");
    } else {
      alert("Not Inserted"); 
    }
    } 
   });
   });
   });
   </script>

   <title>AddPOI</title>
   </head>

   <body>
   <form method="post" enctype="multipart/form-data" name="form1" id="form1">
   <p>
   <label for="poiid">ID :</label>
   <input type="text" name="poiid" id="poiid" readonly="readonly" style="width:70px;" value="<?php echo $tId; ?>" />
   </p>
   <p>
   <label for="Name">POI Name :</label>

   <input type="text" name="Name" id="Name" />
   </p>
   <p>
   <label for="Descrip" style="alignment-adjust:middle">POI Description :</label>
   <textarea name="Descrip" id="Descrip" cols="45" rows="5"></textarea>
   </p>
   <p>
   <label for="ConInfo">Contact Infomation :</label>
   <textarea name="ConInfo" id="ConInfo" cols="45" rows="5"></textarea>
   </p>
   <p>
   <label for="Img">POI Image :</label>
   <!--<input type="file" name="Image" id="Image" /> -->
   </p>
   <p>&nbsp;</p>
   <p>
   <div align="center">
   <input type="button" name="Submit" id="save_data" value="Submit" style="width:100px;" />
   <input type="reset" name="reset" id="reset" value="Rest Data" style="width:100px;" />
   </div>
   </p>
   </form>
   </body>
   </html> 
```

以上4是我的表格，而process.php在此之前请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:21:06.227

使用 jQuery 的示例[`$.ajax`](http://api.jquery.com/jQuery.ajax/)：

```
$.ajax({
  url: "process.php",
  type: "POST",
  data : { Name : 'John', Descrip : 'some description..', ConInfo : 'some info...' },
  success : function(data){
      if(data == "Data inserted")
      {
          console.log("Success!");
      }
      else
      {
          console.log("fail!");
      }
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:59:51.860

你也可以这样做。

**你的 HTML**

```
<label>Name</labe><input type="text" id="name" name="full_name" value="" />
<label>Address</labe><input type="text" id="addr" name="addr" value="" />
<input type="button" name="save" id="save_data" value="Save" /> 
```

在添加 jQuery 后的 head 部分做这样的事情

```
<script>
 $(document).ready(function(){
  $("#save_data").click(function(){
    var name  = $("#name").val();
    var addr = $("#addr").val();

    var dataString = 'name='+name'&address='+address;
    $.ajax({
      type:'POST',
      data:dataString,
      url:'process.php',
      success:function(data){
       if(data="inserted") {
          alert("Insertion Success");
        } else {
          alert("Not Inserted"); 
        }
     } 
   });
  });
});
</script> 
```

**“process.php 页面”**

```
$name = $_POST['name'];
$address = $_POST['address'];

// DO YOUR INSERT QUERY
$insert_query = mysql_query("INSERT QUERY GOES HERE");
if(// CHECK FOR AFFECTED ROWS) {
     echo "inserted";
} else {
     echo "not";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T12:38:34.233

这是另一个不使用 jquery 的解决方案。

**索引.html**

```
<head>
<script type="text/javascript" src="test.js"></script>

</head>
<body>
<!-- reply from process.php is shown in this div -->
<div id=message></div>
<!-- click to send data -->
<a href="#" onclick="sendData('John','student','no more info')"> click here </a> 
</body>
</html> 
```

**测试.js**

```
function sendData(Name,description,info) {
        var ajaxRequest;  // The variable that makes Ajax possible!

        try{
            // Opera 8.0+, Firefox, Safari
            ajaxRequest = new XMLHttpRequest();
            }
        catch (e)
            {
            // Internet Explorer Browsers
                try
                    {
                    ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                    }
                catch (e)
                    {
                        try
                            {
                            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                            }
                        catch (e)
                            {
                            // Something went wrong
                            alert("Your browser broke!");
                            return false;
                            }
                    }
            }
        // Create a function that will receive data sent from the server

        ajaxRequest.onreadystatechange = function()
            {
                    var ajaxDisplay = document.getElementById('message');
            if(ajaxRequest.readyState == 4)
                { ajaxDisplay.innerHTML = ajaxRequest.responseText;}
                    else { document.getElementById('message').innerHTML="<span style=\"color:green;\">Loading..</span>"; }
                     }
        var url="process.php?name="+Name+"&Descrip="+description+"&ConInfo="+info;
        ajaxRequest.open("POST", url, true);
        ajaxRequest.send(null);
        } 
```

# grails - 完全或使用前缀覆盖 Grails 脚手架 URL

> ID：14337471
> 
> 赞同：3
> 
> 时间：2013-01-15T12:12:58.477
> 
> 标签：grails, scaffolding

我有一个已`static scaffold = true`定义的控制器以及一些自定义操作。

我想确保只有登录用户和 ADMIN 类型的用户（`Enum`我们域中的某个值）可以访问它。为了实现这一点，我实现了一个映射到`/admin/**`URI 空间的 grails 过滤器，但当然，当脚手架不在此处时，所讨论的域/控制器的 URI。我为 show/edit/create 操作添加了自定义的、命名的 URL 映射（这些操作直接工作并委托给脚手架层），但我最终得到了两个专用于此目的的 URI 上下文。

我希望能够对脚手架控制器说“将此 URI 用作所有 URI 的前缀”并完成它，但是搜索文档和 Web 并没有证明很有帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T12:37:33.283

脚手架控制器使用标准 taglib 调用生成所有 URL，这些调用对 URL 映射很敏感。因此，如果您拥有正确的 URL 映射，那么它应该可以正常工作。如果你有一个`MyDomainController`你想要映射的，`/admin`那么你需要类似的东西

```
class UrlMappings {
  static mappings = {
    "/$controller/$action?/$id?" {
      constraints {
        controller(validator:{
          // make sure this mapping doesn't apply to the MyDomainController,
          // so it will only be accessible via the protected /admin URL
          return it != "myDomain"
        })
      }
    }

    // special rule for the MyDomainController
    "/admin/myDomain/$action?/$id?"(controller:"myDomain")
  }
} 
```

您可以在 URL 映射上使用[任何常见的 Grails 约束类型，因此您可以通过白名单进行限制](http://grails.org/doc/latest/guide/theWebLayer.html#applyingConstraints)

```
controller(inList:['foo', 'bar']) 
```

或通过正则表达式

```
// exclude all controllers whose name starts "sec", e.g. secUser, secRole, ...
controller(matches:/(?!sec).*/) 
```

# java - 字符串 s = ...;

> ID：14337472
> 
> 赞同：0
> 
> 时间：2013-01-15T12:13:00.780
> 
> 标签：java

```
Charset charset = Charset.forName("US-ASCII");
String s = ...;
BufferedWriter writer = null;
try {
    writer = Files.newBufferedWriter(file, charset);
    writer.write(s, 0, s.length());
} catch (IOException x) {
    System.err.format("IOException: %s%n", x);
} finally {
    if (writer != null) writer.close();
} 
```

我在 Java 教程中遇到了这个片段。但是下面的内容是做什么的？

```
String s = ...; 
```

如果问题太傻，请不要介意我是新的Java程序员。提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:17:43.430

`String s = ...;`表示具有任意值的任何字符串（但不是`null`）。

这就是**省略号**：

> 一系列圆点，通常表示有意省略了一个单词、句子或整个部分。

目的是展示如何`BufferedWriter`工作而不是如何初始化`String`实例，这就是`String s = ...;`使用的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T12:14:41.163

这只是一个例子。您必须`s`用一些适时的字符串填充字符串。例如。：`String s = "blaBLABLAblabla!";`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T12:15:08.207

我假设这只是以下情况：

```
String s = "type whatever you like here"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T12:14:30.363

它do nothign只会给出编译时错误，你必须在运行之前为它定义一些东西

```
String s = "My value to be test"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T12:16:39.417

这意味着您可以在...的位置添加您自己的任何字符串，例如“这是我的答案”Java 中没有任何“...”。

# jquery - 单击下拉列表时取消选中并选中复选框

> ID：14337473
> 
> 赞同：0
> 
> 时间：2013-01-15T12:13:01.730
> 
> 标签：jquery, html

我想在单击下拉列表时删除选中的复选框并选中下拉列表上的复选框。例如我有这个代码

```
<input id="item-1" type="checkbox">item1</input>
<input id="item-2" type="checkbox">item2</input>
<input id="item-3" type="checkbox">item3</input>

<select id="dropdown">
   <option value="1,2">check the item 1 and 2</option>
   <option value="1,3">check the item 1 and 3</option>
   <option value="1,2,3">check the item 2 and 3</option>
</select> 
```

这是我的jQuery代码

```
$('#dropdown').live("change", function() {
    //remove all the chekced checkboxes
    $('input:checkbox').removeAttr('checked');
    //check chekboxes
    var selected = $('#dropdown :selected').val();
    dataitem = selected.split(',');
    $.each(dataitem, function(key, item) {
        $('#item-' + item).attr('checked', true);
    });
}); 
```

这里发生的是当我添加这段代码时

```
$('input:checkbox').removeAttr('checked'); 
```

它将删除所有选中的复选框，但当我在下拉列表中选择时它不会添加。但是当我删除该代码时，它会检查一个复选框，但不会在以前选中的复选框上删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:24:43.120

对我来说似乎工作得很好，我只是注意到这`<option value="1,2,3">`与文本不一致并将其更改为`<option value="2,3">`.

见：[http ://codepen.io/AlienHoboken/pen/knCHh](http://codepen.io/AlienHoboken/pen/knCHh)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:27:54.377

```
 <input id="item-1" type="checkbox">item1</input>  
      <input id="item-2" type="checkbox" value="item2">
       <input id="item-3" type="checkbox" value="item3">

     <select id="dropdown">
       <option value="1,2">check the item 1 and 2</option>
        <option value="1,3">check the item 1 and 3</option>
      <option value="2,3">check the item 2 and 3</option>
     </select>

     $('#dropdown').live("change", function() {
     //remove all the chekced checkboxes
     $('input:checkbox').attr('checked', false);
        //check chekboxes
     var selected = $('#dropdown :selected').val();
     dataitem = selected.split(',');
     $.each(dataitem, function(key, item) {
           $('#item-' + item).attr('checked', true);
         });
     }); 
```

# vba - ADO 功能.. 从关闭的工作簿复制、过滤、粘贴到活动的工作簿

> ID：14337474
> 
> 赞同：0
> 
> 时间：2013-01-15T12:13:01.750
> 
> 标签：vba, excel

我目前正在寻找以下解决方案的替代方案，但使用 ADO 功能以便不打开源工作簿。我想这会减少处理时间吗？

你的意见..

谢谢

```
Sub CopyFilteredValuesToActiveWorkbook()

    Dim wbSource As Workbook, wbDest As Workbook
    Dim wsSource As Worksheet, wsDest As Worksheet
    Dim rngSource As Range, rngDest As Range

    Set wbSource = Workbooks.Open("\\Linkstation\rrm\X_DO_NOT_TOUCH_CC\MasterLogFile\Masterlogfile.xlsx", , True) 'Readonly = True
    Set wsSource = wbSource.Worksheets("LogData")
    wsSource.Range("$A$1:$H$3").AutoFilter Field:=3, Criteria1:="Opera"
    Set rngSource = wsSource.Range("A:Z")

    Set wbDest = ThisWorkbook
    Set wsDest = wbDest.Worksheets("MLF")
    Set rngDest = wsDest.Range("A:Z")

    rngDest.Value = rngSource.Value 'Copies values over only, if you need formatting etc we'll need to use something else

    wbSource.Close (False) 'Close without saving changes

    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:34:13.650

您可以使用对 Active X Data Objects 6.0 的引用来使用 SQL 查询

```
Const adOpenStatic = 3
Const adLockOptimistic = 3
Const adCmdText = &H1

Public Sub GetValues (path as String, destination as Range)
    Dim conStr as String, strSQL as string
    Dim con as new ADODB.Connection, rs as new ADODB.Recordset

    conStr = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source='" & path & "';" & _
             "Extended Properties=""Excel 12.0;HDR=YES;IMEX=1;"";"
    strSQL = "SELECT * FROM [LogData$] WHERE [CriteriaColumn] = 'Opera'"

    con.Open conStr
    rs.open strSQL, con, adOpenStatic, adLockOptimistic, adCmdText
    destination.CopyFromRecordset rs
    rs.close
    con.close
End Sub 
```

其中 CriteriaColumn 是用作过滤条件的列的标题

您可以按如下方式调用子例程：

```
Dim path as string, rngDest as Range
path = "\\Linkstation\rrm\X_DO_NOT_TOUCH_CC\MasterLogFile\Masterlogfile.xlsx"
'The Upper left cell of the range that will receive the data:
Set rngDest = ThisWorkbook.Worksheets("MLF").Range("A1") 
GetValues path, rngDest 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:08:47.577

你错过了这一行：

```
Set rs = CreateObject("ADODB.Recordset") 
```

出于某种原因，没有它，Win XP 将无法运行。它应该放在`con.Open conStr`.

# ios - UIWebView 隐藏键盘边距

> ID：14337476
> 
> 赞同：0
> 
> 时间：2013-01-15T12:13:07.323
> 
> 标签：ios, twitter-bootstrap, uiwebview

[我正在为使用Bootstrap](http://getbootstrap.com)构建的网页构建 iOS 包装器应用程序，在我的网络应用程序的顶部是一个`.navbar`div，不是固定的或任何东西，并且在首次加载时完美显示。

当我触摸输入，键入然后隐藏键盘时，问题就开始了。键盘隐藏后，页面已向下移动，但导航栏无处可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:02:03.863

事实证明，这是由CSS 代码中的一个*错误引起的，该错误为正文提供了一个边距。*解决此问题的最简单方法是更改​​ CSS。尽管我仍然不知道`UIWebView`在这种情况下如何控制。

# java - 让linearLayout从屏幕上消失？

> ID：14337486
> 
> 赞同：1
> 
> 时间：2013-01-15T12:13:25.060
> 
> 标签：java, android, android-layout

您好`linearLayout`，我的活动顶部有一个按钮和下拉菜单。它们用于通过串行初始化连接。我单击连接并建立连接我希望按钮/下拉菜单消失，以便有更多空间可用于其他事物，并且我希望可以选择将其恢复，也许是一个按钮。最好的方法是将代码更改为片段或某些东西吗？我从来没有用过那些？这是一个屏幕截图， http: [//i.imgur.com/USAns.png](http://i.imgur.com/USAns.png)我想删除`connect`，`spinners`有`update settings` 什么简单的方法可以改变这个代码来做我想做的事吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/MainLayout"
android:background="@drawable/wallpaper"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

   <LinearLayout android:id="@+id/topButtons" 
    android:layout_margin="4dip"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <Button android:id="@+id/deviceConnect"
        android:layout_margin="8dip"
        android:layout_weight="3"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:text="Connect"/>
    <LinearLayout android:orientation="vertical"
        android:layout_weight="1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <LinearLayout android:orientation="horizontal"
            android:layout_margin="8dip"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">
            <TextView android:text="Connected Adapter:"
                android:layout_gravity="center_vertical"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"/>
            <Spinner android:id="@+id/deviceSpinner"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:drawSelectorOnTop="true"/>
            <TextView android:id="@+id/currentSettings" 
                android:layout_marginLeft="8dip"
                android:text="Current Settings: Not Connected"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"/>
        </LinearLayout>
        <LinearLayout android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
            <LinearLayout android:orientation="horizontal"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <TextView android:text="Baud:"
                    android:layout_gravity="center_vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <Spinner android:id="@+id/baudSpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true"/>
            </LinearLayout>
            <LinearLayout android:orientation="horizontal"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <TextView android:text="Data:"
                    android:layout_gravity="center_vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <Spinner android:id="@+id/dataSpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true"/>
            </LinearLayout>
            <LinearLayout android:orientation="horizontal"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <TextView android:text="Parity:"
                    android:layout_gravity="center_vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <Spinner android:id="@+id/paritySpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true"/>
            </LinearLayout>
            <LinearLayout android:orientation="horizontal"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <TextView android:text="Stop:"
                    android:layout_gravity="center_vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <Spinner android:id="@+id/stopSpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true"/>
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
    <Button android:id="@+id/updateSettings"
        android:layout_margin="8dip"
        android:layout_weight="3"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:text="Update\nSettings"/>
</LinearLayout>

    <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

   <Button android:id="@+id/Command"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Enable"/> 

   <Button android:id="@+id/Command2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Configure"
        android:layout_toRightOf="@+id/Command"/> 

   <Button android:id="@+id/Command3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Exit"
        android:layout_toRightOf="@+id/Command2"/> 

   <Button android:id="@+id/Command4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Show Version"
        android:layout_toRightOf="@+id/Command3"/> 

   <Button android:id="@+id/Command5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Show Run"
        android:layout_toRightOf="@+id/Command4"/> 

    <Button android:id="@+id/Command6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Backspace"
        android:layout_toRightOf="@+id/Command5"/> 

        <Button android:id="@+id/Command7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Backspace2"
        android:layout_below="@+id/Command"/> 

    <jackpal.androidterm.emulatorview.EmulatorView
    android:id="@+id/emulatorView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:layout_toRightOf="@+id/Command7"
    android:layout_below="@+id/Command" />

     <EditText
        android:id="@+id/term_entry"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:imeOptions="actionNone|flagNoExtractUi"
        android:inputType="text|textImeMultiLine"
        android:layout_toRightOf="@+id/Command7"
        android:layout_below="@+id/emulatorView" />

     <Button
        android:id="@+id/term_entry_send"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/entry_send"
        android:layout_toRightOf="@+id/term_entry" 
        android:layout_below="@+id/emulatorView"/>

    </RelativeLayout>  

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:18:38.680

尝试您的活动以`LinerarLayout`使用`findViewById`然后`setVisibility(INVISIBLE)`或`setVisibility(GONE)`隐藏它来检索它。

要再次显示它，您可以使用`setVisibility(VISIBLE)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:19:18.943

使用带有[GONE标志的](http://developer.android.com/reference/android/view/View.html#GONE)[setVisibility(int)](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)方法使视图不可见并将其从屏幕上“删除”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T12:23:55.387

请为您的 LinearLayout 标签添加一个属性：android:visibility="gone"

如果你想让它可见，只需调用 setVisibility(View.VISIBLE);

希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T12:27:24.830

`view.setVisibility(int)`是你需要的。

但是，`view.setVisibility(GONE)`不能在任何地方工作：它只能在视图内工作。如果您想从您的活动中隐藏它（最常见的情况），您必须调用`view.setVisibility(View.GONE)`, 并`view.setVisibility(View.VISIBLE)`再次显示它。

# iphone - UIImageView 中的实时摄像头

> ID：14337489
> 
> 赞同：1
> 
> 时间：2013-01-15T12:13:30.710
> 
> 标签：iphone, ios, xcode, ios6

有谁知道我如何将实时摄像机输入到`UIImageView`?

我有一个自定义 UI，我需要在其中显示摄像头馈送（前置摄像头），因此我无法使用`UIImagePickerControl`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T12:21:26.557

您需要创建一个捕获会话，并启动它运行。完成后，您可以将捕获会话中的图层添加到您的视图中：

```
- (void)setupCaptureSession
{
    NSError* error = nil;

    // Create the session
    _captureSession = [[AVCaptureSession alloc] init];    
    _captureSession.sessionPreset = AVCaptureSessionPresetMedium;
    AVCaptureDevice* device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

    AVCaptureDeviceInput* input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];

    [_captureSession addInput:input];
    AVCaptureVideoDataOutput* output = [[AVCaptureVideoDataOutput alloc] init];
    [_captureSession addOutput:output];

    // Configure your output.
   dispatch_queue_t queue = dispatch_queue_create("myCameraOutputQueue", NULL);
   //If you want to sebsequently use the data, then implement the delegate.
   [output setSampleBufferDelegate:self queue:queue]; 
} 
```

完成后，您可以创建一个预览层，如下所示：

```
_previewLayer = [AVCaptureVideoPreviewLayer layerWithSession:_captureSession];
[_captureSession startRunning]; 
```

然后将预览层添加到您的视图中：

```
_myView.layer addSubLayer:_previewLayer]; 
```

# c++ - 未声明的标识符自定义类

> ID：14337496
> 
> 赞同：0
> 
> 时间：2013-01-15T12:13:50.893
> 
> 标签：c++, visual-studio-2010, linker, compiler-errors

`'Plansza' : undeclared identifier` 我不知道为什么我会收到这个错误。我有两个名为“Plansza”和“GameData”的类，我已经包含了两个标题（在 Plansza.h 中包含“GameData.h”并且它有效，但是当我在 GameData.h 中包含“Plansza.h”时它没有看到Plansza 等级 :S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:15:28.413

当您包含`A.h`in`B.h`并且反之亦然时，您设置**了循环依赖**。如果您包含警卫，**其中一个会丢失**并且会发生此类错误。

你要做的就是尽量将`.h`文件包含在`.cpp`文件中，如果这不可能，则将2路依赖减少为1路依赖。

尽可能多地尝试在文件中**使用前向声明**`.h`，只要您只使用指向类的指针，这就足够了。

```
class Plansza; 
```

代替

```
#include "Plansza.h" 
```

编辑：感谢 user1701595 提供了很好的参考——Organizing [Code Files in C and C++](http://www.gamedev.net/page/resources/_/technical/general-programming/organizing-code-files-in-c-and-c-r1798)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-15T12:59:05.377

万一其他人发现这个问题，并且*没有*周期性包含，我设法通过将枚举案例命名为与我的类名完全相同的东西来得到这个完全相同的错误。

# android - 有没有 google-repo 的插件

> ID：14337498
> 
> 赞同：-1
> 
> 时间：2013-01-15T12:13:56.480
> 
> 标签：android, repository

对于 Android，版本控制是使用 Git 和 Repo 完成的。我想知道是否有用于 Repo 的 Eclipse 插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:23:36.557

没有 repo 是面向 python 的没有 eclipse 插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:20:17.120

E-git 是 Eclipse 的版本控制：http: [//www.eclipse.org/egit/](http://www.eclipse.org/egit/)

# php - Jquery通过给出开始时间和结束时间来计算持续时间

> ID：14337502
> 
> 赞同：1
> 
> 时间：2013-01-15T12:14:07.163
> 
> 标签：php, javascript, jquery

我正在使用 jQuery 时间选择器来获取 12 小时格式的开始时间和结束时间。我需要以 HH:MM:SS 格式计算开始时间和结束时间之间的持续时间。我有以下代码。但它的返回持续时间像 1.1666。那么我应该对我的代码进行哪些更改。

```
valueStart = $("#startTime").val();
valueStop = $("#endTime").val();
var diff =  ( new Date("1970-1-1 " + valueStop) - new Date("1970-1-1 " + valueStart) ) /    1000 / 60 / 60;
    var diffe = Math.abs(diff);
    alert(diffe); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:51:56.107

```
valueStart = $("#startTime").val();
valueStop = $("#endTime").val();

var str0="01/01/1970 " + valueStart;
var str1="01/01/1970 " + valueStop;

var diff=(Date.parse(str1)-Date.parse(str0))/1000/60;
var hours=String(100+Math.floor(diff/60)).substr(1);
var mins=String(100+diff%60).substr(1);

alert(hours+':'+mins); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:53:05.380

[用xdate](http://arshaw.com/xdate/#Diffing) (javaScript 日期库)试试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:06:11.483

如果你想用 HH:MM:SS 格式试试这个..

```
var diff =
        new Date( '01/01/1970 ' + valueStop) -
        new Date( '01/01/1970 ' + valueStart );

    var sec_numb=(diff /1000)+"";
    var hours   = Math.floor(sec_numb / 3600);
    var minutes = Math.floor((sec_numb - (hours * 3600)) / 60);
    var seconds = sec_numb - (hours * 3600) - (minutes * 60);

    if (hours   < 10) {hours   = "0"+hours;}
    if (minutes < 10) {minutes = "0"+minutes;}
    if (seconds < 10) {seconds = "0"+seconds;}
    var time    = hours+':'+minutes+':'+seconds;
    alert(time); 
```

# typescript - 在 TypeScript 中使用 document.evaluate

> ID：14337509
> 
> 赞同：0
> 
> 时间：2013-01-15T12:14:41.890
> 
> 标签：typescript, document.evaluate

如何`document.evaluate`在 TypeScript 中使用？它不是该`Document`类型的方法，因此当我尝试使用它时，TypeScript 会生成错误并且不允许我编译代码。

有什么方法可以将它添加到编译错误的定义中`Document`或忽略编译错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:43:04.917

有几种方法可以做到这一点。由于 TypeScript 中的接口是可扩展的，因此您只需将所需的方法添加到 Document 接口，如下所示：

```
interface Document{
    evaluate(xpathExpression:any, 
        contextNode?:any, 
        namespaceResolver?:any, 
        resultType?:any, 
        result?:any);
} 
```

或者您可以在调用方法之前将其`document`转换为：`any``evaluate`

```
(<any>document).evaluate('...'); 
```

无论如何，沿着这些路线的东西。

# android - 简单的脚本带回无意义的错误

> ID：14337513
> 
> 赞同：0
> 
> 时间：2013-01-15T12:14:48.400
> 
> 标签：android, linux, shell, android-emulator

我一直在尝试为 android 制作一个 shell 脚本，该脚本会删除某些文件以稍微强化设备以抵御攻击。我认为该脚本已在运行 froyo 的 ubuntu 上的 android 模拟器上运行。当我尝试在运行 4.2 的 Windows 机器上运行它时，它会在底部显示错误。我检查了所有目录并且它们存在。我正在使用 adb 运行它。

```
echo             ANDROID
echo      HARDENING STARTED
#removing files in the /system/xbin directory
mount -o rw,remount /dev/block/mdblock0 /system
    rm  /system/xbin/tcpdump
            rm  /system/xbin/su
#removing files in the /system/bin directory
                    rm  /system/bin/bootanimation
                    rm  /system/bin/dumpstate
                    rm  /system/bin/ping
                    rm  /system/bin/ping6
mount -o ro,remount /dev/block/mdblock0 /system
echo                    ANDROID
echo              HARDENING COMPLETE 
```

带回这个错误..我不知道发生了什么。

```
ANDROID
HARDENING STARTED
mount:No such file or directory
, No such file or directorytcpdump
, No such file or directorysu
, No such file or directoryootanimation
, No such file or directoryumpstate
, No such file or directorying
, No such file or directorying6
mount:No such file or directory
ANDROID
HARDENING COMPLETE 
```

请帮忙

瑞安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:18:27.140

该目录`/system`不存在，因此您的`mount`命令失败。

接下来，您尝试从不存在且因此未安装的`/system`目录中删除几个文件，这会导致更多错误。

最后，您尝试重新安装`/system`仍然不存在的 ，导致您的最后一个错误。

唯一的问题是错误消息有点乱码，文件名以某种方式被消息覆盖。

**编辑**：要回答您的其他问题...

如果您可以[检查文件是否存在](http://unixhelp.ed.ac.uk/CGI/man-cgi?test)，则可以正确处理这种情况（而不是使用通配符）：

```
# Check which device to use
if [ -e /dev/block/mdblock0 ]; then
  device=/dev/block/mdblock0
elif [ -e /dev/block/mtdblock0 ]; then
  device=/dev/block/mtdblock0
else
  echo "Device not found";
  exit 1;
fi

mount -o rw,remount $device /system
# etc... 
```

我不知道确切的 Android shell 命令，但假设它与 bash 非常相似，这应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T07:22:25.427

将行尾更改为 Unix 样式，将解决您的所有问题。

# php - Mysql Count 如果不匹配则返回零

> ID：14337514
> 
> 赞同：0
> 
> 时间：2013-01-15T12:14:51.973
> 
> 标签：php, mysql, count

我在一个数组中有一组大约 9000 个导师 ID，我将它们放在一个字符串中，例如：

```
(1,2, 3, 4,5,6,7,....9000,9001,9002) 
```

这样我就可以在以下查询中使用它们：

```
select count(student_assignment.assignment_id) as total_assignment from 
student_assignment, assigned_tutor_fk where  assignment_status = 'closed'
 and assigned_tutor_fk in (1,2, 3, 4,5,6,7,..100,101,103...9000,9001,9002)
 group by assigned tutor_fk. 
```

我想计算与每个导师（assigned_tutor_fk）关联的总行数，以及那些没有作业的导师，即那些在表中没有作业记录的导师，我想将他们的作业计数显示为 0，我只想我的查询返回计数和assigned_tutor_fk 我的表结构是：

```
 assignment_id | assigned_tutor_fk | assignment_date | student_id |
    |    1        |   2               |  22-01-2011     |  4         |
    |    2        |   3               |  14-03-2011     |  5         | 
```

我试图让我的输出是这样的：

```
 |total_assignment | assigned_tutor_fk |
    |      5          | 4                 |
    |      2          | 7                 |
    |      0          | 8                 | 
```

更新：我认为我无法正确表达自己，我已经有一个根据另一个标准过滤的导师列表，将这两个查询结合起来非常复杂，所以现在我有一组导师 ID，我想要总和如果导师没有作业记录，则显示为零。请帮助我，因为我现在不知道该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:22:23.170

```
SELECT  t.id, COUNT(sa.assignment_id)
FROM    tutor t
LEFT JOIN
        student_assignement sa
ON      sa.assignment_tutor_fk = t.id
WHERE   t.id IN (1, 2, ..., 9002)
GROUP BY
        t.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:18:45.913

```
SELECT 
  count(*) as total_assignment,
  assigned_tutor_fk  
FROM assignmentTable 
GROUP BY assigned_tutor_fk 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:26:59.257

不要把导师串起来。从表中选择它们并与分配和 FK 表进行 LEFT JOIN。在不知道所有表格的情况下，我猜它看起来像这样：

```
select 
   t.tutorId,
   count(sa.assignment_id) as total_assignment
from 
   tutor t
LEFT JOIN
   assigned_tutor_fk fk
ON
   fk.assigned_tutor_fk = tutor.tutorId 
LEFT JOIN
   student_assignment sa
ON
  fk.assignment_id = sa.id
where  
   sa.assignment_status = 'closed' OR
   ISNULL(sa.assignment_status) -- if join fails.
group by 
   t.tutorId 
```

`Left Join`从导师表中检索您的所有值并将其与连接表合并（如果有匹配项）。如果不是，则插入 NULL。

# web - 网页设计：“向下滚动导航”

> ID：14337515
> 
> 赞同：3
> 
> 时间：2013-01-15T12:14:55.353
> 
> 标签：web

在某些 Web 应用程序中使用的技术是什么，例如[http://www.alfredapp.com](http://www.alfredapp.com)，其中导航向下滚动站点以显示另一个站点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T23:07:44.227

为了获得这种导航方式，我会将我的所有内容放在一个页面上，并使用“平滑滚动效果”，就像[这个网站](http://pagescroller.com/)上的那样，在部分之间切换。

[通过简单地谷歌搜索“平滑滚动页面部分](https://www.google.de/search?q=building%20a%20single%20page%20app%20with%20sections&oq=building%20a%20single%20page%20app%20with%20sections&aqs=chrome.0.57j60j62l3.19604&sugexp=chrome,mod=7&sourceid=chrome&ie=UTF-8#hl=en&safe=off&tbo=d&sclient=psy-ab&q=smoth%20scroll%20through%20page%20sections&oq=smoth%20scroll%20through%20page%20sections&gs_l=serp.3...258402.269729.2.270121.34.34.0.0.0.0.335.4336.6j26j0j2.34.0.les;..0.0...1c.1.mABc8H_341g&psj=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.41524429,d.Yms&fp=d90d956d33b9db18&biw=1024&bih=511)” ，您会发现更多基于 JavaScript（和 jQuery）的“平滑滚动效果”。

这也是他们在[alfredapp.com](http://www.alfredapp.com)上的做法。

# c - 将结构写入映射的内存文件（mmap）

> ID：14337517
> 
> 赞同：8
> 
> 时间：2013-01-15T12:14:57.400
> 
> 标签：c, file, io, mmap

我在将 struct 写入映射的内存文件时遇到问题。

我有两个文件，即 mmap.write.c 和 mmap.read.c，在这些文件中，我将一个整数写入一个文件并从文件中读取它。

当我想编写 struct 并阅读它时，我无法考虑这一点，因为在 mmap.write.c 的第 32 行

```
sprintf((char*) file_memory, "%d\n", i); 
```

在 mmap.read.c 的第 25 行

```
sscanf (file_memory, "%d", &integer); 
```

写入和读取整数/双精度/浮点数/字符等没有区别，因为我可以将模式作为整数的第二个参数“%d”。但是我会在这里写什么来表示结构？这是我的主要问题。

我想写和读的结构：

```
#define CHANNELS 20
typedef dataholder struct {
    int value[CHANNELS];
    time_t time;
    int hash;
}dataholder; 
```

mmap.read.c

```
#include <stdlib.h>
#include <stdio.h>
#include <fcntl.h>
#include <sys/mman.h>
#include <sys/stat.h>
#include <unistd.h>
#include "mmap.h"
#define FILE_LENGTH 0x10000
int main (int argc, char* const argv[])
{
    int fd;
    void* file_memory;
    int integer;
    /* Open the file. */
    fd = open (argv[1], O_RDWR, S_IRUSR | S_IWUSR);
    printf("file opened\n");
    /* Create the memory mapping. */
    file_memory = mmap (0, FILE_LENGTH, PROT_READ | PROT_WRITE,
    MAP_SHARED, fd, 0);
    printf("memfile opened\n");
    close (fd);
    printf("file closed\n");
    /* Read the integer, print it out, and double it. */
    while(1) {
        sscanf (file_memory, "%d", &integer);
        printf ("value: %d\n", integer);
        usleep(100000);
    }
    //sprintf ((char*) file_memory, "%d\n", 2 * integer);
    /* Release the memory (unnecessary because the program exits). */
    munmap (file_memory, FILE_LENGTH);
    return 0;
} 
```

mmap.write.c

```
#include <stdlib.h>
#include <stdio.h>
#include <fcntl.h>
#include <sys/mman.h>
#include <sys/stat.h>
#include <time.h>
#include <unistd.h>
#include "mmap.h"
#define FILE_LENGTH 0x10000
/* Return a uniformly random number in the range [low,high]. */
int random_range (unsigned const low, unsigned const high)
{
    unsigned const range = high - low + 1;
    return low + (int) (((double) range) * rand () / (RAND_MAX + 1.0));
}
int main (int argc, char* const argv[])
{
    int fd, i;
    void* file_memory;
    /* Seed the random number generator. */
    srand (time (NULL));
    /* Prepare a file large enough to hold an unsigned integer. */
    fd = open (argv[1], O_RDWR | O_CREAT | O_APPEND, S_IRUSR | S_IWUSR);
    //lseek (fd, FILE_LENGTH+1, SEEK_SET);
    write (fd, "", 1);
    //lseek (fd, 0, SEEK_SET);
    /* Create the memory mapping. */
    file_memory = mmap (0, FILE_LENGTH, PROT_WRITE, MAP_SHARED, fd, 0);
    close (fd);
    /* Write a random integer to memory-mapped area. */
    for(i=0; i<10000; i++) {
        sprintf((char*) file_memory, "%d\n", i);
        //goto a;
        usleep(100000);
    }
    a:
    /* Release the memory (unnecessary because the program exits). */
    munmap (file_memory, FILE_LENGTH);
    return 0;
} 
```

提前非常感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T12:22:38.470

首先，您必须跟踪要在内存中写入的*位置*，其次您必须记住映射的内存就像任何其他指向内存的指针一样。最后一点很重要，因为这意味着您可以使用普通的数组索引来访问内存，或者使用诸如`memcpy`复制到内存之类的函数。

要编写结构，您有三个选择：

1.  按原样编写结构，就像在二进制文件中一样。这将意味着您必须`memcpy`将结构移至指定位置。

2.  使用例如将结构逐个字段作为文本`sprintf`写入正确的位置。

3.  将内存视为一个大字符串，并将`sprintf`每个字段例如放入一个临时缓冲区，然后`strcat`将其添加到内存中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T12:22:45.837

最简单的方法是只使用一个指针：

```
dataholder *dh = file_memory;
/* now you can access dh->value, dh->time, dh->hash */ 
```

由于此结构不包含任何指针，因此如果需要将其复制入或复制出，只需分配它即可，例如：

```
dataholder dh_other = *dh; 
```

或者

```
*dh = dh_other; 
```

# console - WebSphere 是否有调度程序管理控制台？

> ID：14337519
> 
> 赞同：1
> 
> 时间：2013-01-15T12:14:59.990
> 
> 标签：console, websphere, esb, scheduler

好吧，我想问题很清楚，我们有 WebSphere ESB Server 7.5.0.1。我们编写了一些 java 代码来将任务发送到调度程序。但我想知道的是，是否有任何调度程序管理控制台来管理和创建调度程序的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:12:01.683

不，那里没有。应该可以使用[WASScheduler MBean](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.javadoc.doc/web/mbeanDocs/WASScheduler.html)自己编写一个。

# php - 使用PHP在PDF中的图像坐标

> ID：14337525
> 
> 赞同：0
> 
> 时间：2013-01-15T12:15:10.663
> 
> 标签：php, pdf, coordinates, fpdf

如何使用 PHP 从 PDF 文件中获取图像的坐标 (x,y)？

例如，我有一个 PDF 文档页面，我知道页面的大小，我有一张图像，我也知道它的大小（因为我已经使用该`pdfimages`工具提取了它）。但是，我需要知道这张图片在页面上的位置。

我读过它可能可以使用 FPDF 完成，但我不明白如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T15:26:27.720

要获取带有坐标、ImageData 和大小信息的 PDF 图像，您必须获取 PDFlib。[您可以在此处获取 PECL 免费版本，在此处获取](http://php.net/manual/en/pdf.setup.php)[TET](http://www.pdflib.com/download/tet/)（文本提取工具包）。

配置 PDFlib 和 TET 并将它们链接到 php.ini 上的 php 扩展名（extension=pdf.so 和 extension=php_tet.so）后，您将在安装 PDFlib 的目录中找到一堆示例（您键入 ./configure && make && make install 或在哪里获得“php_tet.so”）。打开它们以查看如何使用这些功能。这个库是面向对象的。

有了它，您可以获得 PDF 每一页的所有图像（坐标、大小和创建 jpeg 文件）和文本（大小、字体和坐标）。

如果您有其他问题或您不清楚某点，我随时为您服务；）

PS对不起我的英语不是很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:12:33.320

一个选项是将您转换`pdf`为图像（有可用的脚本，没有尝试，但这[可能](http://www.phpclasses.org/package/5846-PHP-Convert-PDF-documents-to-images-using-Ghostscript.html)会完成工作）

然后，您可以使用我在您的其他[问题](https://stackoverflow.com/questions/14345256/determine-position-of-one-image-in-another-with-php)上发布的代码在另一个图像中定位图像。

# asp.net-mvc - 如何检查将使用 @Html.ValidationSummary() 显示的文本，然后修改消息？

> ID：14337526
> 
> 赞同：0
> 
> 时间：2013-01-15T12:15:18.287
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我`@Html.ValidationSummary()`在我的注册页面上使用。如果输入的用户名已被使用，我会收到以下消息 HTML：

```
<div class="validation-summary-errors" data-valmsg-summary="true">
   <ul>
      <li>User name already exists. Please enter a different user name.</li>
   </ul> 
```

我想要的是能够用几行 HTML 来修改这条消息，这样如果消息与上面的完全相同，那么我将添加一些显示登录链接的 HTML。像这样的东西：

```
<div class="validation-summary-errors" data-valmsg-summary="true">
   <ul>
      <li>User name already exists. Please enter a different user name or <a xxxx>Login</a></li>
  </ul>
</div> 
```

我尝试执行以下操作：

```
@{
   var errorHTML = @Html.ValidationSummary();
   if ( errorHTML.IndexOf("User name already exists") > 0  ) {
        errorHTML = errorHTML + "xx"
   }                    
} 
```

但是我马上遇到了一个问题，它告诉我 MvsHtmlString 不包含 IndexOf 的定义。

有人可以建议一种方法，我可以检查是否会有一条验证消息说用户名已经存在，然后添加一些 HTML 并将其显示在屏幕上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:21:36.350

控制针对验证错误显示的错误消息的一种方法是使用 ModelState.AddModelError() 方法

`ModelState.AddModelError("UserName", "User name already exists. Please enter a different user name or a xxxx");`

`@When Html.ValidationSummary()`执行时，将显示上述消息。

但是，我不知道当前消息是如何包含在摘要中的，以及您是否可以控制它。换句话说，该消息来自哪里？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:56:43.860

您可以编写一个动作过滤器来检查 ModelState 中是否存在与您正在查找的条目匹配的条目，然后对其进行修改或删除。然后您可以使用过滤器仅装饰您想要的操作：

```
[RemoveModelStateEntry(MatchOn = "Username already exists.")]
public ActionResult Index()
{
    return View();
} 
```

当动作被执行并且在它被呈现之前，你可以检查模型状态：

```
public class RemoveModelStateEntryAttribute : IActionFilter
{
    public void OnActionExecuted(ActionExecutedContext filterContext)
    {
        // check filterContext.Controller.ViewData.ModelState here
    }

    public void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // nothing to do here
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:30:14.567

您可以编写自定义验证摘要。然后使用`Html.ValidationSummary()`获取 MvcHtmlString 并更改消息。以下是一些关于如何创建自定义验证摘要扩展的有用链接： [自定义 ValidationSummary 模板 Asp.net MVC 3](https://stackoverflow.com/questions/5857851/custom-validationsummary-template-asp-net-mvc-3) [如何在 ASP.NET MVC 中扩展 ValidationSummary HTML Helper？](https://stackoverflow.com/questions/918969/how-to-extend-the-validationsummary-html-helper-in-asp-net-mvc)

# xslt - 使用 xslt 删除根元素

> ID：14337527
> 
> 赞同：1
> 
> 时间：2013-01-15T12:15:18.333
> 
> 标签：xslt

我有一个 xml 架构，其结构类似于

```
<Level>
<Level1>...data...</Level1>
<Level2>...data...</Level2>
.
.
.
</Level> 
```

我想删除`<Level>`标签。在 xslt 的帮助下，我应该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:21:52.840

任何“我如何使我的大部分 XML 保持不变但稍微调整一些”问题的标准答案是“使用标识模板，然后针对您想要更改的特定内容覆盖它”

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <!-- omit the <?xml?> line in the output, it won't be well-formed anyway -->
  <xsl:output method="xml" omit-xml-declaration="yes" />

  <xsl:template match="@*|node()">
    <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <xsl:apply-templates select="node()" />
  </xsl:template>
</xsl:stylesheet> 
```

但正如 Lister 先生在评论中指出的那样，这会给您留下一些不是格式良好的 XML 的东西，因为它将有多个文档元素。

当我在输入 XML 上应用此样式表时

```
<Level>
<Level1>...data...</Level1>
<Level2>...data...</Level2>
</Level> 
```

它产生结果

```
<Level1>...data...</Level1>
<Level2>...data...</Level2> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:43:19.777

如果要将文档元素的所有子元素存储在变量中，可以执行以下操作：

```
<xsl:variable name="myVar" select="/*/*"/> 
```

但是，如果您希望样式表生成一个字符串，这可能是一个解决方案：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">
  <xsl:output method="text"/>

  <xsl:template match="/*">
    <xsl:apply-templates select="node()"/>
  </xsl:template>

  <xsl:template match="*">
    <!-- We write the opening tag -->
    <xsl:value-of select="concat('&lt;',local-name())"/>
    <!-- Now, all attributes -->
    <xsl:apply-templates select="@*"/>
    <!-- Depending on whether we have an empty element or not, 
         we're adding the content or closing it immediately -->
    <xsl:choose>
      <xsl:when test="node()">
        <!-- Close opening tag -->
        <xsl:value-of select="'&gt;'"/>
        <!-- Add the content -->
        <xsl:apply-templates select="node()"/>
        <!-- Write closing tag -->
        <xsl:value-of select="concat('&lt;/',local-name(),'&gt;')"/>
      </xsl:when>
      <xsl:otherwise>
        <!-- Create empty element by closing tag immediately -->
        <xsl:value-of select="'/&gt;'"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="@*">
    <!-- Write an attribute -->
    <xsl:value-of select="concat(' ',local-name(),'=&quot;',.,'&quot;')"/>
  </xsl:template>
</xsl:stylesheet> 
```

它生成文本（因此您不会得到格式不正确的 XML）。它有点过于简化了，因为它不处理名称空间、注释、处理指令和属性中的引号。如果您的输入 XML 包含其中任何一个，则您必须改进样式表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T14:25:00.307

我创建了一个新的 XSLT 定义，它在您的代码的帮助下满足了我的要求

```
<?xml version="1.0" encoding="UTF-8"?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output encoding="utf-8" method="text" omit-xml-declaration="yes"/>
<xsl:variable name="nl">
    <xsl:text/>
</xsl:variable>
<xsl:variable name="tb">
    <xsl:text/>
</xsl:variable>
<xsl:template match="/*">
    <!-- Open the root array -->
    <xsl:text>[{</xsl:text>
    <xsl:value-of select="$nl"/>
    <!-- Process all the child nodes of the root -->
    <xsl:apply-templates mode="detect" select="*">
        <xsl:with-param name="indent" select="$tb"/>
    </xsl:apply-templates>
    <!-- Close the root array -->
    <xsl:value-of select="$nl"/>
    <xsl:text>}]</xsl:text>
</xsl:template>
<xsl:template match="*" mode="detect">
    <xsl:choose>
        <xsl:when test="name(preceding-sibling::*[1]) = name(current()) and name(following-sibling::*[1]) != name(current())">
            <xsl:apply-templates mode="obj-content" select="."/>
            <xsl:text>]</xsl:text>
            <xsl:if test="count(following-sibling::*[name() != name(current())]) > 0">, </xsl:if>
        </xsl:when>
        <xsl:when test="name(preceding-sibling::*[1]) = name(current())">
            <xsl:apply-templates mode="obj-content" select="."/>
            <xsl:if test="name(following-sibling::*) = name(current())">, </xsl:if>
        </xsl:when>
        <xsl:when test="following-sibling::*[1][name() = name(current())]">
            <xsl:text>"</xsl:text>
            <xsl:value-of select="name()"/>
            <xsl:text>" : [</xsl:text>
            <xsl:apply-templates mode="obj-content" select="."/>
            <xsl:text>, </xsl:text>
        </xsl:when>
        <xsl:when test="count(./child::*) > 0 or count(@*) > 0">
            <xsl:text>"</xsl:text>
            <xsl:value-of select="name()"/>" : [<xsl:apply-templates
                mode="obj-content" select="."/>
            <xsl:if test="count(following-sibling::*) > 0">], </xsl:if>
        </xsl:when>
        <xsl:when test="count(./child::*) = 0">
            <xsl:text>"</xsl:text>
            <xsl:value-of select="name()"/>" : "<xsl:apply-templates select="."/>
            <xsl:text>"</xsl:text>
            <xsl:if test="count(following-sibling::*) > 0">, </xsl:if>
        </xsl:when>
    </xsl:choose>
</xsl:template>
<xsl:template match="*" mode="obj-content">
    <xsl:text>{</xsl:text>
    <xsl:apply-templates mode="attr" select="@*"/>
    <xsl:if test="count(@*) > 0 and (count(child::*) > 0 or text())">, </xsl:if>
    <xsl:apply-templates mode="detect" select="./*"/>
    <xsl:if test="count(child::*) = 0 and text() and not(@*)">
        <xsl:text>"</xsl:text>
        <xsl:value-of select="name()"/>" : "<xsl:value-of select="text()"/>
        <xsl:text>"</xsl:text>
    </xsl:if>
    <xsl:if test="count(child::*) = 0 and text() and @*">
        <xsl:text>: "</xsl:text>
        <xsl:value-of select="text()"/>
        <xsl:text>"</xsl:text>
    </xsl:if>
    <xsl:text>}</xsl:text>
    <xsl:if test="position() &lt; last()">, </xsl:if>
</xsl:template>
<xsl:template match="@*" mode="attr">
    <xsl:text>"</xsl:text>
    <xsl:value-of select="name()"/>" : "<xsl:value-of select="."/>
    <xsl:text>"</xsl:text>
    <xsl:if test="position() &lt; last()">,</xsl:if>
</xsl:template>
<xsl:template match="node/@TEXT | text()" name="removeBreaks">
    <xsl:param name="pText" select="normalize-space(.)"/>
    <xsl:choose>
        <xsl:when test="not(contains($pText, '&#xa;'))">
            <xsl:copy-of select="$pText"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="concat(substring-before($pText, '&#xd;&#xa;'), ' ')"/>
            <xsl:call-template name="removeBreaks">
                <xsl:with-param name="pText" select="substring-after($pText, '&#xd;&#xa;')"/>
            </xsl:call-template>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

# node.js - node.js 的 MQTT 客户端播放负载大于 128 字节

> ID：14337528
> 
> 赞同：1
> 
> 时间：2013-01-15T12:15:18.837
> 
> 标签：node.js, websocket, mqtt

我尝试理解和实现 node.js 的 MQTT-Client，可以在以下位置找到：http: [//jahbromo.blogspot.de/2011/12/client-mqttt-javascript.html](http://jahbromo.blogspot.de/2011/12/client-mqttt-javascript.html)

当我发布小于 128 字节的播放负载时，没有问题并且消息被正确定向，但是当负载较大时，node.js 会在发布后立即打印出“连接被代理关闭”。因为我对 websockets 和 node.js 比较陌生，所以我不明白为什么上面提到的这个 node.js-server-implemenatation 不能处理大于 128 字节的播放负载。因为我需要发送更大的有效载荷，所以如果有人可以帮助我增加限制，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:40:46.903

您会注意到您链接到的代码的限制（实际上是[https://github.com/yilun/node_mqtt_client](https://github.com/yilun/node_mqtt_client)的修改版本）：

> 无法处理大于 128 字节的有效载荷。

这是客户端库的限制，而不是 MQTT。

要添加对更大负载的支持，您需要为 PUBLISH 数据包实现完整的“剩余长度”支持，如规范中所述：[http ://public.dhe.ibm.com/software/dw/webservices/ws-mqtt/mqtt -v3r1.html#fixed-header](http://public.dhe.ibm.com/software/dw/webservices/ws-mqtt/mqtt-v3r1.html#fixed-header)

# mysql - 从Mysql唯一索引重复条目中恢复

> ID：14337531
> 
> 赞同：0
> 
> 时间：2013-01-15T12:15:47.200
> 
> 标签：mysql, concurrency, indexing

我正在尝试解决双重请求问题：当浏览器向服务器产生两个或多个相同的请求并且它们在不同的应用程序服务器上得到处理时。

在这种情况下，两个请求之一命中：

```
Mysql::Error: Duplicate entry '...' 
for key 'index_purchases_on_site_id_and_order_number_and_email 
```

之后有救援代码选择现有记录，而不是使用与插入请求相同的参数：

```
select * from purchases where site_id = ? and order_number = ? and email = ? 
```

但它在数据库中找不到任何东西。

来自数据库查询日志的片段：

```
 SQL (1.3ms)   BEGIN
  ......
  Purchase Create (0.0ms)   Mysql::Error: Duplicate entry '1887-100264587-9z1CIIDsH2a21+AEEH2OR9LsndO3oIS4D4Am1U5XJ04=
' for key 'index_purchases_on_site_id_and_order_number_and_email': INSERT INTO `purchases` (`order_date`, `referrer`, `created_at`, `updated_at`, `encrypted_email`, `visitor_id`, `order_number`, `coupon_code`, `subtotal`, `customer_id`, `site_id`, `ip_address`) VALUES('2013-01-14 20:57:47', 'https://www.bonobos.com/b/checkout', '2013-01-14 20:57:47', '2013-01-14 20:57:47', '9z1CIIDsH2a21+AEEH2OR9LsndO3oIS4D4Am1U5XJ04=\n', 15813843, '100264587', '', 218.0, NULL, 1887, '12.106.186.6')
  Purchase Load (0.5ms)   SELECT * FROM `purchases` WHERE (order_number = '100264587' AND site_id = 1887 AND encrypted_email = '9z1CIIDsH2a21+AEEH2OR9LsndO3oIS4D4Am1U5XJ04=\n') LIMIT 1
  SQL (18.0ms)   ROLLBACK 
```

这怎么可能？

# security - 更改 Mifare SAM 中的密钥条目

> ID：14337532
> 
> 赞同：1
> 
> 时间：2013-01-15T12:15:47.060
> 
> 标签：security, mifare

在执行更改密钥条目以更改 Mifare SAM 中的密钥条目时，我收到以下错误，请告诉我如何解决此问题。

**不满足使用条件（需要使用 keynocek 进行主机身份验证）**

错误代码是**69h 85h**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T13:36:11.857

要进行 SAM_ChangeKeyEntry，您必须先使用有权更改的 KeyEntry Number 和 KeyEntry Version 执行 AuthenticateHost。

如果您忘记了谁有权对您的 KeyEntry 进行 ChangeKeyEntry。制作一个 GetKeyEntry，结果您将拥有 KeyNoCEK 和 KeyVCEK。

如果你想查看或配置你的 SAM，这个库实现了 SAM AV1 命令。 [https://github.com/islog/liblogicalaccess](https://github.com/islog/liblogicalaccess) 和关于 SAM 的 wiki：http: [//liblogicalaccess.islog.com/wiki/doku.php/sam-feature](http://liblogicalaccess.islog.com/wiki/doku.php/sam-feature)

# java - 获取 Java stacktrace 中涉及的对象

> ID：14337534
> 
> 赞同：6
> 
> 时间：2013-01-15T12:16:00.873
> 
> 标签：java, stack-trace, callstack

我可以使用检索当前的堆栈跟踪，`Thread.currentThread().getStackTrace()`但这只给了我调用中涉及的类。是否可以检索调用跟踪中涉及的对象实例？也许某种库可以让我从堆中检索对象？

我有一个问题，需要我追溯到一个 Spring bean，它间接创建了我请求堆栈跟踪的对象。

**更新** 如果在 Java 中没有内置工具，我正在寻找一个可以在运行时为我执行此操作的可嵌入库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:20:49.880

这是一个非常有趣的想法，但不幸的是，你**不能**，这是不可能的。

~~**UPD：**答案为“否”的原因之一是这样一个事实，即如果可能，那么必须存在对所有已创建对象的引用列表。但在这种情况下，Java GC 根本不起作用。~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:12:18.293

你可以试试[housemd](https://github.com/zhongl/HouseMD)。它由工程师@alibaba 开发，即使在生产环境中也可以安全使用，例如 taobao.com。

其特点包括：

> ```
> Display object field value
> Output invocation stack trace 
> ```

以下是示例屏幕截图： ![在此处输入图像描述](../Images/7c8ddcd094da2c44bd395a5efc8a16b4.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:31:09.430

尝试使用 Eclipse 调试器来查看在特定方法中使用的对象的值。在要暂停程序的行上放置断点。

# database - Delphi 数据库组件的奇怪行为

> ID：14337537
> 
> 赞同：0
> 
> 时间：2013-01-15T12:16:12.903
> 
> 标签：database, delphi, dbexpress

我对 Delphi 数据库组件有疑问。我试图向程序添加一些功能，但遇到了奇怪的问题。我将其分解为一个简单的示例项目，并且行为仍然存在。

我在 Delphi 2007 上创建了一个新的表单应用程序，添加了一个 TSQLConnection、TSQLTable、TDataSetProvider 和 TClientDataSet。我插入了本地 MS SQL 数据库的信息和里面的表，这是一个简单的测试表：

```
CREATE TABLE dbo.Test1(
[Name] varchar(32) not null primary key,
[Type] varchar(16) not null,
[Selected] BIT not null) 
```

然后我添加了一个 TEdit、TListBox 和 2 个按钮。功能应该是：按Add，一条名为Edit1的记录被输入到数据库中。按更新，列表视图将被数据库中已有的条目填充。

编码：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
begin
  ClientDataSet1.Refresh;
  ClientDataSet1.First;
  while not ClientDataSet1.Eof do
  begin
    ListBox1.AddItem(ClientDataSet1Name.AsString,nil);
    ClientDataSet1.Next;
  end;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  ClientDataSet1.Append;
  ClientDataSet1Name.AsString := Edit1.Text;
  ClientDataSet1Type.AsString := 'A1';
  ClientDataSet1Selected.AsBoolean := false;
  ClientDataSet1.Post;
  ClientDataSet1.ApplyUpdates(-1);
end; 
```

现在对我来说奇怪的是，当启动程序时，添加 2 条记录（在管理工作室检查它们确实存在），现在我点击更新，列表保持为空，因为 ClientDataSet 的 RecordCount 为 0随着 Button1Click 开始时的 Refresh 被执行。然而，这些条目是并且保留在数据库中。

另一个奇怪的事情是，一旦我退出程序，然后重新启动并尝试添加另一条记录，我就会收到错误“无法创建新连接，因为在手动或分布式事务模式下”。一旦我从表中删除记录并重新启动程序，我就可以再次添加。

有人可以告诉我这种奇怪的行为是如何发生的以及我该如何解决它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:28:59.657

Maybe this one:

"Problem:
When using the MSSQL dbExpress driver with a ClientDataSet and a Provider, keep getting the following error when calling ApplyUpdate: Cannot create new connection because in manual or distributed transaction mode

Suggested Work Around:
Set "poFetchDetailsOnDemand" (for the Provider) to False. This is a known issue when it is set to True."

(Quoted from [this Embarcadero article](http://edn.embarcadero.com/article/29226) which refers to [SQLOLEDB Allows Only One Connection in Scope of Transaction](http://support.microsoft.com/default.aspx?scid=kb%3Ben-us%3B272358).

There's a lof of search results for "Cannot create new connection because in manual or distributed transaction mode"

# function - PostgreSQL 有条件地使用函数参数

> ID：14337543
> 
> 赞同：0
> 
> 时间：2013-01-15T12:16:34.200
> 
> 标签：function, postgresql, select, parameters, conditional

我想知道如何有条件地使用函数参数。这是我的函数，您可以阅读查询中的注释：

```
CREATE OR REPLACE FUNCTION mediabase.select_media(sysEnvironment character varying, statusId integer)
RETURNS refcursor AS
$BODY$
DECLARE
  ref refcursor; 
BEGIN
  OPEN ref FOR 

  SELECT media.id, media.title, media.unique_filename, media.owner_id, media.status_id, media.location_name_id, media.upload_user_id, media.upload_ip, media.metadata_id, media.type_id, media.description, media.system_environment, media.upload_date, media.gps_location, media.language_id, media_publications.publication_id, media.limitations, media_categories.category_id, metadata.width, metadata.height, metadata.equipment, metadata.copyright, metadata.creation_time, metadata.file_format, metadata.resolution, metadata.resolution_unit, metadata.gps_longitude, metadata.gps_latitude, metadata.artist, metadata.color_space, metadata.gps_altitude, metadata.software_used, metadata.user_comment
  FROM mediabase.media, mediabase.metadata, mediabase.media_categories, mediabase.media_publications
  WHERE media.metadata_id = metadata.id
  AND media.id = media_categories.media_id
  AND media.id = media_publications.media_id
  -- Problem: this CASE doesn't work of course
  CASE statusId <> -1 THEN
    AND media.status_Id = statusId
  END
  -- End problem
  AND media.system_environment = sysEnvironment
  ORDER BY media.upload_date DESC;

  RETURN ref;                       
END;
$BODY$
LANGUAGE plpgsql VOLATILE
COST 100; 
```

我只需要使用'statusId'参数，如果它不同于-1，否则我将不会收到任何结果，因为当然没有状态-1。稍后，我需要添加更多此类过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:29:05.023

尝试类似：

```
AND (media.status_Id = statusId OR statusId = -1) 
```

它不会检查`media.status_Id = statusId`是否`statusId = -1`。

# php - REQUEST_URI 与 HTACCESS

> ID：14337546
> 
> 赞同：0
> 
> 时间：2013-01-15T12:16:39.393
> 
> 标签：php, routing

据我所知，“路由”和使用“友好网址”有两种不同的方式

1：仅使用 .htaccess：

```
RewriteRule ^foobar/([^/]+)/([^/]+)$ "index.php?foo=$1&bar=$2" [NC] 
```

或 2：将 .htaccess 与 index.php“路由”系统结合使用：

```
 <IfModule mod_rewrite.c>
          RewriteEngine On
          RewriteBase /
          # if file not exists
          RewriteCond %{REQUEST_FILENAME} !-f
          # if dir not exists
          RewriteCond %{REQUEST_FILENAME} !-d
          # avoid 404s of missing assets in our script
          RewriteCond %{REQUEST_URI} !^.*\.(jpe?g|png|gif|css|js)$ [NC]
          RewriteRule .* index.php [QSA,L]
    </IfModule> 
```

然后在 index.php 中：

```
$uri = explode("/",substr($_SERVER['REQUEST_URI'],1));
    if((isset($uri[0])) && ($uri[0]!="")) {
        $page = $uri[0];
        if(is_file(ROOT."/subs/docs/$page/config.php")) {
               include(ROOT."/subs/docs/$page/config.php");
            }
    } else {
        $page="home";
    } 
```

然后在某处包含 $page 。

我的问题是，哪种方法更好，或者还有其他我不知道的方法？我所说的更好是指效率、速度和逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:22:46.303

在现实生活中，大多数路由系统都非常复杂，以至于第一个选项`.htaccess`直接变成了噩梦。

事实上，所有可能的输入参数组合的数量如此之多，以至于主应用路由器只需要处理检测控制器。虽然每个特定的控制器都必须以自己的方式处理它们。
坦率地说，您无法确定第二个参数必须分配给 foo 变量，而第三个参数必须分配给 bar。

所以，除了第二个，别无选择。

# objective-c - 为什么 iPhone 中没有显示阿拉伯字体（我可以看到文字，但看不到字体）

> ID：14337547
> 
> 赞同：2
> 
> 时间：2013-01-15T12:16:44.413
> 
> 标签：objective-c, fonts, ios6, arabic

我正在以编程方式编写阿拉伯语文本，如此[处](https://stackoverflow.com/a/14337144/1066828)和[此处](https://stackoverflow.com/a/8226107/1066828)所讨论的。

根据[这个](https://stackoverflow.com/a/14337144/1066828)解决方案，我可以看到正确字体的英文文本，但是当我对阿拉伯字体做同样的事情时，默认字体即将到来，而不是真正的字体。以下是相同的屏幕截图。

## 英语工作正常

![在此处输入图像描述](../Images/2cdc65927fcc0065160427ad5f6a9c2b.png)

## 阿拉伯语采用默认字体而不是实际字体

![在此处输入图像描述](../Images/425252025dae7ee06c05210693f1e70a.png)

## 字体.ttf 截图

![在此处输入图像描述](../Images/f45939e398d9bdfbb06181cfb9789fe9.png)

[从这里](http://freearabicfonts.com/Free_Arabic_Fonts?s8)下载阿拉伯字体。（列表字体#中的第三个字体：23）...

***我的问题是***，为什么阿拉伯字体会发生这种情况？

* * *

***我检查了印地语字体，它工作正常。唯一的问题是 ARABIC 字体。***

# android - 如何更改 UniversalImageLoader 的显示？

> ID：14337548
> 
> 赞同：0
> 
> 时间：2013-01-15T12:16:47.447
> 
> 标签：android, universal-image-loader

这应该是很简单的事情，但我找不到。我想在我的应用图像的某些地方显示圆角。但不是所有的。

我看到的唯一可以设置显示的地方是在初始设置中。找不到其他方法。而且我无法覆盖初始设置，因为它仅在配置为空时设置。我也没有找到在初始化时使用的 DisplayImageOptions 对象中更改它的方法。

我该怎么做才能在圆角和非圆角之间进行更改？提前致谢。

如有必要，这是我正在谈论的库：[https ://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:54:52.240

您可以在 中配置 displayer `DisplayImageOptions`，并且可以`DisplayImageOptions`为每个`displayImage(...)`调用进行自定义（只需将其传递给方法）。

当您不传递`DisplayImageOptions`时，`displayImage(...)`将使用配置中的默认选项 ( `.defaultDisplayImageOptions(...)`)。

# c# - 为什么字符串类型的默认值是 null 而不是空字符串？

> ID：14337551
> 
> 赞同：230
> 
> 时间：2013-01-15T12:17:11.787
> 
> 标签：c#, string, default-value

`null`在我可以安全地应用诸如等方法之前`ToUpper()`测试我所有的字符串是很烦人的`StartWith()`......

如果 的默认值`string`是空字符串，我就不必测试了，我会觉得它与其他值类型更一致，例如`int`or `double`。另外`Nullable<String>`会有意义。

那么为什么 C# 的设计者选择使用`null`作为字符串的默认值呢？

注意：这与[这个问题有关](https://stackoverflow.com/questions/265875/default-string-initialization-null-or-empty)，但更关注为什么而不是如何处理它。

* * *

## 回答 #1

> 赞同：324
> 
> 时间：2013-01-15T12:17:51.433

> 为什么字符串类型的默认值是 null 而不是空字符串？

因为`string`是**引用类型**，所有引用类型的默认值为`null`.

> 在我可以安全地应用 ToUpper()、StartWith() 等方法之前，测试我所有的字符串是否为 null 非常烦人......

这与引用类型的行为是一致的。在调用它们的实例成员之前，应该检查空引用。

> 如果 string 的默认值为空字符串，我就不必测试了，我会觉得它与其他值类型更一致，例如 int 或 double。

将默认值分配给特定的引用类型，而不是`null`会使它**不一致**。

> 另外`Nullable<String>`会有意义。

[`Nullable<T>`](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.110%29.aspx)适用于值类型。值得注意的是原始[.NET 平台](http://msdn.microsoft.com/en-us/library/b3h38hb0(v=vs.80).aspx)`Nullable`上并未引入这一事实，因此如果他们更改了该规则，将会有很多损坏的代码。（*礼貌**[@jcolebrand](https://stackoverflow.com/users/109749/jcolebrand)**）*

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-01-15T12:20:44.967

Habib 是对的——因为`string`它是一个引用类型。

但更重要的是，您*不必*`null`每次使用时都进行检查。`ArgumentNullException`不过，如果有人向您的函数传递了`null`引用，您可能应该抛出 a 。

`NullReferenceException`事情是这样的——如果你试图调用`.ToUpper()`一个字符串，框架会为你抛出一个。请记住，即使您测试您的参数，这种情况仍然可能发生，`null`因为作为参数传递给您的函数的对象上的任何属性或方法都可能评估为`null`.

话虽如此，检查空字符串或空值是很常见的事情，因此它们提供[`String.IsNullOrEmpty()`](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)并[`String.IsNullOrWhiteSpace()`](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace(v=vs.110).aspx)仅用于此目的。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-01-15T12:22:38.600

您可以编写一个[扩展方法](http://msdn.microsoft.com/en-ca/library/bb383977.aspx)（对于它的价值）：

```
public static string EmptyNull(this string str)
{
    return str ?? "";
} 
```

现在这可以安全地工作：

```
string str = null;
string upper = str.EmptyNull().ToUpper(); 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-10-29T06:58:42.100

从 C# 6.0 开始，您还可以使用以下内容

```
string myString = null;
string result = myString?.ToUpper(); 
```

字符串结果将为空。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-01-15T13:27:44.850

空字符串和空值是根本不同的。null 是没有值，而空字符串是空值。

对变量的“值”做出假设的编程语言，在这种情况下是一个空字符串，将与使用不会导致空引用问题的任何其他值初始化字符串一样好。

此外，如果您将该字符串变量的句柄传递给应用程序的其他部分，那么该代码将无法验证您是否有意传递了一个空白值，或者您是否忘记了填充该变量的值。

另一个可能出现问题的情况是字符串是某个函数的返回值。由于 string 是一种引用类型，并且在技术上可以同时具有 null 和空值，因此该函数在技术上也可以返回 null 或空（没有什么可以阻止它这样做）。现在，由于有 2 个“不存在值”的概念，即空字符串和 null，因此使用此函数的所有代码都必须进行 2 次检查。一个为空，另一个为空。

简而言之，一个状态只有 1 个表示总是好的。有关空和空值的更广泛讨论，请参阅下面的链接。

[https://softwareengineering.stackexchange.com/questions/32578/sql-empty-string-vs-null-value](https://softwareengineering.stackexchange.com/questions/32578/sql-empty-string-vs-null-value)

[处理用户输入时的 NULL vs Empty](https://stackoverflow.com/questions/405909/null-vs-empty-when-dealing-with-user-input)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-01-15T16:55:12.637

根本原因/问题是 CLS 规范（定义语言如何与 .net 交互）的设计者没有定义一种方法，类成员可以通过该方法指定必须直接调用它们，而不是通过`callvirt`调用者执行空引用检查；它也没有提供一种定义不受“正常”拳击约束的结构的方法。

如果 CLS 规范定义了这样的方法，那么 .net 将有可能始终遵循通用对象模型 (COM) 建立的引导，在该模型下，空字符串引用在语义上被认为等同于空字符串，并且对于其他用户定义的不可变类类型，它们应该具有值语义以同样定义默认值。本质上，对于 的每个成员会发生什么`String`，例如`Length`写成类似的东西`[InvokableOnNull()] int String Length { get { if (this==null) return 0; else return _Length;} }`。这种方法将为应该表现得像值的事物提供非常好的语义，但由于实现问题需要存储在堆上。这种方法的最大困难是这种类型之间转换的语义`Object`可能会变得有点模糊。

另一种方法是允许定义不继承自`Object`而是具有自定义装箱和拆箱操作（将转换为/从其他一些类类型）的特殊结构类型。在这种方法下，将有一个类类型`NullableString`，其行为与现在的 string 一样，以及一个自定义装箱的 struct type `String`，它将包含一个`Value`type的私有字段`String`。尝试将 a 转换`String`为`NullableString`or如果非 null 或null`Object`将返回。尝试强制转换为，对实例的非空引用会将引用存储在中（如果长度为零，则可能存储 null ）；强制转换任何其他引用都会引发异常。`Value``String.Empty``String``NullableString``Value`

尽管字符串必须存储在堆上，但从概念上讲，它们不应该*表现*得像具有非空默认值的值类型。将它们存储为包含引用的“普通”结构对于将它们用作“字符串”类型的代码来说是有效的，但在转换为“对象”时会增加一层额外的间接性和低效率。虽然我预计 .net 不会在这么晚的时候添加上述任何一个特性，但未来框架的设计者可能会考虑包括它们。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-01-15T12:20:16.530

> 为什么 C# 的设计者选择使用 null 作为字符串的默认值？

因为字符串是*引用类型*，所以引用类型的默认值是`null`。引用类型的变量存储对实际数据的引用。

让我们在这种情况下使用*[`default`](http://msdn.microsoft.com/en-us/library/xwth0h0d.aspx)*关键字；

```
string str = default(string); 
```

`str`是 a `string`，所以它是一个*引用类型*，所以默认值为`null`。

```
int str = (default)(int); 
```

`str`是一个`int`，所以它是一个*值类型*，所以默认值是`zero`。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-01-15T12:18:17.900

因为字符串变量是*引用*，而不是*实例*。

默认情况下将其初始化为 Empty 是可能的，但它会在整个板上引入很多不一致的地方。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-01-15T16:26:00.210

> 如果默认值为`string`空字符串，我就不必测试

错误的！更改默认值不会改变它是引用类型的事实，并且有人仍然可以将引用显式*设置*为`null`.

> 另外`Nullable<String>`会有意义。

真点。不允许`null`任何引用类型，而是需要`Nullable<TheRefType>`该功能会更有意义。

> 那么为什么 C# 的设计者选择使用`null`作为字符串的默认值呢？

与其他引用类型的一致性。现在，为什么要允许`null`引用类型呢？可能是因为它感觉像 C，尽管这是一个有问题的设计决策，它也提供了`Nullable`.

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-11-14T19:49:51.450

也许如果您`??`在分配字符串变量时使用运算符，它可能会对您有所帮助。

```
string str = SomeMethodThatReturnsaString() ?? "";
// if SomeMethodThatReturnsaString() returns a null value, "" is assigned to str. 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-01-15T19:11:09.360

String 是一个不可变对象，这意味着当给定一个值时，旧值不会从内存中消失，而是保留在旧位置，而新值则放在新位置。因此，如果默认值`String a`是，那么当它被赋予第一个值时`String.Empty`，它会浪费内存中的块。`String.Empty`

尽管看起来微不足道，但在使用默认值初始化大量字符串数组时，它可能会变成一个问题`String.Empty`。当然，`StringBuilder`如果这会成为问题，您总是可以使用可变类。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-01-15T21:09:09.447

由于 string 是引用类型，并且引用类型的默认值为 null。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-10-28T17:30:32.473

既然你提到`ToUpper()`了，这个用法就是我找到这个线程的方式，我将分享这个快捷方式（字符串？？“”）。ToUpper（）：

```
 private string _city;
    public string City
    {
        get
        {
            return (this._city ?? "").ToUpper();
        }
        set
        {
            this._city = value;
        }
    } 
```

似乎比：

```
 if(null != this._city)
        { this._city = this._city.ToUpper(); } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-01-15T14:19:15.687

也许`string`关键字让您感到困惑，因为它看起来与任何其他*值类型*声明完全一样，但它实际上是[这个问题](https://stackoverflow.com/questions/7074/whats-the-difference-between-string-and-string)`System.String`中解释的别名。 此外，Visual Studio 中的深蓝色和小写的首字母可能会让人误以为它是.
`struct`

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-02-17T15:11:16.717

可空类型直到 2.0 才出现。

如果在语言的开头已经创建了可空类型，那么字符串将是不可空的并且字符串？本来可以为空的。但是由于向后兼容性，他们无法做到这一点。

很多人都在谈论 ref-type 或非 ref type，但 string 是一个与众不同的类，并且已经找到了解决方案来使其成为可能。

# iphone - GLimageProcessing EAGLView 类方法

> ID：14337559
> 
> 赞同：4
> 
> 时间：2013-01-15T12:17:44.077
> 
> 标签：iphone, ios, image-processing

我想`EAGLView`在`ViewController`上面的代码中显示：

```
[((EAGLView*)self.view) drawView]; 
```

但它因错误而崩溃；

```
[UIView drawView:]: unrecognized selector sent to instance 
```

它在Apple 提供`ViewControlller`的`GLImageProcessing`示例项目中运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:50:26.273

您的 viewController 的视图没有响应，`drawView:`因为它是类型`UIView`（没有实现`drawView:`）。
要获得与 Apple 示例代码中相同的行为，您必须确保 viewControllers 视图实例的类型为`EAGLView`。

在 Interface Builder 中选择视图并将其自定义类设置为`EAGLView`：

![在此处输入图像描述](../Images/aff55d429277a4de3e0a00bf99ebd16f.png)

# javascript - jQuery.off 不使用变量函数名

> ID：14337563
> 
> 赞同：2
> 
> 时间：2013-01-15T12:18:01.013
> 
> 标签：javascript, jquery

我正在使用模块化模式来编写我的 Javascript 代码，这非常有趣！但我在一种情况下陷入了困境。

我的命名空间如下：

```
var settings, handlers, objects,
Namespace = {
    handlers: {
        //All event handlers go here
    },

    objects: {
        //All jquery button references go here
    },

    init: function(){
        //Initial stuff
    }
};

//Call init with the Namespace 
```

`mousedown`我有一个按钮，可以在单个对象（div）上的事件的两个不同处理程序之间切换，处理程序是`handlers`对象的属性。On `init`，一个处理程序自动`on`进入 div 并且工作正常。现在，当我单击切换按钮时，我正在尝试关闭第一个处理程序，以便可以打开另一个处理程序，但它不起作用！

我将`on`我的第一个`mousedown`事件处理程序（或所有处理程序！）像这样：

```
Namespace.objects.someObject.on('mousedown', Namespace.handlers.mouseDownHandlerOne); 
```

这工作正常。当我尝试`off`像这样转动它时：

```
Namespace.objects.someObject.off('mousedown', Namespace.handlers.mouseDownHandlerOne); 
```

它不起作用！没有错误或警告。如果我只使用`off`with`mousedown`而不传递处理程序名称，它可以工作。但我需要区分 2 个不同的处理程序！

在模块化的js环境下应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:22:54.577

Jquery .off 方法最多可以接受 3 个参数，使用以下代码：

```
Namespace.objects.someObject.off('mousedown', '**', Namespace.handlers.mouseDownHandlerOne); 
```

# opencl - 确定实际的最大本地内存

> ID：14337564
> 
> 赞同：0
> 
> 时间：2013-01-15T12:18:02.250
> 
> 标签：opencl

当生成具有编译时定义大小的本地内存的内核时，例如

```
__local float2 block[%d]; 
```

如何确定运行内核时实际可用的大小？

它不是 CL_DEVICE_LOCAL_MEM_SIZE，当我使用它时，我收到一条错误消息，告诉我最大允许量，它总是小于报告的值（另外：不是 2 的幂，它会减去内核使用的寄存器吗？）。

目前我只是使用报告大小的一半......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:29:42.297

我*无法*证实这一点。为了验证这一点，我创建了一个小[测试程序](https://github.com/matze/oclkit/blob/master/maxlocal.c)，它确定每个设备的最大本地内存并创建一个分配该数量的内核。除非我将数量至少增加一个字节，否则程序会成功执行。

也许你的问题出在`float2`. 这需要八个字节，如果将`block`数组长度设置为最大本地内存大小，它将不起作用。

# ruby-on-rails - 与列名同名的Rails关系`

> ID：14337573
> 
> 赞同：1
> 
> 时间：2013-01-15T12:18:45.433
> 
> 标签：ruby-on-rails, model, conflict

我对rails有点问题。我有一个继承的数据库（hense 古怪的列名），看起来有点像这样：

```
customer
---------
Customer_ID | name | fleet_size | category
1             'bob'     20          60

category
----------
Category_ID | Description
1               'Example Category' 
```

所以一个客户属于一个类别，一个类别有很多客户。模型如下所示：

```
class Category < ActiveRecord::Base
  set_table_name "category"

  has_many :customers, :foreign_key => "category"
end

class Customer < ActiveRecord::Base
  set_table_name "customer"

  belongs_to :category, :foreign_key => "Category_ID"
end 
```

由于`category`客户表中列的名称，我认为可能存在冲突，这意味着我无法`@customer.category.Description`在视图中调用。关于解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:25:54.193

更改关联名称并用作

```
belongs_to :cust_category, :foreign_key => "Category_ID", :class => 'Category'

@customer.cust_category.Description 
```

可能这会解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:24:33.057

您可以随时重命名关联：

```
belongs_to :something_else, :class_name => "Category", :foreign_key => "Category_ID" 
```

# c# - 不进行适当单元测试的风险

> ID：14337575
> 
> 赞同：-1
> 
> 时间：2013-01-15T12:18:48.800
> 
> 标签：c#, unit-testing, integration-testing

我之前问过一个单元测试实用问题（[单元测试：如何测试具有大量底层对象和业务逻辑的方法](https://stackoverflow.com/questions/14294861/unit-testing-how-to-test-methods-with-a-lot-of-underlying-objects-and-business)），我需要在同一段代码上打开另一个主题。

问题是，如果我不理会每个人告诉我的内容，我会继续“单元测试”该`MoveElementAtIndex`方法（在产品集合中移动产品），而不会对其他类的底层调用和使用有任何压力。我可以实例化一个新的产品集合并测试它们是否正确移动，对吗？

这不是单元测试，我知道。它也不是集成测试。它是混合的，你会说它有什么问题？它仍然可以帮助我避免问题。或者不会？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:03:50.437

没什么不好的，但是如果你的集合不是具体的产品，而是产品的接口，你可以很容易地把它变成一个真正的单元测试。通过这样做，您可以确保您的测试结果不依赖于产品对象中的实现问题。这使测试更清晰，您的代码更可靠。

顺便说一句：单元测试和集成测试之间没有混合。您拥有的是集成测试。只有当你用存根或模拟替换所有外部依赖时，你才能称之为单元测试。

# sql - 为什么不同时使用 ORM 和 SQL？

> ID：14337579
> 
> 赞同：1
> 
> 时间：2013-01-15T12:18:58.260
> 
> 标签：sql, orm

在 ORM 和 SQL 编程之间看似永恒的斗争中，出现了一个问题：为什么不两者都使用？使用 ORM 进行大部分编程，并为更复杂的 JOIN 查询和所选 ORM 无法执行的其他复杂查询编写我自己的 SQL 查询。有什么好的理由不这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:21:36.497

大多数情况下 ORM 生成的 SQL 都没有优化。

建议在性能很重要的地方，仅使用 ORM 进行绑定，并为所有查询使用用户定义的 SQL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T13:08:30.840

大多数 ORM 解决方案都支持本地 SQL，例如[Hibernate](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)。

不将两者结合起来的原因之一是一致性 - 如果您必须了解从数据库中检索数据并将它们转换为应用程序中的对象的两种方法，那么您要记住的次数是两倍，出现错误的机会是两倍，并且要做两倍的测试（对于“连接到数据库并检索数据”代码）。

实际情况是，不熟悉 ORM 的开发人员倾向于使用原生 SQL，而喜欢 ORM 工具的开发人员几乎可以使用 ORM 层完成所有工作——这将使您的代码库难以维护和扩展。

如果你打算这样做，我至少会强制执行“通过 ORM 工具执行 SQL，而不是直接通过 JDBC（或其他）”规则 - 这至少可以为您提供一些一致性，并且您可以重用很多对象映射功能。

不过，理想情况下，选择一个解决方案并坚持下去——对冲你的赌注很少是免费的。

# c# - NHibernate QueryOver 和子查询的问题

> ID：14337580
> 
> 赞同：3
> 
> 时间：2013-01-15T12:19:07.510
> 
> 标签：c#, nhibernate, queryover

我有以下模型：

```
public class User
{
    public virtual int Id { get; set; }
    public virtual string Username { get; set; }
    public virtual string Password { get; set; }
    public virtual string Email { get; set; }
    public IList<SubmissionNote> Notes { get;set; }
}

public class SubmissionNote
{
    public virtual Int64 Id { get; set; }
    public virtual string Text { get; set; }
    public virtual DateTime CreatedOn { get; set; }
    public virtual User Creator { get; set; }
    public virtual Submission BelongsTo { get; set; }
}

public class Submission
{
    public virtual Int64 Id { get; set; }
    public virtual DateTime HappenedOn { get; set; }
    public virtual int StatusCode { get; set; }
} 
```

我想编写一个查询，将所有提交的最后一个注释由某个用户或用户列表（由他们的名字标识）输入。感谢您使用 NHibernate QueryOver API 构建此查询的帮助。我已经能够创建一个查询来带来所有最后的注释，如下所示：

```
SubmissionNote alias = null;
var lastNote = session.QueryOver<SubmissionNote>()
    .SelectList(list => list.
        SelectGroup(x => x.BelongsTo).WithAlias(() => alias.BelongsTo).
        SelectMax(x => x.CreatedOn).WithAlias(() => alias.CreatedOn).
        Select(x => x.Creator).WithAlias(() => alias.Creator).
        Select(x => x.Id).WithAlias(() => alias.Id).
        Select(x => x.Text).WithAlias(() => alias.Text))
    .TransformUsing(Transformers.AliasToBean<SubmissionNote>())
    .List(); 
```

我可以使用指定的查询作为子查询来产生所需的结果吗？还是您建议其他解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:57:19.443

我会用子查询尝试这样的事情（虽然没有测试过）

```
SubmissionNote subNoteAlias = null, subNoteAliasMax =null;
User userAlias = null;
String[] userNames = new[]{"John","Joe"};

var subquery =
    QueryOver.Of(() => subNoteAliasMax)
       .Where(subNote => subNote.BelongsTo.Id == subNoteAlias.BelongsTo.Id)
       .Select(Projections.Max<SubmissionNote>(subNote => subNote.CreatedOn));

var result = session
 .QueryOver<SubmissionNote>(() => subNoteAlias)
 .WithSubquery.WhereProperty(subNote=>subNote.CreatedOn).Eq(subquery)
 .JoinQueryOver(
      subNote=>subNote.Creator
      ,()=>userAlias
      ,JoinType.InnerJoin
      ,Restrictions.In(Projections.Property(() => userAlias.Username ), userNames))
  .List(); 
```

生成的 SQL 查询将（非常）大致如下所示：

```
SELECT SubmissionNote.*
  FROM SubmissionNote INNER JOIN User
  ON SubmissionNote.creatorId = User.userId
  AND User.userName in ('john','joe')
  WHERE SubmissionNote.CreatedOn = (SELECT MAX(CreatedOn) FROM SubmissionNote snAlias     
     WHERE snAlias.SubmissionId = SubmissionNote.SubmissionId) 
```

希望这会有所帮助。子查询返回日期而不是 id 可能存在问题。LMK，我会看看。

# asp.net - 如何使用 XmlElement asp.net 显式设置类成员的 Order 属性

> ID：14337587
> 
> 赞同：0
> 
> 时间：2013-01-15T12:19:36.930
> 
> 标签：asp.net, web-services, xml-serialization

我正在尝试序列化我的代码。

当我使用 XmlElement ASP.Net 设置类成员的 Order 属性时，我在这一行遇到异常；

```
XmlSerializer serializer = new XmlSerializer(typeof(HotelListResponse)); 
```

例外是；

> > 顺序不一致：如果用于类的成员之一，则所有类粒子成员都需要“Order”属性，请在类成员“_hotelId”上使用 XmlElement、XmlAnyElement 或 XmlArray 自定义属性显式设置“Order”。

代码是：

```
 using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
             {

                 StreamReader responsereader = new  StreamReader(response.GetResponseStream());

                  var responsedata = responsereader.ReadToEnd();
                  xmldoc = (XmlDocument)JsonConvert.DeserializeXmlNode(responsedata);
                  xmldoc.Save(@"C:\New folder\myfile.xml");

                 DataTable dt = new DataTable();
                 DataRow dr;
                 dt.Columns.Add("hotelId");
                 dt.Columns.Add("name");
                 dt.Columns.Add("address1");
                 dt.Columns.Add("address2");
                 dt.Columns.Add("city");
                 dt.Columns.Add("postalCode");
                 dt.Columns.Add("countryCode");
                 dr = dt.NewRow();

                  XmlSerializer serializer = new XmlSerializer(typeof(HotelListResponse));

                 Stream reader = new FileStream(@"C:\New folder\myfile.xml", FileMode.Open);

                 HotelListResponse htype = (HotelListResponse)serializer.Deserialize(reader);
                 dt.ReadXml(@"C:\New folder\myfile.xml");
                 foreach(hoteltype ht in htype.hotel){
                      GridView1.DataSource = dt;
                      GridView1.DataBind();
                  }

                 //responsereader.Close();
                  //request.GetResponse().Close();

             }
         }
         catch (WebException ex)
         { 
             if (ex.Response == null)
                 throw new NullReferenceException("WebException response");
             throw ex;
         }

 }
    [System.SerializableAttribute()] 
    [System.Xml.Serialization.XmlRoot("HotelListResponse")]
     public class HotelListResponse
     {

         [System.Xml.Serialization.XmlElementAttribute("hotel")]
         public hoteltype[] hotel;
         [System.Xml.Serialization.XmlElement(Order = 0)] 
         public hoteltype[] Items {

             get {
                 return this.hotel;
             }
             set {
                 this.hotel = value;
             }
         } 
     }

    [Serializable]    
    [XmlType("hoteltype")]
    public class hoteltype
    {
        hoteltype(){}     

        public int _hotelId;  
        public string _name;   
        public string _address1;     
        public string _address2;    
        public string _city;
        public int _postalCode;  
        public string _countryCode;

        [XmlElement]
        public hoteltype[] htype;

        [System.Xml.Serialization.XmlElement(Order=1)]

        public int hotelId
        { 
            get {
                return _hotelId;
            } 
          set{
              _hotelId = value;
         }
      }
       [System.Xml.Serialization.XmlElement(Order=2)]

      public string name
    {
        get
        {
            return _name;
        }
        set
        {
            _name = value;
        }
    }
    [System.Xml.Serialization.XmlElement(Order=3)]

    public string address1
    {
        get
        {
            return _address1;
        }
        set
        {
            _address1 = value;
        }
    }
    [System.Xml.Serialization.XmlElement(Order=4)]

    public string address2
    {
        get
        {
            return _address2;
        }
        set
        {
            _address2 = value;
        }
    }
    [System.Xml.Serialization.XmlElement(Order=5)]

    public string city
    {
        get
        {
            return _city;
        }
        set
        {
            _city = value;
        }
    }
    [System.Xml.Serialization.XmlElement(Order=6)]

    public int postalCode
    {
        get
        {
            return _postalCode;
        }
        set
        {
            _postalCode = value;
        }
    }
    [System.Xml.Serialization.XmlElement(Order=7)]
    public string countryCode
    {
        get
        {
            return _countryCode;
        }
        set
        {
            _countryCode = value;
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:08:00.477

如异常中所述，一旦使用`Order=xx`，类上的所有可序列化属性和字段都必须排序。但是，这似乎`_hotelId`可能是为了成为一个私有的支持字段。由于[`XmlSerializer`](http://msdn.microsoft.com/en-us/library/ms950721.aspx)也序列化公共字段，这可能是无意的。如果`_hotelId`确实必须公开但您不希望它序列化，那么您可以使用[`XmlIgnore`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.xmlignore.aspx).

我猜你的课可能看起来像：

```
[System.SerializableAttribute()] 
public partial class HotelListResponse 
{ 
    [System.Xml.Serialization.XmlElement(Order = 0)] 
    public string SomeOrderedField 
    { 
        get;
        set;
    } 

    // ** Problem may be here
    // Because the field is public, XmlSerializer will try to serialize this
    public int _hotelId; 

    [System.Xml.Serialization.XmlElement(Order = 1)] 
    public int HotelId
    { 
        get
        {
            return _hotelId;
        }
        set
        {
            _hotelId = value;
        }
    } 
```

**编辑**是的，这正是问题所在

将您的支持字段设为私有 - 这就是您拥有公共属性访问器的原因。

```
 public int _hotelId;  => private int _hotelId;
    public string _name;  => private string _name; 
```

等等

**编辑**

```
 [XmlElement(Order=0)]
    public hoteltype[] htype; 
```

我也会同时将其更改为属性。如果您使用的是 .NET 3.5 或更高版本，请使用自动支持字段。

```
 [XmlElement(Order=0)]
    public hoteltype[] htype
    {
       get;
       set;
    } 
```

**编辑**

如果您系统地应用上述内容，您的可序列化类应如下所示：

```
 [System.SerializableAttribute()]
    [System.Xml.Serialization.XmlRoot("HotelListResponse")]
    public class HotelListResponse
    {
        // This is bad practice - never make a backing field public
        //[System.Xml.Serialization.XmlElementAttribute("hotel")]
        //public hoteltype[] hotel;

        // Use the >= .Net 3.5 automatic properties - this way you don't need 
        // the backing field at all, which will prevent confusion over 
        // 'what gets serialized'
        [System.Xml.Serialization.XmlElement(Order = 0)]
        public hoteltype[] Items
        {
            get;
            set;
        }
    }

    [Serializable]
    [XmlType("hoteltype")]
    public class hoteltype
    {
        public hoteltype() { }

        [System.Xml.Serialization.XmlElement(Order = 0)]
        public hoteltype[] htype
        {
            get;
            set;
        }

        [System.Xml.Serialization.XmlElement(Order = 1)]
        public int hotelId
        {
            get;
            set;
        }
        [System.Xml.Serialization.XmlElement(Order = 2)]
        public string name
        {
            get;
            set;
        }

        [System.Xml.Serialization.XmlElement(Order = 3)]
        public string address1
        {
            get;
            set;
        }
        [System.Xml.Serialization.XmlElement(Order = 4)]
        public string address2
        {
            get;
            set;
        }
        [System.Xml.Serialization.XmlElement(Order = 5)]
        public string city
        {
            get;
            set;
        }
        [System.Xml.Serialization.XmlElement(Order = 6)]

        public int postalCode
        {
            get;
            set;
        }
        [System.Xml.Serialization.XmlElement(Order = 7)]
        public string countryCode
        {
            get;
            set;
        }
    } 
```

并通过序列化/反序列化循环测试上述内容，如下所示：

```
XmlSerializer serializer = new XmlSerializer(typeof(HotelListResponse));

HotelListResponse X = new HotelListResponse();
X.Items = new hoteltype[2];
X.Items[0] = new hoteltype();
X.Items[0].address1 = "address1";
X.Items[1] = new hoteltype();
X.Items[1].address1 = "address2";

using (Stream writer = new FileStream(@"C:\temp\myfile.xml", FileMode.Create))
{
    serializer.Serialize(writer, X);
    writer.Flush();
}

Stream reader = new FileStream(@"C:\temp\myfile.xml", FileMode.Open);

HotelListResponse htype = (HotelListResponse)serializer.Deserialize(reader); 
```

以下文件反序列化：

```
<?xml version="1.0"?>
<HotelListResponse xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Items>
    <hotelId>0</hotelId>
    <address1>address1</address1>
    <postalCode>0</postalCode>
  </Items>
  <Items>
    <hotelId>0</hotelId>
    <address1>address2</address1>
    <postalCode>0</postalCode>
  </Items>
</HotelListResponse> 
```

# c++ - 参数中的 C++ typedef 函数

> ID：14337588
> 
> 赞同：1
> 
> 时间：2013-01-15T12:19:40.617
> 
> 标签：c++, typedef

我有一个函数，它以下一个方式声明：

```
func(int n,double *xk, double (*f)(int x)); 
```

我想将其分配到一个单词中，例如`typedef int (*func_t)(int, *double, ...);`. 我知道如何分配函数，但不明白如何在参数中描述函数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T12:21:16.040

你可以做

```
typedef double (*FuncPtr)(int x);  
int func(int n,double *xk, FuncPtr f);

typedef int (*func_t)(int,double*,FuncPtr); 
```

一步一步减少不必要的混乱和混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:24:03.260

`typedef int (*func)(int, double*, double (*)(int));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T12:33:28.690

假设函数声明如下所示：

```
int func(int n, double *xk, double (*f)(int x)) {

    // ...
} 
```

那么指向该函数的指针的 typedef 如下所示：

```
typedef int (*funcPointer)(int, double *, int, int, double (*)(int)); 
```

// 用法：

```
funcPointer ptrName = func; 
```

假设您想将此 ptrName 赋予一个名为 doThis() 的函数：

```
int doThis (funcPointer ptrName) {
  return 0;
} 
```

那么您可以使用以下方法调用它：

```
int y = doThis(ptrName); 
```

祝你好运！=)

# jquery - 从不同的表中获取值并附加到 jquery

> ID：14337590
> 
> 赞同：0
> 
> 时间：2013-01-15T12:19:51.817
> 
> 标签：jquery, html, append

我正在使用两张表，一张用于产品名称，一张用于产品图像路径...我能够获取图像路径并将图像动态添加到 html。它工作正常。

问题是，当我想在悬停时添加图像的标题，这是图像顶部的一个 div 类，我使用 jQuery 的 each 函数更改悬停 div 上的标题，标题被连接而不是添加到特定图像。

这是我从表路径附加图像的代码..

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#mainContentPlaceholder_productPathGridView').hide(); //Hides ImagePath Gridview

        var arr = []; //Creates an Array Path Arr
        $("#mainContentPlaceholder_productPathGridView td").each(function () {  //Loops through GridView Td (Table Columns)
            arr.push($(this).text());
        });

        // Starts adding Images to the  Gallery 
        $.each(arr, function (index, imageLocation) {
            $(".megafolio-container").append('<div class="mega-entry jeans cat-all" data-src="' + imageLocation + '"' + 'data-width="395" data-height="507"><div class="mega-hover"><div class="mega-hovertitle"><h2 class="productNameTitle"></h2><a class="shopButton" href="itemDetails.aspx">Details</a></div></div></div>'); //Apended New  Values
        });

    });
</script> 
```

这是我添加的附加 ID 的代码：

```
<!-- Getting Product Names-->

<script type="text/javascript">
    $(document).ready(function () {
        $('#mainContentPlaceholder_productNameGridView').hide(); //Hides ImagePath Gridview

        var arr2 = []; //Creates an Array Path Arr
        $("#mainContentPlaceholder_productNameGridView td").each(function () {  //Loops through GridView Td (Table Columns)
            arr2.push($(this).text());
        });

        // Starts adding Images to the  Gallery 
        $.each(arr2, function (index, productname) {
         //   alert(productname);
           $(".productNameTitle").text(productname); //Apended New Name
        });
        });
</script> 
```

现在问题存在，因为 id 在每个 div 上都连接在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:26:12.963

如果我没记错的话..为什么不使用一个循环而不是两个..您正在创建 teo 不同的数组 arr,arr2 并循环遍历它...以显示相同的文本..

尝试这个

```
$("#mainContentPlaceholder_productNameGridView td").each(function () {  //Loops through GridView Td (Table Columns)
        $(".megafolio-container").append('<div class="mega-entry jeans cat-all" data-src="' + $(this).text() + '"' + 'data-width="395" data-height="507"><div class="mega-hover"><div class="mega-hovertitle"><h2 class="productNameTitle"></h2><a class="shopButton" href="itemDetails.aspx">Details</a></div></div></div>'); //Apended New  Values
        $(".productNameTitle").text($(this).text());
    }); 
```

# javascript - 如何在 Javascript 中使用 toISOString()？

> ID：14337591
> 
> 赞同：0
> 
> 时间：2013-01-15T12:19:58.113
> 
> 标签：javascript, json, datetime

我正在使用 currentDate.toISOString()，它以“2013-01-15T12:08:54.135Z”的格式提供输出。

但我需要日期格式为“2013-01-15T12:08:54-06:00”。

这里 -06:00 可能是时区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:22:58.627

[此函数仅构建ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)定义的 ISO 格式字符串。

要构建不同格式的字符串，您可以

*   [使用Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)`get*`的函数（尤其是[getTimeZoneOffset](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)）构建自己的函数
*   使用[date.js 之类的库](http://www.datejs.com/)

date.js 有一个方便的[toString](http://code.google.com/p/datejs/wiki/APIDocumentation#toString)函数。如果您导入[extras.js](http://code.google.com/p/datejs/source/browse/trunk/src/extras.js?r=155) ，您可能会使用[许多标识符](http://code.google.com/p/datejs/wiki/FormatSpecifiers)，其中包括

> P 与格林威治时间 (GMT) 的差异，小时和分钟之间带有冒号“+02:00”、“-06:00”

# ember.js - Ember：无法读取未定义和文本字段更新的属性“enterStates”

> ID：14337593
> 
> 赞同：1
> 
> 时间：2013-01-15T12:20:00.727
> 
> 标签：ember.js, ember-old-router

我对 ember 有以下问题。

我有一个包含一组数据的表。我有一个事件返回表的当前元素。然后它通过转换到新状态来打开另一个视图，并将选定的表数据写入文本字段。

```
 click: function(e) {
        var element = $(e.target).closest("td");
        App.tee = element.text().trim();
        var router;
        router = this.get('controller.target.router');
        router.transitionTo('newRoute') 
```

如您所见，我的路由器中还有一些其他路由。最后两条路线（家庭和个人资料）是导航选项卡的一部分。他们在我点击桌子旁边工作得很好。然后，当我单击选项卡时出现以下错误： Uncaught TypeError: Cannot read property 'enterStates' of undefined

好的，我再次尝试解释我想要做什么。

我想做的是用一些数据（例如人）创建一个表。当我单击表格中的特定人员时，相应的表格数据应显示在下面出现的文本字段中。每当我单击另一个人时，下面的文本字段应更改为表中当前单击的人的信息。当我单击“新建”按钮时，右侧会出现更详细的 Tabview 以及一些附加信息。我在玩 ember，到目前为止，我只是实现了一些视图和路由。我被困住了，因为我试图实现更新表格下方文本字段的事件。它更新一次，但在它转换到新状态（newRoute）之后什么也没有发生。我知道代码非常原始，但这只是了解它在 ember 中如何工作的测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:24:17.393

好的，解决方案比我想象的要容易。问题不在于状态变化。更多的是如何访问数据以及如何影响绑定数据的更改的问题。我意识到我需要了解 Ember 中的变量访问是如何工作的以及 App.initialize() 方法究竟做了什么，为时已晚。所以 App.initialize() 会初始化路由器中的所有 Controller 类。如果您想访问控制器中的任何变量，您必须通过路由器获得访问权限，例如

```
{{view Ember.TextField valueBinding="App.router.tableController.person"}} 
```

其次，我不熟悉 Ember 中 set 和 get 方法的用法以及 extend 和 create 之间的区别。之前我想知道 ember 在哪里实例化我的对象。所以我的问题与状态无关，这只是对 ember 框架的完全误解。我是菜鸟，仅此而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:12:48.527

好的，这是答案的第一枪。

*   我认为主要问题只是一个错字`gotoHome`而不是`goToHome`模板。
*   顺便说一句，我通过使用`<button {{action }}></button>`而不是 Ember.Button 来消除一些弃用警告。
*   当我单击表格时还有一些其他警告，因为您引用了一些不存在的属性。

这是相应的小提琴：http: [//jsfiddle.net/Sly7/rKw9A/25/](http://jsfiddle.net/Sly7/rKw9A/25/)

由于我不明白它应该如何工作，我不确定整体行为。我让你解释一下流程（请通过编辑问题）。欢迎任何其他评论:)

# wpf - 如何处理 WPF DataTemplate 中的事件？

> ID：14337595
> 
> 赞同：3
> 
> 时间：2013-01-15T12:20:08.627
> 
> 标签：wpf, events, custom-controls, datatemplate

我有一个自定义控件，它有一个名为 ViewModel 的依赖属性，其值显示在`ContentPresenter`. 我`DataTemplate`对每种类型的 ViewModel 都有一个。每个模板都允许用户以不同的方式进行选择，我需要在后面的自定义控件代码中处理该选择事件。

```
<Style TargetType="{x:Type local:MyCustomControl}">

    <Style.Resources>
        <ResourceDictionary>

            <DataTemplate DataType="{x:Type local:ViewModelOne}">

                <!-- how to handle this event? -->
                <ListBox
                    MouseDoubleClick="ListBox_MouseDoubleClick"/>
            </DataTemplate>

            <DataTemplate DataType="{x:Type local:ViewModelTwo}">

                <!-- this ListBox has another style, but event should
                     be handled the same way -->
                <ListBox
                    MouseDoubleClick="ListBox_MouseDoubleClick"/>
            </DataTemplate>

            <!-- more templates here -->

        </ResourceDictionary>
    </Style.Resources>

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:MyCustomControl}">
                <ContentPresenter Content="{TemplateBinding ViewModel}"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**编辑：**

这是自定义控件背后的代码，其中包含我希望在`ListBox`双击中的某些内容时调用的方法：

```
public class MyCustomControl : Control
{
    // how to attach ListBox MouseDoubleClick event to this method? 
    private void ListBox_MouseDoubleClick(object sender, MouseButtonEventArgs e)
    {
        DoMagic(((ListBox)sender).SelectedItem);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:23:54.373

这些 DataTemplate 是否在资源字典中定义？

如果是这样，您可以使用[附加的行为](http://www.codeproject.com/Articles/28959/Introduction-to-Attached-Behaviors-in-WPF)。

如果它们是在 MyWindow 或 MyUserControl XAML 中定义的，那么您可以在后面的代码中定义它们 ie`MyWindow.xaml.cs`或`MyUserControl.xaml.cs`

# vb.net - 如何根据原始图像比例调整图像大小？

> ID：14337597
> 
> 赞同：0
> 
> 时间：2013-01-15T12:20:15.837
> 
> 标签：vb.net, image, image-processing

使用 VB.net 重新调整图像大小后的白色背景，如下所示。我试图更改一些值但失败了。

```
Dim FileToResize As String = Server.MapPath("~/images/" & filename & FileUpload1.FileName)
Using originalBitmap As Bitmap = Bitmap.FromFile(FileToResize, True), newbmp As Bitmap = New Bitmap(200, 200)
    Dim WidthVsHeightRatio = CDec(originalBitmap.Width) / CDec(originalBitmap.Height)

    Using newg As Graphics = Graphics.FromImage(newbmp)
        newg.SmoothingMode = Drawing2D.SmoothingMode.HighQuality
        newg.Clear(Color.White)

        If WidthVsHeightRatio = 1D Then
            newg.DrawImage(originalBitmap, 0, 0, 200, 200)
            newg.Save()

        ElseIf WidthVsHeightRatio < 1D Then 'Image is taller than wider

            newg.DrawImage(originalBitmap, New RectangleF(New PointF((100 - (200 * WidthVsHeightRatio) / 2), 0), New SizeF(200 * WidthVsHeightRatio, 200.0F)))
            newg.Save()

        Else 'Image is wider than taller

            Dim inverse As Double = Math.Pow(WidthVsHeightRatio, -1)
            newg.DrawImage(originalBitmap, New RectangleF(New PointF(0, 100 - ((200 * inverse) / 2)), New SizeF(200.0F, 200 * inverse)))
            newg.Save()
        End If
    End Using

    newbmp.Save(Server.MapPath("~/images/" & "_th_" & filename & FileUpload1.FileName), System.Drawing.Imaging.ImageFormat.Jpeg)
    NewsItem.ImageLink = filename & FileUpload1.FileName
    NewsItem.smallimage = "_th_" & filename & FileUpload1.FileName
End Using 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:39:10.690

我最近做了一些研究，以便为电子商务网站即时生成图像缩略图。我开始自己生成位图，然后调整大小等。在光盘上的图像大小和质量出现问题后，我查看了[http://imageresizing.net/](http://imageresizing.net/)，从那以后我就再也没有回头。它可以通过一行代码非常快速地从 byte()、流和物理文件生成图像：

```
ImageBuilder.Current.Build(New MemoryStream(bImage), sImageLocation + sFullFileName, New      ResizeSettings("maxwidth=214&maxheight=238")) 
```

我肯定会推荐这个组件，而不是试图重新发明轮子......

# c# - 未启用时更改按钮背景

> ID：14337602
> 
> 赞同：11
> 
> 时间：2013-01-15T12:20:20.300
> 
> 标签：c#, wpf, button, disabled-control

只有在未启用 ( ) 时，我才需要更改我的`Button`背景（例如 SolidColorBrush `IsEnabled == false`）。
我能怎么做？

我是否可以`Style`使用 XAML 修改 Button 或者我可以以编程方式完成这项工作？什么是正确的 XAML 代码，在未启用时仅更改背景？

我尝试了以下 XAML 代码，但没有效果：

```
<Button>
<Button.Style>
    <Style TargetType="Button">
        <Style.Triggers>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Background" Value="Red"></Setter>
            </Trigger>
        </Style.Triggers>
    </Style>
</Button.Style>
</Button> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T12:37:34.700

您可以通过编辑模板来更改背景。您将在`Button` [此处](http://msdn.microsoft.com/en-us/library/ms753328%28v=vs.85%29.aspx)找到默认模板。

在触发器中，`IsEnabled`您可以简单地添加如下内容：

```
<Setter Property="Background" Value="{StaticResource DisabledBackgroundBrush}"/> 
```

**编辑**：然后试试这个；

```
<Window.Resources>
    <Style TargetType="{x:Type Button}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="Overlay" CornerRadius="2">
                        <ContentPresenter/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter TargetName="Overlay" Property="Background" Value="Red"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>
<StackPanel>
    <Button Content="Button" IsEnabled="False"/>
</StackPanel> 
```

只需更改它以满足您的需求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T12:30:36.033

您可以使用样式触发器：

```
<Image.Style>
    <Style>
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsEnabled}" Value="False">
                <Setter Property="Image.Source" Value="pack://application:,,,/disabled.png" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Image.Style> 
```

# excel - 将 PowerPivot 连接到 PostgreSQL 数据库

> ID：14337606
> 
> 赞同：2
> 
> 时间：2013-01-15T12:20:36.600
> 
> 标签：excel, postgresql, odbc, powerpivot

当我尝试连接 PowerPivot PostgreSQL 数据库时（此时我需要“选择如何导入数据”。当我选择从表和视图中选择时，出现以下错误。当我选择编写 sql 查询并按下“设计”按钮，打开空窗口（它应该从数据库打开表）），我收到以下错误消息：

```
"No tables were found in the data source. Check the connection information and login credentials." 
```

我使用“连接到数据源 - 其他 (OLEDB/ODBC)”。我已经安装了 PostgreSQL ODBC 驱动程序。我使用 PostgreSQL ANSI 驱动程序（尝试了 UNICODE，得到了同样的错误）。当我测试连接时，它显示“连接成功）。此外，如果我对数据透视表使用相同的数据库连接，一切正常，我可以从我的数据库中获取任何表。

我使用 MS Office 2012 32 位，PowerPivot 也是 32 位。

所以我想没有人知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T12:32:51.940

遇到了同样的问题 - 连接成功，但表列表为空。我可以导入数据的唯一方法是选择**“编写将指定要导入的数据的查询”**而不是“从表和视图列表中选择以选择要导入的数据”。稍微乏味一些，但可以让您访问数据:)

基本查询： **Select * from catalogname.tablename**

我的表列在目录中的公共架构下，因此：
**Select * from catalogname.public.tablename**

无法导入特定列，因此这是我确认连接和访问数据的成功查询：**从 catalogname.public.tablename 中选择 column1、column2、column 3**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T08:28:53.913

我调查了这个问题。PostgreSQL ODBC 驱动程序包含一些错误，这是此错误的原因：

“在数据源中未找到表。检查连接信息和登录凭据。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T00:08:55.103

我认为这可能是 postgresql 的 odbc 驱动程序的问题。你安装的是64位驱动吗？我会对此进行检查，与此同时，我同意您应该尝试编写一个查询来指定数据，看看这是否是一个可行的解决方法。

# mysql - MySql :: 在while循环中使用临时表

> ID：14337610
> 
> 赞同：0
> 
> 时间：2013-01-15T12:20:48.300
> 
> 标签：mysql, while-loop, temp-tables

我可以在 MySQL 的 While 循环中使用 Temp 表吗

喜欢 ：

```
WHILE (@CurrIndex <= @RowsCount) DO
SELECT FileReference,FileID,AllowDelete,ReferenceID  
       FROM deletefilesreferences LIMIT 1; 

    END WHILE; 
```

**`deletefilesreferences`** 临时表在哪里 。

# xaml - 为什么 TextBlock 会从文本中修剪结尾空格？

> ID：14337623
> 
> 赞同：16
> 
> 时间：2013-01-15T12:21:25.117
> 
> 标签：xaml, windows-8, microsoft-metro, .net-4.5

这是我`TextBlock`的：

```
<StackPanel Orientation="Horizontal" Margin="0,3,0,0">
    <TextBlock Text="6 or more characters, at least one letter and a number,   "  FontFamily="Segoe UI" Foreground="#000000" FontSize="13"/>
    <TextBlock Text="no symbols"  FontFamily="Segoe UI" Foreground="#000000" FontSize="13"/>
</StackPanel> 
```

这是输出（屏幕截图）： ![在此处输入图像描述](../Images/d5645fcaab2cf82130e803d2342b479b.png)

为什么要`TextBlock`修剪结尾空格？但是，当有前导空格时，它可以正常工作。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-15T14:35:28.370

看起来`xml:space="preserve"` *应该*可以解决问题（请参阅[Preserving Whitespace in XAML](http://msdn.microsoft.com/en-us/library/ms788746.aspx)），但这似乎在 Windows 应用商店应用程序中不起作用（它在 WPF 中起作用）。

如果您使用不间断的空格字符`&#160;`，它确实有效

```
 <TextBlock Text="6 or more characters, at least one letter and a number,&#160;&#160;&#160;&#160;&#160;&#160;&#160;"  .... 
```

我想你可以尝试在`Text`属性上构建一个转换器来检查尾随空格并用不间断空格替换 - 假设正在发生的截断不会太早发生。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-15T18:38:19.187

在. `<Run />`_`<TextBlock />.`

```
<StackPanel Orientation="Horizontal" Margin="0,3,0,0">
    <TextBlock FontFamily="Segoe UI" Foreground="#000000" FontSize="13">
        <Run Text="6 or more characters, at least one letter and a number, " />
        <Run Text="no symbols" />
    </TextBlock>
</StackPanel> 
```

并且自动换行仍然有效

```
<StackPanel Orientation="Horizontal" Margin="0,3,0,0">
    <TextBlock FontFamily="Segoe UI" Foreground="#000000" FontSize="13" 
        Width="200" TextWrapping="Wrap">
        <Run Text="6 or more characters, at least one letter and a number, " />
        <Run Text="no symbols" />
    </TextBlock>
</StackPanel> 
```

如果包装不是问题，我会很容易地使用 Jim 的解决方案 (#160;)。

请考虑一下 HTML 如何处理和保留空格。这也是 XAML 处理和保留空格的方式。当然，您会认为在 TextBlock 内部会更直接地处理它，对吧？嗯，就是这样。至少有一个解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-15T14:25:02.003

尝试使用`xml:space="preserve"`：

```
<StackPanel Orientation="Horizontal" Margin="0,3,0,0">
    <TextBlock xml:space="preserve" Text="6 or more characters, at least one letter and a number,   "  FontFamily="Segoe UI" Foreground="#000000" FontSize="13"/>
    <TextBlock xml:space="preserve" Text="no symbols"  FontFamily="Segoe UI" Foreground="#000000" FontSize="13"/>
</StackPanel> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-14T03:36:12.590

我找到了不同的解决方案！当`\u+A0`您还设置`IsTextSelectionEnabled`.

我不知道为什么会这样，这完全是一个惊喜（我添加了该字段，因为我刚刚发现它同时还在处理我的“*为什么我的文本在通用应用程序中被修剪？* ”问题）。

此外`U+205F`（中等数学空间）也可以与`IsTextSelectionEnabled`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-25T23:59:41.803

RichTextBlock 似乎保留了前导和尾随空格（在 WP 8.1 WinRT 中）：

```
<RichTextBlock>
 <RichTextBlock.Blocks>
  <Paragraph >
   <Paragraph.Inlines>
    <Run Text="trailing " /><Run Text="bbb" /><Run Text=" leading" />
   </Paragraph.Inlines>
  </Paragraph>
 </RichTextBlock.Blocks>
</RichTextBlock> 
```

但是，除了您指定的那些之外，它似乎还在运行之间添加了一个额外的空间。

# sql - 存储过程作为 MERGE [INSERT] 语句中的参数

> ID：14337628
> 
> 赞同：0
> 
> 时间：2013-01-15T12:21:27.853
> 
> 标签：sql, sql-server, sql-merge

我需要通过以下方式合并两个表：

*   目标有一个额外的列 ID。此 ID 来自另一个单列主表。
*   在 Merge 语句中插入记录时，我需要在 mater 表中插入一个新行并使用它`id`插入到 TARGET 表中。

我创建了一个存储过程，它插入并返回新插入的 ID。现在问题出在 SQL Merge 内部，我们不能调用存储的 Proc。

这个问题的解决方案是什么？不能使用标量函数，因为 INSERT 不能在函数中执行。

```
DECLARE @temp INT
MERGE dbo.mytabletarget T
USING dbo.mytableSource S
ON T.refId=S.RefId
WHEN MATCHED  THEN
UPDATE 
SET T.col1=S.col1,
    T.Col2=S.Col2
WHEN NOT MATCHED BY TARGET THEN
INSERT (Id,col1,col2)
VALUES({Here i need value from SP. SP simply Inserts a new Id into master table and Returns it},S.col1,S.col2);
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:47:42.500

> 这个问题的解决方案是什么？

不要使用存储过程。很明显，不是吗？

对于合并语句，您几乎只能在语句中执行命令。Merge 专注于 ETL 负载，既有优点也有局限性。

基本上，将逻辑放入合并语句中。

> 在 Merge 语句中插入记录时，我需要在 mater 表中插入一个新行并使用它的 id 插入到 TARGET 表中。

嗯，查找表维护？

常规方法是确保首先填写查找表（在单独的语句中）。由于特定原因，ETL（这就是合并的来源）通常沿着阶段工作。

抱歉，我也没有更好的解决方案；（

# nhibernate - 如何使用 FluentNHibernate 将类映射为不可变？

> ID：14337639
> 
> 赞同：9
> 
> 时间：2013-01-15T12:22:06.353
> 
> 标签：nhibernate, fluent-nhibernate

如何使用 FluentNHibernate 将类映射为不可变的。使用 hbm 我可以这样做。

```
<class name="Namespace.YYYY" table="XXXX" mutable="false" > 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T13:29:23.340

试试这个链接：[https ://stackoverflow.com/a/2871277/1679310](https://stackoverflow.com/a/2871277/1679310)

概括：

```
class EntityMap : ClassMap<Entity>
{
    public EntityMap()
    {
        ReadOnly();

        // Mappings
    }
} 
```

# c# - SqlDependency 常量数据库命中

> ID：14337641
> 
> 赞同：4
> 
> 时间：2013-01-15T12:22:13.777
> 
> 标签：c#, sql, sqldependency

我刚刚从微软官方来源[http://msdn.microsoft.com/en-us/library/a52dhwx7(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/a52dhwx7(v=vs.80).aspx)复制了这个例子，我对此感到困惑。运行应用程序后，即使没有使用该表，它也会不断地命中数据库？我想当该表实际更改时，事件会触发？我不希望它每秒都进行不断的数据库调用，这太糟糕了。

我做错了什么吗？我想我不确定是什么。任何人都有一个很好的例子的链接，最好不要 MSDN。

在此先感谢，奥南。

这是 SQL：

```
return "SELECT [ID],[FromMachine],[FromStore],[FromUser] FROM dbo.Store_Message"; 
```

根据要求，所有代码：

```
 public partial class Form1 : Form
{
    string connectionString = "server=localhost;database=usicoal;uid=admin;password=";

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        GetNames();
    }

    private bool DoesUserHavePermission()
    {
        try
        {
            SqlClientPermission clientPermission = new SqlClientPermission(PermissionState.Unrestricted);
            clientPermission.Demand();
            return true;
        }
        catch
        {
            return false;
        }
    }

    void dep_OnChange(object sender, SqlNotificationEventArgs e)
    {
        if (this.InvokeRequired)
        {
            this.BeginInvoke(new MethodInvoker(GetNames));
        }
        else
        {
            GetNames();
        }
        SqlDependency dep = sender as SqlDependency;
        dep.OnChange -= new OnChangeEventHandler(dep_OnChange);
    }

    private void GetNames()
    {
        if (!DoesUserHavePermission())
            return;

        SqlDependency.Stop(connectionString);
        SqlDependency.Start(connectionString);

        using (SqlConnection cn = new SqlConnection(connectionString))
        {
            using (SqlCommand cmd = cn.CreateCommand())
            {
                cmd.CommandType = CommandType.Text;
                cmd.CommandText = "SELECT ID FROM dbo.[BTE_SIMPLE_STORE_MESSAGE]";
                cmd.Notification = null;

                SqlDependency dep = new SqlDependency(cmd);
                dep.OnChange += new OnChangeEventHandler(dep_OnChange);

                cn.Open();

                using (SqlDataReader dr = cmd.ExecuteReader())
                {
                    while (dr.Read())
                    {
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:58:09.443

[SqlDependency](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)通常按您的预期工作。如果您的数据库中发生了更改，它会触发事件。如果您的查询有问题，则会发生持续调用。使用完整的两部分表名（例如 dbo.TableName）很重要。

MSDN 文档并没有那么糟糕 - 请查看这篇更新的[文章](http://msdn.microsoft.com/en-us/library/62xk7953.aspx)或这个[版本](http://msdn.microsoft.com/en-us/library/t9x04ed2.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:37:15.473

当我：

*   右键单击数据库选择属性
*   选择选项
*   将兼容级别设置为 SQL Server 2008(100)
*   好的

砰的代码工作正常。

# wpf - 如何在 WPF 应用程序中检测触摸按住手势？

> ID：14337648
> 
> 赞同：1
> 
> 时间：2013-01-15T12:22:39.630
> 
> 标签：wpf, touch, gesture

可以使用 MouseRightButtonDown 事件检测触摸按住手势。不幸的是，直到我从屏幕上松开手指，它才会触发。这太晚了！

有人有想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-07T06:31:28.320

有可能以一种等待的方式做到这一点。创建具有特定间隔的计时器。当用户点击时启动它，并在计时器结束时返回该方法。如果用户松开手，则返回带有 false 标志的方法。

```
public static Task<bool> TouchHold(this FrameworkElement element, TimeSpan duration)
{
    DispatcherTimer timer = new DispatcherTimer();
    TaskCompletionSource<bool> task = new TaskCompletionSource<bool>();
    timer.Interval = duration;

    MouseButtonEventHandler touchUpHandler = delegate
    {
        timer.Stop();
        if (task.Task.Status == TaskStatus.Running)
        {
            task.SetResult(false);
        }
    };

    element.PreviewMouseUp += touchUpHandler;

    timer.Tick += delegate
    {
        element.PreviewMouseUp -= touchUpHandler;
        timer.Stop();
        task.SetResult(true);
    };

    timer.Start();
    return task.Task;
} 
```

欲了解更多信息，请阅读这篇[文章](http://wpfplayground.com/2014/08/07/touch-and-hold-gesture-awaitable/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-24T22:23:39.553

很棒的一段代码。为了完整性，我只添加了一个示例用法：

```
private async void btn_PreviewMouseDown(object sender, MouseButtonEventArgs e)
{
  if (await TouchHold(btn, TimeSpan.FromSeconds(2)))
  {
    // todo: long press code goes here
  }
} 
```

并来自 XAML：

```
<Button Name="btn" PreviewMouseDown="btn_PreviewMouseDown">Press long</Button> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T21:24:03.327

使用[Blake.NUI 工具包提供的 Hold 手势](http://blakenui.codeplex.com/wikipage?title=Gestures&referringTitle=Home)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-22T14:16:12.673

无论是按钮、标签还是图像，我们都可以使用`MouseDown`and`MouseUp`来启动延迟和停止延迟。

对于`MouseDown`,

```
 // Declaration of timer and timercount
     int timerCount = 0;
     DispatcherTimer dt = new DispatcherTimer();

     public myConstructor()
            {
                dt.Interval = new TimeSpan(0, 0, 1);
            }

    // Mouse Down Event
     private void EnterHoldState(object sender, TouchEventArgs e)
            {
                timerStarted();
            }

    //Mouse Up event
        private void ExitHoldState(object sender, RoutedEventArgs e)
                {
                    timerStopped();
                }

// Stops the timer and resets the timer count to 0
        private void timerStopped()
        {
            dt.Stop();
            timerCount = 0;
        }

// Starts the timer and sets delayCounter function for counting the delay seconds and acts on it
        private void timerStarted()
        {
            dt.Tick += delayCounter;
            dt.Start();

        }

//Once delay timer reaches 2 seconds, the button navigates to nextpage.
        private void delayCounter(object sender, EventArgs e)
        {
            timerCount++;
            if (timerCount == 2)
            {
                this.NavigationService.Navigate(new nextPage());
            }
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-28T13:34:27.853

我最近不得不实现一个`Button`我需要在按下五秒钟后触发的地方。

为此，我创建了一个附加行为。我有五秒钟的时间来恢复行为，因为我不需要这个可配置的但很容易用 a 完成，`Dependency Property`并且它被连接起来以`Command`某种`MVVM`方式与 a 一起使用，但它可以很容易地更改为 trigger `Click`。

```
 <Button Command="{Binding Path=ButtonCommand}">
        <i:Interaction.Behaviors>
            <behaviors:PressAndHoldBehavior />
        </i:Interaction.Behaviors>
    </Button>

public sealed class PressAndHoldBehavior : Behavior<Button>
{
    private DispatcherTimer dispatcherTimer;

    protected override void OnAttached()
    {
        dispatcherTimer = new DispatcherTimer {Interval = TimeSpan.FromSeconds(5)};
        dispatcherTimer.Tick += OnDispatcherTimerTick;
        AssociatedObject.PreviewMouseLeftButtonDown += AssociatedObjectPreviewMouseLeftButtonDown;
        AssociatedObject.PreviewMouseLeftButtonUp += AssociatedObjectPreviewMouseLeftButtonUp;
    }

    protected override void OnDetaching()
    {
        dispatcherTimer.Stop();
        dispatcherTimer.Tick -= OnDispatcherTimerTick;
        dispatcherTimer = null;
        AssociatedObject.PreviewMouseLeftButtonDown -= AssociatedObjectPreviewMouseLeftButtonDown;
        AssociatedObject.PreviewMouseLeftButtonUp -= AssociatedObjectPreviewMouseLeftButtonUp;
    }

    private void AssociatedObjectPreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        dispatcherTimer.Start();
        e.Handled = true;
    }

    private void AssociatedObjectPreviewMouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        dispatcherTimer.Stop();
        e.Handled = true;
    }

    private void OnDispatcherTimerTick(object sender, EventArgs e)
    {
        AssociatedObject.Command.Execute(null);
    }
} 
```

# java - 比较Android中的两个日期时间

> ID：14337649
> 
> 赞同：-3
> 
> 时间：2013-01-15T12:22:45.823
> 
> 标签：java, android, datetime

我想用一种方法比较 date1(2013/1/21 21:22:30) 和 date2(now)

我想获取日期 1 的剩余日期、小时、分钟和秒数

```
String mDate,mHour,mMinute,mSecond;

DateComparedateTime(String Date1)
{
 // compare  Date1 with now 
   mDate = Difference date with Date1 and Now;
   mHour = Difference hour with Date1 and Now;
   mMinute = Difference minute with Date1 and Now;
   mSecond = Difference second with Date1 and Now;
} 
```

如何创建此方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T12:26:30.440

```
Calendar currentDate = Calendar.getInstance();
      SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");

    String dateNow = sdf.format(currentDate.getTime());
      Date today =  new Date(dateNow);
      Date finalDay = null;
      finalDay = (Date) sdf.parse("MM/dd/yyyy");
    int numberOfDays=(int)((finalDay.getTime()-today.getTime())/(3600*24*1000)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T12:24:10.227

您可以使用[Date.compareTo()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Date.html#compareTo%28java.util.Date%29)方法。

```
DateComparedateTime(String date1)
{
    System.out.println(new SimpleDateFormat("yyyy/MM/dd HH:mm:ss").format(date1).compareTo(new Date()))
 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T12:39:13.707

这可能会帮助您...仔细遵循它..

```
Calendar c = Calendar.getInstance();
int seconds = c.get(Calendar.SECOND);
System.out.println("calender time in millies" + c.getTimeInMillis());
System.out.println("calender time in millies" + c.getTime());
long diffInSec = TimeUnit.MILLISECONDS.toSeconds(c.getTimeInMillis());
System.out.println("time in seconds :: " + diffInSec); 
```

# google-app-engine - 谷歌应用引擎的 PUT 请求的最大大小是多少？

> ID：14337658
> 
> 赞同：6
> 
> 时间：2013-01-15T12:23:05.637
> 
> 标签：google-app-engine

我用谷歌搜索，但没有找到答案。谷歌应用引擎的 PUT 请求的最大大小是多少？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T12:53:23.047

任何应用引擎请求的最大请求大小为 32 MB。您可以在文档的[请求配额部分看到这一点。](https://cloud.google.com/appengine/docs/quotas#Requests)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:53:01.957

看看这里。它解释了您的应用程序配额的限制

[https://developers.google.com/appengine/docs/python/datastore/overview#Quotas_and_Limits](https://developers.google.com/appengine/docs/python/datastore/overview#Quotas_and_Limits)

# c++ - 需要飞行模拟库

> ID：14337661
> 
> 赞同：-3
> 
> 时间：2013-01-15T12:23:17.257
> 
> 标签：c++, simulation

我想用操纵杆控制驾驶飞机。我想要的是一些开源的飞行模拟库，它将做数学/物理并产生一个位置值，即，给定一个初始的 lat-lon-alt-yaw-pitch-roll 它会产生相同的结果。然后这些将被传递到 3d 图像生成器，它将以相同的姿态值将飞机放置在该位置。

请注意，仅需要类似内核/内核的库 3d 渲染不需要由库处理。最好它应该是基于文本的 c++ 库。

欢迎任何建议/改进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T12:27:46.560

我不知道“基于文本”是什么意思……但也许[FlightGear](http://www.flightgear.org/)可以满足您的需求。它是开源的，可以定制。它建立在[OpenSceneGraph](http://www.openscenegraph.org/)渲染机制之上，包含物理等，并用 C++ 编写。两者都是开源项目，您可以根据需要修改代码。

如果封闭源代码不是 KO 标准（您要求开源）[RTDynamics](http://www.rtdynamics.com/v2/wp/2010/atc/)有一些库可能会很有趣。

# android - HttpsURLConnection：SSL 恢复不起作用

> ID：14337667
> 
> 赞同：14
> 
> 时间：2013-01-15T12:23:42.653
> 
> 标签：android, ssl, https

`HttpsURLConnection`我正在尝试使用我自己的信任管理器设置 SSL（使用 SSL 恢复） 。

我只能执行 ssl 握手和连接。**没有 SSL 恢复**- 以前的会话永远不会重用！

我到处搜索，但没有运气。所有答案都参考 HttpClient （这不是一个选项）。

我的设置如下：

*   我创建了一个 SSL 上下文以供以后使用。

*   然后，我使用这个 SSL 上下文创建一个 SSL 工厂，我还存储它以供所有连接使用。

*   我开始一个一切顺利的连接：我收到一个`sessionID`，完成了完整的握手并将连接发送到服务器。

*   一分钟后，我开始另一个连接。出于某种奇怪的原因，这个连接没有发送`sessionID`我之前的。我打印`SSLContext`'s session - 最后一个 session 仍然存在并且有效。由于某种原因，这个新连接不使用它，因此创建了另一个会话并将其添加到会话的缓存中。

我在 2 个不同的设备上同时尝试了 android 版本 2.3 和 4.1。

在许多谷歌搜索结果之后，我什至尝试添加一些用户建议的 Keep-Alive，以及其他导致没有不同结果的巫术。

有人遇到过这个吗？有什么我想念的吗？

什么可能导致我的连接不使用最后一个会话？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T15:13:02.617

您想要做的是使用[`reflection`](http://docs.oracle.com/javase/tutorial/reflect/index.html)覆盖类[`android.net.SSLCertificateSocketFactory`](http://developer.android.com/reference/android/net/SSLCertificateSocketFactory.html)中的成员，成员是：

1.  `HOSTNAME_VERIFIER`
2.  `mTrustManagers`
3.  `mKeyManagers`

通过获取课程来做到这一点：

```
Class<?> sslClass = Class.forName("android.net.SSLCertificateSocketFactory");
Field classField = sslClass.getDeclaredField("defaultTrustManager");
classField.setAccessible(true);
classField.set(null /*If Feild is static*/, youObjectHere /*Needs casting*/);
classField.set(objectInstance /*If Feild is not static*/, youObjectHere /*Needs casting*/); 
```

进而：

用你自己的变量覆盖这些。这将允许 Android API 14 及更高版本的 SSL 恢复（我在 14 上测试过）。

## 谨防

您需要维护此代码并跟上 Google 可能进行的任何更改。

希望它有所帮助！祝你好运！

# windows-8 - 弹出显示时如何防止弹出获得焦点

> ID：14337668
> 
> 赞同：1
> 
> 时间：2013-01-15T12:23:51.047
> 
> 标签：windows-8, popup, microsoft-metro, focus

如果设置 popup 的 IsLightDismissEnabled = true ，当 popup 显示时，popup 将获得焦点，其他控件将失去焦点。我的问题：我怎样才能保持焦点；当弹出显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:27:23.040

在我看来，这是违反直觉的。 `IsLightDismissEnabled`实际上意味着“显示此弹出窗口，但一旦失去焦点就隐藏它”。如果你没有给你的弹出焦点，或者以编程方式将焦点设置到另一个控件，它会显示直到你继续与你的表单交互，或者根本不显示（不确定是哪个，我没有检查过）

# iphone - 在后台应用程序时重新启动没有用户界面的iOS应用程序？

> ID：14337671
> 
> 赞同：2
> 
> 时间：2013-01-15T12:23:54.977
> 
> 标签：iphone, ios, objective-c

在后台应用程序时如何在没有用户界面的情况下重新启动 iOS 应用程序？

我知道通知，但在任何通知中，用户必须单击警报视图按钮才能重新启动或打开应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T12:25:50.153

没有办法做到这一点。用户必须参与这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T14:41:40.650

正如其他人所说，你不能。虽然你可以做背景的东西，但这在各种方面受到限制：

> 对于 iOS 应用程序，了解您的应用程序是在前台运行还是在后台运行至关重要。由于 iOS 设备上的系统资源受到更多限制，因此应用程序在后台的行为必须与在前台的行为不同。操作系统还限制了您的应用程序可以在后台执行的操作，以延长电池寿命并改善用户对前台应用程序的体验。每当应用程序在前台和后台之间移动时，操作系统都会通知您的应用程序。这些通知是您修改应用行为的机会。

-- [http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T12:25:13.337

所以你想以编程方式启动你的应用程序，而不需要用户交互？由于iOS的限制，我认为没有办法做到这一点，对不起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-06T19:41:33.920

在普通情况下，在库存设备上是不可能的。这取决于您所说的“用户交互”是什么意思。我有一个应用程序（类似服务器）的案例，用户可以用设备做任何事情但不能触摸屏，因为设备被放在特殊的盒子里。我找到了一种使用 Siri 的方法。我启用了“嘿，Siri”选项，用户可以使用语音命令重新/启动应用程序。

# jquery - 如何退出jquery代码的执行？

> ID：14337672
> 
> 赞同：0
> 
> 时间：2013-01-15T12:23:57.960
> 
> 标签：jquery

如果statemnets堆叠在一个函数中，我有多个（10）个，并且需要这样的东西：

```
$len=$("#user").val().length;
   if($len == 0) { do something and then - stop, exit, break ... whatever) 
```

所以，如果`$len`是`0`- 做某事并且 - 不要再检查任何东西。只需退出执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:24:47.380

您可以使用 return 语句，但它将在函数结束时进行执行控制并跳过其间的所有语句。或使用 if-else 块或使用 switch。

```
if($len == 0) {

   do something and then - stop, exit, break ... whatever
   return;
) 
```

*使用 if-else*

```
if($len == 0) {

   do something and then - stop, exit, break ... whatever
   return;
)
else
if($len == 1) {

   do something and then - stop, exit, break ... whatever
   return;
)
//repeate if else 
```

使用开关

```
switch($len)
{
 case 0:
  //execute code block 1
  break;
case 1:
  //execute code block 1
  break;
case 2:
  //execute code block 2
  break;
default:
  code to be executed if n is different from case 1 and 2
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:29:15.753

就用这个...

```
$len=$("#user").val().length;
if($len == 0) { return false; } 
```

我将返回`false`以确保调用该函数的事件不再运行。

# jquery - 2 个 jQuery 插件竞争相同的#id

> ID：14337676
> 
> 赞同：0
> 
> 时间：2013-01-15T12:24:04.573
> 
> 标签：jquery, twitter-bootstrap, carousel

我有平滑滚动的*jQuery*代码，它与我的引导轮播 jQuery 代码一起完成，用于目标#id。

这是平滑滚动代码：

```
$('[href^=#]').click(function (e) {
  e.preventDefault();
  var div = $(this).attr('href');
  $("html, body").animate({
    scrollTop: $(div).position().top
  }, "slow");
}); 
```

不幸的是，这段代码在id上与我的引导轮播*jQuery*代码竞争。`#myCarousel`因此，每当我单击轮播左/右按钮时，平滑滚动 jQuery 将生效并平滑滚动我的网页，这是我不想要的。

这是轮播部分的*html ：*

```
<div id="myCarousel">

  <a href="#myCarousel" data-slide="prev">
    <img src="img/left.png"></a>
  <a href="#myCarousel" data-slide="next">
    <img src="img/right.png"></a> 
```

如何将平滑滚动的效果与轮播隔离开来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:27:34.533

可以使用`not()`

```
$('[href^=#]').not('#myCarousel a').click.... 
```

# java - Freemarker 模板：“Sort_by”一个或另一个

> ID：14337681
> 
> 赞同：1
> 
> 时间：2013-01-15T12:24:12.637
> 
> 标签：java, templates, freemarker

我有一个 Freemarker 模板，其中涉及“LocalTime”和“ServerTime”两次。如果我可以从数据中确定用户的 LocalTime，我需要使用“LocalTime”和 sort_by 它，否则我需要 sort_by ServerTime。整个数据存在于列表中（来自记录）

原来使用 ServerTime 是可以的，功能是这样的：

```
<#list x.data.record?sort_by("ServerTime") as s> 
```

但是如果我想检查是否有 "LocalTime" ，该怎么做呢？

我期待有什么东西在排队。。

```
<#list x.data.record?sort_by("ServerTime||LocalTime") as s> 
```

（请注意，这与对两列进行排序不同）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T19:44:27.333

`?sort_by`不能这样做。这将需要自定义比较器功能，但 `?sort_by(myComparatorFunction)`不支持 ATM。

如果你不能将已经排序的列表添加到数据模型中，或者你只想触摸表示层，你仍然可以`TemplateMethodModelEx`在Java中编写一个返回排序列表，并将其拉入模板中`'<#assign sortByTime = com.example.SortByTimeMethod'?new()>`，然后你可以写`<#list sortByTime(x.data.record) as s>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-06T04:36:44.850

我仍然是freemarker的新手，但我相信我刚刚为自己解决了这个问题。它丑陋，但它有效。大多数时候我不会处理数千甚至数百行，因此效率不是这种情况下的大问题。NetSuite 是注入 Freemarker 的系统，它有点痛苦。

本质上，我遍历列表一次并将一个值或另一个值（服务器/本地时间）存储到单个变量中（`invoiceDate`在我的情况下）。然后，我将该变量与我需要的其他显示变量一起放入哈希中。然后该哈希是列表中的一行。

显示：我遍历列表，该列表按我的`invoiceDate`变量和每一行（散列）排序，我从该键/值对中打印出我需要的信息。

我知道这是 4 年前的事了，但今晚我需要一个答案，直到我这样想才找到答案……希望这对下一个人有帮助！

```
<#assign y=[]>  
  <#list record.lines as tmpLine>

    <#assign invoiceDate = tmpLine.datecol>
    <#if (tmpLine.someIdentifyingMarker != "")>
        <#assign invoiceDate = tmpLine.custbody_p_ending_date>
    </#if>

    <#assign dataLine = {"displayDate":invoiceDate, "Description":tmpLine.description, "CheckNum":tmpLine.custbody_checknumprint, "InvoiceAmount":tmpLine.charge,"Credit":tmpLine.payment,"Remaining":tmpLine.amountremaining,"Balance":tmpLine.balance}>
    <#assign y = y+[dataLine]>

    </#list>

<#list y?sort_by('displayDate') as line><tr>

    <td colspan="4">${line.displayDate}</td>
    <td colspan="10">${line.Description}</td>
    <td colspan="4"><span style="background-color: rgb(255, 255, 255);">${line.CheckNum}</span></td>
    <td align="right" colspan="5">${line.InvoiceAmount}</td>
    <td align="right" colspan="4">${line.Credit}</td>
    <td align="right" colspan="4"><span style="text-align: -webkit-right; background-color: rgb(255, 255, 255);">${line.Remaining}</span></td>
    <td align="right" colspan="5">${line.Balance}</td>
    </tr>
    </#list></table> 
```

# java - 对字母数字字符串进行排序java

> ID：14337682
> 
> 赞同：4
> 
> 时间：2013-01-15T12:24:15.120
> 
> 标签：java, sorting

我有这个数组存储用户添加的一些 URL 的后缀：

```
[U2, U3, U1, U5, U8, U4, U7, U6] 
```

当我这样做时：

```
for (Map<String, String> map : getUrlAttachments()) {
            String tmpId = map.get("id"); //it receives the U2, in the 1st iteration, then U3, then U1,...
            if (tmpId.charAt(0) == 'U') {
                tmpId.charAt(1);//2, then 3, then 1,...
                String url = map.get("url");
                String description = map.get("description");
                URLAttachment attachment;
                String cleanup = map.get("cleanup");
                if (cleanup == null && url != null && description != null) {
                    attachment = new URLAttachmentImpl();
                    attachment.setOwnerClass(FileUploadOwnerClass.Event.toString());
                    attachment.setUrl(url);
                    attachment.setDescription(description);
                    attachment.setOwnerId(auctionHeaderID);
                    attachment.setUrlAttachmentType(URLAttachmentTypeEnum.EVENT_ATTACHMENT);
                    attachment.setDateAdded(new Date());
                    urlBPO.save(attachment);

            } 
```

**我的问题：**

我想`For`通过传递另一个映射排序数据的列表来更改此条件`[U1, U2, U3, U4, U5, U6, U7, U8]`。

我希望您能帮助我知道我能做到这一点的最佳方法是什么。

我考虑过创建一个列出 id 的数组，然后排序，但我不知道如何在 java 中准确地对字母数字字符串进行排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:28:44.323

只需`Collections.sort()`在创建如下`ArrayList`值后使用方法：

```
ArrayList<String> a = new ArrayList<String>();
a.add("U2");
a.add("U1");
a.add("U5");
a.add("U4");
a.add("U3");
System.out.println("Before : "+a);
Collections.sort(a);
System.out.println("After : "+a); 
```

输出 ：

```
Before : [U2, U1, U5, U4, U3]
After : [U1, U2, U3, U4, U5] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T15:32:50.010

我决定使用@Abu 给出的想法，但我对其进行了调整：

1.  我检查用户尝试添加的 url 的 ID，
2.  我删除了这个 id 中的字母后缀，然后我创建了一个`ArrayList`来存储每个 id 的数字部分。
3.  我`ArrayList`像@Abu 在他的回答中教我的那样对它进行排序，然后我验证这个排序`ArrayList`中的每个 id 按应该添加的顺序排序..

    ```
    ArrayList <Integer> urlSorted = new ArrayList<Integer>();
    //sort the url ids
    for (Map<String, String> map : getUrlAttachments()) {
        String tmpId = map.get("id");
        if (tmpId.charAt(0) == 'U') {
            //gets the id, removing the prefix 'U'
            urlSorted.add( Integer.valueOf(tmpId.substring(1)));
        }
    }
    //sort the urlIds to check the sequence they must be added
    Collections.sort(urlSorted);
    //checks for each url id, compares if it's on the natural order of sorting to be added.
    for(Integer urlId: urlSorted) {
        for (Map<String, String> map : getUrlAttachments()) {
            String sortedId = "U"+urlId;
            String tmpId = map.get("id");
            //compare the ids to add the 1, then 2, then 3...
            if (map.get("id").equals(sortedId)) {
                        //code to save according to the sorted ids.
            }
         }
    } 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-17T23:45:35.433

我认为您的要求与此类似：

[http://www.davekoelle.com/alphanum.html](http://www.davekoelle.com/alphanum.html)

您可以将字符串分解为纯字符串和数字字符串。例如： abc123 将被拆分为“abc”和“123” 您可以将字母字符串与普通比较进行比较，然后对“123”这样的字符串进行排序，您有两个选择：1：将其转换为整数，然后比较 2 ：如果数字不在整数范围内，您可以逐个字母进行比较。

例如“123”与“133”比较“1”和“1”=相等比较“2”和“3”=更大所以“123”<“133”。

选项 2 更准确且防错更少。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T12:29:22.423

创建自定义`Comparator<Map<String,String>>`：

```
public class IdComparator implements Comparator<Map<String,String>> {
  public int compare(Map<String,String> left, Map<String,String> right) {
    return orderKey(left).compareTo(orderKey(right));
  }
  static Integer orderKey(Map<String,String> m) { 
    return Integer.parseInt(m.get("id").substring(1)); 
  }
} 
```

然后`Arrays.sort(urlAttachments, new IdComparator());`在迭代它之前使用。根据详细信息，您可以将此排序逻辑推送到`getUrlAttachments()`并保持您发布的代码与现在完全相同。

# sql - IS DATEDIFF 函数允许查询

> ID：14337684
> 
> 赞同：0
> 
> 时间：2013-01-15T12:24:16.410
> 
> 标签：sql, function, datediff

我想使用`DATEDIFF`SQL 中的函数编写查询。

当我尝试

```
SELECT AVG(DATEDIFF(hh,raise_date,(select min(added_note) from t_case_note) ))
FROM mytable 
```

我收到错误消息

> 无法对包含聚合或子查询的表达式执行聚合函数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:57:14.257

在评论中澄清后，这应该可以满足您的需要。

```
WITH CTE
     AS (SELECT min(added_note) AS min_added_note
         FROM   t_case_note)
SELECT AVG(DATEDIFF(hh, raise_date, CTE.min_added_note))
FROM   your_table
       CROSS JOIN CTE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:26:01.637

您可以准确地做到这一点，请参阅[SQL Fiddle](http://sqlfiddle.com/#!6/21b14/1/0)：

```
select  datediff(s,getdate(),(select min(dt) from t1)) 
```

# php - PHP - 许多变量或一个数组？

> ID：14337685
> 
> 赞同：21
> 
> 时间：2013-01-15T12:24:19.003
> 
> 标签：php, arrays, variables

我有一个问题，什么更快...

1.  我制作了许多包含我所有数据的变量，*或者*
2.  我在一个变量中创建一个数组，其中包含我的所有数据并访问它

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-15T12:35:33.757

只是尝试:)

## 测试 1

有 5 个变量

```
$myvar1 = 'hello';
$myvar2 = 'hello';
$myvar3 = 'hello';
$myvar4 = 'hello';
$myvar4 = 'hello';

print_r(memory_get_usage()); 
```

结果：618600

## 测试 2

带有 5 个数组键

```
$myvar = array();
$myvar['var1'] = 'hello';
$myvar['var2'] = 'hello';
$myvar['var3'] = 'hello';
$myvar['var4'] = 'hello';
$myvar['var5'] = 'hello';

print_r(memory_get_usage()); 
```

结果：620256

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-15T12:44:50.490

简短：**访问变量更快。**

[但是由于代码质量](https://stackoverflow.com/a/14338033/956397)更好，您仍然可以使用数组。为了获得更好的性能，请使用缓存。无论如何，您应该*只*在性能问题发生时处理它们！

### 阵列测试

```
$n = 1000000;
$startTime = microtime(true);  
for ($i = 0; $i <= $n; $i++)
{
    $x = $a[1];
}
$endTime = microtime(true);  
$elapsed = $endTime - $startTime;
echo "Array: $elapsed seconds"; 
```

### 变量测试

```
$startTime = microtime(true);  

for ($i = 0; $i <= $n; $i++)
{
    $x = $v;
}
$endTime = microtime(true);  
$elapsed = $endTime - $startTime;
echo "Variable : $elapsed seconds"; 
```

### 结果

阵列：0.092 秒

变量：0.064 秒

使用带有字符串作为索引的数组的节点也会慢得多（哈希图）。比较[zend_hash_find](http://lxr.php.net/xref/PHP_5_3/Zend/zend_hash.c#zend_hash_find)与[zend_hash_index_find](http://lxr.php.net/xref/PHP_5_3/Zend/zend_hash.c#zend_hash_index_find)。

如果我使用`$a = array_fill( 0, 1000, 1 );`和`$x = $a2[999];`

### 记忆

不问但有趣的是内存使用情况。所以我创建了一个包含 10000 个元素和 10000 个变量的数组。

```
$a = array();
for ($i = 0; $i <= 10000; $i++)
{
    // one array
    eval('$a[] = "test";'); // 3454128
    // Variables
    //eval('$a' . $i. ' = "test";'); // 3552360
}
print_r(memory_get_usage()); 
```

数组：3454128

变量：3552360

所以数组确实使用稍微少一点的内存。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-15T12:44:31.410

这里的人说数组更快。但数组也是变量。如果您使用数组 - 您仍然需要像访问任何变量一样访问它，此外您还需要访问数组中的项目。因此，在我看来，将数组用作变量存储并不是最好的主意。

此外 - 数组用于存储一些数组数据。例如，类别 id => 类别名称对。

```
$catId1 = "Category 1";
$catId2 = "Category 2";
$catId3 = "Category 3"; 
```

像上面这样的代码会......很奇怪。您正在失去数组的许多功能，例如，不能`for`循环遍历所有类别。因此，对于数组数据 - 数组就是您所需要的。

一旦您拥有不同类型的数据（谈论该数据的含义，而不是整数或字符串之类的类型），您应该更好地使用变量：

```
$requested_category = 1;
$requested_category_name = "Some category";
$category_processing_result = "Ok"; 
```

而不是数组：

```
$varsArray['requested_category'] = 1;
$varsArray['requested_category_name'] = "Some category";
$varsArray['category_processing_result'] = "Ok"; 
```

使用变量，任何 IDE 都可以帮助您编写这些名称，这样的代码更易于阅读和支持。这对我来说更重要。

即使它们以某种方式变慢，或者占用更多内存 - 就速度/内存使用而言，这肯定不是最糟糕的问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-04T02:19:40.287

许多变量比数组快，主要是因为数组是有序映射（[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)），因此根据数组中每个值的定义，a数组中的值的引用键也被分配。这会消耗额外的内存，并且在谈到数组中的数十万条记录时会产生重大影响。性能随着记录数量的增加而降低。这种开销可以通过使用标量变量而不是数组来避免。

最近，我正在开发一个分析器，以使用刻度回调来测量内存和执行时间。起初，我使用一个数组来记录事件并跟踪每个滴答间隔的所有测量值。将这些值放在单独的标量变量而不是数组中后，我发现性能显着提高（分别在 10 - 20% 之间，有 100000 - 1000000 条记录）。

但是，当一个数组只有几条记录时，与标量变量的区别是没有的，性能应该不是问题。在这种情况下，数组可能更适合这种情况并更有效，提高可读性、维护等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-15T12:27:15.627

将所有数据存储在一个数组中可能会更快，具体取决于您处理数据的方式。我建议将彼此密切相关的每组数据分组到一个数组中。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T12:25:15.917

将所有相关数据放在一个数组中，数组更快。

# c++ - 解释代码片段“int i:2;”中 C++ 中“:”运算符的使用

> ID：14337687
> 
> 赞同：3
> 
> 时间：2013-01-15T12:24:23.067
> 
> 标签：c++, operators, puzzle, bit-fields, twos-complement

> **可能重复：**
> [这个 C++ 代码是什么意思？](https://stackoverflow.com/questions/1604968/what-does-this-c-code-mean)

在以下 C++ 代码中

```
# include <stdio.h>
int main()
{
  struct clap
  {
   int i:2;
   int j:2;
   int k:3;
   }x={1,2,3};

  printf("%d %d %d",x.i,x.j,x.k);

  return 0;
} 
```

在运行以下代码时，我得到输出 1 -2 3

请参考上述代码解释“：”运算符的含义，以及出现这种奇怪输出的原因；

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T12:25:39.070

这些表示**位字段**，其长度在冒号后表示

```
 struct clap
  {
   int i:2; // length 2
   int j:2; // length 2
   int k:3; // length 3
   }; 
```

位域节省空间。尝试计算`sizeof(clap)`，你会发现它在 gcc 4.7 上是 4 个字节。它不是 1 字节（2 + 2 + 3 = 7 位 < 1 字节）的原因是编译器还会根据位域的底层类型在某些边界上对齐结构。例如，更改`int`为`short`或`char`作为位域的基础类型将分别将总大小减少`clap`到 2 和 1 个字节（再次在 gcc 4.7 上）。

这应该与存储 3 个完整整数通常需要 12 个字节（如果 int 是 4 个字节）相比。OTOH，位域会使您的代码变慢，因为寻址成员需要移动和解包位域。

出现符号问题是因为 2 的 2 位[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)等于 -2。将代码扩展到`int j:3`将输出`2`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T12:25:29.860

结构中的冒号表示成员是*位域*。也就是说，每个字段只使用指定的位数。

你得到`-2`的字段`j`可能是因为`printf`Treats 是一个符号扩展整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T12:26:13.633

这就是所谓的[位域](http://en.wikipedia.org/wiki/Bit_field)。

更新：

`x.j`打印为`-2`:的原因`x.j`是 2，但它只有 2 位，高位为 1，格式将作为符号`printf`位`%d`。要验证这一点，只需更改`%d`并`%u`查看会发生什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T12:49:54.997

就像其他答案一样，它是位域。关于它们的一个重要说明：

> 因此，C++0x 将连续位域序列中的所有（非零长度）位域视为单个内存位置的一部分；对一个人的分配与对其他任何人的分配冲突。这种连续的位域不应由不同的线程同时更新。通常这意味着它们应该受到单个锁的保护。

[http://www.hpl.hp.com/personal/Hans_Boehm/c++mm/threadsintro.html#bitfields](http://www.hpl.hp.com/personal/Hans_Boehm/c++mm/threadsintro.html#bitfields)

# regex - 解析文本文件 perl

> ID：14337690
> 
> 赞同：0
> 
> 时间：2013-01-15T12:24:42.750
> 
> 标签：regex, perl, parsing

作为管道一部分的程序正在解析输出文本文件，但会引发错误。这是代码

```
1 open(PRED, '<', $predfile);
2 my $pred_text;
3 { local $/; $pred_text = <PRED>; }
4 close PRED;

5 my @pred_blocks = split(/^\-+$/, $pred_text);

6  foreach my $pred_block (@pred_blocks) {
7     $pred_block =~ /^>(.+)$/m or die("Internal error while parsing $predfile");
   .....
} 
```

第 3 行之后应该包含什么 $pred_text？我想整个文本文件。我还想我应该从文本文件中获取不同的块，但是第 5 行的列表只包含一个代表整个文件的块。第 5 行的正则表达式在做什么？它是如何分割文本的？在第 7 行 $pred_block =~ /^>(.+)$/m 到底是什么意思？

有什么建议吗？

非常感谢

尼诺

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T12:55:15.077

*   第 3 行：读取整个文件，请参阅[Perl Idioms Explained](http://www.perlmonks.org/?node_id=287647)
*   第 5 行：*不*将文本拆分为块。将其更改为`my @pred_blocks = split(/^-+$/m, $pred_text);`，请参阅[修饰符](http://perldoc.perl.org/perlre.html#Modifiers)
*   第 7 行：检查当前块是否包含以 . 开头的行`>`。如果没有，它将中止脚本

# java - java对功能模块的访问控制

> ID：14337694
> 
> 赞同：3
> 
> 时间：2013-01-15T12:24:48.270
> 
> 标签：java, security

通常要求为登录用户分配角色，并且使用该角色可以执行某些任务或访问某些模块。

Java中有没有成熟的访问控制框架可以使用？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:37:38.480

您应该尝试[Spring Security](http://static.springsource.org/spring-security/site/)框架。它成熟了。

# php - 我真的需要规范化我的数据库吗？

> ID：14337700
> 
> 赞同：5
> 
> 时间：2013-01-15T12:25:07.417
> 
> 标签：php, mysql

好的，我最近问了一个问题，用户回答是我应该规范化我的数据库，但我认为我不应该真的这样做..

逻辑是这样的

我将脚本存储在数据库中，这些脚本根据用户动态执行。

例如，有一个脚本表

```
script_id | script_name
+----------------------+
12345       demo1
54462       demo2
90874       demo3
43058       demo4 
```

现在是用户表

```
allowed_script_ids
+-----------------+
21345|90874 
```

所以这在这里很简单，但是如果我删除 say 会发生什么`script_id` `90874`，但它不会从用户表中删除记录，所以他们建议我规范化数据库，但是如果用户可以访问 1000 个脚本怎么办？我需要1000条记录吗？还是我应该继续我的方式？即使我为每个访问插入每个记录条目，我也需要在每次撤销该用户的访问时删除这些条目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T12:29:24.637

1000 行并不多（同样，10,000,000 行也不算多），规范化您的数据库（即，将用户与脚本相关联）非常适合这一点。如果您要连接一个字符串，除非您正在使用`TEXT`（无论如何这都是 baaaaad！），否则您可能会遇到某种形式的字段长度限制，然后才能添加太多脚本 ID。

所以是的，我还建议你在这个程度上标准化：

`Script`

```
script_id
name 
```

`User`

```
user_id
... 
```

`User_Script`

```
user_script_id
user_id
script_id 
```

![可视化](../Images/43dc4a9e5c865651e94d77e1e95bbb9a.png)

..然后每个关系都会进入`User_Script`。

这比连接字符串要干净得多，并且在删除时从字符串中查找/替换。它将更快、更清晰，并帮助您以更精简的方式实际查看数据库。

目前，您将如何从数据库中获取所有脚本名称？使用上述稍微标准化的设计，您可以运行类似于以下的查询：

```
SELECT `user`.`first_name`, `script.name` FROM `User_Script`
INNER JOIN `Script` USING (`script_id`)
INNER JOIN `User` USING (`user_id`) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T12:30:13.257

我会将这些数据标准化，是的。将用户与脚本联系起来的第三个表是您应该做的。

如果用户可以访问 1000 个脚本，那肯定意味着这个新的第三个表中有 1000 个条目，但这没关系。您会发现数据更易于管理，如果像您说的那样删除了一个脚本，那么在第三个表中删除它的条目也很简单，而不必在分隔字段中使用尴尬的子字符串例程用户表。

不用担心这会在新表中产生多少行，MySQL 完全有能力轻松处理表中的数百万行，如果您创建了不错的索引，它将允许您非常快速地连接这 3 个表，可能比您现在必须执行的执行子字符串匹配更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:33:48.000

您可以使用状态位来指示使用的访问权限。通过这种方式，您可以获得使用唯一脚本 id 索引快速访问的优势，并且对于更新所有它需要重置您的布尔位

例如

```
 user access
    script_id user_id isGranted
    ----------------------------
    21345     some_user_id yes 
```

而且，如果您必须根据用户的偏好不断地授予或获取对脚本的访问权限，那么您最初使用字符串并筛选用户可以访问的脚本的想法可能效率低下

考虑这个

```
 12|34|45|56| 
```

如果您必须重复授予或撤销对脚本 56 的访问权限怎么办？. . .您无法为这种不必要且效率低下的重复操作检索和处理字符串。在这种情况下，设置一个布尔位有助于并节省大量的处理麻烦

# java - Java中初始化的奇怪行为

> ID：14337703
> 
> 赞同：2
> 
> 时间：2013-01-15T12:25:14.870
> 
> 标签：java, android

```
/**
 * Example Activity to demonstrate the lifecycle callback methods.
 */
public class ActivityA extends Activity {

    private String mActivityName;
    private TextView mStatusView;
    private TextView mStatusAllView;
    private StatusTracker mStatusTracker = StatusTracker.getInstance();
    private AlertDialog alertBox;
    private static int number = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_a);

        init();

        String output = getString(R.string.on_create) + number++;
        showAlertDialog(alertBox, output);
        mStatusTracker.setStatus(mActivityName, output);
        Utils.printStatus(mStatusView, mStatusAllView);
    }

    @Override
    protected void onStart() {
        super.onStart();
        mStatusTracker.setStatus(mActivityName, getString(R.string.on_start));
        Utils.printStatus(mStatusView, mStatusAllView);
    }

    @Override
    protected void onRestart() {
        super.onRestart();
        mStatusTracker.setStatus(mActivityName, getString(R.string.on_restart));
        Utils.printStatus(mStatusView, mStatusAllView);
    }

    @Override
    protected void onResume() {
        super.onResume();
        mStatusTracker.setStatus(mActivityName, getString(R.string.on_resume));
        Utils.printStatus(mStatusView, mStatusAllView);
    }

    @Override
    protected void onPause() {
        super.onPause();
        mStatusTracker.setStatus(mActivityName, getString(R.string.on_pause));
        Utils.printStatus(mStatusView, mStatusAllView);
    }

    @Override
    protected void onStop() {
        super.onStop();
        mStatusTracker.setStatus(mActivityName, getString(R.string.on_stop));
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        mStatusTracker.setStatus(mActivityName, getString(R.string.on_destroy));
        mStatusTracker.clear();
    }

    public void startDialog(View v) {
        Intent intent = new Intent(ActivityA.this, DialogActivity.class);
        startActivity(intent);
    }

    public void startActivityB(View v) {
        Intent intent = new Intent(ActivityA.this, ActivityB.class);
        startActivity(intent);
    }

    public void startActivityC(View v) {
        Intent intent = new Intent(ActivityA.this, ActivityC.class);
        startActivity(intent);
    }

    public void finishActivityA(View v) {
        ActivityA.this.finish();
    }

    private void showAlertDialog(AlertDialog ad, String msg) {
        ad.setTitle("Logging Msg");
        ad.setMessage(msg);
        ad.show();
    }

    private void init() {
        System.out.println("Value = before &&&&&&&&& " + alertBox);
        if (alertBox == null) { // Why always null?
            alertBox = new AlertDialog.Builder(this).create();
            mActivityName = getString(R.string.activity_a);
            mStatusView = (TextView) findViewById(R.id.status_view_a);
            mStatusAllView = (TextView) findViewById(R.id.status_view_all_a);
            Log.e("ActivityA", "Init done **************************************");
            Log.e("ActivityA", "Init done **************************************");
            System.out.println("Value = after &&&&&&&&&&& " + alertBox);
        }
    }
} 
```

只有第一次调用 init 时，我设置了 alertBox 并且我认为 if 块不应该在任何其他时间执行。但我错了，每次调用 init 时它都会运行。为什么？

我来自 Javascript，如果我将上面的代码翻译成 JS（类似），if 块只评估一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:29:00.987

`alertBox`是类的成员变量，即类的每个实例都有自己的副本。因此，如果您有多个实例，`ActivityA`每个实例都有自己的`alertBox`全部设置为`null`最初。

如果要共享`alertBox`，则需要将其声明为`static`：

```
private static AlertDialog alertBox; 
```

虽然，这可能会在多线程应用程序中导致（额外的）问题，所以请小心使用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:57:29.640

您应该检查您的应用程序如何遵循 android 活动生命周期。每次再次创建 Activity 时都会调用 onCreate 方法（即使它之前存在）。检查您的`onDestroy()`方法是否被调用。如果答案是肯定的，那么您现在知道 android 是如何处理它的 Activity 的了。有关详细说明，请参阅[http://developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)。

但是，如果答案是否定的，则您的活动处理有问题。也许您每次用户按下按钮时都重新创建相同的活动等。也许您`finish()`在某处进行活动。但这只是疯狂的猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:28:58.050

`alertBox`被声明为实例变量。

如果您只想为类而不是为每个对象实例设置一次，也许您应该创建`alertBox`一个变量。`static`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T12:44:44.783

活动可能被销毁并重新创建，因此新对象的 alertBox 为 null。

您不应该**将**其更改为静态变量，因为 alertBox 包含对创建它的活动的引用（我不确定它是否甚至可以在活动的其他实例中正常工作），所以如果您将其保存在静态变量，它将阻止原始活动被 GC（垃圾收集器）收集。

在活动的每个实例中创建一个新的活动是正确的方式（你现在这样做的方式很好）。

# ruby-on-rails - 将页面添加到 Spree

> ID：14337706
> 
> 赞同：1
> 
> 时间：2013-01-15T12:25:20.950
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, e-commerce, spree

我正在开发一个使用 Spree 的应用程序，我想在 spree 框架内向我的应用程序添加基本上静态的页面。例如，我希望有一个页面使用我已经为 Spree 设计的布局（包括搜索、用户信息等内容），并在 spree 中列出两个不同类别的产品以及指向它们的链接。我尝试了 spree-static-content 扩展，但当前版本似乎与 1.3.1 版本的 spree 有很多错误，因为据我了解它是“静态”的，所以我无法将 ruby​​ 标签等添加到正文内容。

我不确定如何使用 deface 来做到这一点，据我所知，添加页面并将路由添加到不同的控制器意味着我无法使用从 Spree 控制器检索信息的当前布局。我还尝试在 spree 控制器中简单地为页面添加一个新定义，但这也不起作用，这意味着我必须使用控制器文件的静态版本，这会在 Spree 更新时导致问题。

有谁知道如何在现有的 Spree 商店中添加新的页面浏览量？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-24T07:54:47.400

有一个 spreecommerce 扩展[spree_static_content](http://spreecommerce-extensions.com/extensions/spree-static-content)用于管理来自管理员的静态页面。

此扩展程序可让您：

*   添加和管理静态页面，例如“关于”页面。
*   显示静态页面而不是现有的动态页面，例如主页、产品页面和分类页面。

使用管理选项卡中的“页面”选项，您可以将静态页面添加到您的 Spree 安装中。页面内容可以直接从数据库中提取，可以是单独的布局文件或呈现为部分内容。

在管理选项卡中，使用“新页面”选项创建一个新的静态页面。

title、slug、body 和 meta 字段将在加载时替换它们各自的页面元素。title、slug 和 body 元素都是必填字段。

没有指定布局/部分的正文文本将在从数据库中提取后加载到 spree_application 布局中。

**布局和部分渲染**

要在没有 spree_application 布局的情况下呈现整个页面，请指定布局文件的相对路径（例如 spree/layouts/layout_file_name）。该文件不会带有下划线前缀，因为它是一个布局，而不是一个部分。

要渲染部分，请在布局文件名中指定路径并选中“将布局渲染为部分”选项。布局区域中指定的路径不会有下划线，但在文件名中是必需的。

还要注意 render_snippet 助手的可用性，它通过它的 slug 找到一个页面并在你的视图中的任何地方呈现原始页面正文。

**选项**

使用“显示在”复选框来指定是否在页眉、页脚或边栏中显示页面链接。位置设置改变了它们出现的顺序。

最后，使用“可见”复选框切换可见性。如果未选中，则该页面将不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:25:14.523

使用 Deface 覆盖很容易满足您的要求。只需查看默认布局模板`spree_application.html.erb`并执行 Deface 的替换、插入_，无论是使用就地代码替换/插入，还是在需要时生成特定视图和模型并编写代码来呈现它们。通过这种方式，您可以完全自定义布局，同时保留并使用默认的 Spree 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-01T23:33:01.290

一种选择是将 Spree Engine 安装在根目录以外的位置。

```
Rails.application.routes.draw do

  mount Spree::Core::Engine, at: '/shop'

end 
```

然后，您可以根据需要设置根路由，并使用标准 rails 方式添加其他页面或使用 high_voltage gem 之类的东西。

# asp.net - 为什么我们在从一页移动到另一页时写假

> ID：14337707
> 
> 赞同：-1
> 
> 时间：2013-01-15T12:25:25.823
> 
> 标签：asp.net, sql-server, visual-studio-2010

从一页移动到另一页的代码是 Response.Redirect("AddElementTitle.aspx", false); 我的问题是，为什么我们写 false 就好像我们不写 false 而不是页面移动到其他页面。请告诉我为什么我们写假。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:28:45.483

谷歌搜索`Response.Redirect`很快就会把你带到这里[HttpResponse.Redirect 方法](http://msdn.microsoft.com/en-us/library/a8wa7sdt%28v=vs.110%29.aspx)，其中`endResponse`参数描述为：

> 指示当前页面的执行是否应该终止

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:00:14.007

`HttpResponse.Redirect`有两个重载。[HttpResponse.Redirect Method (String, Boolean)](http://msdn.microsoft.com/en-us/library/a8wa7sdt%28VS.80%29.aspx)接受一个布尔参数是否应该中止当前页面的执行。

如果您通过`true`此函数将调用`Response.End`并且当前线程将被中止。

你应该记住，如果这个值是`false`重定向代码之后的所有代码将执行。

我假设常见的方法是使用[HttpResponse.Redirect Method (String)](http://msdn.microsoft.com/en-us/library/t9dwyts4%28VS.80%29.aspx)方法，该方法等效于使用一个值调用[HttpResponse.Redirect Method (String, Boolean)](http://msdn.microsoft.com/en-us/library/a8wa7sdt%28VS.80%29.aspx)`true`来结束响应并中止当前页面的执行。

# jquery-tools - Jquery Tools可滚动自动滚动不暂停

> ID：14337713
> 
> 赞同：1
> 
> 时间：2013-01-15T12:25:46.973
> 
> 标签：jquery-tools

我在使用 jquery 工具可滚动插件时遇到问题：http: [//jquerytools.org/documentation/scrollable/index.html](http://jquerytools.org/documentation/scrollable/index.html)

还使用可滚动的自动滚动插件：http: [//jquerytools.org/documentation/scrollable/autoscroll.html](http://jquerytools.org/documentation/scrollable/autoscroll.html)

单击链接时，我试图暂停幻灯片，这是我的 html 标记：

```
<a id="pauseSlideshow" href="javascript:;">Pause Slideshow</a> 
```

这是我的javascript：

```
<script type="text/javascript">

    var scrollableApi;

    $(document).ready(function () {

        // Initialize the slideshow 
        scrollableApi = $('#slideshow')
            .scrollable({ items: '.scrollable > .items', circular: true, mousewheel: false, speed: 1000 })
            .navigator({ navi: "#slideshow > .scrollable-nav", naviItem: "a", activeClass: "current" })
            .autoscroll({ interval: 3000, autopause: true, api: true });

        // Pause the slideshow when the link is clicked
        $("#pauseSlideshow").click(function () {  
            alert("should pause slideshow");
            scrollableApi.pause();
            alert("no error");
         });

    });
</script> 
```

我看到我的两个警报都显示了，但幻灯片仍在自动滚动。Chrome 检查器中没有控制台错误。

任何想法都会很棒，我发现 jQuery 工具文档缺少关于如何使用这些 API 方法的示例。所以也许我使用不正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:54:38.800

似乎自动滚动构造函数没有正确链接，因此没有返回您正在创建的可滚动的实例。

尝试稍微更改代码以在初始化后获取对 API 的引用：

```
var scrollableApi;

$(document).ready(function () {

    // Initialize the slideshow 
    $('#slideshow')
        .scrollable({ items: '.scrollable > .items', circular: true, mousewheel: false, speed: 1000 })
        .navigator({ navi: "#slideshow > .scrollable-nav", naviItem: "a", activeClass: "current" })
        .autoscroll({ interval: 1000, autopause: true, api: true });

    // get a reference to the API
    scrollableApi = $('#slideshow').data('scrollable');

    // Pause the slideshow when the link is clicked
    $("#pauseSlideshow").click(function () {
        scrollableApi.pause();
    });

}); 
```

# java - 需要在 Oracle ADF 中查看准确的查询执行情况

> ID：14337722
> 
> 赞同：3
> 
> 时间：2013-01-15T12:26:11.120
> 
> 标签：java, sql, oracle, oracle-adf

我在 Oracle Jdeveloper 11g 中使用 Oracle ADF。在应用程序中，我有一个搜索屏幕，它将根据给定的搜索值浏览记录。

搜索屏幕使用视图对象。我的要求是检查所有动态创建后正在数据库上执行的最终查询。我需要更改所有参数才能获得相同的参数。

我的应用程序日志也处于最佳级别。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:09:25.063

几周前我用过这个。奇迹般有效。 [http://huysmansitt.blogspot.be/2012/09/adf-bc-logging.html](http://huysmansitt.blogspot.be/2012/09/adf-bc-logging.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:39:08.043

> log4jdbc 是一个 Java JDBC 驱动程序，它可以使用 Simple Logging Facade For Java (SLF4J) 日志记录系统为其他 JDBC 驱动程序记录 SQL 和/或 JDBC 调用（以及可选的 SQL 计时信息）。

请参阅：[https ://code.google.com/p/log4jdbc/](https://code.google.com/p/log4jdbc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:40:29.023

尝试运行`WLS`in`debugger mode`并将日志记录级别设置`finest`为

`Right Click on Integrated Weblogic Server --> Configure Diagnostic Logging --> Set Root Logger level to finest`.

它应该工作。

# pdo - 在 Fedora 17 上为 cassandra 安装 thrift 和 pdo 模块

> ID：14337729
> 
> 赞同：0
> 
> 时间：2013-01-15T12:26:35.790
> 
> 标签：pdo, installation, cassandra, fedora, thrift

我有下一个问题。我将 Fedora 17 作为主机运行，将 CentOS 6.3 作为访客运行。我已经`apache-cassandra11-1.1.7-1.noarch`在 CentOS 机器上成功安装了 Cassandra。现在我需要在 Fedora 17 上使用 Thrift 安装 PDO 模块，这样我就可以通过我的 PHP 应用程序访问 CentOS 机器上的 Cassandra。

这是我第一次使用 Cassandra 进行“实验”，我在[这里](http://code.google.com/a/apache-extras.org/p/cassandra-pdo/ "这里")找到了关于 Google Code 的 PDO 文档。我已经安装了所有的 repos，比如 boost-devel、php-devel、pcre-devel。问题是当我在[这里](http://rpm.datastax.com/community/x86_64/)访问 DataStax 时，只有 Python 2.6 版本的节俭，并且我安装了 Python 2.7。我什至放入了成功的 yum --skip-broken ，我可以在这里看到节俭：

*   /usr/src/debug/thrift-0.7.0
*   /usr/lib/debug/usr/lib64/python2.6/site-packages/thrift

`/usr/bin/*`这与 PDO 文档网站 ( )上所写的不太一样

现在的问题是：是否甚至需要安装 python-2.6，如果这意味着我必须自己重建节俭，那么 PDO 是什么，我是否也必须重建它？

如果有人已经这样做了，请提供一些您如何解决此问题的步骤。

先感谢您。

**编辑1：**

为了安装thrift，我使用了这个：

```
tar -xzvf thrift-0.7.0.tar.gz
sudo mv thrift-0.7.0 /opt/thrift-0.7.0
chown brian /opt/thrift-0.7.0
cd /opt/thrift-0.7.0/
./configure
make
sudo make install 
```

运行 thrift 命令输出选项列表，说明安装成功。

为了安装 pdo-cassandra，我使用了这个

```
cd /opt
sudo git clone https://code.google.com/a/apache-extras.org/p/cassandra-pdo/
sudo chown -R brian cassandra-pdo
cd cassandra-pdo/
phpize
./configure
make
make test 
```

运行 make test 后，我​​得到下一个错误：

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/opt/cassandra-pdo/modules/pdo_cassandra.so' - /opt/cassandra-pdo/modules/pdo_cassandra.so: undefined symbol: php_pdo_unregister_driver in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/opt/cassandra-pdo/modules/pdo_cassandra.so' - /opt/cassandra-pdo/modules/pdo_cassandra.so: undefined symbol: php_pdo_unregister_driver in Unknown on line 0

=====================================================================
PHP         : /usr/bin/php 
Warning: PHP Startup: Unable to load dynamic library '/opt/cassandra-pdo/modules/pdo_cassandra.so' - /opt/cassandra-pdo/modules/pdo_cassandra.so: undefined symbol: php_pdo_unregister_driver in Unknown on line 0

PHP_SAPI    : cli
PHP_VERSION : 5.4.10
ZEND_VERSION: 2.4.0
PHP_OS      : Linux - Linux <user_name> 3.6.11-1.fc17.x86_64 #1 SMP Mon Dec 17 22:16:35 UTC 2012 x86_64
INI actual  : /opt/cassandra-pdo/tmp-php.ini
More .INIs  :  
CWD         : /opt/cassandra-pdo
Extra dirs  : 
VALGRIND    : Not used
.... 
```

加载模块可能有什么问题的任何想法，是的，该文件夹中存在模块（`/opt/cassandra-pdo/modules/pdo_cassandra.so`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-29T21:10:11.353

（由 OP 在问题编辑中回答。转换为社区 wiki 答案。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 行。我已经让它在我的 Fedora 17 主机上运行。你需要做下一件事。您必须将`pdo_cassandra.so`模块复制到目录。您可以通过 . 检查该目录的位置`phpinfo()`。您还需要在`pdo_cassandra.ini`文件所在的目录中创建文件`pdo.ini`。问题是`pdo.so`扩展必须在`pdo_cassandra.so`. 创建ini文件并将我的扩展名复制到正确的文件夹后，我就可以使用它了。
> 
> 此外，如果您在 CentOS 上运行 cassandra 时遇到问题（在我的情况下，它是 VMWare 中的 CentOS 6.3）并且您会收到下一个错误：

```
Error opening zip file or JAR manifest missing : /lib/jamm-0.2.5.jar 
```

> 您需要`/etc/cassandra/default.conf/cassandra-env.sh`在此位置编辑文件：

```
...
# enable assertions.  disabling this in production will give a modest
# performance benefit (around 5%).
JVM_OPTS="$JVM_OPTS -ea"

# add the jamm javaagent
if [ "$JVM_VENDOR" != "OpenJDK" -o "$JVM_VERSION" \> "1.6.0" ] \
      || [ "$JVM_VERSION" = "1.6.0" -a "$JVM_PATCH_VERSION" -ge 23 ]
then
    CASSANDRA_HOME="/usr/share/cassandra"
    JVM_OPTS="$JVM_OPTS -javaagent:$CASSANDRA_HOME/lib/jamm-0.2.5.jar"
fi

# enable thread priorities, primarily so we can give periodic tasks
# a lower priority to avoid interfering with client workload
JVM_OPTS="$JVM_OPTS -XX:+UseThreadPriorities"
... 
```

> 您需要将路径添加到您的 cassandra 实例`CASSANDRA_HOME="/usr/share/cassandra"`，或者您可以将其添加为 export `CASSANDRA_HOME=/usr/share/cassandra`。
> 
> 希望这可以帮助遇到同样问题的人。

# c++ - 在 QtCreator 中进行设计

> ID：14337738
> 
> 赞同：0
> 
> 时间：2013-01-15T12:26:54.190
> 
> 标签：c++, qt, qt-creator, qt-designer

我正在开发一个具有主窗体（ui）的应用程序，其中包含许多组、选项卡、按钮、标签等。

在编辑/设计小部件时，我必须减小所有其他小部件（组、选项卡、按钮、标签等）的大小。

我的问题是，当所有小部件都达到所需大小时，它会造成很多混乱，并且无法编辑/设计所需的小部件。

所以我的问题是如何在编辑/设计特定小部件时自动隐藏所有其他小部件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:41:18.820

您可以将每个自定义小部件放在单个 UI 文件中，并让父小部件包含它。只需添加一个常规小部件，右键单击它并选择*推广到*...。然后输入类名和头文件的路径。

# git - Git 注释说明

> ID：14337743
> 
> 赞同：2
> 
> 时间：2013-01-15T12:27:04.583
> 
> 标签：git, unix, github, aix

我在 Aix 6.1 服务器上设置了 GIT，在提交到存储库并执行 git log 命令后，我在显示的消息中得到了一些垃圾，如图所示。

```
^[[33mcommit b2b7060558d6b7579f4f2a628f3d542d88784171^[[m
Author: user1 <user1@cc.com>
Date:   Tue Jan 15 07:14:14 2013 -0500

    Initial Commit 
```

在提交词之前，这里显示了一些垃圾**^[[33m**并且在末尾**^[[m**

为什么显示此垃圾以及如何删除它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T12:29:07.290

我猜 git 正在尝试着色，但您的终端不是很支持。

您看到的序列是典型的[ANSI 选择图形再现](http://en.wikipedia.org/wiki/ANSI_escape_code#graphics)序列，试图将文本颜色更改为黄色（黄色）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T13:39:36.780

您的终端无法正确呈现 git 的输出颜色。您可以在 git 中关闭彩色输出：

```
git config --global color.ui false 
```

# iphone - UITableView 上的冲突手势识别器

> ID：14337753
> 
> 赞同：3
> 
> 时间：2013-01-15T12:27:38.567
> 
> 标签：iphone, ios, objective-c, uitableview

我有两个自定义控件`UIView`，一个是现在流行的滑动菜单（当您`NavBar`在视图上滑动手指时向右滑动），另一个在`UITableViewCell`- 它是`TableViewCell`来自名为**DMSlidingTableViewCell**的控件的自定义（如**Twitter**应用程序 - 当您滑动左侧的单元格时，它会显示一些按钮等）

它们工作得很好，但是当我尝试将手势识别器添加到整个 UITableView 从而使整个视图成为一个区域时`UIGestureRecognizer`（所以当我移动它时，我可以将视图向右移动）手势识别器会发生某种冲突。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T12:44:58.227

我不清楚您认为两个滑动手势识别器在这种情况下可以协同工作的方式，但我认为您可以尝试看看

```
– gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer: 
```

[委托方法](http://developer.apple.com/library/ios/documentation/uikit/reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIGestureRecognizerDelegate/gestureRecognizer%3ashouldRecognizeSimultaneouslyWithGestureRecognizer%3a)。

请记住，您有 2 个手势，所以 2 个委托（从概念上讲，它们由相同的方法实现），所以您可以做出一个手势（第一个参数）总是返回 NO，另一个 YES，看看您是否可以做出 2 个手势识别器以令人满意的方式协同工作。

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {

    if ([gestureRecognizer.view isKindOfClass:[UITableView class]]) {
       ...
    } else {
       ...
    }
} 
```

这只是一个应该适用于您的情况的示例（尽管请检查语法），但您也可以将 2 个识别器存储在您的类的属性中，这样您就知道哪个是哪个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-15T07:12:54.917

[当我在 UITableView 上使用 UIGestureRecognizer 时，我遇到了和 u 一样的问题。最后，我通过这个找到](https://stackoverflow.com/a/12851794)了 UIGestureRecognizer 中的“cancelsTouchesInView”属性，它很有帮助。

```
 UIGestureRecognizer* tapGesture = [[UIGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
  **tapGesture.cancelsTouchesInView = NO;**//pass touch event to others 
```

祝你好运！</p>

# android - 如何使用网格视图在 android 单词搜索游戏中选择单词？

> ID：14337754
> 
> 赞同：1
> 
> 时间：2013-01-15T12:27:39.983
> 
> 标签：android, android-gridview

我打算使用网格视图在 android 中开发一个单词搜索游戏。我不知道如何在网格视图中选择单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:34:42.087

这是一个在网格视图中过滤数据的简单过程：

**首先，打开main.xml文件**

**接下来，在xml文件中添加一个edittext控件和button控件**

为此添加以下代码

```
<EditText android:id="@+id/edtSearch"   
android:hint="Enter the item no" 
android:layout_width="200dip" 
android:layout_height="50dip"/> 

<Button android:id="@+id/SearchItem" 
android:text="Search Item" 
android:layout_width="180dip" 
android:layout_height="50dip" 
android:paddingLeft="10dip" /> 
```

**接下来，保存文件并创建一个类文件并在按钮事件中编写以下代码..**

```
Button search = (Button) findViewById(R.id.SearchItem); 
search.setOnClickListener(new OnClickListener() { 
public void onClick(View v) { 
   performsearchoperation(); 
   Log.v("search button"," clicked"); 
   }    
}); 
```

**接下来，编写如下代码执行搜索操作方法**

```
private void performsearchoperation() { 
// TODO Auto-generated method stub 
   Log.v("search button"," entered"); 
   EditText edittext=(EditText) findViewById(R.id.edtSearch); 
   ITEMID=edittext.getText().toString(); 
   int itemlength=ITEMID.length(); 
   Log.v("ILvalue ",String.valueOf(itemlength)); 
   Log.v("Ivalue ",String.valueOf(ITEMID.toString())); 
   if(itemlength==0) 
   { 
      Log.v("Item value ","zero"); 
      BindListView(); 
   } 
   else 
   { 
      Log.v("Item value ","Not zero"); 
      try{ 
         DBAdapter db = new DBAdapter(getBaseContext()); 
         db.open(); 
         Log.v("Entered","Item id"); 
         Cursor myCur = db.getItems_From_Search(ITEMID);    
         gridview.setAdapter(new MyAdapter(this,myCur)); 
         gridview.setVisibility(View.VISIBLE); 
         Log.v("parts count",String.valueOf(myCur.getCount())); 
         db.close(); 
      }catch (Exception e) { 
         Toast.makeText(getBaseContext(),e.toString(),Toast.LENGTH_LONG).show(); 
         Log.v("Error",e.toString()); 
      } 
   } 
Log.v("data ",String.valueOf(ITEMID.toString())); 

} 
```

# visual-studio-2010 - 如何一次又一次地创建和销毁rtsp服务器 Live 555

> ID：14337755
> 
> 赞同：1
> 
> 时间：2013-01-15T12:27:41.167
> 
> 标签：visual-studio-2010, stream, rtsp, live555

我想从文件中进行 RTSP 流式传输，所以我使用了 live 555 库。在 live 555 测试目录中“testMpeg2TransportStreamer”程序流式传输 TS 格式文件，我所做的是，我将整个代码放在线程中，所以每当客户端请求流式传输线程开始工作，当客户端说 DONT STREAM 然后线程在关闭线程时关闭我还编写了代码 Medium::close（rtsp 服务器的指针），所以要关闭 rtsp 服务器，这适用于第一个 STREAM 和 DONT STREAM 请求，但在 DONT STREAM 请求之后，当客户端对 STREAM 说时，我调试了代码，发现它无法创建 rtsp 服务器。然后我使用了另一种方法，在第一个 STREAM 请求时只创建一次 rtsp 服务器，而不是在我的整个程序退出之前关闭它，但这也失败了。

```
#define TRANSPORT_PACKET_SIZE 188
#define TRANSPORT_PACKETS_PER_NETWORK_PACKET 7

#define IMPLEMENT_RTSP_SERVER 
// To stream using "source-specific multicast" (SSM), uncomment the following:
//#define USE_SSM 1
#ifdef USE_SSM
Boolean const isSSM = True;
#else
Boolean const isSSM = False;
#endif

/********************Global variable***************************/
UsageEnvironment* env=NULL;
FramedSource* videoSource;
RTPSink* videoSink;
DeviceSourceFICard* fileSource;
FICardDeviceParameters fi_params;
HANDLE          g_hRtpComThread;
DWORD           g_dwRtpComThreadID;
char            g_ExitEventLoop;
void play(); // forward
RTSPServer* rtspServer=NULL;
ServerMediaSession* sms;
int initLm555Settings(void)
{
scheduler = BasicTaskScheduler::createNew();
  env = BasicUsageEnvironment::createNew(*scheduler);
 destinationAddressStr//make it global
#ifdef USE_SSM
    = "232.255.42.42";
#else
    = "239.255.42.42";
const unsigned short rtpPortNum = 18888;//make it global
  rtpPortNum1=rtpPortNum;
 const unsigned short rtcpPortNum = rtpPortNum+1;
  const unsigned char ttl = 7;
 struct in_addr destinationAddress;
  destinationAddress.s_addr = our_inet_addr(destinationAddressStr);
  const Port rtpPort(rtpPortNum);
  const Port rtcpPort(rtcpPortNum);

  Groupsock rtpGroupsock(*env, destinationAddress, rtpPort, ttl);
  rtpGroupsock.multicastSendOnly();

  Groupsock rtcpGroupsock(*env, destinationAddress, rtcpPort, ttl);
  rtcpGroupsock.multicastSendOnly();
#ifdef USE_SSM
  rtpGroupsock.multicastSendOnly();
  rtcpGroupsock.multicastSendOnly();
#endif
 g_ExitEventLoop = 0;
videoSink =
    SimpleRTPSink::createNew(*env, &rtpGroupsock, 33, 90000, "video", "MP2T",
                 1, True, False /*no 'M' bit*/);
setSendBufferTo(*env, rtpGroupsock.socketNum(), 1024 * 1024);
  setSendBufferTo(*env, rtpGroupsock.socketNum(), 1024 * 1024);

  // Create (and start) a 'RTCP instance' for this RTP sink:
  const unsigned estimatedSessionBandwidth = 5000; // in kbps; for RTCP b/w share
  const unsigned maxCNAMElen = 100;
  unsigned char CNAME[maxCNAMElen+1];
  gethostname((char*)CNAME, maxCNAMElen);
  CNAME[maxCNAMElen] = '\0'; // just in case

  RTCPInstance* rtcp =
    RTCPInstance::createNew(*env, &rtcpGroupsock,
                estimatedSessionBandwidth, CNAME,
                videoSink, NULL /* we're a server */, isSSM);
 UserAuthenticationDatabase* authDB = NULL; 
      portNumBits rtspServerPortNum = 554;
      unsigned reclamationTestSeconds=65U;
rtspServer = RTSPServer::createNew(*env,rtspServerPortNum, authDB, reclamationTestSeconds); 
    if (rtspServer == NULL)
    {
        *env << "Failed to create RTSP server: " <<env->getResultMsg()<<"\n";

        rtspServerPortNum = 8554;
        rtspServer = RTSPServer::createNew(*env,rtspServerPortNum);
        if (rtspServer == NULL)
        {
return 0;
        }
Boolean const inputStreamIsRawUDP = False; 
char const* descriptionString={"Session streamed by \"testOnDemandRT\""};
sms=ServerMediaSession::createNew(*env, streamName, streamName,descriptionString);
sms->addSubsession(MPEG2TransportUDPServerMediaSubsession::createNew(*env,destinationAddressStr,rtpPortNum1,inputStreamIsRawUDP));
    rtspServer->addServerMediaSession(sms);

    char* url = rtspServer->rtspURL(sms);
*env << "Play this stream using the URL \"" << url << "\"\n";
    delete[] url;
if (rtspServer->setUpTunnelingOverHTTP(sport) || rtspServer->setUpTunnelingOverHTTP(sport) || rtspServer->setUpTunnelingOverHTTP(sport))
        {
out<<"\n\n\n(We use port "<<rtspServer->httpServerPortNum()<<" for optional RTSP-over-HTTP tunneling.)\n";

        } 
        else
        {
             pDailyLogger->LogInfoString("(RTSP-over-HTTP tunneling is not available.)");
            cout<<"\n\n\n(RTSP-over-HTTP tunneling is not available.)";
        }
  play();
  env->taskScheduler().doEventLoop(&g_ExitEventLoop);
Medium::close(rtspServer);
 Medium::close(rtcp);
  Medium::close(videoSink);
 rtpGroupsock.removeAllDestinations();
  rtcpGroupsock.removeAllDestinations();

  env->reclaim();

  delete scheduler;

    pDailyLogger->LogDebugString("OUT::initLm555Settings Thread");

    return 0; // only to prevent compiler warning
}
void afterPlaying(void* /*clientData*/) {
  *env << "...done reading from file\n";

  videoSink->stopPlaying();
 Medium::close(videoSource);
  play();
}
void play() {
  // Open the input file as a 'byte-stream file source':

  fi_params.nFICardFrameSize = TRANSPORT_PACKETS_PER_NETWORK_PACKET * TRANSPORT_PACKET_SIZE;
  fi_params.pfnGetRTPPayload = GetRTPPayload;
  fi_params.socketNum = videoSink->groupsockBeingUsed().socketNum();

  DeviceParameters temp;

    fileSource = DeviceSourceFICard::createNew(*env, fi_params, temp);
  if (fileSource == NULL) {
    *env << "Unable to open Foresight card as a byte-stream file source\n";
    exit(1);
  }
  FramedSource* videoES = fileSource;
 videoSource = MPEG1or2VideoStreamDiscreteFramer::createNew(*env, videoES);
*env << "Beginning to read from file...\n";
  videoSink->startPlaying(*videoSource, afterPlaying, videoSink);
}
void StartRTPProcess(void)
{

    g_hRtpComThread = CreateThread((LPSECURITY_ATTRIBUTES) NULL, 0,
        (LPTHREAD_START_ROUTINE)initLm555Settings, 0, 0, &g_dwRtpComThreadID);

    if(g_hRtpComThread) SetThreadPriority(g_hRtpComThread, THREAD_PRIORITY_LOWEST/*THREAD_PRIORITY_NORMAL*/);

}
int StopRTProcess(void) 
{
  g_ExitEventLoop = 1;

     g_ExitEventLoop = 0;
  g_hRtpComThread = 0;
  g_dwRtpComThreadID = 0;
} 
```

当我收到 DONT STREAM 消息时，Sir StopRTProcess() 被调用，我错过了什么请告诉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:09:03.090

可能您的 RTSP 服务器套接字没有关闭。关闭媒体后删除媒体对象和 RTSPServer 对象。

# java - 属性表视图 eclipse rcp 检查输入

> ID：14337762
> 
> 赞同：0
> 
> 时间：2013-01-15T12:28:15.593
> 
> 标签：java, eclipse-rcp

在我的应用程序（基于 Eclipse RCP）中，我有一个名为的模型对象`A`：

```
A  
String name;   
String description; 
```

在我的应用程序中，我在视图中使用属性表。要使用属性表，A 对象有一个实现 IPropertySource 的适配器。在这个属性视图中，我可以看到我的对象及其名称和描述，我也可以修改它。我想限制修改。例如，我不希望名称中有变音字符。

Eclipse RCP 中的属性表是否可以检查输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:04:48.573

我自己没有玩过这个，但是看看[PropertyDescriptors](http://help.eclipse.org/indigo/nftopic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/views/properties/IPropertySource.html#getPropertyDescriptors%28%29)。

我认为您可以创建一个单元格编辑器来进行您想要的编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:56:38.213

一种可能性是您可以覆盖适配器的 setPropertyValue 方法（实现 IPropertySource 的类）并在那里检查给定值。如果您不喜欢该值/它具有错误的形式或值，请不要设置该值（或基本上拒绝该值）。

```
@Override
public void setPropertyValue(Object id, Object value) {
    if (id.equals(YOUR_SPECIFIED_ID)) {

        //
        // check if value is valid here
        // 

        if (IS_VALID) {
            deviceEntity.setName((String)value);
        }
    } 
} 
```

# c - 如何在 OSX 上的 C 程序中处理（可能的）UTF-8 字符串

> ID：14337764
> 
> 赞同：4
> 
> 时间：2013-01-15T12:28:31.717
> 
> 标签：c, macos, unicode, utf-8, character-encoding

希望问题标题能很好地描述我的问题。

平台：OSX 10.8，带有 clang++ 编译器的 llvm

我有一个文件名是日文或西里尔字符的目录。这些文件名`ls`在 iTerm2 中使用 en_EN.UTF-8 语言环境和 Monaco 10 字体正确显示（例如 via ）（不确定语言环境/字体是否有所不同，但似乎应该如此）。但是，不支持 UTF-8 的 vanilla xterm 会打印乱码或“？” 非 ASCII 字符的字符。

*这是实际的问题：*

在 C++ 程序中，我使用`readdir()`from`dirent.h`列出包含日文或西里尔字符文件名的目录的内容。打印结果的`d_name`属性会在 Xcode 终端中显示正确的字符。也就是说，例如，日本汉字真的是这样显示的。从 iTerm2 执行程序时也是如此。同样，非 UFT-8 xterm 中的字符乱码。`struct dirent``readdir()`

*   由于日文文件名的字节大小不等于显示的字符数，我大胆假设，这些`dirent.h`函数适用于 UTF-8 字符串。是否有可能所有的 OSX C-Library 都以这种方式工作？

*   因此，例如更改`struct dirent.d_name`or `strcpy`it 并使用更改后的字符串创建新文件是否安全？是否有可能踏入一些导致“？？？？？？”的陷阱 文件名被写而不是汉字？

*   设置不同的语言环境，例如“C”，会搞砸（使用时似乎不是这样`setlocale(LC_ALL,"C")`）。

注意：我对 dirent.h 可能的第 3 方替代方案不感兴趣。我编写这个程序只是为了阐明 OSX 如何处理语言环境和字符编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:39:56.590

从遗留字符串处理代码的角度来看，UTF-8 旨在向后兼容 ASCII。这包括`strcpy()`和朋友。

所以是的，在您的代码中，处理这些字符串通常是安全的，就像处理任何其他字符串^*一样；只有在展示时间才会发生聪明的事情。

^(* 只要您不干预字符串中的单个字符。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:41:58.933

有效的 UTF8 字符串不包含任何空字符，因此任何字符串操作都应该适用于 UTF8 编码的字符串。您可能不想获取它的子字符串或修改其中的字节，因为某些字符被编码为多个字节。

大多数处理的 API`char*`不知道也不关心编码，因此它们应该可以安全使用。

setlocale 会影响[某些操作](http://www.cplusplus.com/reference/clocale/)，主要与处理字符类型、排序和格式有关。

当您打印字符串时，它会以一串字节的形式输出。终端模拟器将其解释为 UTF8 并选择正确的字符。xterm 不知道 unicode，当然不能正确解释它并显示正确的字符。

# opencv - 来自 OpenCV VideoCapture 的剪切图像，分辨率已更改

> ID：14337767
> 
> 赞同：2
> 
> 时间：2013-01-15T12:28:44.230
> 
> 标签：opencv, resolution, video-capture

当从网络摄像头更改我的输入图像的分辨率时，它会以一种奇怪的方式被剪切和替换。我有两台罗技 pro 9000，一台叫 quickcam，另一台没有。更改分辨率时，Quickcam 可以完美运行。另一个没有：

原始值没有改变： ![正常图像](../Images/843911b4e5f46db989b92f5e603aab98.png)

改变分辨率： ![](../Images/5f7b0b7a154091cbbae0805a3da97835.png)

这是更改的代码：

```
cv::Size imageSize(1200,800);
cv::VideoCapture cap1(0);
cap1.set(CV_CAP_PROP_FRAME_WIDTH,imageSize.width);
cap1.set(CV_CAP_PROP_FRAME_HEIGHT,imageSize.height); 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:37:55.503

我可以自己弄清楚。真是个老司机。使用最新的驱动程序，罗技网络摄像头找到了两个摄像头，并且都可以更改分辨率。为什么Skype可以降低分辨率而opencv不能->我想不通。并且看起来第一帧是正确的，也许在加载第二个相机之前？！，它变成了这个剪切的图像。感谢rotating_image 提供帮助。

# c++ - NS [网络模拟器] TCL 和 C++

> ID：14337771
> 
> 赞同：1
> 
> 时间：2013-01-15T12:28:49.607
> 
> 标签：c++, tcl, ns2

我已经用 C++ 编写了一个协议，并想使用 NS 来模拟并查看结果。

我了解到 TCL 是用于它的语言。我还发现C++可以和TCL联系起来。

[链接](http://mailman.isi.edu/pipermail/ns-users/2006-February/054169.html)中的一种方法需要使用新的 cc 文件重新编译整个 ns 包，并对一些 ns 源文件进行一些更改。

是必需的吗？会不会需要相当长的时间？[超过 5 分钟 :( ]

有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T08:05:56.517

> 我了解到 TCL 是用于它的语言。我还发现C++可以和TCL联系起来。

使用 Tcl 和 C++。Tcl 用于编写模拟脚本，即为我们设置特定模拟场景的文件，C++ 用于编写将要实现的协议。

> 链接中的一种方法需要使用新的 cc 文件重新编译整个 ns 包，并对一些 ns 源文件进行一些更改。
> 
> 是必需的吗？会不会需要相当长的时间？[超过 5 分钟 :( ]

如果您使用现有协议，您只能避免重新编译整个包，在这种情况下，您需要编写一个 Tcl 脚本来运行您的模拟。既然你想实现一个新的协议，你肯定需要重新编译整个包。

为此，您必须安装 Linux（如果您还没有的话）或者像[cygwin](http://www.cygwin.com/)这样的 Linux 模拟器。

然后你应该下载并安装源代码。我推荐[ns2 allinone](http://www.isi.edu/nsnam/ns/ns-build.html#allinone)软件包。

ns2 安装成功后，您可以开始将协议移植到 ns2。一个很好的 ns2 入门教程就是[这个](http://www.isi.edu/nsnam/ns/tutorial/)。第 VII 节涵盖了为 ns2 创建新协议。

所以回答你的问题

*   是的，您需要从源代码重新编译
*   是的，它肯定需要超过 5 分钟（可能需要几个小时，取决于您的经验）。

# javascript - 在 IE 8 中查看站点时无法加载本地 JQuery 文件

> ID：14337782
> 
> 赞同：0
> 
> 时间：2013-01-15T12:29:21.480
> 
> 标签：javascript, jquery, asp.net, jquery-ui, jquery-plugins

我正在尝试使用 datetimepicker 控件（http://timjames.me/jquery-ui-datetimepicker-plugin），但似乎我的本地 js 文件无法加载 - 但仅在 IE（版本 8.0.6）中有效在 Firefox 18.0 版中很好。

我使用以占位符“MainContent”命名的母版页，因此我的所有子页面控件都需要由 MainContent_ 引用，后跟控件的 ID。

母版页中的元素包含以下脚本，包括：

```
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.16/jquery-ui.min.js"></script>
<link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.16/themes/hot-sneaks/jquery-ui.css" />
<script type="text/javascript" src="Scripts/jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        alert("hello");
        $('#MainContent_calStart').datetimepicker();
    });
</script>

script language="javascript" type="text/javascript">
    function GetItem(strName) {
        return document.all ? document.all[strName] : document.getElementById(strName);
    }

... etc etc etc 
```

我的 asp.net 子页面包含代码：

基本上，托管 datetimepicker 的页面不是站点中加载的第一页，但由于包含脚本的母版页包含（并且无法全部加载），站点的第一页加载时出现 js 错误。

使用 IE 时，我无法将任何本地 JQuery 文件加载/包含到我的网站，因为我收到 Javascript 错误：

网页错误详情

用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 5.1；Trident/4.0；.NET CLR 2.0.50727；InfoPath.1；.NET CLR 3.0.4506.2152；.NET CLR 3.5.30729；.NET CLR 1.1。 4322；.NET4.0C；.NET4.0E) 时间戳：2013 年 1 月 15 日星期二 13:31:47 UTC

消息：语法错误行：3 字符：1 代码：0 URI：（本地主机上的页面路径）

该站点在 $('#MainContent_calStart').datetimepicker(); 出现错误“Microsoft JScript 运行时错误：对象不支持此属性或方法”，表明浏览器无法从包含文件中找到 datetimepicker 小部件的源/声明。如果我在出现 js 错误的情况下继续加载站点，则 datetimepicker 小部件会加载并且似乎功能齐全。

奇怪的是，如果我获取代码并在 VS2010 中创建一个示例网站项目，并包含上述文件/代码，则示例网站可以正常工作。示例和我的实时站点之间的唯一区别是实时站点中有额外的 pages/css/js 文件。这两个站点的结构在脚本位置/css 位置等方面是相同的。示例站点在 IE 和 FF 中都可以正常工作。

最后一件事，如果我将 jquery-ui-timepicker-addon.js 中的所有代码移动到母版页本身并排除 js 文件，则该站点可以正常工作。这表明在本地文件中未加载 js 代码这一事实。

任何帮助表示赞赏。干杯。

吉米

PS。我不能包含任何本地 js 文件，而不仅仅是有问题的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:46:11.520

在你的母版页代码中试试这个

私人无效 AddScript(string src) { HtmlGenericControl genCtrl = new HtmlGenericControl(); genCtrl.TagName = "脚本"; genCtrl.Attributes.Add("type", "text/javascript"); genCtrl.Attributes.Add("语言", "javascript"); genCtrl.Attributes.Add("src", src); Page.Header.Controls.Add(genCtrl); }

```
protected void Page_Load(object sender, EventArgs e)
{ 
    // one minute prior to timeout (milliseconds)
    //timeout = (Session.Timeout * 60000) - 60000;
    Session.Timeout = 90000;

    AddScript(Page.ResolveUrl("~/Scripts/jquery-1.6.1.js"));
    AddScript(Page.ResolveUrl("~/Scripts/jquery-ui.min.js"));
    //AddScript(Page.ResolveUrl("~/Scripts/jquery-1.4.3.min.js"));
    //AddScript(Page.ResolveUrl("~/Scripts/jquery.tablesorter.min.js")); 
} 
```

您将需要一个标头 runnat = server.

问题可能是您的 asp.net 网页不在母版页所在的根目录中，因此脚本的路径不正确。

如果您正在开发互联网站点，请使用 CDN 文件，因为它可以节省带宽 + 大量 CDN 文件由 CDN 网络预加载/缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:46:46.153

当我使用使用 indexOf 的插件（也在 jQuery 插件本身中）时，我在 IE8 中遇到了同样的错误（对象不支持此属性或方法）（http://www.w3schools.com/jsref/jsref_indexof.asp ）。IE8 不知何故不支持此功能。我将此函数更改为 jQuery (http://api.jquery.com/jQuery.inArray/) 的 in.Array 函数，而且很愚蠢：这也使用了 indexOf。

为了解决这个问题，我将这个函数替换为一个搜索数组/字符串/...的 for 循环，这只是解决了我在 IE8 上的问题。

我希望它有帮助！

# c# - IO 异常未处理

> ID：14337786
> 
> 赞同：-3
> 
> 时间：2013-01-15T12:29:30.270
> 
> 标签：c#, asp.net

```
if(!File.Exists(_logFilePath))
            {
                File.WriteAllText(_logFilePath, "<?xml version='1.0' encoding='utf-8' standalone='yes'?>\r\n <AppXmlLogWritter></AppXmlLogWritter>");
            }   

 using (FileStream fileStream = new FileStream(_logFilePath, FileMode.OpenOrCreate, 
           FileAccess.ReadWrite, FileShare.ReadWrite))
    {
        string currentDateTime = DateTime.Now.ToString("yyyyMMddHHmmss");

        XmlDocument xmlDoc = new XmlDocument();

        xmlDoc.Load(_logFilePath);
        XmlElement newelement = xmlDoc.CreateElement("LogData");
        XmlElement xmlLogID = xmlDoc.CreateElement("LogID");
        XmlElement xmlLogDateTime = xmlDoc.CreateElement("LogDateTime");
        XmlElement xmlLogType = xmlDoc.CreateElement("LogType");
        XmlElement xmlLogFlag = xmlDoc.CreateElement("LogFlag");
        XmlElement xmlLogApplication = xmlDoc.CreateElement("LogApplication");
        XmlElement xmlLogModule = xmlDoc.CreateElement("LogModule");
        XmlElement xmlLogLocation = xmlDoc.CreateElement("LogLocation");
        XmlElement xmlLogText = xmlDoc.CreateElement("LogText");
        XmlElement xmlLogStackTrace = xmlDoc.CreateElement("LogStackTrace");

        xmlLogID.InnerText = _logIDPrefix + currentDateTime + randomNumber;
        xmlLogDateTime.InnerText = currentDateTime;
        xmlLogType.InnerText = ((LogTypes)Convert.ToInt32(logType)).ToString();
        xmlLogFlag.InnerText = logFlag;
        xmlLogApplication.InnerText = _logApplication;
        xmlLogModule.InnerText = logModule;
        xmlLogLocation.InnerText = logLocation;
        xmlLogText.InnerText = logText;
        xmlLogStackTrace.InnerText = logStackTrace;

        newelement.AppendChild(xmlLogID);
        newelement.AppendChild(xmlLogDateTime);
        newelement.AppendChild(xmlLogType);
        newelement.AppendChild(xmlLogFlag);
        newelement.AppendChild(xmlLogApplication);
        newelement.AppendChild(xmlLogModule);
        newelement.AppendChild(xmlLogLocation);
        newelement.AppendChild(xmlLogText);

        xmlDoc.DocumentElement.AppendChild(newelement);
        xmlDoc.Save(_logFilePath);
    } 
```

如何在线克服以下错误`xmlDoc.Load(_logFilePath);`

> 该进程无法访问该文件，因为它正被另一个进程使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:40:14.523

发生错误是因为您正在使用带有读写锁的 FileStream 打开文件，而在您尝试使用 xmlDoc.Load() 方法读取文件后不久。由于文件被 FileStream 锁定，这会导致异常。

您似乎无缘无故地打开了 FileStream，因为您没有使用它。使用 FileStream 简单地删除 using 语句。

删除它之后，剩下的是 xmlDoc.Load() 调用，然后是 xmlDoc.Save() 调用。由于您使用这些方法直接加载文件，并且您不会锁定文件超过必要的时间。那应该行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:33:50.883

即使您说加载 XML 会给您带来此错误，我也看到了您需要纠正的一个主要缺陷。`xmlDoc`在块外声明`using`，并以同样的方式在块外调用`xmlDoc.Save`。

例子：

```
var xmlDoc = new XmlDocument();
using (var fileStream = new FileStream(_logFilePath, FileMode.Open,
FileAccess.Read, FileShare.None))
{
    xmlDoc.Load(fileStream);
    //Do the rest
}
xmlDoc.Save(_logFilePath); 
```

**编辑：**我刚刚注意到你*甚至没有使用*`FileStream`你创建的。您可以删除其声明。

```
var xmlDoc = new XmlDocument();
xmlDoc.Load(_logFilePath);
//Do the rest
xmlDoc.Save(_logFilePath); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:49:23.327

好的，结合了 Eve 和 Maarten 的前两个答案。如果您使用的是，`FileStream`则在`XmlDocument.Load`方法中使用它而不是`_logFilePath`您当前使用的变量。如果你使用`FileStream`then 你不会得到独占读/写访问错误，但如果你只使用文件位置，你会的。因此，正如 Eve 所指出的，将您的代码更改为：

```
using (FileStream fileStream = new FileStream(_logFilePath, FileMode.OpenOrCreate, 
       FileAccess.ReadWrite, FileShare.ReadWrite))
{
    string currentDateTime = DateTime.Now.ToString("yyyyMMddHHmmss");

    XmlDocument xmlDoc = new XmlDocument();

    xmlDoc.Load(fileStream); //instead of xmlDoc.Load(_logFilePath)

    //other stuff

} 
```

# sql - SSRS 2008 - 如果条件为真，则为空文本框

> ID：14337789
> 
> 赞同：0
> 
> 时间：2013-01-15T12:29:32.347
> 
> 标签：sql, sql-server-2008-r2, ssrs-2008, reporting-services

我有一个报告，其中包含一个名为“容量”的列，`""`如果上述文本框值的结果与当前文本框中的值相同，则希望返回。

例子;

```
Country      Capacity        Date
USA           100            01/01/2013
              100            08/01/2013
              100            15/01/2013
              100            22/01/2013 
```

因此，在这种情况下，我想显示容量为 100 的第一行，其余的只是空白行，因为容量相同，有没有办法在 SSRS 2008 中执行此操作，因为我不想更改 SQL ?

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T12:34:36.703

您可以使用该`PREVIOUS`功能（请参阅[doku](http://msdn.microsoft.com/en-us/library/ms156372%28v=sql.100%29.aspx)）：

对于文本框文本，使用表达式将当前容量值与之前的容量值进行比较；如果值相同则显示`""`。

```
=IIF(Previous(Fields!FieldName.Value) <> Fields!FieldName.Value, 
     Fields!FieldName.Value, "") 
```

# xcode - sdl 目标 c++ 和 xcode 在游戏中包含 sdl 框架

> ID：14337791
> 
> 赞同：3
> 
> 时间：2013-01-15T12:29:37.773
> 
> 标签：xcode, macos, sdl, objective-c++

我正在使用目标 C++ 在 xcode 中编写我的第一个 SDL 游戏。该程序在我的计算机上运行良好，但我试图在应用程序中包含该框架，以便它可以在其他 Mac 上播放而无需安装它。

我已将框架设置为复制，然后在应用程序构建阶段链接到二进制文件。

每次我在另一台 Mac 上运行应用程序时，都会收到以下错误消息：

> 进程：Maze [2911]
> 路径：/Users/USER/Desktop/Maze.app/Contents/MacOS/Maze
> 标识符：LKW.Maze
> 版本：1 (1) 代码类型：X86-64 (Native)
> 父进程：launchd [2811 ]
> 日期/时间：2013 年 1 月 14 日 12:50:54.126 +1100
> 操作系统版本：Mac OS X 10.7.5 (11G63b)
> 报告版本：自上次报告以来的 9
> 
> 次间隔：自上次报告以来的 60055 秒
> 崩溃：
> 每应用程序崩溃11 次自上次报告以来：6
> 匿名 UUID：9FDDFA61-468F-4EE5-B922-EE167A9E7DF7 崩溃
> 
> 线程：0
> 
> 异常类型：EXC_BREAKPOINT (SIGTRAP)
> 异常代码：0x0000000000000002、0x0000000000000000
> 
> 应用程序特定信息：
> dyld：启动，加载依赖库
> 
> Dyld 错误消息：
> 未加载库：@rpath/SDL.framework/Versions/A/SDL
> 引用自：/Users/USER/Desktop/Maze.app/Contents/MacOS/Maze
> 原因：找不到图像
> 
> 二进制图像：
> 0x10ed3c000 - 0x10ed41fff +LKW.Maze (1 - 1) 5364749AEDEB> /Users/USER/Desktop/Maze.app/Contents/MacOS/Maze
> 0x7fff6e93c000 - 0x7fff6e970baf dyld (195.6 - ???) < 0CD1B35B-A28F-32DA-B72E-452EAD609613> /usr/lib/dyld
> 0x7fff8ba34000 - 0x7fff8bd4dfff com.apple.Foundation (6.7.2 - 833.25) <22AAC369-B63C-3C55-8AC6-C3ECBA44DA7B>
> /System/Library/Foundation .framework/Versions/C/Foundation
> 0x7fff94742000 - 0x7fff94742fff com.apple.Cocoa (6.6 - ???) <7EC4D759-B2A6-3A99-AC75-809FED1500C6> /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
> 
> 型号：MacBook7,1，BootROM MB71.0039.B0E，2 个处理器，Intel Core 2 Duo，2.4 GHz，2 GB，SMC 1.60f5
> 显卡：NVIDIA GeForce 320M，NVIDIA GeForce 320M，PCI，256 MB
> 内存模块：BANK 0/ DIMM0, 1 GB, DDR3, 1067 MHz, 0x80CE, 0x4D34373142323837334648532D4346382020
> Memory Module: BANK 1/DIMM0, 1 GB, DDR3, 1067 MHz, 0x80CE, 0x4D34373142323837334648532D4346382020
> AirPort: spairport_wireless_card_type_airport_extreme (0x14E4, 0x93), Broadcom BCM43xx 1.0 (5.106.198.19.22 )
> 蓝牙：版本 4.0.8f17，2 个服务，18 个设备，1 个传入串行端口
> 网络服务：AirPort、AirPort、en1
> 串行 ATA 设备：Hitachi HTS545025B9SA02、250.06 GB
> 串行 ATA 设备：HL-DT-ST DVDRW GS23N
> USB 设备：内置 iSight、apple_vendor_id、0x8507、0x24600000 / 2
> USB 设备：BRCM2070 Hub、0x0a5c (Broadcom Corp.)、0x4500、0x06600000 / 3
> USB 设备：蓝牙 USB 主机控制器、apple_vendor_id、0x8218、0x06630000 / 5
> 设备：Apple 内部键盘/触控板、apple_vendor_id、0x0236、0x06300000 / 2

编辑：
SDL 框架位于应用程序包中的 Contents > Frameworks 中。
我已经尝试过亚当的工作。
我已包含`@executable_path/contents/framworks`在框架搜索路径中。
我都试过了

```
#include "SDL/SDL.h" 
and 
#include <SDL/SDL.h> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:09:22.903

检查 SDL 框架是否已复制到游戏的应用程序包中。从 Finder 中选择应用程序，右键单击并选择 Show Package Contents。如果正确复制 SDL 框架，则它应该位于应用程序包中的 Contents > Frameworks 中。

如果 SDL 框架未复制到应用程序包，您可以在以下文章中找到有关如何将 SDL 框架复制到应用程序包的说明：

[在 Xcode 4 中使用 SDL](http://meandmark.com/blog/2012/01/using-sdl-with-xcode-4/)

请务必阅读文章中 Adam 的评论，因为如果按照文章中的说明无法将 SDL 框架复制到应用程序包，他的评论包含一种解决方法。

# c# - 在提示框中添加标签

> ID：14337794
> 
> 赞同：2
> 
> 时间：2013-01-15T12:29:51.780
> 
> 标签：c#, javascript, asp.net, prompt

我想通过提示框从用户那里获取密码，如果输入的密码无效，则在我提到的提示框内的标签中显示错误消息。这可能吗？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:33:11.097

你不能这样做，因为它是由浏览器控制的。

您可以使用其他对话框，例如

jQuery UI 对话框

彩盒

思想箱等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:38:34.037

有很多控件可用于执行以下操作：

[jQuery UI 对话框](http://jqueryui.com/dialog/)

[剑道用户界面](http://demos.kendoui.com/web/window/index.html)

[引导程序](http://twitter.github.com/bootstrap/javascript.html#modals)

等等，希望对您有所帮助。

# iphone - iPhone 倒数计时器 Circle

> ID：14337795
> 
> 赞同：2
> 
> 时间：2013-01-15T12:29:57.150
> 
> 标签：iphone

我需要一个用于 iPhone 的开源倒数计时器，如本文所示，但在[此](https://stackoverflow.com/questions/8895244/how-to-use-coreanimation-to-animate-a-circle-like-a-clock-countdown)链接中仅显示图像，未提供源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T13:28:21.233

看看 GitHub 上的这个开源项目

[DACCircularProgress](https://github.com/danielamitay/DACircularProgress/tree/master/DACircularProgress)

将它添加到您的项目中，初始化一个实例 - 将其添加到您的视图中并使用该`- (void)setProgress:(CGFloat)progress animated:(BOOL)animated`方法将动画设置为给定值。

# c# - 未添加到数据集的新列的值

> ID：14337797
> 
> 赞同：0
> 
> 时间：2013-01-15T12:30:07.587
> 
> 标签：c#, datatable

我在我的列中添加了一列`datatable`并根据条件向列中添加值，但该值未添加到`datatable`*（即使应该有值）*

这是我使用的代码的一部分

```
conn = new OleDbConnection(@"Provider=Microsoft.Jet.OleDb.4.0;
                                Data Source =" + Server.MapPath("App_Data\\LR Product Database 2000.mdb"));
        conn.Open();

        Dictionary<string, string> items = new Dictionary<string, string>();
        OleDbCommand cmd = conn.CreateCommand();
        cmd.CommandText = "SELECT CODE, TITLE FROM tblProducts";

        OleDbDataReader dbread = cmd.ExecuteReader();

        while (dbread.Read())
        {
            productCode = (string)dbread["CODE"];
            productTitle = (string)dbread["TITLE"];
            System.Diagnostics.Debug.Write(productCode + " ");
            items.Add(productCode, productTitle);
        }

        sqlCon = new SqlConnection(ConfigurationManager.ConnectionStrings["LRVWebsite"].ToString());
        sqlCon.Open();
        dsSql = new DataSet();
        SqlDataAdapter dba = new SqlDataAdapter(@"SELECT C.CustomerFirstName,C.CustomerLastName, C.CustomerCompany,C.CustomerPosition,C.CustomerCountry,C.CustomerProvince,C.CustomerContact,CP.ActionDate,CP.ProductCode,CP.CustomerEmail FROM tblCustomers C INNER JOIN tblCustomerProducts CP ON C.CustomerEmail = CP.CustomerEmail ORDER BY ActionDate DESC", connString);
        dba.Fill(dsSql,"Products");
        DataTable dt = dsSql.Tables["Products"];
        dt.Columns.Add("Title", typeof(string));

        foreach (DataRow dr in dt.Rows)
        {
            if(items.ContainsKey(dr["ProductCode"].ToString()))
            {

                dr["Title"] = items[dr["ProductCode"].ToString()];

            }
        } 
```

如何根据条件将值添加到新列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:50:58.087

你可以做这样的事情，在选择中创建一个空列，`'' AS Title`然后填充它。您还可以将逻辑放入 sql 中（加入 items 表。）：

```
 SqlDataAdapter dba = new SqlDataAdapter(@"SELECT '' as Title, C.CustomerFirstName,C.CustomerLastName, C.CustomerCompany,C.CustomerPosition,C.CustomerCountry,C.CustomerProvince,C.CustomerContact,CP.ActionDate,CP.ProductCode,CP.CustomerEmail FROM tblCustomers C INNER JOIN tblCustomerProducts CP ON C.CustomerEmail = CP.CustomerEmail ORDER BY ActionDate DESC", connString);
    dba.Fill(dsSql,"Products");
    DataTable dt = dsSql.Tables["Products"];

    foreach (DataRow dr in dt.Rows)
    {
        if(items.ContainsKey(dr["ProductCode"].ToString()))
        {

            dr["Title"] = items[dr["ProductCode"].ToString()];

        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:52:04.973

您可以缩短第一部分（+ use `using`）并使用`Enumerable.Join`：

```
DataTable tblAccess = new DataTable();
using(var con = new OleDbConnection(@"Provider=Microsoft.Jet.OleDb.4.0;Data Source =" + Server.MapPath("App_Data\\LR Product Database 2000.mdb"))
using(var da = new OleDbDataAdapter("SELECT CODE, TITLE FROM tblProducts", con))
{ 
    da.Fill(tblAccess);
}

DataTable tblSqlServer = new DataTable();
using(var con = new SqlConnection(ConfigurationManager.ConnectionStrings["LRVWebsite"].ToString()))
using(var da = new SqlDataAdapter("SELECT C.CustomerFirstName,C.CustomerLastName, C.CustomerCompany,C.CustomerPosition,C.CustomerCountry,C.CustomerProvince,C.CustomerContact,CP.ActionDate,CP.ProductCode,CP.CustomerEmail FROM tblCustomers C INNER JOIN tblCustomerProducts CP ON C.CustomerEmail = CP.CustomerEmail ORDER BY ActionDate DESC", con))
{ 
    da.Fill(tblSqlServer);
} 
```

现在很容易将两个表加入`Linq-To-DataSet`并获得 sql-server 行的新标题：

```
var both = from rowSql in tblSqlServer.AsEnumerable()
           join rowAcc in tblAccess.AsEnumerable()
           on rowSql.Field<string>("ProductCode") equals rowAcc.Field<string>("ProductCode")
           select new { rowSql = rowSql, newTitle = rowAcc.Field<string>("Title") };

foreach (var x in both)
{
    x.rowSql.SetField("Title", x.newTitle);
} 
```

# html - 管理 HTML5 中的视频流

> ID：14337798
> 
> 赞同：0
> 
> 时间：2013-01-15T12:30:11.713
> 
> 标签：html, internet-explorer, google-chrome, streaming

我创建了这个网页：

```
<html>
<title>WebCam stream</title>
<body>
<embed type="application/x-vlc-plugin" pluginspage="http://www.videolan.org" version="VideoLAN.VLCPlugin.2"
width="640"
height="480"
id="vlc">
</embed>
<script language="Javascript">
var vlc = document.getElementById("vlc");
vlc.playlist.add("http://myIpAddress:11345");
vlc.playlist.play();
vlc.audio.toggleMute();
</script>
</body>
</html> 
```

这在 Chrome 或 Mozilla 中运行良好，但我需要使用 Internet Explorer，因此我的页面无法正常工作。

我还尝试以这种方式使用 HTML 5 视频支持：

```
<!DOCTYPE html> 
<html>

<head><title>webCamStream</title></head>

<body>
<video controls preload autoplay>  
    <source src="http://95.225.xx.yy:11345" type="video/mp4; 'codecs='avc1.42E01E, mp4a.40.2'" />  
</video>
</body>
</html> 
```

但资源管理器不起作用。

我可以修改

> type="video/mp4; '编解码器='avc1.42E01E

为了管理 ASF 视频格式？我必须使用什么编解码器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:35:45.593

你在哪个版本的 Internet Explorer 上尝试这个，你没有说。我假设它是 9 或 10，因为任何小于它的东西都不支持 HTML5 视频。

尝试从`type`属性中删除编解码器，只需将其设置为`"video/mp4"`.

# ruby-on-rails - 循环遍历对象以找到匹配项

> ID：14337804
> 
> 赞同：1
> 
> 时间：2013-01-15T12:30:32.700
> 
> 标签：ruby-on-rails, loops, rails-activerecord

我有一个`Shift`和一个`Type`具有以下关系的表：

```
class Shift < ActiveRecord::Base
  belongs_to :type
end

class Type < ActiveRecord::Base
  has_many :shifts, :dependent => :destroy
end 
```

该`Type`表有一个名为 的属性`Unassignable`。

我想做一个查询，返回所有`Shifts`属于属性`Type`所在的..`Unassignable``true`

类似于： Shift.where(:shift.type.unassignable => true)

任何帮助:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:34:41.087

```
Shift.includes(:type).where("types.unassignable = ?", true) 
```

# sql - 服务器名称 SQL Server 2005 Express

> ID：14337807
> 
> 赞同：0
> 
> 时间：2013-01-15T12:30:37.800
> 
> 标签：sql, sql-server-2005

我已经安装了带有 Management Studio Express 的 SQL Server 2005 Express；但它不接受我的服务器名称。

*   我查看了它的帮助，发现服务器名称是 my PC `name\sqlexpress`。
*   我已经从“我的电脑”属性窗口中更改了我的电脑名称。
*   我正在运行winxp专业版。
*   我也试过'。

您的帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:42:40.953

如果您使用所有默认值安装 SQL Server Express，则应该调用实例`SQLEXPRESS`，因此这些机器名称*应该可以*工作：

*   `.\SQLEXRPESS`
*   `(local)\SQLEXRPESS`
*   `MachineName\SQLEXRPESS`

注意：您在原始帖子中有`sqlexress`（缺少`p`）-我已修复此问题，但如果您真的尝试`sqlexress`-那么当然它不起作用:-)

# api - Magento 1.7，谷歌购物/产品/内容

> ID：14337810
> 
> 赞同：5
> 
> 时间：2013-01-15T12:30:57.757
> 
> 标签：api, magento, shopping

我有这个问题：

我在 Magento 1.7.0.2 上使用这个 Google Content API for Shopping 1.7.0.0 (http://www.magentocommerce.com/magento-connect/Magento+Core/extension/6887/mage_googleshopping) 但是当我提交产品时它卡住了在第一个之后。

所有选项和属性都已设置，一切都很好。我什至在 Google Merchant Products 列表中获得了第一个产品，但脚本在第一个之后停止，我得到了这个按摩：

**谷歌购物同步过程**通过提交按钮上的旋转加载图标运行，并且可以运行一整天。

我可以通过以下方式重置此过程：

```
update core_flag set state='0' where flag_code='googleshopping'; 
```

PHP 内存限制、执行时间和最大发布时间是可能的最高值，我认为这不是问题，因为即使我尝试提交 1 或 2 个项目也会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:42:43.820

好消息 - 每个线程[http://www.magentocommerce.com/boards/viewthread/303448/#t421584](http://www.magentocommerce.com/boards/viewthread/303448/#t421584)

从第 64 行更改为 GoogleShopping/Model/Service/Item.php：这是：

```
$published = $this->convertContentDateToTimestamp($entry->getPublished()->getText()); 
```

每个线程现在是：

$published = 日期（）；

现在，我们的产品再次大量添加到 GoogleShopping 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:13:58.840

自上周以来，我在安装了相同的 Google Content API for Shopping 的 Magento Enterprise 1.12.0.2 上看到了同样的问题。几个月来，它在三个商店的产品套装中运行良好。现在，我能够完成同步以删除一些过期的产品，但是任何添加产品的尝试都会产生相同的 Google 购物同步过程，并且正在运行您所看到的旋转加载图标。我们因增加内存限制等而产生了类似的非生产性结果。无论提交 1 个或多个项目似乎都会出现问题。我一直在使用与您相同的流程重置。上周我能够添加一个设置了类型的产品。尽管产品属性摘要[http://support.google.com/merchants/bin/answer.py?hl=en&answer=1344057#US](http://support.google.com/merchants/bin/answer.py?hl=en&answer=1344057#US) 将产品类型显示为非服装产品的可选类型，他们是否可以在不告诉我们所有人的情况下将其更改为必需？

# php - 如果我运行的查询超过列值的最大值，则会获得不同的计数值

> ID：14337812
> 
> 赞同：0
> 
> 时间：2013-01-15T12:31:05.610
> 
> 标签：php, mysql

今天我在 MySQL 中遇到了一个新问题。

当我执行以下查询时

```
select `column` from table where `column` between '1' and '30000' 
```

我得到了三个结果

```
234
123
111 
```

当我用不同的值执行相同的查询时

```
select `column` from table where `column` between '1' and '9000' 
```

我有六个结果

```
111
123
343
234
765
568 
```

可能是什么问题？

仅供参考：列的数据类型是 varchar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:33:51.507

看来，问题在于该列`column`不是数字数据类型，而是 varchar 或字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:33:58.057

这里的问题是您尝试以数字方式在基于文本的字段上进行选择。如果您将字段更改为整数字段，您将获得预期的结果。

# javascript - 如何在文档的特定位置使用纯 javascript 在 HTML 文档中添加元素

> ID：14337818
> 
> 赞同：3
> 
> 时间：2013-01-15T12:32:00.553
> 
> 标签：javascript, html

我知道我可以通过以下方式使用 javascript 添加元素：
`document.createElement('input');`
但我想将它添加到文档的特定位置，例如在`submit`按钮之后，或者在`textfield`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:37:34.453

试试这个：

`s`是要在其后放置新元素的元素。

```
var s = document.getElementsByTagName("input")[0];
var newNode = document.createElement("input");

s.parentNode.insertBefore(newNode, s.nextSibling); 
```

这会将新`input`的放在当前的之后`input`。

或者：

```
var f = document.getElementsByTagName("form")[0];
var newNode = document.createElement("input");
f.appendChild(newNode); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:35:37.823

您可以使用 GetElementsBy 函数之一获取节点，然后使用 Node.appendChild() 附加新的 DOM 元素。

# ssh - 通过网关的结构连接不起作用

> ID：14337819
> 
> 赞同：1
> 
> 时间：2013-01-15T12:32:00.993
> 
> 标签：ssh, fabric

我正在尝试通过网关运行结构，但遇到困难：结构报告尝试连接到目标主机的超时。

```
 File "/usr/local/lib/python2.7/dist-packages/fabric/network.py", line 452, in connect
    raise NetworkError(msg, e)
fabric.exceptions.NetworkError: Timed out trying to connect to 10.31.219.57 (tried 1 time) 
```

我`--gateway=dmzhost`在命令行上使用，但无法确认它是否实际使用该网关。我已经检查过我可以正常使用 ssh 连接到网关，然后进一步连接到目标机器，并将 IP 分配给结构。

关于可能出错的任何想法，或者有没有办法获得更多关于正在发生的事情的调试信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:34:51.497

这是忽略网关的 Fabric 缺陷。它已在 1.5.1 中修复。

# android - 从 mapActivity 按下返回按钮时出现错误“错过对 unregisterReceiver() 的调用”

> ID：14337825
> 
> 赞同：-1
> 
> 时间：2013-01-15T12:32:24.413
> 
> 标签：android, android-intent

当从 mapActivity 按下返回按钮但应用程序没有崩溃时，我收到错误“缺少对 unregisterReceiver() 的调用”，有没有解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:39:49.073

调用 unregisterreciever(your_recivername); 在您的活动的 onbackpressed 方法中。

# mysql - 使用 MySQL-view 遍历多个通用表

> ID：14337827
> 
> 赞同：1
> 
> 时间：2013-01-15T12:32:34.990
> 
> 标签：mysql

我有几个（记录）表，每个月一个，全年 12 个。表格模式是：usage_YYYY_MM（所以应该是：usage_2012_11、usage_2012_12、usage_2013_01 等）

我想要做的是将这些表的内容组合在一个视图中。有时是一整年，有时是过去的 N 个月。在我看来，我会使用类似的东西：

```
(SELECT order_id, SUM(`usage`) as total, created FROM usage_2012_05 GROUP BY order_id)
UNION ALL
(SELECT order_id, SUM(`usage`) as total, created FROM usage_2012_06 GROUP BY order_id)
UNION ALL
(SELECT order_id, SUM(`usage`) as total, created FROM usage_2012_07 GROUP BY order_id)
ORDER BY created; 
```

由于我不想每个月都将新表添加到特定视图中，因此我曾想过循环执行此操作。我一直在窥探并且已经明白我应该使用像 SELECT GROUP_CONCAT 这样的东西。这是我到目前为止得到的：

```
SET @resultQuery = NULL;

SELECT
  GROUP_CONCAT(
    CONCAT('SELECT order_id, `usage` as used, created FROM ', table_name )
    SEPARATOR '\r\nUNION\r\n'
  )
INTO
  @resultQuery
FROM
  information_schema.`TABLES`
WHERE
  table_name LIKE "usage_%" 
ORDER BY 
    table_name DESC LIMIT 2;

PREPARE stmt FROM @resultQuery;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

现在，虽然这确实给了我整个数据集，但最后一点（ORDER BY table_name DESC LIMIT 2）似乎不起作用......所以，我仍然不完全在那里......

ORDER BY DESC 和 LIMIT 不起作用有什么原因吗？我应该以不同的方式处理这个问题吗？

顺便说一句：没有寻找关于“usage_”表的规范化的善意评论。我们很清楚这一点，但有特定的（遗留）理由希望它们像这样。

# iphone - 在 iOS 中读取 WiFi 数据使用情况

> ID：14337830
> 
> 赞同：2
> 
> 时间：2013-01-15T12:32:48.587
> 
> 标签：iphone, ipad, ios6, cellular-network, wifi

谁能给我一个关于如何将其他应用程序的 WiFi/蜂窝数据使用情况读取到我们在 iOS 中的应用程序的想法？

# html - 需要将父文档的 css 获取到 iframe

> ID：14337831
> 
> 赞同：0
> 
> 时间：2013-01-15T12:32:49.817
> 
> 标签：html, css, iframe, font-face

在我的父文档中，我有一个可编辑的 iframe。在父文档中，我使用`@font-face`外部 css 文件自定义了字体系列实现。

默认情况下，此`@font-face`实现不会携带到 iframe 中，直到我专门将其添加到 iframe 中。

我在网上看到这是不可能的，直到我将它专门添加到 iframe 中，因为 iframe 提供了与父文档的 css 隔离。

这是正确的还是有任何方法可以将 css 文件从父 iframe 继承到子 iframe？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:19:00.707

这可能有效；**可能**。内部 iframe

```
window.onload = function() {
    if (parent) {
        var oHead = document.getElementsByTagName("head")[0];
        var arrStyleSheets = parent.document.getElementsByTagName("style");
        for (var i = 0; i < arrStyleSheets.length; i++)
            oHead.appendChild(arrStyleSheets[i].cloneNode(true));
    }
} 
```

# javascript - 不同分辨率的不同背景图像集

> ID：14337832
> 
> 赞同：1
> 
> 时间：2013-01-15T12:32:51.137
> 
> 标签：javascript, jquery

我正在使用包含 29 张图像的全屏背景图像幻灯片。图像在 (1366 x 769)px 分辨率下完美显示，但是当我使用低于此分辨率的不同分辨率时，图像的大部分部分都没有显示。而当分辨率太大时，背景颜色（白色）出现在右下方。

我想用javascript检查屏幕分辨率的方法是-

```
<script type="text/javascript">
if ((screen.width=1400) && (screen.height<=900)) {

}
if ((screen.width=1366) && (screen.height<=768)) {

}
else {

}
</script> 
```

现在，我应该如何在上面的代码中使用下面的图像？

```
<img src="1400/images/background/bg-2.jpg"> 
<img src="1400/images/background/bg-3.jpg"/>
...
<img src="1400/images/background/bg-29.jpg"/> 
```

和

```
<img src="1366/images/background/bg-2.jpg"> 
<img src="1366/images/background/bg-3.jpg"/>
...
<img src="1366/images/background/bg-29.jpg"/> 
```

我不能为此使用 CSS，因为图像是用 html 代码显示的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:53:16.757

为了避免加载错误的图像，我会从一开始就用 Javascript 添加这些图像标签。然后，您只需将它们添加到您在第一个 Javascript 片段中确定的相应路径。

我要说的一件事是你不应该尝试完全匹配宽度。以与屏幕高度相同的方式匹配。我之所以这么说是因为访问者可能没有最大化他们的窗口，并且分辨率可能不是您所期望的（例如，我今年的网络统计显示混合了 100 多种完全不同的屏幕分辨率）。

此外，您可能不应该使用 .width 属性，而是使用availWidth。这将防止一个问题，即用户没有最大化他们的浏览器窗口，以及他们可能打开了一个侧边栏（书签等），这会占用显示区域。

如果图像已经在页面上并且您无法更改，您可以使用 Javascript 更改它们的 SRC 属性。这意味着最多加载两组图像。由于您没有围绕该示例提供更多 HTML，因此我无法说明具体选择这些代码的代码是什么。它们是否都存在于具有特定 ID 的 div 中，或者它们是否都共享一个您没有在示例中添加的类属性？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:34:43.163

使用 CSS 设置背景，然后尝试 Media-Queries

[http://wiki.selfhtml.org/wiki/CSS/Media_Queries](http://wiki.selfhtml.org/wiki/CSS/Media_Queries)

就像是：

```
@media (width: 800px) {
    body {
        background-image: url('image1.jpg');
    }
}

@media (width: 1200px) {
    body {
        background-image: url('image2.jpg');
    }
} 
```

或者用不同的文件来做

[最小宽度和最大宽度 css 媒体查询](https://stackoverflow.com/questions/9513931/min-width-and-max-width-css-media-queries)

或将您自己的脚本写到最后。如果需要的话，也许可以使用 jQuery 并附加 css 文件。

```
<script type="text/javascript">
    jQuery(document).ready(function() {
        var $background = jQuery('<img class="background" src="fallback.jpg" alt="" />');

        if (jQuery(window).width() == 1400 && jQuery(window).height() <= 900) {
            // jQuery('head').prepend('<link href="styles1.css" ... />');
            // or
            $background.attr('src', 'image2.jpg');
        }

        [...]

        $background.appendTo('body');
    });    
</script>

<style type="text/css">
    img.background {
        /* style your background e.g. */
        position: absolute;
        display: block;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        border: 0 none;
    }
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:04:33.693

去一个 jQuery 插件。超大号是我的最爱之一。

[http://buildinternet.com/project/supersized/](http://buildinternet.com/project/supersized/)

# java - ListView 添加项目

> ID：14337833
> 
> 赞同：0
> 
> 时间：2013-01-15T12:33:02.697
> 
> 标签：java, android, android-listview

好的，首先，我大约 2 天前开始（尝试）学习 Java。我试图制作一个列出所有已安装应用程序（activityInfo.loadLabel）的应用程序，并且我想在项目单击时启动应用程序（activityInfo.packageName）我将这些存储在 AppItems 列表中

```
class AppItem{
    String _appname;
    public String getAppname(){return _appname;};
    public void setAppname(String value){_appname = value;};
    String _app;
    public String getApp(){ return _app; };
    public void setApp(String value){_app = value; };
} 
```

我可以将字符串数组添加到我的列表视图中。但是我如何在列表视图中将 2 个不同的值添加到同一行（可以这么说） - 在 Java 中。如果你不明白我的问题，请告诉我——我会尽量详细说明

这是我的代码：

```
ArrayList<AppItem> apps;
    @Override
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
        mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
        final List<ResolveInfo> pkgAppsList = getPackageManager().queryIntentActivities(mainIntent, 0);
        AppItem appItem = new AppItem();
        for (ResolveInfo applicationInfo : pkgAppsList) {
            appItem._appname = (String) applicationInfo.activityInfo.loadLabel(getPackageManager());
            appItem._app= applicationInfo.activityInfo.packageName;
            apps.add(appItem);
        }

        ArrayAdapter<AppItem> adapter = new ArrayAdapter<AppItem>(this,android.R.layout.simple_list_item_1,apps);

        ListView listView = new ListView(this);     
        listView.setAdapter(adapter);
         setContentView(listView);

         listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {
                String item = ((TextView)view).getText().toString();            
                Toast.makeText(getBaseContext(), item, Toast.LENGTH_LONG).show();

            }
        });

    }
class AppItem{
    String _appname;
    public String getAppname(){return _appname;};
    public void setAppname(String value){_appname = value;};
    String _app;
    public String getApp(){ return _app; };
    public void setApp(String value){_app = value; };
} 
```

还是有替代使用

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.package.address");
startActivity(LaunchIntent); 
```

我可以通过其标签名称启动应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:42:51.110

您需要为该行定义自己的布局（可以容纳任意数量的元素），然后`getView()`在您的适配器中覆盖，膨胀您的布局并在列表视图要求时返回它。这使您能够使每一行看起来像您想要的那样，或者使每一行根据数据类型而有所不同（这完全取决于您的`getView()`返回值 - 列表视图将只显示适配器返回的内容）。我在这里没有给出任何代码，因为实际上任何 Android ListView 教程都会给你，因为这是非常基础的。

随机发现的教程：[这里](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)或[这里](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:06:22.987

您的 ArrayAdapter 显示`AppItem.toString()`您给它的布局中的内容。

您可以覆盖 toString() 以显示标签：

```
public void toString() {
    return _appName;
} 
```

在onItemClick中，你可以通过调用来获取item

```
AppItem item = (AppItem) parent.getItemAtPosition(position); 
```

或者，假设 appItem 是可访问的（最终或您的活动的字段，而不是方法的局部变量）

```
apps.get(position); 
```

然后，您可以拥有包并调用活动：

```
Intent intent = getPackageManager().getLaunchIntentForPackage(item.getAapp()); 
```

# windows - MVVM 引用程序集

> ID：14337835
> 
> 赞同：1
> 
> 时间：2013-01-15T12:33:11.057
> 
> 标签：windows, mvvm, view, model, viewmodel

我正在我正在处理的应用程序中实现 MVVM 模式，并且我的解决方案中有 3 个单独的程序集，`Model, View, and ViewModel`. `ViewModel`有对 的引用`Model`，而有`View`对 的引用`ViewModel`。在我的`Model`我有一个类`Event`，在`ViewModel`我创建一个`ObservableCollection<Event>`. 问题是当我尝试将此集合设置`DataContext`为`ListView`. `View`我收到此错误：

```
error CS0012: The type 'Model.Event' is defined in an assembly that is not referenced. You must add a reference to assembly 'Model, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'. 
```

我想让应用程序尽可能地解耦，这并不是在解耦我的应用程序。我知道当我将模型的引用添加到我的视图时，我不会收到错误，但我不希望我的视图有模型引用。如何使这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:39:03.373

让您的视图程序集引用模型程序集没有任何问题。我认为这是常见的做法，也是让模型显示在视图中的唯一方法。假设您从视图的 xaml（不是代码隐藏）绑定到视图模型的 ObservableCollection，我在这里看不到紧密耦合的程序集。

# python - 列表的复杂排序

> ID：14337836
> 
> 赞同：4
> 
> 时间：2013-01-15T12:33:14.333
> 
> 标签：python, sorting

我有一个从上午 8:00 到下午 7:00 的时间列表，格式为字符串。没有指定上午/下午，并且不能选择使用 24 小时制。我想按时间对这个列表进行排序，但在时钟敲响后我遇到了问题，因为数字排序从 1 开始，尽管事实上 8-12 实际上在时间之前。我在想我可以创建一个新的元组列表，在其中我通过一个函数运行时间，将它们转换为更合适的数字，对其进行排序，并在需要它的函数中使用元组的第一个元素。这似乎可行，但我担心我可能会遗漏一些更优雅和基本的东西。我是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T12:34:59.210

使用`key`参数 to`list.sort()`或`sorted()`函数提供要排序的值。

```
values.sort(key=somefunction) 
```

where`somefunction`接受一个参数（要转换的值）。

然后将根据`key`参数的返回值对列表进行排序，但原始值本身保持不变。

对于您的问题，您可以使用：

```
def daytime(val):
    hour, min = map(int, val.split(':'))
    if hour < 8:
        hour += 12
    return hour, min 
```

这将转换`8:01`为`(8, 1)`and `6:25`to `(18, 25)`，导致`.sort()`or `sorted()`to sort `8:01`before `6:25`：

```
>>> sorted(['1:14', '8:01', '12:46', '6:25'], key=daytime)
['8:01', '12:46', '1:14', '6:25'] 
```

有关更多详细信息和提示，请参阅[Python Sorting HOWTO](http://wiki.python.org/moin/howto/sorting)（使用此[Google 缓存链接](http://webcache.googleusercontent.com/search?q=cache%3awiki.python.org/moin/HowTo/Sorting/&hl=en&tbo=d&gl=no&strip=1)，直到`wiki.python.org`从最近的[安全漏洞](http://mail.python.org/pipermail/python-dev/2013-January/123499.html)中恢复）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T12:37:34.300

该函数`to_minutes`将字符串转换为整数小时和分钟，并计算从 8:00 开始的分钟数，将 12 小时与 8:00 之前的时间相加。然后它根据这个分钟数排序：

```
def to_minutes(s):
    h,m = map(int, s.split(':'))
    return ((h - 8) % 12) * 60 + m

a = ['1:45', '8:00', '6:15', '12:30']
print sorted(a, key=to_minutes) 
```

印刷

```
['8:00', '12:30', '1:45', '6:15'] 
```

# java - Struts 2 中的页面加载动作和表单动作

> ID：14337837
> 
> 赞同：1
> 
> 时间：2013-01-15T12:33:16.020
> 
> 标签：java, jsp, struts2

为页面加载和表单提交创建不同的操作是一种好习惯吗？假设我想查看注册到一个网站。单击注册链接后，它只会执行一个简单的操作，该操作通常会重定向页面和注册表单，然后单击提交按钮，并且相同的操作还将处理数据以将其发送到数据库？

还是对表单提交采取不同的行动更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:25:01.753

对于这种情况，没有真正的“更好或更坏”。它具有相似的复杂性，但功能的不同位置。一般来说，我倾向于许多小班，但还有另一种选择。

我倾向于使用单操作、多方法以及区分 GET 和 POST 请求的拦截器。拦截器返回 GET 请求的已知结果（例如，`"input"`）并允许对 POST 结果进行正常处理（即，正常动作调用）。

这规范了表单处理，并消除了在整个应用程序中为简单的表单处理场景手动配置多种方法。

使用 Convention 插件会让这件事变得不那么有趣，尽管自动执行它有点令人愉快：一旦你知道了应用程序的 GET/POST “秘密”，你就不必再考虑它了。

* * *

要解决您的评论：

不同的功能必须存在于*某个地方*。

在 S2 中，您有两种方法来执行此操作：具有多个方法的操作或多个操作。这就是我认为你的问题要解决的问题——这是“更好的”。（答案：视情况而定。）

*下面使用 XML 配置；注释将基本相同。*

使用多个动作非常容易；一个甚至可能是默认操作：

```
<action name="login">
  <result>WEB-INF/jsps/login.jsp</result>
</action> 
```

如果没有表格准备，你就完成了。然后配置一个*执行*登录的操作：

```
<action name="doLogin">
  <result name="input">WEB-INF/jsps/login.jsp</result>
  <result type="redirectAction">home</result>
</action> 
```

使用多种方法几乎相同：

```
<!-- If LoginAction extends ActionDefault, the "input()" method -->
<!-- is supplied by the base class, and just returns "input".   -->
<action name="login" class="com.foo.bar.LoginAction" method="input">
  <result name="input">WEB-INF/jsps/login.jsp</result>
</action>

<!-- Default action method is "execute()". -->
<action name="doLogin" class="com.foo.bar.LoginAction">
  <result name="input">WEB-INF/jsps/login.jsp</result>
  <result type="redirectAction">home</result>
</action> 
```

# jquery - 将数组中的值存储到另一个数组中

> ID：14337838
> 
> 赞同：0
> 
> 时间：2013-01-15T12:33:17.143
> 
> 标签：jquery, arrays

我有一个数组如下：

```
var localproducts = [packageId, categoryId, dataId]; 
```

我想用 each 函数遍历这个数组，并将所有 dataId 存储到另一个新数组中，该数组包含具有特定 packageID 的所有项目，即如果 pacakgeId 为 3，而不是将 dataId 存储到新数组中。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:51:21.303

据我了解，你有一个对象数组，所以你需要保持属性`packageId`等于 3 的对象。你应该看看[`array_filter`](http://ca1.php.net/manual/en/function.array-filter.php).

代码基本上如下所示：

```
function filter($var) {
  return $var->packageId == 3;
}

$filtered_values = array_filter($localProducts, filter); 
```

您可以对一个或多个数组执行相同的操作，只需像这样更改过滤器功能：

```
function filter($var) {
  return $var['packageId'] == 3;
} 
```

现在，如果你想创建一个只有值的新数组，`dataId`应该使用简单的`foreach`.

```
var $dataIds = array();

foreach($localProducts as $prod) {
  if($prod->packageId == 3) {
    $dataIds[] = $prod->dataId;
  }
} 
```

# javascript - 当我单击 div 本身时将变量附加到 div

> ID：14337841
> 
> 赞同：0
> 
> 时间：2013-01-15T12:33:42.413
> 
> 标签：javascript, jquery, html

似乎无法让它工作已尝试在 jquery 中使用 this 但它不起作用任何想法都会很棒。我的目标是在单击时更改变量，然后在下次单击 <'div'> 时附加。这些应该是独立的，我有切换变量的代码。

干杯弗格

HTML

```
<div id="en">test</div>
<div id="de">testing</div>
<input type="button" value="Click Me"></input> 
```

Javascript

```
var lang='de';

$('#en').click(function (){
  lang='en';
});

$('#de').click(function (){
  lang='de';
});

$(function(){
  var NewContent='<div class="added">Added</div>'
  $(this).click(function(){
      $("#spin").after(NewContent);
  });
}); 
```

[jsFiddle 在这里](http://jsfiddle.net/fergusp/Su3RC/104/)

再次欢呼

更新

我已经更新了这里的小提琴更清晰[jsfiddle](http://jsfiddle.net/fergusp/Su3RC/117/)我希望能够指定变量进入哪个 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:16:16.650

我想这就是你想要的（JSFiddle 在[http://jsfiddle.net/vgATZ/](http://jsfiddle.net/vgATZ/)）：

HTML

```
<a href="#en">english</a>
<br>
<a href="#de">german</a>
<br><br>
<div class="gogo">Test div 1</div>
<div class="gogo">Test div 2</div> 
```

JS

```
var lang='de';

$('a[href="#en"]').click(function () {
    lang='en';
    return false;
});

$('a[href="#de"]').click(function () {
    lang='de';
    return false;
});

$("div.gogo").click(function(){
  var newContent='<div class="added">Added '+lang+'</div>';
    $(this).append(newContent);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:45:25.260

我猜想添加这样的东西对你有用：

```
$("div").click(function(){
  var newContent='<div class="added">Added '+lang+'</div>';
    $('body').append(newContent);
}); 
```

# batch-file - 创建多个进程的脚本

> ID：14337852
> 
> 赞同：2
> 
> 时间：2013-01-15T12:34:15.317
> 
> 标签：batch-file, batch-processing

我有一个批处理脚本，它接收电影文件的输入目录和文本文件的输出目录。该脚本运行一个将电影文件解析为文本文件的外部应用程序。该脚本还能够一次（并行）运行该“电影解析器”的多个进程。

我遇到了这个奇怪的问题：当我在某个目录（其中包含一个或多个文件）上运行脚本时，它运行良好。如果我运行脚本并告诉它每次加载 2 部电影（例如），它也可以正常工作，并且我看到任务管理器中运行了 2 个进程。当我在不同的目录上运行相同的运行时，我得到相同的结果。

但是，这很奇怪：当我打开控制台，并在第一个控制台的一个目录（其中有一个文件）上运行脚本，并在第二个目录（其中有一个文件）上运行脚本时第二个控制台，突然，当查看任务管理器时，我看到 4 个正在运行的进程而不是 2 个。

如果我增加并行进程，我会在任务管理器中获得更多进程。

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:46:40.360

它可能取决于批处理文件中的变量。大概您正在运行的批处理文件的两个实例都使用相同的变量来存储文件的路径。例如，如果您使用系统环境的 %1%（跨进程共享），则不同的实例可能会交叉通信。

考虑添加

```
setlocal 
```

到您的批处理文件。例如，请参阅[此 Microsoft 文档](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/setlocal.mspx)。

# knockout.js - $parent 绑定在淘汰赛中不起作用，为什么？

> ID：14337856
> 
> 赞同：3
> 
> 时间：2013-01-15T12:34:27.623
> 
> 标签：knockout.js

我对 javascript 淘汰赛中的 $parent 有疑问。

如果我有模型：

```
 var Person = function () {

        var self = this;

        self.person_Id = ko.observable(); 
        self.firstName = ko.observable(); 
        self.lastName = ko.observable(); 
        self.age = ko.observable(); 
        self.role = ko.observable(); 

        self.init = function (data) {

            self.person_Id(data.person_Id);
            self.firstName(data.firstName);
            self.lastName(data.lastName);
            self.age(data.age);
            self.role(data.role);
        };

    }; 
```

和收藏

```
 var PersonCollection = function () {

        var self = this;

        self.ItemToEditOrToAdd = ko.observable(new Person());  

        self.persons = ko.observableArray();

        self.AddItem = function (item) {

            self.persons.push(item);

        };

    }; 
```

和html

```
 <div id="new" data-bind="with: PersonCollectionInstance.ItemToEditOrToAdd">

                <p>Firstname: <input type="text" data-bind="value: firstName"/></p>
                <p>Lastname: <input type="text" data-bind="value: lastName"/></p>
                <p>Age: <input type="text" data-bind="value: age"/></p>
                <p>Role: <input type="text" data-bind="value: role"/></p>
                <button data-bind="click: $parent.PersonCollectionInstance.AddItem">Add new</button>

            </div> 
```

如果您查看 html，访问 AddItem 的自然方法是编写

```
<button data-bind="click: $parent.AddItem">Add new</button> 
```

这不起作用，因为 $parent 绑定将我带到我的 AppVM，这是我的所有强大的视图模型，而不是回到我的 PersonCollectionInstance。

这就是为什么我需要这样做：

```
 <button data-bind="click: $parent.PersonCollectionInstance.AddItem">Add new</button> 
```

谁能向我解释为什么 $parent 让我回到我所有强大的视图模型而不是我的 AddItem 所在的 PersonCollectionInstance ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T12:49:30.627

您需要编写`data-bind="click: $parent.PersonCollectionInstance.AddItem"`，因为您已经定义了`with`这样的：

```
data-bind="with: PersonCollectionInstance.ItemToEditOrToAdd"` 
```

因此，您在`with`绑定中降级了两个级别，因为您访问了一个嵌套属性。但是`$parent`仍然指向您的主视图模型，因为敲除无法跟踪您的嵌套属性并且它不会为您创建嵌套上下文。

所以可以通过使用两个来达到预期的结果`with`：

```
<div id="new" data-bind="with: PersonCollectionInstance">
  <!-- ko with: ItemToEditOrToAdd -->
    <p>Firstname: <input type="text" data-bind="value: firstName"/></p>
    <p>Lastname: <input type="text" data-bind="value: lastName"/></p>
    <p>Age: <input type="text" data-bind="value: age"/></p>
    <p>Role: <input type="text" data-bind="value: role"/></p>
    <button data-bind="click: $parent.AddItem">Add new</button>
  <!-- /ko -->
</div> 
```

如果你仍然使用两个`with`，你可以把你的按钮放在“外面”：

```
<div id="new" data-bind="with: PersonCollectionInstance">
  <!-- ko with: ItemToEditOrToAdd -->
    <p>Firstname: <input type="text" data-bind="value: firstName"/></p>
    <p>Lastname: <input type="text" data-bind="value: lastName"/></p>
    <p>Age: <input type="text" data-bind="value: age"/></p>
    <p>Role: <input type="text" data-bind="value: role"/></p>       
  <!-- /ko -->
  <button data-bind="click: AddItem">Add new</button>
</div> 
```

# java - 使 relativeLayout 的一部分可滚动？

> ID：14337857
> 
> 赞同：0
> 
> 时间：2013-01-15T12:34:35.080
> 
> 标签：java, android, layout

我有一个`relativeLayout`里面的`linearLayout`。`relativeLayout`左侧包含按钮，右侧包含终端和编辑文本。我只希望其中的一部分`relativeLayout`是可滚动的，左侧的按钮。但是，如果我尝试这样做，整个事情就会变得可滚动。如果我将左侧的按钮与右侧的终端分开，分成两个不同的 relativeLayouts，按钮将变为可滚动的，但终端和 edittext 现在出现在按钮下方而不是右侧。当前截图：http: [//i.imgur.com/7sYcU.png](http://i.imgur.com/7sYcU.png)

我如何在将终端保持在原位的同时使按钮滚动？如果我将它们分成两个不同的按钮，为什么按钮下方/右侧的相关命令不起作用`relativeLayouts`？

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/MainLayout"
    android:background="@drawable/wallpaper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

       <LinearLayout android:id="@+id/topButtons" 
        android:layout_margin="4dip"
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <Button android:id="@+id/deviceConnect"
            android:layout_margin="8dip"
            android:layout_weight="3"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:text="Connect"/>
        <LinearLayout android:orientation="vertical"
            android:layout_weight="1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
            <LinearLayout android:orientation="horizontal"
                android:layout_margin="8dip"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">
                <TextView android:text="Connected Adapter:"
                    android:layout_gravity="center_vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <Spinner android:id="@+id/deviceSpinner"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true"/>
                <TextView android:id="@+id/currentSettings" 
                    android:layout_marginLeft="8dip"
                    android:text="Current Settings: Not Connected"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical"/>
            </LinearLayout>
            <LinearLayout android:orientation="horizontal"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <LinearLayout android:orientation="horizontal"
                    android:layout_margin="8dip"
                    android:layout_weight="1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content">
                    <TextView android:text="Baud:"
                        android:layout_gravity="center_vertical"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"/>
                    <Spinner android:id="@+id/baudSpinner"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:drawSelectorOnTop="true"/>
                </LinearLayout>
                <LinearLayout android:orientation="horizontal"
                    android:layout_margin="8dip"
                    android:layout_weight="1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content">
                    <TextView android:text="Data:"
                        android:layout_gravity="center_vertical"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"/>
                    <Spinner android:id="@+id/dataSpinner"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:drawSelectorOnTop="true"/>
                </LinearLayout>
                <LinearLayout android:orientation="horizontal"
                    android:layout_margin="8dip"
                    android:layout_weight="1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content">
                    <TextView android:text="Parity:"
                        android:layout_gravity="center_vertical"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"/>
                    <Spinner android:id="@+id/paritySpinner"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:drawSelectorOnTop="true"/>
                </LinearLayout>
                <LinearLayout android:orientation="horizontal"
                    android:layout_margin="8dip"
                    android:layout_weight="1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content">
                    <TextView android:text="Stop:"
                        android:layout_gravity="center_vertical"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"/>
                    <Spinner android:id="@+id/stopSpinner"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:drawSelectorOnTop="true"/>
                </LinearLayout>
            </LinearLayout>
        </LinearLayout>
        <Button android:id="@+id/updateSettings"
            android:layout_margin="8dip"
            android:layout_weight="3"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:text="Update\nSettings"/>
    </LinearLayout>

        <RelativeLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">

       <Button android:id="@+id/Command"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Enable"/> 

       <Button android:id="@+id/Command2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Configure"
            android:layout_below="@+id/Command"/> 

       <Button android:id="@+id/Command3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Exit"
            android:layout_below="@+id/Command2"/> 

       <Button android:id="@+id/Command4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Show Version"
            android:layout_below="@+id/Command3"/> 

       <Button android:id="@+id/Command5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Show Run"
            android:layout_below="@+id/Command4"/> 

        <Button android:id="@+id/Command6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Backspace"
            android:layout_below="@+id/Command5"/> 

            <Button android:id="@+id/Command7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Backspace2"
            android:layout_below="@+id/Command6"/> 

        <jackpal.androidterm.emulatorview.EmulatorView
        android:id="@+id/emulatorView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:layout_toRightOf="@+id/Command4"
        android:layout_below="@+id/deviceConnect"
         android:layout_above="@+id/term_entry"  />

         <EditText
            android:id="@+id/term_entry"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:imeOptions="actionNone|flagNoExtractUi"
            android:inputType="text|textImeMultiLine"
            android:layout_alignParentBottom="true"
             android:layout_toRightOf="@+id/Command7" />

         <Button
            android:id="@+id/term_entry_send"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/entry_send"
            android:layout_toRightOf="@+id/term_entry" 
            android:layout_alignParentBottom="true"
            />

        </RelativeLayout>  

</LinearLayout> 
```

编辑：http: [//i.imgur.com/Dedc3.png](http://i.imgur.com/Dedc3.png)

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/MainLayout"
    android:background="@drawable/wallpaper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

       <LinearLayout android:id="@+id/topButtons" 
        android:layout_margin="4dip"
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <Button android:id="@+id/deviceConnect"
            android:layout_margin="8dip"
            android:layout_weight="3"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:text="Connect"/>
        <LinearLayout android:orientation="vertical"
            android:layout_weight="1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
            <LinearLayout android:orientation="horizontal"
                android:layout_margin="8dip"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">
                <TextView android:text="Connected Adapter:"
                    android:layout_gravity="center_vertical"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <Spinner android:id="@+id/deviceSpinner"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true"/>
                <TextView android:id="@+id/currentSettings" 
                    android:layout_marginLeft="8dip"
                    android:text="Current Settings: Not Connected"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical"/>
            </LinearLayout>
            <LinearLayout android:orientation="horizontal"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">
                <LinearLayout android:orientation="horizontal"
                    android:layout_margin="8dip"
                    android:layout_weight="1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content">
                    <TextView android:text="Baud:"
                        android:layout_gravity="center_vertical"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"/>
                    <Spinner android:id="@+id/baudSpinner"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:drawSelectorOnTop="true"/>
                </LinearLayout>
                <LinearLayout android:orientation="horizontal"
                    android:layout_margin="8dip"
                    android:layout_weight="1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content">
                    <TextView android:text="Data:"
                        android:layout_gravity="center_vertical"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"/>
                    <Spinner android:id="@+id/dataSpinner"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:drawSelectorOnTop="true"/>
                </LinearLayout>
                <LinearLayout android:orientation="horizontal"
                    android:layout_margin="8dip"
                    android:layout_weight="1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content">
                    <TextView android:text="Parity:"
                        android:layout_gravity="center_vertical"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"/>
                    <Spinner android:id="@+id/paritySpinner"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:drawSelectorOnTop="true"/>
                </LinearLayout>
                <LinearLayout android:orientation="horizontal"
                    android:layout_margin="8dip"
                    android:layout_weight="1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content">
                    <TextView android:text="Stop:"
                        android:layout_gravity="center_vertical"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"/>
                    <Spinner android:id="@+id/stopSpinner"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:drawSelectorOnTop="true"/>
                </LinearLayout>
            </LinearLayout>
        </LinearLayout>
        <Button android:id="@+id/updateSettings"
            android:layout_margin="8dip"
            android:layout_weight="3"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:text="Update\nSettings"/>
    </LinearLayout>

       <ScrollView
        android:layout_height="wrap_content"
        android:layout_width="wrap_content">

        <RelativeLayout 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">

       <Button android:id="@+id/Command"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Enable"/> 

       <Button android:id="@+id/Command2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Configure"
            android:layout_below="@+id/Command"/> 

       <Button android:id="@+id/Command3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Exit"
            android:layout_below="@+id/Command2"/> 

       <Button android:id="@+id/Command4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Show Version"
            android:layout_below="@+id/Command3"/> 

       <Button android:id="@+id/Command5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Show Run"
            android:layout_below="@+id/Command4"/> 

        <Button android:id="@+id/Command6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Backspace"
            android:layout_below="@+id/Command5"/> 

         <Button android:id="@+id/Command7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Settings"
            android:layout_below="@+id/Command6"/> 

        </RelativeLayout>  
</ScrollView>
         <RelativeLayout 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">
        <jackpal.androidterm.emulatorview.EmulatorView
        android:id="@+id/emulatorView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:layout_toRightOf="@+id/deviceConnect"
        android:layout_below="@+id/deviceConnect"
         android:layout_above="@+id/term_entry"  />

         <EditText
            android:id="@+id/term_entry"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:imeOptions="actionNone|flagNoExtractUi"
            android:inputType="text|textImeMultiLine"
            android:layout_alignParentBottom="true"
             android:layout_toRightOf="@+id/Command4" />

         <Button
            android:id="@+id/term_entry_send"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/entry_send"
            android:layout_toRightOf="@+id/term_entry" 
            android:layout_alignParentBottom="true"
            />

        </RelativeLayout>  

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:37:35.427

```
<LinearLayout
    android:id="@+id/topButtons"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="4dip"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/deviceConnect"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_margin="8dip"
        android:layout_weight="3"
        android:text="Connect" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="8dip"
            android:orientation="horizontal" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:text="Connected Adapter:" />

            <Spinner
                android:id="@+id/deviceSpinner"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:drawSelectorOnTop="true" />

            <TextView
                android:id="@+id/currentSettings"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_marginLeft="8dip"
                android:text="Current Settings: Not Connected" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical"
                    android:text="Baud:" />

                <Spinner
                    android:id="@+id/baudSpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical"
                    android:text="Data:" />

                <Spinner
                    android:id="@+id/dataSpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical"
                    android:text="Parity:" />

                <Spinner
                    android:id="@+id/paritySpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_margin="8dip"
                android:layout_weight="1"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical"
                    android:text="Stop:" />

                <Spinner
                    android:id="@+id/stopSpinner"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:drawSelectorOnTop="true" />
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>

    <Button
        android:id="@+id/updateSettings"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_margin="8dip"
        android:layout_weight="3"
        android:text="Update\nSettings" />
</LinearLayout>

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ScrollView
        android:id="@+id/scrllyout"
        android:layout_width="100dip"
        android:layout_height="wrap_content" >

        <RelativeLayout
            android:id="@+id/rltvlyout"
            android:layout_width="100dip"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/Command"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Enable" />

            <Button
                android:id="@+id/Command2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/Command"
                android:text="Configure" />

            <Button
                android:id="@+id/Command3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/Command2"
                android:text="Exit" />

            <Button
                android:id="@+id/Command4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/Command3"
                android:text="Show Version" />

            <Button
                android:id="@+id/Command5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/Command4"
                android:text="Show Run" />

            <Button
                android:id="@+id/Command6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/Command5"
                android:text="Backspace" />

            <Button
                android:id="@+id/Command7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/Command6"
                android:text="Backspace2" />
        </RelativeLayout>
    </ScrollView>

    <jackpal.androidterm.emulatorview.EmulatorView
        android:id="@+id/emulatorView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/term_entry"
        android:layout_below="@+id/deviceConnect"
        android:layout_toRightOf="@+id/scrllyout"
        android:focusable="true"
        android:focusableInTouchMode="true" />

    <EditText
        android:id="@+id/term_entry"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/scrllyout"
        android:imeOptions="actionNone|flagNoExtractUi"
        android:inputType="text|textImeMultiLine"
        android:singleLine="true" />

    <Button
        android:id="@+id/term_entry_send"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/term_entry"
        android:text="@string/entry_send" />
</RelativeLayout> 
```

采用 `<scrollview> <view> <childs> </childs> </view> <scrollview>`

# javascript - jQuery.browser：Javascript 未捕获类型错误

> ID：14337859
> 
> 赞同：7
> 
> 时间：2013-01-15T12:34:39.060
> 
> 标签：javascript, jquery, wordpress, typeerror

我遇到了一个错误，它不会让我的页面加载。

> 未捕获的类型错误：无法读取未定义的属性“msie”

控制台中的错误是指这段代码：

```
if (jQuery.browser.msie)
    extra_px += 3;
                                                   // Fix Link Clicking on IE 7 and below versions
if (jQuery.browser.msie && Number($.browser.version) < 8) {
    span_text.css('cursor', 'pointer');
    span_text.click(function() {
        window.location = menu_item.parent().attr("href");
    });
} 
```

奇怪的是，它突然发生了，我什么都没改变。作为参考，我使用的是 Wordpress。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-15T12:43:50.507

> *jQuery.browser*在 1.3 版本中被*弃用*，最终在 1.9 中被**删除。**

[[来源](https://github.com/jquery/jquery-migrate/blob/master/warnings.md#jqmigrate-jquerybrowser-is-deprecated)]

正如您在[当前版本的 jQuery](http://code.jquery.com/jquery.js)中看到的，不再有`$.browser`属性。

很可能它已移至插件中，如[docs](http://api.jquery.com/jQuery.browser/)中所述。

因此，如果您使用最新版本的 jQuery，则该`undefined`错误是可以理解的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T09:40:31.043

是的，jQuery.browser 在旧版本中已被弃用并在 1.9 中删除。所以现在在旧版本中，如果这样编写代码

```
isIE6 = jQuery.browser.msie && jQuery.browser.version < 7 && !window.XMLHttpRequest, 
```

将被替换为

```
isIE6 = navigator.userAgent.match(/msie [6]/i) && !window.XMLHttpRequest, 
```

干杯！！！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-13T13:30:12.470

正如[VisioN](https://stackoverflow.com/users/1249581/vision)的[回答](https://stackoverflow.com/questions/14337859/jquery-browser-javascript-uncaught-typeerror#14338019)所提到的，这在 jQuery 1.9 中已被删除，并且似乎不会很快回来。

如果您想使用插件重新添加`$.browser`到您的 jQuery 库，只需将以下代码复制并粘贴到文件中，然后将脚本链接到 jQuery 之后的任何位置：

```
;;(function($){if(!$.browser&&1.9<=parseFloat($.fn.jquery)){var a={browser:void 0,version:void 0,mobile:!1};navigator&&navigator.userAgent&&(a.ua=navigator.userAgent,a.webkit=/WebKit/i.test(a.ua),a.browserArray="MSIE Chrome Opera Kindle Silk BlackBerry PlayBook Android Safari Mozilla Nokia".split(" "),/Sony[^ ]*/i.test(a.ua)?a.mobile="Sony":/RIM Tablet/i.test(a.ua)?a.mobile="RIM Tablet":/BlackBerry/i.test(a.ua)?a.mobile="BlackBerry":/iPhone/i.test(a.ua)?a.mobile="iPhone":/iPad/i.test(a.ua)?a.mobile="iPad":/iPod/i.test(a.ua)?a.mobile="iPod":/Opera Mini/i.test(a.ua)?a.mobile="Opera Mini":/IEMobile/i.test(a.ua)?a.mobile="IEMobile":/BB[0-9]{1,}; Touch/i.test(a.ua)?a.mobile="BlackBerry":/Nokia/i.test(a.ua)?a.mobile="Nokia":/Android/i.test(a.ua)&&(a.mobile="Android"),/MSIE|Trident/i.test(a.ua)?(a.browser="MSIE",a.version=/MSIE/i.test(navigator.userAgent)&&0<parseFloat(a.ua.split("MSIE")[1].replace(/[^0-9\.]/g,""))?parseFloat(a.ua.split("MSIE")[1].replace(/[^0-9\.]/g,"")):"Edge",/Trident/i.test(a.ua)&&/rv:([0-9]{1,}[\.0-9]{0,})/.test(a.ua)&&(a.version=parseFloat(a.ua.match(/rv:([0-9]{1,}[\.0-9]{0,})/)[1].replace(/[^0-9\.]/g,"")))):/Chrome/.test(a.ua)?(a.browser="Chrome",a.version=parseFloat(a.ua.split("Chrome/")[1].split("Safari")[0].replace(/[^0-9\.]/g,""))):/Opera/.test(a.ua)?(a.browser="Opera",a.version=parseFloat(a.ua.split("Version/")[1].replace(/[^0-9\.]/g,""))):/Kindle|Silk|KFTT|KFOT|KFJWA|KFJWI|KFSOWI|KFTHWA|KFTHWI|KFAPWA|KFAPWI/i.test(a.ua)?(a.mobile="Kindle",/Silk/i.test(a.ua)?(a.browser="Silk",a.version=parseFloat(a.ua.split("Silk/")[1].split("Safari")[0].replace(/[^0-9\.]/g,""))):/Kindle/i.test(a.ua)&&/Version/i.test(a.ua)&&(a.browser="Kindle",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].replace(/[^0-9\.]/g,"")))):/BlackBerry/.test(a.ua)?(a.browser="BlackBerry",a.version=parseFloat(a.ua.split("/")[1].replace(/[^0-9\.]/g,""))):/PlayBook/.test(a.ua)?(a.browser="PlayBook",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].replace(/[^0-9\.]/g,""))):/BB[0-9]{1,}; Touch/.test(a.ua)?(a.browser="Blackberry",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].replace(/[^0-9\.]/g,""))):/Android/.test(a.ua)?(a.browser="Android",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].replace(/[^0-9\.]/g,""))):/Safari/.test(a.ua)?(a.browser="Safari",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].replace(/[^0-9\.]/g,""))):/Firefox/.test(a.ua)?(a.browser="Mozilla",a.version=parseFloat(a.ua.split("Firefox/")[1].replace(/[^0-9\.]/g,""))):/Nokia/.test(a.ua)&&(a.browser="Nokia",a.version=parseFloat(a.ua.split("Browser")[1].replace(/[^0-9\.]/g,""))));if(a.browser)for(var b in a.browserArray)a[a.browserArray[b].toLowerCase()]=a.browser==a.browserArray[b];$.extend(!0,$.browser={},a)}})(jQuery); 
```

# [*jsFiddle*](http://jsfiddle.net/SpYk3/7eSmd/)

* * *

传统上使用如下：`if ($.browser.msie) { doWork }`

* * *

```
/**	jQuery.browser
 *	@author	J.D. McKinstry (2014)
 *	@description	Made to replicate older jQuery.browser command in jQuery versions 1.9+
 *	@see http://jsfiddle.net/SpYk3/wsqfbe4s/
 *
 *	@extends	jQuery
 *	@namespace	jQuery.browser
 *	@example	jQuery.browser.browser == 'browserNameInLowerCase'
 *	@example	jQuery.browser.version
 *	@example	jQuery.browser.mobile	@returns	BOOLEAN
 *	@example	jQuery.browser['browserNameInLowerCase']
 *	@example	jQuery.browser.chrome	@returns	BOOLEAN
 *	@example	jQuery.browser.safari	@returns	BOOLEAN
 *	@example	jQuery.browser.opera	@returns	BOOLEAN
 *	@example	jQuery.browser.msie	@returns	BOOLEAN
 *	@example	jQuery.browser.mozilla	@returns	BOOLEAN
 *	@example	jQuery.browser.webkit	@returns	BOOLEAN
 *	@example	jQuery.browser.ua	@returns	navigator.userAgent String
 */
;;(function($){if(!$.browser&&1.9<=parseFloat($.fn.jquery)){var a={browser:void 0,version:void 0,mobile:!1};navigator&&navigator.userAgent&&(a.ua=navigator.userAgent,a.webkit=/WebKit/i.test(a.ua),a.browserArray="MSIE Chrome Opera Kindle Silk BlackBerry PlayBook Android Safari Mozilla Nokia".split(" "),/Sony[^ ]*/i.test(a.ua)?a.mobile="Sony":/RIM Tablet/i.test(a.ua)?a.mobile="RIM Tablet":/BlackBerry/i.test(a.ua)?a.mobile="BlackBerry":/iPhone/i.test(a.ua)?a.mobile="iPhone":/iPad/i.test(a.ua)?a.mobile="iPad":/iPod/i.test(a.ua)?a.mobile="iPod":/Opera Mini/i.test(a.ua)?a.mobile="Opera Mini":/IEMobile/i.test(a.ua)?a.mobile="IEMobile":/BB[0-9]{1,}; Touch/i.test(a.ua)?a.mobile="BlackBerry":/Nokia/i.test(a.ua)?a.mobile="Nokia":/Android/i.test(a.ua)&&(a.mobile="Android"),/MSIE|Trident/i.test(a.ua)?(a.browser="MSIE",a.version=/MSIE/i.test(navigator.userAgent)&&0<parseFloat(a.ua.split("MSIE")[1].replace(/[^0-9\.]/g,""))?parseFloat(a.ua.split("MSIE")[1].replace(/[^0-9\.]/g,"")):"Edge",/Trident/i.test(a.ua)&&/rv:([0-9]{1,}[\.0-9]{0,})/.test(a.ua)&&(a.version=parseFloat(a.ua.match(/rv:([0-9]{1,}[\.0-9]{0,})/)[1].replace(/[^0-9\.]/g,"")))):/Chrome/.test(a.ua)?(a.browser="Chrome",a.version=parseFloat(a.ua.split("Chrome/")[1].split("Safari")[0].replace(/[^0-9\.]/g,""))):/Opera/.test(a.ua)?(a.browser="Opera",a.version=parseFloat(a.ua.split("Version/")[1].replace(/[^0-9\.]/g,""))):/Kindle|Silk|KFTT|KFOT|KFJWA|KFJWI|KFSOWI|KFTHWA|KFTHWI|KFAPWA|KFAPWI/i.test(a.ua)?(a.mobile="Kindle",/Silk/i.test(a.ua)?(a.browser="Silk",a.version=parseFloat(a.ua.split("Silk/")[1].split("Safari")[0].replace(/[^0-9\.]/g,""))):/Kindle/i.test(a.ua)&&/Version/i.test(a.ua)&&(a.browser="Kindle",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].replace(/[^0-9\.]/g,"")))):/BlackBerry/.test(a.ua)?(a.browser="BlackBerry",a.version=parseFloat(a.ua.split("/")[1].replace(/[^0-9\.]/g,""))):/PlayBook/.test(a.ua)?(a.browser="PlayBook",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].replace(/[^0-9\.]/g,""))):/BB[0-9]{1,}; Touch/.test(a.ua)?(a.browser="Blackberry",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].replace(/[^0-9\.]/g,""))):/Android/.test(a.ua)?(a.browser="Android",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].replace(/[^0-9\.]/g,""))):/Safari/.test(a.ua)?(a.browser="Safari",a.version=parseFloat(a.ua.split("Version/")[1].split("Safari")[0].replace(/[^0-9\.]/g,""))):/Firefox/.test(a.ua)?(a.browser="Mozilla",a.version=parseFloat(a.ua.split("Firefox/")[1].replace(/[^0-9\.]/g,""))):/Nokia/.test(a.ua)&&(a.browser="Nokia",a.version=parseFloat(a.ua.split("Browser")[1].replace(/[^0-9\.]/g,""))));if(a.browser)for(var b in a.browserArray)a[a.browserArray[b].toLowerCase()]=a.browser==a.browserArray[b];$.extend(!0,$.browser={},a)}})(jQuery);
/* - - - - - - - - - - - - - - - - - - - */

var b = $.browser;
console.log($.browser);    //    see console, working example of jQuery Plugin
console.log($.browser.chrome);

for (var x in b) {
    if (x != 'init')
        $('<tr />').append(
            $('<th />', { text: x }),
            $('<td />', { text: b[x] })
        ).appendTo($('table'));
}
```

```
table { border-collapse: collapse; }
th, td { border: 1px solid; padding: .25em .5em; vertical-align: top; }
th { text-align: right; }

textarea { height: 500px; width: 100%; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<table></table>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-29T14:15:50.167

您可以使用 jQuery.Migrate 库来支持已弃用的函数，例如 $.browser。

见[https://github.com/jquery/jquery-migrate/#readme](https://github.com/jquery/jquery-migrate/#readme)

# python - 发送子进程 SIGTERM 时 Python 段错误

> ID：14337860
> 
> 赞同：0
> 
> 时间：2013-01-15T12:34:40.740
> 
> 标签：python, qt, segmentation-fault, subprocess, pyside

我在 python 中生成一个子进程，如下所示：

```
proc = subprocess.Popen(
  [process, arg1, arg2],
  env= current_env, cwd=exec_path, stdout=subprocess.PIPE) 
```

当我向子进程发送一个 SIGTERM （来自 shell，而不是 python）时，我的问题就出现了。

如果我`proc.read()`用来读取`proc`'s stdout 的结果，那么我最终会陷入死锁（正如预期的那样，由于使用了 PIPE），但 python 不会崩溃。

但是，如果我使用`proc.communicate()`python segfaults。据我了解，无论孩子做什么，这都不应该以任何方式影响父进程（python）！

我想做的是打电话`proc.communicate()`，然后检查`proc.returncode`哪个应该表明子进程有任何问题。

我正在使用 Python 2.7.3

谢谢！

**编辑：** 要注意的另一件事是，这是在 QThread (PySide.QtCore.QThread) 中运行的。

**编辑2：**

最小的例子：

该示例在 QThread 上下文之外正确运行，因此问题似乎与它有关。

*进程.py：*

```
class A(QThread):
  def run(self):
    pp = subprocess.Popen(["./loop.sh"], stdout=subprocess.PIPE)
    output = pp.communicate()
    print('Now send SIGTERM to loop.sh and watch me crash') 
```

*循环.sh*

```
#!/bin/bash
while true; do : ; done 
```

# google-chrome - ssrs 日历未在 chrome 上显示

> ID：14337865
> 
> 赞同：0
> 
> 时间：2013-01-15T12:34:52.413
> 
> 标签：google-chrome, reporting-services, ssrs-2008

我在显示 ssrs 日期时间选择器时遇到了麻烦，因为日历没有显示在 chrome 上。有没有办法让它工作？
（我得到的所有参考资料都断开了指向[http://www.rajbandi.net/](http://www.rajbandi.net/)的链接）
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:38:30.527

只需将 IE 选项卡与 Chrome 一起使用。SSRS 不打算在任何东西上运行，但 IE 和 IE 出于某种原因不喜欢它自己的产品有时会因为不合理的原因内置太多的安全性。

Chrome 的 IE 选项卡：[https ://chrome.google.com/webstore/detail/ie-tab/hehijbfgiekmjfkfjpbkbammjbdenadd?hl=en](https://chrome.google.com/webstore/detail/ie-tab/hehijbfgiekmjfkfjpbkbammjbdenadd?hl=en)

我日复一日地在 SSRS 上工作，除非被迫，否则我从不使用 IE。

# assembly - x86 汇编器 cpuid 输出函数解析寄存器结果

> ID：14337868
> 
> 赞同：0
> 
> 时间：2013-01-15T12:34:59.043
> 
> 标签：assembly, x86, fasm, cpuid

我制作了一个 fasm 程序，`cpuid`输出为：

```
EAX -> 0x00000662
EBX -> 0x00000000
ECX -> 0x00000000
EDX -> 0x0383FBFF 
```

我使用`fprint`from`/lib/ld-linux.so.2`来显示这个输出。

所以我需要从`EAX`,... regs 中读取所有标志，并使用一些功能来查看所有规范。

这意味着从寄存器中读取位或制作一种`cpuid`输出结构。

你能给我一个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:23:54.303

虽然不是fasm，但请看一下Linux内核如何使用它（GNU asm）：

```
static inline void native_cpuid(unsigned int *eax, unsigned int *ebx,
                                unsigned int *ecx, unsigned int *edx)
{
        /* ecx is often an input as well as an output. */
        asm volatile("cpuid"
            : "=a" (*eax),
              "=b" (*ebx),
              "=c" (*ecx),
              "=d" (*edx)
            : "0" (*eax), "2" (*ecx)
            : "memory");
}

/* Some CPUID calls want 'count' to be placed in ecx */
static inline void cpuid_count(unsigned int op, int count,
                               unsigned int *eax, unsigned int *ebx,
                               unsigned int *ecx, unsigned int *edx)
{
        *eax = op;
        *ecx = count;
        __cpuid(eax, ebx, ecx, edx);
} 
```

最后将所有寄存器读入一个结构体：

```
struct cpuid_regs {
        u32 eax, ebx, ecx, edx;
};

static void cpuid_smp_cpuid(void *cmd_block)
{
        struct cpuid_regs *cmd = (struct cpuid_regs *)cmd_block;

        cpuid_count(cmd->eax, cmd->ecx,
                    &cmd->eax, &cmd->ebx, &cmd->ecx, &cmd->edx);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:19:28.227

从我非常古老的[内核项目](https://github.com/bmarcot/kemerald)中，并使用 GCC 汇编内联：

```
#define CPUID(VALUE, EAX, EBX, ECX, EDX)                            \
  __asm__ __volatile__ ("   cpuid                   \n\t"           \
                    "       movl    %%eax, %0       \n\t"           \
                    "       movl    %%ebx, %1       \n\t"           \
                    "       movl    %%ecx, %2       \n\t"           \
                    "       movl    %%edx, %3"                      \
                    : "=m" (*EAX), "=m" (*EBX), "=m" (*ECX), "=m" (*EDX) \
                    : "a" (VALUE)                                   \
                    : "%ebx", "%ecx", "%edx"                        \
                    ); 
```

顺便说一句，我不确定你在寻找什么......

# javascript - 要映射的 javascript 对象

> ID：14337870
> 
> 赞同：-3
> 
> 时间：2013-01-15T12:34:59.807
> 
> 标签：javascript, map, javascript-objects

我有一个对象列表

```
{
  "list": {
    "item": [
      {
        "id": "12",
        "value": "abc"
      },
      {
        "id": "34",
        "value": "pqr"
      }
    ]
  }
} 
```

并想将其转换为地图

```
{"12": "abc", "34","pqr"} 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:39:33.660

```
myObject.list.item.forEach(function(item){
  myMap[item.id] = item.value;
} 
```

像这样的东西会这样做......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:38:18.990

`for`循环是最简单的方法：

```
var result = {};
for (var i = 0; i < obj.list.item.length; i++) {
    result[obj.list.item[i].id] = obj.list.item[i].value;
}
console.log(result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T12:38:36.307

在 php 中使用 jsondecode 在数组或列表中进行转换，或者在 c# 中使用带反序列化的类进行转换（http://stackoverflow.com/questions/2546138/deserializing-json-data-to-c-sharp-using-json-net）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T20:30:05.947

我会做这样的事情：

```
function map(list, key, value){
    var result = {};
    for(i in list){
        result[list[i][key]] = list[i][value];
    }
    return result;
} 
```

然后用你的对象：

```
var list =  {
  "list": {
    "item": [
      {
        "id": "12",
        "value": "abc"
      },
      {
        "id": "34",
        "value": "pqr"
      }
    ]
  }
} 
```

我可以这样调用函数：

```
map(list["list"]["item"],"id","value") 
```

它会返回： { 12: "abc", 34: "pqr" }

# php - DOM XML解析限制结果值

> ID：14337873
> 
> 赞同：0
> 
> 时间：2013-01-15T12:35:31.820
> 
> 标签：php, dom, xml-parsing

我对此感到困惑，无法在网上找到答案。我想使用 DOM 来加载 XML。我有一个具有以下方案的 XML：

```
<type1>
   <other>...</other>
   <number>bla</number>
   <other>...</other>
</type1>
<type1>
   <other>...</other>
   <number>bla</number>
   <other>...</other>
</type1>
...
<type2>
   <other>...</other>
   <number>bla</number>
   <other>...</other>
</type2>
<type2>
   <other>...</other>
   <number>bla</number>
   <other>...</other>
</type2> 
```

type1 和 type2 的数据都出现多次。标签号出现在这两种类型中。当我使用

```
$searchNode = $xmlHandler->getElementsByTagName("number"); 
```

我得到这两种类型的数字。我怎样才能只得到 type1 或 type2 的数字？

更新：根据 Kami 和 Ikku 的建议，我已经为 DOM 解决了这个问题。在工作代码下方：

```
<?php  
$xmlHandler = new DOMDocument();
$xmlHandler->load("xmldocumentname.xml");

$xpath = new DOMXPath($xmlHandler);
$searchNodes = $xpath->query("/type1");
foreach( $searchNodes as $searchNode ) { 
    $xmlItem = $searchNode->getElementsByTagName("number"); 
    $number = $xmlItem->item(0)->nodeValue; 
    $xmlItem = $searchNode->getElementsByTagName("other"); 
    $other = $xmlItem->item(0)->nodeValue; 

    echo "NUMBER=" . $number . "<br>";
    echo "OTHER=" . $other . "<br>";

}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:42:39.620

您需要扩展搜索以允许父级的特定值。将`getElementsByTagName`您限制为您正在寻找的标签的名称，因此它无法进行一般搜索。使用更通用的搜索。我在下面的示例中`xpath`从`simplexml`库中使用。

```
$xmlHandler = simplexml_load_file("somexmlfile.xml");

$searchNode = $xmlHandler->xpath("type1/number"); // Gets type1 numbers
$searchNode = $xmlHandler->xpath("type2/number"); // Gets type2 numbers 
```

对 DOM 做同样的事情 - 有一个额外的步骤来创建一个 xpath 对象，但这是使搜索更容易所必需的。

```
// Create new DOM object:
$dom = new DomDocument();
$dom->loadXML($xml);

$xpath = new DOMXPath($dom);
$searchNode = $xpath->query("type1/number");
$searchNode = $xpath->query("type2/number"); 
```

以上内容未经测试；所以根据需要修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:41:14.543

我想首先搜索所有必需的类型（1 或 2），然后在该结果集上搜索所需的标记名。所以一个两步过程，可能合并在一行中，你必须检查你是否可以在两步工作时优化它。

# c# - 使用 LINQ 从类层次结构中选择项

> ID：14337887
> 
> 赞同：0
> 
> 时间：2013-01-15T12:36:20.793
> 
> 标签：c#, linq, .net-4.0

所有，我有一个 SQL 数据库类结构，如

```
public class Database : ISqlObject, IComparable<Database>, IEquatable<Database>
{
    public string Name { get; set; }
    public ISqlObject Parent { get; set; }
    public string Filename { get; set; }
    internal List<Schema> Schemas { get; set; }
    internal List<Table> Tables { get; set; }
    internal List<Constraint> Constraints { get; set; }

    public Database(string name, string filename)
    {
        this.Name = name;
        this.Parent = (ISqlObject)this;
        this.Filename = filename;
    }
    ...
}

protected internal class Table : ISqlObject, IComparable<Table>
{
    public string Name { get; set; }
    public ISqlObject Parent { get; set; }
    public List<Column> Columns { get; set; }
    ...
}

protected internal class Column : ISqlObject, IComparable<Column>
{
    public string Name { get; set; }
    public ISqlObject Parent { get; set; }
    public string Type { get; set; }
    public int MaxLength { get; set; }
    public bool IsNullable { get; set; }
    public bool HasConstraints { get; set; }
    public List<Constraint> Constraints { get; set; }
    ...
}

protected internal class Constraint : IComparable<Constraint>
{
    public string Name { get; set; }
    public ISqlObject Parent { get; set; }
    public bool IsPk { get; set; }
    public string LinkedConstraintName { get; set; }
    public string LinkedColumnName { get; set; }
    public string LinkedTableName { get; set; }
    ...
} 
```

省略号代表`IComparable`实现和构造函数等。

我有以下代码使用 LINQ 返回当前列的相应约束，但我一直得到`linkedConstraints = null`

```
foreach (SqlServer.Column column in tableIndexDict[i].Columns)
{
    if (column.HasConstraints)
    {
        var linkedConstraints = 
            from table in database.Tables 
            from c in table.Columns 
            from con in c.Constraints 
                where con.LinkedTableName.Equals(tableIndexDict[i].Name) && 
                        con.LinkedColumnName.Equals(column.Name) 
            select con;
        foreach (SqlServer.Constraint c in linkedConstraints) <= HERE NullReference Exception.
        { 
```

我在这里做错了什么？

注意：堆栈跟踪：

```
at System.Linq.Enumerable.<SelectManyIterator>d__31`3.MoveNext()
at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
at UserCost.Export.QlikViewExporter.BuildExclusionTable(Database database) in 
f:\UserCost\UserCost\UserCost\Export\SqlDataExportFactory.cs:line 302 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:40:02.270

`linkedConstraints`在这种情况下永远不可能`null`，因为它是 lambda。

您可以使用以下方法检查是否存在链接约束：

```
linkedConstraints.Any(); 
```

**编辑**

您必须检查检索到的数据。我假设`con.LinkedTableName`or`con.LinkedColumnName`为空。

# php - 禁用 PHP 魔术引号以删除由 mysql_real_escape_string 引起的斜线

> ID：14337890
> 
> 赞同：0
> 
> 时间：2013-01-15T12:36:57.220
> 
> 标签：php

我总是从我放入 mysql_real_escape_string 的任何变量中得到**\（反斜杠） 。**例如 ：

```
$string = mysql_real_escape_string($_GET['string']);
echo $string; //result : here\'s the text 
```

在我对谷歌做了一些研究之后，有人说这个反斜杠是由打开了 magic_quotes_gpc 的服务器设置引起的。我也有这个配置。我在我的`phpinfo(), magic_quotes_gpc = ON`

我的问题是......关闭这个magic_quotes_gpc真的安全吗？
因为我使用 mysql_real_escape_string 来防止 mysql 注入。通过关闭magic_quotes_gpc，恐怕这会导致我的服务器“不那么强大”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:24:55.637

在我看来，您需要对这些科目进行一些相当基本的补习。您显然已经在互联网上阅读并遵循示例，但没有真正理解这些示例为什么正在做它们正在做的事情，或者它们是如何工作的。复制示例而不理解它们不是一件好事。

所以在核心你需要对主题有更深入的了解，这对于像这样的网站来说可能太多了（SO更多的是帮助人们解决特定问题而不是教他们整个主题，尽管你会从浏览地点）。

但是，我将解决您的一些观点：

*   Magic Quotes 是一个过时的 PHP 功能；事实上，它已从最新版本的 PHP 中完全删除。禁用它**不会**使您的服务器“不那么强大”，或任何类似的东西。事实上，建议不要使用它。

*   所有以开头的功能`mysql_`也已被弃用，不再推荐。较新的替代方案是`mysqli_xxx()`函数或 PDO 库。如果您正在学习使用旧功能的教程，您应该找到更新的教程。

*   该`mysql_real_escape_string()`函数（和 mysqli/PDO 等效函数）旨在向您的字符串添加一个斜杠，它会在其中找到引号字符或其他会导致 SQL 语句无效的字符。运行此函数后在字符串中查找斜线是完全正常且正确的。这称为“转义”字符串（因此是函数的名称）。字符串的“转义”版本只能在构建 SQL 查询的上下文中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:39:41.863

只要您的代码负责正确转义某些字符串（例如通过调用`mysql_real_escape_string()`等），您就可以在 php.ini 中禁用此功能。事实上，您应该始终确保您的运行环境设置为您需要的参数，方法是调整`php.ini`或使用`.htaccess`为特定虚拟主机设置它们。

依赖所有这些`magic_...`东西从一开始就被打破了，因为一旦它被关闭，你基本上就会遇到问题。通常不会被注意到，除非你被黑了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:39:34.850

你期望`mysql_real_escape_string`做什么？

它正在转义字符串，`here\'s the text`预期的输出也是如此。这与魔术引号无关，魔术引号已经转义了字符串，`here\\'s the text`在调用`mysql_real_escape_string`.

* * *

当然，正如评论中已经提到的那样，您不应该再使用`MySQL_*`PHP 中的方法系列，因为它们已被[弃用](http://uk.php.net/manual/en/mysqlinfo.api.choosing.php)。考虑使用`MySQLi`or`PDO`代替，以及准备好的语句。

# wso2 - 安装 HTTPD 日志分析示例时出错

> ID：14337894
> 
> 赞同：2
> 
> 时间：2013-01-15T12:37:10.800
> 
> 标签：wso2, wso2bam

我与 BAM 合作了这么多天，突然间我什至无法做一个简单的示例（HTTPD 日志分析示例），如 BAM 2.0.1 文档中所示。我没有改变偏移量。

我正在采取的步骤是：

- 在 linux 中启动 BAM 服务器

- 从 $WSO2_BAM_HOME/samples/httpd-logs/resources 目录中读取 access.log

- 在管理控制台中安装“HTTPD 日志和分析”工具箱

现在在安装时我遇到了一个配置单元脚本错误::

“执行 Hive 脚本时出错。查询返回非零代码：9，原因：失败：执行错误，从 org.apache.hadoop.hive.ql.exec.DDLTask 返回代码 1”

你能告诉我哪里出错了吗？

后端的错误是

```
ERROR {org.apache.hadoop.hive.ql.exec.Task} -  FAILED: Error in metadata: MetaException(message:Unable to connect to the server org.apache.hadoop.hive.cassandra.CassandraException: unable to connect to server)
org.apache.hadoop.hive.ql.metadata.HiveException: MetaException(message:Unable to connect to the server org.apache.hadoop.hive.cassandra.CassandraException: unable to connect to server)
        at org.apache.hadoop.hive.ql.metadata.Hive.createTable(Hive.java:546)
        at org.apache.hadoop.hive.ql.exec.DDLTask.createTable(DDLTask.java:3479)
        at org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:225)
        at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:133)
        at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:57)
        at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1334)
        at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1125)
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:933)
        at org.apache.hadoop.hive.service.HiveServer$HiveServerHandler.execute(HiveServer.java:201)
        at org.apache.hadoop.hive.jdbc.HiveStatement.executeQuery(HiveStatement.java:187)
        at org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl$ScriptCallable.call(HiveExecutorServiceImpl.java:325)
        at org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl$ScriptCallable.call(HiveExecutorServiceImpl.java:225)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: MetaException(message:Unable to connect to the server org.apache.hadoop.hive.cassandra.CassandraException: unable to connect to server)
        at org.apache.hadoop.hive.cassandra.CassandraManager.openConnection(CassandraManager.java:118)
        at org.apache.hadoop.hive.cassandra.CassandraStorageHandler.preCreateTable(CassandraStorageHandler.java:168)
        at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.createTable(HiveMetaStoreClient.java:397)
        at org.apache.hadoop.hive.ql.metadata.Hive.createTable(Hive.java:540)
        ... 16 more

FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask
[2013-01-16 20:03:01,464] ERROR {org.apache.hadoop.hive.ql.Driver} -  FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask
[2013-01-16 20:03:01,470] ERROR {org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl} -  Error while executing Hive script.
Query returned non-zero code: 9, cause: FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask
java.sql.SQLException: Query returned non-zero code: 9, cause: FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask
        at org.apache.hadoop.hive.jdbc.HiveStatement.executeQuery(HiveStatement.java:189)
        at org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl$ScriptCallable.call(HiveExecutorServiceImpl.java:325)
        at org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl$ScriptCallable.call(HiveExecutorServiceImpl.java:225)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
[2013-01-16 20:03:01,473] ERROR {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask} -  Error while executing script : httpd_logs_script_507
org.wso2.carbon.analytics.hive.exception.HiveExecutionException: Error while executing Hive script.Query returned non-zero code: 9, cause: FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask
        at org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl.execute(HiveExecutorServiceImpl.java:110)
        at org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask.execute(HiveScriptExecutorTask.java:60)
        at org.wso2.carbon.ntask.core.impl.TaskQuartzJobAdapter.execute(TaskQuartzJobAdapter.java:56)
        at org.quartz.core.JobRunShell.run(JobRunShell.java:213)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
[2013-01-16 20:03:09,139]  INFO {org.wso2.carbon.core.services.util.CarbonAuthenticationUtil} -  'admin@carbon.super [-1234]' logged in at [2013-01-16 20:03:09,139+0530] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:41:29.507

您能否从服务器日志中发布完整的错误跟踪？

无法发现“执行 Hive 脚本时出错。查询返回非零代码：9，原因：失败：执行错误，从 org.apache.hadoop.hive.ql.exec.DDLTask 返回代码 1”的根本原因，需要完整的异常跟踪来找出根本原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:15:00.997

似乎 Hive 无法连接到 cassandra。如果您已使用任何偏移量启动 BAM 服务器，则 casssandra 端口也将更改为 9160+<port-offset>。请将“cassandra.port”替换为 9160+<port-offset>。

此外，您可能需要删除 Httpd_log_script 中提到的 Hive 表，以反映更改。这是因为，您已经运行了脚本，并且特定表名的表定义已经存储并且不会尝试再次创建它，因为如果不存在则在脚本中创建表。（如果不存在则创建外部表） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T10:18:38.840

连接到服务器似乎有问题。您是否更改了用户名或密码？（默认用户名和密码分别为*admin*和*admin*）

而且，如果您使用不同的架构创建相同的现有 Hive 表，则必须在*CREATE ....*之前删除现有表。正如辛图亚所说的那样。

例如：删除表*table1*，

```
drop table table1; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T05:50:42.510

您可以先尝试 BAM 2.0.1 中的 HTTPD 日志示例吗？您可以按照 /samples/httpd-logs/README.txt 中的说明进行操作。它运作良好。这些是该文件中给出的说明；

1.  启动 WSO2 BAM 服务器
2.  通过控制台转到 $WSO2_BAM_HOME/samples/httpd-logs 目录
3.  从控制台输入“ant”（这将从 $WSO2_BAM_HOME/samples/httpd-logs/resources 目录读取 access.log 并将每个日志行作为事件发送）
4.  转到 WSO2 BAM 服务器的管理控制台。
5.  转到主 -> BAM 工具箱 -> 添加。选择“HTTPD 日志分析工具箱”并单击安装按钮。
6.  转到主 -> BAM 工具箱 -> 列表。等到“HTTPD 日志分析工具箱”工具箱状态更改为已安装。
7.  等待一段时间，直到脚本完成发布数据后的第一次运行（脚本将在每分钟运行一次）。
8.  单击 Main -> Gadgets -> View portal 以查看填充的小工具，其中显示来自不同国家/地区的请求的摘要。

# javascript - 如何使用 jQuery 创建用于在 Javascript 中的两个按钮之间切换的高效代码？

> ID：14337895
> 
> 赞同：3
> 
> 时间：2013-01-15T12:37:32.410
> 
> 标签：javascript, jquery

我正在寻找一种使用 javascript 和 jQuery 在两个按钮之间有效切换的方法。

# 范围

当单击是或否时，对面的按钮将获得一个`disabled`CSS 类，而单击的按钮将获得一个`active`CSS 类。A`var`也将与`true` `false`稍后使用的值一起保存。

# html

```
<div id="buttons">
  <button id="yes">Yes</button>
  <button id="no">No</button>
</div> 
```

# js

```
function bindButtons(){
  var buttons = $('#buttons button');

  buttons.on('click', function(e){
    var $this = $(this);
    buttons.removeClass('selected');
    if($this.attr('id') == 'yes'){
      var el = $('#no'),
          val = true;
      $this.removeClass('disabled');
      $this.addClass('selected');
      el.addClass('disabled');
    }
    if($this.attr('id') == 'no'){
      var el = $('#yes'),
          val = false;
      $this.removeClass('disabled');
      $this.addClass('selected');
      el.addClass('disabled');
    }
    //do something with val
  })
}
bindButtons(); 
```

# jsFiddle

[http://jsfiddle.net/RobertSheaO/Tjngw/2/](http://jsfiddle.net/RobertSheaO/Tjngw/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T12:48:46.237

这应该可以作为`bindButtons`功能肉的替代品。

> ### 编辑
> 
> 显然，这也应该与多个按钮一起使用。深夜编码也是如此。> *_* >

```
var buttons = $('#buttons button').on('click', function (e) {

    var $this = $(this).removeClass('disabled').addClass('selected'),
        el = buttons.not(this).addClass('disabled'),
        isYes = $this.is('#yes')
        ;

    // do something with isYes

}); 
```

[jsFiddle](http://jsfiddle.net/Tjngw/5/)

它对我来说是完全可读的，但它可能不适合你，所以如果你愿意，这可能会更好：

```
var buttons = $('#buttons button').on('click', function (e) {

    var $this = $(this),
        el = buttons.not(this),
        isYes = $this.is('#yes')
        ;

    $this.removeClass('disabled');
    $this.addClass('selected');
    el.addClass('disabled');

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T13:24:46.417

我建议在您的 html 中使用 html5 data- 属性作为答案和一些 jquery 切换。

# html

```
<div id="buttons">
    <button id="yes" data-answer="true">Yes</button>
    <button id="no" data-answer="false">No</button>
</div> 
```

使用 jQuery 很容易切换：

# Javascript

```
// Bind events to your buttons
var bindButtons = function(){

    $('#buttons').on('click', 'button', function( e ){

        e.preventDefault();

        $(this)
            .addClass('selected');
            .siblings()
            .removeClass('selected')
            .addClass('disabled');
    });

};

// Init binding
bindButtons();

// Get your answer
var answer = $('#buttons .selected').data('answer'); 
```

# 演示

[在 jsbin 上试试](http://jsbin.com/inowef/2)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T12:54:10.423

```
function bindButtons(){
  var buttons = $('#buttons button');

  buttons.on('click', function(e){
    var $this = $(this);
    buttons.removeClass('selected').addClass('disabled');
    $this.addClass('selected').removeClass('disabled');

    switch ($this.attr('id')){
        case 'yes': 
            val = true;
            break;
        case 'no': 
            val = false;
            break;
    }
    //do something with val
  })
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T12:56:22.320

```
function bindButtons(){
  $('#buttons button').click(function(e){ 
    var thisObj = $(this);
    $('#buttons').removeClass('selected');
    thisObj.removeClass('disabled').addClass('selected').siblings().addClass('disabled');
    var val = thisObj.attr('id')=='yes' ? true : false;    
    //do something with val
  })
}
bindButtons(); 
```

[http://jsfiddle.net/Tjngw/6/](http://jsfiddle.net/Tjngw/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T13:31:54.290

尝试这个：

```
$("#buttons button").on('click', function(e) {
    $(".selected").removeClass('selected');

    var el;

    if($this.attr('id') == 'yes'){
        val = true;

        el = $("#no");
    } else {
        val = false;

        el = $("#yes");
    }

    $this.removeClass('disabled').addClass('selected');
    el.addClass('disabled');
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T12:46:41.033

希望这会有所帮助。`.not()`我通常使用jQuery`$(this).`

```
$('#buttons button').click(function() {
    $('#buttons button').not($(this)).removeClass('enabled').addClass('disabled');
    $(this).removeClass('disabled').addClass('enabled');

    var selected = $(this).attr('id'); // To use the id, or to use text use:
    var selected = $(this).text();  // No need for ids, grabs the text of element
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-15T12:41:51.977

你可以做一些事情，比如缩短：

```
$this.removeClass('disabled');
$this.addClass('selected'); 
```

至：

```
$this.removeClass('disabled').addClass('selected'); 
```

并且可能将第二个更改`if(){`为`else{`

除了这样的缩短之外，除非此代码将浏览器向下拖动（不是），否则它没有任何问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-15T12:50:16.993

你可以尝试这样的事情：

```
function bindButtons(){
  var buttons = $('#buttons button');

  buttons.on('click', function(e){
    var $this = $(this);
    var el = $this;
    var val = $this.attr('id') === 'yes';
    buttons.removeClass('selected disabled');
    $this.addClass('selected')
      .siblings('button').addClass('disabled');

    //do something with val
  })
} 
```

它至少删除了 if 语句。

# css - 如何更改滑块的背景颜色（类型=“范围”）

> ID：14337896
> 
> 赞同：0
> 
> 时间：2013-01-15T12:37:33.047
> 
> 标签：css, html

我使用 type = "range" 作为滑块。问题是我的背景 div 是黑色的，因此什么都看不到.. 只有点是可见的，我可以单击并滑动它。

知道如何改变它吗？

# c# - 从本地数据库中选择数据

> ID：14337902
> 
> 赞同：2
> 
> 时间：2013-01-15T12:37:37.810
> 
> 标签：c#, windows-phone-8, local-database

我正在尝试获取存储在本地数据库中的数据。我正在使用这样的东西：

```
// Connect to the database and instantiate data context.
tablesDB = new TablesDataContext(TablesDataContext.DBConnectionString);    

// Define the query to gather all of the items.
var CategoriesTablesInDB = from CategoryItem todo in tablesDB.CategoriesTable
                                           select todo;

// Execute the query and place the results into a collection.
CategoriesTable = new ObservableCollection<CategoryItem>(CategoriesTablesInDB); 
```

但是我`CategoriesTable`在这样做之后有 count = 0 ，并且`CategoriesTablesInDB`里面有它的 sql 查询。我是 Windows Phone 新手，如果这样做是正确的方法，我不会。是我的查询有问题，还是我做得不对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:07:03.917

Sadly, can't help you with exact answer. But if you are just getting started you could also try store data in SQLite instead of native local database. It helps you build cross-platform applications in future and has a wide community support.

# jquery - 摆脱浏览器控制台中的 401（未经授权）ajax 错误

> ID：14337904
> 
> 赞同：11
> 
> 时间：2013-01-15T12:37:42.007
> 
> 标签：jquery, http, browser, http-status-code-401

我正在使用[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)调用通过 javascript 调用 api。如果用户未通过身份验证，则 api 会以 401 响应，并且我只想在此调用中忽略此错误。

我已经尝试了 jQuery 选项中描述的所有回调选项，但错误仍然会在浏览器控制台中弹出（在 Firefox 和 Chrome 中）。

这是触发错误的示例代码：

```
$.ajax({
    type: 'GET',
    url: '/url-with-auth',
    dataType: 'json',
    statusCode: {
        401: function (error) {
            // simply ignore this error
            console.log(error);
        }
    },
    complete: logall,
    error: function () {
        // simply ignore this error
        console.log(error);
    },
    async: false
}).fail(function () {
        // ignore the error and do nothing else
        console.log("$.get failed!");
    }); 
```

这也具有在受 .htaccess 文件保护的登台机器上再次请求用户凭据的副作用，因为浏览器认为用户未经过身份验证，因此在以下请求中，用户需要重新输入他的 http 凭据。

有没有办法完全忽略这个错误？

# 编辑

目前我有一个完全缓存应用程序端的 HTML 模板，出于性能原因，我想保留这种行为。布局中唯一更改的部分是当前用户的登录信息，因此我使用未登录用户的默认标记呈现（缓存）页面，然后使用 jQuery 我将标记的相关元素替换为ajax 调用返回的登录信息。因此，如果用户未登录并且 ajax 端点返回 401 我不需要任何东西，则标记应该保持不变。

此时一切正常，唯一丑陋的是我在控制台中有 401 javascript 错误，我想摆脱它。

这是我正在谈论的消息的屏幕截图：

![控制台错误](../Images/fe90c274c8d39e9d490091973d7e45e4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:58:21.880

我也遇到了这个问题，想在 JavaScript 控制台中抑制 HTTP 401 和 404 等错误的异常。我发现了这个问题，但不明白为什么 error() 和 statusCode() 处理程序没有消除异常，所以我自己研究了它。

据我所知，这是浏览器中本机 ajax XMLHttpRequest 对象的问题，而不是 jQuery。为了证明这一点，我使用了以下测试代码：

```
function xhrTest(index) {
    var ajaxObjects = [
        $.ajaxSettings.xhr(), // what jquery returns
        new XMLHttpRequest()  // the native one in the browser
    ];
    var ajax = ajaxObjects[index];
    ajax.onreadystatechange = function() {console.log("xhrTest: state: " + ajax.readyState)};
    var errorHandler = function() {console.log("xhrTest: error");};
    ajax.onerror = errorHandler;
    ajax.onabort = errorHandler;
    ajax.open("GET", "/fileThatDoesNotExist", true);
    ajax.send();    
} 
```

请注意，当使用绕过 jQuery 的 xhrTest(0) 或 xhrTest(1) 调用（我从 JavaScript 控制台执行此操作）时，结果是相同的：

![无论是否使用 jQuery，结果都相同](../Images/de8ed87a33863e61bce04a04b27e527d.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-15T17:24:19.217

您可以在页面上添加一个隐藏字段（我猜它是动态生成的），例如：

```
<input type="hidden" name="isLoggedIn" value="true" (or false) /> 
```

然后在你的javascript中，放置

```
if ($('input[name=isLoggedIn"]').val() == "true")
{
     //your ajax call here
} 
```

# matlab - 如何在 Simulink 中以矩阵为源对列进行插值

> ID：14337906
> 
> 赞同：1
> 
> 时间：2013-01-15T12:37:50.633
> 
> 标签：matlab, simulink

我有 amxn 矩阵，我想将其用作 Simulink 中的源。源的输出应该是大小为 n 的列。数据需要在列之间进行插值。

例子：

源矩阵：

```
[ 2  4  8;
  3  6  9;
  5 10 15 ] 
```

此示例矩阵在不同时间输出的 simulink 模型：

```
t = 0 :         t = 0.5 : (interpolated)        t = 1 :
[ 2;            [ 3.0;                          [  4;
  3;              4.5;                             6;
  5 ]             7.5 ]                           10 ] 
```

该示例仅显示 t = [0, 0.5, 1.0] 的输出，但实际源需要是连续的。

我试过了`direct lookup table (n-D)`，但这个块不会在列之间插入。我尝试将`Interpolation Using Prelookup`块与块结合使用`Prelookup`，但我不明白如何使用这些块。

# android - android，checkedTextView：不同宽度的复选标记

> ID：14337911
> 
> 赞同：1
> 
> 时间：2013-01-15T12:38:05.153
> 
> 标签：android, checkedtextview

我有 CheckedTextView 选择器：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@drawable/checkbox_checked" android:state_checked="true"/>
<item android:drawable="@drawable/checkbox_unchecked" android:state_checked="false"/>

</selector> 
```

当我有 2 个这样的已检查文本视图时，第一个未选中，另一个已选中，它看起来像这样：

![在此处输入图像描述](../Images/e8b0c278e68714841a5408e7766edb37.png)

您可以注意到，与选中状态相比，未选中状态下的边框更宽。根据我的资源，这些边框具有相同的宽度，但由于绘制橙色复选标记需要额外的像素，因此选中的资源更宽。

如何使边框看起来一样？有没有比使用 RelativeLayout + TextView + Checkbox 更有效的方法？

* * *

更新1，布局：

```
 <CheckedTextView
        android:id="@+id/saveVideoOnServer"
        style="@style/talCell.textView.checked"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/saveVideoOnServer" />
        android:background="@android:color/transparent"

    <CheckedTextView
        android:id="@+id/showMyPosition"
        style="@style/talCell.textView.checked"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/showMyPosition" /> 
```

它们在垂直线性布局内。我没有发布整个布局，因为它有 100 多行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:18:58.510

您需要使两个图像具有相同的宽度。在您提到的问题中，边框的宽度相同。如果您现在只是通过添加透明像素来使未检查的图像更宽，那么一切都应该有效。

总结一下：您需要两个相同大小的图像，具有相同的大小和相同的位置边框。

Android Source 也是如此，看看以下两个复选框图像：它们具有相同的大小（在 github 站点上更容易看到：[未选中](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-hdpi/btn_check_off_holo.png)，[选中](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-hdpi/btn_check_on_holo.png)）

![检查](../Images/9ec6b833f5ff951ebf752b39c411b481.png) ![未检查](../Images/df7b9b763cd3a0f103f5c769cf4c1bd7.png)

# java - linux中发生FileNotFoundException

> ID：14337912
> 
> 赞同：1
> 
> 时间：2013-01-15T12:38:06.127
> 
> 标签：java, linux, apache-poi, filenotfoundexception

我在 Linux 的以下路径下放置了“test.xls”文件

```
/usr/local/poi/template/test.xls 
```

然后，使用以下 java 代码访问上述 xls 文件

```
 FileInputStream in = new FileInputStream("/usr/local/poi/template/test.xls");
 Workbook wb = WorkbookFactory.create(in); 
```

但是当我运行这段代码时，我只得到`FileNotFoundException`.

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:41:07.453

linux 区分大小写，因此请确保您的路径拼写正确。此外，问题可能是权限，您可能会收到“访问被拒绝”。`chmod 777 fileName`应该对此有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:08:39.020

1.  检查文件路径（注意大小写，linux区分大小写）

2.  检查文件权限（您可以相应地修改权限） - 必须将文件权限授予运行程序的 java 进程的用户/用户组。

出于调试目的，给在文件上运行程序 777 的用户使用`chmod`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:46:27.853

这可能是路径`/usr/local/poi/template/test.xls`不可访问或文件本身不可访问。您应该确保`/usr/local/poi/template`运行您的 java 程序的用户可以访问所有目录，并且文件具有`a+r`访问模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T12:49:51.907

我认为问题可能是文件路径或权限问题。

1）要么尝试使用命令提示符中的相同路径打开文件，要么尝试使用 cat 命令作为`cat your current-file-path`.

2）还尝试列出该特定目录下的所有文件，并查看文件是否存在。

尝试任何一个都可以得到解决方案。

# php - Wordpress 中的 session_start 和 $_SERVER 变量

> ID：14337924
> 
> 赞同：0
> 
> 时间：2013-01-15T12:38:51.443
> 
> 标签：php, wordpress

我有一个客户希望 url referer 可以通过联系电子邮件发送。这已经奏效了，突然停止了一夜，不知道有什么问题。

遗憾的是，该平台是 Wordpress。

这在 header.php 中：

```
if(!session_id()){
 //session_destroy();
 session_start();
}

if(!isset($_SESSION['referer'])){
 if(isset($_SERVER['HTTP_REFERER'])&&!empty($_SERVER['HTTP_REFERER'])){
  $ref=strtolower($_SERVER['HTTP_REFERER']);
  if(strpos($ref,'facebook')!==false){$_SESSION['referer']="Facebook";$_SESSION['refererURL']=$ref;}
  elseif(strpos($ref,'google')!==false){$_SESSION['referer']="Google";$_SESSION['refererURL']=$ref;}
  else{$_SESSION['referer']="Web";$_SESSION['refererURL']=$ref;}
 }
} 
```

这是我的contact-us.php：

```
$referer=trim($_SESSION['referer']);
$refererURL=trim($_SESSION['refererURL']); 
```

根据代码，我应该根据用户来自哪里获得三个不同的引用，但我不断获得“Web”又名。没有指定推荐人。

我究竟做错了什么？

并澄清：

*   `session_start()`在 header.php 之前没有运行过，
*   `add_action( 'init', 'session_start' );`不工作，
*   没有产生错误，它只是保存了错误的引用，
*   这个确切的代码在 1 天前有效，现在它没有，据我所知，没有进行任何更改！

**编辑：** 我已将所有内容移至`$_COOKIE`变量并从 xmlrpc.php 中删除了条目，`$_COOKIE = array();`并且它正在工作。看来 wordpress 有一些奇怪的逻辑`$_SESSION`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:48:44.887

检查服务器配置。可能会发生您在服务器上的 php 版本可能已在没有提示的情况下更新，从而导致关闭全局变量。

您可以通过简单地上传包含以下代码的 php 文件来检查

```
 <?php
     phpinfo();
     ?> 
```

编辑：请参考以下链接 [http://php.net/manual/en/reserved.variables.php](http://php.net/manual/en/reserved.variables.php)

[http://php.net/manual/en/faq.using.php#faq.register-globals](http://php.net/manual/en/faq.using.php#faq.register-globals)

# function - 将值传递给 MatLab 中的函数

> ID：14337925
> 
> 赞同：0
> 
> 时间：2013-01-15T12:38:53.643
> 
> 标签：function, matlab

> **可能重复：**
> [Matlab 中的默认参数](https://stackoverflow.com/questions/795823/default-arguments-in-matlab)

我在matlab中有两个函数，test1和test2，如下图。

```
function [C,D] = test1(A,B)

A = 50;
B = 20;

C = A + B;
D = A - B;

end 
```

和

```
function test2

C = 1000;
D = 500;

[A,B] = test1(C,D);

display(A)
display(B)

end 
```

现在我想做的是在函数 test1 中为 A 和 B 设置默认值，但也能够将来自另一个函数（如函数 test2）的不同值传递给函数 test1。所以默认情况下在函数test1中将A和B设置为50和20，但是用函数test2可以将它们替换为1000和500，并获得等效的C和D结果（在1000和500的情况下，得到一个结果C 和 D 分别为 1500 和 500）

我怎样才能做到这一点？任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T12:42:17.803

您可以为此目的使用 Matlab [`varargin`](http://www.mathworks.com/help/matlab/ref/varargin.html)，例如

```
function [C,D] = test1(varargin)

A = 50;
B = 20;
if nargin > 0
  A = varargin{1};
end
if nargin > 1
  B = varargin{2};
end

C = A + B;
D = A - B;

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:46:38.120

有几种方法可以做到这一点

检查输入是否存在：

```
if(~exist('A'))
 A = default;
end 
```

注意使用exist('A') 而不是exist(A) - 如果A 由于没有被传递而不存在，那么这将引发错误。

或者

```
if(nargin < 2)
 B = default_b;
end
if (nargin == 0)
 A = default_a;
end 
```

这两种方法都有些凌乱，如果你有很多输入你想是可选的，那么你可以使用一个 matlab 类 inputParser

```
doc inputParser 
```

有关更多详细信息，我不在这里描述它，因为它非常全面（对于简单的情况可能有点过分）

# ruby-on-rails - 如何为包含 Devise update_with_password 方法的方法编写通过测试？

> ID：14337927
> 
> 赞同：2
> 
> 时间：2013-01-15T12:38:57.007
> 
> 标签：ruby-on-rails, testing, devise

我是 Devise 的新手，因为我已经使用了现有的应用程序。它使用 Devise 进行身份验证（无需确认）。我正在尝试为 users_controller 中的更新方法编写一个测试，它使用 update_with_password 方法。

我无法弄清楚我在这里做错了什么。要么我没有将正确的参数传递给请求（尽管我在之后通过开发和建模测试检查了它（除了表单的真实性_token）），或者出现了其他问题。

我正在使用 Test::Unit 和固定装置：

在 users_controller 中：

```
def update
    @user = current_account.users.find(params[:id])
    raise @user.valid_password?(params[:user][:current_password]).inspect
    if @user.update_with_password(params[:user])
      sign_in(@user, :bypass => true)
      flash[:notice] = flash_saved
      redirect_to edit_user_path(@user)
    else
      flash[:alert] = flash_not_saved
      render 'edit'
    end
  end 
```

在 users_controller_test 中：

```
test "should update user with password" do
    @user = users(:participant)
    sign_in(@user)
    assert_equal(true, @user.valid_password?('<password>'))
    put :update, {id: @user.id, method: :put, :user => {email: @user.email, password: nil, password_confirmation: nil, current_password: "<password>", firstname: "louis"}, subaccount: "test"}
  end 
```

在赛程中：

```
participant:
  email: participant@test.com
  id: 3
  confirmed_at: 2013-01-01 00:10:00
  account_id: 1
  firstname: participant
  last_sign_in_at: <%= Time.now - 30 %>
  encrypted_password: <encrypted_password>
  password_salt: <password_salt> 
```

尽管我从开发中的用户那里复制了 encrypted_pa​​ssword 和 password_salt，但测试中的断言返回 false。

开发中的请求参数：

```
{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"hy3IJ8C7qQs+iyxZ/VCnrVWEh9vecZCGrAuxwEWxWEE=",
 "user"=>{"email"=>"my@email.com",
 "firstname"=>"",
 "lastname"=>"",
 "gender"=>"",
 "phone1"=>"",
 "current_password"=>"[FILTERED]",
 "password"=>"[FILTERED]",
 "password_confirmation"=>"[FILTERED]"},
 "commit"=>"Opslaan",
 "subaccount"=>"experience",
 "id"=>"3087"} 
```

测试中的请求参数：

```
{"subdomain"=>nil, "method"=>"put", "user"=>{"email"=>"participant@test.com", "firstname"=>"louis"}, "id"=>"3", "subaccount"=>"test", "controller"=>"users", "action"=>"update"} 
```

不知何故，它没有显示：current_password，尽管我在请求中发送它。

我怎样才能让这个测试通过？非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T14:42:26.907

在第一次通过时，它看起来不错，除了一条线。

```
raise @user.valid_password?(params[:user][:current_password]).inspect 
```

尝试删除这条线，看看它是否通过。

# c++ - Poco 框架通知中心示例

> ID：14337928
> 
> 赞同：3
> 
> 时间：2013-01-15T12:39:01.130
> 
> 标签：c++, poco

我一直在尝试理解`Poco`框架并且我在 Linux 上（使用 Codeblocks IDE）

我特别想在我的程序中加入通知中心来发送全局通知，我也从这里的链接中读取了一些信息。
[http://www.appinf.com/docs/poco/Poco.NotificationCenter.html](http://www.appinf.com/docs/poco/Poco.NotificationCenter.html)但这也没有给出任何可靠的例子。

有人可以指出一个简单的例子，说明如何从某个特定的人发送通知并在单独的类中收听（？）这些通知>

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-24T06:50:19.143

我发现了 2 个示例，我认为这对您的问题很有帮助。

1.  从 Poco，请阅读[https://pocoproject.org/slides/090-NotificationsEvents.pdf](https://pocoproject.org/slides/090-NotificationsEvents.pdf)，它提供了一个简单的示例。

2.  [http://poco.roundsquare.net/2010/07/05/poconotificationcenter/](http://poco.roundsquare.net/2010/07/05/poconotificationcenter/)的一个很好的示例代码虽然是日语，但代码不是。:)

希望它对你来说足够好。祝你好运！

# ckeditor - 使用自定义数据源时无法将图像插入 xpage 富文本 ckeditor

> ID：14337929
> 
> 赞同：2
> 
> 时间：2013-01-15T12:39:04.137
> 
> 标签：ckeditor, xpages

我正在尝试在 xpage 应用程序中使用我自己的数据源。
数据源是一个托管 bean，它实现了`com.ibm.xsp.model.DataObject interface`.
一切正常，包括 中的文本`CKEditor`，除了`CKEditor`. 当您使用with a作为数据源
上传图像时，会出现以下情况：`CKEditor``DominoDocument`

1.  图片已上传。
2.  图像被保存在`DominoDocument`（或暂时保存在某个地方，直到文档被保存）
3.  在响应中将 javascript 回调发送回 CKEditor，例如

    ```
    window.parent.CKEDITOR.tools.callFunction(0, "/NestedRichText.nsf/xsp/.ibmmodres/persistence/DominoDoc-5-Body/list-remove_1358252554024.gif"); 
    ```

使用我的数据源，我看到上传图像时将类型的对象`com.ibm.xsp.component.UIInputRichtText.EmbeddedIMage`设置为字段上的值。 问题是我真的不知道如何处理这个对象。我查看了and对象，并看到了一些有前途的方法。但我无法让它发挥作用。`RichText`
`UIInputRichText``DominoDocument`

有没有其他人得到这个工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:36:52.450

目前，富文本控件仅支持 DominoDocument 数据源来处理嵌入的图像。不过，您可以创建自己的自定义解决方案 - 为此，您需要继承 XspInputRichText 以提供您自己的 processAjaxRequest 实现。需要一个 .xsp-config 文件来注册您的专用子类，以及子类实现。所有这些都可以在应用程序或单独的库中完成。如果您想了解有关实现此目的的更多详细信息，请直接给我发电子邮件。

请参阅以下 OpenNTF 项目以获取完整的示例：

[http://www.openntf.org/p/xpages%20rich%20text%20editor%20evolution](http://www.openntf.org/p/xpages%20rich%20text%20editor%20evolution)

# maven - 使用 maven 程序集排除文件不起作用

> ID：14337930
> 
> 赞同：9
> 
> 时间：2013-01-15T12:39:06.467
> 
> 标签：maven, maven-assembly-plugin

我有非常简单的程序集描述符

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
<id>dist</id>
<formats>
    <format>jar</format>
</formats>
<!-- copied from jar-with-dependencies -->
<includeBaseDirectory>false</includeBaseDirectory>
<dependencySets>
    <dependencySet>
        <outputDirectory>/</outputDirectory>
        <useProjectArtifact>true</useProjectArtifact>
        <unpack>true</unpack>
        <scope>runtime</scope>
    </dependencySet>
</dependencySets>

<fileSets>
    <fileSet>
        <directory>${project.build.outputDirectory}</directory>
        <outputDirectory>/</outputDirectory>
        <useDefaultExcludes>true</useDefaultExcludes>
        <excludes>
            <exclude>**/dbAccess.*</exclude>
        </excludes>
    </fileSet>
</fileSets> 
```

这主要是从[Maven Descriptor Refs](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html)复制的。但是我组装的 jar 仍然包含 dbAccess.* 文件。我尝试了各种排除配置。

*   更改目录：..build.directory}/classes
*   更改排除模式：dbAccess.*、**/*.properties、**/*

调试输出只是：

```
[DEBUG] The archive base directory is 'null'

[DEBUG] NOT reformatting any files in /media/truecrypt1/Development/workspace_java/baseanalysis/target/classes

[DEBUG] Adding file-set from directory: '/media/truecrypt1/Development/workspace_java/baseanalysis/target/classes'
assembly output directory is: ''

[DEBUG] Adding file-set in: /media/truecrypt1/Development/workspace_java/baseanalysis/target/classes to archive location: 
```

如果我将它放在 pom.xml 的构建部分中，则正常的资源过滤可以工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T12:32:23.813

您还需要过滤`dependencySet`。尝试将您的程序集描述符更新为

```
<dependencySet>
    <outputDirectory>/</outputDirectory>
    <useProjectArtifact>true</useProjectArtifact>
    <unpack>true</unpack>
    <scope>runtime</scope>
    <unpackOptions>
        <excludes>
            <exclude>**/dbAccess.*</exclude>
        </excludes>
    </unpackOptions>
</dependencySet> 
```

# linux - 提取与字符串匹配的所有列 awk sed python perl

> ID：14337932
> 
> 赞同：-1
> 
> 时间：2013-01-15T12:39:09.853
> 
> 标签：linux, sed

我有看起来像这样的数据

```
SNP     NA18524 NA18526 NA18529 NA18537 
Status  Low     Low  High    High    
Pop     ASN     ASN     CEU       YRI 
ENSG00000187634 6.425880        6.348570        6.464480        6.391740 
```

而且我只想匹配并打印找到字符串 ASN 的那些列

稍后我将只想匹配和打印 CEU，然后只打印 YRI

我想要类似的东西吗

```
 sed 'p/[ASN]//g' 
```

因此输出看起来像：

```
SNP     NA18524 NA18526 
Status  Low     Low      
Pop     ASN     ASN     
ENSG00000187634 6.425880        6.348570 
```

?

数据以制表符分隔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:49:53.980

在您在标题中提到的几种语言中，在 Python 中执行此操作可能是最不让人费解的。它应该很简单：只需读取行 ( `for line in open('myfile.tsv'):`)、标记化 ( `fields = line.split('\t')`)、匹配您的搜索字符串、跟踪您“喜欢”哪些列，然后再次执行整个操作，打印您现在知道需要的字段。

如果您在实施过程中遇到困难，您可能希望将其作为一个单独的、更具体的问题发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T13:13:54.723

**零优雅**......但它应该工作

```
awk -F'\t' ' { 
   if (found!=1) { 
       for(i=0;i<=NF;++i) { 
           if ($i=="ASN") { 
               # save which columns contains it
               idx[i] = 1; 
               found=1; 
           } 
       } 

       # at least one column found?
       if (found==1) { 
           # this 3 instructions will rewind the file
           ARGC++; 
           ARGV[ARGIND+1] = FILENAME; 
           nextfile; 
       } 
   } 
   else { 
       # printout the rows matching
       for (a in idx) 
           printf("%s ",$a); 
       printf("\n"); 
   } 
} ' yourfile 
```

# database - Scala Slick / ScalaQuery BigDecimal 创建小数（10,0）如何允许小数？

> ID：14337933
> 
> 赞同：11
> 
> 时间：2013-01-15T12:39:11.927
> 
> 标签：database, scala, playframework-2.0, scalaquery, slick

如何告诉 Slick 创建一个允许小数的 Decimal SQL 类型？
似乎默认情况下，Slick 不允许使用我在下面的代码中注意到的小数。`decimal(10,0)`它在 MySQL 中创建具有数据类型的列。

我的 Scala 代码中有以下模型：

```
import scala.slick.driver.MySQLDriver.simple._

case class TimeType(id: Option[Int], name: String,
  employeeMultiplier: BigDecimal, employerMultiplier: BigDecimal)

object TimeTypes extends Table[TimeType]("timeType") {
  def id = column[Int]("id", O.PrimaryKey, O.AutoInc)
  def name = column[String]("name")
  def employeeMultiplier = column[BigDecimal]("employeeMultiplier")
  def employerMultiplier = column[BigDecimal]("employerMultiplier")
  def * = id.? ~ name ~ employeeMultiplier ~ employerMultiplier <> (TimeType, TimeType.unapply _)
} 
```

在启动期间，我使用 Slick 创建此表，除非它已经存在此代码

```
...
lazy val database = Database.forDataSource(DB.getDataSource())

database.withSession {
  if (MTable.getTables("timeType").list.isEmpty) {
    TimeTypes.ddl.create
    ... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T14:39:28.103

这并不理想，但你可以试试这个：

```
def employeeMultiplier = 
  column[BigDecimal]("employeeMultiplier", O.DBType("decimal(10, 4)")) 
```

MySQL 只接受`DECIMAL`，在这种情况下，它使用它的默认值创建字段，恰好是`DECIMAL(10, 0)`. 我不确定是否有任何其他方法可以告诉 Slick/ScalaQuery 您需要为您的字段提供某些选项。

# compass-sass - Susy / Compass 移动优先网格不适用于移动设备

> ID：14337937
> 
> 赞同：0
> 
> 时间：2013-01-15T12:39:19.073
> 
> 标签：compass-sass, susy-compass

我最近做了一个快速投资组合网站，我仍在调整中，但我使用了一个 susy 网格，当我使用浏览器将其调整为更小时，它仍然看起来像我预期的那样。本质上我有三个断点，一个用于浏览器，一个用于平板电脑，一个用于手机。

唯一的问题是，当我将它加载到我的手机 (HTC Desire) 上时，缩放似乎很远，并且它的大小就像中间断点（平板电脑）一样。

我设置的休息时间是：

```
$break-medium: 30em $total-columns;
$break-large: 60em $total-columns; 
```

网站在[这里](http://www.carriehall.co.uk)

我还注意到，当您放大网站时，您需要水平滚动，这是我试图避免的！实际上 Susy 网站也不这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:07:45.027

这实际上与 Susy 或正确设置断点无关。默认情况下，移动 Safari 的视口宽度为 980 像素，因此它可以处理对移动设备不友好的网站。如果你建立了一个适合移动设备的网站，你必须让 Safari 知道。例如，请参阅[iphone safari 上的自动缩放](https://stackoverflow.com/questions/1223591/automatic-zoom-on-iphone-safari)。你可能想要这样的东西：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:08:18.787

嘉莉，

我不知道您的 HTC Desire 的分辨率 - 但我用来检查响应式设计的“断点”是否正确分解的一种工具是：

[http://www.josscrowcroft.com/2011/code/window-size-bookmarklet/](http://www.josscrowcroft.com/2011/code/window-size-bookmarklet/) https://github.com/josscrowcroft/Window-Size-Bookmarklet

它是张贴视口大小的书签。但是，在带有 google chrome 的 mac 上，我发现这个数字“关闭”了大约与滚动条宽或类似的像素数量相同的像素。所以它并不完美 - 但它确实有助于解决问题。

我会查看您的 em 是否与您预期的分解像素宽度相匹配，看看是否与您的 HTC 相匹配 - 并且 EM 可能会在此过程中搞砸（浏览器设置、您的 html 对象没有正确的设置等。 ）。您始终可以尝试通过将其设置为固定像素宽度进行测试，然后再次对 em(s) 进行所有数学运算。

我不确定这是否有帮助，但至少你现在还有一个工具可以选择（如果你已经不知道这个工具；）

祝你好运，干杯，-杰里米

# c# - 为图像创建可填充模板

> ID：14337938
> 
> 赞同：0
> 
> 时间：2013-01-15T12:39:25.640
> 
> 标签：c#, template-engine

我需要设计一些将优惠券作为附件通过电子邮件发送的东西。对于每种不同的优惠券价值，我都有一组图像 - 10 美元、50 美元等。

在这些图像上有优惠券代码、到期日期和客户姓名的字段。

我需要定义字段位置并操作原始图像以在其上“打印”信息，然后我可以将其附加到电子邮件中。我认为pdf附件也是可以接受的。

我希望能够存储每种优惠券的字段坐标，以便我可以轻松地重复使用和调整它。

我不知道从哪里开始 - 设计这个的最佳方法是什么？图像是处理此问题的最佳方法吗？其他技术如 pdf、html 模板等呢？

# sql - oracle存储过程插入多条记录

> ID：14337939
> 
> 赞同：-1
> 
> 时间：2013-01-15T12:39:30.417
> 
> 标签：sql, oracle, plsql

在下面的过程中，我想为approval_log_id 列插入多个id 记录，该列是approval_redirect_log 表的外键。

我从另一个表approval_log 中获取approval_log_id。第一列的选择查询返回多个id，应该与其他数据一起插入。必须为所有 id 重复其他列数据。

我在第一列做错了什么？

```
 PROCEDURE REDIRECT_APPROVAL_LOG_INSERT(
vAPPROVAL_LOG_ID approval_redirect_log.approval_log_id%type,
vREDIRECTED_FROM APPROVAL_REDIRECT_LOG.redirected_from%type,
vREDIRECTED_TO APPROVAL_REDIRECT_LOG.redirected_to%type,
vREDIRECTED_BY approval_redirect_log.redirected_by%type) AS

  BEGIN

   INSERT INTO APPROVAL_REDIRECT_LOG(
     APPROVAL_LOG_ID,
     REDIRECTED_FROM,
     REDIRECTED_TO,
     REDIRECTED_BY,
     REDIRECTED_ON) 
  VALUES
  (select approval_log_id 
   from approval_log 
   where accept_reject is null and approval_recid=vREDIRECTED_FROM
   ,
  vREDIRECTED_FROM,
  vREDIRECTED_TO,
  vREDIRECTED_BY,
  sysdate
  );

  END REDIRECT_APPROVAL_LOG_INSERT; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:49:18.927

你应该：

```
INSERT INTO APPROVAL_REDIRECT_LOG(
     APPROVAL_LOG_ID,
     REDIRECTED_FROM,
     REDIRECTED_TO,
     REDIRECTED_BY,
     REDIRECTED_ON) 
select    approval_log_id, 
          vREDIRECTED_FROM,
          vREDIRECTED_TO,
          vREDIRECTED_BY,
          sysdate
from approval_log 
where  
     accept_reject is null 
     and approval_recid=vREDIRECTED_FROM; 
```

# android - 在应用程序图标android中显示未读消息计数

> ID：14337942
> 
> 赞同：2
> 
> 时间：2013-01-15T12:39:36.840
> 
> 标签：android, messaging

![如何在我们的应用程序中实现未读消息通知，如消息传递？](../Images/ea382e5e214f18653fa0b7ff70b0e1dd.png)

如何在我们的应用程序中实现未读消息通知，如消息（如图）？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-15T13:26:32.743

```
public int getNumberOfUnreadMessages(Context context) {

   final Uri SMS_INBOX_URI = Uri.parse("content://sms/inbox");
   Cursor inboxCursor = context.getContentResolver().query(SMS_INBOX_URI, null, "read =  
    0", null, null);
   int unreadMessagesCount = inboxCursor.getCount();
   inboxCursor.close();
   return unreadMessagesCount;
   } 
```

# git - 如何使用他们的更改解决樱桃挑选冲突？

> ID：14337945
> 
> 赞同：131
> 
> 时间：2013-01-15T12:39:40.803
> 
> 标签：git

我`git cherry-pick FOO`产生了冲突。

我可以浏览冲突文件并删除 and 之间的行`<<<<<<<`，`=======`以及冲突标记本身，但我希望有一种更简单的方法。

我认为`svn`等效的是选择`theirs-conflict`解决。

我该怎么做`git`？

我不想，因为这似乎会`git checkout --theirs <file>`产生与应用相同的结果。`git checkout foo <file>``git diff FOO~..FOO <file>`

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2013-01-15T14:12:27.583

首先，您应该撤消您的樱桃选择，尝试运行它

```
git cherry-pick --abort 
```

其次，尝试进行挑选，但此时您得到的更改不是您的更改，因此请执行以下操作：

```
git cherry-pick --strategy=recursive -X theirs {Imported_Commit} 
```

# c# - 缺少“管理私钥”选项

> ID：14337947
> 
> 赞同：30
> 
> 时间：2013-01-15T12:39:42.060
> 
> 标签：c#, wcf, wcf-security, x509certificate

我正在开发 WCF 服务，其传输安全托管在 Windows 2008R2 下的 IIS 7.5 上。我有一个证书，在 IIS 7.5 中生成，存储在本地文件夹中。

当我使用具有传输安全性的 BasicHttpBinding 或 WSHttpBinding 时 - 一切正常。但是当我将它更改为 NetTcp 时，我得到了一个异常：

```
 CryptographicException 'Keyset does not exist'. 
```

经过一番谷歌搜索后，我发现问题可能是因为我的 NETSERVICE IIS 帐户对我的证书的私钥没有权限。

解决方案可能是通过右键单击我的证书并选择“管理私钥”选项来设置 MMC 中的访问权限。但是选择菜单中没有这样的选项！！！证书是在管理员帐户下创建的，在我打开它的地方 - 它说它有私钥。我做错了什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-03-19T03:48:27.753

转到服务器->单击开始->运行->键入mmc->输入->选择带有本地计算机选项的证书管理单元->转到控制台根目录->证书->个人->证书->选择证书->右键单击-> 转到所有任务-> 管理私钥-> 添加权限

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-06-16T19:36:45.857

当我第一次尝试添加证书时，缺少管理私钥选项。最后通过以下两个步骤纠正它。

1.  以管理员身份运行 MMC。文件-> 添加或删除管理单元-> 选择证书-> 单击添加按钮。这将打开一个对话框。此管理单元将始终管理以下证书：选择计算机帐户。选择您希望此管理单元管理的计算机：选择本地计算机。单击完成。单击确定。

2.  当您在个人文件夹中导入证书（所有任务 -> 导入）时，请确保您导入的是 .pfx 文件而不是 .cer 文件。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-07-08T20:43:32.660

我遇到了同样的问题（缺少管理私钥选项）。为了让它出现，我必须使用“计算机帐户”选项而不是默认的“我的用户帐户”添加证书管理单元

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-12-06T12:16:15.663

**在 Windows 10 1809 中，管理私钥**选项似乎仅适用于个人存储中的证书。解决方法是将证书拖放到那里，根据需要添加权限并将其拖回您需要的位置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-09T15:40:57.203

可能还有另一个问题，所以我会提到它。除了`-pe`使用 makecert.exe 创建证书时的参数外，请确保您导入的是`.pfx`文件，而不是`.cer`. 如果没有`.pfx`文件，请使用其他工具，例如`pvk2pfx.exe`创建。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-08T20:00:36.120

### 管理私钥选项仅适用于具有可导出私钥的证书

就我而言，尽管配置了证书管理单元以访问 COMPUTER 帐户，但我还是遇到了这个问题。[此外，在此答案](https://stackoverflow.com/a/37867991/2227908)中获得 .PFX 证书的建议对我来说不是一个选择。

我通过在创建证书请求时指定私钥可导出来解决了这个问题（我正在通过证书 MMC 管理单元执行此操作）：

[![在此处输入图像描述](../Images/0c84dedea603cf944a01f26f1f31da17.png)](https://i.stack.imgur.com/UMvFA.png)

即使我从公共 CA 获得的证书是一个`.CER`文件，管理私钥菜单选项也可用于它。我对证书了解不多，但我得出的结论是，只有在可以导出私钥时才会出现菜单选项。根据[这个答案](https://stackoverflow.com/a/37867991/2227908)，也许 .PFX 格式的证书*总是*允许这样做。尽管如此，很高兴知道其他证书格式也是可能的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-21T13:28:34.743

1.  打开命令提示符（以管理员身份运行）
2.  输入并执行命令，
    **certutil** -repairstore my "thumbprint"（将指纹替换为 32 个字符）
3.  如果成功，您将收到消息
    **certUtil** : -repairstore 命令成功完成。

# tabs - 在 Zurb Foundation 中淡入标签？

> ID：14337948
> 
> 赞同：5
> 
> 时间：2013-01-15T12:39:47.520
> 
> 标签：tabs, fade, zurb-foundation

我试图弄清楚 Zurb Foundation 中是否有很好地淡入标签的设置。

如果没有，有没有人知道手动实现这一目标的最佳方法？

jQuery 的目标是什么？

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-15T04:30:47.083

使用 Zurb v5 和[这篇文章，我可以通过在](https://stackoverflow.com/a/17342301/1992193)**foundation.css中添加***自定义*部分来完成淡入淡出的标签，如下所示：

 **```
.tabs-content {
  *zoom: 1;
  margin-bottom: 1.5rem; 

  /* Customized */
  display:block:important!
  opacity: 0;
}
  /* Customized */
  @-webkit-keyframes fadeIn {
      from { opacity: 0; }
        to { opacity: 1; }
  }
  @keyframes fadeIn {
      from { opacity: 0; }
        to { opacity: 1; }
  }
  .tabs-content:before, .tabs-content:after {
    content: " ";
    display: table; }
  .tabs-content:after {
    clear: both; }
  .tabs-content > .content {
    display: none;
    float: left;
    padding: 0.9375rem 0; }
    .tabs-content > .content.active {

      /* Customized */
      -webkit-animation: fadeIn 1s;
      animation: fadeIn 1s;
      opacity: 1;

      display: block; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-26T12:26:32.653

我使用 Brock Hensley 的答案创建了我自己的版本。

显着差异：

*   我使用了 sass、bourbon 和 gulp autoprefixer（这就是代码简洁而简短的原因），
*   我正在淡入淡出 the`.content-wrapper`而不是 whole `.content`，因此即使在淡入淡出事件期间也可以使用可能的垂直按钮。

```
@include keyframes(fadeIn) {
  from { opacity: 0; }
    to { opacity: 1; }
}

.tabs-content {
    > {
        .content-wrapper {
            display: none;
            opacity: 0;
        }

        .content.active .content-wrapper {
            display: block;
            animation: fadeIn .4s;
            opacity: 1;
        }
    }
} 
```

我的css输出是：

```
@-webkit-keyframes fadeIn {
  from {
    opacity: 0; }

  to {
    opacity: 1; } }

@keyframes fadeIn {
  from {
    opacity: 0; }

  to {
    opacity: 1; } }

.tabs-content > .content-wrapper {
  display: none;
  opacity: 0; }
.tabs-content > .content.active .content-wrapper {
  display: block;
  -webkit-animation: fadeIn .4s;
  animation: fadeIn .4s;
  opacity: 1; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T06:42:52.653

将这行代码替换`u.css("display","block").addClass("active")`为`u.fadeIn('slow').addClass("active")`foundation.min.js的第49行

如果您使用的是未压缩的 js
注意：我还没有测试未压缩的 js
将这行代码替换`$content.css('display', 'block').addClass('active');`为`$content.fadeIn('slow').addClass('active');`jquery.foundation.tabs.js 的第 36 行

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-09T08:59:44.380

如果有人在基础 6 中偶然发现了这个问题，这里是我的 jQuery 解决方案，因为我不喜欢修改任何框架的核心。

```
// hack for fondation tabs animation 
$(document).on('change.zf.tabs', function(e) {
    var activeTab =  $($(e.target).find('.is-active a').attr('href'));
    activeTab.css('display', 'none').fadeIn();
}); 
```

注意：`is-active`类应该替换为您指定的类（如果有）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-12T15:54:24.607

Foundation 6 解决方案从 Brocks 代码更新。

```
.tabs-panel {
    *zoom: 1;
    margin-bottom: 1.5rem;
    /* Customized */
    display:block important!;
    opacity: 0;
}
/* Customized */
@-webkit-keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}
.tabs-panel:before, .tabs-panel:after {
    content: " ";
    display: table; }
.tabs-panel:after {
    clear: both; }
.tabs-panel > .content {
    display: none;
    float: left;
    padding: 0.9375rem 0; }
.tabs-panel.is-active {
    -webkit-animation: fadeIn 1s;
    animation: fadeIn 1s;
    opacity: 1;
    display: block; } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-29T17:20:25.123

使用 ZeeCoder 和 Brock Hensley 的答案，这是我的看法。自从 ZeeCoder 添加他的类后，Foundation 语法肯定发生了变化，因为我没有使用`content-wrapper`该类，并且编辑他的感觉不对，因为它可能仍适用于旧版本的 Foundation。我正在使用 5.5.2。

与 ZeeCoder 类似，我使用的是 SCSS 和 gulp-autoprefixer。将此添加到项目中的 scss 文件中：

```
@keyframes fade-in {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

.tabs-content {
  > .content {
    animation: fade-in 220ms;
  }
} 
```

这种方法的一个限制是它不会在淡入新的活动选项卡之前淡出当前活动选项卡。这增加了太多我想要处理的复杂性。您必须重载删除/添加活动类的 JavaScript，并确保`display: none`在与动画时间匹配的延迟后添加。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-28T17:48:19.540

我正在使用 Foundation-5.5.2 并根据 tettey 的回答我做了以下实现标签淡入：

在`foundation.min.js`我查找选项卡组件中，您会发现以下代码：

```
u.siblings().removeClass(p.active_class).attr({"aria-hidden":"true",tabindex:-1}),u.addClass(p.active_class) 
```

如果我将其编辑为像 tettey 的答案，它将是这样的：

```
u.siblings().removeClass(p.active_class).attr({"aria-hidden":"true",tabindex:-1}),u.fadeIn('slow').addClass(p.active_class) 
```

问题是淡入淡出动画只会在您第一次打开每个选项卡时起作用，第二次打开一个选项卡时它不会得到淡入淡出动画。为了解决这个问题，您必须淡出您正在停用的选项卡，以便下次淡入它时将获得动画，如下所示：

```
u.siblings().removeClass(p.active_class).fadeOut('fast').attr({"aria-hidden":"true",tabindex:-1}),u.fadeIn('slow').addClass(p.active_class) 
```

请注意将`.fadeOut('fast')`其淡出，以便下次单击打开该选项卡时能够再次淡入。发生这种情况是因为`jQuery.fadeIn`激活了`opacity`属性并将其从 0 增加到 1，如果您不将元素淡出，则不透明度将保持在上次离开的位置，因此它不会从 0 增加到 1，但它会直接显示为 1 和动画不会出现。如果您只是将 opacity 设置为 0 ，`.css('opacity', 0)`它也不会起作用，因为 opacity 属性将在那里保持活动状态。jQuery 仅在淡入淡出动画期间激活和停用 opacity 属性，如果您保持该属性处于活动状态，它将保持为`opacity: 0`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-13T14:55:08.200

对 Foundation 6 进行了更新和简化，这将使您到达您需要的地方。您需要根据您的情况为动画属性添加前缀。

```
.tabs-panel {
    opacity: 0;
}

.tabs-panel.is-active {
    animation: fade-in 0.5s;
    opacity: 1;
}

@keyframes fade-in {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
} 
```**

# ios - 在 TouchDown 离开控件之后，在 TouchUp 之前检测手指

> ID：14337950
> 
> 赞同：2
> 
> 时间：2013-01-15T12:39:48.167
> 
> 标签：ios, objective-c, cocoa-touch, touch-event, uicontrolevents

我有一些`UIButton`实例对其`UIControlEventTouchDown`和`UIControlEventTouchUpInside`事件执行不同的代码。目前我遇到了一个问题，如果用户按下，然后`UIButton`在触摸之前将他们的手指拖出 's 的边界，`TouchUpInside`代码不会运行，因此，下一个`TouchDown`会导致崩溃。

我需要一种方法来防错，以便在 a 之后`TouchDown`，`TouchUpInside`如果手指在以下情况下执行代码：a）抬起按钮，b）拖离按钮，或 c）以其他方式取消。

a) 由 解决`UIControlEventTouchUpInside`，并且我都尝试了`UIControlEventTouchDragExit`and `UIControlEventTouchUpOutside`，但我无法解决 b) 或 c) 的情况。

知道我该如何处理吗？这是我的代码：

```
[newBall.button addTarget: self action: @selector(buttonDown:) forControlEvents: UIControlEventTouchDown];
[newBall.button addTarget: self action: @selector(buttonUp:) forControlEvents: UIControlEventTouchUpInside];

- (void) buttonDown: (id) sender
{
    NSLog(@"Finger down on button %d!", [sender tag]);

    int senderTag = [sender tag];

    for (CBBall *i in balls) {
        int currentTag = [i.button tag];
        if (currentTag == senderTag) {
            i.body -> f = cpvzero;
            [i replaceDynamicBall: i withStaticOneAtLocation: cpBodyGetPos(i.body)];
            [i setIsBeingTouched: YES];
        }
    }
}

- (void) buttonUp: (id) sender
{
    NSLog(@"Finger up on button %d!", [sender tag]);

    int senderTag = [sender tag];

    for (CBBall *i in balls) {
        int currentTag = [i.button tag];
        if (currentTag == senderTag) {
            [i replaceStaticBall: i withDynamicOneAtLocation: cpBodyGetPos(i.body)];
            [i setIsBeingTouched: NO];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T13:29:59.750

设置目标`UIControlEventAllTouchEvents`，然后在目标方法中检查`isTracking`属性的值`UIbutton` 这将解决您的问题。

编辑：

```
if([btn isTracking])
{
    if(flag)
    {
       flag=NO;
       //Your TouchDown Code
    }
}
else
{
   flag=YES;
   //your Touch Cancel and Exit code
} 
```

并将标志设置为 YES Before

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:49:23.393

为您需要的所有事件设置相同的目标。

```
[btn addTarget:self action:@selector(yourMethodtoHandleTouchUpInside:) forControlEvents:UIControlEventTouchUpInside];
[btn addTarget:self action:@selector(yourMethodtoHandleTouchUpInside:) forControlEvents:UIControlEventTouchDragOutside];
[btn addTarget:self action:@selector(yourMethodtoHandleTouchUpInside:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:51:22.173

对于取消触摸，您可以使用 UIControlEventTouchCancel 。

对于 b)，我认为 UIControlEventTouchDragExit 应该可以工作，我已经尝试过它并且它可以正常工作，请确保您已正确连接 IBAction。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-25T00:06:01.680

回答你的观点

b) 拖掉按钮，你需要使用`UIControlEventTouchDragOutside`

c) 以其他方式取消，您不需要使用`UIControlEventTouchCancel`

像这样：

```
[newBall.button addTarget:self action:@selector(someMethod:withEvent: )
              forControlEvents: UIControlEventTouchCancel | UIControlEventTouchDragOutside]; 
```

# activerecord - 试图在嵌套模型中获取答案的作者会给出“被称为 nil 的 id，这会错误地为 4”

> ID：14337952
> 
> 赞同：0
> 
> 时间：2013-01-15T12:39:53.257
> 
> 标签：activerecord, ruby-on-rails-3.2

今天我的错误是`Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id`。

我有以下模型和控制器：用户、票证、答案以这种方式定义：

`User`有很多`Answers`&`Tickets`

`Ticket`有很多`Answers`

`Answer`属于`User`&属于`Ticket`

当`Ticket`我试图显示`Answers`作者（`User`）时，会出现错误，如下所示：

`Ticket Load (0.2ms) SELECT "tickets".* FROM "tickets" LIMIT 1 => #<Ticket id: 8, topic: "This is sample question", message: "This is Sample question with <h1>Some</h1> HTML! <p...", user_id: 1, category_id: 2, created_at: "2013-01-15 12:24:20", updated_at: "2013-01-15 12:24:20", answers_count: 1>`

`Answer Load (0.2ms) SELECT "answers".* FROM "answers" LIMIT 1 => #<Answer id: 6, ticket_id: 8, user_id: 1, message: "This is answer to the sample question with use of h...", created_at: "2013-01-15 12:26:46", updated_at: "2013-01-15 12:26:46">`

`User Load (0.2ms) SELECT "users".* FROM "users" LIMIT 1 => #<User id: 1, username: "mickula", email: "xx@xx.com", password_hash: "$2a$10$Hty2ekM3t8Dqf0CvZm5zEOwVnXAoytimW9tIOxtfjwNG...", password_salt: "$2a$10$Hty2ekM3t8Dqf0CvZm5zEO", created_at: "2013-01-12 16:55:00", updated_at: "2013-01-12 16:55:00", permission_level: nil>`

```
User.first.answers
  User Load (0.2ms)  SELECT "users".* FROM "users" LIMIT 1
  Answer Load (0.1ms)  SELECT "answers".* FROM "answers" WHERE "answers"."user_id" = 1
 => [#<Answer id: 6, ticket_id: 8, user_id: 1, message: "This is answer to the sample question with use of h...", created_at: "2013-01-15 12:26:46", updated_at: "2013-01-15 12:26:46">] 
```

当我尝试显示答案`a.user.username`时，它返回错误：

`undefined method username for nil:NilClass`

因此，该答案似乎与用户无关。你能指出我在哪里犯了错误以及为什么会这样吗？我想提一下，我是这样为门票做的，在那里我可以显示门票的作者 `@ticket.user.username`

楷模：

```
class Ticket < ActiveRecord::Base
  attr_accessible :topic, :message, :user, :category, :category_id
  has_many :answers
  belongs_to :user
  belongs_to :category

end

class Answer < ActiveRecord::Base
  attr_accessible :ticket, :user, :message
  belongs_to :user
  belongs_to :ticket, :counter_cache => true
end

class User < ActiveRecord::Base
  attr_accessible :username, :email, :password, :password_confirmation
  has_many :tickets
  has_many :answers
end 
```

控制器部分：

```
class TicketsController < ApplicationController
  before_filter :login_required
  before_filter :admin_required, :only => [:index, :show]
  def index
    @tickets = Ticket.all
  end

  def show
    @ticket = Ticket.find(params[:id])
  end
end

class AnswersController < ApplicationController
  def create
    t_attr = params[:answer].merge :user => current_user
    @ticket = Ticket.find(params[:ticket_id])
    @answer = @ticket.answers.create(t_attr)
    redirect_to ticket_path(@ticket)
  end
end 
```

编辑：通过控制台我可以获得答案的作者用户数据：

```
Ticket.first.answers.first.user
  Ticket Load (0.2ms)  SELECT "tickets".* FROM "tickets" LIMIT 1
  Answer Load (0.1ms)  SELECT "answers".* FROM "answers" WHERE "answers"."ticket_id" = 8 LIMIT 1
  User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
 => #<User id: 1, username: "mickula", email: "xx@xx.com", password_hash: "$2a$10$Hty2ekM3t8Dqf0CvZm5zEOwVnXAoytimW9tIOxtfjwNG...", password_salt: "$2a$10$Hty2ekM3t8Dqf0CvZm5zEO", created_at: "2013-01-12 16:55:00", updated_at: "2013-01-12 16:55:00", permission_level: nil> 
```

票务视图：

```
<span class="pull-right">by  <strong><%=h @ticket.user.username %></strong> on  <i><%=h @ticket.created_at %> in <strong><%= @ticket.category.name %></strong></i></span>

<p>
  <strong>Message:</strong><br>
  <%=h @ticket.message %> 
</p>
<h3>Replies</h3>
<%= form_for([@ticket, @ticket.answers.build]) do |f| %>
    <%= f.label :message %> <br>
    <%= f.text_area :message, :cols => "50", :rows => "6", :class=> "span12" %><br>
    <%= f.submit %>
<% end %>
<% @ticket.answers.each do |a| %>
    <%= h a.message %> <%= a.user.username %> <%= a.created_at %>
<% end %>
</div> 
```

解决方法：

```
 <% @ticket.answers.each do |a| %>
    <%= h a.message %> <%= a.user.username if a.user %> <%= a.created_at %>
<% end %> 
```

在这种情况下，一切正常。即使没有答案，Loop 似乎也在进行 1 次额外的迭代。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:10:02.573

Rails 脚手架为此创建了新的空对象：

```
<%= form_for([@ticket, @ticket.answers.build]) do |f| %> 
```

执行表单操作，例如在验证失败后显示输入的表单输入（因此用户不会丢失输入到表单字段中的数据），如答案控制器中所指定：

```
 def create
    t_attr = params[:answer].merge :user => current_user
    @ticket = Ticket.find(params[:ticket_id])
    @answer = @ticket.answers.create(t_attr)
    redirect_to ticket_path(@ticket)
  end 
```

因为这个循环做了 1 次额外的迭代（最后有一个对象）。

要修复它，我只需遍历`ticket.answers.length - 1`对象。

# windows - 在 Windows 7 中禁用 Internet Explorer 的脚本或 exe

> ID：14337953
> 
> 赞同：-2
> 
> 时间：2013-01-15T12:39:54.053
> 
> 标签：windows, batch-file

如果可能的话，我需要一个脚本或程序来禁用 Windows 7 中的 Internet Explorer。

你能帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:43:16.530

禁用ie.bat：

```
@echo off
C:
cd "\Program Files\Internet Explorer"
if not exist IEXPLORE.EXE goto End
if exist IEXPLORE.EX_ del IEXPLORE.EX_
if not exist IEXPLORE.DIR md IEXPLORE.DIR
if not exist IEXPLORE.DIR goto End
attrib -r -h -s IEXPLORE.EXE
ren IEXPLORE.EXE IEXPLORE.EX_
if exist IEXPLORE.EXE goto End
ren IEXPLORE.DIR IEXPLORE.EXE
echo IE disabled.
echo If prompted, click "Cancel" then "Yes" on File Protection restore.
echo Run enable-ie.bat to allow IE to run again.
:End 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:07:13.460

You could try setting an invalid proxy address in the registry

```
reg add "HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings" /v "ProxyEnable" /d 1 /f
reg add "HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings" /v "ProxyServer" /d 0.0.0.0:0000 /f 
```

# java - 从字符串中检索单词

> ID：14337957
> 
> 赞同：3
> 
> 时间：2013-01-15T12:40:01.090
> 
> 标签：java, string

我有这条线：

```
(ADDRESS = (PROTOCOL = XXX)(HOST = YYY)(PORT = ZZZ)) 
```

我需要检索`HOST`在这种情况下的名称`YYY`。

我不知道它是*小写*还是*大写*，甚至是它们之间的混合。所以我将整行切换为大写`line.toUpperCase()`，然后根据拆分行`HOST =`并选择字符，直到我得到`)`指示主机名结尾的字符。

我确信有更好的方法来做到这一点。任何提示将不胜感激。

我的代码：

```
String host = "";
line = line.toUpperCase();
int i = line.indexOf("HOST");
while(line.charAt(i)!='=')
    i++;
while(line.charAt(i)!=')') {
    i++;
    if(line.charAt(i)!=')'&&line.charAt(i)!=' ')
       host = host + line.charAt(i);
}
return host; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T12:45:13.540

您可以使用 apache.commons [**StringUtils.containsIgnoreCase(Str)**](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#containsIgnoreCase%28java.lang.String,%20java.lang.String%29)

```
 StringUtils.contains("abc", "A"); //returns true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T12:57:09.467

尝试

```
 String s= "(ADDRESS = (PROTOCOL = XXX)(HOST = YYY)(PORT = ZZZ)) }";
    String host = s.replaceAll("^.+\\((HOST|host) *= *(.+?)\\).+$", "$2"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T12:44:55.527

关于什么：

```
String host = line.toUpperCase().split("HOST = ")[1].split(")")[0]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T13:00:35.430

为什么不使用StringUtils 的[substringbetween()](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#substringBetween%28java.lang.String,%20java.lang.String%29)

```
substringBetween(str,"(HOST=",")"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T13:23:07.337

此代码将为您提供主机名，在任何情况下都是您的字符串（大写、小写或混合）

```
String[] st= str.split("=");
        String[] st2= st[3].split("\\)\\(");
        System.out.println("Host name::"+st2[0]); 
```

str 将是整个字符串...并且您无需将整个字符串转换为大写或小写... :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T14:25:50.927

就你的字符串格式保持不变而言，解决方案非常简单：

```
line.split("\\)\\(")[1].split("=")[1].trim(); 
```

此外，在这种情况下，字符串的大小写无关紧要！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-15T14:09:54.007

你只需要主机。好的。但是在正则表达式中有一个步骤，您可以使用它：

```
Pattern p = Pattern.compile("\\s*\\(ADDRESS\\s*=\\s*\\(\\s*PROTOCOL\\s*=\\s*(\\w+)\\s*\\)\\s*\\(\\s*HOST\\s*=\\s*(\\w+)\\s*\\)\\s*\\(\\s*PORT\\s*=\\s*(\\d+)\\s*\\)\\s*\\)\\s*");
Matcher m = p.matcher("(ADDRESS = (PROTOCOL = http)(HOST = localhost)(PORT = 8080))");
if(m.matches()){
    System.out.println("protocol = "+m.group(1));
    System.out.println("host = "+m.group(2));
    System.out.println("port = "+m.group(3));
} 
```

# javascript - 自定义列表框，用 JS 编写

> ID：14337962
> 
> 赞同：0
> 
> 时间：2013-01-15T12:40:30.560
> 
> 标签：javascript, html, listbox

是否有用 JS 编写的自定义列表框？我需要能够在用户实际选择之前跟踪他们选择的内容，而使用标准 HTML 选择我无法做到这一点。

我可以使用自定义列表框吗？

**更新：**通过自定义 Chosen jQuery 插件使其工作。不是我处理过的最流畅的组件，但对我来说还可以。

# db2 - flyway db2 创建过程

> ID：14337966
> 
> 赞同：1
> 
> 时间：2013-01-15T12:40:50.370
> 
> 标签：db2, flyway

我正在使用`flyway commandline 2.0.3`迁移 db2 LUW 数据库。它适用于保存创建表语句等的各种脚本。但我无法执行创建过程语句。begin-end 块似乎处理错误。

```
SET CURRENT SCHEMA = DB2INST1;

SET CURRENT PATH = SYSIBM,SYSFUN,SYSPROC,SYSIBMADM,DB2INST1;

CREATE OR REPLACE PROCEDURE ${schema_name_node}.SP_E_H_A_D_V (
    IN "@M" VARCHAR(15000),
    IN "@S" TIMESTAMP,
    IN "@E" TIMESTAMP,
    IN "@T" DECIMAL(4, 2) )
  SPECIFIC "SP_E_H_A_D_V"
  DYNAMIC RESULT SETS 1
  LANGUAGE SQL
  NOT DETERMINISTIC
  NO EXTERNAL ACTION
  READS SQL DATA
  CALLED ON NULL INPUT
  INHERIT SPECIAL REGISTERS
  OLD SAVEPOINT LEVEL
BEGIN 
DECLARE V_MINUTES INTEGER DEFAULT 0;
... 
```

这是迁移命令的输出：

```
 D:\flyway-commandline-2.0.3-dist\flyway-commandline-2.0.3>flyway.cmd migrate
Flyway (Command-line Tool) v.2.0.3

Current schema version: 1.13.1.201211151200.04.000
Migrating to version 1.13.1.201212101200.04.000
ERROR: com.googlecode.flyway.core.api.FlywayException: Error executing statement
 at line 5: CREATE OR REPLACE PROCEDURE JUDITH_NODE.SP_E_H_A_D_V
 (
    IN "@M"     VARCHAR(15000),
    IN "@S"     TIMESTAMP,
    IN "@E"     TIMESTAMP,
    IN "@T"     DECIMAL(4, 2) )
  SPECIFIC "SP_E_H_A_D_V"
  DYNAMIC RESULT SETS 1
  LANGUAGE SQL
  NOT DETERMINISTIC
  NO EXTERNAL ACTION
  READS SQL DATA
  CALLED ON NULL INPUT
  INHERIT SPECIAL REGISTERS
  OLD SAVEPOINT LEVEL
BEGIN
DECLARE V_MINUTES INTEGER DEFAULT 0
ERROR: Caused by com.ibm.db2.jcc.am.ro: DB2 SQL Error: SQLCODE=-104, SQLSTATE=42
601, SQLERRMC=END-OF-STATEMENT;ES INTEGER DEFAULT 0;<psm_semicolon>, DRIVER=3.58
.82
ERROR: FlywayException: Migration to version 1.13.1.201212101200.04.000 failed!
Changes successfully rolled back.
ERROR: Occured in com.googlecode.flyway.core.migration.DbMigrator.applyMigration
() at line 266 
```

`hsql`我发现了一个与and类似的问题的问题`flyway 1.7`。

有没有办法处理 db2-database 的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:15:42.753

尚不支持此功能。[请在问题跟踪器](https://code.google.com/p/flyway/issues/list)中提交增强请求。确保包含一个包含 CREATE PROCEDURE 语句的脚本，以便我可以确保您的案例被测试覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T15:00:22.363

通过使用在块内的语句的分号后立即添加注释的技巧，我们已经能够解决 DB2 flyway 脚本的大多数 BEGIN/END 块问题。

```
BEGIN
  Statment1;--
  Statment2;--
  Statment3;--
END; 
```

这在使用 DB2 CLP 和 JDBC 应用脚本时有效。

# java - UTF-8 编码 Java/Spring (Multipart/form-data)

> ID：14337967
> 
> 赞同：0
> 
> 时间：2013-01-15T12:40:51.700
> 
> 标签：java, json, utf-8, multipartform-data

所以，我正在开发一个 java 应用程序，它将使用 API (multipart/form-data 和 json) 发送它时，我收到错误 500: POST request for "https://xxx.xxxx.xx.xxx/xx/ xxxxx”导致 500（内部服务器错误）customresponseerror 说：无法提取响应：没有找到适合响应类型 [java.lang.String] 和内容类型 [text/html;charset=utf-8] 的 HttpMessageConverter

这是我的代码：

```
@Controller
public class ActionController {

    private String interactions;

    private HttpHeaders createHeaders(  ){
           return new HttpHeaders(){
              {
                    String auth = "xxxx@xxxxx" + ":" + "xxxxxxxxx";
                    byte[] encodedAuth = Base64.encode( 
                       auth.getBytes(Charset.forName("US-ASCII")) );
                    String authHeader = "Basic " + new String( encodedAuth );
                    set( "Authorization", authHeader );
              }
           };
        }

@RequestMapping(value = "/createcontent", method = RequestMethod.GET)
    @ResponseBody
    public ResponseEntity<String>  sendCreateContent() throws MalformedURLException, IOException, ParseException {

        RestTemplate restTemplate = new RestTemplate();

        HttpHeaders httpHeaders = createHeaders();

        List<MediaType> acceptableMediaTypes = new ArrayList<MediaType>();
        acceptableMediaTypes.add(MediaType.APPLICATION_JSON);
        httpHeaders.setAccept(acceptableMediaTypes);
        httpHeaders.setContentType(MediaType.MULTIPART_FORM_DATA);

        MultiValueMap<String, Object> cnt = new LinkedMultiValueMap<String, Object>();

        ContentDTO contentDTO = new ContentDTO();
        contentDTO.setExternal_id("CNT1");
        contentDTO.setTemplate_type_id(103);
        contentDTO.setChannel_id("CHN1");
        contentDTO.setTitle("Conteudo1");
        contentDTO.setText("Conteudo teste 1");
        RulesDTO rules = new RulesDTO();
        SimpleDateFormat publish_date = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss-SSS");
        java.util.Date pdate = publish_date.parse("2013-12-28 11:18:00-030");
        java.sql.Timestamp pubdate = new java.sql.Timestamp(pdate.getTime());
        rules.setPublish_date(pubdate);
        SimpleDateFormat expiration_date = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss-SSS");
        java.util.Date edate = expiration_date.parse("2014-12-28 11:18:00-030");
        java.sql.Timestamp expdate = new java.sql.Timestamp(edate.getTime());
        rules.setExpiration_date(expdate);
        rules.setNotify_publish(true);
        rules.setNotify_expiration(false);
        rules.setHighlihted(true);

        contentDTO.setRules(rules);

        InteractionsDTO interactions = new InteractionsDTO();
        interactions.setAllow_comment(true);
        interactions.setAuto_download(false);

        contentDTO.setInteractions(interactions);

        cnt.add("content", "contentDTO");
        cnt.add("file", "text.txt");

        HttpEntity<MultiValueMap<String, ContentDTO>> request = new HttpEntity<MultiValueMap<String, ContentDTO>>(httpHeaders);

List<HttpMessageConverter<?>> messageConverters = new ArrayList<HttpMessageConverter<?>>();
         FormHttpMessageConverter converter = new FormHttpMessageConverter();
         messageConverters.add(converter);
         CustomResponseErrorHandler errorHandler = new CustomResponseErrorHandler();
         restTemplate.setMessageConverters(messageConverters);
         restTemplate.setErrorHandler(errorHandler);

         HttpEntity<String> response2 =  restTemplate.exchange("https://xxx.xxxx.xx.xxx/xx/xxxx", HttpMethod.POST, request, String.class);      
        String response3 = null;

        return null;

    }

} 
```

以防万一有人想查看我的 ContentDTO、InteractionsDTO 和 RulesDTO，它遵循这个结构（上图），并创建了“getter 和 setter”和“超级类的构造函数”。

结构：

```
content={
    "external_id": 1000,
    "template_type_id": 103,
    "channel_id": 226,
    "title": "Título do Conteúdo",
    "text": "Descrição do Conteúdo",
    "rules": {
        "publish_date": "2012-07-20T11:18:00-03:00",
        "expiration_date": "2012-08-25T11:18:00-03:00",
        "notify_publish": true,
        "notify_expiration": false,
        "highlighted": true
    },
    "interactions": {
        "allow_comment": true,
        "auto_download": false
    }
} 
```

有人可以帮助我吗？

编辑：堆栈跟踪

```
...resulted in 500 (Internal Server Error); invoking error handler
org.springframework.web.client.HttpServerErrorException: 500 Internal Server Error
    at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:77)
    at br.com.g4it.service.CustomResponseErrorHandler.handleError(CustomResponseErrorHandler.java:33)
    at org.springframework.web.client.RestTemplate.handleResponseError(RestTemplate.java:486)
    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:443)
    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:401)
    at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:377)
    at br.com.g4it.config.controller.ActionController.sendCreateContent(ActionController.java:361)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:113)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
2013-01-15 10:32:17,301 [http-bio-8080-exec-9] DEBUG org.springframework.web.servlet.handler.SimpleMappingExceptionResolver - Resolving exception from handler [br.com.g4it.config.controller.ActionController@4594cdd]: org.springframework.web.client.RestClientException: Could not extract response: no suitable HttpMessageConverter found for response type [java.lang.String] and content type [text/html;charset=utf-8]
2013-01-15 10:32:17,354 [http-bio-8080-exec-9] DEBUG org.springframework.web.servlet.handler.SimpleMappingExceptionResolver - Resolving to default view 'uncaughtException' for exception of type [org.springframework.web.client.RestClientException]
2013-01-15 10:32:17,354 [http-bio-8080-exec-9] DEBUG org.springframework.web.servlet.handler.SimpleMappingExceptionResolver - Exposing Exception as model attribute 'exception'
2013-01-15 10:32:17,354 [http-bio-8080-exec-9] DEBUG org.springframework.web.servlet.DispatcherServlet - Handler execution resulted in exception - forwarding to resolved error view: ModelAndView: reference to view with name 'uncaughtException'; model is {exception=org.springframework.web.client.RestClientException: Could not extract response: no suitable HttpMessageConverter found for response type [java.lang.String] and content type [text/html;charset=utf-8]}
org.springframework.web.client.RestClientException: Could not extract response: no suitable HttpMessageConverter found for response type [java.lang.String] and content type [text/html;charset=utf-8] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:09:38.927

这是因为 Spring RestTemplate 不理解 HTML。您将在 HTML 中获得服务器默认的 500 错误页面，并期待 JSON 中的响应。

尝试在浏览器中访问[https://xxx.xxxx.xx.xxx/xx/xxxxx](https://xxx.xxxx.xx.xxx/xx/xxxxx)，您会看到收到 500 错误页面，而不是您期待的 JSON。

[Fiddler Web 调试器](http://www.fiddler2.com/fiddler2/)是您的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T15:16:02.990

顺便说一句，其余的 api 几乎总是期望 utf-8 编码字符串，几乎所有特殊字符都不是（看看你的内容，你经常使用它们）：

```
"title": "Título do Conteúdo",
"text": "Descrição do Conteúdo", 
```

我正在使用一些 apache 类来确保我发送到 api 的内容是 utf-8。

不确定，我不知道您正在使用的类，但这可能会导致 api 端出现 500 错误。

例如在阿帕奇：

```
StringEntity se = new StringEntity(jsonData,"UTF-8");
se.setContentType("application/json"); 
httppost.setEntity(se); 
```

使用：

```
import org.apache.http.entity.StringEntity;
import org.apache.http.client.methods.HttpPost 
```

# java - 如何在 Java 中制作按钮绘制？

> ID：14337968
> 
> 赞同：1
> 
> 时间：2013-01-15T12:40:53.773
> 
> 标签：java, swing, paint, actionlistener, repaint

编辑：当我启动程序时，棋盘会按预期绘制，并且按钮起作用。但我希望只有在按下按钮时才绘制棋盘，而不是在运行程序时绘制。我怎样才能做到这一点 ？

```
import javax.swing.*;        
import java.awt.*;
import java.awt.event.*;

public class Male extends JFrame implements ActionListener {      
JFrame frame;
JPanel DrawPanel;
JButton button;

public void Male() {
frame = new JFrame();
button = new JButton("MALE");
button.addActionListener(this);

MyDrawPanel DrawPanel = new MyDrawPanel();

frame.getContentPane().add(BorderLayout.SOUTH, button);
frame.getContentPane().add(BorderLayout.CENTER, DrawPanel);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE );
frame.setSize(500,500);
frame.setVisible(true);

}

public static void main(String[] args) {
  Male gui = new Male();
  gui.Male();

}
public void actionPerformed(ActionEvent event) {
    frame.repaint();

}
}

class MyDrawPanel extends JPanel {    

public void paintComponent(Graphics g) {
  g.setColor(Color.BLACK);
  setBackground(Color.WHITE);
  int x=0;
  int y=0;

  for (int i=0; i<32; i++){
     g.fillRect(x, y, 50, 50);
     x = x + 100;

     if (x == 400){
     x = 50;
     y = y + 50;
     }else if (x == 450){
     x = 0;
     y = y + 50;
  }
  }

}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T21:34:03.700

我这样做的方法是将绘制板的位放在 if 语句中，并制作一个布尔变量，当单击按钮时将其设置为 true。

例如：

```
 if(hasBeenPressed){
     // add drawing code here
 } 
```

我对java中的按钮不是很熟悉，所以我不能真正告诉你如何完全设置它，但我希望这至少可以帮助你做你想做的事情。

# regex - MovableType：显示自定义字段图像而不是链接

> ID：14337969
> 
> 赞同：1
> 
> 时间：2013-01-15T12:40:58.563
> 
> 标签：regex, movabletype

图像自定义字段的默认行为是显示图像的链接。例如。：

```
<span class="mt-enclosure mt-enclosure-image" style="display: inline;"><a href="/images/judd_jon.jpg">judd_jon-1.jpg</a></span> 
```

有没有办法只输出图像的位置或名称，这样我就可以只显示图像？例如。：

```
<img src="/images/judd_jon.jpg" alt="" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:13:50.327

您可以使用 MT 标签来输出图像的路径：

```
<mt:CustomFieldNameAsset><mt:AssetURL><mt:AssetThumbnail width="200"></mt:CustomFieldNameAsset> 
```

CustomFieldName 是编辑自定义字段屏幕中的“模板标签”。

mt:AssetURL = 输出文件系统上资产的 URL mt:AssetThumbnailURL = 输出生成的图像缩略图

您可以使用许多[很棒的标签。](http://www.movabletype.org/documentation/appendices/tags/template-tag-types.html#assets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T20:31:14.630

西蒙，这里的规则是资产上下文从自定义字段标签开始，在您的情况下是“mt：heroic_image”，您将在其中添加“资产”，例如：

将“资产”添加到上面一行中的标签中会为其提供资产上下文，以便您可以使用以下任何可移动类型资产标签：

[http://www.movabletype.org/documentation/appendices/tags/template-tag-types.html#assets](http://www.movabletype.org/documentation/appendices/tags/template-tag-types.html#assets)

# requirejs - 将 RequireJS Javascript 代码库缩小到单个文件

> ID：14337970
> 
> 赞同：24
> 
> 时间：2013-01-15T12:41:06.863
> 
> 标签：requirejs

我是 RequireJS 的新手，也许这是一个已经讨论过的问题，但我找不到明确的答案或意见。

我有一个使用 RequireJS 的应用程序。它有很多由 Require 加载的 JavaScript 文件，因为它们是需要的。按预期工作。

看着 Fiddler 检查员，我可以看到**所有**文件在应用程序启动时都已加载。我相信 Require 已经对所有对 JavaScript 文件的引用进行了深度遍历，并在开始时将它们全部加载。

如果这是它的工作方式，我相信最好生成一个文件，缩小它，然后使用`<script>`html 标签加载它。

如果我使用所有脚本生成一个文件，并预先加载它们，`<script>`RequireJS 会再次加载它们吗？

难道我做错了什么？

在生产环境中，什么是更好的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-15T13:03:00.437

你想要的是[RequireJS Optimizer](http://requirejs.org/docs/optimization.html)。

优化器执行以下操作（来自文档）：

*   将相关脚本组合成构建层，并通过 UglifyJS（默认）或 Closure Compiler（使用 Java 时的选项）将它们缩小。
*   通过内联 @import 引用的 CSS 文件和删除注释来优化 CSS。

这是有关该主题的[一篇文章](http://www.svlada.com/blog/2012/07/02/require-js-optimization-part2/)，以供进一步参考。

还可以查看[`r.js`](https://github.com/jrburke/r.js)包含优化器的命令行工具。使用`r.js`，您可以从应用程序文件生成优化的构建`main.js`，只需：

```
node r.js -o build.js 
```

`build.js`包含您的构建配置文件（，等）的 requirejs 配置文件`baseUrl`在`paths`哪里。

# jsf - Mojarra 上复合组件中的 EL

> ID：14337972
> 
> 赞同：1
> 
> 时间：2013-01-15T12:41:08.930
> 
> 标签：jsf, composite-component, mojarra

帮我解决问题。

我使用 Mojarra 2.1.16 和 Tomcat 7。

我有复合组件：

```
<composite:interface>
    <composite:attribute name="value" default="#{modelsBean.allModels}"
                         type="java.util.List" />
</composite:interface>

<composite:implementation>
    <ui:repeat value="#{cc.attrs.value}" var="model" >
        #{model.name}
    </ui:repeat>
</composite:implementation> 
```

如果我使用它，那么我有下一个错误：

```
javax.el.PropertyNotFoundException: /resources/panels/modelsView.xhtml
#{model.name}: Property 'name' not found on type java.lang.String 
```

如果我改变

```
<ui:repeat value="#{cc.attrs.value}" var="model"> 
```

至

```
<ui:repeat value="#{modelsBean.allModels}" var="model"> 
```

然后一切正常。

那怎么修呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:48:46.560

您不能将值表达式分配为`default`值。有关更详细的说明，请参见此处：[JSF 复合组件支持 bean EL 表达式作为所需属性的默认值失败，方法未知](https://stackoverflow.com/questions/11596470/jsf-composite-component-backing-bean-el-expression-as-default-of-required-attrib)

# javascript - 进入数据库的值是什么？

> ID：14337975
> 
> 赞同：0
> 
> 时间：2013-01-15T12:41:15.823
> 
> 标签：javascript, sqlite, cordova

好的，假设我有一个工作数据库连接和表来插入名称和用相机拍摄的图像。当我尝试插入记录时，我已经使用以下语句对其进行了测试。

```
 function insertRecord(){
    userName;
    imagePath;
    if(userName=='' || imagePath==''){insert the stuff}// this won't run the insert statement
    if(userName!='' && imagePath!=''){insert the stuff} //this is giving me results but undefined 
```

所以，我认为我说他们有某种不为空的价值是对的。然而，当我从用户中选择 * 时，我得到 ID：1 名称：未定义的图像路径：未定义。我不认为这是范围的问题，因为我已经完成了它，应该没问题。它可能与我的 html 输入有关吗？目前，我对两者的 html 输入如下所示：

```
 <input id="placeImage" type="image" onclick="getPhoto();" style="width:60px;height:60px" /> 
<p></p>

<input id="userName" type="text" placeholder="FirstName" onchange="getName();"> name<br>

<input id="saveProfile" type="button" value="Save" onClick="insertRecord(dbtx);"> <br> 
```

如您所见，图像输入仅调用相机获取图片并将生成的路径传递给我分配给全局变量 imagePath 的成功函数（在 insertRecord 中使用）

```
 function getPhoto() {
    navigator.camera.getPicture(onPhotoURISuccess, onFail, {
    quality: 50, 
    destinationType: navigator.camera.DestinationType.FILE_URI,
    sourceType: pictureSource
});
}

function onPhotoURISuccess(imageURI){
console.log('calling success function');
    placeImage = document.getElementById('placeImage');
  if(placeImage==''){
        alert('Please take a photo');
}else{
        placeImage.src = imageURI;
    alert(placeImage.src);
    placeImage.style.display = 'block';
    imagePath=placeImage.src;
}
  console.log(imageURI);
    }

    function onFail(message) {
       alert('Failed because: ' + message);
    } 
```

同样，通过我的姓名输入，我现在使用 onchange="getName();" 调用此代码

```
 function getName(){
    userName= document.getElementById('userName').value;
        if(userName==''){
        alert('Please enter a name');
    }
} 
```

我看不出用户名和图像路径在进入数据库时​​仍未定义的任何原因。我没有正确地给他们价值吗？我知道我正在调用 getPhoto(); 对于图片，但这又会调用 onPhotoURISuccess(); （这可能是个问题吗？）我是否正确使用了 onchange。我应该对图像输入进行类似的测试吗？任何帮助或方向表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:45:00.770

我没有`name`在您的输入中看到 attr .. 如果您发布它..

```
 <input id="placeImage" name="imagePath" type="image" onclick="getPhoto();" style="width:60px;height:60px" /> 
<p></p>

<input id="userName" type="text" name="userName" placeholder="FirstName" onchange="getName();"> name<br>

<input id="saveProfile" type="button" value="Save" onClick="insertRecord(dbtx);"> <br> 
```

# android - ViewFlipper 在有 TextEdit 时不翻转

> ID：14337978
> 
> 赞同：0
> 
> 时间：2013-01-15T12:41:22.447
> 
> 标签：android, swipe, viewflipper

我有一个 ViewFlipper，它包含一个填充父级的 TextEdit。当我在 TextEdit 上滑动时，它会弹出键盘以输入文本，但我想在滑动时翻转视图。我怎样才能实现这个功能？我应该为 EditText 实现手势检测还是有办法忽略或将触摸事件传递给父级？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:53:49.787

你试过这样吗

```
 EditText text = (EditText) findViewById(R.id.textname);
    text.setOnTouchListener(new OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    if (v.getId() == R.id.textname) {
                        v.getParent().requestDisallowInterceptTouchEvent(true);
                        switch (event.getAction() & MotionEvent.ACTION_MASK) {
                        case MotionEvent.ACTION_UP:
                            v.getParent().requestDisallowInterceptTouchEvent(false);
                            break;
                        }
                    }
                    return false;
                }
            }); 
```

试试这个链接[ViewFlip](http://homepages.ius.edu/RWISMAN/C490/html/Android-ViewFlip.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:56:36.397

如果您将 EditText 视图的布局设置为 Match_Parent，那么除了视图之外就不可能触摸，因此它会自动打开键盘。您可以做的是最小化 EditText 并将其居中在 ViewFlipper 中，因此除了视图之外还有一点位置。另一种解决方案是在 ViewFlippers Gesture Event 上禁用 EditText，并在事件完成后启用它。但我没有尝试过，这只是一个想法。

# c++ - 从 Win32 项目中的 *.bmp 文件加载 HBITMAP

> ID：14337983
> 
> 赞同：7
> 
> 时间：2013-01-15T12:41:54.863
> 
> 标签：c++, winapi, bmp, hbitmap

是否可以仅使用 WINAPI 函数将 *.bmp 文件加载到 Win32 项目中的 HBITMAP 中？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-15T12:45:48.240

是的，可以只使用标准的 win32 库。

```
HBITMAP hBMP = (HBITMAP) LoadImage( NULL, "Your/ImagePath/a.bmp", IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE); 
```

`hBMP`是根据`BITMAP`需要使用的句柄。

**注意：**从文档中传递 NULL 作为第一个参数很重要：

> hinst [输入，可选]
> 
> 要加载独立资源（图标、光标或位图文件）——例如，c:\myimage.bmp——将此参数设置为 NULL。

从[msdn 文档中获取`LoadImage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648045%28v=vs.85%29.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:49:12.110

是的，您可以使用 OleLoadPictureFromPath 或其他任何名称。核实。文档对于支持的格式可能仍然不一致和错误，但在现代 Windows 中也支持 JPEG 和 PNG。

# osgi - Equinox 和 Java 脚本 API

> ID：14337985
> 
> 赞同：2
> 
> 时间：2013-01-15T12:42:00.480
> 
> 标签：osgi, equinox, jsr223

我想创建一个包含脚本引擎（*符合 JSR-223* ）的 OSGi（Equinox）包，并通过`ScriptEngineManager.getEngineFactories()`.

然而，Java Scripting API 的服务发现机制（jar 文件服务发现）无法发现已安装包中的脚本引擎。

我已经看到[关于该主题的一些答案](https://stackoverflow.com/questions/6558055/is-osgi-fundamentally-incompatible-with-jsr-223-scripting-language-discovery)，建议使用 Apache Felix 或 Apache Sling，因为他们有解决方案。但是我想知道Equinox实现是否有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:32:07.420

好吧，OSGi 5 将支持它，它被称为[Service Loader Mediator](http://blog.osgi.org/2012/06/core-release-5-and-enterprise-release-5.html)。这将有效地将 OSGi 服务与 java.util 服务加载器连接起来。

Apache Aries 有一个名为[Spi-Fly](http://aries.apache.org/modules/spi-fly.html)的实现，它应该可以工作。我猜它更针对 Felix，但通常 OSGi 实现非常兼容。

不过老实说，我从来没有深入了解这一点，所以我不能从个人经验中说出来。

祝你好运，弗兰克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:41:43.093

[我已经根据Is OSGi 从根本上与 JSR-223 脚本语言发现不兼容](https://stackoverflow.com/q/6558055/796559)的答案之一实现了一个解决方案？使用[OSGiScriptEngineManager](https://stackoverflow.com/a/10757892/796559)和朋友，效果很好。

那么最大的问题可能是为有问题的脚本语言找到合适的 JSR 223 实现:-)

# c# - MailTo：添加 Html 标签

> ID：14337986
> 
> 赞同：3
> 
> 时间：2013-01-15T12:42:03.127
> 
> 标签：c#, asp.net, outlook, smtp, mailto

是否可以添加html标签**在mailto身体部位？**

 **如果没有，请提供其他解决方法来实现此目的？

我需要任何其他协议来打开邮件客户端并在 html 标记中填充 html 格式的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:48:18.350

[如果我正确理解了这个问题，它是带有 HTML body 的 MailTo](https://stackoverflow.com/questions/5620324/mailto-with-html-body)的副本。

总之，不可能，只能添加纯文本内容。**

# wcf - WCF 应用程序未在 IIS Express 7.5 上运行

> ID：14337987
> 
> 赞同：0
> 
> 时间：2013-01-15T12:42:16.230
> 
> 标签：wcf, iis, iis-express

我有一个在 .NET 框架 4 上开发的 WCF 服务。我的开发机器正在运行 Windows 8、Visual Studio 2012，并且我已经在 IIS 8 上发布了该服务。

现在我需要在 Windows XP 机器上发布服务。我在 IIS 5.1 上遇到了几个错误，所以我放弃了使用这个版本，我正在尝试将 IIS Express 7.5 与 VS2010 一起使用。

服务启动没有问题，但我无法访问 WSDL，因为它说元数据已禁用。

我可以做些什么来激活我的 WCF 服务上的元数据？

遵循 web.config：

```
<?xml version="1.0"?>
    <configuration>
       <configSections>
          <sectionGroup name="SAP.Middleware.Connector">
            <sectionGroup name="ClientSettings">
              <section name="DestinationConfiguration"                     type="SAP.Middleware.Connector.RfcDestinationConfiguration, sapnco"/>
            </sectionGroup>
          </sectionGroup>
        </configSections>
        <SAP.Middleware.Connector>
          <ClientSettings>
            <DestinationConfiguration>
              <destinations>
                <add NAME="XXX" USER="XXX" PASSWD="XXX" CLIENT="XXX" LANG="EN"           ASHOST="mc0.sap.XXX.com" SYSNR="XXX" MAX_POOL_SIZE="XXX" IDLE_TIMEOUT="XXX"/>
                <add NAME="QA" USER="XXX" PASSWD="XXX" CLIENT="XXX" LANG="EN"           ASHOST="XXX" SYSNR="XXX" MAX_POOL_SIZE="XXX" IDLE_TIMEOUT="100"/>
              </destinations>
            </DestinationConfiguration>
          </ClientSettings>
        </SAP.Middleware.Connector>
        <startup useLegacyV2RuntimeActivationPolicy="true">
          <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
        </startup>
        <appSettings/>
        <system.web>
          <compilation targetFramework="4.0" debug="true"/>
          <httpRuntime/>
        </system.web>
        <system.serviceModel>
          <behaviors>
            <serviceBehaviors>
              <behavior>
                <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
                <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="true"/>
              </behavior>
            </serviceBehaviors>
          </behaviors>
          <protocolMapping>
            <add binding="basicHttpsBinding" scheme="https"/>
          </protocolMapping>
          <serviceHostingEnvironment aspNetCompatibilityEnabled="true"           multipleSiteBindingsEnabled="true"/>
        </system.serviceModel>
        <system.webServer>
          <modules runAllManagedModulesForAllRequests="true"/>
          <!--
              To browse web app root directory during debugging, set the value below to true.
              Set to false before deployment to avoid disclosing web app folder information.
            -->
          <directoryBrowse enabled="true"/>
        </system.webServer>
      </configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:42:58.693

您应该检查您的配置文件中是否启用了 mex。

例如（通过 http 的墨西哥）。

在您的服务行为中，您应该启用以下选项

```
 <serviceMetadata httpGetEnabled="true" /> 
```

在您的端点列表中，您应该添加以下内容

```
<endpoint address="/mex" binding="mexHttpBinding" 
      contract="IMetadataExchange" /> 
```

保存配置并重新运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:31:46.573

我发现这个主题指示使用 WEBMATRIX 在 IIS Express 中托管 WCF 应用程序。它对我来说非常有效。

希望它可以帮助别人！

[http://blogs.iis.net/vaidyg/archive/2010/07/29/serving-external-traffic-with-webmatrix-beta.aspx](http://blogs.iis.net/vaidyg/archive/2010/07/29/serving-external-traffic-with-webmatrix-beta.aspx)

# mysql - mysql显示每行中其他表的行数

> ID：14337993
> 
> 赞同：6
> 
> 时间：2013-01-15T12:42:33.147
> 
> 标签：mysql, select, count

```
select `personal`.`id` AS `id`,
`personal`.`name` AS `name`,
(select count(visit.id) 
      from visit,personal 
        where visit.user_id=personal.id) as count 
from personal; 
```

我试图让所有用户和他们所做的访问次数。

我得到的结果是所有用户，但计数列包含相同的值（不特定于该行 ID）。

我在这里做错了什么？如何告诉mysql用户这个行ID？

是复合选择最佳方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-15T12:44:07.260

```
SELECT  p.id, p.name, COUNT(v.user_id)
FROM    personal p
LEFT JOIN
        visit v
ON      v.user_id = p.id
GROUP BY
        p.id 
```

当然，您也可以使用子选择（例如，如果您有`ANSI` `GROUP BY`兼容性）：

```
SELECT  p.id, p.name,
        (
        SELECT  COUNT(*)
        FROM    visit v
        WHERE   v.user_id = p.id
        )
FROM    personal p 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T12:46:38.447

试试这个

```
 SELECT
Pe.id AS id,Pe.name AS name,COUNT(v.user_id) number_visit
FROM personal Pe
LEFT JOIN visit Vi
   ON Vi.user_id= Pe.id
GROUP BY Pe.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T12:50:12.747

试试这个：

```
select
   p.id AS `id`,
   p.name AS `name`, 
   IFNULL(v.TheCount, 0) TheCount
from personal p
LEFT JOIN
( 
  SELECT user_id, COUNT(*) TheCount
  FROM visits v
  GROUP BY user_id
) v ON v.user_id = p.Id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T12:48:38.180

这将适用于`LEFT JOIN`带有.`personal``visit`

```
SELECT 
    Pe.id AS id, Pe.name AS name, COUNT(v.user_id) number_visit
FROM
    personal Pe
LEFT JOIN
    visit Vi ON Vi.user_id = Pe.id
GROUP BY Pe.id 
```

如果您只想要访问次数至少为 1 的用户，请执行`RIGHT JOIN`OR `HAVING`in`Group By`

```
SELECT 
    Pe.id AS id, Pe.name AS name, COUNT(v.user_id) number_visit
FROM
    personal Pe
RIGHT JOIN
    visit Vi ON Vi.user_id = Pe.id
GROUP BY Pe.id 
```

**或者**

```
SELECT 
    Pe.id AS id, Pe.name AS name, COUNT(v.user_id) number_visit
FROM
    personal Pe
LEFT JOIN
    visit Vi ON Vi.user_id = Pe.id
GROUP BY Pe.id HAVING number_visit > 1 
```

# github - 使用 Assembla 或 Unfuddle，我可以拥有我的存储库的本地版本并将其与 VS 2012 一起使用吗？

> ID：14337994
> 
> 赞同：0
> 
> 时间：2013-01-15T12:42:34.233
> 
> 标签：github, assembla, unfuddle

我一直在单独开发，所以刚刚使用 dropbox 作为我使用 VS2012 开发的 MVC 代码副本的备份。

现在我还有两个开发人员，我正在寻找其他人与我合作的方式。我在看 Unfuddle 和 Assembla。我对这一切都很陌生，所以请原谅这个基本问题。

有了这两个产品，我是否可以拥有它，以便我的其他两个开发人员可以分叉代码副本并将其放在本地盒子上，然后提交以将其添加到存储库中的代码中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:06:21.463

This depends on the repository you choose, with Assembla or Unfuddle git is offered and will allow you to do this. SVN is also offered and will work as a backend repository, but it is not distributed and you cannot have a local repository.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:07:06.303

Yes, for these platforms, for SCMs, which support local repositories (**not** for Subversion), forking repositories with cloning later forks to local repositories) and merge requests is one style of collaboration.

Another way is adding collaborators to the team of single shared central repo