# StackOverflow 问答 14200000-14200999

# php - 循环查询以返回所有值

> ID：14200000
> 
> 赞同：1
> 
> 时间：2013-01-07T16:29:29.530
> 
> 标签：php, mysql, for-loop, pdo

我为我的基本网站设置了基本的 MVC。有一个类调用（模型）数据库并在其上运行查询，它还有用于访问视图的视图方法

```
<?php
class Products {

    public function view( $file_name, $data = null ) 
    {
        if( is_array($data) ) {
           extract($data);
        }

        include 'application/view/' . $file_name;
    }

    public function getProducts () {
        $stmt = Database::get()->query ('SELECT * FROM retrofootball_products WHERE id>4');
        $result = $stmt->fetch(PDO::FETCH_ASSOC);
        return $result;

    }
} 
```

然后它将它传递给视图并显示它

```
<?php require 'application/view/template/header.html'; ?>

<div class="product">

<div class="eight columns">

</div>    

<div class="eight columns">
<?php echo "$productname    ";echo  "| Price £$price";?>

</div>

</div> 
```

我想像第一个一样显示列表中的所有字段`Manchester City 1999 Playoff Winning Shirt | Price £40`但是我的视图只能访问列名`$productname`

有没有办法遍历我的查询以显示所有产品？我曾尝试返回一个数组，但视图不会让我声明这一点。它只让我通过列名。我在要点中添加了我的小网站的结构：

[https://gist.github.com/d7a21ceee5e36b4f6198](https://gist.github.com/d7a21ceee5e36b4f6198)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:30:28.250

```
public function getProducts () {
    $stmt = Database::get()->query ('SELECT * FROM retrofootball_products WHERE id>4');
    return $stmt->fetchAll(PDO::FETCH_ASSOC);
} 
```

这将为您提供一个包含所有结果行的数组。然后，在您的模板中，您可以使用`foreach`循环来遍历行。

```
<?php require 'application/view/template/header.html'; ?>
<?php foreach($products as $product) { ?>
  <div class="product">
    <div class="eight columns"></div>    
    <div class="eight columns">
      <?php echo htmlspecialchars($product['name']) .' | Price £' . $product['price']; ?>
    </div>
  </div>
<?php } ?> 
```

# java - 复制网站的编程计算

> ID：14200003
> 
> 赞同：-5
> 
> 时间：2013-01-07T16:29:39.530
> 
> 标签：java, javascript, html

我想要做的是将网页复制到 Java 中。我现在使用的网站是[这个](http://www.virginmobile.ca/en/plans/calculator.html)。

我已经有了确切的布局，只需要让计算工作，我已经尝试了多次不同的计算，但我一直收到错误。任何帮助，将不胜感激。

到目前为止，这是布局的代码：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:37:32.657

对网站的 JavaScript 进行逆向工程，并用 Java 实现它。

一个好的起点将是这个[脚本](http://www.virginmobile.ca/js/plans/data-calculator-combined.js)。

用于计算的数据可以在这个[XML 文件](http://www.virginmobile.ca/en/catalogue/VMDataCalculator.xml)中找到。

# solr - 从 Eclipse 访问 Solr 时出现 404 错误

> ID：14200008
> 
> 赞同：1
> 
> 时间：2013-01-07T16:30:22.040
> 
> 标签：solr

我有一个 solr 实例正在运行，并且能够通过浏览器访问它并使用 Admin 运行查询。但是，当我尝试通过 Eclipse 中的 Java 代码访问它时，我收到以下错误：

```
Exception in thread "main" org.apache.solr.common.SolrException: Server at   http://localhost:8983/solr returned non ok status:404, message:Not Found
at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:372)
at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:181)
at org.apache.solr.client.solrj.request.QueryRequest.process(QueryRequest.java:90)
at org.apache.solr.client.solrj.SolrServer.query(SolrServer.java:301)
at testClass.main(testClass.java:18) 
```

这是我正在运行的代码：

```
public static void main(String[] args) throws MalformedURLException, SolrServerException {
    SolrServer server = new HttpSolrServer("http://localhost:8983/solr/");
    ModifiableSolrParams params = new ModifiableSolrParams();
    params.set("myParam", "myValue");
    QueryResponse response = server.query(params);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:21:19.520

事实证明我有两个错误：

1）我的设置实际上有一个嵌套的 solr 目录，所以我需要添加另一个“solr”级别。

2) 我错误地设置了 params 变量。发送的第一个参数应该是“q”，第二个参数是“name:value”对。

更新的示例，包括一次传递多个参数：

```
public static void main(String[] args) throws MalformedURLException, SolrServerException {
    SolrServer server = new HttpSolrServer("http://localhost:8983/solr/solr/");
    ModifiableSolrParams params = new ModifiableSolrParams();
    params.set("q", "param1:value1 AND param2:value2");
    QueryResponse response = server.query(params);
    System.out.println("response = " + response);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:11:23.150

不应该是：-

```
 SolrServer server = new HttpSolrServer("http://localhost:8983/solr"); 
```

请参阅以下链接中接受的答案：-

[通过 Solrj 查询 Solr：基础](https://stackoverflow.com/questions/10260237/querying-solr-via-solrj-basics)

# ios - 如何以一对多的关系插入多个 NSManageObjects？

> ID：14200009
> 
> 赞同：0
> 
> 时间：2013-01-07T16:30:22.167
> 
> 标签：ios, core-data

我从一侧与 . 我的应用程序从服务器下载联系人`NSManagedObject event`有一对多的关系`Entity Contacts`，一旦下载了所有联系人，我想将它们保存在 CoreData 中以保持关系。我想知道我是否可以一口气保存它们。NSArray 中的所有联系人`contactsWeb`，并将它们推送到 Core Data 中，否则我必须像这样保存每个联系人：

```
NSManagedObjectContext *context = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];

for(int i = 0; [contactsWeb count]; i++){

NSManagedObject *contact = [NSEntityDescription insertNewObjectForEntityForName:@"Contacts" inManagedObjectContext:context];

[contact setValue:[contactsWeb objectAtIndex:i] forKey:@"text"];
[contact setValue:[NSDate date] forKey:@"date"];

[[event mutableSetValueForKey:@"toContacts"]addObject:contact];
 NSError *error;
if(![context save:&error]){
    NSLog(@"%@", [error localizedDescription]);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:17:27.780

保存托管对象上下文意味着上下文中的*所有更改*都保存到持久存储（或在嵌套上下文的情况下保存到父上下文）。因此，在插入所有联系人并设置关系后，您可以（并且应该）“一次性”保存上下文。

*备注：*如果您创建托管对象子类`Contacts`并`Event`为您的实体，您的代码可以简化为

```
Contacts *contact = [NSEntityDescription insertNewObjectForEntityForName:@"Contacts" inManagedObjectContext:context];
contact.text = [contactsWeb objectAtIndex:i];
contact.date = [NSDate date];
[event addToContactsObject:contact]; 
```

托管对象子类可以在 Xcode 中创建：在 Core Data 模型编辑器中选择实体，然后从菜单中选择“Editor -> Create NSManagedObject subclass ...”。

# javascript - WinJS - 忽略 iframe javascript 错误

> ID：14200016
> 
> 赞同：4
> 
> 时间：2013-01-07T16:30:37.173
> 
> 标签：javascript, html, iframe, windows-8, winjs

我正在构建一个使用 iframe 显示网页的 WinJS 应用程序。

在测试和运行应用程序时，我被“拒绝访问”错误轰炸。

我不想与 iframe 内容进行交互。我只是想显示网页。

* * *

这就是我在应用程序中显示外部网页的方式。

```
<iframe src="http://imgur.com/Yk299"></iframe> 
```

* * *

这是引发错误的示例。

```
Exception was thrown at line 17, column 363 in       
http://partner.googleadservices.com/gampad/google_ads_gpt.js

0x80070005 - JavaScript runtime error: Access is denied. 
```

* * *

我不知道如何处理这个问题。

如果可以忽略这些错误，有没有办法将 Visual Studio 设置为忽略它们？

帮助会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:12:48.043

有几个选项，具体取决于您对脚本正在执行的操作的舒适程度以及它们对您的应用程序的重要性。您提供的链接似乎有不少例外来自 Google 广告服务；还有其他来自不同来源的权限被拒绝。

您可以通过在遇到第一个异常时打开异常设置（如下所示）或转到 Visual Studio 菜单中的 Debug>Exceptions... 选项 (Ctrl+Alt+E) 来控制哪些异常将触发调试器中的中断.

![在此处输入图像描述](../Images/bd306d22109d5399e010b797804ae3ee.png)

您还可以在 iframe 上设置[沙盒](http://msdn.microsoft.com/en-us/library/windows/apps/hh441129.aspx)属性。例如，设置以下内容消除了所有异常：

```
<iframe src="http://imgur.com/Yk299" sandbox="allow-top-navigation"></iframe> 
```

当然，这可能会对应用程序的安全性产生重大影响，因此仅对内容经过您审查和信任的网站执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T20:11:59.993

为什么不使用 WinJS WebView，例如：

```
<x-ms-webview id="webview" src="http://www.google.com" style="width: 1024px; height: 768px;">
</x-ms-webview> 
```

他们说这是从 WinJS 应用程序中引用外部页面的首选方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T16:50:27.700

他们不能被忽视。该保护内置于网络浏览器中。您不能访问具有不同域的 iframe 的内容。您必须构建自己的渲染器。

# forms - Yii 框架 - 使用 3 下拉列表收集出生日期，然后转换为日期 Obj

> ID：14200017
> 
> 赞同：0
> 
> 时间：2013-01-07T16:30:41.040
> 
> 标签：forms, data-binding, yii

在我的数据库中，我有一个`dob`类型为 的出生日期 ( ) 字段`date`。当我从我的表中创建模型时，它会`dob`为我创建一个属性。

因此，当我从模型生成表单时，它有一个字段可以收集用户的出生日期。我想要的是每个月和年都有 3 个下拉元素。然后当我提交我的表单时，它们都被捆绑在一起`dd-mm-yyyy`并填充到我的模型属性“ `dob`”

`Yii`在这一点上，由于模型被传递给视图，我无法弄清楚如何使用表单来完成它，我怎样才能找到一种方法来实现这一点。所以回顾一下，

- 我想在我的`User`表格中只有一个字段`dob`作为`date`类型 - 我想在我`Yii`生成的表单中有 3 个下拉列表，在提交时它们形成我`dob`的并将其填充到`$model->user_dob`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:37:31.380

这真的很奇怪......我今天早些时候做了类似的事情。我发现人们没有正确使用日期选择器，所以我更喜欢使用下拉菜单。

在模型中为月、日和年声明虚拟字段，添加验证规则，然后为每个字段创建一个下拉列表。

创建下拉列表的示例：

```
echo CHtml::activeDropDownList($model, 'month', $monthsArray);
echo CHtml::activeDropDownList($model, 'day', $daysArray);
echo CHtml::activeDropDownList($model, 'year', $yearsArray); 
```

您需要使用您想要作为选项提供的月份、日期和年份来填充数组。这似乎超出了您的问题的范围，但我将在最后包含示例函数，以防万一。

然后在您的表单控制器中，当您执行以下操作时：

```
$model->attributes = $_POST['User']; 
```

这些值应添加到 $model->month、$model->day 和 $model->year。

然后您所要做的就是将其格式化为 Date 格式，如下所示：

```
$model->dob = $model->year . '-' . $model->month . '-' . $model->day; 
```

并保存模型。

--- 额外：月、日、年数组的示例 --- 这些并不是最好的方法，但就我的目的而言，它们运行良好。

```
 public function getMonthsArray()
    {
        for($monthNum = 1; $monthNum <= 12; $monthNum++){
            $months[$monthNum] = date('F', mktime(0, 0, 0, $monthNum, 1));
        }

        return array(0 => 'Month:') + $months;
    }

    public function getDaysArray()
    {
        for($dayNum = 1; $dayNum <= 31; $dayNum++){
            $days[$dayNum] = $dayNum;
        }

        return array(0 => 'Day:') + $days;
    }

    public function getYearsArray()
    {
        $thisYear = date('Y', time());

        for($yearNum = $thisYear; $yearNum >= 1920; $yearNum--){
            $years[$yearNum] = $yearNum;
        }

        return array(0 => 'Year:') + $years;
    } 
```

# c# - 命名空间“System.Runtime”中不存在类型或命名空间名称“缓存”

> ID：14200018
> 
> 赞同：15
> 
> 时间：2013-01-07T16:30:44.413
> 
> 标签：c#, .net, visual-studio-2012

我知道通常有一个简单的解决方案，即在添加引用中引用 dll。但是我已经添加了引用并且 system.runtime.caching 出现在我的引用列表中，但错误仍然显示。

该错误在运行时显示在浏览器中，因此它会编译。

我已删除并重新添加了参考，但仍然没有运气。我已重新启动 VS 2012 并重新启动。

Visual Studio 2012 .net 框架 4.5

截屏：

![截屏](../Images/9e98c7d372cbdfe0f0d75dfcfe1bfd5e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-07-11T12:58:21.943

我有同样的问题，我发现我必须手动添加：

```
<assemblies>
  <add assembly="System.Runtime.Caching, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
</assemblies> 
```

到我的`web.config`档案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:49:49.027

此错误的最可能原因是您使用的是 .Net 框架的客户端配置文件版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-18T12:32:30.483

我有一个类似的问题，当我将目标框架从 .NET Framework 4 Client Profile 更改为 .Net Framework 4 时它就消失了

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-02-16T17:32:58.780

转到解决方案资源管理器，右键单击引用和“添加引用”。选择“Assemblies”（如果尚未突出显示），然后开始搜索“System.Runtime.Cashing”。在您完成输入之前，您应该会看到它已列出。

选中左侧的框，然后单击确定。

# python - 在 while 循环中生成绘图后在 KeyboardInterrupt 上退出

> ID：14200020
> 
> 赞同：6
> 
> 时间：2013-01-07T16:31:05.927
> 
> 标签：python, windows, matplotlib, ipython, enthought

我正在使用 matplotlib 实时监控一个实验，以在 while 循环中生成图。理想情况下，循环应该在类似`KeyboardInterrupt`. 这在 Ubuntu 测试中运行良好。在 Windows 7 中，使用`ipython`退出，`"Terminate batch job (Y/N)?"`然后关闭解释器。我想避免这种行为，并在 KeyboardInterrupt 之后让解释器保持打开状态。这是一个测试脚本。

[编辑 2]：如果`ipython`加载为`ipython --pylab`.

```
import time
import numpy as np
import matplotlib.pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(111)
line, = ax.plot([0], [0], 'b-o')

window = 50
plot_data = np.zeros((window, 2))

i = 0
start = time.time()
while True:
    try:
        data = [time.time() - start, np.random.rand()]
        print ' '.join('{:.2f}'.format(x) for x in data)
        if i < window:
            plot_data[i,:] = data
            line.set_data(plot_data[0:i+1,0], plot_data[0:i+1,1])
        else:
            plot_data[0:window-1] = plot_data[1:window]
            plot_data[window-1] = data
            line.set_data(plot_data[:,0], plot_data[:,1])
        ax.relim()
        ax.autoscale_view(True,True,True)
        fig.canvas.draw()
        plt.pause(0.1)
        i += 1
    except KeyboardInterrupt:
            print "Program ended by user.\n"
            break 
print 'Success!' 
```

[编辑 1]：我应该更清楚为什么我用 matplotlib 标记它。下面的示例脚本在任一操作系统中都可以正常执行。

```
i = 0 
start = time.time()
while True:
    try:
        data = [time.time() - start, np.random.rand()]
        print ' '.join('{:.2f}'.format(x) for x in data)
        time.sleep(0.1)
    except KeyboardInterrupt:
        print "Proram ended by user. \n"
        break
print 'Success!' 
```

作为全新安装的一部分，昨天安装了所有软件包`Enthought`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:15:41.633

现在，我发现在多台 Windows 机器上解决此问题的最佳方法如下......

```
print 'press \'q\' to end run'
time.sleep(1.0)

fig = plt.figure()
ax = fig.add_subplot(111)
line, = ax.plot([0], [0], 'b-o')

window = 150
plot_data = np.zeros((window, 2))

i = 0
start = time.time()
while True:
    data = [time.time() - start, np.random.rand()]
    print ' '.join('{:.2f}'.format(x) for x in data)
    if i < window:
        plot_data[i,:] = data
        line.set_data(plot_data[0:i+1,0], plot_data[0:i+1,1])
    else:
        plot_data[0:window-1] = plot_data[1:window]
        plot_data[window-1] = data
        line.set_data(plot_data[:,0], plot_data[:,1])
    ax.relim()
    ax.autoscale_view(True,True,True)
    fig.canvas.draw()
    plt.pause(delay)
    i += 1
    if msvcrt.kbhit():
        if ord(msvcrt.getch()) == 113:
            print "Program ended by user.\n"
            break 
print 'Success!' 
```

不幸的是，这根本不是独立于平台的，但我在过去几天阅读的所有内容都让我相信独立于平台的键盘输入并不是真正可以实现的。我最初问题中的代码在 Unix 和一些 Windows 安装中运行良好。此代码在我尝试过的几个 Windows 安装中运行良好。所有这些在运行时效果最好`ipython --pylab`。现在这可能已经足够好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:48:10.777

我无法重现您的问题。我将您的测试脚本复制到一个文件中，然后使用命令`ipythonexception.py`启动它。然后我得到以下输出。`ipython``run`

```
In [1]: run ipythonexception.py
0.00 0.27
0.31 0.11
0.56 0.44
0.81 0.26
1.06 0.27
1.29 0.66
1.53 0.32
1.76 0.74
2.03 0.44
2.26 0.89
Program ended by user.

Success!

In [2]: window
Out[2]: 50

In [3]: 
```

一切似乎都按应有的方式工作。我在`Windows 7`，`Python 2.7.2`并且`Ipython 0.13`。

你是从`Ipython`批处理文件开始的吗？如果我中断一些批处理作业，我通常会收到一条`"Terminate batch job (Y/N)?"`消息。`Windows`

# javascript - 传递带有包含参数的回调函数？

> ID：14200021
> 
> 赞同：25
> 
> 时间：2013-01-07T16:31:09.387
> 
> 标签：javascript, jquery, ajax, callback

我有这个下面的代码..

```
function getGrades(grading_company) {

    if (grading_company == 'Not Specified') {

        // Remove grades box & show condition box
        showConditionBox();

    } else {

        // Set file to get results from..
        var loadUrl = "ajax_files/get_grades.php";

        // Set data string
        var dataString = 'gc_id=' + grading_company;

        // Set the callback function to run on success
        var callback = showGradesBox;

        // Run the AJAX request
        runAjax(loadUrl, dataString, callback);  

    }

}

function runAjax(loadUrl, dataString, callback) {

    jQuery.ajax({
        type: 'GET',
        url: loadUrl,
        data: dataString,
        dataType: 'html',
        error: ajaxError,
        success: function(response) {
            callback(response);
        }
    });    

} 
```

**编辑：**这是作为回调函数调用的函数：

```
function showGradesBox(response) {

    // Load data into grade field
    jQuery('#grade').html(response);

    // Hide condition fields
    jQuery('#condition').hide();
    jQuery('#condition_text').hide();

    // Show grade fields
    jQuery('#grade_wrapper').show();
    jQuery('#grade_text_wrapper').show();    

} 
```

现在，如果我想将`grading_company`变量作为参数传递给回调函数，有没有办法做到这一点而不必在`runAjax`调用中将其添加为另一个参数？我试图保持`runAjax`函数对其他用途开放，所以我不想传递任何额外的参数；但如果它可以以某种方式包含在回调中，那就太好了。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-07T16:33:05.780

将您的回调更改为匿名函数：

```
// Set the callback function to run on success
var callback = function () {
    showGradesBox(grading_company);
}; 
```

这允许您将参数传递给内部函数。

编辑：允许ajax响应：

```
// Set the callback function to run on success
var callback = function (response) {
    showGradesBox(grading_company, response);
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T16:38:44.850

另一种可能性是`dataString`不做，`dataObject`然后将该对象传递给回调。像这样：

```
function getGrades(grading_company) {

    if (grading_company == 'Not Specified') {

        // Remove grades box & show condition box
        showConditionBox();

    } else {

        // Set file to get results from..
        var loadUrl = "ajax_files/get_grades.php";

        // Set data object
        var dataObject = {
            'gc_id' : grading_company
            /*to do multiples..
            'item1' : value1, 
            'item2' : value2, 
            'etc' : etc */
        }

        // Set the callback function to run on success
        var callback = showGradesBox;

        // Run the AJAX request
        runAjax(loadUrl, dataObject, callback);  

    }

}

function runAjax(loadUrl, dataObject, callback) {

    jQuery.ajax({
        type: 'GET',
        url: loadUrl,
        data: $.param(dataObject),
        dataType: 'html',
        error: ajaxError,
        success: function(response) {
            callback(response, dataObject);
        }
    });    

} 
```

注意添加`$.param()`。

然后在回调函数中，你应该知道你在追求什么数据。如果`function setGrades(resp, data) { ... }`是回调，那么您可以访问其中的值`setGrades`

```
function setGrades(resp, data) {
   alert( data.gc_id);
} 
```

**编辑**

经过测试，我意识到这是`$(dataObject).serialize()`行不通的。所以我已经更新为使用`$.param()`. 请参阅[此 SO 帖子](https://stackoverflow.com/questions/3308846/serialize-json-to-query-string-in-javascript-jquery)以获取更多信息。

# android - Android 4.0 设备管理员接收器不工作

> ID：14200023
> 
> 赞同：1
> 
> 时间：2013-01-07T16:31:26.333
> 
> 标签：android, device-admin

我正在尝试构建一个非常简单的应用程序来擦除 ICS 设备上的所有用户数据。

我尝试使用[http://developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html) 和 [http://marakana.com/s/post/1291/android_device_policy_administration_tutorial上的源代码创建应用程序](http://marakana.com/s/post/1291/android_device_policy_administration_tutorial)

但是我遇到了一个问题，无论我做什么，提示用户允许管理员的广播接收器都不会出现！

如果有人可以帮助解决这个问题，这就是我到目前为止所得到的。

显现：

```
<uses-sdk android:minSdkVersion="15" />

<application android:icon="@drawable/ic_launcher"
    android:label="@string/app_name">
    <activity     android:name="com.CheckActivityService.CheckActivityServiceActivity"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER"     />
        </intent-filter>
    </activity>
</application>

<receiver android:name=".mDeviceAdminReceiver"
    android:label="device_admin"     android:permission="android.permission.BIND_DEVICE_ADMIN">
    <meta-data android:name="android.app.device_admin"
        android:resource="@xml/policies" />
    <intent-filter>
        <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
    </intent-filter>
</receiver>

</manifest> 
```

活动：

```
public class CheckActivityServiceActivity extends Activity implements                          OnCheckedChangeListener{

 /** Called when the activity is first created. */

static final int ACTIVATION_REQUEST = 1; // identifies our request id
DevicePolicyManager devicePolicyManager;
ComponentName deviceAdmin;
ToggleButton toggleButton;
static final String TAG = "DevicePolicyActivity";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    toggleButton = (ToggleButton) super
        .findViewById(R.id.toggle_device_admin);
    toggleButton.setOnCheckedChangeListener(this);

    Button btn = (Button) findViewById(R.id.wipeDataBtn);
    btn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            wipeData();
        }
    });

    devicePolicyManager = (DevicePolicyManager)     getSystemService(Context.DEVICE_POLICY_SERVICE);
    deviceAdmin = new ComponentName(CheckActivityServiceActivity.this,      mDeviceAdminReceiver.class);
     }

/**
 * Called when the state of toggle button changes. In this case, we send an
 * intent to activate the device policy administration.
 */
public void onCheckedChanged(CompoundButton button, boolean isChecked) {
        if (isChecked) {
            // Launch the activity to have the user enable our admin.
            Intent intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
            intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, deviceAdmin);
            intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION, "My Boss told me     to do this!!");
            startActivityForResult(intent, ACTIVATION_REQUEST);
        }
        Log.d(TAG, "onCheckedChanged to: " + isChecked);
}

public void wipeData(){
    devicePolicyManager.wipeData(ACTIVATION_REQUEST);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (requestCode) {
        case ACTIVATION_REQUEST:
                if (resultCode == Activity.RESULT_OK) {
                        Log.i(TAG, "Administration enabled!");
                        toggleButton.setChecked(true);
                } else {
                        Log.i(TAG, "Administration enable FAILED!");
                        toggleButton.setChecked(false);
                }
                return;
        }
        super.onActivityResult(requestCode, resultCode, data);
}
} 
```

接收方：

```
 public class mDeviceAdminReceiver extends DeviceAdminReceiver {

    static final String TAG = "DeviceAdminReceiver";

    void showToast(Context context, String msg) {
        String status = "TEST";
        Toast.makeText(context, status, Toast.LENGTH_SHORT).show();
    }

    /** Called when this application is approved to be a device administrator. */
    @Override
    public void onEnabled(Context context, Intent intent) {
            super.onEnabled(context, intent);
            Toast.makeText(context, "Admin Enabeled",
                            Toast.LENGTH_LONG).show();
            Log.d(TAG, "onEnabled");
    }

    /** Called when this application is no longer the device administrator. */
    @Override
    public void onDisabled(Context context, Intent intent) {
            super.onDisabled(context, intent);
            Toast.makeText(context, "Admin Disabled",
                            Toast.LENGTH_LONG).show();
            Log.d(TAG, "onDisabled");
    }

    @Override
    public void onPasswordChanged(Context context, Intent intent) {
            super.onPasswordChanged(context, intent);
            Log.d(TAG, "onPasswordChanged");
    }

    @Override
    public void onPasswordFailed(Context context, Intent intent) {
            super.onPasswordFailed(context, intent);
            Log.d(TAG, "onPasswordFailed");
    }

    @Override
    public void onPasswordSucceeded(Context context, Intent intent) {
            super.onPasswordSucceeded(context, intent);
            Log.d(TAG, "onPasswordSucceeded");
    }
} 
```

如果有人可以帮助我让它工作，因为我真的无法弄清楚为什么广播接收器没有触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:15:42.397

想出了问题，我有点傻。

需要将接收器放入元素中。

# operating-system - 如何计算 16 位地址指针中的页帧

> ID：14200025
> 
> 赞同：2
> 
> 时间：2013-01-07T16:31:31.137
> 
> 标签：operating-system, paging

我正在查看一些操作系统的试卷，我遇到了一个我根本无法弄清楚的问题。内存管理方案是**分页** 这是问题：

```
An operating system that runs on a CPU with a 16 bit address pointer employs a paging memory management scheme with a page size of 1024 bytes.
a)  At most how many frames can physical memory contain?
b)  Indicate which bits in an address pointer are used for page and offset. 
c)  A process image of size 3.5K resides in memory. You are given the page table of this process in Figure 1 below. What physical address will the hexadecimal logical address 0x0FCE result in? Show your calculations.
d)  How much internal fragmentation does this process produce?

Page    Frame
0             4
1             8
2             9
3             6
Figure 1 Process Page Table 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T10:41:18.100

1.  16 位地址总线允许访问`2^16 = 64kB`物理内存。由于在这个系统上你有 size 的页面`1024B = 2^10`，你的内存属于`2^16 / 2^10 = 2^6`物理帧。

2.  鉴于前面的结果，对于 的页面`1024 = 2^10 bytes`，您需要 10 位来访问页面的任何字节。因此，6 个高位用于从页表中获取页面索引（基本上是您作业中的图 1），10 个低位用于在该页中进行偏移。

3.  逻辑地址`0xfce`位于第四页，因为六个高位是`000011b = 3 = 4th page = 0x0c00-0x0fff`. 给定页表并假设物理内存是连续的，第四页映射到从 开始的第六个物理帧`1024 * 6 = 0x1800 = 0001100000000000b`。页面的 6 个高位是`000110b`，我们将前一个答案产生的 10 位偏移量相加`000110b << 10 | 0x3ce = 0x1bce`：

4.  由于帧分配不是顺序的（4、6、8、9），因此第4页和第6页之间的空洞（即1024B）以及第6页和第8页之间的空洞（即1024B）会导致物理内存碎片。

希望这有帮助。

# r - 如何在ggplot2中调整`binwidth`？

> ID：14200027
> 
> 赞同：17
> 
> 时间：2013-01-07T16:31:42.800
> 
> 标签：r, ggplot2, histogram

这听起来像是一个重复的问题，但希望不是。在基本的`R graphics`直方图函数中，我们有一个选项`breaks="FD"`，它为直方图提供了合理大小的 binsize，我们有任何类似的简单选项`ggplot2`吗？或者更好的是我们可以在 中使用相同的选项`ggplot2`吗？

我明白你可以调整`binwidth`in `geom_histogram`，但我正在寻找一种更简单的方法来产生美观和共鸣`binsize`。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-07T16:58:59.253

```
set.seed(42)
x <- rnorm(1000)
hist(x,breaks="FD")

library(ggplot2)
breaks <- pretty(range(x), n = nclass.FD(x), min.n = 1)
bwidth <- breaks[2]-breaks[1]
df <- data.frame(x)
ggplot(df,aes(x))+geom_histogram(binwidth=bwidth,fill="white",colour="black") 
```

# azure - Azure 到 AWS 迁移

> ID：14200028
> 
> 赞同：6
> 
> 时间：2013-01-07T16:31:43.707
> 
> 标签：azure, amazon-web-services, virtual-machine

为了将当前部署在 Azure 中的 Linux VM 迁移到 AWS，您将推荐什么策略？假设我将在 OS 磁盘中容纳所有数据，因此只需移动一个磁盘。

如果这很重要，VM 正在运行 Linux Ubuntu。

当然，我希望尽可能少的网络流量来做到这一点，因为它是收费的。

我阅读了有关[此处描述](http://www.windowsazure.com/en-us/manage/linux/how-to-guides/capture-an-image/)的映像制作过程的评​​论，认为它不安全，并且在此过程中丢失了一些虚拟机……不确定是否仍然如此，但我非常讨厌丢失我的虚拟机。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T21:52:35.787

您可以[使用 CloudXplorer 从 Azure 导出 VM](http://clumsyleaf.com/products/cloudxplorer)，然后[在 EC2 中导入 VM](http://aws.amazon.com/ec2/vmimport/)。

# google-api - 如何使用电子邮件在 Google Plus 中搜索人？

> ID：14200032
> 
> 赞同：11
> 
> 时间：2013-01-07T16:31:56.000
> 
> 标签：google-api, google-plus

如何使用电子邮件在 Google Plus 中搜索人？

例如，这个查询从不返回任何东西：

https://www.googleapis.com/plus/v1/people?query=[email_address]@gmail.com&key=MY_KEY

我尝试了至少一千封电子邮件的数据库，

另外我有一个名字很奇怪的帐户，当我按名字搜索时，我得到了结果，但是我没有使用电子邮件，我尝试对电子邮件进行 url 编码，但它仍然没有用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T16:43:52.740

电子邮件地址必须在用户的 Google+ 个人资料中设置为公共字段，才能搜索和找到该条目。people.search[方法](https://developers.google.com/+/api/latest/people/search)只搜索公共字段。

# android - Facebook Android SDK - 向 Facebook 应用程序发送数据

> ID：14200034
> 
> 赞同：0
> 
> 时间：2013-01-07T16:32:02.027
> 
> 标签：android, facebook

我正在使用 Facebook SDK for Android 将 Facebook 嵌入到我的社交应用程序中。

有没有办法 - 从我的 Android 应用程序 - 在特定用户的个人资料上打开 Facebook 应用程序？

某种向 Facebook 应用程序发送 Intent 的方式？

我的目标是直接从我的应用程序将用户引导到 Facebook 中其朋友的个人资料

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:12:44.743

这已在其他 stackoverflow 帖子中得到解答，例如：

[从其他应用程序启动 facebook 应用程序](https://stackoverflow.com/questions/4191492/launch-facebook-app-from-other-app)

我想提醒开发人员，这不是官方支持的，所以这可能随时被打破。将其用于您自己的应用程序需要您自担风险。

# c# - 以确切的方式将字符串转换为日期

> ID：14200040
> 
> 赞同：3
> 
> 时间：2013-01-07T16:32:32.387
> 
> 标签：c#, string, date

我有一个字符串“2011 年 1 月 11 日”，我想将其转换为数据类型日期（即 2011 年 1 月 11 日）。

我已经尝试了所有关于`datetime.parse`,`datetime.parse`确切的资源，但所有这些东西都给了我相同的输出 2011/01/11 12:00:00 AM。我真的不明白这种行为。我尝试了以下方法：

1 `DateTime date = DateTime.Parse("11 Jan 2011")`.;

2 `DateTime date = DateTime.ParseExact("11 Jan 2011" , @"dd MMM yyyy", System.Globalization.CultureInfo.InvariantCulture)`.;

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T16:34:59.317

解析和显示不是一回事

您将原始字符串解析为 DateTime 对象，但使用[日期/时间格式字符串显示结果](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T16:35:34.780

你的两个电话都是正确的。

`DateTime`结构不保留有关*格式*的信息；它只代表原始日期和时间。

您需要做的是确保在*显示*日期时以正确的格式显示 - 例如通过调用`string displayString = date.ToString("dd MMM yyyy");`

# json - 从 groovy 模板“很好地”访问 Json

> ID：14200041
> 
> 赞同：1
> 
> 时间：2013-01-07T16:32:33.003
> 
> 标签：json, groovy, playframework, gson, playframework-1.x

我有一个从控制器接收 JsonArray (gson) 的 groovy 模板。我想要做的是生成一些 HTML，其中填充了该数组中包含的 JsonObjects 中的一些信息。像这样的东西（为清楚起见而简化）：

```
<ul>
#{list items: sections, as:'section'}
   <li>${section.getAsJsonObject().get("title").getAsString()}
    <ul>
    #{list items: section.getAsJsonObject().getAsJsonArray("articles"), as:'article'}
        <li><a href="${article.getAsJsonObject().get("url").getAsString()}">${article.getAsJsonObject().get("title").getAsString()}</a></li>
    #{/list}
    </ul>
   </li>
#{/list}
</ul> 
```

我发现必须一直执行整个 getAsJsonWhatever() 非常不方便。你知道替代方案吗？

请记住，以下不是我正在寻找的答案：

*   将 json 发送到客户端并使用 javascript
*   用控制器中的代码来做
*   使用 %{ }% 标记内的代码执行此操作
*   将 json 对象转换为控制器中的 java 对象并将其传递给模板（尽管这是我最喜欢的替代方法）

**编辑：解决方案**

这就是应用 Seb 的解决方案后的结果：

控制器：

```
Object json = slurper.parseText(response.getString());
render(json); 
```

模板：

```
<ul>
#{list items: json.data.publication.sections, as:'section'}
   <li>${section.title}
    <ul>
    #{list items: section.articles, as:'article'}
        <li><a href="${article.url}">${article.title}</a></li>
    #{/list}
    </ul>
   </li>
#{/list}
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:00:16.843

我猜你是从 WS 调用中得到你的 json 的。

无需使用默认 WS 方法转换 json 的结果，您可以将结果作为字符串获取，并使用 groovy.json.JsonSlurper.parseText 方法获取 groovy 对象，您可以将其用作 groovy 模板中的标准对象。

这是我在我的一个模板中所做的

```
%{
def slurper = new groovy.json.JsonSlurper()
def jsonResult = slurper.parseText(response.getString())

if (jsonResult.success) {
    ...
}
}% 
```

# c# - 如何使动态添加的按钮可点击

> ID：14200043
> 
> 赞同：1
> 
> 时间：2013-01-07T16:32:37.183
> 
> 标签：c#, .net, winforms

我正在创建一个 C# 应用程序，它从数据库中获取数据，并在一行中动态创建 5 个文本框和一个按钮。

数据库中存在的行数等于创建的文本框和按钮的行数。

我可以成功地创建文本框和按钮的行，文本框甚至能够显示从数据库中获取的数据。

然而，我的问题是生成的按钮在单击时什么也不做，现在这并不意外，因为我还没有创建处理程序来处理单击事件。但我对如何为再次动态生成的按钮动态创建点击事件处理程序感到困惑。

下面是生成文本框和按钮的代码示例。

```
for (int i = 3; i <= count; i++)
{
    com.Parameters[0].Value = i;
    using (SqlCeDataReader rd = com.ExecuteReader())
    if (rd.Read())
    {
        pname = (rd["pname"].ToString());
        cname = (rd["cname"].ToString());
        budget = (rd["budget"].ToString());
        advance = (rd["advance"].ToString());
        ddate = (rd["ddate"].ToString());

        TextBox tobj = new TextBox();
        tobj.Location = new Point(10, (40 + ((i - 2) * 20)));
        tobj.Tag = 1;
        tobj.Text = pname;
        tobj.AutoSize = false;
        tobj.Width = 150;
        tobj.ReadOnly = true;
        this.Controls.Add(tobj);

        TextBox tobj1 = new TextBox();
        tobj1.Location = new Point(160, (40 + ((i - 2) * 20)));
        tobj1.Tag = 2;
        tobj1.Text = cname;
        tobj1.AutoSize = false;
        tobj1.Width = 150;
        tobj1.ReadOnly = true;
        this.Controls.Add(tobj1);

        TextBox tobj2 = new TextBox();
        tobj2.Location = new Point(310, (40 + ((i - 2) * 20)));
        tobj2.Tag = 3;
        tobj2.Text = budget;
        tobj2.AutoSize = false;
        tobj2.Width = 100;
        tobj2.ReadOnly = true;
        this.Controls.Add(tobj2);

        TextBox tobj3 = new TextBox();
        tobj3.Location = new Point(410, (40 + ((i - 2) * 20)));
        tobj3.Tag = 4;
        tobj3.Text = advance;
        tobj3.AutoSize = false;
        tobj3.Width = 100;
        tobj3.ReadOnly = true;
        this.Controls.Add(tobj3);

        TextBox tobj4 = new TextBox();
        tobj4.Location = new Point(510, (40 + ((i - 2) * 20)));
        tobj4.Tag = 5;
        tobj4.Text = ddate;
        tobj4.AutoSize = false;
        tobj4.Width = 100;
        tobj4.ReadOnly = true;

        int due = 0;
        due = int.Parse(ddate);
        if (due < 5)
        {
             tobj4.BackColor = System.Drawing.Color.Red;
        }

        this.Controls.Add(tobj4);

        Button button = new Button();
        button.Left = 620;
        button.Tag = i;
        button.Height = 20;
        button.Text = "Details";
        button.Top = (40 + ((i - 2) * 20));
        this.Controls.Add(button);  
    }
} 
```

请给我一些关于如何生成点击事件处理程序的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T16:38:38.983

回答部分：

添加这个：

```
button.Tag = i;
button.Click += handleTheClick;

...

private void handleTheClick(object sender, EventArgs e){
    Button btn = sender as Button;
    int row = (int)btn.Tag;
} 
```

未回答：

你应该重新考虑你的设计。在 2013 年，在数据处理代码中包含坐标是一个非常糟糕的主意，请尝试使用 ListView、ListBox、GridView 或更好的 - 切换到 WPF。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T16:37:29.983

您需要订阅`Click`事件：

```
button.Click += ... some event handler ... 
```

您可以使用处理程序的方法：

```
button.Click += MyEventHandlerMethod;

// put this method somewhere in your Form class
void MyEventHandlerMethod( object sender, EventArgs args )
{
  ... 
```

甚至是一个 lambda：

```
button.Click += ( s, e ) => HandleClick( ... any parameters here ... );

// put this method somewhere in your Form class
void HandleClick( ... required parameters ... )
{
  ... 
```

作为提示，您可以查看`.designer.cs`普通表单的文件以了解事情是如何完成的。

# batch-file - 将文件添加到文件夹

> ID：14200044
> 
> 赞同：0
> 
> 时间：2013-01-07T16:32:49.040
> 
> 标签：batch-file

我有他的名字：

fd3_xxx fd3_xx1 fd3_xx2 fd6_xxx fd6_xx1 fd6_xx2

如何编写一个批处理文件，将所有“fd3”文件放入名为“fd3”的文件夹中，并将所有“fd6”文件放入名为“fd6”的文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:48:05.443

```
@echo off
for %%a in (*.*) do (
   for /F "delims=_" %%b in ("%%a") do (
      if not exist "%%b" md "%%b"
      move "%%a" "%%b"
   )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:43:16.577

这应该这样做

```
xcopy fd3_* fd3 /i
xcopy fd6_* fd6 /i
del fd3_* /f /q
del fd6_* /f /q 
```

也许先在一些测试文件夹上尝试它，以确保它符合您的要求。

# java - Android scrollview 去除蓝光

> ID：14200046
> 
> 赞同：28
> 
> 时间：2013-01-07T16:32:59.307
> 
> 标签：java, android, xml, android-layout

当您使用滚动视图在 Android 上滚动时，它会在您滚动的方向上生成蓝光。如何移除蓝光？

我的清单：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/sobreScrollView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:cacheColorHint="@android:color/transparent"
android:scrollingCache="false" 
android:fadingEdge="none"
android:fadingEdgeLength="0dp"
android:scrollbars="none"
android:scrollbarStyle="insideOverlay"  
    >    

    <LinearLayout
        android:id="@+id/contentSobre"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" > 
```

Java源代码：

```
package com.my.app.section;
import android.content.Context;
import android.util.AttributeSet; 
import com.my.app.BaseSection; 
import com.my.app.R;

public class SobreSection extends BaseSection {

public SobreSection(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public SobreSection(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public SobreSection(Context context) {
    super(context);
}

@Override
protected void onFinishInflate() {
    // TODO Auto-generated method stub
    super.onFinishInflate();

    findViewById(R.id.sobreScrollView).setVerticalFadingEdgeEnabled(false);
    findViewById(R.id.sobreScrollView).setVerticalScrollBarEnabled(false);

}
  } 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-01-07T16:44:35.587

尝试将此添加到您的 layout.xml 中的 ScrollView：

```
android:overScrollMode="never" 
```

或将此添加到您的代码中：

```
findViewById(R.id.sobreScrollView).setOverScrollMode(ScrollView.OVER_SCROLL_NEV‌​ER); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-07T17:08:54.737

将此额外的行添加到您的`ScrollView`定义中：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/sobreScrollView"
    ...
    android:overScrollMode="never"> 
```

# android - 如何压缩重复的 switch 语句

> ID：14200055
> 
> 赞同：1
> 
> 时间：2013-01-07T16:33:18.220
> 
> 标签：android, xml, switch-statement, dry

我有一个包含许多字符串数组的 Android 应用程序的 XML 资源文件，每个字符串数组都命名为 word#，其中 # 是一个数字（当前为 0-100）。即word0、word1等。

我正在使用 Random 选择一个随机数，然后使用 switch 语句根据该数字选择正确的数组。所以，如果 random.nextInt 返回 4，我想返回 R.array.word4

这是我的代码：

```
private String[] getWordArray(int i) { //i is a random number

        Resources res = getResources();
        String[] x = new String[8];

        switch(i){
        case 0: x = res.getStringArray(R.array.word0); break;
        case 1: x = res.getStringArray(R.array.word1); break;
        case 2: x = res.getStringArray(R.array.word2); break;
        case 3: x = res.getStringArray(R.array.word3); break;
//and so on
} 
```

我知道这是非常重复的，特别是因为我最终想要拥有 1000 个数组。我能做些什么来让这变得更好？

我必须使用 XML 资源存储方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T16:41:09.460

您可以通过名称获取资源 id：

```
final Resources resources = getResources();
final String name = "word" + i;
final int id = resources.getIdentifier(name, "array", getPackageName());
final String[] array = resources.getStringArray(id); 
```

# opencv - 使用 OpenCV 的视觉里程计（又名自我运动估计）

> ID：14200057
> 
> 赞同：9
> 
> 时间：2013-01-07T16:33:40.343
> 
> 标签：opencv, augmented-reality, motion-detection

我计划实现一个具有增强现实功能的应用程序。对于其中一个功能，我需要一个自我运动估计。在具有固定物体的空间中，只有相机在移动（没有或只有小部分会移动，因此它们可能会被忽略）。

所以我搜索并阅读了很多内容并偶然发现了[OpenCV](http://opencv.org/)。维基百科明确指出[它可以用于自我运动](http://en.wikipedia.org/wiki/OpenCV#Applications)。但我找不到任何关于它的文档。

1.  我是否需要使用 OpenCV 的对象检测方法自己实现自我运动算法？（我认为这会非常复杂，因为物体会根据它们与相机的距离以不同的速度移动。而且我还需要考虑旋转。）
2.  如果是这样，我应该从哪里开始？[是否有支持缩放和旋转](http://en.wikipedia.org/wiki/Kanade%E2%80%93Lucas%E2%80%93Tomasi_feature_tracker#Further_generalizations)的 Kanade–Lucas–Tomasi 特征跟踪器的良好代码示例？

PS：我也知道像[vuforia](https://developer.qualcomm.com/develop/mobile-technologies/augmented-reality)这样的基于标记的框架，但是我想防止使用标记，因为它限制了可能的观点。

*2013-01-08 更新：我了解到 Egomotion Estimation 更好地称为 Visual Odometry。所以我更新了标题。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T07:54:23.567

[您可以在此处](http://www.hessmer.org/blog/2010/08/17/monocular-visual-odometry/)找到基于光流的单目视觉里程计的良好实现。

它是使用 emgucv（C# opencv 包装器）编码的，但您不会发现将其转换回纯 opencv 时没有任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:04:40.020

Egomotion（或视觉里程计）通常基于光流，OpenCv 具有一些用于计算光流的[运动分析和对象跟踪功能](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html)（与类似的特征检测器结合使用`cvGoodFeaturesToTrack()`）。

[这个例子](http://dasl.mem.drexel.edu/~noahKuntz/openCVTut9.html)可能有用。

不是一个完整的解决方案，但至少可以让你朝着正确的方向前进。

# python - 在 Z3Py 中检索枚举类型的值

> ID：14200058
> 
> 赞同：5
> 
> 时间：2013-01-07T16:33:48.363
> 
> 标签：python, z3

如何检索枚举变量的值`v` ？例如，

```
vTyp, (val1,val2,val3) = EnumSort('vTyp',['val1','val2','val3'])
v = Const('my variable',vTyp) 
```

现在，给定上面*的*变量`v`，我将如何检索（上面的表达式在哪里）的 `[val1,val2,val3]`值`v`列表`val1,val3,val3`？

我已经尝试过`[v.sort().constructor(0), ...(1), ...(2)]` ，但构造函数方法不返回表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T16:58:17.943

该表达式`v.sort().constructor(0)`返回一个 Z3 函数声明。在 Z3 中，常量是具有 0 个参数的函数。要将声明转换为常量表达式，我们应该使用`v.sort().constructor(0)()`.

顺便说一句，该函数`is_func_decl`可用于测试对象是否为 Z3 函数声明。该函数`is_expr`等效于 Z3 表达式。

```
print is_func_decl(v.sort().constructor(0))
print is_expr(v.sort().constructor(0))
print is_expr(v.sort().constructor(0)()) 
```

# facebook - 如果我请求电子邮件许可，我会不会得到用户的电子邮件地址？

> ID：14200059
> 
> 赞同：0
> 
> 时间：2013-01-07T16:33:48.567
> 
> 标签：facebook, facebook-graph-api, user-permissions

我正在使用 Graph API 并且能够成功获取用户的电子邮件地址。

我想知道我是否可以假设我总是会取回用户的电子邮件地址，或者我是否需要计划一些边缘场景，其中设置了用户的权限或其他东西，我将无法获取用户的电子邮件地址。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:43:03.643

只要您请求`email`许可并且用户接受它，您将**始终**收到用户电子邮件。但是，您需要预见到用户不接受它的情况。

# sql-server - 2008 年编写的 SSIS 包在 2005 年运行

> ID：14200067
> 
> 赞同：2
> 
> 时间：2013-01-07T16:34:14.730
> 
> 标签：sql-server, sql-server-2008, ssis

我有一个我在 2008 年编写的 SSIS 包，我需要在具有 2005 年的服务器上运行。

我知道我无法将 2008 年转换为 2005 年。

我的问题是我可以将 2008 版本的 DTEXEC.exe 从 2008 服务器复制到 2005 服务器，然后将我的作业指向使用我复制到 2005 服务器的 2008 版本吗？

我不确定是否需要其他文件/等或不同版本的 DLL 等。还是 DTEXEC.EXE 是一个独立程序，我建议的内容是否可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T16:36:16.803

仅复制 .exe 将无济于事。dtexec.exe 将查找所需的 DLL 文件，当它找不到这些文件时，它将失败。您将需要安装 2008 或在 2005 中重新设计软件包。

# zend-framework - 如何在 ZF1 中使用自定义语言环境文件？

> ID：14200068
> 
> 赞同：1
> 
> 时间：2013-01-07T16:34:17.273
> 
> 标签：zend-framework, locale

是否可以在 ZF1 应用程序中使用自定义语言环境（或修改现有语言环境）？（也就是说，我自己的文件版本`Zend/Locale/Data`。）

例如：

```
$locale = new Zend_Locale("/path/to/mylocale.xml"); 
```

（这看起来是不可能的，因为`Zend_Locale_Data::_findRoute()`被硬编码为在特定目录中查找语言环境文件。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:30:19.963

这是不可能的，但是您可以将错误提交到他们的错误系统 [http://framework.zend.com/issues/browse/ZF#selectedTab=com.atlassian.jira.plugin.system.project%3Aissues-panel](http://framework.zend.com/issues/browse/ZF#selectedTab=com.atlassian.jira.plugin.system.project%3Aissues-panel)

需要注册。

# php - 我需要清理一个 SQL 表并删除所有比现在更旧的条目，*并且*将即将到来的条目“向上移动”.. 最好的方法？

> ID：14200069
> 
> 赞同：0
> 
> 时间：2013-01-07T16:34:21.797
> 
> 标签：php, mysql, codeigniter

我有一个 SQL 表，用户在其中列出了他们接下来即将举行的三场艺术展。

我正在整理一个 cron 作业维护脚本，我希望它可以删除已经发生的节目。但后来我也想“将其他人向上移动”.. 这样 show1 被擦除，但 show2 变成 show1， show3 变成 show2， show3 现在是空的。

这是解决这个问题的最佳方法吗？（使用 Codeigniter 顺便说一句）请注意，对于每个节目，实际上还有其他信息（show1title、show1desc 等）我必须移动......但为了清楚起见，我在此处减少了它。

```
$_sql = "SELECT users.id FROM users WHERE users.show1date < CURDATE() AND users.show1date != 0000-00-00";
$_query = $this->db->query( $_sql );
if ($_query->numRows() > 0){
    foreach ($_query as $_row) {
        $_id = $row->id;
        $_show2date = $_row->show2date;
        $_show3date = $_row->show3date;
        $_sql = "UPDATE users SET users.show1date = ?, users.show2date = ?, users.show3date ='' WHERE users.id = ?";
        $_query = $this->db->query( $_sql, array($show2date, $show3date, $_id) );
    }
} 
```

这将“移动所有节目”并使 show3 现在为空。这是解决这个问题的好方法吗？似乎有更好的方法？

现在我在想..也许是一个单独的表格，用于以 user.id 作为外键的节目？

# javascript - JavaScript：读取 8 个字节到 64 位整数

> ID：14200071
> 
> 赞同：5
> 
> 时间：2013-01-07T16:34:30.880
> 
> 标签：javascript, node.js, integer, buffer, byte

我有一个包含八个字节的缓冲区对象。这八个字节现在应该被解释为 64 位整数。

目前我使用以下算法：

```
var int = buff[0];

for (var i = 1; i < buff.length; i++) {
    int += (buff[i] * Math.pow(2, 8 * i));
}

console.log(int); 
```

这行得通，但我相信有更好的方法（也许使用 Uint64Array）。

不幸的是，我在这里找不到 Uint16Array 如何帮助我。

问候

更新：

```
// puts two 32bit integers to one 64bit integer
var bufInt = (buf.readUInt32BE(0) << 8) + buf.readUInt32BE(4); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T16:37:26.073

Javascript 不支持 64 位整数，因为原生数字类型是 64 位双精度数，仅给出 53 位整数范围。

您可以创建 32 位数字的数组（即`Uint32Array`），但如果有 64 位版本的数组，则无法将值从其中复制到独立变量中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T16:46:17.877

您可以使用[`node-int64`](https://github.com/broofa/node-int64)64 位整数支持：

```
var Int64 = require('node-int64');
var int64 = new Int64(buff); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-24T10:49:55.623

由于最新的 Node.js v12.0.0，您现在可以使用`buf.readBigUInt64LE`:))

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-07-21T06:57:57.343

由于 javascript 不支持 64 位整数，这是一种对我有用的解决方案。这里我正在转换 8 字节 unix 时间戳。

```
inputString = "0000016b40d8ea30"    
var buf = Buffer.from(inputString, 'hex');
timestamp = (parseInt(buf.toString("hex"),16).toString());
console.log(timestamp); //1560161086000 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-31T21:32:43.333

遗憾的是，正确答案是 Javascript 不支持 64 位整数（直到现在）。

因此，尝试将精确的 64 位整数存储到您的 8 个字节中到单个 JS 数字类型变量中将失败。反正。

一些决定：

1.  从 0 到 52 的精确位：

如果您不需要 64 位的高 11 位，并且足以处理精确的 53 位整数，则可以使用这种方式：

```
// puts up to 53 bits by 32bit integers to one "64bit" integer
var bufInt = (buf.readUInt32BE(0) & 0x001FFFFF) * 4294967296 + buf.readUInt32BE(4); 
```

*（已编辑问题）*

2.  "64bit" int 可能会丢失低 11 位正确状态：

否则，如果您需要 64 位的“通用大值”，并且您对直到 11 个低位（巨大 64 位值的最右边 2-3 位）的精确值不感兴趣，您可以使用这种方式：

```
// puts 64 bit value by 32bit integers to one "64bit" integer
// with possible loose of lower 11 bits correctness
var bufInt = buf.readUInt32BE(0) * 4294967296 + buf.readUInt32BE(4); 
```

* * *

**对于那些对 Javascript 中的 int64（64 位整数支持）感兴趣的人，请注意！**

看：

```
var x1 = 1 << 30;
var x2 = 1 << 31;
var x3 = 1 << 32;
var x4 = 1 << 33;
var a = 1240611072103715194;
var b = 1240611072103715193;
var c = 1240611072103700000;
alert(''
    + 'x1=' + x1 + ' (should =1073741824)\n' 
    + 'x2=' + x2 + ' (should =2147483648)\n' 
    + 'x3=' + x3 + ' (should =4294967296)\n' 
    + 'x4=' + x4 + ' (should =8589934592)\n' 
    + 'a=' + a + ' (should =1240611072103715194)\n' 
    + 'a-b=' + (a-b) + ' (should =1)\n'
    + 'a-c=' + (a-c) + ' (should =15194)\n'
);

RESULT:

x1=1073741824 (should =1073741824)
x2=-2147483648 (should =2147483648)
x3=1 (should =4294967296)
x4=2 (should =8589934592)
a=1240611072103715000 (should =1240611072103715194)
a-b=0 (should =1)
a-c=15104 (should =15194) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T16:40:16.343

有一些模块可以提供 64 位整数支持：

*   [节点大整数](https://github.com/substack/node-bigint)
*   [bignum（基于 OpenSSL）](https://github.com/justmoon/node-bignum)

也许您的问题可以使用其中一个库来解决。

# c# - 在c#中的连字符之前和星号之后拾取一个特定的字符串

> ID：14200072
> 
> 赞同：1
> 
> 时间：2013-01-07T16:34:31.113
> 
> 标签：c#, asp.net, split

例如，我想从一个字符串中提取三个字符串`Vks - Vks * Son`

```
 txtName.Text = objDoctor.DocName.Substring(0, objDoctor.DocName.IndexOf("-")).Trim(); 
```

我已经成功获得了第一部分，即

```
txtMidName.Text = objDoctor.DocName.Substring(1, objDoctor.DocName.IndexOf("-")).Trim();

 txtLastName.Text = objDoctor.DocName.Substring(0,objDoctor.DocName.LastIndexOf("*")).Trim(); 
```

注意：第二部分是中间名，第三部分`Vks - Vks * Son`即儿子是姓氏

请检查一下：

```
 Name = Name.Trim();

arrNames = Name.Split(' ', '-' , '*');

if (arrNames.Length > 0) {
    GivenName = arrNames[0];
}
if (arrNames.Length > 1) {
    FamilyName = arrNames[arrNames.Length - 1];
}
if (arrNames.Length > 2) {
    MiddleName = string.Join(" ", arrNames, 1, arrNames.Length - 2);
} 
```

**真的会帮助某人**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T16:36:50.810

只需使用[`string.Split`](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)：

```
var parts = objDoctor.DocName.Split('-', '*');
txtName.Text = parts[0];
txtMidName.Text = parts[1];
txtLastName.Text = parts[2]; 
```

请注意，如果字符串不包含至少三个部分，这将引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T16:55:18.460

使用 String.Split 方法。我还假设您也想摆脱这些空间？

```
String data = "Vks - Vks * Son";
String[] pieces = (from piece in data.Split(new char[]{'-', '*'}, StringSplitOptions.RemoveEmptyEntries)
                                select piece.Trim()).ToArray();

Console.WriteLine(pieces[0]);
Console.WriteLine(pieces[1]);
Console.WriteLine(pieces[2]); 
```

所以我使用了一点 LINQ 来帮助在字符串被分割后修剪掉它们的空间。

这在命令行上给出了以下结果：

```
Vks
Vks
Son 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T17:03:28.993

我会使用正则表达式来解析这样的字符串。

但当然有一个学习曲线。但是一旦掌握了，就容易多了。所以这是替代方案：

```
string parse = "Vks - Vks * Son";
string pattern = @"(?'first'\w*)\s*-\s*(?'second'\w*)\s*\*\s*(?'last'\w*)";
Match m = Regex.Match(parse, pattern);
if (m.Success)
{
   Console.WriteLine(m.Groups["first"].Value);
   Console.WriteLine(m.Groups["second"].Value);
   Console.WriteLine(m.Groups["last"].Value);
} 
```

模式的快速解释：

我们将字符串分成 3 个部分：第一个、第二个和最后一个。

一个单词（0 个或多个字符）是 \w* - 如果至少需要一个字符，请使用 \w+

\s*-\s* 是空格（0 个或多个空格字符）后跟“-”，然后是空格（再次是 0 个或多个空格字符。

\s*\*\s* - 因为 '*' 是一个特殊字符，我们必须对其进行转义。

希望这可以帮助。

BD

# javascript - 使用 Spring 控制器的慢速 GET 请求

> ID：14200078
> 
> 赞同：1
> 
> 时间：2013-01-07T16:34:43.217
> 
> 标签：javascript, performance, spring, tomcat, request

这是描述该问题的两种实现方式。

第一个是工作非常缓慢的方法。它尝试从服务器获取数据，但请求`pending`太长，然后才返回数据并且一切都很好（除了可怕的同步性能）。

```
asyncMethod: function(doSmth, param) {  
    var resp = $.ajax({
        type: 'GET',
        async: false,
        url: 'url'
    });
    data = resp.responseText;
    doSmth(param, data);
} 
```

这是相同的方法，但它是**异步**的。性能问题在这里被消除了。但它只有在重新加载页面时才能成功执行该部分。可能重新加载会停止一些执行，这些执行是先前代码示例的瓶颈。

```
asyncMethod: function(doSmth, param) {  
    var resp = $.ajax({
        type: 'GET',
        url: 'url',
        success: function () {
            data = resp.responseText;
            doSmth(param, data);
        }
    });
} 
```

我不需要使用异步请求，如果同步请求工作得很快（但现在没有了）。似乎有一些处决，使请求保持等待太久。我没有看到可能成为瓶颈的执行。也许它在使用的库中的某个地方，但`resp`在处理时没有其他请求处于活动状态。

解决问题或分析问题的方法是什么？建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:57:04.760

您是否尝试过这样的异步方法：

```
asyncMethod: function(doSmth, param) {  
    $.ajax({
        type: 'GET',
        url: 'url',
        success: function (response, status) {
            doSmth(param, response.responseText);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:38:22.433

如果响应长时间处于“待处理”状态，则有两个主要罪魁祸首：

*   完成 ajax 请求的应用程序代码花费的时间比预期的要长
*   简单的网络延迟（在应用层可以做的不多）

如果您有权访问满足请求的代码，那么我将从那里开始。此外，如果与您的所有其他请求相比，此请求花费的时间异常长，则可能不是网络问题

# linux - Sh - 获取下一个数组元素

> ID：14200079
> 
> 赞同：1
> 
> 时间：2013-01-07T11:40:20.870
> 
> 标签：linux, bash, shell, sh

我的脚本使用的参数是我的两倍：

第一次使用以下代码，以确保没有我不想要的参数（我只考虑 arg1:arg2:arg3）

```
 PARAM=$@
     while [ "$#" -gt "0" ]; do
              case $1 in
                       arg1)
                                shift2
                                ;;
                       arg2)
                                shift
                                ;;
                       arg3)
                                shift
                                ;;
                       *)
                                echo "Usage : ./test.sh arg1 <VAL1> <VAL2> [arg2] [arg3]"
                                exit 2
                                ;;
              esac
              shift
     done 
```

我想重新解析这些参数，并能够在我得到 arg1 时得到以下两个参数，所以我从这样的事情开始：

```
 for command in $PARAM
     do
         case $command in
             arg1)
                 shift
                 VALUE1=$command
                 shift
                 VALUE2=$command
                 exec_arg1
                 ;;
         esac
         shift 
```

但是在使用“shift”时，我得到了错误*shift: can't shift that many*

shebang 是“#!/bin/sh”，我正在寻找一个无需使用 bash 的 shebang 的解决方案（即“#!/bin/bash”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:16:31.870

您不能将列表连接到字符串并安全地将其转回列表（没有[复杂的辅助函数](https://github.com/vaeth/push/)）。请参阅[此常见问题解答](http://mywiki.wooledge.org/BashFAQ/050)。

`shift`在不同的 shell 中表现不同。在 Bash 和 Zsh 中，当没有保留位置参数时，`shift`只返回 false。包括 Dash 在内的许多 shell（与 POSIX 相反，可能是因为 ksh 行为）反而会引发致命错误。ksh93 通过内置提供了一种解决此问题的方法`command`，但这似乎也不是由 POSIX 指定的，尽管这个 workaroud 无论如何也适用于 Dash，但不是`mksh`（我昨天刚刚发现的 mksh 中还有一个错误阻止它工作，并且维护者可能不会以允许解决方法的方式修复它）。Busybox 也不遵循 POSIX，也没有给出有意义的退出代码。

无论如何，关键是您不能依赖，`shift`因为这里有很多 shell 有错误。如果可能的话，您应该迭代参数而不移动它们，并以确保您不会像当前那样移动到边缘的方式测试剩余参数的数量。我认为您预先验证参数的想法并不比同时验证和解析更好。

```
#!/bin/sh

f()
    if ! ${_called_f+false}; then
        while ! ${1+false}; do
            case $1 in
                arg1)
                    ${3+:} return 1
                    value1=$2 value2=$3
                    shift 3
                    exec_arg1
                    ;;
                arg[23])
                    ${2+:} return 1
                    value1=$1
                    shift
                    "exec_arg${value1##"${value1%?}"}" # Only do this crap if restricted to POSIX
                    ;;
                *)
                    return 1
            esac
        done
    else
        # Hack nobody will understand since this probably isn't what you want anyway.
        _called_f= value1= value2= command eval \
            'typeset +x value{1,2} 2>/dev/null; f "$@"'
    fi

if ! f "$@"; then
    echo 'Error parsing args, exiting...' >&2
    exit 1
fi 
```

参见：[选项解析](http://mywiki.wooledge.org/BashFAQ/035)

# postgresql - 如何安全地将数据库数据从一台计算机发送到另一台计算机？

> ID：14200081
> 
> 赞同：0
> 
> 时间：2013-01-07T16:34:54.307
> 
> 标签：postgresql

我有一个包含数据的 postgres 数据库，我需要复制数据并将其发送到不同国家的另一台计算机。安全地执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:39:35.967

您可以备份和恢复数据。 [http://www.postgresql.org/docs/8.1/static/backup.html](http://www.postgresql.org/docs/8.1/static/backup.html)

或者您可以同步数据 [http://wiki.postgresql.org/wiki/Replication,_Clustering,_and_Connection_Pooling](http://wiki.postgresql.org/wiki/Replication,_Clustering,_and_Connection_Pooling)

# c# - 使用 MonoDroid 接收短信

> ID：14200091
> 
> 赞同：5
> 
> 时间：2013-01-07T16:35:47.977
> 
> 标签：c#, android, android-intent, xamarin.android, xamarin

编辑：现在已解决 - 在此处发布解决方案以防将来有人需要它，或者任何人都可以提出更好的方法。我从清单中删除了意图内容，并在我的 SmsReceiver 类中设置了 BroadcastReceiver。这现在有效。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.Util;
using Android.Telephony;

namespace dummyAndroid
{
    [BroadcastReceiver(Enabled = true, Label = "SMS Receiver")]
    [IntentFilter(new string[] { "android.provider.Telephony.SMS_RECEIVED" })] 
    public class SmsReceiver : Android.Content.BroadcastReceiver 
    {
        public static readonly string INTENT_ACTION = "android.provider.Telephony.SMS_RECEIVED"; 

        public override void OnReceive(Context context, Intent intent)
        {
            if (intent.Action == INTENT_ACTION)
            {
                StringBuilder buffer = new StringBuilder();
                Bundle bundle = intent.Extras;

                if (bundle != null)
                {
                    Java.Lang.Object[] pdus = (Java.Lang.Object[])bundle.Get("pdus");

                    SmsMessage[] msgs;
                    msgs = new SmsMessage[pdus.Length];

                    for (int i = 0; i < msgs.Length; i++)
                    {
                        msgs[i] = SmsMessage.CreateFromPdu((byte[])pdus[i]);

                        Log.Info("SmsReceiver", "SMS Received from: " + msgs[i].OriginatingAddress);
                        Log.Info("SmsReceiver", "SMS Data: " + msgs[i].MessageBody.ToString());
                    }

                    Log.Info("SmsReceiver", "SMS Received");
                }
            } 
        }
    }
} 
```

我正在编写一个发送/接收 SMS 消息并通过 SMS Mananger 发送工作的应用程序。

我现在正在尝试在 Mono for Android 中接收 SMS，并且是 Android 开发的新手，所以可能做错了什么！

我已将以下内容添加到我的清单中

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:installLocation="auto" package="com.me.dummyAndroid" android:versionCode="1" android:versionName="1">
  <uses-sdk android:targetSdkVersion="8" />
  <application 
        android:label="meAndroidSMS"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
    <receiver android:name=".SmsReceiver">
      <intent-filter>
        <action android:name=
                    "android.provider.Telephony.SMS_RECEIVED" />
      </intent-filter>
    </receiver>
  </application>
  <uses-permission android:name="android.permission.SEND_SMS" />
  <uses-permission android:name="android.permission.RECEIVE_SMS" />
  <uses-permission android:name="android.permission.READ_SMS" />
</manifest> 
```

然后，我创建了一个名为 SmsReceiver.cs 的新类，我已将函数 onReceive 添加到其中，但意图中似乎没有 getExtras 函数，根据我阅读的在线教程，我需要（[http://www. techques.com/question/1-3542320/iPhone-Android-SMS-intercept-and-redirection-to-an-application](http://www.techques.com/question/1-3542320/IPhone-Android-SMS-intercept-and-redirection-to-an-application) .)。

```
namespace dummyAndroid
{
    class SmsReceiver
    {
        public void onReceive(Context context, Intent intent)
        {
            Bundle bundle = intent.getExtras();

        }
    }
} 
```

我很感激我肯定对 Android 和 MonoDroid 有点不知所措，但也许有人可以为我指明正确的方向！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T10:08:05.770

我这里有一些工作代码（我不记得源代码，但我认为是与 Xamarin 相关的人编写了此示例），当收到 SMS 时显示 Toast。

```
using System.Text;

using Android.App;
using Android.Content;
using Android.Runtime;
using Android.Util;
using Android.Widget;
using Android.Telephony;
using Environment = System.Environment;

namespace MonoDroid.SMSFun
{
    [BroadcastReceiver(Enabled = true, Label = "SMS Receiver")]
    [IntentFilter(new[] { "android.provider.Telephony.SMS_RECEIVED" })] 
    public class SMSBroadcastReceiver : BroadcastReceiver
    {
        private const string Tag = "SMSBroadcastReceiver";
        private const string IntentAction = "android.provider.Telephony.SMS_RECEIVED"; 

        public override void OnReceive(Context context, Intent intent)
        {
            Log.Info(Tag, "Intent received: " + intent.Action);

            if (intent.Action != IntentAction) return;

            var bundle = intent.Extras;

            if (bundle == null) return;

            var pdus = bundle.Get("pdus");
            var castedPdus = JNIEnv.GetArray<Java.Lang.Object>(pdus.Handle);

            var msgs = new SmsMessage[castedPdus.Length];

            var sb = new StringBuilder();

            for (var i = 0; i < msgs.Length; i++)
            {
                var bytes = new byte[JNIEnv.GetArrayLength(castedPdus[i].Handle)];
                JNIEnv.CopyArray(castedPdus[i].Handle, bytes);

                msgs[i] = SmsMessage.CreateFromPdu(bytes);

                sb.Append(string.Format("SMS From: {0}{1}Body: {2}{1}", msgs[i].OriginatingAddress,
                                        Environment.NewLine, msgs[i].MessageBody));
            }

            Toast.MakeText(context, sb.ToString(), ToastLength.Long).Show();
        }
    }
} 
```

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:installLocation="internalOnly" package="monodroid.smsfun" android:versionCode="1" android:versionName="1.0">
  <uses-sdk android:targetSdkVersion="8" />
  <application android:label="SMSFun">
  </application>
  <uses-permission android:name="android.permission.RECEIVE_SMS" />
</manifest> 
```

# linux-kernel - blk_queue_segment_boundary()的用法是什么

> ID：14200095
> 
> 赞同：1
> 
> 时间：2013-01-07T16:36:03.970
> 
> 标签：linux-kernel, linux-device-driver, block-device

这本书 ldd 对函数 blk_queue_segment_boundary() 说如下：

> 有些设备无法处理跨越特定大小内存边界的请求；如果您的设备是其中之一，请使用此函数告诉内核该边界。例如，如果您的设备在处理跨越 4 MB 边界的请求时遇到问题，请传入掩码 0x3fffff。默认掩码为 0xffffffff。

我不太明白这里的边界是什么意思，比如我有一个虚拟块设备，它确实是由4MB的文件组成的，所以我想要一个不超过4MB边界的请求，

```
unsigned long sector = blk_rq_pos(req);
unsigned long offset = sector << 9;
unsigned long nbytes = blk_rq_bytes(req);

int file_offset = offset % (1 << 22); 
```

我想要的是 (file_offset + nbytes) 不大于 4M，但确实有时超过 4M，那么，对 blk_queue_segment_boundary() 有什么误解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:57:45.877

某些控制器（尤其是 IDE）无法处理跨 4MB 内存区域的 DMA 请求。将其视为段：索引寻址，其中索引不能大于设置的边界。

还有一个`blk_queue_max_segment_size`。两者都用于构造对设备的正确请求 - 请求被重新排序和合并。

还有其他用途。例如，来自`xen-blkfront.c`：

```
/* Each segment in a request is up to an aligned page in size. */
blk_queue_segment_boundary(rq, PAGE_SIZE - 1);
blk_queue_max_segment_size(rq, PAGE_SIZE); 
```

请求仅限`PAGE_SIZE`于更好的性能。

# javascript - Ajax 文件检查成功后不会更改变量

> ID：14200097
> 
> 赞同：0
> 
> 时间：2013-01-07T16:36:10.410
> 
> 标签：javascript, jquery, ajax, image, html

我正在使用 ajax 来检查我的图像目录中是否有可用的文件。如果它在那里，我将它附加到我的 html 代码中，并将一个布尔值更改为 true，让用户知道它被找到了。如果它没有找到文件名，我检查它是否是一个 2 部分图像（连接图像名称末尾的数字 1 和 2 并生成 2 个图像）。布尔值也更改为 true，表示找到了图像。尽管如果没有单部分或两部分图像，代码应该只是从 ajax 中出错，将布尔值保留为 false，告诉用户没有图像。

除了在没有图像时通知用户之外，我的逻辑在所有方面都很好。在ajax成功函数中，图像总是追加（无论成功还是错误），但布尔值在成功后永远不会改变。这是我正在运行的代码。

```
boolean = false  //declared globally
function tableSelect(location){
    $("#popupPhoto").text("");

var part = $("#table"+location).text().split(" ");

//part[0] always empty
for(var i=1;i<part.length;i++){                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
    //change default value to false
    boolean = false;
    /* original code
    imageExists(part[i]);

    //when no file... is found, boolean stays false, causing this if statement to function
    if(boolean == false){
        alert("No Information for "+imagename+" of "+part[i]); 
            //displayes image that says "No Information Available"
            $("#popupPhoto").append($("<img>", {src: 'images/imagedir/nia.png', "class": 'popphoto', alt: 'NIA' }));
    }
*/
    //new code
    imageExists(part[i]).fail(function () {
    alert("No Information for "+imagename+" of "+part[i]); 
            $("#popupPhoto").append($("<img>", {src: 'images/imagedir/nia.png', "class": 'popphoto', alt: 'NIA' }));
    })

}//Displays images in popup
$("#popupPhoto").addClass("ui-popup-active");} 
```

这是检查图像的功能

```
function imageExists(part){
var url = "images/imagedir/"+part+".png";
$.ajax({
        url:url,
        type:'HEAD',
        error: function()
        {
            $("#popupPhoto").append($("<img>", {src: 'images/imagedir/'+part+'1.png', "class": 'popphoto', alt: part.concat("1") }));
            $("#popupPhoto").append($("<img>", {src: 'images/imagedir/'+part+'2.png', "class": 'popphoto', alt: part.concat("2") }));
            //boolean = true;
            //boolean changes here
        },success: function()
        {//boolean will not change here
            //boolean = true;
            $("#popupPhoto").append($("<img>", {src: 'images/imagedir/'+part+'.png', "class": 'popphoto', alt: part }));
        }
}); 
```

}

我知道这可能是我不了解此功能的详细信息及其工作原理，但是如果有人可以帮助解决此问题或提出更好的方法来解决此问题，那基本上就是我正在寻找的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:46:31.993

[为什么 AJAX 叫异步？](https://stackoverflow.com/questions/7932690/why-ajax-is-called-asynchronous)

您的代码`imageExists`在 ajax 调用触发后立即运行。它不会等待 ajax 调用返回。

您有两种方法可以解决此问题；使用成功/错误回调或使用承诺。在任何一种情况下，都不需要全局布尔值，并且应该删除该变量。

打回来：

```
function imageExists(part){
...
    $.ajax({
        ...
        error: function () {
            // move the boolean == false code in to the error handler
        },
        success: function() {
            // move the boolean == true code in to the success handler
        }
    });
} 
```

承诺：

```
imageExists(part[i]).then(function () {
    // move the boolean == true code in to the then handler
}).fail(function () {
   // move the boolean == false code in to the failhandler
} 
```

# eclipse - 有什么方法可以在 Eclipse 中设置 FlexUnit？

> ID：14200103
> 
> 赞同：2
> 
> 时间：2013-01-07T16:36:30.333
> 
> 标签：eclipse, apache-flex, unit-testing

我正在使用 Eclipse 4.2.1 (Juno)，并且还使用 MX Unit 设置了 CFEclipse。我正在使用 Flex SDK（3.5.0 及更高版本的各种版本），并且正在使用 ant 脚本来构建我的项目。此时，我已经构建并运行了一个 flex 项目，MXUnit 也在处理 ColdFusion 组件。

我想设置 FlexUnit，但在我的搜索中，我找不到任何设置它的方法（因为不再有用于 Eclipse 的 FlexBuilder/FlashBuilder 插件）。我在 www.codesquared.com/eclipse 的插件中找到了，但是当我尝试下载/安装它时，我收到了一个错误，因为我没有安装 FlashBuilder。

这里有没有人只用 Eclipse 设置这个？

谢谢！

# sql - 在 PostgreSQL 中选择未读文档（JOINS？）

> ID：14200105
> 
> 赞同：0
> 
> 时间：2013-01-07T16:36:43.383
> 
> 标签：sql, postgresql

我有一个包含用户的 PostgreSQL 表，一个包含文档的 PostgreSQL 表，以及一个将用户映射到他们已阅读的文档的表。像这样：

表：用户

```
------------
| oid      |
| username |
| ...      |
------------ 
```

表：文件

```
------------
| oid      |
| title    |
| ...      |
------------ 
```

表：users_documents

```
-----------------
| oid           |
| user_oid      |
| document_oid  |
----------------- 
```

每当用户阅读文档时，都会向 users_documents 添加一条记录，其中包含他们的用户 ID 和文档 ID。这一切都很好。

我想做的是为给定用户选择一个随机的**未读**文档。我觉得我应该能够通过一个相当简单的 JOIN 来做到这一点，但我无法完全理解查询应该是什么样子。

有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:59:56.250

对于大多数数据，您可以转到 users_documents 表。例如，查询 user_oid = 读取的文档？将会

```
SELECT document_oid
FROM users_documents
WHERE user_oid = ? 
```

但是，您想要*丢失*的记录。

您可以进行外部联接，并在结果中找到 NULL。

```
SELECT users_documents.document_oid
FROM users_documents
  RIGHT OUTER JOIN documents
    ON users_documents.document_oid = documents.oid AND users_documents.user_oid = ? 
```

重要的是“users_documents.user_oid =？” 在 FROM 子句中而不是在 WHERE 子句中的连接中，因为它在 WHERE 子句中不起作用。

# java - URLConnection FTP 列表文件

> ID：14200106
> 
> 赞同：8
> 
> 时间：2013-01-07T16:36:45.853
> 
> 标签：java, file, ftp, urlconnection

```
URL url =  new URL("ftp://user:pass@ftp.example.com/thefolder/");
URLConnection connection = url.openConnection();
...
// List files in folder... 
```

使用类似上面的方法，我想知道如何获取文件夹“thefolder”中的文件列表？

* * *

继这个原始问题之后，我整理了这个简单的 FTP 连接，它一切正常且看起来不错。它可以看到 /live/conf/ 位置中的所有文件，并将它们全部复制到本地 /conf/ 位置。

唯一的问题是，它正在复制文件但没有内容。它们都是 0KB 并且是空的。

任何人都可以看到任何明显的复制文件名而不是文件内容的东西吗？

```
try {
    FTPClient ftp = new FTPClient();
    ftp.connect("000.000.000.000");
    ftp.login("USER", "PASSWORD");
    ftp.enterLocalPassiveMode();
    ftp.setFileType(FTP.BINARY_FILE_TYPE);

    FTPFile[] files = ftp.listFiles("/live/conf/");
    for (int i=0; i < files.length; i++) {
        if (files[i].getName().contains(".csv")) {

            String remoteFile1 = files[i].getName();
            File downloadFile1 = new File("/var/local/import/conf/"+files[i].getName());
            OutputStream outputStream1 = new BufferedOutputStream(new FileOutputStream(downloadFile1));
            ftp.retrieveFile(remoteFile1, outputStream1);
            outputStream1.close();                  

        }
    }
    ftp.disconnect();
} catch (SocketException ex) {
    ex.printStackTrace();
} catch (IOException ex) {
    ex.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T16:46:29.207

Java SE[`URLConnection`](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html)不适合从 FTP 主机检索文件列表的工作。至于 FTP，它基本上只支持 FTP`get`或`put`命令（检索或上传文件）。它不支持`ls`您基本上正在寻找的 FTP 命令（列出文件），更不用说其他许多命令了。

您需要寻找支持 FTP`ls`命令（以及更多）的第 3 方库。一个常用的是[Apache Commons Net](http://commons.apache.org/net) [`FtpClient`](http://commons.apache.org/proper/commons-net/javadocs/api-3.3/org/apache/commons/net/ftp/FTPClient.html)。在其[javadoc](http://commons.apache.org/proper/commons-net/javadocs/api-3.3/org/apache/commons/net/ftp/FTPClient.html)中演示了如何发出`ls`：

```
FTPClient f = new FTPClient();
f.connect(server);
f.login(username, password);
FTPFile[] files = f.listFiles(directory); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T16:45:48.660

你可以使用[Apache commons FTPClient](http://commons.apache.org/net/api-3.2/org/apache/commons/net/ftp/FTPClient.html#listFiles%28%29)

这将允许您调用 listFiles...

```
public static void main(String[] args) throws IOException {
        FTPClient client = new FTPClient();
        client.connect("c64.rulez.org");
        client.enterLocalPassiveMode();
        client.login("anonymous", "");
        FTPFile[] files = client.listFiles("/pub");
        for (FTPFile file : files) {
            System.out.println(file.getName());
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T16:42:39.307

看看我找到的这个类。它为你做起重。 [在 nsftools.com 上课](http://www.nsftools.com/tips/FTPConnection.java)

示例是：

```
FTPConnection ftpConnect = new FTPConnection();
ftpConnect.connect("ftp.example.com");
ftpConnect.login("user","pass");

System.out.println(ftpConnect.listFiles()); 
```

# ember.js - linkTo 助手是否缓存其值？

> ID：14200112
> 
> 赞同：1
> 
> 时间：2013-01-07T16:36:56.693
> 
> 标签：ember.js

链接生成为：

```
{{#linkTo mode filterB currentMode}} 
```

第一次渲染时显示正确的 currentMode 值，但随后它会卡在该模式下，甚至 currentMode 更改为不同的值，链接不会更新。这是[GitHub 上的演示代码](https://github.com/afurmanov/strange_link_to_behavior/blob/master/test.html)

```
<script type="text/x-handlebars" data-template-name="application">
  {{#with App}}
  <div>
    <div style="float:left;width:200px">
      Filters:
      <ul>
        <li>{{#linkTo mode filterA currentMode}}filterA{{/linkTo}}</li>
        <li>{{#linkTo mode filterB currentMode}}filterB{{/linkTo}}</li>
        <li>currentFilter: {{currentFilter}}</li>
        <li>currentMode: {{currentMode}}</li>
      </ul>
    </div>
    <div style="float:left">
    Modes:
      <ul>
        <li>{{#linkTo mode currentFilter modeA}}modeA{{/linkTo}}</li>
        <li>{{#linkTo mode currentFilter modeB}}modeB{{/linkTo}}</li>
        <li>currentFilter: {{currentFilter}}</li>
        <li>currentMode: {{currentMode}}</li>
      </ul>
    </div>
  </div>
  {{/with}}
</script>

<script type='text/coffeescript'>
window.App = App = Ember.Application.create()
App.Router.map (match) ->
  match("/").to("home")
  match("/filter/:filter").to("filter", (match) ->
    match("/mode/:mode").to("mode")
    )

App.modeA = "modeA"
App.modeB = "modeB"
App.filterA = "filterA"
App.filterB = "filterB"
App.currentMode = "modeA"
App.currentFilter = "filterA"

App.FilterRoute = Em.Route.extend
  setupControllers: (controller, filter)->
    App.set('currentFilter', filter)
  serialize: (filter)->
    {filter:filter}
App.ModeRoute = Em.Route.extend
  setupControllers: (controller, mode)->
    App.set('currentMode', mode)
  serialize: (mode)->
    {mode:mode}
</script> 
```

当 currentMode 设置为 modeB 时，ember.js 在过滤器列表中正确呈现其文本值，但链接 /filter/filterA/mode/modeA 保持不变，当它必须重新呈现为 /filter/filterA/mode/modeB 时。我很好奇这种行为是否是故意的，如果是，那么解决它的正确方法是什么，这种行为的合理性是什么？

谢谢！

更新：此代码执行预期的操作：

```
{{#with currentMode}}
  <li>{{#linkTo mode "App.filterA" this}}filterA{{/linkTo}}</li>
  <li>{{#linkTo mode "App.filterB" this}}filterB{{/linkTo}}</li>
{{/with}} 
```

，感谢[sly7-7](https://stackoverflow.com/users/373254/sly7-7)，看起来 'linkTo' 不会对上下文更改做出反应。我仍然不清楚这是否是故意的。

# mysql - MYSQL查询使用group by和order by很慢

> ID：14200116
> 
> 赞同：0
> 
> 时间：2013-01-07T16:37:09.353
> 
> 标签：mysql, indexing

我有一个使用 group by 和 order by 的查询，但是速度很慢！我需要一些帮助才能使索引正确。这是我正在运行的查询：

```
select *
    from puresen_mv_shop.cache_deals
where feature_ids REGEXP 'i,t,d'
and phone_cost > 100.00
group by handset_numeric_id
order by popularity
LIMIT 0,10; 
```

解释：

```
1   SIMPLE  cache_deals index       popularity  5       10  6635320.00  Using where; Using temporary 
```

这将在大约 3 秒内运行，但我需要在一秒钟内完成。表中有超过 600k 行。这是表结构：

```
mysql> describe cache_deals
        -> ;
    +-------------------------+---------------+------+-----+---------+-------+
    | Field                   | Type          | Null | Key | Default | Extra |
    +-------------------------+---------------+------+-----+---------+-------+
    | deal_id                 | varchar(100)  | NO   |     | NULL    |       |
    | deal_id_replication     | varchar(150)  | NO   | PRI |         |       |
    | handset_numeric_id      | int(10)       | YES  | MUL | NULL    |       |
    | handset_url             | varchar(100)  | YES  |     | NULL    |       |
    | image_url               | varchar(50)   | YES  | MUL | NULL    |       |
    | handset_id              | varchar(50)   | YES  |     | NULL    |       |
    | phone_cost              | decimal(10,2) | YES  |     | NULL    |       |
    | tariff_numeric_id       | int(10)       | YES  | MUL | NULL    |       |
    | tariff_id               | varchar(100)  | YES  | MUL | NULL    |       |
    | tariff_name             | varchar(100)  | YES  |     | NULL    |       |
    | network_name            | varchar(20)   | YES  |     | NULL    |       |
    | network_numeric_id      | int(5)        | YES  | MUL | NULL    |       |
    | term                    | int(5)        | YES  | MUL | NULL    |       |
    | minutes                 | int(5)        | YES  | MUL | NULL    |       |
    | texts                   | int(5)        | YES  | MUL | NULL    |       |
    | data                    | int(5)        | YES  | MUL | NULL    |       |
    | org_line_rental         | decimal(10,2) | YES  | MUL | NULL    |       |
    | effective_monthly_cost  | decimal(10,2) | YES  | MUL | NULL    |       |
    | free_gift_id            | int(10)       | YES  | MUL | NULL    |       |
    | free_gift_name          | varchar(50)   | YES  |     | NULL    |       |
    | cashback                | int(5)        | YES  | MUL | NULL    |       |
    | free_lr                 | int(5)        | YES  | MUL | NULL    |       |
    | half_lr                 | int(5)        | YES  | MUL | NULL    |       |
    | clearance_flag          | int(5)        | YES  | MUL | NULL    |       |
    | manufacturer_numeric_id | int(5)        | YES  | MUL | NULL    |       |
    | manufacturer_name       | varchar(50)   | YES  |     | NULL    |       |
    | full_handset_name       | varchar(100)  | YES  |     | NULL    |       |
    | popularity              | int(20)       | YES  | MUL | NULL    |       |
    | handset_colour          | varchar(50)   | YES  | MUL | NULL    |       |
    | feature_ids             | varchar(100)  | YES  |     | NULL    |       |
    | operating_system        | varchar(30)   | YES  | MUL | NULL    |       |
    +-------------------------+---------------+------+-----+---------+-------+ 
```

以下是我目前在此表上获得的索引：

```
mysql> show index from cache_deals;
+-------------+------------+-------------------------+--------------+-------------------------+-----------+-------------+----------+--------+------+------------
| Table       | Non_unique | Key_name                | Seq_in_index | Column_name             | Collation | Cardinality | Sub_part | Packed | Null | Index_type
+-------------+------------+-------------------------+--------------+-------------------------+-----------+-------------+----------+--------+------+------------
| cache_deals |          0 | PRIMARY                 |            1 | deal_id_replication     | A         |      663532 |     NULL | NULL   |      | BTREE
|         |               |
| cache_deals |          1 | handset_numeric_id      |            1 | handset_numeric_id      | A         |         759 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | network_numeric_id      |            1 | network_numeric_id      | A         |           8 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | tariff_numeric_id       |            1 | tariff_numeric_id       | A         |        1091 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | manufacturer_numeric_id |            1 | manufacturer_numeric_id | A         |          23 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | operating_system        |            1 | operating_system        | A         |          42 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | image_url               |            1 | image_url               | A         |         755 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | tariff_id               |            1 | tariff_id           | A         |        1091 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | term                    |            1 | term            | A         |           7 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | minutes                 |            1 | minutes                 | A         |          26 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | texts                   |            1 | texts                   | A         |          14 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | data                    |            1 | data                    | A         |          14 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | org_line_rental         |            1 | org_line_rental         | A         |         128 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | effective_monthly_cost  |            1 | effective_monthly_cost  | A         |        2147 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | free_gift_id            |            1 | free_gift_id            | A         |         105 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | cashback                |            1 | cashback                | A         |           2 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | free_lr                 |            1 | free_lr                 | A         |           2 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | half_lr                 |            1 | half_lr                 | A         |           2 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | clearance_flag          |            1 | clearance_flag          | A         |           2 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | handset_colour          |            1 | handset_colour          | A         |          17 |     NULL | NULL   | YES  | BTREE
|         |               |
| cache_deals |          1 | popularity              |            1 | popularity              | A         |         718 |     NULL | NULL   | YES  | BTREE
|         |               |
+-------------+------------+-------------------------+--------------+-------------------------+-----------+-------------+----------+--------+------+------------ 
```

我是否正确索引此表？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T16:48:21.677

这`REGEXP`正在扼杀潜在的性能，因为它不能使用索引。查询的那部分是否可以以其他方式编写或可能规范化到另一个表？如果可以，那可能会有所帮助。除此之外，一个综合索引`phone_cost`应该`handset_numeric_id`会有所帮助。也添加`popularity`到该索引可能会有所帮助，但 MySQL 已经对查询不满意，因为您实际上不应该能够使用不在`GROUP BY`子句中的列。

作为旁注，列的数据类型可能更有效。 `int(5)`工作原理与`MEDIUMINT`由于限制相同，`INT`除了`MEDIUMINT`小一个字节。此外，`int(20)`没有意义，因为`INT`类型不能那么大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:30:06.000

```
 select [name the columns you actually want returned]
      from puresen_mv_shop.cache_deals
     where feature_ids = 'i,t,d'
       and phone_cost > 100.00
     order 
        by popularity
     LIMIT 0,10; 
```

索引 features_id 或 (features_id,phone_cost)

# android - 如何将对象（imageview）放在特定的背景部分并使其在不同的 android 设备上运行？

> ID：14200117
> 
> 赞同：0
> 
> 时间：2013-01-07T16:37:09.643
> 
> 标签：android

我有背景。在那里绘制了一个组件。不居中，假设一个盒子但不在正中心。我想放置另一个对象可能是一个图像视图。正好在背景中绘制的那个盒子的顶部。我设法将它设置在我的平板设备上。但它不适用于其他平板电脑。有什么好主意吗？

我尝试过使用获取屏幕宽度高度，但绘制的框并不完全匹配..即使是静态的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T16:44:26.247

您必须为不同尺寸的设备和分辨率制作不同的布局。否则它会因其他设备而失真。更多请参阅此[链接](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:51:03.863

将 xml 与位图一起使用：

```
<bitmap gravity="center_horizontal|top" android:tileMode="disable" android:src="@drawable/YOUR_DRAWABLE" /> 
```

[http://developer.android.com/guide/topics/resources/drawable-resource.html#Bitmap](http://developer.android.com/guide/topics/resources/drawable-resource.html#Bitmap)

# objective-c - 减少内存大小以确保 iOS 中的后台

> ID：14200123
> 
> 赞同：7
> 
> 时间：2013-01-07T16:37:27.633
> 
> 标签：objective-c, ios, background-process, core-bluetooth, bluetooth-lowenergy

在开发使用蓝牙低功耗的应用程序时，iOS 设备有时会失去与外围设备的连接。（有时几个小时。）

为了重新连接到现有外围设备，应用程序必须全天以特定速率在后台持续扫描，即使应用程序处于后台也是如此。

问题是，由于内存限制等原因，iOS 不能保证您的应用程序不会被杀死。

[iPhone OS 编程指南中的信息](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)指出：

> 如果外围设备在应用程序暂停时提供更新，则使用蓝牙外围设备的应用程序可以要求唤醒。这种支持对于定期传输数据的蓝牙配件很重要，例如蓝牙心率带。当应用程序在其 Info.plist 文件中包含带有 bluetooth-central 值的 UIBackgroundModes 键时，Core Bluetooth 框架会保持打开相应外围设备的所有活动会话。此外，来自外围设备的新数据会导致系统唤醒应用程序，以便它可以处理数据。系统还会唤醒应用程序以处理附件连接和断开通知。

当手机连接到设备并且应用程序处于后台时，不会出现此问题。但是，当设备断开连接并且应用程序处于后台时，它确实会发生。在这种特定情况下，手机不再连接到外围设备，因此不再收到通知。

很多人之前在 Stack Overflow 或 Apple 论坛上都讨论过这个问题，我相信其中一位 Apple 开发人员已经回复说：

> 我们已经意识到这个问题，并正在尝试提出解决方案。目前，没有解决方法。”

我的问题是，有没有办法至少提高你不会因为内存限制而被 iOS 杀死的机会？

例如，即时通讯应用程序 (IMO) 似乎在后台运行得非常好。在几天和几天不使用后，应用程序将唤醒并显示一条 gChat 消息。

我在质疑诸如

*   强指针
*   总内存大小
*   减少应用程序后台或最小化时的内存大小
*   降低后台操作频率
*   等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:07:47.410

Why do you need background execution even when the bluetooth hardware is disconnected? I don't think that you need to "rescan continuously" to reconnect again, if the hardware is "paired" with the iPhone/iPad, it will reconnect itself. Like a bluetooth headset. Or not?

AFAIK you have no chances to accomplish what you are asking for. A normal App is always suspended when the user go back to home. The app has approx. 5 secs of background time to stop timers, save state ecc ecc. There are special background modes that allows you to have more background time, and each of this mode (explained in the page you linked) has a different behavior.

About the bluetooth mode: The descripted behavior is not an issue, but it's by design:

*   the app is suspended

*   when the app is suspended, it can be killed by the OS to free ram (and there are no tricks to avoid this), but the system will wake up if needed.

*   the app is then awaken every time a notification is received (awaken from suspended state or lauched from "previously-killed" state)

*   the app has 10 seconds to do tasks (save informations, ecc ecc). Moreover, can request +10 mins. of background time for a particular task

*   after the 10 secs (or 10 min) the app is suspended again

The example you wrote about the chat app is incorrect: chat apps usually doesn't use any background mode, simply they forward you messages using push notifications. When you open the app, the app connect to a server that stores all your messages and download it.

You can get "more uptime" using location background mode (routing app can work in background), or using a combination of significative location changes (the app is awaken) and the 10 minutes background time, but I think that Apple will reject an app that "abuse" this.

Shortly, you have to design your app to support this behavior.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T07:51:42.410

从苹果文档中，我一直假设以下内容：

```
connectPeripheral:options:
Establish a connection to the peripheral.

- (void)connectPeripheral:(CBPeripheral *)peripheral options:(NSDictionary *)options;
Parameters
peripheral
The peripheral to connect to.

options
A dictionary to customize the behavior of the connection. See CBConnectPeripheralOptionNotifyOnDisconnectionKey.

Discussion
**This never times out**. Use cancelPeripheralConnection: to cancel a pending connection.' 
```

重要的部分在于这永远不会超时。我认为这将移交给系统，以便它在进入范围时自动连接到外围设备，从而消除了对完整背景的需要。如果我错了，有人纠正我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:31:10.577

我在更多 Apple 文档中发现了这一点：

> ## 后台应用程序的内存使用情况
> 
> 每个应用程序都应该在进入后台时释放尽可能多的内存。系统会尝试在内存中同时保留尽可能多的应用程序，但是当内存不足时，它会终止暂停的应用程序以回收该内存。在后台消耗大量内存的应用程序是最先被终止的应用程序。
> 
> 实际上，您的应用程序应该在不再需要对象时立即删除对对象的强引用。删除强引用使编译器能够立即释放对象，以便可以回收相应的内存。但是，如果您想缓存一些对象以提高性能，您可以等到应用程序转换到后台后再删除对它们的引用。
> 
> 您应该尽快删除强引用的一些对象示例包括：
> 
> ### 图像对象
> 
> 您可以从磁盘再次加载的大型媒体或数据文件 您的应用不需要并且以后可以轻松重新创建的任何其他对象 为了帮助减少您的应用的内存占用，系统会在您的应用移动时自动清除代表您的应用分配的一些数据到背景。
> 
> 系统清除所有核心动画层的后备存储。这项工作不会从内存中删除应用程序的图层对象，也不会更改当前图层属性。它只是防止这些图层的内容出现在屏幕上，鉴于应用程序在后台，无论如何都不应该发生这种情况。它会删除对缓存图像的任何系统引用。（如果您的应用程序没有对图像的强引用，它们随后会从内存中删除。）它会删除对其他一些系统管理的数据缓存的强引用。

# c++ - 从 OS X 为 Ubuntu 创建 C++ 可执行文件

> ID：14200135
> 
> 赞同：-3
> 
> 时间：2013-01-07T16:38:11.950
> 
> 标签：c++, macos, gcc, ubuntu, 32bit-64bit

我有 GCC 4.7.2 和 OS X 64 位。我想用 Ubuntu 32 位为我的朋友创建一个可执行`exe`文件。`main.cpp`我试过了，`$ g++ main.cpp -o exe`但他说它不起作用，因为我编译为 64 位。

如何编译为 32 位？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T01:15:05.777

你朋友错了。很可能他有一台 32 位机器，而您已经创建了 64 位可执行文件，但即使您编译为 32 位（通过编译和链接来完成`-m32`），它仍然有很多其他原因不会工作。Mac OS X 和 Ubuntu 是完全不同的系统，为其中一个编译的代码**不会**在另一个上运行。

任何单一的 GCC 版本只能为单一目标生成代码，即 CPU 和操作系统的单一组合。您系统上的 GCC 是针对 Mac OS X 构建的，即它是一个本地编译器，这意味着它为运行它的同一系统生成代码。

要为 Ubuntu 生成可执行文件，您需要一个不同的 GCC 版本，一个使用`--target=i686-unknown-linux-gnu`. 如果该 GCC 在您的 Mac 上运行，那么它将是一个*交叉编译器*，这意味着它在一个系统上运行，但为不同类型的系统生成代码。

要安装和使用交叉编译器，您还需要交叉目标的所有 C 库，因此您需要获取 glibc 源的副本并使用交叉编译器在 Mac 上构建它们。这是相当复杂的，但是有一些项目，例如`crosstool`和`crosstool-NG`试图通过提供脚本来简化它来完成工作。

在 Mac 上设置虚拟机并在 VM 中安装 Ubuntu，然后使用 Ubuntu 的本机 GCC 为 Ubuntu 编译可执行文件会简单得多。

`apt-get install gcc`你的朋友自己做和编译源代码会更简单。

# objective-c - NSDate 没有时间

> ID：14200136
> 
> 赞同：-1
> 
> 时间：2013-01-07T16:38:22.523
> 
> 标签：objective-c, ios, cocoa-touch, nsdate

我写了以下方法：

```
- (NSDate *)stringToDate:(NSString *)dateString
{
    // Convert string to date
    NSDateFormatter * dateFormat = [[NSDateFormatter alloc] init];
    NSTimeZone *tz = [NSTimeZone timeZoneWithName:@"America/New_York"];
    [dateFormat setDateFormat:@"M/d/yyyy HH:mm:ss"];
    [dateFormat setTimeZone:tz];
    NSDate * date = [dateFormat dateFromString:[NSString stringWithFormat:@"%@ 00:00:00", dateString]];

    return dateOnly;
} 
```

当我只用诸如 11/1/2013 或 11/13/2013 之类的日期调用它时，我得到 2013-11-01 04:00:00 +0000 和 2013-11-13 05:00:00 +0000。

如果我在返回时设置断点，则日期显示正确，但如果我在此调用后在调用函数中中断，则日期与时间一起返回。

为什么我的时间并不总是 0。无论如何可以告诉我我的功能有什么问题吗？

谢谢

更新：

输入字符串如下：11/1/2013 和 11/13/2013

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T16:46:31.970

NSDate 是一个时间点。它总是有一个时间分量。
如果不作为 NSDateFormatter 的字符串打印，则日期和时间将始终是 UTC/GMT 之一。

* * *

格式和日期字符串必须适合。

```
NSString *dateString = @"11/1/2013";
[dateFormat setDateFormat:@"M/d/yyyy"]; 
```

* * *

相隔一小时来自夏令时。直到 2013 年 11 月 3 日纽约是夏令时。[http://www.timeanddate.com/worldclock/clockchange.html?n=179](http://www.timeanddate.com/worldclock/clockchange.html?n=179)

* * *

> 好的，那我可以忽略吗？由于时间部分，我在比较失败时尝试比较 NSDates

您应该使用一天中的某个时间（即中午）创建日期，以保存 DST 混乱并进行比较。为此使用 NSComponents。

* * *

任何 iOS/Cocoa 开发人员必看：精彩的[WWDC 2011 视频“Session 117 - Performing Calendar Calculations”](https://developer.apple.com/videos/wwdc/2011/?id=117)。

# sql - SQL Datawarehouse Cube，如何让用户在 Excel 中创建自己的计算？

> ID：14200138
> 
> 赞同：1
> 
> 时间：2013-01-07T16:38:27.643
> 
> 标签：sql, excel, ssas, data-warehouse

我有一个 SQL Server 2008 数据仓库多维数据集 (SSAS)，我们正在尝试推动它来替换我们当前使用的“平面文件提取”。

当我们的用户使用 Excel 连接到我们的 SSAS 服务器时，他们会获得数据透视表，有没有办法让用户从 Excel 创建自己的计算成员？一些用户希望自己进行 SQL Server 中未预定义的计算...

这可能吗？还是必须在多维数据集的计算选项卡上预定义所有计算成员？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:28:47.500

我不太明白你的问题陈述的这一部分......

> 我有一个 SQL Server 2008 数据仓库多维数据集 (SSAS)，我们正在尝试推动它来替换我们当前使用的“平面文件提取”。

...但是要在 excel 中添加计算成员，请查看[此内容](http://olappivottableextend.codeplex.com/)。我相信功能（添加计算成员）是 Excel （2007+）的原生功能，但这个加载项应该有一些其他的花里胡哨，如果你的用户足够精明，需要这种类型的功能第一名。

# java - 关于在生成报告时自定义“BIRT 图表渲染”

> ID：14200142
> 
> 赞同：1
> 
> 时间：2013-01-07T16:38:36.553
> 
> 标签：java, eclipse-plugin, reporting, birt

我需要将报告放入 Web 应用程序并选择 BIRT。我想添加以下功能：

*   将自定义代码放入生成的 BIRT 图表的 HTML 代码中。
*   缩放设计的生成图表的图像，以生成多个相同类型但生成的图像大小不同的报告。
*   生成 BIRT 图表报告的图像流，以便可以将流直接写入响应输出流。

任何关于上述几点的帮助、线索、外部资源或建议，将不胜感激！

**编辑：**

或者任何关于要点的线索，比如是否可能，也值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T08:15:25.177

不知道第一个问题。

* * *

要重新调整图像大小：

考虑看看[HTMLServerImageHandler](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.birt.doc.isv/engine/api/org/eclipse/birt/report/engine/api/HTMLServerImageHandler.html)

```
HTMLRenderOption htmlOptions = new HTMLRenderOption(options);
htmlOptions.setImageHandler(new HTMLServerImageHandler()); // your implementation goes here
runAndRenderTask.setRenderOption(htmlOptions); 
```

* * *

[RenderOption](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.birt.doc.isv/engine/api/org/eclipse/birt/report/engine/api/RenderOption.html)的文档说：

> 静止图像渲染选项正在等待实施。此外，这是一个贡献的地方。所以你可以考虑一下。

# json - facebook 访问令牌超时 - 如何在我的网站上使用简单的 json 提要来处理这个问题

> ID：14200146
> 
> 赞同：0
> 
> 时间：2013-01-07T16:38:41.900
> 
> 标签：json, facebook, facebook-access-token

我的网站上有一个简单的 facebook 网站提要，它不允许访问者访问我的网站。它实际上是一组转储到用户列表的 json。

我遇到的问题是访问令牌每 1-2 小时过期一次，并且提要死亡......

我需要自动刷新令牌或获取未过期的令牌。对我来说最好的路线是什么。

我想确保安全性尽可能高。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:52:04.843

你可以得到扩展令牌，红色这个：[Extended Access Tokens](https://developers.facebook.com/docs/howtos/login/extending-tokens)

此令牌将在 2 个月内到期，因此无需一次又一次地刷新。

如果你想代表这个用户离线访问，你可以使用它并在它过期之前刷新它。

# html - Bootstrap：井与表格不对齐

> ID：14200147
> 
> 赞同：0
> 
> 时间：2013-01-07T16:38:44.087
> 
> 标签：html, css, twitter-bootstrap

我有一个`table`和一个`form`与 Bootstrap 相邻的一个。我已将该`well`课程应用于`form`, 以使其脱颖而出。但是， the`well`和 contains`form`没有对齐？

请[在此处](http://jsfiddle.net/MgcDU/1161/)查看我的小提琴。

如何对齐`well`和`form`？（请注意，当`table`和`form`都有类`span6`时，一切都很好。但是，我分别想要`span7`和`span5`。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:42:05.513

元素的`form`宽度大于 Bootstrap 为 定义的宽度`span5`，因此一些渲染引擎会强制元素脱离`well`.

如果您绝对必须使用`span5`，请尝试减小标签的宽度以及`input`表单内元素的边距。

# c++ - 组合与 MI 示例

> ID：14200152
> 
> 赞同：0
> 
> 时间：2013-01-07T16:38:56.823
> 
> 标签：c++, wrapper, multiple-inheritance, abstraction

我遇到了这个图书馆，[orocos bfl](http://www.orocos.org/bfl)。它使用外部矩阵库，并在包装​​它们时使用多重继承；如

```
class Matrix: public Matrix_Wrapper, public Boost::Matrix
{
 //some implementation
} 
```

与作曲相反

有充分的理由（性能等），还是只是一段糟糕的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:55:54.957

这里使用 MI 是有原因的。这样，`Matrix`该类可以用于特定于 orocos bfl 的算法，但它也可以用于期望 orocos bfl 用于其实现的库的矩阵的算法。

orocos 库可以使用不同的库为其提供基本的矩阵实现，因此 orocos 提供的算法不能绑定到一个特定的矩阵接口。
同时，orocos 库的用户很可能需要额外的算法来操作他们与 orocos 库一起使用的矩阵。
通过使用多重继承，orocos 库可以被视为几个底层矩阵库之一的扩展。

# xcode - Xcode 无法识别 C++ 语法

> ID：14200153
> 
> 赞同：0
> 
> 时间：2013-01-07T16:38:57.327
> 
> 标签：xcode, compiler-errors, objective-c++

我在 xcode 中有一个项目，我在其中使用 c++ 库，它可以正常工作和编译，但是现在没有任何更改，它不会编译告诉 .h 文件库和我使用一些 c++ 的视图控制器中的一些错误变量，我的文件带有 .mm 扩展名，我遇到的所有错误都与 c++ 语法有关，就像`namespace`它告诉它的单词一样，`Unknown type name`或者在语法为 c++ 类型 Xcode 无法识别的每一行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:51:45.100

我自己在这个页面上发现了[http://answers.oreilly.com/topic/631-how-to-get-c-and-objective-c-to-play-nicely-in-xcode/](http://answers.oreilly.com/topic/631-how-to-get-c-and-objective-c-to-play-nicely-in-xcode/)
问题是编译器弄得一团糟，因为只有我使用 c++ 代码的文件我把它们放在了`.mm`扩展名中，并且有一些文件只是`.m`
通过将我的项目中每个文件的扩展名更改为`.mm`即使它没有任何 c++ 代码解决了这个问题.

# eclipse - 如何摆脱 org.hamcrest.core_1.1.0.v20090501071000.jar？

> ID：14200155
> 
> 赞同：1
> 
> 时间：2013-01-07T16:39:04.133
> 
> 标签：eclipse, junit, classpath

我有一个带有单元测试的项目。我正在使用 Maven 和 m2e。从命令行使用 Maven，我看到：

```
[INFO] |  +- org.springframework:spring-test:jar:3.1.3.RELEASE:test
[INFO] |  \- junit:junit-dep:jar:4.10:test
[INFO] +- org.mockito:mockito-core:jar:1.9.0:test
[INFO] |  +- org.hamcrest:hamcrest-core:jar:1.2.1:test
[INFO] |  \- org.objenesis:objenesis:jar:1.0:test 
```

`mvn install`有效，所有测试都运行。好的。

现在，我尝试使用 m2e 1.2.0 在 Eclipse 中运行单元测试，但出现此错误：

```
java.lang.SecurityException: class "org.hamcrest.DiagnosingMatcher"'s signer information does not match signer information of other classes in the same package
        at java.lang.ClassLoader.checkCerts(ClassLoader.java:806)
        at java.lang.ClassLoader.preDefineClass(ClassLoader.java:487)
        ...
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

这让我很困惑。m2e 中的依赖树看起来不错。但是当我打开进程的属性时，我会得到一个修改后的类路径，其中包含这些额外的条目：

```
.../eclipse/3.7.2/eclipse/plugins/org.junit_4.8.2.v4_8_2_v20110321-1705/junit.jar
.../eclipse/plugins/org.hamcrest.core_1.1.0.v20090501071000.jar 
```

由于这些 JAR 已签名，因此测试失败。我怎样才能摆脱这两个条目？或者我如何确保它们被添加到类路径的后期（即在我的 JUnit + Hamcrest 版本之后）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T08:14:39.103

我找到了解决方法。

错误的原因是 Eclipse 的 JUnit 启动器将 JUnit 和 Hamcrest 包添加到类路径中。这两个是签名的 Orbit 包，而来自 Maven 的 JAR 没有签名。

Hamcrest 1.2 包含比 Eclipse 的 Hamcrest 1.1 更多的类。如果首先加载 Hamcrest 1.1，Java 将期望包中的所有类`org.hamcrest`共享相同的加密签名。这不是真的，也没有办法解决这个问题。

当我通过“Java 构建路径”或在启动配置的“类路径”选项卡中手动添加依赖项时，错误消失了。

在这些地方，我可以确保来自的 JAR`.m2/repository/`首先出现在类路径中（在 JDT JUnit 运行程序从 Eclipse 的插件文件夹中添加 JAR 之前），因此 Java 永远不会看到/尝试从 Orbit 加载包。

在启动配置中，它看起来像这样：

![启动配置](../Images/4e672294b66f36d129ca7d95b0670af1.png)

但如果 Eclipse 没有弄乱我的类路径，我会更喜欢:-(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:59:28.297

似乎有两种可能：

1.  您已经在类路径中找到了 junit。在 Project Properties->Java Build Path 的 Libraries 选项卡中，路径上是否有多个 junit 库，即是否已将 junit 库添加到项目中。如果是这样，请将其删除并重试。

2.  更可能的原因是您使用了 hamcrest 1.2。这与 JUnit 4.10（或 4.8）不兼容。JUnit pre-4.11 包含一些 hamcrest 1.1 类，因此您可能会遇到不兼容问题。您最好的选择是升级到 4.11，它不包括 hamcrest 库，但具有 hamcrest 1.3 作为传递依赖项。如果您可以使用 hamcrest 1.3，请执行此操作，否则，1.2*应该可以*工作。

# image - 使用 URL 与 iOS 6 和 UIActivityViewController 共享图像

> ID：14200159
> 
> 赞同：0
> 
> 时间：2013-01-07T16:39:28.323
> 
> 标签：image, ios6, uiimage, afnetworking, uiactivityviewcontroller

我正在使用 iOS 6 的 UIActivityViewController。我想共享一个在我的 iPhone 上本地不可用但在远程 URL 上可用的图像。

```
NSString *textToShare = _eventoTitle;
UIImage *imageToShare = [UIImage imageNamed:_iconUrl];
NSURL *url = [NSURL URLWithString:_permalink];
NSArray *activityItems = [[NSArray alloc]  initWithObjects:textToShare, imageToShare, url, nil]; 
```

不幸的是，这不起作用。我究竟做错了什么？

我也尝试过使用 AFNetworking 库：

```
UIImage *imageToShare = [UIImage alloc];
[*imageToShare setImageWithURL:[NSURL URLWithString:_iconUrl]]; 
```

这也行不通。

_iconUrl 类似于[http://www.mysite.com/picture.png](http://www.mysite.com/picture.png)

谢谢你，弗朗切斯科

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T17:01:24.033

为了使用远程图像，我实现了一个 UIActivityItemProvider 子类，它在 UIActivityViewController 请求时下载图像。UIActivityViewController 在后台线程上调用您的 UIActivityItemProvider，因此至少它不会阻塞主 UI。我使用同步调用，就像 Matteo 在我的 UIActivityItemProvider 中建议的那样。但是，它仍然不是一个很好的解决方案，因为它只是在您必须进行昂贵的下载时延迟。在用户选择视图控制器中的一个活动图标之前，UIActivityViewController 不会请求您的数据。那时，它调用 UIActivityItemProvider 来获取数据。因此，您此时会遇到延迟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T15:41:26.250

尝试：

```
UIImage *imageToShare = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@", _iconUrl]]]]; 
```

马泰奥

# ruby - 将图像移动到另一个文件夹

> ID：14200160
> 
> 赞同：0
> 
> 时间：2013-01-07T16:39:29.780
> 
> 标签：ruby

目前正在阅读学习编程。我在第 91-92 页创建了一个程序，该程序将图像从 USB 驱动器移动到所需位置并更改每个图像的名称。但是运行程序时出现以下错误。如您所知，使用 Ubuntu，但得到**"Invalid cross-device link"**。关于如何解决这个问题的任何想法？

```
pierre@ubuntu:~/ruby$ ruby move.rb
What would you like to call this batch?
IMG

Downloading 1 files: .move.rb:36:in `rename': Invalid cross-device link - (/media/SanDisk Cruzer Blade/pictures/UMG.jpg, IMG01.jpg) (Errno::EXDEV)
    from move.rb:36:in `block in <main>'
    from move.rb:17:in `each'
    from move.rb:17:in `<main>' 
```

这是代码

```
# Heres where the pictures are stored
Dir.chdir '/home/pierre/Skrivbord'

# First we find all of the pictures to be moved
pic_names = Dir['/media/SanDisk Cruzer Blade/pictures/**/*.{JPG,jpg}']

puts 'What would you like to call this batch?'
batch_name = gets.chomp

puts
print "Downloading #{pic_names.length} files: "

# This will be our counter. We'll start at 1 today,
# though normally I like to count from 0.
pic_number = 1

pic_names.each do |name|
  print '.' # This is our "progress bar".

  new_name = if pic_number < 10
    "#{batch_name}0#{pic_number}.jpg"
  else
    "#{batch_name}#{pic_number}.jpg"
  end

# This renames the picture, but since "name" has a big long
# path on it, and "new_name" doesn't, it also moves the file to the current
# working directory, which is now Katy's PictureInbox folder. Since it's a
# *move*, this effectively downloads and deletes the originals. And since this 
# is a memory card, not a hard drive, each of these takes a second or so; hence,
# the little dots let her know that my program didn't hose her machine.
# (Some marriage advice from your favourite author/programmer: it's all about 
# the little things.)

# Now where were we? Oh, yeah...
  File.rename name, new_name
    # Finally, we increment the counter.
  pic_number = pic_number + 1
end

puts # This is so we aren't on progress bar line.
puts 'Done, cutie!' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:52:19.750

> ..您正在尝试使用“重命名”来物理移动文件，并且系统反对这种误解。File.rename 只能重命名文件，不能移动它们。它仅适用于一个存储设备/卷/任何东西。

```
require 'fileutils'
include FileUtils
cp(old, new )
rm (old) 
```

[http://www.ruby-forum.com/topic/78627](http://www.ruby-forum.com/topic/78627)

# html - 尝试使用带有自定义伪类 CSS 选择器的 Nokogiri 提取属性值

> ID：14200164
> 
> 赞同：6
> 
> 时间：2013-01-07T16:39:51.680
> 
> 标签：html, css, ruby, css-selectors, nokogiri

加载了（X）HTML 页面后，我试图获取元标记的“内容”属性的值。例如，给定：

```
<meta name="author" content="John Smith" /> 
```

我想提取值“John Smith”。

我知道如何使用 XPath 来做到这一点，并且理解 CSS 主要用于元素选择，但 Nokogiri 支持定义[自定义 CSS 伪](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-css)类，我认为可以如下使用：

```
class CSSext
  def attr(nodeset, tag)
    nodeset.first.attribute_nodes.find_all {|node| node.name == tag}
  end
end

doc = Nokogiri::HTML(open(someurl))
doc.css("meta[name='name']:attr('content')", CSSext.new) 
```

但是，这将返回与

```
doc.css("meta[name='name']") 
```

是什么赋予了？Nokogiri 在下面使用相同的引擎进行 CSS 和 XPath 搜索，因此在 XPath 中可能的任何事情在 CSS 中都应该是可行的。我应该如何提取属性值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T19:34:03.777

为什么不只是？

```
doc.at("meta[name='author']")['content'] 
```

据我了解，伪类只能用于过滤节点集，但不能用其他值（例如节点属性之一的值）替换节点集。

# sql - 使用可能不存在的数据库

> ID：14200166
> 
> 赞同：6
> 
> 时间：2013-01-07T16:39:59.607
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一个包含`USE DATABASE`声明的脚本。如果数据库存在，脚本运行得非常好。如果它不存在，它会失败并显示“数据库不存在”消息，这很有意义。

现在，我不会失败，所以我添加了一个检查来选择数据库是否存在于 sys.databases 上（`IF 1=2`为了简单起见，我将在这里用一个检查来表示），所以，如果数据库存在（1=1 )，然后运行“使用”语句。

令我惊讶的是，脚本一直失败。所以我尝试添加一个 TRY CATCH 块。结果相同。似乎 use 语句是在其他任何事情之前进行评估的，这很烦人，因为现在我的脚本可能会中断。

所以我的问题是：如何`use`在脚本上对可能不存在的数据库进行声明？

```
BEGIN TRY
   IF (1=1) BEGIN --if DB exists
    USE DB_THAT_MAY_NOT_EXIST
   END 
END TRY
BEGIN CATCH
END CATCH 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T16:51:59.127

我不相信你可以做你想做的事。[文档](http://msdn.microsoft.com/en-us/library/ms188366%28v=sql.105%29.aspx)指定在编译时和执行时`use`都*执行。*

因此，`use`在不存在的数据库上会产生编译时错误。我不知道绕过编译时错误的方法。

正如另一个答案所建议的那样，在您的所有姓名中使用数据库限定符。

您还可以检查数据库是否存在，而无需切换到它。这是一种方法：

```
begin try
    exec('use dum');
    print 'database exists'
end try
begin catch
    print 'database does not exist'
end catch 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T16:46:33.663

这个怎么样？也许你可以通过这种方式检查。

```
if db_id('dbname') is not null
 -- do stuff 
```

或试试这个：

```
if not exists(select * from sys.databases where name = 'dbname')
    -- do stuff 
```

所以对于表：

```
if object_id('objectname', 'somename') is not null 
```

或者

```
sp_msforeachdb ‘select * from ?.sys.tables’ 
```

[参考](http://blog.sqlauthority.com/2009/04/26/sql-server-list-all-the-tables-for-all-databases-using-system-tables/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T16:47:23.580

在我的脑海中，您可以完全限定您的所有参考资料以避免该`USE`声明。我希望有人想出一个需要更少 PT 的解决方案。

在检查数据库是否存在之后，而不是

```
SELECT Moo FROM MyTable 
```

采用

```
SELECT Moo FROM MyDB.MySchema.MyTable 
```

# python - 如何为 PyQt 选择图形工具包

> ID：14200167
> 
> 赞同：4
> 
> 时间：2013-01-07T16:40:03.627
> 
> 标签：python, user-interface, pyqt, gnome, kde

我正在为我的客户开发一个 PyQt 应用程序。问题是我的默认图形是 Gnome 和我的客户端 KDE。所以有一些我无法控制的差异。

如何强制 pyQt 选择好的图形系统（Gnome）而不是默认系统（KDE）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T17:31:20.570

使用[`QApplication::setStyle ( QStyle * style )`](http://doc.qt.digia.com/4.7-snapshot/qapplication.html#setStyle)这些值之一作为参数：

*   塑料
*   cde
*   主题
*   sgi
*   视窗
*   干净的外观
*   苹果电脑

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-07T17:49:15.247

```
app.setStyle(QStyleFactory.create("plastique")) 
```

is the way to go

# php - 遍历 stdClass

> ID：14200170
> 
> 赞同：-1
> 
> 时间：2013-01-07T16:40:24.910
> 
> 标签：php, arrays

我到底如何从这个数组中获取 id 和名称（可能通过使用 ForEach 构造）？

```
stdClass Object (
 [data] => Array ( 
    [0] => stdClass Object ( [name] => Corinne Culbard [id] => 5005561918 ) 
    [1] => stdClass Object ( [name] => Tom West [id] => 5034297044 ) 
    [2] => stdClass Object ( [name] => Sabri Tasci [id] => 5057373639 ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T16:43:52.260

这不工作吗？

```
foreach ($object->data as $item) {
    $name = $item->name;
    $id = $item->id;
} 
```

# python - 括号和单引号中的 Argparse 文件输出

> ID：14200174
> 
> 赞同：2
> 
> 时间：2013-01-07T16:40:48.883
> 
> 标签：python, string, input, output, argparse

目标：为字符串添加前缀或后缀。

问题：文件的输出被修改为在输入周围包含一个 ['']。（例如：['prefix'] 单词，或 word['suffix']）

问题：如何删除输入字符串周围的括号和单引号？

代码：

```
 parser.add_argument('-p', dest='prefix', metavar='[Prefix]', nargs=1, help="Add a user     defined prefix")
    parser.add_argument('-s', dest='suffix', metavar='[Suffix]', nargs=1, help="Add a user     defined suffix")

#Adding a prefix to the string
    elif args.prefix:
        s = str(args.prefix)
        print s
        def addprefix(n):
            p = s + n
            args.outfile.write(p)
        myline = args.infile.readline()
        while myline:
            addprefix(myline)
            myline = args.infile.readline()
        args.infile.close

    #Adding a suffix to the string
    elif args.suffix:
        s = str(args.suffix)
        def addsuf(n):
            p = str(n.strip()+s+"\n")
            args.outfile.write(p)
        myline = args.infile.readline()
        while myline:
            addsuf(myline)
            myline = args.infile.readline()
        args.infile.close 
```

旁注：这是来自更大程序的代码片段。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T16:44:05.193

我猜问题是`nargs=1`。这告诉 argparse 您要创建一个列表。相反，移除`nargs=1`钻头并放入`action='store'`. 您可能还想指定一个默认值。

```
parser.add_argument('-p', dest='prefix', 
                    metavar='[Prefix]',action='store',default='',
                    help="Add a user defined prefix") 
```

# ios5 - 使用情节提要从表格视图的不同元素设置转换/转场

> ID：14200179
> 
> 赞同：0
> 
> 时间：2013-01-07T16:40:57.347
> 
> 标签：ios5, storyboard, segue, xcode-storyboard

我相信我的问题是相对基本的，但我仍然没有找到直接回答它的东西。我正在尝试使用 Storyboards 学习 Objective C 和 iOS 编程，现在正在构建我的第一个应用程序。我现在设置它的方式是，我有一个导航控制器，它连接到一个表视图控制器（控制器 A）。我正在将一个数组传递给我的表格视图，并且我的数组中的不同元素都有披露指示器。我还有第二个不同的视图控制器（控制器 B），其中有一个表视图。我希望控制器 A 的不同元素转换到不同的视图/控制器等。我熟悉 segue 的概念和 prepareForsegue 方法但是，我不需要 prepareforsegue 因为我并没有真正将任何内容传递到下一个屏幕。我只想能够在控制器 A 中单击我的表视图的不同元素来为我带来不同的视图（即像控制器 B 和我计划构建的其他视图）。有什么我没有看到或者我需要从根本上改变我的设计吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:59:34.853

也许您正在考虑创建不同的原型单元？

我是这样理解您的问题的：我有两种（或更多）不同类型的单元格，我知道它们将预先转换到的视图（当您的表查询委托时）。我希望这些单元格转到不同的控制器而不是同一个控制器。

如果这是正确的，请检查一下：

*   通过从 UI 对象套件中拖动，在表格中创建一个新的 UITableViewCell。
*   给每个单元格一个重用标识符
*   ![项目清单](../Images/f14088afc5ed9be6c3b7291927648a3c.png)
*   Control+单击并拖动到您的目标视图控制器
*   您将收到一个弹出窗口，询问什么类型的转场以及触发转场的 UI 对象
*   ![项目清单](../Images/9f0fe6f3077004a0494a0f7712b398fa.png)
*   然后你会看到两个 segue 指示器离开你的 UITableViewController
*   最后，确保将正确类型的单元格出列：

    ```
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"CellReuseIDA"];
    return cell; 
    ```

# java - 从过滤器中序列化 Jersey 异常会引发错误

> ID：14200184
> 
> 赞同：1
> 
> 时间：2013-01-07T16:41:25.840
> 
> 标签：java, json, jersey, cxf

我目前有一个运行 Jersey 的 RESTful 网络服务。我最近添加了一个过滤器来做一些认证工作，它适用于快乐路径的情况。但是，当我需要从这个过滤器中抛出一个错误时，而不是将异常序列化为一个漂亮的 json 字符串，它会抛出一个 500 并出现以下错误：

```
javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message
body writer for Java class myclass, and Java type class myclass, and MIME media type
application/octet-stream was not found 
```

问题是，我不想向 application/octet-stream 写任何东西。我的服务只使用`application/json`. `Resource`这在我的实际课程中不是问题，我可以在其中指定`@Produces`注释。从资源主体抛出的错误响应将正确序列化。

那么，我的问题是：如何控制过滤时抛出的异常使用什么 MIME 类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:05:40.520

您需要构建一个异常映射器来处理异常并将它们转换为 JSON。就像是：

```
@Provider
public class UnexpectedExceptionMapper implements ExceptionMapper<Exception>
{
  @Override
  public Response toResponse(final Exception exception)
  {
    ResponseBuilder builder = Response.status(Status.BAD_REQUEST)
                                      .entity(jsonError(exception))
                                      .type(MediaType.APPLICATION_JSON);
    return builder.build();
  }

  private String jsonError(final Exception exception)
  {
    return "{\"error\":\"" + exception.getMessage() + "\"}";
  }
} 
```

# html - 无法以最小宽度填充背景

> ID：14200186
> 
> 赞同：0
> 
> 时间：2013-01-07T16:41:33.767
> 
> 标签：html, css, background

我在 phpbb 论坛上使用 CSS，我正试图让我的背景适合。

如果您想查看它在做什么，该站点是[http://bofb.org 。](http://bofb.org)

无论如何，我试图让背景拉伸页面，但为不同的浏览器尺寸设置最小宽度。

我试过这个：

```
body {
    /* Text-Sizing with ems: http://www.clagnut.com/blog/348/ */
    font-family: Verdana, Helvetica, Arial, sans-serif;
    color: #828282;
    background-color: #FFFFFF;
    /*font-size: 62.5%;          This sets the default font size to be equivalent to 10px */
    font-size: 10px;
    margin: 0;
    padding: 12px 0;
    background-image: url("{T_THEME_PATH}/images/bg_wrap.png") no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

我的图像根本没有显示。我从[这个网站](http://css-tricks.com/perfect-full-page-background-image/)得到这个。

如果我这样做：

```
body {
    /* Text-Sizing with ems: http://www.clagnut.com/blog/348/ */
    font-family: Verdana, Helvetica, Arial, sans-serif;
    color: #828282;
    background-color: #FFFFFF;
    /*font-size: 62.5%;          This sets the default font size to be equivalent to 10px */
    font-size: 10px;
    margin: 0;
    padding: 12px 0;
    background-image: url("{T_THEME_PATH}/images/bg_wrap.png");
   background-size:100%;
} 
```

在您获得较低分辨率的屏幕或缩小窗口之前，它会显示良好。

理想情况下，我希望将其设置在页面中心的特定宽度并重复，但我也没有让它工作。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:49:24.800

这应该完全像你想要的那样工作。但是你需要定义一个背景颜色，这样背景图像就不会在大屏幕上被截断。

```
background: url("./styles/reds/theme/images/bg_wrap.png") repeat-y center center fixed; 
```

因为你还没有接受我的回答（这是正确的），所以这里是正文的完整样式类：

```
body {
    font-family: Verdana, Helvetica, Arial, sans-serif;
    color: #828282;
    background-color: #FFFFFF;
    font-size: 10px;
    margin: 0;
    padding: 12px 0;
    background: url("./styles/reds/theme/images/bg_wrap.png") repeat-y center center fixed; 
} 
```

更改背景颜色以删除白色边框并删除 html{ .. } css 类 plz。html 标签不应该被设置样式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:40:48.327

我在 phpbb 中有一个不适合整个屏幕的图像背景。我在正文和 html 中都添加了 100% 的宽度和高度，但它没有修复它。最后，我也为 html 元素定义了背景图像，而不仅仅是正文。似乎成功了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T16:44:32.007

在**CSS**中添加

```
body, html{
    width:100%;
    height:100%
} 
```

第二次尝试：

```
html{
    width:100%;
    height:100%;
}
body {
    /* Text-Sizing with ems: http://www.clagnut.com/blog/348/ */
    font-family: Verdana, Helvetica, Arial, sans-serif;
    color: #828282;
    background-color: #FFFFFF;
    /*font-size: 62.5%;          This sets the default font size to be equivalent to 10px */
    font-size: 10px;
    margin: 0;
    padding: 12px 0;
    background: url("{T_THEME_PATH}/images/bg_wrap.png") no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T16:47:01.697

您从 css-tricks 获取的 css 未正确复制。尝试使用背景：，而不是背景图像：

# vb.net - 请求失败，HTTP 状态为 401：访问被拒绝

> ID：14200187
> 
> 赞同：0
> 
> 时间：2013-01-07T16:41:41.707
> 
> 标签：vb.net

我是 Vb.net 的新手。我正在创建一个需要 Windows 登录名的 Intranet 应用程序。我从`System.Net.CredentialCache.DefaultNetworkCredentials`. 它在我的本地主机机器上运行良好。但问题是，当我尝试从开发服务器访问该站点时，它显示错误：

> 请求失败，HTTP 状态为 401：访问被拒绝

但是相同的代码在测试环境中运行良好。我不知道为什么这两个环境的行为不同。我正在使用 Windows 集成身份验证并禁用匿名访问。请帮我弄清楚这个问题。

```
Dim consumeWebService As ws-ProfileService
consumeWebService = New ws-ProfileService
consumeWebService.PreAuthenticate = True
consumeWebService.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:10:10.320

这听起来像是一个冒名顶替的问题。在这里阅读，看看这是否有帮助。即使是七岁，也绝对值得一读。

[如何：在 ASP.NET 2.0 中使用模拟和委派](http://msdn.microsoft.com/en-us/library/ms998351.aspx)

# c++ - 为什么 C++ std 向量在赋值或调整大小时会出现段错误？

> ID：14200189
> 
> 赞同：3
> 
> 时间：2013-01-07T16:41:50.447
> 
> 标签：c++, stl, vector, segmentation-fault, opensuse

这是一个会产生分段错误的最小代码。

```
#include<vector>
int main() {
  std::vector<double> a;
  a.resize(10);
  return 0;
} 
```

显然这段代码没有任何问题。我已经在几个系统上运行它没有问题，但它在我的工作电脑上产生了分段错误。

代码是在运行 openSUSE 11.1 的系统上使用 g++ file.cpp 编译的。我知道这是一个较旧的操作系统，但我不允许升级或重新安装。我唯一有权使用的是 zypper（用于安装和删除程序的命令行实用程序）。

我的假设是它与 c++ 库有关。我已经尝试重新安装我能想到的与 gcc/g++ 和 libstdc++ 相关的所有内容，但我仍然看到同样的问题。

有没有人见过这样的东西？有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:37:55.777

您在哪里构建和链接应用程序？有什么选择？如果你动态链接 C++ 标准库，你很容易遇到问题；C++ 标准库以破坏二进制兼容性的方式进行了多次更改，并且二进制兼容性也可能受到编译器选项的影响。通常，您应该`-static-libstdc++`在构建时使用选项，以避免此类问题。（请注意，系统库*并非*如此，其中动态链接是首选。）

# actionscript-3 - AS3多文件下载，完成时检查？

> ID：14200190
> 
> 赞同：0
> 
> 时间：2013-01-07T16:41:54.513
> 
> 标签：actionscript-3, flash, air

我正在遍历一小部分文件名以从远程服务器获取并保存在本地。这一点工作正常。

问题是，下载完成后我需要运行下一个函数。

目前，我的函数，我们称之为 step2()，在所有 FileStreams 完成之前被调用（事实上，它甚至在该函数开始之前被调用！）

我读到使用 openAsynch 时有一个完整的事件侦听器，但我需要检查所有文件（例如 3 个远程 swfs）是否已写入，然后启动 step2() 函数。

我该怎么办？

下面的代码：

```
function onPlaylistComplete(e:Event)
{
    var myArray:Array = new Array();
    for each(var i in list_of_files)
    {
        myArray.push(i);
    }

    for(i = 0; i < myArray.length; i++)
    {
        swfItem = myArray[i];
        var urlString:String =  site_url + myArray[i];
        var urlReq:URLRequest = new URLRequest(urlString);
        var urlStream:URLStream = new URLStream();

        urlStream.addEventListener(Event.COMPLETE, urlStreamComplete(swfItem));
        urlStream.load(urlReq);
    }

    function urlStreamComplete(swfItem):Function
    {
        var downloadSwf:Function = function (event:Event):void {
            var fileData:ByteArray = new ByteArray();
            var stream = event.target;
            stream.readBytes(fileData, 0, stream.bytesAvailable);
            try {
                var f : File = File.documentsDirectory.resolvePath(swfItem);
                var fs : FileStream = new FileStream();
                fs.addEventListener(Event.COMPLETE, fileCompleteHandler);
                fs.openAsync(f, FileMode.WRITE);
                fs.writeBytes(fileData);
            }
            catch (err : Error) {
                trace(err.message);
            }
        }
        return downloadSwf;
    }

    function fileCompleteHandler(e:Event):void {
        e.target.close();
    }

    step2(); // this seems to run before UrlStreamComplete()
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:56:51.213

你不能移动 step2(); 在 fileCompleteHandler 函数的末尾？因为此时 step2(); 在通过 for(i = 0; i < myArray.length; i++) 循环后立即调用（这是早期的方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T05:33:32.043

您的问题`for loop`永远不会与异步模型一起使用。所以最好使用递归函数。

downloadAllFiles 方法第二个参数，即所有下载完成后调用的函数。然后您可以调用 step2() 或任何可能的方法。

确保在下载 IOErrorEvent 等文件时是否有任何问题...

```
 downloadAllFiles(myArray,function():void
    {
        step2();
    });

    function downloadAllFiles(myArray:Array, complete:Function):void
    {
        if(myArray && myArray.length == 0)
        {
            if(complete)
                complete.call();
            return;
        }

        swfItem = myArray.shift();

        var urlString:String =  site_url + swfItem;
        var urlReq:URLRequest = new URLRequest(urlString);
        var urlStream:URLStream = new URLStream();

        urlStream.addEventListener(Event.COMPLETE, function (event:Event):void 
        {
            var fileData:ByteArray = new ByteArray();
            var stream = event.target;
            stream.readBytes(fileData, 0, stream.bytesAvailable);

            try {
                var f : File = File.documentsDirectory.resolvePath(swfItem);
                var fs : FileStream = new FileStream();

                fs.addEventListener(Event.CLOSE, function(closeEvent:Event):void
                {
                    downloadAllFiles(myArray,complete);
                    return;
                });
                fs.openAsync(f, FileMode.WRITE);
                fs.writeBytes(fileData);
            }
            catch (err : Error) 
            {
                trace(err.message);
            }
        });

        urlStream.load(urlReq);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T08:19:56.167

您缺少的是一种检查列表中的所有文件是否已加载的方法，**3vliguy**是正确的，您`step2();`应该在完整的处理程序中，但不仅如此，您还必须测试是否加载了所有文件。您可以通过多种方式执行此操作，例如使用文件计数器，当它为 0（所有文件已加载）时，您将执行`step2()`，否则您将忽略它并减少计数器。

ps **Raja Jaganathan**方式也可以，只是它是排队加载，而使用计数器，您可以从一开始就开始加载所有文件。

# java - JComboBox KeyReleased 事件不起作用

> ID：14200191
> 
> 赞同：0
> 
> 时间：2013-01-07T16:41:57.217
> 
> 标签：java, swing, jcombobox, keyevent, keyrelease

我正在使用 a`JComboBox`从 sql DB 中搜索查询。我想在输入字母时搜索查询。我正在使用网豆 IDE。这是自动代码。

```
srch.addKeyListener(new java.awt.event.KeyAdapter() {
        public void keyReleased(java.awt.event.KeyEvent evt) {
            srchKeyReleased(evt);
       }
}

private void srchKeyReleased(java.awt.event.KeyEvent evt) {
    //Searching code
} 
```

但什么也没有发生。我起诉搜索代码没有错误。请给我代码来执行此操作，而无需来自 IDE 的自动代码。的名字`JComboBox`是`srch`。组合框可编辑=true。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:43:15.177

由于您的组合框是可编辑的，因此您应该尝试以下操作：

```
srch.getEditor().getEditorComponent().addKeyListener() 
```

而不是这个

```
srch.addKeyListener() 
```

# java - 定时器的嵌套

> ID：14200195
> 
> 赞同：0
> 
> 时间：2013-01-07T16:42:06.237
> 
> 标签：java, swing, timer, nested

这篇文章与我的[上](https://stackoverflow.com/questions/14183734/issue-with-timertask)一篇文章有​​关。代码块在所需时间后将文本更改为所需的颜色。但是，现在我想更改特定单词的颜色，以便每个字母获得相同的时间。例如，如果“你好”的时间为 1000 毫秒（有 5 个字母），那么 'h''e''l' 'l''o' 每个字母应该得到 1000/5 毫秒，即每个 200 毫秒。

我为此实现了摆动计时器：

```
public Reminder() {

    a[0]=2000;
    a[1]=1000;
    a[2]=3000;
   a[3]=5000;
    a[4]=3000;
ActionListener actionListener = new ActionListener() {
  public void actionPerformed(ActionEvent actionEvent) {
  point =point +arr[i].length();
i++;

     doc.setCharacterAttributes(0,point+1, textpane.getStyle("Red"), true);
     timer.setDelay(a[i]);

    }
};

timer = new Timer(a[i], actionListener);
timer.setInitialDelay(0);
timer.start(); 
```

为了发生这种情况，我应该`Timer`在内部使用另一个`actionListener`来为特定字母提供更多时间吗？还是我应该先打破时间`.length()` 然后使用计时器？我无法决定更好的方法。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:34:01.387

您永远不需要超过一个计时器。由于您提前知道一切应该发生的确切时间，因此只需计算这些时间，将它们放入一个列表（按时间排序）并执行每一个。

```
public colorize(int offset, int length) {
    long triggerTime[] = new long[length];
    long startTime = System.currentTimeMillis();
    for (int i=0; i<length; i++) {
         triggerTime[i] = startTime + (1000*i)/length;
    }

    for (int i=0; i<length; i++) {
        //just wait for the next time to occur
        Thread.sleep(triggerTime[i]-System.currentTimeMillis());
        doc.setCharacterAttributes(offset, i+1, textpane.getStyle("Red"), true);
    }
} 
```

这可能会让您觉得很乏味，因为它不使用 TimerTask 对象，但它有效、高效且易于调试。您只需在所需的任何线程上调用此方法，它就会占用整个线程，并且单词将以 1 秒内完成的速度着色。

如果您手边没有线程，您可以制作一个调用它的计时器，但唯一的原因是访问线程。真正的重点是：不要设置多个计时器，只需制作一个时间值数组。满足一个事件后，设置为延迟到下一个事件。您永远不需要多个计时器。

如果您制作一个代表角色颜色（或您想要的任何动作）的对象并将这些动作的集合放在一起，那会更简洁一些。然后按他们要离开的时间对整个集合进行排序。上面的循环将遍历集合，等待操作时间到达，然后执行它。这种方法的另一个优点是您可以清除集合并终止循环。

请参阅我的网站上关于[过度使用计时器的讨论，](http://agiletribe.wordpress.com/2013/01/14/timers-common-misunderstandings/)以了解为什么这是不好的。

# objective-c - 当没有索引时，通过 CellForRowAtIndexPath 中的数组进行索引

> ID：14200197
> 
> 赞同：0
> 
> 时间：2013-01-07T16:42:07.307
> 
> 标签：objective-c, cocoa-touch, nsarray, uitableview

我已经填充了`NSArray`来自 MagicalRecord（核心数据包装器）的查询结果。我需要获取这些结果并将它们显示在`UITableView`from within的自定义单元格中`cellForRowAtIndexPath:`，但索引引用了另一个`UITableView`已选择的索引。

我有两个`UITableView`；一个包含客户列表，另一个包含每个客户的约会列表。当用户选择客户时，代码会查找该客户的所有约会。因此，第二个表视图不涉及索引）。

第一个表视图有一个客户列表；当用户选择其中一个客户端时，第二个表视图将填充该选定客户端的约会列表。因此，`index.row`指的是第一个`UITableView`，而第二个没有它可以引用的索引。我只是将内容转储`apptDataArrray`到单元格中。

这是我的代码：

```
if(tableView.tag == 2) {  //  appointment info  
    static NSString *cellIdentifier = @"apptListCell";
    ApptCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if(cell == nil)  {
        cell = [[ApptCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }

    //  configure the cell...
    AppointmentInfo *currentAppointment = [apptDataArray objectAtIndex: 0];  //  go through the array  <---- TODO

    // Set the dateFormatter format
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    NSDateFormatter *timeFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];  //  start date/time
    [timeFormatter setDateFormat:@"HH:mm:ss"];  //  end time

    UILabel *label = (UILabel *)[cell viewWithTag:3];  //  display start date/time  (NEEDS TO BE LOCALIZED!)<-----  TODO????
    label.text = [dateFormatter stringFromDate:currentAppointment.aStartTime];

    label = (UILabel *)[cell viewWithTag:4];  //  display end time
    label.text = [timeFormatter stringFromDate:currentAppointment.aEndTime];

    label = (UILabel *)[cell viewWithTag:5];  //  display service tech name
    label.text = currentAppointment.aServiceTech;

    return cell;

} 
```

我的问题是：在下面的行中`// configure the cell`，我如何遍历`apptDataArray`每次`cellForRowAtIndexPath:`调用，因为没有可以应用于该数组的索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:06:37.603

> 从内部，`cellForRowAtIndexPath:`但索引指的是另一个`UITableView`已选择的。

什么？！不，它没有。你有一个严重的误解。该方法的全称是[`tableView:cellForRowAtIndexPath:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006941-CH3-SW6). 任何需要显示单元格的表格视图将其自身作为第一个参数传递，并将其自己的单个单元格*的索引路径作为第二个参数传递。当第二个表视图向您的数据源询问其单元格信息时（当您的测试`tableView.tag == 2`测试为真时），传入的索引路径引用*该表*。否则它怎么可能工作？

你需要做的就是

```
AppointmentInfo *currentAppointment = [apptDataArray objectAtIndex: indexPath.row]; 
```

与任何其他支持数组的表视图相同。

这里没有魔法。您已经为表格视图提供了指向您的对象的指针，并告诉表格从该对象获取所需的信息。然后，该表向数据源对象发送消息，就像其他任何事情一样。其中一条消息是`tableView:cellForRowAtIndexPath:`. 另一个表视图也发送该消息的事实有时不会影响第一个。每个表视图将*仅*代表它自己与您的数据源交互。

需要注意的是，这个问题——甚至是对应用程序结构的描述——*强烈*表明您可能应该为每个表视图拥有一个单独的数据源/委托对象。

* * *

*在评论中的某处，您似乎暗示您认为您需要在一次调用期间设置表格视图中的所有单元格，`tableView:cellForRowAtIndexPath:`这也是不对的。您只需要配置并返回与索引路径对应的*一个单元格。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T16:52:47.490

听起来您需要为每个客户创建一个约会数组，然后假设该数组名为 apptDataArray，下面的代码将起作用。单击第一个 tableview 上的一行将使用客户端创建约会数组列表并使用该数据重新加载第二个 tableview。每个约会都是一行。

如果您正在获取所有数据并且所有结果都存储在 apptDataArray 中，那么您应该能够将 tableviewNumberOfRows 值设置为 apptDataArray 的大小

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    if(tableView == table2Ivar){
      return [apptDataArray count];
    }
   //Else you are getting a list of unique clients
} 
```

然后在您配置单元格时使用结果条目和表行之间的相关性，只需使用，每个 indexpath.row 将成为客户约会的条目。

```
AppointmentInfo *currentAppointment = [apptDataArray objectAtIndex: indexPath.row]; 
```

示例 GitHub 项目 [https://github.com/propstm/twoTableTest](https://github.com/propstm/twoTableTest)

# c - 涉及浮点数的自动配置检查的非常量存储大小？

> ID：14200198
> 
> 赞同：2
> 
> 时间：2013-01-07T16:42:11.350
> 
> 标签：c, gcc, floating-point, autotools, autoconf

我正在使用一些 autoconf 的东西，并且有一个测试包括以下内容：

```
static int test_array [1 - 2 * !((((float)((int)((float)1.4))) == ((float)1.4)) >= 0)]; 
```

这失败了：

> 错误：“test_array”的存储大小不是恒定的

但是当我将其更改为：

```
static int test_array [1 - 2 * !((((int)((int)((int)1.4))) == ((int)1.4)) >= 0)]; 
```

它工作正常。

我对自动工具使用的所有技巧都不是很熟悉，但这两种方法对我来说似乎都应该在编译时确定。

为什么第一个失败？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T16:46:43.597

让我们看一下标准（6.6（6））：

> 整数常量表达式应具有整数类型，并且应仅具有整数常量、枚举常量、字符常量、`sizeof` 结果为整数常量的`_Alignof`表达式、表达式和作为强制类型转换的直接操作数的浮点常量的操作数。**整数常量表达式中的强制转换运算符只能将算术类型转换为整数类型**，但作为`sizeof`or`_Alignof`运算符的操作数的一部分除外。

（强调我的）。

您不能`float`在整数常量表达式中强制转换为（除了`sizeof`or的参数`_Alignof`），因此

```
1 - 2 * !((((float)((int)((float)1.4))) == ((float)1.4)) >= 0) 
```

不是整数常量表达式。

数组元素的数量`static`必须是一个整数常量表达式，计算结果为正整数。

# ios - 最终用户如何通过电子邮件向我发送他们的 iOS 应用程序数据库？

> ID：14200201
> 
> 赞同：1
> 
> 时间：2013-01-07T16:42:28.087
> 
> 标签：ios, backup, itunes

我是一名 iOS 开发人员，一位用户报告了一个奇怪的问题，如果不访问他们的 SQLite 应用程序数据库，我将无法解决该问题。

但是，由于该应用程序当前存在，我没有打开 iTunes 文件共享，因此用户没有真正简单的方法可以从手机上获取数据库。

我怎样才能让她检索数据库并将其发送给我们？有没有办法从 iTunes 备份中检索特定应用程序中的单个文件？

# c# - 如何获取两个（0~15）数字作为属性，一个字节作为支持字段？

> ID：14200204
> 
> 赞同：1
> 
> 时间：2013-01-07T16:42:43.363
> 
> 标签：c#, properties, byte

我正在制作一个基于 tile 的 2d 平台游戏，每个字节的内存都是宝贵的。我有一个字节字段可以保存从 0 到 255 的值，但我需要的是两个值为 0~15 的属性。我怎样才能将一个字节字段变成两个这样的属性？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T16:47:25.197

您的意思是仅将低 4 位用于一个值，将高 4 位用于另一个值？

要从 1 个字节中获取两个值，请使用...

```
a = byte & 15;
b = byte / 16; 
```

设置正好相反

```
byte = a | b * 16; 
```

使用移位运算符更好，但编译器优化器现在通常会为您执行此操作。

```
byte = a | (b << 4); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T17:04:47.363

背负 sradforth 的答案，并回答您关于属性的问题：

```
private byte _myByte;
public byte LowerHalf
{
    get
    {
        return (byte)(_myByte & 15);
    }
    set
    {
        _myByte = (byte)(value | UpperHalf * 16);
    }
}
public byte UpperHalf
{
    get
    {
        return (byte)(_myByte / 16);
    }
    set
    {
        _myByte = (byte)(LowerHalf | value * 16);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T17:20:27.237

下面是一些属性和一些后备存储，我尝试以一种易于遵循逻辑的方式编写它们。

```
private byte HiAndLo = 0;

private const byte LoMask = 15;  // 00001111
private const byte HiMask = 240; // 11110000

public byte Lo
{
    get
    {
       // ----&&&&
       return (byte)(this.hiAndLo & LoMask);
    }

    set
    {
       if (value > LoMask) // 
       {
           // Values over 15 are too high.
           throw new OverflowException();
       }

       // &&&&0000
       // 0000----
       // ||||||||
       this.hiAndLo = (byte)((this.hiAndLo & HiMask) | value);
    }
}

public byte Hi
{
    get
    {
        // &&&&XXXX >> 0000&&&&
        return (byte)((this.hiAndLo & HiMask) >> 4);
    }

    set
    {
        if (value > LoMask)
        {
            // Values over 15 are too high.
            throw new OverflowException();
        }

        // -------- << ----0000
        //             XXXX&&&&
        //             ||||||||
        this.hiAndLo = (byte)((hiAndLo & LoMask) | (value << 4 )); 
    }
} 
```

# sql-server - 不等于在 SQL 查询中不起作用

> ID：14200208
> 
> 赞同：6
> 
> 时间：2013-01-07T16:43:05.883
> 
> 标签：sql-server, tsql

![在此处输入图像描述](../Images/79558802b0e27cfb8b1fb281eb7060d2.png)

我正在尝试在 Sql 中使用“不等于”命令，但它似乎不起作用。当所有 3 个字段（status1、status2 和 status3）不等于 Yes 时，我想获得总计数。出于某种原因，我得到 0 条记录。

```
SELECT
    COUNT(ID) from [maintable]
WHERE 
    status1 <> 'YES'
    and status2 <> 'YES'
    and status3 <> 'YES' 
```

上述查询不会产生任何结果。我在这里做错了什么？谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T16:47:55.420

试试这个：

```
SELECT
    COUNT(ID) from [maintable]
WHERE
    COALESCE(status1, '') <> 'YES'
    AND COALESCE(status2, '') <> 'YES'
    AND COALESCE(status3, '') <> 'YES' 
```

`null`值不是`<> 'YES'`，它们是未定义的。

[**合并**](http://msdn.microsoft.com/en-us/library/ms190349.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-26T21:41:27.433

尝试使用 EXCEPT。

```
SELECT
    COUNT(ID) from [maintable]
EXCEPT
SELECT
    COUNT(ID) from [maintable]
WHERE 
    status1 = 'YES'
    and status2 = 'YES'
    and status3 = 'YES' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-04T10:21:26.990

```
SELECT
    COUNT(ID) from [maintable]
WHERE
    NVL(status1, 'NO') <> 'YES'
    NVL COALESCE(status2, 'NO') <> 'YES'
    NVL COALESCE(status3, 'NO') <> 'YES' 
```

我们可以将 nvl 用于 null 情况

# weka - REPtree算法输出

> ID：14200209
> 
> 赞同：3
> 
> 时间：2013-01-07T16:43:06.763
> 
> 标签：weka, arff

谁能告诉我如何在某种数据集下解释 REPtree 算法的输出。

这是输出的一部分：

```
won < 36.5
|   team = BOS
|   |   year < 1961.5 : 36.6 (4/41.19) [1/3.06] 
|   |   year >= 1961.5
|   |   |   pace < 96.31 : 43.4 (2/1) [3/86]
|   |   |   pace >= 96.31 : 51.86 (3/2) [4/73]
|   team = CH1 : 20 (0/0) [1/913.28]
|   team = CL1 : 30 (1/0) [0/0]
|   team = DE1 : 40 (1/0) [0/0]
|   team = NYK
|   |   year < 1958
|   |   |   year < 1952.5 : 26.75 (3/1.56) [1/40.11]
|   |   |   year >= 1952.5 : 36.67 (2/0) [1/1]
|   |   year >= 1958 : 51.06 (12/91.24) [4/18.92]
|   team = PH1 : 36.89 (7/126.49) [2/15.44] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-11T11:54:32.587

我刚刚为你的问题找到了一个很好的答案。: 之前的数字是条件规则。: 之后的第一个数字是类值。两个括号中的第一个数字，即匹配规则的实例数。括号中的第二个数字，即被规则错误分类的实例的百分比。 [更多参考，请看这个链接](http://weka.8497.n7.nabble.com/about-REPtree-td15188.html)

# xml - 导入没有命名空间的 xsd

> ID：14200210
> 
> 赞同：3
> 
> 时间：2013-01-07T16:43:11.843
> 
> 标签：xml, xsd, jaxb, xjc

如标题所示，如何导入未定义 targetNamespace 的模式？

我有以下案例：

文件：Data.xml

```
<?xml version="1.0"?>
<lib:library xmlns:lib="http://java2s.com/ns/library">
  <lib:book id="b0836217462">
    <lib:title>Being a Dog Is a Full-Time Job</lib:title>
    <lib:authors>
      <person id="CMS">
        <name>Charles M Schulz</name>
      </person>
    </lib:authors>
  </lib:book>
</lib:library> 
```

文件：Schema.xsd

```
<?xml version="1.0"?>
<xs:schema targetNamespace="http://java2s.com/ns/library"
  elementFormDefault="qualified" attributeFormDefault="unqualified"
  xmlns:lib="http://java2s.com/ns/library"
  xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:import schemaLocation="another.xsd" />
  <xs:element name="library">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="book" type="lib:bookType" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="bookType">
    <xs:sequence>
      <xs:element name="title" type="xs:string" />
      <xs:element name="authors">
        <xs:complexType>
          <xs:sequence>
            <xs:element ref="person" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="id" type="xs:ID" use="required" />
  </xs:complexType>
</xs:schema> 
```

文件：另一个.xsd

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="person" type="personType" />
  <xs:complexType name="personType">
    <xs:sequence>
      <xs:element name="name" type="xs:string" />
    </xs:sequence>
    <xs:attribute name="id" type="xs:ID" use="required" />
  </xs:complexType>
</xs:schema> 
```

一切似乎都还好，但是当我尝试为这些 XSD 生成 Jaxb 类时，出现以下异常：

```
org.xml.sax.SAXParseException: undefined element declaration 'person'
    at com.sun.xml.xsom.impl.parser.ParserContext$1.reportError(ParserContext.java:176)
    at com.sun.xml.xsom.impl.parser.NGCCRuntimeEx.reportError(NGCCRuntimeEx.java:170)
    at com.sun.xml.xsom.impl.parser.DelayedRef.resolve(DelayedRef.java:125)
    at com.sun.xml.xsom.impl.parser.DelayedRef.run(DelayedRef.java:100)
    at com.sun.xml.xsom.impl.parser.ParserContext.getResult(ParserContext.java:131)
    at com.sun.xml.xsom.parser.XSOMParser.getResult(XSOMParser.java:226)
    at com.sun.tools.xjc.ModelLoader.createXSOM(ModelLoader.java:519)
    at com.sun.tools.xjc.api.impl.s2j.SchemaCompilerImpl.bind(SchemaCompilerImpl.java:236)
    at com.sun.tools.xjc.api.impl.s2j.SchemaCompilerImpl.bind(SchemaCompilerImpl.java:85)
    at org.apache.cxf.tools.wsdlto.databinding.jaxb.JAXBDataBinding.initialize(JAXBDataBinding.java:411)
    at org.apache.cxf.tools.wsdlto.WSDLToJavaContainer.generateTypes(WSDLToJavaContainer.java:603)
    at org.apache.cxf.tools.wsdlto.WSDLToJavaContainer.processWsdl(WSDLToJavaContainer.java:248)
    at org.apache.cxf.tools.wsdlto.WSDLToJavaContainer.execute(WSDLToJavaContainer.java:142)
    at org.apache.cxf.tools.wsdlto.WSDLToJavaContainer.execute(WSDLToJavaContainer.java:300)
    at org.apache.cxf.tools.common.toolspec.ToolRunner.runTool(ToolRunner.java:103)
    at org.apache.cxf.tools.wsdlto.WSDLToJava.run(WSDLToJava.java:113)
    at org.apache.cxf.tools.wsdlto.WSDLToJava.run(WSDLToJava.java:86)
    at org.apache.cxf.maven_plugin.wsdl2java.WSDL2JavaMojo.generate(WSDL2JavaMojo.java:380)
    at org.apache.cxf.maven_plugin.AbstractCodegenMoho.execute(AbstractCodegenMoho.java:257)
    at org.apache.cxf.maven_plugin.wsdl2java.WSDL2JavaMojo.execute(WSDL2JavaMojo.java:477)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

添加`targetNamespace`到文件`another.xsd`并在文件中对其进行限定可以`Schema.xsd`解决问题，但是文件中的元素人员`Delta.xml`将位于该目标名称空间中，这不是我想要的。

我的问题基本上是：为什么 JAXB（或 XJC）没有名称空间时无法识别 person 元素？

对于 Jaxb 生成，我使用 cxf codegen 插件，它使用以下内容：版本 hudson-jaxb-ri-2.1-2 of JAXB XJC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:35:42.380

您遇到的问题与“导入 [ing an] xsd with no namespace”无关。所列的 XSD 非常好。问题很可能与您的设置有关，因为您的`person`对象的 XSD 未解决/找到并因此加载。要确保它不是您的 JAXB 版本（一种非常遥远的可能性），请从命令行调用 xjc/wsimport 并从那里获取它......

# jsf - RichFaces InputNumberSlider 将元素添加到 div

> ID：14200212
> 
> 赞同：0
> 
> 时间：2013-01-07T16:43:28.130
> 
> 标签：jsf, slider, richfaces

我想创建一个整数滑块并将其添加到 div 中。不幸的是，InputNumberSliderTag 似乎没有扩展或实现 UIComponent，所以我无法将它添加到 div。Eclipse 告诉我，add() 行有问题。

```
Div inputContainer = new Div();
InputNumberSliderTag slider = new InputNumberSliderTag();
inputContainer.getChildren().add(slider); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:28:41.787

`InputNumberSliderTag`是标签类，表示`<rich:inputslider/>`标签功能的实现。你想要的类`HtmlInputNumberSlider`在`org.richfaces.component.html`包里面，它是`UIComponent`

# css - 具有固定（底部）位置的中心 DIV

> ID：14200214
> 
> 赞同：1
> 
> 时间：2013-01-07T16:43:47.757
> 
> 标签：css

无论如何，我似乎都无法将#testmenu 居中...我在 CSS 中尝试了数十种组合，但没有运气。请花一点时间看一下，以免我的头发被完全拔掉。

```
#abc {
    position:absolute; 
  bottom: 0;
    width:100%;
    left:0;
    text-align:center; /* IE 5.x centering */
}

#testmenu {
    line-height:2em;
    width:960px;
    color:#FFF;
    background:#00F;
  background:#C00;
    margin:0 auto;
}

<div id="abc">
    <div id="testmenu">
        This should remain 'fixed' bottom center.
    </div>
</div> 
```

这是我所追求的简单 jsfiddle：http: [//jsfiddle.net/mXTmF](http://jsfiddle.net/mXTmF)以及页面的工作演示： http: [//ht-webcreations.com/vildiridis/index.php](http://ht-webcreations.com/vildiridis/index.php)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T17:08:02.760

The problem is that you can't apply auto margins to a fixed element. To allow for varying menu widths, I'd do this:

```
#abc {
    bottom: 0;
    height: 30px; /* forces #testmenu to the bottom */
    margin: 0 auto;
    position: fixed;
    width: 100%;
}
#testmenu {
    background: none repeat scroll 0 0 #FF0000;
    bottom: 0;
    font-size: 10px;
    height: 30px;
    overflow: hidden; /* prevents extra space underneath from 33px-high menu items */
    margin: 0 auto;
    max-width: 1000px;
    width: 960px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:46:41.593

事情很简单，因为您使用的是固定宽度的菜单。将以下 CSS 添加到您的`#testmenu`:

```
position: relative;
left: 50%;
margin-left: -480px; 
```

您可以在此处查看工作演示 > [http://jsfiddle.net/mXTmF/1/](http://jsfiddle.net/mXTmF/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T16:47:08.670

```
<!DOCTYPE html>
<html>
<body>
<div style='border:1px solid; width:960px; height:200px; position:absolute; left:50%; bottom: 100px; margin-left:-480px;'>hallo</div>
</body>
</html> 
```

在 CSS 中

```
#testmenu {
width: 960px;
position: absolute;
left: 50%;
bottom: 100px;
margin-left:-480px;
} 
```

# c# - 自定义控件的每个实例的类的“静态”实例

> ID：14200218
> 
> 赞同：1
> 
> 时间：2013-01-07T16:43:56.770
> 
> 标签：c#, asp.net, oop, design-patterns

我有一个自定义控件。此自定义控件大量使用反射。在自定义控件程序集中，我有一个类，它是一个反射管理器。它处理控件中与反射相关的所有内容。`PropertyInfo`它所做的一件事是缓存`DataSource`. 我想做它，`static`以便我可以在自定义控件类以及程序集中的其他支持类中轻松使用它。问题是这个控件在多个地方使用，并且具有不同的数据源，并且每个都有自己的`PropertyInfo`对象集合。

创建此类的最佳方法是什么，以便它具有每个控件实例的实例，并且也可用于自定义控件程序集中的其他类。

我想到的一件事是将我在自定义控件类中创建的反射管理器的实例插入到一个属性中/尽管支持类的构造函数（ala DI），但也许有更好的模式我只是没有意识到。

**编辑：**抱歉不清楚。该项目是一个 ASP.NET WebForms 项目。控制是`CompositeDataBoundControl`重要的。

**编辑 2：**我将详细说明我的设计以及我在其中看到的缺陷。我有一个正在使用（或计划在多个页面中使用）的自定义控件类。在这个控件里面我有这个类（对不起，如果我有一些语法错误，我是从内存中写出来的）。这不是整个课程，只是这里相关的内容。

```
public static class DataReflectionManager
{
    private static Dictionary<string, PropertyInfo> _propertyInfos = new Dictionary<string, PropertyInfo>();

    public static void RegisterDataSource(IEnumerable dataSource)
    {
        //Get the property info of each property of and
        //stick it in the dictionary.
    }

    public static string GetValueByPropertyKey(object o, string key)
    {
        //Takes o and gets the value of property key by the PropertyInfo object.
        return "";
    }
} 
```

现在这个类不能保持静态，否则自定义控件的所有实例的字典将相同，并且它们每个都有自己的数据源，其中包含不同类型的对象。所以......静电已经出来了。但那又如何呢？如果我`DataReflectionManager`只在自定义控件类中使用，我会在那里创建一个实例。问题是自定义控件使用的列类型，都继承自`ColumnBase`并`ColumnBase`有一个`abstract`函数，在大多数继承的列类型中都使用了DataReflection管理器。所以我可以传递实例，但我正在寻找一个更智能的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:53:14.250

由于您不能拥有静态类的多个实例，因此我将通过添加一个由控件类名称键入的静态`Dictionary<>`键来解决此问题，该控件类名称包含反射管理器的特定于控件的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:44:50.277

我在这里找不到“完美”的解决方案，因为我能想到的每一种方法对我们的特定设计都有一些缺点。

帮助我得出当前解决方案的想法是`ProperyInfo`对象列表与控件的特定实例相关联，因此`Dictionary<string, PropertyInfo>`用于存储它的对象也应该是控件类的成员。这使我能够保持反射管理器静态并在支持类中进行最少的代码更改。

支持类`PropertyInfo`在其各自的构造函数中根据需要获取对象。

反射管理器通过控件构造函数中的反射创建字典，然后控件存储它。

# sql - 在 SAS SQL 中使用宏

> ID：14200221
> 
> 赞同：2
> 
> 时间：2013-01-07T16:44:05.470
> 
> 标签：sql, sas, sas-macro

我想知道我可以将一些代码合并到一个`PROC SQL`语句中，而不是几个背靠背的`SQL`语句。

我正在使用宏来计算参与者在研究同意日期的年龄，类似于[此处](http://www.pauldickman.com/teaching/sas/age.php)和[此处](http://www.nesug.org/proceedings/nesug01/cc/cc4022.pdf)提供的内容。我尝试对宏的功能进行故障排除，并使用**%sum**宏计算了婴儿出生时的总重量（以盎司为单位）（效果很好……）。但是，在尝试计算年龄时，宏不起作用。

*但是，*如果我在新`SQL`语句中使用宏，它就可以正常工作。

下面的代码有效：

```
%macro months(somedate,birth);
intck('month',&birth,&somedate) 
         - (day(&somedate) < day(&birth))
%mend months;

%macro days(somedate,birth);
intck('day',&birth,&somedate) 
         - (day(&somedate) < day(&birth))
%mend days;

%macro sum(part1, part2);
&part1*16 + &part2
%mend sum;

**********  bringing in data from outside tables  ;
proc sql;
  create table demos as
    select      x.*,    infcondt2 as c_dt, 
                y.*,    datepart(visitdt)   as v_dt format date9\. ,
                        datepart(birthdt)   as b_dt format date9\. ,
                        birthweightlbs as lbs,
                        birthweightoz as oz,

                        lbs*16 + oz as tot_oz,
                        %sum(lbs,oz) as tot_oz_m

    from    enrolled as x, 
            demographics as y

    where x.center = y.center and x.id = y.id  ;
    quit;

**********  calculating age in months and in days  ;
proc sql;
create table demos2 as
select  * ,
        %months(c_dt, b_dt) as age_m ,
        %days(c_dt, b_dt) as age_d 
from demos;
quit;

**********  creating age groupings by months: 0-3 and 3-6  ;
proc sql;
create table demos3 as
select  * ,
        case
          when age_m le 3 then 1
          when age_m le 6 and age_m gt 3 then 2
          else 3
          end as age_interval
from demos2;
quit; 
```

* * *

有没有办法把它合并成一个语句？就像是：

```
proc sql;
  create table demos as
    select      x.*,    infcondt2 as c_dt, 
                y.*,    datepart(visitdt)   as v_dt format date9\. ,
                        datepart(birthdt)   as b_dt format date9\. ,
                        birthweightlbs as lbs,
                        birthweightoz as oz,

                        lbs*16 + oz as tot_oz,
                        %sum(lbs,oz) as tot_oz_m,
                        %months(c_dt, b_dt) as age_m,
                        %days(c_dt, b_dt) as age_d, 
                        case
                            when age_m le 3 then 1
                            when age_m le 6 and age_m gt 3 then 2
                            else 3
                            end as age_interval

    from    enrolled as x, 
            demographics as y

    where x.center = y.center and x.id = y.id  ;
    quit; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T16:53:15.567

如果要使用之前在同一 SQL 语句中创建的字段，则需要使用`calculated`关键字。IE：

```
proc sql;
select age*2 as double_Age, calculated double_age/2 as normal_age from sashelp.class;
quit; 
```

仅当有实际计算时才需要计算 - 即，对于 b_Dt。c_dt 只是对 infcondt2 的重命名，所以可以互换使用 c_dt（或 infcondt2），不能使用 CALCUALTED。

```
data test;
input dt1 :date9\. dt2 :date9.;
datalines;
01JAN2010 01FEB2011
01DEC2011 03FEB2012
;;;;
run;

%macro months(somedate,birth);
intck('month',&birth,&somedate) - (day(&somedate) < day(&birth))
%mend months;

proc sql;
create table test2 as
select dt1 -1 as b_dt, dt2 as c_dt, %months(calculated b_dt, c_dt) as third
from test;
quit; 
```

也就是说，如果您有 9.2 或更早版本，则不再需要调整日期 - 查看 INTCK 的文档。有一个可选参数（在 9.3 中称为 METHOD，我认为 9.2 将其称为不同的东西）允许您强制它使用连续的月份概念而不是离散的概念（计算月初是离散的，例如，作为过去的默认值）。

另外，我不明白 DAY 宏的意义——不仅是 DAYs 整数（所以你可以使用普通减法减去这两个数字），而且你为什么要像 %month 那样减去日/日？正如我刚刚讨论的那样，这是为了纠正每月的一部分，并且几天都不需要（它会在某些日期<出生时产生错误的答案）。

正确代码示例：

```
%macro months(somedate,birth);
intck('month',&birth,&somedate) 
         - (day(&somedate) < day(&birth))
%mend months;

%macro days(somedate,birth);
intck('day',&birth,&somedate) 
         - (day(&somedate) < day(&birth))
%mend days;

%macro sum(part1, part2);
&part1*16 + &part2
%mend sum;

data enrolled;
input
id infcondt2 :date9.
;
datalines;
1 01JAN2011
2 02JAN2011
3 03MAR2011
;;;;
run;
data demographics;
input
id
birthweightlbs
birthweightoz
birthdt :datetime17.
;
datalines;
1 8 14 04MAR2011:15:13:14
2 7 13 05MAR2011:15:13:14
3 6 15 06MAR2011:15:13:14
;;;;
run;

proc sql;
  create table demos as
    select      x.*,    infcondt2 as c_dt, 
                y.*,    datepart(birthdt)   as b_dt format date9\. ,
                        birthweightlbs as lbs,
                        birthweightoz as oz,
                        lbs*16 + oz as tot_oz,
                        %sum(lbs,oz) as tot_oz_m,
                        %months(c_dt, calculated b_dt) as age_m,
                        c_dt - calculated b_dt as age_d, /* %days is almost certainly wrong here */
                        case
                            when calculated age_m le 3 then 1
                            when 3 le calculated age_m le 6 then 2
                            else 3
                            end as age_interval

    from    enrolled as x, 
            demographics as y

    where x.id = y.id  ;
    quit; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T18:17:13.147

如果您想对`proc sql`变量执行复杂的数据步骤逻辑，我知道的最好方法是使用`proc fcmp`定义函数而不是宏。

例如

```
proc fcmp outlib=work.util.Dates;
    function months(somedate, birth);
        return (intck('month',&birth,&somedate) - (day(&somedate) < day(&birth)));
    endsub;
run;

options cmplib=work.util;

proc sql;
create table demos as
select      x.*,    infcondt2 as c_dt, 
            y.*,    datepart(visitdt)   as v_dt format date9\. ,
                    datepart(birthdt)   as b_dt format date9\. ,
                    birthweightlbs as lbs,
                    birthweightoz as oz,

                    lbs*16 + oz as tot_oz,                        
                    months(c_dt, b_dt) as age_m,
                    case
                        when age_m le 3 then 1
                        when age_m le 6 and age_m gt 3 then 2
                        else 3
                        end as age_interval

from    enrolled as x, 
        demographics as y

where x.center = y.center and x.id = y.id  ;
quit; 
```

您可以使用`months()`您在`data`步骤中创建的功能`proc sql`，也可以在其他一些地方使用。

# php - 检查逗号分隔的字符串是否包含在另一个逗号分隔的字符串中

> ID：14200223
> 
> 赞同：1
> 
> 时间：2013-01-07T16:44:07.377
> 
> 标签：php, string

我无法检查逗号分隔的字符串是否包含另一个逗号分隔的字符串。

假设我有两个字符串

```
$stringA="red,blue,yellow,green,black,grey,purple,pink,khaki,lemon,orange,white,maroon";
$stringB="blue,green,white,pink,maroon"; 
```

我要检查的是其中是否`$stringB`包含颜色`$stringA`？我能想到的唯一方法是转换为数组，并使用函数`$stringA`一一检查颜色。`in_array`还有其他更简单的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:00:52.587

```
$stringA="red,blue,yellow,green,black,grey,purple,pink,khaki,lemon,orange,white,maroon";
$stringB="blue,green,white,pink,maroon";

$arrayA = explode(',', $stringA);
$arrayB = explode(',', $stringB);

$min = min(array(
    count($arrayA),
    count($arrayB),
));

$AcontainsB = ($min == count(array_intersect($arrayA, $arrayB))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T16:50:50.493

我认为比较数组不是坏主意，但你也可以这样做：

```
$stringATmp = ','.$stringA.',';
$colors = explode(',', $stringB);
$contains = true;
foreach ($colors as $color) {
    if (strpos($stringATmp, ','.$color.',') === false) {
        $contains = false;
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T16:51:18.887

有一些方法比其他方法更快，但在概念上没有比将数据加载到某种数据结构中更容易的方法。由于您正在讨论以任意顺序检查项目列表与可以以任意顺序排列的另一个项目列表，因此没有捷径可以将引用列表（stringA）放入数据结构，然后在中查找 stringB 列表那个数据结构。

一种加快速度的方法。

1.  将 stringA 分解成一个数组。
2.  数组翻转 stringA 数组，使颜色成为数组中的键（无论值是什么）。
3.  现在，您可以使用以下代码从分解的字符串 B 中查找每种颜色：

像这样的东西：

* * *

```
$stringAArray = explode(',', $stringA);
$stringAArray = array_flip($stringAArray);
$stringBArray = explode(',',$stringB);
$itemsToFind = count($stringBArray);
foreach ($stringBArray as $colorFromB) {
    if (array_key_exists($colorFromB, $stringAArray)) {
        $itemsToFind--;
    }
}
if ($itemsToFind == 0) {
    echo "All B items are in A"
} 
```

* * *

这是一个非常快速的查找，并且适用于 A 和 B 中的许多项目。

最后一点：对于较小的数组，通过它`in_array`会比较快。

# java - 使用 Java 库的官方 JSON 验证 JSON

> ID：14200232
> 
> 赞同：2
> 
> 时间：2013-01-07T16:44:33.307
> 
> 标签：java, json, validation

**我的问题：**如何改进这些方法来检查字符串是否有效 json ，而不必`JSONException`通过使用[官方 JSON for java 库](http://json.org/java/)来忽略 s ？

```
public boolean isValidJSON(String possibleJson) {
  return isJSONObject(possibleJson) || isJSONArray(possibleJson);
}

private boolean isJSONObject(String possibleJson) {
  try {
    new JSONObject(possibleJson);
    return true;
  } catch (JSONException ex) {
    return false;
  }
}

private boolean isJSONArray(String possibleJson) {
  try {
    new JSONArray(possibleJson);
    return true;
  } catch (JSONException ex) {
    return false;
  }
} 
```

我很确定依赖作为方法中逻辑的一部分抛出的异常不是最佳实践。还有另一种方法可以做到这一点吗？

**注意：**请记住，我不希望使用其他库来执行此操作。它只是一个大项目的一小部分，如果我能提供帮助，我不想引入另一个依赖项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:59:42.070

如果您不想使用其他库，我认为这是最好的方法。该库中没有验证功能。如果您想使用其他东西，您可以尝试[JSON Tools](http://jsontools.berlios.de/)与`JSONValidator`对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:03:00.903

从官方的 JSON Java 库 Javadocs 来看，似乎没有其他方法。由于您不想使用任何其他库来执行此操作，并且您不想招致异常处理增加的开销，因此一种解决方法是检查它们的[源代码](https://github.com/douglascrockford/JSON-java/blob/master/JSONObject.java)并像您一样重写一个方法`isValidJSON`（不添加异常处理）。这样做的一个缺点是您不会自动获得对该类/方法的未来修改。

如果您愿意使用其他库，您可以查看[JSONUtils](http://json-lib.sourceforge.net/apidocs/net/sf/json/util/JSONUtils.html)，它有一个类似 [mayBeJSON](http://json-lib.sourceforge.net/apidocs/net/sf/json/util/JSONUtils.html#mayBeJSON%28java.lang.String%29)的方法，它返回一个布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-14T07:28:33.257

根据我对 javadocs 标准的理解，没有特定的方法可以检查这一点。除非您处理异常并使用 try catch 块对其进行验证。您可以使用任何其他库来验证这一点。那么这里你可以使用[http://json-lib.sourceforge.net/apidocs/net/sf/json/util/JSONUtils.html](http://json-lib.sourceforge.net/apidocs/net/sf/json/util/JSONUtils.html) JavaUtils。有方法名称可能是 JSON(String)，它返回布尔值并验证 json。

# excel - 识别每一行的数据透视表字段 (Excel)

> ID：14200233
> 
> 赞同：0
> 
> 时间：2013-01-07T16:44:33.723
> 
> 标签：excel, pivot-table, vba

我有一个数据表，以及相应的数据透视表：

![http://i.stack.imgur.com/ExzBX.png](../Images/8fadbcaa084b73c3874f974f1f30f406.png)

对于数据透视表中的每一行，我想知道行标签所指的字段。因此，对于突出显示的橙色单元格 C17，我想返回“名字”（通过将鼠标悬停在单元格 A17 上可以看到）。

我有一些限制，这意味着我需要以紧凑的形式使用数据透视表。如果我可以只使用大纲或表格布局会很容易，但我仅限于使用单列作为行标签。

请问有什么想法吗？我很乐意使用 VBA 或内置 Excel 函数来解决问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:01:29.977

在突出显示的单元格中，使用以下公式：`=IF(ISNA(MATCH(A17,$A$2:$A$7,0)),$B$1,$A$1)`

除非姓氏也是出现在列表中的名字，否则这将起作用。

# facebook - 为 Facebook 对象 ID 而非 URL 创建一个点赞按钮？

> ID：14200234
> 
> 赞同：3
> 
> 时间：2013-01-07T16:44:34.087
> 
> 标签：facebook

Facebook 的赞按钮[文档](http://developers.facebook.com/docs/reference/plugins/like/)允许为 URL 创建一个赞按钮。

但是，文档还显示，[喜欢是针对对象 ID](http://developers.facebook.com/docs/reference/api/publishing/)而非 URL 记录的。

如何为 ID（例如 '123456' ）而不是 URL 创建一个点赞按钮？

# java - 自定义 DocumentFilter - “无效删除”异常

> ID：14200236
> 
> 赞同：1
> 
> 时间：2013-01-07T16:44:35.630
> 
> 标签：java, swing

我创建了自己的 DocumentFormat，用分号分隔的整数列表。解析字符串等工作正常，但是当我想用我的新字符串替换整个文本时出现问题。

`Invalid remove`调用时出现异常`super.replace(fb, 0, out.length(), out, attrs);`。任何人都可以解释这个消息吗？

这是我的课程代码：

```
import java.util.ArrayList;

import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.Document;
import javax.swing.text.DocumentFilter;

public class IntsFilter extends DocumentFilter {

        @Override
       public void insertString(FilterBypass fb, int offset, String string,
             AttributeSet attr) throws BadLocationException {
            // Do nothing so far
       }

       @Override
       public void replace(FilterBypass fb, int offset, int length, String text,
             AttributeSet attrs) throws BadLocationException {

           Boolean test = false;

           try {
               Integer.parseInt(text);
               test = true;
           } catch (NumberFormatException e) {
               test = text.equals(";");
           }

            if (!test) return;

            Document doc = fb.getDocument();
            StringBuilder sb = new StringBuilder();
            sb.append(doc.getText(0, doc.getLength()));
            sb.replace(offset, offset + length, text);

            ArrayList<String> data = toArray(sb.toString());
            System.out.println(arrayToString(data));
            String out = arrayToString(data);

            try {
                super.replace(fb, 0, out.length(), out, attrs);
            } catch (Exception e) {
                System.out.println(e.getMessage());
            }

       }

       @Override
       public void remove(FilterBypass fb, int offset, int length)
             throws BadLocationException {

           try {
               super.remove(fb, offset, length);
            } catch (Exception e) {
                System.out.println(e.getMessage());
            }
          // TODO: uzupełnić

       }

       protected String arrayToString(ArrayList<String> input) {

           String result = "";

           for (int i=0; i<input.size(); i++) {

               if (i == input.size() - 1)
                   result += input.get(i).equals("0") ? "" : input.get(i);
               else
                   result += input.get(i) + "; ";

           }

           return result;

       }

       protected ArrayList<String> toArray(String input) {

           input = input.replaceAll(";$", "; 0");

           ArrayList<String> list = new ArrayList<String>();

           for (String part : input.replaceAll("\\s", "").split(";")) {
               try {
                   Integer.parseInt(part);
                   list.add(part);
               } catch (NumberFormatException e) {}
           }

           return list;

       }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:12:50.043

如果偏移量 + 长度大于文档的当前长度，则会发生该错误。不要自己更换。让超类来做。将您的 super.replace() 调用移至测试后。

# jquery - 使用 jQuery Ajax，记录了 200 个状态代码，但代码执行错误函数

> ID：14200240
> 
> 赞同：0
> 
> 时间：2013-01-07T16:44:45.570
> 
> 标签：jquery, ajax

我正在使用 jQuery 1.8.3 Ajax 函数发出跨域请求。下面的代码总是返回“失败”，但控制台日志中的每个 Ajax 请求都会记录“200 OK”。鉴于日志显示状态为 200，不应该执行成功功能吗？返回状态为 200 时，如何获取要执行的成功功能？

```
$().ready(function() {
    var checkIt = function(checkURL, resultP) {
    $.ajax({
      url: checkURL,
      type: 'GET',
      cache: false,
      success: function() {
        $(resultP).text("ok");
      },
      error: function() {
        $(resultP).text("fail");
      }
    });
  };
  checkIt("https://firstURL", "#p1p");
  checkIt("https://secondURL", "#p2p");
  checkIt("https://thirdURL", "#p3p");
)}; 
```

控制台日志显示如下（每个请求都有 200 响应）

```
[10:03:37.898] GET https://firstURL [HTTP/1.1 200 OK 141ms]
[10:03:37.898] GET https://secondURL [HTTP/1.1 200 OK 141ms]
[10:03:37.898] GET https://thirdURL [HTTP/1.1 200 OK 141ms] 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:51:53.007

您尝试从中获取数据的 URL 可能被命中，因此为 200，但您尝试访问的服务器的错误或问题不允许跨域请求，因此“失败”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:39:48.237

这不起作用，因为它是跨域调用。

解决这个问题

**JavaScript**

创建一个函数

```
function getMyData(data) {
    alert(data);
    //Do the magic with your data
} 
```

**服务器端**

在服务器端将数据包装在函数语法中

```
getMyData("Enter your data here"); 
```

**JavaScript**

然后创建一个脚本标签并添加一个链接到你的跨域页面

```
 <script type="text/javascript"
         src="cross ref url">
 </script> 
```

供[参考：维基百科](http://en.wikipedia.org/wiki/JSONP)

**编辑：**另一个选项是在您的域上创建代理。即在您的域中创建一个页面，该页面在内部调用跨域页面并将相同的数据返回给您的Ajax 调用。

# asp.net - Excel 单元格中的 HTML 数据。Excel更改值，导致无效导入数据库

> ID：14200241
> 
> 赞同：1
> 
> 时间：2013-01-07T16:44:51.730
> 
> 标签：asp.net, excel, excel-formula, export-to-excel

我目前正在尝试导入一个 Excel 电子表格，其中包含我网站上产品的产品数据。

在可用于产品导入的各个字段中，产品描述就是其中之一。在此单元格中，我粘贴了希望在该产品上显示的 HTML 数据。

但是，似乎有时 excel 决定自己格式化这些数据，并且在导入后，HTML 全部搞砸了。这很奇怪，因为这不会发生在每个产品上。

我尝试将单元格格式化为“文本”，但这似乎没有效果。当我将单元格中的值粘贴到记事本中时，我可以看到每个单引号 (") 都加倍了。出于什么原因，我不知道。

在单元格中查看时数据看起来正确，但无法正确导入，并且从 Excel 中复制和粘贴时数据明显更改。

关于如何解决这个问题的任何想法？我怎样才能让excel忽略数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:35:37.900

尝试将 HTML 代码放在一行中，不要中断。例如：

```
<html><body><p><div id="PDG-Team-Image">Test</body></html> 
```

我使用上面的简单 HTML 片段进行了快速测试。在 A 列中，我将代码与换行符放在一起。在 B 列中，我将代码没有中断。然后我复制单元格A1并将其粘贴到记事本中，然后复制B1并将其粘贴到记事本中。您会看到第一个粘贴 (A1) 有双引号。第二个粘贴（B1）没有双引号。

![在此处输入图像描述](../Images/e7e9ba3562f0411f1079e36654f8b8dd.png)

# android - 无法解析json数据

> ID：14200242
> 
> 赞同：0
> 
> 时间：2013-01-07T16:45:01.687
> 
> 标签：android, json, cordova

我正在为android制作一个phonegap应用程序。我收到一个 json 字符串并试图解析它。这是一个非常小的数据。 `{"result":{ "node":"32"} }`

如果显示使用结果的 iam `alert(request.responseText)`
，但是如果我将此 request.responseText 返回给调用函数并将其收集到变量中，例如`var x= somefunction(); x contains undefined.`

```
var jsonObj = sendPostRequest(url,nurl);
  console.log(jsonObj+""); // GIVES UNDEFINED HERE AT THIS LINE BUT SAME STATEMENT WORKS IN sendPostRequest()
  if(jsonObj){
    var Json = JSON.parse(jsonObj);
    console.log(json);
    document.getElementById("gnodei").innerHTML= json.result.wEventId;
  } 
```

我可以在 somefunction() 内的变量 y 中收集此响应，但是在将此数据返回给调用函数时，没有任何东西到达那里。我在它下面使用上面的 json 数据 x 但它不起作用。

请建议。

编辑：`function sendPostRequest(url,nurl){

```
var request = new XMLHttpRequest();
request.onreadystatechange = function() {
       if (request.readyState == 4) {
        if (request.status == 200 || request.status == 0){
           console.log(request.status);
           //alert(request.responseText);
           var txt= request.responseText;
           console.log(txt);
           return txt;
          }
        }
      }

request.open("POST",url, true);
request.setRequestHeader("Content-type","application/x-www-form-urlencoded");
request.send(nurl); 
```

}`

ajax 调用。还有多个函数在准备好它们的 url 和 nurl 值之后调用这个 ajax 调用，所以我需要这个函数。我只需要知道如何在我的调用函数中取回响应。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:13:25.867

解决它：创建一个函数作为回调传递给 sendPostRequest(url,nurl) 方法。只有在 ajax 调用以正确状态结束后才会调用此回调。回调函数分配之后可以使用的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T07:19:45.293

您可以使用：

```
var jsonData = $.parseJSON(stringJson); 
```

# php - 过滤掉 用 php 和 mysql

> ID：14200244
> 
> 赞同：0
> 
> 时间：2013-01-07T16:45:03.090
> 
> 标签：php, filtering

我试图在我的 WordPress 网站中过滤掉大量 (500000) <p>  ;</p> 条目，但我不知道如何。我已经尝试了很多东西，但仍然没有运气。还有很多 \n\n  ; 条目应被过滤掉并替换为 ''

这是我的代码：

```
$query = mysql_query('select meta_id, meta_value from wp_postmeta where meta_value like "%<p>&nbsp;</p>%" ');
while ($item = mysql_fetch_array($query))
{
    echo "item with id:" . $item[meta_id]." found<br>";
    $string = preg_replace('~<p>&nbsp;<\/p>~i', '',  $item["meta_value"]);
    $id = $item[meta_id];
    $q = mysql_query('update wp_postmeta set meta_value = "$string" where meta_id = "$id"') or die(mysql_error());
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:20:05.493

为什么不尝试 MySQL 替换功能？

```
update table_name set field_name = replace(field_name,'string_to_find','string_to_replace'); 
```

# vb.net - VB.Net：MS Access 数据库引擎找不到对象

> ID：14200247
> 
> 赞同：1
> 
> 时间：2013-01-07T16:45:26.027
> 
> 标签：vb.net, excel-2010, ms-access-2010

我有一个将 Excel 文件导入 MS Access 数据库表的模块。我得到：MS Access 数据库引擎找不到对象“REPORTCONFIG”。表 REPORTCONFIG 确实存在，并且它被代码“拾取”，因为就在我导入 excel 之前，我首先将表清空（工作正常）。我已确保我的 excel 中的选项卡与表格名称相同。（报告配置）

这是我的模块：

```
Dim MyExcelFileDialogBox As New OpenFileDialog()
        If MyExcelFileDialogBox.ShowDialog = DialogResult.OK Then
            MyExcelFullFileName = MyExcelFileDialogBox.FileName
            MyExcelFile = Dir(MyExcelFileDialogBox.FileName)
            MyExcelFilePath = Path.GetDirectoryName(MyExcelFileDialogBox.FileName)
            ModuleConnection.AccessConnect()
            ModuleTables.DeleteTableContent(MyTableName)
            Dim MyExcelInsertSQL As String = "INSERT INTO [" & MyTableName & "] SELECT * FROM [Excel 12.0;HDR=YES;DATABASE=" & MyExcelFullFileName & "].[" & MyTableName & "];"
            Dim MyCommand As OleDbCommand = New OleDbCommand(MyExcelInsertSQL, MyAccessConnection)
            Try
                MyCommand.ExecuteNonQuery()
                MyCommand.Dispose()
            Catch ex As Exception
                MsgBox(ex.ToString)
            End Try
            MyAccessConnection.Close()
        End If 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:57:13.013

将工作表用作查询的数据源时，请在工作`$`表名称后添加美元符号 ( )，以便找到它。

通过这个简单`SELECT`的查询，数据库引擎抱怨它找不到`REPORTCONFIG`：

```
SELECT *
FROM [Excel 12.0;DATABASE=C:\share\Access\MyWorkBook.xlsx;HDR=YES].[REPORTCONFIG]; 
```

但是，`REPORTCONFIG$`在`FROM`子句中使用时，以下查询将返回数据而不会出错。

```
SELECT *
FROM [Excel 12.0;DATABASE=C:\share\Access\MyWorkBook.xlsx;HDR=YES].[REPORTCONFIG$]; 
```

# orchardcms - 无需手动启用所有租户的 Orchard 模块。

> ID：14200248
> 
> 赞同：2
> 
> 时间：2013-01-07T16:45:32.727
> 
> 标签：orchardcms

目前正在运行一个拥有 100 多个租户的站点，并且必须手动启用所有模块。有没有办法在我的所有租户中启用果园中的所有模块，而无需前往每个站点并单击启用或使用命令提示符手动使用。我在将内容部署到多个站点时也遇到了同样的问题。我的设置是独一无二的，因为我为每个租户都有不同的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:50:08.930

下面是我如何启用/禁用模块迁移类中的功能的示例。您可以做的是创建一个命令行实现（从 DefaultOrchardCommandHandler 继承），它将您的启用/禁用模块命令分发给所有租户。

我不确定租户系统在命令行方面是如何工作的，我认为您可能必须为每个租户启动一个单独的命令行 bin\orchard.exe 会话。如果是这种情况，您可以在调用 bin\orchard.exe 的脚本中进行扇形处理。如果您可以从 bin\orchard.exe 的单个会话中为不同的租户执行特定于租户的命令，则可以在 Commands 类中进行扇形。

```
[UsedImplicitly]
public class Migrations : DataMigrationImpl {

    public int UpdateFrom2() {
        var features = _moduleService.GetAvailableFeatures().ToDictionary(m=>m.Descriptor.Id, m=>m);

        DisableFeature(features, "TinyMce");
        EnableFeature(features, "TinyMceDeluxe");
        EnableFeature(features, "Contrib.Cache");
        EnableFeature(features, "WebAdvanced.Sitemap");

        return 3; 
    }

    private void DisableFeature(Dictionary<string, Orchard.Modules.Models.ModuleFeature> features, string featureId) {
        if (features.ContainsKey(featureId) && features[featureId].IsEnabled) {
            _moduleService.DisableFeatures(new string[] { featureId });
        }
    }

    private void EnableFeature(Dictionary<string, Orchard.Modules.Models.ModuleFeature> features, string featureId) {
        if (features.ContainsKey(featureId) && !features[featureId].IsEnabled) {
            _moduleService.EnableFeatures(new string[] { featureId });
        }
    }
} 
```

# php - 在创建新行时读取数据库上的最后一个 ID# 并防止重复

> ID：14200250
> 
> 赞同：0
> 
> 时间：2013-01-07T16:45:35.080
> 
> 标签：php, mysql

我有一个数据库，该数据库经常由 php 加密的主脚本更新，我无法读取或编辑它

我需要单独有另一个脚本，它也可以在表的末尾添加一行新的 ID，它不应该与主脚本创建的 id 重复，（其他脚本可能在几秒钟内或几秒钟内更新之后我读了ID）

**那么，我怎样才能读取最新的 ID 列值，然后为此目的创建一个新行？**

**在我的新脚本中，ID# 是否增加 +2 甚至 +5 都没关系，因为主脚本总是读取最后一个 ID 并使其 +1**

我只是不让他们同时制作相同的 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:49:24.453

您在这里不需要任何技巧，只需将 ID 列设置为`PRIMARY`and `AUTO_INCREMENT`，这意味着 MySQL 会将下一个可用的 int 分配给您的行，并允许旧脚本插入它想要的任何内容，避免冲突。

更多信息在这里：[http ://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

# c++ - 将特定位置的位收集成一个新值

> ID：14200255
> 
> 赞同：3
> 
> 时间：2013-01-07T16:45:48.233
> 
> 标签：c++, c++11, bit-manipulation

我有一个大小为 N 个字符的位掩码，它是静态已知的（即可以在编译时计算，但它不是一个常量，所以我不能把它写下来），位设置为 1 表示“想要的”位。而且我有一个相同大小的值，只有在运行时才知道。我想按顺序从该值中收集“想要的”位到新值的开头。为简单起见，让我们假设所需位数为 <= 32。

完全未优化的参考代码，希望具有正确的行为：

```
template<int N, const char mask[N]>
unsigned gather_bits(const char* val)
{
    unsigned result   = 0;
    char*    result_p = (char*)&result;
    int      pos      = 0;
    for (int i = 0; i < N * CHAR_BIT; i++)
    {
        if (mask[i/CHAR_BIT] & (1 << (i % CHAR_BIT)))
        {
            if (val[i/CHAR_BIT] & (1 << (i % CHAR_BIT)))
            {
                if (pos < sizeof(unsigned) * CHAR_BIT)
                {
                    result_p[pos/CHAR_BIT] |= 1 << (pos % CHAR_BIT);
                } 
                else
                {
                    abort();
                }
            }
            pos += 1;
        }
    }
    return result;
} 
```

虽然我不确定该公式是否真的允许在编译时访问掩码的内容。但在任何情况下，它都可以使用，也许一个`constexpr`功能或其他东西会是一个更好的主意。我不是在这里寻找必要的 C++ 魔法（我会弄清楚），只是算法。

输入/输出示例，为清楚起见，使用 16 位值和假想二进制表示法：

```
mask   = 0b0011011100100110
val    = 0b0101000101110011
--
wanted = 0b__01_001__1__01_ // retain only those bits which are set in the mask
result = 0b0000000001001101 // bring them to the front
                   ^ gathered bits begin here 
```

我的问题是：

*   执行此操作的最高效方法是什么？（是否有任何硬件说明可以提供帮助？）

*   如果掩码和值都被限制为`unsigned`，所以是一个单词，而不是无界的 char 数组怎么办？然后可以用固定的、简短的指令序列来完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:37:11.747

将`pext`（并行位提取）完全符合您在 Intel Haswell 中的要求。我不知道该指令的性能如何，但可能比替代方案更好。此操作也称为“compress-right”或简称为“compress”，Hacker's Delight 的实现是这样的：

```
unsigned compress(unsigned x, unsigned m) {
   unsigned mk, mp, mv, t; 
   int i; 

   x = x & m;           // Clear irrelevant bits. 
   mk = ~m << 1;        // We will count 0's to right. 

   for (i = 0; i < 5; i++) {
      mp = mk ^ (mk << 1);             // Parallel prefix. 
      mp = mp ^ (mp << 2); 
      mp = mp ^ (mp << 4); 
      mp = mp ^ (mp << 8); 
      mp = mp ^ (mp << 16); 
      mv = mp & m;                     // Bits to move. 
      m = m ^ mv | (mv >> (1 << i));   // Compress m. 
      t = x & mv; 
      x = x ^ t | (t >> (1 << i));     // Compress x. 
      mk = mk & ~mp; 
   } 
   return x; 
} 
```

# java - 线程“主”java.lang.NullPointerException 中的异常

> ID：14200258
> 
> 赞同：0
> 
> 时间：2013-01-07T16:45:57.577
> 
> 标签：java

我昨天开始学习java，我编写了以下程序，它应该打印成对的相等数字，但是当我运行它时，我得到了

```
Exception in thread "main" java.lang.NullPointerException
at _aaaa.main(_aaaa.java:26) 
```

这是我的程序：

```
import java.util.*;

class pair {
    int first, second;
    pair() {
        first = second = 0;
    }
    public void make_pair(int a, int b)
    {
        first = a;
        second = b;
    }
}
public class aaaa {
    public static void main(String[] idontneedthis)
    {
        Scanner input = new Scanner(System.in);
        int N = input.nextInt(), i, lg = 0;
        int[] A = new int[5010];
        pair[] B = new pair[5010];
        for (N <<= 1, i = 1; i <= N; ++i)
        {
            int var = input.nextInt();
            if (A[var] > 0)
            {
                B[++lg].make_pair(A[var], var);
                A[var] = 0;
            }
            else
            {
                A[var] = i;
            }
        }
        if (lg == 0) System.out.print("-1");
        for (i = 1; i <= lg; ++i)
        {
            System.out.print(B[i].first + " " + B[i].second + "\n");
        }
    }
} 
```

请告诉我出了什么问题或为什么会出现此错误。我提到如果我剪掉第 26 行（`B[++lg].make_pair(A[var], var);`），它会写成 -1。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T16:48:02.237

您需要初始化数组中的对：

```
if (A[var] > 0) {
    B[++lg] = new pair(); //here
    B[lg].make_pair(A[var], var);
    A[var] = 0;
} 
```

这一行：

```
pair[] B = new pair[5010]; 
```

创建一个包含 5010 对的数组，但在初始化它们之前，它们都是空的。

另请注意，由于`5010`和`N`不相关，因此您可能会根据 N 获得 ArrayIndexOutOfBoundException。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T16:57:33.657

我就是这样写的。越少越好;)

```
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

class Pair {
    final int first, second;

    Pair(int first, int second) {
        this.first = first;
        this.second = second;
    }

    @Override
    public String toString() {
        return first + " " + second;
    }
}

public class Main {
    public static void main(String... ignored) {
        Scanner input = new Scanner(System.in);
        int numOfPairs = input.nextInt();
        List<Pair> pairs = new ArrayList<Pair>();
        for(int i = 0; i < numOfPairs;i++) {
            int first = input.nextInt();
            int second = input.nextInt();
            pairs.add(new Pair(first, second));
        }
        for (Pair pair : pairs) 
            System.out.println(pair);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T16:48:35.347

```
 pair[] B = new pair[5010]; 
```

只为元素分配**空间。**`5010` `B`您需要实例化该数组中的每个元素。

```
for(int i = 0; i <B.length;i++)  
{  
    B[i] = new pair();
} 
```

风格的东西：

类名以大写字母开头： `AAAA`not `aaaa`。
明星进口也很糟糕：

```
import java.util.*; 
```

用。。。来代替：

```
import java.util.Scanner; 
```

# android - 如何解决 R.layout.main 无法在我的 android 应用程序中解决？

> ID：14200259
> 
> 赞同：5
> 
> 时间：2013-01-07T16:45:57.483
> 
> 标签：android

作为 Android 应用程序的开发人员，我是新手。我发现一个问题。即 R.layout.main 无法解决。我该如何解决我的问题。我的代码在这里。请解决我的问题。

```
 package com.android;

import android.R;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class HelloActivity extends Activity {
    /** Called when the activity is first created. */

    Button bt;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main);
        bt=(Button)findViewById(R.id.ButtonOk);
        bt.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                //Toast.makeText(getBaseContext(), "Welcome Android World", 3000).show();
            Intent intent = new Intent(HelloActivity.this, DisplayActivity.class);
            startActivity(intent);
            }
        });
    }
}

* 
```

> **我的 xml 代码在这里：**

*

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/hello"
    />
<Button android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Ok" android:id="@+id/ButtonOk" android:height="50dp" android:width="100dp"></Button>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T16:56:19.120

**第 1 步**：移除`import android.R;`

**第2步**：（`Clean And Rebuild`它应该工作）

**如果不**

然后`close the project`退出eclipse并再次打开。按照它应该工作的步骤。

**如果不**

更改您的包裹

**从**

`import android.R;`

**至**

`import yourpackage.R;`

它应该工作

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-07T16:51:10.360

从标题中删除行 import android.R 。

并执行 Ctrl + Shift + O

如果再次出现android.R，则手动写入

```
import <yourpackagename>.R 
```

看起来您使用的包名称为 com.android.R。理想情况下，避免使用像 com.android 这样的包名。尝试像 com.companyname.appname 一样维护它

因此，您养成了这种习惯，并且一旦您即将发布，就不必为更改所有文件夹中的包名称而感到痛苦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T16:47:34.490

导入 com.android.R 而不是 android.R 因为你的包名是 com.android

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T16:46:55.147

尝试清理并重建您的应用程序，这应该可以解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-05T03:40:33.513

我的朋友，请检查您的 xml 文件的名称是否为“main”，因为我们总是写 setContentView(R.layout.your_xml_file_name); 如果您觉得我的解决方案值得，请喜欢它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-13T14:58:45.757

我在 IntelliJ IDEA 上也遇到了这个问题，这就是我解决问题的方法，但首先我注意到以下内容：

1.  这个问题并没有阻碍应用程序的执行
2.  位于**out/production/my/package/name**目录下的资源文件（R.java）会自动更新，但位于**gen/my.package.name**目录下的资源文件（R.java）不会自动更新
3.  IntelliJ IDEA 使用未更新的 R.java 进行智能

因此，我将 R.java 文件中生成的布局类复制到**out/production/my/package/name**目录中，如下所示

```
public static final class layout {
    public static final int main = 2130903040;

    public layout() {
    }
} 
```

我将它粘贴到**gen/my.package.name**目录中的 R.java 文件中

**注意：** 请不要修改**out/production/my/package/name中自动生成的资源文件****R.java**文件

# javascript - 对象属性缺少空格

> ID：14200261
> 
> 赞同：1
> 
> 时间：2013-01-07T16:46:03.060
> 
> 标签：javascript

我有一个数组如下：

```
var voxels = []; 
```

我还有一个名为的变量`locationId`，其中包含一个字符串，即

```
child.geometry.locationId = "Some random location"; 
```

当我做

```
voxels.push({x: child.position.x,
             y: child.position.y,
             z: child.position.z,
             t: child.geometry.name,
             id: child.geometry.locationId
            }); 
```

变量中的字符串以我的`id`方式结束`"SomerandomLocation"`

```
 var dataUri = "data:application/json;charset=utf-8," + JSON.stringify(voxels);
 window.open(dataUri, 'mywindow'); 
```

虽然我刚刚注意到 Url 确实包含空格，但页面上的数据却没有。

# css - 如何获取 IHTMLElement 的所有 IHTMLStyle 属性？

> ID：14200264
> 
> 赞同：4
> 
> 时间：2013-01-07T16:46:06.127
> 
> 标签：css, delphi, dom, mshtml, twebbrowser

我使用下面的代码：

```
const
  HTML_DOC =
    '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">' +
    '<BODY><P id="p1" style="width: 440px; height: 344px; margin: 3px 2px; float: left;">test</P></BODY>' +
    '</HTML>';

procedure TForm1.Button1Click(Sender: TObject);
var
  HTMLTxtRange: IHTMLTxtRange;
  HTMLDocument: IHTMLDocument2;
  HTMLElement: IHTMLElement;
  HTMLStyle: IHTMLStyle;
begin
  WebBrowser1.Navigate('about:blank');
  while WebBrowser1.ReadyState < READYSTATE_COMPLETE do
    Application.ProcessMessages;

  HTMLDocument := WebBrowser1.Document as IHTMLDocument2;
  HTMLTxtRange := (HTMLDocument.body as IHTMLBodyElement).createTextRange;
  HTMLTxtRange.PasteHTML(HTML_DOC);    

  HTMLElement := (HTMLDocument as IHTMLDocument3).getElementById('p1');
  if Assigned(HTMLElement) then
  begin
    HTMLStyle := HTMLElement.style {as IHTMLStyle2};
    Memo1.Lines.Add(HTMLStyle.cssText);  // MARGIN: 3px 2px; WIDTH: 440px; FLOAT: left; HEIGHT: 344px
    Memo1.Lines.Add(HTMLStyle.getAttribute('margin', 0)); // 3px 2px
  end;    
end; 
```

我的问题是：如何在不手动解析的情况下使用 DOM 集合获取可用样式属性的列表，`HTMLStyle.cssText`即预期输出：

```
MARGIN
WIDTH
FLOAT
HEIGHT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:18:46.003

`IHTMLStyle`（或其后代）不公开这种功能。但是，由于`IHTMLStyle`确实实现了`IDispatch`接口，您可以尝试使用`IDispatch.GetTypeInfo()`获取`ITypeInfo`描述样式对象的接口，然后遍历其可用属性，使用`IDispatch.Invoke()`读取您发现的每个属性的值。但是，如果`GetTypeInfo()`没有返回一个可行的`ITypeInfo`，那么你就不走运了，将不得不解析它`IHTMLStyle.cssText`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-04T00:50:53.480

```
var win7: ihtmlwindow7;
     css: ihtmlcssstyledeclaration;
begin
  Win7:= (webbrowser1.document as ihtmldocument2).parentwindow as ihtmlwindow7;
  css:= win7.getcomputedstyle(htmlelement as ihtmldomnode);

  for... css.length
   css.item 
```

# mysql - 当字段 2 = 时，mysql 计数字段 1

> ID：14200266
> 
> 赞同：-1
> 
> 时间：2013-01-07T16:46:09.183
> 
> 标签：mysql

嗨，我有下表

**feeder_bouts2**

```
id|feeder|rfid |bout_time |success|
1 | 2 | 123456789 |2013-01-07 80:00:00 | 1 |
```

我正在运行以下查询

```
select count(*), feeder 
from feeder_bouts2 
where bout_time >='2013-01-01 8:00:00'
    and rfid !='123456789' and success ='1'
group by feeder; 
```

这非常有效，但是我想选择相同的输出，但只选择多个特定馈线的输出，例如馈线 1、2、3、4、6、7、8 之类的

```
select count(*), feeder 
from feeder_bouts2 
where bout_time >='2013-01-01 8:00:00' 
    and rfid !='123456789' and success ='1' 
    and feeder = '1,2,3,4,8,9,10' 
group by feeder; 
```

提前感谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:47:15.520

利用`IN`

```
select count(*), feeder 
from feeder_bouts2 
where bout_time >='2013-01-01 8:00:00' 
and rfid !='123456789' 
and success ='1' 
and feeder in (1,2,3,4,8,9,10)
group by feeder; 
```

# perl - 如何缩小 Perl 脚本？

> ID：14200281
> 
> 赞同：6
> 
> 时间：2013-01-07T16:46:45.927
> 
> 标签：perl, minify

我想缩小一个 perl 脚本，这样我就可以检测到几乎相同的 perl 脚本，它们只有行注释、空行等方面的差异。我有一个预先构建的脚本来做这个缩小吗？如果是这样，我将能够自己校验和并突出显示相同的文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T16:51:20.077

不完全缩小，但您可以使用它[`B::Deparse`](https://metacpan.org/module/B::Deparse)来编译 Perl 脚本，然后将其反编译回 Perl。

您可以区分结果。

一个简单的命令行示例如下：

```
david@Workstation:comp # perl -MO=Deparse 1.pl > a.pl
1.pl syntax OK
david@Workstation:comp # perl -MO=Deparse 2.pl > b.pl
2.pl syntax OK
david@Workstation:comp # diff a.pl b.pl
david@Workstation:comp # diff 1.pl 2.pl
3c3,5
< say "Hello";
---
> 
> 
>   say "Hello";
david@Workstation:comp # 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T16:57:07.040

考虑使用该[`perltidy`](https://metacpan.org/module/perltidy)实用程序来“标准化”多个脚本的格式。

它甚至有一个“混淆”标志，文档中对此进行了解释：

> ## 使文件不可读
> 
> 的目标`perltidy`是提高文件的可读性，但是有两个命令具有相反的效果，`--mangle`和 `--extrude`. 它们实际上只是其他参数组合的别名。这两者都去除了所有可能的空白，但留下了评论和 pod 文档，因此它们本质上是可逆的。...请注意，这些选项没有提供任何有意义的混淆，因为 perltidy 可用于重新格式化文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-07T17:23:52.520

[Code::CutNPaste](http://search.cpan.org/~ovid/Code-CutNPaste-0.04/lib/Code/CutNPaste.pm)查找重复的 Perl 代码

```
use Code::CutNPaste;

my $cutnpaste = Code::CutNPaste->new(
    dirs         => [ 'lib', 'path/to/other/lib' ],
    renamed_vars => 1,
    renamed_subs => 1,
);
my $duplicates = $cutnpaste->duplicates;

foreach my $duplicate (@$duplicates) {
    my ( $left, $right ) = ( $duplicate->left, $duplicate->right );
    printf <<'END', $left->file, $left->line, $right->file, $right->line;

Possible duplicate code found
Left:  %s line %d
Right: %s line %d

END
    print $duplicate->report;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T18:42:35.350

除了其他人的答案，我想建议您阅读 Ovid 关于[如何在 Perl 中检测重复代码](http://blogs.perl.org/users/ovid/2012/12/finding-duplicate-code-in-perl.html)的文章？还有 [更多关于在 Perl 中查找重复代码的信息](http://blogs.perl.org/users/ovid/2012/12/more-on-finding-duplicate-code-in-perl.html)。

# c# - 基于自定义属性创建对象

> ID：14200286
> 
> 赞同：0
> 
> 时间：2013-01-07T16:47:03.053
> 
> 标签：c#, attributes, abstract-class

我有一个抽象类

```
public abstract class BaseClass
{
    public abstract void CreateGraph(){}
}

[CustomAttribute(Property1 = value , Property2 = value2)]
public class Graph1 : BaseClass
{
 public override void CreateGraph()
     {
       //implementation
     }
} 
```

如何创建`Graph1` 使用`CustomAttribute`属性值的对象。它是创建对象的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:58:09.253

如果你想要自定义属性，你应该定义一个继承自 System.Attribute 的类。实际上，如果您在 System.AttributeUsage 中将 AllowMultiple 参数设置为 true，您可以多次使用不同值的自定义属性。

你可以[在这里查看](http://msdn.microsoft.com/en-us/library/sw480ze8%28v=vs.80%29.aspx)。

但是，您不需要它来“创建对象”，我不确定您在这里所说的“好方法”是什么意思。正如 sten 提到的，您应该查看 GoF 设计模式以获得最佳实践，具体取决于您需要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:49:09.520

不，这不是一个好方法，因为在 .NET 中，属性值必须在编译时知道。例如`value`，`value2`在您的示例中只能是常量值，这非常限制了设置值的可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T16:49:49.307

无需为此使用属性，只需遵循常见的面向对象设计即可。查看[工厂设计模式](http://en.wikipedia.org/wiki/Factory_method_pattern)

# javascript - 从 jsonp 的 key/VALUE 中提取 HTML

> ID：14200290
> 
> 赞同：1
> 
> 时间：2013-01-07T16:47:07.013
> 
> 标签：javascript, jquery, ajax, jsonp

这是我正在尝试处理来自 jsonp.html 的数据的代码：`<a><img/><div></div></a>`并且我想获取该值并以 img 标记或标记为目标。

```
var URL = 'http://radleaf.com/w/1.0/arj?o=713142125&auid=258624&c.env=rvw';
$.ajax({
    url: URL,
    dataType: 'jsonp',
    crossDomain: true,
    success: function(data,status) {
        var ad = data['ads']['ad'][0];
        $.each(ad, function(key, val) {
            $('#rotator').append('<h2 id="' + key + '">'+key+':' + val + '</h2>');
            if(key=='html'){
                  //NEED HELP HERE VALUE HAS MULT TAG HOW DO I ACCESS THOSE TAGS?             
               }
        });
        console.log(data);
    },
    jsonpCallback: 'foobar'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:53:14.553

尝试这个：

```
if (key=='html') {
     var $html = $(val);
     var $img = $html.find('img'); // get the img tag

     alert($img.prop('src')); // just to test
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T23:17:15.237

您应该将 ID 添加到要从中获取值的标签中，并使用 Jquery 来`$("#idofthetag").html()`获取`$("idofthetag").val()`值

# highcharts - 使用 Highcharts 折线图汇总总计

> ID：14200292
> 
> 赞同：0
> 
> 时间：2013-01-07T16:47:09.047
> 
> 标签：highcharts

我正在制作一个带有数值的折线图，而客户想要一条显示总计的线。我尝试添加一个名为“Total”的数据系列，虽然它有效，但它会将“Total”与数据按字母顺序排列。我真的很想总和是否以某种方式与其他值区分开来，例如更粗的线。

HighCharts 中内置了这样的东西吗？如果没有，关于如何手动添加总数的更好建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:35:10.007

highcharts api 中的示例显示了如何实现这一点。

> [http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-linewidth-specific/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-linewidth-specific/)

例如，如果您有这样的系列，您可以通过这样做将线的宽度更改为 5px：

```
series: [{
         data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4] , 
         lineWidth: 5
        }] 
```

If you take a look at the following link you can learn what more you can do with each series object. You can easily change every attribute of series such as color, marker, linewitdth etc.. by manipulating the data object of the series or directly manipulating series object.

> [http://api.highcharts.com/highcharts#series.data](http://api.highcharts.com/highcharts#series.data)

# struts2 - 将 Struts2 OSGi 插件与 GlassFish 一起使用

> ID：14200300
> 
> 赞同：1
> 
> 时间：2013-01-07T16:47:33.070
> 
> 标签：struts2, glassfish, osgi

我正在尝试了解 Struts2 OSGi 插件是如何工作的，因此我首先尝试部署[此博客文章](http://classreloadingwebapp.blogspot.gr/2012/04/class-reloading-4-using-struts2-osgi.html)提供的测试应用程序。我已从 WEB-INF/classes/bundles/2 文件夹中删除所有捆绑包，并尝试一次添加一个，以便更好地解决我的问题。我面临的问题如下：

(1) 当我尝试包含 MyOsgi.jar 包（它是一个空包，只包含一个实现 BundleActivator 的类）时，我在应用程序部署期间收到以下错误：

> | 在 org.apache.felix.framework.Felix.createBundleActivator(Felix.java:3548)|#] [#|2013-01-07T18:32:14.513+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std .com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 org.apache.felix.framework.Felix._startBundle(Felix.java:1666)|#] [#|2013-01-07T18:32:14.513+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std .com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 org.apache.felix.framework.Felix.startBundle(Felix.java:1588)|#] [#|2013-01-07T18:32:14.513+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std .com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 org.apache.felix.framework.Felix.setFrameworkStartLevel(Felix.java:1180)|#] 3548)|#] [#|2013-01-07T18:32:14.513+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=线程 2;| 在 org.apache.felix.framework.Felix._startBundle(Felix.java:1666)|#] [#|2013-01-07T18:32:14.513+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std .com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 org.apache.felix.framework.Felix.startBundle(Felix.java:1588)|#] [#|2013-01-07T18:32:14.513+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std .com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 org.apache.felix.framework.Felix.setFrameworkStartLevel(Felix.java:1180)|#] 3548)|#] [#|2013-01-07T18:32:14.513+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=线程 2;| 在 org.apache.felix.framework.Felix._startBundle(Felix.java:1666)|#] [#|2013-01-07T18:32:14.513+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std .com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 org.apache.felix.framework.Felix.startBundle(Felix.java:1588)|#] [#|2013-01-07T18:32:14.513+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std .com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 org.apache.felix.framework.Felix.setFrameworkStartLevel(Felix.java:1180)|#] felix.framework.Felix._startBundle(Felix.java:1666)|#] [#|2013-01-07T18:32:14.513+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.企业.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 org.apache.felix.framework.Felix.startBundle(Felix.java:1588)|#] [#|2013-01-07T18:32:14.513+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std .com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 org.apache.felix.framework.Felix.setFrameworkStartLevel(Felix.java:1180)|#] felix.framework.Felix._startBundle(Felix.java:1666)|#] [#|2013-01-07T18:32:14.513+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.企业.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 org.apache.felix.framework.Felix.startBundle(Felix.java:1588)|#] [#|2013-01-07T18:32:14.513+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std .com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 org.apache.felix.framework.Felix.setFrameworkStartLevel(Felix.java:1180)|#] enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 org.apache.felix.framework.Felix.setFrameworkStartLevel(Felix.java:1180)|#] enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 org.apache.felix.framework.Felix.setFrameworkStartLevel(Felix.java:1180)|#]
> [#|2013-01-07T18:32:14.514+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 org.apache.felix.framework.StartLevelImpl.run(StartLevelImpl.java:265)|#]
> [#|2013-01-07T18:32:14.514+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.std .com.sun.enterprise.server.logging|_ThreadID=105;_ThreadName=Thread-2;| 在 java.lang.Thread.run(Thread.java:722)|#]

据此，[上述](http://mail-archives.apache.org/mod_mbox/felix-users/201001.mbox/%3C4B4E10C8.8060202@ungoverned.org%3E)错误是由于在 JVM 中加载了多个 BundleActivator 类，这是有道理的，因为包含它的 felix.jar 已经在 GlassFish 中可用，并且我的应用程序中包含了许多 felix jar作为 Struts2 OSGi 插件的依赖项。我尝试从插件中排除 felix 依赖项（我正在使用 Maven 构建应用程序），但这不起作用，因为作为依赖项包含的 felix jar 还包括 felix.jar 中不存在的其他类。

(2) 当我尝试包含 struts2-osgi-demo-bundle-2.3.1 包时，我得到一个完全不同的错误，我不知道可能是什么原因：

> [#|2013-01-07T18:30:02.897+0200|SEVERE|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=42;_ThreadName=Thread-2;| WebModule[/osgi]PWC1270：异常启动过滤器struts2 java.lang.LinkageError：加载程序约束违规：加载程序（org/apache/felix/framework/searchpolicy/ContentClassLoader 的实例）先前启动了名称为“org/osgi”的不同类型的加载/framework/BundleContext”在 java.lang.Class.privateGetDeclaredMethods(Class.java:2442) 在 java.lang.Class.privateGetPublicMethods(Class.java:2562) 在 java.lang.Class.getDeclaredMethods0(Native Method) 在 java。 org.apache.struts2.convention.PackageBasedActionConfigBuilder.getActionAnnotations(PackageBasedActionConfigBuilder.java:792) 中的 org.apache.struts2 中的 lang.Class.getMethods(Class.java:1427)。org.apache.struts2.convention.PackageBasedActionConfigBuilder.buildActionConfigs(PackageBasedActionConfigBuilder.java:335) org.apache.struts2.convention.ClasspathPackageProvider.loadPackages(ClasspathPackageProvider.java:53) 中的约定.PackageBasedActionConfigBuilder.buildConfiguration(PackageBasedActionConfigBuilder.java:605)在 org.apache.struts2.osgi.OsgiConfigurationProvider.loadConfigFromBundle(OsgiConfigurationProvider.java:146) 在 org.apache.struts2.osgi.OsgiConfigurationProvider.loadPackages(OsgiConfigurationProvider.java:96) 在 com.opensymphony.xwork2.config.impl.DefaultConfiguration .reloadContainer(DefaultConfiguration.java:215) 在 com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66) 在 org.apache.struts2.dispatcher.Dispatcher。init_PreloadConfiguration(Dispatcher.java:390) at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:436) at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69) at org .apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51) 在 org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:264) 在 org.apache.catalina.core.ApplicationFilterConfig .(ApplicationFilterConfig.java:120) 在 org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4685) 在 org.apache.catalina.core.StandardContext.start(StandardContext.java:5377) 在 com.sun .enterprise.web.WebModule.start(WebModule.java:498) 在 org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917) 在 org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901) 在 org.apache.catalina.core.StandardHost.addChild(StandardHost.java:733) 在 com.sun.enterprise.web.WebContainer .loadWebModule(WebContainer.java:2019) at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1669) at com.sun.enterprise.web.WebApplication.start(WebApplication.java:109) at org. glassfish.internal.data.EngineRef.start(EngineRef.java:130) at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269) at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo. java:301) 在 com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461) 在 com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240) 在 org.glassfish .deployment.admin.DeployCommand.execute(DeployCommand.java:389) 在 com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348) 在 com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand (CommandRunnerImpl.java:363) at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085) at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)在 com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291) 在 com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259) 在 com.sun .enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461) 在 com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212) 在 com.sun.grizzly.tcp.http11。GrizzlyAdapter.service(GrizzlyAdapter.java:179) at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117) at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call( ContainerMapper.java:354) 在 com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195) 在 com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860) 在 com .sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757) 在 com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056) 在 com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter .java:229) 在 com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104) 在 com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90) 在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) 在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask .java:54) 在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) 在 com.sun.grizzly.ContextTask.run(ContextTask.java:71) 在 com.sun.grizzly.util.AbstractThreadPool$ Worker.doWork(AbstractThreadPool.java:532) at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722) |#]doCall(ProtocolChainContextTask.java:54) at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) at com.sun.grizzly.ContextTask.run(ContextTask.java:71) at com.sun.grizzly.util .AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722) | #]doCall(ProtocolChainContextTask.java:54) at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) at com.sun.grizzly.ContextTask.run(ContextTask.java:71) at com.sun.grizzly.util .AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722) | #]

我注意到 struts2-osgi-demo-bundle-2.3.1 捆绑包没有 BundleActivator 类，我猜这是我没有收到上一个错误的原因，但这并不能帮助我找到解决方案.

最后，我可以在 Tomcat 中毫无问题地部署包含这两个包的应用程序，这使我得出结论，这两个问题都与 GlassFish 的 felix.jar 的存在有关。

有没有人在 GlassFish 中使用过 Struts2 OSGi 插件，或者您知道如何克服这些问题吗？

**更新：**上面的第二个错误是由于捆绑包中包含的 BundlesAction 类而发生的，该类实现了 BundleContextAware。根据插件的文档，插件定义了 OSGi 拦截器，它

> 将检查动作，如果它实现了 org.apache.struts2.osgi.interceptor.BundleContextAware，它将在动作上调用 setBundleContext(BundleContext bundleContext)，传递 OSGi 容器的 BundleContext。

我猜这是问题开始的地方。

**更新 2：**正如 Lukasz 和 Tang 所建议的，插件需要更新才能使用更新的 Felix 版本，并且（可能）使用 GlassFish 已经可用的 OSGi 运行时，而不是启动新的运行时。对此，我有以下问题：

1.  是否可以在同一个应用程序服务器中有两个 OSGi 运行时，即。插件可以忽略服务器的 OSGi 运行时并启动它自己的（当然假设它已更新为使用与 GlassFish 相同的 Felix 版本，以免类路径中有多个版本的 Felix 类）？
2.  为了使用 GlassFish 的 OSGi 运行时，插件需要获取对它的引用。这可以在未部署为 OSGi 包的 Web 应用程序中完成吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:07:02.787

我对struts不熟悉。根据我对 [1] 的了解，struts2-osgi 插件负责两件事：

1.  创建一个 OSGi 框架，
2.  为 OSGi 运行时提供 Web 管理界面。

这两个函数都已内置到使用 OSGi 构建的 GlassFish 中。因此，我认为在 GlassFish 中运行基于 osgi 的 struts2 包时不需要使用此插件。因此，请尝试执行以下操作：

1.  将 struts2 核心包部署到 glassfish
2.  将您的应用程序包部署到 glassfish。

对于这两个操作，您需要使用 GlassFish OSGi 管理界面。要了解有关它们的更多信息，请查看 [2]。最简单的选择是将捆绑包复制到 domain1/autodeploy/bundles/ 目录，然后更新文件以查看它们在 OSGi 运行时中的更新。

希望这会有所帮助，萨胡。

ps：请使用 glassfish 论坛讨论 glassfish 问题。

*   [1] [https://cwiki.apache.org/S2WIKI/struts-25-based-on-osgi.html](https://cwiki.apache.org/S2WIKI/struts-25-based-on-osgi.html)
*   [2] [http://glassfish.java.net/public/GF-OSGi-Features.pdf](http://glassfish.java.net/public/GF-OSGi-Features.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T14:21:45.263

在唐勇的帮助下，我能够升级 Struts2 OSGi 插件，现在您可以将它与 Glassfish 3 一起使用。它应该很快作为 Struts2 版本 2.3.15 的一部分发布。

[https://issues.apache.org/jira/browse/WW-3958](https://issues.apache.org/jira/browse/WW-3958)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:43:21.260

您始终可以排除 Felix 依赖项，如下所示：

```
<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-osgi-plugin</artifactId>
    <version>2.3.1</version>
    <exclusions>
        <exclusion>
            <groupId>org.apache.felix</groupId>
            <artifactId>org.apache.felix.main</artifactId>
         <exclusion>
    </exclusions>
</dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T14:32:46.157

我的初步调查如下：

1 struts2-osgi-plugin 使用一个StrutsOsgiListener 作为web context listener，在执行StrutsOsgiListener.contextInitialized 方法时，struts2-osgi-plugin 会启动一个嵌入的felix 运行时，该运行时通常在WEB-INF/lib 下。至于 Struts2OSGi，这个嵌入的 felix 运行时是 felix 1.4.1。

2 由于 glassfish v3/v4 的内核默认是基于 felix 的，并且在启动 glassfish 域后，在当前系统中，已经存在 glassfish 本身的 osgi 运行时。所以，将struts2-osgi-plugin相关的app部署到glassfish v3/v4时，会出现两个osgi运行时，这造成了与部署环境的一些冲突，并且在尝试强制转换bundleactivator时，会出现强制转换异常。

那么，如何让它们正常工作呢？

我的计划是扩展 struts2-osgi-plugin，1）创建一个 GlassfishOsgiHost 实现 OsgiHost 接口以满足 glassfish 部署场景。注意：glassfish 本身也可以看作是一个 osgi 容器。

2) 需要某种方式来配置 struts2-osgi-plugin 以告诉它当前部署的环境是否具有 osgi 运行时以便调用正确的 OsgiHost 实现

事情并不容易，我会努力的，同时，如果你对我的想法感兴趣，请告诉我，以便我们一起做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T01:30:43.267

我在github上创建了一个repo [1](https://github.com/tangyong/struts2-osgi-plugin-glassfish)，我会开始做这样的扩展，一旦完成了这样的扩展，我会回复你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T05:40:28.563

关于克里斯蒂娜曾经说过的“从 WEB-INF/classes/bundles/2 文件夹中删除所有捆绑包”，我需要说，一旦您部署了演示（包括 myosgi 捆绑包），而您从 WEB-INF 中删除了所有捆绑包/classes/bundles/2 文件夹下，又想再次部署demo，在server.log中依然可以找到myosgi等bundles相关的异常。

原因是你第一次部署 demo 后，struts2-osgi-plugin 将部署的 bundle 保存到 osgi 缓存中，例如。对于 Windows，此缓存为“C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp.felix-cache”，因此，在部署演示之前（从 WEB-INF/classes/bundles/2 中删除所有包文件夹）第二次，请删除缓存。

事实上，我已经确认，在删除缓存并再次部署不包含 bundles/2 中的任何包的演示后，在 server.log 中，不会发生任何异常。而且，我还确认在“C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp.felix-cache”中，安装了三个包，如下所示：

1)org.apache.felix.main 4.0.2

bundle.location：文件：/D：/1214/glassfish2/glassfish3/glassfish/osgi/felix/bin/felix.jar

2)org.apache.felix.shell 1.0.2

bundle.location：文件：/D:/1214/glassfish2/glassfish3/glassfish/domains/domain1/applications/osgi-2.3.1/WEB-INF/lib/org.apache.felix.shell-1.0.2.jar

3）只有一个 bundle.id 文件，我猜它应该是系统包。

不过以上三个bundle还有一些问题需要调查，

1）在demo的WEB-INF/lib中，org.apache.felix.main的版本是1.4.1而不是4.0.2，4.0.2应该是glassfish的felix版本（这点可以通过bundle的位置来确认）

2）为什么第三个包只有 bundle.id 文件而没有其他安装信息。

不管这些问题如何，在同一个应用程序服务器中拥有两个 OSGi 运行时似乎是可能的。

但是，我会看看在添加 struts2-osgi-admin-bundle-2.3.1.jar 时会发生什么，会发生什么。

所以，也许有两个调查方向：

1) 在 glassfish 中有两个 OSGi 运行时 2) 在 oder 中扩展 struts2-osgi-plugin 以让包仅由 glassfish osgi 运行时管理

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-11T06:36:52.800

深深地，在 server.log 中添加 struts2-osgi-admin-bundle-2.3.1.jar 时，发生以下两个主要异常，

1) 无法解析 package=javax.servlet

[#|2013-01-11T15:22:58.296+0900|SEVERE|glassfish 4.0|javax.enterprise.logging.stderr|_ThreadID=85;_ThreadName=FelixStartLevel;_TimeMillis=1357885378296;_LevelValue=1000;|org.osgi.framework .BundleException：捆绑包1中未解决的约束：包；(package=javax.servlet) 在 org.apache.felix.framework.Felix._resolveBundle(Felix.java:1792) 在 org.apache.felix.framework.Felix._startBundle(Felix.java:1652) 在 org.apache。 felix.framework.Felix.startBundle(Felix.java:1588) 在 org.apache.felix.framework.Felix.setFrameworkStartLevel(Felix.java:1180) 在 org.apache.felix.framework.StartLevelImpl.run(StartLevelImpl.java: 265) 在 java.lang.Thread.run(Thread.java:722) |#]

该包由 struts2-osgi-admin-bundle-2.3.1.jar 导入。

2) 找不到类 org.apache.struts2.osgi.admin.actions.BundlesAction

[#|2013-01-11T15:23:00.578+0900|INFO|glassfish 4.0|javax.enterprise.logging.stdout|_ThreadID=79;_ThreadName=admin-listener(1);_TimeMillis=1357885380578;_LevelValue=800;| 15:23:00:578 调试（com.opensymphony.xwork2.config.providers.XmlConfigurationProvider:72）-找不到动作类 [org.apache.struts2.osgi.admin.actions.BundlesAction] java.lang.ClassNotFoundException：无法在 org.apache.struts2.osgi.DelegatingObjectFactory.getClassInstance(DelegatingObjectFactory .java:77) 在 com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyAction(XmlConfigurationProvider.java:416) 在 com.opensymphony.xwork2.config.providers.XmlConfigurationProvider。addAction(XmlConfigurationProvider.java:370) ...

因此，首先，我们必须调查“C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp.felix-cache”中的包的安装逻辑。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-11T08:48:20.010

我想我已经知道将 org.apache.felix.main 4.0.2 安装到 felix 缓存而不是 WEB-INF/lib/org.apache.felix.framework-1.4.1.jar 的一些原因。正常情况下应该安装org.apache.felix.framework-1.4.1.jar，可以通过tomcat确认一下。

好的，我开始说流动的原因：

问题发生在 FelixOsgiHost.startFelix() 151 行，

bundleJarsLevel1.add(getJarUrl(ServiceTracker.class));

在 glassfish 场景中，getJarUrl(ServiceTracker.class) 返回 .../glassfish3/glassfish/osgi/felix/bin/felix.jar 而不是 glassfish3/glassfish/domains/domain1/applications/osgi-2.3.1/WEB-INF/ lib/org.apache.felix.framework-1.4.1.jar 因为 glassfish osgi 运行时，这将导致捆绑部署的许多冲突。

如果我们更新插件的 felix 版本，也许问题会消失，但是，用于插件的 osgi 嵌入模式应该是好的，并且不受 glassfish osgi 运行时的影响。我们可以想象，如果嵌入的 osgi 运行时来自 equinox，同样的问题仍然会发生。

我将通过硬编码 getJarUrl(ServiceTracker.class) 进行快速测试，以查看问题是否真的由它引起。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-14T09:45:57.503

现在，关于将 felix 1.4.1 更新到 4.0.2，我已经完成了增强，[请在此处查看我的修复](https://github.com/tangyong/struts2-osgi-plugin-glassfish)

基本上，felix 1.x 和 4.x 的实现差异是非常大的，所以我们需要更新插件的 pom 和一些地方的 felix 嵌入式启动方式。

我在tomcat 7下测试OK。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-16T09:03:30.070

事实证明，根据[这篇文章](http://weblogs.java.net/blog/ss141213/archive/2009/05/running_glassfi_1.html)，您可以使用 GlasssFish_Platform=Static 在没有 OSGi 的情况下启动 GlassFish，在这种情况下，插件将工作，因为在插件启动时没有现有的 OSGi 运行时。但是我并不认为这是一个解决方案，更多的是一种解决方法，因为它会导致其他问题（例如 GlassFish 管理控制台，它是一个 OSGi 捆绑包，不可用）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-17T03:04:15.327

实际上，我昨天已经对这个问题进行了很多调查，我们必须解决一个关键问题：

在从 war 中嵌入 osgi 运行时并在现有的 osgi 运行时下启动 war 时，我们必须小心处理一些系统包的导出。

以下是sahoo之前回复的有价值的帖子。

我将根据该帖子进行新的实现，因为现在我遇到了问题。

[提琴手](http://www.java.net/node/704515)

# php - 为开发人员配置“开发”环境

> ID：14200303
> 
> 赞同：0
> 
> 时间：2013-01-07T16:47:38.687
> 
> 标签：php, symfony1, symfony-1.4, symfony-forms

我正在使用 Symfony 框架开发一个开源应用程序（OrangeHRM）。如何将项目的环境从生产环境更改为开发环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:56:33.117

只需使用 frontend_dev.php 名​​称复制 index.php 并更改配置行，如下所示：

```
$configuration = ProjectConfiguration::getApplicationConfiguration('frontend', 'dev', true); 
```

之后只需访问您的项目`http://domain.com/frontend_dev.php`

# c++ - boost::unique_lock::timed_lock 的使用

> ID：14200305
> 
> 赞同：2
> 
> 时间：2013-01-07T16:47:47.230
> 
> 标签：c++, boost

[boost::timed_lock](http://en.highscore.de/cpp/boost/multithreading.html#multithreading_synchronization)

```
void wait(int seconds) 
{ 
  boost::this_thread::sleep(boost::posix_time::seconds(seconds)); 
} 

boost::timed_mutex mutex; 

void thread() 
{ 
  for (int i = 0; i < 5; ++i) 
  { 
    wait(1); 
    boost::unique_lock<boost::timed_mutex> lock(mutex, boost::try_to_lock); 
    if (!lock.owns_lock()) 
      lock.timed_lock(boost::get_system_time() + boost::posix_time::seconds(1));//<<<<
    std::cout << "Thread " << boost::this_thread::get_id() << ": " << i << std::endl; 
    boost::timed_mutex *m = lock.release(); 
    m->unlock(); 
  } 
} 
```

[定时锁定](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/synchronization.html#thread.synchronization.mutex_concepts.lockable.try_lock)

问题> 我在理解以下几行时遇到问题：

```
 if (!lock.owns_lock()) 
     lock.timed_lock(boost::get_system_time() + 
                     boost::posix_time::seconds(1));//<<<< 
```

这是我的理解。假设`lock.owns_lock()`返回 false，这意味着当前对象不拥有可锁定对象上的锁。所以下一行将被执行。如果在指定的时间过去之后，对象仍然无法获得锁，那么`boost::timed_lock`将返回 false。所以下面一行会被执行？？？

```
std::cout << "Thread " << boost::this_thread::get_id() << ": " << i << std::endl; 
```

这个想法正确吗？我认为代码的目的是确保在对象有锁的情况下执行上述行。但根据我的理解（我猜是不正确的），上面的行总是会运行！

问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:19:38.380

您是对的，该示例不能保证在执行受保护的代码之前始终正确获取锁。

给出示例下面的解释：

> 上述程序将 boost::try_to_lock 作为第二个参数传递给 boost::unique_lock 的构造函数。之后可以通过 owns_lock() 方法检查是否已获取互斥锁。如果它没有 - owns_lock() 返回 false - 使用 boost::unique_lock 提供的另一个函数：timed_lock() 等待一定时间来获取互斥锁。给定的程序最多等待一秒钟，这应该足以获取互斥锁。
> 
> 该示例实际上显示了获取互斥锁的三种基本方式：lock() 等待，直到已获取互斥锁。try_lock() 不等待，但如果互斥锁在调用时可用，则获取互斥锁，否则返回 false。最后，timed_lock() 尝试在给定的时间段内获取互斥锁。与 try_lock() 一样，成功或失败由 bool 类型的返回值指示。

作者似乎意识到了这个问题（考虑到文档的返回值`timed_lock`），但认为是否需要重新测试是否已获得锁（正如他们所说的“等待长达一秒钟，这应该更多足够的时间来获取互斥体”）。

* * *

您的理解中的一个错误：

> 如果在指定的时间过去后对象仍然无法获得锁，则 boost::timed_lock 将返回 false。

这不是真的。`timed_lock`将“持续”尝试获取锁，但如果指定时间已过则放弃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:08:22.153

You are right. The example doesn't properly handle the state of when the mutex fails to lock. If you read closely just below that example you'll see this quoted there:

> The above example uses various methods to illustrate some of the features provided by boost::unique_lock. Certainly, the usage of these features does not necessarily make sense for the given scenario; the usage of boost::lock_guard in the previous example was already adequate. This example is rather meant to demonstrate the possibilities offered by boost::unique_lock.

# c# - LINQ GroupBy 和 Select 在不同的属性上

> ID：14200307
> 
> 赞同：2
> 
> 时间：2013-01-07T16:47:58.107
> 
> 标签：c#, .net, linq, group-by, linq-to-objects

如果我有以下收藏：

```
var foos = new List<Foo>
{
    new Foo{ Name = "A", Value = 1 },
    new Foo{ Name = "B", Value = 1 },
    new Foo{ Name = "B", Value = 2 },
    new Foo{ Name = "C", Value = 1 },
}; 
```

我想结束：

```
A-1
B-2
C-1 
```

在重复“B”的情况下，我想在哪里选择具有最高值的“B”？

就像是：

```
var filteredFoos = foos.GroupBy(x => x.Name).Select_Duplicate_With_Highest_Value 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T16:51:01.063

```
var filteredFoos = 
    foos.GroupBy(x => x.Name)
        .Select(x => new { Name = x.Key, Value = x.Max(f => f.Value) }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T16:51:19.860

```
var query = from p in foos
            group p by p.Name into g
            select new
            {
                Name = g.Key,
                Value = g.Max(a => a.Value)
            }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T16:50:12.713

试试这个查询：

```
var filteredFoos = foos.GroupBy(x => x.Name)
                       .Select(p => new { p.Key, p.Max(x => x.Value) }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T19:18:51.537

对于超过 2 列的任何人：

```
var subquery = from p in foos
            group p by p.Name into g
            select new
            {
                Name = g.Key,
                Value = g.Max(a => a.Value)
            };
var query = from f in foos
            join s in subquery 
              on f.Name equals s.Name
            where f.Value == s.Value
            select f; 
```

如果这违反 SQL，请确保 Name 是一个原语。

# javascript - console.log 和 console.dir 有什么区别？

> ID：14200308
> 
> 赞同：9
> 
> 时间：2013-01-07T16:47:58.890
> 
> 标签：javascript, html, debugging, coding-style

> **可能重复：**
> [console.dir 和 console.log 有什么区别？](https://stackoverflow.com/questions/11954152/whats-the-difference-between-console-dir-and-console-log)

我最近了解到`console.dir()`.

翻阅[MDN](https://developer.mozilla.org/en-US/docs/DOM/console.dir)后，我并没有清楚地理解 this 和`console.log`. 它们都显示相同的输出（但`.dir`显示一些属性），是这样吗？

调试/开发时应该使用哪个功能？

**编辑：**我刚刚发现了一个回答我想法的现有问题：[console.dir 和 console.log 有什么区别？](https://stackoverflow.com/questions/11954152/whats-the-difference-between-console-dir-and-console-log)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T19:51:11.260

信息的呈现方式不同。例如，在 Firebug 中，如果我这样做：

```
a = { foo: "foo", bar: "bar" }; 
```

然后我做：

```
console.log(a) 
```

我得到：

```
Object { foo="foo", bar="bar"} 
```

如果我这样做：

```
console.dir(a) 
```

我得到：

```
bar    "bar"
foo    "foo" 
```

如果我有嵌套的对象，我会有一些扭曲的控件（MDN 称它们为“披露三角形”），这样我就可以轻松地深入挖掘对象属性。

根据您使用的工具，YMMV。

# android - Android 在图库视图中显示特定文件夹中的图像

> ID：14200309
> 
> 赞同：6
> 
> 时间：2013-01-07T16:47:58.730
> 
> 标签：android, gallery, directory

我正在尝试制作一个仅在图库视图中显示特定文件夹中的图像的小应用程序。我找到了一些例子，但每一个最终只显示一张图像。我将在下面发布的这个例子是一个很好的帮助，它几乎完全符合我的要求，我只需要更改它以显示来自特定文件夹的图像，而不是所有文件夹。我已经为此尝试了几天，但我似乎没有添加正确的代码。我觉得这是一件我也想念的非常简单的事情。任何帮助将不胜感激！

```
public class AndroidCustomGallery extends Activity {

    private int count;
    private Bitmap[] thumbnails;
    private boolean[] thumbnailsselection;
    private String[] arrPath;
    private ImageAdapter imageAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final String[] columns = { MediaStore.Images.Media.DATA, MediaStore.Images.Media._ID };

                final String orderBy = MediaStore.Images.Media._ID;

                Cursor  imagecursor = getContentResolver().query(
                        MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns, null,        
                        null, orderBy);

                int image_column_index = imagecursor.getColumnIndex(MediaStore.Images.Media._ID);          
                this.count = imagecursor.getCount();        
                this.thumbnails = new Bitmap[this.count];       
                this.arrPath = new String[this.count];  
                this.thumbnailsselection = new boolean[this.count];

                for (int i = 0; i < this.count; i++) {

                    imagecursor.moveToPosition(i);

                    int id = imagecursor.getInt(image_column_index);        
                    int dataColumnIndex = imagecursor.getColumnIndex(MediaStore.Images.Media.DATA); 

                  thumbnails[i] = MediaStore.Images.Thumbnails.getThumbnail(        
                            getApplicationContext().getContentResolver(), id,       
                            MediaStore.Images.Thumbnails.MICRO_KIND, null);     

                    arrPath[i]= imagecursor.getString(dataColumnIndex);

                }

                GridView imagegrid = (GridView) findViewById(R.id.PhoneImageGrid);      
                imageAdapter = new ImageAdapter();      
                imagegrid.setAdapter(imageAdapter);     
                imagecursor.close(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T22:29:38.110

弄清楚了！以下是任何想要做类似事情的人的粘贴代码。

```
Cursor imagecursor = getContentResolver().query( MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                        columns, 
                        MediaStore.Images.Media.DATA + " like ? ",
                        new String[] {"%/yourfoldername/%"},  
                        null); 
```

# ruby-on-rails - 关联、连接和范围

> ID：14200312
> 
> 赞同：0
> 
> 时间：2013-01-07T16:48:13.973
> 
> 标签：ruby-on-rails, join, associations

我有以下设置：

```
class Program
   has_many :participants
end

class Participant
   belongs_to :user
end

class User
   has_many :participants
end 
```

我希望类方法或范围返回某个用户参与的所有程序。这是我到目前为止所拥有的：

```
def self.where_user_participates(user)
   Program.joins(:participants).where('participants.user_id' => user.id)
end 
```

我相信这行得通，但我不喜欢它。我不想谈论'id'，而是使用关联，但我无法让它发挥作用，例如：

```
def self.where_user_participates(user)
  Program.joins(:participants).where('participants.user' => user)
end 
```

我该如何改进呢？在 Rails 3 中，不需要官方的“范围”并且类方法是“最佳实践”，这是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:05:51.337

```
class Program
  has_many :participants
end

class Participant
  belongs_to :user
  belongs_to :program
end

class User
  has_many :participants
  has_many :programs, :through => :participants
end 
```

然后获取程序调用：

```
user.programs 
```

# audio - XNA SoundEffects 无法播放

> ID：14200315
> 
> 赞同：2
> 
> 时间：2013-01-07T16:48:22.463
> 
> 标签：audio, xna-4.0, soundeffect

遵循了一些教程，但我没有运气，我正在尝试使用免费样本将简单的 .WAV 音效添加到 XNA 中，我将声音命名为：

```
SoundEffect hit1;
SoundEffect hit2; 
```

然后加载内容：

```
hit1= content.load<SoundEffect>("hit1") 
```

但是当谈到将播放添加到按钮按下时，我去测试它根本没有声音，甚至没有错误或没有游戏加载并且可以播放，但任何声音效果都不起作用。

```
** // Sounds

        SoundEffect hit1;
        SoundEffect hit2; 
```

这是我的变量名：

```
// Sounds

            hit1 = Content.Load<SoundEffect>("hit1");
            hit2 = Content.Load<SoundEffect>("hit2"); 
```

这就是我在 loadcontent 方法中加载它们的方式：

```
//If Keyboard Key W is Pressed or Buttong Y
                if (keys1.IsKeyDown(Keys.W) && oldKeys1.IsKeyUp(Keys.W)
                    || (oldpad1.Buttons.Y == ButtonState.Released) && (pad1.Buttons.Y == ButtonState.Pressed))
                {
                    secondsPassed = 0;
                    // IF The Target Image is a Gnome 
                    if (targets[0] == sprites[0])
                    {
                        //They whacked a gnome
                        GnomeHits = GnomeHits + 1;
                        runNum = 0;
                        secondsPassed = 0;
                        hit1.Play();

                    }
                    else
                    {
                        //They whacked a troll
                        scoreNum = scoreNum + 1;
                        runNum = runNum + 1;
                        GnomeHits = 0;
                        secondsPassed = 0;
                        hit2.Play();
                    }
                    SetUpSpriteLoop(); 
```

当我按下 F5 并在我按下键或按钮时运行游戏时，这也是我试图分配声音的控制按钮之一，根本没有声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-01T10:52:46.373

我在 Windows 10 机器上遇到了与 Monogame（由 XNA 的灰烬构建）类似的问题。我通过重新安装 DirectX 来修复它，一切正常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T01:32:49.800

我的第一个建议是确保您正在更新键盘按键。我只是这么说，因为我看不到您在代码中这样做。如果您不这样做，那么键状态将不会更新，因此您将永远不会输入 if 语句。

一旦你确定你正在输入 if 语句，我会调整音效的音量以确保它实际上是可听见的。我可能有点偏离基础，但是如果我建议遵循[本教程](http://rbwhitaker.wikidot.com/playing-sound-effects)，rbwhitaker 是 XNA 的一个很好的资源。

# jquery - StackOverflow 为 Tag Popup 使用什么类型的动画？

> ID：14200320
> 
> 赞同：2
> 
> 时间：2013-01-07T16:48:39.530
> 
> 标签：jquery, animation, tags, stack-overflow

有谁知道 Stackoverflow 的标签弹出窗口使用什么类型的（jQuery？）动画？通过标签弹出窗口，我的意思是当您将鼠标悬停在 Stackoveflow 中的标签上时，会出现一个弹出窗口，动画从左上角到右下角开始，有人知道它使用哪种类型的动画吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:20:53.653

[`.show( time )`方法](http://api.jquery.com/show/)

## [jsBin 演示](http://jsbin.com/ihuhip/1/edit)

```
$('a.post-tag').hover(function(){

  var $this = $(this);
  var offset = $this.offset(); 
  var myPos = {X: offset.left, Y:offset.top+26}; 
  $('#tag-menu').css({left:myPos.X, top:myPos.Y, width:300, height:200}).show(400);
                                                                       // ^^^TADA !!

}, function(){

  $('#tag-menu').stop(1,1).hide();

}); 
```

# java - 使用 Java 反射设置 Applet 参数

> ID：14200323
> 
> 赞同：0
> 
> 时间：2013-01-07T16:48:49.367
> 
> 标签：java, reflection, parameters, applet

所以我在玩 Java 的反射 API。我想尝试加载我在互联网上找到的一个简单的 Java 小程序。现在我偶然发现的是小程序参数：

```
<param name="aparam" value="12345"> 
```

有没有办法通过 Java 反射做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:59:37.567

> 有没有办法通过 Java 反射做同样的事情？

不。或者更确切地说，如果您设计一个[小程序存根](http://docs.oracle.com/javase/7/docs/api/java/applet/AppletStub.html)并将其附加到小程序，它可以提供您想要的任何参数，而无需使用任何反射。

这是我之前做[的一个例子。](https://stackoverflow.com/a/6131260/418556)

# php - Wordpress 使用 index.php 而不是 single.php 来显示帖子

> ID：14200324
> 
> 赞同：1
> 
> 时间：2013-01-07T16:48:56.223
> 
> 标签：php, wordpress, wordpress-theming

我的 Wordpress 网站没有使用 single.php 在网站上显示帖子。每次我打开一个帖子时，它都会在 index.php 中打开它。

我的 single.php 看起来像这样

```
<?php get_header(); ?>
  <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
    <? echo the_content(); ?>
  <? endwhile; 
  endif; ?>
<? get_footer();
?> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-26T23:01:22.270

在单击 single-post-link 后，single-CUSTOM-TYPE.php 和 single.php 都没有呈现同样的问题......只有 index.php 而不是正确的文件......

对我有帮助的是在“设置”->“永久链接”中简单更改回标准永久链接并恢复为“帖子名称”（Beitragsname）......

...也许这可能对其他人也有帮助... greetz

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:09:28.950

如果 LOOP 设置不正确，会发生这种情况，请确保 index.php 和 single.php 包含 LOOP。

循环通常看起来像这样，但会更改为设置要求。

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?> 
```

Wordpress Codex 网站非常棒，可以回答大多数问题，请查看[http://codex.wordpress.org/The_Loop](http://codex.wordpress.org/The_Loop)

如果您在 stacks 姊妹网站 Wordpress Stackexchange 上发帖，诸如此类的问题和讨论会更理想。我希望这个问题将被删除或移至[https://wordpress.stackexchange.com/](https://wordpress.stackexchange.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T12:26:31.273

您应该检查您的 loop.php 或 loop-single.php 天气它是否从这些文件路由，或者这不是它将从数据库中获取数据的页面

# fadein - 延迟加载效果淡入淡出不适用于超链接

> ID：14200326
> 
> 赞同：3
> 
> 时间：2013-01-07T16:48:57.293
> 
> 标签：fadein, lazy-loading

使用 jquery 1.8.3，与[http://www.appelsiini.net/2012/lazyload-180](http://www.appelsiini.net/2012/lazyload-180)

效果：'fadeIn' 不再适用于超链接的图像？

如果图像只是独立的，则淡入可以正常工作，但如果包裹在锚标记中，则图像只会出现而没有任何效果。

有谁知道解决方案？

# php - 如何随时随地控制 youtube 视频的比特率

> ID：14200328
> 
> 赞同：-1
> 
> 时间：2013-01-07T16:48:59.437
> 
> 标签：php, youtube, bitrate

我使用 PHP 作为服务器端脚本。我想知道，如何使用 php 控制视频的质量。这是我想做的。

我将使用任何设备捕获视频并上传到服务器，在检索视频时，我想**为要显示的视频质量提供一些选项**。类似于 youtube 如何提供一些设置 240p、260p、480p 等

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T05:08:28.477

您可以使用 wowza 等软件进行即时转换 (http://www.wowza.com/)

或者，您可以将您上传的视频（上传后直接）转换为 ffmpeg。

```
exec("ffmpeg -i $input -b 128k $output", $output); 
```

然后根据所选比特率链接到不同的视频文件。

# sql - 库存管理表结构

> ID：14200330
> 
> 赞同：1
> 
> 时间：2013-01-07T16:49:03.313
> 
> 标签：sql, transactional, erp, inventory-management

我们的团队需要跟踪内部创建的 ERP 系统的库存。我们将需要经常访问给定仓库中给定项目的系统中的库存量，并能够跟踪库存的变化和时间。

最初的想法是只拥有调整表并在每次查看时计算当前库存。通过我们的测试，很明显，考虑到我们每天要进行多少次计算，这种计算的成本太高了。

我们的新想法是创建一个包含历史记录的调整表，同时保留一个包含当前库存的表。当进行调整时，我们的程序将同时更新调整表和当前库存表。我不太喜欢这个解决方案，因为它需要 2 次更新才能进行一次更改。万一失败了怎么办？当调整不反映库存表中的内容时，您如何协调？

有没有人有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:05:54.767

如果您不能在单个事务中完成所有必要的更新，您将需要一个管理程序（而不是声明性约束）来确保数据是正确的。例如，您可以运行一个 cron 作业，根据详细信息测试总计。您执行此操作的频率取决于 cron 作业需要运行多长时间，以及您的应用程序可以容忍 cron 作业多长时间。

我更喜欢详细信息表上的触发器*以及*定期 cron 作业。让触发器调整每笔交易的总数。cron 作业确保没有错过任何更新。（大多数 dbms 允许您禁用触发器以进行维护；当您不可避免地忘记再次启用它们时，cron 作业会提醒您。）

# python - 在 Python 类定义中调用静态方法

> ID：14200332
> 
> 赞同：1
> 
> 时间：2013-01-07T16:49:06.583
> 
> 标签：python

我有一个定义静态方法的类定义。我有一个我想用静态方法初始化的字段。我的默认想法导致我这样做：

```
class SomeConcreteClass(object):
    some_data = SomeConcreteClass.create_default_data()
    @staticmethod
    def create_default_data():
        return 'Foo' 
```

问题是当我运行它时，我得到一个`NameError: name 'SomeConcreteClass' is not defined`. 这是有道理的，因为 SomeConcreteClass 刚刚被构建。这是否意味着我不能使用静态初始化函数？有没有推荐的替代方法来处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:23:58.573

适当的地方`create_default_data`将完全在课堂之外。然后你的问题就消失了：

```
def create_default_data():
    return 'Foo'

class SomeConcreteClass(object):
    some_data = create_default_data() 
```

如果您确实希望它作为类中的静态方法也可以：

```
def _create_default_data():
    return 'Foo'

class SomeConcreteClass(object):
    some_data = _create_default_data()
    create_default_data = staticmethod(_create_default_data) 
```

但是静态方法在 Python 中并不经常使用，因为不需要将函数放在类中，除非它以某种方式对类进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T16:58:35.103

我不认为你想这样做。不要忘记 Python 不是 Java™……在类级别定义的属性是类属性，而不是实例属性。您几乎肯定希望数据是特定于实例的，因此您应该在`__init__`方法中执行此操作。如果您愿意，您当然可以从该方法中调用类方法，或者（更好）只需将代码放入`__init__`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T16:59:54.463

如果`some_data`恰好是`create_default_data`（并假设后者在您的调用上下文中是确定性的）的输出，那么为什么不只做`some_data`一个`@property`？

```
class SomeConcreteClass(object):
    @property
    def some_data():
        return 'Foo' 
```

或者，但不是等效的，您可以`some_data`为`__init__`.

# php - PHP将数组提取到变量中

> ID：14200335
> 
> 赞同：0
> 
> 时间：2013-01-07T16:49:13.750
> 
> 标签：php, arrays

我有以下输出我试图将单个值放入单独的变量中

输出：

```
Array ( [0] => Array ( [0] => 8711 [1] => 200 [2] => 755 [3] => 1800 [4] => 01 [5] => 675 [6] => 8910 ) ) 
```

我尝试了以下代码，但没有成功。

```
echo extract($matches[0]); 
```

请在这方面帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:52:09.217

它的多维数组：试试：

```
 echo $matches[0][0];
 echo $matches[0][1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:57:03.057

有时以更易读的格式查看数组会有所帮助。

尝试

```
echo '<pre>' . print_r($matches) . '</pre>'; 
```

您还可以指定：

```
echo '<pre>' . print_r($matches[0]) . '</pre>'; 
```

限制该子数组的数据。

如果您只需要访问您的元素之一，其他人已经展示了如何。

前任。

> $arr = array('a'=>'alphabet', 'b'=>'better', 'c'=>array(1=>'cat', 2=>'click', 'z'=>'干净的'））;

要将“干净”放入您将使用的变量中：

> $clean = $arr['c']['z'];

要将“更好”放入您将使用的变量中：

```
$better = $arr['b']; 
```

# iphone - 自定义 NSSortDescriptors

> ID：14200336
> 
> 赞同：2
> 
> 时间：2013-01-07T16:49:15.480
> 
> 标签：iphone, ios, nssortdescriptor

我有一个`NSFetchedResultsController`用来获取我的核心数据并填充表格的工具。

要对当前的数据进行排序，我使用以下代码：

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"month" ascending:YES];
NSArray *sortDescriptors = @[sortDescriptor];

[fetchRequest setSortDescriptors:sortDescriptors]; 
```

月份是`NSString`一年中的一个月，因此目前按字母顺序对一年中的月份进行排序。

但我想要发生的是按最接近今天日期的顺序显示月份。

例如，如果今天的月份是四月，则四月将显示在顶部，然后是五月、六月、七月等。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:51:55.493

自定义描述符并不难，但我认为自定义 SortDescriptor 不适用于您的情况（核心数据排序描述符无法运行自定义代码 AFAIK）

* * *

无论如何：

实现描述符，传递给它一个自定义比较器块，返回 obj1 和 obj2 如何相互关联

示例代码：

```
id desc = [[NSSortDescriptor alloc] initWithKey:@"month" ascending:YES comparator:^NSComparisonResult(id obj1, id obj2) {
    ...
}]; 
```

回复：

```
typedef NS_ENUM(NSInteger, NSComparisonResult) {NSOrderedAscending = -1L, NSOrderedSame, NSOrderedDescending}; 
```

# jquery - 自动完成不适用于动态添加的内容

> ID：14200339
> 
> 赞同：1
> 
> 时间：2013-01-07T16:49:25.347
> 
> 标签：jquery

我正在使用 jQuery 动态添加 html，并对此内容使用自动完成功能。但是，自动完成功能不适用于动态添加的内容。我见过许多与我类似的问题，但他们的解决方案似乎对我不起作用。我拥有的 jQuery 代码是：

```
$(document).ready(function() {
    if ( $("#add-sister-centers").length > 0 ){

        $(".autocomp_centers").autocomplete({ 
            serviceUrl:'/suggest_centers',
                maxHeight:400,
                width:252,
                minChars:2,
                onSelect: function(value, data){ $("input[name='center_ids[]']").val(data); }
        });

        $("#add-another-button").click( function(){
            var sister_center_input = "<div class=\"field\" style=\"margin-top:10px;\"><span class=\"purple-text\" style=\"font-weight:bold; margin-right:20px;\">Center name*</span><input type=\"text\" name=\"center_names[]\" class=\"autocomp_centers\"/></div>"
            sister_center_input.autocomplete();
            $("#additional-sister-centers").append(sister_center_input);
        });
    }
}); 
```

我究竟做错了什么？我应该使用 bind、live 还是 on？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:57:31.530

首先，您只能将自动完成插件应用于文本框。其次，在您尝试对其应用自动完成之前，尚未呈现您新创建的文本框。另外，sister_center_input 只是一个不包含任何 DOM 的字符串变量，因此它不能对字符串应用自动完成功能。尝试下面提到的代码

```
var sister_center_input = $("<div class=\"field\" style=\"margin-top:10px;\"><span class=\"purple-text\" style=\"font-weight:bold; margin-right:20px;\">Center name*</span><input type=\"text\" name=\"center_names[]\" class=\"autocomp_centers\"/></div>");
$("#additional-sister-centers").append(sister_center_input);
$("#additional-sister-centers").find(".autocomp_centers").autocomplete(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T16:58:10.757

问题是您的变量：`sister_center_input`只是一个字符串变量，但您正试图从中使用 jQuery`autocomplete`方法。那永远行不通。

您还必须为上述定义中定义的自动完成功能传递相同的属性。

将代码的第二部分更改为如下所示并尝试：

```
 $("#add-another-button").click( function(){
        var sister_center_input = "<div class=\"field\" style=\"margin-top:10px;\"><span class=\"purple-text\" style=\"font-weight:bold; margin-right:20px;\">Center name*</span><input type=\"text\" name=\"center_names[]\" class=\"autocomp_centers\"/></div>"
        $("#additional-sister-centers").append(sister_center_input);
        $('.autocomp_centers').autocomplete({ 
            serviceUrl:'/suggest_centers',
            maxHeight:400,
            width:252,
            minChars:2,
            onSelect: function(value, data){ $("input[name='center_ids[]']").val(data);}
        });
    }); 
```

# css - 获得桌子下方的空间

> ID：14200341
> 
> 赞同：7
> 
> 时间：2013-01-07T16:49:29.487
> 
> 标签：css, html-table

我想在桌子下面留一点空间。

```
<table border="0" class="medtable">
    <tr> 
        <th>User</th>
        <th>From</th>
        <th>To</th>
    </tr>
    <tr>
        ...
    </tr>
</table> 
```

这个 CSS

```
table
{
border:1px solid black;padding-bottom:15px
} 
```

但是底部边框和表格中最后一点文本之间的空间。所以这不是我想要的。有小费吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T17:09:55.813

你想要`margin-bottom`而不是`padding-bottom`. 从外到内：边距、边框、内边距、内容。

# wpf - WPF 条件数据绑定

> ID：14200342
> 
> 赞同：0
> 
> 时间：2013-01-07T16:49:29.467
> 
> 标签：wpf, datagrid

我有一个绑定到以下类的 WPF 网格：

```
public class Output{
    public string TaskName { get; private set; }
    public string Log { get; set; }
} 
```

网格：

```
<DataGrid AutoGenerateColumns="False">
    <DataGrid.Resources>
        <sys:String x:Key="viewdetails">view...</sys:String>
    </DataGrid.Resources>
    <DataGrid.Columns>
        <DataGridTextColumn Header="Task" Binding="{Binding TaskName}" />
        <DataGridHyperlinkColumn Header="Log" 
    ContentBinding="{Binding Source={StaticResource viewdetails}}" >
            <DataGridHyperlinkColumn.ElementStyle>
                <Style TargetType="TextBlock">
                    <EventSetter Event="Hyperlink.Click" Handler="ViewLogClick" />
                </Style>
            </DataGridHyperlinkColumn.ElementStyle>
        </DataGridHyperlinkColumn>
    </DataGrid.Columns>
</DataGrid> 
```

日志是一个超链接列，单击该链接会在新窗口中显示日志文件的内容。

如果 Output.Log 为空，是否可以隐藏日志链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:10:33.763

感谢您的回复。

我创建了一个新属性并将超链接列绑定到 LogLink 作为解决方法：

```
private string _log;
public string Log
    {
        get { return _log; }
        set 
        { 
            _log = value;
            if (!String.IsNullOrEmpty(value))
            {
                LogLink = "view...";
            }
        }
    }
    private string _logLink;
    public string LogLink
    {
        get
        {
            return _logLink;
        }
        set
        {
            _logLink = value;
            FirePropertyChangedEvent("LogLink");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:16:45.087

尝试将 TargetNullValue 添加到您的列绑定。

```
 <DataGridHyperlinkColumn Header="Log" 
    ContentBinding="{Binding Source={StaticResource viewdetails}, TargetNullValue={x:Static sys:String.Empty}}"> 
```

# c# - 如何在列表列中查找相同的值并在其他行上为相同的列值连接字符串

> ID：14200346
> 
> 赞同：2
> 
> 时间：2013-01-07T16:49:44.277
> 
> 标签：c#, .net

我有一个包含 2 列的列表，其结构如下：

```
50 process:3333
50 phone:xxxx
51 process:2222
51 phone:yyyy 
```

我需要基于第一个具有这种结构的列表来构建一个新列表：

```
50 process:3333,phone:xxxx
51 process:2222,phone:yyyy 
```

List 是否有任何方法可以从一列中找到相同的值并将字符串连接到第二列。

或者我必须找到一种方法来手动使用 foreach 或 while 语句？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T16:59:49.003

假设一个简单的结构，如......

```
public struct Proc
{
    public int ID { get; set; }
    public string Value { get; set; }
} 
```

使用您的样本数据：

```
var procList = new List<Proc>() { 
    new Proc{ID=50,Value="process:3333"},new Proc{ID=50,Value="phone:xxxx"},
    new Proc{ID=51,Value="process:2222"},new Proc{ID=51,Value="phone:yyyy"},
}; 
```

您可以使用`Enumerable.GroupBy`和`String.Join`：

```
var procIdGroupList = procList
    .GroupBy(p => p.ID)
    .Select(g => new Proc
    {
        ID = g.Key,
        Value = string.Join(",", g.Select(p => p.Value))
    }).ToList(); 
```

**[演示](http://ideone.com/XyP1oq)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:01:23.993

找到了解决方法：

```
//Recupera valores dos indices para o tipo de documento
                List<Gedi.Models.OperacoesModel.imports> valuesList = new List<Gedi.Models.OperacoesModel.imports>();
                var valuesListObj = from a in context.sistema_Documentos
                                    join b in context.sistema_Indexacao on a.id equals b.idDocumento
                                    join c in context.sistema_Indexes on b.idIndice equals c.id
                                    where a.ativo == 1
                                    select new
                                    {
                                        id = a.id,
                                        values = c.idName + ":" + b.valor
                                    };

                var çist = (from x in valuesListObj.AsEnumerable()
                            select new Gedi.Models.OperacoesModel.imports
                            {
                                id = x.id,
                                values = x.values
                            }).ToList();

                var importList = çist.GroupBy(p => p.id).Select(g => new Gedi.Models.OperacoesModel.imports
                                                                        {
                                                                            id = g.Key,
                                                                            values = string.Join(",", g.Select(p => p.values))
                                                                        }).ToList(); 
```

# sockets - 两个 RMIRegistry.exe 在同一个端口上？

> ID：14200347
> 
> 赞同：2
> 
> 时间：2013-01-07T16:49:44.857
> 
> 标签：sockets, rmi, java-7, java-6, rmiregistry

我正在使用 Windows 7（专业版，64 位）系统，并且我已经看到了当前的情况，有人可以突出显示我并解释一下怎么可能吗？我已经安装了 Java 6（仅限 JRE）和 Java 7（JDK），都是 64 位的。

1.  在命令提示符下，我从目录运行`rmiregistry.exe`（默认端口 1099） 。`jre6/bin`当那个正在运行时，我从另一个命令提示符尝试再次运行它。它给了我一个例外，说端口已经绑定。

2.  同样，`rmiregistry.exe`来自`jdk7/bin`目录。同样的例外，已经绑定。

3.  在命令提示符下，我从目录运行`rmiregistry.exe`（默认端口 1099） 。`jre6/bin`当那个正在运行时，从另一个命令提示符我尝试`rmiregistry.exe`从目录运行（默认端口 1099）`jdk7/bin`。它运行！从结果来看`netstat -a -b -o`，两个 PID 都在侦听 IPv4 和 IPv6 上的端口 1009。第一个运行，回复 RMI 操作和 API。

这怎么可能？两个 RMIRegistry 怎么能监听 1099 端口？我错过了什么吗？

谢谢你的帮助。

* * *

更多细节：

*   运行 Java 6 RMI 注册表，异常堆栈跟踪`Caused by: java.net.BindException: Address already in use: JVM_Bind`从`java.net.PlainSocketImpl.socketBind(Native Method)`;
*   运行 Java 7 RMI 注册表，异常堆栈跟踪，相反，来自`java.net.DualStackPlainSocketImpl.bind0(Native Method)`.

有什么意义吗？这与`-Djava.net.preferIPv4Stack=true`VM选项有关吗？从 Java 7 开始，我如何知道 IPv4 和 IPv6 RMI 端口是否已被 Java 6 或 Java 7 RMI Registry 占用？

* * *

再次，更多细节......

*   我已经停止了一切。只是“为了好玩”，我在端口 1099 上运行了 Calibre（电子书管理应用程序）内部 Web 服务器；

*   `rmiregistry.exe`从 Java 6 开始，它告诉我它无法运行，因为端口很忙；

*   `rmiregistry.exe`从 Java 7 运行...但是，和以前一样，端口 1099 上的回复来自 Calibre。

* * *

还有一个：在 Ubuntu（使用 OpenJDK）上运行相同的 RMI 注册表（Java 6 + Java 7，32 位），我通过`java.net.PlainSocketImpl.socketBind(Native Method)`（甚至对于 Java 7！）有“端口已在使用中的消息”。没有两件东西可以占用同一个端口……像往常一样！所以，至少，我知道这是一个 Windows 7 + Java 问题！

对我还有什么提示吗？

* * *

我在使用 DatagramSocket 时看到了类似的东西：我在一个带有 Java 6 的端口上使用它，然后我用 Java 7 运行另一个相同的应用程序，它连接到该端口（但不起作用），即使它已经被占用。然后，使用 Java 7 启动第三个相同的应用程序，这个应用程序会意识到这个端口已经很忙。我认为这可能与 RMI Registry 相同。

为什么我可以在同一个端口上运行两个 RMI 注册表？为什么 Java 6 和 Java 7 在某些方面存在关于套接字和端口的“冲突”行为？另外，为什么 Windows（在我的情况下是 7）不会阻止同一端口上的第二个请求？

# javascript - 如果返回语句中的条件

> ID：14200349
> 
> 赞同：-2
> 
> 时间：2013-01-07T16:49:47.743
> 
> 标签：javascript, jquery

我需要在一个返回多值的函数中创建一个 if 语句。我试过这个，但它不工作。

```
a(this).attr('src', function(i, current){
    if ( i == 'http://www.old.com'){
        return current.replace('http://www.old.com','http://www.new.com');
    }
    else if ( i == 'http://www.older.com'){
        return current.replace('http://www.older.com','http://www.new.com');
    }
    else ();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:01:09.133

[`.attr`](http://api.jquery.com/attr/)jQuery 的基于回调的函数的格式是

```
.attr( attributeName, function(index, attr) ) 
```

您的`if`语句使用第一个回调参数 ，`i`它始终是索引号，但您似乎希望它们是字符串。但是，每个属性的字符串值都在第二个回调参数中。您可能打算比较第二个参数`current`.

此外（根据您所做的评论），您实际上并不想完全匹配`old.com`，您想查看 URL 是否以 开头`http://www.old.com`：

```
if ( current.indexOf('http://www.old.com') == 0) { ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:03:35.967

您正在测试 i 然后替换当前。除非 current 和 i 相同，否则您可能会遇到错误的条件而不是替换。else() 也是不正确和不必要的。

```
a(this).attr('src', function(index, current){
    if ( current == 'http://www.old.com'){
        return 'http://www.new.com';
    }
    else if ( current == 'http://www.older.com'){
        return 'http://www.new.com';
    }
}); 
```

编辑删除替换，谢谢@wirey

# php - mysql_real_escape_string(); 问题

> ID：14200352
> 
> 赞同：-1
> 
> 时间：2013-01-07T16:49:49.507
> 
> 标签：php, mysql, sql

我似乎对 mysql_real_escape_string(); 有一个小问题。

它没有给我返回值，例如我这样使用它：

```
$a = mysql_real_escape_string($tableName); 
```

但 $a 是空白的。

我已经运行了几个这样的测试：

```
$query = "CREATE TABLE ".$tableName." AS (SELECT * FROM availability WHERE 1=2)";

echo "query: " . $query;

echo "tableName: " . $a; 
```

输出如下：

```
query: CREATE TABLE gRLEFCnOauUlJAekIEq5 AS (SELECT * FROM availability WHERE 1=2)tableName: 
```

如您所见，查询符合预期，但 $a 什么也没显示。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T16:52:29.157

`mysql_real_escape_string`需要与数据库的活动连接。您需要连接到数据库`mysql_connect()`才能使其正常工作。

但是，最好切换到 PDO 或 MySQLi 并使用准备好的语句，因为：

1.  该`mysql_*`库已弃用。
2.  准备好的语句比转义要好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T16:52:38.203

为了`mysql_real_escape_string`工作，您**必须**有一个活动的数据库连接。如果您无法建立数据库连接，请`mysql_escape_string`改用。

旁注：这些都不是理想的，因为不推荐使用 mysql 扩展。你应该转向 PDO 或 mysqli。

# android - com_example.android.softkeyboard 启动失败

> ID：14200359
> 
> 赞同：2
> 
> 时间：2013-01-07T16:50:23.177
> 
> 标签：android, android-softkeyboard

我已经从 sdk 示例代码中的 com_example.android.softkeyboard 导入了现有项目。当我尝试运行它时，启动获取取消并给出如下错误

[2013-01-07 22:09:45 - com_example_android_softkeyboard] ------------------------------ [2013-01-07 22:09:45 - com_example_android_softkeyboard] Android 启动！[2013-01-07 22:09:45 - com_example_android_softkeyboard] adb 运行正常。[2013-01-07 22:09:45 - com_example_android_softkeyboard] 未找到启动器活动！[2013-01-07 22:09:45 - com_example_android_softkeyboard] 启动只会同步设备上的应用程序包！[2013-01-07 22:09:45 - com_example_android_softkeyboard] 执行同步 [2013-01-07 22:10:00 - com_example_android_softkeyboard] 警告：应用程序未指定 API 级别要求！[2013-01-07 22:10:00 - com_example_android_softkeyboard] 设备 API 版本为 10 (Android 2.3.4) [2013-01-07 22:10:00 - com_example_android_softkeyboard] 正在上传 com_example_android_softkeyboard。apk 到设备 'emulator-5554' [2013-01-07 22:10:00 - com_example_android_softkeyboard] 正在安装 com_example_android_softkeyboard.apk ... [2013-01-07 22:10:17 - com_example_android_softkeyboard] 由于不同，重新安装失败应用程序签名。[2013-01-07 22:10:17 - com_example_android_softkeyboard] 您必须完全卸载应用程序。警告：这将删除应用程序数据！[2013-01-07 22:10:17 - com_example_android_softkeyboard] 请在 shell 中执行“adb uninstall com.example.android.softkeyboard”。[2013-01-07 22:10:17 - com_example_android_softkeyboard] 发布已取消！17 - com_example_android_softkeyboard] 由于应用程序签名不同，重新安装失败。[2013-01-07 22:10:17 - com_example_android_softkeyboard] 您必须完全卸载应用程序。警告：这将删除应用程序数据！[2013-01-07 22:10:17 - com_example_android_softkeyboard] 请在 shell 中执行“adb uninstall com.example.android.softkeyboard”。[2013-01-07 22:10:17 - com_example_android_softkeyboard] 发布已取消！17 - com_example_android_softkeyboard] 由于应用程序签名不同，重新安装失败。[2013-01-07 22:10:17 - com_example_android_softkeyboard] 您必须完全卸载应用程序。警告：这将删除应用程序数据！[2013-01-07 22:10:17 - com_example_android_softkeyboard] 请在 shell 中执行“adb uninstall com.example.android.softkeyboard”。[2013-01-07 22:10:17 - com_example_android_softkeyboard] 发布已取消！

请帮我运行应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:58:13.510

该日志会告诉您确切的问题是什么以及如何解决它：

```
Installing com_example_android_softkeyboard.apk... 
[2013-01-07 22:10:17 - com_example_android_softkeyboard] Re-installation failed due to different application signatures.
[2013-01-07 22:10:17 - com_example_android_softkeyboard] You must perform a full uninstall of the application. WARNING: This will remove the application data! 
[2013-01-07 22:10:17 - com_example_android_softkeyboard] Please execute 'adb uninstall com.example.android.softkeyboard' in a shell. 
[2013-01-07 22:10:17 - com_example_android_softkeyboard] Launch canceled! 
```

您的模拟器上已经`com.example.android.softkeyboard`安装了一个版本，您需要在安装新版本之前删除（卸载）该版本。

# css - div 不随文本扩展

> ID：14200363
> 
> 赞同：0
> 
> 时间：2013-01-07T16:50:38.433
> 
> 标签：css, html

HTML 代码

```
<div class="container">
    <div class="tip_text">D</div>
    <div class="tip_content">test</div>
</div>

<br /><br /><br />

<div class="container">
    <div class="tip_text">D2</div>
    <div class="tip_content">test test test test test test test</div>
</div> 
```

CSS 代码

```
.container{
    position: relative;
    float: left;
}

.tip_text{
    position: relative;
    float:left;
    width: 130px;
    height: 30px;
    margin: 0px;
    padding: 2px;
    text-align: left;
    line-height: 28px;
    font-size: 16px;
    font-weight: bold;
    border: 1px solid #acacac;
    cursor:help;
}

.tip_content{
    background: #333;
    color: #fff;
    padding: 10px 15px;
    z-index: 98;
    min-height: 15px;
    position:absolute;
    left: 100%;
    font-size: 12px;

} 
```

上面的代码有以下我试图解决的问题。当大量文本放入其中时，“tip_content” div 不会扩展。我不知道为什么。我不想设置宽度，我希望它们根据放入的文本量增长。这应该像 div 的行为一样默认发生，但在这种情况下不是。如果有人对此问题有深入了解，将不胜感激。

[http://jsfiddle.net/Qyrjf/](http://jsfiddle.net/Qyrjf/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:48:22.880

```
white-space: nowrap; 
```

This seems to fix the problem. Here is the full code in case people are interested in the application of the solution. It is using CSS and CSS3 to create tooltips.

HTML

```
<div class="container">
    <div class="tip_text">D</div>
    <div class="tip_content">test</div>
</div>

<br /><br /><br />

<div class="container">
    <div class="tip_text">D2</div>
    <div class="tip_content">test test test test test test test</div>
</div> 
```

CSS (full)

```
.container{
    position: relative;
    float: left;
}

.tip_text{
    position: relative;
    float:left;
    width: 130px;
    height: 30px;
    margin: 0px;
    padding: 2px;
    text-align: left;
    line-height: 28px;
    font-size: 16px;
    font-weight: bold;
    border: 1px solid #acacac;
    cursor:help;
}

.tip_text:hover + .tip_content{
    opacity: .9;
    visibility: visible;
    margin-left: 10px;
}

.tip_content:before{

    border: solid;
    border-color:  transparent #333;
    border-width: 6px 6px 6px 0;
    content: "";
    z-index: 99;
    position:absolute;
    left:-6px;
    top:12px;
}

.tip_content{
    background: #333;
    color: #fff;
    padding: 10px 15px;
    z-index: 98;
    min-height: 15px;
    float: left;
    left: 100%;
    font-size: 12px;
    position: absolute;
    white-space: nowrap;

    -moz-box-shadow: 2px 2px 2px #666;
    -webkit-box-shadow: 2px 2px 2px #666;
    box-shadow: 2px 2px 2px #666;

    opacity: 0;
    margin-left: 20px;
    visibility: hidden;

    -webkit-transition-property:opacity, visibility, margin-left;
    -webkit-transition-duration:0.2s, 0.2s, 0.1s; 
    -webkit-transition-timing-function: ease-in-out, ease-in-out, ease-in-out;

    -moz-transition-property:opacity, visibility, margin-left;
    -moz-transition-duration:0.2s, 0.2s, 0.1s;  
    -moz-transition-timing-function: ease-in-out, ease-in-out, ease-in-out;

    -o-transition-property:opacity, visibility, margin-left;
    -o-transition-duration:0.2s, 0.2s, 0.1s; 
    -o-transition-timing-function: ease-in-out, ease-in-out, ease-in-out;

    transition-property:opacity, visibility, margin-left;
    transition-duration:0.2s, 0.2s, 0.1s; 
    transition-timing-function: ease-in-out, ease-in-out, ease-in-out;

} 
```

# android - android videoView.pause() 不起作用，而 .canPause() 返回 true

> ID：14200372
> 
> 赞同：1
> 
> 时间：2013-01-07T16:51:09.027
> 
> 标签：android, android-videoview

我的 android 应用程序可以显示流媒体视频。我遇到了非常奇怪的 videoView 行为。VideoView的播放可以通过按钮开始/暂停，代码为：

```
 playPause.setOnCheckedChangeListener(new OnCheckedChangeListener()
        {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
            {
                boolean isPlaying = isChecked;
                if (isPlaying)
                {
                    videoView.pause();
                }
                else
                {
                    videoView.start();
                }
            }
        }); 
```

我调用 videoView.pause() 停止播放，调用 videoView.start() 开始/继续播放。我在 3 台设备上测试了这段代码：

1) Nexus 7，Android 4.2：播放正常，暂停正常，videoView.canPause() 返回 true。

2) 三星 Galaxy S3，Android 4.1：播放正常，暂停不会停止视频，canPause() 返回 true。

3) LG P-350，Android 2.2 - 播放正常，暂停不起作用，.canPause() 返回 false。

所以，我可以理解为什么它不能在 P-350 上暂停 - 因为 canPause 是错误的。但是 Galaxy S3（或 android 4.1 - 我不知道这种行为的原因是什么）是怎么回事？这只是一团糟......如何让它在所有设备上工作，而不仅仅是在其中一些设备上？

PS 如果我调用 .suspend()/.resume()，即使我们停留在同一位置，视频也会被缓冲，所以这不是一个选项。

# sql - 如何制作 SQL 数据库，并在 VB2010 中使用（有超过 1 台计算机访问数据库）

> ID：14200377
> 
> 赞同：1
> 
> 时间：2013-01-07T16:51:18.467
> 
> 标签：sql, vb.net, visual-studio-2010, sql-server-2012

我的问题的背景是基于分布式计算。我希望有一个数据库，其中包含一些数字，然后许多计算机通过每一行计算另一个数字（有点过度简化）。

我遇到的问题源于我对 SQL 服务器的了解不足（我认为）。我已经在这台机器上安装了 Microsoft SQL Server 2012（和 2008），并且我设法为这项任务制作了一个服务器，但是问题出现了。

我无法向服务器添加表（我正在尝试在 VS2010 中执行此操作）。当我展开服务器并右键单击表并选择添加新表时，我收到以下错误：

“不支持服务器版本。仅支持 Microsoft SQL Server 2008 以上的服务器。”

这阻止了我制作一张桌子，从那里我无法继续前进。我已经下载并安装了 VS2010 SP1（并在它没有解决问题时再次重新安装），因为我发现这对类似问题提出了建议。

对此的任何帮助将不胜感激。我已经阅读过，但似乎没有任何效果，人们建议使用“SQL Management Studio”，但我似乎没有安装这个！

另外，我还没有到这一步，但是如果这个问题得到解决，任何关于如何从不同的机器（通过同一个本地网络）访问数据库的建议/链接将不胜感激！

非常感谢，

弗雷泽

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:44:53.110

R Harvey 为您提供了指向 SSMS 的指针——这是使用的理想工具。

至于访问本地数据库的其他计算机 - 您的计算机名称（安装 MSSQL 的位置）是连接字符串中的服务器名称。

# python - Webdriver 下载完成后立即打开文件

> ID：14200381
> 
> 赞同：2
> 
> 时间：2013-01-07T16:51:28.827
> 
> 标签：python, selenium, automated-tests, selenium-webdriver

我正在编写一些测试，我正在使用`Firefox webdriver`with a`FirefoxProfile`从外部 url 下载文件，但我需要在下载完成后立即读取此类文件以检索一些特定数据。

我这样设置我的个人资料和驱动程序：

```
fp = webdriver.FirefoxProfile()
fp.set_preference("browser.download.folderList", 2)
fp.set_preference("browser.download.manager.showWhenStarting", False)
fp.set_preference("browser.download.dir", '/some/path/')
fp.set_preference("browser.helperApps.neverAsk.saveToDisk", "text/plain, application/vnd.ms-excel, text/csv, text/comma-separated-values, application/octet-stream")

ff = webdriver.Firefox(firefox_profile=fp) 
```

有什么方法可以知道文件何时完成下载，以便我知道何时调用阅读器函数，而无需轮询下载目录、等待`time.sleep`或使用任何 Firefox 插件？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:30:43.537

您可以尝试在下载文件时将文件连接到文件对象以像流缓冲区一样使用它，在下载时轮询它以获取您需要的数据，直接监控下载完成（通过等待文件如果在一定时间内没有添加新数据，则假设它是完整的）。

编辑：

您可以尝试查看[此处](https://stackoverflow.com/questions/3029824/programmatically-determining-the-status-of-a-file-download)引用的配置文件文件夹中的下载跟踪数据库。看起来您可以等待文件的状态为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:41:07.480

我喜欢使用 inotify 来监视这类事件。一些示例代码，

```
from pyinotify import (
    EventsCodes,
    ProcessEvent,
    Notifier,
    WatchManager,
)

class EventManager(ProcessEvent):

    def process_IN_CLOSE_WRITE(self, event):
        file_path = os.path.join(event.path, event.name)
        # do something to file, you might want to wait a second here and 
        # also test for existence because ff might be making temp files 

wm = WatchManager()
notifier = Notifier(wm, EventManager())
wdd = wm.add_watch('/some/path', EventsCodes.ALL_FLAGS['IN_CLOSE_WRITE'], rec=True)

While True:
    try:
        notifier.process_events()
        if notifier.check_events():
            notifier.read_events()
    except:
        notifier.stop()
        raise 
```

通知程序根据事件的名称决定在事件管理器上调用哪个方法。所以在这种情况下，我们只关注`IN_CLOSE_WRITE`事件

# javascript - 在窗口调整大小时自动缩放 svg

> ID：14200383
> 
> 赞同：1
> 
> 时间：2013-01-07T16:51:41.263
> 
> 标签：javascript, jquery, jquery-svg

我有这个代码：

```
function myClient() {
  if (!(this instanceof arguments.callee)) {
    return new arguments.callee(arguments);
  }
  var self = this;

  this.init = function() {
    self.viewResized();
    self.drawSvg();
  };

  this.viewResized = function () {
      var width = $('body').width(),
          windowHeight = $(window).height(),
          svgCanvasHeight = width * (369.0 / 567.0);
          $('#svg').css({
            'margin-top': 10
          });
    }

  this.drawSvg = function() {

    // ...
}

var myClient;

jQuery(function() {
  myClient = new myClient();
  $(window).resize(function() {
      console.log("window resized");
      myClient.viewResized();
    });
}); 
```

如何动态获取drawSvg中的svgCanvasHeight，以便在调整窗口大小时，svg的viewBox和svg也是如此？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:16:14.703

在这里回答：[获取 SVG/G 元素的真实大小](https://stackoverflow.com/questions/9847684/get-the-real-size-of-a-svg-g-element)

**关于 viewBox：**

我在使用 SVG 和 jQuery 时遇到了很多问题。

虽然 html 属性不区分大小写，但 svg 属性（如 viewBox）则不区分大小写。我会尝试使用 element.setAttribute(name, value) 本机 JS 函数。这对我有用，并确保您使用的是带有大写 B 的 viewBox。

# ruby-on-rails - Rails 中的 Gem 未加载

> ID：14200387
> 
> 赞同：2
> 
> 时间：2013-01-07T16:52:01.387
> 
> 标签：ruby-on-rails, gem

我想在我的 Rails 项目中使用 symbolize gem (http://rubygems.org/gems/symbolize)。我添加了

```
gem 'symbolize', '4.2.0' 
```

到我的 Gemfile 并运行`bundle install`. 如果我运行，`gem list --local`我会看到已安装的 gem。

但是，当我实际尝试使用 gem 添加到 ActiveRecord 的方法时，我在运行时遇到错误。即，我有：

```
class WrittenEntry < ActiveRecord::Base
  symbolize :entry_type, :in => [:blog, :vorfreude, :twitter], :i18n => false
end 
```

哪个抛出：

```
/Users/haldimann/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/dynamic_matchers.rb:50:in `method_missing': undefined method `symbolize' for #<Class:0x007ff7ee8ad570> (NoMethodError)
    from /Users/haldimann/Projects/nikhaldimann.com/app/models/written_entry.rb:4:in `<class:WrittenEntry>'
    from /Users/haldimann/Projects/nikhaldimann.com/app/models/written_entry.rb:1:in `<top (required)>'
    from /Users/haldimann/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /Users/haldimann/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/haldimann/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/haldimann/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /Users/haldimann/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:359:in `require_or_load'
    from /Users/haldimann/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:313:in `depend_on'
    from /Users/haldimann/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:225:in `require_dependency'
    from /Users/haldimann/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
    ... 
```

似乎符号化宝石以某种方式从未实际加载。我可能会遗漏一些明显的东西，有什么想法吗？

# excel - 隐藏最后一行时查找 Excel 电子表格的最后一行

> ID：14200392
> 
> 赞同：9
> 
> 时间：2013-01-07T16:52:16.897
> 
> 标签：excel, excel-2007, vba

我正在尝试在 A 列中找到包含具有以下代码的值的最后一行：

```
LastRow = DataWorksheet.Range("A:A").Find(What:="*", SearchOrder:=xlRows, SearchDirection:=xlPrevious, LookIn:=xlValues).Row 
```

这适用于大多数情况，*除非*最后几行被过滤掉。例如，假设我们有 30 行数据。如果 1-10 行可见，11-20 行被过滤掉，21-30 行可见，则成功找到最后一行：返回 30。当所有内容可见且过滤掉 21-30 行时，LastRow 返回 1。

请注意，如果我手动*隐藏*而不是过滤掉第 21-30 行，它会告诉我最后一行是 20。

是什么赋予了？如果最后一行被过滤，我怎样才能让它确定最后一行是什么？

**编辑：**现在似乎 LastRow 正在挑选最后一个*未过滤*的行，这与其之前的行为明显不同。一旦我能够更好地隔离我遇到的错误/不一致，我将更新这篇文章。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:01:36.860

这些应该忽略过滤/可见性并为您提供最后使用的行号：

```
DataWorksheet.UsedRange.Rows.Count 
```

-或者-

```
DataWorksheet.Range("A1").SpecialCells(xlCellTypeLastCell).Row 
```

两者都不会在 A 列中找到最后使用的单元格，但是……这是您需要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:04:33.857

这个怎么样（作为一种解决 XL 限制的工作）。循环有点长/笨重，但至少循环从第一个可见的最后一个单元格开始。

```
LastRow = DataWorksheet.Range("A:A").Find(What:="*", SearchOrder:=xlRows, SearchDirection:=xlPrevious, LookIn:=xlValues).Row

If LastRow <> DataWorksheet.UsedRange.Rows.Count 'assumes data starts in A1, if not adjust acoordingly

'now check if there is anything below

    Dim rngSearch as Range
    rngSearch = DataWorksheet.Range("A" & LastRow & ":A" & DataWorksheet.UsedRange.Rows.Count)

    Dim lngRows as Long, lngCnt as Long
    lngRows = rngSearch.Rows.Count

    For lngCnt = lngRows to 1 Step -1

        If DataWorksheet.Range("A" & lngCnt) = vbNullString And DataWorksheet.Range("A" & lngCnt -1) <> vbNullString Then

            LastRow = DataWorksheet.Range("A" & lngCnt-1).Row
        End If

    Next

End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T02:34:34.113

这适用于具有隐藏行和自动过滤器的工作表。如果最后一个具有值的单元格下方的单元格已被格式化（这将导致 usedrange 大于您正在查找的行），它也不会为您提供不正确的行。

```
Sub FindLastRowWithValue()
    Dim ws As Worksheet
    Dim temp As Worksheet
    Dim lastrow As Long

    ' copy the sheet that may have hidden rows
    Set ws = Sheets("Sheet1")
    ws.Copy Before:=Sheets(1)
    Set temp = ActiveSheet

    ' turn off autofiltering if need be
    If temp.AutoFilterMode Then temp.AutoFilterMode = False

    ' unhide all rows
    temp.Columns("A:A").EntireRow.Hidden = False

    ' get the last row with a value now that all rows are unhidden
    lastrow = temp.Range("A" & temp.Rows.Count).End(xlUp).Row

    ' delete the temporary sheet
    Application.DisplayAlerts = False
    temp.Delete
    Application.DisplayAlerts = True

    MsgBox lastrow
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-19T17:59:16.873

在经历了很多挫折之后，“vba built-in”方法似乎总是存在问题。例如，列“A”和“WS”是工作表对象：

*   « Ws.Cells(WS.Rows.Count,1).End(xlUp) » 因隐藏行而失败
*   « WS.Range("A1").Find(...) » 在组中隐藏行时失败（可能还有其他情况）
*   « UsedRange » 和 « .SpecialCells(xlLastCell) » 可以返回高于预期的结果

我的解决方案是使用带有“WorkSheet.Evaluate”的 excel 公式。

检查非空值（即不考虑结果为空的公式）：

```
Function FindLastRow(R as Range) As Long
    Const NotFoundResult = 1 ' If all cells have an empty value, this value is returned
    FindLastRow = R.Worksheet.Evaluate("IFERROR(LARGE(ROW('" & R.Worksheet.Name & "'!" & R.Address & ")*--('" & R.Worksheet.Name & "'!" & R.Address & " <> """"),1)," & NotFoundResult & ")")
End Function 
```

要使用公式或值检查最后一个单元格（即使结果为空）：

```
Function FindLastRow(R as Range) As Long
    Const NotFoundResult = 1 ' If all cells are empty (no value, no formula), this value is returned
    FindLastRow = R.Worksheet.Evaluate("IFERROR(LARGE(ROW('" & R.Worksheet.name & "'!" & R.Address & ")*--(NOT(ISBLANK('" & R.Worksheet.name & "'!" & R.Address & "))),1)," & NotFoundResult & ")")
End Function 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-05T20:03:56.530

我假设 Slothario 的工作表结构简单，具有以下主要特点：

*   A 列中最后一个填充的单元格也是工作表的最后一个填充行（至少在没有隐藏或过滤掉任何行时）。
*   第 1 行有东西

在这种情况下，这里有两种简单的方法来识别不同类型的“最后一行”：

```
Cells.SpecialCells(xlLastCell).Row 'Last row that is not hidden or filtered out

Activesheet.UsedRange.Rows.Count 'Last row with a value in it (even if the row is hidden; only gives right answer if row 1 is nonblank) 
```

如果顶行/行可能为空白，则需要将第二个选项修改为：

```
Activesheet.UsedRange.Rows.Count + Activesheet.UsedRange.Row -1 'Last row with a value in it (even if the row is hidden) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-20T10:34:36.303

我一直使用它来获取最后一行，但不是 100% 确定它适用于隐藏单元格:)

PS 确保在测试时更改工作表名称

```
'VBA to find last row
lngLastRow = ThisWorkbook.Worksheets("Data").Cells.Find("*", SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-16T12:15:44.540

```
Public Function lr(ByVal source As Worksheet, colu As Long) As Long
Dim tmp As Long
tmp = source.Cells(source.Rows.Count, colu).End(xlUp).Row

While source.Cells(tmp + 1, colu).EntireRow.Hidden = True
tmp = tmp + 1
Wend
lr = tmp
End Function 
```

# matlab - 对文本文件进行更改后，如何保存存储为数组单元字符串的文本文件？

> ID：14200394
> 
> 赞同：-1
> 
> 时间：2013-01-07T16:52:19.300
> 
> 标签：matlab, file-handling

我是 matlab 脚本的初学者，我有一个正在编辑的文本文件（查找和删除某些字符串）。进行必要的更改后，如何保存文件？例如：

```
io_contents = 'testing.m';
filetext = fileread(io_contents);
expr = '[^\n]*.DataType [^\n]*';
fileread_info = regexp(filetext, expr, 'match');
C = textread('filetext', '%s', 'delimiter', '\n');
    z=length(fileread_info);
    if z>=1
    C = C(cellfun(@isempty, strfind(C, 'auto')));
    end 
```

每次我运行它时，它都会删除第一个匹配项，但不会将其保存在 testing.m 文件中并继续迭代。我应该打开一个新文件，在其中调用 testing.m，进行更改然后保存吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:11:11.550

您正在本地内存中工作，您需要做的就是将您的单元格`C`写入文件。

假设您的单元格由您可以执行的字符串组成，例如

```
C = {'aa', 'bb'}           % // test
fid = fopen('out','w');    % // output file

cellfun(@(x)fprintf(fid,'%s\n',x),C)  % // write strings to output file

fclose(fid)                % // release resource 
```

这使

```
aa
bb 
```

在输出文件 ( `out`) 中。

# web - 通过页面上的 URL 将项目添加到设备日历中

> ID：14200396
> 
> 赞同：0
> 
> 时间：2013-01-07T16:52:24.860
> 
> 标签：web, calendar, icalendar, vcf-vcard

我们希望使用移动设备（笔记本电脑/平板电脑/智能手机）的用户只需点击我们移动网站上的按钮/链接/网址即可将事件添加到他的日历中。

我们如何提供这个？（我们读到这对于 Stock Android Google 日历是不可能的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:37:12.737

下载后，该按钮应指向描述事件的 icalendar 文件（请参阅 rfc5545），然后客户端会将事件添加到本地日历。

# c# - 为什么 TypeBuilder 生成的泛型方法信息不是泛型方法？

> ID：14200398
> 
> 赞同：9
> 
> 时间：2013-01-07T16:52:31.513
> 
> 标签：c#, cil, reflection.emit, il

我有一些代码使用`MethodInfo`在生成的类型上找到的泛型方法。为了避免一些反思，我让代码使用

```
ldtoken Method
ldtoken Type
call GetMethodFromHandle(RuntimeMethodHandle,RunTimeTypeHandle) 
```

在编译时生成 MethodInfos 的模式。

但是，如果 methodInfo 属于泛型类型并且本身是泛型方法，那么事情就会变得很糟糕。下面是一些简单地生成 GM 的代码，该 GM 发出其 methodInfo 的开放版本。如果我调用它来检索方法而不是尝试通过特定类型关闭它，我会得到一个令人困惑的异常::

> System.Reflection.MethodInfo`GM[M]()`不是 GenericMethodDefinition。MakeGenericMethod 只能在 MethodBase.IsGenericMethodDefinition 为 true 的方法上调用。

这是相关代码::

```
var aBuilder = AppDomain.CurrentDomain.DefineDynamicAssembly(new AssemblyName("Test"), AssemblyBuilderAccess.RunAndSave);
var mBuilder = aBuilder.DefineDynamicModule(aBuilder.GetName().Name, true);
var typeBuilder = mBuilder.DefineType("NameSpace.Generic`1",TypeAttributes.AutoClass | TypeAttributes.Sealed | TypeAttributes.Public,typeof(object));
var TypeGenerics = typeBuilder.DefineGenericParameters(new[] { "T" });
var methodBuilder = typeBuilder.DefineMethod("GM", MethodAttributes.Public | MethodAttributes.Static | MethodAttributes.HideBySig);
var methodGenerics = methodBuilder.DefineGenericParameters(new[] { "M" });
methodBuilder.SetSignature(typeof(MethodInfo), null, null, Type.EmptyTypes, null, null);
var ilgenerator = methodBuilder.GetILGenerator();
var typeBuilderClosedOverT = typeBuilder.MakeGenericType(TypeGenerics);
ilgenerator.Emit(OpCodes.Ldtoken, methodBuilder);
ilgenerator.Emit(OpCodes.Ldtoken, typeBuilderClosedOverT);
ilgenerator.Emit(OpCodes.Call, 
    typeof(MethodBase).GetMethod(
        "GetMethodFromHandle", 
        BindingFlags.Public | BindingFlags.Static,
        null,
        new[] { typeof(RuntimeMethodHandle), typeof(RuntimeTypeHandle) },
        null
    )
);
ilgenerator.Emit(OpCodes.Castclass,typeof(MethodInfo));
ilgenerator.Emit(OpCodes.Ret);
var bakedType = typeBuilder.CreateType();
var methodInfo = bakedType.MakeGenericType(typeof(int)).GetMethod("GM").MakeGenericMethod(typeof(bool)).Invoke(null, null) as MethodInfo;
var methodInfoClosedOverBool = methodInfo.MakeGenericMethod(typeof(bool)); 
```

似乎我的代码唯一一次出错是它是否是非泛型类型的泛型方法。如果代码被重写，以使其关于普通类型的普通方法，或普通类型的泛型方法，或泛型类型的普通方法，它都可以工作。只有两者的结合才会导致错误。难道我做错了什么？

我提交了一个关于这个问题的错误： [https ://connect.microsoft.com/VisualStudio/feedback/details/775989/clr-cannot-emit-a-token-for-an-open-generic-method-on-a-泛型](https://connect.microsoft.com/VisualStudio/feedback/details/775989/clr-cannot-emit-a-token-for-an-open-generic-method-on-a-generic-type)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:28:40.410

对我来说，这似乎是一个 CLR 问题，因为如果您手动编写 IL 并使用 ilasm，也会发生同样的事情。也就是说，给定一个泛型类`G`和一个非泛型类`N`，每个都有一个泛型方法`M`，然后尝试从非泛型类中获取泛型方法定义：

```
ldtoken    method void class N::M<[1]>()
ldtoken    class N<!T>
call       class [mscorlib]System.Reflection.MethodBase [mscorlib]
             System.Reflection.MethodBase::GetMethodFromHandle(
                valuetype [mscorlib]System.RuntimeMethodHandle,
                valuetype [mscorlib]System.RuntimeTypeHandle)
castclass  [mscorlib]System.Reflection.MethodInfo
ret 
```

但是`MethodInfo`从泛型类返回的不是泛型方法定义（但它几乎是；它是您想要的方法定义的位置）`D.MakeGenericMethod(D.GetGenericArguments())`：`D`

```
ldtoken    method void class G`1<!T>::M<[1]>()
ldtoken    class G`1<!T>
call       class [mscorlib]System.Reflection.MethodBase [mscorlib]
             System.Reflection.MethodBase::GetMethodFromHandle(
                valuetype [mscorlib]System.RuntimeMethodHandle,
                valuetype [mscorlib]System.RuntimeTypeHandle)
castclass  [mscorlib]System.Reflection.MethodInfo
ret 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T13:06:54.587

问题出在`ldtoken method`指令中，因为由于 IL 无法表达通用方法定义，CLR 加载了错误的方法。该指令由 ildasm 反编译为：

```
ldtoken method class [mscorlib]System.Reflection.MethodInfo class NameSpace.Generic`1<!T>::GM<[1]>() 
```

这甚至不是有效的 IL。然后，CLR 会弄乱指令，而是从它自己的泛型参数加载泛型方法实例。

```
var methodInfoClosedOverBool = (methodInfo.IsGenericMethodDefinition ? methodInfo : methodInfo.GetGenericMethodDefinition()).MakeGenericMethod(typeof(bool)); 
```

对于更多测试，我制作了一个更短的代码来显示相同​​的问题：

```
DynamicMethod dyn = new DynamicMethod("", typeof(RuntimeMethodHandle), null);
var il = dyn.GetILGenerator();
il.Emit(OpCodes.Ldtoken, typeof(GenClass<string>).GetMethod("GenMethod"));
il.Emit(OpCodes.Ret);
var handle = (RuntimeMethodHandle)dyn.Invoke(null, null);
var m = MethodBase.GetMethodFromHandle(handle, typeof(GenClass<int>).TypeHandle); 
```

`GetMethodFromHandle`（这也应该只需要方法句柄，而不是声明类型）只是设置声明类型（注意`<int>`或`<string>`无关紧要）并且不会做任何错误。

# entity-framework - 实体框架中的唯一键约束检查

> ID：14200399
> 
> 赞同：3
> 
> 时间：2013-01-07T16:52:34.693
> 
> 标签：entity-framework

我的 SQL Server 中有一个基于两列（AbsoluteCounter、TimeMfrAudit）的唯一键约束。如果我尝试通过实体框架添加对象列表，我如何检查我的一个对象是否会违反此约束而不会引发会使我的整个 context.SaveChanges() 失败的异常？我在这里寻找最佳实践。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:39:44.160

这些将是违反唯一键约束的所有对象：

```
var violatingObjects = listOfObjectsToAdd
    .Where(o => context.Objects.Any(oInDb =>
        oInDb.AbsoluteCounter == o.AbsoluteCounter &&
        oInDb.TimeMfrAudit == o.TimeMfrAudit))
    .ToList(); 
```

它是`EXISTS`列表中每个对象的一个​​数据库查询。如果您只想知道违反约束的第一个对象，请使用`FirstOrDefault()`而不是`ToList()`. 如果您只想知道是否有任何违规对象，请使用`Any()`而不是`ToList()`. 当找到第一个对象时，迭代应该停止。

# javascript - 这个函数如何创建一个对象

> ID：14200400
> 
> 赞同：0
> 
> 时间：2013-01-07T16:52:34.163
> 
> 标签：javascript, function, design-patterns, object

> **可能重复：**
> [在 javascript 中函数声明后的空括号 () 有什么作用？](https://stackoverflow.com/questions/2422026/what-do-empty-parentheses-after-a-function-declaration-do-in-javascript)

我基本上了解 Javascript 的工作原理。现在我正在通过其他程序员的作品自学Javascript设计模式，我遇到了这个

```
 var $a = (function() {
    var a..... //assigning values & functions to variables 
    return { init : init }; //in the variable above there is "init" 
  })();
  $a.init(); 
```

我可以说它`$a.init()`创建了一个具有上面列出的属性和功能的对象。但我不明白它实际上是如何工作的。

为什么函数是这样写的`(function() { })()`？

`return {init: init}`当上面已经有一个功能时，为什么还需要`init`？

这是什么图案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:56:29.217

这是常见的[模块模式](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)。

这

```
 var $a = (function() {
     var a..... //assigning values & functions to variables 
     var init = function() {... uses a};
     return { init : init }; //in the variable above there is "init" 
  })();
  $a.init(); 
```

就像在做

```
var a..... //assigning values & functions to variables 
var $a = { init : function(){... uses a} }; //in the variable above there is "init" 
$a.init(); 
```

但具有私有的优点`a`（如果没有函数可以访问它，则无法读取或写入它）并且不会妨碍全局命名空间。出于同样的原因，`init`必须在返回的对象中声明本地声明的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T16:55:47.257

```
(function() {
})(); 
```

称为`IIFE`立即调用函数表达式。基本上它是一个无需显式调用即可立即执行的函数。包围函数的括号将声明转换为表达式，`()`最后的空是传递给`IIFE`.

`$a`被分配了你的 IIFE 的返回值，它是一个带有一个名为 init 的方法的对象，它调用你的 IIFE 中的一个函数，该函数也称为 init。

```
return { init : init };
                 /\ the name of the method which is called internally
          /\ the name of the method which is returned from the function 
```

这是模块化 Javascript 并创建一种隐私的常用方法（这不是太琐碎，因为默认情况下 javascript 没有像其他语言那样的隐私）。
这样，javascript 的其他部分只能访问您在 return 语句中声明的属性，而不能访问您在 IIFE 中声明的内部内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T16:56:45.363

额外的括号意味着立即调用此函数。这意味着里面的所有东西都被执行了，该函数的返回值将是 $a 的值。

在您的示例中 $a 现在包含一个对象 { init: init}

如果你省略了额外的括号，你应该声明一个你可以调用的新函数。

[在此处](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)阅读有关立即调用的函数表达式的更多信息

# java - 来自 Lookup 对象的实例

> ID：14200403
> 
> 赞同：0
> 
> 时间：2013-01-07T16:52:40.280
> 
> 标签：java, instance, java-7, lookup, bootstrapping

如果您有任意 Lookup 对象（从 invokedynamic 引导程序生成），是否可以从执行查找的类中获取实例？

有一个可用于查找对象的方法“lookupClass”，但它只返回一个类对象。

例如，假设我有一个 Class Car，它生成一个 Lookup 对象。我怎样才能获得该类的实例？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:32:21.593

找到了解决方案:)

如果您有一个查找对象调用者，那么您可以使用以下行获取执行查找的类的实例：

Class.forName(caller.lookupClass().getCanonicalName()).newInstance();

# css - Twitter Bootstrap 模态宽度问题

> ID：14200404
> 
> 赞同：3
> 
> 时间：2013-01-07T16:52:45.873
> 
> 标签：css, twitter-bootstrap, modal-dialog

我的应用程序具有许多模式，所有模式都具有不同的宽度。我知道您可以通过执行以下操作来设置模态内联的宽度：

宽度：400px 左边距：-200px；

这很好用，但是如果您在其中压缩窗口，它将踢出 50% 的屏幕模式，因此您看不到一半的模式渲染它在这些小分辨率下无用。在大约 iPad 的分辨率下，您可以看到这种情况发生。

现在讨论这个问题，如果您在主 bootstrap.css 文件中设置了模态框的宽度，那么只有一个宽度可以完美运行。因此，如果我将宽度设置为 400，margin-left -200，则所有模态都将在此宽度下工作。但是，如果我继续在模式上执行内联 CSS 并执行以下操作：

宽度：900px 左边距：-450px

如上所述，它会在较低的分辨率下中断。

我究竟做错了什么？Twitter Bootstrap 是否仅提供使一种模态宽度在所有分辨率下工作的能力？

我会附上截图，但是 StackOverflow 的管理员显然不允许我发布这些截图来帮助你们。

以下是由于内联宽度而在较低分辨率下中断的模态之一的示例：

```
<div id="add-edit-project-modal" class="modal hide fade" style="width: 320px; margin-left: -160px;">
  <div class="add-edit-project-modal-header modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h4 class="modal-title">New Project</h4>
 </div>
 <div class="add-edit-project-modal-body modal-body">
    <form action="" id="add_project">
    <label>Name</label>
  </div>
  <div class="add-edit-project-modal-footer modal-footer">
    <input type="submit" id="submitButton" class="btn submit" value="Create">
    </form>
  </div>
</div> 
```

在大约 iPad 的分辨率下，50% 的模态显示在屏幕左侧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:08:31.703

您可以使用 jQuery 选择有问题的模式并编辑它们的 CSS 属性。使用以下命令将模态设置为屏幕宽度的 90% 并将其定位在屏幕中心：

```
$('#myModal').modal({
            backdrop: true,
            keyboard: true,
            show: false
        }).css({
            // make width 90% of screen
           'width': function () { 
               return ($(document).width() * .9) + 'px';  
           },
            // center model
           'margin-left': function () { 
               return -($(this).width() / 2); 
           }
    }); 
```

这将在页面加载时起作用。调整浏览器大小并刷新页面，模态框应位于屏幕中央，占屏幕宽度的 90%。

# tomcat - Grails ConfigSlurper 内存泄漏

> ID：14200415
> 
> 赞同：1
> 
> 时间：2013-01-07T16:53:44.943
> 
> 标签：tomcat, grails, servlets, memory-leaks

我在 Grails ( 2.1.0 ) 项目上工作，完成后发现 Tomcat 内存不足。经过不太复杂的调查后，我发现以下代码行导致内存泄漏：

```
def servletContext = ServletContextHolder.servletContext
def config = new ConfigSlurper().parse(servletContext.getResource('/WEB-INF/config.groovy').text) 
```

一旦我从我的代码执行中删除了这两行，项目就会在内存使用稳定的 tomcat 上运行。但是，如果我把这两行带回来，内存使用量会慢慢增加。

我不明白为什么这两行会导致内存泄漏？他们有什么神奇之处？我如何解决它？我需要访问 WEB-INF 文件夹中的资源。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:19:08.833

你在评论中说

> 代码在 Quartz 调度类中。一旦计划的作业执行，我就会重复解析它。

每次你都`ConfigSlurper.parse`必须编译一个 Groovy 类。由于您正在解析一个固定脚本（来自`/WEB-INF/config.groovy`），因此您每次都会得到相同的结果，因此您应该尝试找到某种方法来解析文件一次并将结果存储在`ConfigObject`您的 Quartz 作业可以访问它的地方。

# javascript - collection.find mongojs 同步回调

> ID：14200417
> 
> 赞同：2
> 
> 时间：2013-01-07T16:53:54.193
> 
> 标签：javascript, node.js, mongodb, mongojs

我正在尝试为 collection.find 方法编写自己的包装器，该`mongojs`方法应该返回由指定查询选择的集合项（查询尚未实现，它应该只选择所有结果）。问题是我没有得到一系列结果。看起来 find 方法做了某种异步回调。那么如何强制同步调用或强制我的脚本等待呢？

```
Collection.prototype.find = function () {
    var result = new Array;
    if (Bridge.isServer) {
        db.collection(name).find(function(err, items) {
            items.forEach(function(item) {
                result.push(item);
            });
        });
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T19:25:38.530

我认为你应该考虑让你的函数异步，但是如果你坚持写同步函数，有一个[github 项目](https://github.com/luciotato/waitfor/blob/master/README.md)可以让异步函数同步。

这是另一个处理同一主题的 SO 帖子：[将异步函数转换为同步函数](https://stackoverflow.com/questions/18382436/convert-an-asynchronous-function-to-a-synchronous-function)

# c++ - 在 Qt 中展开环境变量（getenv 等效）

> ID：14200420
> 
> 赞同：12
> 
> 时间：2013-01-07T16:54:16.703
> 
> 标签：c++, qt, environment-variables

我正在寻找[getenv](http://www.cplusplus.com/reference/cstdlib/getenv/)函数的等价物。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-07T16:57:40.550

Qt 有一个包装器`getenv()`，称为[`qgetenv()`](http://doc.qt.io/qt-5/qtglobal.html#qgetenv).

```
QByteArray qgetenv ( const char * varName ) 
```

`getenv()`是一个标准函数，但 Visual Studio 已弃用它，这就是 Qt 提供`qgetenv()`包装器的原因。

请注意，如果您对获取标准文件系统位置（如主目录、应用程序数据目录等）感兴趣，则应该使用[`QDesktopServices::storageLocation()`](http://qt-project.org/doc/qt-4.8/qdesktopservices.html#storageLocation)(Qt 4) 或[`QStandardPaths::writableLocation()`](http://qt-project.org/doc/qt-5.0/qtcore/qstandardpaths.html#writableLocation)(Qt 5)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-05-04T06:52:31.233

对于 Qt，在访问环境变量时也有一种“高级”的方法。这只有在您的 Qt 应用程序在 QCoreApplication 中运行时才有效，大多数 Qt 应用程序都应该是这种情况。

在这种情况下，对于至少 4.6 的 Qt 版本，您可以使用[QProcessEnvironment 。](https://doc.qt.io/qt-5/qprocessenvironment.html)您可以通过使用访问当前进程环境

```
QProcessEnvironment::systemEnvironment(); 
```

你可以通过查询任何变量

```
QProcessEnvironment::systemEnvironment().value("<variablename>", "<defaultvalue>"); 
```

这应该比在大多数情况下使用 getenv/qgetenv 方法更方便，因为这会以更通用的方式隐藏操作系统实现，恕我直言，它也是一种更“类似 Qt”的方法。

# jquery - 使用 jquery 的下拉列表

> ID：14200421
> 
> 赞同：0
> 
> 时间：2013-01-07T16:54:18.663
> 
> 标签：jquery, html

未创建所需的下拉效果。请帮忙。提前致谢

## jQuery

```
$(document).ready(function() { 

    $("#navigation ul").mouseenter(
        function(){ $("#navigation li a").fadeIn(); 
    }); 
    $("#navigation ul").mouseleave(
        function(){ $("#navigation li ").fadeOut(); 
    }); 
}); 
```

## html

```
<ul class="navigation">
    <li><a href="index.php">First</a>
        <ul class="navigation">
            <li><a href="index.php">First</a></li>
            <li><a href="index.php">Second</a></li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:03:56.530

您的“导航”作为一个类给出，并且您以 id ($("#navigation")) 的形式访问它。类可以作为 $(".navigation") 访问。尝试这样的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:12:41.017

我想这就是你想要做的。在此处尝试[演示](http://jsfiddle.net/sHCjJ/1/)

**HTML**

```
<ul class="navigation">
    <li><a href="index.php">First</a>
        <ul class="navigation_level2" style='display:none'>
            <li><a href="index.php">First</a></li>
            <li><a href="index.php">Second</a></li>
        </ul>
    </li>
</ul> 
```

**jQuery**

```
$(document).ready(function() { 

    $(".navigation").mouseenter(
        function(){ $(".navigation_level2").fadeIn(); 
    }); 
    $(".navigation").mouseleave(
        function(){ $(".navigation_level2").fadeOut(); 
    }); 
}); 
```

# php - 将所有关联数组放在一个变量中

> ID：14200425
> 
> 赞同：0
> 
> 时间：2013-01-07T16:54:37.633
> 
> 标签：php, associative-array

我有一些关联数组，其值是从一段时间插入的{}。

```
//some sql select
$comar=array();
while($row=mysql_fetch_array($result)){
    //another sql countrow
    $rowdd=mysql_fetch_row($result);

    $postuid=$row[2];

$comar[$postuid]= $rowdd[count(idnum)];
$_SESSION['comar']=$comar;

} 
```

但是这段代码只显示最后一个 postuid 的 idnum。如何将其全部添加到一个变量中，然后将其放入会话中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:11:43.337

1.  不要在 while 循环中设置会话变量
2.  `count(idnum)`. 这是没有意义的。是`idnum`一个常数。如果是这样，您将获取同一行。
3.  你是什​​么意思另一个SQL国家。您正在尝试获取已经运行的行`fetch_array`。这没有意义，可能是根本问题

# c# - c# File.Delete 恢复？

> ID：14200427
> 
> 赞同：5
> 
> 时间：2013-01-07T16:54:50.433
> 
> 标签：c#, file, recovery

有没有办法恢复已被该`File.Delete()`方法以编程方式删除的文件？

已删除的文件不会出现在回收站中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T16:55:44.733

没有。`File.Delete()`在 API 中调用硬删除并绕过回收站。您将需要使用文件恢复程序并希望获得最好的结果。

要通过回收站删除，您可以使用`SHFileOperation`API，因为它是 shell 的一部分。

如果/一旦你恢复了你的文件，你可能想看看这个 SO 答案，它讨论了更改`File.Delete()`为使用回收站的东西：

[将文件发送到回收站](https://stackoverflow.com/questions/3282418/send-a-file-to-the-recycle-bin)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T16:57:05.873

不，直接没有办法恢复它。

您可以使用恢复程序或 API 来获取文件。

如果文件很重要，我会立即关闭计算机。

看看这个：[C# classes to undelete files?](https://stackoverflow.com/questions/8819188/c-sharp-classes-to-undelete-files)

与答案相同的问题。

# php - While 和 JQuery 对话框

> ID：14200434
> 
> 赞同：0
> 
> 时间：2013-01-07T16:55:09.433
> 
> 标签：php, jquery

我有这个代码：

```
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)){
    if($i++%2==0){
       $color="#FFFFFF";
    }else{
       $color="#CCCCCC";
    }

    ?>

    <tr bgcolor='<?php echo $color; ?>' onmouseover="this.style.background='#ABFB04';" onmouseout="this.style.background='<?php echo $color; ?>';">
    <?php

echo "<td class=tablelist>";

echo $row["ICAO"] . '</td><td class=tablelist>';

echo $row["Name"] . '</td><td class=tablelist>';

echo $row["WeightEmpty"] . '</td><td class=tablelist>';

echo $row["WeightFull"] . '</td><td class=tablelist>';

echo $row["CargoFull"] . '</td><td class=tablelist>';

echo $row["Range"] . '</td><td class=tablelist>';

echo $row["Price"] . '</td><td class=tablelist>';

echo $row["FirstClassSeats"] . '</td><td class=tablelist>';

echo $row["BusinessClassSeats"] . '</td><td class=tablelist>';

echo $row["EconomyClassSeats"]. '</td><td class=tablelist>';

echo "<img id='editaircraft' src='./images/info.png'></td></tr>"; 

?>
<script>
    $(function() {
        $( "#editaircraftdialog" ).dialog({
            autoOpen: false,
            width: 425
        });

        $( "#editaircraft" ).click(function() {
            $( "#editaircraftdialog" ).dialog( "open" );
            return false;
        });
    }); 
</script>

<div id="editaircraftdialog" title="Edit Aircraft">
    <p>Hello World!!</p>
</div>

<?php
}

echo "</table>";
$pagination->render();
?> 
```

它是 PHP 表格行的内容。当我在表格的任何行中单击图像 info.png 时，我想要它显示 JQuery 对话框“editaircraftdialog”。

有了这个代码。当我单击第一行的图像时，我只会看到对话框。如果我点击第二个或其他不是第 1 行的，它不会显示对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:09:10.073

Try this

```
<?php
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)){
    if($i++%2==0){
       $color="#FFFFFF";
    }else{
       $color="#CCCCCC";
    }

    ?>

    <tr bgcolor='<?php echo $color; ?>' onmouseover="this.style.background='#ABFB04';" onmouseout="this.style.background='<?php echo $color; ?>';">
    <?php

echo "<td class=tablelist>";

echo $row["ICAO"] . '</td><td class=tablelist>';

echo $row["Name"] . '</td><td class=tablelist>';

echo $row["WeightEmpty"] . '</td><td class=tablelist>';

echo $row["WeightFull"] . '</td><td class=tablelist>';

echo $row["CargoFull"] . '</td><td class=tablelist>';

echo $row["Range"] . '</td><td class=tablelist>';

echo $row["Price"] . '</td><td class=tablelist>';

echo $row["FirstClassSeats"] . '</td><td class=tablelist>';

echo $row["BusinessClassSeats"] . '</td><td class=tablelist>';

echo $row["EconomyClassSeats"]. '</td><td class=tablelist>';

echo "<img id='editaircraft".$i."' src='./images/info.png'></td></tr>"; 

?>
<script>
       $( "#editaircraft<?php echo $i; ?>" ).click(function() {
            $( "#editaircraftdialog" ).dialog( "open" );
            return false;
        });
</script>
<?php
}

?>

<script>
    $(function() {
        $( "#editaircraftdialog" ).dialog({
            autoOpen: false,
            width: 425
        });

    }); 
</script>

<div id="editaircraftdialog" title="Edit Aircraft">
    <p>Hello World!!</p>
</div>

<?php
echo "</table>";
$pagination->render();
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:02:22.967

问题可能是重复的 HTML 元素 ID，就像 vimalnath 所说的 ID 总是唯一的。如果你有两行（或更多），你最终会得到两个具有相同 ID 的元素，因此使用的 jQuery 选择器只会选择第一个元素。

将 ID 替换为类，如下所示：

```
echo "<img class='editaircraft' src='./images/info.png'></td></tr>"; 
```

jQuery 选择器看起来像这样：

```
 $( ".editaircraft" ).click(function() { 
```

使用诸如[http://validator.w3.org/](http://validator.w3.org/)之类的 HTML 验证器总是一个好主意。重复的 ID 应被验证器视为错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T16:58:29.393

您需要使用`class`而不是`id`. `Id`' 在 CSS 中总是唯一的。

W3C 将类 ID 定义为“一个元素的唯一标识符。一个类可以多次使用，而一个 ID 只能使用一次，因此您应该将类​​用于您知道会经常使用的项目。一个例子是，如果您想为网页上的所有段落提供相同的样式，您将使用类。

# javascript - jquery/javascript 安全性

> ID：14200438
> 
> 赞同：1
> 
> 时间：2013-01-07T16:55:18.070
> 
> 标签：javascript, jquery

我正在使用 jQuery 来禁用某些表单按钮。简单的东西。但是如何防止用户编辑 DOM 并自己启用按钮，以便他们可以解决我设置的限制？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T16:56:53.227

你不能。客户端完全在用户的控制之下。

您只能在提交到服务器时处理您接受的数据。

使用客户端代码为用户提供方便。使用服务器端代码来实施安全和其他限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T16:57:53.450

你不能。DOM 完全由浏览器处理。一旦您将页面发送给客户，它就无法控制。您所能做的就是跟踪服务器上是否允许某个操作，并在他们尝试时允许或禁止它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T16:58:12.957

你不能强迫用户做任何事情，你也不能阻止他们做任何事情。如果可以的话，垃圾邮件发送者将有一个现场日。

这就是为什么必须在服务器端验证所有内容的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T16:58:27.123

你不能！！！一旦 DOM 在客户端，您就无法控制它，确保安全性的最佳方法是也通过服务器端处理它。

# javascript - 如何创建从左下角到右上角的动态对角线？

> ID：14200440
> 
> 赞同：8
> 
> 时间：2013-01-07T16:55:21.343
> 
> 标签：javascript, jquery, dynamic, responsive-design, diagonal

我创建了一个简单的布局，其中有三个交互的 div。一个是屏幕中间的标志，另一个是两个用 jQuery 移出屏幕的块。我使用`skew`CSS 中的选项来应用度数转换。我想根据屏幕应用一定程度，所以这个程度将正确适用于所有屏幕。

视觉示例：http: [//jsfiddle.net/6a93T/1/](http://jsfiddle.net/6a93T/1/)

现在我有这个代码：

HTML：

```
<html>
    <header>
        <link rel="stylesheet" type="text/css" href="css/reset.css">
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
        <script type="text/javascript" src="js/jq.animation.js"></script>
    </header>
    <body>
        <div id="preloader">
            <div id="blocktop"></div>
            <div id="logo"></div>
            <div id="loadline"></div>
            <div id="blockbottom"></div>
        </div>
    </body>
</html> 
```

CSS：

```
html{
    overflow: hidden;
}

#preloader{
    width: 100%;
    height: 100%;
}

#logo{
    background-image: url('../img/logotest.png');
    width: 300px;
    height: 300px;
    display: block;
    position: fixed;
    top: 50%;
    left: 50%;
    margin-left: -150px;
    margin-top: -150px;
    z-index: 1000;
}

#blocktop{
    background-color: #fff4ed;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0px;
    left: -50%;
    z-index: 10;

    transform: skew(-45deg);
     -o-transform: skew(-45deg);
     -moz-transform: skew(-45deg);
     -webkit-transform: skew(-45deg);
}

#blockbottom{
    background-color: #ff7f33;
    width: 100%;
    height: 100%;
    position: absolute;
    bottom: 0px;
    right: -50%;

    transform: skew(-45deg);
     -o-transform: skew(-45deg);
     -moz-transform: skew(-45deg);
     -webkit-transform: skew(-45deg);

} 
```

jQuery：

```
$(document).ready(function(){

    /*$("button").click(function() */
        setTimeout(function(){

        $("#blocktop").animate({
        left: '-120%',
        opacity: '0'},
        800
      );

        $("#blockbottom").animate({
        right: '-120%',
        opacity: '0'},
        800
      );

        $('#logo').fadeOut('700')
    },2000);

}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T17:05:24.240

使用三角法计算所需的角度：

```
var angle = Math.atan2($(window).width(),$(window).height()); // in radians
$('#blocktop,#blockbottom').css('transform','skew(-'+angle+'rad)'); 
```

（数学极客和其他学究的注意事项：反正切通常取高度除以宽度，而不是相反。然而，在这种情况下，我们倾斜垂直线而不是水平线，所以上面的代码给出了想要的结果。）

请注意，较新版本的 jQuery 会自动为该 CSS属性添加必要的`-webkit-`或`-moz-`前缀。`transform`

您可能还需要`display:none`元素，直到上面的代码可以改变角度，然后`show()`在计算角度后立即使用它们：

```
$('#blocktop,#blockbottom').css('transform', 'skew(-' + angle + 'rad)')
    .add('#logo').show(); 
```

[http://jsfiddle.net/mblase75/6a93T/10/](http://jsfiddle.net/mblase75/6a93T/10/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T17:01:06.690

我只是使用这样一个事实，即顶部和右侧具有两个不同边框的 DOM-Element 会导致两者相交的对角线。然后将 DOM-Element 的高度和宽度设置为零，并将border-top-width 设置为window-height，将border-right-width 设置为window-width。在调整大小时用 JavaScript 更新它......就是这样。

我在 DOM 中放了一个容器

```
<div id="diagonal_outer"><div id="diagonal"></div></div> 
```

遵循 CSS 是必要的

```
div#diagonal_outer {
    position: fixed !important;
    position: absolute;
    overflow: hidden;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    z-index: -100;
}
div#diagonal {
    position: relative;

    border-color: #FAE9E1 #ffffff;
    border-style: solid;
    border-left-width: 0;       
    border-top-width: 10240px;
    border-right-width: 12800px;
    border-bottom-width: 0;

    height: 0;
    width: 0;

    left: 50%;
    top: 50%;
    margin-left: -6400px; /* half of border-right-width */
    margin-top: -5120px; /* half of border-top-width */

    z-index: -100;
} 
```

并按照 JavaScript 实现调整大小

```
jQuery(document).ready(function() {
    diagonal();
});

jQuery(window).resize(function() {
    diagonal();
});

var diagonal = function() {
    var wWidth = jQuery(window).width();
    var wHeight = jQuery(window).height();

    jQuery('#diagonal').css('left', 0);
    jQuery('#diagonal').css('top', 0);
    jQuery('#diagonal').css('margin-left', 0);
    jQuery('#diagonal').css('margin-top', 0);

    jQuery('#diagonal').css('border-right-width', wWidth);
    jQuery('#diagonal').css('border-top-width', wHeight);
}; 
```

好的，使用**CSS-skew**的解决方案很好，但是这个适用于 CSS <3

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T17:22:13.713

您不必为此做太多事情。在此处查看[演示](http://jsfiddle.net/aQM9N/)

**HTML**

```
<div class="diagonal"></div> 
```

**CSS**

```
.diagonal {
    width: 0; 
    height: 0; 
    border-top: 110px solid transparent;
    border-right:110px solid blue; 
} 
```

# sql - 子查询返回 1 个结果，因此结果保持不同

> ID：14200441
> 
> 赞同：3
> 
> 时间：2013-01-07T16:55:25.280
> 
> 标签：sql, ms-access, ms-access-2007

我有这个 SQL：

```
SELECT a.ID,
       a.title,
       a.section,
       a.name,
       l.User AS CreatedBy,
       IIf(IsNull(l.Time),
             Null, DateAdd ( "s", l.time, #03/01/1980# )) AS CreatedAt
FROM (
       Reports AS a
       LEFT JOIN AuditLog AS l ON a.ID = l.ID
     ) 
     LEFT JOIN 
      (SELECT TOP 1 Min([time]) AS Mintime,
       URN FROM AuditLog GROUP BY ID)
      AS t ON (l.time = t.mintime) AND (l.ID = t.ID)
WHERE a.Active = 'Y'; 
```

查询有效，但返回重复记录（因为 1 个报告有多个审计日志）。我只想返回一个`ID`显示最早审计时间的记录（因此是什么`mintime`）。我添加了，`TOP 1`但这似乎并没有改变任何东西。我也考虑过`GROUP BY ID`但对如何仍然显示`title`等有点困惑，因为它抱怨它们不是聚合的。

电流输出：

```
ID         title        section     CreatedBy     CreatedAt
Z.test1    Example 1    Ex          User1         01/01/2012
Z.test5    Example 5    Ex          User2         02/03/2012
Z.test6    Example 6    Ex          User3         03/06/2012
Z.test6    Example 6    Ex          User4         02/01/2000 
```

预期输出：

```
ID         title        section     CreatedBy     CreatedAt
Z.test1    Example 1    Ex          User1         01/01/2012
Z.test5    Example 5    Ex          User2         02/03/2012
Z.test6    Example 6    Ex          User4         02/01/2000 
```

如上所示，仅显示了 Z.test6 的最早记录，而不是所有结果。

尝试新查询：

```
SELECT a.ID, a.title, a.section, a.name, l.User AS CreatedBy,   IIf(IsNull(l.Time), Null, DateAdd ( "s", l.time, #03/01/1980# )) AS CreatedAt
FROM (
              Reports AS a 
LEFT JOIN (
                    SELECT ID, Min([time]) AS Mintime FROM AuditLog GROUP BY ID
                  )  AS t ON (l.ID = t.ID)
              LEFT JOIN AuditLog AS l ON (a.ID = l.ID AND t.mintime = l.time)
)
WHERE a.Active = 'Y' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:58:58.147

交换连接顺序并仅选择分组所需的子查询“t”中的最低要求字段。像这样的东西：

```
SELECT a.ID,
   a.title,
   a.section,
   a.name,
   l.User AS CreatedBy,
   IIf(IsNull(l.Time),
         Null, DateAdd ( "s", l.time, #03/01/1980# )) AS CreatedAt
FROM (
   Reports AS a
   LEFT JOIN (SELECT ID, Min([time]) AS Mintime
              FROM AuditLog GROUP BY ID) AS t 
     ON (a.ID = t.ID)
   LEFT JOIN AuditLog AS l 
     ON (t.ID = l.ID AND t.mintime = l.time)
 ) 
WHERE a.Active = 'Y'; 
```

# javascript - Ruby on Rails 方法中的 Javascript 变量传递

> ID：14200444
> 
> 赞同：1
> 
> 时间：2013-01-07T16:55:28.620
> 
> 标签：javascript, ruby-on-rails

我想读出下拉列表的值并将其传递给 ruby​​ 方法。我想在 JavaScript 框架中使用的 ruby​​ 方法的结果。

我的代码如下所示：

```
 var firstSelect = document.getElementById("firstLang");
 var firstOpt = firstSelect.options[firstSelect.selectedIndex].value;

 var curData = <%=raw BuildCompact.getData(firstOpt).to_json %>; 
```

但这不起作用，因为我无法将我的 JavaScript 变量传递给我的方法。有没有办法做到这一点？

# android - 在 sharedpreferences/SQLite 中自动检索密码的 Android 登录活动

> ID：14200445
> 
> 赞同：0
> 
> 时间：2013-01-07T16:55:31.757
> 
> 标签：android, sharedpreferences, android-sqlite

我正在开发一个 android 应用程序并尝试创建一个登录活动，我问自己一件事。当然，可以创建一个登录活动，并可能存储用户名/密码以及所有相关的安全问题，但是否可以创建一个用户可以输入他的登录名并自动检索密码的活动？那会很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:04:41.500

好吧，Macho 不是什么好东西，因为任何人都可以嗅探您的用户名，因为它不是密码类型。但正如您所问的，当用户输入用户名并没有关注编辑文本时，您可以从 sharedpreferences 中获取密码，也可以从 sqlite 数据库中获取密码并显示在密码编辑文本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:17:47.687

是的，这是可能的。但是您应该知道，如果手机丢失或被盗，该手机的新“所有者”可能会自动登录。

# sql - SQL Server 跟踪计划的班次，当一天变化时

> ID：14200447
> 
> 赞同：1
> 
> 时间：2013-01-07T16:55:33.260
> 
> 标签：sql, sql-server, sql-server-2012

我什至不确定从哪里开始解决这个问题，我需要从我们的 MS SQL 2012 Db 中查询生产数据，该数据库具有基于它记录的班次的日期时间戳，棘手的部分是我们运行 4 个 12 小时班次以 2 开、2 关、3 开、2 关的模式，即这是 2013 年 1 月的前 3 周：

```
S   M   T   W   T   F   S
        1   2   3   4   5
        C/D A/B A/B C/D C/D

6   7   8   9   10  11  12
C/D A/B A/B C/D C/D A/B A/B

13  14  15  16  17  18  19
A/B C/D C/D A/B A/B C/D C/D 
```

A&C 是早班 7:00-19:00，B&D 是夜班 19:00-7:00 2013 年 1 月 1 日上午班次的数据：

```
select *
from Line05
where L05Time BETWEEN '01/01/2013 07:00' AND '01/01/2013 19:00' 
```

例如，但我不确定如何将其与 C Shift 联系起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:04:16.390

下面列出了一个班次表。目前尚不清楚您想要做什么，但您应该能够使用此处显示的一些计算来逆向工程确定事件日期/时间的偏移。

**编辑**：更正`case`以处理 2/2/3/2 模式。

```
; with Samples as (
  -- Start at the beginning of 2013.
  select Cast( '01-01-2013 00:00' as DateTime ) as Sample
  union all
  -- Add hours up to the desired end date.
  select DateAdd( hour, 1, Sample )
    from Samples
    where Sample <= '2013-01-30'
  ),
  ExtendedSamples as (
  -- Calculate the number of days since the beginning of the first shift on 1/1/2013.
  select Sample, DateDiff( hour, '01-01-2013 07:00', Sample ) / 24 as Days
    from Samples ),
  Shifts as (
  -- Calculate the shifts for each day.
  select *,
    case when ( Days + 1 ) % 9 in ( 0, 1, 4, 5 ) then 'C/D' else 'A/B' end as Shifts
    from ExtendedSamples )
  select *,
    case when DatePart( hour, Sample ) between 7 and 18 then Substring( Shifts, 1, 1 ) else Substring( Shifts, 3, 1 ) end as Shift
    from Shifts
    option ( maxrecursion 0 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:19:22.253

我敢肯定，当有假期或停工时，它会变得更加狡猾。你像程序员一样思考，你在想有一种算法可以确定你的答案。相反，如果建议您像数据专家一样思考。在某个地方应该有一个信息来源，可以提供您所寻求的答案。询问制定时间表的人是否知道。应该有一个表格告诉你哪些班次分配给了哪些时间段。使用它包含的数据来获得答案。

# java - 我有一个程序应该将一些数据写入文件，但它没有，我不知道为什么

> ID：14200451
> 
> 赞同：0
> 
> 时间：2013-01-07T16:56:00.817
> 
> 标签：java, file-io

`FileWriter`我有一个简单的程序，需要使用and将几行字符串写入文件`BufferedWriter`。它已经从文件中读取了（在这种情况下）完全相同的数据，并将其存储在运行时内存中，但它完全拒绝写入它，我不知道为什么。通常我会尝试调试它并查看发生了什么，但我不知道我在寻找什么。

**这是我的代码：**

```
public void close () {
    FileWriter output = null;
    BufferedWriter fileOut = null;

    // I use the exact same method to read from file so this should work
    // this.prajituri :: ArrayList
    // toString is @Override

    try {
        output = new FileWriter(this.fileName);
        fileOut = new BufferedWriter(output);

        for (int i = 0; i < this.prajituri.size(); i++) {
            fileOut.write(prajituri.get(i).toString());
            System.out.println(prajituri.get(i).toString());
            fileOut.newLine();
        }
    } catch (IOException ioe) {
        System.out.println("Output error: " + ioe);
    } finally {
        if (fileOut != null)
            fileOut = null;
        if (output != null)
            output = null;
    }
} 
```

以防万一，这是我的 toString：

```
@Override
public String toString () {
    return this.name + ";" + this.weight + ";" + this.price;
} 
```

每次我尝试写入文件时，它都会给我一个空文件。难道我做错了什么 ？

我检查并`this.prajituri`实际上很好（拥有它应该拥有的所有数据）并且我使用它`System.out.println(prajituri.get(i).toString())`来检查它**应该**写什么，这也可以。然而它什么也没写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T16:57:33.667

你必须关闭你的**BufferedWriter** [`fileOut.close()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedWriter.html#close%28%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T16:58:08.963

您需要刷新流以将其写入磁盘。

[在 java.io.FileWriter 中刷新](https://stackoverflow.com/questions/1742361/flush-in-java-io-filewriter)

您应该通过调用正确关闭流`fileout.close()`（无论如何都会在内部调用刷新）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T16:58:15.933

立即写入磁盘：

```
output.flush(); 
```

完成后：

```
output.close(); 
```

`close( )`包括`flush( )`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T17:05:03.270

您必须刷新/关闭您的流。如果您使用的是 Java SE 7，最简单的方法是使用新的自动资源管理功能：

[http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

# java - weka GUI 内存不足

> ID：14200452
> 
> 赞同：2
> 
> 时间：2013-01-07T16:56:06.357
> 
> 标签：java, memory, weka

我是 weka 的新手，只是在玩弄它。在 Unix 计算机上，我键入

```
weka 
```

并且正确的 GUI 显示大约 4-5 秒（请注意，这发生在我键入的任何目录中，所以我不确定我是否从正确的目录中调用它）。但在此期间内存必须超过最大堆大小：

```
Not enough memory. Please load a smaller dataset or use larger heap size.
- initial JVM size: 119.1MB
- total memory used: 160.3MB
- max. memory avail.:  227.6 MB 
```

我的问题类似于这里的问题 [ [Weka GUI - 内存不足，无法加载？](https://stackoverflow.com/questions/9164638/weka-gui-not-enough-memory-wont-load)] 但我没有使用 Window 的计算机，所以我不确定如何永久更改最大堆内存。每次我尝试打开 weka 时都会发生这种情况。

任何帮助，将不胜感激。我不想加载任何数据，也不想使用 simpleCLI；我只是想让 GUI 出现并探索它所提供的功能，所以我不确定是否需要使用

```
java -Xmx1024MB 
```

或类似的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T17:05:35.743

试试下面的命令。您可能需要根据数据集的大小调整内存量。

```
java -Xmx1024m -jar weka.jar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-14T13:00:59.457

这是 Mac 用户的快速修复，不涉及终端：

右键单击主 Weka 文件（打开 Gui）并选择“显示包内容”；使用任何文本编辑器打开 Info.plist 文件；更改 -Xmx 选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T17:26:54.860

我发现[了 Weka 的优化内存限制](http://invictium.wordpress.com/2008/02/26/weka-353-and-jvm-with-14-16-gb-memory-limit-workaround/)。

# c# - 如何在 ashx 文件上运行自定义 System.Attribute

> ID：14200454
> 
> 赞同：2
> 
> 时间：2013-01-07T16:56:16.217
> 
> 标签：c#, asp.net, attributes, ashx

通常，在普通`aspx`文件中，我可以`System.Attribute`在页面开头使用，例如：

```
 [AuthorizePage()]
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
        }
    }

    public class AuthorizePage : System.Attribute
    {
         public AuthorizePage()
         {
            //do some stuff to authorize
         }
    } 
```

并且在页面初始化之前，属性的构造函数运行并做一些事情以确保一个人当前已登录，否则属性构造函数会将用户重定向到登录页面。

我想在`HttpHandler`（文件）上做同样的事情，但是在 ashx 页面上`ashx`该属性**永远不会初始化。**

```
[AuthorizePage()]
public class AjaxHandler : MuCustomClassBase, IHttpHandler, IReadOnlySessionState
{
     //The interface implementations and some other custom private methods
} 
```

我对此`ashx`页面进行了 AJAX 调用。这可能是属性不运行的原因吗？还是我必须知道的其他事情？

最终，我会非常高兴知道如何在 ashx 文件上运行自定义 System.Attribute？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:05:08.830

假设您使用的是 ASP.Net 身份验证，您只需将 .ashx 添加到 web.config 中的受保护页面列表中，然后 IIS/ASP.Net 将处理其余部分：

```
 <location path="AjaxRequests.ashx">
    <system.web>
      <authorization>
        <allow users="?" />
      </authorization>
    </system.web>
  </location> 
```

如果您使用的是自建身份验证方案，则可以`OnProcessRequest`在该方法中覆盖并执行必要的身份验证，并根据需要进行重定向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T17:04:14.960

属性本身不会做任何事情。你可以在一个类上堆放 10 个随机属性，但实际上什么都不会发生。属性仅提供有关类/方法/属性的元数据。

应该有一段代码可以查看元数据并对其进行操作。由于您似乎正在使用自定义`AuthorizePageAttribute`这样的代码片段，要么不为处理程序运行，要么不期望不是从 Page 派生的类具有这样的属性。

要解决问题，您需要找到处理您的自定义属性并修复它。您可能需要直接将类似的代码添加到您的处理程序。

您在属性构造函数中的代码在对该页面的每个请求都对页面类有用的事实听起来很可疑 - 我希望每个类型实例都创建一次这样的属性。依靠属性构造函数中的重要代码来运行类的每个实例对我来说似乎很危险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T11:01:34.760

首先，是的，您正在重新发明 Asp.Net MVC 中的 ActionFilterAttribute。但是，我不得不问你是否真的需要使用属性？我建议你使用继承模型。让我简单解释一下；您可能有一个 SecurePage : Page 实现安全操作的类。然后，您可以传递与派生页面相关的安全代码。

如果你坚持使用属性，你应该通过编写一个路由到所需处理程序的基本工厂处理程序来与处理程序机制相交。这个处理程序的行为应该像一个中介对象。

# c# - 将编译后的表达式传递给 Linq To NHibernate

> ID：14200456
> 
> 赞同：2
> 
> 时间：2013-01-07T16:56:23.767
> 
> 标签：c#, linq, nhibernate, expression-trees

我有一组已编译的表达式，我将它们组合成一个表达式，因为我想动态构建我的 linq 查询。请参阅[ExpressionTree Compile() 方法生成堆栈溢出异常](https://stackoverflow.com/questions/14144510/expressiontree-compile-method-generate-a-stackoverflow-exception) ，因为我使用编译表达式以防止堆栈溢出，因为在我的计算机中，当查询包含超过 7000 个表达式时，它会抛出此异常。）然后我使用新生成的表达式和将它传递给我的 FindAll 方法。问题，NHibernate 无法执行查询并说：

无法将“nhibernate.hql.ast.parameter”类型的对象转换为“nhibernate.hql.ast.hqlboleanexpression”类型

```
public IList<T> FindAll(Expression<Func<T, bool>> criteria)
{
     return SessionFactory.GetCurrentSession()
                          .QueryOver<T>()
                          .Where(criteria)
                          .List();
} 
```

我调试并发现nhibernate试图将编译的表达式转换为文件HqlTreeNode中的布尔表达式（方法：HqlTreeNodeExtensions.AsBooleanExpression（this HqlTreeNode node）这当然不起作用。那我应该使用什么解决方案？

标准变量如下所示：

```
(Invoke(value(System.Func`2[Something.SomeEntity,System.Boolean]) // this don't work 
```

作为参考，如果它没有被编译，它看起来像这样：

```
([someEntity].UserID == 1) // this works 
```

谢谢你。

# llvm - KLEE 用于使用 pthread 的 C++ 代码

> ID：14200463
> 
> 赞同：3
> 
> 时间：2013-01-07T16:56:37.330
> 
> 标签：llvm, klee

我是一个尝试使用 KLEE 的初学者。我在使用 pthread 的 C++ 程序上使用 KLEE 自包含包。我生成了一个 .o 文件并使用 KLEE 和以下选项

```
klee --libc=uclibc --posix-runtime test.o 
```

但我看到我收到警告

```
KLEE: NOTE: Using model:
/home/pgbovine/klee/Release+Asserts/lib/libkleeRuntimePOSIX.bca

KLEE: output directory = "klee-out-4"
KLEE: WARNING: undefined reference to function: klee_get_valuel
KLEE: WARNING: undefined reference to function: pthread_create
KLEE: WARNING: undefined reference to function: pthread_exit
KLEE: WARNING: undefined reference to function: pthread_join
KLEE: WARNING: executable has module level assembly (ignoring)
KLEE: WARNING: calling external: syscall(54, 0, 21505, 571522624)
KLEE: WARNING: calling __user_main with extra arguments.
KLEE: WARNING: calling external: pthread_create(571589384, 0, 563903904, 571574176)
0  klee 0x08965ab8
[pid  1846] +++ killed by SIGSEGV +++

+++ killed by SIGSEGV +++
Segmentation fault 
```

在 .bc 文件上使用 klee 也会给我同样的结果。

我不确定为什么我会得到对 pthread 函数的未定义引用。我不确定是否正确使用了 pthreads 库。有没有办法确保这一点？使用 llvm-ld 也无济于事。

下面是我使用的 llvm-ld 命令

```
 llvm-ld tests.bc -l=/usr/lib/libpthread.a 
```

我不确定为什么会出现分段错误。当我通常编译程序`g++`并运行可执行文件时，该程序运行良好。

有人能告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:48:41.300

问题是 Klee 中没有现有的 pthread 支持。因此，当您调用 时`pthread_create()`，Klee 不会响应它（这就是您看到 的原因`KLEE: WARNING: calling external: pthread_create`）。在这种情况下，Klee 会因为这个故障而崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-22T09:17:10.383

如果想在KLEE中使用pthread功能，可以修改KLEE源码来模拟多线程的执行。
在KLEE中，有一个数据结构“ExecutionState”，在用户代码中创建线程时，可以在KLEE中相应地创建一个ExecutionState，并通过线程函数设置ExecutionState的“pc”。所以可以覆盖KLEE中的pthread函数，在Executor.cpp中的“executeInstruction”函数中拦截用户代码对pthread函数的调用。
要模拟多线程的执行，需要修改KLEE的searcher，用于从所有的ExecutionState向量中选择要执行的状态。
所以这是一项艰苦的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T17:12:01.010

截至 2010 年，KLEE 的基本版本不支持任何形式的并行，包括 pthread。但是 Raimondas Sasnauskas (rwth-aachen) 从 EPFL 获得了有关 dslab 项目的信息：

[https://mailman.cs.umd.edu/pipermail/otter-dev/2010-December/000435.html](https://mailman.cs.umd.edu/pipermail/otter-dev/2010-December/000435.html)

> > 当前版本的 KLEE 不支持任何类型的
> > 并行性——您必须自己实现/建模它。尽管如此，来自 EPFL 的人们已经实现了 pthread
> > 支持作为 KLEE 的扩展，并发表了一篇关于
> > 这个主题的好论文：
> > 
> > [http://dslab.epfl.ch/pubs/esd](http://dslab.epfl.ch/pubs/esd)

有存档链接：[http](http://web.archive.org/web/20100516044002/http://dslab.epfl.ch/pubs/esd) ://web.archive.org/web/20100516044002/http://dslab.epfl.ch/pubs/esd “执行综合：自动化软件调试技术”，Cristian Zamfir 和 George Candea。过程。第五届 ACM SIGOPS/EuroSys 欧洲计算机系统会议 (EuroSys)，法国巴黎，2010 年 4 月

2013 年，Cristian Cadar 又发了一篇文章[http://mailman.ic.ac.uk/pipermail/klee-dev/2013-January/000031.html](http://mailman.ic.ac.uk/pipermail/klee-dev/2013-January/000031.html)，指出 KLEE 不支持 pthread，并提到`Cloud9`KLEE 的扩展可以处理 pthreads：

> 目前，KLEE 对 C++ 的支持有限，不支持 pthread。但是，KLEE 的某些扩展可以处理这些方面，例如，用于 C++ 的 KLOVER 和用于 pthread 的 Cloud9。查看[http://klee.llvm.org/Publications.html](http://klee.llvm.org/Publications.html)了解更多信息。

# tfs - TFS 合并在解决方案（项目文件）中创建重复条目

> ID：14200484
> 
> 赞同：1
> 
> 时间：2013-01-07T16:57:45.647
> 
> 标签：tfs

我们正在使用 TF 服务。根据最佳实践，我们执行频繁的合并。

合并工具在处理我们的项目文件的合并方面做得不好。我们得到了视图、控制器，甚至我们的***PublishProfiles***文件夹的副本。

我很难相信 TFS 没有经过优化来处理像骗子这样微不足道的事情。我们的控制器、EDMX 文件和视图中的逻辑应该更复杂地合并，但处理得更好。

我们做错了什么吗？更具体地说，是否有 TFS 的选项或设置可以更好地处理此类问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:00:17.780

这是 Visual Studio 2010 附带的不太好的合并工具的一个已知问题，而此 Visual Studio 2012 有一个完全更新的合并工具，可以在 XML 文件之间进行上下文合并，这大大降低了这些类型问题出现的机会。由于您在 Visual Studio 2012 中看到了这一点，因此我很乐意看到几个出错的示例。自从升级到 Visual Studio 2012 以来，我没有遇到过重大问题。

作为最佳实践，我倾向于在添加新文件之前始终执行 Get-Latest。而且我总是在得到重新编译的解决方案后尽快签入。当您在同一个分支上工作时，这会减少出现这些问题的机会。但是，在两个分支之间进行合并时，您可能仍然会遇到这些类型的问题。

此外，[您可以为特定文件扩展名设置自定义合并工具](http://msdn.microsoft.com/en-us/library/ms181429.aspx)，而不是对所有文件类型使用 Visual Studio 2012 合并工具，这样您就可以使用任何商业或开源合并工具来代替默认的合并工具。那里有很多很好的例子：

*   [WinMerge](http://blog.paulbouwer.com/2010/01/31/replace-diffmerge-tool-in-visual-studio-team-system-with-winmerge/)
*   [超越比较](http://whyiamright.wordpress.com/2008/01/18/changing-the-diffmerge-program-used-by-visual-studio/)
*   [乌龟合并](https://stackoverflow.com/q/9313574/736079)
*   [P4合并](http://blog.zobie.com/2009/04/using-p4merge-with-team-foundation-server/)
*   [KDiff](http://stefanzvonar.com/2011/01/04/using-kdiff-for-your-tfs-comparison-and-merging-tool/)
*   [等等等等等等……](http://blogs.msdn.com/b/jmanning/archive/2006/02/20/diff-merge-configuration-in-team-foundation-common-command-and-argument-values.aspx)

您的里程可能会因不同的工具而异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T09:25:12.803

在一个只有 3 名开发人员的团队中，这个问题对 VS2013 和 TFS2013 影响很大。我能找到的最好办法是在设置菜单中禁用自动冲突解决。 [http://donovanbrown.com/post/I-dont-trust-2012-Auto-merge-but-it-does-it-automatically-.aspx](http://donovanbrown.com/post/I-dont-trust-2012-Auto-merge-but-it-does-it-automatically-.aspx)

# javascript - UIWebView Javascript 在函数调用之间保留变量值

> ID：14200485
> 
> 赞同：0
> 
> 时间：2013-01-07T16:57:50.993
> 
> 标签：javascript, ios, uiwebview

我正在使用 UIwebview 运行一些 javascript，我想在单击 iOS 本机按钮时在函数调用之间保留一个变量值。

我正在使用的代码被剪断。

```
var MyApp_SearchResultCount = 0;
var currSelected = 0;
var prevSelected = 0; 

function jump(howHigh){

    //this.prevVal = this.currentVal; 
    //this.currentVal = this.currentVal + 1; 

    //************** STARTS ****************//

    //alert(window.currSelected);

    //************** ENDS  *****************//

    prevSelected = currSelected;
    currSelected = currSelected + howHigh;
    alert("currSelected" + currSelected);
  } 
```

currSelected 始终保持为 1，与调用跳转方法的次数无关。

请帮忙谢谢djrecker

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:12:54.553

我可以让它增加执行以下操作：

1.  创建一个简单的 Webview 和它的属性
2.  为 i 创建一个 int 类型的属性
3.  创建一个被点击并执行以下方法的按钮

在您的情况下，增量发生在 javascript 代码中，但该状态不为类所知。您需要能够通过传递一些参数来创建动态 Javascript。

```
-(IBAction)runJS{ 
    NSString *javaScript = [NSString stringWithFormat:@"alert(%d)",self.i];

    NSString *string = [wv stringByEvaluatingJavaScriptFromString:javaScript];

    self.i=self.i+1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:01:41.883

```
-(IBAction)runJS{
    NSString *javaScript = [NSString stringWithFormat:@"function abcd(){var x=%i; return x;} abcd();",self.i];

    NSString *string = [wv stringByEvaluatingJavaScriptFromString:javaScript];

    self.i=self.i+1;

    NSLog(@"The returned value is %@",string);
} 
```

您实际上可以定义一个函数并调用它或其他任何方法。函数的返回值被捕获在返回字符串中。我添加了另一个答案，因为它不允许我在注释字段中正确格式化代码

# sql - 在 SQL 中使用位串（而不是整数）匹配位掩码

> ID：14200486
> 
> 赞同：4
> 
> 时间：2013-01-07T16:57:52.407
> 
> 标签：sql, postgresql, match, bitmask, bitstring

我在这里找到了一个很好的资源（ [比较 SQL 中的两个位掩码以查看是否有任何位匹配](https://stackoverflow.com/questions/143712/comparing-two-bitmasks-in-sql-to-see-if-any-of-the-bits-match) ），用于在 SQL 数据库中进行搜索，其中您使用位掩码存储具有多个属性的数据。但是，在示例中，所有数据都存储为整数，而 where 子句似乎仅适用于整数。

有没有一种简单的方法可以将非常相似的测试用例转换为使用完整的位串？因此，而不是像这样的例子：

```
with test (id, username, roles)
AS
(
    SELECT 1,'Dave',1
    UNION SELECT 2,'Charlie',3
    UNION SELECT 3,'Susan',5
    UNION SELECT 4,'Nick',2
)
select * from test where (roles & 7) != 0 
```

而是有类似的东西：

```
with test (id, username, roles)
AS
(
    SELECT 1,'Dave',B'001'
    UNION SELECT 2,'Charlie',B'011'
    UNION SELECT 3,'Susan',B'101'
    UNION SELECT 4,'Nick',B'110'
)
select * from test where (roles & B'001') != 0 
```

我可以来回转换，但使用实际的位串更容易可视化。对于我的简单转换（上图），我收到一个错误，即运算符不适用于位串。有没有另一种方法来设置它会起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T21:25:21.387

一种方法是[`bit string`](http://www.postgresql.org/docs/current/interactive/datatype-bit.html)在表达式的右侧也使用 a ：

```
WITH test (id, username, roles) AS (
   VALUES
     (1,'Dave',B'001')
    ,(2,'Charlie',B'011')
    ,(3,'Susan',B'101')
    ,(4,'Nick',B'110')
   )
SELECT *, (roles & B'001') AS intersection
FROM   test
WHERE  (roles & B'001') <> B'000'; 
```

或者你可以`integer 0`投到`bit(3)`

```
...
WHERE  (roles & B'001') <> 0::bit(3); 
```

您可能对此相关答案感兴趣，该答案演示了在和之间`boolean`进行转换的多种方法：[我可以在 PostgreSQL 中将一堆布尔列转换为单个位图吗？](https://stackoverflow.com/questions/9051886/can-i-convert-a-bunch-of-boolean-columns-to-a-single-bitmask-in-postgresql/9053568#9053568)`bit string``integer`

请注意，将数据存储为`integer`可以节省一些空间。最多 32 位信息`integer`需要**4 个字节，而 - 我**[在所述位置引用手册](http://www.postgresql.org/docs/current/interactive/datatype-bit.html)：

> 位串值每组 8 位需要**1 个字节，****加上 5 或 8 个字节的开销**，具体取决于字符串的长度 [...]

# visual-studio-2010 - 如何编辑此代码以显示添加到列表框中的项目的文件名而不是文件 URL？

> ID：14200488
> 
> 赞同：0
> 
> 时间：2013-01-07T16:57:52.303
> 
> 标签：visual-studio-2010, media-player

我正在使用 VBE 2010

该代码是

```
Private Sub AddToPlaylistToolStripMenuItem_Click(ByVal sender As System.Object, 
                                                 ByVal e As System.EventArgs) 
    Handles AddToPlaylistToolStripMenuItem.Click
    ListBox1.Items.Add(AxWindowsMediaPlayer1.URL)
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:18:42.477

这与另一个帖子的概念相同。查看下面的链接。基本上，您需要的是 Syste.IO.Path.GetFileName(string)。

[从 C# 中的 URI 字符串获取文件名](https://stackoverflow.com/questions/1105593/get-file-name-from-uri-string-in-c-sharp)

# java - 集合 - Iterator.remove() 与 Collection.remove()

> ID：14200489
> 
> 赞同：11
> 
> 时间：2013-01-07T16:58:02.370
> 
> 标签：java, collections, iterator, concurrentmodification

据孙，

> “Iterator.remove 是在迭代期间修改集合的唯一安全方法；如果在迭代过程中以任何其他方式修改底层集合，则行为未指定。”

我有两个问题：

1.  是什么让这个操作“Iterator.remove()”比其他操作更稳定？
2.  如果“Collection.remove()”方法在大多数用例中都没有用，为什么还要提供它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-07T17:00:19.220

首先，`Collection.remove()`非常好用。它适用于很多用例，可能比`Iterator.remove()`.

*但是，后者解决了一个特定问题：它允许您在迭代*集合时修改集合。

解决的问题`Iterator.remove()`如下图所示：

```
 List<Integer> l = new ArrayList<Integer>(Arrays.asList(1, 2, 3, 4));
    for (int el : l) {
        if (el < 3) {
            l.remove(el);
        }
    } 
```

此代码无效，因为`l.remove()`在迭代过程中调用了 over `l`。

下面是正确的写法：

```
 Iterator<Integer> it = l.iterator();
    while (it.hasNext()) {
        int el = it.next();
        if (el < 3) {
            it.remove();
        }
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-07T17:02:46.337

如果您正在迭代集合并使用：

```
Collection.remove() 
```

您可能会收到运行时错误（特别是 ConcurrentModifcationException），因为您正在更改先前用于构造完成循环所需的显式调用系列的对象的状态。

如果您使用：

```
Iterator.remove() 
```

您告诉运行时您想要更改基础集合并重新评估完成循环所需的显式调用系列。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-07T16:59:38.407

正如您引用的文档明确指出的那样，

> **Iterator.remove 是在迭代期间**修改集合的唯一安全方法

 **（重点补充）

使用 am 迭代器时，您不能修改集合，除非通过调用`Iterator.remove()`.

如果您不迭代集合，您将使用`Collection.remove()`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T17:02:15.527

> 是什么让这个操作“Iterator.remove()”比其他操作更稳定？

这意味着迭代器知道您删除了该元素，因此它不会产生 ConcurrentModifcationException。

> 如果“Collection.remove()”方法在大多数用例中都没有用，为什么还要提供它？

通常你会使用 Map.remove() 或 Collection.remove() 因为这比遍历每个对象更有效。如果您在经常迭代时删除，我怀疑您应该使用不同的集合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T17:04:06.280

1.  只是一种设计选择。可以指定不同的行为（即迭代器必须跳过由 Collection.remove() 删除的值），但这会使集合框架的实现更加复杂。所以选择不指定它。

2.  它非常有用。如果您知道要删除的对象，为什么要迭代？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-11T05:48:44.733

据我了解， Collection.remove(int index) 也将返回已删除的对象。Iterative.remove() 不会。**

# c - 如何对字符串使用 switch 和 case

> ID：14200500
> 
> 赞同：0
> 
> 时间：2013-01-07T16:58:31.967
> 
> 标签：c, macros

基于对以下问题的回答： [如何使用 C 将具有 2 个变量的 IF 语句转换为 switch 函数？](https://stackoverflow.com/questions/14160392/how-do-i-transform-an-if-statement-with-2-variables-onto-a-switch-function-using/14160889#14160889)

我想开发`SWITCH`和`CASE`宏来使用它（如`switch`和`case`）作为字符串。

像这样的东西：

```
char buf[256];

SWITCH (buf) {
    CASE ("abcdef"):
        printf ("A1!\n");
        BREAK;
    CASE ("ghijkl"):
        printf ("B1!\n");
        BREAK;
    DEFAULT:
        printf ("D1!\n");
        BREAK;
} 
```

什么是`SWITCH`and`CASE`和`BREAK`and`DEFAULT`在这里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:27:57.090

如果你*真的*想要它，那么，它是：

```
#include <string.h>
#include <stdio.h>
const char *kludge;
#define evilmacro(line) label##line
#define fakelabel(line) evilmacro(line)
#define SWITCH(str) while((kludge = (str)))
#define CASE(str) if(strcmp(kludge, str) == 0) { fakelabel(__LINE__)
#define BREAK break; /* out of while loop */ }
#define DEFAULT if(1) { fakelabel(__LINE__)
int main(int argc, char *argv[]) {
SWITCH (argv[1]) {
    CASE ("abcdef"):
        printf ("A1!\n");
        BREAK;
    CASE ("ghijkl"):
        printf ("B1!\n");
        BREAK;
    DEFAULT:
        printf ("D1!\n");
        BREAK;
}
return 0;
} 
```

摆脱未使用的标签留给读者作为练习:)

编辑：fwiw，我真正要做的是表驱动代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T16:58:31.967

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define SWITCH(S) char *_S = S; if (0)
#define CASE(S) } else if (strcmp(_S, S) == 0) {switch(1) { case 1
#define BREAK }
#define DEFAULT } else {switch(1) { case 1

int main()
{
    char buf[256];

    printf("\nString - Enter your string: ");
    scanf ("%s", buf);

    SWITCH (buf) {
        CASE ("abcdef"):
            printf ("B1!\n");
            BREAK;
        CASE ("ghijkl"):
            printf ("C1!\n");
            BREAK;
        DEFAULT:
            printf ("D1!\n");
            BREAK;
    }
} 
```

# mysql - 用于图的 MySQL 查询

> ID：14200504
> 
> 赞同：5
> 
> 时间：2013-01-07T16:58:45.503
> 
> 标签：mysql, graph

我有以下查询：

```
SELECT GVA12.FECHA_EMIS, GVA12.COD_VENDED, sum(GVA12.IMPORTE)
FROM GVA12
WHERE Month(GVA12.FECHA_EMIS)=Month(curDate())
  AND Year(GVA12.FECHA_EMIS)=Year(curDate())
  AND GVA12.COD_VENDED="EX"
  AND GVA12.T_COMP="FAC"
GROUP BY GVA12.FECHA_EMIS 
```

这是每月图表。我有两个问题。一，我怎样才能将月份的所有日期显示为零（没有任何销售的日期），二，有没有办法让这些值相加，所以最后一个值是所有的总和价值。

编辑：@Bluefeet 使用您的查询，我创建了以下内容，

```
SELECT Month(Days.DMY), Year(Days.DMY), GVA12.COD_VENDED, sum(GVA12.IMPORTE)
FROM Days
left join GVA12
    on Month(Days.DMY) = Month(GVA12.FECHA_EMIS)
    and Year(Days.DMY) = Year(GVA12.FECHA_EMIS)
WHERE Month(GVA12.FECHA_EMIS)=Month(curDate())
  AND Year(GVA12.FECHA_EMIS)=Year(curDate())
  AND GVA12.COD_VENDED="EX"
  AND GVA12.T_COMP="FAC"
GROUP BY Month(Days.DMY), Year(Days.DMY) WITH ROLLUP 
```

我得到了附加的结果（截图）。 ![在此处输入图像描述](../Images/6b206997605edc59d3b4701a8e968c7d.png)

它并没有按照我的意愿显示一个月中的所有日子。我能做些什么？

编辑#3

它现在可以工作，但我想添加另一个过滤器。此过滤器在此处添加[http://sqlfiddle.com/#!2/9d46c/1](http://sqlfiddle.com/#!2/9d46c/1)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T17:05:33.640

要获得总数，您可以使用`GROUP BY WITH ROLLUP`which 应该为您提供所有日期的总数：

```
SELECT GVA12.FECHA_EMIS, GVA12.COD_VENDED, sum(GVA12.IMPORTE)
FROM GVA12
WHERE Month(GVA12.FECHA_EMIS)=Month(curDate())
  AND Year(GVA12.FECHA_EMIS)=Year(curDate())
  AND GVA12.COD_VENDED="EX"
  AND GVA12.T_COMP="FAC"
GROUP BY GVA12.FECHA_EMIS WITH ROLLUP 
```

至于不存在的返回日期，SO上有很多问题可以回答，包括以下内容。有时在 MySQL 中创建要加入的表更容易：

[从日期范围生成天数](https://stackoverflow.com/questions/2157282/generate-days-from-date-range)

[获取两个日期之间的日期列表](https://stackoverflow.com/questions/510012/get-a-list-of-dates-between-two-dates)

编辑#1：如果你有一个带有日期的表格，那么你可以使用类似于这样的东西：

```
SELECT Month(d.yourDateCol), Year(d.yourDateCol), g.COD_VENDED, sum(g.IMPORTE)
FROM dates d
left join GVA12 g
    on Month(d.yourDateCol) = Month(GVA12.FECHA_EMIS)
    and Year(d.yourDateCol) = Year(GVA12.FECHA_EMIS)
WHERE Month(g.FECHA_EMIS)=Month(curDate())
  AND Year(g.FECHA_EMIS)=Year(curDate())
  AND g.COD_VENDED="EX"
  AND g.T_COMP="FAC"
GROUP BY Month(d.yourDateCol), Year(d.yourDateCol) WITH ROLLUP 
```

编辑#2：没有看到您的完整表结构或一些示例数据，这里是一个正在运行的查询版本：

```
select month(d.dmy) Month, 
  year(d.dmy) Year, 
  coalesce(sum(g.Importe), 0) TotalImporte
from dates d
left join GVA12 g
  on month(d.dmy) = month(g.FECHA_EMIS)
  and year(d.dmy) = year(g.FECHA_EMIS)
group by month(d.dmy), year(d.dmy)  WITH ROLLUP 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/13540/7)。这将返回表中每个月/年的月/年，`dates`即使它在`GVA12`表中不存在，

编辑＃3：如果您想要运行总数，而不仅仅是最终总数，那么您应该能够使用以下内容：

```
SET @running_total := 0;

SELECT month(Days.DMY) Month, 
  Year(Days.DMY) Year, 
  Date(Days.DMY) Date,
  g.COD_VENDED,
  @running_total := @running_total + Coalesce(TotalImport, 0) as TotalImport
FROM Days
left join
(
  select FECHA_EMIS,
    COD_VENDED,
    sum(IMPORTE) TotalImport
  from GVA12
  group by Date(FECHA_EMIS), Year(FECHA_EMIS)
) g
  on date(Days.DMY) = date(g.FECHA_EMIS)
  and g.COD_VENDED='EX'
  and Month(g.FECHA_EMIS)=Month(curDate())
  and Year(g.FECHA_EMIS)=Year(curDate())
WHERE month(days.dmy)=Month(curDate()) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/1db7e/66)

结果是：

```
| MONTH | YEAR |                           DATE | COD_VENDED | TOTALIMPORT |
----------------------------------------------------------------------------
|     1 | 2013 | January, 01 2013 00:00:00+0000 |     (null) |           0 |
|     1 | 2013 | January, 02 2013 00:00:00+0000 |         EX |        1000 |
|     1 | 2013 | January, 03 2013 00:00:00+0000 |         EX |        4000 |
|     1 | 2013 | January, 04 2013 00:00:00+0000 |     (null) |        4000 |
|     1 | 2013 | January, 05 2013 00:00:00+0000 |     (null) |        4000 |
|     1 | 2013 | January, 06 2013 00:00:00+0000 |     (null) |        4000 |
|     1 | 2013 | January, 07 2013 00:00:00+0000 |     (null) |        4000 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:03:53.220

几个想法：

一-您需要一些数据值进行比较-因此您可以建立一个新表来静态保存所有日期-然后对其进行外部联接以确保获得零。

二 - 我不确定 mysql - 但在 Oracle 中，这是一个 LAG 函数。也许这是进一步研究的有用指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:18:00.390

看看这个链接，解释了如何列出两个日期之间的所有日期 [获取两个日期之间的日期列表](https://stackoverflow.com/questions/510012/get-a-list-of-dates-between-two-dates)

您可以使用以下列出，但我认为上面的链接中有更好的解决方案：

```
select a.Date 
from (
    select curdate() - INTERVAL (a.a + (10 * b.a) + (100 * c.a)) DAY as Date
    from (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as a
    cross join (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as b
    cross join (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as c
) a
where a.Date between '2012-12-01' and '2012-12-31'; 
```

# python - 在 PyQt 中与 QLabel 并发

> ID：14200505
> 
> 赞同：2
> 
> 时间：2013-01-07T16:58:53.147
> 
> 标签：python, multithreading, pyqt, pyqt4

我有我的 python 应用程序，它使用 PyQt GUI。它应用程序有一些 I/O 操作，我想在单独的线程中运行。*每个*线程启动时，应将消息写入应用程序主窗口状态栏，当*最后一个*线程完成时，应清除状态栏消息。我如何通过 QThread 处理线程数？

这是代码示例：

```
import sys, time
from PyQt4 import QtCore, QtGui
from functools import partial

def io_emulator(sleep_seconds):
    print 'We will sleep for %s seconds' % str(sleep_seconds)
    time.sleep(sleep_seconds)

class IOThread(QtCore.QThread):
    def __init__(self, func):
        QtCore.QThread.__init__(self)
        self.io_func = func

    def run(self):
        self.io_func()

class m_Window(QtGui.QWidget):
    def __init__(self):
        super(m_Window, self).__init__()

        self.initUI()

    def initUI(self):
        self.thread_button = QtGui.QPushButton("Thread", self)
        self.thread_button.move(30, 10)
        self.spinbox = QtGui.QSpinBox(self)
        self.spinbox.move(30, 50)
        self.stat_label = QtGui.QLabel("", self)
        self.stat_label.setGeometry(QtCore.QRect(200, 200, 150, 14))
        self.stat_label.move(30,90)

        self.setWindowTitle('Threads')
        self.show()

        self.thread_button.clicked.connect(self._sleeper)

    def _sleeper(self):
        seconds = int(self.spinbox.text())
        stat_str = 'Sleeping %s seconds' % str(seconds)

        io_func = partial(io_emulator, seconds)
        set_status_f = partial(self.set_status_msg, stat_str)

        self.thread =  IOThread(io_func)
        self.thread.started.connect(set_status_f)
        self.thread.finished.connect(self.clear_status_msg)

        self.thread.start()

    def set_status_msg(self, msg):
        self.stat_label.setText(msg)

    def clear_status_msg(self):
        self.stat_label.clear()

def main():
    app = QtGui.QApplication(sys.argv)
    m = m_Window()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

我想要，只有在最后一个线程结束时才会清除该消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:06:40.863

除了主线程之外，您不能从任何线程调用 QWidget 函数。如果您希望另一个线程触发 GUI 操作，那么它们应该通过发出连接到您的主线程的信号来进行通信：

```
def someFunc():
    return "message"

class IOThread(QtCore.QThread):

    statusUpdate = QtCore.pyqtSignal(str)

    def __init__(self, func):
        QtCore.QThread.__init__(self)
        self.io_func = func

    def run(self):
        msg = self.io_func()
        self.statusUpdate.emit(msg) 
```

然后在你的主线程中，将 io 线程连接到状态标签或一些中间处理程序：

```
io_thread = IOThread(someFunc)
io_thread.statusUpdate.connect(self.status_label.setText) 
```

这将创建一个排队连接，将调用放入主线程的事件循环中执行。

# python - 诅咒 newwin 和 subwin 的区别

> ID：14200506
> 
> 赞同：9
> 
> 时间：2013-01-07T16:58:54.400
> 
> 标签：python, ncurses, curses

我似乎无法找到有关 curses.newwin 和 curses.subwin 之间区别的任何信息

你知道任何？

我希望将屏幕分为 3 个不同的部分，并具有不同的更新时间（并非每次按键都必须更新所有内容）。这是正确的方向吗？

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T18:28:51.803

Docu 不适用于 Python，但可以帮助您。

> 调用**newwin()**创建并返回一个指向具有给定行数和列数的新窗口的指针。窗口的左上角位于 begin_y 行，begin_x 列。如果 nlines 或 ncols 为零，则默认为 LINES-begin_y 和 COLS-begin_x。通过调用 newwin(0,0,0,0) 创建一个新的全屏窗口。
> 
> 调用**subwin()**创建并返回一个指向具有给定行数、nlines 和列数、ncols 的新窗口的指针。窗口位于屏幕上的位置 (begin_y, begin_x)。（这个位置是相对于屏幕的，而不是相对于窗口原点的。）窗口是在窗口原点的中间制作的，因此对一个窗口所做的更改会影响两个窗口。子窗口与窗口原点共享内存。使用此例程时，必须先在 orig 上调用 touchwin() 或 touchline()，然后再在子窗口上调用 wrefresh()。

[http://www.mkssoftware.com/docs/man3/curs_window.3.asp](http://www.mkssoftware.com/docs/man3/curs_window.3.asp)

# git - Gerrit- 推送到 gerrit 时出现 Git 推送错误（n/a（解包器错误））

> ID：14200509
> 
> 赞同：1
> 
> 时间：2013-01-07T16:59:02.003
> 
> 标签：git, github, push, gerrit

我是 android 开发人员，所以我为我的团队设置了 Gerrit Code Review 和 Github！因此，经过大量的努力，我将我的 github 项目添加到了 gerrit 中，并且还进行了复制工作，但我无法推送这个 repo。所有其他回购都被很好地推送。

我克隆了我的 github 存储库，然后添加了我的 gerrit 项目的 ssh 链接，`git remote add *`然后我输入`git push gerrit HEAD:refs/for/ics` 了但是我得到了一些解包错误

这是整个日志：

```
keyur@keyur-Inspiron-N4010:~/android_device_lge_p350$ git push gerrit HEAD:refs/for/ics
Counting objects: 7, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (5/5), done.
Writing objects: 100% (5/5), 526 bytes, done.
Total 5 (delta 3), reused 0 (delta 0)
fatal: Unpack error, check server log  
remote: Resolving deltas: 100% (3/3)
error: unpack failed: error Missing unknown c605ed77d4a43b8389c7bb544c3a5834cf0f64cf
To ssh://keyur2maru@review.pecancm.insomnia247.nl:6117/android_device_lge_p350.git
 ! [remote rejected] HEAD -> refs/for/ics (n/a (unpacker error))
error: failed to push some refs to 'ssh://keyur2maru@review.pecancm.insomnia247.nl:6117/android_device_lge_p350.git'
keyur@keyur-Inspiron-N4010:~/android_device_lge_p350$ 
```

它失败了:(我可以提交任何其他回购:(但无法完成这项工作:(

我的配置文件：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = git@github.com:PecanCM/android_device_lge_p350.git
[branch "cm-10.1"]
    remote = origin
    merge = refs/heads/cm-10.1
[remote "gerrit"]
    url = ssh://keyur2maru@review.pecancm.insomnia247.nl:6117/android_device_lge_p350.git
    fetch = +refs/heads/*:refs/remotes/gerrit/*
[branch "ics"]
    remote = origin
    merge = refs/heads/ics 
```

我的 Github 仓库：[https ://github.com/PecanCM/android_device_lge_p350](https://github.com/PecanCM/android_device_lge_p350)

我的 Gerrit 服务器：[http ://review.pecancm.insomnia247.nl](http://review.pecancm.insomnia247.nl)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T10:42:34.003

如果您可以访问 gerrit 服务器，请检查您是否已授予对 gerrit 的 git 文件夹足够的权限。

# google-apps-script - ScriptDb查询日期并按降序排序

> ID：14200510
> 
> 赞同：1
> 
> 时间：2013-01-07T16:59:04.523
> 
> 标签：google-apps-script

我从 Script Db 运行以下查询。我将它正在寻找的日期存储为“M/d/yyyy”，作为一个字符串。查找很好并返回我需要的所有内容，但排序顺序不是按月或按年。

```
var result = db.query({"p1arSn":e.parameter.search}).sortBy("maintAccomplishedDate", db.DESCENDING); 
```

任何指导表示赞赏谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:58:21.427

您不能使用 sortBy 对存储为字符串的日期进行排序。你的选择是

1.  检索未排序的数据，将其复制到数组中，然后自己使用 array.sort() ，或者
2.  更改您在 ScriptDb 中存储的内容。

选项 1 更简单，但如果您要检索分页或有限数据，那么在检索后进行排序不是您想要的。

选项 2 有点困难 - 在 ScriptDb 中存储日期时，存储时间戳（日期有一个`getTime()`给你的）。这些是可以排序的数字。

您可以从您的日期字符串之一中获取时间戳，如下所示：

```
var timestamp = new Date('3/5/1983').getTime()  // 415688400000 
```

您可以像这样取回原始字符串：

```
var d = new Date(415688400000);
var string = [d.getMonth() + 1, d.getDate(), d.getYear()].join('/'); 
```

# ruby-on-rails - RMagick，Tempfile，Paperclip：如何将大尺寸和小kbs的图像文件保存为缩略图？

> ID：14200511
> 
> 赞同：2
> 
> 时间：2013-01-07T16:59:05.673
> 
> 标签：ruby-on-rails, ruby, paperclip, rmagick, temporary-files

我有一个 Rails rake 任务正在处理一批图像。它去除白色背景（使用 RMagick），用透明层替换它，将其写入临时文件，然后将其保存为 Amazon S3 上的 PNG（使用 Paperclip）。

它适用于大部分图像。但是，它遇到了至少 1 张图像的错误。有人可以帮我弄清楚为什么以及如何解决它吗？

**代码示例：**

```
require 'RMagick'
require 'tempfile'
include Magick

task :task_name => :environment do
   x = Item.find(128)  # image 128 is the one giving me trouble
   sourceImage = Image.read(x.image_link_hires)
   processedImage = sourceImage[0].transparent("white")

   tempImageFile = Tempfile.new(["processed_image",".png"])
   processedImage.write("png:" + tempImageFile.path)
   x.image_transparent = tempImageFile
   x.save!
end 
```

**错误信息：**

> 耙中止！验证失败：图像透明 C:/Users/Roger/AppData/Local/Temp/processed_image20130107-8640-1ck71i820130107-8640-i6p91w.png 无法被“识别”命令识别。图像透明 C:/Users/Roger/AppData “识别”命令无法识别 /Local/Temp/processed_image20130107-8640-1ck71i820130107-8640-i6p91w.png。

此消息在运行最后一行（保存操作）时出现。

**小文件的临时文件问题？**

我认为该错误与 Tempfile 实际上没有将文件写入临时路径有关。此错误可能与小文件大小有关？它遇到问题的特定图像通常具有大量空白，因此对于 800x800 像素的图像，处理后生成的文件大小约为 30k。

我如何验证是否是这种情况？如果是，我该如何解决？

**其他观察：**

1.  当我将故障图像写入普通文件（而不是 Tempfile）时，它会成功保存在本地。
2.  该任务适用于其他图像，这些图像往往更大（~1-2MB）
3.  之后`processedImage.write`，我检查了`tempImageFile.size`。它说它是预期的30kb。
4.  当我在 rake 任务运行时观察临时文件目录时，我可以看到任务成功运行其他图像时正在创建的临时文件。文件似乎在`processedImage.write`运行时出现。但是，对于故障图像，我没有看到任何临时文件被创建。

感谢您的任何建议。

**2013 年 1 月 7 日更新**

我对此进行了更多调查。我重新运行了上面的#1，但尝试使用 Paperclip 保存到 S3。这产生了相同的错误消息。

所以现在我认为问题在于这是一个字节数（32kb）的小文件，但具有不错的高度和宽度（800x800）。Paperclip 正在尝试保存它的缩略图版本，即 90x90。通常，这会生成小于原始文件大小 1% 的文件大小，我认为这是错误的根源。

如果有人对此有一个优雅的解决方法/解决方案，我将不胜感激。

# python - 使用 xlib 在屏幕顶部绘制

> ID：14200512
> 
> 赞同：9
> 
> 时间：2013-01-07T16:59:07.520
> 
> 标签：python, unix, drawing, xlib, xorg

我想在屏幕上所有窗口的顶部绘制一些图元。我在 C 中找到了一些代码并尝试将其移植到使用 python 的 xlib：

```
from Xlib.display import Display
from Xlib import X
from Xlib import protocol

display = Display(':0')
root = display.screen().root
gc = root.create_gc()
root.fill_rectangle(gc, 100, 100, 500, 500) 
```

但是屏幕上什么也没有出现（但是，分配了根窗口：在它工作后抓取键盘）。如何正确执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T00:46:40.840

您可以在根窗口上绘图 - 您的代码可能有效，但根窗口可能会被某种桌面窗口（nautilus、kde 桌面等）遮挡。尝试在不运行任何程序的情况下启动 X 会话，您将看到更新（您可以使用 Xephyr 或 Xnest）

另一种方法是创建[透明窗口](https://stackoverflow.com/questions/3645632/how-to-create-a-window-with-a-bit-depth-of-32)，使其位于最顶部并在其表面上绘制。您需要手动将鼠标事件传播到底层窗口。

要在所有窗口上实际绘制，您需要创建简单的[复合管理器](http://www.talisman.org/~erlkonig/misc/x11-composite-tutorial/)，或者如果已经有 CM 正在运行，请使用它的覆盖窗口。

从[复合协议规范](http://www.x.org/releases/X11R7.7/doc/compositeproto/compositeproto.txt)：

> 该协议的 0.3 版添加了 Composite Overlay Window，它为合成管理器提供了一个可以在不受干扰的情况下在其上绘制的表面。此窗口始终位于普通窗口之上，并且始终位于屏幕保护程序窗口之下。它是一个 InputOutput 窗口，其宽度和高度是屏幕尺寸。它的视觉是根视觉，其边框宽度为零。尝试使用复合扩展对其进行重定向将被忽略。此窗口不会出现在 QueryTree 请求的回复中。它也是一个覆盖重定向窗口。最后两个特性使它对窗口管理器和其他 X11 客户端不可见。访问此窗口的 XID 的唯一方法是通过 CompositeGetOverlayWindow 请求。最初，复合叠加窗口未映射。
> 
> CompositeGetOverlayWindow 返回复合叠加窗口的 XID。如果窗口还没有被映射，它被这个请求映射。当所有调用此请求的客户端都终止了它们的 X11 连接时，该窗口将被取消映射。
> 
> 复合管理器可以直接渲染到复合覆盖窗口，或者它们可以将其他窗口重新设置为该窗口的子窗口并渲染到这些窗口。多个客户端可以渲染到复合覆盖窗口，创建它的子窗口，重塑它，重新定义它的输入区域，但是这些客户端遵循的具体仲裁规则在本规范中没有定义；这些策略应由客户自己定义。

# spring-data - 如何使用 Spring Data 中的 exists 关键字来检查实体是否存在？

> ID：14200513
> 
> 赞同：14
> 
> 时间：2013-01-07T16:59:09.697
> 
> 标签：spring-data

如何在查询方法中使用 Spring Data 中的“exists”关键字？

我想要一个这样的方法：

```
public interface ProfileRepository extends JpaRepository<Profile, Long> {
  boolean existsByAttribute(String attribute);
} 
```

其中*Attribute*是*Profile*的一个字段。

一种解决方法是使用[custom-implementation](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.custom-implementations)。但[附录](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#d0e1910)将存在定义为关键字。有人可以给我一个如何使用这个关键字的例子吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T08:28:01.347

记录的关键字旨在与属性参考结合使用。因此，在这种情况下的语义`EXISTS`是它检查属性是否存在。请注意，文档的一部分是从 Spring Data Commons 中提取的，并且在那里列出的关键字并不意味着 Spring Data JPA 支持它（在您链接的部分的第一段中表示）。`Exists`Spring Data JPA 不支持它，因为它仅在 MongoDB 中才有意义，例如，不完全存在的字段与具有逻辑`null`值的可用字段之间存在差异。

因此，您要查找的内容似乎`(Is)Null`与当前限制返回对象的关键字有关，并且您必须检查返回的列表中的内容。有一张[票](https://jira.springsource.org/browse/DATACMNS-89)可以添加对派生查询方法的预测的支持，您可能希望遵循这些方法以获得进一步的进展。

# asp.net - asp.net + 将 DataSet 绑定到已绑定的 Listview

> ID：14200514
> 
> 赞同：1
> 
> 时间：2013-01-07T16:59:10.643
> 
> 标签：asp.net, listview

基本上我想在这里实现的是批量显示更多项目，就像每个视频中的 YouTube 评论会话一样，大约有 10 条评论开始显示，下面有一个“显示更多”按钮，点击时分批加载 10 条额外评论之上。任何人都知道如何解决这个问题？

不确定这是否正确，但我现在打算使用 DataSets 再次将其他记录绑定到我的 Listview，而不提取已经绑定的数据。

目前，我正在将我的第一组记录与一个数据集绑定，该数据集填充了来自我的 SQL Server 的数据，如下所示：

```
 DataSet ds = activityBll.GetActivityAttendees(activityId);
  DataTable dt = ds.Tables[0];
  uilvEventParticipants.DataSource = dt;
  uilvEventParticipants.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:03:15.093

最简单的方法是按照您的建议进行操作，并不断从越来越远的过去获取更多记录。当你重新绑定时，你会遇到越来越多的延迟，如果你允许用户对评论进行更改，你将不得不进行大量的回发来处理这些。如果你这样做，你应该看看 UpdatePanels。

最优雅的方法是使用 jQuery 或类似的 Ajax 技术来获取额外的记录并将它们添加到 HTML 表（不一定是 ListView）的底部，而无需刷新页面。这个板上有很多关于这样做的问题。

# php - Controller::detect() 在 Laravel 4 中未定义

> ID：14200516
> 
> 赞同：7
> 
> 时间：2013-01-07T16:59:12.517
> 
> 标签：php, laravel, laravel-4

尝试通过添加以下内容在 Laravel 4 (Illuminate) 中注册所有控制器路由时收到错误消息：

```
Route::controller(Controller::detect()); 
```

对我`routes.php`

错误 ：

```
Error: Call to undefined method Illuminate\Routing\Controllers\Controller::detect() in C:\wamp\www\travless\app\routes.php line 13 
```

我想他们更改了函数名称，但我不知道在哪里可以找到它，因为它仍然是 alpha 版本并且没有我知道的文档。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-07T17:03:56.513

由于不同文件系统的行为不一致，该函数已在 Laravel 4 中删除。注册控制器的正确方法应该是明确定义您希望在路由文件中使用的每个控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T11:08:37.163

您需要在 routes.php 文件中手动注册每个控制器

```
Route::controller('users', 'UsersController'); 
```

第一个参数代表要响应的 URL，第二个是控制器的类名

# ios - iOS 下载的 JSON 被缓存，如何防止？

> ID：14200517
> 
> 赞同：0
> 
> 时间：2013-01-07T16:59:20.980
> 
> 标签：ios, caching, cordova

我创建了一个在启动时下载 json 文件的应用程序（适用于 iOS 6）。当应用程序启动时会发生这种情况，因此它会运行最新的内容。

不知何故，JSON 被缓存了，应用程序使用新下载的版本之上的旧缓存版本。

当我从 Library/Caches// （在模拟器中）删除 cache.db 时，它使用新的 JSON 文件。所以我想知道如何防止 JSON 保存在这个 cache.db 中或者如何删除或清空它？

我一直在寻找年龄。

谢谢

顺便说一句，该应用程序是用 phonegap 制作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:38:18.450

我不熟悉 Phonegap 但在 iOS 中，`- (NSCachedURLResponse *)connection:(NSURLConnection *)connection willCacheResponse:(NSCachedURLResponse *)cachedResponse`如果您不想缓存下载的数据（如果您正在使用`NSURLConnection`下载），您可以实现该方法并返回 nil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:40:19.920

通过以下[这个](https://stackoverflow.com/q/12796318/1276002)SO 问题，这里的简单想法是禁用网络服务器级别的缓存并在 URL 中使用时间戳。

# html - HTML5 doctype 为 IE10 PP2 而不是 Chrome

> ID：14200524
> 
> 赞同：0
> 
> 时间：2013-01-07T16:59:38.883
> 
> 标签：html, iis, iis-7.5

我有一个简单的 HTML5 页面。

```
<!DOCTYPE html>
<html>
Test
</html> 
```

在我的本地 IIS 上，IE 10 PP2 和 Chrome 可以正常返回此页面。文档类型在标题中。

但是当我在远程服务器上从我们的 IIS 7.5 上提供这个页面时，Chrome 可以工作，但 IE 10 PP2 的文档类型在响应中被注释掉了。

```
<!-- DOCTYPE html --> 
```

我的服务器是否缺少会导致这种情况发生的更新？

（我使用 VS 2012 制作了简单的测试页面，具有真正的 HTML 5 功能，例如在 IE 10 和 Chrome 中本地工作的“占位符”属性，机器人仅在我们服务器的 Chrome 中。）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:35:29.990

将此添加到我的 web.config 会阻止 IE 在本地 Intranet 上以兼容模式呈现。

```
<system.webServer>
<httpProtocol>
  <customHeaders>
    <clear />
    <add name="X-UA-Compatible" value="IE=edge" />
  </customHeaders>
</httpProtocol>
</system.webServer> 
```

# spring - Spring Tomcat permgen 问题

> ID：14200526
> 
> 赞同：1
> 
> 时间：2013-01-07T16:59:43.710
> 
> 标签：spring, tomcat

嗨，我的应用程序在 tomcat（和 glassfish）上出现了 permgen 错误，我知道它们是由 ClassLoader 挂在热部署之间的引用上引起的。

我想追查内存泄漏，但以前没有做过，我认为一个好的明星会解决我重新部署时tomcat吐出的以下问题：

```
SEVERE: The web application [] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
06-Jan-2013 19:47:08 org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [Resource Destroyer in BasicResourcePool.close()] but has failed to stop it. This is very likely to create a memory leak. 
```

我想我需要在一些 spring 销毁处理程序中杀死这些线程，但我不确定如何找到销毁它们的句柄？

干杯! NFV

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:21:34.153

我们使用 a`ServletContextListener`来取消注册 JDBC 驱动程序。

**web.xml**

```
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
...
  <listener>
    <listener-class>ShutdownListener</listener-class>
  </listener> 
```

**关机监听器**

```
public class ShutdownListener implements ServletContextListener {
  private final Logger logger = LoggerFactory.getLogger(ShutdownListener.class);

  @Override
  public void contextInitialized(ServletContextEvent sce) {
    logger.info("Context initialized.");
  }

  @Override
  public void contextDestroyed(ServletContextEvent sce) {
    deregisterJdbcDrivers();
    // more clean-up tasks here
  }

  private void deregisterJdbcDrivers() {
    final Enumeration<Driver> drivers = DriverManager.getDrivers();
    while (drivers.hasMoreElements()) {
      final Driver driver = drivers.nextElement();
      if (this.getClass().getClassLoader().equals(getClass().getClassLoader())) {
        try {
          DriverManager.deregisterDriver(driver);
          logger.info("Deregistered '{}' JDBC driver.", driver);
        } catch (SQLException e) {
          logger.warn("Failed to deregister '{}' JDBC driver.", driver);
        }
      }
    }
  }
} 
```

# html - 背景渐变/图像上的对角线/纹理叠加

> ID：14200527
> 
> 赞同：3
> 
> 时间：2013-01-07T16:59:45.180
> 
> 标签：html, css, textures

有没有办法仅使用 CSS 复制以下纹理/填充？我想在具有不同背景填充的其他容器上使用相同类型的对角线，所以我希望可能有一种方法可以在 CSS 中做到这一点，而不必创建模式并将它们用作图像。

有什么想法我可以做到这一点吗？我猜它可能必须是这样的：

```
<div id="gradientFill">
  <div class="linePattern">
    <!-- Content goes here -->
  </div>
</div> 
```

有更好的解决方案吗？我不想在对角线上使用 alpha/transparency 然后让内容也透明​​时遇到问题。

![在此处输入图像描述](../Images/c125048c4dc8deaf0c6a85c9338cc116.png)

![在此处输入图像描述](../Images/30893a376548cce7610ee792f4b18587.png)

![在此处输入图像描述](../Images/72920219743d369a82a0e1d6e4ae22ca.png)

**解决方案发布如下。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:39:11.980

您可以在按钮上使用多个背景图像，因此您可以使用背景大小平铺顶部带有条纹渐变的标准渐变：

```
.stripy {
    background-image:
      linear-gradient(45deg, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%, transparent), 
      linear-gradient(bottom, rgb(83,84,84) 0%, rgb(181,181,181) 100%);
    background-size:50px 50px, auto;
} 
```

条纹有点厚，但通过一些实验应该可以得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:05:07.640

**正确的解决方案：**

[**jsFiddle**](http://jsfiddle.net/aPuvm/)：如果您没有看到对角线，那是因为 jsFiddle 不喜欢来自 imgur 的托管图像的外部链接。[***只需将imgur url***](http://i.imgur.com/oIuK2.png)复制并粘贴到另一个水龙头中即可将其放入缓存中，然后重新加载 Fiddle。

解决的关键是颜色背景的相对定位，以及纹理/线条叠加的绝对定位。对于这篇文章的未来访问者，如果您想在图像上叠加纹理，请应用：

> 位置：相对

...到您的图像 div，并且：

> 立场：绝对

...到您的叠加 div。

```
<div id="alert">
    Text goes here!
    <div class="lines"></div>
</div> 
```

* * *

```
#alert {
    position:relative;
    padding:10px;
    box-shadow:0px 1px 1px #000,  0px 1px 1px #F5BFB1 inset;

    background: #ea765a; /* Old browsers */
    background: -moz-linear-gradient(top,  #ea765a 0%, #d2583b 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ea765a), color-stop(100%,#d2583b)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #ea765a 0%,#d2583b 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #ea765a 0%,#d2583b 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #ea765a 0%,#d2583b 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #ea765a 0%,#d2583b 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ea765a', endColorstr='#d2583b',GradientType=0 ); /* IE6-9 */
}

.lines {
    position:absolute;
    width:100%;
    height:100%;
    top:0;
    left:0;
    background:url(../img/lines.png);
    opacity:0.05;
} 
```

# java - Java/Android：具有完整项目范围的方法

> ID：14200529
> 
> 赞同：1
> 
> 时间：2013-01-07T16:59:53.917
> 
> 标签：java, android

我创建了一个我希望能够在任何地方使用的方法，但我不知道在整个项目中访问该方法的最佳实践是什么。我是否只是使用公共方法创建一个 .java 文件，并且可以在整个过程中提供访问权限？我是否需要在任何地方（清单中的某个地方？）声明它？

我确定有人问过这个问题，但我没有在我的谷歌搜索中返回任何有用的信息。我在谷歌上搜索 Android 还不够好！很抱歉添加到重复项，如果我是的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:02:02.503

使用静态方法。至于我，如果我只想将方法存储在同一个地方，我会创建一个新类，并且所有方法都是静态的。例如。

```
public static int parseInt(String str)
{
    try
    {
        return Integer.parseInt(str);
    }
    catch (NumberFormatException e)
    {
        return -1;
    }
} 
```

如果它只是做任何事情并且不需要在类中保存状态，这是最好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:03:46.263

你有几个选择。最简单的是`public static`方法。

```
public class MyClass {
  public static MyReturnType myMethod(MyArgumentType input) {
    // my code here
  }
} 
```

您现在可以这样称呼它：

```
MyClass.myMethod(arg); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T17:19:08.073

这是一个静态方法的示例。

```
public class Messages {
    public static String mySpecialFinalMessage(){
        return "Hello Stackoverflow";
    }
} 
```

您不再需要创建`Messages`要调用的实例，`mySpecialFinalMessage()`因为它是静态的。调用静态方法的最佳做法是采用这种格式`CLASSNAME.STATICMETHODNAME();`

所以在我们的例子中，

```
Messages.mySpecialFinalMessage() 
```

请注意，您在非静态方法中调用静态方法是合法的，但是，在静态方法中调用非静态方法会给您带来编译时错误。

这是合法的

```
public class MyMessage {

    public String getMessage(){
        return Messages.mySpecialFinalMessage();
    }
} 
```

请注意 Messages.mySpecialFinalMessage() 是该静态方法。另外，请注意，我们没有创建 Messages 实例来调用 mySpecialFinalMessage()，而是直接调用它`CLASSNAME.STATICMETHODNAME`

# ios - iOS - 将图像和文本发布到 FB 用户的墙上

> ID：14200534
> 
> 赞同：2
> 
> 时间：2013-01-07T17:00:11.347
> 
> 标签：ios, facebook, facebook-graph-api

我正在使用最新的 Facebook 框架 3.1 创建 iOS 应用程序
我已经看到很多关于将图像和文本发布到 facebook 用户墙上的内容。我正在使用以下代码。

```
 NSDictionary* dict = @{
        @"link" : @"https://developers.facebook.com/ios",
        @"picture" : [UIImage imageNamed:@"Default"],
        @"message":@"Your temp message here",
        @"name" : @"MyApp",
        @"caption" : @"TestPost",
        @"description" : @"Integrating Facebook in ios"
    };
[FBRequestConnection startWithGraphPath:@"me/feed" parameters:dict HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    NSString *alertText;
    if (error)
    {
        NSLog(@"%@",[NSString stringWithFormat: @"error: domain = %@, code = %d", error.domain, error.code]);
        alertText = @"Failed to post to Facebook, try again";
    } else
    {
        alertText = @"Posted successfully to Facebook";
    }

    [[[UIAlertView alloc] initWithTitle:@"Facebook Result" message:alertText delegate:nil cancelButtonTitle:@"OK!" otherButtonTitles:nil] show];
}]; 
```

如果我将图片提供为“URL”，则它的发布很好。否则它的抛出错误。我想发布应用程序包中的图像。有人可以告诉我我在哪里编码错误吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-11-09T11:18:29.677

```
UIImage* image = [UIImage imageNamed:@"nature.jpg"]; 

NSMutableDictionary* params = [[NSMutableDictionary alloc] init];
[params setObject:@"My First message" forKey:@"message"];    
[params setObject:image forKey:@"picture"];

[FBRequestConnection startWithGraphPath:@"me/photos" parameters:dict HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    NSString *alertText;
    if (error)
    {
 NSLog(@"%@",[NSString stringWithFormat: @"error: domain = %@, code = %d", error.domain, error.code]);
    alertText = @"Failed to post to Facebook, try again";
} else
{
    alertText = @"Posted successfully to Facebook";
}

[[[UIAlertView alloc] initWithTitle:@"Facebook Result" message:alertText delegate:nil cancelButtonTitle:@"OK!" otherButtonTitles:nil] show];
}]; 
```

# vba - 通过反射解析 VBA Module 函数参数

> ID：14200535
> 
> 赞同：7
> 
> 时间：2013-01-07T17:00:18.377
> 
> 标签：vba, reflection

在 Excel 中，我有一个名为 VBA 的模块`MyModule`，它具有这样的功能

```
 Public Function MyFunction(Param1 As Range, Param2 As Range) As String
            ' some implementation
    End Function 
```

在运行时，我知道我有一个模块被调用`MyModule`，我知道我有一个函数被调用`MyFunction`，但我想动态检查参数名称`Param1`和`Param2`

在我的世界 (C#) 中，这称为反射。我可以在这里使用类似的概念来获取参数名称还是我对 VBA 的期望过高？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T13:04:07.567

[这个 CodeProject http://www.codeproject.com/Articles/164036/Reflection-in-VBA-a-CreateObject-function-for-VBA](http://www.codeproject.com/Articles/164036/Reflection-in-VBA-a-CreateObject-function-for-VBA)有很好的分析

*提炼：*

> VBA 不支持反射，这是一个具有许多方面的 OOP 概念，包括在设计时不知道其类型的情况下实例化类的能力。反射提供了极大的灵活性，这是 VBA 所缺乏的（至少对于我们这些喜欢将 VBA 用于超出其通常预期目的的人来说）。

有一些类似反射的事情是可能的：

**例子**

例如，如果我想创建 Excel 应用程序对象的实例，而不必在代码中显式声明类型（使用 Set xlApp = New Excel.Application），我可以使用以下反射级对象创建代码来实现：

```
Dim xlApp As Excel.Application 
Set xlApp = CreateObject(,"Excel.Application") 
```

这相当于类型特定的语句

```
Set xlApp = New Excel.Application 
```

**还：**

您可以使用[assylias](https://stackoverflow.com/users/829571/assylias)方法来询问您自己的代码（使用正则表达式或其他一些解析来挑选您感兴趣的代码部分）：

```
yourWorkbook.VBProject.VBComponents("MyModule").CodeModule 
```

这篇文章中有一些有趣的线索：[Iteration through the Object Browser in VBA](https://stackoverflow.com/questions/1892039/iterating-through-the-object-browser-in-vba)

# android - 在 WebView 中播放 HTML5 视频？

> ID：14200537
> 
> 赞同：1
> 
> 时间：2013-01-07T17:00:28.307
> 
> 标签：android, html, video, webview, android-videoview

我正在尝试从我的 WebView 播放视频，我已经解决了......好吧，但是有一个问题。至于现在，我已经添加了一个名为“playVideo”的带有 onclick 功能的图像

```
public void playVideo(View V)
{
    String LINK = "*URL TO VIDEO*";
    setContentView(R.layout.video_activity);
    VideoView videoView = (VideoView) findViewById(R.id.video);
    MediaController mc = new MediaController(this);
    mc.setAnchorView(videoView);
    mc.setMediaPlayer(videoView);
    Uri video = Uri.parse(LINK);
    videoView.setMediaController(mc);
    videoView.setVideoURI(video);
    videoView.start();
} 
```

当您按下它时，它会打开一个带有“VideoView”的活动。

问题：
我正在从服务器加载视频，并且将上传新视频，我想直接从 webview 显示的网页实现对正在播放的视频的支持（运行“playVideo”方法） .

希望你明白我的意思。
基本上; 我想点击 < video >-tag (html5) 打开 video_activity 并播放视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:28:38.530

我之前可能无意中在错误的地方发布了这个答案......我将视频文件转换为 base64 字符串并将其直接输入源，vola！webview 不再被资产位置所迷惑

```
<video width="400"  height="225" controls="controls" align="center" poster="data:image/poster.jpg" >
<source id="bigd" src="data:video/mp4;charset=utf-8;base64,AAAAHGZ0eXBtcDQyAAAAAG1...(etc.)">
</video> 
```

# oracle - OCCI getString 超过 16 个字节 - 访问冲突

> ID：14200539
> 
> 赞同：0
> 
> 时间：2013-01-07T17:00:32.813
> 
> 标签：oracle, oracle-call-interface, occi

我正在使用 OCCI 连接到 Oracle 数据库。当我打电话时：

```
std::string s = resultSet->getString(i); 
```

我收到 16 个字节或更多，存在访问冲突。

我在任何网站上都找不到答案。有谁知道为什么会这样？

# ruby - Ruby 中 Array#uniq 方法的时间复杂度是多少？

> ID：14200540
> 
> 赞同：8
> 
> 时间：2013-01-07T17:00:33.007
> 
> 标签：ruby

谁能告诉我ruby内部使用哪种算法来使用`Array#uniq`方法从ruby数组中删除重复项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T17:08:42.710

从[文档](http://www.ruby-doc.org/core-1.9.3/Array.html)：

```
static VALUE
rb_ary_uniq(VALUE ary)
{
    VALUE hash, uniq, v;
    long i;

    if (RARRAY_LEN(ary) <= 1)
        return rb_ary_dup(ary);
    if (rb_block_given_p()) {
        hash = ary_make_hash_by(ary);
        uniq = ary_new(rb_obj_class(ary), RHASH_SIZE(hash));
        st_foreach(RHASH_TBL(hash), push_value, uniq);
    }
    else {
        hash = ary_make_hash(ary);
        uniq = ary_new(rb_obj_class(ary), RHASH_SIZE(hash));
        for (i=0; i<RARRAY_LEN(ary); i++) {
            st_data_t vv = (st_data_t)(v = rb_ary_elt(ary, i));
            if (st_delete(RHASH_TBL(hash), &vv, 0)) {
                rb_ary_push(uniq, v);
            }
        }
    }
    ary_recycle_hash(hash);

    return uniq; 
```

它具有`O(N)`复杂性

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T17:07:19.607

摊销 O(n)，因为它在[内部使用 Hash](https://github.com/ruby/ruby/blob/trunk/array.c#L3985)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T22:27:28.827

这取决于您在谈论*哪些“内部”。*目前使用的 Ruby 实现有 7 个生产就绪，并且 Ruby 语言规范没有规定任何特定的算法。所以，这真的取决于实施。

例如，这是[Rubinius 使用的实现](https://GitHub.Com/Rubinius/Rubinius/blob/master/kernel/common/array19.rb#L625-L641)：

```
Rubinius.check_frozen

if block_given?
  im = Rubinius::IdentityMap.from(self, &block)
else
  im = Rubinius::IdentityMap.from(self)
end
return if im.size == size

array = im.to_array
@tuple = array.tuple
@start = array.start
@total = array.total

self 
```

这是[来自 JRuby 的](https://GitHub.Com/JRuby/JRuby/blob/master/src/org/jruby/RubyArray.java#L3136-L3157)：

```
RubyHash hash = makeHash();
if (realLength == hash.size()) return makeShared();

RubyArray result = new RubyArray(context.runtime, getMetaClass(), hash.size()); 

int j = 0;
try {
    for (int i = 0; i < realLength; i++) {
        IRubyObject v = elt(i);
        if (hash.fastDelete(v)) result.values[j++] = v;
    }
} catch (ArrayIndexOutOfBoundsException aioob) {
    concurrentModification();
}
result.realLength = j;
return result; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T17:11:58.567

`It compares elements using their hash (provided by the Object#hash method) then compares hashes with Object#eql?.`

来源：[https ://github.com/ruby/ruby/blob/trunk/array.c#L3976](https://github.com/ruby/ruby/blob/trunk/array.c#L3976)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-10T02:54:55.900

时间复杂度是线性时间，即 O(n)，因为它使用 Hash 进行算法的内部实现。

# emacs - 如何在 emacs 次要模式下设置注释开始和注释结束？

> ID：14200542
> 
> 赞同：0
> 
> 时间：2013-01-07T17:00:50.193
> 
> 标签：emacs, lisp, elisp

我正在尝试为[Twig创建一个](http://twig.sensiolabs.org/)**次要模式**，语法与 django 非常相似，我想更改注释样式的值以使用 {# 和 #}

如果我做

```
(setq comment-start "{#")
(setq comment-end "#}") 
```

运行正确，但是当更改为 lisp 模式时，注释端仍然是“#}”而不是“”

代码在[这里](https://github.com/mgallego/twig.el/blob/master/twig.el)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:53:26.053

You need to make them `buffer-local` by adding this:

```
(set (make-local-variable 'comment-start) "{#")
(set (make-local-variable 'comment-end) "#}") 
```

to the `define-minor-mode` body.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:59:40.533

您可以按照有关[如何根据次要模式更改光标](https://stackoverflow.com/a/14145348/6148)的答案来做一些事情：

```
(defvar twig-mode-previous-comments nil
  "Storage for comment start/end that was before twig mode was enabled")
(define-minor-mode twig-mode "twig" :lighter ""
  (unless twig-mode-previous-comments
    (set (make-local-variable 'twig-mode-previous-comments) (cons comment-start comment-end)))
  (if twig-mode
      (progn
        (set (make-local-variable 'comment-start) "{#")
        (set (make-local-variable 'comment-end) "#}"))
    (setq comment-start (car twig-mode-previous-comments))
    (setq comment-end (cdr twig-mode-previous-comments)))) 
```

# html - 仅排除一个 CSS 属性值？

> ID：14200544
> 
> 赞同：2
> 
> 时间：2013-01-07T17:00:53.540
> 
> 标签：html, css, text-decorations

有没有办法只禁用一个 CSS 属性值？例如，对于属性'text-decoration'，可能的值是none、underline、overline、line-through、blink和inherit。

我想允许文本装饰的所有值，但所有元素上的下划线除外。

我正在使用的页面是动态生成的，并且可以包含来自整个网络的内容——因此不可能针对任何特定元素。使用文本装饰“无”当然有效，但它也会吹走所有其他值:(

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:20:03.460

仅使用 CSS 和 HTML 是无法做到这一点的。您需要的是类似于*属性选择器*的东西，以将文本装饰设置为下划线的页面上的所有元素作为目标，但现在不存在这样的东西。

但是，如果 JavaScript 是一个选项，那么您可以完成此操作。您将首先[确定元素的样式，](https://stackoverflow.com/questions/7894577/read-css-property-of-an-element-using-javascript)然后，如果需要，[设置样式](https://stackoverflow.com/questions/5191478/changing-element-style-attribute-dynamically-using-javascript)以去除下划线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T17:28:56.887

由于 Javascript 和 JQuery 中没有属性选择器之类的东西，因此您应该获取所有可能的元素，然后检查它们的 css 属性并在需要时进行更改。像这样的东西： `$('*').each(function() { if ($(this).css('PROPERTY') == 'FORBIDDEN-VALUE') { $(this).css('PROPERTY', 'REPLACE-VALUE'); } });`

# sql - SQL Join 自引用表

> ID：14200545
> 
> 赞同：0
> 
> 时间：2013-01-07T17:01:02.173
> 
> 标签：sql, sql-server-2008, tsql

我的数据库中有 2 个表作为分类和 Company_Classification。下面的结构只是一个例子，我在下面给出了我的代码。

```
Classification
ClassId
ClassName
Parent_Id

Company_Classification
LinkId
CompanyId
ClassId 
```

我需要计算属于父分类的公司数量，并按父分类对其进行分组。因此，属于每个子分类的公司将计入其父分类。

```
SELECT
  TOP (100) PERCENT dbo.CLASSIFICATION.class_name,
  COUNT(dbo.COMPANY_CLASSIFICATION.Company_ID) AS Count
FROM
  dbo.CLASSIFICATION
INNER JOIN dbo.COMPANY_CLASSIFICATION 
  ON dbo.CLASSIFICATION.class_id = dbo.COMPANY_CLASSIFICATION.Class_ID
WHERE     (dbo.CLASSIFICATION.parent_id = 0)
GROUP BY dbo.CLASSIFICATION.class_name
ORDER BY dbo.CLASSIFICATION.class_name 
```

我不确定我是否正确地表达了我的问题。那么，基本上我如何调整查询以获取按父分类（包括子记录）分组的公司记录？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:07:06.533

On second thought, it looks like you might have a hierarchy structure.

```
;WITH ClassificationHierarchy AS
(
    SELECT   ClassId
            ,ClassName
            ,RootParent = ClassId
    FROM Classification
    WHERE Parent_Id = 0
    UNION ALL
    SELECT   CS.ClassId
            ,CS.ClassName
            ,RootParent
    FROM ClassificationHierarchy    CH
    JOIN Classification             CS  ON CH.ClassId = CS.Parent_Id
)
SELECT RootParent, COUNT(*)
FROM ClassificationHierarchy    CH
JOIN Company_Classification     CC  ON CC.ClassId = CH.ClassId
GROUP BY RootParent 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:09:09.763

You need to join a second time to the classification table:

```
select cparent.class_name, count(*)
from Company_Classification cc join
     Classification c
     on cc.Classid = C.ClassId join
     Classification cparent
     on c.parent_id = cparent.classid
group by cparent.class_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T17:10:25.157

因为你在那里使用 TOP 子句？如果要计算每个分类有多少必须删除顶部。

如果您想要的是前 100 家公司可能有意义，但是您必须创建一个子查询，其中包含顶部和这些与主查询一起。

# java - 在tomcat中调用webservice时出错

> ID：14200549
> 
> 赞同：0
> 
> 时间：2013-01-07T17:01:13.220
> 
> 标签：java, web-services, tomcat, web

我有一个在 tomcat 中运行的 Web 服务，每次我从客户端调用时都会出现此错误

> 原因：org.apache.xerces.parsers.ObjectFactory$ConfigurationError：提供者 org.apache.xerces.parsers.StandardParserConfiguration 无法实例化：org.apache.xerces.impl.dv.DVFactoryException：DTD 工厂类 org.apache.xerces .impl.dv.dtd.DTDDVFactoryImpl 不从 DTDDVFactory 扩展。

奇怪的是，我可以调用 webservice 并且它会做它应该做的事情，但是客户端中的代码无法继续，因为那个错误。

示例：打印 hello world 的 web 服务中的方法 调用 web 服务并在之后打印 hello world 的客户端中的方法。

客户端可以调用 web 服务和 web 服务打印 hello world，但是客户端没有

# javascript - Javascript 错误：“预期 ';' " 声明日期变量时

> ID：14200550
> 
> 赞同：-3
> 
> 时间：2013-01-07T17:01:15.030
> 
> 标签：javascript

```
function validateDate(){
    Date now = new Date(); //error here
 } 
```

我得到并错误说预期的';' 当我宣布那条线时`Date now =....`

有谁知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:01:49.770

JavaScript 是弱类型的；所有变量声明都以关键字开头`var`：

```
var now = new Date(); 
```

# ejb-3.0 - 从请求范围的 JAX-RS Web 服务调用的无状态 EJB3 bean 累积状态

> ID：14200552
> 
> 赞同：1
> 
> 时间：2013-01-07T17:01:26.080
> 
> 标签：ejb-3.0, jax-rs

我有以下情况：请求范围的**JAX-RS**服务调用无状态**EJB3** bean，并且 EJB3 bean 在客户端连续调用 Web 服务之间保留状态。

代码如下：

### 网络服务

```
@javax.enterprise.context.RequestScoped
@Path("/actions")
public class CounterFrontEnd {

    @EJB
    private ICounterService.ILocal counterService;

    @GET @Produces("application/text;") @Path("/counter")
    public String counter() {
        return String.format("%d ", counterService.incCounter());
    } 
```

### 无状态 EJB3 bean

```
@Stateless
@Local (ICounterService.ILocal.class)
@Remote(ICounterService.IRemote.class)
public class CounterService implements ICounterService.ILocal, ICounterService.IRemote {

    public int counter = 0;
    @Override
    public int incCounter() {
        return counter++;
    } 
```

然后我使用以下 python 脚本调用该服务：

```
for i in range(100):
  os.system( 'curl  http://somewhere:8080/counter-ws/rest/actions/counter' ) 
```

令人惊讶的是，输出是：

```
1 2 3 4 5 ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:25:29.480

这是因为容器（发生）每次都给你相同的 bean-instance，而不是你应该依赖的东西。

无状态会话 bean 不应像您的示例中那样依赖实例变量。

来自 java ee 教程：[http ://docs.oracle.com/javaee/6/tutorial/doc/javaeetutorial6.pdf](http://docs.oracle.com/javaee/6/tutorial/doc/javaeetutorial6.pdf)

> **无状态会话 Bean**
> 
> 无状态会话 bean 不维护与客户端的会话状态。当客户端调用无状态 bean 的方法时，bean 的实例变量可能包含特定于该客户端的状态，但仅限于调用期间。当方法结束时，不应保留客户端特定的状态。但是，客户端可能会更改池化无状态 bean 中实例变量的状态，并且此状态将保留到池化无状态 bean 的下一次调用。除了在方法调用期间，无状态 bean 的所有实例都是等效的，允许 EJB 容器将实例分配给任何客户端。也就是说，无状态会话 bean 的状态应该适用于所有客户端。

# php - Zend Framework 2 - 导航概念

> ID：14200554
> 
> 赞同：1
> 
> 时间：2013-01-07T17:01:43.363
> 
> 标签：php, zend-framework2

我使用过 ZF2 的 Skeleton 应用程序进行学习。现在，我正在学习导航。我有一个问题。

1.  在 service_manager 中添加了导航类。

    ```
    'Navigation' => 'Zend\Navigation\Service\DefaultNavigationFactory' 
    ```

    （模块的配置文件：module.config.php）

2.  在 nav_config.php 中有以下代码。(配置/nav_config.php)

    ```
    <?php
    return array(
      'navigation' => array(
        'default' => array(
            'disc' => array(
                'label' => 'Album',
                'route' => 'album',
                'pages' => array(
                    'index' => array(
                        'label' => 'Listing',
                        //'route' => 'album/index',
                        'module' => 'album',
                        'controller' => 'album',
                        'action' => 'index',
                    ),
                    'add' => array(
                        'label' => 'Add Album',
                        //'route' => 'album/add',
                        'module' => 'album',
                        'controller' => 'album',
                        'action' => 'add',
                    ),
                ),
            ),
        ),
      ),
    ); 
    ```

3.  在 layout.php 中，放置了这段代码。

    ```
    <?php
    echo $this->navigation()->breadcrumbs('navigation')->setMinDepth(0)->setLinkLast(true)->render();
    ?> 
    ```

访问主机名/光盘时，我在面包屑中看到“专辑”文本。当我访问主机名/光盘/添加时，我再次得到相同的结果，那就是单独的“专辑”。但我想获得“专辑/添加专辑”。请指导实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:05:55.180

更新您的“光盘”节点以包含控制器和操作，它应该可以工作：

```
<?php
return array(
  'navigation' => array(
    'default' => array(
        'disc' => array(
            'label' => 'Album',
            'route' => 'album',
            'controller' => 'album', // add this
            'action' => 'index',     // add this
            'pages' => array(
                'index' => array(
                    'label' => 'Listing',
                    //'route' => 'album/index',
                    'module' => 'album',
                    'controller' => 'album',
                    'action' => 'index',
                ),
                'add' => array(
                    'label' => 'Add Album',
                    //'route' => 'album/add',
                    'module' => 'album',
                    'controller' => 'album',
                    'action' => 'add',
                ),
            ),
        ),
    ),
  ),
); 
```

# c++ - EnumDisplaySettings 判断失败

> ID：14200559
> 
> 赞同：1
> 
> 时间：2013-01-07T17:02:00.167
> 
> 标签：c++, winapi

如何判断winapi`EnumDisplaySettings`失败？根据[MSDN](http://msdn.microsoft.com/library/windows/desktop/dd162611%28v=vs.85%29.aspx)

> 如果函数失败，则返回值为零。

还

> 图形模式索引从零开始。要获取所有显示设备的图形模式的信息，请对 EnumDisplaySettings 进行一系列调用，如下所示： 第一次调用时将 iModeNum 设置为零，并为每个后续调用将 iModeNum 加一。继续调用该函数，直到返回值为零。

如何确定返回的零是失败标志还是模式不存在（`iModeNum`值太大）？

什么都没说`GetLastError`。似乎这个 winapi 没有在失败时设置最后一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:17:38.747

这是典型的 GDI api 调用，它们不设置 GetLastError 错误代码。您所拥有的只是“它不起作用”的返回值。

请注意，您**必须**从 iModeNum 从 0 开始。如果返回 FALSE，那么您可以放心地假设设备名称参数存在严重错误。继续增加 iModeNum 直到你得到 FALSE。

# html - 使用css锚链接可点击区域 - IE问题

> ID：14200563
> 
> 赞同：0
> 
> 时间：2013-01-07T17:02:15.580
> 
> 标签：html, css

我有一个如下菜单，我需要使整个锚区域都可以点击，不幸的是它似乎没有。

HTML

```
<div><a href='#'>Home</a></div>    
<div><a href='#'>Contact us</a></div>    
<div><a href='#'>Feedback</a></div>    
<div><a href='#'>Products</a></div> 
```

CSS

```
div {height:40px; padding-top:5px; border:#999 solid 1px; margin-bottom:5px;}
a{color:#FFF; font-size:15px;text-shadow: -1px -2px 2px #212121; filter: dropshadow(color=#212121, offx=-1, offy=-2); padding: 13px 0 0 16px; display:block; height:25px; width:100%; zoom:1; line-height: 30px;  } 
```

小提琴作为[http://jsfiddle.net/3Hyty/2/](http://jsfiddle.net/3Hyty/2/)

**更新：IE中确实存在问题**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:14:34.337

您的 CSS 很好，问题是 jsfiddle 默认阻止链接点击，除非它们在新选项卡中打开。使链接有

```
target='_blank' 
```

他们在 jsfiddle 中工作，如下所示：http: [//jsfiddle.net/V3qML/1/](http://jsfiddle.net/V3qML/1/)。

显然，对于您的生产环境，只需按原样使用您的代码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:14:38.660

将 onClick 添加到 div 并将 div 设置为使用 cursor:hand 或 cursor:pointer 取决于浏览器请参阅[当用户将鼠标悬停在列表项上时如何使光标成为手？](https://stackoverflow.com/questions/3087975/make-mouse-pointer-a-hand-when-hover-over-li-element)

应用于您的 jsFiddle：http: [//jsfiddle.net/3Hyty/5/](http://jsfiddle.net/3Hyty/5/)

操作路线是：

```
<div onClick="javascript:document.location.href='#';" style="cursor:hand;cursor: pointer;">Feedback</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T17:20:36.570

HTML5 允许在锚点内使用块元素，这将锚点强制为其中块元素的尺寸。或者，使用 span 并将它们设置为 inline-block 或 block：

```
<a href='#'><div>Home</div></a> 
```

或者：

```
<a href='#'><span class="block">Home</span></a>

<style>
span.block {display: block;}
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T14:08:14.760

```
a{
  margin:0 10px;
  display:block;
  float:left;
  width:100%;
  color:#F00; 
  font-size:15px;
  text-shadow: -1px -2px 2px #212121; padding: 0 0; 
  height:25px; 
  zoom:1; 
  line-height: 30px;
} 
```

它可以与左浮动有关

# java - 在小程序中更改文本字段的字体大小

> ID：14200567
> 
> 赞同：0
> 
> 时间：2013-01-07T17:02:43.800
> 
> 标签：java, user-interface, fonts, applet, awt

有没有办法增加小程序的字体大小？

```
TextField txtSentence = new TextField(60); 
```

我需要增加 txtSentence 的字体大小。有人可以帮忙吗……提前谢谢…………

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T08:18:16.897

AWT[`TextField`](http://docs.oracle.com/javase/7/docs/api/java/awt/TextField.html)继承自`Component`which has method [`Component.setFont(Font)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#setFont%28java.awt.Font%29)。

## 尖端

*   AWT 是上个千年的 GUI 组件工具包。这个千年，使用 Swing。
*   习惯于在 JavaDocs 中查找该类以及它实现或扩展的任何类。在那里可以找到许多答案。

# android - SoftKeyboard : 切换键盘

> ID：14200572
> 
> 赞同：0
> 
> 时间：2013-01-07T17:03:17.893
> 
> 标签：android, keyboard

所以我的问题如下：

我正在研究“未修改的软键盘演示项目”，我创建了另一个键盘 (Azerty)，其中复制/粘贴作为 Qwerty。当我`mInputView.setKeyboard(mAzertyKeyboard);`按一个按钮调用时，键盘被切换，但是布局很大并且显示不好，我的意思是我不能在屏幕上看到键盘的一半。切换键盘是否需要另一个电话，例如`Draw`？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:10:14.997

检查一行中的键数是否与qwerty键盘相同。无论如何，如果您需要帮助，您应该在这里向我们展示布局

# java - 如何限制 Java 泛型

> ID：14200575
> 
> 赞同：5
> 
> 时间：2013-01-07T17:03:34.593
> 
> 标签：java, generics

我有以下代码：

```
protected <T> T getValueForKey(String key) {

    T value = null;

    // currentStats is just a Bundle
    if (currentStats.containsKey(key)) {
        return value;
    }
    return value;
} 
```

如何设置限制？即 T 是 String 或 int 或 double 例如。这可能吗？

附言

我不想用

```
protected <T extends String> T getValueForKey(String key) {

} 
```

因为我不想只有字符串..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T17:08:33.633

由于您不能重载返回值，我建议使用不同的访问器方法：

```
protected int     getIntForKey(String key);
protected double  getDoubleForKey(String key);
protected String  getStringForKey(String key); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T17:05:26.007

我认为没有办法将泛型类型限制为仅 String、Integer 和 Double，但您可以使用`<T extends Comparable>`As String、Integer 和 Double 都实现 Comparable。但是许多其他类也实现了类似 java.util.Date 的 Comparable，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T17:07:36.470

```
protected <T extends Object> T getValueForKey(String key); 
```

我不知道无论如何你可以返回“A String or an Integer or a Double”等。

您总是可以添加一些逻辑来检查返回的对象的类名，如果返回的对象不是您想要的类型之一，则抛出异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T17:12:04.010

没有直接的方法可以做到这一点。
用于类型的类`T` 必须有一些共同点才能受到限制，即`T`所有必须实现某些接口的类 - 假设这是`InterfaceName`

如果 class ClassName 是包含 的类，`protected T getValueForKey(String key)`则必须`ClassName`按如下方式声明该类：

```
class ClassName<T extends InterfaceName> 
```

在这个 URL 上已经提出了一个非常相似的问题：

[如何限制泛型类中允许作为“T”的类型？](https://stackoverflow.com/questions/3288053/how-to-restrict-types-which-are-allowed-as-t-in-a-generic-class)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T20:10:49.480

@anfy2002us 的回应评论——如果调用者知道与给定键关联的值的所需类型是可以的，那么这个怎么样？

```
protected <T> T getValueForKey(String key, Class<T> type) {
    return currentStats.containsKey(key) ? type.cast(currentStats.get(key)) : null;
} 
```

# security - 安全令牌和安全票有什么区别？

> ID：14200579
> 
> 赞同：7
> 
> 时间：2013-01-07T17:03:50.507
> 
> 标签：security

安全令牌和安全票有什么区别？

我已经看到这些术语可以互换使用。这些是否有“行业标准”定义？或者这些术语是否因技术/协议/实施而有所不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:34:14.660

*令牌*和*票据*这两个词很大程度上取决于您正在处理的系统类型；以及你在什么情况下说话。在 Windows NT 衍生产品上，**令牌**的概念是一个身份。当用户或服务登录到系统时，系统会验证他们的身份一次，并铸造一个令牌，该令牌将交给该用户/服务并用作他们的身份。例如，系统不需要在每次程序打开文件时验证身份。这基本上确保了身份验证（证明用户/服务就是他们所说的身份）和授权（确定用户/服务是否可以访问某些资源）之间的清晰分离。

另一方面，（同样是 NT 衍生产品）这个词通常指的是[Kerberos](http://en.wikipedia.org/wiki/Kerberos_(protocol))**票**。这些用于域上的两台机器能够证明彼此的身份。在向域控制器证明一个人的身份（使用密码或智能卡等传统方式）后，域控制器会生成一张票证，该票证可以传递给远程机器以验证身份。

如果一个人正在与一台远程机器打交道，那么很可能涉及票证和令牌。例如，如果机器 A 在机器 B 上打开一个文件共享，那么机器 A 会通过域控制器验证使用它的用户，从而获得 Kerberos 票证。然后，它使用 Kerberos 票证来验证其与机器 B 的身份。机器 B 然后为机器 A 创建一个会话，铸造一个令牌，作为该会话身份，用于机器 B 上的本地授权查询。

正如 Feral 和 Oded 在这个问题的其他地方所说，这是非常特定于领域的语言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T18:21:49.177

成功验证服务请求后，安全**令牌**将成为**安全票证。**对于 SOAP，在收到 SOAP 消息作为确认后，该安全票证将用于所有后续请求。我认为安全令牌的级别更高、更严格，而安全票证是由服务提供商发行的，用途更窄。

根据这篇（不再是当前的）MSDN 文章，**[代理身份验证：安全令牌服务](http://msdn.microsoft.com/en-us/library/ff650503.aspx#wss_ch1_brokauthsts_topic6 "WS 安全代理身份验证扩展 1")**：

> ...客户端从 STS 获取安全上下文令牌 (SCT)（表明客户端已通过身份验证）并将其缓存。客户端通过 STS 认证后，客户端可以使用会话令牌请求服务令牌以与服务进行通信。STS 验证客户端提供的**安全令牌**并发布**服务令牌**的方式类似于 Kerberos 协议验证票证授予票证并发布服务票证的方式。

“安全令牌”与我熟悉的含义相同，但使用“服务令牌”而不是“服务票证”。句子的最后一部分，关于 Kerberos，读起来很奇怪，即“ticket-granting ticket”。

这是另一种解释，其中的术语对我来说更熟悉（它专门**[针对 Single Sign On 的 SAML](https://www.realtown.com/mattcohen/blog/singlesignonthroughrets "Matts 房地产博客 SSO Thoughts")**）：

> 基本形式的 SSO 仅意味着服务提供商将信任身份提供商使用 SAML 标准提供的身份验证凭据...请注意，当我们使用“令牌”一词时，我们不是在谈论某种物理安全性令牌，但完全是其他东西，是 SAML 标准的一部分的安全票。

现在你的问题的下一部分是关于标准的。**[这篇博](http://coheigea.blogspot.com/2011/12/ws-securitypolicy-examples-in-apache.html "WS 安全策略示例")**文有四个用于安全令牌（策略？）的 OASIS WS 用例，并带有标准链接。如果您在访问它时遇到任何问题，OASIS 有一个**[安全令牌标准](http://docs.oasis-open.org/ws-sx/security-policy/examples/ws-sp-usecases-examples-cs-02.html "oasis ws 用例")**页面。

# c# - ViewModel 中的文本框事件处理

> ID：14200580
> 
> 赞同：1
> 
> 时间：2013-01-07T17:03:50.647
> 
> 标签：c#, wpf, xaml

我有一种情况，我正在验证一个用于启用按钮的文本框。如果文本框为空，则应禁用该按钮，反之亦然。如果我在 XAML 后面的代码中编写逻辑，我可以处理代码并实现解决方案，但我觉得那不是正确的方式，应该从 viewModel 而不是后面的代码处理事件。

这是我所做的：
**XAML**

```
<TextBox Grid.Row="1" Margin="6,192,264,0" Height="60" VerticalAlignment="Top"
         x:Name="txtDNCNotes" Text="{Binding Path=DNCNotes, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
         TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" 
         Visibility="{Binding Path=DNCNoteTxtVisibility}" Grid.Column="1"
         behaviour:TextBoxFilters.IsBoundOnChange="True"
         TextChanged="TextBox_TextChanged" /> 
```

**视图模型**

```
public string DNCNotes
{
    get { return _dncNotes; }
    set { 
        if (_dncNotes == value) return; 
        _dncNotes = value; 
        OnPropertyChanged("DNCNotes"); 
    }
} 
```

**背后的代码**

```
private void TextBox_TextChanged(object sender, TextChangedEventArgs e)
{
    var ctx = LayoutRoot.DataContext as NextLeadWizardViewModel;
    BindingExpression binding = txtDNCNotes.GetBindingExpression(TextBox.TextProperty).UpdateSource();
    ctx.ShowDoNotContact();
} 
```

我正在尝试在 viewModel 中编写以下代码来实现解决方案，但不确定要写什么。

```
public void ShowDoNotContact()
{
    Binding myBinding = new Binding("DNCNotes");

    //myBinding.Source =  DataContext as NextLeadWizardViewModel;

    myBinding.Source = txtDNCNotes;

    myBinding.Path = new PropertyPath("DNCNotes");
    myBinding.Mode = BindingMode.TwoWay;
    myBinding.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
    BindingOperations.SetBinding(txtDNCNotes, TextBox.TextProperty, myBinding);

    if (_dncNotes == null)
        OkCommand.IsEnabled = false;
    else
        OkCommand.IsEnabled = CanEnableOk();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T10:29:31.657

如果您想验证`TextBox`会禁用按钮的 a ，我会使用 a `command`，类似于此；

```
 private ICommand showDCNoteCommand;
    public ICommand ShowDCNoteCommand
    {
        get
        {
            if (this.showDCNoteCommand == null)
            {
                this.showDCNoteCommand = new RelayCommand(this.DCNoteFormExecute, this.DCNoteFormCanExecute);
            }

            return this.showDCNoteCommand;
        }
    }

    private bool DCNoteFormCanExecute()
    {
        return !string.IsNullOrEmpty(DCNotes);

    }

    private void DCNoteFormExecute()
    {
        DCNoteMethod(); //This a method that changed the text
    } 
```

这将确保用户无法继续或保存进度，因为 TextBox 不应接受 null 或空值，显示在`DCNoteFormCanExecute()`（DCNotes 是您在 Viewmodel 中定义的属性）中。

并在 xaml 中，将其绑定到按钮，如下所示；

```
<Button Content="Save" Grid.Column="1" Grid.Row="20" x:Name="btnSave" VerticalAlignment="Bottom" Width="75" Command="{Binding ShowDCNoteCommand}" 
```

对于验证，你可以做一些简单的事情，使用属性验证，使用这个参考`using System.ComponentModel.DataAnnotations`；

```
 [Required(ErrorMessage = "DCNotes is required")]
    [RegularExpression(@"^[a-zA-Z''-'\s]{1,5}$", ErrorMessage = "DCNotes must contain no more then 5 characters")] //You can change the length of the property to meet the DCNotes needs
    public string DCNotes
    {
        get { return _DCNotes; }
        set
        {
            if (_DCNotes == value)
                return;

            _DCNotes = value;
            OnPropertyChanged("DCNotes");
        }
    } 
```

在 xaml 中，您可以创建一个`Resource`突出显示该框以通知用户文本框未填写；

```
 <Style TargetType="{x:Type TextBlock}">
        <Setter Property="Margin"
                Value="4" />
    </Style>

    <Style TargetType="{x:Type TextBox}">
        <Setter Property="Margin"
                Value="4" />
        <Style.Triggers>
            <Trigger Property="Validation.HasError"
                     Value="true">
                <Setter Property="ToolTip"
                        Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"/>

            </Trigger>
        </Style.Triggers>
    </Style> 
```

我希望这会有所帮助，否则，这里的链接可能会有所帮助； [http://www.codeproject.com/Articles/97564/Attributes-based-Validation-in-a-WPF-MVVM-Applic](http://www.codeproject.com/Articles/97564/Attributes-based-Validation-in-a-WPF-MVVM-Applicat)

或者

[http://www.codearsenal.net/2012/06/wpf-textbox-validation-idataerrorinfo.html#.UOv01G_Za0t](http://www.codearsenal.net/2012/06/wpf-textbox-validation-idataerrorinfo.html#.UOv01G_Za0t)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:44:07.307

ViewModel 是一个可接受的地方，可以为您的视图添加不影响您的模型的支持属性。例如，类似于以下内容：

```
 public bool DncCanExecute
    {
        get
        {
           return "" != _dncNotes;
        }
    }

    public string DNCNotes
    {
        get { return _dncNotes; }
        set { 
            if (_dncNotes == value) return;
            if (("" == _dncNotes && "" != value) || ("" != _dncNotes && "" == value))
            {
                _dncNotes = value;
                OnPropertyChanged("DncCanExecute");
            }
            else
            {
                _dncNotes = value;
            }
            OnPropertyChanged("DNCNotes");
        }
    } 
```

从那里，您可以将属性绑定`Button.IsEnabled`到`DncCanExecute`属性以获得所需的功能。

# php - Laravel 中 HTML::link 的 URLEncode

> ID：14200587
> 
> 赞同：4
> 
> 时间：2013-01-07T17:04:09.350
> 
> 标签：php, laravel

我正在 Laravel 中建立一个博客，但似乎无法弄清楚如何使用`HTML::link(..)`. 例如，我在博客中有指向不同类别的链接，例如部门新闻，我正在尝试获取格式如下的链接 - `http://localhost/blog/category/department+news`.，其中`Department News`由`$post->category`

我试过下面的代码，它产生`http://localhost/blog/Department News`

```
{{ HTML::link('admin/blog/category/' . $post->category, $post->category) }} 
```

我怎样才能逃避这个并生成所需的 URL？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T17:09:24.787

Usually, you'd have each post category use a `slug` column in the database for the URL fragment, and then use something like:

```
HTML::link('blog/category/'.$post->category->slug, $post->category->name) 
```

There's appears to be no way with Laravel to automatically encode only certain parts of the URL, so you'd have to do it yourself:

```
HTML::link(
    'admin/blog/category/'.urlencode(strtolower($post->category)),
    $post->category
) 
```

You might want to consider using the "slug" approach. You don't necessarily have to store it in the database, you could have your class generate it on the fly:

```
class Category {
    function slug() {
        return urlencode(strtolower($this->name));
    }
} 
```

I'm not sure what you're working with exactly, but hopefully you get the idea.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T11:29:34.643

对不起。我不同意韦斯利，这行得通...

如果您使用[命名路由](http://laravel.com/docs/routing#named-routes)，则`Url::route('category_browse',[category])`调用将对值进行编码。route 方法中的第二个参数允许混合内容。因此，如果您的路线中只有一个参数，您可以传递一个值，否则是一个数组。

在树枝（[TwigBridge](https://github.com/rcrowe/TwigBridge)）中，这是...

```
{{ url_route('category_browse',[category]) }} 
```

否则（[刀片](http://laravel.com/docs/templates#blade-templating)）它应该是......

```
{{ Url::route('category_browse',[category]) }} 
```

你的名字路线应该是这样的......

```
Route::any('/blog/category/{category}',
    array(
        /*'before'=>'auth_check', -- maybe add a pre-filter */
        'uses' =>'BlogController@category',
        'as' => 'category_browse'
    )
); 
```

# c# - 无法将参数值从 String 转换为 Int32

> ID：14200590
> 
> 赞同：2
> 
> 时间：2013-01-07T17:04:20.010
> 
> 标签：c#, sql, asp.net-mvc-3, stored-procedures

我正在使用 MVC3 和 SQL 2005。我收到错误：“将数据类型 varchar 转换为数字时出错。” 我相信这是因为我在 QTYORDER 中使用“1”而不是“1.00000”而生成的。对 QTYORDER 使用“1.00000”我现在看到错误：“无法将参数值从字符串转换为 Int32。”

我试过使用 Convert.ToInt32(Variable) ，如下所示：

`cmd.Parameters.Add("@QTYSOLD", SqlDbType.Int).Value = Convert.ToInt32(QTYORDER);`

它返回：“输入字符串的格式不正确。” Int.Parse(QTYORDER) 做同样的事情......

SQL 存储过程变量：

```
Procedure [dbo].[SVC_AddPart_To_Service_Call]      
    (@SRVRECTYPE smallint,
     @CALLNBR char(11),
     @TECHID char(11),
     @LINITMTYP char(3),
     @ITEMNMBR char(31),
     @QTY numeric(19,5) = 0,
     @QTYSOLD numeric(19,5) = 0,
     @STARTDATE datetime = '01/01/1900 00:00:00',   
     @STARTTIME datetime = '01/01/1900 00:00:00',
     @ENDDATE datetime = '01/01/1900 00:00:00',
     @ENDTIME datetime = '01/01/1900 00:00:00',
     @Status int output) As ... 
```

MVC C# 代码：

```
SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["CPLU"].ConnectionString);
var cmd = new SqlCommand("SVC_AddPart_To_Service_Call", conn);
cmd.CommandType = CommandType.StoredProcedure;

cmd.Parameters.Add("@SRVRECTYPE", SqlDbType.SmallInt).Value = "2";
cmd.Parameters.Add("@CALLNBR", SqlDbType.Char).Value = CALLNBR;
cmd.Parameters.Add("@TECHID", SqlDbType.Char).Value = Session["TechID"];
cmd.Parameters.Add("@LINITMTYP", SqlDbType.Char).Value = "P";
cmd.Parameters.Add("@ITEMNMBR", SqlDbType.Char).Value = ITEMNMBR;
cmd.Parameters.Add("@QTY", SqlDbType.Int).Value = QTYORDER;
cmd.Parameters.Add("@QTYSOLD", SqlDbType.Int).Value = QTYORDER;
cmd.Parameters.Add("@STARTDATE", SqlDbType.DateTime).Value = "1900-01-01 00:00:00.000";
cmd.Parameters.Add("@STARTTIME", SqlDbType.DateTime).Value = "1900-01-01 00:00:00.000";
cmd.Parameters.Add("@ENDDATE", SqlDbType.DateTime).Value = "1900-01-01 00:00:00.000";
cmd.Parameters.Add("@ENDTIME", SqlDbType.DateTime).Value = "1900-01-01 00:00:00.000";
cmd.Parameters.Add("@STATUS", SqlDbType.Int);
cmd.Parameters["@STATUS"].Direction = ParameterDirection.Output;

conn.Open();
cmd.ExecuteNonQuery();
conn.Close(); 
```

MVC 剃刀代码：

```
@using (Html.BeginForm()) 
{
    @Html.ValidationSummary(true)
    <fieldset>

            @Html.LabelFor(model => model.CALLNBR, "Call Number")
            @Html.Label("CALLNBR", (string)ViewBag.CALLNBR)
            @Html.ValidationMessageFor(model => model.ITEMDESC)
        <br />
            @Html.LabelFor(model => model.ITEMNMBR, "Item Number")
            @Html.DropDownList("ITEMNMBR", (SelectList) ViewBag.Items, "Please Select a Part #")
            @Html.ValidationMessageFor(model => model.ITEMNMBR)
        <br />
            @Html.LabelFor(model => model.ITEMDESC, "Description")
            @Html.EditorFor(model => model.ITEMDESC)
            @Html.ValidationMessageFor(model => model.ITEMDESC)
        <br />
            @Html.LabelFor(model => model.QTYORDER, "Quantity")
            @Html.EditorFor(model => model.QTYORDER, new { required = "required"})
            @Html.ValidationMessageFor(model => model.QTYORDER)
        <br />
            <input type="submit" class="submit" value="Add Part" />

    </fieldset>
} 
```

我试图通过表格传递的值：

```
CALLNBR = 0000198210 
ITEMNMBR = RF5-1885 (22 trailing spaces)
QTYORDER = 1 
```

从 SQL 表中的一行获取的值：

```
CALLNBR = 0000198638  
ITEMNMBR = RM1-0043 (22 trailing spaces)
QTYORDER = 1.00000 
```

问题：

1) 由于 SP 具有为 STARTDATE、STARTTIME、ENDDATE 和 ENDTIME 编码的默认值...在 MVC 应用程序上添加参数时是否需要提供这些值？

2) 我将如何在此处使用 Try-Catch，这会给我一个更好的错误消息吗？我实际上可以跟进的事情？

3) 有没有办法在 C# 中将 QTYORDER 值转换为小数点后 5 位？这将确保它以 #.00000 格式提交...

注意事项：

我正在使用实体框架，但我无法将存储过程映射到该表的选择插入函数，因为该 SP 用于添加零件，而另一个 SP 用于添加劳动力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:01:53.180

要回答您的几个问题，您不需要将可选参数传递给存储过程——它们将使用它们的默认值。

关于 try-catch，只需在线快速搜索并使用您的断点——我会将它放在您上面提供的整个代码块周围。应该能够更好地了解引发的异常。

需要考虑的一些额外评论：

不要尝试 int.parse，而是使用 int.TryParse：

```
int orderQty = 0;
int.TryParse(QTYORDER, out orderQty);
if (orderQty == 0)
    //You potentially have a problem with binding 
```

此外，您的代码将 QTYORDER 作为整数传递，但存储过程接受小数。改变这个：

```
cmd.Parameters.Add("@QTY", SqlDbType.Int).Value = QTYORDER; 
```

至

```
cmd.Parameters.Add("@QTY", SqlDbType.Decimal).Value = QTYORDER; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:07:17.267

Are you sure QTYORDER is not null? MVC may have lost the model binding here. Do a quick check to see if its null

put this before you add params and add a breakpoint on the bool x line to see if it hits. If it is null then there is something wrong with the model binding, check your model code

```
if(QTYORDER == null){

     bool x = true;

} 
```

Try trimming the string to ensure there is no spaces?

```
Convert.ToInt32(QTYORDER.Trim()); 
```

If you want to convert this to 5 decimal places

```
Math.Round(Convert.ToDecimal(QTYORDER.Trim()), 5); 
```

# c - 在共享库和应用程序之间传输数据

> ID：14200595
> 
> 赞同：0
> 
> 时间：2013-01-07T17:04:52.807
> 
> 标签：c, pointers, shared-libraries

我有共享库，我在其中进行一些数据生成/处理，并且我编写了一些 API 和应用程序来访问它们并传输数据。

/ ***** ** *** ** *** ** *** *******应用程序****** ** *** ** *** **** /

```
 char* data1;

 char* data2;

 genratedCamData(1, char* data1 , char *data2);

 printf(" data1 %s ",data1);
 printf(" data2 %s ",data2);
 free(data2); 
```

/ ***** ** *** ** *** ** *** *****库内******* *** ** *** ** *** ** *** ** *** *** /**

 **```
 int genratedCamData(1, char* datafirst , char *datasecond)

 {

 if(CAM==1)
 datafirst=getCam1data();

 printf(" test at lib %s ",type);

 datasecond=malloc(sizeof(char) * 100);
 sprintf(datafirst,"%s",datasecond);

 return 0;

 } 
```

我尝试了上述方法将数据获取到应用程序，但数据在库内正确打印，但在库外（在应用程序中）它不打印任何内容......

有人可以帮助我使用最佳方式来传达 b/w 库和应用程序的数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:10:09.153

由于 C 按值传递参数，包括指针，您需要将指针的*地址*`char**`, 传递给函数，以使函数能够将指针指向不同的地址，并使调用者可以看到这些更改：

```
int genratedCamData(int CAM, char** datafirst , char **datasecond)
{
    *datafirst=getCam1data();
    *datasecond=malloc(100); /* sizeof(char) is guaranteed to be 1\. */
} 
```

调用：

```
char* data1;
char* data2;
genratedCamData(1, &data1 , &data2); 
```**

# c# - C# 中的正则表达式模式 \K 替代方案

> ID：14200596
> 
> 赞同：7
> 
> 时间：2013-01-07T17:04:59.007
> 
> 标签：c#, regex

[我有一个在http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)上测试过的正则表达式，它有效，但是当我在我的 C# 应用程序中使用它时它失败了。

我的正则表达式：`(?<!\d)\d{6}\K\d+(?=\d{4}(?!\d))` 文本：4000751111115425 结果：111111

我的正则表达式有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-11-21T07:54:34.490

您遇到的这个问题是 .NET 正则表达式不支持`\K`“丢弃迄今为止匹配的内容”。

我相信您的正则表达式翻译为“匹配任何超过十`\d`位数字的字符串，尽可能多的数字，并丢弃前 6 位和后 4 位”。

我相信 .NET 兼容的正则表达式

```
(?<=\d{6})\d+(?=\d{4}) 
```

达到同样的目的。请注意，no-more- `\d`s 的负前瞻/后视是不必要的，因为它`\d+`是贪婪的 - 引擎已经尝试匹配尽可能多的数字。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2022-02-16T22:38:28.367

一般来说，`\K`操作符（从匹配内存缓冲区中丢弃所有匹配的文本）可以用两种技术模拟：

*   [环顾四周](https://www.regular-expressions.info/lookaround.html)
*   [捕获组](https://www.regular-expressions.info/brackets.html)（有和没有环视）。

例如，

*   PCRE `a+b+c+=\K\d+`（[演示](https://regex101.com/r/bWV6fG/2)）= .NET`(?<=a+b+c+=)\d+`或`a+b+c+=(\d+)`（并获取第 1 组值）
*   PCRE `^[^][]+\K.*`( [demo](https://regex101.com/r/bWV6fG/1) ) = .NET `(?<=^[^][]+)(?:\[.*)?$`( [demo](http://regexstorm.net/tester?p=%28%3f%3c%3d%5e%5b%5e%5d%5b%5d%2b%29%28%3f%3a%5c%5b.*%29%3f%24&i=03%2f16-21%3a36%3a16.512226++%5b**%5d+Some+random+Text) ) 或 (这里更好) `^[^][]+(.*)`( [demo](http://regexstorm.net/tester?p=%5e%5b%5e%5d%5b%5d%2b%28.*%29&i=03%2f16-21%3a36%3a16.512226++%5b**%5d+Some+random+Text) )。

第二个示例的问题在于，它`[^][]+`可以匹配相同的文本`.*`（这些模式重叠），并且由于两个模式之间没有明确的界限，因此仅使用后视实际上并不能正常工作，需要额外的技巧才能使其工作。

**捕获组**方法在这里是普遍的，应该适用于所有情况。

由于`\K`使正则表达式引擎“忘记”到目前为止消耗的匹配部分，因此这里最好的方法是使用*捕获组*来获取您需要在左侧上下文之后获取的匹配部分：

```
using System;
using System.Text.RegularExpressions;

public class Test
{
    public static void Main()
    {
        var text = "Text  4000751111115425";
        var result = Regex.Match(text, @"(?<!\d)\d{6}(\d+)(?=\d{4}(?!\d))")?.Groups[1].Value;
        Console.WriteLine($"Result: '{result}'");
    }
} 
```

请参阅[在线 C# 演示](https://ideone.com/WEKIS0)和[正则表达式演示](http://regexstorm.net/tester?p=%28%3F%3C!%5Cd%29%5Cd%7B6%7D%28%5Cd%2B%29%28%3F%3D%5Cd%7B4%7D%28%3F!%5Cd%29%29&i=Text%3A%204000751111115425%0D%0AResult%3A%20111111)（请参阅*表*选项卡以获取正确的结果表）。**详情**：

*   `(?<!\d)`- 左侧数字边界
*   `\d{6}`- 六位数
*   `(\d+)`-**捕获组 1**：一位或多位数字
*   `(?=\d{4}(?!\d))`- 与紧随其后的四个数字而不是紧随另一个数字的位置相匹配的正向前瞻。

# php - HighStock 不接受我的 JSON 数据

> ID：14200606
> 
> 赞同：1
> 
> 时间：2013-01-07T17:05:40.447
> 
> 标签：php, json

几天前，我发现了 HighStock。我想使用 SQL 数据库中的数据。通过 php 我读出了信息并以 JSON 样式回显它

这是脚本

```
<?php
include ("dbverbindung.php");
echo "[";
$sql = "SELECT time, amperage FROM pikkertonnode_44664399";
$erg = mysql_query($sql);
while ($data= mysql_fetch_array($erg))
{
if ($data['amperage'] == "") $data['amperage'] = 0;
echo "[".$data['time'].",".$data['amperage']."],"   ;
}
echo "]";    ?> 
```

输出看起来是这样的：

```
[[1264978800000,68],[1264978805000,50],[1264978810000,61],[1264978815000,54]] 
```

它是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:11:59.017

用这个：

```
<?php
include ("dbverbindung.php");
echo "[";
$sql = "SELECT time, amperage FROM pikkertonnode_44664399";
$erg = mysql_query($sql);
$temp_array=array();
while ($data= mysql_fetch_array($erg))
{
array_push(temp_array,data);
}
echo json_encode($temp_array);   // make json data
?> 
```

两种格式都是正确的..

```
{                                 [
  {'1264978800000':'68'},           [1264978800000,68],
  {'1264978805000':'50'},           [1264978805000,50],
  {'1264978810000':'61'},           [1264978810000,61],
  {'1264978815000':'54'}            [1264978815000,54], 
}                                 ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:19:30.613

您应该使用[`json_encode`](http://php.net/json_encode). 只需按照您想要的方式制作数组，然后让 PHP 对其进行编码。

```
<?php
include ("dbverbindung.php");
$sql = "SELECT time, amperage FROM pikkertonnode_44664399";
$erg = mysql_query($sql);

$json = array();
while ($data= mysql_fetch_array($erg)){
    if ($data['amperage'] == ""){
        $data['amperage'] = 0;
    }

    $json[] = array($data['time'], $data['amperage']);
}

echo json_encode($json);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T13:37:58.010

行。问题是 Highchart/Highstock 不接受字符串。JSONdata 正确生成

例如 [["123","12"],["123","12"],["123","12"]]

但这对“”没有用

代码应该看起来像

```
while ($data= mysql_fetch_array($erg)){
if ($data['amperage'] == ""){
    $data['amperage'] = 0;
}
$x = $data['time'];
$y = $data['amperage'];

$json[] = array( (int($x), int($y) );
} 
```

现在我有了我想要的代码.. Highstock 现在可以完美运行

[[123,12],[123,12],[123,12]]

# asp.net - ASP.NET 应用程序中的解析器错误

> ID：14200607
> 
> 赞同：0
> 
> 时间：2013-01-07T17:05:41.683
> 
> 标签：asp.net

当我在家中最新的 Windows 7 机器上运行我的简单 ASP.NET 应用程序（只是一个 Web 表单）时，它运行良好。但是，当我将它上传到 DiscountASP.NET 并尝试运行它时，我收到以下错误（我正在手动复制所有 [few] 文件）：

> 无法加载类型：MyNamespace._Default

我在 VS2012 中编译它，项目的目标是 .NET 4.0。有什么想法会导致这种情况吗？

谢谢，杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:50:44.933

选择包含 ASP.NET 表单的文件夹并将其设置为 DiscountASP.NET 控制面板中的“Web 应用程序”解决了该问题。在那之后，表格运行得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:22:51.530

确保 Page 指令的 Inherits 属性在“Default”之前有下划线，以及后面代码中的类声明。

```
public partial class _Default : System.Web.UI.Page
{
 ....
}

<%@ Page Language="C#" AutoEventWireup="true" 
    CodeFile="Default.aspx.cs" Inherits="_Default" %> 
```

此外，在 IIS 中，确保您已为 2.0 或更高版本设置了 ASP.NET，并且默认文档已添加 _Default.aspx。

# python - wxStyledTextControl 中的填充，没有结块

> ID：14200608
> 
> 赞同：1
> 
> 时间：2013-01-07T17:05:49.013
> 
> 标签：python, wxpython, scintilla

我正在尝试像这样在我的 wxpython 代码编辑器中实现第二个边距

[http://i.imgur.com/mFHtI.png](http://i.imgur.com/mFHtI.png)

我想在代码上方添加一些填充物，这样代码就不会离sizer的屋顶那么近。

我目前只剩下这个：

[http://i.imgur.com/Xs1yM.png](http://i.imgur.com/Xs1yM.png)

我从记事本++中得到了第二个边距的想法

第 1 行没有代码，因为我指出那里应该有填充，即使代码将分别从第 1 行开始。

我仍然是python的初学者......

我要问的问题是，我需要实施什么方法或风格来实现这样的事情？

我已经对演示和文档以及 Yellowbrain 进行了研究，没有一个提供填充示例。

请帮帮我，谢谢。

到目前为止的代码，以防万一：

[http://pastebin.com/FxZgzuZp](http://pastebin.com/FxZgzuZp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:36:45.837

StyledTextCtrl 开箱即用。这是 wxPython 演示的一些屏幕截图。

![在此处输入图像描述](../Images/6c4d825c1257714b91a478ca69052167.png)

![在此处输入图像描述](../Images/95eb430f58d79abbd34f4aaa43469d93.png)

还是我误会了。行号和文本区域之间的标记不是您要查找的吗？

# hibernate - hibernate.jdbc.batch_size 有用吗？

> ID：14200612
> 
> 赞同：0
> 
> 时间：2013-01-07T17:06:00.173
> 
> 标签：hibernate

我读过一些博客文章（例如： http: [//orapath.blogspot.com.br/2012/04/hibernate.html，http](http://orapath.blogspot.com.br/2012/04/hibernate.html) : [//abramsm.wordpress.com/2008/04/23/hibernate-batch- processing-why-you-may-not-be-using-it-even-if-you-think-you-are/](http://abramsm.wordpress.com/2008/04/23/hibernate-batch-processing-why-you-may-not-be-using-it-even-if-you-think-you-are/)）建议将 hibernate.jdbc.batch_size 配置属性设置为更高的值，以获得更好的处理性能批量插入/更新。

但是，浏览 Hibernate 4.1.8 源代码我可以看到，org.hibernate.cfg.Settings 中的字段 jdbcBatchSize 和反映此属性设置的相应 getter getJdbcBatchSize() 方法都没有在整个框架中使用。

那么有什么理由来配置这个设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:13:18.457

字段 Settings.jdbcBatchSize 好像没有用到，实际配置用在其他地方。我下载了 hibernate-core 的源代码，通过文本搜索可以找到 Environment.STATEMENT_BATCH_SIZE 在某些地方使用。

看看 org.hibernate.engine.jdbc.batch.internal.BatchBuilderImpl.java

文本搜索的结果

```
Search "STATEMENT_BATCH_SIZE" (23 hits in 22 files)
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\cfg\AvailableSettings.java (1 hit)
    Line 190:   public static final String STATEMENT_BATCH_SIZE = "hibernate.jdbc.batch_size";
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\cfg\ExternalSessionFactoryConfig.java (1 hit)
    Line 281:       setUnlessNull( props, Environment.STATEMENT_BATCH_SIZE, jdbcBatchSize );
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\cfg\SettingsFactory.java (1 hit)
    Line 114:       int batchSize = ConfigurationHelper.getInt(Environment.STATEMENT_BATCH_SIZE, properties, 0);
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\AbstractTransactSQLDialect.java (1 hit)
    Line 125:       getDefaultProperties().setProperty(Environment.STATEMENT_BATCH_SIZE, NO_BATCH);
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\Cache71Dialect.java (2 hits)
    Line 258:       getDefaultProperties().setProperty( Environment.STATEMENT_BATCH_SIZE, DEFAULT_BATCH_SIZE );
    Line 259:       //getDefaultProperties().setProperty(Environment.STATEMENT_BATCH_SIZE, NO_BATCH);
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\CUBRIDDialect.java (1 hit)
    Line 76:         getDefaultProperties().setProperty( Environment.STATEMENT_BATCH_SIZE, DEFAULT_BATCH_SIZE );
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\DB2Dialect.java (1 hit)
    Line 177:       getDefaultProperties().setProperty( Environment.STATEMENT_BATCH_SIZE, NO_BATCH );
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\H2Dialect.java (1 hit)
    Line 191:       getDefaultProperties().setProperty( AvailableSettings.STATEMENT_BATCH_SIZE, DEFAULT_BATCH_SIZE );
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\HSQLDialect.java (1 hit)
    Line 219:       getDefaultProperties().setProperty( Environment.STATEMENT_BATCH_SIZE, DEFAULT_BATCH_SIZE );
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\InterbaseDialect.java (1 hit)
    Line 59:        getDefaultProperties().setProperty(Environment.STATEMENT_BATCH_SIZE, NO_BATCH);
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\JDataStoreDialect.java (1 hit)
    Line 60:        getDefaultProperties().setProperty( Environment.STATEMENT_BATCH_SIZE, DEFAULT_BATCH_SIZE );
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\MckoiDialect.java (1 hit)
    Line 81:        getDefaultProperties().setProperty(Environment.STATEMENT_BATCH_SIZE, NO_BATCH);
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\MimerSQLDialect.java (1 hit)
    Line 136:       getDefaultProperties().setProperty(Environment.STATEMENT_BATCH_SIZE, "50");
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\MySQLDialect.java (1 hit)
    Line 182:       getDefaultProperties().setProperty(Environment.STATEMENT_BATCH_SIZE, DEFAULT_BATCH_SIZE);
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\Oracle8iDialect.java (1 hit)
    Line 200:       getDefaultProperties().setProperty( Environment.STATEMENT_BATCH_SIZE, DEFAULT_BATCH_SIZE );
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\Oracle9Dialect.java (1 hit)
    Line 87:        getDefaultProperties().setProperty(Environment.STATEMENT_BATCH_SIZE, DEFAULT_BATCH_SIZE);
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\PostgreSQL81Dialect.java (1 hit)
    Line 154:       getDefaultProperties().setProperty(Environment.STATEMENT_BATCH_SIZE, DEFAULT_BATCH_SIZE);
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\SAPDBDialect.java (1 hit)
    Line 136:       getDefaultProperties().setProperty(Environment.STATEMENT_BATCH_SIZE, DEFAULT_BATCH_SIZE);
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\TeradataDialect.java (1 hit)
    Line 110:       getDefaultProperties().setProperty( Environment.STATEMENT_BATCH_SIZE, NO_BATCH );
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\dialect\TimesTenDialect.java (1 hit)
    Line 84:        getDefaultProperties().setProperty(Environment.STATEMENT_BATCH_SIZE, DEFAULT_BATCH_SIZE);
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\engine\jdbc\batch\internal\BatchBuilderImpl.java (1 hit)
    Line 55:        size = ConfigurationHelper.getInt( Environment.STATEMENT_BATCH_SIZE, configurationValues, size );
  C:\Documents and Settings\cfweber\Desktop\hibernate\core\org\hibernate\engine\jdbc\batch\internal\BatchBuilderInitiator.java (1 hit)
    Line 55:                    ConfigurationHelper.getInt( Environment.STATEMENT_BATCH_SIZE, configurationValues, 1 ) 
```

# html - 模拟高分辨率显示器以测试网页

> ID：14200617
> 
> 赞同：4
> 
> 时间：2013-01-07T17:06:36.730
> 
> 标签：html, browser, web, high-resolution

我有一个网页可以在多台电视显示器上运行，6 台 1080p 电视排成两排，使用这些适配器将多个显示器聚合在一个提要中。这意味着我正在开发 ~6000x2160 的分辨率，这似乎与其他人在移动设备上进行测试时遇到的问题完全相反。

问题是我实际上需要以该分辨率制作浏览器窗口才能正确测试我的应用程序。我想了解如何定位和调整页面元素的大小，所以我不需要一次看到整个屏幕。我想知道是否有人以前遇到过这个问题。在我尝试深入研究虚拟机希望它们支持如此高分辨率之前，我想在这里问一下这个问题。

我知道由于 DPI 差异，我在传统显示器上执行的任何测试都不准确，但总比没有好，因为我不能一直在客户端上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:20:23.080

您能否在您的布局周围添加一个 div 并使用您需要的特定尺寸强制浏览器具有水平和垂直滚动条，然后您可以滚动以全分辨率查看或缩小（按住 ctrl，按 - 键）以获取概览完整的布局？

可能不完美，但总比没有好...

# objective-c - How to get notification in view controller when bringSubviewToFront is called?

> ID：14200619
> 
> 赞同：0
> 
> 时间：2013-01-07T17:06:38.880
> 
> 标签：objective-c, cocoa-touch, uiview, uiviewcontroller

My application needs a notification in the view controller when I call `bringSubviewToFront()`. I tried `viewDidAppear` but it doesn't work (Obviously I shouldn't work because view is already in the stack). I have gone through the documentation of view & viewController but didn't find anything that can solve my problem. Is there any way to get view controller notified?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:09:03.073

您不会收到`viewDidAppear`通知`bringSubviewToFront`。当您将视图添加为子视图或更改视图的`hidden`属性时，它会被触发。您还必须确保您的 ViewController 已作为子视图控制器添加到其父级，使用 `addChildViewController`.

# grails - Consuming a WSDL in Grails

> ID：14200621
> 
> 赞同：2
> 
> 时间：2013-01-07T17:06:52.527
> 
> 标签：grails, wsdl

I have been handed a .WSDL file which I need to test within a Grails Framework.

Any suggestions how to go about this.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:45:50.083

看看[http://grails.org/plugin/cxf](http://grails.org/plugin/cxf)和[http://grails.org/plugin/cxf-client](http://grails.org/plugin/cxf-client)插件。它们易于使用并由 Apache CXF 提供支持 - [https://cxf.apache.org/](https://cxf.apache.org/)

客户端插件有一个 wsdl2java 脚本，它将生成可以在 Grails 应用程序中使用的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T17:19:36.280

您可以从文档本身开始：http: [//grails.org/Calling+External+WebServices](http://grails.org/Calling+External+WebServices)

# xpath - xerces-c 3.1 XPath 评估

> ID：14200623
> 
> 赞同：3
> 
> 时间：2013-01-07T17:06:55.987
> 
> 标签：xpath, xerces-c

我找不到太多使用 xerces-c 3.1 评估 XPath 的示例。

给定以下示例 XML 输入：

```
<abc> 
    <def>AAA BBB CCC</def>
</abc> 
```

我需要通过 XPath“/abc/def/text()[0]”检索“AAA BBB CCC”字符串。

以下代码有效：

```
XMLPlatformUtils::Initialize();
// create the DOM parser
XercesDOMParser *parser = new XercesDOMParser;
parser->setValidationScheme(XercesDOMParser::Val_Never);
parser->parse("test.xml");
// get the DOM representation
DOMDocument *doc = parser->getDocument();
// get the root element
DOMElement* root = doc->getDocumentElement();

// evaluate the xpath
DOMXPathResult* result=doc->evaluate(
    XMLString::transcode("/abc/def"), // "/abc/def/text()[0]"
    root,
    NULL,
    DOMXPathResult::ORDERED_NODE_SNAPSHOT_TYPE, //DOMXPathResult::ANY_UNORDERED_NODE_TYPE, //DOMXPathResult::STRING_TYPE,
    NULL);

// look into the xpart evaluate result
result->snapshotItem(0);
std::cout<<StrX(result->getNodeValue()->getFirstChild()->getNodeValue())<<std::endl;;

XMLPlatformUtils::Terminate();
return 0; 
```

但我真的很讨厌这样：

```
result->getNodeValue()->getFirstChild()->getNodeValue() 
```

它必须是一个节点集而不是我想要的确切节点吗？

我尝试了其他格式的 XPath，例如“/abc/def/text()[0]”和“DOMXPathResult::STRING_TYPE”。xerces 总是抛出异常。

我做错什么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:08:46.293

我没有使用 Xerces C++ 进行编码，但它似乎实现了 W3C DOM Level 3，因此基于此我建议选择一个具有类似路径的元素节点，`/abc/def`然后简单地访问`result->getNodeValue()->getTextContent()`以获取元素的内容（例如`AAA BBB CCC`）。

据我了解 DOM API，如果您想要一个字符串值，那么您需要使用路径`string(/abc/def)`，然后`result->getStringValue()`应该这样做（如果该`evaluate`方法请求任何类型或 STRING_TYPE 作为结果类型）。

其他方法，如果您知道您只对文档顺序中的第一个节点感兴趣，您可以评估`/abc/def`然后`FIRST_ORDERED_NODE_TYPE`访问`result->getNodeValue()->getTextContent()`。

# jquery - jquery：根据名称和祖先选择元素

> ID：14200624
> 
> 赞同：1
> 
> 时间：2013-01-07T17:07:00.433
> 
> 标签：jquery

我想将点击事件附加到名为“page_chooser”的元素，但前提是它们有一个 id =“posting”的祖先。

为了获取名为“page_chooser”的元素，我这样做：

```
$("[name=page_chooser]").click(function() { 
```

如何添加额外的祖先限制？我想这样做是因为我在几个网页上都使用了名称“page_chooser”，但是点击功能应该不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:08:18.793

祖先选择器：

```
$("#posting [name=page_chooser]").on('click', function () { 
```

`page_chooser`或者在元素异步加载的情况下使用委托：

```
$("#posting").on('click', '[name=page_chooser]', function () { 
```

# newline - Line ending issues? Windows > Mac

> ID：14200627
> 
> 赞同：0
> 
> 时间：2013-01-07T17:07:14.677
> 
> 标签：newline

I'm unclear if this is a line ending issue or something else. I'm getting a zipped directory of code from a developer working on windows (using dreamweaver set to CR LF) and trying to manually add that to git. The files turn up 100% changed unless I set git's core.autocrlf to false but even with that setting I'm getting the files double spaced. I thought windows was adding \r\n so I tried removing it with both vim (^M):

`:%s/^V^M//g`

and perl:

`perl -pe 's/\r\n|\n|\r/\n/g' inputfile > outputfile`

What's strange is if I remove new lines (\n) with vim `:%s/\n//g` the file contains no line breaks at all. If I use vim's `:set list` on the blank lines I'm just getting `$`. I'm obviously missing something but I would think I'd be able to get the file, remove the windows line breaks, and be able to add to git with it only showing the actual changes. Any help would be greatly appreciated as the files are really large (LOC) and there are many of them so a manual (copy/paste) doesn't seem like a great option.

Edit: I just confirmed it's "double spaced" on windows (using notepad++) and setting the "line break type" in Mac dreamweaver has no effect.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T00:06:30.690

您需要让 Windows 上的人员将其换行符类型更改为“LF (Unix)”。

编辑：在 CS5 中，它位于：Edit>Preferences>Code Format>Line Break Type

# database - 休眠批量删除

> ID：14200630
> 
> 赞同：4
> 
> 时间：2013-01-07T17:07:29.280
> 
> 标签：database, hibernate

所以我直接从我的数据库中检索了一个对象列表并希望删除它们。但是，从文档看来，我必须在一个字符串中构造整个 SQL 查询，并将该字符串传递给 createQuery 方法才能删除。难道没有更好的方法吗？

```
 List<Foo> confirm = (List<Foo>) criteria.list();
    session.delete(confirm.get(0)); //Works for single object, 
                                    //what about batching? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T19:10:28.970

您可以遍历实体并为每个实体调用 delete，或者构造一个删除查询：

```
String hql = "delete from Foo f where f.id in :fooIds";
session.createQuery(hql).setParameterList("fooIds", fooIds).executeUpdate(); 
```

不过，请务必了解与此类 DML 查询相关的限制和注意事项。它们在[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#batch-direct)中进行了描述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-16T06:16:32.270

`String hql = "delete from Foo f where f.id in :fooIds";` 应该是 `String hql = "delete from Foo f where f.id in (:fooIds)";` 或者这样的异常会抛出：“线程“主”org.hibernate.hql.ast.QuerySyntaxException中的异常：意外令牌：“我的休眠版本是3.6.0.Final。

# c++ - 使用套接字发送 Iplimage

> ID：14200631
> 
> 赞同：2
> 
> 时间：2013-01-07T17:07:31.510
> 
> 标签：c++, c, qt, sockets, opencv

我正在尝试从通过 USB 连接到 Raspberry Pi 的 Logitech HD cam 捕获帧，RP 正在运行 arch linux，并且我正在使用 OpenCV C api 和 TCP 客户端。

TCP服务器在ubuntu下运行c++(QT)。

我将 frame->imageData 存储在缓冲区中，然后将数据发送到缓冲区中。

这是一个概念证明，我可以将帧保存到缓冲区，然后从缓冲区重建一个新帧，即 tmpbuffer，实际上这段代码运行良好：

```
CvCapture *capture = cvCaptureFromCAM(1);
cvNamedWindow( "mywindow", CV_WINDOW_AUTOSIZE );
    int i =1;

   while ( 1 ) {
     // Get one frame
     IplImage* frame = cvQueryFrame( capture );
     CvSize size;
     size.height = 480;
  size.width = 640;
     IplImage* tmpframe = cvCreateImageHeader(size, IPL_DEPTH_8U, 3); //create a new frame
     if ( !frame ) {
       //fprintf( stderr, "ERROR: frame is null...\n" );
       getchar();
       break;
     }else
     {
         //std::cout<<i<<std::endl;
         char buffer[frame->imageSize];
         snprintf(buffer,frame->imageSize,"%s",frame->imageData);
         //printf("frame->height= %s\n",buffer);

         tmpframe->imageData = buffer;
         printf("data %s\n",tmpframe->imageData);

         //snprintf(IDbuffer,10,"%d",frame->ID);
         //printf("frame->ID= %s\n",IDbuffer);
         i++;
     }
     cvShowImage( "mywindow", tmpframe ); 
```

这是我的 client.c 文件：

```
#include <opencv/cv.h>
 #include <opencv/highgui.h>
 #include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>

void error(char *msg)
{
 perror(msg);
 exit(0);
}

int main(int argc,char *argv[])
{

int sockfd,portno,n;
 struct sockaddr_in serv_addr;
 struct hostent *server;

 if(argc <3)
 {
  fprintf(stderr,"usage %s hostname portname port\n",argv[0]);
  exit(0);
 }

 portno = atoi(argv[2]);
 sockfd = socket(AF_INET , SOCK_STREAM,0);

 if(sockfd < 0)
 {
  error("ERROR OPENING SOCKET");
 }

 server = gethostbyname(argv[1]);
 if(server == NULL)
 {
  fprintf(stderr,"ERROR,NO SUCH HOST\n");
  exit(0);
 }

 bzero((char*)&serv_addr,sizeof(serv_addr));
 serv_addr.sin_family = AF_INET;

 bcopy((char*)server->h_addr,(char*)&serv_addr.sin_addr.s_addr,server->h_length);
 serv_addr.sin_port = htons(portno);

 if(connect(sockfd,&serv_addr,sizeof(serv_addr)) < 0)
 {
  error("ERROR CONNECTING");
 }
    CvCapture *capture = cvCaptureFromCAM(1);
       // Show the image captured from the camera in the window and repeat
        int i =1;

       while ( 1 ) {
         // Get one frame
         IplImage* frame = cvQueryFrame( capture );
         if ( !frame ) {
           //fprintf( stderr, "ERROR: frame is null...\n" );
           getchar();
           break;
         }else
         {
             i++;
         }

         char *msg = frame->imageData;
         char buffer[frame->imageSize];
         bzero (buffer,frame->imageSize);
         snprintf(buffer,frame->imageSize,"%s",msg);
 n=write(sockfd,buffer,frame->imageSize);
 if(n <0)
 {
  error("ERROR READING FROM SOCKET");
 }
 //printf("%s\n",buffer);

 }
return 0;
} 
```

这就是我在服务器上接收数据的方式：

```
void HostConnector::readyRead()
{
    QByteArray Data = socket->readAll();

    CvSize size;
    size.height = 480;
    size.width = 640;
    IplImage *frame = cvCreateImageHeader(size, IPL_DEPTH_8U, 3);

    frame->imageData = Data.data();
    cvShowImage( "mywindow", frame );

} 
```

但是服务器崩溃了！！一个`segmentation fault`在

```
cvShowImage( "mywindow", frame ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:15:42.367

在没有真正仔细检查代码的情况下，我看到了两个问题：

*   您正在使用`printf(3)`-style 函数来格式化二进制数据。那是错误的^(TM)。结果字符串的长度与图像的长度不同，二进制数据的中间可能有零字节，或者没有零终止符。
*   您在`char buffer[frame->imageSize]`其范围之外使用临时缓冲区 ( ) - 这可能是分段错误的原因。

# php - 使用 jQuery 解析 JSON 对象的问题

> ID：14200635
> 
> 赞同：0
> 
> 时间：2013-01-07T17:07:56.380
> 
> 标签：php, javascript, jquery, html, json

我的 php 文件是这样做的：

```
<?php include('connection.inc.php'); ?>
<?php header("Content-type: application/json"); ?>
<?php

    $sth = mysql_query("select * from ios_appointments a join ios_worker w join ios_partners p where a.workerid_fk = w.workerid and w.partnerid_fk =  p.partnerid and p.code = 'DEMO6003'");
    $rows = array();
    while($r = mysql_fetch_assoc($sth)) {
        $rows[] = $r;
    }
    print json_encode($rows);

?> 
```

它返回这个 JSON 输出：

```
[{"appointmentId":"25","start":"2013-01-07 14:45:00","end":"2013-01-07 15:45:00","workerid_fk":"1","userid_fk":"22","isActive":null,"workerid":"1","prename":"Sarah","lastname":"Gonzalez","avatar":"megan.jpg","lineup":"Herren\/Damen","languages":"DE EN","partnerid_fk":"6","partnerid":"6","code":"DEMO6003","partnerName":"Demo Partner","street":"bla 1","zipCode":"bla","city":"bla","workers":"n\/a","email":"test@test.com","phone":"+41414441111","slogan":"Demo Partner zum Erkunden der App"},{"appointmentId":"26","start":"2013-01-10 11:15:00","end":"2013-01-10 12:15:00","workerid_fk":"1","userid_fk":"22","isActive":null,"workerid":"1","prename":"Sarah","lastname":"Gonzalez","avatar":"megan.jpg","lineup":"Herren\/Damen","languages":"DE EN","partnerid_fk":"6","partnerid":"6","code":"DEMO6003","partnerName":"Demo Partner","street":"bla 1","zipCode":"bla","city":"bla","workers":"n\/a","email":"test@test.com","phone":"+41414441111","slogan":"Demo Partner zum Erkunden der App"}, ...] 
```

现在我尝试使用此脚本解析 html 文件中的 JSON 输出：

```
 <script type="text/javascript">
       $.getJSON('<link to php file>', function(data) {
            $.each(data, function(i, appointment) {
                alert('entered each()');
                var id = appointment.appointmentid;

                console.log('appointmentid ' + id);
            });
        });
  </script> 
```

`$.getJSON`被称为，但是`data`是`null`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:34:30.030

你只需要大写`i`in `appointment.appointmentid`;

```
appointment.appointmentId; // <-- since your property has it capitalized 
```

# jekyll - Octopress 无法使用代码块构建

> ID：14200637
> 
> 赞同：7
> 
> 时间：2013-01-07T17:08:01.807
> 
> 标签：jekyll, octopress, jekyll-extensions

我尝试做类似这个[Octopress 代码块的事情](http://octopress.org/docs/plugins/codeblock/)

但我不能让它工作。

它总是显示以下错误。我的机器是Windows 7。

```
$ rake generate
## Generating Site with Jekyll
unchanged sass/screen.scss
Configuration from d:/MyProject/Git/octopress/_config.yml
Building site: source -> public
Liquid Exception: No such file or directory - python c:/Ruby193/lib/ruby/gems/1.
9.1/gems/pygments.rb-0.3.7/lib/pygments/mentos.py in 2013-01-06-octopress.markdo
wn
c:/Ruby193/lib/ruby/gems/1.9.1/gems/posix-spawn-0.3.6/lib/posix/spawn.rb:162:in
`spawn'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/posix-spawn-0.3.6/lib/posix/spawn.rb:162:in
`spawn'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/posix-spawn-0.3.6/lib/posix/spawn.rb:307:in
`popen4'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/pygments.rb-0.3.7/lib/pygments/popen.rb:41:i
n `start'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/pygments.rb-0.3.7/lib/pygments/popen.rb:203:
in `mentos'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/pygments.rb-0.3.7/lib/pygments/popen.rb:192:
in `highlight'
d:/MyProject/Git/octopress/plugins/pygments_code.rb:24:in `pygments'
d:/MyProject/Git/octopress/plugins/pygments_code.rb:14:in `highlight'
d:/MyProject/Git/octopress/plugins/code_block.rb:82:in `render'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/liquid-2.3.0/lib/liquid/block.rb:94:in `bloc
k in render_all'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/liquid-2.3.0/lib/liquid/block.rb:92:in `coll
ect'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/liquid-2.3.0/lib/liquid/block.rb:92:in `rend
er_all'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/liquid-2.3.0/lib/liquid/block.rb:82:in `rend
er'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/liquid-2.3.0/lib/liquid/template.rb:124:in `
render'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/liquid-2.3.0/lib/liquid/template.rb:132:in `
render!'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/convertible.rb:79:i
n `do_layout'
d:/MyProject/Git/octopress/plugins/post_filters.rb:167:in `do_layout'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/post.rb:195:in `ren
der'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:200:in `blo
ck in render'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:199:in `eac
h'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:199:in `ren
der'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:41:in `proc
ess'
c:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/bin/jekyll:264:in `<top (requi
red)>'
c:/Ruby193/bin/jekyll:23:in `load'
c:/Ruby193/bin/jekyll:23:in `<main>'
Build Failed 
```

没有代码块，它工作正常。我已经为 Windows 安装了 python 2.73 和 3.3，但不是运气。

我也尝试过 pygments 0.3.7 和 ruby​​python 0.6.3。它不起作用。

有趣的是我在谷歌上搜索了几个小时，我没有看到其他人有同样的问题。

我必须错过一些非常简单的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T19:14:39.060

我终于解决了这个问题。事实证明 Python 的 PATH 设置不正确。

似乎 Python 没有自动设置路径。

我所要做的就是添加路径。

# jquery - How to load jQuery tools plugin only after click

> ID：14200642
> 
> 赞同：0
> 
> 时间：2013-01-07T17:08:05.333
> 
> 标签：jquery, tabs, onload, jquery-tools

Okay guys what I would like to happen is initialize the jQuery Tool plugin only after one of the anchor tags has been clicked on.

**This is what I have in my JS file:**

```
$(".tab-1-tabs ul").tabs("div.tab-1-container > div"); 
```

** This is the HTML that gets generated after the script above is called:**

```
<li><a href="#" class="service current">1</a></li>
<li><a href="#" class="service">2</a></li>
<li><a href="#" class="service">3</a></li>
<li><a href="#" class="service">4</a></li> 
```

The problem with the generated HTML is that there is a class of current that gets injected when the plugin loads and I have CSS styling in place that gives that anchor tag a certain background image that shows it's active. I am also hiding the content of that particular tabs pane.

**This is what I think I can do but does not work:**

```
$(".tab-1-tabs ul").tabs("div.tab-1-container > div", { onBeforeClick: function(event, tabIndex) {
        $('.tab-1-tabs ul li a').removeClass('current');
    }
}); 
```

I would like to have the page load without the tab functionality loading that applies the current class but instead only load when one of those list items get clicked only then will current get applied to the anchor tag.

I want to give the impression that nothing has been selected unless they click on any of those anchor tags.

**Or maybe something like:**

```
$('#link').click(function(e) {
    e.preventDefault();
    $(".tab-1-tabs ul").tabs("div.tab-1-container > div");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:18:58.343

我想你正在寻找这样的东西：

```
$("#link").click(function (){
  $.getScript("somescript.js", function(){
   console.log("loaded script");
 });
}); 
```

当您的链接被点击时，`$.getScript`将加载到脚本中。

# css - bottom border width for text

> ID：14200647
> 
> 赞同：-1
> 
> 时间：2013-01-07T17:08:26.647
> 
> 标签：css, underline

I have some text which I want underlined. Now, I don't just want the actual text to underline, I want the line to stretch across the screen.

I do:

```
H4{align:left; font-style: bold; border-bottom: 1px black solid;} 
```

However, I don't want the line to run the entire width of the screen. I only want it to be say 750px wide or a percentage of the screen. I try:

```
H4{align:left; font-style: bold; border-bottom: 1px black solid; width:750px;} 
```

But this does not work. The line still runs the entire width of the page. Any tips?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:10:53.003

用一个`<hr />`

然后在CSS中：

```
hr{
    width: 75%;
    border: solid #DDD;
    border-width: 1px 0 0;
    clear: both;
    margin: 10px 0 30px;
    height: 0;
    margin-left: auto;
    margin-right: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:12:04.663

我怀疑您还有其他一些 CSS 覆盖了您的定义。例如，您的 CSS 确实按预期运行：http: [//jsfiddle.net/pvjvA/1/](http://jsfiddle.net/pvjvA/1/)

```
h4 {
  text-align:left; 
  font-style: bold; 
  border-bottom: 1px black solid; 
  width:750px;
} 
```

# junit - Why can't I run the same test twice in JUnit

> ID：14200648
> 
> 赞同：0
> 
> 时间：2013-01-07T17:08:26.627
> 
> 标签：junit, webdriver

I'm using webdriver and JUnit to write tests for a website. The website has 4 levels of users. The tests I'm writing are mainly to confirm they can or cannot use a particular feature on the site, and that the feature works.

Currently I have my test project setup so that it runs in Chrome, FF and IE. First logging in as a user and then running a set of test cases. Some of these test cases are repeated for multiple types of users so my wish is to be able to user the same test case twice over multiple suites but when I try this running all the suites together JUnit never gives me a pass, fail or error the second time it's suppose to run the shared test cases.

Is what I'm trying to do possible with JUnit? How should I go about doing this?

I have my test suites layed out as follows:

AllTests

```
User1
    Test something shared
    Test something unique
User2
    Test something shared
    Test something unique
User3
    Test something unique
User4
    Test something unique 
```

This is what my results looks like when the tests complete. As you can see it should have failed the suite on the first user on the Edit test(I coded it to fail purposely) but doesn't show an icon at all, and the suite comes back saying it worked fine.

![Results](../Images/4f211101cf578a0f44f14b1d1730b12d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:45:08.357

一种方法是使用类层次结构而不是测试套件。您可以为每个用户类型创建一个类，每个类都从包含共享测试的基类扩展而来。

# rtc - 如何找到隐藏的变更集

> ID：14200649
> 
> 赞同：1
> 
> 时间：2013-01-07T17:08:32.257
> 
> 标签：rtc

这个问题与：

[为什么接受变更集时找不到所有变更集？](https://stackoverflow.com/questions/14197628/why-cant-all-change-sets-be-found-when-accepting-change-sets)

如果 RTC 发现通过接受一个变更集，一些依赖于该变更集的变更集将不被接受，是否可以查看这些变更集是什么？

![在此处输入图像描述](../Images/fdf2a0343f251de1f36f5cdc057e0419.png)

接受变更集似乎非常冒险，并且不能 100% 确定被接受的变更集包含与交付变更集的开发人员预期的相同的源代码文件变更？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:20:08.627

您可以做的是添加已在*源流*上交付的开发人员的 repo 工作区。

您可以将该 repo 工作区添加为您自己的 repo 工作区（用于合并的那个）的流目标

通过将新的流目标设置为当前，您可以快速查看缺少的更改集。

* * *

当然，真正的问题是我刚刚提出的内容无法扩展：如果您有多个开发人员进行了*部分*交付（缺少中间更改集），那么您需要依次查看每个开发人员的 repo 工作区。

这就是为什么您自 2007 年以来（！）拥有“阻止程序”工作项“[增强 24822](https://jazz.net/jazz/web/projects/Rational%20Team%20Concert#action=com.ibm.team.workitem.viewWorkItem&id=24822) ”：

> “确认内容接受”对话框应该更具体（在出现空白异常时提供填补空白）

...但它*仍然*没有解决，即使在最新的 RTC4.x 中也是如此。

# jquery - jquery遍历表

> ID：14200657
> 
> 赞同：0
> 
> 时间：2013-01-07T17:08:49.000
> 
> 标签：jquery, jquery-traversing

当我单击链接“zmeniť pozíciu”时，我想将其最接近的 img 保存到变量。

```
<table border="1">
    <tbody> 
        <tr>        
            <th rowspan="3">1</th>
            <th>Nadpis</th>
            <td colspan="9">Eiusmod tempor</td>
            <td> <a href="#">zmeniť</a> </td>
            <td rowspan="3"> <a class="zmenit-poziciu" href="#">zmeniť pozíciu</a> </td>
        </tr>
        <tr>
            <th>Text</th>
            <td colspan="9">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam ...
            </td>
            <td> <a href="#">zmeniť</a> </td>
        </tr>
        <tr class="obrazok">
            <th>Obrázok</th>
            <td colspan="9"> <img alt="img" src="http://lorempixel.com/500/120/sports/1"> </td>
            <td ><a href="#">zmeniť</a></td>

        </tr>

    </tbody>
</table> 
```

我试过了，但它不起作用

```
$(".zmenit-poziciu").click(function() {

        var img = $(this).parent().closest("obrazok").html();
        alert(img);
        return false
    }); 
```

[演示](http://jsfiddle.net/XCxjX/6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:12:42.017

使用了错误的选择器。

改变：-

```
var img = $(this).parent().closest("obrazok").html(); 
```

到：-

```
var img = $(this).parent().closest(".obrazok").html(); 
```

使用您当前的选择器，您实际上是在寻找一个名为 obrazok 的标签，我猜您的文档中没有该标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:16:37.763

Closest 为您*提供与层次结构较高的选择器匹配的最接近的元素*。[文档](http://api.jquery.com/closest/)

从文档：

> 对于集合中的每个元素，通过测试元素本身并向上遍历其在 DOM 树中的祖先来获取与选择器匹配的第一个元素。

在您的情况下，从单击的链接查看时，层次结构中的`tr`匹配`.obrazok`并不更高。

您将需要遍历 DOM 并获取 DOM 中最近的元素的东西。我为另一个我认为应该有帮助的问题发布的这个答案：[https ://stackoverflow.com/a/12873187/921204](https://stackoverflow.com/a/12873187/921204)

你可以像这样使用它：

```
$(".zmenit-poziciu").click(function() {
    var img = nextInDOM('.obrazok', $(this));
    alert(img);
    return false
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T17:22:25.587

你可以得到这样的图像

```
$(".zmenit-poziciu").click(function () {
  var img = $(this)
            .closest('tr') // get to the tr level
            .nextAll(".obrazok:first") // find the next tr sibling with class=obrazok
            .find('img'); // find the img
  alert(img.attr('src'));
  return false;
}); 
```

[http://jsfiddle.net/wirey00/Z5CeE/](http://jsfiddle.net/wirey00/Z5CeE/)

# actionscript-3 - 为什么在这种情况下从 Event 继承不起作用？

> ID：14200664
> 
> 赞同：0
> 
> 时间：2013-01-07T17:09:12.743
> 
> 标签：actionscript-3, flash, apache-flex, inheritance, actionscript

给定以下代码：

C类事件：

```
public class CEvent extends Event
{
    public static const TYPE:String = "cEvent";

    private var m_strCode:String;
    public function get code():String
    {
        return m_strCode;
    }

    public function CEvent(pCode:String, bubbles:Boolean=false,
            cancelable:Boolean=false)
    {
        super(TYPE, bubbles, cancelable);
        m_strCode = pCode;
    }
} 
```

A类：

```
dispatchEvent(new CEvent(MY_CONST)) 
```

B类：

```
m_a = new A();
m_a.addEventListener(CEvent.TYPE, onCEvent);
.
.
.

private function onCEvent(pEvent:CEvent):void
{
    switch (pEvent.code)
    {           
        case A.MY_CONST:
        dispatchEvent(pEvent);
    }
} 
```

C类：

```
m_b = new B();
m_b.addEventListener(CEvent.TYPE, onCEvent);
.
.
.
private function onCEvent(pEvent:CEvent):void
{ // breaks right here
} 
```

在最初从 A 类调度它之后，当它在 C 类中断时出现此错误：

```
Error #1034: Type Coercion failed: cannot convert flash.events::Event@9861089 to
<path>.CEvent. 
```

这似乎没有多大意义，而且似乎完全违背了继承的工作方式。即使 Adob​​e 的 dispatchEvent() 实现中有代码专门通过并删除通过继承添加的任何内容，并且只是分派一个“正常”事件实例，这应该会导致它在 B 类而不是 C 类中中断。

有人可以解释一下吗？谢谢。

编辑：顺便说一下，更改 B 类的代码来执行此操作会使一切正常：

```
dispatchEvent(new CEvent(pEvent.code)); 
```

我仍然需要了解问题所在。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T17:21:35.683

发生错误是因为您尚未`clone()`在自定义事件中实现该方法。

当您重新调度一个事件（在您的 C 类中）时，Flash 会克隆该事件，而不仅仅是重新调度原始事件。

因此，重新调度的事件是一个普通的旧`Event`对象，因为这是默认`clone()`方法返回的。

通常，您应该始终`clone()`为您的自定义事件实现一个方法。这很简单。在这种情况下，它应该看起来像这样：

```
override public function clone():Event
{
    return new CEvent(m_strCode, bubbles, cancelable);
} 
```

# plugins - 在 3ds max 插件中从硬边创建平滑组

> ID：14200669
> 
> 赞同：2
> 
> 时间：2013-01-07T17:09:39.170
> 
> 标签：plugins, 3dsmax, 3ds

我需要为 3ds Max 实现一个导入器，它将加载一些自定义网格数据。我已经实现了大部分加载代码，但我还有一个问题需要解决。

我需要使用的数据格式使用称为“硬边”的结构来描述表面平滑度，但 3ds Max 使用“平滑组”，虽然这两种方法都工作得很好，但我需要某种方法将一种转换为第二种。

基本上我有一些网格顶点/面加载到 3ds 中，现在我需要根据我的文件中的硬边列表计算这些面的平滑组。

您能否指出任何有助于我实现转换的算法或任何线索？

我尝试搜索google等，有很多关于平滑组的教程和文章，但从3ds Max用户（建模）的角度来看。我找不到任何关于对代码执行相同操作的内容（而且我不会为此询问 API，我知道 API，但我需要一种算法来计算 SG）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-04T16:01:25.810

好的，我找到了一些解决方法...

它使用 3D MAX 内部代码而不是我自己的，但至少它可以工作：

假设我有一个边缘结构的列表或向量：

```
struct Edge
{
    int nEd0;
    int nEd1;
}; 
```

还有一个检查边缘是否在列表中的函数：

```
bool findHardEdge( int v1, int v2 ); 
```

这是使用 MNMesh 类从硬边计算平滑组的代码：

```
MNMesh mm = *pMesh; // pMesh contains vert/face data already and is copied to MNMesh
mm.FillInMesh();    // computes helper data in MNMesh
for( int i = 0; i < mm.nume; i++ ) // iterate over all edges
{
    int v1 = mm.E(i)->v1;
    int v2 = mm.E(i)->v2;

    bool found = findHardEdge( v1, v2 );    // check if the edge is a 'hard' one

    if( found )
        mm.E(i)->SetFlag( 32 );     // mark an edge with some flag
}
mm.SmoothByCreases( 32 );       // this method does the job
mm.OutToTri( *pMesh );          // copy data back to the original mesh instance 
```

我意识到这段代码很慢，特别是对于更大的网格，但这也是我想出的最简单的事情。如果您知道任何更好的方法，请告诉我:)

# iphone - 如何只允许特定视图旋转？（苹果手机）

> ID：14200672
> 
> 赞同：0
> 
> 时间：2013-01-07T17:09:54.567
> 
> 标签：iphone, xcode, rotation, admob

我正在安装 AdMob 的广告，并且有一个 GADBannerView。

安装后会出现一个banner，点击后会滑出一个页面覆盖整个屏幕，并在其中显示广告内容。

问题是，某些广告内容，例如视频，必须横向播放。但是，我不希望我的应用程序的其他部分旋转，因为该应用程序不是为横向查看而设计的。

那么，我怎样才能实现可以实现这种功能的东西呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:06:15.433

尝试为此使用通知。每次更改您的设备方向时，通知都会调用选择器。

把这个写在你的 viewDidLoad 中：

```
 [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];    
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(setScreenWithDeviceOrientation:) name:@"UIDeviceOrientationDidChangeNotification" object:nil]; 
```

然后定义选择器如下：

```
-(void)setScreenWithDeviceOrientation:(NSNotification *)notification
{
  UIDeviceOrientation orientation=[[UIDevice currentDevice] orientation];

  if(orientation==UIInterfaceOrientationPortrait)  //Portrait orientation
    {
       // setView frame for portrait mode    
    }
    else if(orientation==UIInterfaceOrientationPortraitUpsideDown)  // PortraitUpsideDown
    {
        // setView frame for upside down portrait mode 
    }
    else if(orientation==UIInterfaceOrientationLandscapeLeft)
    {
       // setView frame for Landscape Left mode 
    }
    else if(orientation==UIInterfaceOrientationLandscapeRight)  //landscape Right
    {
        // setView frame for Landscape Right mode 
    }
    else
    {
        NSLog(@"No Orientation");

    }

} 
```

每次您的设备改变方向时都会触发此方法。根据当前方向，您应该调整视图。

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:04:27.243

你在使用 iOS 6 吗？在这种情况下，您应该能够限制视图控制器处理的方向。例如，在处理 GADBannerView 的视图控制器中，您可以放置​​：

```
// Tell the system what we support
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}

// Tell the system It should autorotate
- (BOOL) shouldAutorotate {
    return NO;
}

// Tell the system which initial orientation we want to have
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
} 
```

这应该使您的视图控制器仅支持纵向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T17:14:51.367

你看过这个问题和答案吗？这解释了单个视图如何在应用程序的其余部分不支持的特定方向上工作：

[仅自动旋转 MpMoviePlayerControler iOS 6](https://stackoverflow.com/questions/13773179/autorotate-only-mpmovieplayercontroler-ios-6/13798890#13798890)

# python - 动态更新和 API - 绑定还是其他？

> ID：14200676
> 
> 赞同：0
> 
> 时间：2013-01-07T17:10:15.953
> 
> 标签：python, dns, bind

在我工作的地方，我们几乎没有即将推出的需要动态 DNS 功能的项目，例如。能够动态插入/修改/删除 DNS 记录。

到目前为止，我们一直在使用简单的 Bind 设置，只有一个 master 和几个 slave。Master 的数据（区域文件）在 git 中，我们有一个简单但非常有效的 Fabric 文件，我们使用它来确保所有更改都提交给 git，然后将更改部署到 Master，从而将更改进一步传播到从站。

我们使用视图，我们经常使用它们，考虑到我们有多少内部资料，必须保留这种功能，即不将内部记录公开。

我一直在研究可能的解决方案，这将**a** - 允许我们对所有区域执行动态更新，包括不同视图中的相同区域，**b** - 公开理想的宁静 API，我们可以与之交谈以发布这些更新，**c** - 是开源，因此我们可以使用它或至少基于某些东西。

遗憾的是，我还没有找到任何与我认为不是很个性化的要求集相近的东西。我们开始考虑实际编写一些我们自己的东西——使用 Python 和 Python DNS，它将通过 nsupdate 协议与 Bind 对话，并根据我们的需要发布更改，但**在我深入研究之前，我想得到一些建议，是否我没有错过任何东西？**

任何建议，非常感谢。

# oracle - 添加表空间引用后导致此缺少右括号 Oracle 错误的原因是什么？

> ID：14200677
> 
> 赞同：0
> 
> 时间：2013-01-07T17:10:16.147
> 
> 标签：oracle, parentheses

很抱歉将其添加到网站上的“缺少右括号”池中，但我倾注了这些，这是仅有的两个与我的代码相似的，虽然我确实认为它们帮助我进入了正确的方向。[ORA-00907 在尝试创建 CHECK 约束](https://stackoverflow.com/questions/6163143/ora-00907-when-trying-to-create-a-check-constraint/6163229#6163229)和[Oracle 时：创建包含三个 Foregin 键的复合键](https://stackoverflow.com/questions/13767691/oracle-make-a-composite-key-containing-three-foregin-keys)

我也不是数据库人员，但我别无选择，只能照顾好这个，所以任何帮助都将不胜感激。我认为我的问题似乎与“约束”所在的位置或最有可能在何处或如何添加我们的表空间引用有关。添加表空间引用是我在应用公司提供的原始脚本中唯一更改的内容。

这是公司提供的原始脚本中的一个项目（为这篇文章编辑了）（所有其他的都是相似的，并且在同一个地方有相同的错误）：

```
CREATE TABLE my_sys_cache_entry
(
            myPVStream BLOB,
            myEntrySource VARCHAR2 (32) 
,  CONSTRAINT my_sys_cache_entry_PK PRIMARY KEY (myInsKey)
)
LOB(myPVStream) STORE AS (DISABLE STORAGE IN ROW); 
```

这是我对它所做的最后一次更改，试图让它与我们添加的表空间引用一起工作：

```
CREATE TABLE my_sys_cache_entry
(
            myPVStream BLOB,
            myEntrySource VARCHAR2 (32),CONSTRAINT my_sys_cache_entry_PK PRIMARY KEY (myInsKey) TABLESPACE "MY_DYN_IDX_01"
) TABLESPACE "MY_DYN_DAT_01" 
            LOB(myPVStream) STORE AS (TABLESPACE "MY_DYN_LOB_01" DISABLE STORAGE IN ROW); 
```

这是我得到的错误：

```
myEntrySource VARCHAR2 (32),CONSTRAINT my_sys_cache_entry_PK PRIMARY KEY (myInsKey) TABLESPACE "MY_DYN_IDX_01"
                                                                                                *
ERROR at line 23:
ORA-00907: missing right parenthesis 
```

我已经尝试了几种方法来让它工作。最初 CONSTRAINT 在它现在所在的位置下的新行上，最后一个 ) 位于其下方的一行上（参见原始示例）。我们仍然得到错误。我将 ) 放在第一个 TABLESPACE 之后的同一行，但仍然出现错误。我将所有内容从 CONSTRAINT 向前移动到最后一行，但仍然出现错误。我不记得我是否尝试使用 , 在 CONSTRAINT 之前删除。有什么想法吗？

如果没有表空间引用，我无法对其进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:20:23.563

在其中添加“使用索引”：

```
CONSTRAINT my_sys_cache_entry_PK PRIMARY KEY (myInsKey)
 USING INDEX TABLESPACE "MY_DYN_IDX_01" 
```

LOB 部分很好。例如

```
SQL> CREATE TABLE my_sys_cache_entry
  2  (
  3              myInsKey number, myPVStream BLOB,
  4              myEntrySource VARCHAR2 (32),
  5              CONSTRAINT my_sys_cache_entry_PK PRIMARY KEY (myInsKey) using index TABLESPACE users
  6  ) TABLESPACE users
  7              LOB(myPVStream) STORE AS (TABLESPACE users DISABLE STORAGE IN ROW);

Table created. 
```

# c++ - c++11 异步延续或尝试 .then() 语义

> ID：14200678
> 
> 赞同：17
> 
> 时间：2013-01-07T17:10:18.867
> 
> 标签：c++, c++11, stdasync

下面的代码基于[Herb Sutter](http://channel9.msdn.com/Shows/Going+Deep/C-and-Beyond-2012-Herb-Sutter-Concurrency-and-Parallelism)实现 .then() 类型延续的想法。

```
 template<typename Fut, typename Work>
auto then(Fut f, Work w)->std::future<decltype(w(f.get()))>
  { return std::async([=] { w(f.get()); }); } 
```

这将像`auto next = then(f, [](int r) { go_and_use(r); });`或类似地使用。

这是一个巧妙的想法，但就目前而言是行不通的（期货只能移动，不可复制）。我确实喜欢这个想法，因为据我所知，它可能会出现在即将发布的 c++ 版本中（尽管是 .then() 甚至等待。）

在使期货共享或类似之前，我想知道堆栈溢出社区会如何看待这个实现，特别是改进和建议（甚至共享期货）？

在此先感谢您的任何建议。

（我知道这是一个修复，直到基于标准的机制存在，因为它会花费一个线程（也许）））。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T17:21:00.893

我发现上述实现存在 3 个问题：

*   `std::shared_future`只有当你通过as时它才会起作用`Fut`。
*   延续可能希望有机会处理异常。
*   它不会总是按预期运行，因为如果您不指定`std::launch::async`它可能会被延迟，因此不会像预期的那样调用延续。

我试图解决这些问题：

```
template<typename F, typename W, typename R>
struct helper
{
    F f;
    W w;

    helper(F f, W w)
        : f(std::move(f))
        , w(std::move(w))
    {
    }

    helper(const helper& other)
        : f(other.f)
        , w(other.w)
    {
    }

    helper(helper&& other)
        : f(std::move(other.f))
        , w(std::move(other.w))
    {
    }

    helper& operator=(helper other)
    {
        f = std::move(other.f);
        w = std::move(other.w);
        return *this;
    }

    R operator()()
    {
        f.wait();
        return w(std::move(f)); 
    }
};

}

template<typename F, typename W>
auto then(F f, W w) -> std::future<decltype(w(F))>
{ 
    return std::async(std::launch::async, detail::helper<F, W, decltype(w(f))>(std::move(f), std::move(w))); 
} 
```

像这样使用：

```
std::future<int> f = foo();

auto f2 = then(std::move(f), [](std::future<int> f)
{
    return f.get() * 2; 
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-20T02:17:15.483

这是使用 g++ 4.8 和 clang++ 3.2 测试的解决方案：

```
template<typename F, typename W>
auto then(F&& f, W w) -> std::future<decltype(w(f.get()))>
{
  cout<<"In thread id = "<<std::this_thread::get_id()<<endl;
  return std::async(std::launch::async, w, f.get());
}

void test_then()
{
  std::future<int> result=std::async([]{ return 12;});
  auto f = then(std::move(result), [](int r) {
    cout<<"[after] thread id = "<<std::this_thread::get_id()<<endl;
    cout<<"r = "<<r<<endl;
    return r*r;
  });
  cout<<"Final result f = "<<f.get()<<endl;
} 
```

# concurrency - 尝试保存第二个任务时服务出现“并发”错误

> ID：14200682
> 
> 赞同：4
> 
> 时间：2013-01-07T17:10:39.463
> 
> 标签：concurrency, rally

我正在尝试将两个任务保存到同一个用户故事中。第一个请求总是成功，但是第二个服务请求总是在响应中得到这个消息：

> 并发冲突：[对象已被修改，因为在此上下文中被读取更新] - ConcurrencyConflictException：自更新读取后修改：对象类：com.f4tech.slm.domain.UserStory：ObjectID：

我正在使用 JavaScript SDK 来创建任务。我这样做了两次：

```
Rally.data.ModelFactory.getModel({          
    type : 'Task',
    success : function(task) {

        var record = Ext.create(task, {
            Name : taskName,
            State : 'Defined',
            TaskIndex : 1,
            WorkProduct : workProductId,
            Owner : userIdsTeam[owner],
            SyncDevelopmentTasktoAccuRev : accuSync,
            Estimate: hours,
            TargetDeployment: targetDeployment,
            context: {
                  project:'/project/' + currentProjectId,
                  projectScopeDown: true
            },
        });

        record.save({
            callback : afterSaveNewTaskCallback
        });

    }
}); 
```

我能做些什么来摆脱这个错误并成功保存两个任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:16:31.620

除了 Kyle 的回答之外，您还可以使用`Rally.data.BulkRecordUpdater`让创建/更新为您排队。[http://developer.rallydev.com/apps/2.0p5/doc/#!/api/Rally.data.BulkRecordUpdater](http://developer.rallydev.com/apps/2.0p5/doc/#!/api/Rally.data.BulkRecordUpdater)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:41:11.750

由于您的任务都附加到同一个底层用户故事，因此创建者都试图锁定它以设置关联，这就是第二个失败的原因。您需要将回调链接在一起：

```
Rally.data.ModelFactory.getModel({
    type : 'Task', 
    success : function(taskModel) {
        //Create first task
        var task1 = Ext.create(taskModel, {
            //...fields...
        });
        task1.save({
            callback: function() {
                //Create second task
                var task2 = Ext.create(taskModel, {
                    //...fields...
                });
                task2.save({
                    callback: afterSaveNewTaskCallback
                });
            }
        });
    }
}); 
```

# php - PHP编辑/删除mysql中的多行

> ID：14200684
> 
> 赞同：1
> 
> 时间：2013-01-07T17:10:40.400
> 
> 标签：php, mysql

晚上好，我正在尝试制作一个可以在 mysql 中编辑/删除多行的 php 页面：

```
<html>  
<head>  
<title>Update/Delete Test Page</title>  
</head>  
<body> 

<?  
include 'connect.php';

if(isset($_POST['edit'])) // from button name="delete"
{
    $title = $_POST['title'];
    $description = $_POST['description'];
    if(!empty($_POST['checkbox'])) {
    foreach($_POST['checkbox'] as $check) {
        $ed = $check;
        $sql = "UPDATE events SET title = '$title', description ='$description' WHERE id = $ed";  
    }
    }

if (!mysql_query($sql))
{
die('Error: ' . mysql_error());
}
echo "1 record added";

mysql_close($con);
}
    ?>

<?php
include ("connect.php");

if(isset($_POST['delete'])) // from button name="delete"
{
    if(!empty($_POST['checkbox'])) {
    foreach($_POST['checkbox'] as $check) {
        $del = $check;

        $sql = "DELETE from events where id = $del";
        $result = $mysqli->query($sql) or die(mysqli_error($mysqli));
}
}
?>  

<?php
include 'connect.php';
$query = 'SELECT id, title, description FROM events WHERE evdate = "1/9/2013" order by title asc';
$result2 = $mysqli->query($query) or die(mysqli_error($mysqli));

echo '<br><br><br>';
echo '<b><div align="center"> "1/9/2013"</div></b>';

if ($result2) {

  // create a new form and then put the results
  // into a table.
  echo "<form method='post' action=".$_SERVER['PHP_SELF'].">"; 
  echo "<table cellspacing='0' cellpadding='3'>
    <th align='left'>Interval orar</th>
    <th align='left'>Eveniment</th>
    <th align='left'></th>
    ";

  while ($row = $result2->fetch_object()) {

    $title  = $row->title;
    $description = $row->description;
    $id     = $row->id;

    //put each record into a new table row with a checkbox
echo "
    <tr>
        <td align='left'><input type='text' name='title' size='20'  value='$title'></td>
        <td align='left'><input type='text' name='description' size='50'  value='$description'></td>
        <td align='left'><input type='checkbox' name='checkbox[]' id='checkbox[]'  value=$id />
     </tr>

     "; 
}

// when the loop is complete, close off the list.
echo "</table>
<p>
<input id='edit' type='submit' class='button' name='edit' value='Edit'/> 
<input id='delete' type='submit' class='button' name='delete' value='Delete'/>
</p>
</form>";
}   
?>
</body>  
</html> 
```

Connect.php 看起来像这样：

```
<?php
$db_host = "localhost";
$db_username = "calendar";
$db_pass = "calendar";
$db_name = "ecalendar";
$con = mysql_connect ("$db_host", "$db_username", "$db_pass") or die ("could not connect to     mysql database");
mysql_select_db("$db_name") or die ("no database");

$mysqli = new MySQLi($db_host, $db_username, $db_pass, $db_name) or die(mysqli_error());
?> 
```

删除工作正常，但编辑没有做任何事情......

表如下所示：

```
Start/End Time         Event     (Checkbox is here)
08:00-10:00            test1               X
10:00-12:00            test2               X 
```

当我尝试将 test2 编辑为 test2xx 时，我在 Firebug POST 中得到了这个：

```
title=08%3A00-10%3A00&description=test1&title=10%3A00-12%3A00&description=test2xx&checkbox%5B%5D=53&edit=Edit 
```

如果我删除我会得到这个（它有效）

```
title=08%3A00-10%3A00&description=test1&title=10%3A00-12%3A00&description=test2&checkbox%5B%5D=53&delete=Delete 
```

编辑工作但仅适用于最后一行（test2），如果我尝试编辑上面的行（test1），它会使用最后一行（test2）的值更新它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:12:55.793

猜你`del_id`不需要`id`

```
$sql = "UPDATE events SET title = '$title', description ='$description' WHERE id = $del_id "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:40:41.010

1-`value=$id`在你的 chekbob 中看你的价值

将其更改为`value= '$id'`

2-而且，删除查询是用mysqli的，但更新查询是用mysql的？？

3-你不必包含connect.php 3次

4-还有关于变量的先前答案`$del_id`。

5-你缺少结束标签`td`

6-你错过了关闭`}`

7-试试这个

```
<html>  
 <head>  
 <title>Update/Delete Test Page</title>  
 </head>  
 <body> 

 <?php  
 include 'connect.php';

 if(isset($_POST['edit'])) // from button name="edit"
 {
 $checkbox = $_POST['checkbox']; //from name="checkbox[]"
 $countCheck = count($_POST['checkbox']);

 for($i=0;$i<$countCheck;$i++)
 {
    $del_id  = $checkbox[$i];

  $sql3 = "UPDATE events SET title = '$title', description ='$description' WHERE id = '$del_id' ";  
  $result3 = $mysqli->query($sql3) or die(mysqli_error($mysqli));
 if (!$result3)
 {
 die(mysqli_error($mysqli)) ;
 }
 echo "1 record added";

 }
 }

  if(isset($_POST['delete'])) // from button name="delete"
 {
 $checkbox = $_POST['checkbox']; //from name="checkbox[]"
 $countCheck = count($_POST['checkbox']);

 for($i=0;$i<$countCheck;$i++)
 {
    $del_id  = $checkbox[$i];

    $sql = "DELETE from events where id = '$del_id' ";
    $result = $mysqli->query($sql) or die(mysqli_error($mysqli));

  }
  }

  $query = 'SELECT id, title, description FROM events WHERE evdate = "1/9/2013" order by title asc';
  $result2 = $mysqli->query($query) or die(mysqli_error($mysqli));

  echo '<br><br><br>';
  echo '<b><div align="center"> "1/9/2013"</div></b>';

 if ($result2) {

 // create a new form and then put the results
 // into a table.
 echo "<form method='post' action=".$_SERVER['PHP_SELF'].">"; 
 echo "<table cellspacing='0' cellpadding='3'>
 <th align='left'>Interval orar</th>
 <th align='left'>Eveniment</th>
 <th align='left'></th>
 ";

 while ($row = $result2->fetch_object()) {

 $title  = $row->title;
 $description = $row->description;
 $id     = $row->id;

  //put each record into a new table row with a checkbox
 echo "
 <tr>
    <td align='left'><input type='text' name='title' size='20'  value='$title'></td>
    <td align='left'><input type='text' name='description' size='50'    value='$description'></td>
    <td align='left'><input type='checkbox' name='checkbox[]' id='checkbox[]'  value='$id' /></td>
  </tr>

 "; 
 }

 // when the loop is complete, close off the list.
 echo "</table>
 <p>
 <input id='edit' type='submit' class='button' name='edit' value='Edit'/> 
  <input id='delete' type='submit' class='button' name='delete' value='Delete'/>
  </p>
 </form>";
 }   
 ?>
 </body>  
 </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:31:22.137

id=$del_id 在 for 循环下，仔细检查你的 SQL 语句和绑定到它们的变量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-09T11:29:58.923

放弃了上面的代码并从这个例子开始

```
http://bohemiawebsites.com/PHP-MYSQL-Update-Multiple-Rows.html 
```

如果有人需要，一切正常...

# wpf - Wpf画布刷新

> ID：14200685
> 
> 赞同：0
> 
> 时间：2013-01-07T17:10:41.740
> 
> 标签：wpf, canvas, refresh

我想知道在向画布添加子项之前是否有办法刷新画布？我有这个代码，它给我画了一个带有浅蓝色笔划的黑色椭圆。现在我想在程序启动时更改 StrokeThickness（我有一个滑块来定义 StrokeThickness）。问题是 StrokeThickness 发生了变化，但前提是我重绘了椭圆，但我希望在移动滑块时进行更改。有任何想法吗？谢谢！

```
 //this code is in canvas_MouseDown
            double smt = sliderThickness.Value;

            //krog
            elip = new Ellipse
            {
                Width = 100,
                Height = 100,
                Fill = Brushes.Black,
                Stroke = Brushes.LightBlue,
                StrokeThickness = smt,
            };

            Canvas.SetLeft(elip, mouseX - 50);
            Canvas.SetTop(elip, mouseY - 50);

            canvas1.Children.Add(elip); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:46:37.280

在滑块值 Changedevent 中，您必须输入以下代码

```
 private void sliderThickness_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        foreach (var item in canvas1.Children)
        {
            if (item is Ellipse)
            {
                var elip = item as Ellipse;
                elip.StrokeThickness = sliderThickness.Value;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:59:55.997

或者更短

```
// using System.Linq;

foreach (var ellipse in canvas1.Children.OfType<Ellipse>())
{
    ellipse.StrokeThickness = sliderThickness.Value;
} 
```

# http - 如何对特定端口上的主机执行 CONNECT HTTP 请求？

> ID：14200687
> 
> 赞同：0
> 
> 时间：2013-01-07T17:10:48.353
> 
> 标签：http, httprequest, connect, httpresponse

如何`CONNECT HTTP`在特定端口上对主机执行请求？

如果有一个工具可以实现这一点，我会很感激提及它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:19:12.677

您可以使用 telnet 发送 HTTP 请求并完成与主机的连接。

例如，通过 shell 以下面的 cmd 开始：

```
telnet www.server.com 80 
```

然后，在建立连接后，您可以发送 HTTP 请求。

[阅读更多](http://blog.tonycode.com/tech-stuff/http-notes/making-http-requests-via-telnet)

# bash - 临时添加bash历史时间导出以进行输出？

> ID：14200691
> 
> 赞同：1
> 
> 时间：2013-01-07T17:10:58.780
> 
> 标签：bash, format, history

每隔一段时间，我就会将我的 bash 历史记录导出到一个外部文件。有时我想添加`export HISTTIMEFORMAT='%F %T '`时间/日期，以便在输出中显示，尽管在我调用命令后它从未出现在文件中。[**我知道您可以将环境变量永久添加到您的 .bash_profile**](https://stackoverflow.com/questions/5388054/making-environment-variable-permanent)，但我只想在使用以下命令时暂时使用它。我试过这样：

```
# export HISTTIMEFORMAT='%F %T ' | grep -v "^#" $HISTFILE > ~/path/to/output 
```

没有运气显示时间/日期戳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:15:22.440

bash 需要环境变量：

```
env HISTTIMEFORMAT='%F %T ' bash -c 'command args' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:26:26.047

采用：

```
HISTTIMEFORMAT='%F %T ' history | grep -v "^#" > ~/path/to/output 
```

`HISTTIMEFORMAT`注意：除非在这些 shell 中设置为某个值，否则过去 shell 中的命令将不包含正确的时间。

# java - Web 应用程序中的编辑模式查看模式

> ID：14200692
> 
> 赞同：0
> 
> 时间：2013-01-07T17:11:03.253
> 
> 标签：java, design-patterns, web-applications

通常我们有很多页面有时应该在查看模式下可用，有时在编辑模式下可用。更糟糕的是，有时只有其中的一些字段是可编辑的。

是否有任何设计模式和最佳实践？一种解决方案是创建 2 个页面 - 一个用于查看，一个用于编辑。另一种是应用 css 样式使所有输入看起来像普通的不可编辑文本。还有其他更好的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:14:39.140

在我们的应用程序中，页面上的编辑器元素具有“只读”属性，它们会相应地修改 DOM。因此，当组件可编辑时，您将获得一个`span`（或组件在只读模式下使用的任何内容）或一个`input`元素。

在服务器上，这是由 DSL 控制的，该 DSL 定义了您编辑的对象类型、您可以看到的字段以及每个字段的模式。

整个应用程序是基于[ZK](http://www.zkoss.org/)的，因为它可以很容易地从 Java 代码中替换部分 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:22:06.053

我不会采用您的两页方法。让我们举个例子，页面上有 10 个字段。对于不同的请求（例如不同的用户权限、角色或其他功能），您可以呈现包含不同可编辑字段集的页面。

```
request1, field 1,2,3 should be editable
request2, field 2,3 should be editable
request3, field 3,6,7 should be editable
... 
```

您将如何在多页方法中处理这个问题？

我会在服务器端制作一个列表，其中包含需要显示为可编辑的字段（例如名称）。

在您的jsp中，当您打印字段时，您检查该字段是否在该列表中，如果为真，则将其显示为可编辑，否则显示为只读。

希望能帮助到你

# php - 将图像文件转换为 JPEG

> ID：14200693
> 
> 赞同：2
> 
> 时间：2013-01-07T17:11:09.020
> 
> 标签：php, html, mysql

我有一个网站，允许用户上传任何类型的照片。

即 gif、jpeg、png

现在，我如何将上传的文件转换为 JPEG，如果它们还没有？

谢谢

这是我的PHP：

```
if ($_FILES['media']['size'] != 0) {
    $target= UPLOADPATH . $media;
    move_uploaded_file($_FILES['media']['tmp_name'], $target);
    $query= "INSERT INTO posts (user_id, story, media, date, view, type) VALUES    
            ('$user_id', '$story', '$media', now(), '$view', '1')";
    mysqli_query($connect, $query)
        or die('error with query 2');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:12:28.957

简单地重命名它们的扩展名并不能解决问题，您需要使用图像处理器来更改文件。

查看[imagemagick](http://www.imagemagick.org/script/index.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:19:20.257

在 PHP 中，您首先将上传文件的内容读入`imagecreatefromstring()`类似`file_get_content($filePath)`. 从那里你使用一个`imagejpeg`写入另一个扩展名的文件`.jpg`

这是一个示例：

```
$handle = imagecreatefromstring(file_get_content($filePath));
imagejpeg($handle,'newfile.jpg',100); 
```

参考

1.  [图片jpeg](http://php.net/manual/en/function.imagejpeg.php)
2.  [imagecreatefromstring](http://jp1.php.net/manual/en/function.imagecreatefromstring.php)
3.  [文件获取内容](http://php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T17:18:02.720

也许尝试像 imagecreatefrom*() 这样的功能

[imagecreatefrompng(youimage);](http://php.net/manual/en/function.imagecreatefrompng.php)

[imagecreatefromgif(youimage);](http://ua1.php.net/manual/en/function.imagecreatefromgif.php)

在使用此功能之前，您需要了解文件格式。

然后使用[imagejpeg()](http://ua1.php.net/manual/en/function.imagejpeg.php)函数

# java - 使用 MPJ express 发送对象

> ID：14200699
> 
> 赞同：2
> 
> 时间：2013-01-07T17:11:24.750
> 
> 标签：java, mpi, mpj-express

我是并行编程的新手，我想用 java 来做。我想知道是否可以通过 MPI 发送和接收更复杂的对象。我正在使用 MPJ 快递。但是，每当我想发送一个对象时，我都会得到一个 ClassCastException。

```
MPI.Init(args);
myrank = MPI.COMM_WORLD.Rank();
numprocs = MPI.COMM_WORLD.Size();
Vector<CustomClass> chr = new Vector<CustomClass>();
if (myrank == 0 ) { //am I the master?
    for (int i = 1; i < numprocs; i++) {
      MPI.COMM_WORLD.Send(chr, 0, chr.size(), MPI.OBJECT, i, 99); //Here's where the 
                                                                  exception occurs
    }
}
else {             
    Vector<BasicRegion> chr_received = new Vector<BasicRegion>();
    MPI.COMM_WORLD.Recv(chr_received, 0, 1, MPI.OBJECT, 0, 99 );
} 
```

例外：

mpi.MPIException: mpi.MPIException: java.lang.ClassCastException: java.util.Vector 无法转换为 [Ljava.lang.Object;

所以我的问题是： - 是否可以使用 MPJ Express 发送/接收更复杂的对象？- 如果是这样：我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T10:53:54.900

我也是 MPJ express 的新手，但似乎封闭对象需要是原始类型 - 一些东西的数组。（就像你在 OpenMPI 中使用 C/C++ 实现一样）。

这种代码对我很有效：

```
 Node t[] = new Node[4];
        ...
        count[0] = t.length;
        MPI.COMM_WORLD.Send(count, 0, 1, MPI.INT, 1, 98);
        MPI.COMM_WORLD.Send(t, 0, t.length, MPI.OBJECT, 1, 99);
    } else if( myRank == 1 ) {
        int count[] = new int[1];
        MPI.COMM_WORLD.Recv( count, 0, 1, MPI.INT, 0, 98);
        Status mps = MPI.COMM_WORLD.Recv( t, 0, count[0], MPI.OBJECT, 0, 99 );
        ... 
```

当然，您必须让那个自定义类实现 Serializable 接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-06T18:02:20.080

您想在发送之前对其进行序列化。

```
import mpi.*;

import java.io.*;
import java.nio.ByteBuffer;

public class MPITest
{
    public static void main(String[] args)
    {
        MPI.Init(args);
        int me = MPI.COMM_WORLD.Rank();
        int tasks = MPI.COMM_WORLD.Size();

        MPI.COMM_WORLD.Barrier();

        if(me == 0)
        {
            Cat cat = new Cat("Tom", 15);
            cat.Speak();

            ByteBuffer byteBuff = ByteBuffer.allocateDirect(2000 + MPI.SEND_OVERHEAD);
            MPI.Buffer_attach(byteBuff);

            try
            {
                ByteArrayOutputStream bos = new ByteArrayOutputStream();
                ObjectOutput out = null;
                out = new ObjectOutputStream(bos);
                out.writeObject(cat);
                byte[] bytes = bos.toByteArray();

                System.out.println("Serialized to " + bytes.length);

                MPI.COMM_WORLD.Isend(bytes, 0, bytes.length, MPI.BYTE, 1, 0);
            }
            catch(IOException ex)
            {

            }
        }
        else
        {
            byte[] bytes = new byte[2000];
            Cat recv = null;
            MPI.COMM_WORLD.Recv(bytes, 0, 2000, MPI.BYTE, MPI.ANY_SOURCE, 0);

            ByteArrayInputStream bis = new ByteArrayInputStream(bytes);
            ObjectInput in = null;
            try
            {
                in = new ObjectInputStream(bis);
                Object obj = in.readObject();
                recv = (Cat)obj;

                recv.Speak();
            }
            catch(IOException ex)
            {

            }
            catch(ClassNotFoundException cnf)
            {

            }
        }

        MPI.COMM_WORLD.Barrier();
        MPI.Finalize();
    }
} 
```

这可行，但是您可能希望使用外部化并手动执行以避免序列化例程将发送的一些额外垃圾。

HTH 布赖恩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-01T10:30:51.197

```
import mpi.*;

/**
 * Compile: javac -cp $MPJ_HOME/lib/mpj.jar:. ObjSend.java 
 * Execute: mpjrun.sh -np 2 -dport 11000 ObjSend
 */

public class ObjSend {
    public static void main(String[] args) throws Exception {

        int peer ; 

        MPI.Init(args);

        int rank = MPI.COMM_WORLD.Rank() ;
        int size = MPI.COMM_WORLD.Size() ; 

        int tag = 100 ; 

        if(rank == 0) {

            String [] smsg = new String[1] ; 
            smsg[0] = "Hi from proc 0" ; 
            peer = 1 ; 
            MPI.COMM_WORLD.Send(smsg, 0, smsg.length, MPI.OBJECT, 
                                                        peer, tag);
            System.out.println("proc <"+rank+"> sent a msg to "+
                               "proc <"+peer+">") ; 

        } else if(rank == 1) {

            String[] rmsg = new String[1] ; 
            peer = 0 ; 
            MPI.COMM_WORLD.Recv(rmsg, 0, rmsg.length , MPI.OBJECT, 
                                                         peer, tag);
            System.out.println("proc <"+rank+"> received a msg from "+
                               "proc <"+peer+">") ; 
            System.out.println("proc <"+rank+"> received the following "+
                               "message: \""+rmsg[0]+"\"") ; 

        } 

        MPI.Finalize();

    }   
} 
```

# javascript - 推送和猫鼬结果的问题

> ID：14200700
> 
> 赞同：0
> 
> 时间：2013-01-07T17:11:34.950
> 
> 标签：javascript, node.js, mongoose

这是代码：

```
usermodel.findOne({ user: req.session.user }, function (err, usr){

 following = [];

 for (var i = 0; i < usr.follow.length; i++) {

    usermodel.findOne({ _id: usr.follow[i] }, function (err, followed){

        if (err) throw err;

        following.push(followed);

    });

  }

    if (err) throw err;

    console.log(following);

      res.render('home.ejs', {

         user: usr,
         following: following 

      }); 

}); 
```

我正在尝试将所有内容推`usermodel.find`入以下数组。在循环内部`for`，如果我使用`console.log(following)`，控制台会向我显示包含所有猫鼬`find`结果的数组，但问题是，在`for`循环之外，数组`following`是空的！这很奇怪，我不知道该怎么做。任何解决方案...？

谢谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:53:07.627

问题是您正在调用异步函数，这些函数会在将来的某个时间执行，但您希望`following`当前包含项目。

您的应用程序应该像这样重组：

```
usermodel.findOne({ user: req.session.user }, function (err, usr){
following = [];
// i assume that usr.follow is an array
usermodel.find({ _id: { $in: usr.follow } }, function (err, userList){
    if (err) throw err;
    console.log(userList);
    res.render('home.ejs', {
        user: usr,
        following: userList
    });
}); 
```

# extjs - ExtJs 组合在商店页面加载时丢失选定的值

> ID：14200701
> 
> 赞同：5
> 
> 时间：2013-01-07T17:11:37.903
> 
> 标签：extjs, extjs4, extjs4.1

我有一个带有 JsonStore 和 queryMode: 'remote' 的 ExtJS 4.1 组合框，具有分页和过滤功能，如下所示：

```
...
查询模式：'远程'，
允许空白：真，
强制选择：真，
自动选择：假，
页面大小：25，
预输入：真，
minChars: 2,
...

```

当我在此组合框中加载带有保存值的表单时，我加载存储将保存的值作为查询（过滤）参数传递，以确保所选值肯定在返回的记录中，然后我设置该值作为组合选择的值，如下所示：

```
    mycombo.getStore().load({
        参数：{
            查询：显示字段
        },
        范围： {
            领域：组合，
            值字段：值字段，
            显示字段：显示字段
        },
        回调：函数（记录，操作，成功）{
            this.field.setValue(this.valueField);
        }
    });

```

到目前为止，一切都很好，以上工作正常。问题是，如果用户然后单击下拉箭头为组合选择另一个值，则加载商店的第一页，擦除所有先前选择的值，即使没有选择，先前选择的值也会丢失.

这个问题是通用的，与这个问题非常相似： [ExtJS paged combo with remote JSON store。使用分页显示选定的值，](https://stackoverflow.com/questions/13854290/extjs-paged-combo-with-remote-json-store-display-selected-value-with-paging) 可以总结如下：

**在带有远程存储和分页的 ExtJS 组合框中，当加载的页面更改时，选定的值会丢失。**

我尝试设置`clearOnPageLoad: false`商店，但每次加载新页面时，记录都会附加到列表的末尾。我本来希望这个参数缓存加载的页面，并在来回移动时仍然向我显示正确的页面。

那么，关于如何在页面之间移动时保持所选值的任何想法？我想我可以手动创建一个包含所选值的记录，并在每次加载页面时将其附加到存储中，直到选择一个新值，但这对于如此基本的东西来说听起来太费劲了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T09:40:11.517

由于我们有付费许可证，我们最终联系了 Sencha 支持。这是我们得到的答案：

```
 Ext.override(Ext.form.field.ComboBox, {
    onLoad: function() {
        var me = this,
            value = me.value;

        if (me.ignoreSelection > 0) {
            --me.ignoreSelection;
        }

        if (me.rawQuery) {
            me.rawQuery = false;
            me.syncSelection();
            if (me.picker && !me.picker.getSelectionModel().hasSelection()) {
                me.doAutoSelect();
            }
        }

        else {

            if (me.value || me.value === 0) {
                if (me.pageSize === 0) { // added for paging; do not execute on page change
                    me.setValue(me.value);
                }
            } else {

                if (me.store.getCount()) {
                    me.doAutoSelect();
                } else {

                    me.setValue(me.value);
                }
            }
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:09:00.493

有同样的问题，'pruneRemoved: false' 不起作用（它似乎只在网格中使用）。这是解决方案：

```
Ext.override(Ext.form.field.ComboBox,{

    // lastSelection is searched for records
    // (together with store's records which are searched in the parent call)

    findRecord: function(field, value) {
        var foundRec = null;
        Ext.each(this.lastSelection, function(rec) {
            if (rec.get(field) === value) {
                foundRec = rec;
                return false; // stop 'each' loop
            }
        });
        if (foundRec) {
            return foundRec;
        } else {
            return this.callParent(arguments);
        }
    }
}); 
```

希望没有负面影响。我已经对其进行了一些测试，似乎还可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T20:04:31.607

我在 extjs 6.0.1 中遇到了这个问题。

我发现了一个可能对其他人有帮助的解决方法。

在调用基础 onLoad 之前，我使用 override for onLoad 将组合中的选定记录添加到存储中。

这是有效的，因为如果所选记录在正在查看的页面中，则组合足够智能，不会清除选择。换句话说，在您翻页时选择被清除的原因是因为所选记录不在您正在查看的页面中。

```
onLoad: function (store, records, success)
{
    var selection = this.getSelection();

    if (selection)
    {
        records.unshift(selection);
        store.insert(0, records);
    }

    this.callParent(arguments);
} 
```

# ios - UIDatePicker 返回错误的日期（-1 天到实际日期）

> ID：14200703
> 
> 赞同：13
> 
> 时间：2013-01-07T17:11:43.593
> 
> 标签：ios, objective-c, cocoa-touch, uidatepicker

我有一个`UIDatePicker`mm/dd/yy。它工作正常，但有一个问题：我设置`minimum`和`maximum`日期，当用户尝试选择禁止的日期、月份或年份时，该`[datePicker date]`属性开始工作错误。它会返回`current day - 1`or`current month - 1`或`current year - 1`。我添加了一些图片，所以你可以看到情况。

![正确日期](../Images/2f7872fda48cf9d87181325925008104.png) **这是正确的**
![日期错误](../Images/07d5fb293156eb2761bd47a0f846c722.png) **这是错误的（选择禁止日期后）**

有人知道，我该如何解决这个问题？谢谢 ！

**UPD：** 代码

```
[self.myDatePicker setMinimumDate:[NSDate date]];
[self.myDatePicker setMaximumDate:[[NSDate date] addTimeInterval:2 * 365.25 * 24 * 60 * 60]]; // to get upto 5 years
NSDate * now = [[NSDate alloc] init];
[self.myDatePicker setDate: now animated: YES];

self.myDatePicker.timeZone = [NSTimeZone localTimeZone];
self.myDatePicker.calendar = [NSCalendar currentCalendar]; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-11-09T16:09:50.617

只需添加一行代码来设置您的时区。

```
self.datePicker.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:0]; 
```

0 代表 GMT 00 。根据您的时区添加。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-30T13:08:11.163

我的解决方案是将返回的日期设置为 12:00 AM，因为 NSDates 在 UTC 中工作

```
NSDate * adjustedDate = [[NSCalendar currentCalendar] dateBySettingHour:12 minute:0 second:0 ofDate:sender.date options:0]; 
```

同样对于日期计算，您应该使用`NSCalender`方法而不是`addTimeInterval`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-07T17:21:34.657

检查您是否使用了带有大字母的错误格式符号：“YYYY”。将它们替换为“yyyy”。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-07T17:46:02.880

这与时区和/或夏令时有关。但它必须非常微妙，因为代码看起来很好（在间隔旁边）。现在我的问题是你是否在俄罗斯：

今年，克里姆林宫在永远保持夏令时方面做了几次来回摆动。其实我不确定，他们最后决定了什么。但也许它没有正确反映在 Cocoa 中。视频[WWDC 2011 视频“Session 117 - Performing Calendar Calculations”](https://developer.apple.com/videos/wwdc/2011/?id=117)，演示者甚至提到这样的事情可能会发生。

请尝试使用手动将时间设置为中午的日期，因为这样可以让您远离这种混乱。

* * *

全世界刚刚在 iOS 6 中看到了类似的不当行为：DND-Always-Active 错误。我敢打赌这是错误的日期格式（`YYYY`而不是`yyyy`）

* * *

还尝试在第一时间在选择器上设置时区属性，并为其分配一个手动实例化的公历。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-31T10:11:24.107

我遇到了同样的麻烦，这就是我得出的结论：

如果您想为您的系统提供正确的表示，请不要使用 [date description] 来检查 NSDate。使用 NSDateFormatter，因为它根据您的系统偏好显示日期（在模拟器中它将是模拟器偏好）。

例如：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateStyle:NSDateFormatterShortStyle];
[df setTimeStyle:NSDateFormatterNoStyle];
NSLog(@"date for locale is %@", [df stringFromDate:date]); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-03T07:38:14.863

试试这个，

```
let formatter = DateFormatter()
formatter.dateFormat = "yyyy-MM-dd"
formatter.string(from: yourPicker.date) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-07T17:15:09.420

可能是由于时区...

设置您的时区。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-06-23T11:34:30.913

```
Boolean futureevent;
- (void)viewDidLoad
{
 futureevent = false;
}

int intervall = (int) [currentdate timeIntervalSinceDate: datePicker.date] / 60;

if (intervall < 1200 && intervall > 0)
{
    futureevent = true;
    NSDate *newDate1 = [datePicker.date dateByAddingTimeInterval:60*60*24*1];
    birthdate = [newDate1.description substringToIndex:spaceRange.location];
}
else
{
    if (futureevent)
    {
        NSDate *newDate1 = [datePicker.date dateByAddingTimeInterval:60*60*24*1];
        birthdate = [newDate1.description substringToIndex:spaceRange.location];
    }
    else
    {
        birthdate = [datePicker.date.description substringToIndex:spaceRange.location];
    }
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2019-06-13T05:01:45.067

它不会返回错误的日期。实际发生的情况是，当您选择所谓的禁止日期时，日期选择器将重置为当天第一刻即 12:00 上午的最大或最小允许日期。

因此，例如，如果您所在的时区比格林威治标准时间早 2 小时，则日期选择器返回的日期将是格林威治标准时间昨天晚上 10:00。所以在这里，您可能认为它正在返回昨天的日期，但如果您将其转换为您的时区，您将只获得今天的日期，但时间部分将是 12:00AM。

# actionscript-3 - HTTP 状态错误：仅在用完 IDE 时发生

> ID：14200705
> 
> 赞同：0
> 
> 时间：2013-01-07T17:11:55.827
> 
> 标签：actionscript-3, apache-flex

我有一个 AIR 应用程序，我主要是在 FlashBuilder IDE 之外对其进行测试；有时我会在将它安装到桌面后对其进行测试。

有时，但并非总是如此，当我从 IDE 上传文件时，我会收到代码为 302 的 http 状态事件；这是一个重定向。基本上，该应用程序认为我没有登录。

每当我将它作为已安装的 AIR 应用程序进行测试时，我都没有遇到任何困难。

在测试 IDE 和 AIR 应用程序时，其他人是否遇到过类似的困难？

感谢您提供任何有用的提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:08:27.050

IDE 将在 ADL 中运行应用程序，而不是您安装的 AIR 运行时。我可能与那些不同版本的东西有关？我并不完全了解 ADL 与运行时有何不同，但我的猜测是这与您所看到的问题有关。

您可以从命令行自己运行 adl。路径是 /PATH/TO/SDK/bin/adl，如果您在 Windows 上，则为 adl.exe。运行不带参数的 adl 将为您提供 adl 版本并帮助您在命令行上运行应用程序。

希望我能更有帮助。

# c# - asp.net中的变量赋值

> ID：14200711
> 
> 赞同：0
> 
> 时间：2013-01-07T17:12:06.807
> 
> 标签：c#, asp.net, web-applications, web-project

我试图在 aspx.cs 文件中分配一个值。

```
 static String cnn;
    cnn = "hi"; 
```

我收到错误“cnn 是一个字段，但用作类型”。我已经在类中的所有函数之上添加了代码。（不是内部页面加载或任何其他事件处理程序）。

为什么我会收到此错误，原因是什么？怎么修 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:13:06.493

您不能引用`cnn`函数外部，除非在声明字段时。

如果要声明和初始化字段，*可以*在一行中完成：

```
static string cnn = "hi"; 
```

注意样式 - 在 C# 中，使用`string`，而不是`String`.

# javascript - 如何缓存javascript文件

> ID：14200715
> 
> 赞同：1
> 
> 时间：2013-01-07T17:12:31.157
> 
> 标签：javascript, browser-cache

您好我正在尝试进行浏览器缓存实验。像这样

```
<head>
    <script type="text/javascript" src='<%=Tool.GetFileRefUrl("js_cached.js")%>' ></script>
    <script type="text/javascript">
        var lastFile = fun();
    </script>
    <script src="js_cached.js" type="text/javascript"></script>
    <script type="text/javascript">
        var cacheFile = fun();
    </script>
</head><body>
<form>
<div>

    The cache file is :<script type="text/javascript">
                           document.writeln(cacheFile);
                    </script>
    <br />
    The last file is :<script type="text/javascript">
                          document.writeln(lastFile);
                    </script>    
</div>
</form>
</body> 
```

`Tool.GetFileRefUrl("js_cached.js")`每次都会返回一个随机的js文件字符串`"js_cached.js?v=8752162122311"`

第一次`fun()`运行它返回“A”，所以页面将显示：

> 缓存文件是 :A
> 最后一个文件是 :A

现在我更改了`js_cached.js`Web 服务器上的文件并`fun()`返回“B”，我希望也能看到结果：

> 缓存文件是 :A
> 最后一个文件是 :B

但实际上是：

> 缓存文件是 :B
> 最后一个文件是 :B

有什么问题吗？为什么浏览器不缓存js文件？我做了不正确的假设吗？

有趣的是

```
 function fun() {
    return "A";//after modify it be "B"
} 
```

Tool.GetFileRefUrl 是

```
public class Tool
{
    public static string GetFileRefUrl(string url)
    {
        var ticks = GetLastWriteTime(url);
        var result = string.Format("{0}?v={1}", url, ticks);
        return result;
    }

    private static long GetLastWriteTime(string fileName)
    {
        var lastWriteTime = File.GetLastWriteTime(HttpContext.Current.Server.MapPath(fileName));
        return lastWriteTime.Ticks;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:49:07.910

最后，我找到了一种缓存 js 文件的方法，将页面添加到浏览器选项卡（标记链接？嗯，我不确定它是什么英文，就像 IE 上的我的收藏夹）打开链接，你会看到

```
The cache file is :A
The last file is :A 
```

修改js文件，并通过标记链接打开新标签

```
The cache file is :A
The last file is :B 
```

Tks Bergi 为您提示 :)

# php - 在 HTML 中呼应 PHP

> ID：14200716
> 
> 赞同：3
> 
> 时间：2013-01-07T17:12:32.313
> 
> 标签：php, html, echo

我目前正在尝试为我的网站创建一个购物车，并且我将产品图像存储在数据库中，我想将它们包含在 <`img src>`中。通过放入`$get_row[imagesrc]`src. 我需要知道将其添加到以下代码中的正确方法，因为我不完全理解`'`and`.`标记

```
 echo '<p>'.$get_row['name'].'<br/>'.$get_row['description'].'<br/>'.$get_row['imagesrc'].
'<br/>&pound;'.number_format($get_row['price'],2).'<a href="cart.php?add='.$get_row['id'].'">Add</a></p>'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:15:10.817

这应该可以实现您正在寻找的东西：

```
echo '<p>'.$get_row['name'].'<br/>'.$get_row['description'].'<br/><img src="'.$get_row['imagesrc'].'" /><br/>&pound;'.number_format($get_row['price'],2).'<a href="cart.php?add='.$get_row['id'].'">Add</a></p>'; 
```

当`'`字符环绕一系列字符时，它定义了一个字符串文字。
该`.`字符用于连接字符串以进行输出或存储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T17:15:43.290

```
echo '<p>'.$get_row['name'].'<br/>'.$get_row['description'].'<br/><img src="'.$get_row['imagesrc'].'"><br/>&pound;'.number_format($get_row['price'],2).'<a href="cart.php?add='.$get_row['id'].'">Add</a></p>'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T17:19:02.687

. 连接两个字符串，并且 ' 包裹在一个字符串周围。

所以

```
echo 'Hello '.'World'; // Shows Hello World 
```

我会把你的分开，以便更容易阅读：

```
echo '<p>';
    echo $get_row['name'].'<br/>';
    echo $get_row['description'].'<br/>';
    echo '<img src="'.$get_row['imagesrc'].'" /><br/>';
    echo '&pound;'.number_format($get_row['price'],2);
    echo '<a href="cart.php?add='.$get_row['id'].'">Add</a>';
echo '</p>'; 
```

但这一切看起来都很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T17:16:04.157

已经给出了[具体答案：](https://stackoverflow.com/a/14200753/164998)

```
echo '<img src="'.$get_row['imagesrc'].'">'; 
```

尽管如此，值得补充的是，您应该：

*   您应该转义输出 - 使用[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)或其他方式。

    ```
    echo '<img src="' . htmlspecialchars($get_row['imagesrc']) . '">'; 
    ```

*   阅读有关[PHP 字符串](http://php.net/manual/en/language.types.string.php)的文档。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T17:14:42.147

```
echo '<p>'.$get_row['name'].'<br/>
<img src="'.$get_row['imagesrc'].'" alt="'.$get_row['name'].'"><br/>
<br/>&pound;'.number_format($get_row['price'],2).'
<a href="cart.php?add='.$get_row['id'].'">Add</a></p>';` 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-07T17:15:17.050

```
echo '<img src="'.$get_row['imagesrc'].'">'; 
```

试试看。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-07T17:18:43.870

看看这种在 HTML 中包含 PHP 的方式。它更容易阅读和维护。该段落的最后一行是您的图像标签。

```
<p>
    <?php echo $get_row['name']; ?><br/>
    <?php echo $get_row['description']; ?><br/>
    <?php echo $get_row['imagesrc']; ?><br/>
    &pound;<?php echo number_format($get_row['price'],2); ?>
    <a href="cart.php?add=<?php echo $get_row['id']; ?>">Add</a>
    <img src="<?php echo $get_row['imagesrc']; ?>" />
</p> 
```

# java - 尝试获取用户的个人资料信息时出现错误：需要验证码（VK Android SDK）

> ID：14200717
> 
> 赞同：3
> 
> 时间：2013-01-07T17:12:33.043
> 
> 标签：java, android, api, vk

我使用 VK Android SDK (com.perm.kate.api) [https://bitbucket.org/ruX/android-vk-sdk/overview](https://bitbucket.org/ruX/android-vk-sdk/overview)

我在下面提供的最后一行代码开始返回 KException。

从文档中：如果某种操作过于频繁地完成，那么对 API 的请求可能会返回错误“需要验证码”。用户将需要输入图像中的代码并使用请求参数中输入的验证码再次发送请求：

*   captcha_sid - 验证码标识符 captcha_img
*   链接到应该显示给用户的图像，以便他们可以输入图像中的文本。

问题是我应该在哪里输入这个参数？我使用该方法获取不包含这些参数的用户配置文件：

```
public ArrayList<User> getProfiles(Collection<Long> uids, Collection<String> domains, String fields, String name_case) throws MalformedURLException, IOException, JSONException, KException 
```

获取用户资料的代码：

```
Api vkApi=new Api(account.access_token, Constants.API_ID);
//get user
Collection<Long>userIds=new ArrayList<Long>();
userIds.add(account.user_id);
ArrayList<User> users=vkApi.getProfiles(userIds, null, null, null); //KException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-21T10:09:43.083

您需要设置所有参数。不是 null 而是带有空字符串和空字符串的数组。我的例子：

```
Collection<Long> u = new ArrayList<Long>();
u.add(user_id);
Collection<String> d = new ArrayList<String>();
d.add("");

response = vkApi.getProfiles(u, d, "", "", "", ""); 
```

# python - 如何在 Python curses 中创建菜单和子菜单？

> ID：14200721
> 
> 赞同：18
> 
> 时间：2013-01-07T17:12:51.550
> 
> 标签：python, python-2.7, curses

AFAIK，Python 中还没有可用的 curses 菜单扩展，所以你必须推出自己的解决方案。我知道这个补丁[http://bugs.python.org/issue1723038](http://bugs.python.org/issue1723038)但我不知道它的当前状态是什么。[我找到了一个不错的 Python 类，它在这里http://www.promisc.org/blog/?p=33](http://www.promisc.org/blog/?p=33)包装了我想要的“cmenu”，但我也有这个问题。我想制作一个菜单，用户可以在其中选择突出显示的元素，但我不想立即执行特定操作，而是想显示另一个菜单，然后可能是另一个，要求输入等。我的第一个想法是删除现有的 cmenu screen.clear() 或 cleanup() 但在绘制新菜单之前不会删除旧菜单，新菜单如下所示：

```
 0\. top
    1\. Exit
    2\. Another menu
-- end of the old menu that should go away --
    3\. first
    4\. second
    5\. third 
```

cmenu() 中没有用于删除项目的 remove() 方法。我猜旧菜单未清除的事实是由 display() 方法中的“while True”循环引起的，但是当我删除它时，发生了一些奇怪的事情。我正在使用 Python 2.7，这是我当前的代码：

```
#!/usr/bin/python
#
# Adapted from:
# http://blog.skeltonnetworks.com/2010/03/python-curses-custom-menu/
#
# Goncalo Gomes
# http://promisc.org
#

import signal
signal.signal(signal.SIGINT, signal.SIG_IGN)

import os
import sys
import curses
import traceback
import atexit
import time

import sys
reload(sys)
sys.setdefaultencoding("utf-8")

class cmenu(object):
    datum = {}
    ordered = []
    pos = 0

    def __init__(self, options, title="python curses menu"):
        curses.initscr()
        curses.start_color()
        curses.init_pair(1, curses.COLOR_RED, curses.COLOR_WHITE)
        curses.curs_set(0)
        self.screen = curses.initscr()
        self.screen.keypad(1)

        self.h = curses.color_pair(1)
        self.n = curses.A_NORMAL

        for item in options:
            k, v = item.items()[0]
            self.datum[k] = v
            self.ordered.append(k)

        self.title = title

        atexit.register(self.cleanup)

    def cleanup(self):
        curses.doupdate()
        curses.endwin()

    def upKey(self):
        if self.pos == (len(self.ordered) - 1):
            self.pos = 0
        else:
            self.pos += 1

    def downKey(self):
        if self.pos <= 0:
            self.pos = len(self.ordered) - 1
        else:
            self.pos -= 1

    def display(self):
        screen = self.screen

        while True:
            screen.clear()
            screen.addstr(2, 2, self.title, curses.A_STANDOUT|curses.A_BOLD)
            screen.addstr(4, 2, "Please select an interface...", curses.A_BOLD)

            ckey = None
            func = None

            while ckey != ord('\n'):
                for n in range(0, len(self.ordered)):
                    optn = self.ordered[n]

                    if n != self.pos:
                        screen.addstr(5 + n, 4, "%d. %s" % (n, optn), self.n)
                    else:
                        screen.addstr(5 + n, 4, "%d. %s" % (n, optn), self.h)
                screen.refresh()

                ckey = screen.getch()

                if ckey == 258:
                    self.upKey()

                if ckey == 259:
                    self.downKey()

            ckey = 0
            self.cleanup()
            if self.pos >= 0 and self.pos < len(self.ordered):
                self.datum[self.ordered[self.pos]]()
                self.pos = -1
            else:
                curses.flash()

def top():
    os.system("top")

def exit():
    sys.exit(1)

def submenu():
    # c.screen.clear()     # nope
    # c.cleanup()          # nope
    submenu_list = [{"first": exit}, {"second": exit}, {"third": exit}]
    submenu = cmenu(submenu_list)
    submenu.display()

try:

    list = [{ "top": top }, {"Exit": exit}, {"Another menu": submenu}]

    c = cmenu(list)

    c.display()

except SystemExit:
    pass
else:
    #log(traceback.format_exc())
    c.cleanup() 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-07T22:50:11.970

我真的建议您考虑使用[panel](http://docs.python.org/2/library/curses.panel.html#module-curses.panel)。每当您拥有可能重叠的小部件时，它都会让生活变得更轻松。这是一个简单的示例，应该可以帮助您入门。（curses.beep() 或 curses.flash() 似乎在我的终端上都不起作用，但这不是重点）

```
#!/usr/bin/env python

import curses
from curses import panel

class Menu(object):
    def __init__(self, items, stdscreen):
        self.window = stdscreen.subwin(0, 0)
        self.window.keypad(1)
        self.panel = panel.new_panel(self.window)
        self.panel.hide()
        panel.update_panels()

        self.position = 0
        self.items = items
        self.items.append(("exit", "exit"))

    def navigate(self, n):
        self.position += n
        if self.position < 0:
            self.position = 0
        elif self.position >= len(self.items):
            self.position = len(self.items) - 1

    def display(self):
        self.panel.top()
        self.panel.show()
        self.window.clear()

        while True:
            self.window.refresh()
            curses.doupdate()
            for index, item in enumerate(self.items):
                if index == self.position:
                    mode = curses.A_REVERSE
                else:
                    mode = curses.A_NORMAL

                msg = "%d. %s" % (index, item[0])
                self.window.addstr(1 + index, 1, msg, mode)

            key = self.window.getch()

            if key in [curses.KEY_ENTER, ord("\n")]:
                if self.position == len(self.items) - 1:
                    break
                else:
                    self.items[self.position][1]()

            elif key == curses.KEY_UP:
                self.navigate(-1)

            elif key == curses.KEY_DOWN:
                self.navigate(1)

        self.window.clear()
        self.panel.hide()
        panel.update_panels()
        curses.doupdate()

class MyApp(object):
    def __init__(self, stdscreen):
        self.screen = stdscreen
        curses.curs_set(0)

        submenu_items = [("beep", curses.beep), ("flash", curses.flash)]
        submenu = Menu(submenu_items, self.screen)

        main_menu_items = [
            ("beep", curses.beep),
            ("flash", curses.flash),
            ("submenu", submenu.display),
        ]
        main_menu = Menu(main_menu_items, self.screen)
        main_menu.display()

if __name__ == "__main__":
    curses.wrapper(MyApp) 
```

查看代码时需要注意的一些事项。

使用 curses.wrapper(callable) 启动您的应用程序比使用您自己的 try/except 进行清理更干净。

您的类调用 initscr 两次，这可能会生成两个屏幕（如果它的设置返回相同的屏幕，还没有测试过），然后当您有多个菜单时，没有正确处理（应该是什么）不同的窗口/屏幕。我认为将菜单传递给屏幕以使用并让菜单创建一个子窗口以显示在我的示例中更清晰和更好的簿记。

命名列表`'list'`不是一个好主意，因为它会影响`list()`函数。

如果您想启动另一个终端应用程序，例如“top”，最好先让 python 干净地退出 curses，然后再启动，以防止终端设置出现任何问题。

# android - ListPopupWindow 不遵守 WRAP_CONTENT 宽度规范

> ID：14200724
> 
> 赞同：40
> 
> 时间：2013-01-07T17:13:01.920
> 
> 标签：android, user-interface, popupwindow

我正在尝试使用 ListPopupWindow 通过一个显示字符串列表`ArrayAdapter`（最终这将是一个更复杂的自定义适配器）。代码如下。如屏幕截图所示，结果`ListPopupWindow`似乎内容宽度为零。它显示了正确数量的项目，这些项目仍然是可点击的，并且点击成功会产生一个`Toast`，所以至少有那么多工作正常。

一个有趣的注释：我可以提供一个以像素为单位的宽度来`popup.setWidth(...)`代替`ListPopupWindow.WRAP_CONTENT`它，它会显示一些内容，但这似乎非常不灵活。

如何使`ListPopupWindow`包装的内容？

**测试活动：**

```
public class MainActivity extends Activity {

    private static final String[] STRINGS = {"Option1","Option2","Option3","Option4"};
    private View anchorView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getActionBar().setHomeButtonEnabled(true);
        setContentView(R.layout.activity_main);
        anchorView = findViewById(android.R.id.home);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                showPopup();
                return true;
        }
        return super.onOptionsItemSelected(item);
    }

    private void showPopup() {
        ListPopupWindow popup = new ListPopupWindow(this);
        popup.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, STRINGS));
        popup.setAnchorView(anchorView);
        popup.setWidth(ListPopupWindow.WRAP_CONTENT);
        popup.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                Toast.makeText(MainActivity.this, "Clicked item " + position, Toast.LENGTH_SHORT).show();
            }
        });
        popup.show();
    }
} 
```

**截屏：**

![在此处输入图像描述](../Images/1581b4098ec3b29740d06486cd980f81.png)

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2014-11-08T07:42:48.217

您可以测量适配器内容的宽度：

```
private int measureContentWidth(ListAdapter listAdapter) {
    ViewGroup mMeasureParent = null;
    int maxWidth = 0;
    View itemView = null;
    int itemType = 0;

    final ListAdapter adapter = listAdapter;
    final int widthMeasureSpec = MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED);
    final int heightMeasureSpec = MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED);
    final int count = adapter.getCount();
    for (int i = 0; i < count; i++) {
        final int positionType = adapter.getItemViewType(i);
        if (positionType != itemType) {
            itemType = positionType;
            itemView = null;
        }

        if (mMeasureParent == null) {
            mMeasureParent = new FrameLayout(mContext);
        }

        itemView = adapter.getView(i, itemView, mMeasureParent);
        itemView.measure(widthMeasureSpec, heightMeasureSpec);

        final int itemWidth = itemView.getMeasuredWidth();

        if (itemWidth > maxWidth) {
            maxWidth = itemWidth;
        }
    }

    return maxWidth;
} 
```

在你的 showPopup() 函数中：

```
 ArrayAdapter arrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, STRINGS);
    popup.setAdapter(arrayAdapter);
    popup.setAnchorView(anchorView);
    popup.setContentWidth(measureContentWidth(arrayAdapter)); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-24T18:55:45.747

问题在于`ListPopupWindow`. 我检查了源代码，并使用`setContentWidth(ListPopupWindow.WRAP_CONTENT)`或`setWidth(ListPopupWindow.WRAP_CONTENT)`使弹出窗口使用其锚视图的宽度。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-04-22T12:06:49.903

我认为最好使用的是 PopupMenu 。例子：

```
final PopupMenu popupMenu = new PopupMenu(mActivity, v);
popupMenu.getMenu().add("test");
popupMenu.setOnMenuItemClickListener(new OnMenuItemClickListener() {

    @Override
    public boolean onMenuItemClick(final MenuItem item) {
        return true;
    }
});
popupMenu.show(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-13T20:05:44.337

我只需在您的 dimen.xml 文件中设置一个尺寸为 160dp 左右：

```
<dimen name="overflow_width">160dp</dimen> 
```

然后使用 getDimensionPixelSize 方法设置弹出窗口宽度以转换为像素：

```
int width = mContext.getResources().getDimensionPixelSize(R.dimen.overflow_width); 
mListPopupWindow.setWidth(width); 
```

这应该保持尺寸密度独立。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-24T18:15:05.863

我相信您的问题在于使用 simple_list_item_1 的 ArrayAdapter。如果您查看该元素的源代码，它具有以下属性

```
android:layout_width="match_parent" 
```

如果您在[此处](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/simple_list_item_1.xml)查看源代码，则可以使用相同的信息创建自己的 new_list_item_1.xml ，但将其更改为`android:layout_width="wrap_content"`然后在 ArrayAdapter 中使用

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-12-26T20:09:19.073

您实际上可以获取anchorView 的父级（因为实际的anchorView 通常是一个按钮）并从那里确定您的宽度。例如：

```
popup.setWidth(((View)anchor.getParent()).getWidth()/2); 
```

这样你就可以得到一个灵活的宽度。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-04T21:49:28.333

另一种解决方案是在布局 xml 中设置 0dp 高度视图以用作锚点。

```
<View
    android:id="@+id/popup_anchor"
    android:layout_width="140dp"
    android:layout_height="0dp"/> 
```

然后在调用 show() 方法之前的某个时间设置锚视图。

```
listPopupWindow.setAnchorView(popupAnchor);
listPopupWindow.show(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-02T10:51:36.913

以下可以提供帮助；

```
listPopupWindow.setWidth(400);
listPopupWindow.setHeight(ListPopupWindow.WRAP_CONTENT); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-06T12:07:36.510

我对此的态度。

在您的布局中创建一个`View`用作锚点的布局，使用您的专用宽度和位置（高度 1 dp，宽度如您所愿）（可能是动态的，即使用 ConstraintLayouts）。使其不可见 ( `android:visibility=View.INIVISIBLE`)。

```
 <View
                    android:id="@+id/my_anchor"
                    android:layout_height="1dp"
                    android:layout_width="0dp"
                    app:layout_constraintTop_toBottomOf="@id/list_item_order_list_app_compat_image_button_gallery"
                    app:layout_constraintStart_toEndOf="@id/list_item_order_list_material_button_map"
                    app:layout_constraintEnd_toEndOf="parent"
                    android:visibility="invisible"
                    android:layout_marginStart="8dp"
                    android:layout_marginEnd="8dp"
                    /> 
```

在您的 , 中引用此视图`viewAnchor`（即使用绑定）：

`listPopupWindow.anchorView = binding.myAnchor`

# c# - ArrayList 字符串搜索

> ID：14200725
> 
> 赞同：-1
> 
> 时间：2013-01-07T17:13:04.793
> 
> 标签：c#, search, arraylist

作为我大学课程的一部分，我们必须使用 ArrayLists 来创建一个记录预订系统，我想包括一种搜索预订姓氏的方法，有没有办法在 C# 中做到这一点？ArrayList 包含变量“姓”，目前我有这个

```
private void search()
{
    string term;
    term = searchBox.Text;
    foreach (string surname in dataList)
        if (surname == term){ 
```

这就是我卡住的地方。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:15:48.670

它更易于使用`IndexOf`并检查索引是否为负数：

```
int pos = dataList.IndexOf(surname);
if (pos >= 0) {
    // It's there - do whatever you need to do...
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:17:15.300

```
using System;
using System.Collections;

class Program
{
    static void Main(string[] args)
    {
        ArrayList datalist = new ArrayList 
            {
                "asd",
                "surname",
                "dfg"
            };
        Console.WriteLine(datalist.IndexOf("surname") != -1 ? "Found" : "Not found");
        Console.ReadKey(true);
    }
} 
```

# iphone - 如何设置键值对以与 NSDictionary 一起使用？

> ID：14200727
> 
> 赞同：0
> 
> 时间：2013-01-07T17:13:06.447
> 
> 标签：iphone, objective-c, ios, nsdictionary, key-value

我想使用预定义的键集围绕多种方法传递字典。我已经在我以前使用过的课程中看到了这一点，但不确定如何设置它。这是我在 m 文件中使用的，例如：

```
NSString *name = [dictionary objectForKey:kObjectsName];
NSDate *date = [dictionary objectForKey:kObjectsDate]; 
```

如何为字典键设置预先确定的名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:27:33.203

通常Apple会在标头中定义一堆常量，例如在[NSAttributedString Application Kit Additions](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSAttributedString_AppKitAdditions/Reference/Reference.html)中：

> **标准属性**
> 
> 属性字符串支持文本的以下标准属性。如果键不在字典中，则使用下面描述的默认值。
> 
> NSString *NSFontAttributeName;
> NSString *NSParagraphStyleAttributeName;
> [...]

如果属性太多（使用定义或使用全局 const 变量），我的建议是使用您自己的常量。

例如在 .m 文件中（其中 CN 是公司名称）：

```
NSString* const CNURLKey= @"URLKey";
NSString* const CNupdateTimeKey= @"updateTimeKey";
NSString* const CNtagsKey= @"tagsKey";
NSString* const CNapplicationWillTerminateKey= @"applicationWillTerminateKey";
NSString* const CNtagAddedkey= @"tagAddedkey";
NSString* const CNtagRemovedKey= @"tagRemovedKey";
NSString* const CNcolorKey= @"colorKey"; 
```

在头文件中：

```
extern NSString* const CNURLKey;
extern NSString* const CNupdateTimeKey;
extern NSString* const CNtagsKey;
extern NSString* const CNapplicationWillTerminateKey;
extern NSString* const CNtagAddedkey;
extern NSString* const CNtagRemovedKey;
extern NSString* const CNcolorKey; 
```

或者你也可以使用define。

您还可以使用户更轻松，创建一个返回 a`NSArray`或`NSSet`包含所有变量列表的方法。

相反，如果您只需要保存几个属性，请重新考虑使用字典的选择，并使用包含所有属性的类，可通过 KVC 访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:06:11.003

您可以将 #define 语句放入您的 .m 文件中：

```
#define kObjectsName @"myName"
#define kObjectsDate @"myDate" 
```

等等

# javascript - getViewportGlobeBounds 返回不准确的值

> ID：14200729
> 
> 赞同：0
> 
> 时间：2013-01-07T17:13:12.873
> 
> 标签：javascript, google-earth-plugin

当我手动将函数返回的值与`GEView.getViewportGlobeBounds`屏幕上的实际视图进行比较时，我发现差异很小（但对我当前的需求很重要）。

实际上，在大多数情况下，从函数返回的值不在视图中。

为什么会这样？有没有办法获得更准确的值？

编辑（代码）：

```
function getExtentNorth() {
  document.getElementById("ExtentNorth").value=ge.getView().getViewportGlobeBounds().getNorth ();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T00:19:00.023

这是预期的行为，如果您阅读[GEView.getViewportGlobeBounds](https://developers.google.com/earth/documentation/reference/interface_g_e_view#ac49a1c24a97607e4096e8df89c4a197b)的文档，您会看到它......

> 返回一个完全包含当前可见的地球区域的边界框。如果有必要包含所有可见的内容，则返回的框**将大于**严格可见的框。

*（我的重点）*

投影到屏幕的方式意味着边界框几乎总是包含比当前可见区域更多的内容，因为每个边界都包含每个方向上最远的可见点。

因此，当您从“接近”和“直下”以外的任何地方观察地球时，这正是您应该期待的结果。

[这个原则在这个例子](http://code.google.com/apis/ajax/playground/#getting_viewport_globe_bounds)中得到了很好的说明。

# c - 非常奇怪的 MPI 行为

> ID：14200732
> 
> 赞同：1
> 
> 时间：2013-01-07T17:13:19.567
> 
> 标签：c, ubuntu, parallel-processing, mpi

我在 MPI 上编写了一个程序，它会以某种环形方式绕过每个处理器 x 次（例如，如果我希望它围绕四个处理器的“环形”运行两次，它将进入 0、1、2 , 3, 0 ,1....3)。

一切都编译得很好，但是当我在我的 Ubuntu VM 上运行程序时，它永远不会输出任何东西。它甚至不会运行第一个输出。谁能解释发生了什么？

这是我的代码：

```
#include <stdio.h>
#include <mpi.h>

int main(int argc, char **argv){
    int rank, size, tag, next, from, num;
    tag = 201;
    MPI_Status status;
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    next = (rank + 1)/ size;
    from = (rank - 1)/size;
    if (rank == 0){
            printf("How many times around the ring? :: ");
        scanf ("%d", &num);
        MPI_Send(&num, 1, MPI_INT, 1, tag, MPI_COMM_WORLD);
    }
    do{
        MPI_Recv(&num, 1, MPI_INT, from, tag, MPI_COMM_WORLD, &status);
        printf("Process %d received %d from process %d\n", rank, num, status.MPI_SOURCE);
        if (rank == 0){
            num--;
            printf("Process 0 has decremented the number\n");
        }
        printf("Process %d sending %d to process %d\n", rank, num ,next);
        MPI_Send(&num, 1, MPI_INT, next, tag, MPI_COMM_WORLD);
    }while (num > 0);
    printf("Process %d has exited", rank);
    if (rank == 0){
        MPI_Recv(&num, 1, MPI_INT, size - 1, tag, MPI_COMM_WORLD, &status);
        printf("Process 0 has received the last round, exiting");
    }
    MPI_Finalize();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:21:07.883

你的邻居分配有问题。`next`如果我们在/`from`计算之后插入以下行

```
printf("Rank %d: from = %d, next = %d\n", rank, from, next); 
```

我们得到：

```
$ mpirun -np 4 ./ring
Rank 0: from = 0, next = 0
Rank 1: from = 0, next = 0
Rank 2: from = 0, next = 0
Rank 3: from = 0, next = 1 
```

你想要更多类似的东西

```
next = (rank + 1) % size;
from = (rank - 1 + size) % size; 
```

这使

```
$ mpirun -np 4 ./ring
Rank 0: from = 3, next = 1
Rank 1: from = 0, next = 2
Rank 2: from = 1, next = 3
Rank 3: from = 2, next = 0 
```

然后你的代码似乎工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:23:37.860

不管你的代码好不好，你的第一个 printf 都应该被输出。

如果您根本没有打印任何消息，即使是“if(rank==)”块中的 printf，也可能是您的 VM 有问题。您确定在该 VM 上激活了任何网络接口吗？

[如果答案是肯定的，通过查看OpenMPI FAQ over tcp questions](http://www.open-mpi.org/faq/?category=tcp)来检查它与 MPI 的兼容性可能会很有用。第 7 节（*如何告诉 Open MPI 使用哪些 TCP 网络？*）和第 13 节（*Open MPI 是否支持虚拟 IP 接口？*）对于在虚拟机中运行 MPI 可能出现的任何问题似乎都很有趣。

# java - 将日期字符串与时区进行比较

> ID：14200735
> 
> 赞同：0
> 
> 时间：2013-01-07T17:13:26.540
> 
> 标签：java, date

我有一个这样的日期字符串：

```
2013-01-04T15:55:51.217+01:00 
```

我可以得到这样的日期：

```
2013-01-04T15:55:51 
```

使用 SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")。

但是无法找到带有毫秒和时区的整个日期字符串的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:19:34.130

试试 SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSXXX")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:23:38.097

试试这个：

SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss:SSS z")

另外，看看[这个](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)（我假设您使用的是 Java 6）

# asp.net - ASP.NET 中继器，每 5 项后需要新行

> ID：14200738
> 
> 赞同：0
> 
> 时间：2013-01-07T17:13:34.970
> 
> 标签：asp.net, repeater

所以我有一个中继器如下：

```
 <asp:Repeater ID="footerMenuRepeater" runat="server" onitemdatabound="FooterMenuRepeaterItemDataBound">
                <HeaderTemplate>
                    <ul id="mainMenuList">
                </HeaderTemplate>
                <ItemTemplate>
                    <li class="footerParentSubLists <%# ((FooterMenuItem)Container.DataItem).MenuTitleBoldClass %> <%# Container.ItemIndex == 5 ? "liClearLeft" : string.Empty %>">
                        <div id="footerMenuDiv">
                           <a class="footerMenuHeader" href='<%# ((FooterMenuItem)Container.DataItem).CallToActionLink %>'><%# ((FooterMenuItem)Container.DataItem).Title %></a>
                        </div>
                        <asp:Repeater ID="subItemRepeater" runat="server">
                            <HeaderTemplate>
                                <ul class="footerChildSubList">
                            </HeaderTemplate>
                            <ItemTemplate>
                                <li><a class="footerMenuItems <%# ((FooterMenuItem)Container.DataItem).ArrowClass %>" href="<%# ((FooterMenuItem)Container.DataItem).CallToActionLink %>"><%# ((FooterMenuItem)Container.DataItem).Title %></a>
                                </li>
                            </ItemTemplate>
                            <FooterTemplate>
                                </ul>
                            </FooterTemplate>
                        </asp:Repeater>                
                    </li>
                </ItemTemplate>
                <FooterTemplate>
                    </ul>
                </FooterTemplate>
          </asp:Repeater> 
```

我要做的是为此转发器中的每 5 个项目创建一个新行，所以我的标记如下

**HTML**

```
<ul id="mainMenuList">
    <li> <!-- row 1  -->
        <ul>
            <li class="footerParentSubLists">
                <div>
                   <a class="footerMenuHeader">Header 1</a>
                </div>
                <ul class="footerChildSubList">
                   <li>
                       <a>Sub 1.1</a>
                   </li>
                   <li>
                       <a>Sub 1.2</a>
                   </li>
                   <li>
                       <a>Sub 1.3</a>
                   </li>
                 </ul>
            </li>
            <li class="footerParentSubLists">
                <div>
                   <a class="footerMenuHeader">Header 2</a>
                </div>
                <ul class="footerChildSubList">
                   <li>
                       <a>Sub 2.1</a>
                   </li>
                   <li>
                       <a>Sub 2.2</a>
                   </li>
                 </ul>
            </li>
            <li class="footerParentSubLists">
                <div>
                   <a class="footerMenuHeader">Header 3</a>
                </div>
            </li>
            <li class="footerParentSubLists">
                <div>
                   <a class="footerMenuHeader">Header 4</a>
                </div>
            </li>
            <li class="footerParentSubLists">
                <div>
                   <a class="footerMenuHeader">Header 5</a>
                </div>
                <ul class="footerChildSubList">
                   <li>
                       <a>Sub 5.1</a>
                   </li>
                   <li>
                       <a>Sub 5.2</a>
                   </li>
                 </ul>
            </li>            
        </ul>    
    </li>
    <li> <!-- row 2  -->
        <ul>
            <li class="footerParentSubLists">
                <div>
                   <a class="footerMenuHeader">Header 6</a>
                </div>
                <ul class="footerChildSubList">
                   <li>
                       <a>Sub 6.1</a>
                   </li>
                   <li>
                       <a>Sub 6.2</a>
                   </li>
                   <li>
                       <a>Sub 6.3</a>
                   </li>
                 </ul>
            </li>
            <li class="footerParentSubLists">
                <div>
                   <a class="footerMenuHeader">Header 7</a>
                </div>
                <ul class="footerChildSubList">
                   <li>
                       <a>Sub 7.1</a>
                   </li>
                   <li>
                       <a>Sub 7.2</a>
                   </li>
                   <li>
                       <a>Sub 7.3</a>
                   </li>
                 </ul>
            </li>
        </ul>
    </li>
</ul> 
```

只是想知道如何将此逻辑添加到转发器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:19:59.587

将面板控件添加到项目模板，并将可见性设置为“False”。`OnItemDataBound`为每个事件增加一个页面级整数变量。当您达到 5 倍数时，将面板的可见性设置为“真”。

让我知道您是否需要一些代码来提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:27:49.857

使用 OnItemDtabound 事件检查中继器项目边界的计数，当计数达到 5 时，为接下来的五个中继器项目创建新行 Simple。

# android - 无法获取 Google 地图 API 的发布证书指纹

> ID：14200743
> 
> 赞同：1
> 
> 时间：2013-01-07T17:14:14.897
> 
> 标签：android, terminal, cmd, google-api

我得到了 debug.keystore SHA1 密钥没有问题，但我无法获得发布密钥库。我不断得到这个（见图）而不是想要的信息列表。我在这里遵循指南：[https ://developers.google.com/maps/documentation/android/start?hl=da#the_google_maps_api_key](https://developers.google.com/maps/documentation/android/start?hl=da#the_google_maps_api_key)

我使用这个命令：

```
keytool -list -v -keystore C:\keystore.keystore\ -alias jakob harteg 
```

我必须使用 cmd 窗口并转到 Java 安装文件夹的 bin 文件夹`C:\Program Files\Java\jre7\bin`，否则我无法访问 keytool。我尝试将密钥库移动到根文件夹，但没有运气。

有什么帮助吗？非常感谢！

![在此处输入图像描述](../Images/61c3457f59a7d997bc0667fea112a7d3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:47:05.390

我使用 ZipSigner 2 应用程序（测试版）轻松创建了 Google Maps Android v2 API 密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:20:44.773

我发现要使它起作用，由于某种原因，别名只能是一个词，在我的情况下是两个..所以最终创建了一个新的密钥库

# .net - Visual basic 2010检查表单加载时文件是否存在

> ID：14200744
> 
> 赞同：3
> 
> 时间：2013-01-07T17:14:15.853
> 
> 标签：.net, vb.net, visual-studio-2010, if-statement

我希望我的 Visual Basic 应用程序运行带有进度条的启动屏幕，然后检查文件是否存在，但是我遇到了一个问题，因为我一开始并且启动屏幕显示文件检查器就会启动，但是我希望它检查`form1`加载时间而不是启动屏幕。这是我的代码，我可以使用一个建议：

**启动画面：**

```
Public NotInheritable Class SplashScreen1

    'TODO: This form can easily be set as the splash screen for the application by going to the "Application" tab
    '  of the Project Designer ("Properties" under the "Project" menu).       

    Private Sub Splashscreen1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim Dte As DateTime = DateTime.Now
        Label2.Text = FormatDateTime(Dte, DateFormat.LongDate)

        Timer1.Start()
        Timer2.Start()

    End Sub

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        If ProgressBar1.Value = ProgressBar1.Maximum Then
            Form1.Show()
            Me.Close()
        End If

    End Sub

    Private Sub Timer2_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer2.Tick
        ProgressBar1.PerformStep()
    End Sub
End Class 
```

**表格 1：**

```
Imports System.Net
Imports System.IO
Public Class Form1
    Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        If My.Computer.FileSystem.FileExists(Application.StartupPath & "/read me.txt") Then
            MsgBox("file found")
        Else
            MsgBox("not found")
        End If

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:29:08.543

尝试将 Form1 代码从 Load 事件移动到 Shown 事件。加载是在用户可见表单之前运行的，据我所知，这不是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:41:07.387

您的 timer1_tick 事件导致了此问题。Timer1 在启动画面加载时启用，根据 timer_interval，它可能永远不会在 form1 加载之前显示。你想让用户在这段时间内看到一些东西吗？

进度条表示正在发生一个动作或一组动作。你有什么需要进度条的地方？如果您想要发生事情的错觉，请确保您的 timer1 间隔大于您的 timer2 间隔，因为 timer1 控制在加载 form1 之前启动画面可见的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T13:24:17.073

```
If ProgressBar1.Value = ProgressBar1.Maximum Then
      Form1.Show()
      Me.Close()
End If 
```

改成：

```
If ProgressBar1.Value = ProgressBar1.Maximum Then
      Form1.Visible = True
      Me.Visible = False
End If 
```

# xcode - 引用 Xcode.app 的 UNIX 服务器上的符号化过程

> ID：14200745
> 
> 赞同：1
> 
> 时间：2013-01-07T17:14:19.347
> 
> 标签：xcode, unix, symbolicate

我从 Mac 终端上的命令行运行符号化过程，它工作正常。我试图将相同的脚本推送到无法运行的 UNIX 服务器上，因为它试图将不存在于服务器上的 Xcode.app 引用到服务器上。在服务器上收到以下错误：

*xcode-select：错误：没有选择 Xcode。使用 xcode-select -switch /Applications/Xcode.app 选择 /Applications/Xcode.app，或查看 xcode-select 手册页 (man xcode-select) 了解更多信息。*

明显的答案可能是我将 Xcode.app 移动到 unix 服务器上，它会起作用。但在生产场景中，这不是一个可行的解决方案。我想要一个无需参考 Xcode.app 即可工作的解决方案。有人可以帮忙吗。

# java - 2D Java 网络游戏坐标更新

> ID：14200746
> 
> 赞同：0
> 
> 时间：2013-01-07T17:14:20.000
> 
> 标签：java

我目前正在开发一个联网的 2D MMO 风格的游戏，其中几个瘦客户端（在一个小程序中运行）能够连接到服务器，并且做 MMO 风格的“事情”！

关于游戏的更多背景信息：首先，我使用 UDP 来实现这一点。每当用户不断地向上/向下/向左/向右移动时，都会出现滚动背景，并且每个客户端都有自己的 2D 头像，始终位于屏幕的中心。

我在过去三天左右一直面临的问题是：我想我不了解为所有客户更新每个客户的 X，Y 位置过程背后的数学，因为现在无论何时连接了一个新客户端，正在运行的第一个客户端实际上会在“WSAD-ing”时移动后一个客户端。

我想我希望对我应该如何处理这个问题有一些见解，使用滚动背景，并且单个客户端始终位于屏幕中间，但随着其他客户端在世界各地移动而更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:20:03.977

正如您所说，您需要将每个用户放在中间，他们不需要四处走动。

与正在玩的用户相比，您可以计算出其他用户的相对位置。如果它们太远，则根本不绘制它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:22:06.627

使用一些中央服务器可能更容易使用它自己的主要参考坐标系来存储所有对象的位置。客户端应在启动时向该服务器注册，并且服务器可以定期检查客户端是否还活着/在线。

# search - Google 搜索引擎上的常见问题列表

> ID：14200747
> 
> 赞同：-1
> 
> 时间：2013-01-07T17:14:24.990
> 
> 标签：search

是否有任何列表包含 Google 搜索引擎中常见/常见问题的列表？这样的清单是否在任何地方公开发布？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:21:39.737

谷歌在这里列出了当前的热门搜索 [http://www.google.com/trends/hottrends](http://www.google.com/trends/hottrends)

如果您知道自己在寻找什么，您可以在[http://www.google.com/trends的搜索中查看历史模式](http://www.google.com/trends)

# jquery - 这些滚动条是如何定制的？

> ID：14200750
> 
> 赞同：0
> 
> 时间：2013-01-07T17:14:37.167
> 
> 标签：jquery, html, css, webkit, scrollbar

我正在尝试在以下网站中创建滚动条：

![滚动条](../Images/c350fba41d51e5920fc19f874daf03bf.png)

我在代码和样式表中都没有找到它。

你能告诉我这是如何实现的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:30:30.543

它利用了 WebKit 的`-webkit-scrollbar`伪元素。它们的完整列表是：

*   `-webkit-scrollbar`
*   `-webkit-scrollbar-button`
*   `-webkit-scrollbar-track`
*   `-webkit-scrollbar-track-piece`
*   `-webkit-scrollbar-thumb`
*   `-webkit-scrollbar-corner`
*   `-webkit-resizer`

[此外，您可以在WebKit 公告](https://www.webkit.org/blog/363/styling-scrollbars/)中找到更多信息。此外，这里是公告中列出[的示例的直接链接。](http://trac.webkit.org/export/41842/trunk/LayoutTests/scrollbars/overflow-scrollbar-combinations.html)

# php - 带有 cURL 的 Apple 推送通知

> ID：14200765
> 
> 赞同：9
> 
> 时间：2013-01-07T17:15:25.033
> 
> 标签：php, ios, curl, notifications, push

有没有办法通过使用 cURL（而不是 stream_socket_client）在 PHP 中实现发布推送通知系统？

我写 ：

```
$url = 'https://gateway.sandbox.push.apple.com:2195';
$cert = 'AppCert.pem';

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json"));
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_SSLCERT, $cert);
curl_setopt($ch, CURLOPT_SSLCERTPASSWD, "passphrase");

$curl_scraped_page = curl_exec($ch); 
```

但是如何设置设备令牌和 json 消息呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-29T07:00:57.823

这是设备令牌和json消息的代码，我想这会对你有所帮助。

```
$url = 'https://gateway.sandbox.push.apple.com:2195';
$cert = 'AppCert.pem';

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json"));
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_SSLCERT, $cert);
curl_setopt($ch, CURLOPT_SSLCERTPASSWD, "passphrase");
curl_setopt($ch, CURLOPT_POSTFIELDS, '{"device_tokens": ["458e5939b2xxxxxxxxxxx3"], "aps": {"alert": "test message one!"}}');

$curl_scraped_page = curl_exec($ch); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-14T10:17:18.757

此代码有效

```
$deviceToken = '...';
$passphrase = '...';
$message = '...';
$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'xxx.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);
$fp = stream_socket_client('ssl://gateway.sandbox.push.apple.com:2195', $err, $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);
$body['aps'] = array('alert' => $message,'sound' => 'default');
$payload = json_encode($body);
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;
$result = fwrite($fp, $msg, strlen($msg));
fclose($fp); 
```

# regex - 了解 RegEx - 上学期的 SEO 重复

> ID：14200766
> 
> 赞同：1
> 
> 时间：2013-01-07T17:15:32.127
> 
> 标签：regex, .htaccess

我在尝试修复的网站上遇到 SEO 重复页面的问题。www.example.com/category/c1234 加载与 www.example.com/category/c1234garbage 相同，我一直在在线阅读并测试代码，到目前为止，我将其缩小到可能的正则表达式问题。我有以下几行

```
# url rewrites
RewriteCond %{REQUEST_URI} ^/index\.cfm/.+ [NC]
RewriteRule ^/index.cfm/(([^/]+)/?([^/]+)?)/?(.*)? /index.cfm/$4?$2=$3 [NS,NC,QSA,N,E=SESDONE:true] 
```

我在规则中添加了一个 R，这样我就可以看到它是否正在通过那里，并且在它通过之后，最后的垃圾消失了。有人可以帮助我理解这一点并找出解决方法，因此当您访问 www.example.com/category/c1234garbage 时，它​​会重定向到 www.example.com/category/c1234

我已经在网上搜索了很长一段时间，并认为可能是时候在这里发帖了，因为我似乎找不到解决方案。我正在阅读“掌握正则表达式”，但我可能需要一段时间才能找到我正在寻找的答案。我很感激你能给我的任何帮助。谢谢你。

编辑：这是我在 RewriteEngine On Rewritebase /

```
# remove trailing index.cfm
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^index.cfm(\?)?$ / [R=301,L]

# remove trailing slash
RewriteCond %{QUERY_STRING} ^$
RewriteRule (.*)/$ /$1 [R=301,L]

# Remove trailing ?
RewriteCond %{THE_REQUEST} \?\ HTTP [NC] 
RewriteRule ^/?(index\.cfm)? /? [R=301,L]

# SEF URLs
SetEnv SEF_REQUEST false
RewriteRule ^[a-z\d\-]+/[a-z]\d+/? /index.cfm/$0 [NC,PT,QSA,E=SEF_REQUEST:true]
RequestHeader add SEF-Request %{SEF_REQUEST}e
RewriteCond %{HTTP:SEF_REQUES} ^true$ [NC]
RewriteRule . - [L] 
```

编辑：我再次阅读 htaccess 并发现我不明白但它可能有一些联系。它位于文件的底部。

```
# lowercase the hostname, and set the TLD name to an enviroment variable
RewriteCond ${lowercase:%{SERVER_NAME}|NONE}  ^(.+)$
RewriteCond %1  ^[a-z0-9.-]*?[.]{0,1}([a-z0-9-]*?\.[a-z.]{2,6})$
RewriteRule .? - [E=TLDName:%1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:17:50.090

从您的描述和代码来看，这听起来像是这里发生的转变：

```
www.example.com/category/c1234garbage
↓
www.example.com/index.cfm?category=c1234garbage 
```

所以我认为问题不在于你的重写规则。问题是您如何在服务器端处理查询字符串参数。如果您有一个实际页面调用`index.cfm`来解释这些参数，您应该调整该页面背后的代码以验证它们并重定向到`/category/c1234`适当的地方。

我认为其中的代码`index.cfm`正在查看参数，检查它是否以可识别的东西**开头**，然后从那里开始。你需要让它更严格。

或者，您可以添加另一个 .htaccess 规则来解析该`c1234garbage`部分并确定哪个部分有效，以及哪个部分（如果有）是垃圾。不过，我不能为此给你一个正则表达式，因为我不知道你的应用程序中有效输入的规则。

* * *

### 编辑：

我想我找到了问题所在。这部分在这里：

```
RewriteRule ^[a-z\d\-]+/[a-z]\d+/? /index.cfm/$0 [NC,PT,QSA,E=SEF_REQUEST:true] 
```

用 指定相对 URL 的开头`^`，但没有指定希望它一直匹配到结尾。所以我认为正在发生的事情是它正在获取匹配的字符串部分，丢弃其他所有内容，并将其附加到`/index.cfm/`. 所以它只需要`/category/c1234`来自的部分`/category/c1234garbage`，因为那是匹配的部分`^[a-z\d\-]+/[a-z]\d+/?`。

您可能只需一个单词中断即可解决此问题：

```
RewriteRule ^[a-z\d\-]+/[a-z]\d+\b/? /index.cfm/$0 [NC,PT,QSA,E=SEF_REQUEST:true] 
```

如果这不起作用，恐怕我们已经达到了我的 htaccess 知识的尽头。我更像是一个正则表达式的人。

顺便说一句，这似乎还是有点尴尬。如果我理解这一点，如果它不符合您的确切模式，部分 URL 仍将被丢弃。例如`/category/c1234?abc=123`将丢失其查询字符串参数。您可能想要重新设计规则的设置方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:18:18.460

我部分解决了这个问题。我添加了

```
# Remove garbage from after category
RewriteCond %{REQUEST_URI} [a-z\d\-]+/[a-z]\d+(.+)
RewriteRule ^([a-z\d\-]+/[a-z]\d+)/? $1 [R=301] 
```

在 SEF 规则之上。它正在做我想做的事情，即从 url 中删除垃圾，但它给了我一个无限循环，因为即使 url 是干净的，它也会重定向。有什么提示吗？

编辑：所以我意识到最后的 .+ 也匹配数字......我如何更改它以匹配数字后面的数字以外的任何内容？基本上我有 .+ 我需要有一个“匹配除数字以外的任何字符”

编辑：我终于让它与以下代码一起工作：

```
# Remove garbage from after category
RewriteCond %{REQUEST_URI} [a-z\d\-]+/[a-z]\d+[A-Za-z-.]+
RewriteRule ^([a-z\d\-]+/[a-z]\d+)/? $1 [R=301] 
```

我之前使用的 (.+) 将第二个数字 (c1234) 作为 . 所以它总是将条件作为真传递，除非它是像 c1 这样的东西

# javascript - jwplayer：视频播放但没有显示？

> ID：14200775
> 
> 赞同：2
> 
> 时间：2013-01-07T17:15:48.873
> 
> 标签：javascript, html, jwplayer

我最近在[这个网站](http://fisainsulation.com/)上添加了两个视频（链接不起作用）并且我播放了视频（在底部）。唯一的问题是视频播放但不显示任何内容。如果您下载视频并在本地观看，您会看到视频很好。
由于视频在网站上播放，我相信视频链接是正确的。我使用以下脚本使视频播放器正常工作 -

```
<script type="text/javascript" src="js/jwplayer.js"></script>
<script type="text/javascript">
    jwplayer("video1").setup({
        flashplayer: "player.swf",
        file: "images/vid1.mp4",
        width: 570,
        height: 320,
        image: "images/preview1.jpg"
    });
    jwplayer("video2").setup({
        flashplayer: "player.swf",
        file: "images/vid2.mp4",
        width: 570,
        height: 320,
        image: "images/preview2.jpg"
    });
</script> 
```

我不确定这有什么问题。非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:44:40.147

MP4 文件需要以 H.264 编码。我刚刚下载了 vid1.mp4 文件，并在 QuickTime 中进行了快速属性检查器视图，该文件以 MPEG-4 编码，这不是 Flash 或 HTML5 支持的。如果您对 H.264 进行重新编码，它将起作用。您可以使用此工具重新编码 - [http://handbrake.fr/](http://handbrake.fr/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T17:52:28.400

我下载了视频，检查了一下，格式不是长尾支持的。它需要是带有 H.264 编解码器的 mp4。

来源： [http ://www.longtailvideo.com/support/jw-player/28836/media-format-support](http://www.longtailvideo.com/support/jw-player/28836/media-format-support)

使用 H.264 视频编解码器和 AAC 音频编解码器的 MP4 视频。MP4 质量很高，可以在所有浏览器和设备中播放。它是当今首选的视频格式。

JW Player 视频编码指南应该会有所帮助。 [http://www.longtailvideo.com/support/jw-player/28838/mp4-video-encoding](http://www.longtailvideo.com/support/jw-player/28838/mp4-video-encoding)

如果您不是视频编码类型或不想下载新的编解码器或应用程序进行编码，我建议您使用 youtube 上传并让他们对视频进行编码。然后，您可以下载生成的 mp4 文件。如果它在 youtube 上工作，它应该使用 jw 播放器工作。

# c# - 使用 LINQ to SQL 的动态查询

> ID：14200778
> 
> 赞同：9
> 
> 时间：2013-01-07T17:15:58.903
> 
> 标签：c#, linq, dynamic

我需要弄清楚是否可以使用 LINQ 动态构建查询，动态选择要在其中执行查询的表。

这是我会做的一个例子：

```
//Not working,just for example

public List<dynamic> _getGenericList(String tableName)
    {
        var l = from a in db.//I need to use here tableName
                  select a;

        return l.ToList<dynamic>();
    } 
```

有没有办法让这成为可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:19:09.433

如果查询这么简单，可以动态创建标准sql语句并执行，这是最简单的方法，不使用处理器重度反射和复杂代码？

```
var query = "SELECT * FROM " + tableName;
var res = context.ExecuteQuery<dynamic>(query).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:42:35.483

我找到了一种方法，但我不确定我是否会使用这段代码。如果您有一个包含两个表的 DataContext：

```
PrimaryTable 
    ID,
    FirstValue,
    SecondValue

SecondaryTable
    ID,
    FirstSecondaryValue 
```

您可以使用以下 DataHelper 类：

```
class DataHelper
{
    public MyDatabaseDataContext db = new MyDatabaseDataContext();

    List<dynamic> GetDynamicList<T>() where T : class
    {
        System.Data.Linq.Table<T> table = db.GetTable<T>();

        var result = from a in table select a;

        return result.ToList<dynamic>();
    }

    public List<dynamic> GetWhatIWant(string tableName)
    {
        Type myClass = Type.GetType("DynamicLinqToSql." + tableName);
        MethodInfo method = typeof(DataHelper).GetMethod("GetDynamicList", BindingFlags.NonPublic | BindingFlags.Instance);
        method = method.MakeGenericMethod(myClass);
        return (List<dynamic>)method.Invoke(this, null);
    }
} 
```

然后，您可以创建 DataHelper 的实例并调用 GetWhatIWant 方法，传入表名。

```
var dataHelper = new DataHelper();

List<dynamic> myFirstList = dataHelper.GetWhatIWant("PrimaryTable");

for (int i = 0; i < 5 && i < myFirstList.Count; i++)
{
    System.Console.WriteLine(String.Format("{0} - {1}", myFirstList[i].FirstValue.ToString(),  myFirstList[i].SecondValue.ToString()));
}

List<dynamic> mySecondList = dataHelper.GetWhatIWant("SecondaryTable");

for (int i = 0; i < 5 && i < mySecondList.Count; i++)
{
    System.Console.WriteLine(mySecondList[i].FirstSecondaryValue.ToString());
}

System.Console.ReadKey(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-25T15:38:58.943

我知道这很旧，但是如果您像我一样在这里寻找答案，那么也许这会有所帮助。我直接使用 .NET [ObjectContext](https://docs.microsoft.com/en-us/dotnet/api/system.data.objects.objectcontext?view=netframework-4.8)而不是[DataContext](https://docs.microsoft.com/en-us/dotnet/api/system.data.linq.datacontext.executequery?view=netframework-4.8)数据源。如果您使用的是 DataContext 版本，那么您可以简单地（我希望）使用`queryResults = myGlobalContext.ExecuteQuery<dbGenericData>(query).ToList();`它，我很确定它会以相同的方式工作。

如果您有命名和设计标准，您的表格将更容易使用

*   表的 ID 字段始终为 X 类型（INT、GUID 等）
*   ID 字段始终命名为 tableNameID，即带有 ID 标记的“表名”。
*   ETC，

这将允许您通过简单地将“ID”字符串附加到表名上来轻松构建 ID 字段，并允许您在需要时使用可靠的 CAST。

说到 CAST，您会在查询字符串中注意到一个。您将需要使用 CAST 修改 SQL 字符串的使用，更改字段长度，如我的 nvarChar(50) 示例等，以克服从数据库中获取各种类型的数据。

最后说明：在查询字符串中，您将看到我使用“AS”关键字将 DB 字段转换为新名称。我将“tableIDField”转换为名称“id”，并将“requestedField”转换为名称“dbData”。这允许系统将数据库中重命名的字段匹配到我们将数据转储到的 STRUCT 对象容器中。这允许您构建通用容器来保存返回的数据，而不必担心与数据库字段名称匹配。

我不是这方面的专家，但我希望这对某人有所帮助。

```
private void testMethod(string requestedField, string tableName)
{
    var tableIDField = tableName + "ID";

    var query = "select " + tableIDField + " as id, CAST(" + requestedField + "as nvarchar(50)) as dbData from " + tableName;

    List<dbGenericData> queryResults = null;

    try
    {
        queryResults = myGlobalContext.ExecuteStoreQuery<dbGenericData>(query).ToList();
    }
    catch (Exception ex)
    {
        //Simply ignore any exceptions.  
        //These will need examined to determine best solution to unexpected results.
    }
}
private struct dbGenericData
{
    public dbGenericData(int id, string dbData)
    {
        this = new dbGenericData();
        ID = id;
        DBData = dbData;
    }

    public int ID { get; set; }

    public string DBData { get; set; }

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-10T08:59:51.130

你可以通用方法并使用`db.Set<T>`它返回一个`DbSet`基于`T`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-09T18:41:06.590

```
var esql = "从 TypeName 中选择 t 作为 t"
var q = db.CreateQuery(esql);

```

使用实体 sql 进行 linq to sql，[http ://esql.codeplex.com](http://esql.codeplex.com)

# linux - 在 LINUX 上动态运行控制台到 TTY

> ID：14200782
> 
> 赞同：1
> 
> 时间：2013-01-07T17:16:18.250
> 
> 标签：linux, console, arm9

我们在 ARM9 板上嵌入了 linux，它通过串行线 TTY1 连接到另一个板，没有其他方式与 ARM9 板通信（没有以太网没有 USB），在我们的正常状态应用程序中，ARM9 板与 TTY1 上的另一个板交换数据。在维护模式下，我们想在 ARM9 linux 板上运行控制台，所以我们的想法是：

*   向我们的软件发送特殊命令
*   我们的软件会做一些事情来准备在 TTY1 上激活控制台以便下次重新启动
*   以编程方式重新启动软件
*   现在在控制台模式下到 TTY1
*   改变我们需要的任何东西
*   要求正常重启并运行我们的正常软件

我们在第 2 步需要一些帮助，我们可以在某处写什么或者我们可以以编程方式运行哪个命令来告诉 linux 在控制台模式下重新启动到 TTY1 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:30:47.927

tty1 通常是一个虚拟终端——也许是 ttyS0 或 ttyS1？

基本上有两件事需要做——在引导期间让内核输出到串行连接，以及在串行线上运行终端程序。

[https://wiki.archlinux.org/index.php/Working_with_the_serial_console](https://wiki.archlinux.org/index.php/Working_with_the_serial_console)

提供了一些关于如何设置的很好的线索，但你必须根据你的设置来调整它们。

# c++ - 迭代所有可能的俄罗斯方块形式

> ID：14200784
> 
> 赞同：0
> 
> 时间：2013-01-07T17:16:27.340
> 
> 标签：c++, permutation, tetris, variants

> **可能重复：**
> [编程竞赛问题：计数多米诺骨牌](https://stackoverflow.com/questions/4650762/programming-contest-question-counting-polyominos)

有不同类型的俄罗斯方块形状。例如在形状像字母`T L I Z J O S`。

我正在尝试获得一种可以创建这些块的算法。我正在使用 C++，但伪代码就足够了。任何想法如何解决它或如何描述问题以更好地搜索它？

块是俄罗斯方块形状的最小部分。如果你有 4 个块来创建一个形状，那么只有 7 种可能的形状：

```
X      X    X
X  XX  X    X   X   XX  XX 
X  XX  XX  XX  XXX XX    XX
X 
```

轮换不算。如果你有 3 个块，那么你只能塑造 2 个块：

```
X   X
X  XX
X 
```

`n`当你有块时存在多少个形状？它们长什么样？

# android - 动作条 Sherlock + ListFragments + Fragments

> ID：14200785
> 
> 赞同：4
> 
> 时间：2013-01-07T17:16:32.817
> 
> 标签：android, actionbarsherlock

我对 2.2 版中的片段的兼容性有疑问。我使用“Sherlock Action Bar”来创建操作栏，但我无法创建两个片段。我一直收到这个错误：

```
 01-07 12:51:56.124: E/AndroidRuntime(475): FATAL EXCEPTION: main 01-07
 12:51:56.124: E/AndroidRuntime(475): java.lang.RuntimeException:
 Unable to start activity
 ComponentInfo{com.example.pruebasherlock_v4/com.example.pruebasherlock_v4.MainActivity}:
 android.view.InflateException: Binary XML file line #7: Error
 inflating class fragment 01-07 12:51:56.124: E/AndroidRuntime(475):
    at
 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
 01-07 12:51:56.124: E/AndroidRuntime(475):     at
 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
 01-07 12:51:56.124: E/AndroidRuntime(475):     at
 android.app.ActivityThread.access$2300(ActivityThread.java:125) 01-07
 12:51:56.124: E/AndroidRuntime(475):   at
 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
 01-07 12:51:56.124: E/AndroidRuntime(475):     at
 android.os.Handler.dispatchMessage(Handler.java:99) 01-07
 12:51:56.124: E/AndroidRuntime(475):   at
 android.os.Looper.loop(Looper.java:123) 01-07 12:51:56.124:
 E/AndroidRuntime(475):     at
 android.app.ActivityThread.main(ActivityThread.java:4627) 01-07
 12:51:56.124: E/AndroidRuntime(475):   at
 java.lang.reflect.Method.invokeNative(Native Method) 01-07
 12:51:56.124: E/AndroidRuntime(475):   at
 java.lang.reflect.Method.invoke(Method.java:521) 01-07 12:51:56.124:
 E/AndroidRuntime(475):     at
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 01-07 12:51:56.124: E/AndroidRuntime(475):     at
 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 01-07
 12:51:56.124: E/AndroidRuntime(475):   at
 dalvik.system.NativeStart.main(Native Method) 01-07 12:51:56.124:
 E/AndroidRuntime(475): Caused by: android.view.InflateException:
 Binary XML file line #7: Error inflating class fragment 01-07
 12:51:56.124: E/AndroidRuntime(475):   at
 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
 01-07 12:51:56.124: E/AndroidRuntime(475):     at
 android.view.LayoutInflater.rInflate(LayoutInflater.java:618) 01-07
 12:51:56.124: E/AndroidRuntime(475):   at
 android.view.LayoutInflater.inflate(LayoutInflater.java:407) 01-07
 12:51:56.124: E/AndroidRuntime(475):   at
 android.view.LayoutInflater.inflate(LayoutInflater.java:320) 01-07
 12:51:56.124: E/AndroidRuntime(475):   at
 android.view.LayoutInflater.inflate(LayoutInflater.java:276) 01-07
 12:51:56.124: E/AndroidRuntime(475):   at
 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
 01-07 12:51:56.124: E/AndroidRuntime(475):     at
 android.app.Activity.setContentView(Activity.java:1647) 01-07
 12:51:56.124: E/AndroidRuntime(475):   at
 com.example.pruebasherlock_v4.MainActivity.onCreate(MainActivity.java:12)
 01-07 12:51:56.124: E/AndroidRuntime(475):     at
 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 01-07 12:51:56.124: E/AndroidRuntime(475):     at
 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
 01-07 12:51:56.124: E/AndroidRuntime(475):     ... 11 more 01-07
 12:51:56.124: E/AndroidRuntime(475): Caused by:
 java.lang.ClassNotFoundException: android.view.fragment in loader
 dalvik.system.PathClassLoader[/data/app/com.example.pruebasherlock_v4-1.apk]
 01-07 12:51:56.124: E/AndroidRuntime(475):     at
 dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
 01-07 12:51:56.124: E/AndroidRuntime(475):     at
 java.lang.ClassLoader.loadClass(ClassLoader.java:573) 01-07
 12:51:56.124: E/AndroidRuntime(475):   at
 java.lang.ClassLoader.loadClass(ClassLoader.java:532) 01-07
 12:51:56.124: E/AndroidRuntime(475):   at
 android.view.LayoutInflater.createView(LayoutInflater.java:466) 01-07
 12:51:56.124: E/AndroidRuntime(475):   at
 android.view.LayoutInflater.onCreateView(LayoutInflater.java:544)
 01-07 12:51:56.124: E/AndroidRuntime(475):     at
 com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
 01-07 12:51:56.124: E/AndroidRuntime(475):     at
 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
 01-07 12:51:56.124: E/AndroidRuntime(475):     ... 20 more 
```

我的 main_activity 包含以下内容：

```
package com.example.pruebasherlock_v4;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

我的 main.xml 包含以下内容：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment 
        android:id="@+id/listaIzq"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="fill_parent" 
        class="com.example.pruebasherlock_v4.Lista"/>

    <fragment 
        android:id="@+id/detallesDer"
        android:layout_weight="3"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        class="com.example.pruebasherlock_v4.Detalle" />

</LinearLayout> 
```

而“lista”和“Detalle”类包含以下内容：

清单：

```
package com.example.pruebasherlock_v4;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

import com.actionbarsherlock.app.SherlockListFragment;

public class Lista extends SherlockListFragment{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
    }

    @Override
    //se sobreescribe este método como el que siempre "carga" la información a mostrar en el fragment
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
        "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
        "Linux", "OS/2" };
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this.getActivity(), android.R.layout.simple_list_item_1, values);

        setListAdapter(adapter);
    }

    @Override
    //al hacer tap en algun elemento de la vista, setea el texto del elemento en el nuevo fragment
    public void onListItemClick(ListView l, View v, int position, long id) {
        String item = (String) getListAdapter().getItem(position);
        Detalle fragment = (Detalle) getFragmentManager().findFragmentById(R.id.detallesDer);
        if (fragment != null && fragment.isInLayout()) {
            fragment.setText(item);
        } else {
            /*Intent intent = new Intent(getActivity().getApplicationContext(), DetailActivity.class);
            intent.putExtra("value", item);
            startActivity(intent);*/
        }
    }
} 
```

细节：

```
package com.example.pruebasherlock_v4;

import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import com.actionbarsherlock.app.SherlockFragment;

public class Detalle extends SherlockFragment {
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        Log.e("Test", "hello");
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);     
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.detalle, container, false);
        return view;
    }

    public void setText(String item) {
        TextView view = (TextView) getView().findViewById(R.id.textoDetalle);
        view.setText(item);
    }
} 
```

我觉得放了很多代码，但不是因为它是错误的。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T17:42:53.217

> 我的 main_activity 包含以下内容：

如果您打算使用 ActionBarSherlock，请从`Sherlock`类继承，例如。`SherlockActivity`如果你*也*打算使用片段，请继承自`SherlockFragmentActivity`.

引用[ActionBarSherlock 文档](http://actionbarsherlock.com/usage.html)：

> 在创建活动以在所有版本的 Android 上使用操作栏时，您必须声明您的活动以扩展任何以“Sherlock”开头的活动类（例如，SherlockActivity、SherlockFragmentActivity）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T17:43:08.580

为了使用兼容性片段和 ABS，您必须扩展 SherlockFragmentActivity

```
public class MainActivity extends SherlockFragmentActivity { 
```

# cmake - 使用 find_library 命令找不到 Matlab 库

> ID：14200786
> 
> 赞同：0
> 
> 时间：2013-01-07T17:16:36.420
> 
> 标签：cmake

我发出以下命令：

```
find_file(MATLAB_ROOT matlab $ENV{ProgramW6432})
set(MATLAB_LIBS_DIRECTORY ${MATLAB_ROOT}/extern/lib/win64/microsoft)

find_library(MATLAB_MEX_LIB mex
  ${MATLAB_LIBS_DIRECTORY}
) 
```

但它失败了`MATLAB_MEX_LIB-NOTFOUND`。我的路径似乎正确我可以使用以下命令轻松检索库文件：

```
find_file(LIB_FILE libmex.lib ${MATLAB_LIBS_DIRECTORY}) 
```

我正在使用 cmake 版本 2.8.9 在 Windows 7 中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:09:43.120

我发现了问题。我`--trace`在 cmake 中使用了选项，发现命令缺少后缀`find_library`：

```
SET(CMAKE_FIND_LIBRARY_PREFIXES lib )
SET(CMAKE_FIND_LIBRARY_SUFFIXES .dll.a .a ) 
```

所以我将路径更改为：

```
set(MATLAB_LIBS_DIRECTORY ${MATLAB_ROOT}/bin/win64) 
```

并调用了以下命令：

```
set(CMAKE_FIND_LIBRARY_SUFFIXES .dll .dll.a .a)
find_library(MATLAB_MEX_LIB mex
             PATHS ${MATLAB_LIBS_DIRECTORY}
             NO_DEFAULT_PATH
) 
```

这次一切顺利。感谢弗雷泽的支持！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:36:00.393

当您这样做[`find_library`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afind_library)时，搜索会[`${CMAKE_STATIC_LIBRARY_PREFIX}`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_STATIC_LIBRARY_PREFIX)添加到每个提供的名称之前（并且还会添加[`${CMAKE_STATIC_LIBRARY_SUFFIX}`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_STATIC_LIBRARY_SUFFIX)）。

在 Windows 上，`${CMAKE_STATIC_LIBRARY_PREFIX}`为空；在 Unix 上它是“lib”，因此您需要在搜索名称前添加“lib”，仅适用于 Windows。您可以使用以下的长手版本来涵盖这两种情况`find_library`：

```
find_library(MATLAB_MEX_LIB
                NAMES mex libmex
                PATHS ${MATLAB_LIBS_DIRECTORY}
                NO_DEFAULT_PATH  # Avoid searching outside MATLAB_LIBS_DIRECTORY
            ) 
```

# delphi - Delphi 7 中的 EFilererror 异常

> ID：14200789
> 
> 赞同：0
> 
> 时间：2013-01-07T17:16:47.717
> 
> 标签：delphi, delphi-7

我已经在包含*TNT 组件*的 Delphi 7 中注册了包*TMS Unicode 组件包*。这个包包含一个名为的类，我用它来创建我自己的自定义组件，名为：*`TTntCustomComboBox``Combobox2`*

 *```
unit Combobox2;

interface

uses
  Windows, Messages, Classes, Graphics, Controls, StdCtrls, ImgList, ActiveX, SysUtils, TntStdCtrls, TntWindows;

type
  TCombobox2 = class(TTntCustomComboBox) 

...
procedure Register;
begin
  RegisterComponents('Standard', [TCombobox2]);
end;

... 
```

我已将此组件 ( `TCombobox2`) 添加到包`dclusr.dpk`中。编译`dclusr.dpk`有效，但安装软件包会引发异常：

***包 C:\program files\Delphi7\Projects\Bpl\dclusr.bpl 中的注册过程 Combobox2.Register 引发异常类 EFilererror : A class named TTntCustomComboBox already exists***

那么，我该如何解决呢？

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:19:10.273

该错误消息表明您的包正在尝试注册一个已注册的组件，即`TTntCustomComboBox`.

从您提供的详细信息中看不出为什么会发生这种情况。一个可能的原因是，如果您在包中包含 TNT 组件，而不是在包的 requires 子句中引用它。另一个可能的原因是您的`Register`函数试图注册`TTntCustomComboBox`. 如果您的实际声明`TCombobox2`是这样的，则可能会发生这种情况：

```
TCombobox2 = TTntCustomComboBox; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T00:23:27.300

将 {$WEAKPACKAGEUNIT ON} 放在单位标题之后。*

# jquery - HandonTable setDataAtCell 不起作用

> ID：14200791
> 
> 赞同：3
> 
> 时间：2013-01-07T17:17:04.877
> 
> 标签：jquery, excel, handsontable

我们正在尝试使用 HandsonTable 构建一个类似表格的 Excel。出于某种原因， setDataAtCell 方法似乎不起作用。在调试时，我看到此方法已正确设置数据，但在显示表格时，未显示更新的值。我可能正在做一些真正的垃圾。非常感谢您的帮助。以下是代码：

```
 container.handsontable({
                data: getChemicalData(),
                minRows: 5,
                minCols: 6,
                minSpareRows: 2,
                minSpareCols: 0,
                colHeaders: ["<b>TUBE</b>", "<b>A</b>", "<b>B</b>", "<b>C</b>", "<b>D</b>", "<b>Total in Item, grams</b>"],
                colWidths: [200,50,50,50,50,100],
                columns: [
                    {
                        data: "Effect",
                        type: {editor: Handsontable.AutocompleteEditor },
                        source: ["RD", "SB", "WG"],
                        strict: true

                    },
                    {
                        data: "A"
                    },
                    {
                        data: "B"
                    },
                    {
                        data: "C"
                    },
                    {
                        data: "D"
                    },
                    {   
                        data: "TotalInGms",
                        readOnly: true
                    }

                ],

            cells: function (row, col, prop) 
            {       
                var cellProperties = {};
                if ((row === 0 && col === 0) || (row === 1)) 
                {
                    cellProperties.readOnly = true; 
                }
                return cellProperties;
            },
            onBeforeChange: function (data) {

                if (data[0][1] !== "Effect") {

                    if (parseInt(data[0][3]) > 0) {

                    }
                    else {
                        return false;
                    }
                }

            },
                onChange: function (data, source) {
                if (source === 'loadData') {
                    return; //don't show this change in console
                }

                if (isBypass === true) {
                    return;
                }
                var sel = $("#example").handsontable('getSelected');
                if (sel != null) {
                    if (sel[0] === 0) {
                        var noOfRows = $("#example").handsontable('countRows');
                        var totalGmsPerItem = 0;
                        var gmsPerTube = 0;
                        for (var i = 2; i < noOfRows; i++) {
                            gmsPerTube = parseInt($("#example").handsontable('getDataAtCell', i, sel[1]));
                            if (gmsPerTube > 0) {
                                totalGmsPerItem = parseInt(totalGmsPerItem) + gmsPerTube * parseInt(data[0][3]);
                            }
                        }
                        var noOfCols = $("#example").handsontable('countCols');

                        isBypass = true;
                        $("#example").handsontable('setDataAtCell', 3, 2, totalGmsPerItem);
                        //$("#example").handsontable('setDataAtCell', sel[0],sel[1], 19);
                        isBypass = false;

                    }
                }

                return;

            }

            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:47:11.743

从[维基](https://github.com/warpech/jquery-handsontable/wiki/Methods)：

> `handsontable('setDataAtCell', row, col, value)`
> 
> 为单元格设置新值。要一次更改多个单元格，请将格式更改数组`[[row, col, value], ...]`作为唯一参数传递。Col 是可见列的索引（注意，如果列被重新排序，将使用当前顺序）

您必须像我一样下载了一个损坏的版本，其中没有方法 setDataAtRowProp 并且 setDataAtCell 采用该方法的参数。

# git - 如何在 git 中的现有分支之上创建分支？

> ID：14200792
> 
> 赞同：2
> 
> 时间：2013-01-07T17:17:10.477
> 
> 标签：git, branch

标题说明了一切。我想在现有分支之上创建一个分支。我试图通过切换到一个新分支并创建一个新分支，同时仍然签出该分支来做到这一点。但是 Bitbucket.org-Page 显示我做错了什么，它只是在 master 分支之前创建了新分支..

谢谢你的时间..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T17:28:52.783

也许您打算从另一个分支创建分支。如果是这样，请查看[一个成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)。

在您的情况下，它将是这样的：

```
git checkout -b newbranch oldbranch 
```

# codeigniter - AES_DECRYPT with Codeigniters Active Record

> ID：14200793
> 
> 赞同：1
> 
> 时间：2013-01-07T17:17:13.473
> 
> 标签：codeigniter, activerecord, encryption, aes

Hi has anyone had experience with using AES_DECRYPT and codeigniters active record. I've tried using the following line:

`$query = $this->db->select("AES_DECRYPT(testing,'$key') as testing");`

but continue to get an sql syntax error. I've tried using a manual standard sql string which works but would prefer to stick with active record if I can.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:28:33.093

CodeIgniter is trying to escape that, and it has no idea how to. Add `FALSE` as the 2nd parameter to tell it not to escape it.

```
// We need to escape this value before the query
$key = $this->db->escape($key);
// Tell CodeIgniter not to escape this
$this->db->select("AES_DECRYPT(testing, $key) as testing", FALSE); 
```

# ios - 在 AVURLAsset 中查找最近的零交叉点

> ID：14200794
> 
> 赞同：1
> 
> 时间：2013-01-07T17:17:14.973
> 
> 标签：ios, audio, avplayer

我正在尝试找到一种方法来淡入本地保存的音轨而不会出现音频故障。我正在使用 AVPlayer 并使用 AVURLAsset 从 iPodLibrary 引用 mp3。以下方法大部分时间都有效，但并非一直有效，所以我想我需要扫描音频数据以寻找最近的音量过零并从那里淡入淡出。任何指针将不胜感激。

```
float duration = 0.5;
AVAsset *asset = [self.av_Player.currentItem asset];
NSArray *keys = [NSArray arrayWithObject:@"tracks"];

[asset loadValuesAsynchronouslyForKeys:keys completionHandler:^(void) {
    NSError *error = nil;

    NSTimeInterval now = [self currentPlaybackTime];
    CMTime mainFadeIn = CMTimeMakeWithSeconds(now, 6000);
    CMTime mainFadeDuration = CMTimeMakeWithSeconds(duration, 6000);
    CMTimeRange timerange = CMTimeRangeMake(mainFadeIn, mainFadeDuration);

    AVKeyValueStatus trackStatus = [asset statusOfValueForKey:@"tracks" error:&error];

    switch (trackStatus) {
        case AVKeyValueStatusLoaded:
            if( self.av_Player )    {
                NSArray *tracks = [asset tracksWithMediaType:AVMediaTypeAudio];

                AVMutableAudioMixInputParameters *volumeMixInput = [AVMutableAudioMixInputParameters audioMixInputParameters];
                [volumeMixInput setVolumeRampFromStartVolume:0.0 toEndVolume:tovolume timeRange:timerange];
                [volumeMixInput setTrackID:[[tracks objectAtIndex:0] trackID]];

                AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
                [audioMix setInputParameters:[NSArray arrayWithObject:volumeMixInput]];
                [self.av_Player.currentItem setAudioMix:audioMix];

            }
            break;
        default:
            break;
    }
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:06:53.900

不知道为什么我使用上述方法会出现故障，但假设它可能与使用块有关。无论如何，我使用了下面的代码，它现在可以顺利淡入和淡出 - 希望这对其他人有所帮助。

```
NSTimeInterval now = [self currentPlaybackTime];

AVPlayerItem *playerItem = self.av_Player.currentItem;

AVAsset *asset = playerItem.asset;
NSArray *audioTracks = [asset tracksWithMediaType:AVMediaTypeAudio];

NSMutableArray *allAudioParams = [NSMutableArray array];
for (AVAssetTrack *track in audioTracks) {
    AVMutableAudioMixInputParameters *audioInputParams = [AVMutableAudioMixInputParameters audioMixInputParameters];
    [audioInputParams setVolume:fromvolume atTime:CMTimeMakeWithSeconds(now-0.1, 6000)];
    [audioInputParams setVolume:fromvolume atTime:CMTimeMakeWithSeconds(now, 6000)];
    [audioInputParams setVolume:tovolume atTime:CMTimeMakeWithSeconds(now+duration, 6000)];
    [audioInputParams setTrackID:[track trackID]];
    [allAudioParams addObject:audioInputParams];
}

AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
[audioMix setInputParameters:allAudioParams];

[playerItem setAudioMix:audioMix]; 
```

# asp.net - 发布类库生成的文档 XML？

> ID：14200796
> 
> 赞同：1
> 
> 时间：2013-01-07T17:17:15.380
> 
> 标签：asp.net, visual-studio-2012, publish, xml-documentation

我有一个类库 Portable Area，这是一个引用类库的 ASP.NET 项目。

类库具有来自 Visual Studio 2012 的构建配置，它将输出 XML Dcoumentation 文件。

我将输出路径设置为：

垃圾箱\

XML 文档文件：bin\DocumentFile.XML

当我进行调试时，它生成得很好。

我还确保 Debug 和 Release 的配置具有相同的输出路径。

但是当我发布这个 ASP.NET 项目时，类库中的 XML 文档并没有发布到发布文件夹。

即使我进行发布，如何生成 XML 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T07:15:36.913

转到 XML 文件的属性并将构建操作更改为内容选项，可能会解决您的问题

# codeigniter - codeigniter hmvc 路由无法正常工作

> ID：14200798
> 
> 赞同：5
> 
> 时间：2013-01-07T17:17:32.053
> 
> 标签：codeigniter, hmvc

我通过wiredesignz 安装了HMVC，但`application/modules/xxx/config/routes.php`根本无法识别来自的路线。这是一个例子：

在`application/modules/pages/config/routes.php`我有：

```
$route['pages/admin/(:any)'] = 'admin/$1';
$route['pages/admin'] = 'admin'; 
```

如果我键入 URL，`domain.com/admin/pages/create`它不起作用，则会出现 CI 404 Page not found。如果我将路线移动到`application/config/routes.php`它就可以了。

如何在不将所有管理路由放入 main 的情况下使其工作`routes.php`？

我在网上搜索了 4 个多小时，但没有找到有关此问题的答案。我已经检查`routes.php`了模块是否正在加载并且工作正常，但是我放入的任何路由都不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T14:05:04.313

我找到了一种使模块中的路由正常工作的方法，我不知道是否是理想的解决方案，但到目前为止工作正常：

打开你的 application/config/routes.php 和 $route['404_override'] = ''; 添加以下代码：

```
$modules_path = APPPATH.'modules/';     
$modules = scandir($modules_path);

foreach($modules as $module)
{
    if($module === '.' || $module === '..') continue;
    if(is_dir($modules_path) . '/' . $module)
    {
        $routes_path = $modules_path . $module . '/config/routes.php';
        if(file_exists($routes_path))
        {
            require($routes_path);
        }
        else
        {
            continue;
        }
    }
} 
```

即使模块文件夹中缺少 config 文件夹或 routes.php，以下解决方案也能正常工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T17:26:25.560

事情是这样的：该模块`routes.php`仅在“调用”该模块时才被加载，否则 CI 必须从*所有模块加载**所有*路由配置才能处理每个请求（这不会发生）。

 *您必须使用您的主应用程序`routes.php`才能使其正常工作。您没有`pages`在 URL 中使用该段，因此该模块的路由永远不会被加载。

我知道这是您想要避免的，但不幸的是，除非您想变得“hacky”，否则这是不可能的。

* * *

这是我用来映射 to 请求的路由`admin/module`，`module/admin`也许你可以使用它：

```
// application/config/routes.php
$route['admin']                     = "dashboard/admin"; // dashboard is a module
$route['admin/([a-zA-Z_-]+)/(:any)'] = "$1/admin/$2";
$route['admin/([a-zA-Z_-]+)']        = "$1/admin/index";
$route['(:any)/admin']               = "admin/$1"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T10:47:16.070

你只需要这个[https://gist.github.com/Kristories/5227732](https://gist.github.com/Kristories/5227732)。

复制`MY_Router.php`到`application/core/`*

# asp.net - ASP .net：从 .vb 代码注册自定义控件

> ID：14200799
> 
> 赞同：2
> 
> 时间：2013-01-07T17:17:31.763
> 
> 标签：asp.net, vb.net, custom-controls

我尝试创建自定义控件，从 .vb 代码动态加载。

这是我在文件“controlcar.ascx”中的自定义控件“ControlCar”

```
<%@ Control Language="VB" ClassName="ControlCar" %>
<script runat="server">
    Private m_car As Car = Nothing
    Public Property Car() As Car
        Get
            Car= m_car
        End Get
        Set(ByVal value As Car)
            m_car = value
        End Set
    End Property

    Protected Sub Panel_OnLoad(ByVal sender As Object, ByVal e As System.EventArgs)
        If Me.m_car Is Nothing Then
            lit_color.Text = "(m_car Is Nothing)"
        Else
            lit_color.Text = "color of Me.m_car is (" & Me.m_car.Color & ")"
        End If
    End Sub

</script>

<asp:Panel ID="panel" OnLoad="Panel_OnLoad" runat="server">
    this is a car<br />
    color = <asp:Literal ID="lit_color" runat="server"></asp:Literal><br />
    <br />
</asp:Panel> 
```

这是我在文件“cars.aspx”中的 ASP 网页，它使用 .vb 代码进行事件，...

```
<%@ Page Language="vb" Explicit="true" Inherits="PageBase" Src="/code/cars.vb"%>

<html>
<body>
    <!-- Html code here --->
    <asp:panel ID="panel_cars" runat="server">
    </asp:panel>
</body> 
```

这是我在文件“cars.vb”中的.vb代码

```
 Private Sub CreateCar()
        Dim car As Car = new Car()
        Dim control As ControlCar = Nothing
        control= CType(LoadControl("/code/controlcar.ascx"), ControlCar)
        control.Car = car
        panel_cars.Controls.Add(control)
    End Sub 
```

**但它失败了，说'ControlCar'**在cars.vb中无法识别。

我知道它有效，如果在 .aspx 文件中移动 .vb 代码并使用指令

```
<%@ Register TagPrefix="uc" TagName="ControlCar" Src="/code/controlcar.ascx" %> 
```

但我需要像我的示例中那样将 .vb 代码和 .aspx 代码分开。

如何在 .vb 文件中识别“ControlCar”类型（在 .ascx 中定义）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:55:11.383

您需要添加某种参考。您可以使用参考指令：

```
<%@ Reference Control="controlcar.ascx" %>. 
```

控件正在动态编译。如果您没有参考，编译器不知道您要使用什么。

编辑：

您也许可以使用：

```
Imports ASP.controlcar_ascx 
```

如果引用必须在后面的代码中。不过，我过去曾遇到过这个问题。

# xml - XML 和 XSLT 循环和变量

> ID：14200803
> 
> 赞同：0
> 
> 时间：2013-01-07T17:17:49.947
> 
> 标签：xml, xslt

这是我的饲料

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="feedstylev5.xsl"?>
<feed >

   <Layout>
        <breakingnews>
               <story id="112345" rank="1">Story Title 1</story>
                <story id="122345" rank="2">Story Title 1</story>
                <story id="212345" rank="3">Story Title 2</story>

        </breakingnews>

        <topnews>
                <story id="012345" rank="1">Story Title 1</story>
                <story id="117345" rank="2">Story Title 1</story>
                <story id="612345" rank="3">Story Title 1</story>
                <story id="712345" rank="4">Story Title 1</story>

        </topnews>

        <news>
                <story id="012345" rank="1">Story Title 1</story>
                <story id="117345" rank="2">Story Title 1</story>
                <story id="612345" rank="3">Story Title 1</story>
                <story id="312145" rank="4">Story Title 1</story>
                <story id="412045" rank="5">Story Title 1</story>
        </news>

        <sports>
                <story id="712345" rank="1">Story Title 1</story>
                <story id="912345" rank="2">Story Title 1</story>
                <story id="812345" rank="3">Story Title 1</story>
                <story id="102345" rank="4">Story Title 1</story>
                <story id="212245" rank="5">Story Title 1</story>
        </sports>

   </Layout>
</feed> 
```

我想要做的是循环浏览故事和突发新闻、体育标签的位置，我想显示标签本身，而不是像下面这样的硬编码。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:atom="http://www.w3.org/2005/Atom">

<xsl:template match="/feed">
  <html>
  <body>

   <h2 style="font-style:italic; font-weight:bold;">Breaking News</h2>

    <xsl:for-each select="Layout/breakingnews/story">

      <div style="float:left; margin-left:25px; margin-right:5px;"><xsl:value-of select="@rank"/></div>
      <div style="float:left;"> <xsl:value-of select="."/></div>
      <div style="float:left;">(<xsl:value-of select="@id"/>)</div>
      <div style="clear:both;"></div>    
    </xsl:for-each>

  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

我想用变量替换突发新闻，因为值将发生变化并希望使其循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:25:13.723

我的建议是执行以下操作 - 将 for-each 逻辑移动到模板中：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:atom="http://www.w3.org/2005/Atom">

    <xsl:template match="/feed">
        <html>
            <body>
                <h2 style="font-style:italic; font-weight:bold;">Breaking News</h2>
                <xsl:apply-templates select="Layout/breakingnews/story"/>

                <h2 style="font-style:italic; font-weight:bold;">Top News</h2>
                <xsl:apply-templates select="Layout/topnews/story"/>

            </body>
        </html>
    </xsl:template>

    <xsl:template match="story">
        <div style="float:left; margin-left:25px; margin-right:5px;">
            <xsl:value-of select="@rank"/>
        </div>
        <div style="float:left;">
            <xsl:value-of select="."/>
        </div>
        <div style="float:left;">
            (<xsl:value-of select="@id"/>)
        </div>
        <div style="clear:both;"></div>                
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:08:40.087

是否可以更改 XML 结构？如果是这样，我建议将 XML 更改为：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="feedstylev5.xsl"?>
<feed >

   <Layout>
        <section code="breakingnews" title="Breaking News">
               <story id="112345" rank="1">Story Title 1</story>
                <story id="122345" rank="2">Story Title 1</story>
                <story id="212345" rank="3">Story Title 2</story>

        </section>

        <section code="topnews" title="Top News">
                <story id="012345" rank="1">Story Title 1</story>
                <story id="117345" rank="2">Story Title 1</story>
                <story id="612345" rank="3">Story Title 1</story>
                <story id="712345" rank="4">Story Title 1</story>

        </section>

        ...  

   </Layout>
</feed> 
```

然后让你的 XSLT 像这样：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:atom="http://www.w3.org/2005/Atom">
  <xsl:template match="/feed">
    <html>
      <body>

        <xsl:apply-templates select="Layout/section" />

      </body>
    </html>
  </xsl:template>

  <xsl:template match="section">
    <h2 style="font-style:italic; font-weight:bold;">
      <xsl:value-of select="@title" />
    </h2>
    <xsl:apply-templates select="story" />
  </xsl:template>

  <xsl:template match="story">
    <div style="float:left; margin-left:25px; margin-right:5px;">
      <xsl:value-of select="@rank"/>
    </div>
    <div style="float:left;">
      <xsl:value-of select="."/>
    </div>
    <div style="float:left;">
      (<xsl:value-of select="@id"/>)
    </div>
    <div style="clear:both;"></div>
  </xsl:template>
</xsl:stylesheet> 
```

code= 属性实际上并未在上面使用，但我建议您使用它们以进行良好的衡量。

如果您无法修改输入 XML 结构，那么您的下一个最佳选择是将示例中的前两个模板更改为如下所示：

```
 <xsl:template match="/feed">
    <html>
      <body>

         <xsl:call-template name="Section">
           <xsl:with-param name="section" select="Layout/breakingnews" />
           <xsl:with-param name="title" select="'Breaking News'" />
         </xsl:call-template>
         <xsl:call-template name="Section">
           <xsl:with-param name="section" select="Layout/topnews" />
           <xsl:with-param name="title" select="'Top News'" />
         </xsl:call-template>
         <xsl:call-template name="Section">
           <xsl:with-param name="section" select="Layout/news" />
           <xsl:with-param name="title" select="'News'" />
         </xsl:call-template>
         <xsl:call-template name="Section">
           <xsl:with-param name="section" select="Layout/sports" />
           <xsl:with-param name="title" select="'Sports'" />
         </xsl:call-template>

      </body>
    </html>
  </xsl:template>

  <xsl:template name="Section">
    <xsl:param name="section" />
    <xsl:param name="title" />
    <h2 style="font-style:italic; font-weight:bold;">
      <xsl:value-of select="$title" />
    </h2>
    <xsl:apply-templates select="story" />
  </xsl:template> 
```

这将忽略在任何给定时间不在提要中的任何部分，但会要求您在 XSL 中对标题进行硬编码，并且它们的顺序将是固定的。

# javascript - 使用 phantomjs 抓取站点地图

> ID：14200804
> 
> 赞同：1
> 
> 时间：2013-01-07T17:17:51.833
> 
> 标签：javascript, xml, xml-parsing, phantomjs

我对 phantomjs 很陌生。我一直在搞乱以下内容太久了。我知道我错过了一些非常简单的东西。我有以下 sitemap.xml：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">
  <url>
    <loc>/</loc>
    <changefreq>always</changefreq>
    <priority>1.0</priority>
  </url>
  <url>
    <loc>/vehicles</loc>
    <lastmod>2013-01-07</lastmod>
  </url>
</urlset> 
```

现在我要做的就是使用 phantomjs 从 xml 文档中获取 url 值。我有以下。

```
page.open("sitemap.xml", function(status) {
    if(status !== "success") {
        console.log("Unable to open sitemap.");
    } else {
        // Stuck here
        console.log(page.content);
    }
}); 
```

xml文件的内容正确打印到屏幕上，但是我现在如何使用文档来播放xml？我只需要能够获取每个 url 节点的第一个子节点。我尝试将 xml 文档解析为 DOMParser，但这似乎不对。您的帮助将不胜感激。

另外，您如何调试 phatomjs 以便我可以看到该对象的全部荣耀？例如，如果我在 Dev Tools 中 console.log 一个对象，我可以展开它并查看键值对。我猜终端不提供这种奢侈品？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-09T05:40:24.400

PhantomJS 允许您从页面上下文中调用 javascript。使用普通的旧 javascript 查看我的解决方案。

假设站点地图看起来像这样

```
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">
<url>
<loc>http://example.com/</loc>
<lastmod>2014-07-07T14:09:27+00:00</lastmod>
<changefreq>always</changefreq>
</url> 
```

我可以使用下面的代码在上面的站点地图中获取 url。

```
var page = require('webpage').create();
page.open('http://xxxx/static/sitemap/sitemap.xml', function() {
        var content = page.content;
        parser = new DOMParser();
        xmlDoc = parser.parseFromString(content,'text/xml');
        var loc = xmlDoc.getElementsByTagName('loc');
        console.log(loc.length);
        for(var i=0; i < loc.length; i++)
        {
          var url=loc[i].textContent;

        }

        phantom.exit();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T17:23:10.560

使用[libxmljs](https://github.com/polotek/libxmljs)解析您的 xml 字符串并获取您想要的数据！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T21:10:22.167

另一个想法，您可以将 jQuery 注入页面并像这样解析 xml：

```
page.open("sitemap.xml", function(status) {
    if(status !== "success") {
        console.log("Unable to open sitemap.");
    } else {
        // Stuck here
        console.log(page.content);
        page.injectJs('j-query.js');//path to jquery
        var output = page.evaluate(function(){
                            return $('url *:first-child');           
                       });
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-10T10:43:30.583

有人创建了一个使用 casperjs 测试 XML 站点地图的测试套件，也许您可​​以根据您的特定需求采用代码。

来自作者：

> 该脚本将尝试爬取指定的站点地图，以检查子页面是否存在损坏的 url、图像、css 和 Javascript。错误将被记录到指定的日志文件中。

用法：

```
casperjs sitemap_xml_testing.js --sitemap=<URL TO SITEMAP> --logfile=<LOG FILE NAME> 
```

[在 Bitbucket 上进行 gmazin 自动化站点地图测试](https://bitbucket.org/gmazin/sitemap.xml-automated-testing/overview)

# linq - Int 等于 Linq 中的字符串

> ID：14200805
> 
> 赞同：2
> 
> 时间：2013-01-07T17:18:00.620
> 
> 标签：linq, linq-to-entities

基本上我有这个问题：

```
var item = 
    from itemCT in listC
    join ditemRef in servRef.Repository.GetQuery(efContext).DefaultIfEmpty()
    on itemCT.specialStringID equals ditemRef.refID
    into DitemRef 
```

问题是这`itemCT.specialStringID`是一个字符串（没有设计它......不能改变它）我仍然需要让连接工作。有什么提示吗？

寻找我尝试使用但没有成功的相关[答案。](https://stackoverflow.com/questions/1228318/linq-int-to-string)`SqlFunctions.StringConvert((double)ditemRef.refID`

任何对隧道尽头光线的暗示都会有所帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:40:31.913

[`System.Convert`](http://msdn.microsoft.com/en-us/library/system.convert.aspx)LINQ-to-Entities 查询支持在类中找到的许多方法。使用它将两种类型中的一种转换为另一种。然后你就可以编写你的查询了。

# android - 使用 proguard 混淆代码时添加代码标签

> ID：14200807
> 
> 赞同：0
> 
> 时间：2013-01-07T17:18:05.377
> 
> 标签：android, proguard

作为这个问题的答案（[在 Java 中的单独行中指定的 URL 不会发出编译时错误。为什么？](https://stackoverflow.com/questions/8042626/a-url-specified-in-a-separate-line-in-java-doesnt-issue-compile-time-errors-wh)）指出您可以在代码上添加代码标签而不会出现编译错误。

更重要的是，使用 http:// 将起作用，因为它将被视为代码标签和注释。

所以我在想...

**我可以**在带有 proguard的代码中添加一些随机代码标签（包括 url）以 **使其更不可读**吗？

当然我可以手动添加它们，但这将是一个很好的解决方案，因为它会污染原始代码，以及我想要的只是发布编译代码。

我想在 Android 应用程序上执行此操作，这就是我专注于 proguard（Android 混淆的开箱即用解决方案）的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:26:46.247

您可以检查 AspectJ，它允许在构建期间创建字节码的自定义修改。但是我不会那样做。您是否检查过 java 反编译器是否显示您的 URL？您最好优化您的混淆，以使明文中的内容尽可能少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:00:12.117

不，这样的标签根本不会影响编译的代码。

标签（无论是“http:”还是“somelabel:”）不会出现在编译的代码中，甚至不会作为调试信息出现。它仅在与`break`语句结合使用时才有用。

注释（无论是“//www.example.com/path”还是“//somecomment”）都不会被编译。仅澄清源代码才有用。

由于 java 字节码不代表标签或注释，ProGuard 也不能添加它们。ProGuard 也不会添加不必要的 goto 语句

# c# - 针对这种密码生成方案可能会受到哪些类型的攻击？

> ID：14200808
> 
> 赞同：1
> 
> 时间：2013-01-07T17:18:25.067
> 
> 标签：c#, .net, security, random, passwords

下面的代码使用 PRNG（伪随机数生成器）`Random`类为初始临时密码生成密码字符，而不是`RNGCryptoServiceProvider`像它应该使用的那样在密码学上更安全。

但是，它确实使用`RNGCryptoServiceProvider`为 PRNG 生成种子，所以我认为这可能是值得的，而不是*像*使用 PRNG 时的典型做法那样基于一天中的当前时间进行播种，而安全性不是问题。

**我的问题是：**为了破坏密码生成系统并猜测新用户的密码，这种攻击方法的难易程度如何？

```
// Generate 4 random bytes.
byte[] randomBytes = new byte[4];
RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider();
rng.GetBytes(randomBytes);

// Convert 4 bytes into a 32-bit integer value.
int seed = (randomBytes[0] & 0x7f) << 24 | randomBytes[1] << 16 | randomBytes[2] << 8 | randomBytes[3];

// Now, this is real randomization.
Random random = new Random(seed); 
```

然后代码继续`random.Next()`用于生成字符以填充密码字符串。

**免责声明**：此代码不是我的发明。不要为此责备我，也不要就如何解决它提出建议。我知道如何解决它，我知道它很糟糕。不要浪费时间这样回复。任何对此效果的评论或回答都将被标记为垃圾邮件。我只在我们的代码中找到它，并对它的“安全”属性感到好奇。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T17:32:34.103

PRNG 函数的问题在于可预测性。能够根据之前的输出预测它的输出。避免使用`Random`该类的原因是，通过监视它的输出，可以开始预测未来的输出。

上面的代码可能有问题，也可能没有问题。这归结为`Random`类被实例化的频率。如果您正在使用来自加密强度 PRNG 的种子创建一个新实例并从中仅生成一个密码，那么您应该没问题。我这样说是因为即使我从一个生成的密码中了解 PRNG 的状态，它与将来生成的密码无关。

如果您改为使用此例程来初始化 的静态实例`Random`，那么您肯定会遇到潜在问题。假设有人使用这种方法将临时重置密码发送到电子邮件。攻击者可以重置自己的密码足够多次以开始预测未来的密码。一旦他可以预测下一个密码，他只需为他希望破解的帐户启动其余密码。他已经知道通过电子邮件发送的密码，然后可以访问该帐户。

# c# - 视频捕捉/截图

> ID：14200810
> 
> 赞同：1
> 
> 时间：2013-01-07T17:18:28.137
> 
> 标签：c#, slimdx

我尝试流式传输我的桌面，问题是我使用 GDI 时有 8/10 fps，而使用 SlimDX 时有 1 fps。

GDI

```
Bitmap bmp = new Bitmap(1680,1050);

Graphics g = Graphics.FromImage(bmp);

g.CopyFromScreen(0, 0,0, 0, new System.Drawing.Size(1680,1050)); 
```

夏普DX

```
PresentParameters present_params = new PresentParameters();
present_params.Windowed = true;
present_params.SwapEffect = SwapEffect.Discard;
present_params.BackBufferCount = 1;
present_params.FullScreenRefreshRateInHertz = 0;
Device d = new Device(new Direct3D(), 0, DeviceType.Hardware, IntPtr.Zero, CreateFlags.SoftwareVertexProcessing, present_params);

Surface s = Surface.CreateOffscreenPlain(d, 1680, 1050, Format.A8R8G8B8, Pool.Scratch);

d.GetFrontBufferData(0, s);

bmp = new Bitmap(SlimDX.Direct3D9.Surface.ToStream(s, SlimDX.Direct3D9.ImageFileFormat.Bmp)); 
```

而且...我需要在位图中备份表面。预先感谢 ！

# c++ - 用 JSONcpp 替换 JSON 文件中的单个值

> ID：14200813
> 
> 赞同：0
> 
> 时间：2013-01-07T17:18:31.197
> 
> 标签：c++, file, ofstream, jsoncpp

有没有办法使用 JSONcpp 更改现有 JSON 文件中的单个值？我想保留文件中的现有格式（注释、空格、换行符）。

示例：在 C:/test.json 中找到键为“test_boolean”的值，并将其值设置为“false”，其他所有内容保持原样。

我尝试过使用 Json::StyledStreamWriter，两者都带有我要更改的值的根，以及值本身。在第一种情况下，使用新值重写了整个文件，但没有保留格式或注释。在第二种情况下，整个文件中只写了“false”。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-21T15:49:44.497

根据我的测试/研究，使用 JSONcpp 修改 JSON 中的单个值是不可能的，以保持当前格式。

# wordpress - 如何挂钩到 Wordpress 缩略图生成

> ID：14200815
> 
> 赞同：10
> 
> 时间：2013-01-07T17:18:46.843
> 
> 标签：wordpress

我想在 Wordpress 中使用 ImageMagick 对某个缩略图大小进行一些自定义处理，超出了正常的 Wordpress 功能，但我不太确定如何去做。

所以我添加了我的新缩略图大小：

```
add_image_size( 'new-thumb', 100, 100 ); 
```

然后这就是我不确定我应该在哪里挂钩的地方。在将缩略图的最终副本保存在 Wordpress 中之前，我想对其进行一些自定义处理。我想要的基本伪代码是：

```
The_hook_or_action_that_fires_when_a_thumbnail_is_saved() {

    if (<Thumbnail Being Generated> == 'new-thumb') {
      $thumb_file = 'the thumbnail image we are about to save';
      $thumbfile = 'do some imagemagic stuff here';
    }

    save_thumbnail;
} 
```

我可以处理 imagemagick 的东西，但我不确定如何/在哪里挂钩这个自定义缩略图处理。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-08T15:46:44.707

感谢@brasofilo 为我指明了正确的方向......

我摸索了一下，弄明白了这个。您可以连接到 wp_generate_attachment_metadata 并进行一些图像处理。

我尝试做的基本操作是将图像调整为特定大小（“品牌”缩略图），然后将该缩略图的画布扩展为具有白色背景的静态高度和宽度。

如果有人有类似的情况，我想我会粘贴一些代码。可以清理它以消除每种图像类型的填充。此代码的一个问题是，如果原始图像大小小于所需的缩略图大小，则不会生成（这是 WordPress 功能）。

```
add_image_size( 'brands', 200, 168 );

add_filter('wp_generate_attachment_metadata','replace_uploaded_image');
function replace_uploaded_image($image_data) {

    // if there is no brands image : return
    if ( !isset($image_data['sizes']['brands']) ) 
        return $image_data;

    //Set our desired static height / width (200px * 168px)
    $staticWidth  = 200;
    $staticHeight = 168;

    // paths to the uploaded image and the large image
    $upload_dir            = wp_upload_dir();
    $brands_image_location = $upload_dir['path'] . '/' . $image_data['sizes']['brands']['file'];

    // set our temp image file
    $brands_image_location_tmp = "$brands_image_location.tmp";

    // get the attributes of the source image
    list($imageWidth, $imageHeight, $imageType, $imageAttr) = getimagesize($brands_image_location);

    // there are different php functions depending on what type of image it is, so check the type
    switch($imageType) {
        //GIF
        case 1: 
            //Create a 200x168 white canvas
            $newimage=imagecreatetruecolor($staticWidth,$staticHeight);
            $white=imagecolorallocate($newimage, 255, 255, 255);
            imagefill($newimage,0,0,$white);

            //Calculate where the image should start so its centered
            if($imageWidth == $staticWidth)  { $x_pos = 0; } else { $x_pos = round( ($staticWidth - $imageWidth) / 2 ); }
            if($imageHeight == $staticHeight) { $y_pos = 0; } else { $y_pos = round( ($staticHeight - $imageHeight) / 2 ); }

            //Copy the source image to the new canvas
            $src = imagecreatefromgif($brands_image_location);
            imagecopy($newimage, $src, $x_pos, $y_pos, 0, 0, $imageWidth, $imageHeight);
            imagegif($newimage,$brands_image_location_tmp);

            // delete the uploaded image
            unlink($brands_image_location);

            // rename the temporary brands image
            rename($brands_image_location_tmp, $brands_image_location);

            // update image metadata and return them
            $image_data['sizes']['brands']['width'] = $staticWidth;
            $image_data['sizes']['brands']['height'] = $staticHeight;

            break;

        //JPG
        case 2:
            //Create a 200x168 white canvas
            $newimage=imagecreatetruecolor($staticWidth,$staticHeight);
            $white=imagecolorallocate($newimage, 255, 255, 255);
            imagefill($newimage,0,0,$white);

            //Calculate where the image should start so its centered
            if($imageWidth == $staticWidth)  { $x_pos = 0; } else { $x_pos = round( ($staticWidth - $imageWidth) / 2 ); }
            if($imageHeight == $staticHeight) { $y_pos = 0; } else { $y_pos = round( ($staticHeight - $imageHeight) / 2 ); }

            //Copy the source image to the new canvas
            $src = imagecreatefromjpeg($brands_image_location);
            imagecopy($newimage, $src, $x_pos, $y_pos, 0, 0, $imageWidth, $imageHeight);
            imagejpeg($newimage,$brands_image_location_tmp);

            // delete the uploaded image
            unlink($brands_image_location);

            // rename the temporary brands image
            rename($brands_image_location_tmp, $brands_image_location);

            // update image metadata and return them
            $image_data['sizes']['brands']['width'] = $staticWidth;
            $image_data['sizes']['brands']['height'] = $staticHeight;

            break;

        //PNG
        case 3:
            //Create a 200x168 white canvas
            $newimage=imagecreatetruecolor($staticWidth,$staticHeight);
            $white=imagecolorallocate($newimage, 255, 255, 255);
            imagefill($newimage,0,0,$white);

            //Calculate where the image should start so its centered
            if($imageWidth == $staticWidth)  { $x_pos = 0; } else { $x_pos = round( ($staticWidth - $imageWidth) / 2 ); }
            if($imageHeight == $staticHeight) { $y_pos = 0; } else { $y_pos = round( ($staticHeight - $imageHeight) / 2 ); }

            //Copy the source image to the new canvas
            $src = imagecreatefrompng($brands_image_location);
            imagecopy($newimage, $src, $x_pos, $y_pos, 0, 0, $imageWidth, $imageHeight);
            imagepng($newimage,$brands_image_location_tmp);

            // delete the uploaded image
            unlink($brands_image_location);

            // rename the temporary brands image
            rename($brands_image_location_tmp, $brands_image_location);

            // update image metadata and return them
            $image_data['sizes']['brands']['width'] = $staticWidth;
            $image_data['sizes']['brands']['height'] = $staticHeight;

            break;

    }

    return $image_data;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-07T19:38:24.683

在我的图书馆中，我有以下内容：

## [为生成的缩略图设置自定义名称](https://wordpress.stackexchange.com/q/51920/12615)

*拇指名称和裁剪非常有趣的操作*。检查此链接中的原始问答。

**用途：**

*   [`intermediate_image_sizes_advanced`](http://core.trac.wordpress.org/browser/tags/3.5/wp-admin/includes/image.php#L100)
*   [`wp_generate_attachment_metadata`](http://core.trac.wordpress.org/browser/tags/3.5/wp-admin/includes/image.php#L118)

## [自动使用调整大小的图像而不是原件](https://wordpress.stackexchange.com/q/48882/12615)

**用途：**

*   `wp_generate_attachment_metadata`

## [如何自动为缩略图添加圆角？](https://wordpress.stackexchange.com/a/16521/12615)

**用途：**

*   [`image_make_intermediate_size`](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/class-wp-image-editor-gd.php#L360)和[L#432](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/class-wp-image-editor-imagick.php#L432)

## [如何要求上传的最小图像尺寸？](https://wordpress.stackexchange.com/q/28359/12615)

**用途：**

*   [`wp_handle_upload_prefilter`](http://core.trac.wordpress.org/browser/tags/3.5/wp-admin/includes/file.php#L241)

## [按年、月和日组织上传](https://wordpress.stackexchange.com/questions/70946)

**用途：**

*   `wp_handle_upload_prefilter`
*   [`wp_handle_upload`](http://core.trac.wordpress.org/browser/tags/3.5/wp-admin/includes/file.php#L345)和[L#466](http://core.trac.wordpress.org/browser/tags/3.5/wp-admin/includes/file.php#L466)
*   [`upload_dir`](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/functions.php#L1570)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-02T13:33:11.467

我想建议更改，以使其与 Thumbnails Regenerate Plugin 一起使用

```
$upload_dir = wp_upload_dir();
$brands_image_location = $upload_dir['basedir'].'/'.dirname($image_data['file']) . '/' . $image_data['sizes']['brands']['file'];
$brands_image_location = $brands_image_location.'.tmp'; 
```

之所以如此，是因为 wp_upload_dir 返回当前年份月份的路径，但某些先前上传的图像可能具有不同的路径。

# c# - 解析xml并连接多个子节点的结果

> ID：14200817
> 
> 赞同：4
> 
> 时间：2013-01-07T17:18:50.503
> 
> 标签：c#, xml, xml-parsing

我需要解析一个 xml 文件并需要加入节点“驱动程序”的结果。
每个“品牌”节点都是独一无二的。

示例 xml 文件：

```
<brand name = "ford">   
   <transport category="car">
      <driver name="John, Doe"/>
      <driver name="Jane, Doe"/>
    </transport>
</brand>
<brand name = "opel">
   <transport category="car">
      <driver name="Jerry, Smith"/>
      <driver name="Jeff, Perry"/>
     </transport>
</brand> 
```

预期结果：

```
John, Doe - Jane, Doe
Jerry, Smith - Jeff, Perry 
```

到目前为止我的代码：

```
 XmlTextReader reader = new XmlTextReader(@"D:\myfile.xml");

    while (reader.Read())
    {
        if (reader.Name == "brand")
            {
                XmlReader inner =  reader.ReadSubtree();
                while (inner.Read()) ;

                if (reader.Name == "driver")
                {
                    string drvNames = reader.GetAttribute("name");
                }   
            }
    } 
```

我无法获得“驱动程序”的结果。
有**一个或多个**“驱动程序”节点。
语言 C#

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:23:56.160

您可以使用 Linq to Xml：

```
var xdoc = XDocument.Load(@"D:\myfile.xml");
var query = from t in xdoc.Descendants("transport")
            select String.Join(" - ", t.Elements("driver")
                                      .Select(e => (string)e.Attribute("name"))); 
```

* * *

如果您无法将整个文件加载到内存中：

```
XmlTextReader reader = new XmlTextReader(@"D:\myfile.xml");
List<string> result = new List<string>();

while (reader.Read())
{    
    if (reader.Name == "brand")
    {
        XmlReader inner = reader.ReadSubtree();
        List<string> names = new List<string>();

        while (inner.Read())
        {
            if (reader.Name == "driver")
                names.Add(reader.GetAttribute("name"));
        }

        if (names.Any())
            result.Add(String.Join(" - ", names));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:28:37.297

```
using System;
using System.Linq;
using System.Xml.Linq;

class Program
{
    static void Main(string[] args)
    {
        string xml = @"<root>
                        <brand name = 'ford'>   
                           <transport category='car'>
                              <driver name='John, Doe'/>
                              <driver name='Jane, Doe'/>
                            </transport>
                        </brand>
                        <brand name = 'opel'>
                           <transport category='car'>
                              <driver name='Jerry, Smith'/>
                              <driver name='Jeff, Perry'/>
                           </transport>
                        </brand></root>";
        XDocument doc = XDocument.Parse(xml);
        var transports = from t in doc.Root.Elements()
                         select new
                         {
                             Category = t.Attribute("name").Value.Trim(),
                             Drivers = t.Element("transport")
                                        .Elements()
                                        .Select(x => new { Name = x.Attribute("name").Value.Trim() })
                         };
        foreach (var t in transports)
        {
            Console.WriteLine(t.Category);
            foreach (var driver in t.Drivers)
                Console.WriteLine(driver.Name.PadLeft(15));
        }
        Console.ReadKey(true);
    }
} 
```

# awk - 使用 awk 搜索“/”

> ID：14200820
> 
> 赞同：0
> 
> 时间：2013-01-07T17:19:02.597
> 
> 标签：awk

我想在以下 df 输出中搜索`/`以下内容：`Mounted on`

```
Filesystem     1K-blocks     Used Available Use% Mounted on
/dev/sda1      471081708 82857660 364294432  19% /
udev             2046164        4   2046160   1% /dev
tmpfs             822540     1376    821164   1% /run
none                5120        0      5120   0% /run/lock
none             2056344      388   2055956   1% /run/shm
/dev/sdb1      228917696 21117560 195590336  10% /media/xtra 
```

但是，这个命令

`df | awk -F" " /\// '{print $6 "\t" $4}'`

导致此错误

```
awk: cmd. line:1: ///
awk: cmd. line:1:    ^ unexpected newline or end of string 
```

如何搜索`/`下`Mounted on`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:22:16.360

您的模式在引号之外：

```
$ df | awk '/\//{print $6 "\t" $4}' 
```

您还可以在脚本开头指定输出字段分隔符：

```
$ df | awk 'BEGIN{OFS="\t"}/\//{print $6, $4}'

$ df | awk -v OFS="\t" '/\//{print $6, $4}' 
```

但正如[EdMorton](https://stackoverflow.com/users/1745001/ed-morton)指出的那样，每一行在标题旁边至少有一个`/`，所以你可以放弃比赛，只跳过第一行，比如：

```
$ df | awk 'NR>1{print $6 "\t" $4}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:35:52.847

您的模式并没有真正意义，因为您的 df 输出的每一行始终包含一个`/`. （除了标题）

如果要将输出重新格式化为`$6\t$4`：

```
df|awk '{print $6"\t"$4}' 
```

如果您的模式只是为了跳过标题，您可以：

```
 df|awk 'NR>1{print $6"\t"$4}' 
```

如果您只想精确搜索`/`（根分区）：

```
df|awk '$6~/^\/$/{print $6"\t"$4}' 
```

# php - 使用 mysqli::fetch_array 但只获得 2 个项目？

> ID：14200828
> 
> 赞同：0
> 
> 时间：2013-01-07T17:19:19.163
> 
> 标签：php, mysqli

我有一个数据库，我试图通过使用以下查询从中提取数据（每个唯一标识符的名称以及它在数据库中出现的次数）：

```
$query = "SELECT Dcol, COUNT(*) FROM dtest GROUP BY Dcol"; 
```

然后使用它来实际打印数据：

```
while($result->fetch_row()){

$row = $result->fetch_array(MYSQLI_NUM);
printf("<strong>%s</strong> : <i>%s</i><br />",$row[0],$row[1]);

} 
```

它工作得很好，除了它只从 Dcol 列中获取 4 个唯一项目中的 2 个。我已经通过将 fetch_row() 返回的所有内容放入一个数组然后使用 print_r 对其进行了测试，当我这样做时，它实际上显示了所有 4 个正确的使用次数，但是当我尝试使用打印它时上面的陈述我得到了 4 个中的 2 个（第二个和第四个，如果有帮助的话）

谁能告诉我为什么这只会给出四个独特物品中的两个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:22:24.213

'fetch_row' 命令获取第一行 - 然后您使用 'fetch_array' 命令请求第二行。所以你只看到 2 和 4 结果。

# javascript - jQuery：在 3 个类之间切换（最初）

> ID：14200833
> 
> 赞同：9
> 
> 时间：2013-01-07T17:19:33.307
> 
> 标签：javascript, jquery

我在这里看到了一些关于 SO 的帖子，但它们在功能和结构上过于具体，而我正在寻找的是更通用的东西，我或任何人都可以在任何地方使用。

我只需要一个按钮，单击该按钮可以在**3 个**类之间循环。但是如果出现必须循环通过 4、5 或更多类的情况，那么脚本可以轻松扩展。

到目前为止，我能够在两个课程之间“循环”，这基本上比骑自行车更“切换”，所以我有：

**HTML：**

```
<a href="#" class="toggle">Toggle classes</a>
<div class="class1">...</div> 
```

**jQuery：**

```
$('.toggle').click(function () {
  $('div').toggleClass('class1 class2');
}); 
```

这是一个简单的[小提琴](http://jsfiddle.net/xRYJL/)。

现在，您会（好吧，我）认为向该方法添加第三个类会起作用，但它不会：

```
$('div').toggleClass('class1 class2 class3'); 
```

发生的事情是切换开始发生在`class1`并且`class3`仅发生在之间。

所以这就是我最初遇到的问题：*如何让切换按钮依次循环通过**3 个**类？*

然后：如果有人需要骑车上 4、5 节或更多节课怎么办？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-07T17:26:18.980

你可以这样做 ：

```
$('.toggle').click(function () {
  var classes = ['class1','class2','class3'];
  $('div').each(function(){
    this.className = classes[($.inArray(this.className, classes)+1)%classes.length];
  });
}); 
```

[示范](http://jsfiddle.net/FSFpZ/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-25T23:02:50.943

这是另一种方法：

```
if ($(this).hasClass('one')) {
    $(this).removeClass('one').addClass('two');
} else if ($(this).hasClass('two')) {
    $(this).removeClass('two').addClass('three');
} else if ($(this).hasClass('three')) {
    $(this).removeClass('three').addClass('one');
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-07T17:25:12.570

```
var classes = ['class1', 'class2', 'class3'],
    currentClass = 0;

$('.toggle').click(function () {

    $('div').removeClass(classes[currentClass]);

    if (currentClass + 1 < classes.length)
    {
        currentClass += 1;
    }
    else
    {
        currentClass = 0;
    }

    $('div').addClass(classes[currentClass]);

}); 
```

类似的东西应该可以正常工作:)

修补程序 IO 链接 - [https://tinker.io/1048b](https://tinker.io/1048b)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-26T20:18:58.630

这对我有用，我可以随意堆叠，然后轻松环绕。

```
switch($('div.sel_object table').attr('class'))
    {
    case "A":   $('div.sel_object table').toggleClass('A B'); break;
    case "B":   $('div.sel_object table').toggleClass('B C'); break;
    case "C":   $('div.sel_object table').toggleClass('C D'); break;
    case "D":   $('div.sel_object table').toggleClass('D A'); break;                
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-10T16:25:10.630

我将[user3353523 的答案](https://stackoverflow.com/a/22028134/1762224)转换为 jQuery 插件。

```
(function() {
  $.fn.rotateClass = function(cls1, cls2, cls3) {
    if ($(this).hasClass(cls1)) {
      return $(this).removeClass(cls1).addClass(cls2);
    } else if ($(this).hasClass(cls2)) {
      return $(this).removeClass(cls2).addClass(cls3);
    } else if ($(this).hasClass(cls3)) {
      return $(this).removeClass(cls3).addClass(cls1);
    } else {
      return $(this).toggleClass(cls1); // Default case.
    }
  }
})(jQuery);

$('#click-me').on('click', function(e) {
  $(this).rotateClass('cls-1', 'cls-2', 'cls-3');
});
```

```
#click-me {
  width: 5em;
  height: 5em;
  line-height: 5em;
  text-align: center;
  border: thin solid #777;
  margin: calc(49vh - 2.4em) auto;
  cursor: pointer;
}

.unselectable {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
   -khtml-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.cls-1 { background: #FFAAAA; }
.cls-2 { background: #AAFFAA; }
.cls-3 { background: #AAAAFF; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="click-me" class="unselectable">Click Me!</div>
```

* * *

## 动态方法

```
(function() {
  $.fn.rotateClass = function() {
    let $this = this,
        clsList = arguments.length > 1 ? [].slice.call(arguments) : arguments[0];
    if (clsList.length === 0) {
      return $this;
    }
    if (typeof clsList === 'string') {
      clsList = clsList.indexOf(' ') > -1 ? clsList.split(/\s+/) : [ clsList ];
    }
    if (clsList.length > 1) {
      for (let idx = 0; idx < clsList.length; idx++) {
        if ($this.hasClass(clsList[idx])) {
          let nextIdx = (idx + 1) % clsList.length,
              nextCls = clsList.splice(nextIdx, 1);
          return $this.removeClass(clsList.join(' ')).addClass(nextCls[0]);
        }
      }
    }
    return $this.toggleClass(clsList[0]);
  }
})(jQuery);

$('#click-me').on('click', function(e) {
  $(this).rotateClass('cls-1', 'cls-2', 'cls-3');     // Parameters
  //$(this).rotateClass(['cls-1', 'cls-2', 'cls-3']); // Array
  //$(this).rotateClass('cls-1 cls-2 cls-3');         // String
});
```

```
#click-me {
  width: 5em;
  height: 5em;
  line-height: 5em;
  text-align: center;
  border: thin solid #777;
  margin: calc(49vh - 2.4em) auto;
  cursor: pointer;
}

.unselectable {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
   -khtml-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.cls-1 { background: #FFAAAA; }
.cls-2 { background: #AAFFAA; }
.cls-3 { background: #AAAAFF; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="click-me" class="unselectable">Click Me!</div>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-07T02:58:03.877

HTML：

```
<div id="example" class="red">color sample</div> 
```

CSS：

```
.red {
  background-color: red;
}
.yellow {
  background-color: yellow;
}
.green {
  background-color: green;
} 
```

JS：

```
$(document).ready(function() {
    var colors = ['red', 'yellow', 'green'];
    var tmp;
    setInterval(function(){
        tmp && $('#example').removeClass(tmp);
        tmp = colors.pop();
        $('#example').addClass(tmp);
        colors.unshift(tmp);
    }, 1000);
}); 
```

[演示](https://jsfiddle.net/c3k6x9zh/2/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-07T03:28:12.477

另一个使用[`classList replace`](https://developer.mozilla.org/en-US/docs/Web/API/Element/classList). 并非所有浏览器都支持。

```
var classes = ["class1", "class2", "class3"];
var index = 0;
var classList = document.querySelector("div").classList;
const len = classes.length;

$('.toggle').click(function() {
  classList.replace(classes[index++ % len], classes[index % len]);
});
```

```
.class1 {
  background: yellow;
}

.class2 {
  background: orange;
}

.class3 {
  background: red;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<a href="#" class="toggle">Toggle classes</a>
<div class="class1">
  look at me!
</div>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-29T04:05:34.307

循环遍历类的索引并从一个切换到另一个。

```
var classes = ['border-top','border-right','border-bottom','border-left'];
var border = 'border-top';
var index = 0;
var timer = setInterval( function() {
    var callback = function(response) {
        index = ( ++index == 4 ? 0 : index );
        $(element).html("text").toggleClass( border + " " + classes[index] );
        border = classes[index];
        };
    }, 1000 ); 
```

# http - 对于已知不存在的资源，最合适的 HTTP 响应代码是什么？

> ID：14200838
> 
> 赞同：2
> 
> 时间：2013-01-07T17:19:42.713
> 
> 标签：http, http-headers

[我想知道当有人请求像http://www.example.com/page-that-never-existed-nor-will-ever-exist](http://www.example.com/page-that-never-existed-nor-will-ever-exist)之类的页面时，是否有比 404 更好的选择（“永远”意味着可预见的未来但出于所有意图和目的：永远不会）。

例如，我收到一些“聪明”爬虫认为可能存在的页面请求，这些页面基于他们在网站或网络其他地方遇到的结构。它们不是拼写错误，而是要求我知道无处可去

我不想使用`301 Moved Permanently`，因为什么都没有移动，也没有逻辑的目的地可以移动。我不想使用`410 Gone`，因为它一开始就没有。

我还想要更合适的东西，`404 Not Found`因为我真的很想传达“不存在”的信息：不仅仅是“找不到，发生了什么？谁知道？”。我如何告诉用户代理再次请求它是浪费我们的时间？

基于[HTTP 1.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5)， `404 Not Found`似乎是最正确的选择，因为定义以“或当没有其他响应适用时”结尾，但我对此并不完全满意。还有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:27:23.913

你考虑过403 Forbidden吗？这听起来像是您可能正在寻找的内容，您可以在响应的正文中包含一条消息，告诉客户端该资源永远不会存在。

> 服务器理解请求，但拒绝执行。授权将无济于事，并且不应重复请求。如果请求方法不是 HEAD 并且服务器希望公开请求未完成的原因，它应该在实体中描述拒绝的原因。如果服务器不希望向客户端提供此信息，则可以使用状态代码 404（未找到）来代替。

# forms - dataList中有多个remoteCommands，但只有一个调用

> ID：14200840
> 
> 赞同：3
> 
> 时间：2013-01-07T17:19:50.523
> 
> 标签：forms, jsf, jsf-2, primefaces, datalist

这个很棘手，我不明白为什么它会这样工作：

```
<p:dataList var="item" value="#{recb.friends}" type="definition">
    <p:column>
        <h:form>
            <p:remoteCommand name="getTaste" process="@this" 
                         actionListener="#{item.calculateTaste( recb.username )}"
                         autoRun="true" oncomplete="poll.start()" />    
            <p:poll autoStart="false" update="@form" interval="1"
                widgetVar="poll" oncomplete="poll.stop()" />                    
        </h:form>
    </p:column>
</p:dataList> 
```

所以我期望发生的是：对于每个`ITEM`它都会调用该`calculateTaste`方法。发生的情况是：只有一个调用，仅针对`dataList`.

我想不出什么是错的。我添加了列，因此生成了 ID，但它仍然无法正常工作:(。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T17:26:24.497

至于问题的原因，这个构造在同一个作用域内生成了多个同名的JS变量`getTaste`，基本上是这样的：

```
<script>var getTaste = function() { ... }</script>
<script>var getTaste = function() { ... }</script>
<script>var getTaste = function() { ... }</script>
... 
```

它们基本上按照声明的顺序相互覆盖，并且在`getTaste()`准备好调用 DOM 时，基本上最后一个将被实际调用。这与您正在观察的症状完全匹配（通过右键单击自己查看生成的 HTML 源代码，在浏览器中*查看源代码*也会告诉您）。

你想给他们每个人一个唯一的 JS 变量名。您可以使用 的`varStatus`属性`<p:dataList>`来获取当前的迭代状态以及其他`getIndex()`方法。

```
<p:dataList ... varStatus="loop">
    ...
    <p:remoteCommand name="getTaste#{loop.index}" ... /> 
```

这样，生成的代码就会以唯一的 JS 变量名结束：

```
<script>var getTaste0 = function() { ... }</script>
<script>var getTaste1 = function() { ... }</script>
<script>var getTaste2 = function() { ... }</script>
... 
```

顺便说一句，我也会应用相同的解决方案`<p:poll widgetVar>`。

```
<p:dataList ... varStatus="loop">
    ...
    <p:remoteCommand name="getTaste#{loop.index}" ...
        oncomplete="poll#{loop.index}.start()" /> 
    <p:poll ...
        widgetVar="poll#{loop.index}" oncomplete="poll#{loop.index}.stop()" /> 
```

# c# - 如何处理目录名称中的重音字符

> ID：14200846
> 
> 赞同：0
> 
> 时间：2013-01-07T17:20:03.103
> 
> 标签：c#, localizable.strings

我在使用`Directory.Exists()`包含重音字符的字符串时遇到问题。

这是目录路径： `D:\ést_test\scenery`. 它在我正在解析的文件中作为一个简单的字符串出现：

```
[Area.121]
Title=ést_test
local=D:\AITests\ést_test
Layer=121
Active=FALSE
Required=FALSE 
```

我的代码正在获取本地值并添加`\scenery`到它。我需要测试它是否存在（它确实存在）并且我只是使用：

```
if (!Directory.Exists(area.Path))
            {
                // some handling code
                area.AreaIsValid = false;
            } 
```

这返回错误。我正在做的字符串处理似乎正在替换重音字符。VS2012 中的文本可视化器显示了这一点（directoryManager 只是一个环绕`System.IO.Directory`）：

![在此处输入图像描述](../Images/509b268b086aff7ebd16724f8e76be58.png)

显示的警告消息显示如下：

![在此处输入图像描述](../Images/091841d46aa657188485b33837cd1946.png)

所以似乎重音字符没有被识别。搜索这个问题确实出现了，但主要是关于删除或替换重音字符。我目前正在使用“正常”字符串处理。我尝试使用`FileInfo`，但路径似乎还是被破坏了。

所以我的第一个问题是如何将路径存储到字符串中以便通过`Directory.Exists`测试？

这引发了路径名称中非拉丁字符的更广泛问题。我在世界各地都有用户，所以我可以看到阿拉伯语。俄语、汉语等在路径中。我该如何处理所有这些？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T17:22:55.627

问题几乎可以肯定是您*加载*的文件编码错误。它是文件名这一事实无关紧要 - 屏幕截图显示您在调用之前丢失了相关数据`Directory.Exists`。

您应该确保您知道文件编码（例如 UTF-8、Cp1252 等），然后将其作为参数传递给您正在加载的文件（例如`File.ReadAllText`）。如果这些信息不足以让您继续前进，您需要告诉我们更多关于文件的信息（以确定它的编码）以及更多关于您的代码（您如何阅读它）的信息。

一旦您设法加载了正确的数据，我*希望*文件方面能够自动处理。

# sorting - J2ME 中的哈希表排序

> ID：14200847
> 
> 赞同：1
> 
> 时间：2013-01-07T17:20:04.867
> 
> 标签：sorting, java-me, hashtable

有没有办法在 J2ME 中对 Hashtable 进行排序？因为我正在尝试使冒泡排序适应这种情况，但我没有找到解决方案。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:51:07.153

您将不得不使用向量或数组。

在这个问题中，您可以检查排序的实现：

[如何在 java-me 中对字符串向量进行排序？](https://stackoverflow.com/questions/6569414/how-to-sort-a-vector-of-string-in-java-me)

# css - 避免滚动绝对定位的元素

> ID：14200851
> 
> 赞同：2
> 
> 时间：2013-01-07T17:20:20.610
> 
> 标签：css, overflow, css-position

我有一个绝对定位的元素，我想将它扩展到主要内容宽度之外。该元素应该是与主要内容区域重叠的半透明水印。

问题是如果水印被切断，页面会滚动。如果它不适合页面，我宁愿它被切断，而不是为了水印而扩展。

这是一个演示： [https ://tinker.io/661ec/2](https://tinker.io/661ec/2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:46:35.300

溢出属性告诉页面当页面太大而无法容纳时该做什么。如果您将选项 {overflow: hidden;} 应用到您希望它显示的位置（即，在 div 或整个页面中，或仅在图像上），则页面将不会滚动。但是，当溢出仍然溢出时，您实际上会丢失溢出的信息，因此这是一种权衡。

# ios - ios - 具有重复条目的地址簿

> ID：14200855
> 
> 赞同：0
> 
> 时间：2013-01-07T17:20:25.890
> 
> 标签：ios, xcode, addressbook

> **可能重复：**
> [处理由于 iOS 通讯簿 API 中的链接卡导致的重复联系人](https://stackoverflow.com/questions/11351454/dealing-with-duplicate-contacts-due-to-linked-cards-in-ios-address-book-api)

我的地址簿工作得很好，修复了 ios 6.0 的新权限问题。现在的问题是我有很多重复的联系人。有没有办法只从手机中获取联系人？或者全部获取它们，但有一些参数可以告诉我它们的来源（Facebook 或电话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:41:41.247

重复，看这个： [处理由于iOS'Address Book API中的链接卡导致的重复联系人](https://stackoverflow.com/questions/11351454/dealing-with-duplicate-contacts-due-to-linked-cards-in-ios-address-book-api)

您可能想检查您的问题是否已经被问到，并且关于联系人的来源，我建议您也检查文档本身：http: [//developer.apple.com/library/ios/#documentation/AddressBook/Reference/ ABPersonRef_iPhoneOS/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html) ,

ABRecordRef ABPersonCopySource (ABRecordRef person) 是您正在寻找的功能。

# sitecore - 如何找出项目与哪个 Sitecore 站点相关联？

> ID：14200864
> 
> 赞同：11
> 
> 时间：2013-01-07T17:21:21.163
> 
> 标签：sitecore

我们有一个多站点解决方案（站点 1 和站点 2），我需要能够确定我们获取 URL 的项目（在自定义的 LinkProvider 中）是否属于当前上下文站点（`Sitecore.Context.Site`)，或者是不同站点的一部分。有没有好的方法来做到这一点？

基本上，我们只需要能够找出该项目与哪个站点相关联。我们可以将该值与当前上下文站点进行比较。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T17:52:05.587

我建议您为 Item 类创建一个扩展方法，该方法返回一个`SiteInfo`包含其所属站点定义的对象。

不幸的是，我的笔记本电脑上没有我的所有代码，所以我只是在 Visual Studio 中输入它并确保它可以构建，但我很确定它可以工作：

```
public static class Extensions
{
    public static Sitecore.Web.SiteInfo GetSite(this Sitecore.Data.Items.Item item)
    {
        var siteInfoList = Sitecore.Configuration.Factory.GetSiteInfoList();

        foreach (Sitecore.Web.SiteInfo siteInfo in siteInfoList)
        {
            if (item.Paths.FullPath.StartsWith(siteInfo.RootPath))
            {
                return siteInfo;
            }
        }

        return null;
    }
} 
```

因此，现在您可以`GetSite()`在所有`Item`对象上调用该方法并检索该`SiteInfo`项目的 。您可以使用它来检查它是否与您的 匹配`Sitecore.Context.Site`，例如通过执行以下操作：

```
SiteInfo siteInfo = itemYouNeedToCheck.GetSite();
bool isContextSiteItem = Sitecore.Context.Site.SiteInfo.Equals(siteInfo); 
```

编辑：我只是认为你也可以做得更短，像这样：

```
public static Sitecore.Web.SiteInfo GetSite(this Sitecore.Data.Items.Item itemYouNeedToCheck)
{
    return Sitecore.Configuration.Factory.GetSiteInfoList()
        .FirstOrDefault(x => itemYouNeedToCheck.Paths.FullPath.StartsWith(x.RootPath));
} 
```

所以选择你最喜欢的:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-16T01:32:12.107

```
/// <summary>
/// Get the site info from the <see cref="SiteContextFactory"/> based on the item's path.
/// </summary>
/// <param name="item">The item.</param>
/// <returns>The <see cref="SiteInfo"/>.</returns>
public static SiteInfo GetSiteInfo(this Item item)
{
  return SiteContextFactory.Sites
    .Where(s => !string.IsNullOrWhiteSpace(s.RootPath) && item.Paths.Path.StartsWith(s.RootPath, StringComparison.OrdinalIgnoreCase))
    .OrderByDescending(s => s.RootPath.Length)
    .FirstOrDefault();
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-06-04T00:36:13.097

我赞成 Ruud van Falier 的回答，然后经过几轮测试，我意识到它只在某些情况下有效。无法取消投票，所以我在这里对代码进行了一些修改：

```
 public static SiteInfo GetSite(this Item item)
    {
        var siteInfoList = Sitecore.Configuration.Factory.GetSiteInfoList();

        SiteInfo currentSiteinfo = null;
        var matchLength = 0;
        foreach (var siteInfo in siteInfoList)
        {
            if (item.Paths.FullPath.StartsWith(siteInfo.RootPath, StringComparison.OrdinalIgnoreCase) && siteInfo.RootPath.Length > matchLength)
            {
                matchLength = siteInfo.RootPath.Length;
                currentSiteinfo = siteInfo;
            }
        }

        return currentSiteinfo;
    } 
```

所以问题是其他内置站点通常具有较短的路径，例如“/sitecore/content”，它将在到达实际站点配置之前与您的内容路径匹配。所以这段代码试图返回最佳匹配。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-10-07T11:13:30.680

如果您使用的是 Sitecore 9.3+，那么您将希望`IItemSiteResolver`通过依赖注入来使用。

```
IItemSiteResolver _siteResolver;
public MyClass(Sitecore.Sites.IItemSiteResolver siteResolver) {
    _siteResolver = siteResolver;
}

public void DoWork(Item item) {
    Sitecore.Web.SiteInfo site = _siteResolver.ResolveSite(item);
    ...
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-15T09:32:35.800

```
public static SiteInfo GetSiteInfo(this Item item)
{
    return Sitecore.Links.LinkManager.ResolveTargetSite(item);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-31T20:07:17.920

这就是我用于我们的多站点解决方案的方法。

FormatWith 只是 string.Format 的助手。

```
 public static SiteInfo GetSite(this Item item)
    {
        List<SiteInfo> siteInfoList = Factory.GetSiteInfoList();
        SiteInfo site = null;
        foreach (SiteInfo siteInfo in siteInfoList)
        {
            var siteFullPath = "{0}{1}".FormatWith(siteInfo.RootPath, siteInfo.StartItem);
            if (string.IsNullOrWhiteSpace(siteFullPath))
            {
                continue;
            }
            if (item.Paths.FullPath.StartsWith(siteFullPath, StringComparison.InvariantCultureIgnoreCase))
            {
                site = siteInfo;
                break;
            }
        }
        return site;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-16T01:36:28.157

并且为了避免依赖，出于单元测试的目的，我创建了一个方法来直接从 web.config 中提取这些信息：

```
 public static SiteInfoVM GetSiteInfoForPath(string itemPath)
    {
        var siteInfos = GetSiteInfoFromXml();

        return siteInfos
            .Where(i => i.RootPath != "/sitecore/content" && itemPath.StartsWith(i.RootPath))
            //.Dump("All Matches")
            .OrderByDescending(i => i.RootPath.Length).FirstOrDefault();
    }

    static List<SiteInfoVM> GetSiteInfoFromXml()
    {

        XmlNode sitesNode = Sitecore.Configuration.ConfigReader.GetConfigNode("sites");//.Dump();
        var result = sitesNode.Cast<XmlNode>()
        .Where(xn => xn.Attributes != null && xn.Attributes["rootPath"] != null
        //&& (xn.Attributes["targetHostName"]!=null ||  xn.Attributes["name"].Value)
        )
        .Select(xn => new {
            Name = xn.Attributes["name"].Value,
            RootPath = xn.Attributes["rootPath"].Value,
            StartItem = xn.Attributes["startItem"].Value,
            Language = xn.Attributes["language"] != null ? xn.Attributes["language"].Value : null,
            TargetHostName = (xn.Attributes["targetHostName"] != null) ? xn.Attributes["targetHostName"].Value : null,
            SiteXml = xn.OuterXml
        })
        .Select(x => new SiteInfoVM(x.Name, x.RootPath, x.StartItem, x.Language, x.TargetHostName, x.SiteXml))
        .ToList();
        return result;
    }

    public class SiteInfoVM
    {

        public SiteInfoVM(string name, string rootPath, string startItem, string lang, string tgtHostName, string siteXml)
        {
            Name = name;
            TargetHostName = tgtHostName;
            RootPath = rootPath;
            StartItem = startItem;
            Language = lang;
            SiteXml = siteXml;

        }
        public string Name { get; set; }
        public string RootPath { get; set; }
        public string StartItem { get; set; }
        public string Language { get; set; }
        public string TargetHostName { get;set; }
        public string SiteXml { get; set; }
    } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-12-14T10:07:47.777

我相信这是更好的解决方案[http://firebreaksice.com/sitecore-context-site-resolution/](http://firebreaksice.com/sitecore-context-site-resolution/)

```
public static Sitecore.Web.SiteInfo GetSite(Sitecore.Data.Items.Item item)
{
    var siteInfoList = Sitecore.Configuration.Factory.GetSiteInfoList();

    foreach (Sitecore.Web.SiteInfo siteInfo in siteInfoList)
    {
        var homePage = Sitecore.Context.Database.GetItem(siteInfo.RootPath + siteInfo.StartItem);

        if (homePage != null && homePage.Axes.IsAncestorOf(item))
        {
            return siteInfo;
        }
    }
    return null;
} 
```

# sql - 将一列中的值实例相加到不同的列中

> ID：14200866
> 
> 赞同：1
> 
> 时间：2013-01-07T17:21:30.873
> 
> 标签：sql, self-join

我有一个表会话，其中有一个约会类型列（nvarchar）。aptType 可以是三个值之一（小时、半小时、对）。

我需要的是客户名称、小时数、半小时数、对数。

所以数据可能看起来像这样

```
bob | Hour
bob | Hour
bob | halfhour
bob | halfhour
bob | halfhour
bob | Pair 
```

我想要的是

```
bob | 2 | 3 | 1 
```

我尝试了这个主题的变化

```
select c.firstname,
count(shour.clientid),
count(shalfhour.clientid),
count(sHour.clientid)
From Client as c 
                left  outer join [session] as sHour on c.Entityid = shour.ClientId
                left  outer join [session] as sHalfHour on c.Entityid = sHalfHour.ClientId
                left outer join [session] as sPair on c.Entityid = sPair.ClientId 
                where c.entityid =1 and  (shour.appointmentType = 'Hour' or sHalfHour.appointmentType = 'HalfHour') 
                group by c.firstname 
```

客户 1 的数据是他有 35 小时的 apttypes，其余时间为 0。

当我执行上述操作时，我得到

```
bob | 1135 | 1135 | 1135 
```

如果我将 where 更改为 an 或返回 0 行。

反正有什么我想做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:30:14.030

这可以使用单个连接来完成，并且您可以使用`CASE`带有聚合函数的语句来透视数据：

```
select c.firstname,
    SUM(case when s.appointmentType = 'Hour' then 1 else 0 end) Hour,
    SUM(case when s.appointmentType = 'HalfHour' then 1 else 0 end) HalfHour,
    SUM(case when s.appointmentType = 'Pair' then 1 else 0 end) Pair
From Client as c 
left outer join [session] as s 
    on c.Entityid = s.ClientId
where c.entityid =1
group by c.firstname; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/a44de/1)

您没有指定什么 RDBMS，但如果您使用的是具有`PIVOT`功能的数据库（Oracle 11g+、SQL Server 2005+），那么您的查询将如下所示：

```
select firstname, Hour, HalfHour, Pair
from
(
  select c.firstname, s.appointmentType
  from Client as c 
  left outer join [session] as s 
      on c.Entityid = s.ClientId
  where c.entityid =1
) src
pivot
(
  count(appointmentType)
  for appointmentType in (Hour, HalfHour, Pair)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/a44de/13)

两个查询的结果是：

```
| FIRSTNAME | HOUR | HALFHOUR | PAIR |
--------------------------------------
|       Bob |    2 |        3 |    1 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:26:59.253

您只能计算您的组所定义的内容，因此返回计数的最佳方法是作为单独的行，而不是全部在一行中。换句话说，这：

```
bob | Hour | 2
bob | halfhour | 3
bob | Pair | 1 
```

而不是这个：

```
bob | 2 | 3 | 1 
```

所以该查询看起来像：

```
SELECT 
  c.firstname,
  c.Entityid,
  count(c.clientid) as ct
FROM Client as c  
GROUP BY c.firstname, c.Entityid 
```

将它们作为单独的行获取后，如果您确实需要，您可以“旋转”该表以将它们全部组合成一行。如果您有灵活性，您也可以在应用程序级别执行此操作。沿着这些路线的东西应该这样做，没有经过实际测试，所以希望它很接近：

```
SELECT
   t.firstname,
   SUM(CASE(t.Entityid WHEN 'hour' THEN t.ct ELSE 0)) as hour,
   SUM(CASE(t.Entityid WHEN 'halfhour' THEN t.ct ELSE 0)) as halfhour,
   SUM(CASE(t.Entityid WHEN 'Pair' THEN t.ct ELSE 0)) as Pair
FROM (
    SELECT 
      c.firstname,
      c.Entityid,
      count(c.clientid) as ct
    FROM Client as c  
    GROUP BY c.firstname, c.Entityid
) t
GROUP BY t.firstname 
```

# objective-c - Objective c 通过电话号码在通讯录中查找联系人

> ID：14200873
> 
> 赞同：2
> 
> 时间：2013-01-07T17:21:53.880
> 
> 标签：objective-c, ios, abaddressbook

像标题一样，通过电话号码在设备通讯录中查找联系人的最佳和有效方法是什么？实际上我使用这样的方法：

注意：
`[rm getElencoContatti]`返回通讯录中的所有联系人 从通讯录
`[contatto getID]`返回联系人 id 从通讯录
`[contatto getNumeriContatto]`返回所有联系人的电话号码

```
+(NSMutableDictionary *)getNomeContattoDaNumero:(NSString *)numeroTelefono {

    NSMutableDictionary *returnValue = [[NSMutableDictionary alloc]init];
    NSNumber *idContact;

    for(ContattoRubrica *contatto in [rm getElencoContatti]) {
        idContact = [contatto getID];
        for(id numero in [contatto getNumeriContatto]) {

            if([numeroTelefono isEqualToString:[numero objectForKey:@"numeroTelefono"]]) {

                [returnValue setValue:[contatto getNomeContatto] forKey:@"nome"];
                [returnValue setValue:idContact forKey:@"idContatto"];

                return returnValue;
            }
        }
    }

    [returnValue setValue:numeroTelefono forKey:@"nome"];
    [returnValue setValue:[NSNumber numberWithInt:-1] forKey:@"idContatto"];

    return returnValue;

} 
```

我用大约200个联系人的通讯录测试了这个方法，这个功能很慢。是否存在任何自动执行此操作的 ABAddressbook.h 方法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:39:06.303

`ABAddressBook`iOS 上提供的搜索功能比 Mac OS 上的等效 API 少。不幸的是，过滤联系人将需要线性扫描，例如您在上面显示的那个。[Apple 的文档](https://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/DirectInteraction.html)包含使用基于块的谓词的稍微不同的方法，但它基本上等同于您在此处所做的。

一种可能的加速方法是避免`ContattoRubrica`在执行搜索并找到（或未找到）匹配`ABPerson`记录之前构建所有对象。在任何情况下，您都应该使用 Instruments 来确定您的代码大部分时间都花在了哪里。

# php - php / apache，有没有办法阻止跨域帖子

> ID：14200874
> 
> 赞同：0
> 
> 时间：2013-01-07T17:21:54.627
> 
> 标签：php, apache, post

我有一些带有 php post 的 ajax 页面（因此 CAPTCHA 不是一个好主意）。

一些`fsockopen`或`curl`可以设置`POST value`为跨域的钢铁数据。

那么php/apache，有没有什么办法可以阻止跨域发帖呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:23:44.800

您正在发布数据。你不能阻止人们要求它。

如果您想对其保密，请在允许访问之前要求授权。

您可以在人们的道路上设置各种障碍——同时仍然保持数据公开——但没有一个是难以绕过的。测试用户代理不会阻止请求者指定与普通浏览器匹配的用户代理。从您网站上的另一个页面请求 cookie 并不会阻止他们请求该页面并为他们的工具获取 cookie。等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:25:07.860

许多提供 API 的 Web 服务，但不希望任何老人访问 API，通过 CURL 使用公钥/私钥。如果您不熟悉，则必须对公钥/私钥加密进行一些研究。我确信有 PHP 库可以为您完成所有工作（如果不是大部分）。

像 Authorize.net 这样的信用卡商家，以及我多年来与之合作的几个处理 PII（个人身份信息）的客户数据库服务允许您发布到 URL 并检索结果。他们使用公钥/私钥加密保护他们的服务。他们发给我一个密钥，我必须将该密钥连同我的请求数据一起发布。密钥通常在标头中发送，因此需要使用 CURL。

**背景信息：** [http ://computer.howstuffworks.com/encryption3.htm](http://computer.howstuffworks.com/encryption3.htm)

**PHP 示例：** [http ://www.joeldare.com/wiki/php:php_public_private_key_cryptography](http://www.joeldare.com/wiki/php:php_public_private_key_cryptography)

注意：这个系统的好处是*您可以绝对控制谁可以发布到*您服务器上的 PHP 脚本。如果你不需要那种级别的控制，你可以使用一种叫做“http basic auth”的东西。将您的敏感脚本放在一个目录中，并使用 .htaccess 身份验证对其进行保护。这是一个帮助您入门的工具。 [http://www.htaccesstools.com/htaccess-authentication/](http://www.htaccesstools.com/htaccess-authentication/)

当您通过 ajax（jquery，我接受它）发出请求时，您可以传递登录名和密码。只需确保在 ajax (HTTPS) 中使用 SSL 连接。否则，人们可以嗅出您的登录名和密码，因为它将以纯文本形式发送而无需使用 SSL。

如果您确实使用基本身份验证而不是公钥/私钥，那么您的域将需要一个 SSL 证书（如果它还没有）。您可以从 Thawte.com 之类的地方购买一个（不便宜），或者自行签署您自己的证书。但是，如果您要经历所有这些麻烦，那么您已经 80% 到了只使用公钥/私钥加密路线的地步。自签名证书通常会向用户的浏览器提示警告。这吓跑了很多人。

# excel-formula - 使用 phpExcel 读取一些单元格

> ID：14200878
> 
> 赞同：2
> 
> 时间：2013-01-07T17:22:09.843
> 
> 标签：excel-formula, phpexcel

我正在尝试使用过滤器读取一些工作表，但问题是当这些单元格使用单元格时，我无法获取单元格值

```
 $objReader = PHPExcel_IOFactory::createReader('Excel5');
  $objReader->setLoadSheetsOnly('Data Sheet #1');

  $myFilter = new CellReadFilter(1, 7, range('A', 'F'));
  $objReader->setReadDataOnly(true);
  $objReader->setReadFilter($myFilter);

  $objPHPExcel = $objReader->load('sampleData/example1.xls');

  $loadedSheetNames = $objPHPExcel->getSheetNames();
  foreach ($loadedSheetNames as $sheetIndex => $loadedSheetName) {
     echo $sheetIndex, ' => ', $loadedSheetName, '<br />';
     $sheetData = $objPHPExcel->getActiveSheet()->toArray(null,true,true,true);
     var_dump($sheetData);
  } 
```

我的 excel 文件，在`F1`单元格上，我使用以下公式：`=C2`，但我的脚本的输出显示 F1 是`null`，而不是 23.45 符合预期。

```
 0 => Data Sheet #1

 array (size=3)
   1 => 
array (size=6)
  'A' => string 'Integer Numbers' (length=15)
  'B' => float 123
  'C' => float 234
  'D' => float -345
  'E' => float 456
  'F' => null
  2 => 
array (size=6)
  'A' => string 'Floating Point Numbers' (length=22)
  'B' => float 1.23
  'C' => float 23.45
  'D' => float 3.45E-6
  'E' => float -45.678
  'F' => float 56.78
  3 => 
array (size=6)
  'A' => string 'Strings' (length=7)
  'B' => string 'Hello' (length=5)
  'C' => string 'World' (length=5)
  'D' => null
  'E' => string 'PHPExcel' (length=8)
  'F' => null 
```

我的单元过滤器类在文档示例中看起来像：

```
class CellReadFilter implements PHPExcel_Reader_IReadFilter {

   private $_startRow = 0;
   private $_endRow = 0;
   private $_column = array();

   public function __construct($startRow, $endRow, $column) {
      $this->_startRow = $startRow;
      $this->_endRow = $endRow;
      $this->_column = array_merge($column, array('AA'));
   }

   public function readCell($column, $row, $worksheetName = '') {
      if ($row >= $this->_startRow && $row <= $this->_endRow) {
         if (in_array($column, $this->_column)) { return true; }
      }
      return false;
   }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T18:01:41.023

验证您的阅读过滤器，修改 readCell 以测试正在应用哪些标准，并确定哪些单元格与标准匹配以及它们被接受/拒绝的原因：

```
public function readCell($column, $row, $worksheetName = '') {
    echo 'Testing worksheet ', $worksheetName, 'row ', $row, ' column ', $column, PHP_EOL;
    if ($row >= $this->_startRow && $row <= $this->_endRow) {
        'Cell is within row range',PHP_EOL;
        if (in_array($column, $this->_column)) { 
            'VALID: Cell is within column range',PHP_EOL;
            return true; 
        }
        'INVALID: Cell is outside column range',PHP_EOL;
    } else {
        'INVALID: Cell is outside row range',PHP_EOL;
    }
    return false;
} 
```

# regex - 已知长度内部数字的正则表达式条件前缀和后缀

> ID：14200880
> 
> 赞同：1
> 
> 时间：2013-01-07T17:22:13.947
> 
> 标签：regex, bash, sed, grep

我已经搜索了条件前缀的答案，但我是空白的。我预计我错过了一些简单的东西，但我一直没有成功。

我希望将所有这些系列与单个正则表达式行匹配：

以下是逻辑部分：

1.  （可能是 2 个字母前缀，可能是单词边界）
2.  （七位数）
3.  （可能是 2 个字符后缀 [第一个总是字母，第二个字母或数字]，可能是单词边界）

**匹配示例（字母和数字是任意的）：**

1234567

1234567B1

1234567A2

1234567AA

AA1234567

AA1234567A1

AA1234567

AA1234567BB

**被拒绝：**

12345678

/1234567

-1234567

:1234567

01234567

AB12345678AB

* * *

**我试过的：**

我一直试图在那里分组。匹配七个连续数字显然很简单'[0-9]{7}'，但我很难匹配可选组中的插入符号 NOT 字符。

例如，如果我执行 '[^\d]?[0-9]{7}' 希望匹配一个可能有前缀的七位数字，但该前缀不能是数字，我没有前缀的匹配失败（即只是一个七位数的字符串）。

显然我是正则表达式的新手，所以任何帮助表示赞赏。

* * *

**编辑**谢谢大家！这些中的每一个似乎都会产生与我的实际测试文件非常接近的结果，我将不得不测试一下，但目前看起来我们有多个正确和有效的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:29:16.217

使用这个正则表达式`^[a-zA-Z]{0,2}\d{7}([a-zA-Z][a-zA-Z\d])?$`

```
^ string begin

[a-zA-Z]{0,2}Maybe 2 Letter Prefix, Maybe word boundary

\d{7} seven digits

([a-zA-Z][a-zA-Z\d])?Maybe 2 character prefix [first always letter, second letter or number], maybe word boundary

$ string end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:10:38.270

```
perl -lnE  'print if m{
        \A                        # Beginning of string
        (?:  [a-z]{2} | \b )?     # (Maybe 2 Letter Prefix, Maybe word boundary)
        \d{7}                     # (seven digits)
        (?: [a-z][a-z\d] | \b )?  # (Maybe 2 character suffix [first always letter, second letter or number], maybe word boundary)
        \z                        # End of string
    }xmsi' < file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:46:15.287

这可能对您有用（GNU sed）：

```
sed -nr '/^([a-z]{2})?[0-9]{7}([a-z][a-z0-9])?$/Ip' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T18:30:10.380

```
$ awk '/^([[:alpha:]]{2})?[[:digit:]]{7}([[:alpha:]][[:alnum:]])?$/' file
1234567
1234567B1
1234567A2
1234567AA
AA1234567
AA1234567A1
AA1234567
AA1234567BB
$ awk '!/^([[:alpha:]]{2})?[[:digit:]]{7}([[:alpha:]][[:alnum:]])?$/' file
12345678
/1234567
-1234567
:1234567
01234567
AB12345678AB 
```

# javascript - 计算单选按钮中的值

> ID：14200882
> 
> 赞同：0
> 
> 时间：2013-01-07T17:22:18.363
> 
> 标签：javascript, html, css

我正在尝试制作营养计算器。它应该是单选按钮中的值并显示该值，但我不知道为什么它不起作用。下面的代码似乎不起作用。

```
<html>
<head>

<script language="JavaScript" type="text/javascript">
$(document).ready(function() {
$('.options').on('change', 'input', function() {
    var $self = $(this);
    var inputType = $self.attr('type');

    if (inputType == 'radio') {
        $self.parent('li').addClass('active').siblings().removeClass('active');
    } else if (inputType == 'checkbox') {
        $self.parent('li').toggleClass('active');
    }
    runUpdate();
});

});

function runUpdate() {

//get the sum of the elements

var calories = $(".caloriesSum", '.active').sum();
var fat = $(".fatSum", '.active').sum();
var satfat = $(".satfatSum", '.active').sum();
var carbs = $(".carbsSum", '.active').sum();
var protein = $(".proteinSum", '.active').sum();
var sodium = $(".sodiumSum", '.active').sum();
var chloresterol = $(".chloesterolSum", '.active').sum();

//update the total

$("#totalCalories").text(+calories.toString());
$("#totalFat").text(+fat.toString());
$("#totalSatFat").text(+satfat.toString());
$("#totalCarbs").text(+carbs.toString());
$("#totalProtein").text(+protein.toString());
$("#totalSodium").text(+sodium.toString());
$("#totalChloresterol").text(+chloresterol.toString());
}?
 </script>

<style type="text/css">
ul.options li span {display:none;}
#totals {padding:20px; background:#eee;}
#totals span {font-weight:bold;}
h4,ul {margin:0 0 15px;}
</style>

</head>
<body>

<form action="" method="post" id="nutform" onsubmit="return false;">
        <h2>Taqueria Nutritionals</h2>

        <h4>Pick Your Meal</h4>

  <!--Radio Buttons with Values -->

        <ul class="options">
            <li>
                <input type="radio" id="wwheatt" name="meal"     value="whole_wheat_tortilla"> Whole Wheat Tortilla

   <!-- This class contains the values that it should add -->

                <span class="caloriesSum">280</span>
                <span class="fatSum">6</span>
                <span class="satfatSum">0</span>
                <span class="carbsSum">44</span>
                <span class="proteinSum">8</span>
                <span class="sodiumSum">340</span>
                <span class="chloesterolSum">0</span>
            </li>
            <li>
                <input type="radio" name="meal" value="flour_tortilla" > Flour Tortilla
                <span class="caloriesSum">290</span>
                <span class="fatSum">6</span>
                <span class="satfatSum">2</span>
                <span class="carbsSum">49</span>
                <span class="proteinSum">9</span>
                <span class="sodiumSum">770</span>
                <span class="chloesterolSum">0</span>
            </li>
            <li>
                <input type="radio" name="meal" value="naked" > Naked, zero nutrients
                <span class="caloriesSum">0</span>
                <span class="fatSum">0</span>
                <span class="satfatSum">0</span>
                <span class="carbsSum">0</span>
                <span class="proteinSum">0</span>
                <span class="sodiumSum">0</span>
                <span class="chloesterolSum">0</span>
            </li>
        </ul>

        <h4>Select Your Protein</h4>

        <ul class="options">
            <li>
                <input type="radio" name="protein" value="steak" > Steak
                <span class="caloriesSum">230</span>
                <span class="fatSum">9</span>
                <span class="satfatSum">3</span>
                <span class="carbsSum">3</span>
                <span class="proteinSum">32</span>
                <span class="sodiumSum">170</span>
                <span class="chloesterolSum">90</span>
            </li>
            <li>
                <input type="radio" name="protein" value="carnitas" > Carnitas
                <span class="caloriesSum">210</span>
                <span class="fatSum">9</span>
                <span class="satfatSum">3</span>
                <span class="carbsSum">2</span>
                <span class="proteinSum">29</span>
                <span class="sodiumSum">490</span>
                <span class="chloesterolSum">90</span>
            </li>
            <li>
                <input type="radio" name="protein" value="chicken" > Chicken
                <span class="caloriesSum">190</span>
                <span class="fatSum">2</span>
                <span class="satfatSum">0</span>
                <span class="carbsSum">4</span>
                <span class="proteinSum">35</span>
                <span class="sodiumSum">560</span>
                <span class="chloesterolSum">90</span>
            </li>
            <li>
                <input type="radio" name="protein" value="tofu"> Tofu
            </li>
        </ul>

        <h4>The Add-ins</h4>

        <ul class="options">
            <li>
                <input type="checkbox" name="the_addins" value="white_rice"> White Rice
            <span class="fatSum">9</span>
                <span class="satfatSum">3</span>
                <span class="carbsSum">2</span>
                <span class="proteinSum">29</span>
                <span class="sodiumSum">490</span>
                <span class="chloesterolSum">90</span>
            </li>
            <li>
                <input type="checkbox" name="the_addins" value="brown_rice"> Brown Rice
            </li>
            <li>
                <input type="checkbox" name="the_addins" value="black_beans"> Black                                    Beans
            </li>
            <li>
                <input type="checkbox" name="the_addins" value="pinto_beans"> Pinto Beans
            </li>
        </ul>

        <h4>Salsas</h4>

        <ul class="options">
            <li>
                <input type="checkbox" name="salsas" value="pico_de_gallo"> Pico De Gallo
            </li>
            <li>
                <input type="checkbox" name="salsas" value="tomatillo_salsa"> Tomatillo Salsa
            </li>
            <li>
                <input type="checkbox" name="salsas" value="roasted_corn_salsa"> Roasted Corn Salsa
            </li>
            <li>
                <input type="checkbox" name="salsas" value="fire_roasted_red_salsa"> Fire Roasted Red Salsa
            </li>
        </ul>    

        <h4>Add-ins</h4>

        <ul class="options">
            <li>
                <input type="checkbox" name="addins" value="lettuce"> Lettuce
            </li>
            <li>
                <input type="checkbox" name="addins" value="shredded_cheese"> Shredded Cheese
            </li>
            <li>
                <input type="checkbox" name="addins" value="crema"> Crema
            </li>
            <li>
                <input type="checkbox" name="addins" value="chipotle_crema"> Chipotle Crema
            </li>
            <li>
                <input type="checkbox" name="addins" value="guacamole"> Guacamole
            </li>
        </ul>            

  <!-- This is where the values should display -->

        <div id="totals">

            <h4>Totals</h4>

            <ul>

                <li>Calories: <span id="totalCalories"> </span></li>
                <li>Fat: <span id="totalFat"> </span>g</li>
                <li>Sat. Fat: <span id="totalSatFat"> </span>g</li>
                <li>Carbs: <span id="totalCarbs"> </span>g</li>
                <li>Protein: <span id="totalProtein"> </span>g</li>
                <li>Sodium: <span id="totalSodium"> </span>mg</li>
                <li>Cholesterol: <span id="totalChloresterol"> </span>mg</li>
            </ul>
        </div>
  <!-- #totals -->

  </form>

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:33:00.340

您似乎缺少一个添加 jQuery 集合值的 $.sum 插件。我放了一个（[第一次点击谷歌搜索](http://jqueryminute.com/calculating-the-sum-of-inputs/)），你的代码工作正常。

[http://jsfiddle.net/QM9gP/](http://jsfiddle.net/QM9gP/)

```
$.fn.sum = function() {
    var sum = 0; 
    this.each(function() {
        if ( $(this).is(':input') ) {
            var val = $(this).val();
        } else {
            var val = $(this).text();
        }
        sum += parseFloat( ('0' + val).replace(/[^0-9-\.]/g, ''), 10 );
    });
    return sum;
};

$('.options').on('change', 'input', function() {
    var $self = $(this);
    var inputType = $self.attr('type');

    if (inputType == 'radio') {
        $self.parent('li').addClass('active').siblings().removeClass('active');
    } else if (inputType == 'checkbox') {
        $self.parent('li').toggleClass('active');
    }
    runUpdate();
});

function runUpdate() {
  console.log('run update');

    // get the sum of the elements

    var calories = $(".caloriesSum", '.active').sum();
    var fat = $(".fatSum", '.active').sum();
    var satfat = $(".satfatSum", '.active').sum();
    var carbs = $(".carbsSum", '.active').sum();
    var protein = $(".proteinSum", '.active').sum();
    var sodium = $(".sodiumSum", '.active').sum();
    var chloresterol = $(".chloesterolSum", '.active').sum();

    // update the total

    $("#totalCalories").text(+calories.toString());
    $("#totalFat").text(+fat.toString());
    $("#totalSatFat").text(+satfat.toString());
    $("#totalCarbs").text(+carbs.toString());
    $("#totalProtein").text(+protein.toString());
    $("#totalSodium").text(+sodium.toString());
    $("#totalChloresterol").text(+chloresterol.toString());
} 
```

# jquery - 在 document.elementFromPoint() 或 jQuery trigger-event 期间获取选定的下拉选项

> ID：14200883
> 
> 赞同：1
> 
> 时间：2013-01-07T17:22:20.160
> 
> 标签：jquery, select, mouseevent, option, target

`option`关于如何通过“虚拟”点击事件获得所选选择的任何想法？

已经尝试过`document.elementFromPoint()`，甚至使用 jQuery 的`trigger`-event （带坐标），但没有成功！

给你一些小提琴：

*   [$(elem).trigger()](http://fiddle.jshell.net/Jmavv/2/)
*   [document.elementFromPoint()](http://fiddle.jshell.net/Jmavv/3/)

看看结果......我怎样才能得到选定的`option`对象？

# git - 如何在 Git 中使用快照创建编码教程

> ID：14200886
> 
> 赞同：4
> 
> 时间：2013-01-07T17:22:28.467
> 
> 标签：git

[Angular 教程](http://docs.angularjs.org/tutorial)展示了该技术的实际应用。教程追随者的经验是：

1.  首先，克隆存储库。
2.  接下来，查看步骤 1 以使 repo 进入适当的状态。
3.  然后按照教程中第 1 步的说明进行操作。
4.  接下来，查看第 2 步。
5.  按照步骤 2 的说明进行操作。
6.  继续。

开始 Angular 教程的终端命令是：

```
git clone git://github.com/angular/angular-phonecat.git
cd angular-phonecat
git checkout -f step-0 
```

这样做的好处是您可以直接跳到您想要的任何步骤并从那里开始。

如何设计这种类型的教程体验？这种方法有哪些最佳实践？是否可以在不影响之前或之后的其他步骤的情况下返回并编辑特定步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T21:27:10.107

我想说首先考虑一下教程中的每个步骤。然后进行一步开发并提交。然后编写教程的那一部分。然后继续下一部分，编码，提交，编写，重复！

至于在不影响他人的情况下返回，您本质上将无法从您的回购中的一个独立的头部提交。你必须从以前的位置分支出来。但老实说，这可能对用户更好。

这实际上是一个很酷的想法。但我认为非 git 用户需要关于在提交之间移动的入门教程（结帐）

# java - 向 textView 添加一个字母

> ID：14200887
> 
> 赞同：0
> 
> 时间：2013-01-07T17:22:33.123
> 
> 标签：java, android, button, textview, calculator

我想编写一个小计算器。我是 Android 编程新手，我想知道如何在 TextView 中添加一个字母。在我单击一个按钮后（用 onClickListener 尝试过），应该输入这封信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:25:32.140

您可以使用

```
@Override
public void onClick(View v){
          char letter='a';
          t.setText(t.getText()+letter);
} 
```

其中 t 是 的一个对象`TextView`。

`setText`允许您在运行时重置文本

`getText`获取当前文本`TextView`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T17:26:40.647

首先，获取textview中的文本：

```
 String input = textview.getText().toString(); 
```

然后，附加一些输入：

```
input += " 26"; 
```

然后，用当前输入重置文本视图

```
textview.setText(input); 
```

只需将此文本视图声明为类级别变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T17:25:16.897

```
char c = 'c';
btn.setOnClickListener(new Button.OnClickListener()
{
    public void onClick(View v)
    {
        text.setText(text.getText()+'c');
    }
} 
```

单从这一点想。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T17:34:33.150

从 TextView 中获取文本：

```
String text = textview.getText().toString(); 
```

将您的一封信添加到以下内容的末尾`text`：

```
String newText = StringBuilder(text).append("x").toString(). 
```

*（`x`成为你的信）*

传递`newText`给你的`TextView`：

```
textview.setText(newText); 
```

我希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T17:30:58.187

TextView 允许将 CharSequence 设置为内容，以便可以使用 StringBuilder。将 char 附加到 StringBuilder 既简单又高效。

但是，StringBuilder 没有注册侦听器的钩子，因此 TextView 在您附加角色后肯定不会更新。也许 invalidate() 或 setText(same builder) 可以刷新 TextView？有人想试试吗？

# r - gWidgetRGtk2 gcheckbox 列表加/减与循环

> ID：14200890
> 
> 赞同：3
> 
> 时间：2013-01-07T17:22:54.227
> 
> 标签：r, checkbox, gwidgets

我整天都在努力让他工作，但我找不到一个简单的解释来解释它是如何工作的。我有一个包含 3 个项目的向量`c(file1, file2, file3)`，我希望能够打开和关闭复选框，当它打开时我希望第一个项目`c(file1)`位于向量中，但是当它关​​闭时我希望它从向量中删除。这是我的尝试，但我不知道为什么它不起作用：

```
library(gWidgetRGtk2)
GraphFiles <- FileNamesOrig

w <- gwindow("Tag Density Checkboxes")
g <- ggroup(container = w)
lyt <- glayout(cont = g, horizontal = T)

gcheckbox(FileNamesOrig[1], container=g, checked=TRUE, handler=function(h,...){  
  if(!svalue(h$obj)){GraphFiles[[1]] <- NA}  else {GraphFiles[[1]] <-FileNamesOrig[1]}
}) 
```

当我们都在这里时，我正在考虑这样做：

```
for(i in 1:No.file)
gcheckbox(GraphFiles[i], container=g, handler=function(h,...){
  }) 
```

编号文件 = 3

首先，我如何在 GUI 窗口中的单独行上获得复选框。其次，我如何将第一段代码的功能合并到循环中？（问题是每次运行脚本时输入的数量都会有所不同）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:27:22.603

您可以使用`[`，请参阅 ?ggwidget

> "[" 方法返回盒子上的标签。

然后我改变你的处理函数：

```
 handler=function(h,...){  
         browser()
         label <- h$obj[]
         if(!svalue(h$obj)) ## I remove the item
            GraphFiles <<- GraphFiles[GraphFiles!=label]   ## note the use of the global 
                                                              operator
         else               ## I add the item
            GraphFiles  <<- c(GraphFiles,FileNamesOrig[FileNamesOrig==label])

 }) 
```

最后你在循环中调用它：

```
library(gWidgetsRGtk2)
FileNamesOrig <- paste('file',1:3,sep='')
GraphFiles <- FileNamesOrig
w <- gwindow("Tag Density Checkboxes")
g <- ggroup(container = w)
lyt <- glayout(cont = g, horizontal = T)
for(x in seq_along(FileNamesOrig)){
  gcheckbox(FileNamesOrig[x], 
            container=g, 
            checked=TRUE, 
            handler=function(h,...){  
                  label <- h$obj[]
                  if(!svalue(h$obj)) GraphFiles <<- GraphFiles[GraphFiles!=label]
                  else GraphFiles  <<- c(GraphFiles,FileNamesOrig[FileNamesOrig==label])
                 print(GraphFiles) ## edit to show the changes
            })
} 
```

# dynamics-crm-2011 - 关联实体时，其名称属性未与引用实体正确初始化

> ID：14200894
> 
> 赞同：0
> 
> 时间：2013-01-07T17:23:07.403
> 
> 标签：dynamics-crm-2011, dynamics-crm

我在自引用 1:N 关系中遇到了这个问题-
我正在尝试将实体 A（类型`new_transaction`）与实体 B（相同类型）相关联。
该关联工作正常（我已检查 DB-`'new_relatedTransactionId'`列已正确更新）。
但是，名称列 ( `'new_relatedTransactionIdName'`) 设置为`NULL`，导致表单显示一个空文本框...
![在此处输入图像描述](../Images/e9d2f097a5c1cf60c968b24fde13ced3.png)

我尝试了以下方法，但没有成功 -
1。

```
var rel = new Relationship(relationshipName) {PrimaryEntityRole = EntityRole.Referenced};
EntityReferenceCollection relatedEntities = new EntityReferenceCollection();
relatedEntities.Add(relatedTransaction.ToEntityReference());
crmServiceContext.Associate(new_transaction.EntityLogicalName,sourceTransaction.Id,rel,relatedEntities); 
```

2

```
sourceTransaction.lv_relatedtransactionid = relatedTransaction.ToEntityReference();
crmServiceContext.UpdateObject(sourceTransaction); 
```

3

```
crmServiceContext.AddLink(sourceTransaction, new Relationship(relationshipName) { PrimaryEntityRole = EntityRole.Referenced }, relatedTransaction); 
```

我已经尝试过切换`EntityRole.Referenced`，`EntityRole.Referencing`但仍然没有运气。
有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:17:37.840

选项 2 是我创建这种关系的首选方法。

该字段`'new_relatedTransactionIdName'`未存储在数据库中，您实际上是在查看 SQL 视图。

如果此字段是`null`，则表明 new_relatedTransactionId 中 Guid 引用的实体记录的主要字段为空白。

每个实体都有一个定义为其主要字段的文本字段。该字段的值不一定是必填字段，因此最终可以为空白，它将显示在图像的文本框中。

您没有定义特定于关系的此值，它是在创建和/或更新实体记录时创建的，并在关系中涉及该实体的任何地方使用。

# php - 用于在php中加密密码的函数？

> ID：14200895
> 
> 赞同：-2
> 
> 时间：2013-01-07T17:23:08.203
> 
> 标签：php, codeigniter, encryption, passwords

我正在编写一个允许用户注册的 PHP 站点，我正在使用 codeigniter php，我想知道加密密码的最佳功能以及此功能之间有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:33:04.080

密码几乎不应该被加密。相反，它们应该是单向散列的。

通常，[推荐使用 bcrypt](http://codahale.com/how-to-safely-store-a-password/)，因为它可以抵抗暴力破解，常见的替代方法喜欢`md5`或`sha1`失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T17:43:19.967

使用 PHPass：[http ://www.openwall.com/phpass/](http://www.openwall.com/phpass/)

> phpass 支持的首选（最安全）散列方法是 OpenBSD 风格的基于 Blowfish 的 bcrypt，也支持我们的公共域 crypt_blowfish 包（用于 C 应用程序），在 PHP 中称为 CRYPT_BLOWFISH，回退到 BSDI 风格的扩展基于 DES 的散列，在 PHP 中称为 CRYPT_EXT_DES，最后的手段是回退到在 phpass 本身中实现的基于 MD5 的加盐和可变迭代计数密码散列（也称为可移植散列）。

把它`application/third_party`放进去，然后使用 vanilla PHP 来加载它（不是 CI 的加载器）：

```
require_once APPPATH.'third_party/phpass-0.3/PasswordHash.php';
$hash_iterations = 100;
$portable_hashes = FALSE;
$phpass = new PasswordHash($hash_iterations, $portable_hashes); 
```

示例用法：

```
// Hash a password before storing it in the DB
$hashed_password = $phpass->HashPassword($user_input);

// Check a given password against a stored hashed password
$is_valid = $phpass->CheckPassword($user_input, $stored_hash_of_password); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T17:30:54.573

这是我在 codeigniter 中使用的自定义加密类

```
<?php
class Encryption {
    var $skey   = "EsUriEncKey2012"; 

    public  function safe_b64encode($string) {

        $data = base64_encode($string);
        $data = str_replace(array('+','/','='),array('-','_',''),$data);
        return $data;
    }

    public function safe_b64decode($string) {
        $data = str_replace(array('-','_'),array('+','/'),$string);
        $mod4 = strlen($data) % 4;
        if ($mod4) {
            $data .= substr('====', $mod4);
        }
        return base64_decode($data);
    }

    public  function encode($value){ 

        if(!$value){return false;}
        $text = $value;
        $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
        $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
        $crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $this->skey, $text, MCRYPT_MODE_ECB, $iv);
        return trim($this->safe_b64encode($crypttext)); 
    }

    public function decode($value){

        if(!$value){return false;}
        $crypttext = $this->safe_b64decode($value); 
        $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
        $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
        $decrypttext = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $this->skey, $crypttext, MCRYPT_MODE_ECB, $iv);
        return trim($decrypttext);
    }
}
?> 
```

# c++ - 使用 C++ 创建文件时，Mac 中文件名中的 % 字符

> ID：14200900
> 
> 赞同：0
> 
> 时间：2013-01-07T17:23:25.350
> 
> 标签：c++, macos, unicode, character-encoding

我在使用 C++ 在 Mac OS X 中创建具有特殊字符文件名的文件时遇到了一些问题。

这是我的应用程序打印：
文件名是通过套接字从另一个可执行文件接收的。（最烦人的是我根本无法在终端打印文件名。它只显示问号。但是当我将文件名写入另一个文件的内容时，它会显示确切的字符。）

我的应用程序打印：

```
######
File Name before decoding : /Users/zeus/workspace/Unicodes/files/%D4%D3%C2%F3_1.txt
File Name after decoding :  /Users/zeus/workspace/Unicodes/files/????_1.txt
File Opened and Written ##### 
```

应用程序完成后，当我检查文件时，它会在文件名中显示 % 字符。这怎么可能..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T17:32:38.510

我的猜测是您需要将字符串编码为有效的 UTF-8。`0xD4`不是有效的 UTF-8 字符。相反，正确的 UTF-8 编码`Ô`是`0xC3 0x94`（它需要两个字节）。不可能肯定地说，因为没有看到实际代码，但这是我的预感。更可靠的答案将需要实际的代码。

看起来您的 URL 正在使用[Latin-1 (ISO/IEC 8859-1) character set](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)对转义字符进行编码。[这个问题讨论了如何从 ISO 8859-1 转换为 UTF-8](https://stackoverflow.com/questions/4059775/convert-iso-8859-1-strings-to-utf-8-in-c-c)。[Wikipedia 上有一篇关于如何编码 UTF-8 的好文章](http://en.wikipedia.org/wiki/UTF-8)。

# python - Python中的全局“连接”类变量

> ID：14200901
> 
> 赞同：3
> 
> 时间：2013-01-07T17:23:28.580
> 
> 标签：python, python-2.7, cloudfiles

完整脚本：[https ://gist.github.com/4476526](https://gist.github.com/4476526)

有问题的具体代码是

```
# Cloud Files username & API key
username = ''
key = ''

# Source and destination container names
originContainerName = ''
targetContainerName = ''

...

def cloudConnect():
    global originContainer
    global targetContainer
    global connection
    print "Creating connection"
    connection = cloudfiles.get_connection(username,key,servicenet=True)
    print "-- [DONE]"
    print "Accessing containers"
    originContainer = connection.create_container(originContainerName)
    targetContainer = connection.create_container(targetContainerName)
    print "-- [DONE]"
    return 
```

该脚本工作得非常好，但是我在多个地方读到应该毫不犹豫地使用全局变量，并且几乎总是有更好的方法可以在没有它们的情况下做同样的事情。这是真的？如果是这样，我应该如何修复这个脚本？对我来说，使用全局连接和容器变量而不是将这些对象作为参数传递给多个函数似乎要容易得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T17:26:31.490

您应该创建一个`CloudContainer`包含所有这些全局变量作为成员的类（称为类似），并将其重写为（仅作为开始）：

```
class CloudContainers(object):
    def __init__(self, username, key, originContainerName, targetContainerName):
        self.username = username
        self.key = key     
        self.originContainerName = originContainerName
        self.targetContainerName = targetContainerName

    def cloudConnect(self):
        print "Creating connection"
        self.connection = cloudfiles.get_connection(self.username,self.key,servicenet=True)
        print "-- [DONE]"
        print "Accessing containers"
        self.originContainer = connection.create_container(self.originContainerName)
        self.targetContainer = connection.create_container(self.targetContainerName)
        print "-- [DONE]"
        return

    def uploadImg(self, new_name):
        new_obj = self.targetContainer.create_object(new_name)
        new_obj.content_type = 'image/jpeg'
        new_obj.load_from_filename("up/"+new_name)

    def getImg(name):
        obj = self.originContainer.get_object(name)
        obj.save_to_filename("down/"+name) 
```

因此，任何使用这些全局变量（如`getImg`和`uploadImg`以上）的函数都将作为类的方法包含在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:26:23.050

更简单，是的，但这意味着很难判断这些变量何时以及为什么会发生变化。我认为最好的答案是您在问题中给出的答案-将它们作为对象传递。例如：

```
def cloud_connect(origin_container_name, target_container_name):
    print "Creating connection"
    connection = cloudfiles.get_connection(username, key, servicenet=True)
    print "-- [DONE]"
    print "Accessing containers"
    origin_container = connection.create_container(origin_container_name)
    target_container = connection.create_container(target_container_name)
    print "-- [DONE]"
    return connection, origin_container, target_container 
```

然后简单地传递那个元组。

# wordpress - 将 Wordpress 图库短代码扩展为实际的 HTML img 标签

> ID：14200906
> 
> 赞同：0
> 
> 时间：2013-01-07T17:23:39.670
> 
> 标签：wordpress, export, gallery

我有一个自托管的 Wordpress 博客，其中包含数百篇文章，其中大多数使用默认的 [gallery] 短代码来显示为每篇文章上传的图像。

我现在想使用默认的“导出所有内容”功能导出这些帖子，以获取所有帖子内容的 XML 文件以及图像。如果你一定知道为什么，我想使用博客打印服务以精装书的形式打印博客（如[http://www.blogbooker.com/wordpress.php](http://www.blogbooker.com/wordpress.php)）

以下是当前发布内容和画廊的方式：

```
<content:encoded><![CDATA[
Post text here.
[gallery link="file"]
]]></content:encoded> 
```

我想要一种将图库扩展为 HTML 的方法，可能使用一次性脚本，或者使用 PHP 函数的短代码，因此导出的 XML 内容看起来更像这样：

```
<content:encoded><![CDATA[
Post text here.
<img src="http://www.blogname.com/wp-content/uploads/image1-300x225.jpg" width="300" height="225" /> 
<img src="http://www.blogname.com/wp-content/uploads/image2-300x225.jpg" width="300" height="225" />
<img src="http://www.blogname.com/wp-content/uploads/image3-300x225.jpg" width="300" height="225" />
]]></content:encoded> 
```

对此有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T20:03:14.563

这在 Wordpress 的当前状态或使用任何现有插件目前是不可能的。解决方案是编写您自己的脚本来修改 WP 数据库并将图库标签转换为 HTML 以及图库中引用的每个图像的标签。当我这样做时，我会在这里发表评论。

# c# - 插入符号消失在文本框中

> ID：14200909
> 
> 赞同：2
> 
> 时间：2013-01-07T17:23:47.273
> 
> 标签：c#, textbox

我正在用 C# 制作一个简单的记事本程序，在我的主窗体中，我有一个文本框，它经历了一些奇怪的事情，我的编辑菜单中有一个 DELETE on_click 我有一个事件

```
 txtContent.text = ""; 
```

也试过

```
 txtContent.Text = string.Empty; 
```

和

```
 txtContent.Clear(); 
```

但每次手术后我的插入符号消失，我认为这可能是一个焦点问题，但我也没有尝试过。不小心我最小化了我的记事本，然后再次打开它光标回来了，删除操作后它并没有消失我在网上搜索了这个问题但找不到任何东西希望你有一些建议

这是我的完整代码，这可能会使问题更加清晰

```
private void deleteToolStripMenuItem_Click(object sender, EventArgs e)
{

textBox1.Clear();
time.Interval = 20000;
time.Enabled = true;
time.Start();
time.Tick+=focus;
}
void focus(object sender, EventArgs e)
{
textbox1.Focus();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T17:29:51.503

这是因为当用户选择菜单项时，菜单现在具有焦点，因此在文本框中显示光标是没有意义的。

如果要显示光标，则需要在菜单操作完成后将焦点重新设置在文本框上。

例如（使用按钮）：

```
 private void button1_Click(object sender, EventArgs e)
    {
        textBox1.Clear();
        textBox1.Focus();
    } 
```

但是，请注意，根据菜单的行为，这可能会有些棘手。如果焦点没有返回到文本框，您可能需要添加一个计时器来设置焦点，以便菜单可以完成它正在做的任何事情，而不是“重新窃取”焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:27:14.927

您是否尝试过使用 Form.invalidate() 或其他刷新表单的方法？您还可以将焦点返回到文本框。

如果这些不起作用，则可以编写一个反复刷新文本框的 BackgroundWorker。

# mysql - 迁移主键以使用 AUTO_Increment

> ID：14200911
> 
> 赞同：2
> 
> 时间：2013-01-07T17:23:54.537
> 
> 标签：mysql

我有一个表，其中主键是 sale_id, payment_type

```
mysql> describe phppos_sales_payments;
+----------------+---------------+------+-----+---------+-------+
| Field          | Type          | Null | Key | Default | Extra |
+----------------+---------------+------+-----+---------+-------+
| sale_id        | int(10)       | NO   | PRI | NULL    |       |
| payment_type   | varchar(255)  | NO   | PRI | NULL    |       |
| payment_amount | decimal(15,2) | NO   |     | NULL    |       |
+----------------+---------------+------+-----+---------+-------+ 
```

我想添加一个`id`自动增量的新字段。这样做的原因是我想单独跟踪相同类型的付款。是否可以在不丢失数据的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T22:39:49.917

这就是你可以改变你的桌子的方法

```
ALTER TABLE `phppos_sales_payments`
  -- add a unique index based on the current primary key
  ADD UNIQUE (`sale_id`,`payment_type`), 
  -- drop the current primary key
  DROP PRIMARY KEY,
  -- add the new identity column with autoincrement
  ADD COLUMN `id` int(10) NOT NULL AUTO_INCREMENT FIRST,
  -- set primary key to the new identity column 
  ADD PRIMARY KEY (`id`); 
```

“魔术”是添加一个唯一索引，因为外键必须有一个索引，其次是添加具有自动增量的新标识列，并一次性设置该列的主键。

[SQL 小提琴演示](http://sqlfiddle.com/#!2/907d0/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T08:03:37.397

您需要执行一个 ALTER TABLE 语句来实现此目的：

```
ALTER TABLE `table` DROP PRIMARY KEY, 
ADD COLUMN id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY FIRST, 
ADD UNIQUE sale_id_payment_type( sale_id, payment_type ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T17:29:39.540

只需保留您的 sale_id、payment_type 键，但不要作为主键，然后添加一个`id INT NOT NULL AUTO_INCREMENT`并将其设为主键：不丢失信息和新的主键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T17:55:21.903

```
 ALTER TABLE `table` DROP PRIMARY KEY,  

 ALTER TABLE `table` ADD `id` INT( 11 ) NOT NULL AUTO_INCREMENT FIRST
 ALTER TABLE `table` ADD PRIMARY KEY (id) 
```

# android - 活动和通知

> ID：14200912
> 
> 赞同：1
> 
> 时间：2013-01-07T17:23:55.257
> 
> 标签：android

在我的应用程序中，我的活动很少，并且每天都会收到通知。如果我打开了一个活动并且我的应用程序进入后台，当我点击通知（启动一个新活动）时，我会看到旧活动并且没有通知活动。我该如何解决？

# ruby-on-rails - Rails 中的简单性别单选按钮（包括标签和 i18n）

> ID：14200919
> 
> 赞同：0
> 
> 时间：2013-01-07T17:24:53.947
> 
> 标签：ruby-on-rails, ruby, internationalization, radio-button

我目前正在开发 Rails 应用程序。在应用程序中应该可以编辑用户的性别。

我想通过一个单选框来实现这个（经常这样做）。这就是我想出的：

```
form_for @user do |f|
  - [:female, :male].each do |gender|
    = f.label :gender, t(:"helpers.label.member.gender_#{gender}"), value: gender
    = f.radio_button :gender, gender, checked: @user.gender == gender 
```

我想从视图中删除尽可能多的逻辑，并尝试使用视图助手构建相同的逻辑，但失败了。

如何指定一个辅助方法，这样一个简单的

```
f.gender_select 
```

或者

```
f.gender_select @member 
```

只显示正确的单选框？

另外，我如何以某种方式为各个选择选项指定标签，Rails i18n 会利用它（例如，`f.label :first_name`将自动翻译）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:03:00.510

```
form_for @user do |form|
  - gender_radio_buttons(form) 
```

application_helper.rb

```
module ApplicationHelper

  def gender_radio_buttons(form)
    [ :female, :male ].map do |gender|
      form.label(:gender, t(:"helpers.label.member.gender_#{gender}"), value: gender) +
      form.radio_button(:gender, gender, checked: @user.gender == gender)
    end.join("\n")
  end 
```

# ruby-on-rails - Ruby 或 Rails 对两个/多个日期字段进行排序

> ID：14200931
> 
> 赞同：3
> 
> 时间：2013-01-07T17:25:35.953
> 
> 标签：ruby-on-rails, ruby

看起来很简单 - 我想组合两个模型查询并按日期 DESC 对它们进行排序，但日期字段的名称不同。

```
@news_and_posts = [News.all(:limit => 3, :order => "date_of_news DESC") + Post.all(:limit => 3, :order => "date_of_post DESC") 
```

我试过了

```
@news_and_posts = [News.all(:limit => 3, :order => "date_of_news DESC") + Post.all(:limit => 3, :order => "date_of_post DESC").sort_by {|n, p| [n.date_of_news, p.date_of_post]} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:42:34.823

您应该使用一个别名来返回您要比较的每个模型中实现的日期（例如称为“日期”的方法）。

然后按以下方式对您的列表进行排序`date`：

（感谢@tokland 提供更好的实施）

```
my_collection.sort_by(&:date) 
```

# behat - 尝试向该字段发送一些文本

> ID：14200932
> 
> 赞同：1
> 
> 时间：2013-01-07T17:25:41.960
> 
> 标签：behat, mink

我尝试使用此功能向该字段发送一些文本：

```
public function iFillInGrizzlistSearchFieldNameOfNewMember2($arg1)
    {
        $page = $this->getSession()->getPage();
       $el = $page->find('css','.grizzlist-quicksearch');
       $el->setText('$arg1');
      } 
```

但它不起作用。请告诉我，我做错了什么？

* * *

如果我有一些具有相同类的元素，我如何使用它们点击第二个

```
function:
     public function iDeleteActiveStatusFromSearchCriteria()
    {
       $page = $this->getSession()->getPage();
       $el = $page->find('css','.delete-bt');
       $el->click();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-29T12:15:18.600

这是我们正在使用的步骤定义：

`/** * @Given /^I set tinymce "([^"]*)"$/ */ public function iSetTinymce($arg1) { $this->getSession()->executeScript("tinymce.get()[0].setContent('" . $arg1 . "');"); }`

请注意，这`tinymce.get()[0]`是获取页面上的第一个 TinyMce 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T05:29:31.970

默认情况下，框架将通过一组可能的选择器。您不必显式编写步骤定义，除非您想将它们分组以在一个步骤中执行多项操作。只需执行两个步骤

```
When I fill in "grizzlist-quicksearch" with "sometext"
And I press "delete-bt" 
```

这些步骤定义是内置的，因此您无需执行任何其他操作。但是这行不通，因为我在这一步中放入的东西是 css。正确的方法是匹配其他东西。

```
When I fill in "valueOfInputNameAttribute" with "sometext"
And I press "valueOfSubmitButtonNameAttribute" 
```

例如，这里是框架使用的代码，您可以在您的功能中使用

[https://github.com/Behat/MinkExtension/blob/master/src/Behat/MinkExtension/Context/MinkContext.php](https://github.com/Behat/MinkExtension/blob/master/src/Behat/MinkExtension/Context/MinkContext.php)

寻找任何使用 fillField

您会注意到它正在使用 fillField 为您完成工作

如果您深入研究源代码，您会在 Mink/Element 的 traversableelement.php 中找到它

```
/**
     * Fills in field (input, textarea, select) with specified locator.
     *
     * @param string $locator input id, name or label
     * @param string $value   value
     *
     * @throws ElementNotFoundException
     */
    public function fillField($locator, $value)
    {
        $field = $this->findField($locator);

        if (null === $field) {
            throw new ElementNotFoundException(
                $this->getSession(), 'form field', 'id|name|label|value', $locator
            );
        }

        $field->setValue($value);
    } 
```

它正在使用定位器，它将尝试使用您在特征中通过 id|name|label|value 提供的文本来查找输入元素

因此，您应该考虑在您的 id 属性中使用唯一的 id，或者如果您在输入中的 name 属性是唯一的，请使用它来代替.. 等等.. 等等...

为了让你专注于使用 css 的事情，需要一个新的步骤 def，这意味着编写你可能不需要编写但有时你必须编写的代码。

如果您真的只限于使用 css 来查找您的页面元素，那么在您的 FeatureContext 中使用这样的自定义步骤定义

```
 /**
 * @When /^I fill in the quicksearch with "([^"]*)"$/
 */
public function iFillInTheQuickSearchWith($value)
{
   $element = $session->getPage()->find('css', 'INPUT#grizzlist-quicksearch');
   $element->setValue($value);
} 
```

希望这有助于您入门。刚开始时，理解 BDD 框架可能会很困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-29T12:43:30.147

在 behat 中输入文本到定位器

```
 public function inputValue($name)
{
  $searchField = $this->findField($locatorOfInput);
  $searchField = $searchField->setValue($name);
} 
```

Js 始终是一种选择 :) 使用 js 在 behat 中输入文本到定位器

```
public function inputValue($name)
{       
   $this->getDriver()->executeScript("$('$searchFieldLocator').val('".$name ."')";
} 
```

获取同类元素的父定位器

```
 public function deleteSecondElement()
{
   $status= $this->findAll('css', $locator);
   $status= $status[1]->click();
} 
```

# zend-framework2 - 在 ubuntu 服务器 12.04.01 LTS 上安装 zf2

> ID：14200933
> 
> 赞同：5
> 
> 时间：2013-01-07T17:25:47.213
> 
> 标签：zend-framework2, ubuntu-server

尝试使用在我的 ubuntu 服务器上安装 ZF2

```
curl -s https://getcomposer.org/installer | php && ./composer.phar create-project zendframework/skeleton-application /var/www/skeleton-app dev-master 
```

最后我也尝试添加`@dev`，但我不断收到以下错误：

“找不到稳定性稳定的包 zendframework/skeleton-application/var/www/skeleton-app。”

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-22T16:59:45.517

添加`-sdev`

于是就变成了

```
php composer.phar create-project -sdev --repository-url="http://packages.zendframework.com" zendframework/skeleton-application path/to/install 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:11:25.943

感谢 Xerkus

来自[https://github.com/zendframework/ZendSkeletonApplication#using-composer-recommended](https://github.com/zendframework/ZendSkeletonApplication#using-composer-recommended)

我想应该阅读更多关于它的信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-16T06:16:36.743

只需将 --stability="dev" 添加到您的第二个命令。

我使用的命令如下：

php /path/to/phar/composer.phar create-project --stability="dev" --repository-url="https://packages.zendframework.com" zendframework/skeleton-application skel-app/

# android - Android无限滚动网格，适配器非要无限增长吗？

> ID：14200934
> 
> 赞同：5
> 
> 时间：2013-01-07T17:25:47.560
> 
> 标签：android, infinite-scroll, android-adapter, endlessadapter

我在 Android 上实现了一个简单的无限滚动 GridView。我有以下组件：

1.  一个带有 onScrollListener 的 GridView，每当 GridView 滚动到最底部时，我都会启动一个 AsyncTask 以将更多项目加载到我的适配器中。
2.  一个适配器，它附加从 AsyncTask 获取的项目，并触发 notifyDataChanged() 以便 GridView 可以自行刷新。

这似乎工作正常，除非在这种情况下适配器无限增长......我的意思是每当用户滚动到最后时，我都会将项目附加到这个适配器，这似乎是一个内存问题。

实现无限适配器的正确方法是什么？我正在寻找概念，而不是为我做的第三方罐子。

谢谢

**解决方案**
标记的答案具有正确的理论。我的实现将加载的数据备份到sqllite数据库中，所以整体流程是：在一个线程中从互联网下载数据，在一个线程中解析并将数据存储到数据库中，在UI线程上触发notifyDataChanged。
适配器的 getCount() 方法只是简单地从数据库中选择 count(id)，然后一次从数据库中检索一批对象到内存中供适配器使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:38:01.713

是的，一般来说，如果你`GridView`是无限的，那么你`Adapter`就是无限的。如果您只是将更多数据加载到内存中的幼稚实现，那么您肯定会在某些时候遇到内存问题。为了解决这个问题，您必须在某个时候发布旧数据。

假设您的适配器可以访问一些“无限”存储，它从（通常是互联网）获取数据，您可以考虑设置数据的最大大小（以字节为单位或以项目计数为单位）以保存在您的适配器的内存中。当您超过最大大小时，您可以从内存中清除旧项目。如果再次请求这些旧项目，则从无限存储而不是从内存中再次加载它们（并且可能会从内存中清除其他旧项目）。

这意味着您的`GridView`项目是从`Adapter`将数据存储在某种缓存中（[`LruCache`](http://developer.android.com/reference/android/util/LruCache.html)可能在这里有用）中构建的，该缓存由某些（可能是外部的）存储支持。您还可以在内存缓存和外部存储之间放置一个磁盘缓存。

# javascript - Javascript / jQuery 不适用于模糊

> ID：14200938
> 
> 赞同：1
> 
> 时间：2013-01-07T17:26:11.890
> 
> 标签：javascript, jquery

**我在表单上有以下输入：**

```
<input class="password" type="password" title="Your Password" name="password" size="30" autocomplete="off" value="" >

<input class="confirmpass" type="password" title="Confirm Password" name="pass_confirm" size="30" autocomplete="off" value="" >
  <div class="jresults" align="left" style="display:none;" id="confirmdata"></div>

  <input class="showpassword" type="checkbox" title="Show Passwords"> 
```

**这是显示密码功能：**

```
 //Show password function
$(".showpassword").click(function()
    {
    var change = $(this).is(":checked") ? "text" : "password";
    var password = $("input.password"); 
    var showpass = $("<input type='" + change + "' />")
                .attr("id", password.attr("id"))
                .attr("title", password.attr("title"))
                .attr("name", password.attr("name"))
                .attr("size", password.attr("size"))
                .attr('class', password.attr('class'))
                .val(password.val())
                .insertBefore(password);
            password.remove();
            password = showpass;
    var confirmpass = $("input.confirmpass");
    var showconfirm = $("<input type='" + change + "' />")
                .attr("id", confirmpass.attr("id"))
                .attr("title", confirmpass.attr("title"))
                .attr("name", confirmpass.attr("name"))
                .attr("size", confirmpass.attr("size"))
                .attr('class',confirmpass.attr('class'))
                .val(confirmpass.val())
                .insertBefore(confirmpass);
            confirmpass.remove();
            confirmpass = showconfirm;     
    }); 
```

**这是确认密码匹配功能：**

```
//match passwords entered
$('.confirmpass').blur(function()
    {
    var Pass = $('.password').val();
    var cPass = $('.confirmpass').val();
    $('#confirmdata').css("display","none");
    if(cPass.length>5)
      {
        if (Pass != cPass)
            {
                $('#confirmdata').css("display","block");
                $('#confirmdata').css("color","#ff0000");
                $('#confirmdata').html("No Match");
                $("input.confirmpass").focus();
            return; 
            }
        $('#confirmdata').css("display","block");
        $('#confirmdata').css("color","#00BB00");
        $('#confirmdata').html("Matched");
     }
    }); 
```

**问题：**

如果密码不匹配并且我更正了它们，则模糊上的确认密码将按预期再次运行.....**这是正确的**

现在，如果密码不匹配并且我单击复选框以显示密码然后更正，则确认密码将**不会**在模糊时再次运行。

谁能看到可能导致这种情况的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:38:09.640

单击复选框时，您正在向页面插入动态内容，这就是模糊在此之后不起作用的原因。替换函数声明

```
$('.confirmpass').blur(function() 
```

和

```
$(document).on('blur', '.confirmpass', function() 
```

# java - 为抽象类实现 clone()、equals() 或 hashCode() 有意义吗？

> ID：14200941
> 
> 赞同：5
> 
> 时间：2013-01-07T17:26:22.893
> 
> 标签：java, clone, abstract-class, equals, hashcode

我是Java编程的导师。我的学生目前被迫（不是我，而是一个不清楚的任务）为一个抽象类实现[clone()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#clone%28%29)、[equals()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)和[hashCode() 。](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)

为抽象类实现 clone()、equals() 或 hashCode() 有意义吗？你能举一个有意义的例子吗？

我可以想象，当您有抽象类 a 的一些子类 x、y、z 时，这是有道理的。这些子类可能仅在方法的实现上有所不同，因此您不需要将这三个方法实现三次。但我无法想象会出现这种情况的任何情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:29:40.483

我不会实施`clone()`.

`equals()`但是实现,`hashCode()`并`toString()`为所有子类提供默认行为是有意义的。如果孩子没有添加新的班级成员或根据需要补充，他们可以选择使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:27:51.347

*误读了你的问题，并认为你也问过`toString`- 同样的推理仍然适用*

例如，基本上迭代集合并以用户友好的方式打印它的实现`AbstractCollection`。`toString()`

直接子类：

```
AbstractList, AbstractQueue, AbstractSet, ArrayDeque, ConcurrentLinkedDeque 
```

所以所有集合、列表和队列都共享该`toString`方法。如果需要，每个子类都可以自由地重新实现它。

作为另一个示例，`equals`实现低一级（在 AbstracList/Set 等中）。

另一方面，`clone`是在最终实现中实现（例如 ArrayList），而不是在抽象类中。

底线：有时它是有意义的，但有时它没有，它可能不应该是适用于所有情况的义务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T17:42:31.397

1)`clone()`方法非常有用，当你需要实现某种对象的深度复制，同时你不能只使用对这个对象的引用，而是需要它们的新实例。所以，重写这个方法是有意义的。

2)`equals()`并且`hashCode`是两个重要的方法，当您需要特殊行为时必须重写`HashSet/HashMap`它们，其功能取决于这些方法的实现。因此，覆盖它们也是有道理的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T19:50:21.703

一个主要问题`clone()`是有两种实现方式，派生类中的正确实现取决于其父类的功能。

如果父类及其所有祖先调用`super.clone()`直到调用到达`object.clone()`，那么派生类要做的正确的事情是调用`super.clone`然后替换任何封装目标对象的可变状态而不是它们的身份的“添加”成员，用封装相同状态的新对象。如果派生类不包含任何封装可变对象状态的附加成员，则派生类不需要做任何事情，`clone`而可以简单地使用父类的实现。

实现类的另一种方法`clone()`是让它包含一个构造函数，该构造函数接受其自己类型的参数，并链接到父构造函数，该构造函数同样执行此操作，然后将所有适当的属性“新”复制到类型中传入实例到新实例。这种方法的一个优点是即使基类以`clone`这种方式实现它也可以工作。然而，这种方法有两个缺点：

1.  每个派生类型都必须重新实现 clone()，无论添加的成员是否封装了可变状态
2.  每个派生类型都必须使用这种方法实现 clone()，而不是调用 super.clone()。

请注意，如果一个类型`clone()`通过调用来实现，`super.clone()`但有一个祖先没有，那么生成的对象最终将是父类型而不是派生类型——不是`clone()`应该采取的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T17:31:51.887

方法 clone()、equals() 和 hasCode() 通常必须在实现该抽象类的类中实现，因为它们需要抽象类中不存在的字段。

然而，在某些情况下，equals()、hascode() 和可能的 clone() 在抽象类中实现是有意义的。（例如，equals() 在抽象容器类中有意义，例如 Collections 等）

对于 hashCode() 和 clone() 我更怀疑这是否有意义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T19:09:24.230

能说得通吗？

*   如果抽象类想要修改标准行为，特别是对于子类无法访问的状态，覆盖`clone()`是有意义的。`clone()`
*   如果抽象超类正在执行关于平等行为的合同，则覆盖`equals()`并`hashCode()`有意义。该契约可以由它自己指定，也可以由它实现的超类或接口指定。

它是否合适，即我们是否想要设计一个抽象超类来覆盖这些？

*   正如答案中其他地方所提到的，该`clone()`机制本身很少适用。一种适当的实现可能是显式地抛出 a`CloneNotSupportedException`并生成它`final`，并以这种方式防止子类实现`Cloneable`。
*   对于`equals()`和`hashCode()`明智的情况也是适当的情况。如果一个抽象超类本身可以满足平等契约规范，它应该这样做。并且它应该制定`equals()`和`hashCode()`方法`final`，以防止LSP违规。我会引用 Josh Bloch 的话：

> 没有办法在保留 equals 契约的同时扩展一个可实例化的类并添加一个值组件——Effective *Java 2nd ed。*

# c - 在 C 中构建 HTTP 服务器需要了解什么？

> ID：14200944
> 
> 赞同：-1
> 
> 时间：2013-01-07T17:26:25.253
> 
> 标签：c, http, webserver, requirements

有人说，为了构建 HTTP 服务器，我应该遵循[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616)标准。没关系，但是作为一个全新的 C 开发人员，我想知道我需要哪些模块和技术来实现 HTTP 协议来处理 html、css、js 和图像。

我并不是要重新发明井，我只需要一个起点来学习 C。我的经验是，以项目方式构建有用的东西是学习新东西的最佳方式。

PS如果可能的话，我想从头开始构建它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T17:33:13.490

HTTP 服务器是一个简单的基于文本的服务器；所有协议消息都以纯文本形式发送。此外，它是无状态的（即不需要记住任何关于先前连接的信息——处理每个请求，就好像它是一个新请求一样）。考虑到这些概念，您基本上需要了解如何`socket programming`工作（以及如何在 C 中很好地编程）。套接字编程还取决于您使用的库（通常`POSIX`用于非 Windows 系统，否则`WinSock2`用于 Windows）。

其他功能（HTML、js 等）由浏览器处理。服务器只是将数据发送到客户端（通常通过 TCP，除非您也在重新创建传输协议）。

此外，可以说套接字编程（在 C 和 C++ 中）的最佳参考是[Beej's Guide](http://beej.us/guide/bgnet/)

**编辑**

在非常原始的层面上，HTTP 服务器的伪代码如下所示：

```
while(1) {
  client = accept(); // Receive some connection
  recv(client, req); // Receive the request from the client
  // ... Do some HTTP request processing ...
  send(client, resp); // Send the client the response/data
} 
```

也就是说，我只是重新阅读了您的帖子，也许套接字编程不是学习 C 的最佳点。并不是说它不能完成（我认为这也是我开始的地方，尽管现在我看到了更简单的路线） ，只是更难将你的头脑围绕在语言和网络层上。为了习惯指针、内存管理、结构等的概念，还有许多其他的东西需要创建。您可以尝试创建简单的文件读取器/写入器，创建某种库存/计算脚本。我只是建议这些，因为对于已经熟悉 C 的第一次用户来说，套接字 API 看起来很陌生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T17:33:03.380

html、js、css 和图像由浏览器处理。服务器只需要交付内容。只要这没有它自己的动态，它就可以被处理。剩下的故事与 C 语言没有太大关系。

# jquery - 刷新可排序 div 后可排序不工作

> ID：14200950
> 
> 赞同：0
> 
> 时间：2013-01-07T17:26:47.687
> 
> 标签：jquery, html, refresh, jquery-ui-sortable

我有 2 个 jQuery 函数，一个允许排序，另一个允许从列表中的 div 中删除。一切正常，直到我删除其中一个列表项。然后拖动停止工作，直到我刷新页面。

我也遇到了删除功能不会立即删除单击要删除的div的问题，如果单击多个，只会删除最近的一个。这就是为什么在下面的删除函数中刷新 div 的原因。

任何帮助将非常感激！

JQuery 可排序

```
 $(document).ready(function(){   
          function slideout(){
      setTimeout(function(){
      $("#response").slideUp("slow", function () {
          });

    }, 2000);}

        $("#response").hide();
        $(function() {
        $("#list ul").sortable({ opacity: 0.8, cursor: 'move', update: function() {

                var order = $(this).sortable("serialize") + '&update=update'; 
                $.post("updateReadingList.php", order, function(theResponse){
                    $("#response").html(theResponse);
                    $("#response").slideDown('slow');
                    slideout();
                });                                                              
            }                                 
            });
        });

    }); 
```

jQuery删除函数

```
 $(document).ready(function(){ $(function() {
        $( '#reading' ).on( 'click', 'a.deletefromrl', function(){
            $(this).closest('li').fadeOut('slow');
            var order = $('#list ul').sortable("serialize") + '&update=update' + '&id=' + $(this).attr('data-storyid'); 
            $.post("deletefromReadingList.php", order, function(theResponse){
                    $("#response").html(theResponse);
                }); 
                var auto_refresh = setInterval(
                    function()
                    {
                        $('ul').load('reloadReadingList.php');
                    }, 0);  
        })
    })
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:21:10.300

一种解决方案是将绑定操作放在它自己的函数中并在页面加载时调用它，然后每次重新加载列表时调用它：

**编辑：** 我不确定最后一个出了什么问题，但这似乎对我有用：

```
$(document).ready(function(){   
  function slideout(){
      setTimeout(function(){
      $("#response").slideUp("slow", function () {
          });

    }, 2000);}

    function bindSortable()
    {
        $("#list ul").sortable(
        { 
            opacity: 0.8, 
            cursor: 'move', 
            update: function() {

                var order = $(this).sortable("serialize") + '&update=update'; 
                $.post("updateReadingList.php", order, function(theResponse){
                    $("#response").html(theResponse);
                    $("#response").slideDown('slow');
                    slideout();
                });                                                              
            }                                 
        });
    }

    bindSortable();

    $( '#reading' ).on( 'click', 'a.deletefromrl', function(){
        $(this).closest('li').fadeOut('slow');
        var order = $('#list ul').sortable("serialize") + '&update=update' + '&id=' + $(this).attr('data-storyid'); 
        $.post("deletefromReadingList.php", order, function(theResponse){
                $("#response").html(theResponse);
            }); 
            var auto_refresh = setInterval(
                function()
                {
                    $('ul').load('reloadReadingList.php', function()
                    {
                        bindSortable();
                    });
                }, 0);  
    })
}); 
```

# ruby-on-rails - 轮询更改会在 rails 中生成重复的结果

> ID：14200951
> 
> 赞同：0
> 
> 时间：2013-01-07T17:26:48.337
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jquery, ruby-on-rails-3.2

我有一个问题的答案列表。

每个响应都有自己的时间戳，在 HTML 的属性中转换为整数（通过`to_i`） 。`data-timestamp`

我`data-timestamp`从最近的响应中提取值，然后将其传递给控制器​​以每 5 秒查询一次数据库以获取任何新响应。

问题是它不断返回最后一个响应。反复（即它永远不会停止）。

我已经追踪到这样一个事实，即当我将`created_at`数据库（日期时间格式）转换为整数然后再转换回 Rails 中的时间对象时，它会切断毫秒，即：

最后一个响应的实际时间戳：

```
2013-01-07 14:30:00.610491 
```

Rails 用来查询数据库的图：

```
2013-01-07 14:30:00.000000 
```

关于如何解决这个问题的任何想法？

**编辑：根据要求，这是我的代码：**

这是我用来从最后一个响应中获取最新时间戳的方法：

```
<div class="row response" data-time="<%= @response.created_at.to_i %>"> 
```

然后我通过 Javascript 将其作为参数传递给控制器​​（响应按时间倒序排列，因此最近的响应排在第一位）：

```
function updateResponses() {
    var after = $('.response:first').attr('data-time');
    $.getScript("/responses/polling.js?after=" + after);
} 
```

然后在控制器中查询在此日期之后创建的所有响应：

```
def polling
  @responses = Response.where("created_at > ?", Time.at(params[:after].to_i))
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:36:09.597

我用过

```
@latest = YOURMODEL.where("created_at > ?", Time.at(params[:after].to_i + 1)) 
```

过去在轮询 Rails 的变化时取得了成功。

抱歉，如果没有看到更多您的代码，将无法再提供帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T08:55:46.473

好的，我设法通过以下方式解决了这个问题：

我更改了 div 类，使其以毫秒为整数输出时间

```
<div class="row response" data-time="<%= @response.created_at.utc.strftime("%s%6N").to_i %>"> 
```

（注意转换 UTC - 这对于防止 Rails 为您提供与您为应用程序设置的时区相对应的值很重要。默认情况下，所有日期时间都作为 UTC 保存在数据库中。）

然后我将它转换为控制器中的 BigDecimal 并除以给我正确的小数精度。然后我用这个数字来设置 Time.at：

```
def polling
    undivided_millisecond_epoch_time_in_integer = params[:after]
    undivided_millisecond_epoch_time_in_decimal = (undivided_millisecond_epoch_time_in_integer).to_d
    divided_millisecond_epoch_time_in_decimal = (undivided_millisecond_epoch_time_in_decimal / 1000000).to_d
    @responses = Response.where("created_at > ?", Time.at(divided_millisecond_epoch_time_in_decimal))
end 
```

这给了我以毫秒为单位的正确查询：

```
Response Load (0.6ms)  SELECT "responses".* FROM "responses" WHERE ( created_at > '2013-01-08 08:49:28.832908') 
```

# php - 加载视图而不渲染

> ID：14200952
> 
> 赞同：1
> 
> 时间：2013-01-07T17:26:52.687
> 
> 标签：php, symfony-2.1

我的 Symfony 项目中有一个 Twig 扩展，它呈现一个 twitter 小部件。目前，在我的扩展中，我有这个：

```
public function twitter($handle, $number = 5)
{
    return "<div data-tweet-row=\"&lt;div&gt;&lt;a  href='http://twitter.com/{screen_name}/status/{id}'&gt;{tweet}&lt;/a&gt;&lt;span class='datetime'&gt;{datetime}&lt;/span&gt;&lt;/div&gt;\" data-twitter-header=\"&lt;div class='header'&gt;&lt;img src='https://api.twitter.com/1/users/profile_image?screen_name={screen_name}&amp;size=normal' /&gt;&lt;h4&gt;&lt;a href='http://twitter.com/{screen_name}'&gt;@{screen_name}&lt;/a&gt;&lt;/h4&gt;&lt;/div&gt;\" id=\"twitter\">&nbsp;</div><script>$('#twitter').biff_twitter({screen_name:'$handle',count:$number});</script>";
} 
```

但是我真的不喜欢这个解决方案，我宁愿将 HTML 保存在下面`views`，然后从我的扩展中加载文件。

我可以使用以下方法从扩展中访问容器：

```
private $container;

public function __construct(ContainerInterface $container){
    $this->container = $container;
} 
```

所以我需要类似的东西

```
$view_file = $this->container->get('...')->view('InternalSocialBundle:twitter_placeholder.html.twig') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:25:27.653

当然你完全正确。您要查找的服务名称是`templating`。所以这对你有用：

```
$html = $this->container->get('templating')->render('InternalSocialBundle:twitter_placeholder.html.twig'); 
```

**编辑：**

这是一个工作示例：

```
class FooExtension extends \Twig_Extension
{
    private $container;

    public function setContainer(\Symfony\Component\DependencyInjection\Container $container)
    {
        $this->container = $container;
    }

    public function foo()
    {
        return $this->container->get('templating')->render('CogiPortfolioBundle:Portfolio:tmp.html.twig');
    }

    public function getFunctions()
    {
        return array(
            'foo' => new \Twig_Function_Method($this, 'foo', array('is_safe' => array('html')))
        );
    }

    /* (...) */
} 
```

服务定义：

```
<service id="cogi.foo.ext" class="Cogi\PortfolioBundle\TwigExtension\FooExtension">
    <call method="setContainer">
        <argument type="service" id="service_container" />
    </call>
    <tag name="twig.extension" />
</service> 
```

并且知道如果我调用任何模板 {{ foo() }} 它会从`tmp.twig.html`. 另一方面 - 如果在我的扩展中我将“路径”放入`render`方法中不存在的模板，则会引发异常。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:44:16.183

好的，所以我解决了我遇到的问题，但是我没有完全测试它是我的错。@Cyprian 的解决方案在您没有做任何复杂的事情并且只是按预期使用扩展时确实工作得很好。

我的问题是我正在使用这个从数据库加载模板的[评估扩展](https://stackoverflow.com/a/10945264/475125)，因此它是 twig 正在执行所有加载（因此只是将第一个参数解释`$this->render()`为 a `string`- 它没有尝试加载它使用 symfony 命名模式）。

这意味着在实际的树枝文件中使用上述方法时，我的扩展程序可以正常工作，但在我使用`{{body|evaluate}}`扩展程序时却不行。

该问题的解决方案如下：

在我的 services.yml 文件中，我不仅需要`service_container`，而且`twig.loader`看起来很喜欢：

```
class: Test\SocialBundle\Twig\SocialExtension
arguments: [@service_container,@twig.loader]
tags:
    -  { name: 'twig.extension' } 
```

然后我把它作为树枝扩展构造函数：

```
public function __construct(ContainerInterface $container, \Symfony\Bundle\TwigBundle\Loader\FilesystemLoader $loader)
{
    $this->container = $container;
    $this->loader = $loader;
} 
```

在我的`getFilters()`定义中：

```
public function getFilters()
{
  return array(
    'twitter' => new \Twig_Filter_Method($this, 'twitter',array(
        'is_safe' => array(
            'evaluate' => true
            ),
        'needs_environment' => true,
        )
    )
  )
} 
```

最后，在我返回渲染输出之前：

```
public function twitter(\Twig_Environment $environment, $id)
{
    $social_item = array(); // get my data here from my service;
    $environment->setLoader($this->loader);
    return $environment->render("TestSocialBundle:Front:twitter_placeholder.html.twig",array());
} 
```

这确保了我一直在使用`\Symfony\Bundle\TwigBundle\Loader\FilesystemLoader`加载器，而不是`\Twig_Loader_String`在我的案例中使用的加载器。

# javascript - 显示用户输入 onChange

> ID：14200956
> 
> 赞同：0
> 
> 时间：2013-01-07T17:26:57.947
> 
> 标签：javascript, onchange

每当输入框发生更改时，我都会尝试通过 id 在页面的其他位置显示数字用户输入，但它不起作用。这是我一直在使用的

```
 function updateTotalCashPaid() {
            var x;
            var cashInput = document.getElementById("cashPaid").value;
            x = cashInput;
            document.getElementbyId("totalCashPaid").innerHTML = x;
        }   

<p style="padding-left:10%"><input type="Number" id="cashPaid" name="cashPaid" step=".01" min="0" onchange="updateTotalCashPaid()"></p>

<p id="totalCashPaid" style="display: inline; ">replace with User Input</p> 
```

有谁看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:33:43.750

我看到一个简单的错字。而不是`getElementById`，你`getElementbyId`有`document.getElementbyId("totalCashPaid").innerHTML = x;`

# php - 通过 $this 访问静态方法

> ID：14200961
> 
> 赞同：0
> 
> 时间：2013-01-07T17:27:23.127
> 
> 标签：php, static-methods

我有以下内容：

```
class HP_Utils {
/**********************************************************************/
public static function getAction()
/**********************************************************************/
{
  if( isset( $_GET[ 'action' ] ) ) {
    return $_GET[ 'action' ];
  }
  else if ( isset( $_POST[ 'action' ] )) {
    return $_POST[ 'action' ];
  }
}
/**********************************************************************/
} 
```

然后在其他班级：

```
$this->utils = $this->load( 'helper', 'Utils' );
$action = $this->utils::getAction(); <============== ERROR 
```

装载机：

```
abstract class MController {
/**********************************************************************/
protected function load( $type, $className ) {
  switch( $type ) {
    case 'model':
      $name = 'MD_' . $className;
      break;
    case 'view':
      $name = 'VW_' . $className;
      break;
    case 'helper';
      $name = 'HP_' . $className;
      break;
  }
  $path = $type . '/' . $name . '.php';
  include( $path );
  return new $name;
} 
```

给我错误：

> PHP 解析错误：语法错误，第 11 行 /home/jorgee/www/menu/controller/CT_Menu.php 中的意外 '::' (T_PAAMAYIM_NEKUDOTAYIM)

显然我对静态方法的访问很糟糕，但我认为这就是方法，有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:29:24.763

正确的方法是替换它：

```
$action = $this->utils::getAction(); <============== ERROR 
```

有了这个：

```
$action = HP_Utils::getAction(); 
```

我相信您也可以在 PHP 中调用静态方法，就好像它是一个实例方法一样，如下所示：

```
$action = $this->utils->getAction(); 
```

但是第一个版本通常更好，因为它非常清楚您实际上是在调用静态方法而不是实例方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:32:27.347

`$this->load()`返回一个**对象**，而不是一个类。因此，在调用时`$this->utils::getAction()`，您会收到错误消息。

我会说直接使用类名`HP_Utils::getAction()`，但是如果你需要它是动态的，你可以使用`call_user_func`：

```
abstract class MController {
/**********************************************************************/
protected function load( $type, $className ) {
  switch( $type ) {
    case 'model':
      $name = 'MD_' . $className;
      break;
    case 'view':
      $name = 'VW_' . $className;
      break;
    case 'helper';
      $name = 'HP_' . $className;
      break;
  }
  $path = $type . '/' . $name . '.php';
  include( $path );
  return $name;
}

//The actual calling code :
$this->utils = $this->load( 'helper', 'Utils' );
$action = call_user_func($this->utils . '::getAction()'); 
```

请注意，这是调用某些方法的一种非常丑陋的方式。你应该问自己这里是否有设计问题。

# java - Java Content-MD5 标头不匹配

> ID：14200968
> 
> 赞同：0
> 
> 时间：2013-01-07T17:27:41.600
> 
> 标签：java, amazon-web-services, md5, amazon

我正在尝试将文件中的内容发送到 Amazon db。我生成的 MD5 哈希与亚马逊生成的不匹配。我究竟做错了什么？

```
 try {
        FileInputStream fis = new FileInputStream("upload.txt");                
        MessageDigest md = MessageDigest.getInstance("MD5");
        byte[] buffer=new byte[8192];
        int read=0;
        while( (read = fis.read(buffer)) > 0)
                md.update(buffer, 0, read);
        byte[] md5 = md.digest();
        BigInteger bi=new BigInteger(1, md5);
        String output = bi.toString(16);
        System.out.println(output);
        SubmitFeed.submit(fis, output);
} catch(Exception e) { 
  // removed: not relevant to question
} 
```

亚马逊向我报告的哈希似乎有不同的模式。

我的： ...5856911dca2be1 ...

亚马逊：...AmY7PhCfg==

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:29:18.480

看起来亚马逊哈希使用的是 base64，而您使用的是十六进制。如果您使用 base64 库（[例如这个](http://iharder.net/base64)），您应该没问题。（我无法用您帖子中的值验证这一点，因为它们不完整。如果它不起作用，我会感到惊讶。）

（我还建议*不要*将`BigInteger`二进制转换为十六进制。它恰好能够做到这一点，模前导零，但这不是它的目的。）

# hibernate - createEntityManagerFactory() 与现有 JTA 事务的行为

> ID：14200969
> 
> 赞同：1
> 
> 时间：2013-01-07T17:27:48.573
> 
> 标签：hibernate, jakarta-ee, jpa

在我写的一个 jar 中，有一个调用，`Persistence.createEntityManagerFactory()`使用 Glassfish/EclipseLink 配置可以正常工作。但是，如果我将相同的代码部署到使用 Hibernate 作为持久性提供程序的 JBoss 应用程序服务器，我会收到以下错误消息：

```
java.sql.SQLException: You cannot set autocommit during a managed transaction! 
```

事实上，jar 是从一个开放的事务中调用的，我想知道这样做是否违反了一些现有的标准。

顺便提一句。其他人在[这里](https://hibernate.onjira.com/browse/HHH-6651?page=com.atlassian.jira.plugin.system.issuetabpanels%3achangehistory-tabpanel)提交了错误报告。

# nuget - 批量填充私有 NuGet 库

> ID：14200970
> 
> 赞同：1
> 
> 时间：2013-01-07T17:27:50.680
> 
> 标签：nuget, nugetgallery

我们已经设置了自己的 NuGet 库 - [https://github.com/NuGet/NuGetGallery（NuGet.Server](https://github.com/NuGet/NuGetGallery)对我们没有好处，因为我们的包数量很差，性能很差）。

有没有办法批量上传包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:00:55.340

Jeff Handley 在这里有一个帖子[http://jeffhandley.com/archive/2012/12/13/Bulk-Publishing-NuGet-Packages.aspx](http://jeffhandley.com/archive/2012/12/13/Bulk-Publishing-NuGet-Packages.aspx)他创建了 PS 模块[https://github.com/jeffhandley/JeffHandley.NuGetPS](https://github.com/jeffhandley/JeffHandley.NuGetPS)来帮助完成这项任务。

hth

# java - 从java中的标准输入读取字符串和原始字节

> ID：14200971
> 
> 赞同：0
> 
> 时间：2013-01-07T17:27:50.350
> 
> 标签：java, inputstream

我有一个程序将通过 System.in 从外部源接收信息。有两种输入模式：行模式和原始模式。在行模式下，输入只是一系列 UTF-8 字符串，每个字符串都以换行符结束。在线路模式下的某个时刻，我会收到通知说我将要接收 N 字节的原始数据。那时输入切换到原始模式，我收到了 N 个字节的原始二进制数据，它们不是有效的 UTF-8 字符。在此之后，它返回到线路模式。

有没有办法在读取字符串和读取原始数据之间轻松切换？我唯一的想法是逐字节读取 InputStream 并在进行时转换为字符。有没有办法用多种类型的输入流包装 System.in？我觉得从两个不同的包装器中读取会导致问题。

**（固定）更新：**

我尝试了 parsifal 的建议，但遇到了问题。为了模拟切换输入模式，我修改了我的测试工具。（我意识到我的另一个进程最终也需要以这种方式输出。）我不知道问题是由发送端还是接收端引起的。当我在输出模式之间切换时，它似乎没有正确读取字节。此外，它总是出现相同的字节值。以下是一些代码摘录：

**FIX：** 问题是显然你不能太快地从 OutputStreamWriter 切换到 OutputStream。我在发送原始字节之前添加了一个 1ms 的睡眠命令，问题就解决了！

测试线束：

```
Process p = processList.get(pubName); //Stored list of started Processes
OutputStream o = p.getOutputStream(); //Returns OutputStream which feeds into stdin
out = new OutputStreamWriter(runPublisher.getOutputStream());

byte[] payload = new byte[25];
out.write("\nPAYLOAD\nRAW\n"); // "RAW\n" signals raw mode
out.write(String.valueOf(payload.length) + "\n");
out.flush();
Thread.sleep(1); //This fixed the problem I was having.
System.out.println(Arrays.toString(payload));
o.write(payload);
o.flush(); 
```

客户：

```
InputStreamReader inReader = new InputStreamReader(System.in);

while(true){
    try{
        if((chIn = inReader.read())!= -1){
            if(chIn == (int)'\n'){
                if(rawMode){
                    if(strIn.equals("ENDRAW"))
                        rawMode = false;
                    else{
                        System.out.println(strIn);
                        //Exception on next line
                        int rawSize = Integer.parseInt(strIn);
                        payload = new byte[rawSize];
                        int t = System.in.read(payload);
                        System.out.println("Read " + t + " bytes");
                        System.out.print(Arrays.toString(payload));
                    }
                }else if(strIn.startsWith("RAW")){
                    rawMode = true;
                }else {
                    // Do other things
                }
                strIn = "";
            }else
                strIn += (char)chIn;
        }else
            break;
    }catch(IOException e){break;}
} 
```

输出（在添加 Sleep 语句之前）如下所示：

测试线束：
[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]

客户端：
25
读取 9 个字节
[83, 72, 85, 84, 68, 79, 87, 78, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 , 0, 0, 0]

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:470)
    at java.lang.Integer.parseInt(Integer.java:514)
    at myClass.handleCommand(myClass.java:249) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:47:48.883

`System.in`您可以使用指定“utf-8”编码的包装`InputStreamReader`，然后逐字符读取。将字符累积到 a 中`StringBuilder`并在适当的时候分派（通常在您看到 时`'\n'`，但可能基于构建器的测试）。

当您要读取二进制数据时，只需从底层`InputStream`( `System.in`) 读取。根据`InputStreamReader`需要执行翻译，并且不缓冲数据。

您不想*在*堆栈中使用任何类型的缓冲流或读取器。这将消除任何使用`readLine()`方法的机会，至少如果您将自己限制在 JDK 类中。

* * *

根据您的最新更新进行编辑：

我认为您在生熟模式之间的切换有点可疑。如果我要实现这个，我会创建两个原始操作，`String readLine()`并且`byte[] readData(length)`. 第一个将字符累积到换行符，第二个读取固定缓冲区。然后你的主循环看起来像这样：

```
InputStream in = // ...
Reader rd = new InputStreamReader(in, "USASCII");  // or whatever encoding you use

while (true) {
    String command = readLine(rd );
    if (command .equals("RAW")) {
        int length = Integer.parseInt(readLine(rd ));
        byte[] data = readData(in , length);
        if (! readLine(rd ).equals("ENDRAW")) {
            throw // an exception that indicates protocol violation
        }
    }
    else // process other commands
} 
```

我还将把整个事情包装在一个围绕流构建的对象中，并且可能使用回调来分派数据包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:40:49.190

最好的选择可能是逐字节（使用`System.in.read()`）读取缓冲区，直到您点击 UTF-8 换行字节 0x0A，然后将该字节缓冲区转换为字符串（使用`new String(byte[] bytes, "UTF-8")`）。

请注意，`read()`在 InputStream 上调用将返回一个值从 0 到 255 的 int，您需要将其转换为一个字节。您可以在某种 Collection 中累积字节，然后使用标准 Collection 框架工具将其转换为数组以供 String 构造函数使用。

当您看到将要切换的指示器（可能是某种流内信号，某些特定字节）时，然后切换到您的原始字节读取代码。

# java - JSTL - 模数返回异常 - 由 (#2):java.lang.ArithmeticException: / 零引起

> ID：14200976
> 
> 赞同：0
> 
> 时间：2013-01-07T17:28:14.657
> 
> 标签：java, jsp, jstl

在我下面的代码中，它返回了一个来自第三列的异常。有没有更好的方法来编写此逻辑以防止发生异常？这是正在发生的异常：由 (#2):java.lang.ArithmeticException: / 零引起

这是可能导致问题的代码： 所以所有的客户都显示一个大于“0”的数字，所以使用第一个语句。在某些情况下，其他声明中的客户返回为“0”。因此，对于模数，您不能将数字除以“0”，因此会引发异常。写这个语句的更好方法是什么？

```
<c:choose>
       <c:when test="${total%columns != 0}">
           <c:set var="columnL" value="${total/columns + 1}"/>
           <c:set var="columnL" value="${fn:substringBefore(columnL, '.')}"/>
       </c:when>
       <c:otherwise>
           <c:set var="columnL" value="${total/columns}"/>
           <c:set var="columnL" value="${fn:substringBefore(columnL, '.')}"/>
       </c:otherwise>
   </c:choose> 
```

每个请求添加的调试：1\. ${Total%columns != 0}
2\. ${Total/columns + 1}
3\. ${Total/columns}

添加了调试，并且 1 部分返回为：1\. true, 2\. 11.333333333333334, 3\. 10.333333333333334

另一部分又回来了：（这就是导致问题的原因）1\. false, 2\. 9.0, 3\. 8.0

正如您所注意到的，看起来两者之间正在生成浮点数，这会导致异常。

这是完整代码的概述。

```
<dsp:page>

   <c:set var="total" value="${fn:length(customers)}"/>
   <c:set var="columns" value="3"/>
   <c:set var="cCount" value="1"/>
   <c:choose>
       <c:when test="${total%columns != 0}">
           <c:set var="columnL" value="${total/columns + 1}"/>
           <c:set var="columnL" value="${fn:substringBefore(columnL, '.')}"/>
       </c:when>
       <c:otherwise>
           <c:set var="columnL" value="${total/columns}"/>
           <c:set var="columnL" value="${fn:substringBefore(columnL, '.')}"/>
       </c:otherwise>
   </c:choose>

   <c:forEach begin="1" end="${columns}" var="cCount" varStatus="status">
   <c:set var="begin" value="${(cCount -1) * columnL}"/>
   <c:choose>
       <c:when test="cCount == columns">
           <c:set var="end" value="${total - 1}"/>
       </c:when>
       <c:otherwise>
           <c:set var="end" value="${(cCount) * columnL - 1}"/>
       </c:otherwise>
   </c:choose>
       <div id="dColumn${cCount}" class="dCol">
       <c:set var="cCount" value="${cCount+1}"/>
       <c:forEach items="${customers}" begin="${begin}" end="${end}" var="customer"    varStatus="status">
       <div class="link">
               <nm:a href="${customer.templateURL}">
                   <dsp:param name="param1" value="${customer.id}" />
                   <dsp:param name="param2" value="${customer.parentId}" />
                   <dsp:param name="param3" value="${customer.masterId}" />

               </nm:a>
           </div>
       </c:forEach>
       </div>
   </c:forEach>
   </dsp:page> 
```

# ruby-on-rails - 如何预编译页面特定资产

> ID：14200985
> 
> 赞同：1
> 
> 时间：2013-01-07T17:28:42.810
> 
> 标签：ruby-on-rails, heroku

我使用以下代码在我的 rails 应用程序的特定页面上包含自定义 css 和 javscript。

```
<% content_for :header do -%>
  <%= stylesheet_link_tag 'mycustompagecssfile' %>
  <%= javascript_include_tag 'customjavascriptfile' %>
<% end -%> 
```

它可以在 localhost 上运行（前提是我在应用程序布局中包含了产量`<%= yield(:header) if content_for(:header) %>`），但是当我将它推送到 Heroku 时，它会破坏应用程序。

因为那些 css 和 javascript 文件只包含在一个页面上，所以我没有将它们包含在清单文件中（因为我不希望这些样式出现在任何地方），事实上，我删除了`require tree`代码

```
//= require jquery
//= require jquery_ujs
//= require common
//= require live-comment-preview
//= require_self 
```

所以我想知道我是否预编译了资产（我需要为 heroku 做这些）然后这些特定于页面的 css 和 javascript 文件没有被预编译，这导致 heroku 应用程序中断（我猜）

heroku 日志说存在内部服务器错误

```
Processing by HomeController#index as HTML
2013-01-07T17:13:58+00:00 app[web.1]: Completed 500 Internal Server Error in 25ms 
```

请注意，我很确定是资产（而不是 ruby​​ 代码）导致了问题，就好像我在页面中这样做（即删除资产）没有问题

```
<% content_for :header do -%>

 <% end -%> 
```

谁能告诉我如何预编译那些特定于页面的资产？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:48:59.687

我必须在 config/environments/production.rb 中预编译特定于页面的资产

```
config.assets.precompile += [ "pagespecific.js", "pagespecific.css"] 
```

# maps - Google Maps DirectionsRenderer 更改可拖动

> ID：14200988
> 
> 赞同：1
> 
> 时间：2013-01-07T17:29:07.340
> 
> 标签：maps, renderer, directions

如果可以通过拖动更改路线，我想让用户更改。

该选项在 DirectionsRenderer 中启用

```
var rendererOptions = {
draggable: true
};
directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions); 
```

使用复选框，我让用户更改可拖动性。

```
function allowMove() {
if (directionsDisplay.draggable) {
    directionsDisplay.draggable = false;
} 
else {
    directionsDisplay.draggable = true;
}
;
} 
```

但它只在一个动作（拖动）之后改变（并且只在一个动作之后禁用它）

我发现了一个事件**draggable_changed**但我不知道在这些事件中该怎么做..

如果可以点击路线，那就太好了，因为我正在显示点击位置的高度，但它不会在路线上工作（也禁用拖动，但比使用更近）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T14:03:42.090

你试过 `directionsDisplay.setOptions({draggable: !directionsDisplay.draggable});`吗？

# yui - Y.delegate 在第二次点击时执行两次。如何停止？

> ID：14200992
> 
> 赞同：1
> 
> 时间：2013-01-07T17:29:16.010
> 
> 标签：yui, yui3

我正在使用 YUI3 并且很难找到问题？

我有这个

```
YUI().use("modules",function(Y){  
    function Actionfunction(e){  
        //doing some stuff  
    }  
    Y.delegate("click",Actionfunction, "body","#myid li");  
}); 
```

当我单击 li 项目**Actionfunction**执行一次但第二次单击同一个 li 项目或其他 li 项目**Actionfunction**执行两次，依此类推。

**每次点击 li 项目时，动作函数**应该只执行一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T22:52:39.900

我怀疑委托订阅发生了两次。我会在添加订阅的代码中放置一个断点，看看它是否被调用以响应其他一些操作，或者响应第一次点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:03:28.833

我将专门为此示例加载事件模块。我也会参考`Y.Event.delegate()`.

[这个（jsfiddle示例）](http://jsfiddle.net/4DWzE/)有效并且更容易阅读和理解。

恐怕我无法解释为什么您的示例失败了，因为我无法复制它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T06:03:57.933

这里有答案 [是问题](http://jsfiddle.net/TaEdf/16/)

通过在语法前面注释来显示问题区域。

问：有什么问题？
A. 在每次调用 contextmenu 时，`Y.delegate`重新定义，因为单击 li 项时执行会增加

# objective-c - 选择器“datetoday”的闰年和不知道类方法

> ID：14200995
> 
> 赞同：0
> 
> 时间：2013-01-07T17:29:29.030
> 
> 标签：objective-c, ios, xcode, cocoa-touch, date

我正在尝试编写一个代码来确定一年是否是 bissextile 但在我的第一行出现错误：“选择器'datetoday'的不知道类方法”......我不知道为什么我有这个错误，因为当我试图将我的代码放入一个按钮时它工作得很好......但我需要代码在'viewDidLoad'上，但它得到了那个错误......

我的代码：

```
- (void)viewDidLoad {

[super viewDidLoad];

NSDate *datetoday = [NSDate datetoday];
NSDateFormatter *formatyears = [[NSDateFormatter alloc] init];
[formatyears setDateFormat:@"YYYY"];

NSString *yearStr = [formatyears stringFromDate:datetoday];
int yearint = [yearStr intValue];
int resto;
resto = yearint % 4;

if (resto == 0) {
    teste.text = @"bissexto";
} else {
    teste.text = @"not bissexto";
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:31:21.263

用于`[NSDate date]`获取当前日期而不是 `[NSDate datetoday]`.

你的代码：

```
NSDate *datetoday = [NSDate datetoday]; 
```

正确的代码：

```
NSDate *datetoday = [NSDate date]; 
```

对于闰年：（正如法比奥的评论所理解的，因为你的代码是非英语的，我不理解大多数变量名）

```
if(((yearint %4==0)&&(yearint %100!=0))||(yearint %400==0)){
   NSLog(@"Leap Year");
}
else{
  NSLog(@"Not a Leap Year");
} 
```

# c# - 在 Win 7 上完全禁用系统保护

> ID：14200998
> 
> 赞同：-3
> 
> 时间：2013-01-07T17:29:41.017
> 
> 标签：c#, windows-7, system-restore

我有来自管理层的要求，即我的应用程序需要在安装后禁用系统上的系统还原。我已经找到并实现了下面的代码来实现这一点。该代码在 XP 和 Vista 上运行良好，但在 Win7 上似乎不一样。

```
public void disableSystemRestore(string drive)
{
    try
    {
        ManagementScope scope = new ManagementScope("\\\\localhost\\root\\default");
        ManagementPath path = new ManagementPath("SystemRestore");
        ObjectGetOptions options = new ObjectGetOptions();
        ManagementClass process = new ManagementClass(scope, path, options);
        ManagementBaseObject inParams = process.GetMethodParameters("Disable");
        inParams["Drive"] =  drive;
        ManagementBaseObject outParams = process.InvokeMethod("Disable", inParams, null);
    }
    catch(ManagementException err)
    {
        MessageBox.Show("An error occurred while trying to execute the WMI method: " + err.Message);
    }
} 
```

问题是在 Win7 上，系统还原被包装到系统保护中。系统保护为每个硬盘驱动器提供 3 个选项。

1) 系统还原和文件版本

2) 仅文件版本

3) 无

只要没有人手动更改此设置，代码就可以正常工作。但是，如果用户之前更改了此设置，则代码设置 Option2 而不是 Option3。我该如何纠正？

此外，我无法很好地描述 Option2 的功能。我已经看到了对此实际涵盖哪些文件的不同描述，但只是在这里和那里对线程的评论。对它的作用或工作方式没有真正的“好”描述。

**编辑：**对于“为什么”我需要这样做并相信我，我完全理解并努力寻找另一种方式，这引起了很多关注。但这是不可行的。更多信息，希望能让您放心。

本产品不适合个人使用。它将在公司级别用于锁定系统。此要求来自行业法规和标准。想想医疗或信用卡。受到保护的不仅仅是“我们的”日志、系统访问日志、系统使用日志、文件审核日志。因此，即使停用了系统还原，他们也可以使用其他方式来还原旧版本的日志，系统级日志记录文件访问以及谁访问了它，因此我们至少知道发生了日志篡改。本质上是使用操作系统来审核日志记录。还原点也将在一个简单的步骤中重置所有这些。

用户必须以管理员权限安装此应用程序。目前，用户实际上必须手动执行此步骤，以便站点可以保持其行业认证。我们只是试图简化安装过程。站点管理员了解此要求。我还在实施十几个类似的“系统管理员”更改以简化安装过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:48:19.750

*这不是您问题的直接答案，但评论太长了。*

虽然这不是对内部软件的完全不合理的要求，但对于商业软件来说却是一个**可怕**的想法。

这个计划至少有六件事是我能想到的。随意将此列表重新提交给管理层，看看您是否可以获得不同的指令。

1.  ~~这听起来像是公司软件而不是用户/个人软件。许多公司都制定了 Active Directory 策略，无法禁用系统还原或自动重新启用它。~~

2.  ~~只有系统管理员才能安装它，因为普通企业用户没有权限。~~ 鉴于此，没有什么可以阻止系统管理员在安装后重新启用系统还原进行安装。（如果普通用户可以自己安装，那么他们也将有权重新启用它）

3.  任何在安装过程中试图禁用系统保护的东西都可能被病毒保护标记为恶意软件。这可能会阻止它工作和/或完全禁用您的软件。它也可能导致系统管理员反对它。

4.  禁用系统还原不会阻止某人手动删除日志。

5.  此计划的任何内容都不会阻止其他备份解决方案（例如 SecondCopy 或其他网络备份）能够恢复“旧”日志。 ~~事实上，没有什么能阻止恶意用户简单地复制旧日志，做他的事，然后替换旧日志。~~

6.  它可能使*您的*公司对安装它的系统上的任何丢失数据负责。（IANAL。确保您的律师在编写使用条款时了解这一点以及潜在的影响。）

* * *

简而言之，它不会为所欲为，很容易绕过，是一件非常敌对的事情。