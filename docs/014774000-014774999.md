# StackOverflow 问答 14774000-14774999

# javascript - 计算绝对 div 的问题

> ID：14774000
> 
> 赞同：0
> 
> 时间：2013-02-08T13:48:17.283
> 
> 标签：javascript

我创建了具有固定宽度和绝对位置 ul 的垂直菜单

```
.categories ul.sub {
position: absolute;
right: -191px;
top: 0;
background: #fff;
width: 190px;} 
```

但问题是我不想使用固定宽度和权利。我想根据 ul 中的 h2 类宽度和 js 计算 ul 的宽度和右侧。示例：现在怎么样：http: [//prntscr.com/rzcvx](http://prntscr.com/rzcvx)，我需要什么：http: [//prntscr.com/rzd3t](http://prntscr.com/rzd3t)

html示例：

```
<div class="categories">
<ul class="maincats">
    <li>
        <a class="first"><img/><span>Category Name</span></a>
        <ul class="sub first">
            <li><h2>H2 Title</h2></li>
            <li>Title</li>
            <li>Title</li>
            <li>Title</li>
            <li>Title</li>
        </ul>

    </li>
</ul></div> 
```

我还没有尝试过，我只使用这个js

```
 $(".categories li a").hover(
        function () {
            $(this).addClass("hover");
            $(this).next('ul.sub').show();
        },
        function () {
            $(this).removeClass("hover");
            $(this).next('ul.sub').hide();
        }

    );

  $(".categories ul.sub").hover(
        function () {
            $(this).prev().addClass("hover");
            $(this).show();
        },
        function () {
            $(this).prev().removeClass("hover");
            $(this).hide();
        }

    );

  $(function () {
      var zIndexNumber = 10;
      // Put your target element(s) in the selector below!
      $(".categories ul.sub").each(function () {
          $(this).css('zIndex', zIndexNumber);

      });
  }); 
```

请帮助我，我有基本的 js 技能 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:56:30.120

你可能想试试这个：

```
.categories ul.sub {
    position: absolute;
    right: -100%; /* Not sure if this works, can't test without your html */
    top: 0;
    background: #fff;
    white-space: nowrap; /* Prevent spaces from wrapping when text's overflowing. */
} 
```

# javascript - 无限 Ajax Scroll Pager，隐藏 URL 页码

> ID：14774005
> 
> 赞同：1
> 
> 时间：2013-02-08T13:48:29.073
> 
> 标签：javascript, jquery, infinite-scroll

有什么方法可以隐藏 IAS 寻呼机 URL？

我`#/page/`在[jquery-ias.js](https://github.com/webcreate/infinite-ajax-scroll/blob/master/src/jquery-ias.js)中删除了，但 URL 仍然显示如下页面：

[http://foo.com/#2](http://foo.com/#2)当转到第 2 页时， http: [//foo.com/#3](http://foo.com/#3)当转到第 3 页时，依此类推。

当页面真正转到下一页时，我不需要显示任何页面 URL。

任何解决方案？

# java - JButton 在鼠标悬停之前不会出现

> ID：14774006
> 
> 赞同：-1
> 
> 时间：2013-02-08T13:48:33.230
> 
> 标签：java, image, swing, jbutton, repaint

当我运行我的程序时，一切都按计划进行，除了我必须更改屏幕上的卡片的按钮直到鼠标悬停才会出现。我假设这是因为保存图像的任何容器都在它上面，但我不知道如何将它移动到背景中，甚至不知道我可以使用哪种容器来添加图像。

```
import java.io.*;
import java.awt.*;
import javax.swing.*;
import java.util.Random;
import java.awt.event.*;
import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;

public class oneplayer extends JFrame {
    BufferedImage  image1, image2, image3, image4;
    Random gen = new Random();
    public void redo() {
        int p1, p2, p3, p4;
        p1 = gen.nextInt(13) + 1;
        p2 = gen.nextInt(13) + 14;
        p3 = gen.nextInt(13) + 27;
        p4 = gen.nextInt(13) + 40;
         try {
         File input1 = new File("C:/Users/Mike/Desktop/eclipse/workspace/inClass/src/" + p1 + ".png");
         File input2 = new File("C:/Users/Mike/Desktop/eclipse/workspace/inClass/src/" + p2 + ".png");
         File input3 = new File("C:/Users/Mike/Desktop/eclipse/workspace/inClass/src/" + p3 + ".png");
         File input4 = new File("C:/Users/Mike/Desktop/eclipse/workspace/inClass/src/" + p4 + ".png");
         image1 = ImageIO.read(input1);
         image2 = ImageIO.read(input2);
         image3 = ImageIO.read(input3);
         image4 = ImageIO.read(input4);
     } catch (IOException ie) {
         System.out.println("Error:"+ie.getMessage());
     }
     repaint();
}

public oneplayer() {
    JPanel buttonPanel = new JPanel();
    setLayout(new BorderLayout());
    JButton refresh = new JButton("Refresh");
    refresh.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            redo();
        }
    });
    add(buttonPanel, BorderLayout.SOUTH);
    buttonPanel.add(refresh, BorderLayout.CENTER);
    redo();
}

public void paint(Graphics g) {
     g.drawImage(image1, 20, 55, null);
     g.drawImage(image2, 96, 55, null);
     g.drawImage(image3, 172, 55, null);
     g.drawImage(image4, 248, 55, null);
}

public static void main(String args[]) {
    oneplayer frame = new oneplayer();
    frame.setTitle("Random Cards");
    frame.setSize(350, 200);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:53:40.990

不要覆盖`paint()`方法。而是覆盖`paintComponent()`主容器。

称呼`super.paintComponent(g)`

不要扩展，`JFrame`而是`JPanel`将所有内容添加到面板并将面板设置为通常`JFrame`实例的内容窗格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:53:07.937

您需要在函数`super.paint(g)`内部`paint(Graphics)`调用以确保框架内的 Swing 组件正确显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:53:25.810

尚未使用您的示例对此进行测试，但我认为您需要在覆盖 Frame 上的绘制时调用父类的绘制才能显示 Frame 的组件。像这样：

```
public void paint(Graphics g) {
     super.paint(g);
     g.drawImage(image1, 20, 55, null);
     g.drawImage(image2, 96, 55, null);
     g.drawImage(image3, 172, 55, null);
     g.drawImage(image4, 248, 55, null);
} 
```

# c# - 好的做法还是坏的做法？在 getter 中初始化对象

> ID：14774008
> 
> 赞同：167
> 
> 时间：2013-02-08T13:48:42.623
> 
> 标签：c#, coding-style, getter

我似乎有一个奇怪的习惯……至少我的同事是这样说的。我们一直在一起做一个小项目。我编写类的方式是（简化示例）：

```
[Serializable()]
public class Foo
{
    public Foo()
    { }

    private Bar _bar;

    public Bar Bar
    {
        get
        {
            if (_bar == null)
                _bar = new Bar();

            return _bar;
        }
        set { _bar = value; }
    }
} 
```

所以，基本上，我只在调用 getter 并且该字段仍然为空时初始化任何字段。我认为这将通过不初始化任何未在任何地方使用的属性来减少过载。

ETA：我这样做的原因是我的类有几个属性，它们返回另一个类的实例，而后者又具有更多类的属性，等等。调用顶级类的构造函数随后会调用所有这些类的所有构造函数，但并不*总是*需要它们。

除了个人偏好之外，是否有反对这种做法的反对意见？

更新：我已经考虑了关于这个问题的许多不同意见，我会坚持我接受的答案。但是，我现在对这个概念有了更好的理解，我能够决定何时使用它，何时不使用它。

缺点：

*   线程安全问题
*   当传递的值为 null 时不遵守“setter”请求
*   微优化
*   异常处理应该在构造函数中进行
*   需要检查类代码中的空值

优点：

*   微优化
*   属性永远不会返回 null
*   延迟或避免加载“重”对象

大多数缺点不适用于我当前的库，但是我必须测试以查看“微优化”是否真的在优化任何东西。

最后更新：

好吧，我改变了答案。我最初的问题是这是否是一个好习惯。我现在确信它不是。也许我仍然会在我当前代码的某些部分使用它，但不是无条件的，也绝对不是一直使用它。所以我会失去我的习惯，在使用它之前考虑一下。感谢大家！

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2013-02-08T13:50:50.810

您在这里拥有的是“延迟初始化”的 - 天真 - 实现。

## 简短的回答：

*无条件地*使用延迟初始化不是一个好主意。它有它的位置，但必须考虑到这个解决方案的影响。

## 背景及说明：

**具体实现：**
让我们首先看看您的具体示例以及为什么我认为它的实现幼稚：

1.  它违反了[最小意外原则（POLS）](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)。将值分配给属性时，预计会返回该值。在您的实现中，情况并非如此`null`：

    ```
    foo.Bar = null;
    Assert.Null(foo.Bar); // This will fail 
    ```

2.  它引入了相当多的线程问题：`foo.Bar`不同线程上的两个调用者可能会获得两个不同的实例，`Bar`其中一个将没有与`Foo`实例的连接。对该`Bar`实例所做的任何更改都会静默丢失。
    这是违反 POLS 的又一案例。当仅访问属性的存储值时，它应该是线程安全的。虽然您可能会争辩说该类根本不是线程安全的 - 包括您的财产的吸气剂 - 您必须正确记录这一点，因为这不是正常情况。此外，我们很快就会看到，没有必要引入这个问题。

**总而言之：**
现在是时候看一下一般的延迟初始化了：
延迟初始化通常用于延迟构建*需要很长时间才能构建的对象或*完全构建后占用大量内存的对象。
这是使用延迟初始化的一个非常正当的理由。

但是，此类属性通常没有设置器，这消除了上面指出的第一个问题。
此外，将使用线程安全的实现——比如[`Lazy<T>`](http://msdn.microsoft.com/en-us/library/dd642331.aspx)——来避免第二个问题。

即使在实现惰性属性时考虑这两点，以下几点也是这种模式的普遍问题：

1.  对象的构造可能不成功，从而导致属性 getter 出现异常。这是又一次违反 POLS，因此应该避免。甚至“开发类库的设计指南”中[关于属性的部分也明确指出属性获取器不应该抛出异常：](http://msdn.microsoft.com/en-us/library/vstudio/ms229006%28v=vs.100%29.aspx)

    > **避免从属性获取器中抛出异常。**
    > 
    > 属性 getter 应该是没有任何先决条件的简单操作。如果 getter 可能抛出异常，请考虑将属性重新设计为方法。

2.  编译器的自动优化受到损害，即内联和分支预测。有关详细说明，请参阅[Bill K 的回答](https://stackoverflow.com/a/14783387/572644)。

**这些点的结论如下：**
对于每个延迟实现的单个属性，您应该考虑这些点。
这意味着，这是一个个案决定，不能作为一般的最佳实践。

**这种模式有它的位置，但它不是实现类时的一般最佳实践。**由于上述原因，**不应无条件使用它。**

* * *

在本节中，我想讨论其他人提出的一些观点，作为无条件使用延迟初始化的论据：

1.  序列化：
    EricJ 在一条评论中指出：

    > 可能被序列化的对象在反序列化时不会调用它的构造函数（取决于序列化程序，但许多常见的行为都是这样的）。将初始化代码放在构造函数中意味着您必须为反序列化提供额外的支持。这种模式避免了这种特殊的编码。

    这个论点有几个问题：

    1.  大多数对象永远不会被序列化。在不需要时为其添加某种支持违反了[YAGNI](http://en.wikipedia.org/wiki/YAGNI)。
    2.  当一个类需要支持序列化时，有一些方法可以在没有乍一看与序列化无关的解决方法的情况下启用它。
2.  微优化：您的主要论点是您只想在有人实际访问它们时才构建对象。所以你实际上是在谈论优化内存使用。
    我不同意这个论点，原因如下：

    1.  在大多数情况下，内存中的更多对象对任何事情都没有任何影响。现代计算机有足够的内存。如果没有分析器确认的实际问题，这是[过早的优化](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)，有充分的理由反对它。
    2.  我承认有时这种优化是合理的。但即使在这些情况下，延迟初始化似乎也不是正确的解决方案。反对它的原因有两个：

        1.  延迟初始化可能会损害性能。也许只是微乎其微，但正如比尔的回答所表明的那样，影响比乍一看可能更大。因此，这种方法基本上是在性能与内存之间进行交易。
        2.  如果您的设计是只使用类的一部分的常见用例，这暗示了设计本身存在问题：所讨论的类很可能有多个职责。解决方案是将班级分成几个更集中的班级。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-02-08T14:16:29.993

**这是一个很好的设计选择。强烈推荐用于库代码或核心类。**

它被一些“延迟初始化”或“延迟初始化”调用，通常被所有人认为是一个很好的设计选择。

首先，如果您在类级别变量或构造函数的声明中进行初始化，那么当您的对象被构​​造时，您就有创建可能永远不会使用的资源的开销。

其次，仅在需要时才创建资源。

第三，避免垃圾收集未使用的对象。

最后，处理属性中可能发生的初始化异常比处理类级别变量或构造函数初始化期间发生的异常更容易。

这条规则有例外。

关于在“get”属性中额外检查初始化的性能参数，它是微不足道的。初始化和释放对象比使用跳转的简单空指针检查对性能的影响更大。

*开发类库*的设计指南[http://msdn.microsoft.com/en-US/library/vstudio/ms229042.aspx](http://msdn.microsoft.com/en-US/library/vstudio/ms229042.aspx)

### 关于`Lazy<T>`

泛型`Lazy<T>`类是为发布者想要的而创建的，请参阅[http://msdn.microsoft.com/en-us/library/dd997286(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd997286(v=vs.100).aspx)上的*延迟初始化*。如果您有旧版本的 .NET，则必须使用问题中说明的代码模式。这种 Code Pattern 已经变得如此普遍，以至于 Microsoft 认为在最新的 .NET 库中包含一个类以使其更容易实现该模式是合适的。此外，如果您的实现需要线程安全，那么您必须添加它。

### 原始数据类型和简单类

Obvioulsy，您不会对原始数据类型或简单的类使用惰性初始化，例如`List<string>`.

### 在评论懒惰之前

`Lazy<T>`是在 .NET 4.0 中引入的，所以请不要再添加关于这个类的评论。

### 在评论微优化之前

在构建库时，必须考虑所有优化。例如，在 .NET 类中，您将在整个代码中看到用于布尔类变量的位数组，以减少内存消耗和内存碎片，仅举两个“微优化”。

### 关于用户界面

您不会对用户界面直接使用的类使用延迟初始化。上周我花了一天的大部分时间来删除组合框视图模型中使用的八个集合的延迟加载。我有一个`LookupManager`可以处理任何用户界面元素所需的集合的延迟加载和缓存。

### “二传手”

我从未对任何延迟加载的属性使用 set-property（“setters”）。因此，您永远不会允许`foo.Bar = null;`. 如果您需要设置，`Bar`那么我将创建一个名为`SetBar(Bar value)`而不使用延迟初始化的方法

### 收藏品

类集合属性在声明时总是被初始化，因为它们永远不应该为空。

### 复杂类

让我以不同的方式重复一遍，您对复杂的类使用延迟初始化。通常是设计不良的类。

### 最后

我从来没有说过要对所有课程或所有情况都这样做。这是一个坏习惯。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-02-08T14:08:12.670

您是否考虑使用实现这种模式`Lazy<T>`？

除了轻松创建延迟加载的对象外，您还可以在初始化对象时获得线程安全：

*   [http://msdn.microsoft.com/en-us/library/dd642331.aspx](http://msdn.microsoft.com/en-us/library/dd642331.aspx)

正如其他人所说，如果对象真的很耗费资源，或者在对象构建期间加载它们需要一些时间，那么您就可以延迟加载它们。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-02-08T13:51:22.353

我认为这取决于你正在初始化什么。我可能不会做一个清单，因为建设成本很小，所以它可以放在构造函数中。但如果它是一个预先填充的列表，那么我可能不会，直到第一次需要它。

基本上，如果构建成本超过了对每个访问进行条件检查的成本，那么就懒惰地创建它。如果没有，请在构造函数中执行。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-02-08T14:26:27.633

延迟实例化/初始化是一种完全可行的模式。但是请记住，作为一般规则，您的 API 的使用者不期望 getter 和 setter 从最终用户 POV 那里花费可识别的时间（或失败）。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-02-09T00:09:05.700

我只是想对丹尼尔的回答发表评论，但老实说，我认为这还不够。

虽然这是在某些情况下使用的非常好的模式（例如，当从数据库初始化对象时），但这是一个可怕的习惯。

对象的最大优点之一是它提供了一个安全、可信的环境。最好的情况是，如果您将尽可能多的字段设置为“Final”，并使用构造函数将它们全部填充。这使您的课程非常防弹。允许通过设置器更改字段的情况要少一些，但并不可怕。例如：

```
安全类
{
    字符串名称="";
    整数年龄=0；

    公共无效集合名称（字符串新名称）
    {
        断言（新名称！= null）
        名称=新名称；
    }// 遵循这个模式
    ...
    公共字符串 toString() {
        String s="安全类有名字："+name+" 和年龄："+age
    }
}

```

使用您的模式， toString 方法将如下所示：

```
    如果（名称 == 空）
        throw new IllegalStateException("SafeClass 进入了非法状态！name 为 null")
    如果（年龄 == 空）
        throw new IllegalStateException("SafeClass 进入了非法状态！年龄为空")

    公共字符串 toString() {
        String s="安全类有名字："+name+" 和年龄："+age
    }

```

不仅如此，您还需要在您可能在类中使用该对象的任何地方进行空检查（由于 getter 中的空检查，您的类外部是安全的，但您应该主要在类中使用您的类成员）

此外，您的类永远处于不确定状态——例如，如果您决定通过添加一些注释使该类成为休眠类，您会怎么做？

如果您在没有要求和测试的情况下基于一些微优化做出任何决定，那几乎肯定是错误的决定。实际上，即使在最理想的情况下，您的模式实际上也很有可能会减慢系统速度，因为 if 语句可能会导致 CPU 上的分支预测失败，这会使事情变慢很多很多倍除非您正在创建的对象相当复杂或来自远程数据源，否则只需在构造函数中分配一个值。

有关 brance 预测问题的示例（您反复出现，而不仅仅是一次），请参阅这个真棒问题的第一个答案：[为什么处理排序数组比处理未排序数组更快？](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-02-08T13:51:14.187

我可以看到的缺点是，如果您想询问 Bars 是否为空，它永远不会，您将在那里创建列表。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-02-28T00:44:08.840

让我在其他人提出的许多优点中再补充一点……

调试器将（[默认情况下](https://stackoverflow.com/a/572177/533120)）在单步执行代码时评估属性，这可能`Bar`会比仅执行代码通常更快地实例化。换句话说，仅仅调试的行为就是改变程序的执行。

这可能是也可能不是问题（取决于副作用），但需要注意。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-02-09T11:57:54.953

你确定 Foo 应该实例化任何东西吗？

对我来说，让 Foo 实例化任何东西似乎很臭（尽管不一定是*错误的）。*除非 Foo 的明确目的是成为一个工厂，否则它不应该实例化它自己的协作者，[而是将它们注入到它的构造函数](http://en.wikipedia.org/wiki/Dependency_injection)中。

然而，如果 Foo 存在的目的是创建 Bar 类型的实例，那么我认为懒惰地做这件事没有任何问题。

# android - android - AndroidManifest 引用的类未验证

> ID：14774012
> 
> 赞同：1
> 
> 时间：2013-02-08T13:48:53.003
> 
> 标签：android, unit-testing, testing, broadcastreceiver, android-manifest

我最近为一个 Android 项目重构了我的包结构，并将一个`BroadcastReceiver`类移到了另一个包中。但是，我忘记更新 AndroidManifest.xml 中的`receiver`标签`android:name`字段。

这`BroadcastReceiver`是用来向客户端发送通知的，这个*严重*的错误仅仅意味着没有发送通知。不幸的是，没有对该文件进行编译时验证，或者似乎抛出了任何运行时错误以指示此处的配置错误。

我能做些什么来验证这些类型的配置吗？也许这些信息可以在单元测试中访问并验证？或者，也许我可以配置更详细的输出以确保这样的错误将来不会被忽视？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:21:55.030

> or, it seems, any runtime error thrown to indicate a misconfiguration here

A warning might have shown up in LogCat, but probably not, as having zero receivers for a broadcast is a perfectly normal condition.

> Is there anything I can do from my side to validate these types of configurations?

You can [file a feature request](http://b.android.com) to have Lint validate this portion of the manifest. Or, you can write your own script to analyze your source tree and manifest and include this as part of a customized Ant build script.

> Perhaps this information can be accessed in a unit test and verified?

You can use [`PackageManager` and `queryBroadcastReceivers()`](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryBroadcastReceivers%28android.content.Intent,%20int%29) to confirm that the `Intent` you use for broadcasts will resolve to 1+ receivers.

# linux - 我在哪里可以获得 IoOutput8 () 的源代码

> ID：14774015
> 
> 赞同：0
> 
> 时间：2013-02-08T13:49:03.617
> 
> 标签：linux, linux-kernel, linux-device-driver, embedded-linux

我正在寻找 IoOutput8() 函数的代码，该函数用于将值写入指定的 I/O 端口。

任何人都可以帮助了解此功能源代码的正确位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:45:53.573

在Linux中，没有`IoOutput8()`功能。您应该使用`void iowrite8(u8 value, void *addr);`后跟`wmb();`（写内存屏障）。有关详细信息，请参阅[§9.4.2 访问](http://www.makelinux.net/ldd3/chp-9-sect-4)LDD Book 的 I/O 内存（另请参阅 §9.4.3\. Ports as I/O Memory for `ioport_map/ioport_unmap`）。

至于 的源代码`IoOutput8()`，您可能应该从获得该功能的同一个地方获得它。我唯一能找到的地方是 Phoenix IO Access Library，如果你正在使用它，如果他们还没有提供源代码，你应该向 Phoenix 公司索取源代码。

# laravel - 在 laravel 中进行选择的最佳方法？

> ID：14774016
> 
> 赞同：0
> 
> 时间：2013-02-08T13:49:12.683
> 
> 标签：laravel, fluent

为了使用 Form::select，您需要添加一个名称和两个数组。

在正常情况下，我们有一个带有 id 和另一个带有名称。两者都需要从查询中加载。

所以在模型中我有这样的东西：

```
public static function get_ids()
{
    //return DB::query('select id FROM __roles');
    return DB::table('roles')->get(array('id'));
}

//Returns an array with all the names
public static function get_names()
{
    //return DB::query('select name FROM __roles');
    return DB::table('roles')->get(array('name'));
} 
```

然而，这给了我这个：

```
Array ( [0] => stdClass Object ( [id] => 1 ) [1] => stdClass Object ( [id] => 2 ) [2] => stdClass Object ( [id] => 3 ) ) 
```

我想得到这样的东西：

```
Array ( [0] => '1'  [id] => '2' [id] => '3' ) 
```

对于表格

```
Form::select('role', array(Role::get_ids(), Role::get_names())); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:59:01.550

这行得通吗？

```
public static function get_ids()
{
    //return DB::query('select id FROM __roles');
    return DB::table('roles')->get(array('id'))->to_array();
}

//Returns an array with all the names
public static function get_names()
{
    //return DB::query('select name FROM __roles');
    return DB::table('roles')->get(array('name'))->to_array();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T20:36:43.903

我试过这个选项：

```
 $projects = Project::where('user_id', Auth::user()->id)->lists('name', 'id'); 
```

在模板中：

```
{{ Form::select('project', $projects) }} 
```

# .net - TransactionScope 可以在同一 Microsoft SQL 服务器上的 2 个数据库中使用吗？

> ID：14774019
> 
> 赞同：0
> 
> 时间：2013-02-08T13:49:25.703
> 
> 标签：.net, sql-server, transactionscope

我有一种情况，当我更新用户时，我还必须跟踪对用户所做的所有更改——有点像用户表的活动日志。此活动日志位于同一数据库服务器上的不同数据库中。但是，当我将这 2 个 DB 调用包装在事务范围内时，我得到了一个错误。

所以我想知道是否有办法绕过/解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:56:21.773

愿意分享错误的确切含义吗？无论如何，在我看来，这个用例应该得到 TransactionScope 的支持。据我记得，虽然事务将被提升为分布式事务，并且需要在您的计算机上安装和运行分布式事务协调器服务 ( [MSDTC )](http://msdn.microsoft.com/en-us/library/aa174499%28v=sql.80%29.aspx)

编辑：看到错误消息，似乎 2 个数据库位于不同的机器上，因此分布式事务需要通过网络完成/同步。这意味着已安装 MSDTC，但未针对此用例正确配置。在文档中查找它并与您的系统管理员聊天。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:58:40.080

如果您使用的是 SQL Server 2008，则可以在没有 MSDTC 的事务范围内包装与*同一*SQL Server 的连接，前提是您为每个连接使用相同的连接字符串。

要使用相同的连接字符串，您需要在查询中明确指定数据库名称（至少为您的一个数据库），例如

```
SELECT ... FROM db1..Table1 ...

SELECT ... FROM db2..Table2 ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:16:59.277

您需要确保安装并配置了 MSDTC。通过配置，我的意思是您需要启用网络 DTC 访问权限。

这可以帮助您入门：[http ://technet.microsoft.com/en-us/library/cc753866(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc753866(v=ws.10).aspx)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-08T13:57:58.243

我不相信这是可能的，因为交易只与一个连接相关联。实现此行为所需的是有一个并行过程（即并发线程），每 n 秒读取一次日志数据库

# iphone - 在 storybord 中使用 NSUserDefaults 创建初始/首次启动视图控制器

> ID：14774020
> 
> 赞同：0
> 
> 时间：2013-02-08T13:49:27.870
> 
> 标签：iphone, ios, objective-c, storyboard

因此，如果找到 NSUserDefaults 键，我会尝试跳过我的第一个视图控制器。但它不起作用。为此使用 Segue 是否明智？我是故事板的新手。

警告：尝试呈现不在窗口层次结构中的视图！

我在第一个 VC 的 viewDidLoad 中使用此代码：

```
 if ([[NSUserDefaults standardUserDefaults] boolForKey:@"HasLaunchedOnce"])
    {

        NSLog(@"not first launch");
        [self performSegueWithIdentifier:@"SegueToNewTrackTraceVC" sender:self];

    }else{
        NSLog(@"First launch");
    }

    NSLog(@"initialViewController loaded");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:15:30.260

您不能从 viewDidLoad 执行 segue，因为该代码所在的类的控制器即将自己呈现，并且它的视图尚未添加到窗口层次结构中。您应该将代码放在 viewDidAppearAnimated: 中。如果您不想看到转场发生，请取消选中情节提要中转场的“动画”框（该框可用于模态转换，我认为它不是用于推动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:03:39.807

您忘记`NSUserDefault`在第一次启动后更新。

```
if ([[NSUserDefaults standardUserDefaults] boolForKey:@"HasLaunchedOnce"])
{

    NSLog(@"not first launch");
    [self performSegueWithIdentifier:@"SegueToNewTrackTraceVC" sender:self];

}
else
{
    NSLog(@"First launch");
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"HasLaunchedOnce"];
} 
```

# jquery - JQuery Click inside other click

> ID：14774023
> 
> 赞同：0
> 
> 时间：2013-02-08T13:49:31.063
> 
> 标签：jquery, events, click

我只需要一个单击事件启动一个简单的模式并单击此模式中的按钮，但是第二次单击（由第一次单击触发）不起作用。:(

```
jQuery(function ($) {

    // Load dialog on click
    $('#basic-modal .basic').click(function (e) {
        $('#basic-modal-content').modal();
        $("#botaoTeste").click();

        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:54:18.447

您可以将它分隔在一个函数上并在需要的地方调用，例如：

```
jQuery(function ($) {

    // create a function
    function clickEventTest(e) {
        // some code
    }

    // set this function on the click of the 'botaoTeste' element
    $("#botaoTeste").click(clickEventTest);

    // Load dialog on click
    $('#basic-modal .basic').click(function (e) {
        $('#basic-modal-content').modal();

        // call the function
        clickEventTest(e);

        return false;
    });
}); 
```

# javascript - Window 8 JavaScript 应用程序 oncheckpoint 不起作用

> ID：14774028
> 
> 赞同：0
> 
> 时间：2013-02-08T13:49:51.833
> 
> 标签：javascript, windows-8

我正在将一个html5游戏移植到win8。为了保存游戏状态，我在 中调用了一个函数`save_game`（它使用 localStorage 来存储一些数据）`window.unload`，这当然在这里不起作用。所以我`WinJS.Application.oncheckpoint`改用。奇怪的是，如果我启动游戏并按`alt-f4`，则不会保存游戏状态。用事件处理程序在VS中调试`console.log`，我发现它似乎只有在我恢复应用程序时才会触发。奇怪的是，如果我在代码中设置断点，事件处理程序将在暂停期间正确执行。

有人知道为什么会这样吗？这是win8的bug吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T17:00:14.357

使用 VS 调试应用程序时，您会看到已知行为。当您通过用户操作（Alt-F4 / 顶部滑动）关闭应用程序时，该应用程序实际上会被调试器保持打开一段时间。如果在 oncheckpoint 中设置断点，调试应用程序，按 Alt-F4 然后等待约 5 秒左右，您将遇到断点。模拟用户“关闭”事件的最佳方法是使用 VS 中的暂停和关闭选项，该选项将立即触发 oncheckpoint。

# virtualbox - Virtualbox：在 ubuntu 客户机中使用防火墙

> ID：14774035
> 
> 赞同：0
> 
> 时间：2013-02-08T13:50:12.827
> 
> 标签：virtualbox, firewall, nat

我有 ubuntu server 12.10 作为来宾的 windows 7 pro 主机。主机有一个静态IP。网络模式是 NAT，从主机端口 22 到访客端口 22 的端口转发。由于公司政策，我不想使用桥接网络。

我需要从互联网通过 ssh（端口：22）进入来宾，并且我想将来宾端口 22 的入站连接限制为某些 IP 地址。所以我在来宾中启用了 ufw 并为其添加了规则。当我尝试从允许的 IP 地址之一 SSH 进入来宾时，它没有连接。如果我禁用 ufw，它可以工作。

有什么问题？我不太了解 NAT 和访客防火墙。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:22:50.080

这是正常的，因为来宾虚拟机（Ubuntu）将接收来自 NAT 网关 IP（即主机（Win7）地址）的连接，而不是连接到 ssh 的客户端。

要解决此问题，您需要删除`ufw`规则并在主机 Windows 防火墙中设置相同的规则。

# d3.js - d3.js 不在本地服务器上工作

> ID：14774038
> 
> 赞同：1
> 
> 时间：2013-02-08T13:50:37.387
> 
> 标签：d3.js

d3.js 没有按预期附加 div。在 FF 18+ 和 Firebug 上调试。

返回 d3 对象（在警报消息上），但图表对象返回空白。

d3.js 库加载正常。

这是代码

```
 <?php header('Content-type: text/html; charset=utf-8');?>
<!DOCTYPE html>
<html>
    <head>
        <script type='text/javascript' src='js/d3.v3.js'></script>
        <script type='text/javascript'>
            var data = [4, 8, 15, 16, 23, 42];

            var chart = d3.select("#hurtme").append("div").attr("class", "chart");

            alert (d3);

            //chart.selectAll("div").data(data).enter().append("div").style("width", function(d) { return d * 10 + "px"; }).text(function(d) { return d; });

        </script>
    </head>
    <body>
        <div id='hurtme'></div>
        hello
    </body>
</html> 
```

我错过了什么？

PS：我已经放弃了浏览器不兼容的问题，因为网络上的其他示例工作正常。

PS2：也尝试使用 d3.v2.js 并从源代码加载`<script src="http://d3js.org/d3.v3.min.js"></script>`，到目前为止没有成功。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T14:34:00.710

您的脚本在 div 存在*之前*被加载并执行。尝试在 div 之后移动脚本标签：

```
<div id='hurtme'></div>
<script> type='text/javascript'>
        var data = [4, 8, 15, 16, 23, 42];
        var chart = d3.select("#hurtme").append("div").attr("class", "chart");
</script> 
```

或者使用“onload”功能：[window.onload vs document.onload](https://stackoverflow.com/questions/588040/window-onload-vs-document-onload)

# php - 如何使用php在数据表中显示xml的数据

> ID：14774039
> 
> 赞同：0
> 
> 时间：2013-02-08T13:50:38.567
> 
> 标签：php, xml, parsing, datatable

下面是我从 php 方法中的 REST webservice 调用响应中得到的 xml

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<response>
    <products>
      <capacity>1</capacity>
      <id>ae123</id>
      <group>Per</group>
      <name>xxxx</name>
    </products>
    <records>1
    </records>
</response> 
```

我调用 web 服务并获取 xml 数据的 php 方法是

```
function getAjaxProducts(){

    $path="my webservice url";
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$path);
    curl_setopt($ch, CURLOPT_FAILONERROR,1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION,1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 60);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-type:     application/json'));
    $retValue = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);

    if($httpCode>400) {
            $retValue="<error><errorcode>".$httpCode."</errorcode></error>";
            echo $retValue;
    }

    curl_close($ch);
    echo $retValue;
 } 
```

`$retValue`包含 xml 文件。

我完全陌生`php`，不知道如何在 xml 的数据表中显示产品详细信息。对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:52:52.707

[`simplexml_load_string()`](http://www.php.net/manual/en/function.simplexml-load-string.php)应该做的伎俩

```
$retValue = '<response>
  <products>
      <capacity>1</capacity>
      <id>ae123</id>
      <group>Per</group>
      <name>xxxx</name>
  </products>
  <records>1
  </records>
</response>';

$xml = simplexml_load_string($retValue);
echo $xml->products->capacity . "<br>\n";
echo $xml->products->group . "<br>\n";
echo $xml->products->name . "<br>\n";
echo $xml->records . "<br>\n"; 
```

[看到它在行动](http://codepad.viper-7.com/dLLN1T)

# .net - MultiColumnText 是否适用于 iTextSharp v5.3.3？

> ID：14774040
> 
> 赞同：3
> 
> 时间：2013-02-08T13:50:42.290
> 
> 标签：.net, itextsharp

`MultiColumnText`我在 iTextSharp v5.3.3（来自 NuGet）中找不到任何地方。我所能找到的只是`ColumnText`使用起来肯定不那么友好，而且比我真正需要的要多。我错过了什么吗？有几个链接说`MultiColumnText`应该存在。

*   [http://api.itextpdf.com/itext/com/itextpdf/text/pdf/MultiColumnText.html](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/MultiColumnText.html)
*   [itextsharp nextcolumn 不工作](https://stackoverflow.com/questions/3759967/itextsharp-nextcolumn-not-working)
*   [http://www.mikesdotnetting.com/Article/89/iTextSharp-Page-Layout-with-Columns](http://www.mikesdotnetting.com/Article/89/iTextSharp-Page-Layout-with-Columns)
*   [http://www.devshed.com/c/a/Java/Adding-Columns-With-iTextSharp/](http://www.devshed.com/c/a/Java/Adding-Columns-With-iTextSharp/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:49:01.523

虽然 iTextSharp 不包括`MultiColumnText`，但我仍然可以“自己动手”。看看这里：[https ://stackoverflow.com/a/14781862/271351](https://stackoverflow.com/a/14781862/271351)

# javascript - SlideToggle 仅在单击的项目上

> ID：14774043
> 
> 赞同：0
> 
> 时间：2013-02-08T13:50:53.783
> 
> 标签：javascript, jquery, html

我用它来显示一个子列表：

```
 function slidecontent() {
        $('ul.joinus_subtext').slideToggle();
    } 
```

我有这个标记：

```
 <ul class="joinus">
        <li onclick="slidecontent();">Benefactor
            <ul class="joinus_subtext">
                 <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse lacinia mi a turpis tempor blandit. Vestibulum ante ipsum primis in faucibus orci 
                                luctus et ultrices posuere cubilia Curae; Nullam sit amet ante sed tellus rutrum porta ut non ipsum.</li>
            </ul>
        </li>
        <li onclick="slidecontent();">Protector
            <ul class="joinus_subtext">
                <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse lacinia mi a turpis tempor blandit. Vestibulum ante ipsum primis in faucibus orci 
                                luctus et ultrices posuere cubilia Curae; Nullam sit amet ante sed tellus rutrum porta ut non ipsum.</li>
            </ul>
        </li>
    </ul> 
```

我遇到的问题是，当我单击一个**LI 时，它会切换所有，而不仅仅是这个，我如何切换一个，然后如果我打开另一个关闭之前的一个？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:00:54.540

尝试这个...

```
$('ul.joinus_subtext').on('click', function(){
    $(this).slideToggle();
}); 
```

并删除`onclick="slidecontent();"`HTML 中的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:56:43.783

抱歉稍作修改；

```
<li onclick="slidecontent(this);"> 
```

尝试;

```
function slidecontent(that) {
    $(that).find('ul.joinus_subtext:first').slideToggle();
} 
```

# java - 应用程序范围记录器的最佳实践

> ID：14774050
> 
> 赞同：0
> 
> 时间：2013-02-08T13:51:10.373
> 
> 标签：java, spring, jersey

经过多次尝试，我终于能够提出一个问题。我希望它有意义并且易于理解。在使用 Spring 和 Jersey 的 Web 应用程序上工作。我需要实现一个应用程序范围的记录器，该记录器应该将应用程序上执行的所有活动记录到数据库中。目前，我已经使用了该`HAS-A`实现，并在执行 CRUD 操作的任何地方调用了日志记录方法。像这样的东西：

```
LogBean lBean=new LogBean("rickesh@email.com","update","address","127.0.0.1");
logToDatabase(lBean); 
```

但这会导致大量重复的代码行，并且我必须在执行 CRUD 操作的每个部分反复实例化和调用 log 方法。有什么方法可以从控制器层、REST 层中提取日志记录吗？Spring 或 Jersey 中是否有任何特定功能，我可以使用这些功能在单独的层上执行日志记录，而不必在任何地方重复相同的代码行。请指教。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T13:58:11.027

如果您在编写日志时变得一团糟，您应该查看[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。如果您已经在使用 spring，您应该阅读[Spring AOP](http://static.springsource.org/spring/docs/2.5.5/reference/aop.html)，对于日志记录本身，请阅读[使用 Spring AOP 进行日志记录](https://stackoverflow.com/questions/2071050/is-using-spring-aop-for-logging-a-good-idea)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:58:56.737

AOP is a better way but if getting to learn it to resolve this issue is going to take longer then here is a simple alternative.

1.  Add log4j JAR to your WebApp. Make sure, log4j version bundled in your WebApp doesn't conflict with the version already with your Application Server
2.  Place a log4j.xml for FILE and CONSOLE appendars in your class path (src/main/resources)
3.  There is a Log4JConfigureListener provided by Spring which you can declare under section in your web.xml
4.  Additionally, if too much log is generated, you can limit the output of the loggers via either log4j.xml in your application to certain packages only or via using Root logger configuration for your project specific packages. For example, in JBoss you can add a "category" for a package at a specific LOG level

Your specific "separate layer" should have a separate and distinct package name to target the log appendars for that layer Hope this helps!

# git - SourceTree 中的 IntelliJ 差异工具

> ID：14774053
> 
> 赞同：30
> 
> 时间：2013-02-08T13:51:15.607
> 
> 标签：git, intellij-idea, diff, atlassian-sourcetree

是否可以在 SourceTree 中使用 IntelliJ Diff 工具？我知道它可以从终端访问。

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2016-07-26T10:56:10.067

对于 OSX android studio，我已经完成了以下步骤：

**打开 IntelliJ/Android Studio -> 工具 -> 创建命令行启动器**

[![像这样的东西：](../Images/85cfb6053817b4516c612992e296b9a3.png)](https://i.stack.imgur.com/GU7SO.png)

之后，打开 SourceTree Preferences: 并将**“/usr/local/bin/studio”**放入 Diff/Merge 命令中。像这样：

[![像这样：](../Images/5a3b51170f23bb8bdcb45fc6d58e1861.png)](https://i.stack.imgur.com/qLqX6.png)

**差异参数：**

```
diff $LOCAL $PWD/$REMOTE 
```

**合并参数：**

```
merge $PWD/$LOCAL $PWD/$REMOTE $PWD/$BASE $PWD/$MERGED 
```

如果一切正常，它应该可以工作。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-08T14:23:39.243

Took some time to figure out arguments. Diff command text box should contain path to intellij, like: `/Applications/IntelliJ\ IDEA\ 12.app/Contents/MacOS/idea`

![enter image description here](../Images/98aa2de57e52ed43226c96f200f2f989.png)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-07-26T21:54:19.093

**Windows**
Diff 命令：`C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.1.2\bin\idea.exe`
参数：`diff $LOCAL $PWD/$REMOTE`

合并命令：`C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.1.2\bin\idea.exe`
参数：（*这不适合我。我遇到了路径问题。）* `merge $LOCAL $PWD/$REMOTE $PWD/$BASE $MERGED`

* * *

从 12.1 开始，这些是从程序外部使用 IntelliJ 的 diff 和 merge 工具的参数：

**差异工具**
`<path to IntelliJ IDEA launcher> diff <path to file1> <path to file2>`

**合并工具**
`<path to IntelliJ IDEA launcher> merge <path to file1> <path to file2> <path to file3> <path to output>`

[官方文档：running-intellij-idea-as-a-diff-or-merge-command-line-tool](https://www.jetbrains.com/idea/webhelp/running-intellij-idea-as-a-diff-or-merge-command-line-tool.html)

* * *

FWIW，我最终使用 IntelliJ 进行源代码控制。我比 Sourcetree 更喜欢它。它相当健壮。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-01-18T15:30:06.490

对于今天（2019 年 1 月），它可以在如下窗口中运行：

外部差异/合并：

> 差异工具：

`Diff Command: C:\Program Files\JetBrains\WebStorm 2018.3.1\bin\webstorm64.exe`

`Agruments: diff $LOCAL $REMOTE`

> 合并工具：

`Diff Command: C:\Program Files\JetBrains\WebStorm 2018.3.1\bin\webstorm64.exe`

`Agruments: merge $LOCAL $REMOTE $BASE $MERGED`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-12-21T09:55:53.067

如果有人对**Mac中的****Android Studio**设置感兴趣：

 **```
<path to IntelliJ IDEA launcher>:
/Applications/Android\ Studio.app/Contents/MacOS/studio

Diff tool
<path to IntelliJ IDEA launcher> diff <path to file1> <path to file2>

Merge tool
<path to IntelliJ IDEA launcher> merge <path to file1> <path to file2> <path to file3> <path to output> 
```

我注意到的唯一问题是 Android Studio 一次不能显示超过 1 个差异。当我尝试时，它抱怨无法显示文件

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-03-31T06:30:32.447

在装有 Intellij 2016 的 Mac 上

```
diff $LOCAL $PWD/$REMOTE

merge $PWD/$LOCAL $PWD/$REMOTE $PWD/$BASE $PWD/$MERGED 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-26T08:29:18.653

在 Windows 和 Sourcetree >2.4 上使用 PHPStorm 2013 我不得不转义参数并添加合并选项的完整路径。

差异/合并命令：

```
C:\Program Files\JetBrains\PhpStorm 2017.3.6\bin\phpstorm64.exe 
```

差异参数：

```
diff \"$LOCAL\" \"$REMOTE\" 
```

合并参数：

```
merge \"$PWD/$LOCAL\" \"$PWD/$REMOTE\" \"$PWD/$MERGED\"
merge \"$PWD/$LOCAL\" \"$PWD/$REMOTE\" \"$PWD/$BASE\" \"$PWD/$MERGED\" 
```

[Jetbrans 文档命令行合并](https://www.jetbrains.com/help/idea/command-line-merge-tool.html "Jetbrains docs 命令行合并")

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-26T10:54:54.103

对于 Windows 上的合并工具，这些参数对我有用：

```
merge $PWD/$LOCAL $PWD/$REMOTE $PWD/$MERGED 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-06-11T15:39:24.423

我最近发现了一种无需任何设置即可使用 IntelliJ Diff Tool 的更方便的方法。

1.  合并 SourceTree 中的两个分支
2.  在 IntelliJ IDE（对我来说它的 Webstorm）中去“VCS->Git->Resolve Conflicts”

这种方式非常有效。

[![在此处输入图像描述](../Images/6c39d1f0b1ab7ffb6d00d9076d881517.png)](https://i.stack.imgur.com/DonR5.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-13T09:50:06.050

正如@Shad 提到的，IntelliJ 可能不会在 Windows 中执行差异/合并，因为尚未创建临时文件。

一种解决方法是创建一个文件`delayed-intellij.bat`，如下所示：

`ping 127.0.0.1 -n 2 > nul "C:\Program Files\JetBrains\IntelliJ IDEA 2017.2.1\bin\idea64.exe" %*`

然后在 Sourcetree: 中使用这个文件`C:\temp\idea64-delayed.bat`，它会在短时间内启动合并工具。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-15T19:44:10.157

在带有**IntelliJ IDEA CE的****macOS**上。

 ****差异命令**：`open`
**参数**：`-W -b com.jetbrains.intellij.ce --args diff "$LOCAL" "$PWD/$REMOTE"`

[![在此处输入图像描述](../Images/48c955205722a22c74c83bfb703f4deb.png)](https://i.stack.imgur.com/1G2dt.png)

在哪里：

*   `open`: 打开文件和目录的系统命令。
*   `-W`：导致`open`等到它打开（或已经打开）的应用程序退出。
*   `-b com.jetbrains.intellij.ce`：应用程序打开文件时使用的捆绑标识符。
*   `--args`：所有剩余的参数都传递给打开的应用程序的`argv`参数`main()`。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-08-22T08:24:38.383

让 IntelliJ 用作 SourceTree 的差异和合并工具

*   macOS 10.14.6
*   IntelliJ IDEA 2019.2.1（社区版）
*   源树 3.2.1 (225)

使用

差异命令：`open`
参数：`-W -b com.jetbrains.intellij.ce --args diff "$LOCAL" "$PWD/$REMOTE"`

合并工具：`open`
参数：`-W -b com.jetbrains.intellij.ce --args merge "$PWD/$LOCAL" "$PWD/$REMOTE" "$PWD/$BASE" "$PWD/$MERGED"`

在`SourceTree > Preferences > Diff`.

有关屏幕截图，请参见[https://i.stack.imgur.com/YEQEV.png](https://i.stack.imgur.com/YEQEV.png)。

希望这可以帮助某人:-)****

# jquery - 多个 jquery 切换

> ID：14774064
> 
> 赞同：2
> 
> 时间：2013-02-08T13:51:56.837
> 
> 标签：jquery, toggle

我试图建立一个只向公众显示一个页面的网站，并在 jquery 和 ajax 的帮助下，我计划在该页面内获取所有隐藏页面的内容。像 Flash 网站。

现在，作为这个领域的新手，我遇到了一些与 jquery 切换相关的问题。该`toggle()`功能会在我需要在主页中显示的每个隐藏页面上上下滑动，但我不知道如何在打开其他页面时正确关闭其他页面，并使它们 100% 动态且令人赏心悦目。

为了更好地理解我在说什么，请点击[此链接](http://www.mediaheart.ro/x/)并点击`click`的`Marlon Brando`脸，然后点击`click`红色文字`formular online`，然后再次点击`Marlon Brando`的脸。*通过这样做，您将完全了解我的问题！*

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:08:03.383

你想要做的是这样的：

1.  为您的内容区域提供一个共同的祖先/父项，例如`<div id="regions"><div marlon /> <div formular /> ...`.
2.  给你的每个主要区域 div 一个你可以关联的`id`或标签。`rel`如`region-brando`
3.  为每个扩展区域的链接指定一个特定的类（例如`region-expander`），并设置`href`id（例如`href="#region-brando"`）或设置 rel 标签（例如`rel="region-brando"`）
4.  基于该类绑定单击事件，该类执行两件事：1）折叠`regions`div 内所有其他当前展开的区域；和 2) 扩展新选择的区域

所以它看起来像这样：http: [//jsfiddle.net/We9NT/](http://jsfiddle.net/We9NT/)

# php - 使用 Sinatra/Rack（在 MiddlemanApp 中）将 PHP 文件作为静态文本/html 提供服务？

> ID：14774069
> 
> 赞同：0
> 
> 时间：2013-02-08T13:52:08.543
> 
> 标签：php, sinatra, middleman

我对 Ruby/Sinatra/Rack 相当陌生。几个月来一直在使用 MiddlemanApp。

我的中间人静态站点需要几个 PHP 页面。我希望能够在运行时在浏览器中预览这些页面`middleman server`。**我不需要解析或处理 PHP 文件**，只需在预览服务器中按原样提供，并且内容类型为 text/html。

在 Apache 配置中，很容易告诉 Apache 将给定的文件扩展名视为另一种类型的文件。但我什至不知道在 Sinatra/Middleman/Rack 中从哪里开始。

所以：

我可以设置 Sinatra 或 Rack 以将 PHP 文件作为静态 HTML 提供吗？我不希望或期望 Sinatra/Rack 解析 PHP。我只希望 PHP 在运行时作为静态 HTML 嵌入/保持不变`middleman server`。

我知道我可以运行`middleman build`和使用 Apache 来提供和解析这些文件，但是`middleman build`每 20 秒一次就很乏味。

**编辑**

好的，所以我确实意识到上述是默认行为。我将把我的问题修改为：

*   如何让 Middleman App 中的 Sinatra 将 index.php 作为预览服务器中的索引文件提供服务？

说我有`source/test/index.php.erb`和没有`source/test/index.html.erb`。我想`middleman server`为 /test/ 的请求提供 /test/index.php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:04:31.543

不完全确定你的问题是什么，但你的意思是这样的吗？

```
get '/test' do 
  erb :'test/index.php'
end 
```

您的视图/测试文件夹中有一个名为 index.php.erb 的文件

# php - 第一个数据库结构帮助请

> ID：14774071
> 
> 赞同：0
> 
> 时间：2013-02-08T13:52:09.273
> 
> 标签：php, mysql, database-design

这是我第一次制作自己的mysql数据库，希望得到一些指点。我查看了以前的问题，发现可以一次搜索多个表......这样就扩大了我的可能性。

我想要做的是在 PHP 页面上有一个可搜索/可过滤的 Snowmobile 俱乐部列表。

这些俱乐部应该可以按州、县列出或按名称/其他包含的信息进行搜索。

尽管输入顺序不同，我也希望它们在结果中按字母顺序排列。

目前我的想法是，为纽约、宾夕法尼亚等地准备一张桌子

包含县（varchar）、俱乐部名称（varchar）、街道地址（长文本）、电话（varchar）电子邮件（varchar）网站地址（varchar）的列

我真的应该为每个县制作多个表格吗，例如 NY.ALBANY 、 NY.MADISON

我选择的字段格式是合理的吗？

应该将地址分解为子组件...例如 street1、street2、city、state、zip。

最终，我想我想要一个带有是或否的列“trailsopen”，并根据输入将 tr 背景更改为绿色或红色。

希望这是有道理的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:30:49.587

这是我将如何设置您的数据库：

```
state
id (tinyint) //primary key auto incremented unsigned
short (varchar(2)) // stores NY, PA
long (varchar(20)) // Stores New York, Pennsylvania

county
id (int) //primary key auto incremented unsigned
state_id (tinyint) //points to state.id
name (varchar(50))

club_county
id (int) //primary key auto incremented unsigned
county_id (int) //points to county.id
club_id (int) //points to club.id

club
id (int) //primary key auto incremented unsigned
name (varchar(100))
address (varchar(100)
city (varchar(25))
zip (int)
etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:08:30.110

您不应该为各个县制作单独的表格。相反，您应该做的是创建一个州表、一个县表和一个地址表。

结果可能如下所示：

州（id、代码、名称）、县（id、stateID、名称）、俱乐部（id、countyID、名称、街道地址等...）

用于确定要分解什么以及何时分解的过程称为“数据库规范化” - 实际上有算法可以为您执行此操作。维基页面是一个很好的起点：[http ://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

顺便说一句，街道地址的一个长文本很好，其他字段的 varchars 也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:00:01.093

从我的角度来看，一张桌子似乎足以满足您的需求。MySQL 是如此强大，以至于有很多方法可以做任何事情。我推荐下载和使用 MySQL Workbench，它使得创建表、更改表和编写查询比将它们嵌入到网页中更容易和更快。

下载 MySQL Workbench -> [http://dev.mysql.com/downloads/workbench/](http://dev.mysql.com/downloads/workbench/)

您还需要了解很多有关 MySQL 查询的知识。我认为您可以将所需的所有信息放在一张表中，诀窍在于您使用哪个查询来显示信息。

例如，假设您只有 1 个表，所有状态都在一起。您可以使用如下查询仅显示纽约州的雪地摩托俱乐部：

```
select * from my_table where state = "NY"; 
```

如果您想按俱乐部名称的字母顺序显示结果，那么您将使用如下内容：

```
select * from my_table where state = "NY" order by clubname; 
```

网上有很多文档。所以我建议做几个小时的研究并使用 MySQL Workbench。

Stack Overflow 的目的是回答与特定代码或查询有关的更具体的问题。因此，一旦您构建了一个程序，并在某些事情上遇到困难，您可以在这里提出具体问题。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:02:54.927

您可以使用复合键约束创建单个表。就像..我在一家公司有 3 个部门，每个部门都有多个子部门。所以我可以创建一个这样的数据库.. Dept_id || sub_dept_id || 姓名 || 萨尔 || 地址 || Phone ..where Dept_id 和 sub_dept_id 将共同代表主键并看到它的唯一性。

> > 但是请记住，如果您的数据库太大，那么在您执行此步骤之前请考虑一下，您可能需要针对该场景进行集群或索引。在编写 SQL 查询时，最好将一个主模块划分为多个子模块。所以你可以打破地址。根据您的是/否....使用整数字段并计划它，如果它是，它将存储 1 否则 0（零）...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T14:13:46.180

1.  我真的应该为每个县制作多个表格吗，例如 NY.ALBANY 、 NY.MADISON

这取决于，但在您描述的情况下，另一种选择可能是拥有一个包含所有雪地摩托俱乐部的数据库表，以及一个包含所有州/县的表。在 clubs 表中，您可以有一个 id 字段作为外键，它将条目链接到特定的州/县条目。要将所有信息放在一起，您只需对表执行 JOIN 操作（请参阅 mysql 文档）。

1.  我选择的字段格式是合理的吗？

他们会工作..

1.  是否应该将地址分解为子组件……例如 street1、street2、city、state、zip？

本质上，这里的问题是您现在或将来是否需要将其分解为子组件？如果它被分解，您将数据分开，这使得进一步的处理（例如生成串行字母、自动查找..）可能更简单，但这取决于您的处理；如果你不需要它分开为什么要让生活更复杂？

已经有这么多答案了..同意。

# html - 在 ul li div 中居中我的图像

> ID：14774074
> 
> 赞同：0
> 
> 时间：2013-02-08T13:52:33.097
> 
> 标签：html, css

我在页脚中放置了一张图片，我希望它居中但我不会工作我希望我的图片居中所以我希望有人可以帮助我看看我的代码

HTML

```
<div class="center">
                <ul>
                    <li><a href="#" target="_blank" class="centering_"></a></li>

                </ul>
            </div> 
```

CSS：

```
.center 
{
    width: 84px;    
    margin: 0 auto;
}
.center ul 
{
    width: 209px;
    line-height: normal;  

}
.center ul li 
{
    float: left;
    margin-right: 11px;

}
.center ul li.last 
{
    margin-right: 0px;
}
.center ul li a
{   
    display: block;
    height: 33px;
    width: 33px;
}

.centering_ {background: transparent url('../images/hello.png') no-repeat;} 
```

编辑：这是 jsFiddle 中的一个示例：http: [//jsfiddle.net/XJbaM/](http://jsfiddle.net/XJbaM/)

在我的代码中，我的页脚中有两个图标，我想要的是删除页脚中的右图标 en center de left icon，图标上方的文本已经居中

解决了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:03:06.220

像这样添加一个包装器 div。

```
<div>
  <ul>
      <li>
          <div class="wrapper">
              <a href="img"></a>
          </div>
      </li>
  </ul> 
```

和包装器的css：

```
.wrapper {
       margin:0 auto;
       width: /* how big your img is PX EM % etc */;
       text-align:center;
} 
```

我在浏览器中对此进行了测试，并且可以正常工作。这是我使用的确切代码：您和我的混合

```
 <!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<style>
.center 
{
    width: 784px;    
    margin: 0 auto;
    border: 1px solid #000;
}
.center ul 
{
    width: 709px;
    line-height: normal;  

}
.center ul li 
{
    float: left;
    margin-right: 11px;
    border: 1px solid #000;
    width:500px;

}
.wrapper {
    margin:0 auto;
    width:500px;
    text-align:center;
}
.center ul li.last 
{
    margin-right: 0px;
}
.center ul li a
{   
    display:inline-block;
    height: 33px;
    width:100px;
}
.clear {
    clear:left;
}

.centering_ {background-image:url(img/activenav.png);
background-repeat:no-repeat;}
</style>
</head>

<body>
<div class="center">
                <ul>
                    <li><div class="wrapper"><a href="#" target="_blank" class="centering_"></a></div></li>

                </ul>
            <div class="clear">ss</div>
            </div>  
</body>
</html> 
```

现在我的海盗战利品呢？

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-02-08T13:54:23.913

将标签 < CENTER > 和 < /CENTER > 放置在整个 div 周围。它将使 div 居中。

```
<CENTER>
<div class="center">
                <ul>
                    <li><a href="#" target="_blank" class="centering_"></a></li>

                </ul>
            </div>  
</CENTER> 
```

# django - django-cms 编辑器和 HTML 数据属性清理

> ID：14774076
> 
> 赞同：3
> 
> 时间：2013-02-08T13:52:36.003
> 
> 标签：django, django-cms

使用 django-cms 2.4 我需要创建包含引导代码的页面，但使用的 html5lib 会清除 data-* 属性。无论您是否在 TINYMCE_DEFAULT_CONFIG 中指定 valid_element。（我仍在为 Wymeditor 寻找类似的选项），因为这是在 #plugins/text/models 中完成的（clean_html 函数：[https](https://github.com/divio/django-cms/issues/1529) ://github.com/divio/django-cms/issues/1529 ）

Github 问题： [https ://github.com/divio/django-cms/issues/1529](https://github.com/divio/django-cms/issues/1529)

可能的解决方法是什么？如何在管理部分扩展文本插件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T08:52:11.130

我相信删除字段是由 cms 用作 python 包的 html5lib 完成的，您需要打开 html5lib 文件夹并打开 sanitizer.py，在第 184 行，代码为：

```
if name in self.allowed_attributes]) 
```

改成：

```
if name in self.allowed_attributes or re.match( r'data-.*',name)]) 
```

这将允许所有数据（无论）属性

对于 WYMeditor，已经允许使用 data-(whatever) 属性

# vba - 关闭段落标记 Word 2007

> ID：14774078
> 
> 赞同：1
> 
> 时间：2013-02-08T13:52:44.120
> 
> 标签：vba, word-2007

如果打开了段落标记，有没有办法关闭它们？

我在网上搜索并没有找到任何东西，除了检查它们是否打开或关闭的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:57:41.787

该`ShowAll`物业是您正在寻找的。

打开：

```
ActiveWindow.ActivePane.View.ShowAll = True 
```

把关掉：

```
ActiveWindow.ActivePane.View.ShowAll = False 
```

检查段落标记是否打开，然后将其关闭：

```
If ActiveWindow.ActivePane.View.ShowAll = True Then
    ActiveWindow.ActivePane.View.ShowAll = False
End If 
```

# sql - 超长 Where/In 语句 - 更好的选择？

> ID：14774079
> 
> 赞同：1
> 
> 时间：2013-02-08T13:52:48.097
> 
> 标签：sql, excel, where

我有大约 13,000 个 AccountID，我需要使用左连接从多个数据表中提取各种数据。accountID 的总数以百万计。我没有对服务器的写访问权限，但我想知道是否有一种方法可以创建一个自定义/临时表并加入该表，而不是编写一个非常非常长的 Where AccountID in (.. ...） 陈述。accountID 当前位于单个 Excel 列中，因此我必须以某种方式将它们恢复到服务器中。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:32:26.830

您可以使用 OPENDATASOURCE 访问您的 Excel 文件，但必须有人将您的 Excel 文件推送到服务器（不理想）。

```
SELECT * FROM OPENDATASOURCE('Microsoft.Jet.OLEDB.4.0',
'Data Source=C:\DataFolder\Documents\TestExcel.xls;Extended Properties=EXCEL 5.0')...[Sheet1$] ; 
```

您可以要求您的 DBA 团队在您的本地计算机上安装一个 SQl 服务器客户端，并设置一个链接服务器到实时服务器，这样就完成了。要求他们设置您需要的数据的视图，并授予您访问该视图的权限。这就是你所需要的，我猜。

# c++ - 即使没有连接客户端，服务器设置也会在编译时保持打印“已连接”

> ID：14774093
> 
> 赞同：0
> 
> 时间：2013-02-08T13:53:38.750
> 
> 标签：c++, sockets

```
#include <iostream>
#include <WinSock2.h>
#include <Windows.h>

using namespace std;

SOCKET listener,connector;
SOCKADDR_IN myAddress,remoteAddress;

int main()
{ 
```

初始化网络窗口

```
WSAData wdata;
WSAStartup(MAKEWORD(2,2),&wdata); 
```

初始化监听器

```
ZeroMemory(&listener,sizeof(listener));
ZeroMemory(&connector,sizeof(connector));
listener = socket(AF_INET,SOCK_STREAM,0); 
```

为 struct SOCKADDR_IN myAddress 赋值

```
myAddress.sin_addr.s_addr = INADDR_ANY; //accept any ip
myAddress.sin_family = AF_INET;//tcp
myAddress.sin_port = htons(7000);//changing 7000 port to string with htons method 
```

绑定侦听器套接字和地址以指示侦听器在哪里查找

```
if(bind(listener,(LPSOCKADDR)&myAddress,sizeof(listener)))
{
    cout<< "bound";
}
//listen method
if(listen(listener,1));
{
cout<<"Waiting";
}
int Size = sizeof(remoteAddress); 
```

初始化无限循环以继续收听

```
while(true)
{
    connector = accept(listener,(LPSOCKADDR)&remoteAddress,&Size);
    //read connection request
    if(sizeof(connector)< 0)
    {
        cout <<"noinfo\n";
    }
}
} 
```

即使没有连接客户端，代码也不会显示“无信息”:O 我不知道我做错了:(请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:18:16.377

当然可以。您的代码中有很多错误：

1）你的`connector`大小不能小于0，所以`if(sizeof(connector)< 0)`检查总是错误的。改为使用`if(connector == INVALID_SOCKET)`。

`;`2）在语句末尾删除，`if`因为否则您的检查将变得毫无意义：

```
if(bind(listener,(LPSOCKADDR)&myAddress,sizeof(listener))) {...}
if(listen(listener,1)) {...} 
```

PS 贴出剩下的代码，我相信还有很多其他的错误有待发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:32:33.910

您的代码是正确的，但您必须用零填充结构 myAddress 而不是 Socket

```
ZeroMemory(&myAddress,sizeof(myAddress)); 
```

条件语句后的分号也没用

# android - 修复了 Android 2.3 上带有空白图标的页脚

> ID：14774098
> 
> 赞同：1
> 
> 时间：2013-02-08T13:53:47.730
> 
> 标签：android, css-position, image-masking

我们正在开发适用于 Android 和 iOS 的混合应用程序，并使用 html+css 来设置应用程序的样式。然而，我们现在无法解决一个问题：

由于我们希望支持 Android 2.3-4.2 和 iOS 5.1-6.1，我们尝试使用 'position:fixed' 作为固定页眉和页脚。为了能够在页脚的选项卡上使用漂亮的“发光”，我们使用 webkit-mask-image 和渐变背景。这适用于 iOS 和 Android 4+，但不适用于 Android 2.3。

此外，如果我们删除页面上的所有“固定”元素，图标会显示在 2.3 上。

它似乎与这个问题非常相似：[http](http://www.sencha.com/forum/archive/index.php/t-192463.html?s=9b3768697b19cd9957d1c0ee2b7fe6da) ://www.sencha.com/forum/archive/index.php/t-192463.html?s= 9b3768697b19cd9957d1c0ee2b7fe6da 但我们确实为 div 和这个问题标签使用 z-index Android 4.0.3 并在 Android 2.3 上运行。然而，Sencha 似乎没有使用 'position:fixed' 作为页眉和页脚。

有人对如何解决这个问题有建议吗？

![在此处输入图像描述](../Images/13178c9d3ba8475f5f4c6644ecae5a99.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T10:46:37.197

我对 SVG 图标也有同样的问题，我发现 Android <2.3[不支持 SVG](http://caniuse.com/#feat=svg)（使用默认浏览器）。

[本文介绍了一种使用](http://www.kendoui.com/blogs/teamblog/posts/12-02-17/using_svg_on_android_2_x_and_kendo_ui_dataviz.aspx)[canvg.js](https://code.google.com/p/canvg/)以画布呈现SVG的解决方案（即解决方法） 。

# c# - 为什么重命名加载的 .net 程序集有效？

> ID：14774099
> 
> 赞同：3
> 
> 时间：2013-02-08T13:53:49.107
> 
> 标签：c#, .net

我创建了 ac# .net(4.5) 命令行应用程序。此应用程序什么都不做，但保持打开状态：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("started");
        Console.ReadLine();
    }
} 
```

如果我在资源管理器中导航到这个文件，我可以在程序运行时用 F2 重命名它。

如果我尝试删除它，则会显示一条消息： ![在此处输入图像描述](../Images/a49151b27a45b836f5da13cb30eedb37.png)

我可以理解，无法删除已加载的程序集。将加载的程序集从一个文件夹移动到另一个文件夹也不起作用。

但是为什么可以改名呢？

这是故意的吗？是否有重命名现有/加载的程序集的用例？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T15:16:03.340

文件在文件系统中由两种主要结构表示。首先是*目录条目*，它存储有关文件的元数据。就像文件名、大小、属性和时间戳一样。接下来是存储文件数据的集群链。

加载程序集会导致为程序集创建内存映射文件。一种优化，它确保您只需为实际使用的组件部分付费。文件数据在实际需要之前不会被读入 RAM。Windows 等按需分页虚拟内存操作系统的核心功能。

内存映射文件对文件进行锁定，以确保文件*数据*不能被其他进程更改。那将是灾难性的，RAM 中的数据将不再与文件中的数据匹配。Windows 中的锁只保护文件*数据*，而不是文件的*元数据*。或者换句话说，您仍然可以修改文件的目录条目，只要这不会同时修改文件数据。

所以重命名文件不是问题，只会修改目录条目。即使将文件从一个目录移动到另一个目录也没有问题，这只会更改目录条目的位置，只要文件足够大以需要集群，它就不会修改文件数据。将文件从一个驱动器移动到另一个驱动器是一个问题，因为这需要一个同时删除原始文件数据的副本。无法删除文件，这也会删除文件数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:16:20.923

到目前为止，Imo 的最佳答案来自[https://superuser.com/questions/488127/why-can-i-rename-a-running-executable-but-not-delete-it](https://superuser.com/questions/488127/why-can-i-rename-a-running-executable-but-not-delete-it)

> 确实没有重命名文件这样的事情。一个文件可以有多个名称或没有名称，因此它不是您要重命名的文件，而是目录条目。重命名是对目录条目的操作，不受文件被锁定执行这一事实的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:58:39.087

重命名对于写入磁盘的内容并没有太大的改变，实际上它可能只会改变文件分配表和一些文件元数据。

出于这个原因，包含该程序的磁盘块仍然可以复制到内存或执行，尽管名称发生了变化。

# ios - 是什么导致 NSURLConnection 在完成之前停止接收？

> ID：14774101
> 
> 赞同：1
> 
> 时间：2013-02-08T13:54:06.287
> 
> 标签：ios, plist, nsurlconnection

我的游戏需要用我的服务器数据库中的一堆东西填充 tableView 单元格。这一直运作良好。然后我将 Xcode 升级到 4.6 并针对 iOS6.1，以取悦 App Review Team 的人。现在，我的一个连接永远不会完成。（所有其他帖子似乎都正常工作，一如既往。）这是我的帖子：

```
- (void) fillCells {
    Cell_QtoA *newCell = [[Cell_QtoA alloc] initCellUser:usrID Grp:grpID Qtn:0 Gnm:@"na" Cat:@"na" Sit:@"na" Pfl:@"na" Lks:0 isA:0 ddA:0 ];
    NSMutableURLRequest *reqPost = [SimplePost urlencodedRequestWithURL:[NSURL URLWithString:kFillCells] andDataDictionary:[newCell toDictC]];
    (void) [[NSURLConnection alloc] initWithRequest:reqPost delegate:self];
} 
```

我认为它工作正常。PHP 和数据库没有改变。昨天一切都很好，在升级之前。这是我的连接方法：

```
- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
   NSLog(@"data = %@", data);
   NSString  *error;
   NSArray *array = (NSArray *)[NSPropertyListSerialization propertyListFromData:data mutabilityOption:NSPropertyListImmutable format:0 errorDescription:&error];
   if( error ) {
       NSLog(@"Error = %@", error);
       return;
   }
   NSLog(@"1st object in array of %d is %@", [array count], array );
} 
```

因为我怀疑网速是个问题，所以我在通话中添加了一个计时器，这是我以前从未需要的：

```
timer = [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(fillCells) userInfo:nil repeats:YES]; 
```

计时器没有帮助。仍然得到错误：

```
"Unexpected EOF" and "Unexpected character z (or whatever) at Line 1" 
```

数据的 NSLog 显示了被截断的十六进制数据，例如：

```
<3c3f786d 6c207665 ... 63743e0a 3c2f6172 7261793e 0a3c2f70 6c697374 3e> 
```

这就像接收被中断。有人知道这里发生了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:33:12.407

您没有使用**所有**响应数据；如`NSURLConnectionDelegate` [参考文献](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)中所述：

> 新可用的数据。委托应连接交付的每个数据对象的内容，以构建 URL 加载的完整数据。

所以你需要创建一个`NSData`实例变量；在请求之前清除并在新数据到达时附加到它。然后使用`didFinishLoading`委托方法触发对`propertyListFromData`完整响应的调用。

# python - 编写我自己的 Linux 发行版

> ID：14774102
> 
> 赞同：-1
> 
> 时间：2013-02-08T13:54:15.640
> 
> 标签：python, c, linux

我最近有了编写自己的 Linux 发行版的想法。这个想法来自于想扩展我的编程知识，我已经了解了一点 Python，并且我开始为这个项目学习 C。我只是想知道从哪里开始？我实际上不知道我将如何开始编写发行版，我将不胜感激任何帮助决定首先做什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T13:55:38.993

从零开始尝试[Linux](http://www.linuxfromscratch.org/)：

> Linux From Scratch (LFS) 是一个项目，它为您提供构建您自己的自定义 Linux 系统的分步说明，完全来自源代码。

# c# - foreach 循环无法转换，但手动转换和 for 循环工作

> ID：14774109
> 
> 赞同：10
> 
> 时间：2013-02-08T13:54:27.977
> 
> 标签：c#, asp.net, gridview, file-upload, .net-3.5

当发现抛出***非空文件时，***此代码不起作用

> 无法将“System.String”类型的对象转换为“System.Web.HttpPostedFile”类型。

```
foreach (System.Web.HttpPostedFile f in Request.Files)
{
   if (f.ContentLength > 0 && f.FileName.EndsWith(".pdf"))
   {
      //work done here
   }
} 
```

我还测试了`Request.Files`数组中的每个项目，可以在调试模式下手动转换，如下所示（每个索引）

```
?(System.Web.HttpPostedFile)Request.Files[index]
{System.Web.HttpPostedFile}
    ContentLength: 536073
    ContentType: "application/pdf"
    FileName: "E:\\2.pdf"
    InputStream: {System.Web.HttpInputStream} 
```

但是，以下代码有效

```
for (index = 0; index < Request.Files.Count; index++)
{
   System.Web.HttpPostedFile f = Request.Files[index];
   if (f.ContentLength > 0 && f.FileName.EndsWith(".pdf"))
   {
      //work done here
   }
} 
```

知道出了什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-08T14:03:38.287

`Request.Files`是 a `HttpFileCollection`，而后者又是 a `NameObjectCollectionBase`。这并不明显，但`GetEnumerator()`for 会产生集合的*键*- 而不是项目本身。所以：

```
foreach(string key in Request.Files) {
    // fetch by key:
    var file = Request.Files[key];

    // ....
} 
```

不明显，特别是因为该集合是非泛型的`IEnumerable`，而不是`IEnumerable<string>`.

[至少](http://msdn.microsoft.com/en-us/library/system.collections.specialized.nameobjectcollectionbase.getenumerator.aspx)记录在案*：*

> 此枚举器将集合的键作为字符串返回。

但是：你认为迭代会给你*文件对象***并不是**不合理的。`Files`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T14:00:42.600

尝试如下..它会工作

```
foreach (string fName in Request.Files)
{
   System.Web.HttpPostedFile f = Request.Files[fName];
   if (f.ContentLength > 0 && f.FileName.EndsWith(".pdf"))
   {
      //work done here
   }
} 
```

**HttpFileCollection 返回文件的键，而不是 HttpPostedFile 对象..所以只有它抛出错误..***

# css - 带有许多（超过 20 个）步骤的 CSS 背景颜色

> ID：14774114
> 
> 赞同：2
> 
> 时间：2013-02-08T13:54:38.853
> 
> 标签：css, background, switch-statement, gradient, percentage

我需要我的对象根据某个值具有不同的背景颜色。特别是，它是一个百分比条，理论上有 100 种不同的背景颜色（当它为空时忽略不存在的颜色）。自然，条的宽度从 1% 到 100% 不等。我想知道，我怎样才能自动制作所有不同的色调？

我的基本想法是：如果我有一个 100 像素宽的图像，每个像素都有不同的颜色，我会尝试将背景宽度限制为 1 个像素，使用正确的偏移量，然后重复它。那样的话，它是一个单一的 CSS 属性，即偏移量，需要通过 JavaScript 进行更改，并且不需要在 100 个不同的类之间切换。遗憾的是，背景大小、背景位置和背景重复不是这样工作的。所以我的问题是：我有什么可能使它变得简单并且依赖于不超过 3 个线性依赖于百分比的数字 CSS 属性？

提前致谢。

**编辑**：我有一个想法，我尝试过，它有效。

我在 Photoshop 中创建了一个正好 100 像素高和 1 像素宽的图像。每个像素代表其百分比的颜色。因此，像素 0 表示 1%，像素 99 表示 100%。然后，我将该图像垂直拉伸至少进度条的高度。如果它是 20px 高，我将图像至少拉伸 20 倍。拉伸需要使用最近邻算法来完成，以防止在不应该有梯度的地方出现梯度；每个像素只需要垂直拉伸 20 倍，因此每 20 个像素就会出现锐边。

我将生成的图像用作仅水平重复的背景图像。使用图像位置，我设置了 background-position: 0 -[(percentage-1)*20]px 和 width: [percentage]%。（方括号中的部分是使用 PHP 或 JavaScript 或其他方式计算的）。差不多就是这样。每当百分比变化时，我只需要更改这两个值，背景就会自动适应，不管它的颜色如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:34:26.280

你的颜色需要有多不同？理论上，您可以根据不透明度或背景色指定的 alpha 值拥有 100 种不同的颜色。然后，您可以使用 html5 数据属性更改 alpha 以匹配条形的百分比。说你做了这样的事情：

```
<div class="progress" data-percentage="<?php echo $percentage; ?>"></div>

.progress {
    background-color: blue;
}

jquery:
$function() {
 $('.progress').css('opacity', $(this).data('percentage'));
} 
```

# configuration - nginx 与 nagvis 配置重写

> ID：14774118
> 
> 赞同：1
> 
> 时间：2013-02-08T13:54:50.793
> 
> 标签：configuration, nginx

我想在 nginx 上运行 nagvis。

我当前的配置如下所示：

```
# Nagvis Configuration
location /nagvis {
    alias /opt/nagvis/share;
}

location ~ ^(/nagvis/.*\.php)(.*)$ {
    root /opt/nagvis/share/;
    include fastcgi_params;
    fastcgi_index index.php;
    fastcgi_split_path_info ^(.+\.php)(.*)$;
    fastcgi_param PATH_INFO $fastcgi_path_info;
    fastcgi_param SCRIPT_FILENAME $document_root/$fastcgi_script_name;
    fastcgi_pass unix:/var/run/fcgiwrap-php.sock;
} 
```

请求的 URL 是：..localhost/nagvis/index.php 定向到文件系统：/opt/nagvis/share 但是 index.php 包含重定向到 ..localhost/frontend/nagvis-js/index 的 config.php。 php 导致 404 文件未找到错误。日志告诉我它正在寻找一个完全不同的地方。

那么为什么它会删除“nagvis” url 部分，以及如何获得正确的重写呢？

# log4j - 如何将 log4j 与 udp 一起使用

> ID：14774119
> 
> 赞同：3
> 
> 时间：2013-02-08T13:54:55.387
> 
> 标签：log4j, udp

谁能告诉如何将 log4j 用于 UDP 数据包？我需要我的程序使用 log4j，以便它将数据传递给检索 UDP 数据包的侦听器。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:14:58.793

为了通过 UDP 进行日志记录以适用于 Log4j 1.2，我们已经从现已废弃的（？）“Apache Receivers Companion for log4j 1.2”项目（用于从废弃的 Log4j 1.3 项目向后移植可用代码）下载 UDPAppender 的源代码并自己编译它. 最初的测试表明它工作正常，但希望你注意到我在上面两次使用了“放弃”......

项目页面： http: [//logging.apache.org/log4j/companions/receivers/index.html](http://logging.apache.org/log4j/companions/receivers/index.html)

源代码（不在项目页面链接的仓库中，他们已将其移至“附加”）：http: [//svn.apache.org/viewvc/logging/log4j/companions/extras/trunk/src/main/java /org/apache/log4j/receivers/net/](http://svn.apache.org/viewvc/logging/log4j/companions/extras/trunk/src/main/java/org/apache/log4j/receivers/net/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T11:34:53.427

我能够成功地将 log4j 与 UDP 服务器集成。这就是我所做的。我使用了 log4j2：

这两个jar文件是

*   log4j-core-2.0-beta4.jar
*   log4j-api-2.0-beta4.jar

客户端发送`logger.debug("Test message");`.

服务器接收它如下：

```
import org.apache.logging.log4j.core.LogEvent;

LogEvent logEvent = null;
ObjectInputStream obj = null;

enter code here
bis = new ByteArrayInputStream(UDPpacket.getData());
obj = new ObjectInputStream(bis);
logEvent = (LogEvent) obj.readObject();

System.out.println("Got it : " + logEvent.toString());
System.out.println("Got Message : "+ logEvent.getMessage().getFormattedMessage()); 
```

# android - 当 ScrollView 滚动到底部时加载更多数据

> ID：14774121
> 
> 赞同：6
> 
> 时间：2013-02-08T13:55:12.037
> 
> 标签：android, android-scrollview

我有一个滚动视图，可以动态加载内容。有时可能会有很多内容，所以我想在用户滚动到底部时加载更多内容。

我搜索了合适的方法，发现了两个：

```
onScrollChanged() 
```

和

```
getScrollY() 
```

但我不知道如何将它用于我的目的。请给我一些建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T14:48:40.533

滚动视图不提供任何方法来检查您是否已到达视图底部，因此最好的技术是使用滚动视图扩展您自己的自定义视图。这就是我在我的应用程序中实现的方式。

**第 1 步：为滚动视图创建自定义类**

```
public class ObservableScrollView extends ScrollView {

private ScrollViewListener scrollViewListener = null;

public ObservableScrollView(Context context) {
    super(context);
}

public ObservableScrollView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public ObservableScrollView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public void setScrollViewListener(ScrollViewListener scrollViewListener) {
    this.scrollViewListener = scrollViewListener;
}

@Override
protected void onScrollChanged(int x, int y, int oldx, int oldy) {

    View view = (View) getChildAt(getChildCount() - 1);
    int diff = (view.getBottom() - (getHeight() + getScrollY()));
    if (diff == 0) { // if diff is zero, then the bottom has been reached
        if (scrollViewListener != null) {
            scrollViewListener.onScrollEnded(this, x, y, oldx, oldy);
        }
    }
    super.onScrollChanged(x, y, oldx, oldy);
} 
```

}

**第二步：创建滚动视图监听器接口**

```
public interface ScrollViewListener {

void onScrollEnded(ObservableScrollView scrollView, int x, int y, int oldx, int oldy);

 } 
```

**第 3 步：在布局中添加视图**

```
 <com.platinumapps.facedroid.ObservableScrollView
        android:id="@+id/scrollView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </com.platinumapps.facedroid.ObservableScrollView> 
```

**第 4 步：在您的类中实现该接口**

```
 public class MyFragment extends Fragment implements ScrollViewListener 

@Override
public void onScrollEnded(ObservableScrollView scrollView, int x, int y, int oldx,   int oldy) {

           //Perform your action
} 
```

**你完成了**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-08T14:19:59.087

我认为更好的方法是使用`ListView`。但如果你只需要`ScrollView`。

首先，您修复您的阈值高度，`ScrollView`因此每当您越过该限制时，加载新数据并附加到`ScrollView`并重置您的阈值高度。

这个可以试试。。

创建一个`ScrollView`这样的自定义。

```
public class ObservableScrollView extends ScrollView
{

    private ScrollViewListener scrollViewListener = null;

    public ObservableScrollView(Context context)
    {
        super(context);
    }

    public ObservableScrollView(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
    }

    public ObservableScrollView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
    }

    public void setScrollViewListener(ScrollViewListener scrollViewListener)
    {
        this.scrollViewListener = scrollViewListener;
    }

    @Override
    protected void onScrollChanged(int x, int y, int oldx, int oldy)
    {
        super.onScrollChanged(x, y, oldx, oldy);
        if (scrollViewListener != null)
        {
            scrollViewListener.onScrollChanged(this, x, y, oldx, oldy);
        }
    }

} 
```

& 然后创建一个界面

```
public interface ScrollViewListener 
{
    void onScrollChanged(ObservableScrollView scrollView, int x, int y, int oldx, int oldy);
} 
```

& 你的 XML 布局应该是这样的

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.solve.stackoverflow.ObservableScrollView
        android:id="@+id/endless_scrollview"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <LinearLayout
            android:id="@+id/endless_scrollview_layout"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" />
    </com.solve.stackoverflow.ObservableScrollView>

</LinearLayout> 
```

&最后在你的活动中使用所有这些

```
public class EndLessActivity extends Activity implements ScrollViewListener
{
    ObservableScrollView scrollView;
    LinearLayout layout;

    int threshold = 20; //Setting threshold 

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.endless_scrollview);
        scrollView = (ObservableScrollView) findViewById(R.id.endless_scrollview);
        layout = (LinearLayout) findViewById(R.id.endless_scrollview_layout);
        scrollView.setScrollViewListener(this);
        appendData();
    }

    @Override
    public void onScrollChanged(ObservableScrollView scrollView, int x, int y, int oldx, int oldy)
    {
        // TODO Auto-generated method stub
        if (y > threshold)
             appendData();
    }

    void appendData()
    {
        for (int i = 0; i < 15; i++)
        {
            threshold += 10;//Reseting threshold.
            TextView tv = new TextView(this);
            tv.setBackgroundResource(R.drawable.ic_launcher);
            layout.addView(tv);
        }
    }
} 
```

试试这个，让我知道它是否能解决你的问题。

谢谢

# javascript - 表面覆盖谷歌地图

> ID：14774126
> 
> 赞同：0
> 
> 时间：2013-02-08T13:55:24.200
> 
> 标签：javascript, google-maps

这是设置：

我有一辆车在谷歌地图上的特定区域内行驶。该区域由多边形确定。汽车通过 GPS 进行跟踪，您可以在地图上看到它在移动。

我想知道汽车在离开多边形之前在其路线上覆盖了该多边形区域的哪些部分，并以绿色显示覆盖的部分和红色的未覆盖部分（这些也将是多边形，对吗？）。

我根本不要求任何代码，只要求算法如何为此目的工作。

如果有人可以给我一些指示，我会很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:19:43.403

您最好先将多边形着色为红色，然后根据历史位置覆盖绿色多边形。该算法最终将创建一个具有唯一 lons 的所有最大/最小 lats 的列表，以及具有唯一 lats 的所有最小/最大 lons 的列表。如果这对您来说信息不足，请告诉我，我可以进一步详细说明。

# ios - XCode 警告：“/* 在块注释内”

> ID：14774127
> 
> 赞同：5
> 
> 时间：2013-02-08T13:55:35.043
> 
> 标签：ios, xcode

我真的很喜欢通过这样评论来临时启用和禁用代码部分：

```
/*
some code
/**/ 
```

（注意

> /**/

代替

> */

在最后）

但是，XCode 不断给我警告：

```
/* within block comment 
```

有没有办法“自定义禁用”特定警告？

为什么？我会告诉你为什么：因为我可以很容易地只用一个字符来输入和输出，而无需向下滚动块来输入和输出“*/”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T13:59:07.993

当我想暂时删除我使用的代码块时：

```
#if 0
somecode();
#endif 
```

这避免了这个问题，以后很容易发现。

如果我想稍后暂时重新启用该代码，那么我只需将其翻转`0`为`1`：

```
#if 1
somecode();
#endif 
```

但是，如果此启用/禁用需要更明显且更易于控制，那么我将使用在源文件顶部定义的常量：

```
#define SOME_FANCY_FEATURE 1

...

#if SOME_FANCY_FEATURE
somecode();
#endif // SOME_FANCY_FEATURE 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-10T08:47:51.680

对我来说真正的答案（只是禁用 XCode 警告，而不更改遗留代码中的任何行）在这里：[https ://stackoverflow.com/a/21046102/540639](https://stackoverflow.com/a/21046102/540639)
**Apple LLVM 6.0 Custom Compiler Flags -> Other Warning Flags -> -无评论**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-17T09:50:25.163

我找到了一个非常好的替代方案：

```
/*    
some code
/**/ 
```

你可以只使用这个变体：

```
/*
some code
//*/ 
```

在没有任何 Xcode 警告的情况下实现相同的目标！

# android - 固定页脚导航栏下的表单字段具有更高的点击优先级，如导航栏项目

> ID：14774133
> 
> 赞同：0
> 
> 时间：2013-02-08T13:55:49.520
> 
> 标签：android, cordova, jquery-mobile

我有带有选择框和输入字段的长页面以及带有图标（页脚菜单）的固定导航栏。如果用户单击导航栏项目并且选择框位于导航栏下方 - 选择框会展开并在点击时做出反应 - 导航栏不会做出反应。每一个答案都将不胜感激。

代码示例：

```
<div data-role="content">   
        <form id="profileForm">
<label for="sex">Pohlavie:</label>
            <select name="sex" id="sex" data-theme="a" onchange="check_profile_form()">
               <option value="0" placeholder></option>
               <option value="1">žena</option>
               <option value="2">muž</option>
            </select>
</form> 
    </div>    
<div data-role="footer" data-position="fixed" data-toggle="false">
        <div data-role="navbar" data-theme="c">
            <ul>
                <li><a href="#" data-theme="c"><img src="img/ikony_05.png" class="footer_image" /></a></li>
                <li><a href="#" data-theme="c"><img src="img/ikony_06.png" class="footer_image" /></a></li>
                <li><a href="#" data-theme="c" class="ui-btn-active ui-state-persist"><img src="img/ikony_07.png" class="footer_image" /></a></li>
                <li><a href="#" data-theme="c"><img src="img/ikony_08.png" class="footer_image" /></a></li>
            </ul>
        </div>
</div> 
```

![移动应用截图](../Images/8d4058429377c100ea1a3c656bfb1adf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:48:40.527

这是正常的 javascript 行为。

没有像导航栏项目那样更高的点击优先级。

在您的情况下，当带有导航栏的标题是固定的并且打开了全屏属性时，页面标题将覆盖部分页面内容。当导航栏选项卡触发单击事件时，相同的事件将传播到下面找到的所有元素（在您的情况下，它是一个选择框）。

为了防止这种情况发生，你应该在导航栏 li 元素上绑定你自己的点击事件（就像你可能这样做，因为你有 href="#"）并在你的点击事件中，使用这个：

```
event.stopPropagation();
event.stopImmediatePropagation(); 
```

可以在此处找到更多相关信息；：

*   [http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)
*   [http://api.jquery.com/event.stopImmediatePropagation/](http://api.jquery.com/event.stopImmediatePropagation/)

这是一个示例： http: [//jsfiddle.net/Gajotres/Xz2np/](http://jsfiddle.net/Gajotres/Xz2np/)，单击蓝色框以查看差异。

# c++ - 混合在堆和堆栈上创建的向量对象

> ID：14774134
> 
> 赞同：1
> 
> 时间：2013-02-08T13:55:55.737
> 
> 标签：c++, heap-memory, new-operator

我有一个相当简单的问题，但无法解决。

考虑我有这个代码：

```
#include <iostream>
#include <vector>
using namespace std;

class B
{
public:
    B(const int& val) {this->val = val;}
    int val;
};

class A
{
public:
    A() {}
    void Set(B& ptb)
    {
        ptBs.push_back(&ptb);
    }
    void Set(const int& val)
    {
        ptBs.push_back(new B(val));
    }
    std::vector<B*> ptBs;
};

int main()
{
    A* ptA = new A();
    ptA->Set(B(10));
    ptA->Set(38);

    for (int i=0; i<ptA->ptBs.size(); i++)
        cout << ptA->ptBs[i]->val << endl;

    delete ptA;

    system("pause");
    return 0;
} 
```

输出结果为：

```
10
38 
```

但是我认为`void Set(const int& val)`如果我不使用此方法创建的数组元素调用 delete，就会发生内存泄漏。

我怎么说，std::vector 的哪些元素是在堆上创建的，所以我可以像这样在 ~A() 析构函数中释放内存：

```
~A()
{
    for (int i=0; i<ptBs.size(); i++)
        delete ptBs[i];
} 
```

我是否必须删除通过临时新操作调用创建的矢量元素？

可能我在这里没有看到非常简单的东西，但我的应用程序中确实需要这个功能。

PS。10 和 38 只是一个简单的例子。`Set`函数可以用不同的参数调用数千次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:22:21.783

幸运的是，这一行不会编译：

```
ptA->Set(B(10)); 
```

这是因为`B(10)`是一个构造函数强制转换表达式，它创建了一个 prvalue 临时类型`B`；prvalue 无法绑定到 的左值引用`B &`参数`void A::Set(B& ptb)`。这是 C++ 语言保护您免受将悬空指针存储到临时值的后果。

`A`按值存储项目通常更有意义`B`：

```
std::vector<B> Bs; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:58:49.263

您应该决定是否将类型对象的所有权授予`B`实例`A`。将两者混合不会带来任何好处。想象一下记录这个类：`this class may or may not take ownership to the objects it holds.`

我不推荐的另一种方法是创建一个指向指针的包装器`B`，它在它的构造函数中接受一个指向 B 的指针和一个布尔标志，布尔标志将指示指针是指向堆栈上分配的对象还是指向对象在堆上。

# javascript - 更改域 http/https 喜欢的快速方法？

> ID：14774135
> 
> 赞同：-1
> 
> 时间：2013-02-08T13:56:00.237
> 
> 标签：javascript, facebook, plugins, facebook-like, social

比方说，我在一个网站的主页上有 1020 个赞，即`http://www.mypage.com`.

现在，我买了一个https，页面当然是`https://www.mypage.com`.

好吧，“链接”是不同的，但仅适用于 https。这是一种迫使社交媒体说“这实际上是有 1020 个赞的同一页面”的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:00:28.850

恐怕这是不可能的。但是，可以使用您想要的任何 url 填充like 按钮。实际上，您可以在[https://www.mypage.com](https://www.mypage.com)上为[http://www.mypage.com设置一个赞按钮](http://www.mypage.com)

```
<div class="fb-like" data-href="http://www.mypage.com" data-send="true" data-width="450" data-show-faces="true"></div> 
```

您仍然会为旧网址收集点赞，但没有人会知道其中的区别。

# iphone - 用于扫描错误 Code39 条码的应用程序（无开始/停止字符）

> ID：14774138
> 
> 赞同：2
> 
> 时间：2013-02-08T13:56:20.470
> 
> 标签：iphone, barcode-scanner, zbar-sdk, zbar, code39

我必须使用 iPhone 应用程序阅读一组使用 Code39 字体生成的条形码，但缺少前导/尾随“星号”，因此它们被认为是无效的，并且被我尝试过的任何应用程序简单地忽略（来自应用商店）。

除了星号之外，代码的格式很好，所以我想知道是否有办法强制条形码阅读器读取它，尽管缺少字符。

我找到了应用程序的来源（例如[ZBar](http://zbar.sourceforge.net/iphone/)），但它们依赖于封闭的库......

有什么提示吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T07:42:02.590

code39 需要一个开始和结束符号，否则扫描仪不知道条形码从哪里开始或结束（例如，如果您在表格中使用条形码）。尝试用星号掩盖你的字符串。

```
'*' + ls_yourString + '*' 
```

干杯， http: [//intermediabay.de/wordpress/](http://intermediabay.de/wordpress/)

# java - ANT Jenkins 单元测试 - 计算失败的测试

> ID：14774143
> 
> 赞同：1
> 
> 时间：2013-02-08T13:56:28.030
> 
> 标签：java, unit-testing, ant, jenkins

**我想计算失败的测试，并在所有测试完成后只失败一次。这些测试由 Jenkins 每晚运行，并在出现故障或错误时报告结果。**问题是我什至无法开始计数，因为它只有 failureProperty 和 errorProperty 可以是真或假，但是当它到达第一个失败或错误的测试时，它会停止并失败。我没有用谷歌找到好的解决方案，他们向我推荐了这些属性，但他们没有做我需要的。

这是代码：

```
 <junit printsummary="true" fork="yes" forkmode="once" 
showoutput="false" haltonfailure="no" maxmemory="1024m" 
errorProperty="test.failed" failureProperty="test.failed">
            <classpath refid="junit.classpath" />
            <batchtest fork="yes" todir="${junit.dir}/raw" >
                <formatter type="xml" />
                <fileset dir="${classes.dir}">
                    <include name="**/*Test.class" />
                    <exclude name="*ear*/**"/>
                    <exclude name="**/Base*.class" />
                    <exclude name="**/JNDI*.class" />
                </fileset>
            </batchtest>
        </junit>
    <fail message="At least one test failed or has errors, please check test results in Jenkins to see details!" if="test.failed" /> 
```

我错过了什么重要的事情吗？在这种情况下，似乎*haltonfailure="no"*参数不起作用。

如果您能帮助我，请提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:21:39.543

Also check [this answer](https://stackoverflow.com/a/327619/463824) from another similar question on how to configure your junit target both for execution and report generation. Once you generate the report, configure with the JUnit test report generation post build action.

Also have you tried using printsummary="withOutAndErr" and checked? This works completely fine for me.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:05:32.367

您需要使用 ant 的`junitreport`. 这会输出一个 xml 文件，jenkins 会很好地为您计算和显示，如果您有兴趣，还可以显示进化图等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T14:12:23.310

将 JUnit 属性`haltonerror`和设置`haltonfailure`为 false。然后使用各种报表工具解析生成的报表。报告可以是 XML 格式，您可以使用[JUnitreport](http://ant.apache.org/manual/Tasks/junitreport.html)来解析文件。我更喜欢 Jenkins，它会向我展示每个构建、失败的 JUnit 测试的数量以及各种漂亮的报告。其他人使用各种 XSLT 程序（JUnitreport 就是这样）。

**注意事项**：如果您使用 JUnitReport，您可能需要在 Ant 的 lib 目录中添加一些额外的 jar。我有一段时间没有使用过 JUnitReport，但我记得我需要 Xalan，但这是现在 Java 附带的东西。

# php - 获取 id 然后将其放入 href

> ID：14774145
> 
> 赞同：0
> 
> 时间：2013-02-08T13:56:32.970
> 
> 标签：php, .htaccess, redirect, get, href

我对此有点陌生，很抱歉，如果这已经被覆盖了，但我正在兜圈子搜索。

我环顾四周，了解如何编辑 htaccess 和使用 get 函数，然后我什至发现了一个类似的名为重定向的插件。

我想做的是如果我有一个 URL [http://example.com/file.php?id=blue](http://example.com/file.php?id=blue)

是抓住“蓝色”的id

然后在href链接中动态地将其添加到另一个url的末尾

```
 <a href="http://www.domain.com/file.php?id=blue">Link Example</a> 
```

如果有人可以帮助向我展示或指出正确的方向，了解如何将 id 设为蓝色并将其添加到 href 中，那就太好了。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:24:44.030

您必须使用 $_GET。人们可能在这里对此感到很讨厌——但是当我第一次学习编程时，我也遇到了困难。你会得到的，别担心。

这就是 get 的工作方式（至少，你需要知道它是如何工作的）：

如果您有文件**index.php** 如果您将查询字符串添加到它的末尾，例如**index.php?id=1** 您可以通过在代码中执行以下操作来访问 id=1：

```
$id = $_GET['id']; 
```

同样，如果查询字符串包含以下**index.php?id=1&page=5&par=3&club=putter&upnext=tigerwoods**

等号的左边是 Key(id, page, par, club, upnext)，右边是它们的值(1,5,3,putter,tigerwoods)

要记住的一件事是，当从查询字符串中检索数字时，它们将始终是字符串类型，所以你不能做类似的事情

```
if ( $_GET['page'] === 5 ) 
```

你必须做

```
if ( $_GET['page'] == 5 ) 
```

并将其回显到链接中：

```
$club = $_GET['club'];

 if ( $club == 'NRA' ) {
         echo "<a href='file.php?page=$club' title="lets buy some guns!">Gun Show</a>";
         echo 'Buy tickets to my gunshow ^^';
   } 
```

希望这可以帮助！

您还可以设置您的网站，使其具有一个模板，并使用 $_GET 参数通过切换命令确定将哪些文件包含到网站的内容部分中。我这样做，但不是在我的整个网站上。对于我的用户控制面板，我这样做只是为了只包含必要的文件（更改电子邮件、更新密码、删除帐户、更新配置文件等）

卡皮切？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:57:48.717

使用`$_GET`参数。

[耶！！]

# c++ - C++ 隐式类型何时初始化为 0？

> ID：14774152
> 
> 赞同：6
> 
> 时间：2013-02-08T13:56:53.533
> 
> 标签：c++, initialization, built-in-types

在和同事讨论后，我产生了一些疑问......

正如标题所问，什么时候可以假设内置类型将被初始化为 0 而不是未知值？

c++ 标准之间的规则是否有所不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T14:03:58.483

完整的规则在 [dcl.init] (C++11) 中。总结一下：当声明中没有提供初始化器时，实体被称为*默认初始化。*对于类类型，这意味着调用默认构造函数。对于非类类型，这意味着**不执行初始化。**

但是，[dcl.init] §9 规定：“在程序启动时，在任何其他初始化发生之前，每个静态存储持续时间的对象都被初始化为零。”

这意味着非类类型的静态持续时间变量（例如命名空间范围变量）是零初始化的。非类类型的其他对象（例如局部变量）**未**初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T14:11:19.937

## 理论：

根据**C++98**和**C++03**标准：

**3.6.2 非本地对象的初始化，§1**：

> 具有静态存储持续时间（3.7.1）的对象应在任何其他初始化发生之前进行零初始化（8.5）。

**3.7.1 静态存储持续时间，§1**：

> 所有既不具有动态存储持续时间也不是本地对象的对象具有*静态存储持续时间。*

**3.7.1 静态存储持续时间，§3**：

> 该关键字`static`可用于声明具有静态存储持续时间的局部变量。

还有**8.5 Initializers, §6**：

> 每个静态存储持续时间的对象都应在程序启动时进行零初始化，然后再进行任何其他初始化。

这在两个标准中是相同的。唯一的区别在于**C++98 的 8.5 §6 的制定**：

> 任何具有静态存储持续时间的对象所占用的内存都应在程序启动时进行零初始化，然后再进行任何其他初始化。

* * *

## 例子：

这是示例，其中`x`和`y`具有静态存储持续时间，因此标准保证它们在程序启动时都将被零初始化。请注意，还有 POD 对象`a`并`b`以相同的方式声明，因此具有静态存储持续时间，这意味着它们的成员 (`i`和`d`) 也将被零初始化：

```
struct POD {
    int i;
    double d;
};

int x;
POD a;

int foo() {
    static int y;
    return y;
}

int main() {
    static POD b;
    std::cout << "x   = " << x      << std::endl;
    std::cout << "y   = " << foo()  << std::endl;
    std::cout << "a.i = " << a.i    << std::endl;
    std::cout << "b.d = " << b.d    << std::endl;
} 
```

这个例子的输出当然是：

```
x   = 0
y   = 0
a.i = 0
b.d = 0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T14:12:00.570

而不是回答您发布的确切问题，之前已回答：*只有具有静态存储的 POD 对象将自动初始化为 0*，我将尝试提供一些代码来让编译器为您初始化成员：

```
struct POD {
   int    a;
   double b; //...
};
// namespace level:
POD p;
void f() {
   POD n1;                  // uninitialized
   POD p1 = {};
   POD p2 = POD();
   POD* n2 = new POD;       // uninitialized
   POD* pp1 = new POD();
   delete n2; delete pp1;
} 
```

在上面的例子中，只有那些标有“未初始化”的不会被初始化。请注意，这是关于标准要求的内容，您的里程会因不同的编译器而异。特别是 VS 在某些情况下存在一些问题（IIRC `T t = T();`，`T* p = new T()'`当类型`T`不是 POD，但没有用户提供的默认构造函数时，编译器将无法初始化 POD 子对象：

```
struct T {
   std::string s;
   int         i;
};
void f() {
   T t = T();    // t.i == 0 according to the standard
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-08T13:59:50.330

我不会假设任何隐式类型都将初始化为 0。当您在调试器内部运行并使用调试堆/堆栈时，您可能会发现这种情况。当您在调试器之外或通过 _NO_DEBUG_HEAP=1 环境变量禁用调试堆时，您会发现大多数情况下内存未初始化。

根据经验，初始化变量，因为以这种方式编程更安全。

编辑：正如 Luchian Grigore 所指出的，全局/命名空间范围变量是一个例外。由于这种初始化，它们通常也不适用于未初始化的变量检查。

# haskell - 在第一次出现 x 之前插入元素 y 的函数？

> ID：14774153
> 
> 赞同：2
> 
> 时间：2013-02-08T13:56:58.513
> 
> 标签：haskell

我是 Haskell 的新手。我正在尝试编写一个函数，给定列表**l** 、列表中存在的元素**x以及要插入****y**的元素：在列表 l 中第一次出现元素 x 之前插入元素 y。**如果列表中不**存在元素 x ，则保持列表不变。

我在这个问题上遇到了很多麻烦，如果有任何建议，我将不胜感激。

这是我尝试过的（'n' 是元素 x 的第一次出现）：

```
insertSpecial :: Eq a => a -> a -> [a] -> [a]
insertSpecial let (ys,zs) = splitAt n xs in ys ++ [y] ++ zs 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T14:04:43.257

怎么样

```
insertSpecial :: Eq a => a -> a -> [a] -> [a]
insertSpecial x y []              = []
insertSpecial x y (a:as) | a == x = y:a:as
insertSpecial x y (a:as)          = a : insertSpecial x y as 
```

这种方法使用一种称为**递归**的通用方法。这意味着手头的任务被分解为一个或几个**基本案例**，其结果可以很容易地定义，而一般案例可以通过将工作分解为多个部分来解决。在一般情况下，然后在较小的任务上*递归调用该函数。*目标是最终以基本情况结束，此时工作已完成。另请参阅[*Learn you a Haskell*](http://learnyouahaskell.com/recursion)[中的这一部分](http://learnyouahaskell.com/recursion)*。*

 *因为`insertSpecial`我们可以定义两个基本情况：

1.  如果列表为空，则它不包含我们要查找的元素，并且我们希望在这种情况下保持列表不变，因此我们只需返回一个空列表。我们完成了。

2.  如果列表不为空**并且**第一个元素是我们要查找的元素，我们将保留`y`在该列表的前面并返回它。我们又完成了。

这给我们留下了列表不为空但第一个元素不是我们要查找的元素的情况。在这种情况下，我们将工作（列表）分成两部分：第一个元素和其余元素。`insertSpecial`我们将第一个元素放在通过调用列表的其余部分返回的列表的前面。这就是递归发生的地方：`insertSpecial`调用本身。

关于这一点可能有点难以理解的一件事是，最后一种情况如何通过在正确的位置插入一个元素来生成一个与原始列表不同的列表。让我们考虑一个例子。假设我们有清单

```
['h','e','l','o'] 
```

请注意，在 Haskell 中，常规字符串只是字符列表，所以`['h','e','l','o'] == "helo"`. 另请注意，这`['h','e','l','o']`实际上是`'h':'e':'l':'o':[]`. (`:`接受一个元素和一个列表并将该元素添加到列表中。它也称为*cons* )。

`'l'`现在让我们在前面插入缺失的内容`'o'`：

```
 insertSpecial 'o' 'l' "helo" 
```

由于`"helo"`is not empty`'h'`被绑定到`a`并且`"elo"`被绑定到`as`（此外，`'o'`被绑定到`x`并且`'l'`被绑定到`'y'`）。由于`a == 'h' /= 'o' == x`我们是第三种情况，所以

```
 insertSpecial 'o' 'l' ('h':"elo") = 'h' : insertSpecial 'o' 'l' "elo" 
```

现在`insertSpecial 'o' 'l' "elo"`我们再次陷入第三种情况（`"elo"`不是空的和`'o' /= 'e'`）：

```
 insertSpecial 'o' 'l' ('e':"lo") = 'e' : insertSpecial 'o' 'l' "lo" 
```

这又导致了第三种情况：

```
 insertSpecial 'o' 'l' ('l':"o") = 'l' : insertSpecial 'o' 'l' "o" 
```

现在在最后一个调用中，我们实际上绑定`'o'`了`a`等于，`x`然后我们进入第二种情况，在这种情况下，我们将 () 的值`y`添加`'l'`到`a`( `'o'`) 和`as`( `[]`)，所以我们得到：

```
insertSpecial 'o' 'l' ('o':[]) | 'o' == 'o' = 'l' : 'o' : [] 
```

将所有这些替换放在一起，我们得到：

```
insertSpecial 'o' 'l' "helo" = 
'h' : insertSpecial 'o' 'l' "elo" =
'h' : 'e' : insertSpecial 'o' 'l' "lo" = 
'h' : 'e' : 'l' : insertSpecial 'o' 'l' "o" =
'h' : 'e' : 'l' : 'l' : 'o' : [] 
```

并且如上所述`'h' : 'e' : 'l' : 'l' : 'o' : [] == ['h','e','l','l','o'] == "hello"`。耶。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T14:10:10.493

您可以在满足条件的第一个位置进行拆分，而不是在索引处拆分，

```
insertSpecial y x xs = front ++ [y] ++ back
  where
    (front, back) = break (== x) xs 
```

如果你想要一个错误以防你的假设`x`是列表的一个元素不满足，

```
insertSpecial y x xs = case break (== x) xs of
                         (front, back@(_:_)) -> front ++ [y] ++ back
                         _ -> error "Didn't find element" 
```

但是直接递归也是一个很好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T00:00:53.960

```
insertSpecial::[Int]->Int->Int->[Int]
insertSpecial [] _ _ = []
insertSpecial list a b = concat [if x == a then [b] ++ [x] else [x] | x<-list] 
```

inserts b before a

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T14:06:43.867

有三种情况

```
insertSpecial :: Eq a => a -> a -> [a] -> [a]
insertSpecial _ _ []                 = ?
insertSpecial x y (a:as) | a == x    = ?
                         | otherwise = a : rest
  where rest = ? 
```

每一个会发生什么？

第一种情况是您肯定知道该元素不在列表中，因为列表为空。然后返回相同的空列表。

下一种情况是列表的第一个元素是您要查找的元素。然后你只需要返回同一个列表，前面加上 y 。

最后一个递归 case ( `otherwise`) 是第一个元素不是您要查找的元素，但它可能仍在列表的其余部分中。然后你需要添加到`a`列表的其余部分，其中列表的其余部分`as`在`y`第一次出现之前添加`x`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-17T21:16:18.190

[就折叠](https://en.wikipedia.org/wiki/Fold_(higher-order_function))而言的一般预测`beforeEvery`发生

```
beforeEvery pred y  =  foldr (\ x xs -> if pred x then y : x : xs else x : xs) [] 
```

显式展开的递归函数在第一次出现后终止

```
before :: (a -> Bool) -> a -> [a] -> [a]
before _    _ []                   = []
before pred y (x : xs) | pred x    = y : x : before pred y xs
                       | otherwise = x : before pred y xs 
```

这样

```
beforeElem x y  =  before (== x) y 
```

或者

```
beforeElem :: Eq a => a -> a -> [a] -> [a]
beforeElem x y  =  before (== x) y 
```

意义

```
beforeElem 3 89 [1,2,3,4,5,3,4,5]  ==  [1,2,89,3,4,5,3,4,5] 
```*

# json - 为什么更新操作没有发布任何数据？

> ID：14774155
> 
> 赞同：5
> 
> 时间：2013-02-08T13:57:07.263
> 
> 标签：json, asp.net-mvc-3, asp.net-mvc-4, kendo-ui, kendo-grid

我正在使用带有内联编辑的 Kendo Grid。当我单击“更新”按钮时，会使用此签名对我的控制器方法进行 POST。控制器动作被击中，因此 POST 正在工作。

```
[HttpPost]
    public HttpResponseMessage SaveAccountAdmin(string jsonCompanyContacts) 
```

但是，更新操作中的 POST 数据永远不会到达 - 它始终为空。

```
update: {
              url: "/Company/SaveAccountAdmin",
              contentType: "application/json; charset=utf-8",
              type: "POST",
              dataType: "json",
              data: {
                  jsonCompanyContacts: "John Doe"
              }
          }, 
```

这是完整的数据源代码。

```
var dataSource = new kendo.data.DataSource(
  {
      batch: false,
      pageSize: 10,

      transport: {
          create: {
              url: "/Company/SaveAccountAdmin",
              contentType: "application/json; charset=utf-8",
              type: "POST",
              dataType: "json"
          },

          read: {
              url: "/Company/ReadAccountAdmin"
          },

          update: {
              url: "/Company/SaveAccountAdmin",
              contentType: "application/json; charset=utf-8",
              type: "POST",
              dataType: "json",
              data: {
                  jsonCompanyContacts: "John Doe"
              }
          },
          //destroy: {},

          parameterMap: function (data, type) {
              return kendo.stringify(data);
          }
      }, 
```

这也不起作用：

```
update: {
              url: "/Company/SaveAccountAdmin",
              contentType: "application/json; charset=utf-8",
              type: "POST",
              dataType: "json",
              //data: { "jsonCompanyContacts": kendo.stringify({ jsonCompanyContacts: "John Doe" }) }

              data: { "jsonCompanyContacts": "John Doe" }
          },
          //destroy: {},

          parameterMap: function (data, type) {
              return kendo.stringify(data);
          } 
```

但这有效 - 为什么？

```
update: {
              url: "/Company/SaveAccountAdmin",
              contentType: "application/json; charset=utf-8",
              type: "POST",
              dataType: "json",
              //data: { "jsonCompanyContacts": kendo.stringify({ jsonCompanyContacts: "John Doe" }) }

              //data: { "jsonCompanyContacts": "John Doe" }
          },
          //destroy: {},

          parameterMap: function (data, type) {
              return kendo.stringify({ "jsonCompanyContacts": "John Doe" });
          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:22:12.367

尝试在更新定义中执行此操作：

```
 update: {
      url: "/Company/SaveAccountAdmin",
      contentType: "application/json; charset=utf-8",
      type: "POST",
      dataType: "json",
      data:{ "jsonCompanyContacts":  kendo.stringify({ jsonCompanyContacts: "John Doe"  })}
      } 
```

您可能必须删除 parameterMap 中的操作才能使其正常工作。最主要的是你想发布一个与你的控制器**同名的变量。**该变量应包含您的字符串化数据。

如果需要，您也可以将此操作移至您的 parameterMap。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:24:26.677

该值不会作为字符串传递给控制器​​。尝试使用模型。这可能会有所帮助：[MVC3 & JSON.stringify() ModelBinding 返回空模型](https://stackoverflow.com/questions/7597892/mvc3-json-stringify-modelbinding-returns-null-model)

### 更新

你真的不想那样做。可能在一种情况下有效，但您是在自取其辱。

模型

```
public class CompanyContactModel
{
    public string CompanyContacts { get; set; }
} 
```

控制器签名

```
public JsonResult SaveAccountAdmin(CompanyContactModel companyContactModel)
... 
```

更好的

```
public JsonResult SaveAccountAdmin([DataSourceRequest]DataSourceRequest request, CompanyContactModel companyContactModel)
    ...
    Update and Return and put into List
    If error: ModelState.AddModelError(string.Empty, e.Message);

    DataSourceResult result = [Your Model List].ToDataSourceResult(request, ModelState);
    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T09:24:57.283

我和你有类似的问题。我从 broswer 获取值，但它没有将值发布到更新操作模型。

就我而言，我在模型上使用了“[ScriptIgnore(ApplyToOverrides = true)]”，效果很好。

# git - Git 警告：无法访问 'P:\/.gitconfig'：参数无效

> ID：14774159
> 
> 赞同：32
> 
> 时间：2013-02-08T13:57:15.467
> 
> 标签：git, git-config

我只是在测试 git。我运行了以下命令：

```
git config user.email "test@mail.com" 
```

我现在得到这个时`git status`和其他人：

```
C:\gitg\g1>git status
warning: unable to access 'P:\/.gitconfig': Invalid argument
warning: unable to access 'P:\/.gitconfig': Invalid argument
warning: unable to access 'P:\/.gitconfig': Invalid argument
# On branch master
warning: unable to access 'P:\/.gitconfig': Invalid argument
nothing to commit, working directory clean

C:\gitg\g1> 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-19T12:01:34.963

我刚遇到这个错误。在命令行中
执行给出了以下输出：`set HOMEPATH`

```
HOMEPATH=\ 
```

`set HOMEPATH=`只需通过修复问题删除此环境变量。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-01-31T06:40:39.317

当我没有通过 VPN 连接到我的工作网络时，我遇到了类似的问题。删除所有 HOME% 变量不起作用。删除它试图访问的网络驱动器确实有效。从命令窗口运行以下命令对我有用：

净使用 H: /delete

请注意，我确实删除了 HOME% 变量，但在运行上述命令之前它确实有效。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-06-10T01:21:41.263

如果您在 Windows 上使用“Git Bash”（MINGW64）：

进入：

```
export HOME=/c 
```

核实：

```
echo $HOME 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-12-09T20:32:44.670

我遇到了这个问题，不得不将 HOMEDRIVE 设置为理智的东西。

例如

```
set HOMEDRIVE=D: 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-05-01T15:37:42.010

在以管理员身份运行的 Visual Studio 2017 (v15.1) 中加载解决方案时，我遇到了这个问题。我的本地 git repo 位于 C:\Code\

为了解决这个问题，

1.  我添加了一个环境变量（在用户变量下）HOME，其值为 C:\
2.  重新启动 Visual Studio（再次以管理员身份） - 这次 Git 能够成功加载我的分支和源代码控制关联。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-03-23T01:46:39.937

尝试以管理员身份运行。无论出于何种原因，它默认为映射驱动器。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-06-22T17:50:50.437

它适用于我将 HOME 变量“几乎”清除为 Daniels 解决方案：

```
set HOME= 
```

要重新检查，您必须像这样回显它：

```
echo %HOME% 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-12-20T13:32:45.097

对我来说，我在 sourcetree 中看到了这个错误，这只是断开我计算机中的驱动器 P 的问题，因为它是一个网络驱动器。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-10-22T11:11:47.047

我间歇性地遇到此错误消息。

原因是我偶尔使用的 VPN 连接。每次我使用它时，它都会阻止对我联网的 HOMEDRIVE 的访问；并且 git 无法再访问配置文件。

显然不是这里的原因，因为你找到了你的解决方案，但我想我会在这里添加它以供其他人搜索。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-07-31T02:10:31.803

对于那里的 PowerShell 用户：

```
Remove-Item Env:\HOMEPATH 
```

*谢谢@Daniel Hilgarth 的回答*

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-03-08T02:32:55.023

我在 sourceTree 上遇到了同样的错误。使用值 C:\ 设置 HOME 环境变量修复了该问题。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-10-23T05:20:12.333

这在 Windows 10 上对我有用。

我的源代码在 C:\workspace 中，我添加了一个环境变量 **HOME 到 C:**

[![在此处输入图像描述](../Images/ea63bf8abdc73b8360b05d1f5390aaa3.png)](https://i.stack.imgur.com/wgJ2Q.png)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-03-20T02:03:13.307

谢谢@daniel-hilgrath，你的回答在一定程度上帮助了我，它确实解决了那个特定的会话。

但在我的情况下，我使用的是 SourceTree 并在 Windows 7 上。我必须完全清除环境变量，而不仅仅是特定会话。我做了以下。

```
SETX HOMEPATH ""
SETX HOMEDRIVE "" 
```

这可能对在 SourceTree 上使用它的人有用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-09-25T23:57:22.183

**问题** 在 Windows 10 上，我遇到了与 H:\.gitconfig 文件类似的问题。尝试访问该文件失败。尝试删除文件时出现错误 0x800710FE。

**搜索错误 0x800710FE**找到了这个解释。

Windows 10 有时会显示奇怪的错误，而 0x800710FE 是在您删除文件或文件夹时出现的错误。基本上，这是 Win 10 中发生的本机 Office 文件同步问题，但默认情况下未启用。

**解决方案** 断开网络驱动器 (H:) 并尝试连接到 git 工作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-11-18T23:41:23.433

请注意，在尝试所有上述方法之前，例如删除 H 驱动器，删除主路径等。因为我发现有人提到 VPN，我意识到我正在使用我公司的笔记本电脑，它确实有一个 VPN。

所以我通过简单地断开连接并重新连接VPN来解决我的问题，一切都开始工作了。

这是有道理的，因为我知道我没有改变任何东西，昨天还在工作，但今天停止工作，所以可能与今天的 VPN 没有成功启动有关，所以这导致了我可能应该重新启动的想法VPN 连接。哪种方式更容易，更安全，应该首先尝试。

# jquery - 在 JQuery 中获取修改后的 Html 字符串

> ID：14774162
> 
> 赞同：0
> 
> 时间：2013-02-08T13:57:19.993
> 
> 标签：jquery

我正在使用以下代码从找到的 html 中删除所有复选框，但是当我检查字符串复选框时都在那里？：

```
$('#viewPdf').click(function () {

        var html = $('#mCSB_2 > .mCSB_container').html();

        $('input:checkbox', html).each(function () {
            $(this).remove();
        });

        alert(html);

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:59:46.387

编辑：

误解/阅读了 OP。

这是一种方法

```
// Create a new DOM object:

htmlDom = $(html);

// remove the inputs

htmlDom.remove(':checkbox')

// get the html

html = htmlDoc.html() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:00:15.090

```
$('#viewPdf').click(function (e) {

    e.preventDefault();

    $('#mCSB_2 .mCSB_container input:checkbox').each(function () {
        $(this).remove();
    });

    alert($('#mCSB_2 .mCSB_container').html());

}); 
```

# android - 从适配器加载图像并将其显示在带有文本的列表视图中

> ID：14774163
> 
> 赞同：-1
> 
> 时间：2013-02-08T13:57:20.753
> 
> 标签：android, android-asynctask, loading-image

我不知道如何从之前发布的适配器类加载图像，但我没有得到解决问题的代码的任何帮助，请通过异步帮助我使用代码，如果知道解决方案的人请帮助我。两天来一直在为同样的问题而苦苦挣扎。

公共类 NewsRowAdapter 扩展 ArrayAdapter {

```
 /*private DisplayImageOptions options;

    ImageLoader imageLoader;*/

    Bitmap bitmap = null;

    private Activity activity;

    private List<Item> items;

    private Item objBean;

    private int row;

    public NewsRowAdapter(Activity act, int resource, List<Item> arrayList) 
    {

        super(act, resource, arrayList);

        this.activity = act;

        this.row = resource;

        this.items = arrayList;

        /*options = new DisplayImageOptions.Builder().showStubImage(R.drawable.blank).showImageForEmptyUrl(R.drawable.blank).cacheInMemory().cacheOnDisc().build();

        imageLoader = ImageLoader.getInstance();
                */

    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent)
    {
        View view = convertView;

        final ViewHolder holder;

        if (view == null) 
        {

            LayoutInflater inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            view = inflater.inflate(row, null);

            holder = new ViewHolder();

            view.setTag(holder);

        } else 
        {
            holder = (ViewHolder) view.getTag();
        }

        if ((items == null) || ((position + 1) > items.size()))

            return view;

        objBean = items.get(position);

        holder.tvTitle = (TextView) view.findViewById(R.id.tvtitle);

        holder.tvDesc = (TextView) view.findViewById(R.id.tvdesc);

        holder.tvDate = (TextView) view.findViewById(R.id.tvdate);

        holder.imgView = (ImageView) view.findViewById(R.id.image);

        holder.pbar = (ProgressBar) view.findViewById(R.id.pbar);

        if (holder.tvTitle != null && null != objBean.getTitle() && objBean.getTitle().trim().length() > 0) 
        {
            holder.tvTitle.setText(Html.fromHtml(objBean.getTitle()));
        }
        if (holder.tvDesc != null && null != objBean.getDesc() && objBean.getDesc().trim().length() > 0)
        {
            holder.tvDesc.setText(Html.fromHtml(objBean.getDesc()));
        }
        if (holder.tvDate != null && null != objBean.getPubdate() && objBean.getPubdate().trim().length() > 0)
        {
            holder.tvDate.setText(Html.fromHtml(objBean.getPubdate()));
        }
        if (holder.imgView != null) 
        {
            if (null != objBean.getLink() && objBean.getLink().trim().length() > 0) 
            {
                final ProgressBar pbar = holder.pbar;

                pbar.setVisibility(View.INVISIBLE);

                //---------CHANGES MADE FOR LOADING IMAGE----------//

                Log.d("IMAGE NULL----------", objBean.getLink());

                class ImageLoading extends AsyncTask<String, Void, Bitmap>
                {

                    @Override
                    protected Bitmap doInBackground(String... urls) 
                    {

                        return null;
                    }

                    @Override
                    protected void onPostExecute(Bitmap result) 
                    {

                        super.onPostExecute(result);
                    }

                }

                /*imageLoader.init(ImageLoaderConfiguration.createDefault(activity));

                {
                    imageLoader.displayImage(objBean.getLink(), holder.imgView, options, new ImageLoadingListener()
                    {
                                @Override
                                public void onLoadingComplete() 
                                {
                                    pbar.setVisibility(View.INVISIBLE);

                                }

                                @Override
                                public void onLoadingFailed() 
                                {
                                    pbar.setVisibility(View.INVISIBLE);
                                }

                                @Override
                                public void onLoadingStarted()
                                {
                                    pbar.setVisibility(View.VISIBLE);

                                }
                    });
                } */

            } else 
            {
                holder.imgView.setImageResource(R.drawable.ic_launcher);
            }
        }

        return view;
    }

    public class ViewHolder
    {
        public TextView tvTitle, tvDesc, tvDate;

        public ImageView imgView;

        public ProgressBar pbar;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:02:48.373

检查[此](http://commonsware.com/Android/excerpt.pdf)以创建自定义 ListView 和图像加载尝试[LazyList](https://github.com/thest1/LazyList)。

# c# - Windows 窗体 - 迭代所有 MDIparent 按钮的方法不起作用

> ID：14774164
> 
> 赞同：1
> 
> 时间：2013-02-08T13:57:21.263
> 
> 标签：c#, winforms, visual-studio-2010

所以这显然很简单，但我已经在这个话题上浪费了太多时间。我有一个非常简单（在我看来应该如此）的方法，该方法的任务是遍历我父表单中的所有按钮。

这里是：

```
public void SetForeColor(BaseForm frm, Form f)
{
    foreach (ToolStripButton button in frm.Controls.OfType<ToolStripButton>())
    {               
            MessageBox.Show("Soles clicked"+" "+f.Name.ToString());
    }

} 
```

`BaseForm frm`应该采用`MDIparent`as 值的参数在哪里。我从另一个我实际得到的地方调用这个方法`MDIparent`：

```
 protected void LoadForm<T>(ToolStripButton formButton, string buttonText) where T : Form
        {
            MainForm frm = this.MdiParent as MainForm;
            if (frm == null) frm = this as MainForm;
            T sendTo;
....
            SetForeColor(frm, sendTo); 
```

但我没有得到任何回应。该`LoadForm<T>`功能工作正常，所以我的建议是我犯了错误，`foreach`但对我来说似乎非常直截了当......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:01:39.033

您的按钮可能不是表单的直接子级，而是包含在[ToolStrip](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstrip.aspx)组件中，该组件本身就是表单的子级。

尝试类似：

```
foreach (ToolStrip toolStrip in frm.Controls.OfType<ToolStrip>()) {
    foreach (ToolStripButton button
             in toolStrip.Controls.OfType<ToolStripButton>()) {               
        MessageBox.Show("Soles clicked " + f.Name);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:05:59.163

假设`ToolStripButton`是 .net 框架中的标准按钮，您的循环将不会执行，因为表单的控件集合中`foreach`不会有任何类型的按钮。`ToolStripButton`

ToolStripButtons 必须由 MenuStrip、ToolStrip 或 StatusStrip 作为父级，因此您需要迭代任何工具条的控件：

```
foreach (var strip in frm.Controls.OfType<ToolStrip>())
{
     foreach (var item in strip.Items)
     {
          MessageBox.Show("Soles clicked " + f.Name.ToString());
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:00:19.417

您还需要检查表单是否属于同一类型：

```
foreach (Form frm in this.MdiChildren)
    {
        if (frm.GetType() == form.GetType() 
            && frm != form)
        {
            frm.Close();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:03:19.430

您的 foreach 语句仅搜索控件集合的顶层。

```
foreach (ToolStripButton button in frm.Controls.OfType<ToolStripButton>()) {               
    MessageBox.Show("Soles clicked"+" "+f.Name.ToString());
} 
```

虽然它实际上是集合中的集合......等等。您需要搜索控件集合及其所有后代。

[这个问题](https://stackoverflow.com/questions/2735190/how-to-get-all-controls-of-win-form)的答案有一个检索所有后代的方法。

# content-management-system - CQ5页面继承

> ID：14774165
> 
> 赞同：0
> 
> 时间：2013-02-08T13:57:21.740
> 
> 标签：content-management-system, aem

我想将页面 A 的样式继承到其子页面 B。任何人都可以帮我解决这个问题。

前任。

假设我在页面 A 的页面属性对话框中添加了选择颜色的 xtype。并且作者从下拉列表中选择了任何颜色（比如说红色），它正在改变颜色，但它不适用于 A 的子页面。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:54:49.330

看起来好像您指的是自定义属性，并使其成为继承属性，对吗？

[我会看一下CQ5 代码示例页面](http://experiencedelivers.adobe.com/cemblog/en/experiencedelivers/2012/06/basic-cq5-code-samples.html)的继承部分。这将向您展示如何从页面属性对象中读取继承的属性。您可能还想查看[InheritanceValueMap javadocs](http://dev.day.com/docs/en/cq/current/javadoc/com/day/cq/commons/inherit/InheritanceValueMap.html)。

# sql - 如何在 SQL 中移动和转换数据？

> ID：14774166
> 
> 赞同：1
> 
> 时间：2013-02-08T13:57:26.607
> 
> 标签：sql, tsql

举个简单的例子，假设我有两个名为 Old 和 New 的表。Old 表只有一个名为 Decision 的列，它是一个字符串，并且只包含“Yes”、“No”或“Maybe”。

新表是空的。如何从旧表中获取所有数据，对其进行转换，并将其作为整数（或 int 0="N"、1="Y" 和 2="Maybe"）存储在新表中。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:59:12.117

```
insert into NewTable (Decision)
select case Decision when 'N' then 0 when 'Y' then 1 else 2 end
from OldTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:20:44.893

另外——单语句查询：

```
create table NewTable as 
select (case Decision when 'N' then 0 when 'Y' then 1 else 2 end) int_col
 from OldTable 
/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:07:07.530

我假设您将在新桌子上放一个 FK？

```
Table YesNoMaybe
Byte ID PK
Value varchar(10)

0, N
1, Y
2, Maybe

Insert into New
Select ID
From YesNoMaybe 
JOIN Old
  ON Old.Decision = YesNoMaybe.[value] 
```

# iphone - UITextView 中返回键时的新行

> ID：14774173
> 
> 赞同：5
> 
> 时间：2013-02-08T13:57:47.860
> 
> 标签：iphone, xcode

嗨如何将返回键设置为下面的 UITextView 的新行？谢谢

```
-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {
if (range.length == 0) {
    if ([text isEqualToString:@"\n"]) {
        [textView resignFirstResponder];
        NSIndexPath *path = [NSIndexPath indexPathForRow:0 inSection:0];
        [self.tableView scrollToRowAtIndexPath:path atScrollPosition:UITableViewScrollPositionTop animated:YES];
        [self.tableView setScrollEnabled:NO];
        return NO;
    }
}

return YES;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:08:56.850

您可以在导航栏上制作完成按钮以隐藏键盘。

因为键盘上的下一个按钮`UITextView`会给你新的一行。

**编辑**

从您的代码中删除此行，当您按下下一步按钮时，它将退出您的键盘

```
[textView resignFirstResponder]; 
```

# c# - 构建项目数组时如何获取集合中的所有元素？

> ID：14774179
> 
> 赞同：0
> 
> 时间：2013-02-08T13:58:05.327
> 
> 标签：c#, linq

我有以下代码可以很好`XElement`地从类的实例属性中返回一个对象：

```
public MyClass1 MyClass1 {get; set;}
public MyClass2 MyClass2 {get; set;}

var elements = new[]
{
   //Calls to .GetXML() return an XElement instance
   this.MyClass1.GetXML(),
   this.MyClass2.GetXML()
};

return new XElement("Root",
    elements.Where(el => el != null && !el.IsEmpty)); 
```

问题是我想通过`IList`for say引入一个集合`MyClass3`，但不知道如何将集合中的所有项目放入我的`elements`数组中。所以我现在想要以下内容：

```
public MyClass1 MyClass1 {get; set;}
public MyClass2 MyClass2 {get; set;}
public IList<MyClass3> MyClass3 {get; set;}

var elements = new[]
{
   this.MyClass1.GetXML(),
   this.MyClass2.GetXML(),
   this.MyClass3.ToList().Select(x => x.GetXML())  //Not working
}; 
```

我尝试过使用组合，`Select`甚至更改`IList`为`List`只是为了看看是否`.ForEach`可行，但也没有。我得到的错误是：*“没有找到隐式类型数组*的最佳类型”，无论我尝试什么方法。

如何将我的`IList`属性实例中的所有元素放入`elements`数组中？任何帮助表示赞赏，谢谢！

**编辑：***必须*保留顺序（即 MyClass1、MyClass2、MyClass3），所以如果我引入另一个元素`MyClass4`，它必须在`MyClass3`. 原因是我正在编写具有特定结构的 XML 文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:01:46.430

我怀疑你想要类似的东西：

```
var elements = new[] { MyClass1.GetXML(), MyClass2.GetXML() }
      .Concat(MyClass3.Select(x => x.GetXML())
      .ToArray(); 
```

在 MyClass3 之后使用 MyClass4：

```
var elements = new[] { MyClass1.GetXML(), MyClass2.GetXML() }
      .Concat(MyClass3.Select(x => x.GetXML())
      .Concat(new[] { MyClass4.GetXML() })
      .ToArray(); 
```

或者把它`GetXML`放在一个地方：

```
// Relies on covariance in .NET 4
var elements = new MyBase[] { MyClass1, MyClass2 }
    .Concat(MyClass3)
    .Concat(new[] { MyClass4 })
    .Select(x => x.GetXML())
    .ToArray(); 
```

或者直到最后都不使用 LINQ：

```
var items = new List<BaseClass>();
items.Add(MyClass1);
items.Add(MyClass2);
items.AddRange(MyClass3);
items.Add(MyClass4);
var elemets = items.Select(x => x.GetXML()).ToArray(); 
```

# php - 在 slickgrid 中使用 mysql 将编辑后的数据保存到数据库

> ID：14774182
> 
> 赞同：1
> 
> 时间：2013-02-08T13:58:16.357
> 
> 标签：php, jquery, html, mysql, slickgrid

如何通过mysql将我在表上编辑的字段值保存到数据库？

例如：当我更改随机单元格中的标题值时，如何更新数据库中存在的标题值？

反正有更新数据库吗？

```
<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <title>SlickGrid example 3: Editing</title>
  <link rel="stylesheet" href="../slick.grid.css" type="text/css"/>
  <link rel="stylesheet" href="../css/smoothness/jquery-ui-1.8.16.custom.css" type="text/css"/>
  <link rel="stylesheet" href="examples.css" type="text/css"/>
  <style>
    .cell-title {
      font-weight: bold;
    }

    .cell-effort-driven {
      text-align: center;
    }
  </style>
</head>
<body>
<div style="position:relative">
  <div style="width:600px;">
    <div id="myGrid" style="width:100%;height:500px;"></div>
  </div>

  <div class="options-panel">
    <h2>Demonstrates:</h2>
    <ul>
      <li>Using "editCommandHandler" option to intercept edit commands and implement undo support</li>
    </ul>

    <h2>Controls:</h2>
    <button onclick="undo()"><img src="../images/arrow_undo.png" align="absmiddle"> Undo</button>
  </div>
</div>

<script src="../lib/firebugx.js"></script>

<script src="../lib/jquery-1.7.min.js"></script>
<script src="../lib/jquery-ui-1.8.16.custom.min.js"></script>
<script src="../lib/jquery.event.drag-2.0.min.js"></script>

<script src="../slick.core.js"></script>
<script src="../slick.formatters.js"></script>
<script src="../slick.editors.js"></script>
<script src="../slick.grid.js"></script>

<script>
  function requiredFieldValidator(value) {
    if (value == null || value == undefined || !value.length) {
      return {valid: false, msg: "This is a required field"};
    } else {
      return {valid: true, msg: null};
    }
  }

  var grid;
  var data = [];
  var columns = [
    {id: "title", name: "Title", field: "title", width: 120, cssClass: "cell-title", editor: Slick.Editors.Text, validator: requiredFieldValidator},
    {id: "desc", name: "Description", field: "description", width: 100, editor: Slick.Editors.LongText},
    {id: "duration", name: "Duration", field: "duration", editor: Slick.Editors.Text},
    {id: "%", name: "% Complete", field: "percentComplete", width: 80, resizable: false, formatter: Slick.Formatters.PercentCompleteBar, editor: Slick.Editors.PercentComplete},
    {id: "start", name: "Start", field: "start", minWidth: 60, editor: Slick.Editors.Date},
    {id: "finish", name: "Finish", field: "finish", minWidth: 60, editor: Slick.Editors.Date},
    {id: "effort-driven", name: "Effort Driven", width: 80, minWidth: 20, maxWidth: 80, cssClass: "cell-effort-driven", field: "effortDriven", formatter: Slick.Formatters.Checkmark, editor: Slick.Editors.Checkbox}
  ];

  var options = {
    editable: true,
    enableAddRow: false,
    enableCellNavigation: true,
    asyncEditorLoading: false,
    autoEdit: false,
    editCommandHandler: queueAndExecuteCommand
  };

  var commandQueue = [];

  function queueAndExecuteCommand(item, column, editCommand) {
    commandQueue.push(editCommand);
    editCommand.execute();
  }

  function undo() {
    var command = commandQueue.pop();
    if (command && Slick.GlobalEditorLock.cancelCurrentEdit()) {
      command.undo();
      grid.gotoCell(command.row, command.cell, false);
    }
  }

  $(function () {
    for (var i = 0; i < 500; i++) {
      var d = (data[i] = {});

      d["title"] = "Task " + i;
      d["description"] = "This is a sample task description.\n  It can be multiline";
      d["duration"] = "5 days";
      d["percentComplete"] = Math.round(Math.random() * 100);
      d["start"] = "01/01/2009";
      d["finish"] = "01/05/2009";
      d["effortDriven"] = (i % 5 == 0);
    }

    grid = new Slick.Grid("#myGrid", data, columns, options);
  })
</script>
</body>
</html> 
```

# javascript - 如何在鼠标悬停时更改元素的颜色？

> ID：14774186
> 
> 赞同：2
> 
> 时间：2013-02-08T13:58:26.940
> 
> 标签：javascript, jquery, html, css

我有一列锚标签，它们有一个定义了浅蓝色的类。

我做了功能，所以当鼠标悬停在任何锚元素上时，会显示一些指向锚标签的图像链接。

现在我想在选择的锚标签上添加不同的颜色。因此，用户可以看到图像在列中的链接位置。更多供用户参考。

我在鼠标悬停功能上添加了一个具有不同颜色的类，但这不起作用。所以我想知道您是否对如何解决这个问题有任何建议。

我有一个用于构建锚标签的功能，并在其中添加原始颜色：

```
for (i=0; i<numberOf; i++) {
        var param2Slider = document.createElement("a");
        param2Slider.id = 'sliderAnchor_'+i;
        sliderAnchorId = param2Slider.id;
        param2Slider.name = 'param2Slider';
        param2Slider.className = 'nav2Slider';
        document.getElementById('nav2Slider').appendChild(param2Slider);
    } 
```

我的鼠标悬停动作功能：

```
function navigator2Slider(flatParam, directionParam) {

$('.nav2Slider').on('mouseover', function () {
    //$(this).attr('style').color='#29378F';
    nav2SliderName =  $(this).attr('id');
    nav2Id = nav2SliderName.split("_").pop();
    nav2Index = parseInt(nav2Id);
        $('#'+flatParam+'Stream').cycle(nav2Index);
        $('#'+directionParam+'Stream').cycle(nav2Index);            
}); 
```

}

我尝试在这两个函数上添加新颜色，但我的第一个问题是即使添加到第一个锚标记，颜色也不显示。其次，我希望颜色与选定的锚标记一致，所以我认为应该在 mouserover 功能上添加它。

任何建议都受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:00:27.763

用于`.css`设置颜色：

```
$(this).css('background-color', '#29378F'); 
```

作为示例：

[http://jsfiddle.net/qVNen/](http://jsfiddle.net/qVNen/)

[http://api.jquery.com/css/](http://api.jquery.com/css/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:04:37.670

如果您只是想在悬停时对 css 进行一些样式更改，为什么不使用[`:hover`](https://developer.mozilla.org/en-US/docs/CSS/%3ahover)

```
a:hover{
  /* insert your css changes */
} 
```

> :hover CSS 伪类在用户使用指针设备指定元素时匹配，但不一定激活它。

**[例子](http://jsfiddle.net/ChaseWest/3HzT4/)**

# java - 多维维恩图

> ID：14774190
> 
> 赞同：1
> 
> 时间：2013-02-08T13:58:33.600
> 
> 标签：java, swing, multidimensional-array, venn-diagram

我有这个数据：

```
String[] a = {"a", "b", "c", "d"};
String[] b = {"c", "d"};
String[] c = {"b", "c"}; 
```

现在我需要这些列表的每个交集的图形表示，主要是这样的维恩图：http: [//manuals.bioinformatics.ucr.edu/_/rsrc/1353282523430/home/R_BioCondManual/r-bioc- temp/venn1.png?height=291&width=400](http://manuals.bioinformatics.ucr.edu/_/rsrc/1353282523430/home/R_BioCondManual/r-bioc-temp/venn1.png?height=291&width=400)

在我的实现中，这些列表将主要包含 1000 多个条目，并且我将拥有 10 多个列表，因此一个好的表示将创建一组字符串并将它们相交。在我非常简单的情况下，这将导致

```
set_a = {"c"};      // in all three lists
set_b = {"b", "d"}; // in two of three lists
set_c = {"a"};      // in one of three lists 
```

现在的另一个要求是交集的大小应该与列表中的出现成正比。所以 的大小`set_a`应该是 的 3 倍`set_c`。

是否有满足该要求的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:59:31.340

我认为这个程序做了你想要的转换：

```
 // The input
    String[][] a = {
        {"a", "b", "c", "d"},
        {"c", "d"},
        {"b", "c"}
    };

    System.out.println("Input: "+ Arrays.deepToString(a));

    // Convert the input to a Set of Sets (so that we can hangle it more easily
    Set<Set<String>> input = new HashSet<Set<String>>();
    for (String[] s : a) {
        input.add(new HashSet<String>(Arrays.asList(s)));
    }

    // The map is used for counting how many times each element appears 
    Map<String, Integer> count = new HashMap<String, Integer>();
    for (Set<String> s : input) {
        for (String i : s) {
            if (!count.containsKey(i)) {
                count.put(i, 1);
            } else {
                count.put(i, count.get(i) + 1);
            }
        }
    }

    //Create the output structure
    Set<String> output[] = new HashSet[a.length + 1];
    for (int i = 1; i < output.length; i++) {
        output[i] = new HashSet<String>();
    }

    // Fill the output structure according the map
    for (String key : count.keySet()) {
        output[count.get(key)].add(key);
    }

    // And print the output
    for (int i = output.length - 1; i > 0; i--) {
        System.out.println("Set_" + i + " = " + Arrays.toString(output[i].toArray()));
    } 
```

输出：

```
Input: [[a, b, c, d], [c, d], [b, c]]
Set_3 = [c]
Set_2 = [d, b]
Set_1 = [a] 
```

# php - 使用 PHP 对 MySQL 结果进行分组

> ID：14774198
> 
> 赞同：0
> 
> 时间：2013-02-08T13:58:56.240
> 
> 标签：php, mysql

我有以下脚本，它根据所有表中名为“order_id”的字段从 3 个表中获取结果。

```
$sql = "SELECT 
o.order_id, 
order_product.model,
o.name, 
o.value, 
GROUP_CONCAT(o.order_id, order_product.model, o.name, o.value SEPARATOR ',') AS Options 
FROM `order_option` AS o 
LEFT JOIN `order` AS oo on o.order_id = oo.order_id
LEFT JOIN order_product ON o.order_id = order_product.order_id
where oo.order_status_id = 2 
group by oo.order_id";

$result = mysql_query($sql); 
while($row = mysql_fetch_assoc($result))
 {
$options=$row['Options'];
print "|$options|";

    PRINT "<br>-------------------<br>";
} 
```

问题是在表“order_option”中有 2 行或更多行，每个 order_id 都有选项。

**脚本打印的结果是：**

> ID，型号，选项 1：值，***ID，型号，***选项 2：值

**我需要的是：**

> ID、型号、选项 1：值、选项 2：值

因此，每一行都没有重复 ID 和 MODEL。

有什么建议可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:12:53.267

问题在于您如何实施`GROUP_CONCAT`. 您的`Order_Option`表中有 2 行具有相同选项 ID 的不同选项。就像是：

```
OrderId    Name     Value
1          Option1  Value1 
1          Option2  Value2 
```

使用 GROUP_CONCAT(OrderId, Name, Value) 将连接所有这些字段，例如：

```
1, Option1, Value1, 1, Option2, Value2 
```

相反，您想自己检索 OrderId：

```
SELECT OrderId, GROUP_CONCAT(Name, Value)... 
```

这会给你：

```
1, Option1, Value1, Option2, Value2 
```

然后剩下的就在你的演示逻辑中。

祝你好运。

# nagios - 我们可以发送带有 nagios 邮件警报的附件吗？

> ID：14774199
> 
> 赞同：0
> 
> 时间：2013-02-08T13:58:55.980
> 
> 标签：nagios

我需要发送带有 .txt、.doc、.jpg 等文件的附件的服务/主机电子邮件警报的 Nagios 状态。我怎样才能做到这一点，请任何人帮助。

谢谢和问候， Prabakaran.R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:59:36.040

默认情况下，Nagios 使用 mail 命令发送通知，如下所示，您可以切换到 mutt 之类的东西来添加附件。

[更多关于穆特的信息](http://www.cyberciti.biz/tips/sending-mail-with-attachment.html)

```
define command{
    command_name    notify-host-by-email
    command_line    /usr/bin/printf "%b" "***** Nagios *****\n\nNotification Type:     $NOTIFICATIONTYPE$\nHost: $HOSTNAME$\nState: $HOSTSTATE$\nAddress: $HOSTADDRESS$\nInfo: $HOSTOUTPUT$\n\nDate/Time: $LONGDATETIME$\n" | /bin/mail -s "** $NOTIFICATIONTYPE$ Host Alert: $HOSTNAME$ is $HOSTSTATE$ **" $CONTACTEMAIL$
    } 
```

# box2d - 使用box2d时速度有上限吗？

> ID：14774202
> 
> 赞同：14
> 
> 时间：2013-02-08T13:59:04.497
> 
> 标签：box2d, libgdx, game-physics, physics-engine

我正在使用 box2d 进行物理模拟。我正在使用箭头键移动一个圆圈，只要按下一个键就会在身体上施加脉冲。不幸的是，这个圆圈移动得非常缓慢，而且似乎没有像真正的身体那样加速。我的世界尺寸是 400x800 像素。圆体的半径为 20f。

据此，可以通过在创建时缩小圆半径并在绘制过程中获取身体位置后放大来解决该问题[。](https://stackoverflow.com/questions/2576697/box2d-maximum-possible-linear-velocity)它似乎根本没有任何区别。我在这里缺少一些步骤或设置吗？

[pastebin 上的代码](http://pastebin.com/EqHTKxgm)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-10-08T21:07:41.363

现在我花了很长时间才明白这一点，但实际上*Box2D*中的速度确实存在硬性限制。见[这里](http://www.iforce2d.net/b2dtut/gotchas#speedlimit)：

> 每个时间步的最大移动限制为 2.0 个单位，在源代码的文件 b2Settings.h 中给出。

如果你在 60FPS 时每帧有一步，那么你的身体可以以 120m/s 的最大速度移动。也许有一天这会为某人节省一点时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T15:39:23.250

是的，您使用的尺寸有所不同。`Box2d`对浮点数进行操作，因此它的精度是有限的，模拟质量也不同。`Box2d`调整为与 size 的动态物体配合使用效果最佳`0.1 to 10`。

因此，通常您应该更喜欢将一个单位用于物理，而将另一个单位用于图形

现在回答你的问题。物体的速度受碰撞、摩擦（如果一个物体在另一个物体上滑动）和`linear damping`. 所以检查`linear damping`你使用什么值（我记得默认情况下它是非零的）。据我所知，没有速度限制，但如果使用相同的时间步，更高的速度将提供更少质量的碰撞。

# spring - 记住我的cookie解码过程

> ID：14774206
> 
> 赞同：4
> 
> 时间：2013-02-08T13:59:17.710
> 
> 标签：spring, spring-security, remember-me

我正在使用 spring 记住我的服务。我看到一个奇怪的行为。

我正在采取的步骤：

*   使用用户名/密码登录我的网站并选中记住我复选框

*   比我关闭浏览器并打开一个新浏览器并打开一个新浏览器。从技术上讲，我必须自动登录。这也在发生。我正在使用`PersistentTokenBasedRememberMeServices`.

*   现在我再次关闭浏览器并再次打开一个新浏览器，当我尝试访问我的网站时，出现以下异常：

    ```
     SEVERE: Servlet.service() for servlet [appServlet] in context with path [/Spring-Security] threw exception org.springframework.security.web.authentication.rememberme.CookieTheftException: Invalid remember-me token (Series/token) mismatch. Implies previous cookie theft attack.
        at org.springframework.security.web.authentication.rememberme.PersistentTokenBasedRememberMeServices.processAutoLoginCookie(PersistentTokenBasedRememberMeServices.java:102)
        at org.springframework.security.web.authentication.rememberme.AbstractRememberMeServices.autoLogin(AbstractRememberMeServices.java:115)
        at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:97)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
        at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45) 
    ```

    我深入研究，我看到我的最后两个请求记住我令牌`SPRING_SECURITY_REMEMBER_ME_COOKIE`的值是

    bUpwUUJ3dGpUcVJjaGpIYXJxcmFkdz09OlBBRlZXbDVnYmZZQjM2RmFYVDNVMXc9PQ

但是弹簧解码了（org.springframework.security.web.authentication.rememberme.PersistentTokenBasedRememberMeServices.tokenRepository）

```
 final String presentedSeries = cookieTokens[0];
    final String presentedToken = cookieTokens[1]; 
```

在第一个请求中正确，但在第二个请求中，它解码了 presentToken 一些不同的东西，导致 cookie 盗窃异常。

这是正确的行为吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:54:07.223

我有这个完全相同的问题。第一个请求与令牌匹配，然后创建一个新令牌，但是在此之后，第二个请求将立即到达（与第一个请求具有相同的令牌）并且令牌将不再匹配！

我无法弄清楚为什么第二个请求会在第一个请求之后立即出现。

最后，我的解决方案是`PersistentTokenBasedRememberMeServices`继承并覆盖该`processAutoLoginCookie`方法。我只是注释掉了对 cookie 盗窃异常的检查**（这会产生一个安全漏洞，但它对于我的目的来说是可以接受的）**。

如果您想要一个更安全的解决方案，您可以轻松地添加逻辑以匹配最后两个呈现的令牌。

# angularjs - angular.js 绑定过滤结果以选择输入

> ID：14774215
> 
> 赞同：0
> 
> 时间：2013-02-08T13:59:42.397
> 
> 标签：angularjs

如果我有一个包含我的产品的 json 数组并且正在使用 ng-repeat 在页面上显示它们。

然后我有两个选择框用于按颜色和大小进行过滤，一切正常，

但是，如果我按颜色过滤，尺寸选择框仍然显示整个产品阵列的所有尺寸，我如何根据过滤的内容刷新尺寸选择框的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:07:05.663

无法弄清楚如何回复上一个线程，对不起:) 这是一个修改过的小提琴：http: [//jsfiddle.net/q7EkY/7/](http://jsfiddle.net/q7EkY/7/)

```
$scope.color = '';
$scope.size = '';
$scope.colors = function () {
    var colors = [];
    for (var i = 0; i < $scope.items.length; i++) {
       if (colors.indexOf($scope.items[i].colour) == -1) colors.push($scope.items[i].colour);
    }
    return colors;
};

$scope.sizes = function () {
    var sizes = [];
    for (var i = 0; i < $scope.items.length; i++) {
       if ((!$scope.color || $scope.items[i].colour == $scope.color) && sizes.indexOf($scope.items[i].size) == -1) sizes.push($scope.items[i].size);
    }
    return sizes;
}

$scope.doFilter = function () {
    var filter = {};
    if ($scope.color) filter.colour = $scope.color;
    if ($scope.size) filter.size = $scope.size;
    return filter;
} 
```

模板：

```
<div ng-controller="myCtrl">
    <select ng-model="color" ng-options="c for c in colors()">
        <option value="">Colour</option>
    </select>
    <select ng-model="size" ng-options="s for s in sizes()">
        <option value="">Size</option>
    </select>
    <div ng-repeat="item in items | filter:by_colour | filter:doFilter()">
        {{ item.title }}
    </div>
</div> 
```

我认为应该有更清晰的方法来过滤值，例如使用 _.js。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:10:49.910

您应该在您的范围内创建一个过滤器函数，并将其用作“a | filter”的参数这是一个使用它的简短示例：

看法：

```
<div ng-controller="myCtrl">
<div ng-repeat="item in items | filter:doFilter()">
    {{ item.title }}
</div>
<div>Is filter active? <input type="checkbox" ng-model="filterActive"/></div> 
```

控制器：

```
var myApp = angular.module('myApp',[]);

myApp.controller('myCtrl', function ($scope) {
    $scope.items = [{
        title: 'First item',
        active: true
    }, {
        title: 'Second item',
        active: false
    }];
    $scope.doFilter = function () {
        if ($scope.filterActive) return { active: true };
        return {};
    }
}); 
```

[http://jsfiddle.net/q7EkY/1/](http://jsfiddle.net/q7EkY/1/)

# c# - 在 C# 中转换 UTC 日期/时间字符串

> ID：14774219
> 
> 赞同：5
> 
> 时间：2013-02-08T14:00:07.427
> 
> 标签：c#, tryparse

我需要将字符串`"Fri Sep 11 00:00:00 GMT+04:00 2020"`转换为`DateTime`对象`11.09.2011`。

当我使用

```
DateTime result;
DateTime.TryParseExact(MyString, "ddd MMM dd HH:mm:ss 'GMT'zzz yyyy", 
    CultureInfo.InvariantCulture, DateTimeStyles.None, out result); 
```

`result`等于`{9/10/2020 11:00:00 PM}`。

如何修改代码以使日期组件是`11.09.2011`而**不是** `10.09.2011`（我只需要日期而不关心时间）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T14:07:11.493

`DateTimeOffset`假设您*有*一个偏移量，请改为解析为 a 。从您正在使用的[说明符的](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#zzSpecifier)[文档中：`zz`](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx#zzSpecifier)

> 对于 DateTime 值，“zz”自定义格式说明符表示本地操作系统时区与 UTC 的有符号偏移量，以小时为单位。它不反映实例的 DateTimeKind 属性的值。因此，不建议将“zz”格式说明符与 DateTime 值一起使用。

所以你最终会得到：

```
DateTimeOffset result;
bool success = DateTimeOffset.TryParseExact
         (text, "ddd MMM dd HH:mm:ss 'GMT'zzz yyyy", 
          CultureInfo.InvariantCulture, DateTimeStyles.None, out result); 
```

从那里，您可以参加`DateTime`9 月 11 日午夜的比赛。

如果你*只*想要一个日期，你可以使用我的[Noda Time](http://noda-time.googlecode.com)项目来创建一个`LocalDate`：

```
LocalDate = OffsetDateTime.FromDateTimeOffset(result).LocalDateTime.Date; 
```

（我很想建议直接解析到`OffsetDateTime`，但我们还没有得到支持。我们希望将它包含在版本 1.2 中。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T14:02:17.057

C# 没有纯`Date`类型。
如果您不关心时间，请忽略`DateTime`.

如果您希望时间始终为午夜，请使用该`.Date`属性，它将返回`DateTime`具有相同日期但在午夜的 a。

# mysql - MySQL BEFORE UPDATE 触发器 - 更改值

> ID：14774220
> 
> 赞同：15
> 
> 时间：2013-02-08T14:00:13.620
> 
> 标签：mysql, sql, triggers

所以，我有一个名为employees 的MySQL 表。

```
ID    name    meta
0     jack    ok
1     anne    del 
```

我想编写一个触发器来防止 meta='del' 的行更新元字段。所以，如果我这样做：

```
UPDATE employees SET meta = 'busy' WHERE ID = 0 
```

该行应该被更新并且元将是“忙”

但是当我这样做时：

```
UPDATE employees SET meta = 'busy' WHERE ID = 1 
```

元字段仍应为“del”

我试过了：

```
delimiter $$
CREATE TRIGGER updateEmployees
BEFORE UPDATE ON employees
FOR EACH ROW 
BEGIN
    IF OLD.meta = 'del' THEN
        NEW.meta = 'del'
    END IF;
END$$
delimiter ; 
```

但是 MySQL 返回一个语法错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-06-28T14:12:49.343

您忘记添加 SET 子句。这样它实际上并没有改变值。

```
delimiter $$
CREATE TRIGGER updateEmployees
BEFORE UPDATE ON employees
FOR EACH ROW 
BEGIN
    IF OLD.meta = 'del' THEN
        SET NEW.meta = 'del';
    END IF;
END$$
delimiter ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:01:37.567

 ~~你错过了`;`

```
delimiter $$
CREATE TRIGGER updateEmployees
BEFORE UPDATE ON employees
FOR EACH ROW 
BEGIN
    IF OLD.meta = 'del' THEN
        NEW.meta = 'del';   -- << here
    END IF;
END$$
delimiter ; 
```

 ~~*触发是邪恶*的。

触发的另一种方法是添加另一个条件`AND`

```
UPDATE employees 
SET    meta = 'busy' 
WHERE  ID = 1 AND meta <> 'del' 
```~~~~

# android - 查找设备支持的触摸次数

> ID：14774223
> 
> 赞同：1
> 
> 时间：2013-02-08T14:00:16.920
> 
> 标签：android, touch, multi-touch

有没有办法找出设备支持的触摸次数。有没有办法以编程方式找到值，而不是手动触摸并找出实际值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T14:09:35.277

有五种可能：

1.  该设备没有触摸屏（`hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN)`退货`false`）

2.  该设备具有触摸屏，但仅支持单点触摸事件（`hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN)`返回`true`但`hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN_MULTITOUCH)`返回`false`）

3.  该设备具有触摸屏并支持多点触摸，但仅在手势级别（`hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN_MULTITOUCH)`返回`true`但`hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN_MULTITOUCH_DISTINCT)`返回`false`）

4.  该设备有一个触摸屏，支持两个或多个不同的触摸但少于五个（`hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN_MULTITOUCH_DISTINCT)`返回`true`但`hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN_MULTITOUCH_JAZZHAND)`返回`false`）

5.  该设备有一个触摸屏并支持五个或更多不同的触摸（`hasSystemFeature(PackageManager.FEATURE_TOUCHSCREEN_MULTITOUCH_JAZZHAND)`返回`true`）

你找不到比这更精细的粒度了。

顺便说一句，该`hasSystemFeature()`方法在`PackageManager`.

# c# - 检查列值是否为空或 null 时出错

> ID：14774229
> 
> 赞同：0
> 
> 时间：2013-02-08T14:00:37.740
> 
> 标签：c#, winforms, datagridview

我正在尝试`["CellNumber"]`使用 if 条件检查列值是否为空。即使列单元格值不为空，它也会通过消息框进行提示，而不是退出`foreach loop`并更新数据。

```
 private void btnUpdate_Click(object sender, EventArgs e)
    {
        da = new SqlDataAdapter("select * from Measurement", con);
        SqlCommandBuilder cb = new SqlCommandBuilder(da);
        foreach (DataGridViewRow row in dgv.Rows)
        {
            if (Convert.ToString(row.Cells["CellNumber"].Value) == "")
            {
                MessageBox.Show("Please enter cellnumber", "Missing Information");
                return;
            }
        }
        try
        {
            da.Update(ds, "Measurement");
        }
        catch (DBConcurrencyException ex)
        {
            MessageBox.Show(ex.Message);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:05:38.087

请通过执行检查您在 datagridview 中的行数

```
 DataGridView. If myDataGridView.Rows.Count == 0 
```

如果等于 0 则为空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:09:28.080

```
if (string.IsNullOrEmpty(row.Cells["CellNumber"].Value))
{ Your Code  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:07:01.440

您使用字符串“CellNumber”，它不应该是一个`int`吗？

`if (Convert.ToString(row.Cells["CellNumber"].Value) == "")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:12:42.707

试试这个方法

```
if (row.Cells["CellNumber"].Value == null || string.IsNullOrEmpty(row.Cells["CellNumber"].Value.ToString()))
{
   //rest
} 
```

* * *

在验证之前调用`dgv.CurrentRow.DataGridView.EndEdit();`以保存所有单元格中的更改:)

```
private void btnUpdate_Click(object sender, EventArgs e)
{
    dgv.CurrentRow.DataGridView.EndEdit();
    dgv.EndEdit();
    .... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T14:18:21.353

尝试使用`.EditedFormattedValue`

```
 if (string.IsNullOrWhiteSpace(row.Cells["CellNumber"].EditedFormattedValue.ToString()))
        {
            MessageBox.Show("Please enter cellnumber", "Missing Information");
            return;
        } 
```

# python - 在Python中对角镜像

> ID：14774230
> 
> 赞同：3
> 
> 时间：2013-02-08T14:00:39.370
> 
> 标签：python, image, jython, mirror, jes

我正在学习关于 python 的编程课程，我们正在通过定义一个镜像点然后使用嵌套的 for 循环将一个像素从一侧复制到另一侧来处理镜像图像。例如，垂直镜像图像将使用以下代码：

```
def mirrorVertical(source):
 mirrorPoint = getWidth(source) / 2
 width = getWidth(source)
 for y in range(0,getHeight(source)):
   for x in range(0,mirrorPoint):
     leftPixel = getPixel(source,x,y)
     rightPixel = getPixel(source,width - x - 1,y)
     color = getColor(leftPixel)
     setColor(rightPixel,color) 
```

我目前正在处理一个作业问题，要求我们对角镜像图像，以便左上角反射到右下角。到目前为止，我发现的每个示例和答案仅适用于方形图像，我需要能够将其应用于任何图像，最好是通过定义对角镜像点。我一直在尝试使用 ay = mx + b 样式方程定义镜像点，但我不知道如何告诉 Python 让它成为一条线。任何不特定于方形图像的帮助将不胜感激！

注意：由于我是全新的，我还不能发布图像，但对角线镜像点将从左下角延伸到右上角。左上角三角形中的图像将反射到右下角。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:49:20.740

您可以像这样交换非方形数组的左上角和右下角：

```
height = getHeight(source)
width = getWidth(source)
for i in range(height - 1):
    for j in range(int(width * float(height - i) / height)):
        # Swap pixel i,j with j,i 
```

这适用于沿对角线镜像。您似乎暗示您可能希望沿某个任意位置进行镜像。在这种情况下，您需要决定如何填充镜像线另一侧没有匹配像素的像素。

您提到您正在处理一项任务，因此您可能需要明确地执行循环，但请注意，如果您将数据放入一个 numpy 数组中，您可以通过组合 numpy 函数轻松（并且更有效地）实现您想要的`fliplr`, `flipud`, 和`transpose`.

另请注意，在您的代码示例（左/右镜像）中，您将左侧像素复制到右侧，但反之亦然，因此您实际上并未镜像图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-29T12:42:04.557

只是为了分享一种对角镜像的方式，**从左下角到右上角**：

*如果学生需要从“右上角到左下角”镜像或使用相反的对角线，则学生负责适应。*

```
# !! Works only with squared pictures... !!
def diagMirrorPicture(picture):
    height = getHeight(picture)
    width = getWidth(picture)

    if (height != width):
        printNow("Error: The input image is not squared. Found [" + \
                                     str(width) + " x " + str(height) + "] !")
        return None

    newPicture = makeEmptyPicture(width, height)

    mirrorPt = 0
    for x in range(0, width, 1):
        for y in range(mirrorPt, height, 1):
            sourcePixel = getPixel(picture, x, y)
            color = getColor(sourcePixel)

            # Copy bottom-left as is
            targetPixel = getPixel(newPicture, x, y)
            setColor(targetPixel, color)

            # Mirror bottom-left to top right
            targetPixel = getPixel(newPicture, y, x)
            #                                  ^^^^  (simply invert x and y)
            setColor(targetPixel, color)

        # Here we shift the mirror point
        mirrorPt += 1

    return newPicture

file = pickAFile()
picture = makePicture(file)

picture = diagMirrorPicture(picture)

if (picture):
    writePictureTo(picture, "/home/mirror-diag2.png")
    show(picture) 
```

*注意：这就像我们为每一行像素独立地操作垂直镜像，沿着通过该`mirrorPt`点的垂直轴。*

输出（***Antoni Tapies****绘画***）：**

 *** * *

……………………………………………………………………………………………………………… ![在此处输入图像描述](../Images/3996171ef363afbcbbfc82920c05b0a3.png)_ ![在此处输入图像描述](../Images/f8b945bf59dbf076b5aa3d919d177294.png)_ ..

* * *

* * *

*以下是实验性的，只是为了好玩......*

```
# Draw point, with check if the point is in the image area
def drawPoint(pic, col, x, y):
   if (x >= 0) and (x < getWidth(pic)) and (y >= 0) and (y < getHeight(pic)):
     px = getPixel(pic, x, y)
     setColor(px, col)

# Draw line segment given two points
# From Bresenham's line algorithm :
# http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm
def drawLine(pic, col, x0, y0, x1, y1):

   dx = abs(x1-x0)
   dy = abs(y1-y0) 
   sx = sy = 0

   #sx = 1 if x0 < x1 else -1
   #sy = 1 if y0 < y1 else -1

   if (x0 < x1): 
     sx = 1 
   else: 
     sx = -1
   if (y0 < y1):
     sy = 1 
   else: 
     sy = -1

   err = dx - dy

   while (True):

     drawPoint(pic, col, x0, y0)

     if (x0 == x1) and (y0 == y1): 
       break

     e2 = 2 * err
     if (e2 > -dy):
       err = err - dy
       x0 = x0 + sx

     if (x0 == x1) and (y0 == y1):
       drawPoint(pic, col, x0, y0)
       break

     if (e2 <  dx):
       err = err + dx
       y0 = y0 + sy 

# Works only with squared cropped areas :
# i.e. in [(x0, y0), (x1, y1)], abs(x1-x0) must be equal to abs(y1-y0)
#
# USAGE :
#    * To get bottom reflected to top use x0 > x1 
#    * To get top reflected to bottom use x0 < x1 

def diagCropAndMirrorPicture(pic, startPt, endPt):
    w = getWidth(pic)
    h = getHeight(pic)

    if (startPt[0] < 0) or (startPt[0] >= w) or \
       (startPt[1] < 0) or (startPt[1] >= h) or \
       (endPt[0] < 0) or (endPt[0] >= w) or \
       (endPt[1] < 0) or (endPt[1] >= h):
          printNow("Error: The input points must be in the image range !")
          return None

    new_w = abs(startPt[0] - endPt[0])
    new_h = abs(startPt[1] - endPt[1])

    if (new_w != new_h):
          printNow("Error: The input points do not form a square !")
          return None

    printNow("Given: (" + str(startPt[0]) + ", " + str(endPt[0]) + ") and (" \
                        + str(startPt[1]) + ", " + str(endPt[1]) + ")")

    newPicture = makeEmptyPicture(new_w, new_h)

    if (startPt[0] < endPt[0]):
        offsetX = startPt[0]
        switchX = False
        switchTB = True
    else:
        offsetX = endPt[0]
        switchX = True
        switchTB = False

    if (startPt[1] < endPt[1]):
        offsetY = startPt[1]
        switchY = False
    else:
        offsetY = endPt[1]
        switchY = True

    # (switchX  XOR  switchY)
    changeDiag = (switchX != switchY)

    mirror_pt = 0
    for x in range(0, new_w, 1):

        for y in range(mirror_pt, new_h, 1):
        #for y in range(0, new_h, 1):

            oldX = x
            oldY = y

            if (switchTB):
                sourcePixel = getPixel(picture, offsetX+new_w-1- oldX, offsetY+new_h-1- oldY)
            else:
                sourcePixel = getPixel(picture, offsetX+oldX, offsetY+oldY)
            color = getColor(sourcePixel)

            if (changeDiag):
                newX = new_w-1 - x
                newY = new_h-1 - y
                #printNow("Change Diag !")
            else:
                newX = x
                newY = y

            # Copied half
            if (switchTB):
                targetPixel = getPixel(newPicture, new_w-1- x, new_h-1- y)
            else:
                targetPixel = getPixel(newPicture, x, y)
            setColor(targetPixel, color)

            # Mirror half (simply invert x and y)
            if (switchTB):
                targetPixel = getPixel(newPicture, new_h-1- newY, new_w-1- newX)
            else:
                targetPixel = getPixel(newPicture, newY, newX)
            setColor(targetPixel, color)

        # Here we shift the mirror point
        if (not changeDiag):
            mirror_pt += 1

    return newPicture

file = pickAFile()
pic = makePicture(file)
picture = makePicture(file)

# Draw working area
drawLine(pic, white, 30, 60, 150, 180)
drawLine(pic, white, 30, 180, 150, 60)
drawLine(pic, black, 30, 60, 30, 180)
drawLine(pic, black, 30, 60, 150, 60)
drawLine(pic, black, 150, 60, 150, 180)
drawLine(pic, black, 30, 180, 150, 180)
show(pic)
writePictureTo(pic, "D:\\pic.png")

# Build cropped and mirrored areas
pic1 = diagCropAndMirrorPicture(picture, (150, 60), (30, 180))
pic2 = diagCropAndMirrorPicture(picture, (30, 180), (150, 60))
pic3 = diagCropAndMirrorPicture(picture, (150, 180), (30, 60))
pic4 = diagCropAndMirrorPicture(picture, (30, 60), (150, 180))

# Show cropped and mirrored areas
if (pic1):
    writePictureTo(pic1, "D:\\pic1.png")
    show(pic1)

if (pic2):
    writePictureTo(pic2, "D:\\pic2.png")
    show(pic2)

if (pic3):
    writePictureTo(pic3, "D:\\pic3.png")
    show(pic3)

if (pic4):
    writePictureTo(pic4, "D:\\pic4.png")
    show(pic4) 
```

* * *

..................................................... ………………………………………………………………………………………………………………………………………… ![在此处输入图像描述](../Images/fafed2b2bc7372fd30038ef9507084d3.png)_ ...........

……………………………………………………………………………………………………………………………………………………………………………… ![在此处输入图像描述](../Images/76ec90b4b265a8e2cf7b11458f212818.png)_ ![在此处输入图像描述](../Images/5a058c04e9fe43567ec32dbfca8ca6b4.png)_ ![在此处输入图像描述](../Images/d09e29c62152101e9fc5f5c55f4cc3b6.png)_ ![在此处输入图像描述](../Images/b015921e9c38b610496e4201ece47353.png)_

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:28:54.487

我假设您想根据 45 度线而不是矩形对角线进行镜像。

您必须创建一个新图像，它的宽度是原始图像的高度，它的高度是原始图像的宽度。

如果坐标系的原点在左下角，则将原点 (x, y) 复制到新图像的 (y, x) 位置。如果它是另一个角落，你必须多想一点；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-10T10:36:59.390

这是一个相对简单的解决方案，适用于矩形图像。此示例代码假设 sourceImage 来自 Python Pillow 库，但概念是通用的。

```
## WORKS WITH RECTANGLES! 
def mirrorDiagonal(sourceImage):
    copyImage = sourceImage
    width = copyImage.width
    height = copyImage.height
    for y in range(0,height):
        ##The for loop for X is bounded by a slope of width to height.
        mirrorPoint = int((width/height)*y)
        for x in range(0, mirrorPoint):
            leftPixel = copyImage.getpixel((x,y))
            percentageX = float(x / width)
            percentageY = float(y / height)
            rightPixel = sourceImage.getpixel((width*percentageY, height*percentageX))
            copyImage.putpixel((x,y),rightPixel)
    return copyImage 
```

本质上，你做其他人提到的，交换 x 和 y 坐标。然而，对于一个矩形，如果你只是交换坐标，你会得到一条不会从一个角到另一个角的对角线。例如，对于 1000 x 2000 像素的图像，交换角 (1000, 0) 将得到 (0, 1000)，只有图像的一半。

我假设您真正想要的是 (0, 2000) 的左下角反映到 (1000, 0) 的右上角。为了解决这个问题，您需要使用宽度和高度的百分比。**

# sharepoint-2010 - 将 SharePoint 2010 列表导出到 MS Access

> ID：14774243
> 
> 赞同：0
> 
> 时间：2013-02-08T14:00:58.743
> 
> 标签：sharepoint-2010

是否可以以编程方式将 SP 列表数据导出到 MS Access？

瑞诗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:31:02.830

是的，您可以从 SharePoint 列表中创建一个链接表，并且可以对它执行 SQL。 [http://office.microsoft.com/en-us/access-help/publish-a-database-to-a-sharepoint-site-HA010131469.aspx](http://office.microsoft.com/en-us/access-help/publish-a-database-to-a-sharepoint-site-HA010131469.aspx)

# javascript - 如何在循环中更改进度条？

> ID：14774245
> 
> 赞同：6
> 
> 时间：2013-02-08T14:01:07.473
> 
> 标签：javascript, loops, progress-bar

我有html代码。我需要一些javascript代码来更新每次迭代的值

```
<progress id="progressBar" max="100" value="0"></progress>

for (i = 0; i <= 100; i ++) {
    //update progress bar
} 
```

我尝试做这样的事情：

```
var progressBar = document.getElementById("progressBar");
progressBar.value += i; 
```

但这不起作用。循环完成时更新进度条。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:06:11.120

您需要使用 setTimeout 编写一个异步循环，如下所示：

```
var counter = 0;
(function asyncLoop() {

    $('#progressBar').val(counter++);
    if (counter <= 100) {
        setTimeout(asyncLoop, 50);
    }
})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T14:24:17.153

对于虚拟进度条，我会这样做：

**html**

```
<div id="progress">
    <span class="progress-text"></span>
    <div class="progress-bar"></div>
</div> 
```

**CSS**

```
#progress {
    position:relative;
    width:250px;
    height:20px;
    border:1px solid red;
}

#progress .progress-bar {
    background:blue;
    height:20px;
    width:0%;
    display:inline-block;
}

#progress .progress-text {
    position:absolute;
    z-index:2;
    right:0;
} 
```

**jQuery**

```
$(document).ready(function() {
    var progression = 0,
    progress = setInterval(function() 
    {
        $('#progress .progress-text').text(progression + '%');
        $('#progress .progress-bar').css({'width':progression+'%'});
        if(progression == 100) {
            clearInterval(progress);
            alert('done');
        } else
            progression += 10;

    }, 1000);
}); 
```

[jsFiddle](http://jsfiddle.net/soyuka/66RmV/)

您也可以使用[JQueryUI 进度条](http://jqueryui.com/progressbar/)！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-20T07:30:44.147

我为此苦苦挣扎了几天，最后把我学到的东西放到了下面这个相当简单的解决方案中，它在 HTML 页面上放置了一个按钮和一个进度条。

单击按钮时，javascript 开始计数，并随着计数的进行更新进度条。计数在按钮定义中设置为默认值 4321，但您可以将其更改为您选择的任何值。

```
<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Progress Bar Demo</title>
<script>
var button;
var count;
var countmax;
var progressbar;
var timerID;

function start(max) {
    button = document.getElementById("button");
    count = 0;
    countmax = max;
    progressbar = document.getElementById("bar");
    progressbar.max = countmax;

    timerID = setInterval(function(){update()},10);
}//end function

function update() {
    button.innerHTML = "Counting to " + countmax;
    count = count + 100;
    progressbar.value = count;
    if (count >= countmax) {
        clearInterval(timerID);
        button.innerHTML = "Ready";
        progressbar.value = 0;
    }//end if
}//end function

</script>
</head>

<body>
<p>
    <button onclick="start(4321)" id="button" style="font-size:18px;">Ready</button><br>
    <br>
    <progress id="bar" value="0"></progress>
</p>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:06:13.180

```
$("#progressBar").prop("value",i); 
```

应该将属性值设置为该循环中的任何 i

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T14:08:11.030

```
$("#progressbar").progressbar({ value: i }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-27T19:47:49.593

我知道这篇文章很旧，但以防万一有人需要它一段时间：

```
$("progress").val(i); 
```

将根据 value 更改进度值`i`。

* * *

例如，要上传图像，您可以使用 jquery-form 库`<script src="http://malsup.github.com/jquery.form.js"></script>`。因此，您可以在此库的函数中更新您的`progress`html 标签，`uploadProgress`如下所示：

```
uploadProgress: function(event, position, total, percentComplete) {
    progressBar.val(percentComplete);
}, 
```

如果您想使用标签并在编码中更清楚一点，请参见[此处](http://malsup.github.io/demo/progress.html)的 jquery-form 演示并将其与上述知识混合。`progress`

我希望它可以帮助某人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-22T09:02:40.590

Beware the "must be enough" timeouts, they highly depend on each machine's speed. I discovered that `$('progress#id').text(Math.random())` forces the UI to redraw.

# jquery - 如何更改滚动方向

> ID：14774246
> 
> 赞同：-3
> 
> 时间：2013-02-08T14:01:07.777
> 
> 标签：jquery, html, css

我喜欢为特定列更改相反方向的滚动方向。我尝试搜索谷歌，但我没有找到任何解决方案。举个例子，拿这个...

jFiddle：http: [//jsfiddle.net/yLHeC/1/](http://jsfiddle.net/yLHeC/1/)

共有三列，

左，中，右。每列高度为 5000px。中心列的负边距为 4500 像素。现在当用户滚动时，左右应该像往常一样，但中心应该从下到上滚动。希望你明白了。

示例网站：[http ://www.ballantyne.it/](http://www.ballantyne.it/)

```
.left{
height:5000px;
}

.center{
height:5000px;
margin-top:-4500px;
}

.right{
height:5000px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:05:33.710

您必须为中心列添加一个容器，将其溢出设置为隐藏，将高度设置为窗口的高度，然后使用`$(window).scroll()`事件附加`$(document).height() - $(window).scrollTop()`到中心列 - 这应该适合您

编辑：这里是代码[http://jsfiddle.net/yLHeC/30/](http://jsfiddle.net/yLHeC/30/)和解释：

```
$(document).ready(function(){
    var CONSTANT_OFFSET = -200; // starting position
    $(window).scroll(function(){
       $('.center').css('margin-top', CONSTANT_OFFSET + $(this).scrollTop()*2 + 'px'); 
    }).scroll();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:54:47.143

在我的示例中，滚动位置被锁定到相邻列的高度，因此移动量是比率的计算，因此是精确的。

[http://jsfiddle.net/kuxi/xNSTb/](http://jsfiddle.net/kuxi/xNSTb/)

```
$('.right').scrollTop(
    ($('.right .content').height() - $(window).height())
    *
    ( 1 - $(window).scrollTop() / ($('.left .content').height() - $(window).height()))
); 
```

# java - Applet，drawpolygon 代替 String 特殊字符

> ID：14774252
> 
> 赞同：0
> 
> 时间：2013-02-08T14:01:33.020
> 
> 标签：java, applet, polygon

我学习Java的时间不长，请原谅我，但我被要求制作一个小程序，它的基本功能之一是允许用户输入文本框并让小程序显示他们写的内容，在我的 2 个首字母 (G,P) 的任何情况下，程序都应该填充它的多边形，而不是写这个字符。

显然我不能每次都在同一个坐标中制作这个多边形，所以我使用了一种我认为应该可行的方法，即为第一个点创建变量，然后让小程序接收角色的坐标（通过 for循环）然后显示多边形，我遇到的主要问题是多边形是一个单独的函数，它一直说预期的标识符，为了摆脱这个我改变了变量xpoints，ypoints和npoints的初始化位置，它们是不再是全球性的。但现在我得到了 60 个错误，说不是语句（在多边形函数中）和“；” 预期的。有什么帮助吗？？

```
import java.util.*;
import java.awt.*;
import java.awt.event.*;
import java.applet.Applet;
import java.awt.Graphics;
import java.awt.font.*;
import java.io.*;
import java.util.regex.*;
import java.awt.color.*;

import java.net.*;
import java.awt.geom.*; 

public class assignment extends Applet implements MouseListener,ActionListener {
    int gx;
    int gy;
    int px;
    int py;
    char c;
    int i;

    String replaced;
    char sl1='G';
    String sl2="P";
    String pr_name;
    String pr_styleType;
    Label pr_label;
    TextField pr_text;
    TextField pr_style;

    Label pr_textInput;
    Label pr_textStyle;

    public void init(){
        pr_label= new Label ("Enter text you would like to display!");
        add(pr_label);

    pr_textInput= new Label ("Text:");
        add(pr_textInput);

    pr_textStyle= new Label ("Style:");
        add(pr_textStyle);

        pr_text= new TextField(20);
        add (pr_text);
        pr_text.addActionListener(this);
        addMouseListener(this);

        pr_style= new TextField(5);
        add (pr_style);
        pr_style.addActionListener(this);
        addMouseListener(this);
    }

    public void start() {
        setSize(800,800);
    setBackground( new Color(125,158,192) );
        pr_name="";
        pr_styleType="";
    }

    public void paint (Graphics g) {
        pr_label.setLocation(100,0);
        pr_textStyle.setLocation(275,50);
    pr_textInput.setLocation(50,50);
        pr_text.setLocation(100,50);
    pr_style.setLocation(325,50);

    g.setColor(Color.white);
    Font font = new Font("Arial",Font.BOLD,20);
    g.setFont(font);

    for (i=0; i<pr_name.length(); i++) {
            c=pr_name.charAt(i);

        if (c == sl1) {
        drawGPolygon(xpoints,ypoints,npoints);
            }
    }            

    }   

    public void mouseClicked(MouseEvent e){}

    public void mousePressed(MouseEvent e){}
    public void mouseReleased(MouseEvent e){}
    public void mouseEntered(MouseEvent e){}
    public void mouseExited(MouseEvent e){}

    public void actionPerformed(ActionEvent e) {
        //set ActionCommand
    if (e.getSource()== pr_text) {
            pr_name =e.getActionCommand();
    }
    else if (e.getSource()==pr_style) {
            pr_styleType=e.getActionCommand();
    }

    //set Style 
    repaint();
    }

    public void drawGPolygon(int xpoints, int ypoints,int npoints) {
        gx=e.getX(c);
    gy=e.getY(c);
        xpoints[] = {gx, gx, gx+40, gx+40,gx+45,gx+45,gx+25,gx+25,gx+30,gx+30,gx+5,gx+5,gx+50,gx+50};
    ypoints[] = {gy, gy+50, gy+50, gy+30, gy+30,gy+20,gy+20,gy+30,gy+30,gy+40,gy+40,gy+10,gy+10,gy};
        npoints = 14;
        g.drawPolygon(xpoints, ypoints, npoints);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:18:59.073

基本上，您需要使用字体的字形将文本转换为形状。

看看[java/swing：将文本字符串转换为Shape](https://stackoverflow.com/questions/2466233/java-swing-converting-a-text-string-to-a-shape)

# android - Android SQLite 列索引

> ID：14774259
> 
> 赞同：1
> 
> 时间：2013-02-08T14:02:07.343
> 
> 标签：android, sqlite

我正在查询我的 SQLite 数据库以使用 IN 运算符获取记录

```
myDataBase.rawQuery("SELECT * FROM artist WHERE artist_id IN (?)", values); 
```

但我得到了一些 SQLite 异常。我不明白当我的数据库有 1 条由该查询返回的记录时问题是什么，那么它是完美的，但是当我的数据库中有 2 条或更多记录要通过此查询返回时，它会抛出一些异常，即异常是

```
SQLiteException: bind or column index out of range 
```

请让我知道这个查询我做错了什么

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:09:52.890

我会建议这样

```
StringBuilder query = new StringBuilder();
// build "SELECT * FROM artist WHERE artist_id IN "
query.append('(').
for (int i = 0; i < values.length; i++) {
    query.append(values[i]);
    if (i != values.length - 1) {
        query.append(',');
    }
}
query.append(')');

myDataBase.rawQuery(query.toString(), null); 
```

# javascript - 通过 AJAX 以 JSON 格式返回的动态生成的 Javascript 在附加时不会执行

> ID：14774260
> 
> 赞同：0
> 
> 时间：2013-02-08T14:02:13.670
> 
> 标签：javascript, jquery, ajax

我有一个向 PHP 脚本发出 AJAX 请求的网页。该 PHP 脚本使用有效的 JSON 对象进行响应，并将`Content-type`标头设置为`application/json`.

JSON 格式如下（由`console.log(JSON.stringify(data))`where `data`is JSON response 报告）：

```
{
    "content": "<script type=\"text/javascript\">console.log(\"test\");</script>"
} 
```

然后我用“内容”类创建一个 div（记住`data`是我的 AJAX responseText JSON 对象）：

```
var content = document.createElement("div");
content.setAttribute("class", "content");
content.innerHTML = data.content; 
```

最后，我将内容 div 附加到我网站上的现有 div 中。

```
existingDiv.appendChild(content); 
```

我检查了`elements`Google Chrome 开发者工具选项卡中的源代码，因为它很好地显示了什么是实际的 DOM 节点，以及什么只是文本。脚本块显示为 DOM 节点。

不幸的是，脚本没有被执行——`console.log("test");`没有输出`test`到开发者工具控制台。

到目前为止，我看到的唯一选择是使用`eval()`我试图避免像瘟疫一样的方法。此外，我的内容可能不仅仅包含一个脚本块。它也可以包含其他 HTML 标记。

我错过了什么？如何让这个动态添加的 Javascript 块执行？

jQuery 解决方案是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:06:50.573

设置`.innerHTML`不评估`<script>`标签；这不是浏览器所做的。

如果您需要返回要执行的 JavaScript，最好将其作为字符串（不带`<script>`标签）发送，以便您可以轻松地将其传递给`eval()`.

*编辑*如果您使用 jQuery 执行此操作而不是直接设置`innerHTML`（即，如果您使用`$(something).html()`），并且您将内容直接添加到 DOM 中的某些内容（即，不仅仅是已实例化但未附加到 DOM 的元素），然后 jQuery 会主动查找并提取您的`<script>`内容并对其进行评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:11:02.197

使用`$.getScript()`简单、可缓存、直接：

[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

（显然，您必须修改生成包含 jscode 和更改标头的 json 的服务器脚本）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T14:27:06.123

一个可能的解决方案是`new Function()`用作：

```
$(document).ready(function(){
   var script = "window.alert('hi')";
   new Function(script)();
}); 
```

至于为什么你的脚本没有执行，是@Pointy 建议的（但不是完全+一种规避它的方法），如下代码所示：

```
<script type='text/javascript'>
$(document).ready(function()
{
    $("<script type='text/javascript'>window.alert('hi');<\/script>").appendTo(document.body); // this will work

    var container = document.createElement("div"); // this won't work
    container.innerHTML = "<script type='text/javascript'>window.alert('hi');<\/script>";
    document.body.appendChild(container);

    var script = document.createElement("script"); // this will
    script.innerHTML = "window.alert('hi');";
    document.body.appendChild(script);
});
</script> 
```

编辑：添加了一个请求的单元测试：http: [//jsperf.com/eithed-hvsa](http://jsperf.com/eithed-hvsa)

# iphone - 如何使应用程序以特定方向启动？

> ID：14774270
> 
> 赞同：1
> 
> 时间：2013-02-08T14:02:56.830
> 
> 标签：iphone, device-orientation

我的应用程序以横向模式运行。我希望它始终以这个方向启动：![在此处输入图像描述](../Images/99dc4cee0256402c62e713aeaee169c3.png)

如果您在启动时以其他方式握住它，它应该翻转，但没有旋转动画。我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:08:08.240

启动应用程序时，您可以通过以下方式检查当前方向：

```
UIDevice myDevice = [UIDevice currentDevice]; 

[myDevice beginGeneratingDeviceOrientationNotifications]; 

UIDeviceOrientation currentOrientation = [myDevice orientation]; 
```

设备方向可以是：

```
typedef enum {
   UIDeviceOrientationUnknown,
   UIDeviceOrientationPortrait,
   UIDeviceOrientationPortraitUpsideDown,
   UIDeviceOrientationLandscapeLeft,
   UIDeviceOrientationLandscapeRight,
   UIDeviceOrientationFaceUp,
   UIDeviceOrientationFaceDown
} UIDeviceOrientation; 
```

一旦你知道它应该被旋转，

你可以 - 使用这个答案：[UINavigationController Force Rotate](https://stackoverflow.com/questions/9826920/uinavigationcontroller-force-rotate/10146334#10146334)

或者 - 如果仅支持 iOS 5 及更高版本：[https ://stackoverflow.com/a/9827763/894671](https://stackoverflow.com/a/9827763/894671)

或者 - 如果仅 iOS 6：[https ://stackoverflow.com/a/12691744/894671](https://stackoverflow.com/a/12691744/894671)

祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T14:08:14.947

如果您只想使用横向右，您应该简单地取消选择横向左。

但是请注意，Apple 可能会拒绝您的提交，因为他们倾向于尽可能支持方向。

# haskell - yesod 回复纯文本

> ID：14774278
> 
> 赞同：2
> 
> 时间：2013-02-08T14:03:38.500
> 
> 标签：haskell, yesod

由于我对 Haskell 很陌生，有人可以将我推向解决以下问题的正确方向吗...？

我从 Yesod 的脚手架应用程序开始。提供从数据库内容生成的 HTML 工作正常，但是有没有一种优雅的方法来创建遍历数据库表的纯文本响应？使用类似 Handler 的简单纯文本

```
getTestR = return . RepPlain . toContent ... 
```

也可以，但我想服务：

配置/模型：

```
File
    path Text
Conf
    key Text
    val Text
    file FileId 
```

作为 SQL 查询中的明文：

```
select path, key, val from file, conf order by path, key; 
```

由于 hamlet 用于生成 HTML，我想我必须完全在 Haskell 中生成响应（迭代数据库内容）？

如何在数据库实体和文本（或 Int，如果 Row 是 Int 类型）之间进行转换，如何在数据库列 Id 之间进行转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:32:52.557

带有纯文本模板！！''#{expr}'' 允许 Text、String、Int32 或 Int64 表达式作为[Text.Shakespeare.Text.ToText的实例](http://hackage.haskell.org/packages/archive/shakespeare-text/1.0.0.5/doc/html/Text-Shakespeare-Text.html#t%3aToText)

```
{-# LANGUAGE OverloadedStrings, ConstraintKinds #-} 
module Handler.Plain where

import Import
import qualified Data.List as List
import Database.Persist.Sqlite
import qualified Data.Text as Text
import Control.Monad.Logger (MonadLogger)
import Control.Monad.Trans.Resource (MonadResourceBase)
import Text.Shakespeare.Text                       -- for the plain text template

stmt :: Text
stmt = "SELECT ??, ??  FROM File, Conf ON Conf.file = File.id ORDER BY File.path, Conf.key"

getQryResult :: (PersistQuery SqlPersist m, MonadLogger m, MonadResourceBase m) => () -> SqlPersist m [(Text, Text, Text)]
getQryResult () = do
    result  <- rawSql stmt []

    return $ List.map getMyData (result :: [(Entity File, Entity Conf)])

  where
    getMyData (Entity _ file, Entity _ conf) = (filePath file, confKey conf, confVal conf)

getPlainR :: Handler RepPlain
getPlainR = do
    result <- runDB $ getQryResult ()
    return $ RepPlain $ toContent $ Text.unlines $ List.map formatMyData result
  where
    -- formatMyData (a, b, c) = Text.intercalate ", " [a,b,c]

    -- with a plain text template:
    formatMyData (a, b, c) = [st|
         #{a}, #{b}, #{c} |] 
```

# ruby-on-rails - RoR 捆绑包获取 '=1.0.3 java' gem

> ID：14774281
> 
> 赞同：0
> 
> 时间：2013-02-08T14:03:40.883
> 
> 标签：ruby-on-rails, ruby, jdbc, bundle

我正在使用 JRuby，需要获取特定版本的 gem：

```
C:\>gem list activerecord-jdbcsqlite3-adapter --remote --all

*** REMOTE GEMS ***

activerecord-jdbcsqlite3-adapter (1.2.6, 1.2.5, 1.2.2.1, 1.2.2, 1.2.1, 1.2.0, 1.1.3, 1.1.2, 1.1.1, 1.1.0, 1.0.3 java, 1.0.2 java, 1.0.1 java, 1.0.0 java, 0.9.7
java, 0.9.6 java, 0.9.5 java, 0.9.4 java, 0.9.3 java, 0.9.2, 0.9.1, 0.9.0.1, 0.9, 0.8.2, 0.8.1) 
```

好的，所以我把它放在 Gemfile 中：

```
gem 'activerecord-jdbcsqlite3-adapter', '=1.0.3 java' 
```

但是 bundle 并不明白这一点：

```
C:\bundle install
c:/soft/jruby-1.6.8/lib/ruby/site_ruby/1.8/rubygems/requirement.rb:81:in `parse': Illformed requirement ["=1.0.3 java"] (ArgumentError)
       c:/soft/jruby-1.6.8/lib/ruby/site_ruby/1.8/rubygems/requirement.rb:106:in `initialize'
       org/jruby/RubyArray.java:2379:in `map!'
       c:/soft/jruby-1.6.8/lib/ruby/site_ruby/1.8/rubygems/requirement.rb:106:in `initialize'
       c:/soft/jruby-1.6.8/lib/ruby/site_ruby/1.8/rubygems/requirement.rb:44:in
`create'
       c:/soft/jruby-1.6.8/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:50:in `initialize'
       c:/soft/jruby-1.6.8/lib/ruby/gems/1.8/gems/bundler-1.2.3/lib/bundler/dependency.rb:28:in `initialize'
       c:/soft/jruby-1.6.8/lib/ruby/gems/1.8/gems/bundler-1.2.3/lib/bundler/dsl.rb:72:in `gem'
       C:/Users/IBM_ADMIN/test_jdbc_rails_sqlite/Gemfile:9:in `(eval)'
       org/jruby/RubyKernel.java:2086:in `instance_eval'
       c:/soft/jruby-1.6.8/lib/ruby/gems/1.8/gems/bundler-1.2.3/lib/bundler/dsl.rb:32:in `eval_gemfile'
       c:/soft/jruby-1.6.8/lib/ruby/gems/1.8/gems/bundler-1.2.3/lib/bundler/dsl.rb:7:in `evaluate'
       c:/soft/jruby-1.6.8/lib/ruby/gems/1.8/gems/bundler-1.2.3/lib/bundler/definition.rb:18:in `build'
       c:/soft/jruby-1.6.8/lib/ruby/gems/1.8/gems/bundler-1.2.3/lib/bundler.rb:144:in `definition'
       c:/soft/jruby-1.6.8/lib/ruby/gems/1.8/gems/bundler-1.2.3/lib/bundler/cli.rb:228:in `install'
       org/jruby/RubyKernel.java:2105:in `send'
       c:/soft/jruby-1.6.8/lib/ruby/gems/1.8/gems/bundler-1.2.3/lib/bundler/vendor/thor/task.rb:27:in `run'
       c:/soft/jruby-1.6.8/lib/ruby/gems/1.8/gems/bundler-1.2.3/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
       c:/soft/jruby-1.6.8/lib/ruby/gems/1.8/gems/bundler-1.2.3/lib/bundler/vendor/thor.rb:275:in `dispatch'
       c:/soft/jruby-1.6.8/lib/ruby/gems/1.8/gems/bundler-1.2.3/lib/bundler/vendor/thor/base.rb:408:in `start'
       c:/soft/jruby-1.6.8/lib/ruby/gems/1.8/gems/bundler-1.2.3/bin/bundle:14:in `(root)'
       c:/soft/jruby-1.6.8/lib/ruby/gems/1.8/gems/bundler-1.2.3/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
       c:/soft/jruby-1.6.8/lib/ruby/gems/1.8/gems/bundler-1.2.3/bin/bundle:14:in `(root)'
       org/jruby/RubyKernel.java:1087:in `load'
       c:\soft\jruby-1.6.8\bin\bundle:23:in `(root)'
There was an error in your Gemfile, and Bundler cannot continue. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:25:35.883

我想你正在寻找：

```
gem 'activerecord-jdbcsqlite3-adapter', '=1.0.3', :platforms => :jruby 
```

但是，如果您使用的是 jruby，您可能不需要 platfrom 部分。

# php - 通过 Ajax 和 PHP 强制下载

> ID：14774282
> 
> 赞同：6
> 
> 时间：2013-02-08T14:03:48.590
> 
> 标签：php, javascript, jquery, ajax, download

我想创建一个允许强制下载 JPG 的下载脚本。这是我的 php 脚本：

```
<?php
    header("Pragma: public"); // required
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Content-Description: File Transfer");
    header("Content-Type: image/jpg");
    header('Content-Disposition: attachment; filename="'.basename($GET['a']).'"');
    header("Content-Transfer-Encoding: binary");
    header("Content-Length: ".filesize(($GET['a']));
    readfile(($GET['a']);
?> 
```

这是我的js代码的一段代码：

```
function downloadFile(a){
    document.location = "download.php?a="+ a;
} 
```

使用此代码示例没有任何反应。如果我将结果附加到 HTML 标记中，它会显示文件的内容。

任何想法如何教浏览器下载这个文件？

**编辑：脚本更新**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-08T14:08:33.957

您不能使用 ajax 下载文件。因此，如果您在 ajax 上发生了一些事情，您应该返回 url 作为响应并像`document.location = "url"`开始下载过程一样应用它。

这里有一个注释。我记得，如果不是由用户单击启动，浏览器将阻止文件下载。因此，这将正常工作：

```
.click(function(){
   document.location = "download url"
}) 
```

但是如果它不是通过用户点击启动的，它将被阻止。所以，像这样的代码：

```
.click(function(){
       $.ajax({...,
       success:function(download_url_from_server){
           document.location = download_url_from_server;
       }});           
    }) 
```

会被浏览器屏蔽。因此，如果您想通过帖子传递一些数据，您可以使用以下方式将表单提交到隐藏的 iframe 或空白页面`<form target="..."`：

```
 function checkToken(token){
    var $form = $("#downloadForm");
    if ($form.length == 0) {
        $form = $("<form>").attr({ "target": "_blank", "id": "downloadForm", "method": "POST", "action": "script.php" }).hide();
        $("body").append($form);
    }
    $form.find("input").remove();
    var args = { a: "checkToken", b: token }
    for (var field in args) {
        $form.append($("<input>").attr({"value":args[field], "name":field}));
    }
    $form.submit();
} 
```

在 script.php 中，如果令牌正常，您需要立即执行 download.php 中的代码，或者执行重定向以下载脚本：

```
header("Location: download.php?a=" . $filename) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T14:12:58.240

将 mime 类型设置为`image/jpeg`很可能不起作用。因此，您需要`application/octet-stream`强制下载。

将 php 中的内容类型标头替换为以下内容：

```
header('Content-Type: application/octet-stream'); 
```

`document.location`此外，一个不错的解决方案是注入 iframe，而不是使用。在成功回调中使用以下函数

```
function downloadFile(url)
    {
        var iframe;
        iframe = document.getElementById("download-container");
        if (iframe === null)
        {
            iframe = document.createElement('iframe');  
            iframe.id = "download-container";
            iframe.style.visibility = 'hidden';
            document.body.appendChild(iframe);
        }
        iframe.src = url;   
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-02T18:14:01.763

您的脚本中似乎有错误。首先，GET 变量的正确拼写是 $_GET['a']，而不是 $GET['a']。这里的第二个问题是你有额外的左括号，当我复制你的代码时，我收到了 500 Internal Server Error 响应。如果我们纠正错误，它似乎工作正常。只需尝试更正版本的代码。

```
<?php
    header("Pragma: public"); // required
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Content-Description: File Transfer");
    header("Content-Type: image/jpg");
    header('Content-Disposition: attachment; filename="'.basename($_GET['a']).'"');
    header("Content-Transfer-Encoding: binary");
    header("Content-Length: ".filesize($_GET['a']));
    readfile($_GET['a']);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:15:08.700

你有点搞糊涂了。正如 FAangel 指出的那样，您不能通过 AJAX 下载文件。您需要做的是将用户重定向到另一个页面，然后在其中包含您的上述 PHP 代码。然后，该 PHP 代码应允许用户直接下载文件。您正在尝试的是绝对可能的，您只需要从另一个方向接近它，即不使用 AJAX。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-29T16:34:38.437

您可以使用鼠标中间事件强制下载文件：

```
const url = "https://www.google.com.vn/images/branding/googlelogo/2x/googlelogo_color_120x44dp.png";

const forceDownload = url => {
 try {
    const link = document.createElement('a');
    const fileName = url.substring(url.lastIndexOf('/') + 1, url.length);
    const event = new MouseEvent( "click", { "button": 1, "which": 1 });

    link.href = url;
    link.download = fileName;
    link.dispatchEvent(event);
  } catch(e) {
     document.location = url;
  }
}

forceDownload(url); 
```

# c++ - 将对象存储在向量中，该向量位于 C++ 中的映射内

> ID：14774283
> 
> 赞同：1
> 
> 时间：2013-02-08T14:03:50.487
> 
> 标签：c++, vector, maps

我正在尝试创建一个包含字符串键和 myClass 向量的映射。

```
std::map<string,vector<myClass>> m; 
```

我还需要动态填充矢量和地图（从文件中读取值）。

```
class myClass{
string dataMember1;
...
myClass()
     { ...  }
}; 
```

我应该如何进行？

我还希望能够根据字符串键访问向量中的对象。

例如：

```
std::map<string,vConnect>::iterator pos;
pos = mapGraph.find(string);
cout<<(pos->second)[0]->DataMemberofmyClass 
```

(pos->second)[0] 会指示存储在向量中的第一个 myClass 对象吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T14:38:10.597

一般来说，当映射类型是容器时，只使用`[]` wherein就可以了；如果该条目不存在，它将使用一个空容器创建，例如：

```
m[key].push_back( newElement ); 
```

或者

```
m[key].begin(), m[key].end() 
```

甚至：

```
if ( !m[key].empty() )
    doSomethingWith( m[key].second[0] ); 
```

正常工作。如果您正在对同一元素执行多项操作（如前两种情况），您可能希望将其保存在引用中：

```
std::vector<MyClass>& elem = m[key];
//  ... 
```

唯一的例外是如果您*没有*修改元素，并且如果它是空的，您不想创建条目。在这些情况下，您需要`find`, 和一个测试：

```
std::map<std::string, std::vector<MyClass>>::const_iterator
                entry = m.find( key );
if ( entry != m.end() ) {
    std::vector<MyClass>& elem = entry->second;
    //  ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T14:07:10.620

使用这种嵌套类型与使用简单的地图或矢量没有太大区别。所以地图的一个元素是一个向量。获取此元素并将其用作向量。

`pos = mapGraph.find(string);`

返回映射中的迭代器。

```
(pos->second) 
```

是作为此迭代器的值的向量。因此，只需像使用`vector`. 除了您从不检查是否确实找到了元素这一事实之外，您的代码是正确的。

```
std::map<string,vConnect>::iterator pos;
pos = mapGraph.find(string);
if (pos != mapGraph.end()) {
 cout<<(pos->second)[0].DataMemberofmyClass
} 
```

编辑（感谢 us2012）：事实上你有一个小错误`(pos->second)[0]`是 Object of`MyClass`所以你使用`.`不使用来访问它的成员`->`。

# c# - 如何使用 JSON.NET 解析递归数据结构？

> ID：14774292
> 
> 赞同：4
> 
> 时间：2013-02-08T14:04:40.677
> 
> 标签：c#, json, json.net

我在json 字符串的根元素中定义了`MENUITEM`和条目。`SCREEN``MENUSTRUCT`

这里重要的是a`MENUITEM`可以包含其他`MENUITEM`s或`SCREEN`s。

我想用 JSON.NET 解析整个 json 字符串，在那里我应该收到一棵带有`MENUITEM`s 的树，它可以包含大量嵌套`MENUITEM`的 s 或`SCREEN`条目。

我从以下 json 字符串中截取了很多嵌套结构：

```
{
"MENUSTRUCT": {
"-text": "GUI.Menu.Root",
"-image": "GUI.Menu.Home",
"-mask": "GUI.Menu.Home.Mask",
"-color": "#E0E0FF",
"-menuid": "MENUTREE",
"MENUITEM": [
  {
    "-text": "GUI.Menu.Text.00000003",
    "-image": "GUI.Menu.Menu",
    "-mask": "GUI.Menu.Menu.Mask",
    "-color": "#C0C0FF",
    "-menuid": "Menu.ID.00000003",
    "SCREEN": [
      {
        "-id": "GUI.Dlg.StartupScreen",
        "-text": "GUI.Menu.Text.00000103",
        "-image": "GUI.Menu.Screen",
        "-mask": "GUI.Menu.Screen.Mask",
        "-menuid": "Menu.ID.00000103"
      },
      {
        "-id": "GUI.Dlg.Calls",
        "-text": "GUI.Menu.Text.Calls",
        "-image": "GUI.Menu.Screen",
        "-mask": "GUI.Menu.Screen.Mask",
        "-menuid": "Menu.ID.00000203"
      }
    ],
    "MENUITEM": [
      {
        "-text": "GUI.Menu.Text.00000603",
        "-image": "GUI.Menu.Menu",
        "-mask": "GUI.Menu.Menu.Mask",
        "-color": "#A0A0FF",
        "-menuid": "Menu.ID.00000603",
        "SCREEN": [
          {
            "-id": "GUI.Dlg.SpecialTrips",
            "-text": "GUI.Menu.Text.00010603",
            "-image": "GUI.Menu.Screen",
            "-mask": "GUI.Menu.Screen.Mask",
            "-menuid": "Menu.ID.00010603"
          },
          {
            "-id": "GUI.Dlg.SpecialTrips",
            "-text": "GUI.Menu.Text.00020603",
            "-image": "GUI.Menu.Screen",
            "-mask": "GUI.Menu.Screen.Mask",
            "-menuid": "Menu.ID.00020603"
          }
         ]  // end of screen
        }
     ]     // end of nested menuitem
  },
      /* snipped following menuitems */
]  // end of menuitem array
}
} 
```

我试图反序列化整个事情

```
JsonConvert.DeserializeObject<List<MenuItem>>(jsonString); 
```

我有一个对象`MenuItem`，它具有`List<Screen>`和 之一的属性，`List<MenuItem>`但整个事情都没有解决。我认为反序列化器无法处理嵌套`MenuItem`的 s。

我也尝试过解析树，`JObject`但我认为这样你需要自己实现很多解析。

```
JObject obj = JObject.Parse(json);   
var menuItems = from m in obj["MENUSTRUCT"]["MENUITEM"].Children() select m;
List<MenuEntry> menues = this.LoadMenuStructure(menuItems); 
```

在这里，我必须确保我是正确的`JToken`，但我不知道我是在处理 a`MenuItem`还是 a `Screen`。

没有其他更简单的方法来反序列化 json 字符串而不将我嵌套在所有结构中吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:12:22.147

`,`您的原始脚本中有错误，并且底部有一个额外的空白。我也删除了 C# `//`Comments 标签，这现在应该对你有用

```
{
    "MENUSTRUCT": {
        "-text": "GUI.Menu.Root",
        "-image": "GUI.Menu.Home",
        "-mask": "GUI.Menu.Home.Mask",
        "-color": "#E0E0FF",
        "-menuid": "MENUTREE",
        "MENUITEM": [
            {
                "-text": "GUI.Menu.Text.00000003",
                "-image": "GUI.Menu.Menu",
                "-mask": "GUI.Menu.Menu.Mask",
                "-color": "#C0C0FF",
                "-menuid": "Menu.ID.00000003",
                "SCREEN": [
                    {
                        "-id": "GUI.Dlg.StartupScreen",
                        "-text": "GUI.Menu.Text.00000103",
                        "-image": "GUI.Menu.Screen",
                        "-mask": "GUI.Menu.Screen.Mask",
                        "-menuid": "Menu.ID.00000103"
                    },
                    {
                        "-id": "GUI.Dlg.Calls",
                        "-text": "GUI.Menu.Text.Calls",
                        "-image": "GUI.Menu.Screen",
                        "-mask": "GUI.Menu.Screen.Mask",
                        "-menuid": "Menu.ID.00000203"
                    }
                ],
                "MENUITEM": [
                    {
                        "-text": "GUI.Menu.Text.00000603",
                        "-image": "GUI.Menu.Menu",
                        "-mask": "GUI.Menu.Menu.Mask",
                        "-color": "#A0A0FF",
                        "-menuid": "Menu.ID.00000603",
                        "SCREEN": [
                            {
                                "-id": "GUI.Dlg.SpecialTrips",
                                "-text": "GUI.Menu.Text.00010603",
                                "-image": "GUI.Menu.Screen",
                                "-mask": "GUI.Menu.Screen.Mask",
                                "-menuid": "Menu.ID.00010603"
                            },
                            {
                                "-id": "GUI.Dlg.SpecialTrips",
                                "-text": "GUI.Menu.Text.00020603",
                                "-image": "GUI.Menu.Screen",
                                "-mask": "GUI.Menu.Screen.Mask",
                                "-menuid": "Menu.ID.00020603"
                            }
                        ]
                    }
                ]
            }
        ]
    }
} 
```

[JSONLint JSON 验证器](http://jsonlint.com/)

# xtragrid - xtragrid 绑定到实体框架

> ID：14774294
> 
> 赞同：0
> 
> 时间：2013-02-08T14:04:45.717
> 
> 标签：xtragrid

我的工作环境是C#，Visual Studio 12，实体框架5 DBContext，SQL Server 2008R2。生成的实体集作为哈希集生成。

```
 xtraGrid.DataSource = _order.OrderLines; 
```

当我在新行中键入数据时，失去焦点时数据会消失。

使用较旧的实体框架，这种逻辑是有效的。

为了解决我的问题，我应该为我的实体集选择什么类型。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T17:03:21.683

我将类型从 HashSet 更改为 BindingList，它可以正常工作，感谢上帝。

# linux - 汇编语言中的指针

> ID：14774298
> 
> 赞同：1
> 
> 时间：2013-02-08T14:05:00.490
> 
> 标签：linux, assembly, x86, 32-bit, fasm

我试图了解如何在程序集中使用指针。通过阅读一些有关内部的教程，我认为已经了解了一些概念。但是当我去尝试它时，它确实有效。下面是一些将 C 转换为 ASM 的尝试。

**C**

```
const char *s = "foo";
unsigned z = *(unsigned*)s;
if(!(z & 0xFF))
do_something();
if(!(z & 0xFFFF))
 do_b_something(); 
```

（这里不是完整的代码，但它是一个字检查，因此，还有两个分别检查 0xFF0000,0xF000000 的 stmts。

**ASM：**

```
mov ebp,str
mov eax,ebp

mov eax,[eax]
and eax,0xFF
cmp eax,0
je etc

mov eax,[eax]
and eax,0xFFFF
cmp eax,0
je etc 
```

它返回一个段错误。

并尝试：

```
mov eax,dword ptr [eax] 
```

这是由 gcc 编译器生成的，您可以在其他一些程序集代码中看到它，返回

`invalid symbol`

在 FASM 汇编器上。FASM 并不真正支持它，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:09:37.463

根本不清楚您在原始代码中尝试做什么 - 看起来不正确。

然而这：

```
mov eax,[eax]
and eax,0xFF
cmp eax,0
je etc

mov eax,[eax] 
```

不会工作。您正在用存储在 EAX 中地址的值覆盖 EAX 的内容，操作该值，然后尝试在分支后重新加载它而不恢复原始指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:50:24.693

我认为这是您正在尝试做的事情：

```
 mov  ebp,str
    mov  eax,ebp

    mov  ebx,[eax]
    test ebx,0xFF
    jz   low_byte_empty

    do_something:
         ; some code here...

low_byte_empty:
    test ebx,0xFFFF
    jz   low_word_empty

    do_b_something:
         ; some code here.

low_word_empty: 
```

解释：

首先，正如 JasonD 在他的回答中已经提到的那样，您正在加载指向 的指针`eax`，然后对其进行逻辑`and`处理，然后您仍在使用结果`eax`来寻址内存（范围内的一些内存偏移量`0x0`... `0xFF`）。

那么你的代码出了什么问题：你不能在同一个寄存器中同时保存一个指向内存地址的指针和一个值。所以我选择从 to 加载值`[eax]`，`ebx`你也可以根据需要使用其他一些 32 位通用寄存器（`ecx`, `edx`, `esi`, `edi`）。

然后，您不需要使用[`cmp`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/cmp.html)来检查寄存器是否为空，因为`cmp`它所做的只是进行减法并设置标志。但是 ZF（零标志）已经由 设置[`and`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/and.html)，所以`cmp`这里绝对没有必要。然后，因为`cmp`这里**不需要**，我们也不需要结果，我们只想更新标志，最好使用[`test`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/test.html). `test`与执行完全相同的逻辑与`and`，唯一的区别是`test`不存储结果，它只更新标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T08:12:09.047

以下变体更简单、更小、更快并且只使用一个寄存器。

```
 mov  eax, str
    mov  eax,[eax]

    test al, al
    jz   low_byte_empty

do_something_byte:
     ; some code here...

low_byte_empty:
     test ah, ah
     jz   low_word_empty         

do_something_word:
     ; some code here

low_word_empty: 
```

# javascript - 延迟while循环功能

> ID：14774299
> 
> 赞同：2
> 
> 时间：2013-02-08T14:05:01.047
> 
> 标签：javascript, jquery, loops, slider, while-loop

我尝试制作一个自动滑块，尽管我的代码似乎无法正常工作 - 它要么使浏览器崩溃，要么执行得非常快。

我一直在玩的是`setTimeout`，但它似乎在while循环中不起作用。

```
var playSlider = true;

if(playSlider) {
    var i = $('#sliderwrapper ul li:visible').attr('data-number');
    var lengthLi = $('#sliderwrapper ul li').size();
    while(i<=lengthLi) {
        var x = i + 1;
        setTimeout(function(){
            $('#sliderwrapper ul li[data-number=' + i + ']').fadeOut(450);
            $('#sliderwrapper ul li[data-number=' + x + ']').fadeIn(600);
        }, 3000);
        i++;
    }
} 
```

HTML：

```
<ul>
    <li data-number="1" data-description="Buy now!"><img src="images/slider1.png" border="0"></li>
    <li data-number="2" data-description="Buy later!"><img src="images/slider2.png" border="0"></li>
    <li data-number="3"><img src="images/slider3.png" border="0"></li>
    <li data-number="4"><img src="images/slider4.png" border="0"></li>
    <li data-number="5"><img src="images/slider5.png" border="0"></li>
    <li data-number="6"><img src="images/slider2.png" border="0"></li>
    <li data-number="7"><img src="images/slider3.png" border="0"></li>
    <li data-number="8"><img src="images/slider5.png" border="0"></li>
    <li data-number="9"><img src="images/slider1.png" border="0"></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:06:28.407

您可以使用 .delay("3000") 在 JQuery 命令之间放置暂停

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:12:29.137

有几件事我改变了......

```
var playSlider = true;
if(playSlider) {
    var i = $('#sliderwrapper ul li:visible').attr('data-number');
    var lengthLi = $('#sliderwrapper ul li').length();
    while(i <= lengthLi) {
        var x = i + 1;
        setTimeout(function(){
            $('#sliderwrapper ul li[data-number=' + i + ']').fadeOut(450);
            $('#sliderwrapper ul li[data-number=' + x + ']').fadeIn(600);
        }, 3000 * i);
        i++;
    }
} 
```

我更改`.size()`为`.length()`计算 li 元素（不推荐使用大小），并将超时更改为`3000 * i`，否则它们会同时淡出并在 3 秒后消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:07:58.927

然后一点递归将帮助你：

```
function rec(){
    //your code and so on
    setTimeout(function(){
        rec();
    },3000);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:25:21.637

`**[LIVE DEMO](http://jsbin.com/egopos/3/edit)**`

```
var $li = $('#sliderwrapper ul li');
var N = $li.length;
var C = 0 ;
var intv ;

$li.hide().eq(C).show();

function loop(){
  intv = setInterval(function(){
    $li.eq( ++C % N ).fadeTo(500,1).siblings().fadeTo(500,0);
  },3000);
}
loop(); 

$('#sliderwrapper').on('mouseenter mouseleave', function( e ){      
    var mEnt = e.type=='mouseenter' ? clearInterval( intv ) : loop() ;      
}); 
```

# c# - 种子随机绘制二维网格

> ID：14774303
> 
> 赞同：2
> 
> 时间：2013-02-08T14:05:09.997
> 
> 标签：c#, algorithm, math

这已经困扰了我几个小时，所以我想知道是否有人可以帮助我，因为我可能会以错误的方式思考这个问题。

我希望能够从具有无限宽度和高度的网格上的一组 x 和 y 坐标中获取布尔值。还有其他约束，沿 x 轴需要在两个真值之间至少有 n 个位置，我还需要知道从 0,0 到 x,y 区域中真值的数量。

给 getTrueCoordinatesInArea 的区域的宽度和高度等于 x 和 y，因为它的区域是从 0,0 到 x,y 创建的

如果这有意义..

例如：

```
value = coordinateContainsTrue( x, y );//return true or false.
total = getTrueCoordinatesInArea( x , y );//Returns the total true values inside the area. 
```

编辑：这可以解决种子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T15:04:32.237

我不完全了解您需要什么，但我认为这听起来像是一个很好且有趣的练习。我希望这是你想要的。=) 它没有完全按照我想要的方式编码。宁愿使用 bool[,] 数组，但不知道如何使该数组动态化，也不想为此编写自己的类，但也许我应该这样做。

但是，此解决方案应该有效。

```
private List<List<bool>> grid = new List<List<bool>>();

private int N = 4;

Random randomNumberGenerator = new Random();

private bool getRandomBoolean()
{
    return this.randomNumberGenerator.Next(0, 2) == 1;
}

private void testProgram()
{
    var containsTrue = coordinateContainsTrue(0, 10);
    var total = getTrueCoordinatesInArea(14, 2);
    var isTrue = coordinateIsTrue(15, 11);
}

private bool coordinateIsTrue(int x, int y)
{
    expandGridOfNeeded(x, y);

    return grid[x][y];
}

private bool coordinateContainsTrue(int x, int y)
{
    expandGridOfNeeded(x, y);

    for (int xTemp = 0; xTemp < x; xTemp++) // Loop columns
    {
        for (int yTemp = 0; yTemp < y; yTemp++) // Loop rows
        {
            if (grid[xTemp][yTemp])
                return true; // Return true if any true was found
        }
    }

    return false;
}

private int getTrueCoordinatesInArea(int x, int y)
{
    expandGridOfNeeded(x, y);

    var total = 0;

    for (int xTemp = 0; xTemp < x; xTemp++) // Loop columns
    {
        for (int yTemp = 0; yTemp < y; yTemp++) // Loop rows
        {
            if (grid[xTemp][yTemp])
                total++; // Increase count if true was found
        }
    }

    return total;
}

private void expandGridOfNeeded(int x, int y)
{
    if (x < 0 || y < 0)
        return;

    // Add needed columns
    while (grid.Count <= x)
    {
        var column = new List<bool>();

        // Only add rows if the others have rows
        if (grid.Count > 0)
        {
            while (column.Count < grid[0].Count)
            {
                // Check if legal to add a true value, if it is then add random else add false
                bool forceFalseValue = false;
                for (int i = grid.Count - 1; i > grid.Count + N && forceFalseValue == false; i--)
                {
                    forceFalseValue = grid[i][column.Count - 1];
                }

                column.Add(forceFalseValue ? false : getRandomBoolean());
            }
        }

        grid.Add(column);
    }

    // Add needed rows
    while (grid[0].Count <= y)
    {
        var counter = N;

        foreach (var column in grid)
        {
            // Check if legal to add a true value, if it is then add random else add false
            if (counter < N)
            {
                column.Add(false);
                counter++;
            }
            else
            {
                var randomValue = getRandomBoolean();

                if (randomValue)
                    counter = 0;
                else
                    counter++;

                column.Add(randomValue);
            }
        }
    }
} 
```

# facebook - facebook 操作何时显示在新闻提要和时间线中？

> ID：14774306
> 
> 赞同：1
> 
> 时间：2013-02-08T14:05:14.663
> 
> 标签：facebook, facebook-apps, facebook-timeline

作为 facebook 应用程序开发人员，您通常会尝试为其他 facebook 用户创造尽可能多的曝光率。我正在努力更好地了解所涉及的一些因素：

**聚合**

Facebook 表示，聚合会根据数据可用性和反馈出现在用户的时间线上（[来源](https://developers.facebook.com/docs/technical-guides/opengraph/defining-an-aggregation/)）

*   这是否意味着您永远不确定您的聚合是否会显示？

**提及标记和动作标记**

当您标记应用用户的朋友时：

*   该操作是否会始终出现在该朋友的新闻提要中？
*   这个动作会一直出现在朋友的时间线上（只要他们允许朋友在他们的墙上发布）吗？

# html - 使用 xQuery 登录示例

> ID：14774308
> 
> 赞同：0
> 
> 时间：2013-02-08T14:05:18.910
> 
> 标签：html, xml, xhtml, xquery

我正在尝试创建一个函数，允许我评估数据库受限区域的登录凭据。

这是我的代码：

```
declare function local:check() as xs:string {

let $login :=  request:get-parameter("username",'')
let $password :=  request:get-parameter("password",'')

let $user := doc('credentials.xml')/credenziali/utente[./user = $login]

return (
    if (not(empty($user))) then concat('staff.xq',$login,' ',$password)
    else concat('login_error.xq',$login,' ',$password)
)    
}; 
```

此函数在以下位置调用：

```
form name="login" method="post" action="{local:check()}" 
```

但我不明白为什么我总是被重定向到页面''login_error''（即用户对象总是空的），尽管我输入了正确的凭据（在文件credentials.xml 中可用）。

Credentials.xml 包含：

`<credenziali> <utente id="1"> <user>admin</user> <password>admin</password> </utente> </credenziali>`

我在屏幕的相应输入文本框中设置了 username=admin 和 password=admin

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:34:38.447

如果没有更多信息，很难确切地看出这里的问题所在。但我们可以推理。该软件告诉您 $user 始终为空。这意味着

```
doc('credentials.xml')/credenziali/utente[./user = $login] 
```

评估为空序列。如果是我的代码，我现在要检查以下内容：

*   $login 有值吗？
*   doc('credentials.xml') 是空的吗？
*   如果非空，它是否有一个名为 credenziali 的最外层元素？
*   如果是这样，credenziali 是否有孩子（或：一个孩子）命名为 utente？
*   如果是这样，utente 是否有一个名为 user 的孩子？（我问自己，为什么一个名为的元素`utente`会有一个名为我注意了。）`user``username`
*   如果是这样，是否有任何用户元素具有与 $login 的值相同的字符串值？

如果所有这些问题的答案都是肯定的，那么您遇到了一个非常有趣且具有挑战性的问题，并且可能是您的 XQuery 引擎的错误报告。

如果我必须打赌，而我不知道任何事情，我会在前两个问题上打赌——因为它们涉及与环境的交互，这是 (a) 非标准化的，(b) 通常会因考虑因素而变得复杂似乎无关紧要，(c) 库创建者通常很难很好地记录（因为他们不知道他们需要了解的有关*您的*环境的所有内容），因此 (d) 通常没有特别好的记录，因此 (e) 错误易于。我发现反复试验有很大帮助。

[后记]

你问如何检查 $login 和 $user 是否被正确初始化。这里没有规则或限制。调试 XQuery 很像调试任何其他编程语言。你需要想办法让代码中发生的事情在你的屏幕上可见，这样你就可以找出哪里出了问题。一些可能性：

*   暂时用类似的东西替换变量的初始化

    ```
    let $login :=  "Paolo",
        $password :=  "Francesca"
        $usersdoc := <credenziali> 
                       <utente id="1"> 
                         <user>Paolo</user> 
                         <password>Francesca</password> 
                       </utente> 
                     </credenziali>
     let $user := $usersdoc//utente[./user = $login] 
    ```

    确保这有效。（如果没有，你的问题出在其他地方。）然后用原始代码替换 $login 的初始化，看看它是否仍然有效。如果是，则替换 $password 的初始化，看看它是否仍然有效。如果是，则替换 $usersdoc 的初始化，然后替换 $user。

*   删除条件并无条件地返回一些允许您查看 $login 值的值。（例如

    ```
    let $login :=  request:get-parameter("username",'')
    let $password :=  request:get-parameter("password",'')

    let $user := doc('credentials.xml')
                   /credenziali/utente
                   [./user = $login]

    return concat('staff.xq...',$login,'...',$password) 
    ```

    我猜你的登录函数返回的字符串是用户将被重定向到的 URI——如果是这样，你是否应该在“staff.xq”和登录 ID 之间没有斜杠或其他东西？如果不是用户被重定向到的 URI，您可能需要调整调用者中的内容，以便查看 $login 和 $password 发出的值。

*   如果您的 XQuery 引擎产生了您可以检查的日志，请使用 trace()。

# angularjs - angularJS中具有不同选择值的多个选择框

> ID：14774309
> 
> 赞同：2
> 
> 时间：2013-02-08T14:05:28.570
> 
> 标签：angularjs

我有多个选择框，我正在使用 Angular JS。每个选择框需要有不同的选择值。到目前为止，我所看到的所有元素都具有共享相同选定值的元素。为了实现这一点，使用了范围。因为我可能有数百个下拉菜单......实际上有数千个......这里的正确方法是什么？为每个人创建一个范围？尝试让一个范围随着每个选择框而变化？

这是我拥有的[jsfiddle](http://jsfiddle.net/zmU8R/6/)的示例。

任何帮助深表感谢。
谢谢

```
 function MyCntrl($scope) {
$scope.colors = [
    {name:'black'},
    {name:'red'},
    {yellow:'yellow'}
]
$scope.isSel = $scope.colors[1];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:25:24.417

不确定我已经弄清楚你到底想要什么。据我了解，您需要每个选择框具有不同的值。因此，您需要将每个选择框绑定到不同的变量。

```
<div ng-app="myApp">
  <div ng-controller="myCtrl">
    <hr/>
    <div ng-repeat="n in [] | range: selectionsCount">
        <select ng-model="selectedValues[$index]" ng-options="c.name for c in colors"></select>
    </div>
    {{ selectedValues }}
  </div>
</div> 
```

举个更清楚的例子，我在这里设置了选择框计数变量。

```
angular.module('myApp', [])
    .controller('myCtrl', function ($scope) {
        $scope.colors = [
            {name: 'black'},
            {name: 'red'},
            {name: 'yellow'}
        ];
        $scope.selectedValues = [];
        $scope.selectionsCount = 5;
    })
    .filter('range', function () {
        return function(input, total) {
            total = parseInt(total);
            for (var i=0; i<total; i++)
                input.push(i);
            return input;
        };
    }); 
```

你可以在这里测试它：http: [//jsfiddle.net/zmU8R/7/](http://jsfiddle.net/zmU8R/7/) 如果我误解了你的问题，请随时纠正我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T13:01:49.603

您需要将每个选择框绑定到它自己的范围。您可以手动完成，将每个对象绑定到一个新对象而不是同一个 isSel，或者您可以使用 ng-repeat，如下所示：

[http://jsfiddle.net/zmU8R/9/](http://jsfiddle.net/zmU8R/9/)

html:

```
<div ng-app="">
  <div ng-controller="MyCntrl">
      <div ng-repeat="control in controls">
          <select ng-model="control.isSel" ng-options="c.name for c in colors"></select><br />
      </div>
      <hr />
      <div ng-repeat="control in controls">
          {{control.id}}: {{control.isSel}}
      </div>
  </div>
</div> 
```

脚本：

```
function MyCntrl($scope) {
    $scope.controls = [
        {id: 1, isSel:null},
        {id: 2, isSel:null},
        {id: 3, isSel:null}
    ];
    $scope.colors = [
        {name:'black'},
        {name:'red'},
        {name:'yellow'}
    ];
} 
```

# c# - 可能无效的跨线程访问？

> ID：14774315
> 
> 赞同：0
> 
> 时间：2013-02-08T14:05:39.700
> 
> 标签：c#, silverlight, exception, mvvm, multithreading

我在正在处理的应用程序中遇到了一个罕见的问题。这种情况很少发生，但并非每次我在页面之间导航时都会发生，而且我似乎无法绕开它。一直在阅读，并得出一个半结论性的理论，即这可能与无效的跨线程访问有关。堆栈跟踪如下：

```
System.Reflection.TargetInvocationException, mscorlib, Version=5.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e  Message: [Arg_TargetInvocationException]
Arguments: 
Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&Version=5.0.10411.00&File=mscorlib.dll&Key=Arg_TargetInvocationException HelpLink: 
StackTrace:    at System.Windows.Navigation.PageResourceContentLoader.EndLoad(IAsyncResult asyncResult)
   at System.Windows.Navigation.NavigationService.ContentLoader_BeginLoad_Callback(IAsyncResult result)
   at System.Windows.Navigation.PageResourceContentLoader.BeginLoad_OnUIThread(AsyncCallback userCallback, PageResourceContentLoaderAsyncResult result)
   at System.Windows.Navigation.PageResourceContentLoader.<>c__DisplayClass4.<BeginLoad>b__0(Object args)
2013-02-01 15:56:43,593 [5640] DEBUG WellguideViewModel.class - RefreshGraphValues method called
MachineName:2013-02-01 15:53:53,548 [5640] DEBUG WellViewModel.class - WellViewModel constructor called
MachineName:2013-02-01 15:56:44,625 [1836] DEBUG WellguideViewModel.class - RefreshGraphValues method called 
```

希望有人能够提供帮助:)

- 另外，我可能应该提到我的组件正在画布上绘制一些线条（具体为 PathFigure），因为我知道这个问题可能与绘制 ui 元素有关。

周末愉快！

# python - django.core.mail.send_email 中使用的 from_email 用于什么

> ID：14774318
> 
> 赞同：0
> 
> 时间：2013-02-08T14:05:53.517
> 
> 标签：python, django, email

我正在使用 django 发送电子邮件，并且我在 settings.py 中有所有内容。我有一个联系表，当`form.is_valid()`返回 true 时，我将电子邮件从设置中指定的电子邮件发送到视图中设置的电子邮件（实验版）。但是我还在表单中创建了一个字段，供发件人留下他的电子邮件，如本例所示[https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#form-objects](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#form-object) 但是这个例子在功能中也使用此电子邮件`send_email()`。当我收到电子邮件时，我看到它是从设置中设置的电子邮件发送的，主题和消息部分设置正确，我只是看不到发件人变量的位置`send_mail()`用来。这意味着如果我不将此字符串附加到消息或主题字符串中，我实际上会丢失向我发送电子邮件的信息...谁能解释一下 sender 变量的`send_mail()`用途是什么？

谢谢你的帮助，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:31:23.630

该`from`字段在电子邮件标题中是必需的

以下是完整电子邮件标头的示例：

```
Return-Path: 
X-SpamCatcher-Score: 1 [X]
Received: from [xx.xx.xx.xx] (HELO example.com)
Message-ID: <>
Date: 
From: 
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.0.1) Gecko/20020823 Netscape/7.0
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: 
Subject: blah blah
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit 
```

你可以[在这里阅读更多](http://en.wikipedia.org/wiki/Email#Header_fields)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:37:18.290

如果您想知道表单提交者的电子邮件地址（如果他们提供）并且您使用自己的电子邮件作为**发件人**电子邮件，当然您必须将其附加到**您**收到的消息文本中。如果您希望提交者收到他们的邮件副本，只需给他们邮寄一个不同的版本。所以基本上有一个版本供站点维护者使用，另一个版本供表单提交者使用。

希望涵盖了这个问题，我不得不猜测一下。

# clojure - 使用 nrepl-jack-in 时出错

> ID：14774323
> 
> 赞同：5
> 
> 时间：2013-02-08T14:06:05.940
> 
> 标签：clojure

每当我尝试 Mx nrepl-jack-in 时，我都会收到以下错误 -

```
error in process sentinel: Could not start nREPL server: /usr/bin/lein: line 260: java: command not found 
```

我可以通过 lein repl 或 lein2 repl 毫无问题地启动 repl - 两者都有效。

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-31T16:10:07.230

我有同样的问题。让我猜猜，您是从应用程序启动器启动 Emacs 吗？以这种方式启动的应用程序显然不使用您的 .bashrc 文件。如果您在 ~/.profile 文件中设置 PATH ，它应该可以工作。您需要注销并登录才能生效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:55:03.120

您的 shell 中的 emacs 中可能有不同的环境。Java 是否安装在与 lein 相同的位置？如果你输入 Mx shell，然后运行 ​​java -help 有没有用？“Mx shell-command java -help”怎么样？

# php - 在获取表时再次获取同一个表 php，这怎么可能？

> ID：14774325
> 
> 赞同：0
> 
> 时间：2013-02-08T14:06:08.757
> 
> 标签：php, mysql

```
$result=("select * FROM blablabla ") ;
while($row = mysql_fetch_array($result))

{$another=("select * FROM blablabla ") ;
 while($dow = mysql_fetch_array($another)){} } 
```

这不起作用，请给我一个提示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:07:08.590

您实际上并没有运行您的查询：

```
$result=mysql_query("select * FROM blablabla ") ;
while($row = mysql_fetch_array($result))
{
  // do stuff
} 
```

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:07:13.233

也许你的意思是，

```
$result = mysql_query("select * FROM blablabla ") ;
while($row = mysql_fetch_array($result))
{

} 
```

*   [mysql_query](http://www.php.net/manual/en/function.mysql-query.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:18:24.487

你的while循环应该可以工作，你可能在其他地方有一些错误。

看看[这篇文章](https://stackoverflow.com/questions/5730695/multiple-while-loops-within-a-while-loop)，里面有 3 个 while 循环

我的提示是尝试调试您的代码并查看它在哪里不起作用，第二个提示是尝试移动到 PDO 或 MYSQLI

# git - 如何在内部遥控器上添加额外的外部 Git 遥控器？

> ID：14774328
> 
> 赞同：2
> 
> 时间：2013-02-08T14:06:24.620
> 
> 标签：git

在使用上游 Git 存储库为项目开发一些补丁时，我目前正在执行以下操作。

```
superproject/submodules/actualproject

^ parent repo           ^ Git submodule 
```

`actualproject`有两个遥控器：

*   `vendor`成为“上游”遥控器。
*   `myname`作为我自己的“内部”远程存储库。

这样可以正常工作，但是一旦另一个人（同事）克隆了我的树（通过子模块使用超级项目或仅使用其中一个子模块），他将拥有：

*   远程`origin`是我的存储库。
*   遥控器`vendor`不存在。

至少`vendor`为其他克隆自动配置远程的最佳方法是什么？我可以在这里使用子模块的力量吗？例如。`submodule init`已经设置了遥控器 - 我可以设置第二个吗？

或者，这是从一开始就完全错误的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:10:54.353

你的同事应该`git clone <URL to 'vendor' repo>`而不是使用你自己的仓库。这样他就会得到那个遥控器（起初它会被称为“origin”，因为这是 git 默认的，但如果他愿意，他可以改变它）。

**编辑**：要更改他在克隆超级项目时获得的子模块远程，您必须编辑 .gitmodules 文件以指向“供应商”而不是“我的名字”；）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-23T05:29:53.360

您可以添加另一个遥控器

```
git remote add backup user@server:/path/to/git/test.git
git push backup master 
```

[www.hostatic.ro/2011/09/29/pushing-to-two-git-remote-origins-from-one-repository/，andersonleeb.com/blog/changeing-git-remote-origin](http://www.hostatic.ro/2011/09/29/pushing-to-two-git-remote-origins-from-one-repository/) _ [_](http://andersonleeb.com/blog/changing-git-remote-origin)

编辑：我错过了你问题的重点，但我认为 Git 无法在没有脚本的情况下将其他遥控器保存在遥控器中

# javascript - 流星自动订阅维护某些文件

> ID：14774330
> 
> 赞同：2
> 
> 时间：2013-02-08T14:06:25.663
> 
> 标签：javascript, mongodb, meteor

我正在使用自动订阅来获取 minimongo 中 50 个最新聊天文档的列表。随着更多消息的发布，旧消息会通过自动订阅从 minimongo 中删除。如何让自动订阅不删除我标记为活动的某些消息？

我知道我可以手动单独订阅“活动”消息列表，但这似乎不必要地费力。谢谢。

编辑：活动标记仅在客户端，每个用户都可以选择他关心的消息，这是短暂的。用户将消息标记为他正在回复的消息，因此不应突然将其删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:34:26.633

您需要按时间排序（_id 捕获它插入的顺序，因此是时间）以及状态，两者都按降序排列。

服务器代码：

```
Meteor.publish("messages", function () {
    return Messages.find({}, {sort: {active: -1, _id:-1}, limit: 50});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T03:56:57.303

每个客户端，维护一个包含标记的文档 ID 数组的会话变量：

```
Session.set('markedMessages',matchedDocs)
```

在您的发布语句中，使用将与会话数组中的文档 ID 匹配的 $in 语句，结合此 $or 语句来利用您现有的查询、限制/切片。

```
Meteor.publish("markedMessages", function () {
  Messages.find({$or: [{ your_existing_query_goes_here }, 
    {_id: { $in: Session.get('markedMessages')}} ] }).fetch()
}) 
```

;

请注意，在您的车把模板中，将消息 id 与您的标记消息会话进行比较，以确定该消息是否由用户标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T22:45:09.027

除非您的实现仅限于单个用户能够将行标记为活动，否则聊天行文档的标记需要使用活动用户[id](http://docs.meteor.com/#meteor_userid "Meteor.userId()")。

可悲的是，这导致需要单独订阅，即使它“看起来不必要地费力”

另一种“费力的方法”是制作所选活动消息的仅本地客户端集合副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T18:43:19.407

在发布功能中，按状态排序。

```
Meteor.publish("messages", function () {
    return Messages.find({}, {sort: {status: 1}, limit: 50});
}); 
```

# java - 如何通过 API 取消支付宝付款

> ID：14774332
> 
> 赞同：0
> 
> 时间：2013-02-08T14:06:37.727
> 
> 标签：java, paypal

我正在使用[PaypalPayment Pro](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-pro/paypal-payments-pro-getting-started-guide)使用 Java 中的 paypal API 进行一些直接付款，为此我正在使用 [DoDirectPayment类。](https://www.x.com/developers/paypal/documentation-tools/api/dodirectpayment-api-operation-soap)现在我正在寻找一种取消付款的方法，但似乎 API 不提供这种可能性。我搜索了文档，但没有看到任何令人信服的东西。我看到了 DoVoid 类，它可能与我正在搜索的内容相对应，但我并不完全确定。当前使用 Paypal API 取消付款的类/或方法是什么？

谢谢你的建议！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:12:15.193

这取决于您所说的“取消”是什么意思。

如果您运行了授权（例如，如果您在 DoDirectPayment 调用中设置 PaymentAction=Authorization），则付款将暂停，直到您将其捕获、取消或 29 天过去。如果您不需要授权，您可以让它自行过期，也可以调用 DoVoid 将其作废。如果您调用 DoVoid，请将 AuthorizationID 设置为您从 DoDirectPayment 调用收到的交易 ID。

如果您进行了销售（例如，如果您设置 PaymentAction=Sale，或者您根本没有设置），或者如果您捕获了交易（通过 PayPal 帐户或通过调用 DoCapture），则付款已完成. 要“取消”已完成的交易，您需要退款。为此，请调用 RefundTransaction，并将 TransactionID 设置为您从 DoDirectPayment 调用中收到的交易 ID。

# c# - FileStream.Write 在 SSD 上长时间阻塞

> ID：14774333
> 
> 赞同：0
> 
> 时间：2013-02-08T14:06:39.833
> 
> 标签：c#, file-io, filestream

我正在将 2MB 块中的约 280MB 数据写入 FileStream。

在一台机器上，这在 8 秒内完成。在我的机器上（具有类似的规格、SSD 等）我一直在尝试调试为什么它需要超过 40 秒并且它们是进度暂停。

我在从硬件设备返回数据时写入数据，但我发现有时，在流上调用 Write 可能需要很长时间才能返回。我在所有写入之间调用flush：

```
 Stopwatch stopwatch = Stopwatch.StartNew();
    _stream.Write(buffer, 0, buffer.Length);        
    stopwatch.Stop(); 
    Console.WriteLine("_stream.Write() " + stopwatch.ElapsedMilliseconds + "ms");             

    _stream.Flush(); 
```

输出：

```
_stream.Write() 2ms
_stream.Write() 2ms
_stream.Write() 2ms
... snip 
_stream.Write() 2ms
_stream.Write() 2ms
_stream.Write() 2ms
_stream.Write() 2ms
_stream.Write() 23233ms    <- not expecting this
_stream.Write() 2ms
_stream.Write() 2ms
_stream.Write() 0ms
... snip 
_stream.Write() 2ms
_stream.Write() 2ms
_stream.Write() 15852ms    <- or this
_stream.Write() 2ms
_stream.Write() 2ms
_stream.Write() 2ms
... snip 
_stream.Write() 2ms
_stream.Write() 25ms
_stream.Write() 2ms
_stream.Write() 2ms 
```

这不是我所期望的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:02:16.340

我实际上怀疑这可能是您认为应该使其快速的原因。SSD可能是罪魁祸首。

所以这就是奇怪的地方。像 .net 这样的 SSD 有一个 GC。这是因为 SSD 与 HDD 不同，无法以与写入信息相同的方式删除信息。写入的最小单位远小于删除的最小单位。

有关更多信息，请搜索写入放大。

业界知道这一点，因此他们在 SATA 中开发了一项称为 TRIM 的功能。然而，我的研究表明，由于某些奇怪的原因，有一批 Corsair Force 3 在固件中禁用了 TRIM……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:14:48.137

您总是可以在异步线程上运行写入，并在写入过程完成时回调？

# c# - 时间：2019-05-10 标签：c#last insert id using table adapter

> ID：14774334
> 
> 赞同：0
> 
> 时间：2013-02-08T14:06:39.757
> 
> 标签：c#, insert, identity

我正在尝试从数据库中获取最后插入的 id。我尝试了许多不同的代码片段，但仍然没有运气。这是我用于插入的代码。我需要第一个中的最后一个插入 id 在第二个中插入为 nId。我试过 SELECT @@IDENTITY 但出现了我找不到的空值错误。任何人都可以告诉我正确的代码吗？

```
// Insert new user
daUsers.Insert(textBoxUsername.Text, textBoxPassword.Text);

// Insert new Twitter OAuth
daTwitterOAuth.Insert(nId, textBoxConsumerKey.Text, textBoxConsumerSecret.Text, textBoxToken.Text, textBoxTokenSecret.Text); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:08:30.677

如果您尝试添加新记录，则应该调用 TableAdapter.Insert，而不是 TableAdapter.Update 您不能对数据库创建第二个命令并使用 @@IDENTITY 取回之前生成的 ID。 . 这必须在同一个会话中返回，否则 SQL 将不知道您希望收到哪个 ID。如果将表适配器的执行模式设置为标量，则 ID 将是方法调用的返回值。请在您遇到的同一问题上查看[此](https://stackoverflow.com/questions/4776655/incorrect-id-is-returned-after-insert-using-tableadapter) [问答。](https://stackoverflow.com/questions/9876106/get-last-inserted-id-return-from-a-insert-update-query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:15:37.460

有人提到`@@Identity`这很好，但是如果其他人在您到达该行之前在其他地方执行插入`SQL`呢？

我会这样做。

```
Create Procedure [Proc]

@Id as int output = 0

as

Insert into Table
Select * from AnotherTable

SET @Id = (SELECT Scope_Identity) 
```

然后`.NET`添加您的输出参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:44:04.593

已经去过了！在上面的代码中，我使用了插入方法，将执行模式更改为标量，这是我的 sql：

```
INSERT INTO [dbTblUsers]([strUsername], [strPassword])
VALUES (@p1,@p2);
SELECT @@IDENTITY; 
```

如何将@@identity 转换为int？像这样？

```
nId = (int)daUsers.InsertQuery(textBoxUsername.Text, textBoxPassword.Text); 
```

# windows - 通过 CALL 时百分号消失

> ID：14774341
> 
> 赞同：2
> 
> 时间：2013-02-08T14:07:03.863
> 
> 标签：windows, cmd, escaping, call

这个问题最初来自[Escape percent sign in given variables](https://stackoverflow.com/q/14718591/2044873)。我不想打乱那边的好答案。但是我的问题发生了一点变化......

假设有一个用双引号括起来的给定字符串变量，其中可能包含一个或多个百分号。无法永久切换到启用的延迟扩展（其他代码已经可用）。调用包含字符串变量作为参数的函数是必要的。这是我到目前为止确定的：

```
@echo off & setlocal ENABLEEXTENSIONS
SET AlbumArtist=%1
CALL :EscapePoisonChars %AlbumArtist% AlbumArtist_VDN
echo %AlbumArtist_VDN%

CALL :EscapePoisonChars %%AlbumArtist%% AlbumArtist_VDN
echo %AlbumArtist_VDN%
endlocal &GOTO:EOF

:EscapePoisonChars
@echo off & setlocal ENABLEEXTENSIONS
SET TmpString="%~1"
SET TmpString=%TmpString:&=^^^&%
SET TmpString=%TmpString:(=^^^(%
SET TmpString=%TmpString:)=^^^)%
endlocal&SET %2=%TmpString:~1,-1%&GOTO :EOF 
```

我知道这可能不是一个“干净的解决方案”。但是我想了解为什么当`CALL :EscapePoisonChars %AlbumArtist% AlbumArtist_VDN`百分号调用例程时会消失。`%%AlbumArtist%%`当用双百分号括起来的字符串变量调用时，它会给出想要的输出：

```
D:\Batch>PercentTwins.bat "100% Rock & Roll"
100 Rock & Roll
100% Rock & Roll

D:\Batch> 
```

如果 %AlbumArtist% 在函数内部或外部扩展，为什么会有不同的结果`:EscapePoisonChars`？随着回声，我看到百分号消失了`SET TmpString="~1"`。任何解释都将帮助我改进我进一步的 cmd 技术。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:18:07.017

如果我错了，任何人都可以纠正我，但我认为当一个命令中的单个百分号传递给另一个命令时，它们会消失。如果它只是在同一个命令中使用，它通常不会消失。

（可能有一种更“正确”的说法，或者这个想法可能完全错误）

[（微软支持网站](http://support.microsoft.com/kb/75634)上有关百分号的一些信息）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T18:26:36.007

该`call`命令`%`第二次启动解析阶段（参考已接受的问题帖子[Windows 命令解释器（CMD.EXE）如何解析脚本？](https://stackoverflow.com/a/4095133)）；这让`%`迹象消失。您可以提前将符号加倍`%`，但您需要为此启用[延迟扩展](http://ss64.com/nt/delayedexpansion.html)，如下所示：

```
@echo off & setlocal ENABLEEXTENSIONS EnableDelayedExpansion
SET AlbumArtist=%1
set AlbumArtist=!AlbumArtist:%%=%%%%!
CALL :EscapePoisonChars %AlbumArtist% AlbumArtist_VDN
echo %AlbumArtist_VDN%
endlocal &GOTO:EOF 
```

在您的第二个子例程调用中，两个解析阶段看不到`%`原始字符串的符号；第一阶段从字面上扩展`%%AlbumArtist%%`为`%AlbumArtist%`，第二阶段将其扩展为`100% Rock & Roll`.

**但是：**
不需要所有这些，当您坚持唯一安全的`set`语法并确保始终正确引用字符串时，您根本不需要子例程：

```
set "AlbumArtist=%~1" 
```

`%1`将返回给定的字符串；`%~1`删除潜在的周围引号。将整个赋值表达式括在引号内使得语法对有毒字符具有鲁棒性，因为它*不*考虑`""`作为分配字符串本身的一部分。

使用/返回字符串时（`echo`如此处的示例所示），您需要再次将字符串括在引号内以保持安全，以防您使用正常（立即）`%`扩展：

```
set "AlbumArtist=%~1"
echo "%AlbumArtist%" 
```

或者，即使没有引号，延迟扩展也可以使读取变量安全：

```
set "AlbumArtist=%~1"
setlocal EnableDelayedExpansion
echo !AlbumArtist!
endlocal 
```

# c++ - 函数原型与 cpp 中包含标头

> ID：14774361
> 
> 赞同：4
> 
> 时间：2013-02-08T14:08:10.097
> 
> 标签：c++, forward-declaration, function-prototypes

我有做一些工作的功能。

**啊**

```
void doSomething(int n); 
```

**A.cpp**

```
#include "A.h"

void doSomething(int n) {
    /* something */
} 
```

如果我想在另一个源文件中使用这个函数，最好的选择是什么：

1) 包括啊

**B.cpp**

```
#include "A.h"

void anotherTask() {
    // ...
    doSomething(5);
    // ...
} 
```

2）或使用前向声明（函数原型）：

**B.cpp**

```
void doSomething(int);

void anotherTask() {
    // ...
    doSomething(5);
    // ...
} 
```

有很多关于尽可能多地为类使用前向声明的技巧。那么，函数前向声明的最佳实践是什么？

**UPD**

好的，这个例子太简单了。

如果标题 Ah 有一些垃圾（相对于对驱动程序级别一无所知的 B.cpp）怎么办：

**啊**

```
#include "specific_driver_header.h" /* some lowlevel stuff that B.cpp couldn't know */

#define SPECIFIC_DRIVER_DEFINES 0xF0  /* useless define for B.cpp that uses global namespace */

void doSomething(int n);   /* only significant function for B.cpp */ 
```

如果我在 B.cpp 中包含 Ah，那么 B.cpp 将不会独立于驱动程序或类似的东西。在这种情况下我应该使用变体（2）吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T14:13:21.120

尽可能在标题中使用原型。这可以防止意外更改一个地方，而不是另一个地方。

例如，将函数更改为：

```
void doSomething(long n); 
```

现在还有另外两个地方：函数的定义和b.cpp原型要改变。

如果你有一个头文件，编译器至少有机会告诉你“这看起来不对”。而不是您在后期收到链接器错误...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T14:11:02.793

仅当该函数仅在该文件中使用时，我才使用前向声明。

如果你想让它对其他单元可用，你使用一个头文件，然后你*不*使用前向声明（除非你正在解决一个非常具体的问题，比如循环依赖）。不要同时使用两者。切勿在多个地方作出相同的声明。

**编辑**

类的前向声明与您询问的情况不同：

[是否应该尽可能使用前向声明而不是包含？](https://stackoverflow.com/questions/9906402/should-one-use-forward-declarations-instead-of-includes-wherever-possible?rq=1)

**你的更新**

不要这样写你的头文件是简单的答案。头文件应尽可能自包含，并且不包含与“公共”接口无关的任何内容。（我将 'public' 放在引号中，因为当你声明一个 C++ 类时，受保护的方法和私有方法必须放在同一个 'public' 头文件中。但是你仍然应该避免将不需要的东西放在头文件中在那里。）

也就是说，如果您对此事别无选择，最好包含相关的头文件而不是复制声明。可维护性通常比编译速度更重要。

# php - 使用 str_replace 和 preg_replace 进行关键字替换

> ID：14774363
> 
> 赞同：0
> 
> 时间：2013-02-08T14:08:11.660
> 
> 标签：php, regex

我正在尝试在字符串中查找某些单词并将其替换为页面链接

我有三个这样的数组（这只是一个例子，不是实际的东西：P）

```
$string = "Oranges apples pears Pears <p>oranges</p>";
$keyword = array('apples', 'pears', 'oranges');
$links = array('<a href="apples.php">Apples</a>', '<a href="pears.php">Pears</a>', '<a href="oranges.php">Oranges</a>');
$content = str_replace($keyword, $links, $string);
echo $content; 
```

它替换了一些单词但不是全部替换，这是因为一些单词前面有空格，一些单词末尾有空格，有些是大写的等。

我想知道实现我想要做的最好的方法是什么。我也试过 preg_replace 但我对正则表达式不太好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:14:08.077

只需使用[str_ireplace](http://php.net/str_ireplace)：

```
$string = "Oranges apples pears Pears <p>oranges</p>";
$keyword = array('apples', 'pears', 'oranges');
$links = array('<a href="apples.php">Apples</a>', '<a href="pears.php">Pears</a>', '<a href="oranges.php">Oranges</a>');
$content = str_ireplace($keyword, $links, $string);
echo $content; 
```

空格应该没有问题。对于 str_replace，如果在搜索词之前/之后有空格，则不会。

如果只想替换整个单词，则需要使用正则表达式：

```
$string = "Oranges apples pear Pears <p>oranges</p>";
$keyword = array('apples', 'pear', 'oranges'); // note: "pear" instead of "pears"
$links = array('<a href="apples.php">Apples</a>', '<a href="pears.php">Pears</a>', '<a href="oranges.php">Oranges</a>');
$content = preg_replace(array_map(function($element) {
    $element = preg_quote($element);
    return "/\b{$element}\b/i";
}, $keyword), $links, $string);
echo $content; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:14:33.227

You should use str_ireplace function - it is not case-sensitive variant of str_replace function

# ruby-on-rails - 在控制台中模拟 API 对象和返回的外部数据

> ID：14774368
> 
> 赞同：1
> 
> 时间：2013-02-08T14:08:21.720
> 
> 标签：ruby-on-rails, ruby, api, oop

我正在控制台内做一些事情来尝试模拟生产中存在的一些代码。
它从对 API 的调用中获取回调，然后对返回的数据执行一些操作。
它是非常标准的东西，但我试图模拟服务器从我的代码返回的数据对象，但我无处可去。

我想最终得到一种对象，我可以将自定义参数/值对分配给它，以便我可以通过点语法访问它。例如

```
myObject.thing = value 
```

这是来自 API 的数据返回的格式。
控制台中有没有办法创建一个匿名对象，然后自己分配值并使用它来运行我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:10:07.947

在控制台内输入以下内容：

```
>> class myObject 
?> attr :testparam 
?> end 
=> nil 
>> i = myObject.new 
=> #myObject...... 
>> i.testparam = "value" 
=> #myObject..... 
>> yourcode(i) 
=> results from yourcode... 
```

在这里，我们定义一个带有参数/属性的类，然后实例化一个对象。
我们为参数分配一个值，并将这个对象（with `param/value`）传递给一个函数（`yourcode`），该函数从这里处理数据。

希望有帮助

# .net - .net 上传文件然后无法检索 - 目录路径？

> ID：14774377
> 
> 赞同：0
> 
> 时间：2013-02-08T14:08:37.927
> 
> 标签：.net, excel, excel-interop

我目前可以将 excel 文件上传到上传目录：

```
FileUploadExcel.SaveAs(Server.MapPath("~/Uploads/ExcelImport.xls")) 
```

但是当我尝试检索它以打开它时，它报告它找不到它：

```
xlWorkBook = xlApp.Workbooks.Open("~/Uploads/ExcelImport.xlsx") 
```

* * *

错误信息：

> 找不到“~/Uploads/ExcelImport.xlsx”。检查文件名的拼写，并验证文件位置是否正确。
> 
> 如果您尝试从最近使用的文件列表中打开该文件，请确保该文件未被重命名、移动或删除。

* * *

任何人都知道可能是什么问题或以前见过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:11:12.607

尝试

xlWorkBook = xlApp.Workbooks.Open(Server.MapPath("~/Uploads/ExcelImport.xls"))

# facebook - Facebook 活动小部件

> ID：14774380
> 
> 赞同：-1
> 
> 时间：2013-02-08T14:08:44.720
> 
> 标签：facebook, wordpress

我在 Wordpress 安装（3.5.1）中使用 Facebook 事件小部件，可以在这里找到：[http ://wordpress.org/extend/plugins/facebook-events-widget/](http://wordpress.org/extend/plugins/facebook-events-widget/)

该小部件应该显示来自某个 Facebook 粉丝页面的事件列表。在小部件设置中，您必须填写该页面的 id、您的 Facebook 应用程序的 id 及其应用程序密码。我用我自己的个人资料创建了一个应用程序（我找不到任何方法来使用粉丝页面）

当我保存小部件并访问我的页面时，会引发以下错误：

```
Caught exception: SSL certificate problem, verify that the CA cert is OK. Details:    error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed 
```

在一个带有消息的空列表下方：没有事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T14:02:57.193

听起来您缺少或配置错误的 SSL 配置。要访问 Facebook API，您需要为回调 URL 使用 SSL 连接。

# r - 使用 df[col] 访问列给出：错误 'x' must be atomic for 'sort.list'

> ID：14774382
> 
> 赞同：22
> 
> 时间：2013-02-08T14:08:52.617
> 
> 标签：r, vector, indexing, syntax, dataframe

我有一个非常简单的数组，我想在上面运行 ROC 曲线分析。但首先，当我尝试使用命令将数据强制转换为因子类型时`table[1]<-factor(table[1])`，我得到了错误

```
Error in sort.list(y) : 'x' must be atomic for 'sort.list'
Have you called 'sort' on a list? 
```

下面给出了数据中的几个示例行

```
GRADE   TRUE-GRADE

benign  Benign
benign  Benign
benign  Benign
benign  Benign
benign  Benign
benign  Benign
benign  Malignant
benign  Malignant
indeterminate   Benign
indeterminate   Benign
indeterminate   Benign
indeterminate   Benign
indeterminate   Benign
indeterminate   Benign
indeterminate   Benign
indeterminate   Benign
indeterminate   Benign
indeterminate   Benign
indeterminate   Benign
indeterminate   Benign
indeterminate   Benign
indeterminate   Malignant
indeterminate   Malignant
indeterminate   Malignant
likely benign   Benign
likely benign   Benign
likely benign   Benign 
```

有人可以告诉我我做错了什么吗？str(table) 的结果如下：

```
data.frame':   127 obs. of  2 variables:
 $ GRADE        : Factor w/ 5 levels "benign","indeterminate",..: 1 1 1 1 1 1 1 1 1 

 $ BENIGN.MALIGN: Factor w/ 2 levels "Benign","Malignant": 1 1 1 1 1 1 1 1 1 1 ... 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-08T14:31:58.790

应用于数据框的函数`[`返回一个数据框（如果只使用一个参数）。如果要访问单个列并将其作为向量返回，则必须`[[`改用。

```
table[1] <- factor(table[[1]]) 
```

但这可能不是必需的，因为两列都是因素（请参阅您的`str`输出）。

顺便说一句：`table`对于一个对象来说不是一个好名字，因为它也是一个基本的 R 函数的名字。

# android - Android：NoClassDefFoundError 但不存在

> ID：14774385
> 
> 赞同：0
> 
> 时间：2013-02-08T14:08:58.277
> 
> 标签：android, android-intent, noclassdeffounderror

我一直在更新去年发布的应用程序。今天在一个完全不同的活动上修改源代码时，我注意到其中一个活动，与我正在从事的工作完全无关，已经停止工作。它给了我这个错误：

```
02-08 13:59:53.850: E/AndroidRuntime(11526): FATAL EXCEPTION: main
02-08 13:59:53.850: E/AndroidRuntime(11526): java.lang.NoClassDefFoundError: uk/co/m/panic/MyLocationActivity
02-08 13:59:53.850: E/AndroidRuntime(11526):    at uk.co.m.panic.ParentActivity.onItemClick(ParentActivity.java:80)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at android.widget.AdapterView.performItemClick(AdapterView.java:292)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at android.widget.AbsListView.performItemClick(AbsListView.java:1108)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at android.widget.ListView.performItemClick(ListView.java:4760)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2571)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at android.widget.AbsListView$1.run(AbsListView.java:3284)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at android.os.Handler.handleCallback(Handler.java:608)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at android.os.Looper.loop(Looper.java:156)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at android.app.ActivityThread.main(ActivityThread.java:5045)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at java.lang.reflect.Method.invokeNative(Native Method)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at java.lang.reflect.Method.invoke(Method.java:511)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at dalvik.system.NativeStart.main(Native Method)
02-08 13:59:53.850: E/AndroidRuntime(11526): Caused by: java.lang.IllegalAccessError: Class ref in pre-verified class resolved to unexpected implementation
02-08 13:59:53.850: E/AndroidRuntime(11526):    at dalvik.system.DexFile.defineClass(Native Method)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at dalvik.system.DexFile.loadClassBinaryName(DexFile.java:195)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at dalvik.system.DexPathList.findClass(DexPathList.java:315)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:58)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-08 13:59:53.850: E/AndroidRuntime(11526):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-08 13:59:53.850: E/AndroidRuntime(11526):    ... 15 more 
```

通常 NoClassDefError 将类似于 minfest 中缺少活动。但在这种情况下不是。类名没有改变，但我确实更新了我的 v. android sdk，所以我不知道这是否涉及...

此行发生错误：

```
Intent myLocationItent = new Intent(ParentActivity.this, MyLocationActivity.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:15:33.530

如果您使用`.jar`文件，则必须添加到`libs/`项目根目录下的文件夹中（等旁边`src/, res/,`）。检查这个条件。

# javascript - 如何在客户端使用 JavaScript 检查 webRTC 数据通道兼容性？

> ID：14774386
> 
> 赞同：2
> 
> 时间：2013-02-08T14:09:01.267
> 
> 标签：javascript, html, webrtc

WebRTC 数据通道仅在 Firefox nightly 中有效。如何在客户端检查它？

代码如下所示；

```
if (/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)){ //test for Firefox/x.x or Firefox x.x (ignoring remaining digits); 

 var ffversion=new Number(RegExp.$1) // capture x.x portion and store as a number

 if (ffversion>=5)

  document.write("You're using FF 5.x or above")

 else if (ffversion>=4)

  document.write("You're using FF 4.x or above")

 else if (ffversion>=3)

  document.write("You're using FF 3.x or above")

 else if (ffversion>=2)

  document.write("You're using FF 2.x")

 else if (ffversion>=1)

  document.write("You're using FF 1.x")
}

else
 document.write("n/a") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T14:18:07.383

您可以简单地测试浏览器当前是否支持您将要使用的功能。例如：

```
if (!window.mozRTCPeerConnection)
    // error, browser doesn't support it 
```

如果你有兴趣，这里有一篇有趣的文章：[你好 Chrome，它是 Firefox 来电！](https://hacks.mozilla.org/2013/02/hello-chrome-its-firefox-calling/)

您基本上可以在 Chrome 中实现相同的功能，只需使用`webkit`前缀而不是`moz`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-09T09:46:26.937

`RTCDataChannel`现在在[simpl.info/dc](http://www.simpl.info/rtcdatachannel)上有一个 Chrome演示。

这不是很健壮或不完整，但您可以创建一个`webkitRTCPeerConnection`对象，然后检查它是否有`createDataChannel`成员：

```
try { // or if (webkitRTCPeerConnection) {...}
  var pc = new webkitRTCPeerConnection(null);
  if (pc && pc.createDataChannel) {
    var dc = pc.createDataChannel("sendDataChannel", {reliable: false});
    if (!!dc) {
      // doSomething()
    } 
  }
} catch (e) {
  // try some other instantiation 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-13T09:07:00.510

检查**webrtcsupport**包。它似乎是跨浏览器（Chrome & FF）。 [https://www.npmjs.org/package/webrtcsupport](https://www.npmjs.org/package/webrtcsupport)

如果你不想使用 NPM 包，可以在这里找到主要逻辑。 [https://github.com/HenrikJoreteg/webrtcsupport/blob/master/index-browser.js](https://github.com/HenrikJoreteg/webrtcsupport/blob/master/index-browser.js)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-30T10:56:53.180

使用 JavaScript

```
var prefix;
var version;
if (window.mozRTCPeerConnection || navigator.mozGetUserMedia) {
  prefix = 'moz';
  version = parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1], 10);
} else if (window.webkitRTCPeerConnection || navigator.webkitGetUserMedia) {
  prefix = 'webkit';
  version = navigator.userAgent.match(/Chrom(e|ium)/) && parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2], 10);
}

if(prefix == 'moz' || prefix == 'webkit' && version > 41){
  console.log("Browser Support WebRTC")
} else {
  console.log("This Browser Not Support WebRTC")
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T15:00:02.413

我刚刚想通了。感谢你的帮助。 [http://mozilla.github.com/webrtc-landing/](http://mozilla.github.com/webrtc-landing/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-20T20:02:34.220

另一个检查 WebRTC 支持的包是 DetectRTC [https://github.com/muaz-khan/DetectRTC](https://github.com/muaz-khan/DetectRTC)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-24T08:13:35.070

上面的答案是不对的。

```
if (window.RTCDataChannel) {
    // the browser support dataChannel
} else {
   // the browser does not support dataChannel
} 
```

如果浏览器支持 RTCPeerConnection，并不代表也支持 RTCDataChannel。比如 Edge，`createDataChannel`on instance of`RTCPeerConnection`会抛出异常。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-12T09:39:25.260

很惊讶没有人提到检查原型。

您可以通过执行以下操作检查 createDataChannel 是否存在：

```
if (!window.RTCPeerConnection.prototype.createDataChannel) {
    // Data Channels not supported
} 
```

# eclipse - 在插件中单元测试 Eclipse 的编辑器逻辑：现有的模拟/框架？

> ID：14774387
> 
> 赞同：4
> 
> 时间：2013-02-08T14:09:10.350
> 
> 标签：eclipse, unit-testing, eclipse-plugin, eclipse-jdt

我正在开发一个插件，该插件使用方面对现有的 JDT (Java) 编辑器进行了扩充。

现在，派生自的 Eclipse 文本编辑器按照[MVC](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)架构`AbstractTextEditor`组织在清晰的组件中。然后通过精确路径访问这些组件，例如[对帐](http://blog.darevay.com/2007/11/the-eclipse-reconciler/)。[您可以在此处](http://blog.ankursharma.org/2009/08/adding-spellchecking-to-custom-editors_19.html)找到自定义协调器的一个示例以及它可以（并且确实）对编辑器的行为使用的假设 。

**我想针对这些假设编写无头单元测试**，以检查我在各个方面的编织在此过程中没有破坏任何东西。比如对账的情况，我想打开一个编辑器，输入一些不正确的内容（关于一些对账策略），稍等片刻，查看是否确实报出了问题。

请注意，报告了哪些问题，或者它们将如何在 UI 组件中向用户发出信号与我无关：我想测试我`SourceViewer`通过方面交换自定义问题不会破坏编辑器逻辑，*而不是*我的特定逻辑和解策略。

（事实上​​，我可能会为该测试嘲笑它。此外，UI 测试可能无法以无头方式运行，超出了我的问题范围。）

如果存在适当的结构，这似乎应该很容易做到。他们吗？**是否有任何与 Eclipse 的架构假设同步的测试框架或模拟可以让我做我想做的事情** ？那些必须重现现有 Eclipse 编辑器的工作流行为。这肯定是 Eclipse 自己的单元测试之一，对吧？...虽然我似乎找不到任何类似的东西。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:22:48.753

我在 Eclipse 核心平台邮件列表上问过[同样的问题](http://article.gmane.org/gmane.comp.ide.eclipse.platform.core.devel/866)，并从[Dani Megert那里得到了](http://wiki.eclipse.org/User%3aDaniel_megert.ch.ibm.com)[很好的回答](http://article.gmane.org/gmane.comp.ide.eclipse.platform.core.devel/867)，给了我指向 Eclipse 自己的测试框架的指针。Junit 插件测试作为扩展 SDK 的一部分[发布](http://download.eclipse.org/eclipse/downloads/drops4/S-4.3M5a-201302041400/#JUnitPlugin)以供下载，浏览 git 源代码可以让您看到已经有[针对模型的测试](http://git.eclipse.org/c/platform/eclipse.platform.text.git/tree/)或与某些组件交互的测试。`Editor`

# asp.net - 在 asp.net 应用程序中创建组件时出错？

> ID：14774388
> 
> 赞同：0
> 
> 时间：2013-02-08T14:09:20.593
> 
> 标签：asp.net, visual-studio, c#-4.0

我正在做一个网络应用程序，它运行良好，直到我备份我的项目并格式化 ma PC，重新安装 Visual Studio 2012。现在当我切换到源代码时它工作正常但是当我切换设计视图时我得到一堆错误占位符。

```
Error creating control - (Content)
cannot find type system.componentmodel.toolboxitemfilterattribute in module system.dll 
```

但是该应用程序在运行时运行良好，我只是无法在设计器视图中编辑 ![图片错误信息](../Images/b0b594c826629bfaa47b5985520fe61d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:45:26.243

我最近发现了[一个类似的错误](http://www.telerik.com/community/forums/aspnet-ajax/general-discussions/error-creating-control-solution-found.aspx)，那里的解决方案效果很好。

我所要做的就是删除项目 bin 目录中的所有文件并重新打开项目.. 哈哈

# windows-phone-7 - 同一应用程序的多个 Windows Phone xap

> ID：14774391
> 
> 赞同：1
> 
> 时间：2013-02-08T14:09:30.043
> 
> 标签：windows-phone-7, windows-phone-8

我的应用程序有 3 个 xap

1.  MyApp (WP7) - 免费，功能有限
2.  MyApp Pro (WP7) - 付费，功能齐全
3.  MyApp (WP8) - 免费，具有应用内产品的全部功能。

我的一般问题是找到一种方法将 xap 文件上传到市场并使版本 1 和 2 仅对 Windows Phone 7 设备可见。对于 Windows Phone 8 设备，只有第 3 个版本必须可见。我知道第 3 版仅对 Windows Phone 8 设备自动可见，但如何使其他 2 个（1 和 2）对 Windows Phone 8 设备不可见，而对 Windows Phone 7 设备可见。我假设，因为版本 1 和版本 3 具有相同的产品 ID，所以版本 1 对于 Windows Phone 8 设备将不可见，因为它已经被版本 3 覆盖。

一般问题是：如何使版本 2 仅对 Windows Phone 7 设备可见，而不对 Windows Phone 8 可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:45:12.563

只需将#3 添加到#1（您可以在同一个条目下发布，wp8 用户将自动看到#3，wp7 用户将看到#1。只需确保#3 的版本号高于#1（您可以仍然更新#1). 在您上传 .xap 文件的发布设置下，您可以通过下拉列表添加多个 xap。

棘手的一点是从 WP8 中隐藏 #2。这在技术上是可行的，但我认为您需要打开支持事件并要求他们启用它。

# ios - 内存管理和属性 (init/dealloc)

> ID：14774394
> 
> 赞同：0
> 
> 时间：2013-02-08T14:09:40.173
> 
> 标签：ios, memory-management, properties

直到昨天，我还以为我理解了属性内存管理的工作原理，但后来我用 XCode 运行了一个“分析”任务，并得到了很多“这个对象在这里不是自己的”。这是一个描述我的问题的简单示例：

MyObservingObject.h：

```
@interface MyObservingObject : NSObject
@property(nonatomic, retain) NSMutableDictionary *observedDictionary;
-(id)initWithDictCapacity:(int)capacity;
@end 
```

MyObservingObject.m：

```
@synthesize observedDictionary;

-(id)initWithDictCapacity:(int)capacity {
    self = [super init];
    if (self) {
        self.observedDictionary = [[[NSMutableDictionary alloc] initWithCapacity:capacity] autorelease];
    }
    return self;
}

- (void)dealloc {
    // The following line makes the Analize action say :
    // "Incorrect decrement of the reference count of an object that is not owned at this point by the caller"
    [self.observedDictionary release], self.observedDictionary=nil;

    [super dealloc];
} 
```

我不明白的是**为什么我要离开这个属性而不调用** `release` **它？**My`@property`设置为`retain`(`copy`也一样)，所以当我这样做时`self.myRetainProperty = X`，X 的保留计数增加了（它归自己所有），不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:14:08.063

`release`你应该让 setter 为你做释放，所以删除对in的调用`dealloc`：

```
- (void)dealloc {
    self.observedDictionary=nil;

    [super dealloc];
} 
```

这是因为 setter 将被合成为：

```
- (void)setObject:(id)object
{
    [object retain];
    [_object release];
    _object = object;
} 
```

当您通过时，这将按需要工作`nil`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:13:29.180

你不需要做

```
[self.observedDictionary release] 
```

前

```
self.observedDictionary=nil; 
```

这样就足够了，因为这是一个属性，它会自动将 release 发送到以前的值

```
self.observedDictionary=nil; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T14:14:47.577

它确实增加了，但是当您将其设置为 时`nil`，setter 方法首先释放支持实例变量，然后才保留并分配新值。因此，将**属性**设置为`nil`就足够了，但是将**ivar**设置为`nil`泄漏内存。

为了您更好地理解：自动生成的保留设置器的典型实现相当于

```
- (void)setFoo:(id)foo
{
    if (_foo != foo) {
        [_foo release];
        _foo = [foo retain];
    }
} 
```

另请注意，因此，您永远不应该释放这样的属性。如果您这样做，支持 ivar 可能会被释放，并且消息传递它（`release`由访问者将属性设置为`nil`之后）可能会崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:29:08.607

编译器警告的原因是您检索对象的方式。

通过调用

```
[self.observedDictionary release]; 
```

您实际上正在通过定义为的访问器方法

```
- (NSDictionary *)observedDictionary; 
```

这将返回您的对象，但由于`observedDictionary`编译器的命名假定没有所有权转移，例如被调用者不必释放该对象，除非他们进一步保留。正因为如此，编译器认为您将通过释放一个您实际上并不拥有的对象来进行过度释放。

更具体地说，转移所有权的方法名称的约定是以`copy`、`mutableCopy`或开头。`alloc``new`

## 一些例子

在这里，我使用了一个并不意味着所有权转让的名称，所以我收到了警告

```
- (id)object;
{
  return [[NSObject alloc] init];
}
//=> Object leaked: allocated object is returned from a method whose name ('object') does not start with 'copy', 'mutableCopy', 'alloc' or 'new'.  This violates the naming convention rules given in the Memory Management Guide for Cocoa 
```

修复1：（不要转让所有权）

```
- (id)object;
{
  return [[[NSObject alloc] init] autorelease];
} 
```

修复2：（使名称更合适）

```
- (id)newObject;
{
  return [[NSObject alloc] init];
} 
```

有了这些知识，我们可以了解命名约定，我们可以看到以下错误，因为我们不拥有返回的对象

```
[self.object release]; //=> Produced warnings 
```

并展示最后一个示例 - 释放一个暗示所有权转移的对象及其名称

```
[self.newObject release]; //=> No Warning 
```

# sas - SAS 中的哈希对象 - 是否可以使用哈希对象合并下面的两个表？

> ID：14774395
> 
> 赞同：0
> 
> 时间：2013-02-08T14:09:42.000
> 
> 标签：sas

是否可以在下面的 SAS 9.1 示例中使用哈希对象合并以下两个表？主要问题似乎是创建`Value`变量 w 结果数据集。问题是每次付款可以支付不止一次的费用，有时需要多次付款才能支付一次费用，这种情况可能会同时出现。问题有一些通用名称吗？ [http://support.sas.com/rnd/base/datastep/dot/hash-getting-started.pdf](http://support.sas.com/rnd/base/datastep/dot/hash-getting-started.pdf)

```
data TABLE1;
input ID_client   ID_commodity    Charge;
datalines;
1             111111111      100
1             222222222      200
2             333333333      300    
2             444444444      400
2             555555555      500
;;;;
run;

data TABLE2;
input ID_client_hash     ID_ofpayment  paymentValue;
datalines;
1             11              50    
1             12              50    
1             13              100   
1             14              50    
1             15              50    
2             21              500   
2             22              200   
2             23              100   
2             24              200   
2             25              200
;;;;
run;

data OUT;
input ID_client     ID_commodity    ID_ofpayment    value;
datalines;
1               111111111             11    50
1               111111111             12    50
1               222222222             13    100
1               222222222             14    50
1               222222222             15    50
2               333333333             21    300
2               444444444             21    200
2               444444444             22    200
2               555555555             23    100
2               555555555             24    200
2               555555555             25    200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:31:08.740

这可能对你有用——我有 9.2 和 9.2 有一些显着的哈希改进，但我认为我表现得很好，只使用了 9.1 中的内容。您可以尝试将其交叉发布到 SAS-L [SAS listserv]，因为我仍然相信 Paul Dorfman（即 The Hash Guru）所读到的。

我以为你想把“剩菜”贴出来。如果它没有按照您想要的方式工作，您可能需要处理该部分。这没有经过很好的测试，它适用于您的示例数据集。我称缺少 24 和 25 的商品，因为它们不用于那个。

我很确定有一种比我做的迭代更干净的方法，但是由于我使用的是 9.2+ 并且我们有可用的多数据，所以我一直使用它而不是哈希迭代器，所以我不知道更清洁的方法。

```
data have;
input ID_client   ID_commodity    Charge;
datalines;
1             111111111      100
1             222222222      200
2             333333333      300    
2             444444444      400
2             555555555      50
;;;;
run;

data for_hash;
input ID_client_hash     ID_ofpayment  paymentValue;
datalines;
1             11              50    
1             12              50    
1             13              100   
1             14              50    
1             15              50    
2             21              500   
2             22              200   
2             23              100   
2             24              200   
2             25              200
;;;;
run;

data want;
*Create hash and hash iterator - must use iterator since 9.1 does not allow multidata option;
if _n_ = 1 then do;
  format id_client_hash paymentValue id_ofpayment BEST12.;
  declare hash h(dataset:'for_hash' , ordered: 'a');
  h.defineKey('ID_client_hash','id_ofpayment'); *note I put id_client_hash, renaming the id - want to be able to compare them;
  h.defineData('id_client_hash','id_ofpayment','paymentValue');
  call missing(id_ofpayment,paymentValue, id_client_hash);
  h.defineDone();
  declare hiter hi('h');
end;

do _t = 1 by 1 until (last.id_client);
 set have;
 by id_client;

 *Iterate through the hash and find the first record with the same ID_client;
 do rc = hi.first() by 0 while (rc eq 0 and ID_client ne ID_client_hash);
   rc = hi.next();
 end;

 *For the current charge record, iterate through the payment (hash) until all paid up.;
 do while (charge gt 0 and rc eq 0 and ID_client=ID_client_hash);
   if charge ge paymentValue then do; *If charge >= paymentvalue, use up the payment value;
     value = paymentValue; *so whole paymentValue is value;
     charge = charge - paymentValue; *charge is decremented by paymentValue;
     output; *output row;
     _id=ID_client_hash; 
     _pay=id_ofpayment;
     rc = hi.next();
    h.remove(key:_id,key:_pay); *remove payment row from hash now that it has been used up;
   end;
   else do; *this is if (remaining) charge is less than payment - we will not use all of the payment;
     value = charge; *value is the remainder of the charge, ie, how much of payment was actually used;
     paymentValue = paymentValue - charge; *paymentValue is the remainder of paymentValue;
     charge= 0; *charge is zero now;
     output; *output a row;
     h.replace(); *replace paymentValue in the hash with the new value of paymentValue, minus charge;
   end;
 end; *end of iteration through hash - at this point, either charge = 0 or we have run out of payments with that ID;
 if charge gt 0 then do;
   value=-1*charge;
   call missing(id_ofpayment);
   output; *output a row for the charge, which is not paid; 
 end;
 if last.id_client then do;  *this is cleanup, checking to see if we have any leftover payments;
   do while (rc=0); *iterate through the remaining hash;
     do rc = hi.first() by 0 while (rc eq 0 and ID_client ne ID_client_hash);
       rc = hi.next();
     end;
     if rc=0 then do;
         call missing(id_commodity); *to make it clear this is a leftover payment;
         value=paymentValue; *update the value;
         output; *output the payment;
         _id=ID_client_hash;
         _pay=id_ofpayment;
         rc = hi.next();
         if rc= 0 then h.remove(key:_id,key:_pay); *remove the payment just output;
     end;    
   end;
 end;
end;
keep id_client id_ofpayment id_commodity value;
run; 
```

除此之外，这并不是非常快 - 我做了很多可能会浪费的迭代。如果您没有任何未在收费记录中表示的付款 ID_client 记录，它将相对更快 - 您所做的任何事情都会被跳过，因此最终可能会非常慢。

我不相信 hash 是更好的解决方案，至少在 9.2 之前；键控更新可能更好。UPDATE 非常适用于事务数据库结构，这似乎很接近。

# java - hdfs map-reduce 如何在完全分布式模式下实际工作

> ID：14774397
> 
> 赞同：0
> 
> 时间：2013-02-08T14:09:51.707
> 
> 标签：java, hadoop, mapreduce, hdfs

实际上，我对 hdfs map-reduce 如何在完全分布式模式下实际工作感到有些困惑。

假设我正在运行一个字数统计程序。我只给出“hdfs-site”和“core-site”的路径。

那么事情实际上是如何进行的呢？

这个程序是分布在每个节点上还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:26:51.493

是的，您的程序是分布式的。但如果说它分布在每个节点上是错误的。更重要的是，hadoop 检查您正在使用的数据，将这些数据拆分为更小的部分（在配置的一些限制下），然后将您的代码移动到这些部分所在的 hdfs 中的节点（我假设您有一个datanode和一个在节点上运行的tasktracker）。首先，地图部分在这些节点上执行，这会产生一些数据。此数据存储在节点上，在映射完成期间，您的工作的第二部分从节点开始，即归约阶段。

reducer 在一些节点上启动（同样，您可以配置它们的数量）并从映射器中获取数据，聚合它们并将输出发送到 hdfs。

# c# - C# 将一个类放入字典并在调用时创建一个新实例

> ID：14774399
> 
> 赞同：1
> 
> 时间：2013-02-08T14:09:53.837
> 
> 标签：c#, class, instances

这看起来确实令人困惑，但我想创建一个字典，其中包含不同的类作为值，然后使用字母作为键。当我调用那个字典中的一个键时，我需要它表现得好像我正在输入“new ClassInDictionary”。

这样我就可以创建一个文本文件，其中包含定义不同块的不同符号。

为了帮助解决问题，这是我当前的代码：

```
blockIdentifier.Add("=", new BlockAir()); // Define which class corresponds to which letter
blockIdentifier.Add("-", new BlockDirt());

for (int mapX = 0; mapX < mapWidth; mapX++)
{
    for (int mapY = 0; mapY < mapHeight; mapY++)
    {
        try
        {
            Block block = blockIdentifier[mapSplit[mapY].Substring(mapX, 1)]; // Simply find which letter to use, let's pretend it's: "="
            // The line above should be creating a new instance of the class BlockAir                                                 
            block.blockX = mapX * 45; 
            block.blockY = mapY * 45;

            mapList[mapY, mapX] = block; 
        }
        catch (Exception)
        {
        }
    }
} 
```

变量块标识符：

```
public static Dictionary<string, Block> blockIdentifier = new Dictionary<string, Block>(); 
```

和 BlockDirt：

```
 public class BlockDirt : Block
{
    public int hi;

    public BlockDirt()
        : base("Dirt Block.png", 0, 0, true)
    {
    }
} 
```

我只需要调用 blockIdentifier["="] 并获取类 BlockDirt() 的新实例，我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T14:20:58.947

你想每次都创建一个新的块实例还是重复使用一个块的实例？

从代码看来，您每次都想创建一个新的。如果是这样，一种方法是让它成为`Dictionary<string, Func<Block>>`所有块都继承自 Block（或 IBlock，这可能会更好一些）的地方。

**注意**
假设`BlockAir : IBlock`和`BlockDirt : IBlock`

```
var blockLookup = new Dictionary<string, Func<IBlock>>();
blockLookup.Add("=", ()=> new BlockAir());
blockLookup.Add("-", ()=> new BlockDirt());

...

mapList[x,y] = blockLookup[symbol]();

... 
```

或沿着这些思路（我目前无法访问开发环境，因此对任何错误表示歉意）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:17:20.840

您可以通过将`ConstructorInfo`对象存储在字典中然后通过反射创建对象来做到这一点。也许有点hacky，但我认为它会起作用。

这是在字典中使用 StringBuilder 构造函数的示例（您可以将其扔到 LINQPad 中以查看输出）。

```
var creator = typeof(StringBuilder).GetConstructor(new Type[]{});
var dict = new Dictionary<string, ConstructorInfo>();

dict["a"] = creator;

StringBuilder b = (StringBuilder)dict["a"].Invoke(new object[]{});
b.AppendLine("Hello World");
b.ToString().Dump(); 
```

因此，对于您的情况，您需要不同`Block`对象的构造函数：

```
var blockIdentifier = new Dictionary<string, ConstructorInfo>();
blockIdentifier["="] = typeof(BlockAir).GetConstructor(new Type[]{});
blockIdentifier["-"] = typeof(BlockDirt).GetConstructor(new Type[]{}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:49:12.650

我想说最合乎逻辑的方法是`Type`在字典中有值

```
var blockIdentifier = new Dictionary<string, Type>();
blockIdentifier.Add("=", typeof(BlockDirt));
blockIdentifier.Add("-", typeof(BlockAir));

....

mapList[x,y] = blockIdentifier[symbol].GetConstructor(new Type[] { }).Invoke(null); 
```

# linux - 如何在不解压缩文件的情况下列出文件的前 10 行或后 10 行

> ID：14774401
> 
> 赞同：4
> 
> 时间：2013-02-08T14:10:01.230
> 
> 标签：linux

我有一个`.bz2`文件。我想列出前 10 行或后 10 行而不解压缩它，因为它太大了。我尝试了`head -10`or`tail -10`但我看到了乱码。我还需要比较两个压缩文件以检查它们是否相似。如何在不解压缩文件的情况下实现这一点？

编辑：相似意味着相同（具有相同的内容）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T15:31:21.513

虽然`bzip2`是基于块的压缩算法，所以理论上你*可以*找到你想要解压缩的特定块，但这会很复杂（例如，如果你最终想要看到的最后十行实际上跨越两个或更多压缩块怎么办？） .

要回答您的直接问题，您可以这样做，这实际上会解压缩整个文件，因此在某种意义上是浪费的，但它不会尝试将该文件存储在任何地方，因此您不会遇到存储容量问题：

```
bzcat file.bz2 | head -10
bzcat file.bz2 | tail -10 
```

如果您的发行版不包括`bzcat`（根据我的经验，这有点不寻常），`bzcat`则相当于`bzip2 -d -c`.

但是，如果您的最终目标是比较两个压缩文件（可能已在不同级别压缩，因此直接比较实际压缩文件不起作用），您可以这样做（假设`bash`您的 shell）：

```
cmp <(bzcat file1.bz2) <(bzcat file2.bz2) 
```

这将解压缩两个文件并逐字节比较未压缩的数据，而无需将任何一个解压缩文件存储在任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:13:34.190

普通的标准[`bunzip2`](http://www.bzip.org/1.0.5/bzip2.txt)命令不能做到这一点。但是，手册页说 bzip2 在 900 KB 的块中工作，并提到[`bzip2recover`](http://linux.die.net/man/1/bzip2recover)这是一个可以解压缩单个块的程序。

使用这些知识，您应该能够从所需文件中截取第一个和最后一个 900 KB（左右）的内容，然后使用 bzip2recover 解压缩这些内容。

# html - 当只有值 1、2、3、4、5 可用时，单选按钮变为值 0

> ID：14774402
> 
> 赞同：0
> 
> 时间：2013-02-08T14:10:01.993
> 
> 标签：html, null, radio-button, rating, zero

一个项目的评分可以是 1、2、3、4 或 5，但在数据库中有一些评分值为“0”。我不知道它是如何到达那里的。任何建议，这是代码：

```
 <div class="yourRating">
<input type="hidden" value="269" id="userLoggedCheck" />
<div class="yourRatingDiv">
<div class="yourRatingText">your rating </div>
<input name="notLoggedRate" id="notLoggedRate1" type="radio" title="1 Yll" value="1"  class="star"  />
<input name="notLoggedRate" id="notLoggedRate2" type="radio" title="2 Yje" value="2"   class="star"  />
<input name="notLoggedRate" id="notLoggedRate3" type="radio" title="3 Yje" value="3"  class="star" />
<input name="notLoggedRate" id="notLoggedRate4" type="radio" title="4 Yje" value="4"  class="star"  />
<input name="notLoggedRate" id="notLoggedRate5" type="radio" title="5 Yje" value="5" class="star"  >

</div>

<div class="userNotLoggedInDiv" style="display:none; left:228px; top:-5px;">
<img src="images/rightArrow.png" class="leftArrowClass4" height="24" width="9" alt="Object Pointer" />
<img src="images/close2.jpg" class="leftArrowClass5" height="13" width="13" alt="Close" />

<div class="notLoggedText">log in to rate</div>

    <a href="login" class="userLogInHref">Log in</a>

<div class="haventSignUpYet">Still not registered <a href="register" class="userSignUpHref"> register now <img src="images/setupLink.png" class="setupLinkImg" alt="Icon" /></a></div>
<div class="space"></div>
</div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:16:07.060

这里没有足够的信息，你没有显示你是从数据库中获取还是发布到数据库，或者你是如何做的——但是根据你提供的少量数据猜测，你没有选择默认收音机，所以保存数据不做选择会发送一个空值......一个db int将转换为0

# php - 作曲家安装错误

> ID：14774404
> 
> 赞同：0
> 
> 时间：2013-02-08T14:10:09.200
> 
> 标签：php, composer-php

我的本地计算机上有两个服务器设置，一个是 Zend Server，一个是 Wamp，因为我想开始使用 Symfony 2，但它不会安装在 Zend 上。

当我尝试安装作曲家时，我在我的 wamp 文件夹中选择了 php.exe，但在安装结束时我不断收到此错误。

**错误：**

```
The php exe you selected does not match the one found in your path.

Selected: C:\wamp\bin\php\php5.3.13\php.exe
In Path: C:\Program Files (x86)\Zend\ZendServer\bin\php.exe

Remove the following from your System Path Environment variable:
C:\Program Files (x86)\Zend\ZendServer\bin

Warning: Only do this if you are sure that it will not affect anything else. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T14:06:40.360

就我而言，它是

作曲家安装错误

选择php.exe所在的位置

我通过使用 C:\wamp\bin\php\php5.4.12\php.exe 解决了这个问题

并通过输入 start->search (run) 然后在终端 need11.com 中输入 composer 重新运行 windowpowershell

# jquery - 如何检查输入值是否为 html 编码

> ID：14774406
> 
> 赞同：0
> 
> 时间：2013-02-08T14:10:09.793
> 
> 标签：jquery, html-encode

有什么方法可以检查文本框值是否已经被 html 编码。

对于页面验证，我使用以下代码将焦点移出文本框。

```
 $(document).ready(function() {
        $('#txtLink').focusout(function(){
            $('#txtLink').val(htmlEncode($('#txtLink').text()));
        });
    });
    function htmlEncode(value){
        if (value) {
            return jQuery('<div />').text(value).html();
        } 
        else {
            return '';
        }
    }

    function htmlDecode(value) {
        if (value) {
            return $('<div />').html(value).text();
        } 
        else {
            return '';
        }
    } 
```

对于文本框或 alt+tab 到其他窗口等的每个焦点...文本多次编码。需要一些建议。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:33:10.003

我认为您混淆了客户端和服务器端的工作。当您在服务器端设置恰好包含 HTML 实体的元素的 val 时，您必须对其进行编码，因为它需要知道所有文本都是值的一部分，而不是新标记。当客户端时，您可以只设置值，例如`$('#txtLink').val('<div>Hello <span>World</span></div>')`设置或检索（或发布）不需要编码/解码

# xml - 如何在 VBA 或 Visual Studio 中将 TXT 转换为 XML？

> ID：14774409
> 
> 赞同：0
> 
> 时间：2013-02-08T14:10:13.960
> 
> 标签：xml, parsing, vba, excel

VBA 或 Visual Studio 中是否有任何代码可以将 txt 文件转换为 xml。

我需要将带有列的简单 txt 文件解析为 XML 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:17:16.683

使用`Text to Columns`功能区的`Data`功能将分隔文本转换为列。

这篇文章[http://office.microsoft.com/en-gb/excel-help/create-an-xml-data-file-and-xml-schema-file-from-worksheet-data-HA010342365.aspx](http://office.microsoft.com/en-gb/excel-help/create-an-xml-data-file-and-xml-schema-file-from-worksheet-data-HA010342365.aspx)概述了从 Excel 工作表中保存 XML 的过程。

# php - 地图左上角，不居中

> ID：14774421
> 
> 赞同：0
> 
> 时间：2013-02-08T14:10:56.710
> 
> 标签：php, javascript, google-maps, google-maps-api-2

当我单击添加标记时，标记位于地图的左上角而不是中心。

我知道我正在开发 V2，但我需要它来工作，这样我才能让自己有时间弄清楚 V3。

有人可以帮我解决这个问题吗？

已经尝试过：map.setCenter() 在不同的地方，但没有任何效果。

这是主要脚本：

```
<script
    src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=false&amp;key=<?php echo $this->params->get('map_api_key');?>"

    type="text/javascript"></script>
<script type="text/javascript">
//<!--

    var map;
    var marker;
    var markeradded=false;
    var markerfixed=false;
    var current_point;
    var catIcon;

    function initialize() 
    {
      if (GBrowserIsCompatible())
      {
        map = new GMap2(document.getElementById("map_canvas"),{ size: new GSize(430, 315) });
        map.setUIToDefault();
         map.disableScrollWheelZoom();
        geocoder = new GClientGeocoder();   

    map.checkResize()

      }
    }

    window.addEvent('domready',function()

    {

        initialize();
        //var mapSlider = new Fx.Slide('gb_maplocator', {duration: 1000});
        var mapSlider = document.getElementById('gb_maplocator');
        //var mapSlider = $('gb_maplocator');

        <?php if( $this->data->published==0){?>
            mapSlider.style.visibility = 'hidden';
            mapSlider.style.height = '0px';
            mapSlider.style.overflow = 'hidden';   
        <?php } ?>

        $$('.gb_map_controls').addEvent('click',function(){
            if(this.getProperty('value')==1)
            {
                mapSlider.style.visibility = 'visible';   
                mapSlider.style.height = 'auto';

            }
            else if(this.getProperty('value')==0)
            {
                mapSlider.style.visibility = 'hidden';
                mapSlider.style.height = '0px';
                mapSlider.style.overflow = 'hidden';   
            }
        });

        $('btnAddtomap').addEvent('click',
            function(e) {           
                $('map_level').value=map.getZoom();         
                $('map_glat').value=current_point.lat();
                $('map_glng').value=current_point.lng();
        });

        GEvent.addListener(map, "zoomend",
            function(oldlevel,newlevel) {                   
                $('map_level').value=newlevel;
        });

        GEvent.addListener(map, "dragend",
            function() {                    
                current_point=map.getCenter();
        });

        <?php 
        if( $this->pin->map_image )
        {
        ?>
            catIcon = new GIcon();              
            catIcon.image = '<?php echo JUri::root().$this->pin->map_image.".".$this->pin->extension;?>';
            catIcon.shadow = '<?php echo JUri::root().$this->pin->shadow_image.".".$this->pin->extension;?>';           
            //catIcon.iconSize = new GSize(25.0, 32.0);
            //catIcon.shadowSize = new GSize(42.0, 32.0);
            catIcon.iconAnchor = new GPoint(12.0, 16.0);
            catIcon.infoWindowAnchor = new GPoint(12.0, 16.0);
            map.disableScrollWheelZoom();

        <?php
        }
        if(abs($this->data->glat)==0&&abs($this->data->glng)==0)
          {
            $country=$mainframe->getUserState($option."countrytitle");
            $region=$mainframe->getUserState($option."regiontitle");

            $address= array();
            if($region!= JText::_('ALL') && !empty($region)){
                $address[]=$region;
            } 

            if($country!= JText::_('ALL') && !empty($country)){
                $address[]=$country;
            } 
            array_filter ($address);

            if(count($address)>0)
            {
            ?>
                showAddress('<?php echo implode(',',$address)?>');
            <?php
            }
            else
            {
            ?>          
                showAddress('<?php echo $this->params->get('map_default_address','Brisbane, Australia');?>');
            <?php
            }
        }
        else
        {
            if( ! $this->pin->map_image && $this->data->map_image )
            {
            ?>
                catIcon = new GIcon();
                catIcon.image = '<?php echo JUri::root().$this->data->map_image.".".$this->data->extension;?>';
                catIcon.shadow = '<?php echo JUri::root().$this->data->shadow_image.".".$this->data->extension;?>';
                //catIcon.iconSize = new GSize(25.0, 32.0);
                //catIcon.shadowSize = new GSize(42.0, 32.0);
                catIcon.iconAnchor = new GPoint(12.0, 16.0);
                catIcon.infoWindowAnchor = new GPoint(12.0, 16.0);

            <?php }?>

            current_point=new GLatLng(<?php echo $this->data->glat;?>,<?php echo $this->data->glng;?>);
            map.setCenter(current_point,<?php echo $this->data->level;?>);
            marker = new GMarker(current_point,{icon:catIcon,draggable:true});

            GEvent.addListener(marker, "dragend",
                function(latlng) {
                    current_point = latlng;
                    $('map_level').value=map.getZoom();
                    $('map_glat').value=latlng.lat();
                    $('map_glng').value=latlng.lng();

            });

            marker.disableDragging();
            map.addOverlay(marker);
            checkResize() 

            markeradded=true;
            markerfixed=true;
            $('addMarkerButton').disabled=true;
            $('addMarkerButton').setHTML("<?php echo JText::_('REMOVE_MARKER');?>");
            $('fixMarkerButton').setHTML("<?php echo JText::_('UNFIX_MARKER');?>");
            $('map_level').value=map.getZoom();         
            $('map_glat').value=current_point.lat();
            $('map_glng').value=current_point.lng();
            <?php if($this->data->published==0){?>

                mapSlider.style.visibility = 'hidden';
                mapSlider.style.height = "0px";
                mapSlider.style.overflow = 'hidden';   
        <?php }?>

            <?php 
        }
        ?>
        if(markeradded)
        {
            $('fixMarkerButton').disabled=false;
        }
        else
        {
            $('fixMarkerButton').disabled=true;
        }
    });

    window.addEvent('unload',function(){GUnload()});
    //-->
    </script>
<div class="gb_madata_publish">

<label><?php echo JText::_('Activeer Google Maps');?>:</label><div  class="gb_madata_publish_control"><?php echo $this->lists['status'];?></div>
</div>

<div class="gb_map_locator" id="gb_maplocator">
<a id="btnAddtomap"><?php echo JText::_('LOCATE_ADDRESS_TO_MAP');?></a>
<fieldset class="adminform"><input type="hidden" name="glat"
    id="map_glat" /> <input type="hidden" name="glng" id="map_glng" /> <input
    type="hidden" name="level" id="map_level" />

<div id="map_canvas" style="width: 430px; height: 315px"><script>checkResize() </script></div>
<br />
<div class="mapbuttons"><a id="addMarkerButton"><?php echo JText::_('ADD_MARKER');?></a>
<a id="fixMarkerButton"><?php echo JText::_('FIX_MARKER');?></a></div>
</fieldset>

</div>
<?php
}
?> 
```

这是包含的 JavaScript 文件：

```
/**
 * Map controller buttons
 * 
 */

window.addEvent('domready', function() {

        var country_id  = '';
        var region_id   = '';       
        var address1    = '';
        var address2    = '';

                    $('btnAddtomap')
                            .addEvent(
                                    'click',
                                    function(e) {
                                        e = new Event(e);
                                        e.stop();
                                        if($('address1')== undefined && $('address2')== undefined) return false;
                                        if($('country_id')!= undefined) country_id= $('country_id').value;
                                        if($('region_id')!= undefined) region_id= $('region_id').value;
                                        if($('address1')!= undefined) address1= $('address1').value;
                                        if($('address2')!= undefined) address2= $('address2').value;

                                        url = 'index.php?option=com_listbingo&format=raw&task=addons.map.admin.loadadd&cid='
                                                + country_id
                                                + '&region_id='
                                                + region_id;
                                        url += '&street=' + address2
                                                + '&address='
                                                + address1;

                                        req = new Ajax(url, {
                                            onComplete :showAddress,
                                            method :'get',
                                            evalscript :true
                                        });

                                        req.request();
setCenter()
                                    });

                    $('addMarkerButton').addEvent(
                            'click',
                            function(e) {
                                e = new Event(e);
                                e.stop();

                                if (!markeradded) {

                                    marker = new GMarker(current_point, { icon:catIcon,
                                        draggable :true
                                    });

                                    $('map_level').value=map.getZoom();
                                    $('map_glat').value=(0);
                                    $('map_glng').value=(0);

                                    map.addOverlay(marker);
                                    marker.enableDragging();

                                }

                            });

                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:56:11.817

完成，我通过不使用隐藏的 div 解决了它。

# php - 我应该用什么将图像保存在数据库中

> ID：14774425
> 
> 赞同：1
> 
> 时间：2013-02-08T14:11:09.280
> 
> 标签：php, mysql

我应该使用什么将图像保存在数据库中。我必须使用什么类型在 PHP 和 MySQL 中存储和检索图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T14:17:52.890

经验法则是您不应该将图像存储在数据库中。Blob 可用，但非常糟糕。

您应该做的是将二进制文件存储在比数据库快很多倍的文件系统上，并且在数据库中只存储路径或链接或文件名，并让应用程序从路径加载图像。

这使您可以轻松地为静态文件实现 cdn 或 san 存储等内容。它甚至允许您使用 lighttpd 之类的东西来显示静态内容图像，而不是 apache。

[https://blogs.oracle.com/manveen/entry/blob_vs_file_system_storage](https://blogs.oracle.com/manveen/entry/blob_vs_file_system_storage)提供了更多信息，但网络上有大量关于 blob 缺点的统计数据和数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:12:58.743

使用`BLOB`数据类型，这意味着*二进制大对象*

*   [斑点](http://dev.mysql.com/doc/refman/5.0/en/blob.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:27:19.517

BLOB 可能比文件存储慢，但复制、备份和恢复单个数据库文件比管理/维护文件结构中的图像要容易得多。

我还建议将图像存储在他们自己的专用数据库中（将属性/标签信息存储在单独的数据库中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:30:27.023

简单且优化的选项是将图像上传到服务器并将“图像的url”字符串存储在数据库中。

Incase，您只想存储实际的图像文件，然后使用 Blob 数据类型。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-08T14:28:23.127

将图像存储在数据库中是一个非常糟糕的主意。数据库决定保存一些信息——不是图像或文件。为此，您有 HDD。
相反，您应该将图像保存在磁盘上并将其文件名保存在数据库中。像那样：

```
$name = uniqid();
file_put_contents($name.".png",$image_data);
mysql_query("INSERT INTO `images` (image) VALUES ('$name.png')") or die(mysql_error()); 
```

如果您真的坚持将图像保存在数据库中，请使用[BLOB](http://dev.mysql.com/doc/refman/5.0/en/blob.html)。

# mysql - 如何在本地机器上创建一个mysql数据库并远程连接到它

> ID：14774429
> 
> 赞同：-2
> 
> 时间：2013-02-08T14:11:14.660
> 
> 标签：mysql

如何在我自己的电脑上创建一个 mysql 数据库并从外部源远程连接到它？

我需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:14:22.367

您可以尝试使用 XAMPP

在这里找到它：http: [//www.apachefriends.org/en/xampp-windows.html](http://www.apachefriends.org/en/xampp-windows.html)

它将让您托管 Mysql 服务器，包括 PHPMyAdmin。如果您打开端口，您可以远程连接到 PHPMyAdmin 并管理您的 Mysql 数据库。

# c# - 如何通过 C# 进程类解析 unc 路径？

> ID：14774432
> 
> 赞同：0
> 
> 时间：2013-02-08T14:11:21.797
> 
> 标签：c#, command-line

我有以下代码片段：

```
 private XDocument CreateXmlForMediaFile(string mediaFilePath)
    {
        var args = string.Format("-f {0} --Output=XML", mediaFilePath);

        var miProcess = new Process
        {
            StartInfo = new ProcessStartInfo()
            {
                Arguments = args,
                FileName = _mediaInfoPath, // path to where MediaInfo.exe is located.
                RedirectStandardOutput = true,
                CreateNoWindow = true,
                UseShellExecute = false
            }
        };
        // create and instantiate a new xdocument that contains our results for the current manifest.
        miProcess.Start();
        var newXDoc = XDocument.Load(miProcess.StandardOutput);

        return newXDoc;
    } 
```

每当

> mediaFilePath = 本地路径 = 返回完整的 xml 文档。
> 
> 例如 C:\temp\input\ABC001.mp3

但

> mediaFilePath = unc 路径，在某处的服务器上 = 返回空的 xml 文档。
> 
> 例如 \\w2k-testharness\SAMI Testdata\CarrierBased\ABC001.mp3

所以基本上我可以告诉这里发生的事情是，当 MediaInfo 通过 c# 中的进程对象启动时，它没有正确解析网络路径，因为当媒体文件是本地的时，会返回一个大的 xml 文档，如果该文件发生如果不是本地的，那么我们会得到一个空的 xml 文档。

最后，我使用 File.Exists(...) 来验证每个文件是否存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:35:28.550

原来这是一个简单的 UNC 路径中的空格案例 - = |

c# 代码是正确的。事实证明，如果您通过应用程序（即 ac# 命令行应用程序）通过 UNC 路径访问网络资源，无论是否内部，并且您的 UNC 路径作为参数传入。***如果路径中有空格，则应将其括在双引号中。***

否则，如果没有双引号，您的路径作为参数或硬编码值传入某处，其中不得有任何空格！否则它将无法正常工作。

# iphone - iOS 6.1 NSDateFormatter 自 iOS 5 以来发生了变化 - 解析失败？

> ID：14774433
> 
> 赞同：2
> 
> 时间：2013-02-08T14:11:30.540
> 
> 标签：iphone, ios, objective-c, ios6, nsdateformatter

我们的 iOS iPhone 应用程序包含这段代码，它在 iOS 5中生成了一个名为**resultDate的有效 NSDate 对象：**

```
 static NSDateFormatter *invariantFmt = nil;
    if (!invariantFmt) {
        invariantFmt = [[NSDateFormatter alloc] init];
        NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
        [invariantFmt setLocale:locale];
        [locale release];
        [invariantFmt setDateStyle:NSDateFormatterShortStyle];
        [invariantFmt setTimeStyle:NSDateFormatterMediumStyle];
    }
    NSDate *resultDate = [invariantFmt dateFromString:@"08/04/2010 10:43:39 AM"]; 
```

升级到 XCode 4.6 和 iOS 6.1 后，该代码现在为 resultDate 提供 nil，因此它们用于解析的内容发生了变化。发行说明没有说明 NSDateFormatter 的变化。Internet 研究仅发现他们*可能*已更改为使用更新的 Unicode UTS 语言环境解析标准。显然他们改变*了一些东西*。在处理完代码并获取一个已知的有效 NSDate 对象并应用相同的 NSDateFormatter 设置来获得一个 NSString 之后，我发现 iOS 6.1 更喜欢这个字符串：@"08/04/2010, 10:43:39 AM"

唯一的区别是日期部分之后的额外逗号。在 iOS 6.1 中使用它会返回一个具有相同上述代码的有效日期。任何人看到这一点并理解为什么会有所不同，或者这是一个好的 Unicode 更改还是 Apple 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:42:09.507

格式样式只能用于将`NSDate`对象转换为文本以显示给用户。在以已知格式解析日期字符串时，您必须使用特定格式，而不是样式。使用`en_US_POSIX`区域设置可确保操作系统不会根据用户偏好（例如 24 小时时间设置）调整您指定的格式。

因此，正如您所怀疑的，您需要删除设置日期和时间样式的两个调用，并将它们替换为设置与您需要解析的已知日期/时间字符串匹配的特定格式的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:56:58.123

通常，您不应将格式化的日期输出到文件中，然后再将其解析回来。
日期应存储为长值 UTC（有或没有额外的时区偏移）。只有在最后一刻，在将日期可视化到 UI 之前，它应该被格式化并应用本地时间。

这不仅是我的经验，Apple DateFormatting Doku 中也有说明。

# wordpress - 为 wordpress 中的帖子创建不同的 index.php

> ID：14774436
> 
> 赞同：0
> 
> 时间：2013-02-08T14:11:36.157
> 
> 标签：wordpress

我正在开发一个wordpress，其中包括一个用于显示新闻的首页和一个帖子页面。

据我了解，Post Page 使用的模板是 index.php，但 index.php 也被其他页面使用。

问题是我想为帖子创建一个特殊的页面，标题是新闻等，但我不希望其他页面使用该模板。有没有办法创建一个仅用于显示帖子的替代 index.php (index_news.php)？

这样我就可以将 index_news.php 用于帖子，将 index.php 用于其他所有内容。

谢谢

编辑 //////////

我的第一个选择是创建一个包含循环的新页面模板（news.php），然后在 wordpress 选项中，将帖子定位到该新页面（news.php）。

但是当我这样做时，它会加载 index.php 而不是 news.php 模板。也许是循环有问题。这是我正在使用的循环：

```
<!-- Start the Loop. --> 
```

```
<div class="post">
    <!-- Display the Title as a link to the Post's permalink. -->
    <h2><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></h2>

     <!-- Display the date (November 16th, 2009 format) and a link to other posts by this posts author. -->
     <small><?php the_time('F jS, Y') ?> by <?php the_author_posts_link() ?></small>

     <!-- Display the Post's content in a div box. -->
     <div class="entry">
       <?php the_content(); ?>
     </div>

     <!-- Display a comma separated list of the Post's Categories. -->
     <p class="postmetadata">Posted in <?php the_category(', '); ?></p>
</div> <!-- closes the first div box -->

 <!-- Stop The Loop (but note the "else:" - see next line). -->
 <?php endwhile; else: ?>

 <!-- The very first "if" tested to see if there were any Posts to -->
 <!-- display.  This "else" part tells what do if there weren't any. -->
 <p>Sorry, no posts matched your criteria.</p>

 <!-- REALLY stop The Loop. --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:40:33.960

single.php - 用于一个帖子视图，但如果您想修改博客索引，您还可以创建一个自定义模板（page-news.php），其标题允许将其作为页面模板分隔：

```
<?php
/*
 * Template Name: News Page
 * @package WordPress
 */
?> 
```

然后在其中使用循环。但是对于这种情况，我认为更好，您可以修改 header.php 并使用 wordpress 条件标签，例如：is_front_page()、is_page() 或任何适合您的标签：http: [//codex.wordpress.org/ Conditional_Tags](http://codex.wordpress.org/Conditional_Tags)

有很多方法可以做到这一点；）。

# xna - Pix，我不明白的几个问题

> ID：14774438
> 
> 赞同：4
> 
> 时间：2013-02-08T14:11:51.150
> 
> 标签：xna, shader, hlsl

我被要求拆分我在这里提出的问题：

[HLSL 和 Pix 问题数](https://stackoverflow.com/questions/14763278/hlsl-and-pix-number-of-questions)

我认为两个和三个都适合同一个问题，因为一个解决方案可能有助于解决另一个问题。我正在尝试调试着色器，但似乎遇到了问题。首先，当我运行分析模式时，Pix 似乎跳过了大量代码。这是分析 F12 捕获和关闭 D3DX 分析的实验。我在使用 XNA 时必须将其关闭。有问题的着色器代码如下：

```
float4 PixelShaderFunction(float2 OriginalUV : TEXCOORD0) : COLOR0
{   

    // Get the depth buffer value at this pixel.  
    float4 color = float4 (0, 0,0,0);
    float4 finalColor = float4(0,0,0,0);

    float zOverW = tex2D(mySampler, OriginalUV);  
    // H is the viewport position at this pixel in the range -1 to 1\.  
    float4 H = float4(OriginalUV.x * 2 - 1, (1 - OriginalUV.y) * 2 - 1,  
    zOverW, 1);  
    // Transform by the view-projection inverse.  
    float4 D = mul(H, xViewProjectionInverseMatrix);  
    // Divide by w to get the world position.  
    float4 worldPos = D / D.w;  

    // Current viewport position  
    float4 currentPos = H;  
    // Use the world position, and transform by the previous view-  
    // projection matrix.  
    float4 previousPos = mul(worldPos, xPreviousViewProjectionMatrix);  
    // Convert to nonhomogeneous points [-1,1] by dividing by w.  
    previousPos /= previousPos.w;  
    // Use this frame's position and last frame's to compute the pixel  
       // velocity.  
    float2 velocity = (currentPos - previousPos)/2.f;  

    // Get the initial color at this pixel.  
    color = tex2D(sceneSampler, OriginalUV);  
    OriginalUV += velocity;  
    for(int i = 1; i < 1; ++i, OriginalUV += velocity)  
    {  
        // Sample the color buffer along the velocity vector.  
        float4 currentColor = tex2D(sceneSampler, OriginalUV);  
        // Add the current color to our color sum.  
        color += currentColor;  
    } 
    // Average all of the samples to get the final blur color.  
    finalColor = color / xNumSamples;  

    return finalColor;
} 
```

使用捕获的帧并在调试像素时，我只能看到两行工作。它们是 color = tex2D(sceneSampler, OriginalUV) 和 finalColor = color / xNumSamples。Pix 的其余部分只是跳过或不做。

我也可以使用 Pix 进行实时调试吗？我想知道这种方法是否会揭示更多信息。

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:34:29.430

看起来大部分着色器代码都被优化了（没有编译，因为它不相关）。

最后，所有与它的返回值有关的`finalColor`东西都是用`color`and设置的`xNumSamples`。

```
// Average all of the samples to get the final blur color.  
finalColor = color / xNumSamples; 
```

我不确定在哪里`xNumSamples`设置，但你可以看到唯一重要的行`color`是`color = tex2D(sceneSampler, OriginalUV);`（因此它没有被删除）。

之前的每一行都无关紧要，因为它将被该行覆盖。

接下来的唯一一点是 for 循环：

```
for(int i = 1; i < 1; ++i, OriginalUV += velocity) 
```

但这永远不会执行，因为`i < 1`从一开始就是错误的（我被分配了一个起始值 1）。

希望有帮助！

* * *

要回答您的第二个问题，我相信要实时调试着色器，您需要使用 Nvidia 的[FX Composer](https://developer.nvidia.com/fx-composer)和[Shader Debugger](https://developer.nvidia.com/nv-shader-debugger)之类的东西。但是，这些在您的游戏之外运行，因此结果并不总是有用的。

# ruby - 在 Ruby 中生成字母数字序列

> ID：14774439
> 
> 赞同：6
> 
> 时间：2013-02-08T14:11:51.173
> 
> 标签：ruby, string

我将如何生成一个连续的字母数字字符串？

每个字符串只能是 8 个字符。

每个位置可能的字符是：

```
["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "B", "C", "D", "F", "G", "H", "J", "K", "L", "M", "N", "P", "Q", "R", "S", "T", "V", "W", "X", "Y", "Z"] 
```

另外，如果可能的话，我想选择序列的起点。

例如：

```
00000001
00000002
00000003
00000005
...
0000L3FH
0000L3FJ
0000L3FK
0000L3FL
0000L3FM
0000L3FN
0000L3FP
...
0000L4FP
0000L4FQ
0000L4FR
0000L4FS
...
0000M000
0000M001
0000M002 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T14:25:31.940

那是重复的排列。数组可以开箱即用地做到这一点。

```
chars = %w(0 1 2 B C)
sequencer = chars.repeated_permutation(chars.size) #OP:replace chars.size by 8
10.times{p sequencer.next}
#["0", "0", "0", "0", "0"]
#["0", "0", "0", "0", "1"]
#["0", "0", "0", "0", "2"]
#["0", "0", "0", "0", "B"]
#["0", "0", "0", "0", "C"]
#["0", "0", "0", "1", "0"]
#["0", "0", "0", "1", "1"]
#["0", "0", "0", "1", "2"]
#["0", "0", "0", "1", "B"]
#["0", "0", "0", "1", "C"]

p sequencer.next
#["0", "0", "0", "2", "0"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:49:14.917

这允许设置起点：

```
dial = %w(0 1 2 A B)
start_position = %w(A B 0) #for instance.

p clock = start_position.map{|char| dial.rotate(dial.index(char))}
#[["A","B","0","1","2"], ["B","0","1","2","A"], ["0","1","2","A","B"]]

# start ticking:
clock.shift.product(*clock){|tick|p tick}
#["A", "B", "0"]
#["A", "B", "1"]
#["A", "B", "2"]
#["A", "B", "A"]
#["A", "B", "B"]
#["A", "0", "0"]
#... 
```

# c# - EF5 Code First Cascade 删除

> ID：14774444
> 
> 赞同：2
> 
> 时间：2013-02-08T14:12:13.590
> 
> 标签：c#, entity-framework

当我删除计算机时，有什么方法可以在删除时发生级联？基本上，当我删除一台计算机时，我希望它删除实例及其除环境和产品之外的所有引用。

计算机实体：

```
public class Computer
{
    [Key]
    public int Id { get; set; }

    public string IpAddress { get; set; }

    public string Name { get; set; }

    public string UserFriendlyName { get; set; }

    public string Description { get; set; }
} 
```

实例实体：

```
 public class Instance
{
    public Instance()
    {
        TestResults = new HashSet<TestResult>();
        Environments = new HashSet<Environment>();
    }

    [Key]
    public int Id { get; set; }

    public string Name { get; set; }

    public string Version { get; set; }

    public string UserFriendlyName { get; set; }

    public virtual Product Product { get; set; }

    public virtual Profile LastKnownProfile { get; set; }

    public virtual Computer Computer { get; set; }

    public virtual ICollection<TestResult> TestResults { get; set; }

    public virtual ICollection<Environment> Environments { get; set; } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:30:25.230

您需要使用 Fluent API 定义关系。使用这样的东西：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
  modelBuilder.Entity<Computer>()
                .HasRequired(x => x.Instance)
                .WithRequiredPrincipal(x => x.Computer)
                .WillCascadeOnDelete();

  modelBuilder.Entity<Instance>()
                .HasRequired(x => x.LastKnownProfile)
                .WithRequiredPrincipal(x => x.Instance)
                .WillCascadeOnDelete();

  modelBuilder.Entity<Instance>()
                .HasMany(x => x.TestResults)
                .WithOptional(x => x.Instance)
                .WillCascadeOnDelete();
} 
```

这在 MSDN 上有很好的记录：[使用 Fluent API 配置关系](http://msdn.microsoft.com/en-us/data/jj591620)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:20:11.677

检查多对多关系。正在关闭状态的级联删除并手动删除相关记录

# iphone - 音频的循环数

> ID：14774450
> 
> 赞同：1
> 
> 时间：2013-02-08T14:12:35.443
> 
> 标签：iphone, objective-c, ios6, xcode4.5

当第一次点击重复按钮时，它应该运行无限次，当第二次点击它时，它不应该重复音频，而是应该停止循环。. 下面是它第一次运行良好的代码，但是当再次按下它时，它并没有停止循环。

```
BOOL isFirstTime;

@interface English : UIViewController <UITextViewDelegate, ADBannerViewDelegate, UIScrollViewDelegate,

-(void) RepeatAction:(id)sender{

if(isFirstTime == YES){

     player.numberOfLoops = -1;

} else {

    player.numberOfLoops = 0;
}

}

- (void)playAction:(id)sender
{
    if([player isPlaying])
    {
        [sender setImage:[UIImage imageNamed:@"1play.png"] forState:UIControlStateSelected];
        [player pause];

    }else{
        [sender setImage:[UIImage imageNamed:@"audiopause.png"] forState:UIControlStateNormal];
        [player play];
        slidertimer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(updateProgressBar:) userInfo:nil repeats:YES];

        [[NSRunLoop mainRunLoop] addTimer:slidertimer forMode:NSRunLoopCommonModes];
        timer = slidertimer;

    }} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:35:33.487

```
-(void) RepeatAction:(id)sender{
    if(isFirstTime){  // even here you need not to compare with == YES
         player.numberOfLoops = -1;
         isFirstTime = NO;
    } else {
        player.numberOfLoops = 0;
        isFirstTime = YES;
    }
} 
```

# clojure - lein-ring 插件抛出异常

> ID：14774454
> 
> 赞同：0
> 
> 时间：2013-02-08T14:12:55.533
> 
> 标签：clojure, leiningen

我正在尝试使用 lein-ring 插件。安装插件后，任何尝试发出 aa lein ring 命令都会产生

java.lang.ClassNotFoundException: javax.xml.stream.XMLInputFactory

我正在使用 leiningen 1.7.1 和 java 版本 1.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:07:08.463

XML 流 API 直到 Java 6 才包含在标准 JRE 中。您有几个选择：

*   升级到 Java 6+
*   [在此处](http://sjsxp.java.net/)下载 JSR173 API
*   添加`[javax.xml/jsr173 "1.0"]`到您的 Leiningen 依赖项

# ruby-on-rails - 为什么 .Net MVC 架构与 Rails 相比过于复杂？

> ID：14774458
> 
> 赞同：9
> 
> 时间：2013-02-08T14:12:58.493
> 
> 标签：ruby-on-rails, asp.net-mvc, architecture

*注意：这远不是关于 x 比 x 更好的帖子。很高兴不要去那里。*

我是一个 .Net 人，而且一直都是，我从早期版本 2 Beta 开始使用 MVC 框架，之后的每个版本。在过去的几个月里，我一直在搞乱 Rails，我有一个关于架构的问题，这两个平台之间似乎有很大的不同。（基于社区和 SO 等网站上的问题）

在 .Net MVC 中，我们被鼓励分离关注点，创建单独的项目来处理数据访问、业务逻辑和视图，我们还被告知我们应该在数据对象到达视图之前将它们转换为 ViewModel 等

在 Rails 中，事情似乎更简单，我们有一个包含验证、数据访问（通过活动记录）和其他逻辑属性的对象，我们只需将其发送到视图并显示它。

那么为什么在一个框架中这种方法是可以接受的，而在另一个框架中它被认为是错误的，我们最终都会编写更多代码并创建更多文件。

注意：我不是 Rails 专家，我真的不想比较哪个比 x 更好，我正在研究这 2 个框架的高级架构，并找出其中一个框架可以接受的内容，而另一个框架不能接受。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T14:19:38.537

这取决于您正在开发什么类型的应用程序以及您期望它增长多少。

对于琐碎的应用程序，无需使用不同的视图和域模型使事情复杂化（但您可能想要使用单独的视图模型和实体：http: [//blog.gauffin.org/2011/07/three-reasons-to-why -你应该使用视图模型/](http://blog.gauffin.org/2011/07/three-reasons-to-why-you-should-use-view-models/)）。

对于 CRUD 应用程序，您不必将数据访问封装在诸如存储库模式之类的抽象中。

但是，如果您希望编写除琐碎或 CRUD 应用程序之外的任何内容，我鼓励您这样做。模式和原则会在您想要开始维护应用程序的那一天帮助您。您将获得更小更明确定义的类，并且业务逻辑在一个地方而不是整个应用程序中创建。

我写了一篇关于我为什么使用抽象的小博客文章：http: [//blog.gauffin.org/2013/01/data-layer-the-right-way/](http://blog.gauffin.org/2013/01/data-layer-the-right-way/)

以及为什么封装很重要：http: [//blog.gauffin.org/2012/06/protect-your-data/](http://blog.gauffin.org/2012/06/protect-your-data/)

# jquery - 存储价值然后添加下一个搜索jquery

> ID：14774460
> 
> 赞同：0
> 
> 时间：2013-02-08T14:12:58.313
> 
> 标签：jquery, arrays

我想在本地存储搜索结果的值，然后添加现有结果。

```
function filterProd(filter) {
    var f = ".f_" + filter;
    if ($.inArray(f, filters) > -1) filters = $.grep(filters, function (val) {
        return val != f;
    });
    else filters.push(f);

    if (filters.length == 0) {
        $(".f_all").show(); // show all products
        $("#filtered").hide(); // hide reset button
        return;
    } else {
        $("#filtered").show(); // show reset button
    }

    $(".f_all").hide(); // first hide all products
    $(filters.join("")).show(); // show products only for this category
} 
```

想做联合代替拦截。

[JSfiddle](http://jsfiddle.net/kuldeep/tLQFp/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:24:48.073

I believe all you need to do is change this

```
$(filters.join("")).show(); 
```

to

```
$(filters.join(",")).show(); 
```

This way instead of `.class1.class2.class3...` you get `.class1,.class2...`

# opengl - openGL 使用 glVertexAttribPointer

> ID：14774465
> 
> 赞同：0
> 
> 时间：2013-02-08T14:13:19.497
> 
> 标签：opengl, graphics, textures, shader, fragment-shader

所以我使用 glBegin(GL_QUADS) 创建了一个四边形，然后绘制顶点，现在我想将纹理坐标数组传递到我的着色器中，以便我可以将纹理应用于我的四边形。

所以我在语法正确时遇到了一些麻烦。

首先，我制作了一个二维数组值

```
GLfloat coords[4][2];
coords[0][0] = 0;
coords[0][1] = 0;
coords[1][0] = 1;
coords[1][1] = 0;
coords[2][0] = 1;
coords[2][1] = 1;
coords[3][0] = 0;
coords[3][1] = 1; 
```

然后我尝试将它放入我的着色器中，其中我有一个属性 vec2 texcoordIn

```
GLint texcoord = glGetAttribLocation(shader->programID(), "texcoordIn");
glEnableVertexAttribArray(texcoord);
glVertexAttribPointer(texcoord, ???, GL_FLOAT, ???, ???, coords); 
```

所以我很困惑我应该为我标记为'???'的glVertexAttribPointer的参数输入什么 而且我还想知道是否允许我将纹理坐标表示为二维数组，就像我最初所做的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:25:09.640

正确的值是

```
glVertexAttribPointer(
 texcoord,
 2, /* two components per element */
 GL_FLOAT,
 GL_FALSE, /* don't normalize, has no effect for floats */
 0, /* distance between elements in sizeof(char), or 0 if tightly packed */
 coords); 
```

> 而且我还想知道是否允许我将纹理坐标表示为二维数组，就像我最初所做的那样。

如果您按照上面的方式编写它，即使用静态分配的数组，那么是的，因为 C 标准断言元素将紧密地打包在内存中。但是，如果使用动态分配的指针数组，则不会。

# php - PHP Include() 问题

> ID：14774467
> 
> 赞同：0
> 
> 时间：2013-02-08T14:13:25.303
> 
> 标签：php

我有三个文件，如下所示

1.  用户.php
2.  授权文件
3.  主文件

where`users.php`位于目录的根目录`/`。auth 并且`main.php`位于测试文件夹 example `/test/auth.php`&`/test/main.php`中。

`Users.php`包含以下 php 代码。

```
<?php 
include('test/main.php');
?> 
```

`auth.php`包含以下 php 代码。

```
<?php 
include('../test/main.php');
?> 
```

main.php 代码

```
<?php
include('test/db.php');
?> 
```

我在哪里执行`users.php`它工作得很好但是当我执行时`users.php`位于根文件夹中的输出给我完美的输出但是如果我正在执行`/test/auth.php`

```
Warning: include(test/db.php) [function.include]: failed to open stream: No such file or directory in /path/db.php on line 2 
```

`auth.php` 是否有任何解决方案可以通过正确的功能访问错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:17:17.233

我很难理解你的问题。我*认为*您的文件结构如下所示：

*   `users.php`
*   `test`（文件夹）
    *   `main.php`
    *   `auth.php`
    *   `db.php`

如果是这样，要包含`db.php`from `main.php`，您需要做的就是`include('db.php');`. 当前文件夹自动位于用于确定可能包含哪些文件的路径中。

在`auth.php`，你做`include('../test/main.php');`。这是不必要的，因为您已经在`test`文件夹中。你要做`..`的是摆脱它，然后你直接回到它！您可以使用`include('main.php');`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:23:58.643

包含总是*相对于工作目录*（实际上，相对于*PATH*，工作目录是其中的一部分）。工作目录由*正在执行的脚本决定。*假设你有这个结构：

```
webroot/
    foo.php
    folder/
        bar.php 
```

当您在命令行上运行`foo.php`或通过浏览器访问时，*工作目录*是. 如果运行，工作目录是.`$ php foo.php``localhost/foo.php`*`webroot/``folder/bar.php``webroot/folder`*

 *为确保您包含与所在文件*相关的文件*，请`include`使用以下内容：

```
include __DIR__ . '/folder/bar.php`; 
```

那，或者[更改您的 PATH](http://php.net/manual/en/function.set-include-path.php)以将您的项目根目录添加到其中，并始终包含相对于项目根目录的内容。我更喜欢上面显示的文件相对包含或[自动加载](http://php.net/manual/en/language.oop5.autoload.php)。*

# delphi - 设置 DevExpress Grid Tableview Editable 属性并通过 RTTI 确定其父级

> ID：14774473
> 
> 赞同：0
> 
> 时间：2013-02-08T14:13:37.873
> 
> 标签：delphi, devexpress

我有一个带有多个 TcxGrids 的项目。我的项目中网格的类层次结构如下：

TForm->TPanel->TcxPageControl->TcxTabSheet(子类)->TcxGrid->TcxGridLevel->TcxGridDBBandedTableView

在我的子类 TcxTabSheet 中，我添加了一个新属性“ReadOnly”，当 set 循环遍历 tabsheets 控件并将它们分别设置为启用/禁用时。

当 TcxGrid 控件启用属性设置为 true 时，用户根本无法再与网格交互（包括导航）。

看来我需要在 TcxGridDBBandedTableView 上设置 OptionsData.Editing 属性以实现只读但仍可导航的网格控件。

很简单，直到您考虑到我想以松散耦合的方式执行此操作，我认为这让我可以选择 RTTI。

我编写了以下循环遍历表单控件的代码（循环遍历选项卡控件或组件不会让我访问 TcxGridDBBandedTableView）。找到控件后，我可以通过 RTTI 设置其编辑属性。我似乎无法确定 TcxGridDBBandedTableView 是否属于它所在的 TabSheet。

```
var
  compIdx: Integer;
begin
  for compIdx := 0 to Pred(ComponentCount) do
    if (Components[compIdx].ClassNameIs('TcxGridDBBandedTableView')) then
      SetOrdProp(GetObjectProp(Components[compIdx], 'OptionsData'), 'Editing', Ord(not FReadOnly));
end; 
```

TL; DR 如何确定 cxgrid 所在的 pagectrl 选项卡并设置其 TableView.OptionsData.Editable 属性，而无需将任何 devexpress 单元添加到单元的使用子句中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:45:42.190

您正在迭代表单拥有的组件。我认为这是错误的做法。您应该查看父/子关系而不是所有权。尤其是因为表单完全有可能包含它不拥有的控件。因此，您的方法可能无法找到控件，尤其是动态创建的控件。

所以，如果你有一个标签页（或者任何窗口控件），你可以像这样遍历它的子元素：

```
for i := 0 to TabSheet.ControlCount-1 do
  DoSomething(TabSheet.Controls[i]); 
```

如果您的目标网格控件是选项卡的直接后代，那么这就足够了。如果它在层次结构中不止一层，那么您将需要一个递归解决方案。我将把这个递归解决方案留给你作为练习。

假设您有一个控件并且想要找到它所在的选项卡表，那么您需要沿着父链向上走。像这样：

```
function GetParentOfClass(Control: TControl; AClass: TWinControlClass): TWinControl;
var
  Control: TWinControl;
begin
  while Assigned(Control) and not (Control is AClass) do
    Control := Control.Parent;
  Result := TWinControl(Control);
end; 
```

# php - 执行不区分重音的全文搜索 MySQL

> ID：14774474
> 
> 赞同：1
> 
> 时间：2013-02-08T14:13:37.750
> 
> 标签：php, mysql, utf-8, full-text-search, diacritics

我目前正在为网站开发搜索功能。用户按名称搜索其他用户。对于名字上有口音的用户，我很难获得好的结果。

我在名称列上有一个 FULLTEXT 索引，表的排序规则是 utf8_general_ci。

目前，如果有人注册该站点，并且名称带有重音符号（例如：Alberto Andrés），则该名称将存储在 DB 中，如下图所示：

![阿尔贝托·安德烈斯](../Images/9c11a31f95a2923843b328b16c1317f7.png)

因此，如果我执行以下查询`SELECT * MATCH(name) AGAINST('alberto andres')`，我会得到很多匹配分数更高的结果，例如“Alberto”、“Andres”、“Andrés”，最后匹配分数较低，用户可能正在寻找“Alberto Andrés”的记录。

我可以做些什么来考虑重音记录当前存储在数据库中的方式？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:41:08.127

在我看来，el Señor Andrés 的姓氏实际上存储正确。您向我们展示的渲染是一些非 UTF 应用程序处理 UTF8 文本的方式。

如果您的表中还没有一大堆记录，您可以尝试对查询进行这种修改。全文（非布尔）模式在小型数据集上工作异常。

```
SELECT *  
  FROM TABLE
WHERE MATCH(name) AGAINST('alberto andres' IN BOOLEAN MODE) 
```

你也可以试试

```
SELECT *  
  FROM TABLE
WHERE MATCH(name) AGAINST(CONVERT('alberto andres' USING utf8)) 
```

只是为了确保您的匹配字符串与您的 MySQL 列使用相同的字符集。

# sql-server-2005 - SQL Server 2005 数据类型 - 努力让视图使用当前数据类型

> ID：14774478
> 
> 赞同：0
> 
> 时间：2013-02-08T14:13:54.620
> 
> 标签：sql-server-2005, sqldatatypes

我正在为手机创建一个新数据库。它包含很多关于手机、sim 卡等的信息。我正在努力将表格中的信息转换为视图。我做了一些测试，但总是在某些列上收到错误。例如，其中一个字段是您都知道的 sim 卡号，它是一个长号。我曾尝试将此数字设为 bigint、varchar 和 nvarchar，但总是收到一条错误消息，提示“varchar 值 'value' 的转换已溢出 int 列。超出最大整数值”。

我对数据库有相当的了解，但由于某种原因，我似乎无法为这些字段找到正确的数据类型。如果在这方面有更多经验的人可以帮助我，将不胜感激。

提前致谢。

```
SELECT dbo.Sims.Number, 
  dbo.Sims.ACCOLC, 
  dbo.Users.Title, 
  dbo.Users.Name, 
  dbo.Users.Section, 
  dbo.Users.Directorate, 
  dbo.UserHistory.StartDate, 
  dbo.UserHistory.EndDate, 
  dbo.Users.Codes
FROM dbo.UserHistory 
INNER JOIN dbo.Users 
  ON dbo.UserHistory.[User] = dbo.Users.ID 
INNER JOIN dbo.Sims 
  ON dbo.UserHistory.Number = dbo.Sims.Number 
INNER JOIN dbo.Models 
  ON dbo.UserHistory.Model = dbo.Models.ID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:37:40.147

我可能建议的一件事是检查您是否真的想要`INNER JOIN`在每张桌子之间放置一个。这需要在所有表中匹配行，如果您没有匹配的行，那么您将不会得到结果。

您可能想尝试将`JOIN`类型更改为 a `LEFT JOIN`：

```
SELECT s.Number, 
  s.ACCOLC, 
  u.Title, 
  u.Name, 
  u.Section, 
  u.Directorate, 
  uh.StartDate, 
  uh.EndDate, 
  uh.Codes
FROM dbo.Users u
LEFT JOIN dbo.UserHistory uh
  ON u.ID = uh.[User] 
LEFT JOIN dbo.Sims s
  ON uh.Number = s.Number 
LEFT JOIN dbo.Models m
  ON uh.Model = m.ID 
```

`users`即使其他表中没有匹配的行，此版本也会返回所有内容。

# c# - 字典联合到字典？

> ID：14774480
> 
> 赞同：4
> 
> 时间：2013-02-08T14:14:03.290
> 
> 标签：c#, .net, linq

在我的代码中，我有一行

```
var d3 = d.Union(d2).ToDictionary(s => s.Key, s => s.Value); 
```

这感觉很奇怪，因为我可能会经常这样做。没有`.ToDictionary()`。如何合并字典并将其保留为字典？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var list = new List<Tuple<int, string>>();
            list.Add(new Tuple<int, string>(1, "a"));
            list.Add(new Tuple<int, string>(3, "b"));
            list.Add(new Tuple<int, string>(9, "c"));
            var d = list.ToDictionary(
                s => s.Item1, 
                s => s.Item2);
            list.RemoveAt(2);
            var d2 = list.ToDictionary(
                s => s.Item1,
                s => s.Item2);
            d2[5] = "z";
            var d3 = d.Union(d2).ToDictionary(s => s.Key, s => s.Value);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-08T14:22:43.693

The problem with using the "straight" `Union` is that it does not interpret the dictionaries as dictionaries; it interprets dictionaries as `IEnumerable<KeyValyePair<K,V>>`. That is why you need that final `ToDictionary` step.

If your dictionaries do not have duplicate keys, this should work a little faster:

```
var d3 = d.Concat(d2).ToDictionary(s => s.Key, s => s.Value); 
```

Note that the `Union` method will break too if the two dictionaries contain the same key with different values. `Concat` will break if the dictionaries contain the same key even if it corresponds to the same value.

# sql - Where 声明 w/ Distinct

> ID：14774484
> 
> 赞同：0
> 
> 时间：2013-02-08T14:14:18.460
> 
> 标签：sql, where

我有一张大桌子，但出于这个问题的目的，假设我有以下列结构：

![在此处输入图像描述](../Images/1ea3556dd808a773243a5eea81908ab3.png)

我想要一个 Where 语句，它只返回电子邮件地址在该特定列中不同的行。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:15:48.037

```
SELECT BillingEMail
FROM   tableName
GROUP  BY BillingEMail
HAVING COUNT(BillingEMail) = 1 
```

或者`HAVING COUNT(*) = 1`

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/88b30/2)

我不知道您使用的是什么 RDBMS（*我无法介绍使用分析函数的原因*），但是如果您想获取所有列，可以通过加入子查询来做到这一点

```
SELECT a.*
FROM   tableName a
       INNER JOIN
      (
        SELECT BillingEMail
        FROM   tableName
        GROUP  BY BillingEMail
        HAVING COUNT(BillingEMail) = 1 
      )b ON a.BillingEMail = b.BillingEMail 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/88b30/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T14:17:24.880

在大多数数据库中，您可以这样做

```
select t.AccountId, t.BillingEmail
from (select t.*, count(*) over (partition by BillingEmail) as cnt
      from t
     ) t
where cnt = 1 
```

这种方法的优点是您可以从表中获取任意数量的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:18:22.867

我更喜欢 JW 的方法，但这里是另一种使用 NOT EXISTS 的方法。

```
SELECT AccountID, [Billing Email]
FROM   table t1
WHERE  NOT EXISTS (
    -- Make sure that no other row contains the same
    -- email, but a different Account ID.
    SELECT 1
    FROM   table t2
    WHERE  t1.[Billing Email] = t2.[Billing Email]
    AND    t1.AccountID <> t2.AccountID
) 
```

# javascript - 一起使用 jQuery timeago 或 momentjs 和 AngularJS

> ID：14774486
> 
> 赞同：36
> 
> 时间：2013-02-08T14:14:26.493
> 
> 标签：javascript, jquery, html, angularjs

我想使用[timeago 插件](http://timeago.yarp.com/)让日期看起来更好。问题是这些日期是通过 AngularJS 从 REST 动态获取的。因此，当我将此 jQuery 插件附加到我的页面时，它只是不处理它。

那么，如何更好地做这些事情呢？如果可能的话，我很乐意在没有 jQuery 的情况下运行。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-02-08T14:39:22.127

我会使用 momentjs - [http://momentjs.com/](http://momentjs.com/) - 它没有依赖项。

然后您可以创建一个名为“timeAgo”或“fromNow”的过滤器。您可能应该调用它，`fromNow`因为那是 momentjs 调用它：

```
angular.module('myApp').filter('fromNow', function() {
  return function(date) {
    return moment(date).fromNow();
  }
}); 
```

然后，您只需在视图中使用简单的数据绑定：

```
<p>Pizza arrives {{pizzaArrivalDate | fromNow}}</p> 
```

如果您真的想使用 jQuery 插件，您可能必须编写一个指令。但是这样做很糟糕，因为它将您的数据链接到 DOM 元素。我放在上面的方式将数据从 DOM 中分离出来，这是有角度的方式。它很漂亮:-D

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-10-09T20:30:22.550

您可以使用[angular-moment](https://github.com/urish/angular-moment)模块（基于[Moment.js](https://momentjs.com/)）的`am-time-ago`指令。

它不需要 jQuery，并且时间会随着时间的推移而更新。例子：

```
<span am-time-ago="lastLoginTime"></span> 
```

上述 span 的内容将被替换为相对时间字符串，例如“2 小时前”，并且会随着时间的推移自动更新。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-13T22:14:58.770

moment.js 是最好的选择。我创建了一个通用矩过滤器，允许您使用任何矩格式化方法。

```
angular.module('myApp', [])
  .filter('moment', [
    function () {
      return function (date, method) {
        var momented = moment(date);
        return momented[method].apply(momented, Array.prototype.slice.call(arguments, 2));
      };
    }
  ]); 
```

像这样使用它

```
<div>{{ date | moment:'fromNow' }}</div>
<div>{{ date | moment:'calendar' }}</div> 
```

你可以在这里查看它的实际操作[http://jsfiddle.net/gregwym/7207osvw/](http://jsfiddle.net/gregwym/7207osvw/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-08T14:43:01.443

如果你需要 jQuery，写一个指令/过滤器是要走的路。

```
app.directive("timeAgo", function($compile) {
  return {  
    restrict: "C",
    link: function(scope, element, attrs) {
      jQuery(element).timeago();
    }
  };
});

app.filter("timeAgo", function() {
  return function(date) {
    return jQuery.timeago(date); 
  };
}); 
```

[指令和/或过滤器 (jsbin)](http://jsbin.com/eromij/1/edit)

# cordova - 在关闭phonegap子浏览器上运行功能？

> ID：14774489
> 
> 赞同：0
> 
> 时间：2013-02-08T14:14:37.243
> 
> 标签：cordova, childbrowser

当我在 page1 上的子浏览器中打开一个页面时，我想在关闭它时运行一个函数，它可以工作。但是，当我转到 page2 并在 childbrowser 中打开另一个页面时，它也会在此处运行该功能，我不希望这样。

那么，当我只在 page1 而不是在 page2 上关闭子浏览器时，如何运行函数呢？

当我关闭 CB 时，我在 page1 上使用它来运行该功能。

```
 var apptypen='iPhone';

$(document).ready(function(){

    if (apptypen=='iPhone'){
        alert("apptype iphone");

    window.plugins.childBrowser.onClose=function(){

    jQT.goBack(1);
    window.plugins.childBrowser.onClose = null;
        }
    }
    }); 
```

当我在 page1 上打开 CB 时，它会运行警报并返回 jQT.goBack(1); 功能，但是如果我在 page2 上打开 CB，它不会运行警报，但它确实运行 jQT.goBack，这就是我不想要的。它应该只在我在 page1 上打开 CB 时运行 jQT.goBack，而不是在我在 page2 上的 CB 中打开页面时运行。任何输入表示赞赏，谢谢。解决了，我必须有 window.plugins.childBrowser.onClose = null; 在 jQT.goBack 之后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:21:59.223

您需要注册一个位置更改侦听器。然后，当您移至第 2 页时，您可以设置全局变量或删除关闭侦听器。你的选择。

```
window.plugins.childBrowser.onLocationChange = function(loc) {
    if (loc == "page1.html") {
        window.plugins.childBrowser.onClose = function() {
           alert("close");
        };
    } else if (loc == "page2.html") {
        window.plugins.childBrowser.onClose = null;
    }
}; 
```

# r - 将一个 R 包拆分为两个包，而不会影响用户

> ID：14774493
> 
> 赞同：3
> 
> 时间：2013-02-08T14:14:58.190
> 
> 标签：r, packages

假设我目前正在开发一个名为`mypackage`. 随着时间的推移，许多不同的功能已经登陆那里，我想重新组织它。所以我想创建一个名为的新包`newpackage`，我将在其中移动一些功能`mypackage`（并在以后包含新功能）。

问题是我不希望原始用户在`mypackage`想要`object not found`使用其中一个移动功能时出错。

所以，我想过做以下事情：

*   创建`newpackage`和移动函数
*   添加到`mypackage`说明文件中：`Depends: newpackage`

因此，当人们安装、升级或加载`mypackage`时，`newpackage`也会安装或加载，并且所有功能都将可用。

你认为它会起作用，还是会有一些我没有想到的问题？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:33:11.657

是不是不建议从包中删除功能而不先标记它们要折旧？！因此，也许您按计划进行，但在将它们从`mypackage`. `newpackage`在迁移阶段，您可以使用包的命名空间来按照您的计划引用该功能。

# ruby-on-rails - 耙资产：预编译问题。解析错误

> ID：14774494
> 
> 赞同：1
> 
> 时间：2013-02-08T14:14:59.667
> 
> 标签：ruby-on-rails, deployment

我遇到了一个问题，同时在生产环境中预编译资产。

```
AssetSync: using default configuration from built-in initializer
rake aborted!
Caught Encoding::CompatibilityError at '["ok","/*!\n * jQuery': incompatible encoding regexp match (ASCII-8BIT regexp with UTF-8 string)
  (in /home/rails_work/bunk1_dev/app/assets/javascripts/active_admin.js)
/usr/local/rvm/gems/ruby-1.9.3-p194@bunk1/gems/json_pure-1.7.6/lib/json/pure/parser.rb:242:in `rescue in parse_string'
/usr/local/rvm/gems/ruby-1.9.3-p194@bunk1/gems/json_pure-1.7.6/lib/json/pure/parser.rb:213:in `parse_string'
/usr/local/rvm/gems/ruby-1.9.3-p194@bunk1/gems/json_pure-1.7.6/lib/json/pure/parser.rb:257:in `parse_value'
/usr/local/rvm/gems/ruby-1.9.3-p194@bunk1/gems/json_pure-1.7.6/lib/json/pure/parser.rb:121:in `parse'
/usr/local/rvm/gems/ruby-1.9.3-p194@bunk1/gems/json_pure-1.7.6/lib/json/common.rb:155:in `parse` 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:32:43.817

我已经解决了这个问题，这个问题与 json_pure gem 预编译有关。只需从代码中删除“require 'json/pure'”并应用“require 'json'”。希望答案对其他人有所帮助。

谢谢

# javascript - 将 json 格式变量转换为 javascript 数组

> ID：14774495
> 
> 赞同：0
> 
> 时间：2013-02-08T14:15:01.023
> 
> 标签：javascript, django, arrays, json, string

我正在使用 Django 框架来构建一个网站。

在 Python 文件 (views.py) 中，我向 Javascript 函数发送一个已转换为 json 数据的数组

Python：

```
json_data=[1,2,3]
return HttpResponse(json.dumps(json_data), mimetype='application/json') 
```

然后，在 Javascript 中，我在 html 中显示 json 数据。

JavaScript：

```
function get_variable(){ 

  $.get("/xhr_test/json/", function(json_data) {
    $('.square').append('<p> ' + json_data  + ' </p>');});
}; 
```

到目前为止一切正常。但是，我想将我认为是字符串的“json_data”转换为数组。

我试过这样做：

```
function get_variable(){ 

  $.get("/xhr_test/json/", function(json_data) {
    var array = json_data.split(',');
    $('.square').append('<p> ' + array[0]+ ' </p>');});
}; 
```

不幸的是，这不起作用。

有人可以向我解释如何将“json_data”变量转换为 JavaScript 中的数组吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:27:51.193

“这不起作用”太模糊了......无论如何，如果我理解你的问题，你正在处理一个字符串，而不是一个 JavaScript 数组......你必须评估从 ajax 调用返回的数据：

```
var theJavaScriptArray = eval('(' + json_data + ')'); 
```

或更好...使用**jQuery.ajax**并将 json 指定为 dataType：[jquery doc](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:48:59.290

最后，感谢 Zah，我发现了我不知道它存在的“javascript 控制台”。

我可以看到错误是“json_data”变量不是字符串。

所以这是对我有用的解决方案：

```
function get_variable(){ 
  $.get("/xhr_test/json/", function(json_data) {
    var b=json_data.toString().split(',');
    $('.square').append('<p> ' + b[0]  + ' </p>');
  });
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T14:33:10.307

当您以 JSON 格式发送数据时，它是一个字符串（主要数据），但是一个字符串的格式很容易恢复原始类型的数据（即您的数组）。Javascript 和 jquery 有不同的方法来做到这一点。使用 jQuery，getJSON 可能是最直接的：

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

您可以使用浏览器的 javascript 控制台来查看您的 JS 变量到底是什么样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:51:04.447

jQuery中有一个速记来自动解析json字符串：[jQuery.getJSON()](http://api.jquery.com/jQuery.getJSON/)

```
$.getJSON('/xhr_test/json/', function(data) {
     console.log(data);  // Here data is already a JavaScript object
}); 
```

这与以下内容基本相同：

```
$.ajax({
    url: "/xhr_test/json/",
    dataType: "json",
    success: function(data) {
        console.log(data);  // Here data is already a JavaScript object
    }
}); 
```

这又与以下内容大致相同：

```
$.ajax({
    url: "/xhr_test/json/",
    success: function(data) {
        var json = $.parseJSON(data);  // Here data is a string
        console.log(data);  // And json is JavaScript object
    }
}); 
```

# java - OutOfMemoryError：Java 堆空间

> ID：14774497
> 
> 赞同：0
> 
> 时间：2013-02-08T14:15:05.147
> 
> 标签：java, mysql, csv, out-of-memory

我遇到了 java OutOfMemoryError 的问题。该程序主要查看在 mysql workbench 上运行的 mysql 表，并查询它们以获取某些信息，然后将它们放入 CSV 文件中。

该程序适用于较小的数据集，但是一旦我使用较大的数据集（记录信息的小时数而不是可能的 40 分钟），我就会收到此错误，对我来说，问题来自拥有庞大的数据集以及程序没有很好地处理信息。或者无法以我的方式处理这么多的数据。

将 Java VM 参数设置为 -xmx1024m 适用于稍大的数据集，但我需要它来处理更大的数据集，但它会给出错误。

这是我很确定是某处程序的原因的方法：

```
// CSV is csvwriter (external lib), sment are Statements, rs is a ResultSet
public void pidsforlog() throws IOException
{
    String[] procs;
    int count = 0;
    String temp = "";

    System.out.println("Commence getting PID's out of Log");
    try {
        sment = con.createStatement();
        sment2 = con.createStatement();
        String query1a = "SELECT * FROM log, cpuinfo, memoryinfo";
        rs = sment.executeQuery(query1a);
        procs = new String[countThrough(rs)];

        // SIMPLY GETS UNIQUE PROCESSES OUT OF TABLES AND STORES IN ARRAY
        while (rs.next()) {
            temp = rs.getString("Process");

            if(Arrays.asList(procs).contains(temp)) {
            } else {
                procs[count] = temp;
                count++;
            }
        }

        // BELIEVE THE PROBLEM LIES BELOW HERE. SIZE OF THE RESULTSET TOO BIG?
        for(int i = 0; i < procs.length; i++) {
            if(procs[i] == null) {
            } else {
                String query = "SELECT DISTINCT * FROM log, cpuinfo, memoryinfo WHERE log.Process = " + "'" + procs[i] + "'" + " AND cpuinfo.Process = " + "'" + procs[i] + "'" + " AND memoryinfo.Process = " + "'" + procs[i] + "'  AND log.Timestamp = cpuinfo.Timestamp = memoryinfo.Timestamp";
                System.out.println(query);
                rs = sment.executeQuery(query);

                writer = new CSVWriter(new FileWriter(procs[i] + ".csv"), ',');
                writer.writeAll(rs, true);
                writer.flush();
            }
        }
        writer.close();
    } catch (SQLException e) {
        notify("Error pidslog", e);
    }
}; // end of method 
```

请随时询问您是否需要源代码或更多信息，因为我急于解决这个问题！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:19:37.530

`SELECT * FROM log, cpuinfo, memoryinfo`肯定会给出一个巨大的结果集。它将给出所有 3 个表中所有行的笛卡尔积。

在没有看到表结构（或不知道所需结果）的情况下，很难确定解决方案，但我怀疑您要么想要某种连接条件来限制结果集，要么使用`UNION`a'la;

```
SELECT Process FROM log
UNION
SELECT Process FROM cpuinfo
UNION
SELECT Process FROM memoryinfo 
```

...这只会为您提供`Process`所有 3 个表中的所有不同值。

您的第二条 SQL 语句看起来也有点奇怪；

```
SELECT DISTINCT * 
FROM log, cpuinfo, memoryinfo 
WHERE log.Process = @param1  
  AND cpuinfo.Process = @param1
  AND memoryinfo.Process = @param1
  AND log.Timestamp = cpuinfo.Timestamp = memoryinfo.Timestamp 
```

看起来您正在尝试同时从所有 3 个日志中进行选择，但最终得到了另一个笛卡尔积。你确定你得到了你期望的结果集吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:19:44.613

您可以使用 LIMIT Estatementet 限制 SQL 查询返回的结果。

例如：

```
 SELECT * FROM `your_table` LIMIT 100 
```

这将返回前 100 个结果

```
SELECT * FROM `your_table` LIMIT 100, 200 
```

这将返回 100 到 200 的结果

显然，您可以使用这些值进行迭代，这样无论有多少，您都可以访问数据库中的所有元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:29:43.827

您的 Java 代码正在执行数据库可以更有效地执行的操作。从 query1a 看来，您真正想要的只是独特的流程。`select distinct Process from ...`应该足以做到这一点。

然后，仔细考虑该查询中需要哪些表或哪些表。你真的需要 log、cpuinfo 和 memoryinfo 吗？正如 Joachim Isaksson 所提到的，这将返回这三个表的笛卡尔积，为您提供 x * y * z 行（其中 x、y 和 z 是这三个表中每个表中的行数）和 a + b + c 列（其中 a、b 和 c 是每个表中的列数）。我怀疑那是你想要或需要的。我假设您可以从一个表或三个表的联合（而不是连接）中获取这些独特的进程。

最后，您的第二个循环和查询本质上是在进行连接，这又一次更好、更有效地留给了数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:00:22.033

就像其他人所说，以较小的块获取数据可能会解决问题。这是 stackoverflow 中讨论此问题的其他线程之一： [如何从巨大的表中读取所有行？](https://stackoverflow.com/questions/3682614/jdbc-how-to-read-all-rows-from-huge-table)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T14:19:21.647

我认为您在内存中同时加载了太多数据。尝试在你的 sql 语句中使用`offset`和`limit`，这样你就可以避免这个问题

# localization - 如何使用 Google Closure I18n 获取本国名称？

> ID：14774499
> 
> 赞同：1
> 
> 时间：2013-02-08T14:15:07.250
> 
> 标签：localization, internationalization, google-closure-library

我正在尝试查看是否可以使用 Google Closure 库来满足我的 webapp 的国际化和本地化需求。我试图找到有关该主题的任何教程，但找不到任何教程，而且我自己尝试时似乎被卡住了。

我有兴趣获得一个国家的本地名称。

不过，我不确定应该如何使用 goog.locale 组件。例如，似乎`goog.locale.getNativeCountryName('EE')`总是返回“EE”，而不是我期望的“Eesti”。

```
goog.require('goog.locale');
...
console.log( goog.locale.getNativeCountryName('EE') ) // Outputs: 'EE' 
```

也许我缺少一些依赖项？

编辑：在摆弄了一下之后，我发现如果我使用 et_EE 而不是 EE，我会得到预期的“Eesti”。然而，这似乎是完全错误的。et_EE 是语言环境代码，而不是国家代码，并且该函数显然需要国家代码......也许我仍然做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:45:46.500

`getNativeCountryName()`接收语言代码（在这种情况下`et`）而不是国家代码（`EE`）。请参阅[API 文档](http://closure-library.googlecode.com/svn-history/r27/trunk/closure/goog/docs/closure_goog_locale_locale.js.html)：

> 以本机语言返回所提供**语言代码**的国家/地区名称。

所以：

```
goog.require('goog.locale');
...
console.log( goog.locale.getNativeCountryName('et') ) // Should return 'Eesti' 
```

# android - 如何以编程方式截取活动（游戏）的屏幕截图

> ID：14774507
> 
> 赞同：1
> 
> 时间：2013-02-08T14:15:42.153
> 
> 标签：android

我知道并非所有 Android 设备都可以截屏，但我希望能够以编程方式截取我的用户游戏屏幕的屏幕截图，以便他们可以与朋友等分享。有点像爬山赛车在游戏中所做的。

有谁知道如何做到这一点？我尝试了一些在这里发布的解决方案：

```
// image naming and path  to include sd card  appending name you choose for file
String mPath = Environment.getExternalStorageDirectory().toString() + "/" + ACCUWX.IMAGE_APPEND;   

// create bitmap screen capture
Bitmap bitmap;
View v1 = activity.getCurrentFocus().getRootView();
v1.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(v1.getDrawingCache());
v1.setDrawingCacheEnabled(false);

OutputStream fout = null;
imageFile = new File(mPath);

try {
    fout = new FileOutputStream(imageFile);
    bitmap.compress(Bitmap.CompressFormat.JPEG, 90, fout);
    fout.flush();
    fout.close();

} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

但没有运气。还有其他方法可以做到这一点吗？也许是一种新方法。

编辑：

我在 View v1 = activity.getCurrentFocus().getRootView(); 行得到一个空指针

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T06:50:15.987

试试这个在这个我截取当前布局的屏幕截图并保存在 sdcard 中......

[捕捉屏幕截图](https://stackoverflow.com/questions/7762643/android-take-screen-shot-programatically/20737563#20737563)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T09:53:34.490

利用

> 查看 v1 = getWindow().getDecorView().getRootView();

代替

> 查看 v1 = activity.getCurrentFocus().getRootView();

它不会抛出空指针异常。

享受！！

# c# - Keyboard shortcuts to trigger context menus

> ID：14774513
> 
> 赞同：1
> 
> 时间：2013-02-08T14:16:08.050
> 
> 标签：c#, winforms, keyboard, click, keyboard-shortcuts

I am working on a C# application which consists of some context menus that have an ability to communicate with my website via `WebClient()`. The options work when they are clicked.

Once my app is opened, it stays open in the tray and it doesn't show in the taskbar/toolbar (the bar in the bottom where open programs stay). It's basically a background application that runs continuously.

There is a section in the context menu named **Upload** which includes **Upload from Computer** and **Window screenshot**. These are the two items that I want to be accessed via keyboard shortcuts. It shouldn't matter where the user is, once he clicks the set keyboard keys, he will trigger the application's `_Click` event for a certain context menu.

**Final question:** How do I make *global* keyboard shortcuts to trigger some context menus item `_Click` event?

*It would be good is someone could explain a bit more broadly how to achieve this. I'm into C# for a short time (1 month learning it, 2 weeks using it) and I am having trouble understanding code just pasted here.*

This is one of the click events I want to associate with a keyboard shortcut:

```
private void menu_upload_file_Click(object sender, EventArgs e)
{
    DialogResult dialogOpened = openFileDialog1.ShowDialog();
    if (dialogOpened == DialogResult.OK)
    {
        string filename = openFileDialog1.FileName;
        this.sendToIMGit(filename);
    }
} 
```

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:59:06.480

You will need to use a 'keyboard hook' to create a global hotkey.

See [this question](https://stackoverflow.com/questions/1776664/c-sharp-low-level-keyboard-hook-not-working).

# javascript - 将变量添加到 Javascript 的替换函数

> ID：14774520
> 
> 赞同：1
> 
> 时间：2013-02-08T14:16:30.170
> 
> 标签：javascript

我需要在*Javascript*替换函数中添加一个变量。

这个例子工作正常：

```
form = form.replace(/1/g, form_count); 
```

但我需要用变量 "s" 替换数字：

```
var s = 1;
form = form.replace('/'+s+'/g', form_count); 
```

此代码不起作用，如何解决？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:20:43.797

```
form = form.replace(new RegExp(s, 'g'), form_count); 
```

不过，您将不得不在 s 中转义正则表达式特殊字符。

# apache - 使用非索引控制器访问时，zend 的 Apache 别名问题

> ID：14774523
> 
> 赞同：0
> 
> 时间：2013-02-08T14:16:39.013
> 
> 标签：apache, .htaccess, zend-framework

我创建了一个 Apache 别名 [http://www.domain.com/xyz](http://www.domain.com/xyz) 指向 Zend 应用程序中的公用文件夹。c:/wamp/www/xyz/public/

使用索引控制器访问时工作正常，但使用新控制器访问时显示服务器配置错误。

工作： http: [//www.domain.com/xyz/](http://www.domain.com/xyz/)（这里这个别名指向公用文件夹）

服务器配置错误：http: [//www.domain.com/xyz/controller2](http://www.domain.com/xyz/controller2)

这是controller2的错误：文件c：/wamp/www/xyz/public/controller2.php不存在..

这是我的 htaccess 代码：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我什至尝试使用 RewriteRule ^.*$ index.php [NC,L,QSA] 和其他一些重写规则。

有人可以帮我吗..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T21:47:52.583

您的 application.ini 文件中有这一行吗？

```
resources.frontController.baseUrl = "/xyz" 
```

# javascript - 显示最后一堂课后隐藏按钮

> ID：14774524
> 
> 赞同：2
> 
> 时间：2013-02-08T14:16:47.497
> 
> 标签：javascript, jquery

我有以下，

```
$("#slider1next").click(function () {
        $(".text:visible").next().show();
    }); 
```

当最后一课（.text）已经显示我想隐藏#slider1next我将如何处理这个？

[http://jsfiddle.net/ma9ic/U2UZ4/3/](http://jsfiddle.net/ma9ic/U2UZ4/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:20:06.407

向函数添加回调函数`show()`，并计算索引：

```
$("#slider1next").click(function () {
    $(".text:visible").next().show(function() {  
        if($(this).index() == $('.text').length)
        {
            $('#slider1next').hide();
        }
    });
}); 
```

请参阅[**更新的 jsFiddle**](http://jsfiddle.net/U2UZ4/4/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T14:20:54.500

试试这个：

```
$("#slider1next").click(function () {
    var $next = $('.text:visible:last').next();
    $next.length ? $next.show() : $(this).hide();
}); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/U2UZ4/13/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T14:22:11.987

```
$("#slider1next").click(function () {
$(".text:visible").next().show();
if ($('.text:last').is(':visible')){
    $('#slider1next').hide();
}
}); 
```

检查最后一个元素是否可见并隐藏按钮。 [http://jsfiddle.net/U2UZ4/12/](http://jsfiddle.net/U2UZ4/12/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T14:20:17.293

您可以检查可见长度是否等于所有文本长度。

[http://jsfiddle.net/U2UZ4/6/](http://jsfiddle.net/U2UZ4/6/)

```
$("#slider1next").click(function () {
    if ($(".text:visible").length == $(".text").length) { $(this).hide(); }
    $(".text:visible").next().show();
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T14:21:21.087

您需要验证在最后一个显示之后是否有下一个 div，就像那样

```
$("#slider1next").click(function () {
    var next = $(".text:visible:last").next();
    console.log(next);
    if (next.length > 0) {
        next.show();
    } else {
        $(this).hide();
    }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-08T14:22:16.027

尝试检查是否`fourth_one`可见，如果可见则隐藏`slider1next`

```
 $("#slider1next").click(function () {
    $(".text:visible").next().show();
    if($('#fourth_one').is(':visible'))
    {
        $('#slider1next').hide();
    }
}); 
```

这是[jsfiddle](http://jsfiddle.net/cpru6/1/)

# php - 如果当前时间在特定时间段内的 if 语句

> ID：14774525
> 
> 赞同：1
> 
> 时间：2013-02-08T14:16:49.947
> 
> 标签：php, wordpress, date, if-statement, time

我试图做的是检查当前时间是否在一周中大多数日子不同的特定时间段内。我已经尝试了大约 6 种不同的方法，它会做一次 else 并且永远不会再完全难倒我，所以我想我会请求蜂巢的帮助。

这是我目前所拥有的。

```
 /**
     * Simple Array Storing the times to block on each day
     */
    $nonNewDay = array(
        array(
            '2:00 am',
            '11:00 am'
        ),
        array(
            '2:00 am',
            '11:00 am'
        ),
        array(
            '2:00 am',
            '11:00 am'
        ),
        array(
            '2:00 am',
            '11:00 am'
        ),
        array(
            '2:00 am',
            '11:00 am'
        ),
        // Weekends
        array(
            '2:00 am',
            '1:00 pm'
        ),
        array(
            '2:00 am',
            '12:00 pm'
        ),
    );

    // Get Current weekday and time;
    $weekday = date('w');
    $date = date('m-d-Y');
    $time = date('g:00 a', strtotime('now'));

    echo $date;
    echo '<br />';
    echo $time;
    echo '<br />';

    /**
     * Were Attempting to block out all time blocks that are NOT "New Day Programming"
     * Which currently are:
     * Mon - Fri 11:00 am - 2:00 am
     * Sat, Sun 2:00 am - 1PM
     */

    if (strtotime($date . ' ' . $time) <= strtotime($date . ' ' . $nonNewDay[$weekday - 1][0]) && strtotime($date . ' ' . $time) >= strtotime($date . ' ' . $nonNewDay[$weekday - 1][1])) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:26:47.403

可以在[这里看到一个好的方法](https://stackoverflow.com/questions/5413505/is-time-between-two-other-times)

```
$current_time = strtotime('now');
if ($current_time > strtotime('wednesday this week 8:00pm') && $current_time <    
    strtotime('thursday this week 2:00am')) {
// do stuff 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:23:43.873

这个可能应该为您完成工作：

```
$current_date = strtotime(date("g:00 a"));
$value = $nonNewDay[date('N')-1];
// for php < 5.1, I think this one will do the work:
// $value = $nonNewDay[(date('w') == 0 ? 6 : date('N')-1)];
if ((strtotime($value[0]) <= $current_date) && ($current_date < strtotime($value[1]))) {
    die('Blocked');
} 
```

# php - Mysql：一个大的选择语句？还是多个小语句？

> ID：14774530
> 
> 赞同：2
> 
> 时间：2013-02-08T14:17:07.827
> 
> 标签：php, mysql

只是想知道以下在效率方面的最佳做法是什么。

我有一个名为“blogPosts”的表，其中包含多个字段。我还有一个名为“comments”的表，其中包含一列 blogPost_Id。

一篇博文可能有很多评论。

我想检索有关所有帖子和所有子评论的所有信息，最好尝试将其包含在一个 sql 命令中，如下所示：

`SELECT * FROM blogPosts LEFT JOIN comments ON blogPosts.id = comments.blogPost_id`

还是这样做更好`SELECT * from blogPosts`

然后`SELECT * from comments WHERE blogPost_id=postId`为每个帖子做另一个？

我应该补充一点，我将根据帖子和评论字段向 SQL 添加过滤器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:20:23.587

连接到数据库的成本很高。你做的越少越好。

换一种说法，什么更快？进行 1,000 次旅行以送出 1,000 个箱子还是一次旅行以送出 1,000 个箱子？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:35:13.947

作为一般规则，对数据库的往返次数越少越好，因此通常首选一个巨型查询。

但是，这不是规则。如果您没有正确设置索引，您的查询实际上可能会慢很多。要注意的另一件事是代码的复杂性和可维护性。我曾经写过一个非常复杂的查询，它连接了大约 17 个表。调试和修改是一场噩梦。

基准测试至关重要，因为它是衡量绩效的唯一工具。您实际上可能会发现有时拆分查询可能会提高性能。

据我所知，您的查询很简单，可以在一个查询中进行连接并摆脱它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:13:14.690

对于像问题中的简单查询，让数据库进行连接。对此毫无疑问。

可能会有一些关于更复杂查询的讨论，但数据库是为处理大量数据而设计的。*未*表示尝试在应用程序中复制数据库工作。

也就是说，在某些情况下，数据库优化器/引擎确实会感到困惑。在这种情况下，可能需要创建临时表或在应用程序中进行工作。这不是好事，而是现实。

让应用层做应用层最擅长的事情。让数据库做数据库最擅长的事情，这肯定包括处理数据。

# java - 下载android源码到外部目录

> ID：14774531
> 
> 赞同：0
> 
> 时间：2013-02-08T14:17:08.513
> 
> 标签：java, android, ubuntu

我正在使用**ubuntu** 11.10 我已经初始化了 repo 并开始下载源代码*以构建我自己的 rom*但现在我的目录已满，所以我无法继续下载另一个源代码，请建议我如何将这些数据移动到我的外部硬盘驱动器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:24:23.447

When you install the SDK Bundle, simply install it to your external drive. It is not recommended to run the SDK off an external drive (you might see performance issues).

If you are trying to save space on your current install, just don't install very many Platform Versions (ie, the SDK for Gingerbread and ICS - just use 1 version).

Furthermore, the source code takes up a lot of space, if you aren't using it (to debug directly into source code via your IDE for instance) - you may not want to download that either.

Bottom line, I wouldn't try to run the SDK from an external drive, and instead, be selective on which components your download and install to save space.

The APIs and source code are installed in this dir, if you want to look around (you could copy the source out of here to your external drive to actually answer you initial question):

```
 ${ANDROID_HOME}/android/sdk/platforms 
```

# android - 如何在android上将vcs（日历事件）导出为短信附件

> ID：14774538
> 
> 赞同：1
> 
> 时间：2013-02-08T14:17:29.683
> 
> 标签：android, android-intent, android-calendar

在我的应用程序中，我需要将日历事件附加为SMS中的**.vcs**`SmsManager` by 。

这是我没有附加**vcs**文件的代码：

```
SmsManager smsManager = SmsManager.getDefault();
smsManager.sendTextMessage(phoneNo, null, sms, sentPI, deliveredPI); 
```

如何以编程方式附加 vcs 文件？

是否可以通过`SmsManager`（即以编程方式发送短信）？

# c - 隐式转换浮点常量

> ID：14774540
> 
> 赞同：10
> 
> 时间：2013-02-08T14:17:40.397
> 
> 标签：c, casting, floating-point

请看一下这段代码：

```
#include <stdio.h>

int main(void)
{
    short s;
    int i = 65696;
    float f = 65696.0F;

    printf("sizeof(short) = %lu\n", sizeof(short));

    s = i;
    printf("s = %hd\n", s);
    s = f;
    printf("s = %hd\n", s);

    s = 65696;
    printf("s = %hd\n", s);
    s = 65696.0F;
    printf("s = %hd\n", s);

    return 0;
} 
```

它给出的输出为：

```
sizeof(short) = 2
s = 160
s = 160
s = 160
s = 32767 
```

在最后一行为什么是 32767 而不是 160 ？说`f = 65696.0F; s = f;`和 和有什么不一样`s = 65696.0F;`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T14:19:40.993

因为如果浮点值的整数部分在新类型中不可表示，则转换是未定义的行为。

在您的情况下，可能是 32767 ，因此不可在对象中表示`SHRT_MAX`的组成部分。`65696.0F``short`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:20:38.430

这是“未定义的行为”，这意味着编译器可以自由地做它想做的事。但“未定义”并不意味着“无法解释”。

在这种情况下编译器所做的`s = f`是`f`首先转换为`int`值 65696，然后将 65696 分配给 s，这会溢出并留下 160。编译器这样做是因为有一条 CPU 指令将浮点数转换为 32-位整数，但不直接转化为 16 位整数

编译器所做`s = 65696.0F`的更简单：它知道 65696.0 超出范围，因此它为 分配可用的最高值`s`，恰好是 2^15-1 = 32767。

如果您阅读编译器为 s = f 生成的汇编代码（例如使用 -S 开关和 gcc），您可以验证这一点：

```
 movss   -4(%rbp), %xmm0        # Load float from memory into register xmm0
    cvttss2si       %xmm0, %eax    # Convert float in xmm0 into signed 32 bit, store in eax
    movw    %ax, -10(%rbp)         # Store lower 16 bits of eax into memory
    movswl  -10(%rbp), %eax        # Load those 16 bits into eax, with sign extend 
```

最后一条指令破坏了 %eax 的高 16 位，在这种情况下将其设置为全 0。

它为 s = 65696.0F 生成的内容更简单：

```
 movw    $32767, -10(%rbp)      # Store the lower 16 bits of 32767 into memory
    movswl  -10(%rbp), %eax        # Load those 16 bits into eax, with sign extend 
```

# php - php文本字段将数字转换为小数

> ID：14774544
> 
> 赞同：-4
> 
> 时间：2013-02-08T14:17:59.950
> 
> 标签：php, javascript

我需要帮助来完成我的 php 项目。l 希望有一个文本字段 V1、V2、V3 和结果/输出只接受十进制数字（4 位小数，即 0.0000）或自动将数字转换为四位小数，并有一个只读字段生成总和3 个文本字段，无需重新加载表单。

例如 `text field v1+text field v2+text field v3=text field result`

文本字段应接受四位小数或自动将数字转换为四位小数。

我正在使用以下 sum 函数；

```
function sum() 
{
    var TotalLBCReceipts = num("TotalLBCReceipts");
    var TotalKaaseReceipts = num("TotalKaaseReceipts");
    var TakoradiToFactory = num("TakoradiToFactory2");
    var KaaseToFactory = num("KaaseToFactory2");
    var SampleResidue = num("SampleResidue");
    var Sweepings  = num("Sweepings");
    var OrganicCocoa = num("OrganicCocoa2");
    var Confiscated = num("Confiscated");
    var Cuttings = num("Cuttings");
    var r = document.getElementById("GRANDTOTAL1");

    if (r != null) 
    {
         r.value = TotalLBCReceipts + 
                   TotalKaaseReceipts + 
                   TakoradiToFactory +
                   KaaseToFactory +
                   SampleResidue +
                   Sweepings +
                   OrganicCocoa +
                   Confiscated+Cuttings;
     }
} 
```

并使用获取值；

```
function num(id) 
{
    var e = document.getElementById(id);

    if (e != null) 
    {
        var v = e.value;
        if (/^\d+$/.test(v)) 
        {
            return parseInt(v, 10);
        }
    }

return 0;

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:25:29.663

谷歌是你的朋友...... StackOverflow 也是如此！

您需要在这里使用 JavaScript，也许还有 PHP...

**限制为带小数位的数字：**

[限制文本框的输入：只允许数字和小数点](https://stackoverflow.com/questions/2808184/restricting-input-to-textbox-allowing-only-numbers-and-decimal-point)

```
<HTML>
  <HEAD>
    <SCRIPT language=Javascript>
       <!--
       function isNumberKey(evt)
       {
          var charCode = (evt.which) ? evt.which : event.keyCode;
          if (charCode != 46 && charCode > 31 
            && (charCode < 48 || charCode > 57))
             return false;

          return true;
       }
       //-->
    </SCRIPT>
  </HEAD>
  <BODY>
    <INPUT id="txtChar" onkeypress="return isNumberKey(event)" 
           type="text" name="txtChar">
  </BODY>
</HTML> 
```

**对带有只读字段的数字求和：**

[添加文本框值并使用 javascript 显示它](https://stackoverflow.com/questions/3131410/adding-the-text-box-values-and-display-it-using-javascript)

```
<form name="myFormName">
    <p><input type="text" name="myInputName1" value="25.3"></p>
    <p><input type="text" name="myInputName2" value="14.2"></p>
</form>
<div id="total"></div>

<script type="text/javascript>

    var total = parseFloat(0, 10);

    total += parseFloat(document.myFormName.myInputName1.value, 10);
    total += parseFloat(document.myFormName.myInputName2.value, 10);

    document.getElementById("total").innerHTML = "Total is " + total;

</script> 
```

**四舍五入到小数点后 4 位；：**

[https://stackoverflow.com/a/7269919/1305169](https://stackoverflow.com/a/7269919/1305169)

```
Math.round(val*10000)/10000 
```

希望这可以帮助！

编辑：

您需要将您的代码更改为以下内容；

**你的** `sum` **功能：**

```
function sum() 
{
    var TotalLBCReceipts = num("TotalLBCReceipts");
    var TotalKaaseReceipts = num("TotalKaaseReceipts");
    var TakoradiToFactory = num("TakoradiToFactory2");
    var KaaseToFactory = num("KaaseToFactory2");
    var SampleResidue = num("SampleResidue");
    var Sweepings  = num("Sweepings");
    var OrganicCocoa = num("OrganicCocoa2");
    var Confiscated = num("Confiscated");
    var Cuttings = num("Cuttings");
    var r = document.getElementById("GRANDTOTAL1");

    if (r != null) 
    {
         r.value = Math.round((
                       TotalLBCReceipts + 
                       TotalKaaseReceipts + 
                       TakoradiToFactory +
                       KaaseToFactory +
                       SampleResidue +
                       Sweepings +
                       OrganicCocoa +
                       Confiscated +
                       Cuttings) * 10000) / 10000;
     }
} 
```

**你的** `num` **功能：**

```
function num(id) 
{
    var e = document.getElementById(id);

    if (e != null) 
    {
        return Math.round(e.value*10000)/10000;
    }

    return 0;
} 
```

您可能只从`num`函数中返回纯数字，但是为了完整起见，我在这里展示它！

# iphone - CoreData - NSFetchRequest 和过滤子关系实体

> ID：14774548
> 
> 赞同：0
> 
> 时间：2013-02-08T14:18:12.507
> 
> 标签：iphone, core-data

好的，假设我有许多类型为“Office”的实体，并且它有一个名为“employees”的关系，这是一个包含“Employee”对象的一对多关系。“Employee”有一个名为“lastName”的属性。

鉴于此，我需要执行返回一组具有 > 0 个员工的 Office 对象的获取，但在返回的办公室中，员工关系中的 Employee 对象已被过滤为仅包含 lastName 等于“Smith”的 Employee 对象.

我可以轻松地获取所有 Office 对象，然后遍历它们并删除名称与 Smith 不匹配的所有员工，但这会删除商店中的这些对象。

我假设这里需要 SUBQUERY，但我似乎无法正确过滤它。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T20:41:11.837

你想要一个`SUBQUERY`在你的谓词中。

```
[NSPredicate predicateWithFormat:@"SUBQUERY(employees, lastName, lastName LIKE[cd] %@).@count > 0", @"Smith"] 
```

这将对每个关系执行子查询`employees`，测试提供的字符串的 lastName，并计算至少有一个这样的员工。

# powershell - 可以在 Powershell 中构建流写入器的动态数组吗？

> ID：14774558
> 
> 赞同：1
> 
> 时间：2013-02-08T14:18:37.423
> 
> 标签：powershell, streamreader, streamwriter

我有一个非常大的文件需要处理（> 10 GB）。因此我使用`StreamReader`and `StreamWriter`。我的文件包含 CSV 格式的一系列金融市场价格，如下所示：

`Date,Time,Open,High,Low,Close,UpVol,DownVol`

该文件包含多年的数据，我想每年创建一个文件，并删除最后两列。如果我将年份作为参数传递，我有一个脚本可以执行此操作。我想多次调用这个脚本，但它必须多次读取非常大的文件。因此，我只想读取一次文件，并将处理后的数据逐行动态地流式传输到不同的文件。这是我的单年脚本：

```
param ( 
    [String]$file=$(throw "Supply a file name to convert"),
    [String]$year
    );

$extension = [System.IO.Path]::GetExtension($file);
$outFile = $file.Substring(0, $file.LastIndexOf('.')) + "-" + $Year + $extension; 

$reader = [System.IO.File]::OpenText($file);
$writer = New-Object System.IO.StreamWriter $outFile;
$reader.ReadLine() > $null                          # skip first line (old header)
$writer.WriteLine("Date,Time,Open,High,Low,Close"); # write required header
while (($line = $reader.ReadLine()) -ne $null) {
    $data = $line.Split(",");
    if ($data[0] -match $year) {
        $writer.WriteLine($data[0] + "," + $data[1] + "," + $data[2] + "," + $data[3] + "," + $data[4] + "," + $data[5]);
    }
}
$reader.Close();
$writer.Close(); 
```

所以，我在想是否可以查看 $data[0] （日期），找到这样的年份：

`$thisYear = $data[0].Split("/")[2];`

然后`StreamWriter`为找到的每一年动态创建一个？我应该创建一个 StreamWriters 数组吗？问题是，在我阅读文件之前，我不知道文件中有多少年或哪些年。它必须“即时”完成。如果我正在阅读的文件包含十年的数据，我希望在最后创建十个流写入器，其中包含十个额外的文件，其中包含相应年份的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:46:09.550

我建议使用哈希表来存储它们。然后，您只需搜索年份即可找到您的流媒体。尝试（未经测试）：

```
param ( 
    [String]$file=$(throw "Supply a file name to convert")
    )

$extension = [System.IO.Path]::GetExtension($file) 
$writers = @{}

$reader = [System.IO.File]::OpenText($file)
$reader.ReadLine() > $null                          # skip first line (old header)
while (($line = $reader.ReadLine()) -ne $null) {
    $data = $line.Split(",")
    $thisYear = $data[0].Split("/")[2]

    #If new year(no writer available)
    if (!$writers.ContainsKey($thisYear)) {
        #Create writer
        $outFile = $file.Substring(0, $file.LastIndexOf('.')) + "-" + $thisYear + $extension
        $writer = New-Object System.IO.StreamWriter $outFile
        $writer.WriteLine("Date,Time,Open,High,Low,Close")
        $writers.Add($thisYear, $writer)
    }

    $writers[$thisYear].WriteLine($data[0] + "," + $data[1] + "," + $data[2] + "," + $data[3] + "," + $data[4] + "," + $data[5])
}
$reader.Close()
$writers.GetEnumerator() | % { $_.Value.Close() } 
```

# mysql - 使用包含超过 N 个分号的 RegEx 查找行

> ID：14774559
> 
> 赞同：2
> 
> 时间：2013-02-08T14:18:46.877
> 
> 标签：mysql, regex, csv, sublimetext2

我有一个来自 Access 数据库的 CSV 文件，用于导入 MySql。它包含书籍和期刊目录。它由分号划定。它有大约4000个条目。

我遇到的问题是列出的许多书籍和期刊的标题都包含分号。

我正在寻找的是在 Sublime Text 2 中运行的简单 RegEx 搜索，以在 .csv 文件中查找数量超过 5 个分号的行。

这将让我快速编辑有问题的标题，而不是尝试阅读整个数据库。

我对RegEx不太熟悉，所以要温柔......

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T14:21:47.327

你可以使用这个正则表达式：

```
(.*;){5} 
```

它将突出显示（部分）具有 5 或更多的任何行`;`。

简而言之，正则表达式将搜索 5 个 [0 或更多任何字符（换行除外）`.*`后跟`;`] 的实例。

深入的解释将涉及关于*贪婪量词*的讨论，其中`.*`部分（`*`量词为0或更多，它也是*贪婪*的）尽可能多地吃掉文本。结果，即使`;`一行中有超过 5 个，它们都成为匹配的一部分，这使得该行的其余部分无法匹配，匹配必须在下一行继续。

# javascript - 将 tinyMCE 添加到动态添加的 textarea

> ID：14774560
> 
> 赞同：3
> 
> 时间：2013-02-08T14:18:53.990
> 
> 标签：javascript, jquery, tinymce, dhtml

我有一些 javascript 打开一个灯箱，其中包含动态创建的 HTML，包括一些文本区域。那我做...

```
tinyMCE.init({mode: "none", theme: "simple"});
tinymce.execCommand("mceAddControl", true, id); 
```

...其中*id*特别是一个文本区域的 id。我知道 id 是正确的，因为那个 textarea 消失了（它突然有*display:none*作为内联样式？），但是如果我删除那个内联样式，textarea 再次出现不变，但没有附加 tinymce 编辑器。为什么要应用该内联样式，为什么它没有附加的编辑器？

* * *

## 为塔里亚马编辑

编辑 2 - 代码包含一个错误，但修复后仍然无法工作......

好的，这是一个显示问题的示例。

```
<html>
    <head>
        <script src="jquery.js" type="text/javascript"></script>
        <script src="tiny_mce.js" type="text/javascript"></script>
    </head>
    <body>
        <ul id="list">
        </ul>    
    </body>

    <template id="thingyTemplate">
        <li>
            <label>Email rich text body:</label>
            <textarea rows="8" cols="50" path="bodyRichText" class="wysiwyg"></textarea>
        </li>
    </template>

    <script>

        var newTemplate = $("#thingyTemplate > *").clone();
        $(newTemplate).find("textarea").attr("id", "myTextArea");
        $("#list").append(newTemplate);

        tinyMCE.init({ mode: "none", theme: "simple" });
        tinymce.execCommand("mceAddControl", false, "myTextArea");

    </script>
</html> 
```

页面加载时，您可以看到*模板*元素，但列表中的 clone() 副本消失了。如果删除*mceAddControl*行，则模板及其克隆是可见的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-04-06T08:52:23.583

我试过这个：

```
tinymce.remove();
    tinymce.init({
        selector: 'textarea',
        setup: function (editor) {
            editor.on('change', function () {
                editor.save();
            });
        },
        height: 100,
        width: 350,
        menubar: false,
        plugins: [
          'advlist autolink lists link image charmap print preview anchor',
          'searchreplace visualblocks code fullscreen',
          'insertdatetime media table contextmenu paste code',
          'textcolor'
        ],
        toolbar: 'undo redo | insert | styleselectfontselect fontsizeselect | forecolor backcolor | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image',
        content_css: '//www.tinymce.com/css/codepen.min.css'
    }); 
```

为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T23:29:16.733

您是否尝试延迟对“文档就绪”的调用？也许您的 DOM 不够快，或者在您的代码中您的 ID 相同；）

```
 $(function(){
            tinyMCE.init({ mode: "none", theme: "simple" });
            tinymce.execCommand("mceAddControl", false, "myTextArea");
    }); 
```

# sbt - sbt 和多个非托管 lib 目录

> ID：14774564
> 
> 赞同：2
> 
> 时间：2013-02-08T14:19:06.657
> 
> 标签：sbt

我有两个包含罐子的目录：

*   库-a
*   库-b

我想包含 lib-a 目录中的所有 jar 和 lib-b 目录中的一组指定 jar。如何使用 sbt 进行配置（我使用的是 v0.12.2）。

我试过编辑非托管基础，但只允许一个人指定一个目录。我认为关键是 unmanaged-jars，这是一项任务。不过，我是 sbt 的新手，不知道如何配置它。

# java - JPA查询：通过大量可能值进行选择的正确方法是什么？

> ID：14774566
> 
> 赞同：0
> 
> 时间：2013-02-08T14:19:29.683
> 
> 标签：java, sql, jpa, entitymanager

我所拥有的是大量（如数十万）ID 列表。我想通过 JPA 查询从具有此 ID 的对象中获取一些值。

**选项 1 - 使用 IN 子句**

```
List<Long> ids = /* ... */
entityManager.createQuery(
        "SELECT v.lat, v.lon FROM Vehicle v WHERE v.id IN (:ids)",
        Long[].class)
    .setParameter("ids", ids)
    .getResultList(); 
```

恐怕`IN`条款内容可能会有限制。

**选项 2 - 分别查询每个 ID**

```
List<Long> ids = /* ... */
for (Long id : ids) {
    entityManager.createQuery(
            "SELECT v.lat, v.lon FROM Vehicle v WHERE v.id = :id",
            Long[].class)
        .setParameter("id", id)
        .getSingleResult();
} 
```

这看起来太慢了，因为似乎在做`ids.size()`请求。

做这种事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:39:23.003

你的两种方法都没有太大的优点。正如 Grzegorz 的评论中提到的，所有数据库都对您可以使用的列表项的数量有限制。此外，您的查询可以包含多少个字符。所以名单出来了。

成千上万的个人查询似乎（记住发帖指南丹，要有礼貌）是不明智的。

如果这是我的问题，我会首先查看该 id 列表是如何生成的。这可能是一个数据库查询。如果是这样，我会制作该查询的新版本以获取经纬度。它可能是表连接，也可能是子查询。在不了解您的数据库结构的情况下，我无法给您任何详细的建议。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T14:34:36.577

首先想到的是：

1.  将 id 列表切割成 1000 个 id 的一部分。可管理的大小。
2.  对每个部分运行 IN 查询。
3.  将结果聚合到一个列表中。

对于大数据集，并行执行 (2) 可以显着提高性能。

# java - 使用 Class.forName 在运行时加载 Weka 类

> ID：14774575
> 
> 赞同：1
> 
> 时间：2013-02-08T14:19:46.610
> 
> 标签：java, string, weka

我不想像这样将 Weka 分类器的名称硬编码到我的 Java 中：

```
Classifier cls = new J48(); 
```

其中 Classifier 是 Weka 类。

相反，我更愿意将值“J48”存储在数据库表的 varchar 列中。

关于如何将包含“J48”的 Java 字符串转换为 Weka 类型的任何想法？我没有成功尝试类似的事情：

```
cls = Class.forName("weka.classifiers.trees.J48;"); 
```

J48 是决策树的 Weka 类的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:02:33.707

快速解决方案：

```
Object obj = Class.forName("weka.classifiers.trees.J48").newInstance();
Classifier cls = Class.forName("weka.classifiers.trees.J48").cast(obj); 
```

J48 应该有 0 参数构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-14T13:55:59.627

有更好的单行版本

```
Classifier classifier = AbstractClassifier.forName(className, options); 
```

或以下用于较新版本的 Weka

```
Classifier classifier = Classifier.forName(className, options); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:29:57.967

这在技术上是相同的答案，但只是一个较短*的单行*版本

```
Classifier cls = (Classifier) Class.forName("weka.classifiers.trees.J48").newInstance(); 
```

# postgresql - PostgreSQL 和 GRANT 语句

> ID：14774576
> 
> 赞同：2
> 
> 时间：2013-02-08T14:19:54.127
> 
> 标签：postgresql

我的 PostgreSQL 服务器（V9.2）上有 n 个模式和 n 个用户（每个模式 1 个用户）。我只想在每个表上分配to 、 for `SELECT, INSERT, UPDATE, DELETE, EXECUTE`to 、for to的权限。`user1``schema1``user2``schema2``usern``scheman`

我不能用这个语句做到这一点：

```
GRANT SELECT, INSERT, UPDATE, DELETE, EXECUTE ON SCHEMA schema 1 to user1 
```

因为该子句`...ON SCHEMA`仅适用于`CREATE`和`USAGE`特权。

那么将每个表上的所有这些权限分配给相关用户的最快方法是什么？我希望唯一的方法是不要每……做一个`GRANT`声明`schema.table`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:31:27.047

我认为您正在寻找“在模式中的所有表上”选项：

```
GRANT SELECT, INSERT, UPDATE, DELETE, EXECUTE ON ALL TABLES IN SCHEMA schema_1 to user1; 
```

有关详细信息，请参阅手册：[http ://www.postgresql.org/docs/current/static/sql-grant.html](http://www.postgresql.org/docs/current/static/sql-grant.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:26:42.843

尽管有很多不同的解决方案可以解决这个问题（包括手动修改授权表），但我个人建议使用工具来简化它。

例如，使用 pgAdmin3，您可以简单地批量更改模式中所有对象的权限。

[http://www.pgadmin.org/docs/1.4/grantwiz.html](http://www.pgadmin.org/docs/1.4/grantwiz.html)

# asp.net-mvc - Telerik ASP.NET MVC 下拉列表多选支持

> ID：14774579
> 
> 赞同：0
> 
> 时间：2013-02-08T14:20:03.207
> 
> 标签：asp.net-mvc, asp.net-mvc-3, telerik, telerik-mvc, html.dropdownlistfor

我使用 Telerik ASP.NET MVC 组件。我需要在下拉列表上实现多选功能，但 Telerik 下拉列表组件不支持多选。

有什么方法或如何在该组件上实现多选功能？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:31:02.673

我使用 Telerik Kendo Grid 作为多选列表框取得了很大的成功。不过，它确实需要一些调整。最简单的方法是捕获 Select 事件并动态创建所选值的 CSV 列表并将它们存储在隐藏的表单字段中。然后你可以很容易地传递这个。它看起来也很酷。希望这会有所帮助，或者给你一些其他的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:32:26.750

我猜您正在搜索列表框（请参阅[此处](http://demos.telerik.com/aspnet-ajax/listbox/examples/clientside/clientevents/defaultcs.aspx)的演示）。
Telerik 没有在他们的 mvc 库中实现这个功能，你被困在使用 Telik 以外的东西或切换到 webforms（我推荐第一个选项；））。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T20:16:18.707

是的，似乎即使是[Kendo UI ComboBox](http://demos.kendoui.com/web/combobox/index.html)（MVC 包装器）也没有像[Rad ComboBox](http://demos.telerik.com/aspnet-ajax/combobox/examples/functionality/checkboxes/defaultcs.aspx)那样提供这样的选项。

理论上，你可以尝试通过[模板](http://demos.kendoui.com/web/combobox/template.html)来模拟这个 UI 。

我认为最好联系他们的支持以进行澄清。

# javascript - 多次实例化后检测JQuery插件构造函数的最后调用

> ID：14774580
> 
> 赞同：0
> 
> 时间：2013-02-08T14:20:04.363
> 
> 标签：javascript, jquery

我正在构建一个 JQuery 插件，用户可以根据特定的选项和偏好多次调用它。

我正在寻找一种方法来知道他们何时进行最后一次通话，因为我需要在最后一次通话期间执行一些代码。

例如，假设代码是这样的：

```
$('body').myPlugin(options_1);
$('body').myPlugin(options_2);
$('body').myPlugin(options_3); 
```

有没有办法让我确定我的插件构造函数已经定义了多少次，例如在我的插件代码运行之前，或者从最后一个插件构造函数？！

打个比方，在 JQuery 中，有一种`.last()`方法可以获取一组匹配元素中的最后一项。我正在尝试做同样的事情，只是这次使用 Javascript 构造函数，因此可以在所有调用结束时运行一些代码。

# objective-c - 在 UIButton 上创建闪烁的图像？

> ID：14774591
> 
> 赞同：0
> 
> 时间：2013-02-08T14:20:38.113
> 
> 标签：objective-c, ios6, xcode4.5, nstimer, iphone-developer-program

我正在尝试创建一个记忆游戏，但在某些时候我希望 UIbutton 上的图像被闪烁。对于 x 秒，我希望它们可见，对于 x 秒，我希望它们被隐藏。我被困住了，只想有人给我一个可行的算法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:48:49.583

基本方法是通过设置 alpha 来弹出和弹出视图。

```
UIView *view = imageView; // Or whatever
NSTimeInterval x = 2.0; // Or whatever

double delayInSeconds = x;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));

dispatch_after(popTime, dispatch_get_main_queue(), ^(void){ // Wait for x seconds to hide
    view.alpha = 0.0; // HIDE

    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){ // Wait for x seconds to show
        view.alpha = 1.0; // SHOW
    });
}); 
```

一种更具视觉吸引力的方法是在短时间内淡入和淡出图像视图。

```
UIView *view = imageView; // Or whatever
NSTimeInterval x = 2.0; // Or whatever
NSTimeInterval fadeInterval = 0.5; // Or whatever

double delayInSeconds = x;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));

dispatch_after(popTime, dispatch_get_main_queue(), ^(void){ // Wait for x seconds to hide
    [UIView animateWithDuration:fadeInterval animations:^{
        view.alpha = 0.0; // HIDE
    } completion:^(BOOL finished) {
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){ // Wait for x seconds to show
            [UIView animateWithDuration:fadeInterval animations:^{
                view.alpha = 1.0; // SHOW
            }];
        });
    }];
}); 
```

请参阅[`dispatch_after(3)`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/dispatch_after.3.html)、[`+animateWithDuration:animations:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/animateWithDuration%3aanimations%3a)和[`+animateWithDuration:animations:completion:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/animateWithDuration%3aanimations%3acompletion%3a)。

* * *

***更新***

好的。根据您的评论，我会让事情变得更简单。

第 1 步：使视图消失。这可以通过将 alpha（透明度）设置为 0、将 hidden 设置为 YES 或从其父视图中删除视图来完成。为了一个简单的效果，这次我将隐藏设置为YES。

```
view.hidden = YES; 
```

第 2 步：让视图在设定的时间后消失。有很多方法可以做到这一点。我会坚持使用 dispatch_after()，但我会让它更容易理解。这一步有两个部分。a) 部分设置您希望视图隐藏的时间。b) 部分是隐藏视图。

```
// Part a) Set the time you want the view to disappear.
double howLongBeforeDisappearing = 2.0; // seconds
dispatch_time_t timeToDisappear = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(howLongBeforeDisappearing * NSEC_PER_SEC));

// Part b) Hide the view
dispatch_after(timeToDisappear, dispatch_get_main_queue(), ^{
    view.hidden = YES;
}); 
```

重要代码周围有很多东西，但重点是`howLongBeforeDisappearing = 2.0`和`view.hidden = YES`。这表示 2 秒后将 view.hidden 设置为 YES。

最后，我们需要扭转这一点，让事情重新出现。为此，我们执行完全相同的操作，只是这次我们将 view.hidden 设置为 NO。请记住，在设置重新出现的时间时，我们需要添加等待视图消失的时间。

```
// Part c) Set the time you want the view to reappear.
double howLongBeforeReappearing = howLongBeforeDisappearing + 2.0; // seconds
dispatch_time_t timeToReappear = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(howLongBeforeReappearing * NSEC_PER_SEC));

// Part d) Show the view
dispatch_after(timeToReappear, dispatch_get_main_queue(), ^{
    view.hidden = NO;
}); 
```

将所有这些加在一起，我们就有了最后的代码块。

```
// Part a) Set the time you want the view to disappear.
double howLongBeforeDisappearing = 2.0; // seconds
dispatch_time_t timeToDisappear = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(howLongBeforeDisappearing * NSEC_PER_SEC));

// Part b) Hide the view
dispatch_after(timeToDisappear, dispatch_get_main_queue(), ^{
    view.hidden = YES;
});

// Part c) Set the time you want the view to reappear.
double howLongBeforeReappearing = howLongBeforeDisappearing + 2.0; // seconds
dispatch_time_t timeToReappear = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(howLongBeforeReappearing * NSEC_PER_SEC));

// Part d) Show the view
dispatch_after(timeToReappear, dispatch_get_main_queue(), ^{
    view.hidden = NO;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T01:45:42.960

这就是我让按钮闪烁的方式

-(void) blinkAll { [NSTimer scheduledTimerWithTimeInterval:.5 目标:self 选择器:@selector(hideBoxes) userInfo:nil repeats:NO];

```
[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(showBoxesCurrent) userInfo:nil repeats:NO];

[NSTimer scheduledTimerWithTimeInterval:1.5 target:self selector:@selector(hideBoxes) userInfo:nil repeats:NO];

[NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(showBoxesCurrent) userInfo:nil repeats:NO];

[NSTimer scheduledTimerWithTimeInterval:2.5 target:self selector:@selector(hideBoxes) userInfo:nil repeats:NO];

[NSTimer scheduledTimerWithTimeInterval:3 target:self selector:@selector(showBoxesCurrent) userInfo:nil repeats:NO];

[NSTimer scheduledTimerWithTimeInterval:3 target:self selector:@selector(hideBoxes) userInfo:nil repeats:NO];

[NSTimer scheduledTimerWithTimeInterval:3.5 target:self selector:@selector(enableGamePlay) userInfo:nil repeats:NO]; 
```

}

showBoxesCurrent 和 hideBoxes 函数是获取所有按钮数组并将它们设置为隐藏或不隐藏的基本循环，由 NSTimer 函数激活。

# css - CSS 选择 br 后不跟 br

> ID：14774592
> 
> 赞同：0
> 
> 时间：2013-02-08T14:20:41.663
> 
> 标签：css

我想选择`br`没有被另一个`br`.

例如。

```
<br>sometext<br>adsf 
```

我想选择这两个元素。

```
<br><br>sometext<br><br>adsf 
```

我只想选择 2 br 元素，而不是 4。

我见过这个问题，但我不明白它是如何工作的。

[不跟随元素的 CSS 选择元素](https://stackoverflow.com/questions/13212909/css-select-element-which-does-not-follow-element)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-23T14:49:15.563

使用两个选择器，一个为*所有* `br`标签添加样式，另一个为`br+br`.

```
br { /* add the style */ }
br+br {  /* take it away again, or change it to 'inherit' */ } 
```

# java - 使用 XL 工作表的 Java 线程安全

> ID：14774594
> 
> 赞同：1
> 
> 时间：2013-02-08T14:20:43.767
> 
> 标签：java, thread-safety

我有一个网络应用程序，我正在通过网络浏览器访问它。在浏览器中，我有一个提交按钮。单击提交按钮后，将调用一个线程并进入数据库，选择 20,0000 条记录并将这些记录写入 XL 表。如果我在线程保存 XL 文件之前关闭浏览器会发生什么，为什么？

# android - 如何获取 Google 地图的“已加星标的地点”列表以在我的 Android 应用程序的地图上显示？

> ID：14774600
> 
> 赞同：3
> 
> 时间：2013-02-08T14:20:59.633
> 
> 标签：android, google-maps

在 Google 地图应用程序中，我可以将地址添加到“已加星标的地点”（我假设该地址已保存到我的 Google 帐户中）。有没有办法从我的应用程序访问这些地方？通过访问我的意思是获取他们的坐标和名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T16:58:45.710

随着谷歌地图安卓应用程序的最新更新，实际的星星有时会从地图上消失。我的解决方法：我给任何随机的地方加星然后取消加星。我加星标的地方都回来了，直到我关闭应用程序。希望在谷歌地图解决问题之前有所帮助。

# xml - 查看满足 XPATH 的下一个节点以定义行为

> ID：14774601
> 
> 赞同：1
> 
> 时间：2013-02-08T14:21:09.680
> 
> 标签：xml, xslt, xpath, xslt-2.0, restructuredtext

我目前正在编写一个 XSLT 文档来将 javadoc XML 输出（不可修改）转换为重组文本。我遇到的问题之一是 javadoc 将具有具有类似结构的 XML

```
<node1>
   <node2>
       <code/>
   </node2>

   <node3>
      <![CDATA[DataType]]>
   </node3>
</node1>

<node1>
   <node3>
      <![CDATA[s need special formatting, but breaks in restructured text]]>
   </node3>
</node1> 
```

这会产生 ASCII 输出（`node2/code`inside of的存在`node1`表示它应该用 `` 包围）

```
``DataType``s need special formatting, but break in restructured text 
```

在重组文本中，结尾的 `` 后面不能跟字母数字，否则无法正确呈现，所以我需要能够查看下一个匹配的节点`//node1/node3`是否不是第一个字符，而不是之前的输出作为字母数字，如果是这样，它会像这样划界

```
``DataType``\s need special formatting, but breaks in restructured text 
```

但如果是标点符号，以下是可以的

```
``DataType``. need special formatting, but breaks in restructured text 
```

这对 XSLT2.0 可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:33:15.750

做“向后看”可能比向前看更容易，例如

```
<xsl:template match="node1/node3" priority="1">
  <xsl:value-of select="." />
</xsl:template>

<xsl:template match="node1[node2/code]/node3" priority="2">
  <xsl:text>``</xsl:text>
  <xsl:next-match />
  <xsl:text>``</xsl:text>
</xsl:template>

<!-- special template for the block immediately following a node2/code block -->
<xsl:template match="node1[preceding-sibling::node1[1]/node2/code]/node3" priority="3">
  <xsl:if test="matches(., '^[A-Za-z0-9]')">\</xsl:if>
  <xsl:next-match />
</xsl:template> 
```

您甚至可以将 合并`if`到匹配表达式中

```
<xsl:template match="node1[preceding-sibling::node1[1]/node2/code]
                     /node3[matches(., '^[A-Za-z0-9]')]" priority="3">
  <xsl:text>\</xsl:text>
  <xsl:next-match />
</xsl:template> 
```

# html - Sphinx - 添加要在 HTML 模板中使用的自定义字段/变量

> ID：14774603
> 
> 赞同：3
> 
> 时间：2013-02-08T14:21:12.830
> 
> 标签：html, variables, python-sphinx

我正在尝试从`.rst`要包含在 HTML 模板中的文件中提取元信息。我假设如果我放类似的东西

```
.. :newVariable: My Text 
```

到 .rst 文件中，然后使用我自己的模板构建 HTML，我将能够包含 `newVariable`在 HTML 标头中。但它不起作用。我尝试了几件事无济于事。

这是否可以在不修改 Sphinx 源的情况下解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-01T18:07:39.410

在您的 .rst 文件中，在顶部放置一个字段列表，其中包含您要传递的变量名称和值。这些`meta`信息不是必需的，但会显示出来，以便您查看代码的放置位置。

```
.. meta::
   :author: My Company, Inc.
   :description: Introduction to ...
   :copyright: Copyright © 2014 My Company, Inc.

:my-variable: my variable's value

.. _introduction:

==================================================
Introduction to ....
================================================== 
```

在您的模板中，您现在可以`my-variable`使用以下代码进行访问：

```
{%- set my-variable = '' %}
{%- set my-variable_key = 'my-variable' %}
{%- if meta is defined %}
    {%- if my-variable_key in meta.viewkeys() %}
        {%- set my-variable = meta.get(my-variable_key) %}
    {%- endif %}
{%- endif %} 
```

您现在可以使用`my-variable`它的价值。

注意在模板中，`meta`指的是第二个字段列表；`metatags`指的是 docutils 为标头元标记生成的 HTML，从`.. meta::`. 它们是两个不同的对象，具有相同的名称...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-29T23:09:45.373

我不确定这是否能准确回答您的问题，但是`html_context`您可以在 sphinx 配置文件 (conf.py) 中放置一个名为的字典，它允许您定义自定义变量，然后您可以在 html 模板中呈现这些变量。您可以在此处查看文档：http: [//sphinx-doc.org/config.html#confval-html_context](http://sphinx-doc.org/config.html#confval-html_context)

在我的应用程序中，我有一个软件发布日期列表，我想在我的 index.html 文档启动页面中呈现这些日期。我是这样设置的：

**在releases.py中：**

```
RELEASES = [                                                               
   ( "Jun 05, 2014", "095", "" ),                                                
   ( "May 28, 2014", "094", "" ),                                                
   ( "Apr 29, 2014", "093", "" ),
   ...
] 
```

**在 conf.py 中：**

```
# Get list of releases for index page rendering                            
import releases                                    
html_context = {                                                                 
    'releases' : releases.RELEASES,                                   
} 
```

**在 index.html 中：**

```
 {%- for release in releases %}                                         
   <p><span class="style4"><em><strong>{{ release[0] }} ... {{ release[1] }} was released ... </p>
 {%- endfor %} 
```

# javascript - 正则表达式 javascript 数字和字母

> ID：14774604
> 
> 赞同：1
> 
> 时间：2013-02-08T14:21:13.210
> 
> 标签：javascript, regex, formatting

我一生似乎无法弄清楚如何使用格式设置元素的正则表达式。

```
1d 5h 6m 12s 
```

并且还允许它有任何变化，例如

```
1d 

1d 1h

1d 1h 1m 

1d 1s

6m 12s 

etc... 
```

是否可以使用正则表达式进行这种格式设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T14:36:43.487

假设您需要订购，

```
if (/^\s*(?:(?:[1-9]\d*|0)d\s+)?(?:(?:1?\d|2[0-3])h\s+)?(?:[1-5]?\dm\s+)?(?:[1-5]?\ds)?\s*$/.test(str))
{
    // success
} 
```

这是一个快速细分：

1.  和`^`被`$`称为*锚点*。它们匹配字符串的开头和结尾，因此您匹配的是整个字符串，而不仅仅是一部分，*否则* `hello, world! 1d 5h 6m 12s`会通过。

2.  `\s*`and`\s+`匹配零个或多个，以及一个或多个空白字符。

3.  `(?:[1-9]\d*|0)`匹配任意数量的数字，但不匹配以零开头的数字，除非它正好为零。

4.  `(?:1?\d|2[0-3])`匹配 0 到 23 之间的数字，包括 0 和 23 。

5.  `[1-5]?\d`匹配 0 到 59 之间的数字，包括 0 和 59 。

6.  这些`(?: ... )`被称为*非捕获组*。它们就像括号（用于分组），除了普通的 ol' 括号*capture*，我们在这里不需要。

7.  `?`表示前面的实体是可选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:37:05.940

给你一个起点：

```
(\d+d){0,1} //days - not checking for a max

(((([0-1]){0,1}\d)|(2[0-4]))h){0,1} // 24 hours

(((([0-5]){0,1}[0-9])|(60))m){0,1} //60 minutes

(((([0-5]){0,1}[0-9])|(60))s){0,1} //60 seconds 
```

然后把它们放在一起（在这种情况下不用担心空格的数量）

```
(\d+d){0,1}[ ]*(((([0-1]){0,1}\d)|(2[0-4]))h){0,1}[ ]*(((([0-5]){0,1}[0-9])|(60))m){0,1}[ ]*(((([0-5]){0,1}[0-9])|(60))s){0,1}[ ]* 
```

从评论中包括@nhahtdh 的上述改进版本。谢谢！

```
((\d+)d)? *(([01]?\d|2[0-4])h)? *(([0-5]?\d|60)m)? *(([0-5]?\d|60)s)? * 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:37:29.123

我认为这就是你想要的：

```
function parse(s) {
 y = s.match(/(?:(\d+)d\s*)?(?:(\d+)h\s*)?(?:(\d+)m\s*)?(?:(\d+)s)?/);
 console.log(y);
 return y;
} 
```

以下是它的工作原理：

*   `(\d+)d\s*`匹配一些后跟 a 的数字`d`，后跟可选的空格
*   将其包装在 中`(?:...)?`，就像`(?:(\d+)d\s*)?`使上述内容成为可选的一样。这`?:`导致新的括号集不是捕获组。
*   重复 h、m 和 s，你就完成了。

# jquery - is there a jquery cross-browser method to force page reload

> ID：14774610
> 
> 赞同：-1
> 
> 时间：2013-02-08T14:21:31.660
> 
> 标签：jquery, webpage, reload

Is there a jQuery method to reload the page *that will work in all browsers* and cause the page to be reloaded from the server?

My intranet users leave their browsers open often for weeks on end, and when I make a fix or change to a javascript file that is referenced in the page's < head > section, I want the page to be reloaded and to get the latest version of that javascript file.

My plan was to keep a record in a database on the server and poll the database periodically via ajax in order to determine if the relevant timestamp in the database is more recent than the datetime the page was loaded, and if so, force the page to reload.

See: [Force a reload of page in Chrome using Javascript [no cache]](https://stackoverflow.com/questions/10719505/force-a-reload-of-page-in-chrome-using-javascript-no-cache)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T14:23:20.360

No jQuery required, just plain old JavaScript

```
window.location.reload() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:25:10.537

```
window.location.reload(true) 
```

是一个更好的选择，因为它会清除缓存

# php - PHP SimpleXML - don't collapse empty tags

> ID：14774611
> 
> 赞同：0
> 
> 时间：2013-02-08T14:21:39.320
> 
> 标签：php, xml, dom, simplexml

Is there any way to prevent SimpleXML from collapsing empty tags?

For example, if you input

```
<foo></foo> 
```

Then write the output, it has become:

```
<foo /> 
```

What I really want, is for tags that have been defined as closed to be closed but not ones that haven't.

E.g.

an input of

```
<foo />
<bar></bar> 
```

Is output as that, not as :

```
<foo />
<bar /> 
```

or

```
<foo></foo>
<bar></bar> 
```

Is that possible?

# ios6 - 用四个按钮防止 UIAlertView 中的 UIScrollView

> ID：14774613
> 
> 赞同：0
> 
> 时间：2013-02-08T14:21:43.673
> 
> 标签：ios6, uiscrollview, uialertview

我正在使用带有四个选项按钮的 UIAlertView。然而，这导致消息被放入 UIScrollView。我怎样才能防止这种情况？

我知道按钮应该更少，但 iCloud 提供了太多选择。这些按钮是必不可少的：删除本地数据并使用 icloud 数据，将 icloud 数据替换为本地数据，将本地数据与 icloud 数据合并并取消。

顺便说一句：它是一个仅限 iPad 的应用程序 - 所以有足够的屏幕空间用于几行 UIAlertView 的优点

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:21:01.677

推荐的解决方案是`UIActionSheet`改用。

# php - 如何从 php 获取单级对象详细信息？

> ID：14774616
> 
> 赞同：1
> 
> 时间：2013-02-08T14:21:47.080
> 
> 标签：php, class, object, stack-trace

当我使用 debug_backtrace 在 php 中检索堆栈跟踪时，我可以让它包含调用它的对象。能够看到对象的公共和私有属性对我来说非常有用，但是对象太大而无法使用。由于其中的某些变量包含其他对象，因此仅将其打印出来是不可行的-我尝试将 debug_print_backtrace 的输出写入文件，并且在发生故障并停止输出之前它达到了 23G。

我真正需要的是让这个输出限制自己进入一层深度 - 也就是说，输出对象的所有属性，但如果其中一个是另一个对象，而不是进一步列出我需要的所有属性是它的类名。

我知道我可以使用 get_object_vars 来获取对象的公共属性，但是如何获取私有属性呢？print_r、var_export、var_dump 等都是没用的，因为我无法阻止它们递归。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:41:03.627

您可以简单地使用 foreach 循环遍历对象，如下所示：

```
foreach($object as $property => $value)
   if (is_object($value))
      echo(get_class($value)."<br/>");
   else
      echo($property." => ".$value."<br/>"); 
```

但请记住，这不会显示私有属性。关于如何克服它的更广泛的解释可以在这里找到：[http ://www.php.net/manual/en/language.oop5.iterations.php](http://www.php.net/manual/en/language.oop5.iterations.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:08:27.133

您可以将对象转换为数组，然后遍历数组。私有和受保护的属性也可用，前缀是用空字节括起来的类名。您可以像这样测试这种行为：

**测试：**

```
class Test
{
    private $parent;
    public function __construct($parent) {
        $this->parent = $parent;
    }
}

$test = new Test(new Test(new Test(null)));
var_dump((array)$test); 
```

**输出：**

```
array(1) {
  ["�Test�parent"]=>
  object(Test)#2 (1) {
    ["parent":"Test":private]=>
    object(Test)#3 (1) {
      ["parent":"Test":private]=>
      NULL
    }
  }
} 
```

现在你有了一个数组，你可以做一个简单的`foreach`，剥离前缀并区分对象和其他变量：

```
foreach((array)$test as $name => $property) {
    if (ord($name[0]) === 0) {
        $name = substr($name, strrpos($name, "\x0")+1);
    }
    echo $name, ":";
    if (is_object($property)) {
        echo "(object)", get_class($property);
    } else {
        echo var_export($property, true);
    }
    echo "\n";
} 
```

我会把漂亮的打印留给你。

# c# - Use same session object in multithread request without session lock

> ID：14774628
> 
> 赞同：2
> 
> 时间：2013-02-08T14:22:38.810
> 
> 标签：c#, asp.net, multithreading, session

In an asp.net web application (mvc 3,.net 4.0) we are developing, we have some troubles with object on session when we use it in async operation. (It uses Async Targeting Pack library). ASP.NET processes sequentially when we create many async requests to this object. This is because of asp.net session provider is getting locked at the begining of http request. [http://msdn.microsoft.com/en-us/library/ms178587.aspx](http://msdn.microsoft.com/en-us/library/ms178587.aspx) When EnableSessionState attribute of MVC Controller is set as ReadOnly, we can get concurrent response. This workaround does not work for us because we need to store some data in the session as threads complete.

The only thing we require here is a thread-safe, multitasking enabled asp.net session state provider.

For a solution;

1) Should we implement "SessionStateStoreProviderBase" abstract class in our project and implement our own custom state manager? What can be the best practice(s) ?

2) Is there any 3rd party library to achieve this solution or any .net built-in library?

# node.js - 使用 Mongoose 和 Nodejs 中的中间件更新 last_edit

> ID：14774629
> 
> 赞同：0
> 
> 时间：2013-02-08T14:22:44.017
> 
> 标签：node.js, mongodb, mongoose

让我们考虑这个模式：

```
var elementSchema = new Schema({
  name: String,
  last_edit: { type: Date, default: Date.now }
}); 
```

现在，每次我更新任何元素。`name`我希望猫鼬`last_edit`及时更新。

在[猫鼬中间件文档](http://mongoosejs.com/docs/middleware.html)中它说：

```
var schema = new Schema(..);
schema.pre('save', function (next) {
  // do stuff
  next();
}); 
```

我可能会更新它而不是`// do stuff`，但是要保存的文档没有通过，有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:28:33.113

在`'save'`中间件中，`this`是对正在保存的文档的引用：

```
schema.pre('save', function (next) {
  this.last_edit = Date.now();
  next();
}); 
```

# javascript - 如何旋转对象并将其旋转重置为零？

> ID：14774633
> 
> 赞同：2
> 
> 时间：2013-02-08T14:22:57.297
> 
> 标签：javascript, html, canvas, three.js

营业额的问题是轴与几何图形相连。

现在： http: [//f2.s.qip.ru/cMfvUhEy.png](http://f2.s.qip.ru/cMfvUhEy.png)

现在（旋转）： http: [//f3.s.qip.ru/cMfvUhEC.png](http://f3.s.qip.ru/cMfvUhEC.png)

必要（旋转）： http: [//f1.s.qip.ru/cMfvUhEG.png](http://f1.s.qip.ru/cMfvUhEG.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T16:19:18.037

```
mesh.rotation.x = Math.PI / 180 * 90; 
```

*设置*旋转，它不会*增加*它。

在three.js中，一个对象的方向可以通过它的欧拉旋转向量来指定`object.rotation`。旋转矢量的三个分量分别表示围绕对象内部 x 轴、y 轴和 z 轴的弧度旋转。

执行旋转的顺序由 指定`object.rotation.order`。默认顺序是“XYZ”——首先围绕 x 轴旋转，然后是 y 轴，然后是 z 轴。

旋转是相对于对象的*内部*坐标系执行的，而不是世界坐标系。这个很重要。因此，例如，在 x 旋转发生后，对象的 y 轴和 z 轴通常将不再与世界轴对齐。以这种方式指定的旋转不是唯一的。

有关欧拉角的更多信息，请参阅[Wikipedia 文章](http://en.wikipedia.org/wiki/Euler_angles)。Three.js 遵循 Tait-Bryan 约定，如文章中所述。

编辑：如果您想“重置”旋转，请参阅[此答案](https://stackoverflow.com/a/27023024/1461008)。

三.js r.73

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-10T15:39:59.617

如果您想旋转或以其他方式变换对象，但为了进一步变换而将其视为未变换，一种方法是将其添加到新的 Object3D 实例并对其应用附加变换：

```
var line = new THREE.Geometry();

line.vertices.push(
    new THREE.Vector3( 0, 0, 0 ),
    new THREE.Vector3( 0, 10, 0 ),
);

line.rotation.z = 30 * Math.PI / 180;

var lineObject = new THREE.Object3D();
lineObject.Add(line);
// lineObject.rotation.z == 0 and its rotation axes align with the world
// you can perform any further rotations on lineObject 
```

您可以从 Udacity ThreeJS 课程的视频中了解有关这种变换堆叠方法的更多信息：

[https://www.youtube.com/watch?v=RBemS5NCVyw](https://www.youtube.com/watch?v=RBemS5NCVyw)

讲师讨论了如何在时钟的指针旋转后旋转它，与 ThreeJS 的原生旋转然后平移行为相比（所以他在旋转上堆叠平移，而您正在执行两个独立的旋转，但想法是相同的）。

# php - Form::open() 正在生成一个 https URL 而不是 http。我究竟做错了什么？

> ID：14774637
> 
> 赞同：0
> 
> 时间：2013-02-08T14:23:20.867
> 
> 标签：php, laravel

Laravel`Form::open()`正在为 POST 位置生成 HTTPS URL，而不是 HTTP。我怎样才能强迫它工作？

这是`Form::open()`代码：

```
{{ Form::open(URL::to('someurl/somedest', 'POST', array('class' => 'form-horizontal'))); }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:34:38.660

`Form::open()`应该只生成一个`http`url，`Form::open_secure()`用于`https`表单。此外，您不需要`URL::to()`那里。试试这个：

```
{{ Form::open('someurl/somedest', 'POST', array('class' => 'form-horizontal')) }} 
```

这是[文档页面](http://laravel.com/docs/views/forms#opening-a-form)，供参考。

# python - Python 无法运行 Pyprocessing 脚本

> ID：14774641
> 
> 赞同：1
> 
> 时间：2013-02-08T14:23:50.177
> 
> 标签：python, python-2.7, pyprocessing

尝试运行Python 2.7 中[在此处](http://code.google.com/p/pyprocessing/)找到的基本示例 Pyprocessing 脚本时，我收到以下错误消息。知道是什么原因造成的吗？

```
Traceback (most recent call last):
  File "C:\Users\erez\Documents\Robin\scripts\Python\networkx-eg1.py", line 10, in <module>
    run()
  File "C:\Python27\lib\site-packages\pyprocessing-0.1.2.7-py2.7.egg\pyprocessing\__init__.py", line 383, in run
    pyglet.app.run()
  File "C:\Python27\lib\site-packages\pyglet\app\__init__.py", line 123, in run
    event_loop.run()
  File "C:\Python27\lib\site-packages\pyglet\app\base.py", line 135, in run
    self._run_estimated()
  File "C:\Python27\lib\site-packages\pyglet\app\base.py", line 164, in _run_estimated
    timeout = self.idle()
  File "C:\Python27\lib\site-packages\pyglet\app\base.py", line 280, in idle
    window.flip()
  File "C:\Python27\lib\site-packages\pyprocessing-0.1.2.7-py2.7.egg\pyprocessing\flippolicy.py", line 149, in flip
    currentpos = (c_int*2)(0)
NameError: global name 'c_int' is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:50:39.020

这看起来像 pyprocessing 中的一个错误。您使用的是 1.2.7 版本，在该版本中，该文件`flippolicy.py`指的是`c_int`，但该名称未在任何地方定义。在[http://code.google.com/p/pyprocessing/source/browse/trunk/pyprocessing/flippolicy.py](http://code.google.com/p/pyprocessing/source/browse/trunk/pyprocessing/flippolicy.py)的当前源代码中，现在有一行`from ctypes import *`定义`c_int`. 更改也在最新版本 1.3.22 中。你可以升级并再试一次吗？

# ef-code-first - EF Code First 未初始化数据库

> ID：14774645
> 
> 赞同：1
> 
> 时间：2013-02-08T14:24:00.723
> 
> 标签：ef-code-first, code-first, entity-framework-5

我有一个 EF Code First DbContext、一个种子数据的自定义初始化程序，以及一个在 Global.asax 的 Application_Start 部分设置初始化程序的引导静态类。

初始化程序如下所示：

```
public class DropCreateDatabaseWithSeedData : DropCreateDatabaseAlways<MyEntities>
{
    protected override void Seed(MyEntities context)
    {
        context.Genders.Add(new Gender { Id = 1, Name = "Male", SortOrder = 1 });
        context.Genders.Add(new Gender { Id = 2, Name = "Female", SortOrder = 2 });
        context.Genders.Add(new Gender { Id = 3, Name = "Prefer not to say", SortOrder = 3 });
    }
} 
```

引导静态类如下所示：

```
public static class Bootstrap
{
    public static void InitialiseDataAccessLayer()
    {
        Database.SetInitializer(new DropCreateDatabaseWithSeedData());
        var uow = new UnitOfWork();
        uow.Context.Database.Initialize(force: true);
    }
} 
```

Global.asax Application_Start 看起来像：

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        ControllerBuilder.Current.SetControllerFactory(new NinjectControllerFactory());

        DataAccess.Infrastructure.Bootstrap.InitialiseDataAccessLayer();
    } 
```

一切看起来都应该如此，但是没有发生数据库初始化 - 如果我在没有预先存在的数据库的情况下运行应用程序，我会得到一个 SqlClient 异常：

```
A System.Data.SqlClient.SqlException was thrown: "Cannot open database MyEntities requested by the login.  The login failed.  Login failed for user 'localdev'." 
```

用户 localdev 对 SQL Server 具有完全访问权限，我可以使用 SSMS 登录到该 SQL Server 并创建、删除、更新等数据库。

如果我使用现有但为空的数据库运行应用程序，则应用程序会尝试运行它可以运行的第一个查询（在这种情况下，一些用户验证查询）并在尝试查询不存在的表时因“无效对象”异常而失败不存在。

如果我在没有现有数据库的情况下运行 uow.Context.Database.Create() ，则确实创建了数据库，但没有插入种子数据。

如果我将初始化程序更改为 DropCreateDatabaseAlways，则不会发生初始化。

上述所有代码行都遇到断点，因此不会立即跳过任何内容 - 唯一未命中的断点是初始化程序中的种子方法，因此甚至没有被调用（如果初始化，这并不奇怪没有发生！）。

在这一点上，我没有想法 - 一切都按照它应该的方式设置，但没有发生数据库初始化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:00:14.033

哞，

尽管调用`InitialiseDataAccessLayer()`看起来是正确的，但`Database.SetInitializer(new DropCreateDatabaseWithSeedData());`尝试`Database.SetInitializer(new DropCreateDatabaseWithSeedData());`从`ApplicationStart`.

它不会实例化您的`UnitOfWork`，但由于您正在播种，因此我不确定您此时是否需要这样做。

如果没有别的，它的另一个想法。

# javascript - 我可以在 JavaScript 的原型函数中使用私有方法吗？

> ID：14774649
> 
> 赞同：1
> 
> 时间：2013-02-08T14:24:08.440
> 
> 标签：javascript, function, prototype, prototypal-inheritance

我正在学习 OO JavaScript，所以这个问题可能听起来很奇怪。**问题**：`normalize`函数应该是私有的，外部不可访问/可写。**问题**：如何从原型函数`normalize`内部访问？`prepare`

```
var AuthHmac = AuthHmac || (function(_, CryptoJS) {
    function AuthHmac(options) {
        var options = options || {},
            normalize = function(s) { return s.toLowerCase(); };

        this.additionalHeaders = options.additionalHeaders || {};
    };

    AuthHmac.prototype.prepare = function(request) {
        request.headers = request.headers || {};

        _.each(this.additionalHeaders, function(value, name) {
            request.headers[this.normalize(name)] = value;
        });
    };

    return AuthHmac;

})(_, CryptoJS); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:27:23.013

不，如果该`normalize`函数的范围仅限于构造函数，则不是。

但是，由于您的函数不需要特权（即可以访问构造函数的局部变量），您可以轻松地将它放在外面，它仍然是您的模块私有的：

```
var AuthHmac = AuthHmac || (function(_, CryptoJS) {

    function normalize(s) { return s.toLowerCase(); }

    function AuthHmac(options) {
        var options = options || {};

        this.additionalHeaders = options.additionalHeaders || {};
    };

    AuthHmac.prototype.prepare = function(request) {
        request.headers = request.headers || {};

        _.each(this.additionalHeaders, function(value, name) {
            request.headers[normalize(name)] = value;
//                          ^^^^^^^^^
//    No `this.`! "private attributes" in JS are variables, not properties
        });
    };

    return AuthHmac;

})(_, CryptoJS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:27:32.903

```
var AuthHmac = AuthHmac || (function(_, CryptoJS) {

function normalize(s) { return s.toLowerCase(); }

function AuthHmac(options) {
    var options = options || {};

    this.additionalHeaders = options.additionalHeaders || {};
};

AuthHmac.prototype.prepare = function(request) {
    request.headers = request.headers || {};

    _.each(this.additionalHeaders, function(value, name) {
        request.headers[normalize(name)] = value;
    });
};

return AuthHmac;

})(_, CryptoJS); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T14:27:42.023

你不能。JavaScript 没有任何私有或公共属性的概念，因此人们使用闭包和作用域作为“hack”来模拟隐私。但这是有代价的，即原型方法无法访问这些“私有”属性。

但是，在您的具体示例中，`normalize`也可以在构造函数之外定义，因为它不依赖于构造函数内部的任何内容：

```
var AuthHmac = AuthHmac || (function(_, CryptoJS) {

    var normalize = function(s) { return s.toLowerCase(); };

    function AuthHmac(options) {
        var options = options || {};
        this.additionalHeaders = options.additionalHeaders || {};
    };

    AuthHmac.prototype.prepare = function(request) {
        request.headers = request.headers || {};

        _.each(this.additionalHeaders, function(value, name) {
            request.headers[normalize(name)] = value;
        });
    };

    return AuthHmac;

})(_, CryptoJS); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T14:28:47.980

将函数定义`normalise`为范围内的命名函数，而不是将其放在对象的属性中：

```
var AuthHmac = AuthHmac || (function(_, CryptoJS) {

  function normalize(s) {
    return s.toLowerCase();
  }

  function AuthHmac(options) {
    var options = options || {};

    this.additionalHeaders = options.additionalHeaders || {};
  };

  AuthHmac.prototype.prepare = function(request) {
    request.headers = request.headers || {};

    _.each(this.additionalHeaders, function(value, name) {
        request.headers[normalize(name)] = value;
    });
  };

  return AuthHmac;

})(_, CryptoJS); 
```

# repository - Repository Pattern - Context and Data Mapping

> ID：14774658
> 
> 赞同：0
> 
> 时间：2013-02-08T14:24:33.410
> 
> 标签：repository, repository-pattern, data-mapping

I know there are a lot of Repository Pattern questions out there but I hope someone will be kind enough to help me understand some principles.

I always see the repository class constructor using a context and this context is often EF or NHibernate. Its then easy to use the `dbset<T>` for CRUD methods. Since I do not use anything like this, but rather make calls to a non-sql data source through API calls, I can't figure out how to use a `Repository<T>` and a method like `T GetById(int id)` when there is no underlying context that knows how to translate `<T>` to the right obect. Do I have to create a custom context and my own data mapping? Will I end up having a specific Repository for every class I have? Somehow, somewhere, I need to take that `<T>` and know what it is in order create it and fill in its properties.

I've seen some examples where the Repository Pattern is used with a File and it looks like each type has it own repository where the call and the mapping is done.

Any examples of Repository Pattern that targets multiple data sources?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:47:38.373

The Repository Pattern is a concept independent of one or more data sources, one of the purposes being to abstract all persistence related. I think you want an example of a repository implementation where more than one persistence types are used. That's very easy as a repository (as an implementation) is just a class which has nothing to do with Ef or whatever.

In fact, most of the examples you've seen are 'wrong' because just wrapping a Db or a NH context without anything else, it doesn't do anything.

The point is the repository uses all the data sources it needs. It might be only one (most common case) or it may be 2-3.Let's say that a file is uploaded and you want to save the file on the file system (or send it on a cloud?) and store some metadata in the local db.

The repository will take as dependency a DAO (like EF context) to talk with the local db and it access directly the file system. If the file is to be uploaded to the cloud, the repository will also take a dependency on the cloud provider.

There's nothing complex here, the Repository just uses the db and the cloud while hiding them from the rest of the app. The app doesn't care where and how you'll store that file. So when you are writing the Repository class you can do whatever you want as long as you respect the contract (interface).

# java - Editing runtime classpath in IntelliJ to include src/main/config

> ID：14774665
> 
> 赞同：3
> 
> 时间：2013-02-08T14:24:52.127
> 
> 标签：java, intellij-idea, classpath

I have writing a Java application in IntelliJ 12 using Maven and Spring. I have the following folders:

**src/main/java** : for Java code

**src/main/resources**: for resources to be packaged into final built JAR

**src/main/config**: for external resources, i.e. the spring configuration file.

I have tried making the src/main/config a sources folder, however, upon running my application, it fails with a FileNotFoundException on the following line:

```
new ClassPathXmlApplicationContext("spring-config.xml"); 
```

`spring-config.xml` sits inside **src/main/config**.

Also, I have noticed this file does not get copied over to the target directory that intelliJ produces when 'Make' building the project.

For now I am resorting to using a FileBasedApplicationContext for testing, however it would be nice to be able to run the application from within intelliJ without having to edit the code.

Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T14:59:27.793

在这里查看[我的评论](http://youtrack.jetbrains.com/issue/IDEA-97759#comment=27-441982)。资源目录/模式必须在您的`pom.xml`文件中明确定义，如下所示：

```
<build>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
        </resource>
        <resource>
            <directory>src/main/config</directory>
        </resource>
    </resources>
</build> 
```

# maven - MavenResourcesExecution 如何获取变量而不是写入文件？

> ID：14774667
> 
> 赞同：0
> 
> 时间：2013-02-08T14:24:59.647
> 
> 标签：maven, maven-plugin, maven-plugin-development

我在我的插件中使用它：

```
MavenResourcesExecution mavenResourcesExecution = new MavenResourcesExecution(resources, outputFileDirectory, project, encoding, buildFilters, Collections.<String>emptyList(), session);

    try {
        mavenResourcesFiltering.filterResources(mavenResourcesExecution);
    } catch (MavenFilteringException e) {
        e.printStackTrace();
    } 
```

并将所有内容写入文件，但是我想将其作为变量检索，而不是将其写入文件。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:14:42.000

我已经实现了一个带有拦截器的插值器，并且可以检索变量的值。

# linux - 套接字编程中的RAW套接字是什么

> ID：14774668
> 
> 赞同：37
> 
> 时间：2013-02-08T14:24:59.680
> 
> 标签：linux, sockets

当我通过套接字编程时，我无法清楚地理解`RAW_SOCKET`。

我的理解是

如果我使用此选项打开一个套接字`AF_INET`，则`RAW_SOCKET` 意味着我可以在标头之前创建自己的标头，但最终数据以协议`AF_INET`格式发送。`AF_INET`是我的理解是否正确。如果错了可以解释一下。

谢谢你

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-29T08:00:12.860

在每一层中，一个数据包都有两个不相交的部分：Header 和 Payload。

**非原始套接字**意味着您可以确定传输层有效负载。即，创建传输、网络和数据链路层标头是操作系统的任务。

**原始套接字**意味着您可以确定数据包的每个部分，无论是标头还是有效负载。请注意，原始套接字是一个通用词。我将原始套接字分类为：网络套接字和数据链路套接字（或者 L3 套接字和 L2 套接字）。

在 L3 Socket 中，您可以在网络层设置数据包的标头和有效负载。例如：如果网络层协议是 IPv4，则可以确定 IPv4 的 header 和 payload。因此，您可以设置传输层标头/有效负载、ICMP 标头/有效负载、路由协议标头/有效负载，...。

在 L2 Socket 中，您可以在数据链路层设置数据包的标头和有效负载，即数据包中的所有内容。因此，您可以使用 L3 Socket + 确定 ARP 标头/有效负载、PPP 标头/有效负载、PPPOE 标头/有效负载，...。

**现在在编程中：**

*   socket(AF_INET,RAW_SOCKET,...) 表示 L3 套接字，网络层协议 = IPv4
*   socket(AF_IPX,RAW_SOCKET,...) 表示 L3 套接字，网络层协议 = IPX
*   socket(AF_INET6,RAW_SOCKET,...) 表示 L3 套接字，网络层协议=IPv6
*   socket(AF_PACKET,RAW_SOCKET,...) 表示 L2 套接字，数据链路层协议 = 以太网

第三个参数指定有效负载协议。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-08T14:29:25.310

RAW_SOCKET 允许用户在 Internet (IP) 级别上实现它自己的传输层协议。您负责创建和解析传输层标头及其背后的逻辑。一个数据包看起来像：

```
-------------------------------------------------------------------
| Ethernet (typically) header | IP header | Your header | payload |
------------------------------------------------------------------- 
```

[编辑： Linux 手册页](http://linux.die.net/man/7/raw)上对原始套接字有很好的描述，或者如果您使用的是 Windows ，请[点击此处。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740548%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-08T15:09:57.600

您还可以将 SOCK_RAW 与“数据包套接字”一起使用，这将允许您*完全*控制 L2（以太网）和 L3（IP）层。这意味着您可以完全自定义呈现来自 NIC 的数据包。

详情在这里：

[http://www.kernel.org/doc/man-pages/online/pages/man7/packet.7.html](http://www.kernel.org/doc/man-pages/online/pages/man7/packet.7.html)

[http://austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-on-linux/](http://austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-on-linux/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T14:35:33.673

它也用于 ICMP (ping) 等协议，您必须知道 ICPM 数据包的结构才能创建它。内核也不会修改您的数据包

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2016-06-27T09:06:01.337

```
 Once the application creates RAW socket is used to send and
    receive packets from source to destination those all packets are
    treated as datagram on an unconnected socket

            when sending IPv4 data, an application has a choice on
    whether to specify the IPv4 header at the front of the outgoing
    datagram for the packet.

            If the IP_HDRINCL socket option is set to true for an IPv4
    socket (address family of AF_INET), the application must supply the
    IPv4 header in the outgoing data for send operations.

            If this socket option is false (the default setting), then
    the IPv4 header should not be in included the outgoing data for
    send operations.

            It is important to understand that some sockets of type
    SOCK_RAW may receive many unexpected datagrams. For example, a PING
    program may create a socket of type SOCK_RAW to send ICMP echo
    requests and receive responses. While the application is expecting
    ICMP echo responses, if several SOCK_RAW sockets are open on a
    computer at the same time, the same datagrams may be delivered to
    all the open sockets. An application must have a mechanism to
    recognize and to ignore all others.

            For a PING program, such a mechanism might include
    inspecting the received IP header for unique identifiers in the
    ICMP header (the application's process ID, for example)

            TCP data cannot be sent by using raw socket
            Referred from below link : 
                   https://msdn.microsoft.com/en-us/library/windows/desktop/ms740548%28v=vs.85%29.aspx 
```

# tsql - T-SQL 检测存储过程返回的列的类型

> ID：14774669
> 
> 赞同：1
> 
> 时间：2013-02-08T14:25:01.387
> 
> 标签：tsql, stored-procedures, sql-server-2012, detect, column-types

我不打算深入细节，但我需要一种方法来通过存储过程确定返回列的类型。

有没有办法实现这一点，我不寻找适用于指定过程的解决方案 - 我应该能够在其他过程中检测到这个作为参数接收其他过程的名称。

我正在使用 SQL Server 2012。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:31:36.200

在 SQL Server 2012 中，您可以使用[`sp_describe_first_result_set`](http://msdn.microsoft.com/en-us/library/ff878602.aspx)

顾名思义，这将返回有关仅由存储过程返回的**第一个结果集的元数据。**下面的例子。

```
CREATE PROC Foo
AS
SELECT *
FROM sys.objects

GO

EXEC sp_describe_first_result_set @tsql = N'Foo' 
```

# android - 在其他应用程序中重复使用相同的 AdMob 代码

> ID：14774670
> 
> 赞同：0
> 
> 时间：2013-02-08T14:25:02.953
> 
> 标签：android, admob

我创建了一个网站/应用程序，并成功在其中一个应用程序中展示广告。现在，我有第二个应用程序，我想在其中显示广告（保持第一个应用程序不变，显示广告）。现在，我是否应该再次在 AdMob 中创建一个新网站/应用程序。当然，创建一个新站点/应用程序将分别显示我从每个应用程序中赚取了多少。但是，如果我不需要，我可以直接将第一个应用程序中的代码（XML 代码）复制粘贴到第二个应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:40:29.250

重用代码应该没有问题，但您应该知道 Admob 中应用程序的设置将不同于您的新应用程序（名称/链接等）。

Admob 建议您为每个有广告的 Android 应用程序创建一个新站点/应用程序。它会分别显示您从每个应用程序中赚取的收入，但也有一个组合视图来显示两者的总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:39:04.277

该代码应该可以工作，但只需替换一个字符串（广告 id），而所有 xml 都可以保持不变。所以，我不明白你为什么不应该惹上这个麻烦。此外，正如您所说，将其分开很好，因为您可以看到每个人的表现如何。

# asp.net - 使用母版页时如何正确调整 Telerik RadGrid 的高度

> ID：14774671
> 
> 赞同：0
> 
> 时间：2013-02-08T14:25:07.230
> 
> 标签：asp.net, telerik, telerik-grid

我在同样具有 100% 高度的 RadSplitter 的 RadPane 中有一个高度为 100% 的 Telerik RadGrid。如果我没有母版页，RadGrid 会自动调整到浏览器窗口的高度而不会出现问题。如果我使用母版页，则该母版页内容的高度不包括在计算中，因此 RadGrid 的页脚被截断。任何人都可以提出解决这个问题的最佳方法吗？

![截断的 RadGrid](../Images/d572d9821fb435085520da923ff2e053.png)

**母版页**

```
<head runat="server">
    <title></title>
    <style type="text/css">
        html, body, form 
        {
            height:100%;
            margin: 0px;
            padding: 0px;
            overflow: hidden;    
        }
    </style>
    <asp:ContentPlaceHolder id="head" runat="server" />
</head>
<body>
    <div style="height:100px; background-color:blue;">Test Master Content</div>
        <form id="form1" runat="server">
            <telerik:RadScriptManager ID="RadScriptManager1" runat="server" />
            <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server" />
            <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server" />
        </form>
</body> 
```

**子页面**

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
    <telerik:RadSplitter ID="RadSplitter1" runat="server" Width="100%" Height="100%" Orientation="Horizontal">
        <telerik:RadPane ID="RadPane1" runat="server" Width="100%" height="50px" BackColor="Red">
             <p>This is a test</p>
        </telerik:RadPane>
        <telerik:RadSplitBar ID="RadSplitBar1" runat="server" />
        <telerik:RadPane ID="RadPane2" runat="server" Width="100%" Height="100%">
            <telerik:RadAjaxManagerProxy ID="AjaxManagerProxy1" runat="server">
                <AjaxSettings>
                    <telerik:AjaxSetting AjaxControlID="RadGrid1">
                        <UpdatedControls>
                            <telerik:AjaxUpdatedControl ControlID="RadGrid1" />
                        </UpdatedControls>
                    </telerik:AjaxSetting>
                </AjaxSettings>
            </telerik:RadAjaxManagerProxy>
            <telerik:RadGrid ID="RadGrid1" 
            runat="server" 
            Width="100%"
            Height="100%"
            OnNeedDataSource="RadGrid1_NeedDataSource" />
    </telerik:RadPane>
    </telerik:RadSplitter>
   </asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:40:31.430

您将固定高度与相对高度相结合，主体是浏览器高度的 100%，但添加了 100px，将其发送到屏幕外。在内容中，您的 radpane 2 为 100%，但 Radpane1 为 50px ......所以它再次被推到屏幕外 - 但是您让 radsplitter 说只显示 100% 的浏览器，因此砍掉您需要使用这些值直到你觉得它看起来可以接受，尝试将 radsplitter 设置为 140% ...欢迎来到 css tuneville

# php - 如果查询存在则回显此如果不存在则回显此？

> ID：14774673
> 
> 赞同：-2
> 
> 时间：2013-02-08T14:25:09.007
> 
> 标签：php, mysql

目前，我的查询与我网站上的所有成员相呼应，它会显示他们的个人资料图片并链接到他们的个人资料页面。假设我有 50 个成员，并且查询限制为 60，那么我想用默认图像填充空白空间并链接到默认页面，所以我正在寻找一个 if 语句来说明用户是否不存在然后回显这张照片而是链接？

有人可以告诉我我哪里出错了。谢谢

```
<?php
        $user_set = get_users();
        while ($users = mysql_fetch_array($user_set)) {

            if (!file_exists($users)) {
    $users = "data/photos/0/_default.jpg";
}

        $age = age_from_dob($users['dob']);
             echo "
            <div class=\"sugarushcase\">
            <a href=\"profile.php?id={$users['id']}\"><img width=80px height= 80px src=\"data/photos/{$users['id']}/_default.jpg\" class=\"boxgrid\"/></a><h58> {$users['first_name']} {$users['last_name']}</h58><br/><br/><h52>{$users['contact_number']}<br/><br/> ".$age.", From {$users['location']}</h52>

            </div>";
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:35:10.827

类似于以下内容？

```
<?php

    $user_set = get_users();
    $user_count = mysql_num_rows($user_set);
    while ($users = mysql_fetch_array($user_set)) {

        if (!file_exists($users)) {
            $users = "data/photos/0/_default.jpg";
        }

        $age = age_from_dob($users['dob']);

        echo "<div class=\"sugarushcase\">
        <a href=\"profile.php?id={$users['id']}\"><img width=80px height= 80px src=\"data/photos/{$users['id']}/_default.jpg\" class=\"boxgrid\"/></a><h58> {$users['first_name']} {$users['last_name']}</h58><br/><br/><h52>{$users['contact_number']}<br/><br/> ".$age.", From {$users['location']}</h52>
        </div>";

    }

    // if there were less than 60 users we need some default profiles to fill the spaces
    if($user_count < 60){
        // how many default spaces do we need?
        $default_profiles_needed = 60 - $user_count;        
        for($i = 1; $i <= $default_profiles_needed; $i++){
            echo "<div class=\"sugarushcase\">
                    <a href=\"default.php\">
                        <img width=80px height= 80px src=\"default.jpg\" class=\"boxgrid\"/>
                    </a>
                </div>";
        }
    }

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:35:43.237

你可以找这个

```
 <?php
    $user_set = get_users();
    if (!$user_set) {

                 $users = "data/photos/0/_default.jpg";
                   }
                   else {
    while ($users = mysql_fetch_array($user_set)) {

    $age = age_from_dob($users['dob']);
         echo "
        <div class=\"sugarushcase\">
        <a href=\"profile.php?id={$users['id']}\"><img width=80px height= 80px src=\"data/photos/{$users['id']}/_default.jpg\" class=\"boxgrid\"/></a><h58> {$users['first_name']} {$users['last_name']}</h58><br/><br/><h52>{$users['contact_number']}<br/><br/> ".$age.", From {$users['location']}</h52>

        </div>";
    } }
?> 
```

# jquery - 为什么更改按钮的背景颜色时默认的 CSS 会丢失？

> ID：14774676
> 
> 赞同：3
> 
> 时间：2013-02-08T14:25:14.997
> 
> 标签：jquery, css, background-color

我观察到一个非常奇怪的问题，我无法完全理解这个问题。因此，我想请你们解释一下，`CSS`当我使用 jQuery 更改按钮的背景颜色时，我失去了按钮的默认值是怎么回事？

这[在 jsfiddle 中得到了演示](http://jsfiddle.net/Boro/899Wn/3/)`FF`（在和上进行了测试`Chrome`）。如果您将鼠标悬停在按钮上，它将失去其样式，例如没有圆形边框，这不是人们所期望的。**你能解释一下为什么会这样吗？另外，您建议使用什么解决方法来保留默认的“CSS”设置？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:29:11.443

如果您在 css 中将按钮的背景颜色设置为开始，则将其设置为 jQuery 中的那种颜色，这样就可以了。

[http://jsfiddle.net/899Wn/8/](http://jsfiddle.net/899Wn/8/)

```
button {
    background: blue;
}

$("#nav ul li button").hover(function() {
    $(this).stop().animate({
        backgroundColor: '#E5E5E5'
    }, 500);
}, function() {
    $(this).stop().animate({
        backgroundColor: 'blue'
    }, 500);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:30:45.573

很快你就开始对表单元素进行风格化，即。< button href="#" > 标签，尤其是带有背景色或边框的标签，浏览器会重新渲染元素。然后，它会显示您的特定 .css 并且您会丢失“浏览器 + 软件 + os”的特定样式。

[样式化表单控件介绍](http://www.456bereastreet.com/archive/200410/styling_even_more_form_controls/) 和 [样式化表单控件详细信息](http://www.456bereastreet.com/archive/200701/styling_form_controls_with_css_revisited/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T14:34:48.277

我相信页面上的默认按钮是系统生成的按钮（即 Windows）。更改任何具有视觉影响的样式都会导致您的浏览器呈现按钮，从而删除某些样式。一旦你到达这里，现在就回来了。最好的做法是将样式按钮向上看起来非常相似，然后您可以修改个别样式而不会丢失其余部分。类似的答案在这里：[Chrome 默认按钮样式](https://stackoverflow.com/questions/5031979/chrome-default-button-style)。我会看看我是否能找到更多关于这件事的信息。

**编辑：**

此页面上的第二个答案似乎支持了我的想法，尽管仍然没有参考：[https ://stackoverflow.com/a/10265336/719718](https://stackoverflow.com/a/10265336/719718)

# jquery - 在 jquery 中解析日期选择器

> ID：14774677
> 
> 赞同：5
> 
> 时间：2013-02-08T14:25:17.387
> 
> 标签：jquery, date, datepicker

在表单中，我有两个日期输入，开始日期输入和结束日期输入。我也实现了日期选择器，

```
 $("#StartDate").datepicker(); 
```

datepicker 将其格式化为： 02/27/2013 我不喜欢但可以。

我想在将日期放入序列化数组之前对其进行解析。这是一个好的方法吗？如果是这样，我怎么能做到这一点？

如何实现 End Date inut 大于 Start That，并且不允许提交 oppsoite 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T14:28:16.653

尝试这个：

```
 $.datepicker.parseDate('dd/mm/yy', '22/04/2010'); 
```

参考：[https ://jqueryui.com/datepicker/#date-formats](https://jqueryui.com/datepicker/#date-formats)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T14:28:32.597

设置日期选择器后，是的，它确实以纯文本格式设置了日期，但它也保留了基础日期。

[http://api.jqueryui.com/datepicker/#method-getDate](http://api.jqueryui.com/datepicker/#method-getDate)

`var currentDate = $( ".selector" ).datepicker( "getDate" );`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:28:39.823

您可以使用[dateFormat](http://api.jqueryui.com/datepicker/#option-dateFormat)设置自己的格式：

```
$("#StartDate").datepicker({ dateFormat: "yy-mm-dd" }); 
```

*（另请参阅[jquery ui datepicker](http://jqueryui.com/datepicker/#date-formats)中的示例。）*

正如其他人所说，您可以使用实用功能：

```
// Extract a date from a string value with a specified format.
$.datepicker.parseDate( format, value, settings ) 
```

# java - 由于 org.eclipse.core.runtime 无法启动 Eclipse

> ID：14774686
> 
> 赞同：4
> 
> 时间：2013-02-08T14:25:50.740
> 
> 标签：java, eclipse, osgi, helios

我将一些插件复制到我的 Eclipse 安装中（特别是来自此[答案](https://stackoverflow.com/questions/14772602/create-class-diagram-automatically/14772827#comment20680723_14772827)的 Green 和 ObjectAid ）。
我删除了它们（因为它不起作用）但现在我无法启动 Eclipse（即使使用`eclipse -clean`）。
我得到：

> !会话 2013-02-08 16:21:16.949 -------------------------------------------------- --------- eclipse.buildId=M20110210-1200 java.version=1.6.0_29 java.vendor=Sun Microsystems Inc. BootLoader 常量：OS=win32, ARCH=x86, WS=win32, NL=el_GR Framework参数：-product org.eclipse.epp.package.jee.product 命令行参数：-os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.jee.product -clean
> 
> !ENTRY org.eclipse.osgi 4 0 2013-02-08 16:21:17.779 !MESSAGE 应用程序错误 !STACK 1 java.lang.IllegalStateException: 无法获取应用程序服务。确保 org.eclipse.core.runtime 包已解析并启动（请参阅 config.ini）。在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369) 在 org.eclipse.core .runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source ) 在 java.lang.reflect.Method.invoke(Unknown Source) 在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:

我的`config.ini`似乎还可以。我将它与下载的 Eclipse Helios 版本进行了比较，它们是相同的。

```
#This configuration file was written by: org.eclipse.equinox.internal.frameworkadmin.equinox.EquinoxFwConfigFileParser   
#Fri Feb 08 14:57:16 EET 2013  
org.eclipse.update.reconcile=false  
eclipse.p2.profile=epp.package.jee  
osgi.instance.area.default=@user.home/workspace  
osgi.framework=file\:plugins/org.eclipse.osgi_3.6.2.R36x_v20110210.jar  
equinox.use.ds=true  
eclipse.buildId=M20110210-1200  
osgi.bundles=reference\:file\:org.eclipse.equinox.simpleconfigurator_1.0.200.v20100503.jar@1\:start  
org.eclipse.equinox.simpleconfigurator.configUrl=file\:org.eclipse.equinox.simpleconfigurator/bundles.info  
eclipse.product=org.eclipse.platform.ide  
osgi.splashPath=platform\:/base/plugins/org.eclipse.platform  
osgi.framework.extensions=  
osgi.bundles.defaultStartLevel=4  
eclipse.application=org.eclipse.ui.ide.workbench  
eclipse.p2.data.area=@config.dir/../p2/ 
```

我该如何解决这个问题？

在插件文件夹中做一个差异我看到以下内容丢失：

```
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.jem.workbench_2.0.300.v200910290230.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.jem_2.0.400.v201005110200.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.jst.common.frameworks_1.1.403.v201012160000.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.jst.common.ui_1.0.3.v201101101700.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.jst.j2ee.core_1.2.4.v201102101900.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.jst.j2ee.web_1.1.404.v201102030400.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.jst.j2ee_1.1.404.v201102081800.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.jst.jee_1.0.302.v201101122300.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.jst.jsp.core_1.2.304.v201102160550.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.jst.jsp.ui_1.1.503.v201101262228.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.jst.server.core_1.2.101.v20100421.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.jst.server.ui_1.1.101.v20100823b.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.common.emfworkbench.integration_1.2.3.v201012020600.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.common.frameworks_1.2.0.v201003040800.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.common.modulecore.ui_1.0.4.v201101101700.jar   
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.common.modulecore_1.2.5.v201101270100.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.css.core_1.1.402.v201102031915.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.dtd.core_1.1.401.v201101122255.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.html.core_1.1.404.v201101190004.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.internet.monitor.core_1.0.404.v20090609.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.internet.monitor.ui_1.0.405.v20100309.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.jsdt.core_1.1.4.v201102102045.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.jsdt.debug.core_1.0.3.v201011040143.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.jsdt.debug.rhino_1.0.1.v201008170101.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.jsdt.debug.ui_1.0.3.v201011040143.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.jsdt.ui_1.1.4.v201102160540.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.jsdt.web.core_1.0.304.v201102160550.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.jsdt.web.support.jsp_1.0.303.v201012160047.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.jsdt.web.ui_1.0.304.v201012160349.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.server.core_1.1.206.v20110110.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.server.discovery_1.0.101.v20100707.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.server.ui.doc.user_1.1.300.v201005192125.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.server.ui_1.1.207.v20110119.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.sse.core_1.1.504.v201102160550.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.sse.ui_1.2.3.v201102102045.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.standard.schemas_1.0.300.v201004110600.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.validation.ui_1.2.204.v201004150700.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.validation_1.2.201.v201101270100.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.web.ui_1.1.400.v201004141630.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.web_1.1.402.v201012160000.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.ws.explorer_1.0.507.v201004220342.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.ws.service.policy.ui_1.0.202.v201004211732.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.wsdl.ui_1.2.304.v201012071645.jar    
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.wsdl_1.2.104.v201012082239.jar    
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.xml.core_1.1.503.v201102102045.jar  
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.xml.ui_1.1.103.v201101122108.jar
C:\eclipse-jee-helios-SR2-win32\eclipse\plugins\org.eclipse.wst.xsd.ui_1.2.304.v201101251958.jar 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:40:44.443

我认为您可能已经删除了“插件”目录中的一些关键文件夹。如果我是您，我会将新下载和解压缩的 Eclipse 安装内容（按目录）与启动有问题的内容进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T02:40:10.033

发生此错误是因为您`config.ini`在删除插件时删除了文件。因此，当 Eclipse 启动时找不到配置`config.ini`时，它会使用不适合您的操作系统的默认配置。以下步骤可以解决您的问题：

1.  删除配置文件夹中的设置。
2.  创建一个新的 config.ini 文件。
3.  复制以下设置并保存。
4.  重启 Eclipse。

这些是设置：

```
osgi.splashPath = platform:/base/plugins/org.eclipse.platform  
osgi.bundles=org.eclipse.equinox.common@2:start, 
    org.eclipse.update.configurator@3:start, org.eclipse.core.runtime@start  
eclipse.product=org.eclipse.sdk.ide  
osgi.instance.area.default=@user.home/workspace  
eof=eof 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-11T11:09:53.857

我今天遇到了同样的问题，因为我的电脑意外关机，我以这种方式解决了：

*   找到配置目录`.eclipse`（一般在windows`C:\Users\{user}\.eclipse\{eclipse version}`
*   删除那个目录
*   重启日食

所以配置目录将被重新创建，你应该重新下载你的插件

# php - Wordpress 获取帖子

> ID：14774690
> 
> 赞同：0
> 
> 时间：2013-02-08T14:26:02.893
> 
> 标签：php, wordpress

您好，我正在尝试获取帖子内容并将其发布在我的 index.php 上。现在，此代码不会显示任何内容。

```
<?php 
$post = get_posts( array( 'name' => 'title' ) );
echo $post->post_title;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:30:32.803

您必须在循环中执行此操作，这是 codex 的示例：

```
<ul>
<?php
global $post;
$args = array( 'numberposts' => 5, 'offset'=> 1, 'category' => 1 );
$myposts = get_posts( $args );
foreach( $myposts as $post ) :  setup_postdata($post); ?>
    <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
<?php endforeach; ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:43:40.203

这是您可以通过传递帖子 id 来获取帖子内容的方式

`$content = get_post_field('post_content', $my_postid);`

并获取帖子名称使用以下代码

`echo $post->post_name;`

希望这对你有用。

# objective-c - GKAchievement setShowsCompletionBanner 存在但无法识别选择器

> ID：14774695
> 
> 赞同：0
> 
> 时间：2013-02-08T14:26:27.763
> 
> 标签：objective-c, game-center

我收到 [GKAchievement setShowsCompletionBanner:] 的“无法识别的选择器”崩溃

根据 Apple 的 GKAchievement 类参考，showsCompletionBanner 是该类的属性。

在我的代码中，我使用：

```
achievement.showsCompletionBanner = YES; 
```

这是我代码中唯一的一个地方（我仔细检查了！）

崩溃仅发生在实时应用程序上。我无法重现它。我无法理解如何为对象上确实存在的属性获取无法识别的选择器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:35:08.193

我正在浏览我们应用程序的支持票，我注意到所有遇到此问题的用户都使用 iOS 4.x。

更仔细地阅读 Apple 文档，我发现了这一点：

```
showsCompletionBanner
Available in iOS 5.0 and later. 
```

我很确定这是我的错误，我应该在使用该属性之前使用 respondsToSelector:。

`unrecognized selector`我相信，对于通常具有被调用方法或属性的类来说，这是唯一能让你崩溃的方法。

# .htaccess - 使用 .htaccess 隐藏将 http 重定向到 https

> ID：14774697
> 
> 赞同：0
> 
> 时间：2013-02-08T14:26:33.267
> 
> 标签：.htaccess, http, redirect, https

我需要将 http 页面重定向到 https 并使其隐藏，例如：

[http://www.example1.com](http://www.example1.com) -> [https://www.example2.com](https://www.example2.com)

所以 example1 在 URL 栏中始终可见，而 example2 是隐藏的。

这样的事情会起作用吗？如果不是，我应该改变什么？

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/index.html
RewriteRule ^index.html https://www.example2.com [L]
RewriteCond %{HTTPS} on
RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:35:41.030

我会看看这两篇文章，他们似乎有你的答案。:)

[http://joseph.randomnetworks.com/2004/07/22/redirect-to-ssl-using-apaches-htaccess/](http://joseph.randomnetworks.com/2004/07/22/redirect-to-ssl-using-apaches-htaccess/)

[https://serverfault.com/questions/116206/how-do-i-use-htaccess-to-always-redirect-from-http-to-https](https://serverfault.com/questions/116206/how-do-i-use-htaccess-to-always-redirect-from-http-to-https)

# android - 提取/共享信息

> ID：14774699
> 
> 赞同：0
> 
> 时间：2013-02-08T14:26:34.373
> 
> 标签：android, android-c2dm

我正在构建一个应用程序，帮助防止患者失踪或帮助找到他们......我能够获取坐标并通过短信将它们发送到定义的号码。由于时间限制，我正在寻求帮助以缩小在攻击下一部分之前我应该​​研究的内容。问题是有没有更好的方法在不同设备上的两个应用程序之间共享数据，而不是短信。

从消息中提取信息的任何提示也将非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:34:48.997

我认为推送通知可能是您前进的方向，请查看 Google 的这篇关于如何实现它们的文章：

[https://developers.google.com/android/c2dm/](https://developers.google.com/android/c2dm/)

# php - 如何从 CLI 查找 php 中内置模块的版本号

> ID：14774700
> 
> 赞同：20
> 
> 时间：2013-02-08T14:26:34.607
> 
> 标签：php, module, version

基本上我是php新手，我刚刚在我的机器上安装了php。因此我们可以通过创建一个 php 文件并在其中编写以下代码来了解 php 配置的全部信息

```
<?php 
  phpinfo();
?> 
```

我通过浏览器打开它，可以看到所有的配置信息

但是有什么方法可以从linux终端知道php默认模块的版本（顺便说一下我正在使用fedora :)）

那么我要问的是，是否有任何方法可以通过一些 php 命令从终端找到所有模块或单个模块的版本号？

例如，有一个命令`php -me`显示安装 php 时默认出现的所有 php 模块，如下所示

```
[PHP modules]
mysql
mysqli
openssl
pcntl
pcre
PDO
pdo_mysql
pdo_sqlite
Phar
readline
Reflection
session
shmop
....
..... 
```

但同样我也想从终端中找到单个模块的版本号，我们怎样才能找到它？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-03-17T04:41:31.980

要查看某个特定模块的版本，可以使用命令`php --ri <module> | grep Version`。

例如：

`php --ri mongo | grep Version`

回报：

```
Version => 1.6.5 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-08T14:31:48.323

这应该可以解决问题：

```
php -r 'foreach (get_loaded_extensions() as $extension) echo "$extension: " . phpversion($extension) . "\n";' 
```

更具可读性的版本（用于代码使用）：

```
$extensions = get_loaded_extensions();
foreach ($extensions as $extension) {
    echo "$extension: " . phpversion($extension) . "\n";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T14:32:41.270

如果你想在脚本 [http://php.net/manual/en/function.phpversion.php中执行，你需要 phpversion() 命令](http://php.net/manual/en/function.phpversion.php)

# ios - ios_distribution.cer 被撤销，我可以提交到 AppStore 吗？

> ID：14774701
> 
> 赞同：1
> 
> 时间：2013-02-08T14:26:41.197
> 
> 标签：ios, xcode, app-store, code-signing, application-loader

我认为答案是否定的，但我需要确定。

*   ios_distribution.cer 文件显示为已撤销
*   配置文件显示为无效（*是因为 cer 被撤销了吗？*）

我自己不生成证书，我只是构建应用程序。我的客户让其他人建立了证书，而且肯定是其他人撤销了它。

我今天提交到 AppStore，Application Loader 出现以下错误：

> 应用程序未通过协同设计验证。签名无效，包含不允许的权利，或者未使用 iPhone 分发证书签名。

错误是因为证书被吊销了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:25:29.467

**不，你不能提交！**

我正在回答我自己的问题，因为我刚刚使用新证书重建了应用程序。

*   是的，配置文件显示为无效，因为证书已被吊销。
*   是的，错误是因为证书被吊销。

*显然你不能提交它——这首先会破坏撤销证书的意义。*

# groovy - Groovy 2.1.0 带有@CompileStatic 的 switch-case-break 语句的奇怪行为

> ID：14774709
> 
> 赞同：4
> 
> 时间：2013-02-08T14:27:03.677
> 
> 标签：groovy, switch-statement, compile-static

我是新手 groovy 程序员，我遇到了带有静态编译（`@CompileStatic`注释）的 switch-case-break 语句的奇怪行为。似乎`break`s被忽略了。
这是一个错误还是我在阅读文档时错过了一些东西。

环境：

```
 - groovy sdk 2.1.0
    - Oracle JDK build 1.7.0_13-b20 on Mac OS X Lion 10.7.5 
```

测试用例：

```
import groovy.transform.CompileStatic
@CompileStatic
class Test {
    def test() {
        ['A', 'B', 'C'].each { String val ->
            switch (val) {
                case 'A' :
                    println("${val} caseA")
                    break
                case 'B' :
                    println("${val} caseB")
                    break
                default : 
                    println("${val} default")
            }
        }
    }
}
(new Test()).test() 
```

输出：

```
A caseA
A caseB
A default
B caseB
B default
C default 
```

第二个测试：只是评论`@CompileStatic`

一切正常：

```
A caseA
B caseB
C default 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:11:03.387

这似乎是 Groovy 2.1.0 中的一个错误（感谢您将其发布到 JIRA，看起来它将在 Groovy 2.1.1 中修复）

在此版本发布之前，作为一种解决方法，您可以在案例语句中使用带标签的块`break`

```
 switch (val) {
            case 'A' : A:{
                println("${val} caseA")
                break
            }
            case 'B' : B:{
                println("${val} caseB")
                break
            }
            default : 
                println("${val} default")
        } 
```

# java - Java多线程和while（）和等待的同步块之间的原子间隙

> ID：14774712
> 
> 赞同：0
> 
> 时间：2013-02-08T14:27:16.920
> 
> 标签：java, multithreading

我们有两个线程，Thread2 等待 Thread1（从它接收消息）

```
class Thread1 .. {
 run() {
   synchronized(this) { some-work; notify(); } 
 }
}

class Thread2 .. {
 run() {
   while(true) {
    synchronized(thread1) {
      ...
      thread1.wait();
      ... 
      println("Got here"); // has received the notify() from Thread1   
    }
   }
 } 
```

}

1.  thread2.start() // thred2首先准备好接收来自thread1的所有消息
2.  线程1.start()

在按顺序启动这些线程后，我们遇到了 thread2 正在等待来自 thread1 的 notify() 的情况，这将在几分钟内发生 - 将出现消息“到达这里”。

但是，如果我在这里延迟：

```
 class Thread2
 run() {
       while(true) {
        sleep(1000);  // the dalay   
        synchronized(thread1) { ..
 } 
```

然后消息'Got Here'将永远不会出现 - 因为 thread2 在达到 sycnronized(thread1) 之前会错过来自 thread1 的 notify() - 然后我们就会遇到**Nothing To Wait**的情况。

问题是：

1.这两行是原子的吗？或者更好地说，这两行之间的差距是原子的？：

```
 while(true) {
    // gap
    synchronized(thread1) {..thread.wait() ..} 
 } 
```

2\. 或者这是否意味着我们不应该在 while() 和同步块之间放置任何表达式？例如，我们可以：

```
 while(true) {
    int a = 0; a++; 
    synchronized(thread1) {..thread.wait() ..} 
```

因为我们在那里有这些表达，那么我们就有“**无所事事**”情况的风险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:01:40.813

`wait`并且`notify`不足以创建信号机制，因为您已经发现：如果您没有任何服务员，则通知将进入位桶。

[信号量](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Semaphore.html)就足够了：如果发送者在接收者做其他事情时返回许可，那么接收者将立即获得该许可。

但是，正如一些评论者所说，[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)是一个更好的解决方案，因为它意味着您的代码不必了解任何有关线程的知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:35:07.680

行间没有间隙是“原子的”，原子性的概念在这里不适用。

如果您想避免错过通知，请在 thread2 的 run 方法的主体中启动 thread1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T14:36:13.673

实际上，您问如果没有 sleep() 是否会发生这种情况，对吗？恕我直言，答案是肯定的。虽然“差距”只是——没有——循环本身也包含实际的指令。在它们之间，线程可以切换。恕我直言，也不能保证您在 Thread1.run 之前到达 Thread2.run 只是因为您首先启动了 Thread2。不过，我不确定如何解决这个问题。也许让 Thread1 以某种方式等待 Thread2？

# paypal - 贝宝标准付款支付多个卖家

> ID：14774713
> 
> 赞同：-1
> 
> 时间：2013-02-08T14:27:17.137
> 
> 标签：paypal

我正在更改现有的贝宝标准付款按钮，并想直接向 2 个不同的人（卖家和网站所有者）汇款。首先，如果不深入研究 API，这是否可能，其次，我该怎么做？我在 PayPal 网站上阅读了很多内容，但到目前为止还没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:16:13.023

通过 PayPal Payments Standard 按钮，一次支付的费用不能超过一个人。要支付两个单独的方，您需要：

*   创建两个单独的按钮
*   使用 Express Checkout（可以并行处理对双方的付款）
*   使用自适应付款（可以并行或以链式方式处理对双方的付款）

# php - 如何打印 PDO 数据库选择查询的一个数组值？

> ID：14774717
> 
> 赞同：0
> 
> 时间：2013-02-08T14:27:25.810
> 
> 标签：php, select, pdo

我正在使用这个 PDO 包装类：[http](http://www.imavex.com/php-pdo-wrapper-class/#select) ://www.imavex.com/php-pdo-wrapper-class/#select现在只是无法回显一个对象。

这是方法声明：

```
<?php
//select Method Declaration
public function select($table, $where="", $bind="", $fields="*") { }
?> 
```

我的查询是这样打印结果数组的：

```
<?php
$title = 'title_'.$GLOBALS['SelectedLang'];

$results = $GLOBALS['db']->select("news", $title != '', "", $title);
print_r($results);
?> 
```

但是如何回显查询的一个表字段？在老式的mysql中，我会这样做：

```
<?php
$row = @mysql_query($results);
echo $row->$title;
?> 
```

print_r 的输出是： Array ( [0] => Array ( [title_en] => englisch ) )

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T14:51:21.983

因此，如果您想回显您的查询结果，您应该循环执行：

```
foreach($results as $r){echo $r['title_en'];} 
```

# c# - c# 最后插入id

> ID：14774718
> 
> 赞同：1
> 
> 时间：2013-02-08T14:27:27.653
> 
> 标签：c#, object, casting, insert

我正在使用带有此 sql 的存储过程：

```
INSERT INTO [dbTblUsers]([strUsername], [strPassword])
VALUES (@p1,@p2);
SELECT @@IDENTITY; 
```

并调用程序：

```
// Insert new user
nId = daUsers.InsertQuery(textBoxUsername.Text, textBoxPassword.Text);
// Insert new Twitter OAuth
daTwitterOAuth.Insert(nId, textBoxConsumerKey.Text, textBoxConsumerSecret.Text, textBoxToken.Text, textBoxTokenSecret.Text); 
```

如何将对象 @@IDENTITY int int nId 转换为 int nId？像这样？

```
nId = (int)daUsers.InsertQuery(textBoxUsername.Text, textBoxPassword.Text); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:29:28.213

首先，不要使用`@@IDENTTY`- 使用`SCOPE_IDENTITY()`；如果涉及任何触发器，第一个可以给你意想不到的答案。第二; 这两个都返回小数；将其投射到呼叫站点，IMO：

```
SELECT CAST(SCOPE_IDENTITY() as int) 
```

# java - 这些集合允许为空。为什么我不能添加空元素？

> ID：14774721
> 
> 赞同：29
> 
> 时间：2013-02-08T14:27:35.720
> 
> 标签：java, null, hashset

我想知道为什么 HashSet、LinkedHashSet 和 TreeSet 的实现不允许空元素？每当我尝试运行以下代码时，它都会引发空指针异常。

```
public static void main(String[] args) {

    HashSet<Integer> hashSet = new HashSet<Integer>();

    hashSet.add(2);
    hashSet.add(5);
    hashSet.add(1);
//  hashSet.add(null);  will throw null pointer 
    hashSet.add(999);
    hashSet.add(10);
    hashSet.add(10);
    hashSet.add(11);
    hashSet.add(9);
    hashSet.add(10);
    hashSet.add(000);
    hashSet.add(999);
    hashSet.add(0);

    Iterator<Integer> it = hashSet.iterator();
    while(it.hasNext()){
        int i = it.next();
        System.out.print(i+" ");
    }
    } 
```

请指导我。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-02-08T15:43:39.147

这就是我不喜欢依赖自动装箱的原因。[Java Collections 不能存储原语（因为你需要像Trove](http://trove.starlight-systems.com/)这样的第三方 API ）。所以，真的，当你执行这样的代码时：

```
hashSet.add(2);
hashSet.add(5); 
```

真正发生的是：

```
hashSet.add(new Integer(2));
hashSet.add(new Integer(5)); 
```

向哈希集添加 null***不是***问题，这部分工作得很好。当您尝试将您的值拆箱为原始 int 时，您的 NPE 稍后会出现：

```
while(it.hasNext()){
    int i = it.next();
    System.out.print(i+" ");
} 
```

当`null`遇到该值时，JVM 会尝试将其拆箱为 int 原语，这会导致 NPE。您应该更改代码以避免这种情况：

```
while(it.hasNext()){
    final Integer i = it.next();
    System.out.print(i+" ");
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-08T14:50:29.160

1）你确定你得到**编译时**错误吗？我不这么认为，我猜代码在运行时会抛出 NPE

`int i = it.next();`

2）事实上java.util.Set接口并不禁止空元素，一些JCF Set实现也允许空元素：

设置 API -`A collection that contains no duplicate elements. More formally, sets contain no pair of elements e1 and e2 such that e1.equals(e2), and at most one null element.`

哈希集 API - `This class permits the null element`.

LinkedHashSet API -`This class provides all of the optional Set operations, and permits null elements`

TreeSet.add API -`throws NullPointerException - if the specified element is null and this set uses natural ordering, or its comparator does not permit null elements`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-10-20T14:34:32.020

不，**设置接口**只允许空值它的实现，即`TreeSet`不允许空值。

即使您没有编写迭代代码并且仅`oTreeSet.add(null)`在您的代码中编译并且在**运行时它会抛出 NullPointerException。**

`TreeSet`类的`add()`方法内部调用`put()`TreeMap 类的方法。 `null`put() 方法中的值不允许如下代码所示

```
if (key == null)
     throw new NullPointerException(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-08T14:29:42.120

接口的重点`Set`是使用有关元素的信息（哈希码或比较）来加快实现速度。

`null`没有那个信息。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-10-06T05:26:51.610

Set Interface 不允许 null 因为在 TreeSet 中，它按排序顺序存储元素，所以每次我们添加新元素时，它都会比较值然后排序。所以在内部发生的事情是将新添加的空值与现有值进行比较，因此它将抛出 NullPointerException。

```
String str=null;
if(str.equals("abc"))
{
}
//it will throw null pointer exception 
```

这就是为什么它不允许空值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-10T16:58:33.870

Set 允许添加 null 所以这不是问题。其次Java程序需要先编译成字节码再执行。`NullPointerException`是在运行时抛出的异常。编译时应该不是问题。现在让我们分析一下为什么会得到 NPE。

`Iterator`这里应该输出类型的对象，`Integer`我们希望将结果存储在`primitive type int`变量中。Integer 是一个类，它可以具有其类型的引用来引用 null，但原语不能保存 null 值。

```
Iterator<Integer> it = hashSet.iterator(); // Iterator of Type Integer
while(it.hasNext()){
    int i = it.next(); // it.next outputs Integer, but result is tried to be held in a primitive type variable
    System.out.print(i+" ");
} 
```

当**`int i = it.next();`**被执行时，然后`public int intValue()`被调用以将整数对象转换为原始 int。当`it.next()`返回 null 时，**`null.intValue()`**执行结果为`NullPointerException`.

如果使用 Integer 而不是 int 则不会有异常

```
Integer i = it.next(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-27T17:50:23.113

你提到过：

> // hashSet.add(null); 将抛出空指针

这是不正确的，因为 a`HashSet`允许将 a`null`添加到其中，因此，您不会遇到此语句的任何编译失败或运行时异常。但是，什么时候会执行下面的语句

```
int i = it.next(); 
```

你会得到一个运行时异常，如下所示：

> 线程“main”中的异常 java.lang.NullPointerException：无法调用“java.lang.Integer.intValue()”，因为“java.util.Iterator.next()”的返回值在 Main.main(Main.爪哇：24）

例外是不言自明的。[JLS §5.1.8](https://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.1.8)规定如下：

> 如果 r 为 null，则拆箱转换将引发 NullPointerException

下面给出了另一个理解这个概念的例子：

```
public class Main {
    public static void main(String[] args) {
        Integer x = null;
        print(x);
    }

    static void print(int x) {
        System.out.println(x);
    }
} 
```

**输出：**

> 线程“main”java.lang.NullPointerException 中的异常：无法调用“java.lang.Integer.intValue()”，因为 Main.main(Main.java:7) 处的“x”为空

事实上，编译器会提前警告你：

> 空指针访问：这个 Integer 类型的表达式为空，但需要自动拆箱

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-28T09:37:44.593

```
public class JavaHashSetTest {

    public static void main(String[] args) {
        Set<Integer> hashset= new HashSet<Integer>();

        hashset.add(null);
        hashset.add(22);
        hashset.add(222);
        hashset.add(null);
        hashset.add(11);
        hashset.add(233);
        //  TreeSet<String> tset=hashset;

      Iterator<Integer> it = hashset.iterator();
        while(it.hasNext()){
            Integer i = it.next();
            System.out.print(i+" ");
        }
    }

} 
```

我的代码正在工作，为什么它会给你 Nullpointer 我试图对包含 Null 值的哈希集进行排序，然后它会给你异常，否则它工作正常。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-24T06:34:59.823

只有在编译时`TreeSet`才会获得运行时`Null pointer Exception`并且`HashSet`不会出现任何错误，并且运行时它只会允许一个`null`值，如果我们输入的值超过这个值，它将覆盖`HashSet`. 看这里：

```
public class HasSetDemo {
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        //no error it will print only one null and 2,5,8
        Set<Integer> s = new HashSet<Integer>();
        s.add(2);
        s.add(5);
        s.add(8);
        s.add(null);
        s.add(null);//it will override and hashset will allow one null value
        Iterator i=s.iterator();        
        while(i.hasNext()){
            Object in=(Object)i.next();
            System.out.println(" hi "+in);
        }
    }
} 
```

### 输出

```
hi null
hi 2
hi 5
hi 8 
```

### 案例二：

```
public class SetDemo {

    public static void main(String[] args) {
        // either its may be string or integer it will give NullPointerException in run time
        Set<String> s2 = new TreeSet<>();
        s2.add("ramana");
        s2.add(null);
        s2.add("4");
        s2.add("5");
        s2.add(null);
        Iterator<String> i=s2.iterator();       
        while(i.hasNext()){
            System.out.println(i.next());
        }
    }
} 
```

### 输出：

```
Exception in thread "main" java.lang.NullPointerException
    at java.util.TreeMap.put(Unknown Source)
    at java.util.TreeSet.add(Unknown Source)
    at com.sagili.set.SetDemo.main(SetDemo.java:13) 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-04-22T15:03:04.023

将 null 添加到像 HashSet Arraylist 这样的集合只会在集合用于排序时产生问题。除此之外，null 将适用于迭代器和正常场景以显示列表或集合的内容。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-07-03T03:23:54.133

Set 接口内部使用 HashMap 实现类。每当我们使用 add() 时，我们提供的值作为值的键存储到 Map 中，它会创建一个空对象。

因此，地图不允许重复。

# python - 未声明主窗口的类中的插槽

> ID：14774726
> 
> 赞同：1
> 
> 时间：2013-02-08T14:27:50.320
> 
> 标签：python, pyqt, pyqt4, slots

主窗口在 Class1 中声明。我正在尝试创建 Class2 的对象，创建一个小部件（一个按钮）并将其连接到一个插槽。

```
import sys
from PyQt4 import QtGui,QtCore

class Class2(object):
    def __init__(self,parent):
        return
    def button(self,parent):
        self.print_button=QtGui.QPushButton("print hello",parent)
        self.print_button.show()
        self.print_button.clicked.connect(self.print_hello)

    def print_hello(self,parent):
        print 'hello'

class Class1(QtGui.QMainWindow):
    def __init__(self):
        super(Class1, self).__init__()
        self.welcomeScreen()

    def welcomeScreen(self):
        obj=Class2(self)
        obj.button(self)

def main():
    app = QtGui.QApplication(sys.argv)
    mw = Class1()
    mw.show()
    sys.exit(app.exec_())

if __name__=='__main__':
    main() 
```

现在，按钮正在创建，但插槽不起作用。如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:49:51.130

您`print_hello`需要 2 个参数，而您只传递一个参数。

试试这个：

```
self.print_button.clicked.connect(lambda: self.print_hello(self)) 
```

# java - 无法使用 Java 中的 HTTP 客户端将 JSON 发布到服务器

> ID：14774729
> 
> 赞同：6
> 
> 时间：2013-02-08T14:28:00.867
> 
> 标签：java, json, post

我正在尝试将 JSON 对象发送到自定义端口上的服务器。但是，我从来没有从服务器得到任何响应。我认为错误可能在字符串实体中，但我无法弄清楚它是什么。

我已经看过这些其他问题：

[在 Java 中使用 JSON 的 HTTP POST](https://stackoverflow.com/questions/7181534/http-post-using-json-in-java)

[将 json 发布到 java 服务器](https://stackoverflow.com/questions/11185681/post-json-to-java-server)

[如何使用 Java 构建具有正确实体且不使用任何库的 http post 请求？](https://stackoverflow.com/questions/5101817/how-to-build-a-http-post-request-with-the-correct-entity-with-java-and-not-using)

[如何以 JSON 格式将 Android 中的数据发布到服务器？](https://stackoverflow.com/questions/4966188/how-to-post-data-to-server-in-json-format)

他们都没有解决我的问题。我正在尝试“HTTP POST using JSON in Java”中的解决方案（16 票），但它不起作用。

这是我的代码：

```
public void reset() {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        try {
            System.out.println("Start");
            jsonURL = "http://x.x.x.x:3994";
            HttpPost request = new HttpPost(jsonURL);
            StringEntity params = new StringEntity("{\"id\":1,\"method\":\"object.deleteAll\",\"params\":[\"subscriber\"]}");
            request.addHeader("Content-Type", "application/json");
            request.setEntity(params);
            HttpResponse response = httpClient.execute(request);
            System.out.println("End");
        } catch (Exception ex) {
            ex.printStackTrace();
        } finally {
            httpClient.getConnectionManager().shutdown();
        }
    } 
```

控制台在开始时打印“开始”，但我从未从“结束”得到任何输出，也没有从异常中得到任何堆栈跟踪。调试时，调试器会在“ `httpClient.execute(request)`”行停止并且永远不会继续。

当我从终端运行此命令时：

```
echo '{"id":1, "method":"object.deleteAll", "params":["subscriber"]} ' | nc x.x.x.x 3994 
```

一切都正确执行，服务器收到了我的请求。

我认为我的问题可能与`StringEntity`但我不确定。

编辑：

使用 Wireshark 我能够捕获发送到服务器的这个数据包：

```
POST / HTTP/1.1 Content-Type: application/json Content-Length: 60
Host: x.x.x.x:3994 Connection: Keep-Alive User-Agent:
Apache-HttpClient/4.2.1 (java 1.5)

{"id":1,"method":"object.deleteAll","params":["subscriber"]} 
```

这个数据包从服务器返回：

```
{"id":null,"error":{"code":-32700,"message":"Unexpected character ('P' (code 80)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')"}}
{"id":null,"error":{"code":-32700,"message":"Unexpected character ('c' (code 99)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')"}}
{"id":null,"error":{"code":-32700,"message":"Unexpected character ('C' (code 67)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')"}}
{"id":null,"error":{"code":-32700,"message":"Unexpected character ('C' (code 67)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')"}}
{"id":null,"error":{"code":-32700,"message":"Unexpected character ('H' (code 72)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')"}}
{"id":null,"error":{"code":-32700,"message":"Unexpected character ('C' (code 67)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')"}}
{"id":null,"error":{"code":-32700,"message":"Unexpected character ('U' (code 85)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')"}}
{"id":null,"error":{"code":-32700,"message":"Line must contain a JSON object"}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:06:08.357

在您的工作示例中，您使用 nc，这意味着您直接写入 TCP，而不是使用 HTTP，对吗？

因此，您使用 HTTPClient 的 HTTP 调用正在发送意外数据。这些错误表明 HTTP 包装器是有问题的。

“POST”中的意外字符“P”，“Content-Type”中的“C”等。服务器正在读取每一行，期待原始 JSON 字符串，但正在获取 HTTP。

解决方案：您可能想改用原始[Java 套接字](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html)。

# moodle - 如何创建moodle本地插件

> ID：14774731
> 
> 赞同：8
> 
> 时间：2013-02-08T14:28:09.510
> 
> 标签：moodle

我正在创建一个自定义的 moodle 本地插件，但我没有找到任何关于此的帮助。有人可以帮我介绍一下本地插件的总体布局吗？

我是moodle的新手。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T14:34:20.480

要创建本地插件，您可以根据 Moodle 文档 ( [https://docs.moodle.org/dev/Local_plugins](https://docs.moodle.org/dev/Local_plugins) ) 遵循以下文件夹结构-

```
local/
     yourplugin/
       db/
         access.php
         install.php
         install.xml
       lang/
         en/
           yourplugin.php
       index.php
       settings.php
       version.php 
```

# javascript - 多次使用 setInterval 和 clearInterval 的问题

> ID：14774735
> 
> 赞同：0
> 
> 时间：2013-02-08T14:28:13.440
> 
> 标签：javascript, jquery, setinterval, clearinterval

我对这里发生的事情感到困惑。测验第一次运行良好。然而，在第一次玩之后，我遇到了各种各样的问题。我想单击同一个按钮，“#start2”，开始并重新启动测验，即清除计时器，将所有变量恢复为 0 等，并显示第一个问题。好像页面已经刷新了，基本上。

相反，我的滴答声越来越快，计时器在正确猜测时递增等等。可怕。

我使用模数来测量“#start2”div 被点击的次数。第一次单击时，启动计时器。第二次点击 - 我想重置计时器。第三次点击——启动计时器，以此类推。

非常感谢任何帮助。

```
var n = 0;
var x = 0;
var p = 0;
var incTime;

function a(n) {
   var x,y,z;

    x = Math.floor((Math.random() * 3))
    if(x == 0){y = 1; z = 2}else if(x == 1){y = 0; z = 2}else{y = 0; z = 1}

    $("#question_holder2").text(questions[n].q);

    $(".answer_holder2").eq(x).text(questions[n].a).data('answer', 'a');
    $(".answer_holder2").eq(y).text(questions[n].b).data('answer', 'b');
    $(".answer_holder2").eq(z).text(questions[n].c).data('answer', 'c');
}

$(document).ready(function() {

//timing element
function startTimer(x){
    $("#start2").text(x);
}

$("#start2").click(function(){
    var setTimer;
    p++;
    //if it's been clicked before
    if(p%2 === 0){
        clearInterval(setTimer);
        $("#start2").text("Start");
        n = 0;
        x = 0;
        a(n);
        alert("okay");
    }else if(p%2 !== 0){
        //never been clicked before
        a(n);
        setTimer = setInterval(function(){startTimer(x=x+1)}, 1000);

        $('.answer_holder2').click(function() {
            //correct answer given
            if ($(this).data('answer') === 'a') {
                n++;
                if (n < questions.length) {
                    a(n);
                } else {
                    alert("End of quiz!");
                    clearInterval(setTimer);
                    $("#start2").text("You took " + x + " seconds, you     answered " + n + "            questions correctly, with - incorrect answers given.");
                    x = 0;
                    n = 0;
                    a(n);
                }
            }else{
                //incorrect answer given
                $(this).fadeTo(1000,0.4);
                var timeString = $("#start2").text();
                var incTime = (timeString * 1) + 5;
                $("#start2").text(incTime);
                startTimer(incTime);
                x = incTime;
            };      
        });
    };
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:46:55.100

你有这个：

```
$("#start2").click(function(){
    var setTimer;
    p++;
    //if it's been clicked before
    if(p%2 === 0){
        clearInterval(setTimer);
 //.... 
```

在这种情况下，当您设置为`clearInterval`行时，`setTimer`将*始终*为 0，而不是正在运行的计时器的 id。所以这实际上并没有停止任何计时器。如果您不停止计时器，它将继续运行。所以这里的功能：

```
setTimer = setInterval(function(){startTimer(x=x+1)}, 1000); 
```

将继续运行。所以下次你创建一个计时器时，你现在有两个计时器正在更新`x`，它看起来运行得更快了。

试试这个：

```
$(document).ready(function() {
    var setTimer;
    $("#start2").click(function(){
        // the rest of your click handler code...    
    });

    //timing element
    function startTimer(x){
        $("#start2").text(x);
    }
} 
```

您的`setTimer`变量需要存在于点击处理程序之外的范围内。正如您所拥有的那样，您每次都在声明一个新变量，因此当您尝试清除计时器时，您实际上并没有清除计时器。

另外：关于如何重新附加点击处理程序的怪异观点也是一个问题。你也需要解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:47:37.367

答案是不好的事情是因为这个而发生的：

```
$("#start2").click(function(){
    // some code...
    $('.answer_holder2').click(function() {
        // some code...
    });
}); 
```

当您单击`#start2` **新处理程序**时，附加到`.answer_holder2`. 因此，例如在单击 3 次后，`.answer_holder2`附加了 3 个处理程序，当您单击它时，所有 3 个处理程序都会触发。

你的代码有点复杂，我不会给你一个解决方案。但我可以给你一个提示。把里面放在`.click`外面`.click`。您可能必须更改一些代码，但必须这样做。

**编辑**您可以尝试的（作为快速修复，但不一定很好）添加以下内容：

```
$('.answer_holder2').off( "click" ).click(function() { 
```

另外看看马特的答案。

# tinymce - tinyMCE：设置编辑器的填充

> ID：14774738
> 
> 赞同：4
> 
> 时间：2013-02-08T14:28:21.927
> 
> 标签：tinymce

如何在 tinyMCE 编辑器中设置填充？

我见过这样的答案：

```
body{ padding:0px } 
```

但它不应该在身体上？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T15:22:18.900

查看 tinymce 配置参数[content_css](http://www.tinymce.com/wiki.php/Configuration%3acontent_css)。使用此参数，您可以设置自己的 css 内容并覆盖 tinymcedefault css。您可以将填充应用于您想要的任何元素（在正文下）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-21T15:32:08.600

你也可以试试这些方法：

```
tinymce.init({
  selector: 'textarea',  // change this value according to your HTML

  // set whatever class name you have that adds the padding
  body_class: 'my_class', 

  // or attach your own css file (resolved to http://domain/myLayout.css)
  content_css : '/myLayout.css',

  // or finally, add your padding directly
  content_style: "body {padding: 10px}"
}); 
```

有关更多信息，请参阅[文档](https://www.tinymce.com/docs/configure/content-appearance/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-05T12:53:42.117

如果您需要快速解决方案，请尝试 CSS 定义：

```
div.mce-edit-area{
    background:#FFF;
    filter:none;
>>> padding:10px; <<< 
} 
```

在**skin.min.css**和**skin.ie7.min.css**文件中。

# ios - iOS 应用程序不会在 iPhone 上旋转，但会在 iPad 上旋转

> ID：14774740
> 
> 赞同：1
> 
> 时间：2013-02-08T14:28:24.000
> 
> 标签：ios, objective-c, xamarin.ios

我制作了我的 gles 应用程序，并在我的 iPad 上对其进行了测试。它应该只在横向模式下工作，所以我`Info.plist`喜欢这个

```
<key>UISupportedInterfaceOrientations</key>
<array>
    <string>UIInterfaceOrientationLandscapeRight</string>
</array>
<key>UISupportedInterfaceOrientations~ipad</key>
<array>
    <string>UIInterfaceOrientationLandscapeLeft</string>
    <string>UIInterfaceOrientationLandscapeRight</string>
</array> 
```

我只为 iPhone 设置了横向右，所以启动画面正确显示（似乎你不能在 iPhone 上为横向右和横向左设置单独的启动画面）

该应用程序运行良好，但在朋友的 iPhone 上，该应用程序以纵向模式运行，并且不会旋转到任一横向模式。旋转锁定已关闭。

我没有特别从我的代码中做任何事情来支持旋转，因为只是`Info.plist`在我的 iPad 上完美地设置我的工作。

iPhone模拟器自动变成横向，即使我旋转它也保留横向渲染。

这可能是什么原因造成的？我还尝试允许两个景观旋转，但没有骰子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T19:09:51.663

ios6 引入了处理方向变化的新方法——我猜你朋友的 iphone 正在运行 ios5。请参阅[UIViewController 文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/supportedInterfaceOrientations)以了解如何处理这两个版本：

> **处理视图旋转**
> 
> 在 iOS 6 中，您的应用支持在应用的 Info.plist 文件中定义的界面方向。视图控制器可以覆盖supportedInterfaceOrientations 方法来限制支持的方向列表。一般情况下，系统只会在窗口的根视图控制器或呈现为填满整个屏幕的视图控制器上调用该方法；子视图控制器使用其父视图控制器为它们提供的窗口部分，并且不再直接参与有关支持哪些旋转的决策。应用程序的方向掩码和视图控制器的方向掩码的交集用于确定视图控制器可以旋转到哪些方向。
> 
> 你可以覆盖一个视图控制器的 preferredInterfaceOrientationForPresentation，该视图控制器旨在以特定方向全屏显示。
> 
> 在 iOS 5 和更早版本中，UIViewController 类仅以纵向模式显示视图。要支持其他方向，您必须重写 shouldAutorotateToInterfaceOrientation: 方法并为您的子类支持的任何方向返回 YES。如果您的视图的自动调整大小属性配置正确，那么您可能只需要这样做。但是，UIViewController 类为您提供了额外的钩子来根据需要实现额外的行为。通常，如果您的视图控制器打算用作子视图控制器，它应该支持所有界面方向。
> 
> 当可见视图控制器发生旋转时，将在旋转期间调用 willRotateToInterfaceOrientation:duration:、willAnimateRotationToInterfaceOrientation:duration: 和 didRotateFromInterfaceOrientation: 方法。viewWillLayoutSubviews 方法也会在视图被其父级调整大小和定位后调用。如果在方向更改发生时视图控制器不可见，则永远不会调用旋转方法。但是，viewWillLayoutSubviews 方法在视图变得可见时被调用。您对此方法的实现可以调用 statusBarOrientation 方法来确定设备方向。

# python - 运行和管理python脚本

> ID：14774744
> 
> 赞同：0
> 
> 时间：2013-02-08T14:28:38.043
> 
> 标签：python

我有 Web 应用程序`Flask`，用户可以发送一些我的脚本正在处理的请求，然后在控制台中的 python 中运行另一个脚本，其中包含一些参数，如下所示：

```
import sys
os.system('python start.py -u 100 -p 122224') 
```

一切正常，但现在我想控制我的脚本的所有正在运行的副本，比如开始、停止和暂停。

没有拐杖我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:39:24.737

检查[子进程](http://docs.python.org/2/library/subprocess.html)和[多处理](http://docs.python.org/2/library/multiprocessing.html)模块。第一个允许您执行外部应用程序。要使用第二个，您将需要调用一些 python 代码，但管理功能应该更广泛。

# visual-studio-2012 - 安装 CLR 对象后，Sql Schema Compare 不会更新“检测到源架构漂移”

> ID：14774749
> 
> 赞同：12
> 
> 时间：2013-02-08T14:28:51.087
> 
> 标签：visual-studio-2012, sql-server-data-tools

安装自定义 CLR 对象后，Sql Server Developer Tools (SSDT) VS2012 将不允许更新。错误是“检测到源架构漂移。按比较刷新。刷新后会发生同样的事情。

尝试在设置中，我将对象设置为存储过程。设置->常规->阻止可能的数据丢失->尝试打开和关闭。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-14T07:34:04.657

这种循环也可能是由于引用的 SSDT 项目未能构建造成的。引用的项目可能丢失、卸载或有错误导致比较无法完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-26T09:12:48.210

这不是答案，而是解决此问题的线索。

我打算将一个列从 varchar[200] 更新为 varchar[MAX] 并且也遇到了这个问题。所以我登录服务器并尝试通过安装在那里的 SQL Management Studio 手动更新数据库，我收到了这个错误：

```
"Saving changes is not permitted. The changes you have made require the folloing tables to be drpped and re-created. You have either made changes to a table that can't be re-created or enable the option Prevent saving changes that require the table to be re-created." 
```

似乎重新创建表是如此危险，以至于“阻止/取消阻止可能的数据丢失”无法处理。所以我认为只有当我们能够绕过这个 LOCAL 警告时，我们才能远程更新数据库。

但是，为什么 [200] 到 [max] 会导致**重新创建**表？这没有任何意义。我尝试了 [200] 到 [1000]，但效果不佳。这可能是这个问题的关键。

而且，如果您在 VS 的服务器资源管理器中执行相同的更新，而不是 SQL Management Studio，它就可以工作。再说一遍，为什么？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-26T14:06:14.907

当数据库用户“更改”时，可能会发生这种情况。

以下相当可怕的论坛页面讲述了外国黑客试图暴力访问“sa”数据库用户的问题，每次尝试都会更改 sa 用户的日期时间戳（这被视为模式漂移）：

[https://social.msdn.microsoft.com/Forums/sqlserver/en-US/5c22a7b4-7a82-4717-a118-2475bc62705b/schema-compareupdate-error-target-schema-drift-detected?forum=ssdt](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/5c22a7b4-7a82-4717-a118-2475bc62705b/schema-compareupdate-error-target-schema-drift-detected?forum=ssdt)

这里还提到你可以查询 sa-user 几次，看看你是否发生了这种情况：

```
SELECT * FROM sys.server_principals WHERE principal_id=1 
```

我目前遇到了同样的问题（正在修改 sa 用户；我对黑客一无所知）并且尚未找到解决方案。

*编辑*`properties`- 我通过>打开登录 Windows 防火墙`logging`，我们在端口 3071 上设置了一个阻止规则，该端口有很多无法解释的流量。然后问题就消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-01T11:01:52.617

我尝试以管理员身份运行 VS，它成功了。

# asp.net-mvc - 将数据从表单插入到 SQL 表？

> ID：14774752
> 
> 赞同：1
> 
> 时间：2013-02-08T14:29:00.600
> 
> 标签：asp.net-mvc

我一直在环顾四周，在我的一生中，我找不到一个例子来说明如何做到这一点。他们要么有示例，要么仅从外部文件加载数据，要么将数据手动输入表中。我有一个带有两个框和提交按钮的简单表单，当用户单击提交到我创建的 SQL 表时，该按钮会上传数据。我知道这听起来很简单，但我找不到办法。我对 MVC4 完全陌生，我已经阅读了大量材料并完成了大部分教程，并且我理解它背后的概念。我只是无法弄清楚这样做的语法。

如果有人能引导我完成这个，我将非常感激。我正在使用 MVC4 来开发它。

基本上这是我需要做的：

*   事件名称的文本框（已创建）
*   事件数据的文本框（已创建）
*   提交按钮（已创建）

*   具有相同属性的 SQL 表（使用 ADO 实体数据模型创建）

*   进口声明（？？？？？？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:42:44.353

您可以从创建 EF 模型开始：

```
public class Event
{
    [Key]
    public int Id { get; set; }

    [Required]
    public string EventName { get; set; }
    public string EventData { get; set; }
} 
```

和相应的数据上下文：

```
public class EventsDataContext: DbContext
{
    public IDbSet<Event> Events { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new Event());
    }

    [HttpPost]
    public ActionResult Index(Event model)
    {
        if (!ModelState.IsValid)
        {
            return View(model);
        }

        using (var ctx = new EventsDataContext())
        {
            ctx.Events.Add(model);
            ctx.SaveChanges();
        }

        return Content("The new event was successfully stored into the database");
    }
} 
```

最后是一个观点：

```
@model Event

@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(x => x.EventName)
        @Html.EditorFor(x => x.EventName)
        @Html.ValidationMessageFor(x => x.EventName)
    </div>

    <div>
        @Html.LabelFor(x => x.EventData)
        @Html.EditorFor(x => x.EventData)
        @Html.ValidationMessageFor(x => x.EventData)
    </div>

    <button type="submit">Create event</button>
} 
```

进一步阅读：[http ://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-4](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-4)

还有另一个教程：[http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net -mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:50:39.590

使用视觉工作室：

选择新建项目，然后选择“MVC4项目”，然后选择“基本”

打开新项目后，右键单击`Models`文件夹并选择`Add Class...` 调用您的类`EventModel`并添加以下代码：

```
public class EventModel
{
    [Key]
    public int EventId { get; set; }
    public string EventName { get; set; }
    public string EventData { get; set; }
} 
```

**现在编译你的项目。**

然后右键单击`controllers`并选择`add controller`。将其命名为“EventController”

对于模板，选择“具有读/写操作和视图的 MVC 控制器，使用实体框架”

对于模型类，选择“EventModel”

对于数据上下文类，选择“新数据上下文”。

任务完成。Visual Studio 应该已经创建了视图来列出、创建、删除、显示和编辑事件

# javascript - 将数组与自身连接起来

> ID：14774756
> 
> 赞同：4
> 
> 时间：2013-02-08T14:29:08.823
> 
> 标签：javascript, arrays, coffeescript

我正在尝试实施`Array.repeat`，所以

```
[3].repeat(4) // yields
=> [3, 3, 3, 3] 
```

...并且让我发疯。

试过这个：

```
Array::repeat = (num)->
  array = new Array
  for n in [0..num]
    array.concat(this)
  array 
```

但`[3].repeat(x)`总是返回`[]`。我在哪里搞砸了？还是有更好的方法来做到这一点？

**最后结果：**

```
Array::repeat = (num)->
  array = new Array
  return array if num < 1
  for n in [1..num]
    array = array.concat(this)
  array

['a'].repeat(5)
=> ['a', 'a', 'a', 'a', 'a'] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T14:31:01.913

`array.concat`返回一个新数组并且不修改现有数组。

你需要写

```
array = array.concat(dup) 
```

或者，您可以使用`push()`，它会修改原始数组：

```
array.push.apply(array, dup) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:37:07.827

这很简单：

```
function repeat(array, n){
    var out = [];
    for(var i = 0; i < n; i++) {
        out = out.concat(array);
    }
    return out;
} 
```

或原型设计：

```
Array.prototype.repeat = function(n){
    var out = [];
    for(var i = 0; i < n; i++) {
        out = out.concat(this);
    }
    return out;
} 
```

那是原生 JS，不知道你会如何在 CoffeeScript 中做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:36:26.950

我认为函数应该是这样的：

```
Array.prototype.repeat = function(count) {
    if(count==null||1*count!=count)  //check for cerrect count
        return this.valueOf(); 
    var length = this.length;     //Length
    var return = this.valueOf();  //0 repats equals in the same array
    for(var i=0; i<count; i++) {  //Repeating the count
      for(var j=0; j<length; j++) {
        return.push(this[j]);
      }
    }
} 
```

# asp.net-mvc - DropDownListFor 未出现在视图中

> ID：14774762
> 
> 赞同：0
> 
> 时间：2013-02-08T14:29:22.503
> 
> 标签：asp.net-mvc, html.dropdownlistfor

这是我的控制器的一部分：

```
 // GET
    public ActionResult Create()
    {
        var query = from f in db.Stages
                    select f;
        var sItems = new SelectList(query, "ID", "Name");
        ViewBag.StagesList = sItems;
        return View();
    } 
```

这是我的观点：

```
 <div class="editor-field">
        <%: Html.DropDownListFor(model => model.Name, ViewBag.StagesList as SelectList)%>
        <%: Html.ValidationMessageFor(model => model.Name) %>
    </div> 
```

但是下拉列表没有出现在视图中。为什么？问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:07:38.737

它可能在视图中，但存在逻辑缺陷或某处缺少结束标签。使用浏览器的查看源选项来尝试查找元素以查看它是否正在呈现。我猜是这样，但是没有渲染任何项目并且没有显示任何内容，或者某处存在语法错误（尽管通常不会隐藏它）。

# asp.net - 需要帮助了解 ASP .Net MVC 用户身份验证/授权

> ID：14774765
> 
> 赞同：0
> 
> 时间：2013-02-08T14:29:34.280
> 
> 标签：asp.net, asp.net-mvc, membership-provider, authorize-attribute

我一直在兜圈子，试图正确理解这一点。

我有一个正在处理的 ASP .Net MVC 项目，需要实现对外部系统进行授权和身份验证的用户登录（通过 web 服务）。

我似乎无法在我需要`MembershipProvider`的`AuthorizeAttribute`上下文中理解我的想法。

我需要使用哪个（我相信两者兼而有之）以及我需要在哪里自定义以提供针对外部系统的身份验证。

除了默认的 ASP .Net 用户主体之外，我还需要另外一件事，即外部 Web 服务将在成功登录后返回一个会话 ID，该会话 ID 将用于对外部服务的后续请求。

有人能指出我这种设置的一些有用示例的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:32:06.887

MembershipProvider 用于提供可以登录系统的用户。RoleProvider 用于告诉用户具有哪些角色。它们在***身份验证***过程中使用。即识别用户。您可以[阅读有关成员资格与角色的信息](http://msdn.microsoft.com/en-us/library/aa354509%28v=vs.100%29.aspx)

`[Authorize]`另一方面，该属性在***授权***期间使用。即检查是否允许用户做某事。

# python - 从 heapq 中提取元素的 Pythonic 方法

> ID：14774769
> 
> 赞同：2
> 
> 时间：2013-02-08T14:29:46.200
> 
> 标签：python, python-2.7, priority-queue

我正在使用**优先级队列**（`heapq`）`datetime.datetime`作为优先级。

如果我有要搜索的 startTime 和 endTime ，那么从这个列表中提取元素子集的最 Pythonic 方法是什么。（我无法更改原始列表，所以我必须创建一个新列表并返回，或者返回一个迭代器）

以下是我所拥有的示例：

```
>>> import heapq
>>> timeLine = []
>>> from datetime import datetime
>>> heapq.heappush(timeLine, (datetime.now(),'A'))
>>> heapq.heappush(timeLine, (datetime.now(),'B'))
>>> heapq.heappush(timeLine, (datetime.now(),'C'))
>>> timeLine
[(datetime.datetime(2013, 2, 8, 15, 25, 14, 720000), 'A'), (datetime.datetime(2013, 2, 8, 15, 25, 30, 575000), 'B'), (datetime.datetime(2013, 2, 8, 15, 25, 36, 959000), 'C')] 
```

真正的应用程序列表是巨大的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:26:06.027

堆不是执行此操作的理想结构；如果您坚持使用`heapq`的公共 API，堆将被更改并且对进一步的操作无用。@Anonymous 的解决方案可能有效，但（恕我直言）过于依赖实施细节。虽然这些是公开记录的，但我不确定您是否真的应该使用它们。

简单地对列表进行排序并进行两次二进制搜索是一种简单的方法来做你想做的事：

```
from bisect import bisect_left, bisect_right

def find_range(timeline, start, end):
    l = bisect_left(timeline, start)
    r = bisect_right(timeline, end)
    for i in xrange(l, r):
        yield timeline[i] 
```

这种方法的唯一问题是，在最坏的情况下排序需要 O( *n* lg *n* ) 时间，但是你构建堆的方式也是如此（`heapq.heapify`需要线性时间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:51:16.720

Every node in a heap is larger than all its children. Also, if the node is at index i, its immediate children are at indices 2 * i + 1 and 2 * i + 2.

Viewing the heap as a binary tree, you can recurse down the heap, stopping if an entry is bigger than the maxkey you've got (since all its children will be larger), and outputting the node if its key is between minkey and maxkey.

Putting this together gives this:

```
def extract_range(h, i, minkey, maxkey):
    if i >= len(h) or h[i][0] >= maxkey:
        return
    if h[i][0] >= minkey:
        yield h[i]
    for k in 1, 2:
        for r in extract_range(h, 2 * i + k, minkey, maxkey):
            yield r 
```

# perl - 在 Perl 中 v1、v2 等代表什么？

> ID：14774775
> 
> 赞同：1
> 
> 时间：2013-02-08T14:30:01.190
> 
> 标签：perl, special-characters

我有一组要打印的数组（用于获取 SQL 数据库信息）：

```
my $variables_array = [[u1, answer1, Uvalue], ["v1", u2, v2, answer2, Vvalue]]; 
```

当我打印出除了我上面的格式`$variables_array`之外的所有变量时。`v2`我搜索了*google/SO*`v#` ，在 Perl 中找不到任何特殊意义。我注意到*notepad++*改变了`v#`数组数组中的颜色，表明它是某种特殊变量，但我不知道它是什么？有人可以为我解释一下吗，我很困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T14:52:24.600

Perl 有很多不同的文字

*   像`123`, `123.0`, `1.23e2`,这样的数字`0x7b`
*   字符串文字`"abc"`, `'abc'`, `q/abc/`, ...</li>
*   空话
    *   Barewords 看起来像没有参数列表的函数调用
    *   在特殊的地方，即使在严格的情况下也是可以的：`Foo::Bar->new()`
    *   没有`strict 'refs'`，不表示 subs 的裸词被视为字符串。
    *   胖逗号的 LHS`=>`总是自动引用
    *   带有前导减号的裸词始终是字符串，除非它们是文件测试运算符。`-abc eq "-abc"`
*   V-strings（V 在向量或版本中）。`v1.2.3`

V-strings 由一系列由句点分隔的数字组成。每个数字都被翻译成相应的字符。由于它们是字符串，它们可以与`lt`,`gt`等进行比较。

它们适用于例如 IP 地址或版本号。它们不适合打印出来，因为小数字表示不可打印的字符。

```
$ perl -E'say v49.50.51'
123 
```

这个故事的主旨？总是`use strict; use warnings;`，也许看看`qw//`引用运算符：

```
my $variables_array = [[qw/u1 answer1 Uvalue/], [qw/v1 u2 v2 answer2 Vvalue/]];
# or verbose:
my $variables_array = [['u1', 'answer1', 'Uvalue'], ['v1', 'u2', 'v2', 'answer2', 'Vvalue']]; 
```

（`qw`不插值，在任何空格处拆分字符串，并且等于字符串列表）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T14:59:31.243

没有严格或警告，我得到：

```
$variables_array: [
                    [
                      'u1',
                      'answer1',
                      'Uvalue'
                    ],
                    [
                      'v1',
                      'u2',
                      v2,
                      'answer2',
                      'Vvalue'
                    ]
                  ] 
```

阿蒙的回答解释说它们是[“裸词”](http://perl5maven.com/barewords-in-perl)。Barewords 在几乎所有上下文中都被弃用（但也许不是命令行脚本）。

请注意，它引用`'v1'`而不是`'v2'`，因为版本字符串——一个以 a 开头的数字——`v`在 Perl 中是合法的文字。

# r - 使用 data.table 时 R 出现奇怪的错误

> ID：14774776
> 
> 赞同：-1
> 
> 时间：2013-02-08T14:30:01.290
> 
> 标签：r, data.table

我正在做一些小计算，我决定将数据填充到 a 中，因为它比and`data.table`快得多`data.frame``rbind`

所以基本上我的代码是这样的：

`df`是`data.frame`在计算中使用的，但重要的是它包含什么。

```
l=12000
dti = 1
dt = data.table(ni = 0, nj = 0, regerr = 0)
for (i in seq(1,12000,200)) {
    for (j in seq(1, 12000, 200)) {
        for (ind in 1:nrow(df)) {
            if( i+j >= l/2 ){
                df[ind,]$X =  df[ind,]$pos * 2
            } else {
                df[ind,]$X = df[ind,]$pos/l
            }
        }
        for (i in 1:100) { # 100 sample
            sample(df$X,nrow(df), replace=FALSE) 
            fit=lm(X ~ gx, df)   #linear regression calculation
            regerror=sum(residuals(fit)^2)

            print(paste(i,j,regerror))
            set(dt,dti,1L,as.double(i))             
            set(dt,dti,2L,as.double(j))             
            set(dt,dti,3L,regerror)             
            dti=dti+1

        }
     }
 } 
```

代码打印前几轮，`print(paste(i,j,regerror))`然后退出并出现以下错误：

```
 *** caught segfault ***
address 0x3ff00008, cause 'memory not mapped'
Segmentation fault (core dumped) 
```

***编辑***

```
structure(list(ax = c(-0.0242214, 0.19770304, 0.01587302, -0.0374415, 
0.05079826, 0.12209738), gx = c(-0.3913043, -0.0242214, -0.4259067, 
-0.725, -0.0374415, 0.01587302), pos = c(11222, 13564, 16532, 
12543, 12534, 14354)), .Names = c("ax", "gx", "pos"), row.names = c(NA, 
-6L), class = "data.frame") 
```

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:45:34.977

无意听起来粗鲁，我认为您可能会从阅读一些 R 教程中受益，然后再继续。这个问题也很可能因为过于本地化而被关闭。此外，`seg faults`几乎总是某个地方的错误，但您可以通过了解每段代码的作用来避免这些令人头疼的问题。从星期五开始，让我们来看看其中的一些：

```
if( i+j >= l/2 ){
   data[ind,]$X =  df[ind,]$pos * 2
}
else{
   data[ind,]$X = df[ind,]$pos/l
} 
```

我会假设`data`是`df`从那里去的。我们在两个循环中，`i`并且`j`都从 1 到 20000。它们的总和永远不会小于，`1/2`因此您将始终执行第一条语句。此外，如果您曾预料到这种`FALSE`情况会发生，则需要`else`与右大括号在同一行：

```
if (i + j >= 1/2) {
   df$X <- df$pos * 2
} else {
   df$X <- df$pos
} 
```

R 是矢量化的，因此执行上述操作与遍历每个值并乘以 2 相同。我还删除了该`/ 1`语句，因为它不执行任何操作。这整个部分可以移到循环之外。由于它是添加一列的恒定操作，该列`X`是该列的两倍`pos`。

接下来，您的循环适合您：

```
for (i in 1:100) { # 100 sample
   sample(df$X,nrow(df), replace=FALSE) 
   fit=lm(X ~ gx, df)   #linear regression calculation
   regerror=sum(residuals(fit)^2)

   print(paste(i,j,regerror))
   set(dt,dti,1L,as.double(i))             
   set(dt,dti,2L,as.double(j))             
   set(dt,dti,3L,regerror)             
   dti=dti+1
} 
```

服用，`sample(df$X, nrow(df), replace=FALSE)`只会向您显示新订单。它并没有实际分配它们。相反`df$X <- sample(df$X, nrow(df), replace=FALSE)`。

现在，看起来您要在行中分配此拟合错误的结果以及您的索引`dt`（这是一个很像`df`并且应该避免作为变量名称的函数） ？`dti`据我所知，没有什么取决于`i`or `j`。相反，您将执行随机排序的适合`60 * 60 * 100`时间......如果这是您想要做的，请务必去做！而是以一种有效的方式进行：

```
df$X <- df$pos * 2
fit.fun <- function(n, dat) {
   jumble <- sample(nrow(dat))
   dat$X <- dat$X[jumble]
   sum(residuals(lm(X ~ gx, dat))^2)
}

sapply(1:10, fit.fun, dat=df) 
```

# woocommerce - 结帐模板的 Woocommerce 位置

> ID：14774779
> 
> 赞同：27
> 
> 时间：2013-02-08T14:30:11.927
> 
> 标签：woocommerce

我正在尝试编辑结帐页面，但找不到模板。具有结帐字段的文件在插件内的位置是什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-08T18:19:29.697

结帐页面由几个 php 文件组成。

wp-内容/插件/woocommerce/模板/结帐/

*   购物车-errors.php
*   表单-billing.php
*   表单-checkout.php
*   form-coupon.php
*   表单-login.php
*   表单-pay.php
*   表单-shipping.php
*   审查-order.php
*   谢谢你.php

wp-content/plugins/woocommerce/templates/checkout/form-checkout.php 是主文件。

[来自 Woo Commerce Docs 的模板结构][1]

~~[http://wcdocs.woothemes.com/codex/template-structure/](http://wcdocs.woothemes.com/codex/template-structure/)~~ [https://docs.woothemes.com/document/template-structure/](https://docs.woothemes.com/document/template-structure/)

~~建议您复制模板文件夹~~建议从 woocommerce 插件目录中复制您希望更改的文件的模板文件夹。将其放在主题的根目录下并将其重命名为 woocommerce（在插件目录中保留模板文件夹以允许升级）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-22T16:31:52.633

请注意您的购物车模板，默认情况下该`page.php`模板是您的一般主题中的模板。

您可以通过更改来更改购物车布局`page.php`，或者转到您的 WordPress 购物车页面，编辑并更改另一个模板。

希望它有所帮助，我只是浪费了 2 小时的搜索时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T18:20:08.720

有一组控制结帐页面的几个模板。它们可以在模板/结帐的 WooCommerce 插件文件夹中找到。

您可以将 woocommerce/templates/checkout 文件夹放在主题文件夹中，然后将要更改的模板复制到其中。这些将覆盖普通模板而不改变插件本身。这样，当 WooCommerce 更新时，您的更改不会被覆盖。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-19T19:07:33.027

**注意：**我不建议直接编辑插件文件，因为如果您错误地更新了，您将丢失所有更改。所以首先将**/woocommerce/templates/**目录复制到**/theme/woocommerce/**内的主题目录中，然后

然后你应该编辑文件`theme/woocommerce/checkout/`

参考更多：[https ://docs.woocommerce.com/document/template-structure/](https://docs.woocommerce.com/document/template-structure/)

# compression - 是否可以将 32 个十六进制数无损压缩为 30？

> ID：14774780
> 
> 赞同：3
> 
> 时间：2013-02-08T14:30:14.840
> 
> 标签：compression, hex

例如是否可以压缩

002e3483bbdc11ddaae0754822a559f6 变成最多只需要 30 个字符的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:03:03.800

是的，您可以将其转换为 base-32 数字，因此最大的 32 个字符的十六进制数字，即 ffffffffffffffffffffffffffffffff 在 base-32 中相当于 800000000000000000000000000，只有 26 个字符，另请注意，在 base-32 中，您将以仅包含的字符串结尾这个字符：123456789ABCDEFGHIJKLMNOPQRSTUV

例如：002e3483bbdc11ddaae0754822a559f6 在 base-32 中是 5OQ87EUS27F0000000000000

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:19:54.653

如果您的问题是将 32 个十六进制数字压缩为 30 个十六进制数字。

这不可能发生在所有测试用例中，因为如果可能的话，多个 32 长度的十六进制字符串必须压缩成相同的 30 长度的十六进制字符串，因此你不会知道它是哪一个（[鸽笼原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)）。

一个不太可靠的证明 - 您可以在任何大小的文件上重复调用该过程以降低到单个 30 长度的十六进制字符串，这没有多大意义。

[这](http://matt.might.net/articles/why-infinite-or-guaranteed-file-compression-is-impossible/)是我刚刚找到的一篇文章。[维基百科](http://en.wikipedia.org/wiki/Lossless_compression#Limitations)说类似的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-08T05:25:25.637

将十六进制转换为二进制，然后使用 base64 或任何其他编码方案，请参阅[Binary-to-text encoding](https://en.wikipedia.org/wiki/Binary-to-text_encoding) (Wikipedia)。这具有不需要像建议的 base32 解决方案那样的 128 位算术的优点。

转换为 base64 并返回：

```
$ echo 002e3483bbdc11ddaae0754822a559f6 |xxd -r -ps |openssl base64 -e |tee >(openssl base64 -d |xxd -ps)
AC40g7vcEd2q4HVIIqVZ9g==
002e3483bbdc11ddaae0754822a559f6 
```

剪切从 from 开始的行`|tee` 以仅获得编码的输出。在大多数编程语言中，您将拥有核心或外部库来执行十六进制到二进制转换和 base64 编码。

注意：转换为 base32 也是可能的，但 base32 二进制到文本编码需要 8 字节填充，因此您必须对其进行修剪，然后`=`在解码时重新添加填充 ( )。

# iphone - UISegmented 视图更改视图

> ID：14774787
> 
> 赞同：2
> 
> 时间：2013-02-08T14:30:37.210
> 
> 标签：iphone, ios, xcode, uiview, uisegmentedcontrol

我已经设置了两个 barbutton 项目，一个在右侧，一个在左侧。右边的一个在两个视图之间成功切换，右边的第二个是一个分段控件，应该在两个视图之间切换。这是我的代码，我想知道如何使用分段控件实现更改视图。

```
- (void)setupNavigationBar {
    UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0,  self.view.frame.size.width, 44.0f)];
    UINavigationItem *navItem = [[UINavigationItem alloc] initWithTitle:@"ContainerView"];
    navItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFastForward target:self action:@selector(switchViewControllers)];
    navBar.items = [NSArray arrayWithObject:navItem];
    segmented = [[UISegmentedControl alloc] initWithItems:
                                  [NSArray arrayWithObjects:
                                   [UIImage imageNamed:@"seg1.png"],
                                   [UIImage imageNamed:@"seg1.png"],
                                   nil]];
    segmented.frame = CGRectMake(0, 0, 50, 30);

    segmented.segmentedControlStyle = UISegmentedControlStyleBar;

    UIBarButtonItem * segmentedBarItem = [[UIBarButtonItem alloc]  initWithCustomView:segmented];
    navItem.leftBarButtonItem = segmentedBarItem;

    [self.view addSubview:navBar];
}

- (void)viewDidLoad {
    [super viewDidLoad];

    // This is just for the purpose of calling the switch method.
    [self setupNavigationBar];

    CGRect rect = CGRectMake(0, 44, 320, 436);

    currentViewController = [[FirstViewController alloc] init];
    currentViewController.view.frame = rect;

    nextViewController = [[SecondViewController alloc] init];
    nextViewController.view.frame = rect;

    [self addChildViewController:currentViewController];
    [self addChildViewController:nextViewController];

    [self.view addSubview:currentViewController.view];
}

- (void)switchViewControllers {
    [self transitionFromViewController:currentViewController toViewController:nextViewController duration:3.0 options:UIViewAnimationTransitionFlipFromRight | UIViewAnimationOptionCurveEaseInOut animations:nil completion:^(BOOL finished) {
        UIViewController *tempViewController = currentViewController;
        currentViewController = nextViewController;
        nextViewController = tempViewController;
        tempViewController = nil;
    }];
} 
```

我将如何实现分段控件来更改视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:42:53.010

`UISegmentedControl`对于添加`UINavigationBar`

**编辑 ：**

```
NSArray *itemArray = [NSArray arrayWithObjects:
                      [UIImage imageNamed:@"1.png"],
                      [UIImage imageNamed:@"2.png"],
                      nil];

UISegmentedControl* menuSegmentedButton = [[UISegmentedControl alloc] initWithItems:itemArray];
menuSegmentedButton.momentary = YES;
menuSegmentedButton.selected = NO;
menuSegmentedButton.segmentedControlStyle = UISegmentedControlStyleBar;
   [menuSegmentedButton addTarget:self action:@selector(doMenu)
              forControlEvents:UIControlEventValueChanged];
[menuSegmentedButton sizeToFit];
UIBarButtonItem* barButton = [[UIBarButtonItem alloc]
                              initWithCustomView:menuSegmentedButton];
self.navigationItem.leftBarButtonItem = barButton; 
```

为点击的分段按钮添加此方法

```
-(void)doMenu
{
    /// code for segment button tapped
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:49:45.237

我猜性能问题可能需要使用单独的视图控制器而不是两个子视图，但它要复杂得多——您将拥有一个非常复杂的导航系统，并且需要为每个视图设置段控制。我确信还有另一种方法可以对视图进行子类化，但我对此并不熟悉，因此建议使用一个包含您的视图的视图控制器。

**注意：**如果您要以编程方式在每个视图中创建所有对象，则可以通过从任何隐藏视图中删除对象来获得出色的性能。

所以首先你有一个 UISegmentedControl （在 iPatel 的回答中创建）。但是在这一行中添加`[ctrl addTarget:self action:@selector(switchViewControllers) forControlEvents:UIControlEventValueChanged];`

然后输入`switchViewControllers`：

```
if (ctrl.selectedSegmentIndex == 0) {
    NSLog(@"One");
    self.viewOne.hidden = NO;
    self.viewTwo.hidden = YES;

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:@"showView" forKey:@"viewOne"];
    [defaults synchronize];
}
else if (ctrl.selectedSegmentIndex == 1) {
    NSLog(@"Two");
}

-(void)viewDidLoad {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([[defaults objectForKey:@"showView"] isEqualToString:@"viewOne"]) {
        self.viewOne.hidden = NO;
        self.viewTwo.hidden = YES;
    }
    else if (...) {

    }
} 
```

当您切换段控制时，上述内容应该有效。在每个`if`中，您都可以切换两个视图的可见性。您将创建不同的视图作为主视图的子视图；一个在另一个之上。您需要在 Interface Builder 或 viewDidLoad 中隐藏一个视图（我建议将当前视图存储在 NSUserDefaults 中，并在用户第一次加载视图控制器时显示该视图）。

# c# - 实体框架 OnChanging 保护主键

> ID：14774793
> 
> 赞同：0
> 
> 时间：2013-02-08T14:30:50.767
> 
> 标签：c#, sql, entity-framework

我在实施检查以阻止开发人员在初始创建后手动或以编程方式更新代码中的主键时遇到问题。

```
 partial class User
{
    public User()
    {
        this.UserId = sGuid.NewSGuid(sGuidType.SequentialAtEnd);
    }

    partial void OnUserIdChanging(Guid value)
    {
        //throw if its an edit...
        throw new DbEntityValidationException("Cannot mutate primary key");
    }

} 
```

如果我正在编辑/更新一个对象，这很好用，但它实际上不会让我首先创建一个新实体。有什么方法可以检查它是新实体还是现有实体？

在此先感谢，皮特

更新：

典型的我总是在发布后找到答案 -_- ！感谢您的回答家伙，我会将您的其中一个标记为正确答案，因为它们是有效的替代方案。

```
if (this.EntityState != System.Data.EntityState.Detached)
{
    throw new DbEntityValidationException("Cannot mutate primary key");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:39:33.107

这个问题通常通过制作主键设置器`private`或来解决`protected`：

```
public class MyEntity
{
  public int Id { get; private set; }
} 
```

如果您使用的是 EF 设计器，只需在设计器中选择属性并在属性网格中设置适当的访问修饰符 - 您的代码生成器将完成剩下的工作。

# arduino - 如何从解码的 IR 遥控器中确定校验和

> ID：14774794
> 
> 赞同：1
> 
> 时间：2013-02-08T14:30:54.887
> 
> 标签：arduino, checksum, crc, infrared

我有一架由红外遥控器控制的小型 3.5ch USeries 直升机，使用 Arduino 我已经解码了它的 32 位协议。除了最后 3 位似乎是某种形式的校验和。由于我已经成功地解码了来自遥控器的通道，因为它们跟踪了相应的控件，我可以看到控件的细微变化会产生 3 位的特定变化，这是非常可重复和确定的。而我还没有找到一个共同的主题或形式来重现假设的校验和。我尝试过简单的事情，例如奇偶校验或添加校验和。我可以看到更改特定位对 cksum 的影响，但是当我组合更改时，它们不会简单地添加到 3 位值。

```
struct Useries // bit structure recieved from 32 bit IR command
{
   unsigned cksum    : 3;    // 0..2
   unsigned Rbutton  : 1;    // 3
   unsigned Lbutton  : 1;    // 4
   unsigned Turbo    : 1;    // 5
   unsigned Channel  : 2;    // 6,7
   unsigned Trim     : 6;    // 8..13
   unsigned Yaw      : 5;    // 14..18
   unsigned Pitch    : 6;    // 19..24
   unsigned Throttle : 7;    // 25..31
}; 
```

所以问题是**“我怎样才能确定校验和的公式？”** 或者不管它是什么，比如对它进行重新编程。

因为它看起来是确定性的，所以应该能够获取 cksum 和其他 27 位的记录输出并为其推导出一个公式。很像PLD逻辑。虽然刺激是 2^27 位或 128M 的可能性，而输出只有 2^3 或 8，我怀疑即使是 <1% 或更少的小样本也能提供公式。

另一种方法是将其视为一个加密问题，而 3 位 cksum 是一个散列。

无论哪种方式。非常感谢任何确定解决方案的方法或指导。

[这是示例数据](http://www.flaga.net/UseriesCKsum.txt)

* * *

仅供参考 - USeries 不是 Syma。Syma 的解码器没有校验和。一旦我确定了 USeries chksum，我将从 Ken Shirriff 的一个分支开源它们。

仅供参考

```
Struct SymaR5// bit structure recieved from 32 bit IR command
{
   unsigned Trim     : 8;    // 0..7   0x7F
   unsigned Throttle : 7;    // 8..15  0x7F
   unsigned Channel  : 1;    // 16     0x01
   unsigned Pitch    : 8;    // 17..24 0x7F
   unsigned Yaw      : 8;    // 25..31 0x7F
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:18:00.443

对奇偶校验掩码的快速检查会产生七个掩码，这些掩码始终在您的数据上提供零奇偶校验。（你的两个位总是相同的，所以我对掩码的规律性做了一个假设，以消除一些竞争者。）掩码是：

```
0x2e5cb972
0x5cb972e5
0x72e5cb97
0x972e5cb9
0xb972e5cb
0xcb972e5c
0xe5cb972e 
```

这些掩码中的任何一个与您的任何数据值（所有 32 位）相结合都会导致奇偶校验为零。三个可以被认为是特殊的，因为您识别的每个奇偶校验位在这三个中分别只出现一次（以 2、9 和 c 结尾的那些）。因此，没有最后三位的这三个掩码可用于获取每个奇偶校验位。

掩码重复这七个位：`0010111`. 此 C 代码使用移位和异或来应用掩码和奇偶校验计算：

```
 p = x;
    while ((x >>= 7) != 0)
        p ^= x;
    p = (p ^ (p >> 1) ^ (p >> 2) ^ (p >> 4)) & 7; 
```

其中`x`和`p`是 32 位无符号类型。 `x`是接收到的 32 位。如果`p`完成时为零，则接收到的值是好的。

# c# - 从另一个 CS 文件调用 delegate()？

> ID：14774795
> 
> 赞同：0
> 
> 时间：2013-02-08T14:30:55.157
> 
> 标签：c#, wpf, multithreading, delegates, filesystems

我正在尝试练习文件监视的示例。所以基本思想是创建一个独立的线程来监控被监视文件夹中的任何事件。原始程序是基于 windows 窗体的，我正在尝试将其转换为框架 3.5、C# + WPF；

响应事件的委托函数在 A.cs 中定义，它们看起来像：

```
public class WatcherEx : IDisposable
    {
        #region Data Members
        private bool           disposed    = false;
        private WatcherInfo    watcherInfo = null;
        private WatchersExList watchers    = new WatchersExList();
        #endregion Data Members

        #region Event Definitions
        public event WatcherExEventHandler EventChangedAttribute     = delegate {};
        public event WatcherExEventHandler EventChangedCreationTime  = delegate {};
        public event WatcherExEventHandler EventChangedDirectoryName = delegate {};
        public event WatcherExEventHandler EventChangedFileName      = delegate {};
        public event WatcherExEventHandler EventChangedLastAccess    = delegate {};
        public event WatcherExEventHandler EventChangedLastWrite     = delegate {};
        public event WatcherExEventHandler EventChangedSecurity      = delegate {};
        public event WatcherExEventHandler EventChangedSize          = delegate {};
        public event WatcherExEventHandler EventCreated              = delegate {};
        public event WatcherExEventHandler EventDeleted              = delegate {};
        public event WatcherExEventHandler EventRenamed              = delegate {};
        public event WatcherExEventHandler EventError                = delegate {};
        public event WatcherExEventHandler EventDisposed             = delegate {};
        public event WatcherExEventHandler EventPathAvailability     = delegate {};
        #endregion Event Definitions

        #region Constructors
        //--------------------------------------------------------------------------------
        public WatcherEx(WatcherInfo info)
        {
            if (info == null)
            {
                throw new Exception("WatcherInfo object cannot be null");
            }
            this.watcherInfo = info;

            Initialize();
        }
        #endregion Constructors

        #region Dispose Methods
        //--------------------------------------------------------------------------------
        /// <summary>
        /// Disposes all of the FileSystemWatcher objects, and disposes this object.
        /// </summary>
        public void Dispose()
        {
            Debug.WriteLine("WatcherEx.Dispose()");
            if (!this.disposed)
            {
                DisposeWatchers();
                this.disposed = true;
                GC.Collect();
                GC.WaitForPendingFinalizers();
            }
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Disposes of all of our watchers (called from Dispose, or as a result of 
        /// loosing access to a folder)
        /// </summary>
        public void DisposeWatchers()
        {
            Debug.WriteLine("WatcherEx.DisposeWatchers()");
            for (int i = 0; i < this.watchers.Count; i++)
            {
                this.watchers[i].Dispose();
            }
            this.watchers.Clear();
        }
        #endregion Dispose Methods

        #region Helper Methods
        //--------------------------------------------------------------------------------
        /// <summary>
        /// Determines if the specified NotifyFilter item has been specified to be 
        /// handled by this object.
        /// </summary>
        /// <param name="filter"></param>
        /// <returns></returns>
        public bool HandleNotifyFilter(NotifyFilters filter)
        {
            return (((NotifyFilters)(this.watcherInfo.ChangesFilters & filter)) == filter);
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Determines if the specified WatcherChangeType item has been specified to be 
        /// handled by this object.
        /// </summary>
        /// <param name="filter"></param>
        /// <returns></returns>
        public bool HandleWatchesFilter(WatcherChangeTypes filter)
        {
            return (((WatcherChangeTypes)(this.watcherInfo.WatchesFilters & filter)) == filter);
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Initializes this oibject by creating all of the required internal 
        /// FileSystemWatcher objects necessary to mointor the folder/file for the 
        /// desired changes
        /// </summary>
        private void Initialize()
        {
            Debug.WriteLine("WatcherEx.Initialize()");
            // the buffer can be from 4 to 64 kbytes.  Default is 8
            this.watcherInfo.BufferKBytes = Math.Max(4, Math.Min(this.watcherInfo.BufferKBytes, 64));

            // create the main watcher (handles create/delete, rename, error, and dispose)
            // can't pass a null enum type, so we just pass ta dummy one on the first call
            CreateWatcher(false, this.watcherInfo.ChangesFilters);
            // create a change watcher for each NotifyFilter item
            CreateWatcher(true, NotifyFilters.Attributes);
            CreateWatcher(true, NotifyFilters.CreationTime);
            CreateWatcher(true, NotifyFilters.DirectoryName);
            CreateWatcher(true, NotifyFilters.FileName);
            CreateWatcher(true, NotifyFilters.LastAccess);
            CreateWatcher(true, NotifyFilters.LastWrite);
            CreateWatcher(true, NotifyFilters.Security);
            CreateWatcher(true, NotifyFilters.Size);

            Debug.WriteLine(string.Format("WatcherEx.Initialize() - {0} watchers created", this.watchers.Count));
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Actually creates the necessary FileSystemWatcher objects, depending oin which 
        /// notify filters and change types the user specified.
        /// </summary>
        /// <param name="changeType"></param>
        /// <param name="filter"></param>
        private void CreateWatcher(bool changedWatcher, NotifyFilters filter)
        {
            Debug.WriteLine(string.Format("WatcherEx.CreateWatcher({0}, {1})", changedWatcher.ToString(), filter.ToString()));

            FileSystemWatcherEx watcher = null;
            int bufferSize = (int)this.watcherInfo.BufferKBytes * 1024;
            // Each "Change" filter gets its own watcher so we can determine *what* 
            // actually changed. This will allow us to react only to the change events 
            // that we actually want.  The reason I do this is because some programs 
            // fire TWO events for  certain changes. For example, Notepad sends two 
            // events when a file is created. One for CreationTime, and one for 
            // Attributes.
            if (changedWatcher)
            {
                // if we're not handling the currently specified filter, get out
                if (HandleNotifyFilter(filter))
                {
                    watcher                       = new FileSystemWatcherEx(this.watcherInfo.WatchPath);
                    watcher.IncludeSubdirectories = this.watcherInfo.IncludeSubFolders;
                    watcher.Filter                = this.watcherInfo.FileFilter;
                    watcher.NotifyFilter          = filter;
                    watcher.InternalBufferSize    = bufferSize;
                    switch (filter)
                    {
                        case NotifyFilters.Attributes    :
                            watcher.Changed += new FileSystemEventHandler(watcher_ChangedAttribute);
                            break;
                        case NotifyFilters.CreationTime  : 
                            watcher.Changed += new FileSystemEventHandler(watcher_ChangedCreationTime);
                            break;
                        case NotifyFilters.DirectoryName : 
                            watcher.Changed += new FileSystemEventHandler(watcher_ChangedDirectoryName);
                            break;
                        case NotifyFilters.FileName      : 
                            watcher.Changed += new FileSystemEventHandler(watcher_ChangedFileName);
                            break;
                        case NotifyFilters.LastAccess    : 
                            watcher.Changed += new FileSystemEventHandler(watcher_ChangedLastAccess);
                            break;
                        case NotifyFilters.LastWrite     : 
                            watcher.Changed += new FileSystemEventHandler(watcher_ChangedLastWrite);
                            break;
                        case NotifyFilters.Security      : 
                            watcher.Changed += new FileSystemEventHandler(watcher_ChangedSecurity);
                            break;
                        case NotifyFilters.Size          : 
                            watcher.Changed += new FileSystemEventHandler(watcher_ChangedSize);
                            break;
                    }
                }
            }
            // All other FileSystemWatcher events are handled through a single "main" 
            // watcher.
            else
            {
                if (HandleWatchesFilter(WatcherChangeTypes.Created) ||
                    HandleWatchesFilter(WatcherChangeTypes.Deleted) ||
                    HandleWatchesFilter(WatcherChangeTypes.Renamed) ||
                    this.watcherInfo.WatchForError ||
                    this.watcherInfo.WatchForDisposed)
                {
                    watcher                       = new FileSystemWatcherEx(this.watcherInfo.WatchPath, watcherInfo.MonitorPathInterval);
                    watcher.IncludeSubdirectories = this.watcherInfo.IncludeSubFolders;
                    watcher.Filter                = this.watcherInfo.FileFilter;
                    watcher.InternalBufferSize    = bufferSize;
                }

                if (HandleWatchesFilter(WatcherChangeTypes.Created)) 
                {
                    watcher.Created += new FileSystemEventHandler(watcher_CreatedDeleted);
                }
                if (HandleWatchesFilter(WatcherChangeTypes.Deleted))
                {
                    watcher.Deleted += new FileSystemEventHandler(watcher_CreatedDeleted);
                }
                if (HandleWatchesFilter(WatcherChangeTypes.Renamed))
                {
                    watcher.Renamed += new RenamedEventHandler(watcher_Renamed);
                }
                if (watcherInfo.MonitorPathInterval > 0)
                {
                    watcher.EventPathAvailability += new PathAvailabilityHandler(watcher_EventPathAvailability);
                }
            }
            if (watcher != null)
            {
                if (this.watcherInfo.WatchForError)
                {
                    watcher.Error += new ErrorEventHandler(watcher_Error);
                }
                if (this.watcherInfo.WatchForDisposed)
                {
                    watcher.Disposed += new EventHandler(watcher_Disposed);
                }
                this.watchers.Add(watcher);
            }
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Starts all of the internal FileSystemWatcher objects by setting their 
        /// EnableRaisingEvents property to true.
        /// </summary>
        public void Start()
        {
            Debug.WriteLine("WatcherEx.Start()");
            this.watchers[0].StartFolderMonitor();
            for (int i = 0; i < this.watchers.Count; i++)
            {
                this.watchers[i].EnableRaisingEvents = true;
            }
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Stops all of the internal FileSystemWatcher objects by setting their 
        /// EnableRaisingEvents property to true.
        /// </summary>
        public void Stop()
        {
            Debug.WriteLine("WatcherEx.Stop()");
            this.watchers[0].StopFolderMonitor();
            for (int i = 0; i < this.watchers.Count; i++)
            {
                this.watchers[i].EnableRaisingEvents = false;
            }
        }
        #endregion Helper Methods

        #region Native Watcher Events
        //--------------------------------------------------------------------------------
        /// <summary>
        /// Fired when the watcher responsible for monitoring attribute changes is 
        /// triggered.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void watcher_ChangedAttribute(object sender, FileSystemEventArgs e)
        {
            Debug.WriteLine("EVENT - Changed Attribute");
            EventChangedAttribute(this, new WatcherExEventArgs(sender as FileSystemWatcherEx, e, ArgumentType.FileSystem, NotifyFilters.Attributes));
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Fired when the watcher responsible for monitoring creation time changes is 
        /// triggered.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void watcher_ChangedCreationTime(object sender, FileSystemEventArgs e)
        {
            Debug.WriteLine("EVENT - Changed CreationTime");
            EventChangedCreationTime(this, new WatcherExEventArgs(sender as FileSystemWatcherEx, e, ArgumentType.FileSystem, NotifyFilters.CreationTime));
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Fired when the watcher responsible for monitoring directory name changes is 
        /// triggered.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void watcher_ChangedDirectoryName(object sender, FileSystemEventArgs e)
        {
            Debug.WriteLine("EVENT - Changed DirectoryName");
            EventChangedDirectoryName(this, new WatcherExEventArgs(sender as FileSystemWatcherEx, e, ArgumentType.FileSystem, NotifyFilters.DirectoryName));
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Fired when the watcher responsible for monitoring file name changes is 
        /// triggered.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void watcher_ChangedFileName(object sender, FileSystemEventArgs e)
        {
            Debug.WriteLine("EVENT - Changed FileName");
            EventChangedFileName(this, new WatcherExEventArgs(sender as FileSystemWatcherEx, e, ArgumentType.FileSystem, NotifyFilters.FileName));
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Fired when the watcher responsible for monitoring last access date/time 
        /// changes is triggered.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void watcher_ChangedLastAccess(object sender, FileSystemEventArgs e)
        {
            Debug.WriteLine("EVENT - Changed LastAccess");
            EventChangedLastAccess(this, new WatcherExEventArgs(sender as FileSystemWatcherEx, e, ArgumentType.FileSystem, NotifyFilters.LastAccess));
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Fired when the watcher responsible for monitoring last write date/time 
        /// changes is triggered.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void watcher_ChangedLastWrite(object sender, FileSystemEventArgs e)
        {
            Debug.WriteLine("EVENT - Changed LastWrite");
            EventChangedLastWrite(this, new WatcherExEventArgs(sender as FileSystemWatcherEx, e, ArgumentType.FileSystem, NotifyFilters.LastWrite));
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Fired when the watcher responsible for monitoring security changes is 
        /// triggered.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void watcher_ChangedSecurity(object sender, FileSystemEventArgs e)
        {
            Debug.WriteLine("EVENT - Changed Security");
            EventChangedSecurity(this, new WatcherExEventArgs(sender as FileSystemWatcherEx, e, ArgumentType.FileSystem, NotifyFilters.Security));
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Fired when the watcher responsible for monitoring size changes is 
        /// triggered.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void watcher_ChangedSize(object sender, FileSystemEventArgs e)
        {
            Debug.WriteLine("EVENT - Changed Size");
            EventChangedSize(this, new WatcherExEventArgs(sender as FileSystemWatcherEx, e, ArgumentType.FileSystem, NotifyFilters.Size));
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Fired when an internal watcher is disposed
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void watcher_Disposed(object sender, EventArgs e)
        {
            Debug.WriteLine("EVENT - Disposed");
            EventDisposed(this, new WatcherExEventArgs(sender as FileSystemWatcherEx, e, ArgumentType.StandardEvent));
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Fired when the main watcher detects an error (the watcher that detected the 
        /// error is part of the event's arguments object)
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void watcher_Error(object sender, ErrorEventArgs e)
        {
            Debug.WriteLine("EVENT - Error");
            EventError(this, new WatcherExEventArgs(sender as FileSystemWatcherEx, e, ArgumentType.Error));
        }

        //--------------------------------------------------------------------------------
        /// <summary>
        /// Fired when the main watcher detects a file rename.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void watcher_Renamed(object sender, RenamedEventArgs e)
        {
            Debug.WriteLine("EVENT - Renamed");
            EventRenamed(this, new WatcherExEventArgs(sender as FileSystemWatcherEx, e, ArgumentType.Renamed));
        }

        //--------------------------------------------------------------------------------
        private void watcher_CreatedDeleted(object sender, FileSystemEventArgs e)
        {
            switch (e.ChangeType)   
            {
                case WatcherChangeTypes.Created :
                    Debug.WriteLine("EVENT - Created");
                    EventCreated(this, new WatcherExEventArgs(sender as FileSystemWatcherEx, e, ArgumentType.FileSystem));
                    break;
                case WatcherChangeTypes.Deleted :
                    Debug.WriteLine("EVENT - Changed Deleted");
                    EventDeleted(this, new WatcherExEventArgs(sender as FileSystemWatcherEx, e, ArgumentType.FileSystem));
                    break;
            }
        }

...... 
```

在另一个文件 B.cs（主 UI）中，我试图调用这些在 A.cs 中定义的事件响应函数，使用如下所示：

```
void fileWatcher_EventCreated(object sender, WatcherExEventArgs e)
        {
            listView1.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, _fileWatcher.EventCreated());
    } 
```

但是我不断收到错误消息，说`_fileWatcher.EventCreated()`只能在 += 或 -=... 的左侧

我试图在 B.cs（UI 的 CS 文件）中完成所有操作，如下所示：

```
void fileWatcher_EventDeleted(object sender, WatcherExEventArgs e)
        {
            Action EventDeleted = delegate()
            {
                _lvie.fileName = ((FileSystemEventArgs)(e.Arguments)).FullPath;
                _lvie.fileEvent = "Deleted";
                _lvie.timeOfOccurance = DateTime.Now.ToString("HH:mm:ss.fff");
                listView1.Items.Add(_lvie);
            };

            listView1.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, EventDeleted);            
        } 
```

但它没有很好地响应文件更改事件。它似乎没有选择一些事件。

我只是想知道我应该怎么做：在主 UI（A.cs）中调用后台线程（B.cs）中的响应事件函数？或者我应该以任何其他方式做到这一点？任何建议都非常感谢。谢谢。我对CS很陌生，所以请原谅我的无知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:36:08.350

[事件](http://msdn.microsoft.com/en-us/library/awbftdfh.aspx)只能从它们所在的类内部引发。

B 类不能引发 A 类中存在的事件。

您可以实现的最接近的解决方法是从类 A 中创建一个新的 API 函数，称为 - 例如 - “RaiseMyEvent”，它从类 A 中手动引发事件；从 B 类调用该函数。

```
public class A
{
    public event EventHandler MyEvent = null;

    public void RaiseMyEvent(EventArgs args)
    {
        var handler = MyEvent;
        if(handler != null)
        {
            handler(this, args);
        }
    }
}

//Then, from inside class B:
myInstanceOfA.RaiseMyEvent();  //This will cause A to raise its own event 
```

# c - C Blackjack 游戏的 int 数组缺少输出

> ID：14774798
> 
> 赞同：0
> 
> 时间：2013-02-08T14:31:18.383
> 
> 标签：c, arrays, output, blackjack

所以我尝试用 C 语言编写一个 Blackjack 游戏只是为了好玩（这是我以前从未尝试过的）。我已经完成了最初的几个步骤，例如如何设置牌组以及如何将牌交给庄家和玩家。但是，显示的输出也没有显示我想要的（显示庄家只有 1 张牌，而应该显示 2 张牌）。这是一个屏幕截图：

![是的，这是在我的手机上运行的，但我的电脑上也有相同的结果。](../Images/7fc4a32746064e3cdd521d8a479459c8.png)

我确实在我的手机上运行了这个（更容易获得截图），但我在我的计算机上使用 Code::Blocks 得到了相同的结果。无论如何，我有两个函数来处理设置套牌和显示当前卡片。我在 main() 函数中使用循环处理的牌。我知道 makeDeck() 函数工作正常，所以我假设我的错误在其他地方。看看我的代码，让我知道发生了什么（另外，任何改进建议将不胜感激）：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

/*Function Prototypes*/
int* makeDeck();
    /*Usage - returns an int* to be used for the deck */

void showHands(int[], int[]);
    /*Usage - pass dealerHand[], then playerHand[] */

int main() {
        srand(time(0));     //Make a new rand() seed value
    int  x, count = 0, choice = 1;
    int* cards        = makeDeck();
    int  dealerCards[12];       //cards in hand will never exceed 11
    int  playerCards[12];       //4 A's, 4 2's, 3 3's

    /*Loop to run the game. One iteration per hand */
    while(choice != 0) {
        for(x = 0; x < 12; x++) {
            dealerCards[x] = 0;
            playerCards[x] = 0;
        }

        //Deal 2 cards to dealer and player
        for(x = 0; x < 2; x++) {
            dealerCards[x] = cards[count];
            count++;
        }
        for(x = 0; x < 2; x++) {
            playerCards[x] = cards[count];
            count++;
        }

        showHands(dealerCards, playerCards);

                /*DEBUGGING */
        printf("\nEnter 0 to exit loop: ");
        scanf("%i", &choice);
    }
    return 0;
}

//Declare placeholder variable "bunchOfCards" globally
int bunchOfCards[52];

int* makeDeck(){
    int* deck = bunchOfCards;
    int  x    = 0,
         y    = 0,
         card = 0;
    for(x = 0; x < 52; x++) {           //set all cards to 0
        deck[x] = 0;
    }
    for(x = 0; x < 4; x++) {                //set up deck
        for(y = 1; y < 14; y++) {
             card = (rand() % 52);

             //check if deck position is already used
             while(deck[card] != 0) {
                    card = (rand() % 52);
             }
             deck[card] = y;
        }
    }
    /* DEBUGGING
    for(x = 0; x < 52; x++) {
        printf("%i\t", deck[x]);
    } */
    return deck;
}

void showHands(int* dealer, int* player) {
    int x; char card[3] = { '\0', '\0', '\0' };
    puts("The hands are: \n\nDealer:");

    //Display dealer cards
    for(x = 0; x < 12; x++) {
        if(dealer[x] != 0) {
            if((dealer[x] < 10) && (dealer[x] != 1)) {
                card[0] = (char)(((int)'0') + dealer[x]);
                card[1] = '\0';
            } else if(dealer[x] == 1) {
                card[0] = 'A';
                card[1] = '\0';
            } else if(dealer[x] == 10) {
                card[0] = '1';
                card[1] = '0';
            } else if(dealer[x] == 11) {
                card[0] = 'J';
                card[1] = '\0';
            } else if(dealer[x] == 12) {
                card[0] = 'Q';
                card[1] = '\0';
            } else if(dealer[x] == 13) {
                card[0] = 'K';
                card[1] = '\0';
            }
            printf("\t%s", card);
        }

        //Display player cards
        puts("\nPlayer: ");
        for(x = 0; x < 12; x++) {
            if(player[x] != 0) {
                if((player[x] < 10) && (player[x] != 1)) {
                    card[0] = (char)(((int)'0') + player[x]);
                    card[1] = '\0';
                } else if(player[x] == 1) {
                    card[0] = 'A';
                    card[1] = '\0';
                } else if(player[x] == 10) {
                    card[0] = '1';
                    card[1] = '0';
                } else if(player[x] == 11) {
                    card[0] = 'J';
                    card[1] = '\0';
                } else if(player[x] == 12) {
                    card[0] = 'Q';
                    card[1] = '\0';
                } else if(player[x] == 13) {
                    card[0] = 'K';
                    card[1] = '\0';
                }
                printf("\t%s", card);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:04:46.540

您的 for 循环似乎相互包含。

```
for(x = 0; x < 12; x++) {
  if(dealer[x] != 0) {
    ...
  }
  puts("\nPlayer: ");
  for(x = 0; x < 12; x++) {
    ...
  }
} 
```

第一个 for 循环从 x = 0 开始，第二个 for 循环上升到 x = 12，然后第一个 for 循环在第二次执行之前停止，因为它达到了终止条件。

# hibernate - Grails 控制器（简单）代码消耗过多内存。如何优化？

> ID：14774799
> 
> 赞同：0
> 
> 时间：2013-02-08T14:31:18.727
> 
> 标签：hibernate, grails, out-of-memory

我有一个非常简单的域类和一个控制器，虽然运行时消耗超过 400MB - 需要一些关于优化它的建议。

基本上我有两个域类A和B，它们处于两个一对多的关系中（实际上B类代表A类实例之间的多对多关系，-A的单个对象可以被多个B的对象引用作为“fromA”，A 的单个对象可以被多个 B 的对象引用为“toA”——就像 GORM 文档和航班和机场示例——A 是机场，B 是航班）。A 类是一个非常简单的领域类。

```
class A {
    static hasMany = [fromAs:B, toAs:B]
    static mappedBy = [fromAs:"fromA", toAs:"toA"]

    int ...
    String ...
    // several simple fields
} 
```

B 类也很简单，它只是以两种方式引用 A 类。

```
class B {
    A fromA
    A toA

    int ...
    String ...
    // several simple fields
} 
```

现在控制器所做的是将所有可能的“航班”信息填充到数据库中。它还对 int 进行了一些非常小的计算，作为这些 int 的设置，但为了使代码清晰，我跳过了它。

```
A.list().each{ tempFromA ->
    A.list().each{ tempToA ->
        def b = new B()
            b.setFromA(tempFromA)
            b.setToA(tempToA)
            b.save(flush:false)
    }
} 
```

这就是所有代码，它消耗超过 400MB od RAM。我尝试每插入 10 000 条记录调用 hiernateSession.flush() ，但总是在提交 120 000 到 300 000 条记录后，就会发生内存不足。

数据库中有 610 个 A，因此嵌入式循环有超过 370 000 个周期 (610x610)。

任何指南如何在内存消耗方面优化此代码？它是如此简单的代码，可能我在这里做一些非常愚蠢的事情......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:55:44.403

[Ted Naleid](http://naleid.com/blog/2009/10/01/batch-import-performance-with-grails-and-mysql/)的这篇文章中有一些非常好的 GORM 批处理性能技巧。特别是，“Grails Performance Tweaks”部分可能会有所帮助。

# java - RestEasy：如何验证 ClientResponse 正文？

> ID：14774800
> 
> 赞同：1
> 
> 时间：2013-02-08T14:31:22.263
> 
> 标签：java, rest, testing, resteasy

我有一个`REST`端点

```
@GET
@Produces(MediaType.APPLICATION_JSON)
public Response getVariables(@QueryParam("_activeonly") @DefaultValue("no") @Nonnull final Active active) {
    switch(active){
        case yes:
        return Response.ok(VariablePresentation.getPresentationVariables(variableManager.getActiveVariables())).build();
        case no:
        return Response.ok(VariablePresentation.getPresentationVariables(variableManager.getVariables())).build();
    }
    throw new WebApplicationException(Response.Status.BAD_REQUEST);
} 
```

的哪个返回`JSON`。看起来像 `List``VariablePresentation``VariablePresentaion`

```
@XmlRootElement
public class VariablePresentation {

    private final UUID id;
    private final String name;
    private final VariableType type;

    public VariablePresentation(@Nonnull final Variable variable) {
        id = variable.getId();
        name = variable.getName();
        type = variable.getType();
                }

    public String getId() {
        return id.toString();
    }

    @Nonnull
    public String getName() {
        return name;
    }

    @Nonnull
    public VariableType getType() {
        return type;
    } 
```

`JAXB`用's注释`XmlRoot`返回`JSON`。我的集成测试如下

```
@Test
public void testGetAllVariablesWithoutQueryParamPass() throws Exception {
    final ClientRequest clientCreateRequest = new ClientRequest("http://localhost:9090/variables");
    final MultivaluedMap<String, String> formParameters = clientCreateRequest.getFormParameters();
    final String name = "testGetAllVariablesWithoutQueryParamPass";
    formParameters.putSingle("name", name);
    formParameters.putSingle("type", "String");
    formParameters.putSingle("units", "units");
    formParameters.putSingle("description", "description");
    formParameters.putSingle("core", "true");
    final ClientResponse<String> clientCreateResponse = clientCreateRequest.post(String.class);
    assertEquals(201, clientCreateResponse.getStatus());
} 
```

我想测试返回`List<VariablePresentation>`字符串的请求正文。如何将响应正文（字符串）转换为`VariablePresentation`对象？

**更新**

添加以下内容后

```
 final GenericType<List<VariablePresentation>> typeToken = new GenericType<List<VariablePresentation>>() {
        };
        final ClientResponse<List<VariablePresentation>> clientCreateResponse = clientCreateRequest.post(typeToken);
        assertEquals(201, clientCreateResponse.getStatus());
        final List<VariablePresentation> variables = clientCreateResponse.getEntity();
        assertNotNull(variables);
        assertEquals(1, variables.size()); 
```

它失败并出现不同的错误

```
testGetAllVariablesWithoutQueryParamPass(com.myorg.project.market.integration.TestVariable): Unable to find a MessageBodyReader of content-type application/json and type java.util.List<com.myorg.project.service.presentation.VariablePresentation> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:34:22.630

我发现最简单的方法是将 ClientResponse 与[Gson一起使用](https://sites.google.com/site/gson/)

一个简单的例子可能是

```
 @Test
    public void testGetAllVariablesWithoutQueryParamNoPass() throws Exception {
        final ClientRequest clientCreateRequest_var0 = new ClientRequest("http://localhost:9090/variables?_activeonly=no");
        final MultivaluedMap<String, String> formParameters = clientCreateRequest_var0.getFormParameters();
        final String name0 = "testGetAllVariablesWithoutQueryParamNoPass_0";
        formParameters.putSingle("name", name0);
        formParameters.putSingle("type", "String");
        formParameters.putSingle("units", "units");
        formParameters.putSingle("description", "description");
        formParameters.putSingle("core", "true");

        final ClientResponse<String> clientCreateResponse_var0 = clientCreateRequest_var0.post(String.class);
        assertEquals(201, clientCreateResponse_var0.getStatus());

        final ClientRequest clientCreateRequest_var1 = new ClientRequest("http://localhost:9090/variables");
        final MultivaluedMap<String, String> formParameters1 = clientCreateRequest_var1.getFormParameters();
        final String name1 = "testGetAllVariablesWithoutQueryParamNoPass_1";
        formParameters1.putSingle("name", name1);
        formParameters1.putSingle("type", "String");
        formParameters1.putSingle("units", "units");
        formParameters1.putSingle("description", "description");
        formParameters1.putSingle("core", "true");

        final ClientResponse<String> clientCreateResponse_var1 = clientCreateRequest_var1.post(String.class);
        assertEquals(201, clientCreateResponse_var1.getStatus());

        final ClientRequest clientCreateRequest2 = new ClientRequest("http://localhost:9090/variables");
        final ClientResponse<String> clientCreateResponse2 = clientCreateRequest2.get(String.class);

        final Gson gson = new Gson();
        final Type variableType = new TypeToken<List<VariablePresentation>>() {
        }.getType();
        List<VariablePresentation> variables = gson.fromJson(clientCreateResponse2.getEntity(), variableType);
        assertNotNull(variables);

        assertEquals(2, variables.size());

        // clean test data
        removeTestDataVariableObject(name0);
        removeTestDataVariableObject(name1);
    } 
```

# java - 黑莓的单元测试库

> ID：14774803
> 
> 赞同：1
> 
> 时间：2013-02-08T14:31:31.680
> 
> 标签：java, unit-testing, blackberry, shared-libraries

我正在为 BB 5.0 应用程序开发一个库，但是如果不将它包含在应用程序项目中，我不知道如何测试这个库。

有没有办法对我的黑莓库中的代码进行单元测试，它不使用任何 Ui 元素。

# jquery - MVC3 中工作时间限制的用户登录

> ID：14774804
> 
> 赞同：0
> 
> 时间：2013-02-08T14:31:34.190
> 
> 标签：jquery, asp.net-mvc-3, razor, entity-framework-4, autofac

我正在寻找在 MVC3 应用程序的下班时间限制用户登录的好方法。

我已经在应用程序中自定义了授权过滤器，因此考虑放入一个模块进行时间检查。

我还想在结束时间后给用户 30 分钟（可配置）的宽限期。

代码片段真的很有帮助。

**编辑：** 周一至周日的工作时间和宽限期将存储在 SQL Server 中，并将分配给每个用户。

因此，还请提出一种输入这些详细信息的方法。我确实有系统管理员页面，我可以在其中更新 sql server 中的用户表。我认为使用 jquery 滑块会是一个好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:34:28.303

> 我已经在应用程序中自定义了授权过滤器，因此考虑放入一个模块进行时间检查

是的，这似乎是一个非常好的方法：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var now = DateTime.Now;
        // TODO: you probably want to read those values from a config file 
        // to avoid hardcoding them
        if (now.Hour > 8 && now.Hour < 20)
        {
            return base.AuthorizeCore(httpContext);
        }

        // we are outside of standard working hours => deny authorization
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:37:40.410

我认为你可以在你的 xml 文件中做这部分。我猜可以在您的 xml 中配置安全目的

# vba - 如何将 4 列合并为 1 列？

> ID：14774806
> 
> 赞同：1
> 
> 时间：2013-02-08T14:31:44.667
> 
> 标签：vba, excel, excel-formula, excel-2010

使用office 2010。
一切都在同一张纸上。
ABC & D 列中的数据可以更改（每天增加或减少）

我有 4 列

```
 OUTPUT --> IN column F should be 
---A-----B-----C------D---------------------------------------F
   1     5     8     AP                                       1
   2     6     9     BP                                       2
   3     7     1     CD                                       3
   4           5     QW                                       4
                                                              5
                                                              6
                                                              7
                                                              8
                                                              9
                                                              1
                                                              5
                                                              AP
                                                              BP
                                                              CD
                                                              QW 
```

ABC & D 列的长度可以增加或减少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:35:07.737

使用以下。它接受您需要更改的范围，并将返回一个垂直的值数组。要填充值，请使用数组公式。

```
Function ToVector(rng As Range)

    Dim cells()
    ReDim cells(rng.cells.Count)

    Dim i As Double

    For Each cell In rng

        cells(i) = cell
        i = i + 1

    Next cell

    ToVector = Application.WorksheetFunction.Transpose(cells)

End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:39:30.157

这个怎么样？

```
Sub move()
    Dim ws As Worksheet
    Dim outputColumn As Long
    Dim currentColumn As Long
    Dim currentOutputRow As Long

    Set ws = ActiveSheet
    outputColumn = 6 ' column f

    For currentColumn = 1 To 4
        currentOutputRow = ws.Cells(ws.Rows.Count, outputColumn).End(xlUp).Row
        If (currentOutputRow > 1) Then
            currentOutputRow = currentOutputRow + 1
        End If

        ws.Range(ws.Cells(1, currentColumn), ws.Cells(ws.Rows.Count, currentColumn).End(xlUp)).Copy _
            ws.Cells(currentOutputRow, outputColumn)
    Next
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T17:26:35.623

借助本网站[get-digital-help.com/](http://get-digital-help.com/)

[合并列](http://www.get-digital-help.com/2009/06/28/merge-three-columns-into-one-list-in-excel/)但这只是静态的。

我将其转换为动态含义变化范围。

例如我在 F 中发布了 ABCD

为了使公式更清晰，将在名称管理器中输入公式

*BELOW IS DYNAMIC FORMULA FOR EACH COLUMN*（进入名称管理器）

```
ALIST = =OFFSET($A$1,0,0,COUNTA($A:$A),1)
BLIST = =OFFSET($B$1,0,0,COUNTA($B:$B),1)
CLIST = =OFFSET($C$1,0,0,COUNTA($C:$C),1)
DLIST = =OFFSET($D$1,0,0,COUNTA($D:$D),1) 
```

*F列中的公式*并向下拖动

```
 =IFERROR(INDEX(ALIST, ROWS(F$1:$F1)), 
   IFERROR(INDEX(BLIST, ROWS(F$1:$F1)-ROWS(ALIST)), 
   IFERROR(INDEX(CLIST, ROWS(F$1:$F1)-ROWS(ALIST)-ROWS(BLIST)),
   IFERROR(INDEX(DLIST, ROWS(F$1:$F1)-ROWS(ALIST)-ROWS(BLIST)-ROWS(CLIST)),"")))) 
```

截屏

![在此处输入图像描述](../Images/64736d11988c78d8a892035113ee4e14.png) ![在此处输入图像描述](../Images/677d88604cfd6f51dad55f1f54ed0377.png)

# java - 休眠：选择 OneToMany 关系中的位置

> ID：14774812
> 
> 赞同：4
> 
> 时间：2013-02-08T14:31:58.663
> 
> 标签：java, hibernate, postgresql, jpa, jpql

这些是我的（缩写）实体：

```
@Entity
public class User {

    @OneToMany(fetch=FetchType.LAZY)
    @JoinTable(name="user_items",joinColumns=@JoinColumn(name="user_id"),inverseJoinColumns=@JoinColumn(name="useritem_id"))
    private Set<UserItem> items = Sets.newHashSet();

}

@Entity
@Inheritance(strategy=InheritanceType.JOINED)
public class UserItem {

    @Id
    @Type(type=EntityConstants.TYPE_UUID)
    @Column(columnDefinition=EntityConstants.COL_UUID)
    private UUID id;

}

@Entity
public class UserItemFurniture extends UserItem {

} 
```

现在我想`UserItemFurniture`通过它的 UUID 获取 a ，但前提是它存在 a `User`'s `items`。这是我的尝试：

```
em
    .createQuery(
        "SELECT f " +
        "FROM UserItemFurniture f " +
        "WHERE f.id = :iid " +
        "AND f IN (SELECT u.items FROM User u WHERE u.id = :uid) ",
        UserItemFurniture.class
    )
    .setParameter("uid", userId)
    .setParameter("iid", itemId)
    .getSingleResult(); 
```

但它会生成这个无意义的 SQL：

```
select useritemfu0_.id as id17_, useritemfu0_1_.item as item17_, useritemfu0_.roomNumber as roomNumber18_, useritemfu0_.x as x18_, useritemfu0_.y as y18_
from UserItemFurniture useritemfu0_ inner join UserItem useritemfu0_1_ on useritemfu0_.id=useritemfu0_1_.id
where useritemfu0_.id=? and (useritemfu0_.id in (
    select .
    from _User user1_, user_items items2_, UserItem useritem3_
    where user1_.id=items2_.user_id and items2_.useritem_id=useritem3_.id and user1_.id=?
))
limit ? 
```

（注意子查询`SELECT .`：）

我可以在不诉诸本机或多个查询的情况下做到这一点吗？请注意，`UserItem`没有对 的引用`User`，这是设计使然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T19:59:18.670

可以使用以下查询：

```
SELECT f
FROM UserItemFurniture f
WHERE f.id = :uid AND EXISTS 
  (SELECT u FROM User u
   WHERE u.id = :iid and f MEMBER OF u.items) 
```

# firefox - 如何调试在 Jenkins 构建中运行时失败的 selenium 请求规范（但在作为规范手动运行时通过）

> ID：14774814
> 
> 赞同：2
> 
> 时间：2013-02-08T14:32:05.117
> 
> 标签：firefox, selenium, jenkins, jruby, capybara

我有一个用 rspec 编写的请求规范，使用 capybara：

```
scenario "request for a page with js driver", :js => true do
  visit "/foo" # redacted here, in my spec it's a legitimate URL
end 
```

在我的 spec_helper.rb 我有：

```
Capybara.javascript_driver = :selenium
require 'spec/spec_test_helper.rb'
require 'headless'

headless = Headless.new
headless.start

at_exit do
  headless.destroy
end 
```

当我在 CI 服务器上手动运行此规范时，如下所示：

```
bundle exec rspec spec/feature/sample_spec.rb 
```

规范通过。有问题的机器运行 Debian，安装了 Xvfb 和 iceweasel。都好。

但是当这个规范作为 Jenkins 构建的一部分在这台机器上运行时，通过调用 rspec 的 Ant，“visit”命令会触发以下错误：

```
 unable to obtain stable firefox connection in 60 seconds (127.0.0.1:7055)

    ./.bundle/jruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/firefox/launcher.rb:79:in `connect_until_stable'
    ./.bundle/jruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/firefox/launcher.rb:37:in `launch'
    ./.bundle/jruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/firefox/socket_lock.rb:20:in `locked'
    ./.bundle/jruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/firefox/launcher.rb:32:in `launch'
    ./.bundle/jruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/firefox/bridge.rb:20:in `initialize'
    ./.bundle/jruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver/common/driver.rb:31:in `for'
    ./.bundle/jruby/1.8/gems/selenium-webdriver-2.27.2/lib/selenium/webdriver.rb:67:in `for'
    ./.bundle/jruby/1.8/gems/capybara-2.0.2/lib/capybara/selenium/driver.rb:13:in `browser'
    ./.bundle/jruby/1.8/gems/capybara-2.0.2/lib/capybara/selenium/driver.rb:34:in `visit'
    ./.bundle/jruby/1.8/gems/capybara-2.0.2/lib/capybara/session.rb:183:in `visit'
    org/jruby/RubyKernel.java:2080:in `send'
    ./.bundle/jruby/1.8/gems/capybara-2.0.2/lib/capybara/dsl.rb:51:in `visit' 
```

我已经在使用最新的稳定版本的 capybara、headless、selenium-webdriver。这是在 jruby-1.6.7.2 上以 1.8 模式运行的。

我也尝试过为 Jenkins 使用 Xvfb 插件，但这并没有什么不同（并且不应该需要，因为无头 gem 应该为我管理启动 Xvfb）。我对错误消息的印象是问题出在连接到 Firefox 上。

我将不胜感激有关如何调试此问题的任何建议。如果我可以在登录 CI 服务器时手动运行规范时重现错误，我只需将“binding.pry”添加到规范中并使用 pry 控制台进行调试。不幸的是，此错误仅在规范作为 Jenkins 构建的一部分运行时发生。

针对我的特殊情况的建议会有所帮助，但我也很欣赏有关如何调试“无法获得稳定的 Firefox 连接”错误的建议。有没有人遇到过这种问题，并找到了一种方法来收集更多关于问题所在的线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T04:57:33.957

我在使用 Selenium 和 Java 时遇到了同样的问题。解决方案是使用 WebDriver 的[TakesScreenshot](http://selenium.googlecode.com/git/docs/api/rb/Selenium/WebDriver/DriverExtensions/TakesScreenshot.html)功能在我的测试失败时截取屏幕截图并将其保存在 Jenkins 工作区的任何位置。然后你可以看到应用程序的状态。我不知道Ruby和Capybara是否也可以做到这一点？

# ubuntu-12.04 - httperf 在 ubuntu 12.04 上给出警告打开文件描述符，但在 Ubuntu 10.04 中没有

> ID：14774817
> 
> 赞同：11
> 
> 时间：2013-02-08T14:32:18.620
> 
> 标签：ubuntu-12.04, ubuntu-10.10, httperf

我已经使用 httperf 运行负载测试几个星期并收到此错误 -

```
httperf: warning: open file limit > FD_SETSIZE; limiting max. # of open files to FD_SETSIZE
when I fire query from OS - Ubuntu 12.04 LTS (64 bit machine). 
```

但是，如果我从具有 OS - 10.04 LTS 的 32 位机器上运行相同的命令；我没有收到错误消息。

此外，我确实按照其他帖子尝试使用“ulimit -n”命令增加文件描述符大小限制，并尝试使用

```
/usr/include/bits/typesizes.h 
```

#define __FD_SETSIZE 65535

但是方法失败了。

有人可以提出一些建议吗？

观察：
不需要对 32 台机器（使用 Ubuntu 10.10）进行任何更改，那么 Ubuntu 12.04 的真正区别是什么？此外，我在不同的机器上尝试过（所有具有 64 位架构的机器都有相同的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-04T18:47:01.617

这也是 14.04 的问题。

> 要解决此问题，请执行以下步骤：
> 
> 1.  将以下行添加到 /etc/security/limits.conf

```
 * hard nofile 65532
 * soft nofile 65532 
 root hard nofile 65532
 root soft nofile 65532 
```

> 2.  在 /usr/include/x86_64-linux-gnu/bits/typesizes.h 中，找到 __FD_SETSIZE 并将其值替换为 65532
>     
>     
> 3.  [从http://sourceforge.net/projects/httperf/](http://sourceforge.net/projects/httperf/)下载 httperf
>     
>     
> 4.  从源代码构建和安装。按照 README 中的说明进行操作，但是如果您还没有安装依赖项，则需要安装。

```
sudo apt-get install libtool libssl openssl automake libevent-dev 
```

我更改了一些格式，但这主要是[postcotso](http://poscotso.wordpress.com/author/poscotso/)的工作。[源文件](http://poscotso.wordpress.com/2014/09/09/installing-httperf-on-ubuntu/)

# jquery - gRaphael：如何避免 barchart() 之间的空格

> ID：14774818
> 
> 赞同：2
> 
> 时间：2013-02-08T14:32:21.287
> 
> 标签：jquery, svn, raphael, graphael

是否有任何选项可以避免 Raphaël 条形图之间的空格？

有一个管理栏空间的选项，不幸`gutter`的是选项会影响栏的宽度。遗憾的是我没有足够的积分来上传图片:(

这是我的代码

```
var efficiency = Raphael("overview");
efficiency.barchart(0, 210, 150, 90, [[55, 20, 13, 32, 5, 1, 10], [10, 5, 32, 13, 2, 55, 8]], {stacked: true, colors:["#F58A2A", "#D4D4D4"], "gutter":"50%"}); 
```

演示 -[小提琴](http://jsfiddle.net/sweetmaanu/R52e3/)

任何帮助非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T20:35:27.240

当零不够小时，使用负数:)

像这样：

```
"gutter":"-1%" 
```

这是一个小提琴：[BarChart no space](http://jsfiddle.net/vedmack/v7XBD/)

# c# - 是否可以只为这个通用扩展方法传递一个参数？

> ID：14774819
> 
> 赞同：1
> 
> 时间：2013-02-08T14:32:24.733
> 
> 标签：c#, generics, extension-methods

```
 //In a Static class ,extension implementation
 public static IQueryable<T2> ToDTO<T, T2>(this IQueryable<T> source)
    {
        return source.To<T2>();
    }

//Usage
var result = personType1Queryable.ToDTO< personType1, personType2>(); 
```

在上面的代码中，您可以看到它的扩展。它将一种类型转换为另一种类型。所以首先**这个**引用的对象是 personType1Queryable 类型的**IQueryable<personType1>**我只想这样调用这个函数；

```
personType1Queryable.ToDTO<personType2>(); 
```

我只想传递目的地类型。因为**这个**引用的对象已经通过了。但是编译器不接受这个为什么？对于 Linq 中的 Where < T > 扩展，它可以工作。对我来说为什么不呢？

编辑：我应用了艾伦的回答。但它似乎仍然缺少一些东西。

```
 //works
    public static IQueryable<T2> ToDTO<T,T2>(this IQueryable<T> source)
    {
        return source.Project().To<T2>();
    }

  //gives object reference error. Shown below!
    public static IQueryable<T> ToDTO<T>(this IQueryable<object> source)
    {
        return source.Project().To<T>();
    } 
```

![在此处输入图像描述](../Images/a26ec2b5247cf840f7dd4d22fa14998c.png)

[http://i.stack.imgur.com/9Yh6H.png](https://i.stack.imgur.com/9Yh6H.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:45:46.913

`IQueryable<T>`在 中是协变的`T`，因此根据您在`To<T>`扩展中的需要，您可能会侥幸逃脱：

```
public static IQueryable<T> ToDTO<T>(this IQueryable<object> source)
{
    return source.To<T>();
} 
```

请注意，这仅在原始`IQueryable<T>`（例如`personType1`）的类型参数是*引用类型*时才有效。否则，您将收到编译器错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:36:06.077

`Where`定义为

`public static IEnumerable<TSource> Where<TSource>( this IEnumerable<TSource> source, Func<TSource, bool> predicate )`

正如您所看到的，它仅使用一个通用参数，这就是为什么当您提供一个时它“有效”的原因。您的方法是用两个参数定义的。

# javascript - 单击时加载图像数组并加载下一个图像

> ID：14774824
> 
> 赞同：0
> 
> 时间：2013-02-08T14:32:38.813
> 
> 标签：javascript, jquery, slider

我正在尝试使用 x 图像构建一个渐进式滑块。意思是，在页面加载时，无论数组包含多少图像，滑块都会在滑块容器中加载 3 个图像。

单击下一个/上一个应该将前 3 个图像滑动到任一侧，然后加载下 3 个（如果有）。

它应该将下一个索引号发送到下一个函数并在点击时增加/减少。

这有道理吗？:) 这是我制作的快速模型...欢迎任何想法 :O)

谢谢！！！

```
var aImages = new Array("image1.jpg","image2.jpg","image3.jpg");
var slideImage = 1;

function showImages()
{
    var startImage = (slideImage -1)*6+1;
    var endImage = (startImage +5);

    for(i=startImage ; i <= endImage ; i++)
    {
        $('imageId'+ i).src = aImages[i];
        slideImage ++;
    }

}

function slideImages()
{        
    var startImage = (slideImage -1)*6+1;
    var endImage = (startImage +5);

    for(i=startImage ; i <= endImage ; i++)
    {
        $('imageId'+ i).src = aImages[i];
    }
}   

slideImages(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:40:03.963

为了获得最佳体验，您至少应该预加载前 3 张和后 3 张图片

你也可以做类似的事情

```
var imageList = [];
for(...)
{

    var img = new Image();
    img.src = '';
    imageList.push(img);

} 
```

将它们保存在缓存中

并使用 9 个图像占位符（中央 3 个，每侧 3 个），然后只需应用

```
imgNode.src = imageList[x].src 
```

# android - sqlite 语句中的工厂参数

> ID：14774826
> 
> 赞同：0
> 
> 时间：2013-02-08T14:32:45.293
> 
> 标签：android, sqlite

这个论点是什么意思`factory`是这个陈述

```
public SQLiteDatabase openOrCreateDatabase(String name, int mode, CursorFactory factory) 
```

什么时候使用这个论点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:36:23.383

```
public SQLiteDatabase openOrCreateDatabase(String name, int mode, CursorFactory factory)

SQLiteDatabase.CursorFactory 
```

用于在调用查询时允许返回 Cursor 的子类。

[关联](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.CursorFactory.html)

# c# - 在 C# 中创建一个 datagridview 表单

> ID：14774829
> 
> 赞同：1
> 
> 时间：2013-02-08T14:32:59.667
> 
> 标签：c#, winforms, datagridview

我是 C# 和 Windows 窗体应用程序的新手。现在，我想在我的表单中创建一个 Datagridview，我想用业务对象的属性填充其行。我遵循了这个 msdn 页面中的示例：[如何：将对象绑定到 Windows 窗体 DataGridView 控件](http://msdn.microsoft.com/en-us/library/y0wfd4yz.aspx)并创建了我自己的程序，但我没有得到与 msdn 示例中类似的结果，而是得到了一个包含三个空行的 datagridview。我究竟做错了什么？这是我的程序：

```
using System;
using System.Windows.Forms;

public class Form3 : Form
{
    private DataGridView dataGridView1 = new DataGridView();
    private BindingSource bindingSource1 = new BindingSource();

    public Form3()
    {            
        this.Load += new System.EventHandler(EnumsAndComboBox_Load);
    }

    private void EnumsAndComboBox_Load(object sender, System.EventArgs e)
    {
        // Populate the data source.           
        bindingSource1.Add(new Test("bli", "bla", "blop", "ha", "ho", "he"));
        bindingSource1.Add(new Test("bli", "bla", "blop", "ha", "ho", "he"));

        // Initialize the DataGridView.
        dataGridView1.AutoGenerateColumns = false;
        dataGridView1.AutoSize = true;
        dataGridView1.DataSource = bindingSource1;

        // Initialize and add a text box column.
        DataGridViewColumn column = new DataGridViewTextBoxColumn();
        column.DataPropertyName = "Name1";
        column.Name = "Name1";
        dataGridView1.Columns.Add(column);

        // Initialize and add a check box column.
        column = new DataGridViewTextBoxColumn();
        column.DataPropertyName = "Name2";
        column.Name = "Name2";
        dataGridView1.Columns.Add(column);

        column = new DataGridViewTextBoxColumn();
        column.DataPropertyName = "Name3";
        column.Name = "Name3";
        dataGridView1.Columns.Add(column);

        column = new DataGridViewTextBoxColumn();
        column.DataPropertyName = "Name4";
        column.Name = "Name4";
        dataGridView1.Columns.Add(column);

        column = new DataGridViewTextBoxColumn();
        column.DataPropertyName = "Name5";
        column.Name = "Name5";
        dataGridView1.Columns.Add(column);

        column = new DataGridViewTextBoxColumn();
        column.DataPropertyName = "Name6";
        column.Name = "Name6";
        dataGridView1.Columns.Add(column);

        // Initialize the form.
        this.Controls.Add(dataGridView1);
        this.AutoSize = true;
        this.Text = "DataGridView object binding demo";
    }

    #region "test object"
    private class Test
    {
        private string test1;
        private string test2;
        private string test3;
        private string test4;
        private string test5;
        private string test6;

        public Test(string s1, string s2, string s3, string s4, string s5, string s6)
        {
            test1 = s1;
            test2 = s2;
            test3 = s3;
            test4 = s4;
            test5 = s5;
            test6 = s6;
        }

        public Test()
        {
            test1 = "bla";
            test2 = "bla";
            test3 = "bla";
            test4 = "bla";
            test5 = "bla";
            test6 = "bla";
        }

        public string Test1
        {
            get
            {
                return test1;
            }
            set
            {
                test1 = value;
            }
        }

        public string Test2
        {
            get
            {
                return test2;
            }
            set
            {
                test2 = value;
            }
        }

        public string Test3
        {
            get
            {
                return test3;
            }
            set
            {
                test3 = value;
            }
        }

        public string Test4
        {
            get
            {
                return test4;
            }
            set
            {
                test4 = value;
            }
        }

        public string Test5
        {
            get
            {
                return test5;
            }
            set
            {
                test5 = value;
            }
        }

        public string Test6
        {
            get
            {
                return test6;
            }
            set
            {
                test6 = value;
            }
        }
    }

    #endregion

    static class Program
    {
        [STAThread]
        public static void Main()
        {
            Application.Run(new Form3());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:39:01.797

您正在将列绑定到`Name`从 1 到 6 调用的属性，但在您的对象中没有这样的属性。更改`Name`为`Test`。IE

由此：

```
column = new DataGridViewTextBoxColumn();
column.DataPropertyName = "Name6";
column.Name = "Name6";
dataGridView1.Columns.Add(column); 
```

对此：

```
column = new DataGridViewTextBoxColumn();
column.DataPropertyName = "Test6";
column.Name = "Name6";
dataGridView1.Columns.Add(column); 
```

也正如@noobob 所建议的那样，移动你的

```
dataGridView1.DataSource = bindingSource1; 
```

到方法结束

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:41:35.607

每列的“DataPropertyName”属性必须与正在评估的数据对象的属性名称匹配。因此，如果您只进行这样的微小更改：

```
column.DataPropertyName = "Test1"; 
```

一切都应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:44:27.477

`column.DataPropertyName`应该设置为您在数据源类中指定的属性名称。尝试这个 ：

```
 column = new DataGridViewTextBoxColumn();
    column.DataPropertyName = "Test1";
    column.Name = "Test1";
    dataGridView1.Columns.Add(column);

    column = new DataGridViewTextBoxColumn();
    column.DataPropertyName = "Test2";
    column.Name = "Test2";
    dataGridView1.Columns.Add(column);

    column = new DataGridViewTextBoxColumn();
    column.DataPropertyName = "Test3";
    column.Name = "Test3";
    dataGridView1.Columns.Add(column); 
```

# jquery - Microsoft JScript 运行时错误：对象不支持“live”属性或方法？

> ID：14774836
> 
> 赞同：8
> 
> 时间：2013-02-08T14:33:13.843
> 
> 标签：jquery, asp.net-mvc-3

我单击按钮时显示以下错误**“Microsoft JScript 运行时错误：对象不支持属性或方法'live'”** **我的视图页面如下：**

```
@model Charis.Models.Products
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="../../Content/CharisSite.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
@using (Html.BeginForm("Create", "Prod", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true)
    <table><tr><td>
    <table>
    <tr>
    <td>
     <fieldset>
             <legend>Products</legend>

     <table>
        <tr>
        <td>
            <div class="editor-label">
            @Html.LabelFor(model => model.Productname)
            </div>
        </td>
        <td>
             <div class="editor-field">
            @Html.EditorFor(model => model.Productname)
            @Html.ValidationMessageFor(model => model.Productname)
            </div>
        </td>
        </tr>
        <tr>
        <td>
            <div class="editor-label">
                @Html.LabelFor(model => model.ProductPrice)
            </div>
        </td>
        <td>
            <div class="editor-field">
            @Html.EditorFor(model => model.ProductPrice)
            @Html.ValidationMessageFor(model => model.ProductPrice)
            </div>
        </td>
        </tr>
        <tr>
        <td>
            <div class="editor-label">
            @Html.LabelFor(model => model.ProductDiscount)
            </div>
        </td>
        <td>
            <div class="editor-field">
            @Html.EditorFor(model => model.ProductDiscount)
            @Html.ValidationMessageFor(model => model.ProductDiscount)
            </div>
        </td>
        </tr>

        <tr>
        <td>
            <div class="editor-label">
                @Html.LabelFor(model => model.LanguageType)
            </div>
        </td>
        <td>
             <div class="editor-field">
            @Html.EditorFor(model => model.LanguageType)
            @Html.ValidationMessageFor(model => model.LanguageType)
            </div>
        </td>
        </tr>

        <tr>
        <td>
             <div class="editor-label">
                @Html.LabelFor(model => model.ReleaseDate)
            </div>
        </td>
        <td>
                <div class="editor-field">
                         @Html.EditorFor(model => model.ReleaseDate)
                         @Html.ValidationMessageFor(model => model.ReleaseDate)
                </div>
        </td>
        </tr>
        <tr>
        <td>
             <div class="editor-label">

               <label for="file">Upload Image:</label>
            </div>
        </td>
        <td>
                <div class="editor-field">
                    <input type="file" name="file" id="file"/>
               </div>
        </td>
        </tr>

     </table> 

    </fieldset>
    </td>
    <td></td></tr>
    </table>

    </td></tr>
    <tr><td>

    <table>
    <tr>
    <td>
        <fieldset>
        <legend>Details</legend>
            <table>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(model => model.AlbumDescription1)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.EditorFor(model => model.AlbumDescription1)
                            @Html.ValidationMessageFor(model => model.AlbumDescription1)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(model => model.AlbumDescription2)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.EditorFor(model => model.AlbumDescription2)
                            @Html.ValidationMessageFor(model => model.AlbumDescription2)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(model => model.Cast)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.EditorFor(model => model.Cast)
                            @Html.ValidationMessageFor(model => model.Cast)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(model => model.DirectedBy)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.EditorFor(model => model.DirectedBy)
                            @Html.ValidationMessageFor(model => model.DirectedBy)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(model => model.ProducedBy)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.EditorFor(model => model.ProducedBy)
                            @Html.ValidationMessageFor(model => model.ProducedBy)
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="editor-label">
                           <label for="file">Upload Image1:</label>
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            <input type="file" name="file1" id="file1"/>
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="editor-label">
                           <label for="file">Upload Image2:</label>
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            <input type="file" name="file2" id="file2"/>
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="editor-label">
                           <label for="file">Upload Image3:</label>
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            <input type="file" name="file3" id="file3"/>
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="editor-label">
                           <label for="file">Upload Image4:</label>
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            <input type="file" name="file4" id="file4"/>
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="editor-label">
                           <label for="file">Upload Image5:</label>
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            <input type="file" name="file5" id="file5"/>
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(model => model.NoOfDisk)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.EditorFor(model => model.NoOfDisk)
                            @Html.ValidationMessageFor(model => model.NoOfDisk)
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(model => model.Weight)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.EditorFor(model => model.Weight)
                            @Html.ValidationMessageFor(model => model.Weight)
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(model => model.Format)
                        </div>
                    </td>
                    <td>
                        <div class="editor-field">
                            @Html.EditorFor(model => model.Format)
                            @Html.ValidationMessageFor(model => model.Format)
                        </div>
                    </td>
                </tr>

            </table>
        </fieldset>
    </td>
    </tr>
    </table>

    </td></tr>

    <tr><td>
        <table><tr><td><fieldset><table>
            <tr>
                <td>
                <p>
                    <input type="submit" value="Create" />
                    <input type="button" value="Clear" id="btnClear" />
                </p>
                </td>
            </tr>
        </table></fieldset></td></tr></table>

    </td></tr>

    </table>

}

@*<div>
    @Html.ActionLink("Back to List", "Index")
</div>
*@
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

@if (TempData["notice"] != null) 
{
<p style="color:Red;" >@TempData["notice"]</p>
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-08T14:39:33.050

您正在使用 jquery latest (1.9...)，其中`$(sel).live(...)`已被弃用，因此您的错误消息。

1) 恢复到旧版本的 jquery。

2）更新你的代码（用on替换live）。

3）放回jquery-latest。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T18:25:47.407

您还可以考虑包含 jQuery Migrate 以帮助升级到 jQuery 1.9

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T20:38:18.307

我自己更新到 jQuery 1.9 后才遇到这个问题。但是，我注意到之前没有任何用户（除了 AliRıza Adıyahşi 在没有解释的链接中）指出您的代码的哪一部分导致了错误。毕竟，如果 `$(sel).live(...)`被弃用，`$(sel).on(...)`那么它是一个非常简单的修复，对吧？

问题是这个错误被抛出内部`jquery.unobtrusive-ajax.js`，您将其作为捆绑包的一部分包含在`@Scripts.Render("~/bundles/jqueryval")`

由于您没有使用 Ajax 表单或取消，因此该错误不太可能影响任何事情（它对我没有影响），但我无法从 Microsoft 找到任何修复程序。不幸的是，修复是进入并修复您的 jquery.unobtrusive-ajax.js 版本，替换对 .on() 的 .live 调用，直到 MS 修复官方版本。

# iis-7 - DNN 网站问题

> ID：14774840
> 
> 赞同：2
> 
> 时间：2013-02-08T14:33:44.627
> 
> 标签：iis-7, dotnetnuke, asp.net-4.5

我们遵循了 dot net nuke 站点中安装指南中给出的每个步骤`DotNetNuke_Community_07.00.02`。我们在虚拟机上有数据库服务器，我们使用**SQL 服务器身份验证**。

1）当我们单击主页中的编辑页面时，它会重定向到主页并且没有任何反应。2）当我们检查 chrome 控制台时，它显示

> [发布 http://dnndev.me/DesktopModules/internalservices/API/controlbar/ToggleUserMode](http://dnndev.me/DesktopModules/internalservices/API/controlbar/ToggleUserMode) 401 （未经授权）

请任何人都可以告诉我我出了什么问题？先感谢您。

**编辑**

克里斯，我们安装了更多，我们将其删除并完全按照您上面给出的设置，但没有运气。也尝试重新安装 aspnet_regiis -i 但仍然没有运气。

可以肯定的是，身份验证是问题所在。请注意，该机器是 Windows 7 机器并且在域中。

我们还仔细检查了应用程序池使用应用程序池标识而不是 LOCALSERVICE 等。我们在另一台机器上使用 SQL Server，此时它使用 sa 帐户，这绝对是强大的。

请参阅以下来自 Failed Trace 的摘录。我还转储了警告之前的跟踪。

```
ModuleName ManagedPipelineHandler 
Notification 128 
HttpStatus 401 
HttpReason Unauthorized 
HttpSubStatus 0 
ErrorCode 0 
ConfigExceptionInfo  
Notification EXECUTE_REQUEST_HANDLER 
ErrorCode The operation completed successfully. (0x0) 
35\.  AspNetPipelineEnter Data1="DotNetNuke.HttpModules.Services.ServicesModule" 10:14:06.910 
36\.  AspNetPipelineLeave Data1="DotNetNuke.HttpModules.Services.ServicesModule" 10:14:06.910 
37\.  NOTIFY_MODULE_END ModuleName="Services", Notification="BEGIN_REQUEST", fIsPostNotificationEvent="false", NotificationStatus="NOTIFICATION_CONTINUE" 10:14:06.910 
38\.  NOTIFY_MODULE_START ModuleName="IsapiFilterModule", Notification="AUTHENTICATE_REQUEST", fIsPostNotification="false" 10:14:06.910 
39\.  NOTIFY_MODULE_END ModuleName="IsapiFilterModule",Notification="AUTHENTICATE_REQUEST",fIsPostNotificationEvent="false", NotificationStatus="NOTIFICATION_CONTINUE" 10:14:06.910
40\.  NOTIFY_MODULE_START ModuleName="BasicAuthenticationModule",Notification="AUTHENTICATE_REQUEST",fIsPostNotification="false" 10:14:06.910 i AUTH_START AuthTypeSupported="Basic" 10:14:06.910
 1\. i AUTH_END  10:14:06.910 
 2\.  NOTIFY_MODULE_END ModuleName="BasicAuthenticationModule", 
Notification="AUTHENTICATE_REQUEST", fIsPostNotificationEvent="false", NotificationStatus="NOTIFICATION_CONTINUE" 10:14:06.910
 3\.  NOTIFY_MODULE_START ModuleName="WindowsAuthenticationModule", Notification="AUTHENTICATE_REQUEST", fIsPostNotification="false" 10:14:06.910
 4\. i AUTH_START AuthTypeSupported="NT" 10:14:06.910
 5\. i AUTH_END  10:14:06.910
 6\.  NOTIFY_MODULE_END ModuleName="WindowsAuthenticationModule", Notification="AUTHENTICATE_REQUEST", fIsPostNotificationEvent="false", NotificationStatus="NOTIFICATION_CONTINUE" 10:14:06.910
 7\.  NOTIFY_MODULE_START ModuleName="AnonymousAuthenticationModule", Notification="AUTHENTICATE_REQUEST", fIsPostNotification="false" 10:14:06.910
 8\. i AUTH_START AuthTypeSupported="Anonymous" 10:14:06.910
 9\. i AUTH_REQUEST_AUTH_TYPE RequestAuthType="Anonymous" 10:14:06.910
 10\. i AUTH_SUCCEEDED AuthType="NT", NTLMUsed="false", RemoteUserName="", AuthUserName="", TokenImpersonationLevel="ImpersonationImpersonate" 10:14:06.910
11\. i USER_SET AuthType="", UserName="", SupportsIsInRole="true" 10:14:06.910
12\. i AUTH_END  10:14:06.910
13\.  NOTIFY_MODULE_END ModuleName="AnonymousAuthenticationModule", Notification="AUTHENTICATE_REQUEST", fIsPostNotificationEvent="false", NotificationStatus="NOTIFICATION_CONTINUE" 10:14:06.910 
14\.  NOTIFY_MODULE_START ModuleName="IsapiFilterModule", Notification="AUTHENTICATE_REQUEST", fIsPostNotification="true" 10:14:06.910 
15\. i FILTER_AUTH_COMPLETE_START  10:14:06.910 
16\. i FILTER_AUTH_COMPLETE_END  10:14:06.910 
17\.  NOTIFY_MODULE_END ModuleName="IsapiFilterModule", Notification="AUTHENTICATE_REQUEST", fIsPostNotificationEvent="true", NotificationStatus="NOTIFICATION_CONTINUE" 10:14:06.910 
18\. i FILE_CACHE_ACCESS_START FileName="D:\DNN\DesktopModules\internalservices\API\controlbar\ToggleUserMode", UserName="IUSR", DomainName="NT AUTHORITY" 10:14:06.910
19\. i FILE_CACHE_ACCESS_END Successful="false", FileFromCache="false", FileAddedToCache="false", FileDirmoned="true", LastModCheckErrorIgnored="true", ErrorCode="The system cannot find the path specified.
(0x80070003)", LastModifiedTime="" 10:14:06.910 
20\.  NOTIFY_MODULE_START ModuleName="HttpCacheModule", Notification="RESOLVE_REQUEST_CACHE", fIsPostNotification="false" 10:14:06.910 
21\. i OUTPUT_CACHE_LOOKUP_START  10:14:06.910
22\. i OUTPUT_CACHE_LOOKUP_END Result="NOT_FOUND" 10:14:06.910
23\.  NOTIFY_MODULE_END ModuleName="HttpCacheModule", Notification="RESOLVE_REQUEST_CACHE", fIsPostNotificationEvent="false", NotificationStatus="NOTIFICATION_CONTINUE" 10:14:06.910
24\.  NOTIFY_MODULE_START ModuleName="UrlRoutingModule-4.0", Notification="RESOLVE_REQUEST_CACHE", fIsPostNotification="true" 10:14:06.910
25\.  AspNetPipelineEnter Data1="System.Web.Routing.UrlRoutingModule" 10:14:06.910
26\.  AspNetPipelineLeave Data1="System.Web.Routing.UrlRoutingModule" 10:14:06.910
27\.  NOTIFY_MODULE_END ModuleName="UrlRoutingModule-4.0", Notification="RESOLVE_REQUEST_CACHE", fIsPostNotificationEvent="true", NotificationStatus="NOTIFICATION_CONTINUE" 10:14:06.910
28\.  NOTIFY_MODULE_START ModuleName="StaticCompressionModule", Notification="MAP_REQUEST_HANDLER", fIsPostNotification="false" 10:14:06.910
29\.  NOTIFY_MODULE_END ModuleName="StaticCompressionModule", Notification="MAP_REQUEST_HANDLER", fIsPostNotificationEvent="false", NotificationStatus="NOTIFICATION_CONTINUE" 10:14:06.910
30\.  NOTIFY_MODULE_START ModuleName="ManagedPipelineHandler", Notification="MAP_REQUEST_HANDLER", fIsPostNotification="false" 10:14:06.910
31\.  AspNetMapHandlerEnter  10:14:06.910
32\. i HANDLER_CHANGED OldHandlerName="StaticFile", NewHandlerName="System.Web.Http.WebHost.HttpControllerHandler", NewHandlerModules="ManagedPipelineHandler", NewHandlerScriptProcessor="", NewHandlerType="System.Web.Http.WebHost.HttpControllerHandler, System.Web.Http.WebHost, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" 10:14:06.910
33\.  AspNetMapHandlerLeave  10:14:06.910
34\.  NOTIFY_MODULE_END ModuleName="ManagedPipelineHandler", Notification="MAP_REQUEST_HANDLER", fIsPostNotificationEvent="false", NotificationStatus="NOTIFICATION_CONTINUE" 10:14:06.910 
35\.  NOTIFY_MODULE_START ModuleName="ManagedPipelineHandler", Notification="EXECUTE_REQUEST_HANDLER", fIsPostNotification="false" 10:14:06.910 
36\.  AspNetPipelineEnter Data1="System.Web.ImplicitAsyncPreloadModule" 10:14:06.910 
37\.  AspNetPipelineLeave Data1="System.Web.ImplicitAsyncPreloadModule" 10:14:06.910
38\. i AspNetHttpHandlerEnter  10:14:06.910
39\. i AspNetHttpHandlerLeave  10:14:07.363
40\. r MODULE_SET_RESPONSE_ERROR_STATUS
Warning ModuleName="ManagedPipelineHandler", Notification="EXECUTE_REQUEST_HANDLER", HttpStatus="401", HttpReason="Unauthorized", HttpSubStatus="0", ErrorCode="The operation completed successfully.
(0x0)", ConfigExceptionInfo="" 10:14:07.363
41\. i OUTPUT_CACHE_DISABLED  10:14:07.363
42\.  NOTIFY_MODULE_COMPLETION ModuleName="ManagedPipelineHandler", Notification="EXECUTE_REQUEST_HANDLER", fIsPostNotificationEvent="false", CompletionBytes="0", ErrorCode="The operation completed successfully.
(0x0)" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-27T02:40:08.163

我今晚刚刚遇到了类似的问题，但`DNN 7.2.1`我`401`没有得到一个`404``/DesktopModules/internalservices/API/controlbar/ToggleUserMode.`

我记得我刚刚使用最新版本的`NewtonSoft.Json.dll`. 在我将该文件恢复为随附的原始文件后，`DNN 7.2.1`我又开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T09:59:25.347

如果保留后问题仍未解决

`<modules runAllManagedModulesForAllRequests="true" />`

**在web.config**中添加标签，然后检查Dotnetnuke 的**bin**文件夹中是否存在**Newtonsoft.Json.dll 。**

 **试试这个，它有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T16:28:22.497

我最近看到这个错误被报告了一点，但我不确定是什么原因造成的。在我看来，也许您的 ASP.NET 设置对于 IIS 是关闭的。您能否尝试从命令行执行 aspnet_regiis -i 并查看是否可以解决问题？您可能还需要检查 IIS 的 Windows 配置，确保启用了所有正确的选项。我截取了 Windows 中的 IIS 安装选项的屏幕截图，看看是否对您有帮助。

![IIS 设置](../Images/ce4154dfe5132bf1284d5f2e36a63ff2.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T21:00:11.750

您可以更新您的 web.config 并使用以下属性修改模块标签。

```
<modules runAllManagedModulesForAllRequests="true" /> 
```

它对我有用。希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T17:37:02.480

这是 7.x 中相当常见的问题，不幸的是，有一些可能的原因，其中一些仍未完全理解。请浏览此线程并尝试建议的修复程序。

[http://www.dotnetnuke.com/Resources/Forums/forumid/190/threadid/469106/scope/posts/threadpage/2.aspx](http://www.dotnetnuke.com/Resources/Forums/forumid/190/threadid/469106/scope/posts/threadpage/2.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-03T19:04:49.843

[有同样的问题，从这里](http://www.dotnetnuke.com/Resources/Wiki/Page/Problems-with-edit-mode.aspx)尝试了所有解决方案。

从`Controlbar`为我`Ribbonbar` **工作**。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-08T11:44:45.130

转到主机设置，从 Controlbar 更改为 Ribbonbar 对我有用。**

# api - Lucene 4.1 如何索引方面？

> ID：14774841
> 
> 赞同：1
> 
> 时间：2013-02-08T14:33:49.790
> 
> 标签：api, lucene, facet

我尝试建立一个包含一些方面的索引，我正在遵循用户指南。

但是，我遇到了一个问题；用户指南中的下一行给出了错误。

`DocumentBuilder categoryDocBuilder = new CategoryDocumentBuilder(taxo);`

the`DocumentBuilder`和 the`CatergoryDocumentBuilder`都不存在于`lucene-facet`..

我在 Jira-issues 中找不到 API 更改。有没有人有这个工作并愿意分享它应该如何完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:38:53.473

我使用基准代码作为灵感来解决这个问题。

## 索引

```
Directory dir      = FSDirectory.open( new File("index" ));
Directory dir_taxo = FSDirectory.open( new File("index-taxo" ));
IndexWriter writer = newIndexWriter(dir);
TaxonomyWriter taxo = new DirectoryTaxonomyWriter(dir_taxo, OpenMode.CREATE);
FacetFields ff= new FacetFields(taxo);

//for all documents:
d=new Document();
List<CategoryPath>=new ArrayList<CategoryPath>();    

for (all fields in doc)
{
    d.addField( ....)
}
for (all categories in doc)
{ 
    CategoryPath cp = new CategoryPath(field, value);
    categories.add( cp);
    taxo.addCategory(cp); //not sure if necessary
}

ff.addFields(d, categories);
w.addDocument( d ); 
```

## 搜索：

```
Directory dir = FSDirectory.open( new File("index" ));
Directory dir_taxo = FSDirectory.open( new File("index-taxo" ));

final DirectoryReader indexReader = DirectoryReader.open(dir);
IndexSearcher searcher = new IndexSearcher(indexReader);
TaxonomyReader taxo = new DirectoryTaxonomyReader(dir_taxo);

Query q = new TermQuery(new Term(...));
TopScoreDocCollector tdc = TopScoreDocCollector.create(1, true);
FacetSearchParams facetSearchParams = new FacetSearchParams(new CountFacetRequest(new CategoryPath("mycategory"),10));
FacetsCollector facetsCollector = new FacetsCollector(facetSearchParams, indexReader, taxo);
long ts= System.currentTimeMillis();
searcher.search(q, MultiCollector.wrap(tdc, facetsCollector));
List<FacetResult> res = facetsCollector.getFacetResults();  
long te= System.currentTimeMillis();
for (FacetResult fr:res)
{
    for ( FacetResultNode sr : fr.getFacetResultNode().getSubResults())
        {
           System.out.println(String.format( "%s :  %f", sr.getLabel(), sr.getValue()));
        }
    }
    System.out.println(String.format("Search took: %d millis", (te-ts)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:09:50.377

我不熟悉仅 Lucene 4.1 版本 2.9。

但是，当我在结果中创建构面时，我通常使用 Lucene.Net.Search.SimpleFacetedSearch.dll，在我的项目示例代码下方。

沃特

```
 Dictionary<String, long> facetedResults = new Dictionary<String, long>();

        try
        {
            SimpleFacetedSearch.MAX_FACETS = int.MaxValue;
            SimpleFacetedSearch sfs = new SimpleFacetedSearch(indexReader, field);
            SimpleFacetedSearch.Hits facetedHits = sfs.Search(query);
            long totalHits = facetedHits.TotalHitCount;

            for (int ihitsPerFacet = 0; ihitsPerFacet < facetedHits.HitsPerFacet.Count(); ihitsPerFacet++)
            {
                long hitCountPerGroup = facetedHits.HitsPerFacet[ihitsPerFacet].HitCount;
                SimpleFacetedSearch.FacetName facetName = facetedHits.HitsPerFacet[ihitsPerFacet].Name;

                if (hitCountPerGroup > 0)
                    facetedResults.Add(facetName.ToString(), hitCountPerGroup);
            }
        }
        catch (Exception ex)
        {
            facetedResults.Add(ex.Message, -1);
        } 
```

# jquery - jquery移动多页MVC 4

> ID：14774846
> 
> 赞同：3
> 
> 时间：2013-02-08T14:34:00.567
> 
> 标签：jquery, asp.net-mvc, jquery-mobile, razor

我只是想用 jquery mobile 做一个简单的多页，但是缓存的东西（我认为）把它搞砸了。

**这是我的布局：_MobileSwipe.Mobile.cshtml**

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width">
    <meta charset="utf-8" />
    <title>@ViewBag.Title </title>
    @Html.MetaAcceptLanguage()
    <script src="@Url.Content("~/Scripts/kendo/2012.3.1121/jquery.min.js")"></script>
    @Scripts.Render("~/bundles/jquerymobile")
    @Styles.Render("~/Content/Mobile/css")
    @Styles.Render("~/Content/jquerymobile/css")
</head>
<body>
    @RenderBody()
</body>
</html>

<script>
    $(document).ready(function () {
        $.ajaxSetup({ cache: false });

    });
</script> 
```

**这是我的观点：**

```
 @model List<ExtremeOnline.Models.BookingDays>

@{
    ViewBag.Title = "Välj din tid";
    Layout = "~/Views/Shared/_MobileSwipe.Mobile.cshtml";
}

<div data-role="page" id="1" class="ui-page">
    page 1
</div>
<div data-role="page" id="2" class="ui-page">
    page 2
</div>

 <script>
        $('div.ui-page').live("swipeleft", function () {
            var nextpage = $(this).next('div[data-role="page"]');
            // swipe using id of next page if exists
            if (nextpage.length > 0) {
                $.mobile.changePage(nextpage, 'slide');
            }
        });
        $('div.ui-page').live("swiperight", function () {
            var prevpage = $(this).prev('div[data-role="page"]');
            // swipe using id of next page if exists
            if (prevpage.length > 0) {
                $.mobile.changePage(prevpage, 'slide', true);
            }
        });

    </script> 
```

**这是表格**

```
 @using (Html.BeginForm("SearchMobile", "Boka", FormMethod.Post))
            {
                <input class="searchbutton" id="searchBtn" data-ajax="false" type="submit" data-theme="b" value="Sök bokning" />
            }

        </div> 
```

问题是当我运行它时，我发送帖子的页面布局被缓存并显示在源代码中。

为什么布局被缓存？该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-07T05:33:12.100

JQuery mobile 依赖于多个页面布局的页面事件。而不是使用 $(document).ready()。使用此处列出的页面事件：http: [//api.jquerymobile.com/category/events/](http://api.jquerymobile.com/category/events/)

然后，您可以在移动初始化事件中禁用 ajax 导航

```
$(document).on(“mobileinit”, function() { 
    $.mobile.ajaxEnabled = false; 
}); 
```

您还需要将 data-ajax="false" 属性移动到表单而不是输入按钮。

```
@using (Html.BeginForm("SearchMobile", "Boka", FormMethod.Post, new {data_ajax="false"}))
{
    <input class="searchbutton" id="searchBtn" type="submit" data-theme="b" value="Sök bokning" />
} 
```

# matlab - 在数组中查找 n 个最小值

> ID：14774860
> 
> 赞同：6
> 
> 时间：2013-02-08T14:34:50.883
> 
> 标签：matlab, minimum, minima

我正在使用 Matlab 2012a。

我有一组 k 个单元格（比如 1000 个）。我需要找到这个数组的 5 个最低值，并且需要对 X 和 Y 中的这些值进行平均。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T15:03:40.373

假设您有数组 X 和 Y，并且您想要找到五个最低的 Y 值：

```
[m mi] = sort(Y);
lowest5index = mi(1:5);
lowest5Y = Y(lowest5index);
lowest5X = X(lowest5index);

meanYlowest5 = mean(lowest5Y);
meanXlowest5 = mean(lowest5X); 
```

解释：

`sort`带有两个输出参数的命令返回排序后的数组 (in `m`) 和原始数组 ( `mi`) 中的索引。前五个指数`mi(1:5)`对应于五个最低值。为 X 和 Y取`mean`这些值将做我们想要的。如果我不理解您的问题陈述，请澄清您的问题，我将再试一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:03:54.540

如何`sort`从最低值到最高值做一个数组，然后选择 5 个第一个值。这些将是您数组的 5 分钟值。然后执行这 5 个值的平均值。

这可能不是最节省内存的方法，但只需 1000 个值就可以完成工作！

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-11T10:54:08.077

使用[`minmaxselection`](http://www.mathworks.ch/matlabcentral/fileexchange/23576-min-max-selection)MATLAB MEX 包，该包已针对此问题进行了专门优化：

```
a = [2,3,4,7,56,4,21, 64, -2];
mink(a, 2)

<< ans = 
<<    -2  2    

mink(a,4)

<< ans =
<<    -2     2     3     4 
```

# jquery - ValidateInput(False) 在使用 window.location.href 调用 mvc 并给出动作危险请求时不起作用

> ID：14774863
> 
> 赞同：0
> 
> 时间：2013-02-08T14:34:54.677
> 
> 标签：jquery, asp.net-mvc

我正在使用 asp.net mvc 4 (vb)，我被困在最后一部分以真正完成我的搜索功能。ValidateInput(False) 参数适用于每个调用，除非我通过 javascript 使用调用。我得到的错误如下：从客户端（<）检测到潜在危险的 Request.Path 值。当我尝试搜索类似 html 的内容时，我得到了这个。

我将列出我正在使用的代码：

MVC 视图：

```
<input type="text" id="searchtextMVC" name="query" onkeydown="EnterKeyDownForWhoIsWho(event);" data-url="@Url.Content("~/Controller/")"/> 
```

javascript:

```
window.location.href = $('#searchtextMVC').attr('data-url') + 'Index/' + document.getElementById('searchtextMVC').value; 
```

这两个修复了它，所以我得到了带参数的正确 url。

我的动作是这样开始的：

```
<ValidateInput(False)> _
        Public Function Index() As ActionResult
             Code stuff, eventually using CStr(RouteData.Values("fullName")) 
```

现在的问题是 ValidateInput 对每个调用都有效，除了通过 javascript 调用的调用。我还在 web.config 中添加了 requestValidationMode="2.0"，但这并没有帮助。我需要为我的函数提供参数 fullName 才能工作。

我花了太多时间在互联网上搜索没有答案，所以我希望我们可以一起解决这个问题。

编辑：我忘了提到我还在 web.config 中尝试了 requestPathInvalidCharacters="" ，这使得我总是遇到非法字符错误。

编辑2：

我在 javascript 中尝试了 url-encoding，但没有帮助。这是我尝试过的：

```
searchValue = $('#searchtextMVC').attr('data-url') + 'Index/' + encodeURIComponent(document.getElementById('searchtextMVC').value); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T18:39:14.037

**问题：**

将 ValidateInput 设置为 false 将允许 Request.Form 中的“潜在危险请求”。

但是，您构建 URL 的方式是获取输入的值并将其添加为 URL 的一部分。将 ValidateInput 设置为 false 不会阻止“检测到潜在危险的 Request.Path 值”。

**可能的解决方案：**

您可能需要考虑对输入的值进行 URL 编码并将其传递到查询字符串中。

# javascript - 在 Sencha Touch 2 中的 itemswipe 上显示复选框？

> ID：14774864
> 
> 赞同：1
> 
> 时间：2013-02-08T14:35:04.807
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2

我正在创建一个 Sencha Touch 应用程序，并希望在我的列表项上编写滑动功能。

它应该像这样工作： 1\. 当用户向右滑动列表项时，列表项应该跟随。2.“在”列表项下应该有一个用户可以选中/取消选中的复选框。

到目前为止，我的听众是：

```
itemswipe: function (list, idx, target, record, evt) {
    alert(record.data.name);
} 
```

这工作正常，但我需要一些关于上述几点的帮助。如何将实际列表项向右滑动并显示复选框？

谢谢！

**编辑** 请查看[清除应用程序](http://www.realmacsoftware.com/clear/)以查看我正在寻找的动画:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:08:21.533

只是一个想法，但由于您可以访问列表和索引，您可以轻松地向节点添加一个类，然后使用 CSS 对其进行样式设置：

```
list.getItemAt(idx).addCls('swiped'); 
```

然后在你的 app.css 中有类似的东西：

```
.swiped .x-innerhtml { margin-left: 30px; }
.itemContent { z-index: 20; /* above checkbox below */ }
.theCheckbox {
  position: absolute;
  left: 0;
  /* other styles to position the checkbox "under" the list item */
  z-index: 10;
} 
```

只是一个想法......让我知道这是否适合你。

# sharepoint - 共享点开发和视觉工作室快递

> ID：14774869
> 
> 赞同：2
> 
> 时间：2013-02-08T14:35:25.267
> 
> 标签：sharepoint, visual-studio-2012, express

我最近开始了实习，在此期间，我将使用 sharepoint 在公司的 Intranet 上工作。我仍在等待确切的细节，所以我计划让自己对 Sharepoint 有所了解。我知道他们想要的一些东西，所以我要抢先一步。我决定在 MSDN 上进行一些演练，但我注意到 Visual Studio 2012 express 缺少共享点项目的选项。

所以我的问题是，有没有办法获得这个选项，或者 Visual Studio Express 是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:58:26.533

Visual Studio Express 没有，但您所在的公司至少应该拥有 Visual Studio 2010（也许是 2013 年）。这两个版本都对共享点友好。

# excel - 如何将单元格范围存储到变量中？

> ID：14774873
> 
> 赞同：0
> 
> 时间：2013-02-08T14:35:33.623
> 
> 标签：excel, excel-formula, excel-2010, worksheet-function, vba

因此，我想对单元格范围进行“更好”的引用，以便不必在整个方法中复制/粘贴它，但以下代码不起作用：

```
Dim cellRange As Range
' fieldIndex = 1, startRow = 10, lastRow = 20
cellRange = s.Range(Cells(startRow, fieldIndex), Cells(lastRow, fieldIndex)) 
```

我错过了什么？我可以以其他方式使用它：

```
s.Range(Cells(startRow, fieldIndex), Cells(lastRow, fieldIndex)).Value = "bob" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:40:41.107

您需要`Set`用于范围之类的对象：

```
Dim cellRange As Range
' fieldIndex = 1, startRow = 10, lastRow = 20
Set cellRange = s.Range(Cells(startRow, fieldIndex), Cells(lastRow, fieldIndex)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T14:45:16.057

正如 Sid 所建议的，您可能还需要澄清 Cells 部分，例如这样。

```
With s
   Dim cellRange As Range
   ' fieldIndex = 1, startRow = 10, lastRow = 20
   Set cellRange = .Range(.Cells(startRow, fieldIndex), .Cells(lastRow, fieldIndex))
End with 
```

# jquery - 在新窗口中执行 href 和 Open URL

> ID：14774880
> 
> 赞同：0
> 
> 时间：2013-02-08T14:35:43.637
> 
> 标签：jquery, asp.net

我在 asp.net 中有回发方法，之后我想打开新的空白页。

我正在显示来自客户端的一些消息并明确单击 href 但该 href 没有触发。

```
<a href="../tools/pagename.aspx" target="_blank" id="aProcess"></a>

function DownloadData()
{
   $("#aProcess").click();
} 
```

我想在新页面中执行 href。我不想使用的 window.open()。我想打开新窗口。使用 window.open() 因为它有时可能会被浏览器阻止。因此，我想明确地触发一个 href 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:56:59.280

为了用 jquery 打开一个新的浏览器窗口，你可以使用 window.open() 方法：

```
window.open(URL,name,specs,replace) 
```

`URL:`选修的。指定要打开的页面的 URL。如果未指定 URL，则会打开一个带有 about:blank 的新窗口。

`name:`可选。指定目标属性或窗口的名称。

`specs:`选修的。以逗号分隔的项目列表。

`replace:`可选。指定 URL 是创建新条目还是替换历史列表中的当前条目 ( `true||false`)。

打开您的页面：

```
$("a#aProcess").click(function(){
    window.open('http://localhost:port/...','_blank');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:38:06.450

更改当前页面网址：

```
function DownloadData()
{
   window.location = 'new url';
} 
```

打开新页面：

```
window.open(url); 
```

如果浏览器设置允许，这是您唯一可以做的事情。

幸运的是！

如果它有所不同，我认为如果不打开大量弹出窗口就不可能上网

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:40:02.657

如果您希望在当前窗口中打开 url，请使用此选项

```
document.location.href = 'http://url.com'; 
```

如果您希望在新窗口中打开网址而不使用`window.open()`. 您可以使用

```
window.showModalDialog("http://url.com",window); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:50:59.330

```
 $("a#aProcess").click(function(e) {
        e.preventDefault();
        window.open($(this).attr('href'), '_blank');
    }); 
```

# javascript - 让 onMouseOver 和 onClick 工作的问题

> ID：14774881
> 
> 赞同：0
> 
> 时间：2013-02-08T14:35:44.050
> 
> 标签：javascript, html, onclick, onmouseover, onmouseout

我对`onClick`and`onMouseOver`有疑问，我正在尝试使用纯 JavaScript 来解决。

我有 2 张图像，当光标`image1`在`image2`出现时，它`image2`有一个用`onClick()`.

我使用一个函数来更改 id 以显示/隐藏图像（使用 CSS）

```
function show()
{
    document.getElementById('ferramenta1').id='ferramenta100';
}

function hide()
{
    document.getElementById('ferramenta100').id='ferramenta1';  
} 
```

```
<!-- image 1 -->

<img src="imagens/favNulo.png" onMouseOver="show()" onMouseOut="hide()" id="favorito1" title="Favorito n°1" style="cursor:pointer;"/>

<!-- image 2 -->
<img src="imagens/ferramentaFavoritos.png" onClick="editarTelaFav()"  onMouseOver="show()"  id="ferramenta1" title="Editar favorito n°1" style="cursor:pointer"/> 
```

图像已正确更改，但`onClick`不起作用。

我在 StackOverflow 中发现了一些与此类似的帖子，但没有 jQuery 都无法解决。

**编辑：** onclick 代码

```
function editarTelaFav() {
   var fer1 = document.getElementById("ferramenta1").id;

   if (window.event.srcElement.id == fer1) {
     window.open('favoritoNumero1.jsp','','left=50%,top=50%,height=600,width=800');
   }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:09:39.387

您可以使用 css 中的悬停来更改图像，这样您最终会得到一个 JavaScript 命令，这可能会有所帮助。在你的 CSS

```
#hoverchange  a {
width:64px;
height:64px;
background-image: url(imagens/favNulo.png);
display:block;
}

#hoverchange  a:hover {
background-image: url(imagens/ferramentaFavoritos.png);
} 
```

宽度和高度应该是您的图像宽度和高度。

在你的 html 中

```
<div id="hoverchange">
<a href="#!" onClick="editarTelaFav()"></a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:02:53.197

这一点逻辑永远不会返回 1

```
if(window.event.srcElement.id == fer1){ code=1; } 
```

因为每次你展示它时，你都会将 id 更改为 'ferramenta100'

```
document.getElementById('ferramenta1').id='ferramenta100'; 
```

tbh 我不明白该`if`语句的含义，删除它，它会正常工作，所以：

```
function editarTelaFav(){ 

window.open('favoritoNumero1.jsp','','left=50%,top=50%,height=600,width=800'); 
} 
```

# javascript - Chrome中奇怪的文档正文右填充问题

> ID：14774889
> 
> 赞同：5
> 
> 时间：2013-02-08T14:36:19.213
> 
> 标签：javascript, jquery, google-chrome

由于某种原因，在页面加载后尝试使用 JavaScript 更改 padding-right 值时，文档正文右填充无法正确更新。看看这个演示这个问题的小提琴。

**HTML**

`<html><body><div></div></body></html>`

**JavaScript**

```
// Workaround #1: changing right padding without timeout
//$(document.body).css('padding-right', '100px');
setTimeout(function () {
    // This doesn't work properly (at least for me) in Chrome on Ubuntu 12.04
    $(document.body).css('padding-right', '100px');
    // Write info in body that function was executed
    $(document.body).append('timeout function executed');
    // Workaround #2: write content into div
    //$('div').append('timeout function executed');
    // Workaround #3: set document body display to none and back to block via zero ms timeout
    /*$(document.body).css('display', 'none');
    setTimeout(function () {
        $(document.body).css('display', 'block');
    }, 0);*/
}, 1000); 
```

[http://jsfiddle.net/gyqEK/2/](http://jsfiddle.net/gyqEK/2/)

有一些变通方法我能够使右填充的更改有效

*   调整浏览器窗口大小
*   将文档正文显示切换为无，并通过零毫秒超时功能返回阻止
*   将一些 HTML 内容写入 div（在小提琴示例中）

我尚未在 Windows Chrome 上对此进行测试，但在 Ubuntu 12.04 Chrome 版本 24 上我能够重现此问题。在 Firefox 上不会出现此问题。其他人面临同样的问题，有人可以确认这是否也发生在其他操作系统和/或 Chrome 版本上？

* * *

**更新**

我更新了一个新的小提琴，它现在更接近我想要实现的原始想法。当“某事”完成时（在这种情况下单击 div），我希望文档正文右填充以或多或少的平滑动画变化。这在 Firefox 中完美运行，但无法在最新的 Chrome 中运行。

```
$('div').click(function () {
    var jqBody = $(document.body);
    if (jqBody.css('padding-right') !== '200px') {
        jqBody.animate({
            'padding-right': '200px'
        }, 500);
    } else {
        jqBody.animate({
            'padding-right': '0'
        }, 500);
    }
}); 
```

[http://jsfiddle.net/gyqEK/5/](http://jsfiddle.net/gyqEK/5/)

更改文档正文右填充是否有意义是另一个问题。我的目标是将所有页面内容从右边缘移动 200 像素，以便为绝对定位的侧边栏 div 元素保留一些空间。我通过将页面内容包装到 div 元素中来实现这一点，而不是 body padding-right 我现在正在更改包装器 div 元素的右边距。这种方法在 Chrome 中也可以顺利运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:45:36.017

它以某种方式连接到页面加载过程。除非您知道页面已完全加载，否则您不能真正希望成功运行 JQuery。您需要确保所有 Jquery 在初始“就绪”事件之后运行。

如果你用这个替换你的代码：

```
$(document).ready(function(){
    setTimeout(function () {
        $(document.body).css('padding-right', '100px');
        // Write info in body that function was executed
        $(document.body).append('timeout function executed');
       },1000);
}); 
```

...它在 Chrome 以及其他浏览器中完全按照预期工作（在 Ubuntu 12.04 上测试了 Firefox 和 Chrome）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:56:06.843

两年前有人偶然发现了同样的错误，这个解决方案对我有用。

[https://stackoverflow.com/a/3485654/1532332](https://stackoverflow.com/a/3485654/1532332)

我无法相信为什么 Chrome 没有解决这个问题。无论如何，这是一个更新的小提琴，其中填充动画也适用于 Chrome。代码可能更干净，但我懒得整理：）

```
$('div').click(function () {
    var jqBody = $(document.body);
    if (jqBody.css('padding-right') !== '200px') {
        jqBody.animate({
            'padding-right': '200px'
        }, {
            duration: 500,
            step: function () {
                this.style.display = 'none';
                this.offsetHeight;
                this.style.display = 'block';
            }
        });
    } else {
        jqBody.animate({
            'padding-right': '0'
        }, {
            duration: 500,
            step: function () {
                this.style.display = 'none';
                this.offsetHeight;
                this.style.display = 'block';
            }
        });
    }
}); 
```

[http://jsfiddle.net/gyqEK/6/](http://jsfiddle.net/gyqEK/6/)

这里肯定有一个缺点。在每个动画步骤中，元素的显示切换为无，读取 offsetHeight 并将显示切换回块。这也会导致诸如 Firefox 之类的浏览器的开销，这些浏览器在动画主体填充方面没有任何问题。另外，我不确定这样的东西是否可以用于非块元素，但在我的情况下我不需要担心。

# tidesdk - 如何构建 TideSDK Developer 应用程序？

> ID：14774890
> 
> 赞同：1
> 
> 时间：2013-02-08T14:36:20.710
> 
> 标签：tidesdk, ubuntu-12.10

`Ubuntu 12.10`

我正在尝试构建 TideSDK 开发人员应用程序（不是 SDK 本身，它应该在哪里。开发人员应用程序是单独安装的，以避免任何混淆）。

首先，我将 TideSDK 文件安装到`~/.tidesdk`（这是文档在 Linux 上执行的操作）。

然后，我下载了 TideSDK-Developer，解压缩并查看了它的`README.md`文件，上面说我必须执行以下操作来构建和运行应用程序：

```
python "path-to-TideSDK-sdk/tidebuilder.py" TideSDK-Developer -r -i 'dist,package' 
```

所以，我输入这个：

```
python "~/.tidesdk/sdk/linux/1.3.1-beta/tidebuilder.py" TideSDK-Developer -r -i 'dist,package' 
```

但在我按 Enter 之前，我只是仔细检查以确保`tidebuilder.py`. `cd`进入`~/.tidesdk`并使用了几次后`ls`，我发现那其实是正确的位置。所以我按`enter`。

这是我这样做后得到的：

```
python: can't open file '~/.tidesdk/sdk/linux/1.3.1-beta/tidebuilder.py': [Errno 2] No such file or directory 
```

但显然，有这样一个文件/目录。我事先检查过以确保自己。

我到底做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T06:39:05.793

只是为了排除这一点-您可以尝试将其扩展`~`到绝对路径。对于我正在处理的其他事情，我遇到了类似的事情，发现使用实际路径可以解决问题。

`~`指向你的主目录，所以它可能类似于`/home/synaptix/.tidesdk/sdk/linux/1.3.1-beta/tidebuilder.py`- 你明白了。

# ruby-on-rails - 是否有可以在一个线程中处理多个请求的 Ruby 服务器？

> ID：14774893
> 
> 赞同：-1
> 
> 时间：2013-02-08T14:36:29.213
> 
> 标签：ruby-on-rails, ruby, rack, thin

来自我们拥有 NIO（非阻塞 IO）的 Java 世界，例如，我无法找到能够与 Jetty 执行相同操作的 Ruby 服务器 - 用一个线程处理多个请求。这是应用程序透明的，并且使用多线程/多进程，服务器可以轻松处理数千个并发请求。

我只看到一些使用 EventMachine 的应用程序级“黑客”，使用延迟和其他方法来处理更多请求，但我认为可能有服务器为应用程序透明地这样做。Ruby 1.9 现在也有 Fibers，所以它也可以利用它。我只是不想重建我的应用程序以扩大规模。

有没有类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:55:58.277

独角兽呢？[http://unicorn.bogomips.org](http://unicorn.bogomips.org)是多进程，不是多线程

# php - 使用 ENGINE 子句在迁移中创建表失败

> ID：14774895
> 
> 赞同：1
> 
> 时间：2013-02-08T14:37:00.320
> 
> 标签：php, mysql, yii, migration

我正在尝试使用 Yii 进行迁移并在`up()`方法中创建新表。只要我不添加该`ENGINE=InnoDB`子句，它就可以正常工作。在那种情况下 - 它给了我一个错误`near ENGINE`。

```
public function up()
{
    $this->createTable('tbl_project', array(
        'id' => 'pk',
        'name' => 'string NOT NULL',
        'description' => 'text NOT NULL',
        'create_time' => 'datetime DEFAULT NULL',
        'create_user_id' => 'int(11) DEFAULT NULL',
        'update_time' => 'datetime DEFAULT NULL',
        'update_user_id' => 'int(11) DEFAULT NULL',
    ), 'ENGINE=InnoDB');
} 
```

我的 Yii 版本是 1.1.12。PHP 5.4.3，MySQL 5.5.24。

那是一些 Yii 错误吗？

编辑（yii 错误描述）：

```
*** applying m130208_133533_create_table_project
> create table tbl_project ...exception 'CDbException' with message 'CDbComm
and failed to execute the SQL statement: CDbCommand failed to prepare the SQL st
atement: SQLSTATE[HY000]: General error: 1 near "engine": syntax error. The SQL
statement executed was: CREATE TABLE 'tbl_project' (
    "id" integer PRIMARY KEY AUTOINCREMENT NOT NULL,
    "name" varchar(255) NOT NULL,
    "description" text NOT NULL,
    "create_time" datetime DEFAULT NULL,
    "create_user_id" int(11) DEFAULT NULL,
    "update_time" datetime DEFAULT NULL,
    "update_user_id" int(11) DEFAULT NULL
) engine = InnoDB' in C:\wamp\yii\framework\db\CDbCommand.php:357 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T18:40:11.130

我有同样的问题，通过检查console.php和main.php中的数据库配置是否相同来解决

```
i.e 'db'=>array(
        'connectionString' => 'mysql:host=localhost;dbname=databasename',
        'emulatePrepare' => true,
        'username' => 'root',
        'password' => 'ur password',
        'charset' => 'utf8',
    ), 
```

并注释两个文件中的 sqlite 行

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-08T20:20:53.733

使用“protected\yiic\migrate”，作为一个控制台命令，使用 protected\config\console.php，所以它的“db”组件应该被正确配置（因为已配置 protected\config\main.php）。如果您收到 InnoDB 错误，那么您可能仍然配置了 SQLite。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:11:07.487

尝试：

```
$this->createTable('tbl_project', array(
        'id' => 'pk',
        'name' => 'string NOT NULL',
        'description' => 'text NOT NULL',
        'create_time' => 'datetime DEFAULT NULL',
        'create_user_id' => 'int(11) DEFAULT NULL',
        'update_time' => 'datetime DEFAULT NULL',
        'update_user_id' => 'int(11) DEFAULT NULL',
    ), 
    'engine = InnoDB'
); 
```

如果它不起作用，那么向我们展示 MySql 错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-26T12:50:38.853

另一种方法是包含在 .env 文件中：

`DB_ENGINE=InnoDB`

# javascript - Zendesk Javascript 在 Sandbox 中有效，但在实际 Zendesk 中无效

> ID：14774896
> 
> 赞同：0
> 
> 时间：2013-02-08T14:37:00.037
> 
> 标签：javascript, sandbox, zendesk

我正在使用最新的 Zendesk 产品。为了测试一些 javascript 小部件，我使用了沙箱，它把我带到了老式 Zendesk。我将以下小部件放在一起，效果很好；

```
$j(document).ready(function() {            

   //Grabs the value from Time to Complete.
   var dec = $j('#ticket_fields_22215232').val();   

   //hm is an array where hm[0] is hours and hm[1] is mins.
   var hm = new Array();
   var hm =
   [
    (dec > 0) ? Math.floor(dec) : Math.ceil(dec),
    dec % 1
   ];

   //Stop user from being able to focus on field.
   $j('#ticket_fields_22251826').prop("disabled", true);

   //Converting the time to decimal.
   dec = hm[0]+Math.round(hm[1]*Math.pow(10,2))/60;

   //Places the new value into the hidden field. 
   jQuery('#ticket_fields_22251826').val(dec);

}) 
```

基本上，它从一个字段中获取值，对其进行操作，然后将其放置在另一个字段中。第二个字段被禁止编辑。

我无法在实际的 Zendesk 中进行任何操作。有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T23:04:05.793

在 Classic Zendesk 中创建的小部件只会影响最终用户体验。如果您希望将相同的功能转移到代理端，则需要创建与应用程序相同的体验。

[您可以通过导航到https://yoursandboxhere.zendesk.com/settings/new_zendesk](https://yoursandboxhere.zendesk.com/settings/new_zendesk)并单击切换来将您的沙盒更新到 New Zendesk 。

# sql - 添加 SQL 数据库错误

> ID：14774900
> 
> 赞同：-4
> 
> 时间：2013-02-08T14:37:26.810
> 
> 标签：sql, visual-studio-2010

当我将 Sql 服务器添加到我的项目时，会出现此错误，我不知道为什么。

![错误截图](../Images/03b57b6042f2ffd3b1e674ffd7fecc8c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:41:44.607

阅读这篇文章： [如何在 SQL Server 2008 中启用远程连接](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx) 也许它会帮助您解决问题。

# casting - TypeScript：将布尔值转换为字符串值

> ID：14774907
> 
> 赞同：109
> 
> 时间：2013-02-08T14:37:52.740
> 
> 标签：casting, type-conversion, typescript

我有一个非常简单的问题，我无法在 TypeScript 中将**简单的布尔值转换为字符串值**。

我一直在浏览文档，但找不到任何有用的东西。当然，我尝试使用该`toString()`方法，但它似乎没有在 bool 上实现。

* * *

编辑：我几乎没有 JavaScript 知识，并以 C#/Java 背景来到 TypeScript。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2013-02-08T16:34:26.563

这要么是 TypeScript 中的错误，要么是有意识的设计决定，但您可以使用以下方法解决它：

```
var myBool: bool = true;
var myString: string = String(myBool);
alert(myString); 
```

在 JavaScript 中，布尔值会覆盖该`toString`方法，该方法可用于任何方法`Object`（JavaScript 中几乎所有内容都继承自`Object`），所以...

```
var myString: string = myBool.toString(); 
```

...应该是有效的。

还有另一种解决方法，但我个人觉得它有点讨厌：

```
var myBool: bool = true;
var myString: string = <string><any> myBool;
alert(myString); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2018-08-09T22:58:32.193

对于那些寻找替代方案的人来说，另一种方法是使用如下[模板文字](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)：

```
const booleanVal = true;
const stringBoolean = `${booleanVal}`; 
```

如果您不确定自己获得的是布尔值，那么这方面的真正优势就来了。尽管在这个问题中我们知道它是一个布尔值，但情况并非总是如此，即使在 TypeScript 中（如果没有充分利用）。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-12-30T02:05:44.763

一种方法是使用三元运算符：

```
myString = myBool? "true":"false"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-20T10:28:49.333

如果您也必须处理空值，请执行以下操作：

```
stringVar = boolVar===null? "null" : (boolVar?"true":"false"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-01T13:46:02.330

```
return Boolean(b) ? 'true':'false' 
```

# ruby - Watir / Ruby HTML 实体

> ID：14774908
> 
> 赞同：1
> 
> 时间：2013-02-08T14:37:55.357
> 
> 标签：ruby, watir, watir-webdriver

我正在尝试匹配网站中的元描述，但无法获取过去的 HTML 实体。我试过转义字符和其他一些组合。如果您尝试匹配没有实体的文本区域，则没有问题。任何帮助表示赞赏。

```
require "rubygems"
require "watir-webdriver"

include Watir

b = Watir::Browser.new :chrome

b.goto('http://dev01-new.firestonecompleteautocare.com/cf/oil-change/motor-oil-and-your-car')

if b.metas.any?{ |s| s.html.include? "Ever wonder what color your engine oil should 
be, or what affect temperature may have on it&#63; Learn the answers to these 
frequently asked questions &#38; more, here." }
     puts 'Yes'
else
     puts 'No'
end

b.close 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:10:28.783

看起来 watir-webdriver 允许您根据其内容属性定位元。

所以你可以这样做：

```
b.meta(:content => 'Ever wonder what color your engine oil should be, or what affect temperature may have on it? Learn the answers to these frequently asked questions & more, here.').exists?
#=> true 
```

请注意，在这里您可以使用实际字符而不用担心 HTML 编码。

# java - 如何将 POJO 映射到多个 JSON 表示

> ID：14774909
> 
> 赞同：0
> 
> 时间：2013-02-08T14:37:56.167
> 
> 标签：java, json, jackson

如何将 POJO 映射到几个 JSON 表示？

我正在使用[杰克逊](https://github.com/FasterXML/jackson-core)。

我想要下面的代码

```
@JsonIgnorePropertiesStreamA({ "value2" })
@JsonIgnorePropertiesOtherWay({ "value3" })
public class Value {
  public int value;
  public int value2;
  public int value3;
} 
```

杰克逊如何做到这一点？或者还有哪些其他图书馆可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T14:55:29.680

您使用[JSON 视图](http://wiki.fasterxml.com/JacksonJsonViews)

```
class Views {
    static class PublicView { }
    static class StreamA extends PublicView { }
    static class OtherWay extends PublicView { }
}

public class Value {
    @JsonView(Views.PublicView.class) public int value;
    @JsonView(Views.OtherWay.class) public int value2;
    @JsonView(Views.StreamA.class) public int value3;
}

String json = new ObjectMapper()
              .writerWithView(Views.OtherWay.class)
              .writeValueAsString(valueInstance); 
```

请注意，这些是*包容性*而非排他性的；您创建一个包含所需字段的视图。

# python - python re.X vs 自动续行

> ID：14774913
> 
> 赞同：8
> 
> 时间：2013-02-08T14:38:06.593
> 
> 标签：python, regex, annotations, comments

Python 提供了一个标志 ([`re.X`或`re.VERBOSE`](http://docs.python.org/2/library/re.html#re.X)) 来允许对正则表达式进行注释：

```
a = re.compile(r"""\d +  # the integral part
                   \.    # the decimal point
                   \d *  # some fractional digits""", re.X) 
```

但是，通过自动字符串连接，您可以实现基本相同的目标：

```
a = re.compile(r'\d+' # integral part
               r'\.'  # decimal point
               r'\d*' # optional fractional digits
              ) 
```

我认为我没有真正看到使用后一种形式，但是（恕我直言）它使正则表达式更易于阅读（我不需要尝试找出哪些空白已被转义，以及什么空白正在忽略...等等），我的评论被我的文本编辑器格式化为评论。是否有理由更喜欢前者而不是后者或签证？或者这真的是番茄番茄问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T14:41:38.577

前者可以放在自己的文本文件中，然后加载而无需借助`literal_eval`. 对于复杂的 RE（或选择多个不同的 RE），这可能是一个好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T14:44:51.410

我会说这是番茄番茄酱。“x”正则表达式标志不是 python 独有的，并且在连接操作更冗长的语言中可能更有意义（想象`+`到处都会增加噪音）。

我还考虑了这样一个事实，即它强制您正确地指出哪个空格是表达式的一部分，因为它消除了任何歧义，并且很难错过依赖于空格的正则表达式中的怪癖。

最后一个论点是，您可以将确切的模式复制到具有相同标志的另一种语言中，并且它可以毫不费力地工作。在后一种情况下，我必须删除很多`r`s 和撇号。

* * *

顺便说一句，您总是可以与*选项*`re.X`连接。

# mule - 如何单独对 mule 流进行功能测试

> ID：14774916
> 
> 赞同：0
> 
> 时间：2013-02-08T14:38:16.913
> 
> 标签：mule, functional-testing

我的`Mule 3.3.0`应用程序中有几个流，其中一些是相互链接的（Web 服务端点正在侦听一个流，它进行一些处理并将有效负载路由到不同的 JMS 队列，入站 JMS 队列正在侦听不同的流）。

我有一个`functional-test`运行良好的 Web 服务端点流，但我想在隔离其他流的情况下测试这个流。是否可以禁用其他流的消息侦听器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:04:00.037

作为测试设置的一部分，您可以尝试以编程方式停止所有未参与测试的流。

# r - Windows 上的 yacas：无法启用端口 3794

> ID：14774917
> 
> 赞同：1
> 
> 时间：2013-02-08T14:38:26.023
> 
> 标签：r, port, yacas

我已阅读[R: Trouble making package Ryacas to work on Windows](https://stackoverflow.com/questions/8794614/r-trouble-making-package-ryacas-to-work-on-windows)中的信息 。我安装了 yacas 可执行文件，可以通过双击 yacas.exe 图标直接运行它。但是，如果我尝试获得任何帮助，例如“？？” 我收到错误消息“lynx 不被识别为内部/外部命令...”。如果我尝试从 cygwin bash 会话运行， `% ./yacas.exe`启动消息会回显到终端窗口，弹出窗口告诉我“无效句柄”，然后 yacas 退出。最后，在`R`,中`Ryacas("some_command")`失败并显示消息

```
"[1] "Starting Yacas!"
Error in socketConnection(host = "127.0.0.1", port = 9734, server = FALSE,  : 
  cannot open the connection
In addition: Warning message:
In socketConnection(host = "127.0.0.1", port = 9734, server = FALSE,  :
  127.0.0.1:9734 cannot be opened" 
```

我跟踪了一些有关在 Windows 7 中打开端口的说明，并尝试使用 ControlPanels 下的“Windows 防火墙”管理器添加入站和出站规则以启用端口 9734。据我所知，新规则已被接受，但 R 仍然返回该错误消息。
我是否正确设置了防火墙规则？我尝试指定连接类型“any”、“TCP”和“UDP”，此外还创建了针对 yacas.exe（而不是端口号）的规则。（公司管理员规则是否有可能在不向我报告此类冲突的情况下覆盖我的配置？我对 Win7 管理员的胆量知之甚少）

总结一下：我还能尝试什么让本地服务器/端口工作？我不知道这是否有助于识别问题，但 R 下的标准 HTML 帮助确实有效，例如打开一个网页，如`http://127.0.0.1:24932/library/base/html/Trig.html`

还有一件事，在 R 中，

```
yacasFile()
[1] "C:\\Program Files\\R\\R-2.15.2\\library\\Ryacas\\yacdir\\yacas.exe" 
```

因此，至少 R 正在寻找正确的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:41:36.290

这是从评论中转移的。[请参阅主页的Ryacas Windows 安装](https://code.google.com/p/ryacas/#Windows_Installation)部分中有关将 Ryacas 放入个人库而不是`C:\Program Files`树中的建议。

# c# - 为什么后台代理会加载冗余程序集？

> ID：14774919
> 
> 赞同：4
> 
> 时间：2013-02-08T14:38:29.440
> 
> 标签：c#, windows-phone-7, windows-phone-8, windows-phone

我正在为 Windows Phone 开发一个应用程序。此应用程序使用后台代理（计划任务）更新固定到开始屏幕的磁贴信息。

我有 4 个项目产生 4 个程序集：

*   MyApp - 带有 UI 逻辑的主项目
*   MyApp.Core - 应用程序的主要逻辑
*   MyApp.Core.Agent - 用于后台代理的精简版 MyApp.Core
*   MyApp.Agent - 后台代理

这是代理日志的一部分，其中包含代理加载的程序集列表：

```
Zlib, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null
MyApp.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
MyApp.Core.Agent, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
MyApp.Agent, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
MyApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
System.Runtime.Serialization, Version=3.7.0.0, Culture=neutral, PublicKeyToken=969DB8053D3322AC
Microsoft.Phone.Interop, Version=7.0.0.0, Culture=neutral, PublicKeyToken=24EEC0D8C86CDA1E
Microsoft.Phone, Version=7.0.0.0, Culture=neutral, PublicKeyToken=24EEC0D8C86CDA1E
System.Core, Version=3.7.0.0, Culture=neutral, PublicKeyToken=969DB8053D3322AC
System.Xml, Version=3.7.0.0, Culture=neutral, PublicKeyToken=969DB8053D3322AC
System.Net, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7CEC85D7BEA7798E
System, Version=3.7.0.0, Culture=neutral, PublicKeyToken=969DB8053D3322AC
System.Windows, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7CEC85D7BEA7798E
System.Windows.RuntimeHost, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7CEC85D7BEA7798E
mscorlib, Version=3.7.0.0, Culture=neutral, PublicKeyToken=969DB8053D3322AC 
```

MyApp.Agent 仅对 MyApp.Core.Agent 有引用，对其他项目没有引用。但正如您所见，MyApp 和 MyApp.Core 也会在后台代理启动时加载。为什么会这样？我无法理解。MyApp 和 MyApp.Core 程序集只会减少宝贵的内存空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T04:51:51.010

发生这种情况的主要原因是从后台代理启用绘图（本质上这个 dll 被加载，因为它具有支持可视树的所有正确组件）。这不一定是一个很好的原因，因为并非所有代理都在后台渲染，但对于那些不渲染的代理来说，影响非常小，因为框架在启动时只读取少量的 dll。

# javascript - Twitter Bootstrap：手风琴插件与 Modal 冲突

> ID：14774920
> 
> 赞同：5
> 
> 时间：2013-02-08T14:38:38.427
> 
> 标签：javascript, twitter-bootstrap, modal-dialog, accordion

在弹出模式中使用手风琴时遇到了一个问题（都是 Twitter Bootstrap 插件）。每当切换任何手风琴块时，Modal 都会关闭。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T14:38:38.427

Accordion collapse 会触发一个“隐藏”事件，这对于 Modal 插件也是如此。因此，有一种方法可以防止模态关闭：

```
$(document).on('click', 'a.accordion-toggle', function(e) {
    $(e.target).parent().siblings('.accordion-body').on('hidden', function(e) {
        e.stopPropagation();
    });
}); 
```

希望帽子能帮到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-30T22:00:48.777

@JuliaCesar您的回答对我不起作用，但它为我指出了一个解决方案：

```
$('.collapse').on('hidden', function(e){ 
  e.stopPropagation(); 
}); 
```

# jquery - gmaps和普通跨域ajax请求的区别

> ID：14774932
> 
> 赞同：0
> 
> 时间：2013-02-08T14:39:17.120
> 
> 标签：jquery, ajax, google-maps, cross-domain

为什么如果我使用 getJSON 方法对地址进行 ajax 调用：“ [http://maps.google.com/maps/api/geocode/json?address=EXAMPLE](http://maps.google.com/maps/api/geocode/json?address=EXAMPLE) ”我没有收到任何错误，但如果我调用外部域（不是谷歌），浏览器返回错误：违反跨域策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:50:44.297

Google 将“Access-Control-Allow-Origin”响应标头的值设置为“*”。这意味着允许从任何域访问。

```
Access-Control-Allow-Origin: * 
```

您发出类似请求的其他域可能没有这样做。或者他们可能正在限制访问：

```
Access-Control-Allow-Origin: http://foo.com 
```

# html - 在 jqmobile 网络应用程序中显示在线/离线状态的最佳方式

> ID：14774936
> 
> 赞同：0
> 
> 时间：2013-02-08T14:39:27.210
> 
> 标签：html, user-interface, jquery-mobile

我有一个内置在 jquery mobile 中的网络应用程序，它可以在线和离线模式下工作，具体取决于是否有连接。

我的问题纯粹是装饰性的：是否有一种既定的方式与用户交流当前正在使用哪种模式？例如。标题中的图标、配色方案等。

# sql - 将 CSV 导入 Magento 时出错

> ID：14774940
> 
> 赞同：-1
> 
> 时间：2013-02-08T14:39:30.733
> 
> 标签：sql, magento, csv, upload

我正在上传 CSV。前 200 个产品上传正常，但之后失败。我尝试删除 csv 中的前 210 个，然后再次上传，但只是不断显示此错误（删除了 dbname）。

```
SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`##databasename##`.`mg_catalog_product_entity_varchar`, CONSTRAINT `FK_mg_CAT_PRD_ENTT_VCHR_ENTT_ID_mg_CAT_PRD_ENTT_ENTT_ID` FOREIGN KEY (`entity_id`) REFERENCES `mg_catalog_product_entity` (`) 
```

有任何想法吗？

C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:51:31.643

啊哈，原来我的 UTF8 编码不起作用。现在排序。诀窍是在 Excel 中更改 Web 选项下的设置。

**从头开始 - 再次停止工作！很奇怪。**

现在收到消息：

```
SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`##dbname##`.`mg_catalog_product_entity_media_gallery`, CONSTRAINT `FK_mg_CAT_PRD_ENTT_MDA_GLR_ATTR_ID_mg_EAV_ATTR_ATTR_ID` FOREIGN KEY (`attribute_id`) REFERENCES `mg_eav_attribute` (`a) 
```

有什么想法吗？

# php - PHP_PEAR_INSTALL_DIR 设置不正确

> ID：14774944
> 
> 赞同：1
> 
> 时间：2013-02-08T14:39:43.463
> 
> 标签：php, windows, installation, pear

我无法安装梨它给出错误 PHP_PEAR_INSTALL_DIR 设置不正确。在那里找不到 pearcmd.php。请使用环境变量修复或修改默认值为pear.bat 当前值为：C:\wamp\bin\php\php5.3.0

**注意：之前我用 selenium 安装了 php pear，后来又卸载了它。**

在此先感谢 Swapnil

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-10T17:43:16.023

我有一个问题并解决了

`putenv('PHP_PEAR_INSTALL_DIR=/path/to/my/pear');`

在我包含在每个脚本中的包含文件之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:57:40.270

我遇到了类似的“PHP_PEAR_INSTALL_DIR 设置不正确”的问题。'。对我有用的修复是 - 1）检查了环境变量 PHP_PEAR_INSTALL_DIR 2）路径不正确，在我的情况下它有一个额外的反斜杠。删除它。这解决了问题。希望能帮助到你。

# php - 修改 PHP 日期输出

> ID：14774946
> 
> 赞同：0
> 
> 时间：2013-02-08T14:39:50.283
> 
> 标签：php, date, mktime

我正在生成当天和接下来的六个：

```
 <?php
     for($i=0; $i<=6; $i++){
         echo strtoupper(date("j",mktime(0, 0, 0, 0,date("d")+$i,0))."\n");
         echo "|";
     }  
 ?> 
```

这会产生这个（在我写这篇文章时的 2 月 8 日）：

```
8 |9 |10 |11 |12 |13 |14 | 
```

如何执行以下操作：

*   去掉每个数字后面的空格
*   摆脱尾随管道

我想要的输出是：

```
8|9|10|11|12|13|14 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:45:05.993

此任务非常适合`do..while`循环：

```
$i = 0;
do {
    echo strtoupper(date("j",mktime(0, 0, 0, 0,date("d")+$i,0)));
} while ($i++ < 6 && print "|"); 
```

该空间存在是因为您`\n`在输出中有。您的浏览器会将任何空格变成空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:05:13.753

只是为了`DateTime`上课的乐趣（PHP 5.3+）

```
<?php
$start = new DateTime();
$interval = new DateInterval('P1D');
$period = new DatePeriod($start,$interval,6);

$days = array();
foreach($period as $date) {
  $days[] = $date->format('d');
}

$daysString = implode('|',$days);

echo $daysString; 
```

是的...`DatePeriod`需要实现某种有用的交互器...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:42:31.017

您可以使用变量并将其附加到文本中，并在 for 循环之后输出字符串。

```
$output = '';
for($i=0; $i<=6; $i++){
    $output .= (date("j",mktime(0, 0, 0, 0,date("d")+$i,0))).'|';
}
$output = rtrim($output, '|');
echo $output; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:44:35.320

```
for($i=0; $i<=6; $i++){
$dates[] = date('j', strtotime('+ '.($i+1).' days');
}
echo implode('|', $dates); 
```

# ruby-on-rails - Ember.js / Rails 和关联：如何向 Rails 提交记录及其关联？

> ID：14774947
> 
> 赞同：9
> 
> 时间：2013-02-08T14:39:53.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ember.js, ember-data

假设您有两个关联的 Rails 模型：

```
class Foo < ActiveRecord::Base
  attr_accessible :name

  belongs_to :moo
end

class Moo < ActiveRecord::Base
  attr_accessible :name

  has_many :foos
  accepts_nested_attributes_for :foos
end 
```

感谢 ActiveModel::Serializer，很容易将现有的嵌套对象从 Rails 发送到 Ember.js。但是我找不到在 Ember 中创建此类嵌套对象并将它们发送回 Rails 以进行持久化的方法。我的理解是 Ember 需要发回类似的东西：

```
"moo"=> {
   "foos_attributes"=>{"0"=>{"name" => ...}},
   "name" => ...
} 
```

有没有“标准”的方式来做到这一点？我已经看到了一些关于这个主题的“老”问题，但没有真正的解决方案，而且由于 Ember 已经发生了很大的变化，我认为现在可能有一种简单的方法来做到这一点（不改变 Rest Adapter 本身）。

非常感谢，PJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:13:42.933

我刚刚修改了参数，然后将它们交给`create`或`update_attributes`这样的方法：

```
 line_items = params[:invoice].delete(:line_items) #Ember format
  params[:invoice][:line_items_attributes] = line_items 
```

# android - 从 Android 应用程序在 Facebook、Twitter 中共享图像和文本

> ID：14774955
> 
> 赞同：0
> 
> 时间：2013-02-08T14:40:31.183
> 
> 标签：android, facebook, image, share, twitter4j

我正在一个应用程序中工作，我可以将我的画廊图像分享到 facebook、twitter

我已经搜索了一些链接..每个人都提到了意图服务..但我不知道它将如何在我的应用程序中使用，如果有人帮助我提供完整的代码，我将非常感激

```
 Intent share = new Intent(Intent.ACTION_SEND);
            share.setType("image/jpeg");

            share.putExtra(Intent.EXTRA_STREAM,
              Uri.parse("file:///sdcard/DCIM/Camera/myPic.jpg"));

            startActivity(Intent.createChooser(share, "Share Image")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:30:49.357

试试这个代码：

```
 Button button = (Button)findViewById(R.id.facebookButton);

    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
                    String path = "path to the image";
                    Uri imageUri = Uri.parse(path);

                    Intent sharingIntent = new Intent(Intent.ACTION_SEND);
                    sharingIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    sharingIntent.putExtra(Intent.EXTRA_STREAM, imageUri);
                    sharingIntent.setType("image/png");

                     startActivity(Intent.createChooser(sharingIntent , "Send image using.."));

        }
    }); 
```

# javascript - 如何使用商店中的数据填充视图？

> ID：14774956
> 
> 赞同：0
> 
> 时间：2013-02-08T14:40:32.980
> 
> 标签：javascript, sencha-touch, sencha-touch-2

在 Sencha Touch 2 中，我在 Controller 中有这段代码。主要目的是使用商店中的数据填充视图。目前我使用`setRecord`没有成功。

您能否通过代码示例指出我正确的方向？谢谢

```
// Load data in the model after a user is successfully authenticated
    populateViewsAfterLogIn: function (){
        var me = this;
        var storeEvents2 =  Ext.getStore('Events2');
        storeEvents2.load();
        storeEvents2.sync();

        var myDashBoardView = me.getNavigViewTimetable();
        myDashBoardView.setRecord(storeEvents2);

    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:27:16.173

所以重申一下，我认为你想使用`setStore(...)`而不是`setRecord(...)`：

```
myDashBoardView.setStore(storeEvents2); 
```

然后在您的视图中，您可以使用以下方式访问商店：`this.getStore();`或以这种方式循环浏览商店记录：

```
this.getStore().each(function(item, index, length) {
  // do something with the record (item)
}); 
```

祝你好运，让我们知道它是否有效。

# c++ - C ++跳过代码行？

> ID：14774961
> 
> 赞同：7
> 
> 时间：2013-02-08T14:40:43.167
> 
> 标签：c++, gcc, g++, skip

### 背景

我正在用 C++ 编写一个多线程的 websocket 服务器。

### 问题

当我尝试集成我的 HTTP 解析器时，`MKFAHTTPRequest Request( std::string( Buffer ) );`在执行过程中被完全跳过。

我已经清理了项目并添加了 -Wall 和 -Werror （它应该告诉我这`Request`是一个未使用的变量，但它没有）。

```
void operator()(){
    while( true ){
        if( m_Socket->is_open() ){
            char Buffer[1024]; 

            boost::system::error_code Error; 

            std::cout << "MKFAConnection::operator()() - Reading..." << std::endl;
            m_Socket->read_some( boost::asio::buffer( Buffer, sizeof( Buffer ) ), Error ); 

            if( !Error ){
                // This line is getting skipped!?!?!?
                MKFAHttpRequest Request( std::string( Buffer ) );

                m_Socket->write_some( boost::asio::buffer( std::string( "Hello World" ) ) ); 

            } else break; 

        } else break; 

    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T14:46:19.373

> ```
> MKFAHttpRequest Request( std::string( Buffer ) ); 
> ```

这条线没有做你认为它做的事情。您认为它定义了一个名为`Request`type`MKFAHttpRequest`的对象，并使用 type 的临时对象初始化该对象`std::string`。

事实上，它声明了一个名为的函数`Request`，它接受一个类型的参数`std::string`并返回一个类型的对象`MKFAHttpRequest`。

这与最令人烦恼的解析有关（或者可能是其中的一个例子）。

也许其中之一会使它变得更好：

```
MKFAHttpRequest Request( (std::string( Buffer )) );
MKFAHttpRequest Request{ std::string( Buffer ) };
MKFAHttpRequest Request = std::string( Buffer );
MKFAHttpRequest Request = MKFAHttpRequest(std::string( Buffer )); 
```

参考：[http ://en.wikipedia.org/wiki/Most_vexing_parse](http://en.wikipedia.org/wiki/Most_vexing_parse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:47:14.433

这：

```
MKFAHttpRequest Request( std::string( Buffer ) ); 
```

是作为 C++ 中的函数声明。试试这个

```
std::string s( Buffer );
MKFAHttpRequest Request( s ); 
```

反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T17:41:59.297

就个人而言，我认为最好的解决方案是 C++11 的统一初始化语法：

```
MKFAHttpRequest Request{ std::string( Buffer ) }; 
```

但是，另一种方法是简单地使用 static_cast：

```
MKFAHttpRequest Request( static_cast<std::string>( Buffer ) }; 
```

static_cast 将为 std::string 找到匹配的构造函数调用，采用 char*。它还清楚地表明，您实际上是在从 char*“转换”到 std::string 以调用 MKFAHttpRequest 构造函数。

# javascript - 如何在数组 javascript 中使用 split() 和 setTimeout()

> ID：14774966
> 
> 赞同：3
> 
> 时间：2013-02-08T14:40:52.917
> 
> 标签：javascript, jquery, split, settimeout

这可能有点令人困惑：S

如果有人可以帮助我将字符串数组拆分为字母。而不是用超时录制它。就像在 DOS 中一样。

我可以用单个字符串做到这一点，但我不能在数组中做到这一点。

这是我的代码：

```
var text = new Array();
text[0] = "welcome ".split('');
text[1] = "how are u?".split('');
var delay = 20;
for (var j = 0; j < text.length; j++) {

    var txt = text[j];
    for (u = 0; u < txt.length; u++) {
        setTimeout(function () {
            $('div#console_div').append('<br />' + txt.shift());
        }, delay * j + 100);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:51:50.823

我就是这样做的。使用递归函数代替`for`循环，该函数使用不同的参数调用自身，具体取决于它在字符串上的位置：

```
var text = new Array();
text[0] = "welcome ".split('');
text[1] = "how are you?".split('');
var delay = 400;

function addOneChar(i, j) {
    $('#console_div').append('<br>' + text[i][j]);
    if (j+1<text[i].length) {  // next character in the current string
        setTimeout(function() { addOneChar(i, j+1); }, delay);
    } else if (i+1<text.length) {   // start the next string in the text[] array
        setTimeout(function() { addOneChar(i+1, 0); }, delay);
    } // else quit
}

setTimeout(function() { addOneChar(0,0); }); 
```

[http://jsfiddle.net/mblase75/tkEDN/](http://jsfiddle.net/mblase75/tkEDN/)

`text[]`我们可以通过组合成一个字符串并使用`.charAt()`提取字符来进一步简化这一点：

```
var text = new Array();
text[0] = "welcome ";
text[1] = "how are you?";
var delay = 400;
var textstr = text.join('');

function addOneChar(i) {
    $('#console_div').append('<br>' + textstr.charAt(i));
    if (i+1<textstr.length) {
        setTimeout(function() { addOneChar(i+1); }, delay);
    } // else quit
}

setTimeout(function() { addOneChar(0); }); 
```

[http://jsfiddle.net/mblase75/MYtjy/](http://jsfiddle.net/mblase75/MYtjy/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T14:53:49.597

您有典型的“循环关闭”问题。看看[循环内的 JavaScript 闭包——简单实用的例子](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)。在执行超时回调的那一刻，`txt`指的是`text[1]`. 尽管如此，所有超时仍会执行，因此您调用`txt.shift()`的频率比数组中的元素多。

另一个问题是，任何人都几乎察觉不到任何高达 100 毫秒的延迟，因此您看不到任何增量。更糟糕的是，对于第一个短语，所有超时都同时（几乎）执行，因为`j`is`0`并且`delay * j + 100`将导致`100`.

* * *

您最好逐个处理每个字母，而不是一次创建所有超时（请注意，[Blazemonger 的解决方案](https://stackoverflow.com/a/14775183/218196)是相同的，但更容易理解，因为它更干净）。

```
var text = [...];

function printLetter(phrase_index, letter_index) {
    var word = text[phrase_index];
    if (word) {
        if (letter_index === word.length) {
            printLetter(phrase_index + 1, 0);
        }
        else {
            var letter = word[letter_index];
            if (letter) {
                $('div#console_div').append('<br />' + letter);
                setTimeout(function() {
                    printLetter(phrase_index, letter_index + 1);
                }, 200);
            }
        }
    }
}

printLetter(0, 0); 
```

[**演示**](http://jsfiddle.net/ajsYL/)

# iphone - Iphone ABUnknownPersonViewController 使用allowAddingToAddressBook = YES 问题

> ID：14774967
> 
> 赞同：4
> 
> 时间：2013-02-08T14:40:58.453
> 
> 标签：iphone, ios, abaddressbook, abpersonviewcontroller

让我先解释一下我想做什么。在本机 Iphone 中的“最近”选项卡中，如果您单击任何通讯录中未找到的联系人，您可以选择**“添加到现有联系人”**

![Iphone 最近的项目](../Images/47ff1eaaa462790ddfedeb6a6d74fb35.png)

单击“添加到现有联系人”后，会出现一个选择器，您可以进行选择。之后它会`ABPersonViewController`自动将您带到一个并允许您编辑或保存新联系人：

![个人视图控制器](../Images/667931649ee4fde282a98f0e7388a818.png)

我正在尝试重新创建它，但遇到了一些问题。在我的版本中，在我创建 UnknownPersonViewController 并且最终用户按下“添加到现有联系人”之后，会出现一个选择器，并允许从类似于原生 Iphone 的地址簿中进行选择。但是在做出选择之后，姓名会自动添加到地址簿中，并且不会出现 personViewController 让用户选择是否添加联系人。即使我可以让它在选择后不自动写入地址簿，我也可以让它立即在编辑模式下显示一个 personviewcontroller。

所以我的问题是为什么它会在选择后自动更新地址簿？我将 ABUnknownpersonviewcontroller 推到 UITableviewController 导航控制器上。并在带有 iOS 6.01 的物理设备上进行测试这是一些代码：

```
 ABRecordRef person = ABPersonCreate ();
 ABMutableMultiValueRef multiValue = ABMultiValueCreateMutable(kABStringPropertyType);
    ABMultiValueAddValueAndLabel(multiValue, call.number,      kABPersonPhoneMainLabel, 
                                 NULL);
    ABRecordSetValue(person, kABPersonPhoneProperty, multiValue, error);
    if(multiValue) CFRelease(multiValue);

 ABUnknownPersonViewController *unknownCtrl = [[ABUnknownPersonViewController alloc] init];
unknownCtrl.displayedPerson = person; //this has a phone number with "main" label
unknownCtrl.allowsActions = YES;
unknownCtrl.allowsAddingToAddressBook = YES;
unknownCtrl.editing=NO;
unknownCtrl.unknownPersonViewDelegate = self;

    // unknownCtrl.addressBook=ABAddressBookCreate(); // I tried setting addressbook to nil and object
unknownCtrl.addressBook=nil;

[self setTitle:call.type forUIViewController:unknownCtrl];

[self.navigationController pushViewController:unknownCtrl animated:YES]; 
```

注意：我对这篇文章有类似的问题：[http ://forums.macrumors.com/archive/index.php/t-1023140.html](http://forums.macrumors.com/archive/index.php/t-1023140.html)

也许[https://discussions.apple.com/thread/1682620?start=0&tstart=0](https://discussions.apple.com/thread/1682620?start=0&tstart=0)

**更新：**似乎如果我把 kABPersonPhoneMainLabel 从那个人那里，然后它不会将电话号码写给联系人。之后我所做的是在 didResolveToPerson 委托中，我在编辑模式下调用了 personviewcontroller。这模拟了本机行为。这可能会回答我自己的问题，谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-05T23:48:20.110

`ABUnknownPersonViewController`没有公开很多自定义选项，您需要实现自己的版本。不过这并不难——“创建新联系人”按钮只是启动一个`ABNewPersonViewController`，而“添加到现有联系人”启动一个`ABPeoplePickerNavigationController`. 您的 ViewController 应该充当这些对象的代表，并控制它们完成后会发生什么。

# mysql - 获取的列数对 MySQL 查询速度有影响吗？

> ID：14774970
> 
> 赞同：1
> 
> 时间：2013-02-08T14:41:08.223
> 
> 标签：mysql

假设我有一个包含多列的表。选择所有列或仅选择列的子集（如下所示）之间是否存在速度差异？

```
SELECT * FROM Table WHERE colX = "value"
SELECT col1, col2, col3 FROM Table WHERE colX = "value" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:44:33.893

除非您需要所有列，否则不应选择所有列。相反，您应该通过简单地为所需的每一列输入 tablename.columname 来选择所需的那些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:44:00.867

从原始表中，实际查询本身将花费相同的时间。但是，返回的结果会有所不同。而且，对于这样一个简单的查询，这可能会占主导地位。

如果表包含非常大的列，那么记录将跨越多个页面（“溢出”页面），那么可能存在性能差异。我认为不会一次将所有溢出页面读入内存。因此，仅显式引用*不*包含大列的列子集可能会更快。在 MySQL 中如何处理这也可能取决于正在使用的文件系统。

但是，如果“表”真的是一个视图，那么它可能会产生很大的影响。此外，一些数据库支持计算/计算列。如果这些存在，那么这可能会对性能产生影响。

此外，一些数据库是面向“列”的，其中列实际上是单独存储的。在这样的数据库中，这些查询版本之间的性能可能存在很大差异。

# javascript - 如何通过每个模型中的数组属性对 Backbone.js 中的集合进行分组

> ID：14774971
> 
> 赞同：0
> 
> 时间：2013-02-08T14:41:13.553
> 
> 标签：javascript, backbone.js, collections, group-by, underscore.js

我有一个集合，其中每个模型都有一个包含名称数组的属性“名称”。我想按每个名字分组。每个模型都可以有很多名称。

我的代码

```
groupByName: function(){
 return this.collection.groupBy(function(item){
   for (var i=0; i<item.get('names').length; i++){
      return item.get('names')[i]['description']; //description: get name by id
   }
 });
}, 
```

问题在于，使用此代码， groupBy 仅按每个数组的名字分组，因为返回会破坏 for 循环。

任何的想法？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:59:32.510

假设`names`数组不包含重复的条目，可能类似于：

```
groupByName: function () {
  var grouped = {};
  this.collection.each(function (item) {
    var names = item.get('names');
    for (var i = 0; i < names.length; i++) {
      var description = names[i].description;
      var group = grouped[description] || (grouped[description] = []);
      group.push(item);
    }
  });
  return grouped;
} 
```

# powershell - 根据长度递归重命名文件夹

> ID：14774976
> 
> 赞同：2
> 
> 时间：2013-02-08T14:41:37.727
> 
> 标签：powershell

我在数千个目录中有数千个文件。其中一些路径失控并且比 Windows 可以处理的更长，因此当我尝试访问 PowerShell 中的文件时，我得到一个错误。如果这些路径中的文件夹包含一定长度的字符，如何重命名它们？（例如，一个文件夹 50 多个字符）

**编辑：**

不，它不是 Linux。

**错误：** 这是当我进行递归搜索以查找服务器上的所有文件时。

> Get-ChildItem ：指定的路径、文件名或两者都太长。完全限定的文件名必须少于 26 个 0 字符，目录名必须少于 248 个字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:08:01.807

用于[`subst`](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/subst.mspx)将父文件夹映射到驱动器号并从那里继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:53:48.247

在与另一个人一起编写代码后，我们能够想出一些可行的方法。实际上，我不得不缩短搜索长度，因为其中一些路径真的失控了。

```
takeown /f \\server\share\foo /r /d Y /a >c:\takeown.log

$folders= Get-ChildItem -Path "\\server\share\foo" -recurse | where {$_.PsIsContainer}
$sortedfolders = $folders | sort-object -descending -property fullname
foreach ($f in $folders) {
if ($f.name.length -gt 10) { 

   rename-item $f.fullname (get-random).tostring()
   } 
}

$aolesfolders | gm

$sorted | ft fullname
$aolesfolders | select-object name, root, fullname, parent | export-csv     c:\testrename.txt
get-random | gm
(get-random).ToString().gettype()

foreach ($f in $folders) {
if ($f.name.length -gt 10) { 

   rename-item $f.fullname (get-random).tostring()
   } 
} 

{rename-item $f.name $f.parent+} 
```

# sql - Postgresql 表相交

> ID：14774978
> 
> 赞同：0
> 
> 时间：2013-02-08T14:41:38.600
> 
> 标签：sql, database, postgresql

我的 postgresql 数据库中有两个表。两个表都有相同的列。

我如何更喜欢 tableA 中不为空的值？

```
TableA
id | name
1 | val_a_1
2 | val_a_2
3 | (null)

TableB
id | name
1 | (null)
2 | val_b_2
3 | val_b_3 
```

我想得到的结果：

```
id | name
1 | val_a_1
2 | val_a_2
3 | val_b_3 
```

现在我已经得到了它，但它更复杂，因为有很多列。

```
SELECT *
CASE
WHEN TableA.name is NULL or  TableA.name = ''  
THEN (SELECT TableB.name FROM TableB where  TableB.id = 1)
ELSE TableA.name 
END 
AS name,
CASE
.
. another columns
.
END 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:44:06.060

为什么不使用`COALESCE`？***假设 tableA 中的所有 recordID 都存在于 Table2***

```
SELECT  a.ID,
        COALESCE(a.name, b.name) AS "Name"
FROM    TableA a
        INNER JOIN TableB b
            ON a.ID = b.ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!1/f4f66/5)
*   [条件表达式](http://www.postgresql.org/docs/9.2/static/functions-conditional.html)

> COALESCE 函数返回其第一个不为空的参数（*可以有更多参数*）。

这完全是关于`COALESCE`，而不是 join 本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:46:59.377

您可以对 tableA 中存在但 tableB 中不存在的值使用完全外连接，反之亦然：

```
select coalesce(tableA.ID, tableB.ID) as ID,
 coalesce(tableA.Name, tableB.Name) as Name
from tableA full outer join tableB on tableA.ID = tableB.ID 
```

# android - 会话登录示例无法在手机浏览器中打开 facebook 登录页面

> ID：14774980
> 
> 赞同：1
> 
> 时间：2013-02-08T14:41:46.750
> 
> 标签：android, facebook, intellij-idea

我正在使用 Facebook android SDK 3.0（对它来说很新），并运行`SessionLoginSample`位于下载 SDK 示例目录中的示例。目标是测试会话登录示例是否可以在未安装 Facebook for Android 应用程序的情况下触发浏览器并将用户引导至 Facebook 登录页面。没有运气，`SessionLoginSample`部队关闭了。

但是，如果安装了 Android 版 Facebook 应用程序，用户可能会被引导到该应用程序的登录活动。输入帐户/密码然后返回`SessionLoginSample`没有任何问题。看起来**Session 对象不会触发浏览器并将用户引导到 Facebook 登录页面？**

**编辑：**附加日志

```
02-10 15:35:46.180: ERROR/AndroidRuntime(29604): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to resume activity {com.facebook.samples.sessionlogin/com.facebook.LoginActivity}: android.content.res.Resources$NotFoundException: String resource ID #0x7f050012
    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2455)
    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2483)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1997)
    at android.app.ActivityThread.access$600(ActivityThread.java:127)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4511)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x7f050012
    at android.content.res.Resources.getText(Resources.java:260)
    at android.content.res.Resources.getString(Resources.java:344)
    at android.content.Context.getString(Context.java:282)
    at com.facebook.widget.WebDialog.onCreate(WebDialog.java:188)
    at android.app.Dialog.dispatchOnCreate(Dialog.java:353)
    at android.app.Dialog.show(Dialog.java:257)
    at com.facebook.AuthorizationClient$WebViewAuthHandler.tryAuthorize(AuthorizationClient.java:461)
    at com.facebook.AuthorizationClient.tryCurrentHandler(AuthorizationClient.java:209)
    at com.facebook.AuthorizationClient.tryNextHandler(AuthorizationClient.java:188)
    at com.facebook.AuthorizationClient.authorize(AuthorizationClient.java:116)
    at com.facebook.AuthorizationClient.startOrContinueAuth(AuthorizationClient.java:97)
    at com.facebook.LoginActivity.onResume(LoginActivity.java:113)
    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1157)
    at android.app.Activity.performResume(Activity.java:4544)
    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2445)
    ... 12 more 
```

* * *

**解决原问题：** 刚刚发现`strings.xml`Facebook安卓SDK的res文件夹中values文件夹中的文件被修改了！将`WebDialog`字符串项复制回来后没有问题。很奇怪，我从不手动更改该文件。我`IntelliJ IDEA 12`用作 IDE 来构建和运行我的项目。可能是这个问题引起的`IntelliJ IDEA`？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:53:15.320

你有任何可以分享的调试日志吗？很可能有些东西没有正确构建，因为我在我的设备上没有安装 Facebook 应用程序的情况下运行了该应用程序。该应用程序显示一个触发登录对话框的 loginButton。

# php - 在 PHP 中从 SQL 添加日期（类型 Datetime + Time）

> ID：14774983
> 
> 赞同：1
> 
> 时间：2013-02-08T14:42:02.157
> 
> 标签：php, sql, date, datetime

我想在 php 应用程序中添加 MySQL 数据库中的 2 个值。一个存储为 Datetime 类型，另一个存储为 Time。

```
$datetime; // "2013-02-08 14:00:00"
$time; // "01:00:00" 
```

我想在 $datetime 上加 1 小时，这并没有给我正确的结果：

```
$newdatetime = strtotime($datetime) + strtotime($time);
echo date('Y-m-d H:i:s', $newdatetime); // "1920-02-11 08:31:44" 
```

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:44:25.223

```
$dt = new DateTime("2013-02-08 14:00:00");
$dt->modify('+1 hour');
echo $dt->format('Y-m-d H:i:s'); 
```

[看到它在行动](http://codepad.viper-7.com/sqN3LS)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T14:58:13.277

```
$datetime = DateTime::createFromFormat('Y-m-d H:i:s', $datetime);

// extract H, M, S
$time = sscanf($time, '%d:%d:%d');

// build date interval string
$time = vsprintf('PT%dH%dM%dS', $time);

// add it to your date
$datetime->add(new DateInterval($time));

print $datetime->format('Y-m-d H:i:s'); 
```

但如果`$time`总是一小时，John Conde 的解决方案将是一个更好的选择：P

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T16:11:09.427

嗯，我是这样处理的：

```
$datetime = "2013-02-08 14:00:00";
$time = "01:00:00"; //not always 1 hour, value from db
$t = explode(":",$time); // array(01,00,00)
$hour = mktime($t['0'],$t['1'],$t['2'],1,1,1970); // 3600
$newdatetime = strtotime($datetime) + $hour; 
echo date("Y-m-d H:i:s",$added); // "2013-02-08 15:00:00" 
```

不是最优雅的方式，但有效！正如我现在所看到的，它与 One Trick Pony 的解决方案相似，只是不客观。

# solr - Solr 使用文档年龄结合加权因子来提高分数？

> ID：14774984
> 
> 赞同：0
> 
> 时间：2013-02-08T14:42:07.510
> 
> 标签：solr

这有点奇怪，我不确定 solr 能不能做到。我收集了来自不同来源的文档，有些是时间敏感的，有些是常青的。我会撒谎，以便能够为用户提供包含两者的结果。现在，我正在支持[此处](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_boost_the_score_of_newer_documents)描述的较新文档的分数，但这意味着常青文档不会像我想要的那样出现。

我希望能够在 boost 中包含一个根据文档类别对其进行修改的因素。换句话说，时间敏感的文档会根据年龄获得一个提升值，而常青文档会获得不同的提升或根本没有提升。

有没有办法告诉 solr 不要将时间提升应用于某些文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:32:30.370

为什么不使用[index-time document-level boost](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_increase_the_score_for_specific_documents)索引常青文档？然后，如果它们完全匹配，它们将获得该提升与查询时间提升相结合。

您可以在更新格式（XML 或 JSON）、带有 $docBoost 的 DataImportHandler 或 RequestUpdateProcessor 中应用该提升，如果有特定类型来检查它是否是常青树。

# ruby - 为什么调用在方法中声明的返回 Proc 有效？

> ID：14774985
> 
> 赞同：4
> 
> 时间：2013-02-08T14:42:09.037
> 
> 标签：ruby

我一直在玩 Codecademy Ruby 课程，并且有一个关于 lambdas 和 Procs 的练习。我确实理解其中的区别，但我不太明白为什么这里列出的第一个代码有效，而第二个无效。

为什么会这样：

```
def batman_ironman_proc
  p = Proc.new { return "Batman will win!" }
  p.call
  "Iron Man will win!"
end

puts batman_ironman_proc  # prints "Batman will win!" 
```

但不是这个：

```
def batman_ironman_proc(p)
  p.call
  "Iron Man will win!"
end

p = Proc.new { return "Batman will win!" }
puts batman_ironman_proc(p)  # unexpected return 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:07:35.170

这是因为`proc`控制流关键字的行为方式：`return`, `raise`, `break`, `redo`,`retry`等等。

这些关键字将从`proc`定义的范围跳转，否则`lambda`有自己的范围，因此这些关键字将从`lambda's`范围跳转。

在您的第二个示例中，它`proc`是在 main 范围内定义的。并且`tadman`如下所述，您不能从 中返回`main`，只有`exit`可用。

如果您从 切换到 ，您的代码将`proc`起作用`lambda`。

# hibernate - hibernate.cfg.xml 没有被解析

> ID：14774986
> 
> 赞同：1
> 
> 时间：2013-02-08T14:42:17.177
> 
> 标签：hibernate, maven, tomcat

我正在使用休眠 4 和 Maven：

![在此处输入图像描述](../Images/6cb76c2754ce430ca0d9ea90aee9ab5e.png)

所以问题是当我启动服务器时，我看不到它解析 hibernate.cfg.xml 并且表没有在数据库中创建；

休眠.cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
 "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
 "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
 <session-factory>
    <property name="hibernate.bytecode.use_reflection_optimizer">false</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.password">password</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost/mvnodb</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password">admin</property>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="show_sql">true</property>
    <mapping class="tn.onp.mvno.model.Person" ></mapping>
    <mapping class="tn.onp.mvno.model.User" ></mapping>
    <mapping class="tn.onp.mvno.model.Call" ></mapping>
    <mapping class="tn.onp.mvno.model.User" ></mapping>
 </session-factory> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T22:53:52.287

根据我们的设置，Hibernate 通常是通过构建 SessionFactory 来启动的。除非您使用某种 Spring / JPA 集成，否则当您启动 tomcat 时，这不会自动发生。

您可以使用以下侦听器在部署和取消部署时初始化和关闭 Hibernate。

```
public class HibernateListener implements ServletContextListener {

    public void contextInitialized(ServletContextEvent event) {
        HibernateUtil.getSessionFactory(); // Just call the static initializer of that class    
    }

    public void contextDestroyed(ServletContextEvent event) {
        HibernateUtil.getSessionFactory().close(); // Free all resources
    }
} 
```

你需要在你的类路径中包含这个类，以及hibernate jars（+它的dependencies_和你的数据库驱动程序。

您还需要在 web.xml 中配置侦听器

```
<listener>
    <listener-class>org.mypackage.HibernateListener</listener-class>
</listener> 
```

如果您的 hibernate.cfg.xml 文件有问题，您应该在启动时看到它们。

# android - 在Android中保存同一个Activity的多个实例状态

> ID：14774987
> 
> 赞同：3
> 
> 时间：2013-02-08T14:42:24.213
> 
> 标签：android, android-activity

我正在开发一个 Android 应用程序，并且我想避免在使用相同的额外内容来自同一个 Activity 时重新加载类似的数据。

具体来说，当我启动我的 Activity 'A' 时，我使用这个 extra 从服务器加载远程数据。从这个活动中，我可以用不同的额外功能重新启动“A”等等。

例子 ：

A:id1 --> A:id2 --> A:id3

但是，它也可以是我已经加载的额外内容：

**A:id1** --> A:id2 --> A:id3 --> **A:id1**

在这种情况下，我不会再次请求服务器或丢失活动堆栈。

据我了解，“onSaveInstanceState”允许保存一个活动的一个实例，但就我而言，它是同一活动的多个实例（具有不同的附加功能）。

那么，它是管理同一 Activity 的已保存实例状态（捆绑）列表的解决方案吗？或者是其他东西 ？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:29:39.150

该`onSaveInstanceState`方法未按您描述的方式使用。 [看看这个，](http://developer.android.com/reference/android/app/Activity.html)它是 Activity 类的文档，特别是 Activity Lifecycle 部分。 `onSaveInstanceState`是当操作系统出于某种原因必须终止 Activity 时调用的方法。它允许您填充一个 Bundle，这将有助于重新创建用户离开的 Activity 的特定实例。通常发生这种情况是因为用户切换到不同的应用程序并且操作系统正在杀死 Activity 以回收内存，但也会发生在屏幕旋转上，因此至少要注意平台的细微差别。

至于您的问题，我要做的是使用数据库来存储从服务器检索到的信息。当你启动一个 Activity 时，你可以先检查数据库中是否存在需要填充该 Activity 的数据。如果是，则从那里加载并显示它，否则进行服务器调用。

这很好，因为数据将在应用程序的多次使用中保持不变。更进一步，如果来自服务器的数据有可能是陈旧的，您可以轻松扩展它以最初显示来自数据库的数据，并触发对数据的异步请求，该数据将在返回时更新 UI 和数据库. 您的用户几乎永远不会处于等待加载的状态，这总是一件好事！

[这是一个关于实现 sqlite 数据库的基础知识的好教程。](http://www.drdobbs.com/database/using-sqlite-on-android/232900584)这还将为您提供额外的好处，即在应用程序的单独运行中保存数据。

作为替代方案，如果您真的不需要数据库的持久性或其他特性，并且认为开销不值得，您可以创建一个 Singleton 类来跟踪返回的数据，也许实现它使用[应用程序类](http://developer.android.com/reference/android/app/Application.html)。重要的是要注意（并带我们完整循环）任何存储此数据的内存方法都应进行管理，`onSaveInstanceState`以确保如果 Activity 在意外时间被终止，您不会丢失任何数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:51:31.943

对于 MattDavis 的回答 +1，但我也建议您使用所谓的“单例模式”。

本质上，这是一种在内存中缓存事物的方法。您创建了一个类，其目的是保存您不想继续重新加载的所有数据库数据。此对象有一个全局实例，最初为空。您调用一个返回该实例的静态方法。如果静态方法发现实例为空，它会创建实例，从数据库中填充它，缓存它，然后将它返回给调用者。从那时起，对实例的所有请求都只返回缓存的副本。如果您的应用程序因缺乏资源而被系统杀死，并在稍后重新启动，它会根据需要透明地重新创建实例。

这是一个非常常见的实现，并且在多线程环境中工作：

```
public class Singleton {
    private static volatile Singleton instance = null;
    private Singleton() {
        // This is the place where you initialize the instance
        // from the database.
    }
    public static Singleton getInstance() {
        if (instance == null) {
            synchronized(Singleton.class) {
                if (instance == null) {
                    instance = new Singleton();
                }
            }
        }
        return instance;
    }
} 
```

我在很多地方都使用这种模式；它非常方便。

要真正做到这一点，您还应该在活动中实现[onLowMemory](http://developer.android.com/reference/android/app/Activity.html#onLowMemory%28%29) () 或[onTrimMemory](http://developer.android.com/reference/android/app/Activity.html#onTrimMemory%28int%29) () 以在资源紧张时释放单例实例。

# ios - 提取内部 NSMutableDictionary iOS 的 valueForKeys

> ID：14774989
> 
> 赞同：2
> 
> 时间：2013-02-08T14:42:33.443
> 
> 标签：ios, ios5, nsdictionary, nsmutabledictionary, key-value-coding

好的，我得到一个 Json 提要并将其存储到一个名为 jsonArray 的数组中。然后我循环遍历 jsonArray，取出数组键并将它们存储为字符串。然后我将这些字符串添加到一个名为 innerDict 的内部字典中，然后我使用下面的键将该字典添加到 info 字典中。所以基本上innerDict存储在infoDict里面。

```
-(void)pointInfo{

infoDict = [[NSMutableDictionary alloc]init];

for (int i = 0; i < jsonArray.count; i++) {

innerDict = [[NSMutableDictionary alloc]init];

info = [[jsonArray objectAtIndex:i]objectForKey:@"inf"];
thePostCode = [[jsonArray objectAtIndex:i]objectForKey:@"pc"];
mail = [[jsonArray objectAtIndex:i]objectForKey:@"mail"];
url = [[jsonArray objectAtIndex:i]objectForKey:@"url"];
type = [[jsonArray objectAtIndex:i]objectForKey:@"items"];

[innerDict setObject:type forKey:@"Items"];
[innerDict setObject:info forKey:@"Info"];
[innerDict setObject:mail forKey:@"Mail"];
[innerDict setObject:url forKey:@"Url"];

[infoDict setObject:innerDict forKey:thePostCode];

} 
```

infoDict 的输出如下所示：

```
infoDict is {
"ME14 4NN" =     {
    Info = "";
    Items = 4;
    Mail = "";
    Url = "";
};
"ME15 6LG" =     {
    Info = af;
    Items = "0,6,9";
    Mail = "";
    Url = "";
};
"ME15 6YE" =     {
    Info = "";
    Items = "4,5,6,7,11";
    Mail = "";
    Url = "";
};
} 
```

现在我要做的是获取 innerDict 对象的值，即上面的“ME15 6YE”，并将其用作查询以提取 Info、Items、Mail 和 Url 键的关联数据。我一直盯着我的屏幕几个小时，但我就是不明白。

I can pull out the last object of the inner dict using the below however I would like to grab all the values associated with a particular postcode which would be the innerDict key. Completely brain fried at the moment!

```
for (NSMutableDictionary *dictionary in infoDict) {

    NSLog(@"URL %@", [innerDict objectForKey:@"Url"]);
    NSLog(@"MAIL %@", [innerDict objectForKey:@"Mail"]);
    NSLog(@"ITEMS %@", [innerDict objectForKey:@"Items"]);
    NSLog(@"ITEMS %@", [innerDict objectForKey:@"Info"]);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:59:29.497

To get the correct inner dictionary, use `objectForKey`:

```
NSDictionary *innerDict = [infoDict objectForKey:@"ME15 6YE"];
NSLog(@"Url %@", [innerDict objectForKey:@"Url"]);
NSLog(@"Mail %@", [innerDict objectForKey:@"Mail"]);
NSLog(@"Items %@", [innerDict objectForKey:@"Items"]);
NSLog(@"Info %@", [innerDict objectForKey:@"Info"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:00:36.853

Maybe I'm misunderstanding something, but I think this should answer your questions.

You're using **dictionary** in the for loop, but trying to access it via **innerDict**. Change it to:

```
for (NSMutableDictionary *dictionary in infoDict) {
    NSLog(@"URL %@", [dictionary objectForKey:@"Url"]);
    NSLog(@"MAIL %@", [dictionary objectForKey:@"Mail"]);
    NSLog(@"ITEMS %@", [dictionary objectForKey:@"Items"]);
    NSLog(@"ITEMS %@", [dictionary objectForKey:@"Info"]);
} 
```

Or, for a single one,

```
NSMutableDictionary *inner = [infoDict objectForKey:@"POST CODE HERE"];
NSLog(@"URL %@", [inner objectForKey:@"Url"]);
NSLog(@"MAIL %@", [inner objectForKey:@"Mail"]);
NSLog(@"ITEMS %@", [inner objectForKey:@"Items"]);
NSLog(@"ITEMS %@", [inner objectForKey:@"Info"]); 
```

# matlab - 从 Matlab 工作区中的表中提取最大值/最小值

> ID：14774990
> 
> 赞同：0
> 
> 时间：2013-02-08T14:42:42.997
> 
> 标签：matlab, extract, min

回归本源。如何从工作区中的“变量”表中提取最大值和最小值？min(nameofvariable) 不起作用，返回错误消息“下标索引必须是真正的正整数或逻辑”。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T14:55:06.263

假设您有一个名为 的矩阵`nameofvariable`，则正确的语法确实是：

```
min(nameofvariable) 
```

这会给你列明智的分钟

对于完整的最小值：

```
min(nameofvariable(:)) 
```

您的错误表明您有一个名为 min 的变量（尽量避免这种情况），请尝试：

```
clear min
min(nameofvariable) 
```

# java - 来自 Java Spring 应用程序的 Windows 身份验证

> ID：14774994
> 
> 赞同：2
> 
> 时间：2013-02-08T14:42:58.793
> 
> 标签：java, authentication, spring-mvc, active-directory, spring-security

我正在 Windows 网络上部署一个用 spring 构建的 java 应用程序。网络使用 Active Directory，因此用户使用其 Active Directory 用户名登录到他们的桌面。

现在，我正在尝试添加一项功能，以便当用户打开浏览器访问此应用程序（部署在同一网络上）时，应用程序会自动获取他们的用户名并对其进行身份验证。

在我的研究过程中，我遇到了这篇博文：http: [//blog.springsource.org/2009/09/28/spring-security-kerberos/](http://blog.springsource.org/2009/09/28/spring-security-kerberos/)但是，我认为在我的场景中可能不需要这种方法，因为我正在部署应用程序到同一个 Windows 网络。

**问题**

有什么方法可以简单地访问用户令牌，以便我的 Web 应用程序可以对用户进行身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:55:27.677

我们使用[NtlmHttpFilter](http://jcifs.samba.org/)。

您将它配置为 web.xml 中的过滤器，告诉它您的域控制器所在的位置，它几乎可以正常工作。Internet Explorer 将在您不采取任何操作的情况下提供凭据，Firefox（我想是 Chrome）会提示您登录。