# StackOverflow 问答 12580000-12580999

# c++ - 在基类方法中访问派生类成员

> ID：12580001
> 
> 赞同：-3
> 
> 时间：2012-09-25T09:27:09.280
> 
> 标签：c++, class, inheritance, derived-class, base-class

我有一个特殊的要求，但无法找到解决方案。

```
class Base
{
public:
    void func()
    {
       //access the member say 'var' of derived class
    }
} 
```

1.  在我们的例子中，所有来自基类的派生类都必须有成员“var”。
2.  派生类的名称可以是任何名称。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T09:29:37.473

由于派生类中的所有`var`s 都需要具有相同的类型才能有意义，为什么不简单地将其放在基类中呢？

```
class Base
{
public:
    void func()
    {
      // use var
    }
protected: // allow derived classes to access 'var'
           // and give it a value on construction
    // where T == whatever type you want
    Base(T v) : var(v){}
    T var; 
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T09:29:12.303

您需要一个`virtual`返回该成员的函数：

```
class Base
{
public:
    void func()
    {
       getVar();
    }
    virtual int getVar() = 0;
};
class Derived : public Base
{
    int var;
    virtual int getVar() { return var; }
}; 
```

更好的设计是`var`在基类中，因为它是一个通用成员。否则，C++ 没有任何反射机制，因此以您想要的方式动态检查类是不可能的。

# android - 安装应用时在 Android 中生成持久应用 UUID

> ID：12580002
> 
> 赞同：2
> 
> 时间：2012-09-25T09:27:12.290
> 
> 标签：android, sharedpreferences, uuid

我需要区分我的应用程序的安装，因此我在我的应用程序中生成一个 UUID，`java.util.UUID.randomUUID()`然后将其保存为`String`共享首选项中的一个。但是，当我转到手机的设置，管理应用程序，单击我的应用程序，然后按“清除数据”时，我的应用程序下次运行时会生成一个新的 UUID。我相信这是因为以前的共享首选项已被删除。

有没有办法让我创建一个只要安装了应用程序就一直存在的 UUID，即使从“设置”中按下“清除数据”也是如此？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:29:56.143

清除数据将从您的应用程序空间中清除所有文件、数据库。保存持久数据的一种好方法是在 SD 卡中创建自己的私有文件夹，创建一个保存此 UUID 的文件。这又不是万无一失的，因为用户可能会从 SD 卡中删除文件夹。您甚至可以通过在文件名上加上一个点来创建不可见的文件夹或不可见的文件。

# mysql - 通过 MySQL 查询列出记录

> ID：12580010
> 
> 赞同：2
> 
> 时间：2012-09-25T09:27:42.883
> 
> 标签：mysql, group-by, sql-order-by, limit

我有如下的mysql表：

```
STORES
store_id, rating
 10023      5
 10024      5
 10025      4
 10026      4

PRODUCTS
product_id, store_id, price
  10023         10023      5.00
  10045         10023     130.00
  10056         10023      10.00
  10057         10024      20.00
  10058         10024      12.00
  10059         10025       7.00

I need MYSQL query to retrieve records as below:
  store_id,  product_id  Price
    10023       10056    5.00
    10023       10023    10.00
    10024       10058    12.00
    10024       10057    20.00
    10025       10059     7.00 
```

什么是正确的 SQL 查询来列出基于最高商店评级的记录，然后是最低价格和每个商店的限制 2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:45:39.413

MySQL 没有分析函数来计算基于一组行的聚合值（例如 oracle），但您可以使用变量限制单个查询中每个字段值的行数。我试过这个，它似乎工作：

```
SELECT
r.store_id,
r.product_id,
r.price
FROM ( 
      SELECT *
      FROM (
            SELECT *,
            @cnt := if(@store_id = s.store_id, @cnt:= @cnt + 1, 1) AS row_count,
            @store_id:=s.store_id AS a 
            FROM stores AS s 
            LEFT JOIN (SELECT store_id AS sid, product_id, price 
                       FROM products ORDER BY store_id,price ASC) AS p 
            ON s.store_id=p.sid WHERE product_id IS NOT NULL
           ) AS b, (SELECT @store_id:='',@cnt:=0) AS c
      HAVING row_count<=2
      ORDER BY rating DESC,store_id ASC,price ASC
     ) AS r; 
```

# asp.net-mvc-3 - 如何创建具有超时的非持久性表单身份验证 cookie？

> ID：12580011
> 
> 赞同：0
> 
> 时间：2012-09-25T09:27:45.370
> 
> 标签：asp.net-mvc-3, cookies, forms-authentication

我正在使用表单身份验证并创建一个非持久性 cookie。

当我关闭浏览器时，cookie 过期，这是预期的行为。但是即使应用程序在指定的超时时间内处于空闲状态，cookie 也不会过期。我的要求是，当用户关闭浏览器或超时​​时间已过时，cookie 应该过期。

我正在使用 Asp.Net MVC4。有什么办法可以同时满足这两个要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:29:30.633

`slidingExpiration`如果您不希望在每次请求时自动更新 cookie，则可能需要关闭：

```
<authentication mode="Forms">
    <forms 
        loginUrl="~/Account/LogOn"
        cookieless="UseCookies"
        slidingExpiration="false" 
        timeout="1"
    />
</authentication> 
```

现在 1 分钟后 cookie 将过期，用户将不再在后续请求中进行身份验证。cookie 将由客户端浏览器发送，但 FormsAuthentication 模块将检测到 cookie 已过期并拒绝请求。

# c# - 如何使用 MOQ 框架在 c# 中模拟静态方法？

> ID：12580015
> 
> 赞同：78
> 
> 时间：2012-09-25T09:27:57.530
> 
> 标签：c#, unit-testing, mocking, moq

我最近一直在做单元测试，我已经使用 MOQ 框架和 MS Test 成功地模拟了各种场景。我知道我们不能测试私有方法，但我想知道我们是否可以使用 MOQ 模拟静态方法。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-09-25T09:32:59.950

Moq（和其他基于[DynamicProxy](http://www.codeproject.com/Articles/9055/Castle-s-DynamicProxy-for-NET)的模拟框架）无法模拟任何不是虚拟或抽象方法的东西。

密封/静态类/方法只能使用基于 Profiler API 的工具来伪造，例如[Typemock](http://www.typemock.com/) （商业）或 Microsoft Moles（免费，在 Visual Studio 2012 Ultimate /2013 /2015 中称为[Fakes ）。](https://msdn.microsoft.com/en-us/library/hh549175.aspx)

或者，您可以重构您的设计以抽象对静态方法的调用，并通过依赖注入将此抽象提供给您的类。那么您不仅会有更好的设计，而且可以使用免费工具（如 Moq）进行测试。

无需完全使用任何工具即可应用允许可测试性的通用模式。考虑以下方法：

```
public class MyClass
{
    public string[] GetMyData(string fileName)
    {
        string[] data = FileUtil.ReadDataFromFile(fileName);
        return data;
    }
} 
```

`FileUtil.ReadDataFromFile`您可以将其包装在一个`protected virtual`方法中，而不是尝试 mock ，如下所示：

```
public class MyClass
{
    public string[] GetMyData(string fileName)
    {
        string[] data = GetDataFromFile(fileName);
        return data;
    }

    protected virtual string[] GetDataFromFile(string fileName)
    {
        return FileUtil.ReadDataFromFile(fileName);
    }
} 
```

然后，在您的单元测试中，派生`MyClass`并调用它`TestableMyClass`。然后您可以覆盖该`GetDataFromFile`方法以返回您自己的测试数据。

希望有帮助。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-02-19T23:17:14.097

将静态方法转换为静态 Func 或 Action 的另一种选择。例如。

原始代码：

```
 class Math
    {
        public static int Add(int x, int y)
        {
            return x + y;
        } 
```

您想“模拟” Add 方法，但不能。把上面的代码改成这样：

```
 public static Func<int, int, int> Add = (x, y) =>
        {
            return x + y;
        }; 
```

现有的客户端代码不必更改（可能重新编译），但源代码保持不变。

现在，从单元测试中，要更改方法的行为，只需为其重新分配一个内联函数：

```
 [TestMethod]
    public static void MyTest()
    {
        Math.Add = (x, y) =>
        {
            return 11;
        }; 
```

将您想要的任何逻辑放入方法中，或者仅返回一些硬编码值，具体取决于您要执行的操作。

这可能不一定是您每次都可以做的事情，但在实践中，我发现这种技术效果很好。

[编辑] 我建议您将以下清理代码添加到您的单元测试类：

```
 [TestCleanup]
    public void Cleanup()
    {
        typeof(Math).TypeInitializer.Invoke(null, null);
    } 
```

为每个静态类添加单独的一行。这样做是，在单元测试完成运行后，它将所有静态字段重置为其原始值。这样，同一项目中的其他单元测试将以正确的默认值开始，而不是您的模拟版本。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-25T09:36:57.097

Moq 不能模拟类的静态成员。

在为可测试性设计代码时，避免静态成员（和单例）很重要。一种可以帮助您重构代码以提高可测试性的设计模式是依赖注入。

这意味着改变这一点：

```
public class Foo
{
    public Foo()
    {
        Bar = new Bar();
    }
} 
```

到

```
public Foo(IBar bar)
{
    Bar = bar;
} 
```

这允许您使用单元测试中的模拟。在生产中，您使用像[Ninject](http://www.ninject.org/)或[Unity](http://unity.codeplex.com/)这样的依赖注入工具，可以将所有东西连接在一起。

我前段时间写了一篇关于这个的博客。它解释了哪些模式可用于更好的可测试代码。也许它可以帮助你：[单元测试，地狱还是天堂？](http://wouterdekort.blogspot.nl/2012/03/unit-testing-hell-or-heaven.html)

另一种解决方案可能是使用[Microsoft Fakes Framework](http://msdn.microsoft.com/en-us/library/hh549175.aspx)。这不能替代编写设计良好的可测试代码，但它可以帮助您。Fakes 框架允许您模拟静态成员并在运行时用您自己的自定义行为替换它们。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-28T10:10:43.377

正如其他答案中提到的那样，MOQ 不能模拟静态方法，作为一般规则，应该尽可能避免使用静态方法。

有时这是不可能的。一种是使用遗留代码或第 3 方代码，甚至使用静态的 BCL 方法。

一种可能的解决方案是使用可以模拟的接口将静态包装在代理中

```
 public interface IFileProxy {
        void Delete(string path);
    }

    public class FileProxy : IFileProxy {
        public void Delete(string path) {
            System.IO.File.Delete(path);
        }
    }

    public class MyClass {

        private IFileProxy _fileProxy;

        public MyClass(IFileProxy fileProxy) {
            _fileProxy = fileProxy;
        }

        public void DoSomethingAndDeleteFile(string path) {
            // Do Something with file
            // ...
            // Delete
            System.IO.File.Delete(path);
        }

        public void DoSomethingAndDeleteFileUsingProxy(string path) {
            // Do Something with file
            // ...
            // Delete
            _fileProxy.Delete(path);

        }
    } 
```

不利的一面是，如果有很多代理，ctor 可能会变得非常混乱（尽管可以说，如果有很多代理，那么该类可能会尝试做太多事情并且可以重构）

另一种可能性是拥有一个“静态代理”，其背后有不同的接口实现

```
 public static class FileServices {

        static FileServices() {
            Reset();
        }

        internal static IFileProxy FileProxy { private get; set; }

        public static void Reset(){
           FileProxy = new FileProxy();
        }

        public static void Delete(string path) {
            FileProxy.Delete(path);
        }

    } 
```

我们的方法现在变成

```
 public void DoSomethingAndDeleteFileUsingStaticProxy(string path) {
            // Do Something with file
            // ...
            // Delete
            FileServices.Delete(path);

    } 
```

为了测试，我们可以将 FileProxy 属性设置为我们的模拟。使用这种风格减少了要注入的接口的数量，但使依赖关系变得不那么明显（尽管不比我想的原始静态调用更明显）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-21T18:49:14.277

我们通常通过依赖于接口之类的抽象来模拟实例（非静态）类及其方法，而不是直接依赖于具体类。

我们可以对静态方法做同样的事情。这是一个依赖于静态方法的类的示例。（这是非常人为的。）在这个例子中，我们直接依赖于静态方法，所以我们不能模拟它。

```
public class DoesSomething
{
    public long AddNumbers(int x, int y)
    {
        return Arithemetic.Add(x, y); // We can't mock this :(
    }
}

public static class Arithemetic
{
    public static long Add(int x, int y) => x + y;
} 
```

为了能够模拟该`Add`方法，我们可以注入一个抽象。`Func<int, int, long>`我们可以注入一个或一个委托，而不是注入一个接口。两者都可以，但我更喜欢委托，因为我们可以给它起一个名称，说明它的用途，并将它与具有相同签名的其他函数区分开来。

这是委托以及注入委托时类的外观：

```
 public class DoesSomething
{
    private readonly AddFunction _addFunction;

    public DoesSomething(AddFunction addFunction)
    {
        _addFunction = addFunction;
    }

    public long AddNumbers(int x, int y)
    {
        return _addFunction(x, y);
    }
} 
```

这与我们将接口注入类的构造函数时的工作方式完全相同。

我们可以使用 Moq 为委托创建模拟，就像我们使用接口一样。

```
var addFunctionMock = new Mock<AddFunction>();
addFunctionMock.Setup(_ => _(It.IsAny<int>(), It.IsAny<int>())).Returns(2);
var sut = new DoesSomething(addFunctionMock.Object); 
```

...但是这种语法令人费解。我不得不谷歌它。如果我们使用匿名函数而不是 Moq 会容易得多：

```
AddFunction addFunctionMock = (x, y) => 2;
var sut = new DoesSomething(addFunctionMock); 
```

我们可以使用任何具有正确签名的方法。如果我们愿意，我们可以使用该签名在我们的测试类中定义另一个方法并使用它。

* * *

顺便说一句，如果我们注入一个委托，我们如何使用我们的 IoC 容器进行设置？它看起来就像注册一个接口和实现。使用`IServiceCollection`：

```
serviceCollection.AddSingleton<AddFunction>(Arithemetic.Add); 
```

# c# - VS2010 ReportViewer 不断加载 Windows Azure 报告服务

> ID：12580016
> 
> 赞同：0
> 
> 时间：2012-09-25T09:27:59.000
> 
> 标签：c#, asp.net, reporting-services, azure, webforms

使用**VS2010**，我开始了一个全新的**Azure**项目，其中包含一个**MVC2** webrole，它只有一个**Asp.Net webform**。

# 问题

我遇到了一个问题，我的 ReportViewer 一直在加载，我无法让它与 version 一起正常工作`10.0`？版本`9.0`就像一个魅力，但我找不到这两者之间的区别。

Internet Explorer 一直闪烁，但使用 Chrome 的“检查器”，我可以看到出现以下错误：

`<h2> Report Viewer Configuration Error </h2><p>The Report Viewer Web Control HTTP Handler has not been registered in the application&#39;s web.config file. Add &lt;add verb=&quot;*&quot; path=&quot;Reserved.ReportViewerWebControl.axd&quot; type = &quot;Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&quot; /&gt; to the system.web/httpHandlers section of the web.config file, or add &lt;add name=&quot;ReportViewerWebControlHandler&quot; preCondition=&quot;integratedMode&quot; verb=&quot;*&quot; path=&quot;Reserved.ReportViewerWebControl.axd&quot; type=&quot;Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&quot; /&gt; to the system.webServer/handlers section for Internet Information Services 7 or later.</p>`

# 到目前为止我做了什么

我只拖放一个`ScriptManager`和`ReportViewer`.
项目引用是自动创建的，并且 web.config 的程序集看起来不错。

```
 <add assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
    <add assembly="Microsoft.ReportViewer.Common, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" /> 
```

我要做的下一步是将处理程序添加到 web.config：

```
<system.web>
   <httpHandlers>
      <add path="Reserved.ReportViewerWebControl.axd" verb="*" 
      type="Microsoft.Reporting.WebForms.HttpHandler, 
      Microsoft.ReportViewer.WebForms, Version=10.0.0.0, 
      Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" validate="false" 
      />
   </httpHandlers>
</system.web>

<system.webServer>
  <validation validateIntegratedModeConfiguration="false" />
  <modules runAllManagedModulesForAllRequests="true" />

  <!-- added handler for reporting -->
  <handlers>
    <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </handlers>
</system.webServer> 
```

之后，我在其中设置报告属性，`<script runat="server"></script>`以便我可以轻松调试。

# 我的网络表单

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Report.aspx.cs" Inherits="MvcWebRole1.Reports.Report" %>

<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
    Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <script runat="server">
        protected void Page_Load(object sender, EventArgs e)
        {
            ReportViewer1.ProcessingMode = ProcessingMode.Remote;
            ReportViewer1.ServerReport.ReportServerUrl = new Uri("https://XXXX.reporting.windows.net/ReportServer");
            ReportViewer1.ServerReport.ReportPath = "/MyReport.rdl";
            ReportViewer1.ServerReport.ReportServerCredentials = new Credentials();
        }

        public class Credentials : IReportServerConnection
        {
            public IEnumerable<System.Net.Cookie> Cookies { get { return null; } }
            public Uri ReportServerUrl { get { return new Uri("https://XXXX.reporting.windows.net/ReportServer"); } }
            public int Timeout { get { return 60000; } }

            public bool GetFormsCredentials(out System.Net.Cookie authCookie, out string userName, out string password, out string authority)
            {
                authCookie = null;
                userName = "MyUserName";
                password = "MyPassword";
                authority = "XXXX.reporting.windows.net";
                return true;
            }
            public System.Security.Principal.WindowsIdentity ImpersonationUser { get { return null; } }
            public System.Net.ICredentials NetworkCredentials { get { return null; } }
        }

    </script>
    <div>
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <rsweb:ReportViewer ID="ReportViewer1" runat="server">
        </rsweb:ReportViewer>
    </div>
    </form>
</body>
</html> 
```

# 下一步是什么？

有谁知道我该如何解决这个问题！**？**

所以，到目前为止：

1.  报告版本 10.0
2.  Web.config 对于程序集和处理程序看起来也不错
3.  我尝试了视觉工作室调试器
4.  我试过 IIS Express
5.  我尝试了一个 Windows Azure 项目（带模拟器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:35:33.107

您是否尝试在 system.web 中添加 httpHandler？

```
<system.web>
   <httpHandlers>
      <add path="Reserved.ReportViewerWebControl.axd" verb="*" 
      type="Microsoft.Reporting.WebForms.HttpHandler, 
      Microsoft.ReportViewer.WebForms, Version=10.0.0.0, 
      Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" validate="false" 
      />
   </httpHandlers>
</system.web> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:34:29.650

好吧，似乎“错误消息”总是在那里，等待显示！所以不要让它欺骗你！

最后我非常接近我的解决方案......我只需要添加一个简单的行（只花了我几个小时）：

```
if(!IsPostBack){
    // All my ReportViewer1 stuff goes here
} 
```

我发现这个页面也非常有用：[Configuring ReportViewer for Asynchronous Rendering](http://msdn.microsoft.com/en-us/library/ms252090%28v=vs.80%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T21:17:59.793

在用与您的设置类似但使用 MVC3 和 2012 调试类似的报告查看器问题之后，我可以告诉您，您可以看到的 HttpHandler 块是红鲱鱼。即使一切正常，报表查看器控件也会输出该 HTML 块。

如果您的问题与我的问题相同，请检查传递到报告中的参数。如果其中任何一个是“”，则不会加载报表查看器。将该参数更改为“”，或者只是不将其传入。恐怕我没有充分的理由说明为什么会这样。

# python - 在 Python 中求解奇异值分解 (SVD)

> ID：12580019
> 
> 赞同：3
> 
> 时间：2012-09-25T09:28:18.747
> 
> 标签：python, linear-algebra, idl, svd, idl-programming-language

我正在尝试将 IDL 程序翻译成 Python。我必须通过`SVD`以下方式解决我所取得的结果

```
from scipy.linalg import svd
A = [[1,2,3],[4,5,6]]
b = [4,4,5]

u,w,v = svd(A) 
```

这很好用，并且很好地从 IDL 翻译。下一步是在 IDL(!)

```
x = svsol(u,w,v,b) 
```

`u`in python 和 IDL 几乎相同（对于其他矩阵也是如此）。唯一的区别是维度，IDL 的矩阵更大，但有很多零。从这个意义上说，Python 的矩阵看起来更加压缩。

有谁知道 Python 类似的东西。

如果有人需要，这里是[`svsol`](http://idlastro.gsfc.nasa.gov/idl_html_help/SVSOL.html).

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T21:21:46.430

使用`SVDC`和`SVSOL`在 IDL 中，您可以通过 SVD 分解解决线性最小二乘问题。这是`numpy`由`numpy.linalg.lstsq`函数完成的。（无需先计算 SVD 分解然后反解。）

```
>>> import numpy as np
>>> A = np.array([[1,2,3],[4,5,6]])
>>> b = np.array([4,4])
>>> x, _, _, _ = np.linalg.lstsq(A,b)
>>> x
array([-2.,  0.,  2.])
>>> np.dot(A,x)
array([ 4.,  4.]) 
```

请注意， 的长度`b`必须与 的行数相同`A`，因此您的示例是错误的。只是为了确保我正确解释了 IDL 语义，以下是`svsol` [参考手册](http://idlastro.gsfc.nasa.gov/idl_html_help/SVSOL.html)中的示例：

```
>>> A = np.array(
... [[1.0, 2.0, -1.0, 2.5],
...  [1.5, 3.3, -0.5, 2.0],
...  [3.1, 0.7,  2.2, 0.0],
...  [0.0, 0.3, -2.0, 5.3],
...  [2.1, 1.0,  4.3, 2.2],
...  [0.0, 5.5,  3.8, 0.2]])
>>> B = np.array([0.0, 1.0, 5.3, -2.0, 6.3, 3.8])
>>> x, _, _, _ = np.linalg.lstsq(A,B)
>>> print x
[ 1.00095058  0.00881193  0.98417587 -0.01009547] 
```

# sharepoint - SharePoint: Add Columns to Content Types dynamicly

> ID：12580024
> 
> 赞同：0
> 
> 时间：2012-09-25T09:28:51.313
> 
> 标签：sharepoint, sharepoint-2010, content-type

Howdie

I use a SharePoint feature to programmatic add columns to an existing content type. This content type is already assigned to a list.

After I did that, the content type has those new columns, but the list is not updated (the new columns are not shown)

I could remove the content type from that list and add it again but would lose all data saved in the old columns.

Is there any best practice to add columns to an existing content type and update the list(s) that contain that content type?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:06:24.700

MS推荐的方式是通过Object Model更新CT。请在下面找到链接。

[http://msdn.microsoft.com/en-us/library/aa543504.aspx](http://msdn.microsoft.com/en-us/library/aa543504.aspx)

> 所有列表内容类型都存储为 SharePoint Foundation 数据库中的条目，因为当您将网站内容类型添加到列表时，SharePoint Foundation 会将网站内容类型本地复制到列表中作为列表内容类型。

[http://msdn.microsoft.com/en-us/library/ms442695.aspx](http://msdn.microsoft.com/en-us/library/ms442695.aspx)

> 当您对站点内容类型进行更改时，您可以通过用户界面或通过对象模型将这些更改推送到其所有子内容类型

# sql - Missing Keyword (ORA-00905) - Oracle SQL Case Statement

> ID：12580026
> 
> 赞同：2
> 
> 时间：2012-09-25T09:28:56.643
> 
> 标签：sql, oracle, case, ora-00905

Good morning,

I was wondering if one of you could help me - should be fairly quick I'd imagine; I'm a newbie so prone to missing obvious things.

I have the below statement which is returning the aforementioned 905 error...any ideas?

Thanks in advance.

```
(CASE CONTACTS.TELEPHONE_NO_DAY
    WHEN CONTACTS.TELEPHONE_NO_DAY LIKE '07%'
    THEN CONTACTS.TELEPHONE_NO_DAY
    ELSE NULL
    END) TEL_DAY,
   (CASE CONTACTS.TELEPHONE_NO_EVE
    WHEN CONTACTS.TELEPHONE_NO_EVE LIKE '07%'
    THEN CONTACTS.TELEPHONE_NO_EVE
    ELSE NULL
    END) TEL_EVE 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T09:40:15.240

您正在混淆两种处理案例的方式。您要么需要：

```
CASE <expression>
WHEN <comparison expression> THEN <return expression>
... 
```

或者

```
CASE
WHEN <condition> THEN <return expression>
... 
```

这些是[docs](http://docs.oracle.com/cd/E11882_01/server.112/e26088/expressions004.htm)中的“简单”和“搜索”变体。

但是因为你不能`like`在第一个版本中使用，你需要第二个：

```
CASE
WHEN CONTACTS.TELEPHONE_NO_DAY LIKE '07%'
THEN CONTACTS.TELEPHONE_NO_DAY
ELSE NULL
END 
```

您也不需要两个`case`语句周围的括号。

# sql - 根据日期范围选择记录值

> ID：12580029
> 
> 赞同：3
> 
> 时间：2012-09-25T09:29:04.863
> 
> 标签：sql, sql-server-2008, date, range

我有以下两个表：

```
ITEM AREA YEAR  MONTH   DAY QTY OL  EXQTY   EXOL    CREATE DATE UPDATE
------------------------------------------------------------------------    
ABC789  XYZ1234 2012    6   22  0   0   0   0   2012/07/04  2012/09/03
ABC789  XYZ1234 2012    6   23  0   0   0   0   2012/07/04  2012/09/03
ABC789  XYZ1234 2012    6   24  0   0   0   0   2012/07/04  2012/09/03
ABC789  XYZ1234 2012    6   25  0   0   0   0   2012/07/04  2012/09/03
ABC789  XYZ1234 2012    6   26  0   0   0   0   2012/07/04  2012/09/03
ABC789  XYZ1234 2012    6   27  0   0   0   0   2012/07/04  2012/09/03 
```

和

```
STDATE      EDDATE       FYYEAR  FYMONTH
---------------------------------------
2012/04/23  2012/05/27   2012      11
2012/05/28  2012/06/24   2012      12
2012/06/25  2012/07/22   2013       1
2012/07/23  2012/08/26   2013       2 
```

我需要使用第一个表以及第二个表中的所有数据创建一个新`FYYEAR`视图`FYMONTH`。标准是，如果第一个表 ( `YEAR MONTH DAY`) 中的销售日期在第二个表中的`STDATE`和之间，则应选择`EDDATE`正确的`FYYEAR`和。`FYMONTH`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:35:06.967

```
select table1.*, fyyear, fymonth
from table1 
    inner join table2 
    on convert(date,convert(varchar(4),table1.year)+'-'+convert(varchar(4),table1.month)+'-'+convert(varchar(4),table1.day),120)
    between table2.stdate and table2.eddate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:42:12.917

尝试这个：

```
select t1.*,
       FYYEAR ,
       FYMONTH 
from   tbl_1 t1
join   tbl_2 t2
on     cast([YEAR] as char(4))+'-'+
       cast([MONTH] as varchar(2))+'-'+
       cast([DAY] as varchar(2)) 
       between STDATE and EDDATE 
```

# iphone - xcode 4.4.1 uialertview 崩溃

> ID：12580030
> 
> 赞同：1
> 
> 时间：2012-09-25T09:29:08.077
> 
> 标签：iphone, ios, xcode

每当我的应用程序打开时，如果检查某些条件。如果失败，则会向用户显示 UIAlertView。

当执行 [alertview show] 时，构建在 xcode 4.4.1 崩溃中符合，因为它在 xcode 4.3.2 和 xcode 4.5 中运行良好。

这是代码

```
 NSString *appMessage = [NSString stringWithFormat:@"Error Message HERE"];
UIAlertView *appMessageAlertView = [[UIAlertView alloc] initWithTitle:nil message:NSLocalizedString(appMessage,@"Error Message") delegate:self cancelButtonTitle:nil otherButtonTitles:NSLocalizedString(@"OK", @"ok"),nil];
appMessageAlertView.delegate = self;
[appMessageAlertView show];
[appMessageAlertView release]; 
```

错过了一个重要信息：崩溃发生在 iOS6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:09:57.950

试试这个，它会工作：

```
UIAlertView *appMessageAlertView = [[UIAlertView alloc] initWithTitle:nil message:@"Error    Message" delegate:self cancelButtonTitle:nil otherButtonTitles:@"ok",nil];
[appMessageAlertView show];
[appMessageAlertView release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:42:44.393

UIAlertView 的 delgates 方法在显示或关闭时被调用。所以添加

```
 <UIAlertViewDelegate> in .h 
```

再次它进一步崩溃

```
 delegate:nil in line 2 
```

然后删除

```
appMessageAlertView.delegate = self;

 [appMessageAlertView release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:43:41.527

尝试设置标题字符串。

您的第一行也可以简化为： `NSString *appMessage = @"Error Message HERE";`

第 3 行也不是必需的，因为您已经在第 2 行设置了委托

如果您启用了 ARC `[appMessageAlertView release];`，则不允许。

你使用有什么原因`otherButtonTitles`吗？为什么不简单地设置`cancelButtonTitle`to `NSLocalizedString(@"OK", nil)`？

# python - 无法使用 python 发送电子邮件

> ID：12580031
> 
> 赞同：0
> 
> 时间：2012-09-25T09:29:09.683
> 
> 标签：python, email, smtplib

目前我们有一个服务器（Windows 2003 sp2），它在夜间运行 python 脚本，然后通过电子邮件向我们发送脚本是否正确运行，我将这些脚本转移到一个新服务器（也是 Windows 2003 SP2），但是当脚本尝试使用smtplib 模块，我在 pythonwin IDE 中收到以下错误。

```
 File "D:\Python26\ArcGIS10.0\lib\smtplib.py", line 239, in __init__
    (code, msg) = self.connect(host, port)
  File "D:\Python26\ArcGIS10.0\lib\smtplib.py", line 296, in connect
    (code, msg) = self.getreply()
  File "D:\Python26\ArcGIS10.0\lib\smtplib.py", line 340, in getreply
    raise SMTPServerDisconnected("Connection unexpectedly closed")
SMTPServerDisconnected: Connection unexpectedly closed 
```

我需要在服务器上做些什么来让脚本发送电子邮件吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:22:23.970

如果 python 代码在以前的服务器上运行，则 python 代码本身不太可能有问题。我建议使用 telnet 会话对基本电子邮件发送功能进行故障排除，以验证一切正常。以下 URL 提供了使用 telnet 测试 SMTP 功能的示例：

*   [http://exchange.mvps.org/smtp_frames.htm](http://exchange.mvps.org/smtp_frames.htm)
*   [http://www.activeexperts.com/activemail/telnet/](http://www.activexperts.com/activemail/telnet/)

问题可能与运行 python 代码的服务器或电子邮件服务器本身的防火墙相关。问题也可能是邮件服务器本身的配置被配置为仅接受来自某些系统的传出电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:45:24.217

这**是**一个连接问题，而不是代码问题，因此您的评论说“防火墙已关闭”没有帮助。服务器是否已启动并正在运行？它正在侦听的端口是否可以从外部访问？客户端是否允许连接到服务器的 IP 地址？是否允许连接到指定的端口？客户端和服务器之间是否有其他网络设备可能会干扰？您确实必须考虑客户端和服务器之间网络的每个部分。

# css - Wordpress - 页脚直到页面底部

> ID：12580038
> 
> 赞同：-1
> 
> 时间：2012-09-25T09:29:25.463
> 
> 标签：css, wordpress

在我的所有页面中，页面在页面的一半处停止。我希望它自然地流动到我的屏幕尺寸的 100%。我找到了这篇[文章](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)，但似乎无法让它为我工作。有人可以帮我看看吗？（我总是尝试使用 Chrome>Inspect 元素）

如果我将 main-container 设置为 min-height 100%，它将达到页面的全长，除了我的页脚显示在此下方。

[关于页面](http://tomm3ke.be/?page_id=6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:45:12.970

您要寻找的是粘性页脚。像这样[http://jsfiddle.net/wWBPJ/1/](http://jsfiddle.net/wWBPJ/1/)

这个想法是底部边距是页脚高度的负值

# jquery - 使用 Struts2-JQuery 的选项卡式面板

> ID：12580039
> 
> 赞同：0
> 
> 时间：2012-09-25T09:29:26.033
> 
> 标签：jquery, jsp, struts2, struts2-jquery

在我的jsp中使用jquery创建tabbedpanel，错误如下

***我的代码是：***

```
 <%@ taglib prefix="s" uri="/struts-tags"%>
 <%@ taglib uri="/struts-jquery-tags" prefix="sj" %>
 <html>
   <head>
     <sj:head debug="true"/>
   </head>
   <body>
<sj:tabbedpanel id="mytabs" collapsible="true" useSelectedTabCookie="true">

  <sj:tab id="tab1" target="tone" label="Tab One"/>
  <sj:tab id="tab2"  target="ttwo" label="Tab Two"/>
  <sj:tab id="tab3"  target="tthree" label="Tab Three"/>
  <div id="tone"> Test 1 </div>
  <div id="ttwo"> Test 2 </div>
  <div id="tthree"> Test 3 </div>
</sj:tabbedpanel>
  </body>
</html> 
```

***错误：***

```
**FreeMarker template error!**

Error reading included file template/simple/dynamic-attributes.ftl 
```

## 有问题的指令：

```
 include "/${parameters.templateDir}/simple/dynamic-attributes.ftl" [on line 31, column 1 in template/jquery/tabbedpanel.ftl] 
```

* * *

程序员的 Java 回溯：

```
----------
freemarker.template.TemplateException: Error reading included file template/simple/dynamic-attributes.ftl
    at freemarker.core.Include.accept(Include.java:167)
    at freemarker.core.Environment.visit(Environment.java:221)
    at freemarker.core.MixedContent.accept(MixedContent.java:92)
    at freemarker.core.Environment.visit(Environment.java:221)
    at freemarker.core.Environment.process(Environment.java:199)
    at freemarker.template.Template.process(Template.java:237)
    at org.apache.struts2.components.template.FreemarkerTemplateEngine.renderTemplate(FreemarkerTemplateEngine.java:168)
    at org.apache.struts2.components.UIBean.mergeTemplate(UIBean.java:530)
    at org.apache.struts2.components.ClosingUIBean.start(ClosingUIBean.java:58)
    at org.apache.struts2.views.jsp.ComponentTagSupport.doStartTag(ComponentTagSupport.java:54)
    at org.apache.jsp.WEB_002dINF.pages.three_jsp._jspx_meth_sj_005ftabbedpanel_005f0(three_jsp.java:116)
    at org.apache.jsp.WEB_002dINF.pages.three_jsp._jspService(three_jsp.java:69)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:98)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:371)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:308)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:259)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:413)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)
    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.FileNotFoundException: Template template/simple/dynamic-attributes.ftl not found.
    at freemarker.template.Configuration.getTemplate(Configuration.java:495)
    at freemarker.core.Environment.getTemplateForInclusion(Environment.java:1490)
    at freemarker.core.Include.accept(Include.java:157)
    ... 34 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:42:01.363

异常表明您缺少文件。很可能您的项目中没有包含所有的 struts 2 库。请检查您正在使用的 struts 版本的 API，以了解有关您需要哪些文件的更多信息。

对于 struts 2 Jquery，您将需要 jquery 插件，例如：

```
<dependency>
<groupId>com.jgeppert.struts2.jquery</groupId>
<artifactId>struts2-jquery-plugin</artifactId>
<version>3.3.3</version> 
```

如果您手动下载它们，请在“Maven Repository + struts2-jquery-plugin”上进行谷歌搜索。

# php - 从 mysql 列 sum 创建动态表行

> ID：12580041
> 
> 赞同：0
> 
> 时间：2012-09-25T09:29:31.320
> 
> 标签：php, mysql, html-table

我这里有个小问题。。

我有一个代码来为这样的表创建一个数组：

```
$sql = "
    SELECT t.jumBarang,t.hargaJual,b.namaBarang 
    FROM barang AS b, detail_jual AS t
    WHERE t.nomorStruk = '$_POST[idTransaksi2]' AND t.barcode=b.barcode
";
$hasil = mysql_query($sql); 
```

假设从上面的查询中返回 3 行，所以如果我想将该行数创建为我的 tr (3 tr) 我将使用此代码..

```
while ($x = mysql_fetch_array($hasil)) { #create <tr>   } 
```

所以结果变成...

```
<tr></tr>
<tr></tr>
<tr></tr> 
```

但问题是，如果我想创建一行作为我的 mysql 列总和结果...

比方说。。

```
ID | Quantity | key
-------------------
1  | 2        | 1
2  | 3        | 1
------------------- 
```

`<tr>`现在如何使用创建数组`sum(quantity) result (2+3=5 , 5rows)`

```
<tr></tr>
<tr></tr>
<tr></tr>
<tr></tr>
<tr></tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:10:30.340

发出另一个查询来计算总和：

```
SELECT sum(*)
FROM barang AS b, detail_jual AS t
WHERE t.nomorStruk = '$_POST[idTransaksi2]' AND t.barcode=b.barcode 
```

# java - 某些模块未编译时如何在 IntelliJ 中运行单元测试？

> ID：12580047
> 
> 赞同：5
> 
> 时间：2012-09-25T09:29:52.780
> 
> 标签：java, testing, intellij-idea

我得到了一个遗留项目来快速修复错误。这是一个基于 ant 的项目，所以我使用 eclipse 文件将它导入到 intellij 中。项目有几个模块，其中一些没有正确编译。我想做的是：

我有我需要编译的模块，我需要编写一些单元测试来涵盖我的更改。但由于其他模块未编译，我无法运行这些测试。我无法从项目中删除这些模块，因为我正在处理的这个模块使用了这些模块中的一些类（ant magic）。

有没有办法不编译和制作整个项目，只是单个模块？我希望能够像在 eclipse 中一样使用它，即使您的其余代码被破坏，您也可以始终运行您的测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:56:18.023

对于运行配置，您可以触发以下任意组合

*   做每一件事
*   构建特定的人工制品
*   运行蚂蚁目标
*   运行 Maven 目标
*   显示设置。

使用这些的组合或将它们全部关闭应该允许您运行您的程序，只构建您需要的东西。

# magento - 如何在 Magento Collection 中添加 OR 条件

> ID：12580050
> 
> 赞同：2
> 
> 时间：2012-09-25T09:30:01.743
> 
> 标签：magento, magento-1.7

我想通过在**Collection中应用****OR**条件从表中获取数据

 **我正在使用这些代码行

```
$collect = Mage::getModel('storelocater/storelocater')->getCollection()->addFieldToFilter(array(
                大批（

                    '属性' => '国家'，
                    'eq' => '印度'),

                数组(

                    '属性' => '状态',
                    'eq' => '向上')

            ));
回声 $data = $collect->getSelect();
```

它打印输出

SELECT `main_table`.* FROM `storelocater`AS `main_table`WHERE (( **Array = ''** ) OR ( **Array = ''** ))

我也使用了**addAttributeToFilter**而不是**addFieldToFilter**但它返回致命错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T11:55:37.307

`addAttributeToFilter`函数仅适用于 EAV 实体（如客户、产品、类别等）。**OR**`addFieldToFilter`运算符的语法略有不同：

 **```
$collect  = Mage::getModel('storelocater/storelocater')
    ->getCollection()->addFieldToFilter(array('country','state'), array('india','up')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T15:49:32.303

除了[Slayer Birden 的](https://stackoverflow.com/users/927404/slayer-birden)回答。

您还可以创建更复杂的查询，例如

```
 $rulesCollection
        ->addOrder('sort_order', Zend_Db_Select::SQL_ASC)
        ->addFieldToFilter(
            array('to_date', 'to_date'),
            array(array('gteq' => $now), array('null' => 'null')))
        ->addFieldToFilter(
            array('from_date', 'from_date'),
            array(array('lteq' => $now), array('null' => 'null')))
        ->addFieldToFilter('is_active', '1'); 
```

构造了这样的SQL：

```
 SELECT `main_table`.* FROM `enterprise_targetrule` AS `main_table` 
     WHERE ((to_date >= '2013-03-21') OR (to_date IS NULL)) 
     AND ((from_date <= '2013-03-21') OR (from_date IS NULL)) 
     AND (is_active = '1') 
     ORDER BY sort_order ASC 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-04T09:14:19.107

```
$collection->addFieldToFilter(array(
                array('attribute'=>'name', array('like' => '%'.$qry.'%')),
                array('attribute'=>'sku',  array('like' => '%'.$qry.'%'))));
for search by name and search by sku 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-16T15:13:23.680

对于 $collections = Mage::getModel('sales/order')->getCollection() ->addAttributeToFilter('increment_id', array('in' => $sellerIncrementIds)) ->addAttributeToFilter('status', ['in ' => ['待定','pending_seller_confirmation']]);****

# android - 不可聚焦元素上的Android GridView选择

> ID：12580051
> 
> 赞同：0
> 
> 时间：2012-09-25T09:30:02.713
> 
> 标签：android, gridview

我有网格视图和基本适配器。我总是在适配器中有 12 个元素，但有时需要有不可聚焦或不可见的元素。

如果我有一个可见元素，然后按右，则选择不可见项目。我需要以某种方式禁用网格中该元素的焦点。

我试着用

```
 @Override
    public boolean areAllItemsEnabled() {

        Log.d("ARE ALL ITEMS", "ENTERED");
        return false;
    }

    @Override
    public boolean isEnabled(int position) {

        if (position >= numberOFRealElement) {
            Log.d("FAVORITE DISABLED", "ENTERED");
            return false;
        }

        Log.d("FAVORITE ENABLED", "ENTERED");
        return true;
    } 
```

但没有成功。如何调用这些方法？似乎它们不会被自动调用。

编辑：隐藏元素代码：

```
 item.setVisibility(View.GONE);
        item.setFocusable(false);
        item.setEnabled(false);
        item.setClickable(false);

        return item; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:48:56.240

尝试使用`view.setVisibility(View.GONE);`

当你让你的 view `setVisibility(View.INVISIBLE)`，它只是不可见的，但它仍然在 UI 中占有一席之地，但是当你使用时`GONE`，视图变得不可见，并且它也不使用 UI 中的任何空间。

因此，在您的情况下，当它变​​为 时`GONE`，它将无法获得任何焦点或无法被选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:51:41.727

我没有成功地简单地解决这个问题，所以我必须找到这个 Android 错误的解决方法。我必须在 GridView 上附加 OnKeyListener 并检测所选位置是什么。如果用户单击右键或向下并且有不可见元素，我在 KeyListener 中返回 true，并且 Android 不会响应该键。:)

# c - 与类对象宏同名的类函数宏

> ID：12580052
> 
> 赞同：8
> 
> 时间：2012-09-25T09:30:03.387
> 
> 标签：c, macros, c-preprocessor

是否有可能在 C 中有类似的东西：

```
#define MACRO_EX 333

#define MACRO_EX(X,Y) ((X) < (Y) ? : (X) : (Y)) 
```

它们能共存吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T09:57:21.393

[C 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)说( ISO/IEC 9899:1999, §6.10.3, 2)：

> 当前定义为类对象宏的标识符不应由另一个#define 预处理指令重新定义，除非第二个定义是类对象宏定义并且两个替换列表相同。同样，当前定义为类函数宏的标识符不应由另一个#define 预处理指令重新定义，除非第二个定义是具有相同数量和参数拼写的类函数宏定义，并且两个替换列表相同.

所以答案是否定的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T09:34:57.353

不能。不能用相同的名称定义类函数（带 args）和类对象宏（无 args）（在标准术语中，尝试这样做违反了**不得**规则，这意味着编译器需要诊断它）。但是，C99 指定了可变参数宏（采用 1 个或多个 args）。也许那会做你想要的？

`#undef MACRO_EX`如果可以解决您的问题，您可以自由地使用 args 重新定义它。但它只能在有或没有 args 的情况下使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T09:31:43.383

```
warning: "MACRO_EX" redefined [enabled by default] 
```

在这个节目中，

```
 #include <stdio.h>
    #include <stdlib.h>

    #define MACRO_EX 333
    #define MACRO_EX(X,Y) ((X) < (Y) ? : (X) : (Y))

    int main()
    {

    printf("\n %d  %d\n", MACRO_EX, MACRO_EX(10,20));
    printf("\n %d  %d\n", MACRO_EX);

    return 0;
    } 
```

我越来越

```
 warning: "MACRO_EX" redefined [enabled by default]
 note: this is the location of the previous definition
 In function ‘main’:
 error: ‘MACRO_EX’ undeclared (first use in this function)
 note: each undeclared identifier is reported only once for each function it appears in
 error: expected ‘)’ before ‘:’ token 
```

如果我评论一个宏并且它的用法那么工作正常:)

**但根据 C99 标准**

***6.10.3***

当前定义为`object-like`宏的标识符不应由另一个#define 预处理指令重新定义，除非第二个定义是类似对象的宏定义并且两个替换列表相同。同样，当前定义为`function-like`宏的标识符不应由另一个#define 预处理指令重新定义，除非第二个定义是具有相同数量和参数拼写的类似函数的宏定义，并且两个替换列表相同。

我通过编译尝试了相同的代码，`-std=c99`但仍然出现相同的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T09:37:59.637

看

[http://codepad.org/0nfvOGTl](http://codepad.org/0nfvOGTl)

```
#include<stdio.h>
#define MACRO_EX 333

#define MACRO_EX(X,Y) ((X) < (Y) ? : (X) : (Y))

int main()
{

printf("valud is %d",MACRO_EX);
return 0;
} 
```

错误

```
Line 0: warning: "MACRO_EX" redefined
Line 0: warning: this is the location of the previous definition
In function 'main':
Line 10: error: 'MACRO_EX' undeclared (first use in this function)
Line 10: error: (Each undeclared identifier is reported only once
Line 10: error: for each function it appears in.) 
```

# php - 使用 file_get_contents 从 url 获取图像

> ID：12580056
> 
> 赞同：2
> 
> 时间：2012-09-25T09:30:23.137
> 
> 标签：php, loops, header, logic, file-get-contents

这是我的 php 代码，它只从 9 个图像中获取第一个图像，尽管当我手动检查 URL 时，所有 9 个图像 URL 都正确形成，我也用 CURL 尝试了这个代码，但是循环不起作用，让我知道我是什么做错了吗？

```
<?php

for($i=2 ; $i <= 10 ; $i++ ){
header('Content-type: image/jpeg;');
$url = "http://www.lafourchette.com/p-3.3.0/default/rate-bar-bg-".$i.".jpg";
$mycontent = file_get_contents($url);
echo $mycontent;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T10:21:12.300

> @h2ooooooo 实际上兄弟我不是在寻找单个图像...我只想将这 9 个图像保存在一个文件夹中

```
<?php
    for ($i = 2 ; $i <= 10; $i++) {
        $imageName = "rate-bar-bg-" . $i . ".jpg";
        $imageContent = file_get_contents("http://www.lafourchette.com/p-3.3.0/default/" . $imageName);
        file_put_contents($imageName, $imageContent);
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:19:26.077

在@h2ooooooo 的帮助下，我想出了解决方案——

```
<?php

for($i=2 ; $i <= 10 ; $i++ ){
$filename = "rate-bar-bg-".$i.".jpg";
header('Content-type: image/jpeg;');
$url = "http://www.lafourchette.com/p-3.3.0/default/rate-bar-bg-".$i.".jpg";
$fileContent = file_get_contents($url);
file_put_contents($filename, $fileContent);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T09:34:09.187

这是因为不可能像这样连接 JPEG 图像。客户端将读取第一个图像并将其他图像视为尾随垃圾。

如果你想创建一个大图像，你应该使用[`GD`](http://sg3.php.net/manual/en/book.image.php)or [`imagick`](http://sg3.php.net/imagick)。

或者，您可以在页面上创建多个图像，每个图像都指向`rate-bar-bg-2.jpg`thru `10`。这可能会更有效，除非您有充分的理由不直接链接到该网站。

或者，只需完成一次工作并手动创建一个精灵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T09:32:47.363

设置内容长度

`header('Content-Length: ' . $size);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T10:50:08.787

```
 for ($i = 2 ; $i <= 10; $i++) {
        $imageName = "rate-bar-bg-" . $i . ".jpg";
        copy("http://www.lafourchette.com/p-3.3.0/default/" . $imageName,$imageName);
} 
```

# oracle - 连接两个 Oracle 数据库

> ID：12580057
> 
> 赞同：0
> 
> 时间：2012-09-25T09:30:27.980
> 
> 标签：oracle

我英语不好请帮帮我

我有两个问题需要帮助。

我在 IP 10.10.10.92 的一台 Oracle 服务器中有两个数据库

表`One`有两列`CustumerID`和`CustumerName`（表一属于名为 DB1 的数据库 1）。表`Two`有两列`CustumerID`并且`Job`（表二属于名为 DB2 的数据库 2）

1.  如果我使用 Oracle SQL Developer 或 TOAD for Oracle 来查询语句
    我如何从上面的两个表中连接？

2.  如果我使用 SQL Server 2005 将两个 Oracle 数据库链接到查询语句
    我如何从上面的两个表中连接？

我需要创建两台链接服务器还是一台链接服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:40:57.467

如果我正确理解您的问题 - 您在同一台服务器中有数据库 1 (DB1) 和数据库 2 (DB2)，它们每个都有一个客户表，对吗？

您可以使用数据库链接“连接”两个数据库：

[http://psoug.org/reference/db_link.html](http://psoug.org/reference/db_link.html)

我将假设您的用户分别命名为 hr1 和 hr2，分别代表 DB1 和 DB2。

然后它会是这样的（在 DB1 中）：

CREATE DATABASE LINK to_db2 CONNECT TO hr2 IDENTIFIED BY hr2 USING DB2;

在 DB2 中

创建数据库链接 to_db1 连接到 hr1 由 hr1 使用 DB1 识别；

为此，您必须让两个数据库都具有正确的 TNS，否则您必须使用连接字符串而不是数据库服务。之后，您可以查询另一个表：

## SELECT customer_name FROM customer_table@to_DB2 -- 连接到 DB1。

编辑：编辑后： 1\. 这将是上面的答案，无论您使用什么 IDE。2\. 你能说得清楚一点吗？您可以在 DB1 中创建一个视图来访问 DB2 并从 SQLServer 访问该视图。

# xcode - iPhone 4(s)、iPhone 5、iPhone 3GS 兼容应用程序现在

> ID：12580058
> 
> 赞同：3
> 
> 时间：2012-09-25T09:30:28.203
> 
> 标签：xcode, ios6

现在 iOS 6 和 iPhone 5 都出来了，我有点困惑如何调整所有 iPhone 的用户界面。当我开发应用程序时，我是否应该为 iPhone 5 和旧款 iPhone 提供两个单独的 xib？放置图像时，视网膜时我是否仍应添加后缀@2x？我猜对于新 iPhone 的视网膜来说，它将是 -568@2x？你能简单地告诉我这件事吗？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:22:25.377

你不应该做很多具体的工作，真的。只需使用正确的自动调整大小掩码实现您的 XIB 文件。如果您只针对 iOS 6，则可以使用自动布局，否则不能。图像继续以相同的方式运行 - 对于 3GS 和 iPad 1/2，您将图像命名为“xyz.png”，对于视网膜显示设备（包括 iPhone 4、4S、5 和 iPad 3），您将 @2x 后缀命名为“xyz @2x.png”。“-568”表示法目前仅支持启动映像。实际上，如果您放置“xyz-568@2x.png”图像并尝试在 iPhone 5 上将其用作“xyz”，则不会被发现。

如果您需要 iPhone 5/iPod 5 的特殊背景图像，您可以使用带有“-568@2x.png”符号[的宏。](https://stackoverflow.com/a/12519040/983912)

# java - 验证 XML 签名 JAVA

> ID：12580062
> 
> 赞同：1
> 
> 时间：2012-09-25T09:30:37.193
> 
> 标签：java, xml, rsa, xml-signature

是否可以验证以下 XML 文档：

```
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
<SignedInfo>
<CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
<SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />
<Reference URI="">
<Transforms>
<Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" />
<DigestValue>DsP5NLca+plhp9tZvGwykfb2whQYt3CQ5sbsVd9Q9aE=</DigestValue>
</Reference>
</SignedInfo>
<SignatureValue>
LrfE0po3YPvVxB/m77iBWWiR07Ghiuhuj7tO2C2LKqZK2cLrAiidt+3tjbJ3m16quCFxfh7bmjRtJsGi7a3HKtK
qY4auqrjNB62AtYrxvm+7Qd/cRacom4e3M9uF9JD1zTfoGun9w4WDfDrDaoZ+ZwUgNtf6sTYO5Ctcj5sYcD0=
</SignatureValue>
<KeyInfo>
<KeyName>7D665C81ABBE1A7D0E525BFC171F04D276F07BF2</KeyName>
</KeyInfo>
</Signature> 
```

问题是当我运行我的代码时，出现此错误

```
Exception in thread "main" javax.xml.crypto.dsig.XMLSignatureException: cannot find validation key
    at org.jcp.xml.dsig.internal.dom.DOMXMLSignature$DOMSignatureValue.validate(Unknown Source)
    at org.jcp.xml.dsig.internal.dom.DOMXMLSignature.validate(Unknown Source)
    at paket.XmlValidator.validate(XmlValidator.java:28)
    at paket.Test.main(Test.java:43)
Caused by: javax.xml.crypto.KeySelectorException: No KeyValue element found!
    at paket.KeyValueKeySelector.select(KeyValueKeySelector.java:47)
    ... 4 more
javax.xml.crypto.KeySelectorException: No KeyValue element found!
    at paket.KeyValueKeySelector.select(KeyValueKeySelector.java:47)
    at org.jcp.xml.dsig.internal.dom.DOMXMLSignature$DOMSignatureValue.validate(Unknown Source)
    at org.jcp.xml.dsig.internal.dom.DOMXMLSignature.validate(Unknown Source)
    at paket.XmlValidator.validate(XmlValidator.java:28)
    at paket.Test.main(Test.java:43) 
```

我已使用相同的代码成功验证了以下 XML：

```
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
<SignedInfo>
<CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
<SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>
<Reference URI="">
<Transforms>
<Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
<DigestValue>+uYi9GD7lNpk5+AZWjVylxm4PeKGXoFEalJPd44oMeg=</DigestValue>
</Reference>
</SignedInfo>
<SignatureValue>Ov9TJmROGakTblMO8F2otx3YsmzY1N7tUEuJVauqP4EgePUtYpfMdiv1fKdZreeLyri7WRIOrxiq
mEJEWCmpzVKZypJ293y4STmRw4rfUgFQeaatj2AmK2q5zDaE9jzl6+HtiRgDykZpgx7DWC8MHydK
P8wnEHyn2ozYdqL0VCjRfk95zcm0jMknWmytippXf1bqufkhlOLdS46VGyvYM8ZAc742MN3QX1+I
SvNs1a+FNrgQwb0NaYLzX2hWOtFNo2ZparQXynfQy1jj6JHBRvmldLjHiI4nwYgtfEZL6Fgh/H6c
PSnM/Sd6hoh1B6zjhbIViqfaLKLkds/Et6WNYw==</SignatureValue>
<KeyInfo>
<KeyValue>
<RSAKeyValue>
<Modulus>xhbxdz2KP0/GwuoBuE2EfqoSUHj5nTZAC7c+UoUYtpqC8yRfe6BaFjdT/kWJNM8rZhJRawkh8qub
U4Iag0N1Cu8JNgOMXjeFJnVpa1HDijk9blQhLybGawh+TrC1v8D/9OGN5avkAjG/jpEFofOUpINp
Z2ThbhjgOzZV2kSa776nlwLhTLChf0iL5a78otVcDcuU8nmVkkhwFLbggbIRgdVFAk0bKFDYwWqw
kOmimDs2c7lLvu9n+X6IEFJLKt5YmKsBlhxx7LjvVih7vFc27+OtQpKw2EZjHPpmcP/qOEzESOCe
C8AHDrw3EWU5n1Bib8t8WteE5WPd2HbsJ86o3w==</Modulus>
<Exponent>AQAB</Exponent>
</RSAKeyValue>
</KeyValue>
</KeyInfo>
</Signature> 
```

这两个 XML 签名有什么区别，为什么它在第二个 XML 示例上而不是在第一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-24T22:49:36.057

KeyValueKeySelector 在这里对您没有帮助，因为该签名不包含 KeyValue。您必须扩展 KeySelector 并实现例如 KeyNameKeySelector，它将根据给定的 KeyName 在 KeyStore 中查找实际密钥。如果您在该密钥库中有该密钥，那么是的，您可以验证该签名。

这应该让你去：http: [//jirablog.blogspot.no/2007/11/xml-signature-pouzit-nebo-ne.html](http://jirablog.blogspot.no/2007/11/xml-signature-pouzit-nebo-ne.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:35:16.000

不同之处在于，在第一个 XML 中，您提供带有 KeyName 的 keyInfo

```
<KeyInfo>
<KeyName>7D665C81ABBE1A7D0E525BFC171F04D276F07BF2</KeyName>
</KeyInfo> 
```

第二：

```
<KeyInfo>
<KeyValue>
<RSAKeyValue>
<Modulus>xhbxdz2KP0/GwuoBuE2EfqoSUHj5nTZAC7c+UoUYtpqC8yRfe6BaFjdT/kWJNM8rZhJRawkh8qub
U4Iag0N1Cu8JNgOMXjeFJnVpa1HDijk9blQhLybGawh+TrC1v8D/9OGN5avkAjG/jpEFofOUpINp
Z2ThbhjgOzZV2kSa776nlwLhTLChf0iL5a78otVcDcuU8nmVkkhwFLbggbIRgdVFAk0bKFDYwWqw
kOmimDs2c7lLvu9n+X6IEFJLKt5YmKsBlhxx7LjvVih7vFc27+OtQpKw2EZjHPpmcP/qOEzESOCe
C8AHDrw3EWU5n1Bib8t8WteE5WPd2HbsJ86o3w==</Modulus>
<Exponent>AQAB</Exponent>
</RSAKeyValue>
</KeyValue>
</KeyInfo> 
```

# java - 加密/安全通信 Android 应用程序 <-> REST 网络服务

> ID：12580063
> 
> 赞同：0
> 
> 时间：2012-09-25T09:30:39.217
> 
> 标签：java, android, rest, encryption

我想用 Tapestry5 和这个[http://code.google.com/p/t5-restful-webservices/](http://code.google.com/p/t5-restful-webservices/)插件为我的 android 应用程序创建一个后端。该应用程序将通过为注册用户（我猜这很容易保护）以及未注册用户调用 REST 方法来与服务器通信。现在，我当然不希望人们只从浏览器调用该 Web 服务。

如何确保只有我的应用可以调用此后端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:36:37.330

checking for the users UA could help...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:05:57.233

我可以想到两种方法：

使用 SSL 保护连接。SSL 可以进行握手检查凭据。要对用户进行身份验证，您可以使用证书或 PSK。

或者您可以简单地为您的数据创建一个哈希（SHA 或 MD5）并包含一个密钥。这称为 hmac。逆向工程师可能会获得密钥，因为您必须在代码中对其进行硬编码。

# iphone - 如何在 MKMapView 上的用户当前位置添加 UIImageView

> ID：12580064
> 
> 赞同：0
> 
> 时间：2012-09-25T09:30:38.780
> 
> 标签：iphone, ios, uiimageview, uiimage, mkmapview

我想要做的是，我想在用户当前位置插入图像（图像的缩略图视图），我有用户当前位置，并且我设法在 MKMapView 上插入 UIImageView 并且还能够在其上显示图像为出色地。

但我无法找到/做的事情是将图像放在用户的当前位置。

我们如何在 MKMapView 上的用户当前位置添加 UIImageView，以便图像出现在用户的当前位置。

有任何想法吗... ？

谢谢你的时间..！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:45:20.110

您可以利用 Core Location 框架来确定用户的当前位置。您将获得用户的当前位置作为纬度和经度（坐标）。`MKAnnotationView`一旦你有了这个，你可以在地图视图的坐标处添加一个注释（一个实例）。

要知道如何确定用户的位置 -[获取用户的当前位置](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW1)

在地图上添加注释 -[注释地图](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/AnnotatingMaps/AnnotatingMaps.html#//apple_ref/doc/uid/TP40009497-CH6-SW1)

编辑：

注释视图的自定义图像 - [IOS：将图像添加到自定义 MKAnnotationview](https://stackoverflow.com/questions/9632092/ios-adding-image-to-custom-mkannotationview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:39:13.180

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id < MKAnnotation >)annotation {

    if ([annotation isKindOfClass:[MKUserLocation class]]) {

 MKAnnotationView  *userannotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:nil];
            userannotationView.image = [UIImage imageNamed:@"your user image.png"];
            userannotationView.draggable = YES;
            userannotationView.canShowCallout = YES;

         return userannotationView;
    }else {
// your code to return annotationView or pinAnnotationView
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:09:18.587

最初`UIImage *selectedImage`在您的`.h`文件中定义。（`UIImagePickerController`用于那个。）应用它的委托方法从你的相机胶卷中获取选定的图像：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [picker dismissModalViewControllerAnimated:YES];
    selectedImage = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
} 
```

然后在方法中分配相同的`UIImage`而不是“您的用户图像” `viewForAnnotation`，即

```
userannotationView.image = selectedImage; 
```

# c# - WeifenLuo DockPanel Suite 是否仅适用于 MDI 环境？

> ID：12580068
> 
> 赞同：4
> 
> 时间：2012-09-25T09:31:02.803
> 
> 标签：c#, winforms, dockpanel-suite

我的观点是——正如我在 WeifenLuo DockPanel 套件示例中看到的那样——只使用了 MDI 环境。

但是，如果我想在子窗体中使用停靠，可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:39:01.020

在示例应用程序中，您将看到可用的停靠模式之一是`DockingWindow`. 此模式不使用 Windows 内置的 MDI 概念。

要进行多级停靠，您可以`DockPanel`在主面板中的每个子文档上使用 a，这是完全允许的。

由于操作系统的限制，您可能会遇到在这些多级方案中调整大小的问题。如果是这样，请`SupportDeeplyNestedContent`在`DockPanel`.

# facebook - Facebook 喜欢按钮集成

> ID：12580073
> 
> 赞同：0
> 
> 时间：2012-09-25T09:31:15.893
> 
> 标签：facebook

我的要求是我需要在我的应用程序**中为用户墙上的每个 facebook 提要获得类似 facebook 的按钮。**

在点击喜欢按钮时，我应该更新 facebook 以及我的应用程序中特定帖子的喜欢数量。我正在使用下面的代码，但无法达到我的要求。

```
 <html xmlns:fb="http://ogp.me/ns/fb#">
    <body>
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=297457613664288";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
  //div class I am using
    <div class="fb-like" data-send="false" data-width="450" data-show-faces="true"></div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:38:15.320

我这应该有效：

```
<iframe src="http://www.facebook.com/plugins/like.php?href=Your App URL"
    scrolling="no" frameborder="0"
    style="border:none; width:450px; height:80px"></iframe> 
```

# java - SWT浏览器查看页面源码

> ID：12580074
> 
> 赞同：1
> 
> 时间：2012-09-25T09:31:15.643
> 
> 标签：java, browser, view, swt

我在我的应用程序中使用 SWT 浏览器 我已经根据需要编辑了 SWT 源代码，现在我想要一个通过单击按钮查看网页源代码的功能我已经像这样管理“转到主页”

```
public void goHome() {
    int[] rgdispid = auto.getIDsOfNames(new String[]{"GoHome"}); 
    int dispIdMember = rgdispid[0];
    auto.invoke(dispIdMember);
} 
```

我想知道“查看页面源”是否有任何字符串，例如“GoHome”，或者有没有其他方法可以做到这一点。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:59:47.077

基于 SWT 浏览器的 API，看起来您可以通过调用 getText() 方法来获取页面的 HTML。 [Eclipse SWT 浏览器 API](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/browser/Browser.html#getText%28%29)

# php - 多维数组到 Mysql Codeigniter

> ID：12580076
> 
> 赞同：0
> 
> 时间：2012-09-25T09:31:18.847
> 
> 标签：php, mysql, codeigniter

一点帮助如何使用此数组创建输入查询？或者我怎样才能在表格中传递它？我的表格布局示例是这样的：

销售表

```
 id   |   product_name   |   price   |   qty   |   subtotal 
```

这是从 var_dump() 函数派生的。
这是我在数组中的代码

```
//array code from unserialized function
    $products = unserialize($this->session->userdata('product_list'));

//This is the output.
Array
(
    [2] => Array
        (
            [id] => 2
            [product_name] => NOKIA 5110
            [product_desc] => Cellphone
            [product_price] => 500.00
            [product_qty] => 1
            [product_amount] => 500
            [product_code] => NOKI2012-84353
        )

    [3] => Array
        (
            [id] => 3
            [product_name] => HP IPAQ RW6828
            [product_desc] => Cellphone
            [product_price] => 1500.00
            [product_qty] => 1
            [product_amount] => 1500
            [product_code] => HP I2012-08386
        )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:37:59.403

使用 foreach 循环创建一种插入方法，该循环将迭代所有产品并逐个插入它们

```
foreach($products as $p) {
    $data = array(
        'product_name' => $p['product_name'],
        'price' => $p['product_price'],
        'qty' => $p['product_qty'],
        'subtotal' => 1, // what do you want here?
    );

    $data2 = array(
        'product_stuff' => $p['product_code'],
        'product_stuffo' => 100 * $p['product_amount'], // anything you want
    );

    $this->db->insert('products', $data);
    $this->db->insert('sales_line', $data2);
} 
```

您可能希望稍后让此代码支持事务。

# sql - 从 SQL 中的 2 个表操作对

> ID：12580078
> 
> 赞同：1
> 
> 时间：2012-09-25T09:31:25.460
> 
> 标签：sql, sql-server, tsql, sql-server-2005

假设我有以下情况：我有一些城市有建筑物。每个城市被划分为区。每个区都应该有一个“主屋”（每个区一个）。

我有（sql server 2005）一个相应的关联表`CITY_BUILDS (IDCITY, IDBUILD)`
我还有一个建筑物表`BUILD (ID, DISTRICT, IS_MAIN, COLOR)`

所以，说市长决定用区列表中第一栋房子的颜色重新粉刷各区的“主屋”（疯狂的想法，但无论如何）

我需要在一个城市 foreach 区中选择“主屋”，然后搜索第一个区的房屋，查看它的颜色并绘制主屋。

我为我的程序开始了一个存根，但很快就感到困惑......

```
DECLARE L_CURSOR CURSOR FAST_FORWARD FOR
SELECT B.DISTRICT, B.IS_MAIN, B.ID 
FROM BUILD B 
    INNER JOIN CITY_BUILDS C_B 
        ON B.ID = C_B.IDBUILD                   
WHERE IDCITY = 142 --AND B.IS_MAIN=1
ORDER BY DISTRICT 
```

**PS。**第一栋建筑，我的意思是 CITY_BUILDS 列表中的任何第一次出现......另外，“第一”房子不应该是 MainHouse 本身......

**聚苯乙烯。**我使用了一个游标，因为一旦我在实际项目中获得了这对 (ID_MAIN_HOUSE - ID_FIRST_HOUSE)，我需要用这两个参数和颜色调用一个存储过程......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:40:38.237

假设主区的 IS_MAIN 为 1，我认为您可以使用一条更新语句完成所有这些操作

```
UPDATE B
SET COLOR = M.COLOUR
FROM CITY_BUILDS C  -- get city
-- get main
INNER JOIN BUILD M ON M.ID = C.IDBUILD AND M.IS_MAIN =1
 -- get others join them to city and main district
INNER JOIN BUILD B ON C.ID = C.IDBUILD AND C.IS_MAIN <> 1 AND M.DISTRICT = B.DISTRICT 
-- if you really only need one city then uncomment following 
--WHERE C.IDCITY = 142 
```

# sql - 如何将 SQL Server 2005 表导出到 SQL Server Compact 数据库

> ID：12580080
> 
> 赞同：0
> 
> 时间：2012-09-25T09:31:29.090
> 
> 标签：sql, sql-server, tsql, sql-server-ce

我不知道这是否是一个新手问题，我想通过 CLR 存储过程将一些表从“完整”SQL Server 2005 数据库导出到 SQL Server Compact Edition 数据库。

我知道通过 SSIS 是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:43:24.683

[本文介绍如何使用](http://erikej.blogspot.com/2012/02/migrating-databases-between-sql-server.html)[SQL Server Compact Toolbox](http://sqlcetoolbox.codeplex.com/)在 sql server 和 sql server compact 之间进行迁移。因此您可以使用从数据库生成的 sql server compact 脚本来创建[CLR 存储过程](http://www.codeproject.com/Articles/37298/CLR-Stored-Procedure-and-Creating-It-Step-by-Step)

# cakephp - Cakephp 参数未通过

> ID：12580087
> 
> 赞同：1
> 
> 时间：2012-09-25T09:31:42.613
> 
> 标签：cakephp

我花了很多时间试图解决这个问题并且运气为零。我试过路由没有成功。我会把逻辑放在第一位，然后是代码。

> 1.  用户在 /pra/Fields/view/1 中查看 fields.template_id=1 的字段列表
> 2.  用户单击添加新字段/pra/Fields/add_new/1，他们将进入一个表单，在该表单中输入他们想要的关于他们创建的新字段的信息。
> 3.  当用户单击添加/提交时，新字段将保存到数据库中
> 4.  用户被带回 /pra/Fields/view/1，因此他们可以看到添加到模板中的新字段

目前前 3 个步骤正在发生，但是当涉及到重定向回`/pra/Fields/view/1`用户被重定向到`/pra/Fields/view/`

这是 add_new 函数的代码

```
function add_new($id=null){
    //allows users to add another field to an existing template
    $this->set('title_for_layout', 'Create Fields');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');
    $this->layout='home_layout';
    $name=$this->Field->field('template_id', array('template_id'=>$id));
    //if the field data saves
    $this->set('name',$name);
    if(($this->Field->save($this->data)))
    {   
        //user is redirected to fields/view/$name
        $this->redirect(array('controller'=>'Fields', 'action'=>'view',$name));
    }
    //sets the $id variable
    $this->set('id',$id); 
```

这是 add_new 视图

```
<table id="formatform">
        </br></br>
        <?php
            $options = array('Money'=>'Money','Text'=>'Text','Description'=>'Description');
            ?>
        <?php echo $this->Form->create('Field', array('action'=>'add_new')); ?>
        <?php echo $this->Form->input('id',array('type'=>'hidden')); ?>
                <tr>
                <td></td>
                <td><?php echo $this->Form->input('template_id',array('type'=>'hidden','default' => $id)); ?></td>
                </tr>

                <tr>
                <td align='center'>Field Name:</td>
                <td align='left'><?php echo $this->Form->input('name', array('label'=>false)); ?></td>
                </tr>

                <tr>
                <td align='center'>Default Value:</td>
                <td align='left'><?php echo $this->Form->input('default_value', array('label'=>false)); ?></td>
                </tr>
                <tr>
                <td align='center'>Field Type:</td>
                <td align='left'><?php echo $this->Form->input('field_type', array('label'=>false,'type'=>'select','options'=>$options)); ?></td>
                </tr>

                <tr>
                <td align='center'>Description:</td>
                <td align='left'><?php echo $this->Form->input('description', array('label'=>false)); ?></td>
                <td><?php echo $this->Form->input('active', array('type'=>'hidden','default'=>true)); ?></td>
                </tr>

    <td></td>   <td align = "left"><?php echo $this->Form->end('Submit');?></td> 
```

这是查看功能代码

```
function view($name){
    //lists information about fields that correspond to the
    //template they have clicked 'view' on
    $this->set('title_for_layout', 'Field Details');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');
    $this->layout='home_layout';
    //sets $conditions where template_id=$name and field.active=true
    $conditions=array(
        "AND"=>array(
        'template_id'=> $name,
        'Field.active'=>true));
    //finds all fields where 'conditions'=$conditions
    $fields = $this->Template->Field->find('all',array( 
        'conditions' => $conditions));
    //sets all the variables      
    $this->set('conditions', $conditions);
    $this->set('field', $fields);
    $this->set('field', $this->paginate('Field', $conditions));  

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T01:41:41.220

```
function add_new($id=null){
    //allows users to add another field to an existing template
    $this->set('title_for_layout', 'Create Fields');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');
    $this->layout='home_layout';
    $this->set('id',$id);

    if(($this->Field->save($this->data)))
    {

    $id = $this->data['Field']['template_id'];

    $this->set('id',$id);
    $this->redirect(array('controller'=>'Fields', 'action'=>'view',$id));

    }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:30:02.920

您可能会在这里遇到问题：

```
function add_new($id=null){
    //allows users to add another field to an existing template
    $this->set('title_for_layout', 'Create Fields');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');
    $this->layout='home_layout'; 
```

检查 $name 是否不为空

```
$name = $this->Field->field('template_id', array('template_id'=>$id)); 
if(!empty($name)){
    $this->set('name',$name);
    if(($this->Field->save($this->data)))
    {   
        //user is redirected to fields/view/$name
        $this->redirect(array('controller'=>'Fields', 'action'=>'view',$name));
    }
} 
```

你的其余代码

```
//sets the $id variable
$this->set('id',$id); 
```

# iphone - 将 NSOperation 添加到 NSOperationQueue 时的 EXC_BAD_ACCESS

> ID：12580089
> 
> 赞同：0
> 
> 时间：2012-09-25T09:31:44.833
> 
> 标签：iphone, ios, multithreading, nsoperation, nsoperationqueue

我已经坐在这个错误上几个小时了。我得到一个 EXC_BAD_ACCESS (code=2) 就行了：

```
[self.downloadQueue addOperation:self.downloadOP]; 
```

我知道它必须与内存冲突有关，但我就是找不到问题所在。管理 OperationQueues 的类是单例，但我认为这不是问题。

这是我的 .h 文件的缩短版本：

```
@interface GTMConnectionManager : NSObject{
}

@property (retain) GTMDownloadOperation *downloadOP;
@property (retain) NSOperationQueue *downloadQueue;
// it doesn't make a difference if I add 'nonatomic' to these properties

+ (GTMConnectionManager *)sharedConnectionManager;
-(void)downloadImageData:(NSMutableArray*)p_images andController:(UIViewController*)p_resultsController;

@end 
```

.m 文件的重要部分：

```
#import "GTMConnectionManager.h"
@implementation GTMConnectionManager
@synthesize downloadOP, downloadQueue;

+ (GTMConnectionManager *)sharedConnectionManager
{
    static GTMConnectionManager * instance = nil;

    static dispatch_once_t predicate;
    dispatch_once(&predicate, ^{
        instance = [[super allocWithZone:nil] init];
    });
    return instance;
}

-(void)downloadImageData:(NSMutableArray*)p_images andController:(GTMResultsListViewController*)p_resultsController{

    self.resultsController = p_resultsController;

    [self.downloadQueue setMaxConcurrentOperationCount:2];
    self.downloadQueue = [[[NSOperationQueue alloc]init]autorelease];
    // it doesn't make a difference if I do this with or without 'autorelease'

    for (int i = 0; i < [p_images count]; i++) {
        GTMGeoImage *tmpImg = [p_images objectAtIndex:i];
        self.downloadOP = [[[GTMDownloadOperation alloc]initWithImage:tmpImg]autorelease];
        [self.downloadQueue addOperation:self.downloadOP]; //Here's the error
    }
} 
```

当我在错误行之前添加断点时，self.downloadQueue 和 self.downloadOP 都正确保留（不是 nil）。

奇怪的是：在这个类中，我有第二个 NSOperationQueue 和其他 NSOperations，它们的声明和处理方式与 downloadQueue 和 downloadOP 相同。他们完美地工作。

是的，GTMDownloadOperation 是 NSOperation 的子类，并且有一个 -(void)main 方法。

我不知道现在该怎么办。如果您不知道该错误的原因，我该如何更准确地分析情况？（产品 > 分析不会抱怨该位置的潜在泄漏）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:11:51.327

哦，伙计……这花了一段时间，但最后我知道问题出在 for 循环中。

该声明

```
self.downloadOP = [[[GTMDownloadOperation alloc]initWithImage:tmpImg]autorelease]; 
```

在每次迭代中一次又一次地访问变量 downloadOP。使用相同的 NSOperation 似乎会使它的 retainCount 崩溃。

我把它改成

```
GTMDownloadOperation *downloadOP = [[GTMDownloadOperation alloc]initWithImage:tmpImg]; 
```

它可以正常工作。傻我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-12T09:17:44.740

您没有在构造函数中调用 [super init] 吗？

假设您正在继承 NSOperation（或 NSObject 等），您可能应该这样做！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T11:48:28.087

我相信问题出在您的操作执行中。我建议两门课程：尝试创建一些简单的基于块的操作，这些操作只记录 hello world 并将它们添加到队列中。他们很可能会炒锅，让您知道队列正常工作。然后开始向您的子类添加日志消息，以查看哪些方法被调用并正确完成。

这应该会导致您遇到问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T09:50:04.130

为什么要重新分配并初始化队列？不能只为您的单身课程提供一个吗？

和...

```
[self.downloadQueue setMaxConcurrentOperationCount:2];
self.downloadQueue = [[[NSOperationQueue alloc]init]autorelease]; 
```

第一行在旧队列上执行，然后创建一个没有限制的新队列

你什么时候调用第二行（分配一个新队列）你释放旧的（如果有的话）

尝试这个：

```
if (!downloadQueue){
    self.downloadQueue = [[[NSOperationQueue alloc]init]autorelease];
}
[self.downloadQueue setMaxConcurrentOperationCount:2]; 
```

并记得添加：

```
self.downloadQueue = nil; 
```

在您的 dealloc 方法中（即使它是单例，并且在您的应用程序运行时不会被调用）

# php - 在 PHP 中缓存来自 MySQL 的数据？

> ID：12580091
> 
> 赞同：1
> 
> 时间：2012-09-25T09:31:53.990
> 
> 标签：php, mysql, arrays, caching

是否可以要求我的数据库中的所有数据并从中创建对象并将其保存到数组或其他东西中，所以我只需要调用数据库一次，然后我只使用我的本地数组？如果是，它是如何完成的？

```
public function getAllProjects(){

   $query="SELECT * FROM projects";
   $result=mysql_query($query);
   $num=mysql_numrows($result);
   while ($row = mysql_fetch_object($result)) {
      // save object into array
   }
}

public function fetchRow($row){
  include("Project.php");
  $project = new Project();

  $id=$row->id;
  $project->setId($id); 

  $title=$row->title;
  $project->setTitle($title);   

  $infos=$row->info;
  $project->setInfo($infos);

  $text=$row->text;
  $project->setText($text);

  $cate=$row->category;
  $project->setCategory($cate);

  return $project;
} 
```

如果我有例如这个代码。如何将对象正确存储到数组中，从中获取数据？为什么我不能制作多个“项目”类型的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:41:17.610

让我们忽略您将耗尽内存的事实。

如果您将所有内容都放在数组中，您将不再拥有关系数据库的功能。
尝试在 php 中搜索数兆字节的多维数组，并为延长的茶歇时间做好准备。如果您正在考虑这样做是因为您觉得数据库很慢......那么您应该了解数据规范化和正确使用索引。
没有 NoSQL 不是答案。
很抱歉弹出你的气球。

编辑添加：您可以使用 memcache 存储一些昂贵流程的最终产品。不必费心存储琐碎查询的结果，mysql 的内部缓存已针对这些进行了非常优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:39:53.523

您应该`$_SESSION`在 php 中使用 vars，要使用它们，`session_start()`请在代码的开头添加一个。然后你可以设置变量`$_SESSION['selectaname'] = yourvar`

没有什么能阻止您进行类似的 sql 查询`"SELECT username FROM users WHERE id = 1"`，然后设置`$_SESSION['user'] = $queryresult`

然后你会有这个：

```
echo $_SESSION['user'];

"mylogin" 
```

# ruby-on-rails - 了解 Ruby 环境（rvm、rails、gems 等）

> ID：12580098
> 
> 赞同：2
> 
> 时间：2012-09-25T09:32:09.717
> 
> 标签：ruby-on-rails, ruby, rubygems, rvm, uninstallation

我不是 Ruby 开发人员，但我需要在 Mac 上运行一个使用 Ruby on rails 和很多 gem 的应用程序。

在网上看了几个教程后，我发现我需要安装很多应用程序，比如 xCode、Passenger、RVM、ecc ......

一切都很好，但是如果有一天我决定卸载所有东西，只保留 Mac 中已经存在的 Ruby 默认安装，那该怎么办？

我在哪里可以本地化我使用下载的所有 gem `bundle install`？

使用终端并编写所有这些命令是一个干净的解决方案，或者它使我的系统“脏”和慢？

抱歉所有这些问题，但我想知道是否有“最佳实践”来安装这个环境，它是如何工作的，如果我决定有一天这样做的话，如何完全卸载它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:59:09.620

RVM 是您所需要的。所有事情都可以在命令行中完成，它会很干净，随时可以删除。

Xcode 不是必需的。但 brew 可能是。如果您有 brew，请先安装 apple-gcc42。带有 Xcode 4.2 及更高版本的 llvm-gcc 不能很好地编译 ruby​​。

然后安装rvm。按照rvm官方网站上的步骤很容易。安装好后，先试试`rvm requirements`。这个命令会告诉你构建 ruby​​ 需要什么。某些库可能不在机器上，例如 readline 等。

满足所有要求后，`rvm install 1.9.3`将在您的机器上安装 ruby​​ 1.9.3，这需要几分钟。您可以在`rvm list known`. 并将`rvm list`向您展示本地版本。

用于`rvm default some_version`设置默认值。这不会与系统安装有任何冲突。并将`rvm use some_version`ruby​​ 版本更改为特定版本。

默认情况下，所有已安装的 rvm 都将保留`~/.rvm/`，包括 gem。

应该不需要卸载 rvm。但是通过直接删除它很容易做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T09:50:30.127

RVM 将为您提供您想要的。它将保证系统 Ruby 的安全并安装本地化的 Ruby 和 ruby​​gems。从 rvm 您可以随时安装/卸载任何版本的 ruby​​，这不会影响系统 ruby​​。如果有一天你想删除除系统一以外的所有 ruby​​，首先使用 RVM 删除它们，然后删除 rvm 本身。

从这里安装 RVM：[https ://rvm.io/rvm/install/](https://rvm.io/rvm/install/)

安装 RVM 将安装 ruby​​ 一个 ruby​​。如果需要，您可以安装其他版本。如果你想删除你只需运行 `rvm remove ruby-1.9.3-p194`

您可以使用获得确切的 ruby​​ 版本`rvm list`

**本地化 gemset**

您将需要一个[.rvmrc](https://rvm.io/workflow/rvmrc/)文件。

要创建`.rvmrc`，请进入项目目录并运行以下命令： `rvm --create --rvmrc ruby-1.9.3-p194@myproject`

然后重新进入目录，它会要求你信任 .rvmrv 文件，你必须信任它。现在，如果您运行`bundle install`它，它将在您的 gemset 目录中安装本地化的 gemset（很可能在您的 ~ 路径中）。

注意：请确保`ruby-1.9.3-p194`与您在其中找到的名称完全匹配`rvm list`

# solr - solr中一个方面的多个范围

> ID：12580100
> 
> 赞同：1
> 
> 时间：2012-09-25T09:32:36.563
> 
> 标签：solr, lucene, facet

如何格式化 Solr 方面查询以包含两个页面查看范围？

以下将仅返回`200 TO 250`范围，而不返回范围中的任何内容`500 to 550`。

```
<str name="fq">pageviews:[200 TO 250] OR [500 TO 550]</str> 
```

我很想获得与页面浏览量在 200 到 250 之间以及在 500 到 550 之间的人匹配的记录数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T14:19:22.073

您也可以使用它，如下所示。

```
fq=pageviews:([200 TO 250] OR [500 TO 550]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-28T15:36:27.320

我相信这个问题的完整答案应该包括一种配置这些“重复”方面的所有参数的方法。这就是在 Solr 4.4.0 中使用 JSON 的方式。

```
"facet.range": [

    "{!key=twohundred " +
        "f.pageviews.facet.range.start=200 " +
        "f.pageviews.facet.range.end=250 " + 
        "f.pageviews.facet.range.gap=1 " +
    "}pageviews",

    "{!key=fivehundred " +
        "f.pageviews.facet.range.start=500 " +
        "f.pageviews.facet.range.end=550 " + 
        "f.pageviews.facet.range.gap=10 " +
    "}pageviews"

] 
```

（请注意，数组中的每个条目都应该是一个没有换行符的字符串，但为了清楚起见，在这里进行了划分。）

这样每个方面都可以单独标记、修改（我将间隙更改为“五百”），或者可以添加任何其他参数（如“facet.range.other”）。

来源：[https ://issues.apache.org/jira/browse/SOLR-1351](https://issues.apache.org/jira/browse/SOLR-1351?focusedCommentId=13633018&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-13633018)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T09:42:22.787

结果我每次都需要提到这个领域：

```
pageviews:[200 TO 250] OR pageviews:[500 TO 550] 
```

# oracle - 使用终止和可选封闭的分隔符时避免跳过空列

> ID：12580103
> 
> 赞同：1
> 
> 时间：2012-09-25T09:32:39.927
> 
> 标签：oracle, null, sql-loader

我定期使用 SQL Loader 上传各种制表符分隔的文本数据文件。控制文件总是指定`TERMINATED BY X'09'`. 这些数据文件中的某些“单元格”可能为空，即两个后续选项卡之间没有字符。它总是像时钟一样工作。

现在，我遇到了一个特殊情况，我必须去掉可能包含或不包含实际数据的双引号数据列（从 Excel 导出文本的副作用）。

我尝试简单地`OPTIONALLY ENCLOSED BY '"'`在终止的分隔符后面添加，它确实适用于有问题的文件和列。尽管如此，使用这个新选项，具有空值的文件不再被正确解码。加载程序似乎只是跳过了这些值，这会引发列移位并导致加载损坏或加载失败。

目前，我有一个解决方法，删除新选项并执行 SQL 脚本，直接在数据库中消除双引号，但这显然不能持久。

有任何想法吗？

# javascript - 如何在手机上上传文件

> ID：12580112
> 
> 赞同：0
> 
> 时间：2012-09-25T09:33:06.857
> 
> 标签：javascript, html, cordova, upload

我正在使用 Html5 和 Javascript 开发一个 phonegap 项目。我希望用户上传文件。当我添加这个：

```
 <input id="image-file" type="file" /> 
```

它可以在网络浏览器上运行，但是当我在移动设备上打开它时，它已被禁用。

有没有办法用手机上传文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:34:51.360

您需要与特定平台的本机库交谈。

例如，对于 iOS，您需要访问相册才能上传照片。这需要使用 phonegap 中的 API 来与 iOS 原生库通信。

每个操作系统都有一个特定的 API 来执行此操作。我不太喜欢phonegap，但我知道它就在那里。甚至可能为所有操作系统提供 1 个 API

# css - CSS 技巧 extJS 4

> ID：12580113
> 
> 赞同：1
> 
> 时间：2012-09-25T09:33:10.397
> 
> 标签：css, extjs, extjs4

我想在我的 web 应用程序中实现提示，但我不希望它们像 sencha 示例那样位于底部。我更喜欢将它们放在顶部并居中。

所以我在我的提示中删除了目标 conf 并尝试添加一些我自己的 css。我的背景自定义 css 完美，但左/顶部 css 被 ext 覆盖。

如何阻止 Extjs css 覆盖我自己的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:38:47.920

只需添加 !Important，在您的 CSS 样式之后。

例如：

```
 #example {    
                position: absolute !important;
             } 
```

# android - 我的 SIP PBX 如何接听手机来电？

> ID：12580116
> 
> 赞同：1
> 
> 时间：2012-09-25T09:33:21.277
> 
> 标签：android, sip, trunk

我的`Android (4.0.4)`手机是我的快乐`SIP`客户`(Asterisk) PBX`。

我现在正在寻找相反的东西，让我的手机成为一个`SIP trunk`。

想要这个的原因是我希望能够通过我的`PBX`.

当我的手机充电时，我经常听不到它，因为我在办公室或家里的其他地方。

如果它可以同时注册为我的 PBX 的客户端和中继，那么来电可以被 PBX 接管，并在此时无论我在哪里给我响铃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:11:56.210

似乎是个好主意，但不确定是否可能

我的建议是使用矩阵、goip 等 gsm 网关。它将在 astrisk 中注册为 sip 中继以接收来自 sim 卡的呼叫

# android - 不同分辨率的Android布局

> ID：12580130
> 
> 赞同：1
> 
> 时间：2012-09-25T09:34:24.600
> 
> 标签：android, android-layout

我希望为各种屏幕分辨率创建各种布局，例如`hdpi, xhdpi`等。

[我在这里](http://developer.android.com/guide/practices/screens_support.html)读到了我该怎么做。

所以我在我的目录中创建了两个目录，`layout-xlarge`并将布局放在那里。`layout-large``res``xml`

我知道是手机的`hdpi`手机崩溃了，说找不到资源目录。

我究竟做错了什么。我的手机是`Samsung Nexus s`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:41:59.560

在清单中使用此代码：

```
 <supports-screens android:resizeable="true"
              android:smallScreens="true"
              android:normalScreens="true"
              android:largeScreens="true"
              android:xlargeScreens="true"
              android:anyDensity="true"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:27:00.193

对于您的 Samsung Nexus S 手机，`layout`将使用该文件夹。

# c# - Unity：如何为更常见的类型注册类？

> ID：12580134
> 
> 赞同：0
> 
> 时间：2012-09-25T09:34:37.017
> 
> 标签：c#, .net, dependency-injection, unity-container

我有以下问题：

我在第一个程序集中有一些类和接口：

```
public interface IA {}
public interface IB : IA {}
internal class C : IB {} 
```

并且类 C 在此程序集中的 Unity 容器中注册。

```
Container.RegisterType<IB, C>(); 
```

现在我想注册类似的东西

```
Container.RegisterType<IA, C>(); 
```

在另一个程序集中，但 C 类不可访问。和

```
Container.RegisterType<IA, IB>(); 
```

不起作用，因为 IB 是接口。如何将基本接口 IA 与已注册的 IB 链接？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:48:15.963

您根本无法在另一个库中使用内部类型，但您可以解析**IB**，这样：

```
Container.RegisterType<IA>(new InjectionFactory(x=>x.Resolve<IB>())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:40:56.403

您基本上是在尝试使用标记为内部的实现，来自另一个程序集，这是行不通的。如果您想在其他地方使用它，您需要取消内部资格。

# javascript - 调用 Ext.menu.Menu 实例时获取 ExtJS 选择对象

> ID：12580135
> 
> 赞同：2
> 
> 时间：2012-09-25T09:34:39.810
> 
> 标签：javascript, dom, extjs, selection

我目前在调用 Ext.menu.Menu 实例时尝试从 DOM 获取当前选定的文本时遇到问题。这里有一个简化的例子。

1.  从包含以下 EXTJ 示例的标准 HTML 页面中选择并突出显示文本
2.  右键单击以调用内容菜单
3.  选择可从绑定到上下文菜单的事件侦听器中使用，但在从上下文菜单中输入或选择选项时不可用。

注意：由于控制台对象，示例目前在 Chrome 和 Firefox 中有效

```
Ext.onReady(function() {
    // Context Menu
    var menu = Ext.create('Ext.menu.Menu', {
    items : [{
        text : 'Copy',
        handler : function() {
        // Selection is not available here
        console.log("On Context menu item:" + window.getSelection().toString());

        }
    }],
    listeners : {
        mouseenter : function() {
        // Selection is not available here
        console.log("Enter menu render: " + window.getSelection().toString());
        },
        activate : function () {
        // Selection is still available
        console.log("Activate Context menu render:" + window.getSelection().toString());
        }
    }
    });

    // Bind to contextmenu event listener 
    Ext.getDoc().on('contextmenu', function(ev) {
    menu.showAt(ev.getXY());
    ev.stopEvent();
    // Selection is available
    console.log("On Context menu :" + window.getSelection().toString());
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T19:47:11.297

单击上下文菜单时选择不可用，因为右键单击后，选择被清除。当您左键单击菜单项时，没有选择任何内容。看看这个[小提琴](http://jsfiddle.net/Litote0707/bRTeh/)。您可以看到右键单击后立即清除选择。

[正如this answer](https://stackoverflow.com/a/1592906/640030)中所建议的那样，您可能需要变得更加花哨并进行保存/恢复之类的事情。

有关解决方案的示例，请参见[this fiddle 。](http://jsfiddle.net/Litote0707/bRTeh/1/)

# java - 在启用无值键的情况下解析 Java 中的键=值对

> ID：12580140
> 
> 赞同：0
> 
> 时间：2012-09-25T09:34:58.850
> 
> 标签：java, regex

从以下格式的字符串中解析键值对的正则表达式是什么：

```
A=B,C,D=E,G=12 
```

我的第一种方法是用逗号分隔，然后一个一个地处理结果，只是想知道是否可以使用正则表达式更优雅地做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:42:12.660

1.  用逗号标记/分解。
2.  然后在'='上爆炸碎片

不需要正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:57:55.463

我想你可以做这样的事情

```
 String sw= "A=B,C,D=E,G=12";
    String[] sArr = sw.split(",");
    for(int i=0; i<sArr.length; i++) {
        String[] arr = sArr[i].split("=");
        if(arr.length>1) {
        for(int j=0; j<arr.length; j++) {
            System.out.println(arr[j]);
        }
        }
    } 
```

# javascript - Node.js 服务器 - 没有缓存并且无法访问 chrome 上的图像属性

> ID：12580143
> 
> 赞同：0
> 
> 时间：2012-09-25T09:35:12.570
> 
> 标签：javascript, node.js, caching

我刚开始使用 node，我想用 socket IO 构建一个单页 web 应用程序。我构建了一个简单的服务器代码：

```
http.createServer(function(req, res) {

    //Requested url split.
    var pathname = url.parse(req.url).pathname;
    var extension = path.extname(pathname).toLowerCase();

     console.log(pathname + " " + extension);

    if(extension == ".png"){
        res.writeHead(200, {
            'Content-Type': 'image/png'
        });  
   }
} 
```

我像这样提供所有文件，还有其他“else if”案例用于提供 html、css 和 js 文件......

使用 Mozilla 一切正常。使用 Chrome，我遇到了两个问题：

没有缓存 -> 每次我在客户端 js 代码中使用它们时都请求相同的图像，即使我使用 Image() 对象进行了一些预加载。无法访问加载的图像属性 -> 我无法获取 image.width() 或高度（返回 0）。在 Firefox 缓存工作上，我可以获得图像属性。

使用 apache 服务器在两种浏览器上一切正常。

我完全被卡住了，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:45:48.090

关于缓存，请尝试在代码中为静态文件显式设置缓存标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:10:47.033

```
res.writeHead(200, {
    "Cache-Control" : "max-age=86400",
    'Content-Type': contentType
}); 
```

问题已解决（两者）！但这是否意味着如果用户禁用他的缓存，他会向我的服务器发送大量文件请求？

除了缓存之外，还有什么方法可以在本地存储文件吗？就像将图像存储在 JS 变量中一样？

或者其他实现这一目标的方法？

# html - 隐藏/加密 HTML 中的隐藏表单

> ID：12580153
> 
> 赞同：-1
> 
> 时间：2012-09-25T09:35:36.697
> 
> 标签：html, security

我创建了隐藏表单，它将包含隐藏输入和 javascript 提交。但是在提交表单时，用户可以查看页面的来源并知道它的所有值。如何隐藏此表单或对其进行加密，以使用户甚至无法知道来自 html 源的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:38:20.867

您*可以*加密服务器上的数据（使用标准强加密）并将结果存储在表单中。

然而，标准做法是首先不向客户提供敏感数据。将数据存储在服务器上，将其与令牌相关联，然后将该令牌提供给客户端。

会话是执行此操作的标准方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T09:37:32.850

如果此信息很敏感，请不要将其发布在页面上。

将数据保存在服务器上，并有一个令牌将请求与它关联起来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T09:40:18.137

你不能。也许您可以对普通用户隐藏一些东西，但如果有足够的技能数据可供用户使用，则用户可以读取/操作。正确的做法是将数据存储在服务器上并将其与用户相关联。

例如，您可以查看[PHP 会话](http://php.net/manual/en/book.session.php)。

# mysql - Solr DataImport 中的汉字问题

> ID：12580155
> 
> 赞同：0
> 
> 时间：2012-09-25T09:35:38.640
> 
> 标签：mysql, jdbc, utf-8, solr, jetty

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:11:15.293

所以我最后不得不改变我的 MySQL 表来以 UTF8 存储字符串。[可以在此处](http://en.gentoo-wiki.com/wiki/Convert_latin1_to_UTF-8_in_MySQL)找到如何将现有表从 latin1 转换为 utf8 的详细信息。

# ios - 自动检测时间

> ID：12580157
> 
> 赞同：3
> 
> 时间：2012-09-25T09:35:49.517
> 
> 标签：ios, xcode, cocoa

我正在编写每日待办事项列表应用程序，并希望该应用程序在每一天都更新某些元素。如果用户有一天关闭应用程序然后在下一次重新打开它，这不是问题——我只是比较启动方法中的天数。

但是，如果用户恰好在午夜使用该应用程序，这将是一个问题。午夜时分，日常任务元素需要为新的一天自动重置。

这是我的问题——我可以在后台运行一个恒定线程，始终访问 [NSDate date] 并检查新的一天。但我觉得必须有更好的方法，特别是因为这每天只需要发生一次（然后，只有当用户在午夜使用该应用程序时）。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:39:46.270

在`applicationDidFinishLaunching:`和`applicationWillEnterForeground:`中，设置一个`NSTimer`计划在午夜触发。此外，注册`UIApplicationSignificantTimeChangeNotification`以重新安排计时器以更改时区等。

# objective-c - NSString 到 NSDate 的转换问题

> ID：12580162
> 
> 赞同：0
> 
> 时间：2012-09-25T09:36:06.603
> 
> 标签：objective-c, nsstring, nsdate

我有`Date is 2012-09-25 09:33:10 +0000`，使用

```
 [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
  NSDate *d = [dateFormatter dateFromString:sDate]; 
```

// sDate = @"2012-September-21"

但我得到 nil ，而不是格式化日期。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:39:09.483

**由于您的 sDate = @"2012-September-21"，它在您的字符串sDate**中没有时间（小时分钟和秒）。所以你应该像这样设置你的格式

```
[dateFormatter setDateFormat:@"yyyy-MM-dd"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:44:19.110

您没有将时间包含在字符串中。您还需要修复语言环境：

```
[dateFormatter setDateFormat:@"yyyy-MM-dd"];
[dateFormatter setLocale:[NSLocale localeWithLocaleIdentifier:@"en_US"]];
[dateFormatter dateFromString:@"2012-September-21"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:49:14.300

从您的问题来看，尚不清楚输入是什么，但我已经用下面给定的输入进行了测试，它正在工作

```
NSString *dateString = @"2012-09-25 09:33:10";
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init]   autorelease];
dateFormatter.dateFormat = @"yyyy-MM-dd HH:mm:ss";
NSDate *date = [dateFormatter dateFromString:dateString]; 
```

# c# - 为什么 .* 无法匹配此正则表达式中的整个（其余）字符串？

> ID：12580163
> 
> 赞同：2
> 
> 时间：2012-09-25T09:36:09.077
> 
> 标签：c#, regex

我的正则表达式遇到了问题，我正在使用正则表达式从下面的字符串中获取数据：

```
 "# DO NOT EDIT THIS MAIL BY HAND #\r\n\r\n[Feedback]:hallo\r\n\r\n# DO NOT EDIT THIS MAIL BY HAND #\r\n\r\n" 
```

到目前为止，我得到了它的工作：

```
String sFeedback = Regex.Match(Message, @"\[Feedback\]\:(?<string>.*?)\r\n\r\t\n# DO NOT EDIT THIS MAIL BY HAND #").Groups[1].Value; 
```

除非标头更改，否则此方法有效，因此我希望正则表达式从`[feedback]:`字符串的末尾读取。（符号，ascii，一切..）

我试过：`\[Feedback]:(?<string>.*?)$`

上面的正则表达式在某些在线正则表达式生成器中确实有效，但在我的 c# 代码中它不起作用并返回一个空字符串。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:45:52.880

问题是它`.`不匹配换行符，除非您`RegexOptions.Singleline`在编译正则表达式时使用或使用以下方法内联它 `(?s)`：

```
(?s)\[Feedback\]:(.*)$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:45:01.383

您缺少转义字符。

此外，由于您没有在 C# 代码中按名称引用组，因此您可以进一步简化您的正则表达式

```
\[Feedback\]:(.*)$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:45:05.660

`$`在正则表达式中意味着：

> 匹配必须出现在字符串`\n`的末尾或行或字符串的末尾之前。

并且`.`意味着：

> 匹配除 之外的任何单个字符`\n`。

尝试使用这个简单的正则表达式：

```
\[Feedback\]:(?<string>.*) 
```

# linux - What happens when php fpm process crashes?

> ID：12580164
> 
> 赞同：0
> 
> 时间：2012-09-25T09:36:10.097
> 
> 标签：linux, nginx, php

For example I import a csv file for some reason the process crashes, in this case the process is restarted so I want to know the restarted process will again import the file?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:02:15.770

由于进程崩溃，您将需要重新开始导入。在导入过程中可能只导入了有限数量的数据，因此您还需要检查这种情况。

# ios - 如何为 iOS 开发安装证书？

> ID：12580165
> 
> 赞同：-1
> 
> 时间：2012-09-25T09:36:11.450
> 
> 标签：ios, xcode

我一直无法通过 Xcode 自动下载证书，需要自己安装证书。我已经下载了**ios_development.cer**文件。我找不到任何关于如何安装证书的简单文档。谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:43:21.983

观看以下教程，这将对您有所帮助。 [http://www.youtube.com/watch?feature=player_embedded&v=dUdHifLTyrE](http://www.youtube.com/watch?feature=player_embedded&v=dUdHifLTyrE)

# machine-learning - How to prove the convergence of EM?

> ID：12580168
> 
> 赞同：1
> 
> 时间：2012-09-25T09:36:26.960
> 
> 标签：machine-learning, statistics, nlp, expectation-maximization

Can you anybody explain how to prove the convergence of the Expectation Maximization algorithm?

For example EM for coins problems: [https://math.stackexchange.com/questions/25111/how-does-expectation-maximization-work](https://math.stackexchange.com/questions/25111/how-does-expectation-maximization-work)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:31:19.443

EM算法进行最大似然估计。如果您查看对数似然性，则 E 和 M 步总是最大化它是不正确的。但是，如果您查看负自由能函数，则它们都始终将其最大化，尽管相对于不同的事物（有点像坐标下降）。所以是的，EM 算法总是会收敛，即使它可能会收敛到坏的局部极值，这是一个不同的问题。
查看经典论文[www.cs.toronto.edu/~radford/ftp/emk.pdf](http://www.cs.toronto.edu/~radford/ftp/emk.pdf)以了解更多信息。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-25T09:41:38.297

EM 算法并不总是收敛。所以你的问题的细节很重要。

# php - Convert string to integer and multiply two integers

> ID：12580170
> 
> 赞同：2
> 
> 时间：2012-09-25T09:36:29.177
> 
> 标签：php, string, int, woocommerce

I have a big time trying to either convert a string into a integer or multiply two integers. I can't convert the string into integer because it's resulting me into a boolean (when I'm using var_dump). I can convert the other integer in string, but I'm unable to multiply it.

I have this:

```
 <? $fees=$commerce->cart->get_total(); 
    $payfee = str_replace('&nbsp;&euro;', '', $fees);
    $payfee = str_replace(',','', $payfee);  //this is the string
    $fee = 0.025;
    $paypal = $payfee * $fee;  //this thing is not working

    ?> 
```

I tried converting the payfee in integer, but still can't make it work. I did something like this before and worked well, but not this time.

Any help will be appreciated.

P.S Thank you to the whole stackoverflow.com community which helped me many times before.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T10:56:48.727

> OP 正在运行 WooCommerce，他的`$commerce->cart->get_total();` 函数响应输出，例如`<span class="amount">560&nbsp;&euro;</span>`(560 €)，他询问如何将其转换为数字，以便从金额中收取费用 (2.5 %)。

首先，这里的问题是该`get_total()`函数以字符串响应。

修复此字符串的正确方法是一个简单的示例，例如

```
<?php
    $totalAmountString = $commerce->cart->get_total(); //<span class="amount">560&nbsp;&euro;</span>
    $totalAmountString = strip_tags($totalAmountString); //get rid of the span - we're left with "560&nbsp;&euro;"
    $totalAmountString = str_replace(array("&nbsp;&euro;", ","), "", $totalAmountString);
    $totalAmountFloat = (float)$totalAmountString;
    $fee = 0.025;
    $feeForThisAmount = $totalAmountFloat * $fee;
    var_dump($feeForThisAmount);

    $totalAmountWithFee = $totalAmountFloat + $feeForThisAmount;
    var_dump($totalAmountWithFee);
?> 
```

但是，根据[Woo Commerce API 文档](http://wcdocs.woothemes.com/apidocs/class-WC_Cart.html#%24total)，您应该能够使用它`$commerce->cart->total`来获取数字的浮点数，因此也*可能*有效的解决方案（同样，我对 WooCommerce 一无所知）如下：

```
<?php
    $totalAmountFloat = $commerce->cart->total;
    $fee = 0.025;
    $feeForThisAmount = $totalAmountFloat * $fee;
    var_dump($feeForThisAmount);

    $totalAmountWithFee = $totalAmountFloat + $feeForThisAmount;
    var_dump($totalAmountWithFee);
?> 
```

***编辑***

根据您最新的数据转储，问题是您正在使用

```
$paypal_fees=$woocommerce->cart->get_total() * 0.025; 
```

你应该在哪里使用

```
$paypal_fees=$woocommerce->cart->total * 0.025; 
```

as`->get_total()`接收一个字符串，并`->total`接收一个浮点数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T09:37:37.083

尝试这个

```
$integer =(int)$string; 
```

[活生生的例子](http://codepad.org/sroEAGCO)

使用 var_dump() 是正确的

![在此处输入图像描述](../Images/d6aaa739b25b0cea94e3e7b949084461.png)

[检查这个链接](http://codepad.org/pYJf3Teu)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T09:39:10.250

使用 intval() 函数将字符串转换为整数

[间隔](http://php.net/manual/en/function.intval.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T09:41:45.427

使用类型转换，如

```
$integer = (int)$myString; 
```

然后你可以将它转换为整数，它变得很容易相乘

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-07T16:10:04.540

从你小学技术的算法张贴[在这里](https://os-concept.blogspot.com/2018/12/multiply-two-integers-represented-by.html)。在这种情况下，您不需要将字符串转换为整数

# windows - Why initialize an object to empty

> ID：12580171
> 
> 赞同：3
> 
> 时间：2012-09-25T09:36:30.697
> 
> 标签：windows, winapi, visual-c++

I am learning windows programming with the help of MSDN.Why would somebody initialize an object like the following?

```
WNDCLASS wc = { }; 
```

Will this zero all the memory of the object? Whole source code is following:

```
#ifndef UNICODE
#define UNICODE
#endif 

#include <windows.h>

LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam);

int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE, PWSTR pCmdLine, int nCmdShow)
{
    // Register the window class.
    const wchar_t CLASS_NAME[]  = L"Sample Window Class";
    WNDCLASS wc = { };

    wc.lpfnWndProc   = WindowProc;
    wc.hInstance     = hInstance;
    wc.lpszClassName = CLASS_NAME;

    RegisterClass(&wc);

    // Create the window.

    HWND hwnd = CreateWindowEx(
        0,                              // Optional window styles.
        CLASS_NAME,                     // Window class
        L"Learn to Program Windows",    // Window text
        WS_OVERLAPPEDWINDOW,            // Window style

        // Size and position
        CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,

        NULL,       // Parent window    
        NULL,       // Menu
        hInstance,  // Instance handle
        NULL        // Additional application data
        );

    if (hwnd == NULL)
    {
        return 0;
    }

    ShowWindow(hwnd, nCmdShow);

    // Run the message loop.

    MSG msg = { };
    while (GetMessage(&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return 0;
}

LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    switch (uMsg)
    {
    case WM_DESTROY:
        PostQuitMessage(0);
        return 0;

    case WM_PAINT:
        {
            PAINTSTRUCT ps;
            HDC hdc = BeginPaint(hwnd, &ps);

            FillRect(hdc, &ps.rcPaint, (HBRUSH) (COLOR_WINDOW+1));

            EndPaint(hwnd, &ps);
        }
        return 0;

    }
    return DefWindowProc(hwnd, uMsg, wParam, lParam);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:38:42.040

大概是为了利用自动初始化。

**参考：**

**C++03 标准 8.5.1 聚合**
**第 7 段：**

> 如果列表中的初始化器少于聚合中的成员，则每个未显式初始化的成员都应进行**值初始化**（8.5）。[例子：
> 
> ```
>  struct S { int a; char* b; int c; };
>  S ss = { 1, "asdf" }; 
> ```
> 
> `ss.a`使用、 和形式的表达式的值进行初始化`1`，即. ]`ss.b``"asdf"``ss.c``int()``0`

虽然值初始化在
**C++03 8.5 Initializers**
**Para 5 中定义：**

> 对T 类型的对象进行**值初始化**意味着：
> — 如果 T 是具有用户声明的构造函数（12.1）的类类型（第 9 条），则调用 T 的默认构造函数（如果 T没有可访问的默认构造函数）；
> — 如果 T 是没有用户声明的构造函数的非联合类类型，则 T 的每个非静态数据成员和基类组件都是值初始化的；
> — 如果 T 是一个数组类型，那么每个元素都是值初始化的；
> — 否则，对象被零初始化

# linq - LINQ Query using UDF that receives parameters from the query

> ID：12580172
> 
> 赞同：0
> 
> 时间：2012-09-25T09:36:30.853
> 
> 标签：linq, parameter-passing, user-defined-functions

I need help using a UDF in a LINQ which calculates a users position from a fixed point.

```
int pointX = 567, int pointY = 534; // random points on a square grid
var q = from n in _context.Users 
join m in _context.GetUserDistance(n.posY, n.posY, pointX, pointY, n.UserId) on n.UserId equals m.UserId
select new User() {
  PosX = n.PosX,
  PosY = n.PosY,
  Distance = m.Distance,        
  Name = n.Name,
  UserId = n.UserId
}; 
```

The GetUserDistance is just a UDF that returns a single row in a TVP with that users distance from the points deisgnated in pointX and pointY variables, and the designer generates the following for it:

```
[global::System.Data.Linq.Mapping.FunctionAttribute(Name="dbo.GetUserDistance", IsComposable=true)]
public IQueryable<GetUserDistanceResult> GetUserDistance([global::System.Data.Linq.Mapping.ParameterAttribute(Name="X1", DbType="Int")] System.Nullable<int> x1, [global::System.Data.Linq.Mapping.ParameterAttribute(Name="X2", DbType="Int")] System.Nullable<int> x2, [global::System.Data.Linq.Mapping.ParameterAttribute(Name="Y1", DbType="Int")] System.Nullable<int> y1, [global::System.Data.Linq.Mapping.ParameterAttribute(Name="Y2", DbType="Int")] System.Nullable<int> y2, [global::System.Data.Linq.Mapping.ParameterAttribute(Name="UserId", DbType="Int")] System.Nullable<int> userId)
{
    return this.CreateMethodCallQuery<GetUserDistanceResult>(this, ((MethodInfo)(MethodInfo.GetCurrentMethod())), x1, x2, y1, y2, userId);
} 
```

when i try to compile i get

```
The name 'n' does not exist in the current context 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:44:38.150

我认为你不需要加入，试试这个：

```
int pointX = 567, int pointY = 534; // random points on a square grid
var q = from n in _context.Users 
let m = _context.GetUserDistance(n.posY, n.posY, pointX, pointY, n.UserId).Single()
select new User() {
    PosX = n.PosX,
    PosY = n.PosY,
    Distance = m.Distance,        
    Name = n.Name,
    UserId = n.UserId
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:41:00.450

这不是一个真正的 UDF 问题 - 这是一个 LINQ 问题。您不能在`join`子句的源部分中使用现有的范围变量，所以这同样是错误的：

```
string[] files = ...;
var query = from file in files
            join line in File.ReadAllLines(file) on file equals line
            ... 
```

我怀疑您需要将其编写为多个`from`子句：

```
var q = from n in _context.Users 
        from m in _context.GetUserDistance(n.posY, n.posY, pointX, pointY, n.UserId)
        where n.UserId == m.UserId
        ... 
```

尽管完全需要加入似乎有点奇怪，但当我希望*结果*只`GetUserDistance`适用于该用户时，对吧？这可能更清楚：

```
var q = from n in _context.Users 
        let m = _context.GetUserDistance(n.posY, n.posY, pointX, pointY, n.UserId)
                        .Single()
        ... 
```

# lisp - "A micro-manual for Scheme"?

> ID：12580176
> 
> 赞同：0
> 
> 时间：2012-09-25T09:36:45.657
> 
> 标签：lisp, scheme

Given that LISP apparently can be expressed in "10 rules" of "A micro-manual for LISP" [[1]](https://docs.google.com/file/d/0B0ZnV_0C-Q7IOTRkNzVjZjMtMWE1NC00YzQ3LTgzMWEtM2UwY2I1YzdmNmM5/edit?hl=en)[[2]](http://www.scribd.com/doc/35653787/Untitled?secret_password=12o8ou3kcax00s47xv3y#full) (is this true?), is there a similarly succinct description of Scheme?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:50:56.363

McCarthy 的“10 条规则”本质上是操作语义的早期形式。该文档来自 1978 年，是在第一份 Scheme 报告之后 3 年编写的，其中 Abelson & Steele 提取了 LISP 的简单部分来创建 Scheme。Scheme 和 LISP 都是移动目标，因此您必须通过说“这与当时的方案相匹配”来限定*比较*。我声称你可以认为这本微手册同样适用于 Scheme 和 LISP。

FWIW，麦卡锡的函数评估规则（如下）使用短语“在原始环境中”，这似乎需要避免捕获的替换，因此需要词法范围。

> “9\. *value ((LAMBDA (v [1] ... v [n] ) e) e [1] ... e [n] )与**value e*相同，但在变量*v [1] ... v [n]*取值的环境中**原始环境**中的表达式*e [1] ... e [1]* 。” [强调我的]

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:56:29.980

我认为，在 43 页，Scheme 的最佳简洁描述是[原始的。](http://repository.readscheme.org/ftp/papers/ai-lab-pubs/AIM-349.pdf)但是，话又说回来，我是一名 Common Lisp 程序员。**

# iphone - 如何将声音与其自身重叠？

> ID：12580177
> 
> 赞同：1
> 
> 时间：2012-09-25T09:36:54.323
> 
> 标签：iphone, objective-c, audio, avaudioplayer

我是 Xcode 中声音的新手，我希望反复播放声音，无论它是否已经在播放。例如。我有三个正在发射的激光，我希望同时播放三个激光声，而不是等待每个激光声都播放完。我如何使用 实现这一目标`AVAudioPlayer`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:59:19.010

做这个：

```
AVAudioPlayer *laserSound1  = .........
laserSound1.numberOfLoops = 2; //plays three times simultaneously
[laserSound1 play];

 AVAudioPlayer *laserSound2  = .........
laserSound2.numberOfLoops = 2;//plays three times simultaneously
[laserSound2 play];

AVAudioPlayer *laserSound3  = .........
laserSound3.numberOfLoops = 2;//plays three times simultaneously
[laserSound3 play]; 
```

# php - php文件上传类型

> ID：12580181
> 
> 赞同：1
> 
> 时间：2012-09-25T09:37:17.483
> 
> 标签：php, file-upload

我正在尝试从 HTML 表单上传一个 zip 文件和一个 csv 文件。

在 PHP 上，当我打印 $_FILES（实际上是 symfony 中的 $request->getFiles()）时，我得到了关注。

```
Array
(
    [zipfile] => Array
        (
            [name] => tempfiles.zip
            [type] => application/octet-stream
            [tmp_name] => C:\wamp\tmp\php5D42.tmp
            [error] => 0
            [size] => 850953
        )
    [csvfile] => Array
        (
            [name] => test.csv
            [type] => application/vnd.ms-excel
            [tmp_name] => C:\wamp\tmp\php5D52.tmp
            [error] => 0
            [size] => 312
        )
) 
```

我想知道`type`and `tmp_name`。我需要根据类型做出一些决定。对现有类型做出决定是否安全？对于 Linux 服务器上的类似文件，我会得到相同的结果吗？

再次`tmp_name`有`.tmp`扩展。它在 Windows/Linux 上是否一致？如果没有，有什么方法可以让我在 Windows 上编写的代码（使用决定`type`）在 linux 上运行没有任何问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:47:34.103

使用它`type`可能很危险，因为用户可以更改文件的类型并可以上传 php 脚本。

您应该`type`像[get_image_size()](http://php.net/manual/en/function.getimagesize.php)一样验证第一个来验证图像文件。我不知道 .zip 文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T09:42:57.530

`type`信任表单是不安全的`$_FILES`，您需要在服务器端验证文件类型。

对于`.tmp`扩展，在 windows 或 linux 上都可以。

# shared-libraries - 如何将共享库搜索路径添加到可执行文件？

> ID：12580184
> 
> 赞同：13
> 
> 时间：2012-09-25T09:37:21.780
> 
> 标签：shared-libraries, ld, ldd

我用 librtmp 构建了 ffmpeg。我的 librtmp 位于 /opt/librtmp/lib。当我执行ffmpeg时，它说：

```
./ffmpeg: error while loading shared libraries: librtmp.so.0: cannot open shared object file: No such file or directory 
```

我使用 ldd 命令显示**未找到**：

```
[qty@testing bin]# ldd ffmpeg 
        linux-vdso.so.1 =>  (0x00007fff15576000)
        librtmp.so.0 => not found
        libz.so.1 => /lib64/libz.so.1 (0x00002b9a71e10000)
        libm.so.6 => /lib64/libm.so.6 (0x00002b9a72025000)
        libpthread.so.0 => /lib64/libpthread.so.0 (0x00002b9a722a8000)
        libc.so.6 => /lib64/libc.so.6 (0x00002b9a724c3000)
        /lib64/ld-linux-x86-64.so.2 (0x00002b9a71bf2000) 
```

我知道我是这样的：

```
[qty@testing bin]# ls -alh  /opt/librtmp/lib/
total 300K
drwxr-xr-x 3 root root 4.0K Sep 25 17:10 .
drwxr-xr-x 7 root root 4.0K Sep 25 17:10 ..
-rw-r--r-- 1 root root 158K Sep 25 17:10 librtmp.a
lrwxrwxrwx 1 root root   12 Sep 25 17:10 librtmp.so -> librtmp.so.0
-rwxr-xr-x 1 root root 118K Sep 25 17:10 librtmp.so.0
drwxr-xr-x 2 root root 4.0K Sep 25 17:10 pkgconfig 
```

我找到了几种解决问题的方法

*   修改/etc/ld.so.conf，但需要超级用户
*   设置 LD_LIBRARY_PATH 变量，但对用户不方便
*   像这样将 rpath 传递给 gcc

**为我的 ffmpeg 配置参数**

```
PKG_CONFIG_PATH="/opt/librtmp/lib/pkgconfig" ./configure --disable-doc \
--disable-ffserver --disable-avdevice \
--disable-postproc --disable-avfilter --disable-bsfs \
--disable-filters \
--disable-asm \
--disable-bzlib \
--enable-librtmp \
--prefix=/opt/ffmpeg \
--extra-ldflags="-Wl,-rpath,/opt/librtmp/lib" 
```

假设没有源代码要重新编译？如何将共享库搜索路径添加到可执行文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-15T10:15:28.003

我意识到 OP 可能已经继续前进，但这是 NixOS 经常做的事情，他们已经为这个问题发布了一个工具。这也是我在听说 NixOS 之前遇到的一个问题。

这是他们工具的示例用法`patchelf`

...同样，您可以更改 RPATH，即嵌入到可执行文件和动态库中的链接器搜索路径：

```
patchelf --set-rpath /opt/my-libs/lib:/foo/lib program 
```

这会导致动态链接器搜索`/opt/my-libs/lib`程序`/foo/lib`所需的共享库...。

来自[https://nixos.org/patchelf.html](https://nixos.org/patchelf.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T00:51:08.840

您可以使用[addrpath](http://quatramaran.ens.fr/~godfroy/clipper/addrpathen.html)将 RPATH 添加到您的 elf 文件中。

RPATH 将像 LD_LIBRARY_PATH 一样工作，即告诉动态加载程序在该路径中搜索共享库。RPATH 将永久保存在您的 ELF 文件中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-27T15:44:44.657

# 尼克斯

这**可能是 nixos 特定**的，但提供了关于 ldd/patchelf 的有趣见解：

[https://lastlog.de/blog/posts/playing_FTL_on_NIXOS.html](https://lastlog.de/blog/posts/playing_FTL_on_NIXOS.html)

# ubuntu

在 ubuntu/fedora 上，您将使用：`LD_LIBRARY_PATH`使用启动脚本`./ftl`，再次，请参阅我上面关于 FTL 及其部署方式的帖子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-31T09:44:33.200

我对这个问题的解决方法是将 librtmp 安装到 /usr/local/lib 并在安装后运行“sudo ldconfig”。然后可以通过添加 --enable-librtmp 来简单地配置 Ffmpeg。对我来说，这很好用：无需修改系统！

# php - 从不同服务器的不同数据库中的两个表中查询数据？

> ID：12580185
> 
> 赞同：1
> 
> 时间：2012-09-25T09:37:25.520
> 
> 标签：php, mysql, multiple-databases

我在服务器 s1 的数据库 d1 上有一个表 t1，现在另一个表 t2 在服务器 s2 的 d2 中。现在我想要表 t1 的一些数据及其来自 t2 表的相关数据作为结果数据。我该怎么做可能的？

MySQL 5.0.related 文档中的 FEDERATED 存储引擎我看到了任何其他选项...我可以做些什么来跨两个不同的服务器获取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:20:07.480

您的问题有两种解决方案：

1）。MySQL 基于使用[Federated Engine](http://dev.mysql.com/doc/refman/5.0/en/federated-storage-engine.html)（正如您所提到的）。您可以通过[Federated Engine 上的这篇博客文章](http://winashwin.wordpress.com/2012/08/22/mysql-federated-table/)

2）。（当您使用 PHP 时）从一台服务器获取数据，然后循环数据并将相关查询发送到另一台服务器，或者根据从第一台服务器获取的数据向另一台服务器发送单个聚合查询。

希望它会帮助你...

# java - Getter 和 Setter 的使用

> ID：12580187
> 
> 赞同：-2
> 
> 时间：2012-09-25T09:37:30.403
> 
> 标签：java

> **可能重复：**
> [为什么要使用 getter 和 setter？](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

我已经看到了一段时间的构造函数，我仍然不知道这样的事情是如何工作的，我对 java 知之甚少，我知道它们是 getter 和 setter，但它们在我的代码中究竟执行了哪个函数，因为它似乎只是指对于自己不执行特定代码块我只需要一个非常简单的解释，而不是寻求辩论。

```
public class RSSItem {

    // All <item> node name
    String _title;
    String _link;
    String _description;
    String _pubdate;
    String _guid;

    // constructor
    public RSSItem(){

    }

    // constructor with parameters
    public RSSItem(String title, String link, String description, String pubdate, String guid){
        this._title = title;
        this._link = link;
        this._description = description;
        this._pubdate = pubdate;
        this._guid = guid;
    }

    /**
     * All SET methods
     * */
    public void setTitle(String title){
        this._title = title;
    }

    public void setLink(String link){
        this._link = link;
    }

    public void setDescription(String description){
        this._description = description;
    }

    public void setPubdate(String pubDate){
        this._pubdate = pubDate;
    }

    public void setGuid(String guid){
        this._guid = guid;
    }

    /**
     * All GET methods
     * */
    public String getTitle(){
        return this._title;
    }

    public String getLink(){
        return this._link;
    }

    public String getDescription(){
        return this._description;
    }

    public String getPubdate(){
        return this._pubdate;
    }

    public String getGuid(){
        return this._guid;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:02:32.950

The constructor is performing the initialisation of the object in one atomic operation. When you call a constructor, upon return you have a completely created object. Compare this with a simple no-args constructor, followed by a chain of setters. In this scenario you can easily create an object incompletely.

Should you use an intelligent constructor taking args and building the object completely rather than a series of setters ? Generally, yes. Here's why:

1.  the operation is atomic and will give you a complete, correct object (I'm assuming you validate the inputs)
2.  you can provide overrides to create objects from fields, strings/streams etc.
3.  by using the `final` field you can create *immutable* objects. This is very useful for determining reliability (especially wrt. threads) and for debugging issues.

Generally I view sets of setters/getters as poor OO design. At their most basic they merely expose internal fields. You can provide validation etc., but you're still potentially exposing the implementation.

I would rather instantiate the object using a constructor, and then ask it to do things for me using well-defined methods, rather than pulling the data out via getters and doing it myself. This is the overall aim of OO - *telling objects to do things for you rather than asking them for data and doing it yourself*.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:45:13.410

`Getter`并且`Setter`是实现面向对象原则的一种方式`Encapsulation`。

**-** `Encapsulation`最基本的形式就像拥有`private fields`with `public Getter and Setters`。

**-**使用的最重要原因`Getter and Setter`是对**传递**给`fields`.

**例如：**

**在下面的示例中，没有 getter 和 setter，因此可以将 Dog 的权重设置为 -10 的无效值**

```
public class Dog{

   int weight;

    public static void main(String[] args){

                    new Dog().weight = -10;

           }

 } 
```

**例如：**

**我现在使用 Setter 和 Getter 来验证字段权重**

```
public class Dog{

       int weight;

  public void setWeight(int i){

    if(i < 0){                        // Validation

           System.out.println("Invalid weight");

      }              

    else{
        this.weight = i;

     }

 }

  public int getWeight(){

       return this.weight;

 }

        public static void main(String[] args){

                        new Dog().setWeight(50);

               }

     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:45:24.337

在这种情况下，您不需要 Getters/Setters，但使用它们总是好的。如果您稍后注意到您想在设置时检查边界。或者当你得到 s.th. 您可能想要执行一些数据转换。

另一个简单的例子：你只是想在元素的构造过程中设置一个值，所以你只是不实现一个 setter 但你实现了一个 getter（同样，总是将这些成员变量设置为私有，否则 Setters/Getters 是毫无意义的）。

因此，在大多数情况下，您可能不需要它们，但始终使用 Setters/Getters (imo) 仍然是一个好主意

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T09:45:29.777

您的参数化构造函数正在初始化您的成员变量

*   字符串_标题；
*   字符串_链接；
*   字符串_描述；
*   字符串_pubdate；
*   字符串_guid；

getter 和 setter 的作用是从这些成员变量中读取和写入值。它们更像是一个需要遵循的标准，因为它广泛用于许多基于 Java 的框架作品中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T10:20:09.983

Getter 和 setter 提供保护以防止访问您的变量。您可以为不同的用户组使用具有不同可见性级别的 getter 和 setter，并在代码中提供更大的灵活性。这并不意味着每个变量都需要一个 getter 和 setter。更多地考虑它们可以提供的访问级别以及您可以在各自的访问级别中构建的功能。这是一个名为 Sample 的类：

```
public class Sample {
   public static final int DEFAULT_QTY = 8;

   /**Create object with qty = 0*/
   public Sample(){
      setQty(DEFAULT_QTY);
      //this.qty = DEFAULT_QTY;//here makes no difference
   }

   /**Create object with qty if qty > 0*/
   public Sample(int qty){//drops confusion created by this.qty vs qty
      //provides built-in range protection through the constructor's use of setter
      setQty(qty);
   }

   /**@param qty The qty to set for this object, must be > 0*/
   public void setQty(int qty){
   if(qty > 0) {
       this.qty = qty;
   else {
      informUser(QTY_MUST_BE_>_0);
      //setQty(0); or getValidInput();
      }
   }

   /*@param forSureQty The pre-verified value to set for qty*/
   protected void setQtyNow(int forSureQty) {
       this.qty = forSureQty;
   }

   /**@return Returns the qty if qty < qtyAvailable, returns -1 otherwise*/
   public int getQty(){
      //Avoid problems with the computer selling more than you have available
      if(getQtyAvailable < this.qty) {
         //informUser(QTY_AVAILABLE = x QTY_NEEDED = >x);
         return -1;
      }
      return this.qty;
   }

   /*@return Returns the value of qty for this object*/
   protected getQtyNow()
      return this.qty;
   }

  private int qty;

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T09:43:43.623

如果您以上述方式调用构造函数，则您正在设置变量的值；所以你创建的setter方法没有意义。如果您想让您的 setter 方法有用，请创建一个空的构造函数，然后使用这些函数。

# postgresql - postgreSQL 是否索引多值字段？

> ID：12580191
> 
> 赞同：2
> 
> 时间：2012-09-25T09:37:37.343
> 
> 标签：postgresql

例如，我将`interests`Joe 存储为`chemistry`和`classical-music`（作为**两个单独的值**），您可以像查询表一样`where interests in ('chemistry', 'biochem')`，它将使用索引有效地找到像 Joe 这样的人。

PostgreSQL 是否具有可以索引多个值以允许高级查询的数据类型？查询的性能优势是什么？什么是重要的**警告**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:12:38.147

如果你使用数组数据类型，它可以被索引并且可以使用索引，查看这个主题：[PostgreSQL可以索引数组列吗？](https://stackoverflow.com/questions/4058731/can-postgresql-index-array-columns)

更好的数据模型可能是一个更好的主意，但这取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:44:07.957

您可以为此使用[hstore](http://www.postgresql.org/docs/9.2/static/hstore.html)数据类型。您只会存储键，而不是值。可以对 hstore 列进行索引，并且测试是否存在键非常快。

就像是：

```
create table person 
(
   person_id integer not null primary key,
   name text not null,
   interests hstore
);

insert into person (person_id, name, interests)
values 
(1, 'Joe', 'chemistry => NULL, biochem => null'::hstore); 
```

然后要找到有特定兴趣的人，您可以使用：

```
select *
from person
where interests ? 'chemistry'
   or interests ? 'biochem'; 
```

这有点像 hack，因为`hstore`数据类型旨在存储键/值对，在这种情况下，您只需要键。

# c# - 尝试捕捉问题

> ID：12580192
> 
> 赞同：0
> 
> 时间：2012-09-25T09:37:40.107
> 
> 标签：c#, c#-4.0

执行以下尝试捕获的更好方法是什么？目前，我在自己的 try catch 语句中拥有每个 WMI 字段。

我不想让整个班级陷入大规模的尝试中，因为我遇到了字段不显示任何内容的问题（尝试了这个并且对我正在做的事情不起作用）。

我有大约 25 个其他 WMI 字段需要输入，我想知道是否有更简单的方法来执行此操作？

```
private void cmbHdd_SelectedIndexChanged(object sender, EventArgs e)
ManagementObjectSearcher mosDisks = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive WHERE Model = '" + cmbHdd.SelectedItem + "'");
foreach (ManagementObject moDisk in mosDisks.Get())
{
    try
    {
        lblSystemName.Text = "SystemName: " + moDisk["systemname"];
    }
    catch (Exception)
    {

        lblSystemName.Text = "SystemName: WMI Error"; ;
    }
    try
    {
        lblType.Text = "Type: " + moDisk["MediaType"].ToString();
    }
    catch (Exception) 
    {

        lblType.Text = "Type: WMI Error";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:42:42.070

我认为当数据表中的给定列没有可用数据时会发生错误

```
if (moDisk.Columns.Contains("systemname"))
{
  lblSystemName.Text = "SystemName: " + moDisk["systemname"]; 
}
else 
{
   lblSystemName.Text = "SystemName: WMI Error";
} 
```

**注意：不确定这是否是数据表，但您可以像这样编写代码，而不是为每个值捕获异常……借助 if ..else 您可以轻松编写代码**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T09:49:18.007

您可以使用辅助方法：

```
private static string GetMOValue(ManagementObject mo, string name)
{
    try
    {
        object result = mo[name];
        return result == null ? "" : result.ToString();
    }
    catch(Exception)
    {
        return "WMI Error";
    }
}

...
lblSystemName.Text = GetMOValue(moDisk, "systemname");
lblType.Text = GetMOValue(moDisk, "MediaType"); 
```

请注意，您可能应该捕获更具体的异常（不确定 ManagementObject 索引器会引发哪些异常）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T09:47:54.800

我觉得用这么多try catch不好。如果我是 ui 会按照以下方法完成..如果真的需要 try catch。

```
private void cmbHdd_SelectedIndexChanged(object sender, EventArgs e)
ManagementObjectSearcher mosDisks = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive WHERE Model = '" + cmbHdd.SelectedItem + "'");
string current=  string.Empty;
foreach (ManagementObject moDisk in mosDisks.Get())
{
    try
    {
        current = "SystemName";
        lblSystemName.Text = "SystemName: " + moDisk["systemname"];

        current = "MediaType";  
        lblType.Text = "Type: " + moDisk["MediaType"].ToString();

    }
    catch(Exception)

     {
            //print "error in" + current;

}
} 
```

# python - 如何在 glade-3 中显示 2D numpy 数组？

> ID：12580198
> 
> 赞同：2
> 
> 时间：2012-09-25T09:37:51.340
> 
> 标签：python, arrays, numpy, gtk, glade

我正在使用 Python 和 Glade-3 制作实时视频 GUI，但我发现很难将我拥有的 Numpy 数组转换为可以在 Glade 中显示的东西。图像是黑白的，只有一个值表示每个像素的亮度。我希望能够在 GUI 中绘制图像，所以我不知道是否应该使用特定格式（位图/像素图等）？

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:12:53.917

最后我决定使用以下方法为像素创建一个缓冲区：

self.pixbuf = gtk.gdk.Pixbuf(gtk.gdk.COLORSPACE_RGB,0,8,1280,1024)

然后我从像素缓冲区设置图像：

self.liveImage.set_from_pixbuf(self.pixbuf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T12:01:01.370

我认为这些是您需要的步骤：

1.  用于`scipy.misc.toimage`将您的数组转换为 PIL 图像
2.  查看[此问题的答案，](https://stackoverflow.com/questions/7610159/convert-pil-image-to-cairo-imagesurface)将您的 PIL 图像转换为 cairo 表面
3.  用于`gdk_pixbuf_get_from_surface`将其转换为 pixbuf（我不知道它在 python api 中的名称）
4.  用这个制作一个 Gtk.Image`Gtk.Image.new_from_pixbuf`

很抱歉，它需要这么多转换步骤。

# windows - Maven 多平台依赖包

> ID：12580209
> 
> 赞同：2
> 
> 时间：2012-09-25T09:38:41.543
> 
> 标签：windows, linux, maven, wix, deb

我用 Java 编写了一个可以在 Linux 和 Windows 上使用的应用程序。目前通过运行`mvn package`，我的 Maven 构建系统将使用 WiX 生成一个 .msi。

有没有办法创建两个包“任务”所以我可以说`mvn package-windows or`mvn package-linux`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:43:49.043

您可以使用使用配置文件来做到这一点，或者更好的办法是拥有三个项目。一种用于核心，一种用于 Linux，另一种用于使用核心项目的 Windows。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:32:44.900

如果你想打包两个版本（Linux 和 Windows），你可以将你的 mvn 包阶段绑定到一个额外的阶段，该阶段将构建另一个工件。

```
...
 <plugin>
   <groupId>org.group.extra</groupId>
   <artifactId>extra-maven-plugin</artifactId>
   <version>1.4</version>
   <executions>
     <execution>
       [...]
       </configuration>
       <goals>
         <goal>package</goal>
       </goals>
     </execution>
   </executions>
 </plugin>
... 
```

这可能是您已经使用 maven-wix-plugin 完成的操作。

# visual-studio-2010 - 项目组件在 Visual Studio 2010 中消失了

> ID：12580214
> 
> 赞同：0
> 
> 时间：2012-09-25T09:38:53.067
> 
> 标签：visual-studio-2010

我正在使用 Visual Studio 2010，今天早上我项目中的项目组件消失了。那是在工具箱中，我无法从我定义的类中添加更多对象。我对使用这些类的现有元素有错误：没有定义。

这是它之前和之后的样子。第一个组件类别现在消失了。

![之前和之后项目组件消失了](../Images/f6cf6976e3ece0ac5a6311d3375762ac.png)

我的主要问题来自*PageControl*元素。我现在有错误“找不到类型“Wolf_Calc.PageControl”。”

这可能来自哪里？

我怀疑问题来自我用来同步和备份项目文件的 DropBox。一些错误出现在非 ASCII 名称中，例如*Gebäude.vb*被重命名为*Geb"ude.vb* ... 但是*PageControl*组件中的所有字符都是 ASCII（其他组件不正确）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:41:55.867

[经过进一步研究，我尝试了另一篇文章](https://stackoverflow.com/questions/2090674/new-to-c-sharp-the-type-or-namespace-cannot-be-found)的公认答案。

无论出于何种原因，Visual Studio 都找不到类定义。但是将类移到主程序中并编译它解决了我的问题。

# php - Wordpress - 如何在页面加载时发送电子邮件通知？

> ID：12580218
> 
> 赞同：2
> 
> 时间：2012-09-25T09:38:59.857
> 
> 标签：php, wordpress, email

我目前正在寻找一种使用 WordPress 网站发送电子邮件通知的方法。例如，当用户访问页面 A 时，会在后台发送电子邮件通知。

我在 WordPress 环境中的 Web 开发方面没有太多经验，所以有人可以在这里给我指点吗？我应该从哪里开始？

谢谢。

编辑：

我已经尝试了 mail() 和 wp_mail() 函数，但它们似乎都不适合我。当我访问该页面时，没有发送任何电子邮件。我还检查了该页面的模板，这只是默认模板。也许我正在编辑错误的文件？

编辑2：

我猜主机提供商可能还没有启用邮件功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T09:18:49.087

这是一段非常基本的 php 代码，用于发送 html 电子邮件。

```
<?php
if(is_page(123))
{

$fromName = 'Auto email notification system';

$subject = 'Confirmed';

/* Mail Address */
$toAddr = 'me@domain.com'; 
$bccAddr = 'bccperson@domain.com'; 
$fromAddr = 'no-reply@domain.com';
/* End Mail Address */

/* Mail Body */
$msg = '
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
</head>
<body>
my messages about confirmation...
</body>
</html>
';

$msg = wordwrap($msg, 70);
/* End Mail Body */

/* Mail Headers Setup */
$headers = array();
$headers[] = "MIME-Version: 1.0";
$headers[] = "Content-type: text/html; charset=utf-8";
$headers[] = "From: ".$fromName." <".$fromAddr.">";
$headers[] = "Bcc: <".$bccAddr.">";
/* End Mail Headers Setup */

mail($toAddr, $subject, $msg, implode("\r\n", $headers));

}
?> 
```

我将上面的代码放在 header.php 文件的底部，它对我有用。

谢谢大家的建议和帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:44:45.190

您可能希望 PHP 的[mail](http://php.net/manual/en/function.mail.php)函数发送电子邮件，而 WordPress [is_page()](http://codex.wordpress.org/Function_Reference/is_page)之类的东西在您要发送电子邮件时识别页面，所以

```
<?php 
if(is_page()) :
  mail('email@address.com','My Subject','My Message');
endif;
?> 
```

此外，请查看底部 is_page 的“相关”部分 - 您可能希望使用其他方式确定要发送电子邮件的页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T10:28:50.507

嘿@woodykiddy 为页面创建一个模板并将此代码放入页面中。每次加载页面时，此条件都会返回 true。

```
// Example using the array form of $headers
// assumes $to, $subject, $message have already been defined earlier...

$headers[] = 'From: Me Myself <me@example.net>';
$headers[] = 'Cc: Aravind B Codex <abc@wordpress.org>';
$headers[] = 'Cc: iluvwp@wordpress.org'; // note you can just use a simple email address

<?php 
if(is_page()) :
    wp_mail( $to, $subject, $message, $headers );
endif;
?> 
```

[http://codex.wordpress.org/Function_Reference/wp_mail](http://codex.wordpress.org/Function_Reference/wp_mail)

希望这会帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T11:34:36.100

创建模板很容易。创建一个新页面 my-template.php 将此代码放在顶部。

```
<?php
    /*
    Template Name: My New Template
    */
    ?> 
```

但这取决于你的主题。我为你编辑了二十个。它会给你一个创建模板的想法。

```
<?php
    /*
    Template Name: My New Template
    */

    get_header();

    $headers[] = 'From: Me Myself <me@example.net>';
    $headers[] = 'Cc: Aravind B Codex <abc@wordpress.org>';
    $headers[] = 'Cc: iluvwp@wordpress.org'; // note you can just use a simple email address
?>

<?php 
if(is_page()) :
    wp_mail( $to, $subject, $message, $headers );
endif;
?>

<div id="container">
    <div id="content" role="main">

    <?php
    /* Run the loop to output the page.
     * If you want to overload this in a child theme then include a file
     * called loop-page.php and that will be used instead.
     */
    get_template_part( 'loop', 'page' );
    ?>

    </div><!-- #content -->

</div><!-- #container --> 
```

将电子邮件代码放入其中。将其保存在模板目录中。

转到管理面板并添加/编辑页面。在页面的右侧有一个选项（模板）。您的模板将在下拉菜单中可见。选择模板并保存页面就是这样。

# sql - sql - 每月明智的表格格式

> ID：12580224
> 
> 赞同：-1
> 
> 时间：2012-09-25T09:39:22.637
> 
> 标签：sql, oracle, plsql, data-modeling

我有一年每月 300 名学生的数据，请建议我必须以哪种表格格式存储该数据。我想比较每个学生的每月明智数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:39:20.890

你至少需要两张桌子。

一张表，学生，保存学生的核心细节；这些是每个学生出现一次的属性，无论记录了多少个月（例如姓名）。假设它的主键是 STUDENT_ID。

第二个表将保存每个月的记录。它的主键是 (STUDENT_ID, MONTH_ID)。MONTH_ID 需要标识月份和年份（在大多数学校系统中，学年跨越日历年）。

根据您的“每月 300 名学生的数据”的精确细节，您可能需要更多表格。

# timer - Arc 启用 Cocos2d: Schedule Crash

> ID：12580226
> 
> 赞同：1
> 
> 时间：2012-09-25T09:39:24.680
> 
> 标签：timer, cocos2d-iphone, automatic-ref-counting, schedule

我最近通过遵循本教程设法在我的项目上启用了 ARC

[http://www.learn-cocos2d.com/2012/04/enabling-arc-cocos2d-project-howto-stepbystep-tutorialguide/](http://www.learn-cocos2d.com/2012/04/enabling-arc-cocos2d-project-howto-stepbystep-tutorialguide/)

一切正常，直到我添加了一个调度方法，例如：

```
[self schedule:@selector(test:) interval:0.1]; 
```

方法：

```
-(void)test:(id)timer{
    NSLog(@"yes!");
} 
```

不幸的是，它没有说“是！”，而是崩溃了：

```
0x1de8d83:  movl   (%eax), %edx 
```

并显示：

![在此处输入图像描述](../Images/c665094dfeb13b36eb9eae6a2100f977.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:39:24.680

我认为可以只使用：

```
-(void)test:(id)timer; 
```

而是使用：

```
-(void)test:(ccTime)dt; 
```

还没有启用 ARC 时没有这个问题。

# magento - 升级到 1.7.0.1 后，捆绑产品在前端不可见

> ID：12580228
> 
> 赞同：1
> 
> 时间：2012-09-25T09:39:31.710
> 
> 标签：magento, magento-1.6, magento-1.7

从 1.6 升级到 1.7.0.1 后，可能由于 js 问题，Bundle 产品在前端不可见

用firebug调试我发现以下js错误

```
<script type="text/javascript">
var optionsPrice = new Product.OptionsPrice(
Fatal error: Call to undefined method Mage_Bundle_Model_Product_Price::getBasePrice() in /var/www/vhosts/stage.planetjill.com/httpdocs/app/code/core/Mage/Bundle/Model/Product/Price.php on line 117
</script> 
```

price.php 中的方法

```
 public function getFinalPrice($qty = null, $product)
    {
        if (is_null($qty) && !is_null($product->getCalculatedFinalPrice())) {
            return $product->getCalculatedFinalPrice();
        }
        $finalPrice = $this->getBasePrice($product, $qty);
        //$finalPrice = $product->getPrice();
        $product->setFinalPrice($finalPrice);
        Mage::dispatchEvent('catalog_product_get_final_price', array('product' => $product, 'qty' => $qty));
        $finalPrice = $product->getData('final_price');

        $finalPrice = $this->_applyOptionsPrice($product, $qty, $finalPrice);
        $finalPrice += $this->getTotalBundleItemsPrice($product, $qty);

        $product->setFinalPrice($finalPrice);
        return max(0, $product->getData('final_price'));
    } 
```

如果您看到注释行

> // **$finalPrice = $product->getPrice();**

在magento 1.6中使用。如果我用这条线代替

> **$finalPrice = $this->getBasePrice($product, $qty);**

捆绑产品现在可见，但配置的价格始终设置为 0，并且 addtocart 按钮中断。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T20:04:42.773

请检查 product.js 文件中是否有任何 js 错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:54:39.330

我会检查您的模板文件，可能是 /app/design/xxx/xxx/bundle/catalog/product/view/price.phtml - 确保对 $_product->getFinalPrice() 的调用正确连接（即，如果你 get_class_methods($this) 它是可以访问 getFinalPrice() 的正确类）

如果不是，您应该检查已安装的所有模块并检查是否正在重写 Mage_Bundle_Model_Product_Price。

或者，通过模块的 .xml 文件逐个检查并禁用模块，直到问题得到解决。从那里隔离。

# ftp - 通过 MSMQ 发送文件

> ID：12580230
> 
> 赞同：1
> 
> 时间：2012-09-25T09:39:36.987
> 
> 标签：ftp, msmq, message-queue, nservicebus, file-transfer

在零售场景中，每个商店在一天结束时向后端系统报告他们的日常交易。今天，一个由日常交易和一些其他元信息组成的文件使用 FTP 从商店传输到后端。我目前正在研究用其他东西替换 FTP。MSMQ 已被建议作为替代传输机制。所以我的问题是，我们是否需要编写一个自定义 Windows 服务，将日常事务文件粘贴到消息对象中并在途中发送它，或者 MSMQ 中是否有任何开箱即用的机制来处理这个问题？

另外，由于我们要传输的文件对于大型存储可以达到 5-6 Mb，我们是否应该排除 MSMQ？在那种情况下，我们应该调查其他建议的技术吗？

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:59:47.667

NServiceBus 为这种情况提供了一个很好的 MSMQ 抽象。您将获得 MSMQ 的可靠消息传递方面，以及用于定义消息的非常好的编程模型。

然而，MSMQ 被限制为 4MB 的消息大小，在 NServiceBus 中有两种方法可以处理这个问题：

1.  NServiceBus 有一个称为数据总线的概念，它接收消息中的大附件并使用另一种方法可靠地传输它们。这是由基础设施处理的，就您的消息处理程序而言，数据就在那里。
2.  您可以将有效负载分解为更小的原子消息并将它们作为普通消息发送。NServiceBus 基础设施将确保它们都到达目的地并得到处理。我会推荐这种方法，除非将整个巨大的数据转储作为一个原子事务处理是绝对关键的。

需要注意的另一件事是，您每晚进行转储这一事实可能是先前系统的限制。使用 NServiceBus 可以更改系统，以便以更即时的方式发送这些信息位，这将始终产生更多最新数据，这对业务来说可能是一个巨大的胜利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T17:08:56.057

您可以查看 IBM Sterling [Managed File Transfer](http://www-01.ibm.com/software/commerce/managed-file-transfer/)和 WebSphere MQ Managed File Transfer 产品。

如果您需要消息传递和文件传输功能，可以考虑使用 WebSphere MQ MFT。另一方面，如果您的要求只是文件传输，那么您可以查看 Sterling MFT。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T12:15:27.320

通过消息传输发送文件并非易事。如果您将整个文件放入单个消息中，您可以获得所需的原子性，但调整消息提供程序以适应消息大小的广泛变化可能具有挑战性。如果所有文件的大小大致相同，则每条消息一个是最简单的解决方案。

另一方面，您可以将文件拆分为多条消息，但您必须以正确的顺序重新组合它们，包括检测和重新发送丢失段的协议，完整性检查接收到的文件与发送的文件等. 您可能还想检查两端的文件在传输过程中是否没有更改。

对于这些系统中的任何一个，您还需要系统足够智能，以管理在正常和异常情况下发送和接收文件的处置、记录传输等。

因此，在考虑是否迁移到消息传递时，两个最佳选择是本地迁移到消息传递并完全放弃文件，或者使用在您选择的消息传递提供程序上运行的企业管理文件传输解决方案。如果您希望通过强大的异常处理和报告正确地完成它，那么从长远来看，没有任何现成的 MFT 产品会像您自己开发它那样昂贵。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T07:47:22.923

如果商店位于不同的网络上并通过 Internet 进行通信，则 MSMQ 不是一个真正的选择。NServiceBus 提供了[网关](http://docs.particular.net/nservicebus/gateway/)的概念，它允许通过 HTTP 或 HTTPS 异步传输 MSMQ 消息。

# c# - 将双精度数转换为小数并根据需要对其进行上限

> ID：12580231
> 
> 赞同：3
> 
> 时间：2012-09-25T09:39:42.823
> 
> 标签：c#, .net

我有一个双精度数，需要将其转换为小数。如果值太大/太小，结果应该是小数.MaxValue/decimal.MinValue。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:43:53.977

我假设您意识到这是一种有损转换，应该尽可能避免吗？如果你真的需要它：

```
private static readonly double MaxDecimalAsDouble = (double) decimal.MaxValue;
private static readonly double MinDecimalAsDouble = (double) decimal.MinValue;

...
public decimal ConvertWithCap(double input)
{
    return input >= MaxDecimalAsDouble ? decimal.MaxValue
         : input <= MinDecimalAsDouble ? decimal.MinValue
         : (decimal) input;
} 
```

这样，根据`double`值检查上限，然后将硬编码的上限值返回为十进制值。这避免了`double`无法准确表示的最大值/最小值的问题`decimal`。

（即使在 的最大尺度上`decimal`，也可以表示连续整数 - 但对于 来说，情况并非如此`double`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:49:37.183

你认为双倍的大值和小值是多少？我觉得一个简单的 if else 语句就可以完成这项工作

```
public decimal getDecimal(double value,double large,double small)
{

    if(value <= large && value >= small)
     return (decimal) value;
    else if (value>large)
     return decimal.MaxValue;
    else
     return decimal.MinValue;
} 
```

这只是在网站上输入的，所以请原谅语法和拼写

# robotframework - 参数可以传递给 ROBOT 框架中的 List 变量吗

> ID：12580233
> 
> 赞同：1
> 
> 时间：2012-09-25T09:39:48.533
> 
> 标签：robotframework

我的问题是：

我正在尝试这样的 `${${variable}}` 创建列表

`${variable}`--这将作为参数传递。

执行此操作时出现以下错误：- 找不到具有名称的`'${${variable}}'`关键字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:01:43.910

要创建一个列表，请使用@{list}，而不是 ${variable}。要将 ${variable} 解析为列表，请使用以下内容：@{list} ${first_variable} {seconn_variable}。

您可以在这里获得更多信息： [http ://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html?r=2.7.4#list-variables](http://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html?r=2.7.4#list-variables)

希望这会对你有所帮助！

# clojure - 如何在 clojure 中调用嵌套的模板化构造函数

> ID：12580236
> 
> 赞同：2
> 
> 时间：2012-09-25T09:39:57.940
> 
> 标签：clojure

我想使用 clojure 来探索这个例子 - [http://jscience.org/api/org/jscience/mathematics/function/package-summary.html](http://jscience.org/api/org/jscience/mathematics/function/package-summary.html)

```
 // Defines two local variables (x, y).
    Variable<Complex> varX = new Variable.Local<Complex>("x");
    Variable<Complex> varY = new Variable.Local<Complex>("y");

    // f(x) = ix² + 2x + 1
    Polynomial<Complex> x = Polynomial.valueOf(Complex.ONE, varX);
    Polynomial<Complex> fx = x.pow(2).times(Complex.I).plus(
        x.times(Complex.valueOf(2, 0)).plus(Complex.ONE));
    System.out.println(fx);
    System.out.println(fx.pow(2));
    System.out.println(fx.differentiate(varX));
    System.out.println(fx.integrate(varY));
    System.out.println(fx.compose(fx));

    // Calculates expression.
    varX.set(Complex.valueOf(2, 3)); 
    System.out.println(fx.evaluate()); 
```

我该如何建造`varX`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:49:52.777

假设您已导入`org.jscience.mathematics.function.Variable$Local`：

```
(let [v (Variable$Local. "x")]
  ...) 
```

也就是说，在将 Java 代码移植到 Clojure 时，您可以忽略类型参数，例如`<Complex>`. 请注意，嵌套类 like`Local`与它们的封闭类分开，带有`$`.

# caching - 缓存选项

> ID：12580238
> 
> 赞同：0
> 
> 时间：2012-09-25T09:40:08.713
> 
> 标签：caching, smarty

正如我所见，Smarty 使用“按模板”缓存。

我可以以某种方式为其提供一个 URL，以便它可以通过给定的 URL 缓存页面吗？我可以`is_cached()`使用给定的 URL 吗？

并将`last_mtime`缓存文件与我的一些数据进行比较，然后说“是时候更新缓存了”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:27:11.103

默认情况下，Smarty 使用基于文件的缓存，同时将类似 php 的文件存储在`$cache_dir`.

您可以实现[自定义缓存功能](http://www.smarty.net/docs/en/caching.custom.tpl)和[注册它](http://www.smarty.net/docs/en/api.register.cacheresource.tpl)，但这取决于您想要深入了解 Smarty 的程度。

一种更简单的方法是将一些 urls 名称添加到模板文件名中，例如，在您的模板目录中可能看起来像。

```
/your/templates/url1.index.tpl
/your/templates/url2.index.tpl 
```

...然后根据您的需要使用 Smartys 缓存。

# resharper - 使用 Resharper 7 自定义模式将 VB 文件中的 Dim 替换为 Private

> ID：12580242
> 
> 赞同：1
> 
> 时间：2012-09-25T09:40:16.033
> 
> 标签：resharper

我是一个相当新的 resharper 用户。我想创建一个自定义模式，它将在 Dim 下显示一个建议并将其替换为 Private。我像这样填写了自定义模式：

```
 Find: Dim              Replace : Private 
```

但它不起作用，我认为我没有正确执行它。我需要填写什么才能启动并运行此自定义模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:27:41.707

在 Resharper 7.0 或更低版本中，这显然是不可能的。我收到了 Resharper 团队的回复。

> 抱歉，目前 ReSharper 不支持在 VB.NET 中使用模式进行类级别搜索。

但他们可能会在 R# 8.0 中添加它

[您可以对此问题](http://youtrack.jetbrains.com/issue/RSRP-330139)进行投票以使其更快地发生；-)

# javascript - 创建日期对象

> ID：12580252
> 
> 赞同：0
> 
> 时间：2012-09-25T09:40:51.170
> 
> 标签：javascript, jquery-mobile

我的项目中有一个奇怪的问题。我正在尝试将参数动态插入到 Date 对象构造函数中。这是我的代码：

```
from += fromYear + "," + fromMonth + "," + fromDay + "," + fromHour + "," + fromMinute;
to += toYear + "," + toMonth + "," + toDay + "," + toHour + "," + toMinute;

console.log(from);  //here is log value: 2012,8,25,9,22
console.log(to);   //another log: 2012,8,25,9,52

//Creating object               
var fromtime =  new Date(from);
var totime = new Date(to); 
```

当我试图提醒日期对象（totime 或 fromtime）时，出现错误：Invalid Date。我不知道如何通过它。你可以帮帮我吗？

我试过这个： [创建日期对象 JS](http://www.w3schools.com/js/js_obj_date.asp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:45:00.773

在您的示例`from`中是一个逗号分隔的字符串，而不是一系列谨慎的变量，这是`Date`构造函数需要作为参数的：

```
var fromtime =  new Date(fromYear, fromMonth, fromDay, fromHour, fromMinute); 
```

（月份以 0 为基础，因此您可能需要添加 1）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:44:43.297

如果您以以下格式创建日期

```
new Date(year, month, day, hours, minutes, seconds, milliseconds) 
```

您应该直接传递参数而不是连接它们，就像这样

```
new Date(fromYear, fromMonth, fromDay, fromHour, fromMinute, 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:03:52.927

What you are doing is

var fromtime = new Date('2012,8,25,9,22');
instead of
var fromtime = new Date(2012,8,25,9,22);

What you need to do is use the dates you have and if it's in a string weed out the diffrent parts of the date

new Date(fromYear, fromMonth, fromDay, fromHour, fromMinute, 0)

I don't think JS will allow you to do that.
You give it one parameter instead of the five you intend.

[http://www.w3schools.com/js/js_obj_date.asp](http://www.w3schools.com/js/js_obj_date.asp)

# windows - 从任务管理器结束程序的模棱两可的行为

> ID：12580253
> 
> 赞同：2
> 
> 时间：2012-09-25T09:40:54.313
> 
> 标签：windows, winapi, visual-c++, taskmanager

我使用 WINAPI 制作了一个简单的 Windows 应用程序，然后在其 WinProc 中处理 WM_CLOSE 以显示一个消息框，要求用户确认以确认或取消关闭窗口。

当只需单击十字按钮时，应用程序工作正常，但从任务管理器结束应用程序时，它显示模型和非模型消息框的不同行为。

在使用模型消息框时，只会弹出一个消息框供用户确认，但在使用非模型消息框时，会弹出两个消息框。

为什么显示两个对话框？？？？

这是我的代码

```
case WM_CLOSE:
  if (MessageBox(NULL, "Do you want to quit","Exit",MB_OKCANCEL|MB_ICONQUESTION) == IDOK)
    PostQuitMessage (WM_QUIT);
  else
    ShowWindow (hWnd, SW_RESTORE);
  break; 
```

完整代码见

[http://codepad.org/elkXnBM1](http://codepad.org/elkXnBM1)

# groovy - 带有可选参数的 Groovy 闭包

> ID：12580262
> 
> 赞同：24
> 
> 时间：2012-09-25T09:41:14.177
> 
> 标签：groovy, parameters, arguments, closures, optional

我想定义一个闭包，它接受一个参数（我用 引用`it`）有时我想将另一个附加参数传递给闭包。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-25T09:54:30.853

您可以将第二个参数设置为默认值（例如 null）：

```
def cl = { a, b=null ->
  if( b != null ) {
    print "Passed $b then "
  }
  println "Called with $a"
}

cl( 'Tim' )          // prints 'Called with Tim'
cl( 'Tim', 'Yates' ) // prints 'Passed Yates then Called with Tim 
```

另一种选择是`b`像这样制作一个可变参数列表：

```
def cl = { a, ...b ->
  if( b ) {
    print "Passed $b then "
  }
  println "Called with $a"
}

cl( 'Tim' )                    // prints 'Called with Tim'
cl( 'Tim', 'Yates' )           // prints 'Passed [Yates] then Called with Tim
cl( 'Tim', 'Yates', 'Groovy' ) // prints 'Passed [Yates, Groovy] then Called with Tim 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-19T06:58:06.197

**希望这会有所帮助**

```
​def clr = {...a ->  
    print "Passed $a then "
    enter code here

}

​clr('Sagar')
clr('Sagar','Rahul') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-06T08:25:57.480

**[@tim_yates](https://stackoverflow.com/a/12580502/1915920)**的变体不适用于**`@TypeChecked`**（在类上下文中），至少`Groovy 2.4.11`在默认 arg 被忽略且**无法编译**的情况下：-(

因此，在这种情况下可行的其他（诚然丑陋的）解决方案是：

1.  **首先声明关闭**似乎工作正常（无论如何都是递归所必需的）：

    ```
    def cl
    cl = { ... } 
    ```

    *   至少在 Eclipse Neon / Groovy-Eclipse Plugin 2.9.2 中，代码完成/建议在以后在同一代码块中使用闭包时都不起作用=>所以据我所知没有任何损失
2.  **`@TypeChecked(value=TypeCheckingMode.SKIP)`**它对两者都有效，但是你会放松对方法（或类，取决于你把它放在哪里）的类型检查

3.  声明**关闭委托`cl2`**：

    ```
    @TypeChecked
    class Foo { 

      static main( String[] args ) {

        def cl = { a, b ->
          if( b != null )
            print "Passed $b then "
          println "Called with $a"
        }
        def cl2 = { a -> cl( a, null ) }

        cl2( 'Tim' )         // prints 'Called with Tim'
        cl( 'Tim', 'Yates' ) // prints 'Passed Yates then Called with Tim           
      }
    } 
    ```

4.  将**闭包转换为类方法**，例如

    ```
    @TypeChecked
    class Foo { 

      cl( a, b=null ) {
        if( b != null )
          print "Passed $b then "
        println "Called with $a"
      }

      static main( String[] args ) {
        cl( 'Tim' )          // prints 'Called with Tim'
        cl( 'Tim', 'Yates' ) // prints 'Passed Yates then Called with Tim           
      }
    } 
    ```

# webkit - 将边框图像与 -webkit-image-set 一起使用

> ID：12580265
> 
> 赞同：0
> 
> 时间：2012-09-25T09:41:40.080
> 
> 标签：webkit, high-resolution, css

如何有效地`border-image`用于多种分辨率？我可以使用`-webkit-image-set`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:05:09.850

解决方案非常简单。

```
border-image-source: -webkit-image-set(url(pic.png) 1x, url(pic_2x.png) 2x);
border-width: 10px 10px 10px 10px;
border-image-slice: 10 10 10 10; 
```

# asp.net - 使用 VB 代码发送电子邮件

> ID：12580269
> 
> 赞同：0
> 
> 时间：2012-09-25T09:42:06.630
> 
> 标签：asp.net, vb.net, email, webforms, smtp

不知道这个问题是否在其他地方被问过......

对于我正在处理的网站项目，我创建了一个 ASPX Web 表单，该表单将在单击按钮时发送包含表单内容的电子邮件。我尝试了它，当我使用 Yahoo SMTP 服务器并使用我的个人 Yahoo 电子邮件地址（+ 指定用户名和密码）进行测试时，它可以工作。

但是，当我将 SMTP 服务器用于网站的邮件消息时（在我在网站中创建新的管理员电子邮件帐户之后），它不起作用。

该网站已启动并正在运行，我可以向网站的管理员电子邮件帐户（通过雅虎）发送电子邮件，但在通过 ASPX 网络表单发送时却不行。

这是使用 Yahoo SMTP 服务器的代码，它工作正常：

```
 SmtpServer.Credentials = New Net.NetworkCredential("username@yahoo.com", "password")
    SmtpServer.Port = "25"
    SmtpServer.Host = "smtp.mail.yahoo.com"
    mail.From = New MailAddress("username@yahoo.com")
    mail.To.Add("username@yahoo.com")
    mail.Subject = "RE: Message Subject"
    mail.Body = "Message goes here."
    SmtpServer.Send(mail) 
```

现在，这里是使用我的网站的 SMTP 服务器的代码，它不起作用：

```
 SmtpServer.Port = "25"
    SmtpServer.Host = "127.0.0.1"
    mail.From = New MailAddress("admin@awesomewebsite.org.au")
    mail.To.Add("admin@awesomewebsite.org.au")
    mail.Subject = "RE: Message Subject"
    mail.Body = "Message goes here."
    SmtpServer.Send(mail) 
```

这些是托管网站的网络托管公司提供的正确端口和主机号。他们还说不需要用户名和密码。我也尝试将其附加到代码的开头，但它仍然无法正常工作：

```
 SmtpServer.Credentials = New Net.NetworkCredential() 
```

甚至

```
 SmtpServer.Credentials = New Net.NetworkCredential("", "") 
```

我真的不知道该怎么办。请帮助这个新手。任何回应表示赞赏。

顺便说一句，我在测试时收到的错误消息出现在消息框中：“发送邮件失败”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:49:06.543

您需要在您的网站中创建一个电子邮件帐户并使用这些凭据发送邮件，就像您使用 yahoo 一样（这可以在您网站的管理门户中完成，但一些托管服务提供商会单独向您收取电子邮件服务费用） . 此外，还应提供正确的 smtp 服务器，这取决于您的托管服务提供商。您可以从托管服务提供商处获取该信息。127.0.0.1 无论如何都不会在这里工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T00:00:05.647

不要导入“System.Net.Mail”。完成的代码如下图所示：

```
 Dim SmtpServer As New Net.Mail.SmtpClient
    Dim mail As New Net.Mail.MailMessage
    SmtpServer.Host = "198.154.99.8"
    SmtpServer.UseDefaultCredentials = False
    SmtpServer.Credentials = New   System.Net.NetworkCredential("admin@awesomewebsite.org.au", "password")

    mail.From = New Net.Mail.MailAddress("admin@awesomewebsite.org.au")
    mail.To.Add("admin@awesomewebsite.org.au")
    mail.Subject = "RE: Message Subject"
    mail.Body = "Message goes here."

    SmtpServer.Send(mail) 
```

# ios - 重新定位 UIView 会导致相反的方向

> ID：12580270
> 
> 赞同：0
> 
> 时间：2012-09-25T09:42:11.170
> 
> 标签：ios, uiview

在我项目的根视图控制器中，我在

```
- (void)viewDidAppear:(BOOL)animated 
```

我写：

```
self.view.center = CGPointMake(self.view.center.x-50.0, self.view.center.y); 
```

我预计它会向左移动，但实际上它会向右移动。

Y方向的情况相同..

为什么这个 ？

谢谢

编辑

我测试过：我以模态方式展示了这个viewController，并将预览定位代码放在“viewDidAppear”部分，然后坐标似乎颠倒了。这是呈现模态视图控制器的代码：

```
ReadingViewController * readingController = [[ReadingViewController alloc] initWithNibName:@"ReadingViewController" bundle:nil];
self.modalPresentationStyle = UIModalPresentationCurrentContext;
[self presentModalViewController:readingController animated:NO]; 
```

然后我评论了这段代码的和平，将此 ViewController 的视图添加到超级视图中，并且没有更改“viewDidAppear”部分中的定位代码，我发现它按我预期的方式工作，即向左移动了 50 个像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:06:05.483

您使用的代码与我完美配合。请检查一次绑定。

# php - 在其分析的 id 上检索一个 Google 分析帐户，而不是开始索引（Google 分析的管理 3.0）PHP 客户端库

> ID：12580275
> 
> 赞同：1
> 
> 时间：2012-09-25T09:42:23.173
> 
> 标签：php, api, google-analytics-api, client-library

我正在使用带有管理和核心报告 3.0 API 的 PHP 客户端库。我有一个系统可以根据其起始索引检索一个帐户。但是，这背后的问题是，当删除帐户时，每个帐户的索引都会更改，因此当我请求帐户 S 并获得帐户 M 时，这是错误的，因为已删除了大约 5 个帐户。我当前用于检索帐户的代码如下所示。

```
<?php
    $accounts = $service
        ->management_accounts
        ->listManagementAccounts(
            array(
                "max-results" => 1,
                "start-index" => $_SESSION['account'],
            )
        )
    ;
?> 
```

会话变量存储起始索引的整数，例如 8。

这是检索帐户背后的一些参考。 [https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtReference/management/accounts](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtReference/management/accounts)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:56:05.203

我不认为这是可能的。也许这不是问题？

为什么不获取*整个*帐户列表并将其缓存？整个列表将与一个项目一样快地返回。所以总的来说，你的应用程序会变得更快......很可能整个列表不是很大。我曾与多家网络广告公司合作过，每个公司都有数百个帐户。

# jquery - 使用 jQuery 确定一组图像何时完成加载？

> ID：12580276
> 
> 赞同：0
> 
> 时间：2012-09-25T09:42:25.457
> 
> 标签：jquery, image, loading

那么，如果您可以[使用 jQuery 确定图像何时完成加载](https://stackoverflow.com/questions/4494437/jquery-or-javascript-determine-when-image-finished-loading)，那么它与多个图像完全相同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:45:06.693

`Deferred`为正在加载的每个图像创建一个对象，并将它们存储在一个数组中。

当每个图像的`.load()`回调被调用时，`resolve`关联的延迟对象，然后用于`$.when()`调用最终回调，只有当*所有*的承诺都已经解决：

```
function onAllLoaded(imgs, callback) {
    var i, n, a = [];
    for (i = 0, n = imgs.length; i < n; ++i) {
        a[i] = $.Deferred();
        $(imgs[i]).on('load', a[i].resolve); // not using .onload to avoid clashes
    }
    $.when($, a).done(callback);
} 
```

请注意，在某些浏览器（早期的 IE？）上，您需要采取特殊措施来确保`.load`回调确实发生。这超出了这个答案的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:46:10.177

你可以轻松做到：

```
function onloadall(images, callback) {
    var n = 0;
    for (var i=0; i<images.length; i++) {
        if (!images[i].width) {
            n++;
            images[i].onload = function(){
               if (--n==0) callback();
            }
        }
    }
    if (n==0) callback();
} 
```

[演示](http://jsfiddle.net/dystroy/Q6eMX/)

# c# - 在 Visual Studio 8 中为 livsvm 添加参考

> ID：12580278
> 
> 赞同：1
> 
> 时间：2012-09-25T09:42:27.250
> 
> 标签：c#, visual-studio-2010, visual-studio, libsvm

我是新手`livsvm`，我想在编码级别使用它，也就是说我必须在`c#`. 我累了，但错误消息没有成功，如附图所示。请帮助我`livsvm`在 c# 中使用库，**添加参考的任何重要步骤。**

![错误信息](../Images/8c4ce353bc9af285be3d7ab23c1756b2.png)

# c# - 使用 LINQ 表达式获取属性值

> ID：12580282
> 
> 赞同：1
> 
> 时间：2012-09-25T09:42:41.993
> 
> 标签：c#, linq

> **可能重复：**
> [使用 C# 中的反射从字符串中获取属性值](https://stackoverflow.com/questions/1196991/get-property-value-from-string-using-reflection-in-c-sharp)

我正在尝试编写一个通用方法，以允许我在迭代集合时指定要检索的属性：

```
private void WriteStatisticsRow<T>(ICollection<InstitutionStatistics> stats, 
    ICollection<short> years, 
    string statisticsName, 
    string rangeName) where T : struct
{
    Console.WriteLine(statisticsName);

    foreach (short yr in years)
    {
        var stat = stats.SingleOrDefault(s => s.InformationYear == yr);

        if (stat != null)
        {
            if (typeof(T) == typeof(double))
            {
                Console.WriteLine(value, format: "0.0");
            }
            else
            {
                Console.WriteLine(value);
            }
        }
        else
        {
            Console.WriteLin(string.Empty);
        }
    }
} 
```

基本上，我想遍历**stats**集合，并写出指定属性的值。我假设我可以使用 LINQ 表达式来做到这一点，但我不知道怎么做！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:51:44.340

使用 IEnumerable<>.Select()：

```
var props = collection.Select(x => x.Property);

foreach (var p in props)
{
  Console.WriteLine(p.ToString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:03:59.367

Gets you the values in order of year:

```
foreach (double value in
    from stat in stats
    where years.Contains(stat.InformationYear)
    orderby stat.InformationYear
    select stat.Property)
{
    Console.WriteLine(value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:14:06.107

如果我理解你的问题，你需要写出 InformationYear 属性的值，所以你的 LINQ 表达式如下：

```
 foreach (double value in
        from stat in stats
        select stat.InformationYear)
    {
        Console.WriteLine(value);
    } 
```

# c# - WCF OData 服务的真实生命周期是什么？

> ID：12580286
> 
> 赞同：3
> 
> 时间：2012-09-25T09:42:44.583
> 
> 标签：c#, .net, wcf, wcf-data-services, odata

我正在开发托管多个 WCF OData 服务的服务器应用程序（C# 4.0，VS2010）。我观察到服务的非常奇怪的行为，并且找不到任何描述我在应用程序中看到的内容的文档。

当服务的客户端由于某种原因断开连接时，服务会按照我的预期进入故障状态。但是它们仍然可以继续正常工作（它们可以毫无问题地接受来自新客户端的连接并继续按预期提供数据 - 所有这些都处于相应 DataServiceHosts 的故障状态）。

如果我增加并发客户端数量，有时同时连接最多的服务之一会静默停止工作。如果我尝试在浏览器中打开其 URL，它会返回“找不到端点”消息。没有任何例外或其他明显的症状我可以用来深入研究这一点。它只是静静地停止。尽管处于故障状态，但具有较少并发客户端的其他服务继续正常工作。有时巨大的并发访问不会触发服务的这种静默死亡，它会继续正常工作。

另一个奇怪的事实。当我打开 WCF 跟踪时，我无法重现静默服务停止。它简直完美。所以我不能使用 WCF 跟踪来调查问题的根源。

谁能解释一下什么是真正的 WCF OData 服务生命周期？为什么它继续在故障状态下工作？静音停止的原因可能是什么？每次客户端断开连接后是否应该重新启动 WCF OData 服务？

# asp.net - 我可以在 SharePoint2010 webpart 中使用 Asp.net 控件吗

> ID：12580289
> 
> 赞同：0
> 
> 时间：2012-09-25T09:42:54.907
> 
> 标签：asp.net, sharepoint, sharepoint-2010

我是 SharePoint 开发新手，我正在使用 VS2010 和 SharePoint2010。

我想知道在 SharePoint Web 部件控件中使用 asp.net ListView 是否存在限制。因为由于某种原因，intelliSense 没有为我提供 ListView，只是一个 GridView

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:54:40.227

SharePoint 中的 Web 部件是 ASP.NET Web 部件。因此，您可以不受任何限制地自由使用 ASP.NET 控件。

背后的代码可能会使用 SharePoint API，但您可以做的一切都由 ASP.NET 提供。

`Edit:`

您是否缺少 ListView 的参考？您需要添加对 System.Web.Extensions 的引用才能使用 ListView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:27:08.047

SharePoint 中没有这种限制。您可以在 SharePoint 中使用任何类型的 asp.net 控件。对于 ListView intelliSense，您需要在使用 ListView 之前在您的控件或 webpart 中注册 system.web.extensions。

**请复制以下代码注册库：**

```
<%@ Register Assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    Namespace="System.Web.UI.WebControls" TagPrefix="asp" %> 
```

# java - 在适用于 Android 的 Google API 10 中显示我的当前位置

> ID：12580297
> 
> 赞同：0
> 
> 时间：2012-09-25T09:43:15.660
> 
> 标签：java, android, google-maps, sdk

我在这段代码中显示我的当前位置时遇到问题。你能告诉我如何添加可以缩放并显示我当前位置的代码吗？

```
public class MapaActivity extends MapActivity
{

 @Override
 public void onCreate(Bundle savedInstanceState)
 {

 super.onCreate(savedInstanceState);
 setContentView(R.layout.mapa);

 MapView mapView = (MapView) findViewById(R.id.mapview);
 mapView.setBuiltInZoomControls(true);

 List<Overlay> mapOverlays = mapView.getOverlays();
 Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
 HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this);

 GeoPoint point = new GeoPoint(44900101,14839100);
 OverlayItem overlayitem = new OverlayItem(point, "Pin","Test pin");

 itemizedoverlay.addOverlay(overlayitem);

 mapOverlays.add(itemizedoverlay); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:22:08.400

对于您的 GeoPoint，您可以使用：

```
LocationManager locationManager;
        locationManager=(LocationManager) getSystemService(LOCATION_SERVICE);
        Location location=locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
        GeoPoint point=new GeoPoint((int)(location.getLatitude()*1E6),(int)(location.getLongitude()*1E6)); 
```

最后添加：

```
 mapView.getController().animateTo(point); 
```

在清单文件中添加权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

# ios - RubyMotion 未加载 AudioToolbox 框架

> ID：12580298
> 
> 赞同：13
> 
> 时间：2012-09-25T09:43:19.060
> 
> 标签：ios, ruby, rubymotion

所以我试图将AudioToolbox与RubyMotion一起使用，

1、新增

```
app.frameworks << 'AudioToolbox' 
```

在 Rakefile 中，

2，在我的一个简单的视图控制器方法中，简单地添加了

```
p AudioFileID 
```

3，然后耙，

4，给定一个错误，

```
uninitialized constant RecorderViewController::AudioFileID (NameError) 
```

显然AudioToolbox中的AudioFileID没有加载，我在CoreAudio中尝试了类似的东西，效果很好。我需要要求什么吗？任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:11:02.970

我认为将 AudioToolbox 添加到您的框架可能正在加载工具包，除非您在构建过程中看到错误。你不需要其他任何东西。

我有一个 RubyMotion 程序，它调用 AudioToolbox 函数，`AudioFileOpenURL`并且`AudioFileGetProperty`没有错误。由于 AudioFileID 是一个结构，我不认为它被定义为使用的裸常量。如果您在使用 AudioToolbox 功能时遇到错误，请更新此问题或开始一个新问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T12:22:18.550

我在 RubyMotion 错误跟踪器上创建了一张票，并自己解决了这个问题 3 天，这就是我发现的

`(/Library/RubyMotion/data/ios/6.1/BridgeSupport/AudioToolbox.bridgesupport)`在即将发布的 RubyMotion 版本中修复此问题之前，您必须为每个目标 iOS 版本修补 AudioToolbox.bridgesupport

替换此行 `<cftype type='^{OpaqueAudioFileID=}' name='AudioFileID'/>`

和 `<opaque type='^{OpaqueAudioFileID=}' name='AudioFileID'/>`

这样**RubyMotion**不会将**AudioFileID**视为在某处定义的结构（因此未初始化的常量错误），您将能够通过调用实例化指向 AudioFileID 的指针`Pointer.new AudioFileID.type`

# php - 替换字段中的表值

> ID：12580311
> 
> 赞同：-1
> 
> 时间：2012-09-25T09:44:07.733
> 
> 标签：php, mysql, database, opencart

我有一个数据库名称`q8marketz`，里面有一个表`product`。该表有许多字段，例如：- 产品 ID、型号、数量、运输等...

我已经将许多产品上传到我的表...有一个字段`shipping`，所有产品的`shipping`值都已设置`1`为，所以现在我想将所有产品的运费值设置为`0`。

有人可以帮助我吗？对不起，我的英语不是很完美...

下面给出了两个产品详细信息...

```
===数据库 q8marketz

== 表产品的表结构

|------
|字段|类型|空|默认
|------
|//**product_id**//|int(11)|否|
|型号|varchar(64)|否|
|首付|varchar(32)|否|
|sku|varchar(64)|否|
|upc|varchar(12)|否|
|ean|varchar(14)|否|
|jan|varchar(13)|否|
|isbn|varchar(13)|否|
|mpn|varchar(64)|否|
|位置|varchar(128)|否|
|数量|int(4)|否|0
|stock_status_id|int(11)|否|
|图像|varchar(255)|是|NULL
|manufacturer_id|int(11)|否|
|运费|tinyint(1)|否|1
|价格|十进制(15,4)|否|0.0000
|点|int(8)|否|0
|tax_class_id|int(11)|否|
|date_available|日期|否|
|权重|小数(15,8)|否|0.00000000
|weight_class_id|int(11)|否|0
|长度|十进制(15,8)|否|0.00000000
|宽度|十进制(15,8)|否|0.00000000
|高度|十进制(15,8)|否|0.00000000
|length_class_id|int(11)|否|0
|减|tinyint(1)|否|1
|最小|int(11)|否|1
|排序顺序|int(11)|否|0
|状态|tinyint(1)|否|0
|添加日期|日期时间|否|0000-00-00 00:00:00
|date_modified|日期时间|否|0000-00-00 00:00:00
|已查看|int(5)|否|0
== 转储表产品的数据

|886|BA-手提包-001ss| | | | | | | |aaaa|95|7|data/hand-bags.jpg|7|1|32.5000|25|0|2012-09-03|0.00000000|1|0.00000000|0.00000000|0.00000000|1|1|1|1|1 |2012-09-25 13:00:18|0000-00-00 00:00:00|0
|883|BA-手提包-001ss| | | | | | | |aaaa|95|7|data/hand-bags.jpg|7|1|32.5000|25|0|2012-09-03|0.00000000|1|0.00000000|0.00000000|0.00000000|1|1|1|1|1 |2012-09-17 14:08:08|2012-09-25 13:00:06|9
== 表产品的表结构

|------
|字段|类型|空|默认
|------
|//**product_id**//|int(11)|否|
|型号|varchar(64)|否|
|首付|varchar(32)|否|
|sku|varchar(64)|否|
|upc|varchar(12)|否|
|ean|varchar(14)|否|
|jan|varchar(13)|否|
|isbn|varchar(13)|否|
|mpn|varchar(64)|否|
|位置|varchar(128)|否|
|数量|int(4)|否|0
|stock_status_id|int(11)|否|
|图像|varchar(255)|是|NULL
|manufacturer_id|int(11)|否|
|运费|tinyint(1)|否|1
|价格|十进制(15,4)|否|0.0000
|点|int(8)|否|0
|tax_class_id|int(11)|否|
|date_available|日期|否|
|权重|小数(15,8)|否|0.00000000
|weight_class_id|int(11)|否|0
|长度|十进制(15,8)|否|0.00000000
|宽度|十进制(15,8)|否|0.00000000
|高度|十进制(15,8)|否|0.00000000
|length_class_id|int(11)|否|0
|减|tinyint(1)|否|1
|最小|int(11)|否|1
|排序顺序|int(11)|否|0
|状态|tinyint(1)|否|0
|添加日期|日期时间|否|0000-00-00 00:00:00
|date_modified|日期时间|否|0000-00-00 00:00:00
|已查看|int(5)|否|0

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:46:06.470

您可以轻松地使用如下更新查询：

```
update product set shipping=0; 
```

这会将*所有*行更新为 0。

如果您只想指定某些选定的行，您可以添加一个`where`子句来限制您更新的行数，如下所示：

```
update product set shipping=0 where points>2; 
```

这将更新所有`points`值大于 2 的行。

编辑：代码可以直接从 mysql 控制台运行，或者通过 PHP 中的数据库调用，如下所示：

```
$dbh = new PDO($hostname, $username, $password);
$sql='update product set shipping=0 where points>2';
$stmt = $dbh->query($sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:54:52.430

您可以使用 SQL UPDATE 语句更新表中的现有记录。

SQL 更新语法：

```
UPDATE table_name
SET column1=value, column2=value2,...
WHERE some_column=some_value 
```

对于您的示例，请使用：

```
UPDATE product
SET shipping=0; 
```

==>代码可以直接从mysql控制台运行。

要使用 PHP 调用，请尝试以下代码：

```
<?php
 $dataBase = new PDO($hostname, $username, $password);
 $sqlQuery ='update product set shipping=0';
 $stmt = $dataBase->query($sqlQuery );
?> 
```

# ios - 我是否需要安装 Xcode 4.5 才能将 iOS 应用程序提交到 App Store？

> ID：12580315
> 
> 赞同：0
> 
> 时间：2012-09-25T09:44:18.600
> 
> 标签：ios, app-store, xcode4.5

看到[这个 cocos2d 的话题](http://www.cocos2d-iphone.org/forum/topic/41104)后，我变得一头雾水。我是否需要安装 Xcode 4.5 才能将我的应用程序提交到 iOS App Store？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:54:26.997

正如评论所暗示的，如果您的部署目标是 ios5.1 或更早版本，您可以使用旧版 Xcode 来执行此操作。我昨晚刚做了这个。也就是说，如果您要包含的某些库是针对新的 ios6 SDK 构建的，那么您可能不会让您的应用程序链接。在这种情况下，您必须将 Xcode 更新到 4.5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T01:48:16.420

目前，如果您的应用不需要任何 iOS 6 API 或功能，则无需安装 Xcode 4.5 即可将应用提交到 App Store。

Apple 可能会在未来某个未知时间点更改此要求。例如，当 iOS 4.0 的 SDK 公开发布时，Apple 停止允许提交使用 1 年多以前的 2.x SDK 开发的应用程序。

# asp.net-mvc - 用于 asp.net mvc 4 的 Web 安装程序和 nuget 安装程序之间的区别

> ID：12580327
> 
> 赞同：0
> 
> 时间：2012-09-25T09:44:48.540
> 
> 标签：asp.net-mvc, installation

我想安装 ASP.NET MVC 4，经过一番谷歌搜索后，我发现了这两个链接

*   [http://www.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)
*   [http://nuget.org/packages/aspnetmvc](http://nuget.org/packages/aspnetmvc)

它们之间有什么区别？第一个提示我它需要 Visual Studio 2010 SP1，下载量约为 600+ Mb。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:24:48.337

首先将安装 MVC 3、[ASP.NET MVC 3 工具更新](http://weblogs.asp.net/scottgu/archive/2011/05/03/asp-net-mvc-3-tools-update.aspx)（也是 SP1 的一部分）和其他修复和改进。第二个仅适用于 Visual Studio，有时可能会给您带来更多问题，或者只是在没有任何帮助的情况下引发错误。例如，当您尝试编译 mvc3 项目时：[在 MVC4 安装后安装 MVC3](http://surilpatel.wordpress.com/2012/08/01/installing-mvc3-after-mvc4-installation/comment-page-1/)

# image - Crystal 报告 blob 字段原始大小

> ID：12580328
> 
> 赞同：1
> 
> 时间：2012-09-25T09:44:51.680
> 
> 标签：image, crystal-reports, size, blob, default

我通过从数据库字段中拖动图片类型的字段在水晶报表中插入图像。图像作为具有默认（原始）大小的 blob 字段插入，即使在数据库中图像可以具有不同的大小。问题是图像没有保留其原始大小。有没有办法在水晶报告中指定图像的原始大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T11:05:02.377

在 C# 中尝试此代码：

```
 CRAXDRT.Report report1 = new CRAXDRT.Report();
        CRAXDRT.Application app = new CRAXDRT.Application();
        report1 = app.OpenReport("YorReport.rpt", OpenReportMethod.OpenReportByDefault);
        for (int i = 1; i < report1.Sections.Count + 1; i++)
        {
            for (int j = 1; j < report1.Sections[i].ReportObjects.Count + 1; j++)
            {
                try
                {
                    CRAXDRT.BlobFieldObject t1 = (CRAXDRT.BlobFieldObject)report1.Sections[i].ReportObjects[j];
                    if (t1.Name == "YourBlobFieldName")
                    {
                        t1.Height = 200;
                        t1.Width = 200;
                    }
                }
                catch (Exception) { }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T09:20:33.783

Crystal 报表不会自动调整图像大小。所以最好在水晶报表中设置原始大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-10T07:45:18.173

选中 BLOB 字段的**Can Grow**复选框。这将按图像的原始大小自动调整字段大小。

# php - PHP dirname 返回符号链接路径

> ID：12580330
> 
> 赞同：9
> 
> 时间：2012-09-25T09:44:56.343
> 
> 标签：php, symlink, dirname

假设我有一个来自`'/one/directory/'`to的符号链接`'/two/directory/'`。

如果我`echo dirname(dirname(\__FILE__))`，它返回`'/one/directory/'`。

什么是最好的退货方式`'/two/directory'`？

**示例用法：**

Vhost`'example.com'`指向 `'/two/directory'

> example.com/hello_world.php
> 
> ```
> <?php 
>     echo dirname(dirname(__FILE__));
> ?> 
> ```

**回报：** `'/one/directory'`

**预期成绩：** `'/two/directory'`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T09:47:58.263

使用`readlink`功能？[http://php.net/manual/en/function.readlink.php](http://php.net/manual/en/function.readlink.php)

您可以检查它是否是符号链接：http `is_link`: [//php.net/manual/en/function.is-link.php](http://php.net/manual/en/function.is-link.php)

```
if (is_link($link)) {
    echo(readlink($link));
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T09:46:25.517

使用[readlink($path)](http://php.net/manual/en/function.readlink.php)读取符号链接的目标。

```
<?php 
    echo readlink(dirname(__FILE__));
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T09:49:46.590

```
<?php

function getRealFile($path) {
    return is_link($path) ? readlink($path) : $path;
}

$path = getRealFile(dirname(__FILE__)); 
```

文档：

[http://php.net/manual/en/function.is-link.php](http://php.net/manual/en/function.is-link.php)
[http://php.net/manual/en/function.readlink.php](http://php.net/manual/en/function.readlink.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-05T08:49:09.500

> 返回“/two/directory”的最佳方法是什么？

使用[https://github.com/logical-and/symlink-detective](https://github.com/logical-and/symlink-detective) 和

```
<?php 

echo SymlinkDetective::detectPath(dirname(dirname(__FILE__))); 
```

将返回`'/two/directory'`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T09:47:21.240

也许用 realpath() ？[http://php.net/manual/en/function.realpath.php](http://php.net/manual/en/function.realpath.php)

编辑： readlink 似乎是一个更好的答案:)

# html - 如何用jquery mobile实现多列表？

> ID：12580336
> 
> 赞同：7
> 
> 时间：2012-09-25T09:45:07.510
> 
> 标签：html, jquery-mobile

我是 jquery mobile 的新手。现在我想为平板电脑 UI 实现具有多列的表。如何使用 jquery 移动框架来实现这个多列表的概念。如果有人做过这个概念，请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:59:40.420

尝试添加如下内容：

```
<div class="ui-grid-b">
<div class="ui-block-a">Block A</div>
<div class="ui-block-b">Block B</div>
<div class="ui-block-c">Block C</div> 
```

这是一个网格布局。JQM 中没有类似 table 的东西，但它可能会模仿它。

试试这个链接：[jQM Grids](http://jquerymobile.com/demos/1.1.1/docs/content/content-grids.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T11:00:44.780

试试流行的插件 - 960 Grid [http://jeromeetienne.github.com/jquery-mobile-960/](http://jeromeetienne.github.com/jquery-mobile-960/)

它为您安排具有灵活宽度的网格等方式提供了更大的灵活性。

顺便说一句，我不是广告:)

# c# - 用于 OpenXml 的 PowerTools。读取页眉/页脚时的空引用

> ID：12580343
> 
> 赞同：1
> 
> 时间：2012-09-25T09:45:20.410
> 
> 标签：c#, html, docx

我的任务是将 docx 文档转换为 Pdf。我决定采用这种方法：将 docx 转换为 html，然后将 html 传递给 ItextSharp。几周以来，我一直在 google、codeplex、sourceforge 和 stackoverflow 等网站上寻找进行这种转换的解决方案，直到找到[Eric White 博客](http://blogs.msdn.com/b/ericwhite/)。在第一印象中，他是处理 OpenXml 文档的绝佳工具。但是当我尝试测试它时，我遇到了关于空引用的错误。读取标头时发生错误（RevisionAccepter 类）

```
 public static void AcceptRevisions(WordprocessingDocument doc)
    {
        AcceptRevisionsForPart(doc.MainDocumentPart);
        foreach (var part in doc.MainDocumentPart.HeaderParts) //part is null
            AcceptRevisionsForPart(part); //null ref exception here
        foreach (var part in doc.MainDocumentPart.FooterParts)
            AcceptRevisionsForPart(part);
        if (doc.MainDocumentPart.EndnotesPart != null)
            AcceptRevisionsForPart(doc.MainDocumentPart.EndnotesPart);
        if (doc.MainDocumentPart.FootnotesPart != null)
            AcceptRevisionsForPart(doc.MainDocumentPart.FootnotesPart);
    } 
```

我用于转换的代码（与示例相同）

```
private void conv()
    {
        byte[] byteArray = File.ReadAllBytes(textBox1.Text);
        using (MemoryStream memoryStream = new MemoryStream())
        {                

            memoryStream.Write(byteArray, 0, byteArray.Length);
            using (WordprocessingDocument doc =
                WordprocessingDocument.Open(memoryStream, true))
            {
                HtmlConverterSettings settings = new HtmlConverterSettings()
                {
                    PageTitle = "My Page Title"

                };
                XElement html = HtmlConverter.ConvertToHtml(doc, settings);

                File.WriteAllText("Test.html", html.ToStringNewLineOnAttributes());
            }
        }
    } 
```

命名空间：

```
using System.Xml;
using System.Xml.Xsl;
using OpenXmlPowerTools;
using System.Xml.Linq;
using DocumentFormat.OpenXml.Packaging; 
```

我试图传递由 word 2010 创建的文档，带有标题和没有标题，但仍然在同一个地方出现错误。也许我错误地传递了文件或文件本身的东西。

也许还有另一种方法可以在不使用商业组件的情况下将 docx 转换为 pdf，例如 Apose。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T05:57:31.500

发现了问题。由于电动工具项目和主项目之间的引用不同，因此发生错误。我的项目上的 DocumentFormat.OpenXml 版本是 2.5.5513.0，而电动工具上的版本是 2.0.5022.0 引用相同的资源后一切正常。

# qt - 为预先存在的 MFC 应用程序编译 Qt 时出现错误 LNK2019

> ID：12580346
> 
> 赞同：1
> 
> 时间：2012-09-25T09:45:33.470
> 
> 标签：qt, visual-studio-2008, mfc

我最近开发了一个 QT 应用程序 (NewSPOISGUI)，它用作工作中的旧 MFC 应用程序的新前端。此应用程序在独立时可以完美编译和运行。我正在使用带有 VS2008 SP1 和加载项的 QT 4.8.2。

目前，我正在尝试测试功能并尝试使 Qt GUI 出现而不是旧的 MFC 应用程序 GUI。作为测试，我将 Qt 应用程序的头文件（newspoisgui.h）包含在 VS2008 的 MFC 应用程序中。不幸的是，尽管添加了与 Qt 应用程序（NewSPOISGUI）相同的路径和库，我仍然遇到：

```
qtmaind.lib(qtmain_win.obj) : error LNK2019: unresolved external symbol _main referenced      in function _WinMain@16
Debug/SPOIS.exe : fatal error LNK1120: 1 unresolved externals 
```

我在网上找到的所有解决方案都无法应用，因为它们不适用于在 VS2008 中使用 Qt。任何帮助将不胜感激。提前致谢。

# java - 即使在 Ubuntu 上使用新的 JBoss 发行版后，JBoss 应用程序部署错误仍然存 在

> ID：12580347
> 
> 赞同：0
> 
> 时间：2012-09-25T09:45:40.027
> 
> 标签：java, deployment, jboss, cxf, ubuntu-10.04

我面临一个非常奇怪的问题。这是那些没有意义的错误之一。在下结论之前请阅读到最后。

1.  当我在 JBoss 上部署包含用 Apache CXF 编写的 Web 服务而不对 web.xml 文件进行任何更改的 Web 应用程序（.ear 文件）时，一切似乎都运行良好。

2.  当我对 web.xml 文件进行一些更改并重建 ear 并重新部署应用程序时，JBoss 由于一些类加载器冲突而无法部署我的应用程序。这完全没问题，因为我期待 JBoss 抛出这些错误。

3.  在我停止 JBoss 服务器实例并将步骤 2 中所做的更改恢复到 web.xml 并重建我的 .ear 文件并在 JBoss 中重新部署应用程序之后，再次抛出在步骤 2 中引发的相同错误。考虑到我在步骤 2 中恢复了对 web.xml 所做的所有更改并使用新的 .ear 文件重新启动 JBoss，这怎么可能？

4.  我什至尝试下载 JBoss 的新副本并在新副本上重建和重新部署应用程序。即使 web.xml 不再包含在步骤 2 中所做的更改，在步骤 2 中显示的相同错误也会显示在应用程序中。

我能够摆脱错误的唯一方法是重新检查我的代码库并构建我的应用程序并在新的 JBoss 服务器中部署我的应用程序的新版本。这没有意义，因为据我所知，更改 web.xml 并不会隐式更改应用程序中的其他文件或类。

我对如何解决这个问题一无所知。我所做的唯一更改是 web.xml 文件，我没有触及任何其他类或文件。为什么错误会永久存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:20:27.343

这次在启动 JBoss 服务器之前，删除服务器配置文件目录下的 tmp 和 work 文件夹。那应该照顾它。

# iphone - 语义问题：添加框架类引用时使用未声明的标识符

> ID：12580349
> 
> 赞同：5
> 
> 时间：2012-09-25T09:45:48.337
> 
> 标签：iphone, ios, xcode, ipad, ios-frameworks

我已经通过 Targets -> Build Phases -> Link binary with Libraries 在我的项目中添加了一些框架。特别是，我在谈论 AVFoundation.framework。我还将所有框架添加到项目导航器的 Frameworks 文件夹中。

但是，当我尝试引用链接框架中的类时，我收到“语义问题 - 使用未声明的标识符”错误。

例如，我在两条底线中遇到了这些错误：

```
 - (void)viewDidLoad {
    [super viewDidLoad];
    AVCaptureSession *session = [[AVCaptureSession alloc] init];
    session.sessionPreset = AVCaptureSessionPresetMedium;
} 
```

我想知道框架是否正确链接到我的项目。那么，我该如何解决呢？我必须说我是 iOs 和 ObjC 开发的新手。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T09:50:39.120

看起来你忘记了：

```
#import <AVFoundation/AVCaptureSession.h> 
```

# c# - 如何将依赖项添加到 Windows 服务

> ID：12580353
> 
> 赞同：-2
> 
> 时间：2012-09-25T09:46:05.940
> 
> 标签：c#, windows-services, dependencies, installshield

如何将依赖项添加到 InstallShield 中的 Windows 服务？我的winservice依赖以下两个服务，所以必须在服务启动前运行：

1.  COMSysApp
2.  SENS

注意：我使用 InstallShield 项目来安装我的服务，而不是 Windows 安装程序类，所以我不能使用 mr 的方式。Jerry.Wang 在[他的文章](http://www.codeproject.com/Articles/23176/Create-a-system-tray-icon-and-a-dialog-for-a-Windo?msg=4375864#xx4375864xx)中建议。

**编辑：**

如何在 installshield 中添加对 SEN 服务的依赖项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T11:20:06.510

如果您对其他服务有依赖关系，则[ServiceInstall 表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371637%28v=vs.85%29.aspx)有 Dependencies 列来描述这一点：

> 此列是系统必须在此服务之前启动的服务或负载排序组的名称列表。用 Null 分隔列表中的名称。如果服务没有依赖项，则指定 Null 或空字符串。使用语法 [~] 插入 Null。对组的依赖意味着如果在尝试启动组的所有成员后至少有一个组成员正在运行，则此服务可以运行。
> 
> 例如，要求系统启动 service1 和 service2，在启动 ServiceInstall 列中列出的服务之前，在 Dependencies 列中输入 service1[~]service2[~][~]。标识符 service1 和 service2 必须出现在表的主键中，或者是已安装的服务的名称。
> 
> 您必须在组名称前加上 + 前缀，以便将它们与服务名称区分开来。要要求系统在启动 ServiceInstall 列中列出的服务之前启动 service1 和排序组 MyGroup 的至少一个成员，请输入 service1[~]+MyGroup[~][~]。

以下是 InstallShield 对他们对该表的表示的看法：

[服务设置](http://helpnet.installshield.com/installshield16helplib/ComponentControlNT.htm#wp1183582)

输入此服务所需的任何服务或负载排序组。在启动此服务之前，系统会尝试启动相关服务或加载排序组的至少一个成员。

使用逗号 (,) 分隔多个依赖项。

> 您必须在每个加载排序组的名称前加上 SC_GROUP_IDENTIFIER（通常是加号 (+)），以便服务控制管理器可以将其与服务区分开来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:19:18.583

我通过在 ServiceComponent Wizard 中添加依赖项自己解决了这个问题。

# php - 通过 HTTPS 在 Internet Explorer 8 中的 Zend_Pdf 流

> ID：12580354
> 
> 赞同：1
> 
> 时间：2012-09-25T09:46:07.780
> 
> 标签：php, zend-framework, pdf, https, download

我使用 Zend_Pdf 创建一个新的 pdf，然后强制浏览器下载文件。该网站只能通过 https 访问。这是我的文件输出：

```
$output = $pdf->render();
$response = new Zend_Controller_Response_Http();
$response->setHeader('Content-Disposition', 'attachment; filename="xyz.pdf"');
$response->setHeader('Content-type', 'application/pdf');
$response->setHeader('Content-length', strlen($output));
$response->setHeader('Cache-Control', 'private');
$response->setHeader('Expires', '0');
$response->setHeader('Pragma', 'private');
$response->setBody($output);
$response->sendResponse(); 
```

为此，我已经阅读了许多关于正确标题的文章，但 Internet Explorer 8 中的某些内容无法正常工作。每次您尝试生成和下载 pdf 时，都会显示下载对话框，但它说没有可下载的内容。文件名错误（而不是 xyz.pdf，它显示了生成表单所在站点的名称）

经过测试和工作：Firefox、Chrome、IE9、Opera、Safari

我还尝试了 Cache-Controle 标头或 Pragma 标头的不同可能性，就像许多文章谈论的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:42:22.680

好的，第三个参数是覆盖选项。

```
$response->setHeader('Cache-Control', 'private', true);
$response->setHeader('Expires', '0', true);
$response->setHeader('Pragma', 'private', true); 
```

# php - Cakephp 不同的模型和控制器与同一个表

> ID：12580355
> 
> 赞同：1
> 
> 时间：2012-09-25T09:46:09.090
> 
> 标签：php, cakephp

可能是个愚蠢的问题。

由于我的控制器和模型太大（我也不想弄乱旧模块），我想创建一个新的控制器和模型，我想将代码与现有的..也就是说，我想移动从用户控制器和用户模型到计费控制器和计费模型的一些代码（没有账单表，所有信息都存储在用户表中，所以我给出了 useTable='users'）。我不想执行任何用用户模型编写的代码，在执行 billings 控制器时，只需要执行 BillingModel 代码。

业务控制器

```
class BillingsController extends AppController 
{

    function add()
    {
        if (!empty($this->request->data)) 
        {
            $this->Billing->create();
            if ($this->Billing->save($this->request->data)) 
            {
                echo 'Saved'; // Message, redirect etc
            }
        }
    }
} 
```

计费模式

```
class Billing extends AppModel {

    public $useTable = 'users';

        public $hasOne = array('Profile');

public $validate = array(
        'email' => array(
            'email' => array(
                'rule' => 'email',
                'message' => 'Please provide a valid email address.',
                'last' => true,
            ),
                 'first_name' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                'message' => 'Please enter your name',
            ),
                    )
        );

} 
```

所有表单字段都将以 data[Business] 作为前缀。

数据正确**保存**到数据库中。我只是想知道，这种方法有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:09:09.430

在这种情况下，据我了解，您在两个模型中都复制了一些代码（验证、关系等）。在我看来，更好的解决方案是使用 Billing 扩展用户模型

```
class Billing extends Users {

} 
```

控制器的情况相同：

```
class BillingsController extends UsersController 
{

} 
```

# c# - 在 C# 中使用 LINQ 从列表中选择不同的值

> ID：12580360
> 
> 赞同：18
> 
> 时间：2012-09-25T09:46:18.007
> 
> 标签：c#, .net, linq

我有一个员工的集合

```
Class Employee

{
  empName
  empID
  empLoc 
  empPL
  empShift
} 
```

我的清单包含

```
 empName,empID,empLoc,empPL,empShift
    E1,1,L1,EPL1,S1 
    E2,2,L2,EPL2,S2
    E3,3,L3,EPL3,S3
    E4,4,L1,EPL1,S1
    E5,5,L5,EPL5,S5
        E6,6,L2,EPL2,S2 
```

我需要选择具有不同值 empLoc、empPL、empShift 的员工。

有没有办法使用 LINQ 来实现这一点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-25T09:50:41.780

您可以使用`GroupBy`匿名*类型*，然后获取`First`：

```
list.GroupBy(e => new { 
                          empLoc = e.empLoc, 
                          empPL = e.empPL, 
                          empShift = e.empShift 
                       })

    .Select(g => g.First()); 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-09-25T09:55:13.333

您可以实现自定义[`IEqualityComparer<Employee>`](http://msdn.microsoft.com/en-us/library/ms132151.aspx)：

```
public class Employee
{
    public string empName { get; set; }
    public string empID { get; set; }
    public string empLoc { get; set; }
    public string empPL { get; set; }
    public string empShift { get; set; }

    public class Comparer : IEqualityComparer<Employee>
    {
        public bool Equals(Employee x, Employee y)
        {
            return x.empLoc == y.empLoc
                && x.empPL == y.empPL
                && x.empShift == y.empShift;
        }

        public int GetHashCode(Employee obj)
        {
            unchecked  // overflow is fine
            {
                int hash = 17;
                hash = hash * 23 + (obj.empLoc ?? "").GetHashCode();
                hash = hash * 23 + (obj.empPL ?? "").GetHashCode();
                hash = hash * 23 + (obj.empShift ?? "").GetHashCode();
                return hash;
            }
        }
    }
} 
```

现在您可以使用以下重载[`Enumerable.Distinct`](http://msdn.microsoft.com/en-us/library/bb338049.aspx)：

```
var distinct = employees.Distinct(new Employee.Comparer()); 
```

* * *

使用匿名类型的不太可重用、健壮和高效的方法：

```
var distinctKeys = employees.Select(e => new { e.empLoc, e.empPL, e.empShift })
                            .Distinct();
var joined = from e in employees
             join d in distinctKeys
             on new { e.empLoc, e.empPL, e.empShift } equals d
             select e;
// if you want to replace the original collection
employees = joined.ToList(); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-25T09:48:59.520

您可以尝试使用此代码

```
var result =  (from  item in List
              select new 
              {
                 EmpLoc = item.empLoc,
                 EmpPL= item.empPL,
                 EmpShift= item.empShift
              })
              .ToList()
              .Distinct(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-31T01:50:56.000

我很好奇哪种方法会更快：

1.  将 Distinct 与自定义 IEqualityComparer 或
2.  使用 Cuong Le 描述的 GroupBy 方法。

我发现根据输入数据的大小和组的数量，Distinct 方法的性能可能要高得多。（由于组的数量趋向于列表中的元素数量，因此 distinct 运行得更快）。

代码在 LinqPad 中运行！

```
 void Main()
    {
        List<C> cs = new List<C>();
        foreach(var i in Enumerable.Range(0,Int16.MaxValue*1000))
        {
            int modValue = Int16.MaxValue; //vary this value to see how the size of groups changes performance characteristics. Try 1, 5, 10, and very large numbers
            int j = i%modValue; 
            cs.Add(new C{I = i, J = j});
        }
        cs.Count ().Dump("Size of input array");

        TestGrouping(cs);
        TestDistinct(cs);
    }

    public void TestGrouping(List<C> cs)
    {
        Stopwatch sw = Stopwatch.StartNew();
        sw.Restart();
        var groupedCount  = cs.GroupBy (o => o.J).Select(s => s.First()).Count();
        groupedCount.Dump("num groups");
        sw.ElapsedMilliseconds.Dump("elapsed time for using grouping");
    }

    public void TestDistinct(List<C> cs)
    {
        Stopwatch sw = Stopwatch.StartNew();
        var distinctCount = cs.Distinct(new CComparerOnJ()).Count ();
        distinctCount.Dump("num distinct");
        sw.ElapsedMilliseconds.Dump("elapsed time for using distinct");
    }

    public class C
    {
        public int I {get; set;}
        public int J {get; set;}
    }

    public class CComparerOnJ : IEqualityComparer<C>
    {
        public bool Equals(C x, C y)
        {
            return x.J.Equals(y.J);
        }

        public int GetHashCode(C obj)
        {
            return obj.J.GetHashCode();
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T09:50:04.243

尝试，

```
var newList = 
(
from x in empCollection
select new {Loc = x.empLoc, PL = x.empPL, Shift = x.empShift}
).Distinct(); 
```

# css - 如何在纯css中创建不接触边缘的双边框？

> ID：12580366
> 
> 赞同：2
> 
> 时间：2012-09-25T09:47:00.347
> 
> 标签：css

在导航设计中，我需要提供这样的边框。我知道[如何创建双边框](https://stackoverflow.com/questions/5753351/how-to-make-double-lines-border-in-css-each-line-in-different-color-without-u)，但不知道如何创建顶部和底部有一些间隙的边框。

![在此处输入图像描述](../Images/bb449ad0409d8558f50235657a04eaa9.png)

我知道它可以使用图像来完成，但很想知道是否可以只用 CSS 制作

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T10:00:01.977

是的，只需使用 CSS 即可轻松完成。

# [演示](http://dabblet.com/gist/3780993)

**HTML**：

```
<ul class='navigation'>
    <li><a href='#'>nav item</a></li>
    <!-- as many navigation items as you would like -->
    <li><a href='#'>nav item</a></li>
</ul> 
```

相关**CSS**：

```
.navigation { padding: 0; list-style: none; }
.navigation li {
    float: left;
    padding: .35em 0;
    border-top: solid 2px #e4e4e3;
    border-bottom: solid 3px #94a10f;
    background: linear-gradient(#fafafa, #e5e5e5);
}
.navigation a {
    display: block;
    padding: .5em;
    border-left: solid 1px #fff;
    border-right: solid 1px #a4a4e3;
    color: #000;
    text-decoration: none;
}
.navigation li:first-child a { border-left: none; }
.navigation li:last-child a { border-right: none; } 
```

* * *

或者，**如果您不想在 top 和 bottom 有不可点击的区域**，您可以尝试另一种方式：

# [演示](http://dabblet.com/gist/3781034)

**CSS**：

```
.navigation {
    display: inline-block;
    overflow: hidden;
    padding: .35em 0;
    border-top: solid 2px #e4e4e3;
    border-bottom: solid 3px #94a10f;
    background: linear-gradient(#fafafa, #e5e5e5);
    list-style: none;
}
.navigation li {
    float: left;
    border-left: solid 1px #fff;
    border-right: solid 1px #a4a4e3;
}
.navigation a {
    display: block;
    padding: .5em;
    margin: -.35em 0;
    color: #000;
    text-decoration: none;
}
.navigation li:first-child { border-left: none; }
.navigation li:last-child { border-right: none; } 
```

* * *

第三种方法，也**将可点击区域扩展到边框，**是在链接上使用伪元素来获得横向边框。

# [演示](http://dabblet.com/gist/3781063)

**CSS**：

```
.navigation { margin-top: 7em; list-style: none; }
.navigation li {
    float: left;
    background: linear-gradient(#fafafa, #e5e5e5);
}
.navigation a {
    display: block;
    position: relative;
    padding: .85em;
    border-top: solid 2px #e4e4e3;
    border-bottom: solid 3px #94a10f;
    color: #000;
    text-decoration: none;
}
.navigation a:before {
    position: absolute;
    top: .35em; bottom: .35em; left: 0;
    border-right: solid 1px #fff;
    border-left: solid 1px #a4a4e3;
    content: '';
}
.navigation li:first-child a:before { border: none; } 
```

# jmeter - 如果 Jmeter 中的响应断言失败，如何停止线程

> ID：12580368
> 
> 赞同：19
> 
> 时间：2012-09-25T09:47:05.700
> 
> 标签：jmeter

我想在我的脚本中实现错误处理（如 LR 中的文本检查）。

我能够使用响应断言验证文本。

但我的问题是如果响应断言（文本检查）失败，如何停止线程。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-25T10:39:29.433

在 Thread 组中，选择**Action to be taken after a sample error**下的**Stop Thread**。一旦断言失败，这将停止测试

 *** * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-11-13T11:50:10.883

如果您需要将此行为限制为一个请求，请将*结果状态操作处理*程序添加为请求的子项，然后将其设置为*停止线程***

# ncrunch - 从特定类别中排除测试

> ID：12580370
> 
> 赞同：14
> 
> 时间：2012-09-25T09:47:12.600
> 
> 标签：ncrunch

**“底线”：**您如何设置 NCrunch 以排除某个类别中的所有测试，例如“LongRunning”？

* * *

Stack Overflow[搜索](https://stackoverflow.com/search?q=%2bNCrunch%20%2bCategory)提供的结果为零，[相关的 NCrunch wiki 页面](http://wiki.ncrunch.net/test-categories.ashx)仅告诉我“ *NUnit 的 Category 属性与 NCrunch 一样强大*”，这很好，但没有告诉我如何*使用*这些类别。

为了进一步澄清，我希望在某处有一个复选框列表来打开/关闭类别，类似于[NUnit Test Runner](http://www.nunit.org/index.php?p=category&r=2.4)中排除某些类别中的所有测试的`/exclude`选项。

PS。我只用 NCrunch 标记了这个问题，我使用 NUnit 作为我的测试框架似乎并不相关。如果答案表明否则我很乐意添加标签。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-25T19:59:12.433

在 wiki 上进行更多搜索后，我发现[此页面](http://wiki.ncrunch.net/test-run-modes.ashx?HL=category)对其进行了描述：您需要创建一个新的**Engine Mode**。谁会想到？

这是让我工作的两个相关步骤/屏幕截图。首先，进入 NCrunch 菜单，选择“Set Engine Mode”，然后选择“Customise Engine Modes...”：

![第 1 步 - 启用自定义引擎](../Images/7d5a731ac3bf9db27a3427c07a6649a5.png)

然后第2步，选择“自动运行所有测试+类别过滤器”，单击“添加引擎模式”。然后给它一个名字，并添加一个条件“没有类别”并选择要忽略的类别，例如“LongRunning”。然后点击“确定”：

![第 2 步 - 添加带有过滤器的自定义引擎](../Images/5b697354d71476d420c78bd0db90f735.png)

最后选择新引擎并过滤您的测试！

# ruby-on-rails - IN 子句 in :conditions in rails

> ID：12580374
> 
> 赞同：0
> 
> 时间：2012-09-25T09:47:22.553
> 
> 标签：ruby-on-rails, ruby

我在 rails 2 工作，我想执行 Query

```
PunchingInformation.all(
  :select => "users.id, login, firstname, lastname, 
    sec_to_time(avg(time_to_sec(punching_informations.punch_in_time))) as 'avg_pit',
    sec_to_time(avg(time_to_sec(punching_informations.punch_out_time))) as 'avg_pot'",
  :joins => :user,
  :group => "users.id",
  :conditions => { 
    "punching_informations.date between '#{start_date}' and '#{end_date}'", 
    ["punching_informations.user_id IN (?)", employees.map { |v| v.to_i } ]
  }
) 
```

但它总是返回错误，如

> Mysql::Error: Unknown column 'punching_informations.date between '2012-09-01' and '2012-09-25'' in 'where clause': SELECT users.id,login, firstname,lastname, sec_to_time(avg(time_to_sec (punching_informations.punch_in_time))) as 'avg_pit', sec_to_time(avg(time_to_sec(punching_informations.punch_out_time))) as 'avg_pot' FROM `punching_informations` INNER JOIN `users`ON `users`.id = `punching_informations`.user_id AND ( `users`. `type`= 'User' OR `users`. `type`= 'AnonymousUser' ) WHERE ( `punching_informations`. `date between '2012-09-01' and '2012-09-25'`IN ('punching_informations.user_id IN (?)','--- \n- 28\n- 90\n')) GROUP BY users.id

需要你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:15:06.217

有点不清楚你的意思（你有数组，但像哈希一样用花括号 {}），但似乎 ruby​​ 将第一个字符串（`"punching_informations.date between '#{start_date}' and '#{end_date}'"`）视为一列，将第二个数组视为期望值的数组，从而使无效的 IN 条件。

如果重写为

```
:conditions => { 
   [ "(punching_informations.date between '#{start_date}' AND '#{end_date}') AND punching_informations.user_id IN (?)", employees.map { |v| v.to_i } ]
 } 
```

甚至更好

```
:conditions => { 
   [ "(punching_informations.date between ? AND ?) AND punching_informations.user_id IN (?)", start_date, end_date, employees.map { |v| v.to_i } ]
 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-25T09:55:04.223

在 select 中添加 punching_informations.date 和 punching_informations.user_id

:select => "punching_informations.date，punching_informations.user_id，users.id，....

# asp.net - DropDownlist 比较验证器问题

> ID：12580375
> 
> 赞同：0
> 
> 时间：2012-09-25T09:47:23.960
> 
> 标签：asp.net

我正在验证下拉列表，如果下拉列表的值为“选择”，那么它应该显示错误消息，否则不显示。

这是我的代码：

```
<asp:DropDownList ID="ddlGender" ValidationGroup="ben" runat="server" Width="200px" CssClass="ap-main">
                            </asp:DropDownList>
                            <asp:CompareValidator ID="cv1" ValidationGroup="ben" ControlToValidate="ddlGender" runat="server"
                              ValueToCompare="Select" Operator="NotEqual" ErrorMessage="Please select Gender." Type="String"></asp:CompareValidator> 
```

这不起作用。

有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:56:25.433

如果您使用验证器来检查是否选择了某些内容，那么请使用[RequiredField 验证器](http://msdn.microsoft.com/en-us/library/5hbw267h%28v=vs.71%29.aspx)并使用名为`InitialValue="Select"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:56:06.070

你可以在服务器端尝试..

```
if(ddlGender.SelectedValue=="Select")
 {
 //error message..
 } 
```

或者

```
 if(ddlGender.SelectedText=="Select")
     {
    //error message
     } 
```

当您加载该下拉列表或 onselectedindexchanged 事件时..

# java - Java7 StandardWatchEventKind.ENTRY_CREATE 文件写入完成

> ID：12580378
> 
> 赞同：2
> 
> 时间：2012-09-25T09:47:30.057
> 
> 标签：java, events, filesystems, nio

我正在为 java 7 openjdk 实现提供的文件系统使用新的 io api。我的应用程序每隔几秒钟监视一次事件，并检查收集的事件列表中的 StandardWatchEventKind.ENTRY_CREATE 类型。我的问题是，ENTRY_CREATE 是否对应于文件系统中文件的初始创建或写入过程的完成？

例如，如果有一个应用程序将一个大图像写入磁盘需要 10 秒才能完成，那么 ENTRY_CREATE 事件何时会在 0 秒或 10 秒被触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:10:37.910

ENTRY_CREATE 对应于目录条目的创建，无论是文件还是嵌套目录。Watch 服务不会告诉您何时开始或完成写入文件。

# php - 设置超时的窗口位置

> ID：12580382
> 
> 赞同：0
> 
> 时间：2012-09-25T09:47:38.187
> 
> 标签：php, javascript, jquery, mysql

我必须将重定向延迟几秒钟。当我尝试这样做时，它不起作用。我在下面附上了我的 Javascript 和 php。谁能帮我解决问题。窗口位置不起作用。

```
<script type="text/javascript">
  // constants to define the title of the alert and button text.
var ALERT_TITLE = "Answer";
var ALERT_BUTTON_TEXT = "Ok";

// over-ride the alert method only if this a newer browser.
// Older browser will see standard alerts
if(document.getElementById) {
    window.alert = function(txt) {
        createCustomAlert(txt);
    }
}

function createCustomAlert(txt) {
    // shortcut reference to the document object
    d = document;

    // if the modalContainer object already exists in the DOM, bail out.
    if(d.getElementById("modalContainer")) return;

    // create the modalContainer div as a child of the BODY element
    mObj = d.getElementsByTagName("body")[0].appendChild(d.createElement("div"));
    mObj.id = "modalContainer";
     // make sure its as tall as it needs to be to overlay all the content on the page
    mObj.style.height = document.documentElement.scrollHeight + "px";

    // create the DIV that will be the alert 
    alertObj = mObj.appendChild(d.createElement("div"));
    alertObj.id = "alertBox";
    // MSIE doesnt treat position:fixed correctly, so this compensates for positioning the alert
    if(d.all && !window.opera) alertObj.style.top = document.documentElement.scrollTop + "px";
    // center the alert box
    alertObj.style.left = (d.documentElement.scrollWidth - alertObj.offsetWidth)/2 + "px";

    // create an H1 element as the title bar
    h1 = alertObj.appendChild(d.createElement("h1"));
    h1.appendChild(d.createTextNode(ALERT_TITLE));

    // create a paragraph element to contain the txt argument
    msg = alertObj.appendChild(d.createElement("p"));
    msg.innerHTML = txt;

    // create an anchor element to use as the confirmation button.
    btn = alertObj.appendChild(d.createElement("a"));
    btn.id = "closeBtn";
    btn.appendChild(d.createTextNode(ALERT_BUTTON_TEXT));
    btn.href = "#";
    // set up the onclick event to remove the alert when the anchor is clicked
    btn.onclick = function() { removeCustomAlert();return false; }

}

// removes the custom alert from the DOM
function removeCustomAlert() {
    document.getElementsByTagName("body")[0].removeChild(document.getElementById("modalContainer"));
}

   function handler(var1,quizId,isCorrect,score) {
        alert(var1);
        //var id = parseInt(quizId);
        quizId++;
        var points=10;      
        if(isCorrect=='true'){
            score=score+points;
            var string_url="quiz.php?qusId="+quizId+"&score="+score;
            setTimeout('window.location =string_url',5000) ;
        }
        else{
            var string_url="quiz.php?qusId="+quizId+"&score="+score;
            setTimeout('window.location =string_url',5000) ;
            }

    }

  </script> 
```

* * *

```
while($row1=mysql_fetch_array($result1)){

    ?><input type="radio" name="answers" value="<?php echo $row1['answers'];?>"  onclick="handler('<?php echo $row1["feedback"]; ?>',<?php echo $qusId;?>,'<?php echo $row1["isCorrect"]; ?>',<?php echo $score;?>)
"/ ><?php echo $row1['answers']; ?><br/>

<?php 
} ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:54:22.497

setTimeout 的第一个参数应该是一个函数。尝试使用匿名函数包装它，如下所示：

```
setTimeout(function() {
  window.location = string_url
}, 5000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:09:40.753

试试这个：

```
`setTimeout("createCustomAlert(txt);", 3000);` 
```

# c#-4.0 - flickr C# monodroid 需要帮助

> ID：12580391
> 
> 赞同：0
> 
> 时间：2012-09-25T09:48:01.160
> 
> 标签：c#-4.0, xamarin.android

我需要在我的应用程序中使用 flickr。是否有任何适用于 monodroid 的 Flickr C# API？我正在使用 Monodevelop 3.0.4.7 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:00:06.430

FlickrNet - [http://flickrnet.codeplex.com/](http://flickrnet.codeplex.com/) - 声称可以与 Mono 和 MonoTouch 一起使用 - 所以也可以随意尝试使用 MonoDroid！

（我知道[https://github.com/migueldeicaza/OpenFlowSharp](https://github.com/migueldeicaza/OpenFlowSharp)使用了带有补丁的早期版本）

# c# - 在 Linq 中使用 WHERE 子句选择 AS

> ID：12580392
> 
> 赞同：7
> 
> 时间：2012-09-25T09:48:05.687
> 
> 标签：c#, linq

我正在尝试使用 Linq 查询填充下拉列表。但是，我需要将 FirstName 和 Surname 作为一个字段。连接`DDL.DataTextField`返回字段未找到错误。

SQL 将是这样的：

```
SELECT (FirstName + SPACE + Surname) AS FullName FROM Table WHERE ID=1 
```

当前Linq：

```
public IList<mytable> GetNames(int p_ID)
{
    return db.mytable.Where(c => c.ID_fk == p_ID).ToList();
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-25T09:49:47.137

如果您*只*需要全名，您可以使用它：

```
public IList<string> GetNames(int p_ID)
{
    return db.mytable.Where(c => c.ID_fk == p_ID)
                     .Select(x => x.FirstName + " " + x.Surname)
                     .ToList();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T09:49:56.493

你可以试试这个：

```
return db.mytable.Where(c => c.ID_fk == p_ID).Select(c=>c.FirstName + " " + c.Surname). ToList(); 
```

所以你有一个字符串列表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T09:52:18.567

你可以试试

```
return db.mytable.Where(a => a.ID_fk==p_ID)
                  .Select(a => a.FirstName + "-" + a.Surname)
                  .ToList(); 
```

# asp.net - 使用 LINQ 绑定 2 下拉列表

> ID：12580393
> 
> 赞同：0
> 
> 时间：2012-09-25T09:48:09.777
> 
> 标签：asp.net, sql, linq, drop-down-menu

我被困在我的项目中，我真的需要一些帮助！我有 2 个下拉列表“DropDownPostal”和“DropDownCity”。当用户/员工登录系统时，他会在第一个下拉列表中获得 Postals 列表。假设他选择了一个邮政和标签到第二个下拉菜单“城市”。我希望使用用户之前选择的邮政来更新城市。我已经完成了所有使用登录并将数据从数据库检索到 DropDownPostal 的工作。但我无法用任何数据更新其他 DropDownCity！

这是我为 postaldropdown 制作的事件的代码，我试图制作一个“onLeave”事件。

```
 using System;
  using System.Collections.Generic;
  using System.Linq;
  using System.Web;
   using System.Web.UI;
   using System.Web.UI.WebControls;

 namespace Test
  {
public partial class WebForm1 : System.Web.UI.Page
{

    // Entity
    DanxWebsiteEntities dwe = new DanxWebsiteEntities();

    protected void Page_Load(object sender, EventArgs e)
    {

        //Dropdown postback
        //DropDownListPostal.AutoPostBack = false;

        //Sessions
        if (Session["UserID"] == null && Session["Name"] == null)
        {
            Response.Redirect("Error.aspx");
        }
        else
        {
            msg1.Text = "User id: "+Session["UserID"].ToString();
            msg2.Text = "User Name: " + Session["Name"].ToString();
        }   
        //Update dropdownpostal
        if (!IsPostBack)
        {
            //Guid is structure type 
            Guid id =(Guid) Session["UserID"];
            DropDownListPostal.DataSource = (from custumAdr in dwe.VW_CustumAddress
                                             where custumAdr.UserID ==(Guid)id
                                             select custumAdr).ToList();
            DropDownListPostal.DataTextField = "Postal";
            DropDownListPostal.DataValueField = "UserID";
            DropDownListPostal.DataBind();
        }
    }

    protected void DropDownListPostal_SelectedIndexChanged1(object sender, EventArgs e)
    {
        foreach (var data in dwe.VW_CustumAddress)
            if (data.Postal == DropDownListPostal.SelectedItem.ToString())
            {
                DropDownListBy.Text = data.City;

            }
            else
            {

            }
    }
    }

} 
```

我什至不确定这段代码是否接近正确。非常感谢您对代码的详细帮助。

干杯:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:00:40.793

1.  确保 DropDownListPostal 具有 AutoPostBack = True

2.  您的代码中没有 DropDownListPostal.DataBind() ，因此您分配给它的数据没有被绑定。确保在使用 .DataSource 分配数据后调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:37:44.483

正如你在这里提到的

```
//Dropdown postback
//DropDownListPostal.AutoPostBack = false; 
```

请使其成为真实。

```
<asp:DropDownList ID="DropDownListPostal" runat="server"  AutoPostBack="true" OnSelectedIndexChanged="DropDownListPostal_SelectedIndexChanged"></asp:DropDownList> 
```

而不是使用**DropDownListBy.Text = data.City;**

您也可以按值选择下拉列表。

```
 DropDownListBy.SelectedValue = data.id 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T11:02:31.187

如果我没听错的话，你只需要`dropDownListCity`根据 中选择的值更改 中显示的值`dropDownListPostal`。为此，您需要绑定两个下拉列表，`Page_Load`然后在`SelectedIndexChanged`触发时处理选定的索引。

```
private IEnumerable<KeyValuePair<string, string>> GetData()
{
    using(var dataContext = new DbEntities())
    {
        return dataContext.VW_CustumAddress 
            .ToList() 
            .Select(item => new KeyValuePair<string, string>(item.Postal, item.City))
            .ToArray();
    }
}

protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostback)
    {
        IEnumerable<KeyValuePair<string,string>> data = GetData();
        //Bind Postal dropdown list
        dropDownListPostal.DataSource = data.Select(kvp => kvp.Key).ToList();
        // ^ Select only 'Postal' column in dropdown list.
        dropDownListPostal.DataBind();
        // Bind City dropdown list
        // We need to bind to a key-value pair to know the correspondence between items
        dropDownListCity.DataValueField = "Key";
        dropDownListCity.DataTextField = "Value";
        dropDownListCity.DataSource = data;
        dropDownListCity.DataBind();
    }
} 
```

现在，将控件绑定到数据后，您只需要处理`SelectedIndexChanged`事件`dropDownListPostal`（不要忘记`AutoPostback="true"`在标记中设置`dropDownListPostal`）。 **编辑**：在选择一个项目之前，清除下拉列表的选择以确保只选择一个项目。

```
protected void OnDropDownListPostalSelectedIndexChanged(object sender, EventArgs e)
{
    dropDownListCity.ClearSelection();
    var postal = dropDownListPostal.SelectedValue;
    var listItem = dropDownListCity.Items.FindByValue(postal);
    listItem.Selected = true;
} 
```

那应该这样做。希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T09:59:06.690

您可以尝试使用此代码

```
 //You must bind your datas before set Text Value
 DropDownListBy.DataSource =...;
 DropDownListBy.DataBind();

 DropDownListBy.Text = data.City; 
```

链接：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.text.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.text.aspx)

或者你也可以

```
 DropDownListBy.Items.Add(data.City); 
```

# php - preg_match_all() - 无法在 foreach 循环中获取要匹配的字符串

> ID：12580401
> 
> 赞同：0
> 
> 时间：2012-09-25T09:48:34.533
> 
> 标签：php, regex, string

我有一个与[这篇文章](https://stackoverflow.com/questions/3684920/regex-to-get-float-from-a-string)中回答的问题类似的问题。

当我测试作为该帖子中答案提供的正则表达式时，它按预期工作：

```
 $str = 'Days - £9.20 to £11.20 Sat - £11.80 Sun - £13.30';            

  preg_match_all("/£\s*\d+(?:\.\d+)?/", $str, $matches);                    

  print_r($matches);

  // Produces
  Array
  (
     [0] => Array
        (
          [0] => £9.20
          [1] => £10.20
          [2] => £11.80
         )
   ) 
```

当我尝试使用它来处理来自我已在 foreach 循环中转换为数组的 CSV 数据时，问题就出现了：

```
foreach($arrJobs as $job)
{
    $str = $job['payDetails1'] . ' ' . $job['payDetails2'];                     

    // Try to find salary from string           

    preg_match_all("/£\s*\d+(?:\.\d+)?/", $str, $matches);

    print_r($matches);                  
}

// In this example the output from every item is an empty array:

 Array
 (
   [0] => Array
       (
       )

  ) 
```

我在第一个示例中用于测试函数的字符串是通过在第二个示例中回显 $str 的值并复制和粘贴它来获得的。

我不明白为什么相同的字符串会返回不同的结果？为什么当我将字符串粘贴到变量中时它可以正常工作，但是从 CSV 中检索字符串时却找不到匹配项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:23:12.070

[答案来自上面的评论和反馈]

### 问题

这里的问题是您的源文件和 CSV 输入未使用相同的字符编码保存。

PHP 中的所有内置字符串函数（包括`/u`不使用标志时的 PCRE 函数）都对字节序列进行盲目操作，并且不能识别字符本身。这意味着对于包含 ASCII 范围之外的字符的脚本，运行时行为将根据脚本保存在哪种编码中而改变，因为对于实践中使用的每种编码，这些字符将转换为不同的字节。您的脚本包含一个这样的字符：[井号](http://www.fileformat.info/info/unicode/char/a3/index.htm)。

### 快速解决方案

假设此处可能使用的编码是[ISO 8859-1 (Western European)](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)和[UTF-8](http://en.wikipedia.org/wiki/Utf-8)，则与正则表达式匹配的所有剩余字符在两种编码中都具有相同的表示形式，因此它们不会出现问题。那么让我们看看我们可以对英镑符号做些什么。

通常，您可以通过将文字替换为`£`涵盖所有字符编码的交替组来解决此问题。

```
 POUND SIGN ( £ )
when encoded in    is represented as
------------------------------------
ISO 8859-1         0xA3
UTF-8              0xC2 0xA3 
```

因此，`(\xa3|\xc2\xa3)`第一部分涵盖 ISO 8859-1 和第二部分 UTF-8。但是，也可以看到两个部分以`\xa3`相同的结果结尾`\xc2?\xa3`（使`\xc2`前缀可选）。

因此，您可以通过将代码更改为

```
preg_match_all('/\xc2?\xa3\s*\d+(?:\.\d+)?/', $str, $matches); 
```

### 更好的解决方案

然而，最好的解决方案是始终使用 UTF-8。为此，您需要

1.  将脚本另存为 UTF-8
2.  确保输入 CSV 以 UTF-8 开头，或者在处理之前将其转换为 UTF-8（您可以使用它[`iconv`](http://php.net/manual/en/function.iconv.php)来执行此操作）

这样，您可以返回在脚本中保存文字井号，并且仍然可以安全地知道，无论 CSV 数据的输入编码是什么，它都能正常工作。

# android - 登录不起作用

> ID：12580402
> 
> 赞同：0
> 
> 时间：2012-09-25T09:48:39.527
> 
> 标签：android, login

我已经使用硬编码密码编写了用于登录身份验证的简单代码。我的问题是即使我输入了正确的密码，我的控制也会进入 elese 循环

```
edt=(EditText)findViewById(R.id.edt);
btn=(Button)findViewById(R.id.sub);
s1=edt.getText().toString();

btn.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
      Log.d("mynameeeeee",s1);
      if(s1=="123")
      {
        Toast.makeText(getApplicationContext(), "Successful",Toast.LENGTH_LONG).show();
      }
      else
      {
         Log.d("coming in elseeeee","coming in elseeeee");
         Toast.makeText(getApplicationContext(), "not valid",Toast.LENGTH_LONG).show();
      }
    }
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:00:10.420

Here's the problem :

You are storing a reference of the edit text content at creation time, when the edit text is empty.

You should retrieve the content of the edit text EVERYTIME you want to compare, which is when the button is clicked in your case :

Do the following :

```
edt=(EditText)findViewById(R.id.edt);
btn=(Button)findViewById(R.id.sub);

btn.setOnClickListener ( new OnClickListener () {
    @Override
    public void onClick ( View v ) {
            Log.d ( "mynameeeeee" , edt.getText().toString() );
            if ( edt.getText().toString().equals ( "123" ) )
            {
                Toast.makeText(getApplicationContext(), "Successful",Toast.LENGTH_LONG).show();
            }
            else
            {
                Log.d("coming in elseeeee","coming in elseeeee");
                Toast.makeText(getApplicationContext(), "not valid",Toast.LENGTH_LONG).show();
            }

        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T09:49:50.333

字符串应该像这样比较：

```
if(s1.equals("123")) {} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T09:50:16.757

像这样更改您的 if 语句

```
if(s1.equals("123"))
{
      Toast.makeText(getApplicationContext(), "Successful",Toast.LENGTH_LONG).show();
}
else
{
       Log.d("coming in elseeeee","coming in elseeeee");
       Toast.makeText(getApplicationContext(), "not valid",Toast.LENGTH_LONG).show();
} 
```

比较字符串时总是使用`.equals()`函数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T09:53:13.983

`==`检查两个变量是否都引用同一个对象。在这种情况下，因为它们指的是不同的对象，所以结果`==`是错误的。

使用 equals() 方法`s1.equals("123")`检查字符串对象的内容。

# iphone - 我有下面给出的 json 数据，我想在表格中显示它

> ID：12580407
> 
> 赞同：-2
> 
> 时间：2012-09-25T09:49:00.253
> 
> 标签：iphone, objective-c, json

```
Departments:[
  {
     "name":"Designing",
     "id":"1.1",
     Employees:[
     {
       "name":"Ramesh",
       "id":"1.1.1",
       "salary":"4lakhs"
     },
     {
       "name":"Suresh",
       "id":"1.1.2",
       "salary":"4lakhs"
     },
     {
       "name":"Mukesh",
       "id":"1.1.3",
       "salary":"4lakhs"
     }
     ]
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:53:50.510

做这个：

```
 NSDictionary *jsonDictionary = [NSJSONSerialization JSONObjectWithData:jsondata options:kNilOptions error:&error];

NSArray *arrDepartment = [jsonDictionary objectForKey:@"Departments"]; 
```

现在你有 arrDepartment，它是 tableview 数据源。所以相应地使用

进一步让员工像这样：

```
NSArray *arrEmployees = [[arrDepartment objectAtIndex:0]  objectForKey:@"Employees"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:55:13.847

在你的 .h 文件中取 NSMutableArray ：

```
@property (nonatomic, retain) NSMutableArray *employeeData; 
```

在 .m 文件中

```
@synthesize employeeData; 
```

然后对您的代码进行必要的更改。

```
-(void)getEmpData
{

 self.employeeData=[[NSMutableArray alloc] init];

     NSData *jsonData = @"Your Json Data";

            NSDictionary *jsonDictionary = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:&error];

        NSArray *arrDepartment = [jsonDictionary objectForKey:@"Departments"];

        NSArray *arrEmployees = [[arrDepartment objectAtIndex:0] objectForKey:@"Employees"];

          self.employeeData= [arrEmployees mutableCopy];  
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

NSDictionary *dict =[self.employeeData objectAtIndex:indexPath.row];

             NSLog(@"empname=%@", [dict objectForKey:@"name"]); 
             NSLog(@"empid=%@",[dict objectForKey:@"id"]); 
             NSLog(@"salary=%@",[dict objectForKey:@"salary"]); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:51:22.857

[使用SBJSON](http://stig.github.com/json-framework/)解析它并在 NSMutableArray 中获取这个`Departments`数组，然后根据`indexpath.row;`

并且您的数据应该是这种格式使用[http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)来检查 json 格式

```
{
   "Departments":[
      {
         "name":"Designing",
         "id":"1.1",
         "Employees":[
            {
               "name":"Ramesh",
               "id":"1.1.1",
               "salary":"4lakhs"
            },
            {
               "name":"Suresh",
               "id":"1.1.2",
               "salary":"4lakhs"
            },
            {
               "name":"Mukesh",
               "id":"1.1.3",
               "salary":"4lakhs"
            }
         ]
      }
   ]
} 
```

# java - Twitter服务自动化

> ID：12580408
> 
> 赞同：0
> 
> 时间：2012-09-25T09:49:01.140
> 
> 标签：java, oauth, twitter, twitter-oauth

是否可以在某些使用 oauth 授权的推特服务上模拟用户行为（您必须输入推特凭据并允许应用程序访问它）？

例如，我在一些 twitter 服务上对几个 twitter 帐户进行了一些常规操作，并想编写一个程序（java\python 等）来自动完成。有没有办法登录这些服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:58:32.880

可以使用用户名和密码自动执行应用程序授权。您需要“模拟”用户接受（在身份验证网页上）并解析结果页面上的 PIN 码。

只有当您检索和保存用户令牌（密钥和秘密）时，您才需要用户名和密码（或手动接受）一次。

一些 OAuth 库已经提供了此类功能

# javascript - 原型 1.7.1 和本机数组使用的错误

> ID：12580410
> 
> 赞同：1
> 
> 时间：2012-09-25T09:49:10.003
> 
> 标签：javascript, exception-handling, prototypejs

使用 chrome 21 和原型 1.7.1，我发现 using`throw $break`不起作用。

当`Error`它应该被停止时被抛出到浏览器

```
if (e != $break) { ... } 
```

我怀疑这是因为`inject`在 Chrome 中有一个本机实现，并且它没有被与其他内置函数相同的功能包装。

假设这一点是正确的，还是我的代码有问题？

[重新创建的](http://jsfiddle.net/epoch/Dxefg/)代码：

```
var a = [1,2,3,4,5,6,7,9].inject([], function(arr, e) {
    console.log(e);
    if (e === 5) {
        throw $break;
    }

    arr.push('Done ' + e);
    return arr;
});
console.log('Final Array : ' + a) 
```

**更新**

刚刚用 Firefox 14 和 IE 9 测试过，同样的错误出现了..

​<strong>更新（2015）

这似乎已通过`1.7.3`Chrome 45.0.2454.101 测试过

通过检查来源验证，`reduce`已删除

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:02:13.117

问题是从 Prototype 1.7.1 开始，`Array#inject`有两个实现，它们的行为不同。（这不是很好^(tm)。）这是 Prototype 1.7.1 和 1.7.0 之间的重大变化，正如我们可以看到使用[this fiddle](http://jsfiddle.net/Dxefg/2/)与[this one](http://jsfiddle.net/Dxefg/3/)。

如果本机`Array`对象具有`reduce`ES5 中的函数，`Array#inject`则使用它——无需处理`$break` ——而如果没有，`Array#inject`则通过`Enumerable#inject`, which uses `Enumerable#each`, which handles实现`$break`。

如果您搜索 Prototype 1.7.1 源，您可以看到这一点。首先，您在 中找到非`reduce`版本`Enumerable`，然后`reduce`在内容中进一步找到版本，如果不存在`Array`，您会看到该`Array`版本抓取了该版本。`Enumerable``reduce`

# android - 如果 Android LocalServerSocket 和 Java ServerSocket 有什么区别呢？

> ID：12580415
> 
> 赞同：2
> 
> 时间：2012-09-25T09:49:18.337
> 
> 标签：android, serversocket

`LocalServerSocket`如果 Android和 Java之间有什么区别`ServerSocket`？它们有相同的功能吗？我认为 LocalServerSocket 是 Linux 的`ServerSocket`Java`ServerSocket`实现，Java 自己实现。所以`LocalServerSocket`和`ServerSocket`具有相同的功能。我对吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-16T07:30:32.737

我面对这个问题，我发现了很多令人惊奇的东西。

**`ServerSocket`**：等待请求通过网络进入。它根据该请求执行一些操作，然后可能将结果返回给请求者。它使用网络协议进行通信。

**`LocalServerSocket`**: 创建一个**以指定名称监听**的新服务器套接字。在 Android 平台上，**名称是在 Linux 抽象命名空间中创建的（而不是在文件系统上）。**

套接字系列用于有效地在同一台机器上的进程之间进行通信。传统上，UNIX 域套接字可以是未命名的，也可以绑定到文件系统路径名（标记为套接字类型）。 **Linux 还支持独立于文件系统的抽象命名空间。**

套接字权限对抽象套接字没有意义：进程 umask 在绑定抽象套接字时没有影响，改变对象的所有权和权限（通过 fchown 和 fchmod）对套接字的可访问性没有影响。当所有对套接字的打开引用都关闭时，抽象套接字会自动消失。抽象套接字命名空间是一个不可移植的 Linux 扩展。

这两者在通信和权限方面存在差异。

更多信息： http:
[//man7.org/linux/man-pages/man7/unix.7.html](http://man7.org/linux/man-pages/man7/unix.7.html)
[https://developer.android.com/reference/android/net/LocalServerSocket](https://developer.android.com/reference/android/net/LocalServerSocket)
[https://developer.android.com /reference/java/net/ServerSocket](https://developer.android.com/reference/java/net/ServerSocket)

# sql - 获取 Emp_ID

> ID：12580416
> 
> 赞同：-4
> 
> 时间：2012-09-25T09:49:21.670
> 
> 标签：sql, sql-server, sql-server-2008, tsql

在 Table_A 中，我有属性“Verantwortlicher”。该属性分别包含人的姓和名，即“Doe John”

在 Table_B 中，我有两个属性“Lastname_NAM”和“Firstname_NAM”，它们当然分别包含一个人的姓氏和名字，即“Lastname_NAM”-Doe “Firstname_NAM”-John

Table_A 有一个外键 (Responsible_Emp_ID)，它引用了 Table_B 的主键 (Emp_ID)

我想要加入这两个表，以便在 Table_A 中的字符串类型全名旁边，我还有那个人的 ID（当然来自 Table_B）

我忘了提到我需要这些数据，所以我可以在外键中填充值。Table_A 为空。

我正在使用 T-SQL 请帮助，谢谢，D。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:04:12.107

Try this:

```
--Populate TableA
INSERT INTO TableA(Responsible_Emp_ID, Verantwortlicher) 
SELECT EmpID, FirstName + ' ' + LastName
FROM TableB B

--SELECT to join the 2 tables
SELECT B.EmpID, A.Verantwortlicher
FROM TableB B
INNER JOIN TableA A
    ON B.EmpID = A.Responsible_Emp_ID

--Just make the join
SELECT C.FullName, A.EmpID FROM
(SELECT FirstName + ' ' + LastName AS FullName
FROM TABLE B) C
INNER JOIN TableA A
    ON C.FullName = A.Verantwortlicher 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:15:53.987

试试下面的代码

```
SELECT 
    B.EmpID, 
    ISNULL(A.Verantwortlicher,B.Firstname_NAM++B.Lastname_NAM) 
FROM 
    TableB B 
        LEFT JOIN TableA A 
            ON B.EmpID = A.Responsible_Emp_ID 
```

# c++ - RegOpenKeyEx 返回错误 87 又名“INVALID_PARAMETER”

> ID：12580418
> 
> 赞同：3
> 
> 时间：2012-09-25T09:49:32.397
> 
> 标签：c++, windows, winapi, mfc, registry

我正在使用 RegOpenKeyEx、RegDeleteKey 和 RegEnumKey 实现递归注册表删除。

**问题::**虽然代码在 Vista x86/x64 和 Win 7 x86/x64 上运行得非常好，但在 XP 上对于 HKCR 中的某些键却失败了

**问题区域::** HKCR\Installer\Products\SomeKey

**错误代码::** 87 (INVALID_PARAMETER)

**奇怪的行为::**在我使用 REGEDIT 打开密钥的那一刻删除密钥。

**代码：：**

```
static BOOL RcrsvRegDel( HKEY hKey, LPTSTR lpszSub )
{
BOOL    bRet = TRUE ;
LONG    lRet ;
DWORD   dwSize = MAX_PATH ;
TCHAR   szName[MAX_PATH] ;
TCHAR   szFullKey[MAX_PATH * 2] ;
HKEY    hKeySub = NULL ;
HRESULT hr = NULL ;

do{
    lRet = RegOpenKeyEx( hKey, lpszSub, 0, KEY_ENUMERATE_SUB_KEYS | DELETE, &hKeySub ) ;
    printf("RegOpenKey:: %S :: lRet = %ld\n", lpszSub, lRet) ;
    if( lRet != ERROR_SUCCESS )
    {
        if( lRet == ERROR_FILE_NOT_FOUND )
        {
            bRet = TRUE ;
            break ;
        }
        else
        {
            bRet = FALSE ;
            break ;
        }
    }

    while( ERROR_NO_MORE_ITEMS != (lRet = RegEnumKeyEx(hKeySub, 0, szName, &dwSize, NULL, NULL, NULL, NULL)) )
    {
        bRet = RcrsvRegDel( hKeySub, szName) ;
        if( bRet == FALSE )
            break ;
    }

    if( hKeySub != NULL )
    {
        RegCloseKey(hKeySub) ;
        hKeySub = NULL ;
    }

    lRet = RegDeleteKey( hKey, lpszSub ) ;
    printf("RegDelKey:: %S :: lRet = %ld\n", lpszSub, lRet) ;
    if( lRet == ERROR_SUCCESS )
    {
        bRet = TRUE ;
        break ;
    }
}while(0) ;
return bRet ;
} 
```

知道发生了什么吗？

**更新：：**

我还尝试了带有以下标志的 samDesired 参数

-KEY_READ

-KEY_READ | KEY_WRITE

-KEY_ENUMERATE_SUB_KEYS

-KEY_ENUMERATE_SUB_KEYS | 删除

上述标志都不起作用:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:15:17.917

因为您不能使用带有标志 KEY_WOW64_32KEY 的句柄打开的 RegDeleteKey。有关信息，请参阅[http://msdn.microsoft.com/en-us/library/aa384129(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa384129(v=vs.85).aspx)。您必须将 RegDeleteKeyEx 与相同的键一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:41:46.930

您不能用于`RegDeleteKey()`删除 64 位系统上的 32 位密钥。 [文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384129.aspx)说了这么多：

> > RegDeleteKey 函数不能用于访问备用注册表视图。

您必须[`RegDeleteKeyEx()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724847.aspx)改用。

尝试这样的事情：

```
typedef BOOL (WINAPI *LPFN_ISWOW64PROCESS)(HANDLE, PBOOL);
extern LPFN_ISWOW64PROCESS fnIsWow64Process;

typedef LONG (WINAPI *LPFN_REGDELETEKEYEX)(HKEY, LPCTSTR, REGSAM, DWORD);
extern LPFN_REGDELETEKEYEX fnRegDeleteKeyEx; 
```

.

```
BOOL WINAPI IsWow64Process_Impl(HANDLE hHandle, PBOOL Wow64Process);
{
    *Wow64Process = FALSE;
    return TRUE;
}

BOOL WINAPI IsWow64Process_Stub(HANDLE hProcess, PBOOL Wow64Process)
{
    fnIsWow64Process = (LPFN_ISWOW64PROCESS) GetProcAddress(GetModuleHandle(TEXT("kernel32")), "IsWow64Process");

    if ( NULL == fnIsWow64Process )
        fnIsWow64Process = &IsWow64Process_Impl;

    return fnIsWow64Process(hProcess, Wow64Process);
}

LONG WINAPI RegDeleteKeyEx_Impl(HKEY hKey, LPCTSTR lpSubKey, REGSAM samDesired, DWORD dwReserved)
{
    return RegDeleteKey( hKey, lpSubKey );
}

LONG WINAPI RegDeleteKeyEx_Stub(HKEY hKey, LPCTSTR lpSubKey, REGSAM samDesired, DWORD dwReserved)
{
    fnRegDeleteKeyEx = (LPFN_REGDELETEKEYEX) GetProcAddress(GetModuleHandle(TEXT("advapi32")),
        #ifdef UNICODE
        "RegDeleteKeyExW"
        #else
        "RegDeleteKeyExA"
        #endif
    );

    if ( NULL == fnRegDeleteKeyEx )
        fnRegDeleteKeyEx = &RegDeleteKeyEx_Impl;

    return fnRegDeleteKeyEx( hKey, lpSubKey, samDesired, dwReserved );
}

LPFN_ISWOW64PROCESS fnIsWow64Process = &IsWow64Process_Stub;
LPFN_REGDELETEKEYEX fnRegDeleteKeyEx = &RegDeleteKeyEx_Stub; 
```

.

```
BOOL IsWin64()
{
    #if defined(_WIN64)
    return FALSE;  // 64-bit programs run only on Win64
    #elif defined(_WIN32)
    // 32-bit programs run on both 32-bit and 64-bit Windows so must sniff
    BOOL f64 = FALSE;
    return fnIsWow64Process(GetCurrentProcess(), &f64) && f64;
    #else
    return FALSE; // Win64 does not support Win16
    #endif
} 
```

.

```
static BOOL RcrsvRegDel( HKEY hKey, LPTSTR lpszSub ) 
{ 
    BOOL    bRet = TRUE; 
    LONG    lRet; 
    DWORD   dwSize; 
    TCHAR   szName[MAX_PATH+1]; 
    HKEY    hKeySub = NULL; 

    REGSAM Wow64Flag = (IsWin64()) ? KEY_WOW64_32KEY : 0;

    lRet = RegOpenKeyEx( hKey, lpszSub, 0, KEY_ENUMERATE_SUB_KEYS | KEY_SET_VALUE | DELETE | Wow64Flag, &hKeySub ) ; 
    printf("RegOpenKey:: %S :: lRet = %ld\n", lpszSub, lRet) ; 

    if( lRet != ERROR_SUCCESS ) 
    {
        if ( lRet != ERROR_FILE_NOT_FOUND )
            bRet = FALSE; 
    }
    else
    {
        do
        {
            dwSize = MAX_PATH;
            lRet = RegEnumKeyEx( hKeySub, 0, szName, &dwSize, NULL, NULL, NULL, NULL );

            if ( lRet != ERROR_SUCCESS )
            {
                if ( lRet != ERROR_NO_MORE_ITEMS )
                    bRet = FALSE;

                break;
            }

            bRet = RcrsvRegDel( hKeySub, szName ); 
            if ( !bRet ) 
                break; 
        }
        while (1);

        RegCloseKey(hKeySub); 

        if ( bRet )
        {
            if ( Wow64Flag != 0 )
                lRet = fnRegDeleteKeyEx( hKey, lpszSub, Wow64Flag, 0 );
            else
                lRet = RegDeleteKey( hKey, lpszSub );
            printf("RegDelKey:: %S :: lRet = %ld\n", lpszSub, lRet) ; 

            if ( lRet != ERROR_SUCCESS )
                bRet = FALSE; 
        }
    }

    return bRet;
} 
```

话虽如此，请考虑使用[`RegDeleteTree()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379776.aspx)or[`SHDeleteKey()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773486.aspx)代替。让他们为你做递归。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T06:01:47.850

你可以这样做。将该标志作为输入参数，并在调用递归函数时为 RegOpenKeyEx 传递一个标志，并再次传递一组标志。我已经尝试过您的代码，它现在运行良好，但不确定是什么导致了问题。

```
static BOOL RcrsvRegDel( HKEY hKey, LPTSTR lpszSub, DWORD dwOpenFlags )
{
    BOOL    bRet = TRUE ;
    LONG    lRet ;
    DWORD   dwSize = MAX_PATH ;
    TCHAR   szName[MAX_PATH] ;
    HKEY    hKeySub = NULL ;
    HRESULT hr = NULL ;
    HANDLE  hProcess = NULL ;
    HANDLE  hToken = NULL ;

    do{
        bRet = SetPrivilege( SE_BACKUP_NAME, TRUE ) ;
        if( bRet == FALSE )
        {
            bRet = FALSE ;
            break ;
        }

        lRet = RegOpenKeyEx( hKey, lpszSub, 0, dwOpenFlags, &hKeySub ) ;
        if( lRet != ERROR_SUCCESS )
        {
            bRet = FALSE ;
            break ;
        }

        while( ERROR_NO_MORE_ITEMS != (lRet = RegEnumKeyEx(hKeySub, 0, szName, &dwSize, NULL, 
            NULL, NULL, NULL)) )
            if( !RcrsvRegDel(hKeySub, szName, dwOpenFlags) ) 
            {
                bRet = FALSE ;
                break ;
            }

        lRet = RegDeleteKey( hKey, lpszSub ) ;
        printf("RegDelKey:: %S :: lRet = %ld\n", lpszSub, lRet) ;
        if( lRet != ERROR_SUCCESS )
        {
            bRet = FALSE ;
            break ;
        }

        if( hKeySub != NULL )
        {
            RegCloseKey(hKeySub) ;
            hKeySub = NULL ;
        }
    }while(0) ;
    return bRet ;
}

static BOOL SetPrivilege( LPCTSTR lpszPrivilege, BOOL bEnablePrivilege ) 
{
    LUID    luid ;
    BOOL    bRet = TRUE ;
    HANDLE  hToken = NULL ;
    HANDLE  hProcess = NULL ;
    TOKEN_PRIVILEGES tp ;

    do{
        hProcess = GetCurrentProcess() ;
        if( 0 == OpenProcessToken(hProcess, TOKEN_ADJUST_PRIVILEGES, &hToken) )
        {
            bRet = FALSE ;
            break ;
        }

        if( !LookupPrivilegeValue(NULL, lpszPrivilege, &luid) )
        {
            bRet = FALSE ;
            break ;
        }

        tp.PrivilegeCount = 1 ;
        tp.Privileges[0].Luid = luid ;

        if( bEnablePrivilege )
            tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED ;
        else
            tp.Privileges[0].Attributes = 0 ;

        if( !AdjustTokenPrivileges(hToken, FALSE, &tp, sizeof(TOKEN_PRIVILEGES), (PTOKEN_PRIVILEGES)NULL, 
            (PDWORD)NULL) )
        {
            bRet = FALSE ;
            break ;
        }

        if( ERROR_NOT_ALL_ASSIGNED == GetLastError() )
        {
            bRet = FALSE ;
            break ;
        }
    }while(0) ;
    if( hToken != NULL ) CloseHandle( hToken ) ;
    return bRet ;
} 
```

# signalr - Access-Control-Allow-Origin 不允许 signalR

> ID：12580423
> 
> 赞同：0
> 
> 时间：2012-09-25T09:49:52.240
> 
> 标签：signalr

我收到错误

```
XMLHttpRequest cannot load http://127.0.0.1:8099//negotiate?_=1348566460118\. Origin http://localhost:49848 is not allowed by Access-Control-Allow-Origin 
```

如果我运行下面的代码

```
 <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>

    <script src="Scripts/jquery-1.8.2.js"></script>
    <script src="Scripts/jquery.signalR-0.5.3.js"></script>

</head>
<body>
    <script type="text/javascript"> 
        jQuery.support.cors = true;
        var con = $.connection("http://127.0.0.1:8099/");
        $.connection.url = "http://127.0.0.1:8099/signalr";

        con.start({ transport: 'auto', xdomain: true }, function () {
           console.log('connection started!');
       });

    </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:33:18.090

代码有几个问题：

1) 您缺少对 /signalr/hubs 的脚本引用。

在您的情况下，它必须来自自托管服务器。所以你需要添加：

```
<script src="http://127.0.0.1:8099/signalr/hubs"></script> 
```

2）您的 con 变量未指向正确的对象。

代替

```
var con = $.connection("http://127.0.0.1:8099/"); 
```

它应该是

```
jQuery.support.cors = true;

var con = $.connection.hub;
con.url = "http://127.0.0.1:8099/signalr";

con.start(function() {
    console.log('connection started!');
}); 
```

# android - 如何在 Android 中通过彩信发送下载的图像

> ID：12580427
> 
> 赞同：0
> 
> 时间：2012-09-25T09:50:01.797
> 
> 标签：android, email, mms

在我的应用程序中，我正在从服务器下载图像。现在我想通过彩信和电子邮件发送此图像。

我怎样才能做到这一点。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:54:25.957

首先将图片保存到 SD 卡中，然后使用以下代码打开彩信应用程序以发送保存的图片：

```
Intent sendIntent = new Intent(Intent.ACTION_SEND); 
sendIntent.putExtra("sms_body", "some text"); 
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(url));//put the uri of your image here
sendIntent.setType("image/png"); 
```

阅读[此链接](http://jtribe.blogspot.in/2008/12/sending-mms-with-android.html)以获取更多信息。

阅读[此链接](https://stackoverflow.com/questions/2972845/how-to-send-image-via-mms-in-android)以编程方式发送彩信。

# javascript - 把字符串变成数组？

> ID：12580431
> 
> 赞同：4
> 
> 时间：2012-09-25T09:50:09.337
> 
> 标签：javascript, json

如果我在下面有这个字符串，我怎样才能轻松地将它变成一个数组？

```
"[[0.01,4.99,0.01],[5,14.95,0.05]]" 
```

我想要与以下相同的结果：

```
var x = [[0.01,4.99,0.01],[5,14.95,0.05]]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T09:51:40.350

```
var x = JSON.parse("[[0.01,4.99,0.01],[5,14.95,0.05]]"); 
```

或者 jQuery 进行 JSON 解析的方式（优于`eval`）：

```
var x = (new Function("return " + "[[0.01,4.99,0.01],[5,14.95,0.05]]"))(); 
```

为了使这个答案完整，您可以使用旧浏览器的 polyfill 来支持`JSON.parse`和`JSON.stringify`. 我推荐[json3](http://bestiejs.github.com/json3/)，因为 Crockfords json2 是为了 crockfordy （内部人员知道我的意思）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T09:53:23.550

```
var x = JSON.parse("[[0.01,4.99,0.01],[5,14.95,0.05]]"); 
```

对于没有内置 JSON 对象的旧浏览器，您可能需要下载 Crockford's [`json2.js`](https://github.com/douglascrockford/JSON-js)，它定义了一个具有相同 API 的 JSON 对象（如果尚未定义）。

# c++ - 为什么 C++11 有 `make_shared` 而没有 `make_unique`

> ID：12580432
> 
> 赞同：52
> 
> 时间：2012-09-25T09:50:11.837
> 
> 标签：c++, c++11

> **可能重复：**
> [make_unique 和完美转发](https://stackoverflow.com/questions/7038357/make-unique-and-perfect-forwarding)

为什么C++11有`make_shared`模板，却没有`make_unique`模板？

这使得代码非常不一致。

```
auto x = make_shared<string>("abc");
auto y = unique_ptr<string>(new string("abc")); 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-25T09:52:40.673

根据 Herb Sutter 在[本文](http://herbsutter.com/gotw/_102/)中的说法，这是“部分疏忽”。这篇文章包含一个很好的实现，并为使用它提供了一个强有力的案例：

```
template<typename T, typename ...Args>
std::unique_ptr<T> make_unique( Args&& ...args )
{
    return std::unique_ptr<T>( new T( std::forward<Args>(args)... ) );
} 
```

**更新**：原始更新[已更新](http://herbsutter.com/2013/05/29/gotw-89-solution-smart-pointers/)，重点已更改。

# iphone - UIScrollview 自动布局问题

> ID：12580434
> 
> 赞同：31
> 
> 时间：2012-09-25T09:50:24.993
> 
> 标签：iphone, ios, uiscrollview, ios6, autolayout

我的自动布局（可能）和我的滚动视图有问题！

我的问题

1.  我向下滚动 ![看法](../Images/d8fcf27ce52aabb302f95cba5ee7398b.png)

2.然后我推送到另一个视图

3.然后我回去，滚动视图看起来像那样，我无法滚动到最高点。（我在滚动视图的弹跳中看到它） ![滚动视图](../Images/e6c789bb17245fc7da7df8331c416fe7.png)

有谁能够帮我？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-10T21:36:25.253

包含视图控制器中的以下代码片段似乎也解决了这个问题，而不依赖于显式大小：

```
- (void)viewDidDisappear:(BOOL)animated {
  [super viewDidDisappear:animated];
  self.mainScrollView.contentOffset = CGPointZero;
} 
```

它确实将内容偏移量重置为原点，但其他答案似乎也是如此。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-02T14:10:48.423

如果您仍在寻找答案，我今天在头撞墙上两天后找到了答案。我只是将代码粘贴给您，但最重要的是当您加载滚动视图时..

```
 -(void)viewWillAppear:(BOOL)animated{

    [scrollView setFrame:CGRectMake(0, 0, 320, 800)];
}

-(void)viewDidAppear:(BOOL)animated
{
    [scrollView setScrollEnabled:YES];
    [scrollView setContentSize:CGSizeMake(320, 800)];

} 
```

所有这些都是之前加载的`-(void)viewDidLoad`

请注意，在这两种情况下，高度都是 800，这对于解决此问题至关重要。祝你的项目好运；）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-29T18:45:48.873

我正在使用亚当的解决方案，但是当我用动画解散时开始遇到问题：YES。在我的代码中，内容偏移量在 viewWillAppear 之后设置了一段时间（因为 viewWillAppear 似乎为时过早）。

```
- (void)viewDidDisappear:(BOOL)animated
{
    self.scrollOffsetToPersist = self.scrollView.contentOffset;
    self.scrollView.contentOffset = CGPointZero;

    [super viewDidDisappear:animated];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [[NSOperationQueue mainQueue] addOperationWithBlock:^
     {
         self.scrollView.contentOffset = self.scrollOffsetToPersist;
     }];
} 
```

编辑：另一种更好的方法是在 viewDidLayoutSubviews 中重新设置它:)

```
- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubviews];

    if(!CGPointEqualToPoint(CGPointZero, self.scrollOffsetToPersist))
    {
        self.scrollView.contentOffset = self.scrollOffsetToPersist;
        self.scrollOffsetToPersist = CGPointZero;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-07T07:39:53.353

这不是很好，但我通过在自动布局发生后在 viewDidAppear 中设置内容大小、设置 scrollOffset 并在 viewDidDisappear 中保持滚动偏移量，然后设置滚动偏移回到它在 viewDidAppear 中的持久状态。

像这样：

```
-(void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:YES];
    self.scrollView.contentSize = self.scrollViewInnerView.frame.size;
    self.scrollView.contentOffset = [self.scrollOffsetToPersist CGPointValue];

}

-(void)viewDidDisappear:(BOOL)animated{
    [super viewDidDisappear:YES];
    self.scrollOffsetToPersist = [NSValue valueWithCGPoint:self.scrollView.contentOffset];
    self.scrollView.contentOffset = CGPointZero;
} 
```

一点也不优雅，但我想我会分享的作品。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-29T10:16:18.850

问题原因 ScrollView 在应用 AutoLayout 之前设置了 ContentOffset。解决方案是：

创建私有财产

```
@property (assign,nonatomic) CGPoint scrollviewContentOffsetChange; 
```

添加代码以查看方法

```
- (void)viewWillAppear:(BOOL)animated {
  [super viewWillAppear:animated];
  self.scrollView.contentOffset = CGPointZero;
}

- (void)viewWillDisappear:(BOOL)animated {
  [super viewWillDisappear:animated];
  self.scrollviewContentOffsetChange = self.scrollView.contentOffset;
}

- (void)viewDidLayoutSubviews {
  [super viewDidLayoutSubviews];

  self.scrollView.contentOffset = self.scrollviewContentOffsetChange;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-05T22:45:11.127

我使用 UITabBarController 和具有自动布局的不同视图。视图比设备的屏幕长。从一个选项卡切换到另一个选项卡有时会导致您描述的问题。仅当视图在切换之前向下滚动时才会发生这种情况。我在这里尝试了所有建议，但这对我的情况不起作用。我的解决方案是在离开视图之前再次向上滚动。至少在 iOS 6 中解决这个错误：

```
-(void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    [scrollView setContentOffset:CGPointZero animated:NO];
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-04T12:05:06.120

你试过这个吗？

```
self.automaticallyAdjustsScrollViewInsets = NO; 
```

就我而言，这就是解决我的问题的原因。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-19T22:06:20.367

我有同样的问题。结果我在内容视图上设置了一个约束，将它的 y 中心与超级视图的 y 中心对齐。当我删除这个约束时，它工作得很好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-28T09:18:00.517

尝试这个

```
@property (nonatomic, assign) CGPoint scrollViewContentOffsetChange;

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    self.scrollView.contentOffset = CGPointZero;
}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    self.scrollViewContentOffsetChange = _scrollView.contentOffset;
}

- (void)viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];
    _scrollView.contentOffset = self.scrollViewContentOffsetChange;
} 
```

# iis-7 - Windows Server Web (SP2) x64 和 IIS7.0 上的实体框架 5

> ID：12580443
> 
> 赞同：1
> 
> 时间：2012-09-25T09:50:49.690
> 
> 标签：iis-7, .net-4.5, entity-framework-5, windows-server

我在安装了 Windows Server Web (SP2) 的测试服务器上运行了一个测试网站。我刚刚在上面安装了.NET4.5。在网站（来自模板的简单 ASP.NET 网络表单）中，我使用了 Entity Framework 5 Spatial 类型，非常简单的代码仅用于测试，在我的本地开发机器上运行良好：

```
var conn = new DbEntities();
var geo = conn.tbl_SpatialData.First().GeoInfo;
var geom = DbGeometry.FromGml(geo.AsGml());
litText.Text = geom.AsGml(); 
```

但是在服务器上它给了我这个错误：

**空间类型和函数不适用于此提供程序，因为找不到程序集“Microsoft.SqlServer.Types”版本 10 或更高版本。**

它要连接的 sql 数据库位于不同的服务器上，并且是 SQL Server 2008 -> 我正在从本地开发机器连接到同一个数据库。

我已经尝试在我的本地计算机上搜索 dll，并将其添加到网站的 bin 文件夹中，但是它给了我一个新的错误，请求另一个 dll。我想像在我的开发机器上一样全局安装这些 dll。我缺少什么或者我应该在服务器上安装什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:11:59.523

该程序集及其依赖项是 SQL Server 管理对象的一部分。此功能必须安装在服务器上。它应该是 SQL Server 的客户端工具或客户端工具 SDK 的一部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-05T10:21:47.783

当它出现在已发布的服务器中时，这可能会对您有所帮助

[http://blogs.msdn.com/b/adonet/archive/2013/12/09/microsoft-sqlserver-types-nuget-package-spatial-on-azure.aspx](http://blogs.msdn.com/b/adonet/archive/2013/12/09/microsoft-sqlserver-types-nuget-package-spatial-on-azure.aspx)

> 如果您可以控制服务器，则只需安装 CLR Types for SQL Server。可以在[此处下载](http://www.microsoft.com/en-us/download/details.aspx?id=35580)CLR 类型的 SQL Server 2012 SP1 版本。`SQLSysClrTypes.msi`是您想要的安装程序，并且有 x86（32 位）和 x64（64 位）版本，具体取决于您要部署到的机器的体系结构。
> 
> 但是，在目标机器上安装额外的软件并不总是一种选择——尤其是当您要部署到不属于您的机器（例如 Windows Azure 网站）时。幸运的是，所需的程序集可以与您的应用程序一起部署。
> 
> 步骤 1：安装[Microsoft.SqlServer.Types NuGet 包](https://www.nuget.org/packages/Microsoft.SqlServer.Types/)。
> 
> ```
> PM> Install-Package Microsoft.SqlServer.Types 
> ```
> 
> 第 2 步：确保将适当版本的本机 `SqlServerSpatial110.dll`程序集复制到输出目录并与您的应用程序一起部署。
> 
> 安装包时将在 Visual Studio 中打开的 ReadMe.txt 文件中包含有关如何执行此操作的步骤。

# c# - 如何为枚举使用自定义 UITypeEditor？

> ID：12580444
> 
> 赞同：1
> 
> 时间：2012-09-25T09:50:50.197
> 
> 标签：c#, .net, propertygrid, uitypeeditor

[我根据 MSDN 的演练http://msdn.microsoft.com/en-us/library/ms171840.aspx](http://msdn.microsoft.com/en-us/library/ms171840.aspx)为我的笑脸类型编写了一个自定义 UITypeEditor

当用户单击省略号时，我的 UITypeEditor 将启动一个模式对话框。

```
public class SmileyEditor : UITypeEditor
{
    public override UITypeEditorEditStyle GetEditStyle(System.ComponentModel.ITypeDescriptorContext context)
    {
        return UITypeEditorEditStyle.Modal;
    } 
```

经过 MUCH PAIN 之后，我发现如果我的类型是类，它可以工作，但如果它是枚举则不行。这是怎么回事？

```
 [Editor(typeof(SmileyEditor), typeof(System.Drawing.Design.UITypeEditor))]
    public Smiley face { get; set; } 
```

如果 Smiley 类型是一个枚举，那么属性网格不会显示省略号按钮，只是一个下拉菜单。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:03:17.633

显然，当系统类型编辑器存在时，PropertyGrid 更喜欢它而不是自定义编辑器。一种解决方法是使用 TypeConvertorAttribute 注释您的类型，引用覆盖方法的 TypeConvertor `GetStandardValuesSupported`。见[https://stackoverflow.com/a/4067173/284795](https://stackoverflow.com/a/4067173/284795)

# iphone - NSmutablearray 上的 uitextfield 输入

> ID：12580447
> 
> 赞同：0
> 
> 时间：2012-09-25T09:51:04.297
> 
> 标签：iphone, ios, nsmutablearray, uitextfield

我有 8`UITextFields`个，我想将每个文本字段的输入值存储在`NSMutableArray`？有人可以帮我编码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:55:45.063

如果您以字典格式存储所有值，这将对您有益。

不过，如果您想存储在 NSMutableArray 中，那么您可以这样做：

```
 - (void)textFieldDidEndEditing:(UITextField *)textField
 {
      [mutArray addObject:textField.text];
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:19:59.837

为什么不可以尝试将这些文本字段连接到如下所示的出口连接，以便您可以随时跟踪这些文本字段值？

```
@property (retain, nonatomic) IBOutletCollection(UITextField) NSArray *textFieldApp; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T09:59:24.013

使用 setValue 作为 NSMutableArray 中的键

```
NSMutableArray *testArray = [NSMutableArray array];
[testArray setValue:textFiled1InputString forKey:@"field1"]; 
```

或者如果你想使用索引然后使用：

```
-insertObject:atIndex: and replaceObjectAtIndex:withObject:. 
```

NSMutableArray 的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T10:46:10.837

确保标记所有文本字段并使用此代码

```
- (void)store {

    NSMutableArray *arr = [NSMutableArray array];

    for (int i = 1; i <= 8; i++) {
        UITextField *tf = (UITextField *)[self.view viewWithTag:i];
        if (tf && [tf isKindOfClass:[UITextField class]] && tf.text.length > 0) {
            [arr addObject:tf.text];
        } else {
            [arr addObject:@"empty"];
        }
    }
    NSLog(@"All values : %@", arr);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T09:56:09.400

如果您只需要保存一次：

```
NSMutableArray *fieldValues = [NSMutableArray arrayWithObjects:
             textfield1.text, 
             textfield2.text,
             textfield3.text, 
             textfield4.text, 
             textfield5.text, 
             textfield6.text, 
             textfield7.text, 
             textfield8.text, nil]; 
```

如果您需要多次保存，最好的解决方案是使用 NSMutableDictionary（使用标签作为键）：

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{
    [dict setObject:txtfield.text forKey:textField.tag];
} 
```

# c# - CreditCardAttribute 使用哪种算法进行信用卡号格式验证

> ID：12580450
> 
> 赞同：4
> 
> 时间：2012-09-25T09:51:14.083
> 
> 标签：c#, .net, algorithm, validation, credit-card

.NET 4.5 包含一个名为 as 的新验证属性[`CreditCardAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.creditcardattribute.aspx)，该属性指定数据字段值是信用卡号。当我反编译包含此类的程序集时，我可以看到以下用于信用卡号验证的代码：

```
public override bool IsValid(object value)
{
  if (value == null)
  {
    return true;
  }
  string text = value as string;
  if (text == null)
  {
    return false;
  }
  text = text.Replace("-", "");
  text = text.Replace(" ", "");
  int num = 0;
  bool flag = false;
  foreach (char current in text.Reverse<char>())
  {
    if (current < '0' || current > '9')
    {
      return false;
    }
    int i = (int)((current - '0') * (flag ? '\u0002' : '\u0001'));
    flag = !flag;
    while (i > 0)
    {
      num += i % 10;
      i /= 10;
    }
  }
  return num % 10 == 0;
} 
```

有人知道这里应用了哪种算法来验证数字格式吗？卢恩算法？另外，这是ISO标准吗？最后，您认为这是正确且 100% 正确的实施吗？

MSDN 没有提供太多关于此的信息。事实上，他们的错误信息如下：

> ## 评论
> 
> 该值使用正则表达式进行验证。该类不验证信用卡号是否对购买有效，仅验证其格式正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T11:48:46.390

最后一行：

```
return num % 10 == 0; 
```

非常强烈地暗示这是一个[Luhn 算法](http://en.wikipedia.org/wiki/Luhn_algorithm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T16:11:48.790

该算法实际上是[Luhn](http://en.wikipedia.org/wiki/Luhn_algorithm)的算法。不幸的是，并非所有卡号都可以通过此算法验证，因此它不是 100% 的方法。但是，允许输入卡号的万事达卡和维萨卡产品的卡号应通过此检查。

验证卡号是否存在的唯一 100% 方法是执行交易。通常，用于 PoS 连接的收单方主机系统协议具有验证卡是否不在停止列表中以及是否存在于路由表中的规定。

# android - 在 android 和 iOS 中调整图像大小

> ID：12580452
> 
> 赞同：0
> 
> 时间：2012-09-25T09:51:22.767
> 
> 标签：android, iphone, ios, image, resize

我们有一个应用程序，在`iOS and on Android`. 应用程序中有一个功能，可以将图像加载到具有特定大小（< 2 mb）的服务器，因此在将图像加载到服务器之前，我需要调整它的大小以减小图像大小以成功将其加载到服务器。

是否有任何解决方案可以使照片与大部分屏幕尺寸兼容（我需要在屏幕上显示完整尺寸的图像），在 Android 和 iOs（没有 iPad）上运行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:21:10.337

试试这个代码

```
private Bitmap decodeBitmapFile(File f,int size,int scal){
    try {         
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);         
        final int REQUIRED_SIZE=size;           
        int scale=scal;
        while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
            scale*=2;       
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
} 
```

# c# - 在 emgucv 上寻找运动检测功能

> ID：12580453
> 
> 赞同：1
> 
> 时间：2012-09-25T09:51:24.620
> 
> 标签：c#, emgucv, motion-detection

我是 emgu 简历的新手；我正在尝试找到进行运动检测的代码。我试过这个：

```
CvInvoke.cvAbsDiff(frame, _backgroundImage, BgDifference); 
```

...但我有照明问题。我想把有运动的像素变白，然后在只有一个矩形的地方画一个矩形，但我用白色像素取更多的区域。

我需要做什么？我可以尝试另一个功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-03T09:19:52.033

将单帧转换为灰度。将新帧从实时转换为灰度。在第一帧和新帧之间进行实时抽象。其结果是由前两者之间的差异组成的第三个新框架。使用腐蚀和阈值处理来获得一个框架，其中白色代表运动部分，黑色代表空间的其余部分。

这是一段代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Emgu.CV;
using Emgu.CV.UI;
using Emgu.CV.CvEnum;
using Emgu.CV.Structure;
using System.Diagnostics;
using System.IO;
using System.Data.SqlClient;
using System.Data.SqlServerCe;
using System.Drawing.Imaging;

namespace ptuxiakh___
{
    public partial class Form1 : Form
    {
        Capture _capture = new Capture();
        Capture capture2 = new Capture();

        Image<Bgr, Byte> FirstImage = new Image<Bgr, Byte>(640, 480);
        Image<Bgr, Byte> RealTimeImage = new Image<Bgr, Byte>(640, 480);

        Image<Gray, Byte> des = new Image<Gray, Byte>(640, 480);
        Image<Gray, Byte> thres = new Image<Gray, Byte>(640, 480);
        Image<Gray, Byte> eroded = new Image<Gray, Byte>(640, 480);

        bool baground = false;

        private void Background()
        {
            try
            {
                FirstImage = _capture.QueryFrame();
                background = true;
            }
            catch(Exception e)
            {
                baground = false;
            }
        }

        private void Tracking(object sender, EventArgs e)
        {
            if (baground == true)
            {
                RealTimeImage   = capture2.QueryFrame();

                CvInvoke.cvAbsDiff(FirstImage.Convert<Gray, Byte>(),
                    RealTimeImage.Convert<Gray, Byte>(), des);
                CvInvoke.cvThreshold(des, thres, 20, 255, THRESH.CV_THRESH_BINARY);
                CvInvoke.cvErode(thres, eroded, IntPtr.Zero, 2);
            }
            else
            {
                Background(); // At first trying to get a static frame for 
                        // abstraction with real time frame 
            }
       }

       private void StartButton_Click(object sender, EventArgs e)
       {
           Application.Idle += new EventHandler(Tracking);
       }

       private void Stopbutton_Click(object sender, EventArgs e)
       {
           Application.Idle -= new EventHandler(Tracking);
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T13:03:35.887

您可以使用[MotionHistory](http://www.emgu.com/wiki/files/1.3.0.0/html/b4c43c1a-f102-e73a-55f0-804dadae53b1.htm)类。EmguCV 包含一个运动检测示例（如果不再存在，您可以[在此处查看](https://github.com/artemisvision/emgu_openCV/blob/master/Emgu.CV.Example/MotionDetection/Form1.cs)）。有了这个类，你可以得到一个motionImage，然后你只需要计算像素来检查最大的区域。

# javascript - 在鼠标拖动事件上更改页面

> ID：12580454
> 
> 赞同：0
> 
> 时间：2012-09-25T09:51:24.543
> 
> 标签：javascript, jquery

看看页面。

[链接](http://www.trgms.com)

现在，我想要做的是，当用户向右拖动窗口时，窗口会拖动到上一页，反之亦然，当用户单击屏幕上的左右按钮时，当前正在执行此操作。谁能告诉我任何可以告诉我用户拖动方式的事件。拖动，我的意思是，单击鼠标，按住单击，移动鼠标然后释放它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:02:43.420

i think you need this
[http://threedubmedia.com/code/event/drag](http://threedubmedia.com/code/event/drag)
this will allow you to have various drag events and methods with data like `x,y coordinates` and `deltas`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:28:45.293

Booklet 是一个 jquery 插件。它允许用户通过拖动来移动页面。如果可以在您的应用程序中使用插件，您可以使用它。[页面](http://builtbywill.com/code/booklet/) 这是一个例子：[DEMO](http://builtbywill.com/code/booklet/demos/starting)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T07:52:00.963

一个简单的解决方案对我有用。在 mouseDown 事件中，我记录了 mouseX 和 mouseY，然后将其与 mouseUp 事件中出现的 mouseX 和 mouseY 进行比较，然后决定是否要显示下一个图块或上一个图块。

# gwt - GWT：在 onModuleLoad 中调用 ensureInjected() 可以吗？

> ID：12580456
> 
> 赞同：2
> 
> 时间：2012-09-25T09:51:39.320
> 
> 标签：gwt, gwt2

在[此文档页面](http://code.google.com/p/google-web-toolkit/wiki/CssResource)中，建议使用`ensureInjected()`每个视图/小部件：

> 推荐的模式是在各种小部件类型的静态初始化程序中调用 ensureInjected()

`CSSResource`但我的用例是应用程序中所有视图之间的一个共享 .css 文件（及其对应的 .css 文件）。我真的必须在我所有的观点中呼吁`ensureInjected()`这一点吗？`CSSResource`

另一种方法似乎是在单例中调用此方法，`onModuleLoad()`而不是从单例中访问 CSS 资源。这是合法的方法吗？它有什么缺点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T10:31:01.373

重要的是`ensureInjected()`在显示引用 的任何内容之前至少调用一次`CssResource`，否则样式表将不存在，并且不会应用匹配类名的样式。

所以是的，`ensureInjected()`只调用一次是可以的`onModuleLoad`。

而且您不必使用单例，给定的所有实例都`ClientBundle`将共享相同的资源实例（它们将作为单例生成）。

# c++ - 堆或堆栈上的 C++ 向量？

> ID：12580458
> 
> 赞同：1
> 
> 时间：2012-09-25T09:51:43.560
> 
> 标签：c++, stl, vector

我刚刚在我的代码中注意到我在堆栈（而不是堆）上声明了一个向量，然后使用我的“set”函数将另一个类的成员变量设置为这个向量。唯一的问题是，在退出我的函数 (myFunction) 后，向量应该被销毁（因为它在堆栈上）并且对该向量的引用应该指向“没有意义”。但是我的代码工作正常，所以我问自己为什么。我是不是很幸运，因为向量所在的内存部分是存在的，因为直到现在没有人删除它？因此，如果我的代码没有崩溃，这只是运气问题吗？这是代码：

```
void myFunction() {
   std::vector<std::vector<double>> vDoubleVector = MyUtils::CreateDoubleVector(); //Creates a
   double vector (but not on heap)

   MyClass mC;
   mC.SetDoubleVector(vDoubleVector);
}

class MyClass {
   std::vector<std::vector<double>> mDoubleVector;
   void SetDoubleVector(std::vector<std::vector<double>>& aDoubleVector) {
     mDoubleVector = aDoubleVector;
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:52:52.640

没有对 的引用`vector`，该类有它的**副本**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T09:57:42.677

由于 Luchian 比我快，我将对这段代码进行明智的改进：

```
void SetDoubleVector(std::vector<std::vector<double>> aDoubleVector) {
     mDoubleVector = std::move(aDoubleVector);
   } 
```

引用“经验法则” -*如果您需要复制，请在界面中进行。*

//编辑以使答案完整。

您的代码确实通过使用它的in**复制**了向量。`operator=``SetDoubleVector`

# php - 如何使用 CAPTCHA 正确保护表单

> ID：12580464
> 
> 赞同：1
> 
> 时间：2012-09-25T09:52:13.263
> 
> 标签：php, curl

我正在维护由其他人开发的一些页面。我注意到，表单由某种图像验证码保护，每次用户进入页面时都会生成该验证码。CAPTCHA 存储在名为 的隐藏输入中`check`，用户输入的值在提交表单后与隐藏输入的值进行比较。

我尝试使用 cURL从隐藏的输入中读取页面并[解析CAPTHA。](http://simplehtmldom.sourceforge.net/)

```
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, "http://example.com/form/");
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

$result = curl_exec($curl);

$html = str_get_html($result);
$captcha = $html->find('input[name=check]');
var_dump($captcha[0]->value);

curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, array(
    "name"      => "Joe",
    "telephone" => "1423456789",
    "message"   => "Lorem ipsum",
    "auth"      => $captcha[0]->value,
    "check"     => $captcha[0]->value,
    "submit_f1" => "Send"
));

$result = curl_exec($curl);
curl_close ($curl); 
```

运行上面的脚本会导致正确的表单提交。更重要的是，我注意到，我可以简单地覆盖post 数组中的值`auth`：`check`

```
 "auth"      => 123,
    "check"     => 123, 
```

并且表单也被正确提交。

我意识到没有 100% 安全的方法来保护表单，但是我怎样才能更多地保护我的表单并使自动提交变得更加困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:58:50.353

任何质询-响应系统背后的想法是，您将响应（代码）隐藏起来，只显示质询（图像）。

您通常会使用 session 来完成此操作；您将响应存储在会话中并显示挑战。输入正确的响应后，您可以清除响应会话变量，为系统准备下一个挑战。

以下代码仅用于说明该想法。

## 显示验证码

```
session_start();

// generate the string you wish to show as captcha
$str = generate_captcha();
// and store inside session
$_SESSION['captcha'] = $str;

// show_captcha() would generate the image
echo show_captcha($str); 
```

## 验证验证码

```
session_start();

if ($_POST['captcha'] === $_SESSION['captcha']) {
    unset($_SESSION['captcha']);
    // continue with form submission
} else {
    // yikes, it doesn't match
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:34:23.757

正如其他人所说，使用`$_SESSION`是实现此目的的最常见方法；

1.  生成一个随机字符串并将其存储在`$_SESSION`.
2.  将该随机字符串绘制为 jpg 并将其保存在 tmp 文件夹中。
3.  在表单旁边向用户显示 jpg。
4.  将输入与会话值进行比较。

但是，如果您无法使用会话，另一种（不太常见的）方法是使用散列；

1.  生成随机字符串`$ranstr`
2.  计算您应该偶尔更改的长服务器端秘密值`SHA256($ranstr . $SECRET)`在哪里。`$SECRET`
3.  绘制`$ranstr`为 jpg 并将其保存在 tmp 文件夹中。
4.  在表单旁边向用户显示 jpg。该表单还将在隐藏字段中包含哈希的结果。
5.  重新计算`SHA256($POST['human_test'] . $SECRET)`并将其与隐藏字段的值进行比较。

在这两种情况下，最好添加一个 cron 来删除超过 1 小时左右的 jpg。

# c# - 覆盖字符串属性问题

> ID：12580473
> 
> 赞同：2
> 
> 时间：2012-09-25T09:52:59.730
> 
> 标签：c#, asp.net-mvc-3, entity-framework

只是关于我的应用程序的一些背景。我正在开发一个 ASP.Net MVC 3 Web 应用程序，它使用 Entity Framework 4.1 进行数据持久性。我的应用程序是分层的，它有一个 UI 层、服务层、存储库层等。我还使用 Unity 作为我的控制反转容器。

当用户在我的应用程序上注册时，我使用**StringBuilder**创建了两个随机代码（电子邮件和移动验证码） 。然后，我将这两个随机代码分配给用户对象中的相应属性，见下文。

```
User validateUser = new User();

validateUser.firstName = model.firstName.Trim();
validateUser.lastName = model.lastName.Trim();
validateUser.email = model.Email.Trim();

//Create Email and Mobile Verification Codes
string randomEmailCode = "";
randomEmailCode = _notifyService.GenerateEmailCode();
validateUser.emailVerificationCode = randomEmailCode;

string randomMobileCode = "";
randomMobileCode = _notifyService.GenerateMobileCode();
validateUser.mobileVerificationCode = randomMobileCode; 
```

**通知服务**

```
public string GenerateEmailCode()
{
    StringBuilder builder = new StringBuilder();

    builder.Append(RandomString(4, true));
    builder.Append(RandomNumber(1000, 9999));
    builder.Append(RandomString(2, false));
    return builder.ToString();
}

public string GenerateMobileCode()
{
    StringBuilder builder = new StringBuilder();

    builder.Append(RandomString(3, true));
    builder.Append(RandomNumber(1000, 9999));
    builder.Append(RandomString(2, false));
    return builder.ToString();
}

private int RandomNumber(int min, int max)
{
    Random random = new Random();
    return random.Next(min, max);
}

private string RandomString(int size, bool lowerCase)
{
    StringBuilder builder = new StringBuilder();
    Random random = new Random();
    char ch;
    for (int i = 0; i < size; i++)
        {
            ch = Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65)));
            builder.Append(ch);
        }
        if (lowerCase)
            return builder.ToString().ToLower();
        return builder.ToString();
    } 
```

然后我将用户添加到我的 DBcontext 并调用 SaveChanges() 方法将新用户保存到我的数据库中。

```
_accountService.AddUser(validateUser);
_accountService.Save(); 
```

现在，当我进入我的数据库并找到已添加的新用户时，**emailVerificationCode**和**mobileVerificationCode**都是相同的。但是，如果我在以下行的代码上放置一个断点

```
randomEmailCode = _notifyService.GenerateEmailCode(); 
```

并一直跟踪直到保存，然后检查新用户的数据库，**emailVerificationCode**和**mobileVerificationCode**代码都不同，正如预期的那样。

我不明白为什么当我运行应用程序时，它会为两个属性插入相同的代码。

有人可以帮忙吗？

谢谢。

**更新**

我按照简的建议做了，即像这样为每个属性输入硬编码值

```
validateUser.emailVerificationCode = "emailCode";
validateUser.mobileVerificationCode = "mobileCode"; 
```

再次运行应用程序，这一次按预期插入了两个硬编码值。这是否意味着我的两个方法**GenerateEmailCode()**和**GenerateMobileCode()**不能正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:29:48.237

您生成这些随机代码的方式可能有问题。正如其他人指出的那样，问题很可能是您创建的随机类实例的时间太近了。

尝试声明一个静态随机生成器：

```
static Random r = new Random(); 
```

然后使用静态随机生成代码：（生成代码的方式显然取决于您，但这样的事情应该给您一个想法）：

```
 public static string generateCode()
        {          
            string chrs = "abcdefghijklmnopqrstuvwxyz";
            char[] arr = chrs.ToCharArray();
            string code = "";
            for (int i = 0; i < 5; i++)
            {
                code += arr[r.Next(arr.Count())];
            }
            return code;
        } 
```

当我运行这个：

```
 var firstCode  = generateCode();
 var secondCode = generateCode(); 
```

我得到 2 个不同的值。

[这是另一个有用的链接](https://stackoverflow.com/questions/1654887/random-next-returns-always-the-same-values)

# jquery - 如何在移动窗口的中心显示 jquery 移动页面？

> ID：12580475
> 
> 赞同：1
> 
> 时间：2012-09-25T09:53:10.323
> 
> 标签：jquery, css, jquery-mobile

我只想在移动窗口的中心显示我创建的页面。

我尝试如下：

```
<div data-role=page id=dcr >
    <div data-role=header data-theme="b" >
        <a href="home.php" data-icon="home"><font size="1px">home</font></a>
        <h1 align="left" ><font size="1px">DCR</font></h1>
    </div> 
    <div class="ui-grid-b" data-theme="c">
        <div class="ui-block-a align-left">
          <a onClick="setData('spanminus');setData('others|spanminus');" data-role="button" data-icon="arrow-l" data-iconpos="notext"></a>        

        </div>
        <div class="ui-block-b center-wrapper">
          <span><font size="1" color="blue" ><b><label id="topDt"><?php echo date('D M j Y',strtotime($tDate));?></b></label></font></span>
          <span id="dcrDt" hidden><?php echo $tDate;?></span>
        </div>
        <div class="ui-block-c button-right">
          <a onClick="setData('spanplus');setData('others|spanplus');" data-role="button" data-icon="arrow-r" data-iconpos="notext"></a>
        </div>
    </div>
    <div data-role=content data-theme="d" id="dcrCall">
        <div data-role=span style="align:center;"> 
            <span><font size="1" color="blue" >Status: Draft - 2 Days left to submit</font></span>
        </div>
        <br/>
        <?php
            $seldly=$dbHandle->execQuery("SELECT dd.doctor_id,dd.saved_on FROM tour_plan tp,doctor_dcr dd WHERE tp.user_id='$userId' AND tp.plan_id=dd.plan_id AND tp.tour_date='$tDate'");
            $gNR=$dbHandle->getNumRows($seldly);
        ?>
        <ul data-role=listview <?php echo ($gNR > 0)?'data-filter=true':'';?>>
            <?php
                if($gNR > 0)
                {
                    while($fetdly=$dbHandle->fetchObjectQuery($seldly))
                    {
                    ?>
                        <li> <?php echo docFullName($fetdly->doctor_id);?></li>
                    <?php
                    }
                }
                else
                {
                    ?>
                    <li><font size="1">No Calls</font></li>
                <?php
                }
                ?>
        </ul>
    </div>
    <div data-role="collapsible" id="unplanCall">
        <h3>Add Unplanned Call</h3>
        <ul data-role=listview>
                <li><input type="text" id="doc" name="doc" /><input type="hidden" id="doc_id" name="doc_id" /> </li>
                <li><input type="button" value="Add" onClick="addUnplan();"/> </li>
        </ul>
    </div>
</div> 
```

我使用这些`CSS`技术来实现这一点，但我做不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:04:02.497

Try to wrap the content in a div and align it in the center , using table

```
<table cellpadding="0" cellspacing="0" border="0"> 
<tr><td width="20%"></td>

  <td width="80%"><div id="wrap">

         //content goes here..............

       </div>
  </td>

  <td width="20%"></td>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:40:21.083

Here is the ans....thank u guys for co-operating with me.....

```
<div data-role=page id=dcr style="width:80%;margin-left: 10%;" >
    <div data-role=header data-theme="b" >
        <a href="home.php" data-icon="home"><font size="1px">home</font></a>
        <h1 align="left" ><font size="1px">DCR</font></h1>
    </div> 
    <div class="ui-grid-b" data-theme="c">
        <div class="ui-block-a align-left">
          <a onClick="setData('spanminus');setData('others|spanminus');" data-role="button" data-icon="arrow-l" data-iconpos="notext"></a>        

        </div>
        <div class="ui-block-b center-wrapper">
          <span><font size="1" color="blue" ><b><label id="topDt"><?php echo date('D M j Y',strtotime($tDate));?></b></label></font></span>
          <span id="dcrDt" hidden><?php echo $tDate;?></span>
        </div>
        <div class="ui-block-c button-right">
          <a onClick="setData('spanplus');setData('others|spanplus');" data-role="button" data-icon="arrow-r" data-iconpos="notext"></a>
        </div>
    </div>
    <div data-role=content data-theme="d" id="dcrCall">
        <div data-role=span style="align:center;"> 
            <span><font size="1" color="blue" >Status: Draft - 2 Days left to submit</font></span>
        </div>
        <br/>
        <?php
            $seldly=$dbHandle->execQuery("SELECT dd.doctor_id,dd.saved_on FROM tour_plan tp,doctor_dcr dd WHERE tp.user_id='$userId' AND tp.plan_id=dd.plan_id AND tp.tour_date='$tDate'");
            $gNR=$dbHandle->getNumRows($seldly);
        ?>
        <ul data-role=listview <?php echo ($gNR > 0)?'data-filter=true':'';?>>
            <?php
                if($gNR > 0)
                {
                    while($fetdly=$dbHandle->fetchObjectQuery($seldly))
                    {
                    ?>
                        <li> <?php echo docFullName($fetdly->doctor_id);?></li>
                    <?php
                    }
                }
                else
                {
                    ?>
                    <li><font size="1">No Calls</font></li>
                <?php
                }
                ?>
        </ul>
    </div>
    <div data-role="collapsible" id="unplanCall">
        <h3>Add Unplanned Call</h3>
        <ul data-role=listview>
                <li><input type="text" id="doc" name="doc" /><input type="hidden" id="doc_id" name="doc_id" /> </li>
                <li><input type="button" value="Add" onClick="addUnplan();"/> </li>
        </ul>
    </div> 
```

# internet-explorer - 无法在 IE 9 上使用 TinyMCE 编辑 Plone 内容

> ID：12580485
> 
> 赞同：1
> 
> 时间：2012-09-25T09:53:49.800
> 
> 标签：internet-explorer, tinymce, plone

测试：

*   克隆 4.0.7 或克隆 4.2
*   Internet Explorer 9 升级
*   TinyMCE 1.1.10

当我在正文中使用 IE 9（仅）编辑一个简单的 Plone 文档时，不会保存更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:58:30.347

请将您的[`Products.TinyMCE`软件包](http://pypi.python.org/pypi/Products.TinyMCE)升级到 1.3b4 版本，1.3 之前的版本与 Internet Explorer 9 不兼容。

# asp.net - 超链接的字体大小问题

> ID：12580492
> 
> 赞同：0
> 
> 时间：2012-09-25T09:54:04.620
> 
> 标签：asp.net, css

```
.link16 a, a:link, a:visited, a:active, a:hover {
    font-weight: bold;
    font-size: 16px;
    text-decoration: none;
    cursor: pointer;
    color: #003366;
} 
```

这是我应用的 CSS 类。

```
< asp:HyperLink ID="hlProductDetail" runat="server" CssClass="link16">See full pricing</asp:HyperLink> 
```

当我转到超链接时，然后按鼠标左键并远离文本。超链接大小改变...

任何人都知道......为什么会这样......以及我们如何解决它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:02:30.387

尝试更换：`.link16 a, a:link, a:visited, a:active, a:hover`

经过 ：

```
.link16 a,
.link16 a:link,
.link16 a:visited,
.link16 a:active,
.link16 a:hover 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:28:20.277

谢谢 Fry_95 ...我解决了这个问题

```
.link16 a,
.link16 a:link,
.link16 a:visited,
.link16 a:active,
.link16 a:hover 
```

和

```
<div class="link16"> 
   <asp:HyperLink ID="hlProductDetail" runat="server" NavigateUrl="#" >See full pricing< /asp:HyperLink >                   
</div> 
```

# ios5 - 如何在 MusicPlayer 中循环播放 MIDI

> ID：12580493
> 
> 赞同：1
> 
> 时间：2012-09-25T09:54:05.337
> 
> 标签：ios5, audio, midi

我正在使用下面的代码在 ios 中播放 midi 文件，但是如何循环播放歌曲？有没有像 player.loop = true 的东西？

```
NewMusicSequence(&mySequence);
NSURL * midiFileURL = [NSURL fileURLWithPath:midPath];
MusicSequenceFileLoad(mySequence, (__bridge CFURLRef)midiFileURL, 0, kMusicSequenceLoadSMF_ChannelsToTracks);`

NewMusicPlayer(&player);
MusicPlayerSetSequence(player, mySequence);

MusicPlayerPreroll(player);
MusicPlayerStart(player); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:51:47.297

我通过为每个轨道设置循环信息来解决它。

```
 UInt32 tracks;

if (MusicSequenceGetTrackCount(sequence, &tracks) != noErr)

    for (UInt32 i = 0; i < tracks; i++) {
        MusicTrack track = NULL;
        MusicTimeStamp trackLen = 0;

        UInt32 trackLenLen = sizeof(trackLen);

        MusicSequenceGetIndTrack(sequence, i, &track);

        MusicTrackGetProperty(track, kSequenceTrackProperty_TrackLength, &trackLen, &trackLenLen);
        MusicTrackLoopInfo loopInfo = { trackLen, 0 };
        MusicTrackSetProperty(track, kSequenceTrackProperty_LoopInfo, &loopInfo, sizeof(loopInfo));
        NSLog(@"track length is %f", trackLen);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-03T23:47:06.890

如果有人在循环音乐序列并遵循 Rick Li 的说明或此处的说明时遇到问题：[https](https://gist.github.com/genedelisa/7b440f128db96c3ba66f) : //gist.github.com/genedelisa/7b440f128db96c3ba66f，我发现 MusicTrackLoopInfo 代码仅在我的曲目持续时间为*实际上*足够短，以至于我有耐心坐下来听它循环。例如，我尝试在开始时单击一下来循环播放曲目，以便每秒重复一次。但**持续时间**单个音符的时间实际上是 100 秒，所以即使我按照上面 Rick Li 的说明设置循环，我也必须等待近两分钟才能听到它循环。我希望这可以帮助那些因无法在 iOS/AudioToolbox 中循环播放音乐序列/MIDI 轨道而感到困惑或沮丧的人。确保调用 GetProperty kSequenceTrackProperty_TrackLength 并检查您的 trackLen 是否不是某个大值，即使您确信它是一个很小的值！

# c# - 如何使用 Selenium WebDriver 和 c# 从 Telerik RadComboBox 中选择一个选项？

> ID：12580503
> 
> 赞同：4
> 
> 时间：2012-09-25T09:54:36.743
> 
> 标签：c#, selenium, telerik, selenium-webdriver

我正在尝试使用 Selenium WebDriver 在 Telerik RadComboBox Asp.Net 控件中选择一个选项，但无法使其始终如一地工作。我正在使用以下代码

```
var wait = new WebDriverWait(Driver, TimeSpan.FromSeconds(30));
  wait.Until(ExpectedConditions.ElementIsVisible(RadComboBoxArrowBy));

RadComboBoxArrow.Click();
var wait = new WebDriverWait(Driver, TimeSpan.FromSeconds(30));
wait.Until(ExpectedConditions.ElementIsVisible(By.XPath("//input[contains(@id, 'rcbRadComboBox_Input')]")));
RadComboBox.SendKeys(division);
RadComboBox.SendKeys(Keys.Tab); 
```

其中 RadComboBoxArrow 是 Telerik RadComboBox 中输入元素右侧的箭头。

我在多个地方使用此代码，只有一个它不时失败

```
System.TimeoutException: Timed out after 30 seconds --->
OpenQA.Selenium.NoSuchElementException: Unable to locate element: 
{"method":"xpath","selector":"//input[contains(@id, 'rcbRadComboBox_Input')]"} 
```

在建议使用 SelectElement 之前，请考虑 Telerik RadComboBox 不呈现选择标签的事实。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T23:10:24.593

我用`driver.Click()`

首先，我单击组合以使其打开：

```
driver.Click(By.Id("ctl00_WCEContentPlaceHolder_RadToolbar_ReportsMenu_rttb1_ctl00_rcb_Reports"); 
```

然后我按 ID 单击元素。这个恰好是列表中的第一个。

```
driver.Click(By.Id("ctl00_WCEContentPlaceHolder_RadToolbar_ReportsMenu_rttb1_ctl00_rcb_Reports_c1"); 
```

# c++ - 组合两个 TDateTime 变量

> ID：12580506
> 
> 赞同：0
> 
> 时间：2012-09-25T09:54:42.093
> 
> 标签：c++, datetimepicker, vcl, tdatetime

我在 VCL 表单应用程序中使用 C++ Builder。

我想创建一个由两个 TDateTimePicker 控件组成的 TDateTime 变量。

其中一个控件采用日期格式，另一个采用时间格式。

我想将它们组合成一个 TDateTime 变量。

例如，DateTimePickerAppointmentDate 显示“25/09/2012”，DateTimePickerAppointmentTime 显示“7:02:13 pm”

我尝试了以下代码：

```
TDateTime testCombine = DateTimePickerAppointmentDate->Date + DateTimePickerAppointmentTime->Time; 
```

但是，DateTimePickerAppointmentDate->Date 不仅仅是来自控件的日期，它是日期和时间。DateTimePickerAppointmentTime->Time 也是如此。

我是否必须将每个日期和时间分开才能通过函数获得所需的输出，或者是否有 DateTimePicker 的功能可以仅从控件返回日期或时间？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:47:00.470

解决了。这是我的代码：

```
TDateTime appDate = DateOf(DateTimePickerAppointmentDate->Date) + TimeOf(DateTimePickerAppointmentTime->Time); 
```

# java - Java休眠将对象保存在一个数据库中的不同模式中

> ID：12580517
> 
> 赞同：1
> 
> 时间：2012-09-25T09:55:43.187
> 
> 标签：java, hibernate, schema, database-schema, hibernate-mapping

我正在使用 DB2 数据库和休眠框架。有两个表，例如 Word 和 Litter，它们的关系是一对多的。

1.  模式 A：

    ```
    Table Word: ID,
    IDLIT -> references to ID of Litter table
    Name 
    ```

2.  模式 B：

    ```
    Table Litter ID,
    Short_Name,
    Long_Name. 
    ```

这两个表都位于两个不同的模式中，但位于一个数据库中。我有一个 POJO 和 XML 映射文件来映射表。现在如何在处理多对一关系（Litter - Word）时将对象保存到数据库中？有什么建议吗？如果是，请给我详细的说明，在此先感谢！

## 更新的问题

我也改变了，因为我的映射 xml 文件对于每个 POJO 类都不同。下面是运行代码：

```
 Session session = HibernateUtility.getSessionFactory().openSession();
   session.beginTransaction();

   Word word = new Word();
   Word word1 =new Word();

   Litter litter = new Litter();
   litter.setFullname("bla bla");
   word.setLitter(litter);    
   word1.setLitter(litter); //Here I have to handle one to many relationship

   Set Words =new  HashSet();
   Words.add(word);
   Words.add(word1);
   litter.setWords(words);
   session.save(litter);
   session.save(word);
   session.save(word1);
  session.getTransaction().commit();
  session.close(); 
```

但是这段代码给出了一个异常： JDBCExceptionReporter logExceptions 我使用的方法是正确的吗？

```
堆栈跟踪 -  -  -  -  -  -  -  -  - 
信息：架构更新完成
休眠：从 LITTER 中选择 max(ID)
2012 年 2 月 25 日下午 7:33:42 org.hibernate.util.JDBCExceptionReporter logExceptions
警告：SQL 错误：-204，SQLState：42704
2012 年 2 月 25 日下午 7:33:42 org.hibernate.util.JDBCExceptionReporter logExceptions
严重：DB2 SQL 错误：SQLCODE=-204，SQLSTATE=42704，SQLERRMC=BIMASH.LITTER，驱动程序=3.64.104
2012 年 2 月 25 日下午 7:33:42 org.hibernate.util.JDBCExceptionReporter logExceptions
警告：SQL 错误：-204，SQLState：42704
2012 年 2 月 25 日下午 7:33:42 org.hibernate.util.JDBCExceptionReporter logExceptions
严重：DB2 SQL 错误：SQLCODE=-204，SQLSTATE=42704，SQLERRMC=BIMASH.LITTER，驱动程序=3.64.104
2012 年 2 月 25 日下午 7:33:42 org.hibernate.util.JDBCExceptionReporter logExceptions
警告：SQL 错误：-727，SQLState：56098
2012 年 2 月 25 日下午 7:33:42 org.hibernate.util.JDBCExceptionReporter logExceptions
严重：DB2 SQL 错误：SQLCODE=-727, SQLSTATE=56098, SQLERRMC=2;-204;42704;BIMASH.LITTER, DRIVER=3.64.104
线程“主”org.hibernate.exception.SQLGrammarException 中的异常：无法获取增量生成器的初始值
    在 org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
    在 org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    在 org.hibernate.id.IncrementGenerator.getNext(IncrementGenerator.java:107)
    在 org.hibernate.id.IncrementGenerator.generate(IncrementGenerator.java:44)
    在 org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:99)
    在 org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:187)
    在 org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:33)
    在 org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient（DefaultSaveOrUpdateEventListener.java:172）
    在 org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:27)
    在 org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:70)
    在 org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:535)
    在 org.hibernate.impl.SessionImpl.save(SessionImpl.java:523)
    在 org.hibernate.impl.SessionImpl.save(SessionImpl.java:519)
    在 Main.main(Main.java:73)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:58:40.203

您可以使用映射文件中元素的`schema`属性来定义映射类所属的架构。`<class>`请注意，这将覆盖 general属性中`<hibernate-mapping>`的设置。`schema`

```
<!-- A is set to be the default schema -->
<hibernate-mapping schema="A">
    <class name="mypackage.Word" table="WORD" >
    ....
    </class>

    <!-- Overriding the schema definition for this class -->
    <class name="mypackage.Litter" table="LITTER" schema="B">
    ....
    </class>
</hibernate-mapping> 
```

以下 Hibernate 参考章节可能值得一读：[Chapter 5\. Basic O/R Mapping](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html)，特别是关于`<hibernate-mapping>`and`<class>`元素的部分。

## 更新

看到堆栈跟踪，似乎 a`<generator class="increment">`正在类中使用。如果是这种情况（查询似乎如此`select max(ID) from LITTER`），您还必须在 中指定架构，`<generator>`以便发出的查询转换为`select max(ID) from B.LITTER`. 您可以使用以下`<param>`名称`schema`来实现`<generator>`：

```
<generator class="increment">
    <param name="schema">B</param>
</generator> 
```

有关更多详细信息，请参阅这个几乎重复的问题：[Hibernate: ID generator using increment and Oracle Schema](https://stackoverflow.com/q/1566263/851811)

# java - Java，修改文件excel

> ID：12580519
> 
> 赞同：2
> 
> 时间：2012-09-25T09:55:51.033
> 
> 标签：java, excel

我想知道java中是否有办法编辑excel文件。例如：如果我填充了一个 Excel 表，我可以更改某些单元格的值而保留其他单元格的值吗？先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T09:58:49.563

我对 Apache POI 库有一些不错的结果：http: [//poi.apache.org/](http://poi.apache.org/)

它甚至可以在 Android 上运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T09:59:53.730

`JXL`旨在提高读取效率（因为这是 API 的主要用途）。为了提高性能，与输出信息相关的数据（例如，所有格式信息，如字体）在读取电子表格时不会被解释，因为在询问原始数据值时这是多余的。

但是，如果我们需要修改此电子表格，则需要各种写入接口的句柄，可以使用 copy 方法获得。

```
Workbook workbook = Workbook.getWorkbook(new File("myfile.xls"));
WritableWorkbook copy = Workbook.createWorkbook(new File("temp.xls"), workbook); 
```

这会复制已读入的信息，并执行附加处理以解释编写电子表格所需的字段。这种读取优化策略的缺点是我们在内存中保存了两个电子表格，而不仅仅是一个，因此内存需求增加了一倍。

**但在这之后，你可以为所欲为。像：**

```
WritableSheet sheet2 = copy.getSheet(1); 
WritableCell cell = sheet2.getWritableCell(1, 2); 

if (cell.getType() == CellType.LABEL) 
{ 
  Label l = (Label) cell; 
  l.setString("modified cell"); 
}
copy.write(); 
copy.close();
workbook.close(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T09:56:56.647

是的，您可以使用 Andy Khan 的[JExcel](http://jexcelapi.sourceforge.net/)库很好地做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T09:57:34.803

是的，您可以使用[Apache POI](http://poi.apache.org/) API 编辑 Excel 工作表

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T10:12:20.930

使用可以使用 JXL 来做到这一点

JXL 没有提供读取和写入同一个文件的直接方式（对您来说可能看起来不方便，但 JXL 说这是因为读取是主要功能（主要使用），这可以提高性能，但我更喜欢读写我自己的工作簿）

例子

```
import java.io.File; 
import java.util.Date; 
import jxl.*; 
import jxl.write.*; 

//open read to your workbook (readonly)
Workbook workbook = Workbook.getWorkbook(new File("myfile.xls"));

//create a copy workbook on which you will write
WritableWorkbook copy = Workbook.createWorkbook(new File("output.xls"), workbook);

//modify existing cell 
WritableSheet sheet2 = copy.getSheet(1); 
WritableCell cell = sheet2.getWritableCell(2, 4); 

NumberFormat fivedps = new NumberFormat("#.#####"); 
WritableCellFormat cellFormat = new WritableCellFormat(fivedps); 
cell.setFormat(cellFormat);

//add cells 
Label label = new Label(0, 2, "New label record"); 
sheet2.addCell(label); 

Number number = new Number(3, 4, 3.1459); 
sheet2.addCell(number); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T23:25:55.467

您必须编写一些实用程序来执行此操作，但是可以在 JXL 中执行此操作。

请注意 SheetCopier.java 中有一个错误，L996+997: 错误：

```
 if (c.getCellFeatures() != null &
        c.getCellFeatures().hasDataValidation()) 
```

应该：

```
 if (c.getCellFeatures() != null &&
        c.getCellFeatures().hasDataValidation()) 
```

由于我没有 Andy Khans 的电子邮件，我无法联系到他，所以也重建资源。

作为旁注，Apache poi 对于凡人来说太复杂了，类名也很荒谬，而且根据我的经验，apache 代码不友好、无用且不健壮。所以我尽可能避免使用apache。

# python - 在画布中使用未保存的图像

> ID：12580522
> 
> 赞同：0
> 
> 时间：2012-09-25T09:55:56.630
> 
> 标签：python, tkinter

我正在使用 Canvas（和 Python 2.7）来显示存储在字节数组（PGM 格式）中的图像。

目前，我将它保存到磁盘，然后从文件中构造一个 PhotoImage。

如何避免保存文件？我尝试使用 cStringIO 创建一个“字符串文件”，然后使用 encode64 将其传递给 PhotoImage，问题是 cStringIO.write 不接受 bytearray：我遇到了一个错误：

```
TypeError: must be string or pinned buffer, not bytearray 
```

如果可能，我想避免使用外部库，例如 PIL。

提前致谢，

弗雷德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:02:39.597

From what I see the suggestion with `PhotoImage` is:

> The PhotoImage can also read base64-encoded GIF files from strings. You can use this to embed images in Python source code (use functions in the base64 module to convert binary data to base64-encoded strings)

You can convert the byte array to a string: `byteString = ''.join([ str(x) for x in bytes ])` See if this works.

[Link to base64 module](http://docs.python.org/library/base64.html)

# google-chrome-extension - CHROME 21 对清单版本 1 的支持正在逐步停止。请升级到版本 2

> ID：12580531
> 
> 赞同：0
> 
> 时间：2012-09-25T09:56:29.470
> 
> 标签：google-chrome-extension

我正在使用 Chrome 21。一切正常，但我收到此警告消息 -
**“对清单版本 1 的支持正在逐步取消。请升级到版本 2。”** . 如果我要更新清单版本 2，我的 script.js 将无法正常工作。我的插件得到了错误的结果。如何解决这个问题呢 ？有人可以帮帮我吗..

**清单文件：**

```
{
  "name": "Email_Extension",
  "version": "1.0",
  "manifest_version": 1,
  "icons": {

    "16": "EOE(16x16).png",
    "48": "EOE(48x48).png",
    "128": "EOE(128x128).png"

  },
  "description": "Eyes On Emails New",

  "permissions": [
    "http://api.eyesonemails.com/","http://192.168.0.197/","http://www.sagaciousinfosystems.com/","tabs"
  ],

  "content_scripts": [
  {
    "matches": ["http://*/*", "https://*/*"],
    "css": ["style.css"],
    "js": ["jQuery 1.7.1.js","script.js"]
  }
  ],
  "background": {
    "page": "background.html"
  },
    "browser_action": {
        "default_title": "Eyes on Emails",
        "default_icon": "EOE(48x48).png"

    },

   "web_accessible_resources": [
     "images/loader.gif",
     "images/email-wrong.png",
     "images/email-correct.png",
     "images/eye-icon.png"

  ],
  "options_page": "options.html"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:14:01.013

`"manifest_version"`应该分配给 2，你的 mainfest.json 应该是这样的

```
 {
 "name": "Email_Extension",
 "version": "1.0",
 "manifest_version": 2,
  ...
} 
```

检查 chrome 扩展升级的[文档](http://developer.chrome.com/extensions/manifestVersion.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T15:10:05.157

请参阅[本文档页面的](http://developer.chrome.com/extensions/manifestVersion.html)**“版本 1 和 2 之间的更改”**部分。此处描述了您必须在扩展中进行的所有必要更改。

# mysql - 如何在 MySQL 中转换表列

> ID：12580532
> 
> 赞同：0
> 
> 时间：2012-09-25T09:56:29.940
> 
> 标签：mysql

我有一个表，其中包含用户 ID 和 IP 地址。该表称为`whoread`。

我需要将用户标识转换为用户名。该表`user`包含用于转换的用户 ID 和用户名。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:59:45.270

您可以简单地申请`JOIN`从另一个表中获取用户名....

```
SELECT b.usernames ,a.ipaddress
FROM whoread a JOIN user b 
ON a.userid= b.userid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:59:31.780

您应该使用这样的查询：

```
 SELECT username FROM user WHERE userid = *idyou'relookingfor* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:00:49.973

尝试类似：

```
SELECT b.username 
FROM whoread a, user b 
WHERE a.user_id=b.user_id; 
```

# java - iText 工作 Google App 引擎

> ID：12580535
> 
> 赞同：3
> 
> 时间：2012-09-25T09:56:34.183
> 
> 标签：java, google-app-engine, itext

我正在尝试使用谷歌应用引擎在 java 中创建 pdf，但它还不起作用：

```
@SuppressWarnings("serial")
public class GuestbookServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("application/pdf");
            try {
                Document document = new Document();
                PdfWriter.getInstance(document, new FileOutputStream("HelloWorld.pdf"));
                document.open();
                document.add(new Paragraph("Hello World"));
                document.close();
            } catch (DocumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
    }
} 
```

这是错误：

```
HTTP ERROR 500

Problem accessing /guestbook. Reason:

    com/itextpdf/text/DocumentException
Caused by:

java.lang.NoClassDefFoundError: com/itextpdf/text/DocumentException 
```

我已经阅读了 java.awt 和 java.nio 与 google appengine 的不兼容性。但我不知道该怎么做。谷歌应用引擎是否有任何特殊版本的 itext？或者你知道任何可以帮助我的线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:01:12.920

Yes, there's a GAE version of iText. See [http://lowagie.com/iPadSchools](http://lowagie.com/iPadSchools) to watch a demo. The GAE port is distributed by iText Software. There's no link to get it online.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:47:44.077

```
package mx.gob.campeche.sit.web.reportes;

import java.io.IOException;
import java.io.OutputStream;

import javax.inject.Inject;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletRequestWrapper;
import javax.servlet.http.HttpServletResponse;

import mx.gob.campeche.sit.doc.recibo_oficial.ReciboOficial;
@WebServlet("/reciboOficial")
public class ReporteReciboOficialServlet extends HttpServlet {

    @Inject
    ReciboOficial reciboOficial;

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        HttpServletRequestWrapper srw = new HttpServletRequestWrapper(request);
        String folio = "";

         if (request.getParameterMap().containsKey("folio")) {
                folio = request.getParameter("folio");
                System.out.println("contenido" + folio);
            }else
         if (request.getParameterMap().containsKey("numero")) {
                folio = request.getParameter("numero");
                System.out.println("contenido" + folio);
            }else{
                throw new ServletException("No ingreso parametro");
            }

        byte[] pdfData = reciboOficial.crearReciboOFicialCajas(folio,  srw.getRealPath(""));

        response.setContentType("application/pdf"); 
        response.reset();
        response.setContentType("application/pdf");
        response.setHeader("Content-disposition",  "inline; filename=\"" +"samplePDF2.pdf" +"\"");

        OutputStream output = response.getOutputStream();
        output.write(pdfData);
        output.close();

    }
this is small example, this help 
```

# d3.js - d3：数据变化时刷新子节点的attr值

> ID：12580536
> 
> 赞同：3
> 
> 时间：2012-09-25T09:56:38.987
> 
> 标签：d3.js

我正在用 d3 渲染数据。我有一个`nodes`列表，我使用 .enter() 从中构造了一堆 SVG 组，如下所示（简化）：

```
nodes = [{name: "Fred"}, {name: "Barney"}];
var node = vis.selectAll(".node")
    .data(nodes)
    .enter().append("svg:g")
    .attr("class", "node");
var circ = node.append("svg:circle")
    .attr("x", 0)
    .attr("y", 0)
    .attr("r", 10)
node.append("svg:text")
    .attr("dx", 0)
    .attr("dy", 0)
    .text(function(d) { return d.name }); 
```

但是，如果我编辑 listitem 的`name`，SVG 文本元素不会更新（因为它的`text`attr 仅在创建时调用）。如何告诉 d3 “重新创建”与更改的列表项相对应的 SVG 组？我这样做是作为强制布局的一部分，所以我可以`text`在每个刻度上设置 attr，但这很不雅。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:08:38.717

需要的是再次将数据反馈到节点中。所以，当我更新`nodes`列表时，我会这样做：

```
vis.selectAll(".node text")
  .data(nodes)
  .text(function(d) { return d.name }); 
```

并且重新计算。

# ajax - 谷歌样式页面加载，批量记录未加载，显示一些并获取保留在后面？

> ID：12580538
> 
> 赞同：2
> 
> 时间：2012-09-25T09:56:47.190
> 
> 标签：ajax, jquery

我正在开发一个 Web 应用程序，登录后用户被重定向到收件箱页面，
在那里他会发现许多小部件，每个小部件都有数百条记录。
所以登录成功后打开收件箱页面需要太多时间。非常多的性能问题。

> 所以我想在每个小部件中显示一些（5-10）条记录

在页面加载到后端（用户不知道）之后，请求将继续处理并获取记录并将它们附加到小部件记录中。

例如。如果您打开 google 图片并搜索 cricket，它将显示带有图片的页面，如果您仅向下滚动，您将知道 ajax 请求正在执行并将响应附加到网页，

> 但它不是等到整个页面加载完毕。

我必须以同样的方式开发我的应用程序。

任何想法都是高度赞赏和示例代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:44:47.773

这应该对你有用，乔达里先生。

您需要一些东西来处理后端的请求。由于您没有指定您是使用 Java 还是 PHP 还是 Python 或其他什么，所以我使用了 PHP - 这是我最了解的 :D

**伪代码** *(loadmore.jsp)*

```
Begin 

widget = URL(widget) //the widget id or name
page = URL(page) //the page being retrieved

switch (widget) 
{
case "widget1":
data_for_widget1 = paginated_query1(page)
print data_for_widget1
break

case "widget2":
data_for_widget2 = paginated_query2(page)
print data_for_widget2
break

default :
print "Invalid Widget"
break

}

End 
```

**PHP版本**

```
<?php
if (isset($_GET['page'])) {
    $widget = $_GET['page'];
    $page = $_GET['page'];
    switch ($widget) {
        case "MyWidget1": //dynamic example
            $manyManyItems; //A massive array of items
            $pages = array_chunk($manyManyItems, 5); //break it up into chunks of 5 items
            if( array_key_exists ($pages[$page]) )
                for ($i = 0; $i < count($pages[$page]); $i++) { //load those chunks
                    echo '<div class="item">'.$pages[$page][$i].'</div>';
                }
            else {
                echo "zero"; //code word that tells ajax that there is nothing more to load
            }
            break;

        case "MyWidget2": //manual example
            if($page==1) { //loads the first chunck manually
                echo '<div class="item">dynamic content 1</div>';
                echo '<div class="item">dynamic content 2</div>';
                echo '<div class="item">dynamic content 3</div>';
            }
            elseif($page==2) { //loads the next batch
                echo '<div class="item">dynamic content 1</div>';
                echo '<div class="item">dynamic content 2</div>';
                echo '<div class="item">dynamic content 3</div>';
            }
            else
                echo "zero"; //code word that tells ajax that there is nothing more to load
            break;

        default:
            echo "zero"; //code word that tells ajax that there is nothing more to load
    }
}
?> 
```

**HTML** *每个小部件可能看起来像这样*

```
<div id="MyWidget1" class="widget" data-widgetPage="0">
   <div class="item">default content</div>
   <div class="item">another default content</div>
   ...
   <div class="loadmoreajaxloader" style="display:none;"><center>Loading...</center></div>
</div> 
```

**Javascript**

```
<script type="text/javascript">
$(".widget").scroll(function()
{
    if($(this).scrollTop() == $(this).height() - $(this).height())
    {
        var nextPage = eval($(this).attr("data-widgetPage") + 1);
        $(this).find('.loadmoreajaxloader').show();
        $.ajax({
        url: "loadmore.php?widget="+$(this).attr("id")+"&page="+nextPage,
        success: function(html)
        {
            if(html != "zero")
            {
                $(this).append(html);
                $(this).('.loadmoreajaxloader').hide();
            }else
            {
                $(this).find('.loadmoreajaxloader').html('<center>No more posts to show.</center>');
            }
        }
        });

        $(this).attr("data-widgetPage", nextPage);
    }
});
</script> 
```

应用程序成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T05:10:34.440

我从以下站点知道以下答案适合我的要求.. [Jquery 无休止的滚动](http://fredwu.github.com/jquery-endless-scroll/)

# android - Android - 自定义日历事件

> ID：12580539
> 
> 赞同：2
> 
> 时间：2012-09-25T09:56:48.923
> 
> 标签：android, events, calendar

有没有办法（以编程方式）创建带有自定义图标的日历事件？此图标必须在日历上，并且当提醒抛出事件通知时，此通知也必须显示自定义图标。这个有可能？

# python - Python dhcp 客户端

> ID：12580544
> 
> 赞同：1
> 
> 时间：2012-09-25T09:57:02.033
> 
> 标签：python, udp, dhcp

我正在尝试学习如何在多宿主机器（多个接口）上直接（无库）从 python 发送 DHCP 请求。我看过 pydhcplib，但还是不明白。

此代码在特定接口上发送 DHCP 数据包（在我的情况下为 eth3 - 未分配 IP），但它使用 eth0 IP 地址发送。如何将我的 src IP 更改为 0.0.0.0？dhcp-message 在此示例中被截断

```
LOCAL_PORT=68
SERVER_PORT=67
LOCAL_IP="0.0.0.0"
BCAST_IP="255.255.255.255"
LISTEN_DEV="eth3"
MSG_SIZE=2048
Conn=socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
Conn.settimeout(5)
Conn.setsockopt(socket.SOL_SOCKET,IN.SO_BINDTODEVICE,LISTEN_DEV+'\0')
Conn.setsockopt(socket.SOL_SOCKET,socket.SO_BROADCAST,1)
Conn.bind((LOCAL_IP, LOCAL_PORT))
# Create DHCP-Discovery
msg="010106003f7d1664......"
Conn.sendto(msg.decode("hex"),(BCAST_IP,SERVER_PORT))
received = Conn.recv(MSG_SIZE)
Conn.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:45:20.937

我假设您已经了解[高级进程间通信教程](http://docs.freebsd.org/44doc/psd/21.ipc/paper.html)。

**剧透警报：**如果您想直接跳到底线，请查看[DHCP 查询配方](http://code.activestate.com/recipes/577649-dhcp-query/)。

编辑：

特殊值 INADDR_ANY（0.0.0.0，或 python 套接字中的空字符串 ''）不是 IP 地址。

> “当地址被指定为 INADDR_ANY（定义在 <netinet/in.h> 中的清单常量）时，系统会将地址解释为‘任何有效地址’。”

来自 RFC 2131：

> 如果客户端使用 DHCP 进行初始配置（在客户端的 TCP/IP 软件完全配置之前），DHCP 需要创造性地使用客户端的 TCP/IP 软件和对 RFC 1122 的自由解释。TCP/IP 软件应该接受在配置IP地址之前，将任何发送到客户端硬件地址的IP数据包转发到IP层；在配置 TCP/IP 软件之前，DHCP 服务器和 BOOTP 中继代理可能无法将 DHCP 消息传递给无法接受硬件单播数据报的客户端。

假设您在已经配置以太网接口并具有有效 IP 地址的系统上运行此程序。我不确定为什么您希望源 IP 地址为 0.0.0.0，但也许您可以使用 ifconfig 将接口 IP 设置为 0.0.0.0 以获得您想要的效果。

或者您可以使用 RAW 套接字并自己构建 IP 和 UDP 标头以包含任何内容。

# liferay-6 - 期刊文章的 articleId 是否与 entryId 相同？

> ID：12580546
> 
> 赞同：0
> 
> 时间：2012-09-25T09:57:13.597
> 
> 标签：liferay-6, article

期刊文章的 articleId 是否与我们从中获得的 entryId 相同：

```
assetEntry.getEntryId(); 
```

? 如果没有，我怎样才能获得 articleId？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:04:26.703

我真的不明白这里的问题，
你可以`JournalArticleLocalServiceUtil`通过各种 get 方法来获取 JournalArticles。在此之后，您可以使用`JournalArticle.getArticleId()`

# architecture - 如何知道总线上的数据是 ARM Cortex-M0 的数据还是指令？

> ID：12580547
> 
> 赞同：0
> 
> 时间：2012-09-25T09:57:14.830
> 
> 标签：architecture, arm, cortex-m

我正在尝试实现缓存算法。但我只想缓存指令，而不是从内存中获取的数据（显然）。那么如何知道总线上的数据是Data data还是Instruction data呢？我尝试查看 HPROT 和 HTRANS 信号，但看不清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:05:25.810

弄清楚 HPROT[0] 告诉你它是数据还是操作码获取

# asp.net - File.open 文件创建错误

> ID：12580548
> 
> 赞同：0
> 
> 时间：2012-09-25T09:57:17.883
> 
> 标签：asp.net, vb.net

我正在尝试使用以下方法创建文件：

```
Dim stmFile As Stream = File.Open(filename, FileMode.OpenOrCreate, FileAccess.Write) 
```

这应该创建一个文件，因为指定的文件当前不存在，但是它会引发服务器错误：

```
Could not find a part of the path 'c:\tempemail\681968_File.doc'. 

Description: An unhandled exception occurred during the execution of the current web
request. Please review the stack trace for more information about the error and where 
it originated in the code. 

Exception Details: System.IO.DirectoryNotFoundException: 
Could not find a part of the path 'c:\tempemail\681968_File.doc'. 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:24:31.100

尝试以下

*   确保`tempemail`存在
*   确保应用程序池用户对该文件夹具有写入权限。

# ios - AIR for iOS Sound.play() 停止背景音乐

> ID：12580552
> 
> 赞同：1
> 
> 时间：2012-09-25T09:57:28.253
> 
> 标签：ios, actionscript-3, flash, air

在我正在构建的游戏中，有音效和音乐。玩家可以关闭游戏中的音乐和音效。我认为当玩家关闭游戏中的音乐时，可能是因为他们想听自己的音乐。但是，当我运行 Sound.play() 以播放声音效果时，从音乐应用程序播放的背景音乐会停止。有没有解决的办法？

提前致谢。

# android - 应用程序何时在 Facebook 上发布？

> ID：12580556
> 
> 赞同：0
> 
> 时间：2012-09-25T09:57:39.113
> 
> 标签：android, ios, facebook

那么，什么时候在 Facebook 上发布应用程序？仅仅是在沙盒模式被禁用时，还是您还需要做其他事情？

问题是我希望一些开发人员无需发布即可访问该应用程序，以便每个人都可以在 facebook 上找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T19:12:40.447

如果您不想成为开发人员的 Facebook 朋友，您可以在应用仪表板的“添加开发人员”部分添加他们的电子邮件地址而不是他们的姓名。这应该是为您的应用添加开发人员而不是 Facebook 上的朋友的有效解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:19:53.513

> 问题是我希望一些开发人员无需发布即可访问该应用程序，以便每个人都可以在 facebook 上找到它。

然后将其保持在沙盒模式，并从应用仪表板内部将这些开发人员作为管理员或测试用户添加到您的应用。

# javascript - 无法为通过 KML 数据创建的要素创建弹出窗口

> ID：12580559
> 
> 赞同：0
> 
> 时间：2012-09-25T09:57:44.570
> 
> 标签：javascript, openlayers

使用 OpenLayers 2.12，我正在检索 KML 地图数据，其中包含来自远程服务器的地图点位置。我的 Javascript 成功接收了数据，创建了功能，我可以在地图上看到位置标记。

然后我尝试做的是在单击每个位置时创建一个弹出窗口。这是我的“功能选择”事件处理程序：

```
function site_selected(event) {

    var feature = event.feature;
    feature.closeBox = true;
    feature.popupClass = OpenLayers.Class(OpenLayers.Popup.FramedCloud, {
        'autoSize': true
    });
    feature.data.popupContentHTML = '<div>hello</div>';
    feature.data.overflow = "auto";
    feature.lonlat = new OpenLayers.LonLat(feature.geometry.x, feature.geometry.y);
    var popup = feature.createPopup(true);
    popup.show();
} 
```

但是，调用`feature.createPopup(true)`返回 null。

我查看了弹出示例，但这不涉及加载 KML 数据。我设置了 lonlat 属性，但是仍然返回 null。问题是，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:47:31.877

请看“弹出”示例[https://github.com/ccnmtl/openlayers/tree/master/openlayers/examples](https://github.com/ccnmtl/openlayers/tree/master/openlayers/examples)

线 createPopup 功能： [https ://github.com/ccnmtl/openlayers/blob/master/openlayers/examples/popupMatrix.html#L857](https://github.com/ccnmtl/openlayers/blob/master/openlayers/examples/popupMatrix.html#L857)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:57:22.117

我发现使用以下代码会创建一个弹出窗口并将其显示在地图上：

```
popup = new OpenLayers.Popup("popup",
        new OpenLayers.LonLat(feature.geometry.x,feature.geometry.y),
        new OpenLayers.Size(200,200),
        "example popup",
        true);

map.addPopup(popup);
popup.show(); 
```

# clojure - 调用java工厂方法的clojure错误：找到多个匹配方法

> ID：12580562
> 
> 赞同：3
> 
> 时间：2012-09-25T09:57:52.763
> 
> 标签：clojure

在此示例中 - [http://jscience.org/api/javax/measure/package-summary.html](http://jscience.org/api/javax/measure/package-summary.html)，当我尝试在 clojure 中运行时，出现错误。

```
(import 'javax.measure.unit.SI)
(import 'javax.measure.Measure)

(Measure/valueOf 2 SI/KILOGRAM)
;; => More than one matching method found: valueOf
[Thrown class java.lang.IllegalArgumentException] 
```

有没有办法解决？

## 更新

实际的java代码是这样的：

```
public static <Q extends Quantity> Measure<java.lang.Integer, Q> valueOf(
        int intValue, Unit<Q> unit) {
    return new Integer<Q>(intValue, unit);
}

public static <Q extends Quantity> Measure<java.lang.Float, Q> valueOf(
        float floatValue, Unit<Q> unit) {
    return new Float<Q>(floatValue, unit);
} 
```

我得到的错误是：

```
找到多个匹配方法：valueOf
  [抛出的类 java.lang.IllegalArgumentException]

重启：
 0: [QUIT] 退出 SLIME 顶层

回溯：
  0: Compiler.java:2360 clojure.lang.Compiler.getMatchingParams
  1：Compiler.java:1555 clojure.lang.Compiler$StaticMethodExpr。
  2：Compiler.java:938 clojure.lang.Compiler$HostExpr$Parser.parse
  3：Compiler.java:6455 clojure.lang.Compiler.analyzeSeq
  4：Compiler.java:6262 clojure.lang.Compiler.analyze
  5：Compiler.java:6223 clojure.lang.Compiler.analyze
  6：Compiler.java:5618 clojure.lang.Compiler$BodyExpr$Parser.parse
  7：Compiler.java:5054 clojure.lang.Compiler$FnMethod.parse
  8：Compiler.java:3674 clojure.lang.Compiler$FnExpr.parse
  9：Compiler.java:6453 clojure.lang.Compiler.analyzeSeq

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T14:51:50.777

刚刚试了一下，这行得通：

```
(Measure/valueOf (Integer. 2) SI/KILOGRAM) 
```

就像这样：

```
(Measure/valueOf (cast Long 2) SI/KILOGRAM) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:16:57.887

很可能您正在调用静态重载方法（即`Measure.valueOf(double, Unit)`vs `Measure.valueOf(float, Unit)`）。尝试将您的值转换为所需的类型（假设您要调用`Measure/valueOf(float, Unit)`：

```
(Measure/valueOf (float 2) SI/KILOGRAM) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T15:03:54.483

以下是一些基本的铸造示例：

```
(import 'javax.measure.unit.SI)
(import 'javax.measure.Measure)

; Integer Value
; will call: 
;  public static <Q extends Quantity> Measure<java.lang.Integer, Q> valueOf
(Measure/valueOf (Integer. 2) SI/KILOGRAM)

; Long  value 
; will call: 
;  public static <Q extends Quantity> Measure<java.lang.Long, Q> valueOf
(Measure/valueOf (cast Long 2) SI/KILOGRAM)

; Float value
; will call: 
;  public static <Q extends Quantity> Measure<java.lang.Float, Q> valueOf
(Measure/valueOf (Float. 2.0) SI/KILOGRAM) 
```

# mysql - 使用 MySQL 与 NoSQL 的单个服务器上的 Key-Value 数据库是否存在高性能差异

> ID：12580566
> 
> 赞同：6
> 
> 时间：2012-09-25T09:58:09.987
> 
> 标签：mysql, mongodb, cassandra, database, nosql

在我的 PHP 应用程序中，我在一台服务器上的 MySQL MyISAM 分区表中有一个 470M 行的表，重 200GB。使用情况包括 70% 写入/30% 读取。我正在努力提高性能。当前的主要问题是由于表级锁引起的读/写争用。我正在尝试在两个选项之间做出决定：

1.  将 MySQL 更改为 Innodb。优点：避免表级锁。缺点：更多的磁盘空间，需要更大的硬盘，可能没有这些硬盘那么快（目前使用 RAID10 6*300GB SAS 15k）。
2.  将数据移动到 NoSQL 数据库。主要缺点：学习曲线。以前从未使用过 NoSQL。

问题是，在尝试仍然避免对数据进行分片的同时，考虑到我使用 RDMS MySQL 作为简单的键值存储这一事实，这两种方法之间的性能是否存在很大差异，或者 NoSQL 的主要优势是什么时候迁移到分布式系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:21:03.033

我只能部分回答您的问题，但希望不仅仅是评论。

MongoDB 通常不是一个键值存储，并且已知在用作一个存储时会产生某些性能影响。

MongoDb 在这里也有一个锁定问题，可能会再次困扰您。它有一个 DB 级锁 atm，这意味着它可能（需要测试）导致写锁饱和。

它还专为 80% 读取应用程序（据说这是当今网站最常见的设置）而设计，因此您执行的写入次数越多，您会发现性能随时间下降的次数越多。话虽如此，您可以调整 MongoDB 以使其对写入更加友好，并且分布式特性确实有助于稍微阻止写入锁定饱和。

不过话虽如此，我个人认为 MongoDB 从 SQL 的学习曲线：

*   在旁边`null`
*   在我的应用程序中实现比 SQL 更自然、更简单
*   查询语言很简单，很容易掌握
*   查询语言与 SQL 有很多相似之处
*   驱动程序是标准化的，因此您在控制台中的 JS 驱动程序的文档中看到的语法是一致的。

我个人对一般问题的看法是它的分布式概念。如果你得到一个专为键值存储设计的 NoSQL 解决方案，那么它可能会非常好。在 Google 上进行快速搜索，可以在 Wikipedia 上找到一小部分 NoSQL 键值存储：[http ://en.wikipedia.org/wiki/NoSQL#Key-value_stores_on_solid_state_or_rotating_disk](http://en.wikipedia.org/wiki/NoSQL#Key-value_stores_on_solid_state_or_rotating_disk)

# python - Python中的无序哈希

> ID：12580569
> 
> 赞同：0
> 
> 时间：2012-09-25T09:58:19.137
> 
> 标签：python, hash

我想按内容比较字典，所以我认为这可以通过创建项目元组的无序哈希来完成。

什么是最优雅的解决方案？

我正在考虑对所有单独的哈希进行异或运算，但也许还有另一种现成的解决方案？

编辑：我有*嵌套*的数据结构。一些类包含字典。这些类可以聚合为集合。因此，要将集合与预定义的集合比较进行比较，我必须为我的 dict-classes 实现`__eq__`（这很容易）和`__hash__`（这是我的问题）？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:30:05.710

要检查重叠键的所有值是否相同，请使用以下之一（取决于 Python 版本）和样式：

```
if all(dict_a[key] == dict_b[key] for key in dict_a.viewkeys() & dict_b.viewkeys()) 
```

* * *

```
if all(dict_a[key] == dict_b[key] for key in set(dict_a) & set(dict_b)) 
```

* * *

更具体地处理“它们是否具有相同的价值”......

```
for k, v in dict_a.iteritems():
    try:
        ov = dict_b[k]
    except KeyError as e:
        continue
    if v == ov: 
        pass # or whatever 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:18:08.210

请参阅 映射类型的[文档](http://docs.python.org/library/stdtypes.html#mapping-types-dict)。您已经定义了运算符来对字典进行各种操作。

# html - 隐藏 HTML tag which is loading a NPAPI plugin I am using an tag to load a NPAPI plugin in my HTML page. At certain point in time, I am trying to hide the and in order to do so, I am changing the width and height of the object to 问问题 问问题 2012-09-25T09:58:19.470 456 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am using an tag to load a NPAPI plugin in my HTML page. At certain point in time, I am trying to hide the and in order to do so, I am changing the width and height of the object to 0px using JavaScript. But this is not affecting the tag. Here is the syntax: "object width='100px' height='100px' id="pluginmedia" type="application/x-wcfmedia">" Can some one please let me know how to hide the ? Thanks and Regards, Souvik It is possible ton automatize application authorization using username and password. You need to "simulate" user acceptation (on the auth web page) and parse the PIN code on the resulting page. You need username and password (or manual acceptation) one time only if you retrieve and save user tokens (key and secret). Some OAuth libs already provide such features html 4 1 回答 1 This answer is useful 0 您可以改用 jQuery hide() $('#id').hide(); 在你的情况下$('#pluginmedia').hide(); 于 2012-09-25T10:38:05.757 回答 Related 2 php - PHP 页面未发布且 if 语句已损坏 6 c# - 从方法返回多个值 1 asp.net - 在 asp.net webforms 应用程序中处理最大文件上传大小 1 jquery - 提交下拉表单并获取变量（jquery/javascript） 1 javascript - 访问嵌入文件的元素 2 objective-c - 将字符串添加到数组 1 objective-c - 绘制文本方法不起作用 1 php - 错误消息中带有变量的 CakePHP 自定义验证 4 python - python selenium webdriver和只是硒之间的区别？ 3 haskell - 是否可以为应用函子使用括号语法糖？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12580570
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html

I am using an tag to load a NPAPI plugin in my HTML page. At certain point in time, I am trying to hide the and in order to do so, I am changing the width and height of the object to 0px using JavaScript. But this is not affecting the tag.

Here is the syntax:

"object width='100px' height='100px' id="pluginmedia" type="application/x-wcfmedia">"

Can some one please let me know how to hide the ?

Thanks and Regards, Souvik

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:38:05.757

您可以改用 jQuery hide()

```
$('#id').hide(); 
```

在你的情况下`$('#pluginmedia').hide();`

# html - 如何设置iOS6文件输入控件的样式？

> ID：12580571
> 
> 赞同：0
> 
> 时间：2012-09-25T09:58:27.567
> 
> 标签：html, css, ios, ios6

我很高兴文件的文件输入控件终于通过 iOS 6 到达了 iPhone。

但是，显示看起来有点奇怪。有谁知道设置控件样式的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T14:49:57.467

很简单，您可以隐藏元素并触发他们的点击事件。

HTML：

```
<input type="file" class="uploader" />
<u>Choose file</u> 
```

CSS：

```
input.uploader {
    visibility:hidden;
    height: 0;
}
u { 
    display: block; 
    margin: 5px; 
    padding: 15px; 
    text-align: center; 
    background: #ddd; 
    border-radius: 6px; 
} 
```

JS（带有 JQuery）：

```
$('u').click(function(){
    $('input[name=photo]').trigger('click');
}); 
```

示例：http: [//uploader.gokercebeci.com/](http://uploader.gokercebeci.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T12:14:18.307

这是适用于 iOS 的 OK 解决方案：

HTML：

```
<form enctype="multipart/form-data" method="POST" accept-charset="UTF-8">
  <input accept="image/jpeg" name="pic" id="pic" type="file">
  <a onmousedown="myClick();">
  Choose a new picture
  </a>
  <br> 
  <input value="put up the picture" type="submit"> 
</form> 
```

CSS：

```
#pic {
  display:none;
} 
```

Javascript：

```
function myClick() {
  document.getElementById('pic').click();
} 
```

或者在 CSSdeck： [http ://cssdeck.com/labs/kmyjvuwb](http://cssdeck.com/labs/kmyjvuwb)

这在当前的 Firefox 和 Chrome 中也可以正常工作，但可惜，在 IE 中不行（文件未上传！）...

# c# - HTTPContext.request.params 和 HTTPContext.request.params.get() 的 C# 问题

> ID：12580577
> 
> 赞同：0
> 
> 时间：2012-09-25T09:58:39.760
> 
> 标签：c#, params, httpcontext, missing-data

我希望有人可以帮助我解决以下问题，因为我真的迷路了。

我`HttpContext`从 ajax javascript 调用中得到一个 C# 到 C# 处理程序。

然后，使用 VS 运行调试模式，我可以看到`context.Request.Params`返回以下字符串：

```
id_affaire=225&Files=%3bT.00000.11-EXE-01-R+1-PL-202-B.dwg%3bT.00000.11-EXE-01-R+1-PL-202-B.dwg&table_colonne=Flexigrid_PanierBordereau&page=1&rp=10&sortname=nom&sortorder=asc&query=&qtype=&ASP.NET_SessionId=o314eh2yjush1pxno2geu42.... 
```

但这样做：`context.Request.Params.Get("Files")`我得到以下字符串

```
;T.00000.11-EXE-01-R 1-PL-202-B.dwg;T.00000.11-EXE-01-R 1-PL-202-B.dwg 
```

问题是角色`+`消失了……

```
 ;T.00000.11-EXE-01-R 1-PL-202-B.dwg;T.00000.11-EXE-01-R 1-PL-202-B.dwg 
```

我应该在参数中获取文件的全名，并且`+`应该在 R+1 字符串中，如下所示：

```
;T.00000.11-EXE-01-R+1-PL-202-B.dwg;T.00000.11-EXE-01-R+1-PL-202-B.dwg 
```

任何人都可以帮助我在 httpContext 的参数中包含已发送的字符串（缺少特殊字符`+`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:09:04.267

在将参数传递给 url 之前对参数进行编码，并在通过 context.Request.Params.Get("Files") 获取参数后对参数进行解码。

您可以使用：

```
HttpServerUtility.UrlDecode Method (String)
HttpServerUtility.UrlEncode Method (String) 
```

例如。：

**编码**

```
String MyURL;
MyURL = "http://www.contoso.com/articles.aspx?title=" + Server.UrlEncode("ASP.NET Examples"); 
```

**解码**

```
String DecodedString = Server.UrlDecode(EncodedString); 
```

# boost-serialization - 如何使用 Boost:serialization 来保存 Eigen::Matrix

> ID：12580579
> 
> 赞同：4
> 
> 时间：2012-09-25T09:58:45.600
> 
> 标签：boost-serialization, eigen

您好，我有一个代码可以实现 libeigen2 来计算特征向量。现在我想使用 boost::serialization 来保存信息以供以后检索。从示例[教程](http://www.boost.org/doc/libs/1_47_0/libs/serialization/doc/tutorial.html#nonintrusiveversion)中，我想出了以下代码！

```
class RandomNode {
private:
friend class boost::serialization::access;
template<class Archive>
void serialize(Archive & ar, const unsigned int version)
{
   ar & is_leaf_;
   ar & depth_;
   ar & num_classes_;
   ar & num_features_;
   // Split node members
   ar & random_feature_indices_;
   ar & random_feature_weights_;
   ar & threshold_;
   ar & leftChild_;
   ar & rightChild_;

 }
bool is_leaf_;
int depth_;
int num_classes_;
int num_features_;

// Split node members
VectorXi random_feature_indices_;
VectorXd random_feature_weights_;
double threshold_;
RandomNode* leftChild_;
RandomNode* rightChild_;
 // Methods and so on
} 
```

现在，当我尝试运行此代码时，出现以下错误

```
/usr/include/boost/serialization/access.hpp:118:9: error: ‘class Eigen::Matrix<double, 10000, 1>’ has no member named ‘serialize’ 
```

如何序列化 Eigen::Matrix 类？可能吗 ？提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T09:59:51.347

[您应该阅读关于可序列化](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/serialization.html)概念主题的 boost::serialization 文档。它基本上说类型需要是原始的或可序列化的。Eigen 类型不是它，你的编译器试图告诉你。为了使 Eigen 类型可序列化，您需要实现以下免费功能

```
template<class Archive>
inline void serialize(
    Archive & ar, 
    my_class & t, 
    const unsigned int file_version
) {
    ...
} 
```

为了为 Eigen 做这件事，我想你可能会做类似这个模板的事情

这是一个适合您的示例实现：

```
#include <fstream>
#include <Eigen/Core>
#include <boost/archive/text_oarchive.hpp>

using namespace Eigen;

struct RandomNode {
friend class boost::serialization::access;
template<class Archive>
void serialize(Archive & ar, const unsigned int version)
{
   ar & random_feature_indices_;
   ar & random_feature_weights_;
}
// Split node members
VectorXi random_feature_indices_;
VectorXd random_feature_weights_;
};

namespace boost
{
template<class Archive, typename _Scalar, int _Rows, int _Cols, int _Options, int _MaxRows, int _MaxCols>
inline void serialize(
    Archive & ar, 
    Matrix<_Scalar, _Rows, _Cols, _Options, _MaxRows, _MaxCols> & t, 
    const unsigned int file_version
) 
{
    size_t rows = t.rows(), cols = t.cols();
    ar & rows;
    ar & cols;
    if( rows * cols != t.size() )
    t.resize( rows, cols );

    for(size_t i=0; i<t.size(); i++)
    ar & t.data()[i];
}
}

int main()
{
    // create and open a character archive for output
    std::ofstream ofs("filename");

    RandomNode r;
    r.random_feature_indices_.resize(3,1);

    // save data to archive
    {
        boost::archive::text_oarchive oa(ofs);
        // write class instance to archive
        oa << r;
        // archive and stream closed when destructors are called
    }
} 
```

# css - Ext.Panel 使用自定义 CSS 边框显示错误

> ID：12580594
> 
> 赞同：0
> 
> 时间：2012-09-25T09:59:34.490
> 
> 标签：css, border, panel, extjs3

我创建了一个 JSfiddle 来让您展示问题... [http://jsfiddle.net/mrgamer/u3Z48/](http://jsfiddle.net/mrgamer/u3Z48/)

**x-panel-body**的element.width计算不正确，在上面的示例中，它设置为 340 像素，而不是正确显示我设置的边框应该设置为 338 像素！

截图更清楚：

**它是怎样的：**

![怎么样](../Images/8d1e6c4ab8bd24afb4768a759c8ea81e.png)

**应该如何：**

![应该如何](../Images/b2d18b53a449f326c9f9a0903730bb49.png)

我知道这是一个非常小的“问题”，但我仍然不知道如何纠正它，在 Ext.Panel 等过度使用的组件中出现这样的显示错误很烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:07:58.177

尝试以下

```
.x-panel-body .body_border{
    padding: 2px;
    border: 1px solid red;
    margin: 1px;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:09:12.597

要解决这个问题，在样式配置中定义宽度就足够了，如下所示：

```
var panel1 = new Ext.Panel({
    title: 'Inner Panel',
    height: 300,
    style: {width: '350px'},
    border: false,
    cls: 'panel_class',
    bodyCssClass: 'body_border'
}); 
```

它不是尽可能干净，但我认为这是 ExtJS 误算的一个不错的解决方案！

# diameter-protocol - Diameter协议中CCA和Ro应用的区别？

> ID：12580595
> 
> 赞同：3
> 
> 时间：2012-09-25T09:59:35.057
> 
> 标签：diameter-protocol

有谁知道直径协议中 Credit-Control-Application 和 Ro 应用程序之间的区别？它们在 Mobicents 直径堆栈中的实现几乎相同。

我在相应的 RFC 和 3GPP 文档中进行了搜索，但无法找出哪一个必须用于在线计费流程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T04:46:05.497

简单地说：IETF 指定协议，而 3GPP 指定如何在非常特定的上下文中使用协议。在指定参考点（或“接口”）时，3GPP 可能有额外的要求或建议，但通常这是在不违反任何 IETF RFC 的情况下完成的（否则与联系 IETF 解决冲突）。

上面通常描述了 IETF 指定的协议与其在 3GPP 中的相应使用之间的大部分关系。

对于 Diameter 应用，3GPP 有时还可以使用附加的应用 ID、AVP 扩展 IETF RFC，并定义如何将信息元素 (IE) 从其他 3GPP 接口映射到 AVP。

现在到 Credit-control 直径应用程序和 Ro 接口。前者在[RFC 4006](https://www.rfc-editor.org/rfc/rfc4006)中定义，而后者在[3GPP TS 32.299](http://www.etsi.org/deliver/etsi_ts/132200_132299/132299/10.07.00_60/ts_132299v100700p.pdf)中定义。我没有详细了解 3GPP 规范，但不难找到一些差异。例如，Ro 接口的 Credit-Control-Request (CCR) 消息不使用 Requested-Service-Unit AVP 和其他一些如 32.299 的表 6.4.2 中指出的；但 CCR 消息可能包含 QoS-Information，即 29.212 中定义的组 AVP，这是 Ro 特定的。32.299 的表 6.4.3 描述了 Credit-Control-Answer 消息的相似之处，并注意文档中列出的更多差异。

至于 Mobicents，我没有实现它的经验，但开源版本不完全符合 3GPP 规范并省略了一些附加功能，这并不让我感到惊讶。

# windows-phone-7 - Windows 手机 7.0 与 7.5

> ID：12580596
> 
> 赞同：1
> 
> 时间：2012-09-25T09:59:35.497
> 
> 标签：windows-phone-7

windows phone **7.5**是否支持 windows phone **7.0**应用程序。如果它是内置在 windows phone **7.0中的，我们可以在 windows phone** **7.5**上运行应用程序吗？反之亦然？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:05:50.773

是的，Windows Phone 7.5 可以运行 Windows Phone 7.0 应用程序，但是由于所有设备现在都应该运行 Windows Phone 7.5，那么您应该从一开始就创建 Windows Phone 7.5 应用程序。**

# java - JLS 的哪些部分证明能够像未经检查一样抛出已检查异常？

> ID：12580598
> 
> 赞同：29
> 
> 时间：2012-09-25T09:59:40.540
> 
> 标签：java, exception, generics, jls, checked-exceptions

我[最近发现并在博客中提到了这样一个事实](http://java.dzone.com/articles/throw-checked-exceptions)，即可以通过 javac 编译器偷偷检查一个已检查的异常并将其抛出到不应抛出的地方。这在 Java 6 和 7 中编译并运行，抛出一个`SQLException`无`throws`or`catch`子句：

```
public class Test {

    // No throws clause here
    public static void main(String[] args) {
        doThrow(new SQLException());
    }

    static void doThrow(Exception e) {
        Test.<RuntimeException> doThrow0(e);
    }

    static <E extends Exception> void doThrow0(Exception e) throws E {
        throw (E) e;
    }
} 
```

生成的字节码表明 JVM 并不真正关心已检查/未检查的异常：

```
// Method descriptor #22 (Ljava/lang/Exception;)V
// Stack: 1, Locals: 1
static void doThrow(java.lang.Exception e);
  0  aload_0 [e]
  1  invokestatic Test.doThrow0(java.lang.Exception) : void [25]
  4  return
    Line numbers:
      [pc: 0, line: 11]
      [pc: 4, line: 12]
    Local variable table:
      [pc: 0, pc: 5] local: e index: 0 type: java.lang.Exception

// Method descriptor #22 (Ljava/lang/Exception;)V
// Signature: <E:Ljava/lang/Exception;>(Ljava/lang/Exception;)V^TE;
// Stack: 1, Locals: 1
static void doThrow0(java.lang.Exception e) throws java.lang.Exception;
  0  aload_0 [e]
  1  athrow
    Line numbers:
      [pc: 0, line: 16]
    Local variable table:
      [pc: 0, pc: 2] local: e index: 0 type: java.lang.Exception 
```

JVM 接受这一点是一回事。但我对*Java 语言*是否应该存在一些疑问。JLS 的哪些部分证明了这种行为？它是一个错误吗？还是 Java 语言的一个隐藏得很好的“特性”？

我的感受是：

*   `doThrow0()`'s`<E>`必然`RuntimeException`在`doThrow()`. 因此，不需要遵循[JLS §11.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.2)的`throws`条款。`doThrow()`
*   `RuntimeException`与 赋值兼容，因此编译器不会生成`Exception`强制转换（这将导致 a ）。`ClassCastException`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T10:34:47.673

所有这些都等于利用了一个漏洞，即未经检查的泛型类型转换不是编译器错误。如果您的代码包含这样的表达式，则它被明确地设为类型不安全。而且由于检查异常的检查严格来说是一个编译时过程，所以运行时不会中断。

泛型作者的回答很可能是“如果您使用未经检查的演员表，那是您的问题”。

我在你的发现中看到了一些非常积极的东西——突破了检查异常的堡垒。不幸的是，这不能将现有的受检查异常中毒的 API 变成更易于使用的东西。

## 这有什么帮助

在我的一个典型的分层应用项目中，会有很多这样的样板：

```
try {
  ... business logic stuff ...
} 
catch (RuntimeException e) { throw e; } 
catch (Exception e) { throw new RuntimeException(e); } 
```

我为什么要这样做？很简单：没有要捕获的业务价值异常；任何异常都是运行时错误的症状。异常必须沿调用堆栈向上传播到全局异常屏障。有了卢卡斯的出色贡献，我现在可以写作了

```
try {
  ... business logic stuff ... 
} catch (Exception e) { throwUnchecked(e); } 
```

这可能看起来不多，但在整个项目中重复 100 次后，收益就会累积起来。

## 免责声明

在我的项目中，有关于异常的严格纪律，所以这非常适合他们。**这种诡计不是一般的编码原则**。在许多情况下，包装异常仍然是唯一安全的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:44:01.340

此示例记录在[The CERT Oracle Secure Coding Standard for Java 中](http://books.google.co.in/books?id=uLQhBkzH0DUC&pg=PA284&lpg=PA284&dq=Noncompliant+Code+Example+%28Generic+Exception%29&source=bl&ots=6BpVA0zRGW&sig=xQS5cBSwtnl9EJ1aZXSNrZ84Zzs&hl=en&sa=X&ei=zbVhUNDxGczJrAeRjYGoDg&ved=0CFEQ6AEwBg#v=onepage&q=Noncompliant%20Code%20Example%20%28Generic%20Exception%29&f=false)中，该标准记录了几个不合规的代码示例。

**不合规代码示例（一般异常）**

> 具有参数化异常声明的泛型类型的未经检查的强制转换也可能导致意外的检查异常。除非警告被禁止，否则编译器会诊断所有此类强制转换。

```
interface Thr<EXC extends Exception> {
  void fn() throws EXC;
}

public class UndeclaredGen {
static void undeclaredThrow() throws RuntimeException {
@SuppressWarnings("unchecked")  // Suppresses warnings
Thr<RuntimeException> thr = (Thr<RuntimeException>)(Thr)
  new Thr<IOException>() {
    public void fn() throws IOException {
      throw new IOException();
}
  };
thr.fn();
}

public static void main(String[] args) {
  undeclaredThrow();
 }
} 
```

这是有效的，因为`RuntimeException`它是子类，`Exception`并且您不能转换任何从`Exception`to扩展的类，`RuntimeException`但是如果您像下面这样进行转换，它将起作用

```
 Exception e = new IOException();
 throw (RuntimeException) (e); 
```

您正在做的情况与此相同。因为这是显式类型转换，所以此调用将导致`ClassCastException`编译器允许它。

由于 Erasure 但是在您的情况下没有涉及演员表，因此在您的情况下它不会抛出`ClassCastException`

在这种情况下，编译器无法限制您正在进行的类型转换。

但是，如果您将方法签名更改为以下，它将开始抱怨它。

```
static <E extends Exception> void doThrow0(E e) throws E { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-25T10:11:40.150

好吧，这是引发检查异常的多种方法之一，就好像它没有被检查一样。`Class.newInstance()`是另一种，`Thread.stop(Trowable)`已弃用的一种。

JLS 不接受此行为的唯一方法是运行时 (JVM) 是否会强制执行它。

至于它是否被指定：它不是。已检查和未检查的异常**行为**相同。检查异常只需要一个 catch 块或 throws 子句。

**编辑**：基于评论中的讨论，一个基于列表的示例揭示了根本原因：擦除

```
public class Main {
    public static void main(String[] args) {
        List<Exception> myCheckedExceptions = new ArrayList<Exception>();
        myCheckedExceptions.add(new IOException());

        // here we're tricking the compiler
        @SuppressWarnings("unchecked")
        List<RuntimeException> myUncheckedExceptions = (List<RuntimeException>) (Object) myCheckedExceptions;

        // here we aren't any more, at least not beyond the fact that type arguments are erased
        throw throwAny(myUncheckedExceptions);
    }

    public static <T extends Throwable> T throwAny(Collection<T> throwables) throws T {
        // here the compiler will insert an implicit cast to T (just like your explicit one)
        // however, since T is a type variable, it gets erased to the erasure of its bound
        // and that happens to be Throwable, so a useless cast...
        throw throwables.iterator().next();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T14:40:15.270

我认为 JLS 允许该代码是无可争议的。问题不在于该代码是否应该合法。编译器根本没有足够的信息来发出错误。

调用泛型抛出方法时发出的代码的问题。编译器当前在调用泛型*返回后插入类型转换*方法后插入类型转换，其中返回的值将立即分配给引用。

如果编译器需要，它可以通过在 try-catch-rethrow 片段中静默地包围所有泛型抛出方法调用来防止问题。由于将捕获异常并将其分配给局部变量，因此强制类型转换。所以你会得到一个`ClassCastException`如果它不是一个实例`RuntimeException`.

但是该规范并没有要求对泛型抛出方法有任何特殊要求。我相信这是一个规范错误。为什么不提交一个关于这个的错误，以便它可以被修复或至少记录在案。

顺便说一句，这`ClassCastException`会抑制原始异常，这可能会导致难以发现的错误。但是从 JDK 7 开始，这个问题有了一个[简单的解决方案。](http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html#addSuppressed%28java.lang.Throwable%29)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T10:50:00.587

JLS 11.2：

> 对于每个可能结果的检查异常，方法（§8.4.6）或构造函数（§8.8.5）的 throws 子句必须提及该异常的类或该异常类的超类之一（§ 11.2.3)。

这清楚地表明 doThrow 的 throws 子句中必须有 Exception。或者，由于涉及向下转换（对 RuntimeException 的异常），因此必须检查 Exception IS RuntimeException，在示例中它应该失败，因为正在转换的异常是 SQLException。因此，应该在运行时抛出 ClassCastException。

实际上，这个 java 错误允许为任何标准异常处理代码创建一个不安全的 hack，如下所示：

```
try {
 doCall();
} catch (RuntimeException e) {
 handle();
} 
```

异常会在不被处理的情况下上升。

# alfresco - how to audit action download in alfresco?

> ID：12580605
> 
> 赞同：0
> 
> 时间：2012-09-25T09:59:59.877
> 
> 标签：alfresco, audit

I have problem in alfresco. alfresco provide audit action some properties as modified/added/deleted/move/read. about [Content Auditing](https://wiki.alfresco.com/wiki/Content_Auditing)

But I have audit action about downloading. such as "who do downloading" ,"what time is download"

# android - What are the correct Android manifest settings for an Adobe AIR application to restrict device availability?

> ID：12580607
> 
> 赞同：7
> 
> 时间：2012-09-25T10:00:04.487
> 
> 标签：android, air, adobe, manifest, flashdevelop

I am writing an Adobe AIR Android application using FlashDevelop, and I want to make sure that when I publish it to Google Play it is only available to devices that support Adobe AIR based applications. What is the proper way to configure this in my project files?

**UPDATE:** Tech Requirements for Adobe AIR 3 (from [Adobe](http://www.adobe.com/products/air/tech-specs.html)):

*   ARMv7 processor with vector FPU, minimum 550MHz, OpenGL ES 2.0, H.264 and AAC HW decoders
*   Android™ 2.2, 2.3, 3.0, 3.1, 3.2, and 4.0
*   256MB of RAM
*   Android web browser

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:59:39.947

AIR 将在 Froyo（Android 2.2 SDK 版本 8）或更高版本上运行。在您的 application.xml 中将以下内容添加到清单添加中

```
<uses-sdk android:minSdkVersion="8" /> 
```

这将确保运行低于 2.2 的任何内容都不会与您的应用程序兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T14:57:03.833

```
<uses-sdk android:minSdkVersion="9" android:targetSdkVersion="16"/>
<supports-screens android:resizeable="true" android:anyDensity="true" android:smallScreens="false" android:normalScreens="true" android:largeScreens="true" android:xlargeScreens="true"/> 
```

您需要添加 support-gl-texture 标志以过滤掉具有旧 opengl 和视频卡的设备：

```
<supports-gl-texture android:name="GL_OES_compressed_ETC1_RGB8_texture"/> 
```

# c# - Parse SQL statement

> ID：12580609
> 
> 赞同：1
> 
> 时间：2012-09-25T10:00:07.010
> 
> 标签：c#, asp.net, sql-server, parsing

How can I parse a SQL statement (for SQL Server) to extract columns and parameters info (Name, DataType) without using ActiveQueryBuilder.

Regards

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:03:46.597

You can try with `TSql100Parser class`

Link :  [http://msdn.microsoft.com/fr-fr/library/microsoft.data.schema.scriptdom.sql.tsql100parser.aspx](http://msdn.microsoft.com/fr-fr/library/microsoft.data.schema.scriptdom.sql.tsql100parser.aspx)

Sample :

```
 bool fQuotedIdenfifiers = false;
 var _parser = new TSql100Parser(fQuotedIdenfifiers);

 SqlScriptGeneratorOptions options = new SqlScriptGeneratorOptions();
 options.SqlVersion = SqlVersion.Sql100;
 options.KeywordCasing = KeywordCasing.UpperCase;
 _scriptGen = new Sql100ScriptGenerator(options);

 IScriptFragment fragment;
 IList<ParseError> errors;
 using (StringReader sr = new StringReader(inputScript))
 {
       fragment = _parser.Parse(sr, out errors);
 }

 if (errors != null && errors.Count > 0)
 {
       StringBuilder sb = new StringBuilder();
       foreach (var error in errors)
       {
           sb.AppendLine(error.Message);
           sb.AppendLine("offset " + error.Offset.ToString());
       }
       var errorsList = sb.ToString();
 }
 else
 {
       String script;
       _scriptGen.GenerateScript(fragment, out script);
       var result = script;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:11:11.773

好吧，解析语句与取回结果语句的模式有很大不同。解析意味着您只需验证查询的语法。但是，要取回结果模式涉及解析，那么您试试这个怎么样。

```
DataTable table = new DataTable();
SqlDataAdapter sda = new SqlDataAdapter("select * from yourtable", "your connection string");
sda.FillSchema(table, SchemaType.Source); 
```

# objective-c - 打开外部pdf阅读器

> ID：12580613
> 
> 赞同：-2
> 
> 时间：2012-09-25T10:00:18.380
> 
> 标签：objective-c, ipad

我的应用程序创建了一个 pdf，可以在常规菜单中打开然后查看，但不能在应用程序中查看。如何在 ipad 阅读器中以编程方式打开 pdf？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:28:41.753

您必须在标头的 ViewController 中设置委托：

```
@interface YourViewController : UIViewController <UIDocumentInteractionControllerDelegate> 
```

然后你必须实现这个方法：

```
- (UIViewController *)documentInteractionControllerViewControllerForPreview:(UIDocumentInteractionController *)controller
{
    return self;
} 
```

然后，当您发现必须打开哪个 pdf 时：

```
 NSString *sPathPDF = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:[NSString stringWithFormat:@"name.pdf"]]; //path example for a local stored pdf
    NSURL *urlPDF = [NSURL fileURLWithPath:sPathPDF];
    UIDocumentInteractionController *dicPDF = [UIDocumentInteractionController interactionControllerWithURL: urlPDF];
    [dicPDF setDelegate:self];
    [dicPDF presentPreviewAnimated: YES]; 
```

# java - Pagination based on timestamp on multiple database instance setup

> ID：12580614
> 
> 赞同：1
> 
> 时间：2012-09-25T10:00:30.420
> 
> 标签：java, mysql

I have a setup at present there are three MySQL instance which store different data. I want to get Max combined 1000 data. The data which needs to be shown in descending order of timestamp.

for e.g.

*   instance 1 has 3000 records
*   instance 2 has 1000 records
*   instance 3 has 500 records

* * *

1.  Need to get records from each instance.
2.  Combine all the records and from that get a max 1000 records.
3.  When the user clicks next need to get data from last record ahead based on the timestamp

# cordova - Ripple produces .bar and .zip only, no .cod files

> ID：12580616
> 
> 赞同：0
> 
> 时间：2012-09-25T10:00:33.493
> 
> 标签：cordova, blackberry, blackberry-webworks, ripple

I've been using Ripple to preview a Phonegap application. The preview works fine and I would like to package the app so I can test on a real device.

Using ripple, I've set the platform to WebWorks 2.0.0.

I have run package and sign, which completes successfully and gives me the following output :

```
smrtlap1307:SmartConf JElsey$ tree -L 3 bin/
bin/
├── SmartConf-BB.zip
├── device
│   └── SmartConf-BB.bar
└── simulator
    └── SmartConf-BB.bar 
```

Any reason why I wouldn't be getting the .cod files? If I understand correctly, .bar files are only produced for PlayBook apps, and I need a .cod file to deploy onto a BB Curve.

Can anyone advise?

**EDIT** : This is my Ripple version

*   Ripple UI (v0.9.8)
*   Ripple Build & Deploy (v0.9.5)

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:39:24.393

条形图适用于 BlackBerry PlayBook 和 BlackBerry 10 设备。除了基于 Java 的 BlackBerry 设备（如您的曲线）之外，Ripple 还支持这些。检查目标设备。

# php - What does the following PHP code do (it mixes PHP and output)?

> ID：12580618
> 
> 赞同：0
> 
> 时间：2012-09-25T10:00:39.910
> 
> 标签：php

I am reading some WordPress plugin code, pardon my french, and even though I have coded a lot of stuff in anything from C to JavaScript, including PHP, I am not sure what kind of logic is accomplished with following:

```
<?php

    function dcontact_options_page() {

        if($_GET['action'] == 'edit_group') {
            dcontact_action_edit_group();
            return;
        }
        elseif($_GET['action'] == 'edit_form') {
            dcontact_action_form_settings();
            return;
        }
        elseif(isset($_POST['set_order'])) {
            $result = dcontact_action_set_order();
        }
        else if(isset($_POST['new_group'])) {
            $result = dcontact_action_new_group();
        }
        else if($_GET['action'] == 'delete_group') {
            $result = dcontact_action_delete_group();
        }

        if(!isset($result['message']) && isset($_GET['message'])) $result['message'] = urldecode($_GET['message'])
    ?>

    <div class="wrap">
        <div class="icon32" id="icon-options-general"><br></div>

        <!-- More HTML AND PHP code blocks -->

    <!-- And then suddenly... -->

<?php
    } /// What's this? End of function definition? PHP chokes on this with syntax error.

    ///...

?> 
```

I am no stranger to mixing PHP and verbatim output, and I also did my fair share of entering and exiting PHP blocks in the middle of say `if` statements, but this tops it. Can anyone explain what the guy was trying to accomplish? Does the code imply that if the `if` condition evaluates to `true` then whole lot of markup is written out (and more PHP is executed), **but then** the function definition ends, suddenly? Maybe it's what the function does? I mean, I would have used a `HEREDOC` syntax for readability.

And to sum it up, my command line PHP 5.4.7 preprocessor chokes on the last `}`. And I can't say I blame it. Haven't seen spaghetti code like this in some time now.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:04:04.627

This part:

```
if(!isset($result['message']) && isset($_GET['message'])) $result['message'] = urldecode($_GET['message']) 
```

Is missing a semi-colon at the end. It would be much clearer if the original author had used proper bracing for single-statement conditionals, e.g.:

```
if(!isset($result['message']) && isset($_GET['message'])) {
    $result['message'] = urldecode($_GET['message'])
} 
```

That would have put the error location just one line below the offending line :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:10:23.333

第一个结束 PHP 标记之前的 if 语句是一种简写形式。

```
if(!isset($result['message']) && isset($_GET['message'])) $result['message']  = urldecode($_GET['message']) 
```

可以更清楚地写成：

```
if (!isset($result['message']) && isset($_GET['message'])) {
  $result['message'] = urldecode($_GET['message']);
} 
```

此外，if 语句后面也应该跟一个分号，但是因为它后面跟一个 PHP 结束标签，所以并不是严格要求的。

# javascript - Firefox seems to ignore event.preventDefault()

> ID：12580624
> 
> 赞同：1
> 
> 时间：2012-09-25T10:00:56.930
> 
> 标签：javascript, firefox, dom-events, opera

I'm working on a page where I have a draggable item (a map inside a container). When you click and drag with the mouse, the map moves and everything is fine. I then wanted to add the same functionality for touch devices (such as a smartphone or a tablet). I searched the net and found a working script that "changes" touch input to mouseinput and thus making it possible to drag the map without dragging the entire page (which is standard behaviour). This is done using the line

```
event.preventDefault() 
```

It is even possible to have click events as well by timing how long apart the touches are. I am no coding genius and all this programming was done by others. You can see the discussion at [Javascript Drag and drop for touch devices](https://stackoverflow.com/questions/5186441/javascript-drag-and-drop-for-touch-devices) (I have used the original code in the top answer as well as the timing code in the answer just below the top answer).

So far, so good. It is now possible to drag the map around and click any links on it or the page just as you would, if you were using a mouse. This works on all touch browsers I have tried (I haven't tried a lot, but the ones I've tried work). The only problem is, that you cannot drag the page itself around, since the default behaviour of the touch has been disabled. This is a problem when the content of the page (for instance the size of the map container) is larger than the browser window.

Luckily an answer was provided for this as well (it is the bottom-most answer on the page I linked to above): replacing

```
event.preventDefault() 
```

with

```
if (touches.length > 1) event.preventDefault(); 
```

the default scrolling/resizing etc. of a touch works if you use one finger, but if you use more than one finger, the default behaviour is prevented. In other words: If you use two fingers, you can drag the map around without dragging the page (just as before), but if you use one finger, you can drag the page around! I really like this solution as it seems quite elegant to me.

Well, I added the line and tested on the default browser on my HTC Incredible phone (way to small screen but it is what I have). The default browser is just called "Internet". Everything works perfectly! So, I test on Firefox and Opera, and unfortunately, they are not working perfectly. It seems that once the

```
event.preventDefault() 
```

is inside the "if" statement, it is completely ignored, so when I drag the map, it IS dragged (as the touch is still converted to a drag of the mouse), but the page itself is also dragged, regardless of the number of fingers I use. In short: The page behaves as if no

```
event.preventDefault() 
```

is triggered.

I have looked around for several hours and have come to suspect that the event variable needs to be initialized or imported for Firefox and Opera to be able to use it, as described here: [jQuery event.preventDefault() not working in Firefox (JSFiddle included)](https://stackoverflow.com/questions/4585970/jquery-event-preventdefault-not-working-in-firefox-jsfiddle-included)

My question (at long last): Could this be right, and how do I go about "importing" the event into the "if" statement?

The code is here (the `init()` function is triggered by body onload)

```
 <script type="text/javascript">

    var clickms = 400;
    var lastTouchDown = -1;

    function touchHandler(event)
    {

    var touches = event.changedTouches,
    first = touches[0],
    type = "";

    var d = new Date();
    switch(event.type)
    {
    case "touchstart": type = "mousedown"; lastTouchDown = d.getTime(); break;
    case "touchmove": type="mousemove"; lastTouchDown = -1; break;        
    case "touchend": if(lastTouchDown > -1 && (d.getTime() - lastTouchDown) < clickms){lastTouchDown = -1; type="click"; break;} type="mouseup"; break;
    default: return;
    }

    var simulatedEvent = document.createEvent("MouseEvent");
    simulatedEvent.initMouseEvent(type, true, true, window, 1,
                      first.screenX, first.screenY,
                      first.clientX, first.clientY, false,
                      false, false, false, 0/*left*/, null);

    first.target.dispatchEvent(simulatedEvent);
    if (touches.length > 1)
    {
    event.preventDefault();
    }

    }

    function init()
    {
    document.addEventListener("touchstart", touchHandler, true);
    document.addEventListener("touchmove", touchHandler, true);
    document.addEventListener("touchend", touchHandler, true);
    document.addEventListener("touchcancel", touchHandler, true);    
    }

    </script> 
```

Edit: I should add that I have tried inserting an alert statement into the if statement, just to see whether Firefox or Opera actually register that a two-finger gesture is performed. The alert is triggered without problems, so perhaps the problem is that once Firefox or Opera has started a two-finger gesture, the standard behaviour of the gesture (draggring or resizing the page) cannot be stopped, at least not in this way.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:27:26.110

我似乎已经解决了这个问题（至少在我可供测试的浏览器上）

我所做的是改变

```
 if (touches.length > 1) {
      event.preventDefault();
    } 
```

至

```
 if (event.touches.length > 1) {
      event.preventDefault();
    } 
```

现在可以使用两根手指拖动可拖动元素，而无需移动页面的其余部分。在 Firefox 和 Opera 上仍然可以用一根手指拖动地图，但这是小事，只要您采取“要拖动时只用两根手指”的态度。

唯一的小问题是 Firefox 和 Opera 似乎在他们选择关注的指尖之间来回跳跃，使得可拖动元素有些抖动，尤其是当手指有点分开时。此行为不会显示在“Internet”浏览器中。

# .htaccess - IIS Remove Subdirectory from urls - web.config & .htaccess

> ID：12580625
> 
> 赞同：3
> 
> 时间：2012-09-25T10:01:07.220
> 
> 标签：.htaccess, web-config

I've asked question before but haven't found solution. So I'm posting again with some additional infos. I've tried to move all file to root from sub-directory called (Silverstripe), but then blank page showed up. even i delete **default.aspx** and **web.config** file too. and also played with **.htaccess** file. and I'm not much awar of these stuff, so this is why i posted my issue here.

The Problem is I want to remove sub-directory from url & permalinks as well. e.g.

[http://www.jtrainingsolutions.com/Silverstripe/](http://www.jtrainingsolutions.com/Silverstripe/) **=>** [http://www.jtrainingsolutions.com/](http://www.jtrainingsolutions.com/)

**Root Map:**

```
 - /Silverstripe - (Subdirectory)
     - root/Silverstripe/.htaccess
     - root/Silverstripe/web.config
     - root/and other Silverstripe CMS files
 - /default.aspx 
```

**default.aspx:**

```
<%
If InStr( UCase(Request.ServerVariables("SERVER_NAME")),  UCase("www.jtrainingsolutions.com") ) > 0 Then  
        Response.Redirect("/Silverstripe")  
ElseIf InStr( UCase(Request.ServerVariables("SERVER_NAME")), UCase("jtrainingsolutions.com") ) > 0 Then  
        Response.Redirect("/Silverstripe")  
End If  
%> 
```

**.htaccess file:**

```
### SILVERSTRIPE START ###
<Files *.ss>
    Order deny,allow
    Deny from all
    Allow from 127.0.0.1
</Files>
<Files web.config>
    Order deny,allow
    Deny from all
</Files>

ErrorDocument 404 /assets/error-404.html
ErrorDocument 500 /assets/error-500.html

<IfModule mod_alias.c>
    RedirectMatch 403 /silverstripe-cache(/|$)
</IfModule>
<IfModule mod_rewrite.c>
    SetEnv HTTP_MOD_REWRITE On
    RewriteEngine On

    RewriteCond %{REQUEST_URI} !(\.gif$)|(\.jpg$)|(\.png$)|(\.css$)|(\.js$)|(\.php$)

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l
    RewriteRule ^(.*)$ Silverstripe/$1 [L]

    RewriteBase /Silverstripe
</IfModule>
### SILVERSTRIPE END ### 
```

and **web.config file**:

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.webServer>
        <security>
            <requestFiltering>
                <hiddenSegments applyToWebDAV="false">
                    <add segment="silverstripe-cache" />
                </hiddenSegments>
            </requestFiltering>
        </security>
        <rewrite>
            <rules>
                <rule name="SilverStripe Clean URLs" stopProcessing="true">
                    <match url="^(.*)$" />
                    <conditions>
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="sapphire/main.php?url={R:1}" appendQueryString="false" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

Please advise me how to fix this issue. thanks in advance.

# c++ - valarray vs. vector：为什么要引入 valarray？

> ID：12580628
> 
> 赞同：6
> 
> 时间：2012-09-25T10:01:11.243
> 
> 标签：c++, valarray

是的，[之前有人问过](https://stackoverflow.com/questions/1602451/c-valarray-vs-vector)这个问题，答案是：

> `valarray`s（值数组）旨在将 Fortran 的一些速度带入 C++。您不会制作 a `valarray`of 指针，因此编译器可以对代码做出假设并更好地优化它。（Fortran 这么快的主要原因是没有指针类型，所以不能有指针别名。）

或者：

> `valarray`还应该消除任何混叠的可能性 [...]

但这些答案对我来说毫无意义。

`valarray`并且`vector`是*类模板*，因此，它们甚至在实例化之前都不*存在。*
当然， a`vector<int>`不会引起混叠问题`valarray<int>`。

鉴于此， 的目的是什么`valarray`，为什么他们不简单地将相同的功能放入其中`vector`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-25T10:11:26.847

关注分离？A`vector`和a`valarray`解决不同的问题。引用标准，a`vector`是 ( `§23.3.6.1 [vector.overview] p1`)

> ...支持随机访问迭代器的序列容器。此外，它还支持（摊销）恒定时间的最后插入和擦除操作；在中间插入和擦除需要线性时间。存储管理是自动处理的，但可以给出提示以提高效率。

而 a`valarray`是 ( `§26.6.2.1 [template.valarray.overview] p1`)

> ... 一维智能数组，元素从零开始按顺序编号。**它是一组有序值的数学概念的表示。**更高维度的错觉可能是由计算索引的熟悉习语以及广义下标运算符提供的强大子集能力产生的。

如您所见，它们有不同的用途。A`vector`是一个广义*动态数组*，而 a`valarray`表示一组值。它也不能调整大小，只能分配。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T10:07:12.137

*   valarray 有切片机制

*   valarray 预计将使用其数值运算符的表达式模板来实现

# c# - C# Syntax error when creating a query with OleDbParamater

> ID：12580632
> 
> 赞同：2
> 
> 时间：2012-09-25T10:01:15.550
> 
> 标签：c#, ms-access, oledb, syntax-error, oledbcommand

I am using `OleDbParameter` to build an `OleDbCommand` to `INSERT` a record into `MS Access`. But I get Syntax Error when I am executing the statement. If anyone can see what is preventing the query successfully executing it would be a huge help.

This is my code:

```
string query = "INSERT INTO Customer (customerID, date, time, telephone, fax,"
    + "name, sourceAddress, destAddress, via1, via2, via3,"
    + "priority, ourReference) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";

OleDbCommand oleDbCommand = new OleDbCommand(query, oleDbConnection);

OleDbParameter customerID = new OleDbParameter();
OleDbParameter date = new OleDbParameter();
OleDbParameter time = new OleDbParameter();
OleDbParameter telephone = new OleDbParameter();
OleDbParameter fax = new OleDbParameter();
OleDbParameter name = new OleDbParameter();
OleDbParameter sourceAddress = new OleDbParameter();
OleDbParameter destAddress = new OleDbParameter();
OleDbParameter via1 = new OleDbParameter();
OleDbParameter via2 = new OleDbParameter();
OleDbParameter via3 = new OleDbParameter();
OleDbParameter priority = new OleDbParameter();
OleDbParameter ourReference = new OleDbParameter();

oleDbCommand.Parameters.Add(customerID);
oleDbCommand.Parameters.Add(date);
oleDbCommand.Parameters.Add(time);
oleDbCommand.Parameters.Add(telephone);
oleDbCommand.Parameters.Add(fax);
oleDbCommand.Parameters.Add(name);
oleDbCommand.Parameters.Add(sourceAddress);
oleDbCommand.Parameters.Add(destAddress);
oleDbCommand.Parameters.Add(via1);
oleDbCommand.Parameters.Add(via2);
oleDbCommand.Parameters.Add(via3);
oleDbCommand.Parameters.Add(priority);
oleDbCommand.Parameters.Add(ourReference);

customerID.Value = 4;
date.Value = "01/01/01";
time.Value = "01:01:01";
telephone.Value = 01010101;
fax.Value = 01010101;
name.Value = "test 4";
sourceAddress.Value = "test 4 source address";
destAddress.Value = "test 4 dest address";
via1.Value = "test 4 via 1";
via2.Value = "test 4 via 2";
via3.Value = "test 4 via 3";
priority.Value = 1;
ourReference.Value = "test 4 ref";

MessageBox.Show(oleDbCommand.CommandText.ToString());

OleDbDataAdapter oleDbDataAdapter = new OleDbDataAdapter(oleDbCommand);

oleDbCommand.CommandText = query;

oleDbConnection.Open();

oleDbCommand.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:11:39.903

字段`date`和`time`是[JET/Access 的保留字](http://office.microsoft.com/en-us/access-help/access-2007-reserved-words-and-symbols-HA010030643.aspx)，因此您应该将它们封装在方括号中。（这是语法错误消息的真正来源）

```
"INSERT INTO Customer (customerID, [date], [time], telephone, fax, name, " + 
"sourceAddress, destAddress, via1, via2, via3," + "priority, ourReference) VALUES " + 
"(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"; 
```

当然参数的数量应该匹配。（12 个占位符与 13 个字段/参数，添加另一个占位符？），但这会给出另一个错误消息，而不是所述的语法错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:08:22.677

你有 13 个参数，但只有 12 个？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T10:11:51.757

正如其他人所提到的，您的参数与占位符不同步，但是，如果您的 CustomerID 是自动编号，那么您可以从 sql 和参数列表中省略它。

# java - java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener issue

> ID：12580633
> 
> 赞同：5
> 
> 时间：2012-09-25T10:01:16.723
> 
> 标签：java, spring, spring-mvc, spring-security, web.xml

when I try to start my app, console shows the next stacktrace:

```
java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener 
```

I've read about the same problem, but ther were absent spring-web jars, but in my pom.xml I've included spring dependencies, the problem stays:

```
 <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency> 
```

here is web.xml file(just to be sure):

```
<context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            classpath:/context/webContext.xml
        </param-value>
    </context-param>

    <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>classpath:log4j.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>springServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value></param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>springServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
     <filter-mapping>
            <filter-name>springSecurityFilterChain</filter-name>
            <url-pattern>/*</url-pattern>
        </filter-mapping>

    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

    <welcome-file-list>
        <welcome-file>login.jsp</welcome-file>
    </welcome-file-list> 
```

I made clean.., clean tomcat work directory..., I cleaned workspace with project->clean.. but nothing helped.. I'm in a such desperation...

updated============= after some manipulation and magic :) I succeeded not to have such exception, but the next appears:

```
java.lang.ClassCastException: org.springframework.web.filter.DelegatingFilterProxy cannot be cast to javax.servlet.Filter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:05:11.600

看起来您的应用程序存在一些配置问题。你可以参考这个链接 [http://www.mkyong.com/spring/spring-error-classnotfoundexception-org-springframework-web-context-contextloaderlistener/](http://www.mkyong.com/spring/spring-error-classnotfoundexception-org-springframework-web-context-contextloaderlistener/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:07:43.900

你的春季版本是什么？

`mvn clean install`在您的项目上运行

然后`mvn tomcat:run` 显示结果日志。

**您需要将 war-file 与您的项目打包并尝试将其部署在独立的 Tomcat 上**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:19:34.247

这本身不是答案，但需要输入的内容超出我的评论范围。这仅告诉您如何启用 Eclipse Tomcat 实例的日志记录。启用 Eclipse Tomcat 实例的登录比我记得的要混乱。您仍然编辑运行时配置。在 VM 参数下的“参数”选项卡上添加 2 个属性：

```
-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager 
-Djava.util.logging.config.file=/path_to_your/logging.properties 
```

这应该可以根据 logging.properties 文件启用您的日志记录（可以放在任何地方 - 我很少更改我的 Eclipse 服务器，所以我只是将副本放在“conf”目录中）。

如果您需要一个方便的工具，这里是一个 logging.properties 文件的副本：

* * *

```
# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
handlers = 1catalina.org.apache.juli.FileHandler, 2localhost.org.apache.juli.FileHandler,     3manager.org.apache.juli.FileHandler, 4host-manager.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler

.handlers = 1catalina.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler

############################################################
# Handler specific properties.
# Describes specific configuration info for Handlers.
############################################################

1catalina.org.apache.juli.FileHandler.level = FINE
1catalina.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
1catalina.org.apache.juli.FileHandler.prefix = catalina.

2localhost.org.apache.juli.FileHandler.level = FINE
2localhost.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
2localhost.org.apache.juli.FileHandler.prefix = localhost.

3manager.org.apache.juli.FileHandler.level = FINE
3manager.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
3manager.org.apache.juli.FileHandler.prefix = manager.

4host-manager.org.apache.juli.FileHandler.level = FINE
4host-manager.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
4host-manager.org.apache.juli.FileHandler.prefix = host-manager.

java.util.logging.ConsoleHandler.level = FINE
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

############################################################
# Facility specific properties.
# Provides extra control for each logger.
############################################################

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].handlers =   2localhost.org.apache.juli.FileHandler

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager].handlers = 3manager.org.apache.juli.FileHandler

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager].handlers = 4host-manager.org.apache.juli.FileHandler

# For example, set the org.apache.catalina.util.LifecycleBase logger to log
# each component that extends LifecycleBase changing state:
#org.apache.catalina.util.LifecycleBase.level = FINE

# To see debug messages in TldLocationsCache, uncomment the following line:
#org.apache.jasper.compiler.TldLocationsCache.level = FINE 
```

# c# - How to develop C # console application for windows 2008 64 bit?

> ID：12580635
> 
> 赞同：2
> 
> 时间：2012-09-25T10:01:28.823
> 
> 标签：c#, windows

I want to know that ,can I create a c# console application on my windows 7 pc with visual studio 2010 for a windows 2008 64 bit.If yes,How?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T10:10:32.580

在您的解决方案资源管理器中，右键单击您的项目并选择`Properties`.

在`Build`选项卡下，更改`Platform target`为`x64`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T10:04:03.000

Absolutely - just create a new Console Application project. By default it will create a project with an assembly which styles itself as x86, but you can change that to AnyCPU if you need to. (The 32-bit app will work fine on the 64-bit machine, although obviously it won't be able to use as much memory, or load 64-bit native libraries.)

# javascript - How to convert a string return from a JQuery slider UI into a number

> ID：12580636
> 
> 赞同：0
> 
> 时间：2012-09-25T10:01:33.300
> 
> 标签：javascript, jquery, jquery-ui

I have two sliding bars and I want to get the value the user sets them to and do some maths on it. var days and var total are my attempts to do this. I was taking it that the UI slider stores its values as stings and not integers. But both my attempts below, then use either just return a NaN value? So what am I doing wrong?

```
var days = parseInt($(this).attr('#day_output'), 10);
var total = parseInt($('#amount_outputTotal'));
var fees = 5;
var valueout;

valueout = 60 * days + fees;

$(document).ready(function() {
    $('#Output').html(valueout);
}); 
```

Many Thanks Glenn.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:45:23.497

我们的项目之一使用 jqueryUI ahs 以下代码：

```
fixed = $().fixFloat(ui.value); 
```

我知道这可能不适合您的需求。

尝试从 parseInt 更改为 parseFloat 并通过控制台输出：

```
$(this).attr('#day_output') 
```

为什么这里没有 .attr 或 .val 之类的东西？

```
$('#amount_outputTotal') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:04:35.790

为什么作为数字表示的滑块将值存储为字符串？您可以使用以下代码获取值（或值，如果有两个句柄）

```
var val_single = $('#your_slider').slider('value');

var val_array = $('#your_slider').slider('values'); 
```

请 rtfm [http://jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

# shopify - 在 Shopify 中更改购物车上的订单项属性

> ID：12580640
> 
> 赞同：7
> 
> 时间：2012-09-25T10:01:53.187
> 
> 标签：shopify, cart

是否可以在将订单项属性添加到购物车后更改它们？（通过普通表单提交，还是通过 AJAX？）

我已经尝试使用“properties [MyProperty]”键对 /cart/change 进行 POST，但到目前为止还没有运气。这与 line 参数一起表示唯一的行项目。

有任何想法吗？或者它只是一个直接的“不”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T02:25:07.593

使用 Shopify 的 API，您不能使用 cart/change.js 来更改订单项的属性。原因是 cart/change.js 使用“属性”来查找您想要的订单项。API 文档省略了这一点。这是一个例子：

当我使用以下 url 编码参数对 cart/add.js 进行 POST 时：

`quantity=9403&id=278440178&properties%5Bmy-property%5D=property%20BAR`

回应将包括，

`"properties":{"my-property":"property BAR"}`

当我继续向 cart/change.js 发布 POST 以将属性从 BAR 更改为 FOO 时，

`id=278440178&properties%5Bmy-property%5D=property%20FOO`

然后响应将包括，

`"properties":{"my-property":"property BAR"}`

也就是说，我无法以这种方式更改行项目属性。您可能会怀疑这是因为 cart/change.js API 有一些技巧，但事实并非如此。

请注意，当我尝试通过向 cart/change.js 发布 POST 并指定 来删除订单项时`quantity=0`，如下所示：

`quantity=0&id=278440178&properties%5Bmy-property%5D=property%20FOO`

由于该属性`property FOO`不属于任何项目（我的购物车`property BAR`现在只有一个项目），因此该项目不会从购物车中删除。另一方面，如果我这样做：

邮政：`quantity=0&id=278440178&properties%5Bmy-property%5D=property%20BAR`

该项目被正常删除。

结论：在 cart/change.js 中，shopify 使用 line-item 属性的方式与使用 'id' 的方式相同，即查找要更改数量的 line item。就像您不能使用 cart/change.js 来更改订单项的 id 一样，您也不能使用它来更改订单项的属性。

# uml - UML 对象属性链接

> ID：12580641
> 
> 赞同：0
> 
> 时间：2012-09-25T10:01:57.490
> 
> 标签：uml, linkage

如果你在一个名为“A”的类中有这样的函数

```
public updateResponse(UpdateRequest updateRequest){
     //...
} 
```

其中 UpdateRequest 是另一个类，您可以从中创建对象，如 UpdateRequest ur = new UpdateRequest();

这两个类（“A”和“UpdateRequest”之间）之间的关系是什么？我想到了 A 的接口和类 UpdateRequest 之间的“使用”链接。这个对吗？如果不是，应该是什么样的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:04:37.593

如果该图是类图，则不会从您的问题中得出任何关系。

这两个类之间的关系最好在[序列图](http://en.wikipedia.org/wiki/Sequence_diagram)或[活动图](http://en.wikipedia.org/wiki/Activity_diagram)中显示。这些显示方法调用等，方法可能是类图中的类的成员，但它不会真正表示为链接。除非您特别想突出显示此方法，否则您可以在类上放置该方法的使用链接。但对每种方法都这样做并不总是好的做法，因为最终会得到一个非常混乱的类图。

最好在图表中显示这些关系，以显示该方法的用法。

编辑：A 类实例如何关联 UpdateRequest 类实例？

Q - 你想表达什么关系？A - 方法/函数调用。

一些类调用 updateResponse 并且信息流是一个 UpdateRequest 实例。

因此...从左到右

```
SomeClass --|                              A
     |      | a = new UpdateRequest        |
     |<-----|                              |
     |                                     |
     |        updateResponse(a)            |
     |------------------------------------>| 
```

您的序列图可能看起来像这样。类 A 和 UpdateRequest 之间没有特定的关系，因为它只是一条信息，流经您在示例中的方法调用。如果该类是该类的成员，则关系将直接显示在类图上，此处不适用。所有类可能（应该）单独显示在类图上，然后可以将其用作任何图中所有对象的参考点，以供那些需要分析设计的人使用。

# php - 带有 smlseclibs 的 XML 签名返回无效数据：数据和摘要不匹配

> ID：12580642
> 
> 赞同：3
> 
> 时间：2012-09-25T10:02:01.737
> 
> 标签：php, xml, soap-client, signature, xmlseclibs

我正在尝试提交一个签名的 XML 文档（使用[xmlseclibs](https://code.google.com/p/xmlseclibs/)），但签名本身就是错误的。

我正在使用的代码如下所示：

```
// input variables:
$tout         = __DIR__ . "/" . $firmacert2;
$certBuffer   = file_get_contents($tout);
$certTempFile = __DIR__ . '/temp/temp.xml';
$xmlBuffer    = base64_decode($xmlstrBase64);

// document creation and loading
$doc = new DOMDocument();
$doc->loadXML($xmlBuffer);
$objDSig = new XMLSecurityDSig();
$objDSig->setCanonicalMethod(XMLSecurityDSig::EXC_C14N);
$objDSig->addReference($doc, XMLSecurityDSig::SHA1, array('http://www.w3.org/2000/09/xmldsig#enveloped-signature'));
$objKey = new XMLSecurityKey(XMLSecurityKey::RSA_SHA1, array('type' => 'private'));

// load private key
$objKey->passphrase = $pass;
$objKey->loadKey($tout, TRUE);

$objDSig->sign($objKey);
// Add associated public key
$objDSig->add509Cert($certBuffer);
$objDSig->appendSignature($doc->documentElement);
$doc->save($certTempFile);
$codif      = file_get_contents($certTempFile);
$xml_base64 = base64_encode($codif);

$param1     = new SoapParam($xml_base64, 'xml');
$com        = new SoapClient('https://www.aespd.es:443/agenciapd/axis/SolicitudService?wsdl', array('trace' => 1, 'encoding' => 'UTF-8'));
$respuesta2 = $com->probarXml($param1);
$respuesta  = base64_decode($respuesta2); 
```

并且正在发送 xml，这很好，但是当我恢复 xml 文件并检查签名时：[http ://www.aleksey.com/xmlsec/xmldsig-verifier.html](http://www.aleksey.com/xmlsec/xmldsig-verifier.html)

我得到的错误是：

> `func=xmlSecOpenSSLEvpDigestVerify:file=digests.c:line=229:obj=sha1:subj=unknown:error=12:invalid data:data and digest do not match`

我试图将证书转换为单独的私钥和公钥、相同的文件、不同的文件、导入和导出等。

流程是这样的：

Java 程序将生成的未签名的 Base64 编码的 XML 发送到 PHP 文件，PHP 文件对其进行签名和发送`SoapClient`，结果被打印，然后由 Java 程序捕获和解释，从而避免在使用该系统的机器上拥有单独的证书。

# sql - 单行子查询返回多行错误。是我的脚本还是我的返回数据？

> ID：12580644
> 
> 赞同：1
> 
> 时间：2012-09-25T10:02:15.760
> 
> 标签：sql, oracle

我需要有关创建更新 SQL 脚本的帮助

**表A**

```
colA    colB    colC    colD    colE
  a       b       x       g       z 
  b       c       d       g       h 
  c       d       f       g       v  
  v       f       f       g       f
  d       a       q       o       a 
```

**表B**

```
colA    colB    colC    colD    colE
  a       b       x       y       a 
  b       c       d       g       b 
  c       d       f       g       c  
  d       e       s       g       d
  v       f       f       g       e 
```

我需要 TableB.colE 更新到 TableA.colE 其中 TableB.colD = TableA.colD 结果应该是

**表A**

```
colA    colB    colC    colD    colE
  a       b       x       g       b 
  b       c       d       g       c 
  c       d       f       g       d  
  v       f       f       g       e
  d       a       q       o       a 
```

我试过使用

```
UPDATE TABLEA SET(TABLEA.COLE=TABLEB.COLE) WHERE TABLEA.COLD =  TABLEB.COLD 
```

它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:09:38.017

试试这个更新：

```
UPDATE TableA a
   SET COLE = ( SELECT COLE
                FROM TableB b
                WHERE b.COLD = a.COLD ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:09:22.160

`UPDATE TABLEA SET TABLEA.COLE=TABLEB.COLE from TABLEB WHERE TABLEA.COLD = TABLEB.COLD`

您错过了在 from 子句中指定第二个表名 TABLEB。试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:11:27.263

您需要在更新的第一个子句中指定表连接

```
UPDATE
(
  SELECT tablea.cole, tableb.cole as newvalue
    FROM tablea
    JOIN tableb
      ON tablea.cold = tableb.cold
)
SET cole = newvalue 
```

# qt - 我可以将 C++ 项目移植到 QT，然后使用 QTWebKit 创建 HTML5 前端吗？

> ID：12580645
> 
> 赞同：0
> 
> 时间：2012-09-25T10:02:16.053
> 
> 标签：qt, user-interface, qtwebkit

*请记住，我不是 GUI 程序员*。

正如标题所说，但要提供更多细节：

我有一个非常大的 C++ 应用程序，我想升级它的 GUI。有一个 SDK，我们可以在上面附加一个新的 GUI，我想让它看起来尽可能现代和花哨，我被建议使用 HTML5。

我们使用内部 bat 文件构建和链接项目，我已将这些文件挂接到 MSDEV 中，以节省我每次想要构建项目时返回控制台的时间。当程序运行调试时，我还使用 MSDEV 附加到程序。

我也可以在 QT 中执行此操作吗？

（我无法下载并尝试，因为我需要下载新软件的商业案例，而且调查很难获得批准）。

如果我在 QT 中这样做，我可以使用 Webkit 创建一个 HTML 5 前端还是需要更多的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T03:41:58.043

## Qt 长什么样子

[http://www.youtube.com/watch?v=bVQ0S-b5lDs](http://www.youtube.com/watch?v=bVQ0S-b5lDs)

Qt SDK 附带的演示程序展示了您可以使用 GUI 编程完成的大量工作。你几乎可以建造任何你能想象到的东西！

它看起来是它所运行的操作系统的本机，Windows 7、Mac OSX、Ubuntu 等。

我相信大多数 Linux KDE GUI 现在都是通过 Qt 完成的。

## 运行控制台应用程序

如果你需要从控制台运行东西，你可以很容易地在 C++ 中管理它。

```
system("run_this.bat"); 
```

在 Qt 中，如果您不需要查看控制台窗口，您可以将大多数事情作为 QProcess 运行。

有一些方法可以挂钩标准错误并查看发生了什么。

## HTML 5

用 HTML 5 编写的东西会显示在浏览器中，并且可以使用许多漂亮的图形和效果，但是使用 QtWebKit 只会确保您正在渲染的网页在您运行的每台计算机上看起来都一样它在。大多数现代浏览器都与 HTML 5 兼容，因此不必依赖 Qt 中的 HTML 5。

W3Schools 很好地介绍了 HTML 5 添加到网站的内容：

[http://www.w3schools.com/html/html5_intro.asp](http://www.w3schools.com/html/html5_intro.asp)

## 使用 HTML 5 或 C++

编写使用 HTML 5 的 Web 应用程序与编写使用本机 GUI 的桌面应用程序是两件截然不同的事情。

当通过带有 HTML 5 的浏览器时，在本地计算机上运行文件是相当沙盒的。如果您可以在自己的服务器上远程运行某些东西，那么它应该不会太糟糕。

# javascript - Repeating inputs vb.net

> ID：12580653
> 
> 赞同：1
> 
> 时间：2012-09-25T10:02:55.160
> 
> 标签：javascript, .net, vb.net

I'm working on a Recipe Book in vb.NET but have a background in PHP. I'm trying to build up functionality to add multiple ingredients to a recipe before its saved.

In PHP I would have an auto complete input and add button. When the add button is pressed the ingredient is added to the list of ingredients (with a hidden field for the ingredient id) then when I post the recipe I would simple loop through the post data and extract the id's like this:

```
<div id="ingredient-list">
 <div>
  <input type="hidden" name="ingredient[0]" value="32" />
  <span>Potatoes</span>
 </div>
</div>
<div>
 <input type="text" onKeyUp="IngredientSearch(this)" />
 <div id="food-search-results" class="auto-complete"></div>
</div>

foreach($_POST['ingredient'] as $ingredient) {
 recipe.addIngredient($ingredient);
} 
```

However I am unsure how to accomplish such a task in .NET. Currently my add button is causing a post-back to the page (which I don't want) and adding the data to a asp:repeater. Could anyone please point me in the right direction or to a code example please.

On a side note, my next task to allow the user to upload multiple images. Which will function much the same but add a new file input when ever a file is attached to the existing input.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:46:13.170

如果您不想导致回发，您可以将按钮作为 html 按钮，或者您可以将按钮和转发器放在更新面板中。这将导致部分回发。这可能是更好的选择，因为我认为您无法更新 asp:repeater。

正如 Titopo 所说，我建议使用列表来存储 ID，或者您可以使用数据集在 Viewstate 中存储 ID 和文本值。

在你的按钮点击你可以做这样的事情......

```
 Dim ds As DataSet
        Dim dt As DataTable
        If Not ViewState("Ingredients") Is Nothing Then
            ds = ViewState("Ingredients")
            dt = ds.Tables(0)

            Dim dr As DataRow = dt.NewRow
            dr.Item("IngredientID") = IngredientID' However you would get that.
            dr.Item("Ingredient") = txtIngredient.Text
            dt.Rows.Add(dr)
        Else
            ds = New DataSet
            dt = New DataTable
            dt.Columns.Add(New DataColumn("IngredientID"))
            dt.Columns.Add(New DataColumn("Ingredient"))

            Dim dr As DataRow = dt.NewRow
            dr.Item("IngredientID") = IngredientID' However you would get that.
            dr.Item("Ingredient") = txtIngredient.Text
            ds.Tables.Add(dt)
            ds.Tables(0).Rows.Add(dr)
        End If

        Dim dv As DataView = dt.DefaultView
        dv.Sort = "Ingrediant ASC"
        repIngrediants.DataSource = dv
        repIngrediants.DataBind()         ' -- Bind to your repeater here

        ViewState("Ingredients") = ds 
```

这将存储每种成分的 ID 和文本。如果你在更新面板中有这个，它会顺利执行，并且只加载带有按钮、文本框和中继器的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:25:19.737

遗嘱`ASP:Button`总是会导致回发。我建议您在按下按钮时存储每种成分，但是，如果您想将所有成分作为 POST 发送，您可以使用`ViewState`存储成分列表。

关于`Page_Load`活动：

```
If Not Me.IsPostBack Then
  ViewState("Ingredients") = New List(Of Integer)
End If 
```

在`AddButton` `OnClick`事件中：

```
Dim list = CType(ViewState("Ingredients"), List(Of Integer)
list.add(ingredient_id)
ViewState("Ingredients") = list 
```

在此之后，您可以使用该`For Each`语句提取所有成分，形成字符串并将其作为 POST 变量发送。

# java - eclipse中的自动生成界面

> ID：12580654
> 
> 赞同：6
> 
> 时间：2012-09-25T10:02:57.673
> 
> 标签：java, eclipse, automation

我在eclipse中有一个类，将为它编写一个接口。

是否有可能，就像自动生成 getter/setter 时一样，从类中自动生成一个接口？

我很感谢你的回答！！！

顺便说一句，我的 Eclipse 版本是靛蓝...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T10:05:10.483

Alt+Shift+T 和“提取界面”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T10:43:12.380

无需仅单击类名只需右键单击类中的任何位置。转到折射器选择“提取界面”

# iphone - How to set an image to fill in full view?

> ID：12580657
> 
> 赞同：0
> 
> 时间：2012-09-25T10:03:21.820
> 
> 标签：iphone, cgbitmapcontextcreate

i am using below code for fill rgba forful view. but i am getting half(1/2) width only. anybody please inform me anything wrong with my code.

```
 CGContextRef bitmap = CGBitmapContextCreate(
             rgba,
             width,     // width = 320
             height,        // 460
             8               //CGImageGetBitsPerComponent(imageRef),    
             4 * width, // rowbytes
             colorSpace,
             kCGImageAlphaNoneSkipLast);
             ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:05:02.840

尝试使用：`width * [UIDevice currentDevice].scale`代替`width`和`height * [UIDevice currentDevice].scale`代替`height`。

请记住，您的设备可以有 Retina 屏幕，而您的 320 像素视图实际上是 640 像素视图。（规模 = 2）

# java - NullPointerException if I restart tomcat

> ID：12580658
> 
> 赞同：0
> 
> 时间：2012-09-25T10:03:28.893
> 
> 标签：java, session, jsf-2, logout

I have created web application using JSF 2.0\. I have created one Session bean where I am keeping id of the employee who is logged in.

The problem is when I do some changes in coding and restart tomcat online, I get Null Pointer exception (IF I have not logged out of the system. If I logged out of system, I don't get null pointer exception). To overcome this, I have to clear the history of the browser and the problem get solved.

Below are the steps I follow for project to make online.

1.  Do changes in code
2.  Copy war files to my VPS
3.  shutdown tomcat
4.  remove ROOT folder
5.  change the war file name to ROOT.war
6.  start the tomcat again

Please suggest me what to do....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:30:29.943

你想让我做什么 ？

发生的事情是当您不关闭浏览器时，用户仍在会话中，cookie，会话 ID 等存在。

现在，当您在不关闭 IE /删除历史记录的情况下重新启动服务器时（如您所说），浏览器将在服务器上查找不存在的会话 ID（因为您已重新启动它），因此它会引发 nullPointerException。

你不需要做任何事情，这是预期的行为。在重新启动之前注销或在重新启动服务器后关闭浏览器（注意新选项卡将无法工作，因为会话保持在选项卡中。）并且您的程序将正常工作并且您不会得到任何空指针

希望这可以帮助。

# validation - Yii CValidator 规则：如何在模型之外进行验证

> ID：12580660
> 
> 赞同：1
> 
> 时间：2012-09-25T10:03:35.533
> 
> 标签：validation, yii

我需要验证 Yii 中的一些变量值；

我没有`model`，我需要一个预构建 yii `public method`。

其中一些必须是整数，其他字符串；

这些值通过 GET 传递。

我尝试了 yii 拥有的所有验证类，但都没有。

有没有人试过这个并成功了？

我需要类似的东西：

```
$validator = new CValidator();

$result = $validator->validate(array($key=>$value)); 
```

开放征求意见

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-29T09:23:13.490

您可以为特定的验证器执行此操作：

```
$Validator = new CEmailValidator;

if($Validator->validateValue($value))
{
    // Valid
} 
```

来自 Yii 框架文件 CEmailValidator.php：

```
/**
* Validates a static value to see if it is a valid email.
* Note that this method does not respect {@link allowEmpty} property.
* This method is provided so that you can call it directly without going through the model validation rule mechanism.
* @param mixed $value the value to be validated
* @return boolean whether the value is a valid email
* @since 1.1.1
*/
public function validateValue($value) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T11:01:24.073

Yii 验证器与模型紧密集成。所以，至少你需要一个虚拟模型对象。

我的建议是......创建一个虚拟表单模型类..

```
class MyValidator extends CFormModel {
    public function __get($name) {
        return isset($_POST[$name])?$_POST[$name]:null;
    }

    static function myValidate( Array $rules ) {
        $dummy = new MyValidator();

        foreach($rules as $rule) {
            if( isset($rule[0],$rule[1]) ) {
                $validator = CValidator::createValidator( 
                     $rule[1], 
                     $dummy, 
                     $rule[0], 
                     array_slice($rule,2) 
                );
                $validator->validate($dummy);
            }
            else { /* throw error; */ }
        }

        print_r( $dummy->getErrors() );
        return !$dummy->hasErrors();
    }
} 
```

并在任何地方使用此 myValidate 静态方法，如下所示...

```
$rules = array(
    array('name, email', 'required'),
    array('email', 'email'),
);

if( MyValidator::myValidate($rules) ) {
    ....
} 
```

# mysql - Duplication/Updation of data in mysql

> ID：12580665
> 
> 赞同：0
> 
> 时间：2012-09-25T10:03:56.027
> 
> 标签：mysql

I want to get the sum of the data for every 5 minutes. I have 15 motes. for ,suppose in the first 5 minutes only some motes are queried and in the next 5 minutes other some motes are queried. Now,In the second 5 minutes I need the data of the motes which are not queried in that 5minutes also ie.,in the first 5minutes moteid's 1,2,3,4,9,12,14 are queried and in the second minutes moteid's 1,5,6,7,9,13,14 are queried. In the second 5 minutes,I need the data to be updated for the one's which are not queried also.Is it possible to get the data from the previous 5 minutes

```
moteid2 | 28 | 2012-09-25 17:45:43 | | 
moteid4 | 65 | 2012-09-25 17:45:49 | | 
moteid3 | 66 | 2012-09-25 17:45:51 | | 
moteid6 | 25 | 2012-09-25 17:45:56 | | 
moteid5 | 29 | 2012-09-25 17:45:58 | | 
moteid7 | 30 | 2012-09-25 17:46:05 | | 
moteid4 | 95 | 2012-09-25 17:50:29 | | 
moteid6 | 56 | 2012-09-25 17:50:35 | | 
moteid5 | 58 | 2012-09-25 17:50:36 | | 
moteid4 | 126 | 2012-09-25 17:55:08 | 
```

In the first 5 minutes moteid2, moteid3 are queried, but after that in the next 5minutes they are not queried. Even If they are not being queried i want the same previous queried value to be kept now.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:12:51.657

我假设表名是`motes`. 在这种情况下，以下查询显示`motesid`整个表中存在但在过去 5 分钟内未查询的记录的所有唯一性：

```
select distinct m.motesid
from motes m
where not exists (
    select *
    from motes m1
    where 
        m1.moteid = m.motesid and
        m1.date > SUBTIME(CURTIME(), '0:05:00')
) 
```

# ruby-on-rails - 测试远程运行的sidekiq

> ID：12580667
> 
> 赞同：1
> 
> 时间：2012-09-25T10:03:59.443
> 
> 标签：ruby-on-rails, openshift, sidekiq

如何测试在远程服务器上运行的 sidekiq？我可以启动sidekiq：

```
RAILS_ENV=production bundle exec sidekiq 
```

但我不知道它是否有效。我不使用 capistrano，我只能使用 cron。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-12T13:19:29.410

我不确定这个问题是否有意义。你有没有让它在你的本地开发机器上运行？如果是这样，您应该能够做同样的事情来远程测试它。设置一个作业让它在后台运行，然后 ssh 进入你的设备并使用 top 或 ps -ef 来查看进程是否运行。

# .net - how to use special characters like '<' or '&' in XML file generation in vb.net

> ID：12580672
> 
> 赞同：3
> 
> 时间：2012-09-25T10:04:10.323
> 
> 标签：.net, xml, vb.net

I am passing an array to a function which converts the array to an XML. But I am not able to use special characters like `"<"` or `"&"`. When I pass these it gives error invalid XML file.

```
Protected Sub drawgraph(ByRef dt As DataTable, ByVal name As String)
    Try

        Dim n(dt.Columns.Count - 3) As String
        Dim r(dt.Columns.Count - 3) As String

        For i As Integer = 1 To dt.Columns.Count - 2
            ***n(i - 1) = dt.Columns(i).ColumnName.ToString.Replace("<", "&lt;")***

            r(i - 1) = (dt.Rows(0).Item(i))
        Next
        ChartBuilder1.BuildLabel(n)
        ChartBuilder1.BuildValues(r, "Age Profile")

        ChartBuilder1.GenerateGraph()
        ChartBuilder1.Visible = True
    Catch ex As Exception
        lbl_msg.Text = ex.Message
    End Try
End Sub 
```

I am replacing `"<"` with `"&lt;"` but it is not working

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T10:07:27.060

使用 HttpServerUtility.HtmlEncode 来“转义”特殊字符。

“<”变成`&lt;`

[http://msdn.microsoft.com/en-en/library/w3te6wfz.aspx](http://msdn.microsoft.com/en-en/library/w3te6wfz.aspx)

# zsh - zsh preexec command modification

> ID：12580675
> 
> 赞同：9
> 
> 时间：2012-09-25T10:04:14.810
> 
> 标签：zsh, zsh-zle

Is there a way to modify the command that is about to execute? I would like to redirect the output to a file, as well as print it on the terminal. I found that `ls > file.txt | cat` does the job, so I would like to add that `> file.txt | cat` to any command that is about to execute.
Is there a better way to redirect to file and print to terminal? I am trying to make a logger.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T20:22:52.270

您可以更改执行行时执行的操作以更改将要执行的命令。这可以通过定义一个函数来完成，然后将其绑定到回车键。

让我们首先定义一个可以添加 '> file.txt | 的函数。cat' 以任何命令结尾：

```
function log_and_accept {
    BUFFER="$BUFFER > file.txt | cat"
    zle accept-line
} 
```

下一部分是用您的新功能实际替换默认的输入键行为。我们要替换的默认行为是accept-line 函数，如果我们查看[zle 文档](http://www.cs.elte.hu/zsh-manual/zsh_14.html)，您会看到accept-line 绑定到^J 和^M。

要将此函数绑定到这些字母，您首先需要将其转换为小部件：

```
zle -N log_and_accept_widget log_and_accept 
```

然后你可以绑定它，替换旧的行为：

```
bindkey '^J' log_and_accept_widget
bindkey '^M' log_and_accept_widget 
```

现在，您将为您执行的每个命令扩展该命令。每个 cd、ls、vim 等。因此，我建议您定义更多函数来实际打开和关闭它：

```
function turn_on_logging {
    bindkey '^J' log_and_accept_widget
    bindkey '^M' log_and_accept_widget
}
function turn_off_logging {
    bindkey '^J' accept-line
    bindkey '^M' accept-line
}

zle -N turn_on_logging_widget turn_on_logging
zle -N turn_off_logging_widget turn_off_logging

bindkey '^P' turn_on_logging_widget
bindkey '^O' turn_off_logging_widget 
```

我认为你应该小心这个。经过一番测试后，我很快就开始不喜欢它了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T02:59:10.117

有几种方法可以做到这一点，我最喜欢的 1 是我在这里找到的这个块[http://git.grml.org/?p=grml-etc-core.git;a=blob_plain;f=etc/zsh /zshrc;hb=头](http://git.grml.org/?p=grml-etc-core.git;a=blob_plain;f=etc/zsh/zshrc;hb=HEAD)

```
abk=(
  '...'  '../..'
  '....' '../../..'
  'BG'   '& exit'
  'C'    '| wc -l'
  'G'    '|& grep '${grep_options:+"${grep_options[*]}"}
  'H'    '| head'
  'Hl'   ' --help |& less -r'    #d (Display help in pager)
  'L'    '| less'
  'LL'   '|& less -r'
  'M'    '| most'
  'N'    '&>/dev/null'           #d (No Output)
  'R'    '| tr A-z N-za-m'       #d (ROT13)
  'SL'   '| sort | less'
  'S'    '| sort -u'
  'T'    '| tail'
  'V'    '|& vim -'
  'co'   './configure && make && sudo make install'
  'fc'   '> file.txt | cat'
)

zleiab() {
  emulate -L zsh
  setopt extendedglob
  local MATCH

  if (( NOABBREVIATION > 0 )) ; then
      LBUFFER="${LBUFFER},."
      return 0
  fi

  matched_chars='[.-|_a-zA-Z0-9]#'
  LBUFFER=${LBUFFER%%(#m)[.-|_a-zA-Z0-9]#}
  LBUFFER+=${abk[$MATCH]:-$MATCH}
}

zle -N zleiab && bindkey ",." zleiab 
```

另请注意，我已添加`'fc' '> file.txt | cat'`到列表中`abk`

这样做的原因是您`fc`在命令后键入，然后`,.`快速连续点击（逗号和句点），zsh 将替换`fc`为`> file.txt | cat`

# css - Hover not working in IE

> ID：12580677
> 
> 赞同：0
> 
> 时间：2012-09-25T10:04:18.640
> 
> 标签：css, internet-explorer

Can someone help me take a look at this please,

Here is the link to my website:

[http://mojogobbles.com.sg/cupcake-menu/](http://mojogobbles.com.sg/cupcake-menu/)

Here is my css coding for the div class and also the html

CSS

```
#f1{
 width: 100px;
 height: 50px;
 left: 370px;
 top: 450px;
 background:black;
 position: absolute;
 opacity:0;
 filter: alpha(opacity=0);
 float: left;
 -webkit-transition: 1s all;
 -moz-transition: 1s all;
 transition: 1s all;
 }
#f1:hover {
 background:url(images/flavours/f1.jpg);
 width: 320px;
 height: 320px;
 opacity:100;
 filter: alpha(opacity=100);
 float: left;
 position: absolute;
 } 
```

HTML

```
<div id="f1"></div> 
```

The hover does not work for IE! Many thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:10:39.933

尝试在页面顶部添加 [HTML 4.01 Strict DOCTYPE](http://www.w3.org/TR/html4/struct/global.html#h-7.1)以使其在 IE 中工作。

这是`IE`> = 7

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:06:38.643

取决于 IE 的哪个版本...我认为 < 7 不支持除预期锚`a`元素之外的任何元素上的 :hover 伪类。

编辑，这也可能对 IE7 有所帮助：

[:hover CSS 的伪类在 IE7 中不起作用](https://stackoverflow.com/questions/2077411/hover-pseudo-class-of-css-does-not-work-in-ie7)

# python - Bottle Microframework does not close the socket once is closed

> ID：12580680
> 
> 赞同：0
> 
> 时间：2012-09-25T10:04:32.997
> 
> 标签：python, sockets, rest, popen, bottle

I ran an API RestFul with bottle and python, all works fine, the API is a daemon running in the system, if I stop the daemon by command line the service stop very well and closed all the port and connections, but when I go to close the service through the API, the port keep alive in state LISTEN and later in TIME_WAIT, it does not liberate the port. I've read for two days but the problem is because bottle have a socket and it does not close the server well, but I can find he solution

The code to close the API as a service is a subprocess launched by python like this

```
@get('/v1.0/services/<id_service>/restart')
def restart_service(id_service):
try:
    service = __find_a_specific_service(id_service)
    if(service == None or len(service) < 1):
        logging.warning("RESTful URI: /v1.0/services/<id_service>/restart " +    id_service +" , restart a specific service, service does not exists")
        response.status = utils.CODE_404
        return utils.convert_to_json(utils.FAILURE, utils.create_failed_resource(utils.WARNING, utils.SERVICES_API_SERVICE_NOT_EXIST))
    else:
        if id_service != "API":
            api.ServiceApi().restart(id_service)
        else:
            import subprocess                
            args='/var/lib/stackops-head/bin/apirestd stop; sleep 5; /var/lib/stackops-head/bin/apirestd start'
            subprocess.Popen(args, shell=True)
        logging.info("RESTful URI: /v1.0/services/<id_service>/restart " + id_service +" , restart a specific service, ready to construct json response...")
        return utils.convert_to_json(utils.SERVICE, None)
except Exception, e:
    logging.error("Services: Error during the process of restart a specific service. %r", e)
    raise HTTPError(code=utils.CODE_500, output=e.message, exception=e, traceback=None, head 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T23:17:14.270

要从外部终止瓶子进程，请发送 SIGINT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:15:50.260

如果应用程序被退出或杀死，所有文件描述符/句柄也包括套接字被操作系统关闭。

你也可以使用

```
sudo netstat -anp --tcp 
```

在 Linux 中，以确保指定的端口是否由某些进程拥有。或使用

```
netstat -a -n -b -p tcp 
```

在 Windows 中做同样的事情。

TIME_WAIT 是由操作系统而不是应用程序管理的正常状态，以保持连接/端口一段时间。有时它很烦人。您可以调整操作系统保持多长时间，但这并不安全。

# html - dt dd 背景对齐

> ID：12580684
> 
> 赞同：0
> 
> 时间：2012-09-25T10:04:53.667
> 
> 标签：html, css, styles

我要渲染

```
<dl>
    <dt>word</dt><dd>meaning (long text with many lines)</dd>
    <dt>word</dt><dd>meaning (long text with many lines)</dd>
</dl> 
```

dt 和 dd 有 2 种不同的背景颜色

```
dt {
 float:left;
 width:10%;
 background:green;
}
dd {
 float:left;
 width:90%;
 background:transparent;
} 
```

由于我的 dt 内容文本很短，因此 dt 内容仅出现在 1 行中。由于我的 dd 内容文本很长，因此 dd 内容出现在很多行中。

如何使用相同的行数（如表格）渲染 2 个背景？

谢谢

[http://jsfiddle.net/5yVwN/](http://jsfiddle.net/5yVwN/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:44:07.093

您不需要使用浮点数，摆脱它，而是只使用一个 dt 和一个 dd 用于一个 dl，并将两者的显示设置为表格单元格。

像这样[http://jsfiddle.net/5yVwN/](http://jsfiddle.net/5yVwN/)

# apache-camel - 将 osgi-bundle 部署到 ServiceMix 的正确方法是什么？

> ID：12580685
> 
> 赞同：3
> 
> 时间：2012-09-25T10:04:58.343
> 
> 标签：apache-camel, apache-karaf, jbossfuse, fuseesb, apache-servicemix

我尝试为处理 Web 服务的 Apache ServiceMix 开发一个入门应用程序。

1）我构建应用程序（使用'mnv install'命令）

2) 将其部署到 ServiceMix（在服务器控制台使用 'karaf@root> osgi:install mvn:com.company/ws-test-fuse/1.0.0-SNAPSHOT' 命令）

3) 观察它是如何安装的 ('osgi:list')

```
[ 157] [Installed  ] [            ] [       ] [   60] A Camel Spring Route (1.0.0.SNAPSHOT) 
```

4) 我尝试启动应用程序

```
karaf@root>osgi:start 157 
```

我明白了：

```
org.osgi.framework.BundleException: Unresolved constraint in bundle com.company.ws-test-fuse [157]: Unable to resolve 157.0: missing requirement [157.0] package; (&(package=commonj.sdo)(version>=2.1.0)(!(version>=3.0.0))) 
```

**安装包的正确方法是什么，以便自动下载和安装所有 Maven 依赖项？**

**另外，我是对的，所有依赖项也将作为 osgi-bundles 部署到 osgi-container 吗？**

我的 POM.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- Licensed to the Apache Software Foundation (ASF) under one or more contributor 
    license agreements. See the NOTICE file distributed with this work for additional 
    information regarding copyright ownership. The ASF licenses this file to 
    You under the Apache License, Version 2.0 (the "License"); you may not use 
    this file except in compliance with the License. You may obtain a copy of 
    the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required 
    by applicable law or agreed to in writing, software distributed under the 
    License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS 
    OF ANY KIND, either express or implied. See the License for the specific 
    language governing permissions and limitations under the License. -->
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>

    <groupId>com.company</groupId>
    <artifactId>ws-test-fuse</artifactId>
    <packaging>bundle</packaging>
    <version>1.0.0-SNAPSHOT</version>

    <name>A Camel Spring Route</name>
    <url>http://www.myorganization.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
    </properties>

    <repositories>
        <repository>
            <id>release.fusesource.org</id>
            <name>FuseSource Release Repository</name>
            <url>http://repo.fusesource.com/nexus/content/repositories/releases</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
            <releases>
                <enabled>true</enabled>
            </releases>
        </repository>
        <repository>
            <id>snapshot.fusesource.org</id>
            <name>FuseSource Snapshot Repository</name>
            <url>http://repo.fusesource.com/nexus/content/repositories/snapshots</url>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
            <releases>
                <enabled>false</enabled>
            </releases>
        </repository>
        <repository>
            <id>ea.fusesource.org</id>
            <name>FuseSource Early Access Repository</name>
            <url>http://repo.fusesource.com/nexus/content/groups/ea</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
            <releases>
                <enabled>true</enabled>
            </releases>
        </repository>
    </repositories>

    <pluginRepositories>
        <pluginRepository>
            <id>release.fusesource.org</id>
            <name>FuseSource Release Repository</name>
            <url>http://repo.fusesource.com/nexus/content/repositories/releases</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
            <releases>
                <enabled>true</enabled>
            </releases>
        </pluginRepository>
        <pluginRepository>
            <id>snapshot.fusesource.org</id>
            <name>FuseSource Snapshot Repository</name>
            <url>http://repo.fusesource.com/nexus/content/repositories/snapshots</url>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
            <releases>
                <enabled>false</enabled>
            </releases>
        </pluginRepository>
        <pluginRepository>
            <id>ea.fusesource.org</id>
            <name>FuseSource Early Access Repository</name>
            <url>http://repo.fusesource.com/nexus/content/groups/ea</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
            <releases>
                <enabled>true</enabled>
            </releases>
        </pluginRepository>
    </pluginRepositories>

    <dependencies>

        <!-- Core -->
        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-core</artifactId>
            <version>2.9.0.fuse-7-061</version>
        </dependency>
        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-spring</artifactId>
            <version>2.9.0.fuse-7-061</version>
        </dependency>

        <!-- Apache Cxf -->
        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-cxf</artifactId>
            <version>2.9.0.fuse-7-061</version>
        </dependency>
        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-jetty</artifactId>
            <version>2.9.0.fuse-7-061</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-transports-http-jetty</artifactId>
            <version>2.5.0.fuse-7-061</version>
        </dependency>
        <dependency>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-rt-databinding-sdo</artifactId>
            <version>2.5.0.fuse-7-061</version>
        </dependency>

        <!-- Apache tuscany SDO -->
        <dependency>
            <groupId>org.apache.tuscany.sdo</groupId>
            <artifactId>tuscany-sdo-api-r2.1</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tuscany.sdo</groupId>
            <artifactId>tuscany-sdo-impl</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tuscany.sdo</groupId>
            <artifactId>tuscany-sdo-lib</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tuscany.sdo</groupId>
            <artifactId>tuscany-sdo-tools</artifactId>
            <version>1.1.1</version>
        </dependency>

        <!-- SDO Support -->

        <dependency>
            <groupId>org.eclipse.xsd</groupId>
            <artifactId>xsd</artifactId>
            <version>2.2.3</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.xsd</groupId>
            <artifactId>xsd</artifactId>
            <version>2.2.3</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.emf</groupId>
            <artifactId>ecore</artifactId>
            <version>2.2.3</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.emf</groupId>
            <artifactId>ecore-change</artifactId>
            <version>2.2.3</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.emf</groupId>
            <artifactId>ecore-xmi</artifactId>
            <version>2.2.3</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.emf</groupId>
            <artifactId>common</artifactId>
            <version>2.2.3</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.emf</groupId>
            <artifactId>codegen-ecore</artifactId>
            <version>2.2.3</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.emf</groupId>
            <artifactId>codegen</artifactId>
            <version>2.2.3</version>
        </dependency>
        <dependency>
            <groupId>backport-util-concurrent</groupId>
            <artifactId>backport-util-concurrent</artifactId>
            <version>3.0</version>
        </dependency>

        <!-- logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.1</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.6.1</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>

        <!-- testing -->
        <dependency>
            <groupId>org.apache.camel</groupId>
            <artifactId>camel-test</artifactId>
            <version>2.9.0.fuse-7-061</version>
            <scope>test</scope>
        </dependency>

    </dependencies>

    <build>
        <defaultGoal>install</defaultGoal>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <!-- allows the route to be ran via 'mvn camel:run' -->
            <plugin>
                <groupId>org.apache.camel</groupId>
                <artifactId>camel-maven-plugin</artifactId>
                <version>2.9.0.fuse-7-061</version>
            </plugin>

            <!-- Maven bundle plugin -->
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <version>2.3.7</version>
                <extensions>true</extensions>
                <configuration>
                    <instructions>
                        <Import-Package>*,org.apache.camel.osgi</Import-Package>
                    </instructions>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:21:49.657

另一种方法是使用 FAB 部署到 ServiceMix（您需要安装 FAB）/Fuse ESB（FAB 随附）。

FAB 能够理解您的 maven pom.xml 文件并在部署时部署所需的包。我发布了一些链接以获取更多详细信息和视频： [http ://www.davsclaus.com/2012/08/osgi-deployment-made-easy-with-fab.html](http://www.davsclaus.com/2012/08/osgi-deployment-made-easy-with-fab.html)

另一种选择是创建 features.xml 文件，并使用功能安装您的应用程序。然后在 features 文件中，您还可以指定应用程序所需的 osgi 包。您可以参考其他功能等。例如，这是您可以使用单个命令安装 Camel 组件的方式。例如，要安装 Camel FTP 组件，您可以运行：

```
features:install camel-ftp 
```

因此，如果您的应用程序有一个功能，您可以做类似的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T10:38:48.213

Karaf 不会解析您的 pom.xml，要解决依赖关系，您必须使用 features:install 或 bundle:install 手动安装它们。前任 在你的情况下

```
bundle:install mvn:org.eclipse.persistence/com.springsource.commonj.sdo/2.1.1 
```

# android - 如何将图像从一个活动发送到另一个活动，使用 xml 解析器获取列表视图中的记录

> ID：12580688
> 
> 赞同：0
> 
> 时间：2012-09-25T10:05:01.873
> 
> 标签：android, android-layout, android-intent, android-emulator

图像发送问题，能够将文本发送到另一个活动，放置一些带有文件名的源代码请查看并告诉我错误和可能，所以请写下所需的代码，因为我在过去两天都面临这个问题：-

```
MainActivity Code:-
public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
         // getting values from selected ListItem
            String title = ((TextView) view.findViewById
            (R.id.title)).getText().toString();
            String artist = ((TextView) view.findViewById
            (R.id.artist)).getText().toString();
            String duration = ((TextView) view.findViewById
            (R.id.duration)).getText().toString();
            byte[] array = null;
            Bitmap thumb_url = BitmapFactory.decodeByteArray
            (array, 0, array.length);

        //  Bitmap bMap = BitmapFactory.decodeByteArray
            (array, 0, array.length);

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
            SingleMenuItemActivity.class);
            in.putExtra(KEY_TITLE, title);
            in.putExtra(KEY_ARTIST, artist);
            in.putExtra(KEY_DURATION, duration);
            in.putExtra(KEY_THUMB_URL, thumb_url);
            startActivity(in);

        }
    });     
}   
}

SingleMenuItemActivity 
public class SingleMenuItemActivity  extends Activity {

// XML node keys
private static final String KEY_TITLE = "title";
private static final String KEY_ARTIST = "artist";
private static final String KEY_DURATION = "duration";
private static final String KEY_THUMB_URL = "thumb_url";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    // getting intent data
    Intent in = getIntent();

    // Get XML values from previous intent
    String title = in.getStringExtra(KEY_TITLE);
    String artist = in.getStringExtra(KEY_ARTIST);
    String duration = in.getStringExtra(KEY_DURATION);
    Bitmap bitmap = (Bitmap)this.getIntent().getParcelableExtra("thumb_url");
    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);
    TextView lblCost = (TextView) findViewById(R.id.email_label);
    TextView lblDesc = (TextView) findViewById(R.id.mobile_label);

   //what code to write for image here 

    lblName.setText(title);
    lblCost.setText(artist);
    lblDesc.setText(duration);

listitem.xml:-
 <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <ImageView     
        android:id="@+id/thumb_url"   
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:src="@drawable/rihanna"/>

    <TextView
        android:id="@+id/title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#43bd00"
        android:textSize="16sp"
        android:textStyle="bold"
        android:paddingTop="6dip"
        android:paddingBottom="2dip" />

    <TextView
        android:id="@+id/artist"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#acacac"
        android:paddingBottom="2dip">
    </TextView>

    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#5d5d5d"
        android:gravity="left"
        android:textStyle="bold"
        android:text="Duration: " >
    </TextView>

    <TextView
        android:id="@+id/duration"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#acacac" 
        android:textStyle="bold"
        android:gravity="left">
    </TextView>
     </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:11:39.567

这是点击方法

```
in.putExtra(KEY_THUMB_URL, thumb_url); 
```

并使用`setBackgroundResource`.

```
 ImageView image = (ImageView)findViewById(R.id.imageView);
 bitmap.setBackgroundResource(thumb_url); 
```

# php - php中==和===的用法

> ID：12580692
> 
> 赞同：-8
> 
> 时间：2012-09-25T10:05:25.343
> 
> 标签：php, comparison-operators

> **可能重复：**
> [“===”是什么意思？](https://stackoverflow.com/questions/1117967/what-does-mean)

我对在 php 中使用这些运算符感到困惑，我不太确定何时应该使用 === 以及何时使用 ==。

例如为什么/什么时候应该写：

```
if( $some_method_that_returns_something_or_false() === FALSE) {
      //do stuff
} 
```

什么时候有==？

另外，=== 是否意味着我必须返回 bool FALSE 或者我可以返回 0？什么时候认为使用 === 或 == 是不好的做法？

同样在放置这样的东西时：

```
 if($some_method_that_returns_true_or_false()) {

 } 
```

是 $some_method_that_returns_true_or_false() == TRUE 还是 some_method_that_returns_true_or_false() === TRUE？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:09:21.460

=== 表示精确值，因此对于 true 它必须为 true，而 == 检查值的含义，因此 true 也是 '1' 或任何字符串的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:10:38.760

`==`用于检查相等性，`===`用于检查相等性和类型。

和

```
if($some_method_that_returns_true_or_false()) {

} 
```

正在检查`$some_method_that_returns_true_or_false() == TRUE`

# ios - 如何在 iOS 6 模拟器中自定义运营商名称？

> ID：12580694
> 
> 赞同：14
> 
> 时间：2012-09-25T10:05:32.807
> 
> 标签：ios, xcode, ios-simulator, ios6, xcode4.5

如何将默认`Carrier`名称自定义为其他名称，例如`AT&T`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-12T11:17:14.150

有一种方法可以在不使用任何目标 c 代码或图像编辑器应用程序的情况下更改运营商名称：[https ://github.com/toursprung/iOS-Screenshot-Automator/blob/master/changeCarrierName](https://github.com/toursprung/iOS-Screenshot-Automator/blob/master/changeCarrierName)

此解决方案适用于所有版本的 iOS（包括 iOS 6 和 7）

关键是

`sudo plutil -convert xml1 SpringBoard.strings`

我们不必将其转换回二进制代码，因为 Mac OS 接受这两种格式。

将文件转换为 XML 后，您可以使用 vim 或您选择的任何其他编辑器轻松编辑文件。

**更新**：我上传了有关如何更新运营商名称的详细说明：[https ://github.com/toursprung/iOS-Screenshot-Automator/blob/master/changeCarrierName](https://github.com/toursprung/iOS-Screenshot-Automator/blob/master/changeCarrierName)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-06-19T00:43:45.307

复制并粘贴到终端，将 DERP 替换为您的运营商字符串：

`find -E /Applications/Xcode.app -iregex '.*/en(glish)?.lproj/SpringBoard.strings' -exec sudo /usr/libexec/PlistBuddy -c 'Set :SIMULATOR_CARRIER_STRING DERP' {} \;`

查找相关文件并就地修改它们。无需复制文件、将二进制文件转换为 xml 或在其他应用程序中编辑字符串。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-25T10:20:04.267

您可以使用[此 hack](https://gist.github.com/3035167)，只需在项目中编译`XCDFakeCarrier.m`文件并将`FakeCarrier`常量更改为您想要的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T10:18:41.907

有一个完美的应用程序叫做 Status Magic，我正在测试它。只是想找到它的链接...

您导入屏幕截图，它会从中删除所有运营商特定的文本并用标准状态栏替换它，您可以编辑时间、运营商信息等...

意味着您不必使用 Photoshop 或任何东西。

将返回一个链接...

**链接** [https://itunes.apple.com/uk/app/status-magic/id547920381?mt=12](https://itunes.apple.com/uk/app/status-magic/id547920381?mt=12)

**编辑**刚刚发现该应用程序仍在 Mac App Store 审查中。应该快出来了。它确实非常适合您想要做的事情。而且真的很容易使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T10:13:58.587

我不知道iOS模拟器是否有可能（如果有可能你必须深入挖掘:)）。最好的方法是截取屏幕截图（Command+S），然后在 Adob​​e Photoshop 或类似的图像处理程序中更改图像。

# ruby-on-rails - Rails has_one / belongs_to 不保存父 ID

> ID：12580704
> 
> 赞同：1
> 
> 时间：2012-09-25T10:06:23.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, nested-attributes, simple-form

我有 2 个模型，响应和条目。

```
Response has_one Entry
Entry belongs_to Response 
```

*（尝试在响应的显示视图上执行此操作）*

在 Show 的控制器操作中，我有：

```
@response = Response.find(params[:id])
@entry = @response.build_entry(:response_id => @response.id) 
```

*也试过了`@response.build_entry`*

使用 simple_form gem 和 simple_form_for @entry 创建条目，但不会在条目记录中保存父（响应）ID。

我完成此操作的唯一方法是在表单中添加一个隐藏字段，我真的不想这样做......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:10:34.700

参考[这个](http://guides.rubyonrails.org/association_basics.html#has_one-association-reference)

`:response_id => @response.id`从中删除`build`

```
@response = Response.find(params[:id])
@entry = @response.build_entry
@response.save 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:27:09.867

Salil 的代码是正确的。我认为您应该修改您的方法并将数据验证从控制器转移到模型。

# asp.net-mvc - ASP.NET MVC 和友好的 URL

> ID：12580705
> 
> 赞同：1
> 
> 时间：2012-09-25T10:06:24.327
> 
> 标签：asp.net-mvc, url, url-rewriting, seo, asp.net-mvc-routing

我正在尝试学习更多有关创建友好 URL 的知识，尤其是与电子商务网站等相关的内容。如果你以这个网站为例： http: [//www.wiggle.co.uk/](http://www.wiggle.co.uk/)

它基本上可以让您根据类别细化您的搜索。因此，如果我访问[http://www.wiggle.co.uk/mens/road-time-trial-bikes/](http://www.wiggle.co.uk/mens/road-time-trial-bikes/)，它将列出所有男士公路自行车，如果我再访问[http://www.wiggle.co。 uk/road-time-trial-bikes/](http://www.wiggle.co.uk/road-time-trial-bikes/)它将列出男士和女士的自行车，如果我访问[http://www.wiggle.co.uk/bianchi-sempre-105/](http://www.wiggle.co.uk/bianchi-sempre-105/)，它将显示特定的自行车。

我不太确定这样的路由会是什么样子，因为 URL 中可能有很多过滤器。我也不确定它如何区分什么是过滤器和什么是产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:20:40.743

我会说你相当接近，但会打破第二个和第三个，因为一个 Action 解释这两个参数会有点模棱两可。我建议如下：

[http://www.wiggle.co.uk/road-time-trial-bikes/](http://www.wiggle.co.uk/road-time-trial-bikes/)

[http://www.wiggle.co.uk/](http://www.wiggle.co.uk/)**自行车**/bianchi-sempre-105/

因此 /bikes/ 可以清楚地路由到不同的控制器和动作。您需要为根创建特定规则，或者您可以将特定控制器（例如自行车类型）添加到第一个 url

[http://www.wiggle.co.uk/bike-types/road-time-trial-bikes/](http://www.wiggle.co.uk/) **_** _

路由的细节有据可查，但一个好的开始可能是编写一些测试来帮助您了解什么是有效的，并让您对更改路由更有信心。创建冲突路线非常容易，测试有助于防止这种情况发生。 [http://mvccontrib.codeplex.com/wikipage?title=TestHelper#Routes](http://mvccontrib.codeplex.com/wikipage?title=TestHelper#Routes)

# android - 安卓问卷

> ID：12580706
> 
> 赞同：0
> 
> 时间：2012-09-25T10:06:25.607
> 
> 标签：android, radio-button, radio-group

我有一个包含 8 个问题的活动，每个问题都有一个带有 2 个单选按钮（是/否）的 1 个单选组。在 .xml 上，我设置了检查所有问题的“否”单选按钮。

```
android:checked="true" 
```

我是否需要检查是否选择了其中一个单选按钮？用户可以取消选择两个单选按钮吗？

对不起这个菜鸟问题，但我不能有未填写的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:08:30.153

无需检查单选按钮是否被选中。用户不能根据单选组的默认行为取消选择两个单选按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:10:46.263

RadioGroup 中有一个`clearCheck`方法。我不认为它现在可以通过 UI 访问，但它可能会变成这样。

我建议用

```
if (mRadioGroup.getCheckedRadioButtonId() == -1) {
    // Alert, or simply don't go to next question
} 
```

或带有`RadioGroup.OnCheckedChangeListener`. 例如，`onCheckedChanged`如果checkedId 为-1，则禁用验证答案的可能性。

# xml - 需要将文本文件解析成特定的xml格式

> ID：12580711
> 
> 赞同：0
> 
> 时间：2012-09-25T10:06:40.140
> 
> 标签：xml, shell

需要将文本文件解析为特定的xml格式。（文件是一个巨大的百万行，看起来像这样）

```
ABC-DATA-FILE-VERSION: 2.0

OBJFILE:    /home/abc/src/solaris/abc.o

TIMESTAMP: 1348314377 727216

SRCFILE:    /home/abc/src/solaris/abc.C

    167 7
    170 7
    174 0
    179 0
    174 0
    192 7
    196 7
    199 7
    215 0

OBJFILE:    /home/abcd/src/solaris/abcd.o

TIMESTAMP: 1348314377 727216

SRCFILE:    /home/abcd/src/solaris/abcd.C

    58  7
    65  7
    66  7
    67  7
    69  0
    79  0
    84  0
    97  14
    100 7
    108 14
    110 7
    115 14

OBJFILE:    /home/abcd/src/solaris/xyz.o

TIMESTAMP: 1348314377 727216

SRCFILE:    /home/abcd/src/solaris/xyz.C

    978   0
    979   1
    993   0
    996   0
    997   0
    1011  0
    1003  0
    1004  0
    1011  0 
```

现在我想将其转换为特定的 xml 文件格式。像

```
<packages>
    <package name="com" line-rate="0.45161290322580644" branch-rate="0.4915254237288136" complexity="3.391891891891892">
        <classes>
            <class branch-rate="0" complexity="0" filename="/home/abcd/src/solaris/abcd.C" line-rate="0.25" name="TestRunnerModel">
                <methods/>
                <lines>
                    <line number="13" hits="1" branch="true"/>
                    <line number="14" hits="1" branch="true"/>
                    <line number="15" hits="1" branch="false"/>
                    <line number="12" hits="0" branch="false"/>
                </lines>
            </class>
            <class branch-rate="0" complexity="0" filename="/home/abcd/src/solaris/abcd.C" line-rate="0.25" name="TestRunnerModel">
                <methods/>
                <lines>
                    <line number="13" hits="1" branch="true"/>
                    <line number="14" hits="1" branch="true"/>
                    <line number="15" hits="1" branch="false"/>
                    <line number="12" hits="0" branch="false"/>
                </lines>
            </class>
            <class branch-rate="0" complexity="0" filename="/home/abcd/src/solaris/xyz.C" line-rate="0.25" name="TestRunnerModel">
                <methods/>
                <lines>
                    <line number="13" hits="1" branch="true"/>
                    <line number="14" hits="0" branch="true"/>
                    <line number="15" hits="1" branch="false"/>
                    <line number="12" hits="0" branch="false"/>
                </lines>
            </class>
        </classes>
    </package>
</packages> 
```

大多数 xml 参数都是恒定的，只有少数我需要填充

从 SRCFILE 读取的文件名：/home/abcd/src/solaris/xyz.C 和

line number="978" hits="0" branch="true" line number="979" hits="1" branch="false" 等

等等。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:25:45.880

原则上，它非常简单。您有给定输入格式的输入，并且您希望以给定的输出格式生成输出。您需要输入格式的解析器来识别其结构并构建表示该结构的数据结构。你需要一个序列化器来生成你想要的 XML 数据结构。

您的输入格式可能存在解析库，在这种情况下，您可能希望使用它们，而不是从头开始编写自己的解析器。您的语言也可能（并且可能确实）具有将事物序列化为 XML 的库；您可能想使用它们。

如果您知道如何为定义的格式编写解析器，那么您现在就知道需要做什么了。如果您不这样做，您可以使用 sed、awk、perl 或您选择的批处理编辑器来伪造它，但是如果您花一些时间学习解析，您作为程序员的生活将会更加有趣。

# kohana - 如果没有找到，则加载默认操作和控制器

> ID：12580715
> 
> 赞同：0
> 
> 时间：2012-09-25T10:07:00.920
> 
> 标签：kohana, kohana-3

我不确定这是否可能，但我需要的是加载默认值`controller`，`action`如果`controller`没有从 中找到指定的`url`，那么假设我是否有这个 url：

`http://mywebsite.com/john`

它必须调用`user`控制器和`selected_user`动作，

如果我有网址`http://mywebsite.com/pages/profile`

它必须调用`pages`控制器和`profile`动作，因为两者都已指定并找到

有没有办法做到这一点？

我在用`Kohana 3.2`

**编辑**这是我的 htaccess：

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /ep/

# Protect hidden files from being viewed
<Files .*>
    Order Deny,Allow
    Deny From All
</Files>

# Protect application and system files from being viewed
RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php/$0 [PT] 
```

`/ep`我的目录是否`htdocs`也在`'base_url' => '/ep/',`我的目录`bootstrap`中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:11:47.490

假设 mod_rewriting 已启用并且 .htaccess 文件配置正确。您需要做的就是在引导程序中指定一个新路由，在当前默认路由之后。

例如：

```
<?php

  Route::set('default', '(<controller>(/<action>(/<stuff>)))', array('stuff' => '.*'))
    ->defaults(array(
        'controller' => 'welcome',
        'action' => 'index',
  ));

  /** Set a new route for the users **/
  Route::set(
    "users", "<name>", array("name" => ".*")
  )->defaults(array(
    'controller' => 'users',
    'action' => 'selected_user'
  ));

  /** Within the selected_user method you can then check the request for the "name" 
    validate the user parameter (parhaps against the db) and then again route the correct
    pages/profile if found

    e.g.
  **/

  $username = $this->request->param('name');
  if ($username == "alexp") {
    /** reroute to the users/profile controller with data **/
  }

?> 
```

编辑：我也忘了提到上述路线将在基本 Uri 之后被调用，因此“http://mysite.com/john”和“http://mysite.com/89s88”也将尝试使用它路线。您可以想象随着时间的推移需要分配的路线，所以最好至少坚持最少的 /controller/action 种类，否则您可能会发现自己在不需要的路线中有一些复杂的正则表达式。

# android - 如何给动画onclick？

> ID：12580720
> 
> 赞同：0
> 
> 时间：2012-09-25T10:07:23.470
> 
> 标签：android, android-animation

在我的项目中，我在单个 xml 文件中使用不同的动画，例如 Fruit Ninja 游戏。当我单击特定图像时，该图像应该是不可见的，并且输出计数将增加 100，对于此列表，我想知道如何在单击移动图像（即动画图像）时给出。

```
 LinearLayout r=new LinearLayout(this);
 i1 = (ImageView)findViewById(R.id.imageView1);
 i2 = (ImageView)findViewById(R.id.imageView2);
 i3 = (ImageView)findViewById(R.id.imageView3);
 i4 = (ImageView)findViewById(R.id.imageView4);
 i5 = (ImageView)findViewById(R.id.imageView5);
 i6 = (ImageView)findViewById(R.id.imageView6);
 i7 = (ImageView)findViewById(R.id.imageView7);
 i8 = (ImageView)findViewById(R.id.imageView8);
 i9 = (ImageView)findViewById(R.id.imageView9);
 i10 = (ImageView)findViewById(R.id.imageView10);

 final Animation an=AnimationUtils.loadAnimation(this,R.anim.custom);
 final Animation an1=AnimationUtils.loadAnimation(this,R.anim.custom1);
 final Animation an2=AnimationUtils.loadAnimation(this,R.anim.custom2);
 final Animation an3=AnimationUtils.loadAnimation(this,R.anim.custom3);
 final Animation an4=AnimationUtils.loadAnimation(this,R.anim.custom4);
 final Animation an5=AnimationUtils.loadAnimation(this,R.anim.custom5);
 final Animation an6=AnimationUtils.loadAnimation(this,R.anim.custom6);
 final Animation an7=AnimationUtils.loadAnimation(this,R.anim.custom7);
 final Animation an8=AnimationUtils.loadAnimation(this,R.anim.custom8);
 final Animation an9=AnimationUtils.loadAnimation(this,R.anim.custom9); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:35:36.597

你试过这个

```
ImageView myImage = (ImageView) findViewById(R.idimageView1); 
```

然后，将可见性设置为 GONE

```
myImage.setVisibility(View.GONE); 
```

还要[检查这个](https://stackoverflow.com/questions/3775726/invisible-transparent-button-that-works-like-a-regular-in-android)

# sql - SSRS 2005 具有覆盖指数的多值参数

> ID：12580723
> 
> 赞同：0
> 
> 时间：2012-09-25T10:07:37.767
> 
> 标签：sql, reporting-services, indexing, reportingservices-2005

大家早，

我目前正在尝试在 SQL2005 / SSRS2005 中实现多值参数

我已经按照许多博客/演练中建议的方式进行了此操作，使用表达式以逗号分隔参数，如下所示：

`=Join(Parameters! <ParameterName> .Value,", ")`

然后我使用一个函数来拆分参数。

```
WHERE 
close_date BETWEEN @FROMCLOSEDATE AND @TOCLOSEDATE
AND (Group_ID IN (SELECT Val from dbo.fn_String_To_Table(@RESGROUP,',',1))) 
```

这现在按预期工作。存储过程正在搜索 140 万行以查找参数 和 之间的日期`IN RESGROUP`，这需要很长时间，因此最好使用索引。根据我收集的信息，由于表值函数，没有使用索引。

在这种情况下，我还能做些什么来提高性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:53:36.913

Try to insert the return values from the function into a temp table and use that in the query and see the performace.

Other wise you can try dynamic query.

# c++ - 类模板上的重载方法，总是无法将函数定义与声明匹配

> ID：12580736
> 
> 赞同：1
> 
> 时间：2012-09-25T10:08:22.223
> 
> 标签：c++, templates

我对模板有点陌生，我正在尝试修改一些为 c++ 提供矩阵和向量操作的库，我有一个向量类，我试图重载 operator() 以便它处理像这样的操作 Vector (2:5) 将返回一个包含原始向量的元素 2,3,4,5 的向量，我正在使用一个名为冒号的类，其中冒号 (2:5) 将 (2:5) 效果表示为我发现 c++ 没有运算符：。希望我给了一个适当的介绍。相关代码如下

向量类

```
template< size_t M, typename T = float >
class Vector
{
public:
typedef T   value_type;
Vector operator-( const Vector& other ) const;
template <size_t N, typename T> Vector<N,T> operator()(const  colon &cex) const;
.
.
} 
```

以及相应的实现

```
template< size_t M, typename T >
template< size_t N,T>
Vector<N,T>
Vector<M,T>::operator()( const colon &cex ) const
{
long i, ii, st = 0, in = 0, en = 0, s;
cex.apply(M, st, in, en, s);
if (s && (st>0) && (st>M))
{
Vector<N,T> result;
for (i=st,ii=0;i+=in,ii++;i<=en,ii<N)
{
result(ii)=array(i);
return result;
}

}
return 0;
} 
```

这里的 return 0 只是一个占位符，它应该返回一个空向量。冒号类（取自另一个库并由我修改）。

```
class colon
{
public:
/// Colon expression '(:)'
colon() { _flag = 'a'; }
/// Colon expression of type '(2:5)'
colon(long s, long e) { _s = s; _i = 1; _e = e; _flag = 'r'; }
void apply(long s, long &f, long &i, long &l, long &n) const;

private:
/// Type of colon expression.
char _flag;
/// First index.
long _s;
/// Increment.
long _i;
/// Last index.
long _e;

}; /* class colon */ 
```

相关的实现是

```
void
colon::apply(long n, long &st, long &in, long &en,
     long &le) const
{
switch (_flag)
{
    case 'r':
        if ((_i == 0 ) || ((_e - _s) / _i < 0 )) le = 0;
        else
        {
            st = _s;
            in = _i;
            en = _e - (_e - _s) % _i;
            le = (_e - _s) / _i + 1;
        }
        break;
    case 'a':
        if (n)
        {
            st = 1;
            in = 1;
            en = n;
            le = n;
        }
        else le = 0;
        break;

 }
} 
```

编译此代码时，我总是收到错误

错误 1 ​​错误 C2244：“Vector::operator ()”：无法将函数定义与现有声明匹配

编译器的输出是

```
error C2244: 'Vector<M,T>::operator ()' : unable to match function 
definition to an existing declaration

definition
'Vector<N,T> Vector<M,T>::operator ()(const colon &) const'

existing declarations
'Vector<N,T> Vector<M,T>::operator ()(const colon &) const' 
```

那么我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:14:35.040

在您的声明中，您写道：

```
template< size_t M, typename T = float >
class Vector
{
template <size_t N, typename T> 
Vector<N,T> operator()(const  colon &cex) const 
```

在你的定义中你写：

```
template< size_t M, typename T >
template< size_t N,T>
Vector<N,T>
Vector<M,T>::operator()( const colon &cex ) const 
```

注意第二个模板行的区别：

```
template <size_t N, typename T> 
```

对比

```
template< size_t N,T> 
```

你错过了`typename`那里。因此，与其将类型传递给 T ，不如将其传递给 T 的实例 （仅当它是整数类型`T`时才有可能）。`T`

这表明您的声明和定义实际上确实不同以及错误的来源。

由于您的第二个`T`会隐藏第一个（这是不允许的 - 请参阅评论），我认为您要么想重命名第二个`T`并在定义中添加，要么要完全`typename`删除第二个`T`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:35:05.367

第一个问题是你写错了模板函数参数：`template<size_t N,T>`. 应为`template<size_t N, typename T>`，否则将被视为非类型模板参数（ 的某些特定值`T`）。

第二个问题是函数模板参数名称`T`有歧义。编译器无法`T`从类模板参数或函数一中知道它应该使用哪个？请记住，函数和类模板参数是不相关的。所以你需要重命名它：

```
template<size_t M, typename T> class Vector
{
public:

template <size_t N, typename X> Vector<N,X> operator()() const;
};

template<size_t M, typename T>
template<size_t N, typename X> Vector<N,X> Vector<M,T>::operator()() const
{ 
} 
```

但实际上，如果您不需要跨类型操作并且`X`始终是相同的类型，`T`您可以在函数中跳过它并仅按大小对其进行参数化：

```
template<size_t M, typename T> class Vector
{
public:

template <size_t N> Vector<N,T> operator()() const;
};

template<size_t M, typename T>
template<size_t N> Vector<N,T> Vector<M,T>::operator()() const
{ 
} 
```

# java - jsp上如何维护修改后的记录

> ID：12580739
> 
> 赞同：0
> 
> 时间：2012-09-25T10:08:39.820
> 
> 标签：java, javascript, jsp

我有一个小要求，如下所示。我有一个 Jsp，我在其中填充了员工详细信息的所有详细信息。在 jsp 上，我有 100 多条记录。要编辑详细信息，我不会打开任何弹出窗口。用户可以从 UI 的下拉列表中更新某些字段。

另外我在同一个 Jsp 上有保存按钮，以便可以更新相同的记录。所有记录都显示在 JSP 行上。

根据要求，我必须维护最后修改的记录。例如，用户已对第 100 条记录进行了修改并点击保存，因此在保存 JSP 页面后将显示 JSP 上的第 100 条记录（突出显示或可能是其他一些解决方案）。通常如果我点击保存，那么所有记录都会显示在 JSP 上，所以用户必须转到第 100 条记录才能找到修改。

有什么办法可以实现这种情况。

最好的问候 Arvind Porlekar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:29:44.907

第一个请求：：`GET /displayRecords`显示所有记录。

现在用户选择滚动、编辑和保存第 100 条记录，由 ID 3542: 标识`POST /saveRecord`，参数`recordId=3542`为 ,`recordFoo=bar`等。服务器保存记录，并重定向到`/displayRecords?highlightedRecord=3542#3542`。

所以第三个请求：`GET /displayRecords?highlightedRecord=3542`。JSP 重新生成记录列表，并突出显示由 3542 标识的记录（感谢参数的值`highlightedRecord`）。

重新显示记录列表，由于 URL 末尾有 #3542，浏览器会查找以 3542 命名或标识的锚点。如果找到，它会自动滚动到该位置。您只需要在 HTML 中生成这样的锚点：

```
<a id="3542"></a>
Data of the record 3542 
```

# iphone - 如何将捕获的帧写入套接字？

> ID：12580740
> 
> 赞同：1
> 
> 时间：2012-09-25T10:08:41.083
> 
> 标签：iphone, ios, cocoa-touch, video-capture

在我的应用程序中，我使用

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput 
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer 
       fromConnection:(AVCaptureConnection *)connection 
```

委托，我已经使用 MPMoviePlayerController 录制并播放了录制的文件。现在我的问题是，我想将这些缓冲区写入套接字并发送到服务器而不是写入文件。我需要做出什么样的改变？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:30:56.137

您的问题似乎包含两个部分：

1.  为了逐帧捕获，我使用了 Apple 的这个片段：（把它放在你提到的 captureOutput 方法中：

    ```
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    CVPixelBufferLockBaseAddress(imageBuffer, 0);
    uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer);
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
    size_t width = CVPixelBufferGetWidth(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef newContext = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
    CGImageRef newImage = CGBitmapContextCreateImage(newContext);

    CGContextRelease(newContext);
    CGColorSpaceRelease(colorSpace);

    //   NSImage *image = [UIImage imageWithCGImage:newImage];
    //   self.imgData = UIImageJPEGRepresentation(image , 1.0);  //convert to NSData to send
    CGImageRelease(newImage);
    CVPixelBufferUnlockBaseAddress(imageBuffer, 0); 
    ```

2.  对于网络套接字通信，您可以使用[CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)。如果您不需要套接字级别，也可以使用[NSStream](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSStream_Class/Reference/Reference.html)。

# android - 使用表格行动态填充表格布局

> ID：12580742
> 
> 赞同：3
> 
> 时间：2012-09-25T10:08:46.357
> 
> 标签：android, dynamic, tablelayout, tablerow, layoutparams

我在滚动视图中有一个表格布局，我想用 5 N 表格行动态填充它们。每个表格行包含一个 ImageView 和一个 EditText。应用程序崩溃了这是完整的堆栈：

```
 09-25 10:03:07.496: E/AndroidRuntime(1695): FATAL EXCEPTION: main
09-25 10:03:07.496: E/AndroidRuntime(1695): java.lang.ClassCastException: android.widget.TableLayout$LayoutParams cannot be cast to android.widget.TableRow$LayoutParams
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.TableRow.mapIndexAndColumns(TableRow.java:164)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.TableRow.getVirtualChildCount(TableRow.java:149)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.TableRow.getColumnsWidths(TableRow.java:289)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.TableLayout.findLargestCells(TableLayout.java:504)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.TableLayout.measureVertical(TableLayout.java:469)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.TableLayout.onMeasure(TableLayout.java:435)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.View.measure(View.java:15172)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.ScrollView.measureChildWithMargins(ScrollView.java:1196)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.ScrollView.onMeasure(ScrollView.java:318)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.View.measure(View.java:15172)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:617)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:399)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.View.measure(View.java:15172)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.View.measure(View.java:15172)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.View.measure(View.java:15172)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.View.measure(View.java:15172)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1100)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.Choreographer.doFrame(Choreographer.java:525)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.os.Handler.handleCallback(Handler.java:615)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.os.Looper.loop(Looper.java:137)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at java.lang.reflect.Method.invokeNative(Native Method)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at java.lang.reflect.Method.invoke(Method.java:511)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-25 10:03:07.496: E/AndroidRuntime(1695):     at dalvik.system.NativeStart.main(Native Method) 
```

代码：

```
private TableLayout Table;//in XML

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

                //here I define the TR params   
        Table=(TableLayout)findViewById(R.id.Table);
        TableLayout.LayoutParams tableRowParams=new TableLayout.LayoutParams 
(TableLayout.LayoutParams.MATCH_PARENT,TableLayout.LayoutParams.MATCH_PARENT,1.0f);
            //fill the table with Table rows dynamicly
    for(int i=0;i<N;i++){

        TableRow TR= new TableRow(this);
        TR.setLayoutParams(tableRowParams);
        Table.addView(TR);
        //Table Row contains EditText and ImageView
                    EditText editText1 =new EditText(this);
        ImageView imgview=new ImageView(this);
        TR.addView(editText1);
        TR.addView(imgview);

        editText1.setText("foo");
        editText1.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT,1.0f));

        int id = getResources().getIdentifier("com.example.university2:drawable/news1", null, null);

        imgview.setImageResource(id);
        imgview.setAdjustViewBounds(true);
        imgview.setMaxHeight(50);
        imgview.setMaxWidth(50);

        imgview.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT,1.0f));

    }

} 
```

这是XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" >

    <TableLayout
        android:id="@+id/Table"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </TableLayout>

</ScrollView> 
```

我会很感激你的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:53:53.047

看起来问题是由`TR.setLayoutParams(tableRowParams);`
（*java.lang.ClassCastException: android.widget.TableLayout$LayoutParams cannot be cast to android.widget.TableRow$LayoutParams*）引起的，因为
tableRowParams （声明：）`TableLayout.LayoutParams tableRowParams`不是**尝试** `TableRow.LayoutParams`
替换

```
TableLayout.LayoutParams tableRowParams=new TableLayout.LayoutParams (TableLayout.LayoutParams.MATCH_PARENT,TableLayout.LayoutParams.MATCH_PARENT,1.0f); 
```

与（**更新**）

```
TableRow.LayoutParams tableRowParams=new TableRow.LayoutParams (TableRow.LayoutParams.MATCH_PARENT,TableRow.LayoutParams.MATCH_PARENT,1.0f); 
```

并**编辑**

```
TR.addView(editText1, new TableRow.LayoutParams (TableRow.LayoutParams.MATCH_PARENT,TableRow.LayoutParams.MATCH_PARENT,1.0f));
TR.addView(imgview, new TableRow.LayoutParams (TableRow.LayoutParams.MATCH_PARENT,TableRow.LayoutParams.MATCH_PARENT,1.0f)); 
```

消除

```
imgview.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT,1.0f)); 
```

和

```
editText1.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT,1.0f)); 
```

问题是由添加到特定所有者的特定控件的 LayoutParams 错误创建引起的，例如：如果您正在向 LinearLayout 添加控件 - 您应该为该控件使用 LinearLayout.LayoutParams，TableLayout.LayoutParams - 如果您正在向 TableLayout 添加控件，. .. ETC...

# ruby - ACM 编程 - Arithmetica 1.0 - 任何其他运算符？

> ID：12580743
> 
> 赞同：0
> 
> 时间：2012-09-25T10:08:47.123
> 
> 标签：ruby, algorithm, arithmetic-expressions

本论坛中是否有人尝试解决 ACM 编程问题[http://acm.mipt.ru/judge/problems.pl?browse=yes&problem=024](http://acm.mipt.ru/judge/problems.pl?browse=yes&problem=024)？这是 ACM MIPT 中较简单的问题之一，目标是评估由 +、-、* 和括号组成的表达式。尽管看起来很简单，但我的解决方案仍然无法被接受，*显然是*因为其中一个测试用例表达式有一个未在问题中说明的运算符。我什至添加了对除法 ('/') 的支持，但这也无济于事。关于需要支持哪些其他运营商的任何想法？仅供参考，我的程序会在处理之前从输入中删除所有空格，这样空格就不会成为问题。问题中没有说明但需要注意的事项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:57:44.440

你被 ruby​​ 对字符串和字符的处理方式所困扰。

```
curr_ch = @input[i] 
```

给你一个整数，对于你得到的输入，输入索引处字符的 ASCII 码`i`。

```
curr_ch == '(' 
```

例如将该整数与字符串进行比较，`"("`当然会失败。此外，正则表达式匹配失败，因为您将一个整数传递给他们需要字符串的位置。

替换所有出现的`some_var = @input[some_index]`with`some_var = @input[some_index...some_index+1]`给了我一个似乎可以工作的程序（它适用于我给它的一些测试输入）。可能真正了解红宝石怪癖的人可以为您提供更好的解决方案。

# google-app-engine - GAE 与 AWS 2012

> ID：12580744
> 
> 赞同：5
> 
> 时间：2012-09-25T10:08:52.350
> 
> 标签：google-app-engine, amazon-web-services, scalability, porting

与 AWS 相比，GAE 是一个不错的后端选择吗？找到的信息主要讨论了GAE截至今天已解决的问题。正在考虑的移动应用程序处理图像。与多个用户同时共享和编辑图像。

我主要关心实现中的可扩展性和灵活性。健壮和兼容性层，存储和数据分析（分析（识别模式）存储的数据）。

AWS 允许使用流行的开源技术和工具，并提供精细的定价。GAE 非常适合快速进入市场，没有管理痛苦和免费配额。

您能否指出我在做出决定之前必须考虑的一些重要利弊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:36:46.830

我认为 GAE 有利于它的快速启动和概念验证。一开始它真的很简单，也更便宜，但它会把你锁在谷歌上。

如果您的想法运作良好并且变得流行，您可以在未来使用开源技术重写它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T23:42:39.587

我有 25 GB 的 appengine 数据库。我每隔 1-10 分钟添加一次记录。每周收费 2.5 美元。

但最初上传的成本比我想象的要高。我的上传脚本为每个请求上传了 500 条记录。

请求在 10-15 秒内结束，但日志显示数据存储时间更像是 5 分钟而不是 15 秒！此外，上传 servlet 99% 的时间都在等待什么都不做，我也必须为此付费。

上传 15 GB 的索引数据需要几天时间。

AppEngine 有一定的定价风险

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-17T08:49:35.730

GAE 本质上是用于“丢弃”的概念证明或“非常非常小的”应用程序。我之所以这么说是因为，我不会将大量资金投入到一个完全由供应商锁定的系统中……其他人可能会但我不会冒这种风险，因为我会随 Google 对他们的可用性和定价一时心血来潮.

因此，如果您有一个大型项目或产品，那么使用 EC2 可能会更好，因为它提供的只是基础设施......没有代码要求强加给您。

话虽如此，如果我有一个小项目想在网上为我的朋友折腾，我肯定会利用 GAE 的免费层。

我认为最大的区别在于，一般意义上，EC2 托管服务器，而 GAE 托管代码。如果您正在构建一个系统，您将要在其中执行诸如尾日志之类的操作，让系统管理员管理 cron 作业，使用 rsync 等开源工具，并对操作系统和配置进行细粒度控制或共同定位服务在一个盒子上，那么 EC2 非常引人注目。

GAE 是“上传你的应用程序并且它可以工作”。就其本身而言非常酷，但我个人更愿意在 EC2 中处理 VM，因为至少对我而言，它对于系统开发来说是一种更自然的动态。

# java - 在 Eclipse 中自动生成 Javadoc 注释？

> ID：12580746
> 
> 赞同：34
> 
> 时间：2012-09-25T10:08:53.597
> 
> 标签：java, eclipse, automation

是否可以为 Eclipse (Indigo) 中的一个类中的每个方法自动生成 Javadoc 注释？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-25T10:11:53.080

可能有更好的方法，但是如果您在包资源管理器中展开类，选择您要记录的方法，然后右键单击并选择“源 -> 生成元素注释”，这将为所有选定的方法添加注释。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-15T06:54:56.333

另一种选择可能是双击方法的名称，然后是 ALT+Shift+J 快捷键。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-25T10:15:01.523

还存在用于生成 javadoc 的外部工具，例如[JAutodoc eclipse plugin](http://jautodoc.sourceforge.net/)。可以自定义它的模板以满足您的期望。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-25T10:15:40.473

在 Eclipse 中，您可以创建 java doc 模板，然后只需在`/**`要记录的元素上方键入 java-dock 块。

如果生成代码，模板也会生成 java-doc。

所有这些，甚至更多，您都可以在 Window -> Preferences, Java -> Code Style -> Code Templates -> Comments 中进行配置

# ios - 使用临时分发的设备崩溃

> ID：12580747
> 
> 赞同：8
> 
> 时间：2012-09-25T10:08:54.297
> 
> 标签：ios, xcode, memory-management, segmentation-fault, ad-hoc-distribution

突然间，我通过 Testflight 和 iTunes-sync 进行的临时分发不再有效。使用 ad-hoc 构建配置分发的应用程序永远不会在设备上完全启动。它立即崩溃，出现分段错误 11。

这个问题的奇怪之处在于，在下面提到的所有设备上的调试版本都可以完美地工作。[这让我相信我的project.pbxproj](https://gist.github.com/3780985)中有些东西搞砸了。但是当我查看 git-log 时，我没有看到任何异常，唯一改变的是架构（*ARCHS*）和有效架构（*`VALID_ARCHS`*）。

我是否正确地假设搞乱架构不应该在启动时而是在构建过程中导致实际错误？

**一些背景：**
另外值得一提的是我同时安装了 Xcode 4.4.1 和 4.5 GM，当我将 GM 升级到 App Store 中的那个时，它也删除了我对 Xcode 4.4.1 的备份。在那次打嗝之后，我删除了所有版本的 Xcode，重新启动并再次安装了 4.4.1 版（这样我就可以为 armv6 构建）。

任何有关如何进行此调试的有用提示对我来说都非常有价值。
谢谢你的时间。<3

**来自设备的控制台打印和崩溃日志：**
- [https://gist.github.com/3781018](https://gist.github.com/3781018)
如果需要，我可以添加更多日志。

**当前环境：**
- Xcode 版本 4.4.1 (4F1003)
- Mac OS 版本 10.8.2

**项目设置（pbxproj）：**
- [https://gist.github.com/3780985](https://gist.github.com/3780985)

**测试设备：**
- iPhone 3GS iOS 6
- iPhone 3G iOS 4.2.1
- iPad 第二代 iOS 5.1.1
- iPhone 4S iOS 5.1.1
- iPhone 4 iOS 6.0
- iPhone 4S iOS 6.0

**更新**
要继续调试，这是我尝试过的：
1\. 跳过 Testflight 并使用老式的方式通过 iTunes 发布 ad-hoc。**失败** 2\. 重新安装配置文件**失败**
2\. 在我的机器上创建一个新用户并重新安装 Xcode。**FAIL**
3\. 从另一台机器构建。**FAIL**
4\. 将优化级别设置为：-O0 **FAIL**

尽管我确定没有任何代码被更改，但我没有看到其他合理的解释。所以我开始在 git 中恢复项目，盯着我成功发布临时版本的那一天。令我惊恐的是，我注意到同样的分段错误正在随着时间的推移跟随我！
考虑到这一事实，只剩下一个行动可以采取了；我称之为spray-and-pray的一种非常强大的调试方式。=) 换句话说，我开始注释掉代码部分，看看这是否有任何区别，令我完全惊讶的是，它确实做到了。在禁用和启用我的应用程序的几个小时后，我发现了罪魁祸首：一个静态的 NSArray 从未被保留。真正让我大吃一惊的是，自 2010 年以来，数组的实际初始化看起来一直是一样的。那么，到底为什么这会突然导致内存错误呢？为什么静态分析器没有警告我们呢？

我现在太累了，无法回答这些问题，我会尝试用更多细节更新问题，希望明天也能得到答案。
再次，非常感谢到目前为止提供帮助的任何人！<3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:14:07.687

看起来问题的原因是并发问题：

```
Crashed Thread:  1 
```

在这种情况下，可能很难找到并解决问题的根源 (http://en.wikipedia.org/wiki/Unusual_software_bug#Heisenbug)。

可能是您在没有正确同步的情况下对来自多个线程的一个对象做某事；或者可能是您在一个线程（例如线程 0）中释放对象并尝试从另一个线程（线程 1）访问它。

# git - 不正确地合并提交到master？

> ID：12580749
> 
> 赞同：0
> 
> 时间：2012-09-25T10:09:01.443
> 
> 标签：git, git-svn

在我的主分支中，大约。30 次提交，我确实不正确地合并了我同事的提交。那时我没有意识到这一点，但他今天回来说，当他提取我同时做的一些代码时，它破坏了他的构建，因为我当时没有正确合并那个提交。

我在 mac 上使用 git，并使用 SourceTree 管理存储库。

我该怎么办，我该如何补救？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:14:36.143

好吧，我建议做`git checkout bad-merge-commit`，进行必要的更改，提交，，`git checkout HEAD`合并并确保这次合并是正确的。如果您需要提交之间的所有内容都是正确的，那么您可能可以对这些提交进行某种变基到固定合并上。

# xcode - JSON字符串解码

> ID：12580754
> 
> 赞同：0
> 
> 时间：2012-09-25T10:09:09.047
> 
> 标签：xcode, json

我收到一个 JSON 对象：

Pots veure bé les annotacions que tenen 口音？O caràcters “estranys”？Tipus l'ampersand &, les cometes ", les u's amb dièresis ü, apòstrofs ' i coses així?","numAnotacions"

什么时候真的是：

Pots veure bé les annotacions que tenen 口音？O caràcters “estranys”？Tipus l'ampersand &, les cometes ", les u's amb dièresis ü, apòstrofs ' i coses així?","numAnotacions"

所以，我找不到解码字符串的方法。我得到了字符串：

NSString *responseString = [请求响应字符串];

请问有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:11:20.850

我[认为 JSONKit](https://github.com/johnezang/JSONKit)可以帮助解析 JSON（[示例](http://www.14oranges.com/2011/08/how-to-use-jsonkit-for-ios-and-the-rotten-tomatoes-api/)）。

# jquery - 隐藏输入更改事件

> ID：12580761
> 
> 赞同：24
> 
> 时间：2012-09-25T10:09:39.243
> 
> 标签：jquery, input, hidden

如何检测隐藏输入值的变化？我已经尝试过这些方法但没有成功：

```
$('#id_inpout').live('change',function () {
        var id_el = $(this).attr('id');
        alert(id_el);
    }); 
```

和

```
$('#id_inpout').change(function () {
        var id_el = $(this).attr('id');
        alert(id_el);
    }); 
```

和

```
$('#id_inpout').bind('change',function () {
        var id_el = $(this).attr('id');
        alert(id_el);
    }); 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-12T14:33:08.197

您也可以`trigger('change')`在为隐藏输入分配新值后使用：

```
$('#hidden_input').val('new_value').trigger('change'); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-25T10:18:17.587

正如在重复中所说的那样，正如您所看到的，在 javascript 中所做的更改不会触发`change`事件。

因为我在重复项中没有找到可接受的答案（即答案不涉及更改隐藏值的设置方式），并且**假设您确实需要它**（也就是说，当您更改隐藏值时，您无法调用您的函数输入 val)，这就是你可以做的：

```
function survey(selector, callback) {
   var input = $(selector);
   var oldvalue = input.val();
   setInterval(function(){
      if (input.val()!=oldvalue){
          oldvalue = input.val();
          callback();
      }
   }, 100);
}
survey('#id_inpout', function(){console.log('changed')}); 
```

但我最好使用更直接的解决方案（即在更改隐藏输入值时调用函数）。这个函数可能是你自己的一个简单的事件调度器（基本上是一个对象，它包装了一个函数列表，当它被调用时要调用它）。

**编辑：**现在是 2015 年，对于想知道的人来说，不，网络世界的最新进展都没有解决这个问题。变异观察者不观察输入的 value 属性（它不是真正的 DOM），ES6 对象观察者对那些原生对象也无能为力。

# javascript - 在这个例子中我的对象方法是如何被黑的？

> ID：12580763
> 
> 赞同：1
> 
> 时间：2012-09-25T10:09:40.290
> 
> 标签：javascript, coffeescript

大家好，我一直在从**Mark Ba​​tes Programming in coffeescript pdf**这本书中学习咖啡脚本，尽管两者似乎都有相同的实现，但我一直对 javascript 的行为大发雷霆

**示例-1**

```
class Employee
  constructor: (@attributes)->
    for key, value of @attributes
      @[key] = value
  printInfo: ->
    alert "Name: #{@name}"
emp1 = new Employee
  name: "Mark"
  printInfo: ->
    alert "Hacked ur code !"

emp1.printInfo() 
```

**对应的javascript**

```
var Emp, Employee, emp1, emp2;

Employee = (function() {

  function Employee(attributes) {
    var key, value, _ref;
    this.attributes = attributes;
    _ref = this.attributes;
    for (key in _ref) {
      value = _ref[key];
      this[key] = value;
    }
  }

  Employee.prototype.printInfo = function() {
    return alert("Name: " + this.name);
  };

  return Employee;

})();

emp1 = new Employee({
  name: "Mark",
  printInfo: function() {
    return alert("Hacked ur code !");
  }
});

emp1.printInfo(); 
```

```
这会提醒“你的代码被黑了！”
```

**示例 2**

```
class Emp
  constructor: (@attributes)->
  printInfo: ->
    alert "Name: #{@attributes.name}"
emp2 = new Emp
  name: "Mark"
  printInfo: ->
    alert "Hacked ur code"
emp2.printInfo() 
```

**对应的javascript**

```
Emp = (function() {

  function Emp(attributes) {
    this.attributes = attributes;
  }

  Emp.prototype.printInfo = function() {
    return alert("Name: " + this.attributes.name);
  };

  return Emp;

})();

emp2 = new Emp({
  name: "Mark",
  printInfo: function() {
    return alert("Hacked ur code");
  }
});

emp2.printInfo(); 
```

```
这会提醒“姓名：马克”
```

区别在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:39:09.010

在第一个示例中，传递给构造函数 ( ) 的对象的所有属性`attributes`都被添加到当前实例中（这就是循环所做的）。实例属性隐藏原型属性，这就是`printInfo`你传递给构造函数的函数被执行的原因。您可以使用访问原始方法`Employee.prototype.printInfo.call(emp1);`

在第二个示例中，不会发生这种情况。该`attributes`对象只存在于`attributes`实例的属性中。要获得不同的警报，您需要编写`emp2.attributes.printInfo();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:45:23.347

在第一个示例中，以下代码向`printInfo`对象添加了一个属性：

```
_ref = this.attributes;
for (key in _ref) {
  value = _ref[key];
  this[key] = value;
} 
```

密切注意`this[key] = value;`它向对象添加“直接属性”的位置，因此当 JS 引擎执行属性查找时，它会在对象本身中找到您的“printInfo”方法，因此它不会失败到原型链并调用您在那里定义的方法。现在，如果您使用`Object.hasOwnProperty`测试对象的`printInfo`属性，`emp1`您将看到它返回 true（这意味着它是直接属性对象，而不是从原型链继承的对象）。

参考`Object.hasOwnProperty()`： [hasOwnProperty 方法参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)

# c - 用什么代替 getpass（为什么 getpass 过时了）？

> ID：12580766
> 
> 赞同：2
> 
> 时间：2012-09-25T10:10:01.053
> 
> 标签：c, linux, passwords, obsolete

> **可能重复：**
> [在 C 中获取密码而不使用 getpass (3)？](https://stackoverflow.com/questions/1196418/getting-a-password-in-c-without-using-getpass-3)

```
man 3 getpass

DESCRIPTION
       This function is obsolete.  Do not use it. 
```

我一般不喜欢“过时”或“弃用”这个词，而附近没有“使用函数'X'”。

我应该使用什么简单的东西从 GNU/Linux 上的 C 中的 CUI 程序中的用户那里读取密码？密码用于加密/解密，但与 PAM、GPG、SSH 或任何其他大事无关。

# jquery - jQuery UI Slider 在选择或输入更改时更改百分比

> ID：12580767
> 
> 赞同：1
> 
> 时间：2012-09-25T10:10:04.797
> 
> 标签：jquery, jquery-ui, jquery-slider

I am having problems updating the ui jquery slider when a select is changed or input is changed - anyone have any ideas on the source to resolve this?

```
$('.application-progress').slider({
    range: "min",
    min: 0,
    max: 100,
    animate: true,
    slide: function(event, ui){
        $("#progress").html(ui.value+"%");
    }
});
$("#progress").html($(".application-progress").slider("value")+"%");

$('input').focusout(function(){
    var percentage = 0;
    $('input').each(function(){
        if($(this).val() != "")
            percentage += 10;
    });
    $("#progress").slider({value: percentage});
    $("#progress").html($(".application-progress").slider("value")+"%");
});​ 
```

我已添加到 jsfiddle：http: [//jsfiddle.net/Ykx5f/1/](http://jsfiddle.net/Ykx5f/1/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:16:01.197

我已经更新了你的[小提琴](http://jsfiddle.net/Ykx5f/4/)。附加到更改事件而不是焦点/模糊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:19:09.540

这是你想要实现的吗？

```
$("input, select").change(function() {
    var percentage = 0;
    $('input, select').each(function() {
        if ($.trim(this.value) != "") percentage += 10;
    });
    $(".application-progress").slider("value", percentage);

    $("#progress").html(percentage + "%");
});​ 
```

**演示：http:** [//jsfiddle.net/Ykx5f/9/](http://jsfiddle.net/Ykx5f/9/)

* * *

这是更新版本，它会根据输入字段的数量自动计算百分比：

```
$("input, select").change(function() {
    var fields = $("input, select");
    var percentage = 100 * fields.filter(function() {
        return $.trim(this.value) != "";
    }).length / fields.length;

    $(".application-progress").slider("value", percentage);
    $("#progress").html(percentage + "%");
});​ 
```

**演示：http:** [//jsfiddle.net/Ykx5f/11/](http://jsfiddle.net/Ykx5f/11/)

# android - phonegap 列表视图

> ID：12580768
> 
> 赞同：1
> 
> 时间：2012-09-25T10:10:06.157
> 
> 标签：android, cordova

我想通过使用`phonegap`.I 建立一个有吸引力的列表。我需要`listview`根据要求具有良好的性能，这只能通过`phonegap`但我不太了解，`phonegap`所以请给我一些指向教程和示例的链接`phonegap`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:25:27.910

您可以使用 jquery mobile 制作漂亮的列表视图。[有关更多信息，请参阅](http://jquerymobile.com/test/docs/lists/index.html "JQM Docs - 列表视图")Jquery Mobile 文档。要深入了解 phonegap[看这里](http://docs.phonegap.com/en/2.1.0/index.html "科尔多瓦文档")。希望这是您正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-08T17:48:12.337

有关最新的 phonegap 文档， [请参见此处](http://docs.phonegap.com/)

# user-interface - PyQt：如何在表格视图中集成日历小部件？

> ID：12580769
> 
> 赞同：0
> 
> 时间：2012-09-25T10:10:08.247
> 
> 标签：user-interface, date, pyqt

我有以下代码：

类 DateDelegate(QtGui.QStyledItemDelegate):

```
def createEditor(self, parent, option, index):
    return QtGui.QCalendarWidget(parent) 
```

(...)

类主窗口（QMainWindow）：

```
def __init__(self, parent=None): 
```

(...)

```
 self.liste_Produits = QtGui.QTableView()
    self.ProduitsModel = QtSql.QSqlTableModel(self)
    self.liste_Produits.setModel(self.ProduitsModel)
    self.liste_Produits.setItemDelegateForColumn(3,DateDelegate(self)) 
```

问题是日历小部件仍然包含在要编辑日期的单元格中。如何让日历小部件显示为一种模式对话框，例如在表格视图顶部而不是表格单元格内？

提前感谢您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:46:37.767

太简单了：在`createEditor`方法中，返回一个子类`QDateEdit`小部件，定义为：

```
class TableCalendarWidget(QtGui.QDateEdit):

    def __init__(self, parent = None):
        super(TableCalendarWidget, self).__init__(parent)
        self.setCalendarPopup(True) 
```

而已！

# wso2 - VFS 将文件写入不存在的文件夹

> ID：12580781
> 
> 赞同：2
> 
> 时间：2012-09-25T10:10:53.320
> 
> 标签：wso2, wso2esb, vfs, apache-commons-vfs

我将带有 vfs 的文件写入一个不存在的文件夹。我预计此文件夹会出现异常或创建。但是它们都没有发生，而是创建了一个缺少文件夹名称的文件（至少文件的内容是正确的）。

但是这种行为不是我想要的 - 应该创建一个丢失的文件夹或者应该抛出一个异常。这是我将文件发送到 FTP 的序列示例：

```
<property name="OUT_ONLY" value="true"/>    
<property name="transport.vfs.ReplyFileName" value="filename.txt" scope="transport"/>
    <send>
       <endpoint>
          <address uri="vfs:ftp://USER:PASSWORD@SERVER/myFolder"/>
       </endpoint>
    </send> 
```

当代理尝试写入文件并且文件夹“myFolder”不存在时，在 myFolder 中存在一个文件名为“myFolder”而不是 filename.txt 的文件，其内容正确。

顺便说一下，本地文件上也存在问题（不是特定于 FTP）

有没有人有这个问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:52:23.753

据我所知，WSO2 可以创建文件夹，但是文件名会被弄乱，例如，像这样的地址

```
<address uri="vfs:ftp://USER:PASSWORD@SERVER/myFolder1/myFolder2"/> 
```

假设 myFolder1 和 myFolder2 不存在。将创建 myFolder1 但不会创建 myFolder2，文件名将更改为具有正确内容的 myFolder2。

相反，您可以将文件夹名称添加到 ReplyFileName 属性，创建文件夹应该没有问题。

```
 <property name="transport.vfs.ReplyFileName" value="myFolder/filename.txt" scope="transport"/> 
```

# macos - 狮子中的 EXC_BAD_INSTRUCTION 但山狮中没有

> ID：12580784
> 
> 赞同：4
> 
> 时间：2012-09-25T10:11:03.583
> 
> 标签：macos, cocoa, osx-lion, osx-mountain-lion

在 Lion 中打开窗口时出现以下`EXC_BAD_INSTRUCTION`异常，但该应用程序在 Mountain Lion 中似乎运行良好。可能是什么问题？

```
Process:         MyApp [595]
Path:            /Users/USER/Desktop/MyApp.app/Contents/MacOS/MyApp
Identifier:      com.example.MyApp
Version:         ??? (0.4)
Code Type:       X86-64 (Native)
Parent Process:  launchd [146]

Date/Time:       2012-09-25 11:09:14.498 +0200
OS Version:      Mac OS X 10.7.3 (11D50d)
Report Version:  9
Sleep/Wake UUID: BA4DA964-60E8-4DC6-B63C-99435074A41C

Interval Since Last Report:          2901634 sec
Crashes Since Last Report:           367
Per-App Interval Since Last Report:  129923 sec
Per-App Crashes Since Last Report:   8
Anonymous UUID:                      BFF6E121-730D-4729-B07F-DA8550F46E14

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_INSTRUCTION (SIGILL)
Exception Codes: 0x0000000000000001, 0x0000000000000000

Application Specific Information:
objc[595]: garbage collection is OFF
objc[595]: cannot form weak reference to instance (0x7fc091666650) of class MyViewController
Performing @selector(startPressed:) from sender NSButton 0x7fc09167d210

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libobjc.A.dylib                0x00007fff91496768 _objc_trap + 4
1   libobjc.A.dylib                0x00007fff914968aa _objc_fatal + 195
2   libobjc.A.dylib                0x00007fff914a24ad weak_register_no_lock + 346
3   libobjc.A.dylib                0x00007fff914a2a59 objc_storeWeak + 360
4   com.apple.CoreFoundation       0x00007fff8f29c75d -[NSObject performSelector:withObject:] + 61
5   com.apple.AppKit               0x00007fff94bb5392 -[NSNibOutletConnector establishConnection] + 405
6   com.apple.AppKit               0x00007fff94bb2a89 -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 107 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T10:32:19.737

找到了。问题是我已经声明了一个委托`id`属性`weak`并为其分配了一个`NSVieWcontroller`。

显然，如果您想支持 Lion 并确保安全，则永远不应将`id`属性声明为`weak`. 从过渡到[ARC 发行说明](https://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/_index.html)：

> 注意：此外，在 OS X v10.7 中，您不能创建对 NSFontManager、NSFontPanel、NSImage、NSTableCellView、NSViewController、NSWindow 和 NSWindowController 实例的弱引用。此外，在 OS X v10.7 中，AV Foundation 框架中没有类支持弱引用。

解决方法：`assign`改用。

```
@property (nonatomic, assign) IBOutlet id<MyDelegateProtocol> delegate; 
```

# google-maps-api-3 - Google place Api Place详情

> ID：12580788
> 
> 赞同：1
> 
> 时间：2012-09-25T10:11:25.097
> 
> 标签：google-maps-api-3, google-places-api

嗨，下面的代码给出了地点搜索，但它只显示了我想要信息框中地点的完整详细信息的名称。下面的代码由 DR.Molle 提供

[http://jsfiddle.net/doktormolle/C5ZtK/](http://jsfiddle.net/doktormolle/C5ZtK/)

下面是检索放置的细节但无法使其工作的代码

```
 var request = { reference: place.reference };
    service.getDetails(request, function(details, status) {
      google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(details.name + "<br />" + details.formatted_address +"<br />" + details.website + "<br />" + details.rating + "<br />" + details.formatted_phone_number);
        infowindow.open(map, this);
      });
    });
  } 
```

我检查了开发人员页面，但无法从中获得太多帮助 任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:54:52.563

获取单击标记的地点详细信息的示例：

[http://www.geocodezip.com/v3_GoogleEx_place-search_starbucks3.html](http://www.geocodezip.com/v3_GoogleEx_place-search_starbucks3.html)

**代码片段：**

```
var geocoder = null;
var map;
var service;
var infowindow;
var gmarkers = [];
var bounds = null;

function initialize() {
  geocoder = new google.maps.Geocoder();
  var pyrmont = new google.maps.LatLng(-33.8665433, 151.1956316);

  map = new google.maps.Map(document.getElementById('map'), {
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: pyrmont,
    zoom: 15
  });
  geocoder.geocode({
    'address': "Seattle, WA"
  }, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      var point = results[0].geometry.location;
      bounds = results[0].geometry.viewport;
      var rectangle = new google.maps.Rectangle({
        bounds: bounds,
        fillColor: "#FF0000",
        fillOpacity: 0.4,
        strokeColor: "#0000FF",
        strokeWeigth: 2,
        strokeOpacity: 0.9,
        map: map
      });
      map.fitBounds(bounds);
      var request = {
        bounds: bounds,
        name: "starbucks",
        types: ['establishment']
      };
      infowindow = new google.maps.InfoWindow();
      service = new google.maps.places.PlacesService(map);
      service.search(request, callback);

    } else {
      alert("Geocode was not successful for the following reason: " + status);
    }
  });

}

function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      createMarker(results[i]);
    }
  }
}

function createMarker(place) {
  var placeLoc = place.geometry.location;
  var marker = new google.maps.Marker({
    map: map,
    position: place.geometry.location
  });
  var request = {
    reference: place.reference
  };
  google.maps.event.addListener(marker, 'click', function() {
    service.getDetails(request, function(place, status) {
      if (status == google.maps.places.PlacesServiceStatus.OK) {
        var contentStr = '<h5>' + place.name + '</h5><p>' + place.formatted_address;
        if (!!place.formatted_phone_number) contentStr += '<br>' + place.formatted_phone_number;
        if (!!place.website) contentStr += '<br><a target="_blank" href="' + place.website + '">' + place.website + '</a>';
        contentStr += '<br>' + place.types + '</p>';
        infowindow.setContent(contentStr);
        infowindow.open(map, marker);
      }
    });

  });
  gmarkers.push(marker);
  var side_bar_html = "<a href='javascript:google.maps.event.trigger(gmarkers[" + parseInt(gmarkers.length - 1) + "],\"click\");'>" + place.name + "</a><br>";
  document.getElementById('side_bar').innerHTML += side_bar_html;
}

function openInfoWindow(id) {
  return true;
}

google.maps.event.addDomListener(window, 'load', initialize);
```

```
#map {
  height: 400px;
  width: 600px;
  border: 1px solid #333;
  margin-top: 0.6em;
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?libraries=places"></script>
<table border="1">
  <tr>
    <td>
      <div id="map"></div>
    </td>
    <td>
      <div id="side_bar"></div>
    </td>
  </tr>
</table>
```

# iphone - 将 csv 文件导入 SQLite

> ID：12580800
> 
> 赞同：4
> 
> 时间：2012-09-25T10:12:08.167
> 
> 标签：iphone, objective-c, sqlite, csv, import

我在 SQLite 中有一个数据库，还有一个名为*xyz*的表，它是空的。我想将 csv 文件中的数据导入到该表中。

现在，当我尝试导入 csv 文件时，它要求我将其导入主表，但我想将数据导入我的*xyz*表。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:23:07.920

我完成了以下代码，您只需要暗示：-

```
 -(void)restore{
 @try {
      NSURL *url=[NSURL URLWithString:[NSString stringWithFormat:@"%@%@?userid=%@",kHOSTPATH,kCSVLIST,[[cntrAppDelegate setServerDetails] valueForKey:@"kUSERID"]]];
 NSMutableURLRequest *requestMutable = [[NSMutableURLRequest alloc] init];
 [requestMutable setURL:url];
 NSError *error = [[NSError alloc] init];
 NSHTTPURLResponse *response = nil;
 NSData *urlData=[NSURLConnection sendSynchronousRequest:requestMutable returningResponse:&response error:&error];
 NSLog(@"Response code: %d", [response statusCode]);
 if ([response statusCode] >=200 && [response statusCode] <300)
 {
  NSString *responseData = [[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
  NSLog(@"Response ==> %@", responseData);
  SBJsonParser *jsonParser = [SBJsonParser new];
  NSDictionary *jsonData = (NSDictionary *) [jsonParser objectWithString:responseData error:nil];
  NSLog(@"--------=========%@============-------------",jsonData);
  NSDictionary *dic = [jsonData objectForKey:@"Root"];
  NSLog(@"---------------------ROOT VALUE IS %@",dic);
  NSLog(@"----------------COUNT IS %d",[dic count]);
  for (int i = 0; i < [dic count]; i++) 
  {
       NSString *str = [[dic valueForKey:@"CSV_File"]objectAtIndex:i];
       NSLog(@"STR IS %@",str);
        [self.arrListOfCSV addObject:str];
   }
   if ([jsonData valueForKey:@"Root"] == 0)
   {

   }
    else
   {
   }
   } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T10:28:49.013

你可以这样做，

首先，您需要在捆绑包中添加您的 csv 文件。

然后你可以在你想从 csv 向数据库中添加数据的地方调用这个方法

```
-(void)loadCSVData{
NSString *path1=[[NSString alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"YOUR_CSV_FILENAME" ofType:@"csv"]  usedEncoding:&encoding error:nil];
NSArray *messArr=[path1 componentsSeparatedByString:@"\n"];
if(messArr)
{
for(int i=1;i<=[messArr count]-2;i++)
    {
NSMutableDictionary *d=[[NSMutableDictionary alloc] init];
 NSString *StrValue=[NSString stringWithFormat:@"%@",[messArr objectAtIndex:i]];
 StrValue=[StrValue stringByReplacingOccurrencesOfString:@"\"" withString:@""];
 StrValue=[StrValue stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
 //  Here give whatever saperator you need to saperate data
 NSArray *arr=[StrValue componentsSeparatedByString:@","];

 [d setValue:[arr objectAtIndex:0] forKey:@"YOUR_TABLE_FIELD_1"];
 [d setValue:[arr objectAtIndex:1] forKey:@"YOUR_TABLE_FIELD_2"];
 [d setValue:[arr objectAtIndex:2] forKey:@"YOUR_TABLE_FIELD_3"];

  //Here add logic to insert row in your database table
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T05:53:33.977

您最好在 Linux 中导入数据。并在进入SQLite后的磁盘操作系统中，输入

```
separator","; 
```

进口`choose your csv path`xyz。当您创建名为的表时`xyz`，该名称应与您的 csv 文件一致。

# ios - ARC中的这个dealloc有什么问题？

> ID：12580801
> 
> 赞同：3
> 
> 时间：2012-09-25T10:12:16.933
> 
> 标签：ios, cocoa-touch, memory-management, grand-central-dispatch, nsthread

我正在开发一个进行图像处理并显示结果图像的应用程序。我`UIScrollView`用来让用户滚动所有图像，因为图像不是标准的 jpg 或 png，加载需要时间。我使用 GCD 异步加载，当完成调度到主队列以显示时。片段如下：

```
- (void)loadImage:(NSString *)name
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        UIImage *image = [Reader loadImage:name];
        dispatch_sync(dispatch_get_main_queue(), ^{
            [self displayImage:image];
        });
    });
} 
```

Reader的`loadImage`方法是这样的：

```
+ (UIImage *)loadImage:(NSString *)name
{
   UInt8 *data = NULL;
   NSString *mfjPath = [TMP stringByAppendingPathComponent:name];
   NSData *mfjData = [NSData dataWithContentsOfFile:mfjPath];
   if(mfjData){
        data = malloc(sizeof(UInt8)*mfjData.length);
        [mfjData getBytes:data];
   }
   if(data){
        ResultHolder *result = [sDecoder decodeData:data withOffset:0];// static id<IDecoder> sDecoder; in Reader.m before @implementation Reader.
        return [result bitmap];
   }
    retun nil;
} 
```

`IDCoder`是一个协议，它是

```
@protocol IDecoder <NSObject>
- (ResultHolder *)decodeData:(UInt8 *) withOffset:(int)offset;
@end 
```

`ResultHolder`是一个加载简单图像和组合复杂图像的类。如下：

ResultHolder.h

```
typedef struct color24{
    UInt8 R;
    UInt8 G;
    UInt8 B;
} Color24;

@interface ResultHolder : NSObject
{
    unsigned long mWidth;
    unsigned long mHeight;
    UInt8 *mData;
    CGImageRef mBitmap;

    BOOL isMonoColor;
    Color24 mMonoColor;
}

+ (ResultHolder *)resultHolderWithCGImage:(CGImageRef)image;
+ (ResultHolder *)resultHolderWithData:(UInt8 *)data Width:(unsigned long)width andHeight:(unsigned long)height;
+ (ResultHolder *)resultHolderWithMonoColor:(Color24)monoColor withWidth:(unsigned long)width andHeight:(unsigned long)height;

- (ResultHolder *)initWithData:(UInt8 *)data Width:(unsigned long)width andHeight:(unsigned long) height;
- (ResultHolder *)initWithCGImage:(CGImageRef)image;
- (ResultHolder *)initWithMonoColor:(Color24)monoColor withWidth:(unsigned long)width andHeight:(unsigned long)height;

- (BOOL)isSuccess;
- (UIImage *)bitmap;
- (void)combineFixResultHolder:(ResultHolder *)child Rect:(CGRect)bounds Width:(unsigned long)width andHeight:(unsigned long)height;
- (void)combineResultHolder:(ResultHolder *)child Bounds:(CGRect)bounds Width:(unsigned long)width andHeight:(unsigned long)height;
@end 
```

ResultHolder.m

```
@implementation ResultHolder

@synthesize width = mWidth;
@synthesize height = mHeight;
@synthesize isMonoColor;
@synthesize monoColor = mMonoColor;

- (ResultHolder *)initWithData:(UInt8 *)data Width:(unsigned long)width andHeight:(unsigned long)height
{

    if (self = [super init]) {        
        mWidth = width;
        mHeight = height;
        mData = malloc(mWidth*mHeight*sizeof(Color24));
        memcpy(mData, data, mWidth*mHeight*sizeof(Color24));

        mBitmap = NULL;
    }

    return self;
}

- (ResultHolder *)initWithCGImage:(CGImageRef)image
{
    if (self = [super init]) {
        mBitmap = CGImageRetain(image);
        mWidth = CGImageGetWidth(image);
        mHeight = CGImageGetHeight(image);
    }
    return self;
}

- (ResultHolder *)initWithMonoColor:(Color24)monoColor withWidth:(unsigned long)width andHeight:(unsigned long)height
{
    if (self = [super init]) {
        mMonoColor = monoColor;

        isMonoColor = YES;
        mWidth = width;
        mHeight = height;
        mBitmap = NULL;
        mData = NULL;
    }

    return self;
}

+ (ResultHolder *)resultHolderWithCGImage:(CGImageRef)image
{
    ResultHolder *resultHolder = [[ResultHolder alloc] initWithCGImage:image];
    return resultHolder;
}

+ (ResultHolder *)resultHolderWithData:(UInt8 *)data Width:(unsigned long)width andHeight:(unsigned long)height
{
    ResultHolder *resultHolder = [[ResultHolder alloc] initWithData:data Width:width andHeight:height];
    return resultHolder;
}

+ (ResultHolder *)resultHolderWithMonoColor:(Color24)monoColor withWidth:(unsigned long)width andHeight:(unsigned long)height
{
    ResultHolder *resultHolder = [[ResultHolder alloc] initWithMonoColor:monoColor withWidth:width andHeight:height];
    return resultHolder;
}

- (BOOL)isSuccess
{
    if ([ReaderConfigures CodecDebug])
        NSLog(@"ResultHolder isSuccess");
    return (mData != NULL || isMonoColor || mBitmap != nil);
}

- (void)fillMonoColor
{

    if (isMonoColor) {
        if (mData) {
            free(mData);
        }
        mData = (UInt8 *)malloc(mWidth*mHeight*sizeof(Color24));

        for (int i = 0; i < mHeight; i++) {
            for (int j = 0; j < mWidth; j++) {
                memcpy(mData+(i*mWidth+j)*3, &mMonoColor, sizeof(Color24));
            }
        }
        isMonoColor = NO;
    }
}

- (void)extractBitmap  
{
    if (mBitmap) {

        CGDataProviderRef dataProvider = CGImageGetDataProvider(mBitmap);
        CFDataRef bitmapData = CGDataProviderCopyData(dataProvider);
        UInt8 * dataSource = (UInt8 *)CFDataGetBytePtr(bitmapData);

        size_t width = CGImageGetWidth(mBitmap);
        size_t height = CGImageGetHeight(mBitmap);
        if(mData)
            free(mData);
        mData = malloc(width*height*3);

        for (int i = 0; i < height; i++) {
            for (int j = 0; j < width; j++) {
                memcpy(mData+(i*width+j)*3, dataSource+(i*width+j)*4, sizeof(Color24));
            }
        }

        CFRelease(bitmapData);
        CGImageRelease(mBitmap);
        mBitmap = NULL;
    }
}

- (UInt8 *)getRawData
{

    if (mBitmap) {
        [self extractBitmap];
    }
    if (isMonoColor) {
        [self fillMonoColor];
    }

    return mData;
}

- (UIImage *)bitmap
{
    if (mBitmap) {
        UIImage *image = [[UIImage alloc] initWithCGImage:mBitmap];
        CGImageRelease(mBitmap);
        mBitmap = NULL;
        return image; 
    }
    if (isMonoColor) {
        [self fillMonoColor];
    }
    if (mData) {
        CGDataProviderRef dataProvider = CGDataProviderCreateWithData(NULL, mData, mWidth*mHeight*3, NULL);
        CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
        CGImageRef bitmap = CGImageCreate(mWidth, mHeight, 8, 24, mWidth*3, colorSpace, kCGBitmapByteOrderDefault, dataProvider, NULL, YES, kCGRenderingIntentDefault);
        CGColorSpaceRelease(colorSpace);
        CGDataProviderRelease(dataProvider);
        UIImage *image = [[UIImage alloc] initWithCGImage:bitmap];
        CGImageRelease(bitmap);

        return image;
    }

    return nil;
}

- (void)combineResultHolder:(ResultHolder *) child Bounds:(CGRect) bounds Width:(unsigned long)width andHeight:(unsigned long)height
{
    CGRect rect = CGRectMake(MAX(0, bounds.origin.x), MAX(0, bounds.origin.y),MIN(width - 1, bounds.origin.x + bounds.size.width), MIN(height - 1, bounds.origin.y + bounds.size.height));

    int w = MIN(rect.size.width + 1, child.width);
    int h = MIN(rect.size.height + 1, child.height);

    int dstPos = (height - 1 - (rect.origin.y + h - 1))*width;

    UInt8 *dataParent = [self getRawData];

    if (child.isMonoColor) {
        Color24 childMonoColor = child.monoColor;
        for (int i = 0; i < h; i++) {
            memcpy(dataParent+(dstPos+(int)rect.origin.x)*3, &childMonoColor, w*3);
            dstPos += width;
        }

    } else {
        UInt8 *dataChild = [child getRawData];
        if (dataChild != nil) {
            int srcPos = 0;
            for (int i = 0; i < h; i++) {
                memcpy(dataParent+dstPos*3+((int)rect.origin.x)*3, dataChild+srcPos*3, w*3);
                srcPos += child.width;
                dstPos += width;
            }
        }

    }

}

- (void)combineFixResultHolder:(ResultHolder *)child Rect:(CGRect)bounds Width:(unsigned long)width andHeight:(unsigned long)height
{
    CGRect rect = CGRectMake(bounds.origin.x, height-1-bounds.origin.y-bounds.size.height, bounds.origin.x+bounds.size.width, height-1-bounds.origin.y);

    [self combineResultHolder:child Bounds:rect Width:width andHeight:height];
}

- (void)dealloc
{
    if (mData) {
        free(mData);
        mData = NULL;
    }
    if (mBitmap) {
        CGImageRelease(mBitmap);
        mBitmap = NULL;
    }
}

@end 
```

对于简单的图像，例如仅 JPEG 图像， `+ (ResultHolder *)resultHolderWithCGImage:(CGImageRef)image;`并`- (UIImage *)bitmap;`调用方法。对于一些复杂的， 会`ResultHolder`提取`mBitmap`到`mData`，然后结合 sub得到图像。如果我在主线程中加载图像，这些方法效果很好，但是如果我使用 GCD 或在后台加载图像，则很容易崩溃，尤其是在后台加载复杂的图像时。当应用程序崩溃时，主线程状态为 CGSConvertBGR888toRGBA8888 方法错误，其他线程之一正在运行该方法，实际上是. 加载线程和主线程之间似乎存在内存冲突。`resultHolder``mData``NSThread``[ResultHolder dealloc]``free(mData)`

当应用程序崩溃时，错误是这样的： ![在此处输入图像描述](../Images/3916788e58e91285b15610bb53490ce7.png)

我为这个错误苦苦挣扎了好几天，但仍然找不到解决方法。我希望有人能帮助我。任何建议表示赞赏。

更新：我制作了一个演示项目[ReaderDemo](https://www.dropbox.com/s/psh08sijm4m4jd7/ReaderDemo.zip)来模拟这种情况。有兴趣的可以下载看看错误。这个项目有15张图片，5,7,14张图片会在滚动的时候导致crash，比其他的稍微复杂一些。但是如果您滚动缩略图滚动视图然后单击，它们都可以显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:01:45.487

你有很多问题，但让我们从我发现的第一个开始：

1.  测试不当

    ```
    if (index > [mPageNames count]) { 
    ```

    这需要 >= 否则你会崩溃。

2.  您正在 mainQueue 上调用 dispatch_sync，这似乎不是一个好的决定（但也许您有一个非常好的决定）-我将其更改为异步，似乎工作正常

3.  如果您在此项目中启用异常，它将真正帮助您。单击 Xcode 工具栏中的 Break Points 按钮。然后选择 BreakPoints 选项左侧窗格，从右侧数第二个。点击左下角的“+”图标并添加一个 All Exceptions 断点。现在，当您运行调试器时，会在出现问题的地方停止。

4.  我遇到了最后的崩溃，我会让你修复：

    ```
    2012-09-26 08:55:12.378 ReaderDemo[787:11303] MFJAtIndex index out of bounds,index:15,bounds:15
    2012-09-26 08:55:12.379 ReaderDemo[787:11303] *** Assertion failure in -[ImageScrollView showLoadingForMFJ:], /Volumes/Data/Users/dhoerl/Downloads/ReaderDemo/ReaderDemo/ImageScrollView.m:247 
    ```

这应该让你上路。

* * *

编辑：您的问题与`mData`内存管理有关。您正在尝试在代码中管理它的生命周期，但此管理与`CGImageDataProvider`尝试使用它的管理不同步。崩溃几乎可以肯定（这意味着我 99.99% 确信）是通过在您的类释放了 dealloc 中的内存之后尝试访问数据而`CGImageProvided`创建的副产品。`CGDataProviderCreateWithData`我与数据提供商有过类似的经历。

正确的解决方案是删除所有`free(data)`调用，或者至少删除大部分调用。鉴于您的代码的当前结构，您需要仔细考虑这一点 - 您可能希望用一个标志替换所有测试和 malloc/frees。最后，您要做的是将内存指针交给 ovdr 后`CGDataProviderCreateWithData`，您需要`NULL`退出`mData`并让数据提供者处理删除。

这样做的方法是`CGDataProviderCreateWithData`在过去的参数中提供一个函数指针：

```
CGDataProviderReleaseDataCallback
A callback function that releases data you supply to the function CGDataProviderCreateWithData.

typedef void (*CGDataProviderReleaseDataCallback) (
   void *info,
   const void *data,
   size_t size
); 
```

该函数需要做的只是调用`free(data);`. 因此，只要数据提供者使用完分配的内存，它就会释放它（您无需担心）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-25T10:28:47.737

如果您想在启用 ARC 的环境中的任何类中释放（）或释放您的资源，您必须在“构建阶段”中为您的类设置适当的标志。为此，请在 XCode 中选择您的项目文件，选择您的目标，转到“构建阶段”部分，找到您的类，然后`-fno-objc-arc`为该类添加标志。或者，也许是另一个原因，您正在调用一些 CoreGraphics 函数，该函数只能在另一个线程中从主线程调用。

# cocos2d-iphone - 即使我触摸 ccMenuItem 也调用 ccTouchesBegan

> ID：12580802
> 
> 赞同：2
> 
> 时间：2012-09-25T10:12:17.717
> 
> 标签：cocos2d-iphone

我有一个`CCMenu`，`CCMenuItems`我添加了一个`CCLayer`。当我单击 时`CCMenuItems`，我的`CCTouchesBegan`不会启动。

当我触摸菜单项时，如何调用此方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:21:02.283

CCMenu 注册为目标触摸委托并吞下菜单项上的触摸。您可以尝试创建 CCMenu 的子类并`registerWithTouchDispatcher`像这样覆盖它

```
-(void) registerWithTouchDispatcher
{
    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:kCCMenuTouchPriority swallowsTouches:NO];
} 
```

这应该可以按您的意愿工作，但可能会导致菜单行为出现其他问题。

# c++ - 使用 fwrite/fread 对矩阵进行二进制（反）序列化不起作用

> ID：12580804
> 
> 赞同：1
> 
> 时间：2012-09-25T10:12:24.440
> 
> 标签：c++, serialization, file-io, matrix, binary-data

我正在尝试将**双矩阵写入/读取**作为**二进制数据文件，**但读取时我没有得到正确的值。

我不确定这是否是使用矩阵的正确程序。

* * *

这是我用来编写它的代码：

```
void writeMatrixToFileBin(double **myMatrix, int rows, int colums){
        cout << "\nWritting matrix A to file as bin..\n";

        FILE * pFile;
        pFile = fopen ( matrixOutputName.c_str() , "wb" );
        fwrite (myMatrix , sizeof(double) , colums*rows , pFile );
        fclose (pFile);
    } 
```

这是我用来阅读它的代码：

```
double** loadMatrixBin(){
    double **A; //Our matrix

    cout << "\nLoading matrix A from file as bin..\n";

    //Initialize matrix array (too big to put on stack)
    A = new double*[nRows];
    for(int i=0; i<nRows; i++){
        A[i] = new double[nColumns];
    }

    FILE * pFile;

    pFile = fopen ( matrixFile.c_str() , "rb" );
    if (pFile==NULL){
        cout << "Error opening file for read matrix (BIN)";
    }

    // copy the file into the buffer:
    fread (A,sizeof(double),nRows*nColumns,pFile);

    // terminate
    fclose (pFile);

    return A;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:21:07.617

它不起作用，因为`myMatrix`它不是一个连续的内存区域，它是一个指针数组。您必须在循环中编写（和加载）：

```
void writeMatrixToFileBin(double **myMatrix, int rows, int colums){
    cout << "\nWritting matrix A to file as bin..\n";

    FILE * pFile;
    pFile = fopen ( matrixOutputName.c_str() , "wb" );

    for (int i = 0; i < rows; i++)
        fwrite (myMatrix[i] , sizeof(double) , colums , pFile );

    fclose (pFile);
} 
```

阅读时类似。

# javascript - Javascript 无法从模块实例化对象

> ID：12580810
> 
> 赞同：2
> 
> 时间：2012-09-25T10:12:38.043
> 
> 标签：javascript, class, module, closures

我对 javascript 模块和类感到困惑。我正在尝试创建我的类的对象，但它总是说“无法设置未定义的属性”或“对象没有方法”。有我的模块 2.js：

```
(function() {

var Game = function() {
    this.state = 'a';
};

Game.prototype.somefunc = function() {
    console.log(this.state);
};

})(); 
```

这是主要的应用程序代码：

```
var g = require('./2.js');

var mygame = new g.Game;
mygame.somefunc();

//undefined is not a function error 
```

或者

```
var g = require('./2.js');

var mygame = g.Game;
mygame.somefunc();

//cannot call method of undefined error 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:37:45.987

在您的第一个 Game 函数中，它仅存在于 (function(){})() 闭包中。它在自己的小宇宙中，在里面生和死。

你必须把它暴露在外面。

中的“var”

```
var Game = function(){} 
```

意味着它只定义在闭包的范围内。

你需要这样的东西：

```
var g = require('./2.js');

(function() {

    var Game = function() {
        this.state = 'a';
    };

    Game.prototype.somefunc = function() {
        console.log(this.state);
    };

    g.Game = Game;

})();

var mygame = new g.Game;
mygame.somefunc(); 
```

现在，您编写代码的确切方式将取决于 2.js 的设置方式。这只是为了说明关键线是

```
g.Game = Game; 
```

我们正在打开一个小虫洞，以便 Game 可以逃离其自我执行匿名函数闭包的缩影宇宙。

# php - 如何让 Behat 等待 AJAX 调用？

> ID：12580813
> 
> 赞同：10
> 
> 时间：2012-09-25T10:13:14.490
> 
> 标签：php, ajax, bdd, behat

场景：修改并保存对营销活动的不完整更改

```
Given I click on the Campaign section folder
And I press Save in the selected Campaign
Then I should see an error balloon informing the changes cannot be saved 
```

关键是最后一步中的这个“错误气球”是一个ajax调用，然后会根据操作的成功与否带来一个绿色或红色气球。目前我所做的是在“并且我按下保存...”之后我会做一个 sleep(3) 让它有时间让这个气球出现。这似乎不太聪明，因为您在浪费时间，而且有时可能需要或多或少的时间来处理此呼叫。

你们如何让你的行为测试等待 Ajax 完成，而不是让野兽入睡？

非常感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-25T10:40:54.067

This is done by waiting for your outstanding ajax calls to hit 0\. jQuery.active will check just that for you.

In your FeatureContext.php, you can do something like;

```
public function iShouldSeeAnErrorBalloon($title)
{
    $time = 5000; // time should be in milliseconds
    $this->getSession()->wait($time, '(0 === jQuery.active)');
    // asserts below
} 
```

And do make sure you use a Mink Driver that runs javascript and ajax (the default does not).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-28T04:36:14.983

我通过等待 DOM 因 Ajax 调用而改变来做到这一点。我创建了 DocumentElement 的子类，将其称为 AsyncDocumentElement 并覆盖 findAll 方法：

```
public function findAll($selector, $locator, $waitms=5000)
{
    $xpath = $this->getSession()->getSelectorsHandler()->selectorToXpath($selector, $locator);

    // add parent xpath before element selector
    if (0 === strpos($xpath, '/')) {
        $xpath = $this->getXpath().$xpath;
    } else {
        $xpath = $this->getXpath().'/'.$xpath;
    }

    $page = $this->getSession()->getPage();

    // my code to wait until the xpath expression provides an element
    if ($waitms && !($this->getSession()->getDriver() instanceof \Behat\Symfony2Extension\Driver\KernelDriver)) {
        $templ = 'document.evaluate("%s", document, null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null ).snapshotLength > 0;';

        $waitJs = sprintf($templ, $xpath);

        $this->getSession()->wait($waitms, $waitJs);
    }

    return $this->getSession()->getDriver()->find($xpath);
} 
```

然后在 \Behat\Mink\Session 我更改了构造函数以使用该类。

```
public function __construct(DriverInterface $driver, SelectorsHandler $selectorsHandler = null)
{
    $driver->setSession($this);

    if (null === $selectorsHandler) {
        $selectorsHandler = new SelectorsHandler();
    }

    $this->driver           = $driver;
    $this->page             = new AsyncDocumentElement($this);
    $this->selectorsHandler = $selectorsHandler;
} 
```

一旦我这样做了，我发现我的 AngularJS 测试工作正常。到目前为止，我只在 Firefox 中进行了测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-12T12:18:00.647

如果您使用 Prototypejs（例如 Magento），等效代码为：

```
public function iShouldSeeAnErrorBalloon($title)
{
    $this->getSession()->wait($duration, '(0 === Ajax.activeRequestCount)');
    // asserts below
} 
```

# c# - 如何将组添加到多个内置功能区选项卡 (vsto)？

> ID：12580814
> 
> 赞同：8
> 
> 时间：2012-09-25T10:13:22.850
> 
> 标签：c#, outlook, vsto, ribbon, outlook-addin

这是 VS2010 + Office 2010 插件。我想要的只是将一个按钮（*或按钮组*）添加到多个内置选项卡。例如，我的按钮应该在**New Mail Message Ribbon**和**New Appointment Ribbon**中都可用。我尝试添加一个新选项卡（*在 Visual Designer 中*），但这似乎不起作用。按钮组出现在“新邮件消息”选项卡上，但不在“约会”选项卡上。顺便说一句，我正在使用以下 ID：`TabNewMailMessage`和`TabAppointment`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T11:15:07.437

对于其他人来说，我能够在约会和新邮件消息选项卡上看到我的组的唯一方法是为每个内置选项卡添加一个功能区，然后复制/粘贴所有 UI 和代码从一根丝带到另一根丝带。确保为每个内置选项卡选择正确的 RibbonType（功能区的属性）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-02-14T13:49:38.770

指定答案现已过时！

1.  在 OfficeRibbon 对象上，根据需要为尽可能多的情况设置 RibbonType（例如 Microsoft.Outlook.Explorer 和 Microsoft.Outlook.Mail.Read）。
2.  添加第一个选项卡并设置 ControlId.OfficeId（例如 TabMail）
3.  添加另一个选项卡并设置 ControlId.OfficeId（例如 TabReadMessage）
4.  在每个选项卡中添加一个组和一个按钮，并将 Button.Click 事件设置为指向相同的 OnClick 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T16:42:14.977

与上面的答案类似，但不使用 XML，您可以让组在两个不同的位置添加第二个选项卡。

在功能区设计器中，将第二个选项卡添加到功能区，并将 ControlID 更改为您希望查看组的第二个位置。然后右键单击原始选项卡中的组，然后单击复制。单击返回新选项卡并将组粘贴到那里。它将复制组中已有的任何内容。但是，您必须重新添加事件。但对我来说，我只是重新使用了已经创建的事件并且它工作得很好。干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T10:53:56.813

我没有 Outlook，但我在 Word/Excel/PPT 中使用了以下内容，所以我希望它也可以在 Outlook 中使用（未经测试！）。

尝试添加一个功能区 (XML) 项，然后添加两个选项卡，其中的按钮看起来相同，调用相同的代码但具有不同的 ID。

XML:

```
<tab idMso="TabNewMailMessage">
    <group id="MyGroup1" label="My Group1">
        <button id="myButton1" label="Button 1" size="large"  onAction="ButtonOnAction" />
    </group>
</tab>
<tab idMso="TabAppointment">
    <group id="MyGroup2" label="My Group2">
        <button id="myButton2" label="Button 2" size="large"  onAction="ButtonOnAction" />
    </group>
</tab> 
```

C＃：

```
 public void ButtonOnAction(IRibbonControl control)
    {
        switch (control.Id)
        {
            case "myButton1":
            case "myButton2":
                // do something
                Console.Out.WriteLine("Button ID: {0}", control.Id);
                break;
        }
    } 
```

# java - 在 java swing 中创建可扩展的方格边距

> ID：12580815
> 
> 赞同：3
> 
> 时间：2012-09-25T10:13:34.703
> 
> 标签：java, swing, graph, jpanel, paint

我需要编写必须绘制图形的程序..我使用带有swing的java（如果您认为swing不是很好的选择，请提供其他工具）..我的老师说我必须在方格边上绘制图形而我没有'不知道在这种情况下有什么用..如果有人这样做，请帮助我..如何制作这个方格边距（我的老师对我说这个方格边距必须是可扩展的）

**更新**

哦，我忘了说我自己画图（设置2个点，然后我的函数必须在这些点之间画线）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:51:34.707

作为参考，[`MyPanel`](https://stackoverflow.com/a/3518047/230513)在其背景中绘制一个灰色的棋盘；[`SineTest`](https://stackoverflow.com/a/9373195/230513)显示如何使用笛卡尔坐标进行绘图。

# php - PHP Switch 传值多用

> ID：12580816
> 
> 赞同：0
> 
> 时间：2012-09-25T10:13:35.920
> 
> 标签：php, css, wordpress

我想用 switch() 编写一个函数，我可以在其中传递多个对象的选项值。

**代码**

```
<?php
function font_switch(){

    if ($option == get_option('fm_font_family')) {
        get_option('fm_font_family') ;
    } else if ($option == get_option('fm_font_family_text')) {
        get_option('fm_font_family_text') ;
    }

    switch($option){

        case 'Choose font family':
            return null;
            break;

        case 'Georgia, serif':
            return 'Georgia, serif';
            break;

        case 'Palatino Linotype, Book Antiqua, Palatino, serif':
            return 'Palatino Linotype, Book Antiqua, Palatino, serif';
            break;

        case 'Times New Roman, Times, serif':
            return 'Times New Roman, Times, serif';
            break;

        case 'Arial, Helvetica, sans-serif':  
            return 'Arial, Helvetica, sans-serif'; 
            break;

        case 'Comic Sans MS, cursive, sans-serif':
            return 'Comic Sans MS, cursive, sans-serif';
            break;

        case 'Impact, Charcoal, sans-serif':
            return 'Impact, Charcoal, sans-serif';
            break;

        case 'Lucida Sans Unicode, Lucida Grande, sans-serif':
            return 'Lucida Sans Unicode, Lucida Grande, sans-serif';
            break;

        case 'Tahoma, Geneva, sans-serif':
            return 'Tahoma, Geneva, sans-serif';
            break;

        case 'Verdana, Geneva, sans-serif':
            return 'Verdana, Geneva, sans-serif';
            break;

        default:
            return '';
            break;        
    }
}
?> 
```

**CSS**

```
 body{
     font-family: <?php echo font_switch(get_option('fm_font_family')); ?>;
    }
    p{
     font-family: <?php echo font_switch(get_option('fm_font_family_text')); ?>;
    } 
```

所以在上面的函数中，我想使用 get_option('my option id') 传递选项，并想将它用于 css，因为我使用的是相同的字体系列

如果您有其他更好的选择，我也可以选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:18:39.993

我会重写这个，因为你几乎总是返回相同的值：

```
<?php
function font_switch($option)
{
    switch($option){
        case 'Choose font family':
            return null;

        case 'Georgia, serif':
        case 'Palatino Linotype, Book Antiqua, Palatino, serif':
        case 'Times New Roman, Times, serif':
        case 'Arial, Helvetica, sans-serif':  
        case 'Comic Sans MS, cursive, sans-serif':
        case 'Impact, Charcoal, sans-serif':
        case 'Lucida Sans Unicode, Lucida Grande, sans-serif':
        case 'Tahoma, Geneva, sans-serif':
        case 'Verdana, Geneva, sans-serif':
            return $option;

        default:
            return '';
    }
} 
```

# c++ - 使用 C++ 的 1 到 10 之间的随机数

> ID：12580820
> 
> 赞同：3
> 
> 时间：2012-09-25T10:14:11.267
> 
> 标签：c++, random

此代码应该生成 1 到 10 之间的随机数，但它每次都返回 1。

```
int random_integer;
int lowest=1, highest=10;
int range=(highest-lowest)+1;
random_integer = lowest + int(range*rand()/(RAND_MAX + 1.0));
cout << random_integer << endl; 
```

代码有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T10:18:16.510

如果你想要一个介于`lowest`和之间的随机整数`highest`，你最好写

```
random_integer = lowest + rand() % range 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-25T10:18:24.363

你会在这里溢出 - `range*rand()`。

只需使用普通人使用的东西：`rand() % 10 + 1`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-25T10:19:22.290

```
range * rand() / (RAND_MAX + 1.0) 
```

不按你的想法做。介绍一些括号：

```
range * (rand() / (RAND_MAX + 1.0)) 
```

（请注意，这种方法会产生[偏态分布](https://stackoverflow.com/q/10219355/166749)。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-25T11:18:19.477

我同意上面提供的所有解决方案。
现在要在每次运行程序时获得不同的序列，您可以使用**srand()**函数，它将为 **rand()**函数提供种子，如下所示：-

```
srand(time(NULL))  
random_integer = lowest + rand() % range 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T13:25:54.393

这两个一直是我节目的一部分

```
float randf(float lo, float hi) {
    float random = ((float) rand()) / (float) RAND_MAX;
    float diff = hi - lo;
    float r = random * diff;
    return lo + r;
}
int randi(int lo, int hi)
{
    int n = hi - lo + 1;
    int i = rand() % n;
    if (i < 0) i = -i;
    return lo + i;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T10:26:05.487

您似乎假设`rand()`返回一个介于 0 和 1 之间的值。

这是不正确的，它返回的值介于 0 和`RAND_MAX`.

# javascript - 如何使用 jQuery.cookies 和自定义 jQuery 选项卡代码记住活动选项卡？

> ID：12580821
> 
> 赞同：0
> 
> 时间：2012-09-25T10:14:12.503
> 
> 标签：javascript, jquery, cookies

我编写了这段代码来制作快速标签。我需要一种在刷新页面后记住活动标签的方法。

这是我的基本 HTML 代码：

```
<ul class="dashboard_tabs">
    <li><a href="#" rel="tab1">Tab 1</a></li>
    <li><a href="#" rel="tab2">Tab 2</a></li>
    <li><a href="#" rel="tab3">Tab 3</a></li>
    <li><a href="#" rel="tab4">Tab 4</a></li>
</ul>

<div class="dashboard_body" id="tab1">

</div>

<div class="dashboard_body" id="tab2">

</div>

<div class="dashboard_body" id="tab3">

</div>

<div class="dashboard_body" id="tab4">

</div> 
```

我使用 rel 关系通过以下代码显示正确的选项卡：

```
jQuery(document).ready(function(){
    jQuery('.dashboard_body').css({display: 'none'});
    jQuery('.dashboard_tabs a:first').addClass('current');
    var rel = jQuery('.dashboard_tabs a.current').attr('rel');
    jQuery('#'+rel).show();

    jQuery('.dashboard_tabs a').click(function(){
        jQuery('.dashboard_tabs a').removeClass('current');
        jQuery('.dashboard_body').hide();
        jQuery(this).addClass('current');
        var rel = jQuery(this).attr('rel');
        jQuery('#'+rel).show();
    });
}); 
```

如何使用 jQuery cookie 来记住活动选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:44:40.880

只需在您的点击功能中创建/更新 cookie

```
$.cookie('active_tab', rel); 
```

然后，您可以轻松地从您准备好的函数中的 cookie 中读取活动选项卡，并使用 CSS 或类似方法做任何您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:45:08.447

看看这个问题：[How to set/unset cookie with jQuery?](https://stackoverflow.com/questions/1458724/how-to-set-unset-cookie-with-jquery) . 您可以使用`jquery-cookie`插件来轻松操作 cookie。从cookie 中`document ready`读取并设置正确的选项卡。只保存`rel`在cookie 中。`click event``rel`

# android - 我想为所有活动保留一个操作栏

> ID：12580829
> 
> 赞同：2
> 
> 时间：2012-09-25T10:14:40.210
> 
> 标签：android, android-actionbar

我有一个带有标题和几个按钮的操作栏。我想为所有活动显示此操作栏。那么，我如何有效地使用它，而不是为所有屏幕包含此操作栏的布局代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T10:19:01.563

创建一个 BaseActivity（它扩展了 Activity），您可以在其中只编写一次此代码。然后您的代码的所有其他活动都必须扩展此 BaseActivity。同样在您的 xml 布局中，为此操作栏创建一个单独的布局文件，然后使用 include 标记重用此文件。希望这可以帮助。

# android - 区分标题和描述

> ID：12580830
> 
> 赞同：0
> 
> 时间：2012-09-25T10:14:41.083
> 
> 标签：android, android-listview, textview

![在此处输入图像描述](../Images/ee7f8bdc681bdc06593a4610b5c400c0.png)

我有一个列表视图。我想区分标题和描述。我想显示标题一种颜色，而描述是另一种颜色。我怎样才能做到这一点？我有以下用于创建列表视图的代码。

活动：

```
public class Lisearch extends Activity {
    private ListView lv;
    private EditText et;
    private String listview_array[] = {"ONE:\n one is the first letter"};

private ArrayList<String> array_sort= new ArrayList<String>();
    int textlength=0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_lisearch);
        TextView tv=(TextView)findViewById(R.id.text);
        lv = (ListView) findViewById(R.id.ListView01);
        et = (EditText) findViewById(R.id.EditText01);
        //lv.setAdapter(new ArrayAdapter<String>(this,
        //R.layout.activity_lisearch, listview_array));

        et.addTextChangedListener(new TextWatcher()
        {
        public void afterTextChanged(Editable s)
        {
                                                                        // Abstract Method of TextWatcher Interface.
        }
        public void beforeTextChanged(CharSequence s,
        int start, int count, int after)
        {
        // Abstract Method of TextWatcher Interface.
        }
        public void onTextChanged(CharSequence s,
        int start, int before, int count)
        {
        textlength = et.getText().length();
        array_sort.clear();
        for (int i = 0; i < listview_array.length; i++)
        {
        if (textlength <= listview_array[i].length())
        {
        if(et.getText().toString().equalsIgnoreCase(
        (String)
        listview_array[i].subSequence(0,
        textlength)))
        {
                    array_sort.add(listview_array[i]);
                   }
                   }
        }
        lv.setAdapter(new ArrayAdapter<String>
        (Lisearch.this,
        R.layout.list,R.id.text, array_sort)); 
```

搜索.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:id="@+id/LinearLayout01"
                android:layout_width="fill_parent"
android:layout_height="fill_parent"
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:orientation="vertical"
                android:background="@drawable/aa"                
                >
<EditText android:id="@+id/EditText01"
android:layout_height="wrap_content"
android:layout_width="fill_parent"
android:hint="Search"
android:padding="5dp">
</EditText>

<ListView android:id="@+id/ListView01"
android:layout_width="fill_parent"
android:layout_height="wrap_content" 
     android:listSelector="@drawable/list_selector"
     android:layout_weight="1"
     >
</ListView>
</LinearLayout> 
```

列表.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center_vertical"
    android:paddingLeft="6dp"
    android:textSize="15sp"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:textColor="#FF4444"
    android:textStyle="bold"
    android:layout_marginLeft="10dp"

/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:18:12.037

在 list.xml 中为标题和描述使用单独的文本视图。并为文本使用所需的颜色。

```
public class CustomAdapter extends BaseAdapter {

    private Context mContext;
        String[] array =null;

    public CustomAdapter(Context c,String[] array) {
        this.mContext = c;
        this.array= array;

    }

    public int getCount() {
        return count;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.list, null);

        TextView textView1 = (TextView) view.findViewById(R.id.textView1);
                TextView textView2 = (TextView) view.findViewById(R.id.textView2);

        return view;
    }

} 
```

将此适配器用于您的列表视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:19:48.263

在您的 list.xml 中，有 2 个 TextView，一个用于标题，一个用于描述，类似于下面的一个

```
<TextView android:id="@+id/title" android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:text="@string/titleText"
    android:textSize="25dp" />
<TextView android:id="@+id/description"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:textSize="15dp"
    android:layout_below="@id/title" android:textColor="#00FF00" /> 
```

这样你就可以有不同的颜色，添加你的适配器如下

```
SimpleAdapter adapter = new SimpleAdapter(this,list,R.layout.list,new String[] {"Title","Description"},new int[] {R.id.title,R.id.description});
setListAdapter(adapter); 
```

# mysql - MySQL Master(Active) - Master(Active) 复制

> ID：12580834
> 
> 赞同：1
> 
> 时间：2012-09-25T10:15:15.437
> 
> 标签：mysql, database, session, database-replication, master-slave

我打算在我的项目中使用 MySQL 的 Master-Master (Active-Active) 架构。在我的项目中，我有两个活动站点和灾难站点。在活动站点上，我们确实使用了 2 个 MySQL DB 服务器 - 一个是 Master Active，另一个是 Master Passive，它将数据复制到灾难站点。Master Active 也复制到 Master 被动。所有三个应用服务器都只在主服务器上写入。

现在，我打算将 Master Passive 用作 Master Active。现在，活动站点将有两个活动主站，一个应用服务器将写入一个活动主站，另外两个应用服务器将写入第二个活动主站。

如果您能启发使用此架构的利弊，那就太好了。可能会出现什么问题，有什么补救措施？

仅供参考.. 会话粘性也用于从 Web 服务器到应用程序服务器。

谢谢，

普拉尚古普塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:27:34.890

你想达到什么目的？提高可用性？表现？

您打算如何管理从应用服务器到数据库实例的连接？浮动IP地址？静态映射？故障转移呢？你有什么监控来衡量主节点的可用性？复制滞后？

# jsf-2 - 如何在 JSF 导航中调用 java 函数

> ID：12580836
> 
> 赞同：0
> 
> 时间：2012-09-25T10:15:20.850
> 
> 标签：jsf-2

```
<navigation-case>
<from-action>#{tabViewController.openscreen}</from-action>
<from-outcome>Group Master</from-outcome>
<to-view-id>#{tabViewController.openscreen1}</to-view-id>
</navigation-case> 
```

在中，我想调用一个 java 函数，因为我需要在选项卡控制器中打开一个屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:15:01.867

我猜您来自具有此功能的框架？就像来自接缝的页面流一样。

JSF-2.0 没有这个 afaik。但是，如果我理解正确，您希望在加载视图时执行一个方法。

这通常通过以下任一方式完成：

```
<f:event listener="#{user.isAdmin}" type="preRenderView" /> 
```

完整示例： [http ://www.mkyong.com/jsf2/jsf-2-prerenderviewevent-example/](http://www.mkyong.com/jsf2/jsf-2-prerenderviewevent-example/)

或者通过使用 JSR-250 和 annotation `@PostConstruct`。

用它注释的方法将在注入后执行，它对于您的用例来说是一个非常有用的注释，并且在大多数情况下它是最佳实践。

祝你好运。

# symfony - 服务的可选参数依赖项

> ID：12580839
> 
> 赞同：14
> 
> 时间：2012-09-25T10:15:35.407
> 
> 标签：symfony

我知道我可以为服务添加可选的服务依赖项。语法是

```
arguments: [@?my_mailer] 
```

但是如何为服务添加可选**参数**依赖项？

```
arguments: [%my_parameter%] 
```

我试过了

```
arguments: [%?my_parameter%]
arguments: [?%my_parameter%] 
```

但是它们都不起作用，这个功能是在 sf2 中实现的吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-10-14T22:56:44.893

在 Symfony 2.4 中，您可以为此使用表达式：

> 参数：["@=container.hasParameter('some_param') ? 参数('some_param') : 'default_value'"]

更多信息请访问[http://symfony.com/doc/current/book/service_container.html#using-the-expression-language](http://symfony.com/doc/current/book/service_container.html#using-the-expression-language)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-28T01:53:19.120

我认为如果你不传递/设置参数，Symfony 会抱怨服务依赖。您希望使参数成为可选参数，这样就不需要始终在 config.yml 文件中进行设置。并且您想在设置时使用该参数。

有我的解决方案：

```
# src/Acme/HelloBundle/Resources/config/services.yml
parameters:
    my_parameter:

services:
    my_mailer:
        class:        "%my_mailer.class%"
        arguments:    ["%my_parameter%"] 
```

接着

```
# you-bundle-dir/DependencyInjection/Configuration.php

public function getConfigTreeBuilder()
{
    $treeBuilder = new TreeBuilder();

    $rootNode = $treeBuilder->root('you_bundle_ns');

    // This is for wkhtmltopdf configuration
    $rootNode
            ->children()
            ->scalarNode('my_parameter')->defaultNull()->end()
            ->end();

    // Here you should define the parameters that are allowed to
    // configure your bundle. See the documentation linked above for
    // more information on that topic.

    return $treeBuilder;
} 
```

接着

```
# you-bundle-dir/DependencyInjection/YourBundleExtension.php

public function load(array $configs, ContainerBuilder $container)
{
    $configuration = new Configuration();
    $config = $this->processConfiguration($configuration, $configs);

    $loader = new Loader\XmlFileLoader($container, new FileLocator(__DIR__ . '/../Resources/config'));
    $loader->load('services.xml');

    $container->setParameter(
        'you_bundle_ns.your_parameter',
        isset($$config['you_bundle_ns']['your_parameter'])?$$config['you_bundle_ns']['your_parameter']:null
    );
} 
```

您可以通过为 '%parameter%' 提供默认值来使参数可选

如果您有更好的选择，请告诉我。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-30T22:30:33.147

您是否尝试为参数设置默认值？像这样：

```
namespace Acme\FooBundle\Services;

class BarService
{
    public function __construct($param = null)
    {
        // Your login
    }
} 
```

并且不注射任何东西。

# iphone - 如何在当前日期停止结果？

> ID：12580841
> 
> 赞同：0
> 
> 时间：2012-09-25T10:15:40.530
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有问题，当我打开应用程序时，我可以看到最新结果，当我向左滑动 uiview 时，我可以看到以前的结果，我面临的问题是我想向右滑动以再次获得最新结果。

这是向左滑动的代码

```
-(void)swipeLeft
{

    NSLog(@"Mag Date:%@",magCurDate);
    NSDate *tempDate;

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"dd/MM/yyyy"];
    tempDate = [formatter dateFromString:magCurDate];

    NSLog(@"temp Date:%@",tempDate);

    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *dateComponents = [[NSDateComponents alloc] init];
    [dateComponents setDay:-1];
    [dateComponents setHour:8];
    NSDate *targetDate = [gregorian dateByAddingComponents:dateComponents toDate:tempDate  options:0];

    NSLog(@"target Date:%@",targetDate);

    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"ddMMYYYY"];
    NSString *sDate = [df stringFromDate:targetDate];

    NSLog(@"sDate Date:%@",sDate);

    [self LoadMagnumResult:sDate];

} 
```

这是我向右滑动的代码，但我无法停止最新的结果，我希望最后一次滑动是最新的结果。

```
-(void)swipeRight
{

    NSLog(@"Mag Date:%@",magCurDate);
    NSDate *tempDate;

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"dd/MM/yyyy"];
    tempDate = [formatter dateFromString:magCurDate];

    NSLog(@"temp Date:%@",tempDate);

    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *dateComponents = [[NSDateComponents alloc] init];
    [dateComponents setDay:+1];
    [dateComponents setHour:8];
    NSDate *targetDate = [gregorian dateByAddingComponents:dateComponents toDate:tempDate  options:0];

    NSLog(@"target Date:%@",targetDate);

    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"ddMMYYYY"];
    NSString *sDate = [df stringFromDate:targetDate];

    NSLog(@"sDate Date:%@",sDate);

    [self LoadMagnumResult:sDate];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:47:47.860

我假设最新的结果不可能在将来。换句话说，“最新结果”的最大日期是今天。我还假设向左滑动应该增加信息直到今天。如果你想左滑跳转到今天，那么代码就更简单了。让我知道这是否是你的意思。因为我没有你的应用程序，所以我只创建了一个内部变量来存储一个名为 testDate 的日期。我还在屏幕上放了一个标签，并将其命名为 outputLabel。您可以修改代码以满足您的需求。

最后，我更改了方法，使右滑及时回退，左滑及时前进。用户已经习惯于将向右滑动视为向后滑动（回到 Web 浏览器等）。请记住，向右滑动从左侧开始并在右侧结束。

首先，我将构建一个辅助方法来将日期转换为字符串：

```
- (NSString*)stringFromDate:(NSDate*)date
{
    //Helper method to return a string from a date
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"dd/MM/yy"];
    return [formatter stringFromDate:date];
} 
```

这是我的右滑方法。请注意我如何使用时间间隔来增加日期。这可以从您的方法中节省几行代码。除非我错了，否则您似乎正在尝试将每次滑动的日期增加 24 小时。我还在这两种方法之前创建了一个常量，因此如果您想更改每次滑动递增的天数，则不必搜索代码。

```
#define kDaysPerSwipe 1

- (void)swipeRight:(UISwipeGestureRecognizer*)swipeRight
{
    NSLog(@"right swipe received");

    //Number of days to add
    int numberOfDaysToAdd = kDaysPerSwipe;

    //Generate a new date
    NSDate *newDate = [self.testDate dateByAddingTimeInterval:-(60*60*24*numberOfDaysToAdd)];

    //Store the new date
    self.testDate = newDate;

    //Output the new date
    self.outputLabel.text = [self stringFromDate:self.testDate];
} 
```

这是我的左滑方法。请注意我如何将 newDate 与今天进行比较，然后在继续之前只存储两者的 EARLIER 日期。

```
- (void)swipeLeft:(UISwipeGestureRecognizer*)swipeLeft
{
    NSLog(@"left swipe received");

    //Number of days to add
    int numberOfDaysToAdd = kDaysPerSwipe;

    //Generate a new date
    NSDate *newDate = [self.testDate dateByAddingTimeInterval:(60*60*24*numberOfDaysToAdd)];

    NSLog(@"newDate: %@", [self stringFromDate:newDate]);

    //Compare newDate to today.  Return whichever is earlier.
    newDate = [[NSDate date] earlierDate:newDate];

    self.testDate = newDate;

    //Show the output on the screen
    self.outputLabel.text = [self stringFromDate:self.testDate];
} 
```

# asp.net - 当 IIS 上的 cshtml 页面发生变化时会发生什么？

> ID：12580842
> 
> 赞同：1
> 
> 时间：2012-09-25T10:15:43.870
> 
> 标签：asp.net, asp.net-mvc-3, razorgenerator

更具体地说，当`cshtml`需要 a 时，会发生什么？我需要构建一个只有 ashx 和模板引擎的应用程序，没有**MVC**的东西，简单的渲染，但我不想失去动态更改`cshtml`文件的能力。所以我必须以某种方式管理它们的重新编译，可能不需要回收应用程序服务器加载和卸载`AppDomains`。

在第一个请求中，我可以构建页面并将其加载到某种缓存中（例如codeplex 上的**RazorEngine**），然后重用它。当页面更改时，我应该更改页面，就是这样。

但据我了解`assembly`，每个页面都会构建一个新的，因此如果频繁更改（这可能发生在我的环境中），将会加载大量程序集。

问题是，

**它如何适用于标准 MVC？使用 CodeDom，还是直接添加 IL，无需创建新程序集？**

我现在想到的一件事是，在构建之后`assembly`，可以对其进行反编译，然后`IL`直接加载到应用程序上，这是有道理的

如果不清楚，请要求进一步澄清！（*欢迎对这个 Stackoverflow 新手提出任何建议*）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T11:22:25.510

好的，首先加载 cshtml 文件，然后使用标准 CSharp/VbCodeCompiler 将文件编译到自己的程序集中，据我所知，不存在代码 dom...

# c - C中的堆栈帧

> ID：12580843
> 
> 赞同：1
> 
> 时间：2012-09-25T10:15:53.397
> 
> 标签：c

如果我为 a 分配内存`char a[256]`，请将每个元素初始化为不同的值并将其传递给某个函数：

```
int subFunc(a); 
```

堆栈帧`subFunc`看起来如何？

堆栈帧是否包含其中的所有 256 个字节或仅包含指向`a`（4 个字节）地址的指针。

如果是指针，那么它如何访问内部的数据`subFunc`或者这些数据在哪里可用`subFunc`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T10:18:58.957

C 语言不需要基于堆栈的机器。也就是说，在基于堆栈的机器上，很可能在堆栈上分配了一个块范围数组。

您不能将数组传递给 C 中的函数。语言指定`subFunc(a)`接收指向`a`. `subFunc (char *a)`这可以通过两个声明（或原型）和`subFunc (char a[])`被视为相同的事实来例证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:57:27.627

`subFunc`将收到指向 的指针`char`，而不是 的数组`char`。该指针如何传递的细节将因实现而异。指针值可以被压入堆栈，也可以在寄存器中传递（Red Hat 上的 gcc 2.96 执行前者，而 SLES 10 上的 gcc 4.1.2 执行后者），这可能取决于优化设置等因素，您是否正在生成调试版本等。确定它如何在*您的*平台上工作的唯一方法是对其进行编码、构建并查看生成的机器代码。

在大多数情况下，“N-element array of”类型的*表达式*`T`将被转换（“decay”）为“pointer to `T`”类型的表达式，表达式的值将是数组第一个元素的地址. 此规则的例外情况是数组表达式是 、 或一元运算符的操作数`sizeof`，`_Alignof`或者`&`是用于在声明中初始化另一个数组的内容的字符串文字。

给定代码

```
char a[256];
...
subFunc(a); 
```

`a`调用中的表达式`subFunc`类型为“256 元素数组`char`”；根据上面的规则，它被替换为“指向`char`”( `char *`) 类型的表达式，其值是 的地址`a[0]`。

因此，`subFunc`接收一个指针值，而不是一个数组`char`。

请注意，在函数参数声明的上下文中，`T a[]`和`T a[N]`被解释为`T *a`; 如果你的原型`subFunc`是

```
int subFunc(char a[256]) 
```

它将被解释为

```
int subFunc(char *a) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:22:11.820

堆栈帧中只有一个 4 字节长的值（在 32 位操作系统上），其值是`char a[256]`. 现在我们知道从哪里`a`开始，我们可以访问数据了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T10:49:41.883

调用的函数`subFunc()`有`char a[256]`。该函数将首先在堆栈中。然后，`subFunc()`一直被压入堆栈。但是调用的函数`subFunc()`需要传递 to 的首`a`地址`subFunc()`。如果你传递 to 的长度会`a`更好`subFunc()`。 `subFunc()`应该这样改变：

```
int subFunc(char *, int); 
```

# regex - 使用正则表达式提取R中的重复短语

> ID：12580852
> 
> 赞同：1
> 
> 时间：2012-09-25T10:16:24.360
> 
> 标签：regex, r, stringr

我正在尝试使用以下代码定位（然后提取）重复的短语。我需要以“大约”开头并以“关闭”结尾的短语。

例如“关闭了大约 1.629 亿美元的总资产和 1.445 亿美元的总存款”

`str_locate(x,"(\b[Aa]pproximately\b)(.*)(\b[Cc]losed\b)")`

```
str_extract(x,"(\b[Aa]pproximately\b)(.*)(\b[Cc]losed\b)") 
```

上面的代码为短语起点和终点返回 NA。这是短语所在的字符向量示例。（它是公开可用的 FDIC 信息的网页）

"206-4662)。\r\n\r\n12 月 \r\n\r\n\r\n 总资产约 1.629 亿美元、总存款约 1.445 亿美元的亚利桑那州凤凰城西部国家银行已关闭。华盛顿Federal, Seattle, WA 已同意承担除某些经纪存款之外的所有存款。\r\n(PR-195-2011) \r\n\r\n\r\n\r\n Premier Community Bank of the Emerald Coast , Crestview, FL 已关闭，总资产约为 1.26 亿美元，存款总额为 1.121 亿美元。Summit Bank, NA, Panama City, FL 已同意承担所有存款。\r\n(PR-194-2011)"

我可能不正确地使用 reg 表达式，因为我是新手，所以非常感谢任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T10:17:44.740

`\b`是 ASCII 退格。如果您希望它表示“单词边界”，则需要转义反斜杠：

```
str_locate(x,"(\\b[Aa]pproximately\\b)(.*)(\\b[Cc]losed\\b)") 
```

此外，您不需要在关键字周围加上括号，除非您想稍后检查它们的大小写。并且在将函数用于正则表达式时，您可以不区分大小写地匹配`(?i)`修饰符。`perl()`

最后，请注意如果and`.*`之间有换行符（这可以用 修复）将不匹配，并且如果字符串中存在一对以上的关键字，则可能会产生不需要的结果。`approximately``closed``(?s)`

因此，您可能应该将您的正则表达式更改为

```
str_locate(x, perl("(?is)\\bapproximately\\b(.*?)\\bclosed\\b")) 
```

# linux - linux内存映射损坏？

> ID：12580855
> 
> 赞同：1
> 
> 时间：2012-09-25T10:16:46.357
> 
> 标签：linux, memory-management, shared-memory, mmap

我试图找出数据结构的内存映射中似乎损坏的原因。复制的方法是拔掉机器上的插头。

该代码将数据结构的成员按顺序递增一个，然后调用`msync(..,MS_SYNC)`（我知道这仅在硬件故障情况下有用，例如我现在的情况）。

我的问题是，在重新启动和重新映射数据后，特定的计数器“有时”不正确，如果是这样，它总是小于应有的值（几百 - 就时间而言，这将是一分钟左右，不是一个单一的计数）。我很确定`msync`在“崩溃”之前已经完成了数百次，所以我无法弄清楚任何大于 1 的差距（如果有的话）的原因。

数据结构的其余部分似乎已被刷新好..

有没有人遇到过这样的事情？

我们正在使用 Red Hat Enterprise Linux Server 版本 5.8 (Tikanga)

# c++ - 管理生命周期

> ID：12580857
> 
> 赞同：0
> 
> 时间：2012-09-25T10:16:54.810
> 
> 标签：c++, templates, design-patterns

我创建了一个容器来控制某些类型对象的生命周期（新建/删除）以避免任何编程错误。例如，一个对象在没有任何通知容器的情况下被删除。这些对象继承自同一个基类 (GreetingBase)。

对于实现，我使用了“模板技巧”：

```
class GreetingBase{
public:
  virtual void sayHello(){
    std::cout << "Hello there!" << endl;
  }

  virtual ~GreetingBase(){}
};

class GreetingDerived: public GreetingBase{
public:
  virtual void sayHello(){
    std::cout << "Hola amigos!" << endl;
  }
  virtual ~GreetingDerived(){}
};

class GreetingContainer{
public:
   template <class T>
   void addClass(){
      items.push_back(new T());
   }
~GreetingContainer(){
   for(std::vector<GreetingBase*>::iterator it = items.begin();
   it < items.end(); it++ ){
   delete *it;
 }
}

void talk(){
  for(std::vector<GreetingBase*>::iterator it = items.begin();
    it < items.end(); it++ ){
      (*it)->sayHello();
   }
  }
private:
 std::vector<GreetingBase*> items;
};

int main(){
  GreetingContainer container;
  container.addClass<GreetingDerived>();
  container.talk();
  return 0;
} 
```

问题：

1.  使用模板来解决这个问题是一种常见的方法吗？有什么缺点吗？
2.  当“T”不是从“GreetingBase”派生时报告更好的错误消息的任何“标准方式”

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:28:10.807

> 使用模板来解决这个问题是一种常见的方法吗？

我不知道这是否普遍，但它看起来足够明智。它确保您的容器只能包含指向用 分配的对象的指针`new`，这很好。

> 有什么缺点吗？

主要问题是您的容器违反了[三规则](https://stackoverflow.com/questions/4172722)。它有一个隐式生成的复制构造函数和复制赋值运算符，它们简单地复制每个指针；这将为您提供两个容器对象，它们的析构函数都试图删除相同的对象。

解决这个问题的最简单方法是删除这些成员函数，或者如果您坚持使用 2011 年之前的语言版本，则将它们声明为私有（没有实现）。如果您需要能够复制容器，那么您需要实现它们以安全地执行此操作。

就个人而言，我会使用智能指针而不是滚动我自己的 RAII 容器；`std::unique_ptr`如果容器要拥有独占所有权，`std::shared_ptr`如果您想共享所有权，或者可能`std::weak_ptr`持有对由共享指针在其他地方管理的对象的非拥有引用。如果您被困在过去，那么`unique_ptr`将无法使用，但 Boost 提供了`shared_ptr`、`weak_ptr`以及与您类似的[指针容器。](http://www.boost.org/doc/libs/release/libs/ptr_container/doc/ptr_container.html)

> 当“T”不是从“GreetingBase”派生时报告更好的错误消息的任何“标准方式”

在 C++11 中，您也许可以使用静态断言，例如：

```
static_assert(std::is_base_of<GreetingBase, T>::value, 
              "Wrong type for GreetingContainer"); 
```

或者，您可能会通过创建本地指针获得更易读的错误消息；那么错误消息至少不会包含的全名`push_back`：

```
GreetingBase * p = new T();
items.push_back(p); 
```

错误消息将类似于`can't convert Whatever* to GreetingBase*`，应该足够清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:20:37.577

1.  可以`template`用于此，但使用接收`pointer to base-class`的功能更好。
2.  标准 C++11 方式 -`static_assert`与[std::is_base_of 一起](http://en.cppreference.com/w/cpp/types/is_base_of)使用。没有 C++11 - boost 等价物或您自己的元函数。

旁注：如果您使用`smart pointers`，则无需编写此类容器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:24:45.250

我认为制作`addClass`模板没有优势；它只是意味着您获得了为每种不同类型实例化的代码的新副本，并且您正在执行特定的构造函数调用。

只需使其成为一个采用基类指针的普通函数：

```
void addClass(GreetingBase *o){
    items.push_back(o);
} 
```

所以你的来电者做

```
container.addClass( new GreetingDerived() ); 
```

代替

```
container.addClass<GreetingDerived>(); 
```

# java - 重复铸造

> ID：12580859
> 
> 赞同：2
> 
> 时间：2012-09-25T10:17:04.687
> 
> 标签：java, casting, corba

我的同事问我一个我自己找不到最终答案的问题，这个问题是关于对象铸造的。

假设我有一个 A 类和一个工厂类，在工厂类中，我想创建 A 实例：

```
Public class Factory {

    public A createA1() {
       Object instance = get_A_Object();
       //Single casting
       return (A) instance;
    }

     public A createA2() {
       Object instance = get_A_Object();
       // Duplicate casting or more
       return (A) (A) instance;
    }
} 
```

我的问题是：

方法 createA1() 中的单次转换与方法 createA2() 中的重复转换有什么区别？他们总是得到相同的结果吗？

**编辑：**

为了澄清，我的同事问我这行代码：

```
org.omg.CORBA_2_5.ORB orb = ((org.omg.CORBA_2_5.ORB)org.omg.CORBA.ORB.init((String[])localObject2, localProperties)); 
return (org.omg.CORBA_2_5.ORB)(org.omg.CORBA_2_5.ORB)(org.omg.CORBA_2_5.ORB)(org.omg.CO‌​RBA_2_5.ORB)(orb); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T10:19:07.380

该副本是完全多余的。您只需施放一次。

这是一个练习。如果您在 IDE 中加载它，并逐个删除强制转换，它会在什么时候开始抱怨您的类型？

实际上，在您修改后的问题中，您根本不需要投！

```
org.omg.CORBA_2_5.ORB orb = ((org.omg.CORBA_2_5.ORB)org.omg.CORBA.ORB.init((String[])localObject2, localProperties)); 
```

您已`orb`在作业中声明了 ' 类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T10:19:49.843

没有不同。

```
int i = (int)(int)1 
```

计算为 (int)1 到 1。

完全多余。

**编辑：** 与问题无关，但是..您不需要强制转换。你的工厂至少应该返回一个接口。看起来像代码气味。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T10:19:50.163

本质上，您正在对演员表进行演员表。

```
Object obj = (Object)(Integer)thing.getObeject() 
```

基本上你可以在铸造后重新铸造 - 如果你问我，那是毫无意义的..

甚至更可笑的东西，例如：

```
Integer integer1 = (Integer)(Object)thing.toString() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T10:20:28.007

从功能上看，它看起来是一样的，所以我会说双重铸造是多余的。

它可能是字节码深处的东西，但编译器非常高效，所以我认为不会有任何东西。下面的测试表明它们在功能上是相同的

```
@Test
public void testCasting {

    Object obj = new String("abc");

    String s1 = (String) obj;
    String s2 = (String)(String)  obj;

    assertEquals("abc", s1);
    assertEquals("abc", s2);
    assertEquals(s1, s2);
} 
```

此测试通过

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T10:21:54.190

它的多余

```
 Number num = (Number)(Number) (new Integer(10)); 
```

将整数转换为 Number 两次。没有区别

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-25T10:47:52.033

只要这样想，

你已经铸造了一个物体说

> （一）对象

现在 obj 变成了 A 类类型，我们不需要再次强制转换，即使我们这样做也不会造成任何伤害，它会浪费这个过程。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-25T11:14:21.167

从 Java 语言规范的角度来看，它是这样的：

`instance`– 类型的表达式`Object`

`(A) instance`– 类型的表达式`A`

`(A) (A) instance`– 将 type 的表达式转换`A`为 type `A`。

另一种表达方式是与以下代码进行比较：

```
final Object instance = get_A_Object();
final A a = (A) instance;
final A a0 = (A) a; 
```

# android - 如何将视图的关联 ID 作为字符串获取？

> ID：12580860
> 
> 赞同：0
> 
> 时间：2012-09-25T10:17:05.433
> 
> 标签：android, view, findviewbyid

创建布局时，您为视图定义一个 id，如下所示：

```
<ImageView
   android:id="@+id/myImage"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:src="@drawable/main01" /> 
```

在您的代码中，您有：

```
ImageView img = (ImageView) findViewById(R.id.myImage); 
```

现在你有了`img`.

如何将`img`("myImage")的 id**作为字符串**获取？我需要这样的东西：

```
String strId = getStringId(img);
// now strId is "myImage" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:21:03.223

试试这个。

```
Log.i("============ Id","::"+getResources().getResourceEntryName(img.getId())); 
```

**输出：============ Id :: myImage**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:20:21.690

这是你要找的吗？

```
String value = getResources().getString(R.id.myImage); 
```

# drupal - 在 drupal 7 中的 page.tpl.php 中打印自定义菜单会显示所有语言的所有节点，而不仅仅是当前语言

> ID：12580861
> 
> 赞同：0
> 
> 时间：2012-09-25T10:17:20.240
> 
> 标签：drupal, menu, internationalization

我正在为 drupal 使用 i18n 模块，并且我有两种语言（英文和中文）。我有一个主菜单和一个自定义菜单（联系人菜单）和一个结合两者的菜单。所有菜单都不在区域中，而是通过 page.tpl 打印。

**当我在主菜单中的一个节点上并单击“中文”时，将显示已翻译的节点，并且主菜单现在只包含所有中文节点链接 - 完美！**

实际上，自定义菜单的工作原理相同，但仅当我将其分配给一个区域时。我必须通过我的 page.tpl 中的 php 代码打印此菜单 - 但随后打印此菜单中的所有节点，英文和中文。但是，当我将菜单放入区域时，仅显示当前语言的节点。

**如何渲染自定义菜单以仅显示当前语言的节点？**

这是 php 代码（我正在使用/编写 ZEN 子主题）

```
if ($main_menu): ?>
                <nav id="main-menu" role="navigation">  
                    <?php print theme(
                        'links__system_main_menu', array(
                            'links' => $main_menu,
                            'attributes' => array(
                                //'id' => 'main-menu-links',
                                'class' => array('links', 'main_menu', 'clearfix'),
                            )
                        )
                    ); ?>
                </nav>

            <?php
            endif;
?> 
```

上面的效果很好，只打印当前语言的节点/链接，不像：

```
<?php if (menu_navigation_links('menu-contact-menu')): ?>
                <nav id="contact-menu" role="navigation">

                    <?php print theme(
                        'links', array(
                            'links' => menu_navigation_links('menu-contact-menu'), 
                            'attributes' => array(
                                'class'=> array('links', 'contact_menu')
                            )
                        )
                    ); ?>
                </nav>
            <?php
                endif;
            ?> 
```

组合菜单会是什么样子？目前：

```
<?php
            // combine main and contact menu and output as one
            if ($main_menu && menu_navigation_links('menu-contact-menu')): ?>
                <nav id="footer-menu" role="navigation">
                    <?php
                        $links = array_merge($main_menu, menu_navigation_links('menu-contact-menu'));

                        print theme(
                            'links', array(
                                'links' => $links, 
                                'attributes' => array(
                                    'class'=> array('links', 'footer-menu')
                                )
                            )
                        );
                    ?>
                </nav>
        <?php
            endif;
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:20:32.413

发现了，有点合乎逻辑……`i18n_menu_navigation_links`有诀窍

```
if (menu_navigation_links('menu-contact-menu')): ?>
                <nav id="contact-menu" role="navigation">

                    <?php print theme(
                        'links', array(
                            'links' => i18n_menu_navigation_links('menu-contact-menu', 0),
                            'attributes' => array(
                                'class'=> array('links', 'contact_menu')
                            )
                        )
                    ); ?>
                </nav>
            <?php
                endif;
            ?> 
```

# mysql - Mysql根据其他列中的值在列中添加值

> ID：12580867
> 
> 赞同：0
> 
> 时间：2012-09-25T10:17:52.897
> 
> 标签：mysql

![付款表](../Images/7a5c25a8d7a8e6646ec3dbd14f7b3564.png)

从表中获取以下结果的 mysql 查询是什么？金额栏的加法应根据invoiceID进行。

![在此处输入图像描述](../Images/a67535b2800d3b9805660ddbacd046b4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:19:11.493

```
SELECT @rownum := @rownum + 1 AS ID, InvoiceID, SUM(AMOUNT) 
FROM <tablename>, (SELECT @rownum := 0) r
GROUP BY InvoiceID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:21:11.383

尝试这个：

```
select  @i:=@i+1 AS id,a.*
     from
     (select InvoiceID,sum(Amount) as Amount
      from your_table
      group by InvoiceID)a,(SELECT @i:=0) r 
```

# [SQL Fiddel 演示](http://www.sqlfiddle.com/#!2/bab4f/5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:26:10.080

```
select ID,InvoiceID, SUM(Amount)
from <table>
group by InvoiceID 
```

# scala - Play framework 2.0 控制器/Async 究竟是如何工作的？

> ID：12580869
> 
> 赞同：15
> 
> 时间：2012-09-25T10:17:54.970
> 
> 标签：scala, playframework-2.0, akka, evented-io

我最近迁移到 Play framework 2.0，关于控制器在游戏中的实际工作方式，我有一些疑问。

在[播放文档](http://www.playframework.org/documentation/2.0.3/ScalaAsync)中提到：

> 由于 Play 2.0 的工作方式，动作代码必须尽可能快（即非阻塞）。

但是在[文档的另一部分](https://github.com/playframework/Play20/wiki/AkkaCore)：

```
 /actions {
                router = round-robin
                nr-of-instances = 24
            } 
```

和

```
 actions-dispatcher = {
            fork-join-executor {
                parallelism-factor = 1.0
                parallelism-max = 24
            }
        } 
```

似乎有 24 个参与者分配给控制器处理。我猜每个请求都会在请求的生命周期内分配其中一个参与者。**那正确吗？**

另外，是什么`parallelism-factor`意思，又有何`fork-join-executor`不同`thread-pool`？

另外 - 文档应该说 Async 应该用于长时间计算。**什么是长计算？100 毫秒？300毫秒？5秒？10秒？**我的猜测会超过一秒钟，但如何确定呢？

这个问题的原因是测试异步控制器调用比常规调用更难。您必须启动一个假应用程序并执行一个完整的请求，而不是仅仅调用一个方法并检查它的返回值。

即使情况并非如此，我也怀疑将所有内容都包含在内`Async` 并且`Akka.future`是一种方式。

我已经在#playframework IRC 频道中提出了这个问题，但没有得到答复，而且似乎我不是唯一一个不确定应该如何做的人。

只是重申：

1.  每个请求都从 /actions 池中分配一个演员是否正确？
2.  是什么`parallelism-factor`意思，为什么是1？
3.  与有何`fork-join-executor`不同？`thread-pool-executor`
4.  计算应该包含多长时间`Async`？
5.  如果不启动假应用程序就不可能测试异步控制器方法吗？

提前致谢。

**编辑：来自 IRC 的一些东西**

来自 IRC 的一些东西。

```
<imeredith> arturaz: i cant be boethered writing up a full reply but here are key points
<imeredith> arturaz: i believe that some type of CPS goes on with async stuff which frees up request threads
<arturaz> CPS?
<imeredith> continuations
<imeredith> when the future is finished, or timedout, it then resumes the request
<imeredith> and returns data
<imeredith> arturaz: as for testing, you can do .await on the future and it will block until the data is ready
<imeredith> (i believe)
<imeredith> arturaz: as for "long" and parallelism - the longer you hold a request thread, the more parrellism you need
<imeredith> arturaz: ie servlets typically need a lot of threads because you have to hold the request thread open for a longer time then if you are using play async
<imeredith> "Is it right that every request allocates one actor from /actions pool?" - yes i belive so
<imeredith> "What does parallelism-factor mean and why is it 1?" - im guessing this is how many actors there are in the pool?
<imeredith> or not
<imeredith> "How does fork-join-executor differ from thread-pool-executor?" -no idea
<imeredith> "How long should a calculation be to become wrapped in Async?" - i think that is the same as asking "how long is a piece of string"
<imeredith> "Is is not possible to test async controller method without spinning up fake applications?" i think you should be able to get the result
<viktorklang> imeredith: A good idea is to read the documentation: http://doc.akka.io/docs/akka/2.0.3/general/configuration.html ( which says parallelism-factor is: # Parallelism (threads) ... ceil(available processors * factor))
<arturaz> viktorklang, don't get me wrong, but that's the problem - this is not documentation, it's a reminder to yourself.
<arturaz> I have absolutely no idea what that should mean
<viktorklang> arturaz: It's the number of processors available multiplied with the factor you give, and then rounded up using "ceil". I don't know how it could be more clear.
<arturaz> viktorklang, how about: This factor is used in calculation `ceil(number of processors * factor)` which describes how big is a thread pool given for your actors.
<viktorklang> arturaz: But that is not strictly true since the size is also guarded by your min and max values
<arturaz> then why is it there? :)
<viktorklang> arturaz: Parallelism (threads) ... ceil(available processors * factor) could be expanded by adding a big of conversational fluff: Parallelism ( in other words: number of threads), it is calculated using the given factor as: ceil(available processors * factor)
<viktorklang> arturaz: Because your program might not work with a parallelism less than X and you don't want to use more threads than X (i.e if you have a 48 core box and you have 4.0 as factor that'll be a crapload of threads)
<viktorklang> arturaz: I.e. scheduling overhead gives diminishing returns, especially if ctz switching is across physical slots.
<viktorklang> arturaz: Changing thread pool sizes will always require you to have at least basic understanding on Threads and thread scheduling
<viktorklang> arturaz: makes sense?
<arturaz> yes
<arturaz> and thank you
<arturaz> I'll add this to my question, but this kind of knowledge would be awesome docs ;) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T13:15:40.827

1.  当消息到达一个actor 时，只要它需要处理该消息，它就会保留该actor。如果您同步处理请求（在处理该消息期间计算整个响应），则此参与者无法为其他请求提供服务，直到响应完成。相反，如果您可以在收到此请求后将工作发送给另一个参与者，则收到请求的参与者可以开始处理下一个请求，而其他参与者正在处理第一个请求。

2.  用于actor的线程数是“num cpus * parallelism-factor”（但是您可以指定最小值和最大值）

3.  不知道

4.  除非进行真正的计算，否则我倾向于将任何与其他系统通信的东西都设为异步，比如使用数据库/文件系统进行 io。当然是任何可能阻塞线程的东西。但是，由于传递消息的开销很小，我认为将所有工作发送给其他参与者不会有问题。

5.  请参阅有关如何测试控制器[的功能测试的 Play 文档。](http://www.playframework.org/documentation/2.0/ScalaFunctionalTest)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T09:49:53.480

看来您可以这样做进行测试：

```
object ControllerHelpers {
  class ResultExtensions(result: Result) {
    /**
     * Retrieve Promise[Result] from AsyncResult
     * @return
     */
    def asyncResult = result match {
      case async: AsyncResult => async.result
      case _ => throw new IllegalArgumentException(
        "%s of type %s is not AsyncResult!".format(result, result.getClass)
      )
    }

    /**
     * Block until result is available.
     *
     * @return
     */
    def await = asyncResult.await

    /**
     * Block until result is available.
     *
     * @param timeout
     * @return
     */
    def await(timeout: Long) = asyncResult.await(timeout)

    /**
     * Block for max 5 seconds to retrieve result.
     * @return
     */
    def get = await.get
  }
}

  implicit def extendResult(result: Result) =
    new ControllerHelpers.ResultExtensions(result)

  val result = c.postcodeTimesCsv()(request(params)).get
  status(result) should be === OK 
```

# c# - 检查 Lambda 中的空值

> ID：12580871
> 
> 赞同：0
> 
> 时间：2012-09-25T10:18:01.523
> 
> 标签：c#, linq, lambda

我们有以下代码来检查给定的用户名和密码是否存在于数据库中：

```
 public User GetUserByUserNameAndPassword(string userName, string userPassword)
    {
        using (var context = DataObjectFactory.CreateContext())
        {
            return Mapper.Map(context.UserEntities.Single(u => u.UserName == userName && u.UserPassword == userPassword));
        }
    } 
```

如果我们在数据库中有用户名和密码，这可以正常工作，但如果用户名或密码错误且未找到记录，则会引发错误。

这可能很简单，但由于我是 lambda 新手，所以无法正确处理。

如何更改 lambda 查询以便我们可以处理空值？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:19:00.453

您应该从 更改`Single`为[`SingleOrDefault`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.singleordefault.aspx)，当没有数据匹配时它返回 null

```
context.UserEntities.SingleOrDefault(u => u.UserName == userName && 
                                          u.UserPassword == userPassword) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T10:19:14.457

使用[SingleOrDefault](http://msdn.microsoft.com/en-us/library/bb342451.aspx)，它将仅返回一条记录，如果不存在则返回 null。

```
return Mapper.Map(context.UserEntities.SingleOrDefault(u => u.UserName == userName && u.UserPassword == userPassword)); 
```

稍后您可以检查：

```
User returnedObject = GetUserByUserNameAndPassword(username,password)

if(returnedObject == null)
{
//User doesn't exist
} 
```

*记住 Single/SingleOrDefault 如果存在多个不符合条件的记录，将引发异常。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T10:21:51.630

`.Any()`如果找到匹配的记录，则返回 true；如果未找到记录，则返回 false。

因此，对现有代码稍作修改即可。

```
 public User GetUserByUserNameAndPassword(string userName, string userPassword)
        {
            using (var context = DataObjectFactory.CreateContext())
            {
             if (context.UserEntities.Any(u => u.UserName == userName && u.UserPassword == userPassword))
             {
                return Mapper.Map(context.UserEntities.Single(u => u.UserName == userName && u.UserPassword == userPassword));
             }
             else
             {
              //Deal with no user here through chosen method
             }
            }
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T10:21:58.733

使用 FirstOrDefault 或 SingleOrDefualt 并检查 null，如下所示

```
var user =context.UserEntities.SingleOrDefault(u => u.UserName == userName 
                                           && 
                                           u.UserPassword == userPassword);

if(user!=null)
{
 //do code
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T10:22:30.120

使用[SingleOrDefault](http://msdn.microsoft.com/en-us/library/bb342451.aspx)`Null`并在调用 Map 之前检查

```
public User GetUserByUserNameAndPassword(string userName, string userPassword) 
{ 
    using (var context = DataObjectFactory.CreateContext()) 
    { 
        var user = context.UserEntities.SingleOrDefault(u => u.UserName == userName && u.UserPassword == userPassword);
        return user !=null ? Mapper.Map(user) : null; 
    } 
} 
```

# bash - BASH：将文件提供给while循环

> ID：12580872
> 
> 赞同：0
> 
> 时间：2012-09-25T10:18:05.557
> 
> 标签：bash, shell

我的 stippt 中有下一个带有 while 循环的代码：

```
TMP_FILE=`mktemp`
some_script.sh | grep aa > $TMP_FILE 
while read i
   do
      echo $i
      number=`ssh somehost cat somefile | grep 11 `  
      echo $number
   done < $TMP_FILE 
```

TMP_FILE 的内容如下所示：

```
hostname1 AB_CDEF_JH10
hostname2 BC_DEF_JK19
... 
```

在这种情况下，脚本仅在一次循环中正常工作，从 TMP_FILE 中获取第一行。之后，脚本退出。有什么想法为什么它不想处理除第一行之外的其他行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:28:02.150

尝试传递`-n`选项以`ssh`防止它从标准输入读取。

默认情况下，`ssh`从标准输入（在本例中是您的文件）读取并将其转发到远程主机上运行的命令的标准输入。结果，您的整个文件被消耗，`ssh`循环只执行一次！

# java - 如何在 Python 中记录返回的列表

> ID：12580876
> 
> 赞同：0
> 
> 时间：2012-09-25T10:18:13.283
> 
> 标签：java, python, list, javadoc, pep

我有一段代码可以抓取大学时间表网页并生成列表（列表）列表，如下所示：

```
[[[[start_time, end_time], [module_code, period_type, {period_number}], [room_code]], {next modules...}],{next_days...}] 
```

如果我想用 Python（可能还有 Java 或其他语言）记录这种返回的数据，这样做会有最佳实践吗？

注意：我查看了 PEP，但找不到与此相关的任何内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T10:25:59.590

您创建简单的类来保存数据，而不是使用嵌套列表：

```
 class TimeTableEntry(object):
     def __init__(self, start, end, module, room):
         self.start = start
         self.end = end
         self.module = module
         self.room = room 
```

然后记录您的方法返回的列表。额外的好处是现在您可以在这些对象上添加其他方法。添加一种`__str__`易于显示的方法。等等。

最重要的是，您可以比记录原始类型的嵌套结构更清楚地记录这些条目对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T10:27:46.993

这种结构更好地建模为字典；关键是房间代码。每个房间代码键都有一个列表，这个列表有代表每个课程/事件的元组。

```
schedule = dict()
schedule['room_1'] = [(start_time,end_time,module_code,period_type,..),
                      (start_time,end_time,module_code,period.....),
                      ...
                     ]
schedule['room_2'] = [ ... ] # as above 
```

这使记录变得更容易，并且还使您能够执行以下操作：

```
for i in schedule:
   print '{0} events scheduled for room {1}".format(len(schedule[i]),i) 
```

以下是您可能如何记录它：

```
def foo(bar):
    '''
    Does some magic with `bar`.  Cats may be harmed and
    the space time continuum may be disturbed if you pass in
    silly things like None.

    Args:
        bar: The best name for a variable since foo.

    Returns:
        A dict mapping keys to the room and rows representing
        the room's schedule. A row is represented as a list.
        Each element of the list is a tuple of strings representing
        and event. For example:

        {'room_1': [(start_time,end_time,module_code,period_type,..)]}
    ''' 
```

# xcode - 编辑情节提要时 Xcode Interface Builder 崩溃

> ID：12580881
> 
> 赞同：13
> 
> 时间：2012-09-25T10:18:24.797
> 
> 标签：xcode, crash, interface-builder

我是 Xcode 的新手，在使用 Interface Builder 时遇到了 IDE 崩溃的问题。这是 Xcode 4.5。

它可以正常工作足够长的时间，我可以在情节提要中添加十几个按钮 - 但是当我尝试调整其中任何一个按钮时，它会崩溃并退出。如果我移动一个按钮，它就会崩溃。如果我添加一个像标签这样的新对象，它*有时会*崩溃，但并非总是如此。

如果我不尝试编辑情节提要，项目将在模拟器上构建并运行，没有任何问题。

我在下面粘贴了看起来像是崩溃报告相关部分的内容。为了节省空间，我从“视图层次结构”部分向下删除了所有内容，但如果有用，我可以添加它。所有的崩溃报告都指向同一个错误。

有趣的是，当我查看控制台日志时，在每次崩溃之前，Interface Builder 都会提供另一份报告：

```
25/09/2012 10:46:35.661 Interface Builder Cocoa Touch Tool: CFPreferences:
user home directory at file://localhost/Users/me/Library/Application Support/
iPhone Simulator/User/ is unavailable. User domains will be volatile. 
```

没错——那个目录不存在。我有 iPhone Simulator/6.0，但没有别的。我以该路径中的用户身份登录。

根据 Stack Overflow 和其他地方的其他建议，我尝试清理构建，然后删除整个 iPhone Simulator 目录并让模拟器重新创建它，但这没有区别。

作为一个实验，我刚刚创建了一个新项目并将一些按钮和标签拖到情节提要中。这似乎很好。没有崩溃。

这是否表明我的其他项目中的某些内容已损坏？

任何建议都会非常受欢迎。这不是一个重要的项目——我在这个阶段正在学习我的方法——但是如果有什么问题导致了问题，那么我想在我开始在 Xcode 中进行任何认真的工作之前解决它。

提前致谢。

詹姆士

```
Process:         Xcode [650]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.5 (1839)
Build Info:      IDEApplication-1839000000000000~3
App Item ID:     497799835
App External ID: 10747437
Code Type:       X86-64 (Native)
Parent Process:  launchd [129]

Date/Time:       2012-09-25 10:46:43.202 +0100
OS Version:      Mac OS X 10.7.5 (11G56)
Report Version:  9

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4G182
ASSERTION FAILURE in /SourceCache/IDEInterfaceBuilderCocoaTouch/IDEInterfaceBuilderCocoaTouch-1926/IBPlugin/Utilities/IBObjectMarshalling.m:651
Details:  Failed to arbitrate IBNSLayoutConstraint, IBUIButton, IBUILabel, IBUIView, and IBUIViewController.

Interface Builder encountered an error communicating with the iOS Simulator. If you choose to file a crash report or radar for this issue, please check Console.app for crash reports for "Interface Builder Cocoa Touch Tool" and include their content in your crash report.

Exception name: IBAssertionFailure
Exception reason: ASSERTION FAILURE: 
Reason:     All views needing candidate constraints have already had constraints generated. This most likely indicates a bug involving layout of the following views:
Layout engine frame ({{20, 60}, {282, 57}}) of <UILabel: 0xb36f590; frame = (20 60; 281 57); text = '0'; clipsToBounds = YES; opaque = NO; autoresize = TM+BM; userInteractionEnabled = NO; layer = <CALayer: 0xb36f620>> does not match canvas frame ({{20, 60}, {281, 57}})
Layout engine frame ({{236, 328}, {66, 43}}) of <UIRoundedRectButton: 0xb384590; frame = (236 328; 65 44); opaque = NO; autoresize = TM+BM; layer = <CALayer: 0xb384660>> does not match canvas frame ({{236, 328}, {65, 43}})
Layout engine frame ({{236, 124}, {66, 43}}) of <UIRoundedRectButton: 0xb38ea10; frame = (236 124; 65 44); opaque = NO; autoresize = TM+BM; layer = <CALayer: 0xb38eae0>> does not match canvas frame ({{236, 124}, {65, 43}})
Layout engine frame ({{236, 175}, {66, 43}}) of <UIRoundedRectButton: 0xb390a30; frame = (236 175; 65 44); opaque = NO; autoresize = TM+BM; layer = <CALayer: 0xb36e8e0>> does not match canvas frame ({{236, 175}, {65, 43}})
Layout engine frame ({{236, 226}, {66, 43}}) of <UIRoundedRectButton: 0xb392a90; frame = (236 226; 65 44); opaque = NO; autoresize = TM+BM; layer = <CALayer: 0xb392b60>> does not match canvas frame ({{236, 226}, {65, 43}})
Layout engine frame ({{236, 277}, {66, 43}}) of <UIRoundedRectButton: 0xb394b70; frame = (236 277; 65 44); opaque = NO; autoresize = TM+BM; layer = <CALayer: 0xb394c40>> does not match canvas frame ({{236, 277}, {65, 43}}) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-01T19:15:03.790

更新：进一步的实验揭示了情节提要的“使用自动布局”复选框。关闭它然后保存文件似乎已经解决了这个问题。我可以随意编辑，不再崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T03:02:11.507

当 xib 文件格式不同，但都在同一个项目中时，就会出现这种情况。就我而言，一些 xib 文件与 xcode5 dp 兼容，但其他文件与 xcode 4.6 兼容

这里的目的是寻找xib文件的差异

希望这对未来的人们有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T00:00:08.750

这个问题可能与现在两个不同尺寸的 iPhone 视网膜显示器（3.5" 和 4"）有关，以及它如何与视图的*Mode:Scale To Fill*和*Autosize Subviews 交互*，这两者都默认启用.

例如，在我的情况下，我有一个 4" 视网膜大小的 MainView 和紧凑的按钮视图。但是模拟器设置为 3.5 视网膜显示。因为我的按钮视图大小只有 43x43px 并且彼此相邻，这会导致当它们的位置被调整为 3.5 英寸显示器（*缩放以填充*更*小*的空间）时，按钮位置以它们重叠的方式自动缩小 - 因为它们无法缩小尺寸。这种视图的重叠似乎可能会导致自动布局系统出现问题。因此，我认为是崩溃。

毫无疑问，这也是为什么在崩溃报告中提到与模拟器通信的原因，即使我们只在 Interface Builder 中工作，这在以前似乎并不直观。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-02T13:03:02.693

我也遇到了这个错误，对我来说问题是一个 TableView 有一些约束。删除所有约束后，错误停止出现。

# javascript - 尝试根据用户点击的内容显示数据

> ID：12580882
> 
> 赞同：1
> 
> 时间：2012-09-25T10:18:30.340
> 
> 标签：javascript, php, html

看看这里： [http ://test.neworgan.org/100/](http://test.neworgan.org/100/)

向下滚动到社区部分。

我想要实现的是为新的组织者获取数据（例如：朋友的数量/捐赠的金额），以便在用户点击他们的缩略图时显示。现在，每个用户都有自己独特的数据存储在外部。

一旦用户单击缩略图，“inline1”就会与内容一起出现。

截至目前，无论我点击哪个用户的缩略图，我都只能从最后一个用户那里获取数据来显示。关于如何根据用户单击的缩略图更改内容，我只需要一些帮助。所以我想知道我是否可以在这里得到一些帮助？

这是重要的代码部分：

```
 <div class="top-fundraisers-wrapper">
     <div class="subsection top-fundraisers">

    <?php if ($top_fundraisers && is_array($top_fundraisers)): ?>
        <?php foreach ($top_fundraisers as $index => $fundraiser): ?>
           <a title="" class="fancybox" href="#inline1">
        <div class="top-fundraiser">

<div id="newo<?php print htmlentities($index + 1); ?>" class="top-fundraiser-image">
              <img src="<?php
          if($fundraiser['member_pic_medium']) {
                  print htmlentities($fundraiser['member_pic_medium']);
          } else {
            print $template_dir . '/images/portrait_placeholder.png';
          }
              ?>"/>
            </div>
    </div>
    </a>
        <?php endforeach;?>
    <?php endif; ?>

  </div>
</div>
</div>

<div id="inline1">
    <div class="top-fundraiser-image2">
    <img src="<?php
          if($fundraiser['member_pic_large']) { print htmlentities($fundraiser['member_pic_large']);
          } else {
            print $template_dir . '/images/portrait_placeholder.png';
          }
            ?>"/>
            </div>

    <span class="member-name"><?php print htmlentities($fundraiser['member_name']); ?></span>
        <span class="friend-count"><?php print number_format($fundraiser['num_donors']) . (($fundraiser['num_donors'] == 1) ? ' Friend' : ' Friends'); ?></span>

        <span class="fundraisers-text"> Donated: </span><span class="fundraisers-gold"> $<?php print number_format($fundraiser['total_raised']); ?></span>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-12T10:47:08.833

为内容创建另一个循环

```
<?php if ($top_fundraisers && is_array($top_fundraisers)):
    $i = 1;
    foreach ($top_fundraisers as $index => $fundraiser): ?>
        <a title="" class="fancybox" href="#inline<?php echo $i; ?>">
        // ... content
    <?php $i++;
    endforeach;
endif; ?> 
```

还有另一个循环

```
<?php if ($top_fundraisers && is_array($top_fundraisers)):
    $i = 1;
    foreach ($top_fundraisers as $index => $fundraiser): ?>
        <div id="inline<?php echo $i; ?>">
            // inline content here
        </div>
    <?php $i++;
    endforeach;
endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-12T11:17:01.557

希望您的 JavaScript 函数通过调用类来打开 fancybox 工作正常。因此，通过以下代码，您无需使用 Javascript 代码。

建筑锚标签：

```
<?php
if (!empty($top_fundraisers) && is_array($top_fundraisers)) {
    foreach ($top_fundraisers as $index => $fundraiser) {
        <a title="" class="fancybox" href="#inline<?php echo $fundraiser['id']; ?>">HTML Content Goes Here</a>
        <?php
    } //end of foreach
} // end of if condition
?> 
```

构建弹出式 HTML DOM：

```
<?php
if (!empty($top_fundraisers) && is_array($top_fundraisers)) {
    foreach ($top_fundraisers as $index => $fundraiser) {
         <div id="inline<?php echo $fundraiser['id']; ?>">HTML Content Goes Here</div>
        <?php
    } //end of foreach
} // end of if condition
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-12T10:41:49.230

最好的方法是使用 Ajax。像这样的东西

```
$("#button").click( function() {
$.ajax({
    url: 'file.php',
    method: 'post',
    data: { id: $(this).val() },
    error: function() {
        alert('error while requesting...');
    }, success: function(data) {
        alert( data ); /** received data - best to use son **/
    }
 });
 }); 
```

接下来解析 json var json = $.parseJSON(data); 或...使用 dataJson 选项。

Next 您的数据应该使用 class 或 id 插入到特定位置。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-25T10:31:18.333

您无法执行此操作，因为 PHP 在服务器端运行，而 JavaScript 在浏览器中运行。

要执行此操作，您可以使用[`AJAX`](https://developer.mozilla.org/en-US/docs/AJAX)来获取`div`用户所需的。

...或在客户端存储数据并`#inline1`根据单击的项目更改内容

# symfony - 如何使用 symfony2 中的多个实体字段创建唯一表单

> ID：12580884
> 
> 赞同：2
> 
> 时间：2012-09-25T10:18:37.727
> 
> 标签：symfony, doctrine

我想使用来自多个实体的一些字段创建一个表单。我已经创建了所有需要的不同实体，并且我没有使用表单类。我需要知道如何呈现表单并处理其数据，以便将它们保存到数据库中的正确表中。

这是我负责执行此操作的控制器的一部分

```
public function createPublicSpaceAction() {
    //My entities
    $Room = new Room();
    $GuestList = new GuestList();
    $Guest = new Guest();

    //I need to know what to do from here

    return $this -> render('AcmeUserBundle:Default:Forms/createPublicSpace.html.twig', array());
} 
```

我一直在努力寻找解决方案，我想出了一个表格需要一个实体的想法。因此，也许解决方案是将这些实体合并为一个，以便我可以轻松构建表单。然后我必须将数据保存到相应的表中。但我想不出如何合并实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T10:02:49.043

我想出了一个临时解决方案。对于那些想知道的人，我手动创建了一个实体，它看起来像是我需要的所有实体的合并。这个新实体与 Doctrine 没有链接，因此它无法创建表。它的目标只是让我建立一个表单并能够通过该表单操作数据。然后，我将提交给相应实体字段的所有数据分配并将它们持久化到数据库中。

我再次知道这不是最好的解决方案。但由于某些原因，我不会说，这是为我而设的。我希望这可以帮助一些与我处于相同情况的人，并且毫不犹豫地发布可以帮助或更好的方法来做到这一点的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T13:38:34.077

强烈建议使用表单类[http://symfony.com/doc/current/book/forms.html#creating-form-classes](http://symfony.com/doc/current/book/forms.html#creating-form-classes)

它们旨在节省时间并使很多事情变得更容易。

但是，要回答您的问题，请考虑以下事项。您的操作需要处理发布请求。因此，使用 post 数据捕获请求对象：

```
use Symfony\Component\HttpFoundation\Request;

public function createPublicSpaceAction(Request $request) 
```

然后获取表单构建器实例并创建表单：

```
$builder = $this->createFormBuilder();

$builder->add('floor', 'text', array(
        'label' => 'Room floor',
        'data' => $room->getFloor()
)); 
```

根据需要添加尽可能多的表单字段。有几种内置字段类型：[http ://symfony.com/doc/current/book/forms.html#built-in-field-types](http://symfony.com/doc/current/book/forms.html#built-in-field-types)

创建表单：

```
$form = $builder->getForm(); 
```

将表单传递给您的模板：

```
return $this -> render('AcmeUserBundle:Default:Forms/
                        createPublicSpace.html.twig', array(
    'roomForm' = $form
)); 
```

要在您的操作中获取发布的数据：

```
if ('POST' == $request->getMethod()) {
    $data = $request->request->get("form");
} 
```

在您的模板中，您可以自己呈现表单或让 twig 完成工作：

```
{{ form_widget(form.floor)}} 
```

所以这是要提到的最重要的事情。但是你应该通过[http://symfony.com/doc/current/book/forms.html](http://symfony.com/doc/current/book/forms.html)他们实际上告诉你我写下的一切。

祝你好运 ;）

# jquery - Jquery：分别创建多个div

> ID：12580890
> 
> 赞同：0
> 
> 时间：2012-09-25T10:18:50.537
> 
> 标签：jquery

我的 JQuery 代码使用 while 循环在单击按钮时创建多个 div。

```
$(document).on("click",".ball_link", function makeDiv(){
count=0;
//ajax code to fetch no. of divs to be created from table

    while(count< no_of_divs)
    {

    //code to calculate random x,y coordinates and save them to posx and posy

    var newdivid='div'+count;
    $newdiv = $('<div/>').css({
    'position':'absolute',
    'left':posx+'px',
    'top':posy+'px',
    'display':'none',
    'background':'ball.png'
    }).appendTo( '.page-wrap' ).fadeIn(600).effect("bounce", { times:6, distance:15 },300);
    count++;
    }
}); 
```

问题是如果 no_of_divs 是例如 3，那么所有 3 个 div 同时出现在页面上。如何在不删除 while 循环的情况下强迫它们一一出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:21:01.980

[`.delay()`](http://api.jquery.com/delay/)我认为您可以通过下面的 jquery 延迟

```
appendTo( '.page-wrap' ).delay(900 * count).fadeIn(600).effect("bounce", { times:6, distance:15 },300); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T10:21:27.220

只是一个微小的变化 - 为动画添加延迟......

```
$(document).on("click",".ball_link", function makeDiv(){
count=0;
//ajax code to fetch no. of divs to be created from table

    while(count< no_of_divs)
    {

    //code to calculate random x,y coordinates and save them to posx and posy

    var newdivid='div'+count;
    $newdiv = $('<div/>').css({
        'position':'absolute',
        'left':posx+'px',
        'top':posy+'px',
        'display':'none',
        'background':'ball.png'
    }).appendTo( '.page-wrap' ).delay(900 * count).fadeIn(600).effect("bounce", { times:6, distance:15 },300);
    count++;
    }
}); 
```

我将延迟设置`900 * count`为 900 是淡入淡出和反弹的总动画时间。玩弄该值以获得您喜欢的方式:)

# nginx - 在 CentOS 5 上安装 NGINX 时出现“找不到包”错误

> ID：12580894
> 
> 赞同：1
> 
> 时间：2012-09-25T10:19:05.320
> 
> 标签：nginx, centos

该命令`sudo yum install nginx`返回错误`No package nginx available`。我以前试过这个并且它有效，但现在它没有。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T23:23:47.383

nginx 不在“正常”的 Centos[存储库](http://wiki.centos.org/AdditionalResources/Repositories)中。您可以安装[EPEL](http://www.rackspace.com/knowledge_center/article/installing-rhel-epel-repo-on-centos-5x-or-6x)存储库以访问它。[这里](http://www.thegeekstuff.com/2012/06/enable-epel-repository/)有一个指南——[这里](http://articles.slicehost.com/2008/12/17/centos-installing-nginx-via-yum)有一个更新的指南。

添加 EPEL 存储库后，您可以使用您引用的 yum 命令进行安装。

# jquery - 在jquery中删除围绕选定图像的锚标记

> ID：12580896
> 
> 赞同：0
> 
> 时间：2012-09-25T10:19:06.693
> 
> 标签：jquery

我有一段代码，当页面加载时，它会检查一系列图像并查看它们的 id 是否包含单词 video。

如果是这样，我希望能够删除图像周围的锚标记。但是，我目前正在执行此操作的方式（通过 .remove()）会删除图像，因为它位于我要删除的锚标记内。

有没有办法只删除锚标签？注意：图像列表将根据访问它们的用户拉入，因此它不会是可以附加的预先确定的代码。

代码：

```
$(document).ready(function() {
    $('ul.thumbnails li a img').each(function() {
        if($(this).attr('id').indexOf('video') != -1){
            var $parent = $(this).closest('a');
            $parent.remove();
        } else {
            $(this).addClass('photo');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:23:02.863

尝试使用[jQuery 解包](http://api.jquery.com/unwrap/)：

```
$(document).ready(function() {
    $('ul.thumbnails li a img').each(function() {
        if($(this).attr('id').indexOf('video') != -1){
            $(this).unwrap();
        } else {
            $(this).addClass('photo');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:23:45.283

问题是您的锚标记包含您的图像，因此当您删除锚时，您也会删除其中的图像。尝试这个：

```
$(document).ready(function() {
    $('ul.thumbnails li a img').each(function() {
        if($(this).attr('id').indexOf('video') != -1){
            var $parent = $(this).closest('a');
            $parent.replaceWith($(this).html());
        } else {
            $(this).addClass('photo');
        }
    });
}); 
```

所以我用图像标签替换锚标签，而不是删除锚

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:32:02.917

当你删除一个元素时，它的所有子元素也会被删除。因此，您需要先克隆并附加图像。考虑使用克隆功能，尤其是当您需要维护事件处理程序时。

尝试：

```
$(this).closest('li').append($(this).clone()); 
```

在删除 $parent 之前。

# jquery-masonry - 砌体、无限滚动和曲线角

> ID：12580901
> 
> 赞同：0
> 
> 时间：2012-09-25T10:19:13.063
> 
> 标签：jquery-masonry, infinite-scroll, curvycorners

我使用 Masonry 和无限滚动，它们一起工作得很好。我试图添加 curvycorners.js 并让它在每次无限滚动加载新页面时加载，但老实说，我不知道我在做什么。

有谁知道我如何添加下面的代码，以便在每次无限滚动加载新页面时加载。

```
curvyCorners.addEvent(window, 'load', initCorners);function initCorners() {
  var settings = {
    tl: { radius: 5 },
    tr: { radius: 5 },
    bl: { radius: 5 },
    br: { radius: 5 },
    antiAlias: true
  }
  curvyCorners(settings, ".post");
} 
```

# c# - 关于使用c#在gridview中的下拉列表控件

> ID：12580903
> 
> 赞同：0
> 
> 时间：2012-09-25T10:19:19.503
> 
> 标签：c#, dropdownbox

我正在使用以下代码绑定并在网格视图中显示下拉列表。但它总是显示第一项，无论数据库表有第二项还是第三项。

```
 private void BindData1()
    {
        DataSet7TableAdapters.sp_getall_trv_config_masterTableAdapter TA = new DataSet7TableAdapters.sp_getall_trv_config_masterTableAdapter();
        DataSet7.sp_getall_trv_config_masterDataTable DS = TA.GetData();
        if (DS.Rows.Count > 0)
        {
            GridView2.DataSource = DS;
            GridView2.DataBind();

            }
        }

protected void GridView2_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.Footer)
        {
            Control ctrl = e.Row.FindControl("DDL_STATUS_FT");
            if (ctrl != null)
            {
                DropDownList dd = ctrl as DropDownList;
                DataSet7TableAdapters.sp_getall_trv_masterTableAdapter TA = new DataSet7TableAdapters.sp_getall_trv_masterTableAdapter();
                DataSet7.sp_getall_trv_masterDataTable DS = TA.GetData();
                dd.DataTextField = "fld_TName";
                dd.DataValueField = "fld_id";
                dd.DataSource = DS;
                dd.DataBind();
            }

        }
} 
```

设计规范：

```
 <asp:TemplateField ItemStyle-Width="100px" HeaderText="TYPE">
                    <ItemTemplate>
                        <asp:DropDownList ID="DDL_STATUS" runat="server" AutoPostBack="true" Enabled="false" >
                        </asp:DropDownList>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:DropDownList ID="DDL_edit_STATUS" runat="server" AutoPostBack="true">
                        </asp:DropDownList>
                    </EditItemTemplate>
                    <FooterTemplate>
                        <asp:DropDownList ID="DDL_STATUS_FT" runat="server" AutoPostBack="true">
                        </asp:DropDownList>
                    </FooterTemplate>
                </asp:TemplateField> 
```

我想将保存数据显示为选定值。但是现在第一个项目总是显示在下拉列表中。请帮我这样做..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:49:06.110

试试这个：

```
 DropDownList dd = ctrl as DropDownList;
                    DataSet7TableAdapters.sp_getall_trv_masterTableAdapter TA = new DataSet7TableAdapters.sp_getall_trv_masterTableAdapter();
                    DataSet7.sp_getall_trv_masterDataTable DS = TA.GetData();
                    dd.DataTextField = "fld_TName";
                    dd.DataValueField = "fld_id";
                    dd.DataSource = DS;
                    dd.DataBind();
                    dd.SelectedValue= "";//Put your value here which needs to be selected 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:39:53.833

You can set the `'SelectedValue'` on your dropdownlist on clientside like

```
SelectedValue='<%# Eval("fieldname") %>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:28:05.197

由于您没有设置`index/value`保存在数据库中的内容，因此在每次绑定后**默认情况下**会显示**第一项**

# ios - 我想移动指定自动布局的视图的位置。(ios6,xcode4.5)

> ID：12580908
> 
> 赞同：2
> 
> 时间：2012-09-25T10:19:48.097
> 
> 标签：ios, ios6, iphone-5, autolayout

我想指定中心的坐标。

```
- (Void) viewDidLoad
{
    [super viewDidLoad];
    self.motherButton.center = CGPointMake (-100, self.motherButton.center.y);
} 
```

在上面的代码中，motherButton 没有移出屏幕。

你怎么去？我想在动画中移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:37:44.903

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    self.motherButton.center = CGPointMake (-100, 100);
} 
```

**原因**

*   `viewDidLoad`在自动布局完成之前发生。所以motherButton的位置被autolayout改变了
*   `viewDidAppear`自动布局完成后发生。

**注意事项**

1.  您的项目是为较旧的 ios 版本构建的吗？如果是这样，那么当启用自动布局时，Xcode 可能会添加一些约束。

2.  您始终可以修改 nib 文件中的约束（自动布局），也可以通过编程方式修改。在 nib 文件中单击每个视图并查看大小检查器。

3.  添加日志消息以检查帧大小并查看自动布局何时何地更改帧。

4.  对于您以编程`setTranslatesAutoresizingMaskIntoConstraints`方式创建的视图`NO`

    `setTranslatesAutoresizingMaskIntoConstraints``UIView`是在/`NSView`使用它的方式中定义的方法，`v1.translatesAutoresizingMaskIntoConstraints = NO`其中 v1 是任何以编程方式创建的视图。

    注意 - Xcode 也有帮助，按 Option 并单击方法以了解更多信息

5.  观看关于自动布局介绍视频的 WWDC 2012[视频链接到自动布局视频介绍](http://developer.apple.com/videos/wwdc/2012/?id=202)

# visual-studio-2010 - 无法在 App_Data 文件夹中创建 Sql Server 数据库

> ID：12580913
> 
> 赞同：1
> 
> 时间：2012-09-25T10:19:50.013
> 
> 标签：visual-studio-2010, sql-server-2008-express

当我尝试在 Visual Studio 2010 项目的 App_Data 文件夹中创建 Sql Server 数据库时，出现以下错误：

```
Login failed for user:[Domain]\[user] 
```

我能够使用 Sql Server Management Studio 创建数据库。我正在使用 Sql Server Express 2008。

对此的任何帮助表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:49:00.140

当您使用快速版时，在 Visual Studio 中转到工具>选项>数据库工具>数据连接。

删除 SQL Server 实例名称，然后单击确定。

现在尝试使用服务器资源管理器连接到服务器。连接后，您将能够在 App_Data 文件夹中创建一个新数据库。

这是连接字符串：

```
public string ConStr = "Data Source=.;AttachDbFilename=|DataDirectory|CodeDB.mdf;
Integrated Security=True;User Instance=True"; 
```

还要确保您已`user instances`为您的数据库启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-05T07:42:31.857

在 Visual Studio 2013 中：

转到工具-->> 选项-->> 数据库工具-->> 数据连接。SQL Server 实例名称

类型项目V12

然后在 App_Folder 中创建 SQL Server 数据库，它就可以工作了。

以管理员身份打开 CommandPrompt

输入`sqllocaldb info`并按回车

它将显示所有可用的本地数据库。

# yii - Yii：将事件附加到模型

> ID：12580916
> 
> 赞同：3
> 
> 时间：2012-09-25T10:20:01.023
> 
> 标签：yii, yii-components, yii-events

我有一个用户模型，它捆绑在我的 Yii 应用程序上安装的模块中。这个模块是第三方的，我不想改变它的代码。

我还有一个`BELONGS_TO`与 User 模型有关系的 Cv 模型。

我的问题是：删除用户后如何删除简历？我知道我可以`on delete cascade ...`在 mysql 上实现这一点。但是，我确实需要删除其他数据，例如照片、文件等。

**我试过的**

我创建了一个预加载在我的应用程序上的组件。此组件附加到`onAfterDelete`事件

```
class EventListener extends CComponent 
{
    public function init() {

        Yii::import("application.modules.users.models.User");

        User::model()->attachEventHandler('onAfterDelete', array($this, 'deleteUser'));
    }

    public function deleteUser($event)
    {
        // stuff here ...
    }
} 
```

但是，这不起作用。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:43:05.910

这可能会对您有所帮助。

User::model() 是一个单例

```
$user1 = User::model();
$user2 = new User; // will be used in insert action
$user3 = User::model()->findByPk(10); // will be used in update/delete action 
```

$user1、$user2 和 $user3 是完全不同的对象。您可以将事件附加到对象，在这种情况下，您必须分别将事件添加到所有这 3 个对象。

```
$user1->attachEventHandler(...);
$user2->attachEventHandler(...);
$user3->attachEventHandler(...); 
```

看起来 Yii 没有提供任何在类级别添加事件的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-03T18:32:52.887

好吧，伙计们，我刚刚偶然发现了同样的问题，我以这种方式解决了它：

您应该使用模型的 init()，而不是事件侦听器集合类。

就我而言，我有 devModel 类：

```
 public function init()
{
    parent::init(); 
    $this->onLicenseUpdated = array(new MEventProcessor, 'licenseUpdateHandler');
} 
```

处理程序是 MEventProcessor 类中的 licenseUpdateHandler($event)。

这样，每次使用模型实例时，它都会为每个对象调用 init() 并将事件处理程序附加到此模型的每个实例。

现在任何时候为模型调用事件（在我的情况下为 onLicenseUpdated()） - 也将调用处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-06T18:11:58.407

您也可以使用**Behaviors**。

1 - 行为可以监听事件：你只需要覆盖他们的 events() 方法

类 MyBehavior 扩展行为 {

```
public function events() {
    return [
        ActiveRecord::EVENT_BEFORE_VALIDATE => 'beforeValidate',
    ];
}

public function beforeValidate($event) {
    // ...
} 
```

}

2 - 虽然在组件的 behavior() 方法中将行为附加到组件更为常见，但您也可以动态附加它们并保持原始代码不变：

```
use app\components\MyBehavior;

 // attach a behavior object

 $component->attachBehavior('myBehavior1', new MyBehavior); 
```

你会在这里找到一些有用的文档：

*   yii 1：[http ://www.yiiframework.com/doc/api/1.1/CBehavior](http://www.yiiframework.com/doc/api/1.1/CBehavior)
*   yii 2：[http ://www.yiiframework.com/doc-2.0/guide-concept-behaviors.html](http://www.yiiframework.com/doc-2.0/guide-concept-behaviors.html)

# c# - TransactionScope 相关实践

> ID：12580917
> 
> 赞同：0
> 
> 时间：2012-09-25T10:20:02.257
> 
> 标签：c#, transactionscope

我可以在 TransactionScope 中做任何其他事情（与数据库无关）吗？

这会是一个坏习惯吗？

例如

在范围内启动工作流。

*除非启动工作流失败，否则我不想保存在数据库中。*

**如果这是一个不好的做法，那么什么是好的做法？**

提前致谢。

```
using (TransactionScope scope = new TransactionScope())
{
    using (ComponentCM.Audit auditComponent = new ComponentCM.Audit())
    {
        using (AccessCM.Biz dataAccess = new AccessCM.Biz())
        {
            auditComponent.SaveInDB();
            dataAccess.SaveinDB()

            StartWorkflow();
        }
    }
    scope.Complete();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:28:39.563

您希望事务花费尽可能少的时间，因为它们会导致数据库锁定。

对此，最好在事务范围之外做其他工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:44:30.553

我同意奥德。

我还要补充一点，`scope`应该`TransactionScope`定义在您的工作单元中定义的状态更改。换句话说，作用域内的状态更改应该一起成功或失败，并且通常是同一逻辑操作的一部分。

为了使范围尽可能小，一种常见的模式是乐观并发。使用乐观并发时，您通常只在对状态存储执行写操作时打开事务范围。在这种情况下，您可以例外的是，您正在处理的数据通常不会在您查询和提交之间发生更改（通过另一个操作）。

# java - 用于处理嵌套/树数据的 Java 数据库管理系统

> ID：12580923
> 
> 赞同：0
> 
> 时间：2012-09-25T10:20:08.773
> 
> 标签：java, sql, database-design, dynamic, sql-server-express

我需要用 Java 构建一个系统，以保存机器故障记录。但这对我来说变得有点复杂。

要求是这样的。

输入故障记录时，用户应该能够选择一台机器（比如从组合框中）。选择机器后，下方将出现一个组合框以显示机器的各个部分。一旦选择了一个部分，*如果所选部分有 subsections*，另一个组合将显示这些子部分......这就是这样，直到我们来到预期的最终感兴趣部分。然后只有用户可以输入一些关于故障的描述..

我希望这部分很清楚。

然后还有另一个要求，可搜索性。也与上面类似。记录应该能够在上述所有字段下进行搜索。这意味着，如果一台机器有多个级别的子部分，我们应该能够在所有这些级别下进行搜索......

我已经建立了一个系统来处理具有两个级别的子部分的机器。但这不是工作。所以我重新开始（几次：D）..

我正在使用`SQLExpress 2008`. 但我对此没有多少经验。因为我不知道如何使用 SQLExpress 来处理嵌套/树结构数据。我曾想过使用 XML。是的，这有点难看，因为除了数据库之外，我还必须维护一个包含嵌套数据的 XML 文件文件夹。我以为我已经做到了..直到我记得搜索要求.. :(

最后，我放弃了。突然想起了论坛！有人可以帮我弄这个吗。这是分配给我的一个培训项目。我喜欢编程，但我没有那么多高级知识/经验。这种动态性质和处理嵌套数据的要求让我感到困惑。

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:16:31.260

数据库设计并不完全直观或容易。通过反复试验学习可能需要很长时间。在尝试通过实验学习之前，最好学习一些基本概念并学习如何将它们应用于多个案例。全栈已经为您指明了正确的方向。这是一个摘要：

有几种方法可以在 SQL 表中存储树结构数据。有一种邻接列表技术，使用单独的列，将其称为“ParentId”，它引用同一表的不同行中的 Id 列。您可以使用它来创建任何所需深度的树，但递归搜索它并不容易。您通常必须使用 SQL 语言的特定于产品的扩展或在您的编程语言中进行树搜索。后一种选择几乎浪费了一个好的 DBMS 提供给您的所有功能。还有另一种方法，称为嵌套集模型。当您需要将新叶子放入树中或将叶子变成树枝时，更新会有些困难。但是查询真的很好用。

这两种方法都假定您了解外键引用主键的概念，并且您可以在多对一或多对多情况下使用关系模型。创建一个同样适合搜索所有属性的数据库是一个重要的设计问题。在掌握基本知识之前不要解决它。

如果你做对了，数据库设计并不是非常复杂。看一百个表比看十万行代码容易。但它比编程更抽象。很难学会用数据声明而不是面向行动的命令来表达需求。

# android - android显示即时时间

> ID：12580925
> 
> 赞同：0
> 
> 时间：2012-09-25T10:20:15.943
> 
> 标签：android, layout, time, chat

在我的聊天应用程序中，我需要在消息下方显示聊天发送/接收时间。我使用 holder 来显示我的消息。我如何将聊天发送/接收时间与这些时间一起包括在内？我的代码如下：

```
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder = null;

    if (convertView == null) {
        if(itemDetailsrrayList.get(position).getId().contains("1"))
        {
            convertView = l_Inflater.inflate(R.layout.item_details_view2, null);
            holder = new ViewHolder();
            holder.txt_itemName = (TextView) convertView.findViewById(R.id.name);
            holder.chat_id=(TextView) convertView.findViewById(R.id.id);

            convertView.setTag(holder);
        }
        else
        {
            convertView = l_Inflater.inflate(R.layout.item_details_view, null);
            holder = new ViewHolder();
            holder.txt_itemName = (TextView) convertView.findViewById(R.id.name);
            holder.chat_id=(TextView) convertView.findViewById(R.id.id);

            convertView.setTag(holder);

        } 
    } 
    else
    {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.txt_itemName.setText(itemDetailsrrayList.get(position).getName());
    holder.chat_id.setText(itemDetailsrrayList.get(position).getId());

    return convertView;

}
static class ViewHolder {
    public TextView timef;
    TextView txt_itemName;
    TextView chat_id;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:27:05.030

像这样获取日历实例

```
final Calendar c = Calendar.getInstance();       
    hour = c.get(Calendar.HOUR_OF_DAY);
    minute = c.get(Calendar.MINUTE);
//  second = c.get(Calendar.SECOND);         

    if (c.get(Calendar.AM_PM) == Calendar.AM)
        am_pm = "AM";
    else if (c.get(Calendar.AM_PM) == Calendar.PM) 
        am_pm = "PM";                                   

    if (c.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY)
        day = "Sunday";
    else if (c.get(Calendar.DAY_OF_WEEK) == Calendar.MONDAY) 
        day = "Monday"; 
```

发送

```
 String send_msg = "send_msg +"\n"+"Send at"+" "+hour+":"+minute+" "+ am_pm+" "+"on"+" "+day; 
```

收到

```
 String receve_msg = "receve_msg +"\n"+"receve at"+" "+hour+":"+minute+" "+ am_pm+" "+"on"+" "+day; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:27:52.143

您可以为此使用 Calander。

```
 Calender cc = cc.getInstance();
    Date date = cc.getTime();
    SimpleDateFormat format = new SimpleDateFormat("hh:mm:ss a");
    String time = format.format(date); 
```

# asp.net-mvc - 如何在我的域上将 ASP.net MVC 应用程序上传/发布到 Godaddy

> ID：12580926
> 
> 赞同：0
> 
> 时间：2012-09-25T10:20:19.993
> 
> 标签：asp.net-mvc, deployment

我使用 Visual Studio 2010 Express Edition 在 MVC 中开发了 ASP.NET 应用程序。我在 Godaddy 上有域名。如何在godaddy 上部署MVC 应用程序？我需要遵循哪些步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:19:04.337

请务必注意，如果您的应用程序使用 MVC，则需要对其进行[bin 部署](https://stackoverflow.com/questions/266205/is-there-a-way-that-i-can-run-a-asp-net-mvc-project-on-godaddy-com-shared-web-ho)才能在 GoDaddy 上运行。您需要手动将项目正在使用的任何与 MVC 相关的 DLL 复制到生产 bin 目录中。

或者，您可以在“属性”窗口中为您的任何 MVC 相关项目引用设置“复制本地”等于“真”，如[本博客文章](http://haacked.com/archive/2008/11/03/bin-deploy-aspnetmvc.aspx)中所述。然后，当您发布应用程序时，将自动包含所有需要的程序集。

请务必部署您需要[的正确版本](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)的 DLL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T12:20:48.777

当然，您可以部署您的 MVC 4 应用程序。Godaddy 支持 MVC 4。我为部署 MVC 4 应用程序所做的是：

**1\. 我包括了 DLL，例如：**

*   系统.Web.Mvc
*   系统.Web.路由
*   System.Web.抽象

**2\. 我编辑了 web.config 文件。我放了下一个字符串：**

```
<system.web>
   <trust level="Medium"/>
   .....  
</system.web> 
```

**3\. 然后我使用文件系统发布方法，然后我使用 FileZilla 将文件传输到 GoDaddy。**我将所有文件复制到 httpdocs 目录。您必须只复制到*httpdocs 目录。*

就这样。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T11:00:38.890

1）在本地测试机器上发布您的站点。

2) 登录 Go-Deddy 的控制面板。

3）从内容中选择文件文件管理器并上传您的内容。

4）给出正确的连接字符串。

而已...........

以上是高级步骤。您[可以检查](http://ammonsonline.com/2008/04/godaddy-and-aspnet-apps-aspx/)以获得更好的解释。

# java - 如何在检票口中隐藏现有页面

> ID：12580929
> 
> 赞同：2
> 
> 时间：2012-09-25T10:20:28.630
> 
> 标签：java, wicket

我有一些网页的网络应用程序。现在我想在我的配置中的某些属性为假时隐藏它们。隐藏它们我的意思是当有人写网页地址时，将找不到状态。这可能在检票口中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T13:03:23.597

`AbortWithHttpErrorCodeException`你可以在你的页面中抛出一个：

```
public HomePage(final PageParameters parameters) {

   if(someConditionToHidePage) {
      throw new AbortWithHttpErrorCodeException(404, "page not found");
   }
} 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:20:11.183

我不认为这是可能的。如果您的配置中的属性为假，您可以构建一个禁用的自定义链接组件。

# c# - 奇怪的 C# 到 SQL 动态查询执行

> ID：12580933
> 
> 赞同：1
> 
> 时间：2012-09-25T10:20:51.307
> 
> 标签：c#, sql, sql-server-2008, dynamic-sql

总之，我有一个从 C# 应用程序执行的动态 SQL 查询。问题查询是一个 INSERT 语句，它在 C# 循环中运行，在许多数据库上按顺序执行以创建单个数据仓库 [数据库]。我已经在一个批次中运行了 100 多个数据库，没有问题；但是，我刚刚遇到了一个特定的数据库，其中查询

```
DECLARE @DbName NVARCHAR(128);
SET @DbName = (SELECT TOP 1 [DbName] 
               FROM [IPACostAdmin]..[TmpSpecialOptions]);
DECLARE @FilterSql NVARCHAR(MAX);
SET @FilterSql = (SELECT TOP 1 [AdditionalSQL] 
                  FROM [IPACostAdmin]..[TmpSpecialOptions]);
DECLARE @SQL NVARCHAR(MAX);
DECLARE @SQL1 NVARCHAR(MAX);
DECLARE @SQL2 NVARCHAR(MAX);
SET @SQL1 = 
'INSERT INTO [' + @DbName + ']..[Episode] WITH(TABLOCK) 
    ([EstabID],..., [InclFlag]) '; 
SET @SQL2 = 
'SELECT 
     [EstabID],..., [InclFlag] 
FROM [B1A] ' + @FilterSql + ';'; 
SET @SQL = @SQL1 + @SQL2;
EXEC sp_executesql @SQL; 
```

从插入 20,000-30,000 条记录大约需要 3 秒到 40 多分钟！现在，经过长时间的考虑和实验，我刚刚解决了这个问题；它是使用

```
EXEC sp_executesql @SQL WITH RECOMPILE; 
```

这使其插入时间回落到 < 2 秒。

对于批处理中的每个数据库，此SQL从应用程序执行一次，就服务器而言，该语句的当前执行*应该*与前面的执行完全分开（据我了解），但事实并非如此；在这种情况下，似乎 SQL 正在兑现动态 SQL。

我想知道这个单一站点发生了什么？我需要在哪里确保我`RECOMPILE`将来使用该选项来防止此类问题？

谢谢你的时间。

_笔记。我很欣赏这会重新编译查询，但我对为什么服务器首先使用相同的执行计划感到困惑。每次运行此查询时，它都是针对不同的数据库使用不同的`Initial Catalog`，使用不同的`SqlConnection`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:30:56.697

当你重新编译时，sql server 每次都会生成新的执行计划并执行它。否则它将尝试使用存储在过程缓存中的现有执行计划，这对于当前查询可能是错误的，因为在动态查询中，条件和参数在每次执行时都会更改..

# javascript - css状态之间的动画？

> ID：12580934
> 
> 赞同：2
> 
> 时间：2012-09-25T10:20:54.460
> 
> 标签：javascript, jquery, html, css

我可以在悬停状态之间制作动画吗？

例如：

```
#menu ul li a {
    display:block;
    margin:0px;
    padding:0px;
    color:#FFF;
    text-decoration:none;
    font-family: Arial, Helvetica, sans-serif;
    margin-right: 5px;
    margin-left: 5px;
    padding-left: 10px;
    padding-right: 10px;
}
#menu ul li a:hover {
    color:#fff;
    margin-bottom:5px;
    padding-bottom:5px;
    border-bottom: 25px solid #0488C5; 
```

所以底部边框会从 0 上升到 25px。

我不确定这是否可以通过 CSS 实现，或者我是否必须使用 jQuery？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-25T10:24:54.703

您可以使用 CSS3 过渡，但目前它们的支持不是很好：

```
#menu ul li a {
    -webkit-transition：边框 .5s 缓入出局；
    -moz-transition：边框 .5s 缓进出；
    -o-transition：边框 .5s 缓入出局；
    过渡：边界 .5s 缓进出；
}

```

语法是：`element` `time` `easing`

这是一个[小提琴](http://jsfiddle.net/ahallicks/2d3ew/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T10:25:59.617

是的，只需添加一个 CSS 过渡。

在`#menu ul li a {`

只需添加：

```
-webkit-transition: border .5s ease-in-out;
-moz-transition: border .5s ease-in-out;
-o-transition: border .5s ease-in-out;
transition: border .5s ease-in-out; 
```

顺便说一句，您不需要 ms，IE10 不使用前缀。

有关加载更多信息，请查看[http://css3.bradshawenterprises.com/](http://css3.bradshawenterprises.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:25:08.527

您可以使用[jQuery UI在 css 类之间制作动画](http://jqueryui.com/demos/animate/)

```
$( ".newClass" ).switchClass( "newClass", "anotherNewClass", 1000 ); 
```

您还可以使用它来为 css 属性设置动画：

```
$( "#effect" ).animate({
    backgroundColor: "#aa0000",
    color: "#fff",
    width: 500
}, 1000 ); 
```

这将从当前的背景颜色、颜色和宽度变为您指定的动画。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T10:29:16.317

CSS3 过渡可以完成这项工作：

```
#menu ul li a {
    display:block;
    color:#FFF;
    text-decoration:none;
    font-family: Arial, Helvetica, sans-serif;
    margin: 0 5px;
    padding: 0 10px;
    -webkit-transition: border-bottom-width 0.5s ease-in-out;
    -moz-transition: border-bottom-width 0.5s ease-in-out;
    -o-transition: border-bottom-width 0.5s ease-in-out;
    transition: border-bottom-width 0.5s ease-in-out;
}
#menu ul li a:hover {
    color:#fff;
    margin-bottom:5px;
    padding-bottom:5px;
    border-bottom: 25px solid #0488C5;
} 
```

# jquery - 序列化空数组输入

> ID：12580940
> 
> 赞同：2
> 
> 时间：2012-09-25T10:21:02.973
> 
> 标签：jquery, post, serialization, input

> **可能重复：**
> [发布未选中的复选框](https://stackoverflow.com/questions/1809494/post-the-checkboxes-that-are-unchecked)

我在序列化空数组输入时遇到了问题。例如：

```
<input type="checkbox" name="test_checkbox[]" value="test" id="test">
<input type="checkbox" name="test_checkbox[]" value="test1" id="test1">
<input type="checkbox" name="test_checkbox[]" value="test2" id="test2"> 
```

当这些都没有被检查并且我提交表单（通过 POST）时，jQuery.serialize() 会排除它们并且它们不会出现在我的 $_POST/Serialized 字符串中。

但是我需要像 test_checkbox=0 这样的东西，当没有勾选时。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:28:54.927

试试这种方式 **[DEMO](http://jsfiddle.net/efJBm/1/)**

```
 <form id="testform">
        <input type="checkbox" name="test_checkbox[0]" id="test" checked="checked" value="true"/>
        <input type="checkbox" name="test_checkbox[1]" id="test1" checked="checked" value="true"/>
    <span>click</span>
    </form> 
```

**脚本**

```
$('span').click(function() {
    var formDate = $('#testform').serialize();
    console.log(formDate);
})​ 
```

现在你想要这样看**[演示](http://jsfiddle.net/efJBm/2/)**

```
$('span').click(function() {
     var str=$('form input:not([type="checkbox"])').serialize();
    var str1=$("form input[type='checkbox']").map(function(){return this.name+"="+this.checked;}).get().join("&");
    if(str1!="" && str!="") str+="&"+str1;
    else str+=str1; 
    alert(str);
})​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:36:01.793

只需将其插入您的服务器代码中

```
$_POST['test_checkbox'] = isset($_POST['test_checkbox']) ? $_POST['test_checkbox'] : 0; 
```

如果客户端没有设置任何变量，则将`$_POST['test_checkbox']`变量设置为 0。不过，我建议使用新变量而不是重置 中的条目`$_POST`。

# c# - 无法将参数值从字符串转换为日期时间

> ID：12580947
> 
> 赞同：2
> 
> 时间：2012-09-25T10:21:14.783
> 
> 标签：c#, asp.net, sql

使用带类型的命令参数时出现错误`sqldbtype.datatime`

这是我正在使用的代码

```
 cmd.Parameters.Add("@Posted_date", SqlDbType.DateTime).Value = Convert.ToDateTime(dt.Rows[i]["messagePostedDate"]); 
```

错误是“无法将参数值从字符串转换为日期时间”并且 dt.Rows[i]["messagePostedDate"] 的值为“2008-10-01 00:00:00.000” –

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T15:15:47.390

问题是 SQL Server 中登录帐户的语言与您的 ui 文化语言不匹配。

.NET 正在尝试将您传递的日期转换为 sql server 中的日期格式。它会将来自客户端的日期作为字符串传输，并且无法转换它，因为客户端文化不同于为 SQL Server 登录设置的默认“语言”。

要解决此问题，您需要将 sql server 会话`set language xxxxx`的语言与 a 匹配，或使用 SQL Management Studio 更改登录语言或更改 SQL Server 默认语言。

然后它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:35:48.993

尝试使用：

```
Convert.ToDateTime Method (String, IFormatProvider) 
```

使用指定的区域性特定格式信息将数字的指定字符串表示形式转换为等效的日期和时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T10:42:22.623

根据您的评论，您需要解析 DateTime，例如：

```
DateTime date = DateTime.ParseExact(dt.Rows[i]["messagePostedDate"].ToString(),
                         "yyyy-MM-dd HH:mm:ss.fff",
                         CultureInfo.InvariantCulture);

cmd.Parameters.Add("@Posted_date", SqlDbType.DateTime).Value = date; 
```

由于您的字符串包含 DateTime Format `yyyy-MM-dd HH:mm:ss.fff`，因此您可以将[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)与您的日期格式一起使用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-25T10:43:53.977

`(convert(varchar,messagePostedDate,101)) as messagePostedDate`在您的选择查询中使用它是一个参考链接，它具有 T-SQL 的所有转换和转换 [http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

# javascript - JQueryMobile 结合 iOS - 点击事件双弹跳

> ID：12580949
> 
> 赞同：1
> 
> 时间：2012-09-25T10:21:19.660
> 
> 标签：javascript, jquery-mobile

这涉及在 iOS 上运行的 JQueryMobile javascript 为什么点击事件绑定会导致两个事件以大约 300 毫秒的间隔传播到处理程序。

```
 $('#container').bind("tap",Handler.tap); 
```

虽然点击事件绑定只创建一个事件

```
 $('#container').bind("click",Handler.tap); 
```

# ios - iOS6没有libxml2.2.7.3.dylib。有替代品吗？

> ID：12580950
> 
> 赞同：4
> 
> 时间：2012-09-25T10:21:24.883
> 
> 标签：ios, xcode

我在 xcode4.2 中创建了一个项目，当我用 xcode4.5 打开它时，iOS 6 SDK 出现错误 255，原因似乎是没有 libxml2.2.7.3.dylib。

我有什么选择 是否提供了其他替代品？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-25T10:44:44.487

Xcode 4.5，或更准确地说是 iOS6 SDK（因为可用的库依赖于 SDK，而不是 Xcode 版本）仍然具有`libxml2.2.dylib`.

它可能不是 2.2.7.3 版本，而是现在嵌入在 SDK 中的更新、最新的 2.2.xy 版本。

**您通常不应该将您的应用程序与特定版本的库链接，但最好使用通用版本，如`libxml2.dylib`or`libxml2.2.dylib`**。

通常库尊重语义版本控制，这意味着：

*   仅当 API 与以前的主要版本不向后兼容时，它们的主要版本才会更改，
*   仅当 API 中引入新方法时，次要版本才会更改，但仍与以前的 API 兼容，
*   补丁版本意味着已经进行了一些错误修复，但 API 没有更改。

因此，如果`libxml`尊重这种语义版本控制（我猜是这样，就像几乎所有标准库一样），每个版本`2.2.x.y`的`libxml`API 都与任何其他版本兼容，`2.2.x.y`并将继续与您的程序一起使用。假设的新版本`libxml2.2.x.z`将简单地修复错误，但不会对其 API 进行任何更改。并且当一个版本`libxml2.3.x.y`出现时，它仍将向后兼容`2.1`and `2.2`（只是添加新功能但不删除现有功能）。

因此，**您可以安全地将您的应用程序与通用库版本链接`libxml2.dylib`，该版本将自动指向`2.x.y.z`**当前 SDK 中**可用的最新版本。**或指向最新版本的链接（这些是`libxml2.2.dylib`指向最新`2.2.x.y`版本的符号链接，就像所有类 UNIX 操作系统都使用的那样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:23:23.440

我认为 iOS6 的 SDK 只包含不同版本的**libxml**

# arm - 使用什么算法来确定数据是否可在 ARM Cortex-M0 中缓存（由 HPROT[3] 信号位显示）

> ID：12580951
> 
> 赞同：0
> 
> 时间：2012-09-25T10:21:25.077
> 
> 标签：arm, cpu-cache

如上所述，ARM Cortex-M0 的 HPROT[3] 信号告诉您总线上的数据是否可缓存。MC是怎么决定的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:00:45.347

根据使用的地址决定。

文档是你的朋友。具体[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0497a/CIHDHAEF.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0497a/CIHDHAEF.html)。

# android - 从保管箱下载文件期间未调用 onProgressUpdate()

> ID：12580958
> 
> 赞同：3
> 
> 时间：2012-09-25T10:22:00.963
> 
> 标签：android, dropbox

我从过去 2 天开始一​​直坚持.. 在我的情况下，onProgressUpdate() 没有被调用.. 所以它没有更新进度条.. 任何人都可以看看并提出建议.. 谢谢。这是我的代码

```
package com.example.downloadupload;

import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Environment;
import android.util.Log;
import com.dropbox.client2.DropboxAPI;
import com.dropbox.client2.ProgressListener;
import com.dropbox.client2.android.AndroidAuthSession;
import com.dropbox.client2.exception.DropboxException;

public class DownloadFile extends AsyncTask<Void, Long, Boolean> {

    DropboxAPI<AndroidAuthSession> dDBApi;
    Context dContext;
    private final  ProgressDialog uDialog;
    private long dFileLen;
    long bytess;

    public DownloadFile(Context context,
        DropboxAPI<AndroidAuthSession> mDBApi) {
        dDBApi=mDBApi;
        dContext=context.getApplicationContext();
        uDialog = new ProgressDialog(context);
        uDialog.setMax(100);
        uDialog.setMessage("Downloading Image");
        uDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        uDialog.show();
    }

@Override
protected Boolean doInBackground(Void... params) {

    String path1= Environment.getExternalStorageDirectory()+"/log.txt";
    BufferedOutputStream out=null;
    try {
        File file = new File(path1);
        out = new BufferedOutputStream(new FileOutputStream(file));
        dDBApi.getFile("/log.txt", null,out,new ProgressListener() {

          /* @Override
           public long progressInterval() {
               // Update the progress bar every half-second or so
               return 500;
           }*/

            @Override
            public void onProgress(long bytes, long total) {
                // TODO Auto-generated method stub
                bytess=bytes;
                publishProgress(bytes);
            }
        });
    } catch (DropboxException e) {
        Log.e("DbExampleLog", "Something went wrong while downloading.");
    } catch (FileNotFoundException e) {
        Log.e("DbExampleLog", "File not found.");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {
        if (out != null) {
            try {
                out.close();
            } catch (IOException e) {}
        }
    }
    return null;
}

@Override
protected void onProgressUpdate(Long... progress) {
    // TODO Auto-generated method stub
    super.onProgressUpdate(progress);
    int percent = (int)(100.0*(double)progress[0]/bytess + 0.5);
    uDialog.setProgress(percent);
    System.out.println("Hi progressing");
}

@Override
protected void onPostExecute(Boolean result) {
    // TODO Auto-generated method stub
    super.onPostExecute(result);

    uDialog.dismiss();
    System.out.println("calling post execute");
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-06T05:49:54.920

而不是这个

```
int percent = (int)(100.0*(double)progress[0]/bytess + 0.5); 
```

用这个

```
int percent = (int)(100.0*(double)progress[0]/TotalsizeOfFile  + 0.5); 
```

你可以取消注释

```
 @Override

       public long progressInterval() 

       {

           // Update the progress bar every half-second or so

           return 500;

       } 
```

它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:32:33.587

我认为错误是这个

```
bytess=bytes;
publishProgress(bytes); 
```

接着，

```
int percent = (int)(100.0*(double)progress[0]/bytess + 0.5); 
```

在这里，progress[0] = bytess -> everytime，因此进度可能不会得到更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:46:06.153

使 onProgress() 像这样

```
public void onProgress(long bytes, long total) {
// TODO Auto-generated method stub
    long[2] bytess = {bytes, total};
    publishProgress(bytess);
 } 
```

并计算百分比

```
int percent = (int)(100.0*(double)progress[0]/progress[1]+ 0.5); 
```

# php - 从总金额中减去首付

> ID：12580962
> 
> 赞同：-2
> 
> 时间：2012-09-25T10:22:18.323
> 
> 标签：php, mysql, database, shopping-cart, opencart

我已经创建了 opencart 电子商务结帐系统...

我为每个产品添加了一个额外的字段，所以当我结帐产品时，我想从购物车的总金额中减去我的总首付金额......

```
example for my cart
product1 10,    downpayment 5  (number means US dollar)
product1 15,    downpayment 8

my total amount is 25
total Downpayment is 13 
```

我想从总金额中减去首付并在总金额下方回显这个值......如果得到结果，它将是这样的：

```
total amount      = 25 
downpayment       = 13 
remaining balance = 12 
```

任何人请帮助我.?? 抱歉我的英语不完美...我是 PHP 新手...

我已经从我的数据库中创建了产品表.. 下面给出了一个上传的产品字段...

```
===数据库 q8marketz

== 表产品的表结构

|------
|字段|类型|空|默认
|------
|//**product_id**//|int(11)|否|
|型号|varchar(64)|否|
|首付|varchar(32)|否|
|sku|varchar(64)|否|
|upc|varchar(12)|否|
|ean|varchar(14)|否|
|jan|varchar(13)|否|
|isbn|varchar(13)|否|
|mpn|varchar(64)|否|
|位置|varchar(128)|否|
|数量|int(4)|否|0
|stock_status_id|int(11)|否|
|图像|varchar(255)|是|NULL
|manufacturer_id|int(11)|否|
|运费|tinyint(1)|否|1
|价格|十进制(15,4)|否|0.0000
|点|int(8)|否|0
|tax_class_id|int(11)|否|
|date_available|日期|否|
|权重|小数(15,8)|否|0.00000000
|weight_class_id|int(11)|否|0
|长度|十进制(15,8)|否|0.00000000
|宽度|十进制(15,8)|否|0.00000000
|高度|十进制(15,8)|否|0.00000000
|length_class_id|int(11)|否|0
|减|tinyint(1)|否|1
|最小|int(11)|否|1
|排序顺序|int(11)|否|0
|状态|tinyint(1)|否|0
|添加日期|日期时间|否|0000-00-00 00:00:00
|date_modified|日期时间|否|0000-00-00 00:00:00
|已查看|int(5)|否|0
== 转储表产品的数据

|886|BA-手提包-001ss|8| | | | | | |aaaa|95|7|data/hand-bags.jpg|7|0|25.0000|25|0|2012-09-03|0.00000000|1|0.00000000|0.00000000|0.00000000|1|1|1|1|1 |2012-09-25 13:00:18|2012-09-25 14:15:09|0

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:25:07.793

这可能很容易在购物车的 PHP 代码中完成，如下所示：

```
$total=25;
$downpayment=13;
$remainingBalance = $total-$downpayment;
echo $remainingBalance; 
```

不过，基于这个和你之前的问题，我*真的*建议你看看一些基本的 PHP 和 SQL 教程。[这样](http://www.webmonkey.com/2010/02/php_tutorial_for_beginners/)的事情可能会大大帮助您解决遇到的这些问题。现在，我不是说*不要问*，我在想你可能会在路上学到很多东西。

# c# - 证明我们的程序无病毒的证书？

> ID：12580964
> 
> 赞同：4
> 
> 时间：2012-09-25T10:22:26.383
> 
> 标签：c#, .net, security, antivirus, malware-detection

我们正在制作一个软件 (C# / .NET 2.0)，该软件可在网站上下载。

现在这是一个只为少数客户提供的特殊程序。结果，许多防病毒程序（Norton、Mc Afee、Avira ......）不了解我们的程序并发出错误警报（“可疑......” - “社区不知道......”等。 ）。

许多客户感到不安全，或者不知道如何处理。

那么，一般情况下如何处理呢？我们可以添加某种“证明”来保证我们的程序没有病毒吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:24:29.507

您可以为您的可执行文件购买证书：例如，从：[https ://www.symantec.com/products-solutions/families/?fid=code-signing](https://www.symantec.com/products-solutions/families/?fid=code-signing)

这应该会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T10:33:35.683

您可以从防病毒/反恶意软件供应商处获得证书。它会定期扫描您的网站并向您提供证书，这将帮助您建立对客户的信任，

[https://www.mcafeesecure.com/pdf/mcafee-secure-for-websites-service-datasheet.pdf](https://www.mcafeesecure.com/pdf/mcafee-secure-for-websites-service-datasheet.pdf)

# c#-4.0 - 覆盖 Equals 和 GetHashcode 以及双重比较

> ID：12580981
> 
> 赞同：1
> 
> 时间：2012-09-25T10:23:47.903
> 
> 标签：c#-4.0, comparison, double, equals, gethashcode

我在相等和向字典中添加对象时遇到问题

```
class DoublePoint
{
    public double X;
    public double Y;
    public double Z;

    public DoublePoint(double x, double y, double z)
    {
        this.X = x; this.Y = y; this.Z = z;
    }

    public override bool Equals(object obj)
    {
        try
        {
            DoublePoint dPoint = obj as DoublePoint;
            return this.X.IsEqualTo(dPoint.X) && this.Y.IsEqualTo(dPoint.Y) && this.Z.IsEqualTo(dPoint.Z);
        }
        catch
        {
            throw;
        }
    }

    public override int GetHashCode()
    {
        return this.X.GetCode() ^ this.Y.GetCode() ^ this.Z.GetCode();
    } 
}

static class extensions
{
    static double Tolerance = 0.001;
    public static bool IsEqualTo(this double d1, double d2)
    {
        return (d1 - d2) <= Tolerance;
    }

    public static int GetCode(this double d1)
    {
        byte[] data = BitConverter.GetBytes(d1);
        int x = BitConverter.ToInt32(data, 0);
        int y = BitConverter.ToInt32(data, 4);
        return x ^ y; 
    }
} 
```

这是我的测试：

```
DoublePoint d1 = new DoublePoint(1.200, 2.3, 3.4);
        DoublePoint d2 = new DoublePoint(1.2001, 2.3, 3.4);
        DoublePoint d3 = new DoublePoint(1.200, 2.3, 3.4);
        bool isEqual = d1.Equals(d2); // true here

        Dictionary<DoublePoint, int> dict = new Dictionary<DoublePoint, int>();
        dict.Add(d1, 1); 
        dict.Add(d2, 2); // successful, d2 is also added but d2 is equal to d1
        dict.Add(d3, 3); // Error! since we have d1 already in dictionary 
```

有了这个，

1.  当我添加相同的双点对象（具有一定的公差）时，我可以将它们添加到字典中。如何限制此类对象。

2.  是比较具有一定公差的双重数据类型的正确方法。

请指教。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:23:20.443

将“相等”定义为“足够接近”存在问题。毫无疑问，它对计算很有用，但是这种“相等”违反了传递性规则：因为`Equals`if `a.Equals(b) && b.Equals(c)`， then`a.Equals(c)` **必须**成立（这显然不是您的代码的属性）。

所以，`IsEqualTo`不幸的是不适合重新定义`Equals`.

解决问题的可能方法是什么？`Equals`必须分成不相交的“等效”值组。我通常执行以下操作：定义一个规则以从组中获取“规范”值，因此如果它们的规范组代表相等，则两个值是“相等的”。

简单的例子：对于一个 double 值，`d`让我们将规范值定义为`Math.Floor(d)`。所以这样你有 1.0 等于 1.1，0.9 等于 0.0 但*不*等于 1.0。这种方式并不理想（毕竟0.9不等于1.0但等于0.0似乎是错误的），但至少传递性规则是成立的。

特别是对于您的情况，可能是这样的：

```
class DoublePoint
{
    public double X;
    public double Y;
    public double Z;

    const double epsilon;
    void GetCanonicalValues(out double x, out double y, out double z)
    {
        x = Math.Floor(X / epsilon) * epsilon;
        y = Math.Floor(Y / epsilon) * epsilon;
        z = Math.Floor(Z / epsilon) * epsilon;
    }

    public override bool Equals(object obj)
    {
        DoublePoint that = obj as DoublePoint;
        if (that == null)
            return false;
        double x1, y1, z1, x2, y2, z2;
        this.GetCanonicalValues(out x1, out x2, out z2);
        that.GetCanonicalValues(out x1, out x2, out z2);
        return (x1 == x2) && (y1 == y2) && (z1 == z2); // here we can compare
    }

    ... 
```

您的代码的另一个问题是您的代码`GetHashCode`不符合`Equals`: if `a.Equals(b)`then `a.GetHashCode()` **must** equal `b.GetHashCode()`。

您也可以通过使用规范值来解决此问题：

```
 public override int GetHashCode()
    {
        double x, y, z;
        GetCanonicalValues(out x, out y, out z);
        return x.GetHashCode() ^ y.GetHashCode() ^ z.GetCode();
    }
} 
```

请注意， 的行为`Equals`可能无法满足您的需求 - 然后您需要以其他方式确保传递性。

# ruby-on-rails - 运行 heroku db:pull 时无法获取表信息

> ID：12580982
> 
> 赞同：5
> 
> 时间：2012-09-25T10:23:49.667
> 
> 标签：ruby-on-rails, ruby, database, heroku, pull

我有一个在开发和生产中使用 postgres 的应用程序。我最近推到heroku，一切正常。我能够从 heroku 中提取数据库并毫无问题地向上推。然而今天，我试图从 heroku 中拉下数据库，我收到了这个错误

```
heroku db:pull

Loaded Taps v0.3.24
    Auto-detected local database: postgres://postgres:a@127.0.0.1/app_development?encoding=utf8
    Warning: Data in the database 'postgres://postgres:a@127.0.0.1/app_development?encoding=utf8' will be overwritten and will not be recoverable.

     !    WARNING: Destructive Action
     !    This command will affect the app: app
     !    To proceed, type "app" or re-run this command with --confirm app

    > app
Receiving schema
Unable to fetch tables information from http://heroku:osui59a24am79x@taps19.heroku.com. Please check the server log. 
```

所以我`heroku logs`追赶：

```
james@james-Vostro-3550:~/Desktop/app$ heroku logs
2012-09-25T10:08:32+00:00 app[web.1]: Started GET "/users" for X.X.X.X at 2012-09-25 10:08:32 +0000
2012-09-25T10:08:32+00:00 heroku[router]: GET app.herokuapp.com/users? dyno=web.1 queue=0 wait=0ms service=38ms status=200 bytes=10727
2012-09-25T10:08:32+00:00 app[web.1]: 
2012-09-25T10:08:32+00:00 app[web.1]: 
2012-09-25T10:08:32+00:00 app[web.1]: Started GET "/application.css" for X.X.X.X at 2012-09-25 10:08:32 +0000
2012-09-25T10:08:32+00:00 app[web.1]: 
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2012-09-25T10:08:32+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/application.css"):
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/logger.rb:26:in `call_app'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/logger.rb:16:in `call'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2012-09-25T10:08:32+00:00 heroku[router]: GET app.herokuapp.com/application.css dyno=web.1 queue=0 wait=0ms service=6ms status=404 bytes=728
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/static.rb:62:in `call'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:479:in `call'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:220:in `call'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `catch'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:80:in `block in pre_process'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:53:in `process'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `pre_process'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:38:in `receive_data'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/backends/base.rb:63:in `start'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/server.rb:159:in `start'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:86:in `start'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:185:in `run_command'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:151:in `run!'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/bin/thin:6:in `<top (required)>'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
2012-09-25T10:08:32+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
2012-09-25T10:08:32+00:00 app[web.1]: 
2012-09-25T10:08:32+00:00 app[web.1]: 
2012-09-25T10:08:32+00:00 heroku[router]: GET app.herokuapp.com/assets/admin-e0756c8b3550bb800d5f58837c42ec80.css dyno=web.1 queue=0 wait=0ms service=7ms status=200 bytes=1941
2012-09-25T10:08:32+00:00 app[web.1]: 
2012-09-25T10:08:32+00:00 app[web.1]: 
2012-09-25T10:08:32+00:00 app[web.1]: Started GET "/assets/admin-e0756c8b3550bb800d5f58837c42ec80.css" for X.X.X.X at 2012-09-25 10:08:32 +0000
2012-09-25T10:08:41+00:00 app[web.1]: 
2012-09-25T10:08:41+00:00 app[web.1]: 
2012-09-25T10:08:41+00:00 app[web.1]: Started GET "/projects" for X.X.X.X at 2012-09-25 10:08:41 +0000
2012-09-25T10:08:41+00:00 heroku[router]: GET app.herokuapp.com/projects dyno=web.1 queue=0 wait=0ms service=31ms status=304 bytes=0
2012-09-25T10:08:41+00:00 app[web.1]: Started GET "/application.css" for X.X.X.X at 2012-09-25 10:08:41 +0000
2012-09-25T10:08:41+00:00 app[web.1]: 
2012-09-25T10:08:41+00:00 app[web.1]: 
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
2012-09-25T10:08
:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
2012-09-25T10:08:41+00:00 app[web.1]: 
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2012-09-25T10:08:41+00:00 app[web.1]: ActionController::RoutingError (No route matches [GET] "/application.css"):
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/logger.rb:26:in `call_app'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/rack/logger.rb:16:in `call'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.6/lib/action_dispatch/middleware/static.rb:62:in `call'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/application.rb:220:in `call'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/server.rb:159:in `start'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `catch'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:479:in `call'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:80:in `block in pre_process'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:53:in `process'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/backends/base.rb:63:in `start'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:78:in `pre_process'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/connection.rb:38:in `receive_data'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:151:in `run!'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/runner.rb:185:in `run_command'
2012-09-25T10:08:41+00:00 app[web.1]: 
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/lib/thin/controllers/controller.rb:86:in `start'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.4.1/bin/thin:6:in `<top (required)>'
2012-09-25T10:08:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
2012-09-25T10:08:41+00:00 app[web.1]: 
2012-09-25T10:08:41+00:00 heroku[router]: GET app.herokuapp.com/application.css dyno=web.1 queue=0 wait=0ms service=9ms status=404 bytes=728
2012-09-25T10:11:00+00:00 heroku[run.1]: Awaiting client
2012-09-25T10:11:00+00:00 heroku[run.1]: Starting process with command `bundle exec rake db:migrate`
2012-09-25T10:11:00+00:00 heroku[run.1]: State changed from starting to up
2012-09-25T10:11:06+00:00 heroku[run.1]: Client connection closed. Sending SIGHUP to all processes
2012-09-25T10:11:07+00:00 heroku[run.1]: Process exited with status 1
2012-09-25T10:11:07+00:00 heroku[run.1]: State changed from up to complete
2012-09-25T10:08:23+00:00 heroku[web.1]: State changed from starting to up
2012-09-25T10:08:01+00:00 heroku[web.1]: Unidling
2012-09-25T10:08:01+00:00 heroku[web.1]: State changed from down to starting 
```

我不知道在哪里寻找解决方案，所以希望有人可以提供帮助。我刚刚开始学习 Rails，所以在尝试提供帮助时请记住这一点。

提前致谢。

编辑：

我尝试了各种方法：重新安装heroku，点击。重新制作我的应用程序并推送到heroku。重新安装postgres。

似乎没有任何效果。快把我逼疯了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:36:00.057

我找到了某种解决方法。
我在 heroku
ruby​​ 1.9.2
gems 上的 SHARED_DATABASE 也有同样的问题：
pg (0.11.0)
heroku (2.32.4)
heroku-api (0.3.5)
taps (0.3.24)
heroku db:pull 结束于：
无法从[http://...@taps19.heroku.com](http://...@taps19.heroku.com)获取表格信息。请检查服务器日志。

我使用 rvm 切换到 ruby​​ 1.8.7，heroku db:pull 工作正常。
再次回到 ruby​​ 1.9.2 来开发我的应用程序。

我希望这对某人有所帮助，直到 db:pull 将被 ruby​​ 1.9.2 修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T13:31:48.437

# MySQL

（关于 PostgreSQL 的说明在页面下方）

一个临时的解决方法是直接从数据库服务器转储数据并自己手动加载。我在 MySQL 中有两个数据库（在 Heroku 和本地），所以我做了：

```
1\. mysqldump -h host -P port_number -u user_name_to_your_db -p your_db_name > data.sql 
```

使用正确的详细信息运行上述命令后，系统将要求您输入密码。

**注意**：永远不要将您的密码放入您的 shell 命令中，因为它存储在 shell 命令历史记录中。

从 Heroku 配置中获取您的`username`, `password`, `your_db_name`,`host`和：`port_number`

```
2\. heroku config --app your-app-name | grep DATABASE_URL 
```

您的`DATABASE_URL`遗嘱如下所示：

```
mysql2://username:password@host:port_number/your_db_name 
```

一个更真实的示例`DATABASE_URL`如下所示（那里的登录详细信息已修改）：

```
mysql2://afdgsdfghliue:ESIJAFDG-sAFsgiags3464@ec2-34-15-23-232.compute-2.amazonaws.com:5432/9twgsenr8543 
```

在这种情况下，详细信息将分别为（请记住，这些是假的）：

```
username: afdgsdfghliue:ESIJAFDG
password: ESIJAFDG-sAFsgiags3464
host:     ec2-34-15-23-232.compute-2.amazonaws.com
port:     5432
database: 9twgsenr8543 
```

当您`mysqldump`使用正确的详细信息运行时，`1.`您的数据将存储在本地 data.sql 中。现在要将其加载到您的本地数据库（我们仍在谈论 MySQL），您需要运行：

```
mysql -u your_local_db_username -h 127.0.0.1 -p your_local_db_name < data.sql 
```

您应该拥有的本地数据库登录详细信息。

# PostgreSQL

我自己没有检查过以下说明，所以请与你的大脑一起使用它们;-)

我从

```
pg_dump --help 
```

你可以运行类似的命令从 Heroku 转储你的 PostgreSQL 数据库，如下所示：

```
pg_dump -h host -p port -U username -W your_db_name > data.sql 
```

您`DATABASE_URL`将开始`postgres`：

```
postgres://username:password@host:port_number/your_db_name 
```

基于

```
psql --help 
```

以下是如何从`data.sql`上面准备的文件中加载本地 PostgreSQL 数据库：

```
psql -h 127.0.0.1 -U your_local_db_username -W -d your_local_db_name -f data.sql 
```

一些手动过程，但它至少可以让你继续前进。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T18:06:51.043

我刚收到heroku的答复。他们说他们在使用水龙头时遇到了一些问题，现在它又可以正常工作了。

我检查并确认它对我有用。

Rgds,

# android - Android布局参数fill_parent没有任何影响

> ID：12580985
> 
> 赞同：0
> 
> 时间：2012-09-25T10:24:19.803
> 
> 标签：android, android-layout, layoutparams

我有一个问题，当我在宽度和高度 = fill_parent 的活动上设置布局 xml 文件并将背景颜色设置为灰色时，我在启动活动时没有得到任何背景颜色。我尝试创建一个扩展 LinearLayout 的自定义布局，当我在这个自定义布局中调用 onMeasure 时，我得到了

> 测量：-2147483048 | -2147482761

其中水平空间要求：-2147483048 和垂直空间要求：-2147482761

所以，当我使用

```
setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.FILL_PARENT)); 
```

对于我的自定义布局，我什么也得不到，但是当我使用例如

```
setLayoutParams(new LayoutParams(50,
            50)); 
```

然后我得到一个矩形

我的问题是，为什么？

编辑：在真机和模拟器上测试

EDIT2：xml：

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

EDIT3：Java：

```
onCreate:
        setContentView(new CustomAlarmLayout(this)); 
```

或者

```
onCreate:
setContentView(R.layout.some_layout); 
```

EDIT4：数量等于 MeasureSpec.AT_MOST

尝试将其设置为 MeasureSpec.UNSPECIFIED 不会改变任何内容，调用 onMeasure 时视图仍然不会调整大小

EDIT5：我的错。问题是 TabWidget 公共区域上有一个 wrap_content 集，所以这就是为什么我的 fill_parent 不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:33:11.153

你确定吗？？您必须在布局 xml 或活动中做错了什么。

尝试使用以下布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" 
    android:background="#FF0000">
</LinearLayout> 
```

你应该得到一个红色的背景

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:38:18.033

我了解您想在运行代码中插入此布局（及其设置）...为什么不尝试在此活动的 .xml 文件中包含默认的相对或线性布局设置参数宽度和高度作为 MATCH_PARENT 或FILL_PARENT。在此之后，通过运行代码将您的线性布局插入到 .xml 布局中。

像这样的东西：

```
myGenericLayout = (LinearLayout) findViewById(R.id.layout);
myGenericLayout.addView ( "your layout with the setting that you want here" ); 
```

# java - 使用 eclipse(windows) 在 java 中使用 IPv6 地址和端口号创建套接字

> ID：12580989
> 
> 赞同：4
> 
> 时间：2012-09-25T10:24:34.583
> 
> 标签：java, sockets, ipv6

当我尝试使用 IPv4 地址创建套接字时，它是成功的，但是当我尝试使用 IPv6 地址和端口号创建套接字时，它会引发异常：

```
java.net.SocketException: Network is unreachable: connect
          at java.net.DualStackPlainSocketImpl.connect0(Native Method)
          at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
          at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
          at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
          at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
          at java.net.PlainSocketImpl.connect(Unknown Source)
          at java.net.SocksSocketImpl.connect(Unknown Source)
          at java.net.Socket.connect(Unknown Source)
          at java.net.Socket.connect(Unknown Source)
          at java.net.Socket.<init>(Unknown Source)
          at java.net.Socket.<init>(Unknown Source)
          at epcs.intf.be.SimConnectionHandler.connect(SimConnectionHandler.java:332)
          at epcs.intf.be.BackEndConnection.connect(BackEndConnection.java:42)
          at epcs.intf.be.ProcedureRunner.runScenario(ProcedureRunner.java:230)
          at epcs.exec.Runner.SendExecTrigger(Runner.java:418)
          at epcs.exec.Runner.sendCommand(Runner.java:454)
          at epcs.main.ExecutionThread$TaskStartTestCaseExecution.run(ExecutionThread.java:98)
          at epcs.main.ExecutionThread.run(ExecutionThread.java:29) 
```

代码：

我正在 Windows 机器上通过 Eclipse IDE 运行代码。

```
 if(p_objSimData.getIpAddress().contains(":") )
    {
        System.out.println("IPV6 Address Found\n");
        InetAddress ip6addr = Inet6Address.getByName(p_objSimData.getIpAddress());
        System.out.println("InetAddress ip6addr = "+ip6addr); **//prints  //2011::11 - IPv6 address**
        objConnection.m_objSocket = new Socket(ip6addr,p_objSimData.getPortNo()); -  **here it is throwing an exception** 
    }
    else
    {
        objConnection.m_objSocket = new Socket(p_objSimData.getIpAddress(),p_objSimData.getPortNo());
        //m_hmObjConnection1.put(p_objSimData.getIpAddress(), objConnection.m_objSocket);
        m_hmObjConnection1.put(p_objSimData.getIpPort(), objConnection.m_objSocket);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:39:56.837

通常，此错误意味着远程机器的 V6 地址实际上并未绑定到给定端口。例如，如果您可以通过端口 80 上的 IPV4 与 Web 服务器通信，并不意味着它实际上将本地 V6 地址绑定到该端口。您仍然可以 ping 计算机，但 ping 实际上并不能告诉您端口是否已绑定。

证明您使用套接字的方式正确的快速测试是：

**在 Eclipse Windows 机器上**

1.  在命令提示符处执行*netstat -p TCPv6 -a*
2.  选择 localhost "::" 条目之一。在此示例中，我的机器返回 [::]:135 作为当前 V6 绑定端口之一。

尝试在 Eclipse 中连接：

```
public static void main(String[] args) {
  try
  {
    InetAddress address = InetAddress.getByName("::");
    Socket socket = new Socket(address, 135);
    // Should of connected with no exception thrown since we know this port was listening in netstat

  }
  catch (Throwable t) {
    t.printStackTrace();
  }
} 
```

我知道以上内容对您当前的代码没有帮助，但它更旨在隔离 IPV6 地址和端口号未绑定并且套接字连接异常有效的可能性。

我做的另一个测试是我为我的 Linux 机器获取了 Inet6 地址，并确保 SSH 正在侦听该端口。然后，我在我的 Windows eclipse 中使用了上面相同的代码，并针对我的 Linux Inet6 地址和端口 22 进行了套接字。这也很好。我的本地 tomcat 失败了，因为它没有设置为在 Inet6 上侦听。

# c# - 强制泛型类型参数

> ID：12580994
> 
> 赞同：1
> 
> 时间：2012-09-25T10:24:55.217
> 
> 标签：c#, .net, generics, types

我正在为 .NET 构建一个 HTTP-API 包装器，它有一堆方法可以在对象中设置数据，然后将数据序列化并将其发送到我的服务器。允许使用 6 种数据类型：

*   细绳
*   整数
*   长
*   漂浮
*   双倍的
*   约会时间

我的数据属性使用泛型：

```
SetAttribute<T>(string key, T value) 
```

所以只有一种通用的方法来设置数据。由于我无法将数据类型限制为提到的 6 个，因此我使用运行时检查并在使用错误数据类型时抛出异常。

现在解决我的问题：我有两个版本的 SetAttribute，一个接受单个值（T 类型），另一个接受多个值（IEnumerable<T> 类型）。问题是当程序员使用这个包装器并且没有指定类型参数时，运行时会猜测使用哪个方法，例如：

```
SetAttribute("testkey","thing,anotherthing,athirdthing".Split(',')) 
```

这默认为单值方法，T 是 String[]，这当然会使我的方法抛出异常，因为 String[] 不是有效类型。如果您指定：

```
SetAttribute<string>("testkey","thing,anotherThing,aThirdThing".Split(',')) 
```

运行时选择正确的方法（多值）并且没有异常被转换，因为 T 是字符串。

我的问题：如何标记我的方法，以便类型参数是强制性的并且必须明确定义？还是我必须在运行时检测到这一点并自己重定向到多方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:46:00.100

给定参数类型，编译器会从您的重载中找到最佳匹配。如果您将您的`string[]`转换为 an`IEnumerable<string>`您可能会发现它按预期工作，因为最佳匹配是具有完全这些参数的方法。但是您没有采用 a 的方法`string[]`，因此给定一个作为参数，编译器会做出最好的猜测。

我将有两个单独命名的方法而不是重载，否则很容易遇到这个问题。或者正如@Joachim 建议的那样，有 6 个单独的重载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T11:04:04.230

好的，这最初是上面的评论，因为它不一定回答您的原始问题，但建议了另一种方法；

我会说在这种情况下使用公共**通用**SetAttribute 不一定是一个好主意。

由于类型受到如此严格的限制，您可能应该只编写重载并将错误从运行时移动到编译时。它还允许您`IEnumerable<string>`使用另外 6 个重载等，并完全消除您遇到的问题。

您始终可以使用私有泛型实现 SetAttribute 并从每个重载中调用它，这将消除一些重复。

它也或多或少地消除了运行时检查的需要，因为类型已经受到编译器的约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:29:49.263

一种解决方案是将原始方法分解为 6 ​​个非泛型重载，并为集合添加另一个泛型重载：

```
void SetAttribute(string key, int value);
void SetAttribute(string key, string value);
// etc

// abd this takes care of collections:
void SetAttribute<T>(string key, IEnumerable<T> value); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T10:33:21.967

我建议一个更好的解决方案是测试传入的值是否是 IEnumerable 在它失败之后，如果它是这样的话。（我想您已经将 IEnumerable 作为第七种情况处理）。