# StackOverflow 问答 15607000-15607999

# jquery - MiniColors 选择器不更新颜色变量

> ID：15607000
> 
> 赞同：0
> 
> 时间：2013-03-25T03:10:09.970
> 
> 标签：jquery, jquery-plugins

我正在尝试实现[MiniColors](http://labs.abeautifulsite.net/jquery-miniColors/)。MiniColors 工作正常，但是当 MiniColors 更改时，我无法更新变量 colorSet 的值。我有一个 txt 输入 #colour 显示默认值，但该值没有更新......

```
<script type="text/javascript">
    $(document).ready(function() {

        $('#picker').minicolors({
            opacity: false,
            defaultValue: '#2083fd',
            control: 'hue',
            textfield: false,
            change: function(hex, opacity) {
                $('#picker').val(hex); 
             }
        });

        var colourSet = $('#picker').val();
        $('#colour').val(colourSet); 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:25:09.867

If you want `colourSet` to update every time the color is changed, the assignment needs to go inside the `change` event function. Right now you have it setting `colourSet` once, after the minicolor is initiated. I think you want something like the code below. Also, you can probably get rid of the variable and set the `#colour` element directly, if desired.

```
$(document).ready(function() {
    var colourSet;

    $('#picker').minicolors({
        opacity: false,
        defaultValue: '#2083fd',
        control: 'hue',
        textfield: false,
        change: function(hex, opacity) {
            $('#picker').val(hex);
            colourSet = hex;
            $('#colour').val(colourSet);
         }
    }); 
```

# javascript - Ember.js 如何引用 Grunt.js 预编译的 Handlebars 模板？

> ID：15607008
> 
> 赞同：9
> 
> 时间：2013-03-25T03:11:03.957
> 
> 标签：javascript, node.js, ember.js, handlebars.js, gruntjs

我一直在探索 Ember.js 以及 Grunt.js，但我不明白 Ember.js 如何能够找到和使用预编译的 Handlebars 模板。现在我的 Gruntfile.js 看起来像这样：

```
module.exports = function(grunt) {

// Project configuration.
grunt.initConfig({
pkg: grunt.file.readJSON('package.json'),
handlebars: {
  compile: {
    files: {
       "js/templates.js": "templates/*.hbs",
    }
  }
}
});

// Load the plugin that handles the handlebars compiling
grunt.loadNpmTasks('grunt-contrib-handlebars');

// Default task(s).
grunt.registerTask('default', ['handlebars']);

}; 
```

我的 app.js Ember 视图是这样声明的（省略了路由和控制器）：

```
App.LogoView = Ember.View.extend({
  templateName: 'logo',
  classNames: ['logo']
});

App.TabsView = Ember.View.extend({
  templateName: 'tabs',
  classNames: ['tabs']
});

App.TabView = Ember.View.extend({
  classNames: ['content'],
  tabPositions: {
    tab1: {
      width: '90px',
      left: '82px'
    },
    tab2: {
      width: '180px',
      left: '172px'
    },
    tab3: {
      width: '271px',
      left: '263px'
    }
  },
  animateTab: function() {
    var left, tab, width;
    tab = this.get('templateName');
    width = this.get('tabPositions.' + tab + '.width');
    left = this.get('tabPositions.' + tab + '.left');
    Ember.run.next(function() {
      $('div.tabs').removeClass('tab1 tab2 tab3');
      $('div.tabs').addClass(tab);
      $('div.slider div.foreground').stop().animate({
        'width': width
      }, 1000);
      $('div.slider div.handle').stop().animate({
        'left': left
      }, 1000);
    });
  },
  didInsertElement: function() {
    this.animateTab();
  }
});

App.SliderView = Ember.View.extend({
  templateName: 'slider',
  classNames: ['slider']
});

App.Tab1View = App.TabView.extend({
  templateName: 'tab1'
});

App.Tab2View = App.TabView.extend({
  templateName: 'tab2'
});

App.Tab3View = App.TabView.extend({
  templateName: 'tab3'
}); 
```

这是我的文件结构：

```
--/
  |--js/
    |--app.js
    |--ember.js
    |--handlebars.js
    |--jquery.js
    |--templates.js
  |--templates/
    |--application.hbs
    |--logo.hbs
    |--slider.hbs
    |--tab1.js
    |--tab2.js
    |--tab3.js
    |--tabs.js
  |--Gruntfile.js
  |--index.html
  |--package.json
  |--server.js 
```

因此，我使用`<script type="text/x-handlebars" data-template-name="slider">`index.html 文件中的语法按名称引用模板，并且效果很好。我不明白的是 Ember.js 应该如何使用预编译的模板。

现在，我正在使用 Grunt.js 来编译它们，并将它们输出到 templates.js。根据 Ember 文档，当应用程序加载时，它会寻找应用程序模板。这如何与 index.html 一起使用，并且通过更改模板的文件名，是否更改了模板的名称？有人能指出 Ember.js 如何使用预编译模板的正确方向吗？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-25T03:56:04.143

> 我不明白的是 Ember.js 应该如何使用预编译的模板。

Ember 期望编译后的模板将添加到 Ember.TEMPLATES 属性中。当加载 ember 应用程序时，它会检查任何把手脚本标签并编译它们。然后将每个模板添加到`Ember.TEMPLATES`使用指定的 data-template-name 属性作为键。如果没有提供数据模板名称，则它们的键设置为应用程序。

除此之外，余烬并不关心事情是如何进入`Ember.TEMPLATES`的。您可以手动添加/删除模板。例如，[https://stackoverflow.com/a/10282231/983357](https://stackoverflow.com/a/10282231/983357)演示了如何内联编译模板：

```
Ember.TEMPLATES['myFunkyTemplate'] = Ember.Handlebars.compile('Hello {{personName}}'); 
```

现在显然你不想这样写你的模板，你想让 grunt 为你做，但是你可以看到没有什么神奇的事情发生......

> 根据 Ember 文档，当应用程序加载时，它会寻找应用程序模板。这如何与 index.html 一起使用，并且通过更改模板的文件名，是否更改了模板的名称？

Ember 不关心模板的文件名，它只关心在`Ember.TEMPLATES['key/goes/here']`. 也就是说，使用文件名作为模板的键是很有意义的。

> 有人能指出 Ember.js 如何使用预编译模板的正确方向吗？

我认为您的项目中缺少的可能是编译后的模板没有被添加到`Ember.TEMPLATES`. AFAIK`grunt-contrib-handlebars`插件不这样做。考虑改用[grunt-ember-templates](https://github.com/dgeb/grunt-ember-templates)。

# r - 在 R 中的系统搜索路径上安装程序（点）

> ID：15607009
> 
> 赞同：2
> 
> 时间：2013-03-25T03:11:12.633
> 
> 标签：r

我是一名社会科学家，很难通过将此处记录的绘图程序与`dot`[此处记录](http://www.graphviz.org/Documentation/dotguide.pdf)[的](http://cran.r-project.org/web/packages/sem/sem.pdf)包`sem`集成的技术说明而苦苦挣扎。

我已成功运行包中的命令`pathDiagram`，该命令`sem`输出的代码可能应该读入包`dot.`的文档中`sem`说

```
 "To obtain graphics output directly, the dot program must be on the system search path." 
```

我确信这是一个完全平凡的问题，但我非常感谢帮助。我迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:45:57.180

在 R 中执行以下命令：

```
Sys.which("dot") 
```

这将告诉您系统调用是否能够找到您的“点”安装。你确实安装了“点”，对吧？

MacOS 大于或等于 10.6（并且您的 ML 为 10.8）的 Graphviz pkg 文件可以从 AT&T 实验室获得：http: [//www.graphviz.org/Download.php](http://www.graphviz.org/Download.php)

从其 .pkg 文件（在 OSX 10.6.8 上使用相同的 Graphviz 版本 2.30.1）安装后，我得到：

```
> Sys.which(c("dot"))
                 dot 
"/usr/local/bin/dot" 
```

这不会打开`dot`。它只是确认 R 可以找到 dot 程序。在 hte`?pathDiagram`页面上运行第一个示例仅将源文件输出到控制台，该源文件可用于`dot`控制台，因为没有给出文件参数，但如果你添加一个file 参数它使用`dot`向控制台屏幕发送消息创建一个 pdf 文件：

```
pathDiagram(sem.dhp, min.rank='RIQ, RSES, RParAsp, FParAsp, FSES, FIQ', file="test",
 max.rank='ROccAsp, REdAsp, FEdAsp, FOccAsp', output.type="graphics", graphics.fmt="pdf")
#Running  dot -Tpdf -o test.pdf  test.dot 
```

这在我的工作目录中生成了一个可以使用 Preview.app 查看的文件。如果您想`dot`单独使用，则需要阅读其手册并按照说明以独立方式使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:52:01.247

## 根据评论更新：

如果当您`which dot`在终端中键入时，您会收到带有路径的响应，那么可以肯定地说`graphviz`已安装。

根据`pathDiagram`的手册（即`?pathDiagram`），它不打算返回值。

相反，使用`file`参数指定将输出保存到的位置。

```
 pathDiagram(model=SomeModelInR, file="path/to/file", ...) 
```

* * *

*这似乎更像是一个一般的 mac os x 问题，但无论如何，我们开始吧：*

在您的`applications > utilities`文件夹中，打开终端。

*（我假设 dot 被调用`dot`，如果没有请相应地修改）*
类型`which dot`
- 这将向您显示 dot 的路径，可能类似于`/usr/bin/dot`
- 在这种情况下，您在下一部分中寻找的路径是`/usr/bin`

类型`echo $PATH`
- 这将向您显示几条分隔`:`
的路径 - 如果您获得的路径`which dot`被列为这些路径之一，那么您已经准备就绪。
- 如果没有，请参阅下面的链接了解如何修改

另请参阅： [如何在 Mac 上编辑 PATH 环境变量](http://hathaway.cc/2008/06/how-to-edit-your-path-environment-variables-on-mac-os-x/)

# php - 如何创建多态不可知模型？

> ID：15607016
> 
> 赞同：0
> 
> 时间：2013-03-25T03:12:13.933
> 
> 标签：php, design-patterns, symfony, doctrine

目前我在我的项目中使用与存储无关的模式。这种模式非常简单：我有我的`Model\Model`和我的特定存储层，它扩展了`Model\Model`（如`Entity\Model`和`Document\Model`）。

我面临的问题是多态对象。如果我不扩展实体 Doctrine 无法识别继承映射。这样，我需要为每个存储层复制我的代码：

```
class Model\Option {}
class Model\OptionNumber extends Option {}
class Entity\Model extends Model\Option {} 
```

我想拥有：

```
class Entity\OptionNumber extends Model\OptionNumber{} 
```

但这是不可能的。一旦 PHP 不支持多重继承，我必须在 Entity\OptionNumber 中进行编码。

有没有解决这个问题的模式？

仅供参考，我使用的是 Doctrine 2.2 和 Symfony 2.3。

当然！

模型：

```
abstract class Option implements OptionInterface
{
/**
 * @var int
 */
protected $id;

/**
 * @var string
 */
protected $name;

/**
 * @var string
 */
   protected $presentation;

   /**
   * @var Collection of OptionChoiceInterface
   */
   protected $choices;
} 
```

实体：

```
class Option extends BaseOption
{
} 
```

文档：

```
class Option extends BaseOption
{
} 
```

# gwt - CellList：如何动态设置行高？

> ID：15607019
> 
> 赞同：0
> 
> 时间：2013-03-25T03:12:40.543
> 
> 标签：gwt, gwt-celltable

我有一个 CellList，它将在一页中有固定数量的单元格，我希望单元格扩展以填充整个 CellList。

假设 CellList 高度为 100px，单元格数为 10，则一个单元格/行将为 10px，如果 CellList 高度为 500px，则每个单元格/行的高度将为 50px。

问题是，如何在表格呈现后控制行高，我尝试`addLoadingStateChangeHandler`在单元格列表上以及当`onLoad`我使用 GQuery 调整单元格高度时，但似乎没有效果。

是的，我可以事先得到每一行的高度，但是如何应用到 CellList 的 CSS 中呢？

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:21:29.780

问题解决了，在新建单元格时，指定它的高度（因为我们事先知道高度），在调整单元格列表的大小时，只需指定一个新的高度重新绘制它。

# java - 使 Arraylist() 不允许输入数字 EDITED

> ID：15607021
> 
> 赞同：1
> 
> 时间：2013-03-25T03:12:54.843
> 
> 标签：java

我正在开发这个项目，该项目允许用户在输出窗口中输入名称，但他们不应该能够输入数字。我无法找出正确的代码行来使其无法输入数字（如果他们这样做的话会给他们一条错误消息）。

```
import java.util.*;

public class UserInput 
{
public static void main(String[] args) 
{
    List<String> list = new ArrayList<String>();
  Scanner stdin = new Scanner(System.in);

  do 
    {   
     Collections.sort(list);
    System.out.println("Current list is " + list);
     System.out.println("Add more? (y/n)");

    if (stdin.next().startsWith("y")) 
        {
        System.out.println("Enter: ");
        list.add(stdin.next());
     } 

        else 
        {
        break;
     }
    } 

    while (true);

  System.out.println("List is " + list);
  String[] arr = list.toArray(new String[0]);
  System.out.println("Array is " + Arrays.toString(arr));
}
}
public void add(String string) {

try {  
   double d = Double.parseDouble(string);  
   } catch(NumberFormatException e) {  
       // throw a exception or something.
       return;
   }

   super.add(string);
   return;      
} 
```

这是我的代码！

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:19:29.073

对输入进行正则表达式测试

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;
import java.util.Scanner;

public class UserInput {
    public static void main(String[] args) {
        List<String> list = new ArrayList<String>();
        Scanner stdin = new Scanner(System.in);

        do {
            System.out.println("Enter: ");
            String strin = stdin.next();
            if (isNumeric(strin)) {
                System.out.println("Please enter a non numeric value");
            } else {
                list.add(strin);
            }

            Collections.sort(list);
            System.out.println("Current list is " + list);
            System.out.println("Add more? (y/n)");

        } while (stdin.next().startsWith("y"));

        System.out.println("List is " + list);
        String[] arr = list.toArray(new String[0]);
        System.out.println("Array is " + Arrays.toString(arr));
    }

    public static boolean isNumeric(String str) {
        return str.matches("-?\\d+(\\.\\d+)?");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:14:47.710

您可以创建一个扩展`ArrayList`和覆盖`add()`方法的类，检查给定`String`是否为数字。

```
import java.util.*;

public class UserInput 
{
public static void main(String[] args) 
{
    List<String> list = new MyArrayList<String>();
  Scanner stdin = new Scanner(System.in);

  do 
    {   
     Collections.sort(list);
    System.out.println("Current list is " + list);
     System.out.println("Add more? (y/n)");

    if (stdin.next().startsWith("y")) 
        {
        System.out.println("Enter: ");
        try {

            list.add(stdin.next());
        } catch (Exception e) {
           // given string was a number.
        }
     } 

        else 
        {
        break;
     }
    } 

    while (true);

  System.out.println("List is " + list);
  String[] arr = list.toArray(new String[0]);
  System.out.println("Array is " + Arrays.toString(arr));
}
}
class MyArrayList extends ArrayList<String> {

    public void add(String string) {

       try {  
           double d = Double.parseDouble(string);  
       } catch(NumberFormatException e) {  
           super.add(string);
           return;
       }

       throw new Exception();
} 
```

但是您也需要覆盖其他“ `add`”方法。

# css - 如何使文本水平和垂直居中？

> ID：15607022
> 
> 赞同：1
> 
> 时间：2013-03-25T03:13:07.937
> 
> 标签：css, twitter-bootstrap

我尝试使用 display:table 垂直居中的方法，但我不能完全让它工作。到目前为止，我的工作在这里：

[http://jsfiddle.net/PTSkR/11/](http://jsfiddle.net/PTSkR/11/)

我正在尝试将文本垂直和水平居中。我认为这比正常情况要难一些，因为我使用的是引导跨度，但也许不是。任何提示都会很棒！

代码：

```
.side-study-box {
    background-color: white;
    color: black;
    border: 3px solid #0072A6;
    text-align: center;
    height: 220px;
    margin-left: 10px;
    display: table;
    padding: 10px;
    -webkit-box-shadow: 3px 3px 3px #888888;
    -moz-box-shadow: 3px 3px 3px #888888;
    box-shadow: 3px 3px 3px #888888;
}

.side-study-box span {
    position: relative;
    width: 100%;
    font-size: 24px;
    display: table-cell;
    vertical-align: middle;
    }

.card-box {
    background-color: #f5f5f5;
    color: black;
    margin-right: 0px;
    margin-bottom: 15px;
    margin-top: 15px;
    padding: 5px 0 5px 0;
}

<div data-bind="visible: !editing()" class="row-fluid card-box">
     <div class="span2 card-details-box">
     </div>
     <div class="span5 side-study-box">
       <span>TEST</span>
     </div>
     <div class="span5 side-study-box">
       <span>TEST</span>
     </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:17:13.277

`side-study-box`正在`display:table`恢复为`display:block`. 添加一个`important`标志。`display:table !important`.

# popup - 为什么我的 webview 覆盖了 Metro 应用程序中的弹出窗口？

> ID：15607027
> 
> 赞同：0
> 
> 时间：2013-03-25T03:13:58.127
> 
> 标签：popup, microsoft-metro

我想在我的 Metro 应用程序中制作一个设置面板。

我添加了一个带有 webview 的主页，如下所示：

```
<Page
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:App"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
x:Class="App.MainPage"
mc:Ignorable="d">

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <WebView x:Name="MainWebView"/>
</Grid> 
```

并使用此代码显示我的 popip 窗口

```
 _settingsPopup = new Popup();
        _settingsPopup.Closed += OnPopupClosed;
        Window.Current.Activated += OnWindowActivated;
        _settingsPopup.IsLightDismissEnabled = true;
        _settingsPopup.Width = _settingsWidth;
        _settingsPopup.Height = _windowBounds.Height;

        SettingsPanel mypane = new SettingsPanel();
        mypane.Width = _settingsWidth;
        mypane.Height = _windowBounds.Height;

        _settingsPopup.Child = mypane;
        _settingsPopup.SetValue(Canvas.LeftProperty, _windowBounds.Width - _settingsWidth);
        _settingsPopup.SetValue(Canvas.TopProperty, 0);
        _settingsPopup.IsOpen = true; 
```

但是，最后弹出窗口无法显示，当我将 webview 设置为隐藏时，我发现 webview 后面的弹出窗口。

我找不到任何函数或属性来设置 zindex 或 zindex 之类的东西来帮助我将弹出窗口放在前面。

我怎样才能使它正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:02:59.433

该行为是设计使然，因为`WebView`它将始终占据最高位置。推荐的解决方案是在弹出窗口时隐藏`WebView`，或者在`WebViewBrush`显示弹出窗口时将 用作占位符。

网上有很多教程，我个人推荐这篇文章： [如何在WebView的顶部显示魅力](http://blogs.msdn.com/b/priozersk/archive/2012/08/13/how-to-display-charms-on-a-top-of-the-webview.aspx)

# php - 如何使用 PHP 循环遍历 JSON 数组

> ID：15607029
> 
> 赞同：15
> 
> 时间：2013-03-25T03:14:06.033
> 
> 标签：php, json, parsing, yelp

我的PHP代码：

```
$obj = json_decode($data);
print $obj->{'name'}; 
```

虽然它适用于非数组，但我一生都无法弄清楚如何打印“评论”数组中的所有值。

我想做的是遍历这个响应，可能使用 forreach()，生成一个列表，其中包含响应中每个评论的评分和摘录。

非常感谢任何指导/方向..

下面是我正在使用的 JSON。（这是来自 Yelp API 的响应）。

```
{
    "is_claimed": true,
    "rating": 4.5,
    "mobile_url": "http://m.yelp.com/biz/economy-paint-and-collision-riverside",
    "rating_img_url": "http://s3-media2.ak.yelpcdn.com/assets/2/www/img/99493c12711e/ico/stars/v1/stars_4_half.png",
    "review_count": 19,
    "name": "Economy Paint & Collision",
    "snippet_image_url": "http://s3-media3.ak.yelpcdn.com/photo/ZOzoahw0Go_DEPLvxCaP_Q/ms.jpg",
    "rating_img_url_small": "http://s3-media2.ak.yelpcdn.com/assets/2/www/img/a5221e66bc70/ico/stars/v1/stars_small_4_half.png",
    "url": "http://www.yelp.com/biz/economy-paint-and-collision-riverside",
    "reviews": [
        {
            "rating": 3,
            "excerpt": "The Good:\nDennis quoted me a price over the phone about 1 month before I took my wifes 2010 Escalade in for repairs and when I took it in he gave me the...",
            "time_created": 1357010247,
            "rating_image_url": "http://s3-media3.ak.yelpcdn.com/assets/2/www/img/34bc8086841c/ico/stars/v1/stars_3.png",
            "rating_image_small_url": "http://s3-media3.ak.yelpcdn.com/assets/2/www/img/902abeed0983/ico/stars/v1/stars_small_3.png",
            "user": {
                "image_url": "http://s3-media3.ak.yelpcdn.com/photo/mIsU7ugYd88lLA-XL2q1Cg/ms.jpg",
                "id": "V9MDZvEBv-tBTF4YIoc7mg",
                "name": "Sydney H."
            },
            "rating_image_large_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/e8b5b79d37ed/ico/stars/v1/stars_large_3.png",
            "id": "HfOhzLIlJoUKSKU8euclqA"
        },
        {
            "rating": 5,
            "excerpt": "Dennis and his team did an amazing job on the roof of my fiancee's 2002 Acura RSX after years of living by the beach in San Francisco had mostly rusted...",
            "time_created": 1354741952,
            "rating_image_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/f1def11e4e79/ico/stars/v1/stars_5.png",
            "rating_image_small_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/c7623205d5cd/ico/stars/v1/stars_small_5.png",
            "user": {
                "image_url": "http://s3-media3.ak.yelpcdn.com/photo/ZOzoahw0Go_DEPLvxCaP_Q/ms.jpg",
                "id": "kOqCnCjYn0EbAhtH1tfjcw",
                "name": "Jason H."
            },
            "rating_image_large_url": "http://s3-media3.ak.yelpcdn.com/assets/2/www/img/22affc4e6c38/ico/stars/v1/stars_large_5.png",
            "id": "YzZg1LX6zeRaurq9tYUcMw"
        },
        {
            "rating": 5,
            "excerpt": "It's been a year since I had my car painted here, and I gotta say: It still looks just as good as it did when I first picked it up. You would never know...",
            "time_created": 1361043626,
            "rating_image_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/f1def11e4e79/ico/stars/v1/stars_5.png",
            "rating_image_small_url": "http://s3-media1.ak.yelpcdn.com/assets/2/www/img/c7623205d5cd/ico/stars/v1/stars_small_5.png",
            "user": {
                "image_url": "http://s3-media1.ak.yelpcdn.com/photo/58coTtu1x5riHSgFEAQsfw/ms.jpg",
                "id": "kVrW3138d5VL-AZ97wFF4A",
                "name": "Jeanne M."
            },
            "rating_image_large_url": "http://s3-media3.ak.yelpcdn.com/assets/2/www/img/22affc4e6c38/ico/stars/v1/stars_large_5.png",
            "id": "r5WtlQVMXiIMBR6S3N7RZw"
        }
    ],
    "phone": "9517870227",
    "snippet_text": "Dennis and his team did an amazing job on the roof of my fiancee's 2002 Acura RSX after years of living by the beach in San Francisco had mostly rusted...",
    "image_url": "http://s3-media3.ak.yelpcdn.com/bphoto/kodoEcmgHRG61pPaWRndbw/ms.jpg",
    "categories": [
        [
            "Body Shops",
            "bodyshops"
        ],
        [
            "Auto Repair",
            "autorepair"
        ]
    ],
    "display_phone": "+1-951-787-0227",
    "rating_img_url_large": "http://s3-media4.ak.yelpcdn.com/assets/2/www/img/9f83790ff7f6/ico/stars/v1/stars_large_4_half.png",
    "id": "economy-paint-and-collision-riverside",
    "is_closed": false,
    "location": {
        "city": "Riverside",
        "display_address": [
            "2548 Rubidoux Blvd",
            "Riverside, CA 92509"
        ],
        "geo_accuracy": 8,
        "postal_code": "92509",
        "country_code": "US",
        "address": [
            "2548 Rubidoux Blvd"
        ],
        "coordinate": {
            "latitude": 34.0132437,
            "longitude": -117.3923804
        },
        "state_code": "CA"
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-25T03:30:02.320

您可能遇到了麻烦，因为 reviews 是一个数组，而您正试图将其作为 JSON 对象进行访问。

```
$obj = json_decode($data, TRUE);
for($i=0; $i<count($obj['reviews']); $i++) {
    echo "Rating is " . $obj['reviews'][$i]["rating"] . " and the excerpt is " . $obj['reviews'][$i]["excerpt"] . "<BR>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:19:14.167

我不确定您到底想要什么，但我想您现在只想打印它以进行调试。您可以尝试使用`print_r($obj);`and `var_dump($obj);`- 他们必须打印一些东西，尤其是`var_dump()`. 当您看到数据时，您可以轻松地稍微编辑函数，因此您可以执行例如`print_r($obj->reviews)`or `print_r($obj['reviews'])`，具体取决于`$obj`是对象还是数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T03:28:28.963

您可以使用 var_dump 或 print_r。

```
<?php 
$decodedJSON = json_decode($jsonData);

// Put everyting to the screen with var_dump;
var_dump($decodedJSON);

// With print_r ( useful for arrays );
print_r($decodedJSON);

// List just review ratings with foreach;
foreach($decodedJSON['reviews'] as $review){
    echo $review['rating'];
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-10T08:12:17.413

这里使用对象示例（阅读评论...raiting）：

```
$jsonObject = json_decode($data);
foreach ($jsonObject->reviews as $data) {
    echo $data->rating;
} 
```

# c++ - 中位数为 3，使用迭代器进行快速排序

> ID：15607031
> 
> 赞同：1
> 
> 时间：2013-03-25T03:14:39.860
> 
> 标签：c++, algorithm, pivot, quicksort

我正在尝试通过获取要排序的向量的第一个、最后一个和中心元素的中值来选择快速排序的枢轴。我已经看到了很多以 int 表示的范围的实现，但我试图用迭代器来做到这一点。（无论如何它不应该有那么不同）。但是，我的代码完全符合我的要求。它在 T 是 int 时有效，但对于其他一些类它会超时。有任何想法吗？这是代码：

```
template <class T>
int ParallelSort::partition(typename vector<T>::iterator &start, typename        vector<T>::iterator &end)
{
int Index = (end-start)/2;
T tmpSwap = start[Index];
//the three if statement get the three part median for the vector. 
if(start[Index] < *start)
{
    start[Index] = *start;
    *start = tmpSwap;
}
if(*end < *start)
{
    tmpSwap = *end;
    *end = *start;
    *start = tmpSwap;
}
if(*end < start[Index])
{
    tmpSwap = start[Index];
    start[Index] = *end;
    *end = tmpSwap;
}
T pivot = start[Index];
//rest of the code .....
//i'm sure that the rest of the code works correctly 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:27:44.033

首先，您应该使用`typename std::vector<T>::size_type`，而不是`int`。其次，用于`std::distance`查找两个迭代器之间的差异，应该存储在`typename std::vector<T>::difference_type`. 最后，迭代器通常按值传递，而不是按引用传递。

您的问题可能是您取消引用的事实`end`。这是未定义的行为 - 您可能想要取消引用`--end`.

此外，迭代器的全部意义在于，您不会将自己限制在特定的容器中（理论上，无论如何）。这可能应该用签名写成：

```
template <typename SizeType, typename RandomAccessIterator>
SizeType ParallelSort::partition(RandomAccessIterator start, RandomAccessIterator end) 
```

# java - java中的for循环在播放器数组中查找播放器对象

> ID：15607033
> 
> 赞同：1
> 
> 时间：2013-03-25T03:14:54.393
> 
> 标签：java, loops, for-loop

我正在学习java，现在正在处理循环。我写了这段代码：

```
players[0] = new Player(1, "Paul", "Point Guard");
players[1] = new Player(24, "Bryant", "Shooting Guard");
players[2] = new Player (6, "James", "Small Foward");
players[3] = new Player (21, "Duncan", "Power Foward");
players[4] = new Player (12, "Howard", "Center"); 
players[5] = new Player (6, "Erving", "Small Foward");

public String name()
{   
    int number = readNumber(); // read in the number
    String s = "";
    for(Player player: players){
        // check if input number match with any number of the players
        if(player.numberMatches(number))        
            s += player.getName() + " ";
        else s = error();
    }
    return s;
} 
```

error() 方法只是返回一个“没有玩家有这个号码”我的数组中有两个玩家有相同的号码；当我调用 name() 它返回“没有玩家有这个 nameErving”我试图删除 else 语句并且一切正常。为什么？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T03:20:58.700

`s`因为每次玩家的号码与给定号码不匹配时，您都会重新分配。

这在逻辑上是不正确的，并且每次玩家的号码不匹配时都会有效地删除所有已找到的玩家。试试这样的东西。

```
public String name()
{   
    int number = readNumber(); // read in the number
    String s = "";
    for(Player player : players){
        // check if input number match with any number of the players
        if(player.numberMatches(number))        
            s += player.getName() + " ";
    }
    return s.equals("") ? error() : s;
} 
```

# grep - 为什么 grep 提示“无效范围结束”？

> ID：15607036
> 
> 赞同：4
> 
> 时间：2013-03-25T03:15:07.647
> 
> 标签：grep

我有一个文件`a`：

```
$ cat a 
abcd
kaka 
```

使用命令时：

```
$ grep -e '[a-d]' a
abcd
kaka 
```

它运作良好，但为什么这些命令不正确？

```
$ grep -e '[\x61-\x74]' a 
grep: Invalid range end

$ grep -e '[\u0061-\u0074]' a 
grep: Invalid range end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T11:30:43.140

假设您的版本`grep`支持`PCRE`（“Perl 兼容的正则表达式”），您可以尝试：

```
grep -P '[\x61-\x74]' a 
```

这将返回预期的输出：

```
abcd
kaka 
```

# scala - 我可以从 Avro 模式定义中获取 Scala 案例类定义吗？

> ID：15607038
> 
> 赞同：17
> 
> 时间：2013-03-25T03:15:50.863
> 
> 标签：scala, schema, case-class, avro

为了便于在 Scala 中使用 Avro，我想根据存储在 .avro 文件中的模式定义一个案例类。我可以尝试：

1.  手动编写 .scala 案例类定义。
2.  以编程方式将字符串写入 .scala 文件
3.  使用 ObjectWeb 的 ASM 之类的字节码库来欺骗案例类定义
4.  具体的编译器技巧？
5.  在运行时修改现有的案例分类定义？

谢谢，任何建议表示赞赏。-朱利安

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-06T01:51:19.073

我一直在破解一个名为[Scalavro](http://genslerappspod.github.io/scalavro/)的小项目以另辟蹊径（Scala 类型为 Avro 模式）。它还为您提供直接的二进制 I/O。

**简单示例：**

```
package com.gensler.scalavro.tests
import com.gensler.scalavro.types.AvroType

case class Person(name: String, age: Int)

val personAvroType = AvroType[Person]
personAvroType.schema 
```

产生：

```
{
  "name": "Person",
  "type": "record",
  "fields": [
    {"name": "name", "type": "string"},
    {"name": "age", "type": "int"}
  ],
  "namespace": "com.gensler.scalavro.tests"
} 
```

在项目站点（上面链接）和 scalatest 规范中还有更多示例。

我计划在不久的将来在 Sonatype OSS 上托管二进制文件，但现在你可以从 github 拉取源代码，`sbt publish-local`如果你想尝试一下。

**更新：**
*Scalavro*现在可以在 Maven Central 上使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-20T19:12:43.343

看起来你在[https://github.com/julianpeeters/avro-scala-macro-annotations使用类型提供程序弄脏了你的手](https://github.com/julianpeeters/avro-scala-macro-annotations)

# image-processing - 从图像中切割 x 个像素

> ID：15607044
> 
> 赞同：2
> 
> 时间：2013-03-25T03:16:44.650
> 
> 标签：image-processing, imagemagick, image-manipulation

为什么这会创建许多图像而不是两个？

```
convert input-image.jpg -crop 28x +repage monet_vertical_%d.jpg 
```

我想得到两张图片；距底座 28 像素，另一张图像带有剩余部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:36:30.550

```
 convert $f -gravity South  -crop 0x28+0+0 +repage label.jpg
   convert $f -gravity South  -chop  0x28  not-labeled.jpg 
```

# php - usort() 未正确处理

> ID：15607046
> 
> 赞同：4
> 
> 时间：2013-03-25T03:16:58.767
> 
> 标签：php, json

我的 json 结果数组返回如下：

```
["AuctionInfo"]=>
[0]=>
array(13) {
  ["price"]=>  
    int(3000)
} 
[1]=>
array(13) {
  ["price"]=>
     int(5000) 
```

我试图使用的 PHP 代码很简单

```
<?php
$decoded = json_decode("my json api", true);
foreach($decoded['AuctionInfo'] as $item) { 
usort($decoded['AuctionInfo']['price']);?>
<tr>
    <td><?php echo $item['price']; ?></td>
</tr>
<?php } ?> 
```

我尝试`usort($decoded['AuctionInfo']['price']`在我之后添加，`foreach`但这只会引发错误，有人能指出我正确的方向吗？

我要做的就是`$decoded['AuctionInfo']['price']`按降序排序

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T03:28:41.910

像这样的东西应该工作。

```
<?php

$data = array(
    'AuctionInfo' => array(
        array('price' => 500),
        array('price' => 3000)
    )
);

$decoded = $data['AuctionInfo'];
foreach($decoded as $item) {
    echo $item['price'] . PHP_EOL;
}

usort($decoded, function($a, $b) { return $a['price'] < $b['price'] ? 1 : -1; });

foreach($decoded as $item) {
    echo $item['price'] . PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:31:02.867

您忘记了代码中的另一级索引。例如这将是有效的

```
<?php echo $decoded['AuctionInfo'][1]['price'] ?>
>5000 
```

但是，您当前的状态是`$decoded['AuctionInfo']['price']`不会生成数组，它会`price`在整数索引中搜索索引。

有几种方法可以解决这个问题，最简单的方法是创建自己的比较函数来检查`price`比较元素中的 ：

```
function price_cmp($a, $b){
    if ($a["price"] == $b["price"]) {
        return 0;
    }
    else if ($a["price"] < $b["price"]){
        return 1;
    }
    else{
        return -1;
    }
}
usort($decoded, "price_cmp"); 
```

# java - 试图理解静态变量。为什么在倒数第二个打印语句中打印 6？

> ID：15607047
> 
> 赞同：2
> 
> 时间：2013-03-25T03:17:03.567
> 
> 标签：java, static

我对静态字段的理解是，它的最后一个赋值是该字段在类中的任何位置的值。但是，我的理解显然并不可靠，因为我希望倒数第二个打印语句打印 30，而不是 6。请帮助我理解为什么它打印 6。

```
public class Whatever 
{
static int x = 2;
static int z;

public Whatever()
{
    z = x*3;
}

public static void main(String[] args) 
{
    Whatever foo = new Whatever();

    System.out.println(foo.z); //prints 6

    Whatever.x = 10;

    System.out.println(foo.x); // prints 10
    System.out.println(foo.z); // prints 6 WHY?!?!

    Whatever bar = new Whatever();

    System.out.println(bar.z); // prints 30 as expected
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:24:10.557

```
Whatever.x = 10; // This only sets your "x" to 10.

System.out.println(foo.x); // prints 10
System.out.println(foo.z); // prints 6 - because x is 10, but z is still 6

Whatever bar = new Whatever(); // Now z = x*3 is called and z becomes 30.

System.out.println(bar.z); 
```

只是`z=x*3`当您为`x`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:24:32.280

静态变量之所以这样称呼，是因为它们**静态**地位于内存中。当您实例化您的 foo 对象时，构造函数将 x 乘以 3，并将结果分配给 z。

当你的主要方法开始时，

x = 2 且 z 尚未实例化。

当 foo 被实例化时，

x = 2 和 z = x * 3。由于 x 现在是 2，所以 z = 2 *3 = 6

然后将 x 分配为 10。 Z 仍然是 6，因为在调用 bar 对象之前不会分配 z。

如果您希望在那个时间点是 30，您将不得不再次调用 z = x * 3。

**改变变量 x 不会自动改变 z 的值**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T03:25:17.893

要理解这一点，您需要知道什么`static`意思。在 Java 中，`static`变量位于类级别。另一种思考方式是，该类的所有实例都看到相同的东西。因此，在您的示例中，无论您创建了多少`Whatever`对象（即使您创建了 NONE！），都只有一个`x`，只有一个`z`。

那么，让我们来看看吧……

```
// Executes z = x*3, setting z to 6 (as you expect)
Whatever foo = new Whatever();
System.out.println(foo.z); //prints 6

// Sets x to 10 (remember, x is static, you only have one of them!)
Whatever.x = 10;
System.out.println(foo.x); // prints 10

// Because since the last time you've created a Whatever, 
// nothing has changed z!
System.out.println(foo.z); // prints 6 WHY?!?!

// Now you've created a new Whatever, and z = x*3 gets executed
// in the constructor again
Whatever bar = new Whatever();

System.out.println(bar.z); // prints 30 as expected 
```

我希望这会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T03:29:40.053

因为 z = x*3 在构造方法中。编写时调用构造函数方法

```
Whatever foo = new Whatever(); 
```

所以当你分配

```
Whatever.x = 10; 
```

构造方法没有再次调用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T03:23:11.857

看看[这里](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

当从同一个类蓝图创建多个对象时，它们每个都有自己不同的实例变量副本。(...)

有时，您希望拥有所有对象共有的变量。这是通过静态修饰符完成的。声明中带有 static 修饰符的字段称为静态字段或类变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T03:51:38.527

让 c 一行一行地发生什么

公共静态无效主要（字符串[]参数）{

```
Whatever foo = new Whatever(); // new is a operator to create an object. when the object is created it will try to call constructor . No constructor, it will fail to create the object. so Now the constructor is called. It calculates x*3 and puts the value to z.
System.out.println(foo.z); //prints 6\. Here value of z is read printed. This is not method invocation. This is just reading value of z 
Whatever.x = 10; // This is an assignment statement. It just puts the value into x
System.out.println(foo.x); // prints 10 Just the values read 
System.out.println(foo.z); // prints 6 WHY?!?! // Here to value of z is read. If you see. now alteration of value is done on z. 
Whatever bar = new Whatever(); // this recalculates and puts the value on to z. That is why you are seeing change when you print z after this statement.
System.out.println(bar.z); // prints 30 as expected
System.out.println(foo.z); // Should also print 30 now. thats what static does 
```

}

希望这可以帮助

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-25T03:25:10.327

静态变量在不同的实例中只有一个实例。

这里

首先

Z 为 2

你打电话时

```
public Whatever() 
```

Z 改为 6

之后你改变了 X

但这对 Z 没有影响

所以值为 6

谢谢

# google-maps - Google Maps API v3 地图未完全加载

> ID：15607049
> 
> 赞同：6
> 
> 时间：2013-03-25T03:17:09.150
> 
> 标签：google-maps, google-maps-api-3

我在使用谷歌地图时遇到了一些困难。问题是只有一小部分地图正在加载，如下所示：

![在此处输入图像描述](../Images/c39dda2c950b918dfde876d41156b6bd.png)

页面加载后，如果我稍微调整浏览器的大小，这会导致完整的地图刷新并正确加载，如下所示： ![在此处输入图像描述](../Images/57569c2c17fa34f153ee7ec2439fe044.png)

这是我的javascript代码：

```
google.maps.event.addDomListener(window, 'load', initialize);

$(document).ready(function(){                               
    var $width = document.getElementById("propertysection").offsetWidth;
    $('#map-canvas-2').width($width-28-175);
    $('#map-canvas-2').height($width);
    $('#myGridMap').height($width);
});

function initialize() { 
    var map; 
    var propertyMap;
    var marker; 
    var infowindow;
        var myOptions = {
            zoom: 6,
            center:new google.maps.LatLng(50.7,-86.05),
            mapTypeId: google.maps.MapTypeId.HYBRID
        }
        map = new google.maps.Map(document.getElementById("map-canvas-2"),myOptions);                  
        infowindow = new google.maps.InfoWindow({
            content: 'Property Info',
            position: new google.maps.LatLng(0, 0)
        }); 
    } 
```

谁能提出问题可能是什么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T03:51:45.893

您不应将 jquery 就绪方法与窗口加载事件混用（请参阅[http://api.jquery.com/ready/](http://api.jquery.com/ready/)）。

相反，从您的 .ready 函数中调用初始化，或者将窗口调整大小函数放在初始化方法本身中（在初始化地图之前）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-27T13:11:26.713

我正在使用引导程序和大型菜单，并使用官方**Google Maps API 异步加载功能**解决了这个问题。[https://developers.google.com/maps/documentation/javascript/tutorial#asynch](https://developers.google.com/maps/documentation/javascript/tutorial#asynch)

```
 function initialize() {

        var myLatLng = new google.maps.LatLng(37.4221147, -122.0867373);

        var map_canvas = document.getElementById('map_canvas');

        var map_options = {
            center: new google.maps.LatLng(37.4221147, -122.0867373),
            zoom: 12,
                    mapTypeControl: false,
                    panControl: false,
            zoomControlOptions: {
                        position: google.maps.ControlPosition.LEFT_CENTER
            },
            streetViewControl: false,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        var map = new google.maps.Map(map_canvas, map_options);

        var contentString =
            '<b>Google Gate Bridge</b>' +
            '<p>Mountain View, CA 94043, USA</p>';

        var infowindow = new google.maps.InfoWindow({
            content: contentString
        });

        var marker = new google.maps.Marker({
            position: myLatLng,
            map: map,
        });

        google.maps.event.addListener(marker, 'click', function(){
            infowindow.open(map,marker);
        });

    }

    function loadScript() {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src = "https://maps.googleapis.com/maps/api/js?sensor=false&callback=initialize";
      document.body.appendChild(script);
    }

    var tab = document.getElementById('YourHtmlObjectID');
    YourHtmlObjectID.onmouseover = loadScript;
    YourHtmlObjectID.onclick = loadScript; 
```

# javascript - Javascript Engine V8 快速属性访问

> ID：15607057
> 
> 赞同：3
> 
> 时间：2013-03-25T03:18:17.063
> 
> 标签：javascript, v8

当我研究[快速属性访问的 v8 设计元素时](https://developers.google.com/v8/design#prop_access)，它在本主题的最后一段中提到了这一点：

> 使用隐藏类有两个优点：属性访问不需要字典查找，它们使 V8 能够使用经典的基于类的优化，内联缓存。

这对我来说有点模糊。谁能详细说明为什么隐藏类不需要字典查找并使 v8 能够使用经典的基于类的优化，内联缓存？

请尽可能详细地执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-09T18:27:42.687

我认为您提到的文章中很好地解释了**隐藏类的概念。**每当向对象添加新属性时，就会创建一个新的*隐藏类*。该对象保持对这个隐藏类的引用。此外，*隐藏类*还保留了对先前创建的*隐藏类*的引用。例如：

```
function Point(x, y) {
    this.x = x;
    this.y = y;
}

var point = new Point(10, 10); 
```

当`new Point()`被调用时，会创建一个新的*隐藏类*，并`point`保留对该*隐藏类*的引用。最初*的隐藏类*是空的，这意味着它不包含任何属性。然后，当`this.x`被调用时，会创建一个新的*隐藏类*。该隐藏类保留对前一个隐藏类的引用，并更新其对新*隐藏类*的引用。执行时再次发生同样的情况`this.y = y`。

就像在 JavaScript 中可以动态地向对象添加和删除属性一样，解决属性访问的方法是使用*map*。另一方面，*隐藏类*一个接一个地线性存储属性，就像 C 中的*结构*一样。多亏了*隐藏类*，访问属性与访问数组元素一样快。

现在让我们看看**内联缓存**是什么意思。内联缓存是一种古老的优化技术，用于 Smalltak 80 或 Self 等动态语言，并由 JavaScript 推广。在运行时访问属性时，需要确定调用对象的类型，以便准确了解要调用的实现代码。这称为*动态分派*或*后期绑定*，是 JavaScript 在访问属性或对两个操作数求和时发生的情况（它们可能是*integer*、*double*等）。考虑以下代码：

```
var x = 10;
var y = 10;
var total = x + y; 
```

当使用*内联缓存*时`var total = x + y`，编译时，您不会在对通用添加子例程的过程调用中进行编译。相反，该代码被编译为存根（内联缓存）。*在内联缓存*中生成的代码会查看接收到的参数的类型，并生成专门针对这些类型的代码。稍后，如果调用另一个添加，则假定类型将与以前相同，则执行*内联缓存。*但是，可能会发生类型不同的情况，因此*内联缓存*所做的第一件事就是检查参数的类型。如果类型不同导致*缓存未命中*，并为这些特定类型生成新代码。如果内联缓存可以处理许多不同的类型，则称为**多态内联缓存**（一个具有多于一组类型的条目）。

*内联缓存*节省了在函数调用中推断参数类型的计算，如果调用发生在循环内，它们的好处就更大。

*内联缓存*发生在 JavaScript 中访问对象的属性时，在我们看到*隐藏类*如何帮助我们快速访问属性之前。

有关*隐藏类*和*内联缓存*的更多信息，我推荐以下文章（特别是前两篇，来自 V8 黑客 Vyacheslav Egorov）：

*   [V8 由内而外](http://s3.mrale.ph/webrebels2012.pdf)。
*   [解释 JavaScript 中的 JavaScript VM - 内联缓存](http://mrale.ph/blog/2012/06/03/explaining-js-vms-in-js-inline-caches.html)。
*   [方案中的内联缓存应用程序](http://wingolog.org/archives/2012/05/29/inline-cache-applications-in-scheme)。
*   [在 JavaScript 上画图是为了乐趣和利润](http://blog.cdleary.com/2010/09/picing-on-javascript-for-fun-and-profit/)。

# java - Java接口抛出异常但接口实现不抛出异常？

> ID：15607060
> 
> 赞同：61
> 
> 时间：2013-03-25T03:18:29.987
> 
> 标签：java, exception, interface

我读了这段代码，其中接口抛出了一个异常，但是实现它的类没有抛出一个或捕获一个，这是为什么呢？在java中它是合法的还是安全的？

```
import java.rmi.*;
public interface MyRemote extends Remote {
    public String sayHello() throws RemoteException;
}

import java.rmi.*;
import java.rmi.server.*;
public class MyRemoteImpl extends UnicastRemoteObject implements MyRemote{
    public String sayHello() {
        return "Server says, 'Hey'";
    }
    public MyRemoteImpl() throws RemoteException {}
    public static void main (String[] args) {
        try {
             MyRemote service = new MyRemoteImpl();
             Naming.rebind("RemoteHello", service);
        } catch(Exception ex)
        {
            ex.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-25T03:24:32.567

> 实现和扩展的一般规则是您可以使您的新类或接口“限制更少”，但不能“限制更多”。如果您将处理异常的要求视为限制，则不声明异常的实现限制较少。任何对接口进行编码的人都不会在您的课程中遇到麻烦。

*— 斯坦·詹姆斯*

* * *

作为[http://www.coderanch.com/t/399874/java/java/Methods-throwing-Exception-Interface讨论的一部分](http://www.coderanch.com/t/399874/java/java/Methods-throwing-Exception-Interface)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-25T03:29:34.927

如果一个 Java 方法覆盖了父类中的另一个方法，或者实现了接口中定义的方法，它可能不会抛出额外的检查异常，但它可能会抛出更少的异常。

```
public class A {
    public void thrower() throws SQLException {...}
}

public class B extends A {
    @Override
    public void thrower() throws SQLException, RuntimeException, NamingException {...}
} 
```

`SQLException`很好；它在被覆盖的方法中声明。它甚至可以被一个像`SerialException`.

`RuntimeException`很好；那些可以在任何地方使用。

`NamingException`是非法的。它不是`RuntimeException`，也不在`A`的列表中，即使作为子类型也是如此。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-06-21T11:15:34.950

@Chetter Hummin 的好回答。

一种看待这一点的方法，我发现它很容易记住，接口的实现可以更具体，但不能更通用。

例如在接口中`void test() throws Exception`表示“测试**可能**抛出异常”

那么实现可以`void test()`意味着“测试**不会**抛出异常”（更具体）

或实施可以`void test() throws NullpointerException`（更具体）

```
interface x {
    void testException() throws Exception;
}

public class ExceptionTest implements x {
    @Override
    public void testException() {   //this is fine
    }

    ////// or

    @Override
    public void testException() throws NullPointerException {  // this is fine
    }
} 
```

# c - C 编程 vfork 返回值

> ID：15607061
> 
> 赞同：0
> 
> 时间：2013-03-25T03:18:32.043
> 
> 标签：c, fork

我必须创建一个程序：

*   要一个号码
*   创建子进程（使用 vfork）
*   计算平方根（在子进程中）
*   显示父进程的平方根

这是我的代码

```
#include <stdio.h>
#include <sys/types.h>
#include <math.h>
#include <unistd.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    double n=0;
    printf("Number: "); //ask number
    scanf("%d", &n);

    pid_t pid = vfork(); //create child process

    if (pid==0)//if child process
    {
        printf("Child process started\n");
        n = sqrt(n);//calculate square root
    }
    else//parent process
    {
        printf("Returnning to parent process\n");
    printf("Square Root: %d",n);
    }       

    return 0;
} 
```

但是我的代码不起作用，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:23:39.123

你为什么期望它起作用？`exec`除了或`_exit`之后做任何事情都会`vfork`导致明确的未定义行为。看：

[vfork() 系统调用](https://stackoverflow.com/questions/6071670/vfork-system-call)

以及对以下恐怖的一些进一步讨论`vfork`：

[http://ewontfix.com/7/](http://ewontfix.com/7/)

[http://www.openwall.com/lists/musl/2012/12/31/16](http://www.openwall.com/lists/musl/2012/12/31/16)

如果它很有趣，这里列出了您的程序可能存在的问题（UB 的表现形式）：

*   `printf`在孩子中可能会严重破坏父母的标准输出状态。
*   `n`可以永久存储在寄存器中，在这种情况下，父母无法看到孩子所做的更改
*   编译器可以看到它`n`在分支中未初始化`else`，因此它根本不需要生成任何代码来读取它（此分支通过访问值不确定的对象无条件地调用 UB）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T13:44:52.050

```
 int main(int argc, char **argv) {    int  n=0;

    pid_t pid = vfork(); //create child process

    if (pid==0)//if child process
    {
        printf("Child process started\n");
       scanf("%d",&n);

        n = sqrt(n);//calculate square root

       _exit(23);
    }
    else//parent process
    {
     printf("Returnning to parent process\n");
    printf("Square Root: %ld",n);
    }

    return 0; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T03:38:45.947

您正在计算孩子的平方根，但试图在父母中打印它。父母不知道平方根是什么。如果您希望父进程打印平方根，那么您需要以某种方式将该值从子进程传回父进程。您似乎更有可能在子进程中打印平方根。

# android - Android switchpreference 如何设置开关偏好默认值？

> ID：15607067
> 
> 赞同：10
> 
> 时间：2013-03-25T03:19:29.810
> 
> 标签：android, android-preferences

我有一个开关首选项，并希望它在 xml 中默认为“ON”...

```
<SwitchPreference
        android:defaultValue="true"
        android:key="PromoNotificationOnOff"
        android:title="@string/Snotification_enable" /> 
```

而在课堂上，

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Load the preferences from an XML resource
    addPreferencesFromResource(R.xml.settings);

} 
```

为什么它不工作？什么不见​​了？谢谢！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T03:36:46.923

在你的`MainActivity onCreate`方法中添加这一行

```
PreferenceManager.setDefaultValues(this, R.xml.settings, false); 
```

[您可以在http://developer.android.com/reference/android/preference/PreferenceManager.html#setDefaultValues(android.content.Context](http://developer.android.com/reference/android/preference/PreferenceManager.html#setDefaultValues(android.content.Context) , int, boolean)阅读它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-10T13:04:18.660

代码是正确的，只需使用 switchPreferenceCompact 而不是 SwitchPreference

```
 <SwitchPreferenceCompat
        app:key="promoNofitficationOnOff"
        app:summaryOff="@string/notification_summary_off"
        app:summaryOn="@string/notification_summary_on"
        app:defaultValue="true"
        app:title="@string/promo_notification_title" /> 
```

# delphi - 使用 OnDrawItem 事件时未正确绘制 TListview

> ID：15607068
> 
> 赞同：2
> 
> 时间：2013-03-25T03:19:39.967
> 
> 标签：delphi, delphi-2007, delphi-xe3

我在 TlistView 组件中使用 OnDrawItem 事件来使用自定义颜色绘制内容，但是当滚动列表视图时会出现一些工件。

![在此处输入图像描述](../Images/a0086d5339ae1e3fe4a6f2156858731b.png)

这是使用的代码。

```
procedure TForm35.FormCreate(Sender: TObject);
var
 i, j : integer;
 Item : TListItem;
 s : string;
begin
  for i:= 0 to 99 do
  begin
    Item:=ListView1.Items.Add;
    for j:= 0 to ListView1.Columns.Count-1 do
    begin
      s:= Format('Row %d Column %d',[i+1, j+1]);
      if j=0 then
       Item.Caption :=s
      else
       Item.SubItems.Add(s);
    end;
  end;
end;

procedure TForm35.ListView1DrawItem(Sender: TCustomListView; Item: TListItem;
  Rect: TRect; State: TOwnerDrawState);
var
  x, y, i: integer;
begin
  if odSelected in State then
  begin
    TListView(Sender).Canvas.Brush.Color := clYellow;
    TListView(Sender).Canvas.Font.Color := clBlack;
  end
  else
  begin
    TListView(Sender).Canvas.Brush.Color := clLtGray;
    TListView(Sender).Canvas.Font.Color := clGreen;
  end;

  TListView(Sender).Canvas.FillRect(Rect);
  x := 5;
  y := (Rect.Bottom - Rect.Top - TListView(Sender).Canvas.TextHeight('Hg')) div 2 + Rect.Top;
  TListView(Sender).Canvas.TextOut(x, y, Item.Caption);
  for i := 0 to Item.SubItems.Count - 1 do
  begin
    inc(x, TListView(Sender).Columns[i].Width);
    TListView(Sender).Canvas.TextOut(x, y, Item.SubItems[i]);
  end;
end; 
```

我在 Delphi 2007 和 XE3 中测试了这段代码，但得到了相同的结果。我怎样才能防止这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T02:14:34.493

好的。更改`X := 5`为`X := Rect.Left;`

还有另一种解决方案（可能更准确）：

```
uses
    Graphics;

//... Form or something else declarations ... 

implementation

procedure TForm35.ListView1DrawItem(Sender: TCustomListView; Item: TListItem; Rect: TRect; State: TOwnerDrawState);
var
    s: string;
    ts: TTextStyle; // Text style (used for drawing)
begin
    // inherited;
    // Clear target rectangle
    // Set Canvas'es Font, Pen, Brush according for Item state
    // Get into s variable text value of the Cell.
    ts.Alignment := taLeftJustify; // Horz left alignment
    ts.Layout := tlCenter;         // Vert center alignment
    ts.EndEllipsis := True;        // End ellipsis (...) If line of text is too long too fit between left and right boundaries
    // Other fields see in the Graphics.TTextStyle = packed record 
    ListView1.Canvas.TextRect(
        Rect, 
        Rect.Left, // Not sure, but there are a small chance of this values equal to zero instead of Rect...
        Rect.Top, 
        s, 
        ts)
end;

end. 
```

为了防止一些轻弹...

```
...
var
    b: TBitmap;
begin
    b := TBitmap.Create;
    try
        b.Widht := Rect.Right - Rect.Left;
        b.Height := Rect.Bottom - Rect.Top;
        //...
        // Draw content on the b.Canvas
        //...
        ListView.Canvas.Draw(Rect.Left, Rect.Top, b);
    finally
        b.Free;
    end;
end; 
```

# hadoop - 如何在 HBase 中测试恢复？

> ID：15607070
> 
> 赞同：0
> 
> 时间：2013-03-25T03:19:55.460
> 
> 标签：hadoop, hbase, bigdata

我想测试 HBase（独立模式）中数据的恢复，我该怎么做？恢复可以在独立模式下工作吗？

在没有关闭 HBase 的情况下从 shell 执行 put 命令后，我切换了我的 VM 并重新启动，它没有显示新添加的数据。即使我尝试过 eclipse 也没有显示。如何在 HBase 中测试恢复？我可以看到 Hfile，但看不到 Hlog，我需要为此设置任何路径吗？

这是我写的代码..

```
Put p=new Put(Bytes.toBytes("name10"));
p.setWriteAheadLog(true);
p.add(Bytes.toBytes("cf"), Bytes.toBytes("name"),Bytes.toBytes("Some Value 10"));
table.setAutoFlush(true);
table.put(p); 
```

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:29:58.223

HLog 文件存储在**.logs 文件夹（Rootdir）**中，在独立模式下，写入 WAL 需要时间，而在伪分布式或分布式模式下，它将立即更新

# wpf - 一旦程序发布，列表框将不会显示更新的数据库信息

> ID：15607071
> 
> 赞同：0
> 
> 时间：2013-03-25T03:20:04.603
> 
> 标签：wpf, data-binding, listbox

我是编程的初学者，我正在尝试制作一个程序来跟踪我在 WPF 中的慢跑数据。我设置了一个列表框，该列表框与我的紧凑型 sql 数据库进行数据绑定，我的信息被记录到该数据库中。当我在 Visual Studio 中时，它可以正常工作，但是当我发布程序时，列表框将不再显示来自数据库的正确信息。每次我开始新的程序会话时，它都会重新开始。我知道信息在数据库中，因为我有可以正确显示所有最新记录数据的图表。但是，列表框将仅显示在当前会话期间记录的数据。当我关闭程序并重新打开时，我之前会话的数据不再显示在列表框中。

我的代码如下所示：

```
 runDataDataSet1 ds;
    runDataDataSet1TableAdapters.runDataTableTableAdapter dt;
    weightDataSet wds;
    weightDataSetTableAdapters.weightTableTableAdapter wdt;

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {

        ds = ((runDataDataSet1)(this.FindResource("runDataDataSet1")));
        dt = new runDataDataSet1TableAdapters.runDataTableTableAdapter();
        dt.Fill(ds.runDataTable);
        CollectionViewSource cvs = ((CollectionViewSource)(this.FindResource("runDataTableViewSource")));
        cvs.View.MoveCurrentToFirst();

        wds = ((weightDataSet)(this.FindResource("weightDataSet")));
        wdt = new weightDataSetTableAdapters.weightTableTableAdapter();
        wdt.Fill(wds.weightTable);
        CollectionViewSource wcvs = ((CollectionViewSource)(this.FindResource("weightTableViewSource")));
        wcvs.View.MoveCurrentToFirst(); 
```

要提交数据，当按下提交按钮时，我有以下代码：

```
double pace = runData.runPace(runData.milesRun, runData.timeRun);
        double pace2 = Math.Round(pace, 1);
        double milesDuration = Math.Round((runData.mileDuration(runData.milesRun, runData.timeRun)), 1);
        paceTextBox.Text = ((milesDuration) + " min mile");
        //UPDATE DATABASE
        string myConnectionString = @"Data Source=C:\Users\zfam\My   Projects\programming\visual studio\XTrakker\XTrakker\runData.sdf";
        string mySelectQuery = "SELECT [int], [runDate], [runDist], [runTime], [runPace] FROM [runDataTable] order by [int] desc";
        DataRow dr = ds.Tables["runDataTable"].NewRow();
        SqlCeDataAdapter adapter = new SqlCeDataAdapter(mySelectQuery, myConnectionString);
        dr["runDate"] = date;
        dr["runDist"] = distData;
        dr["runTime"] = timeData;
        dr["runPace"] = milesDuration;

        ds.Tables["runDataTable"].Rows.Add(dr);

        SqlCeCommandBuilder projectBuilder = new SqlCeCommandBuilder(adapter);
        DataSet newSet = ds.GetChanges(DataRowState.Added);
        adapter.Update(newSet, "runDataTable");
        adapter.Dispose(); 
```

同样，当我在 Visual Studio 中运行程序时，这一切都正常工作。一旦我发布，列表框将只显示当前会话中的数据，甚至正在更新实际的数据库文件。也许我做错了？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:24:29.880

很难说，但我对这条线有点困惑：

```
string myConnectionString = @"Data Source=C:\Users\zfam\My   Projects\programming\visual studio\XTrakker\XTrakker\runData.sdf"; 
```

看起来您对数据源提供程序进行了硬编码。您确定在 Visual Studio 中以及在发布应用程序时使用相同的数据源吗？

也许数据源在每次执行时都会重新创建，这可以解释为什么你总是有新数据。

# git - Git合并出错，奇怪的历史

> ID：15607073
> 
> 赞同：3
> 
> 时间：2013-03-25T03:20:10.317
> 
> 标签：git, github, git-merge

我在这个 github 存储库上工作：[https ://github.com/Sable/mclab](https://github.com/Sable/mclab)

开发分支的历史有点不稳定。这就是发生的事情：

*   环境搞砸的人 A 推动了一些 1970 年的提交。
*   人 B 试图将他的“脆弱”分支合并到开发并推送到 github。但这发生了：[https](https://github.com/Sable/mclab/compare/aa6e2c9d74...9209f45db4) ://github.com/Sable/mclab/compare/aa6e2c9d74...9209f45db4 ；似乎回购上的每一次提交都被推送过。

现在历史很奇怪，例如[https://github.com/Sable/mclab/commits/develop?page=58](https://github.com/Sable/mclab/commits/develop?page=58)；您可以看到 2008 年的第一次提交，然后是 1970 年的搞砸环境提交，随后（在下一页）是更近期的提交，这些提交应该位于历史的顶端。

所以我有两个问题：

1.  究竟发生了什么？我猜 1970 年的提交以某种方式搞砸了合并，但我不确定。
2.  什么是“修复”事情的最佳方式？我知道您无法真正撤消推送；我基本上希望发展的历史看起来像这件事发生之前的样子。我可以对回购进行奇怪的手术来实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:53:53.860

这是我想通的。

合并进行得很顺利——合并不依赖于时间戳（例如 a`git log --date-order`显示了一个合理的顺序）。但是历史看起来很奇怪，因为时间戳决定（除其他外）默认提交顺序显示在 中`git log`，并且显然是 GitHub 中的提交比较视图。

这就是我所做的：

*   `develop`从合并发生之前的分支开始（确实有 1970 年的提交）。
*   基于`develop`.
*   在`git reset --hard`开发中运行，返回到第一个 1970 提交的父级
*   以交互方式将新分支重新定位到开发上，为我想要更改其日期的所有提交选择“编辑”并为它们选择合理的日期
*   删除了github上的develop分支
*   将新的开发分支推送到 github

这似乎工作得很好，尽管我必须指示人们在拉动之前要小心（要么克隆一个新的 repo，要么重置回我在 rebase 之前所做的相同提交）。

# c# - 使用方法的状态模式

> ID：15607074
> 
> 赞同：3
> 
> 时间：2013-03-25T03:20:11.483
> 
> 标签：c#, func, state-machine

我正在尝试基于状态模式的修改版本使用方法作为状态而不是类来实现一个简单的状态机，如下所示：

```
private Action<Input> currentState;
private void NextState(Input i) {
    currentState(i);
}

private void State1(Input i) {
    if( i ... )
        currentState = State1;
    else
        currentState = State2;
}

private void State2(Input i) {
    if( i ... )
        currentState = State1;
    else
        currentState = State2;  
} 
```

但如果我能这样做会更优雅：

```
private void NextState(Input i) {
    currentState = currentState(i);
}

private Func<xxx> State1() {
    if( i ... )
        return State1;
    else
        return State2;
} 
```

但我不知道如何写这个`Func`。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T03:23:40.633

如果您想使用返回的函数`void`，请尝试使用[`Action`](http://msdn.microsoft.com/en-us/library/system.action.aspx)。

```
private Action State1() {
    if( ... )
        return State1Inner;
    else
        return State2Inner;
} 
```

如果要使用返回具有自己签名的函数的函数，则必须首先定义自定义委托类型。这是一个通用版本：

```
public delegate State<T> State<T>(T input);

private State<int> State1(int input) {
    if( ... )
        return State1;
    else
        return State2;
} 
```

这将帮助您避免使用内部状态函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:13:16.253

您可能想看看[这篇文章](http://shadowcoding.blogspot.com/2009/01/yield-and-c-state-machine.html)，它讨论了使用 yield 语句来执行状态机。例如，这[通常](http://en.wikipedia.org/wiki/Coroutine)[在 Unity3d 游戏引擎中](http://www.playmedusa.com/blog/2010/12/15/simple-fsm-like-structure-with-coroutines-in-c-unity3d/)完成。[（这里的](http://www.altdevblogaday.com/2011/07/07/unity3d-coroutines-in-detail/)另一个讨论）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T03:36:54.220

如果您想将方法用作状态并“一般”地引用它们，则需要函数指针。我不熟悉 c# 中的语法，但在 c++ 中，您可以将指针传递给函数，并使用其指针调用该函数。从本质上讲，这意味着将函数用作参数/变量 - 将使用的操作，但在运行时之前是未知的。

看看函数指针，我认为这会让你到达你需要的地方，尽管我很好奇你在这里所做的事情的本质。

如果您正在使用 c#，它使用称为函数委托而不是指针的东西。在这里阅读：http: [//msdn.microsoft.com/en-us/library/ms173171.aspx](http://msdn.microsoft.com/en-us/library/ms173171.aspx)

# php - PHP计数MYSQL行问题？

> ID：15607080
> 
> 赞同：0
> 
> 时间：2013-03-25T03:21:08.587
> 
> 标签：php, mysql, rows, counting

如果我为一个人创建了至少 1 个团队，我正在努力做到这一点，它将显示团队。如果他们没有团队，它会说没有团队。如果此人至少有 1 个团队，则它有效，但如果此人不在团队中，则不会显示任何内容。我该如何解决？

```
<?php

                        $sql = mysql_query("SELECT * FROM teams WHERE players LIKE '%$sessiongamt%'") or die("Could not allocate information!");
                                $num = 0;
                                while($row = mysql_fetch_assoc($sql)){
                                    $num = ++$num;
                        $amount1 = mysql_num_rows($sql);
                        $name = $row["name"];
                                    $teamrank = $row["rank"];
                                    $teamlink = $row["link"];
                                    $players = $row["players"];
                        $teamid = $row['id'];

                        if($amount1 < 1){
                          $teams = "No Teams";
                          echo "$amount";
                        }else{
                          $teams = "$name";
                          echo "<a href='$teamlink?id=$teamid'>$teams</a>";
                        }

                      }print "$amount1";
                    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:24:32.533

查看这段代码的第三行——把它放在你的代码中的同一个地方，而不是你的行。

```
 if($amount1 < 1){
                          $teams = "No Teams";
                          echo $teams;
                        }else{
                          $teams = "$name";
                          echo "<a href='$teamlink?id=$teamid'>$teams</a>";
                        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:25:05.253

将计数放在 while... 循环之外

```
$sql = mysql_query("SELECT * FROM teams WHERE players LIKE '%$sessiongamt%'") or die("Could not allocate information!");

$amount1 = mysql_num_rows($sql);  //<---- this should fix it

$num = 0;        
while($row = mysql_fetch_assoc($sql)){
    $num = ++$num;

    $name = $row["name"];
    $teamrank = $row["rank"];
    $teamlink = $row["link"];
    $players = $row["players"];

    $teamid = $row['id'];

    $teams = "$name";
    echo "<a href='$teamlink?id=$teamid'>$teams</a>";
}

if($amount1 < 1){
   $teams = "No Teams";
}

print "$amount1";
?> 
```

# html - http响应中的空格和空行会影响页面的下载速度吗？

> ID：15607081
> 
> 赞同：1
> 
> 时间：2013-03-25T03:21:14.027
> 
> 标签：html, http, networking

我发现`wget some_url`它有很多空格和空行，例如

```
 <span class="meta">

                            someValue

            </span> 
```

正如我们在 Chrome 开发工具中看到的那样，下载的整个文档`wget`布局良好，文档是否有这么多空格和空行（或制表符），并且它们与主要内容一样被下载。
例如，如果文档（也可以通过 wget 或 curl 下载）是：

```
<div class="   someclass">

   somevalue

  </div> 
```

有 5 个空格（之前 3 个`someclass`，之前 2 个`</div>`）和 2 个空行换行`somevalue` 是否以严格的形式下载，例如：
`<div class="someclass">somevalue</div>`
如果不是，我对这些大多无用的信息浪费了一些带宽这一事实感到震惊，是吗？浪费的（除了它们是为了布局目的）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T03:28:51.313

据我了解，空格与字符一样多 - 所以从技术上讲是的，它是“浪费”。但是，一般来说，这是您永远不会注意到的，因为还有许多其他因素会阻碍加载时间。如果您在非常慢的网络上加载具有高比例空白的非常大的页面，您可能会注意到。

一般来说，最好不要考虑它如何影响性能（因为它不会），而要多考虑它是否使您的代码可读。在编写需要重新访问或向他人展示的内容时，空格非常重要。当模糊代码以免人们弄乱它时，摆脱空白可能会有很长的路要走。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:39:53.747

您可以为 Web 服务器设置压缩算法以与 Content-Encoding 标头一起使用。例如**gzip**：[http ://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/](http://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/)

但是，网络服务器不必*这样*做。就像您强烈暗示网络服务器压缩您的流量一样。

# mysql - MySQL vs Redis 用于存储关注者/关注用户

> ID：15607084
> 
> 赞同：0
> 
> 时间：2013-03-25T03:21:43.827
> 
> 标签：mysql, redis, scalability, social-networking, event-driven

我正在尝试找到存储关注者/关注用户数据的最佳候选者，我最初考虑将其存储在 Redis 中的一组用户 - > 用户 ID 组中，但后来我想到了超过 100 万的场景甚至一个用户有 1000 万粉丝，Redis 将如何处理如此庞大的集合？我也无法在 redis 中对集合进行分页，如果用户想要浏览跟随他的人，我必须检索整个集合，这将不起作用。如果我将它存储在 MySQL 中，我肯定可以进行分页，但是每当我必须构建用户提要时，从数据库中获取 1000 万条记录可能需要很长时间，我可以用旧的批处理方式来做这件事，但是当一个拥有很多粉丝的用户发布一些东西然后处理这 1000 万条记录只是为了获取他的粉丝时，这听起来仍然很痛苦。将它存储在 MySQL 中用于分页（主要是前端）和 Redis 中用于构建活动提要的事件驱动消息传递是否值得？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:31:00.170

是否使用 redis 或 mysql 来完成此任务是个人决定。这 1000 万条记录都没有问题。

MySQL 有 LIMIT x,y 命令用于从数据库中获取关注者的子集。

对于 redis，您可以使用排序集并使用关注者的用户 ID 或用户开始关注的时间作为排序集的分数。和 MySQL 一样，redis 支持获取大型排序集的子集。

# javascript - 在 jquery 中使用 $.when 时的范围是什么

> ID：15607089
> 
> 赞同：0
> 
> 时间：2013-03-25T03:22:03.993
> 
> 标签：javascript, jquery

我对这个网络东西很陌生，我有一些看起来像这样的服务器调用

```
$.when.apply($, serverRequests).then(function () {
    // update the UI on the page
    // remove overlay
}); 
```

所以我更新页面部分的 UI 是有效的。但是我想要做的是在服务器请求发生时添加一个覆盖。所以我尝试使用 unshift 向我的 serverRequests 数组添加一个方法，希望这会添加覆盖，所以我稍后可以在 //remove 覆盖部分中删除它。

```
 var addOverlay = function () {
            console.log("--------------");
            console.log(this);
            console.log(_this);
        };
        serverRequests.unshift(addOverlay); 
```

在我尝试使用 _this.$el.find("#mypage") 添加覆盖时，我遇到了问题。所以我尝试将内容记录到屏幕上。在上面的 addOverlay() 函数中，我没有在屏幕上打印任何内容。但如果我这样做：

```
var addOverlay = console.log("hello world");
serverRequests.unshift(addOverlay); 
```

这确实有效。这里有什么区别？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:27:30.043

```
 var addOverlay = function () {
       console.log("--------------");
       console.log(this);
       console.log(_this);
   }; 
```

几乎等于

```
 function addOverlay () {
         console.log("--------------");
         console.log(this);
         console.log(_this);
  } 
```

所以，而不是，

```
 serverRequests.unshift(addOverlay); 
```

你需要调用函数，

```
 serverRequests.unshift(addOverlay()); 
```

也在这里，

```
var addOverlay = console.log("hello world");
serverRequests.unshift(addOverlay); 
```

它登录到控制台，因为您还没有创建任何函数，并直接调用`console.log`，所以它可以工作。在这里，您正在登录，然后将of保存`hello world`到addOverlay 中。`console``return``console.log`

# jquery - Jquery 获取 optgroup 标签及其子标签

> ID：15607090
> 
> 赞同：0
> 
> 时间：2013-03-25T03:22:07.360
> 
> 标签：jquery, optgroup

它如何`box_B`根据选择的`box_A`选项获取 optgroup 的标签名称？

我使用以下功能尝试警告`box_A`父标签但无法获取它，如果我更改为`var label = $(e).attr('value');`，则显示选项值。

```
function showLabel(e){ 
    if($(e).attr('checked')=='checked'){
         var label = $(e).parent().attr('label');
         alert(label);
    }
} 
```

选择框：

```
<select id="box_A" multiple="multiple">
    <optgroup label="Asia: Japan">
        <option value="1 - Toyota">1 - Toyota</option>
        <option value="2 - Honda">2 - Honda</option>
    </optgroup>
    <optgroup label="Europe: German">
        <option value="3 - Mercedes">3 - Mercedes</option>
    </optgroup>
</select>

<select id="box_B" multiple="multiple">
    <optgroup label="1 - Toyota">
        <option value="1A - Camry">1A - Camry</option>
        <option value="1B - Yaris">1B - Yaris</option>
    </optgroup>
    <optgroup label="2 - Honda">
        <option value="2A - Civic">2A - Civic</option>
    </optgroup>
    <optgroup label="3 - Mercedes">
        <option value="3A - SL320">3A - SL320</option>
    </optgroup>

</select> 
```

调用函数：

```
$(document).ready(function() {

    $("#box_A").multiSelect({}, showLabel);

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:47:00.833

假设`showLabel`在单击选项时调用并传递了一个 jQuery 事件对象，您可以使用它：

```
function showLabel(e){ 
    var $target = $(e.target);
    if($target.is(':selected')){
         var label = $target.closest('optgroup').attr('label');
         alert(label);
    }
} 
```

**编辑：**

在查看了您发布的插件后，看来我上面的假设是错误的。`showLabel`没有传递 jQuery 事件，而是传递了单击项目的 jQuery 对象，这也是一个复选框，而不是一个选项。尝试改用这个：

```
function showLabel($target){ 
    if($target.is(':checked')){
         var label = $target.closest('optgroup').attr('label');
         alert(label);
    }
} 
```

# mysql - 无法通过标准 XAMPP 堆栈安装在 OSX 10.8 终端中启动 mysql

> ID：15607093
> 
> 赞同：0
> 
> 时间：2013-03-25T03:22:38.287
> 
> 标签：mysql, macos, client, osx-lion

**错误** sql：找不到命令

**.profile 代码** 导出 PATH=/opt/local/bin:/opt/local/sbin:/Applications/xampp/xamppfiles/bin:$PATH

我已经编辑了保存它的文件并尝试了多个版本，但无法启动 mysql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:25:27.097

键入`whereis sql`并将它打印的任何内容放入您的 PATH 中，减去程序名称。例如，如果它打印`usr/bin/sql`，则确保`/usr/bin`它在您的 PATH 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:27:14.553

要启动 mysql，请键入`mysql`not `sql`。希望有帮助。

# google-app-engine - 格式化 GQL 查询

> ID：15607096
> 
> 赞同：0
> 
> 时间：2013-03-25T03:23:19.910
> 
> 标签：google-app-engine, google-cloud-datastore, gql

我正在尝试在我的应用程序中实现此示例： [https ://developers.google.com/appengine/docs/python/datastore/structuring_for_strong_consistency](https://developers.google.com/appengine/docs/python/datastore/structuring_for_strong_consistency)

我不断收到一条错误消息：BadQueryError: Parse Error: "IS" can only be used when comparison with "ANCESTOR" at symbol :1

在我的代码中指的是这一行：

```
result = db.GqlQuery("SELECT * FROM Image WHERE ANCESTER IS :1", get_gallery_key()) 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:46:10.397

查询中的 ANCESTOR 拼写错误。

# asp.net-mvc - 如何实现在每个页面上都可见的表单（登录）？

> ID：15607102
> 
> 赞同：0
> 
> 时间：2013-03-25T03:24:00.453
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-4, forms-authentication

**假设我希望我`_Layout`包含一个登录表单而不是默认的单独登录视图。我该怎么做？**四处搜索给了我非常模糊/不确定的答案。

```
 ___________________________________
|  _______________________________  |
| |  Logo                  _____  | |
| |                       |     | | |
| |                       |Login| | |
| |                       |_____| | |
| |_______________________________| |
|                                   |
|  Content                          |
|                                   |
|                                   |
|              Footer               |
|___________________________________| 
```

目前我已经创建了一个`LoginController`并对应`LoginViewModel`于处理给定的用户名/密码组合。然后表格`POSTS`到`LoginController/Index`。这个解决方案充满了问题。例如，如何向`_Layout`? 如何执行验证？怎么处理`ReturnUrl`？

为每个其他单个模型创建一个抽象类以继承，然后将其提供给`_Layout`，看起来很难看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:21:38.563

不是最干净的解决方案：

表单本身提交给指定的控制器/动作：

```
@Using Html.BeginForm("Login", "Account")
    ...
End Using 
```

控制器只有 HTTPPOST 操作：

```
Public Class AccountController
    ' POST: /Account/Login
    <HttpPost>
    Function Login(ByVal viewModel as LoginViewModel) As ActionResult
        WebSecurity.Login(viewModel.Username, model.Password, False)
        TempData("LoginViewModel") = viewModel
        Return RedirectToLocal(viewModel.ReturnUrl)
    End Function
End Class 
```

然后在我的 _Layout 中包含登录部分：

```
@Code
    Dim model As LoginViewModel
    If TempData("LoginViewModel") IsNot Nothing Then
        model = TempData("LoginVieWModel")
    Else
        model = New LoginViewModel
    End If
    Html.RenderPartial("_LoginPartial", model)
End Code 
```

# c++ - 使用类而不是结构和构造函数问题

> ID：15607103
> 
> 赞同：0
> 
> 时间：2013-03-25T03:24:06.103
> 
> 标签：c++, class, constructor, struct

我正在尝试从使用结构转向使用类，我有几个问题 - 不完全完整，但足以说明我的查询 - 代码（提前感谢您澄清这些）：

1.  我在创建一个接受参数的构造函数时遇到问题，特别是头文件中我当前保留为`neighborAtt(int neighbor_id, int att_1, int att_2);`.

    当`neighborAtt`用作结构时，我可以轻松地将其作为`neighborAttributes currentNode(neighborID, att1, att2);`. 什么是类等价物？

2.  在 .cpp 文件中，我知道我需要将构造函数定义为`neighborAtt::neighborAtt()`.

    我是否需要使用这些功能（即包括neighborAtt::) 或者我所做的是否准确？

这是我的头文件：

```
#if !def connectivity_H
#define connectivity_H

#include <iostream>
#include <vector>
#include <list>
#include <string>
#include <sstream>
#include <fstream>

class listAtt;
class vecListAtt;

class neighborAtt //contains the neighbour and associated attributes of a node
{
public:
    neighborAtt();
    neighborAtt(int neighbor_id, int att_1, int att_2);

    vecListAtt connFrFile(int file_ext);
    vecListAtt makeList(std::vector<std::list<neighborAtt>> nodeAndInfo, int nodeID, neighborAtt neighAndAtt);  
    neighborAtt getAtt(std::string currentLine);

private:
    int neighborID;
    int attribute1;
    int attribute2;
};

typedef std::list<neighborAtt> listAtt;
typedef std::vector<listAtt> vecListAtt;

#endif 
```

和 .cpp 文件：

```
#include "stdafx.h"
#include "connectivity.h"

neighborAtt::neighborAtt(): neighborID(0), attribute1(0), attribute2(0) {}

//neighborAtt::neighborAtt constructor with arguments 

vecListAtt connFrFile(int file_ext)
{
    //code
}

neighborAtt getAtt(std::string line)
{
    //code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:30:47.667

对于第二个构造函数（一个带有参数的），您所做的与没有它们的构造函数相同。还是我答错了问题？就像：

```
neighborAtt::neighborAtt(int neighbor_id, int att_1, int att_2)
 : neighborID(neighbor_id),
   attribute1(att_1),
   attribute2(att_2)
{
} 
```

对于方法，您必须采用相同的方式：

```
vecListAtt neighborAtt::connFrFile(int file_ext)
{
    //code
} 
```

# c++ - 将经过的时间数据存储在 for 循环内的数组中

> ID：15607106
> 
> 赞同：-1
> 
> 时间：2013-03-25T03:24:13.257
> 
> 标签：c++, arrays, time, store, elapsedtime

```
#include <iostream>
#include <stack>
#include <ctime>

std::stack<clock_t> tictoc_stack;   
void tic() {
   tictoc_stack.push(clock());
}
void toc() {
   std::cout << "Time elapsed: "
   << ((double)(clock() - tictoc_stack.top())) / CLOCKS_PER_SEC
   << std::endl;
   tictoc_stack.pop();
   dif=(clock() - tictoc_stack.top())    
}

int main()
{
   tic();
   for (k=0;k<10;k++)
   {
     doSomething();
     toc();
     double t[10];
     for(i=0;i<10;i++)
     {
       t[i]=dif;
       std::cout<< "array is" << dif << std::endl;
     }
    }
  return 0;
} 
```

现在，当我调用`toc()`函数时，它给出了经过的时间。但我希望在每次迭代时将这段时间放入一个数组中。这意味着我将有 10 个不同的经过时间，我想获取这些值并计算平均值、最小值、最大值和标准偏差。

到目前为止，每次循环运行时，我都很难将经过的时间存储在数组中。

任何建议和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:36:49.170

你`tic()`曾经，这意味着你`push`曾经。但是你`toc()`多次，这意味着你`pop`多次。

# javascript - 在远程托管的 node-webkit 应用程序中使用 require()

> ID：15607111
> 
> 赞同：5
> 
> 时间：2013-03-25T03:24:55.700
> 
> 标签：javascript, node.js, node-webkit

我有一个 package.json 文件，如下所示：

```
{
    "name": "title",
    "description": "description",
    "version": "0.1",
    "main": "https://path-to-application/",
    "window": {
        "show": true,
        "toolbar": false,
        "frame": true,
        "position": "center",
        "width": 800,
        "height": 600,
        "min_width": 220,
        "min_height": 220
    }
} 
```

但是当我尝试运行代码时：

```
var GUI = null;
var win = null;
try { GUI = require('nw.gui'); win = GUI.Window.get(); } catch (ex) { }
win.toggleFullscreen(); 
```

什么都没有发生，为 GUI 添加警报并显示它们都设置为空。当我从与 package.json 相同的 .zip 中的 index.html 文件运行相同的代码时，它按预期工作。对 require() 的初始调用似乎失败了。

有没有办法让它在远程托管的应用程序中工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T06:08:45.627

如果其他人遇到此问题，我可以通过将[node-remote字段添加到 package.json 文件来解决此问题。](https://github.com/rogerwang/node-webkit/wiki/Manifest-format#node-remote)

# java - OGNL 类型转换器演示

> ID：15607123
> 
> 赞同：2
> 
> 时间：2013-03-25T03:25:44.040
> 
> 标签：java, web, struts2, ognl

我有一个演示来展示我们如何在 struts2 中定义客户类型转换器。演示很简单，输入一个字符串“Tom,12”，代表用户的姓名和年龄。该值将被放入用户对象中。控制台将输出这些值。下面是代码：JSP：

```
 <form action=testconvert method="post">
      Please enter your name<br/>
      <input type="text" name="user"/>
      <input type="submit" value="test"/>
   </form> 
```

UserConverter：这是一个用户定义的转换器。

```
public class UserConverter extends DefaultTypeConverter {
    @Override
    public Object convertValue(Map context, Object value, Class toType) {

        System.out.println("convertValue");
        if(User.class == toType)  
        {

            String[] str = (String[])value;
            String firstValue = str[0];

            System.out.println(firstValue);

            StringTokenizer st = new StringTokenizer(firstValue, ",");

            String username = st.nextToken();
            int age =Integer.parseInt( st.nextToken());

            User user = new User();

            user.setUsername(username);
            user.setAge(age);

            return user;        
        }
        else if(String.class == toType) 
        {
            User user = (User)value;

            String username = user.getUsername();
            int age = user.getAge();

            String userInfo = "username: " + username + ", age: " + age;

            return userInfo;
        }
        return null;
    }

} 
```

我有名为“testconvert-conversion.properties”的属性文件：

```
user=com.tutorialspoint.sconvert.UserConverter 
```

动作文件：

```
public class testconvert extends ActionSupport
{
    private User user;

    public User getUser()
    {
        System.out.println("getUser");
        return user;
    }

    public void setUser(User user)
    {
        System.out.println("setUser");
        this.user = user;
    }

    @Override
    public String execute() throws Exception
    {
        System.out.println("username: " + user.getUsername());
        System.out.println("age: " + user.getAge());

        System.out.println("execute");
        return SUCCESS;
    }
} 
```

当我提交值时： "Tom,20" ，控制台输出以下内容：

```
WARNING: Parameter [user] is not on the excludeParams list of patterns and will be appended to action!

convertValue
Tom,20
setUser
username: Tom
age: 20
execute 
```

它有一个警告，但它可以输出我需要的东西。然后我更改 JSP 文件。我将代码更改如下：

```
<input type="text" name="user222"/> 
```

我认为输入标签的名称并不重要。但我错了。我没有正确获得输出。

所以我的问题是：
1，警告是什么意思？

2、如果我想要`<input>`名字是user222怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:22:29.857

如果您想使用不依赖于动作类中的属性名称的转换器，那么您需要定义应用程序范围的转换器。这是在`xwork-conversion.properties`位于类路径根目录的文件中完成的。

```
your_package.User = com.tutorialspoint.sconvert.UserConverter 
```

# java - 理解一个简单的递归方法

> ID：15607125
> 
> 赞同：-2
> 
> 时间：2013-03-25T03:25:56.410
> 
> 标签：java

我开始学习递归以及如何使用它来解决问题。

问题是，方法调用 recur(4) 显示什么？

```
public static void recur (int n)
{
  if(n==1)
  {
    System.out.print(n);
  }
  else
  {
    System.out.print(n);
    recur(n - 1);
  }
} 
```

因为 n 不等于 1，所以它求助于 recur(n - 1) 但这就是我对这里发生的事情感到困惑的地方？输出是否会类似于 3、2、1、0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:30:53.840

它将打印：`4321`。

如果你打电话`recur(4)`，那么`n == 4`当你开始。它不是 1，所以它转到 else 块，打印 4，然后调用`recur(3)`(4-1 = 3)。在那之后，它仍然不是 1，所以你再一次转到 else 块。这一次`n == 3`，所以 3 被打印出来。然后`recur(2)`被调用，它再次进入 else 块，打印出 2 并调用 recur(1)。现在 n 等于 1，因此执行 if 块，它只打印 1。

请注意，您得到`4321`的是一个`System.out.print()`声明，没有空格。A`println()`每次都会把它放在一个新的行上，你会得到：

```
4
3
2
1 
```

但是有一个`print()`声明并且没有空格，你会得到`4321`

# java - 以编程方式禁用 android wifi 热点的最佳方法是什么？

> ID：15607128
> 
> 赞同：0
> 
> 时间：2013-03-25T03:26:27.927
> 
> 标签：java, android, jvm-hotspot

我创建了一个测试 wifi 热点应用程序。该应用程序本质上启用和禁用 android 平台的 wifi 热点功能（从 2.3 到 4.1 测试）。

我注意到该应用程序存在两个问题，希望能得到一些帮助。

1）如果热点已启用超过 30 分钟（平均时间），我无法停止 wifi 热点。如果很长时间没有启动热点，我可以很好地停止热点。我使用以下代码停止：

```
 // Disable wifi hotspot
private static void stopAccessPoint() {
    try
    {
        Method[] wmMethods = wifi.getClass().getDeclaredMethods();

        for (Method method : wmMethods) {
            if (method.getName().equals("setWifiApEnabled")) {
                try {
                    method.invoke(wifi, null, false);
                } catch (IllegalArgumentException e) {
                    e.printStackTrace();
                } catch (IllegalAccessException e) {
                    e.printStackTrace();
                } catch (InvocationTargetException e) {
                    e.printStackTrace();
                }
            }
        }
    }
    catch(Exception e)
    {
        Log.d(TAG, errorStoppingHotspotMessage);

    } 
```

2）wifi热点长时间使用后失去与互联网的连接。我注意到在其他无线网络周围使用时它会更频繁地发生，所以我认为这可能是由于干扰造成的。

我可以在任何给定时间正常启动 wifi 热点，没有任何问题。所有研究都指向我已经用于禁用热点的上述代码。

有没有人以前见过这些问题？考虑到问题发生所需的时间，很难测试这些问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:01:00.937

1) 你可能想改变你的 e.printStackTrace(); 进入实际的日志记录，我使用相同的代码，无论我等待多长时间，它都能正常工作。

2）注意到了同样的情况，不确定它是否也相关，但是如果有“恒定”流量，它永远不会下降。有时我必须禁用热点并快速重新启用它才能解决此问题，但有时我的数据计划也下降了......也许运营商不希望我们热点他们的数据计划？

# windows - IE8乱码快捷键

> ID：15607131
> 
> 赞同：0
> 
> 时间：2013-03-25T03:26:43.790
> 
> 标签：windows

输入我的电子邮件地址的简单 AutoHotKey 快捷方式与我使用 Internet Explorer 8.0（及之前版本）的 XP 系统完美配合了几年，主要在网络上，偶尔在 Office 2010 中。一个月前，该快捷方式开始删除看似随机的字符（或数字或句号或@) 来自输入的数据，通常是三个字符，但每次都不同。在 Word 中的 C: 提示符处，该快捷方式仍然可以正常工作。我怀疑 IE 的 anto-update 导致了这个问题，但是 MS IE 网站上发布的问题没有产生任何有用的信息。我们将不胜感激有关如何使快捷方式再次在网络上工作的建议。谢谢你。

鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:21:42.867

Bob，您是否尝试过使用管理员权限运行 AutoHotKey。这似乎是 Windows 8 中反复出现的问题。

# php - Laravel Route 不适用于 Wamp

> ID：15607132
> 
> 赞同：0
> 
> 时间：2013-03-25T03:26:45.283
> 
> 标签：php, mod-rewrite, routes, wamp, laravel

正如标题所述，我无法让我的网站重定向。我已经做了几次尝试，并且即将失去它。

我的 .htaccess 文件如下：

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule . index.php [L] 
```

我将此文件放在 www/Laravel/public 文件夹以及 www 目录中

*   **mod_rewrite 已启用**
*   **AllowOverride 设置为全部**

我的主机文件如下

```
127.0.0.1       localhost 
```

**这是 routes.php 中包含的路由代码**

```
Route::get('authors', array('uses'=>'authors@index')); 
```

我有一个名为 authors.php 的控制器，这是代码

```
class Authors_Controller extends Base_Controller {
public $restful = true;
public function get_index () {      
    return View::make('authors.index');}
} 
```

我正在使用 Windows 7 旗舰版。我要炸掉我的脑袋了。请帮帮我，我很烂。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-23T21:55:37.017

如果您的 laravel 项目位于 c:\wamp\laravel\ 那么您应该可以调用 `http://localhost/laravel/public` 并查看默认的 laravel 欢迎页面或您自己的页面。

如果是这样，您必须检查两个方面：

1.  打开您的 /app/config/app.php 文件并检查 url 的值是否指向您的项目。 `'url'=>'http://localhost/laravel/`
2.  `RewriteEngine On`然后打开你的 .htaccess 文件并在Line 下添加 RewriteBase 规则`RewriteBase /laravel/public/`

希望有帮助！:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-23T01:33:02.763

我有同样的问题。我使用了上面的解决方案，它奏效了。

Apache rewrite_module 也必须在 wamp 中启用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-12T04:44:54.813

您需要在 httpd.conf 文件中设置一个指向您的公共目录的虚拟主机。

可以在 Apache 菜单下找到...

像这样...

```
<VirtualHost *:80>
DocumentRoot c:\wamp\www\laravel\public
ServerName testing.com
</VirtualHost> 
```

您的主机文件将反映您选择的网址......在这种情况下......testing.com

```
127.0.0.1      testing.com 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-15T02:04:54.763

检查 rewrite_module

去

*   沼泽图标
*   阿帕奇
*   阿帕奇模块
*   查看`rewrite_module`

干杯，你在头痛之后

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-18T14:56:07.923

Apache`rewrite_module`也必须在 WAMP 中启用。它适用于我的 wampserver。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-13T18:06:35.793

在根目录中创建一个 index.php 文件。

```
<?php
header("refresh: 0; http://localhost/appnamehere/public");
?> 
```

如果您在一个域下有多个站点，您可能无法更改您的公共 webroot。

我在正确的位置拥有所有正确的设置和正确的 .htaccess 文件，但它不会重定向。这为我修好了。

本文有助于使 wampserver/wampmanager 链接正常工作。 [项目链接在 Wamp Server 上不起作用](https://stackoverflow.com/questions/23665064/project-links-do-not-work-on-wamp-server)

**后脚本：**

如果您在以下位置添加虚拟主机文件：E:\wamp\bin\apache\apache2.4.23\conf\extra\httpd-vhosts.conf 并创建一个指向公共目录的虚拟主机，如下所示：

```
<VirtualHost *:80>
    ServerName Blog
    ServerAlias Blog
    DocumentRoot E:/wamp/www/Blog/public
    <Directory  "E:/wamp/www/Blog/public/">
        Options +Indexes +Includes +FollowSymLinks +MultiViews
       AllowOverride All
        Require local
    </Directory>
</VirtualHost>
# 
```

然后添加到 C:\Windows\System32\drivers\etc\hosts

```
# localhost name resolution is handled within DNS itself.
    127.0.0.1       localhost
    ::1             localhost
    127.0.0.1       Blog
    ::1             Blog 
```

你不需要我建议的 index.php 文件。如果您不创建虚拟主机，则该文件有效，两者都不需要。它是一个或另一个（尽管拥有它并没有什么害处）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-06T03:07:57.290

实际上它有一个非常简单的解决方案。您所要做的只是检查 apache 中的重写模块。使用 wamp 服务器解决方案检查 image [laravel 问题中的步骤](https://i.stack.imgur.com/kNVv3.png)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-04-15T04:21:40.207

他们唯一正确的方法是将 Web 服务器指向`public`目录。例如，如果您在`C:/xampp/htdocs/`目录中安装了 Laravel，则需要使用以下设置：

```
DocumentRoot "C:/xampp/htdocs/public"
<Directory "C:/xampp/htdocs/public"> 
```

切勿`.htaccess`在公用文件夹内编辑。如果你这样做了，你需要取回原始文件。进行这些更改后重新启动 Apache。

# objective-c - 如何使用滑动手势更改背景颜色

> ID：15607133
> 
> 赞同：0
> 
> 时间：2013-03-25T03:26:49.187
> 
> 标签：objective-c, uiview, background-color, uicolor, uiswipegesturerecognizer

我用我的颜色设置了一个数组，但是当我滑动视图时，它总是将颜色更改为数组中的最后一项。

我错过了什么？我的 for 循环设置正确吗？

这是我的代码：

```
- (void)singleLeftSwipe:(UISwipeGestureRecognizer *)recognizer
{
    UIColor * whiteColor = [UIColor whiteColor];
    UIColor * blueColor = [UIColor blueColor];
    UIColor * redColor = [UIColor redColor];

    _colorArray = [[NSArray alloc] initWithObjects:blueColor, redColor, whiteColor, nil];

    for (int i = 0; i < [_colorArray count]; i++)
    {
        id colorObject = [_colorArray objectAtIndex:i];
        _noteView.aTextView.backgroundColor = colorObject;
    }

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:34:23.877

不，您的循环设置不正确。您不应该在每次滑动时都循环播放。整个循环执行每次滑动。这将遍历每种颜色并将视图的颜色设置为该颜色。自然，最后一种颜色是被看到的颜色。

相反，在内存中保留一个索引并在每次滑动时增加/减少它。每次滑动后，更新视图的颜色。

```
// Declare two new properties in the class extension
@interface MyClass ()

@property (nonatomic) NSInteger cursor;
@property (nonatomic, strong) NSArray *colorArray;
...

@end

//In your designated initializer (may not be init depending on your superclasses)
//Instantiate the array of colors to choose from.
- (id)init {
    self = [super init];
    if (self) {
        _colorArray = @[ [UIColor whiteColor], [UIColor blueColor], [UIColor redColor] ];
    }
    return self;
}

//Implement your gesture recognizer callback.
//This handles swipes to the left and right. Left swipes advance cursor, right swipes decrement
- (void)singleSwipe:(UISwipeGestureRecognizer *)recognizer
{
    UISwipeGestureRecognizerDirection direction = [recognizer direction];
    if (direction == UISwipeGestureRecognizerDirectionLeft) {
        // Increment cursor
        self.cursor += 1;
        // If cursor is outside bounds of array, wrap around.
        // Chose not to use % to be more explicit.
        if (self.cursor >= [self.colorArray count]) {
            self.cursor = 0;
        }
    }
    else if (direction == UISwipeGestureRecognizerDirectionRight) {
        // Decrement cursor
        self.cursor -= 1;
        // If outside bounds of array, wrap around.
        if (self.cursor < 0) {
            self.cursor = [self.colorArray count] - 1;
        }
    }

    // After adjusting the cursor, we update the color.
    [self showColorAtCursor];
}

// Implement a method to change color
- (void)showColorAtCursor
{
    UIColor *c = self.colorArray[self.cursor];
    _noteView.aTextView.backgroundColor = c;
} 
```

# php - PHP，MySQL UNION 查询错误

> ID：15607142
> 
> 赞同：0
> 
> 时间：2013-03-25T03:27:36.107
> 
> 标签：php, mysql, ajax

我在尝试使用 PHP/MySQl-AJAX 调试此查询时遇到问题：变量 $param 是表单文本框上 AJAX 调用的结果。本质上，我正在尝试对三个数据库表进行动态搜索，这些表不幸地具有不同的字段（因此是 concat）。数据是具有使用不同方法生成的空间位置（对于前两个表）的作业的地址，最后一个表是非空间数据。

```
 $fetch = "(SELECT JobNo AS JobNo, CONCAT(Title1, '-', Title2, '-', Title3) AS Description, 'Hurricane' as type FROM Hurricanev2 WHERE Title1 REGEXP '$param' OR Title2 REGEXP '$param' OR Title3 REGEXP '$param') 
       UNION ALL
       (SELECT jobNo AS JobNo, description As Description, address As Geocoded_address, 'geocoded' as type FROM jr WHERE description REGEXP '$param' OR address REGEXP '$param')
       UNION ALL
       (SELECT job As JobNo, description As Description, 'plan' as type FROM register WHERE description REGEXP '$param')";

    while ( $row = mysql_fetch_object( $fetch ) ) {

        $sResults .= '<tr>';
        $sResults .= '<td>' . $row['JobNo'] . '</td>';
        $sResults .= '<td>' . $row['Description'] . '</td></tr>';
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:32:53.200

您不能合并具有不同列数的结果集。

尝试以下操作；

```
$fetch = "(SELECT JobNo AS JobNo, CONCAT(Title1, '-', Title2, '-', Title3) AS Description, 'Hurricane' as type, 'extra' FROM Hurricanev2 WHERE Title1 REGEXP '$param' OR Title2 REGEXP '$param' OR Title3 REGEXP '$param') 
   UNION ALL
   (SELECT jobNo AS JobNo, description As Description, address As Geocoded_address, 'geocoded' as type FROM jr WHERE description REGEXP '$param' OR address REGEXP '$param')
   UNION ALL
   (SELECT job As JobNo, description As Description, 'plan' as type, 'extra' FROM register WHERE description REGEXP '$param')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:32:41.897

对于 UNION，您需要为每个 SELECT 提供相同数量的列。尝试在第一个和最后一个 SELECT 上添加一个额外的 null 以均匀输出。

# javascript - 在javascript函数中设置ruby实例变量

> ID：15607143
> 
> 赞同：3
> 
> 时间：2013-03-25T03:27:37.263
> 
> 标签：javascript, html, ruby-on-rails, ruby

我正在尝试将 ruby​​ 实例变量的值设置为纬度和经度值。您将如何在 javascript 函数中设置实例变量的值？

像这样的东西？

```
<script>
    if (geoPosition.init()){  geoPosition.getCurrentPosition(geoSuccess, geoError);  }

    function geoSuccess(p) { 
        <% @lat_lng = p.coords.latidude + "," + p.coords.longitude %> 
    }

    function geoError(){ alert("No Location: Won't be able to use Maps functionality"); }
</script> 
```

有些东西告诉我我需要 json。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T03:36:31.407

您不了解代码运行的地点和时间。

Ruby（在 Rails 上或其他）在服务器上运行。它创建通过 Internet 发送到客户端的 HTML+JS+任何内容。

客户端（Web 浏览器）接收此代码并执行 JavaScript 代码等。

因此，您不能将 Ruby 变量设置为运行 JavaScript 代码的结果……而无需再次联系 Web 服务器。

当调用该函数时，您需要使用 AJAX（或其他一些较小的技术）将请求发送回 Web 服务器。

例如（使用[jQuery](http://jquery.com)的[`jQuery.post`](http://api.jquery.com/jQuery.post/)）：

```
function geoSuccess(p){
  $.post('/newcoords',{lat:p.coords.latitude, long:p.coords.longitude});
} 
```

在某处的某个控制器中：

```
def newcoords
  @lat_lng = [params[:lat],params[:long]].join(",")
end 
```

# sql - 为什么我的图表只显示错误？

> ID：15607144
> 
> 赞同：0
> 
> 时间：2013-03-25T03:27:40.647
> 
> 标签：sql, sql-server, tsql, reporting-services

这是我的 SSRS 图表::

![在此处输入图像描述](../Images/333bd4bcf5fc5b5defbd073e84ec66e2.png)

我检查了生成此图表的 sql 语句。我已经在 SSMS 中运行了这些语句，它们返回的数据没有错误。

另外，我使用 sql profiler 来截获发送到 sql server 的确切语句，并且我重新运行这些语句没有问题。

**在 ssrs 2008 r2 上的图表源表达式中可能有哪些其他错误原因？**

这是在设计模式：

![在此处输入图像描述](../Images/f75bdc25221919ca097457c8e9dde896.png)

这些被称为**图表系列标签**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:26:36.903

您的 SQL 没有任何问题，否则您将看不到报告，更不用说报告上的图表了。那么问题就在表达式中。

放入数据标签的最佳方法是使用预定义的**关键字**。我建议您`#VALY`在属性框中输入文本。有关更多关键字，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/dd207017.aspx)。

**添加指南：**

1.  打开*标签属性*对话框。
2.  在*标签文本*下，见下文，将 更改`«Expr»`为`#VALY`。

*来自 google 和 SearchSQLServer 的对话框示例*

![来自 google 和 SearchSQLServer 的对话框示例](../Images/17c1d585d8cc594192dcfa5bdc4b32ea.png)

# c++ - 指向二维数组的指针，程序编译但在运行时抛出分段错误

> ID：15607146
> 
> 赞同：0
> 
> 时间：2013-03-25T03:27:44.370
> 
> 标签：c++, arrays, function, pointers, segmentation-fault

我在课堂上有以下功能。

```
bool ncread_llt::get_dataArray_atOnce (float **data)
{
    startp[0]=0;
    countp[0]=ntime;
    float vdata[ntime][nlat][nlon];
    dataVar.getVar(startp, countp, &vdata);
    int offset=0;
    for(int t =0; t<ntime; t++)
    {
        for (int i = 0; i < nlat - 1; i++)
        {
            for (int j = 0; j < nlon - 1; j++)
            {
                offset=i*nlat+j;
                data[t][offset]=vdata[t][i][j];
            }
        }
    }
    return(true);
} 
```

我在我的主程序中这样称呼它

```
 float **rain[ntime][rain_pts];  //I get segfault in the next line.
  ncf1.get_dataArray_atOnce (**rain); //ncf1 is an object of the classs ncread_llt 
```

这东西适用于矢量符号，但我需要使用需要二维数组作为输入的库函数。我不知道我在这里犯了什么错误。我尝试了几种指针表示法的组合，但它没有编译，当它编译时（上述组合）它会出现分段错误。这段代码有什么问题吗？为什么会编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:41:42.057

谢谢@Serg lef，我按照以下方式完成了它并且它的工作原理。我不太了解分配内存和指针的概念。

```
float **rain;
rain=new float *[ntime];
for (int i=0; i<ntime; i++)
    rain[i]=new float[rain_pts]; 
```

接着

```
ncf1.get_dataArray_atOnce (rain); 
```

谢谢大家的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:50:31.433

这一行为`float **rain[ntime][rain_pts];`一个二维*指针*数组（让我们称之为这个数组`A`）创建并分配内存到每个二维浮点数组（指向`ntime*rain_pts`数据数组的指针）。此时*未*分配这些数据数组的内存。

`**rain`取消引用指针数组`A`，并获取第一个指针（尚未初始化），然后将其传递给`get_dataArray_atOnce`函数。因为指针未初始化，取消引用会导致未定义的行为。

如果您只是想将二维`ntime*rain_pts`浮点数组传递给您的函数，您可以像这样创建它：

```
float **rain = new float*[ntime];
for (int i = 0; i < ntime; ++i)
{
    rain[i] = new float[rain_pts];
} 
```

比像这样传递它：

```
ncf1.get_dataArray_atOnce (rain); 
```

# iphone - iPhone Retina 显示屏与 Apple App Store 上传

> ID：15607151
> 
> 赞同：2
> 
> 时间：2013-03-25T03:28:25.673
> 
> 标签：iphone, ios, xcode, ios5, ios6

我已阅读 Apple 的“新闻和公告”如下：

> **在您的应用程序中使用标识符**2013 年 3 月 21 日 从 5 月 1 日开始，App Store 将不再接受访问 UDID 的新应用程序或应用程序更新。请更新您的应用程序和服务器以将用户与 iOS 6 中引入的供应商或广告标识符相关联。您可以在 UIDevice 类参考中找到更多详细信息。
> 
> **让您的应用程序在 Retina 显示屏和 iPhone 上看起来很棒 5** 2013 年 3 月 21 日 从 5 月 1 日开始，提交到 App Store 的新应用程序和应用程序更新必须针对配备 Retina 显示屏的 iOS 设备构建，并且 iPhone 应用程序还必须支持 4 英寸显示屏在 iPhone 5 上。通过查看 iOS 人机界面指南了解如何准备应用程序。

对于 UDID，我不担心。但是对于第二个限制，我如何确保我的应用支持 Retina 显示？这是否意味着应用程序内的每个图像或图标都必须采用 Retina 显示分辨率？如果有任何一张图片不是 Retina 显示分辨率，Apple 会拒绝我的应用上传吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T03:33:44.067

在那封电子邮件之后，他们没有提供更多细节，但我想说他们希望你的所有图像都具有视网膜质量，理想情况下。现在，如果有几个图像不是视网膜质量（但并不明显），那么审阅者可能会宽容。但是，如果应用程序丑陋且像素化，那么您的应用程序肯定会被拒绝。我会尝试将您的所有图像更新为视网膜质量。每天使用非 Retina 设备的人越来越少（唯一没有 Retina 显示屏的设备是 iPad 2 和 iPad Mini），最后一款没有 Retina 显示屏的 iPhone 是近四年前推出的 iPhone 3GS，以及三年前过时了。

# ruby-on-rails - Rails cron 作业每天运行以创建 2 年后的数据库记录。如何计算闰年？

> ID：15607153
> 
> 赞同：4
> 
> 时间：2013-03-25T03:28:28.283
> 
> 标签：ruby-on-rails, ruby, date, cron, rake

基本上我有一个应用程序，用户可以在其中选择从现在到 2 年后的任何一天的时间段。我正在创建一个每天运行的 rake 任务，以便从现在起 2 年内向我的数据库中添加一条记录，这样明天，仍然有 2 年的时间段选择。

以我目前的逻辑，我很好奇闰年会发生什么，有没有办法让它更健壮地正确处理闰年？我担心我要么以完全错过的一天结束，要么以重复的一天结束。

```
task :generate_timeslots => :environment do

    startDate = Time.now.to_date + 2.years
    endDate = Time.now.to_date + 2.years

    startDate.upto(endDate).each do |d|

    5.times do  
       timeslot = Timeslot.create
       timeslot.location_id = 1
       timeslot.timeslot = "#{d} 09:00:00"
       timeslot.save

       timeslot = Timeslot.create
       timeslot.location_id = 1
       timeslot.timeslot = "#{d} 11:00:00"
       timeslot.save

       timeslot = Timeslot.create
       timeslot.location_id = 1
       timeslot.timeslot = "#{d} 13:00:00"
       timeslot.save

       timeslot = Timeslot.create
       timeslot.location_id = 1
       timeslot.timeslot = "#{d} 15:00:00"
       timeslot.save
    end
    end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T03:40:19.987

答案是，**如果**“从现在起两年后”包括跨越闰年的 2 月 29 日，那么该备份中将包含一个“额外”的日子，以说明日历中 2 月 29 日的“额外”日子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:52:16.070

如果您的任务以*幂等*方式运行，您就不必担心意外创建太多槽。

在调用 Timeslot.create 之前，通过选择并计算它们，改变你的脚本以潜在地生成重叠天，但不是在已经有足够槽的地方。这具有额外的优势，即在错过运行的情况下（稍微）更健壮，并且在脚本运行过于频繁的情况下更加健壮。

我不知道您正在使用的 ORM，因此您必须将其中一些视为伪代码：

```
task :generate_timeslots => :environment do

  startDate = Time.now.to_date + 2.years - 2.days
  endDate = Time.now.to_date + 2.years

  startDate.upto(endDate).each do |d|

  daily_slots = ["09:00:00","11:00:00","13:00:00","15:00:00"]

  daily_slots.each do |daily_slot|
    ts = "#{d} #{daily_slot}"

    # I'm just guessing here (no ActiveRecord experience)
    num_existing = Timeslot.where( :timeslot => ts ).count

    next if num_existing >=5 

    (5-num_existing).times do  
       timeslot = Timeslot.create
       timeslot.location_id = 1
       timeslot.timeslot = ts
       timeslot.save
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:45:45.953

您可以将实际的闰日发送到未来 4 年，从而修复错误的另一面：*我的闰日没有预先填充*。

这个解决方案在几十年内都是准确的（如果您没有任何时间相关数据可以填写到您的表格中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T15:43:27.270

嗯，现在是闰年`if (!(year % 100) == 0 || (year % 400 == 0)) && (year % 4 == 0)`。这根本不是 rails 语法，但我只是想我会在讨论中插入这个花絮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T20:30:16.320

这就是我想出的。我不是每天都填充日期，而是将我的 cron 设置为在每个月的第一天运行，并在该月的每一天循环。这将包括闰年的 2 月 29 日。

```
startDate       = (Time.now.beginning_of_month.to_date) + 2.years
endDate         = ((Time.now.beginning_of_month.to_date) + 2.years).end_of_month

startDate.upto(endDate).each do |d|

        5.times do

           timeslot = Timeslot.create
           timeslot.location_id = 1
           timeslot.timeslot = "#{d} 09:00:00"
           timeslot.save

           timeslot = Timeslot.create
           timeslot.location_id = 1
           timeslot.timeslot = "#{d} 11:00:00"
           timeslot.save

           timeslot = Timeslot.create
           timeslot.location_id = 1
           timeslot.timeslot = "#{d} 13:00:00"
           timeslot.save

           timeslot = Timeslot.create
           timeslot.location_id = 1
           timeslot.timeslot = "#{d} 15:00:00"
           timeslot.save
        end
end 
```

# php - Onclick 单选按钮运行其各自的 mysql 查询并将其显示在表中

> ID：15607155
> 
> 赞同：0
> 
> 时间：2013-03-25T03:28:33.410
> 
> 标签：php, mysql, sql, filter

我一直在搜索此代码一整天，但没有运气，我在谷歌搜索时发现了一个代码，显然它不起作用，所以我以自己的方式对其进行了编辑，但我仍然没有让它真正起作用，所以，如果有人帮助我处理这段代码，我会很高兴的。

我想要的是当我选择一个单选按钮并点击进入下一页时，我看到应该根据单选按钮显示我的数据库数据。它就像一个数据库过滤器，它过滤掉我的数据库数据。

所以首先这里是第一页...... `FILTERPAGE.HTML`

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>FILTER PAGE</title>
</head>

<body>
<form action="search.php" method="post" name="filter_option">
<table width="100%" border="0">
    <tr>
    <td>
    <label>
        <input name="filter_options" type="radio" id="filter_options_0" value="default_filter" checked>
       Default</label>
    </td>
      <td><label>
        <input type="radio" name="filter_options" value="special_id_filter" id="filter_options_1">
        Special ID</label></td>
      <td><label>
        <input type="radio" name="filter_options" value="company_name_filter" id="filter_options_2">
        Company Name</label></td>
      <td><label>
        <input type="radio" name="filter_options" value="brand_name_filter" id="filter_options_3">
        Brand Name</label></td>
      <td><label>
        <input type="radio" name="filter_options" value="model_id_filter" id="filter_options_4">
        Model ID</label></td>
      <td><label>
        <input type="radio" name="filter_options" value="colour_filter" id="filter_options_5">
        Colour</label></td>
      <td><label>
        <input type="radio" name="filter_options" value="size_filter" id="filter_options_6">
        Size</label></td>
      <td><label>
        <input type="radio" name="filter_options" value="frame_type_filter" id="filter_options_7">
        Frame Type</label></td>
      <td><label>
        <input type="radio" name="filter_options" value="frame_for_filter" id="filter_options_8">
        Frame For</label></td>
      <td><label>
        <input type="radio" name="filter_options" value="quantity_filter" id="filter_options_9">
        Quantity</label></td>
      <td><label>
        <input type="radio" name="filter_options" value="price_filter" id="filter_options_10">
        Price</label></td>
    </tr>
</table>
<input name="submit" type="submit">
</form>
</body>
</html> 
```

现在是第二个，它是 PHP 的东西............ `SEARCH.PHP`

```
<?php 
 mysql_connect("localhost","root","password") or die(mysql_error());

 mysql_select_db("stock_entry") or die(mysql_error());

$filteroption= $_POST['filter_options'];

//To use different queries while searching

if ($filteroption == 'default_filter')
{
$queres = "SELECT * FROM stock_entry_spectacles ORDER BY 'id'";
}
else if ($filteroption == 'special_id_filter')
{
$queres = "SELECT * FROM stock_entry_spectacles ORDER BY 'special_id'";
}
else if ($filteroption == 'company_name_filter')
{
$queres = "SELECT * FROM stock_entry_spectacles ORDER BY 'company_name'";
}
else if ($filteroption == 'brand_name_filter')
{
$queres = "SELECT * FROM stock_entry_spectacles ORDER BY 'brand_name'";
}
else if ($filteroption == 'model_id_filter')
{
$queres = "SELECT * FROM stock_entry_spectacles ORDER BY 'model_id'";
}

$query = $queres;
$result = mysql_query($query) or die(mysql_error());
 while ($row = mysql_fetch_array($result)){
echo "<table class='data' border='0' cellspacing='2' align='center'>
 <tr>
 <td align='center' class='special_id'><input type='text' name='id' value='".$row['special_id']."'></td>
 <td align='center' class='company_nametd'><input type='text' name='company_name' value='".$row['company_name']."'></td>
  <td align='center' class='brand_namestd'> <input type='text' name='brand_name' value='".$row['brand_name']."'></td>
 <td align='center' class='model_idtd'> <input type='text' name='model_id' value='".$row['model_id']."'></td>
 <td align='center' class='colour_selecttd'> <input type='text' name='colour_select' value='".$row['colour_select']."'></td>
 <td align='center' class='size_selecttd'> <input type='text' name='size_select' value='".$row['size_select']."'></td>
 <td align='center' class='type_selecttd'><input type='text' name='type_select' value='".$row['type_select']."'></td>
 <td align='center' class='for_selecttd'> <input type='text' name='for_select' value='".$row['for_select']."'></td>
 <td align='center' class='quantitytd'> <input type='text' name='quantity' value='".$row['quantity']."'></td>
 <td align='center' class='pricetd'> <input type='text' name='price' value='".$row['price']."'></td>
 <tr>
 </table>";
 }  

?> 
```

最后但并非最不重要的Mysql结构......

数据库名称：`stock_entry`

表的表结构`stock_entry_spectacles`

```
CREATE TABLE IF NOT EXISTS `stock_entry_spectacles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `special_id` int(225) DEFAULT NULL,
  `company_name` text COLLATE utf8_unicode_ci,
  `brand_name` text COLLATE utf8_unicode_ci,
  `model_id` varchar(50) CHARACTER SET utf8 COLLATE utf8_polish_ci DEFAULT NULL,
  `colour_select` text COLLATE utf8_unicode_ci,
  `size_select` int(11) DEFAULT NULL,
  `type_select` text COLLATE utf8_unicode_ci,
  `for_select` text COLLATE utf8_unicode_ci,
  `quantity` int(11) DEFAULT NULL,
  `price` int(50) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=6 ; 
```

转储表的数据`stock_entry_spectacles`

```
INSERT INTO `stock_entry_spectacles` (`id`, `special_id`, `company_name`, `brand_name`, `model_id`, `colour_select`, `size_select`, `type_select`, `for_select`, `quantity`, `price`) VALUES
(1, NULL, 'Titan', 'abc', '123', 'GunMetal', 50, 'Metal', 'Male', 2, NULL),
(2, NULL, 'AO Specs', 'def', '456', 'Black', 48, 'Metal', 'Male', 6, 500),
(3, NULL, 'Sinora', 'ghi', '789', 'Blue', 13, 'broad sided', 'Female', 3, 460),
(4, NULL, 'Tommy', 'jkl', '963', 'GunMetal', 40, 'Shell', 'Male', 8, 800),
(5, 14873273, 'Manav', 'mno', '852', 'Black', 50, 'Metal', 'Male', 5, 120); 
```

请任何人尝试帮助我，因为我的一个项目需要此代码....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:59:41.947

**代替**

```
mysql_connect("localhost","root","password") or die(mysql_error()); 
```

**和**

```
mysql_connect("localhost","root","") or die(mysql_error()); 
```

# android - Android通过shell检查SQLite数据库版本？

> ID：15607160
> 
> 赞同：2
> 
> 时间：2013-03-25T03:28:52.563
> 
> 标签：android, database, sqlite

在这个[问题](https://stackoverflow.com/questions/3707797/where-does-android-store-sqlite-database-version)之后，有没有办法通过 adb shell 检查应用程序的当前数据库版本？另外我如何检查`user cookie`问题中提到的字段？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T08:25:51.537

要显示数据库文件的[用户版本号](http://www.sqlite.org/pragma.html#pragma_schema_version)（与用户 cookie 相同），请执行以下 SQL 命令：

```
PRAGMA user_version; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-25T06:41:10.963

要通过 shell 检查 sqlite 版本，请执行以下命令：

```
adb -s <deviceId> shell
sqlite3 /data/data/<your app's package name> 
```

来源：[https ://developer.android.com/studio/command-line/adb](https://developer.android.com/studio/command-line/adb)

# c++ - std::string 在 Visual Studio 2010 中给出编译器警告

> ID：15607163
> 
> 赞同：0
> 
> 时间：2013-03-25T03:29:14.003
> 
> 标签：c++

我正在将我的 Visual Studio 2005 C++ 代码迁移到 Visual Studio 2010。不幸的是，我在 VS2010 上的 std::string 上遇到错误，而在 VS2005 中我以前从未遇到过此错误。

这是代码示例

```
#include<string>

typedef std::string String

class __declspec(dllexport) SomeClass
{
public:
   String somevariable;  // compiler warning here.  Please see below for the compiler warning.

   void SomeFunction(String sName);  // No compiler errors or warning here
}; 
```

编译器警告为：

```
error C2220: warning treated as error - no 'object' file generated
warning C4251: 'SomeClass::somevariable' : class 'std::basic_string<_Elem,_Traits,_Ax>' needs to have dll-interface to be used by clients of class 'SomeClass'

with
[
    _Elem=char,
    _Traits=std::char_traits<char>,
    _Ax=std::allocator<char>
] 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:42:16.673

我建议阅读并理解 Arun 首先给出的链接。然后，如果您可以合理地确定您没有使用不同的编译器（这无论如何都是 C++ 中的灾难），您可以简单地禁用/忽略警告。

顺便提一句：

*   对于某些代码，我从 VS2005 收到相同的警告。
*   行为不一致是完全正确的。函数和成员变量要么都触发诊断，要么都不触发。

# c++ - 为什么 c++ 应用程序可能会错误地评估表达式？

> ID：15607165
> 
> 赞同：1
> 
> 时间：2013-03-25T03:29:32.723
> 
> 标签：c++, qt, logic, qmake

当我写这个问题时，我突然意识到，由于嵌入式和非嵌入式应用程序构建，我们可能正在使用两个版本的 Qt。我们都在使用`gcc version 4.5.2 (Ubuntu/Linaro 4.5.2-8ubuntu4)`. 我的构建环境是：

```
QMake version 2.01a
Using Qt version 4.7.3 in /usr/local/Trolltech/QtEmbedded-4.7.3/lib 
```

至少我的一位同事正在使用：

```
QMake version 2.01a
Using Qt version 4.7.2 in /usr/lib 
```

我的两个同事在制作使用我的计算库的独立应用程序时遇到了问题。我们的主要应用程序和我的独立单元测试应用程序工作正常，我的调查发现我的代码没有问题。我得出的结论是，构建环境或编译器一定存在一些基本问题，因为在这两种情况下，我们都隔离了不稳定/非标准行为。我隔离的案例如下：

```
void className::functionName(float newDeltaTime)
{
    float zero_ = 0;
    std::cout << "newDeltaTime: " << newDeltaTime << std::endl;
    std::cout << "zero_: " << zero_ << std::endl;
    std::cout << "newDeltaTime > zero_: " << (newDeltaTime > zero_) << std::endl;
    std::cout << "newDeltaTime > zero_: " << (newDeltaTime > zero_) << std::endl;
    std::cout << "newDeltaTime > zero_: " << (newDeltaTime > zero_) << std::endl;
... 
```

这输出：

```
newDeltaTime: 0.2
zero_: 0
newDeltaTime > zero_: 0
newDeltaTime > zero_: 1
newDeltaTime > zero_: 1 
```

使用 gdb（由 QtCreator 运行），我们可以在每一行看到正确的变量值 - 未损坏。这对我来说真的很奇怪。调试器显示的变量没有变化，但完全相同的表达式第二次产生不同的值。

最初，我进行了一些错误检查，`if(newDeltaTime > 0) { //do something } else { //log and throw }`我的老板向我展示了抛出值为 0.2 的异常的代码（如上所示）。我无法弄清楚这个问题。当我添加日志记录时，代码开始工作，但我注意到日志记录的布尔表达式值不正确。最后，我想多次记录表达式，得到如上所示的输出。

我觉得地面在摇晃 - 什么会导致这种情况发生？一切都编译没有错误，如果我们两次评估表达式并第二次使用结果，那么它似乎工作正常。当可能发生单事件扰动（空间辐射撞击电路和损害逻辑）时，我熟悉投票逻辑，但我不寒而栗地认为这里有必要......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:02:51.160

> 什么可能导致这种情况发生？

我能想到的唯一的事情是

*   `libstdc++`编译器（标头）与您正在使用的不匹配。
*   破坏堆栈的信号处理代码

如果您列出的输出始终是可重复的，那么第二个原因不可能是它，只有第一个原因仍然存在。

如果您在未优化的代码中观察到这种行为，我会采用以下方法：在 GDB 的第一`std::cout << "newDeltaTime > zero_: " <<...`行设置断点，并验证该行执行后`newDeltaTime`不再是`0.2`. 再次运行，这次设置一个 GDB 观察点`watch *(float*)&newDeltaTime`，并查看值损坏的确切位置（可能是 libstdc++ 中的某个位置）。

如果您只使用优化的代码来观察这一点，事情会变得更加棘手，并且您需要了解`ABI`s 和调用约定，然后才能有效地调试它。

# linux - 加速在 linux 中运行的软件

> ID：15607169
> 
> 赞同：-1
> 
> 时间：2013-03-25T03:30:17.047
> 
> 标签：linux, testing

我需要在linux下测试一个月的软件稳定性。显然，一个月太长了。我想知道，有没有一种工具可以加速这个过程，比如使用这个工具 30 小时就像运行这台机器一个月（30 天）一样？请注意这个工具应该支持linux。提前感谢任何回复。

李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:34:05.507

进行这种测试的方法是估计工作量，并增加它。

例如，在极端条件下加热和冷却系统，可能使用风洞或热源，模拟“一个月”使用所需的任何东西。

更严肃地说，您期望什么样的负载？例如，您是否会有人每天坐着使用该程序，因此需要担心在应用程序仍在使用时更改日期？

或者您会期望在一个月内有 50,000 名客户吗？

# ruby-on-rails - 同时更新两个实例变量

> ID：15607171
> 
> 赞同：0
> 
> 时间：2013-03-25T03:30:44.227
> 
> 标签：ruby-on-rails

我有一个带有`User.rb`, `Question.rb`和一个`Answer.rb`模型的 Rails 应用程序。每个模型之间都定义了可预测的关系。一个用户`has_many`提问，一个用户也`has_many`回答。一个问题`has_many`也回答了。

我正在尝试为提问者提供选择答案作为“ `best answer`”的选项。因此，我在 Answers 控制器中创建了一个“bestAnswer”控制器操作。在此控制器操作中，我希望将最佳答案的 id 存储在 中`@question`，并指示该特定`@answer`被选为最佳答案。因此，我试图同时`update_attributes`为`@question``@answer`

```
if @question.update_attributes(:accepted_answer_id => @answer.id) && @answer.update_attributes(:accepted => true) 
```

完整的方法。

```
 def bestanswer

    @answer = Answer.find(params[:answer_id])
    @question = Question.find(params[:question_id])     
         if @question.update_attributes(:accepted_answer_id => @answer.id) && @answer.update_attributes(:accepted => true)
             redirect_to @question, notice: 'You have accepted as best answer' 
         else
             redirect_to @question, notice: 'There was a problem marking this as best answer. Please try again.' 
         end
 end 
```

这可行，但我也知道 Rails 支持事务。由于缺乏经验，我不确定我是否应该按照上面的方式做事，或者尝试进行交易，或者其他什么。如果你认为我应该做一笔交易，你会怎么写？我有点困惑，因为我认为事务应该在模型上完成，我不确定在模型等中使用实例变量，以及在哪个模型上编写它。

更新。我通过以下方式在第一个答案中实施了建议。它有效，但对我来说看起来很奇怪。由于我的 OP 询问应该如何编写事务，我希望有人能澄清如何将事务集成到控制器操作中。

```
 if ActiveRecord::Base.transaction do
                      @question.update_attributes! :accepted_answer_id => @answer.id
                      @answer.update_attributes! :accepted => true
                    end
                 redirect_to @question, notice: 'You have accepted as best answer' 
             else
                 redirect_to @question, notice: 'There was a problem marking this as best answer. Please try again.' 
             end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:18:33.567

你可以做

```
ActiveRecord::Base.transaction do
  @question.update_attributes! :accepted_answer_id => @answer.id
  @answer.update_attributes! :accepted => true
end 
```

我使用`!`这里是因为 ActiveRecord 只有在发生异常时才会回滚事务，如果出现问题，`!`版本`update_attributes`将触发。

此外，如果您`has_one :accepted_answer`在 Question 模型上设置了关系，则应使用

```
@question.update_attributes! :accepted_answer => @answer 
```

而不是手动设置 ID。通常最好让 ActiveRecord 管理 ID。

# ajax - Ajax 不适用于 IE10

> ID：15607173
> 
> 赞同：-1
> 
> 时间：2013-03-25T03:30:53.627
> 
> 标签：ajax, post

我有一个使用 jquery ajax 发布的演示。它可以在 Chrome 和 Firefox 上运行，但不能在 IE10 上运行。这是我的演示：http: [//jsfiddle.net/44T5D/](http://jsfiddle.net/44T5D/)。请帮我解决这个问题。谢谢你的帮助。

编码：

```
$(function() {

    $('.document').on('click', '.ajax', function(e) {
        e.preventDefault();

        // ajax request
        $.ajax({
            async: true,
            cache: false,
            type: 'post',
            url: '/echo/html/',
            data: {
                html: '<p>This is echoed the response in HTML format</p>',
                delay: 1
            },
            dataType: 'html',
            beforeSend: function() {
                console.log('Fired prior to the request');
            },
            success: function(data) {
                console.log('Fired when the request is successfull');
                $('.document').append(data);
                alert(data);
            },
            complete: function() {
                console.log('Fired when the request is complete');
            }
        });

    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:45:52.853

`console`除非开发人员工具打开，否则Internet Explorer 将在各种功能上出错。当你有一个`beforeSend`处理程序时，很可能这就是它停止执行的地方。

要查看这是否确实是问题，请按 F12 打开开发人员工具并刷新页面，看看它是否有效。

如果您想保留这些`console`功能，作为一种解决方法，请查看控制台 polyfill（此处列出了一些）：[为什么 console.log() polyfills not use Function.apply()？](https://stackoverflow.com/questions/11584218/why-do-console-log-polyfills-not-use-function-apply)

# .htaccess - 用于 JS 缓存破坏的 RewriteRule

> ID：15607177
> 
> 赞同：2
> 
> 时间：2013-03-25T03:31:16.297
> 
> 标签：.htaccess, mod-rewrite

我在我的 JavaScript/CSS 上使用缓存清除查询字符串，只是想知道如何重写它，所以它是文件名的一部分？

我想重写： website.com/js/m/file.min.js?params 改为 website.com/js/m/file.min.params.js 。

```
 <IfModule mod_rewrite.c>

      # Domain Redirects

      RewriteEngine On
      RewriteBase /

      RewriteRule ^/js/m/([a-zA-Z.]+).min.[0-9]+.js$ /js/m/$1.min.js [L]

      RewriteCond %{REQUEST_FILENAME} -s [OR]
      RewriteCond %{REQUEST_FILENAME} -l [OR]
      RewriteCond %{REQUEST_FILENAME} -d
      RewriteRule ^.*$ - [NC,L]

      #If we're here, redirect through zend:
      RewriteRule ^.*$ index.php [NC,L]
    </IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:01:22.683

首先，您的这条规则是不正确的，并且不起作用：

```
RewriteRule ^/js/m/([a-zA-Z.]+).min.[0-9]+.js$ /js/m/$1.min.js [L] 
```

**原因：** RewriteRule 匹配没有前导斜杠的 URI。

现在你的任务：

> 我想重写： website.com/js/m/file.min.js?params 改为 website.com/js/m/file.min.params.js 。

可以通过这个规则处理：

```
# redirect from /js/m/file.min.js?params to /js/m/file.min.params.js
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+(js/m/.+?)\.js\?([^\s&]+) [NC]
RewriteRule ^ /%1.%2.js? [R=301,L]

# forward from /js/m/file.min.params.js to /js/m/file.min.js?params
RewriteRule ^(js/m/.+?\.min)\.([^.]+)\.js$ $1.js?$2 [L,QSA,NC] 
```

# python - 为什么python不释放内存？

> ID：15607179
> 
> 赞同：1
> 
> 时间：2013-03-25T03:31:37.480
> 
> 标签：python, memory

我创建了一个`fig_list`包含许多 matplotlib 图形对象的列表，然后我尝试通过以下代码释放内存：

```
>>> fig_list
[<matplotlib.figure.Figure object at 0x20AE7070>, <matplotlib.figure.Figure object at 0x21A61F30>, .....]
>>> del fig_list
>>> import gc
>>> gc.collect()
44918 
```

然后我检查了Windows任务管理器，发现内存使用量`python.exe`并没有减少。为什么？如何强制 python 释放内存？

（我在 Windows XP 上使用 python 2.6.1）

# api - 使用nodejs从API调用缓存数据的正确方法

> ID：15607180
> 
> 赞同：23
> 
> 时间：2013-03-25T03:31:51.590
> 
> 标签：api, node.js, caching, redis

我正在使用 node.js 编写一个 Web 服务，它为一些数据调用一个 API，但我受到 API 的限制，每个月只能调用多次，所以我希望缓存从 API 检索到的数据，以便我可以提供服务它与缓存的数据一起使用，并按时间间隔从 API 重新获取数据。

这是解决这个问题的好方法吗？我应该使用什么缓存框架？我查看了 node-redis，但我认为键值存储不适合数据。

谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-25T06:20:29.007

关于 Redis，我不同意你的看法。Redis 是一个非常强大的键值对存储，可以很容易地用于你想要的东西。它旨在将东西倾倒在其中并再次取出。在您的情况下，您可以通过将查询作为键将其保存到 Redis 中来轻松缓存 API 响应（如果这是您正在调用的 REST API，您可以只使用 URL 或序列化数据作为键）并简单地缓存作为字符串化 JSON 对象（或 XML 字符串，如果你碰巧得到它）的响应。

您还可以对缓存的数据设置过期时间，过期后会被清除。

然后，您可以将 API 调用包装在检查缓存的辅助函数中，如果存在则返回该值。如果不是，它会发出 API 请求，将其添加到缓存中，然后返回它。

这可能是最直接的解决方案，并且似乎很好地涵盖了您的用例。

# visual-c++ - 错误 LNK1169，求助！！我是初学者

> ID：15607181
> 
> 赞同：-1
> 
> 时间：2013-03-25T03:32:13.117
> 
> 标签：visual-c++, compiler-errors, linker-errors

我得到了一个代码来查找错误并修复它。但我不知道为什么我不能运行它。它一直说“致命错误 LNK1169：找到一个或多个多重定义的符号”

这是我必须修复的原始代码。

```
int value1, int value2, int value3 ;
FILE outptr;
outptr=fopen(“myfile.txt”, ‘w’);
if(outptr)
{
Printf(outptr, “ %f %f %f” , value1, value2, value3)
};
fclose(outptr);
else
{
fprintf(“The file myfile.txt is not available”);
} 
```

这就是我想出的

```
#include<stdio.h>

int main(void)
{

    int value1, value2, value3;
    FILE *outptr;
    outptr = fopen("myfile.txt", "w");

    if(outptr)

    {
    printf("please put in values for value1,value2,value3\n");
    scanf("%d%d%d",&value1, &value2, &value3);
    fprintf(outptr, "%d %d %d", value1, value2, value3);
    fclose(outptr);
    }

    else
    {
    printf("The file is not available");
    }

} 
```

但我不断收到错误 LNK1169。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:42:17.627

这听起来像是您的项目的问题，您有一个具有相同名称的重复函数（甚至可能是多个 main()s）。在编译你的编译器时发现一个重复的函数，因此抱怨你已经声明了两次。尝试删除此代码并将其放入单独的新项目中，您可能会发现它是孤立地通过的。

编辑：我刚刚发现这个[错误定义](http://msdn.microsoft.com/en-us/library/xttf5w7w%28v=vs.80%29.aspx)证实了我的怀疑。

# android - 包 R 不存在 Action Bar Sherlock

> ID：15607183
> 
> 赞同：0
> 
> 时间：2013-03-25T03:32:25.647
> 
> 标签：android, intellij-idea, actionbarsherlock, r.java-file

我正在尝试使用 IntelliJ 设置 Action Bar Sherlock。我将 android 模块创建为库，然后将其作为模块依赖项附加到目标项目中。当我构建时，我得到了错误

> java: 包 R 不存在

我得到了 100 个这样的错误。

当我查看其他一些帖子时，似乎使用 Eclipse 的人只是清理了项目。但是，我看不到在 IntelliJ 中清理项目的任何选项。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:07:36.963

您的 xml 文件可能有一些错误，请仔细检查它们，重建您的项目并重试。

之后，您可能需要检查您是否`R`在导入中包含该权利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:53:21.310

我认为在您的代码中存在以下问题：

1.  与手动检查无关的`com.actionbarsherlock`包并删除该包。
2.  在您的布局文件（XML）资源中不可用，如字符串、图像......等。
3.  您还没有在中添加 Jar 文件，`Java Build Path`您必须在`Java Build Path --> Order & export ---> Select all`.

    完成上述所有操作后，清理您的代码..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T04:03:50.143

也许尝试 File > Invalidate Caches 然后重新启动您的 IDE。

如此处建议：http: [//www.jetbrains.com/idea/webhelp/cleaning-system-cache.html](http://www.jetbrains.com/idea/webhelp/cleaning-system-cache.html)

# debugging - Chrome 对这个“GC 事件”做了什么？

> ID：15607184
> 
> 赞同：16
> 
> 时间：2013-03-25T03:32:32.203
> 
> 标签：debugging, google-chrome, pageload

我正在从一个非常简单的网站获得以下时间表。Chrome 告诉我它正在通过 GC 清理 10MB，但我不知道它是怎么回事！对此的任何见解将不胜感激。

![GC 事件](../Images/f0089296f4b7d530d91def0fd555bea1.png)

我认为 SO 会让你扩大图像，但我想不会 - 这是完整尺寸：http: [//i.imgur.com/FZJiGlH.png](https://i.imgur.com/FZJiGlH.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-13T19:52:48.217

这是一个我们可以查看的网站还是内部网站？我想看看。我在谷歌开发者页面上搜索时看到了下面的摘录，[内存分析 101](https://developers.google.com/chrome-developer-tools/docs/memory-analysis-101)：

> 对象大小
> 
> 内存可以通过两种方式被对象持有：直接由对象本身持有，以及隐含地持有对其他对象的引用，从而防止它们被垃圾收集器（简称 GC）自动释放。
> 
> 对象本身持有的内存大小称为浅大小。典型的 JavaScript 对象为它们的描述和存储立即值保留了一些内存。
> 
> 通常，只有数组和字符串可以具有显着的浅大小。但是，字符串通常主要存储在渲染器内存中，只在 JavaScript 堆上暴露一个小的包装对象。
> 
> 尽管如此，即使是一个小对象也可以通过防止其他对象被自动垃圾收集过程丢弃而间接持有大量内存。当对象本身被删除并且其依赖对象无法从 GC 根访问时，将被释放的内存大小称为保留大小。

最后一点似乎可能是您的问题。

### 调查内存问题

如果您愿意，您可能希望启用 chrome 的此功能`chrome --enable-memory-info`，并在幕后查看一下可能会挂起的 chrome。

在启用内存分析的情况下运行 Chrome 后，您将可以访问两个新属性：

```
window.performance.memory.totalJSHeapSize;  // currently used heap memory
window.performance.memory.usedJSHeapSize; // total heap memory 
```

[此处](http://buildnewgames.com/garbage-collector-friendly-code/)详细介绍了此功能。

# linux - 如何列出远程导出的 NFSv4 卷？

> ID：15607193
> 
> 赞同：6
> 
> 时间：2013-03-25T03:33:20.753
> 
> 标签：linux, mount, nfs

当我使用 NFSv3 时，我可以使用**showmount**命令列出卷：

> NAME showmount - 显示 NFS 服务器的安装信息
> 
> 概要 /usr/sbin/showmount [ -adehv ] [ --all ] [ --directories ] [ --exports ] [ --help ] [ --version ] [ host ]
> 
> 描述 showmount 查询远程主机上的挂载守护程序以获取有关该机器上 NFS 服务器状态的信息。如果没有选项，showmount 会列出从该主机挂载的客户端集。showmount 的输出被设计为看起来好像是通过''sort -u'' 处理的。

但是，似乎不会列出 NFSv4 卷。如何获取从远程主机导出的 NFSv4 卷列表？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T08:30:47.353

纯 NFSv4 不提供获取导出列表的方法。尽管如此，大多数 nfs 服务器都会同时使用 nfsv4 和 nfsv3 导出。这使得发现 v4 导出成为可能。一般来说，NFSv4 从导出列表中构建一个伪文件系统，并导出一个伪“/”。

# javascript - 寻找有关在 KineticJS 上使用组及其子级触发事件的详细信息

> ID：15607201
> 
> 赞同：-1
> 
> 时间：2013-03-25T03:34:46.353
> 
> 标签：javascript, events, triggers, kineticjs

我计划在我的应用程序中创建一些可以用作组的元素。例如，我可以创建一个圆形、一个三角形和一个正方形并将它们分组。所以我可以拖放组等。我有时也希望能够单独编辑组元素。

为此，我可以为组调用 setDraggable(false) 并为所有孩子调用 setDraggable(true) 并单独编辑它们。当我希望将它们视为一个组时，我可以为组形状调用 setDraggable(true)，为组的所有子代调用 setDraggable(false)。

我认为这部分运作良好。问题是事件处理。我试图搜索它，但我没有找到任何关于分组对象上的事件行为的内容。据我注意到，来自组子项的事件会覆盖来自组的事件调用。例如，如果组中的元素 E1 具有“onclick”事件，并且当我单击 E1 时组对象也具有“onclick”事件，则唯一将触发的事件是来自 E1 对象的事件。

所以.... TL;DR：有人能解释一下事件触发在 KineticJS 上是如何与组、子组和嵌套组一起工作的吗？

编辑：

*   http*//jsfiddle*net/Kaze_Senshi/GKFrK/ 我为测试 KineticJS 的组行为而制作的一个小项目。一开始有一组带有矩形，一组带有圆形，您可以加入组并从方形组中移动每个元素，分别单击屏幕左侧的按钮。这是一个非常简单的页面，带有丑陋的代码，仅用于测试目的。

*   [https://github.com/wfaria/sketchProject/blob/development/tests/interfaceResourceTest.html](https://github.com/wfaria/sketchProject/blob/development/tests/interfaceResourceTest.html) 最后我想用 KineticJS 从我的项目中操作组对象，因此我正在做这些问题，我认为你看这个单一的测试页面就可以理解它是如何工作的。您可以在 src/Model/InterfaceResource.js 中找到更多详细信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:38:21.723

如果您有一个组及其子项，并且想要打开和关闭事件，您可以这样做：

```
 group.setListening(false); // the group will not listen for events

 groupChild.setListening(true); // the child is listening for any defined events on the child. 
```

并且为了帮助您指出正确的方向，形状事件的触发优先于组事件，正如您所注意到的，如果两者都有 onclick，那么您必须添加一些逻辑，以便它们不会相互干扰。一种简单的方法是设置某些标志，这些标志根据某些条件关闭事件。

# javascript - Javascript：在承诺完成之前返回火灾

> ID：15607204
> 
> 赞同：0
> 
> 时间：2013-03-25T03:35:07.600
> 
> 标签：javascript, asynchronous, promise

```
function process(hugedirectory) {

        var title = hugedirectory.getTitleEachFile().then(function(caption){            
            console.log(caption);
            return caption;
        });

        return title;       
    } 
```

我有一个调用此方法的 AJAX 调用，但现在，它不会返回任何内容。

`console.log(caption)`显示正确和预期的值。但是，此方法结束时不会返回此值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T03:47:27.420

由于`process`使用异步函数调用，您无法从该方法返回值。

此类问题的解决方案是使用回调函数，如下所示

```
function process(hugedirectory, callback) {
    hugedirectory.getTitleEachFile().then(function(caption){            
        console.log(caption);
        callback(caption)
    });
}

process(hugedirectory, function(title){
    //Do something with title
}) 
```

`process`在这种情况下，我们传递了一个回调函数，而不是返回标题，`process`当异步调用完成时将调用该回调函数，并将结果`title`值传递给回调函数。

# java - 作废的目的是什么？

> ID：15607205
> 
> 赞同：3
> 
> 时间：2013-03-25T03:35:12.587
> 
> 标签：java

```
public class test
{
    public static void main(String[] args)
    {
        int x = 5;
        int y = 10;
        multiply(x,y);
    }
    public static void multiply(int x, int y)
    {
        int z = x*y;
        System.out.println(z);
    }
} 
```

我是编程新手，对一些事情感到困惑。

1.  为什么使用 void 是正确的？我认为使用 void 是为了指定不会返回任何内容，但是乘法方法返回 z。

2.  是否所有程序都要求您完全具有“public static void main(String[] args)”？main 方法的目的到底是什么，参数“String[] args”是什么意思？如果 main 方法被删除，程序会工作吗？

谢谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T03:37:52.063

首先，multiply 方法不返回任何内容；它打印产品，但不返回任何值。

```
public static void multiply(int x, int y)
    {
        int z = x*y;
        System.out.println(z); //may look like a return, but actually is a side-effect of the function.
    } //there is no return inside this block 
```

其次，`public static void main`为您的程序提供一个入口点。没有它，您将无法运行您的程序。有关. [_](http://docs.oracle.com/javase/tutorial/getStarted/application/) _`public static void main`

这里的`String[] args`意思是它捕获命令行参数并将其存储为字符串数组（请参阅上面发布的同一链接，在同一部分中）。这个数组`args`在你的`main`方法中被调用（或者你叫它的任何其他东西。Oracle 引用`argv`作为备用名称）

`System.out.print`告诉程序打印一些东西到控制台，while`return`是方法的结果。例如，如果您在`print`整个方法中添加了调试（一种常见做法），您会在程序运行时打印内容，但这不会影响程序返回的内容或程序的结果。

想象一个数学问题——你将你的工作“打印”到纸上的每一步，但结果——“答案”——是你最终返回的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T03:44:38.333

1.  当一个方法没有返回任何东西时，你将它的返回类型指定为“void”。您的乘法方法没有返回任何内容。它的最后一行是一个打印语句，它只是在标准输出上打印其参数的值。如果该方法以“return z”行结束，那么您将无法编译具有“void”返回类型的程序。您需要将方法签名更改为 public static int multiply(int x, int y)。

2.  所有 Java 程序都需要 public static void main(String[] args) 如果它们是可执行的。它是任何可运行 Java 程序的起点。这就是它的意思：

一个。public - 可以从任何类调用 main 方法。main 应该始终是公共的，因为它是操作系统调用的方法。

湾。static - main 方法应该是静态的，这意味着操作系统不需要形成它所属类的对象。它可以在不创建对象的情况下调用它。

C。void - main 方法不返回任何东西（尽管它可能会抛出一个被操作系统捕获的异常）

d。String[] args - 当你运行程序时，你可以从命令行传递参数。例如，如果您的程序名为 Run，您可以执行命令 java Run 3 4。在这种情况下，参数将以字符串数组的形式传递给程序 Run。您将在 args[0] 中有“3”，在 args[1] 中有“4”。

也就是说，你可以有一个没有 main 的 Java 程序，它不能运行。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T05:17:09.400

就像其他人说的那样，乘法方法不返回任何东西。其他答案解释了为什么会这样。

但是，提及当您使用 void 时，该方法不能返回任何内容也会有所帮助。相反，如果您将方法设置为返回任何内容（而不是 void），则需要返回该类型的值。

例如：

```
public static void main(String[] args){

    int a;
    a = returnInt();

}//End Method

public static int returnInt(){

    int z = 5;
    return z;

}//End Method 
```

main 方法不返回任何内容，这就是我们使用 void 的原因。returnInt 方法返回一个整数。该方法返回的整数是 z。在 main 方法中 a = returnInt(); 将 a 的值设置为从 returnInt() 返回的值，在这种情况下，a 将等于 5。

试图保持简单，希望它有意义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T03:40:03.840

> 为什么使用 void 是正确的？我认为使用 void 是为了指定不会返回任何内容，但是乘法方法返回 z。

# 不

`multiply`方法不返回`z`。但是，你是`void`对的，实际上是用来指定什么都不返回。

> 是否所有程序都要求您完全具有“public static void main(String[] args)”？main 方法的目的到底是什么，参数“String[] args”是什么意思？如果 main 方法被删除，程序会工作吗？

是的，所有程序都必须有一个`main`看起来像`public static void main(String[] args)`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T04:02:15.023

void 类是一个不可实例化的类，它包含对表示基本 Java 类型 void 的 Class 对象的引用。Main 方法是开始执行任何 java 程序的方法。主方法声明如下所示

公共静态无效主要（字符串参数[]）{}

该方法是公共的，因为 JVM 可以访问它来开始执行程序。

它是静态的，因为它可以在没有对象实例的情况下执行。你可能知道你需要一个对象实例来调用任何方法。因此，如果 main 方法不是静态的，则无法在没有对象的情况下开始执行类。

它只返回一个 void，因为一旦主方法执行结束，程序就会终止。所以不能有Main方法可以返回的数据

最后一个参数是 String args[]。这用于表示用户可以选择在命令行中向 java 程序输入参数。我们可以同时使用 String[] args 或 String args[]。Java 编译器将接受这两种形式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T03:39:59.353

`public`表示该方法是可见的，并且可以从其他类型的其他对象中调用。其他替代方案是私有的、受保护的、包的和包私有的。有关更多详细信息，请参见此处。

`static`意味着该方法与类相关联，而不是与该类的特定实例（对象）相关联。这意味着您可以在不创建类的对象的情况下调用静态方法。

`void`表示该方法没有返回值。如果该方法返回 an`int`你会写 int 而不是`void`.

这三者的组合最常见于`main`大多数教程将包含的方法。

归功于马克·拜尔斯

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-25T03:44:21.727

您示例中的`multiply()`方法不会将值返回`z`给调用方法，而是*输出*值`z`（例如，将其打印到屏幕上）。

如您所说，`void`type 关键字意味着该方法不会返回值。像这样的方法旨在“只是做某事”。在 的情况下`main()`，该方法将不会返回值，因为没有调用方法可以将其返回到 - 这就是您的程序开始的地方。

*好的，从技术上讲，最后的评论是不准确的；实际上可以让你的 main 向启动程序的操作系统或进程返回一个值，但并不总是需要这样做——尤其是对于更简单的基于控制台的程序，比如你将在你编写时编写的那些程序。刚刚开始！*:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-25T18:06:43.930

> 为什么使用 void 是正确的？我认为使用 void 是为了指定不会返回任何内容，但是乘法方法返回 z。

您的`multiply`方法是正确的，`void`因为它什么都不返回，它只是打印到控制台。
返回某些东西意味着将结果提供给程序以供进一步计算。

例如，您返回结果的方法如下所示：

```
public static int multiply(int x, int y)
{
    int z = x*y;            //multipling x and y
    System.out.println(z);  //printing the restult to the console
    return z;               //returning the result to the programm
} 
```

这种“新”方法可以像这样使用，例如：

```
public static void main(String[] args)
{
    int x = 5;
    int y = 10;
    int result = multiply(x,y);  //storing the returnen value of multiply in result 
    int a = result + 2;          //adding 2 to the result and storing it in a
    System.out.println(a);       //printing a to the console
} 
```

输出：
50
52

> 是否所有程序都要求您完全具有“public static void main(String[] args)”？main 方法的目的到底是什么，参数“String[] args”是什么意思？如果 main 方法被删除，程序会工作吗？

此方法为您的程序设置了一个起点。这意味着执行程序的第一件事就是这个方法，删除它会使程序无法运行。
`String[] args`代表您可以在从操作系统启动之前给您的程序的命令行参数（例如，OS = Windows）所有单词的确切用途在此处的其他答案中得到了很好的解释。

# robot - 在 Lego NXT 上打开电机返回错误 0002EA 类型 2

> ID：15607206
> 
> 赞同：0
> 
> 时间：2013-03-25T03:35:15.020
> 
> 标签：robot, lego

我正在为 Lego NXT 编写一个使用**RobotC**的程序来模仿小狗的行为。这段代码应该是旋转连接到电机端口 3 的磁头并读取超声波传感器上的值。如果在转动头部的同时，狗被召唤，它会转向它已经面对的方向。当超声波传感器读取到一个值（意味着机器人已经接近墙壁）时，会调用以下函数：

可见的

```
void SonarSensor()
{

int sensorValleft;

int sensorValright;
bool alreadyTurned = false;

int i,j;
i = 0;
j = 0;

motor[1] = 0;
motor[2] = 0;

motor[3] = -SPEED/2;
wait10Msec(15);
motor[3] = 0;
sensorValleft = SensorValue[3];

while(i<100)
{
    if(SensorValue[4] > 40)//calibrate sound sensor
    {
        //turn left
        motor[1]=SPEED;
        motor[2] = -SPEED;
        wait10Msec(25);
        i = 1000;
        j = 1000;
        alreadyTurned = true;
    }
    else
    {
        i++;
        wait1Msec(5);

    }
}
motor[3] = SPEED/2;
wait10Msec(30);
motor[3] = 0;
sensorValright = SensorValue[3];

while(j<100)
{
    if(SensorValue[3] > 1)//calibrate sound sensor
    {
        //turn right
        motor[1]-=SPEED;
        motor[2] = SPEED;
        wait10Msec(25);
        j = 1000;
        alreadyTurned = true;
    }
    else
    {
        j++;
        wait1Msec(5);

    }
}
if(alreadyTurned == false)
{
    if(sensorValleft > sensorValright)
    {
        //turn left
        motor[1]=SPEED;
        motor[2] = -SPEED;
        wait10Msec(25);
    }
    else
    {
        //turn right
        motor[1]=-SPEED;
        motor[2] = SPEED;
        wait10Msec(25);
    }
} 
```

}可见的

当磁头（电机[3]）第一次旋转时，错误 0002EA Type2 出现在 NXT 屏幕上。起初我们认为这是因为我们过度旋转电机导致它被阻塞，所以我们试图玩弄等待时间，但没有任何区别。

任何有关导致此错误的原因或如何解决此错误的想法将不胜感激。

谢谢， 多米尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-23T19:59:22.613

关于为什么只有 motor[3] 会导致错误的答案实际上非常简单。motorA、motorB 和 motorC 值在枚举中定义，其中 motorA=0、motorB=1 和 motorC=2。因此，motor[1] 和 motor[2] 等价于调用 motor[motorB] 和 motor[motorC]。然而，motor[3] 并不等同于任何东西。它试图设置一个不存在的电机的功率。但是，motor[0] 可以，并且对应于 motor[motorA]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:00:18.847

在调试时，我开始设置断点以查看错误在哪里，并且它总是发生在行上`motor[3] = -SPEED/2;`，事实证明对于第三个电机，正确的语法是使用`motor[motorA]=-SPEED/2;`. 我不确定为什么只有这个电机会返回此错误，因为我正在使用另外两个电机，我使用这些电机设置了新速度

```
motor[1]=SPEED;
motor[2]=SPEED; 
```

但是，这是消除错误的方法。

# ios - UITabbar项目objective-c中的颜色图标

> ID：15607210
> 
> 赞同：1
> 
> 时间：2013-03-25T03:35:52.883
> 
> 标签：ios, objective-c, uitabbarcontroller, uicolor, uitabbaritem

我有一个带有 3 个项目的 UITabbar 控制器，我想要颜色图标而不是基于 Gary 图标，

请你给我一些提示，我怎样才能在 tababr 中有颜色图标，

这是我的代码：

```
self.title = @"test";

   self.tabBarItem = [[UITabBarItem alloc] initWithTitle:self.title image:[UIImage 
 imageNamed:@"test"] tag:0]; 
```

通常 test 是一个带有彩色图片的图标，但在 UITabbar 中它只是 Gary，

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T19:27:39.270

使用此代码：

```
[self.tabBarItem setFinishedSelectedImage:[UIImage imageNamed:@"test"] 
withFinishedUnselectedImage:[UIImage imageNamed:@"test"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:02:47.517

您将需要构建自己的 TabBarController。根据 Apple 文档关于“此类 [UITabBarController] 不适用于子类化”的问题。UITabBarItem 上的文档说，当您为标签栏提供图像时，“标签栏上显示的图像来自此图像”。因此，您提供给标签栏的任何图像都会被处理以使其符合标签栏图像的“正常”外观。

因此，您可以使用一些 UIButtons 作为子视图构建一个 UIViewController，然后以这种方式管理整个外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T04:07:09.130

您必须为所有 3 个选项卡创建 2 个图像，其中一个未选中，第二个已选中。

之后在您的 appdelegate.m 文件中写入以下代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
       self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
       // Override point for customization after application launch.
       self.searchArray = [[NSMutableArray alloc]init];
       self.tabBarController = [[[UITabBarController alloc] init] autorelease];

       viewController1 *view1 = [[[viewController1 alloc] initWithNibName:@"viewController1" bundle:nil] autorelease];
       view1.tabBarItem.image = [UIImage imageNamed:@"tab-selected-1"];
       view1.tabBarItem.title = @"Title1";           

       viewController2 *view2 = [[[viewController2 alloc] initWithNibName:@"viewController2" bundle:nil] autorelease];
       view2.tabBarItem.image = [UIImage imageNamed:@"tab-selected-2"];
       view2.tabBarItem.title = @"Title2";

       viewController3 *view3 = [[[viewController3 alloc] initWithNibName:@"viewController3" bundle:nil] autorelease];
       view3.tabBarItem.image = [UIImage imageNamed:@"tab-selected-3"];
       view3.tabBarItem.title = @"Title3";

       self.tabBarController.viewControllers = [NSArray arrayWithObjects:view1, view2, view3, nil];

       UITabBarItem *tabBarItem1 = [[self.tabBarController.tabBar items] objectAtIndex:0];
       [tabBarItem1 setFinishedSelectedImage:[UIImage imageNamed:@"tab-selected-1.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"tab-unselected-1.png"]];

       UITabBarItem *tabBarItem2 = [[self.tabBarController.tabBar items] objectAtIndex:1];
       [tabBarItem2 setFinishedSelectedImage:[UIImage imageNamed:@"tab-selected-2.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"tab-unselected-2.png"]];

       UITabBarItem *tabBarItem3 = [[self.tabBarController.tabBar items] objectAtIndex:2];
       [tabBarItem3 setFinishedSelectedImage:[UIImage imageNamed:@"tab-selected-3.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"tab-unselected-3.png"]];

       return YES;
} 
```

试试这个，你的问题就解决了。祝你好运

# haskell - 在 Haskell 中，加载失败并显示错误消息“找不到模块‘IO’”

> ID：15607211
> 
> 赞同：2
> 
> 时间：2013-03-25T03:35:57.667
> 
> 标签：haskell

我使用 WinGHCi，我的代码（非常简单）如下：

```
module Main 
    where

import IO

main = do
  hSetBuffering stdin LineBuffering
  putStrLn "Enter your name: "
  name <- getLine
  putStrLn("Hello, " ++ name ++ ", how are you?"); 
```

错误信息：

```
2.hs:4:8:
    Could not find module `IO'
    It is a member of the hidden package `haskell98-2.0.0.1'.
    Use -v to see a list of the files searched for.
Failed, modules loaded: none. 
```

（这些代码在 WinHugs 中运行正确，但我只想编译它）

也许这个问题真的很琐碎，但我自己在研究Haskell，没有人可以咨询。我尝试在谷歌中搜索，不幸的是找不到任何有意义的东西。

我被卡住了......提前谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T03:48:34.510

您要导入`System.IO`.

# c# - 本地计算机上的服务已启动然后停止错误

> ID：15607212
> 
> 赞同：1
> 
> 时间：2013-03-25T03:36:14.200
> 
> 标签：c#, logging, windows-services, event-log, custom-eventlog

我有一个 Windows 服务。在我为其添加代码以开始记录之前，它工作正常。现在，当我尝试启动服务时，我收到以下错误：

> 本地计算机上的 GBBService 服务启动然后停止。一些服务如果没有工作会自动停止，例如性能日志和警报服务

这是我的服务的代码： - 从项目安装程序内部

```
public partial class ProjectInstaller : System.Configuration.Install.Installer
{
    string eventSource = "GBBServiceLog";

    public ProjectInstaller()
    {
        InitializeComponent();
        EventLogInstaller installer = FindInstaller(this.Installers);
        if (installer != null)
        {
            installer.Source = eventSource;
            installer.Log = "My GBBServiceLog";
        }
    }

    private EventLogInstaller FindInstaller(InstallerCollection installers)
    {
        foreach (Installer installer in installers)
        {
            if (installer is EventLogInstaller)
            {
                return (EventLogInstaller)installer;
            }
            EventLogInstaller eventLogInstaller = FindInstaller(installer.Installers);
            if (eventLogInstaller != null)
                return eventLogInstaller;
        }
        return null;
    }

    protected override void OnCommitted(IDictionary savedState)
    {
        base.OnCommitted(savedState);
        // Start the service after installation
        using (ServiceController sc = new ServiceController(this.serviceInstaller1.ServiceName))
        {
            sc.Start();
        }
    }
} 
```

在我的服务范围内：

```
public GBBService()
    {
        InitializeComponent();
        EventLog.Source = eventSource;
        EventLog.Log = "My GBB Service Log";

    }

    protected override void OnStart(string[] args)
    {
        EventLog.WriteEntry("GBBService Service Started");
    } 
```

我的代码做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:49:56.317

我认为问题在于您正在尝试写入`EventLog`不存在的内容。

在`ServiceInstaller`您创建`EventLog` `My GBBServiceLog`

```
if (installer != null)
{
    installer.Source = eventSource;
    installer.Log = "My GBBServiceLog";
} 
```

但是在`Service`你尝试写给`My GBB Service Log`

```
public GBBService()
{
    InitializeComponent();
    EventLog.Source = eventSource;
    EventLog.Log = "My GBB Service Log"; <--------------
} 
```

我认为应该是：

```
public GBBService()
{
    InitializeComponent();
    EventLog.Source = eventSource;
    EventLog.Log = "My GBBServiceLog";
} 
```

# java - 如何确定顶部是哪个矩形？

> ID：15607213
> 
> 赞同：0
> 
> 时间：2013-03-25T03:36:18.153
> 
> 标签：java, swing, overlap, rectangles

我目前有一个绘制重叠矩形的程序，并且想知道是否有一种简单的方法可以确定哪个形状在顶部（最明显）。这让我很困惑，因为在处理 3D 时没有 z 轴可以使用。

![重叠的矩形](../Images/4642d164e0ef4e915f4259b5d59c01eb.png)

我尝试遍历矩形并使用 .contains 方法，但它返回特定点下的所有矩形，而不是最高级别的矩形。

我也搜索过，但也许我使用了错误的关键字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T03:44:48.880

通常，当人们绘制代码时，他们会执行以下操作：

列出矩形 = ....

```
for (int i = 0; i < rectangles.size(); i++)
    //paint the rectangle 
```

因此，如果您想搜索一个 Point 以确定它在哪个 Rectanle 中，那么您应该使用：

```
for (int i = rectangles.size() - 1; i >= 0; i--)
{

    if (rectangles.get(i).contains(yourPoint))
    {
         // do something
         break;
    }
} 
```

从最后开始将为您提供最后绘制的矩形，这意味着它位于所有其他矩形之上。

# jquery - 在标签元素中添加文本框 (JQuery Mobile) - 样式问题

> ID：15607214
> 
> 赞同：0
> 
> 时间：2013-03-25T03:36:22.590
> 
> 标签：jquery, css, jquery-mobile

我想在 JQuery mobile 中的单选按钮标签中有一个文本框，但是它似乎将文本框的父 div 设置为 2px 高度。

```
<fieldset data-role="controlgroup">
    <input type="radio" name="radio-choice" id="radio-choice-1" value="yes" checked="checked" />
    <label for="radio-choice-1">
        Yes <input type="password" placeholder="Password"/>
    </label>
    <input type="radio" name="radio-choice" id="radio-choice-2" value="choice-2"  />

    <label for="radio-choice-2" >No</label>
</fieldset> 
```

希望你能看到我正在努力实现的目标。也许有更好的方法来做到这一点，而不是添加一个 css 解决方法。我已将问题示例添加到[http://jsfiddle.net/yDhP3/](http://jsfiddle.net/yDhP3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:45:47.103

看看能不能满足你的需求！！！

[http://jsfiddle.net/pramodsankar007/55jZM/](http://jsfiddle.net/pramodsankar007/55jZM/)

```
<div id="yourCredentials" data-role="page" class="ui-page ui-body-c ui-page-active">
    <div data-role="header" data-theme="b">
         <h1>Login/Register</h1>

    </div>
    <div data-role="content">
         <h3>Your credentials</h3>

        <input type="text" id="email" value="" data-mini="true" placeholder="Email address" class="">
         <h3>Are you a returning user?</h3>

        <fieldset data-role="controlgroup">
            <input type="radio" name="radio-choice" id="radio-choice-1" value="yes" checked="checked" />
            <label for="radio-choice-1">Yes
                <input type="password" placeholder="Password" class="pwdInner" />
            </label>
            <input type="radio" name="radio-choice" id="radio-choice-2" value="choice-2" />
            <label for="radio-choice-2">No</label>
        </fieldset>
        <button>Login/Register</button>
    </div>
</div>

$('#radio-choice-1').click(function()
                           {
                               $('input.pwdInner').show();
                           });
$('#radio-choice-2').click(function()
                           {
                               $('input.pwdInner').hide();
                           });

input.pwdInner
{
    position:relative !important;

} 
```

# excel - 重新计算自定义 VBA 函数，仅应请求

> ID：15607222
> 
> 赞同：1
> 
> 时间：2013-03-25T03:37:08.703
> 
> 标签：excel, vba, oledb, user-defined-functions, commandbutton

**我的问题是这样的：**

我想使用自定义功能区命令按钮甚至电子表格中的简单命令按钮来初始化 OLEDB 数据库连接并更新/重新计算所有需要此类连接的相关用户定义函数，或我指定的那些。除了单击特定按钮时，我不希望重新计算这些函数中的任何一个。我很难弄清楚如何做到这一点。请提供您的帮助或建议。

**有关我所做的详细信息，请参见下文：**

我目前将数据存储在一个访问数据库中，我在 excel 中使用 vba 进行特定查询。我已将每个 datarequest 例程嵌入到名为 [fnc] 的模块下的一组函数中。然后，我从 Excel 电子表格中将它们作为用户定义的函数进行访问。这里给出一个例子：

```
 Function ValueV(mm As String, yy As String, qtable As String, qcode As String, compare_period As Integer, average_period As Integer, weight As Boolean) As Variant
 'Month Value Formula for Horizontal Data
 'mm - month value 2-digit
 'yy - year value 4-digit
 'qtable - query table name eg. "cpia"
 'qcode - query code for variable eg. "all0100"
 'avgperiod - lag periods to average in calculation eg. 3-avgperiods for quarterly measure, 1-avgperiod for point measure.
 'weight - boolean (true or false) value for weighting values given reference weight. Currently unsupported. Code should be extended to include this feature. (space holder for now)
  Dim lag_value As Variant
  Dim cur_value As Variant
  lag_value = 0
  cur_value = 0

     'STEP-A: Gets the initial Value average or not.
     '===============================================================
     If compare_period > 0 Then
     'Use this step to pickup initial value when compare_period <> 0 which requires a % change as opposed to a point value.
     'Average_period must be greater than or equal to one (1). One (1) represents the current month which is the same as a point value.
         lmm = fnc.lagdate(mm, yy, compare_period, "mm")                          'lag month (a single month for mValueH)
         lyy = fnc.lagdate(mm, yy, compare_period, "yy")                          'lag year (a single month for mValueH)
         smm = fnc.lagdate(mm, yy, compare_period + average_period - 1, "mm")     'dating backwards to account for average period
         syy = fnc.lagdate(mm, yy, compare_period + average_period - 1, "yy")     'dating backwards to account for average period
         'note, for smm & syy, the average period includes the lmm so we add back one (1)
         'eg. 3-mth average is not 3-lags but current and 2-lags.
         sdate1 = syy & fnc.numtext(smm)
         'start date for query (begining of lag value including average period)

         Set MyRecordset = New ADODB.Recordset
         MySql = sql.sqlVSers(lmm, lyy, qtable, qcode, sdate1)
         'MsgBox (MySql)
         MyRecordset.Open MySql, MyConnect, adOpenStatic, adLockReadOnly

         Do Until MyRecordset.EOF     'Loop to end and enter required values
         lag_value = lag_value + MyRecordset(qcode)
         MyRecordset.MoveNext
         Loop
         'Stop
         lag_value = lag_value / average_period
         MyRecordset.Close
     End If

     'STEP-B: Gets the current Value average or not.
     '===============================================================
         smm = fnc.lagdate(mm, yy, average_period - 1, "mm")           'dating backwards to account for average period
         syy = fnc.lagdate(mm, yy, average_period - 1, "yy")           'dating backwards to account for average period
         sdate1 = syy & fnc.numtext(smm)
         'start date for query (begining of lag value including average period)

         Set MyRecordset = New ADODB.Recordset
         MySql = sql.sqlVSers(mm, yy, qtable, qcode, sdate1)
         MyRecordset.Open MySql, MyConnect, adOpenStatic, adLockReadOnly

         Do Until MyRecordset.EOF     'Loop to end and enter required values
         cur_value = cur_value + MyRecordset(qcode)
         MyRecordset.MoveNext
         Loop

         cur_value = cur_value / average_period
         MyRecordset.Close

     'STEP-C: Calculates the Requested % Change or Point Value.
     '===============================================================
     If compare_period = 0 Then
         ValueV = cur_value
     Else
         ValueV = cur_value / lag_value * 100 - 100
     End If

 End Function 
```

由于我完全绕过了子例程的使用，因此与数据库的连接当前是作为工作簿助手例程完成的，如下所示。

```
Private Sub Workbook_AfterSave(ByVal Success As Boolean)
Dim filePath
filePath = ThisWorkbook.Path
If Right$(filePath, 1) <> "\" Then filePath = filePath & "\"
MyConnect = "Provider=Microsoft.ACE.OLEDB.12.0;" & _
"Data Source=" & filePath & "rsdata.accdb;"
End Sub 
```

问题是，这种更新过程不太理想。理想情况下，我想在菜单栏中放置一个自定义按钮（单击它时）将连接到数据库并重新计算给定工作表或工作簿中使用的所有用户定义函数。

请提供您的建议或指出以前可能做过类似事情的地方。

提前致谢。JR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:53:04.447

您正在尝试将`UDF`'s 用于他们不打算做的事情。它们*的*设计目的是像其他单元格公式一样表现，并在 Excel 决定它们需要时进行计算。

你有两个选择

*   重新设计您的应用程序以不使用`UDF`'s（IMO 最好的方法）
*   修改您`UDF`的 s 以仅响应您指定的触发器，例如单击按钮（IMO 是一个杂物，通常是个坏主意）

如何重新设计以避免`UDF`' 取决于您的 OP 中未披露的因素

# nserror - 如何 NSException 获得本地化的 NSLocalizedDescription

> ID：15607223
> 
> 赞同：1
> 
> 时间：2013-03-25T03:37:09.267
> 
> 标签：nserror, nsexception

我有一个例外

错误域=NSURLErrorDomain 代码=-1001 “请求超时。” UserInfo=0x1fd68a20 {NSErrorFailingURLStringKey= [http://mac-mini.local/~user/restcon/auth?username=&password=](http://mac-mini.local/~user/restcon/auth?username=&password=) , NSErrorFailingURLKey= [http://mac-mini.local/~user/restcon/auth?username=&password =](http://mac-mini.local/~user/restcon/auth?username=&password=) , NSLocalizedDescription=请求超时., NSUnderlyingError=0x1fd25730 "请求超时."}

如何获得 NSLocalizedDescription？

如果我在调试器中'po 0x1fd68a20'，我可以获得我想要的 NSDictionary。但是 [exception userInfo] 返回我为零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-21T07:04:45.513

假设您的异常位于 NSException 类型的对象中，请尝试

```
NSString *errorDescription = [exception.error.userInfo valueForKey:NSLocalizedDescriptionKey]. 
```

# amazon-ec2 - 刀 ec2 创建服务器日志记录

> ID：15607225
> 
> 赞同：0
> 
> 时间：2013-03-25T03:37:16.643
> 
> 标签：amazon-ec2, chef-infra, knife

我正在使用带有运行列表的刀 ec2 创建服务器来创建服务器并引导它以供初始使用。

在我的引导过程中，我使用这里的文档运行了一个 bash 命令。此基本脚本中有回声以报告状态，这对于跟踪进度非常有用。

我看到输出的唯一时间是出现故障时。

有没有办法打开输出和/或将输出写入文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:07:11.913

您实际上可以使用 STDOUT 将任何命令的输出写入文件。这是如何做到的。

```
your_command > file_name.log 2>&1 
```

而已。试试看，有问题告诉我

# vba - 标签（预）与标签碰撞

> ID：15607226
> 
> 赞同：1
> 
> 时间：2013-03-25T03:37:16.733
> 
> 标签：vba, label, collision-detection, point

我正在做一些游戏，并且我在碰撞测试中遇到了问题。我要做的是检查坐标是否为空，以便玩家可以移动。这是我到目前为止所拥有的，但它不起作用......

```
Function ColissionWithPoint(ByVal Lbl1 As Label, ByVal Lbl2 As Label) As Boolean
    Dim pUp As New Point(Lbl1.Location.X - 1)
    Dim pDown As New Point(Lbl1.Location.X + Lbl1.Height + 1)
    Dim pLeft As New Point(Lbl1.Location.Y - 1)
    Dim pRight As New Point(Lbl1.Location.Y + Lbl1.Width + 1)
    If pDown.Equals(Lbl2.Bounds) Or pUp.Equals(Lbl2.Bounds) Or pLeft.Equals(Lbl2.Bounds) Or pRight.Equals(Lbl2.Bounds) Then
        Return True
    Else
        Return False
    End If
End Function 
```

# c - C语言，如何将文件中的值放入二维数组

> ID：15607229
> 
> 赞同：0
> 
> 时间：2013-03-25T03:37:55.033
> 
> 标签：c, arrays, file, multidimensional-array

我有一个包含随机字符的文件，基本上是单词搜索格式。我希望能够将其中的所有字符放入一个二维拼图数组中，这样我就可以输入类似 printf("the value is %c",puzzle[2][2]); 它将打印第 3 行和第 3 列中的值（因为它从 0 开始......）这是我到目前为止的代码。

```
#define MAXROWS     60
#define MAXCOLS     60
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>

main() {
    char TableFileName[100];
    char PuzzleFileName[100];
    char puzzle[MAXROWS][MAXCOLS];
    char line[MAXCOLS];
    FILE *TableFilePtr;
    int cols = 0;
    int rows = 0;
    printf("Please enter the table file name: ");
    scanf("%s",TableFileName);

    /* ... */

    TableFilePtr = fopen(TableFileName, "r");

    while (fgets(line, sizeof line, TableFilePtr) != NULL && rows < MAXROWS) {
        for (cols; cols<(strlen(line)-1) && cols < MAXCOLS; ++cols) {
            puzzle[rows][cols] = line[cols];
        }
        ++rows;
    }
    printf("%c",puzzle[2][2]);
} 
```

程序运行后，拼图[x][y] 不包含任何值。有任何想法吗？

update1: 将 cols 更改为 for cols=0 update2: added printf("\n行在 %d, cols 在 %d, puzzle[%d,%d]=%c line[cols]=%c",rows ,cols,rows,cols,puzzle[rows,cols],line[cols]); 到 for 循环 update3：在更新 2 之后，我看到 line[cols] 字符正在获取拼图中的每个字符，但不是正确的顺序。此外，线 [cols] 未正确放入拼图 [rows] [cols] 中。这是我看到的一些东西（不知道为什么它让我把它当作代码，但无论如何）：

```
the rows are at 0, cols at 0, puzzle[0,0]=l line[cols]=A
the rows are at 0, cols at 1, puzzle[0,1]=▒ line[cols]=
the rows are at 0, cols at 2, puzzle[0,2]=▒ line[cols]=B
the rows are at 0, cols at 3, puzzle[0,3]=  line[cols]=
the rows are at 0, cols at 4, puzzle[0,4]=\ line[cols]=D
the rows are at 0, cols at 5, puzzle[0,5]=▒ line[cols]=
the rows are at 0, cols at 6, puzzle[0,6]=▒ line[cols]=E
the rows are at 0, cols at 7, puzzle[0,7]= line[cols]=
the rows are at 0, cols at 8, puzzle[0,8]=L line[cols]=Q
the rows are at 0, cols at 9, puzzle[0,9]=▒ line[cols]=
the rows are at 0, cols at 10, puzzle[0,10]=▒ line[cols]=T 
```

A,B,D,E,A,T 是正确的，但是... A 应该是拼图 [0,0]，B 应该是 [0,1] D 应该是 [0,2] 等等...

这是输入的采样器...（将在 txt 文件中）

```
K N R D J P L H X E K B W M X A M U Y A L E F Q N D L D  
B D B S W W M T F B K Z D G A L V L K U N U R C R I E I  
H N L A N D N T O V P O G R U U Y X E D L Y R M Q D T T  
Y C G Y E M A S I E X P V Z N W H X B D G G R T K V C W  
M Y C X A M I E U T Z J U O C N F F L R E F B T D R Y W  
R K V A C B H G L C F D Y X R Z Q E R E H N Q D S J H T  
R G E N Y Y K F J V G S C G D H O G K A F E M I S S Q P 
S J Z A B V A A P E E P R K F T A H W C G B J N N L W B 
F V F Z Y T V Y E O C Y A D L Q Q P P F V W K M E U V O 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:12:45.000

当我运行您的代码时，我会从拼图数组中的文本文件中获取实际值。我认为你只是错误地把这些价值观放在哪里。我不能确定你在做什么，因为你没有包含你正在解析的例子，但我肯定会在我的拼图数组中得到值。

如果我的文件看起来像这样：1 2 3 4 5 6 7 8 9 10 那么puzzle[0] 的前三个元素是“1”、“”、“2”，而puzzle 的所有其他元素都是空的。

玩了一会儿后，我意识到似乎是什么问题。您已经在顶部声明了 cols，并且它在循环内被重用。因此，当行增加时，您不会重置 cols。添加 cols = 0; 在 rows++ 之后，数组似乎按照您需要的方式运行。

编辑：主要是风格的东西。

一方面，您在 while 循环中使用了 for 循环，这对我来说迭代多维数组似乎很奇怪。不要误会我的意思——它们基本上是一样的。但是为了可读性，当你对行和列执行类似的操作时，我通常更有意义地执行 while(while) 或 for(for)。

此外，不要在 while 循环结束时重置 cols 和递增行，而是尝试将其更改为 for 循环。如果您在 for 循环的声明中声明增量器，您将不必担心犯这些错误，并且它变得更具 IMO 可读性。

另外，现在的最后一个注意事项 - 也许您没有意识到的是您必须非常小心地在 char 数组上使用 sizeof。我不会使用 sizeof 作为 fgets 的 maxint，因为 sizeof 在 char 数组中包含空终止符（请参阅这篇文章[C++: size of a char array using sizeof](https://stackoverflow.com/questions/10735990/c-size-of-a-char-array-using-sizeof)）

我不是交流专家，所以这里可能还有很多话要说（有很多方法可以从文件中获取行，我不认为 fgets 是推荐的路线）但这就是我能想到的全部现在，它希望至少可以帮助您使其正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:32:45.613

测试.c

```
#define MAXROWS     60
#define MAXCOLS     60
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>

main()
{
char TableFileName[100];
char PuzzleFileName[100];
char puzzle[MAXROWS][MAXCOLS];
char line[MAXCOLS];
FILE *TableFilePtr;
int cols;
int rows;
cols=0;
rows=0;
printf("Please enter the table file name: ");
scanf("%s",TableFileName);

TableFilePtr = fopen(TableFileName, "r");

while (fgets(line, sizeof line, TableFilePtr) != NULL && rows < MAXROWS) {
    char *p=line;
    for(cols=0;NULL != (p=strtok(p, " \n")) && cols < MAXCOLS; ++cols){
        puzzle[rows][cols]=*p;
        p=NULL;
    }
    ++rows;
}
{   //check puzzle[][] print out
    int r, c;
    for(r=0;r<rows;r++){
        for(c=0;c<cols;c++){
            printf("%c", puzzle[r][c]);
        }
        printf("\n");
    }
}
printf("%c",puzzle[2][2]);
} 
```

数据.txt

```
K N R D J P L H X E K B W M X A M U Y A L E F Q N D L D  
B D B S W W M T F B K Z D G A L V L K U N U R C R I E I  
H N L A N D N T O V P O G R U U Y X E D L Y R M Q D T T  
Y C G Y E M A S I E X P V Z N W H X B D G G R T K V C W  
M Y C X A M I E U T Z J U O C N F F L R E F B T D R Y W  
R K V A C B H G L C F D Y X R Z Q E R E H N Q D S J H T  
R G E N Y Y K F J V G S C G D H O G K A F E M I S S Q P 
S J Z A B V A A P E E P R K F T A H W C G B J N N L W B 
F V F Z Y T V Y E O C Y A D L Q Q P P F V W K M E U V O 
```

执行程序结果：

```
Please enter the table file name: data.txt
KNRDJPLHXEKBWMXAMUYALEFQNDLD
BDBSWWMTFBKZDGALVLKUNURCRIEI
HNLANDNTOVPOGRUUYXEDLYRMQDTT
YCGYEMASIEXPVZNWHXBDGGRTKVCW
MYCXAMIEUTZJUOCNFFLREFBTDRYW
RKVACBHGLCFDYXRZQEREHNQDSJHT
RGENYYKFJVGSCGDHOGKAFEMISSQP
SJZABVAAPEEPRKFTAHWCGBJNNLWB
FVFZYTVYEOCYADLQQPPFVWKMEUVO
L 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T10:52:58.847

```
while (fgets(line, sizeof line, TableFilePtr) != NULL && rows < MAXROWS) {
/*
    for (cols=0; cols<(strlen(line)-1) && cols < MAXCOLS; ++cols) {
        puzzle[rows][cols] = line[cols];
    }
*/
    char *p=line;
    for(cols=0;NULL != (p=strtok(p, " \n")) && cols < MAXCOLS; ++cols){
        puzzle[rows][cols]=*p;
        p=NULL;
    }
    ++rows;
} 
```

测试打印代码示例：

```
{   //check puzzle[][] print out
    int r, c;
    for(r=0;r<rows;r++){
        for(c=0;c<cols;c++){
            printf("%c", puzzle[r][c]);//do you mistake like this puzzle[r,c] ?
        }
        printf("\n");
    }
} 
```

# fine-uploader - Fine Uploader 可在除 IE 之外的所有浏览器中运行

> ID：15607232
> 
> 赞同：2
> 
> 时间：2013-03-25T03:38:16.413
> 
> 标签：fine-uploader

我将在下面发布我的 Javascript。它适用于所有浏览器，但在 IE 8 或 IE 9 中根本不适用。没有错误，它只是不起作用。我想好消息是我可以准确地知道它在哪里中断（见下文），但我不知道为什么或如何修复它。

我的 HTML 很简单。这只是我正在处理的一个更大项目的测试页面。我在页面上有 6 个简单形式的文件输入框。我要做的是抓取那些输入字段，丢弃任何空的，然后将文件（图片）一一提交到服务器。我知道有更优雅的方式来发送图片，但对于我正在开发的网站来说，这是最好的方式。

我正在使用随软件提供的服务器端 PHP 代码。它没有改变。

我先承认我是自学成才的，Javascript 对我来说是一个弱点。我不是白痴，但我是 Javascript 新手。

该代码在除 IE 之外的所有浏览器中都能完美运行。页面加载，document.ready() 代码运行，Fine Uploader DIV 被放置在页面上。当我点击提交按钮时，问题就来了。我追踪到问题所在

```
manualUploader.fineUploader('addFiles', current[0].files[0]); 
```

出于某种原因，运行该行代码会破坏我的脚本，提交继续进行而不处理任何其余代码，并完全忽略“return false”；应该阻止提交的声明。据我所知，它不会引发任何错误。为什么 IE 会以不同于所有其他浏览器的方式处理该代码？任何帮助，将不胜感激。

```
 $(document).ready(function() {
        var numFiles = 0;
        var numUploaded = 0;

        var manualUploader = $('#sandbox').fineUploader({
            request: {
                endpoint: '../../Processing/ajax_uploader.php'
            },
            autoUpload: false,
            debug: true,
            maxConnections: 1
        }).on('complete', function(event, id, name, responseJSON){
                numUploaded++;              
                var tempField = $('#' + 'pic' + (id + 1)).parent();
                tempField = tempField.parent();
                tempField.remove();
                $('#frmNewProperty').append('<input type="hidden" name="hiddenPic' + id + '" value="' + name + '" />');
                if (numUploaded == numFiles){
                    $('form#frmNewProperty').submit();
                }
        });         

    $('#subButton').click(function() {
        var fields = $('.fileBox');
        $.each(fields, function(){
            var current = $(this).find('.outgoing');
            var dat = current.val();
            if (dat != ''){
                manualUploader.fineUploader('addFiles', current[0].files[0]);
                numFiles++;
            }
        });
        manualUploader.fineUploader('uploadStoredFiles');   
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T23:43:51.387

我看到这个链接几天前又恢复了生命，所以我想我会发布我必须添加的一小段代码，以防万一其他人偶然发现这个线程并发现它有帮助。

再次感谢 RayNicholus 的指点。他死心塌地，为我节省了数小时（或最有可能数天）的研究时间。

对于 IE9 及更早版本，您必须替换以下行：

```
manualUploader.fineUploader('addFiles', current[0].files[0]); 
```

有类似的东西：

```
manualUploader.fineUploader('addFiles', current); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T03:41:25.680

您的代码取决于文件 API 支持。您引用的行期望输入元素的宿主对象上`files`存在一个属性（并包含`FileList`一个值）。仅当支持 File API 时才适用。IE9 及更早版本不支持文件 API。对于这些浏览器，您需要将输入元素本身传递给`addFiles`API 函数。

# python - 带有原始查询集的 Django 1.5 分页

> ID：15607236
> 
> 赞同：1
> 
> 时间：2013-03-25T03:38:56.463
> 
> 标签：python, django, pagination

我正在尝试使用原始查询集实现 Django 的内置分页功能。我已经研究过这个问题，答案是我需要将我的集合转换为列表。像这样的东西：

paginator = Paginator((list(set)), 10)

问题是我仍然收到“RawQuerySet 没有 len() 操作”错误，这让我相信我遗漏了一些东西。我对如何通过此更改实现分页有几个问题。

在我的 html 模板中，我有围绕我的对象迭代的标准分页标签。实施建议的修复是否不仅仅涉及将上述代码行添加到我的views.py？

视图.py

```
refg = RefGene.objects.raw(qrefg)

paginator = Paginator(refg, 100) # Show 100 contacts per page
paginator._count = len(list(refg))

# using django's generated forms
c = RequestContext(request, {
    "refg": refg,
     ...
 })

return HttpResponse(t.render(c)) 
```

html模板

```
{% autopaginate refg %}
{% for r in refg %}

    <tr>
    <td>{{ r.data}}</td>
    <td>{{ r.loc}}</td>
    </tr>

{% endfor %}
{% paginate %} 
```

# ios - ios reloadData 仅重新加载不可见的单元格

> ID：15607238
> 
> 赞同：0
> 
> 时间：2013-03-25T03:39:11.570
> 
> 标签：ios, json, uitableview, reloaddata

我在这里阅读了很多关于我的问题的帖子，但没有一个有效，所以提前感谢您的帮助。

我有一个表格视图，它加载了一个自定义笔尖。我有来自网络 JSON 文件的数据。我已经实现了一个刷新调用（我现在只需点击一个单元格就可以覆盖它）。

调用该方法时，会调用并解析新的 JSON。并且单元格更新了。我可以通过向下滚动表格视图来确认这一点，我可以看到新的行。但是可见的行仍然存在。

我试图使数组为零，循环遍历并根据对象删除，但似乎没有任何效果。

这是代码

```
#import "MMNewsViewController.h"
#import "MMCatsDetailController.h"
#import "CellView.h"
#import "FeatureCell.h"
//#import "MMnewsData.h"

@interface MMNewsViewController ()

@end

@implementation MMNewsViewController
@synthesize titleData;
@synthesize imageData;
@synthesize imageLargeData;
@synthesize dateData;
@synthesize descriptionData;
@synthesize linkData;
@synthesize cityData;

@synthesize _jsonResult;
@synthesize _jsonResultImage;
@synthesize _jsonResultImageLarge;
@synthesize _jsonResultDate;
@synthesize _jsonResultDescription;
@synthesize _jsonResultLink;
@synthesize _jsonResultCity;
@synthesize featureImage;
@synthesize region;

- (void)viewDidLoad
{
    [super viewDidLoad];

    UINib *nib = [UINib nibWithNibName:@"CellView" bundle:nil];
    [self.tableView registerNib:nib forCellReuseIdentifier:@"CellView"];

    [self.navigationController.navigationBar setTintColor:[UIColor blackColor]];
    self.tabBarItem = [[UITabBarItem alloc] initWithTabBarSystemItem:UITabBarSystemItemFeatured tag:0];

    self.navigationController.title = @"News";

    self.tabBarItem.title = @"FooBar";
    self.title = @"Music News";

 UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];

refreshControl.attributedTitle = [[NSAttributedString alloc] initWithString:@"Pull to Refresh"];

[refreshControl addTarget:self action:@selector(refreshView:)        
forControlEvents:UIControlEventValueChanged];

[self.view addSubview:refreshControl];
[self.tableView deselectRowAtIndexPath:[self.tableView indexPathForSelectedRow] animated:YES];

    region = @"wellington";
    [self makeDataRequests];

}

-(void)makeDataRequests
{

    NSString *strURL = [NSString stringWithFormat:@"MYSITEjson.php?region=%@",region  ];

    NSMutableData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL] ];
    NSMutableDictionary *arrayResult = [NSJSONSerialization JSONObjectWithData:dataURL options:kNilOptions    error:nil];

    NSMutableArray *dataArray = [arrayResult objectForKey:@"tickets"]; //2

    _jsonResult = [[NSMutableArray alloc] init];
    _jsonResultImage = [[NSMutableArray alloc] init];
    _jsonResultImageLarge = [[NSMutableArray alloc] init];
    _jsonResultDate= [[NSMutableArray alloc] init];
    _jsonResultDescription= [[NSMutableArray alloc] init];
    _jsonResultLink= [[NSMutableArray alloc] init];
    _jsonResultCity= [[NSMutableArray alloc] init];

    for(NSMutableDictionary *newsDict in dataArray){
        NSMutableDictionary *titleDict = [newsDict objectForKey:@"title"];
        NSMutableDictionary *imageDict = [newsDict objectForKey:@"image"];
        NSMutableDictionary *imageLargeDict = [newsDict objectForKey:@"imageLarge"];
        NSMutableDictionary *dateDict = [newsDict objectForKey:@"pubDate"];
        NSMutableDictionary *descriptionDict = [newsDict objectForKey:@"description"];
        NSMutableDictionary *linkDict = [newsDict objectForKey:@"link"];

       NSMutableDictionary *cityDict = [[newsDict objectForKey:@"venue"] objectForKey:@"city"];

        [_jsonResult addObject:titleDict];
        [_jsonResultImage addObject:imageDict];
        [_jsonResultImageLarge addObject:imageLargeDict];
        [_jsonResultDate addObject:dateDict];
        [_jsonResultDescription addObject:descriptionDict];
        [_jsonResultLink addObject:linkDict];
         [_jsonResultCity addObject:cityDict];
       //  NSLog(@"%@",cityDict);

    }

    //   NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

    self.titleData = _jsonResult;
    self.imageData = _jsonResultImage;
    self.imageLargeData = _jsonResultImageLarge;
    self.dateData = _jsonResultDate;
    self.descriptionData = _jsonResultDescription;
    self.linkData = _jsonResultLink;
    self.cityData = _jsonResultCity;

[self performSelector:@selector(delayedReloadData) withObject:nil afterDelay:1.5];
}
-(void) delayedReloadData
{

     NSLog(@"delayedReloadData");
   [self.tableView reloadData];

}

- (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation{

       NSLog(@"reloadRowsAtIndexPaths");
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    NSLog(@"COUNTER: %i",[self.titleData count]);
    // Return the number of rows in the section.
   return [self.titleData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
      NSLog(@"cellForRowAtIndexPath");

   NSUInteger row  = [indexPath row];

        static NSString *CellIdentifier = @"CellView";

        CellView *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil){
            NSLog(@"New Cell Made");

            NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CellView" owner:nil options:nil];

            for(id currentObject in topLevelObjects)
            {
                if([currentObject isKindOfClass:[CellView class]])
                {
                    cell = (CellView *)currentObject;
                    break;
                }
            }
        }

         [[cell titleLabel] setText:[titleData objectAtIndex:row]];
         [[cell dateLabel] setText:[cityData objectAtIndex:row]];

        NSData *data = [NSData dataWithContentsOfURL: [NSURL URLWithString:[imageData objectAtIndex:row]]];
        UIImage *img1 = [UIImage imageWithData:data];
        [[cell imageLabel] setImage:img1];

        return cell;

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

}

#pragma mark - Table view delegate
- (void)deselectRowAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated{}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.

     MMCatsDetailController *detailViewController = [[MMCatsDetailController alloc] initWithNibName:@"MMCatsDetailController" bundle:nil];

    NSUInteger row  = [indexPath row];
    NSString *titleSender = [titleData objectAtIndex:row];
    NSString *dateSender = [dateData objectAtIndex:row];
    NSString *imageSender = [imageData objectAtIndex:row];
    NSString *imageLargeSender = [imageLargeData objectAtIndex:row];
    NSString *descriptionSender = [descriptionData objectAtIndex:row];
    NSString *linkSender = [linkData objectAtIndex:row];

    detailViewController.titleSend = titleSender;
    detailViewController.dateSend = dateSender;
    detailViewController.imageSend = imageSender;
    detailViewController.imageLargeSend = imageLargeSender;
    detailViewController.descriptionSend = descriptionSender;
    detailViewController.linkSend = linkSender;

      //NSLog(@"linkSender=%@",linkSender);
        region = @"nelson";
[self makeDataRequests];
    //   [self.navigationController pushViewController:detailViewController animated:YES];
  [tableView deselectRowAtIndexPath:indexPath animated:YES];

}
-(void)refreshView:(UIRefreshControl *)refresh {
       refresh.attributedTitle = [[NSAttributedString alloc] initWithString:@"Refreshing data..."];
       // custom refresh logic would be placed here...
         region = @"nelson";
    [self makeDataRequests];

    NSLog(@"HEre");

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"MMM d, h:mm a"];
      NSString *lastUpdated = [NSString stringWithFormat:@"Last updated on %@",

                                        [formatter stringFromDate:[NSDate date]]];
    refresh.attributedTitle = [[NSAttributedString alloc] initWithString:lastUpdated];

      [refresh endRefreshing];
     NSLog(@"HEre");

 }

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
     NSLog(@"numberOfSectionsInTableView");
    return 1;
}

 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSUInteger row  = [indexPath row];

    if(row==0){
   //     return 200;
    }
    else{

//    return 96;

          }
      return 96;
}

 - (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{

    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0,0,tableView.frame.size.width,10)];

    UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, headerView.frame.size.width, headerView.frame.size.height)];

    headerLabel.font = [UIFont boldSystemFontOfSize:12];
    headerLabel.text = @"Music News";
    headerLabel.backgroundColor = [UIColor blackColor];
     headerLabel.textColor = [UIColor whiteColor];
    [headerView addSubview:headerLabel];

    return headerView;

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:05:05.307

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *simpleTableIdentifier = @"CueTableCell";

CueTableCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

if (cell == nil) {
    NSArray *array = [[NSBundle mainBundle] loadNibNamed:@"CueTableCell XibName" owner:self options:nil];
    // Grab a pointer to the first object (presumably the custom cell, as that's all the XIB should contain).
    cell = [array objectAtIndex:0];
}

return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:49:46.110

您需要做的就是在 tableView 上调用 reloaddata。要么你没有在你认为正在调用它的 tableView 上调用 reloaddata，要么你的单元格没有在 tableView:cellForRowAtIndexPath: 中正确设置，或者你不在主线程上调用 reloaddata。

您不应该从您的 UI 线程对服务器进行同步调用。稍微了解一下 GCD。在对服务进行非阻塞调用时，函数 dispatch_async 会派上用场。

# mongodb - Perl MongoDB::Collection 聚合函数的示例使用

> ID：15607239
> 
> 赞同：3
> 
> 时间：2013-03-25T03:39:14.917
> 
> 标签：mongodb, perl, aggregation-framework

谁能分享一个在 Perl 中正确使用 MongoDB::Collection 聚合函数的示例？我正在寻找一个字段的简单总和，其中另一个字段等于某个值 x。

从那里我将能够弄清楚其余的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T17:18:01.623

这是我建立的一个例子。

```
for (my $i=0; $i<100; $i++) {
    my $number = $i*100;
    my $result = $collection->aggregate([{"\$match" => {"b" => {"\$gte" => $number, "\$lt" => $number+1000}}}, {"\$group" => {"_id" => 0, "average" => {"\$avg" => "\$b"}, "count" => {"\$sum" => 1}}}]);
    print Dumper($result);
} 
```

[您可以在http://docs.mongodb.org/manual/aggregation/](http://docs.mongodb.org/manual/aggregation/)找到更多信息。

# php - PHP 从 Zip 存档中读取

> ID：15607242
> 
> 赞同：0
> 
> 时间：2013-03-25T03:39:40.043
> 
> 标签：php, gzip

我在 .gz ( tar 然后 gz ) 存档 (~ 700MB) 中有一些序列化数据，我想在 PHP 中读取这些数据而不解压缩并从中提取一些字段。

已经尝试过 PHP : Zip 类，但是它不断给出这个错误“找不到 EOCD 签名”。我启用了 zip 扩展。

Zip => 启用扩展版本 => $Id: php_zip.c,v 1.95.2.6 2007/05/19 22:35:49 pajoye Exp $ Zip 版本 => 1.8.10 Libzip 版本 => 0.7.1

编辑：存档未损坏。解压后效果很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:44:33.500

你试过 gzopen 吗？

[http://www.php.net/manual/en/function.gzopen.php](http://www.php.net/manual/en/function.gzopen.php)

忽略这一行，因为 30 字符的限制，我把它放了。

# php - 使用相同的凭据打开到同一个数据库的 2 个连接

> ID：15607244
> 
> 赞同：1
> 
> 时间：2013-03-25T03:39:50.763
> 
> 标签：php, postgresql, pdo, persistent-connection

最初的任务：在我的应用程序中，我需要同时使用相同的凭据对同一个数据库进行2 个**不同的连接。**我需要它，因为一个连接用于数据事务，这可能很长。另一个是应用程序级锁，它应该是即时的（显然我希望在应用程序级锁出现时立即看到，而不是在数据事务结束后，当为时已晚）。

所以问题是：如果我使用持久连接选项，如何强制 PDO 打开第二个连接？

现在 - 如果持久连接打开（需要），我检索相同的连接两次，如果持久连接关闭，我检索 2 个不同的连接（只是为了检查）

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T05:06:30.223

一种选择是禁用持久连接。相反，使用像[PgBouncer](http://wiki.postgresql.org/wiki/PgBouncer)这样的轻量级外部连接池来减少连接设置/拆卸开销并重用后端。

无论如何，最好保持交易简短。

# jquery - 使用 jQuery .remove() 仅删除第一个列表项

> ID：15607247
> 
> 赞同：1
> 
> 时间：2013-03-25T03:40:00.513
> 
> 标签：jquery, html

我有一个简单的表格，允许某人添加/删除额外的电话号码。出于某种原因，我在我的 Javascript 中看不到错误。用户可以毫无问题地将新号码添加为列表项——每个列表项都有一个用于删除列表项的按钮。如果用户单击第一个列表项删除按钮，则该项被删除。使用 JS 添加的列表项都不会从页面中删除。

这看起来很简单，但我很难过。在过去的两个小时里，我试图通过在 stackoverflow 和谷歌上的许多搜索来解决这个问题。我知道当它解决后我会觉得很傻，但我可以在这方面寻求帮助。

**HTML**

```
<ul class="telRow">
  <li id="telid_1234">
    ONE <button class="telRowRemove">-</button>
  </li>
</ul>

<div>
  <button class="telRowAdd">+</button>
</div>

<div id="errors">No errors</div>

<div class="emptyTel" style="display: none;">
<input type="text" name="tel_no[]" />
<button class="telRowRemove">-</button> 
</div> 
```

**JS**

```
$(document).ready(function(){

  $('.telRowAdd').on('click', function() {
     var Container = $('ul.telRow');
     var newrow = '<li>ONE <button class="telRowRemove">-</button></li>';
     Container.append(newrow);
      $('#errors').text('Added');
  });

  $('.telRowRemove').click(function() {
      $(this).parent('li').remove();
      $('#errors').text('Removed');
  });
}); 
```

删除按钮有一个 .telRowRemove 类，所以理论上点击按钮会触发 $('.telRowRemove').click，但它只对页面上的原始列表项执行此操作，而不是列表的其余部分项目。

我在这里有一个关于 JS Bin 的示例设置[http://jsbin.com/omanij/1/edit](http://jsbin.com/omanij/1/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T03:42:49.413

您的选择器仅将事件绑定到您查找它们时存在的元素。使用事件委托来匹配稍后出现的那些：

```
$('#parent_of_tel_rows').on('click', '.telRowRemove', function() {
    $(this).parent('li').remove();
    $('#errors').text('Removed');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:59:34.520

您可以在 jsfiddle 中找到以下工作模型：

[http://jsfiddle.net/btjcz/](http://jsfiddle.net/btjcz/)

```
$('.telRowAdd').on('click', function () {
        var Container = $('ul.telRow');
        var newrow = $('<li>ONE </li>');
        var btnRemove = $('<button class="telRowRemove">-</button>');

        btnRemove.click(function () {
            $(this).parent('li').remove();
            $('#errors').text('Removed');
        });
        newrow.append(btnRemove);

        Container.append(newrow);
        $('#errors').text('Added');
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T03:47:46.907

您的以下按钮不起作用的原因是因为它们是动态添加到 DOM 中的，并且您绑定到的 click 事件不会为将来的元素触发。

使用[.on()](http://api.jquery.com/on/)代替，它将确保将来的元素也被绑定。

在此处查看更新的示例：http: [//jsbin.com/omanij/5/edit](http://jsbin.com/omanij/5/edit)

# asp.net - .NET 4 中的 SignalR 支持

> ID：15607252
> 
> 赞同：24
> 
> 时间：2013-03-25T03:40:47.547
> 
> 标签：asp.net, signalr

SignalR 是否支持 .NET 4.0。还是仅支持 .NET 4.5 以上。是否有任何链接提供 SignalR 的最低要求。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-07-30T08:04:25.020

现在不再是这种情况了，2.x 版本需要 .NET 4.5。 [https://github.com/SignalR/SignalR/issues/1723](https://github.com/SignalR/SignalR/issues/1723)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-06T20:08:11.350

SignalR 的最后一个 .NET 4.0 支持版本是 1.2.2。版本 2 仅适用于 .NET 4.5

打开 NuGet 包管理器控制台并键入：

```
Install-Package Microsoft.AspNet.SignalR.Client -Version 1.2.2
Install-Package Microsoft.AspNet.SignalR -Version 1.2.2 
```

这将自动在您选择的项目（Web 项目）中安装 SignalR（客户端和服务器）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-25T03:51:42.763

是的 .NET 4.0 支持 SignalR。最低要求：

*Visual Studio 2010 SP1

*由于模板安装程序在 VS2010 中不可用，您需要安装 SignalR NuGet 包

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-20T08:57:18.363

这里要注意的一件事是客户端/服务器 .Net 版本。

大多数人都知道（但值得重复）signalR 可以托管在 Windows 2008R2 以上。Windows 2008R2 有 IIS7，因此当托管在 IIS7 上时，signalR 不能使用 WebSockets（因为旧的 Windows http 堆栈不支持 WebSockets）。这就是 ServerSentEvents 或 LongPolling。对性能来说不是很好。

Windows 2012 以上（因此至少是 IIS8）提供了对 WebSockets 的支持，它获得了我们所追求的惊人的 C10K 性能。

现在有趣的一点。

**.NET 客户端**。

如果您只关心浏览器，请跳过这一点。

> 任何连接到 signalR 后端的 .Net 客户端必须向上使用 Windows8 以使用 WebSockets Windows7 中的 Microsoft 网络堆栈（用于 .Net）不包含 WebSockets。

因此，如果您的客户端是 Windows7，请不要将 signalR 与 WebSockets 一起使用。

或者...像我们一样，您需要使用与 WebClient 结合的自定义 WebSocket 堆栈来处理 http 握手。

希望这对其他人有帮助！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-25T03:45:29.313

您可以从 codeplex[下载](http://aspnetwebstack.codeplex.com/)整个 Web 堆栈，从 github 下载 SignalR 并在 .net4.0 下[编译](https://github.com/SignalR/SignalR)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-26T10:07:18.283

[http://www.bluelemoncode.com/2013/02/default.aspx](http://www.bluelemoncode.com/2013/02/default.aspx)有一个示例项目

这是一个很好的 SignalR 示例，并且可以与 2010 sp1 和 .net framework 4.0 相比。好好工作。

[http://www.bluelemoncode.com/file.axd?file=2013%2f3%2fSignalR_OneOneChat.zip](http://www.bluelemoncode.com/file.axd?file=2013%2f3%2fSignalR_OneOneChat.zip)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-08-09T07:04:15.037

## [此处](https://docs.microsoft.com/en-us/aspnet/signalr/overview/getting-started/supported-platforms#windows-desktop-and-silverlight-applications)描述了 SignalR 的最低要求，

这意味着您的客户端可以是在 Windows XP 上运行的 WinForm/WPF 应用程序。

# c# - 为什么这种方法不纯？

> ID：15607253
> 
> 赞同：7
> 
> 时间：2013-03-25T03:40:58.953
> 
> 标签：c#, .net

我读了这个答案：[https ://stackoverflow.com/a/9928643/16241](https://stackoverflow.com/a/9928643/16241)

但我显然不明白，因为我无法弄清楚为什么我的方法不纯。（有问题的方法是`ToExactLocation()`）。

```
public struct ScreenLocation
{
    public ScreenLocation(int x, int y):this()
    {
        X = x;
        Y = y;
    }

    public int X { get; set; }
    public int Y { get; set; }

    public ExactLocation ToExactLocation()
    {
        return new ExactLocation {X = this.X, Y = this.Y};
    }

    // Other stuff
} 
```

如果您需要它，这里是确切的位置结构：

```
public struct ExactLocation
{
    public double X { get; set; }
    public double Y { get; set; }

    // Various Operator Overloads, but no constructor
} 
```

这就是我所说的：

```
someScreenLocation = MethodThatGivesAScreenLocation();
if (DestinationLocation == someScreenLocation.ToExactLocation())
{
     // Do stuff
} 
```

当我这样做时，ReSharper 将其标记为`"Impure Method is called for readonly field of value type."`

为什么这么说？我该怎么做才能让它消失？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T03:46:04.793

它不是纯粹的，因为它不会返回仅取决于其输入的值。当`X`或的值`Y`改变时， 的返回值也随之改变`ToExactLocation`，即它的输出取决于内部的可变状态。

此外，设置器 for`X`或`Y`in`ExactLocation` *可能会*改变输入。可能的吸气剂`ScreenLocation`。

`someScreenLocation`是一个只读字段并且是一个值类型。您正在调用`ToExactLocation`一个值，即只读字段。当您访问只读值类型时，会创建一个副本以避免改变值本身。但是，您的调用可能会改变该值，在许多情况下，这不是您想要的，因为您将改变一个副本。这就是您收到警告的原因。

在这种情况下，您可以忽略它，但我通常会避免使用可变值类型。

编辑：

让我尝试简化...

```
struct Point
{
    int X;
    int Y;
    bool Mutate() { X++; Y++; }
}

class Foo
{
    public readonly Point P;
    Foo() 
    { 
        P = new Point();
        P.Mutate();  // impure function on readonly value type
    }
} 
```

当`Mutate()`被调用时，会创建一个副本`P`并与该方法一起传递。的内部状态的任何突变都`P`将是无关紧要的，因为它会突变一个副本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T03:45:51.687

*纯方法*的条件之一是其输出（返回值）完全取决于其输入（参数）。

您的`.ToExactLocation()`方法*不是*纯粹的，因为它的输出既取决于输入参数，也取决于可变结构的当前值。

Resharper 不喜欢这样，因为可变结构很糟糕（不要使用它们）。我希望如果您将代码更改为使用类而不是结构或重新设计结构以便 .X 和 .Y 成员只能由构造函数设置，则错误会消失。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-25T03:46:03.613

阅读答案，我发现`pure`函数必然像数学中的函数。如果为 0，`f(x) = x^2 + 2x + 10`将*始终*返回。`10``x`

因此`ToExactLocation()`，每次调用它时都必须返回相同的值，而不管对象自初始创建以来发生的变化，才能将其称为“纯”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T04:03:31.160

“纯函数”有两种含义：一种是[理论上的](http://en.wikipedia.org/wiki/Pure_function)的（无副作用/不依赖于可变状态），另一种是 ReSharper 对函数的看法。

从理论的角度来看，您的函数不是纯粹的，因为它依赖于可变状态。样本：

```
var someScreenLocation = new ScreenLocation(1,1);

var locationOne = someScreenLocation.ToExactLocation();
var locationTwo = someScreenLocation.ToExactLocation();
someScreenLocation.X = 3;
var locationThree = someScreenLocation.ToExactLocation(); 
```

对于纯粹的方法，它*只能*根据输入来更改其结果（根本不像在这种情况下，因为没有参数）。但是您可以清楚地观察到`locationOne`并且`locationTwo`是相同的（到目前为止是好兆头），但不幸的是`locationThree`的是即使输入（函数的参数）仍然相同，它们也是不同的。

`X`您可以通过制作和`Y` `readonly`（并添加构造函数）使其理论上纯粹。

即使在更改之后，ReSharper 仍然会认为它不是纯的 - 为了说服它，您可以使用[Pure](http://msdn.microsoft.com/en-us/library/system.diagnostics.contracts.pureattribute.aspx)属性将其标记为纯。

请注意，即使在具有`readonly`字段的类的构造函数中，ReSharper 也会标记“不纯”函数的使用。下面的示例显示了 ReSharper 警告：

```
struct Point
{
    public int X;
    public int Y;
    public Point(int x, int y){X = x;Y = y;}

    public void Mutate(){X++;}
    public Point TheoreticallyPure(){return new Point(1, 1);}
    [Pure] public Point MarkedPure(){ return new Point(1, 1);}
}

class WithReadonlyField
{
    public readonly Point P;
    public WithReadonlyField()
    {
        P = new Point();
        P.TheoreticallyPure();  // impure function on readonly value type
        P.MarkedPure(); // return value of pure not used
        P.Mutate();   // impure function on readonly value type - modifies P.
        P = new Point().MarkedPure(); // ok to modify P multiple times.
    }
    public void NormalMethod()
    {
        P.Mutate();   // impure function on readonly value type, no changes to P
    }
} 
```

C# 允许修改`readonly`字段直到构造函数的末尾，但是 ReSharper 也标记了那里所有“不纯”函数的用法（请注意，`Mutate`构造函数中的函数实际上更改了`readonly`field的值`P`，这与`NormalMethod`它没有效果的情况不同）。

> “ [readonly](http://msdn.microsoft.com/en-us/library/acdd6hb7%28v=vs.110%29.aspx) ...对声明引入的字段的赋值只能作为声明的一部分或在同一类的构造函数中出现”

ReSharper 的这种行为很可能是为了保持一致性，并避免移动完全有效的代码完全改变行为的情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T04:08:06.313

最好将其建模为静态方法（在任一类上）并消除不纯的警告。省略了解释，因为其他答案已经涵盖了原因。

例子：

```
public static ExactLocation ToExactLocation(ScreenLocation loc)
{
    return new ExactLocation {X = loc.X, Y = loc.Y};
} 
```

或使用扩展方法

```
public static ExactLocation ToExactLocation(this ScreenLocation loc)
{
    return new ExactLocation {X = loc.X, Y = loc.Y};
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T03:50:02.600

不太确定原因，如果格式正确，我会将其作为评论...

你不想要这样的东西：

```
var someScreenLocation = MethodThatGivesAScreenLocation();
if (DestinationLocation.X == someScreenLocation.ToExactLocation().X &&
    DestinationLocation.Y == someScreenLocation.ToExactLocation().Y)
{
     // Do stuff
} 
```

# php - 在 PostgreSQL 中存储 SHA1 十六进制值

> ID：15607256
> 
> 赞同：2
> 
> 时间：2013-03-25T03:41:32.347
> 
> 标签：php, postgresql, hex, sha1

看似简单的问题，对应于另一个关于 MySQL 的问题：如何将 SHA1 哈希产生的十六进制值存储在 PostgreSQL 数据库中？

注意：我意识到我可以使用 VARCHAR(40) 字段，但这效率不高，因为数据是十六进制的。另外，我正在使用 PHP 与数据库进行交互，因此我可以在必要时使用 PHP 函数，但如果是这种情况，我应该将结果存储在数据库中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:47:31.230

我会存储为 bytea，十六进制编码。将人类可读的十六进制数据转换为 bytea 只需：

```
 ('\x' || sha1_hex_value)::bytea 
```

这里唯一真正的缺点是，根据您的应用程序框架，您可能会得到二进制表示。如果不是，您将获得一个转义版本，并且根据转义设置，可能需要自己转换为二进制（如果它是十六进制，尽管您可以去掉`\x`值前面的 并用作十六进制）。

# ruby - 覆盖method_missing时如何理解super？

> ID：15607258
> 
> 赞同：2
> 
> 时间：2013-03-25T03:41:43.537
> 
> 标签：ruby

```
class MyClass
  def method_missing(id,*args,&block)
    return A if something
    return B if something_else
    super
  end
end 
```

这里如果 A 和 B 都没有返回，则调用 super，这将引发 NoMethodError。我想这里的 super 是 MyClass 的超类。但是，NoMethodError 是如何引发的，因为这里我们只调用 super 而没有同时调用缺少的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T03:44:37.807

你的假设是错误的。`super`不是 的超类`MyClass`。它是对超类的同名方法的调用`MyClass`。

# android - 如何在一个可滚动屏幕中列出视图（或小部件）

> ID：15607259
> 
> 赞同：0
> 
> 时间：2013-03-25T03:41:44.413
> 
> 标签：android, android-layout

我有以下原型：

![在此处输入图像描述](../Images/f37729839a935fde8a1b22608c2a4253.png)

在屏幕中以可滚动方式列出视图的方法是什么？

我已经尝试过的：

我尝试创建一个类并扩展 LinearLayout 类并将我的视图（**复合控件类**是我的***视图***也扩展了 LinearLayout）动态添加到主 LinearLayout。所以我得到了一个可以滚动的视图列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:40:41.523

我不确定您的意思，但是看看您尝试过的方法，使用 a 有什么问题`ListView`？顾名思义，它应该完全符合您的要求：

> 在屏幕中以可滚动方式列出视图的方法是什么？

[这是来自ListView](http://developer.android.com/guide/topics/ui/layout/listview.html%3a)的 android 文档的引用

> ListView 是一个显示可滚动项目列表的视图组。列表项使用适配器自动插入到列表中，该适配器从诸如数组或数据库查询之类的源中提取内容并将每个项结果转换为放置到列表中的视图。

您应该可以`ListView`在`LinearLayout`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:57:09.580

你的问题似乎很难理解。

您的意思是如何将整个页面（活动）设置为列表视图？默认情况下列表视图是可滚动的（当然，如果列表足够长，您可以看到它，并且您可以将整个活动设置为列表）..您也可以通过使用模板（xml）和扩展`ArrayAdapter`您的类型来自定义它（让我们说`ArrayAdapter<UpcomingEvents>`）并从数据库提供数据......

你是这个意思吗？

# java - 在 XML 响应（标签）中避免命名空间

> ID：15607264
> 
> 赞同：0
> 
> 时间：2013-03-25T03:42:56.293
> 
> 标签：java, xml, namespaces, xml-namespaces

我们正在使用 Java 从 Cisco ips（SDEE 服务器）中提取数据。这是一个正常的网络请求，我们正在使用 HttpsURLConnection。响应采用 XML 格式。

我们有一个 UI（Web 应用程序）可以触发作业来拉取数据；我们还有一个独立的实用程序，它也可以触发作业以提取数据。因此，从 sdee 服务器检索数据的代码在这两种情况下都是相同的。使用 Quartz 安排作业，尽管此信息在这里无关紧要。

现在的问题 - 当从 UI 触发作业时，我们得到预期的 xml，没有问题。但是当使用该实用程序触发作业时，我们会得到相同的 xml，但在其标签中带有命名空间。

```
<['http://example.org/2003/08/sdee']:sd:evIdsAlert eventId='123' vendor='Cisco' severity='low'><['http://example.org/2003/08/sdee']:sd:originator> 
```

[' [http://example.org/2003/08/sdee](http://example.org/2003/08/sdee) '] - 这是我们得到的额外的东西。我们不希望在 XML 中出现这种情况。

由于代码相同，我怀疑可能是某些环境设置影响了响应，但我不知道是什么。

部分代码（我们正在使用），仅供参考：

```
// get the connection
connection = (HttpsURLConnection) url.openConnection();
// get the reader
new BufferedReader(new InputStreamReader(connection.getInputStream()));
// read response line by line and dump it to the file 
```

代码非常简单 - 使用 HTTP(s) 提取数据的标准代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:40:40.580

问题是由于不同的 xml 解析器造成的。它现在固定了。

# java - 测量时间间隔和乱序执行

> ID：15607265
> 
> 赞同：5
> 
> 时间：2013-03-25T03:42:58.417
> 
> 标签：java

我一直在阅读有关 Java 内存模型的内容，并且我知道编译器可以重新组织语句以优化代码。

假设我有以下代码：

```
long tick = System.nanoTime();
function_or_block_whose_time_i_intend_to_measure();
long tock = System.nanoTime(); 
```

编译器是否会以我打算测量的内容不在滴答和滴答之间执行的方式重新组织代码？例如，

```
long tick = System.nanoTime();
long tock = System.nanoTime();
function_or_block_whose_time_i_intend_to_measure(); 
```

如果是这样，保持执行顺序的正确方法是什么？

编辑：用 nanoTime 说明乱序执行的示例：

```
public class Foo {
    public static void main(String[] args) {
        while (true) {
            long x = 0;

            long tick = System.nanoTime();
            for (int i = 0; i < 10000; i++) { // This for block takes ~15sec on my machine
                for (int j = 0; j < 600000; j++) {
                    x = x + x * x;
                }
            }

            long tock = System.nanoTime();
            System.out.println("time=" + (tock - tick));
            x = 0;
        }
    }
} 
```

上述代码的输出：

```
time=3185600
time=16176066510
time=16072426522
time=16297989268
time=16063363358
time=16101897865
time=16133391254
time=16170513289
time=16249963612
time=16263027561
time=16239506975 
```

在上面的示例中，第一次迭代中测量的时间明显低于后续运行中测量的时间。我认为这是由于乱序执行造成的。第一次迭代我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:31:56.247

`happens-before`Java 内存模型 (JMM) 定义了对程序的所有操作调用的偏序。定义了七个规则来确保`happens-before`排序。其中之一被称为`Program order rule`：

> 节目顺序规则。线程中的每个动作都发生在该线程中按程序顺序稍后出现的每个动作之前。

根据这个规则，你的代码不会被编译器重新排序。

[Java Concurrency in Practice](http://jcip.net.s3-website-us-east-1.amazonaws.com/)一书对这个主题给出了很好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:35:16.863

> 编译器是否会以我打算测量的内容不在滴答和滴答之间执行的方式重新组织代码？

没有。那**永远不会**发生。如果那个编译器优化搞砸了，那将是一个非常严重的错误。引用维基的声明。

> 运行时（在这种情况下，通常指动态编译器、处理器和内存子系统）可以自由地引入任何有用的执行优化，只要保证隔离线程的结果与其完全相同如果所有语句都按照语句在程序中出现的顺序（也称为程序顺序）执行，则应该是这样。

因此，只要结果与按程序顺序执行时的结果相同，就可以进行优化。在您引用的情况下，我会假设优化是本地的，并且没有其他线程对此数据感兴趣。进行这些优化是为了减少对主内存的访问次数，这可能是昂贵的。当涉及多个线程并且它们需要知道彼此的状态时，您只会遇到这些优化的麻烦。

现在，如果 2 个线程需要一致地查看彼此的状态，它们可以使用 volatile 变量或内存屏障（同步）来强制将写入/读取序列化到主内存。[Infoq 对此发表了一篇不错的文章](http://www.infoq.com/articles/memory_barriers_jvm_concurrency)，您可能会感兴趣。

# firefox - smartgwt 日历 getdaybodyhtml 问题

> ID：15607266
> 
> 赞同：0
> 
> 时间：2013-03-25T03:43:07.070
> 
> 标签：firefox, calendar, smartgwt

我对 smartgwt 日历工具有疑问，我已经通过类日历的受保护方法 getdaybodyhtml() 对其进行了自定义，以在一个月中的某些日子分配特殊图标标志，除了在上显示日历时的一件事外，一切正常chrome（所有版本）IE（7,8,9）和FF（直到14.0.1），但是当我在FF（15到19之间）上显示日历时，不显示此标志图标。我对代码进行了跟踪，发现我在 getdaybodyhtml() 方法中定义的 html 代码没有打印出来。

我在 smartgwt 上寻找任何类似的问题，但我没有找到任何相关的东西。将收到任何帮助。（对不起，如果我的英语不太好，是我的第二语言）

这是一段代码：

```
private Calendar calendar = new Calendar(){
    @Override
    @SuppressWarnings("deprecation")
    protected String getDayBodyHTML(Date date, CalendarEvent[] events, Calendar calendar, int rowNum, int colNum) {
        String value = defaultMessage != null ? defaultMessage : date.getDate()+"";
        // The "events" are the events of the day
        List<CalendarEvent> calendarEvents =  new ArrayList<CalendarEvent>(Arrays.asList(events));
        if(calendarEvents != null && calendarEvents.size() > 0) {
            // Removing the tooltip and the excluded colours
            removeTooltipsFromCalendar(calendar,date);
            removeExcludedColoursFromCalendar(calendarEvents);
            if(calendarEvents.size() == 1){
                // Description contains the colour
                String colour = calendarEvents.get(0).getDescription();
                value = imgHTML(COASTAL_IMAGES_DIR+colour+COASTAL_IMAGE_SUFFIX, colourWidth, colourHeight, "images", "class='handCursor'", null);
            }else if(calendarEvents.size() > 1){
                // Might have two vessels going to the same port in the same day
                Set<String> colours = new HashSet<String>();
                for(CalendarEvent event : calendarEvents){
                    // Description contains the colour
                    colours.add(event.getDescription());
                }
                int numberOfPorts = colours.size();
                for(String colour : colours){
                    value += "<div>";
                    value += imgHTML(COASTAL_IMAGES_DIR+colour+COASTAL_IMAGE_SUFFIX, colourWidth, colourHeight/numberOfPorts, "images", "class='handCursor'", null);
                    value += "</div>";
                }
            }else{
                value = defaultMessage != null ? defaultMessage : date.getDate()+"";
            }
        }
        return value;
    }
}; 
```

PD：在所有版本的 chrome 和 IE 中，这段代码：

```
value += "<div>";
                value += imgHTML(COASTAL_IMAGES_DIR+colour+COASTAL_IMAGE_SUFFIX, colourWidth, colourHeight/numberOfPorts, "images", "class='handCursor'", null);
                value += "</div>"; 
```

打印正常，在 14 版之前的 firefox 中打印正常，但在 ff 中从 15 到 19 不打印“div”和“image”。我已经看到代码抛出了萤火虫，而 div 只是没有出现在那个 firefox 版本（15-19）中。

PD：它也不适用于 IE 10 的上次更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T23:32:09.947

最后我发现了问题。我不知道为什么，但是在 Firefox 的最新版本中，在 14 版本之后，gwt calendar(v 2.1) 自动重复打印日历两次，所以当它第二次打印时，它在没有图像的情况下做到了天体。

解决方法：手动创建代码以停止两次打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:12:28.670

您能否[在 SmartGWT 展示中看到以下示例中的](http://www.smartclient.com/smartgwt/showcase/#compact_calendar_category)图标。

截至 3 月 31 日，我可以在上述示例中看到 4 月 2 日、4 月 3 日、4 月 4 日和 4 月 5 日的图标。此示例中使用的 CalendarEvent 实例是在当前日期前 2、3、4 和 5 天创建的。

我正在使用 FireFox 19.0.2

# python - 将数据从列表写入 xml 文件

> ID：15607271
> 
> 赞同：0
> 
> 时间：2013-03-25T03:44:18.240
> 
> 标签：python

我正在尝试使用以下代码将列表中的数据写入 xml 文件，我有关于数据应如何出现在 data.xml 文件中的预期输出...遇到编译错误，任何人都可以提供关于什么的输入这里错了吗？

```
data = [['SEC.12.0', '\\\\DATA\\LOC', '\\\\ftp\\location'], ['SEC.13.0', '\\\\DATA\\LOC2', '\\\\ftp\\location2']]

for set in data :
    f = open('data.xml', 'w')
    f.write(<pro>set[0]</pro>)
    f.write(<dataloc>set[1]</dataloc>)
    f.write(<ftploc>set[2]</ftploc>) 
```

错误：-

```
 File "test.py", line 8
    f.write(<pro>set[0]</pro>)
            ^
SyntaxError: invalid syntax 
```

预期输出：-

```
data.xml file should contain the follwing

        <pro>SEC.12.0</pro>
        <dataloc>\\DATA\LOC</dataloc>
        <ftploc>\\ftp\location</ftploc>
        <pro>SEC.13.0</pro>
        <dataloc>\\DATA\LOC2</dataloc>
        <ftploc>\\ftp\location2</ftploc> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:49:14.143

您没有将字符串传递给`.write()`：

```
f.write('<pro>' + set[0] + '</pro>') 
```

`set`是一个内置函数，所以不要通过命名你的变量来隐藏它`set`。此外，如果您要创建任何重要的 XML，请使用 XML 库，如[ElementTree](http://docs.python.org/2/library/xml.etree.elementtree.html)或[lxml](http://lxml.de/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:50:46.760

您需要将字符串传递给 f.write（例如，`f.write("<pro>%s</pro>" % (set[0]))`）。

旁注，避免将变量命名为“set”，因为它是内置类型。

# php - 计算错误结果的电力运营商

> ID：15607279
> 
> 赞同：0
> 
> 时间：2013-03-25T03:44:49.707
> 
> 标签：php

实际上，这两者都是相同的，但它们都返回不同的结果。

```
echo round(200 / ((175/100)*(175/100)), 2);   Returns 65.31
echo round(200 / ((175/100)^2), 2);           Returns 66.67 
```

操作顺序都是正确的，因此对结果没有影响。 [创建了一个键盘](http://codepad.org/Oxi4uQpV)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:46:03.930

^ 表示按位异或，而不是幂。对于电源使用功能 pow：

[http://php.net/manual/en/function.pow.php](http://php.net/manual/en/function.pow.php)

# backbone.js - Stickit：如何在每个模型后触发更改事件 -> 视图更改

> ID：15607282
> 
> 赞同：4
> 
> 时间：2013-03-25T03:45:28.117
> 
> 标签：backbone.js, backbone-stickit

我有很多事件绑定到我的视图中的元素，但是当我使用stickit js 通过更改模型来更改视图中的值时，它不会触发 onChange 事件。

有没有一种方法可以在模型中设置值之后触发当前模型的 onchange 事件：元素，而不必为每个绑定编写处理程序？这将适用于所有表单元素，输入/选择/文本区域。

对于页面上的每个表单元素，我想避免以下内容：

```
bindings: {
    '#foo': {
         observe: 'foo',
         afterUpdate: 'forceChange'
    },
    '#bar': {
         observe: 'bar',
         afterUpdate: 'forceChange'
    },
    ...
},

forceChange: function(el) { jQuery(el).change() } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T12:24:55.010

一种可能的技巧（仅适用于 0.6.3 版）是定义一个匹配所有元素的全局处理程序：

```
Backbone.Stickit.addHandler({
  selector: '*',
  afterUpdate: function($el) {
    $el.trigger('change');
  }
}); 
```

由于处理程序按照定义的顺序与其他匹配的处理程序和绑定配置混合在一起，因此您不能`afterUpdate`在不覆盖这个全局的、全匹配的处理程序的情况下在任何绑定中使用，因为绑定配置是最后混入的. 你可以[在这里](http://nytimes.github.com/backbone.stickit/#custom-handlers)阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T00:06:57.387

啊，那条评论澄清了问题。因此，在 Javascript 中，当您“手动”更改输入值时（无论是通过 jQuery 还是通过`someElement.value =`），正如您所注意到的，浏览器不会触发更改事件。更改事件（以及与此相关的大多数其他事件）仅在响应*用户*操作时触发，而不是针对 Javascript。

幸运的是，正如您可以“手动”更改值一样，您也可以“手动”触发事件。在 jQuery 中，它的语法是：

```
$(yourElement).trigger('change'); 
```

如果您需要控制类似的东西，`e.target`您可以阅读 jQuery`trigger`文档以获取详细信息，但这是基本思想。

如果需要，您甚至可以将值更改和事件触发链接在一起：

```
$(yourElement).val('newValue').trigger('change'); 
```

# android - SupportMapFragment 显示为空白（Map Google V2）

> ID：15607295
> 
> 赞同：4
> 
> 时间：2013-03-25T03:46:16.543
> 
> 标签：android, android-fragments, google-maps-api-2, supportmapfragment

我想`SupportMapFragment`在`Fragment`容器中加载一个。我没有收到任何错误，我的 API 密钥很好，Google Play 服务库已导入并调用了所有权限。

我这样称呼`MapFragment`：

```
MapaFragment fragment = new MapaFragment();
FragmentTransaction ft2 = getFragmentManager().beginTransaction();
ft2.replace(android.R.id.tabcontent, fragment)          
    .commit(); 
```

`Fragment`如下：

```
public class MapaFragment extends SupportMapFragment {
private View v;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);
    v=inflater.inflate(R.layout.mapa, null);

    return v;       
} 
```

地图的布局就这么简单：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapa"    
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:58:58.583

您已经在xml布局文件中添加了SupportMapFragment，无需在代码中再次添加或覆盖onCreateView方法，只需将这些注释掉即可

```
MapaFragment fragment = new MapaFragment();
FragmentTransaction ft2 = getFragmentManager().beginTransaction();
ft2.replace(android.R.id.tabcontent, fragment)          
    .commit(); 
```

还有这些

```
private View v;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);
    v=inflater.inflate(R.layout.mapa, null);

    return v;       
} 
```

代码行并尝试运行应用程序

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T12:16:19.137

你确定，你的 API 密钥没问题吗？请尝试使用此功能检查您的活动的 onCreate 方法：

```
 private void getShaKey() {

 try {
 PackageInfo info = getPackageManager().getPackageInfo("YOUR_PACKAGE_NAME",
 PackageManager.GET_SIGNATURES);
 for (Signature signature : info.signatures) {
 MessageDigest md = MessageDigest.getInstance("SHA");
 md.update(signature.toByteArray());
 Log.v(TAG, "KeyHash:" + Base64.encodeToString(md.digest(),
 Base64.DEFAULT));
 }
 } catch (NameNotFoundException e) {
 e.printStackTrace();
 } catch (NoSuchAlgorithmException e) {
 e.printStackTrace();
 }

 } 
```

看看，如果它返回与您放入清单中的相同：

```
 <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="YOUR_API_KEY" /> 
```

然后请检查，如果 getMap() 没有像这样返回 null：

```
GoogleMap myMap;

myMap = ((SupportMapFragment) getFragmentManager().findFragmentById(R.id.mapa)).getMap();

if(myMap != null){
...
} 
```

您可以在“return v”语句之前的 onCreateView 方法中执行此操作。

# linux - htaccess pcfg_openfile：无法检查 htaccess 文件，确保它是可读的并且“/files/domain.com/public_html/images/”是可执行的

> ID：15607300
> 
> 赞同：25
> 
> 时间：2013-03-25T03:47:10.723
> 
> 标签：linux, apache, security, permissions, nginx

今天我将我的图像从一台服务器迁移到另一台服务器并遇到了一个奇怪的权限问题

```
[Mon Mar 25 08:42:23.676315 2013] [core:crit] [pid 15182] (13)Permission denied: [client 24.14.2.22:48113] AH00529: /files/domain.com/public_html/images/.htaccess pcfg_openfile: unable to check htaccess file, ensure it is readable and that '/files/domain.com/public_html/images/' is executable, referer: http://domain.com.com/file.php 
```

我试过的：

```
 chmod -R 777 root_dir
    restorecon -r
    disable selinux
    Chown -R root:root root_dir 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-11-05T08:49:36.480

今天我遇到了这个问题。我将 public_html 从旧驱动器转移到新驱动器并像这样 chown：

```
chown -R owner:owner public_html 
```

这对于public_html中的子目录和文件是正确的，但是public_html的用户必须是nobody，所以apache可以检查它的内容，所以这解决了我的问题：

```
chown owner:nobody public_html 
```

注意：**所有者**是用户（例如web1）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-10-20T02:36:59.267

我有同样的问题。对我来说，这是 SeLinux (CentOS 7) 的问题。

这个对我有用：

```
$ setsebool -P httpd_enable_homedirs true
$ chcon -R -t httpd_sys_content_t /var/www/html/ 
```

请注意，您应该将以上内容更改`/var/www/html/`为适当的目录。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-06T14:27:31.397

我正在使用 Plesk onyx 并且收到相同的错误消息，我只是将文件夹权限更改为 775 并且它对我有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-01T11:46:09.717

另一种方式是

```
sudo setenforce 0 
```

[禁用 SELinux](https://linuxize.com/post/how-to-disable-selinux-on-centos-7/)

我希望这对你有用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-20T20:34:57.820

TL;博士：

```
sudo chmod a+rx /var{,/services{,/web{,/web-folder}}};
find /var/services/web/web-folder -type d -exec sudo chmod a+rx {} +; 
```

您需要确保该目录及其所有父目录是 Web 服务器可读和可执行的（打开目录需要可执行性）。您可以通过使 Web 服务器用户成为所有者并使用户权限 (EG: `chown apache <dir>; chmod u+rx <dir>;`) 来实现此目的，或者通过使组成为 Web 服务器组一个包含 Web 服务器用户的组并将组权限设置为 (EG: `chgrp apache <dir>; chmod g+rx <dir>;`)，或者通过将世界权限设置为 (EG: `chmod o+rx <dir>;`)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-02T04:44:22.353

打开您的 httpd.conf 文件并将 .htaccess 文件中的 Deny from all 更改为 Allow from all

# 以下行阻止 .htaccess 和 .htpasswd 文件

# 由 Web 客户端查看。

```
<FileMatch "^\.ht">
  Order allow,dey
  Allow from all
</FileMatch> 
```

# 这解决了我的问题

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-01-09T11:10:49.170

当我检查`httpd/user-error_log`时，它给了

```
[Fri Jan 09 18:58:08 2015] [crit] [client 192.168.1.xxx] (13)Permission
denied: /var/services/web/web-folder/.htaccess pcfg_openfile: unable to check
htaccess file, ensure it is readable 
```

chmod 755 没有解决问题。下面的命令对我有用。我使用 http，因为它是 Synology DSM 5.1-5021 中使用的 apache 用户和组

```
 cd /var/services/web
  chown http:http web-folder

 apache httpd.conf @ /etc/httpd/conf/httpd.conf 
```

有关 [5.0 中新更改 Apache / Webserver 限制的更多详细信息](http://forum.synology.com/enu/viewtopic.php?f=232&t=79801)

# ios - 使用 requestWithURL 形成请求时，url 更改并丢失

> ID：15607301
> 
> 赞同：1
> 
> 时间：2013-03-25T03:47:15.953
> 
> 标签：ios, objective-c, httprequest, afnetworking

当我在 xcode 调试模式下研究这个方法时，在构造请求时会发生一些奇怪的事情。

1.  额外的字符被添加到`urlString`. 例如`if SessionId = "abc"`，然后在执行从 开始的行之后`NSURLRequest *request...`，调试器会显示`SessionUrlString = "...session/abc\x03" instead of simply "...session/abc"`. 尽管调试器仍然显示`SessionId = "abc"`. 为什么是这样？
2.  请求对象似乎不包含`url` 任何地方，即使它的构造函数只是将它`url`作为一个变量。它去哪儿了？它是否存储在对象某处的请求对象中`AFHTTPCLient`？

    ```
    -(NSObject*)makeRequestForSessionUsingId: (NSString *)SessionId{

      NSString *baseSessionURLString = [kCwAPIBaseURLString stringByAppendingString:@"session/"];
      NSString *SessionURLString = [baseSessionURLString stringByAppendingString:SessionId];

      NSURL *url = [NSURL URLWithString:SessionURLString];
      NSURLRequest *request = [NSURLRequest requestWithURL:url];
      __block NSObject *sessionJSON = [[NSObject alloc] init];

      AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        NSLog(@"IP Address: %@", [JSON valueForKeyPath:@"origin"]);
        sessionJSON = JSON;
    } failure:nil];

      [operation start];
      return sessionJSON;
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:40:03.600

我不确定是什么导致了 URL 字符串中的尾随字符，但如果你可以在 NSLog 语句中输出它并且它正确显示，那么它可能是正确的。

`NSURLRequest`将您创建它的 URL 存储在它的`- URL`属性中，您可以在[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)中看到。这意味着您应该能够使用类似的东西：

```
NSLog(@"Request URL: %@", [request URL]); 
```

要查看网址。

我在这里看到的更大的问题是你的回报模式。如果这`AFJSONRequestOperation`需要任何时间，则返回的值将是一个空`sessionJSON`变量。当您运行`[operation start];`该操作时，默认情况下不会在返回您指定的值之前等待完成。有一种方法可以让它等待，但你永远不想阻止任何等待网络请求的线程，这可能需要比你希望的更长的时间。你可以在这里做一些其他的选择，但主要是你必须以不同的方式考虑它。几乎所有你想要对网络请求的响应做的事情都需要在成功和失败块中完成。此方法不应尝试返回值（除非它是另一个块的形式）。一些方法可以做到这一点：

1.  将响应 JSON 存储`@property`在您的类中。之后调用一个方法`[self foo];`，然后使用存储的响应来做你想做的事。
2.  在块中调用传递响应 json 的方法`[self foo:JSON]`
3.  将响应作为对象发布[NSNotification 。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotification_Class/Reference/Reference.html)
4.  将一个块传递给此方法，然后调用该方法将响应传递回原始调用者。

# ruby-on-rails - 如何允许用户将他们的个人资料设为私有或公开？

> ID：15607307
> 
> 赞同：2
> 
> 时间：2013-03-25T03:47:36.100
> 
> 标签：ruby-on-rails, ruby, authentication, user-defined-functions

我有一个 Rails 3 应用程序，这是我想弄清楚的。

我已经有一个用户必须登录才能使用的应用程序，但他们的个人资料可供公众查看。他们个人资料的 URL 是[http://myapp.com/users/username](http://myapp.com/users/username)

我想在他们的设置中添加一项功能，他们可以在其中将个人资料设置为公开或私人。它已经是公开的，因为每个人都可以看到它，但是我如何允许私有功能？

基本上，我只希望这部分（[http://myapp.com/users/username](http://myapp.com/users/username)）能够由用户设置为私有或公共。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:20:56.680

为公共/私有布尔值添加一个新列：

```
rails g migration AddIs_publicToUsers is_public:boolean
rake db:migrate 
```

在您的 view/users/show.html.erb （或您的用户页面所在的任何位置）中添加：

```
<% if current_user.is_public %>
  *Paste in display html/erb for your user show page.
<% else %>
  Sorry. Is Private Profile. 
<% end %> 
```

您还必须使该属性可访问，在模型/user.rb 中用于 rails 3 及以下，或在 controller/users_controller.rb 中用于 rails 4。

导轨 3：

```
attr_accessible :is_public 
```

导轨 4：

```
def user_params
  params.require(:user).permit(:is_public)
end 
```

# c - 为什么 sscanf 会这样？

> ID：15607309
> 
> 赞同：0
> 
> 时间：2013-03-25T03:47:48.620
> 
> 标签：c, scanf

我以为我理解 C，但我很难写一个简单的加法代码来练习。当我运行这段代码时，int a 每次都是 0。但是， int b 工作正常。这里的想法是程序的输入是8 + 9。为什么sscanf不能识别变量a？

```
#include <stdio.h>
#include <stdlib.h>

int plus(int a, int b){
    return (a + b);
}

int main()
{
    int a, b;
    char input[100], op;

    printf("...I am ZOLO...\n");
    printf("...The most vercatile calculator known to man...\n");
    printf("...Please enter your query:");
    fgets(input, sizeof(input), stdin);
    sscanf(input, "%d %s %d", &a, &op, &b);

    printf("%d + %d = %d...", a, b, plus(a, b)); 

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:03:30.893

Jonathon Reinhart 有正确的答案。在这种情况下，这不仅仅是未定义的行为问题，而是编译器设法在`op`之前分配`a`（以内部内存顺序）并且您的机器使用 little-endian 字节顺序，以便`'\0'`之后存储的字符`op`消除了之前的值以前存储到`a`.

# java - Android得到4个随机数

> ID：15607310
> 
> 赞同：0
> 
> 时间：2013-03-25T03:47:54.607
> 
> 标签：java, android, while-loop

我需要随机获取数字 1-4 并将其存储在 arrayList 中。我有一个好的开始，但我可能有一个无限循环，因为模拟器不断崩溃。这些数字也不能多次使用。

```
** lightSelector is a global variable (int lightSelector = 1;)
** generatedOrder is my ArrayList

for (int i = 0; i < 4; i++)
{
        lightSelector = 1 + (int)(Math.random() * 4);           
        generatedOrder.add(lightSelector);
        boolean contains = true;
        System.out.print(generatedOrder.get(i));
        if (!generatedOrder.isEmpty())
        {
            // Loop until a number is generated that hasn't already been picked
            while (contains) 
            {
                if (generatedOrder.contains(lightSelector))
                    lightSelector = 1 + (int)(Math.random() * 4);
                else
                {
                    generatedOrder.add(lightSelector);
                    contains = false;
                    break;
                }       
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:52:16.923

以随机排序的顺序获取四个数字的更有效方法是执行以下算法：

1）创建一个int[]数组如{1,2,3,4}；

2) 对于 i = 0；我<数组.长度；**++i，在 i 和 array.length-1之间**生成一个随机数 j，并交换 i 和 j。

重要提示：这意味着可能的交换将是 00,01,02,03 之一，然后是 11,12,13 之一，然后是 22,23 之一，然后是 33 之一。这给你所有 4*3*2* 1 = 4！排列数组的方法，这是算法正确所必需的。

（例如，如果您有 4^4 = 256 种可能的算法完成方式，则 24 不会均匀地进入 256，因此一些洗牌比其他更可能出现。）

这种洗牌算法有一个名字：[Fisher-Yates Shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

编辑：在整数范围内生成随机数的好方法是执行以下操作：

1) 生成`Random rng = new Random()`；恰好一次。永远不要创建一个新实例，因为如果您同时创建两个 Random 实例，它们会给出完全相同的随机数流。

2) Random 有一个方法，`nextInt(n)`它返回一个介于 0 和 n - 1 之间的随机整数，因此要获得 i 和 j 之间的随机数（包括 do `nextInt(j+1-i)+i`）。要获得 i 和 j 之间但不包括 j 的随机数，请执行`nextInt(j-i)+i`.

API 参考：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)

# php - 将html内容作为值插入mysql数据库？

> ID：15607313
> 
> 赞同：-1
> 
> 时间：2013-03-25T03:48:25.200
> 
> 标签：php, html, mysql

有人可以帮忙吗，我想在数据库中插入一些带有换行符的html文本作为值，但是当我添加换行符时会导致查询失败，我认为这是因为mysql不支持html换行符

有人可以告诉我一种方法，我可以用换行符保持我的文本结构并让查询正常工作，谢谢。

给我带来麻烦的价值是“内容”。

```
$query="INSERT INTO ptb_messages (id,
from_user_id, to_user_id, subject, content)
VALUES('NULL',
'1',
'".$_SESSION['user_id']."',
'Welcome...',
'Hi There :D,<br/><br/>
Welcome to your brand new, sparkling profile. We're so excited to have you with us! We just wanted to check in on you to see how you were getting on, and to let you know that if you have any questions or comments for us then please do not hesitate to get in touch at Support@fixstructure.com.<br/><br/>
fixstructure.com is a fun, friendly and clean community, please help us keep it this way. We want you to enjoy your new profile to the maximum but there are a few do's and dont's, for more information checkout our Terms and User Policy under the help link in your Account Settings menu.<br/><br/>
That's pretty much everything, so thanks once again for joining the fixstructure.com community and we look forward to seeing more of you and watching your new profile grow in the future.<br/><br/>Regards,<br/>The fixstructure Team'
)";
mysql_query($query) or die('error'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:56:46.543

**将您的内容放入变量中，例如**

`$content = "Hi There :D,<br/><br/> Welcome to your brand new, sparkling profile. We\'re so excited to have you with us! We just wanted to check in on you to see how you were getting on, and to let you know that if you have any questions or comments for us then please do not hesitate to get in touch at Support@fixstructure.com.<br/><br/> fixstructure.com is a fun, friendly and clean community, please help us keep it this way. We want you to enjoy your new profile to the maximum but there are a few do\'s and dont's, for more information checkout our Terms and User Policy under the help link in your Account Settings menu.<br/><br/> That\'s pretty much everything, so thanks once again for joining the fixstructure.com community and we look forward to seeing more of you and watching your new profile grow in the future.<br/><br/>Regards,<br/>The fixstructure Team";`

**然后打电话**

`$res=addslashes($content);`

您现在可以在列`$res`的插入语句中用作值`content`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T03:51:44.723

转义单引号..并且还可以互换使用您的`""`和`''`。

```
 $query='INSERT INTO ptb_messages (id,
from_user_id, to_user_id, subject, content)
VALUES("NULL",
"1",
"'.$_SESSION['user_id'].'",
"Welcome...",
"Hi There :D,<br/><br/>
Welcome to your brand new, sparkling profile. We\'re so excited to have you with us! We just wanted to check in on you to see how you were getting on, and to let you know that if you have any questions or comments for us then please do not hesitate to get in touch at Support@fixstructure.com.<br/><br/>
fixstructure.com is a fun, friendly and clean community, please help us keep it this way. We want you to enjoy your new profile to the maximum but there are a few do\'s and dont\'s, for more information checkout our Terms and User Policy under the help link in your Account Settings menu.<br/><br/>
That\'s pretty much everything, so thanks once again for joining the fixstructure.com community and we look forward to seeing more of you and watching your new profile grow in the future.<br/><br/>Regards,<br/>The fixstructure Team"
)';
mysql_query($query) or die('error'); 
```

# powershell - runas.exe 和 Start-Process -Credential 之间的区别

> ID：15607315
> 
> 赞同：10
> 
> 时间：2013-03-25T03:48:44.257
> 
> 标签：powershell, active-directory

我正在尝试在客户端网络上的 vpn 上设置一些脚本。此客户端通常在其网络上分配一个 ActiveDirectory 帐户并使用它来管理权限（例如，对数据库）。好的，这是有道理的。

但这里有一些让我感到困惑的事情：

```
start-process runas.exe "/user:CLIENTDOMAIN\George.Mauer /netonly W:\tools\LINQPad4\LINQPad.exe 
```

查询密码并运行良好（我可以访问数据库）

**但**

```
Start-Process W:\tools\LINQPad4\LINQPad.exe -Credential (Get-Credential) 
```

在弹出提示中输入`CLIENTDOMAIN\George.Mauer`和我的密码总是会导致错误

```
Start-Process : This command cannot be run due to the error: The user name or password is incorrect. 
```

这些不是一回事吗？`runas`和有什么区别`-Credential`？还有一个次要问题 - 我如何`Start-Job`使用我的`CLIENTDOMAIN\George.Mauer`凭证？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T02:21:25.990

`/netonly`以当前用户身份运行该过程，并且仅使用其他凭据进行网络连接。

`Start-Process`将使用其他凭据运行该进程（及其所有网络连接）。没有办法`/NETONLY`用`Start-Process`.

您必须 p/invoke Win32 API 才能实现 /NETONLY 功能。如果您准备好进行练习，这是您需要使用的 API `LOGON_NETCREDENTIALS_ONLY`：

[http://www.pinvoke.net/default.aspx/advapi32/createprocesswithlogonw.html](http://www.pinvoke.net/default.aspx/advapi32/createprocesswithlogonw.html)

更多资源：

*   [示例代码`LOGON_NETCREDENTIALS_ONLY`](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/580e2d48-8dc6-4c37-ba98-caf5c1f2a5e8/)
*   [CreateProcessWithTokenW 函数](http://msdn.microsoft.com/en-us/library/ms682434%28VS.85%29.aspx)

以其他用户身份运行作业：

```
Start-Job -ScriptBlock {whoami} -Credential (get-credential) | Wait-Job | Receive-Job 
```

# php - 不显示回显消息

> ID：15607320
> 
> 赞同：-2
> 
> 时间：2013-03-25T03:49:17.527
> 
> 标签：php

如果它是质数，我不确定为什么我没有得到回声

```
$numPrime = 2;

function Number($numPrime)
{
    for($numPrime = 0; $numPrime < 100; $numPrime++)
    {
        if($numPrime == TRUE)
        {
            echo("TRUE");
        }else{
            echo("FALSE");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T03:53:04.213

你想要这样的东西

```
for($i = 2; $i < $num; $i++) {
    if($num % $i == 0) {
        echo "false";
    }
}
echo "true"; 
```

# ios - iOS：为什么这里有两个图形上下文和一个额外的内存副本？

> ID：15607321
> 
> 赞同：0
> 
> 时间：2013-03-25T03:49:21.923
> 
> 标签：ios, optimization, bitmap

我发现了许多如何将 int 数组 blit 到`UIView`in的示例`drawRect`，但最简单的一个仍然让我感到困惑。这工作正常，但仍然有三个问题：

~ 为什么有两个上下文？

〜为什么`push`/`pop`上下文？

~ 可以避免复制吗？*（[苹果文档](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGBitmapContext/Reference/reference.html%20Apple%20docs)说 CGBitmapContextCreateImage 复制内存块）*

```
- (void)drawRect:(CGRect)rect {
    CGColorSpaceRef color = CGColorSpaceCreateDeviceRGB();
    int PIX[9] = {  0xff00ffff,0xff0000ff,0xff00ff00,
                        0xff0000ff,0xff00ffff,0xff0000ff,
                        0xff00ff00,0xff0000ff,0xff00ffff};
    CGContextRef context = CGBitmapContextCreate((void*)PIX,3,3,8,4*3,color,kCGImageAlphaPremultipliedLast);
    UIGraphicsPushContext(context);
    CGImageRef image = CGBitmapContextCreateImage(context);
    UIGraphicsPopContext();
    CGContextRelease(context);
    CGColorSpaceRelease(color);
    CGContextRef c=UIGraphicsGetCurrentContext();
    CGContextDrawImage(c, CGRectMake(0, 0, 10, 10), image);
    CGImageRelease(image);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:38:15.430

该方法将数组绘制为 3x3 大小的图像，然后在当前上下文中将该图像绘制为 10x10 大小，在这种情况下将是您`UIView`的`CALayer`.

`UIGraphicsPushContext`让您设置`CGContext`当前*正在*绘制的对象。因此，在第一次调用之前，您的当前`CGContext`是`UIView`，然后您推送新`CGContext`的，即正在绘制的图像。

该`UIGraphicsPopContext`调用恢复*先前*的上下文，即`UIView`，然后您获得对该上下文的引用，并使用以下行将创建的图像绘制到它：

```
CGContextDrawImage(c, CGRectMake(0, 0, 10, 10), image); 
```

至于避免复制操作，文档说它有时是写入时的副本，但他们没有指定这些条件何时发生：

`The CGImage object returned by this function is created by a copy operation. Subsequent changes to the bitmap graphics context do not affect the contents of the returned image. In some cases the copy operation actually follows copy-on-write semantics, so that the actual physical copy of the bits occur only if the underlying data in the bitmap graphics context is modified. As a consequence, you may want to use the resulting image and release it before you perform additional drawing into the bitmap graphics context. In this way, you can avoid the actual physical copy of the data.`

# android - 用线敲击视图

> ID：15607325
> 
> 赞同：-4
> 
> 时间：2013-03-25T03:49:50.277
> 
> 标签：android, android-layout, listview

我想实现一条水平线，在 ListView 内打击整个视图，所以我给出了在 listview 中打击整个元素的效果。

我怎样才能做到这一点？我已经找到了如何在视图下方划一条线，但不是在它上方。

![正常状态视图和已击中视图的示例](../Images/907b27325437a5b7fa126ef95336848c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:00:47.850

这将在您的视图上创建一条删除线

```
 <View
          android:id="@+id/View_Strike"
              android:layout_width="match_parent"
              android:layout_below="@id/Layout_myRow"
              android:layout_height="1dp"
              android:background="@android:color/white" /> 
```

现在您正在为您的**listview设计****行布局**。以这样的方式放置上面的视图，使其在行布局中的所需位置与**文本视图重叠**

 ****并设置其`visibility Gone`

现在取决于你必须击穿你的物品的情况`Visibility Visible`

当然是解决方案！我在我的一个应用程序中使用过它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:03:15.073

不要认为有一个标准的快速方法来做这样的事情，但你总是可以创建一个`fill_parent`宽度和`1dp`高度的视图，并让整个视图相对于它的父级居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T04:43:38.460

使您的客户视图像图像一样，并`visible` `invisible`根据您对当前的要求进行制作`view`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T18:07:23.273

我找到了答案，如果有人觉得这很有用：

创建一个FrameLayout，在里面我把LinearLayout（和我的TextViews）放在里面，然后是一个高度= 1dp width=fill_parent和中心重心的视图。

FrameLayout 实际上是为了制作多层视图而创建的，所以它是完美的。

同样对于详细信息，在 listAdapter 中，我使视图可见或消失。****

# iphone - 如何检测类的属性何时更改

> ID：15607326
> 
> 赞同：0
> 
> 时间：2013-03-25T03:49:50.660
> 
> 标签：iphone, ios, objective-c, ipad, cocoa-touch

更改 a 的框架时`UIView`，您有两个选择。第一种是将 a`CGRect`作为参数传递`setFrame`给视图的函数。另一种是设置`view.frame`等于`CGRect`。

```
1) [view setFrame:frame];
2) view.frame = frame; 
```

当使用`setFrame`a 的功能时`UIView`，视图很容易检测到它应该改变它的框架。但是，当简单地更改属性 ( `view.frame`) 时，**视图如何检测到其框架已更改**（因为视图的框架会立即更新）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T03:56:00.660

`view.frame = frame`等于`[view setFrame:frame]`。使用 dot 方法设置属性与使用`setXXX:XXX`. 您可以将 a`NSLog`放入`setXXX:`，然后调用`obj.XXX = XXX;`并检查控制台以查看是否`NSLog`已打印。

**例子：-**

```
view.frame = frame; //If you set frame like this then

-(void)setFrame:(CGRect)frame
{
    //this will be call
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T04:14:55.537

这就是 Objective-C 2.0 附带的点符号。它们主要用于获取和设置属性。

获取属性：`view.frame`. 设置一个属性：`view.frame = frame`。

但它们只是另一种方式或更简单的方式（[语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)）来编写：`[view frame]`和`[view setFrame:frame]`。

这就是它们的全部内容，它们只是被翻译成简单的旧 Objective-C 消息。事实上，由于它们只是被翻译成消息，请尝试以下操作：

```
view.setNeedsDisplay; 
```

请注意，这`setNeedsDisplay`不是实际财产，但由于它已翻译为`[view setNeedsDisplay]`，因此可以使用！按照惯例，点表示法仅用于获取和设置属性，所以我不建议使用类似`view.setNeedsDisplay`.

# ajax - 如何将此 IE AJAX 代码转换为有效的 jQuery AJAX 调用？

> ID：15607330
> 
> 赞同：0
> 
> 时间：2013-03-25T03:50:09.367
> 
> 标签：ajax, jquery

我正在尝试调用一个接受 JSON 并以 JSON 响应的 .NET API。

我有一个 JavaScript 示例，它仅适用于 IE。

但是当我尝试将代码转换为 jQuery / AJAX 调用时，我无法使其工作。

我已经尝试了所有我能想到的参数组合，但没有成功。

这是有效的 IE 代码。

```
<script language="javascript" type="text/javascript">
var xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");

function callService() {
    var url = "http://hrdtssiw01:8700/JsonWCF/DoJsonWork"; //use this url on RDN server for access.
    var body = '{"LevelOneString":"hello world","LevelTwoClass":{"LevelThreeClass":{"LevelThreeString":"Hello Level Three"},"LevelTwoString":"Hello Level Two"}}';

    xmlHttp.open("POST", url, true);
    xmlHttp.setRequestHeader("Content-type", "application/json");
    xmlHttp.send(body);
}

// Create result handler
xmlHttp.onreadystatechange = function () {
    if (xmlHttp.readyState == 4) {
        alert('working!!!!');
        document.getElementById("Text1").value = xmlHttp.responseText;
    }
}
</script> 
```

这是jQuery代码......

```
<script>
function callAjax() {
    jQuery.support.cors = true;
    var temp_url = 'http://hrdtssiw01:8700/JsonWCF/DoJsonWork';
    var temp_data = '{"LevelOneString":"hello world","LevelTwoClass":{"LevelThreeClass":{"LevelThreeString":"Hello Level Three"},"LevelTwoString":"Hello Level Two"}}';

    $.ajax(temp_url,
        {
        'type': 'POST',
        'data': temp_data,
        'dataType': 'json',
        'processData': false,
        //'contentType': 'application/json; charset=utf-8',
        'headers': {'contentType':'application/json'},     
        'success': function(data) { alert('data: ' + data); },
        'error': function (xhr, ajaxOptions, thrownError) {
            alert(xhr.status);
            alert(thrownError);
         }
    });
}

$(document).ready(function() {
    $('#thebutton').click(function() { callAjax(); return false;});
});

</script> 
```

在 jQuery 示例中，我将 contentType 注释掉了。

如果我包含 contentType，则请求将作为 JSON 发送，但未设置正文。如果我注释掉 contentType，则正文设置正确，但 contenType 设置为默认值。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:01:30.440

如果你使用跨域请求，你需要使用支持CORS的浏览器（IE不支持），然后尝试

```
$.ajax(temp_url, {
    'type' : 'POST',
    'data' : temp_data,
    'dataType' : 'json',
    'processData' : false,
    'contentType' : 'application/json',
    'success' : function(data) {
        alert('data: ' + data);
    },
    'error' : function(xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:52:51.253

该`data`对象应该是一个对象，除非服务器端正在解码 json。尝试更改为

```
var temp_data = {"LevelOneString":"hello world","LevelTwoClass":{"LevelThreeClass":{"LevelThreeString":"Hello Level Three"},"LevelTwoString":"Hello Level Two"}}; 
```

# button - 信息按钮 (i)

> ID：15607333
> 
> 赞同：0
> 
> 时间：2013-03-25T03:50:58.547
> 
> 标签：button, kendo-ui

我正在尝试创建一个信息按钮（中间带有 i 的圆形按钮）以显示在导航栏的右侧。我在 KendoUI 移动部分的演示页面中看到了示例，并且在某些屏幕的右侧看到了一个显示“索引”的按钮。我不想显示一个带有文本的按钮，而是显示信息按钮。我可以命名该类并显示该信息按钮的 KendoUI 框架的那部分吗？如果没有，如果我有图像，我怎么能把它放在一个按钮中，并且它在 iOS、Android 和 Windows 手机中看起来不错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:28:29.997

在 Kendo UI 移动框架本身中是可能的。

如果您想在导航栏中使用“信息按钮”，那么您应该使用“详细信息按钮”概念。

看下面的代码

```
......
<div data-role="navbar">
     <a data-role="detailbutton" data-icon="info" title="info button"></a>
</div>
..... 
```

如您所说，它将显示一个按钮。（圆形按钮，中间有一个“i”符号）

它适用于 Kendo UI 支持的所有平台

# css - 如果内容被删除，Chrome 会使用 :after 添加到 contenteditable span；漏洞？

> ID：15607336
> 
> 赞同：5
> 
> 时间：2013-03-25T03:51:13.700
> 
> 标签：css, google-chrome, contenteditable

以下功能是 Chrome 中的错误，还是我不理解的正确行为？

在 Chrome（第 25 版）中，如果我有一个内容可编辑跨度，其后通过 :after css 类添加了一个节点，就像在这个 jsfiddle

[http://jsfiddle.net/yQBvn/](http://jsfiddle.net/yQBvn/)

如果我删除了跨度的所有内容，在我删除最后一个字符之后，Chrome 会`<br>`在内容可编辑跨度中添加一个。这感觉不对。

如果没有添加 :after css 内容，我已经验证 Chrome 不会执行此操作，并且我已验证 Firefox 在任何情况下都不会执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T04:25:39.267

想看一些疯狂的东西吗？！

[http://jsfiddle.net/joeframbach/VXMEN/](http://jsfiddle.net/joeframbach/VXMEN/)

```
<body>
<div id="EDIT-AREA">
    <span class='CHARACTER-NAME' contenteditable='true'>Bob</span><span>&nbsp;</span>
</div>
</body> 
```

在解决问题后添加一个带空格的跨度。不要问我为什么或如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T09:45:51.817

Firefox 也使用带有 contenteditable 的 DIV 来执行此操作

删除内容可编辑和 bam br 标记中的所有内容。

从一个空的 CE 开始，聚焦和命中空间，bam br

上面直接在 div 之后使用空元素的解决方案什么都不做，有或没有像 :after 这样的伪元素。

跨度有效吗？

铬未经测试。

# algorithm - 这个在图中找到最大独立集的算法是否正确？

> ID：15607337
> 
> 赞同：2
> 
> 时间：2013-03-25T03:51:21.550
> 
> 标签：algorithm, graph, set, pseudocode, subset

我们有以下算法输入：

一个`G`没有循环的图（又名生成树），其中每个节点都有一个相关的权重。

我想找到一个独立的集合`S`，这样：

*   没有两个元素`S`形成边`G`
*   没有其他可能的子集满足上述条件，其权重大于`S[0] + S[1] + ... + S[n-1]` (where `len(S)==n`)。

这是我到目前为止的高级伪代码：

```
MaxWeightNodes(SpanningTree S):
    output = {0}
    While(length(S)):
        o = max(node in S)
        output = output (union) o
        S = S \ (o + adjacentNodes(o))
    End While
    Return output 
```

有人可以告诉我我是否犯了任何错误，或者这个算法是否会给我想要的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T04:07:00.010

该算法无效，因为您很快就会遇到这样一种情况，即排除初始最大值的相邻节点可能是最佳局部解决方案，但不是最佳全局决策。

例如`output = []`：

```
 10
      /    \
   100      20
   /  \    /  \
  80  90  10   30 
```

`output = [100]`：

```
 x
      /    \
     x      20
   /  \    /  \
  x    x  10   30 
```

`output = [100, 30]`：

```
 x
      /    \
     x      x
   /  \    /  \
  x    x  10   x 
```

`output = [100, 30, 10]`：

```
 x
      /    \
     x      x
   /  \    /  \
  x    x  x    x 
```

虽然我们知道有更好的解决方案。

这意味着您使用贪心算法，没有[最佳子结构](http://en.wikipedia.org/wiki/Optimal_substructure)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T05:44:12.177

我认为顶点的权重使贪婪的解决方案变得困难。如果所有权重都相等，您可以尝试选择树的一组级别（这显然对于完整的 k-ary 树来说是最简单的，但生成树通常不属于该类）。也许将级别视为具有组合权重的贪婪近似会很有用，因为您始终可以选择树的同一级别的所有顶点（与您根植于哪个顶点无关）进入相同的独立放; 同一级别的两个顶点之间不能有边。我没有提供解决方案，因为这对我来说似乎是一个难题。主要问题似乎是权重以及您不能假设您正在处理完整的树这一事实。

编辑：实际上，总是选择一个级别的所有顶点似乎也是一个坏主意，因为鲁本斯的例子有助于形象化；想象他的树右侧第二层的顶点的权重为 200。

# jquery - 如何使用 jQuery 创建按钮并为其附加事件？- HTML5+jQuery

> ID：15607342
> 
> 赞同：0
> 
> 时间：2013-03-25T03:51:49.780
> 
> 标签：jquery, html, button

我正在尝试制作一个 HTML5 太空射击游戏，当玩家输了时，应该创建一个继续按钮。我实际上是在使用画布绘制一个矩形并为其添加一个事件侦听器：

```
 if (!alive) {
  ctx.fillText('Game Over!', 245, height / 2);
  ctx.fillText('Lost times:'+lostTimes, 245, height / 2+100);
  ctx.fillRect((width / 2) - 53, (height / 2) + 10,100,40);
  ctx.fillStyle = '#000';
  ctx.fillText('Continue?', 252, (height / 2) + 35);
  canvas.addEventListener('click', continueButton, false);
  } 
```

但我想改用 jQuery。我检查了 jQuery 文档，但是关于按钮的所有内容都是为了将​​事件添加到 HTML 文件中已经存在的 HTML 元素。我需要的是在满足特定条件时动态创建按钮（在这种情况下为alive == false），并且我还必须指示按钮的位置。有谁知道该怎么做？

# java - 我们如何通过 java 中的 onkeypress 事件创建一个文本字段作为自动完成

> ID：15607344
> 
> 赞同：-3
> 
> 时间：2013-03-25T03:52:13.580
> 
> 标签：java, mysql, jdbc, autocomplete, textfield

我们如何在 java 中通过 onkeypress evnet 创建文本字段作为自动完成，因为数据库是 Mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:57:11.030

您应该使用`DocumentFilter`（感谢 MadProgrammer）而不是`KeyListener`. 前者更可靠，更容易处理。

此外，`JTextField`您应该使用 a`JComboBox`而不是在用户开始输入后显示下拉菜单。

现在我不会努力为您创建一些代码，因为您没有表现出提出问题的努力。

继续阅读：

*   [文档过滤器](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)
*   [组合框](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)

# macos - 升级到 OSX10.8 和 XCode 4 后 Interface Builder 占用 100% cpu

> ID：15607345
> 
> 赞同：1
> 
> 时间：2013-03-25T03:52:13.793
> 
> 标签：macos, interface-builder, xcode3to4

我刚刚将我的 MacOSX 从 Snow Leopard 升级到了 Mountain Lion。我的 XCode 之前的版本是 3，MacOSX 升级后，我也安装了 XCode 4。

但是，当我尝试使用新的 XCode 开发类似 helloworld 的 iphone 应用程序时，我遇到了这个问题。界面生成器进程占用 100% cpu 并且从不响应。所以现在我不能在这台电脑上做任何开发工作。

我重新启动了mac，问题仍然存在。

有谁知道为什么我无法成功启动 Interface Builder？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:54:12.543

你有足够的内存来同时运行 10.8 和 Xcode 吗？我建议杀死后台程序或升级你的 Mac，因为 Xcode 从不使用那种资源。

# regex - 如何为我的字符串编写正则表达式？

> ID：15607353
> 
> 赞同：-1
> 
> 时间：2013-03-25T03:53:11.270
> 
> 标签：regex

我有以下字符串：

```
//- item:type /path/to/file/file.js flag 
```

如何编写正则表达式来获取项目、file.js 的完整路径和标志（可选）？

**编辑**：在javascript中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:00:21.493

```
^//- ([^:]*):[^ ]* (.*\.[^ ]*) ?(.*) 
```

在 JavaScript 中：

```
"//- item:type /path/to/file/file.js flag".replace(/^\/\/- ([^:]*):[^ ]* (.*\.[^ ]*) ?(.*)/, "$1||$2||$3").split("||") 
```

或者

```
var pattern = /^\/\/- ([^:]*):[^ ]* (.*\.[^ ]*) ?(.*)/
var str = "//- item:type /path/to/file/file.js flag"
var match = pattern.exec(str);
if (match) {
    var item = match[1];
    var path = match[2];
    var flag = match[3];
} 
```

请注意，对象内的索引`match`是组号（0 是整个匹配，1 和更高是按出现顺序的每个带括号的匹配）

# java - 在什么时候定义变量比进行方法调用更有效？

> ID：15607356
> 
> 赞同：2
> 
> 时间：2013-03-25T03:53:16.297
> 
> 标签：java, android, performance, optimization

我正在阅读[Google 关于 Android 优化的提示](http://developer.android.com/training/articles/perf-tips.html)，他们提出的第一点是您应该避免使用短期变量，因为这意味着更多的垃圾收集。那么，有没有一点你会更好地定义一个变量并使用它而不是每次你想使用该对象时调用一个访问器？说这个：

```
for(int i = 0; i < 1000; i++) {
    foo.getBar() // then do something with it
} 
```

与此相反：

```
Bar bar = foo.getBar();
for(int i = 0; i < 1000; i++) {
    bar // then do something with it
} 
```

性能方面有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T04:18:12.817

从您提供的链接中：“您应该避免创建不需要的对象实例”

1.  对象实例！=短期变量
2.  不要忘记句子的第二部分...

局部变量通常[在堆栈上分配](https://stackoverflow.com/a/3646675/1057429)（GC 无关紧要），而新的对象实例将在堆上分配 - 这是一个完全不同的故事。TMHO 说“如果你真的不需要，就不要做某事”这样的话没有什么价值。此外，尽可能避免创建局部变量可能会对您的代码产生非常糟糕的影响，请[**阅读此**](http://www.ibm.com/developerworks/java/library/j-jtp01246/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T03:57:10.977

*假设没有编译器优化*

当你使用

```
for(int i = 0; i < 1000; i++) {
    foo.getBar() // then do something with it
} 
```

您的代码将转到由 引用的实例`foo`，执行其`getBar()`方法，然后该方法将返回它应该返回的任何实例/值。这将针对该循环的 1000 次执行中的每一次执行。每次执行完成后，返回的值`getBar()`都必须被垃圾回收。

但是，当您使用：

```
Bar bar = foo.getBar();
for(int i = 0; i < 1000; i++) {
    bar // then do something with it
} 
```

您`foo.getBar()`只获得一次的值，在循环之外并在本地存储它的副本。然后在循环中使用此本地副本 1000 次。

第二个选项更有效，因为您的`foo`实例的`getBar()`方法只被调用一次，而不是一千次。这意味着您不会将`getBar()`方法中的代码执行 1000 次，这显然比执行一次更糟糕。

这些都是真正的微观优化。除非您正在做一些真正的繁重工作`getBar()`，否则这不会产生明显的效果。在很多情况下，编译器优化会将这两个转换为完全相同的字节码，因此您无论如何都不必担心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T03:59:50.430

在这个例子中，假设 bar 只是一个由 getBar 返回的对象并且没有被创建，就 GC 而言没有区别。

但是，方法调用的开销也很小，您的第二个示例将更有效。

但是，如果 getBar 在每次调用时创建一个新对象，则将创建 1000 个新 Bar，然后在第二个示例中进行 GC，而第一个保持不变。

# javascript - (HTML5) 使用多个 png sprite 制作动画，它们会相互重叠

> ID：15607357
> 
> 赞同：1
> 
> 时间：2013-03-25T03:53:16.367
> 
> 标签：javascript, animation, canvas, sprite, mask

我对html5游戏制作非常陌生。最近我正在制作一个游戏，其中包含一些使用 png sprite 的动画。

[http://i.imgur.com/MZrpq9j.png](http://i.imgur.com/MZrpq9j.png)

我有一个背景，我尝试使用这个精灵来掩盖它，我试图使用 getImageData() 和 putImageData() 只显示精灵每一帧的圆圈部分，一切都很酷，直到我尝试制作另一个“圆圈” “靠近第一个。

**问题是如果精灵表相互重叠，我不能同时让两个“圆圈”动画......这是我项目的开始，最终目标就像在随机位置制作 100 个“圆圈”。**

**那么有没有一种方法可以使用这个精灵表制作动画圆圈，即使有几个相互重叠的“圆圈”也只在圆圈部分显示背景？**

对不起，我的英语不好，我尽力描述这个问题......任何建议都会很棒，如果需要，我可以详细说明这个问题！谢谢！！

PS：我在发帖前尝试过做功课，我能找到的最接近的参考是[http://simonsarris.com/blog/140-canvas-moving-selectable-shapes](http://simonsarris.com/blog/140-canvas-moving-selectable-shapes)，但我不知道如何应用这个概念我的案例中的“幽灵画布”..

# ios - 使用 AFNetworking 和 AFHTTPClient 通过 API 运行许多 URL - 我做错了什么？

> ID：15607358
> 
> 赞同：0
> 
> 时间：2013-03-25T03:53:35.003
> 
> 标签：ios, objective-c, xcode, ios6, afnetworking

[我正在尝试通过Clear Read API](http://api.thequeue.org/v1/)运行一堆 URL （基本上是从 URL 中提取文章部分），并且我正在使用[AFNetworking Library](https://github.com/AFNetworking/AFNetworking)。

我有一个`AFClearReadClient`类，它是`AFHTTPClient`我用来简化与 API 交互的子类。在那里我设置了基本 URL，事实上它是一个 JSON 请求。

```
#import "AFClearReadClient.h"
#import "AFJSONRequestOperation.h"

@implementation AFClearReadClient

+ (AFClearReadClient *)sharedClient {
    static AFClearReadClient *sharedClient = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedClient = [[AFClearReadClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://api.thequeue.org/v1/clear?url=&format="]];
    });

    return sharedClient;
}

- (id)initWithBaseURL:(NSURL *)url {
    if (self = [super initWithBaseURL:url]) {
        [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
        [self setDefaultHeader:@"Accept" value:@"application/json"];
    }

    return self;
} 
```

然后我有一个存储在`NSDictionary`我循环的文章列表，获取每篇文章的 URL，从中为即将发生的请求制作参数（参数是 GET 变量及其在基本 URL 中的值，对吗？），然后创建请求，并将其添加到包含所有请求的数组中。

然后我将它们批量入队（我认为我做的不对）。这会创建每个请求并将其排入队列，从而将它们置于被执行的过程中，对吧？但是我在progressBlock 中做什么呢？我无权访问返回的 JSON（似乎本地变量只是`NSUIntegers`），所以我无法做我想做的事情（保存返回的文章文本）。

```
- (void)addArticlesToQueueFromList:(NSDictionary *)articles {
    // Create an array to hold all of our requests to make
    NSMutableArray *requests = [[NSMutableArray alloc] init];

    for (NSString *key in articles) {
        NSString *articleURL = [[articles objectForKey:key] objectForKey:@"resolved_url"];
        NSDictionary *requestParameters = @{@"url": articleURL,
                                            @"format": @"json"};

        NSMutableURLRequest *request = [[AFClearReadClient sharedClient] requestWithMethod:@"GET" path:nil parameters:requestParameters];
        [requests addObject:request];
    }

//  [[AFClearReadClient sharedClient] setMaxConcurrentOperationCount:5];
    [[AFClearReadClient sharedClient] enqueueBatchOfHTTPRequestOperationsWithRequests:[requests copy] progressBlock:^(NSUInteger numberOfFinishedOperations, NSUInteger totalNumberOfOperations) {

    } completionBlock:^(NSArray *operations) {

    }];
} 
```

另外，我不确定我应该如何使用该`setMaxConcurrentOperationCount:`方法。应该在`AFClearReadClient`课堂上做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:33:04.057

首先，您是在排队请求，而不是 requestOperations - 这是有区别的。注意函数的名称 (enqueueBatchOfHTTPRequestOperations)。在请求步骤之前你没问题 - 然后你需要创建一个 AFJSONRequestOperation。因此，一旦您收到请求，请执行以下操作：

```
AFJSONRequestOperation *requestOperation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request 
 success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON){ ...this is your success block...} 
 failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON){ ...this is your failure block...}]; 
```

现在你有一个 requestOperation ，你可以继续排队，它应该可以工作。

# objective-c - Facebook Graph API 获取用户墙数据 Objective C

> ID：15607360
> 
> 赞同：0
> 
> 时间：2013-03-25T03:53:57.980
> 
> 标签：objective-c, facebook-graph-api

我需要检索用户墙帖。我有以下代码，但结果只检索用户的信息，如其名称、关于、喜欢等。没有关于其墙的数据。

```
FBRequest *request = [FBRequest requestForGraphPath:[NSString stringWithFormat:
@"https://graph.facebook.com/wanamaoficial/feed?access_token=%@",
FBSession.activeSession.accessTokenData.accessToken]]; 

[request startWithCompletionHandler:
   ^(FBRequestConnection *connection, NSDictionary<FBGraphObject> *user, NSError *error) {
      if (!error) {
          NSLog(@"data2 %@",user);
      }
   }]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T08:06:59.970

我认为这就是您想要的（即没有“graph.facebook.com”，因为它隐含在查询中）：

`FBRequest *request = [FBRequest requestForGraphPath:[NSString stringWithFormat: @"wanamaoficial/feed?access_token=%@", FBSession.activeSession.accessTokenData.accessToken]];`

# python - NoneType 类型的对象没有 len

> ID：15607361
> 
> 赞同：1
> 
> 时间：2013-03-25T03:54:00.073
> 
> 标签：python, python-2.7

```
def medianeven (L):
    while len(L) > 2:
        L = L[1:(len(L)-1)]
    return average (L)

def medianodd (L):
    while len(L) > 1:
        L = L[1:(len(L)-1)]
    return L[0]

def median (L):
    new = L.sort()
    a = len(new)
    if a % 2 == 0:
        medianeven(new)
    else:
        medianodd(new) 
```

它说`TypeError: object of type 'NoneType' has no len()`。两者都`medianeven`可以`medianodd`工作，但`median`本身不能正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T03:56:52.907

`.sort()`就地并返回`None`。

更改此行：

```
new = L.sort() 
```

仅此：

```
L.sort() 
```

`new`并用 just替换您的所有实例`L`。您还需要`return`这些函数调用的结果：

```
if a % 2 == 0:
    return medianeven(new)
else:
    return medianodd(new) 
```

此外，Python 的切片支持负索引，所以这段代码：

```
L[1:(len(L)-1)] 
```

可以简化为

```
L[1:-1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T03:58:16.113

您在该行中调用的 sort() 方法：

```
new = L.sort(); 
```

不返回任何东西。因此'new' 持有'None'，它没有长度。我相信做 L.sort() 将对列表进行适当的排序。不需要将其存储在“新”中。

# xpages - 重复的fileDownload 控件每个显示相同的文件列表？

> ID：15607362
> 
> 赞同：0
> 
> 时间：2013-03-25T03:54:07.490
> 
> 标签：xpages, xpinc

我正在使用 xpages (8.5.3 FP3 UP1) 创建一个学生作业提交应用程序。详情如下：

1.  学生可以进行任意数量的提交。对于每个提交，将创建一个唯一的 SubmitID。目前，

    一个。表单（提交） - 仅 2 个字段（SubmitID，SoftCopy-RTF 类型）

    湾。视图（提交） - 仅 2 列（提交 ID、附件名称）

    C。SubmitID 的示例有：submit1、submit2

2.  对于每次提交，学生必须选择提交的课程/科目（例如：数学、物理等）。因此我已经为老师创建了另一个表格来创建主题列表

    一个。表格（主题） - 仅 1 个字段（主题名称）

    湾。视图（主题） - 仅 1 列（主题名称）

    C。现在说 2 个科目已创建 - 数学和物理

3.  我创建了 2 个 xpage：

    一个。Submit.xsp - 创建新的提交（使用表单 - 提交）

    湾。SubmitView.xsp - 显示提交列表（使用视图 - 提交）

4.  对于 Submit.xsp，这是我的问题开始的地方：

    一个。这里的控件如下：SubmitID EditBox，Repeat Control（里面是一个CheckBox，一个fileUpload，一个fileDownload）

    湾。重复基于可用主题列表。CheckBox 标题将是每个 SubjectName。在 fileUpload 控件的 OnChange 事件中，每次浏览文件后，都会选中该复选框并且这有效。

    C。fileUpload 应该只更新随附的 fileDownload，但我刚刚上传的附件会反映到所有其他 fileDownload 控件。我正在对 fileUpload OnChange 进行全面刷新，因为这是更新 fileDownload 的唯一方法。这里有什么问题，我应该怎么做才能得到我想要的结果？保存文档并稍后以只读或编辑模式打开它都很好，尽管每个主题仍然显示相同的上传文件列表。fileUpload 和 fileDownload 都绑定到 SoftCopy 字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T06:54:20.973

除非我没有正确解释您的描述，否则您将多个上传/下载控件绑定到同一个项目（“SoftCopy”）。因为这些控件始终绑定到一个项目，而不是彼此绑定，所以下载控件将显示存储在源项目中的任何附件，无论它们是如何到达那里的。要将下载控件中的附件显示限制为通过特定上传控件发送的附件，它们必须存储在该对的唯一项目中。

例如，如果每一对都绑定到特定主题的项目，例如“SoftCopy_Maths”或“SoftCopy_Physics”，那么每次下载将仅显示存储在该特定项目中的附件。您不知道将定义哪些主题，因此您无法在表单上定义这些字段，但这没关系……您不需要。NSF 没有模式，因此不需要在表单上定义字段以将控件绑定到它；该项目将在保存文档时创建，即使表单没有定义它。严格来说，甚至形式本身也不需要存在。

我们通常使用点语法将控件绑定到项目，例如`#{currentDocument.SoftCopy}`，但数组语法同样有效，例如`#{currentDocument["SoftCopy"]}`。因此，如果您将这些控件包装在将动态项名称建立为变量或属性的东西中，则可以使用数组语法来定位该动态项。执行此操作的两种最佳方法是数据上下文和自定义控件。

例如，您可以将重复的内容包围在面板中，并定义面板特定的 dataContext 将变量`attachmentItemName`与项目名称前缀和特定主题的连接关联起来。然后可以将您的上传和下载控件绑定到`#{currentDocument[attachmentItemName]}`.

或者，您可以将相同的内容移动到接受数据源和项目名称作为属性的自定义控件，在这种情况下，您的值绑定可能看起来像`#{compositeData.dataSource[compositeData.attachmentItemName]}`.

除了运行时性能的微小差异外，任何一种方法都同样有效。

# android - 从 LocationListener 获取位置更新不再起作用 Android

> ID：15607366
> 
> 赞同：0
> 
> 时间：2013-03-25T03:55:36.487
> 
> 标签：android, google-maps

所以，我目前正在开发一个基于地图的应用程序，并遵循大量教程来根据网络或 gps 提供商更新用户位置，但我更喜欢网络。像这样：

```
locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
    mlocListener = new CustomLocationListener();
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, mlocListener); 
```

我的 CustomLocationListener 类是这样的：

```
public class CustomLocationListener implements LocationListener {

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        System.out.println("Location Updated");
        userCoordinate = new LatLng(location.getLatitude(), location.getLongitude());
        // Move the camera instantly to kiel with a zoom of 15.
        map.moveCamera(CameraUpdateFactory.newLatLngZoom(userCoordinate, 14));

        // Zoom in, animating the camera.
        map.animateCamera(CameraUpdateFactory.zoomTo(14), 2000, null);
    }

    public void onProviderDisabled(String provider) {
        System.out.println("provider disabled");
        Toast.makeText(getBaseContext(), "GPS mode disabled", Toast.LENGTH_SHORT).show();
    }

    public void onProviderEnabled(String provider) {
        System.out.println("provider enabled");
        Toast.makeText(getBaseContext(), "GPS mode enabled", Toast.LENGTH_SHORT).show();
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {

    }

} 
```

当我编译它并在我的设备上运行时，你知道这很好用。它可以快速将相机聚焦在用户坐标当前位置上。但不知何故，有一天，当我在其他地方尝试我的设备时，它突然出现了！不再起作用了！

我尝试将我的项目恢复为我的 git 上的初始提交（当代码用于更新用户位置时），但它仍然不再起作用！

我尝试使用

```
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, mlocListener); 
```

但它仍然不再起作用了！为什么？为什么？为什么？

我在手机上打开谷歌的地图应用程序，这很正常！我不认为我的手机坏了！我不知道男人！索尼 XPERIA 米罗

请给我解决方案...我很困惑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:02:49.073

要测试您的手机是否损坏，请转到系统设置-> 定位服务并关闭除谷歌定位服务之外的所有内容。现在启动 Navigator 应用程序，看看该应用程序是否知道您在哪里。您可能不得不四处走动，因为第一个修复可能是最后一个已知位置。

# asp.net - asp.net，一个网站项目不能运行64位的dll

> ID：15607367
> 
> 赞同：1
> 
> 时间：2013-03-25T03:55:39.407
> 
> 标签：asp.net, visual-studio-2010, dll

我遇到了一个问题。

现在，我正在使用 Visual Studio 2010 创建一个网站项目（它不是 Web 应用程序。），我需要在这个项目中添加一个`.dll`由 Visual Studio 在 64 位平台下构建的文件，当我尝试构建这个项目时，我发生错误 说：

> 无法加载文件或程序集“XXXXXX”或其依赖项之一。试图加载格式不正确的程序。

我尝试了很多方法来解决这个错误，但它们都不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:25:19.900

我目前正在使用 VS 2008 的本地主机上使用这个 dll，为了让 dll 正常工作，我必须将它放在 C:\Windows\system 中并且它运行良好。但我担心将其传输到我的网络服务器，但一旦我的应用程序运行起来，我就会越过那座桥。希望这可以帮助

# javascript - 一种在没有 jQuery 的情况下将 XML 字符串转换为 JavaScript 对象的方法？

> ID：15607371
> 
> 赞同：0
> 
> 时间：2013-03-25T03:56:34.940
> 
> 标签：javascript, xml, object

有人知道如何在**不**使用 jQuery 或其他 DOM 库的情况下将有效的 XML 字符串转换为 JavaScript 对象吗？

我只想在 JavaScript 中这样做的原因是因为这都是服务器端的，与特定的浏览器没有任何关系。

再次强调——**这不是客户端 JavaScript**。它是服务器端的。

谢谢，

道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:24:23.363

我尝试查看 Webcrossing，但似乎他们没有该产品的在线文档。我想您必须付费才能获得文档，这有点令人惊讶，因为如今即使是商业产品也往往具有免费的在线文档-开发人员将如何评估产品？

如果您确实可以访问文档（由于您/您的雇主为此付费，您应该这样做），我建议您在文档中查找如何处理 XML。Webcrossing 声称具有内置的 XMLRPC 功能，这应该意味着内置的 XML 解析功能。

大多数内置此类东西的 javascript 引擎倾向于实现一个 DOM 解析器，它将 XML 转换为 DOM 对象。这样做的好处是您可以使用熟悉的 DOM 操作，如`getElementById()`、`getElementsByTagName()`等`element.children`来遍历和处理 XML 文档。这样做的缺点是需要使用上面冗长的 DOM 操作来遍历和处理 XML 文档。

但是，如果 Webcrossing 不提供内置的 XML 解析器（这不太可能，因为它支持 XMLRPC），那么下一个最佳选择是通过 node.js 模块进行移植。这里列出了一些与 XML 相关的模块：

[https://github.com/joyent/node/wiki/modules#wiki-parsers-xml](https://github.com/joyent/node/wiki/modules#wiki-parsers-xml)

上面的列表并不详尽。如需完整列表，您可以在此处搜索 npm 注册表：

[https://npmjs.org/](https://npmjs.org/)

从谷歌上的快速搜索来看，在我看来你最好的选择是移植这个模块（顺便说一下，它没有在 wiki 中列出）：

[https://github.com/nfarina/xmldoc](https://github.com/nfarina/xmldoc)

xmldoc 模块的独特之处在于它被设计为在节点和 Web 浏览器中工作。所以它可能有更好的机会被移植。

在任何情况下，请先通读您的文档（或联系 Webcrossing 的技术支持）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:16:50.693

我怀疑评论中的约翰·保罗·卡德纳斯 (John Paul Cardenas) 的片段是你最接近的。希望您能在您的特定服务器端环境中找到一个 DOM 库，我不熟悉您描述的平台。

假设您可以找到类似于 DOMParser 的东西（有关 JS 中 XML 解析的更多信息，请参阅[http://www.w3schools.com/dom/dom_parser.asp](http://www.w3schools.com/dom/dom_parser.asp)），这是我所知道的最好的入门方式。

当然，您将通过遍历 DOM 树来手动解析代码。那是因为没有将 XML 转换为 JSON 的标准方法。它们并不完全直接兼容。例如，XML 节点具有属性；JSON 没有。如何处理细微差别取决于您的特定 XML 模式以及特定项目的需求。

# jquery - < 和 > 不允许在 http 请求中使用？

> ID：15607375
> 
> 赞同：2
> 
> 时间：2013-03-25T03:57:06.320
> 
> 标签：jquery, post

我在 MVC 中有一个 Web 应用程序，它可以共享存储在某个 sharePoint 位置的文件，链接显示在我们的应用程序中。它的实现如下。

我们正在使用相同的表单标签。

```
 <form id ="addformupload" method="post" enctype="multipart/form-data"> some html tags     here for implementing the form here </form> as below. 
```

![在此处输入图像描述](../Images/da8d0bc19fd1a442c03523de00e9355c.png)

我们同样使用 JQuery `POST`。

```
 var options = {
        url: "../../DataService/SaveResources",
        success: layoutService.SPfileUploadResponse
    }; 
```

即用户可以给一个“ `File Description`”，他必须浏览要上传的文件。它工作得很好，但是当他将文件名命名为`<test>`时，它会失败。请让我知道解决方案（如果有的话）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:02:48.690

.Net 管道（我假设这就是这里使用的内容，并提到了 MVC 和 Sharepoint），不允许某些可能是危险的字符（例如 < 和 > 字符，因为这些字符可用于 XSS）。

通常，这是一件好事。但是，如果您绝对确定您正在正确处理字符转义（如果您在 Razor 中使用 @Model.Value 语法，或 <%: syntax pre-razor，这是为您完成的），您可以将该`[ValidateInput(false)]`属性应用于您的action 方法，然后它将允许这些不安全的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:10:35.787

基本上，用“<”和“>”放置帖子可能是不安全的。最好避免它。

# css - 仅使用 CSS 有条件地隐藏 div？

> ID：15607382
> 
> 赞同：3
> 
> 时间：2013-03-25T03:58:34.300
> 
> 标签：css, html, hide, conditional-statements, tumblr

我目前使用 Javascript 来隐藏我的 Tumblr 网站主页上的社交媒体按钮。它被编程为仅根据浏览器中的 url 在主页上隐藏它们，而不是在任何其他页面上。

但是，我很好奇是否有办法只使用 CSS（甚至 CSS3）来做到这一点，类似于媒体屏幕如何根据浏览器大小为 div 设置条件。我知道您可以使用 PHP 设置更多条件，但 Tumblr 不允许这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T04:45:56.127

根据您可以隐藏的浏览器大小，例如

```
@media (min-width: 768px) and (max-width: 979px) {
  .hidden {
    display:none;
  }
} 
```

或者

取决于父类

```
 <body class="wrapper">

 .wrapper .hidden{display:none;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T21:03:44.780

您应该使用`{block:PermalinkPage}`and `{block:IndexPage}`。

```
{block:PermalinkPage}
<div class="icons">
    <p>This will only appear on permalink pages.</p>
</div>
{block:PermalinkPage} 
```

`{block:Date}`如果您只希望它出现在帖子而不是页面上，则可以通过将其包装更进一步。

# javascript - jQuery val() 返回空

> ID：15607386
> 
> 赞同：6
> 
> 时间：2013-03-25T03:58:50.577
> 
> 标签：javascript, jquery

我被困在一个看似微不足道的问题上，我可能会因为错过这个而自责。无论如何，我的问题是我无法从文本字段中获取值。

**HTML：**

```
<form>
        <label for="">Enter Username:</label>
        <input id="usernameText" type="text" size="30" />
        &nbsp;&nbsp;<input type="button" value="Generate" onclick="generateQuery(); return     false;" />
</form> 
```

**Javascript：**

```
<script type="text/javascript">

        var username = $("#usernameText").val();

        function generateQuery(){

            alert(username);

        }
</script> 
```

我做了以下`if (jQuery) {..`操作并确保已加载 JQuery。

在警报中，它显示一个空对话框。

如果我将 包含在`$(document).ready();`我的脚本中，`generateQuery`则不会调用该函数。知道为什么..？

```
<script type="text/javascript">

    $(document).ready(function(){
        var username = $("#usernameText").val();

        function generateQuery(){

            alert(username);

        }
    });     
</script> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T04:01:34.860

在函数中分配变量。

```
function generateQuery(){
  var username = $("#usernameText").val();
  alert(username);
} 
```

至于您的另一个问题，*“如果我将 $(document).ready(); 包含在我的脚本中，则不会调用函数 generate 。知道为什么..？”*

发生这种情况是因为范围。添加处理程序时，您将包装`generateQuery`在匿名函数`document.ready`中，因此它对您的`button onclick="generateQuery()"`代码不可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T04:01:20.417

在这里它会在页面加载时调用。因此，每当页面加载时，文本框都是空的。尝试在函数中编写。

```
function generateQuery(){
  var username = $("#usernameText").val();
  alert(username);
} 
```

当您写入时，`document.ready`它将在页面加载时调用；l。如果您需要用户名的值，则显式调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T04:01:43.077

该值是第一次得出的。所以当页面第一次加载时。

```
<script type="text/javascript">
        function generateQuery(){
            var username = $("#usernameText").val();
            alert(username);

        }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T05:07:55.493

在这里，您正在定义您必须调用该函数才能使其运行的函数，使用此`generateQuery();`行来调用您的函数。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-25T04:01:26.733

你在哪里调用函数？？？

我认为你需要：

```
<script type="text/javascript">

    $(document).ready(function(){
      generateQuery();

    });     

function generateQuery(){
  var username = $("#usernameText").val();
            alert(username);

        }
</script> 
```

# haskell - 如何从 UTCTime 中提取特定的时间分量？

> ID：15607387
> 
> 赞同：8
> 
> 时间：2013-03-25T03:58:51.920
> 
> 标签：haskell

如果我有这个代码：

`let time = read "2013-02-03 17:00:07.687" :: UTCTime`

如何从 中提取分钟和秒组件`UTCTime`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T04:16:59.547

A`UTCTime`有两个组成部分：一天和一个`DiffTime`。您可以`DiffTime`使用`utctDayTime`或通过模式匹配来获取。从那里，您可以将其转换为[`TimeOfDay`](http://hackage.haskell.org/packages/archive/time/1.1.4/doc/html/Data-Time-LocalTime.html#t%3aTimeOfDay)using [`timeToTimeOfDay`](http://hackage.haskell.org/packages/archive/time/1.1.4/doc/html/Data-Time-LocalTime.html#v%3atimeToTimeOfDay)。然后，您只需对 进行模式匹配`TimeOfDay`即可获得小时、分钟和秒。

所以你可以这样做：

```
let TimeOfDay hours minutes seconds = timeToTimeOfDay (utctDayTime time) 
```

您还可以使用`todMin`和`todSec`函数分别从`TimeOfDay`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T06:37:29.997

您可以使用[time-lens](http://hackage.haskell.org/package/time-lens)包，它使时间和日期的操作更加容易。例如

```
> let time = read "2013-02-03 17:00:07.687" :: UTCTime
> getL seconds time
7.687000000000 
```

如果你 import `Data.Lens.Common`，还有一个中缀版本`getL`：

```
> time ^. minutes
0 
```

# windows-phone-7 - Wp7：推送通知通道 URI 为空

> ID：15607389
> 
> 赞同：3
> 
> 时间：2013-03-25T03:59:16.940
> 
> 标签：windows-phone-7, push-notification, mpns

我们正在尝试使用文档 How to: Set Up a Notification Channel for Windows Phone 中的最新代码来测试推送通知

```
public HttpNotificationChannel myChannel;
public void CreatingANotificationChannel()
{
  myChannel = HttpNotificationChannel.Find("MyChannel");

  if (myChannel == null)
  {
    myChannel = new HttpNotificationChannel("MyChannel","www.contoso.com");

    // An application is expected to send its notification channel URI to its corresponding web service each time it launches.
    // The notification channel URI is not guaranteed to be the same as the last time the application ran.
    myChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(myChannel_ChannelUriUpdated);

    myChannel.Open();
  }
  else // Found an existing notification channel.
  {
    // The URI that the application sends to its web service.
    Debug.WriteLine("Notification channel URI:" + myChannel.ChannelUri.ToString());
  }

  myChannel.HttpNotificationReceived += new EventHandler<HttpNotificationEventArgs>(myChannel_HttpNotificationReceived);
  myChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(myChannel_ShellToastNotificationReceived);
  myChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(myChannel_ErrorOccurred);
} 
```

如果 HttpNotificationChannel.Find() 返回 null，它会打开一个新通道，但不会触发 ChannelUriUpdated 事件。

如果 HttpNotificationChannel.Find() 返回通道，则 ChannelUri 属性为空。示例代码在此处崩溃，因为它假定 ChannelUri 属性不为空。

在这两种情况下都不会触发 ErrorOccurred 事件。

我怎么解决这个问题？这个问题是因为微软服务器还是其他什么？

提前致谢

**编辑** 等待重播，十天后我遇到了空 uri 问题，谁能告诉我如何在某个时候解决这个问题 MSPN 服务器给 chanalk uri ans 不是我的意思是某个时候它给空引用异常。微软在做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:20:11.380

如果我没有出错，www.contoso.com 这是一个示例 URI，用于演示您需要放置自己的服务器 URL 地址，但根据我的经验，我从不以这种方式使用。我更喜欢把

```
myChannel = new HttpNotificationChannel("MyChannel"); 
```

看这个[例子](http://blogs.ligasilverlight.com/2011/06/notificaciones-de-empuje-para-el-desarrollo-de-windows-phone/)（它是西班牙语的），但是代码非常清楚你需要做什么来设置推送通知客户端和服务。

我希望我对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-30T18:35:15.317

`HttpNotificationChannel`根据[文档](http://msdn.microsoft.com/en-us/library/windows/apps/ff403009%28v=vs.105%29.aspx)，我认为问题在于您正在使用经过身份验证的 Web 服务的构造函数。

相反，你应该使用只接受一个参数的构造函数，你可以在[这个例子中检查](http://msdn.microsoft.com/en-us/library/windows/apps/hh202967(v=vs.105).aspx)

```
/// Holds the push channel that is created or found.
HttpNotificationChannel pushChannel;

// The name of our push channel.
string channelName = "ToastSampleChannel";

// Try to find the push channel.
pushChannel = HttpNotificationChannel.Find(channelName);

// If the channel was not found, then create a new connection to the push service.
if (pushChannel == null)
{
    pushChannel = new HttpNotificationChannel(channelName);
    ...
} 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:54:42.700

您正在测试什么是模拟器，您是否有用于 Windows 手机开发的开发者帐户订阅，您是否开发者解锁了您的手机，

诺鲁尔。

# libgdx - libgdx TextureAtlas 和 NinePatch 的

> ID：15607393
> 
> 赞同：3
> 
> 时间：2013-03-25T03:59:22.687
> 
> 标签：libgdx, nine-patch

我正在使用 libgdx 制作一个简单的游戏。我有一个 TextureAtlas，它有我正在尝试使用的 Ninepatch：![9patch 我想用](../Images/3edc86806246d8954dba464e855430e5.png)

图像保存为 menu.9.png

我正在使用以下代码：

```
Image bg = new Image(Room.iAtlas.findRegion("GUI/menu"));
bg.setBounds(guix-border,guiy-border,(border+radius)*2,(border+radius)*2);
batch.begin();
    bg.draw(s,1);
batch.end(); 
```

输出是这样的：
![在此处输入图像描述](../Images/fcd316d0795a42c9fcd219e5592e3a44.png)

我真的不知道我做错了什么，但它应该更像这样（除了它上面有形状，但我没有添加那些）：（
![在此处输入图像描述](../Images/ba9a78e97a2965013fa6675c561812e4.png) 我手工创建的，我已经实际上从来没有 9patch 工作过，而且它没有船，因为我没有费心去编辑它们）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:13:18.957

看起来您的“九个补丁”没有被视为真正的九个路径，而是被视为“退化”的九个补丁（我之前遇到了一个非常相似的问题：[Loading Nine-patch image as a Libgdx Scene2d Button background看起来很糟糕](https://stackoverflow.com/questions/15355723/loading-nine-patch-image-as-a-libgdx-scene2d-button-background-looks-awful)，虽然我没有使用`TextureAtlas`应该是解决方案的。）

基本上，当 Libgdx 从您的地图集中读取九个补丁时，它应该读取描述如何将图像分成 9 个图块的所有元数据（参见[https://code.google.com/p/libgdx/ wiki/TexturePacker#NinePatches](https://code.google.com/p/libgdx/wiki/TexturePacker#NinePatches)）。我看到几个地方可能会出错：

1.  您的纹理不是有效的九补丁，元数据被忽略。（使用 Android`draw9patch`工具检查。）
2.  您的纹理打包程序未`.9.png`正确处理文件。检查您的地图集的 .txt 文件的内容，并查看它是否具有与“menu.9.png”条目关联的“拆分”条目。
3.  纹理查找只是返回`TextureRegion`九个补丁区域的常规包装器，而不是将其包装在`NinePatch`对象中。尝试使用[`TextureRegion.createNinePatch`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/TextureAtlas.html#createPatch(java.lang.String))使其更明确。（我的印象是这没有必要，但也许是......）

# java - java spring：将其他独立的服务组装成一个服务

> ID：15607395
> 
> 赞同：2
> 
> 时间：2013-03-25T03:59:40.430
> 
> 标签：java, spring, design-patterns, transactions, spring-transactions

有两种服务：

```
BookService {
    add(Book book);
    ...
} 
```

和

```
MsgService {
    add(String msg);
    ...
} 
```

这两个服务是独立的。现在我想要这个：

```
XService {
    @Transactional
    addBook(Book book) {
        BookService bs;
        MsgService ms;
        bs.add(book);
        ms.add("add a new book" + book);
    }
} 
```

在这种模式下，BookService 和 MsgService 就像 atom 服务，使用 Dao 层进行基本的 CRUD 操作，可能是事务性的，但不会暴露给客户端；其中一个是 XService，它调用多个原子服务来完成单个事务功能（或说完整的业务逻辑），例如 addBook()。

这是我的问题：

1、这个图案可以吗？

2、如果有，XService应该在哪一层？X 最好的名字是什么？

3、XService中的@Transactional是否有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:35:43.713

图案很好，它[通常被称为 Facade](http://en.wikipedia.org/wiki/Facade_pattern)。类`XService`/逻辑应该保留在服务/业务层中。至于名称，这取决于您，并且取决于班级实际在做什么。例如。如果它正在注册一本书，则将其称为 RegistrationService。

至于`@Transactional`，请确保您的类使用`@Service`or注释，`@Component`并且它位于`component scanned`Spring 的包中。如果您包装的服务也有`@Transactional`方法，请确保事务传播或不传播，这再次取决于您的需要。

# java - 内存不足：Perm Gen Space

> ID：15607398
> 
> 赞同：1
> 
> 时间：2013-03-25T03:59:44.017
> 
> 标签：java, tomcat, permgen

我有一个 `out of space : perm gen`错误，我不知道该怎么做。我正在使用 apache tomcat，但我没有对服务器的完全访问权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:09:36.177

这表明内存泄漏*导致 Java 在 Perm Gen 中创建太多对象，这是为非常长寿命（永久）内存保留的内存部分。如果您没有对服务器的完全访问权限，要么 a) 不是您的问题，您应该通知系统管理员，或者 b) 您的代码有问题，如果您不显示，我们将无法帮助您你在做什么。

如果您不确定是 a) 还是 b)，请尝试还原您的更改/看看是否有其他人遇到同样的问题。如果无论您看到什么错误，它都是 a)。如果您能够通过删除代码来阻止此错误，那就是 b)。

*有可能你做的一切都是正确的，只需要增加你服务器上的 PermGen 设置，但就像你说的它不是你的机器，这似乎不太可能是解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:35:15.103

您可以使用 ：

-XX:MaxPermSize=128m 增加空间。但这通常只会推迟不可避免的事情。

您还可以启用 PermGen 进行垃圾收集

# android - 将json内容写入url android

> ID：15607402
> 
> 赞同：0
> 
> 时间：2013-03-25T03:59:53.780
> 
> 标签：android, json, upload, restful-url

我有从 url 解析 json 内容并完成它们的 android 要求，现在我需要将结果作为 json 内容发送回服务器 url。搜索了许多以前的帖子，但大多数都指定了如何下载和解析 json 内容。任何关于如何开始在 json 中将内容发布到 url 的输入/示例都会有很大的帮助！

编辑：下面是我正在尝试的示例代码

```
try {

        URL url = new URL("http://localhost:8080/RESTfulExample/json/product/post");
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setDoOutput(true);
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Content-Type", "application/json");

        String input = "{\"qty\":100,\"name\":\"iPad 4\"}";

        OutputStream os = conn.getOutputStream();
        os.write(input.getBytes());
        os.flush();

        if (conn.getResponseCode() != HttpURLConnection.HTTP_CREATED) {
            throw new RuntimeException("Failed : HTTP error code : "
                    + conn.getResponseCode());
        }

        BufferedReader br = new BufferedReader(new InputStreamReader(
                (conn.getInputStream())));

        String output;
        System.out.println("Output from Server .... \n");
        while ((output = br.readLine()) != null) {
            System.out.println(output);
        }

        conn.disconnect();

    } catch (MalformedURLException e) {

        e.printStackTrace();

    } catch (IOException e) {

        e.printStackTrace();

    } 
```

执行此操作时，连接被拒绝，java.net.connect 异常！请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:05:00.967

您可以使用以下方法发送您的 JSON 请求。

```
public static HttpResponse sendRequest(String url, String request) throws Exception 
{
    //Create the httpclient to make request
    DefaultHttpClient httpclient = new DefaultHttpClient();

    //create an HttpPost request object
    HttpPost httpost = new HttpPost(url);

    //Create the String entity to be passed to the HttpPost request
    StringEntity se = new StringEntity(request));

    //set the created StringEntity
    httpost.setEntity(se);

    //the intended
    httpost.setHeader("Accept", "application/json");
    httpost.setHeader("Content-type", "application/json");

    return httpclient.execute(httpost);
} 
```

希望这可以帮助。

# javascript - 使用 flaskr 和 jinja2 运行 highcharts

> ID：15607403
> 
> 赞同：1
> 
> 时间：2013-03-25T03:59:54.783
> 
> 标签：javascript, python, highcharts, flask, jinja2

我似乎无法使用 flaskr 和 jinja2 获得 highcharts 的工作演示。打开页面时出现这三个错误。我打算使用 javascript 调用我的 python 代码将提供的 json 对象来呈现图表。

```
Uncaught TypeError: undefined is not a function highstock.js:287
Uncaught TypeError: Cannot read property 'prototype' of undefined exporting.js:9
Uncaught TypeError: Object [object Object] has no method 'highcharts' 127.0.0.1:32 
```

这是我呈现模板的python代码

```
@app.route('/')
def route():
    return render_template('login.html') 
```

我将 highcharts 和 jquery 的脚本 src 放在 layout.html 中的一个块中，并且应该在 login.html 中创建图表的函数。

这是layout.html

```
<title>Flaskr</title>
{% block head %}
<script src="http://code.highcharts.com/stock/highstock.js"></script>
<script src="http://code.highcharts.com/stock/modules/exporting.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
{% endblock %}
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css') }}">
<div class=page>
<h1>Flaskr</h1>
<div class=metanav>

</div>
{% for message in get_flashed_messages() %}
<div class=flash>{{ message }}</div>
{% endfor %}
{% block body %}{% endblock %}
</div> 
```

这是我正在尝试呈现代码的 login.html

```
{% extends "layout.html" %}
{% block body %}
<h2>Login</h2>
{% if error %}<p class=error><strong>Error:</strong> {{ error }}{% endif %}
<form action="" method=post>
<dl>
  <dt>Username:
  <dd><input type=text name=username>
  <dt>Password:
  <dd><input type=password name=password>
  <dd><input type=submit value=Login>
</dl>
</form>
<script type="text/javascript">
$(document).ready(function() {
$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-ohlc.json&callback=?', function(data) {

    // create the chart
    $('#container').highcharts('StockChart', {

        rangeSelector : {
            selected : 2
        },

        title : {
            text : 'AAPL Stock Price'
        },

        series : [{
            type : 'ohlc',
            name : 'AAPL Stock Price',
            data : data,
            dataGrouping : {
                units : [[
                    'week', // unit name
                    [1] // allowed multiples
                ], [
                    'month', 
                    [1, 2, 3, 4, 6]
                ]]
            }
        }]
    });
});
});
</script>
<div id="container" style="height: 500px; min-width: 500px"></div>
{% endblock %} 
```

我究竟做错了什么？另外我该如何解决这个问题以获得一个工作演示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T11:09:06.193

首先加载 jQuery，然后是 Highstock，参见：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://code.highcharts.com/stock/highstock.js"></script>
<script src="http://code.highcharts.com/stock/modules/exporting.js"></script> 
```

# objective-c - 在Objective C中为弱属性创建自定义设置器的正确方法是什么？

> ID：15607404
> 
> 赞同：16
> 
> 时间：2013-03-25T03:59:59.127
> 
> 标签：objective-c, properties, automatic-ref-counting

如果我声明这样的属性：

```
@property(nonatomic,weak) Foo *someProperty; 
```

然后我像这样声明一个自定义设置器：

```
- (void)setSomeProperty:(Foo *)someProp {
    _someProperty = someProp;
    //...more custom stuff
} 
```

这有什么问题吗？也就是说，编译器应该自动合成 _someProperty ivar 和 __weak 修饰符，所以只需在上面的 setter 中进行赋值就足够了，对吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T04:02:54.657

是的，这就是它的全部。当然，如果您想要以下内容，您可以指定自定义 iVar `_someProperty`：

```
@synthesize someProperty = someProperty_; 
```

# android - 使用从互联网下载的图像延迟加载 GridView

> ID：15607406
> 
> 赞同：4
> 
> 时间：2013-03-25T04:00:10.457
> 
> 标签：android, android-custom-view, android-gridview, android-lazyloading

多年来我一直在访问 Stack Overflow，这是我第一次找不到任何可以解决我的问题的帖子（至少我没有看到任何帖子）。

我有一个`GridView`带有自定义适配器的 a ，我已将其覆盖以返回由 a`ImageView`和 a创建的自定义视图`TextView`。

我在 JSON 从带有 的 URL 解析图像后加载图像`AsyncTask`，将所有信息存储到方法中的 中并在`ArrayList`方法中`doInBackground()`调用。一切安好。`notifyDataSetChanged()``onPostExecute()`

现在我的问题是，当我启动活动时，网格视图需要 5-10 秒的时间才能创建并以实体形式呈现给用户。我想知道是否有一种方法可以先显示带有文本信息的网格视图，然后再加载每个图像。这是否可能，因为它们都是以相同的方法创建的？

```
@Override
public View getView(int arg0, View arg1, ViewGroup arg2) {
    View v = null;
    if (arg1 == null) {
        LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
        v = inflater.inflate(R.layout.custom_product_view, null);
    } else {
        v = arg1;
    }

    iv = (ImageView) v.findViewById(R.id.product_image);
    imageLoader.DisplayImage(products.get(arg0).getImage(), iv);

    TextView tv = (TextView) v.findViewById(R.id.product_price);
    tv.setText(products.get(arg0).getPrice());

    return v;
} 
```

我还必须通知您，您可以从`DisplayImage()`我实现此延迟加载的方法中看到：[ListView 中的图像延迟加载](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)。它工作正常，但问题是它再次加载了整个视图。我想要做的是启动活动，首先加载标题，然后在完成下载后加载图像。使用这里的代码，它只是延迟加载网格视图的每个单元格包含的整个视图。我赢得了几秒钟，因为我没有像以前那样一次下载所有图像，但它仍然不是我要搜索的。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T04:57:58.563

遵循这种方法。

**首先**，创建一个自定义*WebImageView*类，如下所示。

```
public class WebImageView extends ImageView {

    private Drawable placeholder, image;

    public WebImageView(Context context) {
        super(context);
    }
    public WebImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }
    public WebImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setPlaceholderImage(Drawable drawable) {
        placeholder = drawable;
        if (image == null) {
            setImageDrawable(placeholder);
        }
    }
    public void setPlaceholderImage(int resid) {
        placeholder = getResources().getDrawable(resid);
        if (image == null) {
            setImageDrawable(placeholder);
        }
    }

    public void setImageUrl(String url) {
        DownloadTask task = new DownloadTask();  
        task.execute(url);
    }

    private class DownloadTask extends AsyncTask<String, Void, Bitmap> {

        @Override
        protected Bitmap doInBackground(String... params) {
            String url = params[0];
            try {
                URLConnection conn = (new URL(url)).openConnection();
                InputStream is = conn.getInputStream();
                BufferedInputStream bis = new BufferedInputStream(is);

                ByteArrayBuffer baf = new ByteArrayBuffer(50); 
                int current = 0;
                while ((current=bis.read()) != -1) {
                    baf.append((byte)current);
                }

                byte[] imageData = baf.toByteArray();
                return BitmapFactory.decodeByteArray(imageData, 0, imageData.length);

            } catch (Exception e) {
                return null;
            }
        }

        @Override
        protected void onPostExecute(Bitmap result) {
            image = new BitmapDrawable(result);
            if (image != null) {
                setImageDrawable(image);
            }
        }
    }
} 
```

**接下来**，在Activity中使用上面自定义的ImageView如下：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    WebImageView imageView = (WebImageView) findViewById(R.id.webimage);
    imageView.setPlaceholderImage(R.drawable.ic_launcher);
    imageView.setImageUrl("http://www.google.co.in/images/srpr/logo3w.png");
} 
```

简而言之，您正在为 ImageView 设置一个占位符图像，下载完成后该图像将被实际图像替换。因此 GridView 将立即渲染，不会有任何延迟。

**实现细节**：所以在您的自定义视图（带有图像+文本）中，不要使用简单的 ImageView，而是使用 WebImageView，如上所示。当您获得 JSON 响应时，将 TextView 设置为标题，将 WebImageView 设置为图像 url。所以标题会立即显示，图像会延迟加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:57:01.403

我已经使用下面的类来实现图像的延迟加载，它对我来说很棒。你也试试。

**图像加载器**

> ```
>  /**
>       * This is class for display image in lazy-loading way.
>       */
>    public class ImageLoader
>    {
> private static final String TAG = ImageLoader.class.getSimpleName();
> private InputStream m_is = null;
> private OutputStream m_os = null;
> private Bitmap m_bitmap = null;
> private String m_imagePath;
> private File m_cacheDir;
> private WeakHashMap<String, Bitmap> m_cache = new WeakHashMap<String, Bitmap>();
> /**
>  * Makes the background thread low priority. This way it will not affect the
>  * UI performance.<br>
>  * Checks the Device SD card exits or not and assign path according this
>  * condition.
>  * 
>  * @param p_context
>  *            activity context
>  */
> public ImageLoader(Context p_context)
> {
>     /**
>      * Make the background thread low priority. This way it will not affect
>      * the UI performance
>      */
>     m_imageLoaderThread.setPriority(Thread.NORM_PRIORITY - 1);
>     /**
>      * Check the Device SD card exits or not and assign path according this
>      * condition.
>      */
>     if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
>     {
>         m_imagePath = Environment.getExternalStorageDirectory() + "/Android/data/" + p_context.getPackageName();
>         m_cacheDir = new File(m_imagePath);
>     }
>     else
>     {
>         m_cacheDir = new File(p_context.getDir("Cache", Context.MODE_PRIVATE), "Cache");
>     }
>     if (!m_cacheDir.exists())
>         m_cacheDir.mkdirs();
> }
> /**
>  * Check Image exits on HashMap or not.If exist then set image to ImageView
>  * else send request in the queue.
>  * 
>  * @param p_url
>  *            image Url
>  * @param p_imageView
>  *            image container
>  * @param p_prgBar
>  *            progressbar that is displayed till image is not download from
>  *            server.
>  */
> public void DisplayImage(String p_url, ImageView p_imageView, ProgressBar p_prgBar) throws CustomException
> {
>     if (m_cache.containsKey(p_url))
>     {
>         p_prgBar.setVisibility(View.GONE);
>         p_imageView.setVisibility(View.VISIBLE);
>         p_imageView.setImageBitmap(m_cache.get(p_url));
>     }
>     else
>     {
>         queueImage(p_url, p_imageView, p_prgBar);
>     }
> }
> /**
>  * Clear old task from the queue and add new image downloading in the queue.
>  * 
>  * @param p_url
>  *            image Url
>  * @param p_imageView
>  *            image container
>  * @param p_prgBar
>  *            progressbar that is displayed till image is not download from
>  *            server.
>  */
> private void queueImage(String p_url, ImageView p_imageView, ProgressBar p_prgBar) throws CustomException
> {
>     try
>     {
>         m_imagesQueue.Clean(p_imageView);
>         ImageToLoad m_photoObj = new ImageToLoad(p_url, p_imageView, p_prgBar);
>         synchronized (m_imagesQueue.m_imagesToLoad)
>         {
>             m_imagesQueue.m_imagesToLoad.push(m_photoObj);
>             m_imagesQueue.m_imagesToLoad.notifyAll();
>         }
>         /**
>          * start thread if it's not started yet
>          */
>         if (m_imageLoaderThread.getState() == Thread.State.NEW)
>             m_imageLoaderThread.start();
>     }
>     catch (CustomException c)
>     {
>         throw c;
>     }
>     catch (Throwable t)
>     {
>         CustomLogHandler.printErrorlog(t);
>         throw new CustomException(TAG + " Error in queueImage(String p_url, ImageView p_imageView, ProgressBar p_prgBar) of ImageLoader", t);
>     }
> }
> /**
>  * Checks in SD card for cached file.If bitmap is not available then will
>  * download it from Url.
>  * 
>  * @param p_url
>  *            imgae Url
>  * @return bitmap from Cache or from server.
>  */
> private Bitmap getBitmap(String p_url) throws CustomException
> {
>     System.gc();
>     String m_fileName = String.valueOf(p_url.hashCode());
>     File m_file = new File(m_cacheDir, m_fileName);
>     // from SD cache
>     m_bitmap = decodeFile(m_file);
>     if (m_bitmap != null)
>         return m_bitmap;
>     // from web
>     try
>     {
>         Bitmap m_bitmap = null;
>         int m_connectionCode = 0;
>         m_connectionCode = HttpConnection.getHttpUrlConnection(p_url).getResponseCode();
>         if (m_connectionCode == HttpURLConnection.HTTP_OK)
>         {
>             m_is = new URL(p_url).openStream();
>             m_os = new FileOutputStream(m_file);
>             FileIO.copyStream(m_is, m_os);
>             m_os.close();
>             m_os = null;
>             m_bitmap = decodeFile(m_file);
>             m_is.close();
>             m_is = null;
>             HttpConnection.getHttpUrlConnection(p_url).disconnect();
>         }
>         return m_bitmap;
>     }
>     catch (CustomException c)
>     {
>         throw c;
>     }
>     catch (Throwable t)
>     {
>         CustomLogHandler.printErrorlog(t);
>         throw new CustomException(TAG + " Error in getBitmap(String p_url) of ImageLoader", t);
>     }
> }
> /**
>  * Decodes the Image file to bitmap.
>  * 
>  * @param p_file
>  *            Image file object
>  * @return decoded bitmap
>  */
> private Bitmap decodeFile(File p_file) throws CustomException
> {
>     try
>     {
>         // decode image size
>         Bitmap m_retBmp = null;
>         System.gc();
>         int m_scale = 1;
>         if (p_file.length() > 400000)
>         {
>             m_scale = 4;
>         }
>         else if (p_file.length() > 100000 && p_file.length() < 400000)
>         {
>             m_scale = 3;
>         }
>         // decode with inSampleSize
>         if (p_file.exists())
>         {
>             BitmapFactory.Options m_o2 = new BitmapFactory.Options();
>             m_o2.inSampleSize = m_scale;
>             m_retBmp = BitmapFactory.decodeFile(p_file.getPath(), m_o2);
>         }
>         return m_retBmp;
>     }
>     catch (Throwable t)
>     {
>         CustomLogHandler.printErrorlog(t);
>         throw new CustomException(TAG + " Error in decodeFile(File p_file) of ImageLoader", t);
>     }
> }
> /**
>  * Stores image information
>  */
> private class ImageToLoad
> {
>     public String m_url;
>     public ImageView m_imageView;
>     public ProgressBar m_prgBar;
>     public ImageToLoad(String p_str, ImageView p_img, ProgressBar p_prgBar)
>     {
>         m_url = p_str;
>         m_imageView = p_img;
>         m_imageView.setTag(p_str);
>         m_prgBar = p_prgBar;
>     }
> }
> ImagesQueue m_imagesQueue = new ImagesQueue();
> /**
>  * This is method to stop current running thread.
>  */
> public void stopThread()
> {
>     m_imageLoaderThread.interrupt();
> }
> /**
>  * Stores list of image to be downloaded in stack.
>  */
> class ImagesQueue
> {
>     private Stack<ImageToLoad> m_imagesToLoad = new Stack<ImageToLoad>();
>     /**
>      * Removes all instances of this ImageView
>      * 
>      * @param p_ivImage
>      *            imageView
>      */
>     public void Clean(ImageView p_ivImage) throws CustomException
>     {
>         try
>         {
>             for (int m_i = 0; m_i < m_imagesToLoad.size();)
>             {
>                 if (m_imagesToLoad.get(m_i).m_imageView == p_ivImage)
>                     m_imagesToLoad.remove(m_i);
>                 else
>                     m_i++;
>             }
>         }
>         catch (Throwable t)
>         {
>             CustomLogHandler.printErrorlog(t);
>             throw new CustomException(TAG + " Error in Clean(ImageView p_image) of ImageLoader", t);
>         }
>     }
> }
> /**
>  * 
>  * This is class waits until there are any images to load in the queue.
>  */
> class ImagesLoader extends Thread
> {
>     public void run()
>     {
>         try
>         {
>             while (true)
>             {
>                 if (m_imagesQueue.m_imagesToLoad.size() == 0)
>                     synchronized (m_imagesQueue.m_imagesToLoad)
>                     {
>                         m_imagesQueue.m_imagesToLoad.wait();
>                     }
>                 if (m_imagesQueue.m_imagesToLoad.size() != 0)
>                 {
>                     ImageToLoad m_imageToLoadObj;
>                     synchronized (m_imagesQueue.m_imagesToLoad)
>                     {
>                         m_imageToLoadObj = m_imagesQueue.m_imagesToLoad.pop();
>                     }
>                     Bitmap m_bmp = getBitmap(m_imageToLoadObj.m_url);
>                     m_cache.put(m_imageToLoadObj.m_url, m_bmp);
>                     if (((String) m_imageToLoadObj.m_imageView.getTag()).equals(m_imageToLoadObj.m_url))
>                     {
>                         BitmapDisplayer m_bmpdisplayer = new BitmapDisplayer(m_bmp, m_imageToLoadObj.m_imageView, m_imageToLoadObj.m_prgBar);
>                         Activity m_activity = (Activity) m_imageToLoadObj.m_imageView.getContext();
>                         m_activity.runOnUiThread(m_bmpdisplayer);
>                     }
>                 }
>                 if (Thread.interrupted())
>                     break;
>             }
>         }
>         catch (InterruptedException e)
>         {
>             /*
>              * allow thread to exit
>              */
>         }
>         catch (Throwable t)
>         {
>             CustomLogHandler.printErrorlog(t);
>         }
>     }
> }
> ImagesLoader m_imageLoaderThread = new ImagesLoader();
> /**
>  * This class Used to display bitmap in the UI thread
>  */
> class BitmapDisplayer implements Runnable
> {
>     Bitmap m_bmp;
>     ImageView m_imageView;
>     ProgressBar m_prgBar;
>     public BitmapDisplayer(Bitmap p_bmp, ImageView p_imgview, ProgressBar p_prgBar)
>     {
>         m_bmp = p_bmp;
>         m_imageView = p_imgview;
>         m_prgBar = p_prgBar;
>     }
>     public void run()
>     {
>         if (m_bmp != null)
>         {
>             m_imageView.setImageBitmap(m_bmp);
>             m_prgBar.setVisibility(View.GONE);
>             m_imageView.setVisibility(View.VISIBLE);
>         }
>     }
> }
>   } 
> ```

使用上面的类如下：

首先，您需要将`ProgressBar`您的自定义布局放在您拥有`ImageView`如下的位置：

> ```
>  <RelativeLayout
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content" 
>     android:id="@+id/RelativeImagelayout"> 
>       <ProgressBar android:id="@+id/Progress"
>                 android:layout_height="wrap_content"
>                 android:layout_width="wrap_content"
>                 android:layout_marginTop="10dp"/>
>     <ImageView
>         android:id="@+id/ivImage"
>         android:layout_width="80dp"
>         android:layout_height="90dp"
>         android:layout_marginTop="10dp"
>         android:clickable="false"/>
> </RelativeLayout> 
> ```

在您的适配器类中创建该类的实例`ImageLoader`并在您的方法中使用它，如下所示`getView`：

> ```
>  ImageView m_ibImage = (ImageView) v.findViewById(R.id.ivImage);
>  ProgressBar m_pbProgress = (ProgressBar) v.findViewById(R.id.Progress);
>         if (products.get(arg0).getImage().toString().equals(null)
>                 || products.get(arg0).getImage().toString().equals(""))
>         {
>             m_pbProgress.setVisibility(View.INVISIBLE);
>             m_ibImage.setVisibility(View.VISIBLE);
>         }
>         else if (!products.get(arg0).getImage().toString().equals(null))
>         {
>             m_imgLoader.DisplayImage(products.get(arg0).getImage(), m_ibImage,
>                     m_pbProgress);
>         } 
> ```

我希望它会帮助你。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:04:39.543

在我看来，你提到的答案*并不*好。例如，如果您有 50 张图像，当用户向上/向下滚动整个列表时，该示例项目将产生 50 个线程。这对手机等移动设备不利。附带说明一下，他的“惰性列表”概念与 Android SDK 定义的概念不同。有关延迟加载列表视图的示例代码，请查看：

```
[Android SDK]/samples/android-x/ApiDemos/src/com/example/android/apis/view/List13.java 
```

`x`API级别在哪里。您可以在任何模拟器中测试编译后的应用程序，打开应用程序*API Demos > Views > Lists > 13\. Slow Adapter*。

关于你目前的做法。你不应该`AsyncTask`用来下载图像。[文档](http://developer.android.com/reference/android/os/AsyncTask.html)说：

> 理想情况下，AsyncTasks 应该用于短操作（最多几秒钟。）

你应该改为：

*   使用[服务](http://developer.android.com/guide/components/services.html)在后台下载图像。请注意，服务在主 UI 线程上运行，因此为了避免这种情况[`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)，您需要在服务中使用类似的东西`Thread`。
*   使用[内容提供商](http://developer.android.com/guide/topics/providers/content-providers.html)来管理 SD 卡上下载的图像。例如，您将原始 URL 映射到下载的相应文件。
*   与内容提供者一起，将 a[`CursorAdapter`](http://developer.android.com/reference/android/widget/CursorAdapter.html)用于您的网格视图，并将[加载](http://developer.android.com/guide/components/loaders.html)器用于承载网格视图的活动/片段。

基本上，在用户第一次打开您的活动时，您会创建新的适配器并将其设置为网格视图。所以它与内容提供者有联系。然后您启动服务以检查和下载图像。对于下载的每个图像，您将其插入内容提供程序。提供者通知任何观察者有关更改 - 您的活动/片段（加载器）接收通知并更新 UI。

# java - 从java中的另一个字符串中过滤掉一个字符串的所有实例

> ID：15607410
> 
> 赞同：0
> 
> 时间：2013-03-25T04:00:27.107
> 
> 标签：java, string, methods, filter

我想创建一个名为 filterOut 的方法，它接受两个字符串作为参数并返回第一个字符串，并删除了第二个字符串的所有实例。例如：filterOut("你好，我的朋友，你好吗？" , "h"); 返回“你好，我的朋友，你好吗？” 和 filterOut("abchelloabcfriendabc" , "abc"); 返回“你好朋友”

```
 public static String filterOut(String phrase, String second){
         int counter = 0;
         int length = phrase.length();
         String filtered = "";
         while(counter < length){
             String letter = phrase.substring(counter, counter + 1);
             if(!letter.equals(second)){
                 filtered = filtered + letter;
             }
             counter++;
         }
         return filtered;

    public static void main(String args[]){
         String next = filterOut("hello my friend, how are you?" , "h");
         System.out.println(next);                     
     } 
```

当我在 main 方法中使用它时，此代码仅适用于第一个示例。我怎样才能让它也适用于第二个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:07:25.077

你可以简单地做：

`str1.replace(str2, "");`

或者在你的例子中，

`second.replace(phrase, "");`

另外：没有必要为此编写一个方法，当已经有一个时:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:08:48.183

您可以使用[替换](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)

```
public static String filterOut(String phrase) {
    return phrase.replace(phrase, "");
} 
```

**编辑**：您也可以使用[拆分](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)方法

```
public static String filterOut(String phrase, String second) {
    String filtered = "";
    for (String each : phrase.split(second)) {
        filtered = filtered + each;
    }
    return filtered;
} 
```

您的方法不起作用，因为您在下面一行中逐个字符地比较。所以这就是为什么它`filterOut("hello my friend, how are you?" , "h");`适用于输入而不适用于输入`filterOut("abchelloabcfriendabc" , "abc");`

```
 String letter = phrase.substring(counter, counter + 1);
 if(!letter.equals(second)){
     filtered = filtered + letter;
 } 
```

# jquery - 使用变量不工作的 Jquery 动画（文字工作正常）

> ID：15607412
> 
> 赞同：2
> 
> 时间：2013-03-25T04:00:54.573
> 
> 标签：jquery, variables, jquery-animate, literals

编辑：已解决。我只需要在 newWidthO 和 newWidthP 上调用 .toString。我会回答我的问题，但由于声誉问题，我无法在 8 小时左右内完成。

-=--------------------------------

我正在编写一个简单的反射型游戏，玩家必须在一段时间内单击移动的 div。与赢得比赛所需的点数相比，条形应向右移动，与玩家的总点成比例。

这是代码：

```
var newWidthO = (((parseInt(reflexPointsAI, 10) / reflexRequiredWinPoints)*100)) + "%";
var newWidthP = (((parseInt(reflexPoints, 10) / reflexRequiredWinPoints)*100)) + "%";

$("#reflexTimer").html(newWidthO + " , " + newWidthP);

// $("#reflexOpponentScoreProgressBar").css('width', newWidthO );
//$("#reflexPlayerScoreProgressBar").css('width', newWidthP );

$("#reflexOpponentScoreProgressBar").animate( {"width" : newWidthO }, "fast" );
$("#reflexPlayerScoreProgressBar").animate( {"width" : newWidthP }, "fast" ); 
```

我遇到的问题是动画在它应该工作的时候似乎没有工作。此操作每四分之一秒调用一次。

如果我写一个文字代替`newWidthO`or `newWidthP`，说“50%”，代码会正确动画，但除此之外似乎什么都没有发生。div 显示每个值的`reflexTimer`格式都适合 CSS 样式表，例如“20%”等，所以我知道这些值是正确的。被注释掉的两行工作正常，并将条捕捉到正确的位置，但我希望使用动画的平滑过渡。

我是否遗漏了一些关于我应该如何格式化我的动画参数的内容？我看过其他类似的问题，但似乎没有一个能解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:39:46.847

傻我。当我的回答如此琐碎时，我讨厌它。

这是解决方案：为 newWidthO 和 newWidthP 调用 .toString()。

# java - 从 servlet 设置 html 标签的值

> ID：15607413
> 
> 赞同：1
> 
> 时间：2013-03-25T04:01:04.847
> 
> 标签：java, jsp, servlets

我不确定这可能吗？但是，我在 html 页面中有一个标签。

```
<label name='example'>Page 1</label> 
```

从控制器进入另一个页面后，我想将标签值更新为其他值`servlet`：

```
<label name='example'>Page 2 (update being update from servlet)</label> 
```

谁能理解我的问题和帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:11:35.567

无法直接更新它，因为 Page 2 的 servlet 只能写入对 Page 2 的响应。

但是，您可以使用 session 在页面之间共享/更新数据，更新第 2 页中的 session 变量并每隔几秒自动刷新第一个页面以反映该更改。

但是，如果您正在打开子窗口，那么您可以使用子窗口上的 JavaScript 来更新父页面上的项目。

# ibm-mobilefirst - IBM Worklight：直接更新

> ID：15607415
> 
> 赞同：0
> 
> 时间：2013-03-25T04:01:16.683
> 
> 标签：ibm-mobilefirst

我使用 Android 设备（Samsung Galaxy S3 Android 版本 4.1.1）来查看我的混合应用程序的应用程序信息。“应用程序”大小约为 10MB，“数据”大小约为 1MB。之后，我单击“清除数据”按钮，“数据”大小变为 0MB，“应用程序”大小保持不变。当我再次启动应用程序时，虽然没有新的应用程序发布，但直接更新框会出现（没有进行第二次构建）。这是预期的行为吗？工作灯版本：5.0.6

步骤：
1\. 将应用程序部署到 Worklight Server 并安装到设备中
2\. 更新 HTML 文件并进行构建
3\. 此时，设备显示直接更新对话框。将应用程序更新到最新版本。
4\. 点击应用信息中的“清除数据”
5\. 再次启动应用。它再次显示直接更新对话框，尽管在“清除数据”完成后没有发生第二次构建

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:52:31.733

根据您对已采取的步骤进行的编辑，是的，这是意料之中的。

在设备上安装应用程序时，客户端和服务器都会为其生成一个chucksum。触发直接更新后，此校验和值会更改并被记住。清除数据后，您基本上将应用程序返回到其先前的校验和，因此当应用程序重新启动（或从后台进入前台）时，服务器检测到服务器中的值与客户端中的值不同，并发送直接更新请求。

# php - PHP 正则表达式匹配模式 \\domain\username

> ID：15607424
> 
> 赞同：1
> 
> 时间：2013-03-25T04:02:11.613
> 
> 标签：php, regex, string, match, preg-match-all

我正在尝试使用 PHP 匹配格式为 \domain\username 的字符串，但我无法让它返回数组中的匹配片段。

```
$username = "\\domain\jason";    
$login = preg_match_all("/^\\\\[a-z0-9\-]+\\[a-z0-9\-]+$/i", $username, $found);
    var_dump($found);
    array
      0 => 
        array
          empty 
```

我用在线测试仪测试了我的常规表达式，它与字符串完美匹配。

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:07:31.123

您可以使用以下代码：

```
$username = "\\domain\jason";
if (preg_match_all('~\\\\?(\w+)~', $username, $arr))
   print_r($arr[1]); 
```

### 输出：

```
Array
(
    [0] => domain
    [1] => jason
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:15:36.650

如果您知道字段由 a 分隔，`\`请执行以下操作：

```
$username = '\\domain\jason';

$arr = explode('\\', $username);

echo $arr[1]; // domain
echo $arr[2]; // jason 
```

**[[演示](http://viper-7.com/YGFOx0)]**

# android - 我怎么知道安卓应用程序是否正在请求数据连接？

> ID：15607426
> 
> 赞同：1
> 
> 时间：2013-03-25T04:02:15.780
> 
> 标签：android, connectivity

我想创建一个服务来监控应用程序数据使用情况，并根据移动数据/WiFi 连接的可用性记录数据请求是否可以得到服务。

我想我可以使用 Traffic Stats API 找出哪个应用需要数据。但我（还）找不到可以检测连接请求的 API。

请帮我找到：

哪个 API 可用于查明应用程序是否提出了任何类型的数据连接请求。

和

如果 Traffic Stats 不是一种合适的方法，那么一种优雅的方法可以找出哪个应用程序正在请求它？

# java - Java制作有向线并使其移动

> ID：15607427
> 
> 赞同：1
> 
> 时间：2013-03-25T04:02:27.297
> 
> 标签：java, swing, graphics, paintcomponent, shapes

我想制作一条有向线并让它移动。我可以制作一条定向线并移动该线，但是当我移动该线时箭头会移位

这是我的绘画方法

```
 Line2D.Double line = new Line2D.Double(startX, startY, endX, endY);
                    g2d.draw(line);
                    tx.setToIdentity();                    
                  double angle = Math.atan2(line.y2 - line.y1, line.x2 - line.x1);
                   tx.translate(line.x2, line.y2);
                    tx.rotate((angle - Math.PI / 2d));
                    Graphics2D gClone = (Graphics2D) g2d.create();
                    gClone.setTransform(tx);
 Polygon arrowHead = new Polygon();
        arrowHead.addPoint(0, 15);
        arrowHead.addPoint(-15, -15);
        arrowHead.addPoint(15, -15);
                    Area area = new Arear(arrowHead );
                    Area lineArea = new Area(line);
                    lineArea.subtract(area);
                    gClone.fill(area);
                    gClone.dispose(); 
```

我已经更改了 startx 的值，并在鼠标按下时开始 y，在鼠标拖动时更改 endx 和 enny

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T04:38:31.280

这是一个基本示例，演示了使用`Path2D`, 定义自定义形状和`AffineTransformation`转换形状。

此示例将导致箭头在面板上移动时指向鼠标

![在此处输入图像描述](../Images/59e6f971bc8ed656f44edb9a0cea7d0d.png)

```
import java.awt.BasicStroke;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.Shape;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.AffineTransform;
import java.awt.geom.Path2D;
import javax.swing.JFrame;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class RotateArrow {

    public static void main(String[] args) {
        new RotateArrow();
    }

    public RotateArrow() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new RotatePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class RotatePane extends javax.swing.JPanel {

        private Point mousePoint;
        private PointyThing pointyThing;

        public RotatePane() {

            pointyThing = new PointyThing();

            addMouseMotionListener(new MouseAdapter() {
                @Override
                public void mouseMoved(MouseEvent e) {
                    mousePoint = e.getPoint();
                    repaint();
                }
            });

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            Graphics2D g2d = (Graphics2D) g.create();

            double rotation = 0f;

            int width = getWidth() - 1;
            int height = getHeight() - 1;

            if (mousePoint != null) {
                int x = width / 2;
                int y = height / 2;

                int deltaX = mousePoint.x - x;
                int deltaY = mousePoint.y - y;

                rotation = -Math.atan2(deltaX, deltaY);
                rotation = Math.toDegrees(rotation) + 180;
            }

            Rectangle bounds = pointyThing.getBounds();

            AffineTransform at = new AffineTransform();
            at.translate((width - bounds.width) / 2, (height - bounds.height) / 2);
            at.rotate(Math.toRadians(rotation), bounds.width / 2, bounds.height / 2);
            Shape shape = new Path2D.Float(pointyThing, at);

            g2d.setStroke(new BasicStroke(3));
            g2d.setColor(Color.RED);

            g2d.fill(shape);
            g2d.draw(shape);
            g2d.dispose();
        }
    }

    public class PointyThing extends Path2D.Float {

        public PointyThing() {
            moveTo(15, 0);
            lineTo(30, 15);
            lineTo(0, 15);
            lineTo(15, 0);
            moveTo(15, 15);
            lineTo(15, 60);
        }

    }
} 
```

**更新示例二**

基本上，这`PointyThing`仅将 用作箭头，并单独绘制线。

箭头是定向的，因此它将指向直线下方（朝向鼠标）

```
import java.awt.BasicStroke;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.Shape;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.AffineTransform;
import java.awt.geom.Line2D;
import java.awt.geom.Path2D;
import javax.swing.JFrame;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class RotateArrow {

    public static void main(String[] args) {
        new RotateArrow();
    }

    public RotateArrow() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new RotatePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class RotatePane extends javax.swing.JPanel {

        private PointyThing pointyThing;
        private Point mouseStart;
        private Point mouseEnd;

        public RotatePane() {

            pointyThing = new PointyThing();

            MouseAdapter ma = new MouseAdapter() {
                @Override
                public void mouseMoved(MouseEvent e) {
                    mouseEnd = e.getPoint();
                    repaint();
                }

                @Override
                public void mouseClicked(MouseEvent e) {
                    mouseStart = e.getPoint();
                    repaint();
                }
            };

            addMouseListener(ma);
            addMouseMotionListener(ma);

        }

        @Override
        public Dimension getPreferredSize() {

            return new Dimension(200, 200);

        }

        @Override
        protected void paintComponent(Graphics g) {

            super.paintComponent(g);

            Graphics2D g2d = (Graphics2D) g.create();
            if (mouseStart != null && mouseEnd != null) {

                double rotation = 0f;

                int width = getWidth() - 1;
                int height = getHeight() - 1;

                if (mouseEnd != null) {

                    int x = mouseStart.x;
                    int y = mouseStart.y;

                    int deltaX = mouseEnd.x - x;
                    int deltaY = mouseEnd.y - y;

                    rotation = -Math.atan2(deltaX, deltaY);
                    rotation = Math.toDegrees(rotation) + 180;

                }

                Rectangle bounds = pointyThing.getBounds();

                g2d.setStroke(new BasicStroke(3));
                g2d.setColor(Color.RED);
                g2d.draw(new Line2D.Float(mouseStart, mouseEnd));

                AffineTransform at = new AffineTransform();

                at.translate(mouseEnd.x - (bounds.width / 2), mouseEnd.y - (bounds.height / 2));
                at.rotate(Math.toRadians(rotation), bounds.width / 2, bounds.height / 2);
                Shape shape = new Path2D.Float(pointyThing, at);

                g2d.fill(shape);
                g2d.draw(shape);
            }
            g2d.dispose();

        }

    }

    public class PointyThing extends Path2D.Float {

        public PointyThing() {
            moveTo(15, 0);
            lineTo(30, 15);
            lineTo(0, 15);
            lineTo(15, 0);
        }

    }

} 
```

# jquery - jQuery 内容切换器只切换一次

> ID：15607429
> 
> 赞同：1
> 
> 时间：2013-03-25T04:02:29.333
> 
> 标签：jquery

我正在尝试使用[此内容切换器。](https://code.google.com/p/jquery-content-panel-switcher/)而且我已经让它在 JS Fiddle 中运行良好。但是当我尝试在我的网站上实现它时，它不能正常工作。第一个面板正确显示，当我单击链接时，它会正确淡入第二个面板。

但是，当我单击第一个或任何其他链接时，它会再次淡入相同的内容（从第一次单击的任何链接）。这是[带有损坏滑块的页面。](http://www.breadoflife.themiddlekingdom.org/)任何帮助将非常感激。

的HTML：

```
<div id="fp_nav" class="text_box">
   <a id="ourstory" class="switcher">Our Story</a> 
   <a id="ourpeople" class="switcher">Our People</a>
   <a id="ourcustomers" class="switcher">Our Customers</a> 
   <a id="contactus" class="switcher">Contact Us</a>
</div>

<div id="switcher-panel" class="content">  
   <div id="ourstory-content" class="switcher-content show"><strong>BREAD OF LIFE BAKERY</strong> is a non-profit organization run by physically disabled young adults...</div> 
   <div id="ourpeople-content" class="switcher-content"><strong>Our People</strong> are good people.</div>          
   <div id="ourcustomers-content" class="switcher-content"><strong>Our Customers</strong> are really good customers.</div>          
   <div id="contactus-content" class="switcher-content"><strong>Contact Us</strong> to order some really great bakery items.</div>
</div> 
```

和 jQuery：

```
var jcps = {};
jcps.fader = function (speed, target, panel) {
    jcps.show(target, panel);
    if (panel == null) {
        panel = ''
    };
    jQuery('.switcher' + panel).click(function () {
        var _contentId = '#' + jQuery(this).attr('id') + '-content';
        var _content = jQuery(_contentId).html();
        if (speed == 0) {
            jQuery(target).html(_content);
        } else {
            jQuery(target).fadeToggle(speed, function () {
                jQuery(this).html(_content);
            }).fadeToggle(speed);
        }
    });
};
jcps.slider = function (speed, target, panel) {
    jcps.show(target, panel);
    if (panel == null) {
        panel = ''
    };
    jQuery('.switcher' + panel).click(function () {
        var _contentId = '#' + jQuery(this).attr('id') + '-content';
        var _content = jQuery(_contentId).html();
        if (speed == 0) {
            jQuery(target).html(_content);
        } else {
            jQuery(target).slideToggle(speed, function () {
                jQuery(this).html(_content);
            }).slideToggle(speed);
        }
    });
};
jcps.show = function (target, panel) {
    jQuery('.show').each(function () {
        if (panel == null) {
            jQuery(target).append(jQuery(this).html() + '<br/>');
        } else {
            var trimPanel = panel.replace('.', '');
            if (jQuery(this).hasClass(trimPanel) == true) {
                jQuery(target).append(jQuery(this).html() + '<br/>');
            }
        }
    });
}

jQuery(document).ready(function () {
    jcps.fader(300, '#switcher-panel');
}); 
```

以及非常少量的 CSS：

```
.switcher-content {
display: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:22:29.270

问题：[小提琴](http://jsfiddle.net/arunpjohny/taDvA/)

一旦你删除了所有子元素，你就会在其中覆盖内容元素`#ourstory-content`等。然后在第二次单击期间，没有要获取的源 html，这就是它不起作用的原因`#ourpeople-content``#ourpeople-content``jQuery(this).html(_content)``var _content = jQuery(_contentId).html();`

这是因为你的 dom 操纵

解决方案

分离显示面板和源内容面板

```
<div id="switcher-panel" class="content">
</div>

<div id="switcher-panel1" class="content">
    <div id="ourstory-content" class="switcher-content show">
        <strong>BREAD OF LIFE BAKERY</strong> is a non-profit organization run by physically disabled young adults who have grown up in orphanages in China.
        All our profits are used to help orphans and children in China, especially those who are handicapped, by providing funds for surgeries, wheelchairs and other needs.
        Bread of Life Bakery is proud to be a sister organization to Agape Family Life House, continuing its mission by providing handicapped young adults with not only a job, but a promising future of independence through education, job readiness and a family.
    </div>
    <div id="ourpeople-content" class="switcher-content">
        <strong>Our People</strong> are good people.
    </div>
    <div id="ourcustomers-content" class="switcher-content">
        <p><strong>Our Customers</strong> are really good customers.</p>
    </div>
    <div id="contactus-content" class="switcher-content">
        <p><strong>Contact Us</strong> to order some really great bakery items.</p>
    </div>
</div>

#switcher-panel1 {
    display: none;
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/taDvA/1/)

# coldfusion - Cfdump 组件方法值，而不是组件结构

> ID：15607436
> 
> 赞同：2
> 
> 时间：2013-03-25T04:03:01.743
> 
> 标签：coldfusion, coldfusion-9

我最近开始使用 cfc 组件将用户信息存储在 Session 变量中。我曾经将它们作为单独的变量存储在 Session 中，例如 Session.UserId、Session.Firstname 或 Session.Lastname。这个新组件很好地为我将所有这些包装到一个组件中，其中包含我需要的每个值的 get 方法（即 Session.User.getUserId()、Session.User.GetName() 等）。

但是当我对会话变量进行 cfdump 以进行调试时，它会显示对象结构的元数据。我想查看组件的 get 方法返回的值。有什么方法可以使用 cfdump 输出带有对象元数据的函数值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T04:18:00.020

`<cfdump>`不是魔术，它所做的只是输出你给它的值。由于您的 CFC 实例没有公开任何反映这些值的公共属性，`<cfdump>`因此无法知道它们是什么。

如果您需要一次提取*所有*反映您以前会话范围的私有属性，那么您需要创建一个方法来执行此操作，然后`<cfdump>` *.* 例如：

```
public struct function getVariables(){
    return  variables;
} 
```

如果您正在进一步抽象您想要的值，例如到`variables.sessionStuff`(`variables.sessionStuff.userId`等`variables.sessionStuff.name`)，然后编写一个`getSessionStuff()`返回的方法`variables.sessionStuff`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T04:53:17.497

> 有什么方法可以使用 cfdump 输出带有对象元数据的函数值？

是的，使用访问器。

```
<cfcomponent accessors="true">
    <cfproperty name="userID">
    <cfproperty name="firstName">
    <cfproperty name="lastName">
</cfcomponent> 
```

试试`<cfdump>`这个对象，你会看到属性值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:54:29.297

不确定 Adob​​e 是否继续支持这一点，但在 ColdFusion 8 中，`THIS`范围内的任何变量都被自动视为公共（因此在 中可见`cfdump`），而显式使用`VARIABLES`范围则被视为私有（因此在 中不可见`cfdump`）。这样，当您在组件中保留组件引用时，您还可以避免堆栈溢出（cfdump 用于以递归方式解决它们以无限循环结束）。但话又说回来：这可能在 ColdFusion 9 及更高版本中已修复。

# javascript - Javascript：日期比较

> ID：15607446
> 
> 赞同：0
> 
> 时间：2013-03-25T04:05:08.947
> 
> 标签：javascript

```
<script>  
  dfrom = datefrom.split("/");
    dto = dateto.split("/");

     //Checking Year Part;
     if(parseInt(dfrom[2]) > parseInt(dto[2])){
      alert("DateFrom Cannot greater than DateTo");
      return false;
     }
     if((parseInt(dfrom[1]) > parseInt(dto[1])) && parseInt(dfrom[2]) == parseInt(dto[2])){
      alert("DateFrom Cannot greater than DateTo");
      return false;
     }
     if(parseInt(dfrom[0]) > parseInt(dto[0]) && (parseInt(dfrom[1]) == parseInt(dto[1])) &&    parseInt(dfrom[2]) == parseInt(dto[2])){
      alert("DateFrom Cannot greater than DateTo");
      return false;
     }
</script> 
```

这是我比较日期的脚本代码，工作正常，但是当我检查 07/04/2013 和 08/04/2013 时，它显示“ **DateFrom 不能大于 DateTo** ”，只有这些日期显示错误的结果。我的脚本中是否有任何错误或其他错误？

任何帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:08:34.603

尝试这个

```
dfrom = datefrom.split("/");
dto = dateto.split("/");

var x=new Date();
x.setFullYear(dfrom [2],dfrom [1]-1,dfrom [0]);

 var y=new Date();
y.setFullYear(dto [2],dto [1]-1,dto [0]);

if (x>y)
  {
  alert("X is big ");
  }
else
  {
  alert("Y is big");
  } 
```

[看这里](http://www.w3schools.com/js/js_obj_date.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:23:29.290

在解释 parseInt 函数的参数时，当字符串以“0”开头（例如，'07'、'08'）时，旧版浏览器将默认使用八进制基数（base-8 编号系统）。从 ECMAScript 5 开始，默认值为十进制基数 (10)（即，这很棘手，但至少现在它已被贬值）。

换句话说，如果您将以 0 开头的字符串 ("01") 或数字 (01) 传递给 parseInt 而不指定第二个参数（radix，这意味着什么编号系统），它们将被解释为具有基数 8。这意味着 07 === 7 和 08 可能具有未定义的行为（0，“”，未定义，谁知道？）。

为了安全起见，在处理日期（我知道我这样做）时，始终将第二个参数中的基数设置为 parseInt，例如 parseInt(x, 10) 用于常规基数 10。

顺便说一句，前面带0的数字表示其他语言的八进制基数，所以在将字符串转换为数字时最好去掉它们。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T04:45:08.763

比较日期字符串的最简单方法是将它们转换为日期对象并进行比较，因此如果您的日期字符串格式为 d/m/y。你可以做：

```
// s in format d/m/y
// e.g. 15/3/2013 or 15/03/2013
function toDate(s) {
  var s = s.split('/');
  return new Date(s[2], --s[1], s[0]);
}

var d0 = '3/3/2013';
var d1 = '15/3/2013';

// Compare dates
alert( toDate(d0) < toDate(d1) );  // true

alert( toDate(d1) < toDate(d0) );  // false 
```

在比较或算术运算中使用时，Date 对象被强制转换为一个数字，即它们的[时间值](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.1)。

# websphere - RAD 自带的 Websphere

> ID：15607448
> 
> 赞同：-1
> 
> 时间：2013-03-25T04:05:11.957
> 
> 标签：websphere

我们的一些 Java 应用程序在 WebSphere 5.1 上运行。我正在尝试设置我的开发环境。

到目前为止，我在想...

适用于 WebSphere Application Server 7.0 版的 Spring STS Eclipse Developer 工具 WebSphere Application Server 7.0 Developers Edition

我相信 Websphere 7.0 应该没问题，因为我们使用的是 J2EE 1.3。

不过，我确实设法获得了随 WebSphere Application Server 5.1 一起提供的 RAD 试用版，但是我们不打算购买许可证。

如果我撕掉随 RAD 提供的 WAS 5.1，任何人都可以就我是否违反许可协议给我建议？RAD 附带的版本是开发者版本吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:58:01.790

如果您担心许可问题，请咨询您的经理或团队负责人。IBM 处理许可的方式可能因产品、贵公司与 IBM 的关系以及您最初购买产品的方式而异。贵公司内的某个人应该知道贵公司与 IBM 签订的许可协议。

我知道，对于我当前的项目，我们可以在本地机器上免费运行一个 WAS 实例。每次我们需要设置一个新的共享环境时，比如测试或生产，我们就需要为新的许可证付费。这对你来说可能是同样的情况，但这不是这里任何人都能真正回答的问题。

# asp.net - 访问动态输入文本字段

> ID：15607450
> 
> 赞同：0
> 
> 时间：2013-03-25T04:05:18.180
> 
> 标签：asp.net, dynamic, input, radio-button, controls

我有一个页面，其中包含许多动态 RadiobuttonLists 供用户选择。有时，每个 RadiobuttonList 的 ListItems 旁边都有文本框。

例如

(o) Listitem [文本框]

(o) Listitem2

(o) Listitem3 [文本框]

我编码的方式是（伪代码）：

```
Foreach RadiobuttonList

RadioButtonList radioOption = new RadioButtonList();

name = "inputName" + i.ToString();    

radioOption.Items.Add(new ListItem("ListItem" + " <input id=\"" + name + "\" name=\"name\" type=\"text\" value=\"Enter text\" />")) 
```

我的问题是，由于输入文本框是以这种方式声明/创建的，我如何访问用户在每个文本框中输入的文本？

如何遍历所有输入框并打印出输入的详细信息？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:54:14.180

提交到页面的任何输入都可以从`Request.Form`集合中访问。

您可以获得如下值：

```
var name = "inputName" + i.ToString();  
var listItemValue = Request.Form[name]; 
```

# string - 为什么在 Linux64 下使用 .ptr 修补字符串会失败，但在 Win32 下不会？

> ID：15607451
> 
> 赞同：3
> 
> 时间：2013-03-25T04:05:31.483
> 
> 标签：string, pointers, portability, d

为什么下面的小示例在 Linux64 下失败而在 Windows32 下失败？

```
module test;

import std.string, std.stdio;

void main(string[] args)
{
    string a = "abcd=1234";
    auto b = &a;
    auto Index = indexOf(*b, '=');

    if (Index != -1)
        *cast (char*) (b.ptr + Index) = '#';

    writeln(*b);
    readln;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T09:34:40.923

要记住的一件事是这`string`是一个别名，`(immutable char)[]`这意味着尝试写入元素是未定义的行为

我认为行为不同的原因之一是在 linux64 下，编译器将字符串数据放在写保护的内存中，这意味着`*cast (char*) (b.ptr + Index) = '#';`失败（静默或使用 segfault）

# c++ - 类定义中的结构实例产生编译器错误

> ID：15607453
> 
> 赞同：0
> 
> 时间：2013-03-25T04:06:06.093
> 
> 标签：c++

在头文件中，我有一些效果：

```
class MoveableObject
{
   public:

    static float Gravity;
    static float JumpSpeed;
    static float MoveSpeed;

    struct State;
    struct Derivative;

    State current;
    State previous;
}; 
```

尝试编译时出现错误：

```
12:9: error: field 'current' has incomplete type
13:9: error: field 'previous' has incomplete type 
```

这可能是一个非常基本的错误，但我很难过。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:08:22.737

前向声明，例如：

```
struct State;
struct Derivative; 
```

仅在您操作指针或引用时才适用于声明（因为编译器总是知道指针或引用的大小；但是它无法猜测用户定义类型的大小）。

如果你希望你的类保持现在的样子，你必须包含定义结构状态的头文件。

否则，切换到指针！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:20:06.827

在问题的代码中，`State`是一个嵌套类型 inside `MovableObject`。为了能够在定义中创建类型的成员，必须在定义中内`State`联：`MovableObject``State``MovableObject`

```
class MovableObject {
public:
   struct State { ... };
   State current;
}; 
```

# c# - 如何制作通用单例基类 C#

> ID：15607454
> 
> 赞同：5
> 
> 时间：2013-03-25T04:06:10.243
> 
> 标签：c#, generics, singleton

我正在尝试创建一个通用的单例基类，例如

```
public class SingletonBase<T> where T : class, new()
{
    private static object lockingObject = new object();
    private static T singleTonObject;
    protected SingletonBase()
    {

    }

    public static T Instance
    {
        get
        {
            return InstanceCreation();
        }
    }
    public static T InstanceCreation()
    {
        if(singleTonObject == null)
        {
             lock (lockingObject)
             {
                  if(singleTonObject == null)
                  {
                       singleTonObject = new T();
                  }
             }
        }
        return singleTonObject;
    }
} 
```

但我必须在派生的构造函数中公开构造函数。

```
public class Test : SingletonBase<Test>
{
    public void A()
    {

    }
    private Test()
        : base()
    { }
} 
```

编译错误：

> “Test”必须是具有公共无参数构造函数的非抽象类型，以便在泛型类型或方法“Test”中将其用作参数“T”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T04:21:41.137

问题是您的通用约束`where T : class, new()`。约束要求 T 上有一个公共的`new()`、无参数的构造函数。没有办法解决这个问题；您需要在`Permission Controller`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T04:11:41.007

我会避免这种递归通用模式。阅读这篇[博](http://blogs.msdn.com/b/ericlippert/archive/2011/02/03/curiouser-and-curiouser.aspx)文，详细了解该模式以及*不*使用它的原因。

据我所知，你不需要有任何`SingletonBase<T>`. 我看不到任何子类`SingletonBase<T>`能够添加到您的代码中的东西。我会简单地将其重写为

```
public static class Singleton<T> where T : class, new()
{
    ...
} 
```

然后，您可以将其用作

```
var test = Singleton<Test>.Instance; 
```

如果您希望能够`Test`用作单例，请将其创建为

```
public class Test 
{
    public static T Instance
    {
        get { return Singleton.Instance<Test>; }
    }
} 
```

# php - 如何保护用户不上传 php 脚本？

> ID：15607466
> 
> 赞同：1
> 
> 时间：2013-03-25T04:07:44.603
> 
> 标签：php, upload

如何保护用户不上传 php 脚本？

我将以下代码放入（ /uploads/ ）文件夹的 .htaccess 中。

```
<Files ^(*.php|*.phps)>
order deny,allow
deny from all
</Files>
<FilesMatch "\.(php|pl|py|jsp|asp|htm|shtml|sh|cgi.+)$">
ForceType text/plain
</FilesMatch> 
```

但我仍然可以上传 php 文件和 php 文件仍然是可执行的。我或代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:15:24.617

```
$allowed_ext = array("png","jpeg","gif");
$file_name = $_FILES['file']['name'];
$file_ext = end(explode(".",$file_name));
if(in_array($file_ext,$allowed_ext)){
//uplod_here;
}
else{
//reject
} 
```

# iphone - 应用程序在某些国家/地区崩溃

> ID：15607467
> 
> 赞同：3
> 
> 时间：2013-03-25T04:07:47.573
> 
> 标签：iphone, objective-c, crash

我们的 iPhone 应用程序已经在 App Store 上，在某些国家/地区运行良好，但在巴西、墨西哥等其他国家/地区崩溃。有什么方法可以在我的模拟器中模拟不同的国家/地区吗？我尝试通过更改位置。现在获取崩溃日志很困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:04:20.007

在您的测试设备中转到设置-区域设置。使用不同的语言环境进行测试。如果您的应用程序涉及日期格式化程序/日期选择器，则可能会出现这些问题。

不同的语言环境有不同的日期格式。即可能是 24 小时或 12 小时，具体取决于地区。

在此处设置日期格式化程序的语言环境是代码。

```
NSLocale *enUSPOSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
[dateFormatter setLocale:enUSPOSIXLocale]; 
```

# java - 改进搜索功能

> ID：15607476
> 
> 赞同：2
> 
> 时间：2013-03-25T04:09:08.617
> 
> 标签：java, sql, performance, jsp, search

如何改进搜索功能。？我写了一些代码来搜索一些东西。搜索花费了太多时间。还有这里的代码片段，

我正在使用这种方法从数据库中提取数据。，

```
 OracleConnection connection = null;
   OraclePreparedStatement ptmst = null;
   OracleResultSet rs = null;
   OracleCallableStatement cstmt = null;
   StringBuffer strBfr = new StringBuffer();
   ArrayList myList = new ArrayList();
    try
    {     
      connection = (OracleConnection) TransactionScope.getConnection();
      strBfr.append("select distinct .......... ");  
      ptmst = (OraclePreparedStatement)connection.prepareStatement(strBfr.toString());    
      rs = (OracleResultSet)ptmst.executeQuery();           
      while (rs.next()) 
                {               
                HashMap hashItems = new HashMap();
                hashItems.put("first",rs.getString(1));
                hashItems.put("second",rs.getString(2));    
                myList.add(hashItems);
                }       

    }
    catch (Exception e) {
        }
    finally {

            try {
                if (ptmst != null) {
                    ptmst.close();
                }
            } catch (Exception e) {
            }

            try {
                if (connection != null) {
                    TransactionScope.releaseConnection(connection);
                }
            } catch (Exception e) {
            }

        }
        return myList; 
```

在我的jsp中：

```
 ArrayList getValues = new ArrayList();     
    getValues = //calling Method here.
    for(int i=0; i < getValues.size();i++)  
    {
    HashMap quoteSrch=(HashMap)allPOV.get(i);                        
    first = (String)quoteSrch.get("first");
    second = (String)quoteSrch.get("second");
    } 
```

询问：

```
SELECT DISTINCT(mtl.segment1),
  mtl.description ,
  mtl.inventory_item_id ,
  mtl.attribute16
FROM mtl_system_items_b mtl,
  mtl_system_items_tl k
WHERE 1                           =1
AND mtl.organization_id           = ?
AND k.inventory_item_id           = mtl.inventory_item_id
AND NVL(orderable_on_web_flag,'N')= 'Y'
AND NVL(web_status,'UNPUBLISHED') = 'PUBLISHED'
AND mtl.SEGMENT1 LIKE ?  --Here is the search term 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:46:21.153

首先你需要找出真正的问题

*   是数据库查询吗
*   是网络吗（应用程序和数据库是否位于同一台机器上？）

一旦您确定它是数据库查询，那么它就更像是一个数据库问题。

*   两张桌子长什么样？
*   使用的任何索引？
*   数据看起来如何（多少行等）

分析完这一点后，您应该能够以不同的方式发布问题并期待答案。我不是数据库专家，但我相信有人能够提供一些指示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T04:36:16.010

确保 organization_id 、 inventory_item_id 尤其是**SEGMENT1**在您的表中被索引。

您的查询非常标准，如果这不起作用，那么您的数据库服务器似乎响应缓慢，这可能是由于空间不足、内存不足、磁盘/读取速度慢等多种原因造成的。

然后，您可以要求您的 DBA/服务器管理员进行检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T05:00:39.380

必须进行调谐：

1.  检查`TransactionScope.getConnection();`正在立即提供连接。
2.  而不是创建新的`HashMap hashItems = new HashMap();`，你可以使用

    ```
    while (rs.next()){
      myList.add(rs.getString(1) + "delimiter" + rs.getString(2)); 
    } 
    ```

在jsp中使用

```
first = allPOV.get(i).split("delimter")[0];
second = allPOV.get(i).split("delimter")[1]; 
```

这样可以**减少内存**。

1.  如果可能，请在查询中使用限制，并在**SEGMENT1** [链接](http://www.rampant-books.com/t_oracle_sql_tuning_tips.htm)上使用索引。

# asp.net - MVC 3 将 null 从视图传递到控制器

> ID：15607479
> 
> 赞同：2
> 
> 时间：2013-03-25T04:09:16.277
> 
> 标签：asp.net, asp.net-mvc-3

每当我尝试使用模型将值从视图传递给控制器​​时，它在控制器中显示为 null。我在项目的另一部分尝试了一些非常相似的东西，但没有遇到这个问题。为什么这回来为空？

这是来自控制器的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MovieProject2.Models;

namespace MovieProject2.Controllers
{

public class ReviewsController : Controller
{
public ActionResult Edit(int id = -1)
{
    if (id < 0)
    return HttpNotFound();
    MovieReview review = MovieADO.getReviewByID(id);
    return View(review);
}

[HttpPost]
public ActionResult Edit(MovieReview review)
{
    if (review == null) return HttpNotFound();
    return View(review);
}
} 
```

看法：

```
@model MovieProject2.Models.MovieReview

@{
    ViewBag.Title = "Edit Review";
}

@{  //Not null here
    if(@Model != null) {<h2>Edit Review for @Model.MovieReviewed.Title</h2>
    <h4>Reviewed by @Model.Reviewer.Username</h4>}
                                                 else{<h2>Not Found</h2>
}
}

@using (Html.BeginForm())
{
    Html.ValidationSummary(true);
    <fieldset>
        <div class="editor-label">
            @Html.LabelFor(itemModel => Model.Rating)
        </div>
        <div class="editor-label">
            @Html.EditorFor(itemModel => Model.Rating)
            @Html.ValidationMessageFor(itemModel => Model.Rating)
        </div>
        <div class="editor-label">
            @Html.LabelFor(itemModel => Model.Review)
        </div>
        <div class="editor-label">
            @Html.EditorFor(itemModel => Model.Review)
            @Html.ValidationMessageFor(itemModel => Model.Review)
        </div>
        <p>
            <input type="submit" value="Change" />
        </p>
    </fieldset> 

} 
```

模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MovieProject2.Models
{
    public class MovieReview
    {
        public int ReviewID { get; set; }
        public Movie MovieReviewed { get; set; }
        public User Reviewer { get; set; }
        public int Rating { get; set; }
        public string Review { get; set; }
        public DateTime DateReviewed { get; set; }

        public MovieReview() { }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T05:24:48.143

代替

```
[HttpPost]
public ActionResult Edit(MovieReview review) 
```

写

```
[HttpPost]
public ActionResult Edit(MovieReview model) 
```

（并在该方法中进一步将其重命名为*review*为*model*。它应该可以工作。

或者

将 MovieReview.Review 的属性重命名为其他名称（例如 Review1）。您不能为属性和传递的模型对象使用相同的名称（不区分大小写）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:53:06.887

你必须试试这个

```
@using (Html.BeginForm("Action methodName","controllerName")) 
```

# python - 发布更多文件并将它们保存到 db - django

> ID：15607486
> 
> 赞同：0
> 
> 时间：2013-03-25T04:10:27.393
> 
> 标签：python, html, django

我正在尝试将更多文件保存到数据库中。我`POST`以这种方式发送和捕获服务器：

html: `<input type="file" multiple="multiple" name="images[]"/>`

服务器代码 - django：

`images = request.POST.getlist('images[]')`. 但我得到的只是一个空数组。`[]`.

现在我的问题是我不知道如何将这些文件与其他数据一起保存到数据库中。好吧，我想，我会运行一个循环，`images[]`但我手头还有其他数据

编辑：例如，我有一个位置的街道名称、城市、国家和 3 张照片。如果我循环超过 3 张图像，我将在 db 中保存街道名称、城市、国家三次，这是愚蠢的。我只想保存一个位置的 3 张图片和其他数据一次。现在我想到了一个解决方案：我将创建单独的表命名`Image`然后我有两个地方要保存：分别保存图像和将数据分别保存到不同的表中。我对这个解决方案好吗？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:33:25.910

```
if request.method == 'POST':
    images = request.POST.getlist('images[]')
    other_field = request.POST.get('other_field')

    for i in range(len(images)):
        data = MyModel()
        data.images = images[i]
        data.other_field = other_field
        data.save() 
```

# sql - 如何设置从一个表中获取的值等于另一个表访问的条件

> ID：15607489
> 
> 赞同：0
> 
> 时间：2013-03-25T04:10:40.140
> 
> 标签：sql, ms-access

我有 2 个表操作列表和优先级。这两个表共享一些相似的属性，即类别和子类别。ActionList 和 Priorities 有父子关系，Priorities 为父级。我想做几件事。1\. ActionList 是半独立的。2\. ActionList 需要从 KP 表中获取 subcategory 和 Priorities。3\. 当我确实从 AL 表中获得子类别时，我希望它是“不同的” 因此，例如，我输入了 4 个不同的类别 - 网站、ChinaT、EastTiger 和 BlueMountain，所有这些类别都针对不同的优先级重复两次。我已经插入不同但失败了。4\. 当我点击优先级下拉菜单时，我希望它按子类别进行过滤。例如，在 KP 表中，Subcat 网站有 2 个优先级，即提供时事通讯和投放视频。在ChinaT，客户服务是首要任务，

干杯，

安德烈亚斯。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-30T14:59:44.187

我在数据库中工作，我的想法是，例如；公司有很多职位作为经理，他可以得到 4 门课程，团队领导，他可以得到 3 门课程，普通员工得到 2 门。当每个职位达到限制时，我需要知道是否需要得到消息？如你所知，我有很多团队领导和员工。谢谢你

# cordova - PhoneGap 2.5 的语法是否改变了？

> ID：15607497
> 
> 赞同：-1
> 
> 时间：2013-03-25T04:11:44.940
> 
> 标签：cordova

我是PhoneGap的新手。我设置了一个新的 PhoneGap 项目并查看了默认生成的函数。它们的结构如下：

```
onDeviceReady: function() {
        //do something
    } 
```

我看到的每个 PhoneGap 示例都有以下语法：

```
 function onDeviceReady() {       
        //do something
    } 
```

我在 PhoneGap 示例中看到了我的函数，但它不起作用。是否已弃用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:28:19.117

两者都是正确的 javascript 语法并根据您声明对象的方式使用。

使用对象字面量表示法，您将看到如下内容：

```
app = {
   onDeviceReady: function(){ }  
} 
```

而使用“正常”的方式是这样的：

```
function onDeviceReady(){

}

app.onDeviceReady = onDeviceReady 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:00:50.197

您看到的示例将具有类似 function onDeviceReady() { //do something } 的代码

函数和设备就绪之间没有冒号。所以两者都应该工作。

# mysql - 在这种情况下首选哪种数据结构/类型

> ID：15607499
> 
> 赞同：0
> 
> 时间：2013-03-25T04:12:23.803
> 
> 标签：mysql, sql

我是 mysql 新手，我的第一个项目是创建一个学生课堂场景的数据库。

我决定制作一个“学生”表，然后认为每个学生都可能是一个或多个班级的成员，所以在我看来，学生表中会有一个列显示“班级”现在什么数据类型是合适的为了那个原因？一个类将包含一个名称字符串，然后是时间表（MTh，10:30-11:30）。或者我应该只制作一个“类”表，然后其中一列将包含属于该类的所有学生的姓名，那么应该为长的“列表”类字符串使用什么数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:17:53.707

每个班级可以有很多学生，每个学生可以有很多班级。因此，您的难题是是将学生记录在班级表中，还是将班级记录在学生表中。

在关系数据库中，您应该有三个表：

*   一张学生桌；
*   一张桌子上课；
*   一张有配对的桌子：每排一个学生是一个班级的成员。

这样做更加灵活和通用。

另请参阅我对[在数据库列中存储分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-delimited-list-in-a-database-column-really-that-bad/3653574#3653574)

# java - 从当前日期减去两天（以纪元毫秒为单位）java

> ID：15607500
> 
> 赞同：11
> 
> 时间：2013-03-25T04:12:36.073
> 
> 标签：java, date, epoch, milliseconds, subtraction

我正在尝试做一些非常简单的事情。我试图从当天减去 2 天。我从 UI 获得小时数。所以在这个例子中，我从 UI 得到了 48 小时。我正在做以下事情，我不知道我在这里做错了什么。我认为这样做的结果是它只减少了几分钟的时间。

```
long timeInEpoch = (currentMillis()/1000 - (48 * 60 * 60)); //48 comes from UI

public long currentMillis(){
    return new Date().getTime();
}

d = new Date(timeInEpoch * 1000); 
```

我也试过

```
d1 = new Date(timeInEpoch); 
```

似乎没有任何效果。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-25T04:41:42.883

尝试

```
 long millis = System.currentTimeMillis() - 2 * 24 * 60 * 60 * 1000; 
    Date date = new Date(millis); 
```

它绝对有效

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T04:29:05.967

使用这样的[日历](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#add%28int,%20int%29)API 从`Date`对象中减去 2 天：

```
Calendar c = Calendar.getInstance();
c.setTime(d);
c.add(Calendar.DATE, -2);
d.setTime( c.getTime().getTime() );

long millisec = d.getTime(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T04:41:40.687

您的代码没问题，您的变量 d 应该与服务器上的当前时间相差 48 小时。

**确保服务器和您的客户端同时运行，**否则请您的服务器管理员修复部署机器上的时间。

如果您的客户端在日本打开浏览器并且您的服务器由于标准时差而在美国运行，您也会注意到这种差异。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-29T18:22:32.693

避免使用旧的 java.util.Date 和 .Calendar 类，因为它们非常麻烦。

使用 Joda-Time 或 Java 8 中内置的新 Java.time 包。在 StackOverflow 上搜索数百个问题和答案。

Joda-Time 提供了增加和减少小时、天等的方法。数学以一种聪明的方式完成，处理夏令时废话和其他问题。

Joda-Time 2.7 中的快速示例（因为这确实是一个重复的问题，请参阅其他人了解更多信息）。

```
DateTimeZone zone = DateTimeZone.forID( "America/Montreal" );
DateTime now = DateTime.now( zone );
DateTime fortyEightHoursAgo = now.minusHours( 48 );
DateTime twoDaysAgo = now.minusDays( 2 ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T04:24:57.390

尝试这个

```
 long diff = Math.abs(d1.getTime() - d2.getTime());
   long diffDays = diff / (2*24 * 60 * 60 * 1000); 
```

# .net - 无需注册即可创建自定义文化

> ID：15607503
> 
> 赞同：7
> 
> 时间：2013-03-25T04:12:47.383
> 
> 标签：.net, localization, cultureinfo

是否可以创建自定义文化而不在 Windows 中注册？每个解决方案和文档都引用[CultureAndRegionInfoBuilder](http://msdn.microsoft.com/en-us/library/system.globalization.cultureandregioninfobuilder.aspx)类，并`Register`在创建新文化后调用。但是自定义文化的注册会改变操作系统中可见的文化，此外它还需要管理员权限。

如果不可能，有两种方法可以避免注册新文化：

1.  尽可能避免使用自定义文化，即坚持标准文化。现在可以用，不知道能用多久。
2.  在应用程序安装期间注册自定义文化。这不是选项，因为我们无法保证管理员权限，因为我们想远程更新应用程序。

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T18:35:17.190

您必须注册自定义文化才能使用它。

# javascript - 可以在javascript中使用带有标签的break吗？

> ID：15607505
> 
> 赞同：-3
> 
> 时间：2013-03-25T04:12:54.783
> 
> 标签：javascript, readability, code-readability

这样做有什么好处吗？它会导致可读性问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T04:15:59.943

虽然我不相信编码中有太多的*绝对*性，但我会说我很少在 Javascript 中使用标签。

事实上，我不相信我曾经使用过它们的所有语言。

由于给出了强大的结构，`for ...` `for ... in` `while` `do ... while` `if ... else`并且能够尽早执行`return`几乎任何您需要标签的事情，都可以以更清晰的结构编写。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T04:35:50.667

标签通常在 JavaScript 中用于中断外部循环。例如：

```
while (true) {
    while (true) {
        if (someCondition) break;
    }
} 
```

在这个程序中，你只会`break`从内部循环。外循环将无限循环。但是，有时您可能希望从外循环而不是内循环中断。您为此目的使用标签：

```
loop: while (true) {
    while (true) {
        if (someCondition) break loop;
    }
} 
```

话虽如此，如果您有很多嵌套循环或 switch case，那么使用标签实际上确实有助于提高代码的可读性，即使它实际上可能不会影响程序本身。

以这个问题中的代码为例：[https ://codereview.stackexchange.com/q/14532/15640](https://codereview.stackexchange.com/q/14532/15640)

在这里，我们在 for 循环中有一个 switch case，尽管它使用我们永远不需要跳出 for 循环标记循环，并且 switch case 可能会帮助一些人。对其他人来说，这只是一种干扰。

最后归结为您的编程风格。初学者通常喜欢给所有东西贴标签。经验丰富的程序员会发现太多的评论和标签很烦人。

Steve Yegge 实际上为此写了一篇完整的博客文章。你可能会觉得它很有趣：[http ://steve-yegge.blogspot.in/2008/02/portrait-of-n00b.html](http://steve-yegge.blogspot.in/2008/02/portrait-of-n00b.html)

尝试不带注释的编码：http: [//www.codinghorror.com/blog/2008/07/coding-without-comments.html](http://www.codinghorror.com/blog/2008/07/coding-without-comments.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T04:20:24.857

我很难考虑需要嵌套循环的时候，并且有必要从内部按名称打破外部循环，而不是简单地检查外部循环底部的值来决定是否继续或不...

通常，该结构将比`break third_from_outer_loop;`or更容易遵循`continue loop_that_is_two_loops_higher`。

如果你已经准备好从最里面打破最外面的循环，那么为什么不早点回来呢？

# php - 在 WHILE 循环内 - 试图踢到不同的位置

> ID：15607506
> 
> 赞同：0
> 
> 时间：2013-03-25T04:12:55.623
> 
> 标签：php, mysql

我调用了一个在 CNT 字段中有 4 个“行”数据的数据库。(2,1,3,1) 我想合计这些，当我达到最大数字时，跳到另一个 php 页面。如果计数低于最大值，则下面还有另一个 header("Location...) 命令。

它不会踢出去 - 你能给我任何建议吗

```
 $Count = 0;
    $Max = 5;
    While ($row = mysql_fetch_assoc($result)) { 
        $Count = $Count + $row["Cnt"];
        If ($Count > $Max) { 
            header("Location: pareAbilities.asp?Who=".$Who."&Logcode=".$LogCode."&A=".$row['A']."&B=".$row['B']."&CNT=".$Count );
        } 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:18:21.563

[在Header](http://php.net/manual/en/function.header.php)之后使用[exit()](http://www.php.net/manual/en/function.exit.php)

```
If ($Count > $Max) { 
   header("Location: pareAbilities.asp?Who=".$Who."&Logcode=".$LogCode."&A=".$row['A']."&B=".$row['B']."&CNT=".$Count );
   exit();
} 
```

[PHP - 我应该在调用 Location: 标头后调用 exit() 吗？](https://stackoverflow.com/questions/3553698/php-should-i-call-exit-after-calling-location-header)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:27:38.553

在不知道您在循环中还做了什么的情况下.. 下面的代码会更快更容易阅读。

*   使用 SQL SUM 函数对 CNT 列求和
*   [`http_build_query`](http://php.net/http_build_query)建立您的重定向位置
*   [`sprintf`](http://php.net/sprintf)整理你的串联
*   添加[`die`](http://php.net/die)以阻止页面的其余部分进行可能的处理

对您的答案重要的是`die`. 还要确保在执行之前没有其他输出发送到浏览器。[`header`](http://php.net/header)只能在还没有输出时发送。如果您不能如此轻松地停止输出，请尝试查看输出缓冲：[`ob_start`](http://php.net/ob_start) [`ob_flush`](http://php.net/ob_flush)

```
// SUM(CNT) as sum_cnt automagically does the calculation
$query = mysql_query("SELECT SUM(CNT) as sum_cnt, A, B, CNT FROM table");
$result = mysql_fetch_assoc($query);

if($result['sum_cnt'] > $Max) {
    $querystring = http_build_query( // builds the query string for you
            array(
                'Who' => $Who,
                'Logcode' => $LogCode,
                'A' => $result['A'],
                'B' => $result['B'],
                'CNT' => $result['sum_cnt'],
            )
    );
    header( // sprintf is very nice to keep long concat strings tidy
            sprintf(
                    "Location: pareAbilities.asp?%s", 
                    $querystring
            )
    );
    die(); // Added die here to stop other code from executing
} 
```

# database-normalization - 如何规范医生表以遵循 2NF？

> ID：15607508
> 
> 赞同：2
> 
> 时间：2013-03-25T04:13:00.053
> 
> 标签：database-normalization

`doctor`我的数据库中有一个基表，其中有列

```
Name, d_ID, Age, Gender, Contact_NO, Speciality, beg_Date, End_Date 
```

我希望规范化我的表。我发现医生表的依赖关系如下：

```
Name, d_ID ---> Age, gender, Speciality
d_ID----> Name, Contanct_NO, Beg_Date, End_Date 
```

还有一些具有类似结构的基表。

我计算了闭包，发现我有 2 个候选键，它们是`{d_ID}`和`{Name,d_ID}`。我选择`{d_ID}`了做主键和`{Name,d_ID}`副键。

我的问题是：

1.  我想知道我的桌子是否已经在 2NF 中。如果没有，请告诉我如何分解关系？

2.  我有一个名为的中间表`patient_record`，它有 、 、 、`doctor id`等等`patient id`。我的困惑在于，如果只对中间表而不是其他基表进行规范化。我相信这一点，因为基表的列只有唯一标识符，因此它们会自动落入 2NF 之下？`nurse id``bed id (foreign key)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:13:34.900

> 我计算了闭包，发现我有 2 个候选键，它们是 {d_ID} 和 {Name,d_ID}（如果我错了，请纠正我）。

不，根据定义，候选键是不可约的。如果 d_ID 是候选键，则 {Name, d_ID} 不是。{Name, d_ID} 不是候选键，因为它是可约的。删除属性“名称”，您就有了一个候选键 (d_ID)。

> 1）我想知道我的桌子是否已经在 2NF 中。如果没有，请告诉我如何分解关系？

在这种情况下真的很难说。尽管您对每位医生都有一个唯一的 ID 号，但在您的情况下，它仅用于识别一行，而不是医生。您的表允许此类数据。

```
d_ID   Name         Age  Gender  Contact_NO     Speciality   beg_Date    End_Date
--
117    John Smith   45   M       123-456-7890   Cardio       2013-01-01  2015-12-31
199    John Smith   45   M       123-456-7890   Cardio       2013-01-01  2015-12-31
234    John Smith   45   M       123-456-7890   Cardio       2013-01-01  2015-12-31 
```

有多少医生？（我编了数据，所以我真的是唯一知道正确答案的人。）有两个。234 是 117 的意外复制。199 与 117 是不同的医生；巧合的是，他们都是同一家医院的心脏病专家，而且他们的医院特权在同一天开始和结束。

这就是识别行和识别医生的区别。

它是否在 2NF 中取决于可能尚未确定的其他功能依赖关系。其中可能有几个。

> 2）我有一个名为 Patient_record 的中间表，其中包含医生 ID、患者 ID、护士 ID、床 ID（外键）等。如果只对中间表而不是其他基表进行规范化，我会感到困惑。

通常对所有表进行规范化。

> 因为基表只有列的唯一标识符，因此它们会自动属于 2NF？

不，那不是真的。如需澄清，请参阅我对 Learning database normalization 的回答[，对 2NF 感到困惑](https://stackoverflow.com/a/15168242/562459)。

* * *

**识别行和识别事物**

这是一个微妙的点，但它非常非常重要。

让我们看一个具有三个候选键的表现良好的表。

```
create table chemical_elements (
  element_name varchar(35) not null unique,
  symbol varchar(3) not null unique,
  atomic_number integer not null unique
); 
```

该表中的所有三个属性都已声明`not null unique`，这是用于识别候选键的 SQL 习惯用法。如果您对没有将至少一个候选键声明为 感到不舒服`primary key`，那么只需选择一个。哪一个并不重要。

```
insert into chemical_elements
(atomic_number, element_name, symbol)
values
(1, 'Hydrogen', 'H'),
(2, 'Helium', 'He'),
(3, 'Lithium', 'Li'),
(4, 'Beryllium', 'Be'),
[snip]
(116, 'Ununhexium', 'Uuh'),
(117, 'Ununseptium', 'Uus'),
(118, 'Ununoctium', 'Uuo'); 
```

三个候选键中的每一个——atomic_number、element_name、symbol——都明确地标识了现实世界中的一个元素。“铍的原子序数是多少？”这个问题只有一个可能的答案。

现在看看医生表。对于这个问题，有不止一个可能的答案：“名叫‘约翰·史密斯’的医生的身份证号码是多少？” *事实上，对于同一个医生*，有不止一个可能的答案，因为 234 和 117 指的是同一个人。

包含更多列没有帮助，因为两位医生的数据相同。你可以得到不止一个问题的答案，“这位名叫‘约翰·史密斯’的 45 岁男医生的身份证号码是多少，他的电话号码是 123-456-7890，专长是‘心电图’ ？”

如果您发现有人为这两位医生预约，您可能会发现他们的身份证号码写在黄色便签纸上并贴在他们的显示器上。

*   约翰史密斯博士，他看起来像布拉德皮特 (!)，ID 117。
*   其他 John Smith 博士，ID 199。

每个 ID 号明确地标识数据库中的一行，但每个 ID 号*并没有*明确地标识医生。您知道 ID 117 标识了一位名叫 John Smith 的医生，但如果两个 John Smith 都站在您面前，您将无法分辨哪一个属于 ID 号 117。（除非您读过那张黄色便签，并且你知道布拉德皮特长什么样子。但*这些*信息不在数据库中。）

**这和你的问题有什么关系？**

规范化是基于函数依赖的。当我们谈论“功能依赖”时，我们在谈论什么“功能”？我们正在谈论[*身份功能*](http://en.wikipedia.org/wiki/Identity_function)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T09:41:20.740

这是规范化过程：

1.  识别关系的所有候选键。
2.  识别关系中的所有功能依赖关系。
3.  检查函数依赖的行列式。如果任何行列式不是候选键，则关系不是很好。然后
4.  i) 将函数依赖的列放在它们自己的新关系中。

    ii) 使函数依赖的行列式成为新关系的主键。

    iii) 在原始关系中保留一份行列式作为外键。

5.  在原始关系和新关系之间创建参照完整性约束。

# php - php没有在数据库上显示结果

> ID：15607509
> 
> 赞同：0
> 
> 时间：2013-03-25T04:13:09.593
> 
> 标签：php, mysql, database

我有一个包含 4 个表的数据库。（产品、采购、客户、用户）。当我尝试在 中显示所有行时`products`，没有结果。但在`user`表格中，它显示。应该是什么问题？它在我的数据库中吗？表？php 代码？

这是我的代码：

```
<?php

$db = mysqli_connect("localhost","root","", "prodpurchase");
if (!$db) {
die('Could not connect: ' . mysqli_error());
}

$sql = mysqli_query($db, "select * from user");
if( $sql === FALSE ) {
  die('Query failed returning error: '. mysqli_error());
} else {
   while($row=mysqli_fetch_array($sql))
   {
    echo $row['username']. "<br>";
   }
}
?> 
```

希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:19:25.897

您的代码中有库存，但在您的问题中，您将表命名为 products，就这么简单吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:34:20.440

您是否检查了表格列中的大写和小写字母？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T04:28:09.900

您的代码引用了一个`inventory`表，但您说您的数据库有一个`products`表（并且没有`inventory`表）。因此，查询失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T04:19:08.130

```
echo $row['item']. "<br>"; 
```

什么是“物品”？您不应该通过 $row[0] 或 $row['products'].. 或其他列之一来选择它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T04:21:34.087

检查您的变量，对于您的示例，尝试将您的变量重命名`$sql`为其他名称，因为您的代码中的某处可能有一个类似的变量，但您没有显示。

尝试这个 ：

```
<?php

$db = mysqli_connect("localhost","root","", "prodpurchase");
if (!$db) {
die('Could not connect: ' . mysqli_error());
}

$sqlstackoverflow = mysqli_query($db, "select * from user");
if($sqlstackoverflow === FALSE ) {
  die('Query failed returning error: '. mysqli_error());
} else {
   while($row=mysqli_fetch_array($sqlstackoverflow))
   {
    echo $row['username']. "<br>";
   }
}
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T04:38:04.220

***只需尝试以下内容：***

```
<?php
$db = mysqli_connect("localhost","root","","prodpurchase");
if (!$db) {
die('Could not connect: ' . mysqli_error());
}
$sql = mysqli_query($db,"select * from user");
if( $sql === FALSE ) {
  die('Query failed returning error: '. mysqli_error());
} else {
   while($row=mysqli_fetch_array($sql,MYSQLI_ASSOC))
   {    
    echo $row['username']."<br>";    
   }
}
?> 
```

我认为这可以帮助您解决问题。

# java - 试图在 java 中创建一个简单的时钟（ish）应用程序 - 似乎不能这样做

> ID：15607512
> 
> 赞同：0
> 
> 时间：2013-03-25T04:13:25.673
> 
> 标签：java, android, string, sqlite, timepicker

所以......我正在构建一个小应用程序，当用户从 TimePicker 按钮设置时间​​值时存储时间值。由于 android TimePicker 有两个值 currentHour 和 currentMinute 我想我需要创建两个字符串（一个用于小时，一个用于分钟）然后将它们连接成一个可以显示为时间值的字符串。

很简单，对吧？

到目前为止，我已经提出了下面的源代码 - 我觉得我几乎将 TimePicker 连接到时间值的字符串，但是我有 3 个问题：

```
timePicker cannot be resolved   AddEditCountry.java line 104
minEdit cannot be resolved or is not a field    AddEditCountry.java line 37 
timePicker cannot be resolved   AddEditCountry.java line 103 
```

...更不用说 TimePicker 按钮不会更改（组合 currentHour 和 currentMinute）字符串。

^ - 大问题

```
AddEditCountry.java

import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TimePicker;

public class AddEditCountry extends Activity {

     private long rowID; 
     private EditText nameEt;
     private EditText capEt;
     private EditText codeEt;
     private TimePicker timeEt;
     private TimePicker minEt;
     public static final String KEY_BUNDLE_TIME = "time";
     public static final String KEY_BUNDLE_MIN = "min";

       @Override
       public void onCreate(Bundle savedInstanceState) 
       {
          super.onCreate(savedInstanceState); 
          setContentView(R.layout.add_country);

          nameEt = (EditText) findViewById(R.id.nameEdit);
          capEt = (EditText) findViewById(R.id.capEdit);
          codeEt = (EditText) findViewById(R.id.codeEdit);
          timeEt = (TimePicker) findViewById(R.id.timeEdit);
          minEt = (TimePicker) findViewById(R.id.minEdit);

          Bundle extras = getIntent().getExtras(); 

          if (extras != null)
          {
             rowID = extras.getLong("row_id");
             nameEt.setText(extras.getString("name"));  
             capEt.setText(extras.getString("cap"));  
             codeEt.setText(extras.getString("code"));
             timeEt.setCurrentHour(extras.containsKey(KEY_BUNDLE_TIME) ? extras.getInt(KEY_BUNDLE_TIME) : 0);
             minEt.setCurrentMinute(extras.getInt("min"));
          }

          Button saveButton =(Button) findViewById(R.id.saveBtn);
          saveButton.setOnClickListener(new OnClickListener() {

              public void onClick(View v) 
              {
                 if (nameEt.getText().length() != 0)
                 {
                    AsyncTask<Object, Object, Object> saveContactTask = 
                       new AsyncTask<Object, Object, Object>() 
                       {
                          @Override
                          protected Object doInBackground(Object... params) 
                          {
                             saveContact();
                             return null;
                          }

                          @Override
                          protected void onPostExecute(Object result) 
                          {
                             finish();
                          }
                       }; 

                    saveContactTask.execute((Object[]) null); 
                 }

                 else
                 {
                    AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                    alert.setTitle(R.string.errorTitle); 
                    alert.setMessage(R.string.errorMessage);
                    alert.setPositiveButton(R.string.errorButton, null); 
                    alert.show();
                 }
              } 
         });
       }

           private void saveContact() 
           {
              DatabaseConnector dbConnector = new DatabaseConnector(this);

              if (getIntent().getExtras() == null)
              {
                  dbConnector.insertContact(nameEt.getText().toString(),
                          capEt.getText().toString(),
                          timeEt.getCurrentHour().toString(),
                          minEt.getCurrentMinute().toString(),
                          codeEt.getText().toString(),
                          timePicker.getCurrentHour().toString(),
                          timePicker.getCurrentMinute().toString());

              }
              else
              {
                 dbConnector.updateContact(rowID,
                    nameEt.getText().toString(),
                    capEt.getText().toString(),
                    timeEt.getCurrentHour().toString(),
                    minEt.getCurrentMinute().toString(),/* Storing as String*/
                    codeEt.getText().toString());
              }
           }
}

DatabaseConnector.java

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DatabaseConnector {

    public static final String KEY_BUNDLE_TIME = "time";
    public static final String KEY_BUNDLE_MIN = "min";
    private static final String DB_NAME = "WorldCountries";
    private SQLiteDatabase database;
    private DatabaseOpenHelper dbOpenHelper;

    public DatabaseConnector(Context context) {
        dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
    }

       public void open() throws SQLException 
       {
          //open database in reading/writing mode
          database = dbOpenHelper.getWritableDatabase();
       } 

       public void close() 
       {
          if (database != null)
             database.close();
       }       

       public void insertContact(String name, String cap, String code, String time, String min) 
               {
                  ContentValues newCon = new ContentValues();
                  newCon.put("name", name);
                  newCon.put("cap", cap);
                  newCon.put("time", time);
                  newCon.put("min", min);
                  newCon.put("code", code);
                  newCon.put(AddEditCountry.KEY_BUNDLE_TIME, time);
                  newCon.put(AddEditCountry.KEY_BUNDLE_MIN, min);

                  open();
                  database.insert("country", null, newCon);
                  close();
               }

               public void updateContact(long id, String name, String cap,String code, String time, String min) 
               {
                  ContentValues editCon = new ContentValues();
                  editCon.put("name", name);
                  editCon.put("cap", cap);
                  editCon.put("time", time);
                  editCon.put("min", min);
                  editCon.put("code", code);
                  editCon.put(AddEditCountry.KEY_BUNDLE_TIME, time);
                  editCon.put(AddEditCountry.KEY_BUNDLE_MIN, min);
                  open();
                  database.update("country", editCon, "_id=" + id, null);
                  close();
               }

               public Cursor getAllContacts() 
               {
                  return database.query("country", new String[] {"_id", "name"}, 
                     null, null, null, null, "name");
               }

               public Cursor getOneContact(long id) 
               {
                  return database.query("country", null, "_id=" + id, null, null, null, null);
               }

               public void deleteContact(long id) 
               {
                  open(); 
                  database.delete("country", "_id=" + id, null);
                  close();
               }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:28:27.377

代码中有很多问题。

首先，您不需要单独的 TimePicker 小部件用于小时和分钟。所以从你的代码和布局文件中删除*minEt 。*

其次，*timePicker*变量没有在类中声明。请改用*timeEt*。

第三，我在类中找不到*minEdit*变量，如果它在布局中声明，那么编译器不应该抱怨。无论如何删除它，因为你不需要它。

您可能想查看一个使用 TimePicker 的工作示例。看看[这个](http://www.appsrox.com/android/tutorials/remindme/6/)。

*示例活动*：

```
public class TimePickerActivity extends Activity {

    public static final int DIALOG_TIME = 100;
    private TextView timeText;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        timeText = new TextView(this);
        setContentView(timeText);
    }   

    @Override
    protected void onResume() {
        super.onResume();
        showDialog(DIALOG_TIME);
    }

    @Override
    protected Dialog onCreateDialog(final int id) {
        switch(id) {
        case DIALOG_TIME:
            Calendar cal = Calendar.getInstance();
            TimePickerDialog.OnTimeSetListener mTimeSetListener =
                new TimePickerDialog.OnTimeSetListener() {
                    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
                        timeText.setText(hourOfDay+":"+minute);
                    }
                };
            return new TimePickerDialog(this, mTimeSetListener, cal.get(Calendar.HOUR_OF_DAY), cal.get(Calendar.MINUTE), true);
        }
        return super.onCreateDialog(id);
    }   
} 
```

# mysql - MySql - 按月份名称排序

> ID：15607516
> 
> 赞同：10
> 
> 时间：2013-03-25T04:13:53.627
> 
> 标签：mysql, sql-order-by

我正在尝试按月份名称订购 mysql 查询，例如：

```
January --  5
February -- 2
March    -- 5
and so on 
```

这是我的查询，但它没有排序：

```
SELECT leave_balance.balance, MonthName(leave_balance.date_added) AS month 
FROM leave_balance WHERE leave_balance.staff_id_staff = $iid 
GROUP BY month,  leave_balance.leave_type_id_leave_type 
HAVING leave_balance.leave_type_id_leave_type = $leaveBalTypID 
ORDER BY month 
```

请告诉我我做错了什么

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-25T04:17:34.873

你可以指定像

```
ORDER BY FIELD(MONTH,'January','February','March',...)

SELECT leave_balance.balance, MonthName(leave_balance.date_added) AS month 
FROM leave_balance WHERE leave_balance.staff_id_staff = $iid 
GROUP BY month,  leave_balance.leave_type_id_leave_type 
HAVING leave_balance.leave_type_id_leave_type = $leaveBalTypID 
ORDER BY FIELD(MONTH,'January','February','March',...,'December'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-02-08T23:42:45.143

只需在查询语句的末尾添加：

```
ORDER BY str_to_date(MONTH,'%M') 
```

如果将来列名发生更改，您将无需担心。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-25T04:18:06.053

尝试使用内置的月份函数来获取月份的编号和顺序。例如：

```
order by month(leave_balance.date_added) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T04:54:29.803

只需按`leave_balance.date_added`字段排序。默认情况下，它将按月排序。

# java - 想要从struts2网页动态执行一个java类（包含main）

> ID：15607517
> 
> 赞同：1
> 
> 时间：2013-03-25T04:14:29.293
> 
> 标签：java, struts2

我想在 Struts2.0 中创建一个网页，其中包含一个文本区域、一个属性字段和提交按钮。用户将在此文本区域中输入 java 代码，我的代码将编译并执行它，并将在我的属性字段中给出此代码的结果......上述代码在独立应用程序中运行良好。但它在我的 Web 应用程序中没有显示任何内容。请任何人都可以解决它...在此先感谢。

```
package org.controller;

import com.opensymphony.xwork2.ActionSupport;

import java.io.BufferedReader;

import java.io.File;

import java.io.FileOutputStream;

import java.io.InputStreamReader;

public class JCompilerAction extends ActionSupport 
{

String program;

String MSg;
public JCompilerAction() {
}
public String getProgram() {
    return program;
}
public void setProgram(String program) {
    this.program = program;
}
public String getMSg() {
    return MSg;
}
public void setMSg(String MSg) {
    this.MSg = MSg;
}
public String Compile() {
    try {
        byte[] bFile = program.getBytes();
        File f = new File("D:/nullprog.java");
        FileOutputStream fileOuputStream = new FileOutputStream(f);
        fileOuputStream.write(bFile);
        fileOuputStream.close();
        Process p1 = Runtime.getRuntime().exec("javac  D:/nullprog.java");
        BufferedReader in = new BufferedReader(new InputStreamReader(p1.getErrorStream()));
        String line = null;
        boolean isError = false;
        while ((line = in.readLine()) != null) {
            MSg = line;
            isError = true;
            return SUCCESS;
        }
        p1.waitFor();
        if (!isError) 
        {
            Process p2 = Runtime.getRuntime().exec("cmd /c start nullprog");
            BufferedReader in1 = new BufferedReader(new InputStreamReader(p2.getInputStream()));
            String line1 = null;
            while ((line1 = in1.readLine()) != null) {
                MSg += line1;
            }
            return SUCCESS;
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return SUCCESS;
}
public String execute() {
    return SUCCESS;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:56:54.880

下面是一个简单的程序，它首先编译代码然后执行它：

**执行器.java**

```
import java.lang.reflect.Method;

public class Executer {
    public static void main(String args[]) {
        try{
            java.lang.Process p1 = Runtime.getRuntime().exec("javac  MyClass.java");
            p1.waitFor();
            Class<?> c = Class.forName("MyClass");
            Object obj = c.newInstance();
            Method[] mArr = obj.getClass().getMethods();
            for(Method m : mArr){
                if(m.getName().equalsIgnoreCase("main")){
                    m.invoke(obj, new Object[]{new String[]{}});
                }
            }
        } catch (Exception e){
            e.printStackTrace();
        }
    }
} 
```

**MyClass.java**

```
import javax.swing.JOptionPane;

public class MyClass {
    public static void main(String[] args) {
        JOptionPane.showMessageDialog(null, "Hii");
    }
} 
```

为简单起见，这两个类都在同一个包中。当我执行 Executer 类时，它首先编译 MyClass.java 然后运行 ​​main 方法。

如果您的要求是将 Java 文件放在项目外部的某个文件夹中，要加载编译器类文件，您需要按照[此](https://stackoverflow.com/a/9195661/960778)答案中的说明进行操作。

# joomla - 编辑时的Joomla自定义字段类型

> ID：15607520
> 
> 赞同：0
> 
> 时间：2013-03-25T04:14:54.067
> 
> 标签：joomla, joomla2.5, custom-field-type

如何做到这一点，以便在我编辑条目时，为我的自定义字段类型选择正确的值？到目前为止我有这个：

```
class JFormFieldCustom extends JFormField {

    protected $type = 'Custom';

    // getLabel() left out

    public function getInput() {

            return '<select id="'.$this->id.'" name="'.$this->name.'">'.
                        '<option value="1" >1</option>'.
                        '<option value="2" >2</option>'.
                    '</select>';
    } 
```

}

如何将选定的值传递给此类，以便可以执行以下操作：

```
<option value="1"SELECTED>1</option> 
```

或者

```
<option value="2" SELECTED>2</option> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T08:39:44.990

使用已经存在的东西更容易，即扩展`JFormFieldList`代替`JFormField`，然后您所要做的就是`option's`为您的列表返回 。继承的功能将为您完成其余的工作 - 包括选择匹配的选项`$this->value`

```
<?php
/**
 * Do the Joomla! security check and get the FormHelper to load the class
 */
defined('_JEXEC') or die('Restricted Access');

JFormHelper::loadFieldClass('list');

class JFormFieldMyCustomField extends JFormFieldList
{
    /**
     * Element name
     *
     * @var     string
     */
    public  $type = 'MyCustomField';

    /**
     * getOptions() provides the options for the select
     *
     * @return  array
     */
    protected function getOptions()
    {
        // Create an array for our options
        $options = array();
        // Add our options to the array
        $options[] = array("value" => 1, "text" => "1);
        $options[] = array("value" => 1, "text" => "1);
        return $options;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:05:33.943

用于`$this->value`获取选定的值。试试这个-

```
 class JFormFieldCustom extends JFormField {

        protected $type = 'Custom';

        // getLabel() left out

        public function getInput() {

                return '<select id="'.$this->id.'" name="'.$this->name.'">'.
                            '<option value="1" <?php echo ($this->value==1)?'selected':''?>>1</option>'.
                            '<option value="2" <?php echo ($this->value==2)?'selected':''?>>2</option>'.
                        '</select>';
        }
    } 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-13T12:49:58.037

选择 Joomla http://www.gnu.org/licenses/gpl-2.0.html GNU/GPL * @copyright (c) 2017 YouTech Company。版权所有。* @author macasin */ 定义（'_JEXEC'）或死；

JFormHelper::loadFieldClass('list');

类 JFormFieldSelect 扩展 JFormFieldList { protected $type = 'select';

```
protected function getInput()
{
    $html = array();
    $attr = '';

    // Initialize some field attributes.
    $attr .= !empty($this->class) ? ' class=select ' . $this->class . '"' : ' class=select ';
    $attr .= $this->readonly ? ' readonly' : '';
    $attr .= $this->disabled ? ' disabled' : '';
    $attr .= !empty($this->size) ? ' size="' . $this->size . '"' : '';
    $attr .= $this->required ? ' required aria-required="true"' : '';

    // Initialize JavaScript field attributes.
    $attr .= $this->onchange ? ' onchange="' . $this->onchange . '"' : '';

    // Get the field options.
    $options = $this->getOptions();

    // Load the combobox behavior.
    JHtml::_('behavior.combobox');

    $html[] = '<div class="select input-append">';

    // Build the input for the combo box.
    $html[] = '<select name="' . $this->name . '" id="' . $this->id . '" value="'
        . htmlspecialchars($this->value, ENT_COMPAT, 'UTF-8') . '"' . $attr . ' autocomplete="off" >';

    foreach ($options as $option)
    {
        $html[] = '<option '.($option->value == $this->value ? "selected" : "").' value='.$option->value.'>' . $option->text . '</option>';

    }
    $html[] = '</select></div>';

    return implode($html);
} 
```

}

# asp.net-mvc-3 - 无法抛出 httpResponseException

> ID：15607525
> 
> 赞同：0
> 
> 时间：2013-03-25T04:15:37.930
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, asp.net-web-api, wcf-web-api

当我尝试从我的控制器中抛出以下禁止的 ResponseException 时。异常说明“处理 HTTP 请求导致异常。有关详细信息，请参阅此异常的 'Response' 属性返回的 HTTP 响应。” 在控制器方法的 catch 块中被捕获。需要帮助来解决这个问题

```
throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.Forbidden)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:58:07.237

如果它是 HttpResponseException，只需更改您的控制器实现以重新抛出：

```
try
{
    // action implementation
}
catch (Exception e)
{
    if (e is HttpResponseException)
    {
        throw e;
    }
    // error handling logic
} 
```

但更好的答案是＃1 - 你应该避免捕获所有异常，这是不好的做法。#2 - 您应该使用异常过滤器来进行错误处理，而不是自己捕获异常。

# c# - 如何使用脚本从 C# 对 SQL 数据库执行 DDL

> ID：15607527
> 
> 赞同：0
> 
> 时间：2013-03-25T04:15:59.070
> 
> 标签：c#, sql-server, entity-framework

我以前使用过以下运行良好的脚本：

```
 public const string application =
@"SET IDENTITY_INSERT Application ON
INSERT INTO Application(ApplicationId, Name, ModifiedDate) VALUES (1, 'x', getdate() );
INSERT INTO Application(ApplicationId, Name, ModifiedDate) VALUES (2, 'y', getdate() );
INSERT INTO Application(ApplicationId, Name, ModifiedDate) VALUES (3, 'z', getdate() );
SET IDENTITY_INSERT Application OFF
DBCC CHECKIDENT( 'Application', RESEED )"; 
```

现在我想执行 DDL，但我收到一条错误消息：

```
 public const string dropCreate =
        @"
        GO
        ALTER TABLE [dbo].[TestAccount] DROP CONSTRAINT [TestAccount_Application]
        GO
        DROP TABLE [dbo].[TestAccount]
        GO
        SET ANSI_NULLS ON
        GO        
        SET QUOTED_IDENTIFIER ON
        GO  
        CREATE TABLE [dbo].[TestAccount](
            [TestAccountId] [int] IDENTITY(1,1) NOT NULL,
            [Name] [nvarchar](35) NOT NULL,
            [ApplicationId] [int] NOT NULL,
            [RowVersion] [timestamp] NOT NULL,
            [ModifiedDate] [datetime] NOT NULL,
        PRIMARY KEY CLUSTERED 
        (
            [TestAccountId] ASC
        )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
        ) ON [PRIMARY]
        GO
        ALTER TABLE [dbo].[TestAccount]  WITH CHECK ADD  CONSTRAINT [TestAccount_Application] FOREIGN KEY([ApplicationId])
        REFERENCES [dbo].[Application] ([ApplicationId])
        ON DELETE CASCADE
        GO       
        ALTER TABLE [dbo].[TestAccount] CHECK CONSTRAINT [TestAccount_Application]
        GO";
}

   HResult=-2146232060
   Message=Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'.
Incorrect syntax near 'GO'. 
```

我可以从 C# 执行 DDL。我正在使用的代码如下所示：

```
context.Database.ExecuteSqlCommand(TestAccountSQL.dropCreate); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:18:16.620

`GO`不是 SQL 关键字；它由 SQL Server Management Studio 解释。

您需要将每个批次作为单独的`ExecuteSql`调用发送，或使用 SQL Server 管理对象 (SMO)。

请参阅[我的相关问题](https://stackoverflow.com/questions/40814/how-do-i-execute-a-large-sql-script-with-go-commands-from-c)以获得一些帮助。

# function - Haxe：字段的返回值

> ID：15607529
> 
> 赞同：0
> 
> 时间：2013-03-25T04:16:02.830
> 
> 标签：function, variables, return, field, haxe

出于某种原因，我无法修改 Haxe 中字段的值。当然，这似乎并没有影响到我所有的领域，只是这个领域。这是（我很确定是）适用的代码。首先，在父类中：

```
class TopMenu extends Sprite 
{
    public function new() 
    {
        super();
        init();
    }
    private function init() 
    {
        var tempField:BitmappedTextField = new BitmappedTextField( "File", 100, false );
        trace( tempField.textWidth );
    }
} 
```

然后，在子类中：

```
class BitmappedTextField extends Sprite
{
    private var _fieldText:String;
    private var _fieldWidth:Int;
    private var _addToStage:Bool;
    public var textWidth:Int;
    public function new( thisText:String, thisWidth:Int = 100, adTStg:Bool = true ) 
    {
        super();
        _fieldText = thisText;
        _fieldWidth = thisWidth;
        _addToStage = adTStg;
        textWidth = 55;
        init();
    }
    public function init()
    {
        textWidth = 777;
    }
} 
```

我希望该`trace`语句能够返回`777`，但它总是会返回`55`。事实上，无论我做什么，我似乎都无法修改构造函数类之外的字段，然后通过父类检索该值。我一定错过了一些非常简单的东西，但我就是想不通。也许这与 Haxe 使用 getter 和 setter 的方式有关？任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:34:40.373

但是，我无法重现您的问题，并且您缺少 ; 和一个超级电话。

试试这个代码。

```
package;

import nme.display.Sprite;
import nme.display.MovieClip;

class HelloWorld extends MovieClip
{
        public function new( )
        {
            super();
            var tempField:BitmappedTextField = new BitmappedTextField();
            trace( tempField.textWidth );
        }
}

class BitmappedTextField extends Sprite
{
        public var textWidth:Int;

        public function new( )
        {
            super();
            textWidth = 55;
            init( );
        }

        public function init( )
        {
            textWidth = 777; 
        }
} 
```

# orchardcms - Orchard CMS：奇怪的时间戳行为

> ID：15607530
> 
> 赞同：0
> 
> 时间：2013-03-25T04:16:09.307
> 
> 标签：orchardcms, orchardcms-1.6

当我发布一篇文章时，我注意到每当我在上午 8 点之前发布一篇文章（我已将网站设置为 GMT +8），所述文章的日期将始终为 dd-1，这反过来会影响路由。我的服务器在 Arvixe 上。如何在不修改代码的情况下解决此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:49:50.180

使用日期标记时，所有值默认为 UTC。`.Local`您可以通过像这样附加来获取本地值：

```
{Date.Local} 
```

或使用格式选项：

```
{Date.Local.Format:yyyy/MM/dd} 
```

对于内容项的创建日期：

```
{Content.Date.Local.Format:yyyy/MM/dd} 
```

# iphone - iphone游戏中的Nextpeer警报：您已与服务器断开连接

> ID：15607537
> 
> 赞同：0
> 
> 时间：2013-03-25T04:17:08.257
> 
> 标签：iphone, cocos2d-iphone, multiplayer, nextpeer

我们在其中一款游戏中使用[了 nextpeer](http://nextpeer.com/)多人 sdk。它工作了 2 天，现在它显示警报 - “您已与服务器断开连接。请稍后再试”。

![在此处输入图像描述](../Images/9e83e281f935fa8afe11019ba7579eab.png) ![在此处输入图像描述](../Images/7a96cb612e9210a63de0eb676bd4e63c.png)

这是我的 nextpeer 初始化代码。

```
-(void)initializeNextpeer:(NSDictionary *)launchOptions
{
    BOOL isRetina = (IS_IPAD) ? FALSE : TRUE ;

    NSDictionary* settings = [NSDictionary dictionaryWithObjectsAndKeys:

                              // This game has no retina support - therefore we have to let the platform know
                              [NSNumber numberWithBool:isRetina], NextpeerSettingGameSupportsRetina,
                              // Support orientation change for the dashboard notifications
                              [NSNumber numberWithBool:TRUE], NextpeerSettingSupportsDashboardRotation,
                              // Support orientation change for the in game notifications
                              [NSNumber numberWithBool:TRUE], NextpeerSettingObserveNotificationOrientationChange,
                              //  Place the in game notifications on the bottom screen (so the current score will be visible)
                              [NSNumber numberWithInt:NPNotificationPosition_TOP], NextpeerSettingNotificationPosition,
                              nil];

    [Nextpeer initializeWithProductKey:@"47874e79e3b0d02c4fe1847fbdb54a1d2e02b943"
                            andSettings:settings
                          andDelegates:[NPDelegatesContainer containerWithNextpeerDelegate:self]];

    // Register for push notifications
    [[UIApplication sharedApplication]
     registerForRemoteNotificationTypes:
     UIRemoteNotificationTypeBadge |
     UIRemoteNotificationTypeSound |
     UIRemoteNotificationTypeAlert];

    // Handle any notifications the game was launched with
    [Nextpeer handleLaunchOptions:launchOptions];

} 
```

为什么现在突然停止工作并显示此警报？有人遇到过类似的问题吗？

# opengl - openGL 灯不会随相机移动

> ID：15607538
> 
> 赞同：0
> 
> 时间：2013-03-25T04:17:13.433
> 
> 标签：opengl, pyopengl

帮助我了解为什么我的灯处于固定位置并且不会跟随眼睛/相机。openGL常见问题解答似乎说您只是在对世界中的对象进行任何变换之前设置了灯光的位置，并且您只能设置一次......但是灯光仍然保持在固定位置。

```
import pyglet

from pyglet.gl import *
from pyglet.window import key
from pyglet.graphics import draw
from vector_math import *

win = pyglet.window.Window()
keys = key.KeyStateHandler()
win.push_handlers(keys)

rtri = 0.0
eye_vec = [0, 0, 2]
center_vec = [0, 0, 0]
up_vec = [0, 1, 0]
center_dist = 3.0

glClearColor(0.0, 0.0, 0.0, 0.0)    # This Will Clear The Background Color To Black
glClearDepth(1.0)                   # Enables Clearing Of The Depth Buffer
glDepthFunc(GL_LESS)                # The Type Of Depth Test To Do
glEnable(GL_DEPTH_TEST)             # Enables Depth Testing
glEnable(GL_LINE_STIPPLE)
glEnable(GL_BLEND)
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)
glShadeModel(GL_SMOOTH)             # Enables Smooth Color Shading

glViewport(0,0,win.width,win.height)
glMatrixMode(GL_PROJECTION)
glLoadIdentity()                    # Reset The Projection Matrix
# Calculate The Aspect Ratio Of The Window
gluPerspective(45.0, float(win.width) / float(win.height), 0.01, 100.0)

glMatrixMode(GL_MODELVIEW)
glLoadIdentity()
glPushMatrix()

glTranslatef(0.0, 0.0, 0.5)
glLightfv(GL_LIGHT0, GL_POSITION, (GLfloat * 4)(0.0, 0.0, 0.0, 1))
glLightfv(GL_LIGHT0, GL_DIFFUSE, (GLfloat * 3)(40.0, 40.0, 40.0))
glLightfv(GL_LIGHT0, GL_QUADRATIC_ATTENUATION, (GLfloat * 1) (.35))

glEnable(GL_LIGHT0)

glPopMatrix()

def move_eye_in(going_in):
    global center_dist
    global eye_vec
    center_dist += (-0.3 if going_in else 0.3)
    eye_vec = vec_scalar_mul(vec_normalize(eye_vec), center_dist)

def rotate_eye(is_left):
    global eye_vec

    print 'center_vec', center_vec
    print 'eye_vec', eye_vec

    center_minus_eye = vec_sub(center_vec, eye_vec)
    print 'center_minus_eye', center_minus_eye

    print 'up_vec', up_vec
    look_vec = vec_scalar_mul(vec_normalize(vec_cross(up_vec, center_minus_eye)), 0.5)
    print 'look_vec', look_vec

    eye_plus_look_vec = vec_add(eye_vec, look_vec) if is_left else vec_sub(eye_vec, look_vec)
    print 'eye_plus_look_vec', eye_plus_look_vec

    eye_vec = vec_scalar_mul(vec_normalize(eye_plus_look_vec), center_dist)

def move_eye(x, y, z):
    eye_vec[0] += x
    eye_vec[1] += y
    eye_vec[2] += z

def draw_pyramid(dim):
    glBegin(GL_TRIANGLES)

    glColor3f(1.0, 1.0, 0.0);   # yellow
    glVertex3f(0.0, dim, 0.0);  # Top Of Triangle (Right)
    glVertex3f(-dim, -dim, dim); # Left Of Triangle (Right)
    glVertex3f(dim, -dim, dim);

    glColor3f(1.0, 0.0, 0.0);   # red
    glVertex3f(0.0, dim, 0.0);  # Top Of Triangle (Right)
    glVertex3f(dim, -dim, dim); # Left Of Triangle (Right)
    glVertex3f(dim, -dim, -dim);

    glColor3f(0.0, 1.0, 0.0);   # green
    glVertex3f(0.0, dim, 0.0);      # Top Of Triangle (Back)
    glVertex3f(dim, -dim, -dim);    # Left Of Triangle (Back)
    glVertex3f(-dim, -dim, -dim)

    glColor3f(0.0, 0.0, 1.0);   # blue
    glVertex3f(0.0, dim, 0.0);      # Top Of Triangle (Left)
    glVertex3f(-dim, -dim, -dim);   # Left Of Triangle (Left)
    glVertex3f(-dim, -dim, dim);

    glEnd()

def makeUnitLineGrid(dim):
    line_coords = []
    for a in range(dim + 1):
        for b in range(dim + 1):
            line_coords.extend([
                # vert lines
                # a, 0,   b,
                # a, dim, b,
                # horiz lines
                0,   a, b,
                dim, a, b,
                # depth lines
                a, b, 0,
                a, b, dim])
    return line_coords

line_coords = makeUnitLineGrid(20)

@win.event
def on_draw():

    handle_down_keys()

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)

    glMatrixMode(GL_PROJECTION)
    glLoadIdentity()
    gluPerspective(90.0, float(win.width) / float(win.height), 0.001, 100.0)

    # glPolygonMode(GL_FRONT_AND_BACK, GL_FILL)

    glMatrixMode(GL_MODELVIEW)
    glLoadIdentity()
    global rtri
    rtri += 1

    gluLookAt(
            eye_vec[0], eye_vec[1], eye_vec[2],
            center_vec[0], center_vec[1], center_vec[2],
            up_vec[0], up_vec[1], up_vec[2])

    glPushMatrix()

    # glTranslatef(0, 0, -0.5)
    # glRotatef(rtri, 0.0, 0.0, 1.0)
    # glRotatef(-90, 1.0, 0.0, 0.0)
    glScalef(1/5.0, 1/5.0, 1/5.0)
    draw_pyramid(3.0)

    glPopMatrix()

    glPushMatrix()

    glTranslatef(3, 0, 0)
    glRotatef(90, 0.0, 1.0, 0.0)
    glScalef(1/5.0, 1/5.0, 1/5.0)
    draw_pyramid(3.0)

    glPopMatrix()

    glPushMatrix()

    glLineStipple(1, 0xFFF)
    glTranslatef(-2.5, -2.5, -2.5)
    glScalef(1.5, 1.5, 1.5)
    glColor4f(1.0, 1.0, 0.0, 0.1);   # yellow

    glEnable(GL_LIGHTING)
    draw(len(line_coords) / 3, GL_LINES,
        ('v3f', line_coords),
        # ('c3B', colors),
    )
    glDisable(GL_LIGHTING)

    glPopMatrix()

def handle_down_keys():

    if keys[key.PAGEUP]:
        move_eye_in(True)
    elif keys[key.PAGEDOWN]:
        move_eye_in(False)
    elif keys[key.LEFT]:
        rotate_eye(True)
    elif keys[key.RIGHT]:
        rotate_eye(False)
    elif keys[key.UP]:
        move_eye(0, 0.5, 0)
    elif keys[key.DOWN]:
        move_eye(0, -0.5, 0)

pyglet.app.run() 
```

矢量数学.py

```
import math

def vec_add(a, b):
    return [a[0] + b[0], a[1] + b[1], a[2] + b[2]]

def vec_sub(a, b):
    return [a[0] - b[0], a[1] - b[1], a[2] - b[2]]

def vec_cross(a, b):
    return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]]

def vec_normalize(a):
    mag = math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2])
    return [a[0] / mag, a[1] / mag, a[2] / mag]

def vec_scalar_mul(a, n):
    return [a[0] * n, a[1] * n, a[2] * n] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:35:28.437

您的代码似乎可能存在两个问题：

1.  通常，与投影矩阵堆栈相比，您希望将查看转换放在模型视图矩阵堆栈上。第 126 行，你`gluLookAt`真正设置的地方应该在第 135 行之后，在那里你通过调用来重置模型视图矩阵`glLoadIdentity`。这样做的原因是光照法线由模型视图矩阵的一部分进行转换，不包括您的视图转换可能会产生不良结果。

2.  其次，您`glLight( GL_LIGHT0, GL_POSITION, ...);`在任何其他转换之前（假设文件顶部的 python 代码首先执行）指定灯光的位置（通过调用）。

当您以这种方式指定灯光的位置时，它会锁定在眼睛坐标中（当您调用时，灯光的位置由模型视图矩阵顶部的矩阵转换`glLight( ..., GL_POSITION, ... );`）如果您希望灯光随眼睛点移动，在调用 之后指定它`gluLookAt`，这将改变灯光的位置以随眼睛移动。

# javascript - 使用猫鼬重复 提交数据库

> ID：15607539
> 
> 赞同：0
> 
> 时间：2013-03-25T04:17:25.797
> 
> 标签：javascript, node.js, mongodb, express, mongoose

我是 node.js 的新手，我遇到了一些重复的命令的间歇性问题。我认为这可能与我试图将我的数据库交互与我的其余代码分开并且我没有正确隔离它的事实有关。我有一个名为 transaction.js 的文件，如下所示。

```
var mongoose = require('mongoose');    
    mongoose.connect('mydb');

    function Transaction(){
        var actions = [];
        this.Add = function(query){
            actions.push(query);
        };
        this.Commit = function(){
            for (var i = 0; i < actions.length; i++) {
                actions[i]();
            }
            actions = [];
        };
    }

    exports.Transaction = Transaction 
```

我开始新的交易

```
var transactionlib = require('../DB/transaction');
var transaction = new transactionlib.Transaction(); 
```

并调用交易

```
exports.PostHome = function(req, res){
    var id = new ObjectId(req.body.objectId);
    transaction.Add(function(){
        models.Story.findOne()
            .where('_id').equals(id)
            .exec(function(err, story){               
                saveOrUpdateStory(err, story, req, res);
            });
    });
    transaction.Commit();
}; 
```

应该提到的是，在 saveOrUpdateStory 中有更多的数据库调用发生。

这似乎工作正常，但有时它似乎重复命令（提交将被添加两次）。我目前的理论是，这与两个人同时提交两个命令以及他们之间共享的事务列表有关。不过，我不确定这一点，并希望得到一些帮助。对我的代码结构的任何批评也将不胜感激，因为我仍在学习 node.js 的最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T03:20:07.673

If anyone is coming across this with the same issue I'd just like to clarify what was wrong. I had a Homecontroller.js which I was never creating a new instance of, so all requests were accessing a global instance of it. The result was that two requests could fire the same transaction twice if they were within a short enough time period.

In Hindsight, it's a good idea to wrap your controllers in functions (google "Module pattern") so that this doesn't happen.

# java - json .makeHttpRequest(url, "GET",params) 通过多次调用忽略 URL 参数？Android / PHP 网络服务问题

> ID：15607541
> 
> 赞同：1
> 
> 时间：2013-03-25T04:17:42.800
> 
> 标签：java, php, android, json

我有一个`PHP`Web 服务并正在查询它以填充用户界面。我有一个问题`JSONObject json = jParser.makeHttpRequest(url, "GET",params);`是忽略传递给它的 URL，而是针对最后使用的 PHP URL 运行查询。

我的网络服务是[这个](http://www.jankuyado.com/Components/menuitems.php?)和[这个](http://www.jankuyado.com/Components/test.php?)

要复制这一点，请在 editext1 中搜索“EF”并按下按钮。然后，从edittext1 的末尾删除'F'。LayoutSpinner 将填充 101 个 'Civic' 'Hatch' 'Civic' 'Hatch' 条目，因为它查询的是 test.php Web 服务而不是 menuitems.php。

`setOnItemSelectedListener`每当任何微调控件发生更改时，都会触发URL 字符串。然后它会触发后台任务 LoadAllProducts 来查询 Web 服务。`jParser.makeHttpRequest(url, "GET",params)`我已经通过使用断点和观察变量确认当行运行时 URL 字符串指向 menuitems.php 。以前有没有其他人遇到过这个问题，我应该走什么路线来解决它？

任何帮助将不胜感激。

这是我的代码：

```
 // view products click event
        btnViewProducts.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view)              
                // Execute LoadAllProducts
                url =  "http://www.jankuyado.com/Components/test.php";
                new LoadAllProducts().execute();                        
            }

        // listener for EditText1 changes.
             @Override
            public void afterTextChanged(Editable s) {
                chassiscode = v.getText().toString(); //put the chassiscode into a global           variable.
                url =  "http://www.jankuyado.com/Components/menuitems.php";
                new LoadAllProducts().execute();
            }

    class LoadAllProducts extends AsyncTask<String, String, String>  {

        protected String doInBackground(String... args) {

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("chassiscode",chassiscode));
            params.add(new BasicNameValuePair("Civic", model));
            params.add(new BasicNameValuePair("layout", layout));               

            // Creating JSON Parser object
            JSONParser jParser = new JSONParser();
         // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url, "GET",params);

                products = json.getJSONArray("components");
                productslist.clear(); //clear the productslist and start from scratch.

                    // looping through All Products

                    for (int i = 0; i < products.length(); i++) {
                        JSONObject c = products.getJSONObject(i);
                        if(url == "http://www.jankuyado.com/Components/test.php") {
                        //if components are being retrieved 

                        // adding HashList to ArrayList
                        productslist.add(c.getString("ComponentName"));

                        } else if (url == "http://www.jankuyado.com/Components/menuitems.php") {
                        //else if menu items are being retrieved.   
                            // Storing each json item in the productslist

                            if  (c.has("model")) {
                                MenuReturnType = "model"; //flag global variable MenuReturnType as returning car Models (used later when parsing the Productlist).
                                productslist.add(c.getString("model"));                                                             
                            }

                            if  (c.has("layout")) {
                                MenuReturnType = "layout"; //flag global variable MenuReturnType as returning car Layouts (used later when parsing the Productlist).
                                productslist.add(c.getString("layout"));
                            }

                        }
                    }
            }

            return null;
        }

        protected void onPostExecute(String file_url) {

            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
           //stuff that updates ui here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:42:18.657

解决了。

JSONParser 类在某些条件下从 .php 查询中获取了一些垃圾数据。当由于某种原因发生这种情况时，JSONParser 返回最后一个成功的 JSON 查询输出而不是 null。一旦我解决了这个问题并让我的代码处理一个 null JSONArray 返回一切正常。

# c# - Visual Studio 2012 伪造 UnitTestIsolation 检测无法初始化

> ID：15607555
> 
> 赞同：8
> 
> 时间：2013-03-25T04:18:35.640
> 
> 标签：c#, unit-testing, visual-studio-2012, testing, nunit

刚刚安装了 vs 2012 更新 2 ( [http://www.microsoft.com/en-us/download/details.aspx?id=36833](http://www.microsoft.com/en-us/download/details.aspx?id=36833) ) 所以我可以使用 vs fakes/shims 来测试一些难以测试的代码。当我创建假程序集并且所有引用都按预期添加到单元测试项目中时，一切都编译得很好。但是在任何测试中运行以下代码......

```
using (ShimsContext.Create())
{
    //Doesn't matter whats in here
} 
```

引发以下异常...

```
Microsoft.QualityTools.Testing.Fakes.UnitTestIsolation.UnitTestIsolationException : UnitTestIsolation instrumentation failed to initialize.  Please restart Visual Studio and rerun this test 
```

堆栈跟踪的完全异常...

```
Test 'Abot.Tests.Unit.Core.HapHyperLinkParserTest.HyperLinkParserTest.GetLinks_AreaTags_ReturnsLinks' failed: Microsoft.QualityTools.Testing.Fakes.UnitTestIsolation.UnitTestIsolationException : UnitTestIsolation instrumentation failed to initialize. Please restart Visual Studio and rerun this test
at Microsoft.QualityTools.Testing.Fakes.UnitTestIsolation.UnitTestIsolationRuntime.InitializeUnitTestIsolationInstrumentationProvider()
at Microsoft.QualityTools.Testing.Fakes.Shims.ShimRuntime.CreateContext()
at Microsoft.QualityTools.Testing.Fakes.ShimsContext.Create()
Core\HyperlinkParserTest.cs(59,0): at Abot.Tests.Unit.Core.HyperLinkParserTest.GetLinks_AreaTags_ReturnsLinks() 
```

一些笔记...

*   我正在使用 Visual Studio 2012 高级版
*   解决方案中的所有项目都针对 .net 4.0
*   我正在使用 nunit 作为测试框架
*   尝试通过 testdriven.net 插件和 nunit gui 运行测试，但同样的错误。
*   尝试定位 .net 4.5 并得到相同的错误
*   我没有使用 Typemock 或 Ncrunch 并且它们没有安装
*   我正在使用起订量，但将其从 th 中删除
*   它与特定测试无关，我已经验证它在不同的测试文件和另一个解决方案中都失败了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T05:17:50.623

马修是对的。您必须使用 vs 测试运行器。

- 必须通过扩展管理器安装 NUnit 测试适配器 0.94，它允许 vs 测试运行器运行 nunit。

- 必须使用 vs 测试资源管理器窗口来运行测试。

看起来测试运行将运行测试包装在上下文中以使假货魔术发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T10:11:30.240

此外，如果您想从 CI 服务器运行测试，则需要从控制台执行 VS Test Runner，并指定您要使用 nUnit 发现器扩展。

该命令将是这样的：

```
{ProgramFiles}\Microsoft Visual Studio\11.0\Common7\IDE\CommonExtensions\Microsoft\TestWindow>vstest.console.exe /inIsolation /UseVsixExtensions:true {testsPath} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T16:03:31.000

在调试下重置您的异常设置：

> 菜单调试 -> 例外 -> 全部重置。

一旦我通过取消选中调试模式来更改异常设置：

> “当此异常类型为用户未处理时中断”

这导致了这个问题。

# objective-c - CLLocation 课程是否计算您设备的方向或移动速度？

> ID：15607556
> 
> 赞同：1
> 
> 时间：2013-03-25T04:19:04.757
> 
> 标签：objective-c, xcode4.5

假设我侧身向东走，而我的 iPhone 指向北方。locationManager.location.course 的 course 属性会显示我是向东还是向北？

从文档中不清楚。

startUpdatingHeading 也使用 GPS 吗？如果不是，为什么它由 CLLocationManager 处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T07:35:07.657

如果您在手机指向北方时向东走，则*路线*将返回*东方*，*航向*将返回*北方*。这两条信息由不同的硬件提供（这就是为什么它们会单独激活，并且可能并非在所有设备上都可用）；来自 Apple 的[位置感知编程指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/GettingHeadings/GettingHeadings.html)：

> Core Location 支持两种不同的方式来获取方向相关的信息：
> 
> *   带有磁力计的设备可以报告设备指向的方向，也称为**航向**。
> *   具有 GPS 硬件的设备可以报告设备移动的方向，也称为其**路线**。
> 
> 请记住，标题和课程信息并不代表相同的信息。设备的航向反映了设备相对于真北或磁北的实际方向。设备的路线代表行进方向，不考虑设备方向。

# java - 用户在我的 android 应用程序中没有收到通知

> ID：15607559
> 
> 赞同：0
> 
> 时间：2013-03-25T04:19:11.713
> 
> 标签：java, android, facebook, notifications

我开发了一个应用程序，需要在游戏中邀请你的朋友。我通过应用程序到用户的方式发送请求但令人困惑。未使用该应用程序的用户无法收到通知。使用过该应用程序的用户可以收到通知。我的目的是向未使用该应用程序的用户发送带有 URL 的通知，让他下载我的应用程序。

我看了一些帖子，知道这可能是由于画布 URL 造成的。

这是我的代码

```
private void sendRequestDialog(Bundle params2) {
    Bundle params = new Bundle();
    params.putString("to", params2.getString("to"));
    params.putString("message", params2.getString("message"));

    WebDialog requestsDialog = (new WebDialog.RequestsDialogBuilder(main,
            Session.getActiveSession(), params)).setOnCompleteListener(
            new OnCompleteListener() {

                @Override
                public void onComplete(Bundle values,
                        FacebookException error) {
                    if (error != null) {
                        if (error instanceof FacebookOperationCanceledException) {
                            Toast.makeText(main.getApplicationContext(),
                                    "Request cancelled", Toast.LENGTH_SHORT)
                                    .show();
                        } else {
                            Toast.makeText(main.getApplicationContext(),
                                    "Network Error", Toast.LENGTH_SHORT)
                                    .show();
                        }
                    } else {
                        final String requestId = values
                                .getString("request");
                        if (requestId != null) {
                            Toast.makeText(main.getApplicationContext(),
                                    "Request sent", Toast.LENGTH_SHORT)
                                    .show();
                        } else {
                            Toast.makeText(main.getApplicationContext(),
                                    "Request cancelled", Toast.LENGTH_SHORT)
                                    .show();
                        }
                    }
                }
            }).build();
    requestsDialog.show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T16:51:40.560

我在这里的回答可能会有所帮助：[如何将消息分享到 facebook -- android](https://stackoverflow.com/questions/19977150/how-to-share-a-message-to-facebook-android/19977711#19977711)

在评论中找到指向 facebook 文档的链接。然后只需确保您在创建应用程序期间遵循这些步骤并指定 Canvas URL。页面底部有一些示例可以帮助您。您的代码似乎不是问题，它只需要一个合适的链接让您的应用程序能够提供邀请。

# php - 传递数组的空值并计算其中的值。

> ID：15607560
> 
> 赞同：0
> 
> 时间：2013-03-25T04:19:22.120
> 
> 标签：php, arrays, array-merge

我有这个特定的代码来检查一个变量是否**不为空**，如果它不为空，它将合并到一个“有”一个值的数组中。如果它是空的，它将合并到一个数组中，但传递“没有值或任何其他东西，甚至是空值”

这是我的代码。

```
$fb_description_arr[] = ($page_desc != "") ? $page_desc : array();
$fb_share_arr[] = ($share_link != "") ? $share_link : array();
$tweet_arr[] = ($twitter_link != "") ? $twitter_link : array();
$follow_arr[] = ($twitter_follow != "") ? $twitter_follow : array();
$site_link_arr[] = ($site_link != "") ? $site_link : array(); 
```

假设**$page_desc 不为 null**，并且值为“This is me”，**其余变量为 null**

```
$test_arr = array_merge($fb_description_arr, $fb_share_arr, $tweet_arr, $follow_arr, $site_link_arr);
print_r($test_arr); 
```

所以我尝试调试并在其上显示合并的数组。这将在下面显示。

**数组 ( [0] => 这是我 [1] => 数组 ( ) [2] => 数组 ( ) [3] => 数组 ( ) [4] => 数组 ( ) )**

因此，如果我使用 php 中的 count() 函数进行计数

```
$total_raffle = count(array_merge($fb_description_arr, $fb_share_arr, $tweet_arr, $follow_arr, $site_link_arr)); 
```

显然，它将显示**“5”的输出**

我在三元运算符中尝试了哪些解决方案来传递一个不会在 count() 函数中计算的空值。

1.  大批（）
2.  无效的
3.  错误的
4.  “”

所以我想要的输出是**“1”**，因为**$page_desc 是唯一有值的变量，**其余的没有任何值

这东西有什么解决办法吗？

帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:42:52.660

对于您的问题，我能想到的最简单的解决方案是摆脱三元组并使用赋值的副作用将值附加到 $test_arr：

```
<?php

$page_desc = "This is me";
$share_link = $twitter_link = $twitter_follow = $site_link = '';

if ($page_desc !== "")  {
    $test_arr[] = $fb_description_arr[] = $page_desc;
}

if ($share_link !== "")  {
    $test_arr[] = $fb_share_arr[] = $share_link;
}

if ($twitter_link !== "")  {
    $test_arr[] = $tweet_arr[] = $twitter_link;
}

if ($twitter_follow !== "")  {
    $test_arr[] = $follow_arr[] = $twitter_follow;
}

if ($site_link !== "")  {
    $test_arr[] = $site_link_arr[] = $site_link;
}

var_dump($test_arr, count($test_arr)); 
```

（请注意，此代码假定其中包含空数组的一堆变量不是您以后的代码所期望的）

# wpf - WPF：无法从子控件访问静态资源

> ID：15607566
> 
> 赞同：3
> 
> 时间：2013-03-25T04:19:45.787
> 
> 标签：wpf, binding, staticresource

我不知道如何从子控件的 Resource 部分中访问我的 Window.Resources。我在子控件中定义了一个 DataTemplate，并希望该 DataTemplate 绑定到我的视图模型上的 ICommand（在 Window.Resources 中定义）

*编辑：* 我将我的`RadPaneGroup`代码添加到主窗口 XAML。这是我实例化`ProjectsViewModel`对象的地方。`ProjectsView`中包含的控件`RadDocumentPane`是我在下面列出的子控件。

**主窗口**

```
<Window.Resources>
    <viewModels:ProjectsViewModel x:Key="ProjectsViewModel" />
</Window.Resources>
<telerik:RadDocking HasDocumentHost="False" >
    <telerik:RadSplitContainer>
        <telerik:RadPaneGroup DataContext="{StaticResource ProjectsViewModel}">
            <telerik:RadDocumentPane Header="Projects">
                <views:ProjectsView/>
            </telerik:RadDocumentPane>
        </telerik:RadPaneGroup>
    </telerik:RadSplitContainer>
    ... 
```

**儿童控制**

```
<Control.Resources>
    <!--Data template for the Task object-->
    <DataTemplate  DataType="{x:Type models:Task}">
        <StackPanel>
            <TextBlock Text="{Binding DisplayName}" Foreground="Red" 
                       FontSize="16" FontFamily="Verdana" />
            <telerik:RadContextMenu.ContextMenu>
                <telerik:RadContextMenu >
                    <telerik:RadMenuItem Header="New Project" 
                            Command="{Binding NewProjectCommand}"/>
                </telerik:RadContextMenu>
            </telerik:RadContextMenu.ContextMenu>
        </StackPanel>
    </DataTemplate> 
```

上述 XAML 上的绑定正在尝试绑定到 Task 对象。但是，我的 ICommand 位于 ViewModel (ProjectsViewModel) 中。我试图将绑定更改为，`Command="{Binding NewProjectCommand, Source={StaticResource ProjectsViewModel}}`但这会引发异常。

我究竟做错了什么？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T21:55:42.417

您的 DataTemplate 看起来像是在 ItemsControl（例如 ListBox）中使用，所以正如您所说，`Command="{Binding NewProjectCommand}"`将尝试绑定到该`Task`类型的属性，而您确实想绑定到父容器的属性。因此，您需要使用 RelativeSource 绑定，例如：

```
Command="{Binding Path=DataContext.NewProjectCommand, RelativeSource=
         {RelativeSource FindAncestor, AncestorType={x:Type views:ProjectsView}}}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T23:30:41.623

您可以使用类似的方法来解决[为什么我不能将 DataContext={Binding} 用于我的上下文菜单？](https://stackoverflow.com/questions/6914867/why-cant-i-use-datacontext-binding-for-my-context-menu)解决这个问题。

这可能不起作用的基本原因是 ContextMenu 在技术上是一个单独的窗口，因此它有自己的可视化树，可能不包含在文档窗格的逻辑树中。结果，它不知道如何从包含视图中找到资源。

```
 DataContext="{Binding PlacementTarget.DataContext.NewProjectCommand,
               RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type telerik:RadContextMenu}}}" 
```

# c# - 无法在分区解决方案的子解决方案中将文件附加为数据库

> ID：15607567
> 
> 赞同：1
> 
> 时间：2013-03-25T04:20:04.150
> 
> 标签：c#, asp.net-mvc-4, visual-studio-2012, ef-code-first, entity-framework-migrations

我最近开始使用[Structuring Solutions and Projects](http://msdn.microsoft.com/en-us/library/ee817674.aspx)`MVC 4`设置我的解决方案并将[现有的 Visual Studio 解决方案添加到另一个解决方案来](http://blogs.msdn.com/b/habibh/archive/2009/06/24/walkthrough-adding-an-existing-visual-studio-solution-to-another-solution.aspx)处理分区解决方案。我的系统已全部设置好，可以构建，并且我已经在这两种解决方案上启用了迁移。每个解决方案有 4 个项目（域、数据、单元测试和 WebUI），子解决方案有来自主解决方案的引用。数据层包含所有存储库和 DbContext 类。每个解决方案都有自己的连接字符串，因此我打算为添加到系统中的每个解决方案创建单独的数据库。

我试图更新我的数据库，`Package Manager Console`这`Update Database -Verbose`适用于主解决方案，但不适用于子解决方案。迁移文件位于数据层中。

注意：我跑`Update-Database -Verbose`

`Using StartUp project Master.WebUI and Using NuGet project Master.Data`（主解决方案）

`Using StartUp project Child.WebUI and Using NuGet project Child.Data`（儿童解决方案）

我应该怎么做才能完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:41:13.387

起初我无法解决这个问题，所以我所做的是重新创建`Child solution`并制作第一个`Updat-Database`，然后再将其添加到`Master Solution`.

现在，我认为这只是检查以确保`Database`在其他任何地方都不存在的问题。因此，在以下情况下删除您的`database`from `App_Data`, `Server Explorer`,`SQL Server Object Explorer`将起作用`.mdf file cannot be attached as a database`

# ruby - ruby rspec测试不起作用

> ID：15607575
> 
> 赞同：0
> 
> 时间：2013-03-25T04:20:38.393
> 
> 标签：ruby, rspec

我正在关注[http://goo.gl/7Dlv5](http://goo.gl/7Dlv5)。视频创建了一个类

```
class Book

end 
```

测试规范/book_spec.rb 看起来像：

```
require "spec_helper"

describe Book do

    before :each do
        @book = Book.new "Title","Author", :category
    end

    describe "#new" do
        it "returns a new book object" do
            @book.should be_an_instance_of Book
        end
    end
end 
```

测试通过了作者。它对我来说失败了。所以我猜红宝石有什么变化？或者也许是我在代码中找不到的错字。你能帮忙吗？

这是我的结果。谢谢你。

```
Failures:

  1) Book#new returns a new book object
     Failure/Error: @book = Book.new "Title","Author", :category
     ArgumentError:
       wrong number of arguments(3 for 0)
     # ./spec/book_spec.rb:6:in `initialize'
     # ./spec/book_spec.rb:6:in `new'
     # ./spec/book_spec.rb:6:in `block (2 levels) in <top (required)>'

Finished in 0.00058 seconds
1 example, 1 failure

Failed examples:

rspec ./spec/book_spec.rb:11 # Book#new returns a new book object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:24:56.390

很明显，您将为要使用三个参数`Book`调用的类定义一个相应的构造函数。`Book.new`

上面的链接清楚地表明（看文字记录）：

```
# These will fail, so here’s the code for Book to make them pass:

class Book
    attr_accessor :title, :author, :category
        def initialize title, author, category
            @title = title
            @author = author
            @category = category
        end
end 
```

# java - 使用 jquery 选择选项未按预期运行

> ID：15607576
> 
> 赞同：0
> 
> 时间：2013-03-25T04:20:41.067
> 
> 标签：java, jquery

我有一个选择选项，如下所示

```
<select name="test" onchange="updateRecipientCount()">
<option value='123'>one</option>
</select> 
```

当我单击并选择一个选项时，它的行为正常，我可以毫无问题地提交表单。

现在，在我最近的更改是通过 jQuery 远程选择我的选项之后（从另一个字段获取它的值，比如自动完成，然后根据值在选项中选择它），即使我可以在屏幕上看到它被选中，它确实没有表现出应有的行为。

```
 $('select option[value='123']').attr('selected', true); 
```

当我提交表单时，我收到以下错误，并且它也不会触发 select onchange 功能。

```
java.lang.IllegalArgumentException: No Index Value 
```

有谁知道这里有什么问题？为什么当我使用 jquery 选择选项时会发生此错误？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:26:48.403

将`id`属性添加到您的`select`.

```
<select name="test" id="test" onchange="updateRecipientCount()">

$('#test').val(123); //this will select the option with value 123. 
```

**多选示例：**

```
<select name="test" id="test" onchange="updateRecipientCount();" multiple="multiple">
<option value='123'>one</option>
<option value='123'>two</option>
</select>

<script type="text/javascript">
$(document).ready(function(){
    updateRecipientCount();  // For testing
});

function updateRecipientCount(){
    var ary = [123, 123]; // test data
    $("#test").val(ary);
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:27:02.200

您在选择器中的引号错误，`attr`选择的值也应该是`selected`：

```
$('select option[value="123"]').attr('selected', 'selected'); 
```

# c# - TimeSpan 不会解析某些字符串

> ID：15607577
> 
> 赞同：-1
> 
> 时间：2013-03-25T04:20:52.090
> 
> 标签：c#, parsing, timespan

我不确定这里发生了什么，但它会接受一些时间跨度，但不接受其他时间跨度。有人可以告诉我一种方法来检查这种格式 99:59:59 的有效时间跨度。

```
//50:30:00 is bad
//50:20:00 is good

try
{
    TimeSpan ts = new TimeSpan();
    ts = TimeSpan.Parse("50:30:00");
}
catch //(Exception ex)
{
    MessageBox.Show("bad time span");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T04:32:11.780

默认情况下，该`Timespan.Parse`方法假定时间是 int format `Days:Hours:Minutes`。由于一天不能超过 24 小时，因此当`Hours`组件大于 24 时会抛出。

我不得不承认我有点惊讶`Timespan.Parse`不会为你做转换。我有一种预感，这与并非所有日子都是 24 小时这一事实有关。

# cron - crontab 不工作

> ID：15607578
> 
> 赞同：0
> 
> 时间：2013-03-25T04:21:05.120
> 
> 标签：cron, crontab, fedora

我在 Fedora 17 中有一个带有命令的 crontab

```
13 10 * * * /home/pk1/Templates/dump.sh 
```

在转储.sh

```
#!/bin/sh
mysqldump --host=localhost --user=root --password=toor mba_new | gzip > /home/pk1/Templates/`date +"webt-backup_%m-%d-%y"`.gz 
```

在日志文件中有错误

```
Mar 25 10:13:01 area7 crond[31770]: (*system*) RELOAD (/etc/crontab)
Mar 25 10:13:01 area7 crond[31770]: (CRON) bad command (/etc/crontab) 
```

如果我通过终端运行

```
sh dump.sh 
```

一切都好

为什么我的 dump.sh 不能通过 crontab 工作？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T04:34:15.097

您的 crontab 需要用户名请将其指定为

```
13 10 * * * pk1  /home/pk1/Templates/dump.sh 
```

# ruby - Ruby gem rmagick 不会安装在 Mac OS X 上

> ID：15607580
> 
> 赞同：14
> 
> 时间：2013-03-25T04:21:08.503
> 
> 标签：ruby, macos, rubygems, operating-system, rmagick

我知道这个问题已经问了很多，但是没有一个解决方案对我有用，我现在真的很绝望。

我正在尝试使用 gem 安装 rMagick 来安装散居地。我已经通过自制软件安装了 imagick，并且在尝试运行 gem install rmagick 时收到此错误：

```
ERROR:  Error installing rmagick:
    ERROR: Failed to build gem native extension.

        /Users/tobischweiger/.rvm/rubies/ruby-1.9.3-p385/bin/ruby extconf.rb
checking for Ruby version >= 1.8.5... yes
checking for gcc-4.2... yes
checking for Magick-config... no
Can't install RMagick 2.13.2\. Can't find Magick-config in /Users/tobischweiger/.rvm/gems/ruby-1.9.3-p385@diaspora/bin:/Users/tobischweiger/.rvm/gems/ruby-1.9.3-p385@global/bin:/Users/tobischweiger/.rvm/rubies/ruby-1.9.3-p385/bin:/Users/tobischweiger/.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin:/usr/local/git/bin

*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/tobischweiger/.rvm/rubies/ruby-1.9.3-p385/bin/ruby

Gem files will remain installed in /Users/tobischweiger/.rvm/gems/ruby-1.9.3-p385@diaspora/gems/rmagick-2.13.2 for inspection.
Results logged to /Users/tobischweiger/.rvm/gems/ruby-1.9.3-p385@diaspora/gems/rmagick-2.13.2/ext/RMagick/gem_make.out 
```

我对 gem 和 homebrew 不是很有经验，我想知道是否有人可以帮助我。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-25T04:25:46.487

在尝试安装 gem 之前运行它（使用自制软件）。

```
brew install imagemagick 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-02-09T19:15:56.357

这是使用自制软件破坏性较小的版本，rmagic 也不适用于[imagemacigk 版本 7](https://github.com/rmagick/rmagick/issues/256)

> ImageMagick 版本 6.4.9 或更高版本 (6.×.x)。版本 7 尚不支持；预计 2019 年 4 月 ( [https://github.com/rmagick/rmagick/pull/299](https://github.com/rmagick/rmagick/pull/299) )

（来自自述文件）

. 你可以从 www.imagemagick.org 获得 ImageMagick，所以用 brew 试试这个

```
brew install imagemagick@6
PKG_CONFIG_PATH=/usr/local/opt/imagemagick@6/lib/pkgconfig gem install rmagick 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-27T21:57:03.687

在小牛队，你可以这样做：

```
brew install pkgconfig
brew uninstall imagemagick
brew install imagemagick
brew link imagemagick
bundle install 
```

够了。我认为。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-08T04:50:52.307

我正在使用 OS X Lion。

我跑了`brew doctor`，发现 imagemagick 没有链接，所以它告诉我要运行`brew link imagemagick`。

然后我关闭并重新打开我的终端，谢天谢地一切正常。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-14T01:22:04.270

我有一个类似的问题，这对我有用：

```
$ cd /usr/local/Cellar/imagemagick/6.8.0-10/lib
$ ln -s libMagick++-Q16.7.dylib   libMagick++.dylib
$ ln -s libMagickCore-Q16.7.dylib libMagickCore.dylib
$ ln -s libMagickWand-Q16.7.dylib libMagickWand.dylib 
```

希望这可以帮助。

信用：[https ://coderwall.com/p/wnomjg](https://coderwall.com/p/wnomjg)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-12-07T08:06:08.130

确保在执行这些操作时：

```
$ cd /usr/local/Cellar/imagemagick/6.8.0-10/lib
$ ln -s libMagick++-Q16.7.dylib   libMagick++.dylib
$ ln -s libMagickCore-Q16.7.dylib libMagickCore.dylib
$ ln -s libMagickWand-Q16.7.dylib libMagickWand.dylib 
```

您更改文件名以反映您的版本：您可以通过查看此处的 lib 文件夹来查看文件名：cd /usr/local/Cellar/imagemagick/VERSION/lib

前任：

```
ln -s libMagickWand-6.Q16.1.dylib libMagickWand.dylib 
```

等等

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-18T10:07:16.003

在安装 RMagick 时，我们需要检查不同的场景。请检查并确认：

1.  检查您是否没有使用旧版本的 ruby​​ 安装最新版本的 RMagick。即红宝石1.8.7左右。您不能使用旧版本的 Ruby 安装最新版本的 RMagick。如果是这样，您可能会收到此错误消息。

    ```
    Building native extensions.  This could take a while...
    ERROR:  Error installing rmagick:
    ERROR: Failed to build gem native extension.

      /Users/user/.rbenv/versions/1.8.7-p375/bin/ruby extconf.rb 
    ```

2.  确保在安装 RMagick 之前已安装 imagemagick。

    ```
    brew install imagemagick 
    ```

3.  还要确保您正在安装 RMagick 与兼容版本的 imagemagick。RMagick 与最新版本的 imagemagick 不兼容。

更重要的是：如果您只需要调整大小、锐化、转换现有图像，您可以使用 MiniMagick 而不是使用 RMagick。当我们需要创建图像、图表、绘图和排版时，需要 RMagick。与 RMagick 相比，它更易于使用且占用的系统资源更轻。RMagick 消耗大量内存。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-31T14:35:31.730

主要问题似乎是正确安装和链接 imagemagick。

这个页面对我很有帮助：

[http://sethvargo.com/20110726/install-imagemagick-on-mountain-lion/](http://sethvargo.com/20110726/install-imagemagick-on-mountain-lion/)

我正在运行自制软件，让`brew doctor`命令运行 clean 是安装它的关键。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-25T16:00:56.037

我发现在 OSX 1.8.2 上将我的 Xcode 更新到最新版本（4.6.1）解决了这个问题，我成功安装了 rmagick-2.13.2

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-03-15T21:09:44.417

对我来说，我必须查看在你的情况下的输出

```
/Users/tobischweiger/.rvm/gems/ruby-1.9.3-p385@diaspora/gems/rmagick-2.13.2/ext/RMagick 
```

里面有一个名为的文件`mkmf.log`，它准确地列出了它试图编译的内容和错误。对我来说，链接器使用以下命令失败：

```
ld: library not found for -lMagickCore 
```

查看它正在运行的命令，除了最后之外，它看起来不错，请参见以下代码段：

```
-lMagickCore-6.Q16 -lMagickCore-6.Q16 -lruby-static -framework CoreFoundation -lMagickCore -lpthread -ldl -lobjc -lSystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/6.0/lib/darwin/libclang_rt.osx.a 
```

请注意，它`Magick-config`通过添加获得输出并使用这些输出，`-lMagickCore-6.Q16`但它*仍在*尝试链接`-lMagickCore`. 我认为这是`have_library`extconf 正在使用的副产品。`libMagickCore.dylib`对我来说重要的是Homebrew没有提供库。它可能是 ruby​​gems 的旧版本，我认为正确的修复方法是更新`have_library`函数，但我通过创建一个名为`libMagickCore.dylib`指向`libMagickCore-6.Q16.dylib`.

# c - 它在C中创建一个数组，当程序从内存中出来时会发生什么？

> ID：15607587
> 
> 赞同：2
> 
> 时间：2013-03-25T04:21:56.800
> 
> 标签：c, arrays, memory

我有这个疑问，你假设有一个包含十亿个元素的数组，你创建的数组如下：

```
int array[1000] = {1,2, ..., n.} 
```

然后你完成程序。

不像java机器的java垃圾收集内存清理记录关于存储的这种安排。 **它们留在内存中还是被释放？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T04:24:15.997

当进程退出时，操作系统会释放进程正在使用的所有内存。

（这不适用于某些小型嵌入式操作系统。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:24:29.470

程序的内存由操作系统管理，因此在程序退出时它会在任何情况下被释放。

在任何情况下，正如它所写的那样，您的分配可能是

*   静态且在任何函数之外（因此它不会像在 Java 中那样在堆上进行管理），它既没有真正分配也没有释放
*   在堆栈上自动（这确实是动态的，但无论如何它不是在 Java 中完成的）并且它在退出其范围时被释放

真正的比较是这样的

```
int *array = malloc(sizeof(int)*1000); 
```

这将驻留在内存中，直到 a`free(array)`被调用或程序退出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T05:33:09.643

如果你这样做

```
if (true) {
  int array[1000] = {1,2,3};
  //...
}

// array[1000] "freed" here. 
```

然后，当您退出“if”大括号时，内存将被释放。这是因为内存驻留在堆栈上，“分配”只是堆栈指针的移动。当范围退出时，堆栈指针返回到进入范围之前的位置。所以在这种情况下，分配和释放几乎是免费的（性能方面），假设你的堆栈足够大，可以容纳额外的 1000 个整数。在某些嵌入式系统上，它不会，并且您的应用程序会崩溃。

同样适用

```
int foo( int x )
{
  int array[1000] = {1,2,3};
  // ...
  return array[0];
}

// array[] "freed" here. 
```

编辑：在最后一种情况下，如果将 foo() 替换为 main，则程序退出时数组将被“释放”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T04:30:40.260

简单来说就是在程序结束时释放内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T04:24:30.380

1.  通常操作系统不允许您拥有`int a[10000000000000000000]`.
2.  他们的价值观留在记忆中。但是内存会被退回。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T05:05:40.003

在 c 中，如果您定义像 a[1000] 这样的数组，那么它将在堆栈部分分配，并在程序存在时自动释放内存。但是如果你动态分配（通过使用 malloc），那么你必须使用 free(array) 来释放内存。阵列的最大大小取决于您的系统 RAM 大小。

# ruby - 捕获 undecoder 异常的问题

> ID：15607589
> 
> 赞同：0
> 
> 时间：2013-03-25T04:22:10.173
> 
> 标签：ruby, unidecoder

我正在尝试使用 undecoder gem，它给我一些字符串带来了问题：

```
require 'unidecoder'
str = "\u00A3"
str.to_ascii 
```

> #: (C:/Ruby193/lib/ruby/gems/1.9.1/gems/unidecoder-1.1.1/lib/unidecoder/data/x00.yml): 在第 2 行解析引号 d 标量时发现未知转义字符第 3 列来自 C:/Ruby193/lib/ruby/1.9.1/psych.rb:203:in `parse' from C:/Ruby193/lib/ruby/1.9.1/psych.rb:203:in`parse_stream' 来自 C:/Ruby193/lib/ruby/1.9.1/psych.rb:151:in `parse' from C:/Ruby193/lib/ruby/1.9.1/psych.rb:127:in`load' 来自 C :/Ruby193/lib/ruby/1.9.1/psych.rb:297:in `block in load_file' from C:/Ruby193/lib/ruby/1.9.1/psych.rb:297:in`open' 来自 C:/Ruby193/lib/ruby/1.9.1/psych.rb:297:in `load_file' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/unidecoder-1.1.1/lib/unidecoder.rb:8:in` block in '来自 C:/Ruby193 /lib/ruby/gems/1.9.1/gems/unidecoder-1.1.1/lib/unidecoder.rb:78:in `yield' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/unidecoder-1.1.1/lib/unidecoder.rb:78:in` default' 来自 C:/Ruby193/lib/ruby/gems/1.9.1/gems/unidecoder- 1.1.1/lib/unidecoder.rb:78:in `decode_char' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/unidecoder-1.1.1/lib/unidecoder.rb:39:in` block in decode' 来自 C:/Ruby193/lib/ruby/gems/1.9.1/gems/unidecoder-1.1.1/lib/unidecoder.rb:37:in `gsub' from C:/Ruby193/lib/ruby/gems/1.9.1/gems/unidecoder-1.1.1/lib/unidecoder.rb:37:in` 从 C:/Ruby193/lib/ruby/gems/1.9.1/gems/unidecoder-1.1.1/lib/unidecoder.rb:16:in 解码 `to_ascii' from (irb):21 from C:/Ruby193/bin/irb:12:in`'>>

更糟糕的是，我无法通过以下方式捕获错误：

```
foo = str.to_ascii rescue 'x' 
```

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:56:29.277

看看“C:/Ruby193/lib/ruby/gems/1.9.1/gems/unidecoder-1.1.1/lib/unidecoder/data/x00.yml”。第 2 行是一个 YAML 条目`- "\z"`，它在 Ruby 中不是一个有效的转义序列（而是一个用于标记字符串结尾的正则表达式锚点）。这可能是一个错误。您可以将此行编辑为`- "\x00"`.

但是，`"\u00A3"`(£) 不是有效的 ASCII 字符，我没有找到将其编码为 ASCII 的意义。

引发的异常是 Psych::SyntaxError，正如@mudasobwa 评论的那样，您可以捕获该特定异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:06:43.707

[没有参数列表的救援子句，参数默认为 StandardError](http://rubylearning.com/satishtalim/ruby_exceptions.html)；看起来`unidecoder`引发了其他异常，但堆栈跟踪似乎不完整（它应该显示异常类型。）

# java - 将数据从 Java(GUI) 发送到 Python？

> ID：15607593
> 
> 赞同：0
> 
> 时间：2013-03-25T04:22:32.420
> 
> 标签：java, python, swing

我想通过串行（TxRx）链接将从java程序的GUI组件获取的数据发送到python程序，但我是串行编程的新手。我是否需要以这种方式使用线程来发送数据（从 GUI 组件到串行线的数据）。我也是线程编程的新手。有人可以给我建议吗？我真的需要那个程序。我已经编写了我的 GUI 程序，如果需要我会发送它，但我不知道如何上传程序代码。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:39:22.897

看看这个[帖子](http://shazsterblog.blogspot.com/2011/11/arduino-google-voice-activated-servo.html)。它显示了 Java 和 Python 通过 UDP 数据包进行通信。Java 和 Arduino 使用 RxTx Library for Java 通过串行通信。您可以使用代码并修改 Java 和 Python 以通过串行通信。

# c# - sql server 2008 中的主键冲突错误

> ID：15607595
> 
> 赞同：0
> 
> 时间：2013-03-25T04:22:46.047
> 
> 标签：c#, sql-server, sql-server-2008

我在 C# 中创建了两个线程，并且并行调用了两个单独的函数。这两个函数都从 XYZ 表中读取最后一个 ID 并插入值为 ID+1 的新记录。这里 ID 列是主键。当我执行这两个函数时，我收到主键违规错误。这两个函数都具有以下查询：

```
insert into XYZ values((SELECT max(ID)+1 from XYZ),'Name') 
```

似乎这两个函数都在一次读取值并尝试插入相同的值。我怎么解决这个问题.. ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:28:08.097

让数据库为您选择 ID。从上面的代码中可以明显看出，您真正想要的是一个自动递增的整数 ID 列，数据库绝对可以为您处理。所以正确设置你的表，而不是你当前的插入语句，这样做：

```
insert into XYZ values('Name') 
```

如果您的数据库表已经建立，我相信您可以发出类似于以下的语句：

```
alter table your_table modify column you_table_id int(size) auto_increment 
```

最后，如果无论出于何种原因，这些解决方案都不适用（包括，如您在评论部分中指出的，无法编辑表架构），那么您可以按照评论中建议的其他用户之一进行操作，并创建一个同步方法来找到下一个 ID。您基本上只需创建一个返回 int 的静态方法，在该静态方法中发出您的 select id 语句，然后使用返回的结果将您的下一条记录插入到表中。由于此方法不能保证成功插入（由于外部应用程序也可以插入同一个表中），因此您还必须捕获异常并在失败时重试）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T04:45:25.150

将 ID 列设置为“身份”列。然后，您可以按以下方式执行查询：

```
insert into XYZ values('Name') 
```

我认为您不能在创建列后使用 ALTER TABLE 将列更改为身份。使用 Managament Studio 将此列设置为 Identity。如果您的表有很多行，这可能是一个长时间运行的过程，因为它实际上会将您的数据复制到一个新表（将执行表重新创建）。

该选项很可能在您的 Managament Studio 中被禁用。为了启用它，打开工具->选项->设计器并取消选中选项“防止保存需要重新创建表的更改”...根据您的表大小，您可能还必须设置超时。在此期间，您的桌子将被锁定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T04:58:45.860

此类问题的解决方案是使用某种序列生成 ID。

例如，在 SQL Server 中，您可以使用以下命令创建序列：

```
CREATE SEQUENCE Test.CountBy1
    START WITH 1
    INCREMENT BY 1 ;
GO 
```

然后在 C# 中，您可以从 Test 中检索下一个值，并在插入之前将其分配给 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T05:23:51.607

听起来您想要更高的[事务隔离级别](http://msdn.microsoft.com/en-us/library/ms173763.aspx)或更严格的[锁定](http://msdn.microsoft.com/en-us/library/ms187373.aspx)。

我不经常使用这些功能，所以如果我错了，希望有人会建议编辑，但你想要其中之一：

```
-- specify the strictest isolation level
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE
insert into XYZ values((SELECT max(ID)+1 from XYZ),'Name') 
```

或者

```
-- make locks exclusive so other transactions cannot access the same rows
insert into XYZ values((SELECT max(ID)+1 from XYZ WITH (XLOCK)),'Name') 
```

# php - PHP 使用 oAuth 发布到 Twitter

> ID：15607597
> 
> 赞同：2
> 
> 时间：2013-03-25T04:22:58.777
> 
> 标签：php, twitter, oauth

我的网站上有一个用户可以编辑的文本区域，最多 140 个字符。我有两个提交按钮 - 一个用于发布到 Facebook，一个用于发布到 Twitter。我能够让 Facebook 按钮正常工作，但我被 Twitter 按钮卡住了一半。

在用户点击按钮发推的那一刻，我只能让它发推到*我自己的*账户。我希望这个转到用户的帐户。我意识到这是因为我在我的 PHP 中定义了我的 oAuthToken / Secret，但我不确定如何请求用户登录 / 授权我的应用程序，从而创建和使用他们的 oAuth 信息。我似乎无法在这里或其他任何地方找到适合我的答案，所以一些帮助或正确方向的点会很棒！

到目前为止，这是我的代码：

```
<?php if($_SERVER['REQUEST_METHOD'] == "POST") { ?>

                <?php $statusupdate = $_POST['text']; ?>    
                <?php $socialsubmit = $_POST['socialsubmit']; ?>                    

                <?php if($socialsubmit == "share") { ?>
                <div id="fb-root"></div>
                <script>
                    window.fbAsyncInit = function() {
                      FB.init({
                        appId      : '182922938522212', // App ID
                        channelUrl : 'channel.html', // Channel File
                        status     : true, // check login status
                        cookie     : true, // enable cookies to allow the server to access the session
                        xfbml      : true  // parse XFBML
                      });
                      FB.ui({ 
                        method: 'feed',
                        name: 'Minty Delivers',
                        caption: 'Same Day Grocery Delivery in Halifax',
                        description: '<?php echo $statusupdate; ?>',
                        link: 'http://www.mintydelivers.com',
                        picture: 'http://www.mintydelivers.com/connect-share.png'
                      });
                    };                      
                    // Load the SDK Asynchronously
                    (function(d){
                       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
                       if (d.getElementById(id)) {return;}
                       js = d.createElement('script'); js.id = id; js.async = true;
                       js.src = "//connect.facebook.net/en_US/all.js";
                       ref.parentNode.insertBefore(js, ref);
                     }(document));

                </script>
                <?php echo $socialsubmit;?>
                <?php } else if($socialsubmit == "tweet") { ?>
                    <?php
                    $consumerKey    = 'xxx';
                    $consumerSecret = 'xxx';
                    $oAuthToken     = 'xxx';
                    $oAuthSecret    = 'xxx';

                    require_once('tw/twitteroauth.php');

                    // create a new instance
                    $tweet = new TwitterOAuth($consumerKey, $consumerSecret, $oAuthToken, $oAuthSecret);

                    //send a tweet
                    $tweet->post('statuses/update', array('status' => $statusupdate));
                    ?>
                    <div class="alert alert-success">
                            Your tweet was successfully posted. Thanks for sharing!
                    </div>
                <?php } ?>
            <?php } ?>  

            <form id="status-update" action=""; method="post">
                <textarea name="text" onKeyPress="return charLimit(this)" onKeyUp="return characterCount(this)">I found this GREAT company called Minty that delivers groceries, wine, flowers and gifts anywhere in Halifax! www.mintydelivers.com</textarea>

            <p><span id="charCount">9</span> characters left</p>

            <button id="twitter" class="tweetpopup" name="socialsubmit" value="tweet" type="submit">Tweet This</button>

            <button id="facebook" name="socialsubmit" value="share" type="submit">Share This</button>
            </form><!-- end form --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:10:26.467

用户需要授权您的应用程序代表他们发推文。这包括将他们重定向到 Twitter 并让他们授予对您的应用程序的访问权限。关于这个主题的 twitter 文档在这里：

[https://dev.twitter.com/docs/auth/obtaining-access-tokens](https://dev.twitter.com/docs/auth/obtaining-access-tokens)

在 PHP 中实现此行为的一种简单方法是通过 Temboo 的 OAuth 包装器。Temboo 将 OAuth 过程分为两个调用，`Initialize`第一个调用`Finalize`返回您需要将用户定向到的 Twitter 授权 URL。该过程的第二步返回您需要代表您的用户发布推文的访问令牌。您可以从 Temboo 的网站测试 Twitter OAuth，然后通过 Temboo PHP SDK 在您的代码中使用它。

[https://www.temboo.com/library/Library/Twitter/OAuth/](https://www.temboo.com/library/Library/Twitter/OAuth/)

（全面披露：我在 Temboo 工作）

# java - 缩小 JPanel 之间的差距

> ID：15607598
> 
> 赞同：0
> 
> 时间：2013-03-25T04:23:02.977
> 
> 标签：java, swing, layout, jpanel, flowlayout

我有一个简单的类`StatPanel`，它扩展`JPanel`并有几个`JTextFields`、一个`JCheckBox`和一对`JLabels`。该面板将用作一系列面板，用于显示信息并允许用户编辑其中的一些数据，`JTextFields`我可能会将其中大约 40 个面板全部堆叠在`JScrollPane` `JPanel`. 我使用的布局是`GridLayout(0,1)`.

我让它们工作，但是当它们在滚动面板中时，它们垂直间隔太远。我尝试过更改边距、更改间距`GridLayout`并更改各种项目的边距。我所做的一切似乎都无法让他们更亲近。

这是`StatPanel`该类的构造函数：

```
 public StatPanel(String statName, String statAbility){
        super();
        this.skillName = statName;
        this.setAlignmentY(CENTER_ALIGNMENT);
        isClassSkill = new JCheckBox();
        statLabel = new JLabel(skillName);
        statTotalField = new JTextField(maxLength + 1);
        statTotalField.setHorizontalAlignment(JTextField.CENTER);
        statAbilityLabel = new JLabel("= " + statAbility + " ");
        statAbilityModField = new JTextField(maxLength);
        statAbilityModField.setHorizontalAlignment(JTextField.CENTER);
        statSeperator1 = new JLabel(" + ");
        statRanksField = new JTextField(maxLength);
        statRanksField.setHorizontalAlignment(JTextField.CENTER);
        statSeperator2 = new JLabel(" + ");
        statMiscModField = new JTextField(maxLength);
        statMiscModField.setHorizontalAlignment(JTextField.CENTER);

        this.add(isClassSkill);
        this.add(statLabel);
        this.add(statTotalField);
        this.add(statAbilityLabel);
        this.add(statAbilityModField);
        this.add(statSeperator1);
        this.add(statRanksField);
        this.add(statSeperator2);
        this.add(statMiscModField);
    }
} 
```

当我在程序中使用它时，它看起来像这样：

![截屏](../Images/5e88054af285d0d1c10a29a5abf8a1e3.png)

由于我要堆叠这么多，我希望它们几乎是一个在另一个之上，但我似乎可以消除它们之间的差距。

这是怎么做到的？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:41:42.887

查看 FlowLayout API。默认情况下，JPanel 使用默认水平/垂直间隙为 5 像素的 FlowLayout。您将需要更改布局管理器使用的垂直间隙。因此，在您的方法的顶部，您将要添加：

```
setLayout( new FlowLayout(...) ); 
```

编辑：

更改间隙后，您还将失去主面板顶部/底部的间隙，因此您可能需要向面板添加[EmptyBorder](http://docs.oracle.com/javase/tutorial/uiswing/components/border.html)。

# php - 警告：join() [function.join]：C 中传递的参数无效

> ID：15607601
> 
> 赞同：0
> 
> 时间：2013-03-25T04:23:09.180
> 
> 标签：php, mysql

大家好，我想**使用多个复选框并将它们的值插入数据库，但我收到此错误消息：`'Warning: join() [function.join]: Invalid arguments passed in C';`

下面是代码：

```
<?php
require_once('db_conn.php'); $cat=$_POST['cat'];

if(isset($_FILES['file_upload']) && isset($cat))
{
    $shuff=str_shuffle("ABD6565LSLFKDSAJFD");   

    $food = join(', ', $_POST['food']);     

    mkdir("upload/$shuff");

    $files=$_FILES['file_upload'];  

    for($x = 0; $x <count($files['name']); $x++)    
    {
        $name=$files['name'][$x];    
        $tmp_name=$files['tmp_name'][$x];

        if(move_uploaded_file($tmp_name, "upload/$shuff/".$name))
        {
            $query="INSERT INTO image(mid, cid, name, food, path) VALUES('', '$cat', '$name', '$food', 'upload/$shuff/$name')";
            mysql_query($query);
            echo 'The file '.$name. ' uploaded successfully'. '<br \>';
        }
        else
        {
            echo 'uploading failed';
        }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:31:02.773

尝试使用内爆而不是加入：

```
if( !empty($_POST['food']) AND is_array($_POST['food']) ) {    
   $food = implode(', ', $_POST['food']); 
}
else {
  $food = "";
} 
```

# android - shell中删除sqlite数据库的命令是什么？

> ID：15607602
> 
> 赞同：1
> 
> 时间：2013-03-25T04:23:11.453
> 
> 标签：android, database, sqlite

我需要使用 shell 删除我的数据库。请帮我找到 DROP/DELETE 我的 wsemp 数据库的命令。我已经尝试过 DROP wsemp、DELETE wsemp 等但没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:29:15.017

您可以使用 shell 命令删除 SQLite 数据库，如下所示：

```
adb shell
cd /data/data
cd <your.application.java.package>
cd Databases
rm <your db name> 
```

有关更多详细信息，请查看[从远程 shell 检查 sqlite3 数据库](http://developer.android.com/tools/help/adb.html#sqlite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:25:31.580

你不能只删除数据库文件吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T04:26:28.327

在 Eclipse 中使用 DDMS。

或在外壳中（模拟器或根设备）

```
adb shell
cd /data/data
cd <your.application.java.package>
cd Databases
rm wsemp 
```

或在代码中

```
context.deleteDatabase("wsemp"); 
```

# android - 黑莓应用程序在启动时自动最小化

> ID：15607608
> 
> 赞同：1
> 
> 时间：2013-03-25T04:23:39.477
> 
> 标签：android, blackberry-10, blackberry-android

我已经在 android 中制作了应用程序并将其 apk 转换为 .bar 文件以上传到黑莓应用程序 World。但是当我上传到 App World 时，他们对其进行了测试并给了我以下问题。

 **应用程序在启动时自动最小化。用户必须选择最小化的应用程序才能访问该应用程序。** 

他们有解决这个问题的任何代码吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:03:42.340

工作了几个小时后，我发现从 Activity1(Launcher Activity) -> Activity2 移动时，我调用了 finish()。当我删除 finish() 时，它不会在启动时最小化。但我不知道为什么黑莓设备会最小化结束（）。

# c++ - C++：朋友函数传递给非朋友

> ID：15607609
> 
> 赞同：0
> 
> 时间：2013-03-25T04:23:44.547
> 
> 标签：c++, encapsulation, friend, access-control

这不会破坏封装吗？

乙：

```
class B{
    int x, y;
public:
    B() : x(1), y(1) {}
    B(const B& obj) : x(obj.x), y(obj.y) {}

    int getx();
    int gety();

    friend void pass_private_members(B&);
}; 
```

B.cpp

```
void non_friend_pass_private_members(int& x);

int B::getx(){
    return this->x;
}

int B::gety(){
    return this->y;
}

void pass_private_members(B& obj){
    non_friend_pass_private_members(obj.x);
}

void non_friend_pass_private_members(int& x){
    x++;
} 
```

主文件

```
int main(){
    B obj;
    pass_private_members(obj);
    cout << obj.getx() << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T04:31:32.793

通过声明`friend void pass_private_members(B&)`您告诉编译器您信任`pass_private_members`处理`B`. 它对私有成员的作用与编译器无关。这与拥有一个调用`non_friend_pass_private_members`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T04:31:59.543

# 是的

它确实违反了封装规则。但是 C++ 在某一时刻打破了许多“纯粹的”OOPL 规则。

让我想起了我最喜欢的 C++ 名言：

C++，唯一可以让朋友访问您的隐私的语言！

# windows-8 - 在 Windows 应用商店应用中调整控件的大小

> ID：15607618
> 
> 赞同：1
> 
> 时间：2013-03-25T04:24:52.513
> 
> 标签：windows-8, windows-store-apps

只是想知道如何让用户在运行时通过在 Windows Store App 中拖动它的角来调整 TextBox 控件的大小。不太重要的是，是否使用相同的技术来调整所有控件的大小？

感谢和问候！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T10:49:27.533

在这里，我只为您提供文本框，其他人也一样。

XAML 代码

```
<Page>
    <Canvas Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <Grid x:Name="grdTextbox" Canvas.Left="300" Canvas.Top="300" Height="40" Width="200">
            <Thumb x:Name="ThumbBottomRight" Background="White" Height="10" Width="10" HorizontalAlignment="Right" DragDelta="ThumbBottomRight_DragDelta" VerticalAlignment="Bottom"/>
            <Thumb x:Name="ThumbBottomLeft" Background="White" Height="10" Width="10" HorizontalAlignment="Left" DragDelta="ThumbBottomLeft_DragDelta" VerticalAlignment="Bottom"/>
            <Thumb x:Name="ThumbTopRight" Background="White" Height="10" Width="10"  HorizontalAlignment="Right" DragDelta="ThumbTopRight_DragDelta" VerticalAlignment="Top"/>
            <Thumb x:Name="ThumbTopLeft" Background="White" Height="10" Width="10" HorizontalAlignment="Left" DragDelta="ThumbTopLeft_DragDelta"  VerticalAlignment="Top"/>
            <TextBox Margin="5" Text="This is resizable textbox"/>
        </Grid>
    </Canvas>
</Page> 
```

C# 代码

```
private void ThumbTopLeft_DragDelta(object sender, DragDeltaEventArgs e)
{
    grdTextbox.Width -= e.HorizontalChange;
    grdTextbox.Height -= e.VerticalChange;
    Canvas.SetLeft(grdTextbox, Canvas.GetLeft(grdTextbox) + e.HorizontalChange);
    Canvas.SetTop(grdTextbox, Canvas.GetTop(grdTextbox) + e.VerticalChange);
}

private void ThumbTopRight_DragDelta(object sender, DragDeltaEventArgs e)
{
    grdTextbox.Width += e.HorizontalChange;
    grdTextbox.Height -= e.VerticalChange;
    Canvas.SetTop(grdTextbox, Canvas.GetTop(grdTextbox) + e.VerticalChange);
}

private void ThumbBottomLeft_DragDelta(object sender, DragDeltaEventArgs e)
{
    grdTextbox.Width -= e.HorizontalChange;
    grdTextbox.Height += e.VerticalChange;
    Canvas.SetLeft(grdTextbox, Canvas.GetLeft(grdTextbox) + e.HorizontalChange);
}

private void ThumbBottomRight_DragDelta(object sender, DragDeltaEventArgs e)
{
    grdTextbox.Width += e.HorizontalChange;
    grdTextbox.Height += e.VerticalChange;
} 
```

# php - 真正返回 1

> ID：15607619
> 
> 赞同：0
> 
> 时间：2013-03-25T04:24:55.837
> 
> 标签：php

false 效果很好，但是当我返回 true 时，我得到一个 true1 为什么？

```
$num = 3;

function number($num)
{
    for($i = 2; $i < $num; $i++) {

        if($num % $i == 0) {
            echo("false");

            return false;
        }
    }
    echo("true");

    return true;
}

 echo number($num); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:27:01.737

因为在 PHP`TRUE`中与字符串格式的 1 相同。但是，PHP 处理数据类型的方式不同，这就是您需要使用`===`运算符来验证类型和数据的原因。

您进行的任何比较都应使用`===`运算符。

查看实际返回的一种方法是`var_dump`在输出上使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:28:35.953

呼应真实总是会给你1.尝试

```
var_dump($num); 
```

这将向您显示变量的类型和值是什么。你会在那里看到它是真实的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T04:32:47.567

当您尝试回显某些值时，它的值将转换为字符串。所以，你试图回应布尔值。好的，让我们阅读有关[转换为字符串的文档](http://www.php.net/manual/en/language.types.string.php#language.types.string.casting)

> 布尔 TRUE 值转换为字符串“1”。Boolean FALSE 被转换为“”（空字符串）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T04:28:33.800

当您`echo number($num);` `true`被转换为字符串时，输出为“1”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T04:28:46.517

在您的情况下，您正在将布尔值隐式转换`true`为整数，其值为`1`.

要严格比较，需要使用类型和值比较，也就是`===`运算符。

此外，`var_dump()`并`print_r()`显示变量的类型。

# android - 在 Android 中，每当应用程序从内部存储器移动到 SD 卡时，都会移动应用程序的数据，反之亦然

> ID：15607623
> 
> 赞同：1
> 
> 时间：2013-03-25T04:25:17.163
> 
> 标签：android, database, android-sdcard

每当用户将应用程序从 sdcard 移动到内部存储器时，是否有任何方法可以将 *data 与应用程序一起移动，反之亦然。我不希望应用程序处理此问题，并希望以操作系统本身在移动应用程序时处理所有事情的方式实现。

*数据（一些大尺寸~50MB的文件会下载并存储在数据文件夹中。这些文件应该由另一个应用程序访问（使用内容提供程序））

我计划了以下，但似乎不是有效的解决方案。

1.  如果有任何广播意图告诉应用程序何时在 sdcard 和内部之间移动，则应用程序可以侦听和移动文件。
2.  如果选项 1 没有广播意图，在启动期间检查应用安装位置是 sdcard 还是内部并移动文件。

有没有正确的方法来实现这一点？

# maven - 在Netbean中运行maven命令的方法

> ID：15607628
> 
> 赞同：3
> 
> 时间：2013-03-25T04:25:40.987
> 
> 标签：maven, netbeans, netbeans-7

如何`mvn clean install -Pjnlp`在 Netbean 7.3 中运行命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T04:38:58.867

[要通过 Netbeans 激活配置文件](https://stackoverflow.com/questions/15276319/maven-profiles-not-working-and-failing-tests/15284901#15284901)，您可以尝试以下任务：-

1.  右键单击您的项目并`properties`从上下文菜单中选择。
2.  `Configurations`从`Categories`左侧面板中选择。
3.  在右侧面板中，您将看到 pom.xml 中定义的各种配置文件。您可以`Activate`通过选择它们并单击`Activate`按钮来创建它们，或者您可以通过单击按钮来创建新的`Add`。

为了满足您的要求，`mvn clean install -Pjnlp`只需`right click`在项目中选择`Clean and Build`. `Clean and Build`调用`mvn clean install`与激活配置文件一起。

我希望这可能会有所帮助。

# nopcommerce - 如何发布 NopCommerce 和 NopCommerce 管理网站？

> ID：15607629
> 
> 赞同：7
> 
> 时间：2013-03-25T04:25:41.837
> 
> 标签：nopcommerce

我已将 NopCommerce 部署到 Windows azure 网站，并且可以在网站 URL 上看到 NopCommerce 网站的主页。使用管理员凭据登录后，我可以在顶部看到管理链接。但是当我点击链接时，没有显示管理网站。

似乎没有部署 NopCommerce 管理网站。当我尝试从 Visual Studio 中的 Admin 网站发布到 azure 网站时，它不起作用。有人可以指出我如何部署管理网站吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T20:14:05.367

在根文件夹中运行 Deploy.bat。这将在 Deployable 文件夹中创建整个网站结构。FTP 到您的站点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-06T12:00:50.447

如果您将 Nop.Admin 项目引用添加到 Nop.Web，它将得到解决。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T23:22:18.857

这很棘手，但在习惯了 NopCommerce 后对您来说会有意义。

您需要创建一个名为“Administration”的子目录并在那里部署。然后你将里面的所有文件复制`/Administration/bin`到`/bin`. 这些文件将包括`Nop.Admin.dll`管理员使用的其他 dll。

不要忘记将所有插件 DLL 复制到`/plugins`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-04T10:50:31.910

只需将**Nop.Admin.dll**移动 到文件夹**Nop.web\bin**，此错误是由于缺少*DLL* **Nop.Admin.dll 造成**的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-21T04:32:01.657

下面是发布 NopCommerce 应用程序网站的步骤：

步骤：1 - 发布 Nop.Web 项目。

步骤：2 - 发布 Nop.Admin 项目。

转到您的发布创建的发布文件夹

```
Here is your answer below (Step :3   is your answer) : 
```

**步骤：3 - 从管理中剪切所有 dll 并将所有 dll 粘贴到 bin 文件夹中，该文件夹位于整个项目的主 bin 文件夹中。**

第 4 步 - 从您的源项目和 App_Data 文件夹 Settings.txt 和 InstalledPlugins.txt 复制两件事，这两个文件未在您的发布文件中发布，因此将这两个文件粘贴到 App_Data 的发布文件夹中。（您需要根据您的数据库主机更改 Setting.txt 中的连接字符串）。

步骤：5 - 现在您需要从源文件夹中复制整个插件文件夹（但请记住，您需要从 Presentation 文件夹中复制此插件文件夹，而不是从解决方案文件所在的主源中复制。）并将其替换为您的发布文件插件文件夹。

步骤：6 - 现在您的发布已经准备好。（现在您可以在托管服务器上部署）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-04T17:13:18.203

如果您通过 Visual Studio 使用 Web 部署，请确保在您的发布设置中部署为“RELEASE”，否则管理目录将为 404。只是想我自己在 3.30 版中发现这一点后会分享...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-22T17:31:47.123

您需要转到 Nop.Web 项目的属性并转到“Package/Publish Web”选项卡并在“要部署的项目”下将其设置为“此项目文件夹中的所有文件”。

您需要为您部署的每个“配置”执行此操作，因为对于您可能创建的任何新配置，它不会将其设置为默认值。

需要这个的原因是因为管理项目在 Nop.Web 范围之外。因此“仅运行此应用程序所需的文件”的默认设置仅包括 Nop.Web 文件。如果您选择“此项目文件夹中的所有文件”，它将包括管理项目，因为 nop.web 已引用它。

希望这可以帮助。

# android - Android上下文子菜单自行打开-关闭-重新打开

> ID：15607633
> 
> 赞同：2
> 
> 时间：2013-03-25T04:26:16.070
> 
> 标签：android, contextmenu, behavior, submenu

我有一个包含子菜单的上下文菜单，每当我点击该项目以打开子菜单时，子菜单就会打开/关闭并快速重新打开。这很烦人，但更成问题的是，我的一些用户根本看不到子菜单，它会打开/关闭，仅此而已！

现在经过试验，我发现一旦我释放该项目，长按该项目实际上可以工作：子菜单正确打开并保持打开状态！

所以我决定构建一个非常基本的项目，相信我的应用程序有一个错误，使用向导创建了一个新应用程序，一个活动，一个我 registerForContextMenu 的文本和一个带有简单子菜单的上下文菜单。

问题立即重现！！！有没有人遇到同样的问题，可以告诉我我做错了什么？我相信我遵循了文档和示例，但是我在任何地方都找不到有关此问题的任何信息！！！

我已经在 Google 群组上发布了这个问题，并在 Android 项目上报告了一个问题，但到目前为止没有人回应，这里是两个链接，其中包括测试项目（不确定如何在此处附加文件？）。

[https://code.google.com/p/android/issues/detail?id=53239&can=4&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars](https://code.google.com/p/android/issues/detail?id=53239&can=4&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/SLteohmgyy0](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/SLteohmgyy0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T13:32:22.997

为了解决这个问题，我不得不去掉上下文菜单中的任何子菜单，而是在项目选择上打开另一个上下文菜单。

以下消除了闪烁并确保子菜单保持打开状态。不过，必须使用备用隐藏视图来打开新的上下文菜单。

```
 if (id == R.id.menu_item_for_sub_menu)
    {
        new Handler().postDelayed(new Runnable()
        {
            @Override
            public void run() 
            {
                View v = vg.findViewById(R.id.fake_view_for_context);
                if (v != null)
                {
                    registerForContextMenu(v);
                    openContextMenu(v);
                    unregisterForContextMenu(v);
                }
            }
        }, 0);
    } 
```

# php - 产品有表格、固定或免费运费 如何编写查询以接收所有费率

> ID：15607642
> 
> 赞同：0
> 
> 时间：2013-03-25T04:27:04.810
> 
> 标签：php, mysql, database, shipping

大家好，我有几个表，其中包含我需要的信息，并创建了一个产生正确结果的 sql 查询。问题是我有一些表列，我想对其执行 if then 语句。例如：

苹果：25:15.00,50:10.00,100:0.00

这显示最多 25 个苹果收取 15.00 运费，最多 50 个收取 10.00 等..等等..

橙子：15.00 收取 15 的统一费率

香蕉：0.00 免费

所以基本上我希望能够对表费率的每个实例执行 preg_split() ，然后将所有这些值与统一费率相同。然后将表费率和统一费率组加在一起以获得适当的运输报价。

因此，如果我订购了 50 个苹果、1000 个橙子和 75 个香蕉，我的运费总额将计算为 25.00

我已经有了要在每个表格汇率实例上执行的代码

```
$table_cost = preg_split("^[:,]^" , $rate );
$size = sizeof($table_cost);
  for ($i=0, $n=$size; $i<$n; $i+=2) {
    if ($order_total <= $table_cost[$i]) {
      $var = $table_cost[$i+1];
    }
  } 
```

$rate 是查询生成的表 rates 的变量 $order_total 是产品的数量、价格或重量的变量。为了简单起见，我们将使用 qty 来回答这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:15:58.937

您***确实***需要重新访问您的数据库模式，因为您的整个问题都是由于忽略了规范化规则。您有一个要在其上运行正则表达式的多值字段，而不是将该数据存储为您可以关联的字段。

[这是一个演示案例的 SQLFiddle](http://sqlfiddle.com/#!12/b1888/1)。（请注意，我将使用 PgSQL，因为我对 MySQL 的语法并不十分熟悉，而且我不想费心去查找它——但在两者之间进行映射应该很容易。 ) 我还在使用数据库中的“shopping_cart”表，这样我就可以演示解决方案的 SQL，而无需对一堆值进行硬编码；解决方案没有理由甚至需要将这些值存储在数据库中才能像演示的那样工作。

如果您需要帮助将当前数据转换为规范化结构，有很多专门为此类任务设计的[ETL工具；](http://en.wikipedia.org/wiki/Extract,_transform,_load)Wikipedia 为您提供了一个[不错的列表](http://en.wikipedia.org/wiki/Category:ETL_tools)，但我个人更喜欢使用[Pentaho 的 Kettle](http://kettle.pentaho.com/)，这是一个非常强大且相当易于使用的开源 ETL 工具。

最后，我建议您花一些时间在体面的资源上帮助您学习关系数据库；[Chris Date 的书“SQL 和关系理论”](https://rads.stackoverflow.com/amzn/click/com/0596523068)是我喜欢让人们阅读的一本书，并且（如果可能的话）请浏览O'Reilly 和 Associates 推出的[视频讲座系列。](http://shop.oreilly.com/product/0636920002710.do)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:43:55.537

这已经用适当的值解决了

@TML

非常感谢您启发我如何编写数据库！这是代码！

```
$sql = "select distinct srp.p_rate, srp.p_qty, srp.p_id, cb.customers_basket_quantity \n"
. "from `shipping_rates_p` srp\n"
. "join `customers_basket` cb on (cb.customers_basket_quantity <= srp.p_qty and
cb.products_id = srp.p_id)\n"
. "join `products` p on p.products_id = srp.p_id \n"
. "where cb.customers_id=\'3\'\n"
. "group by srp.p_id\n" 
```

它返回我需要的正确值！

# php - 未验证搜索字段之一

> ID：15607649
> 
> 赞同：1
> 
> 时间：2013-03-25T04:27:44.087
> 
> 标签：php, html, mysql

我想检查我的任何一个搜索字段是否为空，如果是，我会写出一条失败消息。由于某种原因，当我尝试在两个搜索字段中提交空值或将 q2 搜索字段留空时，以下代码不起作用。当我只在第一个字段中插入一个值时，它只会写出失败消息。希望大家能帮忙。

```
<div id="searchField">
    <form name="searchField" action="" method="get">
        <input type="search" name="q" id="submitQuery" autofocus="autofocus" value="<?= $_GET['q']; ?>" placeholder="enter one movie"/> 
        <input type="search" name="q2" id="submitQuery2" value="<?= $_GET['q2']; ?>" placeholder="and then another one"/> 
        <input type="hidden" id="v" name="v" value="2" />
        <input type="hidden" id="b" name="b" value="" />
        <button type="submit" id="loop" style="border:0px; background:transparent; vertical-align:middle; margin-left:-85px; margin-top:-3px;">
            <img src="images/loop.png" width="75" height="75" alt="submit" />       
        </button>
    </form>
</div>
<div id="theData">

<?
if(str_replace(" ", "",$_GET['q'])!="" && str_replace(" ","",$_GET['q2'])!=""){
    $qContent = $_GET['q'];
    $succes = mysql_query("SELECT*FROM film WHERE name='".$qContent."'");
    include("searchMaster.php");
    if(mysql_num_rows($succes)) {
        while($o = mysql_fetch_array($succes)){
            echo $o['name'];
            if($o['trailer']){
                echo '<div id="ytplayerWrap">';
                echo '<iframe id="ytplayer" type="text/html" width="640" height="390"
                src="http://www.youtube.com/embed/'.$o['trailer'].'?http://amnestic.ueuo.com"
                frameborder="0"/>';
                echo '</div>';
            }else {
                echo '<span style="font-size:20px;">';
                echo '<br /><br /> No trailer was found for <em>'.$_GET['q'].'</em> :(';
                echo '</span>';
            }
        }
    }else{
     echo 'You did the fuckup :(';
    }
}else{
echo 'You did the fuckup :(';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:29:42.303

输入字段的名称和 ID 必须相同 像这样

```
<input type="text" name="submitQuery" id="submitQuery" autofocus="autofocus" value="<?= $_GET['q']; ?>" placeholder="enter one movie"/> 
<input type="text" name="submitQuery2" id="submitQuery2" value="<?= $_GET['q2']; ?>" placeholder="and then another one"/> 
```

# jquery - 获取边距值并将其应用于另一个元素

> ID：15607655
> 
> 赞同：0
> 
> 时间：2013-03-25T04:28:26.030
> 
> 标签：jquery, css, margin

我有一个左右边距自动的容器。我想要做的是以某种方式获取 this 的值并将其应用于另一个元素。因此，无论浏览器尺寸如何，自动边距都会发生变化，也会更新我想要的元素。

不确定这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:54:28.280

那是你要的吗？它将提醒保证金值。将其存储在某个变量中并根据需要使用它。

[http://jsfiddle.net/uv7hF/](http://jsfiddle.net/uv7hF/)

```
$(document).ready(function(){
    alert($(".aa").css("margin"));
});

<div class="aa">
    a
</div>

.aa{
    margin: 0 auto;
    width:50px;
    background-color:red;
} 
```

# c# - 我必须在 aspx 中创建数据源吗？我可以在 C# 中执行 sqldatasource (sql SPROC)、参数和数据绑定吗

> ID：15607665
> 
> 赞同：0
> 
> 时间：2013-03-25T04:29:32.737
> 
> 标签：c#, asp.net, sql-server

首先，我会为一个新手问题道歉，但我似乎找不到一个很好的例子来说明我需要做什么。当我尝试在我的 aspx 页面中创建一个 sqlDataSource 并分配 int 类型的会话参数时，我遇到了数据类型和存储过程的问题。我想尝试在代码隐藏中完成整个事情，以便更容易调试。在 aspx 中做部分工作并在代码隐藏中做部分工作对我来说似乎很混乱。我很想听听对此的意见，但我这里有显示我尝试的当前状态的代码。你能帮我让它工作吗？

```
protected void DoReport()
{
  int ClinicID = Convert.ToInt32(Session["selectedClinic"]);
  String connstr = System.Configuration.ConfigurationManager.ConnectionStrings 
        ["PC3PaymentConnection"].ConnectionString;
       using (SqlConnection conn = new SqlConnection(connstr))
       {
       using ( SqlCommand cmdMeasureHist = new SqlCommand("GetMeasureDetailHistory", conn))
        {
        cmdMeasureHist.CommandType = CommandType.StoredProcedure;
        SqlParameter pclinic = cmdMeasureHist.Parameters.Add("@ClinicID", SqlDbType.Int);
        pclinic.Value = ClinicID;
        SqlParameter pCMSMID = cmdMeasureHist.Parameters.Add("@CMMeasureID", SqlDbType.Int);
        pCMSMID.Value = Convert.ToInt32(ddMeasures.SelectedValue);
        SqlDataSource DsMeasureHist = new SqlDataSource();
        gvHistory.DataSourceID = "DsMeasureHist";
        conn.Open();
        DsMeasureHist.ExecuteNonQuery();
  gvHistory.DataBind();
   } 
```

我只是不明白如何将命令连接到数据源到gridview。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:27:11.187

您需要为此使用 SqlDataAdapter，ExecuteNonQuery() 通常用于执行插入、更新、删除命令。如果你想要一个数据源，你可以使用 DataReader 或 DataAdapter。检查以下示例：

```
  使用（SqlCommand cmdMeasureHist = new SqlCommand("GetMeasureDetailHistory", conn))
        {
        cmdMeasureHist.CommandType = CommandType.StoredProcedure;
        SqlParameter pclinic = cmdMeasureHist.Parameters.Add("@ClinicID", SqlDbType.Int);
        pclinic.Value = ClinicID；
        SqlParameter pCMSMID = cmdMeasureHist.Parameters.Add("@CMMeasureID", SqlDbType.Int);
        pCMSMID.Value = Convert.ToInt32(ddMeasures.SelectedValue);

 `SqlDataAdapter da = new SqlDataAdapter(cmdMeasureHist);
    DataTable dt = new DataTable();
    da.Fill(dt);

    gvHistory.DataSource = dt;
    gvHistory.DataBind();` 

            回答 #2

赞同：0

时间：2013-03-25T10:54:33.230

下面是一个如何定义 SQLDataSource 中所有内容的示例。您可能需要对它进行更多微调，但希望它能让您朝着正确的方向前进。

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:PC3PaymentConnection %>" 
        SelectCommand="GetMeasureDetailHistory"
SelectCommandType="StoredProcedure">
        <SelectParameters>
            <asp:ControlParameter Name="CMMeasureID"  ControlID="ddMeasures" 
PropertyName="SelectedValue" Type="Int32" />            
            <asp:SessionParameter Name="ClinicID" 
SessionField="selectedClinic" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource> 
```

```

# css - CSS3 不透明度在 Safari、Chrome 和 ie 中不起作用

> ID：15607668
> 
> 赞同：0
> 
> 时间：2013-03-25T04:30:05.513
> 
> 标签：css, animation, opacity

我只能在 Firefox 中预览。请帮我。

[**链接到小提琴**](http://jsfiddle.net/chisu26/J86mW/1/embedded/)

HTML

```
<div id="yamaha">
<div class="bg1"></div>
<div class="pic1"></div>
</div> 
```

CSS

```
body { margin:auto; }
/*yamaha */
#yamaha { width:990px; height:450px; position:relative; opacity:0;  -moz-animation: yamaha 40s linear; }
#yamaha div { position:absolute; background: 0 0 no-repeat; }
#yamaha .bg1 { width:990px; height:450px; background:url("../images/bg1.jpg");-webkit-animation: bg1 2s linear;-moz-animation: bg1 2s linear;}
#yamaha .pic1 {
    width:990px;
    height:142px;
    background:url("../images/pic1.png");
    z-index:2;
    top:308px;
    opacity:0;
    -moz-animation: pic1 100s linear 2s;
}
/* Safari and Chrome */
@-webkit-keyframes yamaha {
    0% { opacity:0; }
    1% { opacity:1; }
    50% { opacity:1; }
    51% { opacity:0; }
    100%; { opacity:0; }
}
@-webkit-keyframes bg1 {
    0% { opacity:0; }
    100%; { opacity:1; }
}
@-webkit-keyframes pic1 {
    0% { -webkit-transform:scale(0); opacity:0; }
    1% { -webkit-transform:scale(1); opacity:1; }
    100%; { -webkit-transform:scale(1); opacity:1; }
}    

/* Firefox */
@-moz-keyframes yamaha {
    0% { opacity:0; }
    1% { opacity:1; }
    50% { opacity:1; }
    51% { opacity:0; }
    100%; { opacity:0; }
}
@-moz-keyframes bg1 {
    0% { opacity:0; }
    100%; { opacity:1; }
}
@-moz-keyframes pic1 {
    0% { -moz-transform:scale(0); opacity:0; }
    1% { -moz-transform:scale(1); opacity:1; }
    100%; { -moz-transform:scale(1); opacity:1; }
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T03:36:25.390

```
#yamaha {
         width:990px; 
         height:450px; 
         position:relative; 
         opacity:0;  
         -moz-animation: yamaha 40s linear; 
         -webkit-animation: yamaha 40s linear; /* Add this */
         animation: yamaha 40s linear; /* Add this */
         }
#yamaha .bg1 { 
         width:990px; 
         height:450px; 
         background:url("../images/bg1.jpg");
         -webkit-animation: bg1 2s linear;
         -moz-animation: bg1 2s linear;
         animation: bg1 2s linear; /* Add this */
         }

/* and add this */
@keyframes yamaha {
0% { opacity:0; }
1% { opacity:1; }
50% { opacity:1; }
51% { opacity:0; }
100%; { opacity:0; }
}
@keyframes bg1 {
0% { opacity:0; }
100%; { opacity:1; }
}
@keyframes pic1 {
0% { -webkit-transform:scale(0); opacity:0; }
1% { -webkit-transform:scale(1); opacity:1; }
100%; { -webkit-transform:scale(1); opacity:1; }
} 
```

我希望这有帮助

# html - 跨多个页面提交 HTML 表单

> ID：15607669
> 
> 赞同：0
> 
> 时间：2013-03-25T04:30:07.290
> 
> 标签：html, forms, html-validation, http-post

我有 4 个 HTML 页面。在每个页面中，我都有表单和表单元素，但我的提交按钮仅在我的第 4 页。那么如何在不使用 JavaScript 的情况下尝试访问我在前三页中选择的元素？例如：考虑一个反馈表，我们必须在 3-4 页中回答问题才能提交反馈。我们只在第4页点击“提交反馈”按钮，那么第1页、第2页和第3页的元素如何提交到服务器？

这是我大学的问题单。这是完整的问题

**步骤1：**

确定适合调查网站的 Web 架构。调查网站将首先简要介绍调查，然后是调查问题。每个问题网页最多包含两个调查问题、上一个和下一个问题的链接以及一个测试提交按钮。请注意，为此实验室创建了一个服务器脚本，允许您在单击“测试”按钮时测试数据是否正确传递到服务器。但是，不会在服务器上保存任何数据。

**第2步：**

使用本地计算机上的任何文本编辑器（例如 NotePad++），为包含以下 HTML 5 元素的调查网站创建 HTML。调查表将放置在 ... 标签之间。

```
<!DOCTYPE HTML> <html lang="en"> <head>
<meta charset="utf-8"> <meta name="description" content="Web development"> 
<meta name="keywords"   content="HTML (Part 1 – Content - Form)"> 
<meta name="author" content="put your name here"> 
<title>Web Development Survey</title>
</head> <body>
<!–- Survey content --> </body>
</html> 
```

**第 3 步：**

使用第 3 讲中讨论的元素标记表单内容。这些是

```
- Form <form> ... </form> 
 - Form elements such as <label>...</label>, <input ...>, <select> ... </select>, <text area> ... </text area>,<fieldset> ... </fieldset> and <legend>...</legend> 
```

根据需要使用第 2 讲中讨论的其他 HTML 元素

```
 - Heading <h#>...</h#>, Paragraph <p>..</p>, Horizontal Rule <hr> 
 - List <ol>...</ol> or <ul>...</ul>, Table <table>...</table>, Image <img ...> and Anchor <a ... >...</a> 
 - Special characters 
```

例如，姓名和性别的第一个问题页面可以标记如下。

```
<form id="survey" method="post" action="http://mercury.ict.swin.edu.au/cchua/webdev/surveytest.php">
    <p><label>Name (optional)</label> <input type="text" name="name" size="20" />
    </p> <p>Gender<br />
    <label>Male</label> <input type="radio" name="gender" value=”M" />
    <label>Female</label>
    <input type="radio" name="gender" value="F" /> </p>
    <p><input type="submit" value="Test" /> <input type="reset" value="Reset" />
    </p> 
</form> 
```

*   请注意，上述示例代码中使用了 XHTML 编码样式 在服务器上使用以下 URL 设置了处理脚本：

“//mercury.ict.swin.edu.au/cchua/webdev/surveytest.php”

这允许您测试您的表单是否可以正确地将输入的数据传递给服务器。请注意，输入的任何样本数据都不会保存在服务器上。

您可以在surveydata.txt 中获取所有调查信息和问题。确保每个调查问题使用正确的表单元素。例如，复选框用于允许多个答案的问题，而单选按钮用于单选问题。

**第4步：**

在mercury服务器~/hit1091/www/htdocs的unit文件夹下新建文件夹'lab03'。将今天的工作上传到这个 lab03 文件夹。

使用 WinSCP，将所有调查 HTML 文件从本地计算机拖放到 htdocs/lab03 文件夹。您可以使用“survey##.htm”格式命名调查 HTML 文件，其中 ## 表示 2 位数字。例如，第一页可以命名为“survey01.htm”等等。

**第 5 步：测试和查看网页。**

要通过 http 查看页面，请使用任何 Web 浏览器并输入以下地址，//mercury.ict.swin.edu.au/hit1091//

这是 s<您的 7 位 Swinburne ID >。例如 * [http://mercury.ict.swin.edu.au/hit1091/s1234567/lab_03/survey01.htm](http://mercury.ict.swin.edu.au/hit1091/s1234567/lab_03/survey01.htm) *

当授权请求对话框弹出时，使用您的 SIMS 用户名和密码确认访问。

**第 6 步：验证页面并修复显示的所有错误并重新验证**

[要验证 HTML 文件，请使用http://validator.w3.org](http://validator.w3.org)上的“文件上传”界面。对于需要服务器预处理的网页页面，必须使用通过“URL”进行验证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:27:01.217

您需要做的是在每个页面上提交。然后通过一些服务器端脚本将帖子附加到下一页中的表单，直到您准备好处理信息。

例如，如果您在 PHP 中执行此操作，您可以在第二页上显示类似的内容。

```
<form method="post" action="page-3.html">
  <label>Input for page 2</label>
  <input type="text" name="page2Input" />

<?php 
  foreach($_POST as $key => $value) {
     echo '<input type="hidden" name="'. $key .'" value="' . $value .'" >'; //Info from page 1
  }
?>

  <input type="submit" value="To Page 3">
</form> 
```

这会将第一页的信息“添加”到表单中，以便将其信息也发送到第 3 页。或者您也可以将它们放在 $_SESSION 中。

有不同的方法可以做到这一点。这只是其中之一。不过不要忘记清理您的输入。

# objectify - 如何阻止 Objectify 返回缓存值？

> ID：15607670
> 
> 赞同：2
> 
> 时间：2013-03-25T04:30:16.290
> 
> 标签：objectify

我正在使用 Objectify 保存一个对象，如下所示：

```
Thing th = new Thing();
th.identifier = thingId;
th.name = thingName;
th.json = thingData;
ofy().save().entity(thing);
pResponse.setStatus(200);
pResponse.getWriter().println("OK"); 
```

我使用 GAE 数据存储浏览器验证数据库中的值已更新。我在本地运行。然后我加载所有这样的东西：

```
Map<String, List<Thing>> responseJsonMap = new HashMap<String, List<Thing>>();
List<Thing> things = ofy().load().type(Thing.class).list();         
responseJsonMap.put("things", things);
pResponse.setContentType("application/json");
try {
    GSON.toJson(responseJsonMap, pResponse.getWriter());
} ... 
```

我得到的是保存之前存在的数据。我尝试关闭实体上的缓存并调用`ofy().clear()`，但都不起作用。如果我重新启动服务器或等待足够长的时间，保存的数据就会通过。我也尝试`.now()`在保存后添加，但这不是必需的，因为我可以在数据存储中验证操作已完成。我真的很想能够加载我刚刚保存的数据。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T05:04:17.857

我做错的是没有阅读手册并忘记了一步。

> Objectify 需要一个过滤器来清理在请求结束时保留的任何线程本地事务上下文和挂起的异步操作。将此添加到您的 WEB-INF/web.xml：

```
<filter>
     <filter-name>ObjectifyFilter</filter-name>
     <filter-class>com.googlecode.objectify.ObjectifyFilter</filter-class>
</filter>
<filter-mapping>
     <filter-name>ObjectifyFilter</filter-name>
     <url-pattern>/*</url-pattern> 
</filter-mapping> 
```

好吧，检查一下你是否得到了你真的没想到的缓存值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:09:59.500

除了 ObjectifyFilter 问题之外，您最有可能看到的是数据存储区中查询的最终一致性。

看到这个： [https ://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency](https://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency)

# c++ - 运算符重载？

> ID：15607671
> 
> 赞同：-1
> 
> 时间：2013-03-25T04:30:20.850
> 
> 标签：c++, operator-overloading

```
 MyClass & operator=(const MyClass &rhs); 
```

是什么意思 ”＆”？为什么不是 is`My Class`而不是`MyClass &`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:34:33.023

简单地说，`&`返回值`operator =`是一个*引用。*

这与运算符重载无关。它与普通函数定义的语法相同：

```
MyClass& foo()
{
  return *this; // returns a reference to MyClass instance
}

MyClass foo()
{
  return *this; // returns a copy of MyClass instance
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:01:37.727

返回`MyClass&`只是为了使运算符'='在链中工作。返回`MyClass&`或不同的东西不会增加重载'='的任何效果。

Returing`MyClass&`帮助我们使用 '=' 类似于我们在内置数据类型上使用它的方式。例如。

```
int x = y = z = 123; 
```

有关类似的讨论，请参阅 Thinking in C++，（关于 iostreams 的讨论）。

# neo4j - cypher vs neo4j-sh：为什么我们两者都有？

> ID：15607678
> 
> 赞同：1
> 
> 时间：2013-03-25T04:30:57.070
> 
> 标签：neo4j

我了解两者有何不同：

*   neo4j-sh（不是我猜的真名）与类似文件系统的抽象一起使用
*   cypher 更像是一种类似 SQL 的方法

但为什么我们两者都有？

实际上，我真的很喜欢将数据结构作为文件系统进行操作的能力（就像 FUSE 对 procfs 之类的东西所做的那样），并且很乐意在其中编写我所有的重要脚本。

但它气馁了吗？我想做的最后一件事是依赖一种未来将不受支持或弃用的技术。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T07:59:43.877

我不认为 neo4j-shell 旨在用于应用程序，预期的用例是在开发和调试期间。请注意，它还支持 Cypher 查询。我会说尽可能使用 Cypher。

Neo4j-shell 早在 Cypher 发明之前就已经存在了，所以这就是为什么我们现在两者都有。

# asp.net-mvc - MVC 绑定简单的 html 文本框而不使用 html 助手和 Razor

> ID：15607683
> 
> 赞同：4
> 
> 时间：2013-03-25T04:31:36.827
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有一个关于 MVC 的问题（我是 MVC 新手）
我的问题是

在带有 Razor 文本框的 MVC 中，我们这样写

```
@Html.TextBoxFor(m=>m.name) 
```

现在假设我不想使用 Razor 和 html 辅助类。我想要简单的 html 输入，像这样

```
<input type="text" name='@Model.name' value='@Model.name'> 
```

以上是否可能以某种方式？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-29T22:17:51.287

您可以使用

```
<input type="text" name='@Html.NameFor(x => x.name)' value='@Model.name'> 
```

# wcf - 用于工作人员角色云服务的 Windows Azure 控制台

> ID：15607686
> 
> 赞同：0
> 
> 时间：2013-03-25T04:31:46.563
> 
> 标签：wcf, azure, azure-worker-roles

我最近在本地机器上开发了一个工人角色云服务。该服务公开了一个 WCF 接口，该接口以字节数组的形式接收文件，重新编译文件，将其转换为适当的格式，然后将其存储在 Azure 存储中。我设法在我的机器上使用 Azure Compute Emulator 让一切正常工作，并将服务发布到 Azure，然后......什么也没有。再次在我的机器上运行它，它按预期工作。当我在我的计算机上处​​理它时，Azure Compute Emulator 的控制台输出对于让应用程序运行至关重要。

是否有类似的功能可以通过 RDP 在云服务上使用？例如在命令提示符下或在 power shell 中启动/重新启动角色？如果没有，调试/记录工作人员角色正在做什么的最佳方法是什么（不使用 Intellitrace）？我在项目中启用了诊断，但它似乎没有给我提供与计算机模拟器控制台相同级别的详细信息。我已在 localhost 上再次重新运行角色和相应的 .NET 应用程序，但无法在控制台中找到任何可能的错误。

**编辑：下一个最好的事情**

回到手动记录，我实现了一个类，它将文本文件提供给我的 Azure 存储帐户。这是代码：

```
public class EventLogger
{
    public static void Log(string message)
    {
        CloudBlobContainer cbc;
        cbc = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("StorageClientAccount"))
                   .CreateCloudBlobClient()
                   .GetContainerReference("errors");
        cbc.CreateIfNotExist();
        cbc.GetBlobReference(string.Format("event-{0}-{1}.txt", RoleEnvironment.CurrentRoleInstance.Id, DateTime.UtcNow.Ticks)).UploadText(message);
    }

} 
```

调用 ErrorLogger.Log() 将创建一个新的文本文件并记录您在其中输入的任何消息。我在下面的答案中找到了一个例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:41:00.303

我知道没有用于工作人员角色的控制台。如果诊断没有给您任何帮助，那么您需要变得有点笨拙。尝试自己追踪消息和错误以进行 Blob 存储。史蒂夫马克思在这里有一个很好的例子[http://blog.smarx.com/posts/printf-here-in-the-cloud](http://blog.smarx.com/posts/printf-here-in-the-cloud)

正如他在文章中指出的那样，这不是用于生产，只是为了帮助您找到问题。

# jquery - jquery问题调用一个类以将鼠标悬停在插件上

> ID：15607687
> 
> 赞同：0
> 
> 时间：2013-03-25T04:31:49.353
> 
> 标签：jquery, html, css

当用户将鼠标悬停在图像上时，该脚本应该使文本从图像下方向上移动。我不相信 jQuery 正确地调用了这个类，这就是它不工作的原因。我已经包含了来自 jquery 插件的代码以及应该与该插件一起使用的 html 部分。如果您对我有任何疑问，请不要犹豫，我将等待回复，我刚开始使用今天的 jQuery 并且在工作正常时很享受它，但现在一直在寻找答案一段时间，我只是对为什么我无法弄清楚这一点感到困惑。

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
  <script>

  $(function(){
  $(' #d1').contenthover({
   overlay_width:300,
   overlay_height:150,
   effect:'slide',
   slide_direction:'bottom',
   overlay_x_position:'center',
   overlay_y_position:'bottom',
   overlay_background:'#000',
   overlay_opacity:0.8
   });
   });

  </script> 
```

* * *

```
 <section id="s-explore">

   <div class="pagebreak"><span>The Lifestyle</span> <i class="down">&lt;</i></div>

    <div class="wrapper layout">

    <div class="col">
        <div class="media">
            <img id="d1" src="images/main.png" />
                <div class="contenthover">
                    <h3>Lorem ipsum dolor</h3>
                    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames</p>
                    <p><a href="#" class="mybutton">Lorem ipsum</a></p>
                </div>
        </div>

        <div class="body">
            <h1>Vestibulum</h1>
            <h2>quis<br />Vestibulum</h2>
        </div>
    </div> 
```

* * *

工作代码：

```
 <!DOCTYPE HTML>
 <html>
 <head>

 <link href="hover-content-style.css" rel="stylesheet" type="text/css" />

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>

  <script>

  $(function(){

   $('#d1').contenthover({
    overlay_width:300,
    overlay_height:150,
    effect:'slide',
    slide_direction:'bottom',
    overlay_x_position:'center',
    overlay_y_position:'bottom',
    overlay_background:'#000',
    overlay_opacity:0.8
    });

    });

    </script>

    <title>JQuery slide on top of image - animation</title>

    </head>

    <body>
      <img id="d1" src="images/vito_red.png" width="318" height="269" />
         <div class="contenthover">
           <h3>Lorem ipsum dolor</h3>
           <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum pulvinar ante quis augue lobortis volutpat. </p>
           <p><a href="#" class="mybutton">Lorem ipsum</a></p>
          </div>

      <script src="hoverslide.js"></script>

      </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:00:01.883

您需要包含该`js`文件：[http ://www.backslash.gr/demos/contenthover-jquery-plugin/jquery.contenthover.min.js](http://www.backslash.gr/demos/contenthover-jquery-plugin/jquery.contenthover.min.js)

这是一个工作示例；[http://jsfiddle.net/btevfik/MbLNN/](http://jsfiddle.net/btevfik/MbLNN/)

# jquery - 通过 jQuery.ajax 使用 FormData 发布 Blob

> ID：15607689
> 
> 赞同：8
> 
> 时间：2013-03-25T04:31:58.933
> 
> 标签：jquery, ajax, html

我已经多次看到这个问题被问到，但是尽管我尝试了很多，但我仍然没有看到任何结果：

如何附加 Blob 以形成数据并通过 jquery 发布？

```
var reader = FileReader(); 
reader.readAsBinaryString(f);
reader.onload = function() {
    var slice = reader.result.slice(0,100, {type: "application/octet-stream"});

    var formdata = new FormData();
    formdata.append("blobData", slice); // I have verified via console.log(slice) that this has data
    formdata.append("blobName", "Photo");

    send(formdata);
}

function send(data) {
    $.ajax({
        url: "/upload",
        type: "POST",
        data: data,    
        cache: false,
        contentType: false,
        processData: false
    });
} 
```

所有非 blob 键/值都在请求中，甚至 blob 的键......但不是 blob 数据。

![缺失数据](../Images/45fccd7961a82e5ff2e2c39110b33a4f.png)

有趣的是，当我使用 Firefox 而不是 Chrome 发布时，我得到了一些数据......但不多（这应该是高达 2 MB 的数据......它是 7 个字节）

![在此处输入图像描述](../Images/40b2d45e2dad9bfa8b24b5bfebf9ce3a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-15T19:10:02.347

我最近遇到了这个确切的问题并有解决方案。

核心问题是`reader.result`传递给`reader.onload`by的值`readAsBinaryString`是字符串，而不是blob。听起来确实很明显，但我也假设我正在处理一个 blob。由于 String 和 Blob 对象都具有切片方法，因此变量`slice`虽然设置了看起来像二进制数据的数据，但仍然只是一个字符串。String.slice() 方法的工作原理与 Blob.slice() 方法完全相同，只是忽略了第三个参数，这就是为什么您没有注意到真正发生的事情的原因。

根据[FormData 规范](https://developer.mozilla.org/en-US/docs/Web/API/FormData)，任何不是 Blob 或 File 对象的值都将转换为字符串。似乎`slice`字符串在第一个非 ASCII 字符处被截断（我只是在猜测确切的原因，但重要的一点是字符串在附加到 时肯定会被截断`formdata`）。

解决方法是先转换`reader.result`成blob：

```
reader.onload = function() {
    var blob = new Blob([reader.result]), 
        slice = blob.slice(0,100, {type: "application/octet-stream"});

    var formdata = new FormData();
    formdata.append("blobData", slice);
    formdata.append("blobName", "Photo");

    send(formdata);
} 
```

（数组是 Blob 构造函数的要求）。

Now`slice`是一个 blob，因为 Blob.slice() 方法返回一个 Blob 对象，并且可以附加到`formdata`而不被字符串转换破坏。

# c# - 从数组中获取所有重复项而不遍历超过 1

> ID：15607696
> 
> 赞同：-4
> 
> 时间：2013-03-25T04:32:56.183
> 
> 标签：c#, .net

我有一个整数数组列表 int[] 标记 = {2,3,4,5,4,5,6,2,9};

我想在此列表中获取所有重复项，并且数组只遍历一次。不应使用任何 inbuild 函数，因为每个 inbuild 函数也会遍历每个 serch。

预期结果应该是 2,4,5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:45:12.497

好吧，只要条件是您只能遍历 THIS 列表一次，您就可以再创建两个列表，1 个非重复项和 1 个重复项。

遍历输入列表，然后检查非重复项是否具有 int。如果没有，则添加它，如果是，则将其添加到 dups，如果它尚未包含它。最后，dups 应该有您要求的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:50:20.687

```
int[] marks = { 2, 3, 4, 5, 4, 5, 6, 2, 9 };
Dictionary<int, bool> flags = new Dictionary<int, bool>();
HashSet<int> result = new HashSet<int>();

for (int index = 0; index < marks.Length; index++)
{
    if (flags.ContainsKey(marks[index])) result.Add(marks[index]);
    else flags.Add(marks[index], true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T04:45:27.280

按照这个[在线性时间内找到重复](http://harithimanshu.wordpress.com/2009/03/14/finding-duplicate-value-in-unsorted-array-in-linear-time/)

# javascript - 3 次点击确认 javascript 窗口？

> ID：15607700
> 
> 赞同：0
> 
> 时间：2013-03-25T04:33:10.800
> 
> 标签：javascript, ajax

嗨，它需要 3 次点击来使用我的 javascript 确认提示执行任何命令。我所有的代码都嵌套在一个句柄请求 ajax 函数中。这是我的代码，我不知道它为什么这样做？

```
closeButton.onclick = function() {
    node.setData('alpha', 0, 'end');
    node.eachAdjacency(function(adj) {
      adj.setData('alpha', 0, 'end');
        var requestone = createRequest();
        var deletenode = node.id;
        var vars = "deletenode=" + encodeURIComponent(deletenode);
           requestone.open("POST", "deletenode.php", true);
           requestone.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
       if (confirm('Are you sure you want to delete this species from the Database?')) {
           requestone.onreadystatechange = function()
           {
           handleRequest(requestone);
           };
          requestone.send(vars);
          fd.fx.animate({
         modes: ['node-property:alpha',
               'edge-property:alpha'],
         duration: 500
        }); 
 } else
{
  // Do nothing!
 }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:56:33.557

这并不意味着，它需要 3 次点击。您必须等到操作完成。然后只有你会得到回应。这意味着 readyState 变为 4。

readyState 是 HTTPRequest 的属性之一。它指示对象的当前状态。

有5个州。
0 - 未初始化 (UNSENT)
1 - 加载 (OPENED)
2 - 加载 (HEADERS_RECEIVED)
3 - 交互 (LOADING)
4 - 完成 (DONE)

# css - 跨浏览器（或接近）CSS滚动条样式？

> ID：15607702
> 
> 赞同：0
> 
> 时间：2013-03-25T04:33:12.037
> 
> 标签：css, scrollbar

有很多关于如何在 webkit 中设置滚动条样式的材料，但在任何其他浏览器中几乎没有，尽管据报道 IE 是第一个实现它的浏览器。

我正在寻找的是相当于：

```
&::-webkit-scrollbar {
    ...
}

&::-webkit-scrollbar-track {
    ...
}

&::-webkit-scrollbar-thumb {
    ...
} 
```

在尽可能多的浏览器中。

我的理念是，如果你有垃圾浏览器，那是你自己的错，我不愿意在我的滚动条样式上切换到 javascript 解决方案。但我愿意付出一点努力。

# php - simple_html_dom 不返回

> ID：15607703
> 
> 赞同：0
> 
> 时间：2013-03-25T04:33:21.813
> 
> 标签：php, parsing, web-crawler, simple-html-dom

我正在使用 SIMPLE_HTML_DOM 测试解析器，并在解析从该 URL 返回的 HTML DOM 时：[HERE](http://www.ynet.co.il/articles/0,7340,L-4360333,00.html)

它没有找到 H1 元素...我尝试成功返回所有 div。

我正在使用一个简单的请求来诊断此问题：

```
foreach($html->find('H1') as $value) { echo "<br />F: ".htmlspecialchars($value); } 
```

在查看源代码时，我意识到：

*   h1 是大写 -> H1 - 但 SIMPLE_HTML... 正在处理：

    ```
     //PaperG - If lowercase is set, do a case insensitive test of the value of the selector.
            if ($lowercase) {
                $check = $this->match($exp, strtolower($val), strtolower($nodeKeyValue));
            } else {
                $check = $this->match($exp, $val, $nodeKeyValue);
            }
            if (is_object($debugObject)) {$debugObject->debugLog(2, "after match: " . ($check ? "true" : "false"));} 
    ```

任何机构都可以帮助我了解这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T05:45:27.563

尝试这个

```
 $oHtml = str_get_html($html);
        foreach($oHtml->find('h1') as $element)
        {
            echo $element->innertext;
        } 
```

您还将使用正则表达式跟随函数返回所有 h1 标记的内部文本的数组

```
 function getH1($yourhtml)
{
    $h1tags = preg_match_all("/(<h1.*>)(\w.*)(<\/h1>)/isxmU", $yourhtml, $patterns);
    $res    = array();
    array_push($res, $patterns[2]);
    array_push($res, count($patterns[2]));
    return $res;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:46:39.380

找到了...

但是不能解释！

我用包括 H1（大写）在内的另一个代码进行了测试，它工作正常。

在使用 SIMPLE_HTML_DOM 代码时，我评论了“remove_noise”，现在它运行良好，我认为这是因为该网站具有无效的 HTML，并且噪声去除器去除了太多并且在结束标记脚本之后没有结束：

```
 // $this->remove_noise("'<\s*script[^>]*[^/]>(.*?)<\s*/\s*script\s*>'is");
    // $this->remove_noise("'<\s*script\s*>(.*?)<\s*/\s*script\s*>'is"); 
```

谢谢大家的帮助。

# javascript - 如何在javascript中捕获jquery自定义事件

> ID：15607704
> 
> 赞同：4
> 
> 时间：2013-03-25T04:33:24.363
> 
> 标签：javascript, jquery, events, try-catch

我在主页内的 iframe 中创建了一个 jquery 自定义事件。我触发了一个自定义事件，如下面的文档所示

[http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

```
$('#foo').trigger('custom', ['Custom', 'Event']); 
```

有几个例子可以说明如何使用 jquery 来捕获它。但是嵌入了 iframe 的主页没有 jquery，所以我必须让普通的 javascript 代码捕获这个事件。我没有在网上找到任何文档。任何想法/链接/指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:08:18.287

在您的主页 [https://developer.mozilla.org/ru/docs/DOM/element.addEventListener添加原生事件监听器](https://developer.mozilla.org/ru/docs/DOM/element.addEventListener)

# asp.net - asp.net 中 Treeview 控件的更新面板不起作用？

> ID：15607707
> 
> 赞同：0
> 
> 时间：2013-03-25T04:33:50.843
> 
> 标签：asp.net, .net, treeview, asp.net-ajax

单击 Treeview 中的节点时，我在后面的代码中构建 HTML 并将其加载到我的文字控件中。我不希望每次单击树视图控件中的任何节点以获取数据以以文字形式显示时都加载页面。我怎样才能避免在这里回发？我尝试在树视图周围使用更新面板，如下所示，现在单击不同节点时数据没有改变，也没有回发。我该如何解决这个问题？

```
 <table> 
                                <tr>
                                    <td valign="top">
                                        <asp:UpdatePanel ID="UP_HealthCon_Ddl_Conditions" runat="server">
                                            <contenttemplate>
                                      <asp:TreeView ID="Tree_Index" NodeWrap="false" Style="font-size: 11px; font-family: Tahoma; font-weight: bold; text-align: left;" runat="server" Width="10px" EnableClientScript="False">
                                        </asp:TreeView>
                                         </contenttemplate> 
                                         </asp:UpdatePanel>
                                    </td>
                                </tr>
                            </table>

                            <table>
                                <tbody>
                                    <asp:Label ID="litSPName" runat="server" Font-Bold="true"></asp:Label>
                                    <br />
                                    <br />
                                    <asp:Literal ID="lit_basic_Result" runat="server"></asp:Literal>
                                </tbody>
                            </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:47:17.097

将 contenttemplate 和 updatepanel 添加到我的表格中，它起作用了！！！

# cmake - 什么是原生构建环境？

> ID：15607709
> 
> 赞同：3
> 
> 时间：2013-03-25T04:34:09.287
> 
> 标签：cmake

我只是从互联网上阅读信息，目前是[关于页面的 cmake](http://www.cmake.org/cmake/project/about.html)，我需要这些信息来填补空白，这有助于看到大局。

我希望，答案肯定是直截了当的。什么是原生构建环境？

背景：我需要知道**如何**在我的机器上构建软件（CodeBlocks 等），为什么我需要这样做，这样做的好处等等。但首先，我需要知道我遇到的每一个行话，并且我找不到任何关于“本机构建环境”到底是什么的解释，尽管我可以在某种程度上推测。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T04:36:37.060

[“本机”](http://en.wikipedia.org/wiki/Native_%28computing%29)如“直接在主机操作系统中运行”而不是“在虚拟机或模拟器中运行”。

CMake 的 about page 试图传达的特定点是 CMake 实现跨平台功能的方式：特别*不是*通过虚拟化，而是通过直接与主机系统合作/协作，以及使用主机系统的“正常”方式做事。

> 那么构建环境是否只是包含编译器构建软件所需的所有垃圾的目录？

这过于简单化了——没有什么可以说它是一个单一的目录——但或多或少，是的。该术语不是行话，它的字面意思是构建所需的“世界状态”（又名环境）。

> 那你会怎么称呼另一件事，非本地人？

当然，或虚拟化，或模拟，或添加任何其他中间层。

> 为什么我们也需要区分？

为什么不？有一个简洁、清晰、简单的术语很有用，这样我们就可以准确地进行交流，并且尽量减少混淆和歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-29T21:01:31.497

为什么是“非本地”？如果您还没有弄清楚这一点 - 有一种叫做交叉编译的东西。

简而言之，如果我无法访问需要在其上运行软件的目标硬件（或等效的虚拟机），我如何在我的主机上开发此软件并将其打包以在该目标上运行？

交叉编译通过提供执行翻译（或其他重要的低级内容）的必要工具来解决这个问题，从而为您提供最终软件。这种开发软件的环境称为非本地环境。

好吧，我相信我们需要这个术语来说明这项技术。

# android - 如何在 Android 代码中将“top -m 10 -n 1”命令输出保存到字符串？

> ID：15607710
> 
> 赞同：1
> 
> 时间：2013-03-25T04:34:10.220
> 
> 标签：android, shell, command-line, environment-variables

我正在尝试这段代码

```
public String ReadFromCMD()
        {
             ProcessBuilder cmd;
             String result="";
             //int resultshow = 0;

             try{
              String[] args = {"/system/bin/top -m 10 -n 1"};

                 cmd = new ProcessBuilder(strCmdArgs);

              Process process = cmd.start();
              InputStream in = process.getInputStream();

              BufferedReader reader = new BufferedReader(
                        new InputStreamReader(process.getInputStream()));
                int read;
                char[] buffer = new char[4096];
                StringBuffer output = new StringBuffer();

                process.waitFor();

                while ((read = reader.read(buffer)) > 0) {
                    output.append(buffer, 0, read);
                }
                reader.close();

               in.close();

             } catch(Exception ex){
              ex.printStackTrace();
             }
             return result;
        } 
```

错误来了：

```
03-25 09:57:36.885: W/System.err(30300): java.io.IOException: Error running exec(). 
Command: [/system/bin/top -m 10 -n 1] Working Directory: null Environment: 
[ANDROID_SOCKET_zygote=10, SECONDARY_STORAGE=/storage/extSdCard:/storage/UsbDriveA:/storage
/UsbDriveB:/storage/UsbDriveC:/storage/UsbDriveD:/storage/UsbDriveE:/storage/UsbDriveF, 
ANDROID_BOOTLOGO=1, EXTERNAL_STORAGE=/storage/sdcard0, ANDROID_ASSETS=/system/app, 
PATH=/sbin:/vendor/bin:/system/sbin:/system/bin:/system/xbin, ASEC_MOUNTPOINT=/mnt/asec, 
LOOP_MOUNTPOINT=/mnt/obb, BOOTCLASSPATH=/system/framework/core.jar:/system/framework/core-
junit.jar:/system/framework/bouncycastle.jar:/system/framework/ext.jar:/system/framework
/framework.jar:/system/framework/framework2.jar:/system/framework/android.policy.jar:
/system/framework/services.jar:/system/framework/apache-xml.jar:/system/framework
/sec_edm.jar:/system/framework/seccamera.jar, ANDROID_DATA=/data, LD_LIBRARY_PATH=/vendor
/lib:/system/lib, ANDROID_ROOT=/system, ANDROID_PROPERTY_WORKSPACE=9,66560, 
VIBE_PIPE_PATH=/dev/pipes]
03-25 09:57:36.885: W/System.err(30300):    at java.lang.ProcessManager.exec(ProcessManager.java:211)
03-25 09:57:36.885: W/System.err(30300):    at java.lang.ProcessBuilder.start(ProcessBuilder.java:195) 
```

此错误出现在行

```
Process process = cmd.start(); 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:45:36.260

这个：

```
String[] args = {"/system/bin/top -m 10 -n 1"}; 
```

意味着您的可执行文件是目录中命名`top -m 10 -n 1`的文件`/system/bin`。

您想要的是`top`在该目录中命名的可执行文件，带有`-m 10 -n 1`四个单独的参数：

```
String[] args = {"/system/bin/top", "-m", "10", "-n", "1"}; 
```

或者，由于这些组件都不包含空格，因此您可以“作弊”并编写如下内容：

```
String[] args = "/system/bin/top -m 10 -n 1".split(" "); 
```

这是相同的（它仍然创建一个由五个字符串组成的数组），但可以说更容易阅读。

# python - 未定义的 django url

> ID：15607716
> 
> 赞同：0
> 
> 时间：2013-03-25T04:34:43.147
> 
> 标签：python, django, url

我遇到了一个问题，即“不存在”的网址能够显示。例如，我转到 /myapp/login 的一个 url，它可以工作。然后我去 /myapp/login/login ，它仍然有效。然后我去 /myapp/insertrandomcharactershere/login 它仍然有效。这适用于我在 /myapp/ 的子路径中的每个 url，因此 /myapp/register、/myapp/login 和 /myapp/myaccount。似乎只要它以我的 urlconf 中的名称结尾，它就可以工作。我一直无法解决这个问题，所以我从我的登录页面和我的 urlconfs 添加了一些代码，希望能包含这个问题。

对于不是 /myapp/、/myapp/login/、/myapp/register/、/myapp/myaccount/ 的任何内容，我都应该 404

[http://paste.pound-python.org/show/31613/](http://paste.pound-python.org/show/31613/)

```
#django/urls.py
urlpatterns = patterns('',
    url(r'myapp/', include('myapp.urls')),
    url(r'^admin/', include(admin.site.urls)),
)

#myapp/urls.py
urlpatterns = patterns('myapp.views',
    url(r'^$', 'index', name='index'),
    url(r'register/$', 'register', name='register'),
    url(r'myaccount/$', 'myaccount', name='myaccount'),
    url(r'login/$', 'login_page', name='login'),
    url(r'logout/$', 'logout_user', name='logout')
)

#myapp/login.py
def login_page(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect(reverse('index'))
    form = LoginForm(request.POST or None)
    if form.is_valid():
        username = form.cleaned_data['username']
        username = username.capitalize()
        password = form.cleaned_data['password']
        try:
            User.objects.get(username=username)
        except:
            return render(request, 'myapp/login.html', {
                'form': form,
                'error': "Account doesn't exist"
                })
        user = authenticate(username=username, password=password)
        if user is not None:
            if user.is_active:
                login(request, user)
                return HttpResponseRedirect(reverse('index'))
            else:
                return render(request, 'myapp/login.html', {
                    'form': form,
                    'error': 'Account is disabled or banned',
                    })
        else:
            return render(request, 'myapp/login.html', {
                'form': form,
                'form': 'Authentication Error!'
                })
    return render(request, 'myapp/login.html', {
        'form': form,
        })

{% if not user.is_authenticated %}

#myapp/templates/myapp/login.html
<strong>Login</strong>
<form action='{% url 'login' %}' method="post">{% csrf_token %}
{{ form.as_p }}
<input type="submit" value="Login">
</form>
{{ error }}
{% endif %} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T04:39:39.423

我认为这些网址`^`缺少：

以下行：

```
url(r'login/$', 'login_page', name='login'), 
```

应该：

```
url(r'^login/$', 'login_page', name='login'), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:44:13.240

您需要用“^”标记模式的开始。

前任：

```
urlpatterns = patterns('',
    url(r'^myapp/', include('myapp.urls')),
    url(r'^admin/', include(admin.site.urls)),
)

#myapp/urls.py
urlpatterns = patterns('myapp.views',
    url(r'^$', 'index', name='index'),
    url(r'^register/$', 'register', name='register'),
    url(r'^myaccount/$', 'myaccount', name='myaccount'),
    url(r'^login/$', 'login_page', name='login'),
    url(r'^logout/$', 'logout_user', name='logout')
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T04:40:10.363

您需要在您的 url 中指定它应该以您想要在开始时使用`'^'`的字符串开头。

所以你可以更新你的 urls.py 行

```
url(r'myapp/', include('myapp.urls')), 
```

至

```
url(r'^myapp/', include('myapp.urls')), 
```

您可能希望对`myapp.urls`.

# css - 左浮动问题

> ID：15607720
> 
> 赞同：0
> 
> 时间：2013-03-25T04:35:40.500
> 
> 标签：css, layout, css-float

我再次对 float:left 属性有一些问题。我有三个div。我想将“持有人”浮动到第一个 div 的左侧，但它不适用于我的代码。

这是我的代码：HTML

```
<div id="investments">
   <div class="visual_text_holder"><p>co</p><p>re</p></div>

   <div id="holder">
       <h4>SOMETHING</h4>
   </div>

   <div class="visual_text_holder"><p>id</p><p>ea</p></div>

</div> 
```

和 CSS：

```
#investments{
    margin: 0 auto;
    margin-top:40px;
    width: 910px;
}

.visual_text_holder {
    font-family: "Times New Roman";
    font-size:7.5em;
    text-transform:uppercase;
    line-height:60%;
    width:140px;
}
#investments:after {
    content: '';
    display: block;
    visibility: invisible;
    clear: both;
}
#holder {
    width:700px;
    float:left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:05:05.363

无需更改 HTML 代码更改如下 CSS

```
.visual_text_holder {
  font-family: "Times New Roman";
  font-size:7.5em;
  text-transform:uppercase;
  line-height:60%;
  width:140px; float:right;
}
#holder {
  width:615px;
  float:left;
} 
```

FOR MAKE DIV IN QUE WISE LIKE (first somting, second core, third id ea) .visual_text_holder { font-family: "Times New Roman"; 字体大小：7.5em；文本转换：大写；行高：60%；宽度：140px；浮动：对；} #holder { 宽度：615px; 向左飘浮; }

```
<div id="investments">
<div class="visual_text_holder"><p>id</p><p>ea</p></div>
<div class="visual_text_holder"><p>co</p><p>re</p></div>

<div id="holder">
<h4>SOMETHING</h4> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:43:26.503

```
.visual_text_holder { display: inline-block } 
```

根据[https://developer.mozilla.org/en-US/docs/CSS/float](https://developer.mozilla.org/en-US/docs/CSS/float)

> float CSS 属性指定一个元素应该从正常流中取出并放置在其容器的左侧或右侧，文本和内联元素将环绕它。

因此，块元素（默认情况下是 <div>）不会环绕`float`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T04:48:38.037

我希望这能帮到您。

JS 小提琴：http: [//jsfiddle.net/9ZWLP/](http://jsfiddle.net/9ZWLP/)

HTML：

```
<div id="investments">
   <div class="visual_text_holder"><p>co</p><p>re</p></div>

    <div class="holder">
        <h4>SOMETHING</h4>
    </div>

    <div class="clearer" ></div>

    <div class="visual_text_holder"><p>id</p><p>ea</p></div>

</div> 
```

CSS：

```
#investments{
    margin: 0 auto;
    margin-top:40px;
    width: 910px;
}

.visual_text_holder{
    font-family: "Times New Roman";
    font-size:7.5em;
    text-transform:uppercase;
    line-height:60%;
    width:140px;
    float:left;
}

.holder{
    width:700px;
    float:left;
}

.clearer{
    clear:both;
} 
```

# php - 在 Yii 的控制器中创建构造函数方法

> ID：15607722
> 
> 赞同：5
> 
> 时间：2013-03-25T04:36:01.677
> 
> 标签：php, mysql, yii

我刚刚开始学习`Yii`，在那里我创建了一个`PostController`控制器。在这个控制器中，我有一个使用`Sessions`.

所以我创建了一个构造方法，它的代码如下

```
public $session;
public function __construct() {
    $this->session = new CHttpSession;
    $this->session->open();
} 
```

但是在创建此构造函数后，控制器无法正常工作并给出错误。删除此代码后，我的控制器工作正常。我已经在构造函数中编写了这段代码，以便不在`Session`每个方法中初始化`actionCreate`和`actionUpdate`。

所以我的问题是我们如何创建构造函数`Yii`？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T08:11:19.663

您只是忘记调用父构造函数：

```
public function __construct()
{
  .....
  parent::__construct();
} 
```

您可以使用[`beforeAction`](http://www.yiiframework.com/doc/api/1.1/CController#beforeAction-detail)而不是覆盖`__construct`.

并且*Sergey*是对的，默认情况下 Yii 将启动会话（[`autoStart`](http://www.yiiframework.com/doc/api/1.1/CHttpSession#autoStart-detail)），你只需要使用`Yii::app()->session`，例如：

```
Yii::app()->session['var'] = 'value'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-25T23:28:47.260

```
public function __construct()
{
      parent::__construct($this->id, $this->module);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T08:18:27.163

我为此使用了[init()](http://www.yiiframework.com/doc/api/1.1/CController#init-detail)，但[发现](http://www.yiiframework.com/forum/index.php/topic/3884-init-or-contruct/)人们认为**__construct**更好。

# objective-c - NSDictionary 值替换而不是添加到 Plist

> ID：15607725
> 
> 赞同：2
> 
> 时间：2013-03-25T04:36:32.583
> 
> 标签：objective-c, nsarray, plist, nsdictionary

嗨，我尝试将 NSdictionary 中的值（书号、页码、注释）添加到 Plist，但每次新值替换前一个值时？但我需要 plist 中的所有值，我用于将字典添加到 plist 的代码是

```
NSString *bid=@"95";
NSString *pnum=@"12";
userNotes=[[NSMutableDictionary alloc]init];
[userNotes setValue:userNotesTextview.text forKey:@"notes"];
[userNotes setValue:bid forKey:@"bookid"];
[userNotes setValue:pnum forKey:@"pagenumber"];
userNotesView.hidden=YES;
_background.hidden = YES;
userNotesTextview.text=@"";
[self savingMetaData];
  NSMutableArray *notes=[[NSMutableArray alloc]init];
  [notes addObject:userNotes];

  NSMutableDictionary *final=[[NSMutableDictionary alloc]init];
  [final setValue:notes forKey:@"usernotes"];
  [final writeToFile:metaDataPath atomically:YES]; 
```

我的 plist 看起来像

![在此处输入图像描述](../Images/615456dccef57b58794c2d29fcd98762.png)

我怎么解决这个问题

![在此处输入图像描述](../Images/590788de9810addfb1b18f8edd695a36.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T04:43:50.120

从 plist 中获取现有数组，如下所示，但首先确保您已将 plist 复制到 Documents 目录，或者复制到一些可写文件夹，如下所示

```
NSFileManager *fileManager=[NSFileManager defaultManager];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
NSString *docPath=[[paths objectAtIndex:0] stringByAppendingString:@"yourplist.plist"];
BOOL fileExists = [fileManager fileExistsAtPath: docPath];
NSError *error = nil;
if(!fileExists) 
{
    NSString *strSourcePath = [[NSBundle mainBundle] pathForResource:@"yourplist" ofType:@"plist"];

    [fileManager copyItemAtPath:strSourcePath toPath:docPath error:&error];         

}

NSString *path = docPath;
NSMutableDictionary *plistdictionary = [[NSMutableDictionary alloc]initWithContentsOfFile:path];
NSMutableArray *notes=[plistdictionary objectForKey:@"usernotes"];
if(notes==nil){ 
   notes=[[NSMutableArray alloc] init]; 
}
NSString *bid=@"95";
NSString *pnum=@"12";
userNotes=[[NSMutableDictionary alloc]init];
[userNotes setValue:userNotesTextview.text forKey:@"notes"];
[userNotes setValue:bid forKey:@"bookid"];
[userNotes setValue:pnum forKey:@"pagenumber"];
[notes addObject:userNotes]; 
```

然后最后

```
NSMutableDictionary *final=[[NSMutableDictionary alloc]init];
[final setValue:notes forKey:@"usernotes"];
[final writeToFile:docPath atomically:YES]; 
```

注意：您不能在 MainBundle 中编写任何内容，因此最好将您的 plist 复制到 Documents 目录并从那里使用..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:21:40.590

Plist结构看起来像这样

![在此处输入图像描述](../Images/e2dfe4f8f39d615037ba89343f8a19a8.png)

您可以创建一个 UserNote 模型类。

```
#define kBookID @"bookid"
#define kPageNumber @"pageNumber"
#define kNotes @"notes"

@interface UserNote : NSObject

@property (nonatomic, copy) NSString *bookID;
@property (nonatomic, copy) NSString *pageNumber;
@property (nonatomic, copy) NSString *notes;

- (id)initWithDictionary:(NSDictionary *)dictionary;

+ (NSArray *)savedUserNotes;
- (void)save;

@end 
```

初始化

```
- (id)initWithDictionary:(NSDictionary *)dictionary
{
    self = [super init];
    if (self)
    {
        self.bookID = dictionary[kBookID];
        self.pageNumber = dictionary[kPageNumber];
        self.notes = dictionary[kNotes];
    }

    return self;
} 
```

在documents目录中找到plist文件的文件路径。如果 plist 文件不存在，则创建一个新文件并返回路径。

```
+ (NSString *)userNotesDocumentPath
{
    NSString *documentsPath  = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"UserNotes.plist"];

    NSFileManager *fileManger = [NSFileManager defaultManager];
    if (![fileManger fileExistsAtPath:documentsPath])
    {
        NSString *bundleResourcePath = [[NSBundle mainBundle]pathForResource:@"UserNotes" ofType:@"plist"];
        NSArray *userNotes = [NSArray arrayWithContentsOfFile:bundleResourcePath];
        [userNotes writeToFile:documentsPath atomically:YES];
    }

    return documentsPath;

} 
```

从 plist 文件中获取所有保存的用户注释。

```
+ (NSArray *)savedUserNotes
{
    NSString *documentsPath = [self userNotesDocumentPath];
    NSArray *savedNotes = [NSArray arrayWithContentsOfFile:documentsPath];
    NSMutableArray *savedUserNotes = [@[] mutableCopy];
    for (NSDictionary *dict in savedNotes) {
        UserNote *note = [[UserNote alloc]initWithDictionary:dict];
        [savedUserNotes addObject:note];
    }

    return savedUserNotes;

} 
```

将 usenote 保存到 plist

```
- (NSDictionary *)userNoteDictionary
{
    return @{kBookID:self.bookID,kPageNumber:self.pageNumber,kNotes:self.notes};
}

- (void)saveUserNotesToPlist:(NSArray *)userNotes
{
    NSMutableArray *mutableUserNotes = [@[] mutableCopy];
    for (UserNote *note in userNotes) {
        NSDictionary *dict = [note userNoteDictionary];
        [mutableUserNotes addObject:dict];
    }
    NSString *documentsPath  = [UserNote userNotesDocumentPath];
    [mutableUserNotes writeToFile:documentsPath atomically:YES];
}

#pragma mark - Save

- (void)save
{
    NSMutableArray *savedNotes = [[UserNote savedUserNotes] mutableCopy];
    [savedNotes addObject:self];
    [self saveUserNotesToPlist:savedNotes];
} 
```

在用户做笔记的视图控制器中

```
- (IBAction)saveUserNoteButtonPressed:(UIButton *)button
{
    UserNote *note = [UserNote new];

    note.bookID = @"95";
    note.pageNumber = @"12";
    note.notes = self.userNotesTextview.text;

    [note save];
} 
```

[演示源代码](http://dl.dropbox.com/u/35012982/Demo%20Projects/TestPlistWriter.zip)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T04:38:52.903

因为 plist 只能使用唯一键存储值。如果您尝试使用相同的键保存值，它将用新值替换旧值。所以总是用新键保存新值（例如 item0、item1、item3 等）

以下行将分别存储两个带有键 @"usernotes1" 和 @"usernotes2" 的用户笔记

```
[final setValue:notes forKey:@"usernotes1"];
[final setValue:notes forKey:@"usernotes2"]; 
```

# javascript - 为一个控制器拆分 HTML 组件会导致控制器停止工作

> ID：15607728
> 
> 赞同：1
> 
> 时间：2013-03-25T04:37:07.217
> 
> 标签：javascript, angularjs

如果我创建两个 div，都由同一个控制器控制，Angular 的控制器似乎停止更新我的视图。

我已经整理了一个简单的例子来证明这一点。[在 JSFiddle 上](http://jsfiddle.net/VX5LE/16/)查看示例是最简单的，但我也在下面发布代码。

**HTML**

```
<div ng-app='App'>
    <div ng-controller="MyCtrl">
        <form>
            <input type="text" ng-model="search.query"></input>
            <button ng-click="search.submit()">Submit</button>
        </form>
    </div>
    <div ng-controller="SomeOtherCtrl">
        {{sampleText}}
    </div>
    <div ng-controller="MyCtrl">
        <button ng-click="search.reset()">Reset Form</button>
    </div>
</div> 
```

**JS**

```
var app = angular.module('App',[]);

function MyCtrl($scope)
{
    $scope.search = {
        query : 'foobar',
        submit : function() {
            this.query = 'Submitted';
            console.log(this.query);
        },
        reset : function() {
            console.log('resetting');
            this.query = '';
        }
    };
}

function SomeOtherCtrl($scope) {
    $scope.sampleText = 'other controller text';
} 
```

提交按钮工作正常，但是当我单击重置按钮时，我看到`resetting`登录控制台，但我的视图（表单输入）没有更新。

为什么会这样？在我正在进行的当前项目中，我被迫这样做，因为介于两者之间的某些 HTML 属于另一个控制器。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:03:33.840

角度中的控制器定义实际上是一个类/构造函数，而不是一个对象。在 HTML 中引用控制器的每个位置，在编译阶段，angular 都会使用定义的控制器类创建一个新的控制器对象。因此，您可以使用相同的控制器类引用多个范围。

您可能已经听说过 Angular 中的服务，而这正是您需要使用它们来解决它的地方。`search`您正在使用的是一个由两个控制器实例共享的公共对象（请注意，该类是相同的`MyCtrl`，但通过放入两个`ng-controller="MyCtrl"`您要求 Angular 创建两个实例`MyCtrl`）。所以这两个对象可以访问两个不同的范围，当它们被创建时，这两个不同的范围被设置为两个不同的搜索对象。当您单击重置时，会调用其他`search`对象`reset`，这意味着在 first`MyCtrl`的范围内没有任何反应。这就是您的代码无法按预期工作的原因。

现在请注意，角度服务是单例的。因此，如果您在多个地方引用它们，您就可以访问同一个对象。因此，在不同的控制器（实例）中重置仍然会重置同一个对象。

这是一个适用于您的代码的 plunk。

[http://plnkr.co/edit/zynAdS9hg8DUZDnlnYFm?p=preview](http://plnkr.co/edit/zynAdS9hg8DUZDnlnYFm?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:50:07.757

我不知道 angularjs 是如何工作的，但如果你将第二个输入放在`<input type="text" ng-model="search.query"></input>`重置按钮附近，这个输入将被更新。输入应该在同一个 div 控制器内吗？它会帮助你解决你的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-29T13:13:27.993

查看您的示例，您似乎缺少重置按钮的表单标记。从角度来看，如果您可以将一个外部 div 用于控制器 =“MyCtrl”，其中您有一个带有两个按钮的表单 -submit() 和 reset()，并且在外部 div 内放置您的嵌套控制器“SomeOtherCtrl”，那么它应该可以完美地工作.

# extjs - 如何在 Internet Explorer 和 Google chrome 浏览器中调试 extjs 中的应用程序

> ID：15607730
> 
> 赞同：1
> 
> 时间：2013-03-25T04:37:10.513
> 
> 标签：extjs, sencha-touch-2, extjs4.1

谁能告诉如何在 Internet Explorer 和 google chrome 浏览器中调试 extjs 中的应用程序？是否可以使用断点进行调试以检查值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:31:13.150

sencha 提供了一篇很好的文章。检查 Internet Explorer 部分，[http://www.sencha.com/learn/debugging-ext-js-applications](http://www.sencha.com/learn/debugging-ext-js-applications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T20:53:34.260

我被迫在一个可以在 Chrome 和 Firefox 中运行但在 IE8 中经常失败的应用程序中使用 IE8。

如果问题出在框架中，在 IE8 中调试 ExtJS 几乎是不可能的。IE8 的开发者工具在加载 ext-all-dev.js 时挂起

您也无法像在 Chrome 中那样获得堆栈跟踪。

我不得不将 alert() 调用放在可疑行中，整个过程是一场噩梦。

如果你可以避免 IE，那就去做吧。

否则要非常非常耐心...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T04:42:13.213

您可以为您的浏览器使用开发者工具。我不使用 IE，但我一直使用 Chrome 的开发者工具！是的，你可以做断点、检查值等。

# c++ - Lambda 表达式偷偷地捕获 `this`

> ID：15607738
> 
> 赞同：7
> 
> 时间：2013-03-25T04:38:32.660
> 
> 标签：c++, c++11, lambda

假设我有以下内容。

```
struct A
{
    int x;
    std::function<int()> f1() { return [=](){ return x; }; }
    std::function<int()> f2() { return [=](){ return this->x; }; }
    std::function<int()> f3() { return [this](){ return x; }; }
    std::function<int()> f4() { return [this](){ return this->x; }; }
    std::function<int()> f5()
    {
        int temp = x;
        return [=](){ return temp; };
    }
} 
```

现在我有以下代码。

```
auto a = std::make_shared<A>();
a->x = 5;
std::function<int()> f = a.f#();
a.reset();
int x = f(); 
```

其中`f#`指的是任何一个`f1, f2, f3, f4, f5`。

这些函数表现出以下两组之一的行为：

1.  调用 ( `f5`) 时返回 5，或
2.  试图取消引用`nullptr`( `f1, f2, f3, f4`) 时崩溃。

我知道这是因为有些人`this`在 的成员函数中`A`隐式或显式地捕获“”。

**决定行为 1 或 2 的正式规则是什么？**

我花了一段时间处理由类似的东西引起的错误`f1`，认为它会捕获`x`并且从未考虑过它会捕获`this`，所以我认为将其记录在案会很有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T06:15:59.953

没有确定这种行为的正式规则。因为这种行为是*未定义*的。

您的 lambda 正在访问一个不存在的对象。不能直接按值捕获成员变量；你总是抓住他们`this`。这意味着您通过引用捕获它们。一旦对象被删除，任何访问该已删除对象的尝试都会导致未定义的行为。

例外是`f5`，它应该返回一个一致的值，保证。它与原始对象完全断开。

# fluent-nhibernate-mapping - Fluent Nhibernate - 仅从儿童方面进行引用

> ID：15607739
> 
> 赞同：1
> 
> 时间：2013-03-25T04:38:39.557
> 
> 标签：fluent-nhibernate-mapping, many-to-one

我有`Survey`那个`HasMany` `Question`。我想从to 创建一个引用。 问题是每次我想用它的所有孩子创建一个，我需要循环所有并循环所有并设置o每个（否则Nhibernate将为每个创建一个） **我不想拥有调查我是否这样做会解决问题，但会很重且无法使用**`HasMany` `Option`
`Option``Survey`
`new Survey``survey.Questions``survey.Questions.Options``Option``Survey``new Survey``Option`
`IList<Option>`

```
public class SurveyMap : ClassMap<Survey>
    {
        public SurveyMap()
        {
           Id(x => x.Id).GeneratedBy.Identity();
            HasMany(x => x.Questions).KeyColumn("SurveyId").Inverse().AsBag().Not.LazyLoad().Cascade.SaveUpdate();
        }
    }

    public class QuestionMap : ClassMap<Question>
    {
        public QuestionMap()
        {
           Id(x => x.Id).GeneratedBy.Identity();
            HasMany(x => x.Options).KeyColumn("QuestionId").Inverse().AsBag().Cascade.SaveUpdate();
        }
    }

    public class OptionMap : ClassMap<Option>
    {
        public OptionMap()
        {
            Id(x => x.Id).GeneratedBy.Identity();
            References(x => x.Survey).Column("SurveyId").Cascade.All();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:15:24.270

将您的报告关注点与应用程序业务逻辑关注点分开可能会更好。使用您已有的应用程序业务逻辑映射，并为您的报告要求提供不同的数据接口。您可以为此使用 HQL、SQL 或新对象和映射。

# android - 在 gridview 中显示动画 gif

> ID：15607740
> 
> 赞同：3
> 
> 时间：2013-03-25T04:38:41.240
> 
> 标签：android, animation, gridview, animated-gif

我已经编写了代码来显示单个图像的动画。现在我想在 gridview 中显示 gif 图像以显示动画图像。是否可能以及如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:12:40.077

我想它可能会对你有所帮助.. 这是一个 GifWebView 演示.. 请检查它...

***我的布局.xml***

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/toplayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

    </LinearLayout>

</RelativeLayout> 
```

***MyLayout.java 文件***

```
package com.test;

import android.app.Activity;
import android.os.Bundle;
import android.widget.LinearLayout;

public class MainActivity extends Activity
{
    LinearLayout toplayout;
    GifWebView view;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.mylayout);

       toplayout = (LinearLayout)findViewById(R.id.toplayout);

       InputStream stream = null;
       try
       {
          stream = getAssets().open("ppp.gif");          
       } catch (IOException e) {
         e.printStackTrace();
       }

       view = new GifWebView(this, stream);
       toplayout.addView(view);       
    }
} 
```

***GifWebView.java 文件***

```
package com.test;

import android.content.Context;
import java.io.InputStream;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Movie;
import android.os.SystemClock;
import android.view.View;

public class GifWebView extends View {
    private Movie mMovie;
    InputStream mStream;
    long mMoviestart;

    public GifWebView(Context context, InputStream stream) {
        super(context);
        mStream = stream;
        mMovie = Movie.decodeStream(mStream);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(Color.TRANSPARENT);
        super.onDraw(canvas);
        final long now = SystemClock.uptimeMillis();

        if (mMoviestart == 0) {
            mMoviestart = now;
        }
        final int relTime = (int) ((now - mMoviestart) % mMovie.duration());
        mMovie.setTime(relTime);
        mMovie.draw(canvas, 10, 10);
        this.invalidate();
    }
} 
```

将任何 gif 文件放在 Assets 目录中并给出适当的名称。在这个演示中，名称是 ppp.gif。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:34:10.833

我会尝试使用[此视图](https://stackoverflow.com/questions/7777315/showing-gif-in-android)并将其简单地添加到 GridView 自定义单元格布局中。

本质上，布局中的*GifView*应该可以工作。

# php - php代码中的mysql语法错误

> ID：15607744
> 
> 赞同：1
> 
> 时间：2013-03-25T04:39:02.287
> 
> 标签：php, mysql

自从我完成任何数据库工作以来已经有一段时间了，试图重新开始......

错误：

> 更新数据库时出错：您的 SQL 语法有误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“从 FKCust where id ='1','3333','1364186198','1')' 附近使用正确的语法

编码：

```
$sql = "INSERT INTO orders (customerID, purchaseNo, dateCreated, statusID) VALUES (select id from FKCust where id ='$customerId','$purchaseOrder', '$dateEntered','1')"; 
```

如果您需要数据库结构，我也会发布它。只需发表评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T04:41:43.170

我认为应该是

```
$sql = "INSERT INTO orders (customerID, purchaseNo, dateCreated, statusID) 
VALUES ((select id from FKCust where id ='$customerId'),
'$purchaseOrder', '$dateEntered','1')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:41:18.460

```
$sql = "INSERT INTO orders (customerID, purchaseNo, dateCreated, statusID)
        VALUES (select id, '$purchaseOrder', '$dateEntered','1'
                  from FKCust
                 where id = $customerId
               )"; 
```

只是一个简单的语法错误，它发生在我们所有人身上。

**编辑**：我确定您的 customerID 列是 INT，而不是 CHAR，*对*吗？我已经删除了那些引号。他们会破坏你的索引，我*相信*你已经创建了，对吧？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T04:48:52.800

***只需尝试以下内容：***

```
<?php
$selectCust = mysql_query("select `id` from `FKCust` where `id` ='".$customerId."'") or die(mysql_error());
$resultCust = mysql_fetch_array($selectCust);
$getCustID  = $resultCust['id'];
$sql = "INSERT INTO `orders` (`customerID`,`purchaseNo`,`dateCreated`,`statusID`) VALUES ('".$getCustID."','".$purchaseOrder."', '".$dateEntered."','1')";
$query = mysql_query($sql) or die(mysql_error());
?> 
```

我认为这可以帮助您解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T04:57:19.180

虽然我可以看到它已解决，但有趣的是为什么您在*客户*和*订单*表中有不同的客户 ID？*为什么在订单*中使用*FKCust*表而不是简单的外键来进行链接？在我看来，这就是你首先需要各种奇怪处理的原因；否则它只是一个直插入。

 *现在您也不能简单地选择数据（例如客户的订单），因为匹配行会很麻烦。

还是我错过了什么？*

# php - preg_match() 期望参数 2 是字符串，对象在 CakePHP 中给出错误

> ID：15607746
> 
> 赞同：2
> 
> 时间：2013-03-25T04:39:07.300
> 
> 标签：php, validation, email, cakephp

我正在尝试使用 CakeEmail 发送一封电子邮件，但它在`$email->to()`方法上失败了。可以在此图像上看到错误消息：http: [//i47.tinypic.com/240yq86.png](http://i47.tinypic.com/240yq86.png)

基本上，我收到这两个错误：

```
Warning (2): preg_match() expects parameter 2 to be string, object given [CORE/Cake/Utility/Validation.php, line 815]
Warning (4096): Object of class CakeEmail could not be converted to string [CORE/Cake/basics.php, line 566] 
```

这是我的`sendEmail()`方法：

```
function sendEmail($id, $email, $token)
{      
    print_r($email);
    $email = new CakeEmail();
    $email->from('admin@gmail.com');
    $email->to($email);
    $email->subject('Activate your account');     
    $activate_url = 'http://' . env('SERVER_NAME') .'/users/activate/'.$id.'/'.$token;
    $message = "Thank you for signing up. Click on the activation link to activate your account \n";
    return $email->send($message.$activate_url);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T04:53:20.603

你有一些基本的 php 错误：

将函数参数 2 名称更改为`$to`;
改为; `print_r($email)`_ 更改 $email->to($email); $email->to($to);``print_r($to)`
`to`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:46:03.167

编辑：完全错过了其他人发现的明显问题......

所以，我一直在寻找可能扰乱班级配置的*其他问题......*

根据[http://book.cakephp.org/2.0/en/core-utility-libraries/email.html](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html)，`from()`接受一个数组（尽管没有明确说明您*必须*使用数组）。

试试这条线：

`$email->from(array('admin@gmail.com' => 'Admin at gMail'));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T04:59:06.630

请注意，`$email`in 参数被`$email = new CakeEmail()`更改为不同的变量而被覆盖`$to`

```
function sendEmail($id, $to, $token)
{      
    print_r($email);
    $email = new CakeEmail();
    $email->from('admin@gmail.com');
    $email->to($to);
    $email->subject('Activate your account');     
    $activate_url = 'http://' . env('SERVER_NAME') .'/users/activate/'.$id.'/'.$token;
    $message = "Thank you for signing up. Click on the activation link to activate your account \n";
    return $email->send($message.$activate_url);
} 
```

# jquery - jQuery 无法弄清楚删除类 - 添加类

> ID：15607749
> 
> 赞同：0
> 
> 时间：2013-03-25T04:39:34.413
> 
> 标签：jquery, addclass

希望有人能在我的代码中看到错误。

场景：检查数据库以查看 sname 是否存在。如果是，则返回“屏幕名称已被采用”，否则返回“屏幕名称可用”。

结果正在返回，但 removeClass/addClass 未按预期工作。

```
function ChkScrNmAvblty(sname) {

    $.ajax({
        url: 'includes/checkScreenName.asp',
        data: 'sname=' + sname,
        success: function(data) {

            $("#scaResult").html(data);

            if (data == "Screen Name is Already Taken") {
                $('#scaResult').removeClass('grn').addClass('red');
            }
        }
    });
} 
```

# xml - Web 请求（超时）需要多长时间才能获得最佳用户体验？

> ID：15607751
> 
> 赞同：1
> 
> 时间：2013-03-25T04:40:05.957
> 
> 标签：xml, json, sockets, http, request

http(s) 请求需要多长时间才能获得最佳用户体验。这是任何编程语言的普遍问题。这是请求所花费的时间，一旦用户采取了行动，直到它得到响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:53:00.420

没有明确的时间。这在很大程度上取决于应用程序当时正在做什么。例如，我认为用户习惯于处理金融交易比典型页面加载稍慢的事情。它实际上归结为在内容数量（HTML、CSS、javascript、图像等）和响应时间之间找到适当的平衡，这会引导您获得您认为的最佳用户体验。连接分析并专门找出页面加载时间如何影响用户行为也很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:18:39.427

这是一个可用性问题，而不是编程问题。它通常由业务或业务分析师定义。问问他们。

# wordpress - 为什么在静态文件的 URI 之后使用随机参数

> ID：15607758
> 
> 赞同：0
> 
> 时间：2013-03-25T04:40:29.793
> 
> 标签：wordpress, http, uri

我是 Web 开发的新手，并且观察到一些我自己无法弄清楚的事情。

我可以看到许多网站在静态文件的 URI 之后使用随机参数，例如 ,`image-name.jpg?asdhajksdha`等`style.css?ahj123hk`。

随机参数有什么用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T04:41:48.463

可以有几种用途。

一是防止缓存。随机数使缓存服务器（和浏览器）误以为每个请求都是针对新资源的。

另一个是数字实际上是用于跟踪您的行为的标识符。资源甚至可能不是静态文件（服务器可以在提供内容之前重写 url）。“随机”数字与跟踪数据库中的键相关联。许多电子邮件客户端会提示您加载链接图像，以帮助您保护您的隐私免受此类跟踪。

# python - 在 32 位树莓派上运行时长整数上的 python 溢出错误

> ID：15607761
> 
> 赞同：0
> 
> 时间：2013-03-25T04:40:46.087
> 
> 标签：python, python-2.7, python-3.x, raspberry-pi

我有一个脚本，我正在尝试使用我的 RPi。它在 64 位系统上按预期工作，但在 32 位系统上不能正常工作。我明白了

溢出错误：Python int 太大而无法转换为 C long

这是脚本

```
for number in xrange(int("0101010101"), int("9898989898")+1):
    number = `number`.zfill(10)
    prev = ''
    i = 0
    for c in `number`:
            if c in prev:
                    break
            else:
                    i += 1
                    prev = c
            if i>=len(`number`):
                    print number 
```

我可以用 perl 做到这一点，但不知道如何用 python 完成

这是 perl 等价物

```
my $num = "";
for $num ("0101010101" .. "0101989898"){
    if ($num =~ /00|11|22|33|44|55|66|77|88|99/o) {
            ++$num;}
    else {
            print "$num\n";}} 
```

也尝试用 python3 编写它，但我对 3 完全不熟悉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:39:18.327

您可以查看 Python 文档以供参考。

**CPython 实现细节**： xrange() 旨在简单快速。实现可能会施加限制来实现这一点。Python 的 C 实现将所有参数限制为原生 C long（“短”Python 整数），并且还要求元素的数量适合原生 C long。如果需要更大的范围，可以使用 itertools 模块制作替代版本：islice(count(start, step), (stop-start+step-1+2*(step<0))//step)。[http://docs.python.org/2/library/functions.html#xrange](http://docs.python.org/2/library/functions.html#xrange)

# iphone - Unity3d www.progress 在 iOS 中不起作用

> ID：15607762
> 
> 赞同：-1
> 
> 时间：2013-03-25T04:40:53.357
> 
> 标签：iphone, ios, xcode, unity3d

我正在向 Web 服务发布值并从同一个 Web 服务获得响应，我是

在**Unity3d**中使用**WWWForm**。现在我想等到响应没有完全加载。为了那个原因

 **我用过**`yield www;`**，但不能正常工作。之后我发现**`www.progress`**并

它在我的**Unity3d**播放器中工作，但在 iPhone 或 iPad 中不工作。

**EDIT1：我正在使用 Javascript。**

EDIT2：我的代码：

```
function getSettingsValues(){

    var strResponse;

    userID = PlayerPrefs.GetString("userid");
    arrLevels.Clear();

    print("First");
    var url = "http://WEBSERVICE";

    var form = new WWWForm();

    form.AddField( "userid",userID);

    var www = new WWW( url, form );

    yield www;

    if (www.error == null)
    {   
        strResponse = www.text;
    }

    print("Response "+strResponse); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:35:51.413

您的代码应如下所示：

```
function PostMyForm()
{
    var form:WWWForm = new WWWForm();
    // todo: add form variables
    var www:WWW = new WWW(url, form);
    yield www;
    // todo: parse response
} 
```

然后用 StartCorotuine 调用它。

```
StartCoroutine(PostMyForm()); 
```

或者，如果您已经在协同程序中：

```
yield StartCoroutine(PostMyForm()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:39:19.440

```
while (!www.isDone)
{
    yield return www;
} 
```

你可以试试这个代码而不是直接返回，进度是下载一些资产，当你尝试访问网络服务时它只返回 0 或 1。**

# c++ - (C++) 全局链接库

> ID：15607764
> 
> 赞同：0
> 
> 时间：2013-03-25T04:40:59.277
> 
> 标签：c++, visual-studio-2010

不必费力地为我启动的每个新项目链接相关目录的项目选项，有什么方法可以“全局”链接 Visual Studio Express 2010 中的库，这样我就可以启动一个新的空项目并调用什么时候需要头文件？

（我说的库是 SDL 和 libtcod。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T20:16:21.513

你绝对可以，而且非常方便。我最近详细描述了我的一个项目的构建设置，作为对[这个问题](https://stackoverflow.com/questions/15373465/how-do-you-organise-open-source-visual-studio-projects-with-open-source-dependen/15441543#15441543)的回答。它依赖于[Visual Studio 属性文件](http://msdn.microsoft.com/en-us/library/669zx6zc(v=vs.100).aspx)（此链接类似于 WhozCraig 的评论，但更新时间更长，范围更广），它几乎可以包含项目文件可以包含的任何内容，并且可以包含在项目文件中。

简而言之，所有依赖项、常规设置和版本信息都由属性文件提供。然后，我会覆盖命令行上的一些设置以进行自动构建。设置需要一些时间，但效果很好。

为通用设置、构建配置和依赖路径设置属性文件很好。将所有路径拆分为一个单独的、很少更新的属性文件也非常适合与其他人共享代码。对于属性文件的特定部分（基于构建配置、项目和各种其他设置），存在相当复杂/复杂的字符串比较和条件要求的机制。您还可以声明变量，这些变量稍后可能在其他键中使用（使用 VS 的`$(var)`语法）或作为预处理器定义传递到构建本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:48:37.480

您可以将库头文件 (.h) 放在 Visual Studio 的 \include 文件夹中，将库文件 (.lib) 放在 \lib 文件夹中。这样，您可以直接从 Project Properties > Link 调用头文件 (.h) 和链接库。无论如何，自 VS2010 以来，Visual Studio 已经删除了全局设置项目属性的选项。所以你不能再这样做了（除非 MS 再次添加它）。

# android - 如何在android中的twitter上发送图像

> ID：15607765
> 
> 赞同：0
> 
> 时间：2013-03-25T04:41:01.233
> 
> 标签：android, image, twitter

我是 android 的新手，我尝试在 twitter 中发送图像，我使用它但无济于事[http://www.londatiga.net/it/how-to-send-image-to-twitpic-from-android/](http://www.londatiga.net/it/how-to-send-image-to-twitpic-from-android/)和我也使用这个[Android Intent for Twitter应用程序](https://stackoverflow.com/questions/2077008/android-intent-for-twitter-application/9151983?noredirect=1#comment22129355_9151983)没有成功可以任何朋友与我分享..代码请帮助我的朋友

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:44:51.200

你可以为 android 使用 twitter4j 库

[http://twitter4j.org/en/](http://twitter4j.org/en/)

它易于使用

```
StatusUpdate status = new StatusUpdate(message);
    status.setMedia(file); // image location
    twitter.updateStatus(status); 
```

# c# - 强制 HttpWebRequest 使用 HTTP 1.0 并在 PCL 中为 Windows 8 设置 UserAgent

> ID：15607767
> 
> 赞同：2
> 
> 时间：2013-03-25T04:41:12.620
> 
> 标签：c#, windows-8, windows-phone, mvvm-light, portable-class-library

我在我的 PCL 中创建了一个类来获取所需的 Session-Id 和一个用于登录网络服务器的密钥。（响应是 XML，在运行登录的第二种方法中解析）我无法控制 WebServer，所以我需要在客户端解决我的问题。

这是我的任务方法：

```
public static async Task<string> SessionId()
{
    HttpWebRequest SessiondIdRequest = (HttpWebRequest)WebRequest.Create(Constants.SessionIdUrl);

    SessiondIdRequest.Method = "POST";
    SessiondIdRequest.Accept = "application/xml";
    SessiondIdRequest.Headers[HttpRequestHeader.AcceptLanguage] = "de-de,de;q=0.8,en-us;q=0.5,en;q=0.3";
    SessiondIdRequest.ContentType = "application/x-www-form-urlencoded ";

    string appIDviaPOST = "{Here is a String}";
    byte[] byteArray = Encoding.UTF8.GetBytes(appIDviaPOST);

    using (var SessionIdRequestStream = await Task<Stream>.Factory.FromAsync
        (SessiondIdRequest.BeginGetRequestStream, SessiondIdRequest.EndGetRequestStream, SessiondIdRequest))
    {
        await SessionIdRequestStream.WriteAsync(byteArray, 0, byteArray.Length);
    }

   WebResponse SessionIdRequestResponse = await Task<WebResponse>.Factory.FromAsync
       (SessiondIdRequest.BeginGetResponse, SessiondIdRequest.EndGetResponse, SessiondIdRequest);
   var SessionIdRequestResponseStream = SessionIdRequestResponse.GetResponseStream();
    var sr = new StreamReader(SessionIdRequestResponseStream);
    string SessionIdResult = await sr.ReadToEndAsync();

    return SessionIdResult;
} 
```

该任务在 WP7 和 WP8 上运行良好。当我在我的应用程序的 Windows 8 部分中使用此方法时，我得到了完全不同的结果。

我使用 Fiddler 来找出两者之间的差异，我看到的最明显的事情是 WP7&8 使用 HTTP 1.0 并发送 UserAgent，而 Win8 使用 HTTP 1.1 并且不发送 UserAgent。

在 PCL 中，HttpWebRequest 不包含 UserAgent 和 ProtocolVersion 的属性，因此我无法告诉方法强制它（因为它只是一个子集）。

有什么办法可以解决这个问题（除了将整个方法复制到我的 Win8 项目中，我可以在其中设置这些属性）。

我对 MVVM 和 PCL 很陌生，所以请原谅这对你来说是一个愚蠢的问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-09T22:09:39.410

我通过切换到新的**HttpClient** (PCL) 库并在那里设置 Version 属性解决了一个非常相似的问题。在[NuGet 上搜索“ *Microsoft HTTP 客户端库*”](https://www.nuget.org/packages/Microsoft.Net.Http)（截至今天为测试版，但运行良好）。

我仍然不明白为什么使用 1.0 总是对我有用，而在使用 1.1 时只是偶尔（Win7 和 Win8）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T14:38:19.757

信不信由你，使用 PCL 时无法更改 UserAgent 标头。

阅读此线程上的评论：

> Microsoft 于 2013 年 2 月 25 日下午 4:05 发布
> 
> [遗憾的是，可移植库的设计一直只支持全局可用的属性——并且不能在所有平台上设置用户代理（例如，对于 SilverLight）](https://connect.microsoft.com/VisualStudio/feedback/details/770104/cannot-set-useragent-of-a-httpwebrequest-in-portable-class-and-winrt-libraries)。

不幸的是，大多数[受限制的标头](https://stackoverflow.com/a/4752359/62921)不是 PCL，因此在大多数平台上都无法更改。

[正如我在这个线程上看到](http://social.msdn.microsoft.com/Forums/vstudio/en-US/7440fc9d-3490-4823-ac93-73706b535c6a/portable-class-library-and-httpwebrequestuseragent?forum=netfxbcl)的，更改这些受限标头的唯一方法是使用反射。

```
var httpRequest = (HttpWebRequest) WebRequest.Create(uri);

var userAgent = httpRequest.GetType().GetProperty("UserAgent");
if(null != userAgent) 
{
    userAgent.SetValue(httpRequest, "Your value", null);
} 
```

尽管如此，**这远非理想**，因为即使它可能在某些平台上工作，在其他一些平台上，您也会收到类似于此的错误：

> System.InvalidOperationException：API System.Net.HttpWebRequest.set_UserAgent(System.String)' 不能在当前平台上使用。（见这篇文章）

[如果您的项目与支持的平台匹配， ThumbGen 的答案](https://stackoverflow.com/a/17014659/62921)可能是另一种选择，但我还没有尝试过。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T05:33:26.657

如果找不到 User-Agent 属性，可以尝试设置 user-agent 标头。

```
SessiondIdRequest.Headers["User-Agent"] = @"Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)"; 
```

您也可以尝试构建请求标头，而不是使用提供的属性。

> ```
> Key              Value
> Request          POST http://localhost/index.aspx HTTP/1.0
> Content-Length  *length* 
> ```

# java - 如何更改具有特定列值的 JTable 整行的颜色

> ID：15607779
> 
> 赞同：2
> 
> 时间：2013-03-25T04:42:11.103
> 
> 标签：java, swing, jtable, tablecellrenderer

我有一个从值数组填充的 Jtable。我的代码是这样的：

```
 private static final String[] columnNames = {"Line Number", "Error","Fix Proposed","Percentage (%)"};
  static DefaultTableModel model = new DefaultTableModel(null,columnNames);

  public static void DisplayMyJList(List<CaptureErrors> x,String extension,
        ArrayList<Integer> l,ArrayList<Integer> p,
        ArrayList<String> e,ArrayList<String> s) throws IOException {//Method to Dynamic get values to be populated in Jtable.

    String theExtension = extension;
    if(FILE_EXTENSION.equals("java")) {
        for(CaptureErrors ex: x) {

            Vector row = new Vector();
            row.add(ex.getLinenumber());
            row.add(ex.getMyfounderror());
            row.add(ex.getMycorrection());
            row.add(ex.getMyPercentage()+"%");

            model.addRow( row );

            //model.setRowColour(1, Color.YELLOW);
        }
    }

table = new JTable(model);
    table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);    
    table.setFillsViewportHeight(true);
    table.setShowGrid(true);
    table.setShowVerticalLines(true);
    table.setGridColor(new Color(0,128,0));
    JTableHeader header = table.getTableHeader();
    table.setBackground(new Color(255,228,225));
    table.setEnabled(true);
    header.setFont(new Font("Dialog", Font.CENTER_BASELINE, 12));
    header.setBackground(Color.black);
    header.setForeground(Color.yellow);
    JScrollPane pane4 = new JScrollPane(table); 
```

我可以通过使用 JButton 从值数组中填充 Jtable。**我想要一个条件，如果列“百分比”，获取该列中的所有值>30，它将突出显示为 color.red 的行。**

我不想使用 TableCellRendererComponent 。我希望在单击 Jbutton 时执行此操作。

实际的 Jtable 如下所示： ![在此处输入图像描述](../Images/106f2d4c069bf6bff9fa028cdab8dbc8.png)

**然后根据我想要得到的，前两行应该用红色突出显示。任何帮助表示赞赏。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T04:57:08.810

有关无需创建自定义渲染器的解决方案，请参阅[表行渲染中的方法。](http://tips4java.wordpress.com/2010/01/24/table-row-rendering/)

您可能还想查看[Table Format Renderers](http://tips4java.wordpress.com/2008/10/11/table-format-renderers/)，以便轻松设置百分比列的格式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T04:58:54.030

渲染 API 的问题之一是难以提供复合渲染器。有很多方法可以做，不要误会我的意思，但如果能内置它会很好...... [结束咆哮]......

基本思想是您要设置一系列从基础渲染器扩展而来的渲染器，其中包含确定在所需条件下应该做什么所需的逻辑。

```
public class FilterRenderer extends DefaultTableCellRenderer {
    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column); 
        Double percent = (Double) table.getValueAt(row, 3);
        // You'll need some way to supply the filter value, may via a centralised 
        // manager of some kind.
        if (percent > 0.3 && !isSelected) {
            setOpaque(true);
            setBackground(Color.RED);
        } else {
            setOpaque(false);
        }
        return this;
    }
}

public class OtherCellRenderer extends FilterRenderer {
    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column); 
        // Apply any special renderer requirements, like translating an object value to String
        return this;
    }
} 
```

您需要为每列自定义渲染器（从您的示例中为 4）并将每个渲染器应用于表格列

```
TableColumnModel model = table.getColumnModel();
model.getColumn(0).setCellRenderer(new LineNumberRenderer());
model.getColumn(1).setCellRenderer(new ErrorRenederer());
model.getColumn(2).setCellRenderer(new FixProposedRenderer());
model.getColumn(3).setCellRenderer(new Percentage()); 
```

`JXTable`或者您可以只使用内置支持行荧光笔的SwingLabs

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-25T04:57:18.013

您可以创建自定义单元格渲染器。在其实现中，检查给定行的百分比值是否 > 30，然后突出显示该单元格。

例如：

```
class SomeRenderer extends DefaultTableCellRenderer {
    public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus, int row,
            int column) {

        Component c = super.getTableCellRendererComponent(table,
                value, isSelected, hasFocus, row, column);

        if (isHighlightingEnabled){
            Integer percentage = (Integer) table.getValueAt(row, 3);
            if (percentage > 30)
                c.setBackground(Color.RED);
        }
        return c;
    }
} 
```

如果需要，您可以在操作时启用/禁用此呈现逻辑。

有关更多详细信息，请参阅[使用自定义渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)。

# facebook - Facebook 发送对话框不起作用

> ID：15607787
> 
> 赞同：0
> 
> 时间：2013-03-25T04:43:14.930
> 
> 标签：facebook, facebook-javascript-sdk

我需要 facebook 发送对话框功能的帮助，发送对话框不显示。我没有收到错误，但没有显示发送对话框。
下面的代码有什么问题？

```
FB.login(function(response) {
    if (response.authResponse) {
        sendDialog();
    }
}

var sendDialog = function()  {
    FB.ui({
        method: 'feed',
        display: 'iframe',
        name: 'sample',
        link: 'https://www.sample.com/'
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:09:11.000

您是否在身体标签中使用了以下内容？

```
<script src="http://connect.facebook.net/en_US/all.js"></script>
<div id="fb-root"></div>
<script>
  // assume we are already logged in
  FB.init({appId: 'xxxxxxxx', xfbml: true, cookie: true});
 FB.ui({
      method: 'send',
      name: 'People Argue Just to Win',
      link: 'url',
      });
</script> 
```

注意：使用`method: 'send',`

有关详细信息，请参阅：[https ://developers.facebook.com/docs/reference/dialogs/send/](https://developers.facebook.com/docs/reference/dialogs/send/)

# csv - 来自csv的高图表不在刷新页面上绘制图表

> ID：15607788
> 
> 赞同：0
> 
> 时间：2013-03-25T04:43:16.250
> 
> 标签：csv, highcharts, refresh

我已经创建了一个`highchart`我从 csv 文件中获取的数据。图表运行良好并且绘图很好。但我的问题是当页面刷新时它没有从 csv 文件中获取最新值。它仍然显示旧图表。当我关闭浏览器并重新打开图表工作正常。请帮助我如何使用来自 csv 的更新值重置/重绘下面是我的代码。这个问题发生在 IE 中而不是 Firefox 中。如果我右键单击显示的图表并导出到 excel，那么它会显示更新的值，但不会绘制具有更新值的图表。

```
 <html> 
  <head>

  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <meta http-equiv="Cache-Control" content="no-store" /> 
   <LINK  REL="StyleSheet" HREF="../style/default.css" TYPE="text/css"
 MEDIA="screen">        
  <script type="text/javascript" src="../js/jquery.min.js"></script>        
  <script type="text/javascript"  src="../js/highcharts.js"></script>

    <script type="text/javascript">
    var chart;
    $(document).ready(function() {      
                 cache:false
                 var options="";
         options = {
            chart: {
                renderTo: 'container',
                defaultSeriesType: 'column'
            },
            title: {
                text: 'Incident Status'
            },
            xAxis: {
                categories: []
            },
            yAxis:

            {
             allowDecimals:false, tickInterval:15,
                title: {
                    text: 'Issue Count'
                }
            },
            series: []          
          };

        /*
         Load the data from the CSV file. This is the contents of the file:

            Apples,Pears,Oranges,Bananas,Plums
            John,8,4,6,5
            Jane,3,4,2,3
            Joe,86,76,79,77
            Janet,3,16,13,15

         */             $.get('../data/incident_status.txt', function(data) {
            // Split the lines
            var lines = data.split(';');
            $.each(lines, function(lineNo, line) {
                var items = line.split(',');

                // header line containes categories
                if (lineNo == 0) {
                    $.each(items, function(itemNo, item) {
                        if (itemNo > 0) options.xAxis.categories.push(item);
                    });
                }

                // the rest of the lines contain data with their name in the first position
                else {
                    var series;

                    series= {
                        data: [],
                        pointWidth: 28

                    };
                    $.each(items, function(itemNo, item) {
                        if (itemNo == 0) {
                            series.name = item;
                        } else {

                            series.data.push(parseFloat(item)); 

                        }
                    });
                options.series.push(series);
                }
            });

            chart = new Highcharts.Chart(options);
            chart.destroy();

                        chart = new Highcharts.Chart(options);          
       });

    });         </script>

    <body>
                        <div id="wrapper">
                            <div  class="container">

                        <div id="banner" >
                            <div class="img-border"> <img src="../images/logo.jpg" width="1120" height="111px" alt="" /> </div>
                        </div>

                        <div id="container" style="width: 100%; height: 400px; margin: 0 auto"></div>

                        <?php include('../control/incidentstatus_gen.php');?>

                            </div>

                        </div>

<body> </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:03:09.647

看起来 $.gt 正在从浏览器缓存中获取文件。解决方法是，通过添加可变参数使请求唯一。jQuery可以帮助你

```
$.ajaxSetup({
    // Disable caching of AJAX responses
    cache: false
}); 
```

或者您可以通过添加日期时间参数来自己完成，以使请求唯一。

```
$.get(filename,{ "_": $.now() }, function(data){
    ...
}); 
```

# sql-server - 如果存在表和约束，我怎样才能只删除它们？

> ID：15607790
> 
> 赞同：1
> 
> 时间：2013-03-25T04:43:35.047
> 
> 标签：sql-server

我有以下脚本：

```
 ALTER TABLE [dbo].[TestAccount] DROP CONSTRAINT [TestAccount_Application];
        DROP TABLE [dbo].[TestAccount]; 
```

但是，如果约束不存在，则脚本将失败。检查是否存在然后仅删除约束和表（如果存在）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:26:37.720

你不是说那是什么样的约束 - 所以我必须猜测......

您可以使用 SQL Server 系统目录视图在删除对象之前检查对象是否存在 - 例如：

```
IF EXISTS (SELECT * FROM sys.default_constraint WHERE Name = 'TestAccount_Application')
    ALTER TABLE [dbo].[TestAccount] 
    DROP CONSTRAINT [TestAccount_Application];

IF EXISTS (SELECT * FROM sys.tables WHERE Name = 'TestAccount')
    DROP TABLE [dbo].[TestAccount]; 
```

正如我所说 - 根据什么样的约束，您将不得不检查其他系统目录视图，例如`sys.check_constraints`或`sys.foreign_keys`代替。

[您可以在MSDN SQL Server 联机丛书](http://msdn.microsoft.com/en-us/library/ms174365.aspx)中阅读有关系统目录视图的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:50:15.570

尝试使用 count 来查找约束：

```
 select CONSTRAINT_SCHEMA, CONSTRAINT_NAME, TABLE_SCHEMA, TABLE_NAME
  from INFORMATION_SCHEMA.TABLE_CONSTRAINTS
  where TABLE_NAME = 'TableName'
  order by CONSTRAINT_TYPE asc -- FOREIGN KEY, then PRIMARY KEY 
```

然后你可以删除约束和表。

# debugging - CUDA 中的第一次机会异常？

> ID：15607797
> 
> 赞同：1
> 
> 时间：2013-03-25T04:44:28.257
> 
> 标签：debugging, exception, cuda, nvidia

当我在 Visual Studio (2010) 中以调试模式编译和执行代码时，我的代码从 MS 调试器中获得 2 或 3 个第一次机会异常，但是，CUDA 调试器没有发现代码中的错误。

到目前为止，我没有注意到构建程序返回的结果有任何异常，我是否需要担心这些报告的异常（我在那里得到 3 个第一次机会异常）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T14:55:59.027

您所做的观察与在 CUDA 库中正确捕获和处理的异常有关。在某些情况下，这是 CUDA GPU 操作的正常部分。正如您所观察到的，您的应用程序没有返回任何 API 错误并且可以正常运行。如果您不在可以报告此问题的 VS 环境中，则根本不会观察到这一点。

这被认为是 CUDA 下的正常行为。我相信在 CUDA 5.5 中有一些消除它的尝试。您可能希望尝试这样做，尽管这两种方式都不被视为问题。

# android - R 无法解析为变量

> ID：15607804
> 
> 赞同：1
> 
> 时间：2013-03-25T04:45:16.247
> 
> 标签：android, actionbarsherlock, actionbarsherlock-map

我已经在我的项目中实现了 actionbarsherlock，在实现之后，我的项目充满了错误，它是“R 无法解析为变量”。我已经尝试了很多来解决这个问题，但我无法得到解决方案。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:47:51.160

> 如果您的代码包含错误，则不会生成 R.java，如果错误与 R.java 有关，则只需清理项目一次，然后再次构建。如果错误未解决，请检查您可能错误地导入了 android.R.java 的导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:16:24.307

第一个选项是制作项目`clean`和`Rebuild`您的项目，或者如果有任何图像 丢失或任何其他不允许的选项可能可以检查，或者在 xml 布局中检查所有文件是否正确定义，并且`name`由于这个原因可能文件没有消除`drawable``Uppercase``any xml error``R`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:23:46.327

如果您有“import android.R”，请从导入部分删除该行

# jquery - 根据移动版网页的宽度大小调整菜单徽标的大小

> ID：15607811
> 
> 赞同：0
> 
> 时间：2013-03-25T04:45:59.260
> 
> 标签：jquery, html, css, mobile

我有一个菜单布局，如：

```
<body>
<header id="wrapper">
  <!-- start header -->
  <div class="container clearfix">
    <h1 id="logo" class="alignleft"> <a href="index.html">index.html</a> </h1>
    <nav class="alignright">
      <ul id="nav">

        <li><a href="#test">111111</a></li>

        <li><a href="#">22222</a></li>
        <li><a href="#">33333</a></li>
        <li><a href="contact.html">Contact</a></li>

      </ul>
    </nav>
    <div class="clear"></div>
  </div>
</header>

    <div class="section ancor">
  <div class="first-heading">
    <div class="clearfix">
      </div>   
      </div>   
        </div>   

</body> 
```

我想为移动版调整大小为 450x159 的徽标图像

所以我尝试了：

```
$(document).ready(function() {
     $width = $('#logo').width();
     $('#logo img').css({
        'max-width' : $width , 'height' : 'auto'
          });
     }); 
```

但它不起作用，也许我错过了一些我试图通过 [http://www.mobilephoneemulator.com/](http://www.mobilephoneemulator.com/)查看结果的东西，但图像仍然很大并且让事情变得讨厌。

你能帮我解决调整大小的问题吗？ [这是一个小提琴](http://jsfiddle.net/MBYYm/5/)

还是我必须用几个来解决它：

```
@media only screen and (max-width: XXXpx) {

} 
```

如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:33:20.353

您不需要 javascript 来执行此操作。您需要将徽标作为附加到 div 的背景图像加载。根据活动的视口大小，您可以加载不同的背景图像。

```
<div id="logo"></div>

/* default styles */
#logo {
 background: url(logo.png) 0 0 no-repeat;
 display: block;
 height: 50px;
 width: 100px;
}

/* mobile styles */
@media only screen and (max-width: XXXpx) {

 #logo {
  background: url(logo-small.png) 0 0 no-repeat;
  height: 25px;
  width: 50px;
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:56:49.597

您的标记中没有图像，因此`$('#logo img')`什么也找不到。您使用 CSS 背景，并且无法从 CSS 更改背景图像的大小（至少我不知道该怎么做）。

一种选择是为不同的分辨率使用不同的图像文件并利用@media 查询。

另一种选择是使用实际`<img>`标签并在`window.resize`. 我宁愿使用@media 查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:08:29.780

这是我用于所有移动网站的内容：

```
img
{
    max-width: 100%;
    max-height: 100%;
} 
```

那应该行得通。

# assembly - 装配程序问题

> ID：15607814
> 
> 赞同：0
> 
> 时间：2013-03-25T04:46:13.253
> 
> 标签：assembly, recursion, calculator

我试图在汇编中编写一个程序，该程序将充当使用递归循环的复利计数器。我能够让程序使用设定的本金和设定利率，它迭代了 10 次，每次迭代后显示余额。现在我正在尝试**更改它，**以便它要求用户提供起始本金、利率和目标本金。然后程序需要迭代直到满足目标主体。

到目前为止，这是我的非工作代码。我想我弄乱了我正在使用的寄存器。Iv 尝试将在 beq 行上使用的这个寄存器更改为 $a2 和 $a0 但这也不起作用。有什么建议么？Idk 如果我关闭或离开。我很难跟踪寄存器 =/

```
promptFirst:        .asciiz "Enter Your Starting Balance: \n"
promptSecond:       .asciiz "Enter the Interst Rate: \n"
promptThird:        .asciiz "Enter Your Target Balance \n"

promptNow:          .asciiz "\nYour Balance After A Iteration:\n"
.text
.globl main

main:   

     # Prints the first prompt  
     li $v0, 4               # syscall number 4 will print string whose address is in $a0       
     la $a0, promptFirst     # "load address" of the string
     syscall                 # actually print the string   

     # Reads in the first operand 
     li $v0, 5               # syscall number 5 will read an int
     syscall                 # actually read the int
     move $s0, $v0           # save result in $s0 for later

     # Prints the second prompt
     li $v0, 4               # syscall number 4 will print string whose address is in $a0   
     la $a0, promptSecond    # "load address" of the string
     syscall                 # actually print the string    

    # Reads in the second operand 
     li $v0, 5               # syscall number 5 will read an int
     syscall                 # actually read the int
     move $s1, $v0           # save result in $s1 for later

    # Prints the third prompt
     li $v0, 4               # syscall number 4 will print string whose address is in $a0   
     la $a0, promptThird    # "load address" of the string
     syscall                 # actually print the string    

    # Reads in the third operand 
     li $v0, 5               # syscall number 5 will read an int
     syscall                 # actually read the int
     move $s2, $v0           # save result in $s2 for later

jal LOOP

ENDLOOP:
j EXIT

LOOP:

    la  $a0, $s0    # load the address of the principal
    la  $a1, $s1    # load the address of the interest
    la  $a2, $s2    # load the address of the goal principal

    lwc1  $f2, ($a0)        # load the principal
    lwc1  $f4, ($a1)        # load the interest rate    
    lwc1  $f6  ($a2)

    mul.s $f12, $f4, $f2    # calculate the balance
    swc1  $f12, ($a0)

    li $v0, 4               # syscall number 4 will print      string whose address is in $a0   
    la $a0, promptNow       # "load address" of the string
    syscall                 # actually print the string
    li  $v0, 2              # system call #2    
    syscall

    addi $sp,$sp,-4     # push the current return address
    sw   $ra,($sp)      
    beq  $f12, $f6, LOOPRET

    beq $f12, $f6, ENDLOOP

    jal LOOP

LOOPRET:

    lw   $ra,($sp)      # pop the saved return address
    addi $sp,$sp,4      
    jr   $ra

EXIT:    
jr $ra 
```

任何建议都会很好。我需要做的问题还有很多。但我需要先完成这部分。我觉得我的大脑已经筋疲力尽了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:12:11.010

```
la  $a0, $s0    # load the address of the principal 
```

这甚至可以编译吗？的目的`la`是[L]加载标签的[A]地址。您不能获取寄存器的地址。

```
lwc1  $f2, ($a0)        # load the principal 
```

将不正确的值放在`$a0`一边，`lwc1`不会执行任何类型的整数到浮点数的转换。因此，您不会通过这样做获得适当的浮动。

你可能应该做的是废弃`la`/`lwc1`指令，而是使用类似的东西：

```
mtc1 $s0,$f2     # move $s0 to floating point register $f2
cvt.s.w $f2,$f2  # convert the integer in $f2 to a float
# ..similarly for the rest of your values 
```

# android - 带有where子句的sqlite在android中不起作用

> ID：15607816
> 
> 赞同：-1
> 
> 时间：2013-03-25T04:46:30.660
> 
> 标签：android, sqlite, where

```
Log.e("Thinhdt1", qb.buildQuery(new String[] { "sum(money)" }, 
             "category = ?", new String[] {category}, null, null, null, null));

     Cursor mCursor = mDb.query(
         "Exchange",
         new String[] { "sum(money)" },
         "category = ?" , 
         new String[] {category},
         null,
         null,
         null
         ); 
```

登录 logcat() : SELECT sum(money) FROM Exchange WHERE (category = ?)

请找到错误帮助我。谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:50:05.797

尝试

```
Cursor mCursor = mDb.query(
     "Exchange",
     new String[] { "sum(money) as sum" },
     "category = ?" , 
     new String[] {category},
     null,
     null,
     null
     ); 
```

# r - 如何获取具有相同名称的列表元素？

> ID：15607818
> 
> 赞同：2
> 
> 时间：2013-03-25T04:46:51.287
> 
> 标签：r

我想创建一个名称可能重复的对象列表。例如：

```
l <- list("a"=1:4, "a"=2:3, "b"=1) 
```

现在我想获取名称为“a”的 l 元素（在本例中为 l[1] 和 l[2]）。有什么简洁的方法可以代替遍历名称（l）吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T04:49:45.653

您可以为此使用基本子集：

```
> l[names(l) == "a"]
$a
[1] 1 2 3 4

$a
[1] 2 3 
```

* * *

*（顺便说一句，`l`它是一个时髦的角色，可以单独与脚本一起使用，因为它很容易被误解为`1`）。*

# ios - 手动模态segue不起作用，View Controller不在窗口层次结构中？

> ID：15607821
> 
> 赞同：10
> 
> 时间：2013-03-25T04:47:17.407
> 
> 标签：ios, ios5, ios6, uistoryboard, uistoryboardsegue

我已经在网络和 Stack Overflow 上搜索了几个小时，但我无法解决这个问题。这里希望你们都看到我的错误，因为我找不到它。

我刚开始有一个简单的基于故事板的应用程序。初始 ViewController 是 UITabBarController 的一个实例，其中包含模板中的两个虚拟 ViewController。启动时，我需要检查设备是否登录到外部服务。如果不是，我将显示一个允许用户进行身份验证的模式 ViewController，如果设备通过了身份验证，那么我将只显示 FirstViewController。

以下步骤是我自创建项目以来所做的一切：

1.  在 Storyboard 上创建 AuthenticateViewController 场景
2.  为AuthenticateViewController创建代码文件，并分配给对应的场景
3.  为 UITabBarController 子类创建代码文件，并将初始 UITabBarController 场景关联到该新子类
4.  在情节提要上创建一个从 UITabBarController 场景到 AuthenticateViewController 场景的新转场
5.  `viewDidLoad`从UITabBarController 子类中手动调用 segue

当我运行应用程序时，模态序列没有触发，UITabBarController 的第一个 ViewController 显示出来，我在 XCode 中得到以下输出：

```
Warning: Attempt to present <AuthenticateViewController: 0x83c0c10> on <EPTabBarController: 0x83be600> whose view is not in the window hierarchy! 
```

下面的相关代码，其实是我目前唯一添加的代码。请让我知道屏幕截图或其他信息是否有用。在此先感谢您的帮助。

EPTabBarController，UITabBarController 的子类：

```
#import "EPTabBarController.h"
#import "AuthenticateViewController.h"

@interface EPTabBarController ()

@end

@implementation EPTabBarController

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self performSegueWithIdentifier:@"authenticationSegue" sender:self];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T04:56:16.293

问题在里面

```
- (void)viewDidLoad
{
    [super viewDidLoad];    
    [self performSegueWithIdentifier:@"authenticationSegue" sender:self];
} 
```

`AuthenticateViewController`当您的当前视图（`EPTabBarController`）尚未加载到窗口层次结构中时，您正试图呈现另一个视图（ ）。

所以首先让你`EPTabBarController`加载到窗口层次结构中，然后呈现`AuthenticateViewController`.

试试这个

```
- (void)viewDidLoad 
{
    [super viewDidLoad];        
    [self performSelector:@selector(loadAuthenticateViewController) 
               withObject:nil 
               afterDelay:1.0];
}

-(void)loadAuthenticateViewController 
{
    [self performSegueWithIdentifier:@"authenticationSegue" sender:self];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-10T07:51:28.210

在 viewDidAppear 中简单地调用您的代码怎么样？

```
- (void)viewDidAppear
{
    [super viewDidAppear];    
    [self performSegueWithIdentifier:@"authenticationSegue" sender:self];
} 
```

但是，我仍然对这些解决方案不满意，因为原始视图仍然显示了几分之一秒。

关于如何在不首先显示原始视图的情况下显示新模式的任何想法？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-06T10:35:05.893

当您真的想要控制时，请使用以下内容：

```
@implementation UeInitialisationViewController
BOOL didLoad;
BOOL wantPush;

- (id)init {
    self = [super init];
    if (self) { didLoad = NO; wantPush = NO; }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    didLoad = YES;
    if (wantPush == YES)
        [self performSelector:@selector(pushToMainView) 
                   withObject:nil afterDelay:0.0001];
}

- (void)pushToMainView {
    if (didLoad == YES)
        [self performSegueWithIdentifier:@"pushToMainView" sender:self];
    else
        wantPush = YES;
}
@end 
```

`pushToMainView`这将在您发送消息时触发 Segue ，`[controller pushToMainView]`但会阻止，直到加载视图。

# c++ - random_shuffle 列表，通过将其复制到向量并返回

> ID：15607823
> 
> 赞同：1
> 
> 时间：2013-03-25T04:47:34.220
> 
> 标签：c++, list, vector, stl, shuffle

我正在尝试通过先将列表复制到向量然后再复制回空列表来对列表进行洗牌。

```
vector<Agent*> tmpVector(agents_.size());
copy(agents_.begin(), agents_.end(), tmpVector.begin());
random_shuffle(tmpVector.begin(), tmpVector.end());
agents_.clear();
copy(tmpVector.begin(), tmpVector.end(),agents_.begin()); 
```

程序因运行时错误而崩溃：list iterator not dereferencable

1-代码有什么问题。

2-列表包含指针。如果上述方法有效，我认为不会有任何问题（因为指针值不会改变，并且分配的变量以后仍然可以被它们引用），对吧？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:50:02.273

我认为问题在于这两行：

```
agents_.clear();
copy(tmpVector.begin(), tmpVector.end(),agents_.begin()); 
```

第一行清除了`agents_`列表，所以它现在是空的。然后下一行尝试将存储在`agents_`从第一个元素开始的元素序列替换为 range 的内容`[tmpVector.begin(), tmpVector.end())`。这会导致未定义的行为，因为列表中没有元素。

要解决此问题，请尝试`agents_.clear()`从上一行中删除对的调用。这将导致`copy`调用`agents_`用适当的洗牌值覆盖列表中的现有元素。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:57:20.273

问题来自最后两行：

```
agents_.clear();
copy(tmpVector.begin(), tmpVector.end(),agents_.begin()); 
```

具体来说，您调用`clear()`列表，它会破坏所有元素并留下大小为 0 的列表，然后尝试访问`begin()`. 试图取消引用`begin()`然后变成未定义的行为。

您可以清理一下这段代码：

```
vector<Agent*> tmpVector(agents_.begin(), agents_.end());
random_shuffle(tmpVector.begin(), tmpVector.end());
copy(tmpVector.begin(), tmpVector.end(),agents_.begin()); 
```

会做你想做的。第一个`copy`是不必要的，`vector`有一个构造函数，在这种情况下可以使用 2 个迭代器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T04:51:44.577

当您 clear() tmp 数组时，您将其大小设置为零。

副本期望目的地已经设置了足够的空间（即大小必须正确）。

第一种选择是使用后插入器：

```
agents_.clear();
std::copy(tmpVector.begin(), tmpVector.end(), std::back_inserter(agents_)); 
```

但是由于您在目标中使用指针。
它会毫无问题地复制它们。因此，删除清除可能更容易。

```
// agents_.clear();
// The copy will copy over the old values with no problems.
copy(tmpVector.begin(), tmpVector.end(),agents_.begin()); 
```

# java - 骰子扑克得分算法？

> ID：15607828
> 
> 赞同：0
> 
> 时间：2013-03-25T04:48:00.570
> 
> 标签：java

试图让这些算法来评估一个数组，该数组填充了五个随机选择的整数，范围从 1 到 6。不幸的是，它只会返回高牌和一对选项。当我掷出两对、三对等时，如何获得更高的分数？

```
private static int[] getCounts(int[] dice) {

    int[] counts = new int[6];
    String resValue = "";
    for (int i = 0; i < dice.length; i++) {
        if (dice[i] == 1) {
            counts[0]++;
        } else if (dice[i] == 2) {
            counts[1]++;
        } else if (dice[i] == 3) {
            counts[2]++;
        } else if (dice[i] == 4) {
            counts[3]++;
        } else if (dice[i] == 5) {
            counts[4]++;
        } else if (dice[i] == 6) {
            counts[5]++;
        }
    }
    return counts;
}

private static String getResult(int[] dice) {
    int[] counts = getCounts(dice);
    String resValue = " ";

    for (int i = 0; i < counts.length; i++) {
        if (counts[i] == 5) {
            resValue = "Five of a kind ";
        } else if (counts[i] == 4) {
            resValue = "Four of a kind ";
        } else if (counts[i] == 3) {
            for (int j = 0; j < counts.length; j++) {
                if (counts[j] == 2) {
                    resValue = "Full House ";
                }
            }
            resValue = "Three of a Kind ";
        } else if (counts[i] == 2) {
            for (int j = 0; j < counts.length; j++) {
                if (counts[j] == 2) {
                    resValue = "Two Pairs ";
                }
            }
            resValue = "One Pair ";
        } else {
            resValue = "Highest Card ";
        }
    }
    return resValue;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:51:23.430

你的 if else 范围很广。即使我们之前发现更高的 resValue，最后一个 else 也会执行。添加检查以查看新的 resValue 是否更高，或者在每个子句的末尾添加 break。

编辑：在这里，它对我有用：

```
private static int[] getCounts(int[] dice) {
        int[] counts = new int[6];
        String resValue = "";
        for (int i = 0; i < dice.length; i++) {
            if (dice[i] == 1) {
                counts[0]++;
            } else if (dice[i] == 2) {
                counts[1]++;
            } else if (dice[i] == 3) {
                counts[2]++;
            } else if (dice[i] == 4) {
                counts[3]++;
            } else if (dice[i] == 5) {
                counts[4]++;
            } else if (dice[i] == 6) {
                counts[5]++;
            }
        }
        return counts;
    }

    private static String getResult(int[] dice) {
        int[] counts = getCounts(dice);
        String resValue = " ";

        for (int i = 0; i < counts.length; i++) {
            if (counts[i] == 5) {
                resValue = "Five of a kind ";
                break;
            } else if (counts[i] == 4) {
                resValue = "Four of a kind "; break;
            } else if (counts[i] == 3) {
                resValue = "Three of a Kind ";
                for (int j = 0; j < counts.length; j++) {
                    if (counts[j]==2) {
                        resValue = "Full House "; break;
                    }
                }
                break;
            } else if (counts[i] == 2) {
                 resValue = "One Pair ";
                for (int j = 0; j < counts.length; j++) {
                    if (counts[j] == 2) {
                        resValue = "Two Pairs "; break;
                    }
                }
               break;
            } else {
                resValue = "Highest Card ";
            }
        }
        return resValue;
    } 
```

# c# - 如何从C#中的纬度经度获取位置的图像

> ID：15607829
> 
> 赞同：0
> 
> 时间：2013-03-25T04:48:27.707
> 
> 标签：c#, asp.net, .net, google-maps

是否可以从其纬度和经度获取位置的图像？我知道谷歌街景确实提供了该位置的 360 度视图，但我需要该位置的图像/快照....知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:14:01.757

您需要查看地理编码（而不是反向地理编码）。

Mapquest API 的一个例子——

[http://open.mapquestapi.com/geocoding/](http://open.mapquestapi.com/geocoding/)

如果您查看 GeoCoding api 示例，您可以从 Lat 和 Long 获取位置，还可以通过指定边界框来获取该区域的图像。

谷歌也有一个[反向地理编码 API](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)。

OpenStreetMap 有[Nominatim](http://wiki.openstreetmap.org/wiki/Nominatim)，它可以进行反向地理编码。

编辑 - StreetViewApi

Gogole Street View API 允许您获取位置图像，并以 Lat/Long 作为参数 - 详情请[点击此处](https://developers.google.com/maps/documentation/streetview/#url_parameters)

# ruby-on-rails - 无法让 Highcharts 在 Rails 中工作。jquery.min 是问题吗？

> ID：15607830
> 
> 赞同：0
> 
> 时间：2013-03-25T04:48:36.803
> 
> 标签：ruby-on-rails

我下载了 Highcharts 并解压缩了该文件夹。但是，我没有将解压缩的文件夹放在我的 rails 应用程序中，我只是将其复制并粘贴`highcharts.js`到我的`vendor/assets/javascript`文件夹中。

接下来，为了确保它正常工作，我将文档中的示例图表复制并粘贴到视图中。因此，我不希望我的代码不正确。但是，该视图现在只显示一个空白页。

我试过谷歌搜索，但我无法弄清楚问题所在。我认为这可能与 jquery.min 有关，但我不完全确定。似乎 jquery.min 搞乱了我的其他 jquery 函数，所以这就是为什么我认为可能是这样的原因......我正在使用 jquery-rails 2.0.2 gem 中的 jquery。

我的观点：

```
<%= javascript_include_tag "http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"%>
<%= javascript_include_tag "highcharts" %>

<script>
$(function () { 
$('#chart').highcharts({
    chart: {
        type: 'bar'
    },
    title: {
        text: 'Fruit Consumption'
    },
    xAxis: {
        categories: ['Apples', 'Bananas', 'Oranges']
    },
    yAxis: {
        title: {
            text: 'Fruit eaten'
        }
    },
    series: [{
        name: 'Jane',
        data: [1, 0, 4]
    }, {
        name: 'John',
        data: [5, 7, 3]
    }]
});
});​
</script>

<div id = "chart"> </div> 
```

还有我的 application.js

```
//= require jquery
//= require jquery_ujs
//= require jquery.numeric
//= require_tree .
//= require bootstrap 
```

# struts2 - 无法在struts2文件上传中获取文件名

> ID：15607832
> 
> 赞同：-1
> 
> 时间：2013-03-25T04:48:37.720
> 
> 标签：struts2

我是 Struts2 的新手。我无法获取文件名和路径。请帮助任何人。

```
import java.io.File;
import java.util.ResourceBundle;

import org.apache.commons.io.FileUtils;

import nre.dao.DBconnection;

import com.mysql.jdbc.Connection;
import com.opensymphony.xwork2.ActionSupport;

 public class AddProperty extends ActionSupport
{

private String propertyid;
private String propertyname;
private String country;
private String state;
private String city;
private String description;
private File uploadphoto;
private String photofiletype;
private String photoname;

public String getPropertyid()
{
    return propertyid;
}
public void setPropertyid(String propertyid)
{
    this.propertyid = propertyid;
}
public String getPropertyname()
{
    return propertyname;
}
public void setPropertyname(String propertyname)
{
    this.propertyname = propertyname;
}
public String getCountry()
{
    return country;
}
public void setCountry(String country)
{
    this.country = country;
}
public String getState()
{
    return state;
}
public void setState(String state)
{
    this.state = state;
}
public String getCity()
{
    return city;
}
public void setCity(String city)
{
    this.city = city;
}
public String getDescription()
{
    return description;
}
public void setDescription(String description)
{
    this.description = description;
}
public File getUploadphoto()
{
    return uploadphoto;
}
public void setUploadphoto(File uploadphoto)
{
    this.uploadphoto = uploadphoto;
}

public String getPhotofiletype() {
    return photofiletype;
}

public void setPhotofiletype(String photofiletype) {
    this.photofiletype = photofiletype;
}

public String getPhotoname() {
    return photoname;
}

public void setPhotoname(String photoname) {
    this.photoname = photoname;
}

public String execute(){

    DBconnection connection=new DBconnection();
    connection.getConnection();

    try{

        String filepath=connection.filepath;

        System.out.println("filepath : : "+filepath);
        System.out.println("photoname : : "+photoname);

        if(filepath!=null && photoname!=null){
            File filetocreate=new File(filepath,photoname);
            FileUtils.copyFile(uploadphoto, filetocreate);  
        }

    }catch(Exception e){
        e.printStackTrace();
        addActionError(e.getMessage());

        return INPUT;
    }

    String query ="insert into addproperty(propertyid,propertyname,propertycity,propertystate,propertycountry,addedby,addeddate,removeddate) values ('"+propertyid+"','"+propertyname+"','"+city+"','"+state+"','"+country+"','Parthi',now(),NULL)";
    connection.executeUpdate(query);

    System.out.println("Completed Inserting");

    return SUCCESS;

    //System.out.println("Class completed");
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:29:41.040

动作类应该具有以下三个属性。
• [inputName]File
• [inputName]FileName
• [inputName]ContentType

[inputName] 是 JSP 上文件标记的名称。例如，如果文件标签的名称是uploadphoto，则属性如下：
• 文件uploadphotoFile
• 字符串uploadphotoFileName
• 字符串uploadphotoContentType

```
String filePath = servletRequest.getRealPath("/");
File fileToCreate = new File(filePath, this.uploadphotoFileName);
FileUtils.copyFile(this.uploadphotoFile, fileToCreate); 
```

# wordpress - 在 wordpress 中显示每个类别的第一个/最后一个帖子

> ID：15607840
> 
> 赞同：0
> 
> 时间：2013-03-25T04:49:21.337
> 
> 标签：wordpress

我是新来的`WordPress`。我需要显示每个父类别的第一个/最后一个帖子。这可能在任何子类别中。

我需要简单的代码来获得它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:31:47.200

```
<?php
$category = get_categories();
foreach ($category as $cat)
{
    query_posts( array ( 'cat' => $cat->cat_ID, 'posts_per_page' => 5 ) );
    echo '<div class="post">';
    echo '<h2>'.$cat->cat_name.'</h2>';
    echo '<ul>';
    while (have_posts())
    {
        the_post();
        echo '<li><a href="'.get_permalink().'">'.get_the_title().'</a></li>';
    }
    echo '</ul>';
    $category_id = get_cat_ID($cat->cat_name);
    $category_link = get_category_link($category_id);
    echo '<div class="paging">';
    echo '<a href="'.$category_link.'" title="'.$cat->cat_name.'">More Post from '.$cat->cat_name.'</a>';
    echo '</div>';
    echo '</div>';
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T16:29:36.563

我设法使用自定义查询来做到这一点，这是我执行的查询：

```
SELECT * FROM (
  SELECT a.*, d.name as category FROM wp_posts AS a
     INNER JOIN wp_term_relationships AS b ON b.object_id = a.ID
     INNER JOIN wp_term_taxonomy AS c ON b.term_taxonomy_id = c.term_taxonomy_id AND c.parent = 0
     INNER JOIN wp_terms AS d ON d.term_id = c.term_id AND c.taxonomy = 'category'
     ORDER BY a.post_date DESC
  ) as f
GROUP BY f.category
ORDER BY f.post_date DESC; 
```

这样做是获取与类别分类相关的完整帖子数据集，然后以降序模式对其进行排序，因此它将最新帖子排在第一位，然后按类别对其进行分组，然后再次对其进行排序。如果您想获得最旧的，只需将 DESC 更改为 ASC。

我在数据库中使用这个脚本将有 127,000 个帖子，即使我的服务器非常强大，执行这个查询也需要 0.0042seg。

希望这可以帮助某人，干杯！

# php - Zend Framework 2 从模块中添加导航项

> ID：15607841
> 
> 赞同：3
> 
> 时间：2013-03-25T04:49:34.073
> 
> 标签：php, zend-framework2, zend-navigation

我正在尝试从模块中添加模块特定的导航项。我可能做错了。到目前为止，我所拥有的是：

**config/autoload/navigation.global.php（到目前为止有效）**

```
<?php
return array(
  'navigation' => array(
    'default' => array(
      array(
        'label' => 'Home',
        'route' => 'home',
        'order' => -100,
        'pages' => array(
        ),
      ),
    ),
  ),
); 
```

**module/Books/Module.php：（我正在尝试*在*Home 下添加“Books”导航项（不是内联））**

```
class Module
{
  public function onPreDispatch($e) {
    $pages = array(
      array(
        'label' => 'Books',
        'route' => 'books',
      ),
    );
    $navigation = $e->getParam('application')->getServiceManager()->get('navigation');
    $navigation->findOneByRoute('home')->addPages($pages);
  }
  /* ... */
} 
```

所以在上面的例子中（路线是正确的），我没有收到错误，事件在预调度时触发，但没有任何东西添加到导航容器中。

我想要完成的是如下导航：

```
 Home
    |-> Books
    |-> Module2
    |-> etc.. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T09:08:48.410

您不需要挂钩事件。只需将模块特定的导航配置放在模块的module.config.php 中即可。每个模块的配置都被合并，如果你有缓存，如果你为许多模块做缓存，这在性能方面会更好。

重要的是在导航中为您的项目命名。在 config/autoload/navigation.global.php 中为 home 项添加一个名称：

```
<?php
return array(
    'navigation' => array(
        'default' => array(
            'home' => array(      // <-- name "home" added (name is arbitrary)
                'label' => 'Home',
                'route' => 'home',
                 'order' => -100,
            ),
        ),
    ),
); 
```

然后在 module/Books/config/module.config.php

```
return array(
    'navigation' => array(
        'default' => array(
            'home' => array(
                'pages' => array(
                    'home/book' => array(   // <-- name is arbitrary
                        'label' => 'Books',
                        'route' => 'books',
                     ),
                 ),   
             ),
         ),
     ),
); 
```

最后，两种配置合并，您有一个导航键：

```
return array(
    'navigation' => array(
        'default' => array(
            'home' => array(
                'label' => 'Home',
                'route' => 'home',
                'order' => -100,
                'pages' => array(
                    'home/book' => array(
                        'label' => 'Books',
                        'route' => 'books',
                     ),
                 ),   
             ),
         ),
     ),
); 
```

希望这可以帮助 ：）

斯托扬

# objective-c - 使用 HASH 从 NSSet 获取对象集

> ID：15607846
> 
> 赞同：0
> 
> 时间：2013-03-25T04:50:06.820
> 
> 标签：objective-c

这实际上是我一直试图解决的一个问题......

我需要在 NSSet 中实现这个功能......

我知道哈希表和集合是如何工作的......并且 NSSet 似乎使用 HASH 作为该数组的索引来存储指向哈希表内对象的指针......当多个对象落在该哈希中时......它使用 isEqual检测哪个对象是我们搜索的成员......这意味着......

HASH value => 给出哈希表中指针数组的索引，并且每个指针都指向一个数组（或某个集合），该数组（或某个集合）包含具有该哈希的对象（因为它迭代它以检测哪个对象是成员）...这是一个相当常见的数据结构...

我的问题是...有没有办法检索哈希表指向的对象数组...我需要在 NSSet 中具有相同哈希值的所有对象...

我需要这个来快速处理点之间的接近度......

有办法吗？我知道我可以使用谓词

```
[NSPredicate predicateWithFormat:@"hash == %u",hash]; 
```

但这使用了枚举并且没有它需要的那么快（真正的快）

有没有办法或者我应该从头开始创建一个哈希表？（或使用核心基础）

感谢和抱歉给您带来的麻烦！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:53:27.507

从 iOS 6.0 和 MacOS 10.5 开始，您现在可以[使用一个实际的 NSHashTable 对象](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSHashTable_class/Introduction/Introduction.html)。它以 NSSet 为模型，但它是自己的东西。 [这里还有一些关于 Hash Tables 的 Apple 文档](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Collections/Articles/Sets.html#//apple_ref/doc/uid/20000136-SW4)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:11:17.210

如果你想要一个数组中的对象，只需调用 -allObjects，如果你想要所有哈希，那么你将不得不遍历它们，因为它们是 long 并且不能直接存储在 NSArray 中。

我的想法是制作一个覆盖其自己的哈希的模拟对象，然后您可以在数组中搜索该对象的索引，该对象假装是您的对象。

```
@interface MockHasher : NSObject{
    NSUInteger mockHash;
}

@property(assign,nonatomic,getter = hash,setter = setHash:)NSUInteger mockHash;
@end

@implementation MockHasher

@synthesize mockHash;

-(BOOL)isEqual:(id)object{return YES;}
-(BOOL)isEqualTo:(id)object{return YES;} 
```

@结尾

例子：

```
NSSet * myset = [NSSet setWithObject:@(1)];
MockHasher * mockObject = [[MockHasher new] autorelease];
mockObject.hash = @(1).hash;
NSArray * allObjects = [myset allObjects];
NSUInteger i = [allObjects indexOfObject:mockObject];
id result = [allObjects objectAtIndex:i];
NSLog(@"result = %@",result); 
```

它很脆弱，因为它取决于数组询问传入的对象`isEqual:`而不是询问迭代的对象......我不知道这有多可靠......但它在我的测试中有效。

# php - 在php中下载Android二进制（apk），安装apk文件时解析错误包

> ID：15607848
> 
> 赞同：3
> 
> 时间：2013-03-25T04:50:08.310
> 
> 标签：php, parsing, download, installation, apk

我正在尝试下载由 php 页面输出的 Android APK 文件。下载成功，但是尝试安装apk文件时出现解析包问题。实际上，直接访问文件路径（/var/www/xxx/HelloWorldTest.apk），这个方法完全安装。（没问题。）但我想使用通过php源的方法。

我的服务器上有 Android 应用程序，也有 php 代码，例如：

```
<?php
$path = "/var/www/xxx/";
$filename="HelloWorldTest.apk";
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Type: application/vnd.android.package-archive");
header("Content-Disposition: attachment; filename=\"$filename\"");
header("Content-Transfer-Encoding: binary");
header("Content-Length: " . filesize($path . $filename));
readfile($path . $filename);
?> 
```

有 HelloWorldTest(Android app) 清单，如：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.helloworldtest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.helloworldtest.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我的设置：CentOS release 6.3 (Final),2.6.32-279.5.2.el6.x86_64, PHP 5.3.17 Android table Version:3.2.1 kernel version:2.6.36.3

使用直接访问方法和使用 php 方法结果的二进制转储存在差异。

直接访问（成功）

```
50 4B 03 04 14 00 08 08  08 00 F5 91 76 42 00 00 
00 00 00 00 00 00 00 00  00 00 1C 00 04 00 72 65 
73 2F 6C 61 79 6F 75 74  2F 61 63 74 69 76 69 74 
79 5F 6D 61 69 6E 2E 78  6D 6C FE CA 00 00 6D 91
... 
```

通过 php（安装失败）

```
0A 0A 50 4B 03 04 14 00  08 08 08 00 F5 91 76 42 
00 00 00 00 00 00 00 00  00 00 00 00 1C 00 04 00 
72 65 73 2F 6C 61 79 6F  75 74 2F 61 63 74 69 76 
69 74 79 5F 6D 61 69 6E  2E 78 6D 6C FE CA 00 00
..... 
```

问题似乎是在二进制代码中添加了初始部分 [0A 0A]。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T12:13:13.993

0A 是换行的十六进制代码。因此，您似乎在文件的实际内容之前添加了两个换行符。通过阅读[readfile](http://php.net/manual/en/function.readfile.php)上的文档，建议使用以下内容围绕 readfile 调用：

```
ob_clean();
flush();
readfile($path . $filename);
exit; 
```

试试看你是否还有两个 0A 字符。

# c++ - 如何将结构传递给函数调用

> ID：15607852
> 
> 赞同：0
> 
> 时间：2013-03-25T04:50:28.157
> 
> 标签：c++, function, struct

我正在尝试将名为“坐标”的结构传递给具有 2 个 int 的函数，因此当调用该函数时，可以输入整数作为函数的参数。例子：

这是我要使用的结构：

```
struct coordinate
{
    int row;
    int col;
}; 
```

函数原型如下所示：

```
bool    IsInMaze(coordinate); 
```

我想要做的是调用这样的函数......

```
IsInMaze(1,5); 
```

这样 1 将成为行，5 将成为列。该功能基本上是检查坐标（int）是否在特定尺寸的大小范围内......像这样

```
bool MazeClass::IsInMaze(coordinate location)
{
    if(location.row < 0 || location.row > height || location.col < 0 || location.col > width)
        return false;
    else 
        return true;
} 
```

但我得到这个错误......

```
ola4A1.cc: In function \u2018int main(int, char**)\u2019:
ola4A1.cc:30: error: no matching function for call to \u2018MazeClass::IsInMaze(int, int)\u2019
MazeClass.h:30: note: candidates are: bool MazeClass::IsInMaze(coordinate)
ola4A1.cc:35: error: no matching function for call to \u2018MazeClass::IsInMaze(int, int)\u2019
MazeClass.h:30: note: candidates are: bool MazeClass::IsInMaze(coordinate) 
```

我从来没有真正被教导过，所以我认为我只是不理解这一点。我怎样才能编写这个函数，我可以按照我想要的方式调用它？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T04:57:10.490

你出错的地方是期望你的结构的内容可以作为参数传递给一个需要你的结构实例的函数。

`IsInMaze(int, int)`不一样`IsInMaze(coordinate)`。要正确调用声明的函数，您必须创建`coordinate`第一个，并传递它：

```
coorindate c;
c.row = 1;
c.col = 5;
IsInMaze(c); 
```

或者，您可以声明另一个`IsInMaze`带有两个`int`参数的：

```
bool IsInMaze(int row, int col); 
```

# c++ - 将正则表达式编译为本机程序集会比 PCRE 或其他正则表达式引擎更快吗？

> ID：15607853
> 
> 赞同：5
> 
> 时间：2013-03-25T04:50:32.347
> 
> 标签：c++, regex, perl, assembly, pcre

我正在考虑改进。我目前正在对日志文件进行大量文本处理。

我并不是说 PCRE 慢/快或任何其他实现。

我编写的语言主要是 Perl。我知道它有一个强大的正则表达式引擎，而且我知道它比 PCRE 更具表现力。

我有这样的想法，即在 C++ 中制作一个小型正则表达式引擎，将正则表达式编译为原始 nasm。

我知道 PCRE 非常复杂，我的假设是我可以跳过 PCRE 在不必要的处理方面所做的很多事情。我当然可以让它比 Perl 更快，因为它使用类似 vm 的操作码和各种可以被认为是开销的东西。

前段时间我已经开始实施了。我不会在这里发布它，因为我没有任何问题，我可以将它执行到最后并获得一个能够进行捕获、能够解释`+` `*` `^` `$`、字符类的正则表达式引擎（虽然我还没有完成了我将正则表达式转换为汇编语言的部分）

这是个好主意还是坏主意？在达到良好性能方面会出现什么问题？

tl;dr => 可以生成本机程序集的 C++ 迷你正则表达式引擎比已建立的正则表达式实现更快吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T05:00:46.713

我认为这个问题的答案很明显。理想情况下，是的，它可能是。但是，即使你在这类事情上*非常*聪明，也需要付出很大的开发努力才能达到这样的程度，在大多数情况下，你只比可用的库稍微好一点——甚至更长的时间来工作的错误。所以没有太大意义。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T05:10:01.083

Perl 的正则表达式很快，但不是非常快。请参阅[Russ Cox 对 Perl 与 Thompson 风格的正则表达式引擎的分析，](http://swtch.com/~rsc/regexp/regexp1.html)以获得关于性能差异的令人瞠目结舌的演示，以及如何正确执行此操作的理论。

如果你不想实现 Thompson/Cox 的方案，你应该考虑[Ragel](http://www.complang.org/ragel/)，一个非常快的正则表达式处理器。Ragel 努力构建高效的自动机，然后为目标编译器语言生成代码。它让编译器完成将“转换为机器代码”的艰苦工作。

它很可能是您正在考虑构建的引擎。

如果这些还不够好，您应该追踪 IBM 最近在极速流匹配器方面的工作。我认为[Davide Pasetto](http://www.linkedin.com/pub/davide-pasetto/5/713/2b9)的论文可能是相关的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T05:26:41.013

做一个基准测试。采用一个非常简单的正则表达式，但您通常会使用它。然后制作该正则表达式的硬编码版本。比较使用实际数量的数据，其中操作需要足够长的时间才能加快速度。

我认为任何好的正则表达式引擎的内部循环都已经非常优化，使用了最先进的文本匹配算法，并且经过优化可以快速完成。当表达式不是微不足道的（例如 char 类）时，祝您使用自己的代码更快。

显然存在开销，您可以按照自己的方式对内容进行硬编码并实现良好的线性加速，*其他条件相同*。但这对于拥有好的算法是次要的，如果您不熟悉算法复杂性的概念，[请先阅读它](http://en.wikipedia.org/wiki/Computational_complexity_theory)。

* * *

但是有一个关键的事情，这几乎是真正使用的一个亮点。正则表达式引擎必须正确。它必须以零误报找到它的假设。如果您获得错误匹配或错过匹配，则可能会发生不好的事情，例如数据损坏。您如何对自己的引擎有足够的信心来敢于使用它？

创造一个乐趣，当然。对于实际生产使用...嗯...

* * *

如果您可能是认真的，则需要从一开始就进行自动化测试。对于正则表达式之类的东西，您还需要对测试进行代码覆盖率分析。由于您将拥有确定性的输入和输出，没有用户输入或任何内容，因此最终您应该瞄准代码的相关部分 100% 覆盖，包括引擎和测试正则表达式的生成代码。哦，当目标是速度时，也不要忘记自动基准测试！当然，你想开始编码而不关心这些东西，这很好，但是从一开始就设置基础设施，当你测试你的代码时，把它写成自动化测试，抵制手动进行临时测试的冲动（除了作为编写自动化测试用例的步骤）。如果你做对了，你的项目成功的机会就会大得多。

对于生成的代码，[LLVM](http://llvm.org/)可能是您想要使用的，而不是某些特定 CPU 的汇编程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T05:19:22.517

您可能会从编译为机器指令的正则表达式中挤出更多的性能。这样做是否有意义完全取决于您如何摊销成本。

如果您正试图达到解析日志文件的特定目标并有一个截止日期，那么在您*证明*现有库（包括[Google 的 RE2](http://code.google.com/p/re2/)）对您来说太慢之前，考虑这一点可能没有意义。在确定它是瓶颈之前担心你的 RE 性能是过早优化的典型案例。

但是，如果您想将此作为一项挑战和学习练习，并且没有迫在眉睫的最后期限，那么一定要试一试。做好大量工作的准备，别忘了写很多测试用例，因为会有bug。您的正则表达式引擎将成为整个工作产品的关键基础，您不能承受它在生产中的不当行为。

祝你好运！

# java - Hibernate 对象未映射异常

> ID：15607854
> 
> 赞同：0
> 
> 时间：2013-03-25T04:50:34.447
> 
> 标签：java, spring, hibernate, hql, spring-orm

从我的数据库中检索所有组的 HQL 语句存在一些问题。我得到以下异常：

```
org.hibernate.hql.internal.ast.QuerySyntaxException: Group is not mapped [from Group]
    at org.hibernate.hql.internal.ast.util.SessionFactoryHelper.requireClassPersister(SessionFactoryHelper.java:180) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final]
    at org.hibernate.hql.internal.ast.tree.FromElementFactory.addFromElement(FromElementFactory.java:110) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final]
    at org.hibernate.hql.internal.ast.tree.FromClause.addFromElement(FromClause.java:93) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final]
    at org.hibernate.hql.internal.ast.HqlSqlWalker.createFromElement(HqlSqlWalker.java:324) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final]
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromElement(HqlSqlBaseWalker.java:3291) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final]
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:3180) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final]
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:706) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final]
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:562) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final]
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:299) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final]
    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:247) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final]
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:248) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final]
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:183) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final]
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final]
    at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:105) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final]
    at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:80) ~[hibernate-core-4.1.6.Final.jar:4.1.6.Final] 
```

以下是相关代码：

```
GroupServiceDaoImpl:
    public List<Group> getGroups() {
        List list = getSessionFactory().getCurrentSession().createQuery("from Group").list();
        return (List<Group>) list;
    } 
```

春天hibernate.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:c="http://www.springframework.org/schema/c"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- Beans Declaration -->
    <bean id="User" class="com.youthministry.domain.User"/>
    <bean id="UserProfile" class="com.youthministry.domain.UserProfile"/>
    <bean id="Event" class="com.youthministry.domain.Event"/>
    <bean id="Group" class="com.youthministry.domain.Group"/>
    <bean id="Role" class="com.youthministry.domain.Role"/>
    <bean id="Location" class="com.youthministry.domain.Location"/>
    <bean id="Image" class="com.youthministry.domain.Image"/>
    <bean id="PageContent" class="com.youthministry.domain.PageContent"/>
    <bean id="TextEntry" class="com.youthministry.domain.TextEntry"/>

    <!-- User Service Declaration -->
    <bean id="UserService" class="com.youthministry.service.impl.UserServiceImpl">
        <property name="userDao" ref="UserDao" />
    </bean>
    <bean id="GroupService" class="com.youthministry.service.impl.GroupServiceImpl">
        <property name="groupDao" ref="GroupDao" />
    </bean>

    <!-- User DAO Declaration -->
    <bean id="UserDao" class="com.youthministry.dao.impl.UserDaoImpl">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>
    <bean id="GroupDao" class="com.youthministry.dao.impl.GroupDaoImpl">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>
    <bean id="EventDao" class="com.youthministry.dao.impl.EventDaoImpl">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>
    <bean id="PageContentDao" class="com.youthministry.dao.impl.PageContentDaoImpl">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>

    <!-- Data Source Declaration -->
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://localhost:3306/YouthMinistry"/>
        <property name="username" value="root"/>
        <property name="password" value=""/>
    </bean>
    <!-- Session Factory Declaration -->
    <bean id="SessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>com.youthministry.domain.Event</value>
                <value>com.youthministry.domain.Group</value>
                <value>com.youthministry.domain.Image</value>
                <value>com.youthministry.domain.Location</value>
                <value>com.youthministry.domain.PageContent</value>
                <value>com.youthministry.domain.Role</value>
                <value>com.youthministry.domain.TextEntry</value>
                <value>com.youthministry.domain.User</value>
                <value>com.youthministry.domain.UserProfile</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
    </bean>

    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate"
        c:_-ref="dataSource" />

    <!-- Enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="txManager"/>

    <!-- Transaction Manager is defined -->
    <bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
       <property name="sessionFactory" ref="SessionFactory"/>
    </bean>

 </beans> 
```

组：包com.youthministry.domain；

```
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;

@Entity(name="GROUP_DETAILS")
public class Group {
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Long groupId;
    private String groupName;
    private String groupDesc;

    public Long getGroupId() {
        return groupId;
    }
    public void setGroupId(Long groupId) {
        this.groupId = groupId;
    }
    public String getGroupName() {
        return groupName;
    }
    public void setGroupName(String groupName) {
        this.groupName = groupName;
    }
    public String getGroupDesc() {
        return groupDesc;
    }
    public void setGroupDesc(String groupDesc) {
        this.groupDesc = groupDesc;
    }

} 
```

以防万一这里是这个项目的 git repo：http: [//github.com/dmcquillan314/YouthMinistryHibernate](http://github.com/dmcquillan314/YouthMinistryHibernate)

让我知道是否需要有关此错误的任何其他信息，我将编辑该帖子。

任何想法都非常感谢。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T04:58:52.670

您已经覆盖了 Group 类中的[默认实体名称，这将是该类的简单名称：](http://docs.oracle.com/javaee/6/api/javax/persistence/Entity.html)

```
@Entity(name="GROUP_DETAILS") 
```

因此，您不能在查询中使用 Group 作为实体名称。有两个选项可以解决这个问题：

如果您在 HQL 中使用“GROUP_DETAILS”，则查询应该会成功。或者，您可以省略 Entity 注释的 name 属性并保持 HQL 不变。

# c++ - 长度为零的字符缓冲区容纳整数

> ID：15607855
> 
> 赞同：1
> 
> 时间：2013-03-25T04:50:39.653
> 
> 标签：c++

我有一个基本问题，`BUFSIZ`值 (8192) 基本上是一个大小为 (4) 的整数，可容纳大小为 0 的字符数组。

怎么可能真的..

**输出**

```
 size of buf:0
 size of INT:4
 size of bufsize:4
num_process:24
 after num_process:24
max_process has reached for kblockd:0 
```

**编码**

```
#include <iostream>

using namespace std;

class ServiceUtilCheck
{
    private:
    FILE *ptr;
    char buf[0];
    char cmd[1024];
    int m_max_num_process;

    public:
    ServiceUtilCheck()
    {
        m_max_num_process=15;
    }

    bool check_max_process(const char* processname)
    {
        int num_process = 0;
        int ret =0;

        sprintf(cmd, "/bin/ps -e | /bin/grep %s | /usr/bin/wc -l", processname);

        if ((ptr = popen(cmd,"r")) != NULL )
        {
            if (fgets(buf,BUFSIZ,ptr) != NULL )
            {

                //buf[0] = (char) 3424252;
                cout<<" size of buf:" << sizeof(buf) <<endl;
                cout<<" size of INT:" << sizeof(int) <<endl;
                cout<<" size of bufsize:" << sizeof(BUFSIZ) <<endl;
                num_process =atoi(buf);
                cout<<"num_process:" << num_process <<endl;
            }

            cout<<" after num_process:" << num_process <<endl;

            if (num_process <= m_max_num_process)
                ret = true;

            pclose(ptr);
        }
        return ret;
    }
};

int main ()
{
    ServiceUtilCheck *serv = new ServiceUtilCheck();
    bool max_process= serv->check_max_process("kblockd");
    cout<<"max_process has reached for kblockd:"<< max_process <<endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:55:29.663

c++ 中没有数组边界检查。因此，如果您分配的大小小于您读取的字节数，则不会出现编译错误。

但是，您的程序可能会在任何时候崩溃，或者在最坏的情况下以静默方式写入一些其他有意义的信息的内存。就像评论中已经提到的那样，这是未定义的行为。

最后，0 大小的数组是 GNU c 的一个特殊功能。它们用于容纳动态大小的数据，并将在运行时使用诸如 malloc 之类的函数分配实际大小。

[零长度数组](http://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html)

# android - ArrayAdapter 中的 SharedPreferences

> ID：15607860
> 
> 赞同：0
> 
> 时间：2013-03-25T04:51:37.110
> 
> 标签：android, sharedpreferences, android-arrayadapter

我正在尝试使用存储在共享首选项中的值来帮助设置列表视图的样式，当我使用此代码时，它会返回默认值；

```
 SharedPreferences pref = context.getSharedPreferences("Level", 0);
    mCounter = pref.getInt("Level", 3); 
```

这是我用来存储首选项的代码：

```
SharedPreferences pref = getSharedPreferences("com.komodostudios.asllessons", MODE_PRIVATE);
         pref.edit().putInt("Level", 1).commit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:57:12.087

```
getSharedPreferences(String name, int mode) 
```

*首选项文件*`name`的名称在哪里

 *`getInt (String key, int defValue)`

`key`实际*偏好键*在哪里

 *您是否已经命名了您的偏好和密钥`"Level"`？如果不是，那就是问题所在。

这应该有效：

```
SharedPreferences pref = getSharedPreferences("com.komodostudios.asllessons", MODE_PRIVATE);
mCounter = pref.getInt("Level", 3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:06:29.840

当您想要获取值时，您需要设置相同的共享首选项名称。像这里一样，您希望在“级别”首选项中获取您的值，但放入不同的共享首选项“com.komodostudios.asllessons”。这样您就可以获得“级别”代码的默认值，如下所示： 存储： `SharedPreferences pref = getSharedPreferences("com.komodostudios.asllessons", MODE_PRIVATE); Editor editPreference=pref .edit(); editPreference.putInt("Level",2); editPreference.commit();` 检索： `SharedPreferences pref = getSharedPreferences("com.komodostudios.asllessons", MODE_PRIVATE); int mCounter = pref.getInt("Level",1);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T04:54:41.303

您确定首选项已从默认设置更改吗？使用时，`SharedPreferences.Editor`您必须记住调用`commit()`以保存更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T05:00:24.613

```
 SharedPreferences pref = getSharedPreferences("com.komodostudios.asllessons", MODE_PRIVATE);

    mCounter = pref.getInt("Level", 3); 
```

你必须做上面的代码..

使用下面的代码来存储和从 prefrance 中获取价值。这是最好的方法。

对于存储数据：

```
 pref = PreferenceManager
                    .getDefaultSharedPreferences(getApplicationContext());
    editPref = pref.edit();
    editPref.putBoolean("logedin", true);
    editPref.commit(); 
```

对于获取数据：

```
pref = PreferenceManager
                        .getDefaultSharedPreferences(getApplicationContext());
editPref.getBoolean("logedin", false); 
```**

# c++ - 逐字回文程序

> ID：15607866
> 
> 赞同：0
> 
> 时间：2013-03-25T04:52:19.270
> 
> 标签：c++, queue, stack

因此，T 找到了一百万个检查单个单词回文的回文程序示例。

但是 T 需要帮助一个字一个字地做，例如句子你可以把一只燕子关在笼子里，但你不能吞下一个笼子吗？这是

```
// FILE: pal.cxx
// Program to test whether an input line is a palindrome. Spaces,
// punctuation, and the difference between upper- and lowercase are ignored.

#include <cassert>    // Provides assert
#include <cctype>     // Provides isalpha, toupper
#include <cstdlib>    // Provides EXIT_SUCCESS
#include <iostream>   // Provides cout, cin, peek
#include <queue>      // Provides the queue template class
#include <stack>      // Provides the stack template class
using namespace std;

int main( )
{
queue<char> q;
stack<char> s;
char letter;            
queue<char>::size_type mismatches = 0;  // Mismatches between queue and stack
cout << "Enter a line and I will see if it's a palindrome:" << endl;

while (cin.peek( ) != '\n')
{
    cin >> letter;
    if (isalpha(letter))
    {
        q.push(toupper(letter));
        s.push(toupper(letter));
    }
}

while ((!q.empty( )) && (!s.empty( )))
{
    if (q.front( ) != s.top( ))
        ++mismatches;
    q.pop( );
    s.pop( );
}

if (mismatches == 0)
    cout << "That is a palindrome." << endl;
else
    cout << "That is not a palindrome." << endl;    
return EXIT_SUCCESS; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:01:53.577

实际上，这很容易从您的基本代码中完成。您只需要将单词（字符串）添加到队列和堆栈中，而不是字符。我很快修改了代码：

```
#include <algorithm>
queue<std::string> q;
stack<std::string> s;
std::string word;
queue<std::string>::size_type mismatches = 0;  // Mismatches between queue and stack
cout << "Enter a line and I will see if it's a palindrome:" << endl;

while (cin.peek( ) != '\n')
{
    cin >> word;
    std::transform(word.begin(), word.end(), word.begin(), ::toupper);
    q.push(word);
    s.push(word);
} 
```

通过使用 cin 读取字符串，您会自动使用空格作为分隔符。该行：

```
std::transform(word.begin(), word.end(),word.begin(), ::toupper); 
```

将字符串中的所有字符转换为大写。

# android - Android Ndk Basic 关于原生字符串

> ID：15607871
> 
> 赞同：3
> 
> 时间：2013-03-25T04:52:30.213
> 
> 标签：android, android-ndk

要学习基本练习存在，我正在向我的应用程序调用字符串。我知道它太基础了，但对母语还是陌生的。喜欢：

```
 jstring Java_com_idiasoft_LoginActivity_NdkdealerName(JNIEnv* env, jobject javaThis)
     {

         return (*env)->NewStringUTF(env, "User Name");

     } 
```

在这里，我可以在特定的类中调用这个字符串。但我想进行动态调用。像两个或更多类。其中 am 使用相同的字符串。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:27:13.997

找不到关于 NDK 的完美解决方案，但我认为在 Java 部分中创建一个全局类可以帮助您解决这种情况。只需在全局类中定义特定的本地函数并在任何地方使用它。如果不需要实例化该类，您也可以将其设为静态并在应用程序的任何位置使用它。希望这可以帮助。

# image - mod_pagespeed 将所有图像重写为数据：图像格式

> ID：15607872
> 
> 赞同：0
> 
> 时间：2013-03-25T04:52:34.007
> 
> 标签：image, apache, mod-pagespeed

我正在使用[mod_pagespeed](https://developers.google.com/speed/pagespeed/mod)并且我正在寻找一种将所有图像重写为 data:image 格式的方法。目前只包含小图像。我在文档中找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:08:40.587

您可以使用该`ModPageSpeedImageInlineMaxBytes`选项来配置`inline_images`过滤器使用的大小阈值。有关更多详细信息，请参阅[图像优化文档](https://developers.google.com/speed/docs/mod_pagespeed/filter-image-optimize)。

但是，您是否应该仔细考虑是否要实际内联**所有**图像？虽然您将节省对内联图像的另一个请求，但您也会错过缓存扩展等好处，并且如果您在页面上多次引用图像，则需要支付罚款。

# html - * * CSS 选择器有什么作用？

> ID：15607873
> 
> 赞同：97
> 
> 时间：2013-03-25T04:52:52.253
> 
> 标签：html, css, css-selectors

最近我遇到`* *`了[CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)。

站点参考-[站点链接](http://semlabs.co.uk/journal/how-to-stop-your-wordpress-blog-getting-hacked)。

对于 CSS 样式表中的单一`*`用法，Internet 和 Stack Overflow 充斥着示例，但我不确定`* *`在 CSS 中使用两个符号。

我用谷歌搜索了它，但找不到任何相关信息，因为一个`*`选择所有元素，但我不确定该网站为什么使用它两次。这缺少什么，为什么要使用这个hack（如果它是hack）？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-03-25T04:54:44.350

就像其他任何时候你一个接一个地放置两个选择器（例如`li a`）一样，你会得到后代组合器。`* *`任何其他元素的后代元素也是如此——换句话说，任何*不是*整个文档的根元素的元素。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2013-03-25T11:54:44.683

**只是一个小例子：**

尝试在您的网站上添加此内容：

```
* { outline: 2px dotted red; }
* * { outline: 2px dotted green; }
* * * { outline: 2px dotted orange; }
* * * * { outline: 2px dotted blue; }
* * * * * { outline: 1px solid red; }
* * * * * * { outline: 1px solid green; }
* * * * * * * { outline: 1px solid orange; }
* * * * * * * * { outline: 1px solid blue; } 
```

**演示：http:** [//jsfiddle.net/l2aelba/sFSad/](http://jsfiddle.net/l2aelba/sFSad/)

* * *

**示例 2：**

[![* * CSS 选择器有什么作用？](../Images/11bcc58eca095ab3934de88f4d7de5cc.png)](https://i.stack.imgur.com/mosUZ.gif)

**演示：http:** [//jsfiddle.net/l2aelba/sFSad/34/](http://jsfiddle.net/l2aelba/sFSad/34/)

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-03-25T04:54:26.843

`* *`匹配除顶级元素之外的所有内容，例如`html`.

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-25T05:00:14.423

`*`意味着将给定的样式应用于所有元素。

`* *`意味着将给定的样式应用于元素的所有子元素。例子：

```
body > * {
  margin: 0;
} 
```

这会将边距样式应用于 body 的所有子元素。同样的方法，

```
* * {
  margin: 0;
} 
```

适用`margin: 0`于`*`的子元素。简而言之，它适用`margin: 0`于几乎所有元素。

一般来说，一个`*`就够了。不需要两个`* *`。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-03-25T04:55:14.570

这将选择嵌套在另一个元素中的所有元素，其方式与`div a`选择`<a>`嵌套在元素中某处的所有元素几乎相同`<div>`。

# c# - 如何编写服务定位器模式，其中具体类实现相同的接口/服务？

> ID：15607880
> 
> 赞同：3
> 
> 时间：2013-03-25T04:53:19.253
> 
> 标签：c#, design-patterns, service-locator

考虑以下

```
class ServiceA : IServiceA
    {
        public void SayHelloFromA()
        {
            Console.WriteLine("Hello Service A");
            Console.ReadKey();
        }
    }    
    class ServiceB : IServiceB{ } 
    class ServiceC : IServiceC{ }
    interface IServiceA 
    { 
        void SayHelloFromA(); 
    }
    interface IServiceB{ }
    interface IServiceC{ } 
```

如果我想使用服务定位器模式，[此处](http://stefanoricciardi.com/2009/09/25/service-locator-pattern-in-csharpa-simple-example/)提供的示例可以完美运行。

现在说另一个类实现了 IServiceA 接口，如下所示。

```
class ServiceA1 : IServiceA
{
    public void SayHelloFromA()
    {
        Console.WriteLine("Hello Service A1");
        Console.ReadKey();
    }
} 
```

相应地，我需要将服务添加到字典中，如下所示

```
internal ServiceLocator()    
        {        
            services = new Dictionary<object, object>();         

            this.services.Add(typeof(IServiceA), new ServiceA());
            this.services.Add(typeof(IServiceA), new ServiceA1());     
            this.services.Add(typeof(IServiceB), new ServiceB());        
            this.services.Add(typeof(IServiceC), new ServiceC());    
        } 
```

这是错误的，因为字典中不能存在重复的键。

那么我该如何解决这个问题呢？应该如何更改数据结构，以便服务定位器可以同时容纳两者。

注意~我正在尝试在我的工厂方法中实现服务定位器模式

```
public class CustomerFactory : ICustomerBaseFactory

{

          public IBaseCustomer  GetCustomer(string  CustomerType)

          { 
                   switch(CustomerType)

                   { 
                             case "1": return  new Grade1Customer(); break;

                             case "2": return new Grade2Customer(); break;

                             default:return null; 
                   } 
          } 
} 
```

具体工厂来自**IBaseCustomer**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:05:51.450

在 Java 中，有一个**MultiMap**类，它支持每个键的多个值。我相信您也可以为 C# 找到类似的数据结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:23:21.340

您是否考虑过由嵌套在顶级字典中的具体类型键入的每个抽象类型的字典？

```
Dictionary<T, Dictionary<T, U>> 
```

这样，您可以按类型查询顶级字典，然后在子字典中查询实现该类型的所有服务。

例如

```
var services = new Dictionary<Type, Dictionary<Type, Object>>(); 
```

现在您可以向服务字典询问类型：

```
services.TryGetValue(typeof(IServiceA), componentDictionary); 
```

如果返回 true，那么您知道 componentDictionary 将包含实现该服务的组件：

```
foreach (c in componentDictionary.Values) {... } 
```

通过巧妙地使用抽象基类型和泛型，您可以创建比这更强类型的解决方案。然而，这应该工作得相当好，尽管有铸造。

# php - 获取登录的用户数据

> ID：15607883
> 
> 赞同：1
> 
> 时间：2013-03-25T04:53:21.980
> 
> 标签：php, mysql

![在此处输入图像描述](../Images/87f0ec7dbe2ecfa1ea0c754f03254cf3.png)

所以我有这个数据库和这段代码。此代码将使用户能够登录到带有会话的页面。
登录表格（login.php）

```
<?php
    require("common.php"); 
    $submitted_username = '';
    if(!empty($_POST))
    {
        $query = "
            SELECT
                id,
                username,
                password,
                salt,
                email
            FROM users
            WHERE
                username = :username
        ";
        $query_params = array(
            ':username' => $_POST['username']
        );

        try
        {
            $stmt = $db->prepare($query);
            $result = $stmt->execute($query_params);
        }
        catch(PDOException $ex)
        {
            die("Failed to run query: " . $ex->getMessage());
        }
        $login_ok = false;
        $row = $stmt->fetch();
        if($row)
        {
            $check_password = hash('sha256', $_POST['password'] . $row['salt']);
            for($round = 0; $round < 65536; $round++)
            {
                $check_password = hash('sha256', $check_password . $row['salt']);
            }

            if($check_password === $row['password'])
            {
                $login_ok = true;
            }
        }
        if($login_ok)
        {
            unset($row['salt']);
            unset($row['password']);
            $_SESSION['user'] = $row;
            header("Location: private.php");
            die("Redirecting to: private.php");
        }
        else
        {
            print("Login Failed.");
            $submitted_username = htmlentities($_POST['username'], ENT_QUOTES, 'UTF-8');
        }
    }

?>
<h1>Login</h1>
<form action="login.php" method="post">
    Username:<br />
    <input type="text" name="username" value="<?php echo $submitted_username; ?>" />
    <br /><br />
    Password:<br />
    <input type="password" name="password" value="" />
    <br /><br />
    <input type="submit" value="Login" />
</form>
<a href="register.php">Register</a> 
```

会话（common.php）

```
<?php

    // These variables define the connection information for your MySQL database
    $username = "root";
    $password = "";
    $host = "localhost";
    $dbname = "phplogin";

    $options = array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8');
    try
    {
        $db = new PDO("mysql:host={$host};dbname={$dbname};charset=utf8", $username, $password, $options);
    }
    catch(PDOException $ex)
    {
        die("Failed to connect to the database: " . $ex->getMessage());
    }
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);

    if(function_exists('get_magic_quotes_gpc') && get_magic_quotes_gpc())
    {
        function undo_magic_quotes_gpc(&$array)
        {
            foreach($array as &$value)
            {
                if(is_array($value))
                {
                    undo_magic_quotes_gpc($value);
                }
                else
                {
                    $value = stripslashes($value);
                }
            }
        }

        undo_magic_quotes_gpc($_POST);
        undo_magic_quotes_gpc($_GET);
        undo_magic_quotes_gpc($_COOKIE);
    }

    header('Content-Type: text/html; charset=utf-8');
    session_start();
?> 
```

显示页面(private.php)

```
<?php
    require("common.php");
    if(empty($_SESSION['user']))
    {
        header("Location: login.php");
        die("Redirecting to login.php");
    }
?>
<?php
    $query = "
        SELECT
            id,
            username,
            email,
            task,
            task_name
        FROM users
    ";

    try
    {
        $stmt = $db->prepare($query);
        $stmt->execute();
    }
    catch(PDOException $ex)
    {
        die("Failed to run query: " . $ex->getMessage());
    }
    $rows = $stmt->fetchAll();
?>
<h1>Memberlist</h1>
<table border='1'>
    <tr>
        <th>User</th>
        <th>E-Mail Address</th>
        <th>Task Name</th>
        <th>Task Description</th>

    </tr>
    <?php foreach($rows as $row): ?>
        <tr>
            <td><?php echo htmlentities($row['username'], ENT_QUOTES, 'UTF-8'); ?></td>
            <td><?php echo htmlentities($row['email'], ENT_QUOTES, 'UTF-8'); ?></td>
            <td><?php echo htmlentities($row['task_name'], ENT_QUOTES, 'UTF-8'); ?></td>
            <td><?php echo htmlentities($row['task'], ENT_QUOTES, 'UTF-8'); ?></td>

        </tr>
    <?php endforeach; ?>
</table><br /> 
```

我想做的是显示当前登录用户的数据。例如，当用户 1 登录其个人资料中的每个详细信息时，lng 用户名、电子邮件、任务和任务名称将被显示，但在我的代码中它将显示每个人的详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:57:58.913

您的`select`查询有误

```
$query = "
        SELECT
            id,
            username,
            email,
            task,
            task_name
        FROM users WHERE username = '".$_SESSION['user']['username']."'
    "; 
```

不需要`foreach`

```
<tr>
    <td><?php echo htmlentities($rows['username'], ENT_QUOTES, 'UTF-8'); ?></td>
    <td><?php echo htmlentities($rows['email'], ENT_QUOTES, 'UTF-8'); ?></td>
    <td><?php echo htmlentities($rows['task_name'], ENT_QUOTES, 'UTF-8'); ?></td>
    <td><?php echo htmlentities($rows['task'], ENT_QUOTES, 'UTF-8'); ?></td>
</tr> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:02:47.290

在您的 private.php 页面中，将查询更改为：

```
$query = "
        SELECT
            id,
            username,
            email,
            task,
            task_name
        FROM users 
        WHERE id = '".$_SESSION['user']['id']."'
    "; 
```

这里`$_SESSION['user']['id']`包含登录用户的 id，所以只获取该用户`WHERE`在 mysql 中使用的详细信息。

# iphone - 手势识别器在子视图上不起作用

> ID：15607886
> 
> 赞同：13
> 
> 时间：2013-03-25T04:53:33.950
> 
> 标签：iphone, ios, objective-c, ipad, cocoa-touch

起初，我将 UISwipeGestureRecognizer 附加到图像视图，无法触发动作方法。然后我将 UISwipeGestureRecognizer 附加到视图控制器的视图，效果很好。我不知道为什么。这是不起作用的代码

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    UISwipeGestureRecognizer *swipeRight=[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeRightAction)];
    swipeRight.direction=UISwipeGestureRecognizerDirectionRight;
    //imageView is an outlet of image view
    [imageView addGestureRecognizer:swipeRight];
} 
```

这是运行良好的代码

```
- (void)viewDidLoad
    {
        [super viewDidLoad];
        // Do any additional setup after loading the view.

    UISwipeGestureRecognizer *swipeRight=[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeRightAction)];
    swipeRight.direction=UISwipeGestureRecognizerDirectionRight;
    //imageView is an outlet of image view
    [self.view addGestureRecognizer:swipeRight];
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-25T04:57:06.430

将此代码添加到 imageView：

```
imageView.userInteractionEnabled = YES; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T05:05:12.187

试试这个 `[imageView setUserInteractionEnabled:YES];`

# c# - XNA 4 C# 游戏状态 - 菜单状态首先出现

> ID：15607888
> 
> 赞同：0
> 
> 时间：2013-03-25T04:53:38.403
> 
> 标签：c#, xna, xna-4.0

我试图让我的 SplashScreen 状态首先出现，这在我使用我的 Thread.Sleep(2300); 之前起作用。但现在它总是先进入菜单状态。我需要帮助让它在菜单之前进入 SplashScreen 状态并等待 2300 毫秒然后进入菜单状态。

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;
using System.Threading;

namespace Obsession
{
    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        enum _gameState { Splashscreen, Menu, Options, DLC, Playing , Exit };
        _gameState currentState;

        Vector2 caravanPos = new Vector2(0, 0);
        Texture2D caravanSplash;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize()
        {
            Window.Title = "Obsession DB 1.0";
            graphics.PreferredBackBufferWidth = 800;
            graphics.PreferredBackBufferHeight = 600;

            //if (graphics.IsFullScreen != true)
                //graphics.ToggleFullScreen();

            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            caravanSplash = this.Content.Load<Texture2D>("data/textures/splash1");

            currentState = _gameState.Splashscreen;
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>`
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            switch (currentState)
            {
                case _gameState.Splashscreen:
                    {
                        SplashScreenUpdate();
                        break;
                    }
                case _gameState.Menu:
                    {
                        MenuUpdate();
                        break;
                    }
            }

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            spriteBatch.Begin();

            switch (currentState)
            {
                case _gameState.Splashscreen:
                    {
                        SplashScreenDraw();
                        break;
                    }
                case _gameState.Menu:
                    {
                        MenuDraw();
                        break;
                    }
            }

            spriteBatch.End();

            base.Draw(gameTime);
        }

        private void SplashScreenUpdate()
        {
            Thread.Sleep(2300);
            currentState = _gameState.Menu;
            /*for (int i = 0; i < 5; i++)
            {
                if (Keyboard.GetState().IsKeyDown(Keys.A) == true)
                {
                    Thread.Sleep(3000);
                    currentState = _gameState.Menu;
                    return;
                }
            }*/
        }

        private void SplashScreenDraw()
        {
            spriteBatch.Draw(caravanSplash, caravanPos, Color.White);
        }

        private void MenuUpdate()
        {
            if (Keyboard.GetState().IsKeyDown(Keys.A) == true)
            {
                currentState = _gameState.Splashscreen;
                return;
            }
        }

        private void MenuDraw()
        {
            GraphicsDevice.Clear(Color.White);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:00:42.403

不做`Thread.Sleep();`，而是`if(gameTime.TotalGameTime.TotalMilliseconds > 2300)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T00:25:27.633

同意 MrME 最好在 Initialize 方法中设置 currentState 。

它总是进入菜单而不是你的飞溅的原因是因为`Thread.Sleep(2300)`.

XNA 首先调用 update 方法，然后是 draw 方法。您的应用程序永远不会使用 draw 方法，因为您的 update 方法会使您进入睡眠状态，然后切换到菜单状态。正如 Ben 在他的回答中所说，您可以使用`if(gameTime.TotalGameTime.TotalMilliseconds > 2300)`来执行该条件，一旦该条件被触发，游戏就会更新。

我认为最好解释它为什么坏了，而不仅仅是如何修复它。

# ios - 在 iPhone 上将 .caf 转换为 .mp3

> ID：15607889
> 
> 赞同：2
> 
> 时间：2013-03-25T04:53:43.733
> 
> 标签：ios, objective-c, compression, core-audio

我意识到以前有人问过这个问题，但我还没有看到适合我需要的答案。基本上我有 .caf 格式的全长歌曲，但我需要能够从服务器上传/下载它们。在 iPhone 上进行压缩（压缩到 .mp3 或 .wav 之类的文件）然后将它们发送到服务器是否可行？我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:20:59.290

请参阅[AudioConverterServices](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioConverterServicesReference/Reference/reference.html) .. 执行魔术的函数是[AudioConverterNew](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioConverterServicesReference/Reference/reference.html#//apple_ref/doc/uid/TP40007943-2-SW7) .. 但是请注意，您只能从可变比特率 (VBR) 文件转换为 PCM（无损格式），以及从 PCM 转换为 VBR .. 所以在您的情况下您必须将文件从 to 转换`.caf`为`PCM`，然后从`PCM`to`.mp3`或您想要的任何格式。

有关说明进行音频转换所需的所有步骤的综合示例.. 下载《[学习核心音频](https://rads.stackoverflow.com/amzn/click/com/0321636848)》一书 的[免费示例代码](http://www.informit.com/store/learning-core-audio-a-hands-on-guide-to-audio-programming-9780321636843)。您需要第 6 章的音频转换示例代码。（任何认真对待核心音频的人都应该买那本书）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T06:46:29.857

iPhone 上的 Mp3 编码需要查找和使用非 Apple 提供的库。没有任何内置功能可以进行 mp3 编码，只有 AAC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-11T16:01:24.627

使用 Lame，您可以做到这一点。没有默认功能。它还将减小文件大小。对于 60 秒的音频文件 .caf 将需要大约 5mb - 10mb 但在转换为 .mp3 后将需要 0.6mb 到 0.7mb。在新 xocde 的构建设置中将“启用位码”设置为“否”，否则会出错。对于示例代码，请使用此[LINK](https://github.com/rpplusplus/iOSMp3Recorder)。

# msbuild - 阻止 MSDeploy（有选择地）删除目标 IIS 服务器上的文件夹

> ID：15607890
> 
> 赞同：6
> 
> 时间：2013-03-25T04:53:57.393
> 
> 标签：msbuild, teamcity, msdeploy

我有一个 IIS Web 应用程序，其结构大致类似于：

```
wwww.mysite.com
  file1.asp
  file2.asp
  \DotNet
    file3.aspx
    file3.aspx 
```

我们正在设置 TeamCity 进行自动部署。我有一个部署到 \DotNet 文件夹（aspx 文件）的 MSBuild 构建步骤，在单独的构建配置中，我有另一个部署到根目录（asp 文件）的 MSBuild 构建步骤。

我想允许 MSDeploy 删除不必要的文件，例如，如果我从 VCS 中删除 file2.asp，我希望它从目标 IIS 服务器中删除它。

但是，我不希望它擦除 \DotNet 子文件夹。

我可以得到比命令行开关“SkipExtraFilesOnServer”更精细的东西，还是这是一个全有或全无的交易？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T03:48:51.833

事实证明，我的问题的答案比我预期的要简单得多

当通过 MSBuild 使用 MSDeployPublish 目标部署到应用程序的根文件夹时，默认情况下，会删除恰好位于目标 IIS 服务器**文件系统上的额外子文件夹。**

为了避免这种情况，我只是将我的 DotNet 文件夹的内容移动到 C:\InetPub 下的一个完全独立的位置，但在 IIS Mgr 下保留了我原来的虚拟文件夹/应用程序结构。当然！

现在我可以随心所欲地发布到任一位置，并且一个不会尝试删除另一个，因为一个不再是另一个的文件系统子文件夹。

如果有的话 - 这突出了我们早期的文件夹结构是多么原始，以及我没有意识到的愚蠢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T05:49:47.657

我不完全确定你在这里寻找什么。您是否尝试从 dotnet 子文件夹中删除所有文件但保留该文件夹？您是否试图让删除操作永远不会从 dotnet 文件夹中删除任何内容？msdeploy 同步操作非常聪明。msdeploy 将移动所有标记的项目资产，因此假设您不删除 dotnet 文件夹中的文件，那么您应该没问题。

如果您只想免除 dotnet 文件夹的任何删除操作，就好像它根本不属于您的项目，但它位于 Web 服务器的子文件夹中并且您不想触摸它，那么我建议使用跳过msdeploy 中带有通配符的选项。我只将它用于文件，但它也适用于文件夹。它是这样的：

```
 -skip:objectName=filePath,absolutePath=app_offline\.* 
```

这里有文档： [http ://technet.microsoft.com/en-us/library/dd569089%28WS.10%29.aspx](http://technet.microsoft.com/en-us/library/dd569089%28WS.10%29.aspx)

在页面中搜索 -skip:skipAction=

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-02T22:15:53.097

您还可以添加一个[`skip`](http://technet.microsoft.com/en-us/library/dd569089(v=ws.10).aspx)带有您希望*不*同步的文件夹名称的设置，例如在以下 msdeploy 调用中：

```
msdeploy
  -verb:sync 
  -source:contentPath="C:\Data\Personal\My Repo\MSDeploy\MultiSkip\Source" 
  -dest:contentPath="C:\Data\Personal\My Repo\MSDeploy\MultiSkip\Dest" 
  -skip:objectName=dirPath,absolutePath="DotNet" 
```

[我以[这个问题](https://stackoverflow.com/q/4088360/173497)的答案为例。]

# asp.net - ASP。NET MVC3 - 如何在帖子中显示所有评论

> ID：15607891
> 
> 赞同：0
> 
> 时间：2013-03-25T04:54:06.657
> 
> 标签：asp.net, asp.net-mvc-3, linq

我是初学者 ASP.net，我想在帖子中显示所有评论。PostController 中的 Detail() 方法只显示帖子内容，我不知道如何处理 Detail() 方法来显示帖子中的评论。

希望有人可以帮助我，非常感谢。

我有两个模型

```
public class Post
{
    public int PostID { get; set; }
    public string Title{ get; set; }
    public string Content{ get; set; }

}
public class Comment
{
    public int CommentID { get; set; }
    public int PostID { get; set; }
    public string Content { get; set; }
} 
```

这是后控制器

```
public class PostController : Controller
{
   //////
     public ViewResult Detail(int id )
     {
        Post viewpost= (repository.Posts.Single(p => p.PostID == id));

        return View(viewpost);
     }
    ////////////////
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:03:17.027

莫拉卢斯有一个很好的答案。如果您不想更改您的 Post 模型以使其评论具有导航属性，如果您无法控制或其他什么，那么您将不得不制作类似 ViewPostModel 的东西

```
public class ViewPostModel
{
    public Post Post { get; set; }
    public List<Comment> Comments { get; set; }
} 
```

然后，您必须在存储库中查询这两个列表：

```
public class PostController : Controller
{
     public ViewResult Detail(int id )
     {
        ViewPostModel viewpost = new ViewPostModel();
        viewPost.Post = repository.Posts.Single(p => p.PostID == id);
        viewPost.Comments = repository.Comments.Where(c=> c.PostID = id).ToList();
        return View(viewpost);
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:59:20.647

所以首先你应该有一个从帖子到评论的导航属性。像这样的东西：

```
public class Post
{
    public int PostID { get; set; }
    public string Title{ get; set; }
    public string Content{ get; set; }

    public virtual IEnummrable<Comment> Comments {get; set;}
} 
```

请注意，如果您使用 DB-First 来执行此操作，则应编辑 EDMX

然后像这样从存储库中获取评论：

```
public ViewResult Detail(int id )
{
   Post viewpost= (repository.Posts.Include("Comments").Single(p => p.PostID == id));
   return View(viewpost);
} 
```

在您看来，迭代您的评论并像这样显示它们

```
@foreach (var comment in Model.Comments)
{
    @comment.Content
} 
```

**编辑：** 以上所有内容仅在您使用 EF\ Linq-2-SQL 时才相关（感谢@tostringtheory）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:38:07.787

您也可以使用 ViewData 将评论放到 View 中。

例如：操作：ViewData["Comments"] = repository.Comments.Where(c=> c.PostID = id).ToList();

查看： var comments =ViewData["Comments"] as List; ...您可以使用 var-comments

# c# - SSIS变量表达式上的子字符串

> ID：15607893
> 
> 赞同：0
> 
> 时间：2013-03-25T04:54:17.683
> 
> 标签：c#, variables, ssis, substring

我有这样的 SSIS 变量表达式，

```
@[System::PackageName]+","+    
@[System::SourceName]+","+    
(DT_STR,15,1252) @[System::ErrorCode]+","+    
@[System::ErrorDescription]+","+    
(RIGHT((DT_WSTR,4)
DATEPART("yyyy",GetDate()),4)+"/"+    
RIGHT("0"+(DT_WSTR , 2)
 DATEPART("mm", GetDate()),2)+"/"+    
RIGHT("0"+(DT_WSTR,2)
DATEPART("dd",GetDate()),2)+"_"+    
RIGHT("0"+(DT_WSTR,2)
DATEPART("HH",GetDate()),2)+":"+    
RIGHT("0"+(DT_WSTR,2)
DATEPART("MM",GetDate()),2)+":"+    
RIGHT("0"+(DT_WSTR,2)
DATEPART("SS",GetDate()),2))+","+
 @[System::MachineName] 
```

现在我想从中获取一些`@[System::ErrorDescription]`位于之前的字符串，这是值`at`的示例`@[System::ErrorDescription]`

`System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.IO.DirectoryNotFoundException: Could not find a part of the path 'D:\blablablabl\yes.txt'. at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy) at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy) at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize) at System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials) at System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn) at System.Xml.XmlTextReaderImpl.OpenUrlDelegate(Object xmlResolver) at System.Threading.CompressedStack.runTryCode(Object userData) at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData) at System.Threading.CompressedStack.Run(CompressedStack compressedStack, ContextCallback callback, Object state)`

我所做的是在我的变量表达式上编写子字符串代码：

`SUBSTRING(@[System::ErrorDescription], 1, FINDSTRING(@[System::ErrorDescription], "at", 1)-1)+","+`

但它总是给我一个错误，那个子字符串值不能为负，我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:18:45.340

如果 的结果`FINDSTRING(@[System::ErrorDescription], "at", 1)`为零（即未找到字符串），则子字符串表达式的最后一个参数变为`-1`. 这是一个常见的问题。

也许您可以尝试评估它是否为零，如果不是，则仅使用 Findstring。为了清楚起见，我已经拆分了下面的表达式，但它应该都在一行上。我没有要测试的 SSIS，但看看它是否有效。

我不认为你已经发布了你的完整表达，但这应该给你的想法。

```
FINDSTRING(@[System::ErrorDescription], "at", 1)==0
   ?
"Nothing Found"
   :
SUBSTRING(
    @[System::ErrorDescription], 
    1, 
    FINDSTRING(@[System::ErrorDescription], "at", 1)-1
) 
```

这是一个描述条件的链接：

[http://msdn.microsoft.com/en-us/library/ms141680.aspx](http://msdn.microsoft.com/en-us/library/ms141680.aspx)

我不相信这是完整的故事，但试试吧，它会冲掉你的下一个问题。

# javascript - 在 html 中，window.onpopstate 在加载和返回箭头时都会触发 - 如何知道？

> ID：15607894
> 
> 赞同：2
> 
> 时间：2013-03-25T04:54:19.033
> 
> 标签：javascript, html, dom, popstate

在我的页面上，我有一个听众`window.onpopstate`

我希望捕获用户的后退箭头并运行我自己的例程

但`window.onpopstate`在 1) 初始加载页面、2) 重新加载以及 3) 用户按下后退箭头时触发

我*可以*创建一个状态空间标志并检查它。但更自然的是从事件本身来确定发生了什么。

有什么内在方法可以确定事件是从加载按钮还是后退按钮触发的？当我检查这两个事件时，它们看起来几乎相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:23:35.750

当用户在同一文档的两个历史条目之间导航时触发该`window.onpopstate`事件，即每次活动历史条目更改时。

单击后退按钮、页面加载以及页面重新加载时会触发它（Firefox 在页面加载时不会发出此事件）。因此，您看到的行为是有意的。

而且，对于后退按钮，我想没有任何方法可以使用此事件检测后退按钮单击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-22T02:21:25.327

您可以弥补浏览器中的 popstate 错误。当有人使用我的编辑器并点击 Backspace 按钮时，有时会触发导航（这不应该是默认设置，但不是每个人都有资格担任他们的职位）所以我取消它（是的，你可以）然后用`history.go(1);`. 我不会在这里发布依赖相关的代码，因为不同的人会在不同的上下文中需要它，但它构成了你需要的基础。

```
window.onpopstate = function(e)
{
 if (id_('editor') && is_node_parent(document.activeElement,id_('editor')))
 {
  e.preventDefault();
  history.go(1);
 }
} 
```

# c# - 选中gridview中的复选框是否已选中？

> ID：15607897
> 
> 赞同：3
> 
> 时间：2013-03-25T04:54:27.123
> 
> 标签：c#

我有 gridview，其中包含作为模板字段的复选框。我已经很努力了，但我仍然无法获得想要的结果，也就是说，如果复选框被选中，则执行 action-1，否则执行 action-2，但每次它都在执行 action-2。下面是我的代码，我几乎不需要你的帮助。

网格视图代码：

```
<asp:GridView ID="final" runat="server" AutoGenerateColumns="False";>
        <Columns>
<asp:BoundField DataField="name" HeaderText="Employee Name" SortExpression="date" />
<asp:BoundField DataField="ldate" HeaderText="Date Of Leave" SortExpression="ldate"
                   />
<asp:TemplateField HeaderText="Half/Full">
   <ItemTemplate>
            <asp:RadioButtonList ID="RadioButtonList1" runat="server">
                            <asp:ListItem Enabled="true" Value="Half">Half</asp:ListItem>
                            <asp:ListItem Enabled="true" Value="Full">Full</asp:ListItem>
           </asp:RadioButtonList>
   </ItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="Approve">
    <ItemTemplate>
     <asp:CheckBox ID="CheckBox1" runat="server" />
    </ItemTemplate>
</asp:TemplateField>
        </Columns>
</asp:GridView> 
```

我为检查收音机和复选框所做的代码：

```
DataTable dtable = new DataTable();
dtable.Columns.Add(new DataColumn("Date", typeof(DateTime)));
dtable.Columns.Add(new DataColumn("Half/Full", typeof(float)));
dtable.Columns.Add(new DataColumn("Status", typeof(string)));
Session["dt"] = dtable;
SqlConnection conn = new SqlConnection();
conn.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["leave"].ConnectionString;
conn.Open();
foreach (GridViewRow gvrow in final.Rows)
{
     dtable=(DataTable)Session["dt"];
     CheckBox chk = (CheckBox)gvrow.FindControl("CheckBox1");
     if (chk != null & chk.Checked)
     {
          RadioButtonList rButton = (RadioButtonList)gvrow.FindControl("RadioButtonList1");
          if (rButton.SelectedValue == "Half")
          {
               //perform action-1
          }
          else
          {
              //perform action-1
          }
     }
  else
     {
          perform action-2
     }
} 
```

每次它进入最后一个其他...为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T04:55:53.603

使用逻辑和运算符`&&`而不是按位运算`&`符来组合 if 语句中的条件。

*改变*

```
if (chk != null & chk.Checked) 
```

*至*

```
if (chk != null && chk.Checked) 
```

**根据OP的评论进行**编辑****

 **您需要检查是否以未在回发时绑定网格的方式绑定网格。

```
if(!Page.IsPostBack)
{
       //bind here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:52:50.267

确保您没有在页面加载时再次绑定 gridview，如果是，则必须应用 IsPostback 检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:09:14.420

尝试这个

```
<asp:CheckBox ID="CheckBox1" runat="server"  OnCheckedChanged="CheckBox1_CheckedChanged"  AutoPostBack="true"/>

protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
{
    CheckBox chk = (CheckBox)sender;
    GridViewRow gr = (GridViewRow)chk.Parent.Parent;
    RadioButtonList RadioButtonList1 = (RadioButtonList)gr.FindControl("RadioButtonList1");
    if (RadioButtonList1 != null)
    {
        RadioButtonList1.Items.FindByText("Full").Selected = true;
    }       
} 
```**

# machine-learning - 数据的随机扰动以获得神经网络的训练数据

> ID：15607900
> 
> 赞同：2
> 
> 时间：2013-03-25T04:54:29.980
> 
> 标签：machine-learning, artificial-intelligence, neural-network

我正在使用神经网络进行土壤光谱分类，我的教授从他的实验室获得了数据，其中包括从波长 1200 nm 到 2400 nm 的光谱反射率。他只有 270 个样本。

由于训练数据非常少（只有 270 个样本），我一直无法将网络训练的准确率超过 74%。我担心我的 Matlab 代码不正确，但是当我在 Matlab 中使用神经网络工具箱时，我得到了相同的结果……准确率不超过 75%。

当我和我的教授谈论这件事时，他说他没有更多的数据，但要求我对这些数据进行随机扰动以获得更多数据。我在网上对数据的随机扰动进行了研究，但结果不足。

有人可以指出我对 270 个数据样本执行随机扰动的正确方向，以便我可以获得更多数据吗？

另外，由于这样做，我将构建“假”数据，我看不出神经网络会变得更好，因为神经网络不是使用实际的真实有效数据来训练网络吗？

谢谢，

费萨尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:31:06.347

我认为试图制造更多的数据是个坏主意：除非你知道要从中采样的数据的真实分布，否则你不能创建任何信息内容比你已经拥有的更高的东西。但是，如果您这样做了，您将能够使用[贝叶斯最佳错误率](http://en.wikipedia.org/wiki/Ensemble_learning#Bayes_optimal_classifier)进行分类，这是不可能被击败的。

相反，我要看的是您是否可以更改神经网络的参数以提高性能。使用少量训练数据立即浮现在脑海的是您的权重正则化器（您是否甚至使用正则化权重），如果您愿意，可以将其视为权重的先验。如果您使用简单的线性激活，我还会考虑更改激活函数，以及隐藏节点的数量（示例很少，我会使用很少，甚至完全绕过隐藏层，因为这很难学习与有限数据的非线性相互作用）。

虽然我通常不推荐它，但你可能应该使用交叉验证来设置这些超参数，因为它们的大小有限，因为你将从 10-20% 的测试集大小中获得无益的洞察力。但是，您可能会为最终测试保留 10-20%，以免结果偏向于您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T14:06:41.373

向数据添加随机噪声的最简单方法是应用高斯噪声。

我想您的措施有与之相关的错误（没有错误的措施几乎没有意义）。对于每个测量值 M+-DeltaM，您可以使用 N(M,DeltaM) 生成一个新数字，其中 n 是[正态分布](http://en.wikipedia.org/wiki/Normal_distribution)。

这将添加新点作为先前点的实验噪声，并将增加考虑分类测量中的实验误差的帮助。但是，我不确定是否可以提前知道这会有多大帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T11:25:07.130

首先，一些一般性建议：

1.  将每个输入和输出变量标准化为 [0.0, 1.0]
2.  使用前馈 MLP 时，尝试使用 2 个或更多隐藏层
3.  确保每个隐藏层的神经元数量足够大，以便网络能够处理数据的复杂性

如果模型的复杂性足够，则应该始终可以在训练集上达到 100% 的准确度。但要小心，100% 的训练集准确率并不一定意味着你的模型在看不见的数据上表现良好（泛化性能）。

如果您添加的扰动在实践中发生（或至少类似的扰动），则数据的随机扰动可以提高泛化性能。这是可行的，因为这意味着让您的网络了解数据如何看起来不同但仍属于给定标签。

在图像分类的情况下，您可以旋转、缩放、噪声等输入图像（输出自然保持不变）。您需要弄清楚什么样的扰动可能适用于您的数据。对于某些问题，这很困难或不会产生任何改进，因此您需要尝试一下。如果这不起作用，并不一定意味着您的实现或数据已损坏。

# ruby - Thor 启动 Jekyll 然后在浏览器中打开页面

> ID：15607901
> 
> 赞同：0
> 
> 时间：2013-03-25T04:54:31.597
> 
> 标签：ruby, thor

嗨，我想让 Thor 启动一个服务器 - Jekyll / Python / PHP 等，然后打开浏览器

然而，开始是一个阻塞任务。

有没有办法在 Thor 中创建子进程；或产生一个新的终端窗口 - 看不到，谷歌没有给我任何合理的答案。

我的代码

```
##
# Project Thor File
#
# @use thor list
##
class IanWarner < Thor

##
# Open Jekyll Server
#
# @use thor ian_warner:openServer
##
desc "openServer", "Start the Jekyll Server"
def openServer

    system("clear")
    say("\n\t")

    say("Start Server\n\t")
    system("jekyll --server 4000 --auto")

    say("Open Site\n\t")
    system("open http://localhost:4000")

    say("\n")

end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:16:06.717

看起来你把事情搞砸了。`Thor`通常是一个强大的 CLI 包装器。CLI 本身通常是单线程的。

您有两个选择：要么创建不同的`Thor`后代并将它们作为不同的线程/进程运行，强制`open`线程/进程等待直到`jekyll start`正在运行（首选）或破解`system("jekyll --server 4000 --auto &")`（注意末尾的 & 符号。）

后者会起作用，但你仍然要控制服务器的启动（这可能需要很长时间。）实现这一点的第二个丑陋的黑客是依靠`sleep`：

```
say("Start Server\n\t")
system("jekyll --server 4000 --auto &")

say("Wait for Server\n\t")
system("sleep 3")

say("Open Site\n\t")
system("open http://localhost:4000") 
```

**Upd：**很难想象你想要产出什么。如果你想让你的 jekyll 服务器在你的脚本完成后继续运行：

```
 desc "openServer", "Start the Jekyll Server"
  def openServer
    system "clear"
    say "\n\t"

    say "Starting Server…\n\t"
    r, w = IO.pipe
    # Jekyll will print it’s running status to STDERR
    pid = Process.spawn("jekyll --server 4000 --auto", :err=>w) 
    w.close
    say "Spawned with pid=#{pid}"
    rr = ''
    while (rr += r.sysread(1024)) do
     break if rr.include?('WEBrick::HTTPServer#start')
    end 
    Process.detach(pid) # !!! Leave the jekyll running

    say "Open Site\n\t"
    system "open http://localhost:4000"
  end 
```

如果你想在页面打开后关闭 jekyll，你也需要为它生成`open`调用[`Process.waitpid`](http://www.ruby-doc.org/core-2.0/Process.html#method-c-waitpid)。

# python - Python 模块 os.chmod(file, 664) 不会将权限更改为 rw-rw-r-- 但 -w--wx----

> ID：15607903
> 
> 赞同：128
> 
> 时间：2013-03-25T04:54:33.987
> 
> 标签：python, file, permissions, chmod

最近我在使用 Python 模块 os，当我试图更改文件的权限时，我没有得到预期的结果。比如我打算把权限改成rw-rw-r--，

```
os.chmod("/tmp/test_file", 664) 
```

所有权权限实际上是-w--wx--- (230)

```
--w--wx--- 1 ag ag 0 Mar 25 05:45 test_file 
```

但是，如果我在代码中将 664 更改为 0664，结果正是我所需要的，例如

```
os.chmod("/tmp/test_file", 0664) 
```

结果是：

```
-rw-rw-r-- 1 ag ag 0 Mar 25 05:55 test_file 
```

任何人都可以帮助解释为什么前导 0 对获得正确结果如此重要吗？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-03-25T05:01:14.547

[在另一个论坛](http://ubuntuforums.org/showthread.php?t=889326)上找到了这个

> 如果您想知道为什么前导零很重要，那是因为权限被设置为八进制整数，并且 Python 自动将具有前导零的任何整数视为八进制。所以 os.chmod("file", 484) （十进制）会给出相同的结果。

你正在做的是通过`664`八进制是`1230`

在你的情况下，你需要

```
os.chmod("/tmp/test_file", 436) 
```

* * *

[更新] 注意，对于 Python 3，您的前缀为 0o（零哦）。例如，`0o666`

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2013-07-21T20:50:14.463

所以对于那些想要类似于以下语义的人：

```
$ chmod 755 somefile 
```

利用：

```
$ python -c "import os; os.chmod('somefile', 0o755)" 
```

如果您的 Python 版本早于 2.6：

```
$ python -c "import os; os.chmod('somefile', 0755)" 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-04-09T10:45:46.770

**使用权限符号 ( `stat.S_I*`) 而不是原始八进制数**

如果您使用更具语义命名的权限符号而不是原始幻数，则可以避免您的问题，例如`664`：

```
#!/usr/bin/env python3

import os
import stat

os.chmod(
    'myfile',
    stat.S_IRUSR |
    stat.S_IWUSR |
    stat.S_IRGRP |
    stat.S_IWGRP |
    stat.S_IROTH
) 
```

这记录在[https://docs.python.org/3/library/os.html#os.chmod](https://docs.python.org/3/library/os.html#os.chmod)并且名称与[POSIX C API](https://stackoverflow.com/questions/1780599/what-is-the-meaning-of-posix/31865755#31865755)相同，后者也存在于`man 2 stat`and `man 2 chmod`：

```
S_IRUSR  (00400)  read by owner
S_IWUSR  (00200)  write by owner
S_IXUSR  (00100)  execute/search by owner
S_IRGRP  (00040)  read by group
S_IWGRP  (00020)  write by group
S_IXGRP  (00010)  execute/search by group
S_IROTH  (00004)  read by others
S_IWOTH  (00002)  write by others
S_IXOTH  (00001)  execute/search by others 
```

另一个优点是文档中提到的更大的可移植性：

> 注意：虽然 Windows 支持`chmod()`，但您只能使用它设置文件的只读标志（通过`stat.S_IWRITE`and`stat.S_IREAD`常量或相应的整数值）。所有其他位都被忽略。

`chmod +x`在以下位置进行了演示：[您如何在 python 中执行简单的“chmod +x”？](https://stackoverflow.com/questions/12791997/how-do-you-do-a-simple-chmod-x-from-within-python/55591471#55591471)

在 Ubuntu 16.04、Python 3.5.2 中测试。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-03-25T05:01:30.653

前导`0`表示这是**八进制**常量，而不是十进制常量。你需要一个八进制来改变文件模式。

权限是一个位掩码，例如，`rwxrwx---`是`111111000`二进制的，并且很容易将位按 3 分组以转换为八进制，而不是计算十进制表示。

`0644`（八进制）是`0.110.100.100`二进制的（为了便于阅读，我添加了点），或者，你可以计算，`420`十进制。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-02-04T07:54:36.690

如果您已将所需权限保存到字符串，请执行

```
s = '660'
os.chmod(file_path, int(s, base=8)) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-22T02:10:37.517

@mc.dev 的答案是最好的答案，我最终利用它来制作以下函数包装器以供重用。感谢您的分享。

```
def chmod_digit(file_path, perms):
    """
    Helper function to chmod like you would in unix without having to preface 0o or converting to octal yourself.
    Credits: https://stackoverflow.com/a/60052847/1621381
    """
    os.chmod(file_path, int(str(perms), base=8)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-08T14:26:53.163

在我看来，使用 stat.* 位掩码确实是最便携和最明确的方式。但另一方面，我经常忘记如何最好地处理它。因此，这是一个屏蔽“组”和“其他”权限并保持“所有者”权限不变的示例。使用位掩码和减法是一种有用的模式。

```
import os
import stat
def chmodme(pn):
    """Removes 'group' and 'other' perms. Doesn't touch 'owner' perms."""
    mode = os.stat(pn).st_mode
    mode -= (mode & (stat.S_IRWXG | stat.S_IRWXO))
    os.chmod(pn, mode) 
```

# git - 尝试检索 qt5 源代码以在 Windows 下编译时 Git 失败

> ID：15607905
> 
> 赞同：2
> 
> 时间：2013-03-25T04:54:43.613
> 
> 标签：git, qt

我正在尝试在 Windows 上构建 qt5。我正在按照“[从 Git 构建 Qt 5](http://qt-project.org/wiki/Building_Qt_5_from_Git) ”中的说明进行操作。

但是，我什至无法成功检索源代码。
初始命令“<code>git clone git://gitorious.org/qt/qt5.git qt5”成功完成。
但是下一个命令“perl init-repository”失败，错误信息如下：

```
 + git submodule init 0 [main] us 0 init_cheap: VirtualAlloc pointer is null, Win32 error 487
 AllocationBase 0×0, BaseAddress 0×68560000, RegionSize 0×170000, State 0×10000
 c:\program files (x86)\git\bin\sh.exe: *** Couldn’t reserve space for cygwin’s h
 eap, Win32 error 0
 git submodule init exited with status 256 at init-repository line 268\. Qt::InitRepository::exe(‘Qt::InitRepository=HASH ’, ‘git’, ‘sub
 module’, ‘init’) called at init-repository line 373 Qt::InitRepository::git_submodule_init(‘Qt::Init Repository=HASH’) called at init-repository line 569 Qt::InitRepository::run(‘Qt::InitRepository=HASH ’) called at i
 nit-repository line 590 
```

我正在使用 msysgit (Git for Windows) 1.8.1.2、Active Perl 5.16.3 和 Python 3.3.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:53:09.103

[检查问题 133](https://web.archive.org/web/20100913104703/http://code.google.com/p/msysgit/issues/detail?id=133)中推荐的 dll 修复是否有效：

> 好像没有解决，今天遇到了这个问题。dll修复确实有效。
> 
> 我正在使用 Git-1.7.8-preview20111206。

该修复程序用于下载[msys-1.0.dll](http://repo.or.cz/w/msysgit.git?a=blob_plain;f=bin/msys-1.0.dll;hb=msys)（[最初可在此处获得](https://web.archive.org/web/20121020075556/http://www.madwizard.org/electronics/articles/winavrvista)），并将其替换为`c:\yourPath\Git\bin`.

* * *

[评论中的](https://stackoverflow.com/questions/15607905/git-failed-when-attempting-to-retrieving-qt5-source-code-for-compiling-under-win/15609251#comment121675567_15609251)[coolhandle01](https://stackoverflow.com/users/2535386/coolhandle01)注释：

> 我将此报告给 git-for-windows（[问题 3369](https://github.com/git-for-windows/git/issues/3369)），但我认为这不是他们的错：换掉**让****我启动并运行**：我认为CLI 已经改变并且**Qt5`perl init-repository``git submodule update --init`**`git`没有跟上（为什么会他们，我猜？毕竟 Qt 6 已经发布了）。

# openlayers - 如何从openlayers中的图层获取所有功能？

> ID：15607908
> 
> 赞同：1
> 
> 时间：2013-03-25T04:54:57.637
> 
> 标签：openlayers, geoserver, wms

我处理geoserver和openlayers，

由于加载时间比矢量图层短，我使用 WMS 层进行显示。

我的问题是我无法在没有事件的情况下获得图层的所有功能，

确定我托盘“getfeatureinfo”，但它返回选定的点不是全部

我尝试使用矢量图层来获取特征，但除非我将它添加到地图中，否则它不起作用，

这将需要很长时间才能加载。！

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:37:00.333

我认为您可以尝试使用 getfeatureinfo 请求。

有这一行：

```
FEATURE_COUNT: 1, 
```

在这里而不是 1 你可以写你的功能的总数，但是这样你仍然需要点击地图来获取它们

我希望这有帮助

# javascript - 使用图像支架旋转图像

> ID：15607909
> 
> 赞同：1
> 
> 时间：2013-03-25T04:55:08.743
> 
> 标签：javascript, html, jquery-mobile

我创建了一个允许旋转图像和裁剪图像的应用程序。当我的第一个应用程序从原始图像开始时，裁剪图像就可以了。但问题是，当我旋转一次时，我的裁剪工具无法将图像的顶部、左侧、宽度、高度作为原始工具。我的代码如下。有人可以帮我解决这个问题吗？我的代码：

```
 <script>
$(document).ready(function($) {
        $("#crop").click(function(e){
        var Imgwidth = $('#face').width(), 
            Imgheight =  $('#face').height(),
            faceOffset = $('#face').offset(),
            imgOffset = $('#imgHolder').find('img').offset(), 
            imgX1 = faceOffset.left-imgOffset.left,
            imgY1 = faceOffset.top-imgOffset.top,
            imgX2 =imgX1+Imgwidth,
            imgY2 = imgY1+Imgheight;
        var imgNval = new Array();

          var imageSrc ='Penguins.jpg';    
          var imageObj=new Image();
          imageObj.src=imageSrc; 
        selx1 = imgX1;
        sely1 = imgY1;
        selx2 = imgX2;
        sely2 = imgY2;
        selw = Imgwidth;
        selh = Imgheight;
        console.log(imgX1);
        console.log(imgY1);
        /*console.log(imgX2);
        console.log(imgY2);*/

        /*Passing from one page to another page*/
        var canvas=document.getElementById("Mystore1");
        var context=canvas.getContext("2d");
        context.canvas.height = Imgheight;
        context.canvas.width=Imgwidth;
        context.drawImage(imageObj, imgX1, imgY1, selw, selh, 3, 3, Imgwidth,     canvas.height-5);
    });
});
</script>
<script type="text/javascript"> 
        var loop=0; 
         $(document).ready(function(e) {
            $("#left").click(function(){
                loop+=90;
                  $("#imageHolder").rotate({ animateTo:loop });
                });
             });
         $(document).ready(function(e) {
             $("#right").click(function(){
                 loop-=90;
                $("#imageHolder").rotate({animateTo:loop});
            });
         });
    </script>
    <script type="text/javascript">
            $(function(){
                $(".frame").draggable();
                        });
    </script>
  <canvas id="Mystore1">Your Browser Doesn't support HTML5 Canvas</canvas>
  <div id="imgHolder">
    <img src="Penguins.jpg" id="image"/> 
  </div>
  <div class="frame"><img src="face.jpg" width="80" height="80" id="face"     class="frames"/></div>
  <button id="crop">Crop Me</button>
  <button id="left">Left</button>
  <button id="right">Right</button>
</body>
</html> 
```

# trigger.io - Trigger.io 错误“/usr/bin/codesign 找不到身份”无法在设备上创建包或运行应用程序

> ID：15607912
> 
> 赞同：2
> 
> 时间：2013-03-25T04:55:23.173
> 
> 标签：trigger.io

尝试在设备上运行我的应用程序或创建 IPA 文件时遇到问题。

我按照[此处](http://docs.trigger.io/en/v1.4/best_practice/release_mobile.html#creating-provisioning-profiles)的步骤操作，尝试在 iOS 选项上运行时出现此错误：

```
[ERROR] Failed when running /usr/bin/codesign: FdawaDev: no identity found 
```

我试图让它用这个命令抛出终端

```
forge package ios --ios.profile.provisioning_profile Development.mobileprovision 
```

我收到了这个错误

```
 /Applications/TriggerToolkit.app/Contents/MacOS/forge -v package ios --ios.profile.provisioning_profile Development.mobileprovision
[   INFO] Forge tools running at version 3.3.43
[  DEBUG] Checking for update zip...
[  ERROR] Couldn't import generation code: No module named generate_dynamic
[  DEBUG] Traceback (most recent call last):
  File "/Applications/TriggerToolkit.app/Contents/MacOS/build-tools/forge/async.py", line 98, in run
    result = self._target(*self._args, **self._kwargs)
  File "/Applications/TriggerToolkit.app/Contents/MacOS/build-tools/forge/main.py", line 443, in package
    generate_dynamic = forge_build.import_generate_dynamic()
  File "/Applications/TriggerToolkit.app/Contents/MacOS/build-tools/forge/build.py", line 67, in import_generate_dynamic
    raise ForgeError("Couldn't import generation code: {0}".format(e))
ForgeError: Couldn't import generation code: No module named generate_dynamic 
```

我删除了 TriggerToolkit 并下载了最新的，再次安装它，我仍然得到同样的错误。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:15:10.597

第一个错误是配置问题：当您的钥匙串中不存在一个名为“FdawaDev”的 iOS 开发人员身份时，您指向的是一个 iOS 开发人员身份。

除非您有多个身份，否则您可以放心地将 Toolkit 中的“证书”本地配置设置留空。

如果您有多个身份，则应使用类似`iPhone Developer: James Brady`.

对于第二个问题，使用命令行工具时，您必须在执行运行或打包操作之前手动运行构建，例如：

```
% forge build ios && forge package ios 
```

# nlog - Nlog 异步和日志序列

> ID：15607930
> 
> 赞同：4
> 
> 时间：2013-03-25T04:57:31.093
> 
> 标签：nlog

在我的 nlog 配置中，我设置了

```
<targets async="true"> 
```

了解所有日志记录现在与我的应用程序工作流程异步发生。（而且我注意到性能有所提高，尤其是在电子邮件目标上）。这让我想到了日志序列。我知道对于异步，无法保证操作系统执行异步工作的顺序。因此，如果在我的 Web 应用程序中，多个请求进入同一个方法，每个请求都将它们的发生记录到 NLog，这是否真的意味着事件出现在我的日志目标中的顺序不一定是日志的顺序方法被各种请求调用？

如果是这样，这只是一个人必须忍受的异步的结果吗？或者我可以做些什么来让我的日志反映正确的顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:05:30.260

不幸的是，这是你必须忍受的。如果保持序列很重要，则必须同步运行它。

但是，如果您可以在日志消息中手动维护一个序列号，那么它可能是一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-05T21:22:29.813

NLog 不会通过激活`<targets async="true">`. 它只是激活一个内部队列，提供更好的突发处理并启用批量写入。

如果单个线程写入 1000 个 LogEvent，那么它们不会因为异步处理而变得乱序。

如果有 10 个线程，每个线程写入 1000 个 LogEvent，那么它们的日志记录将混合在一起。但是单个线程的 LogEvents 将按正确的顺序排列。

但请注意，`<targets async="true">`使用 overflowAction=Discard 作为默认值。另请参阅：[https ://github.com/nlog/NLog/wiki/AsyncWrapper-target#async-attribute-will-discard-by-default](https://github.com/nlog/NLog/wiki/AsyncWrapper-target#async-attribute-will-discard-by-default)

有关性能的更多详细信息。另见：[https ://github.com/NLog/NLog/wiki/performance](https://github.com/NLog/NLog/wiki/performance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-01T02:30:41.527

我知道这是旧的，我只是在增加 NLog 但如果您看到电子邮件客户端的性能提高，您可能只想为电子邮件目标断言 ASYNC？

# asp.net - 更新面板内的中继器不工作

> ID：15607931
> 
> 赞同：1
> 
> 时间：2013-03-25T04:57:36.827
> 
> 标签：asp.net

```
<asp:UpdatePanel ID="updatePanel" runat="server"> 
  <ContentTemplate> 
    <asp:Repeater ID="rptrtest" runat="server" OnItemCommand="rptrtest_ItemCommand" OnItemDataBound="rptrtest_ItemDataBound"> 
      <div> <asp:TextBox ID="txtName" runat="server"/> <asp:Button ID="btnSubmit" runat="server" Text="Submit" OnClick="btnSubmit_Click" > </asp:Button> 
      </div> 
    </asp:Repeater> 
  </ContentTemplate> 
</asp:UpdatePanel> 
```

在按钮单击事件上，我将名称发送到同一页面中的另一个用户控件。

我在更新面板中有中继器这整个事情在一个用户控制我的问题当我单击中继器内的提交按钮时没有异步回发发生请任何人帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:20:30.103

您的中继器缺少 ItemTemplate 标签

```
<asp:UpdatePanel ID="updatePanel" runat="server"> 
  <ContentTemplate> 
    <asp:Repeater ID="rptrtest" runat="server" OnItemCommand="rptrtest_ItemCommand" OnItemDataBound="rptrtest_ItemDataBound"> 
      <ItemTemplate>
        <div> <asp:TextBox ID="txtName" runat="server"/> <asp:Button ID="btnSubmit" runat="server" Text="Submit" OnClick="btnSubmit_Click" > </asp:Button> </div> 
      </ItemTemplate>
    </asp:Repeater> 
  </ContentTemplate> 
</asp:UpdatePanel> 
```

**参考**

*   [中继器 (MSDN)](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx)
*   [项目模板 (MSDN)](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemtemplate.aspx)

# c++ - Linux 中的看门狗定时器

> ID：15607933
> 
> 赞同：3
> 
> 时间：2013-03-25T04:57:55.530
> 
> 标签：c++, linux, embedded, embedded-linux

我想在 linux 中使用定时器中断来做软件 wathdog 定时器。如何在 linux 中生成定时器中断？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T06:46:08.393

如果您想使用定时器中断，请使用信号，尤其是`SIGALRM`. 您可以使用函数[alarm()](http://linux.die.net/man/2/alarm)请求超时。如果你想要 usec 粒度，你可以使用[ualarm()](http://linux.die.net/man/3/ualarm)。一旦达到超时，它将调用您之前定义的回调函数。

这是一个示例代码：

```
#include <signal.h>

void watchdog(int sig) 
{
  printf("Pet the dog\r\n");
  /* reset the timer so we get called again in 5 seconds */
  alarm(5);
}

/* start the timer - we want to wake up in 5 seconds */
int main()
{
  /* set up our signal handler to catch SIGALRM */
  signal(SIGALRM, watchdog);
  alarm(5);
  while (true) 
   ;
} 
```

您几乎没有其他选项可以实现看门狗：

1.  编写/使用内核驱动程序，它实际上用作看门狗，如果狗不是宠物（或被踢），则对设备应用硬重置
2.  使用[watchdog](http://linux.die.net/man/8/watchdog)，一个有趣的软件看门狗守护程序实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T06:47:26.950

应用程序级别不存在中断（只有内核管理它们，实际上它已经获得了很多定时器中断）。您可以拥有信号、计时器和延迟系统调用（尤其是`poll`or `nanosleep`）。阅读[高级 Linux 编程](http://advancedlinuxprogramming.com/)。

首先阅读[time(7)](http://man7.org/linux/man-pages/man7/time.7.html)手册页。然后[timer_create(2)](http://man7.org/linux/man-pages/man2/timer_create.2.html)，[poll(2)](http://man7.org/linux/man-pages/man2/poll.2.html)，[timerfd_create(2)](http://man7.org/linux/man-pages/man2/timerfd_create.2.html)，[setitimer(2)](http://man7.org/linux/man-pages/man2/setitimer.2.html)，[sigaction(2)](http://man7.org/linux/man-pages/man2/sigaction.2.html)，[nanosleep(2)](http://man7.org/linux/man-pages/man2/nanosleep.2.html)，[clock_gettime(2)](http://man7.org/linux/man-pages/man2/clock_gettime.2.html)等......

一些内核也可以配置为具有看门狗定时器......

# r - 在 R 中使用 htmlParse() 时缺少网站源代码

> ID：15607936
> 
> 赞同：0
> 
> 时间：2013-03-25T04:58:14.720
> 
> 标签：r, html-parsing

我正在尝试下载以下网站的完整源代码：http: [//www.carnegiehall.org/Students/](http://www.carnegiehall.org/Students/)。

我要提取的信息是以下部分：

> 卡内基音乐厅呈现
> 
> 2013 年 3 月 28 日，星期四 | 晚上 7:30
> 
> 劳伦斯布朗利
> 
> 马丁·卡茨
> 
> 赞克尔大厅

查看源代码显示该文本的以下代码块：

```
 <div class="info-col">
     <div class="up-lic">Carnegie Hall Presents</div>
     <div class="date">Thursday, March 28, 2013 | 7:30 PM</div> 
     <div class="clearfix"></div>
     <div class="title color">
         <a href="/Calendar/2013/3/28/0730/PM/Lawrence-Brownlee-Martin-Katz/">Lawrence Brownlee<BR>Martin Katz</a>
     </div>
     <div class="clearfix"></div>
     <div class="location"> Zankel Hall</div>
     <div class="clearfix"></div> 
     <br /> 
```

当我在 R 中运行以下命令时，这是缺失的：

```
htmlParse(getURL("http://www.carnegiehall.org/Students", .opts = curlOptions(followlocation=TRUE)), asText = TRUE) 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:18:01.033

似乎问题只是获取 URL（而不是解析它）。您正在寻找的信息没有过来，如下所示：

```
H <- getURL("http://www.carnegiehall.org/Students", .opts = curlOptions(followlocation=TRUE))

grepl("Zankel Hall", H)
# [1] FALSE

grepl("March 28", H)
# [1] FALSE 
```

* * *

如果您仔细查看 html，似乎日历正在通过脚本加载

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:59:47.627

```
library(XML)
hdata <- htmlParse('http://www.carnegiehall.org/Students/')
xpathSApply(hdata,'//div[@class="info-col"]/div/text()|//div[@class="info-col"]/div/a/text()')
#[[1]]
#Carnegie Hall Presents 

#[[2]]
#Thursday, March 28, 2013 | 7:30 PM 

#[[3]]

#[[4]]
#Lawrence Brownlee 

#[[5]]
#Martin Katz 

#[[6]]
# Zankel Hall 

#[[7]] 
```

# objective-c - Objective-C：按值、引用和地址返回值？

> ID：15607937
> 
> 赞同：-4
> 
> 时间：2013-03-25T04:58:18.420
> 
> 标签：objective-c, return-value

Obj-C 是否像 C/C++ 一样按值、引用和地址返回值？你能给我一些关于这方面的文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:17:55.720

Objective-C（不是 Objective-C++）中的所有内容都是按值传递和按值返回的。

要记住的重要一点是，`NSString *`例如，当您有一个返回值时，返回仍然是按值。返回的是对象指针，而不是对象。并且指针是按值返回的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:17:41.093

**Objective-C 支持按值传递参数。**

由于 Obj-c 是 C 的超集，所以 C 的每个特征都在这里。

每当您将任何值传递给方法时，您都会传递它的值。在少数情况下您通过引用传递，一个简单的示例是`**error`.

因此，您更改`int`或`NSObject`或任何子类的对象的值被调用的方法，它**不会反映在被调用方法的 value**中。您发送指向对象的指针，而不是对象本身

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:03:09.913

如果合适，通常通过指向对象的指针，但标量值是好的和合法的。

通过引用返回是不合法的，除了 Objective-c++；但我不知道。

在一个方法中，返回类型是括号中 +/- 之后的部分...

```
-(int)count; 
```

将是一个名为 count 的方法，它返回一个 int

# restructuredtext - 控制 restructuredText 表中的列宽

> ID：15607939
> 
> 赞同：2
> 
> 时间：2013-03-25T04:58:23.183
> 
> 标签：restructuredtext

我有一张看起来像的桌子

```
====================    =======
Name1                   Info1
Name2                   Info2
Slightly longer name    Info3
Name4                   Info4
====================    ======= 
```

并`rst2html`坚持使用以下宽度规范创建 HTML 表格：

```
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup> 
```

然后，这会使第`Slightly longer name`1 列中的内容换行成两行。

我怎样才能停止`rst2html`这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T21:19:29.737

不是一个很好的解决方案，但只是过滤掉这些行怎么样：

```
rst2html.py file.rst | egrep -v '(colgroup|col width)' > file.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T10:04:13.473

[我在https://sourceforge.net/p/docutils/feature-requests/39/](https://sourceforge.net/p/docutils/feature-requests/39/)为此创建了一个功能请求

# iphone - iOS - 应用程序隐私问题

> ID：15607940
> 
> 赞同：1
> 
> 时间：2013-03-25T04:58:24.097
> 
> 标签：iphone, ios, ipad, app-store

我正在为工作开发 iPad 应用程序，并被指示提供以下内容：

“用户必须输入他们的电子邮件地址才能使用完整的应用程序。他们还必须同意条款和条件，允许应用程序向我们发送他们输入的信息，并允许我们就该信息与他们联系。如果用户这样做不同意这一点，他或她可以免费使用该应用程序的 LIMITED 版本。”

这会引发任何明显的隐私问题吗？我了解 Apple 不喜欢应用程序强制共享个人信息，但如果它是可选的，是否可以按照开发人员喜欢的方式使用该信息（只要向用户明确说明）？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:00:56.690

我在我的一个应用程序中做了同样的事情，之前我所做的是我强迫用户在使用该应用程序之前注册。苹果拒绝了它，他们说注册应该是可选的，并且一些功能应该在那里供用户在您的应用程序中使用而无需注册。

然后我将我的应用程序模型更改为与您的相同，我注册了特定功能，并在注册时收集了电子邮件地址和其他类型的数据。

苹果对此没有任何问题。您必须为您的 App 提供一个演示帐户，以便 Apple Review 团队可以对其进行全面测试。

谢谢，希望经验有所帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:03:28.430

你*肯定*会遇到苹果的问题。他们将拒绝需要用户共享信息才能使用应用程序的应用程序（特别是如果应用程序功能不依赖于电子邮件），以及需要用户“设置”的应用程序。如果您将电子邮件地址设为可选并允许所有用户访问该应用程序的所有功能，则不会有问题。

# node.js - 在 mongodb 和 nodejs 中按天分组

> ID：15607941
> 
> 赞同：0
> 
> 时间：2013-03-25T04:58:31.410
> 
> 标签：node.js, mongodb, date, group-by

我在 mongodb 中有如下文档， `{ "_id" : ObjectId("4f956dee76ddb26752026e8f"), "page" : "home", "visited" : ISOdate(23/02/2013) }, { "_id" : ObjectId("4f956dee76ddb26752026e8f"), "page" : "home", "visited" : ISOdate(24/02/2013) }, { "_id" : ObjectId("4f956dee76ddb26752026e8f"), "page" : "home", "visited" : ISOdate(24/02/2013) } , { "_id" : ObjectId("4f956dee76ddb26752026e8f"), "page" : "home", "visited" : ISOdate(25/02/2013) }` 我想使用 nodejs 在 mongodb 中获取这一天以及计数。它应该返回：. `day: 23/02/2013, count:1 , day: 24/02/2013, count:2 ,day: 25/02/2013, count:1`结果应该按天排序，所以第 23 天是第 24 天是第 24 天，第 25 天是第 3 天。有很多条目在 100 万左右。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T15:02:17.550

```
/**
 * group by day
 * @link https://gist.github.com/phnessu4/5636642
 * @param query document {key1:123,key2:456}
 */
var count_by_day = function(query){
    return db.action.group(
    {
        keyf: function(doc) {
            var date = new Date(doc.time);
            var dateKey = (date.getMonth()+1)+"/"+date.getDate()+"/"+date.getFullYear();
            return {'date': dateKey};
        },
        cond:query,
        initial: {count:0},
        reduce: function(obj, prev) {
          prev.count++;
        }
    });
}

count_by_day({this:'is',the:'query'}) 
```

尝试这个。我不确定你的情况细节。您需要自己编写查询。
希望这可以帮到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:20:30.363

首先，您在那里有重复的 ObjectId，因此这是错误的数据。

最后，您应该能够使用类似这样的聚合来构建查询：（假设您使用的是 mongodb 2.2 +）。

```
db.mytable.aggregate([ {$group : {_id:"$visited", total:{$sum:1}}}, {$sort:{visited:-1}}]) 
```

# javascript - JavaScript：正确显示 UTF-8 字符的小书签

> ID：15607943
> 
> 赞同：0
> 
> 时间：2013-03-25T04:58:33.640
> 
> 标签：javascript, utf-8, bookmarklet

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:37:24.920

用小书签，不。不幸的是，大多数浏览器不提供使用 javascript 更改页面编码的方法。您可以尝试添加元标记来影响编码，但这可能不适用于所有浏览器（谷歌“元标记编码”）。这主要是服务器问题 - Web 服务器为页面发送了错误的编码标头。

但是，如果您想要一个可以从浏览器调用的菜单项来更改编码（这基本上就是一个小书签），您可以简单地调用编码菜单并将其更改为 UTF-8。在 IE8 上是`Page->Encoding->UTF8`，在 Chrome 上是`Menu->Tools->Encoding->UTF8`. 谷歌搜索其他浏览器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T05:38:41.417

[在另一个问题的帮助下](https://stackoverflow.com/questions/1175775/find-all-instances-of-old-in-a-webpage-and-replace-each-with-new-using-a-ja)，我找到了解决方案：

```
javascript:
function htmlreplace(a, b, element) {    
    if (!element) element = document.body;    
    var nodes = element.childNodes;
    for (var n=0; n<nodes.length; n++) {
        if (nodes[n].nodeType == Node.TEXT_NODE) {
            var r = new RegExp(a, 'gi');
            nodes[n].textContent = nodes[n].textContent.replace(r, b);
        } else {
            htmlreplace(a, b, nodes[n]);
        }
    }
}
htmlreplace("â€“","–");
htmlreplace("â€™","’");
htmlreplace("â€˜","‘");
htmlreplace("â€œ","“");
htmlreplace("â€ž","„"); 
```

惊人的！

# c# - 在设计模式下更改面板类型

> ID：15607948
> 
> 赞同：0
> 
> 时间：2013-03-25T04:58:58.097
> 
> 标签：c#, winforms, designer

我设计了一个使用`TableLayoutPanel`. 它也在寻找我想要的方式，但我在运行应用程序时意识到它在重新调整大小和换出面板时会闪烁。所以我创建了一个新类，`DoubleBufferedTableLayoutPanel`用作`TableLayoutPanel`基类。我想知道 Visual Studio 2012 设计器中是否有一种简单的方法可以交换两个面板，而无需再次完全重新设计表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:03:31.783

您可以进入`designer.cs`文件并手动更改类型。由于新类型是从旧类型派生的，它应该可以完美地工作。

# php - 当另一个弹出窗口打开时，如何在 JQuery 中自动关闭一个弹出窗口？

> ID：15607950
> 
> 赞同：2
> 
> 时间：2013-03-25T04:59:16.653
> 
> 标签：php, jquery, html, css

我在一个页面中有 3 个 Jquery 弹出窗口。当我打开一个窗口说登录弹出窗口，然后我打开另一个说反馈弹出窗口时，我需要在单击反馈弹出链接时关闭我的登录弹出窗口。这是我的登录弹出窗口的示例代码。我也将相同的用于反馈弹出窗口。请帮我查询。谢谢大家。

```
$(document).ready(function() {
    $('a.login-window').click(function() {

      //Getting the variable's value from a link 
        var loginBox = $(this).attr('href');

        //Fade in the Popup
        $(loginBox).fadeIn(300);

        //Set the center alignment padding + border see css style
        var popMargTop = ($(loginBox).height() + 24) / 2; 
        var popMargLeft = ($(loginBox).width() + 24) / 2; 

        $(loginBox).css({ 
            'margin-top' : -popMargTop,
            'margin-left' : -popMargLeft
        });

        // Add the mask to body
        $('body').append('<div id="mask"></div>');
        $('#mask').fadeIn(300);

        return false;
    });

    // When clicking on the button close or the mask layer the popup closed
    $('a.close, #mask').live('click', function() { 
      $('#mask , .login-popup').fadeOut(300 , function() {
        $('#mask').remove();  
    }); 
    return false;
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:05:19.757

为所有三个弹出窗口添加一个公共类。在显示弹出窗口时，先隐藏其他弹出窗口，然后再显示当前弹出窗口。

```
<div class="popup1 popup">Menu</div>
<div class="popup2 popup">Login</div>
<div class="popup3 popup">FeedBack</div> 
```

**JS**

```
$('a.login').click(function(){
    $('.popup').hide();
    ---- your code ----
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:56:39.367

更新：抱歉忘记了 jQuery 的另一半，我现在修正了我的答案。

我不太确定如何使您的代码与您尝试做的事情一起工作，但这是我在所有项目中都使用的代码片段，希望它对您和更多人有所帮助。

```
 var first = true;
        var second = true;

    $(document).ready(function () {
            $(".signup").slideToggle();
            $(".login").slideToggle();
            $("#signup").toggleClass("active");
            $("#login").toggleClass("active");

            $("#signup").click(function () {

                $(".signup").slideToggle();
                first = true;
                $(this).toggleClass("active");
                if (!$("#login").hasClass('active')) {
                    $(".login").slideToggle();
                    second = false;
                    $("#login").toggleClass("active");
                }
                return false;
            });
            $("#login").click(function () {
                $(".login").slideToggle();
                second = true;
                $(this).toggleClass("active");

                if (!$("#signup").hasClass('active')) {
                    $(".signup").slideToggle();
                    first = false;
                    $("#signup").toggleClass("active");
                }
                return false;
            });
        }); 
```

这是我的那个jQuery片段的HTML

```
 <div id="signup">
        Sign Up

    </div>
    <div class="signup">
        Email:<br>
        <input type="text">
        <br>
        Password:<br>
        <input type="password">
        <br>
        Verify Password:<br>
        <input type="password">
    </div>
    <div id="login">
        Login

    </div>
    <div class="login">
        Email:<br>
        <input type="email">
        <br>
        Password:<br>
        <input type="password">
    </div> 
```

# android - 当有新短信到达时启动广播接收器

> ID：15607953
> 
> 赞同：1
> 
> 时间：2013-03-25T04:59:46.570
> 
> 标签：android, sms, broadcastreceiver

我创建了一个远程服务，它正在调用一个广播接收器，该接收器又调用警报管理器来触发警报，但是我想在有新消息到达时通过 rempte 服务触发接收器

这段代码如下：

```
 @Override
                public IBinder onBind(Intent arg0) {
                    Log.d(getClass().getSimpleName(), "onBind()");

                    return myRemoteServiceStub;
                }           

                    private IMyRemoteService.Stub myRemoteServiceStub = new IMyRemoteService.Stub() {
                        public int getCounter() throws RemoteException {
                //          startAlarmNotification();

                            IntentFilter filter = new IntentFilter();
                            filter.addAction("android.provider.Telephony.SMS_RECEIVED");
                            filter.addAction(android.telephony.TelephonyManager.ACTION_PHONE_STATE_CHANGED);
                            filter.addAction("your_action_strings"); //further more
                            filter.addAction("your_action_strings"); //further more

                            registerReceiver(receiver, filter);
                            return counter;
                        }
                    };

                    @Override
                    public void onCreate() {
                        super.onCreate();
                        Log.d(getClass().getSimpleName(),"onCreate()");
                    }

                    @Override
                    public void onDestroy() {
                        super.onDestroy();
                        serviceHandler.removeCallbacks(myTask);
                        serviceHandler = null;
                        Log.d(getClass().getSimpleName(),"onDestroy()");
                    }

                    @Override
                    public void onStart(Intent intent, int startId) {
                        super.onStart(intent, startId);
                        serviceHandler = new Handler();
                        serviceHandler.postDelayed(myTask, 1000L);
                        Log.d(getClass().getSimpleName(), "onStart()");
                    }

                    class Task implements Runnable {
                        public void run() {
                            ++counter;
                            serviceHandler.postDelayed(this,1000L);
                            Log.i(getClass().getSimpleName(), "Incrementing counter in the run method");
                        }
                    }
                    public void  startAlarmNotification(){
                      Calendar calendar = Calendar.getInstance();
                      calendar.add(Calendar.MINUTE, 1);
                      Intent alarmintent = new Intent(RemoteService.this, AlarmReciver.class);
                      PendingIntent sender = PendingIntent.getBroadcast(this, notificationId, alarmintent,PendingIntent.FLAG_UPDATE_CURRENT | Intent.FILL_IN_DATA);
                      AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
                //        am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),  60 * 1000, sender);
                          am.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), sender);
                    }

                    private final BroadcastReceiver receiver = new BroadcastReceiver() {
                           @Override
                           public void onReceive(Context context, Intent intent) {
                              String action = intent.getAction();
                              if(action.equals("android.provider.Telephony.SMS_RECEIVED")){
                                //action for sms received
                                        startAlarmNotification();
                                        unregisterReceiver(receiver);

                              }
                              else if(action.equals(android.telephony.TelephonyManager.ACTION_PHONE_STATE_CHANGED)){
                                   //action for phone state changed
                              }     
                           }
                        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:10:47.540

如果您的服务正在运行，则您的代码正在运行......因此，只要您收到 SMS，就会运行以下代码。您可以在收到短信后修改它，您可以启动服务并将您的代码放入服务中。

短信接收器 JAVA 类

```
 public class SmsReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {

           Bundle extras = intent.getExtras();
           if (extras == null)
           return;

          // To display a Toast whenever there is an SMS.
           Toast.makeText(context,"Recieved",Toast.LENGTH_LONG).show();

           Object[] pdus = (Object[]) extras.get("pdus");
           for (int i = 0; i &lt; pdus.length; i++) {
              SmsMessage SMessage = SmsMessage.createFromPdu((byte[]) pdus[i]);
              String sender = SMessage.getOriginatingAddress();
              String body = SMessage.getMessageBody().toString();
              Toast.makeText(context, ""+sender+":"+body , Toast.LENGTH_SHORT)
                        .show();

            }
           startAlarmNotification();
         }

        public void  startAlarmNotification(){
                      Calendar calendar = Calendar.getInstance();
                      calendar.add(Calendar.MINUTE, 1);
                      Intent alarmintent = new Intent(RemoteService.this, AlarmReciver.class);
                      PendingIntent sender = PendingIntent.getBroadcast(this, notificationId, alarmintent,PendingIntent.FLAG_UPDATE_CURRENT | Intent.FILL_IN_DATA);
                      AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
                //        am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),  60 * 1000, sender);
                          am.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), sender);
                    }
     } 
```

在您的清单中执行以下代码：

```
<receiver android:name=".SmsReceiver">
                <intent-filter>
                    <action android:name="android.provider.Telephony.SMS_RECEIVED" />
                </intent-filter>
            </receiver> 
```

还添加以下权限：

```
<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
```

# ruby - 如何防止yield中参数不匹配的情况？

> ID：15607954
> 
> 赞同：1
> 
> 时间：2013-03-25T04:59:57.867
> 
> 标签：ruby

例如，当我使用 yield(param) 但传递块 {|p1,p2| 时会导致问题 ...} 有两个参数。如果我不知道什么参数 yield 需要时间，我应该如何防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:13:57.250

在块中使用 splat，或者简单地传递*可能*存在的变量并测试它们的定义：

```
def foo
  yield 1, 2, 3
end

foo do |*args|
  if 3 == args.length
    # ... then I know I'm dealing with 3 args
  end
end

foo do |a, b, c, d|
  if !d.nil?
    # ... then I know i was passed `d`
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:10:55.960

请参阅这篇关于 Ruby Blocks、Procs 和 Lambdas 的优秀博文：

> [了解 Ruby 块、Procs 和 Lambda](http://www.robertsosinski.com/2008/12/21/understanding-ruby-blocks-procs-and-lambdas/)

它解释了 Blocks（比如被传入的那个`foo() {|p1,p2| ...}`）就像[Proc](http://www.ruby-doc.org/core-1.9.3/Proc.html)一样，它不检查传递的参数的数量。但是，Lambda 可以。因此，如果您需要严格检查参数的数量，您可能会从接受方法中的 Block 切换到接受 Lambda 作为方法参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:13:45.383

您应该使用 block 参数而不是`yield`，它提供的信息比`yield`arity 更多。

```
def foo *params, &block
  ...
  block.call(*params) if params.length == block.arity
  ...
end

foo(3){|x| puts x*3} # => 9
foo(3, 4){|x| puts x*3} # => Does not do anything 
```

# jquery - Jquery - 在多个按钮上切换类

> ID：15607956
> 
> 赞同：0
> 
> 时间：2013-03-25T05:00:00.533
> 
> 标签：jquery, toggleclass

我目前正在运行一个小的 JQuery 函数，如果单击了一个按钮，它会切换一个新类。

```
 $(".button1").click(function () {

        $(this).toggleClass("button2");

    }); 
```

这很好用，但是，我的问题是我连续有 5 个按钮，我只希望一次有一个新课程。目前，如果我单击任何其他按钮，它们也会应用新类。如果有人单击另一个按钮，我希望它从原始按钮中删除 button2 类并将其仅应用于 newley 单击的按钮。

关于实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T05:04:38.373

尝试这个：

```
$(".button1").click(function () {
    $(this).parent().find(".button2").removeClass("button2");
    $(this).addClass("button2");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T05:12:51.003

为此使用[.not()](http://api.jquery.com/not)：

```
$(document).ready(function(){    
    $(".button1").click(function () {    

        $('.button2').not(this).removeClass('button2');
        $(this).toggleClass("button2");    
    });    
}); 
```

阅读[http://forum.jquery.com/topic/jquery-not-this](http://forum.jquery.com/topic/jquery-not-this)

**小提琴** [http://jsfiddle.net/NXBqU/1/](http://jsfiddle.net/NXBqU/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:07:41.820

这应该做你想要的：

```
$('.button1').click(function () {
    $('.button2').removeClass('button2');
    $(this).addClass('button2');
}); 
```

# javascript - 加载所有 HTML 文件通用的 JavaScript 文件

> ID：15607959
> 
> 赞同：0
> 
> 时间：2013-03-25T05:00:08.647
> 
> 标签：javascript, android, html, android-tabhost

我正在创建`android application using Tabhost`并拥有以下内容

```
1\. App having 4 tabs
2\. Each tab in Tabhost having WebViews. 
3\. Loaded local HTML files with these WebViews.  
4\. 4 Local HTML files having more than 8 js files. 
5\. but 8 js files are same for all HTML files 
```

**问题：**我可以在每个 HTML 文件中分别加载 8 个 js 文件。这会影响性能

**预期：**我们可以加载`all java script files in Layout.cshtml file when we using ASP.NET MVC pages`. 就像我想要的那样`load all js files common for all local HTML files`。

请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:15:58.257

我想这是不可能的，因为`WebView`s 是在每个实例中运行单独的 WebKit 引擎的独立容器。

在您的情况下，一种可能性是`TabHost`使用单个`WebView`. 具体来说，您必须使用 Web 内容本身创建选项卡，以便使用单个`WebView`，其中包含其中 4 个不同选项卡的 HTML。

# c# - 如何在 DayPilot Pro 7.1.2741 中启用周六和周日

> ID：15607963
> 
> 赞同：-1
> 
> 时间：2013-03-25T05:00:34.870
> 
> 标签：c#, asp.net, calendar, timetable, daypilot

我正在使用 DayPilot Pro 7.1.2741 试用版，并且只会在周一至周五显示。我希望它也显示周六和周日

DayPilot Pro 7.1.2741 的链接

[http://code.daypilot.org/65101/timetable-tutorial-asp-net-c-vb-net](http://code.daypilot.org/65101/timetable-tutorial-asp-net-c-vb-net)

[http://www.daypilot.org/tutorial/timetable/](http://www.daypilot.org/tutorial/timetable/)

因此，请帮助启用这些天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:31:11.577

将 DayPilotCalendar.Days 设置为 7。 Default.aspx.cs 中的 Page_Load 方法应如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    blocks = new DataManager().GetBlocks();

    if (!IsPostBack)
    {
        DayPilotCalendar1.StartDate = Week.FirstWorkingDayOfWeek(DayPilotNavigator1.SelectionStart);
        DayPilotCalendar1.Days = 7; 

        DayPilotCalendar1.DataSource = new DataManager().GetAssignments(DayPilotCalendar1);
        DayPilotCalendar1.DataBind();
    }
} 
```

# java - 将对象附加到序列化文件

> ID：15607969
> 
> 赞同：5
> 
> 时间：2013-03-25T05:01:01.730
> 
> 标签：java, object, serialization

假设您有一些 AppendObjectOutputStream 类（它是一个 ObjectOutputStream！），它像这样覆盖 writeStreamHeader()：

```
@Override
public void writeStreamHeader() throws IOException
{
    reset();
} 
```

现在，假设您计划将多个对象保存到一个文件中；程序每次运行时对应一个对象。即使在第一次运行时，您会使用 AppendObjectOutputStream() 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T05:12:41.497

您必须第一次使用常规 ObjectOutputStream 编写流标头，否则在使用 ObjectInputStream 打开文件时您将收到 java.io.StreamCorruptedException。

```
public class Test1 implements Serializable {

    public static void main(String[] args) throws Exception {
        ObjectOutputStream os1 = new ObjectOutputStream(new FileOutputStream("test"));
        os1.writeObject(new Test1());
        os1.close();

        ObjectOutputStream os2 = new ObjectOutputStream(new FileOutputStream("test", true)) {
            protected void writeStreamHeader() throws IOException {
                reset();
            }
        };

        os2.writeObject(new Test1());
        os2.close();

        ObjectInputStream is = new ObjectInputStream(new FileInputStream("test"));
        System.out.println(is.readObject());
        System.out.println(is.readObject()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-09T15:13:27.933

以上对我不起作用，特别是 reset() 不起作用。我在这里找到以下内容： [https ://coderanch.com/t/583191/java/ObjectOutputStream-appending-file-overiding-ObjectOutputStream](https://coderanch.com/t/583191/java/ObjectOutputStream-appending-file-overiding-ObjectOutputStream)

```
@Override 
protected void writeStreamHeader() throws IOException {  
   // TODO Auto-generated method stub  
   System.out.println("I am called");  
   super.writeStreamHeader();
} 
```

这对我有用。我知道这似乎违反直觉，乍一看，调用超类方法似乎不应该做任何事情，但确实如此。阅读原始帖子并尝试一下。

# javascript - 在鼠标悬停时停止图像爬虫

> ID：15607973
> 
> 赞同：0
> 
> 时间：2013-03-25T05:01:30.930
> 
> 标签：javascript, slider, web-crawler

如何在鼠标悬停时从 dynamicdrive.com 停止这个爬虫。我尝试了一些选项，例如：

```
inc: 20, //speed - pixel increment for each iteration of this marquee's movement
mouse: 'cursor driven', //mouseover behavior ('pause' 'cursor driven' or false)
moveatleast: 3,
neutral: 150,
savedirection: true,
random: false, 
```

通过更改为：

```
inc: 20, //speed - pixel increment for each iteration of this marquee's movement
mouse: 'pause', //mouseover behavior ('pause' 'cursor driven' or false)
moveatleast: 3,
neutral: 150,
savedirection: true,
random: false, 
```

但它没有用。

当我将鼠标指向其容器的右侧时，该爬虫向左移动，但当鼠标悬停在其容器上时，我需要它停止。

这是该页面的链接：

[http://www.dynamicdrive.com/dynamicindex2/crawler/index.htm](http://www.dynamicdrive.com/dynamicindex2/crawler/index.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:03:23.600

尝试增加到`neutral`像`65000`.

# file-upload - blueimp 文件上传。如何清理现有的文件列表

> ID：15607976
> 
> 赞同：4
> 
> 时间：2013-03-25T05:02:13.280
> 
> 标签：file-upload, blueimp

我已经看了很多，但还没有找到解决我的问题的方法。小部件的作者参考了FAQ的最后一个答案，但FAQ没有答案或者我找不到它。我想它是从那时起更新的。其他面临同样问题并提出同样问题的人就走了，没有提供任何解决方案。

无论如何，就我而言，我有一张带有按钮图片的表格：

![在此处输入图像描述](../Images/5b6617ae9a59c5dd486b528d74bb03fe.png)

当用户单击其中一个图片按钮时，将显示模态对话框。用户现在可以管理所选行的图片。他可以上传、删除图片等等。当用户打开表格中第二行的对话框时，他应该*只*看到第二行的图片。它告诉我，每次用户点击图片按钮查看对话框时，我都必须清理上传文件的列表。他将从服务器收到与所选行相对应的图片列表。不幸的是，当我检索所选行的列表时，收到的文件被添加到现有列表中。

你能告诉我如何在不删除服务器端文件的情况下清理列表或重置小部件吗？

**更新**我已使用以下代码作为临时解决方案。

```
 jQuery.ajax({
        url: "<YOUR URL HERE>",
        dataType: 'json',
        context: $('#fileupload')[0]
    }).done(function (result) {
        jQuery("#fileupload").find(".files").empty(); //this line solves the issue

        jQuery(this).fileupload('option', 'done').call(this, null, { result: result });
    }); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T08:49:21.503

我还尝试了一个小时来完成我的上传工作；）

这是，我是如何解决这个问题的：

```
$('#html5FileInput').fileupload({
    ....
    add: function (e, data) {
        $.each(data.files, function (index, file) {
            var newFileDiv = $(newfileDiv(file.name));
            $('#fsUploadProgressHtml5').append(newFileDiv);

            newFileDiv.find('a').bind('click', function (event) {
                event.preventDefault();
                var uploadFilesBox = $("#fsUploadProgressHtml5");
                var remDiv = $(document.getElementById("fileDiv_" + event.data.filename));
                removeFileFromArray(event.data.filename);
                remDiv.remove();
                data.files.length = 0;
                ...
            });

            data.context = newFileDiv;
        });
     ...
)}; 
```

如您所见，我在添加事件中使用“newfileDiv（file.name）”创建了我的文件数据集。这将创建一个 div，其中包含有关文件的所有信息（名称、大小、...）和一个用于从列表中删除文件的 ankor。在这个 ankor 上，我绑定了一个单击事件，其中我有删除实现。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T18:19:30.943

我知道这不是最优雅的解决方案，但我需要一个非常快速和肮脏的......所以这就是我所做的（使用 jQuery）。

```
//manually trigger the cancel button for all files...removes anything that isn't uploaded yet
$('.fileupload-buttonbar .cancel').first().trigger('click');

//check the checkbox that selects all files
if(!$('.fileupload-buttonbar .toggle').first().checked) {
    $('.fileupload-buttonbar .toggle').first().trigger('click');
}

//manually trigger the delete button for all files
$('.fileupload-buttonbar .delete').first().trigger('click'); 
```

我知道这不是最好的方法。我知道它并不优雅......但它适用于我并从插件中删除所有内容。

如果您已将文件名或插件中的其他任何内容添加到任何本地数组或对象，则需要手动清理它们（我有几个处理程序会触发`fileuploadadded`、`fileuploadsent`、`fileuploadcomplete`、`fileuploadfailed`和 'fileuploaddestroyed` 事件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T16:33:08.527

```
protected function get_file_objects($iteration_method = 'get_file_object') {
    $upload_dir = $this->get_upload_path();
    if (!is_dir($upload_dir)) {
        return array();
    }
    return array_values(array_filter(array_map(
        array($this, $iteration_method)
        //scandir($upload_dir)
        //File listing closed by Doss
    )));
} 
```

有一个 scandir 函数负责列出文件。就像我在上面所做的那样取消注释，你的问题就解决了。它可以在 UploadHandler.php 文件中找到。

# python - 如何使用python单击窗口的“下一步”按钮

> ID：15607979
> 
> 赞同：3
> 
> 时间：2013-03-25T05:02:27.723
> 
> 标签：python, windows, user-interface, pywinauto

我使用下面的代码连接了一个打开的窗口（类类型是 SunAwtFrame），确实我能够连接到它。但无法单击它的下一步按钮，我怀疑“下一步”按钮可能位于该窗口的框架内。即使我使用“交换”工具，我也无法浏览控件，实际上并没有显示控件。那么，如果是这种情况，如何切换到框架并单击“下一步”按钮。

```
app2 = application.Application()

app2.connect(title_re = u'abc')

dialog = app2.abc

print dialog

next =dialog.Next

print next

next.Click() 
```

当我运行上面的代码时，我得到了这样的错误，请帮我解决这个问题

```
#Error#:-

  <pywinauto.application.WindowSpecification object at 0x025F26F0>
  <pywinauto.application.WindowSpecification object at 0x025FA3B0>
  next.Click()
  File "C:\Python27\lib\site-packages\pywinauto\application.py", line 229, in __getattr__
    ctrls = _resolve_control(self.criteria)
  File "C:\Python27\lib\site-packages\pywinauto\application.py", line 788, in _resolve_contro
l
    raise e.original_exception
pywinauto.findwindows.WindowNotFoundError 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:59:40.593

您似乎一直在尝试通过 pywinauto 自动化非标准控件。我建议您按坐标单击，当然，如果除了按下按钮之外没有其他任务。

> 对话框.点击（坐标=（x，y））

或者

> dialog.ClickInput（坐标=（x，y））

# java - 使用python cgi脚本在https（不是http）中拦截json

> ID：15607984
> 
> 赞同：0
> 
> 时间：2013-03-25T05:02:49.143
> 
> 标签：java, python, cgi

我正在将 https 发布请求中的 json 字符串发送到 apache servert（请求将 json 数据发送到实际上是 python 脚本的 cgi-bin 脚本）。我正在使用标准的 cgi 调用-

```
 f=open("./testfile",  "w+")                                             
 f.write("usageData  json  =  \n")   
 <b>form = cgi.FieldStorage()  
 formList = ['Data']      
 str = form['Data'].value
 str = json.dumps(backupstr)
 </b>      
 print  backupstr 
```

读取 url 中的 json 字符串。问题是即使脚本被触发（基本打印语句正在执行......），脚本也没​​有读取 url 中的 json。这就是从 post 端发送数据的方式：

```
 HttpsURLConnection  connection  =   null;
  try{
     connection  = (HttpsURLConnection)url.openConnection();
     connection.setRequestMethod("POST");
     connection.setRequestProperty("Content-Type", 
                 "application/json");
     connection.setRequestProperty("Content-Length", "" + 
                  Integer.toString(jsonstring.getBytes().length));
     connection.setRequestProperty("Content-Language", "en-US");  
     connection.setUseCaches (false);
     connection.setDoInput(true);
     connection.setDoOutput(true);

     //Send request
     DataOutputStream wr = new DataOutputStream (
                     connection.getOutputStream ());
     //wr.writeBytes(jsonstring);
     wr.writeUTF(URLEncoder.encode(jsonstring,  "UTF-8"));
     wr.flush ();
     wr.close ();

     //Get Response 
     InputStream is = connection.getInputStream();
     BufferedReader rd = new BufferedReader(new InputStreamReader(is));
     String line;
     StringBuffer response = new StringBuffer(); 
     while((line = rd.readLine()) != null) {
         response.append(line);
     }
     rd.close();
     //response = httpClient.execute(request); 
  }
  catch (Exception e) 
  {
      System.out.println("Exception  "  +  e.getMessage());
      throw  e;
   } 
```

我怀疑在发送端缺少一个或多个 connection.setRequestProperty() 设置，这就是它触发脚本但没有读取 url 中的 json 字符串的原因……我做错了什么……？

# c# - 使用垃圾 html css 代码自动操作 SQL Server 表

> ID：15607985
> 
> 赞同：0
> 
> 时间：2013-03-25T05:03:05.190
> 
> 标签：c#, asp.net, sql-server, sql-server-2005

我最近遇到了我的网站[www.zomedia.in](http://www.zomedia.in)的问题。我正在使用带有 c# 的*sql server 2005*和*asp.net 4.0 。*

我的数据库表自动填充了一些未知的 html css 垃圾代码，例如“例如：（`</title><style>. apyk{position:absolute;clip: rect(438px,auto,auto,438px);} </style><div> c"`请访问[http://zomedia.in/ZomediaSongs/ZomediaMp3.aspx](http://zomedia.in/ZomediaSongs/ZomediaMp3.aspx)，您可以看到其中包含垃圾数据的 gridview）。

这些垃圾数据自动填满了我的表格，无需任何人为干预。我的网站运行良好，我没有更改任何可能导致问题的编码。所以，我对我的托管服务提供商进行了咨询，他们无法给出答案。这可能是编码错误或服务器错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:58:42.620

您的 sql 查询中有一个允许 sql 注入的漏洞。请参阅这篇文章并尝试在您的应用程序中找到所有连接数据 sql 语句的实例。

[http://msdn.microsoft.com/en-us/library/ms161953(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms161953(v=sql.105).aspx)

# c++ - If语句和大括号..不同的结果有/没有

> ID：15607987
> 
> 赞同：0
> 
> 时间：2013-03-25T05:03:13.050
> 
> 标签：c++, if-statement, braces

好的，所以我正在学习 C++，在使用其中一个教程时我遇到了一个奇怪的效果，而在它发生的时候我不太明白..

对于本教程（从提供的示例中复制），我在类模板特化中编写了一个函数，用于检查 char 是否为小写，然后将其变为大写：

```
char uppercase ()
{
    //checks to see if "element"(char) is a lower-case letter between 'a' and 'z'
    if ((element >= 'a') && (element <= 'z'))
    {
        //changes value of "element" to be element + (value of A - Value of a)[-32]
        element += 'A' - 'a'; //element = element + -32
        return element;
    };
}; 
```

现在，奇怪的是..即使 char 已经是大写的，这段代码仍然会被触发。因此，如果我调用值为“j”的函数，我显然会得到“J”，正如预期的那样。但是，如果我用“J”的值调用，该函数仍然会通过.. 所以不是函数没有改变任何东西，而是返回“*”。

现在，有趣的是.. 如果我从 if 语句中删除括号，它会按预期工作。所以，随着

```
char uppercase ()
{
    //checks to see if "element"(char) is a lower-case letter between 'a' and 'z'
    if ((element >= 'a') && (element <= 'z'))
        //changes value of "element" to be element + (value of A - Value of a)[-32]
        element += 'A' - 'a'; //element = element + -32
        return element;
}; 
```

它完全按预期工作。调用值为“J”的函数只返回“J”，因为不满足条件，因此没有执行任何代码。现在，我知道大括号对于 if 语句是可选的，但本教程说，不止一个语句需要大括号。

还值得注意的是，使用带有简单返回的大括号向语句添加 else 会产生预期的效果，但这应该是不必要的，对吧？

所以，基本上..我错过了一些关于大括号的东西，还是这只是编译器的问题（Visual Studio 2012）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T05:04:50.803

这是根据设计，`if`仅接受一个语句，大括号构成一个块语句。

如果你想要缩进范围，请使用 Python。

`if`您的代码的问题是，当语句不匹配时，您不会返回任何内容，这会导致未定义的行为。你的编译器可能会给你一个警告。不要忽略编译器警告。

第二块代码实际上是你想要的，只`element`在你`if`匹配时改变变量，但总是返回变量`element`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T05:08:34.097

在第一种情况下，`return`如果不满足条件，则不会执行语句。大概该函数正在返回垃圾。

在第二种情况下，因为没有大括号，所以只有一行取决于条件。无论如何都会执行该`return`语句。换句话说，您的第二个示例等效于：

```
char uppercase ()
{
    //checks to see if "element"(char) is a lower-case letter between 'a' and 'z'
    if ((element >= 'a') && (element <= 'z'))
    {
        //changes value of "element" to be element + (value of A - Value of a)[-32]
        element += 'A' - 'a'; //element = element + -32
    }
    return element;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:08:04.143

你有一个 if 语句。如果该语句的计算结果为真，它将立即执行紧随其后的操作。为了一次执行多个操作，您必须将它们括在花括号中。

你会得到一个奇怪的大括号答案，因为如果 J*是*大写的，你的 if 语句是假的，你跳过大括号，并且你没有指定的返回值（因此是无意义的返回值）。*如果您的 if 语句不*正确，您需要说明要返回的内容。

您的第二段代码有效，因为只有 if 语句后的第一行由 if 控制。这基本上是你在这里很幸运 - 如果你有两个你想做的操作，你仍然会得到垃圾。因此，通常最好通过将 if 语句放在花括号中来明确指定要由 if 语句执行的代码，即使它是一个操作也是如此。

# c++ - 在类主体之外定义类方法时出错

> ID：15607992
> 
> 赞同：0
> 
> 时间：2013-03-25T05:03:49.580
> 
> 标签：c++, class, header-files

编译器在类中抛出我的函数错误，我`vecListAtt connFrFile(int file_ext);`不知道为什么。错误说

“错误：声明与“vecListAtt neighborAtt::connFrFile(int file_ext)”不兼容（在连接性.h 中声明）”

连接性.h：

```
#if !def connectivity_H
#define connectivity_H

#include <iostream>
#include <vector>
#include <list>
#include <string>
#include <sstream>
#include <fstream>

class listAtt;
class vecListAtt;

class neighborAtt
{
public:
    neighborAtt(); //default constructor
    neighborAtt(int neighbor_id, int att_1, int att_2);

    vecListAtt connFrFile(int file_ext);
    vecListAtt makeList(std::vector<std::list<neighborAtt>> nodeAndInfo, int nodeID, neighborAtt neighAndAtt);  
    neighborAtt getAtt(std::string currentLine);

private:
    int neighborID;
    int attribute1;
    int attribute2;
};

typedef std::list<neighborAtt> listAtt;
typedef std::vector<listAtt> vecListAtt;

#endif 
```

在connectivity.cpp中，我定义

```
vecListAtt neighborAtt::connFrFile(int file_ext)
{

    vecListAtt node_and_info;

    return node_and_info;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:56:51.050

在创建neighborAtt 类时，编译器需要知道你要为这个类占用多少空间。现在，在您的实现中，编译器将需要 vecListAtt 对象的大小来计算 neighborAtt 对象的大小，因此只有 vecListAtt 的前向声明在这里不起作用。您定义完整的 vecListAtt 类或更改可以具有 vecListAtt 指针的 neighborAtt 类。编译器知道 vecListAtt 的指针可以占用多少大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:07:24.150

改变这个

```
vecListAtt connFrFile(int file_ext); 
```

至

```
vecListAtt *connFrFile(int file_ext); 
```

或包含头文件`vecListAtt`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:07:30.103

代码中的第一个问题是在`class neighborAtt`定义期间。
如果一个类是前向声明的，例如：

```
class vecListAtt; 
```

然后只能在该上下文中使用该类的指针或引用。

```
class neighborAtt {
  vecListAtt connFrFile(int file_ext);
//^^^^^^^^^^ should be pointer or reference
}; 
```

一旦你改变它，所有的错误都会消失。另一种选择是包含包含`vecListAtt`.

# jquery - TinyMCE 文本编辑器没有加载我的文本

> ID：15607993
> 
> 赞同：1
> 
> 时间：2013-03-25T05:04:02.297
> 
> 标签：jquery, tinymce

我在我的页面中使用 TinyMCE，但它没有加载所需的 Html 文本。我已经使用以下代码在 Javascript 中动态创建了此文本，但在使用 TinyMCE 文本编辑器后，该文本未加载到 TinyMCE 文本编辑器中。

> $('#mytextAreaID').Text(htmlcode);

我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:17:20.283

以下线程帮助我解决了这个问题：

[TinyMCE 在隐藏 textarea 之前没有从 textarea 抓取内容](https://stackoverflow.com/questions/8716667/tinymce-not-grabbing-content-from-textarea-before-hiding-that-textarea)

> `tinyMCE.execCommand('mceAddControl', false, 'editor1');`

# java - Java WebService 可运行线程

> ID：15607994
> 
> 赞同：1
> 
> 时间：2013-03-25T05:04:03.493
> 
> 标签：java, multithreading, web-services, jsp, tomcat

我在 Tomcat 7 上运行一个企业 JSP 应用程序，它偶尔会调用 Web 服务。随着时间的推移，应用程序会开发**占用**大量 CPU 周期的可运行线程。即使调用它们的应用程序停止，这些线程也会继续运行。

这是线程转储：

```
"http-thread-598" daemon prio=10 tid=0x00002ab4e8b19800 nid=0xd61 runnable [0x00002ab4fc602000]
   java.lang.Thread.State: RUNNABLE
    at com.sun.xml.stream.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:362)
    at com.sun.xml.stream.XMLReaderImpl.next(XMLReaderImpl.java:568)
    at com.sun.xml.ws.util.xml.XMLStreamReaderFilter.next(XMLStreamReaderFilter.java:92)
    at com.sun.xml.ws.streaming.XMLStreamReaderUtil.next(XMLStreamReaderUtil.java:89)
    at com.sun.xml.ws.streaming.XMLStreamReaderUtil.nextContent(XMLStreamReaderUtil.java:110)
    at com.sun.xml.ws.streaming.XMLStreamReaderUtil.nextElementContent(XMLStreamReaderUtil.java:100)
    at com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parseWSDL(RuntimeWSDLParser.java:292)
    at com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parseImport(RuntimeWSDLParser.java:280)
    at com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parseImport(RuntimeWSDLParser.java:656)
    at com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parseWSDL(RuntimeWSDLParser.java:315)
    at com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:227)
    at com.sun.xml.ws.api.model.wsdl.WSDLModel$WSDLParser.parse(WSDLModel.java:133)
    at com.sun.xml.ws.policy.jaxws.PolicyConfigParser.parseModel(PolicyConfigParser.java:281)
    at com.sun.xml.ws.policy.jaxws.PolicyConfigParser.parseModel(PolicyConfigParser.java:243)
    at com.sun.xml.ws.policy.jaxws.PolicyConfigParser.parse(PolicyConfigParser.java:109)
    at com.sun.xml.ws.policy.jaxws.PolicyWSDLParserExtension.postFinished(PolicyWSDLParserExtension.java:1248)
    at com.sun.xml.ws.wsdl.parser.DelegatingParserExtension.postFinished(DelegatingParserExtension.java:187)
    at com.sun.xml.ws.wsdl.parser.WSDLParserExtensionFacade.postFinished(WSDLParserExtensionFacade.java:334)
    at com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:149)
    at com.sun.xml.ws.client.WSServiceDelegate.parseWSDL(WSServiceDelegate.java:263)
    at com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:226)
    at com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:174)
    at com.sun.xml.ws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:104)
    at javax.xml.ws.Service.<init>(Service.java:56)
    at xyzservice.GetDataInterfaceHttpService.<init>(GetDataInterfaceHttpService.java:42)
    at org.xyz.PRESENTATION.gui.btHandler_getData(someClass.java:186)
    at sun.reflect.GeneratedMethodAccessor3300.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:278)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
    at com.sun.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:68)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:99)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:771)
    at javax.faces.component.UICommand.broadcast(UICommand.java:372)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:475)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:756)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:251)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:117)
    at com.icesoft.faces.webapp.http.core.JsfLifecycleExecutor.apply(JsfLifecycleExecutor.java:18)
    at com.icesoft.faces.webapp.http.core.ReceiveSendUpdates.renderCycle(ReceiveSendUpdates.java:132)
    at com.icesoft.faces.webapp.http.core.ReceiveSendUpdates.service(ReceiveSendUpdates.java:74)
    at com.icesoft.faces.webapp.http.core.RequestVerifier.service(RequestVerifier.java:31)
    at com.icesoft.faces.webapp.http.common.standard.PathDispatcherServer.service(PathDispatcherServer.java:24)
    at com.icesoft.faces.webapp.http.servlet.BasicAdaptingServlet.service(BasicAdaptingServlet.java:16)
    at com.icesoft.faces.webapp.http.servlet.PathDispatcher.service(PathDispatcher.java:23)
    at com.icesoft.faces.webapp.http.servlet.SessionDispatcher.service(SessionDispatcher.java:53)
    at com.icesoft.faces.webapp.http.servlet.SessionVerifier.service(SessionVerifier.java:26)
    at com.icesoft.faces.webapp.http.servlet.PathDispatcher.service(PathDispatcher.java:23)
    at com.icesoft.faces.webapp.http.servlet.MainServlet.service(MainServlet.java:131)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at com.icesoft.faces.webapp.xmlhttp.BlockingServlet.service(BlockingServlet.java:56)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    - locked <0x00000007021c13d0> (a org.apache.tomcat.util.net.SocketWrapper)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:662) 
```

我在 4-5 个不同的服务中随机遇到这个问题。

CPU 使用情况图片：http: [//i.stack.imgur.com/m4gNl.png](http://i.stack.imgur.com/m4gNl.png)

# ruby-on-rails - rake db:create_indexes 时出现 mongoid_fulltext 错误... undefined method `db' for # 与 mongo-1.8.3、mongoid 3.1.2 一起使用 rails 我想组合许多字符串字段并创建一个全文索引.. 但在初始设置期间我收到此错误 我的模型看起来像这样：- class User 问问题 问问题 2013-03-25T05:04:32.120 377 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 与 mongo-1.8.3、mongoid 3.1.2 一起使用 rails 我想组合许多字符串字段并创建一个全文索引.. 但在初始设置期间我收到此错误 我的模型看起来像这样：- class User include Mongoid::Document include Mongoid::Timestamps include Mongoid::FullTextSearch field :name, type: String fulltext_search_in :name 在 rake db:create_indexes 上出现错误 rake aborted! undefined method `db' for # <moped::collection:0x007fba5c768f18>/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid_fulltext- 0.5.8/lib/mongoid_fulltext.rb:71:in `fulltext_search_ensure_indexes' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid_fulltext-0.5.8/lib/mongoid_fulltext.rb:66:in `block in create_fulltext_indexes' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid_fulltext-0.5.8/lib/mongoid_fulltext.rb:65:in `each_pair' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid_fulltext-0.5.8/lib/mongoid_fulltext.rb:65:in `create_fulltext_indexes' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid_fulltext-0.5.8/lib/mongoid_indexes.rb:7:in `create_indexes' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid-3.1.2/lib/rails/mongoid.rb:21:in `block in create_indexes' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid-3.1.2/lib/rails/mongoid.rb:18:in `each' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid-3.1.2/lib/rails/mongoid.rb:18:in `create_indexes' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid-3.1.2/lib/mongoid/railties/database.rake:71:in `block (3 levels) in <top (required)="">' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/task.rb:228:in `call' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/task.rb:223:in `each' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain' /Users/akhil/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:101:in `each' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:70:in `run' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/bin/rake:33:in `<top (required)="">' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/bin/rake:23:in `load' /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/bin/rake:23:in `

<main>' Tasks: TOP => db:mongoid:create_indexes 简而言之，您想从请求的响应中获取一个流，然后将该流分配给您的响应流（或写入您的响应流）。 我认为这个 SO question有一个很好的答案。 ruby-on-railsmongodbmongoidmoped 4 1 回答 1 This answer is useful 0 低于 0.6 的 mongoid_fulltext 版本与 Mongoid 3 不兼容（因此与 Moped 不兼容）。在更新 mongoid_fulltext 上面的错误消失了 于 2013-04-18T06:39:19.953 回答 Related 2 java - Scala 演员效率低下的问题 3 r - 在 R 中正确构建函数 3 c# - 删除字符串末尾的系列的所有实例 1 json - wcf json 响应数组/列表 1 java - 突然无法从eclipse导出到war文件 1 php - PHP preg_replace：有条件地插入空格 1 jax-rs - jaxrs 使用不同的 bean 配置多个 jaxrs:server 标签 1 mysql - 从多个表中获取带时间戳的计数 0 java - 将参数从 Java Applet 传递到 Javascript 2 c# - 这是 MVC 反模式吗？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</main></top></top></moped::collection:0x007fba5c768f18> 

> ID：15607997
> 
> 赞同：0
> 
> 时间：
> 
> 标签：ruby-on-rails, mongodb, mongoid, moped

与 mongo-1.8.3、mongoid 3.1.2 一起使用 rails

我想组合许多字符串字段并创建一个全文索引.. 但在初始设置期间我收到此错误

我的模型看起来像这样：-

```
class User
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::FullTextSearch

  field :name, type: String
  fulltext_search_in :name 
```

在 rake db:create_indexes 上出现错误

```
rake aborted!
undefined method `db' for #<Moped::Collection:0x007fba5c768f18>
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid_fulltext-       0.5.8/lib/mongoid_fulltext.rb:71:in `fulltext_search_ensure_indexes'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid_fulltext-0.5.8/lib/mongoid_fulltext.rb:66:in `block in create_fulltext_indexes'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid_fulltext-0.5.8/lib/mongoid_fulltext.rb:65:in `each_pair'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid_fulltext-0.5.8/lib/mongoid_fulltext.rb:65:in `create_fulltext_indexes'
 /Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid_fulltext-0.5.8/lib/mongoid_indexes.rb:7:in `create_indexes'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid-3.1.2/lib/rails/mongoid.rb:21:in `block in create_indexes'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid-3.1.2/lib/rails/mongoid.rb:18:in `each'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid-3.1.2/lib/rails/mongoid.rb:18:in `create_indexes'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/mongoid-3.1.2/lib/mongoid/railties/database.rake:71:in `block (3 levels) in <top (required)>'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/akhil/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/bin/rake:23:in `load'
/Users/akhil/.rvm/gems/ruby-1.9.3-p194@rnd/bin/rake:23:in `<main>'
Tasks: TOP => db:mongoid:create_indexes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:39:19.953

低于 0.6 的 mongoid_fulltext 版本与 Mongoid 3 不兼容（因此与 Moped 不兼容）。在更新 mongoid_fulltext 上面的错误消失了