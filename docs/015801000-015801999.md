# StackOverflow 问答 15801000-15801999

# javascript - 使用 getElementsByTagName 选择所有 div

> ID：15801003
> 
> 赞同：5
> 
> 时间：2013-04-04T01:21:17.630
> 
> 标签：javascript

我正在做一个项目，我只能使用 JS 来操作 HTML 文件。我想更改 HTML 中所有 div 的背景颜色，我目前有以下内容。

```
//Highlight Function

function highlight(e) {
  e.target.style.backgroundColor = "orange";
}

function unhighlight(e) {
  e.target.style.backgroundColor = "green";
}

function init() {
  //Mouseover
  var divs = document.getElementsByTagName("div")[0];
  divs.addEventListener('mouseover', highlight, false);
  divs.addEventListener('mouseout', unhighlight, false);
}
window.addEventListener("load", init, false); 
```

HTML 看起来像这样

```
<div id="div1"></div>
<div id="div2"></div>
<div id="div3"></div>
<div id="div4"></div> 
```

显然当前代码只改变了其中一个 div，如何通过仅操作 JS 来选择所有 div

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T01:44:05.173

```
var elm = document.getElementsByTagName('div');

function highlight() {
    this.style.backgroundColor = "orange";
}

function unhighlight() {
    this.style.backgroundColor = "green";
}

function init() {
    for (var i = 0; i < elm.length; i++) {
        if (window.addEventListener) { //Firefox, Chrome, Safari, IE 10
            elm[i].addEventListener('mouseover', highlight, false);
            elm[i].addEventListener('mouseout', unhighlight, false);
        } else if (window.attachEvent) { //IE < 9
            elm[i].attachEvent('onmouseover', highlight);
            elm[i].attachEvent('onmouseout', unhighlight);
        }
    }
}

    if (window.addEventListener) { //when document is loaded initiate init
        document.addEventListener("DOMContentLoaded", init, false);
    } else if (window.attachEvent) {
        document.attachEvent("onDOMContentLoaded", init);
    } 
```

请注意，`addEventListener`IE < 9 不支持，您必须`attachEvent`改用

[演示](http://jsfiddle.net/arcm111/zzAcy/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T01:22:29.567

你不能那样使用`.addEventLister()`- 它必须逐个元素地调用。

```
for (var i = 0; i < divs.length; ++i)
  divs[i].addEventListener(...); 
```

或者，您可以向元素添加单个事件侦听`<body>`器并捕获从`<div>`元素中冒出的事件。

# actionscript-3 - 安全沙盒违规 Flash AS3

> ID：15801009
> 
> 赞同：2
> 
> 时间：2013-04-04T01:21:56.147
> 
> 标签：actionscript-3, flash, youtube, youtube-api

我正在尝试通过我的 Flash 项目播放 Youtube 视频。视频播放，但我得到下面的错误，它破坏了我的项目的其余部分。我找不到任何有这个确切错误的地方。我一直试图理解它在告诉我什么，但我就是无法理解它。错误：

```
*** Security Sandbox Violation ***
SecurityDomain 'http://s.ytimg.com/yts/swfbin/apiplayer3-vflmoXxFm.swf' 
tried to access incompatible context 'file:flashProject.swf' 
```

这是我为播放器准备的代码：

```
Security.allowDomain("www.youtube.com");

var my_player:Object;

var my_loader:Loader = new Loader();
my_loader.load(new URLRequest("http://www.youtube.com/apiplayer?version=3"));
my_loader.contentLoaderInfo.addEventListener(Event.INIT, onLoaderInit);

function onLoaderInit(e:Event):void{
addChild(my_loader);
my_player = my_loader.content;
my_player.addEventListener("onReady", onPlayerReady);
} 

function onPlayerReady(e:Event):void{
my_player.setSize(600,300);
my_player.cueVideoById("76BboyrEl48",0);
my_player.x = stage.stageWidth/2 - my_player.width/2;
my_player.y = stage.stageHeight/2 - my_player.height/2;
} 
```

这是我大学最后一年项目的一部分，所以如果有人有任何想法，我很乐意尝试一下。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T06:59:57.557

出于安全原因，FlashPlayer 将本地和远程（网络）两个沙箱分开。有时您只能使用其中之一，您不能同时加载两者的内容。从本地文件系统加载的每个 swf 都被考虑在本地沙箱中，其他所有内容都被考虑在网络沙箱中。

所以现在你的 swf 是从文件系统而不是从网络服务器加载的，flash 认为它在本地沙箱中，然后你的 swf 从远程/网络沙箱加载内容，即来自 www.youtube.com，正如我上面提到的，swf 在本地运行沙箱无法从远程沙箱加载内容，远程沙箱中的 swf 也无法从本地沙箱加载内容。所以错误是自然的。

`allowDomain()`仅允许来自同一沙箱的不同域，即您可以将 www.youtube.com 中的内容加载到从 www.yourdomain.com 加载的 swf 中

有关安全沙箱的更多信息，请参见：[http ://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e3f.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e3f.html)

现在解决您的问题：

1) 您可以从 localhost 设置本地 HTTP 服务器 locad swf。

2) 或者您可以将您的 swf 放入本地受信任的 swf 列表中。仅允许本地受信任的 swf 同时从两个沙箱加载内容。有关如何将您的 swf 放入本地受信任列表的信息，请参阅下面的链接。

[http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e3f.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e3f.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T07:16:05.447

尝试在您的项目中包含如下所示的 cross-domain.xml 文件。

```
<?xml version="1.0"?>
<cross-domain-policy>
   <site-control permitted-cross-domain-policies="all"/>
   <allow-access-from domain="*"/>
   <allow-http-request-headers-from domain="*" headers="*"/>
</cross-domain-policy> 
```

否则，请尝试在安全设置面板下添加您的内容。 [http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)

有关安全沙箱的更多信息，请参阅：[http ://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e3f.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e3f.html)

# google-cloud-storage - 无法让谷歌云存储在 CKAN 2.1a 上运行

> ID：15801011
> 
> 赞同：1
> 
> 时间：2013-04-04T01:22:15.813
> 
> 标签：google-cloud-storage, ckan

我从源代码安装了 CKAN 并尝试激活 Cloud Filestore 选项但没有成功。

我仔细检查了我的 Google API 控制台并激活了可互操作的访问密钥（GOOG ...），但无济于事。当我尝试上传时，我不断收到“无法上传文件”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:17:45.633

无法让它工作，所以只是切换到更简单的 S3。最近的 S3 价格下跌也有帮助 :)

# vb.net - vb中的脚本从服务器上的一个目录复制文件并将其粘贴到另一个目录中

> ID：15801012
> 
> 赞同：-3
> 
> 时间：2013-04-04T01:22:16.053
> 
> 标签：vb.net

我已经搜索了所有内容，似乎找不到可行的脚本。我想要做的就是有一个“故障转移脚本”，它将从我的服务器上的目录复制文件并将其粘贴到网络上不同服务器上的不同文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:39:50.077

然后只需使用复制方法 [Microsoft Copy 方法](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.filesystem.copydirectory.aspx)

[教程从 FTP 复制到服务器](http://www.codeproject.com/Articles/18739/Copy-from-FTP-server-to-local-Server-through-VB-Ne)

# node.js - 如何使用 node-http-proxy 进行 HTTP 到 HTTPS 路由？

> ID：15801014
> 
> 赞同：10
> 
> 时间：2013-04-04T01:22:17.143
> 
> 标签：node.js, http-proxy, node-http-proxy

这是我正在使用的模块版本：

```
$ npm list -g | grep proxy
├─┬ http-proxy@0.10.0 
```

一个网络服务调用我的机器，我的任务是将请求代理到不同的 url 和主机，并根据请求正文的内容使用额外的查询参数：

```
var http      = require('http'),
    httpProxy = require('http-proxy')
    form2json = require('form2json');

httpProxy.createServer(function (req, res, proxy) {
  // my custom logic
  var fullBody = '';
  req.on('data', function(chunk) {
      // append the current chunk of data to the fullBody variable
      fullBody += chunk.toString();
  });
  req.on('end', function() {
      var jsonBody = form2json.decode(fullBody);
      var payload = JSON.parse(jsonBody.payload);
      req.url = '/my_couch_db/_design/ddoc_name/_update/my_handler?id="' + payload.id + '"';

      // standard proxy stuff
      proxy.proxyRequest(req, res, {
        changeOrigin: true,
        host: 'my.cloudant.com',
        port: 443,
        https: true
      });
  });
}).listen(8080); 
```

但我一直遇到如下错误：`An error has occurred: {"code":"ECONNRESET"}`

任何人都知道这里需要修复什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-06T20:28:18.070

这对我有用：

```
var httpProxy = require('http-proxy');

var options = {
  changeOrigin: true,
  target: {
      https: true
  }
}

httpProxy.createServer(443, 'www.google.com', options).listen(8001); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-21T15:14:22.217

将端口上的所有请求转发`3000`到`https://google.com`：

```
const https = require('https')
const httpProxy = require('http-proxy')

httpProxy.createProxyServer({
  target: 'https://google.com',
  agent: https.globalAgent,
  headers: {
    host: 'google.com'
  }
}).listen(3000) 
```

[受https://github.com/nodejitsu/node-http-proxy/blob/master/examples/http/proxy-http-to-https.js](https://github.com/nodejitsu/node-http-proxy/blob/master/examples/http/proxy-http-to-https.js)启发的示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-24T13:30:07.793

经过一些试验和错误，这对我有用：

```
var fs = require('fs')
var httpProxy = require('http-proxy');
var https = require('https');

var KEY  = 'newfile.key.pem';
var CERT = 'newfile.crt.pem';

httpProxy.createServer({
  changeOrigin: true,
  target: 'https://example.com',
  agent: new https.Agent({
    port: 443,
    key: fs.readFileSync(KEY),
    cert: fs.readFileSync(CERT)
  })
}).listen(8080); 
```

# java - org.springframework.beans.factory.BeanCreationException：

> ID：15801018
> 
> 赞同：1
> 
> 时间：2013-04-04T01:22:52.947
> 
> 标签：java, spring, hibernate, h2

我正在尝试使用 hibernate4 + spring3 + H2 数据库开发我的第一个 JSF 应用程序，但我遇到了这个问题。

```
type Exception report

message Cant instantiate class: view.managed.FiloMB.

description The server encountered an internal error that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: Cant instantiate class: view.managed.FiloMB.
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)

root cause

com.sun.faces.mgbean.ManagedBeanCreationException: Cant instantiate class: view.managed.FiloMB.
    com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:193)
    com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:102)
    com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:408)
    com.sun.faces.mgbean.BeanManager.create(BeanManager.java:268)
    com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:72)
    org.apache.el.parser.AstValue.getValue(AstValue.java:161)
    org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
    com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    org.primefaces.util.ComponentUtils.getValueToRender(ComponentUtils.java:64)
    org.primefaces.component.inputtext.InputTextRenderer.encodeMarkup(InputTextRenderer.java:77)
    org.primefaces.component.inputtext.InputTextRenderer.encodeEnd(InputTextRenderer.java:51)
    javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:309)
    com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:437)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:120)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)

root cause

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [sets/spring.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/cache/CacheProvider
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:532)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:608)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    sets.SpringFactory.getInstance(SpringFactory.java:11)
    control.Control.<init>(Control.java:19)
    view.managed.MB.<init>(MB.java:21)
    view.managed.FiloMB.<init>(FiloMB.java:22)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    java.lang.Class.newInstance0(Class.java:374)
    java.lang.Class.newInstance(Class.java:327)
    com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:188)
    com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:102)
    com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:408)
    com.sun.faces.mgbean.BeanManager.create(BeanManager.java:268)
    com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:72)
    org.apache.el.parser.AstValue.getValue(AstValue.java:161)
    org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
    com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    org.primefaces.util.ComponentUtils.getValueToRender(ComponentUtils.java:64)
    org.primefaces.component.inputtext.InputTextRenderer.encodeMarkup(InputTextRenderer.java:77)
    org.primefaces.component.inputtext.InputTextRenderer.encodeEnd(InputTextRenderer.java:51)
    javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:309)
    com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:437)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:120)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)

root cause

java.lang.NoClassDefFoundError: org/hibernate/cache/CacheProvider
    java.lang.Class.getDeclaredMethods0(Native Method)
    java.lang.Class.privateGetDeclaredMethods(Class.java:2451)
    java.lang.Class.privateGetPublicMethods(Class.java:2571)
    java.lang.Class.privateGetPublicMethods(Class.java:2587)
    java.lang.Class.getMethods(Class.java:1429)
    org.springframework.beans.ExtendedBeanInfoFactory.supports(ExtendedBeanInfoFactory.java:53)
    org.springframework.beans.ExtendedBeanInfoFactory.getBeanInfo(ExtendedBeanInfoFactory.java:44)
    org.springframework.beans.CachedIntrospectionResults.<init>(CachedIntrospectionResults.java:236)
    org.springframework.beans.CachedIntrospectionResults.forClass(CachedIntrospectionResults.java:152)
    org.springframework.beans.BeanWrapperImpl.getCachedIntrospectionResults(BeanWrapperImpl.java:321)
    org.springframework.beans.BeanWrapperImpl.getPropertyDescriptorInternal(BeanWrapperImpl.java:351)
    org.springframework.beans.BeanWrapperImpl.isWritableProperty(BeanWrapperImpl.java:427)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1393)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1132)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:608)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    sets.SpringFactory.getInstance(SpringFactory.java:11)
    control.Control.<init>(Control.java:19)
    view.managed.MB.<init>(MB.java:21)
    view.managed.FiloMB.<init>(FiloMB.java:22)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    java.lang.Class.newInstance0(Class.java:374)
    java.lang.Class.newInstance(Class.java:327)
    com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:188)
    com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:102)
    com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:408)
    com.sun.faces.mgbean.BeanManager.create(BeanManager.java:268)
    com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:72)
    org.apache.el.parser.AstValue.getValue(AstValue.java:161)
    org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
    com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    org.primefaces.util.ComponentUtils.getValueToRender(ComponentUtils.java:64)
    org.primefaces.component.inputtext.InputTextRenderer.encodeMarkup(InputTextRenderer.java:77)
    org.primefaces.component.inputtext.InputTextRenderer.encodeEnd(InputTextRenderer.java:51)
    javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:309)
    com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:437)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:120)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)

root cause

java.lang.ClassNotFoundException: org.hibernate.cache.CacheProvider
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    java.lang.Class.getDeclaredMethods0(Native Method)
    java.lang.Class.privateGetDeclaredMethods(Class.java:2451)
    java.lang.Class.privateGetPublicMethods(Class.java:2571)
    java.lang.Class.privateGetPublicMethods(Class.java:2587)
    java.lang.Class.getMethods(Class.java:1429)
    org.springframework.beans.ExtendedBeanInfoFactory.supports(ExtendedBeanInfoFactory.java:53)
    org.springframework.beans.ExtendedBeanInfoFactory.getBeanInfo(ExtendedBeanInfoFactory.java:44)
    org.springframework.beans.CachedIntrospectionResults.<init>(CachedIntrospectionResults.java:236)
    org.springframework.beans.CachedIntrospectionResults.forClass(CachedIntrospectionResults.java:152)
    org.springframework.beans.BeanWrapperImpl.getCachedIntrospectionResults(BeanWrapperImpl.java:321)
    org.springframework.beans.BeanWrapperImpl.getPropertyDescriptorInternal(BeanWrapperImpl.java:351)
    org.springframework.beans.BeanWrapperImpl.isWritableProperty(BeanWrapperImpl.java:427)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1393)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1132)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:608)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    sets.SpringFactory.getInstance(SpringFactory.java:11)
    control.Control.<init>(Control.java:19)
    view.managed.MB.<init>(MB.java:21)
    view.managed.FiloMB.<init>(FiloMB.java:22)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    java.lang.Class.newInstance0(Class.java:374)
    java.lang.Class.newInstance(Class.java:327)
    com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:188)
    com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:102)
    com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:408)
    com.sun.faces.mgbean.BeanManager.create(BeanManager.java:268)
    com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
    com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
    com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:72)
    org.apache.el.parser.AstValue.getValue(AstValue.java:161)
    org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
    com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    org.primefaces.util.ComponentUtils.getValueToRender(ComponentUtils.java:64)
    org.primefaces.component.inputtext.InputTextRenderer.encodeMarkup(InputTextRenderer.java:77)
    org.primefaces.component.inputtext.InputTextRenderer.encodeEnd(InputTextRenderer.java:51)
    javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:309)
    com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:437)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:120)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.35 logs. 
```

这是我的 spring.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

    <!-- Conexão com banco de dados -->
    <bean id="dataSource" class="sets.Connect" />
    <!-- Hibernate -->
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="annotatedClasses">
            <list>
                <value>model.Reino</value>
                <value>model.Filo</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.H2Dialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">create</prop>
            </props>
        </property>
        <property name="dataSource" ref="dataSource" />
    </bean>
    <!-- Injeta uma sessão do hibernate -->
    <bean id="hibernateTemplate" class="org.springframework.orm.hibernate3.HibernateTemplate">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
    <!-- DAOs -->
    <bean id="genericDAO" class="persistence.GenericDAO">
        <!-- Injeta esse objeto hibernateTemplate dentro do DAO -->
        <property name="hibernateTemplate" ref="hibernateTemplate" />
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:52:45.887

class="org.springframework.orm.hibernate3 **.annotation.AnnotationSessionFactoryBean** "

但是您使用的是hibernate4？

可能要检查该配置。

# sql - SQL Server 排序缓慢，有许多常见值

> ID：15801019
> 
> 赞同：0
> 
> 时间：2013-04-04T01:22:55.363
> 
> 标签：sql, sql-server, sorting

我有一个带有客户姓名的发票视图，诸如此类。

这里有几百万行，超过几百个客户。视图速度快如闪电 - 但如果我在客户名称上添加排序，则加载需要一段时间（如 3000 毫秒与 5 毫秒相比）。

该查询将发票连接到客户，然后按客户名称排序，然后按订单号排序。

我明白为什么 - 只是想知道是否有任何技巧可以提高排序速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:30:19.403

您可以在客户 ID/名称上添加索引。

您可以按客户按表分区。

这`order by`将需要很长时间，因为——没有索引——它必须读取所有数据。如果您使用索引或表分区，则无需读取整个表即可获取行。

详细说明索引。有两个考虑。首先是您是选择所有行还是仅选择几行。在大多数情况下，索引肯定有助于缩短返回第一条记录的时间。

第二个考虑是索引是否有助于获取所有记录。这里的问题是选择性。如果发票表中的一个数据页有几百条记录，而客户只有几百个，那么索引将无济于事。平均而言，每个页面都会有每个客户。

如果一个数据页面只有几十张发票，那么平均而言，大约十分之一的页面会有给定的客户发票——瞧，索引会将全表扫描的 I/O 减少一个因子大约 10 个。（还有其他考虑因素，例如预读，但我跳过了这些。）

您没有提供有关系统和表结构的足够信息以获得明确的答案，但索引可能很有用。

# python - 如何对python中的字典列表进行插入排序？

> ID：15801027
> 
> 赞同：1
> 
> 时间：2013-04-04T01:24:03.390
> 
> 标签：python, list, dictionary, insertion-sort

我有一个带有各种键的字典列表，它们都是整数，我需要编写一个使用插入排序的函数来按特定键对它们进行排序。

```
def insertionsort(alldata, key):
    for i in alldata :
    temp = alldata[i]
    j = i
    while j > 0 and alldata[i['key']] < alldata[j - 1['key']]: # no idea how to put this
        alldata[j] = alldata[j-1]
    alldata[j] = temp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:40:50.660

`i['key']`看起来像错误。你没有`key`在这里使用你的变量。

尝试`alldata[i][key] < alldata[j - 1][key]`作为条件

您还需要更改`j`您的 while 循环，否则它可以永远运行

```
def insertionsort(alldata, key):
    for i in alldata :
        temp = alldata[i]
        j = i
        while j > 0 and alldata[i][key] < alldata[j - 1][key]:
           alldata[j] = alldata[j - 1]
           j -= 1
        alldata[j] = temp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T01:43:59.683

for 循环之后的每一件事都应该再缩进 1 次（无论你使用多少个空格来缩进） 至于其他问题，我不知道。

# macos - 如何编写 Mac PCL 打印机驱动程序？

> ID：15801037
> 
> 赞同：1
> 
> 时间：2013-04-04T01:25:16.817
> 
> 标签：macos, driver, postscript, printer-control-language, cups

我目前正在为 Mac 开发打印机驱动程序，它应该支持 PS（postscript）和 PCL 打印机。我已经有了支持 PS 的想法（通过在 PPD 和 PDE 中定义自定义 CUPS postscript 过滤器）。

我不知道支持 PCL 打印机。

a) CUPS 是否自动支持 PCL？

b) 如果对 a) 的回答为“是”，当打印到 PCL 打印机时会调用我的 PS 过滤器吗？（我在我的 PS 过滤器的打印数据中添加了一些 PJL）。

c) 如果对 a) 的回答是否定的，那么我应该如何实现对 PCL 的支持？（我需要将一些 PJL 添加到将发送到打印机的 PCL 数据中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T13:11:06.137

你见过[https://developer.apple.com/legacy/library/samplecode/SampleRaster/Introduction/Intro.html](https://developer.apple.com/legacy/library/samplecode/SampleRaster/Introduction/Intro.html) 吗？

在摆弄 Xcode 构建路径和构建设置之后，我让它工作了。它是一个带有杯子后端和过滤器的完整打印机驱动程序。

亲切的问候，

罗伯特

# mysql - Joomla SQL 错误 0

> ID：15801039
> 
> 赞同：1
> 
> 时间：2013-04-04T01:25:38.253
> 
> 标签：mysql, sql, joomla

我在某些链接上收到此错误：

```
Error: 0 - SQL=
SELECT id FROM jos_content WHERE catid = AND alias = 'android-tutorials' 
```

我该如何解决？

我可以将此重定向到 404 页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T01:26:37.503

提供一个值以与列进行比较`catID`

```
SELECT id FROM jos_content WHERE catid =   AND alias = 'android-tutorials'
                                        ^ missing value here 
```

# html - PHP include() 在 HTML 中创建了不需要的空白

> ID：15801043
> 
> 赞同：1
> 
> 时间：2013-04-04T01:26:20.300
> 
> 标签：html, header, footer, html-entities, php-include

我有一个包含 PHP 中的页眉（菜单）和页脚的文档：

```
<?php include('header.php'); ?>
<?php include('footer.php'); ?> 
```

出于某种原因，当在浏览器上打开时，它会在两者之间呈现间隙，而没有任何边距或 CSS 样式：

![使用 php include() 时的 HTML 间隙](https://i.stack.imgur.com/otMju.jpg)

这是生成的代码的一部分，差距出现在 `</header>﻿&lt;footer>`：

```
<div class="ClearFloat"></div>
</nav>
</header>﻿&lt;footer>
<div class="MainWrapper">
<ul>
<li>&copy; Copyright 2013</li> 
```

如果我使用 firebug 进行检查，我确实会在代码中看到一个空白：

```
</nav>
</header>

﻿&lt;footer>
<div class="MainWrapper">
<ul> 
```

此外，如果我尝试在 firebug 中编辑代码，我会在出现间隙的地方得到一个奇怪的实体编号`&#65279;`：：

```
</nav>
</header>&#65279;<footer>
<div class="MainWrapper">
<ul> 
```

这与php有关，因为如果我直接在页面中编写页眉和页脚的HTML，差距就会消失：

![不使用 php include() 时 HTML 空白消失](https://i.stack.imgur.com/RhJV4.jpg)

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T01:45:10.350

**根据** [为什么是 ﻿ 出现在我的 HTML 中？](https://stackoverflow.com/questions/9691771/why-is-65279-appearing-in-my-html)

**它可能有一个简单的修复！**

> **有问题的字符 ﻿ 是在复制/粘贴或错误期间附加到您的代码的 Unicode 字符“零宽度无间隔”（U + FEFF）保存它很容易修复，只需通过以下方式打开该文件notepad++ 和 step follow --> `Encoding->Encode in UTF-8 without BOM`。然后保存。它也对我有用！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T01:34:49.920

有问题的字符 ﻿ 是 Unicode 字符“零宽度无间隔”（U+FEFF）。可能是您通过复制/粘贴将其复制到代码中而没有意识到。

# java - 从 Java Servlet 上传到 Google Cloud Storage 时图像损坏

> ID：15801044
> 
> 赞同：0
> 
> 时间：2013-04-04T01:26:30.507
> 
> 标签：java, google-app-engine, google-cloud-storage, xmlhttprequest-level2

我正在为 Java Servlet 开发代码来处理表单图像 POST ，并将该图像上传到 Google Cloud Storage。我可以使用 XMLHttpRequest 和 FormData 上传执行 ajax 调用 POST 的图像。我面临的是大多数时候存储的图像已损坏，无法打开。像这个（[http://storage.googleapis.com/realtimevouchers/Porto_ribeira.jpg](http://storage.googleapis.com/realtimevouchers/Porto_ribeira.jpg)），但图像在我的文件系统上还可以。这可能是处理 servlet 代码中的流的错误吗？

这是servlet代码：

```
protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {

    response.setContentType("application/json");
    response.setCharacterEncoding("UTF-8");

    String ajaxUpdateResult = "";
    ServletFileUpload upload = new ServletFileUpload();
    String filePath = "";

    try {
        FileItemIterator iter = upload.getItemIterator(request);

        while (iter.hasNext()) {
            FileItemStream item = iter.next();

            String fileName = item.getName();
            System.out.println("Nome ficheiro->" + fileName);
            String mimeType = item.getContentType();
            System.out.println("mimeType->" + mimeType);
            InputStream content = item.openStream();

            // Process the input stream
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            int len;
            byte[] buffer = new byte[8192];
            while ((len = content.read(buffer, 0, buffer.length)) != -1) {
                baos.write(buffer, 0, len);
            }
            int maxFileSize = 10 * (1024 * 1024); // 10 megs max
            if (baos.size() > maxFileSize) {
                throw new RuntimeException("File is > than " + maxFileSize);
            }

            FileService fileService = FileServiceFactory.getFileService();

            java.util.Date date = new java.util.Date();
            java.sql.Timestamp timeStamp = new Timestamp(date.getTime());
            System.out.println("DEBUG:upload timeStamp->" + timeStamp);

            GSFileOptionsBuilder optionsBuilder = new GSFileOptionsBuilder()
                    .setBucket(BUCKETNAME).setKey(fileName)
                    .setMimeType(mimeType).setAcl("public_read")
                    .addUserMetadata("uploadTimeStamp", timeStamp.toString());
            AppEngineFile writableFile = fileService
                    .createNewGSFile(optionsBuilder.build());

            // Open a channel to write to it
            boolean lock = true;
            FileWriteChannel writeChannel = fileService.openWriteChannel(
                    writableFile, lock);
            // Different standard Java ways of writing to the channel
            // are possible.

            // This time we write to the channel directly
            writeChannel.write(ByteBuffer.wrap(buffer));

            // Now finalize
            writeChannel.closeFinally();
            filePath = writableFile.getFullPath();

            // Do whatever with the content InputStream.
            // System.out.println(Streams.asString(content));//binary

            ajaxUpdateResult += "File " + fileName
                    + " is successfully uploaded\n\r";

        }

    } catch (FileUploadException e) {
        throw new ServletException("Parsing file upload failed.", e);
    }
    org.json.JSONObject json = new JSONObject();
    try {
        json.put("operationStatus", "SUCCESS");
        json.put("operationExecuted", "POST_TO_GCS");
        json.put("filePath", filePath);
    } catch (JSONException e) {
        e.printStackTrace();
    }
    System.out.println("DEBUG:" + json.toString());
    log.info("LOGGER" + json.toString());
    response.getWriter().println(json.toString());
    response.getWriter().print(ajaxUpdateResult);
} 
```

# javascript - 节俭节点javascript命名空间

> ID：15801057
> 
> 赞同：2
> 
> 时间：2013-04-04T01:28:05.590
> 
> 标签：javascript, node.js, conflict, thrift

我似乎遇到了节点/节俭命名空间冲突。

```
Foo.thrift
...
struct Error {
    1: i32 code,
    2: string message
}
... 
```

通过`thrift --gen js:node Foo.thrift`（thrift v0.9.0）生成以下文件

```
Foo_types.js
...
Error = module.exports.Error = function(args) {
  this.code = null;
  this.message = null;
  if (args) {
    if (args.code !== undefined) {
      this.code = args.code;
    }
    if (args.message !== undefined) {
      this.message = args.message;
    }
  }
};
Error.prototype = {};
Error.prototype.read = function(input) {
... 
```

我在节点中包含模块

```
var FooTypes = require('./../gen-nodejs/Foo_types') 
```

我似乎遇到了与 javascript 的 Error 对象的命名空间冲突

```
callback(new Error("Couldn't find profile")); 
```

在回调中，它显示我有一个对象，它带有`code`一个`message`包含“消息”的普通旧 JS 错误，即使我没有要求`FooTypes.Error`.

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Error](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Error)

有没有其他人遇到过这个？如何引用普通的 JS 错误？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:42:31.370

您缺少名称空间声明。试试这个：

```
# Foo.thrift file content
namespace js Foo
...
struct Error {
    1: i32 code,
    2: string message
}
... 
```

那么你的节俭对象将是`Foo.Error`.

# ms-access - 如果 DOB 在“n”天内，则从 Access 发送电子邮件

> ID：15801059
> 
> 赞同：1
> 
> 时间：2013-04-04T01:28:23.347
> 
> 标签：ms-access, vba

我需要访问它，以便在他们的出生日期在 3 天内向某个客户发送电子邮件。

```
Dim rs as dao.recordset
set rs = currentdb.openrecordset(“DiscountEmail”)
with rs
    if .eof and .bof then (No Records found for this query.)
        Msgbox “ No emails will be sent because there are no records from the query ‘DiscountEmail’ “
    else
        do until .eof 

            DoCmd.SendObject acSendNoObject, , , ![Email Address Field], , , “Happy Birthday!”, “Hello ” & ![First Name Field] & _
                    “, ” & Chr(10) & “Come in on your birthday and receive a 10% discount!”, False

            .edit
            ![Email_Sent_Date] = now()
            .update
            .movenext 
        loop

    End If
end with

If Not rs Is Nothing Then
    rs.Close
    Set rs = Nothing
End If 
```

我有这个代码，但现在我只需要这样做，如果某个客户的生日（在我的表“CustomerInfo”中）在 3 天内，它会向他们发送一封电子邮件，说他们可以在生日那天进来并收到一个折扣。

另外，我想让它自动发生（所以我不必按任何按钮），但它只发送一次，所以我可以明年再发送一次。

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:11:24.240

您需要有一些事件才能触发此事件。Access 数据库只是一个文件，因此当您不使用它时，它不会运行任何代码。

每次打开数据库时都做一个简单的检查，也许在第一个表单的 On Load 事件上是要走的路。我假设您的`DiscountEmail`RecordSet 是在 3 天内查询电子邮件的记录集。

您的解决方案是将其放在第一个表单的 onLoad 事件中或使用其他服务。只要不多次向收件人发送垃圾邮件，只需添加一个`emailSent`字段或将已发送的电子邮件记录到不同的表中，并在电子邮件发送后进行处理。

查找相关电子邮件的示例查询：

```
Select email from Users Where dateOfBirth between dateAdd("d",-3,Date()) AND dateAdd("d",3,Date()); 
```

发送电子邮件，您可以使用 SMTP 和 CDO。创建一个名为类似的电子邮件功能`sendEmail`

```
 Public Sub SendEmail(strTo as STring, strFrom as String, strSubj as String, strBody as String)
Dim imsg As Object
Dim iconf As Object
Dim flds As Object
Dim schema As String

Set imsg = CreateObject("CDO.Message")
Set iconf = CreateObject("CDO.Configuration")
Set flds = iconf.Fields

' send one copy with SMTP server (with autentication)
schema = "http://schemas.microsoft.com/cdo/configuration/"
flds.Item(schema & "sendusing") = cdoSendUsingPort
flds.Item(schema & "smtpserver") = "mail.myserver.com" 'your info here
flds.Item(schema & "smtpserverport") = 25
flds.Item(schema & "smtpauthenticate") = cdoBasic
flds.Item(schema & "sendusername") = "email@email.com"  'more of your info
flds.Item(schema & "sendpassword") = "password"
flds.Item(schema & "smtpusessl") = False
flds.Update

With imsg
    .To = strTo
    .From = strFrom
    .Subject = strSubj
    .HTMLBody = strBody
    '.body    = strBody
    '.Sender = "Sender"
    '.Organization = "My Company"
    '.ReplyTo = "address@mycompany.com"
    Set .Configuration = iconf
    .Send
End With

Set iconf = Nothing
Set imsg = Nothing
Set flds = Nothing
 End Sub 
```

您可以遍历查询的结果集并为每封电子邮件调用 sendmail 函数，或者编写一个快速帮助函数，将您的电子邮件字段获取并连接到“;” 分隔列表，只需将电子邮件与多个收件人一起发送一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:41:51.277

如果您的问题的本质是关于电子邮件本身的实际发送，那么您可能会发现这`DoCmd.SendObject`可能不是最好的方法。它有几个限制，最重要的是（参考：[here](http://www.fmsinc.com/microsoftaccess/email/sendobject.html)）

*   消息文本限制为 255 个字符
*   它取决于与电子邮件客户端应用程序的交互（我假设是通过 MAPI），因此如果没有配置邮件客户端，或者邮件客户端不是 Microsoft 产品，它可能无法工作

相反，您可以考虑通过 CDO 发送消息。这里有一篇很好的文章和一些现成的 VBA 代码：

[http://www.cpearson.com/excel/Email.aspx](http://www.cpearson.com/excel/Email.aspx)

# python - python不支持的操作数类型问题

> ID：15801065
> 
> 赞同：0
> 
> 时间：2013-04-04T01:29:20.723
> 
> 标签：python

我正在为一场高尔夫球比赛编写一个用户界面，其中有一个包含联盟球员姓名的文本文件。用户输入每个球员的 9 洞成绩，然后返回每个球员的总分、标准杆数和小鸟球。我收到此错误：

```
Traceback (most recent call last):
  File "<pyshell#18>", line 1, in <module>
    main()
  File "/Users/tinydancer9454/Documents/python/golfRound.py", line 101, in main
    enterScores(l, players)
  File "/Users/tinydancer9454/Documents/python/golfRound.py", line 114, in enterScores
    p.recordScores(holeScores)
  File "/Users/tinydancer9454/Documents/python/golfRound.py", line 42, in recordScores
    self.__gross = sum(holeScores)
TypeError: unsupported operand type(s) for +: 'int' and 'str' 
```

我真的不知道如何解决它，因为我不应该更改 Player 或 League 类。

```
class Player:
""" Represents a player in the golf league """

    PAR = [4, 3, 4, 3, 4, 5, 4, 3, 5]
    """ par for each of the 9 holes """

    def __init__(self, name):
        """ creates a Player and keeps track of stats """
        self.__name = name
        self.__pars = 0
        self.__birdies = 0
        self.__gross = 0

    def getName(self):
        """ returns a player's name """
        return self.__name

    def getGross(self):
        """ returns a player's gross score """
        return self.__gross

    def getPars(self):
        """ returns number of pars made """
        return self.__pars

    def getBirdies(self):
        """ returns number of birdies made """
        return self.__birdies

    def recordScores(self, holeScores):
        """ mutator method that uses the results of one round of play
          (9 holes) to update a player's stats """
        self.__gross = sum(holeScores)
        self.__findparsandbirdies(holeScores)

    def __findparsandbirdies(self, scores):
        """ helper method that finds the number of pars and birdies """

        pars = 0
        birdies = 0
        hole = 0
        for score in scores:
            if score == Player.PAR[hole]:
                pars += 1
            if score == Player.PAR[hole] - 1:
                birdies += 1
            hole += 1
        self.__pars = pars
        self.__birdies = birdies

    def __str__(self):
        """ returns a string representation of a player """
        return 'a Player named ' + self.__name

class League:
""" represents the players of a golf league """

    def __init__(self, fileName = 'players.txt'):
        """ creates a list of Player objects from the
            names stored in the file specified """
        self.__playerList = []
        datafile = open(fileName, 'r')
        for line in datafile:
            playerName = line.rstrip()
            player = Player(playerName)
            self.__playerList.append(player)

    def getNumPlayers(self):
        """ returns the number of players is the league """
        return len(self.__playerList)

    def getPlayerbyPosition(self, position):
        """ returns the player at the specified position """
        return self.__playerList[position]

    def getPlayerbyName(self, name):
        """ returns the player with the specified name """
        for player in self.__playerList:
            if player.getName() == name:
                return player
        return None

    def __str__(self):
        return 'a golf league with ' + str(self.getNumPlayers()) + ' players'

def main():
    """The input and output for the program"""
    l= League()
    players= []
    enterScores(l, players, position)
    isValidScore(holeScores)
    output(players)

def enterScores(l, players, position):
    """enter the scores"""
    for position in range(l.getNumPlayers()):
        holeScores= input(("Please enter a list of the player's scores: "))
        while not isValidScore(holeScores):
            holeScores= input(("Please enter a valid list of scores: "))
        p= l.getPlayerbyPosition(position)
        players.append(p)
        p.recordScores(holeScores)

def isValidScore(holeScores):
    """checks if the scores entered for a single hole are 1 to 10, inclusive"""
    for score in holeScores:
        if score == 1 or 2 or 3 or 4 or 5 or 6 or 7 or 8 or 9 or 10:
            return True
        else:
            return False                

def output(grossScore, pars, birdies):
    """prints output"""
    for player in players:
        print(player.getName())
        print('Gross score:', player.getGross())
        print('Pars: ', player.getPars())
        print('Birdies: ', player.getBirdies()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:34:51.243

如果您使用的是 Python 3，`holeScores`则为字符串，而不是整数。你需要把它变成一个数字列表：

```
user_input = input("Please enter a valid list of scores: ")
holeScores = [int(score) for score in user_input.split()] 
```

此外，这条线不会做你认为它做的事情：

```
if score == 1 or 2 or 3 or 4 or 5 or 6 or 7 or 8 or 9 or 10: 
```

它将被评估为：

```
if (score == 1) or (2) or ... 
```

这将评估为`True`. 只需这样做：

```
for score in scores:
    if not (1 <= score  <= 10):
        return False

return True 
```

# ruby - Rspec 初学者。默认目录在哪里？

> ID：15801067
> 
> 赞同：4
> 
> 时间：2013-04-04T01:29:31.367
> 
> 标签：ruby, rspec

非常快速的问题。我只是在学习在 rails/Rspec 上使用 Ruby/ruby，而且我对所有这些都没有先验知识，所以这非常困难。关于 Rspec 和运行测试。每个资源都在说“使用 lib 目录”。那是什么目录？它在哪里？我正在使用 Windows。有人可以告诉我该目录的确切路径和位置吗？任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T01:32:15.403

许多使用 Rspec 的项目将项目布局如下：

```
my_project
+ lib
  - some_library.rb
+ spec
  - spec_helper.rb
  - lib
    - some_library_spec.rb
  ...other files, directories... 
```

所以`lib`目录只是指`my_project/lib/`上面的目录。为方便起见，RSpec会自动将它添加到 Ruby`$LOAD_PATH`中，这就是人们通常将 Ruby 模块放在该目录（如果存在）中的原因。

# java - 从进程打印 Java InputStream

> ID：15801069
> 
> 赞同：6
> 
> 时间：2013-04-04T01:29:40.133
> 
> 标签：java, printing, inputstream

`UPDATE: I found a crucial part to why this probably isn't working! I used System.setOut(out); where out is a special PrintStream to a JTextArea`

这是代码，但我遇到的问题是，只有在我结束进程后才会打印出信息。

```
public Constructor() {
    main();
}

private void main() {
    btnStart.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            try {
                ProcessBuilder builder = new ProcessBuilder("java", textFieldMemory.getText(), "-jar", myJar);
                Process process = builder.start();
                InputStream inputStream = process.getInputStream();
                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream), 1);
                String line;
                while ((line = bufferedReader.readLine()) != null) {
                    System.out.println(line);
                }
                inputStream.close();
                bufferedReader.close();
            } catch (IOException ioe) {
                ioe.printStackTrace();
            }
        }
    });
} 
```

电流输出：

```
Line 1
Line 2
Line 3
Line 4
Line 5 
```

这是正确的输出，但是当我结束该过程时，它只会被打印为一个大块。

有谁知道问题是什么？如果是这样，你能帮我解释一下为什么会这样，提前谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T02:20:03.827

在单独的线程中处理进程的输出流可能会有所帮助。您还希望在继续执行逻辑之前显式等待进程结束：

```
ProcessBuilder builder = new ProcessBuilder("java",
        textFieldMemory.getText(), "-jar", myJar);
final Process process = builder.start();
final Thread ioThread = new Thread() {
    @Override
    public void run() {
        try {
            final BufferedReader reader = new BufferedReader(
                    new InputStreamReader(process.getInputStream()));
            String line = null;
            while ((line = reader.readLine()) != null) {
                System.out.println(line);
            }
            reader.close();
        } catch (final Exception e) {
            e.printStackTrace();
        }
    }
};
ioThread.start();

process.waitFor(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T02:21:22.323

基本上，从很少的信息来看，这听起来像是您在执行进程并`InputStream`从事件调度线程中读取。

任何阻止 EDT 的东西都会阻止它处理重绘请求，相反，您应该使用类似 a 的东西，`SwingWorker`它具有允许您使用 EDT 更新 UI 的功能。

查看[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)获取更多详细信息

![在此处输入图像描述](https://i.stack.imgur.com/1FsuN.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingWorker;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class PBDemo {

    public static void main(String[] args) throws Exception {
        new PBDemo();
    }

    public PBDemo() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new BorderLayout());
            JTextArea ta = new JTextArea();
            add(new JScrollPane(ta));

            new ProcessWorker(ta).execute();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }
    }

    public interface Consumer {
        public void consume(String value);            
    }

    public class ProcessWorker extends SwingWorker<Integer, String> implements Consumer {

        private JTextArea textArea;

        public ProcessWorker(JTextArea textArea) {
            this.textArea = textArea;
        }

        @Override
        protected void process(List<String> chunks) {
            for (String value : chunks) {
                textArea.append(value);
            }
        }

        @Override
        protected Integer doInBackground() throws Exception {
            // Forced delay to allow the screen to update
            Thread.sleep(5000);
            publish("Starting...\n");
            int exitCode = 0;
            ProcessBuilder pb = new ProcessBuilder("java.exe", "-jar", "HelloWorld.jar");
            pb.directory(new File("C:\\DevWork\\personal\\java\\projects\\wip\\StackOverflow\\HelloWorld\\dist"));
            pb.redirectError();
            try {
                Process pro = pb.start();
                InputConsumer ic = new InputConsumer(pro.getInputStream(), this);
                System.out.println("...Waiting");
                exitCode = pro.waitFor();

                ic.join();

                System.out.println("Process exited with " + exitCode + "\n");

            } catch (Exception e) {
                System.out.println("sorry" + e);
            }
            publish("Process exited with " + exitCode);
            return exitCode;
        }

        @Override
        public void consume(String value) {
            publish(value);
        }
    }

    public static class InputConsumer extends Thread {

        private InputStream is;
        private Consumer consumer;

        public InputConsumer(InputStream is, Consumer consumer) {
            this.is = is;
            this.consumer = consumer;
            start();
        }

        @Override
        public void run() {
            try {
                int in = -1;
                while ((in = is.read()) != -1) {
//                    System.out.print((char) in);
                    consumer.consume(Character.toString((char)in));
                }
            } catch (IOException exp) {
                exp.printStackTrace();
            }
        }
    }
} 
```

# jsp - 从 JSP 到控制器的隐藏输入

> ID：15801074
> 
> 赞同：2
> 
> 时间：2013-04-04T01:30:26.697
> 
> 标签：jsp, controller, hidden

我试图将数据从 JSP 发送到控制器。

我的 JSP 中有这样的东西：

```
..
<form action="add.html" method="get">
<input type="hidden" name="type" value="<c:out value='${type}'/>"/>
<input type="submit" value="Add">
</form>
.. 
<input type="text" name="type"> 
```

我应该写什么而不是 attr 值来传递数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T02:20:42.967

如果某个字段被隐藏，您通常会将其传递下去，因为您在提交表单后需要它。它就像一个不应该改变的最终变量。

所以你要么想要：

```
<form action="add.html" method="get">
    <input type="hidden" name="myValueAttr" value="${myValueAttr}" />
    <input type="submit" value="Add">
</form> 
```

或者：

```
<form action="add.html" method="get">
    <input type="text" name="myValueAttr" />
    <input type="submit" value="Add">
</form> 
```

我猜你想要后者。这是完整说明的链接：[将对象从 JSP 页面传递回 Servlet](https://stackoverflow.com/questions/4253660/passing-object-from-jsp-to-servlet?answertab=active#tab-top)

# cobol - 如何添加页码 (COBOL)

> ID：15801076
> 
> 赞同：3
> 
> 时间：2013-04-04T01:30:37.320
> 
> 标签：cobol

好的，所以我正在做作业，但后来我发现我被要求为每 4 条记录添加页码和更改页面。因为它是一门在线课程，我认为讲座视频中没有任何关于页码的内容。所以主要问题是

1.  要添加包含日期和页码的标题，
2.  每页打印 4 条记录，即打印 4 条记录后需要换页。

我真的不知道该怎么做。

这是我完成的代码：

```
 ENVIRONMENT DIVISION.
   FILE-CONTROL.   SELECT STOCK-IN ASSIGN TO 'F:/CS201S13/PROJECT2.TXT'
                   ORGANIZATION IS LINE SEQUENTIAL.
                   SELECT STOCK-OUT ASSIGN TO 'F:/CS201S13/PROJECT2OUTPUT.TXT'
                   ORGANIZATION IS LINE SEQUENTIAL.
   DATA DIVISION.
   FILE SECTION.
   FD STOCK-IN.
   01 STOCK-RECORD.
       05 ST-TRANSACTION-INFORMATION.
           10 ST-TRANSACTION-SHARES    PIC 9(3).
           10 ST-TRANSACTION-STOCK     PIC X(14).
       05 ST-PURCHASE-INFORMATION.
           10 ST-PURCHASE-PRICE        PIC 9(5)V99.
           10 ST-PURCHASE-DATE.
               15 ST-PURCHASE-YEAR     PIC 99.
               15 ST-PURCHASE-MONTH    PIC 99.
               15 ST-PURCHASE-DAY      PIC 99.
       05 ST-SALE-INFORMATION.
           10 ST-SALE-PRICE            PIC 9(5)V99.
           10 ST-SALE-DATE.
               15 ST-SALE-YEAR         PIC 99.
               15 ST-SALE-MONTH        PIC 99.
               15 ST-SALE-DAY          PIC 99.
   FD STOCK-OUT. 
   01 STOCK-RECORD-OUT.
       05 ST-TRANSACTION-INFORMATION-OUT.
           10 ST-TRANSACTION-SHARES-OUT PIC 9(3).
           10 ST-TRANSACTION-STOCK-OUT  PIC X(14).
       05 TOTAL-PURCHASE               PIC 9(8)V99.
       05                              PIC X(4).
       05 TOTAL-SALE                   PIC 9(8)V99.
       05                              PIC X(4).
       05 TOTAL-PROFIT                 PIC 9(8)V99.
       05                              PIC X(4).
       05 ST-PURCHASE-DATE-OUT.
           10 ST-PURCHASE-YEAR-OUT     PIC 99.
           10                          PIC X VALUE '/'.
           10 ST-PURCHASE-MONTH-OUT    PIC 99.
           10                          PIC X VALUE '/'.
           10 ST-PURCHASE-DAY-OUT      PIC 99.
       05                              PIC X(4).
       05 ST-SALE-DATE-OUT.
           10 ST-SALE-YEAR-OUT         PIC 99.
           10                          PIC X VALUE '/'.
           10 ST-SALE-MONTH-OUT        PIC 99.
           10                          PIC X VALUE '/'.
           10 ST-SALE-DAY-OUT          PIC 99.
       05                              PIC X(4).
       05 RECORD-OUT                   PIC 9 VALUE 0.
       05 PAGE-OUT                     PIC 9.
   WORKING-STORAGE SECTION.
   01 ARE-THERE-MORE-RECORDS PIC XXX VALUE 'YES'.
   01 IS-THIS-PAGE-FULL      PIC XXX VALUE 'NO '.
   PROCEDURE DIVISION.
   100-MAIN-PROCESS.
   OPEN INPUT STOCK-IN
        OUTPUT STOCK-OUT
   MOVE ST-TRANSACTION-INFORMATION TO ST-TRANSACTION-INFORMATION-OUT
   PERFORM UNTIL ARE-THERE-MORE-RECORDS = 'NO '
       READ STOCK-IN
           AT END
               MOVE 'NO ' TO ARE-THERE-MORE-RECORDS
           NOT AT END
               PERFORM 200-PROCEDURE-RTN
               ADD 1 TO RECORD-OUT
       END-READ
   END-PERFORM
   CLOSE STOCK-IN
         STOCK-OUT
   STOP RUN.
   200-PROCEDURE-RTN.
   IF RECORD-OUT = 4
       MOVE 'YES' TO IS-THIS-PAGE-FULL
       MOVE 0 TO RECORD-OUT
       MOVE 'NO ' TO IS-THIS-PAGE-FULL
       ADD 1 TO PAGE-OUT
   END-IF
   MULTIPLY ST-PURCHASE-PRICE BY ST-TRANSACTION-SHARES GIVING TOTAL-PURCHASE
   MULTIPLY ST-SALE-PRICE BY ST-TRANSACTION-SHARES GIVING TOTAL-SALE
   SUBTRACT TOTAL-PURCHASE FROM TOTAL-SALE GIVING TOTAL-PROFIT
   WRITE STOCK-RECORD-OUT. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T10:17:27.343

你们既近又远。

“关闭”是因为在将 IS-THIS-PAGE-FULL 设置为 YES 和 NO 之间需要一些代码。

“远离”，因为您有很多事情要做，而不仅仅是“修补”您拥有的东西。

程序是在编写输出文件 (STOCK-OUT)*和*报告，还是 STOCK-OUT 是报告？如果是报告，请更改名称，以便清楚地表明它是报告，而不是输出文件。

如果这看起来很多，请不要担心。您应该学习如何在 Cobol 中编程，以及学习 Cobol。不会在一夜之间发生。

没有特别的顺序：

*   始终包括 FILE-STATUS 检查所有文件上的所有 IO 操作。目前，如果您的输入无法打开并且系统没有使程序失败（即使您的程序失败，您可能正在学习 Cobol 以便能够使用*任何*系统，而不仅仅是您拥有的系统），那么将不会有任何记录读，你的“文件结束测试”永远不会是，你会有一个 BFL（大胖循环）。通过 FILE-STATUS 检查，生成有用的消息，包括适用于失败 READ 或 WRITE 的键/参考/记录号。

你可能会觉得这是很多工作。但是，将一些包含所有内容的“模板”文件放在一起，然后每次将它们粘贴（甚至复制）到您的程序中。

*   您在 FD 中有 VALUE 子句。这些不会像你想的那样。

*   您的页数只有一位数，这不太可能有一般应用。

*   为什么使用 YES 和 NO 作为文字？查看与“条件名称”相关的 SET 动词，使用 88 进行测试和“标志/开关”。

*   在打开输入之后但在读取记录之前，您有“MOVE ST-TRANSACTION-INFORMATION”，并且在程序中只有一个对它的引用。这是行不通的。

*   对于读取文件，请查看“启动读取”方法。

    读取输入循环直到文件结束（文件状态为 88）处理数据读取输入结束循环

这避免了 AT END/NOT AT END，允许处理标题（如果存在）和“空文件”而不会阻塞主逻辑。代码“扩展”了标题/拖尾（包括正确的数量）、键的序列检查等，但您只需要编码一次然后“模板化”它。

*   根据 FD 中的 VALUE 子句，您希望 RECORD-OUT 为零，因此对 4 的测试实际上会在第一页得到 5 个，然后是 4 个。

*   你总是假设会有一个“利润”（一个正数），这是不现实的，但你不允许“利润”有一个有符号的值。

现在，为了报告。

对于您的报告 FD，只需将其简单化，即打印行的长度。

在 WORKING-STORAGE 中，为您需要的标题和标题定义数据。定义打印行的数据。由于您在 WORKING-STORAGE 中，请将不会将数据移至 PROCEDURE DIVISION 的所有内容的值。

当你写了四个项目（或者当你的程序告诉你这个）并且你有第五个时，写下标题和标题，记住更新页码。

我说“或者当你的程序告诉你这个”是因为你可以将“写入的记录”的原始值设置为 4。评论它，以便清楚它是你想要的，以及你想要它的原因。原因是，您不必再处理“第一次”标题和其他事情。第一次，或者在“控制中断”时（我想你很快就会得到那些）将“已经在页面上完成”设置为页面的最大值，并且标题会在你想要的时候弹出。

格式化打印行。执行一个 para 来打印它（这是“页面已满”测试的地方）。

注意：您可以在日期中为您的“/”使用 VALUE，也可以在图片中使用“/”编辑字符，如下所示：

```
05  an-input-date PIC X(8) (can be other definitions).
...
05  date-to-print PIC X(4)/XX/XX.
...
MOVE an-input-date TO date-to-print 
```

我希望看到您使用的是“最少的句号/句号”。你可以走得更远一点。

```
MOVE an-input-date TO date-to-print
. 
```

然后你在一个段落中得到你的最后一个句号/句号，而不会将它“附加”到任何特定的代码行，这使得“折腾代码”更容易，因为你不必考虑“我需要/不需要需要那个句号/句号”。

您还可以在此处查看一些 Cobol 问题，并掌握一些一般提示和建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T05:37:57.750

这可能有帮助，也可能没有帮助，如果不支持 LINAGE，您将不得不进行一些明确的计数。

```
 *****************************************************************
  * Example of LINAGE File Descriptor
  * Author: Brian Tiffin
  * Date:   10-July-2008
  * Tectonics: $ cobc -x linage.cob
  *            $ ./linage <filename ["linage.cob"]>
  *            $ cat -n mini-report
  *****************************************************************
   IDENTIFICATION DIVISION.
   PROGRAM-ID. linage-demo.

   ENVIRONMENT DIVISION.
   INPUT-OUTPUT SECTION.
   FILE-CONTROL.
      select optional data-file assign to file-name
          organization is line sequential
          file status is data-file-status.
      select mini-report assign to "mini-report".

   DATA DIVISION.
   FILE SECTION.
   FD  data-file.
   01  data-record.
      88 endofdata        value high-values.
      02 data-line        pic x(80).
   FD  mini-report
      linage is 16 lines
          with footing at 15
          lines at top 2
          lines at bottom 2.
   01  report-line         pic x(80).

   WORKING-STORAGE SECTION.
   01  command-arguments   pic x(1024).
   01  file-name           pic x(160).
   01  data-file-status    pic 99.
   01  lc                  pic 99.
   01  report-line-blank.
      02 filler           pic x(18) value all "*".
      02 filler           pic x(05) value spaces.
      02 filler           pic x(34)
          VALUE "THIS PAGE INTENTIONALLY LEFT BLANK".
      02 filler           pic x(05) value spaces.
      02 filler           pic x(18) value all "*".
   01  report-line-data.
      02 body-tag         pic 9(6).
      02 line-3           pic x(74).
   01  report-line-header.
      02 filler           pic x(6) VALUE "PAGE: ".
      02 page-no          pic 9999.
      02 filler           pic x(24).
      02 filler           pic x(5) VALUE " LC: ".
      02 header-tag       pic 9(6).
      02 filler           pic x(23).
      02 filler           pic x(6) VALUE "DATE: ".
      02 page-date        pic x(6).

   01  page-count          pic 9999.

   PROCEDURE DIVISION.

   accept command-arguments from command-line end-accept.
   string
      command-arguments delimited by space
      into file-name
   end-string.
   if file-name equal spaces
      move "linage.cob" to file-name
   end-if.

   open input data-file.
   read data-file
      at end
          display
               "File: " function trim(file-name)
               " open error or empty"
          end-display
          go to early-exit
   end-read.

   open output mini-report.

   write report-line
      from report-line-blank
   end-write.

   move 1 to page-count.
   accept page-date from date end-accept.
   move page-count to page-no.
   write report-line
      from report-line-header
      after advancing page
   end-write.

   perform readwrite-loop until endofdata.

   display
      "Normal termination, file name: "
      function trim(file-name)
      " ending status: "
      data-file-status
   end-display.
   close mini-report.

  * Goto considered harmful?  Bah!  :)
   early-exit.
   close data-file.
   exit program.
   stop run.

  ****************************************************************
   readwrite-loop.
   move data-record to report-line-data
   move linage-counter to body-tag
   write report-line from report-line-data
      end-of-page
          add 1 to page-count end-add
          move page-count to page-no
          move linage-counter to header-tag
          write report-line from report-line-header
              after advancing page
          end-write
   end-write
   read data-file
      at end set endofdata to true
   end-read
   .

  *****************************************************************
  * Commentary
  * LINAGE is set at a 20 line logical page
  *  16 body lines
  *   2 top lines
  *   A footer line at 15 (inside the body count)
  *   2 bottom lines
  * Build with:
  * $ cobc -x -Wall -Wtruncate linage.cob
  * Evaluate with:
  * $ ./linage
  * This will read in linage.cob and produce a useless mini-report
  * $ cat -n mini-report
  *****************************************************************
   END PROGRAM linage-demo. 
```

# full-text-search - 语义网/本体在信息检索中的应用？

> ID：15801084
> 
> 赞同：0
> 
> 时间：2013-04-04T01:32:09.497
> 
> 标签：full-text-search, search-engine, semantic-web, information-retrieval, ontology

语义网在信息检索中的用途是什么。语义网在这里我的意思是，像 DBPedia、Freebase 这样的结构化创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:45:16.470

我已经在几个项目中将 RDF 中的信息与 Lucene 集成在一起，我认为您可以从集成中获得的很多价值是您可以超越 Lucene 通常启用的简单关键字搜索。这为对您的 RDF 信息进行全文搜索提供了可能性，同时也提供了语义丰富的全文搜索。

在前一种情况下，SPARQL 中没有“like”运算符，并且 regex 函数虽然与 SQL like 具有类似的能力，但对于任何可观大小的数据集进行评估都不是很容易处理。但是，如果您能够使用 lucene 进行搜索而不是依赖正则表达式，则可以通过 RDF 上的单个关键字搜索获得更好的规模和性能。

在后一种情况下，如果查询引擎与 lucene text/rdf 索引集成，想想[LARQ](http://jena.apache.org/documentation/larq/)（[Jena](http://jena.apache.org)和[Stardog](http://stardog.com)都支持这一点），您可以对全文索引进行更复杂的语义搜索。诸如“获取至少有 10 条评论并且评论包含“两个竖起大拇指”的短语的所有类型的电影”之类的查询很难用 lucene 索引来摆动，但在 Lucene 和 SPARQL 的交叉点中变得非常微不足道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T13:45:28.633

您可以在信息检索中使用 DBpedia，因为它具有来自 Wikipedia 的结构化信息。由于维基百科几乎了解所有感兴趣的主题，包括文章、类别、信息框，这些知识在信息检索系统中用于以三元组的形式提取有意义的信息，即主语、谓语和宾语。

您可以使用以下端点通过 SPARQL 查询信息：[Endpoint to query the information from DBpedia](http://dbpedia.org/sparql)

# excel - 在 Excel 2011 中比较 2 个工作表中的数据

> ID：15801093
> 
> 赞同：0
> 
> 时间：2013-04-04T01:33:23.440
> 
> 标签：excel, excel-2011, vba

我有一个带有 2 张按字母顺序排列的企业列表的 Excel 工作簿，一张是今年的，另一张是去年的。2012 年的列表具有分配给它们的类别，而 2013 年的则没有。

我想将 2012 年列表中的类别复制到仍然存在的 2013 年列表中。我该怎么做呢？我已经做了很多谷歌搜索，但对于如何解决这个问题却一无所获。

2012 年上市

```
Business Name     Category
Business A        Services       
Business B        Shopping
Business C        Automotive 
```

2013 年新房源

```
Business Name     Category
Business A        Services       
Business C        Automotive
New Business      ??? 
```

对于新业务，我需要手动决定它们属于什么，但就目前而言，我什至不知道哪些业务需要类别。还有很多其他专栏，但在本期中，它们并不重要。

我在 Excel 方面的经验非常有限，因此您可以提供的任何手把手都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:07:18.990

假设您的 2012 列表在 Sheet1 中，并且标题行从 A1 开始，在 Sheet2 中具有类似的 2013 设置。然后，从 Sheet2 的单元格 B2（或另一列）开始的以下查找公式将带来类别：

```
 =VLOOKUP(A2,Sheet1!$A$2:$B$6,2,0) 
```

如果 2012 年没有为 2013 年列出的企业分配类别，则此公式将返回 N/A 错误值，表明您需要分配类别。

# php - 多个 ModRewrite - .htaccess

> ID：15801094
> 
> 赞同：1
> 
> 时间：2013-04-04T01:33:27.743
> 
> 标签：php, .htaccess, mod-rewrite

我正在尝试进行两次 mod 重写。让我解释。

- 我需要一个重写，如果不存在文件或目录，则重定向到用户页面。| *我已经这样做了。* - 接下来，我想从**.php**文件中删除扩展名。

我已经完成了第一个，我只是不知道我该怎么做第二个？

我的代码已经：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.*)$ users.php?name=$1 [QSA,L] 
```

*所以我需要的是，我只需要删除 .php 扩展名并保持当前的重写工作。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:06:30.940

这应该是您完整的 .htaccess：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## To internally forward /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*?)/?$ $1.php [L]

## redirect to a userpage
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ users.php?name=$1 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T01:41:07.053

删除 .php 扩展名：

```
RewriteEngine On
# turn on the mod_rewrite engine

RewriteCond %{REQUEST_FILENAME}.php -f
# IF the request filename with .php extension is a file which exists
RewriteCond %{REQUEST_URI} !/$
# AND the request is not for a directory
RewriteRule (.*) $1\.php [L]
# redirect to the php script with the requested filename 
```

只需指出：

[http://www.mysite.com/index](http://www.mysite.com/index)

# php - 函数不会返回值

> ID：15801095
> 
> 赞同：0
> 
> 时间：2013-04-04T01:33:40.593
> 
> 标签：php, string, function, return

```
$html = ' some html here <br>';

function sql($mysqli,$html){

        $stmt = $mysqli->prepare("SELECT * FROM `jobs` WHERE `out` is null");
$stmt->execute();
$stmt->store_result();
$stmt->bind_result($job_id,$vin,$yr,$mk,$mdl,$color,$miles_in,$miles_out,$quoted,$price,$phone,$customer,$bal,$tax,$msg,$in,$out);

        $stmt = $mysqli->prepare("SELECT * FROM jobs a WHERE a.in between ? and ?");
        $stmt->bind_param('ss', $startday, $endday);

        $startday = '2013-01-01';
        $endday = '2013-12-31';

        $stmt->execute();
        $stmt->store_result();

        $stmt->bind_result($job_id,$vin,$yr,$mk,$mdl,$color,$miles_in,$miles_out,$quoted,$price,$phone,$customer,$bal,$tax,$msg,$in,$out);

        while($stmt->fetch()){ 
```

下面是具有两种不同方法的同一行：注释部分有效，但我无法获得将相同值添加到 html 字符串的函数，然后在使用 php 代码完成后将其返回给脚本。

```
 $html.= $vin.' - '.$count.' <br> '; // echo $vin.' - '.$count.' <br> ';

$count++;
        }
        return $html;
}

sql($mysqli,$html);
echo $html; 
```

我的输出是“这里的一些 html”，这是因为这是定义字符串的方式。我希望让这个函数添加从 mysql 查询中提取的值，然后将它们添加到我可以在所有 php.ini 文件末尾打印出来的字符串中。如果我们使用 echo 而不是 $html 连接，函数的输出是

```
12345 - <br>
123 - 1 <br>
1236485 - 2 <br> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:38:31.720

那是因为`$html`它是按值传递的，它的新值是从函数本身返回的。

呼应`sql()`自身的结果将产生正确的价值。

```
echo sql($mysqli,$html); 
```

或者，您可以将新值重新分配给`$html`first：

```
$html = sql($mysqli, $html);
echo $html; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T01:39:14.763

通过引用传递它：

```
function sql($mysqli,&$html){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T01:40:00.533

尝试使用 `echo sql($mysqli, $html);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T01:47:24.050

也许您的问题是您的 $startday 在您的 $endday 之后。顺序与“之间”很重要。此外，您可能还希望在开始日和结束日中包含时间部分，否则如果开始日和结束日是同一日期，您将无法获得当天的结果。像这样：`WHERE a.in BETWEEN '2013-04-01 00:00:00' AND '2013-04-01 23:59:59'`

# css - 修改标题样式

> ID：15801096
> 
> 赞同：1
> 
> 时间：2013-04-04T01:33:41.757
> 
> 标签：css, sharepoint, sharepoint-designer

我的目标很简单，我只想将 Title="New" 修改为更大的尺寸和颜色，我确实使用了 CSS，但它不起作用:(

```
<style type="text/css">
#g_523a7cea_3249_4ac1_b2bc_48efea016ad1
{
color: Blue;
}
</style>    

<WebPartPages:DataFormWebPart runat="server"
Description="" ListDisplayName="" PartOrder="2"
Default="FALSE" HelpLink="" AllowRemove="True" IsVisible="True"
AllowHide="True" UseSQLDataSourcePaging="True" ExportControlledProperties="True"
DataSourceID="" Title="News" ViewFlag="8" NoDefaultStyle="TRUE" AllowConnect="True"
DisplayName="Employee News" PageType="PAGE_DISPLAYFORM" FrameState="Normal"
PageSize="-1" PartImageLarge="" AsyncRefresh="False" ExportMode="All" Dir="Default"
DetailLink="" ShowWithSampleData="False" ListId="645a16cc-7fe6-4247-9800-2170e1479074"
ListName="{645A16CC-7FE6-4247-9800-2170E1479074}" FrameType="Default" PartImageSmall=""
IsIncluded="True" SuppressWebPartChrome="False" AllowEdit="True" ManualRefresh="False"
AutoRefresh="False" AutoRefreshInterval="60" AllowMinimize="True" ViewContentTypeId=""
InitialAsyncDataFetch="False" CssStyleSheet="" MissingAssembly="Cannot import this Web Part."
HelpMode="Modeless" ListUrl="" ID="g_523a7cea_3249_4ac1_b2bc_48efea016ad1"
ConnectionID="00000000-0000-0000-0000-000000000000" AllowZoneChange="True"
IsIncludedFilter="" __MarkupType="vsattributemarkup" __WebPartId="{A7755E5E-BE3F-4415-A163-BAA925625A0E}"
__AllowXSLTEditing="true" WebPart="true" Height="" Width=""> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:35:44.707

用样式替换脚本。脚本用于 javascript。样式用于 css

```
<style type='text/css'> ... </style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T01:51:15.900

渲染页面并查看 HTML 代码中的 ID，然后应用 CSS。我几乎可以肯定 ID 是不同的，这就是它不起作用的原因（几乎在所有使用 Web 控件的地方都会发生，尤其是在 ASP 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T07:00:01.727

ID 用于 DVWP。没有***一种***风格可以一举应用于整个 DVWP。在 DVWP 内部，对于不同的元素，还有许多其他 CSS 类，它们将被应用，覆盖任何东西，即使您***可以***将 Web 部件 ID 用于 CSS 格式。

DVWP 通常显示在表格中。TH、TR、TD等有不同的类别和风格。如果你想改变外观，那么你需要为表格元素处理这些类。

# java - 高效地向 cassandra 插入大量数据

> ID：15801102
> 
> 赞同：3
> 
> 时间：2013-04-04T01:34:33.107
> 
> 标签：java, cassandra, hector

我想在 cassandra 中插入大约 5000 万行（每行约 30 列），目前只有 1 个节点。

我正在从另一个数据源查询我的数据并存储在一个表对象中。我遍历单独解析每一行，然后将其添加到 mutator。目前我一次插入 100 行，100 万行需要 40 分钟！如何加快这个过程？（我也尝试过 client.batch_mutate() 但它似乎在插入几千块块大小 2 后重置了连接错误）。

通过四处搜索，我发现多线程可以提供帮助。但是我找不到任何例子，有人可以链接我吗？谢谢你 ！！

我当前的代码：

```
 List<String> colNames = new ArrayList<String>();
        List<String> colValues = new ArrayList<String>();
        SomeTable result = Query(...); // this contains my result set of 1M rows initially

        for (Iterator itr = result.getRecordIterator(); itr.hasNext();) {
                String colName =.....
                String colValue = .....

            int colCount = colNames.size(); // 100 * 30

            for (int i = 0; i < colCount; i++) {
                //add row keys and columns to mutator 
                mutator.addInsertion(String.valueOf(rowCounter), "data", HFactory.createStringColumn(colNames.get(i), colValues.get(i)));
            }
            rowCounter++;

            //insert rows of block size 100
            if (rowCounter % 100==0) { 

                mutator.execute();
                //clear data
                colNames = new ArrayList<String>();
                colValues = new ArrayList<String>();
                mutator = HFactory.createMutator(keyspace, stringSerializer);
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:40:22.360

多线程会有很大帮助，是的。目前，您在 Cassandra 中使用一个连接，这意味着您在 Cassandra 中仅使用一个线程。您需要使用多个连接，这需要客户端中的多个线程。

一种方法是使用 Java ThreadPoolExecutor 并将您的 mutator.execute() 包装在一个可运行文件中并在线程池上执行它。注意处理异常。您还应该使用 BlockingQueue 来限制排队突变的数量，以防您读取源代码的速度快于 Cassandra 插入的速度。

有了这个，将 Hector 中的连接池大小设置为 10，您的插入应该会明显更快。

顺便说一句，如果您不知道，Cassandra 并不是为单节点操作而设计的。我假设您打算扩展和添加复制。如果没有，那么您可能会找到一种更高效、更简单的替代解决方案来满足您的需求。使用多个节点时，多个连接和线程变得尤为重要，因此您的插入率可以扩展。

# branch-prediction - 两位分支预测应该给出更高的百分比

> ID：15801103
> 
> 赞同：1
> 
> 时间：2013-04-04T01:34:42.550
> 
> 标签：branch-prediction

我有一个小程序，它应该计算 2 位分支预测器的成功预测百分比。我已经完成了所有工作，但我的输出不是我所期望的，百分比停止在 91% 左右，而不是我认为应该是 98% 或 99%。我认为问题可能在于如何将掩码应用于地址。有人可以查看我的代码并验证这是否是问题所在。

该程序遍历一个文件，该文件具有 gcc 编译器运行的分支历史记录，该历史记录由大约 1792 个地址和一个数字列组成，其中 1 表示已采用分支，0 表示未采用分支。

```
static void twoBitPredictor_v1(StreamWriter sw)
    {
        uint hxZero = 0x000000000;
        uint uMask1 = 0x00000000;
        int nCorrectPrediction = 0;
        uint uSize2;
        int nSize;
        int nTotalReads;
        int nTableMin = 2;
        int nTableMax = 16;
        int nTaken = 0;
        uint[] uArrBt1;

        sw.WriteLine("\n\nTwo-Bit Predictor Results Ver. 1\n");
        sw.WriteLine("-------------------------\n");
        sw.WriteLine("Total" + "\t" + "Correct");
        sw.WriteLine("Reads" + "\t" + "Prediction" + "\t" + "Percentage");
        System.Console.WriteLine("\n\nTwo-Bit Predictor Results Ver. 1\n");
        System.Console.WriteLine("-------------------------\n");
        System.Console.WriteLine("Total" + "\t" + "Correct");
        System.Console.WriteLine("Reads" + "\t" + "Prediction" + "\t" + "Percentage");

        for (int _i = nTableMin; _i <= nTableMax; _i++)
        {
            StreamReader sr2 = new StreamReader(@"C:\Temp\gccHist.txt");
            nSize = _i;
            uSize2 = (uint)(Math.Pow(2, nSize));
            uArrBt1 = new uint[2 * uSize2];

            for (int i = 0; i < uSize2; i++)
                uArrBt1[i] = hxZero;

            nCorrectPrediction = 0;
            nTotalReads = 0;

            while (!sr2.EndOfStream)
            {
                String[] strLineRead = sr2.ReadLine().Split(',');
                uint uBRAddress = Convert.ToUInt32(strLineRead[0], 16);
                uint bBranchTaken = Convert.ToUInt32(strLineRead[2]);

   >>>>>   In the line below is where I think lies the problem but not sure how to correct it.
                uMask1 = uBRAddress & (0xffffffff >> 32 - nSize);
                int _mask = Convert.ToInt32(uMask1);
                nTaken = Convert.ToInt32(uArrBt1[2 * _mask]);

                switch (Convert.ToInt32(uArrBt1[_mask]))
                {
                    case 0:

                        if (bBranchTaken == 0) // Branch Not Taken
                            nCorrectPrediction++;
                        else
                            uArrBt1[_mask] = 1;

                        break;

                    case 1:

                        if (bBranchTaken == 0)
                        {
                            uArrBt1[_mask] = 0;
                            nCorrectPrediction++;
                        }
                        else
                            uArrBt1[_mask] = 3;

                        break;

                    case 2:

                        if (bBranchTaken == 0)
                        {
                            uArrBt1[_mask] = 3;
                            nCorrectPrediction++;
                        }
                        else
                            uArrBt1[_mask] = 0;

                        break;

                    case 3:

                        if (bBranchTaken == 0)
                            uArrBt1[_mask] = 2;
                        else                                
                            nCorrectPrediction++;

                        break;                    
                }
                nTotalReads++;
            }
            sr2.Close();
            double percentage = ((double)nCorrectPrediction / (double)nTotalReads) * 100;
            sw.WriteLine(nTotalReads + "\t" + nCorrectPrediction + "\t\t" + Math.Round(percentage, 2) + "%");
            System.Console.WriteLine(nTotalReads + "\t" + nCorrectPrediction + "\t\t" + Math.Round(percentage, 2) + "%");
        }
    } 
```

这是输出：

```
Two-Bit Predictor Results Ver. 1
-------------------------

Total   Correct
Reads   Prediction      Percentage
1792    997             55.64%
1792    997             55.64%
1792    1520            84.82%
1792    1522            84.93%
1792    1521            84.88%
1792    1639            91.46%
1792    1651            92.13%
1792    1649            92.02%
1792    1649            92.02%
1792    1648            91.96%
1792    1646            91.85%
1792    1646            91.85%
1792    1646            91.85%
1792    1646            91.85%
1792    1646            91.85% 
```

# android - 是否可以为标注图形制作 9 补丁可绘制？

> ID：15801110
> 
> 赞同：9
> 
> 时间：2013-04-04T01:35:18.733
> 
> 标签：android, graphics, nine-patch

我正在尝试在 Android 中制作标注图形。我不同意使用 9-patch-drawable 的想法，但我认为这是正确的方法。我实际上是在尝试制作一个底部带有小块的按钮。无论内容的大小如何，我都希望小块居中。以下是一些示例图形，显示了我想要的外观：

![简短的标注](https://i.stack.imgur.com/dWjDc.png) ![长标注](https://i.stack.imgur.com/msRW1.png)

有没有办法使用 9-patch drawable 保持底部小块居中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T01:43:12.457

> 有没有办法使用 9-patch drawable 保持底部小块居中？

是的，一点没错。事实上，9 补丁绝对是正确的方法。

只需让您的 9-patch 有两个可拉伸区域：一个在小块的左侧，一个在右侧。您需要确保两个区域同样“大”。换句话说：定义水平可拉伸区域的两条水平黑线应该具有相等的长度 - 这将使小块保持在水平中心。

以下是[mapview-balloons](https://github.com/jgilfelt/android-mapviewballoons)库中的两个图像示例：

![在此处输入图像描述](https://i.stack.imgur.com/SPLGc.png) ![在此处输入图像描述](https://i.stack.imgur.com/tUGBk.png)

# java - 适合存储java项目信息的数据结构

> ID：15801111
> 
> 赞同：1
> 
> 时间：2013-04-04T01:35:30.400
> 
> 标签：java, eclipse, eclipse-jdt

我正在使用 AST 解析器从项目的 java 源代码中提取信息。信息包括：类名、方法、它们的返回类型以及参数和变量。那么哪种类型的数据结构适合存储这些信息，因为在存储之后我将使用它来检测设计模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:42:56.157

数据结构可以帮助您高效地存储、检索、更新和删除。我认为这不能直接帮助您检测设计模式。

# c++ - 尝试使用矢量时出错

> ID：15801113
> 
> 赞同：2
> 
> 时间：2013-04-04T01:35:43.407
> 
> 标签：c++, visual-studio-2010, vector, stl

在我的文件*main.h*的顶部，我有：

```
#include <vector>

class Blah
{
  public:
    Blah(){}
    ~Blah(){}
  protected:
    vector<int> someVector;
  public:
    //methods
}; 
```

当我尝试编译时，向量声明行给出了错误：

> 错误 C2143：语法错误：缺少“；” 在'<'之前
> 
> 错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数
> 
> 错误 C2238：';' 前面的意外标记

我无法弄清楚是什么原因造成的。有人看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T01:37:09.537

该类`vector`是`std`命名空间的一部分。您需要将您的声明`std::vector<int>`替换为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T01:37:12.440

它在`std`命名空间中：

`std::vector<int> someVector;`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T01:37:34.743

[vector](http://en.cppreference.com/w/cpp/container/vector)是*std 命名空间*的一部分，因此您需要添加`std::`到您的声明中：

```
std::vector<int> someVector; 
```

由于该建议是在另一个答案中提出的，我也想劝阻使用，`using namespace std`因为它被[认为是不好的做法](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-08T15:18:00.677

而不是使用，

> std::vector someVector;

总是尝试使用，

> 使用命名空间标准；

因为它会帮助你不要一次又一次地输入“std::”，这不是一个好的做法。

# javascript - Ember.TextField 在 keyup 事件上提交

> ID：15801118
> 
> 赞同：0
> 
> 时间：2013-04-04T01:36:32.810
> 
> 标签：javascript, ember.js, handlebars.js

我有带有以下搜索输入字段的 Handlebars 视图：

```
{{view Ember.TextField valueBinding="controller.query" action="submit"}} 
```

当用户在搜索输入字段中按下“Enter”时，我们会调用外部 API，获取响应，并相应地查询结果。这是控制器（简化）版本的代码：

```
App.ProductsController = Ember.ArrayController.extend({
  submit: function(query) {
  // call to external api
  // get response
  // update some values
  }
}); 
```

我们如何在 keyUp 事件上触发“提交”功能而不是“回车”？换句话说，每次用户从输入字段中添加或删除字符时，控制器中的“提交”功能是否可以重新运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T10:14:40.653

如果你使用

HB:

```
{{view Ember.TextField valueBinding="controller.query"
                       action="submit" class="my-input"}} 
```

然后在视图中您需要订阅`keyUp`事件。由于事件会在整个视图中触发（在这种情况下，仅适用于视图内支持此类事件、输入、内容可编辑等的元素），因此您需要检查您正在寻找的输入。

js：

```
App.ProductsView = Ember.View.extend({
  keyUp: function (e) {
    if ($(e.target).hasClass('my-input')) { // you can use other identifier
      this.get('controller').submit(e.target.value);
    }
  }
}); 
```

另一个想法是扩展`Ember.TextField`类：

HB:

```
{{view App.ProductTextField valueBinding="controller.query"
                            action="submit"}} 
```

js：

```
App.ProductTextField = Ember.TextField.extend({
  keyUp: function (e) {
      this.get('controller').submit(e.target.value);
  }
}); 
```

实际上，您不需要从视图将参数传递给方法，因为控制器在变量`submit`中已经拥有此信息是最新的。`query`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:38:52.757

[按照这个](http://emberjs.com/guides/views/handling-events/)，我想你可以添加

```
keyUp: function(evt) {
  this.get('controller').send('submit'); 
} 
```

或者可能

```
keyUp: function(evt) {
  this.get('controller').send('submit', this.get('controller.query')); 
} 
```

到您的视图（或者更确切地说是扩展视图`Ember.TextField`）。

另一种可能性可能是使用`{{action "submit" controller.query on="keyUp"}}`，但我不太确定如何将它与`{{view}}`助手结合使用。

# java - 在 Spring Web Flow 中格式化绑定日期字段

> ID：15801119
> 
> 赞同：2
> 
> 时间：2013-04-04T01:36:36.843
> 
> 标签：java, spring, spring-mvc, spring-webflow

我在格式化 spring webflow 表单中绑定的 Date 字段的内容时遇到问题。事情的验证结束正在工作，并正确执行我的注释中指定的日期格式。但是无论我尝试什么，我都无法控制绑定日期字段（预先填充了当前日期）的初始显示格式。我正在使用 Spring 3.1.2.RELEASE、Webflow 2.3.2.RELEASE 和 joda-time 2.2。

表单中的日期字段最初填充例如“Thu Apr 04 02:01:06 BST 2013”​​，而我希望它包含“04:04:2013”​​。（不要介意带有冒号的有趣格式 - 我只是避免使用常见的测试格式！）

如果我改写它，例如 13:01:2013 并提交，绑定工作正常，webflow 继续。过度输入，例如 13/01/2013 会导致验证失败并出现 ValueCoercionException，并且网页上的字段会重新填充“Thu Apr...”字符串。因此，至少验证似乎没问题。

我知道@DateTimeFormat 注释既可以用作打印机，也可以用作解析器，但我就是无法让打印机工作。

这是我的代码的相关位...

event_add.xml（网络流）

```
<var name="event" class="project.persistence.DTO.EventDTO"/>
...
<view-state id="event_enterdates" model="flowScope.event">
    <transition on="submit" to="saveEvent" />
</view-state> 
```

EventDTO.java

```
public class EventDTO implements Serializable {
    private static final long serialVersionUID = 1L;
    private Integer         id;
    private String          name;
    @DateTimeFormat(pattern="dd:MM:yyyy")
    private Date            eventDate;
    ...
} 
```

event_enterdates.jsp

```
<sf:form method="POST" commandName="event">
<input type="hidden" name="_flowExecutionKey" value="${flowExecutionKey}"/>
...
<div class="grid_3 formitemname"><label for="event_date">Event date:</label></div>
<div class="grid_3">
<sf:input path="eventDate" maxlength="255" id="event_date" class="form9colinput"/>
...
</sf:form> 
```

项目-servlet.xml

```
<mvc:annotation-driven />

<context:component-scan base-package="project"></context:component-scan>

<flow:flow-executor id="flowExecutor" flow-registry="flowRegistry" />

<flow:flow-registry id="flowRegistry" base-path="/WEB-INF/flows" flow-builder-services="flowBuilderServices">
    <flow:flow-location-pattern value="*.xml" />
</flow:flow-registry>

<flow:flow-builder-services id="flowBuilderServices" conversion-service="defaultConversionService" view-factory-creator="viewFactoryCreator" />

<bean id="viewFactoryCreator" class="org.springframework.webflow.mvc.builder.MvcViewFactoryCreator">
    <property name="viewResolvers" ref="tilesViewResolver" />
</bean>

<bean class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
    <property name="flowRegistry" ref="flowRegistry" />
</bean>

<bean class="org.springframework.webflow.mvc.servlet.FlowHandlerAdapter">
    <property name="flowExecutor" ref="flowExecutor" />
</bean>

<bean id="defaultConversionService" class="org.springframework.binding.convert.service.DefaultConversionService">
    <constructor-arg ref="applicationConversionService"/>
</bean>

<bean id="applicationConversionService" class="org.springframework.format.support.FormattingConversionServiceFactoryBean" /> 
```

任何人都知道如何让我的绑定日期以@DateTimeFormat 模式中指定的格式显示？

干杯，伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T11:58:38.820

您是否尝试过使用属性编辑器。Spring 已经有一个可用于转换日期。

在您`@Controller`处理请求的过程中，您将指示 spring 转换*为特定格式和从*特定格式转换：

```
@InitBinder
protected void initBinder(final WebDataBinder binder) { 
    binder.registerCustomEditor(Date.class, new CustomDateEditor(new SimpleDateFormat("dd:MM:yyyy") , false));
} 
```

# themes - Opencart 无法加载区域/状态下拉列表

> ID：15801126
> 
> 赞同：0
> 
> 时间：2013-04-04T01:37:25.867
> 
> 标签：themes, state, opencart, region

我正在使用带有主题（sancart）的opencart 1.5.5.1，并且遇到了一个非常烦人的错误。

在结帐/购物车和帐户/注册模块中，区域/州字段的下拉菜单不会加载相对值（我猜称为 zone 或 zone_id）并且保持空白。

相反，相同的功能在作为访客或用户注册的模块结帐/结帐过程中运行良好。

谷歌搜索我注意到这是一个非常常见的错误，有很多主题，尤其是那些使用 SSH 的人（这不是我的情况），但我找不到任何真正的解决方案。

[您可以在 URL http://i-tec.pro](http://i-tec.pro)看到我的网站（ID：guest，密码：itec2013）

注册.tpl

```
 <?php echo $header; ?>
<?php if ($error_warning) { ?>
<div class="warning"><?php echo $error_warning; ?></div>
<?php } ?>
<?php echo $column_left; ?><?php echo $column_right; ?>
<div id="content"><?php echo $content_top; ?>
  <div class="breadcrumb">
    <?php foreach ($breadcrumbs as $breadcrumb) { ?>
    <?php echo $breadcrumb['separator']; ?><a href="<?php echo $breadcrumb['href']; ?>"><?php echo $breadcrumb['text']; ?></a>
    <?php } ?>
  </div>
  <h1><?php echo $heading_title; ?></h1><div class="padding20">
  <p><?php echo $text_account_already; ?></p>
  <form action="<?php echo $action; ?>" method="post" enctype="multipart/form-data">
    <h2><?php echo $text_your_details; ?></h2>
    <div class="content">
      <table class="form">
        <tr>
          <td><span class="required">*</span> <?php echo $entry_firstname; ?></td>
          <td><input type="text" name="firstname" value="<?php echo $firstname; ?>" />
            <?php if ($error_firstname) { ?>
            <span class="error"><?php echo $error_firstname; ?></span>
            <?php } ?></td>
        </tr>
        <tr>
          <td><span class="required">*</span> <?php echo $entry_lastname; ?></td>
          <td><input type="text" name="lastname" value="<?php echo $lastname; ?>" />
            <?php if ($error_lastname) { ?>
            <span class="error"><?php echo $error_lastname; ?></span>
            <?php } ?></td>
        </tr>
        <tr>
          <td><span class="required">*</span> <?php echo $entry_email; ?></td>
          <td><input type="text" name="email" value="<?php echo $email; ?>" />
            <?php if ($error_email) { ?>
            <span class="error"><?php echo $error_email; ?></span>
            <?php } ?></td>
        </tr>
        <tr>
          <td><span class="required">*</span> <?php echo $entry_telephone; ?></td>
          <td><input type="text" name="telephone" value="<?php echo $telephone; ?>" />
            <?php if ($error_telephone) { ?>
            <span class="error"><?php echo $error_telephone; ?></span>
            <?php } ?></td>
        </tr>
        <tr>
          <td><?php echo $entry_fax; ?></td>
          <td><input type="text" name="fax" value="<?php echo $fax; ?>" /></td>
        </tr>
      </table>
    </div>
    <h2><?php echo $text_your_address; ?> </h2>
    <div class="content">
      <table class="form">
        <tr>
          <td><?php echo $entry_company; ?></td>
          <td><input type="text" name="company" value="<?php echo $company; ?>" /></td>
        </tr>
        <tr>
          <td><span class="required">*</span> <?php echo $entry_address_1; ?></td>
          <td><input type="text" name="address_1" value="<?php echo $address_1; ?>" />
            <?php if ($error_address_1) { ?>
            <span class="error"><?php echo $error_address_1; ?></span>
            <?php } ?></td>
        </tr>
        <tr>
          <td><?php echo $entry_address_2; ?></td>
          <td><input type="text" name="address_2" value="<?php echo $address_2; ?>" /></td>
        </tr>
        <tr>
          <td><span class="required">*</span> <?php echo $entry_city; ?></td>
          <td><input type="text" name="city" value="<?php echo $city; ?>" />
            <?php if ($error_city) { ?>
            <span class="error"><?php echo $error_city; ?></span>
            <?php } ?></td>
        </tr>
        <tr>
          <td><span class="required">*</span> <?php echo $entry_postcode; ?></td>
          <td><input type="text" name="postcode" value="<?php echo $postcode; ?>" />
            <?php if ($error_postcode) { ?>
            <span class="error"><?php echo $error_postcode; ?></span>
            <?php } ?></td>
        </tr>
        <tr>
          <td><span class="required">*</span> <?php echo $entry_country; ?></td>
          <td><select name="country_id" onchange="$('select[name=\'zone_id\']').load('index.php?route=account/register/zone&country_id=' + this.value + '&zone_id=<?php echo $zone_id; ?>');">
              <option value=""><?php echo $text_select; ?></option>
              <?php foreach ($countries as $country) { ?>
              <?php if ($country['country_id'] == $country_id) { ?>
              <option value="<?php echo $country['country_id']; ?>" selected="selected"><?php echo $country['name']; ?></option>
              <?php } else { ?>
              <option value="<?php echo $country['country_id']; ?>"><?php echo $country['name']; ?></option>
              <?php } ?>
              <?php } ?>
            </select>
            <?php if ($error_country) { ?>
            <span class="error"><?php echo $error_country; ?></span>
            <?php } ?></td>
        </tr>
        <tr>
          <td><span class="required">*</span> <?php echo $entry_zone; ?></td>
          <td><select name="zone_id">
            </select>
            <?php if ($error_zone) { ?>
            <span class="error"><?php echo $error_zone; ?></span>
            <?php } ?></td>
        </tr>
      </table>
    </div>
    <h2><?php echo $text_your_password; ?></h2>
    <div class="content">
      <table class="form">
        <tr>
          <td><span class="required">*</span> <?php echo $entry_password; ?></td>
          <td><input type="password" name="password" value="<?php echo $password; ?>" />
            <?php if ($error_password) { ?>
            <span class="error"><?php echo $error_password; ?></span>
            <?php } ?></td>
        </tr>
        <tr>
          <td><span class="required">*</span> <?php echo $entry_confirm; ?></td>
          <td><input type="password" name="confirm" value="<?php echo $confirm; ?>" />
            <?php if ($error_confirm) { ?>
            <span class="error"><?php echo $error_confirm; ?></span>
            <?php } ?></td>
        </tr>
      </table>
    </div>
    <h2><?php echo $text_newsletter; ?></h2>
    <div class="content">
      <table class="form">
        <tr>
          <td><?php echo $entry_newsletter; ?></td>
          <td><?php if ($newsletter == 1) { ?>
            <input type="radio" name="newsletter" value="1" checked="checked" />
            <?php echo $text_yes; ?>
            <input type="radio" name="newsletter" value="0" />
            <?php echo $text_no; ?>
            <?php } else { ?>
            <input type="radio" name="newsletter" value="1" />
            <?php echo $text_yes; ?>
            <input type="radio" name="newsletter" value="0" checked="checked" />
            <?php echo $text_no; ?>
            <?php } ?></td>
        </tr>
      </table>
    </div>
    <?php if ($text_agree) { ?>
    <div class="buttons">
      <div class="right"><?php echo $text_agree; ?>
        <?php if ($agree) { ?>
        <input type="checkbox" name="agree" value="1" checked="checked" />
        <?php } else { ?>
        <input type="checkbox" name="agree" value="1" />
        <?php } ?>
        <input type="submit" value="<?php echo $button_continue; ?>" class="button" />
      </div>
    </div>
    <?php } else { ?>
    <div class="buttons">
      <div class="right">
        <input type="submit" value="<?php echo $button_continue; ?>" class="button" />
      </div>
    </div>
    <?php } ?>
  </form></div>
  <?php echo $content_bottom; ?></div>
<script type="text/javascript"><!--
$('select[name=\'zone_id\']').load('index.php?route=account/register/zone&country_id=<?php echo $country_id; ?>&zone_id=<?php echo $zone_id; ?>');
//--></script> 
<script type="text/javascript"><!--
$('.colorbox').colorbox({
    width: 560,
    height: 560
});
//--></script> 
<?php echo $footer; ?> 
```

购物车.tpl

```
<?php echo $header; ?>
<?php if ($attention) { ?>
<div class="attention"><?php echo $attention; ?><img src="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>
<?php } ?>
<?php if ($success) { ?>
<div class="success"><?php echo $success; ?><img src="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>
<?php } ?>
<?php if ($error_warning) { ?>
<div class="warning"><?php echo $error_warning; ?><img src="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>
<?php } ?>
<?php echo $column_left; ?><?php echo $column_right; ?>
<div id="content"><?php echo $content_top; ?>
  <div class="breadcrumb">
    <?php foreach ($breadcrumbs as $breadcrumb) { ?>
    <?php echo $breadcrumb['separator']; ?><a href="<?php echo $breadcrumb['href']; ?>"><?php echo $breadcrumb['text']; ?></a>
    <?php } ?>
  </div>
  <h1><?php echo $heading_title; ?><div class="padding20">
    <?php if ($weight) { ?>
    &nbsp;(<?php echo $weight; ?>)
    <?php } ?>
  </h1>
  <form action="<?php echo $action; ?>" method="post" enctype="multipart/form-data">
    <div class="cart-info">
      <table>
        <thead>
          <tr>
            <td class="image"><?php echo $column_image; ?></td>
            <td class="name"><?php echo $column_name; ?></td>
            <td class="model"><?php echo $column_model; ?></td>
            <td class="quantity"><?php echo $column_quantity; ?></td>
            <td class="price"><?php echo $column_price; ?></td>
            <td class="total"><?php echo $column_total; ?></td>
          </tr>
        </thead>
        <tbody>
          <?php foreach ($products as $product) { ?>
          <tr>
            <td class="image"><?php if ($product['thumb']) { ?>
              <a href="<?php echo $product['href']; ?>"><img src="<?php echo $product['thumb']; ?>" alt="<?php echo $product['name']; ?>" title="<?php echo $product['name']; ?>" /></a>
              <?php } ?></td>
            <td class="name"><a href="<?php echo $product['href']; ?>"><?php echo $product['name']; ?></a>
              <?php if (!$product['stock']) { ?>
              <span class="stock">***</span>
              <?php } ?>
              <div>
                <?php foreach ($product['option'] as $option) { ?>
                - <small><?php echo $option['name']; ?>: <?php echo $option['value']; ?></small><br />
                <?php } ?>
              </div>
              <?php if ($product['reward']) { ?>
              <small><?php echo $product['reward']; ?></small>
              <?php } ?></td>
            <td class="model"><?php echo $product['model']; ?></td>
            <td class="quantity"><input type="text" name="quantity[<?php echo $product['key']; ?>]" value="<?php echo $product['quantity']; ?>" size="1" />
              &nbsp;
              <input type="image" src="catalog/view/theme/default/image/update.png" alt="<?php echo $button_update; ?>" title="<?php echo $button_update; ?>" />
              &nbsp;<a href="<?php echo $product['remove']; ?>"><img src="catalog/view/theme/default/image/remove.png" alt="<?php echo $button_remove; ?>" title="<?php echo $button_remove; ?>" /></a></td>
            <td class="price"><?php echo $product['price']; ?></td>
            <td class="total"><?php echo $product['total']; ?></td>
          </tr>
          <?php } ?>
          <?php foreach ($vouchers as $vouchers) { ?>
          <tr>
            <td class="image"></td>
            <td class="name"><?php echo $vouchers['description']; ?></td>
            <td class="model"></td>
            <td class="quantity"><input type="text" name="" value="1" size="1" disabled="disabled" />
              &nbsp;<a href="<?php echo $vouchers['remove']; ?>"><img src="catalog/view/theme/default/image/remove.png" alt="<?php echo $text_remove; ?>" title="<?php echo $button_remove; ?>" /></a></td>
            <td class="price"><?php echo $vouchers['amount']; ?></td>
            <td class="total"><?php echo $vouchers['amount']; ?></td>
          </tr>
          <?php } ?>
        </tbody>
      </table>
    </div>
  </form>
  <?php if ($coupon_status || $voucher_status || $reward_status || $shipping_status) { ?>
  <h2><?php echo $text_next; ?></h2>
  <div class="content">
    <p><?php echo $text_next_choice; ?></p>
    <table class="radio">
      <?php if ($coupon_status) { ?>
      <tr class="highlight">
        <td><input type="radio" name="next" value="coupon" id="use_coupon" /></td>
        <td><label for="use_coupon"><?php echo $text_use_coupon; ?></label></td>
      </tr>
      <?php } ?>
      <?php if ($voucher_status) { ?>
      <tr class="highlight">
        <td><input type="radio" name="next" value="voucher" id="use_voucher" /></td>
        <td><label for="use_voucher"><?php echo $text_use_voucher; ?></label></td>
      </tr>
      <?php } ?>
      <?php if ($reward_status) { ?>
      <tr class="highlight">
        <td><input type="radio" name="next" value="reward" id="use_reward" /></td>
        <td><label for="use_reward"><?php echo $text_use_reward; ?></label></td>
      </tr>
      <?php } ?>
      <?php if ($shipping_status) { ?>
      <tr class="highlight">
        <td><input type="radio" name="next" value="shipping" id="shipping_estimate" /></td>
        <td><label for="shipping_estimate"><?php echo $text_shipping_estimate; ?></label></td>
      </tr>
      <?php } ?>
    </table>
  </div>
  <div class="cart-module">
    <div id="coupon" class="content">
      <form action="<?php echo $action; ?>" method="post" enctype="multipart/form-data">
        <?php echo $entry_coupon; ?>&nbsp;
        <input type="text" name="coupon" value="<?php echo $coupon; ?>" />
        <input type="hidden" name="next" value="coupon" />
        &nbsp;
        <input type="submit" value="<?php echo $button_coupon; ?>" class="button" />
      </form>
    </div>
    <div id="voucher" class="content">
      <form action="<?php echo $action; ?>" method="post" enctype="multipart/form-data">
        <?php echo $entry_voucher; ?>&nbsp;
        <input type="text" name="voucher" value="<?php echo $voucher; ?>" />
        <input type="hidden" name="next" value="voucher" />
        &nbsp;
        <input type="submit" value="<?php echo $button_voucher; ?>" class="button" />
      </form>
    </div>
    <div id="reward" class="content">
      <form action="<?php echo $action; ?>" method="post" enctype="multipart/form-data">
        <?php echo $entry_reward; ?>&nbsp;
        <input type="text" name="reward" value="<?php echo $reward; ?>" />
        <input type="hidden" name="next" value="reward" />
        &nbsp;
        <input type="submit" value="<?php echo $button_reward; ?>" class="button" />
      </form>
    </div>
    <div id="shipping" class="content">
      <p><?php echo $text_shipping_detail; ?></p>
      <table>
        <tr>
          <td><span class="required">*</span> <?php echo $entry_country; ?></td>
          <td><select name="country_id" onchange="$('select[name=\'zone_id\']').load('index.php?route=checkout/cart/zone&country_id=' + this.value + '&zone_id=<?php echo $zone_id; ?>');">
              <option value=""><?php echo $text_select; ?></option>
              <?php foreach ($countries as $country) { ?>
              <?php if ($country['country_id'] == $country_id) { ?>
              <option value="<?php echo $country['country_id']; ?>" selected="selected"><?php echo $country['name']; ?></option>
              <?php } else { ?>
              <option value="<?php echo $country['country_id']; ?>"><?php echo $country['name']; ?></option>
              <?php } ?>
              <?php } ?>
            </select></td>
        </tr>
        <tr>
          <td><span class="required">*</span> <?php echo $entry_zone; ?></td>
          <td><select name="zone_id">
            </select></td>
        </tr>
        <tr>
          <td><span class="required">*</span> <?php echo $entry_postcode; ?></td>
          <td><input type="text" name="postcode" value="<?php echo $postcode; ?>" /></td>
        </tr>
      </table>
      <input type="button" value="<?php echo $button_quote; ?>" id="button-quote" class="button" />
    </div>
    <?php } ?>
  </div>
  <div class="cart-total">
    <table id="total">
      <?php foreach ($totals as $total) { ?>
      <tr>
        <td colspan="5" class="right"><b><?php echo $total['title']; ?>:</b></td>
        <td class="right"><?php echo $total['text']; ?></td>
      </tr>
      <?php } ?>
    </table>
  </div>
  <div class="buttons">
    <div class="right"><a href="<?php echo $checkout; ?>" class="button"><?php echo $button_checkout; ?></a></div>
    <div class="center"><a href="<?php echo $continue; ?>" class="button"><?php echo $button_shopping; ?></a></div>
  </div></div>
  <?php echo $content_bottom; ?></div>
<script type="text/javascript"><!--
$('input[name=\'next\']').bind('change', function() {
    $('.cart-module > div').hide();

    $('#' + this.value).show();
});

<?php if ($next == 'coupon') { ?>
$('#use_coupon').trigger('click');
<?php } ?>
<?php if ($next == 'voucher') { ?>
$('#use_voucher').trigger('click');
<?php } ?>
<?php if ($next == 'reward') { ?>
$('#use_reward').trigger('click');
<?php } ?>
<?php if ($next == 'shipping') { ?>
$('#shipping_estimate').trigger('click');
<?php } ?>
//--></script>
<?php if ($shipping_status) { ?>
<script type="text/javascript"><!--
$('#button-quote').live('click', function() {
    $.ajax({
        url: 'index.php?route=checkout/cart/quote',
        type: 'post',
        data: 'country_id=' + $('select[name=\'country_id\']').val() + '&zone_id=' + $('select[name=\'zone_id\']').val() + '&postcode=' + encodeURIComponent($('input[name=\'postcode\']').val()),
        dataType: 'json',       
        beforeSend: function() {
            $('#button-quote').attr('disabled', true);
            $('#button-quote').after('<span class="wait">&nbsp;<img src="catalog/view/theme/default/image/loading.gif" alt="" /></span>');
        },
        complete: function() {
            $('#button-quote').attr('disabled', false);
            $('.wait').remove();
        },      
        success: function(json) {
            $('.success, .warning, .attention, .error').remove();           

            if (json['error']) {
                if (json['error']['warning']) {
                    $('#notification').html('<div class="warning" style="display: none;">' + json['error']['warning'] + '<img src="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>');

                    $('.warning').fadeIn('slow');

                    $('html, body').animate({ scrollTop: 0 }, 'slow'); 
                }   

                if (json['error']['country']) {
                    $('select[name=\'country_id\']').after('<span class="error">' + json['error']['country'] + '</span>');
                }   

                if (json['error']['zone']) {
                    $('select[name=\'zone_id\']').after('<span class="error">' + json['error']['zone'] + '</span>');
                }

                if (json['error']['postcode']) {
                    $('input[name=\'postcode\']').after('<span class="error">' + json['error']['postcode'] + '</span>');
                }                   
            }

            if (json['shipping_method']) {
                html  = '<h2><?php echo $text_shipping_method; ?></h2>';
                html += '<form action="<?php echo $action; ?>" method="post" enctype="multipart/form-data">';
                html += '  <table class="radio">';

                for (i in json['shipping_method']) {
                    html += '<tr>';
                    html += '  <td colspan="3"><b>' + json['shipping_method'][i]['title'] + '</b></td>';
                    html += '</tr>';

                    if (!json['shipping_method'][i]['error']) {
                        for (j in json['shipping_method'][i]['quote']) {
                            html += '<tr class="highlight">';

                            if (json['shipping_method'][i]['quote'][j]['code'] == '<?php echo $shipping_method; ?>') {
                                html += '<td><input type="radio" name="shipping_method" value="' + json['shipping_method'][i]['quote'][j]['code'] + '" id="' + json['shipping_method'][i]['quote'][j]['code'] + '" checked="checked" /></td>';
                            } else {
                                html += '<td><input type="radio" name="shipping_method" value="' + json['shipping_method'][i]['quote'][j]['code'] + '" id="' + json['shipping_method'][i]['quote'][j]['code'] + '" /></td>';
                            }

                            html += '  <td><label for="' + json['shipping_method'][i]['quote'][j]['code'] + '">' + json['shipping_method'][i]['quote'][j]['title'] + '</label></td>';
                            html += '  <td style="text-align: right;"><label for="' + json['shipping_method'][i]['quote'][j]['code'] + '">' + json['shipping_method'][i]['quote'][j]['text'] + '</label></td>';
                            html += '</tr>';
                        }       
                    } else {
                        html += '<tr>';
                        html += '  <td colspan="3"><div class="error">' + json['shipping_method'][i]['error'] + '</div></td>';
                        html += '</tr>';                        
                    }
                }

                html += '  </table>';
                html += '  <br />';
                html += '  <input type="hidden" name="next" value="shipping" />';
                html += '  <input type="submit" value="<?php echo $button_shipping; ?>" class="button" />';             
                html += '</form>';

                $.colorbox({
                    overlayClose: true,
                    opacity: 0.5,
                    width: '600px',
                    height: '400px',
                    href: false,
                    html: html
                });
            }
        }
    });
});
//--></script> 
<script type="text/javascript"><!--
$('select[name=\'zone_id\']').load('index.php?route=checkout/cart/zone&country_id=<?php echo $country_id; ?>&zone_id=<?php echo $zone_id; ?>');
//--></script>
<?php } ?>
<?php echo $footer; ?> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:12:47.770

问题出在它试图加载的 URL 中：

```
http://www.i-tec.pro/index.php?route=account/register/zone&country_id=30 
```

在控制器`catalog/controller/account/register.php`中没有调用这样的动作`zone`- 因此服务器返回`404`响应并且没有加载任何区域。

至少从版本 1.5.3 开始，该控制器中不存在此操作（现在无法访问旧版本，稍后会检查） - 但您使用的是最新的 OC 版本。

可能该主题与较新版本的 OC 不兼容 - 请与主题创建者确认...

**编辑：**如果您希望自己*修复*模板，请在末尾添加此 JavaScript 代码`register.tpl`

```
$('select[name=\'country_id\']').bind('change', function() {
    $.ajax({
        url: 'index.php?route=account/register/country&country_id=' + this.value,
        dataType: 'json',
        beforeSend: function() {
            $('select[name=\'country_id\']').after('<span class="wait">&nbsp;<img src="catalog/view/theme/default/image/loading.gif" alt="" /></span>');
        },
        complete: function() {
            $('.wait').remove();
        },          
        success: function(json) {
            if (json['postcode_required'] == '1') {
                $('#postcode-required').show();
            } else {
                $('#postcode-required').hide();
            }

            html = '<option value=""><?php echo $text_select; ?></option>';

            if (json['zone'] != '') {
                for (i = 0; i < json['zone'].length; i++) {
                    html += '<option value="' + json['zone'][i]['zone_id'] + '"';

                    if (json['zone'][i]['zone_id'] == '<?php echo $zone_id; ?>') {
                        html += ' selected="selected"';
                    }

                    html += '>' + json['zone'][i]['name'] + '</option>';
                }
            } else {
                html += '<option value="0" selected="selected"><?php echo $text_none; ?></option>';
            }

            $('select[name=\'zone_id\']').html(html);
        },
        error: function(xhr, ajaxOptions, thrownError) {
            alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
        }
    });
});

$('select[name=\'country_id\']').trigger('change'); 
```

并**删除**任何以前的`$('select[\'name=country_id\']').change(...);`电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-22T15:51:05.910

在此处将 javascript 代码从 catalog/view/theme/YOUR THEME/template/account/register.tpl 更改为此代码

```
<script type="text/javascript"><!--
$('select[name=\'country_id\']').bind('change', function() {
    $.ajax({
        url: 'index.php?route=account/register/country&country_id=' + this.value,
        dataType: 'json',
        beforeSend: function() {
            $('select[name=\'country_id\']').after('<span class="wait">&nbsp;<img src="catalog/view/theme/default/image/loading.gif" alt="" /></span>');
        },
        complete: function() {
            $('.wait').remove();
        },          
        success: function(json) {
            if (json['postcode_required'] == '1') {
                $('#postcode-required').show();
            } else {
                $('#postcode-required').hide();
            }

            html = '<option value=""><?php echo $text_select; ?></option>';

            if (json['zone'] != '') {
                for (i = 0; i < json['zone'].length; i++) {
                    html += '<option value="' + json['zone'][i]['zone_id'] + '"';

                    if (json['zone'][i]['zone_id'] == '<?php echo $zone_id; ?>') {
                        html += ' selected="selected"';
                    }

                    html += '>' + json['zone'][i]['name'] + '</option>';
                }
            } else {
                html += '<option value="0" selected="selected"><?php echo $text_none; ?></option>';
            }

            $('select[name=\'zone_id\']').html(html);
        },
        error: function(xhr, ajaxOptions, thrownError) {
            alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
        }
    });
});

$('select[name=\'country_id\']').trigger('change');
//--></script> 
```

# python - Pygame.sprite.Group.add 错误

> ID：15801132
> 
> 赞同：1
> 
> 时间：2013-04-04T01:37:47.037
> 
> 标签：python, pygame, python-3.3

好的，这是代码的一部分

```
lives_group = pygame.sprite.Group()
life_pos = [603,566,529,492]
pos = 0
for life in range(0,ship.lives):
    live = game_display.Life([10, life_pos[pos]])
    lives_group.add(live) 
```

.Life ting 是这样的：

```
class Life(pygame.sprite.Sprite):
    def __init__(self, location):
        self.image = pygame.image.load('Spaceship_life.png')
        self.rect = self.image.get_rect()
        self.rect.left, self.rect.top = location 
```

这是我得到的错误：

```
Traceback (most recent call last):
  File "C:\Users\------\My programs\old\GUI based games\Spaceblaster\0.1\main.py", line 17, in <module>
    lives_group.add(live)
  File "C:\Python33\lib\site-packages\pygame\sprite.py", line 360, in add
    sprite.add_internal(self)
  File "C:\Python33\lib\site-packages\pygame\sprite.py", line 163, in add_internal
    self.__g[group] = 0
AttributeError: 'Life' object has no attribute '_Sprite__g' 
```

对不起 - 说出我的名字，但我保留了它的长度以防万一

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T01:46:29.623

不要忘记调用父母的构造函数

```
class Life(pygame.sprite.Sprite):
    def __init__(self, location):
        super(Life, self).__init__()
        self.image = pygame.image.load('Spaceship_life.png')
        self.rect = self.image.get_rect()
        self.rect.left, self.rect.top = location 
```

# jquery - 调整大小图像上的 jQuery 宽度 = Firefox 上的全宽

> ID：15801133
> 
> 赞同：1
> 
> 时间：2013-04-04T01:37:54.013
> 
> 标签：jquery, image, firefox, width

一旦图像被调整大小，我的脚本 encan.js 正在为图像设置容器的宽度/高度。这在 Chrome 中效果很好，但在 Firefox (mac) 中不起作用！我不知道为什么......任何帮助将不胜感激

[http://encans.dev.wdi.qc.ca/test.html](http://encans.dev.wdi.qc.ca/test.html)

HTML：

```
<td class="item grille" style="width:512px;max-height:364px;" id="item_3">

    <div class="cell clearfix">

        <div class="img_ctn">
            <div class="img_box">
                <img src="/uploads/items/_encan/SaladBowlFinish.jpg" />

                <div class="img_title">
                    <div class="img_item_id"># 2</div>
                    <div class="img_item_mt"><span class="prix_actuel">100 $</span></div>

                </div>
            </div>
        </div>
        <input type="hidden" id="fid_3" value="2" />
        <div class="item_d">

            <div class="block clearfix">

                <p><strong><span class="item_titre">test 1</span></strong></p>

                <p>Valeur de <strong>400.00&nbsp;$</strong><br /></p>

                <p class="mise_display">

                    <span class="meneur_display">Meneur : #<span class="meneur">42</span></span>
                </p>
            </div>

        </div>
    </div>

</td> 
```

CSS：

```
<style type="text/css" media="screen">
.img_ctn {
    width:auto;
    overflow:hidden;
    text-align:center;
}

.img_box {
    position:relative;
    overflow: hidden;
    border:solid #555 1px;

}

.img_box img {
    position:relative;
    z-index:1;
    max-width:100%;
    max-height:100%;
}

</style> 
```

jQuery :

```
$(document).ready(function(){
    $('#encan table td img').each(function(index) { $(this).one('load',function(){ 
        if(this.complete) $(this).load();

        console.log($(this).width()); // Will Log a higher number on Firefox than Safari or Chrome (~614)

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:06:48.823

找到了解决方案。

我删除了 max-width:100%; 在 img (CSS) 上。我将 inline-block 放在容器上，并将 max-height 放在图像上。这样，调整大小的图像在 Chrome、Safari、Firefox 中保持不变。

# python - 使用 Python 3.x 和 Beautiful Soup 解析网页

> ID：15801139
> 
> 赞同：0
> 
> 时间：2013-04-04T01:38:59.027
> 
> 标签：python, html, parsing, python-3.3

我正在尝试通过标题的类别来解析这个[网页](http://yugioh.wikia.com/wiki/Card_Tips%3aBlue-Eyes_White_Dragon "网页")（可搜索的，从手的特殊召唤等）我四处寻找一个好的 3.3 解析器，但我能找到的只是 BeautifulSoup（我可以'不安装，因为它仍然在 2.x 中编码）和我无法理解的 lxml。我尝试阅读 HTML 本身并搜索标题的代码，但无济于事。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:08:47.493

实际上，您可以使用 Beautiful Soup for Python 3.x。[美丽的汤主页](http://www.crummy.com/software/BeautifulSoup/)说：

```
Beautiful Soup 4 works on both Python 2 (2.6+) and Python 3.

Beautiful Soup is licensed under the MIT license, so you can also download the 
tarball, drop the bs4/ directory into almost any Python application (or into 
your library path) and start using it immediately. (If you want to do this under 
Python 3, you will need to manually convert the code using 2to3.) 
```

如果您需要有关如何手动将 Python 2 代码转换为 Python 3 的帮助，请参阅[为 Python 3 转换 BeautifulSoup 4 以](http://annelagang.blogspot.com/2012/11/beautifulsoup-4-for-python-3x.html)获取说明。HTH。

# oracle - Oracle %TYPE：当一个var，两个表，如何定义？

> ID：15801141
> 
> 赞同：2
> 
> 时间：2013-04-04T01:39:41.513
> 
> 标签：oracle, types, plsql, rowtype

假设我有两个表，payments_received 和 payment_processed。我想在 PL/SQL 中声明一个变量以将数据从一个表复制到另一个表。两个表都有一个包含相同值的字段，例如 payor_name。我使用哪个表来定义 %TYPE、“from”或“to”？

```
PROCEDURE some_proc AS

  -- value coming FROM payments_received
  -- value going TO payments_processed

  v_payor_name  payments_received.payor_name%TYPE;
    -- OR
  v_payor_name  payments_processed.payor_name%TYPE;

BEGIN

  SELECT payor_name INTO v_payor_name
    FROM payments_received
   WHERE payment_id = some_payment_id;

  UPDATE payments_processed
     SET payor_name = v_payor_name
   WHERE processed_id = some_processed_id;

END some_proc; 
```

我四处寻找一些最佳实践指南，但没有找到任何真正涵盖 %TYPE/%ROWTYPE 使用方面的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T01:48:22.750

一般没关系。据推测，该`payor_name`列在两个表中的声明相同。

就个人而言，我可能会使用源表，因为如果您现在或将来需要选择多个列（或整行），那将是一致的。但如果有人想将目标表用作锚类型，我不会反对。

如果出于某种原因，最好在`SELECT`声明中出错，或者`UPDATE`如果声明中有一些差异，则可能会导致您更喜欢其中一个。不过，这种情况很少见，因此通常是偏好和一致性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T02:58:27.940

如果有人想对此非常严格，他们可以同时拥有：

```
PROCEDURE some_proc AS

  -- value coming FROM payments_received
  -- value going TO payments_processed

  v_payor_name_source  payments_received.payor_name%TYPE;
  v_payor_name_target  payments_processed.payor_name%TYPE;

BEGIN

  SELECT payor_name INTO v_payor_name_source
    FROM payments_received
   WHERE payment_id = some_payment_id;

  v_payor_name_target := v_payor_name_source;

  UPDATE payments_processed
     SET payor_name = v_payor_name_target
   WHERE processed_id = some_processed_id;

END some_proc; 
```

但我认为这是矫枉过正。

# node.js - coffeescript sourcemap 未在 chrome 中加载

> ID：15801143
> 
> 赞同：14
> 
> 时间：2013-04-04T01:39:45.257
> 
> 标签：node.js, coffeescript, node-inspector

当我调用时，我能够将咖啡文件编译为与 .coffee/.js 文件位于同一目录中的 .map 文件

```
coffee --nodejs --debug-brk app.coffee 
```

并启动节点检查器。应用程序文件的 js 版本在 chrome 中加载。我错过了什么？

这是chrome为three.coffee文件显示的内容..

```
(function (exports, require, module, __filename, __dirname) { // Generated by CoffeeScript 1.6.2
(function() {
  app.get('/three', function(req, res) {
    debugger;    return res.send('three/teedde');
  });

}).call(this);

/*
//@ sourceMappingURL=three.map
*/

}); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:38:26.063

你是在问节点检查器，因为你说你正在启动它？您的问题似乎是在询问 Chrome 开发工具。请澄清。

~~npm (0.2.0beta4) 中节点检查器的当前版本不支持源映射。~~

~~即使[问题](https://github.com/dannycoates/node-inspector/issues/100)已关闭，我也无法在 github 上找到任何可以启用此功能的内容（例如，请参阅[https://github.com/dannycoates/node-inspector/blob/update-ui/lib/session2.js #L123-L131](https://github.com/dannycoates/node-inspector/blob/update-ui/lib/session2.js#L123-L131)，scriptParsed 事件没有 sourceMapURL 参数）。~~

node-inspector 被一位新开发人员接管，根据评论（由 Vitaliy Lebedev 撰写），最新版本确实支持源映射。

* * *

如果您询问 Chrome 开发工具 -[它们支持源映射](http://net.tutsplus.com/tutorials/tools-and-tips/source-maps-101/)。

在 js 文件的最后一行尝试“//@ sourceMappingURL=three.map”。

还要确保您的 express 应用程序实际上正在提供调试器所需的 .map 和 .coffee 文件（通过在浏览器中输入 url+文件名进行检查）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-07T17:44:59.620

> 现在节点检查器支持源映射！github.com/node-inspector/node-inspector/issues/… – Vitaliy Lebedev 2013 年 11 月 8 日 12:46

# kineticjs - KineticJS：根据百分比设置宽度

> ID：15801148
> 
> 赞同：4
> 
> 时间：2013-04-04T01:40:04.013
> 
> 标签：kineticjs

我正在尝试 KineticJS 并查看此示例：

```
var stage = new Kinetic.Stage({
  container: 'container',
  width: 500,
  height: 200
}); 
```

我的问题是如何根据百分比设置宽度。我想要类似的东西：

```
var stage = new Kinetic.Stage({
  container: 'container',
  width: 100%,
  height: 200
}); 
```

任何机会？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:18:29.380

百分比值不起作用（我试过了）。当您在 javascript 中工作时，您可以轻松获取窗口的宽度并计算占用所需空间百分比所需的像素数：

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: (window.innerWidth / 100) * 80,  // 80% width of the window.
    height: 200
}); 
```

如果要在调整窗口大小时调整舞台大小，可以使用`window.onresize`事件。

```
window.onresize = function(event) {
    stage.setWidth((window.innerWidth / 100) * 80);  // 80% width again
} 
```

[调整大小代码的JSFiddle](http://jsfiddle.net/DwQCB/)

# c# - 修改 CodeTypeDeclaration 中的默认构造函数

> ID：15801149
> 
> 赞同：1
> 
> 时间：2013-04-04T01:40:20.583
> 
> 标签：c#, code-generation

我编写了一些代码来从来自我们的 CMS 的 XML 模式生成 .NET 类型。这进展顺利，并产生了我所期待的结果。

现在我想自定义生成类型的默认（无参数）构造函数。我有一些看起来像的代码：

```
CodeNamespace codeNamespace = new CodeNamespace("MyNamespace");

// import type mappings from schema
// export type mappings into codeNamespace

CodeTypeDeclaration codeType = codeNamespace.Types.First(); 
```

至此，我可以成功修改`codeType`；添加/删除属性、属性等。

但是，检查 的`Members`属性`codeType`表明尚未定义默认构造函数。当然我可以加一个；但是当我去写出代码字符串时（使用`CSharpCodeProvider.GenerateCodeFromNamespace`），*另一个*默认构造函数被添加到输出中（在这种情况下，用于在从模式派生的字段上设置一些默认值）。

我要做的基本上是在默认构造函数中插入对方法的调用（我可以`codeType`按照上面成功添加的方法）。

**（如何）我可以处理这样一个事实，即当我写出代码字符串时，会插入一个默认构造函数**`Members`（之前集合中不存在该构造函数） **？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:41:22.737

嗯，我觉得有点傻……

我在调试过程中感到困惑——正在查看一个`codeType`没有**定义**默认构造函数的代码，并将生成的源代码与包含默认构造函数的类型**进行比较。**

我能够使用类似于以下的代码来处理这两种情况：

```
var ctor = codeType.Members
                   .Cast<CodeTypeMember>()
                   .SingleOrDefault(m => m.GetType() == typeof(CodeConstructor));
if (ctor == null)
{
    //codeType didn't define a default constructor, so create one
    ctor = new CodeConstructor() { Attributes = MemberAttributes.Public };
}
else
{
    //codeType did define a default constructor, remove it before modifying
    codeType.Members.Remove(ctor);
}

//make some modifications to ctor

//add ctor to the codeType
codeType.Members.Add(ctor); 
```

# kml - kml 谷歌扩展不在架构中

> ID：15801152
> 
> 赞同：4
> 
> 时间：2013-04-04T01:40:33.443
> 
> 标签：kml

我居住的司法管辖区使用 Google 地球仪发布的数据。他们指向的 kml 文件包含

```
<?xml version='1.0' encoding='UTF-8'?>
<kml xmlns="http://www.opengis.net/kml/2.2"
     xmlns:gx="http://www.google.com/kml/ext/2.2">
         <gx:GoogleMapsEngineLink>
         <href>http://globe.information.qld.gov.au/qldglobe</href>
     </gx:GoogleMapsEngineLink>
</kml> 
```

我在任何公共文档中都找不到对 gx:GoogleMapsEngineLink 的任何引用，并且在将其与其他标准 kml（例如 Place）一起使用时遇到了麻烦。我想要一个可以记录这个政府地球仪并添加一个地方的 kml。

我希望能够将此地点添加到上述 kml（即一个 kml 文件）

```
<?xml version='1.0' encoding='UTF-8'?>
<kml xmlns="http://www.opengis.net/kml/2.2"
<Placemark>
<description>Some nice place</description>
<Point>
<coordinates>153.0064595002,-27.4811714996,0</coordinates>
</Point>
<Style>
    <LabelStyle>
     <color>ff7fffff</color>
    </LabelStyle>
</Style>
</Placemark>
</kml> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T00:11:18.673

Google KML 扩展可以在 Google 的 KML 文档中找到： [https ://developers.google.com/kml/documentation/kmlreference#kmlextensions](https://developers.google.com/kml/documentation/kmlreference#kmlextensions)

此扩展命名空间中元素的完整 XML 架构位于[http://developers.google.com/kml/schema/kml22gx.xsd](http://developers.google.com/kml/schema/kml22gx.xsd)。

***gx:GoogleMapsEngineLink***不是**namespace中**定义[的Google KML 扩展](https://developers.google.com/kml/documentation/kmlreference#kmlextensions)的文档化部分`http://www.google.com/kml/ext/2.2`。

为什么不创建一个[KMZ](https://developers.google.com/kml/documentation/kmzarchives)文件，其中包含根 KML 文件和作为辅助文件嵌入在 KML 中的 gx:GoogleMapsEngineLink。

**根 KML 文件 doc.kml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
    <Document>
        <NetworkLink>
            <Link>
                <href>engine.kml</href>
            </Link>
        </NetworkLink>

        <Placemark>
            <description>Some nice place</description>
            <Point>
                <coordinates>153.0064595002,-27.4811714996,0</coordinates>
            </Point>
            <Style>
                <LabelStyle>
                    <color>ff7fffff</color>
                </LabelStyle>
            </Style>
        </Placemark>
    </Document>
</kml> 
```

而谷歌引擎KML（engine.kml）是这样的：

**引擎.kml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2">

    <gx:GoogleMapsEngineLink>
        <href>http://globe.information.qld.gov.au/qldglobe</href>
    </gx:GoogleMapsEngineLink>

</kml> 
```

**更新：**由于`<gx:GoogleMapsEngineLink>`是特殊且未记录的，因此它不能像其他 KML 元素那样工作，因此它不能作为元素的子`<Document>`元素或`<NetworkLink>`. 同样，如果此元素出现在根级别，并且在这些功能之后有文档或地标，则会被忽略。

谷歌宣布将于 2016 年 1 月停止使用谷歌地图引擎产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-24T02:28:13.780

我无法让我的 KML[验证为有效 XML](http://www.validome.org/xml/validate/)，因为我的 KML 包含 gx（Google 扩展）标签（`<gx:Tour>`例如），而 www.google.com/kml/ext/2.2/ 是 404 错误。这是我经过一个小时的反复试验后最终验证的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" 
xmlns:gx="http://www.google.com/kml/ext/2.2" 
xmlns:kml="http://www.opengis.net/kml/2.2" 
xmlns:atom="http://www.w3.org/2005/Atom"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.google.com/kml/ext/2.2 http://developers.google.com/kml/schema/kml22gx.xsd"> 
```

我真的不知道我在做什么，所以我不能声称这是一个犹太或合法的修复，或者这是否都是必要的。但这是我可以让它验证的唯一方法。

# python - 用值解析 xsd [python]

> ID：15801154
> 
> 赞同：0
> 
> 时间：2013-04-04T01:40:37.883
> 
> 标签：python, xml, xsd

我正在尝试使用 python 从 xml 文件中检查和提取一些数据。我通过使用 etree 解析然后遍历元素来做到这一点：

```
import xml.etree.ElementTree as etree
    root = etree.fromstring(xml_string) 

for element in root.iter():
    print("%s , %s , %s" % (element.tag, element.attrib, element.text)) 
```

这适用于一些测试数据，但我正在使用的实际 xml 文件似乎包含 xsd 标记以及数据。下面是一个例子

```
<wdtf:observationMember>
  <wdtf:TimeSeriesObservation gml:id="ts1">
    <gml:description>Reading using DTW (Depth To Water) from TOC</gml:description>
    <gml:name codeSpace="http://www.bom.gov.au/std/water/xml/wio0.2/feature/TimeSeriesObservation/w00066/12/A/GroundWaterLevel/">1</gml:name>
    <om:procedure xlink:href="#gwTOC12" />
    <om:observedProperty xlink:href="http://www.bom.gov.au/std/water/xml/wio0.2/property//bom/GroundWaterLevel_m" />
    <om:featureOfInterest xlink:href="http://www.bom.gov.au/std/water/xml/wio0.2/feature/BorePipeSamplingInterval/w00066/12" />
    <wdtf:metadata>
      <wdtf:TimeSeriesObservationMetadata>
        <wdtf:regulationProperty>Reg200806.s3.2a</wdtf:regulationProperty>
        <wdtf:status>validated</wdtf:status>
      </wdtf:TimeSeriesObservationMetadata>
    </wdtf:metadata>
    <wdtf:result>
      <wdtf:TimeSeries>
        <wdtf:defaultInterpolationType>InstVal</wdtf:defaultInterpolationType>
        <wdtf:defaultUnitsOfMeasure>m</wdtf:defaultUnitsOfMeasure>
        <wdtf:defaultQuality>quality-A</wdtf:defaultQuality>
        <wdtf:timeValuePair time="1915-12-09T12:00:00+10:00">51.82</wdtf:timeValuePair>
        <wdtf:timeValuePair time="1917-12-18T12:00:00+10:00">41.38</wdtf:timeValuePair>
        <wdtf:timeValuePair time="1924-05-23T12:00:00+10:00">21.95</wdtf:timeValuePair>
        <wdtf:timeValuePair time="1988-02-02T12:00:00+10:00">7.56</wdtf:timeValuePair>
      </wdtf:TimeSeries>
    </wdtf:result>
  </wdtf:TimeSeriesObservation>
</wdtf:observationMember> 
```

在上面的代码中使用这个 xml 会导致 etree 返回错误：

```
Traceback (most recent call last):
File "xml_test2.py", line 38, in <module>
root = etree.fromstring(xml_string)
File "<string>", line 124, in XML
ParseError: unbound prefix: line 1, column 4 
```

我应该使用不同的解析器吗？或者我可以如何删除 xsc 标签？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:56:52.470

从我在您的帖子中可以看到，您的解析器是命名空间感知的，并且抱怨 XML 命名空间别名没有被解析。假设这`<wdtf:observationMember>`是您最顶层的元素，那么您至少必须具备以下条件：

```
<wdtf:observationMember xmlns:wdtf="some-uri"> 
```

这同样适用于所有其他前缀，例如`gml`,`om`等。

# iis-7.5 - IIS 7.5 中的应用程序池崩溃

> ID：15801158
> 
> 赞同：2
> 
> 时间：2013-04-04T01:41:03.040
> 
> 标签：iis-7.5

我用框架 4.0 创建了一个 asp.net 应用程序。

它有一个采访屏幕，上面有很多问题，有传呼。

它可能有 1000 页，每页有 10 个问题。

当用户使用此应用程序时，屏幕会随机冻结并要求提供窗口凭据。

我们还在错误日志中不断收到相同应用程序的错误，如下所示：

> 为应用程序池“appicationpoolname”提供服务的进程与 Windows 进程激活服务发生了致命的通信错误。进程 ID 为“4768”。数据字段包含错误号。

不确定上述两个错误是否相关。

我在调试诊断工具中为应用程序池崩溃创建了一个规则，并生成了一个转储文件。转储文件的完整调用堆栈如下

```
Function     Arg 1     Arg 2     Arg 3     Arg 4   Source 
KERNELBASE!RaiseException+58     04242420     00000000     00000003     010ce504    
clr!Debugger::SendRawEvent+9b     010ce530     0000002f     0000015c     000012a0    
clr!Debugger::RaiseStartupNotification+48     6fa92811     00000001     01000000     00000000    
clr!Debugger::Startup+73     6fa92bf9     00000001     01000000     00000000    
clr!DoAdditionalPEChecks+e5     6fa92ac5     00000001     00000000     00000000    
clr!EEStartupHelper+5f4     00000000     6fa92a9d     00000001     00000000    
clr!EEStartup+52     00000000     6fa92a41     00000001     00000000    
clr!EnsureEEStarted+c4     00000000     6fa92f9d     014bb2c0     00000000    
clr!ClrCreateManagedInstance+41     708d4bb8     708d4ca8     010ceeb4     00000000    
webengine4!LegacyActivationShim::ClrCreateManagedInstance+61     708d4bb8     708d4ca8     010ceeb4     00c6e268    
webengine4!GetIsapiProcessHost+48     00c6e268     01c44e8c     6d8e0000     01c44e68    
webengine!GetIsapiProcessHost+d0     00c6e268     01c44e8c     00b907d8     00000000    
wbhst_pm+2e2a     01c4fed8     01c44e68     00000000     010cf56c    
wbhst_pm+335f     00b907d8     01c4fed8     01c4fdf0     010cf5e4    
wbhst_pm!GetProtocolManager+35     00b907d8     01c4fed8     00000000     00b90898    
w3wphost!AppHostInitialize+235e     7534415b     00000000     00000000     00000000    
w3wphost!AppHostInitialize+2698     010cf69c     708e199c     010cf618     00000001    
w3wphost!IPM_MESSAGE_PIPE::operator=+1c03     010cf69c     708e199c     00000001     708f1274    
iiscore!W3_SERVER::GetProtocolManagerCustomInterface+36     010cf69c     708e199c     00000001     708f1274    
webengine4!InitClrHost+186     708f1274     00000000     014c8004     00000400    
webengine4!CMgdEngGlobalModule::OnGlobalApplicationResolveModules+31     01c4efac     01c40330     010cf77c     7210a67a    
iiscore!VIRTUAL_MODULE::GlobalDoWork+152     00000400     01c4efac     01c4efa8     01c4efa8    
iiscore!W3_SERVER::GlobalNotify+98     00000400     01c4efac     00000000     72122f3a    
iiscore!W3_APPLICATION::ResolveModules+22     014cc280     00000000     014cc284     00000001    
iiscore!W3_APPLICATION::SetupNotificationContext+95     00000000     00000001     014cc284     014cc2e0    
iiscore!W3_CONTEXT::SetupStateMachinePhase2+2ab     014cc280     014cc284     00000000     72103358    
iiscore!W3_CONTEXT::SetupStateMachine+241     014cc284     014cc280     75341400     010cf894    
iiscore!W3_MAIN_CONTEXT::StartNotificationLoop+3f     014cc284     00000000     00c712a8     014cb828    
iiscore!W3_MAIN_CONTEXT::OnNewRequest+47     014cb828     014cb828     72a914e6     753413f0    
w3dt!UL_NATIVE_REQUEST::DoStateProcess+26     753413f0     010cf8c0     72a9154c     00000444    
w3dt!UL_NATIVE_REQUEST::DoWork+60     00000444     00000000     014cb82c     010cf8f8    
w3dt!OverlappedCompletionRoutine+1a     00000000     00000444     014cb82c     00c712b0    
w3tp!THREAD_POOL_DATA::ThreadPoolThread+89     00000000     00be7fd8     72cf0000     010cf924    
w3tp!THREAD_POOL_DATA::ThreadPoolThread+24     00c712a8     00000000     00000000     00be7fd8    
w3tp!THREAD_MANAGER::ThreadManagerThread+39     00be7fd8     010cf970     770f9ed2     00be7fd8    
kernel32!BaseThreadInitThunk+12     00be7fd8     590a45de     00000000     00000000    
ntdll!__RtlUserThreadStart+70     72cf1e5c     00be7fd8     ffffffff     771872ff    
ntdll!_RtlUserThreadStart+1b     72cf1e5c     00be7fd8     00000000     00000000    

Exception Information
In W3WP__~1.DMP the assembly instruction at KERNELBASE!RaiseException+58 in C:\Windows\SysWOW64\KERNELBASE.dll from Microsoft Corporation has caused an unknown exception (0x04242420) on thread 5

I am not sure how to use this to fix the issue. I tried using Winddbg with .loadby sos mscorwks
command but it says invalid module mscorwks 

Any help would be appriciated.

Thanks,
MMC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T12:38:47.810

这是第一次机会异常转储还是第二次机会异常转储？当您在调试诊断工具中创建规则时，您是否更改了未**配置的第一次机会例外**部分中的某些内容？

基于堆栈，这似乎是第一次机会异常转储。确保将未配置的第一次机会异常的操作时间更改为 NONE，然后让该工具生成第二次机会异常转储，这值得一看。

如果它生成一个，使用 debugdiag 分析它并粘贴堆栈，我们可以看到它为什么会崩溃

# mercurial - 列出自上次合并以来所有合并的变更集？

> ID：15801161
> 
> 赞同：3
> 
> 时间：2013-04-04T01:41:13.517
> 
> 标签：mercurial, merge

使用 Mercurial，我如何列出自该分支的最后一次合并以来通过合并分支应用的所有变更集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:34:25.113

Revsets是你的朋友。或者你的克星，取决于它们的复杂程度:)

以下命令将显示最后两次合并之间的所有关联变更集：

```
$ hg log -r "first(last(merge(),2)):last(merge()) & ancestors(last(merge()))" 
```

那个复杂的小表达式（我稍后会简化它）执行以下操作：

*   `x:y``x`为您提供介于两者`y`之间的所有变更集
*   `merge()`是一个包含所有合并的修订集。
*   `last(...,n)`给出集合的最后 n 个变更集，`n`默认为 1
*   `first(...)`给你一个集合的第一个变更集
*   `ancestors(last(merge()))`是包含上次合并的所有祖先的集合

结合所有这些，上面的表达式变为（准备好了吗？）：给我最后两个合并中的第一个和最后一个合并（包括在内）之间的所有变更集，它们恰好是最后一个合并的祖先。

该`ancestors(...)`位过滤掉任何不相关的变更集。

您可以通过添加将其限制为特定分支上的更改`& branch(branchname)`。例如，如果您`release`要从 合并到一个分支`default`，您可以执行以下操作：

```
$ hg log -r "first(last(merge(),2)):last(merge()) & ancestors(last(merge())) & branch(default)" 
```

这不包括实际的合并本身，因为它们会出现在`release`分支上。

希望这是有道理的——我今天下午会看看我是否能找到一个更简单的方法，但这是第一个浮现在脑海中的方法。同时，如果你使用它，你可以通过在你的用户 hgrc 文件中创建一个 revset 别名来使它更容易：

```
[revsetalias]
contrib = first(last(merge(),2)):last(merge()) & ancestors(last(merge())) 
```

所以你可以使用：

```
$ hg log -r "contrib"
$ hg log -r "contrib & branch(default)" 
```

有关更多信息，请查看`hg help revsets`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T17:13:43.650

我不确定icabod 的解决方案是否完全正确。让我看看能不能解释一下。

让我们看一下这个变化图。

```
o----A1----A2----M1--------A3---M2
 \              /              /
  ---B1----B2---              /
      \                      /
       ----C1--------C2----C3 
```

`B`是取自 的分支`o`，`C`是取自 的分支`B1`。如果我们在 M2 并运行 icabod 的命令，那么：

*   `last(merge())`是`M2`
*   `first(last(merge(),2))`是`M1`

于是表达式变为：

```
hg log -r "M1:M2 & ancestors(M2)" 
```

`M1:M2`是所做的更改，而不是 和 之间的修订号`M1`，`M2`在这种情况下是`A3`, `C2`& `C3`，它完全忽略`C1`。

我认为你正在寻找一组 M2 的祖先，而不是 M1 的祖先。IE

```
hg log -r "ancestors(M2) & not ancestors(M1)" 
```

或者

```
hg log -r "ancestors(last(merge())) and not ancestors(first(last(merge(), 2)))" 
```

我认为这应该是`C1`, `C2`, `C3`& `A3`。它还有一个优点，即它不关心更改集是如何或何时添加到存储库中的。

*唯一的问题是倒数第二个合并不是最新合并的祖先。我将把它作为练习留给读者;-)*

* * *

当然，所有这些都可以通过在进行合并之前执行`hg merge --preview`(or `-P`) 来避免，并且它列出了执行合并时将包含的所有更改集。

# ember.js - 为什么这个 ember 计算属性不为 @each 触发？

> ID：15801169
> 
> 赞同：0
> 
> 时间：2013-04-04T01:42:04.863
> 
> 标签：ember.js

我正在尝试使用计算属性来观察数组中每个元素的特定属性的变化。这是小提琴。单击更改按钮，计算的属性不会触发。为什么？

这是小提琴：http: [//jsfiddle.net/inconduit/PkT8x/145/](http://jsfiddle.net/inconduit/PkT8x/145/)

这是相关的代码

```
App.color1 = Ember.Object.create({ color : "red"});

// a contrived object that holds an array of color objects
App.colorsHolder = Ember.Object.create({
    colors : Ember.A([App.color1]),
});

App.ApplicationController = Ember.Controller.extend({
    colorsHolder : App.colorsHolder,

    // this should fire when you click the change button, but it does not
    colorsContainBlue : function() {
        console.log("fired colorsContainBlue");
        this.colorsHolder.colors.forEach(function(colorObj) {
            if(colorObj.get('color') == 'blue')
                return true;
        });
        return false;
    }.property('colorsHolder.@each.color'),                                  

    // this is a function called by an action in the template
    changeToBlue: function() {
        App.color1.set('color','blue');
        console.log("changed the color to: " + App.color1.get('color'));
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T02:08:25.077

这个小提琴是基于您提供的一个工作示例。

[http://jsfiddle.net/skane/PkT8x/147/](http://jsfiddle.net/skane/PkT8x/147/)

```
colorsContainBlue : function() {
    console.log("fired colorsContainBlue");
    if (this.colorsHolder.filterProperty('color', 'blue').length !== 0) {
        return true;
    }
    return false;
}.property('colorsHolder.@each.color'),                                  

changeToBlue: function() {
    this.get('colorsHolder').objectAt(0).set('color','blue');
} 
```

我在您的示例中更改了许多内容，包括：

1.  changeToBlue 现在更改 ApplicationController 的 colorHolder 对象中的属性（重要）
2.  计算属性现在观察 colorsHolder 对象并专门观察它们的“颜色”属性
3.  我已经使用 filterProperty 来确定是否有任何对象具有颜色值 === 'blue'

# search - 如何使搜索查询结果显示为指向其页面的链接

> ID：15801173
> 
> 赞同：0
> 
> 时间：2013-04-04T01:42:37.580
> 
> 标签：search, hyperlink

如您所见，我是 php 新手 :)

如何使搜索查询结果显示为指向其页面的链接。我需要在我的页面表中添加一个“链接”列到我的数据库吗？然后search_output出来呢？

```
 <?php

error_reporting(E_ALL);
ini_set('display_errors', '1');

$search_output = "";
if(isset($_POST['searchquery']) && $_POST['searchquery'] != ""){
    $searchquery = preg_replace('#[^a-z 0-9?!]#i', '', $_POST['searchquery']);
    {
        $sqlCommand = "(SELECT id, page_title AS title FROM pages WHERE MATCH (page_title,page_body) AGAINST ('$searchquery'))";

    }
    include_once("db_connects.php");
    $query = mysql_query($sqlCommand) or die(mysql_error());
    $count = mysql_num_rows($query);
    if($count > 1){
        $search_output .= "<hr />$count results for <strong>$searchquery</strong><hr />$sqlCommand<hr />";
        while($row = mysql_fetch_array($query)){

            $id = $row["id"];
            $title = $row["title"];

            $search_output .= "";
        } // close while
    } else {
        $search_output = "<hr />0 results for <strong>$searchquery</strong><hr />$sqlCommand";
    }
}
?>
<html>
<head>
</head>
<body>

<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
Search For: 
  <input name="searchquery" type="text" size="44" maxlength="88"> 

</select>
<input name="myBtn" type="submit">
<br />
</form>
<div>
<?php echo $search_output; ?>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:58:15.497

您需要将查询提取的所有输出附加到您的 $search_output 字符串。

```
 while($row = mysql_fetch_array($query)){

        $id = $row["id"];
        $title = $row["title"];
        $search_output .= "<a href='".$_SERVER['SERVER_NAME']."/".$title."'>".$title."</a><br>";
        } 
```

但这也取决于您的链接的外观，它们可能不像上面那样简单，或者可能是外部链接。然后在这种情况下，是的，您在其中硬输入链接的额外字段可能很有用。

**回答下一个问题的新编辑...**

```
 while($row = mysql_fetch_array($query)){

        $id = $row["id"];
        $title = $row["title"];
        $link = $row["links"];
        $search_output .= "<a href='".$link."'>".$title."</a><br>";
        } 
```

# ios - Air Native Extension + Facebook SDK + FacebookSDKResources.bundle = 不工作

> ID：15801175
> 
> 赞同：0
> 
> 时间：2013-04-04T01:42:43.153
> 
> 标签：ios, xcode, ant, facebook-ios-sdk, air-native-extension

我无法在我的 ANE 项目中添加来自 FacebookSDKResource.bundle 的资源。例如，当我打开 Facebook 对话框（FBDialog.m）时，此捆绑包中没有关闭按钮。关闭按钮在左上角不可见，没有图像。FacebookSDK 从 FacebookSDKResources 获取图像，如下所示： UIImage* closeImage = [UIImage imageNamed:@"FacebookSDKResources.bundle/FBDialog/images/close.png"];

一切正常，对话框打开，但没有关闭按钮 (close.png) 如何在 ANE 中添加此捆绑包？我用 ANT 在命令行中编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:06:57.960

You have to explicity import the file FacebookSDKResources.bundle into the Ressources folder in XCode. (copy-paste the file then drag-and-drop it in XCode, add as group)

# jquery - .on() 不适用于生成的元素

> ID：15801178
> 
> 赞同：0
> 
> 时间：2013-04-04T01:42:46.887
> 
> 标签：jquery

AFAICT这应该有效，但它没有。使用 jQuery 1.9.0，我有以下内容：

```
<html>
    <head>
        <script type="text/javascript" src="js/libs/jquery-1.9.0/jquery.min.js"></script>
        <script type="text/javascript">

            $(document).ready(function() {
                $("button").click(function() {
                    $("#area").html("<p>click me</p>");
                });

                $("p").on("click", function() {
                    alert($(this).text());
                });
            });

        </script>
    </head>
    <body>
        <p>some text</p>
        <button>Create me</button>
        <div id="area"></div>
    </body>
</html> 
```

为什么单击“某些文本”会带来警报，但单击生成的“单击我”却不会？我认为 .on() 的全部意义在于在动态生成的代码上启用事件处理程序。根据[Click 事件在动态生成的元素上不起作用，](https://stackoverflow.com/questions/6658752/jquery-click-event-doesnt-work-on-dynamically-generated-elements)这应该起作用，但它不起作用。见[http://jsfiddle.net/ymUYy/1/](http://jsfiddle.net/ymUYy/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T01:44:51.053

`.on()`不是`.live()`. 您需要使用事件委托语法：

```
$('#area').on('click', 'p', function() {
    ...
}); 
```

# scrollto - 将变量传递给 ScrollTo

> ID：15801184
> 
> 赞同：0
> 
> 时间：2013-04-04T01:43:19.593
> 
> 标签：scrollto, getdate

[解决了](http://jsfiddle.net/9tY5T/7/)

结果如下：

```
window.onload = function timeScroll()
{
var current_date = new Date();
hour_value = current_date.getHours();
var big_number = hour_value*833.3
$(window).scrollTop(big_number)
} 
```

**上一个问题**

我正在处理一个页面，该页面需要一天中的时间（小时）并使用该时间滚动到页面上的特定点。我乘以`getHour`得到一个我调用的变量`big_number`。但是，我似乎无法将该变量传递给我的滚动函数。

这告诉我它正在正确计算数字：

```
window.onload = function timeScroll()
{
var current_date = new Date();
hour_value = current_date.getHours();
var big_number = hour_value*833.3
window.alert(big_number);
} 
```

我想做这样的事情：

```
window.onload = function timeScroll()
{
var current_date = new Date();
hour_value = current_date.getHours();
var big_number = hour_value*833.3
**scrollTo(x,big_number)**
} 
```

你有任何帮助。另外，这里是现场直播...

[http://newmedia.emerson.edu/~caleb_ungewitter/weather/index.html](http://newmedia.emerson.edu/~caleb_ungewitter/weather/index.html)

# c# - 如何在 Visual Studio C# 中更改 SQL 列类型

> ID：15801187
> 
> 赞同：0
> 
> 时间：2013-04-04T01:43:27.723
> 
> 标签：c#, sql, database

我用 sql 数据库制作了一个 C# 程序，
在完成程序并开始处理它之后，我想将其中一个列类型从 int 更改为 nvarchar(50)，因为我知道数据库已经填充了数据。

我将表列类型更改为 nvarchar(50)，并将其在数据集上也更改为 System.String。
运行程序后，它给了我这个异常

```
See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.FormatException: Failed to convert parameter value from a String to a Int32\. ---> System.FormatException: Input string was not in a correct format.
   at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
   at System.Data.SqlClient.SqlParameter.CoerceValue(Object value, MetaType destinationType, Boolean& coercedToDataFeed, Boolean& typeChanged, Boolean allowStreaming)
   --- End of inner exception stack trace ---
   at Tiryaq.TiryaqDatabaseDataSetTableAdapters.TableAdapterManager.UpdateAll(TiryaqDatabaseDataSet dataSet) in C:\Users\Firas\Documents\Visual Studio 2010\Projects\Tiryaq\Tiryaq\TiryaqDatabaseDataSet.Designer.cs:line 1973
   at Tiryaq.Form1.medicinTableBindingNavigatorSaveItem_Click(Object sender, EventArgs e) in C:\Users\Firas\Documents\Visual Studio 2010\Projects\Tiryaq\Tiryaq\Form1.cs:line 31
   at System.Windows.Forms.ToolStripItem.HandleClick(EventArgs e)
   at System.Windows.Forms.ToolStripItem.HandleMouseUp(MouseEventArgs e)
   at System.Windows.Forms.ToolStrip.OnMouseUp(MouseEventArgs mea)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ToolStrip.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

谢谢你。

更新：实际上点击保存按钮时异常上升
是方法

```
private void medicinTableBindingNavigatorSaveItem_Click(object sender, EventArgs e)
        {

            {
                this.Validate();
                this.medicinTableBindingSource.EndEdit();
                this.tableAdapterManager.UpdateAll(this.tiryaqDatabaseDataSet);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:20:01.560

终于找到了，
在数据库和数据集中更改类型后，我必须打开`Datasetname.Designer.cs`并查找所有`column_name values`并更改它们，`string`因为更改数据库和数据集中的类型后并非所有代码都会更改。
谢谢你们的帮助。

# c++ - CppCMS 构建构造函数和声明

> ID：15801195
> 
> 赞同：0
> 
> 时间：2013-04-04T01:44:13.917
> 
> 标签：c++, cppcms

从[http://cppcms.com/wikipp/en/page/cppcms_1x_forms](http://cppcms.com/wikipp/en/page/cppcms_1x_forms)，

据此，[_](http://msdn.microsoft.com/en-us/library/0kw7hsf3%28v=vs.100%29.aspx)

> 声明将一个或多个名称引入程序......因此，可以为每个编译单元声明类、结构、枚举类型和其他用户定义的类型

AFAIK，构造函数应该在`myapp.cpp`，而声明应该在`content.h`。所以我把

表格上有 5 个字段。在 CppCMS 中，使用 3 个代码构建的表单（第 4 个代码是字段的限制）

第一个代码：

```
name.message("Your Name");
sex.message("Sex");
marital.message("Marital Status");
age.message("Your Age");
submit.value("Send"); 
```

第二个代码：

```
add(name);
add(sex);
add(marital);
add(age);
add(submit); 
```

第三个代码：

```
sex.add("Male","male");
sex.add("Female","female");
marital.add("Single","single");
marital.add("Married","married");
marital.add("Divorced","divorced"); 
```

第 4 个代码是对字段的限制：

```
name.non_empty();
age.range(0,120); 
```

我很困惑应该声明哪一个

- - - - - - - - - 添加

我尝试在`myapp.cpp`下面添加所有上述代码：

```
class myapp : public cppcms::application {
public:
    myapp(cppcms::service &srv) : cppcms::application(srv)
    {
        dispatcher().assign("",&myapp::info_form,this);
        mapper().assign("");
    }
    void info_form()
    {
        name.message("Your Name");
        sex.message("Sex");
        marital.message("Marital Status");
        age.message("Your Age");
        submit.value("Send");

        add(name);
        add(sex);
        add(marital);
        add(age);
        add(submit);

        sex.add("Male","male");
        sex.add("Female","female");
        marital.add("Single","single");
        marital.add("Married","married");
        marital.add("Divorced","divorced");

        name.non_empty();
        age.range(0,120);
    }
}; 
```

但它仍然给出错误：

```
myapp.cpp: In member function ‘void myapp::info_form()’:
myapp.cpp:20:9: error: ‘name’ was not declared in this scope
myapp.cpp:21:9: error: ‘sex’ was not declared in this scope
myapp.cpp:22:9: error: ‘marital’ was not declared in this scope
myapp.cpp:23:9: error: ‘age’ was not declared in this scope
myapp.cpp:24:9: error: ‘submit’ was not declared in this scope
myapp.cpp:24:9: note: suggested alternative:
/usr/local/include/cppcms/form.h:1574:20: note:   ‘cppcms::widgets::submit’
myapp.cpp: At global scope:
myapp.cpp:43:37: error: no ‘void myapp::main(std::string)’ member function declared in class ‘myapp’
my_skin.tmpl:4:2: error: expected unqualified-id before ‘if’
my_skin.tmpl:8:3: error: expected unqualified-id before ‘else’
my_skin.tmpl:12:8: error: expected constructor, destructor, or type conversion before ‘&lt;<’ token
my_skin.tmpl:13:2: error: expected unqualified-id before ‘{’ token 
```

# ruby - Ruby：从目录中获取前几个文件？

> ID：15801197
> 
> 赞同：2
> 
> 时间：2013-04-04T01:44:23.700
> 
> 标签：ruby, break, glob

如何从目录中获取前 N 个文件？

我尝试通过以下方式遍历文件

```
Dir.glob(expression).do |f|
   i = i + 1
   files.push(f)

   if (i == 5) then
      break  # illegal
   end
end 
```

但是放入`break`该`then`子句显然是非法的。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T02:06:41.410

```
Dir.glob(expression).first(5) 
```

这将从目录中获取前 5 个文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T01:54:47.760

这是否可以接受：

```
MAX = 5
Dir.glob(expression)[0..MAX-1] 
```

# php - SNS 和 SQS 技术架构

> ID：15801198
> 
> 赞同：0
> 
> 时间：2013-04-04T01:44:24.370
> 
> 标签：php, amazon-web-services, amazon-sqs

我正在制定发送和接收电子邮件的蓝图。我正在寻找最佳实践。

1.  我们必须发送例如 1000 条消息单击按钮。如何使用 SNS 和 SQS 立即发送消息？创建一个 SNS 请求以在队列中创建 1000 条消息是个好主意吗？

有没有办法安排1000条消息？

1.  我们接收消息，使用 SNS 和 SQS 处理消息的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:10:30.060

最好在按钮单击时将 1 条消息放在队列中，这样用户就不必等待。然后有一个不同的过程，将消息从队列中取出并发送电子邮件或将另外 1000 条消息排队，每封电子邮件一条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T19:59:52.533

不要将其视为单击按钮发送 1000 封电子邮件，将其视为安排电子邮件作业。

不知道您要做什么，但您可能也不希望在用户单击按钮后等待响应时加载 1000 条消息。

我会考虑，有 2 个 SQS 队列（至少），第一个队列用于安排批处理作业，单击鼠标插入一个作业，即按照 Travis R 的建议“将此电子邮件发送给 1000 人”。

另一项工作可以在第一季度轮询，看到“向这 1000 人发送这封电子邮件，然后它可以在第二季度创建 1000 条 SQS 消息，每个电子邮件地址一个。

第三个进程（可能是多个进程）将观察 Q2 并从列表中发送一封电子邮件，然后删除该消息。使用这种方法，您可以通过 SQS 设置或通过限制“发送单个电子邮件”作业的运行频率来大幅降低发送速率以适应 ISP 的限制。

还可以考虑使用亚马逊 SES 并设置另一个流程来监控退回和投诉 - 如果您一次要发送 1000 多封电子邮件，您肯定会拥有这些流程。

# python - Tkinter：由 for 循环创建的寻址标签小部件

> ID：15801199
> 
> 赞同：4
> 
> 时间：2013-04-04T01:44:30.013
> 
> 标签：python, widget, tkinter

以下是我的脚本。基本上，它会要求用户在输入框中输入一个数字。一旦用户输入一个数字并单击“确定”，它将为您提供标签+按钮的组合，具体取决于用户在“输入”框中输入的数字。

```
from Tkinter import *

root=Tk()

sizex = 600
sizey = 400
posx  = 0
posy  = 0
root.wm_geometry("%dx%d+%d+%d" % (sizex, sizey, posx, posy))

def myClick():
    myframe=Frame(root,width=400,height=300,bd=2,relief=GROOVE)
    myframe.place(x=10,y=10)
    x=myvalue.get()
    value=int(x)
    for i in range(value):
        Mylabel=Label(myframe,text=" mytext "+str(i)).place(x=10,y=10+(30*i))
        Button(myframe,text="Accept").place(x=70,y=10+(30*i))

mybutton=Button(root,text="OK",command=myClick)
mybutton.place(x=420,y=10)

myvalue=Entry(root)
myvalue.place(x=450,y=10)

root.mainloop() 
```

通常，当我创建标签小部件时，我会做这样的事情

```
mylabel=Label(root,text='mylabel')
mylabel.pack() 
```

因此，当我稍后想更改标签的文本时，我可以简单地执行此操作

```
mylabel.config(text='new text') 
```

但是现在，由于我使用 for 循环一次创建所有标签，所以在创建标签后是否有解决各个标签的问题？例如，用户在输入框中输入“5”，程序会给我 5 个标签 + 5 个按钮。无论如何，我是否可以更改各个标签的属性（即 label.config(..)）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T05:28:03.773

当然！只需制作一个标签列表，调用`place`每个标签，然后您可以稍后引用它们并更改它们的值。像这样：

```
from Tkinter import *

root=Tk()

sizex = 600
sizey = 400
posx  = 0
posy  = 0
root.wm_geometry("%dx%d+%d+%d" % (sizex, sizey, posx, posy))

labels = []

def myClick():
    del labels[:] # remove any previous labels from if the callback was called before
    myframe=Frame(root,width=400,height=300,bd=2,relief=GROOVE)
    myframe.place(x=10,y=10)
    x=myvalue.get()
    value=int(x)
    for i in range(value):
        labels.append(Label(myframe,text=" mytext "+str(i)))
        labels[i].place(x=10,y=10+(30*i))
        Button(myframe,text="Accept").place(x=70,y=10+(30*i))

def myClick2():
    if len(labels) > 0:
        labels[0].config(text="Click2!")
    if len(labels) > 1:
        labels[1].config(text="Click2!!")

mybutton=Button(root,text="OK",command=myClick)
mybutton.place(x=420,y=10)

mybutton2=Button(root,text="Change",command=myClick2)
mybutton2.place(x=420,y=80)

myvalue=Entry(root)
myvalue.place(x=450,y=10)

root.mainloop() 
```

另请注意！在原始代码的赋值`Mylabel=Label(myframe,text=" mytext "+str(i)).place(x=10,y=10+(30*i))`中，该调用设置`Mylabel`为 None，因为该`place`方法返回 None。您想将`place`调用分成单独的一行，就像上面的代码一样。

# combobox - 为 GXT 的 ComboBox.setDisplayField 设置分层属性

> ID：15801214
> 
> 赞同：0
> 
> 时间：2013-04-04T01:46:18.193
> 
> 标签：combobox, gxt

我有一个 MyModel 形式的 BaseModelData 的简单扩展，我可以调用**new MyModel().getObj1().getObj2()**来获取 obj2 的字符串值。我有许多 MyModel 实例，所以我想用每个 MyModel 实例的 obj2 值填充一个 ComboBox 实例。首先，我调用了 ComboBox.setDisplayField("obj1.obj2")，因为使用这种分层属性方法适用于 TextField.setName() 情况。然后，我选择了一个包含所有 MyModel 实例的商店，并通过 setStore() 将其设置为 ComboBox。但是，组合框是空的。看起来通过 ComboBox.setDisplayField() 设置上述属性的方式与为 TextField.setName() 设置的方式不同。我尝试使用我自己的 ListModelPropertyEditor 实例，但没有成功。那么我的选择是什么？

感谢您的时间！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:40:48.837

我不确定从`ComboBox.setDisplayField()`方法访问分层数据，但你可以通过`getObj2()`在`MyModel`类中添加一个新方法来实现它，它本质上表示`obj1.obj2`.

```
public Obj2 getObj2() {
   return getObj1().getObj2(); //with possible null checks
} 
```

现在您可以打电话`ComboBox.setDisplayField("obj2")`完成工作了。

# java - 如何使用 Java API 渲染 SVG 图像格式

> ID：15801215
> 
> 赞同：1
> 
> 时间：2013-04-04T01:46:29.000
> 
> 标签：java, svg

有什么方法可以使用 Java API 呈现 SVG 格式的图像，或者是否有任何其他 Java API 可以用来呈现这种图像格式。我找到了[Apache Batik 框架](http://xmlgraphics.apache.org/batik/)；有没有其他框架可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T07:34:50.267

**JFreeSVG**有一个[SVGGraphics2D](http://www.jfree.org/jfreesvg/javadoc/org/jfree/graphics2d/svg/SVGGraphics2D.html)实现。

# c++ - 在 memmove 之后删除 [] 期间出现异常

> ID：15801217
> 
> 赞同：2
> 
> 时间：2013-04-01T19:30:50.587
> 
> 标签：c++, arrays, memmove

我有下面的代码，其中包含一个动态的字符串数组。我在解除分配生成的每个单独字符串时遇到问题。我以为我可以只包含一个新的 for 循环来释放它们，但这不起作用。我应该怎么做？

```
//A dynamically allocated array of char pointers
int numOfStrings = 10, numOfChars = 32;
char** data = new char*[numOfStrings];

//Generate each each individual string
for(int i = 0; i <numOfStrings; i++)
    data[i] = new char[numOfChars];

//moves the elements 1-5 in the array to the right by one
int index = 1, boundary = 5, sizeToMove = (boundary - index) * sizeof(numOfChars);
memmove(&data[index + 1],&data[index],sizeToMove);

for(int i=0;i < numOfStrings; i++)
delete [] data[i];   //this line is causing an exception on its first call (I've also tried delete data[i].

delete[] data; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T02:05:44.707

除了它的名字所暗示的，`memmove`实际上并没有“移动”字节。它复制它们（但是，与 相比`memcpy`，即使源区域和目标区域重叠，它也可以正确执行此操作）。

因此，在将内容从源区域“移动”到目标区域之后，那些位于*不重叠*部分的元素仍然保持不变。特别是 ，`data[index]`是不变的，因此与`data[index+1]`你之后的内容相同`memmove()`。

因此，任何尝试都`delete [] data[index+1]`将尝试释放在执行`delete [] data[index]`. 那是违法的。

要解决这个问题，需要在移动后设置`data[index]`（或者一般来说，源区域的任何不重叠部分）为`0`（或`nullptr`），或者采取其他措施确保不被删除。

给定您的代码，最简单的直接修复是插入

```
data[index] = 0; 
```

在删除循环之前。

# php - PHP localhost 重定向问题

> ID：15801222
> 
> 赞同：0
> 
> 时间：2013-04-04T01:47:41.740
> 
> 标签：php, apache, localhost

这是我关于 SO 的第一个问题，我希望我做对了。我是 PHP/MySQL 编程的新手。我最近刚刚用 WAMP 建立了一个本地开发环境，它或多或少可以工作（至少，我得到了绿色图标，WAMP php 信息屏幕，phpMyAdmin 工作，我的一些 .php 文件工作正常，拉.css 和 .inc.php 来自相应目录的文件。）

我遇到问题的地方是带有 header() 的 php 重定向。

我尝试了许多不同的选项，其中一些是从这里收集的，但没有一个有效。我收到错误消息“在此服务器上找不到请求的 URL /localhost/home.php。”

此外，在浏览器的位置栏中，我得到：localhost/localhost/home.php，但我不知道为什么。

这是来自调用程序（index.php）的片段的一个版本，其中一部分是我从 SO 上的答案中得到的：

```
if (isset($_SESSION['Authenticated'])) {
    $host  = $_SERVER['HTTP_HOST'];
    $uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
    $extra = 'home.php';
    header("Location: http://$host$uri/$extra");
    exit;
    } 
```

原始版本也不起作用，是：

```
if (!isset($_SESSION['Authenticated'])) {
    $redirect = 'home.php';
    header("Location: $redirect");
    exit;
    } 
```

我还尝试了原始版本中 $redirect 变量的许多值，包括各种版本的路径，但无济于事。

就我的设置而言，这里有一些您可能会觉得有用的信息：

WAMP 服务器版本 2.2 Apache 版本 2.2.22 PHP 版本 5.4.3 MySQL 版本 5.5.24

```
Relevant line from C:\Windows\System32\Drivers\hosts
127.0.0.1           bke.local       #BKE Test Environment 
```

我使用默认的 C:\wamp\www 作为 DocumentRoot

```
Relevant lines from C:\wamp\bin\apache\apache2.2.22\conf\httpd.conf:
# DocumentRoot: The directory out of which you will serve your
# documents. By default, all requests are taken from this directory, but
# symbolic links and aliases may be used to point to other locations.
#
DocumentRoot "c:/wamp/www/"
.
.
.
# Local access to the Apache HTTP Server Manual
#Include conf/extra/httpd-manual.conf

Relevant lines from C:\wamp\bin\apache\apache2.2.22\conf\extra\httpd.vhosts.conf:
# Use name-based virtual hosting.
NameVirtualHost *:80
#####NameVirtualHost 127.0.0.1:80
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
<VirtualHost *:80>
    ServerAdmin webmaster@dummy-host.example.com
    DocumentRoot "c:/apache2/docs/dummy-host.example.com"
    ServerName dummy-host.example.com
    ServerAlias www.dummy-host.example.com
    ErrorLog "logs/dummy-host.example.com-error.log"
    CustomLog "logs/dummy-host.example.com-access.log" common
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin webmaster@dummy-host2.example.com
    DocumentRoot "c:/apache2/docs/dummy-host2.example.com"
    ServerName dummy-host2.example.com
    ErrorLog "logs/dummy-host2.example.com-error.log"
    CustomLog "logs/dummy-host2.example.com-access.log" common
</VirtualHost>

#<Directory C:/Dev>
#   Order Deny,Allow
#   Allow from all
#</Directory> 
```

我的文件的当前位置： .php 文件到 C:\wamp\www .css 文件到 C:\wamp\www\styles .inc.php 文件到 C:\wamp\www\includes

在我意识到我遇到了这个问题之前，我尝试使用来自多个网站的信息（所有网站都说同样的事情）设置多个虚拟主机，但根本无法做到这一点，所以我取消了我的更改并去了使用 WAMP 默认值。我怀疑这些问题是相关的，但无法解决其中任何一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:54:48.397

我要在这里冒险了。

在我更详细地研究之前，我相信这是一个简单的疏忽。

你试一试：

```
if (!isset($_SESSION['Authenticated']))
{
  header ("Location: home.php");
  exit;
} // this will basically re-direct to home.php if $_SESSION['Authenticated'] is not set 
```

但在执行上面发布的代码段之前，只需执行以下操作：

```
echo "http://$host$uri/$extra"; 
```

没有 header(); 只是看看这是否是问题所在。

# entity-framework - T4 和 Edmx 冲突 - “输入文件似乎正在使用此模板不支持的架构版本”

> ID：15801223
> 
> 赞同：6
> 
> 时间：2013-04-04T01:47:43.387
> 
> 标签：entity-framework, t4

当输入文件是 EF5 edmx 时，我从 T4 收到警告。

> 运行转换：输入文件似乎正在使用此模板不支持的架构版本。这可能会导致编译错误。请使用“添加新生成的项目”添加更新的模板。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-24T15:22:06.873

当我将旧项目升级到 .NET Framework 4.7 时，我曾经遇到过这个问题。

如果这里也是这种情况，那么`*.tt`现在不推荐使用该文件。它是一个 T4 生成器文件，它将创建访问您的实体对象所需的 C# 源代码，并且需要被替换。执行以下操作来更新它（假设您使用的是数据库优先方法）：

1.  删除当前（已弃用）`*.tt`文件（将其从项目中排除并删除）
2.  **通过双击**在解决方案资源管理器中打开该`*.edmx`文件。数据类图正在打开。
***   **右键单击**数据类可视化（您的 EF 数据模型）中的空闲空间，然后在上下文菜单中选择**“从数据库更新模型...”***   指定并测试数据连接（确保连接成功）**

 **现在在后台发生的是`*.tt`将生成一个新文件。完成后，重新构建您的解决方案，错误应该会消失。

但请注意，之后您可能需要进行更多更改，因为在较新版本的 EF 中发生了一些重大更改，我已经**[在此处描述了](https://stackoverflow.com/a/24697836/1016343)**这些更改。**

# qt - 使用 PyQt 在 Qt C++ 中创建的共享窗口

> ID：15801225
> 
> 赞同：1
> 
> 时间：2013-04-04T01:47:49.157
> 
> 标签：qt, pyqt

如果另一个程序（用 C++ 编写）使用 Qt 创建窗口，那么该程序的开发人员有什么方法可以让另一个使用 PyQt 绑定的程序使用它们？例如，C++ 程序能否以某种方式广播 QWindow 或 QApplication 句柄，以便它可以被 PyQt 程序操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T17:01:50.467

你可能想看看 PyQt 背后的 sip 模块

`sip.wrapinstance`/`sip.unwrapinstance`

[http://pyqt.sourceforge.net/Docs/sip4/python_api.html](http://pyqt.sourceforge.net/Docs/sip4/python_api.html)

您还需要将您的 C++ 程序绑定到 Python，我个人在这里推荐 Boost.Python。

# c - 尝试在 C 中从头开始构建 BST 树

> ID：15801229
> 
> 赞同：2
> 
> 时间：2013-04-04T01:48:19.590
> 
> 标签：c, tree, binary-search-tree

我正在尝试自己从头开始构建 BST 以完成一项任务，而我所拥有的只是几个月的 C 语言经验。在添加新节点时遇到了困难，显然每次都更换了 Root。这里有几个片段。

结构：

```
typedef struct node
{ 
    int Num;
    struct node * left;     /* Points to the left child*/
    struct node * right;    /*Points to the right child*/
    struct node *parent;

}Node;

typedef struct tree
{   
    Node * root; /*Points to the root*/
    int height;
}Tree; 
```

职能：

```
void AddNode(int num, Tree * tree){
    Node NewNode;
    NewNode.Num=num;
    NewNode.left=NULL;
    NewNode.right=NULL;
    NewNode.parent=NULL;

    Compare(tree,&NewNode,tree->root);
}

void Compare(Tree * tree,Node * newNode,Node * oldNode)
{
    if (oldNode == NULL)
        {
            oldNode=newNode;
            printf("hi1");
        }
    else if (newNode->Num<oldNode->Num)
        {
        printf("hi2");
            if (oldNode->left==NULL)
                {
                    oldNode->left=newNode;
                    oldNode->left->parent=oldNode;
                }
            else
                Compare(tree,newNode,oldNode->left);
        }
    else if (newNode->Num>oldNode->Num)
        {
            printf("hi3");
            if (oldNode->right==NULL)
                {
                    oldNode->right=newNode;
                    oldNode->right->parent=oldNode;
                }
            else
                Compare(tree,newNode,oldNode->right);
        }
} 
```

我有一个带有一些数字的数组。一开始我初始化了树。printfs 用于调试。输出是：

```
Tree Initialized
hi1hi1hi1hi1 
```

这必须意味着每次都在更换根。我试着带走

```
if (oldNode == NULL)
            {
                oldNode=newNode;
                printf("hi1");
            } 
```

并在调用 AddNode 方法之前将根设为 array[0]，但是程序停止执行。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T02:02:16.957

一个主要问题在于`AddNode()`：

```
void AddNode(int num, Tree * tree)
{
    Node NewNode;
    NewNode.Num=num;
    NewNode.left=NULL;
    NewNode.right=NULL;
    NewNode.parent=NULL;
    Compare(tree,&NewNode,tree->root);
} 
```

当您从函数返回时，存储空间`NewNode`会在下一次调用时重用。您需要动态分配新节点：

```
void AddNode(int num, Tree * tree)
{
    Node *NewNode = malloc(sizeof(*NewNode));
    if (NewNode == 0)
        abort();
    NewNode->Num=num;
    NewNode->left=NULL;
    NewNode->right=NULL;
    NewNode->parent=NULL;
    Compare(tree, NewNode, tree->root);
} 
```

还有其他问题——仍在解决这些问题。如果您展示了用于 (a) 填充 BST 和 (b) 用于打印 BST 的内容和 (c) 释放 BST 使用的存储的代码，将会有所帮助。如果没有 (b) 项，则无法调试自己的结构。

### 一个SSCCE

```
#include <assert.h>
#include <inttypes.h>
#include <stdio.h>
#include <stdlib.h>

typedef struct node
{ 
    int Num;
    struct node *left;     /* Points to the left child */
    struct node *right;    /* Points to the right child */
    struct node *parent;
} Node;

typedef struct tree
{   
    Node *root;
    int   height;
} Tree;

static void Compare(Node *newNode, Node **oldNode)
{
    if (*oldNode == NULL)
    {
        *oldNode = newNode;
        printf("hi1\n");
    }
    else if (newNode->Num < (*oldNode)->Num)
    {
        printf("hi2\n");
        if ((*oldNode)->left==NULL)
        {
            (*oldNode)->left=newNode;
            (*oldNode)->left->parent = *oldNode;
        }
        else
            Compare(newNode, &(*oldNode)->left);
    }
    else if (newNode->Num > (*oldNode)->Num)
    {
        printf("hi3\n");
        if ((*oldNode)->right==NULL)
        {
            (*oldNode)->right=newNode;
            (*oldNode)->right->parent = *oldNode;
        }
        else
            Compare(newNode, &(*oldNode)->right);
    }
} 

static void AddNode(int num, Tree *tree)
{
    assert(tree != 0);
    Node *NewNode = malloc(sizeof(*NewNode));
    if (NewNode == 0)
        abort();
    NewNode->Num    = num;
    NewNode->left   = NULL;
    NewNode->right  = NULL;
    NewNode->parent = NULL;
    Compare(NewNode, &tree->root);
}

static void DumpNode(const Node *node)
{
    assert(node != 0);
    printf("Number: %4d - Node: 0x%.9" PRIXPTR " (parent 0x%.9" PRIXPTR ", left 0x%.9" PRIXPTR ", right 0x%.9" PRIXPTR ")\n",
            node->Num, (uintptr_t)node, (uintptr_t)node->parent, (uintptr_t)node->left, (uintptr_t)node->right);
    if (node->left != 0)
        DumpNode(node->left);
    if (node->right != 0)
        DumpNode(node->right);
}

static void DumpTree(const char *tag, const Tree *tree)
{
    assert(tag != 0 && tree != 0);
    printf("BST Dump: %s\n", tag);

    printf("Tree: 0x%.9" PRIXPTR " (root 0x%.9" PRIXPTR ", height %d)\n",
           (uintptr_t)tree, (uintptr_t)tree->root, tree->height);
    if (tree->root != 0)
        DumpNode(tree->root);
}

static void FreeNode(Node *node)
{
    assert(node != 0);
    if (node->left != 0)
    {
        FreeNode(node->left);
        node->left = 0;
    }
    if (node->right != 0)
    {
        FreeNode(node->right);
        node->right = 0;
    }
    node->parent = 0;
    node->Num    = 0;
    free(node);
}

static void FreeTree(Tree *tree)
{
    assert(tree != 0);
    if (tree->root != 0)
        FreeNode(tree->root);
}

int main(void)
{
    char buffer[32];
    int list[] = { 19, 7, 12, 15, 21, 8, 16, 1, 3, 5 };
    enum { LIST_SIZE = sizeof(list) / sizeof(list[0]) };

    Tree tree = { 0, 0 };

    DumpTree(buffer, &tree);

    for (int i = 0; i < LIST_SIZE; i++)
    {
        AddNode(list[i], &tree);
        snprintf(buffer, sizeof(buffer), "After %2d: value %2d", i, list[i]);
        DumpTree(buffer, &tree);
    }

    FreeTree(&tree);
    return 0;
} 
```

主要变化是该`Compare()`函数不需要`tree`参数，并且确实需要`Node **oldNode`参数。其余部分都有相应的变化`Compare()`。中的代码`AddNode()`几乎与最初建议的一样；当然，区别在于对 的调用`Compare()`。

添加了`DumpTree()`和`FreeTree()`函数。`0x%.9X`在我的 64 位机器上，这些格式是统一的，堆地址在 0x100000000 及以上。有了这些和简单`main()`的，我运行的输出`valgrind`是：

```
==48994== Memcheck, a memory error detector
==48994== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
==48994== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info
==48994== Command: ./bst
==48994== 
==48994== Conditional jump or move depends on uninitialised value(s)
==48994==    at 0xE567: strlen (mc_replace_strmem.c:407)
==48994==    by 0x1778C2: __vfprintf (in /usr/lib/system/libsystem_c.dylib)
==48994==    by 0x17618D: vfprintf_l (in /usr/lib/system/libsystem_c.dylib)
==48994==    by 0x17F2CF: printf (in /usr/lib/system/libsystem_c.dylib)
==48994==    by 0x100001AFE: main (bst.c:78)
==48994== 
BST Dump: 
Tree: 0x7FFF5FBFF410 (root 0x000000000, height 0)
hi1
BST Dump: After  0: value 19
Tree: 0x7FFF5FBFF410 (root 0x100009170, height 0)
Number:   19 - Node: 0x100009170 (parent 0x000000000, left 0x000000000, right 0x000000000)
hi2
BST Dump: After  1: value  7
Tree: 0x7FFF5FBFF410 (root 0x100009170, height 0)
Number:   19 - Node: 0x100009170 (parent 0x000000000, left 0x1000091D0, right 0x000000000)
Number:    7 - Node: 0x1000091D0 (parent 0x100009170, left 0x000000000, right 0x000000000)
hi2
hi3
BST Dump: After  2: value 12
Tree: 0x7FFF5FBFF410 (root 0x100009170, height 0)
Number:   19 - Node: 0x100009170 (parent 0x000000000, left 0x1000091D0, right 0x000000000)
Number:    7 - Node: 0x1000091D0 (parent 0x100009170, left 0x000000000, right 0x100009230)
Number:   12 - Node: 0x100009230 (parent 0x1000091D0, left 0x000000000, right 0x000000000)
hi2
hi3
hi3
BST Dump: After  3: value 15
Tree: 0x7FFF5FBFF410 (root 0x100009170, height 0)
Number:   19 - Node: 0x100009170 (parent 0x000000000, left 0x1000091D0, right 0x000000000)
Number:    7 - Node: 0x1000091D0 (parent 0x100009170, left 0x000000000, right 0x100009230)
Number:   12 - Node: 0x100009230 (parent 0x1000091D0, left 0x000000000, right 0x100009290)
Number:   15 - Node: 0x100009290 (parent 0x100009230, left 0x000000000, right 0x000000000)
hi3
BST Dump: After  4: value 21
Tree: 0x7FFF5FBFF410 (root 0x100009170, height 0)
Number:   19 - Node: 0x100009170 (parent 0x000000000, left 0x1000091D0, right 0x1000092F0)
Number:    7 - Node: 0x1000091D0 (parent 0x100009170, left 0x000000000, right 0x100009230)
Number:   12 - Node: 0x100009230 (parent 0x1000091D0, left 0x000000000, right 0x100009290)
Number:   15 - Node: 0x100009290 (parent 0x100009230, left 0x000000000, right 0x000000000)
Number:   21 - Node: 0x1000092F0 (parent 0x100009170, left 0x000000000, right 0x000000000)
hi2
hi3
hi2
BST Dump: After  5: value  8
Tree: 0x7FFF5FBFF410 (root 0x100009170, height 0)
Number:   19 - Node: 0x100009170 (parent 0x000000000, left 0x1000091D0, right 0x1000092F0)
Number:    7 - Node: 0x1000091D0 (parent 0x100009170, left 0x000000000, right 0x100009230)
Number:   12 - Node: 0x100009230 (parent 0x1000091D0, left 0x100009350, right 0x100009290)
Number:    8 - Node: 0x100009350 (parent 0x100009230, left 0x000000000, right 0x000000000)
Number:   15 - Node: 0x100009290 (parent 0x100009230, left 0x000000000, right 0x000000000)
Number:   21 - Node: 0x1000092F0 (parent 0x100009170, left 0x000000000, right 0x000000000)
hi2
hi3
hi3
hi3
BST Dump: After  6: value 16
Tree: 0x7FFF5FBFF410 (root 0x100009170, height 0)
Number:   19 - Node: 0x100009170 (parent 0x000000000, left 0x1000091D0, right 0x1000092F0)
Number:    7 - Node: 0x1000091D0 (parent 0x100009170, left 0x000000000, right 0x100009230)
Number:   12 - Node: 0x100009230 (parent 0x1000091D0, left 0x100009350, right 0x100009290)
Number:    8 - Node: 0x100009350 (parent 0x100009230, left 0x000000000, right 0x000000000)
Number:   15 - Node: 0x100009290 (parent 0x100009230, left 0x000000000, right 0x1000093B0)
Number:   16 - Node: 0x1000093B0 (parent 0x100009290, left 0x000000000, right 0x000000000)
Number:   21 - Node: 0x1000092F0 (parent 0x100009170, left 0x000000000, right 0x000000000)
hi2
hi2
BST Dump: After  7: value  1
Tree: 0x7FFF5FBFF410 (root 0x100009170, height 0)
Number:   19 - Node: 0x100009170 (parent 0x000000000, left 0x1000091D0, right 0x1000092F0)
Number:    7 - Node: 0x1000091D0 (parent 0x100009170, left 0x100009410, right 0x100009230)
Number:    1 - Node: 0x100009410 (parent 0x1000091D0, left 0x000000000, right 0x000000000)
Number:   12 - Node: 0x100009230 (parent 0x1000091D0, left 0x100009350, right 0x100009290)
Number:    8 - Node: 0x100009350 (parent 0x100009230, left 0x000000000, right 0x000000000)
Number:   15 - Node: 0x100009290 (parent 0x100009230, left 0x000000000, right 0x1000093B0)
Number:   16 - Node: 0x1000093B0 (parent 0x100009290, left 0x000000000, right 0x000000000)
Number:   21 - Node: 0x1000092F0 (parent 0x100009170, left 0x000000000, right 0x000000000)
hi2
hi2
hi3
BST Dump: After  8: value  3
Tree: 0x7FFF5FBFF410 (root 0x100009170, height 0)
Number:   19 - Node: 0x100009170 (parent 0x000000000, left 0x1000091D0, right 0x1000092F0)
Number:    7 - Node: 0x1000091D0 (parent 0x100009170, left 0x100009410, right 0x100009230)
Number:    1 - Node: 0x100009410 (parent 0x1000091D0, left 0x000000000, right 0x100009470)
Number:    3 - Node: 0x100009470 (parent 0x100009410, left 0x000000000, right 0x000000000)
Number:   12 - Node: 0x100009230 (parent 0x1000091D0, left 0x100009350, right 0x100009290)
Number:    8 - Node: 0x100009350 (parent 0x100009230, left 0x000000000, right 0x000000000)
Number:   15 - Node: 0x100009290 (parent 0x100009230, left 0x000000000, right 0x1000093B0)
Number:   16 - Node: 0x1000093B0 (parent 0x100009290, left 0x000000000, right 0x000000000)
Number:   21 - Node: 0x1000092F0 (parent 0x100009170, left 0x000000000, right 0x000000000)
hi2
hi2
hi3
hi3
BST Dump: After  9: value  5
Tree: 0x7FFF5FBFF410 (root 0x100009170, height 0)
Number:   19 - Node: 0x100009170 (parent 0x000000000, left 0x1000091D0, right 0x1000092F0)
Number:    7 - Node: 0x1000091D0 (parent 0x100009170, left 0x100009410, right 0x100009230)
Number:    1 - Node: 0x100009410 (parent 0x1000091D0, left 0x000000000, right 0x100009470)
Number:    3 - Node: 0x100009470 (parent 0x100009410, left 0x000000000, right 0x1000094D0)
Number:    5 - Node: 0x1000094D0 (parent 0x100009470, left 0x000000000, right 0x000000000)
Number:   12 - Node: 0x100009230 (parent 0x1000091D0, left 0x100009350, right 0x100009290)
Number:    8 - Node: 0x100009350 (parent 0x100009230, left 0x000000000, right 0x000000000)
Number:   15 - Node: 0x100009290 (parent 0x100009230, left 0x000000000, right 0x1000093B0)
Number:   16 - Node: 0x1000093B0 (parent 0x100009290, left 0x000000000, right 0x000000000)
Number:   21 - Node: 0x1000092F0 (parent 0x100009170, left 0x000000000, right 0x000000000)
==48994== 
==48994== HEAP SUMMARY:
==48994==     in use at exit: 18,500 bytes in 33 blocks
==48994==   total heap usage: 43 allocs, 10 frees, 18,820 bytes allocated
==48994== 
==48994== LEAK SUMMARY:
==48994==    definitely lost: 0 bytes in 0 blocks
==48994==    indirectly lost: 0 bytes in 0 blocks
==48994==      possibly lost: 0 bytes in 0 blocks
==48994==    still reachable: 18,500 bytes in 33 blocks
==48994==         suppressed: 0 bytes in 0 blocks
==48994== Rerun with --leak-check=full to see details of leaked memory
==48994== 
==48994== For counts of detected and suppressed errors, rerun with: -v
==48994== Use --track-origins=yes to see where uninitialised values come from
==48994== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0) 
```

这台机器上仍在使用的 33 个分配是完全正常的（Mac OS X 10.7.5，Valgrind 3.7.1）。它们出现在调用之前调用的函数`main()`中。

除了 中的系统更改`Compare()`和动态分配之外`AddNode()`，代码还不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:04:57.290

我可以看到的问题之一是您的代码

```
void AddNode(int num, Tree * tree){
    Node NewNode;
    NewNode.Num=num;
    NewNode.left=NULL;
    NewNode.right=NULL;
    NewNode.parent=NULL;

    Compare(tree,&NewNode,tree->root);
} 
```

您将 newNode 声明为简单的局部变量，因此一旦您退出 AddNode 函数（在调用 compare 之后），变量 newNode 就会超出范围并且它的值丢失。

您可以尝试使用指针，使用 malloc 分配空间，然后添加新节点

# perl - 在perl中删除管道分隔行中字符串开头和结尾的双引号

> ID：15801232
> 
> 赞同：1
> 
> 时间：2013-04-04T01:48:26.467
> 
> 标签：perl

我有一条用管道分隔的线：

```
John |DEMME|"9 Snowy "" Court"|WERRIBEE|""VIC"" 
```

我将我的行分成每个字段

```
@fields = split (/\|/, $_); 
```

我想要的是删除每个字段开头/结尾的双引号，但它应该保留中间的双引号。

预期产出

```
John |DEMME|9 Snowy "" Court|WERRIBEE|VIC 
```

我也试过这个

```
s/^\"|"$//g; 
```

但它所做的是它不是按行读取而是按字段读取，因此它只会删除行首和行尾的双引号。

另一种情况：

```
John |DEMME| "Shop 6A ""Atlantic on Coolum""|WERRIBEE|VIC 
```

输出应该是

```
John |DEMME| Shop 6A "Pacific on Coolum"|WERRIBEE|VIC 
```

我希望你们能帮助我解决这个问题。

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T01:50:29.903

如果它是逐行阅读，那么你可以写：

```
s/(?:^|(?<=\|))"|"(?=$|\|)//g; 
```

`"`在行首或 a 之后删除`|`，或在行尾或 a 之前删除`|`。

（`(?<=...)`符号创建一个零宽度正“lookbehind”断言，在这种情况下检查是否有`|`前面；`(?=...)`符号创建一个零宽度正“lookahead”断言，在这种情况下检查是否有一个`|`或文件结尾跟随。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:06:18.543

试试这个家伙

```
my $_='John |DEMME|"9 Snowy "" Court"|WERRIBEE|""VIC""';

my @fields = split (/\|/, $_);

foreach my $item(@fields){
 $item=~s/^\"+//g;
 $item=~s/\"+$//g;
print "$item";

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T05:04:57.887

`map`也可以使用表达式从每个字段中删除引号：

```
@fields = map { s/^"(.*)"$/$1/; $_  } split (/\|/, $_); 
```

`split`将行分开成一个列表，而`map`将替换应用于列表的每个成员。加入他们备份：

打印加入（'|'，@fields），“\n”；

# c++ - BOOST-ASIO阻塞服务器不响应阻塞客户端？

> ID：15801234
> 
> 赞同：1
> 
> 时间：2013-04-04T01:48:45.453
> 
> 标签：c++, tcp, client-server, boost-asio

我最近为有问题的服务器解决了这个[问题](https://stackoverflow.com/questions/15697082/cboost-bind-error-no-matching-function-for-call-to-bindunresolved-overloa#)，但事实证明服务器似乎没有回复客户端，甚至没有收到任何发送的数据。这就是我在客户端所做的。

```
C:\blocking_tcp_echo_client\bin\Debug>blocking_tcp_echo_client 127.0.0.1 4001
Enter message: hello
Exception: read: End of file 
```

这是服务器端。我确实在启动客户端之前启动了服务器。我还用原始[代码](http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/example/echo/blocking_tcp_echo_server.cpp)测试了客户端，它运行良好。

```
C:\boost_server_class\bin\Debug>boost_server_class
TCPIP_server:
Usage: blocking_tcp_echo_server 
```

blocking_tcp_echo_client.cpp

```
#include <cstdlib>
#include <cstring>
#include <iostream>
#include <boost/asio.hpp>

using boost::asio::ip::tcp;

enum { max_length = 1024 };

int main(int argc, char* argv[])
{
  try
  {
    if (argc != 3)
    {
      std::cerr << "Usage: blocking_tcp_echo_client <host> <port>\n";
      return 1;
    }

    boost::asio::io_service io_service;

    tcp::resolver resolver(io_service);
    tcp::resolver::query query(tcp::v4(), argv[1], argv[2]);
    tcp::resolver::iterator iterator = resolver.resolve(query);

    tcp::socket s(io_service);
    s.connect(*iterator);

    using namespace std; // For strlen.
    std::cout << "Enter message: ";
    char request[max_length];
    std::cin.getline(request, max_length);
    size_t request_length = strlen(request);
    boost::asio::write(s, boost::asio::buffer(request, request_length));

    char reply[max_length];
    size_t reply_length = boost::asio::read(s,
        boost::asio::buffer(reply, request_length));
    std::cout << "Reply is: ";
    std::cout.write(reply, reply_length);
    std::cout << "\n";
  }
  catch (std::exception& e)
  {
    std::cerr << "Exception: " << e.what() << "\n";
  }

  return 0;
} 
```

boost_server_class.cpp

```
#include "TCPIP_server.h"
#include <iostream>

int main()
{
    std::cout<<"TCPIP_server:"<<std::endl;
    TCPIP_server server;

    server.main_server();

    return 0;
} 
```

TCPIP_server.h

```
#include <boost/thread/thread.hpp>
#include <boost/bind.hpp>
#include <boost/smart_ptr.hpp>
#include <boost/asio.hpp>
#include <cstdlib>
#include <iostream>

using boost::asio::ip::tcp;

const int max_length = 1024;

class TCPIP_server
{
        private:

            typedef boost::shared_ptr<tcp::socket> socket_ptr;
            char data[max_length];

        public:

        TCPIP_server(){}
        ~TCPIP_server(){}
        void session(socket_ptr sock)
        {
            std::cout<<"TCPIP_server session:"<<std::endl;
            try
            {
                for (;;)
                {
                    char data[max_length];

                    boost::system::error_code error;
                    size_t length = sock->read_some(boost::asio::buffer(data), error);
                    if (error == boost::asio::error::eof)
                        break; // Connection closed cleanly by peer.
                    else if (error)
                        throw boost::system::system_error(error); // Some other error.

                    boost::asio::write(*sock, boost::asio::buffer(data, length));
                }
            }
            catch (std::exception& e)
            {
                std::cerr << "Exception in thread: " << e.what() << "\n";
            }
        }
        void server(boost::asio::io_service& io_service, short port)
        {
            tcp::acceptor a(io_service, tcp::endpoint(tcp::v4(), port));

            for (;;)
            {
                socket_ptr sock(new tcp::socket(io_service));
                a.accept(*sock);
                boost::bind(&TCPIP_server::session, this, sock);
            }
        }
        void main_server()
        {
            try
            {
                std::cerr << "Usage: blocking_tcp_echo_server \n";
                boost::asio::io_service io_service;

                using namespace std; // For atoi.
                server(io_service, atoi("4001"));
            }
            catch (std::exception& e)
            {
                std::cerr << "Exception: " << e.what() << "\n";
            }
        }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T03:18:09.380

**你的服务器坏了。**

接受连接后，您将创建一个未命名的函子，绑定到`TCPIP_server::session()`该函子永远不会被调用。接受的套接字将立即超出范围，这将关闭它并且您的客户端会看到`eof`.

```
socket_ptr sock(new tcp::socket(io_service));
a.accept(*sock);
boost::bind(&TCPIP_server::session, this, sock); // <-- this does nothing 
```

您可以通过删除仿函数来解决此问题，而是`this->session( sock )`在接受连接后调用。但是，我不建议使用这种方法，您的服务器是单线程的，因此在第一个连接后它将无法为其他客户端提供服务。相反，我建议遵循[异步回显服务器示例](http://www.boost.org/doc/libs/release/doc/html/boost_asio/example/echo/async_tcp_echo_server.cpp)，并使用单个线程、单个`io_service`和异步方法重写您的服务器。

# css - 不幸的是，网站上的人力资源菜单无响应

> ID：15801241
> 
> 赞同：0
> 
> 时间：2013-04-04T01:50:09.110
> 
> 标签：css

我有以下网站，作为我研究生工作的一部分（[http://www.ecu.edu/english/tpc/tpcintern/](http://www.ecu.edu/english/tpc/tpcintern/)），它似乎运行良好，除了最上面的导航部分（菜单栏和代表社交网络的小图标）。使用的 CSS 如下：

```
#navigation {
 font-family: 'Lato', sans-serif;
 font-size: 1.3em;
 font-style: normal;
 float: left;
 margin: .5em 0 0 .5em;
 width: 70%;
 height: 2em;
 position: relative;
 padding: .5em 0;
 text-transform: uppercase;
 font-size: 1em;
 background-color: #592a8a;
}

#navigation ul {
 text-align: center;
 padding: 0;
 margin: 0;
 list-style: none;
}

#navigation li {
 font-weight: bold;
 display: inline;
 list-style: none;
 display: block;
 float: left;
 width: 11em;
 height: 2em;
 text-align: center;
 padding: .5em 0 0 0;
}

#navigation li:first-child {
 border-left: 0;
}

#navigation li:last-child {
 border-right: 0;
}

#navigation li a {
 color: #fff;
 text-decoration: none;
}

#navigation li a:hover {
 color: #fff;
 border: 0;
 text-decoration: underline;
}

#social ul {
 text-align: center;
 padding: 0;
 margin: 0;
 list-style: none;
 width: 100%;
}

#social li {
 position: relative;
 top: -1.5em;
 left: 1em;
 list-style: none;
 display: block;
 float: left;
 width: 4em;
 height: 3em;
 text-align: center;
 padding: 2em 1em 0 0;
 margin: 0;
}

#social li:first-child {
 border-left: 0;
}

#social li:last-child {
 border-right: 0;
} 
```

该网站的其余部分似乎很流畅，但我似乎无法弄清楚菜单栏部分。当屏幕尺寸太小时，它就会中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:53:39.220

如果从#navigation 元素中删除高度，则在最小化浏览器时将不再隐藏文本。

要根据浏览器的宽度更改站点，请使用媒体查询。

```
@media only screen and (max-device-width: 480px) {
   #social_media {
      display:none;
   }
} 
```

在此示例中，分辨率低于 480 像素时，#social_media 元素将消失。

# python - 如何在vim中启用python3？

> ID：15801243
> 
> 赞同：9
> 
> 时间：2013-04-04T01:50:41.727
> 
> 标签：python, ubuntu, vim

我使用 vim 已经有一段时间了，现在需要使用 python3 功能。

如果我输入`vim --version | grep python`我得到`-python3`

我该怎么做才能启用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T05:30:52.070

```
$sudo apt-get install vim-gnome 
```

应该解决这个问题，但官方回购有点落后。

我已经使用[这个 ppa](https://launchpad.net/~pi-rho/+ppa-packages)有一段时间了。将它添加到源代码后，升级 Vim 应该会给你 python 3 支持。确实如此，在这里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T06:46:24.103

您没有告诉我们您所在的平台，但基本上可以归结为：

*   安装 Python 3 和编译 Vim 所需的必备软件包
*   `configure --enable-python3interp`使用选项编译 Vim

# java - 从 Java 中的 HTTP 响应中解析 JSON 数组

> ID：15801247
> 
> 赞同：3
> 
> 时间：2013-04-04T01:50:59.820
> 
> 标签：java, arrays, json, parsing, http

我正在使用来自 Apache 的 HTTP 客户端，并试图从我从客户端获得的响应中解析一个 JSON 数组。

这是我收到的 JSON 示例。

```
 [{"created_at":"2013-04-02T23:07:32Z","id":1,"password_digest":"$2a$10$kTITRarwKawgabFVDJMJUO/qxNJQD7YawClND.Hp0KjPTLlZfo3oy","updated_at":"2013-04-02T23:07:32Z","username":"eric"},{"created_at":"2013-04-03T01:26:51Z","id":2,"password_digest":"$2a$10$1IE6hR4q5jQrYBtyxMJJBOGwSPQpg6m5.McNDiSIETBq4BC3nUnj2","updated_at":"2013-04-03T01:26:51Z","username":"Sean"}] 
```

我使用[http://code.google.com/p/json-simple/](http://code.google.com/p/json-simple/)作为我的 json 库。

```
 HttpPost httppost = new HttpPost("SERVERURL");
        httppost.setEntity(input);
        HttpResponse response = httpclient.execute(httppost);
        BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()))

        Object obj=JSONValue.parse(rd.toString());
        JSONArray finalResult=(JSONArray)obj;
        System.out.println(finalResult); 
```

这是我尝试过的代码，但它不起作用。我不确定该怎么做。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T02:08:48.100

> BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent())) 对象 obj=JSONValue.parse(rd.toString());

`rd.toString()`不会给你那个`InputStream`对应的内容`response.getEntity().getContent()`。相反，它给出了对象的`toString()`表示。`BufferedReader`尝试在您的控制台上打印它以查看它是什么。

相反，您应该从以下读取数据`BufferedReader`：

```
StringBuilder content = new StringBuilder();
String line;
while (null != (line = br.readLine()) {
    content.append(line);
} 
```

然后，您应该解析内容以获取 JSON 数组。

```
Object obj=JSONValue.parse(content.toString());
JSONArray finalResult=(JSONArray)obj;
System.out.println(finalResult); 
```

# android - 跨平台数据同步

> ID：15801248
> 
> 赞同：3
> 
> 时间：2013-04-04T01:51:11.487
> 
> 标签：android, sql, synchronization, sync

我要开发一个 android 应用程序，我想在 PC/浏览器上查看/编辑的数据。我以前没有接触过同步，所以如果有人知道任何关于数据同步的复杂性和问题的好消息来源，那就太好了。

我将有一个中央 mySql 数据库，我将如何控制从 sqlite 到 mysql 的数据同步以及何时从 PC 端更改数据。另一个可能发生的问题是数据同时写入并处理重复。

我意识到这并不是一个真正的编程问题，而且有点含糊，如果在这方面有经验的人能指出我正确的方向，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T01:57:32.553

1.  使用时间戳。数据库引擎自动提供它们。当您连接到您的数据库并看到您在上一次操作中存储的时间戳不同时，然后继续同步

2.  如果您担心由于同时进行两次同步而导致数据被覆盖，请使用锁定位（数据库中具有布尔值的列或文件）。在每次同步开始时检查它是否没有“锁定”，如果没有 - 锁定数据库的剩余部分。如果它被锁定 - 请尽快再次检查并尝试再次同步数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:07:49.060

为什么不实时访问数据，而不是同步数据？为了在移动设备上工作，您需要一个面向数据库的 Web 服务。您可以专门为您的目的开发它，也可以使用专门为此目的开发的通用解决方案。查看[这篇博文](http://www.slashdb.com/2013/03/14/database-gateway-for-mobile-and-web-apps/)（免责声明：我在那里工作）

# ios - 部分标题偏移以将其修复在 TableView 中的固定搜索栏下方？

> ID：15801250
> 
> 赞同：0
> 
> 时间：2013-04-04T01:51:24.550
> 
> 标签：ios, tableview, offset

我已经设法修复了 TableView 顶部的 searchBar。但现在我需要让节标题停止在 searchBar 下方（它是 tableHeaderView 的一部分）。我已经像这样子类化了 UITableView：

```
#import "CustomTableView.h"

@implementation CustomTableView

- (void)layoutSubviews
{
    [super layoutSubviews];
    CGRect rect = self.tableHeaderView.frame;
    rect.origin.y = MAX(0, self.contentOffset.y);
    self.tableHeaderView.frame = rect;
    [self bringSubviewToFront:self.tableHeaderView];
}

@end 
```

我试图用这个保留下面的部分标题：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    if (scrollView.contentOffset.y < 0)
    {
        scrollView.contentInset = UIEdgeInsetsMake(44+scrollView.contentOffset.y, 0, 0, 0);
    } else {
        scrollView.contentInset = UIEdgeInsetsMake(44, 0, 0, 0);
    }
    NSLog(@"offset: %f", scrollView.contentOffset.y);
} 
```

我试图在 tableView 上放置一个带有插图的偏移量。但是当将 tableView 拉到底时，它会在顶部产生一个间隙。并且在用户仍在拖动时尝试删除它们是没有意义的（就像我的尝试一样）。

我知道我可以使用 UIView 并在顶部放置一个 searchBar 并在其下方放置一个 UITableView，但是当我开始基于 TableViewController 构建此视图时，我将不得不更改很多代码。

有什么解决办法吗？

# .net - 在生成服务引用期间更改 WCF 客户端方法签名

> ID：15801256
> 
> 赞同：1
> 
> 时间：2013-04-04T01:51:56.927
> 
> 标签：.net, wcf, soap, wsdl

我必须使用通过 WSDL 定义提供的 SOAP Web 服务。添加服务引用后，它会产生以下操作代码：

```
[System.ServiceModel.OperationContractAttribute(Action="http://provided.svc/changeBookingRequest", ReplyAction="http://provided.svc/changeBookingResponse")]
[System.ServiceModel.XmlSerializerFormatAttribute(SupportFaults=true)]
[return: System.ServiceModel.MessageParameterAttribute(Name="return")]
Provided.Service.changeBookingResponse changeBooking(Provided.Service.changeBookingRequest request); 
```

问题是我想更改签名以使它们大写（并更改对象类型`object`和响应字段，`return`因为它们都是 C# 中的保留关键字并导致`@object`并`@result`分散在整个项目中）：

```
[System.ServiceModel.OperationContractAttribute(Action="http://provided.svc/changeBookingRequest", ReplyAction="http://provided.svc/changeBookingResponse")]
[System.ServiceModel.XmlSerializerFormatAttribute(SupportFaults=true)]
[return: System.ServiceModel.MessageParameterAttribute(Name="return")]
Provided.Service.ChangeBookingResponse ChangeBooking(Provided.Service.ChangeBookingRequest request); 
```

为此，我准备了一个简单的 PowerShell 脚本：

```
$env:WCF='C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0 Tools'
$env:CSC='C:\Windows\Microsoft.NET\Framework\v4.0.30319'
$env:Path="$env:WCF;$env:CSC"

svcutil /svcutilconfig:app.config /d:OutFolder `
        /t:code https://*****/**Service?wsdl `
        /serializable /reference:'C:\Users\Andrew\****\**.WsdlImport.dll' 
```

`app.config`有以下部分：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.serviceModel>
        ...
        <client>
            ...
            <metadata>
                <wsdlImporters>
                    <extension type="***.WsdlImport.CapitalizeWsdlImporter, ***.WsdlImport, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
                </wsdlImporters>
            </metadata>
        </client>
    </system.serviceModel>
</configuration> 
```

`CapitalizeWsdlImporter`类实现`IWsdlImportExtension`，但我可以假设更改的所有相关属性都是只读的。我只能更改合同名称：

```
public void ImportContract(WsdlImporter importer, WsdlContractConversionContext context)
{
    ContractDescription contract = context.Contract;
    contract.Name = "ET" + FirstCharToUpper(contract.Name);
} 
```

我将非常感谢您的帮助！

**PS**哈！虽然没有人对我的问题做出回应，但我面临的问题让我更深入地思考，将那些丑陋的类和服务调用隔离在一个项目中，仅此而已，现在只带来了积极的影响。

# python - Raspberry Pi idigi http 消息传递

> ID：15801257
> 
> 赞同：0
> 
> 时间：2013-04-04T01:52:10.793
> 
> 标签：python, http, raspberry-pi

我正在运行一个 python 脚本，它通过 http 向 idigi 发送数据。当我在我的 Mac 上运行脚本时，它工作正常，数据显示在服务器上，但是从 Raspberry Pi 运行它时，它无法访问服务器。它们连接在同一个网络中，所以我认为这与 Raspberry Pi 有关。访问 http 端口是否被拒绝？如何检查以及如何修复？我搜索了如何确保端口是打开的，但没有走得太远。不太清楚发生了什么。有任何想法吗？

我没有收到任何依赖错误。我使用了 idigi 建议的相同代码。处理 http 消息的这部分代码。

```
 # create HTTP basic authentication string, this consists of 
    # "username:password" base64 encoded 
    auth = base64.encodestring("%s:%s" % (username,password))[:-1]

    # Note, this is using Secure HTTP 
    webservice = httplib.HTTPS(idigi)

    # to what URL to send the request with a given HTTP method 
    webservice.putrequest("PUT", "/ws/Messaging/%s" % (filename))

    # add the authorization string into the HTTP header 
    webservice.putheader("Authorization", "Basic %s" % (auth)) 
    webservice.putheader("Content-type", "text/xml; charset=\"UTF-8\"") 
    webservice.putheader("Content-length", "%d" % len(body)) 
    webservice.endheaders()
    webservice.send(body)

    # get the response 
    statuscode, statusmessage, header = webservice.getreply() 
    response_body = webservice.getfile().read() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:44:34.937

这似乎与此处描述的问题有关：[https ://askubuntu.com/questions/116020/python-https-requests-urllib2-to-some-sites-fail-on-ubuntu-12-04-without-proxy](https://askubuntu.com/questions/116020/python-https-requests-urllib2-to-some-sites-fail-on-ubuntu-12-04-without-proxy)

我按照上面帖子中的一些信息创建了一个示例脚本，该脚本将通过在 Raspbian (2013-02-09) 上强制 TLS 1.0 使用安全连接来 PUT 到 /ws/Messaging：

```
import base64
import httplib
import socket
import ssl

username = "00000000-00000000-00000000-00000000"
password = "password"
idigi = "my.idigi.com"
filename = "myfile"
body = "contents"

print "Encoding Credentials"
auth = base64.encodestring("%s:%s" % (username,password))[:-1]

print "Creating HTTPS instance"
conn = httplib.HTTPSConnection(idigi)
sock = socket.create_connection((conn.host, conn.port), conn.timeout, conn.source_address) 
conn.sock = ssl.wrap_socket(sock, conn.key_file, conn.cert_file, ssl_version=ssl.PROTOCOL_TLSv1) 
conn.request("PUT", "/ws/Messaging/%s" % filename, body, {"Authorization": "Basic %s" % (auth), "Content-length": "%d" % len(body)})

response = conn.getresponse()

print "HTTPS response is: %s" % response 
```

# qt - QLineEdit 光标在 textChanged() 或 commitData() 之后移动到结尾

> ID：15801259
> 
> 赞同：3
> 
> 时间：2013-04-04T01:52:35.020
> 
> 标签：qt, qtableview, qlineedit, qtextcursor

我有`QTableView`一列使用 a`QLineEdit`作为其编辑器委托，而其他列需要在用户输入时动态更新`QLineEdit`（例如，其中一列包含输入的文本的长度，`QLineEdit`它应该作为用户更新类型，而不是等待他们按 Enter 提交）。

我使用了这段代码：[Qt：在编辑 QTableView 项目数据时发出信号，而不是在编辑完成后发出信号？](https://stackoverflow.com/questions/10081033/qt-signal-while-a-qtableview-item-data-is-being-edited-instead-of-after-edit-is)这主要是有效的。它将`QLineEdit textChanged()`信号连接到编辑器的`commitData()`信号。

这段代码的问题在于，当用户键入时，`QLineEdit`的插入光标总是跳到末尾。如果您将文本附加到行尾，那很好。但是如果用户想在行的中间插入或编辑文本，每输入一个字母，文本插入光标就会跳到`QLineEdit`. 每次击键后，他们必须重新定位光标才能在中间完成插入/编辑。

如果我禁用映射器，则光标不会跳转，因此它不是编辑器委托所固有的；仅在使用上面链接的问题中的代码时才会发生。

我查看了代码`QLineEdit textChanged()`，`commitData()`但我无法弄清楚是什么导致光标跳转到`QLineEdit`. 有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T16:00:07.290

您可以记住最后一个文本光标位置，然后像这样手动设置它：

```
int pos = lineEdit->cursorPosition();
// change text
lineEdit->setCursorPosition(pos); 
```

# meteor - 如何将 pdf.js 与 Meteor 一起使用？

> ID：15801262
> 
> 赞同：6
> 
> 时间：2013-04-04T01:52:58.297
> 
> 标签：meteor, pdf.js

我一直在尝试让 pdf.js 的 helloworld 示例在 Meteor 中运行。到目前为止，我有：

*   将 index.html、hello.js 和 pdf.js 放在“clients”目录下
*   将“hello.js”的内容包含在“Meteor.startup()”块中
*   从 index.html 中删除几乎所有内容：

    ```
    <body>
        <canvas id="the-canvas" style="border:1px solid black;"/>
    </body> 
    ```

我认为这足以让示例正常工作，但 Meteor 最终抱怨 pdf.js 中的“！DOCTYPE html”声明，该声明在文件中不存在，所以我猜测它是从某个地方导入的。

感觉就像我错过了一些明显的东西来让它工作，有一个简单的解决方案吗？

（旁白：我知道 pdf.js 智能包，但是因为我在 Windows 上进行开发，所以它对我来说并不是一个真正的选择，因为我无法获得 Meteorite。虽然我认为既然智能包已经存在，它是相当可以让两者一起工作。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:03:58.637

Meteor 不应该抱怨 js 文件中的 doctype 声明。这是 pdf.js 的内置版本吗？

从技术上讲，您可以通过复制 repo 中描述的文件来在项目中使用气氛包`package.js`，`smart.json`在本例中为[https://github.com/peerlibrary/meteor-pdf.js](https://github.com/peerlibrary/meteor-pdf.js)

即添加咖啡脚本和下划线（在`api.use`）

```
meteor add coffeescript underscore 
```

然后将文件复制到您的`server`目录：（如`api.add_files`）

```
 bootstrap.coffee
 server.coffee 
```

然后你安装它，就好像它是由陨石放入的，只有文件被物理放入，另外还需要一个节点模块，如[https://github.com/peerlibrary/meteor-pdf.js所述](https://github.com/peerlibrary/meteor-pdf.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T08:10:20.473

您还可以使用 Jquery getScript 并在外部加载它。我在 template.rendered 中使用了它（启用文本选择 - 如果你不需要，你可以用更少的东西解决）：

```
$.getScript( "http://vivin.net/pub/pdfjs/pdf.js" );
$.getScript( "http://vivin.net/pub/pdfjs/textlayerbuilder.js" ); 
```

回调函数可以作为参数给出： http: [//api.jquery.com/jquery.getscript/](http://api.jquery.com/jquery.getscript/)

# sql - 如何将查询变量添加到当前查询？

> ID：15801265
> 
> 赞同：0
> 
> 时间：2013-04-04T01:53:27.253
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我希望有人能帮我解决这个问题。

下面是我的表格和代码（因为一件事有点错误..），让我一个一个部分来进一步解释我的情况..

假设我有一张 Pandimandata2002.dbo.tblCrew 的表：

```
CaseNo    DatePIConsult    cgoInceptionDate
------    -------------    ----------------
TR12-A    12/03/2012       10/11/2012
TR13-S    11/15/2012       09/15/2012
PO09-B                     08/20/2012
SX58-Q    11/22/2012       11/01/2012
BR88-W    10/05/2012       11/05/2012 
```

我有 PostMeds.dbo.tblpms 的这些数据：

```
CaseNo    med_stat    med_stateff
------    --------    -----------
BR88-W    FIT         12/01/2012
TR12-A    UNDERTX     03/13/2013
TR13-S    UNDERTX     03/10/2013 
PO09-B    UNDERTX     01/25/2013
TR13-S    FIT         04/01/2013
BR88-W    UNDERTX     11/17/2012 
```

从那里，我想要这个：

```
CaseNo    DIFF2
------    -----    
BR88-W    57         
TR12-A    122      
PO09-B    227     
TR13-S    137     
SX58-Q    133 
```

*   DIFF2 是两个日期的差值（例如，DATE1-DATE2）。

    如果 PostMeds.dbo.tblpms 中不存在 CaseNo，则 DATE1 等于 DATE NOW (4/4/2013)

    DATE1 等于特定 CaseNo 的（med_stateff 的最大值，其中 med_stat 类似于 '%FIT%'）

    或 ELSEIF max(med_stateff) 为空或行不存在，DATE1 也将等于 DATE NOW (4/4/2013)

    如果 DatePIConsult 为 NULL，则 DATE2 等于 cgoInceptionDate

    ELSE DATE2 等于 DatePIConsult

以下是我当前的查询：

```
SELECT
     t1.CaseNo,
     (SELECT
          CASE WHEN MAX(cast(o.med_stateff as datetime)) IS NULL THEN DATEDIFF(DAY,
               CASE WHEN t1.DatePIConsult IS NULL THEN t1.cgoInceptionDate
               ELSE t1.DatePIConsult END, GETDATE()) 
          WHEN ----(select o.med_stat --------)
       DATEDIFF(DAY,
            CASE WHEN t1.DatePIConsult IS NULL THEN t1.cgoInceptionDate
            ELSE t1.DatePIConsult END,
       MAX(cast(o.med_stateff as datetime))) END AS DIFF2

       FROM PostMeds.dbo.tblpms o

       WHERE t1.CaseNo COLLATE DATABASE_DEFAULT = o.CaseNo COLLATE DATABASE_DEFAULT) AS DIFF2

FROM Pandimandata2002.dbo.tblCrew t1 
```

我的代码的错误部分在 DIFF2 的条件下 ..

在那里，我想添加条件以获取 med_stat 的值，其中 med_stateff 的值（w/c 与 med_stat 对齐）是最大值，其中（或考虑）CaseNo 等于我的特定 SUBPRIMARYKEY。获得该值后，我必须检查该值是否等于某个单词（'FIT'），然后我可以对我的代码进行必要的调整。

我真的希望有人能帮我解决这个问题..提前感谢你们..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T02:28:44.490

我想我已经将你的单词问题收集到一个查询中，至少可以得到你想要的结果。嗯，对我来说仍然是 4 月 3 日，以获得你想要的我使用的结果`SYSUTCDATETIME()`。您可能需要将其更改为`SYSDATETIME()`取决于您离伦敦的距离。

```
SELECT CaseNo, DIFF2 = DATEDIFF(DAY, DATE2, DATE1)
FROM
(
  SELECT 
    c.CaseNo,
    DATE1 = COALESCE(p.med_stateff, SYSUTCDATETIME()),
    DATE2 = COALESCE(c.DatePIConsult, c.cgoInceptionDate)
  FROM dbo.tblCrew AS c
  LEFT OUTER JOIN 
  (
    SELECT CaseNo, med_stateff = MAX(med_stateff)
      FROM dbo.tblpms 
      WHERE med_stat LIKE '%FIT%'
      GROUP BY CaseNo
  ) AS p
  ON c.CaseNo COLLATE DATABASE_DEFAULT = p.CaseNo COLLATE DATABASE_DEFAULT
) AS x; 
```

结果：

```
CaseNo   DIFF2
------   -----
TR12-A   122
TR13-S   137
PO09-B   227
SX58-Q   133
BR88-W   57 
```

您必须添加 ，`ORDER BY`因为我不知道您如何获得在所需结果中显示的顺序。

# python - Python，要列出的文本文档？

> ID：15801267
> 
> 赞同：-1
> 
> 时间：2013-04-04T01:53:50.043
> 
> 标签：python, list, text

在 Python 中，我试图获取一个文本文档，其中包含一堆由换行符分隔的单词，然后逐个选择它们并进行编辑。我如何将这些项目变成python中的列表？

前任。

你好

我

需要

帮助

这需要能够放入python中的列表中，以便我可以编辑它们，我试图在每个之后添加数字1-99。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:00:35.457

如果您只是想将整个文件作为一个大字符串处理（这可能非常低效），您可以使用 splitlines() 方法，例如：

```
listOfWords = textFile.splitlines() 
```

其中`textFile`是一个字符串，它表示文本文档中的所有文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T02:12:07.283

```
with open('timer.py', 'r') as f:
    for num,line in enumerate(f):
        print line.rstrip(),num 
```

需要明确的是：该`with`行打开文件进行读取，并将`file`对象命名为“f”。'f' 可以在循环中迭代`for`，就好像它是一个列表一样。 `for x in f`为循环的每次迭代在名为 x 的变量中生成一行。

我曾经`enumerate`将每一行与一个行号配对。

另外，我曾经`line.rstrip()`从每行的末尾删除换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T01:57:24.697

我可能会建议改用迭代器；这将避免将整个文件存储在内存中。

```
i = 0
for line in open('filename.txt'):
   print "{0} {1}".format(line, i)
   i += 1 
```

# python - 需要Python中全局变量赋值的技巧进行赋值

> ID：15801272
> 
> 赞同：0
> 
> 时间：2013-04-04T01:54:02.947
> 
> 标签：python

需要有关此作业的帮助：

**使用四个全局变量

```
foundCount  = 0
searchCount = 0
names = [ "Mary", "Liz", "Miles", "Bob", "Fred"]
numbers = [ 4, 17, 19]
def find(item):
    ....
def result():
    .... 
```

为这两个函数的主体编写代码：

```
find() 
```

接受一个参数，它在全局名称列表中查找，如果在那里找不到，则在数字列表中查找。

始终递增 searchCount，无论是否找到该项目

如果找到该项目，它会增加 foundCount 并酌情打印“Found in Names”或“Found in Numbers”。

如果找不到项目，则显示“未找到”

results() 这没有参数。它打印搜索计数的摘要：例如“总搜索：6，找到的项目：4，未找到：2”**

样品运行

```
**======= Loading Program =======
>>> find("mary")
 Not found
>>> find("Mary")
 Found in names
>>> find(0)
 Not found
>>> find(19)
 Found in numbers
>>> results()
  ***** Search Results *****
 Total searches:  4
 Total matches :  2
 Total not found: 2** 
```

到目前为止我所做的是：

**

```
foundCount  = 0
searchCount = 0
names = [ "Mary", "Liz", "Miles", "Bob", "Fred"]
numbers = [ 4, 17, 19]
def find(item):
    global foundcount
    if item == "Mary":
      printNow("Found in names")
    elif item == "Liz":
      printNow("Found in names")
    elif item == "Miles":
      printNow("Found in names")
    elif item == "Bob":
      printNow("Found in names")
    elif item == "Fred":
      printNow("Found in names")
    elif item == "4":
      printNow("Found in numbers")
    elif item == "17":
      printNow("Found in numbers")
    elif item == "19":
      printNow("Found in numbers")
    else: printNow("Not Found")

def result(): 
```

**

我需要 def result() 函数的帮助，以便我可以在三天内完成这项作业并为我的数学考试学习.. 需要帮助来完成这项作业，因为它明天到期:(....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:57:03.947

使用`in`运算符：

```
def find(item):
    global foundcount

    if item in names:
        foundCount += 1
        printNow("Found in names")
    elif item in numbers:
        foundCount += 1
        printNow("Found in numbers")
    else:
        printNow("Not Found") 
```

至于`result`，您可以使用以下`print`功能：

```
print('Found Items:', foundCount) 
```

# regex - Haskell：aeson、OverloadedStrings 和 Text.Regex.PCRE

> ID：15801278
> 
> 赞同：1
> 
> 时间：2013-04-04T01:54:45.023
> 
> 标签：regex, haskell, aeson

我有一个使用 Text.Regex.PCRE 的正则表达式，效果很好：

```
[[_,_id,_name]] = "199mercury" =~ "(\\d+)(\\w+) :: [[String]] 
```

但是，我在 {-# LANGUAGE OverloadedStrings #-} 中添加了使用 aeson（json 库）并在 =~ 上得到一个实例错误：

```
<interactive>:33:14:
    No instances for (RegexMaker Regex CompOption ExecOption source0,
                      RegexContext Regex source10 target0)
      arising from a use of `=~'
    Possible fix:
      add instance declarations for
      (RegexMaker Regex CompOption ExecOption source0,
       RegexContext Regex source10 target0)
    In the expression: "199mercury" =~ "(\\d+(\\w+)"
    In an equation for `it': it = "199mercury" =~ "(\\d+(\\w+)" 
```

搜索修复似乎是将正则表达式更改为：

```
getAllTextSubmatches ("199mercury" =~ "(\\d+(\\w+)" :: AllTextSubmatches [] String) 
```

但这似乎只是给了我另一个实例错误：

```
 No instances for (RegexMaker Regex CompOption ExecOption source0,
                      RegexContext Regex source10 (AllTextSubmatches [] String)) 
```

放在这里的正确类型是什么？我尝试的任何方法似乎都不起作用。似乎 OverloadedStrings 是问题所在，但除了仅将 Data.Text.pack 与 aeson 一起使用之外，我找不到任何解决方案，但我想弄清楚我在使用正则表达式时做错了什么。我很好奇 Text.Regex 不能与 OverloadedStrings 一起使用是否存在问题，但我找不到任何证据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T03:45:16.153

它不漂亮，但这种类型检查：

```
{-# LANGUAGE OverloadedStrings #-}    
import Text.Regex.PCRE

quux = ("1999mercury" :: String) =~ ("(\\d+)(\\w+)" :: String) :: [[String]] 
```

您还可以创建一个单态版本`=~`以避免一直编写类型：

```
matches :: String -> String -> [[String]]
matches = (=~)

quux = "1999mercury" `matches` "(\\d+)(\\w+)" 
```

# java - 整合 Scoreloop 高分

> ID：15801281
> 
> 赞同：1
> 
> 时间：2013-04-04T01:54:54.297
> 
> 标签：java, android, illegalargumentexception, observers, scoreloop

调用这两个方法没有错误：

```
public void submitScore(long scoreValue) {
        final Score score = new Score((double) scoreValue, null);
        final ScoreController scoreController = new ScoreController(
            (RequestControllerObserver) new ScoreSubmitObserver());
        scoreController.submitScore(score);
    }

    private class ScoreSubmitObserver implements RequestControllerObserver {
        public void requestControllerDidFail
          (final RequestController requestController,
           final Exception exception) { }

        public void requestControllerDidReceiveResponse(
          final RequestController requestController) { }
    } 
```

当我单击一个按钮并移至“高分”活动时，将调用以下代码：

```
// this is on the onCreate() method
List<Score> list = getScores();  // Highscores line 214
if(list.size() == 0) {
    scoreList.get(0).setText(
      "LIST WILL BE MORE THAN 0 SO THIS TEXT WILL NOT BE SEEN");
}

//Retrieving scores from Scoreloop server.
public List<Score> getScores() {

    //Create an instance of the controller
     ScoresController myScoresController = new ScoresController(null);
             // highscores line 244

     //Set the searchlist. Default is globalScoreSearchList
     myScoresController.setSearchList(SearchList.getBuddiesScoreSearchList());

     //Set the mode for the controller.
     myScoresController.setMode(2);

     //Set the range length of scores to be retrieved. Default is 25
     myScoresController.setRangeLength(20);

     //Make the request to the server
     myScoresController.loadRangeForUser(Session.getCurrentSession().getUser());

     List<Score> retrievedScores = myScoresController.getScores();
     return retrievedScores;
} 
```

此代码使用以下 LogCat 输出使应用程序崩溃：

```
 FATAL EXCEPTION: main
 java.lang.RuntimeException: Unable to start activity ComponentInfo{matt.lyons.bibletrivia.lite/matt.lyons.bibletrivia.lite.Highscores}: java.lang.IllegalArgumentException: observer parameter cannot be null
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    at android.app.ActivityThread.access$600(ActivityThread.java:141)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5039)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method)
 Caused by: java.lang.IllegalArgumentException: observer parameter cannot be null
    at com.scoreloop.client.android.core.controller.RequestController.<init>(SourceFile:159)
    at com.scoreloop.client.android.core.controller.ScoresController.<init>(SourceFile:187)
    at com.scoreloop.client.android.core.controller.ScoresController.<init>(SourceFile:168)
    at matt.lyons.bibletrivia.lite.Highscores.getScores(Highscores.java:244)
    at matt.lyons.bibletrivia.lite.Highscores.onCreate(Highscores.java:214)
    at android.app.Activity.performCreate(Activity.java:5104)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
    ... 11 more 
```

我在代码中的行号中进行了注释。我不确定`IllegalArgumentException`LogCat 中有什么。我的问题是如何解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:11:55.190

您创建一个带有空参数的新 ScoresController（getScores() 中的第一行）。然后，根据您提供的堆栈跟踪，会发生什么是该构造函数调用同一类中的另一个构造函数，该构造函数试图创建一个 RequestController。我怀疑您将 null 参数转发给 RequestController 构造函数，它不接受观察者参数的 null 值。

[IllegalArgumentException](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html)通常表示一个错误，其中方法接收到它不应该处理的参数。

# java - JUnit：如果类已经扩展了某些东西，你如何扩展 TestCase？

> ID：15801284
> 
> 赞同：-1
> 
> 时间：2013-04-04T01:55:11.450
> 
> 标签：java, inheritance, junit, extends, testcase

我正在尝试为项目制作一些 JUnit 测试类。我一直遵循以下格式：

```
public class ExampleTest extends TestCase { 
```

如果该类已经扩展了某些东西，我将如何制作一个 TestCase？就像我有：

```
public class ExampleTest extends ArrayList<Whatever> { 
```

你不能这样做：

```
public class ExampleTest extends ArrayList<Whatever> extends TestCase { 
```

?

如果我的类已经扩展了某些东西，我应该如何扩展 TestCase？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T01:57:39.767

您似乎正在使用 Junit 3.x。从[Junit 4.0](https://github.com/junit-team/junit/wiki/Getting-started)开始，您的测试用例类不需要扩展`TestCase`。它只需要根据需要使用`@Test`, `@Before`, `@After`,`@BeforeClass`等注释方法`@AfterClass`。这将允许您的测试用例类扩展一些其他类。

在我们的项目中，我们使用 Spring 测试运行器运行 JUnit 测试，并且需要将几个注释与每个测试用例相关联。我们通过定义一个抽象测试用例来解决这个问题，将注释与这个抽象测试用例相关联，并使每个其他测试用例扩展它。

```
@RunWith(SpringJunit4TestRunner.class)
@ContextConfiguration(location={})
public class AbstractTestCase
{

}

public class ConcreteTestCase extends AbstractTestCase
{
    @Before
    public void setUp()
    {
        // Some set up before each test.
    }

    @Test
    public void test1()
    {
        // Some test
    }

    @Test
    public void test2()
    {
        // Some other test
    }

    @After
    public void tearDown()
    {
        // Some tear down process after each test.
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-29T19:15:37.647

你的测试类应该只是一个测试类，而不是别的东西。有充分的理由希望 Java 具有多重继承，但这不是其中之一。`TestCase`如果您有想要集中的通用测试逻辑，则任何抽象基类本身都应该扩展。

如果您希望使用另一类（非静态）助手，但它本身不能扩展`TestCase`，您应该使用组合而不是继承。

# ruby-on-rails - 我的模型关系没有按预期工作

> ID：15801285
> 
> 赞同：0
> 
> 时间：2013-04-04T01:55:24.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有两个模型彼此有一定的关系。

我有一个*用餐*模型和一个 *meal_food* 模型。

就像我现在写的那样：

```
class MealFood < Food
  has_and_belongs_to_many :meal
end  

class Meal < ActiveRecord::Base
  belongs_to :user
  has_many :meal_food

  attr_accessible :user_id
end 
```

每当我尝试为这样的一顿饭创建一个 meal_food 时：

```
 meal.meal_food.create() 
```

我收到此错误：

```
ActiveRecord::UnknownAttributeError: unknown attribute: meal_id 
```

如果我传入这样的内容：

```
meal.meal_food.create(meal_id:meal.id) 
```

我收到此错误：

```
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: meal_id 
```

我期望的是创建一个 meal_food 并将其与创建它的膳食相关联。虽然，它可以吃很多顿饭。所以我希望如果我查询meal.meal_food，它将返回与该餐相关的所有食物。rails 要求我提供 meal_id 的事实使我认为 rails 认为这是一对一的关系，并且没有创建关系表。

* * *

我创建了一个联接表。这是它的架构：

```
create_table "meals_meal_food", :force => true do |t|
   t.integer "meal_id"
   t.integer "meal_food_id"
end 
```

我也改变了我的用餐模式，如下所示：

```
class Meal < ActiveRecord::Base
  belongs_to :user
  has_and_belongs_to_many :meal_foods

 attr_accessible :user_id
end 
```

现在的错误是：

```
meal.meal_food.create()

>> NoMethodError: undefined method `meal_food' for #<Meal id: 1, user_id: 1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:59:46.113

据我所知，您的`has_and_belongs_to_many`关联是错误的，您需要在两个模型中都有它：

```
class MealFood < Food
  has_and_belongs_to_many :meals
end  

class Meal < ActiveRecord::Base
  has_and_belongs_to_many :meal_foods
end 
```

另外，模型需要多元化，[看看这个指南](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)。

然后，您需要创建一个包含整数列的`meal_foods_meals`连接表。`meal_id``meal_food_id`

然后要访问您的关联，您必须使用复数形式：

```
meal.meal_foods.create 
```

如果你想使用`has_many`/ `belongs_to`insead 你仍然需要复数`has_many`

```
class MealFood < Food
  belongs_to :meal
end  

class Meal < ActiveRecord::Base
  has_many :meal_foods
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T01:59:22.143

只需将您的模型更改为：

```
class Meal < ActiveRecord::Base
  belongs_to :user
  has_many :meal_food

  attr_accessible :user_id, :meal_id
end 
```

[注意：此处](https://stackoverflow.com/questions/15799720/activemodelmassassignmentsecurityerror-with-nested-attributes)完全重复的问题。

# ios - 用密码压缩 NSData 的最佳方法是什么？

> ID：15801286
> 
> 赞同：0
> 
> 时间：2013-04-04T01:55:27.180
> 
> 标签：ios, objective-c, zip

在研究该主题时，我发现了一些可能对此有所帮助的库：

1.  Objective-zip

2.  压缩存档

3.  SSZip存档

应该还有更多？！

我只需要压缩从 NSString 创建的 NSData；要么加密它，要么用密码保护它，然后通过电子邮件发送。

这些库中有任何已知问题吗？是否有一个经验法则来使用一个而不是另一个？到目前为止，我倾向于使用 Objective-zip，但我在该领域没有太多经验。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:24:24.233

只是在这里记录解决方案。

我最终同时使用了 ZipArchive 和 Objective-zip，因为它们具有不同的功能。我正在使用 Objective-zip 库的密码保护，并将 NSData 附加到创建的 ZipArchive 库的 zip 文件中。

包括两者似乎有点多余，但似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:23:10.960

Objective-Zip 似乎是您想要的。ZipArchive 已过时且未维护。SSZipArchive 不支持创建受密码保护的 zip 文件。

# java - 如何在 Eclipse 中将包查看为文件夹结构

> ID：15801287
> 
> 赞同：12
> 
> 时间：2013-04-04T01:55:34.427
> 
> 标签：java, eclipse, package

在eclipse中，我希望将包视为文件夹结构，而不是`Package Explorer`默认设置提供的扁平外观，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-04T02:00:12.620

Eclipse 提供的`Navigator`视图将以您要求的方式显示您的项目。要打开此视图，请选择`Window > Show View > Navigator`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-04T02:00:21.177

在包资源管理器中选择第一个包。按`Alt`- `Shift`-`**N**`打开新项目上下文菜单。点击“打包”。

确保新包名是原包的子包。例如，如果您的原始包是`com.example`，那么新包可能是`com.example.gui`。

* * *

**编辑**：如果你想*查看*嵌套包，[尤金说](https://stackoverflow.com/a/3916062/732016)你可以这样做：

> 包资源管理器 / 查看菜单 (Ctrl-F10) / 包展示... / 分层

# c++ - 如何将 MySQL 测试用例转换为 ac/c++ 源代码文件？

> ID：15801290
> 
> 赞同：0
> 
> 时间：2013-04-04T01:55:40.613
> 
> 标签：c++, mysql, c, testcase

假设我有一个 MySQL 测试用例 mytest.test。以下是它的内容：

```
use test;
create table t(id int, name varchar(25)) engine = falcon;
insert into t values(1, "John");
insert into t values(2, "Edward");
drop table t; 
```

那么很容易编写 ac/c++ 源文件来完成测试用例的工作。这是 c/c++ 源代码：

```
#include <stdio.h>
#include <mysql.h>

int main(int argc, char** argv){
    MYSQL conn;
    mysql_init(&conn);

    mysql_real_connect(&conn,xxx,...);
    mysql_query(&conn, "create table t(id int, name varchar(25)) engine = falcon");
    mysql_query(&conn, "insert into t values(1, 'John')");
    mysql_query(&conn, "insert into t values(2, 'Edward')");
    mysql_query(&conn, "drop table t");
    mysql_close(&conn);
} 
```

然而，现在，我有一个有趣的 MySQL 测试用例。它是这样的：

```
--source include/have_falcon.inc

let $engine = 'Falcon';
eval SET @@storage_engine = $engine;

--disable_warnings
DROP TABLE IF EXISTS t;
--enable_warnings

CREATE TABLE t(i int);
connect (conn1,localhost,root,,);

let $num=1000000;
while ($num)
{
   connection conn1;
   --send insert into t values(1);
   connection default;
   --send truncate table t;
   connection conn1;
   --reap
   connection default;
   --reap 
   dec $num;
}
DROP TABLE t; 
```

如您所见，有一些奇怪的符号，例如“连接默认”、“--send”和“--reap”。我不知道它们对应的c/c++源代码是什么。那么有没有人可以告诉我如何将它们转换为正确的 c/c++ 源代码。非常感谢！

# git - 将修补程序分支合并到 master 但不是 dev

> ID：15801291
> 
> 赞同：0
> 
> 时间：2013-04-04T01:55:51.853
> 
> 标签：git, version-control

在我的项目中，我有两个主要分支：`master`和`dev`. `dev`当我完成一个新版本时，我在分支上做了很多工作。我在当前`master`分支中发现了一个需要修复的问题。唯一的问题是，在我的`dev`分支中，我已经彻底检查了同一个文件。当我创建一个`hotfix`分支时，我通常将它合并回`master`和`dev`. 但在这种情况下，我想我会遇到很多合并冲突。可以简单地合并它`master`而不合并它`dev`吗？当我`dev`重新合并到时，我可以期待合并冲突`master`吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:14:37.520

不合并就好了；但是，也可以合并并解决有利于`dev`分支的所有冲突。通过进行合并，您可以在结构上保持`master`和`dev`分支之间的相似性。程序是：

```
$ git checkout dev
$ git merge hotfix
# conflicts arise, use `dev`
$ git checkout --ours -- <filename>  # --ours is the key.
$ git add <filename>
$ git commit ... 
```

当您合并时，`dev`您`master`可能会遇到冲突，但您会使用`--theirs`（使用来自`dev`，而不是的文件`master`）来旋转它们。

# php - 使用来自 Elasticsearch 的搜索数据填充 Google 图表

> ID：15801293
> 
> 赞同：1
> 
> 时间：2013-04-04T01:55:55.947
> 
> 标签：php, javascript, json, elasticsearch, google-visualization

我刚刚学习 Elasticsearch 和 Javascript，而且我刚开始使用 Google Charts，因为它们易于使用。

我正在尝试基于 Elasticsearch 查询呈现 Google Chart。由于数据格式不正确，图表无法呈现。这是我的非工作代码：

```
 <html>
  <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="java/jquery-1.9.1.min.js""></script>
    <script type="text/javascript">

    // Load the Visualization API and the piechart package.
    google.load('visualization', '1', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    function drawChart() {
      var jsonData = $.ajax({
          url: 'http://localhost:9200/inventory/_search?pretty=true'
               , type: 'POST'
               , data :
               JSON.stringify(
                  {
                    "query" : { "match_all" : {} },

                    "facets" : {
                      "tags" : {
                        "terms" : {
                            "field" : "qty_onhand",
                            "size"  : "10"
                        }
                      }
                    }
                  }),
          dataType:"json"
          async: false
          ,processData: false
          }).responseText;

      // Create our data table out of JSON data loaded from server.
      var data = new google.visualization.DataTable(jsonData);

      // Instantiate and draw our chart, passing in some options.
      var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
      chart.draw(data, {width: 400, height: 240});
    }

    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <div id="chart_div"></div>
  </body>
</html> 
```

我遇到的问题是查询返回的数据不是“字段”，而是整个查询摘要。

有没有办法在只保留字段的同时返回这个查询？或者也许有一种方法可以查询和格式化 PHP 文件中的数据，然后我可以在图表中调用？Google Charts 站点建议可以创建一个 PHP 文件来加载查询。这是来自他们的网站：

```
<?php 

// This is just an example of reading server side data and sending it to the client.
// It reads a json formatted text file and outputs it.

$string = file_get_contents("sampleData.json");
echo $string;

// Instead you can query your database and parse into JSON etc etc

?> 
```

我对最后一条评论最感兴趣。如何查询 Elasticsearch 并返回可接受的 JSON 文档？前任：

```
{
"cols": [
    {"id":"","label":"Topping","pattern":"","type":"string"},
    {"id":"","label":"Slices","pattern":"","type":"number"}
  ],
"rows": [
    {"c":[{"v":"Mushrooms","f":null},{"v":3,"f":null}]},
    {"c":[{"v":"Onions","f":null},{"v":1,"f":null}]},
    {"c":[{"v":"Olives","f":null},{"v":1,"f":null}]},
    {"c":[{"v":"Zucchini","f":null},{"v":1,"f":null}]},
    {"c":[{"v":"Pepperoni","f":null},{"v":2,"f":null}]}
  ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:12:09.920

你可以试试这样的东西：

```
var data = new google.visualization.DataTable(jsonData.hits.hits); 
```

也就是说，如果您真的需要像最后描述的那样，我认为您必须自己处理并将 Elasticsearch 响应格式转换为您的数据格式。

这是我在[另一个项目](https://github.com/dadoonet/devoxxfr_demo/blob/gh-pages/index.html#L697)中进行的方式。

```
if(result != null && result.hits != null && result.hits.hits != null && result.hits.hits.length > 0){
   for(var i=0; i <= result.hits.hits.length; i++){
       var hit = result.hits.hits[i];
       // transform your hit to ...
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:52:59.247

我能够使用以下代码完成此操作（感谢 dinjas）：

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript">

     google.load('visualization', '1', {'packages':['corechart']});

     google.setOnLoadCallback(drawChart);

   function drawChart() {
      var json;
    $.ajax({
            url: 'http://localhost:9200/wcs/routes/_search',
            type: 'POST',
            data :
                JSON.stringify(
                    {
                        "query" : { "match_all" : {} }
                    }),
            dataType : 'json',
            async: false,
            success: function(data){
                json = data;
            }
        })

var jdata = {};
jdata.cols = [
    {
        "id": "",
        "label": "Lane",
        "type": "string"
    },
    {
        "id": "",
        "label": "Routes",
        "type":"number"
    }
];
//need loop:
jdata.rows = [
    {
        "c": [
            {
                "v": json.hits.hits[0]._source.lane
            },
            {
                "v": json.hits.hits[0]._source.routes
            }
        ]
    }
];
     var data = new google.visualization.DataTable(jdata);

      var chart = new google.visualization.PieChart(document.getElementById('piechart_div'));
     chart.draw(data, {is3D: true, title: 'Multi Routes per Lane', width: 600, height: 440});
    }
    </script>
</head>
<body>
    <div id="piechart_div"> </div>
 </body>
</html> 
```

# batch-rename - 重命名和重新排列不带分隔符的文件名

> ID：15801296
> 
> 赞同：1
> 
> 时间：2013-04-04T01:56:14.330
> 
> 标签：batch-rename

我已经创建了有效的代码，但我花了一段时间，所以我想我会分享。

我需要使用以下文件名格式重命名文件目录： `Dailymmddyyyy.csv`.

我需要的文件名格式是：`yyyymmdd.csv`

这是代码：

```
::This code takes a directory (c:\batch) with files in the following format ::Dailymmddyyyy.csv, and changes them to yyyymmdd.csv:

setlocal ENABLEDELAYEDEXPANSION

for %%i in (c:\batch\Daily*) do (
  set filename="%%~ni"
  set year=!filename:~10!
  ren "%%~i" "!year!!filename:~6,4!%%~xi"    
)
endlocal 
```

`~10`和`~6,4`不是我期望使用的数字，但它有效。我的理解中仍然缺少一些东西。

# .htaccess - .htaccess url 重写从正斜杠到没有像 facebook

> ID：15801299
> 
> 赞同：1
> 
> 时间：2013-04-04T01:56:34.050
> 
> 标签：.htaccess, mod-rewrite

如果您理解我的意思，请按照以下方式回答我的问题：

通过使用 .HTACCESS，我想将以“/”结尾的用户配置文件 URL 重写为无。

例如： http: [//v.com/username/](http://v.com/username/) --> [http://v.com/username](http://v.com/username)就像 facebook 一样。

如果 URL 末尾包含正斜杠，浏览器会显示 404 错误。它告诉浏览器指向一个目录，而不是一个文件。

这就是我所做的：

```
RewriteEngine On

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-l

RewriteRule ^(\w+)/?$ ./index.php?page=$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:58:18.327

将此规则放在`.htaccess`文件的顶部：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ http://%{HTTP_HOST}/$1 [R=301,L] # Remove trailing slash 
```

# prolog - 我的“附加”功能有什么问题？

> ID：15801302
> 
> 赞同：2
> 
> 时间：2013-04-04T01:56:40.853
> 
> 标签：prolog

我正在研究我在我的一个课程中看到的一个简单的 Prolog 示例，使用并重新实现“附加”。这就是我所拥有的（来自课堂）：

```
append1([],L,L).
append1([X|L1],L2,[X|L3]) :-
    append1(L1,L2,L3). 
```

当我这样做时，结果为假：

```
append1([a,b],[c,d],L).
false. 
```

但是当我这样做（使用内置追加）时，结果为真：

```
append([a,b],[c,d],L).
true. 
```

为什么有区别？

为什么以下这两个附加示例甚至都导致“真”？出于某种原因，我希望看到 Ls 的值列表...

```
append(L1,L2,[a,b,c]).
true.

append([a,b],[c,d],L).
true. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-21T10:19:58.140

工作正常：

```
Welcome to SWI-Prolog (Multi-threaded, 64 bits, Version 7.1.33)
Copyright (c) 1990-2015 University of Amsterdam, VU Amsterdam

?- [user].
append1([],L,L).
append1([X|L1],L2,[X|L3]) :-
   append1(L1,L2,L3).
^D
true.

?- append1([a,b],[c,d],L).
L = [a, b, c, d]. 
```

注意：^D 是退出 [user] 模式所需的 ctrl 字符。您不必处于 [user] 模式即可提出查询。可能是您遇到的错误。

再见

# ruby - 在 Ruby 中有效地存储/压缩整数数组？

> ID：15801306
> 
> 赞同：1
> 
> 时间：2013-04-04T01:57:06.087
> 
> 标签：ruby, algorithm, integer

我有一个唯一随机整数的排序数组，其值为 1<=x<=1,000,000,000。我可以用来将它们存储在数据库中的最节省空间的压缩算法是什么？我在想可能涉及位域的东西..

编辑：该数组的大小最多为 1,000,000,000。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:55:19.253

用于`narray`有效处理 Ruby 中的大型数值数组。

它更快，并且使用更少的内存。[http://narray.rubyforge.org/](http://narray.rubyforge.org/)

至于DB存储部分。可以将编组添加到`narray`（默认情况下没有）：

```
# This adds support for Marshal to NArray - found it at: http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/194510
class NArray
  def _dump *ignored
    Marshal.dump :typecode => typecode, :shape => shape, :data => to_s
  end
  def self._load buf
    h = Marshal.load buf
    typecode = h[:typecode]
    shape = h[:shape]
    data = h[:data]
    to_na data, typecode, *shape
  end
end 
```

. . . 这将非常有效，无需您编写特定代码。

如果数字是完全随机的，那么您可以通过压缩实现的目标将受到限制。真正的随机数据几乎是不可压缩的。

如果您对数字的排列方式有一个很好的约束模型，那么您可以使用这方面的知识来创建更好的压缩比。建议使用 a 的帖子`Range`就是一个极端的例子，但当然只有当你有一个非常简单的结构时才有效。

如果结构或多或少是任意的，只需编组数据并对其应用现成的压缩算法，例如`zlib`.

编辑：项目已排序的事实有助于更好地压缩。它还勾选了一个框`narray`- 它比您可以使用 Ruby 手动执行的任何操作都更快地对数字进行排序`Array`

示例代码：

```
require 'narray'
require 'zlib'

# Ten thousand integers . . .
n = NArray.int(10000).random(100000).sort

# Compressed . . .
stored = Zlib::Deflate.deflate( Marshal.dump(n), 9 )

stored.length

 => 14297 
```

这还不错，每个数字 1.5 个字节（实际压缩率会有很大差异，但使用这种技术通常会看到每个数字不到 4 个字节）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T02:57:04.550

1..1,000,000,000 可以保存在 32 位整数中。如果数组是稀疏的，一个合理的编码是将每个有效元素表示为 2 个 32 位整数，一个是元素值，另一个是元素索引。对于数组中的每个有效元素，您需要 64 位/2 个整数，再加上 32 位/一个整数来存储数组中有效元素的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T03:41:07.690

您在 1..1e9 范围内有 1e9 个随机唯一整数，按排序顺序排列。这意味着您恰好拥有该范围内的每个整数之一。这是您使用 ruby​​ 进行的最佳压缩：

存储这个：

```
"(1..10**9).to_a" 
```

然后把它读回来`eval`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T02:13:11.843

您没有提及数据集的大小。数据需要多随机访问？使用位字段压缩它可能会起作用，但您会浪费时间解压缩数据，更不用说 Ruby 不如 C 处理此类数据的效率高。除非空间是一个**主要**问题，否则我会将其作为数据库存储在具有单个整数字段的表中。

# python - python中的cutZeros函数

> ID：15801307
> 
> 赞同：0
> 
> 时间：2013-04-04T01:57:16.817
> 
> 标签：python, string

我必须创建一个字符串函数来删除字符串的前导零，然后返回新字符串。当我运行我目前所拥有的东西时，它什么也没有返回，zilch。如果有人可以看一下，我将不胜感激！

```
def cutZeros(string):
    variable=0
    newString=''
    for index in range(len(string)):
        while string[variable]==0:
            string[variable]=''
            newString+= string[variable]
        variable+=1
    return newString
again='y'
while again == 'y' or again == 'Y':
    string=raw_input('Enter your string of digits: ')
    if len(string)>0:
        print cutZeros(string)
    else:
        print 'invalid input'
    again=raw_input ("again? (Y/N): ") 
```

# php - 导出到 Excel，在 Microsoft Excel 中打开时出错

> ID：15801309
> 
> 赞同：1
> 
> 时间：2013-04-04T01:57:29.897
> 
> 标签：php, export-to-excel, fpdf, openoffice.org, excel-2011

我有一个很长的字符串（大约 700 个字符），需要导出到单个单元格。

```
$pdf->Cell(150,$h,$model->data["value"]); 
```

使用 Microsoft Excel 打开它时，它给我一个“文件错误：数据可能已丢失”。而使用 OpenOffice 则可以完美运行。

有什么解决方法吗？

# delphi - 如何在 Delphi XE3 中使用 align-data-move SSE？

> ID：15801313
> 
> 赞同：7
> 
> 时间：2013-04-04T01:57:50.793
> 
> 标签：delphi, assembly, sse, basm

我试图运行以下内容，

```
type
  Vector = array [1..4] of Single;

{$CODEALIGN 16}
function add4(const a, b: Vector): Vector; register; assembler;
asm
  movaps xmm0, [a]
  movaps xmm1, [b]
  addps xmm0, xmm1
  movaps [@result], xmm0
end; 
```

据我所知，它会在*movaps*上出现访问冲突，如果内存位置是 16 对齐，则可以信任*movaps 。*如果*movups*没有问题（不需要对齐）。

所以我的问题是，在 Delphi XE3 中，{$CODEALIGN} 在这种情况下似乎不起作用。

**编辑**

很奇怪...我尝试了以下方法。

```
program Project3;

{$APPTYPE CONSOLE}

uses
  windows;  // if not using windows, no errors at all

type
  Vector = array [1..4] of Single;

function add4(const a, b: Vector): Vector;
asm
  movaps xmm0, [a]
  movaps xmm1, [b]
  addps xmm0, xmm1
  movaps [@result], xmm0
end;

procedure test();
var
  v1, v2: vector;
begin
  v1[1] := 1;
  v2[1] := 1;
  v1 := add4(v1,v2);  // this works
end;

var
  a, b, c: Vector;

begin
  {$ifndef cpux64}
    {$MESSAGE FATAL 'this example is for x64 target only'}
  {$else}
  test();
  c := add4(a, b); // throw out AV here
  {$endif}
end. 
```

如果没有添加“使用窗口”，一切都很好。*如果“使用窗口”，那么它将在c := add4(a, b)*抛出异常，但不会在*test()*中抛出异常。

谁能解释一下？

***编辑*** 这一切对我来说都是有意义的，现在。Delphi XE3 - 64 位的结论是

1.  X64 的堆栈帧设置为 16 字节（根据需要），{$CODEALIGN 16} 将 proc/fun 的代码对齐为 16 字节。
2.  动态数组位于堆中，可以使用 SetMinimumBlockAlignment(mba16byte) 将其设置为对齐 16
3.  但是，堆栈变量并不总是 16 字节对齐，例如，**如果您在上例中的 v1、v2 之前声明了一个整数 var，例如 test()，则该示例将不起作用**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T20:21:08.553

你需要你的数据是 16 字节对齐的。这需要一些关心和关注。您可以确保堆分配器对齐到 16 个字节。但是您不能确保编译器将 16 字节对齐堆栈分配的变量，因为您的数组的对齐属性为 4，即其元素的大小。并且在其他结构中声明的任何变量也将具有 4 字节对齐。这是一个很难清除的障碍。

我认为您无法在当前可用的编译器版本中解决您的问题。至少不会，除非您放弃堆栈分配的变量，我猜这些变量太难吞下。使用外部汇编器可能会有一些运气。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-14T07:48:04.163

您可以编写自己的内存分配例程，在堆中分配对齐的数据。您可以指定自己的对齐大小（不仅是 16 字节，还有 32 字节、64 字节等等......）：

```
 procedure GetMemAligned(const bits: Integer; const src: Pointer;
      const SrcSize: Integer; out DstAligned, DstUnaligned: Pointer;
      out DstSize: Integer);
    var
      Bytes: NativeInt;
      i: NativeInt;
    begin
      if src <> nil then
      begin
        i := NativeInt(src);
        i := i shr bits;
        i := i shl bits;
        if i = NativeInt(src) then
        begin
          // the source is already aligned, nothing to do
          DstAligned := src;
          DstUnaligned := src;
          DstSize := SrcSize;
          Exit;
        end;
      end;
      Bytes := 1 shl bits;
      DstSize := SrcSize + Bytes;
      GetMem(DstUnaligned, DstSize);
      FillChar(DstUnaligned^, DstSize, 0);
      i := NativeInt(DstUnaligned) + Bytes;
      i := i shr bits;
      i := i shl bits;
      DstAligned := Pointer(i);
      if src <> nil then
        Move(src^, DstAligned^, SrcSize);
    end;

    procedure FreeMemAligned(const src: Pointer; var DstUnaligned: Pointer;
      var DstSize: Integer);
    begin
      if src <> DstUnaligned then
      begin
        if DstUnaligned <> nil then
          FreeMem(DstUnaligned, DstSize);
      end;
      DstUnaligned := nil;
      DstSize := 0;
    end; 
```

然后使用指针和过程作为第三个参数来返回结果。

你也可以使用函数，但不是很明显。

```
type
  PVector^ = TVector;
  TVector  = packed array [1..4] of Single; 
```

然后以这种方式分配这些对象：

```
const
   SizeAligned = SizeOf(TVector);
var
   DataUnaligned, DataAligned: Pointer;
   SizeUnaligned: Integer;
   V1: PVector;
begin
  GetMemAligned(4 {align by 4 bits, i.e. by 16 bytes}, nil, SizeAligned, DataAligned, DataUnaligned, SizeUnaligned);
  V1 := DataAligned;
  // now you can work with your vector via V1^ - it is aligned by 16 bytes and stays in the heap

  FreeMemAligned(nil, DataUnaligned, SizeUnaligned);
end; 
```

正如您所指出的，我们已经传递`nil`给 GetMemAligned 和 FreeMemAligned - 当我们想要对齐现有数据时需要此参数，例如，我们作为函数参数接收的数据。

只需在汇编例程中使用直接寄存器名称而不是参数名称。使用寄存器调用约定时，您不会搞砸任何事情 - 否则您可能会在不知道使用的参数名称只是寄存器的别名的情况下修改寄存器。

在 Win64 下，使用 Microsoft 调用约定，第一个参数始终作为 RCX 传递，第二个 - RDX，第三个 R8，第四个 - R9，其余在堆栈中。函数在 RAX 中返回结果。但是如果一个函数返回一个结构（“记录”）结果，它不会在 RAX 中返回，而是在一个隐式参数中，按地址返回。调用后，您的函数可能会修改以下寄存器：RAX,RCX,RDX,R8,R9,R10,R11。其余的应保留。有关更多详细信息，请参阅[https://msdn.microsoft.com/en-us/library/ms235286.aspx](https://msdn.microsoft.com/en-us/library/ms235286.aspx)。

在 Win32 下，使用 Delphi 寄存器调用约定，调用在 EAX 中传递第一个参数，在 EDX 中传递第二个参数，在 ECX 中传递第三个参数，然后在堆栈中传递

下表总结了这些差异：

```
 64     32
         ---   ---
    1)   rcx   eax
    2)   rdx   edx
    3)   r8    ecx
    4)   r9    stack 
```

因此，您的函数将如下所示（32 位）：

```
procedure add4(const a, b: TVector; out Result: TVector); register; assembler;
asm
  movaps xmm0, [eax]
  movaps xmm1, [edx]
  addps xmm0, xmm1
  movaps [ecx], xmm0
end; 
```

64位以下；

```
procedure add4(const a, b: TVector; out Result: TVector); register; assembler;
asm
  movaps xmm0, [rcx]
  movaps xmm1, [rdx]
  addps xmm0, xmm1
  movaps [r8], xmm0
end; 
```

顺便说一句，根据微软的说法，64 位调用约定中的浮点参数直接在 XMM 寄存器中传递：第一个在 XMM0 中，第二个在 XMM1 中，第三个在 XMM2 中，第四个在 XMM3 中，然后在堆栈中。所以你可以通过值传递它们，而不是通过引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T07:38:35.347

使用它来使内置内存管理器以 16 字节对齐方式分配：

```
SetMinimumBlockAlignment(mba16Byte); 
```

此外，据我所知，“寄存器”和“汇编程序”都是冗余指令，因此您可以从代码中跳过这些指令。

--

编辑：您提到这是针对 x64 的。我刚刚在为 x64 编译的 Delphi XE2 中尝试了以下内容，它在这里工作。

```
program Project3;

type
  Vector = array [1..4] of Single;

function add4(const a, b: Vector): Vector;
asm
  movaps xmm0, [a]
  movaps xmm1, [b]
  addps xmm0, xmm1
  movaps [@result], xmm0
end;

procedure f();
var
  v1,v2 : vector;
begin
  v1[1] := 1;
  v2[1] := 1;
  v1 := add4(v1,v2);
end;

begin
  {$ifndef cpux64}
  {$MESSAGE FATAL 'this example is for x64 target only'}
  {$else}
  f();
  {$endif}
end. 
```

# php - 在 Laravel 中找不到类“用户”

> ID：15801314
> 
> 赞同：2
> 
> 时间：2013-04-04T01:57:50.497
> 
> 标签：php, laravel, eloquent, laravel-3

我不断得到

```
Unhandled Exception
Message:

Class 'User' not found

Location:

C:\wamp\www\laravel\laravel\auth\drivers\eloquent.php on line 70 
```

当我登录用户时。我认为eloquent.php 没有任何问题。请看一下我的**登录控制器**：

```
class Login_Controller extends Base_Controller {

    public $restful = true;

    public function get_index(){
        return View::make('login');
    }

    public function post_index(){

        $username = Input::get('username');
        $password = Input::get('password'); 
        $user_details = array('username' => $username, 'password' => $password);

        if ( Auth::attempt($user_details) )
        {
            return Redirect::to('home.index');
        }
        else
        {
            return Redirect::to('login')
                ->with('login_errors', true);
        }

    }
} 
```

这是登录**视图：**

```
{{ Form::open('login') }}
    <!-- username field -->
    <p>{{ Form::label('username', 'Username') }}</p>
    <p>{{ Form::text('username') }}</p>
    <!-- password field -->
    <p>{{ Form::label('password', 'Password') }}</p>
    <p>{{ Form::password('password') }}</p>
    <!-- submit button -->
    <p>{{ Form::submit('Login', array('class' => 'btn btn-primary')) }}</p>
{{ Form::close() }} 
```

和**routes.php**：

```
<?php

Route::controller(Controller::detect()); // This line will map all our requests to all the controllers. If the controller or actions don’t exist, the system will return a 404 response.
Route::get('about', 'home@about');

Route::filter('auth', function()
{
    if (Auth::guest()) return Redirect::to('login');
}); 
```

我使用 Eloquent 作为我的身份验证驱动程序。我尝试将其更改为 Fluent，但是在单击登录按钮后，它会`return Redirect::to('login')->with('login_errors', true);`在 else 语句中显示此行所产生的登录错误。

使用 Eloquent 时“用户”类有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T08:32:04.487

迈克是对的，这是因为你没有用户模型，但还有更多......

laravel 搜索用户模型但没有找到它的行如下：

```
if ( Auth::attempt($user_details) ) 
```

发生这种情况是因为 Laravel 身份验证系统默认使用 eloquent 驱动程序。为了满足 Laravel 的要求，您需要一个名为“users”的数据库表，其中至少包含文本类型的“用户名”和“密码”列，并且在使用时间戳时可能还包含“created_at”和“updated_at”列，但您可以将其关闭。

```
\application\models\user.php

<?PHP 
class User extends Eloquent
{    
    public static $timestamps  = false; //I don't like 'em ;)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-10T15:44:29.980

这实际上是对@Hexodus 响应的评论，但我没有必要的评论点。

例如，您实际上可以将用户身份验证命名为您想要的任何名称

*   模型：`Turtle`
*   桌子：`turtles`

但是您必须进入`app\config\auth.php`并更改`'model' => '...'`and`'table' => '...'`值才能使 Laravel 的身份验证起作用。

此外，[根据 docs](http://four.laravel.com/docs/security)，您甚至不需要`'username'`或`'password'`在数据库中明确定义

```
if (Auth::attempt(array('email' => $email, 'password' => $password)))
{
  return Redirect::intended('dashboard');
} 
```

> 请注意，“电子邮件”不是必需选项，它仅用作示例。您应该使用与数据库中的“用户名”相对应的任何列名。Redirect::intended 函数会将用户重定向到他们在被身份验证过滤器捕获之前尝试访问的 URL。如果预期的目的地不可用，则可以为此方法提供后备 URI。

实际上，`'email'`在这种情况下被认为是`'username'`

* * *

编辑，因为我一开始遇到了麻烦，所以**在**使用`Auth::attempt(...)`.

# java - Robospice 存储对象，通过 Ormlite 在数据库中扩展 ArrayList

> ID：15801315
> 
> 赞同：4
> 
> 时间：2013-04-04T01:57:57.547
> 
> 标签：java, android, generics, ormlite, robospice

**背景**

我一直在尝试修改已成功运行的[Robospice Ormlite 示例代码。](https://github.com/octo-online/RoboSpice-samples/tree/release/robospice-sample-ormlite)我所做的唯一更改是我有一个包含对象数组的 JSON 响应。

我创建了 2 个类：

```
public class Foos extends ArrayList<Foo>
public class Foo 
```

我遇到了最初的问题，因为我的 JSON 响应是一个没有外部容器的纯数组。我通过 google groups 了解到，解决这个问题的方法是创建一个扩展 ArrayList 的“假”类（Foos）。这产生了以下代码：

```
public class FooRequest extends SpringAndroidSpiceRequest< Foos > {

   private String baseUrl;

    public FooRequest() {
        super( Foos.class );
        this.baseUrl = "http://somewhere.com/jsonurl";
    }

    @Override
    public Foos loadDataFromNetwork() throws RestClientException {
        Ln.d( "Call web service " + baseUrl );
        return getRestTemplate().getForObject( baseUrl, Foos.class );
    }
} 
```

然后，我根据示例创建了以下服务代码。

```
public class MySpiceService extends SpringAndroidSpiceService {

    private static final int WEBSERVICES_TIMEOUT = 10000;

    @Override
    public CacheManager createCacheManager( Application application ) {
        CacheManager cacheManager = new CacheManager();
        List< Class< ? >> classCollection = new ArrayList< Class< ? >>();

        // add persisted classes to class collection
        classCollection.add( Foos.class );

        // init
        RoboSpiceDatabaseHelper databaseHelper = new RoboSpiceDatabaseHelper( application, "sample_database.db", 2 );
        InDatabaseObjectPersisterFactory inDatabaseObjectPersisterFactory = new InDatabaseObjectPersisterFactory( application, databaseHelper, classCollection );
        cacheManager.addPersister( inDatabaseObjectPersisterFactory );
        return cacheManager;
    }

    @Override
    public RestTemplate createRestTemplate() {
        RestTemplate restTemplate = new RestTemplate();
        // set timeout for requests

        HttpComponentsClientHttpRequestFactory httpRequestFactory = new HttpComponentsClientHttpRequestFactory();
        httpRequestFactory.setReadTimeout( WEBSERVICES_TIMEOUT );
        httpRequestFactory.setConnectTimeout( WEBSERVICES_TIMEOUT );
        restTemplate.setRequestFactory( httpRequestFactory );

        // web services support xml responses
        MappingJacksonHttpMessageConverter jsonConverter = new MappingJacksonHttpMessageConverter();
        FormHttpMessageConverter formHttpMessageConverter = new FormHttpMessageConverter();
        StringHttpMessageConverter stringHttpMessageConverter = new StringHttpMessageConverter();
        final List< HttpMessageConverter< ? >> listHttpMessageConverters = restTemplate.getMessageConverters();

        listHttpMessageConverters.add( jsonConverter );
        listHttpMessageConverters.add( formHttpMessageConverter );
        listHttpMessageConverters.add( stringHttpMessageConverter );
        restTemplate.setMessageConverters( listHttpMessageConverters );
        return restTemplate;
    }

} 
```

**问题**

代码在没有任何强制关闭的情况下运行，但是我从来没有在我的活动中点击 RequestListener 内部类。成功或失败消息方法都没有被触发，而且似乎很难调试，所以感觉就像一个“无声的失败”。

```
 public final class MyRequestListener implements RequestListener< Foos > {

        @Override
        public void onRequestFailure( SpiceException spiceException ) {
            Toast.makeText( SampleSpiceActivity.this, "failure", Toast.LENGTH_SHORT ).show();
        }

        @Override
        public void onRequestSuccess( final Articles result ) {
            Toast.makeText( SampleSpiceActivity.this, "success", Toast.LENGTH_SHORT ).show();

        }
    } 
```

**我试过的**

我尝试使用 Ormlite 注释对 Foo 类进行注释，以查看该库是否需要帮助，但仍然没有运气。如下所述：

```
@DatabaseTable
public class Foo {

    @DatabaseField(generatedId = true)
    private int id;

    @DatabaseField
    private String someText;

} 
```

当我实际上想要一个存储 Foo 的数据库表时，我想知道这是否是 Foos 类的结果。任何建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T06:42:22.417

这个问题实际上并不是 RoboSpice 中的错误，而是 ORM Lite 模型的限制。

如果要使用 ORMLite 序列化 Foo 的集合，则必须使用序列化作为 Foo 集合的类。你的做法是对的。然而，您不能仅仅摆脱它来单独存储 Foo 元素。您不仅要使用 Foos 类来解析响应，还要在数据库中存储数据。

Foos 应该：

*   定义一个id
*   使用 DataBaseTable 和 DataField 和 Foreign 集合进行注释

问题是你不能注释一个类并说“I am a Foreig Collection”。这个注解只能用在字段上，不能用在类上。因此，如果您的班级将“持有”一个集合，那将起作用，但不适用于“是”集合的班级。

所以，我相信简短的回答是：不，你不能用 ORM Lite 做到这一点。您必须存储一个像 Foos 这样的顶级类，但它应该可以为 ORM Lite 序列化，为此它需要一个集合字段，并且不能直接是一个集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-13T18:02:55.383

为了补充这个很好的问题，我也经历了这种“无声的失败”，不知道该怎么办。我最终选择在 Android Studios 中查看 logcat 中的所有消息，因此不仅是 android 错误，还有所有内容。我通过选择“详细”和“无过滤器”来做到这一点。

![日志猫](https://i.stack.imgur.com/eSRvz.gif)

当我运行我的应用程序时，我发现我收到一个静默错误的原因是因为我没有为我的 SQL 生成唯一 ID，这导致它崩溃了。

```
 Caused by: android.database.sqlite.SQLiteConstraintException: UNIQUE constraint failed: post.ID (code 1555) 
```

我通过在我的外部类 ID 字段上执行此操作来修复它，它允许它自己生成唯一的 ID：

```
@DatabaseField(allowGeneratedIdInsert=true, generatedId=true)
private int ID; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T11:07:36.013

正如@Snicolas 所说，您应该更改为 Collection 而不是 ArrayList。我想或多或少做同样的事情，但没有结果对象，我对这个问题的解决方法[RoboSpice persist JSON array with OrmLite](https://stackoverflow.com/questions/15835415/robospice-persist-json-array-with-ormlite/15877309#15877309)应该适合你。

```
@DatabaseTable
public class Foos {
    @DatabaseField(id = true)
    private int id;
    @ForeignCollectionField(eager = false)
    private Collection<Foo> result;

    // getters and setters
    ...
}

@DatabaseTable
public class Foo {
    @DatabaseField(id = true)
    private int id;
    @DatabaseField(foreign = true)
    private Foos foos;

    // getters and setters
    ...
} 
```

# scheme - （方案）如何将函数应用于列表中的每个子列表？

> ID：15801316
> 
> 赞同：1
> 
> 时间：2013-04-04T01:58:06.933
> 
> 标签：scheme

我正在尝试删除列表中每个子列表中的第一个元素。我需要每个子列表的 cdar。我尝试使用地图，但它没有用。由于某种原因，我得到了空洞。我应该使用递归吗？

我的代码：

```
(define (rd data)
 (map (lambda (x)
        (if (null? x)
            (cdar x))) 
      data)) 
```

我要这个：

```
'((1 (r (3 4))) (4 (d (5 6)))) -> ((r (3 4)) (d (5 6))) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:10:06.970

前面指出的两个错误加上处理`if`备用错误的需要，解决为：

```
(define (rd data)
 (map (lambda (x)
        (if (not (null? x)
            (cadr x)
            x))
      data)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T02:37:00.057

关于您的代码：传递给的过程`map`不必测试元素是否为`null`，`map`会处理该部分。*该过程只需要*处理将对每个元素执行的操作，`map`将其依次应用于列表的每个元素（在这种情况下，元素恰好是子列表）并返回一个带有结果的列表。

了解以上内容，请注意该过程只需要提取每个子列表的第二个元素。一个更简单的解决方案是编写：

```
(define (rd data)
  (map (lambda (x) (cadr x)) data)) 
```

...但这太冗长了，我们`cadr`依次应用于每个元素，仅此而已，这相当于：

```
(define (rd data)
  (map cadr data)) 
```

...甚至更清晰（在 Racket 中工作）：

```
(define (rd data)
  (map second data)) 
```

任何方式结果都符合预期：

```
(rd '((1 (r (3 4))) (4 (d (5 6)))))
=> '((r (3 4)) (d (5 6))) 
```

# java - 字符串是一个类？

> ID：15801322
> 
> 赞同：-3
> 
> 时间：2013-04-04T01:59:11.163
> 
> 标签：java

嗨，我是 java 新手，想知道为什么 String 是一个类，而 (int,double,etc.) 不是.. 对我来说有很大不同吗？它们都是相同的字符串读取字母 int 读取整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T02:02:16.323

int、double 等是原始数据类型，Java 中有这些数据类型的等价类，即 Integer、Double 等。它们被称为包装类。

请阅读有关 Java 包装类的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T02:01:48.170

String 是一个类，因为它通常表示大多数语言中的字符数组。并支持自己的功能。

原始类型如 int、double 等不支持函数，直接存储在内存中，大小与其限制相对应。

字符串没有实际限制。

考虑 String 类方法，而实例方法、int、double 等没有这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T02:02:01.797

String 是一个对象，它根本不是原始类型，只是一个字符数组。

[为什么没有 String 的原始类型？](https://stackoverflow.com/questions/2099257/string-primitive-type)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T02:02:13.870

int、double、char 是原始类型，其中 String 是一个类。对你来说不会有任何不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T02:57:04.010

是的，String 是一个类，该类包含允许以多种方式对其进行操作的方法。原语也有自己的类（称为包装类）。正如您现在所知道的，也允许它们被操纵。

要记住的一件事是，Java 具有适用于您的问题的命名约定，您总是用大写字母命名一个类。

# ios - 为什么 xcode 调试库大小小于发布库

> ID：15801324
> 
> 赞同：1
> 
> 时间：2013-04-04T01:59:28.283
> 
> 标签：ios, xcode, debugging, size, release

我正在构建一个 Xcode 库项目，其中包含另一个大小为 5.1 MB 的静态库。

在发布模式下，输出库大小为 5.1 MB。但在调试模式下，输出库大小仅为 2.6 MB。

我想知道调试库的大小如何小于发布库。

构建设置是：

```
Optimization level:
  Debug : None [-O0]
  Release : Fastest, Smallest [-Os] 
```

任何想法？

在应用程序和调试中使用上述库时，**它的行为类似于“仅发布”模式库**。我的意思是，代码在调试时会跳转/跳过一些语句。（通过 F6、F7 命令）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T19:07:09.113

在您的项目 BuildSettings 中，在 Architecture 部分下，检查“B​​uild Active Architecture Only”是否在 Debug \ Release 模式下设置为不同的值。

# cordova - SenchaTouch PhoneGap Ext.regApplication是不是一个函数？

> ID：15801325
> 
> 赞同：0
> 
> 时间：2013-04-04T01:59:34.430
> 
> 标签：cordova, sencha-touch

我正在关注[http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap/](http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap/)上的 SenchaTouch/PhoneGap 教程 我正处于初始化 SenchaTouch 应用程序的阶段，我的 HTML 是：

```
<!DOCTYPE html><html>
<head>
    <title>Contacts</title>
    <script type="text/javascript" src="lib/touch/sencha-touch.js"></script>
    <link href="lib/touch/resources/css/sencha-touch.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="cordova-2.5.0.js"></script>
    <script type="text/javascript" src="app/app.js"></script>
    <script type="text/javascript" src="app/views/Viewport.js"></script>
    <script type="text/javascript">
        document.addEventListener("deviceready", app.mainLaunch, false);
        </script>
</head><body></body></html> 
```

但是当我执行时：

```
Ext.regApplication({
name: 'app',
launch: function() {
    console.log('launch');
}}); 
```

我得到：

```
TypeError: 'undefined' is not a function (evaluating 'Ext.regApplication({ name: 'app', launch: function() { console.log('launch'); } })')
line: 6
message: "'undefined' is not a function (evaluating 'Ext.regApplication({↵    name: 'app',↵    launch: function() {↵        console.log('launch');↵    }↵})')"
stack: "eval code↵eval@[native code]↵_evaluateOn↵↵_evaluateAndWrap↵↵evaluate↵↵[native code]"
__proto__: Error 
```

任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:13:16.030

不应该是这样的：

```
Ext.application({
    name: 'app',
    launch: function() {}
}); 
```

代替`Ext.regApplication`

# php - 让 Zend Framework 2 Memcached 工作

> ID：15801326
> 
> 赞同：4
> 
> 时间：2013-04-04T01:59:36.477
> 
> 标签：php, memcached, zend-framework2, zend-cache

我正在尝试创建一个新的（已配置并可以使用）`Zend\Cache\Storage\Adapter\Memcached`并出现错误：

> 文件：[项目]/vendor/zendframework/zendframework/library/Zend/Cache/Storage/Adapter/MemcachedResourceManager.php:52 消息：没有 ID 为“默认”的资源

`Module`班级

```
class Module implements ConfigProviderInterface, ServiceProviderInterface, AutoloaderProviderInterface {
    ...
    public function getServiceConfig() {
        try {
            return array (
                'factories' => array(
                    ...
                    'Cache\Adapter\Memcached' => function ($serviceManager) {
                        $memcached = new Memcached($serviceManager->get('Cache\Adapter\MemcachedOptions'));
                        return $memcached;
                    },
                    'Cache\Adapter\MemcachedOptions' => function ($serviceManager) {
                        return new MemcachedOptions(array(
                            'ttl'           => 60 * 60 * 24 * 7, // 1 week
                            'namespace'     => 'cache_listener',
                            'key_pattern'   => null,
                            'readable'      => true,
                            'writable'      => true,
                            'servers'       => 'localhost',
                        ));
                    },
                    'Search\Model\CityStorage' => function ($serviceManager) {
                        return new CityStorage(
                            $serviceManager->get('Search\Model\CityTable'),
                            $serviceManager->get('Cache\Adapter\Memcached')
                        );
                    }
                )
            );
        }
        ...
    }
    ...
} 
```

`Controller`班级

```
class SearchController extends AbstractActionController {
    ...
    public function searchCoursesAction() {
        ...
        return new ViewModel(array(
            ...
            'cities' => $this->getServiceLocator()->get('Search\Model\CityStorage')->getCities(),
        ));
    }
    ...
} 
```

`Storage`班级

```
<?php
namespace Search\Model;

use Zend\Cache\Storage\Adapter\AbstractAdapter;
use Search\Model\CityTable;

class CityStorage {

    /**
     * @var CityTable
     */
    private $cityTable;
    /**
     * @var AbstractAdapter
     */
    private $cacheAdapter;

    public function __construct(CityTable $cityTable, AbstractAdapter $cacheAdapter) {
        $this->cityTable    = $cityTable;
        $this->cacheAdapter = $cacheAdapter;
        $this->cacheCities();
    }

    public function getCities() {
        if (!$this->cacheAdapter->hasItem('cities')) {
            $this->cacheCities();
        }
        return $cacheAdapter->getItem('cities');
    }

    private function cacheCities() {
        // $cities = $this->cityTable->fetchAll()->toArray();
        // $this->cacheAdapter->setItem('cities', $cities);
        $this->cacheAdapter->setItem('test', 123);
    }

} 
```

如何让它工作？

先感谢您！

编辑：

我已经完成了`MemcachedOptions`设置`servers`（见上文）。现在它起作用了！

注意：`servers`而不是`server`，因为没有方法`setServer()`，而只有`setServers()`在`Zend\Cache\Storage\Adapter\MemcachedOptions`类中：

> 文件：/var/www/itt/unisportr-zf/vendor/zendframework/zendframework/library/Zend/Stdlib/AbstractOptions.php:85 消息：选项“服务器”没有必须定义的匹配 setServer 设置方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:42:28.907

正如您已经指出的，您必须定义一个资源 - 意味着一个基本`\Memcached`实例或自动实例化资源的选项之一。（请看一下`Zend\Cache\Storage\Adapter\MemcachedResource`）......这样做的原因是`\Memcached`在不同的存储适配器实例上共享一个或多个资源。

另请注意，这`AbstractAdapter`不是类型提示的标记 - 您应该通过 StorageInterface 输入提示；）

# java - 从 Arduino 获取串行数据并在 python 中对其进行排序

> ID：15801327
> 
> 赞同：0
> 
> 时间：2013-04-04T01:59:43.457
> 
> 标签：java, python, serial-port, arduino, processing

我有一个 arduino 草图，它接收来自 3 个电位器的模拟数据写入外部 EEPROM。当我读回数据时，我会打印出地址号和模拟值，以便在串行监视器中得到如下信息：

0：221

1：548

2：1023

3：221

4：548

5：1023

6：221

7：548

8：1023

ETC

我最终需要使用我在处理草图中得到的数字，所以我想在 python/处理中编写一些代码，分别对每个电位器的数据进行排序，以便我以后可以轻松地将其传输到处理草图。

任何帮助将不胜感激，我是初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T07:54:03.287

我一直在做类似的事情，使用处理。

对我有用的是将每组数据放入一个数组中，然后使用 saveStrings() 将数组保存到一个文本文件中。然后，如果需要，我可以将其重新导入，或者在 Excel 中轻松绘制图表。

```
 String inString = myPort.readStringUntil('\n');
  if (inString != null) {
    inString = trim(inString);
    String[] split = split(inString, ',');
    inFloat0 = float(split[0]);
    inFloat1 = float(split[1]);

    float pot0 = inFloat0;
    pot0list = append(pot0list, pot0);
    float pot1 = inFloat1;
    pot1list = append(pot1list, pot1); 
```

该代码用于串行字符串中的逗号分隔值，并带有指示数据字符串结尾的换行符。

```
 //Create string for saving to text file
  String[] pot0listString = new String[pot0list.length];
  for (int i = 0; i < pot0list.length; i++) {
    listString[i] = (Float.toString(pot0list[i]) + ',' + Float.toString(pot1list[i]));
  }

  //Save to text file
  saveStrings("list.txt", listString); 
```

那个会将其保存为文本文件，需要对 3 组数据进行一些修改，但它相当简单。

处理也有一个 sort.list 如果您也想使用它，它将对您的数据进行排序。

干杯，马特

# c++ - 构造代码输出

> ID：15801336
> 
> 赞同：0
> 
> 时间：2013-04-04T02:01:15.133
> 
> 标签：c++, struct, constants, output, void

```
#include <iostream>
#define _USE_MATH_DEFINES
#include <math.h>

using namespace std;

struct sphere_t  { float radius; }; sphere_t sph = { 5.8 };

void SphereDescription(sphere_t &sph) {     cout << "Sphere's
description: "; cin >> sph.radius; }

double SphereSurfaceArea(const sphere_t &sph) {     return
4*M_PI*sph.radius*sph.radius;  }

double SphereVolume(const sphere_t &sph) {  return
4.0/3.0*M_PI*sph.radius*sph.radius*sph.radius; }

//the volume and surface area of cylinder 

struct cylinder_t { float
radius ; float height ; }; cylinder_t cylr,cylh = { 6.6,1.3 };

double SurfaceAreaCylinder(const cylinder_t &cylr,const cylinder_t&cylh)
{   return (2*M_PI*cylr.radius)*2 +2*M_PI*cylr.radius*cylh.height; }

double CylinderVolume(const cylinder_t &cylr,const cylinder_t &cylh) {  return 2*M_PI*cylr.radius*cylr.radius*cylh.height; }

int main() { cout << "Sphere's description radius: " << sph.radius << endl; cout << "Surface Area: " << SphereSurfaceArea(sph) << endl; cout << "Volume :" << SphereVolume(sph) << endl;

cout << "Cylinder's description radius: " << cylr.radius << endl; cout << "Cylinder's description height: " << cylh.height << endl; cout << "Surface Area: " << SurfaceAreaCylinder(cylr,cylh) << endl; cout << "Volume :" << CylinderVolume(cylr,cylh) << endl;

system("pause");   return(0); } 
```

//输出

```
Sphere's description radius: 5.8

Surface Area: 422.733

Volume : 817.283

Cylinder's description radius: 0

Cylinder's description height: 1.3

Surface Area: 0 

Volume : 0 
```

为什么半径、SA 和体积处的输出为零？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:07:08.220

`cylr`没有被初始化，只有`cylh`.

```
cylinder_t cylr,cylh = { 6.6,1.3 }; 
```

试试这个：

```
cylinder_t cylr = { 1.1, 2.2 }, cylh = { 6.6,1.3 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:19:26.340

您的代码中有一些问题： struct cylinder_t { float radius ; 浮动高度；}; 圆柱体_t cylr,cylh = { 6.6,1.3 };

在这里，您声明了两个结构变量（您打算这样做吗？）只有 cylh 用值 (6.6 , 1.3) 初始化， cylr 未初始化

所以， cylh.height 返回 1.3（因为它是用它初始化的），但是 cylr.radius 在未初始化时返回 0 .. 这个问题导致其他值是 0

# dart - 你可以在 Dart 应用程序中使用 java 库吗？

> ID：15801339
> 
> 赞同：7
> 
> 时间：2013-04-04T02:01:52.310
> 
> 标签：dart

本周我开始学习 Dart 教程，并且对语言、工具和功能印象深刻。但是，我还在学习语言。

我正在考虑用 Dart 编写一个服务器端应用程序，并且想导入一个现有的 java 库并利用它的类和方法。这可能吗？

我没有看到任何参考或示例表明这是一个有效的用例。

您的想法和答案将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T08:58:55.910

不，这是不可能的。Dart 和 Java 是不同的语言，它们都在各自的 VM 中运行。

[但是，您可以通过Process](http://api.dartlang.org/docs/bleeding_edge/dart_io/Process.html#run)类调用 java 。

还有一个[Java to Dart 插件](https://code.google.com/p/dart/source/browse/#svn/trunk/dart/editor/util/plugins/com.google.dart.java2dart)处于实验阶段。

# c# - 如何在 C# 中多线程读取行而不暂停或中断程序？

> ID：15801344
> 
> 赞同：3
> 
> 时间：2013-04-04T02:02:24.483
> 
> 标签：c#, multithreading, console-application, readline, steambot

我有一个程序在一个循环中运行，并且希望允许实时人机交互而不会中断或暂停程序。

我希望能够让它使用输入作为已经运行的程序的命令。

基本上，如果我没有正确解释它：

-主程序在前台运行。

- 寻找输入的二次无限循环在后台运行

- 输入并按下返回键 (ReadLine) 时，保存字符串并发送到另一个函数（例如 Interpreter()）

- 我已经设置好读取返回的输入（一个简单的循环），我只是无法理解如何随时允许用户输入。

编辑：我知道堆栈溢出通常是为了帮助解决代码中的错误，但我知道它应该很简单，我只是不明白从哪里开始。

编辑2：

```
using System;
using System.Threading;
using SteamKit2;
using SteamTrade;
using System.Collections.Generic;
using System.Text;

namespace SteamBot
{
public class Program
{
    public static void Main(string[] EventArgs)
    {
        LicenseGlobal.Seal.Initialize("MY LICENSE KEY *please ignore this*");

        if (System.IO.File.Exists("settings.json"))
        {

            Configuration config = Configuration.LoadConfiguration("settings.json");
            Log mainLog = new Log(config.MainLog, null);
            foreach (Configuration.BotInfo info in config.Bots)
            {
                mainLog.Info("Launching Bot " + info.DisplayName + "...");
                new Thread(() =>
                {

                    int crashes = 0;
                    while (crashes < 1000)
                    {
                        try
                        {
                            new Bot(info, config.ApiKey, (Bot bot, SteamID sid) =>
                            {

                                return (SteamBot.UserHandler)System.Activator.CreateInstance(Type.GetType(bot.BotControlClass), new object[] {
                                        bot,
                                        sid
                                    });
                            }, false);

                        }
                        catch (Exception e)
                        {
                            mainLog.Error("Error With Bot: " + e);
                            crashes++;
                        }
                    }
                }).Start();
                Thread.Sleep(5000);
            }
        }
        else
        {
            Console.WriteLine("Configuration File Does not exist. Please rename 'settings-template.json' to 'settings.json' and modify the settings to match your environment");
        }
        Console.WriteLine("Hello World");
        Console.ReadKey();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T02:23:25.323

您的主线程应该是等待用户输入的主线程。像这样的东西：

```
using System;
using System.Threading;

namespace Input
{
    class MainClass
    {
        public static void Main (string[] args)
        {
            // This is to stop the worker thread
            var workerShouldStop = false;

            var worker = new Thread(() => 
            {
                // do work
                while (!workerShouldStop) {
                    Thread.Sleep(1000);
                    Console.WriteLine("doing things ...");
                };
            });

            worker.Start();

            string input;
            do 
            {
                Console.Write ("Your input (enter to quit):");
                input = Console.ReadLine();
                Console.WriteLine("input is:" + input);
            } while(!String.IsNullOrWhiteSpace(input));

            // Stop the worker thread
            workerShouldStop = true;
        }
    }
} 
```

# pyephem - 是否有机会扩展 pyephem.Jupiter() 以包含 cmlIII？

> ID：15801347
> 
> 赞同：2
> 
> 时间：2013-04-04T02:03:07.473
> 
> 标签：pyephem

任何天文学家都知道扩展 pyephem 库以使其能够计算木星的 CMLIII 需要什么？截至当前版本，它只计算 CMLI 和 CMLII

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:04:00.487

我们所需要的只是用于计算 CML-III 的常量，这些常量与我们已经用于 CML-I 和 CML-II 的常量相匹配，您可以在源代码中找到这些常量：

[https://github.com/brandon-rhodes/pyephem/blob/master/libastro-3.7.5/jupmoon.c#L199](https://github.com/brandon-rhodes/pyephem/blob/master/libastro-3.7.5/jupmoon.c#L199)

如果您可以找到 CML-III 的一对兼容常量，那么我们也可以为木星天体添加该数字。在这里您可以找到一个 Github 问题，我们将在其中跟踪是否添加了此功能：

[https://github.com/brandon-rhodes/pyephem/issues/3](https://github.com/brandon-rhodes/pyephem/issues/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T19:43:24.883

如何使用转换：

```
CMLIII=CMLII+81.2+0.266*(t-2438761.5) 
```

这是为 Seidelman & Divine 中的转换定义的，“系统 III (1965) 中木星经度的评估，地球物理研究快报，4:65-68, 1977?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-12T13:17:49.100

Rasha Hashim Ibrahim 的硕士论文可在[https://www.scbaghdad.edu.iq/library/Astronomy/MS.C/2011/Calculating%20the%20Central%20Meridian%20Longitude.pdf](https://www.scbaghdad.edu.iq/library/Astronomy/MS.C/2011/Calculating%20the%20Central%20Meridian%20Longitude.pdf)获得，其中他详细说明了转换CML1、CML2 和 CML3 之间。我不能保证它的准确性，但它似乎对这个问题采取了合理的方法。

# php - PHP没有收到POST字符串

> ID：15801355
> 
> 赞同：0
> 
> 时间：2013-04-04T02:04:24.117
> 
> 标签：php, jquery, ajax, post

我正在尝试使用以下功能将单个选择选项值发布到`pChart`页面。当我尝试在开发人员工具中检查表单数据时，它表明该`name:datastring`对已发布到 PHP 文件中。Javascript文件如下：

```
$(document).ready(function() {
    $('#players').on('change', function() {
        var dataString = $('#players option:selected').val();
        $.post("../pChart2.1.3/AllPillarsCoach.php",
               {name:dataString},
               "\nStatus: " + status);
    });
}); 
```

但它显示了一个空数组：

```
<?php
    echo "<pre>";
    var_dump($_POST)."br /";
    echo "</pre><br>";
    ...
?> 
```

我也检查过`GET`，但没有成功。我不希望返回到浏览器，因为 PHP 页面呈现图像并且对于应用到`div`.

感谢到目前为止我的原始功能的回复，我将其截断以尝试确保 pChart 将被解析。

```
 $(document).ready(function() {
    $('#players').on('change', function() {
        var dataString = $('#players option:selected').val();
                $.post("../pChart2.1.3/All.php",{name:dataString},"\nStatus: " + status,
                    function(status){
                alert("Data: " + dataString + "\Status: " + status);
            });

            });

        }); 
```

两个版本的开发人员工具都建议表单数据正在发布名称= thw17po14 并解析名称：thw17po14。警报同时显示 dataString 和成功消息。我只想将发布数据作为查询的标准，结果图表将单独访问，因此无需返回浏览器。现在的警报在更改“选择选项”后显示以下内容，再次感谢您提前提供的任何帮助。

```
 Data: thw17po14Status: <pre>array(1){
                ["name"]=>
                  string(9)"thw17po14"
                     }
                   </pre><br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:44:52.357

您是否将正确的参数传递给 $.post？

它应该是

```
$.post("../pChart2.1.3/AllPillarsCoach.php",
               {name:dataString},
               function(data){
                 alert(data);
               }
); 
```

检查[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)以获取更多参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:44:06.720

我还不能发表评论 - 但现在一切看起来都很好，不是吗？

dataString 不为空并显示 - 状态也显示数组：

```
Status: <pre>array(1){
            ["name"]=>
              string(9)"thw17po14"
                 }
               </pre><br> 
```

它还显示您的 HTML。我会说你已经完成了:)

# php - mySQL 从分数中获得排名

> ID：15801356
> 
> 赞同：0
> 
> 时间：2013-04-04T02:04:42.193
> 
> 标签：php, mysql

我的表格字段得分中有数字，我想`fill/add`根据得分对字段进行排名，如下所示。我怎么能这样做？

```
Score  -->  Rank
75        
82       
83        
75        
90        
78        
78        
75        
80        
73        
76 
```

当我们整理它时，这会变成这样：

```
Score  >  Rank
90        1
83        2
82        3
80        4
78        5.50
78        5.50
76        7
75        8.50
75        8.50
75        8.50
73        11 
```

排名一开始是空白的，然后我更新它，或者创建新字段来填写排名

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:13:57.953

获取 Score 的 Min 和 Max 值，然后

```
UPDATE table SET rank= ((Score-@Min)/(@Max-@Min))*9+1 
```

这将从1-10排名。将 9 相应地更改为您的等级限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:15:12.677

我有点困惑如何获得 5.5 vs 5 和 8.5 vs 8（甚至 9），但是如果您正在寻找行号或排名，那么您可以使用用户定义的变量：

```
SELECT y.score, y.score/z.maxscore perc, 
  @rn:=@rn+1 rn,
  @rnk:=IF(@score=y.score,@rnk,@rn) rnk,
  @score:=y.score
FROM yourtable y
  CROSS JOIN (SELECT MAX(score) maxscore
        FROM yourtable) z
  JOIN (SELECT @score:=-1,@rnk:=0,@rn:=0) t
ORDER BY 2 DESC 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/95314/1)

如果您一直在寻找排名 + 0.5，那么很容易将其添加到上述查询中。只是没有完全理解其中的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T02:19:17.977

获得平均排名需要更多的工作；

```
select t.score, (minrank + maxrank) / 2.0 as rank
from t join
     (select t.score, min(rank) as maxrank, max(rank) as minrank
      from (select t.score, @rn = @tn + 1 as rank
            from t cross join (select @rn := 0) const
            order by t.score desc
           ) t
      group by t.score
     ) tr
     on tr.score = t.score 
```

# c# - 处理键盘事件时如何将 e.KeyChar 转换为实际字符值？

> ID：15801358
> 
> 赞同：5
> 
> 时间：2013-04-04T02:04:56.030
> 
> 标签：c#, .net, winforms, keypress, keyboard-events

我想要做的就是获取在为事件输入键时按下的实际字符。

我看到的唯一选择是`e.KeyChar`给我位置而不是角色本身。

我想要做的是将按键的值限制为0-9之间的数字。我现在的做法就是`if((e.KeyChar < 48 || (e.KeyChar > 57)))`

仅输入 0 和 9 的值似乎有点便宜，而且我很想知道如何获取角色值本身而不是其键。

编辑：感谢您的输入；所以一般来说，没有办法从拥有`e.KeyChar`价值到输入本身的价值。

我真的很想接受我的事件 e，并直接访问按下的字符，而不是使用 e.KeyChar 来获取该值的数字表示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T02:11:03.857

这是检测按下的键是否为数字的更简单方法：

```
if (char.IsDigit(e.KeyChar)) { // doSomething(); } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T02:07:30.057

`KeyChar`是一个[`char`](http://msdn.microsoft.com/en-us/library/vstudio/x9h8tsay.aspx)值 - 它**是**`0`字符本身 - 48 和 57 是and的 ascii 值`9`。

在 C# 中，您可以通过其数字 ASCII 代码或单引号中的实际字符来引用字符。因此，您的代码可以变成：

```
if((e.KeyChar < '0' || (e.KeyChar > '9'))) 
```

这是完全相同的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T07:45:26.693

`e.KeyChar`是`char`对应于按下的键，而不是位置。.NET Framework 用于`char`表示 Unicode 字符。如果“实际字符值”是指字符 0-9 的整数值，而不是它们的 Unicode 值（48-57），您可以这样做：

```
var value = Char.GetNumericValue(e.KeyChar); 
```

要将按键的值限制为 0-9 之间的数字：

```
if (!Char.IsDigit(e.KeyChar))
{
    e.Handled = true;
    return;
} 
```

对于更完整的解决方案，允许更正：

```
const char Backspace = '\u0008';
const char Delete = '\u007f';

if (!Char.IsDigit(e.KeyChar)    // Allow 0-9
    && e.KeyChar != Backspace   // Allow backspace key
    && e.KeyChar != Delete)     // Allow delete key
{
    e.Handled = true;
    return;
} 
```

# java - Oauth 2.0 和谷歌应用引擎

> ID：15801360
> 
> 赞同：2
> 
> 时间：2013-04-04T02:05:07.523
> 
> 标签：java, google-app-engine

有谁知道如何使用 Oauth 2.0 for Google APIs Client Library for Java 获取用户信息？

# php - 监视一组目录并生成“事件”，当新文件出现时——libevent 或 libev 可以这样做吗？

> ID：15801361
> 
> 赞同：0
> 
> 时间：2013-04-04T02:05:13.513
> 
> 标签：php, unix, libevent, libev

我正在用 PHP 编写一个程序（不要问），它需要监视一组等待文件出现和处理新人的目录。

libevent 或 libev（都有匹配的 PHP 扩展）可以生成这样的事件吗？我知道，两者（kqueue、epoll 等）使用的底层机制都支持这一点，但是库是否利用了这些功能？

我的程序必须在 Linux 和 Solaris 上运行，所以直接使用 inotify 已经过时了……

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T09:31:39.160

您可以使用 libfam 获取 fam 以报告文件和目录的事件，并使用 libev 或 libevent 自己监视套接字（包括您访问 FAM 守护程序的套接字）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T14:56:44.600

不，您将无法使用 libevent 或 libev 执行此操作，您需要使用诸如 inotify/dnotify 之类的东西。但是，您可以使用 libevent 或 libev 观察使用 inotify 获得的文件描述符。

# ios - 导航栏和子视图ios之间的差距？

> ID：15801365
> 
> 赞同：2
> 
> 时间：2013-04-04T02:05:40.540
> 
> 标签：ios, objective-c, storyboard, subview

我知道有这个问题：[添加子视图会在子视图和导航栏之间留下间隙](https://stackoverflow.com/questions/12310683/adding-subview-leaves-gap-between-subview-and-navigation-bar)

但是，没有答案，我用不同的方法做我的方法，所以可能会有点不同。无论如何，当我将子视图添加到我的导航控制器时，导航栏和子视图之间也存在差距，导航控制器也有一个标签栏控制器。我正在使用故事板。我正在`UIViewController.view`通过情节提要 id 使用类型添加子视图。

我的代码：

```
[self.view addSubview:[[self.storyboard instantiateViewControllerWithIdentifier:@"View"] view]]; 
```

这有效，并添加了视图，但上面有间隙。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-11T06:08:19.843

我通过设置 to 的`translucent`属性`UINavigationController`来解决它`NO`。在 viewDidLoad 中添加以下行

```
self.navigationController.navigationBar.translucent = NO; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T10:04:33.837

在 Storyboard 中定义的“视图”视图控制器上，将“从 NIB 调整视图大小”属性设置为**未勾选**（默认情况下勾选）。这解决了我的差距问题。

# javascript - 检查复选框是否被选中：DOJO Javascript

> ID：15801367
> 
> 赞同：0
> 
> 时间：2013-04-04T02:06:14.657
> 
> 标签：javascript, dojo

我在我的页面中定义了一个复选框，其代码如下，

```
<li class="Checkbox"> 
             <input 
                 id="Flag1" 
                 onclick="obj(this);"
                 type="checkbox"
                 name="Flag1.CheckName" 
                 dojotype="rmt.YNCheckBox"
                  <c:if test="${depotVal.checkFlag}">checked</c:if> 
             /> 
        </li> 
```

在我的 javascript 中，我正在尝试检查是否选中了上面的复选框，并且只有在选中它的情况下，我才会继续执行其余代码。

我尝试使用以下代码。它不起作用并在页面末尾抛出错误。

```
var chkbox1 = dijit.byId("Flag1");

alert(chkbox1.checked);  //returns true when checked and false when unchecked

if ((chkbox1.checked) || (chkbox1.checked == true)){
       ...
        } 
```

还有其他选择吗？如何使其始终如一地工作？上面的代码片段在 Mozilla 中也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:28:02.763

它在哪里抛出错误？是`chkbox1`真正的dijit吗？

无论如何，您应该使用`domNode`dijit 吗？

```
chkbox1.domNode.checked 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T14:09:45.337

我是这样做的：

```
var t = query(".dijitCheckBoxInput");
array.forEach(t, function(item){
    if (item.checked) {
        item.checked = false;
    }
}); 
```

但是，这不会取消选中复选框，只会更改其内部状态。要取消选中它们，我将其容器的 innerHTML 设置为 checkBoxContainer.innerHTML = ' '; 然后我执行了最初绘制复选框的函数。

你现在可能已经想通了，但我想我会把它发布给其他试图做类似事情的人。

# paypal - 如何从我的页面获取 Paypal Expresscheckout 响应？

> ID：15801368
> 
> 赞同：0
> 
> 时间：2013-04-04T02:06:22.140
> 
> 标签：paypal, paypal-sandbox

我是 paypal api 集成的新手，我只想知道如何从 paypal expresscheckout 获得响应？我目前正在沙盒上进行测试。

是否可以通过 ajax 向贝宝发送请求？我在表单提交中看到了示例，但我不知道如何以编程方式获取响应。

请帮助我，非常感谢

伯纳德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:20:18.513

您只需要阅读正在发回的响应。这是 PHP 中使用 CURL 建立连接的代码示例。

```
<?php

/** DoExpressCheckoutPayment NVP example; last modified 08MAY23.
 *
 *  Complete an Express Checkout transaction. 
*/

$environment = 'sandbox';   // or 'beta-sandbox' or 'live'

/**
 * Send HTTP POST Request
 *
 * @param   string  The API method name
 * @param   string  The POST Message fields in &name=value pair format
 * @return  array   Parsed HTTP Response body
 */
function PPHttpPost($methodName_, $nvpStr_) {
    global $environment;

    // Set up your API credentials, PayPal end point, and API version.
    $API_UserName = urlencode('my_api_username');
    $API_Password = urlencode('my_api_password');
    $API_Signature = urlencode('my_api_signature');
    $API_Endpoint = "https://api-3t.paypal.com/nvp";
    if("sandbox" === $environment || "beta-sandbox" === $environment) {
        $API_Endpoint = "https://api-3t.$environment.paypal.com/nvp";
    }
    $version = urlencode('51.0');

    // setting the curl parameters.
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $API_Endpoint);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);

    // Set the curl parameters.
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);

    // Set the API operation, version, and API signature in the request.
    $nvpreq = "METHOD=$methodName_&VERSION=$version&PWD=$API_Password&USER=$API_UserName&SIGNATURE=$API_Signature$nvpStr_";

    // Set the request as a POST FIELD for curl.
    curl_setopt($ch, CURLOPT_POSTFIELDS, $nvpreq);

    // Get response from the server.
    $httpResponse = curl_exec($ch);

    if(!$httpResponse) {
        exit('$methodName_ failed: '.curl_error($ch).'('.curl_errno($ch).')');
    }

    // Extract the response details.
    $httpResponseAr = explode("&", $httpResponse);

    $httpParsedResponseAr = array();
    foreach ($httpResponseAr as $i => $value) {
        $tmpAr = explode("=", $value);
        if(sizeof($tmpAr) > 1) {
            $httpParsedResponseAr[$tmpAr[0]] = $tmpAr[1];
        }
    }

    if((0 == sizeof($httpParsedResponseAr)) || !array_key_exists('ACK', $httpParsedResponseAr)) {
        exit("Invalid HTTP Response for POST request($nvpreq) to $API_Endpoint.");
    }

    return $httpParsedResponseAr;
}

/**
 * This example assumes that a token was obtained from the SetExpressCheckout API call.
 * This example also assumes that a payerID was obtained from the SetExpressCheckout API call
 * or from the GetExpressCheckoutDetails API call.
 */
// Set request-specific fields.
$payerID = urlencode("payer_id");
$token = urlencode("token");

$paymentType = urlencode("Authorization");          // or 'Sale' or 'Order'
$paymentAmount = urlencode("payment_amount");
$currencyID = urlencode("USD");                     // or other currency code ('GBP', 'EUR', 'JPY', 'CAD', 'AUD')

// Add request-specific fields to the request string.
$nvpStr = "&TOKEN=$token&PAYERID=$payerID&PAYMENTACTION=$paymentType&AMT=$paymentAmount&CURRENCYCODE=$currencyID";

// Execute the API operation; see the PPHttpPost function above.
$httpParsedResponseAr = PPHttpPost('DoExpressCheckoutPayment', $nvpStr);

if("SUCCESS" == strtoupper($httpParsedResponseAr["ACK"]) || "SUCCESSWITHWARNING" == strtoupper($httpParsedResponseAr["ACK"])) {
    exit('Express Checkout Payment Completed Successfully: '.print_r($httpParsedResponseAr, true));
} else  {
    exit('DoExpressCheckoutPayment failed: ' . print_r($httpParsedResponseAr, true));
}

?> 
```

# asp.net-mvc - MVC 3 错误页面未在开发服务器上显示

> ID：15801374
> 
> 赞同：0
> 
> 时间：2013-04-04T02:06:53.157
> 
> 标签：asp.net-mvc, asp.net-mvc-3, custom-error-pages

我为 MVC 应用程序创建了自定义视图。

我让错误冒泡到 Globals.asax 文件中的 Application_Error 处理程序，并重定向到呈现这些视图的错误控制器：

```
protected void Application_Error(object sender, EventArgs eventArgs)
{
    Exception exception = Server.GetLastError();
    Response.Clear();
    var httpException = exception as HttpException;

    Response.TrySkipIisCustomErrors = true;

    if (httpException != null)
    {
        switch (httpException.GetHttpCode())
        {
            case 404:
                Server.ClearError();
                Response.Redirect(UiConstants.PageNotFoundPage);
                break;
            case 500:
                if (httpException.Message.Equals(UiConstants.NoSessionStateExceptionMsg, StringComparison.Ordinal))
                {
                    Server.ClearError();
                    Response.Redirect(UiConstants.SessionNotAvailablePage);
                }
                else
                {
                    Server.ClearError();
                    Response.Redirect(UiConstants.ServerErrorPage);
                }
                break;
            default:
                Server.ClearError();
                Response.Redirect(UiConstants.ServerErrorPage);
                break;
        }
    }
    else
    {
        Server.ClearError();
        Response.Redirect(UiConstants.ServerErrorPage);
    }
} 
```

在我的开发环境（VS Dev Web Server）中，这是按设计工作的。当我将它部署到测试服务器时，会显示库存的 IIS 错误网页，而不是我的视图。

路由路径正确即*servername/StaticContent/PageNotFound*

任何想法如何解决这个问题？是否有一些 IIS 设置这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T00:59:25.720

我相信我已经确定了我的问题。在本地运行，基地址只是`http://localhost:64133/`. 所以我所有的重定向都在使用相对路径，例如`http://localhost:64133/staticcontent/pagenotfound`

但是，当我在我们的开发环境中部署到我的开发服务器时，基本目录的路径略有不同，因为 IIS 应用程序位于名为 WebRequest 的文件夹中，该文件夹位于 wwwroot 内（在 C:\inetpub 中）。

这意味着应用程序的基本 URL 是`http://servername/WebRequest/`. 所以我的重定向将它发送到`http://servername/staticcontent/pagenotfound`，而不是`http://servername/WebRequest/staticcontent/pagenotfound`。

对不起那些人。这对你们来说是非常困难的，因为他们不知道环境的弱点。我想我们都可以从中学习。再次感谢。

# java - 在java中写入excel时出错

> ID：15801375
> 
> 赞同：1
> 
> 时间：2013-04-04T02:07:04.987
> 
> 标签：java, servlets, export-to-excel

我无法弄清楚是什么问题。我试过了，但错误仍然存​​在。

我的程序是导出到 excel，我正在使用 apache poi api。

下面是我的代码。编辑：

```
public void exportToExcel(ValueObjectList columnBody, String pageDef, ValueObject vo){
    try {
    HttpServletResponse response = vo.getResponse();

     SimpleDateFormat sd = new SimpleDateFormat("ddMMyy");
     Date dt = new Date();
    response.setContentType("application/vnd.ms-excel");
    if(pageDef == "promo" || pageDef.equals("promo"))
        response.setHeader("Content-Disposition", "attachment; filename=PROMO-" + sd.format(dt) + ".xls");
    else if(pageDef == "incomplete" || pageDef.equals("incomplete"))
        response.setHeader("Content-Disposition", "attachment; filename=INCOM-" + sd.format(dt) + ".xls");
    else
         response.setHeader("Content-Disposition", "attachment; filename=ST-" + sd.format(dt) + ".xls");

    // create a small spreadsheet
     HSSFWorkbook wb = new HSSFWorkbook();
     HSSFSheet sheet = wb.createSheet();

     HSSFRow row = null;
     HSSFCell cell = null;

     //set default font properties
     //font family: Arial
     //font weight: bold
     Font headerFont = wb.createFont();
     headerFont.setBoldweight(Font.BOLDWEIGHT_BOLD);

     headerFont.setFontHeightInPoints((short)14);

     //Cell Style for header
     CellStyle csHeader = wb.createCellStyle();
     csHeader.setFont(headerFont);
     csHeader.setBorderBottom(csHeader.BORDER_THICK);
     csHeader.setFillForegroundColor(HSSFColor.GREY_25_PERCENT.index);
     csHeader.setFillPattern(HSSFCellStyle.SOLID_FOREGROUND);
     csHeader.setWrapText(true);

     //Cell Style for body
     CellStyle csBody = wb.createCellStyle();
     csBody.setWrapText(true);
     csBody.setAlignment(HSSFCellStyle.ALIGN_CENTER);

     String[] columnHeader = ((ValueObject)columnBody.get(0)).toKeyArray();
     //System.out.println("Header Length: " + columnHeader.length);

     row = sheet.createRow(0);
     cell = row.createCell(0);
     cell.setCellValue("No");
     cell.setCellStyle(csHeader);

     for(int h = 0; h < columnHeader.length; h++){
         cell = row.createCell(h+1);
         cell.setCellValue(columnHeader[h]);
         cell.setCellStyle(csHeader);
         sheet.autoSizeColumn(h+1);
         //sheet.setColumnWidth(h, 2000);
     }

     //System.out.println("header key : " + columnHeader[2]);
    //System.out.println("header value : " + testobj.get(testobj.toKeyArray()[2]));

     for(int i = 0; i < columnBody.size(); i++){
         row = sheet.createRow(i+1);
         cell = row.createCell(0);
         cell.setCellValue(i+1);
         cell.setCellStyle(csBody);
         ValueObject column = (ValueObject)columnBody.get(i);
         for(int j = 0; j < column.size(); j++){
             cell = row.createCell(j+1);
             cell.setCellValue(column.get(column.toKeyArray()[j]));
             cell.setCellStyle(csBody);
             sheet.autoSizeColumn(j+1);
         }
     }

     /*
     // write it as an excel attachment
     ByteArrayOutputStream outByteStream = new ByteArrayOutputStream();
     wb.write(outByteStream);
     byte [] outArray = outByteStream.toByteArray();
     response.setContentType("application/ms-excel");
     response.setContentLength(outArray.length);
     response.setHeader("Expires:", "0"); // eliminates browser caching
     if(pageDef == "promo" || pageDef.equals("promo"))
        response.setHeader("Content-Disposition", "attachment; filename=PROMO-" + sd.format(dt) + ".xls");
     else if(pageDef == "incomplete" || pageDef.equals("incomplete"))
        response.setHeader("Content-Disposition", "attachment; filename=INCOM-" + sd.format(dt) + ".xls");
     else
         response.setHeader("Content-Disposition", "attachment; filename=ST-" + sd.format(dt) + ".xls");

     OutputStream outStream = response.getOutputStream();
     outStream.write(outArray);
     outStream.flush();
     */

     ByteArrayOutputStream outByteStream = new ByteArrayOutputStream(wb.getBytes().length);
     wb.write(outByteStream);

    } catch (Exception e) {
        log.error(e);
        e.printStackTrace();
    }
} 
```

我试图在谷歌上冲浪并试图解决但不行。

起初，我在jsp中编写了这些代码。

当我浏览谷歌时，人们说我必须在 servlet 中使用，所以我转向 servlet 但仍然出现错误。

英语不是我的母语。对不起，如果我输入错误。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:15:34.393

我猜你的错误与这段代码有关（不是 apache poi api）：

```
OutputStream outStream = response.getOutputStream();
outStream.write(outArray);
outStream.flush();
outStream.close(); 
```

因为您正在刷新和关闭 servlet 中的输出流，所以在响应返回到客户端之前尝试写入输出流的任何内容都将导致抛出 IllegalStateException。通常最好将 flush() 和 close() 留给 servletcontainer，除非你真的知道你在做什么。
尝试删除 flush() 和 close()，并检查您拥有的其他 servlet 是否正在做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:42:29.183

`java.lang.IllegalStateException: getOutputStream() has already been called for this response`

是因为这些代码

```
// write it as an excel attachment
     ByteArrayOutputStream outByteStream = new ByteArrayOutputStream();
     wb.write(outByteStream); // This writes  workbook to put put stream

     // Perform these before wb.write(outByteStream);
     byte [] outArray = outByteStream.toByteArray();
     response.setContentType("application/ms-excel");
     response.setContentLength(outArray.length);
     response.setHeader("Expires:", "0"); // eliminates browser caching
     if(pageDef == "promo" || pageDef.equals("promo"))
        response.setHeader("Content-Disposition", "attachment; filename=PROMO-" + sd.format(dt) + ".xls");
     else if(pageDef == "incomplete" || pageDef.equals("incomplete"))
        response.setHeader("Content-Disposition", "attachment; filename=INCOM-" + sd.format(dt) + ".xls");
     else
         response.setHeader("Content-Disposition", "attachment; filename=ST-" + sd.format(dt) + ".xls");
     OutputStream outStream = response.getOutputStream();
     outStream.write(outArray);
     outStream.flush();
     outStream.close(); 
```

编辑：方法`write()`-> 将此工作簿写入输出流。

检查 API： http: [//poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFWorkbook.html#write%28java.io.OutputStream%29](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFWorkbook.html#write%28java.io.OutputStream%29)

因此，这已经发送了输出/响应，然后您尝试设置响应并`OutputStream`从响应中获取。

问题中没有任何参考或代码相关`javax.servlet.ServletException: File &quot;/common/err/errorPage.jsp&quot; not found`的第二个错误。

这可能是因为您试图`errorPage.jsp`从给定路径中不存在的 Servlet 转发或重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T07:02:43.603

这是我的 JSP 文件代码

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body><%@ page import="java.io.*" %>
<%@ page import="org.apache.poi.ss.usermodel.Workbook"%>
<%@ page import="org.apache.poi.ss.usermodel.Cell"%>
<%@ page import="org.apache.poi.hssf.usermodel.HSSFCell"%>
<%@ page import="org.apache.poi.hssf.usermodel.HSSFRow"%>
<%@ page import="org.apache.poi.ss.usermodel.Row"%>
<%@ page import="org.apache.poi.ss.usermodel.Sheet"%>
<%@ page import="org.apache.poi.hssf.usermodel.HSSFWorkbook"%>
<%@ page import="org.apache.poi.hssf.usermodel.HSSFSheet"%>
<%@ page import="java.sql.*"%>

<%!int i=1; %>
<%!String Id; %>
<%  Id=(String)request.getAttribute("id"); %>
<%HSSFWorkbook wb = new HSSFWorkbook();
HSSFSheet sheet = wb.createSheet();
   try {
    java.sql.Connection con;
    Class.forName("com.mysql.jdbc.Driver");
    con = DriverManager.getConnection("jdbc:mysql://localhost:3306/custinfo","root","abc");
        Statement st= con.createStatement(); 
        out.println("hello world");
    ResultSet rs=st.executeQuery("select name ,state ,balance,description from customerdata where customerid='"+Id+"'"); 

    HSSFRow row = sheet.createRow((short)0);
    row.createCell((short)0).setCellValue("NAME");
    row.createCell((short)1).setCellValue("STATE");
    row.createCell((short)2).setCellValue("BALANCE");
    row.createCell((short)3).setCellValue("DESCRIPTION");
    while(rs.next())
    {
         out.println("hello world data");       
        HSSFRow row1 = sheet.createRow((short)i);
        row1.createCell((short)0).setCellValue(rs.getString("name"));
        row1.createCell((short)1).setCellValue(rs.getString("state"));
     row1.createCell((short)2).setCellValue(rs.getString(3));
     row1.createCell((short)3).setCellValue(rs.getString(4));
     i=i+1;
    sheet.autoSizeColumn((short)1); 

    }

   }
  catch(SQLException e) {
    out.println("SQLException caught: " +e.getMessage());
  }%>
// create a small spreadsheet
<%

%>
<% 

ByteArrayOutputStream outByteStream = new ByteArrayOutputStream();
wb.write(outByteStream);
byte [] outArray = outByteStream.toByteArray();
response.setContentType("application/ms-excel");
response.setContentLength(outArray.length);
response.setHeader("Expires:", "0"); // eliminates browser caching
response.setHeader("Content-Disposition", "attachment; filename=testxls.xls");
OutputStream outStream = response.getOutputStream();
outStream.write(outArray);
outStream.flush();

%>
</body>
</html> 
```

在我的行动课上，我给出了这个

```
<action name="DownloadExcel" class="bank.ReportGenerator" method="downloadExcel">
            <result name="success">/download.jsp</result>

        </action> 
```

在课堂上 ReportGenerator 我正在给予

```
package bank;
import com.opensymphony.xwork2.ActionSupport;
import java.sql.*;
import java.util.Collection;
import java.util.Iterator;
import java.util.*;

public class ReportGenerator extends ActionSupport {

    private String id;

    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }
    public String pieChart() throws Exception
    {
        return SUCCESS;

    }
    public String downloadExcel() throws Exception
    {
        return SUCCESS;

    }

} 
```

您可以更改代码中的查询和数据库以使其适合您。仅 JSP 文件足以生成包含内容的 excel 文件。

# assembly - 这些特定的汇编指令（使用 db 和 dw）如何导致计算机重新启动？

> ID：15801384
> 
> 赞同：2
> 
> 时间：2013-04-04T02:08:04.747
> 
> 标签：assembly, x86, bootloader

这 3 个汇编指令如何导致计算机重新启动？

```
db 0x0ea 
dw 0x0000 
dw 0xffff 
```

我从[http://fisnikhasani.com/building-your-own-bootloader/找到了这个](http://fisnikhasani.com/building-your-own-bootloader/)

据我了解，这 3 条指令会将您发送到`FFFF:0000`内存末尾，通过调用 BIOS POST 导致重新启动。但是不应该有一个`jmp`指令来进行跳转吗？

另外，在我看来`db 0x0ea`， ea 是`jmp`. 如果是这样，如何`db 0x0ea`编写机器指令？如果`db`并且`dw`除了声明变量之外还有其他功能，它们是什么？有人可以指点我周围的更多文献`db`及其`dw`任何隐藏功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T02:23:24.533

想想在汇编的上下文中“声明变量”是什么意思。`db`并且`dw`，当提供一个值时，将该值直接写入内存。另一方面，代码作为字节存储在内存中。您可以通过让汇编程序处理您的汇编源来用字节填充内存，或者您可以查找指令编码并通过 db/dw/dd 命令用字节填充内存。

这就是他们在这里所做的。这个字节序列 - ea 00 00 ff ff - 对`jmp far 0ffffh:0`命令进行编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T02:30:12.463

您可以通过使用某些汇编程序指令（ , 等...）简单地插入正确的位来对指令进行硬`db`编码`dw`。在 16 位模式下，字节`$EA0000FFFF`反汇编为：

```
ljmp $0xffff,$0x0 
```

它将值`$FFFF`放在`CS`（代码段）寄存器和`$0000`（`IP`指令指针）中。这有效地从计算机的[reset vector](http://en.wikipedia.org/wiki/Reset_vector)开始执行代码，它应该继续引导系统，就像你刚刚打开它一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T02:25:09.100

`db`并且`dw`不是汇编指令，它们是*伪*指令。它们的参数仅用于初始化伪指令分配的字节或字。当它们在代码段中使用时，它们可用于创建可执行代码。

# asp.net - ASP.NET 和 IIS - 从业务逻辑层访问网络目录

> ID：15801392
> 
> 赞同：0
> 
> 时间：2013-04-04T02:08:57.623
> 
> 标签：asp.net, iis

我们正在为 ASP.NET 4.0 框架和 IIS 6.0 上的企业创建网站 - 必须拥有最佳模式和实践。

**问题：**

我们需要在业务逻辑层访问网络目录。

**澄清：**

我们在一个单独的项目中内置了一个业务逻辑层。我们需要如何访问网络目录内容？是直接 (\XYZ123\folder\folder\file.xml) 还是通过 IIS？

如果是通过IIS，如何访问虚拟目录映射的网络目录——在业务逻辑项目中不能使用Server.MapPath()，因为它属于Page！

让我知道其他更好的选择，谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:24:10.753

UI 层可以使用 Server.MapPath() 将文件的绝对路径发送给业务逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:30:56.380

请查看此线程： [httpcontext.current.server.mappath Object reference not set to an instance of an object](https://stackoverflow.com/questions/6861368/httpcontext-current-server-mappath-object-reference-not-set-to-an-instance-of-an)

我已经使用了库中的 system.web.httpcontext.current.mappath()，只要它被您的 Web 应用程序使用，它就应该可以工作（您可能需要在项目中添加对 system.web 的引用）。我没有使用他们推荐的 httpruntime 解决方案，但它看起来也很有希望。祝你好运。

# codeigniter - CodeIgniter 分页 - 如何更改第 1 页的基本网址？

> ID：15801398
> 
> 赞同：1
> 
> 时间：2013-04-04T02:10:02.043
> 
> 标签：codeigniter, pagination

我的基本网址是： $config['base_url'] = base_url()."students/page";

*例如：*

登陆页面网址为：/domain-name/students

```
Previous  1 **2** 3 4 Next › 
```

如果我转到第 2 页，则 url 更改为：/domain-name/students/page/2 - 这是正确的，我已经定义了这个 $config['base_url'] = base_url()."students/page

但是，当我返回第 1 页时 - 我希望 url 改回我的登陆 url：域名/学生。当前将转到域名/学生/页面/

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:30:30.510

你只需要`first_url`在你的分页配置中指定参数，所以在你的控制器中这样做：

```
$this->load->library('pagination');
 //.....etc
 $pagination['first_url'] = site_url('students/page');
//....etc
$this->pagination->initialize($pagination); 
```

然后对于**上一个**链接，您可以执行以下操作：

```
$pagination['prev_link']  = '<a href="'.site_url('students/page').'">previous</a>'; 
```

试试这个我没试过，应该可以的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-29T23:09:24.327

sbaaaang 提供的答案不正确。

`$config['prev_link']`用于为上一个链接显示的文本：“Previous”、“Prev”、“<”、“<-”、...任何你想要的。它将在标签内呈现。

如果您设置`$config['prev_link']`为`'<a href="'.site_url('students/page').'">previous</a>';`，您会得到以下内容：`<a href=".../1"><a href="...">previous</a></a>`，两个`<a>`标签，其中一个的 url 错误。

我不知道原始问题的解决方案是什么，而且我正在努力解决同样的问题。我认为这与分页库有关，正如我在这里解释的那样：http: [//ellislab.com/forums/viewthread/240326/](http://ellislab.com/forums/viewthread/240326/)

# javascript - JavaScript 和 TypeScript 范围问题

> ID：15801404
> 
> 赞同：3
> 
> 时间：2013-04-04T02:10:53.567
> 
> 标签：javascript, typescript

我正在尝试使用 typescript、Knockout 和 azure 移动服务来获取一些数据。问题是当我从 azure 获取数据时，它是异步的，我无法再获取 viewmodel 对象。我认为这是一些范围/关闭问题，请帮我找到解决方案。在 Done() 的回调函数中为空；

这是我的打字稿代码：

```
class pmViewModel {
    public welcomeMsg: string;
    public totalCount: number;
    constructor () {
        this.welcomeMsg = "";
    }
}

class Manager {
    client: any;
    portalVM: pmViewModel;
    constructor () {
        this.client = new WindowsAzure.MobileServiceClient("url", "key");
        this.portalVM = new pmViewModel();
    }

    LoadData() {
        console.log("load data for management portal");
        this.portalVM.welcomeMsg = "Hello";
        this.portalVM.totalCount = 0;
        var dataTable = this.client.getTable('dataTable');

        dataTable.take(1).includeTotalCount().read().done(this.populateTotal,this.portalVM);

        ko.applyBindings(this.portalVM);
        };

        populateTotal(result, vm) {
            console.log(result);
            console.log(vm); //null here
            this.portalVM.totalCount = 100000;////this is also null
        }
} 
```

并生成 JavaScript 代码：

```
var pmViewModel = (function () {
    function pmViewModel() {
        this.welcomeMsg = "";
    }
    return pmViewModel;
})();
var Manager = (function () {
    function Manager() {
        this.client = new WindowsAzure.MobileServiceClient("url", "key");
        this.portalVM = new pmViewModel();
    }
    Manager.prototype.LoadData = function () {
        console.log("load data for management portal");
        this.portalVM.welcomeMsg = "Hello";
        this.portalVM.totalCount = 0;
        var dataTable = this.client.getTable('dataTable');
        dataTable.take(1).includeTotalCount().read().done(this.populateTotal, this.portalVM);
        ko.applyBindings(this.portalVM);
    };
    Manager.prototype.populateTotal = function (result, vm) {
        console.log(result);
        console.log(vm);
        this.portalVM.totalCount = 100000;
    };
    return Manager;
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:40:58.407

这里的相关行：

```
dataTable.take(1).includeTotalCount().read().done(this.populateTotal,this.portalVM); 
```

您需要捕获 'this' 绑定，`populateTotal`因为它将在没有上下文的情况下作为回调调用。

选项1：

```
[etc...].done((result, vm) => this.populateTotal(result, vm), this.portalVM); 
```

选项 2：

```
[etc...].done(this.populateTotal.bind(this), this.portalVM); 
```

# wordpress - 图像未在响应式设计上调整大小

> ID：15801409
> 
> 赞同：1
> 
> 时间：2013-04-04T02:11:37.330
> 
> 标签：wordpress, responsive-design, image-resizing, autoresize

我正在使用 Wordpress 二十十二主题的孩子，当我缩小屏幕时，我的图像没有调整大小。我遇到问题的页面是：

```
http://69.195.124.68/~discowv9/?page_id=146 
```

如果缩小屏幕的宽度，您将看到图像不会改变大小。通常 WP 中的这个主题会自动调整图像的大小。我似乎找不到不允许调整大小的 CSS 代码。

预先感谢您的帮助。

我试图发布屏幕截图，但我的声誉不够高。这是高尔夫球杆手柄的前后拍摄图像。

```
<div style="white-space:nowrap;"><img class="wp-image-438 alignleft" src="http://69.195.124.68/~discowv9/wp-content/uploads/2013/04/Cleaning-Process-of-Club-Grip.jpg" alt="Cleaning a Golf Club Grip with Club Care" style="line-height: 1.714285714; font-size: 1rem;"></img></div>

.entry-content img, .comment-content img, .widget img {
    max-width: 100%;
}
img[class*="align"], img[class*="wp-image-"], img[class*="attachment-"] {
    height: auto;
}
img.size-full, img.size-large, img.header-image, img.wp-post-image {
    height: auto;
    max-width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T05:37:11.670

实际上，当放置图像的容器调整大小时，图像会调整大小，如果您使用 div 或任何其他元素确保它也调整大小......如果您尝试为响应式设计制作 UI，您可以使用**CSS3 媒体查询**...我建议这样做是因为您的网站是您的网站是动态 wordpress...确保这些**媒体查询**会有所帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T18:55:33.290

我认为索拉布是对的。当父元素不可调整大小时，我们如何期望其子元素可调整大小。只需尝试调整您的#content 大小即可。以百分比表示宽度。它会让您的图像自动响应。希望它可以帮助你。

```
#content {
float: left;
padding-right: 1em;
width: 100%;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T02:14:35.847

使用空格：nowrap；在你的 div

# javascript - Google Web 字体不在 OSX Safari 中显示，但在 Firefox、Chrome、Opera（适用于 OSX、Windows 和 Linux）和 Internet Explorer 中显示

> ID：15801413
> 
> 赞同：0
> 
> 时间：2013-04-04T02:11:59.720
> 
> 标签：javascript, css, google-webfonts

以下网站 ( [http://www.ecu.edu/english/tpc/tpcintern/index.cfm](http://www.ecu.edu/english/tpc/tpcintern/index.cfm) ) 应该使用 Google Web Fonts，并且字体在除 Safari 之外的所有浏览器中都能完美显示。使用的Javascript是：

```
 WebFontConfig = {
    google: { families: [ 'Lato:100:latin' ] }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })(); 
```

我意识到 JS 不使用标签，但我删除了它们，因为 CommonSpot 需要删除它们。实际上使用了几种不同的 Web 字体，但是除了相关的字体信息之外，每种字体的 JS 都是相同的。CSS的一个例子是这样的：

```
#navigation {
 font-family: 'Lato', sans-serif;
 font-size: 1.3em;
 font-style: normal;
 float: left;
 margin: .5em 0 0 .5em;
 width: 70%;
 height: 2em;
 position: relative;
 padding: .5em 0;
 text-transform: uppercase;
 font-size: 1em;
 background-color: #592a8a;
} 
```

最后，网络字体由谷歌托管，如果这有所作为（我认为它不会，因为它们似乎在其他浏览器中工作？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:38:15.807

CommonSpot 及其处理 JavaScript 的方式存在问题。对于使用 CommonSpot 的任何其他人，只需使用 JavaScript 创建一个单独的 HTML 文件，将其上传到 CustomCF 文件夹，然后通过 CommonSpot 附加它。

# android - 在Android中集成“SlidingMenu”和滑动

> ID：15801414
> 
> 赞同：1
> 
> 时间：2013-04-04T02:12:04.903
> 
> 标签：android

我正在尝试执行类似 Google/Youtube 应用程序的操作，通过单击
顶部的操作栏将在屏幕左侧填充一个菜单。

除此之外，我还立即使用 Scrollable Tabs + Swipe 导航类型。我在谷歌上做了一些研究，发现了滑动菜单库，但我不知道如何开始将它们整合在一起。

现在我有 Swipe 导航的默认类和扩展 SlidingActivity 的类，如下所示：

公共类 Home 扩展 FragmentActivity {

```
static int POSITION;
SectionsPagerAdapter mSectionsPagerAdapter;
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getActionBar().setDisplayUseLogoEnabled(false);
    getActionBar().setDisplayHomeAsUpEnabled(true);
    getActionBar().setDisplayShowHomeEnabled(true);
    setContentView(R.layout.home);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.home, menu);

    return true;
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
 * one of the sections/tabs/pages.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        // getItem is called to instantiate the fragment for the given page.
        // Return a DummySectionFragment (defined as a static inner class
        // below) with the page number as its lone argument.
        POSITION = position;
        Fragment fragment = new DummySectionFragment();

        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
        fragment.setArguments(args);

        return fragment;
    }

    @Override
    public int getCount() {
        // The number of pages
        return 5;
    }

    String[] Modules = { "IT1111-AV", "IT1431-AV", "IT1161-AX",
            "IT1432-AV", "IT631-AV" };

    @Override
    public CharSequence getPageTitle(int position) {
        Locale l = Locale.getDefault();

        for (int i = 0; i < Modules.length; i++) {
            if (i == position) {
                return Modules[i];
            }

        }

        return null;
    }
}

/**
 * A dummy fragment representing a section of the app, but that simply
 * displays dummy text.
 */
public static class DummySectionFragment extends Fragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public DummySectionFragment() {

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        if (POSITION == 2) {
            View rootView = inflater.inflate(R.layout.fragment_home_dummy,
                    container, false);
            TextView dummyTextView = (TextView) rootView
                    .findViewById(R.id.section_label);
            dummyTextView.setText("YOLO");
            return rootView;
        }
        View rootView = inflater.inflate(R.layout.fragment_home_dummy,
                container, false);
        TextView dummyTextView = (TextView) rootView
                .findViewById(R.id.section_label);
        dummyTextView.setText(Integer.toString(getArguments().getInt(
                ARG_SECTION_NUMBER))
                + "HELLO");
        return rootView;
    }

} 
```

}

滑动活动类：

公共类幻灯片扩展滑动活动{

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    setBehindContentView(R.layout.activity_menu);

getSlidingMenu().setBehindOffset(100);
} 
```

}

那么这是一种将这两者整合在一起的简单方法吗？我是Android开发的新手，所以请指导我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:34:56.820

这是您需要的示例。[https://github.com/jfeinstein10/SlidingMenu/](https://github.com/jfeinstein10/SlidingMenu/)

# ios - 调整自定义 UIDatePicker 的代码

> ID：15801421
> 
> 赞同：0
> 
> 时间：2013-04-04T02:13:12.850
> 
> 标签：ios, objective-c, uipickerview, uidatepicker

所以我在这里发现了这个惊人的代码，它弹出了一个 UIDatePicker。（对 Matthias Bauch 表示敬意）我想使用自定义选择器轮对其进行自定义，但代码处于复杂级别，我不确定如何切换到 UIPicker 以及如何用我的数组填充所述选择器.

这是原始代码：

```
- (void)changeDate:(UIDatePicker *)sender {
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
  [dateFormat setDateFormat:@"cccc, MMM d, hh:mm aa"];
  NSString *formattedVersion = [dateFormat stringFromDate:sender.date];
  NSLog(@"%@",formattedVersion);

}

- (void)removeViews:(id)object {
 [[self.view viewWithTag:9] removeFromSuperview];
 [[self.view viewWithTag:10] removeFromSuperview];
 [[self.view viewWithTag:11] removeFromSuperview];
}

- (void)dismissDatePicker:(id)sender {
 CGRect toolbarTargetFrame = CGRectMake(0, self.view.bounds.size.height, 320, 44);
 CGRect datePickerTargetFrame = CGRectMake(0, self.view.bounds.size.height+44, 320, 216);
 [UIView beginAnimations:@"MoveOut" context:nil];
 [self.view viewWithTag:9].alpha = 0;
 [self.view viewWithTag:10].frame = datePickerTargetFrame;
 [self.view viewWithTag:11].frame = toolbarTargetFrame;
 [UIView setAnimationDelegate:self];
 [UIView setAnimationDidStopSelector:@selector(removeViews:)];
 [UIView commitAnimations];
}

- (IBAction)callDP:(id)sender {
 if ([self.view viewWithTag:9]) {
  return;
 }
 CGRect toolbarTargetFrame = CGRectMake(0, self.view.bounds.size.height-216-44, 320, 44);
 CGRect datePickerTargetFrame = CGRectMake(0, self.view.bounds.size.height-216, 320, 216);

 UIView *darkView = [[[UIView alloc] initWithFrame:self.view.bounds] autorelease];
 darkView.alpha = 0;
 darkView.backgroundColor = [UIColor blackColor];
 darkView.tag = 9;
 UITapGestureRecognizer *tapGesture = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissDatePicker:)] autorelease];
 [darkView addGestureRecognizer:tapGesture];
 [self.view addSubview:darkView];

 UIDatePicker *datePicker = [[[UIDatePicker alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height+44, 320, 216)] autorelease];
 datePicker.tag = 10;
 [datePicker addTarget:self action:@selector(changeDate:) forControlEvents:UIControlEventValueChanged];
 [self.view addSubview:datePicker];

 UIToolbar *toolBar = [[[UIToolbar alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height, 320, 44)] autorelease];
 toolBar.tag = 11;
 toolBar.barStyle = UIBarStyleBlackTranslucent;
 UIBarButtonItem *spacer = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil] autorelease];
 UIBarButtonItem *doneButton = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissDatePicker:)] autorelease];
 [toolBar setItems:[NSArray arrayWithObjects:spacer, doneButton, nil]];
 [self.view addSubview:toolBar];

 [UIView beginAnimations:@"MoveIn" context:nil];
 toolBar.frame = toolbarTargetFrame;
 datePicker.frame = datePickerTargetFrame;
 darkView.alpha = 0.5;
 [UIView commitAnimations];
} 
```

我想在选择器轮中添加我的 UIPicker 和这些值：

```
 Days=[[NSArray alloc] initWithObjects: @"Today", @"Tomorrow", nil];
  Hours = [[NSArray alloc] initWithObjects:@"1", @"2", @"3", @"4", @"5", @"6", @"7", @"8", @"9", @"10", @"11", @"12", nil];
  Minutes=[[NSArray alloc] initWithObjects:@"05", @"10", @"15", @"20", @"25", @"30", @"35", @"40", @"45", @"50", @"55", nil]; 
```

任何帮助/指导将不胜感激！！

谢谢，垫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:24:53.420

您将需要使用 a`UIPickerView`而不是 a `UIDatePicker`。然后，您将需要提供适当的委托方法来为其提供数据。

首先创建一个数组来保存选择器中可用的项目：

```
NSMutableArray *arrayColors = [[NSMutableArray alloc] init];
[arrayColors addObject:@"Red"];
[arrayColors addObject:@"Orange"]; 
```

为选择器实现数据源方法：

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView {
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component {

return [arrayColors count];
}

- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
return [arrayColors objectAtIndex:row];
} 
```

以及获取用户选择的项目的委托方法：

```
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

NSLog(@"Selected Color: %@. Index of selected color: %i", [arrayColors objectAtIndex:row], row);
} 
```

这是[文档](https://developer.apple.com/documentation/uikit/uipickerview)。

**更新**

要以编程方式创建 UIPickerView，请确保它看起来像这样：

```
//Make sure our class knows we have picker delegate/data source methods in it
@interface myViewController : UIViewController <UIPickerViewDataSource, UIPickerViewDelegate> 
```

创作

```
//Picker creation
UIPickerView *myPickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 200, 320, 200)];
myPickerView.delegate = self;
myPickerView.showsSelectionIndicator = YES;
[self.view addSubview:myPickerView]; 
```

一个方便的委托方法

```
// tell the picker the width of each row for a given component. no necessary but helpful if need be
- (CGFloat)pickerView:(UIPickerView *)pickerView widthForComponent:(NSInteger)component {
 int sectionWidth = 300;

 return sectionWidth;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:32:05.283

添加随机的评论。如果您想在按下 UITextField 将信息输入到文本字段时使用此选择器替换键盘，请按以下步骤操作。

```
[<Your UI text field> setInputView:<your picker view>]; 
```

例子：

```
NSMutableArray *pickerData = [[NSMutableArray alloc]initWithObjects:@"",@"1", @"2", @"3", @"4", @"5", @"6", @"7", nil];
UIPickerView *myPickerView = [[UIPickerView alloc]init];
myPickerView.delegate = self;
myPickerView.dataSource = self;
myPickerView.showsSelectionIndicator = YES;
[self.myTexfield setInputView:myPickerView]; 
```

# assembly - 汇编语言 move.lp, -(A3)

> ID：15801424
> 
> 赞同：2
> 
> 时间：2013-04-04T02:13:30.807
> 
> 标签：assembly, 68000

我正在学习汇编语言（m68000）。

我不明白以下语法

```
move.l p, -(A3) 
```

这和下面有什么区别？

```
move.l p, (A3) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T02:21:32.430

它们是*地址寄存器间接*寻址模式的不同版本，但是，第一个有一个预减量。

> 这种寻址模式指定内存中的操作数，其地址由地址寄存器之一指定。在使用操作数之前，地址寄存器中的值会根据操作数的大小递减。

[来源](http://physinfo.ulb.ac.be/cit_courseware/asm/mc68000.htm)

因此，您的示例中的不同之处在于，存储在寄存器中的地址在被复制到其中之前`A3`将递减`4`（操作数的大小，长字） 。`p`

# angularjs - 角（半）动态形式生成

> ID：15801425
> 
> 赞同：3
> 
> 时间：2013-04-04T02:13:35.547
> 
> 标签：angularjs, angularjs-directive

我正在尝试简化使用 AngularJS 生成表单的方式。

我的最终目标是能够写出类似的东西：

```
<form>
  <field-div label="Name">
    <field which="form.name"></field>
  </field-div>

  <field-div label="Language">
    <field which="form.language"></field>
  </field-div>
</form> 
```

为此，我使用了两个指令 (`fieldDiv`和`field`) 和两个 JavaScript 对象：一个表示表单中正在编辑的数据，另一个表示表单定义（字段类型、字段选项...）。

有关代码，请参见此 JSFIDDLE：http: [//jsfiddle.net/vincedo/9Uf6C/](http://jsfiddle.net/vincedo/9Uf6C/)

在我的头撞到墙上几次之后，我想我成功了。主要的困难是**让 Angular 将字符串**——我从我的表单定义对象（例如`"entity.name"`）中获得——**作为具有双向数据绑定的范围属性**。

我还有两个问题：

*   这是正确的方法吗？更具体地说，我的代码`scope.$watch`每个字段使用两个，我担心它可能会影响性能。
*   在我的表格中，为什么“语言”字段中没有选择“英语”？这一定是一个愚蠢的错误：HTML 源代码使用 0, 1, 2... 作为`<option>`值，而我的代码使用字符串键，例如`en`, `fr`... 但是在尝试将我的头绕在 $wrap 和 $parse 上这么多个小时之后，我没看到。:-)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T23:00:49.033

您可以使用 ng-switch 标签 ( [http://docs.angularjs.org/api/ng.directive:ngSwitch](http://docs.angularjs.org/api/ng.directive:ngSwitch) ) 执行此操作。像这样的东西。

```
<div class="control-group" ng-repeat="element in form">
  <label class="control-label">{{element.label}}</label>
  <div class="controls" ng-switch="element.widget">
    <input ng-switch-when="text" type="text" ng-model="entity[element.model]" ng-required="element.required" />
    <select ng-switch-when="select" ng-model="entity[element.model]" ng-required="element.required" ng-options="o.key as o.name for o in element.options"></select>
  </div>
</div> 
```

这是我的解决方案的一个工作示例：

[http://jsfiddle.net/Galdo/Sqsc7/17/](http://jsfiddle.net/Galdo/Sqsc7/17/)

请注意，我在您的架构中将 entity.name 更改为 name。

使用此解决方案，您将避免使用任何指令。纯棱角！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T17:20:49.333

I created a simple form builder application, source code: [https://github.com/Selmanh/angularjs-form-builder](https://github.com/Selmanh/angularjs-form-builder)

You can see it online here: [http://selmanh.github.io/angularjs-form-builder/](http://selmanh.github.io/angularjs-form-builder/)

My solution was similar to yours, but didn't use watch.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T17:45:40.610

你也可以考虑看看这个，它基于简单的 json 定义创建动态角度形式：

[https://github.com/danhunsaker/angular-dynamic-forms](https://github.com/danhunsaker/angular-dynamic-forms)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T21:42:47.230

对于您的第二个问题（为什么使用 0、1、2、... 而不是 'en'、'fr' 等），您需要使用对象而不是数组来绑定到`<select>`元素。[我在另一个问题中](https://stackoverflow.com/questions/13692921/angularjs-ngoption-with-array)找到了答案，但简而言之，你的模型变成了`{ 'en': 'English', 'fr': 'French', 'und':'Undefined'}`，你的模板的 ng-options 变成了`ng-options="k as v for (k,v) in options"`

我在这里更新了你的小提琴：http: [//jsfiddle.net/StevenLJackson1/9Uf6C/7/](http://jsfiddle.net/StevenLJackson1/9Uf6C/7/)

我也对多块手表的性能感兴趣（即，你第一个问题的答案），因为我在我当前的项目中做类似的事情。

# jquery - 将 JSON 绑定到模型 MVC3

> ID：15801436
> 
> 赞同：0
> 
> 时间：2013-04-04T02:14:40.050
> 
> 标签：jquery, ajax, json, asp.net-mvc-3

这非常令人沮丧，我查看了许多示例，但仍然无法在服务器上接收任何数据。我有以下JS

```
var checkoutModel = { };
$('form#card input').each(function () {
           var id = $(this).attr("id")
           var value = $(this).val();
           checkoutModel[id] = value;
});

                    $.ajax({
                        url: "/checkout",
                        type: 'post',
                        dataType: 'json',
                        data: JSON.stringify(checkoutModel),
                        contenttype: 'application/json; charset=utf-8',
                        error: function (xhr) {
                            alert("error: " + xhr);
                        },
                        success: function (data) {
                            alert(data);
                        }
                    }); 
```

CheckoutController 的操作如下所示（/checkout 映射到 Checkout/OrderInfo）

```
 [HttpPost]
    [Authorize]
    public virtual JsonResult OrderInfo(CheckoutModel checkoutModel) 
```

但在服务器上，我的 checkoutModel 的属性始终为 NULL。

任何想法我哪里出错了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:25:26.983

我在下面使用这样的东西：

假设您的 CheckoutModel 具有类似的 Id 和 Value 属性

```
public Int32 Id {get;set}
public string Value {get;set} 
```

在你的 ajax 上

```
var checkoutModel = { };
checkoutModel.Id = 1234;
checkoutModel.Value = "This is a Value";

    $.ajax({
    type: "POST",
    url: "Your Controller URL",
    data: checkoutModel ,
    traditional: true,
    success: function (data) {
               alert(data);
    },
    error: function (xhr) {
     alert("error: " + xhr);
    },
    dataType: 'json'
}); 
```

然后你的控制器

```
public JsonResult OrderInfo(CheckoutModel checkoutModel)
{
// int id = checkoutModel.Id; result : 1234
// string value = checkoutModel.Value; result : "This is a Value"
} 
```

最好的祝福

# python - pyinstaller OwnerError

> ID：15801437
> 
> 赞同：0
> 
> 时间：2013-04-04T02:14:43.510
> 
> 标签：python, exe, executable, pyinstaller

我需要构建一个不需要在用户计算机上安装 python 的独立 exe。我尝试使用nuitka，cx_freeze，但它们还包含其他文件，或者如果使用nuitka，它需要在客户端计算机上安装python。我使用 python 2.7 这是我尝试使用 pyinstaller 时遇到的错误：

```
python C:\Users\root\Desktop\pyinstaller-2.0\pyinstaller.py --onefile C:\Users\root\Desktop\script.py

Traceback (most recent call last):
  File "<string>", line 3, in <module>
  File "C:\Users\root\Desktop\pyinstaller-2.0\PyInstaller\loader\iu.py", line 386, in importHook
    mod = _self_doimport(nm, ctx, fqname)
  File "C:\Users\root\Desktop\pyinstaller-2.0\PyInstaller\loader\iu.py", line 459, in doimport
    mod = director.getmod(nm)
  File "C:\Users\root\Desktop\pyinstaller-2.0\PyInstaller\loader\iu.py", line 248, in getmod
    mod = owner.getmod(nm)
  File "C:\Users\root\Desktop\pyinstaller-2.0\PyInstaller\loader\archive.py", line 471, in getmod
    localpath: ExtInPkgImporter(localpath, nm)},
  File "C:\Users\root\Desktop\pyinstaller-2.0\PyInstaller\loader\archive.py", line 491, in __init__
    iu.DirOwner.__init__(self, path)
  File "C:\Users\root\Desktop\pyinstaller-2.0\PyInstaller\loader\iu.py", line 82, in __init__
    raise OwnerError("%s is not a directory" % path)
iu.OwnerError: <OwnerError C:/Users/root/AppData/Local/Temp/_MEI54282/ is not a directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:10:21.743

使用 pyinstaller-1.5.1 不会出现此错误

# javascript - Razor MVC 中 C# 语句中的 JavaScript 变量

> ID：15801439
> 
> 赞同：2
> 
> 时间：2013-04-04T02:15:08.017
> 
> 标签：javascript, asp.net-mvc, c#-4.0, variables, razor

如何在 Razor 视图中访问 C# 代码片段中的 JavaScript 变量？这是我的意思的一个例子：

```
function mixIt(id) {
    var markup = '<div>' + @Model.Shaker.FirstOrDefault(x => x.ShakerID == id) + '</div>';
    return markup;
} 
```

注意我在哪里检查 id，那个 id 是一个 javascript 参数。上面的代码不工作，我不知道如何让它工作。谷歌搜索也没有带来任何有用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T02:28:51.700

简而言之，您将无法做到，JavaScript 代码将**在浏览器**中执行，而 C#/Razor 将**在服务器上执行**。这意味着 Razor 代码段的结果将在响应发送到浏览器之前生成。

# sql - 从不同的时区确定日期时间过滤器 - SQL

> ID：15801443
> 
> 赞同：0
> 
> 时间：2013-04-04T02:15:43.720
> 
> 标签：sql, sql-server-2008, tsql

我正在为我的团队生成一份报告，该报告要求我根据今天的日期（IST 区域）在 sql server 中选择行

这份报告严格基于我的工作时间（06.00 IST 到 22.00 IST）。

服务器位于美国，位于 CST 区域。

例如，今天的日期是 04/04/2013。当我开始在 06.00 IST 上工作时，它相当于 (04/03/2013 19.30 CST)，当我完成工作时，它将是 (04/04/2013 11.30 CST)。

所以我需要的是一个过滤器，它允许我根据上述条件过滤记录。

注意：我尝试了以下查询，但当两个时区在同一日期时，它并没有达到我的预期。

```
DECLARE     @date DATETIME,@startdate DATETIME,@starthour DATETIME
DECLARE    @enddate DATETIME,@endhour DATETIME,@newdate DATETIME  

SET   @date = DATEADD(DAY, DATEDIFF(DAY, 0, getdate()-1), 0)
SET   @starthour = DATEADD(HOUR,19,@date)
set @startdate= DATEADD(MINUTE,30,@starthour)

Set @newdate= DATEADD(DD,1,@date)
SET   @endhour = DATEADD(HOUR,11,@newdate)
set @enddate= DATEADD(MINUTE,30,@endhour)

select @startdate, @enddate
select * from dbo.MyTable where TIMESTAMP Between @startdate and @enddate 
```

由于此报告需要每小时生成一次，因此即使日期同步，我也需要一些帮助来正确计算日期时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:43:10.363

如果您遵守与美国中部时间相同的 DST 规则，因此您的工作日*总是*从中部时间昨天 19:30 开始，并且您的工作日总是 16 小时，那么您应该可以这样做：

```
DECLARE @start DATETIME = DATEADD(MINUTE, -270, 
  DATEADD(DAY, DATEDIFF(DAY, 0, GETDATE()), 0));

SELECT columns FROM dbo.table
  WHERE [TIMESTAMP] BETWEEN @start AND DATEADD(HOUR, 16, @start); 
```

如果您遵循不同的 DST 规则，那么您将需要根据日期和规则不同时调整此计算。您可能最好为此使用[日历表](http://web.archive.org/web/20070611150639/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-calendar-table.html)。

请注意，`TIMESTAMP`对于列名来说，这是一个非常糟糕的选择，不仅因为它是模糊的，而且因为它是[未来的保留关键字](http://msdn.microsoft.com/en-us/library/ms189822(SQL.100).aspx)，并且表示与日期或时间无关的数据类型。

# hadoop - hadoop fs 命令显示本地文件系统而不是 hdfs

> ID：15801444
> 
> 赞同：8
> 
> 时间：2013-04-04T02:15:46.377
> 
> 标签：hadoop, hdfs

我在几台笔记本电脑上安装了 hadoop，以形成一个 hadoop 集群。首先，我们以伪分布式模式安装，除了一个非常完美之外（即所有服务都运行，当我使用它进行测试时`hadoop fs`显示`hdfs`）。在后面提到的笔记本电脑（有问题的笔记本电脑）中，该``hadoop fs -ls`命令显示本地目录的信息而*不是*，`hdfs`命令`-cat`, `-mkdir`,也是如此`-put`。我可能做错了什么？

任何帮助，将不胜感激

这是我的`core-site.xml`

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>
<property>
 <name>hadoop.tmp.dir</name>
 <value>/home/hduser/hdfs_dir/tmp</value>
 <description></description>
</property>

<property>
 <name>fs.default.name</name>
 <value>hdfs://localhost:54310</value>
 <description>.</description>
</property>
</configuration> 
```

我必须说，这是所有其他笔记本电脑的同一个文件，它们工作正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T16:13:55.230

我遇到了同样的问题，我必须确保`fs.default.name`' 的值包含一个尾随`/`以引用路径组件：

```
<property>
 <name>fs.default.name</name>
 <value>hdfs://localhost:54310/</value>
 <description>.</description>
</property> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T09:09:20.553

检查`fs.default.name`in`core-site.xml`指向 ex 中的正确数据节点：

```
<property>
     <name>fs.default.name</name>
     <value>hdfs://target-namenode:54310</value>
</property> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-22T13:15:19.527

如果`fs.default.name`in`core-site.xml`指向 `hdfs://localhost:54310/`有或没有尾随 `/`，即使你有同样的问题，那么你可能正在查看错误的配置文件。就我而言，它是 cloudera 的 cdh4 并检查符号链接：

`ls -l /etc/hadoop/conf
**** /etc/hadoop/conf -> /etc/alternatives/hadoop-conf
ls -l /etc/alternatives/hadoop-conf
**** /etc/alternatives/hadoop-conf -> /etc/hadoop/conf.cloudera.yarn1` 

早些时候我使用 MRv1 并迁移到 MRv2 (YARN)，升级后符号链接被破坏为：

`ls -l /etc/hadoop/conf
**** /etc/hadoop/conf -> /etc/alternatives/hadoop-conf
ls -l /etc/alternatives/hadoop-conf
**** /etc/alternatives/hadoop-conf -> /etc/hadoop/conf.cloudera.mapreduce1
ls -l /etc/hadoop/conf.cloudera.mapreduce1
ls: cannot access /etc/hadoop/conf.cloudera.mapreduce1: No such file or directory` 

 `Also, update-alternatives was run to have high priority for /etc/hadoop/conf.cloudera.mapreduce1 path as:

`alternatives --display hadoop-conf
hadoop-conf - status is manual.
link currently points to /etc/hadoop/conf.cloudera.mapreduce1
/etc/hadoop/conf.cloudera.hdfs1 - priority 90
/etc/hadoop/conf.cloudera.mapreduce1 - priority 92
/etc/hadoop/conf.empty - priority 10
/etc/hadoop/conf.cloudera.yarn1 - priority 91
Current `best' version is /etc/hadoop/conf.cloudera.mapreduce1.` 

To remove old link which has highest priority do:` 

`update-alternatives --remove hadoop-conf /etc/hadoop/conf.cloudera.mapreduce1
rm -f /etc/alternatives/hadoop-conf
ln -s /etc/hadoop/conf.cloudera.yarn1 /etc/alternatives/hadoop-conf`

# python - 使用 setup.py bdist_wininst 构建的 Windows 安装程序在安装时会触发 RuntimeError。我该如何解决？

> ID：15801447
> 
> 赞同：7
> 
> 时间：2013-04-04T02:16:07.727
> 
> 标签：python, python-2.7, setuptools, distutils

我正在使用 setuptool 的 bdist_wininst 为我的项目构建安装 EXE。但是，我发现当我在带有 Python 2.7.3 的 Win7-64 位机器上实际运行所述安装程序时，我得到一个运行时错误，如下所示：http: [//i.imgur.com/8osT3.jpg](http://i.imgur.com/8osT3.jpg)。（只有针对 python-2.7 64 位的 64 位安装程序；32 位安装程序（在 python2.7 32 位上）看起来很好）我可以单击确定，安装程序完成，但这对于最终用户来说肯定看起来很糟糕。

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:17:37.463

也许您必须专门为 x64 创建可执行文件？这是您必须运行的命令：

```
python setup.py build --plat-name=win-amd64 
```

更多信息可以在这里找到：

[http://docs.python.org/2/distutils/builtdist.html#cross-compiling-on-windows](http://docs.python.org/2/distutils/builtdist.html#cross-compiling-on-windows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:34:24.707

可能 Visual C++ Redistributable Package 丢失或损坏，尝试（重新）安装 Microsoft Visual C++ 2008 SP1/2010 Redistributable Package (x64) 或任何其他版本。

# xcode - 调试器使用 LLDB 时 Xcode 4.6.1 崩溃

> ID：15801449
> 
> 赞同：2
> 
> 时间：2013-04-04T02:16:34.613
> 
> 标签：xcode

在我的新 mac mini 上使用 LLDB 调试器时，Xcode 4.6.1 不断崩溃。任何人都可以帮助我发生了什么事吗？可以使用 GDB，但我宁愿使用默认调试器，这样我就不必每次运行/测试新项目时都更改它。

我读过一些关于编辑 /etc/hosts 以拥有 127.0.0.1 localhost 的内容，但它不起作用。

以下是我的 Xcode 崩溃时的一些细节。

```
Process:         Xcode [220]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.6.1 (2067)
Build Info:      IDEApplication-2067000000000000~2
Code Type:       X86-64 (Native)
Parent Process:  launchd [133]
User ID:         501

Date/Time:       2013-04-04 10:08:23.876 +0800
OS Version:      Mac OS X 10.8.3 (12D78)
Report Version:  10

Interval Since Last Report:          11460 sec
Crashes Since Last Report:           4
Per-App Interval Since Last Report:  5582 sec
Per-App Crashes Since Last Report:   4
Anonymous UUID:                      F7A4E172-EA44-2180-5471-22ADD0DA75A1

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4H512
UNCAUGHT EXCEPTION (NSInvalidArgumentException): -[__NSCFString alloc]: unrecognized selector sent to instance 0x4008c2040
UserInfo: (null)
Hints: None
Backtrace:
  0  0x00007fff8ffacaee __exceptionPreprocess (in CoreFoundation)
  1  0x00007fff856553f0 objc_exception_throw (in libobjc.A.dylib)
  2  0x00007fff9004340a -[NSObject(NSObject) doesNotRecognizeSelector:] (in CoreFoundation)
  3  0x00007fff8ff9b02e ___forwarding___ (in CoreFoundation)
  4  0x00007fff8ff9ae18 _CF_forwarding_prep_0 (in CoreFoundation)
  5  0x000000010c2f00a6 -[DBGLLDBDebugLocalService operationWorkerWithLaunchSession:error:] (in DebuggerLLDBService)
  6  0x000000010c3505ba -[IDERuniPhoneSimulatorService operationWorkerWithLaunchSession:error:] (in IDEiPhoneSupport)
  7  0x0000000104c6a017 -[IDERunDestination runOperationForLaunchSession:error:] (in IDEFoundation)
  8  0x0000000104c68c87 -[IDELaunchSchemeAction 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:13:28.433

它也发生在我身上。Esp 与 SIGABRT 在主课上。有人建议我调试。我确实尝试过 lldb 调试。它适用于一个应用程序。您需要找到哪个寄存器引发错误。要发现你需要先输入调试窗口（只有当它的lldb错误时！）

```
register read 
```

然后你会发现它在哪个寄存器中被引发的错误。然后遵循以下陈述。如果 eax 是寄存器..

```
po $eax
po [$eax class]
po [$eax name]
po [$eax reason] 
```

然后你就会知道你必须对代码进行哪些更改。希望对你有效。

# sql - SQL Server 数据显示

> ID：15801450
> 
> 赞同：0
> 
> 时间：2013-04-04T02:16:34.690
> 
> 标签：sql, sql-server, tsql, datetime

我想在 SQL Server 中以特定格式显示日期列，需要一些帮助。

当前显示`2013-04-04 15:45:38.497`，需要显示`20130404154538`

使用以下功能

```
CONVERT(VARCHAR(30),GETDATE(), 112) 
```

我可以得到`20130404`

类似的事情可以在 oracle 中实现

```
TO_CHAR(date_field,'yyyymmddhh24mmss') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T02:20:44.690

如何连接 and 的结果`112`并用空字符串`108`替换？`:`

```
SELECT REPLACE(CONVERT(VARCHAR(30),dateField, 112) + 
               CONVERT(VARCHAR(30),dateField, 108), ':', '')
FROM TableName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/7f715/3)

这与

```
SELECT CONVERT(VARCHAR(30),dateField, 112) + 
       REPLACE(CONVERT(VARCHAR(30),dateField, 108), ':', '')
FROM TableName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/7f715/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T02:37:47.640

如果您使用的是 SQL Server 2012，则可以使用：

```
 SELECT Format(dateField, 'yyyyMMddHHmmss'); 
```

# java - 正则表达式（java）中的贪婪匹配

> ID：15801452
> 
> 赞同：4
> 
> 时间：2013-04-04T02:16:42.647
> 
> 标签：java, regex

我正在尝试使用 java regex 标记下面的输入。我相信我的表达应该贪婪地匹配下面程序中的外部“exec”标记。

```
@Test
    public void test(){
        String s = "exec(\n" +
                "    \"command #1\"\n" +
                "    ,\"* * * * *\" //cron string\n" +
                "    ,\"false\" eq exec(\"command #3\")) //condition\n" +
                ")\n" +
                "\n" +  //split here
                "exec(\n" +
                "    \"command #2\" \n" +
                "    ,\"exec(\"command #4\") //condition\n" +
                ");";
        List<String> matches = new ArrayList<String>();
        Pattern pattern = Pattern.compile("exec\\s*\\(.*\\)");
        Matcher matcher = pattern.matcher(s);
        while (matcher.find()) {
            matches.add(matcher.group());
        }
        System.out.println(matches);
    } 
```

我期待输出为

```
[exec(
    "command #1"
    ,"* * * * *" //cron string
    ,"false" eq exec("command #3")) //condition
),exec(
    "command #2" 
    ,"exec("command #4") //condition
);] 
```

但得到

```
[exec("command #3")), exec("command #4")] 
```

谁能帮我理解我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T02:29:07.880

默认情况下，点字符`.`与换行符不匹配。在这里，在这种情况下，“exec”模式仅在它出现在同一行时才会匹配。

您可以使用[Pattern.DOTALL](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL)允许对换行符进行匹配：

```
Pattern.compile("exec\\s*\\(.*\\)", Pattern.DOTALL); 
```

* * *

或者`(?s)`可以指定，这是等效的：

```
Pattern.compile("(?s)exec\\s*\\(.*\\)"); 
```

# c++ - cin 正在检查格式错误的输入，但现在也在 EOF 上崩溃

> ID：15801453
> 
> 赞同：0
> 
> 时间：2013-04-04T02:16:43.410
> 
> 标签：c++, error-handling, cin

所以我在这个while循环中通过cin输入：

```
while (getline(cin,s))
{
    cin >> name;
    if (!cin)
        exit(1);

    cin >> age;
    in (!cin)
        exit(1);
} 
```

读取项目的文件（有更多的 cin 语句，但都是相同的小代码位）。不幸的是，我们需要在输入格式错误时使用 cin（不是 fstream）和 exit(1)。这样做的问题是，当我在文件末尾找到一个空行时，cin 将其视为错误并在不应该时退出。

有任何想法吗？

非常感谢。

**编辑**文件如下所示：

姓名 年龄 工作 $Salary

```
John 55 Worker $55 
Bob 23 Boxer $23 
Susie 26 Secretary $77 
```

ETC

# web-applications - 在需要频繁用户编辑的网络应用程序中保存用户数据的最佳方法是什么？

> ID：15801456
> 
> 赞同：1
> 
> 时间：2013-04-04T02:17:12.897
> 
> 标签：web-applications, save

我正在为自学目的创建一个 TODO 列表网络应用程序。这是我第一次构建 Web 应用程序。我正在使用 JavaScript 和 PHP。我很难找到保存用户数据的最佳方法。

我的应用程序允许用户创建多个列表。TODO 列表的列表可以通过拖动每个列表进行排序。每个列表的标题也可以编辑。可以创建、编辑、删除存储在每个列表中的项目，或者可以通过拖动项目来更改它们在列表中的顺序。

我希望能够将所有这些保存在数据库中，以便用户在返回我的 Web 应用程序时准确地看到他离开的地方。我可以想到两种不同的方法。一种是在修改数据时保存数据。例如，如果项目的订单被修改，我可以检测到更改并立即保存订单。其他是允许用户编辑数据，直到他保存它。

第一种方法可能更简单，更容易实现，但我担心它可能会影响我的应用程序的性能，因为对于用户进行的每个编辑，应用程序都需要与服务器通信。第二种方法看起来很有希望，但我需要跟踪自上次保存以来用户修改了哪些内容，这样我可以通过仅发送更新的内容来最大限度地减少到服务器的数据传输。为此，我依靠自定义数据属性和全局布尔变量来指示已修改的内容。

我想要的一个功能是我希望用户在保存时继续编辑。这为第二种方法引入了更多问题。请参阅我之前提出的问题（[如果允许用户在保存期间修改内容，我如何捕获要保存的内容？](https://stackoverflow.com/questions/15760264/how-do-i-capture-what-to-save-if-user-is-allowed-to-modify-content-during-saving)）。一位用户好心地给了我一个答案，它应该可以工作，但我没有在问题中写下我有自定义数据属性。这些自定义属性仍然可能不同步。

所以我的问题是：

1.  你会推荐第一种方法而不是第二种方法吗？为什么或者为什么不？
2.  防止自定义数据属性不同步的唯一方法可能只是在保存期间锁定我的应用程序。有没有更好的方法让我不需要锁定我的应用程序？

我仍然不是一个很有经验的程序员，我可能遗漏了一些非常明显的东西，但感谢您抽出宝贵的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T02:32:51.873

我认为自动保存不会有任何性能问题，除非您预计每秒有数千次更新并且您的网络服务器/数据库不够快。

我会在 Javascript 中创建一个数据结构（研究如何创建 javascript 类，从学习如何使用哈希开始），它可以将所有数据保存在其属性中，并可以触发它们的 onchange 事件以通过 Ajax 请求更新。

尝试在您的 Javascrip 对象和 PHP 中的数据类/对象之间保持相同的格式（例如使用 JSON 格式），这样您在数据库中进行快速更新就不会遇到太多麻烦。您的 PHP 类应该能够读取通过 Ajax 接收到的对象的属性并相应地更新数据库。同时，它应该能够生成 Javascript 中需要用于读取/加载目的的对象。

弗朗西斯科

# rest - OpenStack API 创建实例

> ID：15801457
> 
> 赞同：2
> 
> 时间：2013-04-04T02:17:22.203
> 
> 标签：rest, virtual-machine, provisioning, openstack

在我使用 REST API 在 OpenStack 上创建实例后，使用 Nova 端点，操作成功并带有服务器 ID 引用。如果我立即尝试获取网络接口的任何详细信息（使用 /servers/server-id/ips），我什么也得不到，甚至没有资源繁忙的错误消息。如果我任意等待 30 秒，我会得到详细信息。是否有任何 API 调用可以在 OpenStack 上用于在创建后获得“就绪”状态？

如果没有任何操作判断服务器已经准备好，那么文档中是否有推荐的等待时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:31:40.127

您应该等待实例处于“活动”状态。那时实例已经完全构建，包括网络。您可能会在它仍处于“构建”状态时点击该实例。

# facebook - 图片不会在我的 wordpress 目录中显示在 Facebook 上，但可以在其他目录中使用

> ID：15801461
> 
> 赞同：1
> 
> 时间：2013-04-04T02:18:18.193
> 
> 标签：facebook, wordpress, facebook-opengraph

帮助！直到一周前，当我在 Facebook 上发帖时，我网站上的图片效果还不错。现在，什么都没有出现。我在标题中设置了 OG 标签，效果很好，只是图像显示为空白。例如：[https ://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fmydigitalmind.com%2Fblog%2F2013%2F03%2Flast-summers-barred-owls%2F](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fmydigitalmind.com%2Fblog%2F2013%2F03%2Flast-summers-barred-owls%2F)

注意图像区域是空白的？如果单击图像，您将看到图像，但在 Facebook 上仍显示为空白。

我已经将问题缩小了一点，但我需要帮助解决它。我的 Wordpress 设置在我的服务器 /wp/ 上的目录中 - 网站本身使用 Wordpress 推荐的确切方法重定向到根目录。

如果我从我网站上的任何其他目录加载图像，它会在 Facebook 上正常加载。一个例子在这里：http://*mydigitalmind.com/IMG_5902.jpg - 如果您将该图像粘贴到您的状态中，它就会显示出来。*

 *把同一张图片放在我的 /wp/ 目录中：http: [//mydigitalmind.com/wp/IMG_5902.jpg](http://mydigitalmind.com/wp/IMG_5902.jpg)现在它没有出现在 Facebook 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:56:27.047

您应该检查您的`.htaccess`文件 - 在大多数情况下，这是阻止图像盗链的原因（大多数网站都有这样的解决方案以避免过多的流量）。*

# php - CakePHP：在注销期间使用 Cookie 组件

> ID：15801462
> 
> 赞同：0
> 
> 时间：2013-04-04T02:18:21.937
> 
> 标签：php, cakephp, cookies, authorization, cakephp-2.0

我试图在我的 cakePHP 应用程序的注销操作期间删除/取消设置其他 cookie。我正在尝试所有三种方法，但它们似乎都没有任何效果。这是 UsersController.php 中的内容：

```
public function logout() {

    $wp_cookie = grab_wp_cookie(); //this grabs the extra cookie name/value 
    $cookie_name = (isset($wp_cookie['name'])) ? $wp_cookie['name'] : NULL;
            //none of these do anything...
    $this->Cookie->write($cookie_name, 'xxx', false, strtotime('-1 day'));
    $this->Cookie->delete($cookie_name);
    $this->Cookie->destroy();

    $this->redirect($this->Auth->logout());
} 
```

我错过了什么吗？我找到[了这个文档](http://book.cakephp.org/2.0/en/core-libraries/components/cookie.html)，但它并没有表明我在做什么有任何问题。但是它确实显示了很多`beforeFilter()`我没有使用过的配置选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:52:47.583

我希望有人能提供一个更好的答案来解释为什么蛋糕方法不起作用，但与此同时，我实际上能够使用`setcookie()`以前不起作用的 PHP 来让它工作。

我这样做没有成功：

```
 setcookie($cookie_name, "XXX", time()-3600); 
```

但这有效：

```
 setcookie($cookie_name, "XXX", time()-3600, '/'); 
```

显然第四个参数是必要的。我很惊讶在我发现的关于这个主题的文档或其他线程中没有更多地讨论这个问题。

# javascript - Javascript将JSON字符串转换为函数实例

> ID：15801465
> 
> 赞同：5
> 
> 时间：2013-04-04T02:18:29.517
> 
> 标签：javascript, jquery, json

我有一堆从特定格式的 ajax 调用返回的 JSON 字符串，当开始将它们全部转换为我自己的 Javascript 对象时，我开始想知道是否有更简单的方法，因为我们在这里谈论的是 Javascript。

我将拥有`var manyOfThem = [ { name: 'a' }, { name: 'b' }, { name: 'c' } ];` 并且我想轻松地将这些对象中的每一个与我的函数相关联，以便我可以执行以下操作：

```
myClass.prototype.doSomething = function() {
  // do something to this.name
};

$.each(manyOfThem, function(index, item) {
  item.doSomething();
}); 
```

我想我担心的是，我不想（因为它重复）这样做：

```
var myClass = function(item) {
  this.name = item.name;
  // do the same for the rest of item's potentially 20 properties
};

var oneOfThem = new myClass(manyOfThem[0]); // I think this is redundant....
oneOfThem.doSomething(); 
```

无论如何，如果还有（安全？）原因，我只需要把它吸起来并手动完成它们，请分享，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T02:47:29.567

你的意思是，像（见[jsfiddle](http://jsfiddle.net/kr5L5/)）：

```
var MyClass = function() {};
MyClass.prototype = {
    doSomething: function() {
        alert(this.name);
    }
}; 
```

然后

```
var manyObj = $.map(manyOfThem, function(obj) {
   return $.extend( new MyClass(), obj );
}); 
```

所以你可以打电话：

```
manyObj[0].doSomething();  // alert("a") 
```

但是，这种方法不会保留与`manyOfThem`对象的直接副本。（在上面的示例中，更改`manyOfThem[0].name = "foo";`不会影响`manyObj[0]`并且调用`manyObj[0].doSomething();`仍将 alert `"a"`。要保留对对象的直接引用，请执行以下操作：

```
var manyObj = $.map(manyOfThem, function(obj) {
    function F() {};
    F.constructor = MyClass;
    F.prototype = obj;
    $.extend(F.prototype, new MyClass());
    return new F();
});

manyObj[0].doSomething();  // alert("a")

manyOfThem[0].name = "foo";  // modify the referenced object

manyObj[0].doSomething();  // alert("foo") ..also modifies the behaviour of the instance 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T03:03:38.423

不使用类的一种解决方案是

```
var manyOfThem = [ { name: 'a' }, { name: 'b' }, { name: 'c' } ];

function doSomething(){
    console.log(this.name)
}

$.each(manyOfThem, function(index, item) {
  doSomething.call(item);
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/En8hR/1/)

如果你想创建一个类型的实例`MyClas`然后

```
var manyOfThem = [ { name: 'a' }, { name: 'b' }, { name: 'c' } ];

function MyClass(item){
    $.extend(this, item);
}

MyClass.prototype.doSomething = function(){
    console.log(this.name)
}

$.each(manyOfThem, function(index, item) {
    var obj = new MyClass(item);
    obj.doSomething()
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/En8hR/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T02:55:22.800

你可以做

```
var myClass = function(item){  
    for( i in item){  
        if (item.hasOwnProperty(i)){
            this[i] = item[i];
        }
    }
}; 
```

这应该减少`myClass`构造函数中的重复分配。

# javascript - 如何制作 Facebook 剧院视图

> ID：15801467
> 
> 赞同：0
> 
> 时间：2013-04-04T02:18:39.357
> 
> 标签：javascript, css, facebook

当你点击facebook上的照片时，它会弹出，看起来可以用灯箱或类似的东西来完成，看看地址栏，url被改变了，它可以用pushState javascript方法完成

但是你看浏览器垂直滚动条吗？这就像当页面没有溢出时打开新页面我确定它没有使用

```
body{
        overflow:hidden
} 
```

因为当您打开开发者工具（在 Chrome 中）时，滚动条处于活动状态

它就像一个全新的页面，我希望你能理解我的问题，抱歉英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:35:09.473

当图片在灯箱样式查看器中打开时，您是正确的，因为 URL 是通过 pushState 更改的。

滚动条通过一个简单的技巧呈现为非活动状态，其中整个页面的内容（专辑，或提要，或您之前所在的任何页面）都被分配了类`_31e`（这似乎是动态生成的，所以它并不总是会被命名为这个）。

`_31e`将以下 CSS 样式分配给容器：

```
position: fixed;
top: 0px; 
```

您会看到它应用于开始标记之后的*第二个。* `div``body`

# elasticsearch - NEST API，custom_filters_score 如何在查询中使用它？

> ID：15801470
> 
> 赞同：0
> 
> 时间：2013-04-04T02:18:55.903
> 
> 标签：elasticsearch, nest

我需要根据未搜索的字段来提高匹配分数。ElasticSearch 允许您使用“custom_filters_score”来完成它。我正在使用 NEST API，但我不确定这是否受支持或是否有替代方法？该文档在这方面不是很有帮助。 [http://nest.azurewebsites.net/query/custom-filters-score.html](http://nest.azurewebsites.net/query/custom-filters-score.html)

除了使用 RawQuery 之外，还有其他使用 NEST 查询 API 的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:48:25.447

已为此发送拉取请求：[https ://github.com/Mpdreamz/NEST/pull/237](https://github.com/Mpdreamz/NEST/pull/237)

这将使其进入下一个版本。

# javascript - 深入理解 Javascript 中的闭包

> ID：15801471
> 
> 赞同：13
> 
> 时间：2013-04-04T02:18:56.733
> 
> 标签：javascript, closures

我正在阅读有关答案的评论并看到[此评论](https://stackoverflow.com/questions/15667093/how-to-understand-closure-in-javascript/15667314#comment22237952_15667362)：

> [闭包] 并没有持久化 foo 的状态，而是创建了一个特殊的范围，其中包含 (1) 返回的函数和 (2) 在返回时引用的所有外部变量。这种特殊的作用域称为闭包。

好的，到目前为止一切顺利。现在这是我不知道的有趣部分：

> 举个例子……如果您在 foo 中定义了另一个**未在返回函数中引用**的 var ，则它不会存在于闭包范围内。

我想这是有道理的，但是*除了内存使用/性能之外*，这还有什么影响？

**问题**——如果范围内的所有变量都包含在闭包中，那将允许我做什么，而我不能用当前模型来做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T02:28:43.210

我认为你太从字面上理解了这个评论。该评论只是说您无法在函数范围之外访问它（它不可公开访问），而不是在函数内根本不可用。无论如何，返回的函数都可以访问所有外部函数范围。如果内部函数不提供访问它的方法，您就无法在外部函数之外访问该范围。

例如，此表达式的计算结果为 4：

```
function testClosure(){
 var x = 2;
    return function(y){
        alert(eval(y));
    }

}

var closure = testClosure();

closure("x+2");  //4 
```

[http://jsfiddle.net/dmRcH/](http://jsfiddle.net/dmRcH/)

尽管没有被直接引用，所以`x`仍然可用

### 进一步的研究

似乎 chrome 和 firefox 至少确实尝试优化这一点，如果您不提供任何引用`x`变量的方法，它不会显示为在调试器中可用。在闭包内使用断点运行此`x`命令在 Chrome 26 和 Firefox 18 上显示为不可用。

[http://jsfiddle.net/FgekX/1/](http://jsfiddle.net/FgekX/1/)

但这只是内存管理细节，而不是语言的相关属性。如果有任何可能的方式可以引用该变量，它就会被传递，我怀疑其他浏览器可能不会以同样的方式优化它。编写规范总是比编写实现更好。在这种情况下，虽然规则确实是：**“如果有任何可能的方式让您访问它，它将可用”**。而且，**不要使用 eval ，因为它确实会让你的代码无法优化任何东西**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T02:43:52.863

> 如果您在 foo 中定义了另一个未在返回函数中引用的 var，则它不会存在于闭包范围内。

这并不完全准确；该变量是闭包范围的一部分，即使它可能不会在函数本身内部直接引用（通过查看函数代码）。不同之处在于引擎如何优化未使用的变量。

例如，当您使用 DOM 元素时，已知闭包范围内未使用的变量会导致内存泄漏（在某些引擎上）。以这个经典的例子为例：

```
function addHandler() {
    var el = document.getElementById('el');
    el.onclick = function() {
        this.style.backgroundColor = 'red';
    }
} 
```

[来源](https://developer.mozilla.org/en-US/docs/JavaScript/A_re-introduction_to_JavaScript#Memory_leaks)

在上面的代码中，内存被泄漏（至少在 IE 和 Mozilla 中），因为`el`它是 click 处理函数的闭包范围的一部分，即使它没有被引用；这会导致无法删除的循环引用，因为它们的垃圾收集是基于引用计数的。

另一方面，Chrome 使用[不同的垃圾收集器](https://developers.google.com/v8/design#garb_coll)：

> 在 V8 中，对象堆被分成两部分：创建对象的新空间，以及在垃圾回收周期中幸存的对象被提升到的旧空间。如果在垃圾回收周期中移动了一个对象，V8 会更新所有指向该对象的指针。

这也称为分代或[临时垃圾收集器](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Generational_GC_.28ephemeral_GC.29)。尽管更复杂，但这种类型的垃圾收集器可以更准确地确定变量是否被使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T02:36:35.127

JavaScript 没有固有的隐私感，所以我们使用函数范围（闭包）来模拟这个功能。

您引用的 SO 答案是模块模式的一个示例，Addy Osmani 很好地解释了[学习 JavaScript 设计模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#highlighter_669490)的重要性：

> 模块模式使用闭包封装“**隐私”、状态和组织。**它提供了一种包装公共和私有方法和变量的混合方式，防止碎片泄漏到全局范围内并意外地与另一个开发人员的接口发生冲突。使用这种模式，只返回一个公共 API，将闭包中的所有其他内容保持为私有。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-14T12:28:24.617

```
 Please have a look below code:

    for(var i=0; i< 5; i++){            
                setTimeout(function(){
                    console.log(i);
                },1000);                        
            }

   Here what will be output? 0,1,2,3,4 not that will be 5,5,5,5,5 because of closure

   So how it will solve? Answer is below:

   for(var i=0; i< 5; i++){
            (function(j){     //using IIFE           
                setTimeout(function(){
                    console.log(j);
                },1000);
            })(i);          
        }

    Let me simple explain, when a function created nothing happen until it called so for loop in 1st code called 5 times but not called immediately so when it called i.e after 1 second and also this is asynchronous so before this for loop finished and store value 5 in var i and finally execute setTimeout function five time and print 5,5,5,5,5

Here how it solve using IIFE i.e Immediate Invoking Function Expression

   (function(j){  //i is passed here           
                setTimeout(function(){
                    console.log(j);
                },1000);
            })(i);  //look here it called immediate that is store i=0 for 1st loop, i=1 for 2nd loop, and so on and print 0,1,2,3,4

For more, please understand execution context to understand closure.

- There is one more solution to solve this using let (ES6 feature) but under the hood above function is worked

 for(let i=0; i< 5; i++){           
                setTimeout(function(){
                    console.log(i);
                },1000);                        
            }

Output: 0,1,2,3,4 
```

# c++ - 通过 Lua 将 C++ wchar_t 放入 Flash

> ID：15801476
> 
> 赞同：0
> 
> 时间：2013-04-04T02:19:30.967
> 
> 标签：c++, flash, unicode, lua, wchar-t

我目前正在开发一个与 Lua 相关联的 C++ 应用程序，该应用程序与 Flash 相关联（按此顺序）。我目前的目标是`wchar_t`通过 Lua 将 s 从 C++ 转换为 Flash。我很想知道我如何能做到这一点！

*如果需要任何其他信息，请询问，我会尽力提供*

* * *

***我试过的***

据我了解，Lua 不是 Unicode 的粉丝，但它仍然应该能够从我的 C++ 应用程序接收字节字符串。我想必须有一种方法可以将这些字节传递给 Flash，然后渲染出我想要的 Unicode。所以到目前为止我所做的：

**C++：**

```
//an example wchar_t*
const wchar_t *text = L"Test!";

//this function pushes a char* to my Lua code
lua.PushString((char*)text); //directly casting text to a char*... D: 
```

**卢阿：**

```
theString = FunctionThatGetsWCharFromCpp();
flash.ShowString(theString); 
```

**闪光：**

```
function ShowString(theString:String)
{
    myTextField.text = theString;
} 
```

现在这里的结果是`myTextField`只显示“T”。这对我来说很有意义。从`wchar_t`to的转换`char`最终会`char`用一些零填充 s ，特别是因为 "T" 并没有真正利用 a 的两个字节`wchar_t`。快速查看[文档](http://pgl.yoyo.org/luai/i/lua_pushstring)会产生：

**lua_pushstring**

> 字符串不能包含嵌入的零；假设它在第一个零处结束。

所以我做了一个小测试：

**C++：**

```
//prefixing with a Japanese character 
//which will use both bytes of the wchar_t
const wchar_t *text = L"たTest!"; 
```

Flash 文本框现在显示：“_0T”，3 个字符。完全有道理，日语字符 + T 的 2 个字节，然后终止。

我了解发生了什么，但我仍然完全不确定如何解决这个问题。而且我真的不确定要搜索什么。是否有一个特定的 Lua 函数可以用来将一堆字节从 C++ 传递给 Lua（我读过一些`lua_pushlstring`经常用于此目的的地方，但它也以第一个零终止）？是否有可以接受这些字节的 Flash 数据类型，然后我需要进行某种转换以将它们转换为可读的多字节字符串？或者这真的不可能吗？

**注意：**
我不太熟悉 Unicode 和代码页等等，所以我不太确定是否还有一个步骤我需要在 Flash 中指定正确的编码，以便我可以得到正确的输出 - 但是当我到达那里时我很高兴穿过那座桥，但是如果有人在这里也有任何见解，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:41:32.073

我不知道这是否可行，但我建议尝试使用[UTF-8](http://en.wikipedia.org/wiki/UTF-8)。以 UTF-8 编码的字符串中没有任何嵌入的零，因此 Lua 应该能够处理它，而 Flash 也应该能够处理它，这取决于语言接口的精确程度。

这是使用以下方法将宽字符字符串转换为 UTF-8 的一种方法：[`setlocale(3)`](http://linux.die.net/man/3/setlocale) [`wcstombs(3)`](http://linux.die.net/man/3/wcstombs)

```
// Error checking omitted for expository purposes

// Call this once at program startup.  If you'd rather not change the locale,
// you can instead write your own conversion routine (but beware of UTF-16
// surrogate pairs if you do)
setlocale(LC_ALL, "en_US.UTF-8");

// Do this for each string you want to convert
const wchar_t *wideString = L"たTest!";
size_t len = wcslen(wideString);
size_t maxUtf8len = 4 * len + 1;  // Each wchar_t encodes to a max of 4 bytes
char *utf8String = new char[maxUtf8len];
wcstombs(utf8String, wideString, maxUtf8len);
...
// Do stuff with utf8string
...
delete [] utf8String; 
```

如果您使用的是 Windows，则可以改为使用[`WideCharToMultiByte`](http://msdn.microsoft.com/en-us/library/dd374130.aspx)带有`CP_UTF8`代码页的函数来进行转换，因为我不相信 Visual Studio C 运行时支持 UTF-8 语言环境：

```
// Error checking omitted for expository purposes
const wchar_t *wideString = L"たTest!";
size_t len = wcslen(wideString);
size_t maxUtf8len = 4 * len + 1;  // Each wchar_t encodes to a max of 4 bytes
char *utf8String = new char[maxUtf8len];
WideCharToMultiByte(CP_UTF8, 0, wideString, len + 1, utf8String, maxUtf8len, NULL, NULL);
...
// Do stuff with utf8string
...
delete [] utf8String; 
```

# c# - 将列表中的不同项目添加到另一个列表

> ID：15801478
> 
> 赞同：1
> 
> 时间：2013-04-04T02:19:45.400
> 
> 标签：c#, list, multidimensional-array, unique

我想完成标题所述的内容，但我不知道如何去做。

我有 2 个列表：

```
public List<int[,]> LongList = new List<int[,]>();
public List<int[,]> UniqueList = new List<int[,]>(); 
```

为了进一步解释，这里有一个场景：

谜题：

```
public int[,] puzzle1 = new int [3,3] { {1,2,3},
                                            {8,4,0},
                                            {7,6,5} }; //[1,2,3;8,4,0;7,6,5]

    public int[,] puzzle2 = new int [3,3] { {8,7,6},
                                            {1,0,5},
                                            {2,3,4}  }; //[8,7,6;1,0,5;2,3,4]

    public int[,] puzzle3 = new int [3,3] { {7,6,3},
                                            {1,0,2},  
                                            {8,4,5}  }; //[7,6,3;1,0,2;8,4,5] 
```

长列表包含：

```
LongList.Add(puzzle1); 
LongList.Add(puzzle1); 
LongList.Add(puzzle1); 
LongList.Add(puzzle1);
LongList.Add(puzzle2);
LongList.Add(puzzle2);
LongList.Add(puzzle3);
LongList.Add(puzzle3);
LongList.Add(puzzle3); 
```

我希望唯一列表保存 LongList 中的唯一值。好像这发生了：

```
UniqueList.Add(puzzle1);
UniqueList.Add(puzzle2);
UniqueList.Add(puzzle3); 
```

作为一个等式：UniqueList = LongList 中的不同值

列表中充满了多个重复出现的值，我只想取唯一的值并将它们放入`UniqueList`.

我正在尝试完成一个谜题，其中`LongList`将包含同一个谜题的多个引用等等。为了便于讨论：

`LongList`值：1,1,1,1,2,2,3,4,4,4,4,5,5

我想`UniqueList`包含谜题：1,2,3,4,5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T02:21:48.000

OP的评论含糊不清。

**选项 1：来自所有多维数组的唯一数字**

```
List<int> UniqueList = new List<int>();

UniqueList = LongList.Select(i => Flatten(i))
               .SelectMany(i => i)
               .Distinct()
               .ToList(); 
```

这会将 { [[0, 1], [2, 3]], [[2, 2], [4, 5]] } 变成 { 0, 1, 2, 3, 4, 5 }

见下文`Flatten`

**选项 2：按值的唯一多维数组**

注意：假设每个多维数组的大小和维数匹配。

```
List<int[,]> UniqueList = new List<int[,]>();
foreach (var e in LongList)
{
  IEnumerable<int> flat = Flatten(e);
  if (!UniqueList.Any(i => Flatten(i).SequenceEqual(flat)))
  {
    UniqueList.Add(e);
  }
} 
```

这会将 { [[0, 1], [2, 3]], [[0, 1], [2, 3]], [[2, 2], [4, 5]] } 变成 { [[ 0, 1], [2, 3]], [[2, 2], [4, 5]] }

见下文`Flatten`

**选项 3：仅唯一参考**

```
UniqueList = aList.Distinct().ToList(); 
```

注意：这是原始答案，用于评论的上下文。

**展平方法**

在所有情况下`Flatten`均取自[Guffa 的 SO Answer](https://stackoverflow.com/a/4423376/364)

```
public static IEnumerable<T> Flatten<T>(T[,] items) {
  for (int i = 0; i < items.GetLength(0); i++)
    for (int j = 0; j < items.GetLength(1); j++)
      yield return items[i, j];
} 
```

**其他选项**

如果 OP 想要其他东西（例如扁平化`List<int[,]>`或`List<int[]>`支持不同大小的多维数组），他们将不得不评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T03:09:29.770

根据 OP 的更新，我们只需要删除重复的**引用**。所以我们不需要在每个值的基础上进行比较。`Distinct`应该做：

```
UniqueList = LongList.Distinct().ToList(); 
```

# javascript - Javascript - Script5002 - 声明变量时需要函数

> ID：15801483
> 
> 赞同：0
> 
> 时间：2013-04-04T02:20:26.687
> 
> 标签：javascript, internet-explorer-10

我已经在网上浏览了很多答案和其他地方，但我没有发现任何人以与我相同的方式遇到错误。

我的浏览器刚刚更新到 IE10，这引起了我们的注意。如果我在兼容模式下运行，该功能似乎工作得很好。如果我不在兼容模式下，我会收到 IE 调试器错误 SCRIPT5002 - Function Expected 错误。

我已经用 ==> 标记了出现错误的地方。如果我取出该变量并用 document.frames... 替换该变量，那么它将将该行引用为问题。任何帮助，将不胜感激。

我从以前的员工那里继承了这段代码，并且只使用 javascript 大约 3 个月。这是代码：

```
function FncSaveClient(){
//Submit Primary Client form
//Verify Data
==> var CntSumFrm = document.frames('IFrameSummary').document.all.item('DefaultFrm');
if (CntSumFrm.fireEvent('onsubmit') == true){
    CntSumFrm.submit();
}
//If Edit Mode Submit Subforms
var IntAcctNum = CntSumFrm.TxtAcctNum.value
if (IntAcctNum != 0){
    //Locations Subform
    var CntLocFrm = document.frames('IFrameLocations').document.all.item('DefaultFrm');
    if (CntLocFrm.fireEvent('onsubmit') == true){
          CntLocFrm.submit();
      }
    //Contacts Subform
    var CntContactTbl = document.frames('IFrameContacts').document.all.item('TblContactSummary')
if (CntContactTbl.rows.length-3 == 0){
        alert('You must have at least one contact per client.');
    document.all.item('BtnSubTblClientContacts').style.color='red';
    }
    //Classification Subform
    var CntClassFrm = document.frames('IFrameMarketing').document.frames('IFrameClassification').document.all.item('DefaultFrm');
    if (CntClassFrm.fireEvent('onsubmit') == true){
        CntClassFrm.submit();
      }
    //Save Client Admin
    var CntAdminFrm = document.frames('IFrameAdmin').document.all.item('DefaultFrm');
    if (CntAdminFrm.fireEvent('onsubmit') == true){
    CntAdminFrm.submit();
}
else
{
    document.all.item('BtnSubTblSalesRel').style.color='red';
}   
}

if(CntSumFrm.TxtDeleted.value == 1)
    {
    window.parent.location.href = '/Accounts/';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:29:47.060

That code is full of ancient IE-specific code, that is probably not allowed anymore even by IE, unless in compatibility mode. You should look into replacing stuff like:

*   `document.frames`
*   `document.all`
*   `.items()`

I believe the error happens because `frames` or `item` (maybe both) is not a function when IE follows the JS standards.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:38:00.457

我今天在 2005 年写的 Java Script 也有类似的问题。使用 IE10 的外部用户（我们仍使用 IE8）无法正常工作。看来 document.all 已被弃用，只能在兼容模式下访问。我删除了对 IE 的检查，因此它现在使用我已经为其他浏览器使用的 document.getElementById，即使关闭了兼容模式，它似乎也可以工作。

# mysql - 为 mysql root 帐户创建密码导致 WAMP 出现问题

> ID：15801493
> 
> 赞同：0
> 
> 时间：2013-04-04T02:21:34.587
> 
> 标签：mysql, phpmyadmin, passwords, wamp, sqlbuddy

我使用以下命令为 root 帐户创建了一个新密码：

```
 mysqladmin -u root password "[newpassword]" 
```

这导致了连接到 phpmyadmin 的问题，我通过更改包含以下行的 config.inc.php 文件解决了这个问题：

```
 $cfg['Servers'][$i]['user'] = 'root';
    $cfg['Servers'][$i]['password'] = '[newpassword]'; 
```

这解决了这个问题。但是，在尝试连接到 sqlbuddy 和 webgrind 时，我仍然收到“禁止”错误。有没有等效的方法来解决这些问题？或者解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T00:58:09.660

SQLBuddy 在您运行它时会要求提供用户 ID/密码，除非您已将 config.php 文件更改为使用默认密码。

你输入的密码正确吗？？

# c# - 如何从服务读取 Xml 到 Linq

> ID：15801497
> 
> 赞同：0
> 
> 时间：2013-04-04T02:22:26.210
> 
> 标签：c#, linq-to-xml

我有一个从服务[位置 Xml获取的字符串数据](http://dev.virtualearth.net/REST/v1/Locations?countryRegion=Vietnam&adminDistrict=Hanoi&key=AgoUxsDIlzkI0CMxfAPSD1hSs6f82yEPWGIRcO6-HvLXLPAbMb2BE7O_FDq7mUmz&o=xml)

我想阅读响应文本并返回 ObservableCollection

```
public void SearchLocation(string address)
{
var webclient = new WebClient();
        if (address != "")
        {
            string url =
                string.Format(
                    @"http://dev.virtualearth.net/REST/v1/Locations?countryRegion=Vietnam&adminDistrict=Ha Noi&locality={0}&o=xml&key={1}",
                    address, BingMapKey);
            webclient.DownloadStringAsync(new Uri(url));
            webclient.DownloadStringCompleted += WebclientOnDownloadStringCompleted;
        }
    }

    private void WebclientOnDownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        string data = e.Result;
        ReadXml(data);
    }

    private void ReadXml(string data)
    {
        _locations.Clear();

        XDocument document = XDocument.Parse(data);
        var locations = from loca in document.Descendants("Location")
                            select
                                new Location(loca.Element("Name").Value,
                                            loca.Element("Point").Element("Latitude").Value,"1",
                                             "1", "1", "1", "1");

            _locations = (ObservableCollection<Location>) locations;

    }
} 
```

上课地点：

```
public class Location
{
    /// <summary>
    /// Tên địa điểm
    /// </summary>
    public string Name { get; set; }
    /// <summary>
    /// Vĩ độ
    /// </summary>
    public double Latitude { get; set; }

    /// <summary>
    /// Kinh độ
    /// </summary>
    public double Longitute { get; set; }

    /// <summary>
    /// Vĩ độ Nam
    /// </summary>
    public double SouthLatitude { get; set; }

    /// <summary>
    /// Kinh độ Tây
    /// </summary>
    public double WestLongtitue { get; set; }

    /// <summary>
    /// Vĩ độ Bắc
    /// </summary>
    public double NorthLatitude { get; set; }

    /// <summary>
    /// Kinh độ Tây
    /// </summary>
    public double EastLongitude { get; set; }

    /// <summary>
    /// Khởi tạo Location
    /// </summary>
    /// <param name="name">tên địa điểm</param>
    /// <param name="latitue">vĩ độ&lt;/param>
    /// <param name="longitude">kinh độ&lt;/param>
    /// <param name="southLatitude">vĩ độ nam</param>
    /// <param name="westLongitude">kinh độ tây</param>
    /// <param name="northLatitude">vĩ độ bắc</param>
    /// <param name="eastLongitude">kinh độ đông</param>
    public Location(string name, string latitue, string longitude, string southLatitude, string westLongitude,
                    string northLatitude, string eastLongitude)
    {
        Name = name;
        Latitude = Convert.ToDouble(latitue);
        Longitute = Convert.ToDouble(longitude);
        SouthLatitude = Convert.ToDouble(southLatitude);
        NorthLatitude = Convert.ToDouble(northLatitude);
        WestLongtitue = Convert.ToDouble(westLongitude);
        EastLongitude = Convert.ToDouble(eastLongitude);
    }
} 
```

我阅读并且 _location 返回 null，错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:42:41.540

您可以将`IEnumerable<Location>`LINQ to XML 查询的结果`ObservableCollection<Location>`直接转换为。

```
_locations = (ObservableCollection<Location>) locations; 
```

只需将查询结果集合中的所有元素添加到现有的`ObservableCollection`：

```
foreach(var location in locations)
    _locations.Add(location); 
```

***更新***

您的代码中也存在命名空间问题。试试那个：

```
XDocument document = XDocument.Parse(data);

var ns = XNamespace.Get("http://schemas.microsoft.com/search/local/ws/rest/v1");

var locations = from loca in document.Descendants(ns + "Location")
                select
                    new Location(loca.Element(ns + "Name").Value,
                                loca.Element(ns + "Point").Element(ns + "Latitude").Value, "1",
                                 "1", "1", "1", "1"); 
```

# javascript - Javascript点对点角度计算

> ID：15801498
> 
> 赞同：5
> 
> 时间：2013-04-04T02:22:28.030
> 
> 标签：javascript, animation, rotation, geometry, angle

我们得到 3 分：**start**、**end**和**mail**。

![描述](https://i.stack.imgur.com/t2Fgu.png)

邮件图像从起点和终点沿曲线移动，这是由 jQuery animate 完成的。

现在下一步是让邮件图像在动画运行时旋转。所以在起点和终点，它会旋转 0 度，但在制作动画时，它应该面向动画的路径旋转。（见图）

我试过的：

[JSFiddle](http://jsfiddle.net/R5dRd/6/)

```
// Init dom elements
var $start = $('#start');
var $end = $('#end');
var $mail = $('#mail');

// Get position coordinates
var startPos = $start.position();
var endPos = $end.Position();

// Angle calculation
var getAngle = function(currX, currY, endX, endY) {
  var angle = Math.atan2(currX - endX, currY - endY) * (180 / Math.PI);

  if (angle < 0) {
    angle = Math.abs(angle);
  } else {
    angle = 360 - angle;
  }

  return angle;
};

// Mail angle
var getMailAngle = function() {
  var currPos = $mail.position();
  var endPos = $end.position();
  return getAngle(currPos.left, currPos.top, endPos.left, endPos.top);
};

// Animate
$mail.animate({top: endPos.top, left: endPos.left}, {
  specialEasing: {left: "easeInSine", top: "linear"},

  // Executed each "animation" frame, so we rotate here.
  step: function() {
    var angle = getMailAngle();
    $(this).css('transform', 'rotate(' + angle + 'deg'));
  }
}); 
```

但是上面的代码不正确，开始/结束时角度不朝上，我对几何数学的经验很少，所以我非常感谢旋转计算的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T18:01:15.257

首先，您需要使用以相同“角度”开始和结束的缓动动画。如果您查看不同的[缓动选项](http://jqueryui.com/resources/demos/effect/easing.html)， 和是`swing`一些有效的选项。`easeInOutQuad``easeInOutSine`

要计算角度的近似值，您可以查看邮件图标的当前位置及其下一个位置（在下一个动画帧中）。要获得良好的近似值，您需要使用 easing 函数“手动”计算当前位置和下一个位置。这也意味着您需要手动控制动画。

这是一个代码片段，您也可以在[JSFiddle](http://jsfiddle.net/BjVHW/10/)上看到它。

```
// Init dom elements
var $start = $('#start');
var $end = $('#end');
var $mail = $('#mail');

// Get position coordinates
var startPos = $start.offset();
var endPos = $end.offset();

// Angle calculation
var getAngle = function(currX, currY, endX, endY) {
  var angle = Math.atan2(currX - endX, currY - endY) * (180 / Math.PI);

  if (angle < 0) {
    angle = Math.abs(angle);
  } else {
    angle = 360 - angle;
  }

  return angle;
};

// Animate
var maxframe = 1000;
$({frame: 0}).animate({frame: maxframe}, {
    easing: "linear",
    duration: 1000,

  // Executed each "animation" frame, so we rotate here.
  step: function() {
      var easing = $.easing.easeInOutQuad;
      var left = easing(0, this.frame, startPos.left, endPos.left - startPos.left, maxframe);
      var leftNext = easing(0, this.frame+1, startPos.left, endPos.left - startPos.left, maxframe);

      var top = startPos.top + (endPos.top - startPos.top) * this.frame / maxframe;
      var topNext = startPos.top + (endPos.top - startPos.top) * (this.frame + 1) / maxframe;

      var angle = getAngle(left, top, leftNext, topNext);     
      $mail.offset({left: left, top: top});
      $mail.css('transform', 'rotate(' + angle + 'deg)');
  },

  // Set the final position
  complete: function() {
      $mail.offset($end.offset());
      $mail.css('transform', ''); 
  }  
}); 
```

# c++ - 如何为私有程序集创建清单文件

> ID：15801499
> 
> 赞同：0
> 
> 时间：2013-04-04T02:22:57.120
> 
> 标签：c++, windows, visual-c++

我想知道如何为我的 c++ 私有程序集创建清单。我现在所做的是保留一个静态清单文件（如下所示）并将其嵌入到 dll 中。这种方法的缺点是我无法更新清单文件中的版本号。我想用 dll 的版本更新清单文件中的版本。

如果有人知道为“私人集会”创建清单的一些细节，请告诉我

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <assemblyIdentity type="win32" name="MyCompany.MyDll" version="1.0.0.0"
                    processorArchitecture="x86" ></assemblyIdentity>  
</assembly> 
```

# c++ - 尝试使用运算符“==”比较同一类的 2 个对象

> ID：15801503
> 
> 赞同：3
> 
> 时间：2013-04-04T02:22:17.750
> 
> 标签：c++

我的日程安排很紧，我对如何让这个程序运行没有任何想法。我对 c++ 和一般编程很陌生，我们刚刚学习类、重载运算符和一堆文件操作，我们必须在程序中使用它们。它很长。该程序基本上是在测试类似于 mp3 播放器（例如 ipod）的功能。这是细分：

1) 我们必须创建两个类：Tsupod 和 Songs，程序中的所有歌曲都将存储在“list.dat”中。

2）我们已经以二进制模式读取列表，写出，在列出所有存储的歌曲时读入，并使用文件操作在文件中找到我们必须在其中找到要删除或要移动的歌曲的点文件...特别是当我必须为洗牌编写函数时。

3）这些都是在五个不同的文件中完成的......显然，reinterpret_cast 的读入和写出在linux系统中不起作用，但它适用于windows。

这是我在公共成员下的歌曲课程中尝试做的事情......

```
 //overloaded operator '==' ...
     bool operator ==( Songs& b)
    {   
        if (strcmp(Title, b.Title) > 1)
            return false;
        else if (strcmp(Artist, b.Artist) > 1)
            return false;
        else if (size != b.size)
            return false;
        else
            return true;
    }

private:
    char Artist[30];
    char Title[30];
    int size;
};#endif // SONGS_H_INCLUDED 
```

这是我试图实现它的 int tsupod::removeSong(string removeTitle, string emoveArtist) 中的代码 TsuPod.cpp... 字符串 removeTitle 和 remove artist 来自 main 中的函数调用：Pod.removeSong( “等等等等等等”）; 其中 Pod 是 tsupod 类的对象。在 removeSong 函数中调用歌曲类，其中艺术家和标题被转换为字符数组。标志在 songFile 中被重置。

```
for(int i = 0; i < num_songs; i++)
{
    songFile.read(reinterpret_cast<char*>(&info), sizeof(info));
    pos = sizeof(info) * count;
    songfile.seekp(pos - sizeof(info));

    if (S == info)
    {
        num_songs--;    
    }
    else
    {
        songFile.write(reinterpret_cast<char*>(&info), sizeof(info));
        count++
    }
} 
```

我在这个函数中试图做的是覆盖文件中的数据，这样我就不会在文件中有任何我以后必须处理的间隙。我也尝试了很多方法来解决这个问题......重命名旧文件，然后使用旧文件名或保存信息的字符数组创建一个新文件。该程序中的歌曲对象基本上用作巨大的缓冲区来保存信息，然后将这些信息存储到文件中。

我的主要问题是我试图比较同一类的两个对象。“S”和“信息”。在说什么之前，我不允许在这个特定的任务中使用数组，因为根据我的教授练习文件操作，像我这样的学生要花大约 26 个小时在这上面。我也很确定这是我的重载 == 运算符不起作用，因为它总是会跳过每次迭代的条件。这可能是一件非常简单的事情，就像我花了 3 个小时寻找丢失的分号一样。在这种情况下，我怎样才能让这个 ==OPERATOR 工作？

如果有人真的能帮我快速解决这个问题，我会用千日的荣耀认真地赞美你，因为你救了我这个项目没有得到 A+ 的屁股。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T02:28:03.573

你使用`strcmp`不正确。而不是 compare `strcmp(char*, char*) > 1`，您应该这样做`strcmp(char*, char*) != 0`（查看两个 C 字符串是否不相等）。请参阅文档：

> 零值表示两个字符串相等。大于零的值表示第一个不匹配的字符在 str1 中的值大于在 str2 中的值；小于零的值表示相反。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T02:28:37.553

如果您更改`> 1`for应该可以工作`!= 0`。

```
 if (strcmp(Title, b.Title) != 0)
        return false;
    else if (strcmp(Artist, b.Artist) != 0)
        return false;
    return (size == b.size); 
```

我还简化了大小，`return size == b.size`而不是你的四行来做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T07:11:42.907

您错过了运算符定义中的**const**并且错误地检查了**strcmp**的结果。
此外，最好将相等运算符定义为**const**，即您声明它，因为它不会更改类数据。
而且，它不是很重要，但用于比较的对象通常命名为**rhs**（右手边）。

所以，最后，它应该是：

```
bool operator==(const Songs& rhs) const
{   
    return (strcmp(Title, rhs.Title) == 0) &&
           (strcmp(Title, rhs.Title) == 0) &&    
           (size == rhs.size);
}
private:
    char Artist[30];
    char Title[30];
    int size; 
```

# java - Android AsyncTask 通过 http 请求内存不足

> ID：15801504
> 
> 赞同：0
> 
> 时间：2013-04-04T02:23:53.330
> 
> 标签：java, android, performance, asynchronous, android-asynctask

所以基本上，让我设置场景：

```
List<Account> accounts = ...//Initialised with 2 accounts.

for( Account ac : accounts)
{
   new AsyncTask<...>(){ getTwitterTimeLine(amount);}.execute();
} 
```

所以你可以在这里看到两个 AsyncTask 被一个接一个地调用。

现在这是有趣的部分，

如果我将数量变量设置为 10。该方法调用一个 HTTP 请求，请求 10 个最新的提要项。这工作得很好，正常的行为是将返回的数据放入多个可能的列表视图之一中，（所有都可以通过 viewpager 查看，因此在这种情况下，2 个列表视图分别由 2 个异步任务填充）

**但**

如果我把数量设置为 100，那么基本上更多的 JSON 数据，我得到以下内容；

```
 04-04 03:11:20.175: E/AndroidRuntime(4574): FATAL EXCEPTION: AsyncTask #1
04-04 03:11:20.175: E/AndroidRuntime(4574):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at java.lang.Thread.run(Thread.java:856)
04-04 03:11:20.175: E/AndroidRuntime(4574): Caused by: java.lang.OutOfMemoryError
04-04 03:11:20.175: E/AndroidRuntime(4574):     at 

java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:94)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:145)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at java.lang.StringBuilder.append(StringBuilder.java:216)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at twitter4j.internal.org.json.JSONArray.join(JSONArray.java:363)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at twitter4j.internal.org.json.JSONArray.toString(JSONArray.java:605)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at twitter4j.internal.http.HttpResponse.asJSONArray(HttpResponse.java:192)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at twitter4j.internal.json.StatusJSONImpl.createStatusList(StatusJSONImpl.java:381)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at twitter4j.internal.json.z_T4JInternalJSONImplFactory.createStatusList(z_T4JInternalJSONImplFactory.java:74)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at twitter4j.TwitterImpl.getHomeTimeline(TwitterImpl.java:127) 
```

它直接指向我的 AsyncTask 的 doInBackground 方法，在该方法中调用 getTwitterTimeLine()。

我该如何解决这个问题？我希望能够引入大量数据，并将其泵送到多个列表视图等。我阅读了很多，我想也许我需要将任务排队，以防其中一个占用大量内存，所以我研究并使用[正确使用 AsyncTask](http://blogactivity.wordpress.com/2011/09/01/proper-use-of-asynctask/)，但这没有效果，我仍然遇到内存不足的问题。

无论如何如何解决/解决这个问题？我阅读了 LoaderManager，但我想将其推迟到最后一次调用，因为它会导致重大的设计更改。

感谢您的任何帮助。

注意：getTwitterTimeLine 方法调用调用 api 的 twitter4j 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:34:09.953

您不想像这样在循环中触发 AsyncTask。有一个固定的线程池大小，虽然两个帐户左右不足以将其最大化，但最好不要这样做。相反，请确定如何在单个异步任务中加载所有这些数据。doInBackground() 接受参数列表。例如，您可以使用构造函数中设置的数量创建 AsyncTask 并传入帐户以加载数据。

```
@Override
protected Map<Account, Data> doInBackground(Accounts...params){
    Map<Account, Data> resultMap = new HashMap<Account, Data>();
    for (Account account : params) {
        // do whatever!
    }
    return resultMap;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:34:00.993

您不能依赖[AsyncTasks 进行并行执行](http://developer.android.com/reference/android/os/AsyncTask.html)。

> 首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。

至于 twitter4j...

```
at java.lang.StringBuilder.append(StringBuilder.java:216)
04-04 03:11:20.175: E/AndroidRuntime(4574):     at twitter4j.internal.org.json.JSONArray.join(JSONArray.java:363) 
```

...它在内部使用 StringBuilder。在内存有限的设备上跨多个线程使用字符串连接必然会导致 OOM。如果您想节省这些 json 字符串占用的内存，请改用[JsonReader](http://developer.android.com/reference/android/util/JsonReader.html)。至于并行执行，您可以使用由[ThreadPool](http://developer.android.com/reference/java/util/concurrent/ThreadPoolExecutor.html)支持的线程来并行执行它们。AsyncTasks 在某些版本的 android 中是串行执行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:00:45.190

事实证明，最终是因为位图没有被内存管理。尽管实现了 android 开发页面描述的 inSampleSize 框架以有效地加载位图，但似乎适当地维护和管理它们是必要的。

感谢所有回复的人，主题非常丰富。

# javascript - 如何在同一个 NetBeans (7.3) 项目中同时调试 JavaScript 和 PHP？

> ID：15801506
> 
> 赞同：6
> 
> 时间：2013-04-04T02:23:58.500
> 
> 标签：javascript, netbeans-7, xdebug

在我的第一步中，我使用了这种不合理的方式，如下所述：

1.  创建一个 HTML5 项目来调试 JavaScript 代码。
2.  创建最终的 PHP 项目，其中 JS 代码已经测试，我在其中调试服务器端。

所以我想知道是否有更聪明的方法来做到这一点？[例如：创建一个独特的项目并在本机 NetBeans JavaScript 调试器和 (PHP) XDebug](http://xdebug.org/)
之间切换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-28T01:20:32.507

对于 Chrome 中的 JavaScript 调试，您应该使用官方的**[NetBeans 连接器](https://chrome.google.com/webstore/detail/netbeans-connector/hafdlehgocfcodbgjnpecfajgkeejnaa)**扩展。

下面是一个关于如何使用 NetBeans + Chrome + NetBeans 连接器调试 JavaScript 代码的示例：

***在 HTML5 应用程序中调试和测试 JavaScript*** [https://netbeans.org/kb/docs/webclient/html5-js-support.html](https://netbeans.org/kb/docs/webclient/html5-js-support.html)

创建新项目后，您应该*“确认在工具栏的下拉列表中选择了带有 NetBeans 连接器的 Chrome”*：

![确认在工具栏的下拉列表中选择了带有 NetBeans 连接器的 Chrome](https://i.stack.imgur.com/qFY0x.png)

（在我的 NetBeans 中看起来像这样
![NetBeans 连接器](https://i.stack.imgur.com/dlphZ.png)：）

在某些行之前放置一些断点：

![JS代码断点](https://i.stack.imgur.com/CWV5G.png)

并点击运行。点击运行后，您将看到一个黄色警告栏，看起来像这样，说明“ *“NetBeans 连接器”正在调试此选项卡*“：

![](https://i.stack.imgur.com/xbzCg.png)

现在不要打开 Chrome 的内置 Web 检查器工具栏（否则您会收到一条警告，指出这会破坏 NetBeans 中的常规调试过程）。

现在您可以在 NetBeans 中调试 JavaScript 代码，该代码将在 Chrome 中运行。您应该打开 Window → Debugging → Variables 面板来检查变量。

或将鼠标悬停在某些项目上：

![NetBeans JS 代码调试； 多变的](https://i.stack.imgur.com/9kvMS.png)

* * *

关于调试PHP代码，这里有一些相关的官方文章：

*   如何调试 PHP 项目？- [http://wiki.netbeans.org/HowToDebugPHPProjects](http://wiki.netbeans.org/HowToDebugPHPProjects)
*   在 Windows 中配置 PHP 开发环境 - [https://netbeans.org/kb/docs/php/configure-php-environment-windows.html](https://netbeans.org/kb/docs/php/configure-php-environment-windows.html)
*   在 Linux Ubuntu 中配置 PHP 开发环境 - [https://netbeans.org/kb/docs/php/configure-php-environment-ubuntu.html](https://netbeans.org/kb/docs/php/configure-php-environment-ubuntu.html)
*   在 MAC OS X 中为 PHP 开发配置 PHP、Apache、MySQL 和 Xdebug - [https://netbeans.org/kb/docs/php/configure-php-environment-mac-os.html](https://netbeans.org/kb/docs/php/configure-php-environment-mac-os.html)
*   在 NetBeans IDE 中调试 PHP 源代码 - [https://netbeans.org/kb/docs/php/debugging.html](https://netbeans.org/kb/docs/php/debugging.html)
*   如何配置 XDebug - [http://wiki.netbeans.org/HowToConfigureXDebug](http://wiki.netbeans.org/HowToConfigureXDebug)

# broadcast - 广播/组播中的数据包数

> ID：15801513
> 
> 赞同：0
> 
> 时间：2013-04-04T02:25:10.153
> 
> 标签：broadcast, dhcp

当主机发出广播时，它如何计算它需要发送的数据包数量（相同），以便同一 LAN 上的所有其他主机都能接收到它？例如，当主机启动时，它会向 LAN 中的所有其他主机发送 DHCP 广播。它如何确定要发送的数据包数量（相同）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:41:46.230

好的，仔细检查了维基百科。您在标题中提到了“广播/多播”，但它们彼此之间有很大不同。

广播没有计算。答案是，您不知道也不关心还有多少其他主机。您将单个数据包发送到广播地址，每个主机都有责任监听发送的数据包。在 C 类子网上，例如 192.168.xx，广播地址是 192.168.x.255。

使用多播，发起主机仍然只需要发送一个数据包，因此也不需要计算总数据包。来自维基百科：

> 组播通过要求源仅发送一次数据包来有效地使用网络基础设施，即使它需要传送给大量接收器。网络中的节点仅在必要时负责复制数据包以到达多个接收者。

# amazon-web-services - 如何将 EC2 快照迁移到其他 EC2 账户

> ID：15801521
> 
> 赞同：7
> 
> 时间：2013-04-04T02:26:33.353
> 
> 标签：amazon-web-services, amazon-ec2

我在我的 EC2（帐户 1）上保存了 2 个快照，我创建了另一个 AWS 帐户（帐户 2），我希望帐户 1 中的 2 个快照出现在我的帐户 2 上。简而言之，我只想从帐户 1 到帐户 2。我可以这样做吗？谢谢！

**笔记**

*   确保 Account 1 和 Account 2 在同一个`Zone`. 可以在仪表板的右上角找到。
*   从快照页面，将`Viewing`选项更改为`Private Snapshots`（如果共享快照处于私有模式）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T02:52:58.753

您可以在一个账户中共享快照，以便它在另一个账户中可见以创建 EBS 卷，但无法“迁移”或将 EBS 快照所有权完全从一个账户转移到另一个账户。

但是，您可以遵循以下程序：

1.  在账户 1 中：授予账户 2 从 EBS 快照 A (ModifySnapshotAttribute) 创建卷的权限。

2.  在账户 2 中：从 EBS 快照 A 创建一个 EBS 卷。

3.  在账户 2 中：从 EBS 卷创建 EBS 快照 B。

4.  （可选）在账户 2 中：删除 EBS 卷。

5.  （可选）在账户 1 中：删除 EBS 快照 A。

这将导致 EBS 快照 B 由账户 2 拥有，并且是账户 1 中 EBS 快照 A 的精确副本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T03:47:19.037

查看 Amazon [EBS 共享快照](http://aws.amazon.com/about-aws/whats-new/2009/09/24/introducing-amazon-ebs-shared-snapshots/)。

> Amazon EBS 共享快照允许您共享这些快照，使您可以轻松地与您的同事或 AWS 社区中的其他人共享这些数据。借助此功能，您已授权的用户可以快速使用您的 Amazon EBS 共享快照作为创建自己的 Amazon EBS 卷的基础。如果您愿意，您还可以将您的数据公开提供给所有 AWS 用户。您授予访问权限的用户可以根据您的快照创建自己的 EBS 卷；您的原始快照将保持不变。这是开发人员轻松与 Amazon EC2 社区的其他成员共享数据的好方法，并使新客户可以轻松地从现有快照创建 Amazon EBS 卷。有关如何共享快照的更多信息，请参阅 Amazon EC2 用户指南的 EBS 部分。

有关更多信息，请参阅此[博客文章](http://aws.typepad.com/aws/2009/09/shared-snapshots-for-ec2s-elastic-block-store-volumes.html)。这篇[博](http://shlomoswidler.com/2009/09/cool-things-you-can-do-with-shared-ebs.html)文为您提供了有关共享快照的逐步说明以及一些很好的用例和警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T02:29:05.733

你可以私交。

与其他用户共享 ami

让他们启动一个实例

[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AESDG-chapter-sharingamis.html#sharingamis-intro](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AESDG-chapter-sharingamis.html#sharingamis-intro)

# perl - 在 Perl 中将罗马字转换为单词/数字

> ID：15801522
> 
> 赞同：-4
> 
> 时间：2013-04-04T02:26:47.377
> 
> 标签：perl, roman-numerals

我有一个来自文件的输入，我需要将输入中的罗马数字转换为单词或整数。在我的文章中，有字符串、数字、罗马数字的组合，但我只需要将罗马数字更改为数字，我使用 convert::number::roman 但它需要整个文本，当然它不是罗马数字

当我使用 roman 时，它应该转换我们输入的值：

```
 $roman = roman(13);                        
 $arabic = arabic($roman) if isroman($roman); 
```

请给我提意见？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T04:02:36.313

如果我理解这个问题，您正在尝试转换包含在较大文本中的罗马数字。最简单的方法是进行 eval 替换，尽管相当蛮力。例如。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Text::Roman 'roman2int';

my $text = <<'END';
Tim: Let's meet at half past VI.
Toady: Hmm, no good. How about quarter to IX?
END

$text =~ s/\b(\w+)\b/roman2int($1) || $1/ge;

print $text; 
```

由于`roman2int`在转换失败时返回 undef，我们只需尝试转换每个单词，如果成功则使用它，否则保留原始单词。这当然会有问题，例如有效的罗马数字单词，例如`I`, `IV`, `ID`,`DIM`等。这当然取决于您。

在相关说明中，在字典上运行代码并查看有多少单词是有效的罗马数字可能会很有趣:-)

# python - 如何理解 appengine ndb.tasklet？

> ID：15801523
> 
> 赞同：7
> 
> 时间：2013-04-04T02:27:35.553
> 
> 标签：python, google-app-engine, tasklet

从[文档](https://developers.google.com/appengine/docs/python/ndb/async#tasklets)：

> NDB tasklet 是一段可能与其他代码同时运行的代码。如果您编写一个 tasklet，您的应用程序可以像使用异步 NDB 函数一样使用它：它调用返回 Future 的 tasklet；稍后，调用 Future 的 get_result() 方法得到结果。

文档中的解释和示例对我来说真的很神奇。我可以使用它，但很难正确理解它。

例如：

1.  我可以在函数中放入任何类型的代码并将其装饰为 ndb.tasklet 吗？然后稍后将其用作异步功能。还是一定是appengine RPC？
2.  这种装饰器是否也适用于我的电脑？
3.  [和pypy的tasklet](http://doc.pypy.org/en/latest/stackless.html)一样吗

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-06T18:32:49.663

如果您查看 Future 的实现，它与 python 中的生成器非常相似。事实上，它使用相同的`yield`关键字来实现它所说的功能。阅读[tasklets.py 上的介绍性评论以](https://github.com/GoogleCloudPlatform/datastore-ndb-python/blob/master/ndb/tasklets.py)获得一些说明。

当您使用 @tasklet 装饰器时，它会创建一个 Future 并等待包装函数上的值。如果该值是一个生成器，它会将 Future 添加到事件循环中。当您`yield`使用 Future 时，事件循环会运行所有排队的 Future，直到您想要的 Future 准备好。这里的并发性是每个 Future 都将执行其代码，直到它返回（使用`raise ndb.Return(...)`或函数完成）、抛出异常或`yield`再次使用。我想从技术上讲，您可以`yield`在代码中使用来停止执行该函数，以让事件循环继续运行其他期货，但我认为这不会有太大帮助，除非您真的有一个聪明的用例。

要回答您的问题：

1.  技术上是的，但它不会异步运行。当你用@tasklet 装饰一个非屈服函数时，它的Future 值会在你调用该函数时计算和设置。也就是说，当你调用它时，它会贯穿整个函数。如果要实现异步操作，就必须`yield`在做异步工作的东西上。通常在 GAE 中，它会一直运行到 RPC 调用。

2.  如果通过在您的 PC 上工作，您的意思是开发应用服务器是否实现了类似 GAE 的 tasklets/Futures，那么是的，尽管这对于 devappserver2（现在是较新 SDK 中的默认设置）更为准确。实际上，我不是 100% 确定本地 RPC 调用是否会在使用 Futures 时并行运行，但是无论是本地还是生产中，都有一个通过 Futures 的事件循环。如果你想在你的其他非 GAE 代码中使用 Future，那么我认为你最好使用[Python 3.2 的内置 future](http://docs.python.org/3.2/library/concurrent.futures.html)（或者在[这里找到一个 backport](http://code.google.com/p/pythonfutures/)）

3.  有点，这不是一个简单的比较。在此处查看[文档](http://www.disinterest.org/resource/stackless/2.6-docs-html/library/stackless/tasklets.html)。想法有些相同（调度器可以比作事件循环），但低级实现有很大不同。

# python - 如何从只有字符串内容的文本文件中简单地填充 Python3.2 中的字典？

> ID：15801524
> 
> 赞同：1
> 
> 时间：2013-04-04T02:27:37.983
> 
> 标签：python, string, dictionary, python-3.x

如何从只有字符串内容的文本文件中简单地填充 Python 3.2 中的字典？

我是 Python 新手，我正在尝试从仅包含两列的文本文件构建字典，如下所示：

```
First_column        second_column
katab           perfective active 
kutib                 perfective passive 
?aktub            imperfective active 
?uktab           imperfective passive 
ka:tib               participle active 
maktu:b         participle passive
The text file contains thousands of lines. 
```

1.我希望first_column下的单词作为“keys”，second_column下的单词作为“values”，例如

```
dict = {‘katab’ : ‘perfective_active’, ‘kutib’ : ‘perfective_passive’} 
```

请注意，文本文件包含大量格式和转义字符，例如 ''、'\n' 和 '\t'。所以我不希望这些字符出现在字典中。

1.  如何将生成的 dict 写入文件，然后将其导入 Python shell 并搜索给定的键？

这是打印到文本文件的代码：

```
 import sys
        sys.stdout = open("/home/mohammed/seminar/awzan", "a")
        print(perfective_active+"\t perfective_active \n")
        print(perfective_passive+"\t perfective_passive \n")
        print(imperfective_active+"\t imperfective_active \n")
        print(imperfective_passive+"\t imperfective_passive \n")
        print(participle_active+"\t participle_active \n")
        print(participle_passive+"\t participle_passive\n")
        sys.stdout.close() 
```

我真的很感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:34:31.790

从磁盘文件中读取字典：

```
with open('inputfile.txt') as infile:
    d = dict(x.split(None, 1) for x in infile if x.strip()) 
```

要将字典写入磁盘文件：

```
with open('outputfile.txt', 'w') as outfile:
    outfile.write(''.join(' '.join(x) for x in d.iteritems())) 
```

要搜索特定值：

```
stuff = d['bother'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:34:21.273

如果您正在寻找拆分线路的方法。

```
>>> 'katab           perfective active'.split(None, 1)
['katab', 'perfective active'] 
```

将分割线存储到 dict

```
mydict = {}
for line in ifile:
    mydict.update(line.split(None, 1)) 
```

将字典存储到文件

尝试 python pickle 或 cpickle 模块

[http://docs.python.org/2/library/pickle.html](http://docs.python.org/2/library/pickle.html)

# c++ - 从链表中删除节点时出错

> ID：15801525
> 
> 赞同：0
> 
> 时间：2013-04-04T02:28:03.413
> 
> 标签：c++, linked-list

我有：

```
class Node {
   int* vec;
   Node* next;
};

Class LinkedList{
   Node* head;
} 
```

我创建了一个找到要删除的节点的函数：

```
Node* tmp = find("abc"); 
```

我订购了指针并对其进行了调试，一切正常。

现在我必须删除`tmp`，所以我尝试了：

```
delete[] tmp->vec;
delete tmp; // here I get an error window. 
```

为什么？

**这是我的真实代码：**

```
class Show_Time
{
  private:
    string movieCode;
    string movieName;
    string time; //the time of screening the movie.
};

class Time_LinkedList
{
 private:
    class Time_Node
    {
     public:
        Show_Time* data;
        Time_Node* prev;
        Time_Node* next;
     public:
        Time_Node(string movie_code, string movie_name, string time_of_movie); //"Time_Node" constructor
        ~Time_Node();//"Time_Node" destructor
    };
    Time_Node* head; //pointer to the first node in the linkedlist
};

void Time_LinkedList::delete_TimeNode(string movieCode, string time)
{
    Time_Node* tmp = find_Time_Node(movieCode,time);

    // the case that there is one element in the list
    if (tmp->prev == NULL && tmp->next == NULL)
    {
        head = NULL;
    }

    // the case that it's the first element of the list
    else if (tmp->prev == NULL)
    {
        head = tmp->next;
        tmp->next->prev = head;        
    }

    // the case that it's the last element of the list
    else if (tmp->next == NULL)
    {
        tmp->prev->next = NULL;
    }

    // there are element in the left and right of the element
    else
    {
        tmp->prev->next = tmp->next;
        tmp->next->prev = tmp->prev;
    }

    // delete the temp and its data
    delete tmp->data;
    delete tmp;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:55:35.030

因此，根据您的回答，您的问题是您正在做一个`double delete`未定义[的行为](https://stackoverflow.com/questions/9169774/what-happens-in-a-double-delete)。您应该删除`delete data`from`Time_LinkedList::delete_TimeNode`并让析构函数完成它的工作。

# java - 在 Java 中读取和写入 .txt 文件

> ID：15801528
> 
> 赞同：1
> 
> 时间：2013-04-04T02:28:11.003
> 
> 标签：java, file, text

这是我的作业提示：您的程序需要从文本文件中读取信息，而不是使用扫描仪从命令行读取信息。您的程序还需要将消息写入文本文件，而不是在屏幕上显示消息。

我编写并运行了代码，以使用 CLI 进行提示。但是，我完全不知道如何使用文本文件更改代码。有人可以向我解释一下吗？

到目前为止的代码：

```
import java.util.*;

public class parallelArrays {

    public static void main(String[] args) {
       String[] names;
       int[] exam1Grades;
       int[] exam2Grades;
       int n, sum1, sum2;
       double avg1,avg2;

       Scanner kb = new Scanner(System.in);

       // Get the number of students from the user
       System.out.print("Enter # of students:");
       n = kb.nextInt();

       // Allocate the arrays
       names = new String[n];
       exam1Grades = new int[n];
       exam2Grades = new int[n];

       // Input the names and grades
       for (int i=0; i<=names.length-1; i++) {
          System.out.print("Enter name for student #" + (i+1) + ":");
          names[i] = kb.next();
          System.out.print("Enter exam #1 grade:");
          exam1Grades[i] = kb.nextInt();
          System.out.print("Enter exam #2 grade:");
          exam2Grades[i] = kb.nextInt();
       }

       // Add up all the grades (could have been done in the above loop)
       sum1 = 0;
       sum2 = 0;
       for (int i=0; i<=names.length-1; i++) {
          sum1 = sum1 + exam1Grades[i];
          sum2 = sum2 + exam2Grades[i];
       }

       // Calculate and output the averages
       avg1 = sum1/n;
       System.out.println();
       System.out.println("Exam #1 average: " + avg1);

       avg2 = sum2/n;
       System.out.println("Exam #2 average: " + avg2);
       System.out.println();

       // Compare each grade to the average
       for (int i=0; i<=names.length-1; i++) {
       if (exam1Grades[i] > avg1)
           System.out.println("Student " + names[i] + " is above average on exam 1");
           else if (exam1Grades[i] < avg1)
           System.out.println("Student " + names[i] + " is below average on exam 1");
           else
           System.out.println("Student " + names[i] + " is average on exam 1");

       if (exam2Grades[i] > avg2)
           System.out.println("Student " + names[i] + " is above average on exam 2");
           else if (exam2Grades[i] < avg2)
           System.out.println("Student " + names[i] + " is below average on exam 2");
           else
           System.out.println("Student " + names[i] + " is average on exam 2");

       }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:38:37.373

就像@Shobit 之前所说的，将 BufferedWriter 与 FileWriter 结合使用，并使用 write() 和 newLine() 方法，您可以将所需的行插入文件而不是使用 Println。

```
BufferedWriter writer = new BufferedWriter(new FileWriter("path-of-file")); //you don't need to create a File object, FileWriter takes a string for the filepath as well
writer.write("Student number..."); 
writer.writeLine(); //for a new line in the file 
```

当你写完文件后，

```
writer.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:16:42.607

您可以使用 BufferedReader 和 BufferedWriter 在 Java 中读取/写入文件。BufferedReader 构造函数接受一个 FileReader 对象，其构造函数接受一个 File 对象。它看起来像这样：

```
BufferedReader br = new BufferedReader(new FileReader(new File("path-of-file"))); 
```

`readLine()`然后，您可以使用 BufferedReader （或任何其他方法，具体取决于您的用例）从文件中逐行读取。

以此类推，还有 BufferedWriter 和 FileWriter 以及`write()`用于写入的方法。

在读/写之后关闭读写器流始终是一个好习惯。您可以`close`在流上使用该方法来执行相同的操作。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T02:43:16.350

您可以像使用 Scanner 类读取文件名一样使用它。您所要做的就是定义您将如何构建您的文件。例如，用特殊字符分隔您的信息，即：“，”，并将其用作标记来识别文件中的不同字段的名称、等级等（请参阅[Pattern](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)和[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html) APIs 以使用 REGEX）

您可能想要创建一个 Student 类并将所需的字段映射到该类，将它们添加到 List 并更容易地迭代。

至于写入文本文件，你已经在做，检查 FileWriter 看看如何添加一个新行，就是这样。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-18T12:56:53.787

```
 import java.nio.file.path;
    import java.nio.file.paths;
    class FileCopy {
    public static void main(String args[])
    {
    Path sour =Paths.get("Source path");
    Path dest =Paths.get("destination path"); // The new file name should be given  

    or else FileAlreadyExistsException occurs.                                            

    Files.copy(sour, dest);
    }
    } 
```

# objective-c - *和^之间的Objective C区别

> ID：15801529
> 
> 赞同：0
> 
> 时间：2013-04-04T02:28:28.257
> 
> 标签：objective-c

我正在学习目标 C。

`*`只是想知道和之间的区别`^`。

我知道`*`是指指向内存对吗？

```
NSString *test = [[NSString alloc] init]; 
```

但是今天我遇到了这个`^`符号。谁能帮忙解释一下好吗？

```
-(void) sort
{
    [book sortUsingComparator:
    ^(id obj1, id obj2) {
        return [obj1 compareNames: obj2];
    } ];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T02:33:45.750

`*`用于普通的旧 c 指针。 `^`用于块（proc、闭包、lambda）。具体来说，Objective-C 中的块被实现为闭包。

`^`本质上是一个函数指针，具有一些与作用域相关的副作用，可以区分复制必要的对象和原语，以便在调用块（函数）时，块中的变量是外部作用域中的变量的副本，其中该块已定义。

在 Objective-C 中，块是一个非常大且有些复杂的主题。[您可以在此处](http://ios-blog.co.uk/tutorials/programming-with-blocks-an-overview/)找到非常简明的概述。

可以在 Apple 的文档中找到 BIG 全面[的](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithBlocks/WorkingwithBlocks.html)内容。

编辑：

在你的具体例子中......

```
-(void) sort
{
    [book sortUsingComparator:
    ^(id obj1, id obj2) {
        return [obj1 compareNames: obj2];
    } ];
} 
```

该方法`sortUsingComparator:`将匿名块作为参数。简化的块签名是`^(id obj1, id obj)`. 简化的意思是，由于返回类型是`void`，所以可以省略。这个例子让很多人感到困惑的是，该块实际上是内联定义的，就在方法调用的中间。

如果块首先使用描述性名称声明，然后像任何其他 c 函数一样定义，然后在方法调用中使用*名称*，则此代码将更易于阅读。但是，似乎大多数开发人员不这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T02:32:56.787

`^`与Objective-C中的块有关。看看[文档](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html#//apple_ref/doc/uid/TP40007502-CH7-SW1)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T02:32:05.393

`*`用于指针和乘法。

```
NSString *test = [[NSString alloc] init]; 
```

这`test`是一个指向`NSString`.

* * *

```
^(id obj1, id 
```

`^`用于[创建](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Block.html)[块](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html#//apple_ref/doc/uid/TP40007502-CH7-SW1)。_

* * *

**如果您熟悉 C/C++，那么：**

这是一个 C 函数指针声明...

```
 void (*func)(void); 
```

这是一个块声明......

```
 void (^block)(void); 
```

# jquery - 到达 div 时更改 ul 样式

> ID：15801530
> 
> 赞同：0
> 
> 时间：2013-04-04T02:28:33.350
> 
> 标签：jquery, css, html, scroll

我想在滚动时更改 ul 样式并使用 jQuery 到达 div，向下解释。

CSS：

```
#menu {
    background-color:#ccc;
    position:fixed;
    width:100%;
}

.menutext {
    padding:25 40 30 !important;
    display:inline-block;
}

.menutext2 {
    padding:25 40 0 !important;
    display:inline-block;
    color:red;
}

.alldivs {
    width:300px;
    height:200px;
    background-color:a9a9a9;
} 
```

HTML 代码：

```
<div id="menu">
    <div class="menutext">Change the style of me to .mebutext2 on arriving to DIV1</div>
    <div class="menutext">Change the style of me to .mebutext2 on arriving to DIV2</div>
    <div class="menutext">Change the style of me to .mebutext2 on arriving to DIV3</div>
</div>

<br><br><br>

<div class="alldivs"><div id="DIV1">DIV1</div></div>
<br><br><br><br>
<div class="alldivs"><div id="DIV2">DIV2</div></div>
<br><br><br><br>
<div class="alldivs"><div id="DIV3">DIV3</div></div>
<br><br><br><br> 
```

我想在滚动并到达div顶部时将具有“menutext”类的div更改为“menutext2”类（第一个ul的类从menutext1更改为menutext2在到达具有id DIV1的div时，第二个ul的类更改从menytext1 到menutext2 到达具有id DIV2 的div 并且第一个ul 的类返回到menutext1 原样，依此类推。

# ios - '使用 NSPredicate 的 predicateWithFormat 时无法解析格式字符串“function == %@”'：

> ID：15801537
> 
> 赞同：0
> 
> 时间：2013-04-04T02:28:55.170
> 
> 标签：ios, objective-c, nspredicate

我正在尝试`NSArray`通过 ' `function`' 属性搜索。我在控制台上打印数组时的输出如下：

```
<__NSArrayI 0xa523b40>(
{
    category = "010-T";
    description = "<h3>Opleidingen</h3>";
    function = "T-r";
    name = "Michal Jordan";
    photo = "http://dws.com/34.jpg";
},
{
    category = "010-T";
    description = "abcd";
    function = "AB";
    name = "Pvt MSK";
    photo = "http://test.com/3.jpg";
},
{
    category = "010-T";
    description = "def";
    function = "T-r";
    name = "Sanu M";
    photo = "http://abc.com/1.jpg";
}
) 
```

此代码按“ `category`”搜索，有效：

```
NSString *categoryStr = @"010-T";
NSArray *arr = [NSArray arrayWithArray:[myarr filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"category == %@",categoryStr]]]; 
```

但是当我尝试使用以下代码（按 搜索`function`）时，抛出了异常：

```
NSString *functionStr = @"T-r";
NSArray *arr = [NSArray arrayWithArray:[myarr filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"function == %@",functionStr]]]; 
```

例外是：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Unable to parse the format string "function == %@"' 
```

所以在这里看来，这`function`是一个保留关键字。

我尝试了以下代码，`function`用单引号括起来，但结果是`arr`有 0 个对象。

```
NSArray *arr = [NSArray arrayWithArray:[myarr filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"'function' == %@",functionStr]]]; 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:05:26.737

Apple 的[谓词编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/predicates.html#//apple_ref/doc/uid/TP40001789)指出“Cocoa 中的谓词表达式由 NSExpression 的实例表示”。请注意，它`NSExpression`提供了一种可以通过`FUNCTION`关键字调用方法调用的语法。[文档](http://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/Classes/NSExpression_Class/Reference/NSExpression.html)将语法定义为`FUNCTION(receiver, selectorName, arguments, ...)`. 虽然我在任何文档中都找不到对此的引用，但似乎此功能不包括在其他上下文中使用字面量词函数。

幸运的是，您可以使用`%K`格式说明符以另一种方式构建谓词格式字符串，该说明符用于键名。例如，`[NSPredicate predicateWithFormat:@"%K == %@", @"function", @1]`不会抛出异常并且会正常工作。在以下代码中查看它的实际效果：

```
 NSDictionary *dict1 = @{@"otherKey": @1, @"function" : @2};
    NSDictionary *dict2 = @{@"otherKey": @2, @"function" : @1};
    NSArray *array = @[dict1, dict2];
    NSPredicate *otherKeyPredicate = [NSPredicate predicateWithFormat:@"%K == %@",@"otherKey", @1];
    NSArray *filteredByOtherKey = [array filteredArrayUsingPredicate:otherKeyPredicate];
    NSPredicate *functionPredicate = [NSPredicate predicateWithFormat:@"%K == %@", @"function", @1];
    NSArray *filteredByFunction = [array filteredArrayUsingPredicate:functionPredicate];
    NSLog(@"filteredByOtherKey = %@", filteredByOtherKey);
    NSLog(@"filteredByFunction = %@", filteredByFunction); 
```

我们在控制台上得到以下输出：

```
filteredByOtherKey = (
        {
        function = 2;
        otherKey = 1;
    }
)
filteredByFunction = (
        {
        function = 1;
        otherKey = 2;
    }
) 
```

以这种方式构建你的谓词可能会稍微多一些工作，但会在未来防止这些类型的冲突。一个好的做法是将格式字符串限制为仅包含格式说明符和谓词语法，在运行时最终确定谓词的表达式字符串。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T06:13:01.137

```
NSString *functionStr = @"T-r";
NSArray *arr = [myarr filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(function == %@)",functionStr]];

Here myarr is NSMutableArray.
Try with this code. 
```

# javascript - JavaScript 中的高效方法

> ID：15801542
> 
> 赞同：0
> 
> 时间：2013-04-04T02:29:32.203
> 
> 标签：javascript, jquery

嗨，如何多次使用一个方法而不在 JavaScript 中重复和创建另一个方法。因为我所做的是我创建了一个具有相同字段和代码的方法，但唯一的区别是 id。我需要每个方法的一个参数，即 id。

```
function enemyGet() {

    new enemyMove2()
    new enemyMove()
    new enemyMove3()
}

  function enemyMove2() {

    var enemyimage = document.getElementById("enemy");
        var leftenemy = parseInt(enemyimage.style.left);
        var topenemy = parseInt(enemyimage.style.top);
        var time = setTimeout("enemyMove2()", 20)

        if (leftenemy < leftplayer) {
            leftenemy = leftenemy + 5;

        }
        if (leftenemy > leftplayer) {
            leftenemy = leftenemy - 5;

        }

        if (topenemy < topplayer) {
            topenemy = topenemy + 5;
        }
        if (topenemy > topplayer) {
            topenemy = topenemy - 5;
        }

        enemyimage.style.left = leftenemy + "px";
        enemyimage.style.top = topenemy + "px";

        var hit_list = $("#x").collision(".lollol");
        hit_list.remove();

}

function enemyMove() {

    var enemyimage = document.getElementById("enemy2");
    var leftenemy = parseInt(enemyimage.style.left);
    var topenemy = parseInt(enemyimage.style.top);
    var time = setTimeout("enemyMove()", 20)

    if (leftenemy < leftplayer) {
        leftenemy = leftenemy + 5;

    }
    if (leftenemy > leftplayer) {
        leftenemy = leftenemy - 5;

    }

    if (topenemy < topplayer) {
        topenemy = topenemy + 5;
    }
    if (topenemy > topplayer) {
        topenemy = topenemy - 5;
    }

    enemyimage.style.left = leftenemy + "px";
    enemyimage.style.top = topenemy + "px";

    var hit_list = $("#x").collision(".lollol");
    hit_list.remove();

}

function enemyMove3() {

    var enemyimage = document.getElementById("enemy3");
    var leftenemy = parseInt(enemyimage.style.left);
    var topenemy = parseInt(enemyimage.style.top);
    var time = setTimeout("enemyMove3()", 20)

    if (leftenemy < leftplayer) {
        leftenemy = leftenemy + 5;

    }
    if (leftenemy > leftplayer) {
        leftenemy = leftenemy - 5;

    }

    if (topenemy < topplayer) {
        topenemy = topenemy + 5;
    }
    if (topenemy > topplayer) {
        topenemy = topenemy - 5;
    }

    enemyimage.style.left = leftenemy + "px";
    enemyimage.style.top = topenemy + "px";

    var hit_list = $("#x").collision(".lollol");
    hit_list.remove();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T02:33:37.003

使用参数：

```
function enemyGet() {
    // pass the id as a argument to the function
    enemyMove("enemy2")
    enemyMove("enemy")
    enemyMove("enemy3")
}

function enemyMove(enemy) {
    // the variable enemy is the id passed as an argument to the function 
    var enemyimage = document.getElementById(enemy);
        var leftenemy = parseInt(enemyimage.style.left);
        var topenemy = parseInt(enemyimage.style.top);
        // Pass the parameter in timeout as well. You have access to enemy variable due to concept of closure
        var time = setTimeout(function(){enemyMove(enemy)}, 20)

        if (leftenemy < leftplayer) {
            leftenemy = leftenemy + 5;

        }
        if (leftenemy > leftplayer) {
            leftenemy = leftenemy - 5;

        }

        if (topenemy < topplayer) {
            topenemy = topenemy + 5;
        }
        if (topenemy > topplayer) {
            topenemy = topenemy - 5;
        }

        enemyimage.style.left = leftenemy + "px";
        enemyimage.style.top = topenemy + "px";

        var hit_list = $("#x").collision(".lollol");
        hit_list.remove();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T02:31:46.887

在这种情况下，您可以参数化调用之间变化的值。

您可以将变量`id`作为参数传递给该`enemyMove`方法。

```
function enemyMove(id) {

    var enemyimage = document.getElementById(id);
    var leftenemy = parseInt(enemyimage.style.left);
    var topenemy = parseInt(enemyimage.style.top);
    var time = setTimeout(function(){
        enemyMove(id);
    }, 20)

    if (leftenemy < leftplayer) {
        leftenemy = leftenemy + 5;

    }
    if (leftenemy > leftplayer) {
        leftenemy = leftenemy - 5;

    }

    if (topenemy < topplayer) {
        topenemy = topenemy + 5;
    }
    if (topenemy > topplayer) {
        topenemy = topenemy - 5;
    }

    enemyimage.style.left = leftenemy + "px";
    enemyimage.style.top = topenemy + "px";

    var hit_list = $("#x").collision(".lollol");
    hit_list.remove();

} 
```

然后

```
function enemyGet() {

    new enemyMove('enemy')
    new enemyMove('enemy2')
    new enemyMove('enemy3')
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T02:36:49.190

您可以使用方括号表示法来引用该函数：

```
// Store reference to global object for use wherever
var global = this;

...
  var n = 3;

  // Call method based on value of n
  global['enemyMove' + n](); 
```

...

您可以将您的函数属性（方法）设置为全局/窗口对象以外的某个对象。

# macos - 在 OSX 中创建 firebird 嵌入式数据库的权限被拒绝错误

> ID：15801548
> 
> 赞同：6
> 
> 时间：2013-04-04T02:29:48.880
> 
> 标签：macos, firebird

首先，我不是 100% 确定我使用的是 OSX 下的嵌入式 firebird 客户端。我从 firebirdsql.org 下载的安装文件表明它包含 Classic、Superclassic 和 Embedded。与 Windows 版本不同，包中似乎没有专用的嵌入式库文件。我假设`libfbclient.dylib`（`libgds.dylib`为我的使用而重命名）可以用作嵌入式。如果我错了，那么我想这就是问题所在。有人能告诉我在哪里得到嵌入的 dylib 文件吗？

如果 libfbclient.dylib 也用于嵌入式使用，那么我的问题仍然存在。当我第一次尝试创建数据库文件时，它失败并显示“权限被拒绝”。我正在尝试在用户文档文件夹中创建此文件。我正在使用 Delphi 中的 Interbase Express 组件进行连接。这在 windows 环境下为我服务了多年。

完整的错误信息是...
`Exception class EIBInterBaseError with message 'I/O error during "open O_CREAT" operation for file '/Users/martin/Documents/LightFactoryShows/default.fdb" Error while trying to create file Permission denied'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T01:43:10.610

解决了！多次重读此文档后，我终于明白了： [http ://www.ibphoenix.com/resources/documents/how_to/doc_103](http://www.ibphoenix.com/resources/documents/how_to/doc_103)

OSX 下的嵌入式库与 windows 中的 exe 相同。在 /Library/Framworks/Firebird.framework 文件夹中有一个名为“Firebird”的可执行文件。我不明白的关键文本是“将 Firebird 文件重命名为 libfbembed.dylib”。我的 Windows 体验让我大吃一惊，因为在 Windows 中，您永远不会将 .exe 重命名为 .dll。我不知道它是否可能在 Windows 中，但我从来没有关注过它。

我需要做一些更琐碎的事情，这里是完整的说明。

1) 将“Firebird”{executable} 链接到 /usr/local/lib/libgds.dylib

```
ln -s /Library/Frameworks/Firebird.framework/Firebird /usr/local/lib/libgds.dylib 
```

2) 链接 firebird.msg 文件，使其出现在 /usr/local/lib 文件夹中

```
ln -s /Library/Frameworks/Firebird.framework/Versions/A/Resources/English.lproj/var/firebird.msg /usr/local/lib/firebird.msg 
```

3) 将“security2.fdb”复制到/usr/local/lib 文件夹并更改其权限以授予写入权限。无法链接到该文件。

```
cp /Library/Frameworks/Firebird.framework/Versions/A/Resources/English.lproj/var/security2.fdb /usr/local/lib
chmod 777 /usr/local/lib/security2.fdb. 
```

# r - 过滤矩阵列时保留列名

> ID：15801550
> 
> 赞同：8
> 
> 时间：2013-04-04T02:30:09.607
> 
> 标签：r, matrix

我有一个矩阵，就像用这段代码生成的一样：

```
> m = matrix(data=c(1:50), nrow= 10, ncol = 5);
> colnames(m) = letters[1:5]; 
```

如果我过滤列，并且结果包含多于一列，则新矩阵会保留名称。例如：

```
> m[, colnames(m) != "a"];

       b  c  d  e
 [1,] 11 21 31 41
 [2,] 12 22 32 42
 [3,] 13 23 33 43
 [4,] 14 24 34 44
 [5,] 15 25 35 45
 [6,] 16 26 36 46
 [7,] 17 27 37 47
 [8,] 18 28 38 48
 [9,] 19 29 39 49
[10,] 20 30 40 50 
```

请注意，这里的类仍然是矩阵：

```
> class(m[, colnames(m) != "a"]);
[1] "matrix" 
```

但是，当过滤器只允许一列时，结果是一个向量（在这种情况下是整数向量），并且列名会丢失。

```
> m[, colnames(m) == "a"]
[1]  1  2  3  4  5  6  7  8  9 10

> class(m[, colnames(m) == "a"]);
[1] "integer" 
```

列的名称非常重要。

我想保留矩阵结构（一列矩阵）和列名。

但是，列的名称更重要。

我已经知道如何长期解决这个问题（通过跟踪每个案例）。我想知道是否有一个优雅的、有启发性的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T02:42:49.797

你需要设置`drop = FALSE`. 这是编程使用的好习惯

> ## 降低
> 
> 对于矩阵和数组。如果为 TRUE，则结果被强制转换为可能的最低维度（参见示例）

```
m[,'a',drop=FALSE] 
```

这也将保留名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T02:46:29.827

您还可以使用`subset`：

```
m.a = subset(m, select = colnames(m) == "a") 
```

# eclipse - 在 Eclipse 中的 EJB 中调试 Drools

> ID：15801554
> 
> 赞同：2
> 
> 时间：2013-04-04T02:30:46.893
> 
> 标签：eclipse, ejb, drools

我目前正在调试一个 Web 应用程序，它使用 EJB 中的 drools 规则集来处理业务规则。它部署在 JBoss 服务器内。我已经将 eclipse 配置为运行服务器，因此我可以使用 eclipse 的服务器上的调试功能。

当我到达触发 drools 规则集的类时，服务器失去焦点并在触发所有规则后返回。有没有办法可以追踪正在触发的规则？现在，我所做的是将日志放在 *.drl 文件中，这样我就知道应用程序在规则引擎中的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:35:02.450

当您将名为 drools.packagebuilder.conf 的文件添加到您的 %USERHOME% 目录时，您可以获得任何规则的生成的 java 源代码。该文件必须包含以下说明：

drools.dump.dir = d:/myDroolsJavaSourceCode

目录 d:/myDroolsJavaSourceCode - 目录（或任何其他给定名称）必须存在，否则 Drools Packagebuild 将停止执行。

然后您可以将此目录作为新项目添加到您的 Eclipse 环境中（可能您必须删除标志“默认位置”以选择“myDroolJavaSourceCode”）。然后您可以在 Eclipse 中打开该文件并在编辑器中设置断点。

可能你必须在调试执行期间附加目录两次。

最好的祝福！

克里斯托夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:08:09.420

据我所知，您无法调试 drl 文件。我们所做的是将 when 和 then 的逻辑封装在一个方法中，这样你至少可以调试它。

麦迪

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T06:55:08.073

我所做的是我下载了 drools-engine 的源代码并将 drl 文件编译到它们的 java 源代码中。运行应用程序时，您可以选择在断点到达引擎时附加源。仍然很难跟踪触发的规则（可以触发来自不同 drl 的多个规则），但它比仅 sysout 日志记录要好。

# ios - 支持可移动点的iOS库（折线图）

> ID：15801558
> 
> 赞同：2
> 
> 时间：2013-04-04T02:30:59.063
> 
> 标签：ios, frameworks, charts, core-plot

我是 iOS 和图表相关的新手。我想为 iOS 创建一个折线图，允许用户根据需要自定义点。例如，用户可以拖动 Y 轴上的点。

我发现有一个开源库 Core-Plot 可能能够创建类似于示例链接的折线图。但我不太确定，也找不到任何明确的解释和示例项目。所以我想在这里问一下，是否可以将 Core-Plot 用于此类任务，如果可能，请提供任何可用于此目的的示例函数/代码。

请建议是否有任何库（商业或开源）可以执行此类任务。我查找并找到（商业）ShinobiChart 和 Acollada iOS Charting 但不确定是否可以执行此类任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T02:54:01.647

我希望以下链接对您有所帮助。

核心情节示例代码：

[http://tech.pro/tutorial/939/using-core-plot-in-an-iphone-application](http://tech.pro/tutorial/939/using-core-plot-in-an-iphone-application)

[饼形图](http://www.raywenderlich.com/13269/how-to-draw-graphs-with-core-plot-part-1)

[http://www.johnwordsworth.com/2011/10/adding-charts-to-your-iphone-ipad-app-using-core-plot/](http://www.johnwordsworth.com/2011/10/adding-charts-to-your-iphone-ipad-app-using-core-plot/)

[http://www.gilthonwe.com/2012/06/09/stacked-bar-chart-coreplot-ios/](http://www.gilthonwe.com/2012/06/09/stacked-bar-chart-coreplot-ios/)

# ant - Ant获取运行时获取的某个参数的值

> ID：15801559
> 
> 赞同：1
> 
> 时间：2013-04-04T02:31:02.373
> 
> 标签：ant

我有一个 Ant 构建任务，我需要根据我在运行时获得的值来查找属性文件。例如，我在属性文件中有以下信息

```
COMPLETE_LIST=TEST1,TEST2,TEST3
TEST1=val1
TEST2=val2
TEST3=val3 
```

在我的 Ant 目标中，我有以下任务。

```
<target name="target_main">
    <foreach param="profile_name" list="${COMPLETE_LIST}" target="target_child">
    </foreach>
</target>

<target name="target_child">
<echo>Printing the value of the param passed ${${profile_name}}</echo>
</target> 
```

但这不起作用。有没有办法获取`TEST1`作为参数传递的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:53:44.267

由于您已经在使用[ant-contrib](http://ant-contrib.sourceforge.net/tasks/index.html)，[propertycopy](http://ant-contrib.sourceforge.net/tasks/tasks/propertycopy.html)任务将帮助您做您想做的事。这是`target_child`修改后的正文以适合您的目的：

```
<target name="target_child">
  <propertycopy name="value" from="${profile_name}"/>
  <echo>Printing the value of the param passed ${${profile_name}}</echo>
</target> 
```

输出：

```
target_main:

target_child:
     [echo] Printing the value of the param passed val1

target_child:
     [echo] Printing the value of the param passed val2

target_child:
     [echo] Printing the value of the param passed val3 
```

# opencv - 在 OpenCV 中的图像上放置标记

> ID：15801573
> 
> 赞同：0
> 
> 时间：2013-04-04T02:32:56.360
> 
> 标签：opencv

我正在使用`cv::imshow("binary1", binary1);`. 我想在图像上放置一个标记以检查像素位置。如何在图像上放置特定行和列值的标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:54:01.087

很难理解你想要做什么，但我不久前写了一个代码，它[显示像素的 RGB 颜色以及它在窗口标题上的坐标](https://stackoverflow.com/a/14918425/176769)。将鼠标指针移到图像上，您会看到它发生了变化。

不过，它使用 Qt 窗口。您可以检查[cvImage](https://github.com/karlphillip/GraphicsProgramming/tree/master/cvImage)。

# hadoop - Hadoop 灾难恢复

> ID：15801584
> 
> 赞同：-2
> 
> 时间：2013-04-04T02:34:32.940
> 
> 标签：hadoop, recovery

任何人都可以帮助我了解 Hadoop 灾难恢复吗？

我应该将数据从集群复制到另一个集群作为备份使用 distcp 吗？或者我可以使用 copyToLocal 将我的数据复制到我的本地机器？

有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T07:54:20.157

DRP plan goes beyond just the technology and the requirements can greatly affect the solution.

for instance if you can't afford to lose any data you'd want an active/active setup and send data to two hadoop clusters simultaneously. on the other side of the spectrum hadoop's replication (default is 3 copies but you can change that) and rack awareness can give you a copy on a secondary rack. In between you can use things like distcp that you mention to copy data from cluster to cluster.

Additionally you might want to follow [project falcon](http://hortonworks.com/blog/project-falcon-tackling-hadoop-data-lifecycle-management-via-community-driven-open-source/) which is a new initiative for hadoop data life-cycle management

# sql - SQL 内连接 3 个表

> ID：15801591
> 
> 赞同：0
> 
> 时间：2013-04-04T02:35:34.187
> 
> 标签：sql

这是我第一次在这里发帖。我正在使用以下关系模式创建 SQL 数据库

* * *

作者（Author_ID、Author_Name、Author_Address）

网站（Website_ID、Web_Name、Server_Capacity、ISP）

COMIC（Comic_ID、Comic_Name、Comic_Date、Author_ID、Website_ID）

```
FK Author_ID → AUTHOR (not Null), (not Unique)
               Delete: C, Update: C

FK Website_ID → WEBSITE (not Null), (not Unique)
               Delete: C, Update: C 
```

ISSUE（Issue_ID、Issue_Name、Issue_Date、Comic_ID）

```
FK Comic_ID → COMIC (not Null), (not Unique)
             Delete: C, Update: C 
```

产品（Product_ID、Product_Name、Product_Cost、Comic_ID、Vendor_ID）

FK Comic_ID → COMIC (not Null), (not Unique) Delete: C, Update: C

```
 FK Vendor_ID → VENDOR (not Null), (not Unique)
                         Delete: C, Update: C 
```

供应商（供应商 ID、供应商名称、供应商地址、网站 ID）

```
FK Website_ID → WEBSITE (Null), (not Unique)
                     Delete: N, Update: C 
```

合同（Contract_ID、Contract_Date、Author_ID、Vendor_ID）

```
FK Author_ID → AUTHOR (not Null), (not Unique)
               Delete: C, Update: C

FK Vendor_ID → VENDOR (not Null), (not Unique)
                   Delete: C, Update: C 
```

* * *

我知道这很多，但这里有一个特定的问题；我需要创建几个将 INNER JOIN 3 个表放在一起的查询。现在，这是我创建的查询情况之一。

“列出同时托管漫画和供应商的每个网站的名称”，我已向其中写入以下查询：

* * *

从网站中选择 Web_Name

内部加入漫画 on Website.Website_ID = Comic.Website_ID

在 Website.Website_ID 上的 INNER JOIN 供应商 = Vendor.Website_ID;

* * *

此查询是否正确使用 3 个表的 INNER JOIN？查询情况是否应该改为“列出共享网站的每个漫画和供应商的名称？” 当涉及到内部和外部联接时，我有点迷茫，所以我在涉及它们的查询时遇到了麻烦。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:52:48.330

您的查询将返回包含漫画和供应商的每个网站。. . 但多次。解决它的一种方法是添加`distinct`：

```
SELECT distinct w.Web_Name
FROM Website w INNER JOIN
     Comic c
     on w.Website_ID = c.Website_ID inner join
     Vendor v
     on w.Website_ID = w.Website_ID; 
```

我还为您的表添加了别名，因为它使查询更具可读性。

有其他方法可以做到这一点。这是一种方法：

```
select w.WebName
from Website w
where w.Website_Id in (select WebSite_Id from Comics) and
      w.Website_In in (select WebSite_Id from Vendor) 
```

这就是说：在有漫画的网站列表和有供应商的网站列表中，把网站所在的所有网站名称都给我。

# javascript - 这个语法怎么模棱两可？

> ID：15801592
> 
> 赞同：4
> 
> 时间：2013-04-04T02:35:36.113
> 
> 标签：javascript, parsing, bison, parser-generator, jison

我正在 Jison 中编写一个简单的表达式解析器。这是我的语法：

```
{
    "operators": [
        ["left", "+", "-"],
        ["left", "*", "/", "%"]
    ],
    "bnf": {
        "program": [
            ["statement EOF", "return $1;"]
        ],
        "statement": [
            ["expression NEWLINE", "$$ = $1 + ';';"]
        ],
        "expression": [
            ["NUMBER",                       "$$ = yytext;"],
            ["expression binary expression", "$$ = $1 + $2 + $3;"]
        ],
        "binary": [
            ["+",              "$$ = ' + ';"],
            ["-",              "$$ = ' - ';"],
            ["*",              "$$ = ' * ';"],
            ["/",              "$$ = ' / ';"],
            ["%",              "$$ = ' % ';"],
            ["binary NEWLINE", "$$ = $1;"]
        ]
    }
} 
```

当我尝试运行它时，它给了我以下错误：

```
Conflict in grammar: multiple actions possible when lookahead token is + in state
13
- reduce by rule: expression -> expression binary expression
- shift token (then go to state 8)
Conflict in grammar: multiple actions possible when lookahead token is - in state
13
- reduce by rule: expression -> expression binary expression
- shift token (then go to state 9)
Conflict in grammar: multiple actions possible when lookahead token is * in state
13
- reduce by rule: expression -> expression binary expression
- shift token (then go to state 10)
Conflict in grammar: multiple actions possible when lookahead token is / in state
13
- reduce by rule: expression -> expression binary expression
- shift token (then go to state 11)
Conflict in grammar: multiple actions possible when lookahead token is % in state
13
- reduce by rule: expression -> expression binary expression
- shift token (then go to state 12)

States with conflicts:
State 13
  expression -> expression binary expression . #lookaheads= NEWLINE + - * / %
  expression -> expression .binary expression
  binary -> .+
  binary -> .-
  binary -> .*
  binary -> ./
  binary -> .%
  binary -> .binary NEWLINE 
```

但是，它最终仍然会产生正确的输出。例如`2 + 3 * 5 / 7 % 11`正确翻译为`2 + 3 * 5 / 7 % 11;`.

在我看来，我的语法似乎是明确的，那么为什么 Jison 会抱怨呢？

**更新：**正如@icktoofay 解释的那样，这是一个运算符关联性问题。通过将运算符解析为非终结符号运算符优先级和关联性信息会丢失。因此，我解决了以下问题：

```
{
    "operators": [
        ["left", "+", "-"],
        ["left", "*", "/", "%"]
    ],
    "bnf": {
        "program": [
            ["statement EOF", "return $1;"]
        ],
        "statement": [
            ["expression NEWLINE", "$$ = $1 + ';';"]
        ],
        "expression": [
            ["NUMBER",                          "$$ = yytext;"],
            ["expression + expression",         "$$ = $1 + ' + ' + $3;"],
            ["expression - expression",         "$$ = $1 + ' - ' + $3;"],
            ["expression * expression",         "$$ = $1 + ' * ' + $3;"],
            ["expression / expression",         "$$ = $1 + ' / ' + $3;"],
            ["expression % expression",         "$$ = $1 + ' % ' + $3;"],
            ["expression + NEWLINE expression", "$$ = $1 + ' + ' + $4;"],
            ["expression - NEWLINE expression", "$$ = $1 + ' - ' + $4;"],
            ["expression * NEWLINE expression", "$$ = $1 + ' * ' + $4;"],
            ["expression / NEWLINE expression", "$$ = $1 + ' / ' + $4;"],
            ["expression % NEWLINE expression", "$$ = $1 + ' % ' + $4;"]
        ]
    }
} 
```

话虽如此，该语法只允许一个可选的换行符跟随二元运算符。如何重写它以允许任意数量的换行符跟随二元运算符？此外，必须有某种方式我不必为每个运算符编写 2 条规则。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T03:04:09.810

我对 Jison 并不完全熟悉，但看起来您正在定义一个如下所示的规则：

```
expression ::= number;
expression ::= expression binary expression; 
```

考虑表达式`1 - 2 - 3`。这可以解释为`(1 - 2) - 3`或`1 - (2 - 3)`。它是哪一个？你的语法模棱两可。正常的数学规则说它应该是左结合的。你需要让你的语法反映出来：

```
expression ::= number;
expression ::= expression binary number; 
```

# mysql - mysql 查询以删除数据库中的部分 URL

> ID：15801596
> 
> 赞同：0
> 
> 时间：2013-04-04T02:35:55.393
> 
> 标签：mysql, url

我有一个几乎完全一样的问题：

[http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/Q_27928324.html](http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/Q_27928324.html)

我不打算将我的信用卡信息提供给网站以找到此问题的答案。

在我的名为“产品”的表中，我的数据库中名为“图像”的列中有大约 7000 行，每行都有以 .jpeg 结尾的图像的文件路径。有些图像名称是 234234_15.jpeg，有些是 wdcaas_ad_3_15_mmm.jpeg 等。但每个图像的文件结构不同。

我需要制作一个脚本来更新所有行并只保留图像名称。最好我最终想用文件夹/data/替换所有文件结构，并有一个/data/imagename.jpeg的例子

我发现这个[删除部分字符串，包括使用 MySQL 从字符串中的特定字符](https://stackoverflow.com/questions/5551272/to-remove-a-character-from-a-string-in-mysql)，它可能有帮助吗？我不确定如何使用它。

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:06:35.823

您可以使用`reverse`. . .

```
select reverse(substring_index(reverse(image), '/', 1)) 
```

如果您想实际更新值。. .

```
update t
    set image = reverse(substring_index(reverse(image), '/', 1)) 
```

要在前面添加“数据/”，请使用 concat：

```
update t
    set image = concat('data/', reverse(substring_index(reverse(image), '/', 1))) 
```

# linux - Shell 脚本：将作为变量传递的目录复制到另一个目录，也作为用户传递的变量

> ID：15801599
> 
> 赞同：1
> 
> 时间：2013-04-04T02:36:09.050
> 
> 标签：linux, shell, copy, cp

SHELL SCRIPT：如何将用户作为变量传递的目录复制到另一个目录也作为变量？

我的意思是，用户键入源目录和目标。因此，目录中的文件被复制到另一个目录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T02:39:11.060

```
if cp -R "$source" "$destination"
then echo "Copy successful :)"
else echo "Copy failed :("
fi 
```

指定它应该递归复制目录的`-R`选项。应该包含原始目录，并且应该包含您想要复制它的位置。`cp``$source``$destination`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:41:21.840

如果你想做这样的事情：

```
$ ./script.sh file1.ext file2.ext 
```

`script.sh`可能是：

```
#!/bin/bash
cp -rv "$0" "$1" 
```

希望能帮助到你。

# html - 在最小高度 div 内垂直对齐单行文本

> ID：15801600
> 
> 赞同：5
> 
> 时间：2013-04-04T02:36:20.460
> 
> 标签：html, css, positioning, vertical-alignment

我有一个特定的类，`div`它在左上角包含一个图标作为背景图像，并在`div`. 最小高度为 32px ，`div`以便显示所有图标。

当有多行文本时，这些行看起来很好，因为它们`div`向下延伸的长度超过了最小高度，但是当只有一行时，它与图标的中心不垂直对齐。

[JSFiddle 在这里](http://jsfiddle.net/eXZnH/15/)。

有没有办法让单行垂直对齐，但在多行时不会弄乱？

```
.test {
    background-color: #98c5ff;
    color: #093d80;
    width: 400px;
    min-height: 32px;
    background-image: url("http://google.com/favicon.ico");
    background-repeat: no-repeat;
    padding-left: 42px;
}
```

```
<div class="test"><p>Short message</p></div>
<hr />
<div class="test"><p>Rather long message that should hopefully wrap on to a second line at some point.</p></div>
<hr />
<div class="test"><p>Message<br />with<br />many<br />lines<br />.</p></div>
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T02:39:28.613

您可以`display`像这样在您的 CSS 中使用：

```
.test {
    background-color: #999999;
    display: table; /* Add this in here. */
    width: 400px;
    min-height: 32px;
    background-image: url("http://google.com/favicon.ico");
    background-repeat: no-repeat;
    padding-left: 42px;
}

.test p {
    display: table-cell;
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-05T22:18:57.457

`display:flex`也是一个选项`.test`。

如果`.test`持有一个，`p`那么`margin:auto 0;`应该就足够了：

[http://jsfiddle.net/eXZnH/35/](http://jsfiddle.net/eXZnH/35/) 编辑：（固定小提琴）[http://jsfiddle.net/eXZnH/36/](http://jsfiddle.net/eXZnH/36/)

```
.test {
  background-color: #98c5ff;
  color: #093d80;
  width: 400px;
  min-height: 32px;
  background-image: url("http://google.com/favicon.ico");
  background-repeat: no-repeat;
  padding-left: 42px;
  display: flex;/* added */
}
p {
  margin: auto 0;/* added */
}
```

```
<div class="test">
  <p>Short message</p>
</div>
<hr />
<div class="test">
  <p>Rather long message that should hopefully wrap on to a second line at some point.</p>
</div>
<hr />
<div class="test">
  <p>Message
    <br />with
    <br />many
    <br />lines
    <br />.</p>
</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-03T03:44:22.697

尝试固定位置`position:absolute;`

见小提琴： [这里](http://jsfiddle.net/eXZnH/30/)

也在这里：
HTML：

```
<div class="container">
<div class="test"><p class="fix">Short message</p></div>
<hr />
<div class="test"><p>Rather long message that should hopefully wrap on to a second line at some point.</p></div>
<hr />
<div class="test"><p>Message<br />with<br />many<br />lines<br />.</p></div>
</div> 
```

CSS：

```
.test {
    background-color: #98c5ff;
    color: #093d80;
    width: 400px;
    min-height: 32px;
    background-image: url("http://google.com/favicon.ico");
    background-repeat: no-repeat;
    padding-left: 42px;
}

.fix{
  position:absolute;
  bottom:390px;
} 
```

`bottom:390px`即使我添加了 div`container`以保持原位，您也可能需要修改该值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-04T09:41:08.800

由于使用显示表可能会影响您的宽度，因此我建议使用 sudo 元素`.test:after`来实现垂直对齐，`background-position`如果您打算垂直对齐图标，您也可以使用：

```
.test {
background-color: #98c5ff;
color: #093d80;
width: 400px;
min-height: 32px;
background-image: url("http://google.com/favicon.ico");
background-repeat: no-repeat;
padding-left: 42px;

}
.test:after{
content:"";
display:inline-block;
vertical-align:middle;
height:100%;

}
.test p{
  display:inline-block;
  vertical-align:middle;

}
```

```
<div class="test"><p>Short message</p></div>
<hr />
<div class="test"><p>Rather long message that should hopefully wrap on to a second line at some point.</p></div>
<hr />
<div class="test"><p>Message<br />with<br />many<br />lines<br />.</p></div>
```

[更新你在这里](http://jsfiddle.net/eXZnH/33/)小提琴

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-05T12:40:27.110

不是真正居中，而是在视觉上居中并保持一致性：填充顶部可以解决它，但数量取决于行高和字体大小。

```
.test p:first-child{padding-top:8px} 
```

另一方面，如果您不介意更改多行 div 的行高，则可以为“p”元素设置行高以适应 div 高度。

```
.test {line-height:32px} 
```

[http://jsfiddle.net/eXZnH/34/](http://jsfiddle.net/eXZnH/34/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-06T23:09:53.373

更简单的是在 CSS 中使用 ::before

```
.test {
  position: relative;
  padding-left: 32px;
  background-color: #DDD;
}

.test::before {
  content: url(http://google.com/favicon.ico);
  position: absolute;
  left: 0;
  top: 50%;
  margin-top: -16px; /* image height divided by 2 */
} 
```

看看人

```
.test {
  position: relative;
  padding-left: 32px;
  background-color: #DDD;
}

.test::before {
  content: url(http://google.com/favicon.ico);
  position: absolute;
  left: 0;
  top: 50%;
  margin-top: -16px;
}
```

```
<div class="test">
<p>
bla bla bla<br />
bla bla bla<br />
bla bla bla<br />
bla bla bla<br />
bla bla bla<br />
</p>
</div>

<div class="test">
<p>bla bla bla bla</p>
</div>
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-03-07T15:01:23.610

首先，您在每个 div 之后使用*hr*标签，因此您无法对齐它们。所以首先删除它们，然后将这些样式添加到*.test*类

```
.test {
   // another styles..
   width: 130px; //small width for test
   display: inline-block;
   vertical-align: middle;
} 
```

# facebook - API 调用我/发布 OAuthException - #1

> ID：15801608
> 
> 赞同：1
> 
> 时间：2013-04-04T02:37:01.497
> 
> 标签：facebook, facebook-graph-api, oauth, facebook-c#-sdk

不确定今天（2013 年 4 月 3 日）是否有任何变化，但在尝试检索用户帖子（我/帖子）时开始收到 OAuthException #1。我已正确验证/授权令牌，并具有包括 read_stream 在内的权限。该应用程序在过去几个月一直在运行，但从今天早上开始出现故障。我/喜欢和其他电话似乎工作正常。知道有什么问题吗？

我正在使用 Facebook C# SDK - 尝试使用来自 Github 的最新版本的代码，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:46:37.543

正如 zerkms 所说，显然您的令牌似乎已过期。Facebook 长期令牌在 60 天后过期，您需要重新获取。您可以在 Facebook 开发者网站上阅读更多[信息](https://developers.facebook.com/docs/howtos/login/extending-tokens/)。希望能帮助到你。

# coq - 设计函子以能够使用不同的模块

> ID：15801613
> 
> 赞同：2
> 
> 时间：2013-04-04T02:37:47.943
> 
> 标签：coq

我在两个不同的文件中有两个不同的模块签名。它们具有相同的字段名称，但行为不同。

而里面的函子定义了另一个函子。

```
PI.v

Module Type TPI.
  Parameter sig : Signature.
  Parameter trsInt: forall f, pi f.
End TPI.

Module P (Export T: TPI).
   Lemma A...
    Module Export Mono <: MonoType.
End P. 
```

和

```
MI.v

Module Type TMI.
   Parameter sig : Signature.
   Parameter trsInt : forall f, mi f.
End TMI.

Module M (Export TM: TMI).
   Lemma B ...
   Module Export Mono <: MonoType.
End M. 
```

例如，在`MonoType`另一个文件中的位置`Mono.v`

这是我的情况。

我在该文件中调用了另一个文件`B.v`，我需要在文件`PI.v`和`MI.v`.

例如，我需要同时使用它们的一个定义。

```
 Definition redPair R is :=
   match is with
 | Type_PI => pi_int R is
 | Type_MI => mi_int R is
 end. 
```

我有一个问题，`R`因为`pi_int R`并且`mi_int R`有不同的`sig`（签名），在模块签名内部使用并在`pi_int`模块签名内部使用。`trsInt``TPI``mint_int``trsInt``TMI`

这是我定义它的方式：

```
Module PI (Import P : TPI).
Definition pi_int R is := P.trsInt ...

(* inside PI I define another functor for MI *)
  Module MI (Import M : TMI).
   Definition mi_int R is := M.trsInt ...

   Definition redPair R is :=  
     match is with
    | Type_PI => pi_int R is
    | Type_MI => mi_int R is  (* error here saying that it used the sig of 
                    P.sig but in this case mi_int used the sig of M.sig *)
    end.

End MI.
End PI. 
```

我的问题是，有没有一种方法可以让我拥有一个良好的模块结构，我可以在定义处拥有相同的签名`redPair`？感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T04:06:13.967

实际上，在 的定义中`redPair`，您无法保证`P.sig`和`M.sig`具有相同的类型，这就是您收到此错误消息的原因。

解决此类问题的方法是通过“共享约束”强制类型相等。这是与您的代码类似的代码，演示了我如何强制`P.sig`和`M.sig`等于`nat`：

```
Module Type TPI.
  Parameter sig : Type.
  Parameter x : sig.
End TPI.

Module Type TMI.
  Parameter sig : Type.
  Parameter x : sig.
End TMI.

Module PI (Import P : TPI with Definition sig := nat).
  Definition pi_int := x.

  Module MI (Import M : TMI with Definition sig := nat).
    Definition mi_int := x.

    Definition f (x : bool) :=
      if x
      then pi_int
      else mi_int.

  End MI.

End PI. 
```

您也可以选择`P.sig`不受约束，但随后强制`M.sig`保持相同：

```
Module PI (Import P : TPI).
  Definition pi_int := x.

  Module MI (Import M : TMI with Definition sig := P.sig).
    Definition mi_int := x.

    Definition f (x : bool) :=
      if x
      then pi_int
      else mi_int.

  End MI.

End PI. 
```

* * *

既然提到了您的问题的解决方案，我建议您不要在 Coq 中使用模块和仿函数。大多数情况下，您实际上只需要依赖记录。模块和函子对每个人来说都很复杂，你必须关心抽象、共享约束等。

现状似乎是您应该避免使用它们，除非您*确实*需要它们来提供它们对依赖记录的功能：抽象和/或子类型化。

事实上，我现在对你的定义有点不安。例如，在`MI`内部定义是否有意义`PI`？如果没有更多上下文，这似乎是任意的。也许确实如此，我只是说你在使用模块时应该小心，并确保你很好地掌握了你在做什么，否则它可能会适得其反！:)

但如果你只是在做实验，请用它们做实验。很高兴了解各种可能性以及每种可能性的优缺点。

# java - doInBackground 卡住了

> ID：15801616
> 
> 赞同：0
> 
> 时间：2013-04-04T02:38:07.563
> 
> 标签：java, android, sockets, networking, udp

我正在尝试创建一个使用多个端口的服务器，以便可以轻松地发送和接收不同的数据和信息，但是在我的 doInBackground 方法中，我的代码卡在了 socket.receive 上，这是我的代码

```
while( run )
    {
        //GameServerID
        try
        {
            if(gameServerID == null)
            {
                gameServerID = new DatagramSocket( portID );
            }
            //try to receive data
            byte[] buf = new byte[256];
            DatagramPacket packet = new DatagramPacket( buf, buf.length );
            try
            {
                Log.d(TAG, "Wait for something to connect");
                gameServerID.receive( packet ); <--GETS STUCK HERE
            }
            catch (IOException e) 
            {
                Log.d(TAG, "Error with receiving data");
                e.printStackTrace();
            }
            String data = new String( buf, 0, packet.getLength() );
            Log.d(TAG, data);
            //Send out the ID to the client
            byte[] bufer = new byte[256];
            //Send a message "connect" to the host
            String msg = Integer.toString( players );
            players = players + 1;
            bufer = msg.getBytes();
            InetAddress address;
            //Default ip address of the host
            address = packet.getAddress();
            DatagramPacket p = new DatagramPacket( bufer, bufer.length , address, portID );
            //Send packet
            gameServerID.send( p );
            addresses.add( address );
        }
        catch (SocketException e) 
        {
            Log.d(TAG, "Error with socket");
            e.printStackTrace();
        } 
        //Listen for a client to connect
        catch (IOException e) 
        {
            Log.d(TAG, "Error with I/O");
            e.printStackTrace();
        }

        //GameServerPositions
        try
        {
            Log.d(TAG, "Run the gamePositions code");
            if(gamePositions == null)
            {
                gamePositions = new DatagramSocket( portPos );
            }
            //Receive position
            //try to receive data
            byte[] buf = new byte[256];
            DatagramPacket packet = new DatagramPacket( buf, buf.length );
            try
            {
                gamePositions.receive( packet );
            }
            catch (IOException e) 
            {
                Log.d(TAG, "Error with receiving data");
                e.printStackTrace();
            }
            String data = new String( buf, 0, packet.getLength() );
            Log.d(TAG, data);
            String[] pos = data.split(":");
            for(int i = 0;i<pos.length;i++)
            {
                Log.d(TAG, pos[i]);
            }
            xValues[ Integer.parseInt( pos[0] ) ] = Integer.parseInt( pos[1] );
            yValues[ Integer.parseInt( pos[0] ) ] = Integer.parseInt( pos[2] );
        }
        catch (SocketException e) 
        {
            Log.d(TAG, "Error with socket");
            e.printStackTrace();
        } 
        //Listen for a client to connect
        catch (IOException e) 
        {
            Log.d(TAG, "Error with I/O");
            e.printStackTrace();
        }

        //GameServerSendPos
        try
        {
            Log.d(TAG, "Run the gamePositionsSend code");
            String data = "";
            if( gameSendPos == null )
            {
                gameSendPos = new DatagramSocket( portSend );
            }

            //create the string ready to be sent out
            for(int i = 0; i < 8; i++)
            {
                if(xValues[i] >= 0)
                {
                    data += i + ":" + xValues[i] + ":" + yValues[i] + ":";
                }
            }

            byte[] bufer = new byte[256];
            bufer = data.getBytes();
            DatagramPacket p = null;

            for(int i = 0;i < addresses.size(); i++)
            {
                if( addresses.get(i) != null )
                {
                    p = new DatagramPacket( bufer, bufer.length , addresses.get(i), portSend );
                    gameSendPos.send( p );
                }
            }

        }
        catch (SocketException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
        catch (IOException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

我能做些什么来阻止它卡住，或者经过这么长时间的等待，只是跳过它？只是为了获取更多信息，当第一个客户端连接时，代码工作正常，直到它再次到达顶部，然后 socket.received 卡住了......

帆布

更新

我已将我的代码更改为 3 个不同的类，我在我的服务器中启动它们，而循环就像这样

```
while( run )
    {
        if(start == true)
        {
            gsID.doInBackground( );
            addresses = gsID.addresses;
            gsPos.addresses = addresses;
            gsPos.doInBackground( );
            gsSendPos.addresses = addresses;
            gsSendPos.positions = gsPos.positions;
            gsSendPos.doInBackground( );
            start = false;
        }
        else
        {
            addresses = gsID.addresses;
            gsPos.addresses = addresses;
            gsSendPos.addresses = addresses;
            gsSendPos.positions = gsPos.positions;
        }
    } 
```

但它仍然再次卡在 gameServerID 接收方法上。

我只是将我的所有类都更改为线程，它工作得更好，但是在更高版本的 android 4.0+ 中，线程不能从 UI 使用，但我不确定如何从非 UI 启动它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:10:14.663

[来自DatagramSocket.receive](http://docs.oracle.com/javase/6/docs/api/java/net/DatagramSocket.html#receive%28java.net.DatagramPacket%29)的 Javadoc ：

> 此方法阻塞，直到收到数据报

因此，您的代码“卡住”了，因为它正在等待数据包到达。这意味着连接到此服务器/端口的客户端尚未发送另一个数据包，因此套接字被设计为阻塞。

传统上，如果您想同时监听多个端口，您有两种选择：

1.  在不同的线程上打开每个阻塞套接字（如果由于每个线程一个客户端而同时有大量客户端，这将无法很好地扩展，但对于少量连接可以正常工作）
2.  使用 NIO，它是 Java 的非阻塞 IO

# android - GAE 1.7.4 中的 IOException

> ID：15801618
> 
> 赞同：1
> 
> 时间：2013-04-04T02:38:23.780
> 
> 标签：android, google-app-engine, ioexception

我在将数据从我的 gae 服务器发送到客户端时遇到问题。一切都在本地环境中运行，但在 Google 的服务器环境中却没有，我得到一个 IOException。

首先，我将一个 json 文件发送到我的 gae 服务器......

```
url = new URL("http://xxxserver.appspot.com/xxxserver")
               HttpURLConnection connection = (HttpURLConnection)url.openConnection();
           connection.setRequestMethod("POST");
           connection.setRequestProperty( "Content-Type", "application/json" );
           connection.setRequestProperty("Content-Length", "" + json.toString().getBytes("UTF8").length);
           connection.setRequestProperty("Content-Language", "en-US");  
           connection.setUseCaches (false);
           connection.setDoInput(true);
           connection.setDoOutput(true);    
           connection.setConnectTimeout(40000); //40 seconds 
```

正确创建应该发回的 json 字符串。它看起来如下：

```
{"location1 cost_char":"0.77","location1 cost_reim":"0.0","location2 dist":"34.02","location1 dist":"2.76"} 
```

服务器接收文件，正确创建 json-string，但是当它应该刷新 json-string 时崩溃并出现 IOException：

```
//Send data to server
    try {   
    resp.setContentLength(json.toString().getBytes("UTF8").length);
    resp.setContentType("application/json");
        Writer wr = new BufferedWriter (new OutputStreamWriter (resp.getOutputStream()));           
         try {
             wr.write(json.toString());
             wr.flush();        //crash!!!!!!!!!!!!!
         } 
         finally {
             if (wr != null)
                    logger.info(TAG +"test6");
                 wr.close();
         }
    }
    catch (IOException e) {
        e.printStackTrace();
        logger.info(TAG +": IO Error");
        String temp = getStackTrace (e);
    logger.warning(TAG +": Exception is: " +temp);
    }
    catch (Exception e) {   
        e.printStackTrace();
        logger.warning(TAG +": Exception is: " +e);
    } 
```

客户端接收数据：

```
//Get response from server
            try {
                InputStreamReader is = new InputStreamReader (connection.getInputStream());
                BufferedReader rd = new BufferedReader(is);  //BufferedInputStreams works on byte streams.  BufferedReaders works on character streams.
                String line;
                response = new StringBuffer();     
               try {
                   while((line = rd.readLine()) != null) {
                       response.append(line);
                       Log.d(TAG, "Received Data: " +line);
                   }
                   Log.v("Abrage:" ,"data received");
               }
               finally {
                   if (rd != null)
                       rd.close();
               } 
```

这是堆栈跟踪：

```
com.lemtex.carpoolio.server.CarpoolioServerServlet doPost: CarpoolioServerServlet: Exception is: java.io.IOException: Closed
at org.mortbay.jetty.AbstractGenerator$Output.write(AbstractGenerator.java:629)
at org.mortbay.jetty.AbstractGenerator$Output.write(AbstractGenerator.java:579)
at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:220)
at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:290)
at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:294)
at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:140)
at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)
at java.io.BufferedWriter.flush(BufferedWriter.java:253)
at com.lemtex.carpoolio.server.CarpoolioServerServlet.doPost(CarpoolioServerServlet.java:387)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.JdbcMySqlConnectionCleanupFilter.doFilter(JdbcMySqlConnectionCleanupFilter.java:57)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:447)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:466)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:473)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:694)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:470)
at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
at java.lang.Thread.run(Thread.java:679) 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:52:30.837

```
resp.setContentLength(json.toString().getBytes("UTF8").length); 
```

可能与您发送的长度不同`.toString()`，特别是如果它不是纯 ASCII，我猜您正在发送 ASCII 集之外的扩展字符。

```
wr.write(json.toString()); 
```

并且服务器可能在写入整个字符串之前关闭连接。要么得到实际长度，`String`要么发送`.getBytes("UTF8")`你得到长度的版本。你不能像你现在做的那样做一半一半。

您没有显示足够的代码来实际诊断问题，我们所能做的就是猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T13:09:00.523

好的，我解决了我的问题..我 `resp.getOutputStream().close();`在发送数据之前关闭了 OutputStream....

# html - 如何允许某人添加到文本框中的 url？

> ID：15801619
> 
> 赞同：0
> 
> 时间：2013-04-04T02:38:27.253
> 
> 标签：html, submit, refer

我确定这是在某个地方在线，在 Google 上搜索了一个小时后，我什么也没找到。我正在尝试在（例如）site.com 上使用 HTML 来创建一个文本框，当您按下 sumbit 时，它会将您带到 sitetwo.com/enteredtext。我会非常感谢任何能指出我正确方向的人..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:47:32.423

```
<?php
    if(isset($_GET['enteredtext'])){
        header("Location: sitetwo.com/" . $_GET['enteredtext']);
    }
?> 
```

或 javascript

```
$('form').submit(function(){
    window.location.href = "www.sitetwo.com/" + $('#enteredtext').val();
    //you might need to encodeURI($('#enteredtext').val()); to escape characters
}); 
```

您的 html 将需要输入`id`和`name`之`enteredtext`类的

```
<input type="text" id="#enteredtext" name="enteredtext" placeholder="some value to display in text box" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:41:46.793

在 PHP 中：

```
<?php
header("Location: http://sitetwo.com/" . $_REQUEST['enteredtext']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T02:41:56.127

javascript可以设置this的值

```
window.location.assign("site.com/"+document.getElementById('myInput').value); 
```

虽然我建议对文本输入进行某种类型的验证。

检查它[http://jsfiddle.net/y3TuP/](http://jsfiddle.net/y3TuP/)

# routing - Express.js 和 AngularJS 路由参数

> ID：15801621
> 
> 赞同：1
> 
> 时间：2013-04-04T02:38:44.860
> 
> 标签：routing, angularjs, express

我正在尝试在由 node.js 服务器使用 express 支持的 AngularJS 应用程序中设置一些带有参数的路由。节点设置为将未明确找到的所有内容路由到所有内容：

```
app.use(express.bodyParser());
app.use(app.router);
app.use(express.static(__dirname + "/public"));
app.use(function(request, response)
{
    console.log("catch all");
    writeFile("/public/index.htm", request, response);
}); 
```

Angular 的路由定义了 0-2 个参数：

```
$routeProvider
.when("/",
{
    templateUrl: "home.htm"
})
.when("/otherpage",
{
    templateUrl: "otherpage.htm"
})  
.when("/otherpage/:Var1",
{
    templateUrl: "otherpage.htm"
})  
.when("/otherpage/:Var1/:Var2",
{
    templateUrl: "otherpage.htm"
})
.otherwise(
{
    templateUrl: "home.htm"
});

$locationProvider.html5Mode(true); 
```

/otherpage 有效，但是当 /otherpage/123 全部命中（我可以看到控制台消息）时，它在浏览器中崩溃。什么都没有呈现，然后 Chrome 说它有问题（而 IE 没有呈现任何内容）。

我可以理解未传递的参数，但为什么没有它至少不会发生路由？使用 express.js 和 AngularJS 设置 URL 参数需要做什么？

如果您想检查它，您可以在[此处](https://www.dropbox.com/s/5y32is1lf9yimx7/routing.zip)下载该项目。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:47:52.603

问题是我没有在我的 templateUrls 前面加上前斜杠。将它们更改为：

```
.when("/otherpage/:Var1/:Var2",
{
    templateUrl: "/otherpage.htm"
}) 
```

工作完美。

# c++ - 从模板基类继承构造函数而不重复模板参数？

> ID：15801630
> 
> 赞同：10
> 
> 时间：2013-04-04T02:40:16.453
> 
> 标签：c++, templates, inheritance, c++11, constructor

如何在不重复模板参数（并且不使用宏）的情况下从模板基类继承构造函数：

例如，这不起作用（使用 GCC 4.8）：

```
template <typename T>
struct base {};

template <typename U>
struct derived : base<U> {
    using base::base;
}; 
```

如果我重复基类的模板参数，它确实有效：

```
template <typename T>
struct base {};

template <typename U>
struct derived : base<U> {
    using base<U>::base;
}; 
```

问题是“U”可能是非常复杂的东西，这很烦人并且容易重复错误。例如，这是我最初的激励示例之一：

```
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/key_extractors.hpp>
#include <boost/multi_index/ordered_index.hpp>
#include <boost/multi_index/sequenced_index.hpp>

using namespace boost::multi_index;

struct as_list_tag {};
struct as_set_tag  {};

template <typename T>
struct unique_list : multi_index_container <
    T,
    indexed_by <
        sequenced<tag<as_list_tag>>,
        ordered_unique<tag<as_set_tag>, identity<T>>
    >
> {
    using multi_index_container <
        T,
        indexed_by <
            sequenced<tag<as_list_tag>>,
            ordered_unique<tag<as_set_tag>, identity<T>>
        >
    >
    ::multi_index_container;
    using as_list = as_list_tag;
    using as_set  = as_set_tag ;
}; 
```

我最终通过使用宏解决了这个问题：

```
#define MAKE_UNIQUE_LIST(template_params...)\
template <typename T>\
struct unique_list : multi_index_container template_params\
{\
    using multi_index_container template_params ::multi_index_container;\
    using as_list = as_list_tag;\
    using as_set  = as_set_tag ;\
};

MAKE_UNIQUE_LIST(<
    T,
    indexed_by <
        sequenced<tag<as_list_tag>>,
        ordered_unique<tag<as_set_tag>, identity<T>>
    >
>)
#undef MAKE_UNIQUE_LIST 
```

有没有更好的方法来解决这个问题？我缺少一些语法技巧？=)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T02:59:37.590

它并不完美，但你可以有一个生成你的类型的类：

```
template <typename T>
struct unique_list_base {
    typedef multi_index_container <
        T,
        indexed_by <
            sequenced<tag<as_list_tag>>,
            ordered_unique<tag<as_set_tag>, identity<T>>
        >
    > type;
};

template <typename T>
struct unique_list : unique_list_base<T>::type {
    using unique_list_base<T>::type::multi_index_container;
    using as_list = as_list_tag;
    using as_set  = as_set_tag ;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T08:46:55.747

只是为了强调 Daniel Frey 的解决方案，因为他没有费心做出完整的答案：使用声明的模板（又名模板 typedef）是要走的路。

```
template <typename T>
using unique_list_base =
    multi_index_container <
        T,
        indexed_by <
            sequenced<tag<as_list_tag>>,
            ordered_unique<tag<as_set_tag>, identity<T>>
        >
    >;

template <typename T>
struct unique_list : unique_list_base<T> {
    using unique_list_base<T>::multi_index_container;
    using as_list = as_list_tag;
    using as_set  = as_set_tag ;
}; 
```

这样，您可以摆脱与 C++03习语`struct`一起广泛使用的所有相关样板。`foobar<T>::type`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-14T13:09:50.307

简单的：

```
template <typename U, typename thebase=base<U>>
struct derived : thebase {
    using thebase::thebase;
}; 
```

缺点是它将模板的外部接口更改为具有两个模板参数。你可以这样解决：

```
template <typename U, typename thebase=base<U>>
struct derived_impl : thebase {
    using thebase::thebase;
};
template<typename U>
using derived = derived_impl<U>; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-26T18:36:02.467

实际上，与 gcc 相比，MSVC 似乎甚至不需要重复模板参数：只需编写“使用 base::base”即可。

# prestashop - Prestashop 自定义挂钩

> ID：15801634
> 
> 赞同：0
> 
> 时间：2013-04-04T02:41:05.380
> 
> 标签：prestashop

我是新来的`Prestashop`。我想创建一个新主题，它具有固定顶部`navigation`（粘性），其中包含永久链接（联系站点地图）和货币语言。

我的问题是我们如何安排内容`{HOOK_TOP}`？我知道它是从 Module 生成的

**“永久链接”**可以硬编码，因为它是静态的，但货币语言呢？

我们需要创建一个自定义的钩子和模块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:42:59.890

您可以在hearer.tpl（或放置 {HOOK_TOP} 的位置）中硬编码以显示您的静态内容。但最好为您的静态内容创建一个新模块并挂钩到 hook_top。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:58:06.460

根据您的要求，可能有几种方法。

但最好的方法是创建一个简单的模块并将其挂在 HOOK_TOP 的顶部。然后在管理员中使用模块的位置，调整它的位置。有时，这不起作用，因为 HTML 问题，您将无法获得所需的结果，因此您需要为此调整 css 和 html。

简单的方法是将内容直接放在 header.tpl 文件中，如果内容是静态的。这种方式更高效、更容易。但它仍然可能会引起一点问题，因为如果您放置的内容位于货币块或语言块等两个模块的中间，您会怎么做。所以这会更好，如果你把静态内容放在一个最适合它的地方的模块 tpl 文件中。

没有必要为它创建一个新的钩子。

我希望它会有所帮助。

谢谢

# android - 我怎样才能让吐司消失？

> ID：15801636
> 
> 赞同：2
> 
> 时间：2013-04-04T02:41:21.307
> 
> 标签：android, android-asynctask, toast

我有吐司的问题。当用户成功登录数据库时，如何使 toast 消失。

用户登录失败的代码如下：

类 BuatLogin 扩展 AsyncTask {

```
 @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(Login_layout.this);
        pDialog.setMessage("Login_layout Progress...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }
    protected String doInBackground(String... args) {
        String usr = user.getText().toString();
        String pwd = pass.getText().toString();

        Log.d("1 "+usr, pwd);
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("usr", usr));
        params.add(new BasicNameValuePair("pwd", pwd));
        Log.d("2 "+usr, pwd);
        Log.d(usr,url_create_login);

        // getting JSON Object
        JSONObject json = jsonParser.makeHttpRequest(url_create_login,
                "POST", params);
        Log.d("Buat Respond", json.toString());
        try {
            int sukses = json.getInt(TAG_SUKSES);

            if (sukses == 1) {
                String nim=json.getString(TAG_NIM);
                String jrs=json.getString(TAG_JRS);
                Log.d(TAG_NIM,nim);

                // sukses login
                Intent i = new Intent(getApplicationContext(), Mhs_main_layout.class);
                i.putExtra(TAG_NIM, nim);
                i.putExtra(TAG_JRS,jrs);
                startActivity(i);
                finish();
            } else if(sukses == 2) {
                String nip=json.getString(TAG_NIP);
                Log.d(TAG_NIP,nip);
                Intent i = new Intent(getApplicationContext(), Admin_main_layout.class);
                i.putExtra(TAG_NIP, nip);
                startActivity(i);

                finish();
            }else if(sukses == 3){
                setResult(100);
                //toas(100);
                //finish();

            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;

    }

    //Respon dari upadte buku class
    protected void onPostExecute(String file_url) {
        pDialog.dismiss();
        int resultCode = 100;
        if (resultCode != 100); 
        {
         Toast.makeText(Login_layout.this, "Nip/Nim Atau Password TIdak Sesuai Silahkan Coba Lagi ", Toast.LENGTH_LONG).show();
        }
    }

} 
```

但是即使用户成功登录并且日志猫上没有错误，吐司也会不断出现。我该怎么做才能让它消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:53:35.780

好吧，如果调用`setResult(100);`将变量设置`resultCode`为 100，那么测试`if (resultCode == 100)`将始终为真，因此将始终显示 toast。

你确定你不想测试`if (resultCode != 100)`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:49:36.690

以下是您需要以 squeletal 形式执行的操作：

```
int doInBackground(...) {
  blablabla...

  if (sukses == 1) {
     blablabla...
     // The value 1 will be returned to onPostExecute(int resultCode)
     // as the value for the parameter "resultCode":
     return 1; // or return sukses; same thing.
  } else if (sukses == 2) {
     blablabla...
     return 2; // or return sukses; same thing.
  } else {
     blablabla...
     return 3; // or return sukses; same thing.
  }
}

void onPostExecute(int resultCode) {
  // resultCode now contains the value returned by doInBackground():
  if (resultCode== 1) {
    Toast.makeText(Login_layout.this, "1", Toast.LENGTH_LONG).show();
    finish();
  } else if (resultCode== 2) {
    Toast.makeText(Login_layout.this, "2", Toast.LENGTH_LONG).show();
    finish();
  } else {
    Toast.makeText(Login_layout.this, "3", Toast.LENGTH_LONG).show();
  }
} 
```

随意根据您的需要完成这个骨架。我已将对 finish() 的调用转移到 onPostExecute() 只是为了确保在发布 toast 之前线程不会被取消，但您应该搜索 Google 或进行自己的测试以找到最好的方法。

# java - 显示来自 JDBC 选择语句的数据

> ID：15801640
> 
> 赞同：1
> 
> 时间：2013-04-04T02:41:33.713
> 
> 标签：java, sql-server-2005, jdbc, resultset

我正在创建一个程序，该程序将允许显示和操作数据库中的数据。我根据找到的教程编写了以下代码：

```
public class JavaApplication25 {
    public static void main(String[] args) {
        try {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            String url = "jdbc:odbc:*****";
            Connection conn = DriverManager.getConnection(url, "****", "****");

            Statement stmt = conn.createStatement();
            ResultSet rs = stmt.executeQuery("SELECT * FROM dbo.Patients");

            System.out.println(rs);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

这是代码的输出：

```
run:
sun.jdbc.odbc.JdbcOdbcResultSet@1cda59b
BUILD SUCCESSFUL (total time: 1 second) 
```

我的问题是为什么程序不向我显示 SQL Server 数据库中的数据？谁能告诉我如何显示它？

我将其重新编码为：

```
import java.sql.*;
public class JavaApplication25 {

    public static void main(String[] args) {

    try{
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        String url = "jdbc:odbc:OJT_dsn";
        String user = "sa";
        String pass = "";
        Connection connection = DriverManager.getConnection(url, user, pass);

        Statement statement = connection.createStatement();
        String sql = "SELECT pIDNo,pLName,pFName,pMI,pSex,pStatus FROM dbo.Patients";
        ResultSet result = statement.executeQuery(sql);

        while(result.next()){
            int ID = result.getInt("ID");
            String Lname = result.getString("Lname");
            String Fname = result.getString("Fname");
            String MI = result.getString("MI");
            String Sex = result.getString("Sex");
            String Status = result.getString("Status");

            System.out.println(ID);
            System.out.println(Lname);
            System.out.println(Fname);
            System.out.println(MI);
            System.out.println(Sex);
            System.out.println(Status);
        }
        result.close();
        statement.close(); 

}catch(Exception ex){

  ex.printStackTrace();

}

}
} 
```

我的编码有什么问题？现在我收到了这个错误：

java.sql.SQLException：在 sun.jdbc.odbc.JdbcOdbcResultSet.getInt(JdbcOdbcResultSet.java:600) 在 javaapplication25.JavaApplication25.main( JavaApplication25.java:28) 构建成功（总时间：1 秒）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T02:44:16.673

您正在显示`Object#toString`您的`ResultSet`. 您需要浏览它。

```
while (rs.next()) {
      String name = rs.getString("name");
      System.out.println(name);
      // display more fields, etc.
      ...
} 
```

还可以考虑使用 a`PreparedStatement`来防范[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

阅读[javadoc](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:44:33.993

尝试使用

```
 System.out.println(rs.getString("DATA")); 
```

`System.out.println(rs);`只打印`ResultSet`对象。您需要使用[ResultSet#getString(String columnLabel)](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getString%28java.lang.String%29)方法获取列以获取列详细信息。不要忘记使用[rs.next()](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#next%28%29)方法来导航您的结果集。

***编辑：*** 对于你的情况

```
while (rs.next()) {
      // Read the values
      int pIDno = rs.getInt("pIDno");
      String pFName = rs.getString("pFName");
      String pLName = rs.getString("pLName");

      // Print the values
      System.out.println(name);
      System.out.println(pFName);
      System.out.println(pLName);   
} 
```

# ios - 为什么我需要返回http状态

> ID：15801649
> 
> 赞同：0
> 
> 时间：2013-04-04T02:42:48.963
> 
> 标签：ios, ios6, httpresponse, passbook

我创建了一个通行证和网络服务。现在我可以将此通行证添加到设备，也可以将设备注册到我的服务器。我保存了 deviceID、passTypeIdentifier、pushToken、serialNo 和 authenticationToken 等数据，但我还没有返回 http 状态，例如 201、200、401，... 如何将这些 http 状态响应到设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:59:04.113

在将任何内容发送回设备之前，请添加以下代码：

如果使用 PHP 5.4 或更高版本：

```
$response_code = 201; // replace with required response code
http_response_code($response_code); 
```

如果使用 <= PHP 5.3：

```
$response_code = 201; // replace with required response code
header('X-PHP-Response-Code: ' . $response_code, true, $response_code); 
```

在控制台日志中，您应该看到为设备发送的每个请求返回的响应代码。

```
..... got response with code 201 
```

# php - 在 prestashop 中为一种产品进行自定义计算

> ID：15801650
> 
> 赞同：0
> 
> 时间：2013-04-04T02:42:48.923
> 
> 标签：php, prestashop

我想知道产品价格是在presta shop的哪个文件中计算的？我为其中一种产品添加了两个属性，但我想做类似的事情

```
 if(product_id = 44) {
    attribute1 + (attribute1 x attribute2) = the price
  }else {
    the usual calculation...
  } 
```

现在价格根据属性 1 + 属性 2 中的选择而变化，我在 presta 文档上找不到任何帮助，我真的需要这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T07:08:01.157

我正在考虑您正在使用 Prestashop 1.5.x 。

在 Classes/Product.php 中，有一个函数，代码如下：

```
public static function getProductAttributePrice($id_product_attribute)
{
    return Combination::getPrice($id_product_attribute);
} 
```

或者你可以直接在

```
Combination::getPrice($id_product_attribute); 
```

您需要做什么来覆盖组合类或产品类，并重载该函数。让我们学习 Combination 类，因为 getProductAttributePrice 将来会被弃用。

所以重写 Combination 类并重载 getPrice 函数。您需要做的是将产品 ID 也传递给它，以便您进行计算。

现在您可能知道您的属性 id，所以如果产品 id 是 144，那么两个属性价格，并相应地处理它们并返回它。

**注意：这只是给你一个想法。它可能会也可能不会起作用。**

我希望它会有所帮助。如果你还是没有得到你的结果，然后告诉我，我会回复的。

谢谢

# c# - 保留重复项的两个列表之间的区别

> ID：15801655
> 
> 赞同：9
> 
> 时间：2013-04-04T02:43:12.987
> 
> 标签：c#, linq

我有两个清单：

```
var list1 = new List<string> { "A", "A", "B", C" };
var list2 = new List<string> { "A", "B" }; 
```

我想制作一个类似的列表

```
var result = new[] { "A", "C" }; 
```

列表是从中`list1`删除的所有元素`list2`我认为没有 Linq 扩展方法，因为`Except`删除了重复项。

执行此操作的非 linq 方法是：

```
var tempList = list1.ToList();
foreach(var item in list2)
{
    tempList.Remove(item);
} 
```

但我想知道是否有我可能错过的 Linq 扩展方法。

编辑：

因为这里可能没有我做的扩展方法。

```
public static class LinqExtensions
{
    public static IEnumerable<T> RemoveRange<T>(this IEnumerable<T> source, IEnumerable<T> second)
    {
        var tempList = source.ToList();

        foreach(var item in second)
        {
            tempList.Remove(item);
        }

        return tempList;
    }

    public static IEnumerable<TFirst> RemoveMany<TFirst, TSecond>(this IEnumerable<TFirst> source, IEnumerable<TSecond> second, Func<TSecond, IEnumerable<TFirst>> selector)
    {
        var tempList = source.ToList();

        foreach(var item in second.SelectMany(selector))
        {
            tempList.Remove(item);
        }

        return tempList;
    }
} 
```

用法：

```
list1.RemoveRange(list2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T02:52:44.147

不是 LINQ，而是一条线：

```
list2.ForEach(l => list1.Remove(l)); 
```

`List<int>`顺便说一句...如果有类似`AddRange`但同时删除一堆项目的东西会很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T02:58:26.023

查看您的示例，我认为您的意思是“从 list1 中删除了 list2 中的所有元素”：

```
var lookup2 = list2.ToLookup(str => str);

var result = from str in list1
             group str by str into strGroup
             let missingCount 
                  = Math.Max(0, strGroup.Count() - lookup2[strGroup.Key].Count())
             from missingStr in strGroup.Take(missingCount)
             select missingStr; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T02:56:45.047

如果您不关心结果元素的顺序，您可以使用 LINQ 来完成`GroupBy`：

```
var a = new List<string>{"A","A", "B", "C"};
var b = new List<string>{"A", "B"};
var res  =  a.Select(e => new {Key=e, Val=1})
    .Concat(b.Select(e => new {Key=e, Val=-1}))
    .GroupBy(e => e.Key, e => e.Val)
    .SelectMany(g => Enumerable.Repeat(g.Key, Math.Max(0, g.Sum())))
    .ToList(); 
```

这是[关于 ideone 的演示](http://ideone.com/7G7CZ5)。

我必须承认你的解决方案比我的简单得多，所以它应该被视为仅仅是一种好奇心，一种证明这也可以用 LINQ 完成的方法。

`1`它是这样工作的：对于第一个列表中的每个元素，我们添加一个带有;的键值对。对于第二个列表中的每个元素，我们添加一个键值对`-1`。然后我们按键对所有元素进行分组，将它们的键和负数相加，并产生与总数一样多的键，确保当结果为负时我们不选择任何内容。

# c++ - 如果第一个表达式为假，假设逻辑 and 运算符不会计算第二个表达式是否总是正确的？

> ID：15801656
> 
> 赞同：1
> 
> 时间：2013-04-04T02:43:13.223
> 
> 标签：c++, logical-operators

```
int* ptr;
//ptr may points to any location(e.g. nullptr)
if(ptr != nullptr && *ptr != 1) {
  //A
} else {
  //B
} 
```

那么上面的代码总是等同于下面的代码吗？

```
if(ptr != nullptr) {
  if(*ptr != 1) {
    //A
  } else {
    //B
  }
} else {
  //B
} 
```

我想知道这条规则是标准还是实现定义的，第一段代码是否可移植？

# python - 在 Python 中读取和写入唯一的 XML 标签

> ID：15801660
> 
> 赞同：0
> 
> 时间：2013-04-04T02:43:46.930
> 
> 标签：python, xml, parsing

我想采用这种 XML 格式的 .txt 文件：

```
<?xml version = ""?>
<data>
    <a1>cat</a1>
    <a5>bird</a5>
    <a4>window</a4>
</data> 
```

计算每个字符串的长度并输出：

```
<?xml version = ""?>
<result>
    <r1>3</r1>
    <r5>4</r5>
    <r4>6</r4>
</result> 
```

使用上述输出和相应标签编写 .txt xml 格式文件的最佳方法是什么？我`xml.etree.cElementTree`用来解析它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:57:37.880

```
import xml.etree.ElementTree as ET
import re
xdata = '''
<data>
    <a1>cat</a1>
    <a5>bird</a5>
    <a4>window</a4>
</data>'''
root = ET.fromstring(xdata)

for apptag in root.findall("*"):
    apptag.text = str(len(apptag.text))
    apptag.tag = re.sub(r'^a(.*)',r'r\1',apptag.tag)
root.tag = 'result'
ET.ElementTree(root).write('test.xhtml') 
```

# python - py.test - 如何在 funcarg/fixture 中使用上下文管理器

> ID：15801662
> 
> 赞同：13
> 
> 时间：2013-04-04T02:43:49.200
> 
> 标签：python, pytest, contextmanager

*密切相关：* [在 python 中，是否有在 setup/teardown 中使用上下文管理器的好习惯](https://stackoverflow.com/questions/8416208/in-python-is-there-a-good-idiom-for-using-context-managers-in-setup-teardown)

* * *

我有一个上下文管理器，用于在测试中修复时间/时区。我想将它放在 pytest funcarg 中（或夹具，我们使用的是`pytest`2.2.3，但我可以向后翻译）。我可以这样做：

```
def pytest_funcarg__fixedTimezone(request):
    # fix timezone to match Qld, no DST to worry about and matches all
    # Eastern states in winter.
    fixedTime = offsetTime.DisplacedRealTime(tz=' Australia/Brisbane')

    def setup():
        fixedTime.__enter__()
        return fixedTime

    def teardown(fixedTime):
        # this seems rather odd?
        fixedTime.__exit__(None, None, None) 
```

...但它有点恶心。在相关的 Q [jsbueno](https://stackoverflow.com/users/108205/jsbueno)中指出：*问题是您的代码没有规定在`__exit__`发生异常时正确调用对象的方法。*

[他的回答](https://stackoverflow.com/a/8529165/54056)使用了元类方法。但这对于 pytest 来说并不是那么有用，因为 pytest 通常测试只是函数，而不是类。那么解决这个问题的 pytest-y 方法是什么？涉及[运行测试钩子](http://pytest.org/latest/plugins.html#generic-runtest-hooks)的东西？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-04-08T06:49:11.530

自 2.4 以来，`py.test`具有`yield`样式夹具支持。我们可以直接在其中使用`with`上下文。

```
@pytest.yield_fixture
def passwd():
    with open("/etc/passwd") as f:
        yield f.readlines() 
```

自 3.0 起，`py.test`已弃用该`@pytest.yield_fixture`用法。我们可以`@pytest.fixture`直接用作上下文管理器。

```
@pytest.fixture
def passwd():
    with open("/etc/passwd") as f:
        yield f.readlines() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:17:22.333

恐怕目前没有在夹具中使用上下文管理器的优雅方式。但是，如果测试失败，终结器将运行：

```
import contextlib, pytest

@contextlib.contextmanager
def manager():
    print 'manager enter'
    yield 42
    print 'manager exit'

@pytest.fixture
def fix(request):
    m = manager()
    request.addfinalizer(lambda: m.__exit__(None, None, None))
    return m.__enter__()

def test_foo(fix):
    print fix
    raise Exception('oops') 
```

如果你运行它，`pytest -s`你会看到`__exit__()`调用发生了。

# ios - 在我自己的 iPhone 上测试应用程序 - 我想要哪个配置文件？

> ID：15801668
> 
> 赞同：0
> 
> 时间：2013-04-04T02:44:52.943
> 
> 标签：ios, xcode

我遵循了一个在线教程，该教程让我为我想在我的 iPhone 上测试的应用程序创建了一个新的应用程序 ID，但我应该将它链接到那个，或者 Apple 默认链接到的 iOS 团队配置文件（以及自动设置它链接到那个）？

基本上，我很困惑应该在构建设置下将其链接到哪一个。定制的，或者看似通用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:58:58.343

除非您想在应用程序中使用应用内购买、游戏中心或推送通知，否则您可以使用团队配置文件。

如果您的应用程序使用这些功能之一，您必须为此应用程序使用显式应用程序 ID，并且要使用此显式应用程序 ID，您将需要单独的配置文件。
团队资料使用通配符应用程序 ID，可与您的所有其他应用程序一起使用。

如果您已经为您的特定应用程序创建了配置文件，您当然也可以使用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T02:56:47.747

在您的应用程序中添加配置文件之后，您需要先安装配置文件。根据该配置文件设置构建设置。

# php - 初学者 PHP 邮件功能问题 + 服务器错误

> ID：15801669
> 
> 赞同：0
> 
> 时间：2013-04-04T02:45:00.067
> 
> 标签：php, html

所以我是 PHP 的超级初学者，但我目前正在构建我的第一个网站，我希望在网站上有一个用户可以填写的联系表，然后将他们的信息发送到电子邮件。

因此，我使用“mail()”函数为此编写了 PHP，但由于某种原因，每当用户点击提交时，它只会转到一个带有代码的页面，而不是我在 echo 语句中链接到的页面。

这是我的PHP：

```
<?php 
$name = $_POST['name'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$message = $_POST['message'];
$formcontent="From: $name \n Phone: $phone \n Message: $message";
$recipient = "rowan.krishnan@tufts.edu";
$subject = "Contact Form";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
$url = 'contact.html';
echo '<META HTTP-EQUIV=Refresh CONTENT="0; URL='.$url.'">'  
?> 
```

这是我的html：

```
<div id="emailform">
   <form action="mail.php" method="POST">
       Name: <input type="text" name="name">
       Email: <input type="text" name="email">
       Phone: <input type="text" name="phone">
       Message: <textarea name="message" rows="6" cols="25"></textarea><br />
       <input type="submit" value="Send"><input type="reset" value="Clear">
   </form>
</div> 
```

我的最后一个问题与我使用的网络服务器/主机（hostgator）有关。出于某种原因，每当我上传任何包含 PHP 的文档时，我都会收到 500 内部服务器错误，而且我不确定那里发生了什么。如果你们中的任何人知道我在说什么，如果您有建议，那就太好了。

非常感谢您阅读所有这些并提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:46:55.997

试试这个：

```
<?php
//
///////////////////////////////////////////////////////////////////////
//  This would be your mail.php file
///////////////////////////////////////////////////////////////////////
//
//
//
///////////////////////////////////////////////////////////////////////
//  Lets Just Check Basic PHP Installation Is Working
///////////////////////////////////////////////////////////////////////
//
if (!function_exists('mail')) {
    die('mail() is not available');
}
//
//
//
///////////////////////////////////////////////////////////////////////
//  Validate Required Passed Fields 
///////////////////////////////////////////////////////////////////////
//
if ( isset($_POST['name']) && $_POST['name'] !='' && isset($_POST['email']) && $_POST['email'] !='' && isset($_POST['phone']) && $_POST['phone'] !='' && isset($_POST['message']) && $_POST['message'] !='' ) {
    $name = $_POST['name'];
    $email = $_POST['email'];
    $phone = $_POST['phone'];
    $message = $_POST['message'];
}
else
{
    die('Sadly you did not complete all of the fields on our contact form');
}
//
//
///////////////////////////////////////////////////////////////////////
//  Validate The Email... This Is Just An Example
///////////////////////////////////////////////////////////////////////
//
if (preg_match('/^[-!#$%&\'*+\\.\/0-9=?A-Z^_`{|}~]+@([-0-9A-Z]+\.)+([0-9A-Z]){2,4}$/i', trim($email))) {
    die('Email Address Invalid. Please Check Your Email.');
}
//
//
///////////////////////////////////////////////////////////////////////
//  Build Your Email Message
///////////////////////////////////////////////////////////////////////
//
$EmailMessage .= "Name: " . $name . " \n\n";
$EmailMessage .= "Email: " . $email . " \n\n";
$EmailMessage .= "Phone: " . $phone . " \n\n";
$EmailMessage .= "Message: " . $message . " \n\n";
//
//
///////////////////////////////////////////////////////////////////////
//  Build Email Header
///////////////////////////////////////////////////////////////////////
//
$EmailHeader .= "From: " . $name . " <" . $email . "> \n";
$EmailHeader .= "Reply-To: " . $name . " <" . $email . "> \n";
$EmailHeader .= "Return-Path: " . $name . " <" . $email . "> \n"; // running a windows server??
//
//
///////////////////////////////////////////////////////////////////////
//  Send The Email & Confirm It Processed
///////////////////////////////////////////////////////////////////////
//
if (mail('Rowan Krishnan <rowan.krishnan@tufts.edu>', 'Contact Form', $EmailMessage, $EmailHeader)) {
    //
    // it appears to have worked, so redirect somewhere else
    //
    header("Location: contact.php");
    die('Contact Form Redirect');
} else {
    echo('Contact Form Failed');
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:53:17.100

您`;`在回声末尾缺少 a，这很可能导致白页

```
 echo '<META HTTP-EQUIV=Refresh CONTENT="0; URL='.$url.'">';
                                                           ^ 
```

尝试检查您的错误日志以查看您遇到的错误并尝试打开错误消息

消息还需要每行都有 \r\n

```
$formcontent="From: $name \r\n Phone: $phone \r\n Message: $message"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T03:14:13.437

您不能在本地运行 php，您需要首先运行安装了 php 的 Web 服务器。试试 xamp，因为它很容易安装和使用，并且允许你在本地运行你的 php。[http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)

生成变量后，一个简单的 php 电子邮件脚本将如下所示..（您似乎正确）

```
//Generate the email
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
$headers .= 'From: '. $senders_email;

mail($to, $subject, $message, $headers); 
```

正如凯青所说，用于`header('location: contact.html');`重定向页面。无论您发送什么，echo 都会简单地打印到屏幕上。更好的方法是在 html 文档中使用回调函数。因此，您将使用 javascript 函数发送表单，例如，一旦收到响应（您的电子邮件已发送），回调函数就会执行您喜欢的操作，例如显示不同的页面或打印确认消息。

jQuery 方法看起来像这样

```
//send form to order.php for further processing
var formData = $('#promo-form').serialize();
$.post('order.php',formData,formSent);
//formSent is the callback funciton 
```

您的服务器 500 错误可能是由于对您的 php 文件设置的权限。在您的 ftp 客户端中，检查 php 文件的权限是否设置为 0644。有关此错误的更多信息可以在以下位置找到：

*   [http://www.cyberciti.biz/tips/http-error-500-internal-server-for-php-pages-and-solution.html](http://www.cyberciti.biz/tips/http-error-500-internal-server-for-php-pages-and-solution.html)
*   [CodeIgniter 出现 500 错误](https://stackoverflow.com/questions/2916763/500-error-with-codeigniter)
*   [http://x10hosting.com/forums/scripts-3rd-party-apps-programming/166905-phpmail-my-smtp-server-500-error-file-permissions.html](http://x10hosting.com/forums/scripts-3rd-party-apps-programming/166905-phpmail-my-smtp-server-500-error-file-permissions.html)
*   [https://www.bitrixsoft.com/support/training/course/?COURSE_ID=12&LESSON_ID=447](https://www.bitrixsoft.com/support/training/course/?COURSE_ID=12&LESSON_ID=447)

希望这可以帮助..

# r - 查找不起作用，因为查找变量的名称可能不同

> ID：15801671
> 
> 赞同：0
> 
> 时间：2013-04-04T02:45:17.503
> 
> 标签：r, ms-access, lookup, rodbc

我经常使用不是我自己创建的数据库。在数据库中，数据通常是编码的，例如男性 = 1，女性 = 2。我创建了很多动态报告，需要实际的级别名称，而不是变量级别的编码。我一直在手动重新编码变量的每个级别，但必须有一种方法以更自动化的方式完成此操作。

找出编码实际是什么的关键是在单独的表格中提供。当我通过 RODBC 将该数据导入 R 时，表格在列（例如）性别中包含 1 和 2。我试图找到一种方法，通过具有一些讨厌特征的查找表将它们转换为男性和女性。

在这种情况下，数据文件看起来像：

| ID | 性别 |
| --- | --- |
| 1 | 1 |
| 2 | 1 |
| 3 | 2 |
| 4 | 1 |

和查找表是这样的：

| 姓名 | 代码 | 描述 |
| --- | --- | --- |
| 性别 | 1 | 男性 |
| 性别 | 2 | 女性 |
| 变量X | 1 | 任何 |
| 变量X | 2 | 任何 |
| 变量X | 3 | 任何 |

因此，我想根据数据文件的变量名称和查找表中的名称列，使用两个表之间的链接将代码与 data$Gender 中找到的值进行匹配，从而在查找表中查找描述。我可以通过为每个变量运行来做到这一点：

> data$Gender<-lookup(data$Gender, subset(lookuptable,Name=="Gender")) （查找是包'epicalc'中的一个函数）

'Name == "Gender"' 位的全部内容...如果变量名称和列 Name 中的字符串相同，则创建一个遍历所有变量名称的循环并不是一个大问题。但是，就我而言，名称列中的字符串名称通常与变量名称不匹配。那么当查找表是这样的时候我们该怎么办：

| 姓名 | 代码 | 描述 |
| --- | --- | --- |
| 性别 | 1 | 男性 |
| 性别 | 2 | 女性 |
| 变量X | 1 | 任何 |
| 变量X | 2 | 任何 |
| 变量X | 3 | 任何 |

在 Access 中，查找表和包含实际数据的表之间的链接是通过表设计中“查找”选项卡中的“行源”行。此行源是在变量级别指定的，因为不同的变量将需要不同的查找值（在我的情况下可以在 1 个查找表中找到）。

我想如果有一种方法可以将此 Row 源行导入到 R 中，我想我的问题将得到解决，它指定（在上面的示例中）在查找表中 Gender 实际上被称为 Sex。

如果您想知道，Row Source 行（可以为数据表中的每个变量指定）如下所示：

> 选择lookuptable.Code，lookuptable.Description FROM [lookuptable] WHERE (((lookuptable.Name)="Sex"));

我该如何解决我的问题？我想从 Access 中的每个表中为每个变量导入 Row Source 行会很方便（如果可能的话），但可能不是（我不知道）......

R 版本 2.15.2 (2012-10-26)
平台：i386-w64-mingw32/i386 (32-bit)
Epicalc_2.15.1.0
RODBC_1.3-6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:17:29.933

如果我正确理解您的问题，那么您面临的主要困难是您拥有包含多个变量编码的查找表，有时您必须“调整”变量名称以使其匹配。解决这两个问题的一种方法是在 Access 中创建保存的查询，这些查询可以充当每个变量的单独“查找（伪）表”。

例如，您可以在 Access 中创建一个名为“GenderLookup”的已保存查询，其 SQL 代码为

```
SELECT [Code], [Description] AS Gender
FROM [MasterLookupTableName]
WHERE [Name]="Gender" 
```

...或者...

```
SELECT [Code], [Description] AS Gender
FROM [MasterLookupTableName]
WHERE [Name]="Sex" 
```

...（取决于上面的哪个示例实际上是这种情况），然后将该查询用作 JOIN 中的“查找表”，例如，

```
SELECT [DataTable].[ID], [GenderLookup].[Gender]
FROM [DataTable] INNER JOIN [GenderLookup]
    ON [DataTable].[Gender] = [GenderLookup].[Code] 
```

...这将返回....

```
ID  Gender
1   Male
2   Male
3   Female
4   Male 
```

# java - 你如何计算基数排序的数字

> ID：15801672
> 
> 赞同：0
> 
> 时间：2013-04-04T02:45:25.770
> 
> 标签：java, radix-sort

大家好，我需要为任意数量的数字和值编写 RADIX 排序算法。我认为使用 LL 来操作比使用 Arrays 来存储 0-9 值更容易。我认为使用递归来解决这个问题会更好，但是我遇到了困难并且出错了

```
Exception in thread "main" java.lang.StackOverflowError
at java.util.LinkedList$Node.<init>(Unknown Source)
at java.util.LinkedList.linkLast(Unknown Source)
at java.util.LinkedList.add(Unknown Source) 
```

我真的很感激任何指导！:)

```
 import java.util.LinkedList;
        import java.util.Scanner;

        public class pt2 {
            long[] mine;
            int digits;
            Scanner sn = new Scanner(System.in);
            public pt2() {
                makeArray();
                add();
                RADIX(mine,1);
            }

                @SuppressWarnings({ "unchecked", "rawtypes" })
    void RADIX(int[] kiki, int digi){
    while(digi<=digits){
        LinkedList<Integer> l0 = new LinkedList<Integer>();
        LinkedList<Integer> l1 = new LinkedList<Integer>();
        LinkedList<Integer> l2 = new LinkedList<Integer>();
        LinkedList<Integer> l3 = new LinkedList<Integer>();
        LinkedList<Integer> l4 = new LinkedList<Integer>();
        LinkedList<Integer> l5 = new LinkedList<Integer>();
        LinkedList<Integer> l6 = new LinkedList<Integer>();
        LinkedList<Integer> l7 = new LinkedList<Integer>();
        LinkedList<Integer> l8 = new LinkedList<Integer>();
        LinkedList<Integer> l9 = new LinkedList<Integer>();
        LinkedList[] cap ={l0,l1,l2,l3,l4,l5,l6,l7,l8,l9};

        for( int j=0;j<kiki.length;j++){
            int k=0;
            while(k<10){
                //need to put the number in the correct LL but how
                int jk = digital(kiki[j],(int)(Math.pow(10,digi)));
                if(jk==k){
                    cap[k].add(kiki[j]);
                    k=11;
                }
                k++;
            }
        }       
        int i = 0;
        while(i<kiki.length){
            int p=0;
            while(p<10){
                while(cap[p].isEmpty()==false){
                    kiki[i]=(int) cap[p].removeFirst();

                }
                p++;
            }
            i++;
        }
        digi++;
    }
}
public int digital(int num, int pos){
    int i = (int) (num % Math.pow(10,pos));
    i= (int)(i/Math.pow(10, pos-1));
    return i;
}

            void add(){
                int i=0;
                while(i<mine.length){
                    mine[i] = (long)(Math.random()*digits);
                    i++;
                }
            }

            void makeArray(){
                System.out.println("Max size?");
                mine = new long[sn.nextInt()];
                System.out.println("Max digits?);
                if(digits<0){
                    System.out.println("bad USer");
                }else{

                    digits = sn.nextInt();
                }
            }
        } 
```

现在这回来了

最大尺寸？最多 10 个数字？2 未排序

## 74 63 87 52 1 99 10 74 67 49

已排序 49 63 87 52 1 99 10 74 67 49 结束

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:49:16.940

将您的链接列表存储在另一个列表或数组中，而不是有 10 个单独的变量。然后，您可以将数字作为索引或偏移量来选择正确的数字。

# neo4j - 如何可视化 Neo4J 节点关系？

> ID：15801674
> 
> 赞同：3
> 
> 时间：2013-04-04T02:45:37.420
> 
> 标签：neo4j, visualization

给定节点关系

*   A“知道” B
*   B“喜欢”C
*   C“工作于”X

再加上几行 Neo4J，有没有办法可以将其导出为 JPG 或任何其他图像？

**一个更通用的问题 - 给定节点之间的关系，创建直观地描绘它们的图表最直接的方法是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-27T19:31:21.100

您也可以在 Neo 浏览器中查看数据
[http://localhost:7474/](http://localhost:7474/)
启动本地 neo4j 实例然后转到运行 neo4j 的远程机器的 url 或 url（如果打开）
如果您的远程 neo 在私有 IP 上这样浏览器就不会向公众开放，您需要通过隧道

```
ssh -L 7474:[neo4j_private_IP]:7474 user_name@[neo4j_public_IP] 
```

# ios - 从 ios 设备检索关卡编辑器数据的最佳实践

> ID：15801675
> 
> 赞同：1
> 
> 时间：2013-04-04T02:45:37.543
> 
> 标签：ios, plist

我的 google-fu 没有直接回答这个问题，主要是因为我认为它比“为什么这不起作用”更具理论性。

我正在学习 Cocos2d 和 xcode。我在做一个简单的游戏，一切都很顺利。游戏将有多个关卡，每个关卡的数据都存储在一个 plist 中。但是，我现在想创建更多关卡。

在图形程序中以图形方式构建一个关卡，然后将所有这些数据转录成一个 plist 似乎很痛苦。但是，我有一个不错的小触摸屏 ios 设备，我应该可以将我的游戏变成一个快速而肮脏的关卡编辑器，然后将这些数据存储为我需要加载到的确切 plist 格式游戏。

我知道在 ios 设备上创建的数据最终会被锁定在设备本身不可触及的文件结构中。所以，我的问题是：**从我的设备中回收我在设备上创建的任何 plist 数据的最佳方法是什么？**

我可以看到访问数据的几种方法是通过 iTunes 设置文件共享，或通过电子邮件向自己发送数据。两者似乎都是矫枉过正（我正在学习东西，所以也许它并不像基于谷歌搜索这些方式那样困难）。再说一次，我不是在尝试构建一个功能齐全的最终用户级别的编辑器，它需要这样的东西。我只想要一种简单的方法来获取这些数据。

还有其他（更多）聪明的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:35:20.883

Assuming that the files are in the Documents folder or somewhere else convenient:

Open Xcode's "organizer" window, click on the Devices tab and find your device. Click on the "Applications" section for the device, and select your application.

You can now download any files your app has created from the device to yor Mac.

# java - Javax.comm 错误

> ID：15801676
> 
> 赞同：0
> 
> 时间：2013-04-04T02:46:03.090
> 
> 标签：java, android, serial-port, javax.comm

我正在尝试编写一个可以从 COMM 端口读取的 Android 应用程序。我正在关注本教程：[http ://www.java-samples.com/showtutorial.php?tutorialid=11](http://www.java-samples.com/showtutorial.php?tutorialid=11)

因此，我对其进行了一些更改并取出了 main 方法并将其替换为 Android 活动中的 OnCreate ，但这就是我遇到奇怪错误的地方，我不明白。有人可以告诉我在哪里查找错误吗？

这是错误日志：

```
04-04 02:26:43.426: E/AndroidRuntime(1418): FATAL EXCEPTION: main
04-04 02:26:43.426: E/AndroidRuntime(1418): java.lang.NoClassDefFoundError: javax.comm.CommPortIdentifier
04-04 02:26:43.426: E/AndroidRuntime(1418):     at com.example.jovialjavauart.Reader.onCreate(Reader.java:27)
04-04 02:26:43.426: E/AndroidRuntime(1418):     at android.app.Activity.performCreate(Activity.java:5104)
04-04 02:26:43.426: E/AndroidRuntime(1418):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-04 02:26:43.426: E/AndroidRuntime(1418):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-04 02:26:43.426: E/AndroidRuntime(1418):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-04 02:26:43.426: E/AndroidRuntime(1418):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-04 02:26:43.426: E/AndroidRuntime(1418):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-04 02:26:43.426: E/AndroidRuntime(1418):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 02:26:43.426: E/AndroidRuntime(1418):     at android.os.Looper.loop(Looper.java:137)
04-04 02:26:43.426: E/AndroidRuntime(1418):     at android.app.ActivityThread.main(ActivityThread.java:5039)
04-04 02:26:43.426: E/AndroidRuntime(1418):     at java.lang.reflect.Method.invokeNative(Native Method)
04-04 02:26:43.426: E/AndroidRuntime(1418):     at java.lang.reflect.Method.invoke(Method.java:511)
04-04 02:26:43.426: E/AndroidRuntime(1418):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-04 02:26:43.426: E/AndroidRuntime(1418):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-04 02:26:43.426: E/AndroidRuntime(1418):     at dalvik.system.NativeStart.main(Native Method) 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:02:50.430

javax.comm 不是 Android 包，也没有移植到 Dalvik 字节码。你是索尔。

[http://developer.android.com/reference/packages.html](http://developer.android.com/reference/packages.html)

# c++ - std::ostream 输出错误

> ID：15801677
> 
> 赞同：0
> 
> 时间：2013-04-04T02:46:14.133
> 
> 标签：c++, iostream, virtual-functions

我用一些类创建了代码，这些类都派生自`Object`类并具有返回对象的`virtual`方法。object 只是一层之上，但也是基于 Object 并具有虚函数。`repr``Bytes``Bytes``vector<char>``repr`

所有类（包括`Bytes`）都有重载的方法`operator bool() const`。我试图用来`std::ostream& operator<<(std::ostream& sstream, const Object& object)`输出这些对象。但是当我尝试这样做时，我总是看到`1`i 而不是所有对象。我猜我所有的对象`bool`在发送到函数之前都被转换为类型。

仅当我将函数用作静态库的一部分时才会发生这种情况。

如果我之前插入此函数的代码`int main(int argc, char** argv)`，一切顺利。我究竟做错了什么？

如果它可能有帮助，这里是函数的代码。

```
std::ostream& operator<<(std::ostream& sstream,
                         const Object& object)
{
  Bytes repr;
  size_t length;
  vector<char> stack;
  repr = object.repr();
  repr.copy(stack);
  stack.push_back(0);
  sstream << &stack[0];
  return sstream;
} 
```

但是我确信它不依赖于函数的代码，但可以依赖于它的声明。

提前致谢！

**更新**

似乎错误在其他任何地方。似乎不包括函数代码，尽管我在静态库中有它（`ar t libmyapp.a`显示它）。代码仅在`main`功能之前有效。有可能修复它吗？

# python - 同时在 Tkinter 画布上移动多个对象

> ID：15801679
> 
> 赞同：1
> 
> 时间：2013-04-04T02:46:21.920
> 
> 标签：python, tkinter

我有一个 Tkinter 画布，上面有很多图片，有什么方法可以轻松移动它们吗？我知道“canvas.move”，但是在将它用于许多对象时，它非常重复和聚集。有没有办法同时移动画布上的所有对象，或者可能将所有图片组合成一个对象（使用 python）？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:00:36.177

您可以将常量传递`ALL`给 move 方法：

```
from Tkinter import *

root = Tk()
canvas = Canvas(root, width=200, height=200)
canvas.create_rectangle(10, 10, 60, 60)
canvas.create_rectangle(70, 70, 120, 120)
canvas.pack()
canvas.move(ALL, 50, 50)
root.mainloop() 
```

# python - python 'NoneType' 对象不可迭代

> ID：15801680
> 
> 赞同：0
> 
> 时间：2013-04-04T02:46:28.767
> 
> 标签：python

这个程序是一个高尔夫球场的用户界面。Player 和 League 类不应更改。用户界面允许用户在文本文件中输入每个球员的 9 洞得分，并返回每个球员的总分、标准杆和小鸟球。在输入最后一组分数后，我收到了这个错误（我不知道如何修复），所以它似乎在输入分数时验证分数，但最后也在验证它们，它们是不再存在。我需要这样做，以便在输入后对其进行检查，仅此而已。我不知道该怎么做

```
Traceback (most recent call last):
  File "<pyshell#41>", line 1, in <module>
    main()
  File "/Users/tinydancer9454/Documents/python/golfRound.py", line 102, in main
    isValidScore(holeScores)
  File "/Users/tinydancer9454/Documents/python/golfRound.py", line 120, in isValidScore
    for score in holeScores:
TypeError: 'NoneType' object is not iterable 
```

这是代码：

```
class Player:
    """ Represents a player in the golf league """

    PAR = [4, 3, 4, 3, 4, 5, 4, 3, 5]
    """ par for each of the 9 holes """

    def __init__(self, name):
        """ creates a Player and keeps track of stats """
        self.__name = name
        self.__pars = 0
        self.__birdies = 0
        self.__gross = 0

    def getName(self):
        """ returns a player's name """
        return self.__name

    def getGross(self):
        """ returns a player's gross score """
        return self.__gross

    def getPars(self):
        """ returns number of pars made """
        return self.__pars

    def getBirdies(self):
        """ returns number of birdies made """
        return self.__birdies

    def recordScores(self, holeScores):
        """ mutator method that uses the results of one round of play
            (9 holes) to update a player's stats """
        self.__gross = sum(holeScores)
        self.__findparsandbirdies(holeScores)

    def __findparsandbirdies(self, scores):
        """ helper method that finds the number of pars and birdies """

        pars = 0
        birdies = 0
        hole = 0
        for score in scores:
            if score == Player.PAR[hole]:
                pars += 1
            if score == Player.PAR[hole] - 1:
                birdies += 1
            hole += 1
        self.__pars = pars
        self.__birdies = birdies

    def __str__(self):
        """ returns a string representation of a player """
        return 'a Player named ' + self.__name

class League:
    """ represents the players of a golf league """

    def __init__(self, fileName = 'players.txt'):
        """ creates a list of Player objects from the
            names stored in the file specified """
        self.__playerList = []
        datafile = open(fileName, 'r')
        for line in datafile:
            playerName = line.rstrip()
            player = Player(playerName)
            self.__playerList.append(player)

    def getNumPlayers(self):
        """ returns the number of players is the league """
        return len(self.__playerList)

    def getPlayerbyPosition(self, position):
        """ returns the player at the specified position """
        return self.__playerList[position]

    def getPlayerbyName(self, name):
        """ returns the player with the specified name """
        for player in self.__playerList:
            if player.getName() == name:
                return player
        return None

    def __str__(self):
        return 'a golf league with ' + str(self.getNumPlayers()) + ' players'

def main():
    """The input and output for the program"""
    l= League()
    players= []
    holeScores= enterScores(l, players)
    isValidScore(holeScores)
    output(players)

def enterScores(l, players):
    """enter the scores"""
    for position in range(l.getNumPlayers()):
        inputScore= input("Please enter a list of the player's scores: ")
        holeScores= (int(score) for score in inputScore.split(','))
        for score in holeScores:
            while not isValidScore(holeScores):
                holeScores= input("Please enter a valid list of scores: ")
        p= l.getPlayerbyPosition(position)
        players.append(p.recordScores(holeScores))
        p.recordScores(holeScores)

def isValidScore(holeScores):
    """checks if the scores entered for a single hole are 1 to 10, inclusive"""
    for score in holeScores:
        if not int:
            return False
        elif score < 1:
            return False
        elif score > 10:
            return False
    return True

def output(grossScore, pars, birdies):
    """prints output"""
    for player in players:
        print(player.getName())
        print('Gross score:', player.getGross())
        print('Pars: ', player.getPars())
        print('Birdies: ', player.getBirdies()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:01:54.643

在您分配to`main`的返回值时，这是因为没有声明。所以被传递给试图在循环中对其进行迭代的对象，但它失败了，因为它不是你可以循环的东西。`enterScore``holeScores``None``enterScore``return``None``isValidScore``for``None`

# python - 大文件到列表中

> ID：15801682
> 
> 赞同：0
> 
> 时间：2013-04-04T02:46:34.613
> 
> 标签：python, list, large-files

我想知道如何将一个非常大的文件放入列表中？我的代码只适用于小文件：

```
def populate_director_to_movies(f):
    '''
    (file open for reading) -> dict of {str: list of str}
    '''

    movies = []
    line = f.readline()

    while line != '':
        movies.append(line)
        line = f.readline() 
```

当我将它用于非常大的文本文件时，它只是一个空白区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:02:29.383

如果文件很大，则遍历文件（或创建生成器）并处理该行。
就像是：

```
for line in f:
    process_line(line) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:01:53.083

为什么不使用 Python 的`with`语句呢？

```
def populate_director_to_movies(f):
    with open(f) as fil:
        movies= fil.readlines() 
```

或者如果文件对于内存来说太大，请使用文件迭代器来完成。

```
def populate_director_to_movies(f):
    movies = []
    with open(f) as fil:
        for line in fil:
            movies.append(line) 
```

# font-size - Knitr 和 tikzDevice 不能与文章选项一起使用

> ID：15801683
> 
> 赞同：3
> 
> 时间：2013-04-04T02:46:35.893
> 
> 标签：font-size, knitr, tikz

`knitr`我对and有一个问题`tikzDevice`，就像我之前的某个人一样。（参见[https://tex.stackexchange.com/questions/106057/tikzdevice-is-not-getting-sizes-right-knitr/106595#106595](https://tex.stackexchange.com/questions/106057/tikzdevice-is-not-getting-sizes-right-knitr/106595#106595)。）他曾经`dev.args`摆脱这个错误，但如果我运行这个代码通过`knitr`（与`rstudio`），字体大小仍然一团糟。`dev.args=list(pointsize=12)`对我不起作用。唯一有效的方法是删除`a4paper,12pt`. 关于我做错了什么有什么想法吗？

```
\documentclass[a4paper,12pt]{scrartcl}
\begin{document}

\begin{figure}
<<dev='tikz', dev.args=list(pointsize=12)>>=
x<-1
plot(x)
@
\end{figure}

\end{document} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:20:45.400

原来这是`tikzDevice`包的一个bug，[很久以前就报告](https://github.com/Sharpie/RTikZDevice/pull/61)过（但还没有修复）。问题是用于检测点大小的正则表达式是错误的（他们应该使用`pt`而不是`[pt]`）：

```
> tikzDevice:::getDocumentPointsize
function (docString) 
{
    psLocation <- regexpr("\\d+[pt]", docString, ignore.case = T, 
        perl = T)
    if (psLocation == -1) {
        return(NA)
    }
    else {
        pointsize <- substr(docString, psLocation, psLocation + 
            attr(psLocation, "match.length") - 2)
        return(as.numeric(pointsize))
    }
} 
```

有多种方法可以解决此问题。当然，最好的方法是修复它`tikzDevice`。在此之前，您可以使用这个简单的技巧：

```
\documentclass[12pt,a4paper]{scrartcl} 
```

即，切换`12pt`with`a4paper`以便可以检测到`12`而不是。`4`

# javascript - IE8 不能与 jQuery .show() 一起使用，并且可以在包括 ie9 在内的所有其他浏览器上工作

> ID：15801688
> 
> 赞同：0
> 
> 时间：2013-04-04T02:46:52.470
> 
> 标签：javascript, jquery

我有以下 HTML：

```
<a class="select_class" style="font-size: 15px;"></a> 
<div class="dropDown" style="display: none;" >
    <!--somecode-->
</div> 
```

和 Javascript：

```
$('.select_class').click(function(){  
    var isVisible = $('.dropDown').is(':visible'); 

    if (isVisible) { 
        $('.dropDown').hide(); 
    } 
    else { 
        $('.dropDown').show(); 
    } 
    return false; 
}); 
```

它给了我“null 为 null 或不是对象”的错误。它在 IE9、Firefox 和 Chrome 中运行良好。只有在 IE8 中我才遇到这个问题。

错误在以下行：

```
var isVisible = $('.dropDown').is(':visible'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:32:11.367

最后它起作用了..:)我用'jquery'替换了'$'符号并且它起作用了:-)像这样：

```
jQuery('.select_class').click(function(){  
        var isVisible = jQuery('.dropDown').is(':visible'); 

        if (isVisible) { 
             jQuery('.dropDown').hide(); 
         } 
        else { 
            jQuery('.dropDown').show(); 
        } 
        return false;  }); 
```

# google-maps - “我的地点”谷歌地图 API

> ID：15801694
> 
> 赞同：0
> 
> 时间：2013-04-04T02:47:40.820
> 
> 标签：google-maps

是否有任何 API 可让我直接访问“我的地点”地图？我正在寻找两者：更新现有地图并从客户端应用程序创建新地图。我目前无法找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:53:54.450

不？我能找到的唯一方法是通过附加`&output=[format]`到现有地图的 URL 来读取地图数据，例如：

```
https://maps.google.com/maps/ms?msa=0&msid=[].[]&output=kml 
```

或者：

```
https://maps.google.com/maps/ms?msa=0&msid=[].[]&output=json 
```

显然，这不提供您正在寻找的更新或创建功能。

相关：[谷歌地图输出=公里损坏？](https://stackoverflow.com/questions/11680872/google-maps-output-kml-broken)

# jquery - 停止将占位符插入到代码中

> ID：15801695
> 
> 赞同：0
> 
> 时间：2013-04-04T02:47:56.510
> 
> 标签：jquery, forms, field

我有这个 jQuery，它从插入到字段中的内容编辑文本区域中的代码。[你可以在这里](http://pholiooo.com)看到它。问题是，如果用户没有在其中一个字段中输入内容，占位符就会被插入到代码中。相反，我希望常规标识符留在那里，而不是在字段为空时被替换。

这是jQuery代码。

```
$(document).ready(function(){
    var basicHtml = ($('.code').html()).replace(/&lt;/g,'<').replace(/&gt;/g,'>');

    $('.code').val(basicHtml);

    $('form').on('submit',function() {
        var content = basicHtml;
        content = content.replace(/%name%/g, ($('#name').val()||$('#name').attr('placeholder')));
        content = content.replace(/%slogan%/g, ($('#slogan').val()||$('#slogan').attr('placeholder')));
        content = content.replace(/%description%/g, ($('#description').val()||$('#description').attr('placeholder')));
        content = content.replace(/%bio%/g, ($('#bio').val()||$('#bio').attr('placeholder')));
        content = content.replace(/%analytics%/g, ($('#analytics').val()||$('#analytics').attr('placeholder')));
        content = content.replace(/%favicon%/g, ($('#favicon').val()||$('#favicon').attr('placeholder')));
        var final = content.replace(/%dribbble_username%/g, ($('#dribbble').val()||$('#dribbble').attr('placeholder')));
        $('.code').val(final);

        return false;
    }).on('reset',function(){
        $('form textarea:not(.code),form input').val();
        $('.code').val(basicHtml);
    });

}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:53:23.923

您基本上是通过读取占位符属性来设置它。固定代码：

```
$(document).ready(function(){
    var basicHtml = ($('.code').html()).replace(/&lt;/g,'<').replace(/&gt;/g,'>');

    $('.code').val(basicHtml);

    $('form').on('submit',function() {
        var content = basicHtml;
        content = content.replace(/%name%/g, ($('#name').val()));
        content = content.replace(/%slogan%/g, ($('#slogan').val()));
        content = content.replace(/%description%/g, ($('#description').val()));
        content = content.replace(/%bio%/g, ($('#bio').val()));
        content = content.replace(/%analytics%/g, ($('#analytics').val()));
        content = content.replace(/%favicon%/g, ($('#favicon').val()));
        var final = content.replace(/%dribbble_username%/g, ($('#dribbble').val()));
        $('.code').val(final);

        return false;
    }).on('reset',function(){
        $('form textarea:not(.code),form input').val();
        $('.code').val(basicHtml);
    });

}); 
```

# c# - 立即在 ASP.NET 代码中运行 Javascript。

> ID：15801698
> 
> 赞同：0
> 
> 时间：2013-04-04T02:48:15.560
> 
> 标签：c#, javascript, asp.net

我希望你能帮助我解决我的问题。我正在 ASP.NET 代码中执行 SQL 查询，并且正在使用 bing 的 javascript API。问题是我需要在运行查询之前执行一个 javascript 函数。此函数以字符串格式提供基于地址的地理坐标。我已经知道**RegisterStartupScript**和**RegisterClientScriptBlock**，但这两个对我不起作用，因为 javascript 由于某种原因没有执行。这是代码。而且，我差点忘记了，脚本在页面头部正确声明。有没有其他方法可以在 C# ASP.Net 中运行 javascript？

```
 public void calculateCoordinates()
    {
        ClientScriptManager cs = Page.ClientScript;
        Type cstype = this.GetType();
        String csName = "Calculate";
        if (!cs.IsStartupScriptRegistered(cstype, csName))
        {
            String jsFunction = "calculateGeoCoordinates();";
            cs.RegisterStartupScript(cstype, csName, jsFunction, true);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:56:09.957

JavaScript 是客户端，您拥有的代码是服务器端，所以简而言之，不，您不能在 ASP.NET 服务器端代码中运行 JavaScript。

但是，您可以做的是运行一些 ASP.NET，将必要的内容输出到您的页面，包括触发您需要的 JavaScript 的注册脚本块，然后对您的页面进行 AJAX 或其他异步调用以触发您的必要的查询。

# java - 重复条目异常休眠

> ID：15801701
> 
> 赞同：1
> 
> 时间：2013-04-04T02:48:31.383
> 
> 标签：java, mysql, hibernate, spring-mvc, spring-orm

我在将条目存储到我的数据库中时遇到了一些问题。我正在使用以下层次结构：

我有一个父类 PageContent 和两个子类 TextEntry 和 Image 但是当我尝试存储多个 PageContent 实体时，我得到以下异常：

> HTTP 状态 500 - 请求处理失败；嵌套异常是 org.springframework.dao.DataIntegrityViolationException: Duplicate entry '2' for key 'groups_groupId'; SQL [不适用]；约束[空]；嵌套异常是 org.hibernate.exception.ConstraintViolationException: Duplicate entry '2' for key 'groups_groupId'

这是相关的类

组.java：

```
package com.youthministry.domain;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;

@Entity(name="GROUP_DETAILS")
public class Group {
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Long groupId;
    @Column(name = "GROUP_NAME", unique = true, nullable = false)
    private String groupName;
    private String groupDesc;

    /*public String getIdAsString() {
        return new Long(groupId).toString();
    }*/
    public Long getGroupId() {
        return groupId;
    }
    public void setGroupId(Long groupId) {
        this.groupId = groupId;
    }
    public String getGroupName() {
        return groupName;
    }
    public void setGroupName(String groupName) {
        this.groupName = groupName;
    }
    public String getGroupDesc() {
        return groupDesc;
    }
    public void setGroupDesc(String groupDesc) {
        this.groupDesc = groupDesc;
    }

} 
```

页面内容.java

```
package com.youthministry.domain;

import java.util.ArrayList;
import java.util.Collection;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Inheritance;
import javax.persistence.InheritanceType;
import javax.persistence.OneToMany;

@Entity
@Inheritance (strategy=InheritanceType.JOINED)
public class PageContent {
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private Long pageContentId;
    @Column(name="PAGE_CONTENT_NAME", nullable=false)
    private String pageContentName;
    @Column(name="LOCATION", nullable=false)
    private String location;

    @OneToMany(cascade=CascadeType.REMOVE)
    private Collection<Group> groups = new ArrayList<Group>();

    public Long getPageContentId() {
        return pageContentId;
    }
    public void setPageContentId(Long pageContentId) {
        this.pageContentId = pageContentId;
    }
    public String getPageContentName() {
        return pageContentName;
    }
    public void setPageContentName(String pageContentName) {
        this.pageContentName = pageContentName;
    }
    public String getLocation() {
        return location;
    }
    public void setLocation(String location) {
        this.location = location;
    }
    public Collection<Group> getGroups() {
        return groups;
    }
    public void setGroups(Collection<Group> groups) {
        this.groups = groups;
    }

} 
```

图像.java

```
package com.youthministry.domain;

import javax.persistence.Entity;

@Entity
public class Image extends PageContent {
    private String pathToImage;
    private String altText;
    private String titleText;

    public String getPathToImage() {
        return pathToImage;
    }
    public void setPathToImage(String pathToImage) {
        this.pathToImage = pathToImage;
    }
    public String getAltText() {
        return altText;
    }
    public void setAltText(String altText) {
        this.altText = altText;
    }
    public String getTitleText() {
        return titleText;
    }
    public void setTitleText(String titleText) {
        this.titleText = titleText;
    }

} 
```

文本输入.java

```
package com.youthministry.domain;

import javax.persistence.Entity;
import javax.persistence.Lob;

@Entity
public class TextEntry extends PageContent {

    private String contentTitle;
    @Lob
    private String contentBody;

    public String getContentTitle() {
        return contentTitle;
    }
    public void setContentTitle(String contentTitle) {
        this.contentTitle = contentTitle;
    }
    public String getContentBody() {
        return contentBody;
    }
    public void setContentBody(String contentBody) {
        this.contentBody = contentBody;
    }

} 
```

我试图解决这个问题，我的预感是它与我正在使用的 CascadeType 有关，我曾认为在删除时将其更改为 Cascade，而不是删除了 Group Entity 的重复插入，但是我仍然收到上述例外。

这是 git repo 的链接：http: [//github.com/dmcquillan314/YouthMinistryHibernate](http://github.com/dmcquillan314/YouthMinistryHibernate)

提前感谢任何帮助。

以下是所有相关数据库表的创建表脚本：

```
CREATE TABLE `PageContent_GROUP_DETAILS` (
  `PageContent_pageContentId` bigint(20) NOT NULL,
  `groups_groupId` bigint(20) NOT NULL,
  UNIQUE KEY `groups_groupId` (`groups_groupId`),
  KEY `FK43215F8D912C9AF9` (`PageContent_pageContentId`),
  KEY `FK43215F8D11E7050D` (`groups_groupId`),
  CONSTRAINT `FK43215F8D11E7050D` FOREIGN KEY (`groups_groupId`) REFERENCES `GROUP_DETAILS` (`groupId`),
  CONSTRAINT `FK43215F8D912C9AF9` FOREIGN KEY (`PageContent_pageContentId`) REFERENCES `PageContent` (`pageContentId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1

CREATE TABLE `Image` (
  `altText` varchar(255) DEFAULT NULL,
  `pathToImage` varchar(255) DEFAULT NULL,
  `titleText` varchar(255) DEFAULT NULL,
  `pageContentId` bigint(20) NOT NULL,
  PRIMARY KEY (`pageContentId`),
  KEY `FK437B93B4AAD3F6E` (`pageContentId`),
  CONSTRAINT `FK437B93B4AAD3F6E` FOREIGN KEY (`pageContentId`) REFERENCES `PageContent` (`pageContentId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1

CREATE TABLE `PageContent` (
  `pageContentId` bigint(20) NOT NULL AUTO_INCREMENT,
  `LOCATION` varchar(255) NOT NULL,
  `PAGE_CONTENT_NAME` varchar(255) NOT NULL,
  PRIMARY KEY (`pageContentId`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1

CREATE TABLE `GROUP_DETAILS` (
  `groupId` bigint(20) NOT NULL AUTO_INCREMENT,
  `groupDesc` varchar(255) DEFAULT NULL,
  `GROUP_NAME` varchar(255) NOT NULL,
  PRIMARY KEY (`groupId`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:40:05.553

你正在做`groups_groupId`独一无二的。

但是`PageContent`类中的关系是`OneToMany`。

在关系表中将如下所示。

```
PageContentID GroupID
1             2
1             1
1             3
2             1
2             3 
```

因此，在此关系表中使任何列唯一都是不行的。

我的意思是让你删除

```
UNIQUE KEY `groups_groupId` (`groups_groupId`), 
```

从

```
CREATE TABLE `PageContent_GROUP_DETAILS` (
 `PageContent_pageContentId` bigint(20) NOT NULL,
 `groups_groupId` bigint(20) NOT NULL,
 UNIQUE KEY `groups_groupId` (`groups_groupId`),  
 KEY `FK43215F8D912C9AF9` (`PageContent_pageContentId`),  
 KEY `FK43215F8D11E7050D` (`groups_groupId`),  
 CONSTRAINT `FK43215F8D11E7050D` FOREIGN KEY (`groups_groupId`) REFERENCES `GROUP_DETAILS` (`groupId`),  
 CONSTRAINT `FK43215F8D912C9AF9` FOREIGN KEY (`PageContent_pageContentId`) 
 REFERENCES `PageContent` (`pageContentId`)) 
 ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

# codeigniter - Composer 破坏了 Codeigniter 中现有的自动加载

> ID：15801705
> 
> 赞同：6
> 
> 时间：2013-04-04T02:49:06.817
> 
> 标签：codeigniter, composer-php

我正在使用 Codeigniter 使用此处描述的方法对一些核心类进行自动加载：

[http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY)

```
function __autoload($class)
{
 if(strpos($class, 'CI_') !== 0)
 {
  @include_once( APPPATH . 'core/'. $class . EXT );
 }
} 
```

但是，一旦我安装了 composer（为了使用 Eloquent），这个功能就不再起作用了。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T08:42:11.487

__autoload 是旧的、已弃用的自动加载方式，因为您只能拥有一个。

您应该使用[spl_autoload_register](http://php.net/manual/en/function.spl-autoload-register.php)注册您的自动加载器。例如：

```
function customCIAutoload($class)
{
 if(strpos($class, 'CI_') !== 0)
 {
  @include_once( APPPATH . 'core/'. $class . EXT );
 }
}

spl_autoload_register('customCIAutoload'); 
```

这样你的自动加载器和作曲家将愉快地共存。

# python - np.array 中的广播函数调用

> ID：15801707
> 
> 赞同：4
> 
> 时间：2013-04-04T02:49:23.073
> 
> 标签：python, class, object, numpy, array-broadcasting

我正在尝试创建一个填充了一个对象的 NumPy 数组，我想知道是否有一种方法可以向整个数组广播，以便每个对象执行某些操作。

代码：

```
class player:
    def __init__(self,num = 5):
        self.num = num

    def printnum():
        print(self.num)
...

objs = np.array([player(5),player(6)],dtype=Object)
objs.printnum() 
```

就目前而言，这会返回一个错误。我尝试按照手册将 dtype 更改为：_object，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:49:20.067

一个 numpy 对象数组不继承该对象的方法。`ndarray`方法通常作用于整个数组

这也不适用于内置类型，例如：

```
In [122]: import numpy as np

In [123]: n = 4.0

In [124]: a = np.arange(n)

In [125]: n.is_integer()
Out[125]: True

In [126]: a.is_integer()
---------------------------------------------------------------------------
AttributeError: 'numpy.ndarray' object has no attribute 'is_integer' 
```

Numpy 广播是使用元素运算符完成的，例如添加：

```
In [127]: n
Out[127]: 4.0

In [128]: a
Out[128]: array([ 0.,  1.,  2.,  3.])

In [129]: n + a
Out[129]: array([ 4.,  5.,  6.,  7.]) 
```

如果您想基本上调用`print`数组中的所有元素，您可以简单地重新定义`.__repr__()`由`print`. 我会提醒您，通过覆盖该方法会丢失信息。

```
In [148]: class player:
   .....:     def __init__(self, num=5):
   .....:         self.num = num
   .....:     def __repr__(self):
   .....:         return str(self.num)
   .....:     

In [149]: objs = np.array([player(5), player(6)])

In [150]: objs
Out[150]: array([5, 6], dtype=object)

In [151]: print objs
[5 6] 
```

即使它看起来像，但这并不相同`np.array([5,6])`：

```
In [152]: objs * 3
----------------------
TypeError: unsupported operand type(s) for *: 'instance' and 'int' 
```

在那里你可以看到覆盖的缺点`__repr__`。

更简单的方法是使用您当前的`printnum()`方法，但在循环中调用它：

```
In [164]: class player:
   .....:     def __init__(self, num=5):
   .....:         self.num = num
   .....:     def printnum(self):
   .....:         print(self.num)
   .....:         

In [165]: for p in objs:
   .....:     p.printnum()
   .....:
5
6 
```

或者，也许定义您的方法以返回一个字符串而不是打印一个，然后进行列表理解：

```
In [169]: class player:
   .....:     def __init__(self, num=5):
   .....:         self.num = num
   .....:     def printnum(self):
   .....:         return str(self.num)
   .....: 

In [170]: objs = np.array([player(5), player(6)])

In [171]: [p.printnum() for p in objs]
Out[171]: ['5', '6'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:50:16.933

代码中的几个拼写错误：`printnum()`需要`self`arg 和`Object`->`object`

```
class player:
    def __init__(self, num=5):
        self.num = num

    def printnum(self):
        print(self.num)

objs = np.array([player(5),player(6)], dtype=object)

# It's not a "broadcast" (what you mean is map), but it has the same result
# plus it's pythonic (explicit + readable)
for o in objs:
    o.printnum() 
```

看起来您真正想要做的是创建一个生成器对象。谷歌`python generator yield`，你会得到一些这样的[例子](https://stackoverflow.com/q/1995418/623735)

# javascript - 如何禁用页面上的所有 onclick 事件

> ID：15801713
> 
> 赞同：0
> 
> 时间：2013-04-04T02:50:50.380
> 
> 标签：javascript, jquery, onclick

嗨，我想禁用页面上的所有 onclick 事件，我这样写：

```
window.onclick = anyfunction;
document.onclick=anyfunction;
function anyfunction() {}; 
```

这是工作，但如果页面包含此代码

```
$("body").click(function () { 
  anyfunctions();
}); 
```

它会运行。即使我添加

> document.body.onclick

Jquery 代码再次运行。我想在不使用 jquery 库的情况下使用 javascript 禁用所有 onclick 函数（java 脚本和 jquery 和 ...）

目标是阻止弹出窗口 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T03:44:38.057

```
$("*").unbind("click"); // Removes all click handlers added by javascript from every element
$("[onclick]").removeAttr("onclick"); // Finds all elements with an 'onclick' attribute, and removes that attribute 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-24T11:47:36.687

这个 css 可能会以更好的方式帮助你。

```
function disableEvents()
{
$('#divname').css('pointer-events','none');
} 
```

随时随地调用此函数，以停止页面上的点击事件。这将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T03:35:25.333

你也可以试试

```
$('*').click(function(e){e.preventDefault();}); 
```

另请参阅 -[如何防止执行 onclick 语句？](https://stackoverflow.com/questions/2771498/how-to-prevent-onclick-statements-from-being-executed)

和 -[使用 jQuery 防止 onclick 操作](https://stackoverflow.com/questions/1756425/prevent-onclick-action-with-jquery)

# jquery - 在 jquery 中使用 :contains 进行 xml 解析

> ID：15801715
> 
> 赞同：0
> 
> 时间：2013-04-04T02:50:55.427
> 
> 标签：jquery, xml, xml-parsing, contains

我正在尝试从包含非常无用标签的大型 .xml 文件中获取数据。这些标签几乎都是一样的，我对 xml 输出无能为力。这些 xml 文档会定期更新，我希望自动化一个流程，让网站轻松获取相关数据。我希望获取 xml 文件并使用 jquery 中的 :contains() 操作，但我似乎无法使其工作。

[XML文件在这里](http://pastebin.com/8GmYaM4k)

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
</head>
<body>
<p id="manpower"></p>
<script>
$(document).ready(function(){
$.ajax({
    type: "GET",
    url: "test.xml",
    dataType: "xml",
    success: function(xml) {
    $title = $(xml).find( "Key");

    $( "#manpower" ).append( $title.text() );
    }
});
});
</script>
</body>
</html> 
```

所以上面的代码工作正常，它给出了所有的“键”，但是我想先找到那个 :contains('time_cost') 然后遍历子级和层次结构到 xml 文件末尾的人力数据。我需要这样做的原因是因为在完整文件中有多个对人力的引用，但 time_cost 是唯一的。如果有人可以帮助至少获得最接近的功能，我将不胜感激。

我试过了：

```
$title = $(xml).find( "Key:closest('time_cost')" ); 
```

但它不起作用。我对 jQuery 很陌生，所以我可能正在做一些非常微不足道的事情？

这是一个本地 jsFiddle 版本：http: [//jsfiddle.net/yN3Sj/4/](http://jsfiddle.net/yN3Sj/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:20:04.373

你为什么不做类似的事情，它会给出`Value`有 key 的元素`manpower`。

```
xmlDoc = $.parseXML( xml ),
$xml = $( xmlDoc ),
$time_cost = $(xml).find( "Key:contains('time_cost')" ),
$manpower = $('Key:contains("manpower")', $time_cost.parent()).parent(); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/yN3Sj/7/)

# ruby - 未初始化的常量 Bot::Wordplay (NameError) 从开始 Ruby 教程

> ID：15801717
> 
> 赞同：0
> 
> 时间：2013-04-04T02:51:05.160
> 
> 标签：ruby, nameerror

目前正在阅读《Beginning Ruby》第 12 章，它构建了一个对话机器人。运行 basic_client.rb 文件时，机器人会加载。当给定输入“我讨厌电视”时，机器人应该识别带有“讨厌”一词的模式并根据该模式返回响应。

相反，它会从 bot 文件中返回一些名称错误。这些都与 wordplay.rb 文件相关，但我不确定是什么原因造成的。任何帮助，将不胜感激。

```
/bot.rb:73:in `block (2 levels) in possible_responses': uninitialized constant Bot::Wordplay (NameError)
/bot.rb:69:in `collect'
/bot.rb:69:in `block in possible_responses'
/bot.rb:59:in `each'
/bot.rb:59:in `possible_responses'
/bot.rb:27:in `response_to'
from basic_client.rb:8:in `<main>' 
```

正在运行的文件：basic_client.rb

```
`require './bot'

bot = Bot.new(:name => 'Fred', :data_file => 'fred.bot')

puts bot.greeting

while input = gets and input.chomp != 'end'
puts '>> ' + bot.response_to(input)
end

puts bot.farewell` 
```

所需的bot.rb：

```
require 'yaml'
require './wordplay'

class Bot
attr_reader :name

def initialize(options)
    @name = options[:name]  || "Unnamed Bot"
    begin
        @data = YAML.load(File.read(options[:data_file]))
    rescue
        raise "Can't load bot data"
    end
end

def greeting
    random_response :greeting
end

def farewell
    random_response :farewell
end

def response_to(input)
    prepared_input = preprocess(input.downcase)
    sentence = best_sentence(prepared_input)
    responses = possible_responses(sentence)
    responses[rand(responses.length)]
end

private

def random_response(key)
    random_index = rand(@data[:responses][key].length)
    @data[:responses][key][random_index].gsub(/\[name\]/, @name)
end 

def preprocess(input)
    perform_substitutions(input)
end

def perform_substitutions(input)
    @data[:presubs].each { |s| input.gsub!(s[0], s[1]) }
    input
end

def best_sentence(input)
    hot_words = @data[:responses].keys.select do |k|
        k.class == String && k =~ /^\w+$/
    end

    WordPlay.best_sentence(input.sentences, hot_words)
end

def possible_responses(sentence)
    responses = []

    # Find all patterns to try to match against
    @data[:responses].keys.each do |pattern|
        next unless pattern.is_a?(String)

        # For each pattern, see if the supplied sentence contains 
        # a match. Remove substitution symbols (*) before checking.  
        # Push all responses to the responses array.

        if sentence.match('\b' + pattern.gsub(/\*/, '') + '\b')
            # If the pattern contains substitution placeholders, perform the substitutions
            if pattern.include?('*')
                responses << @data[:responses][pattern].collect do |phrase|
                    # Erase everything before the placeholder, leaving everything after it
                    matching_section = sentence.sub(/^.*#{pattern}\s+/, '')
                    # Then substitute the text after the placeholder with the pronouns switched
                    phrase.sub('*', Wordplay.switch_pronouns(matching_section))
                end
            else
                responses << @data[:responses][pattern]
            end
        end
    end

    # If there were no matches, add the default ones
    responses << @data[:responses][:default] if responses.empty?
    # Flatten the blocks of responses to a flat array
    responses.flatten
end
end 
```

文字游戏文件：

```
class String
def sentences
    self.gsub(/\n|\r/, ' ').split(/\.\s*/)
end

def words
    self.scan(/\w[\w\'\-]*/)
end
end

class WordPlay
def self.switch_pronouns(text)
    text.gsub(/\b(I am|You are|I|You|Your|My|Me)\b/i) do |pronoun|
        case pronoun.downcase
        when "i"
            "you"
        when "you"
            "me"
        when "me"
            "you"
        when "i am"
            "you are"
        when "you are"
            "i am"
        when "your"
            "my"
        when "my"
            "your"
        end
    end.sub(/^me\b/i, 'i')
end

def self.best_sentence(sentences, desired_words)
    ranked_sentences = sentences.sort_by do |s|
        s.words.length - (s.downcase.words - desired_words).length
    end

    ranked_sentences.last
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:14:09.890

ruby 语言的变量和内容是区分大小写的。

因此，您需要在`Wordplay`任何地方使用相同的方式来编写单词。

我建议`class Wordplay`用小写 P 写。另一种选择是用大写 P 写另一个出现，就像 Greg Guida 建议的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:44:09.120

第 73 行文字游戏中的 p 应为大写

# java - 尝试使用 64 位 Java 连接到 SQL Server 2008

> ID：15801719
> 
> 赞同：1
> 
> 时间：2013-04-04T02:51:24.957
> 
> 标签：java, jdbc

我正在尝试在另一个具有集成身份验证的机器上连接到 SQL Server 2008。我的环境包括64位Java 7、64位Eclipse和64位Windows 7。我使用微软提供的JDBC驱动。32 位 Java 一切正常。但是，使用 64 位 Java，我得到了以下结果：

“警告：无法加载 sqljdbc_auth.dll 原因：C:\Program Files (x86)\Microsoft JDBC Driver 4.0 for SQL Server\sqljdbc_4.0\enu\auth\x86\sqljdbc_auth.dll：无法加载 IA 32- AMD 64 位平台上的位 .dll ..."

我找到了[http://msdn.microsoft.com/en-us/library/ms378428.aspx](http://msdn.microsoft.com/en-us/library/ms378428.aspx)，但那里的建议似乎都不起作用。具体来说，

*   我将“sqljdbc_4.0\enu\auth\x64\sqljdbc_auth.dll”复制到“sqljdbc_4.0\enu”、“C:\Windows”和“C:\Windows\System32”。得到同样的错误。

*   我在 Eclipse 的 VM 参数中设置了“-Djava.library.path=C:\Program Files (x86)\Microsoft JDBC Driver 4.0 for SQL Server\sqljdbc_4.0\enu\auth\x64”，然后我得到：

“错误：无法找到或加载主类文件”

任何想法？不知道为什么它使用 32 位 sqljdbc_auth.dll？AFAIK，sql server 2008 是 64 位的。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:40:09.857

x86 位于 windows 的系统路径中，可能在 x64 之前被拾取。

搜索 x86 dll 并将其删除并将 x64 dll 放在那里。

设置 VM 参数时，请确保附加它而不是替换它。错误：无法找到或加载主类文件可能是由于类路径问题而发生的。

# matlab - 在 Matlab 中使用二进制非对称通道进行 AWGN 仿真

> ID：15801721
> 
> 赞同：1
> 
> 时间：2013-04-04T02:51:50.247
> 
> 标签：matlab

我环顾四周，但找不到在 matlab 中模拟二进制不对称通道的解决方案。我应该模拟一个 BSC（二进制对称通道）以及一个不对称通道，误差概率为 0.001。

我设法进行二进制对称模拟（对于想要使用它的人）

```
r = rand(1000000,1);    % uniform data set generation
x = zeros(1000000,1);   % data to be sent initialised 

for i = 1:1000000       % mapped to BPSK signal (-1,1)
if r(i,1) >= 0.5
    x(i,1) = 1;
else
    x(i,1) = -1;
end
end

SNR = qfuncinv(0.001);
SNRdB = 10*log(SNR);
y = awgn(x,SNRdB);    
y = awgn(x,9.79982258);    %noise added to inputs through Signal to noise 
               %ratio

for i = 1:1000000
if(abs(y(i,1) - 1) < abs(y(i,1) + 1) )    %between -1 and 1
    y(i,1) = 1;                         %map back through 
else            %minimum distance estimations
    y(i,1) = -1;
end

if(x(i,1) == y(i,1))    % determine if estimation errors are made
    r(i,1) = 0; 
else
    r(i,1) = 1;
end
end

errors = sum(r);
sprintf('%0.8f',errors/1000000)     %show error percentage 
```

好吧，我仍然需要进行非对称通道模拟，但找不到使用 matlab 完成此任务的线索。

将感谢任何解决此问题的实现的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:54:19.400

如果我错了，请纠正我，但非对称二进制通道是一个二进制通道，它的概率误差从 0 到 1 与从 1 到 0 不同。所以，你的代码应该如下所示：

```
function channel_simulation(BER1,BER2,Nbits)

    % BER1: prob 0->1
    % BER2: prob 1->0

    if nargin <3, Nbits = 10^6; end

    % Data generation mapped to BPSK signal (-1,1)
    r = rand(Nbits,1);   
    x = 2*(r>=0.5)-1;

    % Noise (channel 1)
    SNRdB1 = 10*log(qfuncinv(BER1));
    y1 = awgn(x,SNRdB1);    
    y1 = 2*(abs(y1-1)<abs(y1+1))-1;
    r1=(x~=y1);

    % Noise (channel 2)
    SNRdB2 = 10*log(qfuncinv(BER2));
    y2 = awgn(x,SNRdB2);    
    y2 = 2*(abs(y2-1)<abs(y2+1))-1;
    r2=(x~=y2);

    % Error percentage
    errors = sum(r1.*(x<0)+r2.*(x>0));
    fprintf('Prob: %0.8f\n',errors/Nbits)    

end 
```

您可以尝试调用它：

```
channel_simulation(0.001,0.01) 
```

# android - avcodec_find_encoder(AV_CODEC_ID_H264) 返回 null

> ID：15801722
> 
> 赞同：6
> 
> 时间：2013-04-04T02:51:56.770
> 
> 标签：android, ffmpeg, x264, avcodec

我正在构建一个 android 应用程序，它将对从相机预览捕获的图像进行编码，然后对其进行解码。我正在使用 ffmpeg 库进行编码和解码。要使用 x264 构建静态库，我使用了本教程。[http://dl.dropbox.com/u/22605641/ffmpeg_android/main.html](http://dl.dropbox.com/u/22605641/ffmpeg_android/main.html)。作为 ffmpeg 的源代码，如果我使用从教程中给出的链接下载的源代码，我可以构建它，但如果我使用从 git clone git://source.ffmpeg.org/ffmpeg 下载的源代码，则无法构建库。 git ffmpeg。我在 ubuntu 中构建了库，并在 Eclipse 的 Windows 7 中使用它。由于我只需要 h264 编码器和解码器，因此我对 ffmpeg 使用了以下代码，对教程稍作修改。

```
#!/bin/bash

NDK=~/Documents/android-ndk-r8e
PLATFORM=$NDK/platforms/android-8/arch-arm
PREBUILT=$NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86
PREFIX=/home/android-ffmpeg

function build_one
{
    ./configure --target-os=linux --prefix=$PREFIX \
    --enable-cross-compile \
    --enable-runtime-cpudetect \
    --disable-asm \
    --arch=arm \
    --cc=$PREBUILT/bin/arm-linux-androideabi-gcc \
    --cross-prefix=$PREBUILT/bin/arm-linux-androideabi- \
    --disable-stripping \
    --nm=$PREBUILT/bin/arm-linux-androideabi-nm \
    --sysroot=$PLATFORM \
    --enable-nonfree \
    --enable-version3 \
    --disable-everything \
    --enable-gpl \
    --disable-doc \
    --enable-avresample \
    --disable-ffplay \
    --disable-ffserver \
    --enable-ffmpeg \
    --disable-ffprobe \
    --enable-avcodec \
    --enable-libx264 \
    --enable-encoder=libx264 \
    --enable-encoder=libx264rgb \
    --enable-decoder=h263 \
    --enable-decoder=h264 \
    --enable-decoder=svq3 \   
    --enable-zlib \
    --enable-gpl \
    --enable-pic \
    --disable-devices \
    --disable-avdevice \
    --extra-cflags="-I/home/android-ffmpeg/include -fPIC -DANDROID -D__thumb__ -mthumb -Wfatal-errors -Wno-deprecated -mfloat-abi=softfp -mfpu=vfpv3-d16 -marm -march=armv7-a" \
    --extra-ldflags="-L/home/android-ffmpeg/lib"
make -j4 install
$PREBUILT/bin/arm-linux-androideabi-ar d libavcodec/libavcodec.a inverse.o
$PREBUILT/bin/arm-linux-androideabi-ld -rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib -L$PREFIX/lib  -soname libffmpeg.so -shared -nostdlib  -z,noexecstack -Bsymbolic --whole-archive --no-undefined -o $PREFIX/libffmpeg.so libavcodec/libavcodec.a libavfilter/libavfilter.a libavresample/libavresample.a libavformat/libavformat.a libavutil/libavutil.a libswscale/libswscale.a -lc -lm -lz -ldl -llog -lx264 --warn-once --dynamic-linker=/system/bin/linker $PREBUILT/lib/gcc/arm-linux-androideabi/4.4.3/libgcc.a
}

build_one 
```

在构建库之后，我已经能够构建 android ndk。我的 JNI 代码的一小部分在这里。

```
JNIEXPORT jint JNICALL Java_com_example_testjava_TestjniActivity_initencoder(JNIEnv* env,jobject obj){

    av_register_all();
    avcodec_register_all();
    codec = avcodec_find_encoder(AV_CODEC_ID_H264);
    if (!codec) {
      __android_log_write(ANDROID_LOG_INFO, "debug", "not found");                
       return -1;
    }
.
.
.
} 
```

当我运行调用 initencoder() 的 java 源代码时，我得到 -1 作为返回值，并且 logcat 打印“未找到”。这意味着 avcodec_find_encoder() 返回 null 并且如果条件正常。我不知道怎么了。为什么这个函数返回null？我进行了很多搜索，但没有找到任何可以引导我走向正确方向的解决方案。有人说要使用 avcodec_init()。但 ndk-build 命令失败并显示错误，说明未定义对 'avcodec_init()' 的引用。我已经开始构建库，因为我认为我可能从第一阶段就做错了。我在图书馆建设中是否犯了任何错误，比如没有启用我应该做的事情？请在这里帮助我。这对我来说有点紧迫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-28T10:24:27.450

# 问题：avcodec_find_encoder 返回NULL；

# 可能的原因：

1.  libx264 在编译或配置过程中出现问题。
2.  libx264 尚未打包成 apk 或未正确加载。

我的情况，两者都是。我在配置选项中有“--enable-libx264”，但没有提供与 android 兼容的 libx264 库和包含目录的路径，因此该库是在不支持 x264 的情况下编译的。希望这会节省某人的时间。

# 解决方案

在使用适当的工具链编译 x264 并通过设置 --extracflags 并将自编译的 x264 库和包含在 jni 文件夹中使它们在 ffmpeg 编译时可用于 ffmpeg 之后，它至少停止返回 NULL。

我的 ffmpeg 构建脚本：

```
NDK=$HOME/Android/Sdk/ndk-bundle
SYSROOT=$NDK/platforms/android-19/arch-arm/
TOOLCHAIN=$HOME/Android/Sdk/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64
CPREFIX=$TOOLCHAIN/bin/arm-linux-androideabi-

CPU=arm
PREFIX=$(pwd)/android/$CPU
ADDI_CFLAGS="-marm"

ADDI_CFLAGS="$ADDI_CFLAGS -I${NDK}/sources/x264 -I${NDK}/sources/x264/android/arm/include -L${NDK}/sources/x264/android/arm/lib -DANDROID -I${NDK}/sources/cxx-stl/system/include"
# -mfloat-abi=softfp -mfpu=neon"

ADDI_LDFLAGS="$ADDI_LDFLAGS -L${NDK}/sources/x264/android/arm/lib"
#--extra-cxxflags='-Wno-multichar -fno-exceptions -fno-rtti'

function build_it {
./configure \
    --prefix=$PREFIX    \
    --disable-static    \
    --enable-shared     \
    --disable-doc       \
    --disable-ffmpeg    \
    --disable-ffplay    \
    --disable-ffprobe   \
    --disable-ffserver  \
    --disable-avdevice  \
    --disable-doc       \
    --disable-symver    \
    --cross-prefix=$CPREFIX \
    --target-os=linux   \
    --arch=arm      \
    --enable-cross-compile  \
    --enable-gpl        \
    --enable-libx264    \
    --sysroot=$SYSROOT  \
    --extra-cflags="-Os -fpic $ADDI_CFLAGS" \
    --extra-ldflags="$ADDI_LDFLAGS" \
    $ADDITIONAL_CONFIGURE_FLAG

    make clean
    make
    make install

    echo "build done run make install"
}

build_it 
```

我的 x264 构建脚本：

```
#Android related

NDK=$HOME/Android/Sdk/ndk-bundle
SYSROOT=$NDK/platforms/android-19/arch-arm/
TOOLCHAIN=$HOME/Android/Sdk/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64
CPREFIX=$TOOLCHAIN/bin/arm-linux-androideabi-
CPU=arm
PREFIX=$(pwd)/android/$CPU
ADDI_CFLAGS="-marm"

export PATH="$PATH:$TOOLCHAIN/bin"

#PKG_CONFIG_PATH="$HOME/Android/Sdk/ndk-bundle/sources/FFmpeg/lib/pkgconfig" 

function build_it {
./configure \
    --prefix=$PREFIX \
    --bindir=$HOME/Android/Sdk/ndk-bundle/sources/bin \
    --enable-static \
    --host=arm-linux \
    --enable-pic \
    --sysroot=$SYSROOT \
    --cross-prefix=arm-linux-androideabi- \
    --enable-shared \
    --extra-cflags="-Os -fpic $ADDI_CFLAGS" \
    --extra-ldflags="$ADDI_LDFLAGS" \
    $ADDITIONAL_CONFIGURE_FLAG
}
build_it
make
make install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-18T12:42:46.963

我通过重用函数解决了这个问题

```
avcodec_register_all() 
```

前

```
avcodec_find_encoder(codec_id); 
```

该功能已被弃用，但它对我有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-05T10:39:58.190

```
av_register_all(); already calls avcodec_register_all() inside it. 
```

所以不要放 avcodec_register_all();

# css - Bulletproof 和 FontSquirrel 字体方法在 IE10 中不起作用

> ID：15801726
> 
> 赞同：3
> 
> 时间：2013-04-04T02:52:34.897
> 
> 标签：css, fonts, internet-explorer-9, font-face, internet-explorer-10

首先我应该提到我正在开发 Tumblr，所以我在服务器端的东西方面受到了一些限制。我知道这里有很多关于@font-face 的问题，但我只是找不到让它在 IE9 和 10 中工作的解决方案。我使用的是 FontSquirrel 语法：

```
@font-face {
    font-family: 'FontName';
    font-weight: 400;
    font-style: normal;
    src: url('fontname.eot');
    src: url('fontname.eot?#iefix') format('embedded-opentype'),
        url('fontname.woff') format('woff'),
        url('fontname.ttf') format('truetype'),
        url('fontname.svg#FontName') format('svg');
} 
```

直到我发现它在 Firefox 或 IE 9/10 中不起作用，所以我一直在转换为使用 base64 编码，基于 FontSquirrel 模板并在 base64fonts.com 上对 .woff 文件进行编码：

```
 @font-face {
        font-family: 'FontName';
        font-weight: 400;
        font-style: normal;
        src: url('fontname.eot');
    }
    @font-face {
        font-family: 'FontName';
        font-weight: 400;
        font-style: normal;
        src: url(data:application/x-font-woff;charset=utf-8;base64,......) format('woff'),
            url('fontname.ttf') format('truetype'),
            url('fontname.svg#FontName') format('svg');
    } 
```

（代表 base64 字符的巨型字符串的点串）。这在 Chrome 和 Firefox 中效果很好，并且似乎在 IE8 中也有效，但似乎没有多少按摩可以使 IE10 呈现除丑陋的系统字体之外的任何东西。

我试过单引号，双引号，没有引号。我已确保 .ttf 具有可嵌入权限。我什至尝试摆脱我的文档类型。我阅读了[防弹](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)语法并尝试了这些[示例](http://dl.getdropbox.com/u/39519/webfontsdemo/index.html)。当我在 IE10 中加载该示例页面时，除了几个之外，其他所有页面都呈现正常；但在我的页面上使用相同的语法不起作用。

如果您想查看我的可怕代码，请访问 gist.github.com/neuraldamage/5307289（如您所见，我已经尝试了很多字体），有问题的站点位于 neurodamage.tumblr.com。有任何想法吗？谢谢！

**编辑：**

想知道这是否是 IE 9/10 不喜欢 Tumblr 静态文件的问题？我的代码的真实示例来自 gist.github.com/neuraldamage/5307289：

```
@font-face {
    font-family: 'Gudea';
    font-weight: 400;
    font-style: normal;
    src: url('http://static.tumblr.com/6u5yyqj/cDgmgcczj/gudea-regular-webfont.eot');
    src: url('http://static.tumblr.com/6u5yyqj/cDgmgcczj/gudea-regular-webfont.eot?#iefix') format('embedded-opentype'),
        url('http://static.tumblr.com/6u5yyqj/Qkvmgcd2c/gudea-regular-webfont.woff') format('woff'),
        url('http://static.tumblr.com/6u5yyqj/LIamgcd1z/gudea-regular-webfont.ttf') format('truetype'),
        url('http://static.tumblr.com/6u5yyqj/K3Nmgcd0s/gudea-regular-webfont.svg#Gudea') format('svg');
} 
```

必须截断 base64 编码以使其适合：

```
@font-face {
font-family: 'FunctionPro';
font-weight: 400;
font-style: normal;
src: url('http://static.tumblr.com/6u5yyqj/OXFmhmdhl/functionpro-light-webfont.eot');
}
@font-face {
font-family: 'FunctionPro';
font-weight: 400;
font-style: normal;
src: url(data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAGvkAB......FQNRtdAAA=) format('woff'),
    url('http://static.tumblr.com/6u5yyqj/8SEmhmdin/functionpro-light-webfont.ttf') format('truetype'),
    url('http://static.tumblr.com/6u5yyqj/vIVmhmdi7/functionpro-light-webfont.svg#FunctionPro') format('svg');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T16:37:51.790

页面上的最终 html 标记显示了两个 DOCTYPE，只允许一个 DOCTYPE，并且它必须出现在任何元素之前。当您遇到如此严重的错误时，IE 通常会感到困惑并且在其他解析时也会失败。

与 w3c 验证相同：http: [//validator.w3.org/check ?uri=http%3A%2F%2Fneuraldamage.tumblr.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fneuraldamage.tumblr.com%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)

尽管修复所有 w3c 错误以调试此问题并不是必需的，但我认为这是阻止找到答案或首先导致问题的原因。

1号线

```
**<!DOCTYPE html>** 
```

第 13 行

```
**<html xmlns="http://www.w3.org/1999/xhtml">** 
```

如果可能，我会选择保留 html5 文档类型（第一个）

# c++ - 一个非常简单的 C++ 程序中的“未定义引用”错误

> ID：15801727
> 
> 赞同：1
> 
> 时间：2013-04-04T02:52:43.053
> 
> 标签：c++, linker, header-files, undefined-reference

我有一个简单的程序，我完全从[http://www.learncpp.com/cpp-tutorial/19-header-files/](http://www.learncpp.com/cpp-tutorial/19-header-files/)中的示例复制了它，因为我正在学习如何使用多个文件制作 c++ 程序。

该程序可以编译，但是在构建时，会出现以下错误：

/tmp/ccm92rdR.o：在 main 函数中：main.cpp:(.text+0x1a)：未定义对“add(int, int)”的引用 collect2：ld 返回 1 个退出状态

这是代码：

主文件

```
#include <iostream>
#include "add.h" // this brings in the declaration for add()

int main()
{
    using namespace std;
    cout << "The sum of 3 and 4 is " << add(3, 4) << endl;
    return 0;
} 
```

添加.h

```
#ifndef ADD_H
#define ADD_H

int add(int x, int y); // function prototype for add.h

#endif 
```

添加.cpp

```
int add(int x, int y)
{
    return x + y;
} 
```

有谁知道为什么会这样？

非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T03:03:14.163

代码几乎是完美的。

`#include "add.h"`在 中添加一行`add.cpp`。

将文件一起编译为`g++ main.cpp add.cpp`，它将生成一个可执行文件`a.out`

您可以运行可执行文件`./a.out`，它将产生输出“3 和 4 的总和为 7”（不带引号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:44:34.190

当有许多 .c 或 .cpp 源并且其中一些未编译时，可能会发生未定义的引用。

关于如何做到这一点的一个很好的“逐步”解释是[here](http://gittup.org/tup/ex_a_first_tupfile.html)

# ruby-on-rails-3.2 - Bundler 找不到 gem "simple_form" 的兼容版本

> ID：15801733
> 
> 赞同：0
> 
> 时间：2013-04-04T02:52:58.493
> 
> 标签：ruby-on-rails-3.2, bundler, client-side-validation

我很难尝试安装 gem 'client_side_validations-simple_form'。我的 Gemfile 看起来像

```
gem 'rails', '3.2.12'
gem 'turbolinks', '1.0.0'
gem 'simple_form', '2.1.0'

gem 'client_side_validations', '3.2.5'
gem "client_side_validations-simple_form", '2.0.1'
gem 'client_side_validations-turbolinks', '1.0.0' 
```

当我运行 Bundle install 我得到

```
Bundler could not find compatible versions for gem "simple_form":
  In Gemfile:
    client_side_validations-simple_form (= 2.0.1) ruby depends on
      simple_form (~> 2.0.3) ruby

    simple_form (2.1.0) 
```

我在这里错过了什么吗？有没有人遇到过同样的问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:15:52.133

您的客户端验证 gem 依赖于 simple_form 2.0.3，而您使用 2.1.0。所以基本上你的简单表单版本太新（或者你的 client_side_validations-simple_form 版本太旧）。

如果您使用的 client_side_validations-simple_form 版本是最新版本，则使用较旧版本的 simple_form，直到更新版本的 client_side_validations-simple_form 出现，该版本适用于较新版本的 simple_form。

目前：

```
gem 'simple_form', '2.0.3' 
```

# google-app-engine - Google App Engine 是否支持 C++？

> ID：15801735
> 
> 赞同：14
> 
> 时间：2013-04-04T02:52:59.550
> 
> 标签：google-app-engine

App Engine 主页指出“为 Python 环境编写的应用程序代码必须专门用 Python 编写。不支持用 C 语言编写的扩展。”

[https://developers.google.com/appengine/docs/whatisgoogleappengine](https://developers.google.com/appengine/docs/whatisgoogleappengine)

我们需要将 C/C++ 应用程序移植到 SaaS 服务。可以用 Google App Engine 完成吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-04T03:48:06.490

目前有四种可用于 Google App Engine 的运行时：Go、Java、Python 和 PHP。

这些不仅是唯一可用的运行时，而且您还受到语言功能的限制。您无法使用许多传统上可用的子系统来帮助您扩展 Web 应用程序。您链接的页面上的主要示例提到不允许打开套接字或写入文件系统。线程化或执行耗时超过一分钟的计算是另一个常见的限制。

> ## 沙盒
> 
> 应用程序在提供对底层操作系统的有限访问的安全环境中运行。这些限制允许 App Engine 跨多个服务器分发应用程序的 Web 请求，并启动和停止服务器以满足流量需求。沙盒将您的应用程序隔离在其自身安全、可靠的环境中，该环境独立于 Web 服务器的硬件、操作系统和物理位置。
> 
> 安全沙盒环境的限制示例包括：
> 
> *   应用程序只能通过提供的 URL 获取和电子邮件服务访问 Internet 上的其他计算机。其他计算机只能通过在标准端口上发出 HTTP（或 HTTPS）请求来连接到应用程序。
> *   应用程序无法在任何运行时环境中写入文件系统。应用程序可以读取文件，但只能读取使用应用程序代码上传的文件。应用程序必须使用 App Engine 数据存储区、内存缓存或其他服务来处理请求之间持续存在的所有数据。Python 2.7 环境允许读取、写入和修改字节码。
> *   应用程序代码仅在响应 Web 请求、排队任务或计划任务时运行，并且无论如何必须在 60 秒内返回响应数据。发送响应后，请求处理程序无法生成子进程或执行代码。

Google App Engine 的重点是编写基于它们提供的可扩展服务的单线程应用程序。与传统的 C/C++ 应用程序开发相比，这是一个相当大的范式转变，因为您需要使用 Google 的机制来存储数据、访问 Internet 上的其他资源、发送和接收电子邮件、缓存。这样做的原因是为了消除应用程序中的瓶颈，以便可以根据请求需求启动和拆除应用程序的大量实例。

将传统的 C/C++ 应用程序移植到 GAE（和许多其他 SaaS）很可能需要大量重构，以至于需要进行重写才能利用在 SaaS 平台上运行所获得的收益。

# objective-c - 通过 Touch Better 方法选择精灵

> ID：15801740
> 
> 赞同：0
> 
> 时间：2013-04-04T02:53:17.260
> 
> 标签：objective-c, cocos2d-iphone

从我的目标 c 和 cocos2d 编码的乞求开始，我一直在使用顺序搜索方法来选择一个精灵。每次检测到触摸时，我都会从数组列表中搜索每个对象，然后确定触摸是否在精灵区域上，如果我得到对象，然后我选择那个精灵。这是我知道的方法。

该方法的问题在于，如果对象列表变得很大，则可能需要时间，即使我们正在使用一个数组，它也会锁定该数组，我们对该数组不做任何事情。

除了这个，还有人知道更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T07:29:23.140

您可以使用`CCMenuItemImage`而不是`CCSprite`. 一旦项目被触摸，您就可以选择一个选择器，当然也可以使用以下方法应用像普通精灵一样的图像：

```
itemFromNormalImage:selectedImage:target:selector: 
```

您还必须创建一个菜单来包含此菜单项，否则触摸它们将不起作用。只需创建一个实例`CCMenu`并将项目添加到此菜单，然后将菜单添加到您的图层。

关于效率，你将不得不对这两种实现进行一些基准测试，因为这个更方便但不一定更快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:14:35.447

锁数组？然后再为对象使用一个指针。

```
 NSArray *array = [NSArray arrayWithArray:mSpriteArray];

    for(CCSprite *sprite in array)
    {
        if(CGRectContainsPoint([sprite boundingBox], touchPoint))
        {
          //touched...
        }
    } 
```

# c# - 将本地文件复制到网络共享驱动器问题

> ID：15801748
> 
> 赞同：-2
> 
> 时间：2013-04-04T02:53:45.607
> 
> 标签：c#, winforms

我正在使用下面的代码来检查网络驱动器上的目录是否存在。如果是，我复制文件；如果不是，我创建目录，然后将其复制过来。但是我遇到了问题。任何帮助将不胜感激。主要问题是 IO 异常，并显示找不到网络名称的消息。如果斜杠没有被转义，我的保存位置变量也看起来像。

```
string savelocation = @"\\network\" + comboBox1.SelectedItem + "\\" +
    comboBox2.SelectedItem+"\\"+Environment.UserName;

// When I check what savelocation is, it returns the unescaped string
// for example \\\\network\\ and so on

if (Directory.Exists(savelocation)) // this returns true even if it exists
{
    File.Copy(@"C:\Users\" + Environment.UserName + @"\test\" + label5.Text,
        savelocation + "\\" + label5.Text);
}
else {
    DirectoryInfo d = Directory.CreateDirectory(savelocation);
    // The line above says the network name cannot be found

    File.Copy(@"C:\Users\" + Environment.UserName + @"\test\" + label5.Text,
        "\\\\atlanta2-0\\it-documents\\filestroage\\" + comboBox1.SelectedItem +
        "\\" + comboBox2.SelectedItem + "\\" + Environment.UserName + label5.Text);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T03:16:20.660

好的，让我们稍微处理一下这段代码。首先让我们简化构建路径。我们有一个网络路径**和**一个本地路径。根据您当前的代码，网络路径是用几个变量`comboBox1`、`comboBox2`和构建的`Environment.UserName`，所以让我们做一些不同的事情：

```
var networkPath = Path.Combine(@"\\network",
    comboBox1.SelectedItem as string,
    comboBox2.SelectedItem as string,
    Environment.UserName); 
```

这将正确地放置`\`在每个字符串之间（即，如果已经有一个反斜杠，它就不会添加一个，但如果有必要的话会添加）。

现在让我们对本地路径做同样的事情：

```
var localPath = Path.Combine(@"C:\Users",
    Environment.UserName,
    "test",
    label5.Text); 
```

好的，我们快到了，但我们还有一个替代网络路径：

```
var alternativeNetworkPath = Path.Combine(@"\\atlanta2-0\it-documents\filestroage",
    comboBox1.SelectedItem as string,
    comboBox2.SelectedItem as string,
    Environment.UserName,
    label5.Text); 
```

现在，我已经怀疑这条路径的一件事是`\filestroage`，这实际上拼写错误。现在，如果文件夹的拼写很好，但我想知道它是否拼写错误。所以看看吧。好吧，让我们继续，现在我们已经构建了所有三个路径，它更容易阅读，我们可以轻松输出这些字符串以**确保**它们是正确的。我们来看看逻辑。它说**的是，如果`networkPath`存在则将其保存在那里**，但是，**如果它不存在则创建它并将其保存到`alternativeNetworkPath`.** 所以让我们这样做：

```
if (Directory.Exists(networkPath))
{
    File.Copy(localPath, networkPath);
}
else
{
    Directory.CreateDirectory(networkPath);
    File.Copy(localPath, alternativeNetworkPath);
} 
```

好吧，够简单了吧？但是您说 the`Directory.Exists`正在返回 true `even if it exists`。这几乎是预期的不是吗？如果目录存在，那么这个方法肯定会返回`true`，如果不存在，它就会返回`false`。然后你说`Directory.CreateDirectory`-`The line above says the network name cannot be found`这**只能意味着路径构建错误。**

所以在分解它之后，底线是这样的，正在建造的路径必须是一帆风顺的。但是，使用这种新模型，您应该能够更轻松地拉出这些路径***。***所以在我看来，整个方法看起来像这样：

```
var networkPath = Path.Combine(@"\\network",
    comboBox1.SelectedItem as string,
    comboBox2.SelectedItem as string,
    Environment.UserName);

var localPath = Path.Combine(@"C:\Users",
    Environment.UserName,
    "test",
    label5.Text);

var alternativeNetworkPath = Path.Combine(@"\\atlanta2-0\it-documents\filestroage",
    comboBox1.SelectedItem as string,
    comboBox2.SelectedItem as string,
    Environment.UserName,
    label5.Text);

if (Directory.Exists(networkPath))
{
    File.Copy(localPath, networkPath);
}
else
{
    Directory.CreateDirectory(networkPath);
    File.Copy(localPath, alternativeNetworkPath);
} 
```

所以现在让我们看看这些变量中的那些路径，你的问题应该会出现。

# php - 对齐mysql结果

> ID：15801750
> 
> 赞同：0
> 
> 时间：2013-04-04T02:53:57.317
> 
> 标签：php, html, mysql, css

我试图让我的查询结果像这样显示。

```
here  here  here

here  here  here

here  here  here 
```

...等等

但无论我尝试什么，他们最终都会这样..

```
Here

Here

Here

Here 
```

你得到了图片......老实说，我已经尝试了一切，但我无法让它发挥作用。

这是代码请忽略我的错误编码：/

```
<div class="box">
<div style="width: 90%; margin: 0 auto; text-align: center;">
<div style="width: 33%; float: left;">

<?php
$result = mysql_query("SELECT * FROM user_pokemon WHERE belongsto='". $_SESSION{'username'}."'AND (slot='0')");
while($row = mysql_fetch_array($result))
{   
$sql2 = "SELECT * FROM pokemon WHERE name='".$row['pokemon']."'";
$result2 = mysql_query($sql2) or die(mysql_error());
$battle_get2 = mysql_fetch_array($result2);

echo '<img src="pokemon/'.$row['type'] .''.$battle_get2['pic'].'" border=0>
</a>' ; 

$idd= mysql_real_escape_string($row['id']);
$iddd = strip_tags($idd);

?>

<form name="slot1" action="" method="post">

    <p>

        <select name="A" id="" >
          <option value="1">Slot 1</option>
          <option value="2">Slot 2</option>
          <option value="3">Slot 3</option>
          <option value="4">Slot 4</option>
          <option value="5">Slot 5</option>
          <option value="6">Slot 6</option>
        </select>
        <input type="hidden" name="token" id="token" value="<?php  echo $iddd ;  ?>" />
        <br />
        <input type="submit" class="submit" value="Add to Team" name="slot1">
</p>

</form>

<?php
echo $row['pokemon'];

?>

<p></p>

<?php
echo "Level:";
echo $row ['level'];
?>

<p></p>

<?php
echo "Gender:";
echo $row['gender'];
echo "<br />";
}
?>
</div>
</div>
</div> 
```

这是我拥有的CSS。

```
.box {
width: 90%;
background-color: #eaebd8;
border: 1px solid #00008B;
margin: 0 auto 10px;
padding: 10px;
} 
```

所以如果我能得到一些帮助，我将非常感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T02:58:39.627

要么使用表格，要么使用无序列表`ul`：

**工作小提琴：http:** [//jsfiddle.net/P5bAL/](http://jsfiddle.net/P5bAL/)

HTML：

```
<ul>
    <li>Data</li>
    <li>DAta</li>
</ul> 
```

CSS：

```
li{
display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T03:03:17.353

您的 div 测量所有内容的位置应该在循环内，以便它创建多个。

```
while($row = mysql_fetch_array($result))
{
?>
    <div style="width: 33%; float: left;">
        <?php
        //enter the rest of your content
        ?>
    </div>
<?php
} 
```

# jquery - 在脚本下方使用 jQuery 更改 HTML

> ID：15801753
> 
> 赞同：2
> 
> 时间：2013-04-04T02:54:46.420
> 
> 标签：jquery

有谁知道是否可以使用出现在脚本下方的 jQuery 更改 HTML？

我正在使用： `$("div.className").html("My changed HTML here");` 更改页面上的一些文本。但是，它似乎只有在该 HTML 出现在脚本位置上方的某个位置时才有效。是否可以让它在出现在脚本位置下方的 HTML 上工作？或者脚本是否需要是页面上加载的最后一件事？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T02:56:28.310

您需要将启用 jQuery 的代码放入一个`$(document).ready()`块中：

```
$(document).ready(function() {
    $("div.className").html("My changed HTML here");
}); 
```

您的代码不起作用，因为您正在寻找尚未创建的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:57:06.793

放入准备好的功能。然后它会工作。喜欢

```
 $(document).ready(function() {
    $("div.className").html("My changed HTML here");
}); 
```

# c++ - 如何创建访问 std::map 项的 const 成员函数

> ID：15801754
> 
> 赞同：3
> 
> 时间：2013-04-04T02:55:11.897
> 
> 标签：c++, map, constants

我试图仅返回而不是更改 a 中的值`std::map`。它可以工作，但是如果我`const`按应有的方式使用该功能，则会收到错误消息`No viable overloaded operator[] for type 'const std::map`。我的代码如下：

```
GLuint getCurrentColorAttribute() const {
    return m_programs[m_currentActiveProgram].attributes["SourceColor"];
} 
```

这是我的 IDE 中的错误图像： ![在此处输入图像描述](https://i.stack.imgur.com/D9Pvt.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T02:57:02.730

is not的`[]`运算符（因为如果不存在，它可以在映射中创建一个新条目），因此您不能从函数中调用它。`std::map``const``const`

您可以`at`改用`C++11`：

`return m_programs.at(m_currentActiveProgram).attribute["SourceColor"];`

# ruby-on-rails - 在 osx 10.8 上安装 ruby 的问题

> ID：15801756
> 
> 赞同：2
> 
> 时间：2013-04-04T02:55:30.800
> 
> 标签：ruby-on-rails, ruby, macos, rvm, homebrew

伙计们，我尝试使用该站点的指南在 mac 上安装 ruby​​，`http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/` 但是当我在 mac 终端上发出以下命令时：

```
\curl -L https://get.rvm.io | bash -s stable --rails --autolibs=enable 
```

我收到以下错误：

```
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-2.0.0-p0.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing requirements for osx, might require sudo password.
Already up-to-date.
Installing required packages: autoconf, automake, libtool, pkg-config, libyaml, readline, libxml2, libxslt, libksba, openssl, sqlite................................
Error running 'requirements_brew_libs_install autoconf automake libtool pkg-config libyaml readline libxml2 libxslt libksba openssl sqlite',
please read /usr/local/rvm/log/ruby-2.0.0-p0/package_install_autoconf_automake_libtool_pkg-config_libyaml_readline_libxml2_libxslt_libksba_openssl_sqlite.log
There were package installation errors, make sure to read the log.
Check Homebrew requirements https://github.com/mxcl/homebrew/wiki/Installation 
```

我尝试了很多方法来摆脱这个，但我根本没有任何线索。有没有人可以帮助解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:19:23.487

确保您拥有最新的 Xcode 并通过 [Xcode Preferences] -> [Downloads] 安装了命令行工具

如果再次安装时遇到问题，请以这种方式安装 rvm：

```
$ curl -L get.rvm.io | bash -s stable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:50:39.267

我也遇到了这个问题。原来我已经在多用户模式下安装了 rvm，它试图以 root 身份运行 brew，而 brew 似乎并不喜欢。在错误日志中，我看到如下内容：

```
[2013-04-04 11:40:12] requirements_brew_libs_install
Error: Cowardly refusing to `sudo brew install'
You can use brew with sudo, but only if the brew executable is owned by root.
However, this is both not recommended and completely unsupported so do so at 
your own risk. 
```

我完全卸载了 RVM (sudo rvm implode)，然后只为当前用户安装了它，之后一切顺利。

# javascript - 测试 d3（和其他基于 SVG）的 Web 应用程序

> ID：15801757
> 
> 赞同：39
> 
> 时间：2013-04-04T02:55:34.870
> 
> 标签：javascript, browser, svg, d3.js, automated-tests

我有一个 Web 应用程序，它使用[d3](http://d3js.org/)库进行一些复杂的基于 SVG 的可视化。

我对我的服务器端代码和 JavaScript 模型进行了自动化测试（我在我的 JavaScript 中使用类似于 MVC 的架构）。这些在每次提交时都在 Jenkins CI 服务器上运行。现在我需要弄清楚如何测试我的观点。

其他人如何解决这个问题，你使用什么工具？

我曾经的一些想法...

*   将生成的 SVG 序列化为文件并与基线进行比较
*   自动捕获浏览器图像并进行图像差异
*   还有什么？

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-04T22:25:00.670

The example you give are for testing the graphical output. For this you can use a screenshot diff tool like [PhantomCSS](https://github.com/Huddle/PhantomCSS), [Sikuli](http://www.sikuli.org/) or roll-up your own with [Resemble.js](http://huddle.github.io/Resemble.js/).

But if your question is more genrally about testing D3.js/SVG-based apps, as the title implies, you should look at the D3 [test suite](https://github.com/mbostock/d3/tree/master/test). Most tests don't even need an html fixture because they are basically testing the API. If the most important thing for you is the consistency of the visual result, go with a screenshot diff tool. For navigation and UX flow, you are better with browser automation like [Selenium](http://docs.seleniumhq.org/). But for unit testing, where you want to ensure having a consistent API and modular code, most test frameworks with spies, fixture and mocking capabilities will do (i.e, [Jasmine](https://github.com/pivotal/jasmine), [Vows](http://vowsjs.org/), [Mocha](http://visionmedia.github.com/mocha/)).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T23:45:37.793

我目前正在考虑的解决方案是...

1.  创建一个简单文件 (csv)，其中包含要捕获的 url 列表以及裁剪区域（参见 3）
2.  加载每个 url 并[使用 Selenium 捕获屏幕截图](https://stackoverflow.com/questions/3422262/take-a-screenshot-with-selenium-webdriver)
3.  使用 ImageMagick 从屏幕截图中裁剪可视化（所以我们只是测试可视化而不是完整的 ui）
4.  使用 ImageMagick 将图像与基线进行比较
5.  使用旧图像、新图像和差异图像生成 HTML 报告（对于任何不同的图像）
6.  为 CI 服务器生成 JUnit xml 输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T08:30:31.623

听起来[Selenium](http://docs.seleniumhq.org/)应该做你正在寻找的东西。它驱动 Web 浏览器，因此允许您检查浏览器中实际发生的情况，而不是假设 SVG 将正确呈现。它允许您将单元测试指定为一系列点击/击键，并且它与 Jenkins 集成得非常好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-17T04:55:31.697

捕获浏览器并验证图形是一个很好的测试。但我觉得这是 D3 本身的责任，而不是我们的代码。

我也有类似的问题。（[我的问题](https://stackoverflow.com/questions/21672695/what-are-unit-testing-strategies-for-d3js/21820996#21820996)）。请检查我在那里发布的答案。

# javascript - 创建新视图时在相似视图上使用类而不是 id

> ID：15801759
> 
> 赞同：0
> 
> 时间：2013-04-04T02:55:38.400
> 
> 标签：javascript, jquery, html, css, backbone.js

对不起这个可怕的标题，但基本上我正在做的是，我有一个模板，当按下加号按钮时会生成一个主干视图。这是一个非常简单的表单，有一些文本输入和选择下拉菜单。我想通过突出显示重复的区域来验证表单。目前在我的下划线模板中，我有

```
<div id="#index1-<%=dataId%>"> 
```

所以我的具有 dataId 属性的模型使 id 是唯一的。然后我可以按属性选择以红色突出显示该 div。当我在搜索如何选择以某些东西开头的 id 时，我遇到了这篇文章：[jquery 如何选择所有以“text-”开头的类元素？](https://stackoverflow.com/questions/4161869/jquery-how-to-select-all-the-class-elements-start-with-text)

作者讨论了如何使用类来代替。当我验证时，我正在做的是添加一类样式`error`以突出显示红色和其他东西。因此，遍历页面上使用加号按钮添加的所有子视图如下所示：

```
 var lastIndex1;
       _.each(this.childViews, function (childView) {
            var dataId = childView.model.get('dataId');

            var index1 = childView.$('#index1-' + dataId).val();
            if (lastIndex1 == index1) {
                $('#index1-' + dataId).addClass('error');
            } else {
                lastIndex1 = index1;
                $('#index1-' + dataId).removeClass('error');
            }
        }); 
```

所以基本上，我最终会遍历我的视图，如果当前视图有问题，我会添加我的`error`类。我想知道这个实现是否可以通过在 html 中使用某种类来改进，所以我根本不必使用 dataId。

原来我第一次写代码的时候，如果最后不加dataId，那么只会高亮其中一个不正确的id（因为多个item的id相同）。类可以适用于这种情况吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:29:45.293

if you are assigning a unique id to each element then it should work just the same as using a class name. Your issue may be with your first line in the `childView` function,. your `dataId` var may be getting the same value each time, and not the current item you are iterating over. Im not familiar with undescore, but you might try something like `var dataId = this.model.get('dataId');`

# file - 在codeigniter上传时拉我的头发

> ID：15801764
> 
> 赞同：1
> 
> 时间：2013-04-04T02:56:23.367
> 
> 标签：file, codeigniter, upload, selected

所以我不断收到错误消息，说我没有选择要上传的文件。我按照codeigniter的站点示例，搜索了很多主题，但没有成功。请帮助我确定我缺少什么或做错了什么。这只是一个简单的 xml 上传，就像几个 kb 的。

控制器：

```
<? if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class upload extends CI_Controller{

    function __construct()
    {
        parent::__construct();
        $this->load->helper(array('form', 'url'));
    }

    function index(){

        $this->load->view("uploadPage", array('error'=>''));

    }

    function theUpload(){
        echo "uploading";
        $config['upload_path'] = "./uploads/";
        $this->load->library('upload', $config);

        if(!$this->upload->do_upload('userfile')){
            $error=array('error'=>$this->upload->display_errors());
            $this->load->view("uploadPage", $error);
            echo "no upload";
        } else{
            echo "file uploaded";

        }
    }       
}
?> 
```

的HTML：

```
<body>

    <?php echo $error;?>
    <?php echo form_open_multipart('upload/theUpload');?>
    <input type="file" name="userfile" id="userfile"/>
    <input type="submit" name="submit" value="Upload File">
    </form>
</body> 
```

如果有帮助，这是我的 htaccess

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /kayokee/ci/
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#’system’ can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn’t in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename ’application’ to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn’t true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
# If we don’t have mod_rewrite installed, all 404′s
# can be sent to index.php, and everything works as normal.
# Submitted by: ElliotHaughin

ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:01:32.500

您为什么不尝试以下方法：

```
 <? if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Upload extends CI_Controller{

    function __construct()
    {
        parent::__construct();
        $this->load->helper(array('form', 'url'));
    }

    function index(){

        $this->load->view("uploadPage", array('error'=>''));

    }

    function theUpload(){
        echo "uploading";
        $config['upload_path'] = "./uploads/";
        $this->load->library('upload', $config);
        $filedata = array(        
          'userfile_name' => $_FILES['userfile']['name'],
          'userfile_size' => $_FILES['userfile']['size']
        );
        if(!$this->upload->do_upload($filedata)){
            $error=array('error'=>$this->upload->display_errors());
            $this->load->view("uploadPage", $error);
            echo "no upload";
        } else{
            echo "file uploaded";

        }
    }       
}
?> 
```

确保 userfile 是您在 HTML 中输入的文件类型的名称！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:04:40.247

控制器类名上传的第一个单词应该是像 Upload 这样的大写。文件夹必须是可写的，并且路径可以是绝对的或相对的。喜欢 `class Upload extends CI_Controller`

# asp.net - 在 IIS 7.5 中监视平均响应时间的优雅方法是什么？

> ID：15801768
> 
> 赞同：4
> 
> 时间：2013-04-04T02:56:48.533
> 
> 标签：asp.net, performance, iis, monitoring, response-time

我有一个在 .NET 和 IIS 7.5 上运行的 SaaS 应用程序。我想监控平均服务器响应时间，并在超过给定阈值时发送警报。有哪些优雅的方法可以做到这一点？

我已经想到了一些方法，但我想在开始任何这些轨道之前获得其他人的意见。

1.  某种服务器日志解析器。似乎是最明显的，但提取我正在寻找的指标可能有些困难。

2.  NuGet .NET HTTP 模块。是否有任何实现响应时间监控和警报的 NuGet 包？我找不到一个。

3.  自定义 .NET HTTP 模块。监控页面渲染时间，如果超过阈值则发送电子邮件。这可能是最灵活的解决方案，但需要一些实施工作。

4.  性能计数器。似乎应该有一个性能计数器，但我从来没有使用性能监视器很幸运。具体来说，我不喜欢每次启动它时都重新添加所有指标。我也不能真正让性能监视器自动发送电子邮件。

还有其他我没有想到的吗？哪种方法似乎最容易实施和维护？你自己试过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:42:07.877

我会选择#2。HTTP模块可用于存储请求开始和请求结束并将其存储到数据库中。

然后我会有一个单独的工作，每 X 分钟读取一次数据库，平均数据并发送报告。既然您的数据库中有数据，您就可以玩得开心并创建各种报告（例如一天中的忙碌时间、运行时间最长的请求、请求最密集的客户端等……）

恕我直言，这比性能计数器更好，因为它可以为您提供更精确的数据，而且您不需要每次都设置它。

# asp.net - .NET Web API + 静态 HTML + JS 的最佳身份验证方式

> ID：15801776
> 
> 赞同：3
> 
> 时间：2013-04-04T02:57:05.597
> 
> 标签：asp.net, rest, authentication, asp.net-web-api, jqxhr

我正在开发一个使用 REST .NET Web API 的 Web 应用程序。我的 Web API 是无状态的，我使用的是静态 HTML 和 JQuery 请求。

问题.... 进行登录/密码验证的最佳方法是什么？

申请流程：

1.  API XHR 请求
2.  状态为 401 的 API 响应
3.  JS重定向到登录页面
4.  API Authentication XHR 请求（带有登录名和密码）
5.  带有令牌的 API 响应
6.  新的 API XHR 请求（带有令牌）
7.  带有数据的 API 响应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:46:22.537

我相信这里的答案是视*情况而*定；这实际上取决于 API 背后的信息有多敏感。

如果我们谈论的是非常敏感的数据，我会实施[亚马逊使用的模型](http://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html)

对于大多数网站，您所描述的都很好。我会使用 https 来提高安全性。您可以在 cookie 中或作为自定义标头传输您的加密令牌。

在您的 API 控制器中，您可以使用 [Authorize] 属性来限制对那些需要身份验证的端点的访问。

您可以公开一个委托处理程序来处理所有请求并在令牌无效时以 401 响应，或者设置当前主体以便满足 Authorize 属性。

如果您需要任何代码示例，请告诉我，我以前做过。

# asp.net - 单击“编辑”按钮时，出现“指定参数超出有效值范围。”异常

> ID：15801778
> 
> 赞同：0
> 
> 时间：2013-04-04T02:57:20.957
> 
> 标签：asp.net, gridview

我想我检查了“如果（e.Row.RowType == DataControlRowType.DataRow）”但仍然无法工作“编辑”是单元格[3]“删除”是单元格[4]，当我点击编辑按钮时，它会给出我

指定的参数超出了有效值的范围。参数名称：index 说明：当前web请求执行过程中发生了未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.ArgumentOutOfRangeException：指定的参数超出了有效值的范围。参数名称：索引

源错误：

第 252 行：LinkBut​​ton lkDelete = (LinkBut​​ton)gv.Rows[i].Cells[4].Controls[0];

真的不知道哪里错了......

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
            {
                GridView gv = (GridView)sender;

                if (e.Row.RowType == DataControlRowType.DataRow)
                {
                    for (int i = 0; i < gv.Rows.Count; i++)
                    {
                        LinkButton lkDelete = (LinkButton)gv.Rows[i].Cells[4].Controls[0];
                        lkDelete.OnClientClick = "return confirm(' Are you sure you want to delete this item?');";
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:59:56.587

首先，当每个数据行都绑定到 GridView 控件中的数据时，会引发[RowDataBound事件。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)所以你不需要像现在这样循环遍历网格。

其次，除非索引超出范围，否则您的代码似乎找到了，这可能在控件 [0] 处。我的建议是使用 FindControl 代替：

```
 protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
  {
     if (e.Row.RowType == DataControlRowType.DataRow)
     {
        LinkButton lkDelete = (LinkButton)e.Row.Cells[4].FindControl("lkDeleteId");
        lkDelete.OnClientClick = "return confirm(' Are you sure you want to delete this item?');";
     }
  } 
```

编辑：

在执行您正在执行的操作之前，您仍然需要检查[RowType](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.rowtype.aspx) ，因为您不想在 Header、Footer 或 Pager 行中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:42:38.220

每次绑定一行时，您似乎都在遍历每一行。要么删除循环：

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
    LinkButton lkDelete = (LinkButton)gv.Rows[i].Cells[4].Controls[0];
    lkDelete.OnClientClick = "return confirm(' Are you sure you want to delete this item?');";
} 
```

或在 GUI 中而不是在代码隐藏中添加删除确认：

```
<asp:TemplateField ShowHeader="False">
<ItemTemplate>
<asp:Button ID="deleteButton" runat="server" CausesValidation="False" CommandName="Delete" Text="Delete" OnClientClick="return confirm('Delete this item?');" />
</ItemTemplate>
</asp:TemplateField> 
```

# security - 地址栏中的用户名和密码

> ID：15801780
> 
> 赞同：0
> 
> 时间：2013-04-04T02:57:32.613
> 
> 标签：security, browser-cache, browser-detection, sniffer

一旦我登录到我的网站（聊天室），该 URL 包含 uid=myusername&pass=mypass 并且它会无限期地停留在那里，并且永远不会消失，即使在聊天时也是如此。

客人能否嗅探我的地址栏中的内容，尤其是这是一个与许多其他用户的聊天室。客人可以使用任何工具或方法来窃取这些信息吗？如果客人想闻它，他会怎么做（一步一步）......我已经知道我应该将方法更改为帖子，但这也是我的研究论文，关于攻击者如何即使不在同一网络上，也可以找出用户的地址栏。如果可能，请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:00:50.197

是的。他们可以通过多种方式发现这些信息。如果聊天室支持发送图像或链接，他们可以向您发送他们控制的机器上的图像或页面的 URL。当您的浏览器请求该项目时，它会传递一个带有引荐来源网址的标头。在这种情况下，它将是页面的 URL 及其参数。

另一种方法是，如果他们有权访问您托管服务的服务器上的访问日志。他们通常可以看到其中的参数。

我确定可能还有其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-07T01:40:10.443

为什么不使用 history.replaceState 来更新 url 而无需重新加载页面？

```
window.history.replaceState(statedata, title, YOUR_URL_WITHOUT_LOGIN_INFO); 
```

您可以在打开新窗口后文档准备好时调用此函数

# javascript - 如何使用 jquery ajax 正确地将 json 对象传递给烧瓶服务器

> ID：15801782
> 
> 赞同：7
> 
> 时间：2013-04-04T02:58:03.393
> 
> 标签：javascript, python, ajax, json, flask

我想将一个包含嵌套对象的 json 对象从我的客户端传递到我的服务器。

在客户端，我的数据结构如下所示：

```
var response = {};
response['screening'] = '1';
response['assistance'] = 'wheelchair access';
response['guests'] = {};
response['guests']['1'] = {}
response['guests']['1']['first'] = 'John'
response['guests']['1']['last'] = 'Smith'
response['guests']['2'] = {}
response['guests']['2']['first'] = 'Dave'
response['guests']['2']['last'] = 'Smith' 
```

我的 ajax 调用如下所示：

```
$.ajax({
  type: "POST",
  url: window.location.pathname,
  data: response
 }).done(function( msg ) {
   alert( "Data Saved: " + msg );
 }); 
```

将此数据发布到使用 python 烧瓶运行的服务器后，我使用 request.form 对象检查从客户端发布的内容。我希望以相同的方式构造数据，但是，这是服务器上的输出：

```
ImmutableMultiDict([('guests[1][first]', u'John'), ('screening', u'2'), ('guests[2][last]', u'Smith'), ('guests[2][first]', u'Dave'), ('assistance', u'wheelchair access'), ('guests[1][last]', u'Smith')]) 
```

如您所见， response['guests'] 对象被展平，其所有子对象，例如：

'客人[2][第一]'

... 只是一个字符串，而不是其父响应 ['guests'] 的元素。

有没有更好的方法将这个数据块从我的客户端发送到我的服务器，并正确维护其结构？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T03:10:29.823

您可以将对象作为 JSON 字符串发送：

```
var data = {
    screening: '1',
    assistance: 'wheelchair access',
    guests: [
        {
            first: 'John',
            last: 'Smith'
        },
        {
            first: 'Dave',
            last: 'Smith'
        }
    ]
};

$.ajax({
    type: 'POST',
    url: window.location.href,
    data: JSON.stringify(response),
    dataType: 'json',
    contentType: 'application/json; charset=utf-8'
}).done(function(msg) {
    alert("Data Saved: " + msg);
}); 
```

然后使用`request.json`来访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:28:40.127

在客户端，您需要将该 javascript 对象转换为 json 字符串。为此，您可以使用以下命令：

```
JSON.stringify(my_object) // This will return a string that you can pass in you ajax request 
```

然后在服务器端，您需要使用 json 模块将该对象转换为 python 字典：

```
import simplejson
my_new_object = simplejson.loads(my_json) // my_json is my_object from the client (previously called my_object) 
```

my_new_object 现在是一个 python 字典，你可以用它做任何你想做的事情

# django - 使用 Openshift 存储 SQLite 数据库的位置

> ID：15801788
> 
> 赞同：2
> 
> 时间：2013-04-04T02:58:48.660
> 
> 标签：django, python-2.7, openshift

我正在尝试使用 OpenShift 部署我的第一个 Django 应用程序。到目前为止，除了我要添加数据库时，一切都运行顺利。

从[这篇文章中](https://www.openshift.com/kb/kb-e1002/deploying-openshift-express-applications-using-sqlite)我发现我应该将数据库存储在数据目录中（例如，appname > data > database.db）。

我的 settings.py 包括：

```
'ENGINE': 'django.db.backends.sqlite3',  # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
'NAME': os.path.join(os.environ['OPENSHIFT_DATA_DIR'], 'sqlite3.db'),  # Or path to database file if using sqlite3. 
```

哪个看起来不错。当我收到错误时，我看到了路径：

```
'/var/lib/openshift/515ccff04382ec2acd00014c/app-root/data/sqlite3.db' 
```

这看起来也不错。但我仍然得到错误：

```
no such table: openshift_inventories 
```

现在，我已将表添加到数据库中，但是是否有一些特殊的 syncdb 命令或一些我必须运行而不是仅仅将其推送到网上的命令？这里的主要新手。我今天学会了“commit”和“push”这两个词。我很感激你们的任何想法。

最好的，布雷特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T06:47:51.903

这篇博文可能会对您有所帮助。

[http://appsembler.com/blog/django-deployment-using-openshift/](http://appsembler.com/blog/django-deployment-using-openshift/)

您将在帖子中看到他将 syncdb 命令添加到提交挂钩中。

请注意他的说明适用于 2.6 墨盒，由于我们设置虚拟环境的方式发生了变化，2.7 和 3.3 墨盒的设置会有所不同。

# asp.net - 缓存数据存储在哪里以及如何查询数据？

> ID：15801791
> 
> 赞同：0
> 
> 时间：2013-04-04T02:59:09.973
> 
> 标签：asp.net, linq, caching

我想使用 ASP.NET 缓存。我有两个问题：

1.  使用 ASP.NET 缓存时，缓存的数据存储在哪里？它是存储在服务器端还是客户端？如果默认情况下它是服务器端的，它对性能有何帮助？

2.  如何查询缓存的数据？我有很多缓存数据，我想根据过滤器检索记录。我必须为此使用 LINQ 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:03:53.213

缓存的数据存储在服务器端。它通过将服务器上的缓存数据保存在内存中并且应用程序可以轻松访问来提高性能。这种性能改进胜过从文件、数据库查询等读取数据。

“查询”缓存数据的最简单方法是通过缓存对象的键来引用缓存对象，然后像第一次缓存它时一样对待它。从这一点开始，一旦您的对象再次成为对象，您就可以根据需要引用数据，可以选择使用 LINQ 或任何其他适合缓存对象的方法。

# ios - 用户按下按钮时弹出日期选择器

> ID：15801795
> 
> 赞同：3
> 
> 时间：2013-04-04T02:59:50.543
> 
> 标签：ios, objective-c, datepicker

我是 ios 的初学者，请帮助我如何在用户按下按钮时显示弹出日历。我已经在下面有我的按钮

```
UIButton *button=[UIButton buttonWithType:UIButtonTypeRoundedRect];
button.frame= CGRectMake(60, 560, 150, 30);
[button setTitle:@"Select Date" forState:UIControlStateNormal];
[button addTarget:self action:@selector(buttonAction) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T06:26:49.843

**在 .h 文件中**

```
 UIDatePicker *datepicker;
 UIPopoverController *popOverForDatePicker; 
```

**请在 .h 文件中设置委托** `UIPopoverControllerDelegate`

**在 .m 文件中**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIButton *button=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame= CGRectMake(60, 560, 150, 30);
    [button setTitle:@"Select Date" forState:UIControlStateNormal];
    [button setBackgroundColor:[UIColor redColor]];
    [button addTarget:self action:@selector(buttonAction:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:button];
}
- (void)buttonAction:(UIButton *)sender
{
    UIViewController *viewController = [[UIViewController alloc]init];
    UIView *viewForDatePicker = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 200, 100)];

    datepicker = [[UIDatePicker alloc]initWithFrame:CGRectMake(0, 0, 200, 100)];
    datepicker.datePickerMode = UIDatePickerModeDate;
    datepicker.hidden = NO;
    datepicker.date = [NSDate date];
    [datepicker addTarget:self action:@selector(LabelChange:) forControlEvents:UIControlEventValueChanged];

    [viewForDatePicker addSubview:datepicker];
    [viewController.view addSubview:viewForDatePicker];

    popOverForDatePicker = [[UIPopoverController alloc]initWithContentViewController:viewController];
    popOverForDatePicker.delegate = self;
    [popOverForDatePicker setPopoverContentSize:CGSizeMake(200, 100) animated:NO];
    [popOverForDatePicker presentPopoverFromRect:sender.frame inView:self.view  permittedArrowDirections:(UIPopoverArrowDirectionUp|UIPopoverArrowDirectionDown| UIPopoverArrowDirectionLeft|UIPopoverArrowDirectionRight) animated:YES];
}
-(void)LabelChange:(id)sender
{
    NSDateFormatter *df = [[NSDateFormatter alloc]init];
    df.dateStyle = NSDateFormatterMediumStyle;
    NSLog(@"%@",[NSString stringWithFormat:@"%@",[df stringFromDate:datepicker.date]]);
} 
```

# list - 如何让 vbscript 将变量保存到文本文件中并在重新打开程序时调用它们？

> ID：15801796
> 
> 赞同：0
> 
> 时间：2013-04-04T03:00:01.857
> 
> 标签：list, text, vbscript, save

我在制作程序方面仍然很新鲜，我更喜欢输入我的代码。我正在尝试制作一个“保存”文件，我希望有人指出我正确的方向，就如何在“用户名”下保存变量列表并在关闭后（根据需要）调用它们和重新打开程序。单独的 .txt 文件将是首选。例如：

```
title: username24.txt
username24
yes
no
17
blue
555-624-9652
[blank]
first last 
```

和类似的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T05:55:26.073

计划：

1.  使用数组来存储数据
2.  使用 FileSystemObject 读/写
3.  使用拆分/连接来（取消）字符串化数据

演示：

```
Option Explicit

Const csFiNa = "username24.txt"
Const cnName = 0
Const cnTStamp = 1
Const cnBlank = 2
Const cnYesNo = 3

Dim oFS : Set oFS = CreateObject("Scripting.FileSystemObject")

Dim aData : aData = Array("username24", Now, "", True)
If oFS.FileExists(csFiNa) Then aData = Split(oFS.OpenTextFile(csFiNa).ReadAll(), vbCrLf)
aData(cnTStamp) = Now
aData(cnYesNo) = Not aData(cnYesNo)
WScript.Echo Join(aData, ", ")
oFS.CreateTextFile(csFiNa, True).Write Join(aData, vbCrLf) 
```

运行：

```
cscript 00.vbs
username24, 4/4/2013 7:50:14 AM, , False

type username24.txt
username24
4/4/2013 7:50:14 AM

False

cscript 00.vbs
username24, 4/4/2013 7:50:47 AM, , True 
```

# html - 谷歌浏览器本地存储保存在哪里？

> ID：15801798
> 
> 赞同：11
> 
> 时间：2013-04-04T03:00:11.150
> 
> 标签：html, local-storage

一些网站显示正在使用本地存储（在 Google Chrome：、`CTRL+I`资源选项卡、本地存储中）。

例如，StackOverflow 有一个“login-prefs”键和我的默认登录提供程序（？）。所以据我所知，它是一个 json 对象。

这些数据将存储在我的计算机上的什么位置（Ubuntu 和 Windows）？（或者一旦关闭浏览器就不会存储？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-20T21:22:41.273

本地存储数据存储在您的 chrome 配置文件（通常`Default`）下`Local Storage` `%LocalAppData%\Google\Chrome\User Data\Default\Local Storage`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-29T16:57:27.130

有两种类型的存储，键值对存储在 sqlite 数据库中，文件存储在您的配置文件中。这可能会在未来的 Chrome 版本中发生变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-30T01:00:46.673

谷歌浏览器将本地存储数据存储在以下位置：

```
\AppData\Local\Google\Chrome\User Data\Default\Local Storage\leveldb\006911.log 
```

我使用：windows 10 版本 62.0.3202.75（官方版本）（64 位）

# php - 如何从“youtube-mp3.org”API 响应中提取数据？

> ID：15801799
> 
> 赞同：2
> 
> 时间：2013-04-04T03:00:21.947
> 
> 标签：php

在我说什么之前，一个 SAMP 脚本编写者已经成功地做到了这一点。

这是他的代码。 [http://pastebin.com/RMVWdtzj](http://pastebin.com/RMVWdtzj)

当您键入此 url 时未`h`列出变量，您将被重定向到主页。

```
youtube-mp3.org/get?video_id=O-fyNgHdmLI 
```

如果您键入带有`h`列出的变量的 url `youtube-mp3.org/get?video_id=O-fyNgHdmLI&h=44348f6e92d82b85311aaf3d702d9080&r=1365043075897`，下载会自动开始。

因此，我需要获取`h`从该文件返回的名为的变量，以便将其合并到我的 url 中，并且下载将自动开始。

这就是我所拥有的。

```
$u2burl = file_get_contents("http://www.youtube-mp3.org/api/itemInfo/?video_id=$ytsong"); 
```

例如，如果`$ytsong = O-fyNgHdmLI`

然后`$u2burl`将返回

```
info = { "title" : "Creed - My Sacrifice (Video)", "image" : "http://i.ytimg.com/vi/O-fyNgHdmLI/default.jpg", "length" : "4", "status" : "serving", "progress_speed" : "", "progress" : "", "ads" : "", "pf" : "", "h" : "44348f6e92d82b85311aaf3d702d9080" }; 
```

我只需要将最后一部分`(44348f6e92d82b85311aaf3d702d9080)`放入变量中。

前任：`$hval = 44348f6e92d82b85311aaf3d702d9080`

但是如何让脚本自动执行此操作？

我不能每次都自己设置变量，因此我需要知道如何让脚本获取列出的数据`file_get_contents`并只抓取最后一部分`(44348f6e92d82b85311aaf3d702d9080)`并将其放入变量中。

似乎`h`随着每个用户的IP地址的变化......
这是一个长镜头，但有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:16:29.637

去除`info =`前缀和`;`后缀，并用于`json_decode`将字符串解码为关联数组。然后只需像对 key 的普通关联数组一样索引它`"h"`。

# bash - Bash编程：获取给定目录的唯一子文件夹的名称

> ID：15801800
> 
> 赞同：4
> 
> 时间：2013-04-04T03:00:25.747
> 
> 标签：bash, bash, bash

在[bash](/questions/tagged/bash "显示标记为“bash”的问题")中，我想获取以下唯一子文件夹的名称`a`：

```
cd /tmp; mkdir -p a/b; v=$(ls -1 a); echo "$v" 
```

输出：

```
b 
```

这就是我想要的。

这行得通，因为我*知道*里面只有一个子文件夹`a`。

随意假设在我的场景中的所有情况下都可以保证这一点。

让我感到不安的是，这个来自**[Bash pitfalls的建议](http://mywiki.wooledge.org/BashPitfalls)**

```
In addition to this, the use of ls is just plain unnecessary.
It's an external command whose output is intended specifically
to be read by a human, not parsed by a script. 
```

这更加令人生畏和精巧（来自与上面相同的链接）：

* * *

**解析 ls 的输出——一个永远不应该解析其输出的实用程序。**

* * *

它引起了我的共鸣，但这是*尝试*使用[bash](/questions/tagged/bash "显示标记为“bash”的问题") globbing，obv。不起作用：

```
 cd /tmp; mkdir -p a/b; v=a/*; echo "$v" 
```

输出：

```
a/* 
```

悲伤。

那么，我怎样才能得到一个变量赋值的*通配符呢？*

我*想*我知道如何在分配之外利用*globbing* ..

```
for d in a/*; do echo "$(basename $d)"; done 
```

输出：

```
b 
```

“正确答案”（TM）。

请您教我如何*正确执行此操作*并解释其背后的原理，好吗？

** 注意：我不喜欢这个命令的输出：**

```
cd /tmp; w='name with blanks'; mkdir -p "$w/b"; v=$(echo "$w"/*); echo "$v" 
```

这是：

```
name with blanks/b 
```

我只想得到：

```
b 
```

之后我*必须*使用`basename`，还是我可以`b`直接得到，不知何故？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T03:05:11.707

```
v=$(cd a;echo *) 
```

通配符在命令替换中扩展，`echo`并将输出它以便在分配中使用。

这`cd`将允许您只获取基本名称而无需调用`basename`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T11:55:03.610

很确定我写了那个陷阱句子。无论如何...您的失败是因为大括号扩展、glob 和分词不适用于标量分配。

```
printf -v v %s */ 
```

还有一个鲜为人知的技巧，只能使用 coreutils `printf(1)`（假设有多个目录）。

```
v=$(LC_COLLATE=C; /usr/bin/printf '%s\c' */) 
```

或者，这可能最接近您所追求的（GNU 查找）：

```
v=$(find . -maxdepth 1 -type d -name '[^.]?*' -printf %f -quit) 
```

另见： http: [//mywiki.wooledge.org/ParsingLs](http://mywiki.wooledge.org/ParsingLs)

# jquery-ui-tooltip - 如何实时更新 Jquery UI 工具提示中的内容？

> ID：15801805
> 
> 赞同：19
> 
> 时间：2013-04-04T03:01:26.873
> 
> 标签：jquery-ui-tooltip

我有一个元素，当悬停在上面时，它会显示项目的价格（在游戏中）。我正在使用 jQuery UI 工具提示来显示每个项目的信息。当商品被点击时，jQuery 捕获点击，使用 $.get() 请求来处理购买，并可以通过 JSON 和 jQuery 的 parseJSON 功能返回与商品相关的特定信息。

但是，每件商品的价格会随着每次购买而变化。这是某种形式的通货膨胀。我不知道如何访问 jQuery UI 工具提示的内容以更改其内容，以便在它仍然显示或什至未显示时，更改其内容的值以反映新价格。

我需要做什么才能实时更改该内容？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-01-19T17:38:36.570

您可以在初始化后更改 jQuery Tooltip 的内容，如下所示：

```
$( ".selector" ).tooltip( "option", "content", "Awesome title!" ); 
```

这是一个[演示](http://jsfiddle.net/gcURs/4/)。

有关更多详细信息，请参阅[API](http://api.jqueryui.com/tooltip/#option-content)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-22T20:36:12.953

我自己也遇到了这个问题，这里的其他答案并没有真正涵盖 OP 询问的问题（我遇到的同样的问题）：how to get the jQueryUI Tooltip to modify it's content when changed the "title" attribute of具有工具提示的项目。我有一个没有“标题”属性的输入，正在通过 AJAX 针对服务器进行验证，如果无效，我正在更改 CSS 类并添加一个“标题”来指示错误，并依靠 jQuery UI 的工具提示来“只是工作”。

我已经根据 JQUI 文档设置了工具提示，`$(document).tooltip()`用于获取默认的委托行为（它为每个具有“标题”属性的已启用项目显示一个工具提示）。然后，当我使用 ajax 验证时`$("#inputid").attr("title", "validation error");`，一切都很可爱，当我的输入悬停时，我的任何错误消息都显示为工具提示。

然而，在用户更正输入值后删除“title”属性，通过调用`$("#inputid").removeAttr("title");`被证明是麻烦的 - 因为“title”属性会神秘地重新出现，以及工具提示。

经过一番挖掘，我发现这是因为工具提示小部件将“标题”属性存储在另一个地方（使用`.data("ui-tooltip-content"...)`）以禁用浏览器的实际工具提示，然后将其恢复（这就是为什么“标题”属性神秘地重新 -出现。

因此，对 OP 问题的“正确”（或者可能是最简单的）答案是在更改（或删除）“title”属性之前暂时禁用 jQueryUI 的工具提示功能，然后重新启用它，让它重新检查内容并做正确的事。所以是这样的：

```
// first, disable tooltips
$(document).tooltip("disable");

// Make your change to the element's title
$("#inputid").attr("title", "new message");
    or ...
$("#inputid").removeAttr("title");

// re-enable tooltips
$(document).tooltip("enable"); 
```

这里的所有都是它的！如上所述使用的问题`.tooltip("option", "content", "some text")`是，您需要手动定义要显示的每个工具提示 - 如果您只想让工具提示与页面内容“正常工作”，那么肯定会进行大量不必要的编码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T03:14:55.617

我的第一个答案是错误的，对此感到抱歉。

```
<div id='mybody'>
  <p title='Some tooltip'>paragraph</p>
</div> 
```

javascript:

```
function reloadToolTip(text){
  $('#mybody p').tooltip({contents:text});
} 
```

您可以调用工具提示并更改内容。这将更改工具提示，但直到您重新悬停。

编辑：

我想我找到了一些可行的方法。只需关闭并重新打开工具提示。工具提示将包含新文本。

```
function reloadToolTip(text){
  $('#mybody p').tooltip({contents:text}).tooltip('close').tooltip('open');
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-03T18:26:24.417

这是另一个适合我的解决方案 - 只需将其添加到`$(function(){ // code here });`：

```
$(document).tooltip({
    content: function()
    {
        var $this = $(this);
        return $this.attr('title');
    }
}); 
```

这样做的好处是，如果您的`title`属性在运行时发生更改，则工具提示始终显示最新版本，因此它会自行“更新”。

从技术上讲，我没有测试这是否适用`attr('title')`（我猜它会）。

我的个人版本的不同之处在于我需要在工具提示中显示的不仅仅是纯文本，即 HTML 代码。所以这是我用于当前项目的代码：

```
<div class="title" data-note="This is my tooltip text<br>with line break"></div> 
```

和

```
$(document).tooltip({
    items: ".title",
    content: function()
    {
        var $this = $(this);
        if ($this.data('note') != '')
        {
            return unescape($this.data('note'));
        }
        else
        {
            return false;
        }
    }
}); 
```

请注意`items`，它允许我自定义元素以触发工具提示。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-28T22:28:31.493

为什么不这样做呢？

## HTML：

```
 <input class="input-change" id="input1" type="text" title="Test1" value="Input #1">
 <input class="input-change" id="input2" type="text" title="Test2" value="Input #2">
 <input class="input-change" id="input3" type="text" title="Test3" value="Input #3"> 
```

## jQuery：

```
// Every time a key is pressed (for the sake of example)
$(function(){
    // Initialize tooltip
    $('.input-change').tooltip();

    // Every time a key is pressed (again, for the sake of example)
    $(".input-change").keyup(function(){
        // Get the actual value of the input that has changed (again, for the sake of example)
        var inputValue = $(this).val();

        // Get the id of the input that has changed
        var idInputChanged = "#" + $(this).attr('aria-describedby');

        // Go directly to the <div> inside the tooltip and change the text
        $(idInputChanged + ' div').html('Text changed in real time without closing tooltip!:<br />' + inputValue);
    });
}) 
```

## JSFiddle 示例：

[http://jsfiddle.net/4MT5R/](http://jsfiddle.net/4MT5R/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-27T15:31:25.343

我的用例涉及在单击工具提示元素时设置成功/失败消息（用于将 url 复制到剪贴板），然后在元素失去悬停时重置它，以便在元素下一次悬停时显示原始消息。

我注意到双击时，即在工具提示仍打开时单击，当元素丢失并重新悬停时，新消息仍然存在。这就是我解决它的方法。我欢迎任何改进建议。

```
var msg = 'New message';

// Cache $target
var $target = $(event.target);

// First close tooltip, which should be open on hover
$target.tooltip('close');

// Get the original message
var oldMsg = $target.tooltip("option", "content");

// Set the tool tip to the success/fail message
$target.tooltip("option", "content", msg);

// Open the tooltip with the new message
$target.tooltip('open');

// For some reason, the tooltip doesn't close automatically
// unless the hide option is reset
$target.tooltip("option", "hide", {effect: "fade", duration: 1000});

// Set message back to original after close.
$target.on("tooltipclose", function (event, ui) {
    $(this).tooltip("option", "content", oldMsg);
}); 
```

# delphi - Delphi中的自动依赖编译

> ID：15801807
> 
> 赞同：1
> 
> 时间：2013-04-04T03:01:38.187
> 
> 标签：delphi, delphi-xe2

我对整个德尔福生态系统非常陌生。我正在使用 Rad Studio XE2。

假设我有一个非常简单的案例。

项目 A、B 和 C。C 依赖于 B。B 依赖于 A。

这也是我使用“项目依赖项”IDE GUI 设置依赖项的方式。

C 是生成可执行文件的项目。它被设置为“当前项目”。

如果我修改项目 B 中的文件并按 F5（运行），我希望只有项目 B 和 C 可以编译。

但是项目 A 总是重建！！即使我修改项目 C 中的源文件也是如此。

难道我做错了什么？如果是这样，关于它可能是什么的任何想法？

或者这只是 IDE 的工作方式？

客户拥有大量遗留代码库并使用 XE2。目前，他们通过右键单击需要重新编译的最低项目并选择“从这里构建...”来手动处理依赖项目的重新编译。

当我发现 XE2 中的“项目依赖”功能时，我认为这将是解决这个问题的方法。

*** 编辑 ***

行。我会尝试更好地解释这一点，因为我看到我的问题/担忧并没有真正得到解决。

我有一个 groupproject，它由许多 BPL 项目（据我了解输出一个 DLL）和一个可执行项目：C.exe 组成。

C.exe 引用所有 BPL 项目，包括 A.BPL 和 B.BPL。现在，如果我修改任何 BPL 项目中的代码并执行“运行”，C.exe 将启动，但我刚刚所做的更改不会生效，因为 BPL 项目没有重新编译。这其实是我的痛点。到目前为止，我使用的所有 IDE 也会重新编译依赖的 dll。当然，假设项目设置正确。现在回答我的问题。我不知道项目是否设置不正确，或者这是否是 IDE 的限制。如果我右键单击修改后的 BPL 项目并选择“从这里编译”，然后执行“运行”，我的更改将生效。但是，当我习惯于只运行可执行文件而不必担心重新编译依赖项时，必须这样做是很烦人的。

如上所述，我确实尝试使用 IDE 的“依赖项”功能。然而，这种行为很奇怪（对我来说）。即使源代码没有被修改，它也会重新编译依赖项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T07:24:32.180

你的期望是错误的。文档说：

***项目 > 依赖项***

*在项目组中创建项目依赖项。从列表中，在构建选定项目之前选择要构建的项目。*

您看到的行为是有意的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T05:54:37.440

首先，您说“F5（运行）”。是F9...

其次，您的系统可能存在时间问题。DCU 被某个过程所触及，或者正在发生类似的事情。

第三，你可以弄乱目录。你有：

```
Tools|Options
Environment Options|Delphi Options|Library-Win32
    (1) "Library Path:" Edit Box
    (2) "Debug DCU Path:" Edit Box 
```

另外，打开你的项目

```
Project | Options
Directories/Conditionals
(3) Search Path: Edit Box 
```

看看你那里有没有问题。此外，尝试从任何地方删除*所有*DCU（另请参阅临时目录等）。此外，如果您有 DPK，BPL 也一样。尝试通过创建一个名为“隐藏”（或其他）的子文件夹来“隐藏”它们。在此之后，如果需要，修复项目 A、B 和 C 的（输出）目录结构，并为所有内容重新构建。之后，看看问题是否仍然存在。

第四，你可以有一个在 C 和 A 中都使用的单元。如果你“为项目 C”更改它，当然它会触发 A 的重建。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T03:43:34.430

对于具有复杂构建依赖项的项目，我通常只是简单地制作一个外部构建脚本并按照已知的工作顺序构建事物。也就是说，我不是纯粹从 IDE 工作，而是简单地转到命令提示符并键入`build`我编写的批处理文件 (build.cmd)，负责清理以前的 DCU，运行`msbuild`几次以构建所有我需要构建的东西，这样我就有了可重复的易于构建的产品。

在开发其中一个项目时，我可能会在 IDE 中工作一段时间，但我总是会针对这些情况返回命令行构建。

Delphi IDE 的依赖系统是一个可悲的小技巧。命令行构建不是一个真正的 C 风格的 make 系统，当涉及到 Delphi 时，它更像是一个蛮力的每次重新构建的解决方案。但是，因为这就是持续集成（在服务器上运行时）通常会做的事情，并且您可以在继续处理另一个项目的同时运行这样的命令行构建，我发现这是一种“不必担心”的可行方法依赖问题和构建订单”，这是我的根本问题。

# ios - 从 NSString 中删除编码？

> ID：15801808
> 
> 赞同：0
> 
> 时间：2013-04-04T03:01:42.127
> 
> 标签：ios, objective-c

我正在开发一个 iOS 应用程序。我从 web 服务接收 json 并将其解析为不同的 NSString。问题有时是字符串包含尚未解码的特殊字符。

例如我可以得到：`Test One&quot;Two`作为 NSString。

如何从 NSString 中删除像这样的特殊字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:09:17.800

不久前我写了这个类来帮助从 NSString 中剥离 HTML。

**NSString+StripHTML**

NSString+StripHTML.h

```
#import <Foundation/Foundation.h>

@interface NSString (StripHTML)

-(NSString *)stringByStrippingHTML;

@end 
```

NSString+StripHTML.m

```
#import "NSString+StripHTML.h"

@implementation NSString (StripHTML)

-(NSString *) stringByStrippingHTML {
    NSRange r;
    NSString *s = [self copy];
    while ((r = [s rangeOfString:@"<[^>]+>" options:NSRegularExpressionSearch]).location != NSNotFound)
        s = [s stringByReplacingCharactersInRange:r withString:@""];
    return s;
} 
```

@结尾

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:48:33.410

我认为您只需要一个简单的正则表达式替换：

这就是 Neevik 在[Use regular expression to find/replace substring in NSString 中展示的内容](https://stackoverflow.com/questions/9661690/user-regular-expression-to-find-replace-substring-in-nsstring)

```
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"&[^;]*;" options:NSRegularExpressionCaseInsensitive error:&error];
NSString *modifiedString = [regex stringByReplacingMatchesInString:string options:0 range:NSMakeRange(0, [string length]) withTemplate:@""];
NSLog(@"%@", modifiedString); 
```

那应该删除您的特殊字符。

# visual-studio-2010 - Visual Studio：无法查看项目目录中的文件

> ID：15801811
> 
> 赞同：2
> 
> 时间：2013-04-04T03:02:00.953
> 
> 标签：visual-studio-2010

我正在开发一个 ASP.NET MVC3 项目。我从文件系统中复制了`Image`目录。`Content`它工作得很好，但我无法在 Visual Studio 中打开图像目录。我能做些什么来解决这个问题？

![解决方案资源管理器](https://i.stack.imgur.com/yPuYy.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T03:09:45.433

听起来您需要将图像添加到您的项目/解决方案中，而不仅仅是将图像放在文件夹中。

为此，请右键单击 VS 解决方案资源管理器中的图像文件夹，然后选择添加现有项，然后选择要包含在项目/解决方案中的图像添加单击添加。

# python - 需要一个函数来确定值的大小

> ID：15801812
> 
> 赞同：2
> 
> 时间：2013-04-04T03:02:14.943
> 
> 标签：python, numpy

假设我有一些值：.008、.08、.8、8、80、800。我需要一个函数，我可以在其中输入这些值并返回 .001、.01、.1、1、10、100 等。 ..

例子：

```
def func(v):
    a = do something using v.....
    return a

func(.009) = .001
func(.06)  = .01 
func(1234) = 1000 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T03:06:18.163

```
from math import log, floor
def func(v):
   a = floor(log(v, 10))
   return 10**a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T03:06:49.860

```
>>> import math
>>> 10**math.floor(math.log10(.009))
0.001
>>> 10**math.floor(math.log10(.06)) 
0.01
>>> 10**math.floor(math.log10(1234))
1000.0
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T03:17:45.603

我不会为您编写函数，因为这可能是您应该自己做的事情，但是就伪代码而言，请执行以下操作：

```
def func(v):
    new str;
    length = len(v) - 1
    if v[0] == '.':
        str = '.'
        for x in range (0, length):
            if x == length - 1:
                str = str + '1'
            else:
                str = str + '0'
    else:
        str = '1';
        for x in range (0, length):
            str = str + '0'
    return str.toInteger() 
```

基本上你找到数字的长度并将其减一。这样做的原因是因为您知道结果的第一个字符是什么。它要么是小数，要么是 1。我们检查字符串的第一个元素（如果它是数字，则将其转换为字符串）。如果第一个元素是小数，则结果将是小数，然后您使用数字的长度 - 1（即不带小数的数字长度）来计算要连接到字符串的 0 和 1 的数量。如果输入不是十进制数，那么你只有 str = '1'。然后根据它的长度添加 0 - 1（也就是减去 0）。

现在我不确定这种情况是否会出现，但如果你的数字是 20.25，那么它是一样的，除非你的第一个字符是数字而不是小数，你需要检查其余的字符串是小数。

您会注意到我在回复中说了很多字符串，因为如果它是字符串则更容易。如果它是一个数字，请将其转换为字符串，因为它更易于操作。

# javascript - 使用 Window Size JavaScript 显示和隐藏 div？

> ID：15801813
> 
> 赞同：0
> 
> 时间：2013-04-04T03:02:25.117
> 
> 标签：javascript, jquery, responsive-design

我正在尝试基于两个或最好是三个为移动设备定义的窗口大小显示一个 div。

我目前正在尝试实施：

```
<script>

if( $(window).width() > 768 ) {
    $('#div1').show();
    $('$div2').hide();
} else {

}

if( $(window).width() < 768 ) {
    $('#div1').hide();
    $('$div2').show();
} else {

}

</script> 
```

但它不起作用我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T03:03:45.113

你的`div2`选择器是错误的。它应该是 a`#`不是 a `$`。

此外，您应该考虑为此使用媒体查询！

```
#div2 {
  display: none;
}

@media screen and (max-width : 768px) {
  #div1 {
    display: none;
  }
  #div2 {
    display: block;
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T03:04:59.523

您需要在 window.resize [http://api.jquery.com/resize/](http://api.jquery.com/resize/)事件内进行

```
<script>
$(window).resize(function{
if( $(window).width() > 768 ) {
    $('#div1').show();
    $('#div2').hide();
} else {

}

if( $(window).width() < 768 ) {
    $('#div1').hide();
    $('#div2').show();
} else {

}
});
</script> 
```

是的，div2 应该有 # 而不是 $

# java - Java - 字节的模加法

> ID：15801814
> 
> 赞同：1
> 
> 时间：2013-04-04T03:02:27.567
> 
> 标签：java, byte, modulo

我试图在java中用两个字节执行模加法，结果得到第三个字节。

这是我正在使用的代码：

```
public static byte modAdd(byte byte1,byte byte2){
    int int1 = ((int)byte1)+128;
    int int2 = ((int)byte2)+128;
    int outNum = int1+int2;
    if(outNum>255){
        outNum-=255;
    }
    outNum-=128;
    return (byte)outNum;
} 
```

但是，这会出现问题——当 byte1 是 0x7F，而 byte2 不是 0x00 时，我的模减法代码不会返回 0x7F——而是返回 0x80。

我可以确定这个案子，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T03:44:44.050

您可以将该函数替换为 byte1 + byte2。整数加法，无论整数大小如何，都会通过设计产生“模块化”溢出。不需要所有的铸造。

您发现错误的原因在这一行：

```
 outNum-=255; 
```

那应该是256

# c++ - (c++) 堆上没有任何指针的对象会发生什么？

> ID：15801815
> 
> 赞同：0
> 
> 时间：2013-04-04T03:02:44.850
> 
> 标签：c++, object, pointers, heap-memory

它们会成为内存泄漏还是 c++ 意识到它们没有针对它们的指针并释放内存？如果必须删除它们，我只需使用删除命令对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:04:25.187

> c++ 是否意识到他们没有针对他们的指针并释放内存？

C++ 没有“实现”任何这样的事情。没有内置的垃圾收集器。

如果您使用 分配内存`new`并且不使用相应的调用来释放它`delete`，则您有内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:16:34.247

Cody 是正确的，C++ 没有垃圾收集器，因此当指向对象的指针丢失时，您会发生内存泄漏。

C++ 确实在 std 库中有一些东西可以解决这个问题。`std::shared_ptr`如果对象不再有任何`std::shared_ptr`指向它，则将自动删除该对象。

# java - Java中在同一线程上运行的多个类

> ID：15801819
> 
> 赞同：-1
> 
> 时间：2013-04-04T03:02:58.977
> 
> 标签：java, multithreading, class, sharing

我有一个类，我们称之为“Class1”，它实现了 Runnable，并使用 thread.start() 启动了一个名为“thread 1”的线程；

我有另一个类，它是 Class1 的子类，称为“Class2”。它包含 main 方法，并在执行 while 循环的类中运行另一个方法。然而，我注意到的是，在 Class2 中执行 while 循环的线程不是“线程 1”，而是一个完全不同的线程。

有没有办法让 Class2 while 循环在“线程 1”而不是它自己的线程上执行？如果我太含糊，请告诉我。:) 感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:18:29.120

我在您对代码的描述中看到了几个问题：

*   你应该把你的主类分开，而不是让它在子类中`Class2`。叫它`Main`不要混淆。
*   您永远不应该在对象构造函数中启动线程。这是一个非常糟糕的模式，因为`this`新线程在完全初始化之前就可以访问它。我假设主线程正在调用`new Class1()`and `new Class2()`。让主线程也启动线程。

    ```
    Thread thread1 = new Thread(new Class1());
    thread1.start();
    Thread thread2 = new Thread(new Class2());
    thread2.start(); 
    ```

*   正在运行的线程`Class1`无法访问子类方法。如果你启动`new Thread(new Class1())`线程甚至不会在`Class2`.

也许我不明白你在说什么。发布一些小代码示例，以便我们更好地解决您的问题。

# php - 在函数内部使用全局变量？

> ID：15801827
> 
> 赞同：-1
> 
> 时间：2013-04-04T03:03:59.837
> 
> 标签：php

我无法在 php 中解决这个问题。

我有一个名为 $user 的变量来保存用户名。

在我的函数中，我需要使用这个变量：

```
function test($message) {
    echo "user: $user, message: $message";
} 
```

我只知道如何通过每次调用它时将 $user 传递给函数来做到这一点，但我处于无法做到这一点的特殊情况。那么，我怎样才能使用在我的函数外部定义的变量呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:06:23.087

如果可能，我尽量避免使用全局变量。但是`$GLOBALS['user']`会`$user`从你的函数内部返回全局值。或者，如果您使用`global $user;`,`$user`将从您的函数中的全局值定义。

# python - 如何使用远程 pdb 连接调试在 Heroku 上运行的 Django 应用程序？

> ID：15801835
> 
> 赞同：14
> 
> 时间：2013-04-04T03:05:00.923
> 
> 标签：python, django, debugging, heroku, pdb

为了调试我在 Heroku 上看到但在我的本地机器上没有看到的错误，我正在尝试进行逐步调试。

典型的`import pdb; pdb.set_trace()`方法不适用于 Heroku，因为您无法访问连接到应用程序的控制台，但显然您可以使用[rpdb](https://pypi.python.org/pypi/rpdb/)，这是 pdb 的“远程”版本。

所以我安装了 rpdb，并`import rpdb; rpdb.set_trace()`在适当的位置添加。当我发出命中 rpdb 行的请求时，应用程序按预期挂起，我在 heroku 日志中看到以下内容：

```
pdb is running on 3d0c9fdd-c18a-4cc2-8466-da6671a72cbc:4444 
```

好的，那么如何连接到正在运行的 pdb？我试图`heroku run nc 3d0c9fdd-c18a-4cc2-8466-da6671a72cbc 4444`尝试从 heroku 的系统中连接到命名主机，但这只是立即以状态 1 退出并且没有错误消息。

所以我的具体问题是：我现在如何连接到这个远程 pdb？

一般相关的问题是：对于在 Heroku 上运行的应用程序进行这种交互式调试，这是否是正确的方法？有没有更好的办法？

注意 RE CELERY：注意，我现在也尝试了与 Celery 类似的方法，但无济于事。celery 的默认主机 rdb（远程 pdb 包装器）使用的是`localhost`，当它是 Heroku 时您无法访问。我尝试将`CELERY_RDB_HOST`环境变量用于托管在 Heroku 上的网站的域，但这会产生“无法分配请求的地址”错误。所以这是同样的基本问题——如何连接到在 Heroku 上运行的远程 pdb 实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T05:30:00.747

在回答您的第二个问题时，我会根据错误的类型（浏览器端、后端或视图）采取不同的做法。对于后端和视图测试（单元测试），这样的东西对你有用吗？

```
$ heroku run --app=your-app "python manage.py shell --settings=settings.production" 
```

然后在 ipython 中调试：

```
>>> %run -d script_to_run_unittests.py 
```

即使您没有运行 django 应用程序，您也可以将调试器作为 ipython 的命令行选项运行，这样任何 python 错误都会让您进入调试器：

```
$ heroku run --app=your-app "ipython --pdb" 
```

前端测试是一个完全不同的球赛，你应该研究像 selenium 这样的工具。我认为还有一个“沙拉”测试套件模块可以让前端测试更容易编写。编写一个中断的测试是调试的第一步（或者我被告知；）。

如果错误看起来很简单，您可以随时使用类似的方法执行旧的“打印并运行”

```
import logging
logger = logging.getLogger(__file__)
logger.warn('here be bugs')` 
```

并使用 getsentry.com 或等效的监控工具查看您的日志文件，或者只是：

```
heroku logs --tail 
```

# php - 未初始化的字符串偏移

> ID：15801836
> 
> 赞同：0
> 
> 时间：2013-04-04T03:05:02.407
> 
> 标签：php

```
protected static function generateString ($length = 50, $Password){
        $characters = $Password;
        $string = '';

        for ($p = 0; $p < $length; $p++) {
            $string .= $characters[mt_rand(0, strlen($characters))]; // Error Line
        }
        echo $string;
    } 
```

你好。我正在构建一个身份验证类，上面的函数让我有些悲伤，我不断收到错误消息：

> 注意：未初始化的字符串偏移量：16

回声用于测试目的。

我正在使用以下方法调用我的函数：

```
 public static function Compile($Password, $Length){
        self::generateString($Length,$Password);
    }

Auth::Compile('testi ngpassword', 10); 
```

当我运行我的脚本时，有时它会生成没有错误消息；但是当多次运行（3-7）时，我会收到上面指定的消息？有时这个通知显示超过两行？

那么为什么重复运行时会随机生成错误消息？当指定的参数没有改变时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:08:45.610

考虑这一行：

```
strlen($characters) 
```

如果字符串长度为 16，并且您在 0 和 16 之间进行随机数选择，则您可以选择在 last 之后选择索引，这没什么。你需要做到

```
strlen($characters) - 1 
```

由于索引实际上从 0 开始；

# java - 下载时 JAR 不兼容

> ID：15801837
> 
> 赞同：0
> 
> 时间：2013-04-04T03:05:06.390
> 
> 标签：java, windows, jar, download

我为 GUI 更新系统创建了一个 JAR，该系统在其内部下载一个可执行文件并执行它。每当我运行原始副本时，这对我来说都是完美的。但是，当从 Internet 下载时，GUI 会中断。标题字体恢复为原始字体，下载按钮激活预定对话框，但其中没有下载文件。请记住，*我的*原始副本`setup.jar`有效，但下载的版本没有任何作用。

JAR 可以在[此处](http://theneverhood.sourceforge.net/)找到，但专门用于直接下载，您可以在[此处](http://theneverhood.sourceforge.net/setup.jar)找到。

这是我的 JAVA 文件的内容和 JAR 层次结构的图片：

```
public class UpdateMechanism extends JFrame
                                implements ActionListener {
    protected static JButton aroundTheLake; 
    protected static JFrame frame;

    private static JButton aroundTheRiver() {
        aroundTheLake = new JButton("DOWNLOAD & INSTALL!");
        aroundTheLake.setVerticalTextPosition(AbstractButton.CENTER);
        aroundTheLake.setHorizontalTextPosition(AbstractButton.LEADING); //aka LEFT, for left-to-right locales
        aroundTheLake.addActionListener(new UpdateMechanism());
        aroundTheLake.setMnemonic(KeyEvent.VK_D);
        aroundTheLake.setActionCommand("aroundthelake");
        return aroundTheLake;
    }

    private static String readURL(String targetURL) {
        String returnish = "";
        try {
            URL tempURL = new URL(targetURL); 
            Scanner s = new Scanner(tempURL.openStream()); 
            while (s.hasNextLine()) {
                returnish = returnish+s.nextLine(); 
            }
        } catch (IOException e) {
            System.out.println(e); 
        }
        return returnish;
    }

    private static String readFile(String targetFile) { 
        String returnString = "";
        try {
            File tempFile = new File(targetFile);
            Scanner s = new Scanner(tempFile);
            while (s.hasNextLine()) {
                returnString = returnString + s.nextLine(); 
            }
        } catch(IOException e) { 
            // !
            System.out.println(e);
        }
        return returnString;
    }

    public void actionPerformed(ActionEvent e) {
        if ("aroundthelake".equals(e.getActionCommand())) {
            JOptionPane.showMessageDialog(frame,
                                            "Please wait, this may take a while depending on your connection...");
            new Thread() {
                public void run() {
                    URL url; 
                    URLConnection con;  
                    DataInputStream dis;  
                    FileOutputStream fos; 
                    byte[] fileData;  
                    try {
                        url = new URL("http://hivelocity.dl.sourceforge.net/project/theneverhood/setup.exe");
                        con = url.openConnection(); 
                        dis = new DataInputStream(con.getInputStream());
                        fileData = new byte[con.getContentLength()]; 
                        for (int x = 0; x < fileData.length; x++) { 
                            fileData[x] = dis.readByte();
                        }
                        dis.close(); 
                        fos = new FileOutputStream(new File("executable/setup.exe"));  
                        fos.write(fileData);
                        fos.close(); 
                        Runtime.getRuntime().exec("executable/setup.exe", null, new File("executable/"));
                    }
                    catch(MalformedURLException m) {
                        System.out.println(m);
                    }
                    catch(IOException io) {
                        System.out.println(io);
                    }
                }   
            }.start();
        } else {
            // man
        }
    }

    private static void showGUI() {
        frame = new JFrame("The Neverhood Restoration Project");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(new Dimension(1024, 600));
        frame.setExtendedState(frame.MAXIMIZED_BOTH);
        frame.getContentPane().setBackground(new Color(0xA64343));

        File fileCheck = new File("C:/Program Files (x86)");
        String returnString = null;
        String rootDirectory = null;
        if (fileCheck.exists()) {
            rootDirectory = "C:/Program Files (x86)/DreamWorks Interactive"; 
            String checkFile = rootDirectory+"/Neverhood/version.txt"; 
            File tempFile = new File(checkFile);
            if (tempFile.exists()) {
                returnString = readFile(checkFile);
            } else {
                returnString = "It appears you do not have the Neverhood Restoration Project installed, or you are using an earlier version."; 
            }
        } else {
            rootDirectory = "C:/Program Files/DreamWorks Interactive";
            String checkFile = rootDirectory+"/Neverhood/version.txt"; 
            File tempFile = new File(checkFile);
            if (tempFile.exists()) {
                returnString = readFile(checkFile);
            } else {
                returnString = "It appears you do not have the Neverhood Restoration Project installed, or you are using an earlier version.";
            }
        }
        if (returnString.equals(readURL("http://theneverhood.sourceforge.net/version.txt"))) {
            returnString = "You are updated to the recent version!"; 
        } else { 
            returnString = "It appears you're not updated.";
        }

        JLabel headerLabel = new JLabel("The Neverhood Restoration Project");
        headerLabel.setHorizontalAlignment(JLabel.CENTER);
        JPanel heapPanel = new JPanel();
        heapPanel.setLayout(new BoxLayout(heapPanel, BoxLayout.PAGE_AXIS));
        heapPanel.setPreferredSize(new Dimension(500, heapPanel.getPreferredSize().height));
        JTextArea heapLabel = new JTextArea(50, 50);        
        heapLabel.setLineWrap(true);
        heapLabel.setWrapStyleWord(true);
        heapLabel.setEditable(false);
        heapLabel.setBorder(BorderFactory.createEmptyBorder(10, 20, 10, 20));
        heapLabel.setFont(new Font("Serif", Font.PLAIN, 14));
        heapLabel.append("Current version: "+readURL("http://theneverhood.sourceforge.net/prettyversion.txt")+".\nInstalled version: "+readFile(rootDirectory+"/Neverhood/prettyversion.txt")+".\n"+returnString+"\n" + 
            "You can read the full version of the document to the left at http://theneverhood.sourceforge.net."
            + "\nHaven't installed yet? Below is the download button. Just click to save setup.exe in and enjoy!");
        heapPanel.add(heapLabel);
        if (returnString == "It appears you're not updated.") { 
            heapPanel.add(aroundTheRiver());
        }

        try {
            Font sFont = Font.createFont(Font.TRUETYPE_FONT, new File("DUGFB___.TTF"));
            sFont = sFont.deriveFont(Font.PLAIN, 48);
            GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
            ge.registerFont(sFont);
            headerLabel.setFont(sFont);
        } catch (FontFormatException | IOException e) {
            System.out.println(e);
        }

        BufferedImage icoImage = null;
        try {
            icoImage = ImageIO.read(
                frame.getClass().getResource("/nhood.bmp"));
        } catch (IOException e) {
            System.out.println(e);
        }
        frame.setIconImage(icoImage);

        JEditorPane updateLog = new JEditorPane();
        JScrollPane scrollPane = new JScrollPane(updateLog);
        updateLog.setEditable(false);

        try {
            updateLog.setPage("http://theneverhood.sourceforge.net/");
        } catch (IOException e) {
            updateLog.setContentType("text/html");
            updateLog.setText("<html>The application could not load the webpage.</html>");
        }

        frame.add(headerLabel, BorderLayout.NORTH);
        frame.add(scrollPane);
        frame.add(heapPanel, BorderLayout.EAST);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                showGUI();
            }
        });
    }
} 
```

![插图不佳的箭头指向](https://i.stack.imgur.com/rJxlj.png)

此图片来自从提供的链接下载时。 ![从 Internet 下载的 JAR。](https://i.stack.imgur.com/eQDw1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:55:56.543

代码中有很多小错误：

```
 new Thread() {
            public void run() {
                URL url; 
                URLConnection con;  
                DataInputStream dis;  
                FileOutputStream fos; 
                byte[] fileData;  
                try {
                    url = new URL("http://hivelocity.dl.sourceforge.net/project/theneverhood/setup.exe");
                    con = url.openConnection(); 
                    dis = new DataInputStream(con.getInputStream());
                    fileData = new byte[con.getContentLength()]; 
                    for (int x = 0; x < fileData.length; x++) { 
                        fileData[x] = dis.readByte();
                    }
                    dis.close(); 
                    File f = new File("executable");
                    if(!f.isDirectory())
                        f.mkdir();
                    fos = new FileOutputStream(new File("executable/setup.exe"));  
                    fos.write(fileData);
                    fos.close(); 

                    Runtime.getRuntime().exec("executable/setup.exe", null, new File("executable/"));
                }
                catch(MalformedURLException m) {
                    System.out.println(m);
                }
                catch(IOException io) {
                    System.out.println(io);
                }
            }   
        }.start(); 
```

另外，我建议使用 ProcessBuilder 而不是`Runtime`. 例子：

```
 List<String> command = new ArrayList<String>();
    command.add("cmd");
    command.add("/C");
    File dcr = new File("executable/setup.exe");
    dcr.setExecutable(true, false);
    command.add(dcr.getAbsolutePath());
    ProcessBuilder builder = new ProcessBuilder(command);
    builder.redirectErrorStream(true);
    final Process process = builder.start();
    try {
        process.waitFor();
    } catch (InterruptedException ex) {
        Logger.getLogger(WhatEver.class.getName()).log(Level.SEVERE, null, ex);
        throw ex;
    }
    InputStream is = process.getErrorStream();
    InputStreamReader isr = new InputStreamReader(is);
    BufferedReader br = new BufferedReader(isr);
    String line;
    while ((line = br.readLine()) != null) {
        Logger.getLogger(Thumbnail.class.getName()).severe(line);
    } 
```

其次，Font 不对，因为它在

`Font sFont = Font.createFont(Font.TRUETYPE_FONT, new File("DUGFB___.TTF"));`因此字体不理想。

也`returnString == "It appears you're not updated."`改成`returnString.equals("It appears you're not updated.")`

# c++ - 如何简单地比较 C++ 中的字符？

> ID：15801840
> 
> 赞同：12
> 
> 时间：2013-04-04T03:05:15.917
> 
> 标签：c++, char, equals-operator

我有以下代码：

```
#include <iostream>
using namespace std;
int main()
{
    char fg;
    cin>>fg;
    char x[20];
    x[0]='0';
    if(fg=x[0])
    {
        cout<<"It's true!"<<endl;
        return true;

    }
    cout<<"It's false!"<<endl;
    return false;
} 
```

无论我给出什么输入，`true`总是返回。我的语法关闭了吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-04T03:09:57.067

在 C++ 中，您`==`用于比较。是`=`一个任务。它可以在`if`语句的条件下使用，但`true`除非字符是`'\0'`（不是`'0'`，因为它是在你的情况下），否则它将评估为：

```
if(fg == x[0])
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T03:19:06.117

在 if 语句中使用`==`. 例如：

```
if (fg == x[0]) {
    //...........   
} 
```

`==`比较，但等于，`=`这就是为什么你每次都为真。`fg``x[0]`

# scala - 如何在 Play2.1 scala 项目中添加外部库？

> ID：15801841
> 
> 赞同：0
> 
> 时间：2013-04-04T03:05:41.717
> 
> 标签：scala, playframework-2.0

我想使用 scala 编译器库，并将其添加到 Eclipse 中，但是当再次使用 编译项目时`eclipse`，该库会被编译自动删除。那有什么问题？

那么问题来了：如果我的play项目要使用scala-compiler.jar，怎么添加呢？在 Eclipse 中使用`build path`->不起作用...`configure build path...`

我也尝试将所有的jar文件放到文件`lib/`夹中，但是在使用服务器再次编译时，`eclipse`由于找不到jar，它仍然会出现编译错误。

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T03:28:36.730

# wpf - 对于 MVVM，viewmodel 将模型中的属性导出到视图的最佳做法是什么？

> ID：15801851
> 
> 赞同：3
> 
> 时间：2013-04-04T03:07:13.777
> 
> 标签：wpf, design-patterns, mvvm, viewmodel

作为 WPF 的新手，我最近开始了我的 MVVM 之旅。我可以理解为什么我们需要 MVVM 的原始意图，但是一些实现细节仍然让我很困惑。

这是我的一个问题：

**我应该如何将属性导出`model`到`View`via`ViewModel`**

我可以在这里展示我的一些想法，所以请与我分享您的观点。

这是我的实现之一：

```
 class MyModel : INotifyPropertyChanged
    {
        private String _name;
        public String Name
        {
            get { return _name; }
            set 
            {
                if (_name != value)
                {
                    _name = value;
                    if (PropertyChanged != null)
                    {
                        PropertyChanged(this, new PropertyChangedEventArgs("Name"));
                    }
                }
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
    }

    class MyViewModel
    {
        private MyModel _model;

        public MyModel Model
        {
            get { return _model; }
            set { _model = value; }
        }
    } 
```

我认为问题在于我们没有将视图与模型分离。并且视图需要知道模型实现的每一个细节来完成绑定过程。`Model` **在我看来，将属性直接**导出以供查看`ViewModel`不能被视为一个好的设计。

所以我希望你能分享你关于这个主题的设计经验。

顺便说一句，如果我们导出许多对象，例如从视图模型中查看`List`的`MyModel`对象，我该如何实现这一点以将视图与模型解耦？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T06:15:37.427

不是你的模型，而是你的 ViewModel 应该实现 INotifyPropertyChanged。然后你可以在 View 中使用 Binding 从 ViewModel 中获取数据。

在您的 View / XAML 中，您有类似的语句

```
... Content="{Binding myViewModelProperty}" ... 
```

取决于您要绑定的内容。

myViewModelProperty 必须是 ViewModel 中的公共属性

```
public string myViewModelProperty { get; set; } 
```

不要忘记在 setter 中调用 RaiseNotifyPropertyChanged（或调用你的处理程序）来获取视图中的更新。

```
private string myViewModelField;

public string myViewModelProperty 
{ 
   get
   {
        return myViewModelField;
   }
   set
   {
       myViewModelField = value;
       RaiseNotifyPropertyChanged(() => myViewModelProperty);
   }
} 
```

** 更新 **

列表通常通过`ObservableCollection<Type>`. 理想情况下`Type`，这里有一些 ViewModel，使用模型中的数据创建，以显示在您的视图中。你可以把 ViewModel 想象成`Adapter`你的模型和你的视图之间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T06:41:13.860

这不是一个严格的规则，但在我的情况下，我更喜欢在 ViewModel 中实现 INotifyPropertyChanged 并将模型保留为简单的 POCO。

在 ViewModel 中“重复”模型的属性可能很烦人，但是：

1.  通常，您不需要将所有属性公开给视图。
2.  它允许你在你的虚拟机中添加额外的代码，比如用户输入验证，并保持你的模型“干净”。

因此，在您的示例中，它将是：

```
 class MyModel
    {
        public String Name
        {
            get;
            set;
        }     
    }

    class MyViewModel : ViewModelBase //let's say you have this base class in your framework
    {
        private MyModel model;

        public MyViewModel(MyModel model)
        {
            this.model = model;
        }

        public string Name 
        {
            get
            {
                 return this.model.Name;
            }

            set
            {
                 if(IsValidInput(value)
                 {
                     this.model.Name = value;
                     this.RaisePropertyChanged("Name"); // the ViewModelBase  base class provide this helper.
                 }
            }       
        }    
    } 
```

关于您的第二个问题，[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)通常是将模型集合公开给视图的好方法：

```
class ContactListViewModel
{
    public ObservableCollection<MyModel> Contacts { get; private set;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T06:09:54.663

您可以简单地使用 Model.Name 在视图上绑定您的属性

# ios - 如何让 xcode 仪器记录一段时间

> ID：15801856
> 
> 赞同：1
> 
> 时间：2013-04-04T03:08:15.973
> 
> 标签：ios, xcode, logging, android-activity, monitor

*我可以从Xcode -> Instruments -> Activity Monitor -> Instrument -> 'Export Track for ...'*记录一个 csv 文件。

它仅为当前时刻创建日志文件。

**我需要获取特定持续时间的 CPU % 使用率图。**

> （从执行开始到我的应用程序执行结束）。

有没有办法在选定的持续时间内获取日志文件？

请给出你的想法。

# php - 如何重用一些 laravel 代码？

> ID：15801857
> 
> 赞同：2
> 
> 时间：2013-04-04T03:08:31.507
> 
> 标签：php, laravel, shared-libraries, laravel-3

我正在使用 laravel 开发 Web 应用程序。我想“打包”一些可重复使用的功能。例如，我得到了一个`UserController`, 带有数据库设置和视图等。`UserController`预计在未来的大多数 web 开发中都会重用，但有些`UserController`可能会有不同的行为，例如，某些应用程序的用户可能有一个字段`rewardPoint`，有些可能不会。但是它们都有一些相似的行为，例如：`register`、、、`login`等`forgetPassword`。那么，我可以将所有基本数据库设置的通用打包`UserController`到一个文件或脚本中以减少开发工作量吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:57:25.087

您已经一针见血了——因为您的需求可能会在项目之间发生变化，您将很难创建一个适用于任何地方的单一解决方案。您有几个选择，包括：

1.  从上一个项目中复制有用的类并更新它们以适应。
2.  创建包含通用和可重用代码的基类包或捆绑包，然后将它们扩展到您的项目中并根据需要修改扩展。
3.  尝试创建一个“适用于所有人的解决方案”，您可以将其放入您的所有项目中。

我会避开3；它可能会以最少的收益增加最多的膨胀。1 在您习惯该框架时很有用，尤其是在您倾向于不重新访问旧项目的情况下；随着时间的推移，您将改进您的代码并开发工作模式。最终你可能最终会做 2；你可以将它们存储在 git 中，使用 bundles 或 composer 包，并且随着时间的推移你可以继续改进它们。

# node.js - 其他函数内的node.js异步调用

> ID：15801858
> 
> 赞同：0
> 
> 时间：2013-04-04T03:08:42.563
> 
> 标签：node.js, redirect, asynchronous

我有一些非常愚蠢的问题，我正在尝试根据从 mongodb 中提取的条件使用 node.js 进行重定向服务......所以代码看起来像这样：

```
var http = require('http'),
util = require('util'),
url = require('url');

var server = http.createServer(function(req, res) {
    domain = req.headers['host'];
    var url = getRedirect(domain);

    res.writeHead(301, { 'Location': url});
    res.end();
});

server.listen(8080);

var getRedirect = function(domain) {

    Domain.findOne({ 'name': domain }, 'url', function (err, domain) {
        if (err) return handleError(err);
        console.log('redirect url %s.', domain.url) 
        return domain.url
    })
} 
```

当然 - 不能正常工作，因为 Domain.findOne 正在寻找延迟的结果，并且 return 不会将结果分配给 url ......我试图将“res”对象传递给 getRedirect 函数但我很漂亮肯定是错的。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:20:04.817

您需要为此使用回调，因为（正如您所指出的），域/url 获取是异步的。节点约定是使用“错误第一个回调”签名。

试试这个：

```
var http = require('http'),
    util = require('util'),
    url = require('url');

var server = http.createServer(function(req, res) {
    var domain = req.headers['host'];
    // provide a callback to getRedirect so we can get the value asynchronously
    getRedirect(domain, function(err, url) {
        if (err) return handleError(err);
        res.writeHead(301, { 'Location': url });
        res.end();
    });
});

server.listen(8080);

var getRedirect = function(domain, cb) {
    Domain.findOne({ 'name': domain }, 'url', function (err, domain) {
        if (err) return cb(err);
        console.log('redirect url %s.', domain.url);
        // instead of returning, pass the result to the callback
        cb(null, domain.url);
    });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:33:34.087

我使用[了 async.series](https://github.com/caolan/async#series)但我的解决方案看起来更好

```
async.series([
    function (callback) {
        Domain.findOne({ 'name': domain }, 'url', function (err, domain) {
            if (err) return handleError(err);
            console.log('looking for domain' + domain);
            callback(null, domain.url);
        })
    }
    ], function (err, results) {
        res.writeHead(301, { 'Location': results[0]});
        res.end();
}); 
```

# android - 从应用程序填写在线搜索查询

> ID：15801868
> 
> 赞同：0
> 
> 时间：2013-04-04T03:10:05.733
> 
> 标签：android, html, http-post

对于我的 android 应用程序，我正在尝试从该网站进行 HTML 抓取：

[http://www.trico.haverford.edu/cgi-bin/courseguide/cgi-bin/search.cgi](http://www.trico.haverford.edu/cgi-bin/courseguide/cgi-bin/search.cgi)

本质上，我的应用程序为每个部门都有一个按钮，例如，如果用户单击“生物学”，我想搜索链接中的所有生物学课程并从中抓取数据。

有小费吗。我的直觉是使用 POST 请求，其中键是“部门”，值是“生物学”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:40:31.483

“每个部门都有一个按钮”——比如将您感兴趣的网站组织成收藏夹组？这就是搜索器所做的，试试[DiCheetal](http://www.dicheetal.com/)

# jquery - 如何在来自 Servlet 的 JSP scriptlet 中获取 Json 对象

> ID：15801871
> 
> 赞同：0
> 
> 时间：2013-04-04T03:10:19.677
> 
> 标签：jquery, jsp, adobe

我是 Adob​​e CQ 的新手。我什至不确定如何提出这个问题

我必须动态填充下拉列表，下拉列表应该调用一个 JSP，该 JSP 将在 scriptlet 中有 JSON 响应对象，Jsp 应该从 servlet 获取 Json 对象。

我的jsp应该如下格式：

下拉填充.jsp

```
<%@ page import="com.day.cq.wcm.api.WCMMode,
                   com.day.cq.wcm.api.components.DropTarget%>

<%
  [
  {key1,value1},
   {key2,value2},
 {key2,value3}

]

%> 
```

因此计划在我的 jsp 中使用以下 jquery：

```
<script>
$(document).ready(function() {
    $.get('\ActionServlet',function(responseJson) {                          
          alert('response json:' + responseJson);   
    });
});      
</script> 
```

但是如何以上述格式把这个放到 JSP 中呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:18:18.940

```
$.ajax({

        url : "NameServlet",
        dataType : 'json',
        error : function() {

            alert("Error");
        },
        success : function(data) {
            $.each(data.jsonArray, function(index) {
                var selectBox="<select>"
                  $.each(data.jsonArray[index], function(key, value) {
                    selectBox+="<option>"+key + " & value " + value + "</option>";

                 }); 
                 selectBox+="</select>";
                 // given html id which you want to put it 
                 $("#htmlid").html(selectBox);
            });

        }
}); 
```

希望对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:09:23.177

您的 jsp 应该在响应中打印 JSON。

JSP 文件：

```
<%
    //obtain the data from a query
    //asuming getClients() return a String in JSON format
    String clients = DB.getClients();

    //this prints de json in the response out
    out.print(clients);
%> 
```

在此之后，您可以在 ajax 回调中访问包含 json 对象的字符串：

HTML 文件（或另一个 JSP 文件）：

```
<script type="text/javascript">
    //url from your JSP page
    //data contains the output printed previously
    $ajax(url,function(data){
        //it is convenient to clean de output
        var stringData = data.trim();

        //now that you have a json formated String you need to use a parser that
        //converts the String into a JsonObject
        var jsonData = JSON.parse(stringData);

        //take some actions with the data obtained
        var htmlVar = '';
        for (var i=0; i<jsonData.length; i++){
            //add to htmlVar the HTML code for the options 
            htmlVar += '<option value="'+jsonData[i].clientId+'">'+jsonData[i].clientName+'</option>'
        }
        //load the data into the dropDown element
        $('#clientsDropDown').html(htmlVar)
    });
</script> 
```

# shell - 在一行上使用多个命令检查 shell 脚本的错误

> ID：15801872
> 
> 赞同：0
> 
> 时间：2013-04-04T03:10:19.617
> 
> 标签：shell

我试图在 Linux 上的 shell 脚本中捕获失败命令的错误代码。在这种情况下，我的 ffprobe 命令：

```
#!/bin/sh
    videoduration=$(ffprobe -loglevel error -show_format myfile.avi | grep duration | cut -d= -f2)
    if [ $? -ne 0 ]; then
       echo "ERROR"
       exit 1
    fi
echo $videoduration 
```

如果我更改该命令以提供虚假文件名：

```
#!/bin/sh
    videoduration=$(ffprobe -loglevel error -show_format myfile.av | grep duration | cut -d= -f2)
    if [ $? -ne 0 ]; then
       echo "ERROR"
       exit 1
    fi
echo $videoduration 
```

错误代码在这里没用，因为从技术上讲，状态代码仍然是 0。代码仍然会有一个成功的`grep`和`cut`。如果 ffprobe 命令失败，如何将此命令保存在单个变量中但因错误退出？

**编辑：**如果有的话，我更喜欢非 shell 特定的答案。建议的副本也涵盖了类似的情况，但这里唯一可能的选择是创建一个临时文件，如下所示：

```
f=`mktemp`
(ffprobe ...; echo $?>$f) | ...
e=`cat $f` #error in variable e
rm $f 
```

似乎是创建临时文件的黑客？如果这是唯一的选择，我将如何将其存储在变量中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:15:26.923

问题是即使`ffprobe`命令失败，`cut`也不会返回零退出代码。管道的退出状态是*最后一个*命令的退出状态，除非您的 shell 有办法更改此行为以返回第一个命令的退出状态失败。您可以使用`set -o pipefail`in `bash`/执行此操作`ksh`：

```
$ false | cut -d= -f2; echo $?
0
$ set -o pipefail 
$ false | cut -d= -f2; echo $?
1 
```

# objective-c - 为什么我的触摸事件不起作用？

> ID：15801875
> 
> 赞同：0
> 
> 时间：2013-04-04T03:10:38.407
> 
> 标签：objective-c

我在控制器中声明了一个 void touchesbegan 方法，但它不起作用！我不知道为什么。我有一个图像视图，我计划单击它以移动到下一个控制器。所以我设置了触摸开始方法。我已经在 xib 文件中链接了图像视图，但是当我单击图像时。什么都没发生。请帮忙，谢谢。

## 视图控制器.h

```
#import <UIKit/UIKit.h>

@interface imageViewViewController : UIViewController
{
    IBOutlet UIImageView *testing;
}
@property(nonatomic, retain) IBOutlet UIImageView *testing;

@end 
```

## 视图控制器.m

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [touches anyObject];

    if(touch.view == testing)
    {
        TestViewController *testviewcontroller = [[TestViewController alloc]initWithNibName:nil bundle:nil];

        [self.navigationController pushViewController:testviewcontroller animated:YES];
    }
}

@end 
```

附言

在这里，我尝试了另一种使用点击手势的方法。testing 是我的图像视图的名称。如您所见，我在 imagedittapped 方法中注释掉了 ns 日志。它一直有效。但是，当我尝试将其导航到另一个页面时，它失败了。

```
- (void)viewDidLoad
{

    UITapGestureRecognizer *tapRecognizer;
    [testing setTag:0]; 
    [testing setUserInteractionEnabled:TRUE];
    tapRecognizer = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imageViewDidTapped:)] autorelease];
    tapRecognizer.numberOfTapsRequired = 1;
    [testing addGestureRecognizer:tapRecognizer];
    [self.view addSubview:testing];
    [testing release];

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)imageViewDidTapped:(UIGestureRecognizer *)aGesture {
    UITapGestureRecognizer *tapGesture = (UITapGestureRecognizer *)aGesture;

   UIImageView *tappedImageView = (UIImageView *)[tapGesture view];

    switch (tappedImageView.tag) {
        case 0:
            //NSLog(@"UIImageView 1 was tapped");
            [self navigate];

            break;
        case 1:
            NSLog(@"UIImageView 2 was tapped");
            break;
        default:
            break;
    }
}

-(void)navigate
{
    TestViewController *testviewcontroller = [[TestViewController alloc]initWithNibName:nil bundle:nil];

    [self.navigationController pushViewController:testviewcontroller animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:24:13.657

问题是`userInteractionEnabled`UIImageView 默认为 NO，因此您不会有任何接触。将其设置为是。

消息处理`touchesBegan`也非常复杂。如果您将 UITapGestureRecognizer 附加到图像视图，您会更开心。

编辑：现在你说你的触摸处理*正在*工作，但导航没有发生。因此，让我们专注于代码的这一部分：

```
-(void)navigate
{
    TestViewController *testviewcontroller = [[TestViewController alloc]initWithNibName:nil bundle:nil];

    [self.navigationController pushViewController:testviewcontroller animated:YES];
} 
```

在那里登录以确保`navigate`被调用！如果它没有被调用，你需要弄清楚为什么你的其他代码没有运行并调用它。如果它*被*调用，那么问题很可能`self.navigationController`是 nil，即您一开始不在导航界面内。

# android - Activity 泄露了原本在这里添加的窗口

> ID：15801877
> 
> 赞同：0
> 
> 时间：2013-04-04T03:10:44.070
> 
> 标签：android

基本上我收到了这个错误，我不确定是代码的哪一部分导致了它，只是寻找一些关于错误的建议，谢谢。.

```
 public class ViewHole extends ListActivity {

// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> holesList;

// url to get all products list
private static String url_all_holes = "http://localhost/realdeal/get_hole_details.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_COURSEONE = "courseone";
private static final String TAG_HOLENUMBER = "holenumber";
private static final String TAG_INDEX = "index";
private static final String TAG_YARDAGE = "yardage";
private static final String TAG_PAR = "par";

// products JSONArray
JSONArray courseone = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewhole);

    // Hashmap for ListView
    holesList = new ArrayList<HashMap<String, String>>();

    // Loading products in Background Thread
    new loadallholes().execute();

/**
 * Background Async Task to Load all holes by making HTTP Request
 * */
class loadallholes extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(ViewHole.this);
        pDialog.setMessage("Loading holes. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All holes from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_holes, "GET", params);

        // Check your log cat for JSON response
        Log.d("All Holes: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // holes found
                // Getting Array of hole numbers
                courseone = json.getJSONArray(TAG_COURSEONE);

                // looping through All holes
                for (int i = 0; i < courseone.length(); i++) {
                    JSONObject c = courseone.getJSONObject(i);

                    // Storing each json item in variable
                    String holenumber = c.getString(TAG_HOLENUMBER);
                    String index = c.getString(TAG_INDEX);
                    String yardage = c.getString(TAG_YARDAGE);
                    String par = c.getString(TAG_PAR);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_HOLENUMBER, holenumber);
                    map.put(TAG_INDEX, index);
                    map.put(TAG_YARDAGE, yardage);
                    map.put(TAG_PAR, par);

                    // adding HashList to ArrayList
                    holesList.add(map);
                }
            } 

        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products

        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        ViewHole.this, holesList,
                        R.layout.list_item, new String[] { TAG_HOLENUMBER, TAG_INDEX, TAG_YARDAGE, TAG_PAR},                            
                        new int[] { R.id.holenumber, R.id.index, R.id.yardage, R.id.par });

                // updating listview
                setListAdapter(adapter);
            }
        });

    }

}
} 
```

Logcat 错误 -

```
01-27 04:11:57.228: E/WindowManager(3566): Activity com.example.golfapp.ViewHole has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{40cdf768 V.E..... R.....ID 0,0-684,192} that was originally added here
01-27 04:11:57.228: E/WindowManager(3566): android.view.WindowLeaked: Activity com.example.golfapp.ViewHole has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{40cdf768 V.E..... R.....ID 0,0-684,192} that was originally added here
01-27 04:11:57.228: E/WindowManager(3566):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
01-27 04:11:57.228: E/WindowManager(3566):  at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216)
01-27 04:11:57.228: E/WindowManager(3566):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
01-27 04:11:57.228: E/WindowManager(3566):  at android.app.Dialog.show(Dialog.java:281)
01-27 04:11:57.228: E/WindowManager(3566):  at com.example.golfapp.ViewHole$loadallholes.onPreExecute(ViewHole.java:121)
01-27 04:11:57.228: E/WindowManager(3566):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
01-27 04:11:57.228: E/WindowManager(3566):  at android.os.AsyncTask.execute(AsyncTask.java:534)
01-27 04:11:57.228: E/WindowManager(3566):  at com.example.golfapp.ViewHole.onCreate(ViewHole.java:61)
01-27 04:11:57.228: E/WindowManager(3566):  at android.app.Activity.performCreate(Activity.java:5104)
01-27 04:11:57.228: E/WindowManager(3566):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-27 04:11:57.228: E/WindowManager(3566):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-27 04:11:57.228: E/WindowManager(3566):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-27 04:11:57.228: E/WindowManager(3566):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-27 04:11:57.228: E/WindowManager(3566):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-27 04:11:57.228: E/WindowManager(3566):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-27 04:11:57.228: E/WindowManager(3566):  at android.os.Looper.loop(Looper.java:137)
01-27 04:11:57.228: E/WindowManager(3566):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-27 04:11:57.228: E/WindowManager(3566):  at java.lang.reflect.Method.invokeNative(Native Method)
01-27 04:11:57.228: E/WindowManager(3566):  at java.lang.reflect.Method.invoke(Method.java:511)
01-27 04:11:57.228: E/WindowManager(3566):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-27 04:11:57.228: E/WindowManager(3566):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-27 04:11:57.228: E/WindowManager(3566):  at dalvik.system.NativeStart.main(Native Method) 
```

JSON 类 -

```
 public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

// function get json from url
// by making HTTP POST or GET method
public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) {

    // Making HTTP request
    try {

        // check for request method
        if(method == "POST"){
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == "GET"){
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:43:30.133

我觉得这里没必要用`runOnUIThread()`。

`onPostExecute`

```
protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        if(pDialog.isShowing()){
             pDialog.dismiss();
        }

        ListAdapter adapter = new SimpleAdapter(
                 ViewHole.this, holesList,
                 R.layout.list_item, new String[] { TAG_HOLENUMBER, TAG_INDEX, TAG_YARDAGE, TAG_PAR},                            
                 new int[] { R.id.holenumber, R.id.index, R.id.yardage, R.id.par });

                // updating listview
                setListAdapter(adapter);
    } 
```

并像这样取消`pDialog`in ，`onDestroy()`

```
if(pDialog != null ){
     pDialog.cancel(); 
} 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:16:21.207

onPostExecute() 是 UI 线程。所以 runOnUIThread() 是错误的。另外，我会考虑将您的 AsyncTask 与其所在的活动分开。将来它将更加可重用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:01:43.223

```
 try {
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(
                        url_all_holes);

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            ResponseHandler<String> responseHandler = new BasicResponseHandler();

            String yourReponseInJSONStr = httpclient.execute(httppost,
                    responseHandler);
            //you will get json string here
            Log.d("yourReponseInJSONStr ", yourReponseInJSONStr );

            //check here your getting json string in logcat.
           JSONObject yourJsonObj = new JSONObject(yourReponseInJSONStr);

           JSONArray results = jObject.getJSONArray(TAG_COURSEONE);

           for (int i = 0; i < results.length(); i++) {
              //your parsing snippet
           }
        }
} catch (Exception e) {
            e.printStackTrace();
        } 
```

# python - Python列表删除和迭代列表

> ID：15801878
> 
> 赞同：0
> 
> 时间：2013-04-04T03:10:46.003
> 
> 标签：python, list, iteration

我不理解 Python 在以下方面给我的行为：

```
>>> adj = gx.g.neighbors('v')
>>> adj
['x', 'w']
>>> gx.d['x']
[13, 14, 'black', 'v']
>>> gx.d['w']
[9, 333, 'black', 'v']
>>> for x in adj:                    #for every element in the list
...    print "x", x, gx.d[x]
...    print "color", gx.d[x][2]
...    if gx.d[x][2] != 'white':
...       adj.remove(x)
... 
x x [13, 14, 'black', 'v']
color black
>>> adj
['w'] 
```

我不明白为什么看起来只有元素`'x'`被打印在循环中。发生了什么事`'w'`。算法段的输出应该是一个空列表，因为 的两个元素`adj`都是黑色的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T03:17:20.133

不要删除元素，而是创建一个新列表：

```
new_adj = [x for x in adj if gx.d[x][2] == 'white'] 
```

# plesk - 如何为订阅邮件列表的用户禁用 mailman 配置？

> ID：15801881
> 
> 赞同：-1
> 
> 时间：2013-04-04T03:11:33.967
> 
> 标签：plesk, mailman

我正在使用 Plesk 并且不希望用户更改他们在 Mailman 中的设置，您知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:58:19.270

关闭订阅或托管计划上的“启用邮件列表”设置。

# sql - 基于多个值的 SQL 求和输出

> ID：15801882
> 
> 赞同：1
> 
> 时间：2013-04-04T03:11:38.957
> 
> 标签：sql, sqlite

如何`sum(hours)`使用一个 sql 命令获得显示此表中多个名称的输出？

例如，理想的输出将是 (20, 70)，基于下表，该表将是该日期每个人的总小时数。

当前的 SQL。

```
SELECT sum(hours) from project_time where date = '04/07/2013' AND name = 'Rhys Parker' 
```

上面的 sql 给出了我想要的结果，但它只适用于一个用户，我想获得该日期所有用户的输出。

数据库表：

![数据库表](https://i.stack.imgur.com/xDFEr.png)

数据库结构：SQLITE

```
CREATE TABLE PROJECT_TIME ( name VARCHAR(16), date DATE, project VARCHAR(16), hours VARCHAR(16), PRIMARY KEY (name, project, date)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T03:13:04.417

您将添加一个`GROUP BY`. 将聚合函数与 一起使用`GROUP BY`将为您在表中具有的每个 DISTINCT 名称提供结果：

```
SELECT name, sum(hours) TotalHours
from project_time 
where date = '04/07/2013'
GROUP BY name 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!5/cc582/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T03:13:00.350

听起来你应该使用`GROUP BY`：

```
SELECT name, sum(hours) 
FROM project_time 
WHERE date = '04/07/2013' 
GROUP BY name 
```

这将为您提供每个名称的小时总和：

```
Rhys Parker 70
Bob Smith   20 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!7/97a21/1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T03:13:20.873

你想要一个组：

```
SELECT name, sum(hours)
from project_time
where date = '04/07/2013'
group by name 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T03:14:57.923

只是为了提供一个替代方案，如果你想要它在所有日期，做

```
 SELECT name,date, sum(hours) as TotalHours
   from project_time 
    GROUP BY name,date; 
```

# python - 如何判断python中两个日期时间对象的顺序？

> ID：15801883
> 
> 赞同：0
> 
> 时间：2013-04-04T03:11:45.047
> 
> 标签：python

如何在 python 中按时间顺序判断两个日期时间对象中的哪一个先出现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T03:14:18.110

可能是您可能期望的方式

```
>>> from datetime import datetime
>>> d1 = datetime(2002, 03, 05)
>>> d2 = datetime(2009, 12, 22)
>>> d1 < d2
True
>>> d1 > d2
False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T03:13:28.307

使用`<`运算符。

```
if x < y:
    # x is before y 
```

或者您可以使用`>=`运算符的逻辑补码。

```
if not (x >= y):
    # x is before y 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T03:14:21.150

使用`min`功能：

```
>>> import datetime
>>> d1 = datetime.datetime(2013,1,1)
>>> d2 = datetime.datetime(2012,1,1)
>>> min(d1,d2) 
datetime.datetime(2012, 1, 1, 0, 0) 
```

# c# - 哪些 C# 类对象获取非托管资源？有清单吗？

> ID：15801884
> 
> 赞同：2
> 
> 时间：2013-04-04T03:11:50.577
> 
> 标签：c#, .net, dispose, unmanaged, textreader

我正在使用 XML 对类对象进行序列化和反序列化时，我遇到了这篇博文，该博文展示了如何在 Windows Phone 7 上使用隔离的存储区域进行序列化和反序列化。Windows Phone 7 是我正在开发的平台：

在[此示例中，他显式调用](http://blogs.msdn.com/b/dawate/archive/2010/08/31/windows-phone-7-xml-isolatedstorage-example.aspx)**Dispose()**的唯一对象是 TextReader 对象。我在 MSDN 上查找了 TextReader 对象，发现[文档](http://msdn.microsoft.com/en-us/library/kxw7zx80.aspx)是这样说的：

> 释放 TextReader 使用的非托管资源，并可选择释放托管资源。

所以我假设他这样做的原因是立即释放 TextReader 对象获取的非托管资源。如果不是因为他的博客文章，我不会想到这样做。显然，我不想开始对可见的每个对象调用 Dispose()，那么对于至少调查特定对象何时应该调用 Dispose() 来说，有什么好的经验法则？是否有一些指导方针或某个地方的列表，至少是需要这种特殊处理的流行 .NET 对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T03:14:01.770

> 显然我不想开始在每个对象上调用 Dispose()

错误的。

一般来说，任何实现的对象都`IDisposable`应该在完成后立即释放，通常使用`using`语句。

大多数没有非托管资源的对象都没有实现`IDisposable`（也没有`Dispose()`方法），因此您无需担心。

唯一的例外是基类，它们`IDisposable`在某些派生实现有一些东西要处理（例如，、、`IEnumerator`或`Component`）时`TextReader`实现。
然而，哪些具体的实现需要被处理并不总是很明显（并且它可能随时改变），所以无论如何你都应该处理它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T03:15:31.470

> 显然，我不想开始对可见的每个对象调用 Dispose()，那么对于至少调查特定对象何时应该调用 Dispose() 来说，有什么好的经验法则？

这不是问题。编译器不允许您在未实现它的对象上调用 Dispose()。

而且您*应该为每个实现**它*的对象调用 Dispose() （它将通过`IDisposable`接口执行）。这是您应该遵循的准则。实际上，这就是对象实现时的*含义*`IDisposable`：它具有需要释放的非托管资源。

如果您只需将对象的创建和使用包装在一个`using`语句中，它就变得不那么繁琐了，例如：

```
using (DisposableObject obj = new DisposableObject(...))
{
    obj.DoWork();
} // obj.Dispose() is automatically called here, even if an exception is thrown 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T03:15:29.470

实际上，您确实必须处理实现 IDisposable 的对象。

与直接调用 Dispose() 相比，执行此操作的标准方法是：

```
using(AnyIDisposable obj = ...)
{
    // work with obj here
}
//The Dispose() method is already called here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-12T08:58:40.427

如果我错了，请纠正我。据我所知/理解，.NET Framework 的所有类都是托管的（在程序员看来，尽管底层它们可能使用非托管代码），所以理论上你不需要调用 Dispose() 或使用，因为 gc 会小心。但有时非常推荐使用它们，请参阅[IDisposable 接口](https://stackoverflow.com/questions/3908463/idisposable-interface)和 [.NET Framework 中哪些托管类分配（或使用）非托管内存？](https://stackoverflow.com/questions/1515438/which-managed-classes-in-net-framework-allocate-or-use-unmanaged-Memory)和[http://blogs.msdn.com/b/kimhamil/archive/2008/11/05/when-to-call-dispose.aspx](http://blogs.msdn.com/b/kimhamil/archive/2008/11/05/when-to-call-dispose.aspx)

编辑：（你是对的菜鸟）为了澄清，我将添加来自[IDisposable Interface的 Nayan 答案](https://stackoverflow.com/questions/3908463/idisposable-interface)

建议在以下情况下调用 dispose 或 using：

> 1.你的类有很多对象，并且有很多交叉引用。即使它全部托管，GC 也可能由于活动引用而无法回收内存。您有机会（而不是编写终结器）解开引用并以您附加它们的方式分解链接。因此，您正在帮助 GC 回收内存。
> 
> 2.您打开了一些流，这些流一直存在，直到类的对象死亡。即使管理文件/网络等的此类实现，它们也会深入到 Win32 模式下的句柄。因此，您有机会编写一个 Dispose 方法，您可以在其中关闭流。GDI 对象也是如此，甚至更多。
> 
> 3.您正在编写一个使用非托管资源的类，并且您希望将您的程序集发送给第三方。您最好使用一次性图案，以确保您能够松开手柄以避免泄漏。
> 
> 4\. 你的类实现了许多事件处理程序并将它们与事件挂钩。暴露事件的类的对象，如 Form 等，不会被 GC 释放，因为您的类的本地实现（可能）仍然与这些事件挂钩。您可以在 Dispose 中解开这些事件处理程序；再次帮助GC。

# php - 使用 mongodb 如何检索文档字段数组上的部分文档搜索

> ID：15801885
> 
> 赞同：0
> 
> 时间：2013-04-04T03:12:07.033
> 
> 标签：php, mongodb

我正在使用 mongodb 做项目。所以在这里我只需要检索在文档元素数组上搜索的文档的选定字段。这是我的例子。

```
{
        "_id": {
            "$id": "515ce66ca00b2aa30a000000"
        },
        "user_id": "user_1111",
        "events": [
            {
                "subject": "it test I",
                "start_date": "04/14/2013",
                "start_time": "8.00 AM",
                "end_date": "04/14/2013",
                "end_time": "10.30 AM",
                "all_day_event": "false",
                "discription": "no discription",
                "location": "STC",
                "private": "false",
                "time_zone": "IST",
                "alarm": "true",
                "alarm_threshold": "5",
                "status": "true"
            }
        ]
    } 
```

所以在这里我需要检索以下结果。

```
 {
                "subject": "it test I",
                "start_date": "04/14/2013",
                "start_time": "8.00 AM",
                "end_date": "04/14/2013",
                "end_time": "10.30 AM",
                "all_day_event": "false",
                "discription": "no discription",
                "location": "STC",
                "private": "false",
                "time_zone": "IST",
                "alarm": "true",
                "alarm_threshold": "5",
                "status": "true"
            } 
```

搜索

> {"events.subject":"it test I"} 我是怎么做的。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:51:33.473

我不确定是否有一种简单的方法可以做你想做的事，但你可以尝试以下方法：

1.  如果文档中的事件不能**超过 1**，则可以进行投影：

    ```
    db.events.find({"events.subject":"it test I"},{events:1,_id:0}).pretty()
    {
        "events" : [
            {
                "subject" : "it test I",
                "start_date" : "04/14/2013",
                "start_time" : "8.00 AM",
                "end_date" : "04/14/2013",
                "end_time" : "10.30 AM",
                "all_day_event" : "false",
                "discription" : "no discription",
                "location" : "STC",
                "private" : "false",
                "time_zone" : "IST",
                "alarm" : "true",
                "alarm_threshold" : "5",
                "status" : "true"
            }
        ]
    } 
    ```

    但是，您仍然会以键值格式获得结果。如果您使用的是驱动程序，也许您可​​以轻松检索该值。

2.  如果文档中的事件可以**超过 1**个，恐怕您只能使用以下方法获取每个匹配文档的第一个匹配子文档`$elemMatch`：

    ```
    db.events.find({"events.subject":"it test I"},{events:{$elemMatch:{"subject":"it test I"}},_id:0}).pretty() 
    ```

    你会得到与否相同的结果。1.

3.  您可以尝试使用聚合框架来检索所有匹配的文档：

    ```
    db.events.aggregate(
    {$match: {"events.subject":"it test I"}},
    {$unwind: "$events"},
    {$match: {"events.subject":"it test I"}},
    {
      $project:{
        _id: 0,
        subject: "$events.subject",
        start_date: "$events.start_date",
        end_date: "$events.end_date",
        end_time: "$events.end_time",
        all_day_event: "$events.all_day_event",
        discription: "$events.discription",
        location: "$events.location",
        private: "$events.private",
        time_zone: "$events.time_zone",
        alarm: "$events.alarm",
        alarm_threshold: "$events.alarm_threshold",
        status: "$events.status"
      }
    })
    {
        "result" : [
            {
                "subject" : "it test I",
                "start_date" : "04/14/2013",
                "end_date" : "04/14/2013",
                "end_time" : "10.30 AM",
                "all_day_event" : "false",
                "discription" : "no discription",
                "location" : "STC",
                "private" : "false",
                "time_zone" : "IST",
                "alarm" : "true",
                "alarm_threshold" : "5",
                "status" : "true"
            }
        ],
        "ok" : 1
    } 
    ```

# javascript - 可拖动/可移动 水平

> ID：15801886
> 
> 赞同：5
> 
> 时间：2013-04-04T03:12:45.253
> 
> 标签：javascript, jquery

如何制作可水平拖动/可移动但不能垂直移动的 div？如果这可以在没有 JQuery UI 的情况下完成，我会更喜欢。jQuery 很好。或香草JS。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T03:18:53.697

自己创建这样的行为将是一项相当大的工作。我建议使用 jquery ui：

[http://jsfiddle.net/basarat/f7nNf/1/](http://jsfiddle.net/basarat/f7nNf/1/)

它的一行代码：

```
$( "#draggable" ).draggable({ axis: "x" }); 
```

而且您不需要下载完整的 jquery ui。您可以在此处进行仅可拖动的自定义构建：http: [//jqueryui.com/download/](http://jqueryui.com/download/)

在此处阅读有关可拖动的更多信息：http: [//jqueryui.com/draggable/#constrain-movement](http://jqueryui.com/draggable/#constrain-movement)

# html - Python 3.3 中的 BeautifulSoup 错误

> ID：15801892
> 
> 赞同：0
> 
> 时间：2013-04-04T03:13:17.833
> 
> 标签：html, parsing, beautifulsoup, python-3.3

我只是想解析这个网站，但我一直在使用 BeautifulSoup 时遇到错误。有人可以帮我找出问题吗？

```
import urllib
import urllib.request
import beautifulsoup

html = urllib.request.urlopen('http://yugioh.wikia.com/wiki/Card_Tips:Blue-Eyes_White_Dragon').read()
soup = beautifulsoup.bs4(html)
texts = soup.findAll(text=True)

def visible(element):
    if element.parent.name in ['style', 'script', '[document]', 'head', 'title']:
        return False
    elif re.match('<!--.*-->', str(element)):
        return False
    return True

visible_texts = filter(visible, texts) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:18:34.227

您混淆了模块名和类名。而不是：

```
import beautifulsoup 
```

你需要：

```
import bs4 
```

而不是：

```
beautifulsoup.bs4(...) 
```

你需要：

```
bs4.BeautifulSoup(...) 
```

此外，在 Beautiful Soup 的最新版本中，下划线变体优于名称的驼峰变体，因为它更适合其他 Python 约定：

```
soup.find_all(...) 
```

此外，根据您的用途`visible_texts`，您可能需要 a`list`而不是 lazy `filter`：

```
visible_texts = list(filter(visible, texts)) 
```

# ruby-on-rails - 在rails上下载了ruby，但它不会运行命令

> ID：15801896
> 
> 赞同：0
> 
> 时间：2013-04-04T03:13:30.790
> 
> 标签：ruby-on-rails, ruby, ubuntu, path, rvm

[我通过本教程http://technical-feeds.blogspot.ca/2013/02/how-to-install-ubuntu-and-ruby-on-rails.html](http://technical-feeds.blogspot.ca/2013/02/how-to-install-ubuntu-and-ruby-on-rails.html)在 ubuntu 12.10 上下载了 ruby​​ on rails 。

我做了一切，而且效果很好。

我检查了 ruby​​ -v，它以 ruby​​ 2.0.0p0 的形式返回。我还检查了 rails、rubygems 和 git，它们恢复得很好。

然后我关闭了终端并打开了一个新终端并尝试检查版本，但这又回到了 ruby​​：

```
 bimbola@ubuntu:~$ ruby -v
The program 'ruby' can be found in the following packages:
 * ruby1.8
 * ruby1.9.1
Try: sudo apt-get install <selected package> 
```

这是为rails而来的：

```
bimbola@ubuntu:~$ rails -v
The program 'rails' can be found in the following packages:
 * rails
 * ruby-railties-3.2
Try: sudo apt-get install <selected package> 
```

git 还是可以的

```
bimbola@ubuntu:~$ git --version
git version 1.7.10.4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T08:57:01.373

您需要说明要使用哪个版本的 ruby​​。试试这个：

```
rvm use 2.0.0 
```

您还可以将特定版本的 ruby​​ 设置为**默认**使用，如下所示

```
rvm --default use 2.0.0 
```

RVM（Ruby 版本管理器）允许您安装多个版本的 ruby​​，并根据您的心血来潮一次使用其中任何一个。

要查看系统上**所有可用的 ruby​​ 版本**，请尝试以下操作：

```
rvm list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:49:49.967

在 bashrc 中添加一行以自动加载 rvm：（在终端中执行）

```
echo '[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"' >> .bashrc 
```

或手动加载 rvm：

```
source "$HOME/.rvm/scripts/rvm" 
```

# php - 如何将此字符串转换为普通字符串

> ID：15801898
> 
> 赞同：0
> 
> 时间：2013-04-04T03:13:51.463
> 
> 标签：php, string

我将文本文件内容放入数组。

```
 $f = fopen ($file, "rt");
    $ln= 0;
    while ($line= fgets ($f)) {
        ++$ln;
        //printf ("%2d: ", $ln);
        if ($line===FALSE) print ("FALSE\n");
        else{
            $row = $line;
            $parts = explode("\t", $row);
        }
 } 
```

但是当我插入我得到的值时，它看到： \0M\0o\0n\0t\0g\0o\0m\0e\0r\0y\0 \0C\0o\0u\0n\0t\0y\0-\ 0 \0A\0L\0

或者：“3�1�8�0�0�0�</p>

如何将其转换为普通字符串？

非常感谢。

# c++ - 使用指针在映射中释放内存

> ID：15801900
> 
> 赞同：0
> 
> 时间：2013-04-04T03:14:02.383
> 
> 标签：c++, stl

我试图从映射中删除指针元素（映射中的值是一个指针），我在这里看到了代码[在 VS、UNIX/Linux 中擦除 STL 迭代器后会发生什么情况？](https://stackoverflow.com/questions/433164/what-happens-to-an-stl-iterator-after-erasing-it-in-vs-unix-linux/433207#433207)

```
for(map<T, S*>::iterator it = T2pS.begin(); it != T2pS.end(); T2pS.erase(it++)) {
    // wilhelmtell in the comments is right: no need to check for NULL. 
    // delete of a NULL pointer is a no-op.
    if(it->second != NULL) {
        delete it->second;
        it->second = NULL;
    }
} 
```

我不确定“删除它->秒”是否取消分配正确的内存，因为擦除（it++）步骤已经将迭代器移动到下一个对象。当它到达 delete 语句时，它指向下一个我们不想删除的元素。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:18:56.047

我相信这会按预期工作。

循环的第三部分`for`（迭代器被擦除然后递增）在第一次迭代*之后*执行，对于每个相关的迭代，依此类推。因此，您总是在删除循环内容中已经“处理”过的元素。

一个平行的例子：

```
for (int i = 0; i < 1; ++i) { ... 
```

`i = 0`在递增`i`和检查循环条件之前，您仍将进入循环并执行 with 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T03:58:22.623

您可能想尝试另一种方式：

```
while (T2pS.size() > 0) {
  if (T2pS.begin()->second != NULL) {
    delete T2pS.begin()->second;
  }
  T2pS.erase(T2pS.begin());
} 
```

# android - 如何修复 NetworkOnMainThreadException？

> ID：15801905
> 
> 赞同：-5
> 
> 时间：2013-04-04T03:14:31.027
> 
> 标签：android, sql-server, eclipse, jtds

我是 Android 应用程序的新手。开发，我正在尝试开发一个应用程序。可以通过 jtds 达到 ms sql 2008 r2。

我已经使用 sqllite 数据库来创建连接字符串。

我收到`android os.NetworkOnMainThreadException`错误，请帮助我，我的代码如下，

```
private void giris() {

    DB db = new DB(this);
    db.open();
    Cursor c = db.Query();
    String ipAdresi = null, Port = null, veriTabaniAdi = null, kullaniciAdi = null, sifre = null;

    while (c.moveToNext()) {
        ipAdresi = c.getString(c.getColumnIndex("IpAdresi"));
        Port = c.getString(c.getColumnIndex("PORT"));
        kullaniciAdi = c.getString(c.getColumnIndex("KullaniciAdi"));
        sifre = c.getString(c.getColumnIndex("Sifre"));
    }

    url = "jdbc:jtds:sqlserver://" + ipAdresi + ":" + Port + ";databaseName=";
    driver = "net.sourceforge.jtds.jdbc.Driver";
    userName = kullaniciAdi;
    password = sifre;
    db.close();
    ResultSet results = null;
    try {
        EditText txtTest = (EditText)findViewById(R.id.editTextip);
        EditText txtName = (EditText)findViewById(R.id.editTextport);
        String user = txtTest.getText().toString();
        String pass = txtName.getText().toString();

        Class.forName(driver).newInstance();
        Connection conn = DriverManager.getConnection(url, userName, password);
        Statement statement = conn.createStatement();
        results = statement.executeQuery("Select * From Kullanıcı where KULLANICI = '" + user + "' and SIFRE = '"+ pass + "'");

        if(!results.next())
        {
            Toast.makeText(this, "Hoşgeldiniz ", Toast.LENGTH_SHORT).show();
            try {
                Class d = Class.forName("com.example.endustrinetbistro.Girismenu");
                Intent intent = new Intent(this, d);
                startActivity(intent);
            } catch (ClassNotFoundException e) {
                Toast.makeText(this, "Hata : " + e.toString(),
                        Toast.LENGTH_SHORT).show();
            }
        }
        else
        {
          do{
                Toast.makeText(this, "Hata : " + "Kullanıcı Adınız, Şifreniz veya Baglantı Ayarlarınızda Bir Sorun var ", Toast.LENGTH_SHORT)
                .show();
          }while(results.next());
        }
    } catch (Exception e) {
        Toast.makeText(this, "Hata : " + e.toString(), Toast.LENGTH_SHORT)
                .show();
    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:23:13.733

始终使用 asynctask 来包装数据库调用或网络调用。这些调用可能需要很长时间才能处理，如果从主线程运行，将有可能阻塞应用程序 UI。在异步任务中，您在 doInBackground() 方法中所做的任何事情都将在后台线程中运行。

# java - 初始化的对象数组仍然出现空指针异常？

> ID：15801907
> 
> 赞同：0
> 
> 时间：2013-04-04T03:14:37.220
> 
> 标签：java, arrays, nullpointerexception, syntax-error, poker

我对编程完全陌生，正在尝试用 Java 创建一个扑克程序。

这段代码在 Player 类中，我试图在其中构建一个空手。无论我如何填充数组（使用循环，像这样等），当我尝试调用 hand[1] 或 hand[i] 或其他方法时，Eclipse 都会告诉我有一个空指针。

通常，没有任何编译时错误。但是当我单独构造手中的每张牌时——见下文——编译器会感到不安……

下面是 Player 和 Class 的相关片段。

我究竟做错了什么？我已经搜索了很多，但仍然不明白。
先感谢您！

```
class Player {

// Sets up a blank card array called "hand"
// with five (0,0) slots for real cards.
private Card[] hand = new Card[5];

private Card hand[0] = new Card(0, 0);  // error: syntax error on token "0", delete this token
private Card hand[1] = new Card(0, 0);  // error: syntax error on token "1", delete this token
private Card hand[2] = new Card(0, 0);  // error: syntax error on token "2", delete this token
private Card hand[3] = new Card(0, 0);  // error: syntax error on token "3", delete this token
private Card hand[4] = new Card(0, 0);  // error: syntax error on token "4", delete this token

class Card {
// Sets the default suit/number to zero.
// Lucky for me, such a 0-0 Card does not exist.
private int number = 0;
private int suit = 0;

// Constructs the Card itself by giving it a number and suit.
// Numbers/suits can *only* be set here.

public Card(int n, int s) {

    // Bound tester for suit/number values.
    // Number has to be between 1 and 14 inclusive (Ace low-Ace high).
    // Suit has to be between 1 and 4 inclusive (H/C/D/S).
    if (n > 0 && n <= 14 && s > 0 && s <= 4) {
        number = n;
        suit = s;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T03:19:01.563

您将变量声明与数组初始化混合在一起，导致语法不正确的代码。您已经声明了要用作存储的数组，要对其进行初始化，您可以使用块：

```
private Card[] hand = new Card[5];

{
    hand[0] = new Card(0, 0); 
    hand[1] = new Card(0, 0);
    hand[2] = new Card(0, 0);
    hand[3] = new Card(0, 0);
    hand[4] = new Card(0, 0);
} 
```

您还可以在一行上声明和初始化数组：

```
private Card[] hand = new Card[] {
    new Card(0, 0),
    new Card(0, 0),
    new Card(0, 0),
    new Card(0, 0),
    new Card(0, 0),
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:17:43.997

错误的原因是该行

```
private Card hand[0] = new Card(0, 0); 
```

看起来像是对 Java 的*声明*，你只能声明一个简单的标识符。

# javascript - 发布功能后如何保持复选框保持选中状态

> ID：15801909
> 
> 赞同：2
> 
> 时间：2013-04-04T03:14:46.017
> 
> 标签：javascript, codeigniter, post, checkbox, checked

在 codeigniter javascript 中执行 post 操作后，我的复选框返回 false 值。

**这是我的函数 subjectid_change 的代码：**

```
function subjectid_change(id, subjectid){
    setValue(id, subjectid);
    var field = '#ch' + id;
    set_credithour(field, subjectid);
}

$("select[name^=subjectid]").change(function(){
var subjectid = $(this).val();
set_credithour($(this).parent('td').find('input'), subjectid);
$(this).parent().find('input').attr('name', 'credithour['+subjectid+']');
$(this).parent().next()find('input').attr('name', 'gradepoint['+subjectid+']');
$(this).parent().next().next().find('input').attr('name', 'cgpacalc['+subjectid+']');
}); 
```

我已经尝试过`e.preventDefault();`，但它阻止我更改以前的值。我也试过使用`.prop("checked")`，结果还是一样。

**函数 subjectid_change 的代码：**

```
function set_credithour(field, subjectid){
    $.post('<?php echo site_url('academic/ajax_get_subject_credit'); ?>', {subjectid:subjectid}, 
    function(response){
        if(response.success){
          $(field).val(response.value);
        } else{
          alert('The subject you entered has no credit hour.');
        }
    }, 'json');
} 
```

那么，如果我想在执行`$.post`.

**在控制器中：**

```
function ajax_get_subject_credit()
{
    $subjectid = $this->input->post('subjectid');
    $this->db->select('subjectid, subjectcredit');
    $this->db->where('subjectid',$subjectid);
    $query = $this->db->get('ref_subject');
    $credithour = $query->row()->subjectcredit;
    $query->free_result();
    $result = $credithour;
    echo json_encode(array('success' => true, 'value' => $result));

} 
```

当我选择一个主题时，学分将自动填充并单击复选框以同意计算 CGPA。但是当我在添加新主题后单击计算按钮时，计算过程不会运行并且复选框返回 false。因此，我必须再次单击复选框和计算按钮以使该过程正常工作。这使用户两次做同样的工作。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:13:45.630

```
 $.post('url',function(){
    $('checkbox').attr('checked','checked');
    /*here go on with all your stuffs*/

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T04:57:24.627

这是我的结果：

我发现发布后有一些错误是复选框自动重命名为等级点而不是 cgpacalc。

```
var subjectid = $(this).val();
    set_credithour($(this).parent('td').next().find('input'), subjectid);
    $(this).parent().find('input[name^=subjectstudentid]').attr('name', 'subjectstudentid['+subjectid+']');
    $(this).parent().parent().find('input[name^=credithour]').attr('name', 'credithour['+subjectid+']');
    $(this).parent().parent().find('input[name^=gradepoint]').attr('name', 'gradepoint['+subjectid+']');
    $(this).parent().parent().find('input[name^=cgpacalc]').attr('name', 'cgpacalc['+subjectid+']'); 
```

# c# - 修改配置部分将该部分保存到不同的配置文件

> ID：15801920
> 
> 赞同：2
> 
> 时间：2013-04-04T03:15:47.963
> 
> 标签：c#, encryption, configuration, app-config

我有`myapp.somenamespace.exe.config`一个带有 connectionStrings 部分的文件，我需要对其进行加密。还有一些我想要完整的其他配置设置。所以我写了这个小工具来做这件事：

```
class Program
{
    static void Main(string[] args)
    {
        EncryptSection("myapp.somenamespace.exe.config", "connectionStrings");
    }
    static void EncryptSection(string fileName, string sectionName)
    {
        var config = ConfigurationManager.OpenExeConfiguration(fileName);

        var section = config.GetSection(sectionName);

        if (section.SectionInformation.IsProtected) return;

        secction.SectionInformation.ProtectSection("DataProtectionConfigurationProvider");

        config.Save();
    }
} 
```

会发生什么，它会创建一个名为`myapp.somenamespace.exe.config.config`- 添加重复`.config`扩展名的新配置文件，其中仅包含加密部分。它不会**修改**原始配置文件。

有什么想法为什么会出现这种奇怪的行为以及我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:24:35.450

更改此行：

```
EncryptSection("myapp.somenamespace.exe.config", "connectionStrings"); 
```

对此：

```
EncryptSection("myapp.somenamespace.exe", "connectionStrings"); 
```

[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/ms224437.aspx)指出第一个参数实际上是`he path of the executable (exe) file`，因此它`.config`在`Save`.

# ruby-on-rails - Rails/ActiveRecord - 找到 N 个随机项目

> ID：15801921
> 
> 赞同：2
> 
> 时间：2013-04-04T03:16:12.083
> 
> 标签：ruby-on-rails, ruby, activerecord

我的模型中有以下基本代码用于返回随机事件：

```
def self.random
  Event.first(:offset => rand(Event.count))
end 
```

我想修改函数，使其返回**N**个事件。

我知道`first`可以将数字作为参数，即`Event.first(2)`，但是如何将它与随机偏移量结合起来？

即这样的东西

```
def self.random(n = 1)
  Event.first(n) # and offset??!!
end 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:23:57.757

这应该适用于返回`n`随机记录：

```
def self.random(n = 1)
  Event.order("RANDOM()").limit(n)
end 
```

当您将 Integer 作为第一个参数时，该`limit`方法实际上会被调用，因此如果您愿意，也可以使用而不是。`first``.first(n)``.limit(n)`

您可能需要替换`RAND()`而不是`RANDOM()`取决于您的数据库系统，请参阅文档以获取确切的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T06:53:41.667

虽然 Stuarts 方法本身可以完美运行，但它不能与许多其他 ActiveRecord 范围链接。我找到了另一种适用于链接的方法（使用偏移量）：

```
 def self.random(number = 1)
    Event.offset(rand(Event.count - number+1)).first(number)
  end 
```

# git - 怕 git commit 和 push 会不小心覆盖更改

> ID：15801930
> 
> 赞同：3
> 
> 时间：2013-04-04T03:17:09.233
> 
> 标签：git, bitbucket, git-merge, git-push, git-fetch

我正在和朋友一起使用远程 git 工具[bitbucket.org](http://bitbucket.org)开展一个项目。到目前为止，我们一直在不同时间处理主分支，然后将这些更改提交并推送到远程站点以供其他站点使用。

现在，当我自己工作时，他已经提交并将他的更改推送到存储库，我担心如果我推送我的提交，它会完全重写他的提交。我的担心正确吗？我想我应该新建一个分支，将他的更改提取到master分支中，然后将两者合并，然后push。这是一个好策略吗？或者我什么都不担心。一点建议会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T03:19:33.190

VCS 的整体理念是这样做不会破坏数据。您可以尝试推送，如果您的代码不同步，您将被告知您必须接受上游更改才能提交。

接受更改并合并它们后，您可以将代码应用到 HEAD。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T03:23:11.780

一般来说，这不应该发生，但你必须注意。例如，如果您朋友的代码和您的代码之间存在冲突，您需要注意如何解决冲突。（也就是说，不要盲目地接受你朋友的版本或你自己的版本——你可能不得不手动解决冲突。）

您可能会练习故意更改同一个文件以掌握事情的窍门。

# javascript - Backbone.js 移动滑块 - 通过视图函数传递变量

> ID：15801931
> 
> 赞同：0
> 
> 时间：2013-04-04T03:17:15.017
> 
> 标签：javascript, jquery, backbone.js, mobile-website

我正在按照本教程构建移动滑块：http: [//mobile.smashingmagazine.com/2012/06/21/play-with-hardware-accelerated-css/](http://mobile.smashingmagazine.com/2012/06/21/play-with-hardware-accelerated-css/)

唯一的区别是，我正在尝试将其合并到 Backbone 中。但是，我遇到了一个变量问题。任何人都可以就如何使其发挥作用提供一些建议。在 View 的函数中传递这些变量是问题所在：

```
var sliding = startClientX = startPixelOffset = pixelOffset = currentSlide = 0,
slideCount = $('.slide').length; 
```

**全骨干视图：**

```
WhiteDeals.Views.EditorView = Backbone.View.extend({

initialize: function() {
    _.bindAll(this, 'render', 'slideStart', 'slide');

    var sliding = startClientX = startPixelOffset = pixelOffset = currentSlide = 0,
    slideCount = $('#dealSlide').length;

},

events: {
    "touchstart"             : "slideStart",
    "mousedown"              : "slideStart",
    "mouseup"                : "slideEnd",
    "touchend"               : "slideEnd",
    "mousemove"              : "slide",
    "touchmove"              : "slide"
},

slideStart: function(event) {
    if (event.originalEvent.touches)
      event = event.originalEvent.touches[0];
    if (sliding == 0) {
      sliding = 1;
      startClientX = event.clientX;
    }
}, // End slideStart

slide: function(event) {
    event.preventDefault();
    if (event.originalEvent.touches)
        event = event.originalEvent.touches[0];
        var deltaSlide = event.clientX - startClientX;

    if (sliding == 1 && deltaSlide != 0) {
      sliding = 2;
      startPixelOffset = pixelOffset;
    }

    if (sliding == 2) {
      var touchPixelRatio = 1;
      if ((currentSlide == 0 && event.clientX > startClientX) ||
          (currentSlide == slideCount - 1 && event.clientX < startClientX))
        touchPixelRatio = 3;
      pixelOffset = startPixelOffset + deltaSlide / touchPixelRatio;
      $('#dealSlider').css('transform', 'translate3d(' + pixelOffset + 'px,0,0)').removeClass();
    }
},

slideEnd: function(event) {
    if (sliding == 2) {
        sliding = 0;
        currentSlide = pixelOffset < startPixelOffset ? currentSlide + 1 : currentSlide - 1;
        currentSlide = Math.min(Math.max(currentSlide, 0), slideCount - 1);
        pixelOffset = currentSlide * -$('body').width();
        $('#temp').remove();
        $('<style id="temp">#dealSlider.animate{transform:translate3d(' + pixelOffset + 'px,0,0)}</style>').appendTo('head');
        $('#dealSlider').addClass('animate').css('transform', '');
    }
}, // End slideEnd

render: function() {
    this.$el.html(JST['editor/view']());
    return this;
}

}); // End of Views EditorView 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:46:23.580

我会将这些变量打包到模型中，例如：

```
var CoordsModel = Backbone.Model.extend({})
var coord = new CoordsModel(); 
```

然后将其传递给`WhiteDeals`视图：

```
var view = new WhiteDeals({model: coord}); 
```

然后通过模型的 getter/setter 访问所有函数，我可以访问它的变量，例如：

```
initialize: function() {
    _.bindAll(this, 'render', 'slideStart', 'slide');

    // var sliding = startClientX = startPixelOffset = pixelOffset = currentSlide = 0

    this.model.set('sliding', 0);
    this.model.set('startClientX', 0);
    ...
    this.model.set('currentSlide', 0);

    slideCount = $('#dealSlide').length;

},
...
slideStart: function(event) {
    if (event.originalEvent.touches)
        event = event.originalEvent.touches[0];
    if (sliding == 0) {
        // sliding = 1;
        // startClientX = event.clientX;
        this.model.set('sliding', 1);
        this.model.set('startClientX', event.clientX);
    }
}, // End slideStart 
```

# c# - 如何避免 DataView.ToTable() 中的 KeyNotFoundException？

> ID：15801934
> 
> 赞同：2
> 
> 时间：2013-04-04T03:17:23.017
> 
> 标签：c#, asp.net, datatable, dataview

我正在研究一个遗留的 ASP.NET 代码库，该代码库将*一些*信息存储在`DataTable`对象内部的缓存中（通过企业库）。它是一个多用户的 Intranet 环境，在 .NET 4.0 中运行。生产中存在一个问题，该问题指向先前的“已修复”问题作为其可能的根本原因：`KeyNotFoundException`在调用`DataView.ToTable()`. 此特定代码是在从应用程序中的大多数页面加载页面期间可能发生的验证的一部分。

```
var table = GetSomeDataTableFromCache();
var view = table.DefaultView;
view.RowFilter = "Foo = 'Bar'";
var filteredTable = view.ToTable(); 
```

这是代码的简化。发生的事情是，在过去的几天里*，*这段代码显然抛出了上述异常。以前的开发人员通过捕获并吞下异常并返回 null 来“修复”它。这种行为是其他已曝光问题的罪魁祸首。

我试图重现原始异常但没有取得多大成功。我觉得如果我能重现它，我就可以理解它，并尝试形成一个比*忽略它*更好的原始问题的解决方案，从而也避免*忽略它*造成的混乱。

我注意到谷歌搜索`DataView.ToTable() + KeyNotFoundException`生成的结果表明验证列名存在。一个示例位于此处：

[http://forums.asp.net/t/1695676.aspx/1](http://forums.asp.net/t/1695676.aspx/1)

但是，我观察到，将 设置`RowFilter`为无效的列名时，`EvaluateException`会在该行上发生 an 。我还尝试通过使用空表以及使用产生空结果的过滤器来解决错误。每种情况都证明是非例外的。

那么`KeyNotFoundException`，如果它不是建议的无效列名，那么会在哪里发生呢？一旦我们知道它是如何发生的，我们如何才能避免它呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T03:17:23.017

请注意，ASP.NET 本质上是一个多线程系统。[`DataView`](http://msdn.microsoft.com/en-us/library/system.data.dataview.aspx)被记录为对于读取是线程安全的，但对于写入不是。考虑这一点很重要。

`DataTable`在呈现的代码片段中，从缓存中拉出一个实例并访问它`DefaultView`以进行过滤和写入一个新的实例`DataTable`可能会出现一个证明不安全的条件，这不是因为过滤器中的列，而是因为多个可以同时执行相同代码的线程。

作为实现细节，`DataView`利用了几位内部状态。在`ToTable()`执行过程中，涉及到多个非本地状态。特别是，有一个字典字段作为键在 DataRow 上，还有一个 DataRow 字段用作键！该字典被清除，添加到该行，该行被引用行的值覆盖，然后设置为空，这都是该过程的一部分。当多个线程同时执行此操作时，一个线程正在覆盖并使另一个线程所依赖的状态无效并非不可想象。这可能导致问题中提到的异常以及其他潜在的有害后果。

无论如何，让我们尝试使用代码片段作为起点来重现该问题，同样是在可以利用多次执行的环境中。

```
static void Main()
{
    var table = new DataTable();
    table.Columns.Add("Foo");
    table.Columns.Add("ID", typeof(int));

    for (int i = 0; i < 100; i++)
    {
        table.Rows.Add(i.ToString(), i);
    }

    for (int j = 0; j < 100; j++) 
    {
        Enumerable
           .Range(0,100)
           .AsParallel()
           .ForAll(item => ExecuteToTable(table, item));
    }
}

static void ExecuteToTable(DataTable table, int item)
{
    var view = table.DefaultView;
    view.RowFilter = string.Format("Foo = '{0}'", item);
    var filteredTable = view.ToTable();
} 
```

这会产生异常吗？跑起来看看！它可能需要多次执行，但如果运行代码的机器与我的机器相似，则不需要很多。（通过并行查询的循环，对我来说真的只需要一次。）

我已经在 LinqPad 中运行了这段代码，并且已经生成了“期望的”异常。由于这是一个并行查询执行，它将被包装在 AggregatedException 中，但 InnerException 会说明问题。

> KeyNotFoundException：给定的键不在字典中。

```
at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
at System.Data.DataView.CopyTo(DataRowView[] array, Int32 index)
at System.Data.DataView.GetEnumerator()
at System.Data.DataView.ToTable(String tableName, Boolean distinct, String[] columnNames)
at System.Data.DataView.ToTable() 
```

所以我们已经复制了它，并希望能理解它。怎么避免呢？有几种可能的解决方案，根据您的用例，有些解决方案比其他解决方案更可口，范围可以从大规模重写到细微的更改。

**你可以**

**在访问 DefaultView`table.Copy()` **之前**使用**复制 DataTable 。**这将为每个请求提供自己的表（在上面的代码段中）。但是，如果表很大，复制可能会很昂贵。尝试使用运行上述重现代码`Copy()`并查看是否避免了异常。**

 ****完全避免使用 DataView**。Linq 对于 DataTables 也很有用。下面的代码片段可用于生成过滤的 DataTable 输出。但是，还要注意，如果没有行通过过滤器，它`CopyToDataTable()`可能会抛出*自己的异常。*如果有可能发生这种情况，请在调用最后一部分之前拆分代码并检查结果（使用 .Any()）。与 the 相比的另一个缺点是，如果您使用可用的重载`DataView`，则使用 a`DataView`允许您指定希望包含在输出表中的列。`ToTable`

```
var filteredTable
        = table.AsEnumerable()
               .Where(row => string.Equals(row.Field<string>("Foo"), item.ToString(), StringComparison.InvariantCultureIgnoreCase))
               .CopyToDataTable(); 
```

当然，您可以进一步探索重新设计代码，将您自己的线程安全措施添加到缓存策略等，尽管这些将花费更多时间来实现更改实际表的过滤方式。**

# cuda - 在 GPU 上添加值

> ID：15801937
> 
> 赞同：-2
> 
> 时间：2013-04-04T03:17:38.503
> 
> 标签：cuda

我有一个名为 Product 的课程。

每个产品都有一个值，我想在 GPU 上添加这些值。我在主机端填充了我的阵列

```
int * h_A, * d_A;
    h_A = (int*) malloc(enterNum * sizeof(int));
    cudaMalloc((void **) &d_A, enterNum * sizeof(int));

    Product p("Product", price);

    h_A[i] = p.getValue();

    while (i < enterNum) {
        i++;
        cout << "Enter product name:";
        cin >> desc;
        cout << "Enter product price:";
        cin >> price;
        Product p("Product", price);

        h_A[i] = p.getValue();
    }

    cudaMemcpy(d_A, h_A, enterNum, cudaMemcpyHostToDevice);
    priceSum<<<enterNum, 1024>>>(d_A,enterNum,result);

    int  result2 = 0;

    cudaMemcpy(result, result2, enterNum, cudaMemcpyDeviceToHost); 
```

这里 cudaMemcpy 函数给出错误，因为我不使用指针。我可以在这里做什么？我不需要在这里使用指针，不是吗？

这是我的求和函数：

```
__global__ void priceSum(int *dA, int count, int result) {

    int tid = blockIdx.x;

    if (tid < count){
        result+= dA[tid];
    }
} 
```

完整代码：

```
using namespace std;
#include "cuda_runtime.h"
#include <stdio.h>
#include <string.h>
#include <iostream>
#include <stdlib.h>

class Product {
private:
    char * description;
    int productCode;
    int value;
    static int lastCode;
public:
    Product(char* descriptionP, int valueP) {

        productCode = ++lastCode;
        value = valueP;
        description = new char[strlen(descriptionP) + 1];
        strcpy(description, descriptionP);
    }

    Product(Product& other) {
        productCode = ++lastCode;
        description = new char[strlen(other.description) + 1];
        strcpy(description, other.description);
    }

    ~Product() {
        delete[] description;
    }

    char* getDescription() const {
        return description;
    }

    void setDescription(char* description) {
        this->description = description;
    }

    int getValue() const {
        return value;
    }

    void setValue(int value) {
        this->value = value;
    }

};

int Product::lastCode = 1000;

__global__ void priceSum(int *dA, int count, int * result) {

    int tid = blockIdx.x;

    if (tid < count)
        result+= dA[tid];

}

int main(void) {

    int enterNum, price, * result = 0;
    string desc;
    const char * desc2;

    cout << "How many products do you want to enter?";
    cin >> enterNum;

    int * h_A, * d_A;
    h_A = (int*) malloc(enterNum * sizeof(int));
    cudaMalloc((void **) &d_A, enterNum * sizeof(int));

    int i = 0;

    while (i < enterNum) {

        cout << "Enter product name:";
        cin >> desc;
        cout << "Enter product price:";
        cin >> price;

        Product p("Product", price);
        h_A[i] = p.getValue();
        i++;
    }

    cudaMemcpy(d_A, h_A, enterNum * sizeof(int), cudaMemcpyHostToDevice);
    priceSum<<<enterNum, 1>>>(d_A,enterNum,result);

    int  result2 = 0;

    cudaMemcpy(&result2, result, enterNum, cudaMemcpyDeviceToHost);
    cout << result2;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:51:40.440

`result`您应该在主机代码中显示 的定义，但我认为它是：

```
int result; 
```

基于你如何将它传递给你的`priceSum`内核。

您在这里有超过 1 个问题。

1.  在您的`priceSum`内核中，您将 dA[] 中的值相加并将答案存储在`result`. 但是您已经通过*值*而不是*通过引用*`result`将变量传递给内核，因此您正在修改的值对于函数来说是本地的，并且不会显示在其他任何地方。当 C 中的函数需要修改通过参数列表传递给它的变量，并且修改后的变量要显示在函数调用上下文中时，有必要*通过引用*（即使用指针）而不是传递该参数*按价值*。请注意，这是基于 C 编程语言的，并非特定于 CUDA。因此，您应该将内核定义重写为：

     ***```
    __global__ void priceSum(int *dA, int count, int *result) { 
    ```*** 
****   关于您的 cudaMemcpy 调用，有几个问题需要清理。首先，我们需要`result`使用 cudaMalloc 正确创建存储空间（在调用内核之前，因为内核会在那里存储一些东西。）接下来，我们需要修复 cudaMemcpy 调用本身的参数列表。所以你的主机代码应该重写为：

    ```
    cudaMemcpy(d_A, h_A, enterNum, cudaMemcpyHostToDevice);
    int *result;
    cudaMalloc((void **)&result, sizeof(int));
    priceSum<<<enterNum, 1024>>>(d_A,enterNum,result);

    int  result2 = 0;

    cudaMemcpy(&result2, result, sizeof(int), cudaMemcpyDeviceToHost); 
    ```

    *   您的代码似乎还有其他问题，围绕线程和块的数据分组。但是你没有展示足够多的程序让我理解它。因此，让我指出您的代码仅显示`result`(and `result2`) 的单个值，但是按照内核的编写方式，每个*线程*都会将其值添加`dA[tid]`到 to `result`。您不能让一堆线程都在没有控制机制的情况下更新全局内存中的单个值，并期望获得合理的结果。像这样的问题通常最好使用经典的并行缩减算法来处理，但为了简单起见，为了尝试让某些东西正常工作，您可以使用[atomics](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#atomic-functions)：

    ```
    atomicAdd(result, dA[tid]); 
    ```

    *   对不起，但你的内核根本没有意义。您正在使用`blockIdx.x`作为`tid`变量，但请注意，*对于特定 block 中的每个线程*`blockIdx.x`来说，这是一个相同的数字。因此，继续以这种方式添加每个线程是没有意义的。我相信如果您将内核调用更改为：*`dA[tid]``result`*

     *```
    priceSum<<<enterNum, 1>>>(d_A,enterNum,result); 
    ```****

# jquery - CSS - 选择包含模式的 id

> ID：15801940
> 
> 赞同：1
> 
> 时间：2013-04-04T03:17:57.293
> 
> 标签：jquery, css

我需要对 css 充满创造力，恐怕我的知识已经碰壁了。我需要选择所有包含 map-popup 的 id。

例如：

```
#map-popup-1
#map-popup-2
#map-popup-3
#map-popup-4 
```

但也排除了我正在使用 jquery 工作的那个

```
$('#geo-result-block').click(function(){
   //this line I need to say all ids with map-popup have a z-index of 100 except map-popup-5
   $('#map-popup-5').css('z-index', '200').fadeIn(500);
}); 
```

更新：

“not”方法是不必要的

这是我的最终代码，似乎工作正常：

```
$('#geo-result-block').click(function(){
        var $mp = $('[id^="map-popup"]');
        $($mp).css('z-index', '100');
        $('#map-popup-5').css('z-index', '200').fadeIn(500);
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T03:19:30.800

使用`attribute starts with`选择器：

```
var $mp = $('[id^="map-popup"]'); 
```

对于排除元素，您可以使用`not`方法：

```
$mp.not('#map-popup-5'); 
```

# c - C中数组的递归和

> ID：15801957
> 
> 赞同：2
> 
> 时间：2013-04-04T03:20:07.333
> 
> 标签：c, arrays, recursion, sum

您好，我正在学习 C 中的递归，我正在尝试找到元素的总和。

这是我的主要内容：

```
int main()
{

    int arr[] = {1,2,3,4,5};
    int sum;
    sum = arr_sum(arr,4);
    printf("\nsum is:%d",sum);

    return 0;

} 
```

我的递归函数：

```
//n is the last index of the array

int arr_sum( int arr[], int n )
{ // must be recursive

    int sum = 0;
    //base case:
    if (n < 0) {
        return sum;
    } else{
        sum = sum + arr[n];
    }
    //make problem smaller
    arr_sum(arr,n-1);
} 
```

输出是：

```
sum is :0 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-04T03:31:25.760

试试这个你的递归函数：

```
int arr_sum( int arr[], int n ) { 
  if (n < 0) {
    //base case:
    return 0;
  } else{
    return arr[n] + arr_sum(arr, n-1);
  }
} 
```

您需要将第 n 个案例添加到您的 n-1 个案例中，直到您到达基本案例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T03:24:46.670

您可以添加第三个参数，即到目前为止计算的运行总计（以 开头`0`）。

当您递归调用该函数时，传递运行总计。

```
int arr_sum( int arr[], int n, int sum )
{ // must be recursive

    if (n < 0) {
         return sum;
    }

    sum += arr[n];

    return arr_sum(arr, --n, sum);
} 
```

或者，您将其更改为不需要`sum`像这样传递变量。

```
int arr_sum( int arr[], int n )
{ // must be recursive

    if (n < 0) {
         return sum;
    }

    return arr[n] + arr_sum(arr, n - 1);
} 
```

这样，它类似于在斐波那契数列中找到一个数字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T03:44:19.663

试试你的程序的这个修改版本，并在笔/纸上计算它的流动方式。希望能帮助到你。

```
#include <stdio.h>

//n is the last index of the array
int
arr_sum(int arr[], int n )
{
    //base case:
    if (n == 0) {
        return arr[0];
    }

    return (arr[n] + arr_sum(arr,n-1));
}

int
main(void)
{
    int arr[] = {1,2,3,4,5};
    int sum;

    sum = arr_sum(arr,4);
    printf("\nsum is:%d\n",sum);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T03:34:48.667

你没有从其他部分返回任何东西。你也有回报。像。

```
return arr_sum(arr,n-1)+arr[n]; 
```

所以这会一次又一次地调用该函数，直到 n 为零。

你明白我的意思了吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T03:24:50.710

您的代码的问题在于，每次调用递归函数时，都会将总和初始化为`0`.

`sum`在将解决问题的递归方法之外声明。

# facebook - 无法通过 FB Graph API 获取签到

> ID：15801959
> 
> 赞同：2
> 
> 时间：2013-04-04T03:20:33.547
> 
> 标签：facebook, facebook-graph-api

你能告诉我为什么我不能通过电话获得签到`/me/checkins`吗？在 Graph API Explorer 中，我为我的应用程序指定`user_status`了权限`friends_status`。我得到以下回应：

```
{
  "error": {
    "message": "(#602) page_id is not a member of the checkin table.", 
    "type": "OAuthException", 
    "code": 602
  }
} 
```

有趣的是，如果我将应用程序切换到“Graph API Explorer”并赋予它相同的权限，它就可以工作。

我的应用程序设置中是否缺少某些内容？

*更新*：这是我的令牌的调试信息（取自**[此处](https://developers.facebook.com/tools/debug/)**）

```
Info

App ID: 587071704636494 : Something
User ID: 100005276526713 : Something
Issued: Unknown 
Expires: 1365148800 (this Friday)  
Valid: True 
Origin: Unknown 
Scopes: friends_status read_stream user_status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T08:52:23.683

我认为这是这些变化的开始：

[https://developers.facebook.com/roadmap/](https://developers.facebook.com/roadmap/)

> FQL Checkin 表“page_id”更改：我们将 Checkin 表的“page_id”重命名为“target_id”。

再次感谢扎克伯格！

# spring-mvc - 使用 Spring 框架和 mongodb 进行 Junit 测试的示例

> ID：15801960
> 
> 赞同：1
> 
> 时间：2013-04-04T03:20:42.820
> 
> 标签：spring-mvc, junit, mongodb-java

我需要为我的 spring 应用程序做一个 junit 测试，它是用 mongo 数据库完成的。我以前没有使用 spring 和 mongodb 嵌入 junit 测试的经验。任何回复，对我都有很大帮助...

感谢问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:19:19.617

我将从查看 JUnit 文档开始，具体来说，我将从[Assertions](https://github.com/junit-team/junit/wiki/Assertions)开始。当使用依赖注入框架（例如 Spring）进行测试时，模拟框架是必不可少的。查看[EasyMock](http://www.easymock.org/)或[Mockito](https://code.google.com/p/mockito/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T07:23:06.770

pom.xml file Config as follows,

```
<properties>
    ....
    <junit.version>4.10</junit.version>
    ....
</properties>
<dependencies>
    .....
    <!-- Test dependencies -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>${junit.version}</version><!-- JUNIT CHANGES -->
        <scope>test</scope>         
    </dependency>

    <dependency>
        <groupId>de.flapdoodle.embed</groupId>
        <artifactId>de.flapdoodle.embed.mongo</artifactId>
        <version>1.26</version>
        <scope>test</scope>
    </dependency>            

    <!-- Mockito --><!-- JUNIT MOCKITO DEPENDENCY ADDED -->
    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.8.4</version>
    </dependency>
    <!-- Mockito -->
     ......
</dependencies>
<build>
      ....
      <plugins>
          ......
           <!-- JUNIT PLUGIN CODE ADDED-->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
              <source>1.5</source>
              <target>1.5</target>
            </configuration>
        </plugin>
         <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.14</version>
            <configuration>
        <useSystemClassLoader>false</useSystemClassLoader>
            </configuration>
            <dependencies>
              <dependency>
                <groupId>org.apache.maven.surefire</groupId>
                <artifactId>surefire-junit47</artifactId>
                <version>2.14</version>
              </dependency>
            </dependencies>
          </plugin>
        <!-- END OF JUINT CODE -->
            .....
      </plugins>
      <sourceDirectory>src/main/java</sourceDirectory>
      <testSourceDirectory>src/test/junit</testSourceDirectory>
</build>.... 
```

After setting up the pom cofigurations, do the test case code as by the following steps

*   Assuming as you are using IDE's like STS or else, just right click on the corresponding class and click on Junit Test Case and create class under the src/test/java path.
*   For implementing for spring controller classes first we initialize all the objects like initialize values from the test case code of the corresponding class in the `setUp()` method.
*   Then call the corresponding methods from the test case and do the appropriate junit assertion check-in if the corresponding method returns values like string/int/boolean etc.,

Like below:

```
@Test
    public void testSave() {
    MessageValue messageValue = saveController.saveValue(value+"::Test", model);
    Query query = new Query(Criteria.where("value").is("Test").and("_id").is(id));
    SaveValue saveValueThis = template.findOne(query, Save.class);
    assertEquals("Success", messageValue.getMessage());
    // delete the saved value at the end of test case
        testDelete(); 
} 
```

If it returns some UI page that is redirection to some other screen then check like below,

```
mockMvc = MockMvcBuilders.standaloneSetup(yourController).build();
    mockMvc.perform(get("/request/url").accept(MediaType.ALL))
    .andExpect(status().isOk()); 
```

*   Finally in the test case `tearDown()` method reset the initialized values.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:53:01.593

我在 Spring MVC 应用程序和 JUnit 4.8.2 中使用 Spring mongo 模板进行单元测试。只需为您的 mongoTemplate 创建一个 bean 并使用 Autowired 将其注入您的类中。至于测试，请按照下列步骤操作：

1.创建一个新的JUnit测试用例（在Package Explorer中右击你的类，然后new->JUnit Test Case）。它将为您指定的类的每个方法创建一个测试方法。

2.现在你的测试在*src/test/java*和你的资源在*src/test/resources*。如果您仅为测试创建一个 spring 配置文件会更好，这样您就可以将测试指向本地 mongodb 实例，并将您的应用程序指向可能是 Development mongoDB 实例。*因此，在src/test/resources*创建一个配置文件并将其命名为*testSpringConfig.xml*或其他任何名称，然后在那里创建 bean：

```
 <mongo:db-factory dbname="myDB"  host="localhost" 
    username="myDbUser" password="myPass"/>    

    <beans:bean id="mongoTemplate"   
    class="org.springframework.data.mongodb.core.MongoTemplate">
        <beans:constructor-arg name="mongoDbFactory" ref="mongoDbFactory" />
    </beans:bean>

    <beans:bean id="mongoTemplateLibrary"    
    class="org.springframework.data.mongodb.core.MongoTemplate">
        <beans:constructor-arg name="mongoDbFactory" ref="mongoDbFactory" />
    </beans:bean> 
```

3.在您的测试类中，使用注释来引用您的配置文件：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"/testSpringConfig.xml"})
public class MyDaoTest { 
```

4.一旦你设置好你的测试类，注入mongo模板

```
@Autowired
@Qualifier("mongoTemplate")
private MongoTemplate mongoTemplate; 
```

5.现在你可以使用它直接插入/删除/查找/更新到mongo（尽管这将是一个集成测试而不是单元测试）例如，你可以使用Tear Down方法删除你在测试中插入的对象：

```
@After
public void tearDown() {
    mongoTemplate.remove(myObject);
} 
```

# php - login.php 未启动会话或设置数组

> ID：15801964
> 
> 赞同：0
> 
> 时间：2013-04-04T03:20:57.790
> 
> 标签：php, arrays, session, cookies, login-script

我有一个`login.php`文件，在有效登录后它似乎没有开始会话或在会话数组中存储任何信息？任何帮助，将不胜感激。谢谢你。

```
 <?php 
include_once 'accounts/db.php';
include_once 'accounts/dbfunctions.php';

$err = array();

foreach($_GET as $key => $value) {
    $get[$key] = filter($value); //get variables are filtered.
}

if ($_POST['doLogin']=='Login')
{

foreach($_POST as $key => $value) {
    $data[$key] = filter($value); // post variables are filtered
}

$user_email = $data['usr_email'];
$pass = $data['pwd'];

if (strpos($user_email,'@') === false) {
    $user_cond = "user_name='$user_email'";
} else {
      $user_cond = "user_email='$user_email'";

}

$result = mysql_query("SELECT `id`,`pwd`,`full_name`,`approved`,`user_level` FROM users WHERE 
           $user_cond
            AND `banned` = '0'
            ") or die (mysql_error()); 
$num = mysql_num_rows($result);

  // Match row found with more than 1 results  - the user is authenticated. 
    if ( $num > 0 ) { 

    list($id,$pwd,$full_name,$approved,$user_level) = mysql_fetch_row($result);

    if(!$approved) {
    //$msg = urlencode("Account not activated. Please check your email for activation code");
    $err[] = "Account not activated. Please check your email for activation code";

    //header("Location: login.php?msg=$msg");
     //exit();
     }

        //check against salt
    if ($pwd === PwdHash($pass,substr($pwd,0,9))) { 
    if(empty($err)){            

     // this sets session and logs user in  
       session_start();
       session_regenerate_id(true); //prevent against session fixation attacks.

       // this sets variables in the session 
        $_SESSION['user_id']= $id;  
        $_SESSION['user_name'] = $full_name;
        $_SESSION['user_level'] = $user_level;
        $_SESSION['HTTP_USER_AGENT'] = md5($_SERVER['HTTP_USER_AGENT']);

        //update the timestamp and key for cookie
        $stamp = time();
        $ckey = GenKey();
        mysql_query("update users set `ctime`='$stamp', `ckey` = '$ckey' where id='$id'") or die(mysql_error());

        //set a cookie 

       if(isset($_POST['remember'])){
                  setcookie("user_id", $_SESSION['user_id'], time()+60*60*24*COOKIE_TIME_OUT, "/");
                  setcookie("user_key", sha1($ckey), time()+60*60*24*COOKIE_TIME_OUT, "/");
                  setcookie("user_name",$_SESSION['user_name'], time()+60*60*24*COOKIE_TIME_OUT, "/");
                   }
          header( 'Location: http://www.example.com' ) ;
         }
        }
        else
        {
        //$msg = urlencode("Invalid Login. Please try again with correct user email and password. ");
        //$err[] = "Invalid Login. Please try again with correct user email and password.";
        header("Location: index.html?p=problem1");
        }
    } else {
        header("Location: index.html?p=problem2");
        //$err[] = "Error - Invalid login. No such user exists";
      }     
}

?>
<script type="text/javascript" src="jquery/jquery.validate.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    $("#logForm").validate();
  });
  </script>
<?php
      /******************** ERROR MESSAGES*************************************************
      This code is to show error messages 
      **************************************************************************/
      if(!empty($err))  {
       echo "<div class=\"msg\">";
      foreach ($err as $e) {
        echo "$e <br>";
        }
      echo "</div>";    
       }
      /******************************* END ********************************/      
      ?>
<div>
<?php
echo "session user id " . $_SESSION['user_id'];
echo "session id" . $sess_user_id;
echo "cookie id" . $cook_user_id;
echo "Session A " . $test1;
Print_r ($_SESSION);
$sid = session_id();
if($sid) {
    echo "Session exists!" . session_id();
} else {
    echo "NOTHING!";
}
echo $_SESSION['user_name'];
echo $_COOKIE['user_id'];
echo $_COOKIE['user_key'];
?>
<a id="11" href="#colorbox" class="Link">Login</a>
</div>
<div style='display:none'>
<div id="colorbox">
  <div id="LoginBox">
    <form action="login.php" method="post" name="logForm" id="logForm">
      <div class="Fields">
      <div id="userName">UserName:</div>
        <input name="usr_email" type="text" class="required" size="25">
      </div>
      <div class="Fields" style="padding-top:5px;">
      <div id="passWord">Password:</div>
        <input name="pwd" type="password" class="required password" size="25">
      </div>
      <div class="Fields" style="padding-top:5px;">
        <input name="remember" type="checkbox" id="remember" value="1">
        Remember me</div>
      <div class="Fields" style="padding-top:5px;text-align:center;">
        <input name="doLogin" type="submit" id="doLogin3" class="button" value="Login">
      </div>
    </form>
    <div id="forgotPasswordLink">
    <a class="sitelink" id="colorboxForgot" href="forgot.php">Forgot Password</a></div>
  </div>
</div>
</div> 
```

现在登录后我看到 url index.html?p=problem 而不是[http://www.example.com](http://www.example.com)

以下回声是空的，所以我相信这意味着没有信息进入会话数组

```
<?php
echo "session user id " . $_SESSION['user_id'];
echo "session id" . $sess_user_id;
echo "cookie id" . $cook_user_id;
echo "Session A " . $test1;
Print_r ($_SESSION);
$sid = session_id();
if($sid) {
    echo "Session exists!" . session_id();
} else {
    echo "NOTHING!";
}
echo $_SESSION['user_name'];
echo $_COOKIE['user_id'];
echo $_COOKIE['user_key'];
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:42:31.867

请记住，您应该在页面的最顶部开始会话，即在任何开始之前。否则您将获得会话变量的空值。如果你想使用会话变量。移动 session_start();

到拳头线。

确定这会解决你的问题

# c# - C# WPF - TreeView 与字典绑定

> ID：15801965
> 
> 赞同：3
> 
> 时间：2013-04-04T03:21:17.507
> 
> 标签：c#, wpf, binding, treeview

我需要用我拥有的字典列表填写 TreeView。

```
List<Dictionary<string,object>> 
```

字典有标题和子键的地方

```
[{"title":"foo", "children":[]},] 
```

但是我无法弄清楚绑定。这是完全错误的。我显然需要显示 dict["title"] 并使用 dict["children"] 作为孩子。

```
<TreeView.ItemTemplate>
    <HierarchicalDataTemplate ItemsSource="{Binding Value}">
       <HierarchicalDataTemplate.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding}"/>
            </DataTemplate>
        </HierarchicalDataTemplate.ItemTemplate>
        <TextBlock Text="{Binding Key}"/>
    </HierarchicalDataTemplate>
</TreeView.ItemTemplate> 
```

哈哈，显然 Binding 支持 [] 语法，所以这种工作：

```
 <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Path=[children]}">
                <HierarchicalDataTemplate.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Path=[title]}"/>
                    </DataTemplate>
                </HierarchicalDataTemplate.ItemTemplate>
                <TextBlock Text="{Binding Path=[title]}"/>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate> 
```

但是，每个字典都可以将子级嵌套到他们想要的任意多个级别。这可以处理吗？使用上面的模板和下面的代码，孙子不显示。

```
 string s = @"[{""title"":""Title1"",""children"":[{""title"":""Child1"",""children"":[{""title"":""grandchild1"",""children"":[]}]}]}]";

        List<Dictionary<string, object>> marr = JsonConvert.DeserializeObject<List<Dictionary<string, object>>>(s);
        mTreeView.ItemsSource = marr; 
```

顺便说一下，在 Binding 中使用 [] 称为索引器，我从这个链接的文档中找到了它：

[http://msdn.microsoft.com/en-us/library/ms752300.aspx#Path_Syntax](http://msdn.microsoft.com/en-us/library/ms752300.aspx#Path_Syntax)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:57:38.547

这是你正在看的东西：

```
<TreeView ItemsSource="{Binding ElementName=rootWindow, Path=Directories}">
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding [Children]}">
                <TextBlock Text="{Binding [Title]}" />
                <HierarchicalDataTemplate.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding}" />
                    </DataTemplate>
                </HierarchicalDataTemplate.ItemTemplate>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView> 
```

这就是我填充数据的方式：

```
Dictionary<string, object> documentsDictionary = new Dictionary<string, object>();
        List<string> documentsDictionaryChildren = new List<string> { "Document1", "Document2", "Document3", "Document4", "Document5" };
        documentsDictionary.Add("Title", "Documents");
        documentsDictionary.Add("Children", documentsDictionaryChildren);

        Dictionary<string, object> picturesDictionary = new Dictionary<string, object>();
        List<string> picturesDictionaryChildren = new List<string> { "Picture1", "Picture2", "Picture3", "Picture4", "Picture5" };
        picturesDictionary.Add("Title", "Pictures");
        picturesDictionary.Add("Children", picturesDictionaryChildren);

        Directories.Add(documentsDictionary);
        Directories.Add(picturesDictionary); 
```

# graphics - Three.js：Lambert 和 Phong 之间的确切区别是什么？

> ID：15801971
> 
> 赞同：27
> 
> 时间：2013-04-04T03:22:33.727
> 
> 标签：graphics, 3d, three.js

我了解 Lambert 和 Phong 在一般计算机图形学中的区别。我也了解我们如何使用 three.js 更改和创建我们自己的材质。但我无法弄清楚 MeshLambertMaterial 和 MeshPhongMaterial 在默认状态下的区别。

我曾尝试在具有一个定向光源和 125 个球体的场景中切换它们，但我看不出任何差异。Three.js 正在我书中的一个章节中使用，因此我需要确保所有信息都准确无误。

谢谢，谢恩

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-04T05:06:17.547

Shane，你糊涂不是你的错。

Lambert 是从表面反射的光的照明模型（具有物理基础），以入射照明相对于入射点表面法线的方向表示。

Phong 是一种更细致入微的着色模型（尽管它更老套），它表示光由环境 + 漫反射 + 镜面反射分量组成。它将环境分量视为无处不在（hack！），漫反射分量使用上面的 Lambertian 模型，镜面反射分量使用幂律衰减（这是一个巧妙的 hack，大致接近实际的 BRDF）。

“Phong”这个词也是一种插值方法（在现代基于三角形的渲染管道中使用时）。在计算三角形内部像素的照明时，您有两种选择：

1.  Gouraud 着色：计算三个顶点的颜色并在内部插值，使用重心坐标，或

2.  Phong shading：使用三个顶点的法线，在内部插入法线，并在每个像素处使用这个插入的法线计算阴影。

这就是为什么（正如@RayToal 指出的那样），如果您的镜面反射“高光”落在三角形的内部，则没有一个顶点会变亮，但 Phong 着色会插入法线并且内部会有一个亮点你渲染的三角形。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-04T10:53:34.423

我假设您想要`MeshLambertMaterial`和`MeshPhongMaterial`在three.js 中实现的确切区别。

您必须区分着色模型和照明模型。Three.js 没有实现“纯”Phong 或 Lambert 模型。

对于`MeshLambertMaterial`，在每个顶点处执行照明计算，并将生成的颜色插值到多边形的整个面上。（Gouraud 着色；（广义）Lambert 光照模型）

对于`MeshPhongMaterial`，顶点法线在多边形的表面上进行插值，并在每个纹素上进行光照计算。（Phong 着色；（广义）Phong 光照模型）

当您有一个靠近面部的点光源时，您会看到明显的差异——尤其是当灯光的衰减距离小于到面部顶点的距离时。

对于这两种材质，在 的情况下`FlatShading`，面法线替换每个顶点法线。

三.js.r.66

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-28T13:15:07.400

**在计算机图形学中，将Phong 反射模型**与**Phong 着色**混淆是很常见的。前者是像Lambertian这样的点局部照明模型，后者是像Gouraud shading这样的插值方法。如果您发现很难区分它们，这里有一个关于每个主题的详细文章列表。 [http://en.wikipedia.org/wiki/List_of_common_shading_algorithms](http://en.wikipedia.org/wiki/List_of_common_shading_algorithms)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T10:05:29.343

如果您了解一点 GLSL，我认为您最好的办法是查看两种情况下生成的顶点/片段着色器并寻找差异。可以使用[http://benvanik.github.com/WebGL-Inspector/](http://benvanik.github.com/WebGL-Inspector/)获取程序的代码，或者`console.log()`在三个js源中的正确位置放一个（找buildProgram，你应该输出`prefix_fragment + fragmentShader`并`prefix_vertex + vertexShader`看到程序代码）。

此外，您可以查看用于创建两个着色器的构建块：

兰伯特：[https](https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLShaders.js#L2036) ://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLShaders.js#L2036 Phong：[https ://github.com/mrdoob/three.js/blob/master/src /renderers/WebGLShaders.js#L2157](https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLShaders.js#L2157)

它可能比查看源程序代码更具可读性。

# knockout.js - Durandal Subrouting (热毛巾)

> ID：15801972
> 
> 赞同：10
> 
> 时间：2013-04-04T03:22:39.237
> 
> 标签：knockout.js, routing, durandal, hottowel

基本上，我正在尝试在菜单中创建一个菜单。因此，在主菜单路线中，会有一个带有另一组路线的垂直菜单。单击子菜单路由时，仅更新部分页面，垂直菜单不会重新加载。我猜它会类似于这个 KO fiddle [http://jsfiddle.net/dPCjM/](http://jsfiddle.net/dPCjM/)，但是在主路由视图中需要另一组“ghost” KO指令：

```
 <!--ko compose: {model: router.activeItem, 
            afterCompose: router.afterCompose, 
            transition: 'entrance'} -->
 <!--/ko--> 
```

以及 durandal 路由器上的其他一些配置...

编辑：澄清一下，我不是要在其中一个主菜单项中创建下拉菜单。我正在尝试在其中一个视图中创建一个菜单。基本上是 durandal 应用程序中的一个 durandal 应用程序 :)

框架？？:)))))))))))

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T23:33:51.673

# 编辑

从 Durandal.js 2.0 开始，[路由器插件](http://durandaljs.com/documentation/Using-The-Router/)现在有一个内置的子路由器，它允许开箱即用的深度链接。

# /编辑

# 以下答案适用于 durandal 1.2

durandal 路由器插件是[sammyjs](http://sammyjs.org/)的包装器。

路由器插件允许您控制浏览器历史堆栈，还使您的水疗中心能够链接到水疗中心的页面。

很容易将它链接到 1 级深度，其中您有 1 个主菜单和交换进出的页面。但是如果你想在主菜单中有一个子菜单并提供[深度链接](http://en.wikipedia.org/wiki/Deep_linking)呢？

当路由器排队交换视图时，[视图模型激活](http://durandaljs.com/documentation/View-Model/)器首先检查请求[是否针对视图模型中的同一页面](https://github.com/BlueSpire/Durandal/blob/master/App/durandal/viewModel.js#L216)。如果它是相同的视图，那么您可以在路线发生之前取消路线。通过在调用同一页面时取消路由，您可以获取路由参数并自己处理子路由。

检查它是否调用同一页面的方法位于名为 的视图模型中`areSameItem`。您可以通过调用在主视图模型中覆盖此方法：

```
return App = {
  router: router,
  subPage: ko.observable('defaultSubPage'),
  activate: function () {
     router.activeItem.settings.areSameItem = function (currentItem, newItem, data) {
        if (currentItem != newItem) { return false; }
        else { App.subPage(convertSplatToModuleId(data.splat)); return true; }
     }
  }
} 
```

当然，这是在一个 amd 模块内，`router`是 durandal 路由器插件。`convertSplatToModuleId`是一个函数，它接受`splat`属性，即路由值，并将其转换为您希望显示的子页面的模块。

所以，这部分很简单，但还有一件事需要做。

```
<div data-bind="compose: { model: subPage, afterCompose: router.afterCompose }"></div> 
```

您对子页面容器的绑定需要调用`router.afterCompose`，因为这是告诉路由器路由已完成并准备好处理新路由的原因。

这不是一个容易解释的任务。因此，我创建了一个[示例并将其推送到 github here](https://github.com/evanlarsen/DurandalDeepLinkingExample)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-23T13:59:57.933

提醒那些感兴趣的人，即将发布的 Durandal js 2.0 版本已经加入了深度链接功能，这大大简化了基于 Evan 的优秀示例滚动您自己的深度链接的事情。

查看[Knockout 示例](http://durandaljs.com/documentation/Understanding-the-Samples/)以查看它的实际效果，您可以通过[Durandal js github 项目](https://github.com/BlueSpire/Durandal)从最新的二进制文件中获取该示例。

值得注意的是，它与之前的 Durandal 版本有很大的不同，因此您必须对原始的 HotTowel 模板进行一些修改以支持它，因为有许多重大更改。

# android - 带 GPU 的模拟器，永远加载

> ID：15801975
> 
> 赞同：0
> 
> 时间：2013-04-04T03:22:56.280
> 
> 标签：android

有很多关于 GPU 问题的问题，有些解决了，有些没有。但我仍在寻找解决我的问题。

这是发生的事情，首先，我必须通过更改特定偏移量的值来启用 HAX，因为 SONY 不允许用户通过 BIOS 启用它。之后，我安装了 SDK Manager Revision 21.1 下载的 HAXM。一切顺利，为此选择了1024MB。在 CMD 中检查，intehaxm 服务正在运行。然而，每当我在 GPU 上运行模拟器时，它只会一直显示黑屏，并且需要大约 800 MB 的内存和 50% 的 CPU，这使得笔记本电脑相当滞后。如果没有 GPU，该模拟器运行良好，但速度太慢。

我使用的设置是

![Android 模拟器设置](https://i.stack.imgur.com/OKYrA.png)

# android - 尝试启动 android 失败 - 需要更新或安装工具

> ID：15801978
> 
> 赞同：0
> 
> 时间：2013-04-04T03:23:15.127
> 
> 标签：android, installation

我在论坛上看到了这个，但与论坛上需要更新版本才能解决的问题不同，我相信我的软件是最新的。

在 Windows 7 下，Android SDK Manager 显示：

android sdk 工具 21.1 已安装

Android sdk 平台工具 16.0.2 已安装

SDK 路径 c:\users\owner\documents\adt-bundle-windows-x86-20130219\adt-bundle-windows-x86-20130219\sdk

当我尝试通过“file-new-Android Application Project”开始一个项目时，面板报告

---工具需要通过SDK Manager更新

---工具安装过时或未安装

对此的任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:02:03.987

```
OK. I had viewed this Eclipse ADT and find out the way to get around this issue and able to Update My SDK Tool to 21.1.0.

Solution is : First Update ADT to 21.1.0 and Then Update SDK Tool to 21.1.0

Actually, above link Says,

ADT 21.1.0 is designed for use with SDK Tools r21.1.0\. If you haven't already installed SDK Tools r21.1.0 into your SDK, use the Android SDK Manager to do so.

So, What i have to do is to update my ADT to 21.1.0(Latest Version) and then was able to update SDK tool to 21.1.0\. i thought only SDK Tool has been updated Not ADT. so i was Updating the SDK Tool with Older ADT Version(21.0.1).

How to Update your ADT to Latest Version?

In Eclipse go to Help
Install New Software ---> Add
inside Add Repository write the Name: ADT (as you want)
and Location: https://dl-ssl.google.com/android/eclipse/
after loading some time you will get Developer Tools and NDK Plugins
check both if you want to use NDK in the future or check Developer Tool only
click Next
Finish

Copied 
```

# python - 在 Django 模板标签中包含 URL

> ID：15801986
> 
> 赞同：0
> 
> 时间：2013-04-04T03:24:15.167
> 
> 标签：python, html, django

我正在构建一个 Django 博客应用程序，因为这显然是所有酷孩子都在做的事情。我已经构建了一个模板标签，如果它很长，则只显示文章的开头，理想情况下包含指向整个文章的链接。我开始研究转义和 IsSafe=True，但我担心内容本身可能包含 HTML 标签，这可能会使事情变得混乱。

这是我现在拥有的：

```
@register.filter(name='shorten')
def shorten(content):
    #will show up to the first 500 characters of the post content
    if len(content) > 500:
        return content[:500] + '...' + <a href="/entry/{{post.id}}">(cont.)</a>
    else:
        return content 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:44:24.687

```
from django.utils.safestring import mark_safe

@register.filter(name='shorten')
def shorten(content, post_id):
    #will show up to the first 500 characters of the post content
    if len(content) > 500:
        output = "{0}... <a href='/entry/{1}'>(cont.)</a>".format(content[:500], post_id)
    else:
        output = "{0}".format(content)

    return mark_safe(output) 
```

# prolog - swi-prolog 不会回答查询

> ID：15801987
> 
> 赞同：2
> 
> 时间：2013-04-04T03:24:28.947
> 
> 标签：prolog

我正在尝试编写一个查询，以确保一个元素存在于列表列表中，我尝试了这个实现：

```
membernested(E,[H|T]):-member(E,H).
membernested(E,[H|T]):-membernested(E,[T]). 
```

但是Prolog不会回答这个问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:37:23.993

将您的第二个子句更改为：

```
membernested(E,[H|T]) :- membernested(E,T). 
```

列表的尾部`[H|T]`是`T`，不是`[T]`。无需将其包含在另一个列表中。

# entity-framework - 将 WebApi 添加到使用实体框架的现有 MVC4 应用程序

> ID：15801988
> 
> 赞同：3
> 
> 时间：2013-04-04T03:24:30.567
> 
> 标签：entity-framework, asp.net-mvc-4, asp.net-web-api

这几天我一直在处理这个问题。我有一个现有的 MVC 4 项目，它使用实体框架来创建数据库。该应用程序按预期工作，但我有一个新要求将 Web api 添加到该站点。这是一个报价数据库，要求返回一个仅包含完整数据库条目的有限信息的简单报价。

我的原始模型：

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel.DataAnnotations;
    using System.Linq;
    using System.Web;

    namespace Exercise4.Models
    {
        public class Quote
        {
            public int QuoteID { get; set; }

            [Required (ErrorMessage = "A Category Field Must be selected or a New one must be Created before continuing")]
            public int CategoryID { get; set; }

            [Display (Name="Quotation")]
            [Required (ErrorMessage = "A Quotation is Required")]
            public string QName { get; set; }

            [Display (Name= "Author")]
            [Required (ErrorMessage = "An Authors Name is Required\n Use 'Unknown' if needed")]
            public string QAuthor { get; set; }

             [Display (Name = "Category")]
             public virtual Category category { get; set; }

             [DisplayFormat(DataFormatString = "{0:d}")]
             public DateTime Date { get; set; }

             public int UserId { get; set; }      
             }
         } 
```

简单报价模型

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel.DataAnnotations;
    using System.Linq;
    using System.Web;

    namespace Exercise4.Models
    {
        public class SimpleQuote
        {
            public int Id { get; set; }
            public string Quote { get; set; }
            public string Author { get; set; }
            public  string Category { get; set; }
         }
     } 
```

上下文（*注意 SimpleQuote 条目是在我搭建新的 QuoteApiController 时自动添加的）

```
 using System;
    using System.Collections.Generic;
    using System.Data.Entity;
    using System.Linq;
    using System.Web;

    namespace Exercise4.Models
    {
        public class QuoteContext : DbContext
        {
            public DbSet<Quote> Quotes { get; set; }
            public DbSet<Category> Categories { get; set; }
            public DbSet<UserProfile> UserIds { get; set; }

            public QuoteContext()
            {
                Configuration.ProxyCreationEnabled = false;
            }

            public DbSet<SimpleQuote> SimpleQuotes { get; set; }

        }
    } 
```

这在访问 /api/quoteapi/ 页面时返回错误

“ObjectContent`1”类型无法序列化内容类型“application/xml”的响应正文；字符集=utf-8'。

显然，发生此错误是因为它试图返回数据库中不存在的 SimpleQuote 对象。

创建的 API 控制器。

```
 using System;
    using System.Collections.Generic;
    using System.Data;
    using System.Data.Entity;
    using System.Data.Entity.Infrastructure;
    using System.Linq;
    using System.Net;
    using System.Net.Http;
    using System.Web;
    using System.Web.Http;
    using Exercise4.Models;

    namespace Exercise4.Controllers
    {
        public class QuoteApiController : ApiController
        {
            private QuoteContext db = new QuoteContext();

            // GET api/QuoteApi
            public IEnumerable<SimpleQuote> GetSimpleQuotes()
            {   
                return db.SimpleQuotes.AsEnumerable();
            }

            // GET api/QuoteApi/5
            public SimpleQuote GetSimpleQuote(int id)
            {
                SimpleQuote simplequote = db.SimpleQuotes.Find(id);
                if (simplequote == null)
                {
                    throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
                }

                return simplequote;
            }

            protected override void Dispose(bool disposing)
            {
                db.Dispose();
                base.Dispose(disposing);
            }
        }
    } 
```

我哪里出错了。我无法返回数据库中不存在的模型。如果我更改 api 中的调用以返回有效的 Quote 模型，但我只需要将引用、作者和类别作为字符串返回。我会在控制器中返回 Quote 对象，提取我需要的信息，然后返回 SimpleQuote 对象吗？不知道该怎么做。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:13:37.167

您提到了脚手架，您是否使用 Code First 来创建数据库？此外，您只希望 SimpleQuote 用于返回信息，它看起来像是作为表格添加到您的数据库上下文中。当您真正想要的是从报价表中提取数据并构建或提取您想要的信息并返回时。如果你不必返回一个 SimpleQuote 对象而只返回一个字符串，你可以写一些像这样非常简单的东西。

```
 public HttpResponseMessage GetSimpleQuote(int id)
    {
        var quote = db.Quotes.Find(id);
        if (quote == null)
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }

        var output += "ID: " + quote.Id + " Quote: " + quote.Quote +  " Author: " + quote.Author + " Category: " + quote.Category ; 

        var response = new HttpResponseMessage();

        response.Content = new StringContent(output);
        response.Content.Headers.ContentType = new MediaTypeHeaderValue("text/plain");

        return response;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:39:55.457

我 1+ 并接受了@CHammond 的回复，因为这让我走上了正轨。我确实需要返回一个 SimpleQuote 对象。这是我使用的代码。

```
 public SimpleQuote GetSimpleQuote(int id)
    {
        var quote = db.Quotes.Find(id);
        if (quote == null)
        {
            throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
        }

        SimpleQuote output = new SimpleQuote();
        output.Quote = quote.QName;
        output.Author = quote.QAuthor;
        output.Category = db.Categories.Find(quote.CategoryID).CatName;

        return output;

    } 
```

# javascript - javascript：非常简单的验证不起作用

> ID：15801989
> 
> 赞同：-1
> 
> 时间：2013-04-04T03:24:32.663
> 
> 标签：javascript, html

我无法弄清楚为什么这不起作用，因为我做的一切都是正确的。这是一个简单的创建帐户表单。我为一些字段设置了验证码，例如姓名、电子邮件和密码。还有很多其他领域。但首先我尝试这个。

喜欢在这里： `[jsfiddle](http://jsfiddle.net/xyQHN/)`

和 HTML 的代码：名字

```
 <input type="text" name="fname" id="fname"/>

        <input type="text" name="lname" id="lname />          

        <input type="text" name="remail" id="remail" />

      New Pasword
     <input type="password" name="rpass" id="rpass"  />

       <input name="regis" type="submit" class="color2" id="id" value="Submit" /> 
```

这里的javascript代码：

```
 function validateRegis() {
//regex for fname and lname

var fname = $("#fname").val();

var lname = $("#lname").val();
  var patt_n = /[a-z]{2,20}/i;
//checking fname and lname for regex matching 
var ftest = patt_n.test(fname);
var ltest = patt_n.test(lname);

var remail = $("#remail").val();
var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9\_\.\-]+[a-zA-Z0-9\_\-]+@[a-zA-Z0-9]+[a-zA-Z0-9\.\-]+[a-zA-Z0-9]+\.[a-z]{2,4}$/;

var test = filter.test(remail);
var rpass = $("#rpass").val();
var patt = /[a-z0-9~!@#$%^&*()_\ ]/i;
var test2 = patt.test(rpass);

if (fname === "" || ftest === false) {
    alert("Please provide first name!");
    $("#fname").focus();
    return false;
} else if (lname === "" || ltest === false) {
    alert("Please provide Last name!");
    $("#lname").focus();
    return false;

} else if (remail === "" || test === false) {
    // 
    alert("Please provide email in correct format!");
    $("#remail").focus();
    return false;

} else if (rpass === "" || rpass.length < 8 || test2 === false) {
    alert("Please provide password!");
    $("#rpass").focus();
    return false;

} else if ((fname !== "") & (lname !== "") & (remail !== "") & (test === true) & (rpass >= 8) & test2 === true) {

    return true;
}
} 
```

它需要 jquery 来运行代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:39:19.400

问题是该`validateRegis`功能在全局范围内不可用。

在小提琴 UI 左侧面板中，第二个选择框 select `No Wrap in body`，它工作正常。

演示：[小提琴](http://jsfiddle.net/arunpjohny/XTUwf/)

当您选择`onLoad`那里时，脚本框架下的所有脚本都包装在一个匿名函数下，因此您的`validateRegis`方法成为该匿名函数的本地成员。`Uncaught ReferenceError: validateRegis is not defined`因此，当调用函数 submit 导致抛出错误时，该函数将不可用。

# sql - 对不同表中的每一行执行查询

> ID：15801996
> 
> 赞同：0
> 
> 时间：2013-04-04T03:24:59.947
> 
> 标签：sql, postgresql, date, timestamp, subquery

我有一个日期范围内开始和结束 unix 时间戳的临时表：

```
create temporary table rr (t timestamp);

insert into rr (t)
    select generate_series(
        (select timestamp 'epoch' + create_dte_timestamp * INTERVAL '1 second'
        from data
        order by create_dte_timestamp asc limit 1),
    current_timestamp, interval '1 day');

create temporary table ts (s numeric(10), e numeric(10));

insert into ts (s, e)
    select date_part('epoch', (to_timestamp(to_char(t, 'MM/DD/YYYY 00:00:00'),   
    'MM/DD/YYYY HH24:MI:SS')) at time zone 'UTC')::int,
    date_part('epoch', (to_timestamp(to_char(t, 'MM/DD/YYYY 23:59:59'),
    'MM/DD/YYYY HH24:MI:SS')) at time zone 'UTC')::int from rr order by t asc; 
```

我想对 ts 表的每一行执行查询：

```
select count(id) from data
where create_dte_timestamp >= ts.s and create_dte_timestamp <= ts.e 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:48:31.873

我会尝试使用子查询：

```
select 
  ts.s, ts.e, 
  (select count(id) from data
  where create_dte_timestamp >= ts.s and create_dte_timestamp <= ts.e)
  as c
from ts; 
```

# c# - 异步消费者和 TransactionScope 的使用

> ID：15801997
> 
> 赞同：7
> 
> 时间：2013-04-04T03:25:15.837
> 
> 标签：c#, ibm-mq

我正在使用[IBM.XMS 库](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/index.jsp?topic=/com.ibm.mq.msc.doc/xms_cgetstd_intronet.html)与 WebSphereMQ 通信。

使用同步方式接收消息时，例如：

```
using (var scope = new TransactionScope(TransactionScopeOption.Required, transactionOptions))
{
       message = consumer.Receive(1000);

       if (message != null)
       {
            //Do work here
            scope.Complete();
       }
} 
```

但是如果我想使用异步方法：

```
consumer.MessageListener = delegate(IMessage msg)
{
    //Do work here
    //But where do I put TransactionScope?
}; 
```

我不知道如何将`MessageListener`回调包装在`TransactionScope`.

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:53:57.530

[调查使用DependentClone](http://msdn.microsoft.com/en-us/library/system.transactions.transaction.dependentclone.aspx)创建[DependentTransaction](http://msdn.microsoft.com/en-us/library/system.transactions.dependenttransaction.aspx)可能很值得。

“从属事务是一种事务，其结果取决于从中克隆它的事务的结果。”

“DependentTransaction 是使用 DependentClone 方法创建的 Transaction 对象的克隆。它的唯一目的是允许应用程序停止并保证在事务仍在执行工作时事务不能提交（例如，在工作线程）。”

编辑：刚刚在相关的 SO 问题列表中发现了这一点：[相关问题和答案](https://stackoverflow.com/questions/13543254/get-transactionscope-to-work-with-async-await?rq=1)请参阅他们提供的 msdn 链接：非常值得一读[使用 DependentTransaction 管理并发](http://msdn.microsoft.com/en-us/library/ee818752.aspx)

取自上面的 MSDN 链接（为简洁起见）：

```
public class WorkerThread
{
    public void DoWork(DependentTransaction dependentTransaction)
    {
        Thread thread = new Thread(ThreadMethod);
        thread.Start(dependentTransaction); 
    }

    public void ThreadMethod(object transaction) 
    { 
        DependentTransaction dependentTransaction = transaction as DependentTransaction;
        Debug.Assert(dependentTransaction != null);

        try
        {
            using(TransactionScope ts = new TransactionScope(dependentTransaction))
            {
                /* Perform transactional work here */ 
                ts.Complete();
            }
        }
        finally
        {
            dependentTransaction.Complete(); 
            dependentTransaction.Dispose(); 
        }
    }

//Client code 
using(TransactionScope scope = new TransactionScope())
{
    Transaction currentTransaction = Transaction.Current;
    DependentTransaction dependentTransaction;    
    dependentTransaction = currentTransaction.DependentClone(DependentCloneOption.BlockCommitUntilComplete);
    WorkerThread workerThread = new WorkerThread();
    workerThread.DoWork(dependentTransaction);

    /* Do some transactional work here, then: */
    scope.Complete();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:21:02.477

消息侦听器又名异步使用者不能在 a 中使用，`TransactionScope`因为消息侦听器运行在与创建`TransactionScope`. 您只能在`TransactionScope`.

此[链接](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.msc.doc/xms_managed_mq.html)显示“异步消费者不支持 XA 事务”。

# c# - 使用 MediaPlayer C# 从数据库播放声音

> ID：15801998
> 
> 赞同：3
> 
> 时间：2013-04-04T03:25:17.023
> 
> 标签：c#, audio, media-player

我将声音以`byte[]`类型存储在数据库中。我可以很容易地玩`SoundPlayer`，但不能玩`MediaPlayer`。好处`MediaPlayer`是我可以从声音的中间播放。`SoundPlayer`没有这个功能。有没有办法播放存储在数据库中的声音`MediaPlayer`（不是来自文件系统）。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T03:34:31.370

不幸的是，`MediaPlayer`该类只能[`Open`](http://msdn.microsoft.com/en-us/library/system.windows.media.mediaplayer.open.aspx)从文件系统进行媒体 - 这只是一个限制。唯一的选择是接收`Uri`. 但是，我建议使用[NAudio](http://naudio.codeplex.com)。使用 NAudio，您实际上可以在内存中播放、暂停、停止、倒带等等。