# StackOverflow 问答 15814000-15814999

# sql - sql中where子句条件中的case语句

> ID：15814013
> 
> 赞同：1
> 
> 时间：2013-04-04T14:25:45.543
> 
> 标签：sql, sql-server, tsql

我有一个这样的存储过程：

```
ALTER PROCEDURE [dbo].[hr_SearchVacanciesAdmin]
    @SearchText NVARCHAR(50) = NULL,
    @CompanyName NVARCHAR(100) = NULL,
    @DutyStationID INT = NULL,
    @VacancyCategoryIDs VARCHAR(1000) = NULL,
    @Status INT,
    @Language INT = 1

BEGIN

SELECT * from table
where 
  deleted = 0
  and status = @status
  and catname  = &searchtext

..
..
..
END 
```

我想在 where 条件中添加 case 语句，以便如果 @status = 4 则不检查 delete =。我尝试关注但不工作

```
WHERE 
  1 = CASE 
        WHEN @Status = 4 
        THEN @status

        WHEN dbo.hr_Vacancies.Deleted = 0 
             --Search Criteria
             AND dbo.hr_Vacancies.Status = @Status 
        THEN @Status
      END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T14:31:06.767

您不需要 CASE 语句来实现此功能。以下会很好：

```
SELECT * 
from   table
where  (deleted = 0 OR @status=4)
and    status = @status
and    catname = @searchtext 
```

另请注意，您的代码`&searchtext`在`where`子句中引用，但这应该`@searchtext`按照这个答案（即前缀`@`not `&`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:32:34.680

@RB 是正确的，您不需要案例，但您可以使用带有此技巧的案例，这在其他情况下也很有用：

```
 Where deleted = case @status when 4 then deleted else 0 end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T14:40:40.220

您可以使用此构造作为`SELECT`查询的开头：

```
Select * from table
WHERE
((1 = CASE WHEN @Status = 4 THEN 1 ELSE 0 END)
OR
dbo.hr_Vacancies.Deleted = 0)
AND
dbo.hr_Vacancies.Status = @Status 
```

# sql-server-2008 - Crystal Reports : Bad Date format string error

> ID：15814015
> 
> 赞同：0
> 
> 时间：2013-04-04T14:25:49.523
> 
> 标签：sql-server-2008, crystal-reports

I am a newbie to crystal reports, I have a crystal report for which I have a data source from which I am using some fields on to the report.

Crsytal Report Name : InventoryReport

Data Source : I am giving Stored Procedure -- GetInventoryData

Fields : ItemID, ShippedDate, ItemName

I have to get all items which are shipped in between FromData and ToDate of ShippedDate, so I am using formula {GetInventoryData;1.ShippedDate} in {?FromDate} to {?ToDate}

dataType of Shipped Date is String and I have to convert to Date as it needs to be compared but I am having issues in that...

ShippedDate value will be : 2011-04-19 16:02:14.0000000

I have to convert at crystal reports side only..

Please help me how can I cast it to date

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:16:23.247

实际上最好不要使用该公式....在使用上述日期范围的选择公式中

```
date(split({GetInventoryData;1.ShippedDate}," ")[1]) in {?daterange} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:10:34.140

一种方法...创建一个名为 cvtDate 的公式

```
date(
tonumber(split({GetInventoryData;1.ShippedDate},"-")[1])
,
tonumber(split({GetInventoryData;1.ShippedDate},"-")[2])
,
tonumber(split({GetInventoryData;1.ShippedDate},"-")[3])
) 
```

然后而不是创建两个日期参数.. 只创建一个名为 daterange 的允许值选项下的范围值然后选择公式将是

```
{@cvtDate} in {?daterange} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:37:01.973

如果您使用的是字符串，您可以做一个简单的小于或大于之类的操作：

```
...where ShippedDate >= '2011-04-19 00:00:00' and ShippedDate <= '2011-04-19 23:59:59' 
```

这就像：

```
...where ShippedDate >= '<from-date> 00:00:00' and ShippedDate <= '<to-date> 23:59:59' 
```

这会起作用，您不必选择约会。

您也可以用作（如果它适合您）：

```
...where ShippedDate >= '<from-date>' and ShippedDate <= '<to-date>' 
```

# ruby - RSpec fails before timed loop completes

> ID：15814016
> 
> 赞同：1
> 
> 时间：2013-04-04T14:25:52.547
> 
> 标签：ruby, rspec, watir-webdriver

In our Ruby application web testing application using watir-webdriver, we have added code to allow up to 30 seconds for an element that is present on a page but not yet visible to become visible (due to AJAX, javascript, performance, etc.). The routine that is being tested is:

```
start_time = Time.now
while !visible? do
  @logger.info "!visible is true, looping"
  sleep 1
  if Time.now - start_time > 30
    @logger.debug("error while checking for visible")
    raise ElementHiddenError, element_hidden_message
  end
end 
```

The RSpec that is used to test this is:

```
...
it "raises ElementHiddenError if element is hidden" do
  element.should_receive(:visible?).and_return(false)
  expect { proxy.set('something') }.to raise_error(ElementHiddenError)
end
.... 
```

When I run this RSpec, I receive this error:

```
1)
'ElementProxy#set raises ElementHiddenError if element is hidden' FAILED
expected ElementHiddenError but nothing was raised
./spec/element_proxy_spec.rb:144:in `(root)'
org/jruby/RubyKernel.java:2043:in `instance_eval'
./spec/spec_helper.rb:68:in `timeout'
org/jruby/RubyArray.java:1614:in `each'
org/jruby/RubyArray.java:1614:in `each'
org/jruby/RubyKernel.java:1052:in `load' 
```

I can get this RSpec to pass by commenting out the loop:

```
#start_time = Time.now
while !visible? do
  @logger.info "!visible is true, looping"
  sleep 1
  #if Time.now - start_time > 30
    @logger.debug("error while checking for visible")
    raise ElementHiddenError, element_hidden_message
  #end
end 
```

I am not the original author of this code, but it appears that something is happening with Time or sleep in the RSpec which is affecting this test.

I would appreciate any ideas about how to debug this issue, as this routine is used in almost all of our command sets. The delay works in our application but does not pass the RSpec.

Thanks.

# php - 查询字符串值在通过Javascript中的xmlHttpRequest发送到另一个php页面时被截断？

> ID：15814017
> 
> 赞同：0
> 
> 时间：2013-04-04T14:25:53.203
> 
> 标签：php, javascript, xmlhttprequest

我在我的表单中的 demoUrlName（文本字段 id）中传递了这个 url 值 例如， [http: //common360.info/browse.php?u=uushJYHAjQLTHh2twPpHjQMbEl4%3D&b=5&f=norefer](http://common360.info/browse.php?u=uushJYHAjQLTHh2twPpHjQMbEl4%3D&b=5&f=norefer)

我使用 xmlHttpRequest 将此值重定向到另一个页面。问题是，在通过 xmlHttpRequest 和重定向页面发送表单值时，url 值被截断为 [http://common360.info/browse.php?u=uushJYHAjQLTHh2twPpHjQMbEl4=](http://common360.info/browse.php?u=uushJYHAjQLTHh2twPpHjQMbEl4=)

如何按原样发送值我在表单中输入。

我的代码是

```
 var str = trim(document.getElementById('demoUrlName').value);
    var str = "action=demo&url="+str+"&urlqstr="+urlqstr+"&pgesrc="+pgesrc+"&r="+ran_number;
    var url = "demo/demoTool.php";
    xmlhttp.open("POST", url, true);  
    xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");
    xmlhttp.send(str); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:27:55.950

使用[该`encodeURIComponent`函数](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)编码`&`为数据，而不是将它们用作“键/值对分隔符”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:28:02.940

因为您需要对值进行编码。

[编码URI组件](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T05:19:55.107

我使用了 escape() 函数，它以形式发送值

# php - php问题访问数组

> ID：15814018
> 
> 赞同：0
> 
> 时间：2013-04-04T14:25:54.167
> 
> 标签：php

我有以下代码：

```
$results = $Q->get_posts($args);

foreach ($results as $r) {
    print $r['trackArtist'];
} 
```

这是输出：

```
["SOUL MINORITY"]
["INLAND KNIGHTS"]
["DUKY","LOQUACE"] 
```

我的问题是，如果 trackArtist 是一个数组，为什么我不能像这样运行 implode 函数：

```
$artistString = implode(" , ", $r['trackArtist']); 
```

谢谢

更新 ：

是的，它确实是一个字符串，但从另一边它作为一个数组离开，所以我假设它也作为一个数组到达这里。后面肯定有一些处理。

知道如何提取信息，例如： ["DUKY","LOQUACE"]

要得到 ：

杜基，枇杷

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:28:52.043

看起来它实际上不是一个数组；它是字符串`'["DUKY","LOQUACE"]'`一个数组将被打印为`Array`. 您可以通过以下方式确认：

```
var_dump($r['trackArtist']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:28:54.360

对我来说 content of`$r['trackArtist']`不是一个数组。只是普通的字符串或对象。而不是`print`使用`print_r()`或`var_dump()`弄清楚这一点，然后调整您的代码以正确处理它真正的对象类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:50:07.450

它可能是一个 JSON 字符串。您可以这样做以获得所需的结果：

```
$a = json_decode($r['trackArtist']); // turns your string into an array
$artistString = implode(', ', $a); // now you can use implode 
```

# iphone - 在 iOS 上旋转相机视图

> ID：15814024
> 
> 赞同：0
> 
> 时间：2013-04-04T14:26:09.310
> 
> 标签：iphone, ios, uiimagepickercontroller, augmented-reality, vuforia

我在堆栈上阅读了几个问题，但我陷入了死胡同。我想将设备（iPhone/iPad）摄像头作为背景，用于我的一个`ViewControllers`. 我正在使用`Storyboard`and `UINavigationsViewController`，所以我正在修改一个 child `ViewController`。据我所知，这意味着我不能强迫这个“孩子”从特定的方向开始（第一个问题）。其次，我决定使用`UIImagePickerController`，但我做对了 - 你不能旋转这个组件，对吧？

所以基本上我的问题是从这里去哪里，无论设备方向如何，都能在背景上实现相机视图？它肯定可以完成，因为 Vuforia 即拥有它（并且他们正在使用 UIImagePickerController 和 EAGLView）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T10:34:58.790

您有两种选择来完成该任务：

1）您可以使用`Eaglview`在后台渲染相机设备的帧。2）你可以用`caeagllayer`做同样的事情。

要在该图层上绘图，您必须使用`drawableproperties`和`CaTransformationMatrix`

# events - 我如何有条件地传播 页面事件触发

> ID：15814026
> 
> 赞同：0
> 
> 时间：2013-04-04T14:26:16.817
> 
> 标签：events, jsf-2, primefaces

在我的应用程序中，我有一个分页和 LazyDatamodel `<p:dataTable>`，在表单的底部我有一个可以保存编辑行的名称。问题是： 1\. 当从一个页面用户想要离开页面而不保存编辑的行时，我想传播触发的事件并留在当前页面上不离开页面，如果当前页面没有变化在这种情况下，用户可以离开页面。`CommandButton``update``page`

.xhtml 的代码如下：

```
<h:form id="userListForm">
    <p:panel id="userListPanel" header="#{adbBundle['userList.panel.header']}" toggleable="true">
        <p:dataTable var="user" id="userTable" value="#{userDataModel}" lazy="true" paginator="true" rows="25" paginatorPosition="bottom"
            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
            rowsPerPageTemplate="25,50,100" widgetVar="userDataTable" styleClass="userTable" selectionMode="single" >

            <f:facet name="header">
                <p:outputPanel>
                    <h:panelGroup layout="block" id="resetFiter" styleClass="dataTableResetFilter">
                        <p:outputLabel value="#{adbBundle['filter.resetText']}" />
                        <p:spacer width="10" />
                        <p:commandButton icon="ui-icon-circle-close" actionListener="#{userListController.resetUserTable}" />
                    </h:panelGroup>
                </p:outputPanel>
            </f:facet>

            <p:column id="nameColumn" headerText="#{adbBundle['name']}" sortBy="#{user.fullName}" filterBy="#{user.fullName}" styleClass="userName">
                <h:outputText value="#{user.fullName}" />
            </p:column>

            <p:column id="statusColumn" headerText="#{adbBundle['status']}" sortBy="#{user.active}" filterBy="#{user.statusText}" filterMatchMode="exact" styleClass="manageStatus"
                filterOptions="#{userListController.statusOptions}" rendered="#{manageUser != null and manageUser != ''}">
                <h:panelGroup layout="block">
                    <p:selectOneRadio id="userRadio" value="#{user.statusText}" styleClass="roleRadio">
                        <f:selectItem itemLabel="#{adbBundle['active']}" itemValue="Active" />
                        <f:selectItem itemLabel="#{adbBundle['inactive']}" itemValue="Inactive" />

                        <p:ajax listener="#{userListController.changeStatus}" />
                        <f:attribute name="user" value="#{user}" />
                    </p:selectOneRadio>
                </h:panelGroup>
            </p:column>
        </p:dataTable>
    </p:panel>
</h:form> 
```

如何实施？任何指针都会对我很有帮助。谢谢..

# elisp - 想要替换当前窗口中的编译缓冲区的 compile-goto-error 变体

> ID：15814031
> 
> 赞同：3
> 
> 时间：2013-04-04T14:26:23.937
> 
> 标签：elisp

我有一个执行多目录 grep 的个人 elisp 函数。它使用`compilation-start`，它创建一个带有结果的编译模式缓冲区，我可以在其中按下`RET`（绑定到`compile-goto-error`）跳转到相应的位置。

但是，`compile-goto-error`总是在另一个窗口中访问该位置，从而使编译缓冲区保持打开状态。有一半的时间我只是在搜索一个特定的位置，所以我想做的是绑定一些其他键（比如`C-RET`）来访问缓冲区中的相应位置，但留在当前窗口中，将编译缓冲区替换为位置的缓冲区。

我已经跟踪了从`compile-goto-error`to `next-error-internal`to `next-error-function`to `compilation-next-error-function`to的相关执行`compilation-find-file`，但找不到一个很好的地方来挂钩我的不同行为。是否有一种简单的方法（或者，如果失败，一种复杂的方法）来创建一个`compile-goto-error`变体，该变体在保存编译缓冲区的窗口中就地切换到新缓冲区？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-12T16:15:57.257

我建议只是建议`compile-goto-error`函数做正确的事情，而不是创建自定义函数和键绑定。以下对我来说是正确的（遵循 Stefan 的建议）：

```
(defadvice compile-goto-error (around my-compile-goto-error activate)
  (let ((display-buffer-overriding-action '(display-buffer-reuse-window (inhibit-same-window . nil))))
    ad-do-it)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:48:00.133

我认为你应该能够通过 let-binding 得到你想要的`display-buffer-overriding-action`，比如：

```
(defun my-next-error ()
  (interactive)
  (let ((display-buffer-overriding-action '(display-buffer-same-window)))
    (next-error))) 
```

# bash - 一定时间后杀死for循环生成的进程

> ID：15814032
> 
> 赞同：0
> 
> 时间：2013-04-04T14:26:26.353
> 
> 标签：bash, for-loop, ssh

我有一些代码往往会随机挂在它的“for循环”中。我正在寻找一种解决方案，如果 ssh 会话的 PID 存在 5 秒，它将自动终止它。我现在手动杀死挂起的进程，但我想把它放在 cron 中，所以自动 PID 杀死会很棒。

```
for host in `cat $WORKDIR/linux_hosts.txt $WORKDIR/aix_hosts.txt`
do
    ssh -o LogLevel=QUIET -o ConnectTimeout=2 -t $host "cat /etc/passwd" >> $FILEDIR/$host
done 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:41:58.567

在后台运行所有`ssh`进程，然后等待 5 秒。`sleep`返回后，使用`jobs -p`获取仍在运行的任何后台作业的进程 ID，并终止它们。

```
cat "$WORKDIR"/{linux_hosts.txt,aix_hosts.txt} | while read host; do
    ssh -o LogLevel=QUIET -o ConnectTimeout=2 -t "$host" "cat /etc/passwd" >> "$FILEDIR/$host" &
done
sleep 5
kill $(jobs -p) 2>/dev/null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:38:50.210

使用[超时](http://linux.die.net/man/1/timeout)：

```
for host in `cat $WORKDIR/linux_hosts.txt $WORKDIR/aix_hosts.txt`
do
    timeout 5s ssh -o LogLevel=QUIET -o ConnectTimeout=2 -t $host \
                   "cat /etc/passwd" >> $FILEDIR/$host
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:12:08.773

这将找到并杀死所有`ssh`超过 5 分钟的进程。

```
cd /proc
kill $(find $(pidof ssh) -maxdepth 0 -mmin +5) 
```

# backbone.js - 通过集合获取方法将初始化选项传递给主干模型

> ID：15814033
> 
> 赞同：5
> 
> 时间：2013-04-04T14:26:32.170
> 
> 标签：backbone.js, collections, initialization

我有一个主干模型，我想用一些选项对其进行初始化：

```
 Payment.Payment = Backbone.Model.extend

    initialize: (attributes, options) ->
        @user = options.user 
```

这些付款是通过付款集合从服务器获取的

```
# Collections: Payments
Payment.Payments = Backbone.Collection.extend
    model: Payment.Payment
    url: 'api/payments'

    initialize: (models, options) ->
        @user = if options?.user then options.user else app.user 
```

但是，当我尝试从服务器获取一组付款时，我找不到将用户选项传递给每个付款模型的方法：

```
payments = new Payment.Payments
payments.fetch() 
```

我尝试将用户选项作为参数传递给 fetch 调用，但这不起作用。那么我怎样才能用用户实例化从服务器获取的所有支付模型呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T15:08:56.223

你应该尝试过最简单的：

```
payments.fetch user: payments.user
// have no idea what I'm doing 
```

在 JS ^^:

```
payments.fetch({user: payments.user}); 
```

您传递 fetch 的选项将提供给模型。

# openxava - 如何让两个或多个浏览器选项卡加载同一个模块而不相互干扰？

> ID：15814034
> 
> 赞同：1
> 
> 时间：2013-04-04T14:26:34.120
> 
> 标签：openxava

当我打开两个或多个指向同一模块的浏览器选项卡时，选项卡的内容会以多种方式相互干扰（过滤器、排序、列表/详细信息模式）。看起来不可能使用相同的模块在不同的选项卡中制作不同的东西。如何隔离每个浏览器选项卡的会话？有没有办法做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:21:12.697

正如您在此链接中看到的那样： [如何在浏览器选项卡中区分会话？](https://stackoverflow.com/questions/368653/how-to-differ-sessions-in-browser-tabs) 这不是 OpenXava 特定的问题。

但是，您可以在 application.xml 中定义两个具有不同名称的相同模块，并将每个模块加载到其自己的浏览器选项卡中。我们可以改进 OpenXava 以允许每个选项卡有不同的会话状态。您是否愿意做出这种改进并将其回馈给 OpenXava？

# jboss7.x - CacheEntryCreated 事件——再次

> ID：15814042
> 
> 赞同：0
> 
> 时间：2013-04-04T14:26:41.507
> 
> 标签：jboss7.x, infinispan

[从JBoss Infinispan 讨论](https://community.jboss.org/en/infinispan?view=discussions)中发布的交叉

我正在尝试实现一些代码，只要在我的一个 Infinispan 缓存中创建条目时就会采取行动。我很快意识到传递给我的 @CacheEntryCreated 方法的 CacheEntryCreatedEvent 对象不包含新创建的条目，因此我开始寻找解决方案。

我发现了有关解决方案的各种讨论，即捕获在@CacheEntryCreated 事件之后传递的@CacheEntryModified 事件并在isPre()=false 时获取对象。但是，我认为我错过了一些东西，因为在所有讨论中都没有解决您有一个修改事件的情况，该修改事件代表对现有条目的合法修改而不是创建。

这是否意味着我的@Listener 对象必须在事件传递之间维护状态信息？我的@CacheEntryModified 必须整合事件对象，确定它是一个创建事件（即 getValue() == null && isPre() == true），然后在获取新创建的对象之前等待下一个@CacheEntryModified 事件？

这提出了一个明显的问题，即如果另一个@Listener 对象在第二个@CacheEntryModified（即isPre() == false）事件传递之前否决了修改，该怎么办？

其他人如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:56:07.243

我想现在最好的方法是`ThreadLocal`在你的听众中使用。

未来的 5.3.0 版本会对此改进很多，`CacheEntryCreatedEvent`会有`getValue()`方法`CacheEntryModifiedEvent`也有`isCreated()`方法：[https ://github.com/infinispan/infinispan/commit/1aa2554e1c5ea46318402975de946f2e9ea44442#diff-22](https://github.com/infinispan/infinispan/commit/1aa2554e1c5ea46318402975de946f2e9ea44442#diff-22)

# android - 按下计算按钮时 bmi 应用程序崩溃

> ID：15814044
> 
> 赞同：0
> 
> 时间：2013-04-04T14:26:46.437
> 
> 标签：android, button, crash

我是一个 android 初学者（我的第一篇文章）并且在运行这个 bmi 计算器教程时崩溃了：[http ://android-meda.blogspot.co.uk/2012/01/writing-your-first-android-app- body.html?m=1](http://android-meda.blogspot.co.uk/2012/01/writing-your-first-android-app-body.html?m=1)

在我的手机上启动时，屏幕变黑并显示“BMI 已不幸停止”的消息。我不确定在哪里诊断问题，因此非常感谢任何帮助。谢谢

```
04-04 14:14:44.750: E/SensorManager(24999): thread start
04-04 14:14:44.755: D/SensorManager(24999): registerListener :: handle = 0  name=  LSM330DLC 3-axis Accelerometer delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42b75490
04-04 14:14:44.760: D/SensorManager(24999): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42b75490
04-04 14:14:44.760: D/Sensors(24999): Remain listener = Sending .. normal delay 200ms
04-04 14:14:44.760: I/Sensors(24999): sendDelay --- 200000000
04-04 14:14:44.765: D/SensorManager(24999): JNI - sendDelay
04-04 14:14:44.765: I/SensorManager(24999): Set normal delay = true
04-04 14:14:44.815: D/SensorManager(24999): registerListener :: handle = 0  name= LSM330DLC 3-axis Accelerometer delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42b75490
04-04 14:14:44.870: D/libEGL(24999): loaded /system/lib/egl/libEGL_mali.so
04-04 14:14:44.875: D/libEGL(24999): loaded /system/lib/egl/libGLESv1_CM_mali.so
04-04 14:14:44.880: D/libEGL(24999): loaded /system/lib/egl/libGLESv2_mali.so
04-04 14:14:44.885: D/(24999): Device driver API match
04-04 14:14:44.885: D/(24999): Device driver API version: 10
04-04 14:14:44.885: D/(24999): User space API version: 10 
04-04 14:14:44.885: D/(24999): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Tue Oct 16 15:37:13 KST 2012 
04-04 14:14:44.910: D/OpenGLRenderer(24999): Enabling debug mode 0
04-04 14:14:44.985: W/IInputConnectionWrapper(24999): showStatusIcon on inactive InputConnection
04-04 14:14:52.235: D/SensorManager(24999): unregisterListener::  Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42b75490
04-04 14:14:52.235: D/Sensors(24999): Remain listener = Sending .. normal delay 200ms
04-04 14:14:52.235: I/Sensors(24999): sendDelay --- 200000000
04-04 14:14:52.235: D/SensorManager(24999): JNI - sendDelay
04-04 14:14:52.235: I/SensorManager(24999): Set normal delay = true
04-04 14:14:52.240: D/SensorManager(24999): registerListener :: handle = 0  name= LSM330DLC 3-axis Accelerometer delay= 200000 Listener= android.view.OrientationEventListener$SensorEventListenerImpl@42b78da8
04-04 14:14:52.260: W/IInputConnectionWrapper(24999): getSelectedText on inactive InputConnection
04-04 14:14:52.265: W/IInputConnectionWrapper(24999): setComposingText on inactive InputConnection
04-04 14:14:52.265: W/IInputConnectionWrapper(24999): getExtractedText on inactive InputConnection

04-04 14:14:53.420: D/AndroidRuntime(24999): Shutting down VM
04-04 14:14:53.420: W/dalvikvm(24999): threadid=1: thread exiting with uncaught exception (group=0x41f052a0)
04-04 14:14:53.430: E/AndroidRuntime(24999): FATAL EXCEPTION: main
04-04 14:14:53.430: E/AndroidRuntime(24999): java.lang.IllegalStateException: Could not execute method of the activity
04-04 14:14:53.430: E/AndroidRuntime(24999):    at android.view.View$1.onClick(View.java:3691)
04-04 14:14:53.430: E/AndroidRuntime(24999):    at android.view.View.performClick(View.java:4211)
04-04 14:14:53.430: E/AndroidRuntime(24999):    at android.view.View$PerformClick.run(View.java:17267)
04-04 14:14:53.430: E/AndroidRuntime(24999):    at android.os.Handler.handleCallback(Handler.java:615)
04-04 14:14:53.430: E/AndroidRuntime(24999):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-04 14:14:53.430: E/AndroidRuntime(24999):    at android.os.Looper.loop(Looper.java:137)
04-04 14:14:53.430: E/AndroidRuntime(24999):    at android.app.ActivityThread.main(ActivityThread.java:4898)
04-04 14:14:53.430: E/AndroidRuntime(24999):    at java.lang.reflect.Method.invokeNative(Native Method)
04-04 14:14:53.430: E/AndroidRuntime(24999):    at java.lang.reflect.Method.invoke(Method.java:511)
04-04 14:14:53.430: E/AndroidRuntime(24999):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
04-04 14:14:53.430: E/AndroidRuntime(24999):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
04-04 14:14:53.430: E/AndroidRuntime(24999):    at dalvik.system.NativeStart.main(Native Method)
04-04 14:14:53.430: E/AndroidRuntime(24999): Caused by: java.lang.reflect.InvocationTargetException
04-04 14:14:53.430: E/AndroidRuntime(24999):    at java.lang.reflect.Method.invokeNative(Native Method)
04-04 14:14:53.430: E/AndroidRuntime(24999):    at java.lang.reflect.Method.invoke(Method.java:511)
04-04 14:14:53.430: E/AndroidRuntime(24999):    at android.view.View$1.onClick(View.java:3686)
04-04 14:14:53.430: E/AndroidRuntime(24999):    ... 11 more
04-04 14:14:53.430: E/AndroidRuntime(24999): Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.EditText
04-04 14:14:53.430: E/AndroidRuntime(24999):    at com.example.bmi.MainActivity.calculateClickHandler(MainActivity.java:22)
04-04 14:14:53.430: E/AndroidRuntime(24999):    ... 14 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:41:27.320

您正试图将 TextView 转换为 EditText：

```
Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.EditText 
```

检查您的代码中是否有 (TextView) variable = (EditText) findViewById(..)...

问题出在 MainActivity.java 文件的第 22 行。

如果您分析粘贴的堆栈跟踪：

```
Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.EditText
at com.example.bmi.MainActivity.calculateClickHandler(MainActivity.java:22) 
```

它指出了问题所在（MainActivity.java:22）。这意味着 MainActivity.java 文件中的第 22 行。

更好的是，如果您找不到问题，请在此处粘贴代码片段，以便我可以更具体地指出问题。您应该从 onClick 侦听器中发布代码

EditText 用于编辑文本，TextView 是用于显示文本的组件。因此它们不兼容。第一个是可编辑的表单元素，而后者仅用于显示目的。你不能把一个扔进另一个。

# oracle - Oracle：通过分组获得非唯一重复项......有计数

> ID：15814048
> 
> 赞同：0
> 
> 时间：2013-04-04T14:26:56.193
> 
> 标签：oracle, group-by, duplicates, subquery

我正在尝试构建一个仅显示非唯一重复项的查询。我已经构建了一个查询，显示了所有考虑的记录：

```
SELECT       tbl_tm.title, lp_index.starttime, musicsound.archnr
FROM         tbl_tm
INNER JOIN   musicsound on tbl_tm.fk_tbl_tm_musicsound = musicsound.pk_musicsound
INNER JOIN   lp_index ON musicsound.pk_musicsound = lp_index.fk_index_musicsound
INNER JOIN   plan ON lp_index.fk_index_plan = plan.pk_plan
WHERE        tbl_tm.FK_tbl_tm_title_type_music = '22' AND plan.airdate
             BETWEEN to_date ('15-01-13') AND to_date('17-01-13')
GROUP BY     tbl_tm.title, lp_index.starttime, musicsound.archnr 
HAVING COUNT (tbl_tm.title) > 0; 
```

对应的结果集如下所示：

```
title                   starttime   archnrr
============================================
Pumped up kicks         05:05:37    0616866
People Help The People  05:09:13    0620176
I can't dance           05:12:43    0600109
Locked Out Of Heaven    05:36:08    0620101
China in your hand      05:41:33    0600053
Locked Out Of Heaven    08:52:50    0620101 
```

它为我提供了在特定时间跨度之间播放的音乐标题以及它们的开始时间和存档 ID。

我想要实现的是这样的：

```
title                  starttime    archnr
============================================
Locked Out Of Heaven   05:36:08     0620101
Locked Out Of Heaven   08:52:50     0620101 
```

只剩下两列：两者共享相同的标题和存档编号，但时间部分不同。增加“HAVING COUNT”值会给我一个零行结果集，因为没有任何条目完全相同。

到目前为止，我发现这个问题的解决方案很可能有一个嵌套子查询，但我似乎无法完成它。对此的任何帮助将不胜感激。

注意：我在 Oracle 11g 服务器上。我的用户具有只读权限。我在我的工作站上使用 SQL Developer。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:31:51.243

You can try something like this:

```
SELECT title, starttime, archnr
FROM (
SELECT title, starttime, archnr, count(*) over (partition by title) cnt
FROM (your_query))
WHERE cnt > 1 
```

[Here is a sqlfiddle demo](http://www.sqlfiddle.com/#!4/f7405/5)

# javascript - 为什么在 for 循环期间旧的第二个文本行没有替换为新文本？

> ID：15814055
> 
> 赞同：0
> 
> 时间：2013-04-04T14:27:08.923
> 
> 标签：javascript, jquery, html, html5-video

在播放视频时，我有 2 行文本，第一行是新文本，第二行是从第一行向上移动的旧文本。但是，在 for 循环期间，第二行甚至根本不替换，因为两行显示相同的文本。任何人都可以告诉我它有什么问题吗？“text”是第一行，“second”是第二行。请帮忙。这里我的 javascript 代码和网站是 [a link] [http://www.cs.rit.edu/~rskics/study/caption2/test.html](http://www.cs.rit.edu/~rskics/study/caption2/test.html)（在 firefox 上工作），

```
var subtitleArray = new Array(); //stored all values from XML caption file

var tempText = "";  

    $(document).ready(function(){
                            //alert("get caption 1");
                            getCaption();

                            var subtitle2 = document.getElementById('subtitle2');

                            var video = document.getElementById('video');

                            $("#video").bind('timeupdate',function(){

                                var text = "", cap = "";

                                    for( var i = 0; i < subtitleArray.length;i++)
                                    {

                                        var cueStart = parseFloat(subtitleArray[i][0]);
                                        var cueEnd = cueStart + parseFloat(subtitleArray[i][1]);

                                        cap = subtitleArray[i][2];

                                        if (video.currentTime >= cueStart && video.currentTime <= cueEnd) {
                                           text = cap;   
                                        }

                                        if ( text != tempText && text != "" ) {
                                        console.log( text );
                                        console.log(tempText);
                                            $("#second").html(text);
                                        }

                                        subtitle2.innerHTML = text;
                                        tempText = text;
                                        console.log( tempText );

                                    }
                            });
                        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:04:34.893

我找到了解决方案，这里有一个代码

```
var tempText = "", prevText="";

$("#video").bind('timeupdate',function(){

                        var text = "", cap = "";

                            for( var i = 0; i < subtitleArray.length;i++)
                            {

                                var cueStart = parseFloat(subtitleArray[i][0]);
                                var cueEnd = cueStart + parseFloat(subtitleArray[i][1]);

                                cap = subtitleArray[i][2];

                                if (video.currentTime >= cueStart && video.currentTime <= cueEnd) {
                                   text = cap;   
                                }

                                if (tempText != text && text != "") {

                                    prevText = tempText;
                                    $("#second").html(prevText);
                                }

                                subtitle.innerHTML = text;

                                if ( text != "" ) {
                                    tempText = text;
                                }

                            }
                    }); 
```

# git - RubyMine（以及 PHPStorm、IntellijIDEA、PyCharm 等）中“提交更改”对话框中“提交”的键盘快捷键是什么？

> ID：15814057
> 
> 赞同：17
> 
> 时间：2013-04-04T14:27:10.497
> 
> 标签：git, intellij-idea, phpstorm, rubymine, pycharm

选择 git --> commit changes 后，我有一个对话如下，右下角有“提交”。它似乎有'i'下划线，但是我无法弄清楚它的快捷方式是什么，因为没有常用的组合，例如Command-I，Command-Alt-I。有任何想法吗？

![在此处输入图像描述](https://i.stack.imgur.com/iOSkH.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-04T17:42:52.930

助记符通常通过`Alt`键起作用，所以它是`Alt`+ `I`。

请注意，`Enter`确认对话框选择，如果焦点在文本区域，它将是`Ctrl`+ `Enter`。

`Alt`+`I`助记符在您输入提交评论时也不起作用，因此您应该使用`Ctrl`+ `Enter`。

您也可以尝试禁用[此选项](http://img713.imageshack.us/img713/3223/20130404212553.png)以获取单独的按钮。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-06-08T12:47:59.483

单击帮助并查看键盘快捷键

# php - Amazon S3 如果对象存在方法问题

> ID：15814058
> 
> 赞同：0
> 
> 时间：2013-04-04T14:27:17.377
> 
> 标签：php, amazon-s3

我正在使用 amazon [S3 PHP SDK](http://docs.aws.amazon.com/AWSSDKforPHP/latest/index.html#m=AmazonS3/if_object_exists)，我需要检查[对象是否存在](http://docs.aws.amazon.com/AWSSDKforPHP/latest/index.html#m=AmazonS3/if_object_exists)，

```
$response = $s3->if_object_exists($bucket, '/albums/Carcassonne-France/');
var_dump($response); //RESPONSE FALSE 
```

但是当看到在Firefox中使用S3浏览器时，指定的对象存在

```
$response = $s3->if_object_exists($bucket, '/albums/Carcassonne-France/1.jpg');
var_dump($response); //RESPONSE TRUE 
```

但这显示 True，因为我在上面的位置有**1.jpg**，但是如果指定的路径存在与否，我想检查下面的内容。

```
$response = $s3->if_object_exists($bucket, '/albums/Carcassonne-France/'); 
```

如何检查指定路径是否存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-13T06:58:30.313

S3 是一个平面文件系统。没有文件夹。只是文件名中带有斜杠。一些 S3 浏览工具选择在其软件中显示“文件夹”的概念，但它们只是假装。

"/albums/Carcassonne-France/" 返回 false，因为没有具有该名称的单数*对象。*

# c# - .net 应用程序的非托管堆大小

> ID：15814060
> 
> 赞同：3
> 
> 时间：2013-04-04T14:27:26.040
> 
> 标签：c#, memory, heap-memory, unmanaged, red-gate-ants

我目前正在尝试对我正在处理的 C# 项目进行内存分析，以确定是否存在任何泄漏，因为此应用程序需要尽可能接近 100% 的正常运行时间。我开始使用 Ants Memory Profiler 7.4 版，并注意到我的非托管内存随着时间的推移不断增长，即使我的托管内存没有。

`Console.ReadLine()`经过更多的实验，我尝试对一个除了阻塞指令什么都不做的程序进行类似的分析。我进行了分析并注意到发生了同样的事情。我的非托管堆正在缓慢增长。事实上，它实际上似乎只是随着垃圾收集器被调用（通过快照功能）而增长。现在为什么反复调用垃圾收集会导致非托管内存无限增加？跟蚂蚁有关系吗？

我想使用其他一些工具，最好是诸如 windbg 或 SOS 之类的工具来确定它所看到的我的非托管内存使用情况。现在对我来说知道其中的内容并不重要——尽管从长远来看这可能有助于调试。我只是想确定当前正在运行的应用程序的非托管内存使用情况。我想看看这是否真的是蚂蚁的问题，还是我对环境如何运作的误解。拥有某种 .net、Visual Studio 或 Windows 工具来为我提供有关我的流程的准确信息将有助于我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:46:18.203

[SmartBear 的AQTime](http://smartbear.com/products/qa-tools/application-performance-profiling)可以很好地为您提供托管和非托管代码的内存分析。我的很多工作都在托管和非托管边界中，我已经多次使用它来查找内存泄漏。

如果您正在使用大块非托管内存，请务必调用`GC.AddMemoryPressure`并`GC.RemoveMemoryPressure`帮助 GC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:37:25.613

使用垃圾收集器分析器。如果存储桶 2 和 3 上的对象多于 1，那么您没有正确管理非托管资源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:35:05.780

[System.GC.GetTotalMemory(bool)](http://msdn.microsoft.com/en-us/library/system.gc.gettotalmemory.aspx)可能是您正在寻找的。这是链接中带注释的示例：

```
using System;
namespace GCCollectIntExample
{
    class MyGCCollectClass
    {
        private const long maxGarbage = 1000;
        static void Main()
        {
            MyGCCollectClass myGCCol = new MyGCCollectClass();

            // Determine the maximum number of generations the system 
        // garbage collector currently supports.
            Console.WriteLine("The highest generation is {0}", GC.MaxGeneration);

            myGCCol.MakeSomeGarbage();

            // Determine which generation myGCCol object is stored in.
            Console.WriteLine("Generation: {0}", GC.GetGeneration(myGCCol));

            // Determine the best available approximation of the number  
            // of bytes currently allocated in managed memory.
            Console.WriteLine("Total Memory: {0}", GC.GetTotalMemory(false));

            // Perform a collection of generation 0 only.
            GC.Collect(0);

            // Determine which generation myGCCol object is stored in.
            Console.WriteLine("Generation: {0}", GC.GetGeneration(myGCCol));

            Console.WriteLine("Total Memory: {0}", GC.GetTotalMemory(false));

            // Perform a collection of all generations up to and including 2.
            GC.Collect(2);

            // Determine which generation myGCCol object is stored in.
            Console.WriteLine("Generation: {0}", GC.GetGeneration(myGCCol));
            Console.WriteLine("Total Memory: {0}", GC.GetTotalMemory(false));
            Console.Read();
        }

        void MakeSomeGarbage()
        {
            Version vt;

            for(int i = 0; i < maxGarbage; i++)
            {
                // Create objects and release them to fill up memory 
                // with unused objects.
               vt = new Version();
            }
        }
    }
} 
```

# android - 方向改变的android片段问题

> ID：15814061
> 
> 赞同：1
> 
> 时间：2013-04-04T14:27:27.457
> 
> 标签：android, fragment, android-orientation

我定义了活动和两个布局：

1.  大地布局
2.  布局

第一种布局适用于横向模式下的大屏幕，第二种布局适用于其他情况。第一个布局包含：

1.  片段1
2.  片段2

第二个布局包含：

1.  片段1

当我在大屏幕上以横向模式启动应用程序时，`getSupportFragmentManager().findFragmentById()`调用`Activity.onCreate()`正确返回两个片段。方向更改为纵向后，`getSupportFragmentManager().findFragmentById()`返回不为 null `fragment2`，但它应该返回`null`，因为此片段未在此布局中定义。问题是返回的片段对象不正确，并且`null`在访问它时出现指针异常。应该是`null`，不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:42:32.653

其实……我觉得不应该`null`。

在您的`layout-large-land`布局显示在 中后`Activity`，`Activity`将把它们都添加`Fragments`到`FragmentManager`. 一旦你旋转了你的`Activity`，它会`FragmentManager`保留它的状态，它的`Fragments`内部，它仍然有`Fragment2`它，这就是为什么`findFragmentById()`不返回`null`。

将`Fragment2`在那里，但它不会附加到`Activity`，您可以使用`fragment.isAdded()`或进行检查`fragment.isVisible()`。

如果在您的情况下，您想知道您的 2 窗格（横向）还是 1 窗格（纵向），也许您应该进行以下检查：`findViewById(R.id.secondFragmentContainer)==null`。

# matlab - 散点图matlab中的pcolor

> ID：15814068
> 
> 赞同：1
> 
> 时间：2013-04-04T14:27:43.423
> 
> 标签：matlab, colors, plot

我有一个大矩阵 `DAT(50000+,42)`。我在 x 和 y 轴上绘制了该矩阵的 2 行，并且希望绘图点的颜色由于单独行的值而变化。有人可以建议吗？`pcolor`由于“颜色数据输入必须是矩阵”错误，对我不起作用。TIA

```
X = DAT(:,21);

Y = DAT(:,22);

Z = DAT(:,28);

plot(X,Y,'*');

hold on

pcolor(X,Y,Z);

hold off 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:59:38.017

您可以考虑使用[scatter()](http://www.mathworks.de/de/help/matlab/ref/scatter.html)

```
% random sample data
DAT = randn(30,42);
X = DAT(:,21);
Y = DAT(:,22);
Z = DAT(:,28);

scatter(X,Y,50,Z); % x,y,size,color -> size can also be a vector
% scatter(X,Y,50,Z,'*'); % to also change the marker type 
```

![在此处输入图像描述](https://i.stack.imgur.com/xCDR8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:47:37.587

您可以从生成的数组中选择颜色，`colormap`如下所示：

```
DAT = randn(30,42);
X = DAT(:,21);
Y = DAT(:,22);
Z = DAT(:,28);

[dummy ID]=sort(Z);
colors=colormap(jet(length(Z)));

figure
for i=1:length(Z)
plot(X(i),Y(i),'*','Color',colors(ID(i),:));
hold on
end 
```

这种技术的唯一问题是，由于循环绘图，您无法绘制具有数百万个点的绘图，但除此之外它就像一个魅力：

![在此处输入图像描述](https://i.stack.imgur.com/1Mohg.png)

# mysql - mysqldump 未备份到指定文件

> ID：15814070
> 
> 赞同：0
> 
> 时间：2013-04-04T14:27:48.770
> 
> 标签：mysql, wamp, mysqldump

我有以下问题，我尝试使用mysqldump命令备份数据库，在终端输入corrent命令后：

这是命令：

```
c:/wamp/bin/mysql/mysql5.5.24/bin>mysqldump -uroot -ptest store > store_bak.sql

/* here it jumps to the next line after pressing ENTER */

c:/wamp/bin/mysql/mysql5.5.24/bin> 
```

我想我在正确的地方输入了正确的命令，但唯一发生的是它跳到下一行并且没有进行备份。我也找不到任何名为我指定的备份名称的文件（本例中的 store.sql）

有人知道是什么原因造成的吗？

ps：我正在使用 wamp，在 Windows 7 上，sql 5.5.24

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T15:04:45.910

你需要空格 -uroot -ptest

mysqldump -u root -p 测试 -h localhost 存储 > store_bak.sql

# regex - Java 匹配器错误

> ID：15814071
> 
> 赞同：1
> 
> 时间：2013-04-04T14:27:51.910
> 
> 标签：regex

我的字符串：

```
null[00:14.04]I've /n[00:14.11]got /n[00:14.18]a /n[00:14.25]fee- /n[00:15.02]ling /n 
```

我正在尝试获取 [<--->] 括号之间的所有数据。这是我的代码。

```
String find = "[(.*?)\\\\]";
Pattern patern = Pattern.compile(find);
Matcher matcher  = patern.matcher(intake);
     while(matcher.find()){
         i++;
         matcher.find(i);
         int start = matcher.start();
         int end = matcher.end();
         String group = matcher.group();
     } 
```

第一个结果是：

```
start = 10
end = 11
group = "." 
```

我想要的是（数着我的头）

```
start = 4
end = 14
group = [00:14.04] 
```

接下来是

```
start = 22
end = 32
group = [00:14.11] 
```

等等

什么是正确的模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:30:24.263

您使用了错误的转义。使用这个正则表达式：

```
String find = "\\[(.*?)\\]"; 
```

**编辑：**根据您的评论：

如果您想捕获方括号内的所有项目，只需像这样运行您的 while 循环：

```
while(matcher.find()) {
    String matched = matcher.group(1);
    System.out.printf("Matched Group: [%s]%n", matched);
} 
```

# c# - WebApi“找到与该请求匹配的多个操作”

> ID：15814075
> 
> 赞同：0
> 
> 时间：2013-04-04T14:27:57.253
> 
> 标签：c#, asp.net-web-api, asp.net-web-api-routing

这些问题中的另一个，但我无法找到为什么我在其他任何一个问题中都出现此错误的答案。

我的路线设置为：

```
public class ContentRoutes
{
    public static void Map(RouteCollection _routes)
    {
        _routes.MapHttpRoute(
            name: "GetThumbnail",
            routeTemplate: "api/content/thumbnail/{_id}",
            defaults: new { controller = "Content", id = "GetThumbnail" }
        );

        _routes.MapHttpRoute(
            name: "GetFile",
            routeTemplate: "api/content/file/{_id}",
            defaults: new { controller = "Content", id = "GetFile" }
        );
    }
} 
```

我试图映射到我的控制器方法，这些方法声明为：

```
[AcceptVerbs("GET")]
public HttpResponseMessage GetThumbnail(int _id)

[AcceptVerbs("GET")]
public HttpResponseMessage GetFile(int _id) 
```

尝试访问其中任何一个时，我都会收到问题标题中显示的错误。我一定遗漏了一些明显的东西，但我不能把手指放在上面。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:38:22.297

我想应该是这样的`defaults: new { controller = "Content", action = "GetThumbnail" }`。`action =`,`not id =`

（只是作为答案发布，这样它就可以被接受，因为它满足 OP）

# php - 将 php 函数添加到所有 POST 和 REQUESTs 变量

> ID：15814076
> 
> 赞同：2
> 
> 时间：2013-04-04T14:27:58.143
> 
> 标签：php

`MYSQL`我有一个非常老的客户，他现在因为注射而遇到安全问题。这个客户没有足够的钱将他的 PHP 数据库函数更改为`PDO`或`MYSQLI`. 尽管如此，他建议他想要一个防止 mysql 注入的功能。他深知功能并不完善。但是，他现在没有其他临时的办法。我为他写的函数叫做`safe();`. 我的问题来了。如何将该功能应用于他网站中的所有`POST`s 和s。`REQUEST`他的网站有很多文件，需要几个小时才能更改。我可以在每个文件的标题中添加什么东西，将我的函数应用于所有`POST`s 和`REQUEST`s 变量？

可能看起来像这样的东西：

```
$_POST[*] = safe($_POST[*]); 
```

当然，上面的代码是行不通的。但我希望你明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:32:45.910

你可以使用`array_map`，但我怀疑它会是完美的解决方案：

```
$final = array_map( "mysql_real_escape_string", $_POST ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:33:16.667

最后 $_POST 和 $_GET 只是数组。你可以做一个像

```
foreach ($_POST as $key => $value) {
  safe($value);
} 
```

如果他们有旧的 php 服务器等。因此，如果您有一个包含在整个网站上的通用文件并且“正常”功能不是一个选项，那么这可能是备份计划。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T14:34:40.530

您正在描述臭名昭著的[Magic Quotes](http://www.php.net/manual/en/security.magicquotes.php)，如果服务器早于 PHP/5.4.0（我认为是这种情况），它们仍然可用。

请注意，它们会影响所有 POST 数据，包括不会注入 SQL 查询的数据。

如果您更喜欢您的`safe()`函数，您可以简单地编写一个简单的脚本来进行更改并通过[auto_prepend_file](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)调用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T14:30:27.667

[https://stackoverflow.com/questions/15664021/php-escaping-vars-posted-through-var-and-got-by-postvari-with-a-meth](https://stackoverflow.com/questions/15664021/php-escaping-vars-posted-through-var-and-got-by-postvari-with-a-meth)的可能副本

有人告诉我，没有通用的方法，但是您可以通过 foreaching $_POST 数组来尝试一下

# rest - 检查“Post QueryString”后，SoapUI 不发送查询字符串

> ID：15814080
> 
> 赞同：6
> 
> 时间：2013-04-04T14:28:04.950
> 
> 标签：rest, soapui

我尝试通过发布查询参数来测试 RESTful Web 服务，但是，在我选中“发布 QueryString”复选框后，没有任何参数随请求一起发送

![在发出请求之前](https://i.stack.imgur.com/aCT39.gif)

![原始请求，您可以看到请求没有参数](https://i.stack.imgur.com/U7uvG.gif)

有人可以告诉我有什么问题吗？顺便说一句，我使用的是 4.5.1 版

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-04T10:41:17.870

我不能确定，但​​增加原始请求的大小以显示设置（默认为 10000）可能会有所帮助。

请参阅：文件/首选项/UI 设置/要显示的原始请求的大小。

我将它设置为 100000，现在我也可以在 Raw 模式下看到 POST 查询参数。

（另外，[感谢 SmartBear 论坛用户 olensmar](http://forum.soapui.org/viewtopic.php?t=5440)。）

# python - 防止终端字符集切换数据打印

> ID：15814087
> 
> 赞同：3
> 
> 时间：2013-04-04T14:28:24.890
> 
> 标签：python, bash, raspberry-pi, xbee

我正在运行一个控制台应用程序，该应用程序从房子周围的各种传感器获取数据。有时传输被中断，因此数据包没有意义。发生这种情况时，数据包的内容将输出到终端会话。然而，发生的事情是，在输出错误数据包时，它包含改变当前终端窗口字符集的字符，将任何文本（除了数字）呈现为不可读的乱码。

在显示错误数据包的同时保留大部分特殊字符的最佳方法是什么？究竟什么是可以改变终端行为的序列？

我还想补充一点，除了打乱的输出之外，应用程序仍然可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:46:06.043

您的终端可能会响应[ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)。为了防止数据无意中影响终端，您可以打印`repr`数据，而不是数据本身：

例如，

```
good = 'hello'
bad = '\033[41mRED'

print('{!r}'.format(good))
print('{!r}'.format(bad)) 
```

产量

```
'hello'
'\x1b[41mRED' 
```

然而

```
print(good)
print(bad) 
```

产量

![在此处输入图像描述](https://i.stack.imgur.com/tD0Hk.png)

（顺便说一句，键入`reset`将重置终端。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:55:24.783

您可以转换 ASCII 范围之外的所有字符，这应该消除任何会改变终端状态的杂散转义序列。

```
print s.encode('string-escape') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:52:13.553

当你收到一个数据包时，在输出它之前检查它的有效性。一种可能性是在输出之前检查数据包中的每个字符是否可打印，即在十进制的 32-127 范围内。或者向数据包添加校验和，并拒绝任何校验和错误的数据包。

# c++ - 分水岭分割后提取对象

> ID：15814088
> 
> 赞同：-3
> 
> 时间：2013-04-04T14:28:30.147
> 
> 标签：c++, opencv, extraction, watershed

我已经使用分水岭算法分割了我的图像，结果非常令人满意。现在，我想提取和存储已分割的内容，但我真的不知道该怎么做。

请问各位有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:53:29.783

您能否根据颜色/索引信息对输出图像进行连通分量分析（8 连通性）。我认为这将为您提供最简单的起点。邻域中位于同一段中的所有像素，您可以存储该信息并进一步使用它。

但是，我认为您不能基于分水岭进行背景/前景分割，因为这需要比每帧的片段更多的信息。您还必须以某种方式跟踪以前的帧信息。有很多论文。通过他们。Grimmson 的论文具有开创性。这几天我见多了。在我看来，基于像素的自适应分割器是最好的，但速度很慢。

# statistics - 谷歌云存储：我在哪里可以获得每个存储桶的统计信息

> ID：15814094
> 
> 赞同：9
> 
> 时间：2013-04-04T14:28:42.927
> 
> 标签：statistics, google-cloud-storage

我想按桶提取统计信息。这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T17:49:05.780

（更新答案 2014/09/23 以反映 gsutil 命令的更改）

`gsutil du`显示给定 URL 下层次结构中的对象使用的空间量（以字节为单位）。

*   `s`给出总和而不是每个对象的大小.
*   `h`打印人类可读的大小而不是字节。

所以：

```
$ gsutil du -sh gs://BUCKET_NAME
261.46 GB   gs://BUCKET_NAME 
```

... 给出桶中对象的总大小。但是，它是根据请求计算的，对于包含许多对象的存储桶可能需要很长时间。

对于生产使用，启用[Access Logs & Storage Data](https://developers.google.com/storage/docs/accesslogs)。存储数据日志将为您提供前一天每个存储桶的平均大小（以字节/小时为单位）。

访问日志为您记录的存储桶提供有关每个请求的[详细信息。](https://developers.google.com/storage/docs/accesslogs#reviewing)

还有[关于将](https://developers.google.com/storage/docs/accesslogs#downloading)日志加载到[BigQuery](https://developers.google.com/bigquery/)进行分析的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:57:56.387

访问日志的传递可以按照记录在每个存储桶中[启用](https://developers.google.com/storage/docs/accesslogs)。启用存储桶日志记录后，将尽最大努力每小时将日志文件写入用户定义的日志记录存储桶。您可以从那里提取日志文件并使用您选择的工具进行解析和计数。如果您不想自己对原始日志运行分析，可以使用[Qloudstat](https://qloudstat.com)等服务。（免责声明：我为背后的公司工作。）

# php - 使用 php 后端在 Android 应用程序中显示数据

> ID：15814095
> 
> 赞同：0
> 
> 时间：2013-04-04T14:28:45.217
> 
> 标签：php, android

我对构建应用程序有疑问。例如，我正在制作一个类似 Twitter 的应用程序。此应用程序必须对 url 进行查询（由 asynctask 完成）并获得回复（可以是 Json、序列化数组，甚至是 html）。

在下一步应用程序输出数据。例如，最新消息。我不知道它可以通过哪些方式完成。我尝试使用来自后端的 html 数据并通过 web 视图查看它，然后我在链接上添加了点击侦听器。有了这个，我可以控制应用程序和导航。之后我在 web-view 中打开了 JavaScript 并且可以控制 DOM。在 web 视图中，绘制图像更容易。

我是朝着正确的方向前进还是需要使用列表视图之类的东西来输出？使用它可能会出现什么未来问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:37:00.230

好的，你的问题很困惑，但我会试着问。正如您所说，您有两种选择，一种是本地构建您的界面并通过 asyncTask 从 Web 服务检索数据，另一种是使用 WebView。

两种方法都是有效的，但是认为您使用的是 WebView 您正在构建一个非本机应用程序（实际上是一个混合应用程序），因此您需要模拟本机行为（这可能会在将来给您带来问题）

我更喜欢使用 WS 并使用原生小部件构建界面，对于通信，您可以使用 JSON。

如果您更喜欢使用 WebView，我建议您使用[Sencha](http://www.sencha.com/)或[phonegap 之类的框架](http://phonegap.com/)

# objective-c - 与方向更改相关的 EXC_BAD_ACCESS / KERN_INVALID_ADDRESS

> ID：15814097
> 
> 赞同：3
> 
> 时间：2013-04-04T14:28:47.860
> 
> 标签：objective-c, cocoa-touch, uikit, uideviceorientation

我有一个奇怪的问题。我收到一个错误报告，说应用程序因方向更改而崩溃。问题是我根本没有在应用程序代码中注册任何方向事件。我唯一与方向变化有关的是：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return IS_IPAD ? YES : interfaceOrientation == UIInterfaceOrientationPortrait;
} 
```

...在所有视图控制器上，以确保它在 iPad 而不是 iPhone 上改变方向。错误发生在 iPhone 上。

IS_IPAD 来自于此：

```
#ifdef UI_USER_INTERFACE_IDIOM
    #define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
#else
    #define IS_IPAD (false)
#endif 
```

**它似乎`-[UIWindow _updateInterfaceOrientationFromDeviceOrientation:]`调用了一些不再存在的对象。如果我没有注册任何与方向相关的通知，那会是什么对象？**

![在此处输入图像描述](https://i.stack.imgur.com/HcwtO.png) ![在此处输入图像描述](https://i.stack.imgur.com/EqIc9.png)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-07-24T01:57:56.710

您使用的方法已弃用。该方法`shouldAutorotate`是新的自转支撑方法。我试过这个，它可以按你的意愿工作：

```
-(BOOL) shouldAutorotate{
    return IS_IPAD ? YES : [self preferredInterfaceOrientationForPresentation] == UIInterfaceOrientationMaskPortrait;
} 
```

希望能帮助到你 ：）

# css - 输入元素位置绝对和宽度自动在 IE 中不起作用

> ID：15814098
> 
> 赞同：2
> 
> 时间：2013-04-04T14:28:49.133
> 
> 标签：css

我需要获取输入元素的自动宽度，相对于它的父元素。

HTML

```
<div id="overlay">
    <input type="text" id="inner_input" value="aaa" />
</div> 
```

CSS

```
#overlay {
    position: relative;
    background: #ccc;
    height: 50px;
}
#inner_input {
    position: absolute;
    height: auto;
    width: auto;
    display: block;
    top: 10px;
    bottom: 10px;
    left: 10px;
    right: 40px;
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    background: #ededed;
} 
```

但这在 IE 中不起作用。问题是什么？

**这是** [jsfiddle](http://jsfiddle.net/yQWGV/151/)

**更新**

有趣的是，如果我使用 div 而不是输入，它可以工作！这意味着在 iE 中有浏览器定义的输入元素规则，不允许正常工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:05:20.183

你可以使用`%`而不是类似的`auto`东西 `width: 90%;`并且会工作

# java - Java 中的 toString 覆盖

> ID：15814104
> 
> 赞同：1
> 
> 时间：2013-04-04T14:28:59.507
> 
> 标签：java, performance, tostring

这个问题来自一个作业。我必须在创建循环链接列表的类中重写 toString() 方法，实际上我有一个很好用的 toString() 方法，它通过了我所有的测试。所以我的项目是自动评分的，它显然没有 100% 批准我的方法。所以我的问题是：有没有更好的方法来编写这个更有效的 toString() 方法？

```
public String toString()
    {
        if (size == 0)
        {
            return "[]";
        }
        else
        {
            String output = "";
            Node<E> tempNode = actualElement;
            while (tempNode.next() != actualElement)
            {
                if (output.equals(""))
                {
                    output = "[" + output + tempNode.data().toString();
                    tempNode = tempNode.next();
                }
                else
                {
                    output = output + ", " + tempNode.data().toString();
                    tempNode = tempNode.next();
                }

            }
            output = output + ", " + tempNode.data().toString() + "]";
            return output;
        } 
```

如果我需要详细说明类结构以便更有意义，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:30:58.090

使用[StringBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)。

```
StringBuilder builder = new StringBuilder();
builder.append("some text");
builder.append("more text");
return builder.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:31:17.697

为了进一步改进它，您可以使用 StringBuilder 并附加每个计算的 String 文字。这可以节省 JVM 创建单个字符串文字的负载，从而提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:32:15.707

首先，您应该使用 StringBuilder 来连接您的字符串。

看看这里：

[http://javarevisited.blogspot.co.at/2011/07/string-vs-stringbuffer-vs-stringbuilder.html](http://javarevisited.blogspot.co.at/2011/07/string-vs-stringbuffer-vs-stringbuilder.html)

```
StringBuilder sb = new StringBuidler();
Node<E> tempNode = actualElement;

while (tempNode.next() != actualElement)
{
    if (sb.length() == 0)
    {
        sb.append("[").append(tempNode.data().toString());
    }
    else
    {
        sb.append(", ").append(tempNode.data().toString());
    }
    tempNode = tempNode.next();
}
sb.append(", ").append(tempNode.data().toString()).append("]");
return sb.toString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:33:05.957

`Strings`[除非字符串生成器在更简单的代码或更好的](http://docs.oracle.com/javase/tutorial/java/data/buffers.html)**性能**方面提供优势，否则应始终使用

 **如果您需要连接大量字符串，附加到 a`StringBuilder` `object`更**有效**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T14:34:17.007

改为使用`StringBuilder`可能会对您有所帮助。这是从 复制的片段`AbstractCollection.toString()`，请看一下。

```
 public String toString() {
    Iterator<E> i = iterator();
if (! i.hasNext())
    return "[]";

StringBuilder sb = new StringBuilder();
sb.append('[');
for (;;) {
    E e = i.next();
    sb.append(e == this ? "(this Collection)" : e);
    if (! i.hasNext())
    return sb.append(']').toString();
    sb.append(", ");
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T14:36:10.310

我假设`actualElement`是在课堂上的其他地方定义的，尽管更好的名字可能会更好。`if (output.equals(""))`是不必要的。只需以 [ 开始输出`StringBuilder`，然后附加到它。

但是，您取决于您​​的列表实际上是循环的。如果这个列表最终没有循环，你会得到一个 NPE。而且，如果列表看起来更像是一个 6，如 [A, B, C, D, E, C, D, E...]，那么循环将永远不会结束。**

# forms - Symfony + Doctrine + Annotation 验证在表单中不起作用

> ID：15814105
> 
> 赞同：1
> 
> 时间：2013-04-04T14:29:03.593
> 
> 标签：forms, validation, symfony, doctrine-orm, annotations

我在我的实体定义中使用教义注释来定义每个变量的行为，即：

```
@ORM\Column(type="string", length=50, nullable=false) 
```

如果我提交表单，将字段留空，它会通过验证，但是（当然）我收到关于 INSERT 语句的错误，因为他无法插入 NULL 值。这怎么可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T14:35:14.400

这是因为 Symfony 不会根据 Doctrine 注释自动验证您的表单输入。

Symfony2 附带了一个[Validator](https://github.com/symfony/Validator)组件，它使这项任务变得简单而透明。该组件基于[JSR303 Bean Validation 规范](http://jcp.org/en/jsr/detail?id=303)。

[在http://symfony.com/doc/current/book/validation.html](http://symfony.com/doc/current/book/validation.html)阅读实现

这是一个可能对您有所帮助的 Validator 注释示例：

```
// Acme/TaskBundle/Entity/Example.php
use Symfony\Component\Validator\Constraints as Assert;

class Example
{
    /**
     * @Assert\NotBlank()
     * @Assert\MaxLength(50)
     * @ORM\Column(type="string", length=50, nullable=false)
     */
    public $parameter;
} 
```

# dhcp - 对 DHCP 租约执行操作 (Microsoft)

> ID：15814108
> 
> 赞同：1
> 
> 时间：2013-04-04T14:29:11.473
> 
> 标签：dhcp

我需要检测添加到网络的机器以尝试强制安装软件。

加入域的机器 - 没问题，我使用登录脚本或组策略。

机器没有加入我感兴趣的域，我*认为*检测它们何时请求并分配 IP 地址是它们首次出现在网络上的时间点，以及何时我处于最佳位置行动。

有谁知道在 Windows DHCP 上触发 DHCP 租约分配操作的方法？

谢谢！

# jquery-mobile - 如何上滑 使用 jQuery 标记“MOBILE 1.3.0？

> ID：15814109
> 
> 赞同：0
> 
> 时间：2013-04-04T14:29:15.853
> 
> 标签：jquery-mobile, html, mobile, slideup

您能否指导我（非常感谢一个示例）我如何使用 jQuery MOBILE 1.3.0 在 jQuery 1.9.1 中的标签上实现上滑效果。

我需要像此页面中的第一个示例[http://api.jquery.com/slideUp/](http://api.jquery.com/slideUp/)

我阅读了幻灯片，但如何为标签做。 [http://jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html)

我知道这很简单，但我是 jQuery 新手。只是无法在移动 API 中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:52:32.000

这是你要找的吗？**[演示](http://jsfiddle.net/Palestinian/Cw3sj/)**

标记

```
<a data-role="button" id="clickme">Click here</a>

<br/>

// this div will slideup.
<div id="test">
 <img src="anyimg.jpg" alt="" />
</div> 
```

代码

```
$('#clickme').click(function () {
 $('#test').slideUp('slow'); // or fast, or leave it blank
}); 
```

# python - python中基于日期时间的单独文件

> ID：15814114
> 
> 赞同：0
> 
> 时间：2013-04-04T14:29:30.867
> 
> 标签：python

我在一个文件夹中有很多文件。每个文件都包含一个日期时间戳。

示例：文件格式为：

```
315251973836374016  Tried not to fall into the trap but the show scandal is amazing!    170061457   VonnaDiane  20130323    scandal NULL    NULL    NULL 
```

我必须根据这个时间戳对文件进行分组。即，在另一个文件夹中，我必须以日期时间 20130323 等名称创建文件，并存储与日期时间对应的值

注意：源文件包含混合日期时间，即 20130323、20130324 等，

希望我很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:40:32.227

最简单的方法是隔离您想要的字段，然后使用您的数据作为文件名附加到相关文件

```
s = "315251973836374016  Tried not to fall into the trap but the show scandal is amazing!    170061457   VonnaDiane  20130323    scandal NULL    NULL    NULL"

parts = s.split("\t")
with open("path/to/output/to/%s" % parts[4], "a") as f:
    # parts[4] will be 20130323, assuming tab delimited
    f.write("%s\n" % s) 
```

如果没有更多信息，很难提供更多帮助。您可能希望验证您使用的数据是有效日期

# ruby-on-rails - 正则表达式检查数字小数分隔符是否一致

> ID：15814123
> 
> 赞同：1
> 
> 时间：2013-04-04T14:29:54.613
> 
> 标签：ruby-on-rails, ruby, regex, csv

我有一个`CSV::Table`包含许多列的对象。每列由一定数量的元素组成，这些元素是应该包含数字的字符串。

它可以同时使用`"."`或`","`用作小数分隔符，并且不能有任何**千位分隔符**。

**有效示例**

*   “1023.12”
*   “2341,34”
*   “1245”
*   "1.456" *- 注意它似乎是一个千位分隔符，没有小数大小写，但在这种情况下，它应该被解释为小数分隔符*
*   “1,435” *- 与上述相同的观察结果*

**无效示例**

*   “1,434.12”
*   “1.455,19”
*   "1.499e5" *- 科学记数法*
*   "a134" *- 只是为了确保字符串中没有字符*

另外，我需要确保小数点分隔符在所有列和行中都是一致的；所以我需要提取使用的小数分隔符（`","`或`"."`）。

我可以使用什么正则表达式来检查字符串的有效性并提取小数点分隔符以检查整个表的一致性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:35:51.057

我想这会起作用：

```
/^\d*([.,]?)\d+$/ 
```

这也将允许像 一样的数字`.1234`，即使它们不寻常也是有效的。

要禁止此类数字，请尝试添加另一对括号：

```
/^\d+(([.,])\d+)?$/ 
```

（请注意，现在第二对括号，而不是第一对，包含您的小数分隔符。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:02:20.660

```
matches = table.flat_map { |r| r.map { |c| /\A\d+(?:([.,])\d+)?\z/.match(c) } }
raise 'InvalidNumbers' if matches.any?(&:nil?)
decimals = matches.map{|m| m[1]}.reject(&:empty?).uniq
raise 'InconsistentDecimals' if decimals.size > 1
decimal_seperator = decimals.first || '.' 
```

正则表达式匹配有效数字，在 match[1] 中捕获可选的小数分隔符。如果任何匹配失败（不是数字），则会出错。如果存在不止一种分隔符（不一致），则会出错。如果没有分隔符，假设 '.' 默认。

# image - trigger.io file.saveURL and looping

> ID：15814124
> 
> 赞同：1
> 
> 时间：2013-04-04T14:29:55.090
> 
> 标签：image, loops, save, trigger.io

I am using the file.saveURL in a loop and its working good but I am seeing some strage things. Basically I loop over about 70 images and then grab the uri to them after they are saved and store that locally so I can then use it to display in the app

What happens is that once the loop is done I display the images out but randomly some of the images are the same. I have validated the correct URL is being passed but its as if and I don't know for sure but maybe the function is not done with the previous and is somehow overwriting it?

This makes the most sence because the issue usually happens with images right next to each other.

So I guess my question is, does the file.saveURL only work on a one to one aspect, like it has to by synchronous?

If that is the case what would be the recommended approach for looping over and saving these images.

Thanks!

EDIT

This is a basic sample (I have some conditional stuff in there but this is the main part)

I have the JSON object stored and I loop over it

```
$(data).each(function(i){

        var slcval = 'speaker' + this.SID;
        var imageID = 'simageid' + this.IMAGE;
        var  speakerImage = "http://mydomain.com/users/images/speakers/" + this.IMAGE;

//then I call the save url function 
        saveURLImage(speakerImage,slcval,'speaker',this.SID,imageID);
} 
```

this loops over my images and calls the save image function that then does the save URL function

```
function saveURLImage(url,ID,type,extraVal,imageID){
forge.file.saveURL(url, function (file) {
       forge.file.URL(file, function (url) {
        var fileObject = JSON.stringify(url);

        localStorage.setItem(ID, fileObject);

        })
        });
 } 
```

This is a simple version of it, I have some other parts that set some localstorage vars but this is the main call.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:45:29.420

所以我的问题是范围问题

所以如果其他人来arrocss这个我发现这个帮助了

[Javascript：setTimeout 中的函数和引用](https://stackoverflow.com/questions/8824370/javascript-function-in-settimeout-and-references)

基本上我所做的是创建一个函数，其中包含一个匿名函数，因此范围是正确的

函数 saveURLImage(url,ID,type,extraVal,imageID) { (function() { saveURLImageScoped(url,ID,type,extraVal,imageID) })(); }

所以函数名称仍然和以前一样，但我重命名了主函数 saveURLImageScoped，现在它有自己的变量范围

# python - 为什么有时 python 解释器无法识别向上箭头键？

> ID：15814125
> 
> 赞同：1
> 
> 时间：2013-04-04T14:30:05.470
> 
> 标签：python

这个问题真的困扰了我很久，一直想不通。

我的 ubuntu 中有各种版本的 python。某些版本的 python 解释器可以正常识别键盘方向键。但有些版本不能。

例如。在我的 python2.6 解释器中，可以正确读取所有键盘键。但是在我的 python2.7 解释器中，如果我在键盘上键入“向上箭头键”，解释器会显示这个，我想要的是重新出现`>>> test = "hello world"`：

```
(python2.7)yarkee@yarkee-laptop:~$ python
Python 2.7.3 (default, Mar 19 2013, 19:57:37) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> test = "hello world"
>>> ^[[A 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T14:31:58.763

听起来你的 python-2.6 解释器是在`readline`支持下构建的，但你的 python-2.7 解释器不是。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T15:17:56.267

最后，我`pip install readline`用来解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:35:37.317

安装[readline-devel](https://www.google.com/search?q=readline-devel&aq=0&oq=readline-&aqs=chrome.1.57j0l3j62l2.2940j0&sourceid=chrome&ie=UTF-8)并重新编译 Python... 应该可以解决这个问题。

# configuration - Sitecore 配置工厂 - 使用多个参数调用方法

> ID：15814129
> 
> 赞同：1
> 
> 时间：2013-04-04T14:30:16.143
> 
> 标签：configuration, dependency-injection, sitecore, factory

我已经阅读了 John West 关于站点配置工厂的文章（[http://www.sitecore.net/unitedkingdom/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/02/The-Sitecore-ASPNET- CMS-配置-Factory.aspx](http://www.sitecore.net/unitedkingdom/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/02/The-Sitecore-ASPNET-CMS-Configuration-Factory.aspx)）

我正在尝试在自定义链接提供程序中实现它。

我希望配置工厂在链接提供程序中调用以下方法：

```
public void AddSitePath(String site, String path)
{
   // do stuff
} 
```

这是配置（尽管我尝试了几种类似的变体）。

```
<add name="sitecore" type="MyProject.Providers.CustomLinkProvider, MyProject" addAspxExtension="false" alwaysIncludeServerUrl="false" encodeNames="true" languageEmbedding="never" languageLocation="filePath" shortenUrls="true" useDisplayName="false">
    <sitePaths hint="list:AddSitePath">
        <sitePath>
            <site>SiteOneName</site>
            <path>/product-range/</path>           
        </sitePath>
        <sitePath >
            <site>SiteTwoName</site>
            <path>/items-for-sale/</path>
        </sitePath>            
    </sitePaths>
</add > 
```

我收到以下错误消息：找不到添加方法：AddSitePath（类型：MyProject.Providers.CustomLinkProvider）

我怀疑问题在于我试图将 2 个参数传递给该方法，果然，当我使用单个参数版本对其进行测试时，它起作用了。

我需要在配置或类代码中进行哪些更改才能实现我的需要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:44:43.023

所以看起来你不能提供 2 个参数。相反，您传入一个 XmlNode 对象，其中包含您需要的所有内容。您必须从方法中的 XmlNode 中提取信息。

类似于以下内容：

```
public void AddSitePath(XmlNode arg)
{
   // pick apart the XmlNode and do stuff
} 
```

```
<sitePaths hint="raw:AddSitePath">
    <sitePath site="SiteNameOne" path="/product-range/">
    <sitePath site="SiteNameTwo" path="/items-for-sale/">            
</sitePaths> 
```

请注意，您必须使用“原始”前缀而不是“列表”

# java - 如何在 java 中与 Windows Media Player 交互

> ID：15814130
> 
> 赞同：0
> 
> 时间：2013-04-04T14:30:16.283
> 
> 标签：java, windows-media-player

您能帮我与 Windows Media Player 在 java 中播放的当前歌曲进行交互或获取有关信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:40:00.533

我认为以下链接很有用：

[http://www.coderanch.com/t/384480/java/java/Window-Media-Player](http://www.coderanch.com/t/384480/java/java/Window-Media-Player)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:32:29.823

它不可能使用 java 我的伙伴。
Java 无法与 Windows 媒体播放器交互。
你必须使用`natives`.

# .htaccess - htaccess with sub site

> ID：15814131
> 
> 赞同：1
> 
> 时间：2013-04-04T14:30:18.737
> 
> 标签：.htaccess

I have an htaccess file under the main site

```
Options +FollowSymLinks -MultiViews

# Turn mod_rewrite on
RewriteEngine On

RewriteBase /

## hide .php or .html extension
# To externally redirect foo.php ot foo.html to foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.(php|html) [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally redirect /dir/foo to /dir/foo.html
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^ %{REQUEST_URI}.html [L]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_URI}.php [L] 
```

That works for

[http://www.site.com/tenant-referencing/](http://www.site.com/tenant-referencing/)

but I can't get the subsite to work

[http://www.site.com/newwebsite/tenant-referencing/](http://www.site.com/newwebsite/tenant-referencing/)

I have the same htaccess under the subsite

Thanks

# jquery - Jquery-rails 停止工作

> ID：15814139
> 
> 赞同：0
> 
> 时间：2013-04-04T14:30:38.437
> 
> 标签：jquery, ruby-on-rails, archlinux

我在我的 Arch 系统上运行了一些 rails 应用程序。我最后更新了它并开发了一些东西，但我的 Rails 应用程序没有受到影响。今天我对它们进行了测试，突然 jquery 停止了工作。

我`Uncaught ReferenceError: $ is not defined`使用 jquery 进入每一页。但是，在应用程序日志中，我可以阅读：

```
Started GET "/assets/application.js?body=1" for ...
Served asset /application.js - 304 Not Modified (5ms) 
```

所以我得到 application.js 加载正常。

然后在 application.js 中你有：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

我想一切都设置正确，它之前工作过，所以现在一定有某种不兼容，有一些关于我的设置的信息：

```
$ gem list | grep jquery
jquery-rails (2.2.1, 2.1.4, 2.1.3)

$ cat Gemfile | grep jquery
gem 'jquery-rails'

$ rails -v
Rails 3.2.8

$ uname -a
Linux nosferatu 3.8.5-1-ARCH #1 SMP PREEMPT Fri Mar 29 20:45:06 CET 2013 i686 GNU/Linux 
```

有什么问题？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:04:38.380

自动回答：我的解决方案是在 Gemfile 上手动设置最新的 ruby​​ 版本，然后执行包更新。

和平

# php - xmlrpc php record xml to text file

> ID：15814143
> 
> 赞同：0
> 
> 时间：2013-04-04T14:30:47.683
> 
> 标签：php, xml-rpc

I am getting xmlrpc xml posted to my server and I want to catch the xml and store it in a text file for later processing.

This is what I have, but I just get a blank text file

```
$getXML = file_get_contents('php://input');
 $xml = new SimpleXMLElement($getXML);
 $text = $xml->Text;

 $today = date("Y-m-d");

 $randomnr = rand(100000, 999999);
 $datet = date("Ymd-H:i:s");
 $filename = "/var/www/".$datet."-".$randomnr.".txt";

 $fh = fopen($filename, 'w') or die("can't open file");
 fwrite($fh, $text);
 fclose($fh); 
```

Can anyone see why I cam getting a blank text file?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:18:47.350

我为你的问题找到了这个答案

1）HTTP POST 数据通常填充在 $_POST 中，php://input 通常会包含 PUT 数据。

2) php://input 在接收到 multipart/form-data POST 时无法打开/读取，也许这就是客户端改变的原因？– Wrikken 3 月 28 日 20:01

[file_get_contents('php://input') 一直返回空](https://stackoverflow.com/questions/11937886/file-get-contentsphp-input-keeps-returning-empty)

[php://input 返回空](https://stackoverflow.com/questions/13546660/php-input-returns-empty)

[php://input 返回空字符串](https://stackoverflow.com/questions/5463596/php-input-returning-empty-string)

# c# - 在 ASCX 页面中调用 EventHandler

> ID：15814146
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:30:54.923
> 
> 标签：c#, asp.net, ascx

我正在更新一个 ASCX 页面，我看到一个 EventHandler 定义，然后被调用。 `public event EventHandler Step1Submit;` 然后在代码中 `Step1Submit(sender, e);`

在 ASPX 页面中，有标签

```
<uc3:SignUpStep1Control ID="signUpStep1" runat="server" 
                        OnStep1Submit="SignUpStep1_Click" /> 
```

我的问题是，什么时候`Step1Submit(sender, e);`执行，是不是`SignUpStep1_Click()`在后面的 ASPX 代码中调用事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:34:38.103

您将事件“OnStep1Submit”的事件处理“推迟”到函数 SignUpStep1_Click。所以是的，SignUpStep1_Click 将被执行，你需要在你的 aspx.cs 文件中定义它才能编译。与按钮上的单击事件或任何其他事件实际上相同。

# php - 无法使用除 777 以外的其他权限保存文件

> ID：15814150
> 
> 赞同：2
> 
> 时间：2013-04-04T14:31:02.830
> 
> 标签：php, apache, permissions, 777

我有一个调整图像大小然后保存新图像的脚本。
如果原始图像没有777权限，我无法保存新图像。

我知道 777 是有风险的，所以当使用不同的权限（例如 775 或 755）时，它什么也不做。

1.  为什么它什么都不做？
2.  如何解决？

**编辑：**
无论图像的权限是什么，我都希望能够使用我的脚本保存文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T14:32:22.623

这一切都是因为您的服务器配置错误，这意味着 httpd 以不同于拥有所有文件的用户身份运行，这需要`write`为`others`. 解决方案是修复服务器配置，使这些用户 ID 匹配。但是，如果您不熟悉服务器管理，这并非易事。其他（但这不是真正的解决方案）是将这两个用户放在一个组中，这样您就不会给每个人写访问权限，而是将其“限制”到您的组。但这不是一条可行的路。或者，如果您是服务器上的唯一用户，您可以将 httpd 设置为在您的 userid/groupid 上运行，而不是在它自己的上运行。但是，同样，这不应被视为“解决方案”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:36:42.707

您可以重新设置 Apache 配置文件中的`User`和`Group`参数以作为另一个用户运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:33:56.910

1）您创建一个具有 777 权限的新文件夹。

2）将图像保存在该文件夹中。

我认为您在原始图像上不需要 777。

.

.

为了安全起见，您需要：

A) 检查上传文件的扩展名并调用自定义调整大小/图像功能。这将确保文件始终转换为图像。

B）[ **.htaccess** ]（在您的**用户上传图片目录**内）=

```
#Disable directory indexes & folder listing

[deny any file other than image]
<Files ^(*.jpeg|*.jpg|*.png|*.gif)>
order deny,allow
deny from all
</Files> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T14:45:51.060

您的 Web 服务器在与拥有图像的用户不同的用户下运行。要找出您的网络服务器在哪个用户下运行，请创建并运行这个 php 脚本

```
<?php
echo shell_exec('whoami');
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T14:35:26.107

之后您可以尝试 chmod，但这很大程度上取决于 php 守护程序拥有的权限；

```
chmod("/somedir/somefile", 755); 
```

`fileperms()`您可以获取已创建文件的当前权限。

# google-chrome - Google Chrome & FB Like Button at the bottom of the page

> ID：15814155
> 
> 赞同：1
> 
> 时间：2013-04-04T14:31:20.557
> 
> 标签：google-chrome, resize, facebook-like, developer-tools, css

I'm encountering a strange issue. I have a facebook button at the bottom of a page. When clicked, the facebook "Comment/share" box pops up.

The behaviour is correct under FF and IE, but not in Chrome, where the box is cut by the bottom of the page. In other words, the page isn't resized as it is under FF and IE.
The page has a min-height and max-height, and the containers have an overflow:visible attribute as the facebook docs advises to avoid some display issues of the share iframe. The curious thing is that the bug disappears by simply opening the developer tools, and checking/unchecking any CSS attributes of any parent element of the FB-button.

My guess is that the resize of the window isn't captured by Chrome when the button is clicked, but it is when using the developer tools. I tried to explore other sources of the problem (max-height not working properly or a higher element having a overflow:hidden) but I found nothing conclusive.

Thank you for help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:41:46.960

如果您在 Chrome 中运行主题，您可能会遇到问题。如果是，请尝试重置为默认主题：

```
options > personal stuff > themes > reset to default theme 
```

此外，请确保您没有被缩小或缩小。Chrome 的缩放变得有点时髦。

假设这些不是问题，请尝试将共享代码放在具有唯一 ID 或类的 div 中：

```
 <div id="myFacebookContainer">Plugin HTML Here</div> 
```

您的 CSS 将包含以下内容：

```
#myFacebookContainer span{
  height:25px;
}
#myFacebookContainer iframe{
  height:25px;
} 
```

我希望这些建议之一有所帮助！

# javascript - Use a property or method to mark a class as special? (in JavaScript)

> ID：15814157
> 
> 赞同：0
> 
> 时间：2013-04-04T14:31:28.863
> 
> 标签：javascript, oop

In JavaScript, I want to mark object A as special, so that when A is accessed by B, B can check whether A is marked so that B treats A as different from other objects. (Think that B is a serializer that processes many different objects, and A has to be serialized in a certain way.)

Now, I can either 1: set a property in A, e.g., A.special=true
2: define a method, e.g., A.isSpecial(), which if the method exists, it shows that A is special.

I know that both of these do the same thing. From the design point of view, are there any differences, which makes one preferable?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:34:23.703

> 从设计的角度来看，有什么区别，哪一个更可取？

布尔属性更简单，更容易测试。如果没有定义，`A.special`将导致`undefined`which is falsy already。

如果要使用方法，则需要进行测试`typeof A.special == "function" && A.special()`，因为只有`A.special()`在未定义该方法时才会导致异常。

只有当您需要动态计算特殊性（它可能取决于其他属性？）并且不想在更新这些属性的同时更新布尔标志时，该方法解决方案才会更可取。但是，对于这种情况，还有一种使用 getter 属性的中间方法（如果您不需要支持旧的 IE）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:36:00.163

Accessing the property is definitely faster:

```
this.special = true; 
```

But outside `A`'s code, someone can do `A.special = false`. There's no way to prevent that.

Using a method forbids other objects to modify the value. In `A`'s constructor you can define:

```
...
var special = true;
...
this.isSpecial = function() {return special;}; 
```

In modern browsers, there's a way to get the best of both: `Object.defineProperty`. So you can define a property and forbid external sources to change it:

```
Object.defineProperty(this, "special", {value: true, writable: false, configurable: false}); 
```

This isn't available in IE7 and lower, and in IE8 is defined only for DOM objects and using the `get` and `set` property definitions:

```
Object.defineProperty(this, "special", {get: function() {return true;}}); 
```

This isn't faster than calling an `isSpecial` method.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T14:34:38.347

使用属性`A.special = true;`会更快（尽管我怀疑这是对性能至关重要的一段代码）。

做一个方法的好处`A.special = function() {...};`是你得到了一个间接层，并且可以在那里放置更高级的逻辑。例如，

```
A.special = function() { return foo && bar && !baz ? true : false; }; 
```

# c# - 如何从 jQuery ajax 调用将复杂对象传递给 ASP.NET WebApi GET？

> ID：15814160
> 
> 赞同：37
> 
> 时间：2013-04-04T14:31:42.353
> 
> 标签：c#, ajax, json, asp.net-web-api, http-get

我在 JavaScript 中有以下复杂对象，其中包含过滤器选项

```
var filter={caseIdentifiter:'GFT1',userID:'2'}; 
```

我想将其传递给 ASP.NET MVC4 WebApi 控制器 GET

```
[HttpGet]
public IEnumerable<JHS.Repository.ViewModels.CaseList> Get([FromBody]Repository.InputModels.CaseListFilter filter)
{
  try
  {
    return Case.List(filter);
  }
  catch (Exception exc)
  {
    //Handle exception here...
    return null;
  }
} 
```

使用 jQuery ajax 调用

```
var request = $.ajax({
  url: http://mydomain.com/case,
  type: 'GET',
  data: JSON.stringify(filter),
  contentType: 'application/json; charset=utf-8',
  cache: false,
  dataType: 'json'
}); 
```

ASP.NET 控制器方法中的“filter”对象为“null”。如果我将其更改为 POST，则过滤器对象将正确传递。有没有办法将复杂对象传递给 GET？

我不想将 URL 的参数分开，因为会有很多参数会使其效率低下，很难有可选参数，这样即使添加了新参数，方法签名也保持不变。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-04T16:40:50.870

找到这个 StackOverflow 问题/答案后

[复杂类型在 ApiController 参数中为空](https://stackoverflow.com/questions/12916340/complex-type-is-getting-null-in-a-apicontroller-parameter)

控制器方法上的 [FromBody] 属性必须是 [FromUri]，因为 GET 没有主体。在此更改之后，“过滤器”复杂对象被正确传递。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-14T10:00:54.083

如果您将 json 数据附加到查询字符串，并稍后在 web api 端解析它。你可以解析复杂的对象。它比发布 json 对象样式有用。这是我的解决方案。

```
//javascript file 
var data = { UserID: "10", UserName: "Long", AppInstanceID: "100", ProcessGUID: "BF1CC2EB-D9BD-45FD-BF87-939DD8FF9071" };
var request = JSON.stringify(data);
request = encodeURIComponent(request);

doAjaxGet("/ProductWebApi/api/Workflow/StartProcess?data=", request, function (result) {
    window.console.log(result);
});

//webapi file:
[HttpGet]
public ResponseResult StartProcess()
{
    dynamic queryJson = ParseHttpGetJson(Request.RequestUri.Query);
        int appInstanceID = int.Parse(queryJson.AppInstanceID.Value);
    Guid processGUID = Guid.Parse(queryJson.ProcessGUID.Value);
    int userID = int.Parse(queryJson.UserID.Value);
    string userName = queryJson.UserName.Value;
}

//utility function:
public static dynamic ParseHttpGetJson(string query)
{
    if (!string.IsNullOrEmpty(query))
    {
        try
        {
            var json = query.Substring(7, query.Length - 7); //seperate ?data= characters
            json = System.Web.HttpUtility.UrlDecode(json);
            dynamic queryJson = JsonConvert.DeserializeObject<dynamic>(json);

            return queryJson;
        }
        catch (System.Exception e)
        {
            throw new ApplicationException("can't deserialize object as wrong string content！", e);
        }
    }
    else
    {
        return null;
    }
} 
```

# c# - Executing Code behind before Xaml Rendering - How to influence the sequence

> ID：15814163
> 
> 赞同：0
> 
> 时间：2013-04-04T14:31:48.137
> 
> 标签：c#, multithreading, silverlight, xaml

I'm working on a Windows Phone App. I have a very performance intensive method which takes several seconds until the operation is done.

When the method is called I want to show an animated loading symbol which is defined in the xaml of my view. When the operation is finished it should disappear. I set the loading symbol to visible in the first line of this method.In the last line I set the visibility to collapsed.

The problem is that at first the whole code behind will be executed. Unfortunately nothing is to be seen, because the the visibiliy is set to visible after the code behind operations are executed and in the same moment its set to collapsed.

Has anybody an idea how to solve this problem? Thanks so much in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:43:29.573

您遇到的问题是您在主（UI）线程上调用您的方法。*这意味着您的方法阻止了 UI 刷新，也*意味着（如您所述）在 UI刷新时，您已经再次隐藏了图标。

您需要做的是在后台线程上调用您的方法（有多种方法可以处理此问题）。您需要将 UI 更新推送到 UI 线程（使用`Dispatcher.Invoke`），但您的方法的其余部分将在单独的线程上运行。

您还需要使用某种回调 - 可能是自定义事件 - 以便您的 UI 线程知道后台线程何时完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T14:46:25.030

在没有看到代码的情况下很难确定，但是如果您在设置繁忙指示器后使用调度程序运行密集代码，这将允许在运行代码之前更改 ui 线程时间。

一个例子

```
//This assumes you are binding in xaml to the isbusy and it implements INotifyPropertyChanged
IsBusy = true;
Dispatcher.BeginInvoke(()=>{ //...performance intense here
}); 
```

Dan Puzey 说的是对的。如果出于某种原因需要，您应该只在 UI 线程上运行此逻辑。即便如此，也要小心这一点，因为它会导致糟糕的用户界面体验。

您可以完成此操作并在需要时仍然启动调度程序的一种方法是将调度程序的副本传递到后台。

```
ThreadPool.QueueUserWorkItem (d => {
    //...performance intense here
    Dispatcher dispatcher = d as Dispatcher;
    if(dispatcher != null){
         dispatcher.BeginInvoke()()=>{//...ui updates here }
    }

}, Dispatcher.CurrentDispatcher);//make sure this is called from your UI thread or you may not end up with the correct dispatcher 
```

# automapper - 如何为 Automapper 创建更通用的解析器？

> ID：15814169
> 
> 赞同：2
> 
> 时间：2013-04-04T14:32:06.173
> 
> 标签：automapper

对于某些属性，当值为 0 时，我想将值转换为 NULL。

创建地图时，我使用自定义解析器为我处理转换，如下所示：

```
AutoMapper.Mapper.CreateMap<ContactData, Contact>()
     .ForMember(x => x.ContactTypeId, y => y.ResolveUsing<ContactTypeIdZeroToNullResolver>()); 
```

我的解析器看起来像：

```
using AutoMapper;

namespace MyCompany.MyProduct.Customers.Data.Helpers
{
    public class ContactTypeIdZeroToNullResolver : ValueResolver<ContactData, int?>
    {
        protected override int? ResolveCore(ContactData source)
        {
            if (source.ContactTypeId == 0)
                return null;

            return source.ContactTypeId;
        }
    }
} 
```

这工作得很好！

我的问题是，是否有可能使这个更通用？我尝试用 int 替换 ContactData，但不断抛出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:27:54.463

像这样的东西怎么样：

```
AutoMapper.Mapper.CreateMap<int, int?>()
    .ConvertUsing(src => src == 0 ? (int?)null : src);

AutoMapper.Mapper.CreateMap<ContactData, Contact>();

AutoMapper.Mapper.AssertConfigurationIsValid(); 
```

（当然假设这`ContactTypeId`是一个`int`in`ContactData`和一个`int?`in `Contact`）

您应该小心这一点，因为它将适用于这些类型的所有映射。

你也可以像这样内联它：

```
AutoMapper.Mapper.CreateMap<ContactData, Contact>()
    .ForMember(dest => dest.ContactTypeId,
                       opt => opt.MapFrom(src => src.ContactTypeId == 0
                            ? (int?)null
                            : src.ContactTypeId)); 
```

这将实现相同的目标，但不会那么通用。

# javascript - 自调用匿名函数相互覆盖

> ID：15814172
> 
> 赞同：0
> 
> 时间：2013-04-04T14:32:15.440
> 
> 标签：javascript, javascript-objects

我正在使用自调用匿名函数同时创建对象和实例。最后创建的对象会覆盖第一个对象的属性。这是为什么？

```
<script>
    LF = '<br/>'; //line feed

    // object a with property name
    !function () {
        window.a = this; // make global object

        this.name = 'a';

        document.write('inside: a.name=' + this.name + LF);
    }();

    // object b with property name
    !function () {
        window.b = this; // make global object

        this.name = 'b';

        document.write('inside: b.name=' + this.name + LF);
    }();

    document.write('outisde: ' + ' a.name=' + a.name + ' b.name=' + b.name + LF);

</script> 
```

结果：

```
inside: a.name=a 
inside: b.name=b 
outisde: a.name=b b.name=b 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T14:33:38.587

因为在你的情况下`window === this`and 。在这里阅读更多：http: [//unschooled.org/2012/03/understanding-javascript-this/](http://unschooled.org/2012/03/understanding-javascript-this/)`window === a``window === b`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:34:08.690

在您的两个函数中，`this`是`window`. 所以在*两个*函数中`this.name`引用*相同*的变量。

# c++ - Can't run app coz configuration is incorrect (Proxy.Jobs) c++

> ID：15814179
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:32:27.707
> 
> 标签：c++, module

I have app which I think needs Microsoft c++ libraries. This app makes a proxy, and probably uses proxy jobs module ( C ). I need to add only this proxy jobs module or files make this work, without installing Microsoft Visual C++ 2008 Redistributable Package (x86), because application needs to be open as a "Guest" without admin rights, and I can' instal that package. Anyone have solution for this problem? I was trying to find only the proxy jobs module but without success. When I try to run this app I get an error: `Can't run this application because configuration is incorrect.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:13:40.730

I checked by tasklist command: tasklist /m /fi "IMAGENAME eq applicationame.exe" >C:/result.txt

I got result file: ntdll.dll, wow64.dll, wow64win.dll, wow64cpu.dll
So these dll's dosent exists in [http://msdn.microsoft.com/en-gb/library/vstudio/8kche8ah.aspx](http://msdn.microsoft.com/en-gb/library/vstudio/8kche8ah.aspx) and i think they're included in Windows Os, so any another idea why on another xp i got this error?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:52:34.857

对运行时库使用静态链接。在 Visual Studio 2010 中（其他版本应该类似），进入这个配置设置：

> 项目属性 > 配置属性 > C/C++ > 代码生成 > 运行时库。

对于 Debug 配置，将其更改为 Multi-threaded Debug ( `/MTd`)，对于 Release，将其更改为 Multi-threaded ( `/MT`)。

构成最终可执行文件的所有项目和依赖项都需要使用该`/MT`选项进行编译才能正常工作。

# ruby - 在 If, Else 语句中测试正则表达式

> ID：15814180
> 
> 赞同：2
> 
> 时间：2013-04-04T14:32:27.770
> 
> 标签：ruby, regex

我想我已经接近了，但正则表达式没有评估。希望有人知道原因。

```
def new_title(title)
  words = title.split(' ')
  words = [words[0].capitalize] + words[1..-1].map do |w|
    if w =~ /and|an|a|the|in|if|of/
      w
    else
      w.capitalize
    end
  end
  words.join(' ')
end 
```

当我传入小写标题时，它们会以小写形式返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:36:47.123

您需要正确锚定正则表达式：

```
new_title("the last hope")
# => "The last Hope" 
```

这是因为`/a/`匹配一个带有 an 的单词`a`。`/\Aa\Z/`匹配一个完全由 , 组成的字符串`a`，并`/\A(a|of|...)\Z/`匹配一组单词。

无论如何，您可能想要的是：

```
case (w)
when 'and', 'an', 'a', 'the', 'in', 'if', 'of'
  w
else
  w.capitalize
end 
```

在这里使用正则表达式有点笨拙。你想要的是一个排除列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:44:37.033

这被称为 titleize，并且是这样实现的：

```
def titleize(word)
  humanize(underscore(word)).gsub(/\b('?[a-z])/) { $1.capitalize }
end 
```

[查看文档。](http://apidock.com/rails/ActiveSupport/Inflector/titleize)

如果你想要花哨的titlezing，请查看[granth's titleize](https://github.com/granth/titleize)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:43:05.897

您的正则表达式应该检查整个单词 ( `^word$`)。无论如何，使用起来并不简单`Enumerable#include?`：

```
def new_title(title)
  words = title.split(' ')
  rest_words = words.drop(1).map do |word|
    %w(and an a the in if of).include?(word) ? word : word.capitalize
  end
  ([words[0].capitalize] + rest_words).join(" ")
end 
```

# javascript - Dojo：option[selected ='selected'] 不适用于运行时更改

> ID：15814181
> 
> 赞同：1
> 
> 时间：2013-04-04T14:32:28.873
> 
> 标签：javascript, html, dojo

我正在处理一个多选框并发现

```
var count = dojo.query("option[selected ='selected']", dojo.byId('select_id')).length; 
```

始终从页面（数据库）返回任何原始内容，但仍返回用户在运行时选择的内容。我在 Dojo 1.6 上运行。那么如何在运行时从多选框中计算所选选项的数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:16:31.323

我做了一个页面，显示用户和他们所在的组。这是一些代码。我不得不撕掉一些东西以使其简洁。最后一行代码回答了这个问题。它返回一个包含检查值的数组。

```
// Programattically create the select.
var _groups = new dojox.form.CheckedMultiSelect({
    multiple : true,
    class : "cssThing"
}, "groups" + _userNumber);

// Fill the CheckedMultiSelect boxes with unchecked data.
var tempArray = new Array();
dojo.forEach(groupList, function(row, index) {
    tempArray.push({
        value : row.value,
        label : row.label,
        selected : false,
    });
});
_groups.addOption(tempArray);

// Populate the CheckedMultiSelect with an array.
var tempArray = [];
dojo.forEach(user.groups, function(row) {
    tempArray.push(String(row.groupName));
});
_groups.set('value', tempArray);

// Get the CheckedMultiSelect values as an array.
_groups.get('value'); 
```

# javascript - 使 CSS 缩放到移动视图的最佳方法

> ID：15814185
> 
> 赞同：2
> 
> 时间：2013-04-04T14:32:35.047
> 
> 标签：javascript, jquery, html, css

任何人都可以提供一些提示，说明如何在查看/调整到移动视口时有效地将我的 CSS 缩小到适当的文档布局？

我记得读过关于在 CSS 框上使用百分比的文章，但是当我尝试这个时，我无法正确堆叠。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:38:54.140

据我所知，metadept 的回答是解决这个问题的最佳方法。但与大多数事情一样，你不应该在不需要的时候重新发明轮子。碰巧有很好的 CSS 框架可以使用媒体查询构建响应式网站。我个人最喜欢的是[Bootstrap](http://twitter.github.com/bootstrap/)。您特别感兴趣的是[脚手架部分。](http://twitter.github.com/bootstrap/scaffolding.html)

通过将正确的类附加到您的元素，您可以在各种显示模式（桌面、平板电脑等）中重新排列事物，并且默认情况下它会自动对布局进行一些非常智能的事情。

其他不错的选择（感谢 metadept 建议我添加这些）是[Zurb Foundation](http://foundation.zurb.com/)和[960 Grid System](https://stackoverflow.com/users/2133379/metadept)。

使用这些框架中的任何一个，不要忘记将其添加到您的`head`!

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

这迫使网页以许多现代智能手机的宽度显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:35:20.647

您应该阅读[CSS Media Queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)。这些允许您为高于/低于特定宽度、高度和纵横比的屏幕设置条件样式。

正如其他人所提到的，有许多响应式网格框架（参见 jmeas 的回答）可以为您处理这个问题。是否要使用它们取决于您的部署要求以及您想要自定义布局的程度。

# c# - 您可以初始化一个抽象类，以便稍后将其设置为子类吗？

> ID：15814193
> 
> 赞同：0
> 
> 时间：2013-04-04T14:33:00.897
> 
> 标签：c#, abstract-class

这就是我想要做的：

```
abstract class BaseAnimal;
class cat : BaseAnimal;
class dog : BaseAnimal;

var allAnimals = new list<BaseAnimal>();

foreach (var someVar in allVars)
{
    var myAnimal = new BaseAnimal();

    if (someVar == true)
    {
        myAnimal = new cat();
    }
    else
    {
        myAnimal = new dog();
    }

    /* do other things with myAnimal var */
    allAnimals.add(myAnimal);
} 
```

有没有办法做这样的事情，还是我必须在每个 IF 语句中初始化变量，然后复制其他东西/把它放在一个函数中并调用它两次？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T14:34:49.813

只需声明变量而不给它赋值：

```
BaseAnimal myAnimal; 
```

为什么要给*它*分配一个值，知道该值无论如何都会被立即覆盖？

请注意，在您的情况下，无论如何，变量肯定会在语句之后*分配*`if/else`，所以这不是问题 - 在将项目添加到列表时，您仍然可以读取变量值。

当然，您也可以考虑使用条件运算符：

```
var myAnimal = someVar ? (BaseAnimal) new Cat() : new Dog(); 
```

由于条件运算符的工作方式，这里`BaseAnimal`只需要转换为 - 表达式的整体类型必须*是*第二个参数的类型*或*第三个参数的类型。

编辑：如果您需要设置特定于动物的属性，最简单的方法是在`if`语句中使用对象初始化器：

```
if (someVar)
{
    myAnimal = new Cat { Lives = 9 };
}
else
{
    myAnimal = new Dog { Shaggy = true };
} 
```

如果你需要调用它的方法，你需要一个单独的特定类型的局部变量：

```
if (someVar)
{
    Cat cat = new Cat();
    cat.Groom();
    myAnimal = cat;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:34:57.467

在这种情况下，您不会对其进行初始化（或者您会将其初始化为 null），但是是的，您的要求是可能的。

```
BaseAnimal myAnimal;

if (someVar) {
    var myCat = new cat();

    // Do things with myCat that are cat-specific.

    myAnimal = myCat;
} else {
    var myDog = new dog();

    // Do things with myDog that are dog-specific.

    myAnimal = myDog;
}

allAnimals.add(myAnimal); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:36:29.523

你不能

```
 var myAnimal = new BaseAnimal(); 
```

编译器不会让你这样做。但是，您可以将派生程度更高的类转换为派生程度较低的类，例如

```
BaseAnimal ba = myDog; 
```

您可以按照自己的方式拥有列表，并且可以添加其他动物，例如`Cat`s 和`Dog`s like

```
allAnimals.Add(myDog); 
```

# ruby-on-rails - 如何具有与“参数”功能相同的行为？

> ID：15814204
> 
> 赞同：0
> 
> 时间：2013-04-04T14:33:27.820
> 
> 标签：ruby-on-rails, ruby-on-rails-2

控制器功能接收参数，如

```
{"v1" => { "v2" => "1", "v3" => "" }, "v4" => "true"} 
```

该`params`功能允许使用

*   `x = params[:v1]`， 相当于`x = params["v1"]`
*   `if params[:v4]`， 相当于`["true", "1"].include?(params["v4"])`
*   `if (params[:v1][:v2] == 1)`， 相当于`params["v1"]["v2"] == "1"`

有没有什么方法可以让行为比`params`功能更重要，但使用其他数据？

我希望能够写出这样的东西......

```
my_params = {"v1" => { "v2" => "1", "v3" => "" }, "v4" => "true"}
x = my_params[:v1]
if my_params[:v4]
if (my_params[:v1][:v2] == 1) 
```

或者带一个功能`some_function`

```
x = some_function(my_params)[:v1]
if some_function(my_params)[:v4]
if some_function(my_params)[:v1][:v2] == 1) 
```

**我在Rails 2中。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:37:42.117

你想要一个[访问无关紧要的哈希](http://apidock.com/rails/Hash/with_indifferent_access)：

```
h = { a: { b: 1, 'c' => 2 } }
=> {:a=>{:b=>1, "c"=>2}}
h[:a][:c]
=> nil

h2 = h.with_indifferent_access
=> {"a"=>{"b"=>1, "c"=>2}}

h2['a'][:c]  
=> 2
h2[:a][:c]
=> 2 
```

# sql-server - 从 SQL 写入文件的权限

> ID：15814207
> 
> 赞同：1
> 
> 时间：2013-04-04T14:33:41.560
> 
> 标签：sql-server

我正在尝试从 SQL 保存 XML 文件。我正在做类似的事情：

```
DECLARE @FileName VARCHAR(100)
DECLARE @db VARCHAR(100)
DECLARE @SQLCmd VARCHAR(1000)

SELECT  @FileName = 'D:\ProductsList.xml'
SELECT  @db='MyBase.dbo.'

SELECT  @SQLCmd = 'bcp "SELECT '+@db+'ArticleName FROM '+@db+' ARTICLES' +
                   ' FOR XML PATH(''Product''),ELEMENTS, ROOT(''Products''), TYPE "' +
                   ' queryout '+@FileName +' -w -T -S' + @@SERVERNAME 

EXECUTE master..xp_cmdshell @SQLCmd 
```

对我来说，一台 sql 服务器可以正常工作，但另一台却失败了。我收到消息“错误 = [Microsoft][SQL Server Native Client 11.0]无法打开 BCP 主机数据文件”。

不幸的是，Bcp、queryout、cmdshell 对我来说都是新的。

我正在阅读很多网站，它们都有一些有趣的信息，但我真的不知道如何开始。

他们说 - 为运行脚本的用户添加权限。但是，如果不是我，这个用户是谁？;) 是否为运行 SQL Server 创建了一些“自动”Windows 用户或什么？我在哪里可以看到这个用户并配置他的权限以便它可以保存我的文件？

或者也许我应该知道 bcp 和 cmdshell 的其他一些问题？

非常感谢您的帮助。我真的被困住了:(

# maven-2 - 有谁知道 COMETD 和 JERSEY 9 之间是否有任何不兼容？我认为 Jetty 的最新版本不兼容

> ID：15814210
> 
> 赞同：0
> 
> 时间：2013-04-04T14:33:49.303
> 
> 标签：maven-2, websocket, embedded-jetty, cometd

在尝试将 maven 配置为使用最后一个 Jetty 版本（嵌入式 JETTY 9）后，我尝试使用 cometd（最后一个版本是 2.5.1），我发现它无法正常工作。

正如您在下面看到的，编译失败似乎是由于类型 9.0.0.v20130308 加上 artifactID cometd-websocket-jetty 的 2.5.1 版本。

老实说，我无法理解改进 websocket 的新 Jetty 版本怎么可能不起作用，我想我做错了什么，所以如果有人知道或已经做到了，请告诉我我该怎么做修理它。

顺便说一句，我使用 jdk 1.7.0_09。

```
`[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory
...\apps\business-app\src\main\resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ SOKO-business ---
[INFO] Compiling 79 source files to 
...\apps\business-app\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] ...\apps\business-app\src\main\java\com\igz\soko\business\Main.java:[38,12]         **error: cannot access ContainerLifeCycle**
[ERROR] ...\apps\business-app\src\main\java\com\igz\soko\business\Main.java:[59,14] **error: method start in class Server cannot be applied to given types;**
[INFO] 2 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.936s
[INFO] Finished at: Thu Apr 04 16:12:19 CEST 2013
[INFO] Final Memory: 14M/177M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-     plugin:2.3.2:compile (default-compile) on project SOKO-business: Compilation failure:    Compilation failure:
[ERROR] ...\bbv97\apps\business-app\src\main\java\com\igz\soko\business\Main.java:   [38,12] error: cannot access ContainerLifeCycle
[ERROR] ...\bbv97\apps\business-app\src\main\java\com\igz\soko\business\Main.java:  [59,14] error: method start in class Server cannot be applied to given types;` 
```

干杯！

D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:14:34.967

CometD 2.x 与 Jetty 9 不兼容。您可以使用 JDK 5 或更高版本在 Jetty 7 和 Jetty 8 上运行 CometD 2.x。

CometD 3 与 Jetty 9 兼容，很快就会有 CometD 3 预览版。

# directx - 数据何时复制到 GPU 内存？

> ID：15814211
> 
> 赞同：-2
> 
> 时间：2013-04-04T14:33:55.930
> 
> 标签：directx, shader, directx-11, directcompute

我的程序中有一些众所周知的步骤：

```
CreateBuffer

Create..View

CSSet..Views

Dispatch 
```

数据是在哪一步复制到 GPU 上的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:33:50.960

[DirectX 为您管理内存](http://msdn.microsoft.com/en-us/library/windows/desktop/ee418784%28v=vs.85%29.aspx#managed_resources)，并在需要时将数据复制到 GPU。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:12:32.197

他们投反对票的原因是因为看起来你似乎没有在谷歌搜索上付出任何努力。

答： DirectX 通常在调用创建方法时将数据从系统内存传输到显存。创建方法的一个示例是“ID3D11Device::CreateBuffer”。此方法需要一个指向数据所在内存位置的指针，以便可以将其从系统 RAM 复制到视频 RAM。但是，如果传入的指针是空指针，那么它只是将空间量设置到一边，以便您以后可以复制它。

例子：

如果您创建了一个动态顶点缓冲区并且一开始没有传入数据，那么您将不得不使用 map/unmap 将数据复制到视频内存中。

```
// Fill in a buffer description.
  D3D11_BUFFER_DESC bufferDesc;
  bufferDesc.Usage            = D3D11_USAGE_DYNAMIC;
  bufferDesc.ByteWidth        = sizeof(Vertex_dynamic) * m_iHowManyVertices;
  bufferDesc.BindFlags        = D3D11_BIND_VERTEX_BUFFER;
  bufferDesc.CPUAccessFlags   = D3D11_CPU_ACCESS_WRITE;
  bufferDesc.MiscFlags        = 0;
  bufferDesc.StructureByteStride = NULL;

  // Fill in the subresource data.
  D3D11_SUBRESOURCE_DATA InitData;
  InitData.pSysMem = &_vData[0];
  InitData.SysMemPitch = NULL;
  InitData.SysMemSlicePitch = NULL;

  // Create the vertex buffer.
/*Data is being copyed right now*/
 m_pDxDevice->CreateBuffer(&bufferDesc, &InitData, &m_pDxVertexBuffer_PiecePos); 
```

# java - 设置 Box 的大小

> ID：15814216
> 
> 赞同：1
> 
> 时间：2013-04-04T14:34:12.297
> 
> 标签：java, swing, jpanel, jscrollpane, border-layout

这似乎是一个愚蠢的问题，但我想在我的 jFrame 中更改“框”的大小。我将包括代码和图片。

这是 JTableResultSet 类：

```
import java.sql.*;
import java.util.*;
import javax.swing.*;
import javax.swing.table.TableColumn;

public class JTableResultSet {
    public static void main(String[] args) {
        Vector columnNames = new Vector();
        Vector data = new Vector();
        JPanel panel = new JPanel();   //
        try {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost/exper482_social", "admin", "testing");
            String sql = "Select username, forename, lastname, password from social_users";
            Statement statement = con.createStatement();
            ResultSet resultSet = statement.executeQuery(sql);
            ResultSetMetaData metaData = resultSet.getMetaData();
            int columns = metaData.getColumnCount();
            for (int i = 1; i <= columns; i++) {
                columnNames.addElement(metaData.getColumnName(i));
            }
            while (resultSet.next()) {
                Vector row = new Vector(columns);
                for (int i = 1; i <= columns; i++) {
                    row.addElement(resultSet.getObject(i));
                }
                data.addElement(row);
            }
            resultSet.close();
            statement.close();
        } catch (Exception e) {
            System.out.println(e);
        }
        JTable table = new JTable(data, columnNames);
        TableColumn column;
        for (int i = 0; i < table.getColumnCount(); i++) {
            column = table.getColumnModel().getColumn(i);
            column.setMaxWidth(250);//250
        }
        JScrollPane scrollPane = new JScrollPane(table);        
        panel.add(scrollPane);       
        JFrame frame = new JFrame();
        frame.add(panel);//adding panel to the frame
        frame.setSize(600, 400); //setting frame size 600 400
        frame.setVisible(true);  //setting visibility true
    }
} 
```

这是照片：

[http://i.stack.imgur.com/Wblfx.png](http://i.stack.imgur.com/Wblfx.png)

有人能告诉我我能做些什么来让盒子变大吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:39:42.117

您可以使用`BorderLayout`which 将`JScrollPane`占据整个区域`JPanel`

```
JPanel panel = new JPanel(new BorderLayout()); 
```

默认的 JPanel 布局`FlowLayout`使用组件的首选大小，该大小不会扩展以填充窗口。

阅读[布局管理器指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

# javascript - 使用 jquery 和 tablesorter，更改所选单元格的值

> ID：15814217
> 
> 赞同：1
> 
> 时间：2013-04-04T14:34:12.273
> 
> 标签：javascript, jquery, tablesorter

我有一个 tablesorter 表，可以正确填写。我要做的是确保单元格的编辑量不超过原始值的 10%。例如，如果第一行第一个单元格中的价格字段（由 id #price 表示）设置为 6.00，下一行中的下一个金额为 5.00，我希望能够更改其中一个价格，或同时更改两者，但不超过 10%（例如 6 变为 6.60）。这是我到目前为止所拥有的：

```
$('#tally tr').live ('click', function(){
    var tempPrice =0;
    tempPrice = $(this).find('#price').val();
    // Which selects the correct row and price field and will store that value in tempPrice.
    $('#price').change(function(){
        var pnew =0;
        $('#tally tbody tr').each(function() {
            if ($('#price').val() > (tempPrice*1.1)){
                pnew = tempPrice*1.1;
                $('#price').val(pnew.toFixed(2));
                alert("Your cannot raise the price by more than 10%");
            }
        }); //end of tbody tr function
    }); // end of change function
}); // end of new price change function 
```

更改价格并确保不超过 10%。这些功能可以更改第一个单元格，但是如果我要更改第二个单元格，我无法使价格更改功能起作用。另外，好像这还不够复杂，如果我先尝试更改第二个单元格，然后尝试第一个单元格，它会保留`pnew`第二个单元格的价格，然后将使用该数字更新表格（5 如上面的示例），然后它将使用正确的数字（6.60）更新单元格。

我如何让它按照我需要的方式工作？编辑：价格可以根据用户的需要降低，只是不会提高超过 10%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:51:28.253

首先你应该有3个变量，一个存储价格，一个是上限（*1.1），一个是下限（*0.9）。

然后，您需要使用`$('input').focus()`获取原始值并`$('input').blur()`在用户完成后运行验证。

问题是当您有多个输入时，很难跟踪用户可以点击的临时价格值，因此您需要一个变量来跟踪最近的输入选择器，以便模糊可以验证这一点。

```
var $current_element;
var temp_price;
var l_price;
var h_price;

$('input').focus(function() {
    $current_element = $(this);
    temp_price = $(this).value();
});

$('input').blur(function() {
    var value = $current_element.value();
    h_price = value * 1.1;
    l_price = value * 0.9;
    // Do validation of prices here and then either alert() 
    // or set $current_element.value(temp_price)
    // If validation fails call $current_element.focus() to return the user there
}); 
```

否则请查看此选项：[https ://stackoverflow.com/a/10393958/1160747](https://stackoverflow.com/a/10393958/1160747)

哦，正如其他人提到的那样...... ID 应该对一个元素是唯一的，对多个元素使用类！

# data-structures - 在嵌套字典中设置值时遇到问题

> ID：15814218
> 
> 赞同：1
> 
> 时间：2013-04-04T14:34:13.120
> 
> 标签：data-structures, dictionary, tcl

我正在编写一个 TCL 脚本来解析 Firebug 分析控制台的 HTML 输出。首先，我只想累积每个文件的方法调用次数。为此，我正在尝试使用嵌套字典。我似乎得到了第一级正确（其中文件是键，方法是值），但不是第二级，嵌套级别，其中方法是值，计数是键。

我已经阅读了字典的更新命令，所以我愿意使用它进行重构。我的 TCL 使用时断时续，因此在此先感谢您的帮助。下面是我的代码和一些示例输出

```
foreach row $table_rows {
    regexp {<a class="objectLink objectLink-profile a11yFocus ">(.+?)</a>.+?class=" ">(.+?)\(line\s(\d+)} $row -> js_method js_file file_line

    if {![dict exists $method_calls $js_file]} {
        dict set method_calls $js_file [dict create]
    }

    set file_method_calls [dict get $method_calls $js_file]

    if {![dict exists $file_method_calls $js_method]} {
        dict set file_method_calls $js_method 0
        dict set method_calls $js_file $file_method_calls
    }

    set file_method_call_counts [dict get $file_method_calls $js_method]
    dict set $file_method_calls $js_method [expr 1 + $file_method_call_counts]
    dict set method_calls $js_file $file_method_calls
}

dict for {js_file file_method_calls} $method_calls {
    puts "file: $js_file"
    dict for {method_name call_count} $file_method_calls {
        puts "$method_name: $call_count"
    }
    puts ""
} 
```

输出：

```
file: localhost:50267
(?): 0
e: 0

file: Defaults.js
toDictionary: 0
(?): 0
Renderer: 0

file: jquery.cookie.js
cookie: 0
decoded: 0
(?): 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:01:09.177

该`dict set`命令与 Tcl 中的任何 setter 一样，将变量*名*作为其第一个参数。我敢打赌：

```
dict set $file_method_calls $js_method [expr 1 + $file_method_call_counts] 
```

真的应该读：

```
dict set file_method_calls $js_method [expr {1 + $file_method_call_counts}] 
```

^(（另外，为速度和安全做好准备。）)

# elasticsearch - 弹性搜索：将漂亮的格式设为默认

> ID：15814220
> 
> 赞同：8
> 
> 时间：2013-04-04T14:34:17.367
> 
> 标签：elasticsearch

有没有办法让`curl`命令的 JSON 输出默认打印得漂亮？也就是说，如果不指定`?pretty=true`curl URL 的选项，是否可以每次都显示漂亮打印的输出？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T18:01:12.227

我可以通过向我的 .bashrc （或 Mac 上的 .bash_profile ）添加一个新别名来实现这一点：

```
alias pp='python -mjson.tool' 
```

然后，通过打开新终端或运行重新加载 .bashrc / .bash_profile 配置后

```
$ source ~/.bashrc 
```

您可以将 curl 输出通过管道传递到“pp”别名，如下所示：

```
$ curl -XGET http://localhost:9200/_search | pp 
```

资料来源：[http ://ruslanspivak.com/2010/10/12/pretty-print-json-from-the-command-line/](http://ruslanspivak.com/2010/10/12/pretty-print-json-from-the-command-line/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T11:55:38.463

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T15:15:12.953

在大多数情况下，您使用来自其他产品（JQuery、PHP、Perl、Ruby...）的 REST API。这些框架不需要有漂亮的输入。因此，我假设在 99% 的请求中，您不希望通过漂亮呈现 JSON来*减慢请求速度。*

恕我直言，您只需要在调试或开发模式下进行漂亮的打印。

一个选项可能是将其作为`elasticsearch.yml`文件中的弹性搜索属性。[为它打开一个问题](https://github.com/elasticsearch/elasticsearch/issues/new)？

# jquery - 确定 Bootstrap 可折叠元素的折叠状态

> ID：15814222
> 
> 赞同：4
> 
> 时间：2013-04-04T14:34:18.263
> 
> 标签：jquery, twitter-bootstrap, collapse

我会向用户显示警报，直到货件的密度超过某个值。当页面加载时，会运行一个处理所有这些计算的函数（以防用户加载某些内容而不是从头开始），如果密度小于 X，则显示折叠，否则隐藏。

问题是，当在已经隐藏/显示的元素上调用 .collapse('hide') 或 .collapse('show') 时，会导致它执行相反的操作。

我这样定义我的警报：

```
<div class="row spacer-bottom collapse in" id="cubicCapacityWarn">

    <div class="span8 offset1">

        <div class="alert alert-error">
            <h4><strong>Cubic Capacity Warning!</strong></h4>
            Shipment Total PCF less than 6, you may be assessed Cubic Capacity surcharges!
        </div>

    </div>

</div> 
```

处理所有这些的 jQuery：

```
function updateTotals() {

    var total_weight, total_volume, total_density;

    total_weight = 0;
    total_volume = 0;
    total_density = 0;

    $('#units').find('table.unit').each(function(index){

        var weight, volume, density;

        weight = 0;
        volume = 0;
        density = 0;

        volume = parseFloat($(this).find('.unit_cube').text(), 10);

        $(this).find('tbody.products tr').each(function(pIndex){

            weight += parseFloat($(this).find('.weight').text(), 10);

        });

        density = weight / volume;
        density = density.toFixed(2);

        $(this).find('.unit_density').text(density);

        total_weight += (weight * parseInt($(this).find('.unit_num_of').text(), 10));
        total_volume += (volume * parseInt($(this).find('.unit_num_of').text(), 10));

    });

    total_density = total_weight / total_volume;

    $('#total_weight').text(total_weight.toFixed(2));
    $('#total_volume').text(total_volume.toFixed(2));
    if(isNaN(total_density.toFixed(2))) {
        $('#total_density').text("0.00").trigger('change');
    } else {
        $('#total_density').text(total_density.toFixed(2)).trigger('change');
    }

}

$('#cubicCapacityWarn').collapse({toggle: false})

$('#cubicCapacityWarn').on('shown', function(event){
    event.stopPropagation();
    return false;
});

$('#cubicCapacityWarn').on('hidden', function(event){
    alert('hidden')
    event.stopPropagation();
    return false;
});

$('#total_density').change(function(){

    if(parseFloat($(this).text()) < 6) {

        $('#cubicCapacityWarn').collapse('show');
        alert('show')

    } else {

        $('#cubicCapacityWarn').collapse('hide');

    }

});

updateTotals(); 
```

我想通过在调用 .collapse('show'|'hide') 之前测试它是否已经折叠来解决这个问题，但我不知道如何。如果这个问题有更优雅的解决方案，我很想听听。

另外，我发现了这个问题[如果第一次调用折叠是隐藏，则可折叠将显示](https://github.com/twitter/bootstrap/issues/5859)在这里，这似乎是相关的，但我添加了`$('#...').collapse({toggle: false});`没有效果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-08-30T18:55:42.787

我知道这是一篇较旧的帖子，但我也一直停留在这个帖子上。所以使用 bootstrap 4.1 我用它来检查手风琴的状态：

```
var isVisible = $('#collapseOne').is( ":visible" );
alert(isVisible); 
```

反之，如果你想检查它是否被隐藏：

```
var isHidden = $('#collapseOne').is( ":hidden" );
alert(isHidden); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-12T15:49:20.407

例如，我使用它来确定元素 collapseTwo 是否关闭，然后打开它。当然，反过来也可以。

```
if ($('#collapseTwo').attr('aria-expanded') == "false") {$('#collapseTwo').collapse('show');} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-01T21:56:58.807

另一种选择：检查它是否缺少`.in`课程。

```
if(!$('#collapseTwo').hasClass('collapse in')){
   $('#collapseTwo').collapse('show');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T16:32:53.753

以下似乎是有效的，虽然我很想看到一个更好的答案或解决方案，但我正在做的事情感觉很老套，可能会让大多数 jQ 开发人员畏缩。

基本上，我现在在 updateTotals() 函数中显示/隐藏警报。我从使用崩溃*后发生的显示/隐藏事件更改为现在使用在崩溃发生**之前*触发的那些事件。我测试一下坍塌的高度是否是我所期望的，因为我将要做的事情（如果我要展示它但高度> 0，它必须已经展示），如果它未能通过此健全性检查，我`return false`似乎*正在*取消触发事件（我希望）或类似的事情，因为目前，除非有我没有测试的情况，否则它应该正常工作。尝试在显示警报时显示警报不会隐藏它，反之亦然。

```
function updateTotals() {

    var total_weight, total_volume, total_density;

    total_weight = 0;
    total_volume = 0;
    total_density = 0;

    $('#units').find('table.unit').each(function(index){

        var weight, volume, density;

        weight = 0;
        volume = 0;
        density = 0;

        volume = parseFloat($(this).find('.unit_cube').text(), 10);

        $(this).find('tbody.products tr').each(function(pIndex){

            weight += parseFloat($(this).find('.weight').text(), 10);

        });

        density = weight / volume;
        density = density.toFixed(2);

        $(this).find('.unit_density').text(density);

        total_weight += (weight * parseInt($(this).find('.unit_num_of').text(), 10));
        total_volume += (volume * parseInt($(this).find('.unit_num_of').text(), 10));

    });

    total_density = total_weight / total_volume;

    $('#total_weight').text(total_weight.toFixed(2));
    $('#total_volume').text(total_volume.toFixed(2));
    if(isNaN(total_density.toFixed(2))) {
        $('#total_density').text("0.00").trigger('change');
    } else {
        $('#total_density').text(total_density.toFixed(2)).trigger('change');
    }

    if((total_density.toFixed(2) < 6) || isNaN(total_density.toFixed(2))) {
        $('#cubicCapacityWarn').collapse('show');
    } else {
        $('#cubicCapacityWarn').collapse('hide');
    }

}

$('#cubicCapacityWarn').collapse({toggle: false})

$('#cubicCapacityWarn').on('show', function(event){

    if($(this).height() > 0) {
        return false;
    }

    console.log('shown');
    event.stopPropagation();

});

$('#cubicCapacityWarn').on('hide', function(event){

    if($(this).height() == 0) {
        return false;
    }

    console.log('hidden');
    event.stopPropagation();
}); 
```

# c# - 如何在桌面背景变暗的情况下显示表单？

> ID：15814223
> 
> 赞同：-2
> 
> 时间：2013-04-04T14:34:20.797
> 
> 标签：c#, winforms

我想显示要显示的 winform，但是表单将处于正常状态（未最大化）。但是，我想调暗桌面背景以引起用户注意。

背景变暗的最大化形式是一种选择，但我不想最大化形式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:39:13.757

> 背景变暗的最大化形式是一种选择

首先，如果形式被最大化，那么对背景做任何事情都是没有意义的，因为它是看不见的。

> 我想调暗桌面背景以引起用户注意

这弄乱了操作系统设置，我什至不确定这是否可能*，*而且肯定是*不可取*的。作为用户，我*永远不会*希望应用程序与我的其他正在运行的程序或我的操作系统设置/首选项发生冲突。

简而言之，你想要的东西是不可能的（至少没有一些讨厌的代码），这不是好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:37:24.263

我不认为你可以改变背景，以及我认为你不应该。

我会尝试打开带有大不透明（或半透明）边框的“最大化”表单。

可能[这](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.region.aspx)会有所帮助

# ios - iOS 标签栏图标点击事件

> ID：15814225
> 
> 赞同：0
> 
> 时间：2013-04-04T14:34:36.893
> 
> 标签：ios, xcode, ios6, click, tabbar

我正在尝试在按下选项卡栏按钮/图标时执行一些代码 - 即使该按钮/图标当前处于活动状态。
我怎么做？
我发现的只是像“ `delegate`”这样的词，因为我来自 php 世界，所以对我来说毫无意义。如果有人可以将我指向 youtube 视频，这是在当前 Xcode (4.6.1) iOS 版本 6.1 上完成的，因为我发现的大多数答案要么是在旧 Xcode 上，要么看起来与当前的 Xcode 完全不同，要么太模糊，我无法破译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:37:12.380

您可以通过以下方式获取标签栏的选定索引：

```
self.tabBarController.selectedIndex 
```

# c++ - DirectX11 ReportLiveObjects 实例化

> ID：15814230
> 
> 赞同：3
> 
> 时间：2013-04-04T14:34:40.047
> 
> 标签：c++, debugging, directx, layer, directx-11

[ReportLiveObjects 的 MSDN 页面](http://msdn.microsoft.com/en-gb/library/windows/desktop/hh780352%28v=vs.85%29.aspx)

我不确定如何调用 ReportLiveObjects 方法，因为我试图声明的类是抽象的，或者在 IDXGIDebug“未声明”的情况下（我想我缺少头文件？）。

这是片段。

```
 ID3D11Debug *debugDev = new ID3D11Debug();
    debugDev->ReportLiveDeviceObjects( D3D11_RLDO_DETAIL ); 
```

上面的代码告诉我这个类是抽象的，所以我不能创建一个对象。

```
IDXGIDebug debugDev = new IDXGIDebug(); 
```

上面的代码告诉我 IDXGIDebug 未声明。

已包含头文件“DXGI”。调试层打开。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T08:30:21.257

当然你不能`ID3D11Debug`直接创建接口。

第一步是创建您的`ID3D11Device`with`D3D11_CREATE_DEVICE_DEBUG`标志，如下所示：

```
creationFlags = 0;

#ifdef _DEBUG
        creationFlags |= D3D11_CREATE_DEVICE_DEBUG;
#endif

D3D11CreateDevice(...); 
```

然后你必须`ID3D11Debug`从你的设备查询接口，像这样：

```
m_d3dDevice->QueryInterface(__uuidof(ID3D11Debug), reinterpret_cast<void**>(&m_d3dDebug)); 
```

关于 D3D 调试层的两个有用链接：

[http://msdn.microsoft.com/en-US/library/windows/desktop/jj200584(v=vs.85).aspx](http://msdn.microsoft.com/en-US/library/windows/desktop/jj200584%28v=vs.85%29.aspx) [http://blogs.msdn.com/b/chuckw/archive/2012/11/ 30/direct3d-sdk-debug-layer-tricks.aspx](http://blogs.msdn.com/b/chuckw/archive/2012/11/30/direct3d-sdk-debug-layer-tricks.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-23T08:54:46.750

我不知道回答一个 8 年前的问题是否是失礼，但唯一的答案实际上并没有回答关于 的问题`IDXGIDebug`，所以如果其他人正在寻找这个答案：

`DXGIGetDebugInterface`使用or`DXGIGetDebugInterface1`函数创建 IDXGI 接口。`DXGIGetDebugInterface1`不需要 DLL，因此它应该更易于使用：

```
#include <windows.h>
#include <dxgidebug.h>
...
IDXGIDebug * debugDev;
HRESULT hr = DXGIGetDebugInterface1(0, IID_PPV_ARGS(&debugDev)); 
```

那应该得到`IDXGIDebug`实例。而不是调用`ReportLiveDeviceObjects`like with `ID3D11Debug`，您将调用`ReportLiveObjects`，在原始帖子中使用 MSDN[链接](https://docs.microsoft.com/en-us/windows/win32/api/dxgidebug/nf-dxgidebug-idxgidebug-reportliveobjects?redirectedfrom=MSDN)引用，您可以将参数替换为您喜欢的任何值（在[此处](https://docs.microsoft.com/en-us/windows/win32/direct3ddxgi/dxgi-debug-id)和[此处](https://docs.microsoft.com/en-us/windows/win32/api/dxgidebug/ne-dxgidebug-dxgi_debug_rlo_flags)列出）：

```
hr = debugDev->ReportLiveObjects(DXGI_DEBUG_ALL, DXGI_DEBUG_RLO_ALL); 
```

# arrays - HighStocks 系列数据格式

> ID：15814231
> 
> 赞同：2
> 
> 时间：2013-04-04T14:34:40.410
> 
> 标签：arrays, highcharts, time-series, highstock

我有一组收盘价和一组 JS 时间戳。

HighStocks API 说 series.data 应该是一个包含两个值的数组列表。第一个值是 x 值，第二个是 y 值。我已将我的两个数组合并为一个名为 timeClose 的数组，使用时间戳作为 X，收盘价作为 Y，如下所示：

`timeClose : [ [1361750400000, 442.80] , [1361491200000, 450.81] ]`

但是图表仍然不起作用。谁能看到我做错了什么？

这是我的图表代码：http: [//jsfiddle.net/TqBvV/](http://jsfiddle.net/TqBvV/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:39:07.603

您需要在 Ajax 请求的成功回调中绘制图表，否则将没有任何数据可绘制；）

例如：

```
$.ajax({
        url: ''
        success: function (data, status) {
//Render your chart in here
}
}); 
```

[http://jsfiddle.net/rd13/TqBvV/1/](http://jsfiddle.net/rd13/TqBvV/1/)

# ajax - JSP 片段：哪些标签在顶部重复

> ID：15814237
> 
> 赞同：1
> 
> 时间：2013-04-04T14:34:54.103
> 
> 标签：ajax, dojo, jsp-fragments

我有一个 JSP 页面，它在标签之前有以下`<html>`标签：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

其中哪些需要转移到 JSP/HTML 片段中，该片段将通过 AJAX 调用拉入页面。（特别是 Dojo xhrGet ......但我不确定这是否相关。）如果需要更多环境信息来回答这个问题，请告诉我，我很乐意扩展这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:09:48.623

好的。这就是我们一起去的。它工作正常：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%> 
```

# element - 枫木——序列元素做作

> ID：15814239
> 
> 赞同：0
> 
> 时间：2013-04-04T14:34:55.970
> 
> 标签：element, sequence, maple

在 Maple 中操作序列元素时遇到问题。首先，这里是代码。

```
b[0] := t -> (1-t)^3;
b[1] := t -> 3*t*(1-t)^2;
b[2] := t -> 3*t^2*(1-t);
b[3] := t -> t^3;
P := seq([seq([j*(i+1), j*(i-1)], i = 1 .. 4)], j = 1 .. 3);
EvalGamma := proc (b, P, i, t)
  local CP, res;
  option trace;
  CP := P[i];
  res := CP[1]*b[0](t)+CP[2]*b[1](t)+CP[3]*b[2](t)+CP[4]*b[3](t);
  RETURN res;
end proc; 
```

变量 P 是一个序列序列： P[i] 是四个二维点的序列。但是做作CP := P[i]; 不做我想做的事：我不知道为什么，但结果不是过程中的 P[i] 。

奇怪的是，在程序之外，以下几行有效：

```
CP := P[1];
CP[1]; 
```

我将不胜感激任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:01:28.323

我假设您将程序称为

```
EvalGamma(b,P,i,t) 
```

您遇到的问题是，当 P 插入参数序列时，嵌套的参数序列被“展平”以产生最终的参数列表。解决此问题的一种简单方法是将 P 的序列放在列表结构中。所以使用

```
P := [seq([seq([j*(i+1), j*(i-1)], i = 1 .. 4)], j = 1 .. 3)]; 
```

一旦你这样做，我认为一切都会按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T16:04:44.443

当您调用时，`EvalGamma`您不能传递`P`作为（三个）列表（或列表）的表达式序列的全局。如果您尝试这样做，那么`EvalGamma`将收到 6 个参数，而不是您想要的 4 个参数，因为表达式序列中的三个（列表）列表中的每一个`P`都被解释为调用的单独参数。

相反，您可以创建`P`一个列表，即

```
P := [seq([seq([j*(i+1), j*(i-1)], i = 1 .. 4)], j = 1 .. 3)]; 
```

或者你可以像`EavlGamma(b, [P], some_i, some_name)`. 但是你应该只做这两个选择之一。

请注意，返回语法应该是`return res;`or (deprecated) `RETURN(res);`。

# c - 图结构长度相同的字符串

> ID：15814243
> 
> 赞同：0
> 
> 时间：2013-04-04T14:35:12.730
> 
> 标签：c, graph

我有一个典型的问题，并希望使用**C**来解决。给定一个字符数组`char *buffer[40]`Element in`buffer`可以存储不同长度的字符串。相同长度的字符串构成了图的一个组成部分。假设，如果`buffer`数组有 10 个长度为 4 的字符串和 30 个长度为 6 的字符串，我想创建两个具有以下属性的图形组件。

1.  图的每个节点代表一个字符串
2.  仅当字符串在单个字符中不同时，节点之间才存在边缘

什么数据结构会很容易实现我的场景。
我们如何满足 C 中的要求？

# ldap - LDAP Redirect from consumer if producer is online

> ID：15814246
> 
> 赞同：1
> 
> 时间：2013-04-04T14:35:19.840
> 
> 标签：ldap, producer-consumer

I got LDAP server with posix users set up, they can login using LDAP etc, but now I came across serious problem... hope it's real to implement. I need to implement mechanism like this: When someone logs in or tries to change the password consumer LDAP usually should redirect to producer, but if producer is offline then consumer user DB should be used, and there's no way to change password at all. How do i make it?

Maybe there's any producer on\off based switches etc.?

# ruby-on-rails-3 - 如何从旧符号转换为新的 ruby 1.9 哈希语法？

> ID：15814249
> 
> 赞同：1
> 
> 时间：2013-04-04T14:35:23.583
> 
> 标签：ruby-on-rails-3, morris.js

我正在使用 morris.js 在我的应用程序中显示图表。在我的控制器中，我有代码：

**控制器**

```
@users_count = User.group('DATE(created_at)').count.map do |d, c| {date: d, count: c} end 
```

从这里我得到：

```
[{:date=>'2013-04-01', :count=>1}, {:date=>'2013-04-02', :count=>1}] 
```

当我尝试将此作为数据选项传递给 morris.js 时，它不起作用。我需要将其转换为：

```
[{date: '2013-04-01', count: 1}, {date: '2013-04-02', count: 1}] 
```

然后它工作。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:57:15.610

这与旧哈希语法与新哈希语法无关。您无法将输出转换为新语法。它将始终使用旧语法。morris 期望的可能是一个 JSON 字符串。您可以使用 .to_json 来获取它。

使用`to_json`您的结果并将其传递给莫里斯。

```
@users_count = User.group('DATE(created_at)').count.map { |d, c| {date: d, count: c} }.to_json 
```

# c# - 如何使用 LINQ 填充具有多个值的 asp 列表框？

> ID：15814250
> 
> 赞同：0
> 
> 时间：2013-04-04T14:35:23.790
> 
> 标签：c#, asp.net

我的列表框没有出现数据，只有类数据名称：

```
 XDocument doc = XDocument.Parse(XMLfile);
    List<ClassData> data = (from item in doc.Descendants("freq")
         where item.Element("ID").Value > 50
         orderby item.Element("Time").Value
         select new ClassData
         {
              ID= item.Element("ID").Value,
              Name= item.Element("Name").Value,
              Age= item.Element("Age").Value,
              Time= item.Element("Time").Value
          }).ToList<ClassData>();
    lstBox.DataSource = data;
    lstBox.DataBind(); 
```

我的类数据：

```
 public class ClassData
{
    public string ID{ get; set; }
    public string Name{ get; set; }
    public string Age{ get; set; }
    public string Time{ get; set; }
} 
```

我在列表框中添加了 4 个与我的 classData Items 同名的项目...我的结果是：SolutionName.ClassData 32 次（结果数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:38:34.893

默认情况下，列表框显示`ToString()`您提供的项目的结果，如您所说的“SolutionName.ClassData”。
要改变它，你需要改变列表框的`DisplayMember`属性——`listBox.DisplayMember = "Name"`
对于 asp.net 列表框，它是`DataTextField`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:01:49.543

```
 <asp:DataList ID="dataList" runat="server"
        RepeatColumns="1"
        RepeatDirection="Horizontal"
        RepeatLayout="Table">
        <ItemTemplate>
            <table border="1" >
                <tr>
                    <td><asp:Label ID="Label1" runat="server" Text='<%# Eval("ID") %>' Width="50" /></td>
                    <td><asp:Label ID="Label2" runat="server" Text='<%# Eval("Name") %>' Width="20" /></td>
                    <td><asp:Label ID="Label3" runat="server" Text='<%# Eval("Age") %>' Width="200" /></td>
                    <td><asp:Label ID="Label4" runat="server" Text='<%# Eval("Time") %>' Width="200" /></td>
                </tr>
            </table>
        </ItemTemplate>
    </asp:DataList> 
```

# html - HTML image-link formatting

> ID：15814252
> 
> 赞同：0
> 
> 时间：2013-04-04T14:35:26.980
> 
> 标签：html, css, image, hyperlink, formatting

I'm working on a html only webpage, and I am having some issues correctly formatting my social-media links. I have a fixed position div that is 48 x 190, and within it I'd like to put 4 different social media icons which link to their respective pages. I was able to set up the div correctly in css styling, and I was able to insert the images into the correct position just fine. However, as soon as I added the link tag to the image, it all broke. The formatting of the image seemed to change just by adding the link to it, and they now took up all this extra space around themselves, went outside the borders of the div, and refused to be properly centered. Why is adding a link to the image breaking the formatting in such a strange way, and how can I fix it so it remains formatted how I want even after the link is added?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:37:22.113

您是否将图像的边框设置为 0 ？在链接内部时，如果 CSS 中未设置此值，浏览器会为图像设置 1px 边框。

如果这不是问题，发布您的代码（例如，请参阅 jsFiddle）可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:50:56.077

我想，这个问题与图标的不同大小（以像素为单位）有关，这会导致增加 div 并分发 UI。我还使用了以下图像链接，它工作正常。首先确保您的图标大小。

```
<a href="javascript: showPopup();" id="groupEdit" class="link">
<img src="/images/redPencil.png" title="Update">
</a> 
```

# iphone - Interface to the AppStore?

> ID：15814253
> 
> 赞同：0
> 
> 时间：2013-04-04T14:35:33.247
> 
> 标签：iphone, ios, objective-c, xcode, passbook

I have a requirement that a client wants to be able to allow users to download apps from within an app (which I will call the main app), based on a user's score (when a user achieves a certain score, they can have an app). We would like to do this without linking to the app store directly, so that users of the main app can be granted access to another app.

So, is there a way to interface to the app store while hiding the official app store from the user? I have seen similar functionality in Passbook, but not exactly what we are looking for. Any ideas? Thanks! Viv

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:04:43.560

可能重复

[如何链接到应用商店中的应用](https://stackoverflow.com/questions/433907/how-to-link-to-apps-on-the-app-store)

如果您的应用在 Apple 应用商店，您可以使用 itms:// 服务直接安装应用。检查上面的链接，该链接讲述了有关苹果应用商店 itms 服务的精彩内容。

# postgresql - Select value from an enumerated list in PostgreSQL

> ID：15814256
> 
> 赞同：10
> 
> 时间：2013-04-04T14:35:37.920
> 
> 标签：postgresql, postgresql-8.1

I want to select from an enumaration that is not in database.

E.g. `SELECT id FROM my_table` returns values like 1, 2, 3 I want to display `1 -> 'chocolate', 2 -> 'coconut', 3 -> 'pizza'` etc. `SELECT CASE` works but is too complicated and hard to overview for many values. I think of something like

```
SELECT id, array['chocolate','coconut','pizza'][id] FROM my_table 
```

But I couldn't succeed with arrays. Is there an easy solution? So this is a simple query, not a plpgsql script or something like that.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T18:29:15.710

```
with food (fid, name) as (
  values 
     (1, 'chocolate'),
     (2, 'coconut'),
     (3, 'pizza')
)
select t.id, f.name
from my_table t
  join food f on f.fid = t.id; 
```

或没有 CTE（但使用相同的想法）：

```
select t.id, f.name
from my_table t
  join (
     values 
       (1, 'chocolate'),
       (2, 'coconut'),
       (3, 'pizza')
  ) f (fid, name) on f.fid = t.id; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T18:36:13.740

这是正确的语法：

```
SELECT id, (array['chocolate','coconut','pizza'])[id] FROM my_table 
```

但是您应该使用这些值创建一个引用表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:00:54.283

创建另一个表来枚举所有情况并进行连接怎么样？

```
CREATE TABLE table_case
(
  case_id bigserial NOT NULL,
  case_name character varying,
  CONSTRAINT table_case_pkey PRIMARY KEY (case_id)
)
WITH (
  OIDS=FALSE
); 
```

当您从表中选择时：

```
SELECT id, case_name FROM my_table 
inner join table_case on case_id=my_table_id; 
```

# delphi - 使用 VarArrayOf 处理数据中的逗号

> ID：15814257
> 
> 赞同：1
> 
> 时间：2013-04-04T14:35:38.347
> 
> 标签：delphi, locate

我正在使用具有多个字段的定位，有时我收到“搜索字段数不正确”错误，并将其追踪到数据。

```
tbl.Locate('LName;FName;Stuff',
  VarArrayOf([LName+','+FName','+Stuff]),[loCaseInsensitive]); 
```

有时它有效，有时它没有，如果它在文本中包含逗号，我将其追溯到 Stuff 中的逗号。

Stuff =“我的狗是灰色的”会起作用。

Stuff =“我在工作，但不开心”不会。额外的逗号使它看起来像四个数据字段。

我是否必须解析逗号的每个传入数据字符串，如果发现任何字符串，请将它们替换为 Locate 工作的内容？包含的逗号版本将在没有解析或修改的情况下存储，因为我不知道他们可能输入了什么。“我在工作，但不开心”是用户的有效输入。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T15:26:30.353

不要将所有搜索值连接成一个字符串。相反，将它们作为不同的项目放置在数组中，就像[文档中的示例](http://docwiki.embarcadero.com/RADStudio/en/Using_Locate)一样。也就是说，不要在字符串中包含逗号：

```
tbl.Locate('LName;FName;Stuff',
  VarArrayOf([LName, FName, Stuff]), [loCaseInsensitive]); 
```

# java - Java download file from internet without name in link?

> ID：15814260
> 
> 赞同：1
> 
> 时间：2013-04-04T14:35:49.580
> 
> 标签：java, file, url

How can i download file from internet, when it don't has a direct URL? Main question - Where can i take name and extension for file?

For example when URL = "defaultSite.com/topic/9772.png" we can take last part of string and create file "9772.png", where we save stream of bytes.

But from URL like:

[http://www.skype.com/go/getskype](http://www.skype.com/go/getskype)

[https://www.dropbox.com/download?plat=win](https://www.dropbox.com/download?plat=win)

we can't take file name, however byte stream we can save with no problem. So how can i download file like that?

upd: MIME can't help, i think, becouse file can have specific (user created) extension, or it return to me application/octet-stream even for .exe file. Besides problem whit file name left.

upd2: Yes, server return headers, but it may be without file name. There from skype example:

```
conn.getHeaderField 0 : HTTP/1.1 200 OK
conn.getHeaderField 1 : nginx
conn.getHeaderField 2 : application/octet-stream
conn.getHeaderField 3 : 30619240
conn.getHeaderField 4 : Thu, 28 Feb 2013 19:35:47 GMT
conn.getHeaderField 5 : bytes
conn.getHeaderField 6 : max-age=86400
conn.getHeaderField 7 : Thu, 04 Apr 2013 14:52:26 GMT
conn.getHeaderField 8 : keep-alive
conn.getHeaderField 9 : S 
```

I need a reliable way to get name and extension.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:43:23.477

更重要的是，服务器没有建议文件名。服务器可以添加到下载响应的 HTTP 标头之一是

```
Content-Disposition: filename=checkimage.jpg 
```

或给出另存为提示

```
Content-Disposition: attachment; filename=checkimage.jpg

(checkimage.jpg is arbitrary here.) 
```

如果服务器没有提供文件名，那么你需要补一个。而且，如果它不使用*附件*形式，浏览器将使用 HTTP Header 中也提供的 MIME 类型来决定在哪个应用程序中打开返回的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:50:36.300

从[http://www.skype.com/go/getskype](http://www.skype.com/go/getskype)，我被重定向到[http://www.skype.com/go/getskype-macosx-a](http://www.skype.com/go/getskype-macosx-a)然后到[http://download.skype.com/macosx /Skype_6.3.59.582.dmg](http://download.skype.com/macosx/Skype_6.3.59.582.dmg)

因此，您需要遵循重定向，您使用的 java 库可能会自动执行此操作（但您没有说是哪个），但无论哪种方式，最后一个重定向都将指向确切的 URL。

# hadoop - Hadoop ClassCastException for default value of InputFormat

> ID：15814266
> 
> 赞同：1
> 
> 时间：2013-04-04T14:36:09.677
> 
> 标签：hadoop, mapreduce

I'm having a issue getting started with my first map-reduce code on Hadoop. I copied the following code from "Hadoop: The definitive guide" but I'm not able to run it on my single node Hadoop installation.

My Code snippet:

Main:

```
Job job = new Job(); 
job.setJarByClass(MaxTemperature.class);
job.setJobName("Max temperature");

FileInputFormat.addInputPath(job, new Path(args[0]));
FileOutputFormat.setOutputPath(job, new Path(args[1]));

job.setMapperClass(MaxTemperatureMapper.class);
job.setReducerClass(MaxTemperatureReducer.class);

job.setOutputKeyClass(Text.class);
job.setOutputValueClass(IntWritable.class);

System.exit(job.waitForCompletion(true) ? 0 : 1); 
```

Mapper:

```
public void map(LongWritable key, Text value, Context context) 
```

Reducer:

```
public void reduce(Text key, Iterable<IntWritable> values,
Context context) 
```

Implementations of map and reduce function are also picked from the book only. But when I try to execute this code, this is the error I get:

```
INFO mapred.JobClient: Task Id : attempt_201304021022_0016_m_000000_0, Status : FAILED
    java.lang.ClassCastException: interface javax.xml.soap.Text
    at java.lang.Class.asSubclass(Class.java:3027)
    at org.apache.hadoop.mapred.JobConf.getOutputKeyComparator(JobConf.java:774)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:959)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.<init>(MapTask.java:674)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:756)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1149)
    at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

Answers to similar questions in the past ([Hadoop type mismatch in key from map expected value Text received value LongWritable](https://stackoverflow.com/questions/11319727/hadoop-type-mismatch-in-key-from-map-expected-value-text-received-value-longwrit)) helped me to figure out that InputFormatClass should match the input to the map function. So I also tried using job.setInputFormatClass(TextInputFormat.class); in my main method, but it also did not solve the issue. What could be the issue here?

Here is the implementation of the Mapper class

```
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Mapper;

public class MaxTemperatureMapper extends Mapper<LongWritable, Text, Text, IntWritable>     {

private static final int MISSING = 9999;

@Override
public void map(LongWritable key, Text value, Context context)
  throws IOException, InterruptedException {

  String line = value.toString();
  String year = line.substring(15, 19);

  int airTemperature;
  if (line.charAt(45) == '+') { // parseInt doesn't like leading plus signs
    airTemperature = Integer.parseInt(line.substring(46, 50));
  } else {
    airTemperature = Integer.parseInt(line.substring(45, 50));
  }
  String quality = line.substring(50, 51);
  if (airTemperature != MISSING && quality.matches("[01459]")) {
    context.write(new Text(year), new IntWritable(airTemperature));
  }
 }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-23T06:30:45.120

您自动导入了错误的导入。而不是 import **org.apache.hadoop.io.Text**您导入**import javax.xml.soap.Text**

[您可以在此博客](http://www.unmeshasreeveni.blogspot.in/2014/04/wrong-import-statements-in-hadoop.html)中找到示例错误导入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:57:50.897

看起来您导入了错误的 Text 类 (javax.xml.soap.Text)。你想要 org.apache.hadoop.io.Text

# ios - Why do I have to use self. to reference own object

> ID：15814268
> 
> 赞同：0
> 
> 时间：2013-04-04T14:36:11.083
> 
> 标签：ios, objective-c

I'm learning iOS development through Stanford's iTunesU program. I am stuck on an unexpected problem I am having.

I have added a clear method, but I am getting this error //Use of undeclared identifier 'operandStack'; did you mean '_operandStack'?

I know I can fix the problem by using [self.operandStack ...etc instead of [operandStack

Why do I need self? Isn't it implied? Why do I not need to use self when referencing _operandStack?

#import "CalculatorBrain.h"

```
@interface CalculatorBrain()
//string because we are the only ones interested
@property  (nonatomic, strong) NSMutableArray *operandStack;
@end

@implementation CalculatorBrain

@synthesize operandStack = _operandStack;

- (void) setOperandStack:(NSMutableArray *)operandStack
{
    _operandStack = operandStack;
}

- (NSMutableArray *) operandStack
{
    if(_operandStack==nil) _operandStack = [[NSMutableArray alloc] init];
    return _operandStack;
}

- (void) pushOperand:(double)operand
{
    NSNumber *operandObject = [NSNumber numberWithDouble:operand];

    [self.operandStack addObject:operandObject];

}

- (double) popOperand
{
    NSNumber *operandObject = [self.operandStack lastObject];

    if (operandObject !=nil)
    {
        [self.operandStack removeLastObject];
    }
    return [operandObject doubleValue];
}

- (void) clear
{
    //clear everything
    [operandStack removeAllObjects]; 
```

//************************************************* //Use of undeclared identifier 'operandStack'; did you mean '_operandStack'?

```
}

- (double) performOperation:(NSString *)operation
{
    double result =0;
    //calculate result
    if ([operation isEqualToString:@"+"]) {
        result = [self popOperand] + [self popOperand];
    } else if ([operation isEqualToString:@"*"]) {
        result = [self popOperand] * [self popOperand];
    } else if ([operation isEqualToString:@"π"]) {
        [self pushOperand:3.14159];
        NSNumber *operandObject = [self.operandStack lastObject];
        return [operandObject doubleValue];
    }
    [self pushOperand:result];
    return result;
}
@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:40:41.967

因为您已经合成了它（注意：在较新的 Objective-C 版本中，合成是自动的）：

```
@synthesize operandStack = _operandStack; 
```

这意味着您生成了 getter 和 setter，并且您通过调用 _operandStack 来访问该属性。如果您想将其称为operantStack，请将其更改为：

```
@synthesize operandStack; 
```

相反，如果您使用 self.operandStack，则您使用的是属性生成的 getter/setter，而不是合成的。

使用合成和非合成属性是不同的，没有像许多人认为的那样访问属性的“推荐方式”，它们只是具有不同的含义。例如这里：

```
- (void) setOperandStack:(NSMutableArray *)operandStack
{
    _operandStack = operandStack;
} 
```

您必须使用综合属性，否则您将进入无限循环。合成属性是自动生成的，非合成属性也是自动生成的，但它可以被覆盖，就像你在那种情况下所做的那样，它也可以在外部访问。

# ios - UIWebView URL Intercept

> ID：15814285
> 
> 赞同：0
> 
> 时间：2013-04-04T14:36:51.103
> 
> 标签：ios, uiwebview

I am trying to intercept a URL change when using a `UIWebView`. I currently open a URL ([http://www.google.com](http://www.google.com)). However, I would like to know when the user has changed the URL by clicking any of the buttons on the Google webpage. I would then like to do something before the new page loads.

I have tried:

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

however, it does not seem to get called when the URL changes. I do not receive any log in my console, and it loads the page even if the bool returned is "NO".

I have also tried:

```
- (void)webViewDidStartLoad:(UIWebView *)webView 
```

However, that selector doesn't seem to be called either. **Would anyone know of a way to detect a URL change and do something before the new site is loaded?** My code is below:

```
@synthesize webView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad {

    NSString *urlAddress = @"http://www.google.com";

    //Create a URL object.
    NSURL *url = [NSURL URLWithString:urlAddress];

    //URL Requst Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    //Load the request in the UIWebView.
    [webView loadRequest:requestObj];

    UIView *tabBar = [self.navigationController.view.superview viewWithTag:100];
    tabBar.hidden = YES;
    self.navigationController.view.frame = RECT_PERSONETICS_FRAME;

}

- (void)webViewDidFinishLoad {
    // Other stuff if necessary...

    // Could use hidden instead of enabled if you don't even want
    // the button to be visible
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning]; // Releases the view if it doesn't have a superview
    // Release anything that's not essential, such as cached data
}

- (void)webViewDidStartLoad:(UIWebView *)webView
{
    NSLog(@"Webview URL: %@",[[[webView request] URL] absoluteString]);
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSLog(@"New URL is: %@", request);
    return NO;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:57:53.197

由于没有调用方法，我假设您可能没有在您的[UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)中设置`viewController`或您的`webview`插座设置不正确。

# jms - HermesJMS中如何设置字段messageID

> ID：15814286
> 
> 赞同：0
> 
> 时间：2013-04-04T14:36:53.587
> 
> 标签：jms

我尝试使用[HermesJMS](http://www.hermesjms.com)创建 JMS 消息并将其发送到队列，但该字段`messageID`不可编辑...

我该如何设置？

[屏幕截图：在 HermesJMS 中创建新消息](http://i.stack.imgur.com/KQW6x.jpg)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:12:15.487

我没有找到解决我的问题的方法...

因此，避免使用HermesJMS默认的*新 JMS 消息功能的最佳方法是发送 JMS 消息的 XML 文件...*

在此之前，您当然需要“手动”编写 XML 文件并定义所有需要的字段，包括`messageId`字段:-)

# xslt - Wildcard with if statement

> ID：15814287
> 
> 赞同：0
> 
> 时间：2013-04-04T14:36:55.150
> 
> 标签：xslt, ibm-datapower

I am trying to filter out a username for an incoming connection with .xsl file(DataPower appliance). I have 4 scenarios

user@domain.com - needs to stay the way it is.

user@remove.com - need to remove the domain part.

user@domain.com@remove.com - need to remove only the remove part.

user@remove.com.anything - again need to remove this and everything after.

There are 3 variables here. The 'user' can be anything. The domain can be anything. And the .anything after the remove.com, can be anything. @remove.com will ALWAYS be the same. Luckily that is the constant we can use.

Is there a simple if/then statement we can use to do this. We have tried many variations of If, when, contains, and can't seem to get it working. I can paste the code we are currently using if that will help.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:49:03.153

解决您的问题的一个好方法是正则表达式，尝试“regexp:match(yourExpressionGoesHere)”，然后您只需为每种情况编写特定的正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:54:29.987

我们想通了。对不起，我们已经在这几天了。

这是代码：

```
 <xsl:template match="@* | node()">
      <xsl:variable name="userid" select="substring-after(/*[local-name()='Envelope']/*[local-name()='Body']/*[local-name()='Authenticate']/*[local-name()='username'],'@')"/>
<xsl:choose>
<xsl:when test="contains($userid,'remove')">     
        <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:*deleted*">
            <soapenv:Header />  
            <soapenv:Body>
                <urn:authenticate>
                    <userId0>
                           <xsl:value-of select="substring-before(/*[local-name()='Envelope']/*[local-name()='Body']/*[local-name()='Authenticate']/*[local-name()='username'],'@remove.com')"/>
                    </userId0> 
                    <credential>
                           <xsl:value-of select="/*[local-name()='Envelope']/*[local-name()='Body']/*[local-name()='Authenticate']/*[local-name()='password']"/>       
                    </credential>
                </urn:authenticate>
            </soapenv:Body>
        </soapenv:Envelope>
    </xsl:when>
    <xsl:otherwise>
       <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:*deleted*">
            <soapenv:Header />  
            <soapenv:Body>
                <urn:authenticate>
                    <userId0>
                           <xsl:value-of select="/*[local-name()='Envelope']/*[local-name()='Body']/*[local-name()='Authenticate']/*[local-name()='username']"/>
                    </userId0> 
                    <credential>
                           <xsl:value-of select="/*[local-name()='Envelope']/*[local-name()='Body']/*[local-name()='Authenticate']/*[local-name()='password']"/>       
                    </credential>
                </urn:authenticate>
            </soapenv:Body>
        </soapenv:Envelope>
</xsl:otherwise> 
</xsl:choose> 
    </xsl:template> 
```

# symfony - 在 Symfony2 中强制重新加载配置

> ID：15814289
> 
> 赞同：10
> 
> 时间：2013-04-04T14:37:00.423
> 
> 标签：symfony

我有一个对 Symfony2 配置进行更改的脚本，需要在继续之前了解新配置（特别是添加 dbal 连接）。有没有办法在脚本执行期间强制重新加载配置？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-05T13:49:54.857

**更新：您无法重新加载配置，但您可以即时设置参数，请参阅第二个“更新”段落**

在 Symfony2 中确实不可能做到这一点。

在生产模式下，所有内容（甚至配置）都被缓存，因此您必须使用清除缓存

`app/console cache:clear --env=prod --no-debug`

（可能后跟一个`app/console cache:warmup --env=prod --no-debug`）

重新加载配置。`shutdown()`在开发模式下 ，您可以尝试使用`boot()`from`Symfony\Component\HttpKernel\Kernel`或可能`loadClassCache`- 但所有这些都不是您想要的。

对配置文件进行了哪些具体更改？也许您应该为不同的环境使用不同的文件，或者考虑使用任何其他方法来获取这些更改（通过简单的 Web 服务，甚至是从控制器中读取的静态文件）。

**更新**：

我发现您*可以*通过以下方式即时设置容器配置参数

```
$container->setParameter('parameter', value); 
```

查看[Symfony2 文档](http://symfony.com/doc/2.1/cookbook/configuration/external_parameters.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-01T10:44:31.570

我的答案可能很晚才到达，但可能对其他人有用。

“prod”环境的 Symfony 缓存存储在“app/cache/prod/”文件夹中并包含许多东西（用 PHP 翻译的 Twig 模板在“twig/”子文件夹中，注释在“annotations/”子文件夹中，以及...配置参数, app*ProjectContainer.php 文件等）。

所以你可以做的是：当你的配置脚本更改parameters.yml时，它也可以删除appProdProjectContainer.php。下一个使用 Symfony 应用程序的用户将面临更长的响应时间，但新的配置参数将被考虑并缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-08T10:41:27.503

这是部分解决方案，除了我在 Symfony 3.2 中使用它之外，但此代码用于动态重新加载捆绑配置。

首先，您应该在服务/控制器中注入容器实例，您要在其中使用使用其他配置重新初始化的捆绑实例：

```
/**
 * Service constructor.
 *
 * @param ContainerInterface $container
 */
public function __construct(ContainerInterface $container)
{
    $container = ReinitializedBundleExtension::updateContainerWithProdConfiguration($container);
} 
```

其次，您应该向 ReinitializedBundleExtension 类添加一个方法，该方法将使用重新初始化的包实例和依赖项更新容器：

```
/**
 * Updates container with bundle services resolved with production configuration.
 *
 * @param ContainerInterface $oldContainer
 *
 * @return ContainerInterface $container
 */
public static function updateContainerWithProdConfiguration(ContainerInterface $oldContainer)
{
    $containerBuilder = new ContainerBuilder();

    // Copy external services used in the bundle.
    $logger = $oldContainer->get('logger');
    $containerBuilder->set('logger', $logger);

    // Load the production config files.
    $bundleResourcesPath = $oldContainer->get('kernel')->locateResource('@ReinitializedBundle/Resources/');
    $fileLocator = new FileLocator($bundleResourcesPath . '/config');
    $loader = new Loader\YamlFileLoader($containerBuilder, $fileLocator);
    $loader->setResolver(new LoaderResolver([$loader]));
    $loader->load($bundleResourcesPath . 'config/production/services.yml');

    // Resolving bundle services with prduction config.
    $containerBuilder->compile();
    $containerBuilder->resolveServices($containerBuilder->getDefinitions());

    // Merge resolved prod-configured services with old container.
    $serviceIds = $containerBuilder->getServiceIds();

    foreach ($serviceIds as $serviceId) {
        // Services which are not related to the bundle.
        if (strpos($serviceId, 'reinitialized_bundle_config_prefix') === false) {
            continue;
        }

        $oldContainer->set($serviceId, $containerBuilder->get($serviceId));
    }

    return $oldContainer;
} 
```

PS：1.所有的ReinitializedBundle参数和服务都标有'reinitialized_bundle_config_prefix'前缀，所以在容器中很容易识别，即：

reinitialized_bundle_config_prefix.service1 reinitialized_bundle_config_prefix.param1

2.  这是 Yaml 配置的解决方案，因此使用了 YamlFileLoader。
3.  ReinitializedBundle 配置文件结构：

`.ReinitializedBundle └── Resources └── config ├── production | ├─── services.yml | └─── other stuff └── staging ├─── services.yml └─── other stuff`

# aem - CQ5.5 SSO 身份验证处理程序问题 - 无法从 Sling 过滤器读取 HTTP 请求标头

> ID：15814291
> 
> 赞同：2
> 
> 时间：2013-04-04T14:37:03.203
> 
> 标签：aem, sling

我正在尝试配置 CQ5.5 SSO 并使用 @SlingFilter 设置 HTTP 标头值。

看起来存在执行时间问题，其中 SlingFilter 在 SSO 身份验证处理程序之后处理请求，因此无法在 Http 标头中找到经过验证的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:58:46.860

您可以在过滤器上设置服务排名以控制执行顺序。

```
@Properties({ @Property(name = Constants.SERVICE_DESCRIPTION, value = "Description"),
  @Property(name = Constants.SERVICE_VENDOR, value = "Vendor"),
  @Property(name = Constants.SERVICE_RANKING, intValue = -760, propertyPrivate = true),
  @Property(name = "filter.scope", value = "request", propertyPrivate = true) 
}) 
```

您可以通过查看组件的属性来查看现有过滤器的服务排名，例如

```
http://localhost:4502/system/console/components/org.apache.sling.i18n.impl.I18NFilter 
```

似乎如果组件具有相同的服务排名，那么它们的 service.id 将用于确定它们的顺序。

您可以通过查看最近的请求来查看文件管理器的处理顺序

```
http://localhost:4502/system/console/requests 
```

并选择您提出的要求。你会看到类似的东西：

```
0 (2013-04-04 15:12:56) LOG Calling filter: org.apache.sling.bgservlets.impl.BackgroundServletStarterFilter
0 (2013-04-04 15:12:56) LOG Calling filter: org.apache.sling.i18n.impl.I18NFilter
0 (2013-04-04 15:12:56) LOG Calling filter: org.apache.sling.rewriter.impl.RewriterFilter
0 (2013-04-04 15:12:56) LOG Calling filter: com.day.cq.wcm.core.impl.WCMRequestFilter
0 (2013-04-04 15:12:56) LOG Calling filter: com.day.cq.wcm.foundation.forms.impl.FormsHandlingServlet
2 (2013-04-04 15:12:56) LOG Calling filter: org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter
2 (2013-04-04 15:12:56) LOG Calling filter: com.day.cq.wcm.mobile.core.impl.redirect.RedirectFilter 
```

一些较旧的过滤器将使用该`filter.order`属性。这仅在未找到 service.ranking 属性时使用。见[吊索 1735](https://issues.apache.org/jira/browse/SLING-1735)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T03:31:03.270

这是通过使用标准 HTTP 过滤器解决的，而不是使用白板支持的 Sling 过滤器 - [Apache Http 服务白板](http://felix.apache.org/documentation/subprojects/apache-felix-http-se%20rvice.html#using-the-whiteboard)﻿。在用户通过身份验证后调用 Sling 过滤器，为了使我的逻辑正常工作，我需要在请求到达 Sling 身份验证层之前拦截请求。所以我需要将它们注册为 std Servlet Filter

```
@Component
@Service
@org.apache.felix.scr.annotations.Properties({
        @Property(name = "pattern", value = "/.*"),
        @Property(name = Constants.SERVICE_RANKING, intValue = 100000, propertyPrivate = false),
        @Property(name = "_usernameHeader", value = "SM_USER")
})
public class TestFilter implements javax.servlet.Filter { 
```

# c# - 每次回发时都必须重写 cookie 以保留它吗？

> ID：15814292
> 
> 赞同：1
> 
> 时间：2013-04-04T14:37:11.407
> 
> 标签：c#, cookies

我不太了解请求 cookie 和响应 cookie 之间的区别。似乎每次我回发时，如果我不手动将 cookie 从请求重写为响应，那么它就会消失。我该如何解决这个问题？

```
 public string getCookie(string name) {
        if (Request.Cookies["MyApp"] != null && Request.Cookies["MyApp"][name] != null) {
            return Request.Cookies["MyApp"][name];
        } else if (Response.Cookies["MyApp"] != null && Response.Cookies["MyApp"][name] != null) {
            return Response.Cookies["MyApp"][name];
        } else {
            return "";
        }
    }
    public void writeCookie(string name, string value) {
        Response.Cookies["MyApp"][name] = value;
        HttpCookie newCookie = new HttpCookie(name, value);
        newCookie.Expires = DateTime.Now.AddYears(1);
        Response.SetCookie(newCookie);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:41:13.753

`Request`是用户尝试访问您的网站时获得的“东西”，而`Response`是响应此请求的一种方式。

也就是说，看msdn官方文档，即这部分：

> ASP.NET 包括两个内在的 cookie 集合。通过 HttpRequest 的 Cookies 集合访问的集合在 Cookie 头中包含了客户端向服务器传输的 cookie。通过 HttpResponse 的 Cookies 集合访问的集合包含在服务器上创建并在 Set-Cookie 标头中传输到客户端的新 cookie。

[http://msdn.microsoft.com/en-us/library/system.web.httprequest.cookies.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.cookies.aspx)

所以不，您不必每次都创建新的 cookie，除非它们已经过期。请确保您引用了正确的 cookie 集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:47:39.643

您可能想要检查分配给 cookie 的域和路径。可能是因为路径太具体或设置了错误的域，您保存的 cookie 只是被孤立了。

域是浏览器看到的服务器名称，例如“yourdomain.com”。如果 cookie 设置的域与此不同，则浏览器将永远不会将其发回。同样，cookie 的路径是所请求资源的路径，例如“/forum/admin/index”等。cookie 是针对该位置和所有子位置发送的，但不是针对父位置发送的。如果您正在访问位于“/forum”目录中的页面，则不会发送为“/forum/admin/index”设置的 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:55:55.207

```
Request.Cookies["MyApp"]; 
```

上面的代码将返回一个名为“MyApp”的 cookie 这样做：

```
Request.Cookies["MyApp"][name] 
```

您正在从名为“MyApp”的 cookie 中获取值“名称”。但是在您的 setCookie 代码中，您正在设置一个名为的 cookie，`name`而不是创建一个名为“MyApp”的 cookie：

```
 HttpCookie newCookie = new HttpCookie(name, value);
 newCookie.Expires = DateTime.Now.AddYears(1);
 Response.SetCookie(newCookie); 
```

所以，你应该`["MyApp"]`从你拥有它的任何地方删除它，或者你可以在 setCookie 中做这样的事情：

```
public void writeCookie(string name, string value) {
        if(Response.Cookies["MyApp"] == null) {
            HttpCookie newCookie = new HttpCookie("MyApp");
            newCookie.Expires = DateTime.Now.AddYears(1);
            Response.SetCookie(newCookie);
        }
        if(Response.Cookies["MyApp"][name] == null)
            Response.Cookies["MyApp"].Values.Add(name, value);
        else
            Response.Cookies["MyApp"][name] = val;
       // or maybe simple                 Response.Cookies["MyApp"][name] = val; will work fine, not sure here
    } 
```

# javascript - 是否有一种“Ember 方式”来共同化此代码？

> ID：15814303
> 
> 赞同：0
> 
> 时间：2013-04-04T14:37:36.537
> 
> 标签：javascript, ember.js, javascript-framework

我想知道在 Ember 中是否有一些好的方法来重组这个烂摊子！

如您所见，我有两个 TextField 的代码几乎相同！

我讨厌在我的页面中有相同的代码，我希望你能给我一些提示来改进我在 Ember 中的编程风格。

```
var App = Ember.Application.create();

App.ApplicationView = Ember.View.extend({});

App.StationsDepController = Ember.ArrayController.create();
App.StationsArrController = Ember.ArrayController.create();
App.ResultsController = Ember.ArrayController.create();

App.DepartureTextValue = Em.Object.create({
    value: ''
});

App.ArrivalTextValue = Em.Object.create({
    value: ''
});

App.DepartureTextField = Em.TextField.extend({
    attributeBindings: ['list'],
    list: 'datalistDep',
    valueBinding: 'App.DepartureTextValue.value',
    textValue: App.DepartureTextValue,
    placeholder: 'Departure',
    arrayCtrl: App.StationsDepController,
    keyUp: function(e) {
        var that = this;
        if (this.textValue.get('value') != '') {
            $.get('/metier/services/rest/StationSI/Stations?letters=' + this.textValue.value, function(data) {
                that.arrayCtrl.set('content', data);
            });
        } else {
            this.arrayCtrl.set('content', '');
        }
    }
});

App.ArrivalTextField = Em.TextField.extend({
    attributeBindings: ['list'],
    list: 'datalistArr',
    valueBinding: 'App.ArrivalTextValue.value',
    textValue: App.ArrivalTextValue,
    placeholder: 'Arrival',
    arrayCtrl: App.StationsArrController,
    keyUp: function(e) {
        var that = this;
        if (this.textValue.get('value') != '') {
            $.get('/metier/services/rest/StationSI/Stations?letters=' + this.textValue.value, function(data) {
                that.arrayCtrl.set('content', data);
            });
        } else {
            this.arrayCtrl.set('content', '');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:47:42.720

我认为创建这样的视图

```
App.MyOwnTextField = Em.TextField.extend({

  attributeBindings : ['list'],
  keyUp : function(e) {
    var that = this;
    if (this.textValue.get('value') != '') {
        $.get('/metier/services/rest/StationSI/Stations?letters='+ this.textValue.value, function(data) {
            that.arrayCtrl.set('content', data);
        });
    } else {
        this.arrayCtrl.set('content', '');
    }
  }
}); 
```

并让你的其他观点像这样继承它

```
App.DepartureTextField = App.MyOwnTextField.extend({

  list : 'datalistDep',
  valueBinding : 'App.DepartureTextValue.value',
  textValue : App.DepartureTextValue,
  placeholder : 'Departure',
  arrayCtrl : App.StationsDepController
}); 
```

可能会奏效。不过，我不太确定该行是否`attributeBindings : ['list'],`可以放入公共代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:47:15.820

试试这个：

```
App.ArrivalTextField = App.DepartureTextField.extend({
    list: 'datalistArr',
    valueBinding: 'App.ArrivalTextValue.value',
    textValue: App.ArrivalTextValue,
    placeholder: 'Arrival',
    arrayCtrl: App.StationsArrController
}); 
```

基本上这不是 Ember 方式，这是通常的 javascript 对象扩展方式。

# internet-explorer - 在 IE 中重现 CSS3 webkit 过渡和变换

> ID：15814305
> 
> 赞同：3
> 
> 时间：2013-04-04T14:37:44.740
> 
> 标签：internet-explorer, css, internet-explorer-8, transform, transition

我正在尝试制作一个简单的“链接云”，大约有 5 或 6 个链接以绝对定位随机分布。悬停时，它们会平滑地缩放（从对象的中心，而不是从左上角）到更大的尺寸，鼠标移开时会缩小。

使用 CSS3 转换和过渡完全可行，但我需要一个也适用于 IE8+ 的解决方案。我的网站的目标受众是那种使用开箱即用的东西的人，因此 IE 很麻烦。

我愿意接受任何建议。Javascript、Jquery、Mootools、Prototype...命名它，我会尝试它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T14:47:04.507

IE9 和 IE10 无论如何都支持 CSS3 转换，所以不必担心。（您需要`-ms-transform`用于 IE9）。

您可以在此处查看 CSS 转换的浏览器支持图表：http: [//caniuse.com/#feat=transforms2d](http://caniuse.com/#feat=transforms2d)

IE8 不支持 CSS 转换，但有一些方法可以绕过它。对于 IE8，我推荐使用[CSS Sandpaper](http://www.useragentman.com/blog/2010/03/09/cross-browser-css-transforms-even-in-ie/#more-896)。

这是一个在 IE8 及更早版本中实现 CSS 转换和其他功能的 javascript 库。

然后，您可以使用如下所示的语法：

```
-sand-transform: rotate(45deg); 
```

希望有帮助。

# r - 托管 R 的持续集成？

> ID：15814307
> 
> 赞同：3
> 
> 时间：2013-04-04T14:37:51.040
> 
> 标签：r, continuous-integration

我查看了一些托管 CI 提供商，但没有人承诺真正支持 R 开箱即用。理想情况下，可以指定不同版本的 R 来测试代码。我对开源 R 包的自动测试和构建感兴趣。

所以：如果有这样一个对 R 有很好的支持的提供者——在哪里？如果没有，哪个提供商的设置最轻松？

# xcode - 刚开始制作应用程序，我是新手，陷入泥潭

> ID：15814309
> 
> 赞同：0
> 
> 时间：2013-04-04T14:37:51.813
> 
> 标签：xcode

我正在阅读 Nick Kuh 的如何预订，我是编程新手。他的书中有一个步骤，您需要为资源创建一个新文件夹，然后为图像创建一个子目录。他希望您将图像文件从提供的源代码的资产文件夹复制到新的图像目录中。我是否需要购买苹果开发者程序才能访问资产文件夹？我在哪里可以找到提供的源代码的这个资产文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:43:32.573

所有源代码都可以在此**[下载链接](http://www.apress.com/downloadable/download/sample/sample_id/1291/)**或**[我从中提取的页面](http://www.apress.com/9781430243748)**中找到。

![下载链接](https://i.stack.imgur.com/dWV7p.png)

# javascript - 通过正则表达式捕获第一个零

> ID：15814313
> 
> 赞同：1
> 
> 时间：2013-04-04T14:38:18.763
> 
> 标签：javascript, regex

我有一个字符串：

`0012309test07`

我想找到第一个零和字母。

**00** 12309**测试**07

当然，我找到了带有 的字母`/[^\d]/`，[这是样本](http://rubular.com/r/9QFNXHW5dU)。

但是你如何捕捉第一个零？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:39:57.727

使用这个正则表达式`\b0+|[a-zA-Z]+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:53:23.170

使用这种模式

```
(^(0*))|([a-zA-Z]+) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:44:22.317

`"0012309test07".match(/^(0*)(\d*)([^\d]+)(\d*)$/)`

输出：`["0012309test07", "00", "12309", "test", "07"]`

`"12309test07".match(/^(0*)(\d*)([^\d]+)(\d*)$/)`

输出：`["12309test07", "", "12309", "test", "07"]`

`"test07".match(/^(0*)(\d*)([^\d]+)(\d*)$/)`

输出：`["test07", "", "", "test", "07"]`

`"0test07".match(/^(0*)(\d*)([^\d]+)(\d*)$/)`

输出：`["0test07", "0", "", "test", "07"]`

`"1test07".match(/^(0*)(\d*)([^\d]+)(\d*)$/)`

输出：`["1test07", "", "1", "test", "07"]`

`"test".match(/^(0*)(\d*)([^\d]+)(\d*)$/)`

输出：`["test", "", "", "test", ""]`

# sql - 从 SQL Server 2008 中的日期时间字段格式化月份和年份

> ID：15814318
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:38:26.080
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我只需要显示`Datetime`SQL Server 2008 中某个字段的月份和年份。

这应该按以下方式格式化：

```
Jan 13
Feb 13
March 13 
```

ETC

我还需要按这些结果分组和排序

我已经尝试了,等的许多排列`Cast`，但不能完全得到我需要的东西。`Convert``DatePart`

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:44:10.033

```
SELECT MonthYear
FROM (  SELECT  CONVERT(CHAR(6),YourDate,112) MonthYearOrder, 
                CONVERT(CHAR(6),YourDate,107) MonthYear
        FROM YourTable
        GROUP BY CONVERT(CHAR(6),YourDate,112), 
                 CONVERT(CHAR(6),YourDate,107)) A
ORDER BY MonthYearOrder 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:44:29.913

您可以使用类似这样的实用功能

[格式化 SQL Server 日期（由 Anubhavg 提供）](http://anubhavg.wordpress.com/2009/06/11/how-to-format-datetime-date-in-sql-server-2005/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:43:28.277

我会试试这个：

```
select convert(char(3), yourdatefield, 0) + " " + (YEAR( yourdatefield ) % 100) from yourtable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:44:41.250

```
SELECT (left(convert(char(11), date, 107), 3) + " " +
right(convert(char(11), date, 107), 2)) as date from 
(
    select date from yourtable 
    group by date 
    order by year(date) asc, month(date)asc
) as a 
```

转换`107`将为您提供格式`MMM dd, yyyy`，您只需要月份和年份的最后 2 位数字，因此我们将使用`left`函数获取`MMM`并使用右函数获取年份的最后 2 位数字

**更新：**添加对排序和分组的支持。您甚至可以将 where 子句添加到子查询中以进行调节

# php - PDO 不会插入到 MYSQL DB 参数号无效：参数未定义

> ID：15814319
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:38:26.703
> 
> 标签：php, mysql, pdo

> 警告：PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]: 参数号无效：参数未定义

```
<?php
$firstname = $_POST['first-name'];
$lastname = $_POST['last-name'];
$company = $_POST['company'];
$email = $_POST['email'];
$phone = $_POST['phone'];
$city = $_POST['city'];
$state = $_POST['state'];
$zip = $_POST['zip'];
$country = $_POST['country'];
$type = $_POST['type'];
$source = "IP-Demo";

// query
$sql = "INSERT INTO Contact (first-name,last-name,Company,email,phone,city,state,zip,country,type,source)
    VALUES (:first-name,:last-name,:Company,:email,:phone,:city,:state,:zip,:country,:type,:source)";

$q = $conn->prepare($sql);
$q->execute(array(
    ':first-name'=>$firstname,
    ':last-name'=>$lastname,
    ':Company'=>$company,
    ':email'=>$email,
    ':phone'=>$phone,
    ':city'=>$city,
    ':state'=>$state,
    ':zip'=>$zip,
    ':country'=>$country,
    ':type'=>$type,
    ':source'=>$source
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:45:05.020

您的查询包含几个需要反引号的对象名称，至少是这些：

*   `first-name`
*   `last-name`
*   `type`

**编辑：**顺便说一句，刚刚尝试了您的代码并`prepare()`失败了：

> PHP 致命错误：未捕获异常 'PDOException' 并带有消息 'SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '-name,last-name,Company,email,phone,city,state,zip,country,type,source) 附近使用的正确语法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:42:57.007

您的语句假定`type`为保留字而不是列名，因此它提供 10 列和 11 个参数

尝试在列名的前面和末尾设置`字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:14:39.870

当使用一个[真正的 db 抽象](https://github.com/colshrapnel/safemysql#safemysql)库而不是那个不方便和有限的 PDO 时，所有的代码将只有几行。更不用说它永远不会因为忘记报价这样愚蠢的原因而失败。

```
$allowed = explode(',','first-name,last-name,Company,email,phone,city,state,zip,country,type');
$data = $db->filterArray($_POST,$allowed);
$db->query("INSERT INTO Contact SET ?u", $data); 
```

# android - Javascript不适用于移动浏览器

> ID：15814324
> 
> 赞同：0
> 
> 时间：2013-04-04T14:38:40.270
> 
> 标签：android, jquery

我有一个刚刚创建的网站，其中删除了 jquery-ui 滑块链接

滑动条在我的安卓手机上似乎无法正常工作——它也可能影响其他移动浏览器。

有没有办法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:43:32.183

我刚刚在我的手机上看了一下，它也不起作用。但是，我过去注意到其他 JavaScript 项目（在其他网站上）也不起作用，所以我认为这不是您网站的具体问题。

就解决方法而言，您可以检查查看器的用户代理，如果他们在电话上，则显示不同的选择方法。

# visual-studio - 使用 Visual Studio 从 EXE 文件中删除所有符号

> ID：15814326
> 
> 赞同：4
> 
> 时间：2013-04-04T14:38:42.653
> 
> 标签：visual-studio, obfuscation, strip

我正在将一个可执行文件与几个静态库（我的解决方案中的项目）链接起来，并希望从最终的 .exe 文件中删除*所有内部函数名称。*

我必须为此使用哪些设置，我必须在库或可执行项目设置中这样做吗？

简单地在发布模式下构建并不会从二进制文件中删除名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-29T17:04:35.803

转到**项目**->**属性**->**配置属性**->**链接器**，然后在**调试**部分将**生成调试信息**设置为“否”。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-07T19:45:41.183

使用十六进制编辑器删除它们，它们不在代码中使用

# c++ - 如何将原始输入捕获到精神语法的合成输出中？

> ID：15814328
> 
> 赞同：3
> 
> 时间：2013-04-04T14:38:44.300
> 
> 标签：c++, boost, boost-spirit

我正在研究 boost::spirit::qi::grammar 并希望将原始文本的一部分复制到语法的合成输出结构中（更具体地说，与规则的组成部分之一匹配的部分）。该语法最终将用作更复杂语法的子语法，因此我实际上无法访问原始输入。

我猜这可以通过语义动作或语法上下文来完成，但我找不到一个在不访问原始 parse() 的情况下执行此操作的示例。

这是我到目前为止所拥有的：

```
#include <iostream>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/fusion/include/adapt_struct.hpp>

namespace qi = boost::spirit::qi;

struct A
{
    std::string header;
    std::vector<int> ints;
    std::string inttext;
};

BOOST_FUSION_ADAPT_STRUCT(
    A,
    (std::string, header)
    (std::vector<int>, ints)
    //(std::string, inttext)
)

template <typename Iterator>
struct parser : qi::grammar< Iterator, A() >
{
    parser() : parser::base_type(start)
    {
        header %= qi::lexeme[ +qi::alpha ];
        ints %= qi::lexeme[ qi::int_ % qi::char_(",_") ]; // <---- capture the original text that matches this into inttext
        start %= header >> ' ' >> ints;
    }

    qi::rule<Iterator, std::string()> header;
    qi::rule<Iterator, std::vector<int>() > ints;
    qi::rule<Iterator, A()> start;
};

int main()
{
    A output;
    std::string input("out 1,2_3");
    auto iter = input.begin();
    parser<decltype(iter)> p;
    bool r = qi::parse(iter, input.end(), p, output);
    if( !r || iter != input.end() )
    {
        std::cout << "did not parse";
    }
    else
    {
        // would like output.inttext to be "1,2_3"
        std::cout << output.header << ": " << output.inttext << " -> [ ";
        for( auto & i: output.ints )
            std::cout << i << ' ';
        std::cout << ']' << std::endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:46:37.117

类似于您在不使用语义操作的情况下提出的问题：

```
#include <iostream>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
#include <boost/spirit/repository/include/qi_iter_pos.hpp>

namespace qi = boost::spirit::qi;
using boost::spirit::repository::qi::iter_pos;

struct ints_type
{
   std::vector<int> data;
   std::string::const_iterator begin;
   std::string::const_iterator end;   
};

struct A
{
    std::string header;
    ints_type ints;
};

BOOST_FUSION_ADAPT_STRUCT(
    ints_type,
    (std::string::const_iterator, begin)
    (std::vector<int>, data)
    (std::string::const_iterator, end)
)

BOOST_FUSION_ADAPT_STRUCT(
     A,
     (std::string, header)
     (ints_type, ints)
)

template <typename Iterator>
struct parser : qi::grammar< Iterator, A() >
{
    parser() : parser::base_type(start)
    {
        header %= qi::lexeme[ +qi::alpha ];
        ints %= qi::lexeme[ iter_pos >> qi::int_ % qi::char_(",_") >> iter_pos ]; // <---- capture the original text that matches this into inttext
        start %= header >> ' ' >> ints;
    }

    qi::rule<Iterator, std::string()> header;
    qi::rule<Iterator, ints_type() > ints;
    qi::rule<Iterator, A()> start;
};

int main()
{
    A output;
    std::string input("out 1,2_3");
    auto iter = input.begin();
    parser<decltype(iter)> p;
    bool r = qi::parse(iter, input.end(), p, output);
    if( !r || iter != input.end() )
    {
        std::cout << "did not parse";
    }
    else
    {
        // would like output.inttext to be "1,2_3"
        std::cout << output.header << ": " << std::string(output.ints.begin,output.ints.end) << " -> [ ";
        for( auto & i: output.ints.data )
            std::cout << i << ' ';
        std::cout << ']' << std::endl;
    }
} 
```

使用语义动作：

```
#include <iostream>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
#include <boost/spirit/repository/include/qi_iter_pos.hpp>

namespace qi = boost::spirit::qi;
namespace phx = boost::phoenix;
using boost::spirit::repository::qi::iter_pos;

struct ints_type
{
   std::vector<int> data;
   std::string inttext; 
};

struct A
{
    std::string header;
    ints_type ints;

};

BOOST_FUSION_ADAPT_STRUCT(
    ints_type,
    (std::vector<int>, data)
    (std::string, inttext)
)

BOOST_FUSION_ADAPT_STRUCT(
     A,
     (std::string, header)
     (ints_type, ints)
)

template <typename Iterator>
struct parser : qi::grammar< Iterator, A() >
{
    parser() : parser::base_type(start)
    {
        header %= qi::lexeme[ +qi::alpha ];
        ints = qi::lexeme[
                  (iter_pos >> qi::int_ % qi::char_(",_") >> iter_pos)
                     [phx::at_c<0>(qi::_val)=qi::_2,
                      phx::at_c<1>(qi::_val)=phx::construct<std::string>(qi::_1,qi::_3)] 
               ]; 
        start %= header >> ' ' >> ints;
    }

    qi::rule<Iterator, std::string()> header;
    qi::rule<Iterator, ints_type() > ints;
    qi::rule<Iterator, A()> start;
};

int main()
{
    A output;
    std::string input("out 1,2_3");
    auto iter = input.begin();
    parser<decltype(iter)> p;
    bool r = qi::parse(iter, input.end(), p, output);
    if( !r || iter != input.end() )
    {
        std::cout << "did not parse";
    }
    else
    {
        // would like output.inttext to be "1,2_3"
        std::cout << output.header << ": " << output.ints.inttext << " -> [ ";
        for( auto & i: output.ints.data )
            std::cout << i << ' ';
        std::cout << ']' << std::endl;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:12:55.370

另一种使用自定义指令的替代方法，该指令`dont_eat`返回主题属性但不使用任何输入。这可能会更慢，因为该规则`ints`被解析了两次，但我相信语法更好（这是尝试创建自己的指令的好借口）（这是“boost/spirit/home/qi/directive/”的略微修改版本词法.hpp")。

**dont_eat.hpp**

```
#if !defined(DONT_EAT_HPP)
#define DONT_EAT_HPP

#if defined(_MSC_VER)
#pragma once
#endif

#include <boost/spirit/home/qi/meta_compiler.hpp>
#include <boost/spirit/home/qi/skip_over.hpp>
#include <boost/spirit/home/qi/parser.hpp>
#include <boost/spirit/home/support/unused.hpp>
#include <boost/spirit/home/support/common_terminals.hpp>
#include <boost/spirit/home/qi/detail/attributes.hpp>
#include <boost/spirit/home/support/info.hpp>
#include <boost/spirit/home/support/handles_container.hpp>

namespace custom 
{ 
    BOOST_SPIRIT_TERMINAL(dont_eat); 
}

namespace boost { namespace spirit
{
    ///////////////////////////////////////////////////////////////////////////
    // Enablers
    ///////////////////////////////////////////////////////////////////////////
    template <>
    struct use_directive<qi::domain, custom::tag::dont_eat> // enables dont_eat
      : mpl::true_ {};
}}

namespace custom
{

    template <typename Subject>
    struct dont_eat_directive : boost::spirit::qi::unary_parser<dont_eat_directive<Subject> >
    {
        typedef Subject subject_type;
        dont_eat_directive(Subject const& subject)
          : subject(subject) {}

        template <typename Context, typename Iterator>
        struct attribute
        {
            typedef typename
                boost::spirit::traits::attribute_of<subject_type, Context, Iterator>::type
            type;
        };

        template <typename Iterator, typename Context
          , typename Skipper, typename Attribute>
        bool parse(Iterator& first, Iterator const& last
          , Context& context, Skipper const& skipper
          , Attribute& attr) const
        {
            Iterator temp = first;
            boost::spirit::qi::skip_over(temp, last, skipper);
            return subject.parse(temp, last, context, skipper, attr);
        }

        template <typename Context>
        boost::spirit::info what(Context& context) const
        {
            return info("dont_eat", subject.what(context));

        }

        Subject subject;
    };
}//custom
    ///////////////////////////////////////////////////////////////////////////
    // Parser generators: make_xxx function (objects)
    ///////////////////////////////////////////////////////////////////////////
namespace boost { namespace spirit { namespace qi
{
    template <typename Subject, typename Modifiers>
    struct make_directive<custom::tag::dont_eat, Subject, Modifiers>
    {
        typedef custom::dont_eat_directive<Subject> result_type;
        result_type operator()(unused_type, Subject const& subject, unused_type) const
        {
            return result_type(subject);
        }
    };
}}}

namespace boost { namespace spirit { namespace traits
{
    ///////////////////////////////////////////////////////////////////////////
    template <typename Subject>
    struct has_semantic_action<custom::dont_eat_directive<Subject> >
      : unary_has_semantic_action<Subject> {};

    ///////////////////////////////////////////////////////////////////////////
    template <typename Subject, typename Attribute, typename Context
        , typename Iterator>
    struct handles_container<custom::dont_eat_directive<Subject>, Attribute
        , Context, Iterator>
      : unary_handles_container<Subject, Attribute, Context, Iterator> {};
}}}

#endif 
```

**主文件**

```
#include <iostream>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
#include "dont_eat.hpp"

namespace qi = boost::spirit::qi;
namespace phx = boost::phoenix;

struct ints_type
{
   std::vector<int> data;
   std::string inttext; 
};

struct A
{
    std::string header;
    ints_type ints;

};

BOOST_FUSION_ADAPT_STRUCT(
    ints_type,
    (std::vector<int>, data)
    (std::string, inttext)
)

BOOST_FUSION_ADAPT_STRUCT(
     A,
     (std::string, header)
     (ints_type, ints)
)

template <typename Iterator>
struct parser : qi::grammar< Iterator, A() >
{
    parser() : parser::base_type(start)
    {
        header %= qi::lexeme[ +qi::alpha ];
        ints = qi::lexeme[qi::int_ % qi::char_(",_")]; 
        ints_string = custom::dont_eat[ints] >> qi::as_string[qi::raw[ints]];
        start %= header >> ' ' >> ints_string;
    }

    qi::rule<Iterator, std::string()> header;
    qi::rule<Iterator, std::vector<int>() > ints;
    qi::rule<Iterator, ints_type() > ints_string;
    qi::rule<Iterator, A()> start;
};

int main()
{
    A output;
    std::string input("out 1,2_3");
    auto iter = input.begin();
    parser<decltype(iter)> p;
    bool r = qi::parse(iter, input.end(), p, output);
    if( !r || iter != input.end() )
    {
        std::cout << "did not parse";
    }
    else
    {
        // would like output.inttext to be "1,2_3"
        std::cout << output.header << ": " << output.ints.inttext << " -> [ ";
        for( auto & i: output.ints.data )
            std::cout << i << ' ';
        std::cout << ']' << std::endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T18:03:51.160

该指令返回 a `fusion::vector2<>`，其中主题的属性作为其第一个成员，与合成属性对应的字符串作为其第二个成员。我认为这是最简单的重用方法，只要您充分调整结构即可。我不确定这`fusion::vector2<>`是处理属性的最佳方式，但在我所做的有限测试中，它运行良好。有了这个指令，`ints_string`规则就是：

```
ints_string=custom::annotate[ints];
//or ints_string=custom::annotate[qi::lexeme[qi::int_ % qi::char_(",_")]]; 
```

[LWS 上的示例。](http://liveworkspace.org/code/3alTxi%240)

**注释.hpp**

```
#if !defined(ANNOTATE_HPP)
#define ANNOTATE_HPP

#if defined(_MSC_VER)
#pragma once
#endif

#include <boost/spirit/home/qi/meta_compiler.hpp>
#include <boost/spirit/home/qi/skip_over.hpp>
#include <boost/spirit/home/qi/parser.hpp>
#include <boost/spirit/home/support/unused.hpp>
#include <boost/spirit/home/support/common_terminals.hpp>
#include <boost/spirit/home/qi/detail/attributes.hpp>
#include <boost/spirit/home/support/info.hpp>
#include <boost/spirit/home/support/handles_container.hpp>

namespace custom 
{ 
    BOOST_SPIRIT_TERMINAL(annotate); 
}

namespace boost { namespace spirit
{
    ///////////////////////////////////////////////////////////////////////////
    // Enablers
    ///////////////////////////////////////////////////////////////////////////
    template <>
    struct use_directive<qi::domain, custom::tag::annotate> // enables annotate
      : mpl::true_ {};
}}

namespace custom
{

    template <typename Subject>
    struct annotate_directive : boost::spirit::qi::unary_parser<annotate_directive<Subject> >
    {
        typedef Subject subject_type;
        annotate_directive(Subject const& subject)
          : subject(subject) {}

        template <typename Context, typename Iterator>
        struct attribute
        {
            typedef 
                boost::fusion::vector2<
                    typename boost::spirit::traits::attribute_of<subject_type, Context, Iterator>::type
                    ,std::string
                >
            type;
        };

        template <typename Iterator, typename Context
          , typename Skipper, typename Attribute>
        bool parse(Iterator& first, Iterator const& last
          , Context& context, Skipper const& skipper
          , Attribute& attr) const
        {
            boost::spirit::qi::skip_over(first, last, skipper);
            Iterator save = first;
            typename boost::spirit::traits::attribute_of<subject_type, Context, Iterator>::type attr_;
            if(subject.parse(first, last, context, skipper, attr_))
            {
                boost::spirit::traits::assign_to(attr_,boost::fusion::at_c<0>(attr));
                boost::spirit::traits::assign_to(std::string(save,first),boost::fusion::at_c<1>(attr));
                return true;
            }
            first = save;
            return false;
        }

        template <typename Context>
        boost::spirit::info what(Context& context) const
        {
            return info("annotate", subject.what(context));

        }

        Subject subject;
    };
}//custom
    ///////////////////////////////////////////////////////////////////////////
    // Parser generators: make_xxx function (objects)
    ///////////////////////////////////////////////////////////////////////////
namespace boost { namespace spirit { namespace qi
{
    template <typename Subject, typename Modifiers>
    struct make_directive<custom::tag::annotate, Subject, Modifiers>
    {
        typedef custom::annotate_directive<Subject> result_type;
        result_type operator()(unused_type, Subject const& subject, unused_type) const
        {
            return result_type(subject);
        }
    };
}}}

namespace boost { namespace spirit { namespace traits
{
    ///////////////////////////////////////////////////////////////////////////
    template <typename Subject>
    struct has_semantic_action<custom::annotate_directive<Subject> >
      : unary_has_semantic_action<Subject> {};

    ///////////////////////////////////////////////////////////////////////////
    template <typename Subject, typename Attribute, typename Context
        , typename Iterator>
    struct handles_container<custom::annotate_directive<Subject>, Attribute
        , Context, Iterator>
      : unary_handles_container<Subject, Attribute, Context, Iterator> {};
}}}

#endif 
```

**主文件**

```
#include <iostream>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
#include "annotate.hpp"

namespace qi = boost::spirit::qi;
namespace phx = boost::phoenix;

struct ints_type
{
   std::vector<int> data;
   std::string inttext; 
};

struct A
{
    std::string header;
    ints_type ints;

};

BOOST_FUSION_ADAPT_STRUCT(
    ints_type,
    (std::vector<int>, data)
    (std::string, inttext)
)

BOOST_FUSION_ADAPT_STRUCT(
     A,
     (std::string, header)
     (ints_type, ints)
)

template <typename Iterator>
struct parser : qi::grammar< Iterator, A() >
{
    parser() : parser::base_type(start)
    {
        header %= qi::lexeme[ +qi::alpha ];
        ints = qi::lexeme[qi::int_ % qi::char_(",_")]; 
        ints_string = custom::annotate[ints];
        start %= header >> ' ' >> ints_string;
    }

    qi::rule<Iterator, std::string()> header;
    qi::rule<Iterator, std::vector<int>() > ints;
    qi::rule<Iterator, ints_type() > ints_string;
    qi::rule<Iterator, A()> start;
};

int main()
{
    A output;
    std::string input("out 1,2_3");
    auto iter = input.begin();
    parser<decltype(iter)> p;
    std::string annotation;
    bool r = qi::parse(iter, input.end(), custom::annotate[p], output, annotation);
    if( !r || iter != input.end() )
    {
        std::cout << "did not parse";
    }
    else
    {
        // would like output.inttext to be "1,2_3"
        std::cout << "annotation: " << annotation << std::endl;
        std::cout << output.header << ": " << output.ints.inttext << " -> [ ";
        for( auto & i: output.ints.data )
            std::cout << i << ' ';
        std::cout << ']' << std::endl;
    }
} 
```

# ruby-on-rails - 应该大于和小于语法

> ID：15814333
> 
> 赞同：0
> 
> 时间：2013-04-04T14:38:55.367
> 
> 标签：ruby-on-rails, rspec, shoulda

**简介.rb**

```
# encoding: utf-8
class Brief < ActiveRecord::Base
  belongs_to :project
  validate :can_only_be_edited_if_project_is_not_started
  validates_presence_of :project, :inverse_of => :brief

  validates_numericality_of :duration, :only_integer => true, :less_than_or_equal_to => 15, :greater_than_or_equal_to => 5

  validates_length_of :brand_info, :maximum => 4000

  def can_only_be_edited_if_project_is_not_started
    errors.add(:base, 'Proje can't edit if duration is end!') if
      !project.nil? && !project.brief_can_be_edited?
  end

end 
```

如何使用 shoulda gem 测试持续时间应该大于或等于 5 且小于或等于 15？

我试过下面的代码

**简要规范.rb**

```
it { should ensure_inclusion_of(:duration).in_range(5..15) 
```

但我收到了这个错误

```
1) Brief non-specific tests 
     Failure/Error: it { should ensure_inclusion_of(:duration).in_range(5..15) }
       Did not expect errors to include "It's not suitable word" when duration is set to 4, got error: 
     # ./spec/models/brief_spec.rb:23:in `block (3 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:32:33.337

这现在看起来是一个已知问题，提出了一个拉取请求来解决这个问题：

[https://github.com/thoughtbot/should-matchers/pull/281](https://github.com/thoughtbot/shoulda-matchers/pull/281)

我建议只关注它以查看它是否进入并检查何时创建新宝石。一旦它在 git 中，您也可以直接从那里提取，而无需等待新的 gem。最后一种选择是自己分叉 gem，添加更改，然后使用自己的 gem。

同时，`allow_value`如果您现在确实需要在那里进行测试，则可以使用匹配器。

# java - 制作 android 游戏：无法在扩展 SurfaceView 实现 SurfaceHolder.Callback 的类中访问我的 SharedPreferences

> ID：15814336
> 
> 赞同：0
> 
> 时间：2013-04-04T14:39:05.883
> 
> 标签：java, android

我正在制作一个 android java 游戏。但我有点坚持获取我保存的性别字符串。

在我的 GameGameActivity 类中，我可以接收性别。

```
public class GameGameActivity extends GameActivity{

SharedPreferences mGameSettings;
public String mGender;
MainGamePanel mGamePanel;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.game);
    mGameSettings = getSharedPreferences(GAME_PREFERENCES, Context.MODE_PRIVATE);
    Log.d("myTag", "View added");
   checkGender();
}

private void checkGender(){
    if (mGameSettings.contains(GAME_PREFERENCES_GENDER)) {
        if(mGameSettings.getInt(GAME_PREFERENCES_GENDER, 0) == 2){
            mGender = "Female";             
            Log.d("myTag","gender: " +mGender );
        }else{
            mGender = "Male";
            Log.d("myTag","gender: " +mGender );
        }
    }
} 
```

但是所有的魔法都发生在我的 MainGamePanel 中。我想知道里面是什么性别。我尝试了很多方法，但它总是给我一个空指针异常。这是我的 MainGamePanel。（只有几行）

```
public class MainGamePanel extends SurfaceView implements SurfaceHolder.Callback{
public MainGamePanel(Context context, AttributeSet attributeSet){
    super(context, attributeSet);
    background =       BitmapFactory.decodeResource(getResources(),R.drawable.bg_game_boy);
    getHolder().addCallback(this);  
    createContent();
    thread = new MainThread(getHolder(), this);
    setFocusable(true); 
} 
```

这是我保存性别等的课程。我可以在其他活动中访问它们，但它们都扩展了这个类：

```
import android.app.Activity;
public class GameActivity extends Activity{

public static final String GAME_PREFERENCES = "GamePrefs";
public static final String GAME_PREFERENCES_NICKNAME = "Nickname"; // String
public static final String GAME_PREFERENCES_EMAIL = "Email"; // String
public static final String GAME_PREFERENCES_PASSWORD = "Password"; // String
public static final String GAME_PREFERENCES_DOB = "DOB"; // Long
public static final String GAME_PREFERENCES_GENDER = "Gender"; //

public static final String GAME_PREFERENCES_SCORE = "80"; // int

public static final String DEBUG_TAG = "Activity Log";
public static final String TAG = GameActivity.class.getSimpleName(); 
```

}

我不知道如何在我的主游戏面板中阅读性别偏好。有人可以告诉我或将我推向正确的方向吗？

谢谢

我在命令之后尝试了这种方式：它说：方法 getSharedPreferences(String, int) 未定义 MainGamePanel 类型

```
 SharedPreferences mGameSettings;

public MainGamePanel(Context context, AttributeSet attributeSet){
    super(context, attributeSet);
    background = BitmapFactory.decodeResource(getResources(),R.drawable.bg_game_boy);
    getHolder().addCallback(this);  
    createContent();
    thread = new MainThread(getHolder(), this);
    setFocusable(true);     
    mGameSettings = getSharedPreferences(mGameActivity.GAME_PREFERENCES, Context.MODE_PRIVATE);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:46:45.833

也许我在你的描述中遗漏了一些东西，但它应该像 MainGamePanel 中的 context.getSharedPreferences() 一样简单。

# rest - 用于 PUT 或 POST 的 REST“试运行”选项

> ID：15814341
> 
> 赞同：8
> 
> 时间：2013-04-04T14:39:15.893
> 
> 标签：rest

有没有一种惯用的方法来实现这一点：

我需要 PUT/POST 给定的实体。但是，在实际使用之前，我需要对一个更不稳定的系统进行一些更改，如果可行，我将继续。

所以我会首先询问 PUT/POST 是否可以接受，然后再实际执行 PUT/POST。

我曾想过只使用“试运行”查询参数，但感觉不是正确的方法。

**更新**：试图澄清我的问题。关键是第一个 PUT 仅用于验证实体。

```
Me           System A       Volatile System X
|    Dry PUT    |                    :
|-------------->|                    :
|               |                    :
|   20x / 40x   |                    :
|<--------------|                    :
|               :                    :
| Upon PUT OK do some related work   :
|----------------------------------->|
|               :                    |
| Work completely                    |
|<-----------------------------------|
|               :
|PUT (for real) :
|-------------->|
|               |
|     20x       |
|<--------------| 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-10T02:28:42.320

从逻辑上讲，我觉得这也许可以通过某种状态属性来解决。如果您使用的是 JSON，您可能会考虑添加如下属性：

```
{
  "draft" : true
} 
```

第一次执行 PUT 请求时，您将项目标记为草稿。它存储该项目，但不对其进行任何其他操作。

在您的服务器接受您的请求后，您可以在其他地方进行“相关工作”，如果同样成功，您可以向同一资源提交另一个 PUT 请求，这次设置`draft`为`false`.

# sql - 使用内部选择、案例和子查询的 sql 插入

> ID：15814342
> 
> 赞同：1
> 
> 时间：2013-04-04T14:39:16.603
> 
> 标签：sql, sql-server-2008

```
select * into #transacTbl from tmpTrans
insert
   select
       (case when tmpT.TranStatus = 10
           then(
                select ID, 'Returned')
           else(
                select ID, 'GoodSale')
           end)
   from
   (
       select * from MainTransacSource
    ) as tmpT 
```

如果交易是退货或良好的销售/交易，我希望能够将交易的详细信息插入带有标签的不同表中。我这样做是为了避免使用光标，所以请避免使用光标给出解决方案。

我知道代码看起来不错，但我遇到的是，case 语句仅通过子查询返回一个值。

这是代码的简化版本；我至少有 6 种类型的案例，应该可以按 ROW 插入。我不想认为我必须每列重复每个案例，因为实际的列数约为 38。

如果这不符合逻辑，您可能会建议另一种解决方法。当然，没有光标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:45:59.127

如果无法访问您的表格并且不知道您想要达到的具体目标，请尝试*以下*操作：

```
select * into #transacTbl from tmpTrans
insert
   select tmpT.ID,
       (case when tmpT.TranStatus = 10
        then 'Returned'
        else 'GoodSale'
        end)
   from
      (select * from MainTransacSource) as tmpT <OR simply MainTransacSource tmpT (maybe)> 
```

干杯。

# sharepoint - Sharepoint 2013 JSLink TaskList 自定义项目渲染，带有开箱即用选项

> ID：15814343
> 
> 赞同：1
> 
> 时间：2013-04-04T14:39:19.307
> 
> 标签：sharepoint, sharepoint-2013, tasklist

我无法找到使用 JSLink 自定义 SP2013 任务列表项呈现的方法，以完全改变列表项的呈现方式，但同时保留默认提供的所有开箱即用功能。

我的意思是，我想将列表元素显示为彩色框，但还要保留排序选项、“...”（打开菜单）图标等。

我怎样才能实现它？是否有任何文档可以找到所有内部字段（如 PercentComplete 等）的列表，可以覆盖哪些渲染？

任何代码片段将不胜感激！

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:24:08.843

看看[这里](http://www.estruyf.be/blog/create-a-task-progress-bar-with-js-link-in-sharepoint-2013/)

简而言之，您要做的是，在`Templates`覆盖上下文对象中的对象上添加一个名为`Fields`. 在此对象中，与列（字段）的静态名称相同的属性用于使用“视图”属性呈现值。因此，链接中的示例是：

```
var overrideCtx = {};
overrideCtx.Templates = {};
// Override field data
overrideCtx.Templates.Fields = {
    // PercentComplate = internal name of the % Complete
    // View = you want to change the field rendering of a view
    // <div ... = here we define what the output of the field will be.
    'PercentComplete': { 'View' : '<div style="background: #F3F3F3; display:block; height: 20px; width: 100px;"><div style="background: #0072C6; height: 100%; width: <#=ctx.CurrentItem.PercentComplete.replace(" %", "")#>%;"></div></div>' }
};
// Register the override of the field
SPClientTemplates.TemplateManager.RegisterTemplateOverrides(overrideCtx 
```

使用此方法，您将在其他字段中保留默认功能。只需确保该列在当前视图中可见。

# css - 是否可以使用 css 使背景图像“淡化”或将底部渐变为透明以便显示背景颜色？

> ID：15814346
> 
> 赞同：22
> 
> 时间：2013-04-04T14:39:28.387
> 
> 标签：css

我知道这可以在任何图像编辑程序中轻松完成，我只是好奇是否有一种仅使用 css 的方法。

例子：

```
body {background-color: #837960; background-image: url("Images/background.jpg") background-repeat: no-repeat;} 
```

您可以使用 css 将背景图像淡化为背景颜色，因此不存在可见线，还是我应该继续在 Photoshop 中为透明度添加渐变？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T14:47:41.037

有可能 - 在 CSS3 中，您可以为背景设置多个值

```
body {
    background: #837960 url("https://i.stack.imgur.com/MUsp6.jpg") 0 0 no-repeat;

    background: -moz-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(130,91,0,1) 100%);   /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0)), color-stop(100%,rgba(130,91,0,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, rgba(255,255,255,0) 0%,rgba(130,91,0,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, rgba(255,255,255,0) 0%,rgba(130,91,0,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, rgba(255,255,255,0) 0%,rgba(130,91,0,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom, rgba(255,255,255,0) 0%,rgba(130,91,0,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#825b00',GradientType=0 ); /* IE6-9 */
}
```

但是，它只适用于支持 CSS3 的现代浏览器

（通过[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)生成的代码）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-01-06T06:58:43.160

是的，可以通过 CSS 使用[`linear-gradient()`](https://devdocs.io/css/linear-gradient)具有多个背景图像的功能：

```
body {
  background-color: #837960;
  background-image: linear-gradient(
    to bottom, transparent, #837960
  ), url("Images/background.jpg");
  background-repeat: no-repeat;
} 
```

将渐变指定为第一个图像，使其堆叠在顶部，并使用它从[`transparent`](https://www.w3.org/TR/css-color-3/#transparent)顶部淡入淡出`background-color`到底部不透明。这将产生下面的图像淡入背景的错觉，而不需要图像本身的 alpha 透明度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T14:52:32.960

理想情况下，您应该只编辑图像，以便在浏览器中具有一致的外观。

虽然您可以有一个背景渐变，但它会出现在图像后面，因为背景图像被放置在背景颜色之上。为了使图像看起来像是淡出另一种颜色，您需要在主体顶部放置另一个标签，例如：

```
body { background: url('https://i.stack.imgur.com/MUsp6.jpg') }
div.content { 
    width: 100%; 
    height: 100%; 
    background: -moz-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* IE10+ */
    background: linear-gradient(to bottom, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=0 ); /* IE6-9 */
}
```

```
<body>
    <div class="content">Example</div>
</body>
```

或者您想要的任何颜色/定位组合。一个很好的资源是[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# dart - 在 Web UI 中使地图或列表可观察

> ID：15814349
> 
> 赞同：8
> 
> 时间：2013-04-04T14:39:40.920
> 
> 标签：dart, dart-webui

我可以通过在 Dart 代码中使用 @observable 声明来使 String 或 num 类型可观察：

```
@observable
var x = ''; 
```

和`{{ }}`html 中的语法：

```
<div>x = {{x}}</div> 
```

但`@observable`不适用于列表和地图。我如何使那些可观察的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-04T14:39:40.920

与List`toObservable()`或 Map 一起用作参数。这会在 List 或 Map 对象及其在 UI 中的表示之间创建一个绑定。

以下示例使用`toObservable()`. 请注意，List 和 Map 对象每秒都会添加数据。通过`toObservable()`创建正确的绑定，这些对象的 UI 会自动更新以显示添加的项目。

当 List 或 Map 被`clear()`编辑时，UI 再次反映了这一点。

有关如何构建和运行诸如此脚本的说明，请参阅 [http://www.dartlang.org/articles/web-ui/tools.html](http://www.dartlang.org/articles/web-ui/tools.html)。

这是`main.dart`文件：

```
import 'dart:async';
import 'package:web_ui/web_ui.dart';

@observable
num x = 0;  // @observable works fine with a number. 

List list = toObservable(new List());

Map<String, num> map = toObservable(new Map());

void main() {
   new Timer.periodic(new Duration(seconds: 1), (_) {
     x += 1;
     list.add(x);
     map[x.toString()] = x;
     if (x % 4 == 0) {
       list.clear();
       map.clear();
     }
     return x;
   });
} 
```

这是随附的`dart.html`文件：

```
<!DOCTYPE html>

<html>
  <body>
     <p>x = {{ x }}</p>

     <ul>
       <template iterate='item in list'>
         <li>list item = {{item}}</li>
       </template>
     </ul>

     <ul>
       <template iterate='key in map.keys'>
         <li>map key = {{key}}, map value = {{map[key]}}</li>
       </template>
     </ul>

    <script type="application/dart" src="main.dart"></script>
  </body>
</html> 
```

# spring - 尝试访问 MyController 时出现 Spring 错误 404

> ID：15814353
> 
> 赞同：0
> 
> 时间：2013-04-04T14:39:45.250
> 
> 标签：spring, spring-mvc, controller

我是春天的新手。我正在尝试将 Spring 集成到 Web 应用程序的一部分中。它必须与以下网址一起使用：

```
http://localhost:9080/myfolder/myspring 
```

我的**web.xml**包括：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>    
    /WEB-INF/config/myspring-context.xml
  </param-value>
</context-param>

    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
      <init-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
      /WEB-INF/config/applicationContext.xml
    </param-value>
  </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>       

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/springviews</url-pattern>
    </servlet-mapping> 
```

**应用上下文.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>

    <beans xmlns="http://www.springframework.org/schema/beans"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:jee="http://www.springframework.org/schema/jee"
           xmlns:context="http://www.springframework.org/schema/context"
           xmlns:tx="http://www.springframework.org/schema/tx"
           xmlns:aop="http://www.springframework.org/schema/aop"
           xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                   http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
                   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
                   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
                   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

        <!-- registers all of Spring's standard post-processors for annotation-based configuration -->
        <context:annotation-config />

        <tx:annotation-driven/>
        <tx:jta-transaction-manager/>

       <bean id="properties" class="springcop.pojo.TestObject">

        </bean>

    </beans> 
```

我的**myspring-context.xml**是：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- Scans within the base package of the application for @Components to configure as beans -->
    <!-- @Controller, @Service, @Configuration, etc. -->
<context:component-scan base-package="springcop"/>

<!-- Configures the @Controller programming model -->
<mvc:annotation-driven/>

 <!-- Resolve logical view names to .jsp resources in the /WEB-INF/views directory -->
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/springviews/" />
    <property name="suffix" value=".jsp" />
</bean>

</beans> 
```

这是**MyController**

```
package springcop;

import java.util.Map;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.beans.factory.annotation.Value;

import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
public class MyController {

    public MyController () {
         System.out.println("--->GestioneController");

    }

     @RequestMapping(value = "/test", method = RequestMethod.GET)
      public String test() {
         System.out.println("--->test");
         return "test";
     }

} 
```

up运行没有错误。正如我在我的日志中打印的那样，Spring 似乎可以工作“--->GestioneController，它位于我的 COntroller 的构造函数中。

无论如何，当我在浏览器中打开

```
http://localhost:9080/myfolder/myspring/test 
```

在 MyController 中执行测试方法我得到 404 错误。

我应该怎么做才能让它工作？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:06:14.667

假设您的 webapp 的名称`myfolder`如问题中所列，则 url 将是...

```
http://localhost:9080/myfolder/springviews/test 
```

问题是您将调度程序 servlet 映射到 springviews。您需要在 web.xml 中按如下方式映射调度程序 servlet...

```
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/<url-pattern>
</servlet-mapping> 
```

**编辑：** 此外，您已将弹簧配置放在上下文参数中，但您没有添加侦听器来获取它。将以下内容添加到您的 web.xml....

```
<listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

# eclipse - eclipse - 如何将文件夹部署到tomcat战争中

> ID：15814361
> 
> 赞同：0
> 
> 时间：2013-04-04T14:40:02.580
> 
> 标签：eclipse, tomcat7, eclipse-indigo

几年前，我曾经使用过旧版本的 eclipse 和 tomcat。而且我记得除了编译的源文件夹之外，还有一个配置选项说明了哪些文件夹将部署到tomcat war。例如，复制一个包含 JS 文件的文件夹

但是，我在 eclipse-indigo 中找不到这个选项。你能帮忙吗？

# java - 使用另一个表的结果将数据插入到多个表中

> ID：15814363
> 
> 赞同：2
> 
> 时间：2013-04-04T14:40:06.300
> 
> 标签：java, mysql, jdbc

我正在将 JDBC 与 MySql 一起使用。我正在将数据插入一个表并获取其主键`transactionid`。现在将带有 transactionid 的数据插入到另一个表中。

我的代码：

```
if (connection != null) {
        System.out.println("Now connection is created successfully");
        stmt=connection.createStatement();
        Date date=new Date();
        DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss");
        String time=formatter.format(date);
        System.out.println("time is   "+time);
        //insert transaction id and minimum support....
        mySql = "insert into Transaction (minimumsupport)   
 values('"+minimumSupport+"')";
        stmt.executeUpdate(mySql,Statement.RETURN_GENERATED_KEYS);
        ResultSet rt=stmt.getGeneratedKeys();
        int transactionId;
        while(rt.next()){
            transactionId=rt.getInt(1);
            System.out.println("the transaction id is: "+transactionId);
        }
        rt.close();

        int i;
        Statement stmt1;
        for(i=0;i<productArray.length;i++)
        {
            stmt=connection.createStatement();
            System.out.println("first value: "+productArray[i]);
            mySql = "insert into 
                      Producttransaction(transactionid,productId)
   values('"+transactionId+"','"+productArray[i]+"')";
            stmt.executeUpdate(mySql);
            status="productAdded";
            System.out.println("product added");
        }
            //To insert the data into the tables....
        connection.close(); 
```

引发以下异常：

```
Exception in thread "main" com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: 
Cannot add or update a child row: a foreign key constraint fails (`aprioridb`.`Producttransaction`, CONSTRAINT `fk_Productid` FOREIGN KEY (`transactionid`) REFERENCES `Product` (`productId`) ON DELETE NO ACTION ON UPDATE NO ACTION) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:53:16.087

看来您的外键约束是错误的：

```
FOREIGN KEY (transactionid) REFERENCES Product (productId) 
```

应该

```
FOREIGN KEY (productid) REFERENCES Product (productId) 
```

此外，了解预处理语句以避免 SQL 注入攻击，拥有更健壮和更高效的代码。

# android - 如何使用 Google Analytics API v2 从 Android 发送崩溃报告

> ID：15814364
> 
> 赞同：3
> 
> 时间：2013-04-04T14:40:06.907
> 
> 标签：android, google-analytics, google-analytics-api

我在尝试在我的 Android 本机应用程序上设置一个有效的 GoogleAnalytics 环境时遇到了麻烦（并且非常沮丧）。在我看来，主要是文档相当不完整，只要它工作正常，这不是问题。但在我的情况下，它不是。

我在 GoogleAnalytics 上创建了一个配置文件。我可以看到它以两种方式运行良好：

*   在日志中，我可以看到应用程序使用哪个 URL 来报告基本活动使用情况
*   在 GoogleAnalytics 仪表板/实时/概览上，我可以看到报告了我对该应用程序的使用情况。

但是，无论我使用的[GoogleAnalytics 文档](https://developers.google.com/analytics/devguides/collection/android/v2/exceptions)中列出的替代方案如何，我都看不到任何崩溃。

崩溃报告是否也应该延迟 24 小时？

环境

```
<bool name="ga_reportUncaughtExceptions">true</bool> 
```

，当发生崩溃时（明确抛出一个*新的 RuntimeException("TestGoogleAnalytics")*），我可以在日志中看到：

```
I/GAV2    (31358): Thread[main,5,main]: Tracking Exception: TestGoogleAnalytics
W/GAV2    (31358): Thread[main,5,main]: dispatch call queued.  Need to call GAServiceManager.getInstance().initialize().
I/GAV2    (31358): Thread[main,5,main]: Passing exception to original handler. 
```

而且我想知道警告是否暗示了我错过初始化的任何内容。

我无法找到有关此的太多信息

```
GAServiceManager.getInstance().initialize() 
```

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:02:52.033

好吧，我终于在第二天收到了我的报告。不知何故，“GAV2”正在打印出许多似乎不会影响统计数据和崩溃报告的错误和警告。

# c# - 在 C# 中，使用 Delegate 类调用构造函数

> ID：15814366
> 
> 赞同：2
> 
> 时间：2013-04-04T14:40:14.200
> 
> 标签：c#

有一个方法定义如下：

```
public static void MyMethod(Delegate action, parames object[] parameters)
{
   action.DynamicInvoke(parameters);
   //Do something
} 
```

到目前为止，这种方法可以很好地接收具有任意数量参数的各种方法和函数，但我想知道是否有一种方法可以将构造函数作为 Delegate 参数传递。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T14:42:17.010

您必须围绕构造函数构造一个匿名函数，因为构造函数不能直接转换为委托。（这是因为构造函数并不是真正创建对象的对象；`newobj`指令创建对象，然后调用构造函数来初始化分配的内存。直接为构造函数创建委托将等同于`call`指令，但这并不对构造函数有意义。）

例如，给定这种类型：

```
class Foo {
    public Foo(string str) { }
} 
```

你可以这样做：

```
MyMethod(new Func<string, Foo>(str => new Foo(str)), "a string"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:43:34.393

正如 cdhowie 向您展示的那样，您当前的方法是可能的，但如果需要，另一种选择是利用`Activator.CreateInstance`，所以它可能看起来像这样：

```
public static object CreateObject(Type t, params object[] parameters)
{
    return Activator.CreateInstance(t, parameters);
} 
```

# java - System.exit 在 Linux 上不是线程安全的？

> ID：15814367
> 
> 赞同：6
> 
> 时间：2013-04-04T14:40:14.467
> 
> 标签：java, linux, awt, x11, openjdk

我刚刚从 Oracle JDK 1.6 切换到 Open JDK 1.7.0_03，并且在退出时遇到了一个相当显着的死锁：

```
java.lang.Thread.State: WAITING (on object monitor)
 at java.lang.Object.wait(Native Method)
 at java.lang.Thread.join(Thread.java:1258)
 - locked <0x8608dda0> (a sun.awt.X11.XToolkit$1$1)
 at java.lang.Thread.join(Thread.java:1332)
 at java.lang.ApplicationShutdownHooks.runHooks(ApplicationShutdownHooks.java:106)
 at java.lang.ApplicationShutdownHooks$1.run(ApplicationShutdownHooks.java:46)
 at java.lang.Shutdown.runHooks(Shutdown.java:123)
 at java.lang.Shutdown.sequence(Shutdown.java:167)
 at java.lang.Shutdown.exit(Shutdown.java:212)
 - locked <0x8603df28> (a java.lang.Class for java.lang.Shutdown)
 at java.lang.Runtime.exit(Runtime.java:107)
 at java.lang.System.exit(System.java:960) 
```

看来您必须从 AWT 事件队列中调用 System.exit。这是真的吗？[Sun docs Runtime.exit](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exit%28int%29)中没有关于线程要求的文档

我遇到了其他令人惊讶的情况，即仅在 Linux 上才需要获取 AWT 树锁，但这个情况很重要。这是一个错误，还是我只是错过了文档中的某些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:45:56.217

这取决于，该`runHooks`方法将启动通过注册的任何钩子线程`Runtime.addShutdownHook`并等待它们完成。如果您的任何钩子线程正在锁定 AWT 事件线程也需要的某些资源，它们可能会导致死锁。

如果您必须在 AWT 事件线程中调用 System.exit，我建议您在另一个线程中调用它，例如：

```
 new Thread(){
            public void run() {
                System.exit(0);
            }
   }.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:54:59.833

如果不了解应用程序正在做什么（理想情况下，这将采用[SSCCE](http://sscce.org/)的形式），就不可能说这是否是运行时中的错误。

例如，下面演示了一个类似的死锁，涉及`System.exit()`. 但是，这显然是应用程序中的错误，而不是`System.exit()`：

```
public class OhNo {

    final static Object lock = new Object();

    public static void main(String[] args) {
        new Thread(new Runnable() {
            public void run() {
                synchronized (lock) {
                    for (;;) {
                    }
                }
            }
        }).start();
        Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {
            public void run() {
                synchronized (lock) {
                    System.out.println("in shutdown hook");
                }
            }
        }));
        System.out.println("about to call System.exit()");
        System.exit(0);
    }
} 
```

# php - 获取单选按钮值并通过 ajax 发送到 php

> ID：15814369
> 
> 赞同：5
> 
> 时间：2013-04-04T14:40:18.907
> 
> 标签：php, jquery, html, ajax, radio-button

我的网站上有一个民意调查，每个答案旁边都会显示单选按钮。当用户选择一个选项并提交时，我通过 ajax 运行一个 php 脚本以将值或选定的单选按钮插入表中。

我的 Ajax 正在运行，但当前每行插入 0 行，因此它没有从单选按钮中获取值。任何帮助，将不胜感激。

HTML：

```
<form id="poll_form" method="post" accept-charset="utf-8">  
    <input type="radio" name="poll_option" value="1" id="poll_option" /><label for='1'>&nbsp;Arts</label><br />
    <input type="radio" name="poll_option" value="2" id="poll_option" /><label for='2'>&nbsp;Film</label><br />
    <input type="radio" name="poll_option" value="3" id="poll_option" /><label for='3'>&nbsp;Games</label><br />
    <input type="radio" name="poll_option" value="4" id="poll_option" /><label for='4'>&nbsp;Music</label><br />
    <input type="radio" name="poll_option" value="5" id="poll_option" /><label for='5'>&nbsp;Sports</label><br />
    <input type="radio" name="poll_option" value="6" id="poll_option" /><label for='6'>&nbsp;Television</label><br />    
    <input type="submit" value="Vote &rarr;" id="submit_vote" class="poll_btn"/> 
</form> 
```

阿贾克斯：

```
 $("#submit_vote").click(function(e)
    { 
    var option=$('input[type="radio"]:checked').val();
    $optionID = "="+optionID;

    $.ajax({
        type: "POST",
        url: "ajax_submit_vote.php",
        data: {"optionID" : $optionID}
    });
}); 
```

PHP：（缩短版）

```
 if($_SERVER['REQUEST_METHOD'] == "POST"){

    //Get value from posted form
    $option = $_POST['poll_option'];

    //Insert into db
    $insert_vote = "INSERT into poll (userip,categoryid) VALUES ('$ip','$option')"; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T14:49:29.760

```
$("#submit_vote").click(function(e){ 

    $.ajax( {
      type: "POST",
      url: "ajax_submit_vote.php",
      data: $('#poll_form').serialize(),
      success: function( response ) {}
    });

}); 
```

然后，您应该可以在 PHP 脚本中访问 POST 变量“poll_option”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:49:53.640

```
var option = $('input[type="radio"]:checked').val();

$.ajax({
    type: "POST",
    url: "ajax_submit_vote.php",
    data: { poll_option : option }
}); 
```

因此，在您正在阅读的 PHP 中，`$_POST['poll_option']`您必须将`poll_option`其用作数据对象中的键。此外，该值的存储`option`方式`$optionID`与您尝试使用的方式不同。

是 Javascript 中变量名中的`$`一个有效字符，它本身并没有做任何特殊的事情，但是一些编码人员在任何 jQuery 对象的前缀上加上前缀，`$`因此他们可以浏览代码并轻松查看哪些变量已经具有 jQuery 包装器。

例如：

```
var $option = $('input[type="radio"]:checked'); // $option is the jQuery wrapped HTML element
var myValue = $option.val(); // we know $option already has the jQuery wrapper so no need to use the $(..) syntax. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:43:40.437

```
 $optionID = "="+optionID; 
```

我不太明白你在这里要做什么，在 javascript 中你没有使用`$`.

```
data: { optionID : option} 
```

像这样使用它应该可以工作。你会在 PHP 中像这样检索它：

```
$option_value=$_POST['optionID']; 
```

# unicode - 将 unicode 数据写入文件时出错

> ID：15814370
> 
> 赞同：0
> 
> 时间：2013-04-04T14:40:21.843
> 
> 标签：unicode, python-2.7, writetofile

我正在尝试将 unicode 数据（实际数据包含德语字符）写入文件，但出现错误：

```
Traceback (most recent call last):
  File "C:\Python27\extract_osm_road_nw.py", line 76, in <module>
    file.write(str(list_way_id[index][2][i][1]))
UnicodeEncodeError: 'ascii' codec can't encode character u'\xdf' in position 12: ordinal not in range(128) 
```

代码是：

```
## writing the data in a file
## The data format is:
## A list of: [tuple(way ref id,list[tuple(node id, lat, long)],list[tuple(key,value)]),.....]
## For example: [(u'72439830', [(u'298094414', u'52.4626304', u'10.5579578'), (u'860126050', u'52.4626762', u'10.5576574')], [(u'name', u'General-BeckStra\xdfe')]),.....]

with codecs.open("extracted_osm_file.csv", "w", encoding="utf-8") as file:
    for index in range(len(list_way_id)):
        file.write("Way ID Ref No: ")
        file.write(str(list_way_id[index][0]))## points to the way id ref no
        file.write("\n")
        file.write("Node reference id, latitude, longitude: ")
        file.write("\n")
        for i in range(len(list_way_id[index][1])):
            file.write(str(list_way_id[index][1][i][0]))
            file.write(",")
            file.write(str(list_way_id[index][1][i][1]))
            file.write(",")
            file.write(str(list_way_id[index][1][i][2]))
            file.write("\n")
        for i in range(len(list_way_id[index][2])):
            file.write(str(list_way_id[index][2][i][0]))
            file.write(",")
            file.write(str(list_way_id[index][2][i][1]))
            file.write("\n")
    file.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:43:34.050

删除对 的调用`str()`。这些尝试使用默认的 ASCII 编码将您必须的 unicode 数据转换为字节码。

您可能希望在`csv`此处使用该模块并免去编写所有这些逗号的痛苦，但如果您不能，至少要正确使用循环：

```
with codecs.open("extracted_osm_file.csv", "w", encoding="utf-8") as fileobj:
    for line in list_way_id:
        fileobj.write(u'Way ID Ref No: {}\n'.format(line[0]))
        fileobj.write(u'Node reference id, latitude, longitude: \n')
        fileobj.write(u'\n'.join([u','.join(subentry)
            for entry in line[1:] for subentry in entry])) 
```

对于您的部分示例，它会写：

```
Way ID Ref No: 72439830
Node reference id, latitude, longitude: 
298094414,52.4626304,10.5579578
860126050,52.4626762,10.5576574
name,General-BeckStra\xc3\x9fe 
```

# ios - 改变图像的颜色

> ID：15814371
> 
> 赞同：-2
> 
> 时间：2013-04-04T14:40:31.467
> 
> 标签：ios, objective-c, colors, core-graphics

在我的应用程序中，我使用 QR 码。所以我有一个库，可以让我使用 QR 码制作 UIImage。此图像类似于默认 QR

![在此处输入图像描述](https://i.stack.imgur.com/sykdO.jpg)

所以我需要删除白色（使透明），并将黑色改为白色。最后我必须有白色透明的二维码

![在此处输入图像描述](https://i.stack.imgur.com/fsB2v.png)

最好的决定是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:43:18.967

使用 gimp，您可以将白色设置为透明

[http://www.youtube.com/watch?v=AC5vdKuwTp0](http://www.youtube.com/watch?v=AC5vdKuwTp0)

# java - Zebra EM 220，使用 Android 打印 Code 128 条码

> ID：15814381
> 
> 赞同：1
> 
> 时间：2013-04-04T14:40:56.500
> 
> 标签：java, android, barcode, zebra-printers, code128

我想使用 Zebra 的 EM 220 SDK for Android 打印代码 128 条码。
我尝试使用 PrintBarcode() 方法打印它，如下所示：

```
BxlService bxl = new BxlService();
bxl.Connect(macAddress);
String data = "123589647525";
bxl.PrintBarcode(data.getBytes(), data.length(), BxlService.BXL_BCS_Code128, 100, 3, 0, BxlService.BXL_BC_TEXT_NONE);
bxl.Disconnect(); 
```

但是打印的代码不能被Android扫描应用程序扫描，比如ZXing。

在网上搜索后，我了解到数据必须被格式化（即使我有点惊讶 Zebra SDK 不这样做......）并找到了有助于对数据进行编码的barcode4j 库。但是，即使使用库，也无法扫描打印的条形码。

```
BxlService bxl = new BxlService();
bxl.Connect(macAdress);
DefaultCode128Encoder dce = new DefaultCode128Encoder();

String data = "123456679857";
int[] i = dce.encode(data);

    String barcode = "";
for (int j : i) {
    barcode += j;
}
bxl.PrintBarcode(barcode.getBytes(), barcode.length(), BxlService.BXL_BCS_Code128, 100, 3, 0, BxlService.BXL_BC_TEXT_NONE);
bxl.Disconnect(); 
```

所以，我的问题很简单：如何使用 Zebra 的 EM 220 SDK for Android 打印代码 128 条码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T14:54:33.503

最后，我找到了解决方法。
我使用 ZXing 对我的数据进行编码，使用条形码创建位图，在使用 printImage() 方法打印之前将位图保存为文件。

它有效，但如果有人知道如何使用 printBarcode() 方法，我会很感激他告诉我该怎么做。

# jqgrid - 客户端 jqgrid 与服务器端 jqGrid 之间的性能差异

> ID：15814384
> 
> 赞同：0
> 
> 时间：2013-04-04T14:41:10.017
> 
> 标签：jqgrid, jqgrid-asp.net, mvcjqgrid

我正在开发一个 MVC 项目，我将[jqGrid 用于 ASP.NET MVC](http://www.trirand.net/documentation/aspnetmvc/index.htm)。但是，我被告知[纯 jquery 客户端版本（jqGrid）](http://www.trirand.com/jqgridwiki/doku.php)的性能更好。这是真的？对我来说，他们似乎都在做同样的事情，只是代码在不同的地方——所有的批量工作仍然是使用 ajax 完成的。任何建议将不胜感激。

编辑-我使用网格的大多数地方都少于 100 行，页面大小 30，大约 10-12 列，主要是字符串和日期。只有一页我使用了 500 行的网格，但很少使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:46:56.973

I don't think that you should rewrite your existing code, but I can agree that in case of usage less then 1000 rows of data the usage of `loadonce: true` is real alternative.

The design of jqGrid is oriented on server side sorting, paging and filtering/searching. So most users who start to use jqGrid in version less then 3.7 have already good implementation of backend. SQL Server with native code should be sure more quickly as JavaScript code were originally designed as interpreter language. On the other side current versions of web browsers contain quickly JavaScript engine. Every new version improve more and more performance of JavaScript.

It could be important for the user *the total time* of the paring, sorting or filtering operation. It includes the round trip time to the web server. One can better do exact measure in productive environment to compare performance of local grids with grids with pure remote `datatype` ("json" or "xml" without usage of `loadonce`). The rough rule which I use myself is:

*   if the number of rows under some 1000 rows I use `loadonce: true` and so client side paging, sorting and filtering of data
*   if the total number of rows larger as 10000 I use always server side paging, sorting and filtering

Your environment (network, Round trip time to the server and so on) could be other. So the edge when you should better user client side holding of data and when server side holding could be other. Nevertheless *the usage of `loadonce: true` could be really very effective* in the practice.

I personally don't use commertal version of jqGrid which you referenced. So I have to write backend side myself. In case of usage of `loadonce: true` the server code is very simple. It's easy to debug and to maintain.

# android - 通过 UDP 数据包延迟音频提交

> ID：15814391
> 
> 赞同：1
> 
> 时间：2013-04-04T14:41:18.380
> 
> 标签：android, audio, udp

我目前正在开发一个应用程序来传输音频。我有两个服务正在运行，一个接收它，一个发送它。发件人的重要内容如下所示：

```
 final DatagramSocket dSocket = new DatagramSocket();

            android.os.Process
                    .setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);

            Log.d(TAG, "Thread starting...");
            int buffersize = AudioRecord.getMinBufferSize(11025,
                    AudioFormat.CHANNEL_CONFIGURATION_MONO,
                    AudioFormat.ENCODING_PCM_16BIT);

            AudioRecord arec = new AudioRecord(
                    MediaRecorder.AudioSource.MIC, 11025,
                    AudioFormat.CHANNEL_CONFIGURATION_MONO,
                    AudioFormat.ENCODING_PCM_16BIT, buffersize);

            byte[] buffer = new byte[buffersize];
            Log.d(TAG, "Starting to record, buffersize=" + buffersize);
            arec.startRecording();

            while (isRunning && !isInterrupted()) {

                try {
                    Log.d(TAG, "Recording..");
                    arec.read(buffer, 0, buffersize);
                    DatagramPacket dPacket = new DatagramPacket(buffer,
                            buffersize);

                    for (Peer cur : mPeers) {
                        if(cur.isSelf) continue;

                        dPacket.setAddress(InetAddress
                                .getByName(cur.IP_ADDRESS));
                        dPacket.setPort(Config.UDP_PORT);
                        dSocket.send(dPacket);
                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }
            } 
```

此代码工作并提交音频数据包。

接收器服务如下所示：

```
 // DatagramSocket dSocket = new DatagramSocket();
            DatagramChannel dChannel = DatagramChannel.open();
            DatagramSocket dSocket = dChannel.socket();

            dSocket.setReuseAddress(true);
            dSocket.setSoTimeout(2000);
            dSocket.bind(new InetSocketAddress(Config.UDP_PORT));

            Log.d(TAG, "DatagramSocket open.");

            android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);

            int buffersize = AudioRecord.getMinBufferSize(11025,
                    AudioFormat.CHANNEL_CONFIGURATION_MONO,
                    AudioFormat.ENCODING_PCM_16BIT);

            AudioTrack aTrack = new AudioTrack(
                    AudioManager.STREAM_VOICE_CALL, 11025,
                    AudioFormat.CHANNEL_CONFIGURATION_MONO,
                    AudioFormat.ENCODING_PCM_16BIT, buffersize,
                    AudioTrack.MODE_STREAM);

            DatagramPacket dPacket = new DatagramPacket(
                    new byte[buffersize], buffersize);
            Log.d(TAG, "Packet with buffersize=" + buffersize);
            aTrack.play();
            Log.d(TAG, "Playing track..");

            byte[] buffer = new byte[buffersize];

            while (isRunning && !isInterrupted()) {
                try {
                    dSocket.receive(dPacket);
                    buffer = dPacket.getData();

                    aTrack.setPlaybackRate(11025);
                    aTrack.write(buffer, 0, buffer.length);

                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            aTrack.stop(); 
```

这也有效，但是在发送超过几秒钟后，会有很大的延迟，数据包仍然会到达但速度很慢，并且音频播放只是“滞后” - 我能做些什么来提高质量？这是一个直接的点对点连接，不涉及服务器。我应该增加缓冲区大小吗？当前缓冲区大小是我从 Android 获得的最小缓冲区大小，在我的设备（两个 Galaxy Nexus）上为 1024。顺便说一句，启动另一个线程的服务，其优先级设置为“紧急”（我相信这是最高可用的）。出于我的目的，mPeers 列表只有一个对等点，所以我猜“for”循环并没有真正延迟这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T20:27:38.210

您是否检查过删除发送者循环的网络相关部分时会发生什么？即，来自麦克风的 read() 调用是否立即返回？另外，您描述了数据包到达缓慢，但是您是否检查过它们发送之间是否也有很大的延迟？

我问的原因是您描述的现象可能是由发送套接字阻塞引起的，因为它的缓冲区已满。如果套接字阻塞，send() 调用将需要很长时间才能完成。除非您有非常高的带宽流量或非常慢的 CPU，否则 UDP 套接字不应该发生这种情况（它们通常是触发后忘记），但值得检查。

为了避免阻塞，创建一个非阻塞套接字。我对 Java 网络不太熟悉，但似乎需要[DatagramChannel](http://developer.android.com/reference/java/nio/channels/DatagramChannel.html)来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:53:45.670

好的，所以延迟消失了。我所做的是我只是增加了 UDP 数据包的缓冲区大小。我从 Android 收到的最小缓冲区大小是（在我的设备上）1024 字节。现在我做这样的事情：

```
int maxBufferSize = 4096; // my value. see what's working best for you.
int minBufferSize = AudioRecord.getMinBufferSize(11025,
                AudioFormat.CHANNEL_CONFIGURATION_MONO,
                AudioFormat.ENCODING_PCM_16BIT);
int actualBufferSize = Math.max(minBufferSize, maxBufferSize); 
```

4 KB 缓冲区，音频传输非常好，绝对没有延迟。

# release - ABAP 功能列表

> ID：15814393
> 
> 赞同：3
> 
> 时间：2013-04-04T14:41:20.270
> 
> 标签：release, abap

所以我刚刚发现了[字符串模板](http://help.sap.com/abapdocu_702/en/abenstring_templates.htm)，它们很棒。是否有资源可以找到每个 SAP 版本为 ABAP 带来的内容？

严格来说不是一个 SO 问题，但如果所有 ABAP 开发人员能够研究发布中的新内容，他们就会变得更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:58:41.773

Transaction `ABAPDOCU`，然后导航到 ABAP Keyword Documentation --> ABAP - Release-Specific Changes：

![在此处输入图像描述](https://i.stack.imgur.com/i3tuL.png)

# jquery - jQuery 选项卡未按预期显示

> ID：15814394
> 
> 赞同：0
> 
> 时间：2013-04-04T14:41:23.393
> 
> 标签：jquery, tabs

我正在使用 jquery UI 选项卡，它没有显示我的 tab3 内容.. 有时它的第三个选项卡内容附加到 tab2 内容的末尾.. 有什么想法吗？我这是我的代码.. 抱歉代码混乱.. . 并提前感谢..

```
 <body>
    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">My Info</a>
            </li>
            <li><a href="#tabs-2">My Member</a>
            </li>
            <li><a href="#tabs-3">My schedule</a>
            </li>
        </ul>
        <div id="tabs-1"></div>
        <div id="tabs-2">Welcome trainer1
            <br>
            <br>
            <form id="form11" name="form11" action="action2.php" method="post">
                <table border='1'>
                    <tr>
                        <td>Tick</td>
                        <td>MemberName</td>
                    </tr>
                    <tr>
                        <td>
                            <input type="checkbox" />
                        </td>
                        <td>member1</td>
                    </tr>
                    <tr>
                        <td>
                            <input type="checkbox" />
                        </td>
                        <td>member2</td>
                    </tr>
                    <tr>
                        <td>
                            <input type="checkbox" />
                        </td>
                        <td>member3</td>
                    </tr>
                    <input type='submit' id='submit10' value='Add Member' />
                    <input type='submit' id='submit11' value='Delete Member' />
            </form>
            <br>
            <br>
        </div>
        <div id="tabs-3">tab 3</div>
                </div>
</body> 
```

我发现关闭形式和一些 div 不正确，在小提琴和 mozilla 中的红色标记......我检查了所有标签，但不知道我哪里出错了......帮助!!!!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:59:44.267

在更新的信息中，您缺少结束表标记

```
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:08:28.427

您刚刚忘记关闭表格标签：

```
<body>
    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">My Info</a>
            </li>
            <li><a href="#tabs-2">My Member</a>
            </li>
            <li><a href="#tabs-3">My schedule</a>
            </li>
        </ul>
        <div id="tabs-1"></div>
        <div id="tabs-2">Welcome trainer1
            <br>
            <br>
            <form id="form11" name="form11" action="action2.php" method="post">
                <table border='1'>
                    <tr>
                        <td>Tick</td>
                        <td>MemberName</td>
                    </tr>
                    <tr>
                        <td>
                        <input type="checkbox" />
                        </td>
                        <td>member1</td>
                    </tr>
                    <tr>
                        <td>
                        <input type="checkbox" />
                        </td>
                        <td>member2</td>
                    </tr>
                    <tr>
                        <td>
                        <input type="checkbox" />
                        </td>
                        <td>member3</td>
                    </tr>

                </table>

                <input type='submit' id='submit10' value='Add Member' />
                <input type='submit' id='submit11' value='Delete Member' />
            </form>
            <br>
            <br>
        </div>
        <div id="tabs-3">tab 3</div>
    </div>
</body> 
```

# sql - 删除具有重复值的行

> ID：15814400
> 
> 赞同：5
> 
> 时间：2013-04-04T14:41:35.020
> 
> 标签：sql, sql-server

我必须清理具有重复行的表：

```
id: serial id
gid: group id
url: string <- this is the column that I have to cleanup 
```

一个`gid`可能有多个`url`值：

```
id    gid   url
----  ----  ------------
1     12    www.gmail.com
2     12    www.some.com
3     12    www.some.com <-- duplicate
4     13    www.other.com
5     13    www.milfsome.com <-- not a duplicate 
```

我想对整个表执行一个查询并删除`gid`和`url`重复的所有行。在上面的示例中，删除后，我希望只剩下 1、2、4 和 5 个。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T14:43:43.603

```
;WITH x AS 
(
   SELECT id, gid, url, rn = ROW_NUMBER() OVER
     (PARTITION BY gid, url ORDER BY id) 
   FROM dbo.table
)
SELECT id,gid,url FROM x WHERE rn = 1 -- the rows you'll keep
-- SELECT id,gid,url FROM x WHERE rn > 1 -- the rows you'll delete
-- DELETE x WHERE rn > 1; -- do the delete 
```

一旦您对第一个选择感到满意，这表明您将保留的行，将其删除并取消注释第二个选择。一旦您对此感到满意，这表明您将删除的行，将其删除并取消注释删除。

如果您不想删除数据，只需忽略`SELECT`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:44:57.217

```
SELECT 
MIN(id) AS id,
gid,
url
FROM yourTable
GROUP BY gid, url 
```

# javascript - 我如何在没有大图书馆的情况下获得触摸事件

> ID：15814405
> 
> 赞同：0
> 
> 时间：2013-04-04T14:41:50.303
> 
> 标签：javascript, jquery

我正在使用jquery，但我不想使用jquery mobile，因为它太大了，我认为我不需要它。我要做的就是获得一个触摸事件。这就是我所拥有的。

```
 $('#menuButton').on('click touchstart', function(){
  $('#menu').toggleClass('block')
 }); 
```

它只是一种工作，但似乎在我的手机上发射了两次。我想我应该以某种方式检查 touchstart 和 touchend 。希望这需要适用于所有类型的设备。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:53:15.327

看哪！触摸的生命周期：

1.  你的手指碰到玻璃 -> touchstart！
2.  你的手指离开玻璃 -> touchend！
3.  你的手指徘徊 - >点击！

现在鼠标点击的生命周期：

1.  你的手指按下按钮 - > mousedown！
2.  你的手指它消除了按钮的压力 - > mouseup！
3.  你的手指徘徊 - >点击！

如果您同时监听 touchstart 和 click，则该事件将在鼠标或触控板计算机上触发一次，在触摸设备上触发两次，因为您在生命周期中监听 2 个事件。

如果你真的想为桌面使用 click 和触摸设备的 touchstart（在很多情况下是个好主意），你可以这样做：

```
 var clickEvent = (isMobile)?'touchstart':'click';
 $('#menuButton').on(clickEvent, function(){
   $('#menu').toggleClass('block')
 }); 
```

你如何去寻找`isMobile`是另一回事。

* * *

更新：如果您对它的[npm感兴趣，我已经编写了一个方便的脚本来检测移动设备`isMobile`](https://npmjs.org/package/ismobile)

# .net - 可移植类库 .NET Framework 4.5 的 Visual Studio 2012 中的引用错误

> ID：15814408
> 
> 赞同：0
> 
> 时间：2013-04-04T14:41:59.220
> 
> 标签：.net, reference, frameworks, portable-class-library

我正在使用带有 MVVM 模式的 Visual Studio 2012 Ultimate 中的可移植类库。

当我在 ViewModel 中添加“使用”以引用 .NET 4 .dll 时，它说：

```
The type or namespace name 'prgTest' could not be found (are you missing a using directive or an assembly reference?) 
```

附加信息：

```
The primary reference "MyDll" could not be resolved because it has an
indirect dependency on the framework assembly "mscorlib, Version=4.0.0.0,
Culture=neutral, PublicKeyToken=b77a5c561934e089" which could not be resolved in the
currently targeted framework. ".NETFramework,Version=v4.0,Profile=Client". To resolve
this problem, either remove the reference "MyDll" or retarget your 
application to a framework version which contains "mscorlib, Version=4.0.0.0, 
Culture=neutral, PublicKeyToken=b77a5c561934e089". 
```

如何“修复” MyDll.dll 或使其与我的项目兼容？

# objective-c - 使用 NSRegularExpression 用模板替换 NSString 中的匹配项

> ID：15814409
> 
> 赞同：0
> 
> 时间：2013-04-04T14:42:07.427
> 
> 标签：objective-c, regex

我正在尝试在 NSString 中检测`<br>`or `<Br>`or `< br>`,... 并将其替换为`\n`. 我使用`NSRegularExpression`并编写了以下代码：

```
NSString *string = @"123 < br><br>1245; Ross <Br>Test 12<br>";
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<[* ](br|BR|bR|Br|br)>" options:NSRegularExpressionCaseInsensitive error:&error];
NSString *modifiedString = [regex stringByReplacingMatchesInString:string options:0 range:NSMakeRange(0, [string length]) withTemplate:@"\n"];

NSLog(@"%@", modifiedString); 
```

它工作正常，但它只替换第一个匹配项，而不是替换所有匹配项。请帮我检测所有匹配项并替换它们。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:53:24.377

您目前不处理任意数量的空白。为了更好地衡量，您还应该在之后处理空格`br`并处理结束斜杠，因为`<br />` 这是在 HTML 中编写换行符的正确方法。

你最终会得到一个看起来像这样的模式

```
<\s*(br|BR|bR|Br|br)\s*\/*> 
```

或写成 NSRegularExpression

```
NSError *error = NULL;
NSRegularExpression *regex = 
  [NSRegularExpression regularExpressionWithPattern:@"<\\s*(br|BR|bR|Br|br)\\s*\\/*>" 
                                            options:0 
                                              error:&error]; 
```

### 编辑

您还可以通过分隔两个字母使图案更紧凑

```
<\s*([bB][rR])\s*\/*> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:47:05.553

你已经接近了，你需要让它在你的 initial 之后处理任意数量的空格`<`，如果它根本没有任何空间就处理。

使用您的[示例](http://rubular.com/r/mYLG0C5CVV)，您可以使用正则表达式`<\s*(br|BR|bR|Br|br)>`让它`0 to N`在您的 BR 工作之前接受空格。您还可以通过使用 使其不区分大小写来进一步简化它`i`，这允许看起来更清晰的正则表达式来处理`BR`您将看到的所有变化。 [为此](http://rubular.com/r/99EWNZnWDY)，请使用`(?i)<\s*br>`.

我认为为了完整起见，您还可以在 之后包含任意数量的空间`br`，以处理任何可能被抛出的内容。我同意添加某种 catch`/>`来结束模式，因为`<br/>`它也是有效的 HTML。它使正则表达式看起来更[疯狂](http://rubular.com/r/SqxhLInAh4)，但归结为仅添加其他 3 部分。

`(?i)<\s*br\s*\/?\s*>`

它看起来真的很吓人，但很简单地分解成几个部分：

1.  `(?i)`打开不区分大小写以处理`br`.
2.  `<\s*`是标签的开头，紧跟任意数量的空格。
3.  `br\s*`是您的`br`字符后跟任意数量的空格。
4.  `\/?`是处理结束斜杠的 0 或 1 个实例（处理 HTML 有效标签，如`<br/>`和`<br>`.
5.  `\s*>`正在处理任意数量的空格，然后关闭`>`.

# c++ - 在复制赋值运算符中分配基类成员

> ID：15814412
> 
> 赞同：4
> 
> 时间：2013-04-04T14:42:24.310
> 
> 标签：c++, inheritance, copy-constructor, assignment-operator, initializer-list

我有一个继承自 MSFT 类的类，因此无法更改，我希望派生类的复制构造函数和复制赋值运算符具有相同的行为。我遇到的麻烦是，在复制构造函数中，您可以自由地为初始化列表中的基类调用构造函数，但在运算符中，这不是一个选项。如何在赋值运算符中正确地重新创建此行为？~~仅在运算符重载的主体中调用基类的构造函数就足够了吗？~~

附加说明：基类继承自 CObject，它具有 operator=() 和复制构造函数作为私有和未实现的方法，因此不幸的是，对它们的任何调用都会导致编译错误。

我在下面提供了一个简化的代码场景：

类声明：

```
class Base    
{
protected:
    int baseInt;
public:
    Base(int);
}

class Derived : public Base
{
public:
    Derived(const Derived& other);
    Derived& operator=(const Derived& rhs);
private:
    int derivedInt;
} 
```

派生类成员函数：

```
// Copy Constructor
Derived(const Derived& other) : Base(5)
{
    derivedInt = other.derivedInt;
}

// Copy Assignment Operator
Derived& operator=(const Derived& rhs)
{
    if (&rhs != this)
    {
        derivedInt = other.derivedInt;
        return *this;
    }
} 
```

编辑：更新语法并添加 CObject 注释

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T14:47:32.080

在一般情况下，您可以通过为基类子对象显式调用 operator= 或使用 copy&swap 习惯用法（如果可用）来执行此操作：

```
//explicit call to base operator=
Derived& operator=(const Derived& rhs)
{
  Base::operator=(rhs); //
  derivedInt = rhs.derivedInt;
  return *this;
}

//or copy&swap:
Derived& operator=(const Derived& rhs)
{
  Derived tmp(rhs); //copy
  tmp.swap(*this);
  return *this;
}

void swap(Derived& other)   
{
  Base::swap(other);
  std::swap(derivedInt,other.derivedInt);
} 
```

**更新：**由于您的基类不应该被复制分配，因此您的派生类也不应该被复制分配。在某些情况下，类包含不可复制的部分但完全可复制。在这些情况下，不可复制部分是不直接影响类对象状态的东西，例如唯一的 ID。那么这些部分通常不会在分配期间更改。但是，在这些情况下，不可复制部分不应包含在继承中，而应包含在聚合中。

简而言之：继承意味着“is-A”关系。您的 Base 无法复制。你的派生是一个基础。因此，您的 Derived 也无法复制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T14:45:20.303

像这样

```
Derived& operator=(const Derived& rhs)
{
    Base::operator=(rhs);
    derivedInt = rhs.derivedInt;
    return *this;
} 
```

# ruby-on-rails-3 - Rails Active Admin：如何在其他资源的显示页面中显示一个资源的索引页面？

> ID：15814419
> 
> 赞同：9
> 
> 时间：2013-04-04T14:42:43.320
> 
> 标签：ruby-on-rails-3, activeadmin

例如，在我的 Rails 应用程序中，我对 Client 和 Service 建模，并具有一对多的关联。我已将客户端注册为活动管理员中的资源，但我不想为服务创建单独的索引页面。我希望能够在客户端的显示页面上查看属于客户端的服务，但我希望服务列表看起来像在自己的索引页面上显示的那样：作为带有可排序列的表等。如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/5AQks.png)

客户端详细信息部分通过部分呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-23T17:11:58.237

排序功能由名为[IndexAsTable的](http://www.rubydoc.info/github/activeadmin/activeadmin/ActiveAdmin/Views/IndexAsTable)[Arbre 组件](http://www.activeadmin.org/docs/12-arbre-components.html)提供。注册资源 ClientService { [belongs_to](http://www.activeadmin.org/docs/2-resource-customization.html) :client }

# java - 在 GUI 中处理未处理的异常

> ID：15814420
> 
> 赞同：10
> 
> 时间：2013-04-04T14:42:45.030
> 
> 标签：java, python, swing, exception, wxpython

我主要是为精通技术的人（例如程序员、工程师等）编写一个小工具。由于这些工具通常是随着时间的推移而改进的快速hack，我知道会有未处理的异常并且用户不会介意。我希望用户能够向我发送回溯，以便我可以检查发生的情况并可能改进应用程序。

我通常做 wxPython 编程，但最近我做了一些 Java。我已经将[`TaskDialog`](http://code.google.com/p/oxbow/)课程连接到了`Thread.UncaughtExceptionHandler()`，我对结果非常满意。特别是它可以捕获和处理来自任何线程的异常：

![在此处输入图像描述](https://i.stack.imgur.com/G0948.png)

![在此处输入图像描述](https://i.stack.imgur.com/Q6SI6.png)

很长一段时间以来，我都在 wxPython 中做类似的事情。然而：

1.  我必须编写一个装饰器黑客才能很好地打印另一个线程的异常。
2.  即使功能正常，结果也很丑陋。

![在此处输入图像描述](https://i.stack.imgur.com/WeaUH.png)

这是 Java 和 wxPython 的代码，所以你可以看到我做了什么：

爪哇：

```
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.JButton;
import java.awt.GridBagLayout;
import java.awt.GridBagConstraints;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

import com.ezware.dialog.task.TaskDialogs;

public class SwingExceptionTest {

    private JFrame frame;

    public static void main(String[] args) {

        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        }
        catch (ClassNotFoundException e) {
        }
        catch (InstantiationException e) {
        }
        catch (IllegalAccessException e) {
        }
        catch (UnsupportedLookAndFeelException e) {
        }

        Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
            public void uncaughtException(Thread t, Throwable e) {
                TaskDialogs.showException(e);
            }
        });

        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    SwingExceptionTest window = new SwingExceptionTest();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public SwingExceptionTest() {
        initialize();
    }

    private void initialize() {
        frame = new JFrame();
        frame.setBounds(100, 100, 600, 400);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        GridBagLayout gridBagLayout = new GridBagLayout();
        gridBagLayout.columnWidths = new int[]{0, 0};
        gridBagLayout.rowHeights = new int[]{0, 0};
        gridBagLayout.columnWeights = new double[]{0.0, Double.MIN_VALUE};
        gridBagLayout.rowWeights = new double[]{0.0, Double.MIN_VALUE};
        frame.getContentPane().setLayout(gridBagLayout);

        JButton btnNewButton = new JButton("Throw!");
        btnNewButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                onButton();
            }
        });
        GridBagConstraints gbc_btnNewButton = new GridBagConstraints();
        gbc_btnNewButton.gridx = 0;
        gbc_btnNewButton.gridy = 0;
        frame.getContentPane().add(btnNewButton, gbc_btnNewButton);
    }

    protected void onButton(){
        Thread worker = new Thread() {
            public void run() { 
                throw new RuntimeException("Exception!");
            }
        };
        worker.start();
    }

} 
```

wxPython：

```
import StringIO
import sys
import traceback
import wx
from wx.lib.delayedresult import startWorker

def thread_guard(f):
    def thread_guard_wrapper(*args, **kwargs) :
        try:
            r = f(*args, **kwargs)
            return r
        except Exception:
            exc = sys.exc_info()
            output = StringIO.StringIO()
            traceback.print_exception(exc[0], exc[1], exc[2], file=output)
            raise Exception("<THREAD GUARD>\n\n" + output.getvalue())
    return thread_guard_wrapper

@thread_guard
def thread_func():
    return 1 / 0

def thread_done(result):
    r = result.get()
    print r

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.panel = wx.Panel(self)
        self.button = wx.Button(self.panel, label="Throw!")
        self.button.Bind(wx.EVT_BUTTON, self.OnButton)

        self.sizer = wx.BoxSizer()
        self.sizer.Add(self.button)

        self.panel.SetSizerAndFit(self.sizer)  
        self.Show()

    def OnButton(self, e):
        startWorker(thread_done, thread_func)

app = wx.App(True)
win = MainWindow(None, size=(600, 400))
app.MainLoop() 
```

现在的问题：

**我可以在 wxPython 中轻松地做类似于 Java 解决方案的事情吗？或者，在 Java 或 wxPython 中是否有更好的方法？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:38:34.070

在 Python 中，您可以设置`sys.execpthook`一个函数，以便为未捕获的异常调用该函数。然后你就不需要装饰器了，你可以在你的钩子函数中集中处理异常。

而不仅仅是打印异常回溯文本并让它显示在标准输出窗口中，您可以用它做一些更智能的事情，比如使用对话框来显示文本并拥有允许用户将错误信息发送回的控件开发人员，忽略未来的错误，重新启动应用程序，或任何你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T17:04:16.107

在 Java 中，如果[`TaskDialog`](http://code.google.com/p/oxbow/)不可用，您也许可以使用，如此[处](https://stackoverflow.com/a/14011536/230513)`JOptionPane`所示。[从事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)以外的线程，使用 包装调用，如此处所建议[的](https://stackoverflow.com/q/1595744/230513)。还可以考虑添加一个可选规定来调用.`EventQueue.invokeLater()`[`Desktop#mail()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#mail%28java.net.URI%29)

![图片](https://i.stack.imgur.com/hBAEe.png)

# ms-access - 通过设置变量使用简单的 VBA 代码自动填充访问表单

> ID：15814424
> 
> 赞同：0
> 
> 时间：2013-04-04T14:42:55.843
> 
> 标签：ms-access, vba, ms-access-2010

我最近被赋予了创建一个表单的任务，该表单将自动填充表格中的信息。使用称为 ModID 的主键选择表单自动填充的信息。我有一个组合框，其中包含列为活动的 ModID 列表。

```
SELECT ModID
FROM P_Review
WHERE Status = "Active" 
```

很简单。然后我在更新后的事件上运行 VBA 代码。因此，在选择或更改组合框的值后，它将运行此 VBA 代码。

```
Option Compare Database
Option Explicit

Private Sub selectModID_AfterUpdate()
    'Find the record that matches the control.
On Error GoTo ProcError
    Dim rs As Object
    Set rs = Me.RecordsetClone
    With rs
            .FindFirst "ModID=" & Me.selectModID
            If Not .NoMatch Then
                Me.Bookmark = .Bookmark
            Else
    DoCmd.RunCommand acCmdRecordsGoToNew
    Me!localModID = Me.selectModID.Column(0)

            End If
    End With

ExitProc:
    Exit Sub
ProcError:
    MsgBox "Error: " & Err.Number & ". " & Err.Description
    Resume ExitProc

End Sub 
```

代码运行良好（调试或运行时没有错误）。

现在是访问文本框。我想根据变量 localModID 填充某些字段。我在一个文本框中有一个 dlookup 来查找表 P_Review 中的信息。

```
=DLookUp("Threshold","P_Review","ModID =" & [localModID]) 
```

因此 DlookUp 应该在 P_Review 表中找到列阈值的值，其中 P_Review 中的 ModID 等于 VBA 代码中设置的 localModID。但是，当我转到表单视图并选择 ModID 时，我收到错误 3070：Microsoft Access 数据库引擎无法识别为有效的字段名称或表达式。我确实从另一个我们已经在使用的数据库中复制了这段代码，但在这个新实例中它失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:12:40.620

```
Private Sub ModID_AfterUpdate()
    Dim rs As Object

   Set rs = Me.RecordsetClone
   With rs
      .FindFirst "ModID='" & Me.ModID & "'"
   If Not .NoMatch Then
      Me.Bookmark = .Bookmark

   Else
      DoCmd.GoToRecord , , acNewRec
      Me!ModID = Me.ModID
   End If
   End With

End Sub 
```

这是问题的答案。我使用此代码自动更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:50:54.703

尝试

```
Forms!<whatever_this_form_name_is>![localModID] 
```

在您的 DLOOKUP 中

# ios - 将数据从子模态 VC 传递到父视图控制器的最佳方式？

> ID：15814426
> 
> 赞同：10
> 
> 时间：2013-04-04T14:42:57.193
> 
> 标签：ios, objective-c, xcode, modalviewcontroller

将数据从子模式视图传递到父视图控制器的最佳方法是什么？

我的 iPad 应用程序上有一个子模式登录屏幕，我想将用户信息传递回父拆分视图控制器。

我正在考虑使用 NSNotification，但我不确定这是否是将数据传回父级的最简单/最有效的方法。

谢谢！艾伦

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T06:17:18.093

我会建议，[就像 iPatel 所做的那样](https://stackoverflow.com/a/15814468/475052)，使用[委托](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)来解决您的问题。父视图控制器和登录视图控制器之间的关系使这种模式很合适。当一个对象创建另一个对象以履行特定职责时，应该将委托视为一种让创建的对象与创建者通信的方式。选择委托的一个特别令人信服的理由是，如果要完成的任务可能有多个步骤，需要对象之间的高级交互。你可以看看[`NSURLConnectionDelegate`协议](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html)作为一个例子。连接到 URL 是一项复杂的任务，涉及处理响应、满足身份验证挑战、保存下载的数据和处理错误等阶段，连接和委托在连接的生命周期内一起处理这些。

您可能已经注意到，在 Objective-C 中，协议用于实现委托，而无需将创建的对象（在本例中为您的登录视图控制器）与创建它的对象（父视图控制器）紧密耦合。然后，登录视图控制器可以与任何可以接收其协议中定义的消息的对象进行交互，而不是依赖于任何特定的类实现。明天，如果您收到允许任何视图控制器显示登录视图的要求，则登录视图控制器不需要更改。您的其他视图控制器可以实现其委托协议，创建和呈现登录视图，并将自己分配为委托，而登录视图控制器不知道它们的存在。

您在 Stack Overflow 上找到的一些委托示例可能非常令人困惑，并且与内置框架中的示例非常不同。必须仔细选择协议的名称和接口，以及分配给每个对象的职责，以便最大限度地重用代码，达到代码的目的。

您应该首先查看内置框架中的许多委托协议，以了解在代码中表达的关系是什么样的。这是另一个基于您的登录用例的小示例。我希望你会发现委托的目的是明确的，所涉及的对象的角色和职责是明确的，并通过它们在代码中的名称来表达。

首先，我们看一下 LoginViewController 的委托协议：

```
#import <UIKit/UIKit.h>

@protocol LoginViewControllerDelegate;

@interface LoginViewController : UIViewController

// We choose a name here that expresses what object is doing the delegating
@property (nonatomic, weak) id<LoginViewControllerDelegate> delegate;

@end

@protocol LoginViewControllerDelegate <NSObject>

// The methods declared here are all optional
@optional

// We name the methods here in a way that explains what the purpose of each message is
// Each takes a LoginViewController as the first argument, allowing one object to serve
// as the delegate of many LoginViewControllers
- (void)loginViewControllerDidLoginSuccessfully:(LoginViewController *)lvc;
- (void)loginViewController:(LoginViewController *)lvc didFailWithError:(NSError *)error;
- (void)loginViewControllerDidReceivePasswordResetRequest:(LoginViewController *)lvc;
- (void)loginViewControllerDiDReceiveSignupRequest:(LoginViewController *)lvc;
- (BOOL)loginViewControllerShouldAllowAnonymousLogin:(LoginViewController *)lvc;

@end 
```

登录控制器可以将许多事件传递给它的委托，以及向它的委托询问用于定制其行为的信息。它在其实现中将事件传达给委托，作为其对用户操作的响应的一部分：

```
#import "LoginViewController.h"

@interface LoginViewController ()

@property (weak, nonatomic) IBOutlet UIButton *anonSigninButton;

@end

@implementation LoginViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    //  Here we ask the delegate for information used to layout the view
    BOOL anonymousLoginAllowed = NO;
    //  All our protocol methods are @optional, so we must check they are actually implemented before calling.
    if ([self.delegate respondsToSelector:@selector(loginViewControllerShouldAllowAnonymousLogin:)]) {
        // self is passed as the LoginViewController argument to the delegate methods
        // in this way our delegate can serve as the delegate of multiple login view controllers, if needed
        anonymousLoginAllowed = [self.delegate loginViewControllerShouldAllowAnonymousLogin:self];
    }
    self.anonSigninButton.hidden = !anonymousLoginAllowed;
}

- (IBAction)loginButtonAction:(UIButton *)sender
{
    // We're preteneding our password is always bad. So we assume login succeeds when allowed anonmously
    BOOL loginSuccess = [self isAnonymousLoginEnabled];
    NSError *loginError = [self isAnonymousLoginEnabled] ? nil : [NSError errorWithDomain:@"domain" code:0 userInfo:nil];

    //  Fake concurrency
    double delayInSeconds = 1.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        //  Notify delegate of failure or success
        if (loginSuccess) {
            if ([self.delegate respondsToSelector:@selector(loginViewControllerDidLoginSuccessfully:)]) {
                [self.delegate loginViewControllerDidLoginSuccessfully:self];
            }
        }
        else {
            if ([self.delegate respondsToSelector:@selector(loginViewController:didFailWithError:)]) {
                [self.delegate loginViewController:self didFailWithError:loginError];
            }
        }
    });
}

- (IBAction)forgotPasswordButtonAction:(id)sender
{
    //  Notify delegate to handle forgotten password request.
    if ([self.delegate respondsToSelector:@selector(loginViewControllerDidReceivePasswordResetRequest:)]) {
        [self.delegate loginViewControllerDidReceivePasswordResetRequest:self];
    }
}

- (IBAction)signupButtonAction:(id)sender
{
    //  Notify delegate to handle signup request.
    if ([self.delegate respondsToSelector:@selector(loginViewControllerDiDReceiveSignupRequest:)]) {
        [self.delegate loginViewControllerDiDReceiveSignupRequest:self];
    }
}

- (BOOL)isAnonymousLoginEnabled
{
    BOOL anonymousLoginAllowed = NO;

    if ([self.delegate respondsToSelector:@selector(loginViewControllerShouldAllowAnonymousLogin:)]) {
        anonymousLoginAllowed = [self.delegate loginViewControllerShouldAllowAnonymousLogin:self];
    }
    return  anonymousLoginAllowed;
}

@end 
```

主视图控制器实例化并呈现一个登录视图控制器，并处理其委托消息：

```
#import "MainViewController.h"
#import "LoginViewController.h"

#define LOGGED_IN NO

@interface MainViewController () <LoginViewControllerDelegate>

@end

@implementation MainViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    //  Fake loading time to show the modal cleanly
    if (!LOGGED_IN) {
        double delayInSeconds = 1.0;
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
            //  Create a login view controller, assign its delegate, and present it
            LoginViewController *lvc = [[LoginViewController alloc] init];
            lvc.delegate = self;
            [self presentViewController:lvc animated:YES completion:^{
                NSLog(@"modal completion finished.");
            }];
        });
    }
}

#pragma mark - LoginViewControllerDelegate

- (void)loginViewControllerDidLoginSuccessfully:(LoginViewController *)lvc
{
    NSLog(@"Login VC delegate - Login success!");
    [self dismissViewControllerAnimated:YES completion:NULL];
}

- (void)loginViewController:(LoginViewController *)lvc didFailWithError:(NSError *)error
{
    // Maybe show an alert...
    // UIAlertView *alert = ...
}

- (void)loginViewControllerDidReceivePasswordResetRequest:(LoginViewController *)lvc
{
    // Take the user to safari to reset password maybe
     NSLog(@"Login VC delegate - password reset!");
}

- (void)loginViewControllerDiDReceiveSignupRequest:(LoginViewController *)lvc
{
    // Take the user to safari to open signup form maybe
    NSLog(@"Login VC delegate - signup requested!");
}

- (BOOL)loginViewControllerShouldAllowAnonymousLogin:(LoginViewController *)lvc
{
    return YES;
}

@end 
```

在某些方面，登录可能是一个复杂的交互式过程，因此我建议您认真考虑使用委托而不是通知。但是，可能有问题的一件事是委托必须只是一个对象。如果您需要让多个不同的对象知道登录视图控制器的进度和状态，那么您可能需要使用通知。尤其是如果登录过程可以被限制为非常简单，以一种除了传递单向消息和数据之外不需要任何交互的方式，那么通知可以成为一种可行的选择。您可以在通知中将任意变量传递回属性内，该`userInfo`属性是`NSDictionary`无论你决定往里面塞什么。通知会影响性能，但我知道现在只有当观察者人数达到数百人时才会发生这种情况。尽管如此，这在我看来并不是最自然的，因为您有父对象（或多或少控制子对象的生命周期）向第三方对象询问子对象的更新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T14:44:19.813

您可以使用**Protocol**获得它，这是最好的方式。

我将为您提供有关如何创建**协议的基本思想**

另外，请阅读这个问题： [如何在 Objective-C 中创建委托？](https://stackoverflow.com/questions/626898/how-do-i-create-delegates-in-objective-c)

以下代码为您提供了协议的基本概念，在下面的代码中，您可以从`MasterViewController`to获取 Button 标题`DetailViewController`。

```
#DetailViewController.h

#import <UIKit/UIKit.h>

@protocol MasterDelegate <NSObject>
-(void) getButtonTitile:(NSString *)btnTitle;
@end

@interface DetailViewController : MasterViewController

@property (nonatomic, assign) id<MasterDelegate> customDelegate; 

#DetailViewController.m

if([self.customDelegate respondsToSelector:@selector(getButtonTitile:)])
{
          [self.customDelegate getButtonTitile:button.currentTitle];    
}

#MasterViewController.m

create obj of DetailViewController

DetailViewController *obj = [[DetailViewController alloc] init];
obj.customDelegate = self;
[self.navigationController pushViewController:reportTypeVC animated:YES];

and add delegate method in MasterViewController.m for get button title.

#pragma mark -
#pragma mark - Custom Delegate  Method

-(void) getButtonTitile:(NSString *)btnTitle;
{
    NSLog(@"%@", btnTitle);

} 
```

# html - 如何在 iframe 中添加 div 元素

> ID：15814431
> 
> 赞同：0
> 
> 时间：2013-04-04T14:43:11.997
> 
> 标签：html, iframe

我有一个网站，出于某种目的，我在该网站上覆盖了一个 div 元素。现在，我不想叠加，而是想推送网页并将所有 div 都放在 iframe 中。

我已经创建了 iframe，但无法在 iframe 中附加 div。

编辑：

```
var iframepush = document.createElement('iframe');
                        iframepush.frameBorder=0;
                        iframepush.scrolling="yes";
                        iframepush.id="crossrider-siderbar-iframepush-26337";
                        iframepush.allowTransperancy="true";
                        iframepush.style.position='fixed' 
                        iframepush.style.right = '0px';
                        iframepush.style.top = '0px';
                        iframepush.style.position = 'absolute';
                        iframepush.style.height = $(window).height() + 'px';
                        iframepush.style.width = '150px';
                        iframepush.style.display = 'inline-block';

                        document.body.appendChild(iframepush);

                        var rightDiv = iframepush.document.createElement("div");
                        rightDiv.className = "crossrider-sidebar-26337 crossrider-sidebar-26337-container ";
                        rightDiv.style.cssText = "display: block; position: fixed; right: 0px; top: 0px; width: 150px; height:" + $(window).height() + "px; z-index:970; ";
                        iframepush.document.body.appendChild(rightDiv); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:46:03.033

```
 <script type="text/javascript">
    $(document).ready(function() {
      $("#iframeId").contents().find("body").html($("<div></div>").append($("#test")).html());
    });
 </script>
 <iframe id="iframeId" name="iframeId" src="about:blank" ></iframe>
<div id="test">
   Text
</div> 
```

# android - 如何在 Cocos2d 中裁剪图像

> ID：15814432
> 
> 赞同：2
> 
> 时间：2013-04-04T14:43:13.983
> 
> 标签：android, cocos2d-android

我是这个 Cocos2d 的新手。我正在开发俄罗斯方块类型的游戏。我想将图像裁剪成小块。我所知道的是，在 iPhone 中使用了一种名为 CGImageCreateWithImageInRect 的方法。android cocos2d中是否有这种方法可用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-01T17:05:49.777

我已经创建了该图像的位图，然后使用这些代码裁剪该位图。

```
Bitmap bmp=BitmapFactory.decodeResource(getResources(), R.drawable.xyz);

resizedbitmap1=Bitmap.createBitmap(bmp, 0,0,yourwidth, yourheight); 
```

然后将此位图转换为精灵，这样我就解决了我的问题。

# c# - EPPlus 中的打印命令？

> ID：15814447
> 
> 赞同：2
> 
> 时间：2013-04-04T14:43:36.777
> 
> 标签：c#, epplus

我正在使用 EPPLUS 允许用户将数据下载到 Excel。但是，我想添加一个功能，他们可以选择打印这些数据而不是下载它。我们可以从 EPPLus 发出打印命令吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T15:31:11.593

> 这是一个网络应用程序

啊，所以主要问题来了...您知道，即使 EPPlus 有打印方法，它也无济于事，因为它会尝试在服务器端触发打印对话框，但是您需要发送通过 Internet 向客户端发送文件。所以恐怕答案是`no`，客户肯定必须以任何一种方式下载文件才能打印它。

此外，xlsx 不能在 Web 浏览器中轻松打开（例如，与 pdf 相比），因此以某种方式在客户端 pc 上触发打印机对话框的解决方案将有点困难。由于安全问题，C# 无法使用 asp.net 通过 Internet 触发任何内容，而且我不确定 javascript 是否有足够的权限打开 Excel 文件的应用程序并开始打印过程。

也许您的解决方案是创建一个 PDF 文件而不是 XLSX，将其作为网站/响应的一部分发送给客户端，然后使用 javascript 打印文件。PDF现在可以在大多数浏览器中打开，我们有一个很好的js功能`printWithDialog()`。我相信这对 xls 不起作用，它肯定不能满足您“无需下载”的要求。客户在打印之前必须有权访问该文件，这是您无法克服的。

# java - 如何使 Commons VFS 永久运行

> ID：15814451
> 
> 赞同：4
> 
> 时间：2013-04-04T14:43:42.637
> 
> 标签：java, vfs

我正在使用 commons VFS 来监视某些文件夹的更改（主要是插入新文件），程序应该永久运行，我使用以下代码

```
FileSystemManager fsManager = VFS.getManager();
FileObject listendir = fsManager.resolveFile(path);
DefaultFileMonitor fm = new DefaultFileMonitor(new VfsListener());
fm.setRecursive(true);
fm.addFile(listendir);
fm.start(); 
```

其中 path 是文件夹路径，而 VfsListener 是一个实现 FileListener 的类，当我运行程序时它运行然后立即关闭，当我在 fm.start() 之后添加它时：

```
Thread.sleep(100000) 
```

程序运行一段时间然后在超时后关闭，我不希望这样，我希望程序永久朗姆酒，如果有人知道请回复

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-23T10:38:29.150

VFS 将 FileMonitor 线程作为低优先级的守护线程启动。方法 setDaemon(boolean) 的定义指出

> 将此线程标记为守护线程或用户线程。当唯一运行的线程都是守护线程时，Java 虚拟机退出。
> 
> 该方法必须在线程启动之前调用。

这就是只要您在主线程中“睡眠”，您的程序就可以工作的原因。但是，如果您将此程序作为独立的 java 程序运行，这只是一个问题。如果您在 Jboss 之类的应用服务器中运行相同的代码，那么代码就可以正常工作。

如果您仍然希望独立程序无限期等待，您可以修改程序以使用 ThreadPoolExecutor，它实际上将等待新任务在任务队列中可用。

```
public static void main(String[] args) throws FileSystemException {
    Executor runner = Executors.newFixedThreadPool(1);
    runner.execute(new Runnable() {

        @Override
        public void run() {
            FileObject listendir = null;
            try {
                FileSystemManager fsManager = VFS.getManager();
                listendir = fsManager.resolveFile(absolutePath);
            } catch (FileSystemException e) {
                e.printStackTrace();
            }
            DefaultFileMonitor fm = new DefaultFileMonitor(new FileListener() {

                @Override
                public void fileDeleted(FileChangeEvent event) throws Exception {
                    System.out.println(event.getFile().getName().getPath()+" Deleted.");
                }

                @Override
                public void fileCreated(FileChangeEvent event) throws Exception {
                    System.out.println(event.getFile().getName().getPath()+" Created.");
                }

                @Override
                public void fileChanged(FileChangeEvent event) throws Exception {
                    System.out.println(event.getFile().getName().getPath()+" Changed.");
                }
            });
            fm.setRecursive(true);
            fm.addFile(listendir);
            fm.start();
        }
    });
} 
```

希望这可以帮助。

# c# - jqGrid中的更新和删除不起作用

> ID：15814456
> 
> 赞同：0
> 
> 时间：2013-04-04T14:43:53.520
> 
> 标签：c#, asp.net, jqgrid, jqgrid-asp.net

我遇到了一个糟糕的情况[`jqGrid`](http://www.trirand.net/default.aspx)。

我正在使用将 jqGrid 添加到 .aspx 页面的 asp.net 4.0。为了这个目的`add/edit/delete`我使用的数据。`SqlDataSource`

我已经像这样配置了 default.aspx 页面：

链接：

```
<link rel="stylesheet" type="text/css" media="screen" href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.0/themes/redmond/jquery-ui.css" />
    <link href="Styles/ui.jqgrid.css" rel="stylesheet" type="text/css" />
    <script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="Scripts/i18n/grid.locale-en.js" type="text/javascript"></script>
    <script src="js/trirand/jquery.jqGrid.min.js" type="text/javascript"></script> 
```

在我的表单中，我有这样的 SqlDataSource 和 trirand jqGrid：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:Test_1ConnectionString %>"
        SelectCommand="SELECT * FROM [Companies]" 
        UpdateCommand="UPDATE [Companies] SET [CompanyType] = @CompanyType,[Country] = @Country,[State] = @State,[ZipCode] = @ZipCode WHERE [CompanyId] = @CompanyId"
        InsertCommand="INSERT INTO [Companies]([CompanyType],[Country],[State],[ZipCode]) VALUES (@CompanyType,@Country,@State,@ZipCode)" 
        DeleteCommand="DELETE FROM [Companies] WHERE [CompanyId] = @CompanyId">
        <DeleteParameters>
            <asp:Parameter Name="CompanyId" Type="Int32"/>
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="CompanyType" Type="String" />
            <asp:Parameter Name="Country" Type="String" />
            <asp:Parameter Name="State" Type="String" />
            <asp:Parameter Name="ZipCode" Type="String" />
        </InsertParameters>
        <UpdateParameters>
            <asp:Parameter Name="CompanyType" Type="String" />
            <asp:Parameter Name="Country" Type="String" />
            <asp:Parameter Name="State" Type="String" />
            <asp:Parameter Name="ZipCode" Type="String" />
            <asp:Parameter Name="CompanyId" Type="Int32" />
        </UpdateParameters>
    </asp:SqlDataSource>
    <trirand:JQGrid ID="jQGrid1" DataSourceID="SqlDataSource1" runat="server" AppearanceSettings-Caption="Company Details"
        AppearanceSettings-ShowCaptionGridToggleButton="true" 
        onrowdeleting="jQGrid1_RowDeleting">
        <Columns>
            <trirand:JQGridColumn DataField="CompanyId" Searchable="true" />
            <trirand:JQGridColumn DataField="CompanyType" Editable="true" />
            <trirand:JQGridColumn DataField="Country" Editable="true" />
            <trirand:JQGridColumn DataField="State" Editable="true" />
            <trirand:JQGridColumn DataField="ZipCode" Editable="true" />
        </Columns>
        <EditDialogSettings Modal="true" CloseAfterEditing="true" SubmitText="Submit Details"
            Caption="Edit Company" />

        <SearchDialogSettings Modal="true" FindButtonText="Search Company" />
        <ToolBarSettings ShowEditButton="true" ShowAddButton="true" ShowDeleteButton="true" ShowInlineAddButton="true"
            ShowSearchButton="true" ShowRefreshButton="true" />
    </trirand:JQGrid> 
```

一切看起来都很好，直到我调查了正在发生的事情的功能。

起初我试图在 中添加一行`jqGrid`，它有效！

然后，当我尝试编辑/删除特定行时，它以徒劳的方式结束。编辑/更新和删除功能不起作用。

即使我已经在代码隐藏中添加了行删除来检查我是否获得了适当的数据。

我使用以下属性添加了以下功能`jQGrid`

```
protected void jQGrid1_RowDeleting(object sender, Trirand.Web.UI.WebControls.JQGridRowDeleteEventArgs e)
        {

        } 
```

当我在`{`ei 放置一个调试器时，可以看到选择记录时即将到来的数据。

当我添加一行时，它会将其添加`jqGrid`到数据库中。这很好用！

为什么它不从 db 甚至从 jqGrid 中删除？

这是我设置的`UpdateCommand`/`DeleteCommand`的错吗？`SqlDataSource`还是我需要设置额外的功能来代表 jqGrid 实现这些东西？

**注意：**当我可以在 CodeBehind 文件中看到在 RowDeleting 方法中选择的数据时，我可以通过添加一些 ado.net 代码来显式删除它。如果有任何可用的解决方案可以使用 jqGrid，请发布。

感谢您发布的评论/答案。

**编辑**

我在运行 Sql Profiler 时发现了问题。

当我用表单编辑编辑我的列时，没有 id 被传递给它。这是我的 sql profiler 得到的

```
 exec sp_executesql N'UPDATE [Companies] SET [CompanyType] = @CompanyType,[Country] = @Country,

[State] = @State,[ZipCode] = @ZipCode WHERE [CompanyId] = @CompanyId',N'@CompanyType nvarchar

(7),@Country nvarchar(3),@State nvarchar(5),@ZipCode nvarchar(4000),@CompanyId nvarchar

(4000)',@CompanyType=N'pvt',@Country=N'abc',@State=N'def',@ZipCode=NULL,*@CompanyId=NULL* 
```

但是当我使用内联编辑选项编辑 jqGrid 中的列时，我可以看到我的 CompanyId 不为空。

```
 exec sp_executesql N'UPDATE [Companies] SET [CompanyType] = @CompanyType,[Country] = @Country,

[State] = @State,[ZipCode] = @ZipCode WHERE [CompanyId] = @CompanyId',N'@CompanyType nvarchar

(7),@Country nvarchar(3),@State nvarchar(5),@ZipCode nvarchar(4000),@CompanyId nvarchar

(4000)',@CompanyType=N'pvt',@Country=N'abc',@State=N'def',@ZipCode=NULL,*@CompanyId=3* 
```

有人可以指出为什么内联查询传递 id 列以及为什么表单编辑不传递 id 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:12:53.790

我自己不使用商业版的 jqGrid/jqSuite，但我尝试猜测你应该添加`key: true`到`CompanyId`列的定义中。似乎它对应`PrimaryKey=true`于`trirand:JQGridColumn`列定义中的值。

# xaml - RichEditBox : 只为即将写入的字符设置样式

> ID：15814459
> 
> 赞同：0
> 
> 时间：2013-04-04T14:43:59.887
> 
> 标签：xaml, windows-8, textedit

我正在尝试在 Windows 8 应用程序中创建一个简单的文本编辑器，例如一个简单的 OneNote。我可以设置字体大小、字体颜色和字体样式，但问题是它适用于我的 RichEditBox 的全部内容，甚至适用于已经写入的文本。但是我希望，当我选择“斜体”为例时，只有未来的字符应该用斜体写，而已经写的单词和字符保持原来的样式。很难描述。我是否使用良好的 XAML 元素 (RichEditBox) ？有没有一种方法可以在 RichEditBox 中选择作者的实际位置？

感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:49:57.243

试试这个按钮事件。`rebTextNote`是 RichEditBox 对象。

```
using Windows.UI.Text;

public void btnItalic_Click(object sender, RoutedEventArgs e)
{
    ITextCharacterFormat format = rebTextNote.Document.Selection.CharacterFormat;
    if (format.Italic != FormatEffect.On)
        format.Italic = FormatEffect.On;
    else
        format.Italic = FormatEffect.Off;
} 
```

# ruby - 无法将修改后的元素添加到 Ruby 中的数组

> ID：15814460
> 
> 赞同：-2
> 
> 时间：2013-04-04T14:44:01.137
> 
> 标签：ruby, arrays

我从 db 中选择了一些事件。我需要克隆每个元素 30 次并设置 elem.shedule 不同的日期（当前月份的每一天 -2013-04-01 .. 2013-04-30）。

这是我的代码（'shedule' 字段是日期）：

```
daily_events = Events.All
repeated_events = []
for event in(daily_events)
  for day in(1..date.end_of_month.day)
    repeat_event = event
    repeat_event.shedule = Date.new(date.year, date.month, day)
    repeated_events << repeat_event
  end
end 
```

但作为结果，我在每个地方都有每个元素 30 次，最后一个月的日期相同（2013-04-30）

如何解决？

如果我在 EventsController#index 中设置`repeated_events+=repeat_event`而不是`repeated_events << repeat_event` TypeError，则无法将事件转换为数组（Event#to_ary 给出 NilClass）

我认为这是因为我只克隆了对元素的引用，而不是元素的内容。有什么方法可以解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:13:05.010

每次通过内部循环，`repeat_event`都是对同一个`event`对象的引用。您的数组最终存储了对该单个对象的许多引用，因此当您对 进行赋值时`repeat_event.shedule`，它会影响所有引用。

尝试使用`dup`来制作副本，如下所示：

```
repeat_event = event.dup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:29:40.000

我发现我需要深拷贝并使用 Marshal 模块

所以我的解决方案是

```
repeat_event = Marshal.load(Marshal.dump(every_day_event)) 
```

谢谢大家！

# ruby - Facebook APP 多域

> ID：15814461
> 
> 赞同：2
> 
> 时间：2013-04-04T14:44:03.720
> 
> 标签：ruby, facebook, ruby-on-rails-3.1, devise, omniauth

我正在设置一个 Ruby on Rails 应用程序以允许使用 Devise + Omniauth 通过 Facebook 登录。我可以使用 APP ID 和 Token 来解决这个问题。

但是我有一个问题，我不知道如何解决。

我有 1 个 Rails 应用程序实例在`Server A`我有 2 个域名上运行`www.domain-one.com`，`www.domain-two.com`它指向`Server A`当我在 Facebook 中创建应用程序时`www.domain-one.com`它工作正常，但是一旦我添加`www.domain-two.com`到应用程序域，它就会给我并错误“必须派生域来自您的站点 URL”。是否可以允许多个域使用相同的 Facebook APP ID 登录？

如果不是，那么可接受的解决方案是根据域切换设计初始化程序文件中的详细信息，有谁知道如何从设计初始化程序获取域？

希望你明白我的意思。

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T08:59:10.177

您可以指定多个子域，但它们只能属于一个域。这是因为它必须将网站中的 URL 与 Facebook 登录 > 站点 URL 匹配。

在这种情况下，您可以将一个域名作为指向服务器 A 的主域，将另一个作为辅助域重定向到第一个域。然后在 facebook 应用程序中使用第二个域作为站点 url。

遵循此策略还有另一个好处，您的网站 SEO 将得到改善。如果搜索引擎从不同的域中找到一个内容，那么它会降低内容的排名，来自唯一地址的唯一内容会增加排名。

# excel - 无论它们的顺序如何，如何检查相同的值组合

> ID：15814463
> 
> 赞同：1
> 
> 时间：2013-04-04T14:44:11.700
> 
> 标签：excel, unique, sas, combinations

我收到了一长串客户可能拥有的不同设备组合的清单。看起来列出列表的人所做的只是连接所有包含设备产品编号的列。问题是它们在列的填写方式上没有真正的顺序。因此，先获得设备 B 然后获得设备 A 的客户现在的价值为 B/A，而另一个客户的价值也可能为 A/B。我正在尝试使用 excel 或 SAS 来计算有多少不同的组合，无论顺序如何，所以在这种情况下 A/B=b/A 并且它们只有 1 个，而不是 2 个组合。有没有办法使用 EXCEL 或 SAS 来解决这个问题，因为现在我不得不关注它。一如既往，非常感谢您的帮助！！

沙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:44:33.163

在 SAS 中，将它们拆分为组件值，然后对变量进行排序。

```
data have;
length value $50;
input value $;
datalines;
GummyBears/Skittles
Skittles/GummyBears
MandMs/Skittles
GummyBears/MandMs
Skittles/MandMs
GummyBears/MandMs
;;;;
run;

data want;
set have;
length vals1 vals2 $20;
array vals[2] $;
do _t = 1 to dim(vals);
 vals[_t]=scan(value,_t,'/');
end;
call sortc(of vals[*]);
run;

proc freq data=want;
tables vals1*vals2/list;
run; 
```

如果您愿意，您也可以在之后重新组合它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T05:21:40.217

这是在不使用 VBA 的情况下在 Excel 中提供所有独特设备组合的快速方法。

在您的组合文本旁边为每个设备插入列 - 每件设备一列 - 请参见下面的草稿。如果设备组合包含该列的设备，则每列返回 TRUE，否则返回 FALSE。

```
EQUIPMENT     CONTAINS_A  CONTAINS_B  CONTAINS_C  CONTAINS_ D   Sort_Column
COMBINATION
-------------------------------------------------------------------------------------------
A/B/C         TRUE       TRUE        TRUE          FALSE        TRUETRUETRUEFALSE
B/A/D/C       TRUE       TRUE        TRUE          TRUE         TRUETRUETRUETRUE
A/B           TRUE       TRUE        FALSE         FALSE        TRUETRUEFALSEFALSE
C             FALSE      FALSE       FALSE         TRUE         FALSEFALSETRUEFALSE 
```

最后一列将文本中的所有 TRUE/FALSE 值组合在一起。可以过滤和/或排序此文本以轻松识别唯一组合。如果您应用自动过滤器，自动过滤器中的条目将显示唯一的组合。

这些是我在值后面使用的公式（在第 2 行中显示公式）：

```
CONTAINS A: =NOT(ISERROR(SEARCH("A",F2,1)))
CONTAINS B: =NOT(ISERROR(SEARCH("B",F2,1)))
CONTAINS C: =NOT(ISERROR(SEARCH("C",F2,1)))
CONTAINS D: =NOT(ISERROR(SEARCH("D",F2,1))) 
```

排序列：=TEXT(H2,"#") & TEXT(I2,"#") & TEXT(J2,"#") & TEXT(K2,"#")

很抱歉这种格式，但我不允许发布图片:-(希望它有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T16:43:32.717

您可以使用条件格式突出显示重复选项。它仍然会盯着它看，但您可能会按颜色分类以查看匹配/不匹配的设备。

可以在此处找到有关如何执行此操作的示例：[http ://www.techrepublic.com/blog/window-on-windows/how-to-find-duplicates-in-excel/7347](http://www.techrepublic.com/blog/window-on-windows/how-to-find-duplicates-in-excel/7347)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T16:51:06.873

您可以尝试编写一些可在 Excel 中使用的 VBA 代码来更改 A 和 B 在列中的显示方式。例如，对于 B/A，它将按字母顺序排列，然后将其更改为 A/B。对于 A/B，由于它已经按字母顺序排列，因此将保持原样。完成此操作后，然后按该列对工作表进行排序。然后，您应该会看到像 A/B 这样的数据，并且下一行也可能显示 A/B。接下来，根据您的需要，您可以添加更多 VBA 代码以按该类型的列组合行并将该数据写入新工作表。这将为您提供所有客户拥有的所有唯一设备类型集的唯一计数。如果您想要拥有 A/B/C 的客户的唯一数量，并将 A/B 部分与仅拥有 A/B 的其他客户相结合，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T17:11:00.800

我有时间为你整理了一个 Excel 公式。请参阅此帖子底部的原始评论以获取指向我的来源的链接。

解决此问题的步骤：

**用户定义函数对单元格进行排序**

在 Excel VBA 中创建一个新模块（如果您需要这方面的说明，请告诉我，只需单击几下）

复制并粘贴下面的所有代码。

```
Option Explicit

Const c_Separator = "/"
' User Defined Function to split a list within a cell and then sort it 
' before recreating a sorted list
Public Function CellSort(strString As String) As String
    Dim i As Integer
    Dim arr As Variant
    Dim strRet As String
    arr = Split(strString, c_Separator)

    ' trim values so sort will work properly
    For i = LBound(arr) To UBound(arr)
        arr(i) = Trim(arr(i))
    Next i

    ' sort
    QuickSort arr, LBound(arr), UBound(arr)

    ' construct ordered list to return
    For i = LBound(arr) To UBound(arr) - 1
        strRet = strRet & CStr(arr(i)) & c_Separator
    Next i

    ' Attach the last item separately to avoid adding an unecessary separator
    CellSort = strRet & CStr(arr(i))

End Function

' Quick Sort function found here: 
' https://stackoverflow.com/questions/3399823/excel-how-do-i-sort-within-a-cell
Public Sub QuickSort(vArray As Variant, inLow As Long, inHi As Long)

  Dim pivot   As Variant
  Dim tmpSwap As Variant
  Dim tmpLow  As Long
  Dim tmpHi   As Long

  tmpLow = inLow
  tmpHi = inHi

  pivot = vArray((inLow + inHi) \ 2)

  While (tmpLow <= tmpHi)

     While (vArray(tmpLow) < pivot And tmpLow < inHi)
        tmpLow = tmpLow + 1
     Wend

     While (pivot < vArray(tmpHi) And tmpHi > inLow)
        tmpHi = tmpHi - 1
     Wend

     If (tmpLow <= tmpHi) Then
        tmpSwap = vArray(tmpLow)
        vArray(tmpLow) = vArray(tmpHi)
        vArray(tmpHi) = tmpSwap
        tmpLow = tmpLow + 1
        tmpHi = tmpHi - 1
     End If

  Wend

  If (inLow < tmpHi) Then QuickSort vArray, inLow, tmpHi
  If (tmpLow < inHi) Then QuickSort vArray, tmpLow, inHi

End Sub 
```

关闭 VBA 编辑器（不再需要编码）。

**用于计算唯一组合数量的 Excel 公式** 在 Excel 中，您可以在原始数据列旁边创建三列。我在下面的屏幕截图中用彩色背景显示了这些公式。每个都在图像下方进行了解释。

![Excel 公式](https://i.stack.imgur.com/0oDnJ.png)

蓝色列：使用上面的 VBA 函数对原始列表中每个单元格的内容进行排序，这给出了一个一致的列表，您可以在其上计算唯一项目。如果您的原始列表中有一些小写的实例和其他大写的实例，并且您需要将它们视为相同，则将此列中的公式修改为`=CellSort(UPPER(A2))`

绿色列：`COUNTIF`标识每个已排序单元格的第一个实例的简单函数（适用于所有最新的 Excel 版本）。

红色单元格：计算 TRUE 在绿色列中出现的次数。这给出了唯一条目的计数。

以下是已完成工作的示例。

![实际使用的公式示例](https://i.stack.imgur.com/ayliT.png)

* * *

**原始评论**

恐怕我现在没有时间对此进行测试，但这可能会对您有所帮助。

您可能想查看此答案中给出的 VBA（我自己没有尝试过）。

[VBA 快速排序](https://stackoverflow.com/questions/3399823/excel-how-do-i-sort-within-a-cell)

然后，如果您需要在公式中执行此操作，您可以从此 VBA 创建一个用户定义函数来对单元格中的值进行排序。将行更改`arr = Split(ActiveCell.Text, ",")`为拥有`"/"`，以便拆分您的列表。

接下来在原始数据旁边的列中使用您的公式，然后使用类似于此页面上的公式的内容：[计算数据范围中值或唯一值的出现](http://office.microsoft.com/en-gb/excel-help/count-occurrences-of-values-or-unique-values-in-a-data-range-HP003056118.aspx#BMcount_the_number_of_unique_values_by_)次数以计算唯一值。

如果您在上述任何方面需要更多帮助，请告诉我，我会在明天尝试做。

# android - Android应用程序未安装错误

> ID：15814465
> 
> 赞同：2
> 
> 时间：2013-04-04T14:44:15.160
> 
> 标签：android

又是这个老栗子，经过大量搜索后，我在此找到的最佳线程是 [Android 上的“未安装应用程序”错误](https://stackoverflow.com/questions/4226132/application-not-installed-error-on-android) 在我的情况下，我已经检查了所有提到的修复程序，但是当我尝试安装未签名的 APK 文件时仍然存在问题. 当我从 Eclipse 安装该应用程序时，该应用程序在我的手机上运行良好，但是当我将它放在谷歌驱动器上，然后将我的手机指向 APK 时，我得到了上面的错误。我有一个 Note 1 我已经卸载了旧应用程序，重置了我的手机等，但没有运气。直到今天它对我来说都很好，我只是将 APK 放在谷歌驱动器上并从那里安装它，每次都有效，今天刚刚停止工作，我什么也没改变。我有 APK 的签名和未签名版本

这是我的清单文件

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.app.nquizitive"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk android:minSdkVersion="8" />

        <supports-screens 
        android:largeScreens="true" 
        android:normalScreens="true" 
        android:smallScreens="true" 
        android:resizeable="true" 
        android:anyDensity="true" />

    <uses-permission android:name="android.permission.INTERNET" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name" >
            <activity
                android:name="com.app.nquizitive.StartupActivity"
                android:label="@string/app_name" android:screenOrientation="landscape">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

    </manifest> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T17:15:22.897

My devices will only load signed APKs under these conditions. It appears to be a case of Google's boot on our neck. So I'm not sure what an unsigned one is good for unless you load it on a $45 USD Google-free device from China. So I release signed ones with increasing version numbers but with version "1" google-wise and then release "1"/"1.0" on Google Play.

# mysql - MYSQL：如何在插入期间使 NULL 或空数据默认为 0

> ID：15814466
> 
> 赞同：12
> 
> 时间：2013-04-04T14:44:17.360
> 
> 标签：mysql, sql, database, phpmyadmin, mamp

所以这看起来很简单，我发誓我以前做过，但出于某种原因，它对我不起作用。

我正在使用`MAMP`并有一个包含大约 200 列的表，如果将 NULL 或空数据插入其中，我希望其中大约 20 个默认为 0。

这是一个小例子，展示了我的表的外观以及我对希望默认为 0 的列所做的操作。

```
CREATE TABLE `listings` (
  `ListingID` int(11) NOT NULL,
  `BathsFull` int(6) NOT NULL DEFAULT '0',
  PRIMARY KEY (`ListingID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

因此，请注意`BathsFull`我将其设置为`NOT NULL DEFAULT '0'`问题是，当将空数据传递给它时，我会收到一个 SQL 错误`SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'BathsFull' cannot be null`。

我也试过这样`BathsFull accepts`NULL `and`DEFAULT '0'，但是当传递空数据时，表格显示`NULL`而不是`0`.

我在这里错过了什么吗？我需要编写某种触发器吗？如果不需要的话，我不想在将脚本中的数据放入数据库之前对其进行清理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T15:09:41.433

如果您在插入中明确将值设置为 NULL，但希望 MySQL 将 NULL 替换为 0，则一种方法是定义列以在`CREATE TABLE`语句中允许 NULL，然后将 NULL 替换为`TRIGGER`.

像这样的东西：

```
CREATE TABLE `listings` (
  `ListingID` int(11) NOT NULL,
  `BathsFull` int(6) NULL DEFAULT 0,
  PRIMARY KEY (`ListingID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

delimiter $$

create trigger tr_b_ins_listings before insert on listings for each row
begin
  set new.BathsFull = coalesce(new.BathsFull,0);
end $$

delimiter ; 
```

[在这个SQL Fiddle](http://sqlfiddle.com/#!2/38db3/1)中亲自尝试一下

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T15:01:12.130

您忘记发布 INSERT 查询，但我确定问题就在那里。这按预期工作：

```
insert into listings (ListingID) values(1) 
```

...因为您省略了`BathsFull`所以 MySQL 使用默认值。这不会：

```
insert into listings (ListingID, BathsFull) values(1, null); 
```

...因为你告诉 MySQL 你*想要* `NULL`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T15:10:12.027

您绝对可以为此使用触发器

假设您使该字段可以为空

```
CREATE TABLE `listings` (
  `ListingID` int(11) NOT NULL,
  `BathsFull` int(6),              <-----
  PRIMARY KEY (`ListingID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

扳机

```
DELIMITER $$
CREATE TRIGGER tg_lst_insert BEFORE INSERT ON listings
FOR EACH ROW
BEGIN
    SET NEW.BathsFull = IFNULL(NEW.BathsFull, 0);
END $$
DELIMITER ; 
```

插入一些行

```
INSERT INTO `listings` VALUES(1, '');
INSERT INTO `listings` VALUES(3, 'a');
INSERT INTO `listings` VALUES(4, NULL);
INSERT INTO `listings` (ListingID) VALUES(2);
INSERT INTO `listings` VALUES(5, 3); 
```

结果

```
+-----------+-----------+
| ListingID | BathsFull |
+-----------+-----------+
|         1 |         0 |
|         2 |         0 |
|         3 |         0 |
|         4 |         0 |
|         5 |         3 |
+-----------+-----------+ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T14:55:11.613

您可以使用`default`关键字在插入过程中获取列的默认值。

例子 ：

```
INSERT INTO listings(ListingID, BathsFull) VALUES (2,DEFAULT); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T14:55:29.923

也许你应该试试这个：

```
insert into listings (ListingID, ListingID, BathsFull) 
values (@listing_id, @ListingID, isnull(BathsFull, 0) 
```

# javascript - 将自执行 JavaScript 函数置于“普通”函数中

> ID：15814467
> 
> 赞同：0
> 
> 时间：2013-04-04T14:44:19.457
> 
> 标签：javascript, function

如果我将一个自执行的 JavaScript 函数放在一个“普通”函数中，它什么时候执行？

```
function normalFunction() {
    var a = 1;

    (function() {
        var b = 2;
        var c = 3;
    })();

    var d = 4;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:46:01.573

自执行函数的放置位置与它的执行方式几乎没有关系。此函数将创建 2 个具有初始值的局部变量，退出并且不会对封闭函数范围产生影响（除了浪费 CPU 周期）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:46:13.293

*仅当您调用时才会*调用IIFE `normalFunction`。即使函数块将在加载时解析，*调用*也不会发生，直到封闭函数运行，然后 IIFE 被空参数块调用 -`()`

这几乎与您编写时会发生的情况相同：

```
function normalFunction() {
    var tmp = function() {
        ...
    };

    tmp();
} 
```

其中显然`tmp()`只发生在调用封闭函数期间。

# javascript - 更改禁用复选框的值

> ID：15814470
> 
> 赞同：0
> 
> 时间：2013-04-04T14:44:24.770
> 
> 标签：javascript, jquery, asp.net-mvc-3

所以我遇到了一个小障碍。我有一个页面，其中显示了一个复选框，但被禁用（用户无法更改它的值，因为它是数据库驱动的）。在此复选框下方，我有一个自动完成字段。如果自动完成中的项目返回，我需要能够切换禁用复选框的值。但是，我现在无法这样做。

到目前为止，这是我的代码。

看法

```
...
<tr>
        <td class="adminTitle">
            @Html.NopLabelFor(model => model.IsSpecialOrder):
        </td>
        <td class="adminData">
            @Html.DisplayFor(model => model.IsSpecialOrder)
            @Html.HiddenFor(model => model.IsSpecialOrder)
        </td>
    </tr>
    <tr>
        <td class="adminTitle">
            @Html.NopLabelFor(model => model.ItemNumber):
        </td>
        <td class="adminData">
            @if (Model.Id > 0)
            {
                @Html.DisplayFor(model => model.ItemNumber)
            }
            else
            {
                @Html.EditorFor(model => model.ItemNumber)
            }
        </td>
    </tr>
...

<script type="text/javascript">
...
$("#ItemNumber").autocomplete({
            minLength: 2,
            source: function (request, response) {
                var itemNumber = $("#ItemNumber").val();
                //Get available Products based on search parameter and map data
                $.getJSON('@Url.Action("GetProductsByItemNumber", "PurchaseOrder")', { searchProduct: itemNumber }, function (data) {
                    for (var i = 0; i < data.length; i++) {
                        productData.push({ 'Id': data[i].Id, 'Name': data[i].Name, 'ItemNumber': data[i].ItemNumber, 'Description': data[i].Description,
                            'IsSpecialOrder': data[i].IsSpecialOrder
                        });
                    }
                    response($.map(data, function (item) {
                        return {
                            value: item.ItemNumber,
                            id: item.Id
                        };
                    }));
                })
            },
            select: function (event, ui) {
                if (ui.item.id == 0) {
                    //Do some house cleaning and alert user to mistake
                    alert("You must retry your search for a Product");
                    $("#Name").val("");
                    $("#ItemNumber").val("");
                    $(".ProductDescription").html("");
                    document.getElementById("@Html.FieldIdFor(model => model.IsSpecialOrder)").checked = false;
                    //$("#IsSpecialOrder").prop("checked", false);

                    return false;
                }

                //Record ProductId
                $("#ProductId").val(ui.item.id);

                //Fill RequestorExt with correct data
                var description = GetData(productData, ui.item.id, "desc");
                var name = GetData(productData, ui.item.id, "name");
                var isSpecialOrder = GetData(productData, ui.item.id, "is");
                $(".ProductDescription").html(description);
                $("#Name").val(name);
                document.getElementById("@Html.FieldIdFor(model => model.IsSpecialOrder)").checked = isSpecialOrder;
                //$("#IsSpecialOrder").prop("checked", isSpecialOrder);
            }
        });
...
</script> 
```

从我一直在阅读的内容来看，如果不启用，就无法更改禁用的字段。我猜这是解决此问题的唯一方法，但想先确定一下。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:59:34.190

复选框是启用还是禁用都没有关系。您应该`checked`从复选框中删除属性，而不是将其`checked`属性设置为 false，否则它将保持选中状态：

```
document.getElementById("@Html.FieldIdFor(model => model.IsSpecialOrder)").removeAttribute('checked'); 
```

示例：http: [//jsbin.com/izonur/2/edit](http://jsbin.com/izonur/2/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:59:39.530

> 从我一直在阅读的内容来看，如果不启用，就无法更改禁用的字段。我猜这是解决此问题的唯一方法，但想先确定一下。有任何想法吗？

禁用的字段肯定可以更改，[请参见this fiddle](http://jsfiddle.net/ETSyk/)。仔细检查您的 js 代码中的值是否正确。

供参考（与小提琴相同的代码）：

```
<input type="checkbox" disabled="disabled" checked="checked" id="chkbox"/>
<input type="button" value="Toggle" id="toggle"/>

var chkBox = $("#chkbox");
$("#toggle").click(function(){        
    if (chkBox.is(':checked')) {        
        chkBox.prop('checked', false);
    }
    else {        
        chkBox.prop('checked', true);
    }

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T15:09:17.167

禁用项目未通过表单提交[http://www.w3.org/TR/html401/interact/forms.html#h-17.12](http://www.w3.org/TR/html401/interact/forms.html#h-17.12)

您可以拥有随表单提交的只读项目（与您想要的完全相反）

我猜你是通过javascript提交表单以某种方式不正确。提交时，您必须从表单中排除禁用的项目，因此它将相应地工作。

# android - Android 和 App Engine 是如何实际通信的？

> ID：15814479
> 
> 赞同：4
> 
> 时间：2013-04-04T14:44:44.507
> 
> 标签：android, google-app-engine, rest, cloud

好的，这似乎是一个愚蠢的问题，但我对云计算/谷歌应用引擎等真的很陌生。为了更熟悉它，我开始使用 developer.google.com 的一些教程，基本上遵循教程，然后尝试对提供的代码片段进行小的更改，以确保我真正理解它的工作方式，而不仅仅是复制/粘贴并将一切视为理所当然。

问题是我在以下方面有点卡住了：Android 和 App Engine 实际通信的方式。我目前正在做这个教程（ [https://developers.google.com/eclipse/docs/endpoints-addentities](https://developers.google.com/eclipse/docs/endpoints-addentities)）。问题是以下代码（客户端，在 Android 上）：

```
 public class EndpointsTask extends AsyncTask<Context, Integer, Long> {
    protected Long doInBackground(Context... contexts) {

           Noteendpoint.Builder endpointBuilder = new Noteendpoint.Builder(
          AndroidHttp.newCompatibleTransport(),
          new JacksonFactory(),
          new HttpRequestInitializer() {
          public void initialize(HttpRequest httpRequest) { }
          });
  Noteendpoint endpoint = CloudEndpointUtils.updateBuilder(
  endpointBuilder).build();
  try {
      Note note = new Note().setDescription("Note Description");
      String noteID = new Date().toString();
      note.setId(noteID);

      note.setEmailAddress("E-Mail Address");          
      Note result = endpoint.insertNote(note).execute();
  } catch (IOException e) {
    e.printStackTrace();
  }
      return (long) 0;
    }
} 
```

据我的理解，此时，就云计算而言，我推断Android与云之间的通信是通过端点对象执行的，其中端点是：

```
 Noteendpoint endpoint = CloudEndpointUtils.updateBuilder (endpointBuilder).build(); 
```

此外，updateBuilder() 方法如下所示：

```
 public static <B extends AbstractGoogleClient.Builder> B updateBuilder(
  B builder) {
if (LOCAL_ANDROID_RUN) {
  builder.setRootUrl(LOCAL_APP_ENGINE_SERVER_URL_FOR_ANDROID
      + "/_ah/api/");
}

// only enable GZip when connecting to remote server
final boolean enableGZip = builder.getRootUrl().startsWith("https:");

builder.setGoogleClientRequestInitializer(new GoogleClientRequestInitializer() {
  public void initialize(AbstractGoogleClientRequest<?> request)
      throws IOException {
    if (!enableGZip) {
      request.setDisableGZipContent(true);
    }
  }
});

return builder; 
```

}

我知道数据存储中的插入是通过 insertNote() 执行的——基本上，它执行基本的标准插入方法。

我的问题是，我无法真正了解从我的 Android 设备发送的信息在云中的何处被捕获。更具体地说，我正在发送一个对象，但我无法真正看到该对象在云中的接收位置。可能在这种基本应用程序中，没有那么相关，但我想开发一个具有以下结构的应用程序：我正在使用 REST 从我的 Android 设备发送数据。我正在开发我的服务器端代码）（将在云端）。在我的服务器端代码将接收我从 Android 发送的数据 -> 处理该数据 -> 在数据库中添加一些内容（存储在云中的数据库）（这是用非常原始的术语解释的基本原理）。这就是为什么我真的很想了解它的工作方式，到目前为止，我真的看不到我的数据在服务器端的接收位置。我假设这背后可能有一些自动机制？如果是这样，我真的很感兴趣，如果你能指出我，我怎么能以编程方式做到这一点。

另外，我想提一下，这段代码工作得很好，所以没有错误，我只是在理解与它相关的所有细节方面有问题。

谢谢你。

稍后编辑：我的数据库将是 App Engine Datastore。主要问题是我无法真正理解我的 Android 应用程序和 Google App Engine 应用程序之间的通信方式（我将使用从 Android 收到的数据进行所有必要的计算）。我真的可以使用更“明显”/解释性（对于傻瓜）的代码片段，我实际上看到我从 Android 发送的对象是在 Google App Engine 应用程序中接收的。当然，我看到了结果，使用Datastore Viewer，显示数据插入到数据库中。我感兴趣的是，我实际上如何在我的 Google App Engine 应用程序中发送数据，在那里接收它并对其执行一些操作，并且只有在我将它添加到数据库中之后。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T15:23:00.337

该`updateBuilder()`方法不在服务器端。它是安卓代码的一部分。`CloudEndpointUtils`是安卓的一部分。这是您创建的一个类来为您处理样板代码，因此您不必在每次需要访问服务器时都键入它。你看代码

```
Noteendpoint.Builder endpointBuilder = new Noteendpoint.Builder(
      AndroidHttp.newCompatibleTransport(),
      new JacksonFactory(),
      new HttpRequestInitializer() {
      public void initialize(HttpRequest httpRequest) { }
      }); 
```

假设您的 api 被调用`Noteendpoint`并且您正在“构建”一个对象来访问它。你可以打电话`endpointBuilder.build()`开始查询你的 api。如果您仔细查看该`CloudEndpointUtils.updateBuilder`方法，您会发现它所做的是将您的调用重定向到您的本地主机，而不是您在 appengine 上部署的代码。

如果您需要澄清，请告诉我。

回答您的编辑：

暂时忘记这是一个 Google 端点应用程序。您基本上是在设计一个系统，该系统接受输入，处理输入，然后将结果保存到数据库中。

现在让我们假设输入来自终端、文件还是对 api 端点的调用都无关紧要。您绝对必须做的是创建一个层来操作数据，然后将该数据传递给您的持久层（即数据库）。所以你需要（仍然忽略谷歌/appengine的所有东西）：

*   JPA 实体（仅具有 getter 和 setter 以及 JPA 注释的 POJO）

*   数据访问层：这是一个具有在 JPA POJO 上执行查询的方法的类（使用`EntityManagerFactory`）。

*   业务层：这是一个类，您可以在其中操作接收到的数据，然后将结果传递给数据访问层。

因此你有`Business logic layer => Data access layer => JPA POJO`. 因此，无论它是要在您当地的 glassfish 上还是在任何地方运行，都无需担心。

完成后，将端点注释添加到您的`Business layer`方法中。这些注释基本上意味着在你生成你的之后`android endpoint library`，你的android将能够调用你的`Business layer`方法，就好像它们就在你的android应用程序代码中一样。

你懂了？就好像你的机器人和你的服务器是一体的。您是否在此项目中使用 Google Eclipse 插件？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T15:05:25.587

我真的不明白你的问题。“云”由 Google App Engine 应用程序表示。它位于 Google 的服务器上，并在您创建项目时分配的 URL 下提供。该数据库可能是 App Engine 数据存储，或者是使用 MySQL 版本的 Google Cloud SQL 服务。

# sql-server - TSQL：调整动态查询搜索

> ID：15814480
> 
> 赞同：0
> 
> 时间：2013-04-04T14:44:47.617
> 
> 标签：sql-server, tsql

在阅读调优`TSQL`查询时，我看到了关于避免（或小心）`WHERE`子句中的函数的建议。然而，在某些情况下——比如需要从今天开始的动态日期的搜索——我很好奇查询是否可以进一步调整？例如，下面的查询使用`DATEADD`当前日期的功能，它允许用户随时获取过去三十天的正确信息：

```
SELECT *
FROM Zoo..Transportation
WHERE ArrivalDate BETWEEN DATEADD(DD,-30,GETDATE()) AND GETDATE() 
```

如果我尝试消除该函数，`DATEADD`我可以声明一个变量，该变量将提取该时间，然后使用存储在变量中的设置值查询数据，例如：

```
DECLARE @begin DATE
SET @begin = DATEADD(DD,-30,GETDATE())

SELECT *
FROM Zoo..Transportation
WHERE ArrivalDate BETWEEN @begin AND GETDATE() 
```

但是，执行计划和统计数据显示完全相同的读取次数、扫描次数和批处理成本。

在这些动态数据的实例中（例如，使用今天的日期作为起点），我们如何减少或消除`WHERE`子句中函数的使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T14:50:57.807

where 子句中的函数意味着做一些愚蠢的事情，比如：

```
WHERE DATEPART(WEEK, ArrivalDate) = 1 
```

或者

```
WHERE CONVERT(CHAR(10), ArrivalDate, 101) = '01/01/2012' 
```

例如，针对where 子句中的*列*的函数，在大多数情况下会破坏可搜索性（换句话说，使索引查找无用并强制索引或表扫描）。

我知道有一个例外：

```
WHERE CONVERT(DATE, ArrivalDate) = CONVERT(DATE, GETDATE()) 
```

但我不会在任何其他情况下依赖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:50:01.410

IME，在 WHERE 子句中使用函数仅在对查询中的数据进行操作时才会出现问题 - 这意味着该函数（其本身可能是复杂的 SQL）针对查询中的每个值运行 - 这可能会导致表扫描或类似于 optmiser 不知道要使用哪个索引（如果有）。

您上面的示例是使用带有当前日期的 DATEADD - 该值可能计算一次（或者如果它是为结果集中的每一行计算的，它不会影响查询计划，因为它不包含来自您的查询的数据） .

# android - 圆圈内的透明三角形如何覆盖圆圈的颜色

> ID：15814481
> 
> 赞同：0
> 
> 时间：2013-04-04T14:44:47.733
> 
> 标签：android, colors, android-drawable, shapedrawable

我必须绘制一个由圆圈内的三角形组成的自定义 shapeDrawable。我可以画圆和三角形，问题是我希望三角形是透明的，但是当我为绘制三角形的路径赋予透明颜色时，我会在三角形中看到圆圈的颜色，我不想有颜色圆形作为三角形的背景？这是我正在使用的代码：

```
 @Override
    protected void onDraw(Canvas canvas) {

    Paint p = new Paint ();

    int x = 1;
    int y = 1;
    Rect bounds = canvas.getClipBounds ();

    p.setColor (color.getBackgroundColor());
    p.setStyle(Style.FILL);
    p.setStrokeWidth (0);

    Path path = new Path();
    Point p1 = new Point(bounds.centerX()-bounds.height()/4, bounds.centerY()-bounds.height()/4);
    Point p2 = new Point(bounds.centerX()-bounds.height()/4, bounds.centerY()+bounds.height()/4);
    Point p3 = new Point(bounds.centerX()+bounds.height()/4, bounds.centerY());
    path.moveTo(p1.x, p1.y);
    path.lineTo(p2.x, p2.y);
    path.lineTo(p3.x, p3.y);
    path.close();

    Paint pTriang = new Paint();
    pTriang.setColor(Color.TRANSPARENT);
    pTriang.setXfermode(new PorterDuffXfermode(android.graphics.PorterDuff.Mode.CLEAR)); 
    canvas.drawCircle(bounds.exactCenterX(), bounds.exactCenterY(), bounds.height()/2, p);
    canvas.drawPath(path, pTriang );

} 
```

顺便说一句，我正在覆盖 ImageView！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:50:18.560

与其尝试绘制三角形，不如剪裁画布？

```
/* set up triangle path... */
path.close();
canvas.save();
canvas.clipPath(path, Region.Op.XOR);
canvas.drawCircle(...);
canvas.restore(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:05:29.477

我认为您需要在 Honeycomb 及更高版本上将图层类型设置为软件。在构造函数的末尾添加：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    setLayerType(LAYER_TYPE_SOFTWARE, null);
} 
```

# c - 如何将二维数组的一部分复制到一维数组中？

> ID：15814483
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:44:53.910
> 
> 标签：c, arrays, malloc

**这段代码：**

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
int arr[3][3] = {
                    1,2,3,
                    4,5,6,
                    7,8,9
                };

int *arry = (int*)malloc(3 * sizeof(int));
*arry = memcpy(arry, arr[1], 3 *sizeof(int));

 int t;
 for(t = 0 ; t < 3 ; t++)
    {
        printf("\n");
        printf("%d \t", arry[t]);
    }
} 
```

**正在产生此输出：** 
7280624
5
6
进程返回 3 (0x3) 执行时间：0.011 s
按任意键继续。

为什么它没有正确复制第一个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:47:01.593

它正在正确复制第一个值，但是

```
*arry = memcpy(arry, arr[1], 3 *sizeof(int)); 
```

您正在用 . 的返回值覆盖它`memcpy`。

打电话

```
memcpy(arry, arr[1], 3 *sizeof(int)); 
```

如果您想检查它，或者将返回值分配给不同的变量（毫无意义，因为`memcpy`返回它的第一个参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:52:22.587

[memcpy](http://www.cplusplus.com/reference/cstring/memcpy/)返回一个 void*。

您正在将 memcpy 返回的 void* 分配给 arry 指向的值。在尝试读取该值时，这会给您一个奇怪的值。只需调用 memcpy

```
memcpy(arry, arr[1], 3 * sizeof(int)); 
```

# multithreading - 如果我在另一个线程中填充数组，为什么我会得到超出范围的索引？

> ID：15814484
> 
> 赞同：0
> 
> 时间：2013-04-04T14:44:55.640
> 
> 标签：multithreading, ios6, grand-central-dispatch, alassetslibrary

我正在使用 assets 枚举器块来填充两个数组；一个用于库资源，一个用于全屏图片。**_albumAssets**数组用作一个**collectionView**的数据源，而**_albumPics**用作我的详细**滚动**视图的数据源。因为我在同一个块的两个数组中添加元素，所以性能很差。我认为直接从块中将对象添加到我的数组是可以的，因为块在单独的线程中执行。所以我想出了这个代码，也许这是一件愚蠢的事情，我不确定。我的表现提高了很多，但遗憾的是现在我得到了**NSRangeException**因此，我们将不胜感激任何帮助或建议。奇怪的是我只是有时会得到这个，这意味着我通过点击我的**collectionView**中的缩略图来展示我的详细 ScrollViewController 。当我开始浏览我的图像时，有时会出现异常，有时不会...

```
-(void)enumerateAssetsFromGroup:(ALAssetsGroup *)group
{

    [_albumAssets removeAllObjects];
    [_albumPics   removeAllObjects];

    void (^assetEnumerator)(ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *result, NSUInteger index, BOOL *stop)
    {
        if (result != NULL) {
            [_albumAssets addObject: result];
            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            ALAssetRepresentation *assetRep = [result defaultRepresentation];
            img = [UIImage imageWithCGImage:[assetRep fullScreenImage]];
            [_albumPics addObject:img];
        });

    }

        [self.collectionView reloadData];
};

    [group enumerateAssetsUsingBlock: assetEnumerator];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T05:58:02.427

[这](http://blog.slaunchaman.com/2011/02/28/cocoa-touch-tutorial-using-grand-central-dispatch-for-asynchronous-table-view-cells/)是一个如何异步加载表格视图单元格的教程。
因此，您可以首先使用无法选择的灰色缩略图加载表格视图单元格，然后将显示更改为正常，并在异步加载相应图像后立即将其选中。然后用户有一个关于所有图像的缩略图概览，以及其中哪些已经可用。

# php - 阻止 PHP 文件下载

> ID：15814490
> 
> 赞同：1
> 
> 时间：2013-04-04T14:45:07.397
> 
> 标签：php

我刚刚发现每个人都可以通过`alt`按键和左键单击来下载我的 php 文件。

但是，所有其他网站都通过将下载内容替换为静态 html 文件来阻止访问者下载其源文件。

我不知道如何隐藏我的源文件。任何人都可以帮忙吗？我是否以某种方式弄乱了我的服务器设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:47:07.147

他们没有下载您的 PHP 文件，他们只是下载您的 PHP 脚本生成的静态 HTML。**下载 PHP源代码**的能力取决于服务器配置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:47:01.203

您是说，如果您单击`file.php`正常方式，它会按预期运行并且您会看到该 PHP 脚本的**输出**，但是如果您单击 ALT，那么您可以下载该文件的**源代码吗？**我真的很怀疑。您可以下载的所有内容可能是您的脚本的**输出**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T14:47:55.943

他们没有下载您拥有的实际 php 代码。他们只会像浏览器一样获取您的输出。如果您在页面上按 CTRL + S，您可以执行相同的操作。

因此，只要您的 php 代码 id 已编译，您就不必担心这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T14:49:41.230

PHP 被*解释*并吐出一些输出（使用`echo`s 和`print`语句），这些输出作为纯 HTML 发送到浏览器。他们不能“下载你的 PHP”。除非您提供源代码文件`.phps`（通常）。

# spring - 设置 Spring Profile 变量

> ID：15814497
> 
> 赞同：78
> 
> 时间：2013-04-04T14:45:23.220
> 
> 标签：spring, spring-boot, spring-profiles

我有两个 Spring 配置文件：`dev`和`test`. 我想在服务器环境中设置活动配置文件，我不想在我的代码中设置它，以便无论我在哪里部署我的应用程序，配置文件都会根据服务器中的配置文件加载。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2013-04-04T14:47:23.970

您可以简单地在服务器上设置系统属性，如下所示...

```
-Dspring.profiles.active=test 
```

**编辑：**要将其添加到 Eclipse 中的 tomcat，请选择`Run -> Run Configurations`并选择您的 Tomcat 运行配置。单击`Arguments`选项卡并在末尾添加 -Dspring.profiles.active=test `VM arguments`。另一种方法是将属性添加到`Servers`项目中的 catalina.properties 中，但如果将其添加到那里，请省略 -D

**编辑：**要与**Spring Boot**一起使用，您还有一个额外的选择。如果在属性前面加上两个破折号，则可以将该属性作为程序参数传递。

这是使用 Spring Boot 可执行 jar 文件的两个示例...

**系统属性**

```
[user@host ~]$ java -jar -Dspring.profiles.active=test myproject.jar 
```

**程序参数**

```
[user@host ~]$ java -jar myproject.jar --spring.profiles.active=test 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-12-09T13:41:47.327

至少有两种方法可以做到这一点：

1.  在 web.xml 中定义上下文参数——这打破了“一个包适用于所有环境”的声明。我不建议这样做

2.  定义系统属性`-Dspring.profiles.active=your-active-profile`

我相信定义系统属性是一种更好的方法。那么如何为Tomcat定义系统属性呢？在互联网上，我可以找到很多建议，例如“修改 catalina.sh”，因为您找不到任何配置文件来执行此类操作。修改 catalina.sh 是一个肮脏的不可维护的解决方案。有一种更好的方法可以做到这一点。

只需在 Tomcat 的 bin 目录中创建包含以下内容的文件 setenv.sh：

```
JAVA_OPTS="$JAVA_OPTS -Dspring.profiles.active=dev" 
```

它会在运行 catalina.sh start 或 run 时自动加载。

这是描述上述解决方案[的博客。](https://web.archive.org/web/20160406155933/http://maciejwalkowiak.pl/blog/2012/03/27/spring-3-1-profiles-and-tomcat-configuration/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-10-15T10:17:42.660

对于 Eclipse，**`-Dspring.profiles.active`**在 VM 参数中设置变量应该可以解决问题。

去

> 右键单击项目 --> 运行方式 --> 运行配置 --> 参数

**`-Dspring.profiles.active=dev`**并在***VM 参数***中添加您的

 *** * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-16T19:01:27.150

作为系统环境变量：

**Windows：** 开始 -> 输入“envi”选择环境变量并添加一个新的：（ `Name: spring_profiles_active Value: dev`或任何你的）

**Linux：** 将以下行添加到 PATH 下的 /etc/environment：

`spring_profiles_active=prod`（或任何个人资料）

那么`export spring_profiles_active=prod`你现在也可以在运行时使用它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-06-25T18:11:27.040

对于 Tomcat 8：

Linux：

创建 setenv.sh 并使用以下内容对其进行更新：

导出 SPRING_PROFILES_ACTIVE=dev

视窗：

创建 setenv.bat 并使用以下内容对其进行更新：

设置 SPRING_PROFILES_ACTIVE=dev

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-08-18T15:39:32.020

在`<tomcat-home>\conf\catalina.properties`文件中，添加以下新行：

```
spring.profiles.active=dev 
```**

# ios - 当应用程序处于后台状态时获取本地通知？

> ID：15814498
> 
> 赞同：0
> 
> 时间：2013-04-04T14:45:26.487
> 
> 标签：ios, nsdate, background-process, uilocalnotification

我想开发一个提醒应用程序。它应该每周、每月、每季度、六个月和每年提醒人们。

我正在使用 NSDate 属性获取当前日期，然后将 7 天添加到当前日期，添加 7 天后的日期将存储在 plist 中。

我选择电话/邮件/消息按钮来提醒人们。在按钮操作中，我将当前日期与保存在 plist 中的日期进行比较，然后设置本地通知。但是根据火灾日期，本地通知不起作用。当应用程序在前台时它工作正常，但它进入后台它不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:04:48.253

你必须安排你的闹钟。以下是 Apple 文档的片段：

```
- (void)scheduleAlarmForDate:(NSDate*)theDate
{
    UIApplication* app = [UIApplication sharedApplication];
    NSArray*    oldNotifications = [app scheduledLocalNotifications];

    // Clear out the old notification before scheduling a new one.
    if ([oldNotifications count] > 0)
        [app cancelAllLocalNotifications];

    // Create a new notification.
    UILocalNotification* alarm = [[UILocalNotification alloc] init];
    if (alarm)
    {
        alarm.fireDate = theDate;
        alarm.timeZone = [NSTimeZone defaultTimeZone];
        alarm.repeatInterval = 0;
        alarm.soundName = @"alarmsound.caf";
        alarm.alertBody = @"Time to wake up!";

        [app scheduleLocalNotification:alarm];
    }
} 
```

[您可以在 Apple 的文档“App States and Multitasking”](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)中找到很多有用的信息，特别是在[“Background Execution and Multitasking”](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)部分（它完全涵盖了您的用例）。

# php - 基于会话 ID 和/或 IP 地址和代理切换器帐户使用的 php 限制网站

> ID：15814500
> 
> 赞同：0
> 
> 时间：2013-04-04T14:45:28.147
> 
> 标签：php, mysql, ip-address

我真的不认为有一个万无一失的方法，但我当然是来​​这里寻求建议的......

我有一个项目，我想根据 IP 地址限制每个用户每天使用 3 次。当然，对于传统用例，我可以使用 mysql 表轻松地做到这一点......但是我如何解释那些足够聪明的人使用[foxyproxy](https://addons.mozilla.org/en-US/firefox/addon/foxyproxy-standard/)（firefox 的代理切换器插件）和/或打开一个新的浏览器来获得一个新的会话。每次使用都会显示为一个新的、唯一的用户。

我是坚持使用非万无一失的方法还是我可以尝试其他任何方法？我很确定我们的大多数用户群都不知道如何使用这些方法，甚至不知道这些方法是什么，但无论如何我想解释一下。

**编辑**：如果也有非 php 解决方案，我愿意接受任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:52:21.727

从字面上看，您无能为力以某种`fool-proof`方式防止这种情况发生。无论你想出什么，对于任何对网络如何工作有模糊线索的人来说，解决它都是微不足道的。

您应该实施适当的身份验证系统并根据用户 ID 而不是访问服务的主机进行限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:08:57.757

某些代理服务器可能（或可能不）在 HTTP 标头中设置真实 IP 地址，例如 HTTP_CLIENT_IP 或 HTTP_X_FORWARDED_FOR 您还可以尝试根据其他变量来区分用户，`$_SERVER`例如

```
[HTTP_USER_AGENT] => Mozilla/5.0 (Windows NT 5.1; rv:19.0) Gecko/20100101 Firefox/19.0
[HTTP_ACCEPT] => text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
[HTTP_ACCEPT_LANGUAGE] => en-US,en;q=0.5
[HTTP_ACCEPT_ENCODING] => gzip, deflate
[HTTP_X_DNT_OVERSION] => 2.2.1.611
[HTTP_X_DNT_COHORT] => 2012-8-2
[HTTP_X_DNT_VERSION] => 2.2.8.307 FF ffamo 10008 
```

它并不完美，它们都可以伪造，并且你会得到很多误报，因为很多人都有这个设置，但如果你真的那么绝望，它可能会有所帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-04T14:53:39.427

你可以用 cookie 和 ip 阻止列表来限制它（当然你也可以使用 flash cookie、javascript 的 localstorage 等等）。在这两种情况下，您都可以节省服务的使用量和他使用它的时间。如果用户只是尝试删除他的 cookie 而没有获得新 ip（无论是代理还是他只是改变他的IP）。

这适用于最普通的用户。但是没有办法绝对确定没有人可以绕过你的限制。

# css - CSS在悬停另一个时显示隐藏元素

> ID：15814504
> 
> 赞同：1
> 
> 时间：2013-04-04T14:45:43.823
> 
> 标签：css

当鼠标悬停在链接上时，我想为每个链接显示一个 div 元素。我的例子是 4 个链接和 4 个阴影标题.. 这些阴影标题应该被隐藏，只有当鼠标经过指定的链接时才会出现。

这是我现在拥有的代码：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>sample</title>

<style type="text/css">

body {
    background:#1d2733;
    color:#fff;
    margin:0;
}

#col1 {
    width:300px;
    height:129px;
    float:left; 
    padding-bottom:20px;
}
#col2 {
    width:600px;
    float:right;
    padding-top:150px;
    border-bottom: 2px solid white;
}

#shadowedlinks {
    width:600px;
    float:right;
    position:absolute;
    margin-top:-30px;
    top:0;
}

div.lnk{
    position:absolute;
    font-size:180px;
    text-align:center;
    font-weight:bold;
    color:#444;
}

#links {
    width:600px;
    float:right;
    position:absolute;
    top:0;
    padding-top:100px;
}

#links h1 {
    float:left;
    font-size:30px;
    text-align:center;
    padding:0 20px; 
}
#links h1 a {
    color:#fff;
    text-decoration:none;
}
#links h1 a:hover{
    color:#FF9;
}

</style>
</head>

<body>
<div id="col1">
<h1><a href="index.php"><img src="imgs/logo.png" class="logo" border="0" width="250" height="129" /></a></h1>
</div>
<div id="col2">
    <div id="shadowedlinks">
        <div class="lnk" id="lnkHome">HOME</div>
        <div class="lnk" id="lnk1">LINK1</div>
        <div class="lnk" id="lnk2">LINK2</div>
        <div class="lnk" id="lnk3">LINK3</div>
    </div>
    <div id="links">
        <h1><a href="index.php">HOME</a></h1>
        <h1><a href="link1.php">LINK1</a></h1>
        <h1><a href="link2.php">LINK2</a></h1>
        <h1><a href="link3.php">LINK3</a></h1>
    </div>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T15:11:29.470

通过稍微改变你的标记，你可以做这样的事情。

**例子**

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>sample</title>

<style type="text/css">

body {
    background:#1d2733;
    color:#fff;
    margin:0;
}

#col1 {
    width:300px;
    height:129px;
    float:left; 
    padding-bottom:20px;
}
#col2 {
    width:600px;
    float:right;
    padding-top:150px;
    border-bottom: 2px solid white;
}

#shadowedlinks {
    width:600px;
    float:right;
    position:absolute;
    margin-top:-30px;
    top:0;
}

#shadowedlinks div
{
    display: none;
}

.lnk{
    position:absolute;
    font-size:180px;
    text-align:center;
    font-weight:bold;
    color:#444;
    top: -15px;
    z-index: -1;
}

#links {
    width:600px;
    float:right;
    position:absolute;
    top:0;
    padding-top:100px;
}

#links h1 {
    float:left;
    font-size:30px;
    text-align:center;
    padding:0 20px; 
}
#links a {
    color:#fff;
    text-decoration:none;
}
#links a:hover{
    color:#FF9;
}

#links .lnk
{
    display: none;
}

.link-home:hover ~ #lnkHome,
.link-1:hover ~ #lnk1,
.link-2:hover ~ #lnk2,
.link-3:hover ~ #lnk3
{
    display: block;
}

</style>
</head>

<body>
<div id="col1">
<h1><a href="index.php"><img src="imgs/logo.png" class="logo" border="0" width="250" height="129" /></a></h1>
</div>
<div id="col2">
<div id="links">
    <a class="link-home" href="index.php"><h1>HOME</h1></a>
    <a class="link-1" href="link1.php"><h1>LINK1</h1></a>
    <a class="link-2" href="link2.php"><h1>LINK2</h1></a>
    <a class="link-3" href="link3.php"><h1>LINK3</h1></a>

    <div class="lnk" id="lnkHome">HOME</div>
    <div class="lnk" id="lnk1">LINK1</div>
    <div class="lnk" id="lnk2">LINK2</div>
    <div class="lnk" id="lnk3">LINK3</div>
</div> 
```

我会争辩说，因为影子链接是绝对定位的，所以它们不需要包含 div，所以我删除了它。

这允许我`~`在悬停时使用兄弟选择器。

[提琴手](http://jsfiddle.net/Hmru5/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T14:47:37.977

直到 CSS4（或者有些人可能开始称它为 CSS3.1，因为（还）没有官方对 CSS4 的引用）“准备好”并在浏览器中得到支持，你才能做到这一点。不多说了。您需要使用 JavaScript 来实现这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T14:52:15.280

CSS 中还没有父选择器。

`#shadowedlinks`如果链接是它们的兄弟并且在它们之后，你可以让它工作。所以你可以像男性一样：

```
a#link1:hover + #shadowedlinks #shadowed_link1 {
  display: block;
} 
```

但我认为 JavaScript 会是一个更好的解决方案。

# c - 多精度加法的意外表现

> ID：15814505
> 
> 赞同：6
> 
> 时间：2013-04-04T14:45:44.657
> 
> 标签：c, gcc, assembly, x86

作为练习，我正在尝试在 c 和 x86-64 asm 中实现多精度算术加法（程序的完整列表和 objdump 在帖子的末尾）。

编辑：我添加了“addN4()”asm 函数，它删除了“部分标志更新停顿”，现在“addN4()”是最快的。:)

EDIT2：添加了计算正确进位的“addN5()”和“addN6()”c 函数。（感谢斯蒂芬佳能）。

程序将两个数组中的数字添加到第三个数组中并生成进位值。多精度数以小端格式存储。这是示例代码：

```
 int carry = 0;
  for (i = 0; i < n; i++) {
    c[i] = a[i] + b[i] + carry;
    carry = (c[i] < a[i]) || (c[i] < b[i]); 
```

我正在编译程序：

`gcc -g -O3 -Wall int.c -o int'

并运行代码：

`时间./int'

我得到以下执行时间：

```
addN1():
  0.26s user 0.00s system 94% cpu 0.284 total
addN2():
  0.42s user 0.00s system 96% cpu 0.441 total
addN3():
  0.56s user 0.00s system 97% cpu 0.580 total
addN1() with -DCOUNT_CARRIES:
  0.18s user 0.01s system 92% cpu 0.208 total
addN2() with -DCOUNT_CARRIES:
  0.41s user 0.00s system 96% cpu 0.433 total
addN4():
  0.15s user 0.00s system 89% cpu 0.169 total
addN5():
  0.20s user 0.00s system 92% cpu 0.215 total
addN6():
  0.42s user 0.00s system 96% cpu 0.441 total 
```

我有几个问题：

1.  为什么 addN3() 不是最快的？我希望这是最快的，因为我特别注意编写“漂亮”的汇编代码。

2.  为什么 addN2() 比 addN1() 慢？在我看来， addN1() 应该运行得更慢，因为它在 for 循环中有额外的 jmp 指令（jb 400716 ）。我希望这会导致分支预测器出现问题，因为这个跳转有 50% 的缓存是双向的。

3.  为什么示例 ''addN1() with -DCOUNT_CARRIES'' 运行速度最快？在我看来，这个例子应该比 ''andN()'' 运行得慢，因为我们计算了基准测试中生成的进位数。

请有人可以向我解释这个“意外”的执行时间。

运行环境：

```
CPU: Intel(R) Core(TM) i7 CPU       M 640  @ 2.80GHz
GCC 4.7
Ubuntu 12.10 
```

整个程序清单：

```
// int.c
#include <stdio.h>
#include <stdlib.h>

#define N 1024

unsigned long a[N];
unsigned long b[N];
unsigned long c[N];

int carry_count;

void addN1(unsigned long *a, unsigned long *b, unsigned long *c, int n) {
  int i;
  int carry = 0;
  for (i = 0; i < n; i++) {
    c[i] = a[i] + b[i] + carry;
    carry = (c[i] < a[i]) || (c[i] < b[i]);
#ifdef COUNT_CARRIES
    carry_count += carry;
#endif
  }
}

void addN2(unsigned long *a, unsigned long *b, unsigned long *c, int n) {
  int i;
  int carry = 0;
  for (i = 0; i < n; i++) {
    c[i] = a[i] + b[i] + carry;
    carry = (c[i] < a[i]) | (c[i] < b[i]);
#ifdef COUNT_CARRIES
    carry_count += carry;
#endif
  }
}

void addN3(unsigned long *a, unsigned long *b, unsigned long *c, int n) {
  register unsigned long tmp;
  register unsigned long index;
  asm volatile (
    "xor %[index], %[index]\n"
    "1:\n\t"
    "movq (%[a],%[index],8), %[tmp]\n\t"
    "adcq (%[b],%[index],8), %[tmp]\n\t"
    "movq %[tmp], (%[c],%[index],8)\n\t"
    "inc %[index]\n\t"
    "dec %[n]\n\t"
    "jnz 1b"
    : [a] "+r"(a), [b] "+r"(b), [c] "+r"(c), [n] "+r"(n),
      [tmp] "=r"(tmp), [index] "=r"(index)
    :: "memory"
  );
}

void addN4(unsigned long *a, unsigned long *b, unsigned long *c, int n) {
  register unsigned long tmp;
  register unsigned long index;
  unsigned char carry = 0;
  asm volatile (
    "xor %[index], %[index]\n"
    "1:\n\t"
    "shr %[carry]\n\t"
    "movq (%[a],%[index],8), %[tmp]\n\t"
    "adcq (%[b],%[index],8), %[tmp]\n\t"
    "movq %[tmp], (%[c],%[index],8)\n\t"
    "setb %[carry]\n\t"
    "add $1, %[index]\n\t"
    "sub $1, %[n]\n\t"
    "jnz 1b"
    : [a] "+r"(a), [b] "+r"(b), [c] "+r"(c), [n] "+r"(n),
      [tmp] "=r"(tmp), [index] "=r"(index), [carry] "+r"(carry)
    :: "memory"
  );
}

void addN5(unsigned long *a, unsigned long *b, unsigned long *c, int n) {
  int i;
  int carry = 0;
  int partial;
  for (i = 0; i < n; i++) {
    c[i] = a[i] + b[i];
    partial = c[i] < a[i];
    c[i] += carry;
    carry = (!c[i]) || partial;
  }
}
void addN6(unsigned long *a, unsigned long *b, unsigned long *c, int n) {
  int i;
  int carry = 0;
  int partial;
  for (i = 0; i < n; i++) {
    c[i] = a[i] + b[i];
    partial = c[i] < a[i];
    c[i] += carry;
    carry = (!c[i]) | partial;
  }
}

unsigned long rand_long() {
  unsigned long x, y, z;
  x = rand();
  y = rand();
  z = rand();
  // rand() gives 31 bits
  return (x << 62) | (y << 31) | z;
}

int main() {
  int i;
  srandom(0);
  for (i = 0; i < N; i++) {
    a[i] = rand_long();
    b[i] = rand_long();
  }
  for (i = 0; i < 100000; i++) {
    // I change this function in each run.
    addN1(a, b, c, N);
  }
  for (i = 0; i < N; i++) {
    printf("%lu\n", c[i]);
  }
  printf("%d", carry_count);
  return 0;
} 
```

转储：

```
00000000004006e0 <addN1>:
  4006e0:       31 c0                   xor    %eax,%eax
  4006e2:       45 31 c9                xor    %r9d,%r9d
  4006e5:       85 c9                   test   %ecx,%ecx
  4006e7:       44 8b 15 72 65 20 00    mov    0x206572(%rip),%r10d        # 606c60 <carry
_count>
  4006ee:       7e 38                   jle    400728 <addN1+0x48>
  4006f0:       4c 8b 04 c7             mov    (%rdi,%rax,8),%r8
  4006f4:       4c 03 04 c6             add    (%rsi,%rax,8),%r8
  4006f8:       4d 01 c8                add    %r9,%r8
  4006fb:       41 b9 01 00 00 00       mov    $0x1,%r9d
  400701:       4c 89 04 c2             mov    %r8,(%rdx,%rax,8)
  400705:       4c 3b 04 c7             cmp    (%rdi,%rax,8),%r8
  400709:       72 0b                   jb     400716 <addN1+0x36>
  40070b:       45 31 c9                xor    %r9d,%r9d
  40070e:       4c 3b 04 c6             cmp    (%rsi,%rax,8),%r8
  400712:       41 0f 92 c1             setb   %r9b
  400716:       48 83 c0 01             add    $0x1,%rax
  40071a:       45 01 ca                add    %r9d,%r10d
  40071d:       39 c1                   cmp    %eax,%ecx
  40071f:       7f cf                   jg     4006f0 <addN1+0x10>
  400721:       44 89 15 38 65 20 00    mov    %r10d,0x206538(%rip)        # 606c60 <carry_count>
  400728:       f3 c3                   repz retq 
  40072a:       66 0f 1f 44 00 00       nopw   0x0(%rax,%rax,1)

0000000000400730 <addN2>:
  400730:       31 c0                   xor    %eax,%eax
  400732:       45 31 c0                xor    %r8d,%r8d
  400735:       85 c9                   test   %ecx,%ecx
  400737:       44 8b 1d 22 65 20 00    mov    0x206522(%rip),%r11d        # 606c60 <carry_count>
  40073e:       7e 39                   jle    400779 <addN2+0x49>
  400740:       4c 8b 14 c7             mov    (%rdi,%rax,8),%r10
  400744:       4c 03 14 c6             add    (%rsi,%rax,8),%r10
  400748:       4f 8d 0c 02             lea    (%r10,%r8,1),%r9
  40074c:       4c 89 0c c2             mov    %r9,(%rdx,%rax,8)
  400750:       4c 3b 0c c6             cmp    (%rsi,%rax,8),%r9
  400754:       41 0f 92 c0             setb   %r8b
  400758:       4c 3b 0c c7             cmp    (%rdi,%rax,8),%r9
  40075c:       41 0f 92 c1             setb   %r9b
  400760:       48 83 c0 01             add    $0x1,%rax
  400764:       45 09 c8                or     %r9d,%r8d
  400767:       45 0f b6 c0             movzbl %r8b,%r8d
  40076b:       45 01 c3                add    %r8d,%r11d
  40076e:       39 c1                   cmp    %eax,%ecx
  400770:       7f ce                   jg     400740 <addN2+0x10>
  400772:       44 89 1d e7 64 20 00    mov    %r11d,0x2064e7(%rip)        # 606c60 <carry_count>
  400779:       f3 c3                   repz retq 
  40077b:       0f 1f 44 00 00          nopl   0x0(%rax,%rax,1)

0000000000400780 <addN3>:
  400780:       4d 31 c0                xor    %r8,%r8
  400783:       4a 8b 04 c7             mov    (%rdi,%r8,8),%rax
  400787:       4a 13 04 c6             adc    (%rsi,%r8,8),%rax
  40078b:       4a 89 04 c2             mov    %rax,(%rdx,%r8,8)
  40078f:       49 ff c0                inc    %r8
  400792:       ff c9                   dec    %ecx
  400794:       75 ed                   jne    400783 <addN3+0x3>
  400796:       c3                      retq

0000000000400770 <addN4>:
  400770:       31 c0                   xor    %eax,%eax
  400772:       4d 31 c9                xor    %r9,%r9
  400775:       d0 e8                   shr    %al
  400777:       4e 8b 04 cf             mov    (%rdi,%r9,8),%r8
  40077b:       4e 13 04 ce             adc    (%rsi,%r9,8),%r8
  40077f:       4e 89 04 ca             mov    %r8,(%rdx,%r9,8)
  400783:       0f 92 c0                setb   %al
  400786:       49 83 c1 01             add    $0x1,%r9
  40078a:       83 e9 01                sub    $0x1,%ecx
  40078d:       75 e6                   jne    400775 <addN4+0x5>
  40078f:       c3                      retq  

0000000000400790 <addN5>:
  400790:       31 c0                   xor    %eax,%eax
  400792:       45 31 c9                xor    %r9d,%r9d
  400795:       85 c9                   test   %ecx,%ecx
  400797:       41 bb 01 00 00 00       mov    $0x1,%r11d
  40079d:       7e 35                   jle    4007d4 <addN5+0x44>
  40079f:       90                      nop
  4007a0:       4c 8b 04 c6             mov    (%rsi,%rax,8),%r8
  4007a4:       4c 03 04 c7             add    (%rdi,%rax,8),%r8
  4007a8:       4c 89 04 c2             mov    %r8,(%rdx,%rax,8)
  4007ac:       4c 8b 14 c7             mov    (%rdi,%rax,8),%r10
  4007b0:       4d 01 c1                add    %r8,%r9
  4007b3:       4c 89 0c c2             mov    %r9,(%rdx,%rax,8)
  4007b7:       4d 39 d0                cmp    %r10,%r8
  4007ba:       41 0f 92 c0             setb   %r8b
  4007be:       4d 85 c9                test   %r9,%r9
  4007c1:       45 0f b6 c0             movzbl %r8b,%r8d
  4007c5:       45 0f 44 c3             cmove  %r11d,%r8d
  4007c9:       48 83 c0 01             add    $0x1,%rax
  4007cd:       39 c1                   cmp    %eax,%ecx
  4007cf:       4d 63 c8                movslq %r8d,%r9
  4007d2:       7f cc                   jg     4007a0 <addN5+0x10>
  4007d4:       f3 c3                   repz retq 
  4007d6:       66 2e 0f 1f 84 00 00    nopw   %cs:0x0(%rax,%rax,1)
  4007dd:       00 00 00 

00000000004007e0 <addN6>:
  4007e0:       31 c0                   xor    %eax,%eax
  4007e2:       45 31 c9                xor    %r9d,%r9d
  4007e5:       85 c9                   test   %ecx,%ecx
  4007e7:       7e 38                   jle    400821 <addN6+0x41>
  4007e9:       0f 1f 80 00 00 00 00    nopl   0x0(%rax)
  4007f0:       4c 8b 04 c6             mov    (%rsi,%rax,8),%r8
  4007f4:       4c 03 04 c7             add    (%rdi,%rax,8),%r8
  4007f8:       4c 89 04 c2             mov    %r8,(%rdx,%rax,8)
  4007fc:       4c 3b 04 c7             cmp    (%rdi,%rax,8),%r8
  400800:       41 0f 92 c2             setb   %r10b
  400804:       4d 01 c8                add    %r9,%r8
  400807:       4d 85 c0                test   %r8,%r8
  40080a:       4c 89 04 c2             mov    %r8,(%rdx,%rax,8)
  40080e:       41 0f 94 c0             sete   %r8b
  400812:       48 83 c0 01             add    $0x1,%rax
  400816:       45 09 d0                or     %r10d,%r8d
  400819:       39 c1                   cmp    %eax,%ecx
  40081b:       45 0f b6 c8             movzbl %r8b,%r9d
  40081f:       7f cf                   jg     4007f0 <addN6+0x10>
  400821:       f3 c3                   repz retq 
  400823:       66 66 66 66 2e 0f 1f    data32 data32 data32 nopw %cs:0x0(%rax,%rax,1)
  40082a:       84 00 00 00 00 00 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-04T14:56:53.633

## 问题一：

您遇到了**部分标志更新停顿**。这是谈论最少的建筑危害之一。

因为`inc`and`dec`指令不会写入所有的 EFLAGS，所以它们需要任何先前写入 EFLAGS 的指令在它们发出之前完成（以获取它们不写入的位的值）。这实质上是序列化你的整个循环。有关详细信息，请参阅 Intel 优化手册中的第 3.5.2.6 节。

结果是你非常聪明的循环，它取决于`inc`而`dec`不是覆盖进位，不幸的是，它太聪明了一半。

现在，你能做些什么呢？

*   使用实现进位的其他实现之一，不需要使用`inc`or `dec`。适当展开，这是一种非常快速的方法。
*   再聪明点。您可以使用`lea`来处理索引和计数，以及分支 on `jrcxz`，这可以让您保留进位而不会出现部分标志更新停顿。细节很有趣，你自己解决，所以我不会放弃整个游戏。
*   购买新硬件！在 Sandybridge 和 Ivybridge，这个特殊摊位的情况要好得多。（他们插入一个“合并标志”微操作而不是序列化）。

## 问题2：

如果没有模拟器，很难准确地说出为什么会发生这种情况。但是，我要注意以下几点：您在同一个（相当小的）数据集上重复运行。现代 x86 上的分支预测器非常复杂，它很可能以非常高的准确度预测第一个分支，这意味着 AddN1 将执行的指令明显少于 AddN2。

顺便说一句：C 代码中的两个进位检查实际上都是不正确的（！）：

```
c[i] = a[i] + b[i] + carry;
carry = (c[i] < a[i]) || (c[i] < b[i]); 
```

如果`a[i] = b[i] = 0xffffffffffffffff`和`carry = 1`，那么`c[i] == a[i]`和`c[i] == b[i]`，但是仍然发生了进位。（此外：这完美地说明了信任随机测试的危险。随机测试命中这种情况的几率是 680564733841876926926749214863536422912:1。如果您可以在一组 12 核 Xeon 的每个核心上测试一个随机添加每个周期，您仍然需要在您的集群中拥有 3x10^20 台计算机才能有 50% 的机会在一年内找到此错误）。

如何修复它的几个选项：

```
carry = (c[i] < a[i] || c[i] == a[i] & carry); 
```

或者

```
partialresult = a[i] + b[i];
partialcarry = partialresult < a[i];
c[i] = partialresult + carry;
carry = !c[i] | partialcarry; 
```

## 问题 3：

老实说，我不知道。我需要花很多时间思考我没有的。现代处理器的性能分析非常复杂，如果没有模拟器，它们可能会令人困惑。

## 其他注意事项：

编译器已决定重新读取`a[i]`并`b[i]`从内存中进行比较。大概这是因为它试图避免它们和`c[i]`. 由于最佳多精度添加完全受负载限制，因此这会将您的吞吐量限制为峰值的 50%。要么放入临时文件，要么添加`a[i]`关键字以避免这种危险。`b[i]``restrict`

您可以通过展开使您的 AddN4 更快，因为您不需要在不跨越循环边界的添加之间进行`setb`/跳舞。`shr`

# javascript - Knockoutjs：当为空或为空时隐藏图像

> ID：15814506
> 
> 赞同：2
> 
> 时间：2013-04-04T14:45:45.993
> 
> 标签：javascript, knockout.js

我第一次尝试在网页中实现 knockoutjs。我偶然发现了以下问题，但也许它也是“最佳实践”的一个案例。

我有一个产品页面，一个产品可以有一个产品图片。当没有可用的产品图片时，该属性设置为 null，我需要显示“没有可用的图片”图片。

我的模型：

```
function ProductOverview() {
     var self = this;

     self.guid = ko.observable();
     self.Image = ko.observable();
     self.IsActive = ko.observable(false);
} 
```

我的视图模型：

```
function productOverviewModelView() {
var self = this;

self.productOverview = new ProductOverview();
self.ShowNoImage = ko.computed(function () {
    if (self.productOverview.Image() === null || self.productOverview.Image() === "") {
        return true;
    } else {
        return false;
    }
}, this);
self.ImageAvailable = ko.computed(function () {
    if (self.productOverview.Image() === null || self.productOverview.Image === "") {
        return false;
    } else {
        return true;
    }
}, this);

//whenever the device is changed call this function
self.selectedProduct.subscribe(function () {
    if (self.selectedProduct === "") {
        self.productOverview = null;
    } else {
        $.ajax({
            type: "POST",
            url: "productoverview.aspx/getdevice",
            data: "{'guid':'" + self.selectedProduct() + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                var product = JSON.parse(unescape(data.d));
                self.productOverview.guid(product.guid);
                self.productOverview.Image(product.Image);
                self.productOverview.IsActive(product.IsActive);
            }
        });
    }
}); 
```

}

我的观点：

```
<div style="display:inline-block;">
  <img alt="" src="#" data-bind="attr: { src: productOverview.Image }" />
  <img alt="" src="../../images/no-image-available.jpg" data-bind="visible:ShowNoImage" />
</div> 
```

它有效，但像这样它不起作用：

```
<img alt="" src="../../images/no-image-available.jpg" data-bind="visible: productOverview.Image != ''" /> 
```

*有没有更短的方法，而不是计算可观察值？*

我还想在产品处于活动状态时显示活动图像：

```
<img src="../../images/active_icon.gif" data-bind="visible: productOverview.isActive" /> 
```

*但是这张图没有显示，为什么呢？*

反过来，我也可以像这样显示非活动图像吗？

```
<img src="../../images/notactive_icon.gif" data-bind="visible: !productOverview.isActive" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:03:32.237

我已经制定了一个关于您的问题的 jsFiddle 示例：http: [//jsfiddle.net/XAXKZ/5](http://jsfiddle.net/XAXKZ/5)

你犯了一些错误：

*   isActive 和 IsActive 混淆了。JavaScript 仍然区分大小写。您需要将其显示为一个函数：

`data-bind="visible: !IsActive()"`

*   您也可以通过这种方式测试其他变量，而无需为其添加专用函数：

`data-bind="visible:productOverview.Image() == '' || productOverview.Image() == null"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:56:03.567

你应该像这样调用 observable：

```
<img src="../../images/notactive_icon.gif" data-bind="visible: productOverview.isActive() " /> 
```

这是因为 isActive 是一个函数，所以它永远不会为空

# javascript - 在 IE 上使用 $.ajax 类型 GET 时出错

> ID：15814513
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:46:00.420
> 
> 标签：javascript, jquery, html, facebook, token

我不能在 IE 上运行这个脚本，我知道为什么，因为在调试器“F12”上我什么也看不到，在其他浏览器上它可以工作（FF、CH 和 Safari）。该脚本从 facebook 获取令牌，然后将保存到数据库（保存到数据库的函数是`end()`）。

```
function NewPage2() {

     var url2 = "https://graph.facebook.com/oauth/access_token?client_id="
            + '<%=ConfigurationManager.AppSettings["clientId"].ToString() %>' + "&redirect_uri="
            + '<%=ConfigurationManager.AppSettings["redirectUrl"].ToString() %>' + "&state="
            + document.getElementById('text').value + "&client_secret="
            + '<%=ConfigurationManager.AppSettings["client_secret"].ToString() %>'
            + "&code=" + getUrlVars2()["code"];
     $.ajax({
         url: url2,
         type: 'GET',
         success: function (res) {
             alert("success" + res);
         },
         error: function (res) {
             alert("Error" + res);
         }
     });
            }

function getUrlVars2() {
        var vars = [], hash;
        var url = location.href.replace("#_=_", "");
        var hashes = url.slice(url.indexOf('?') + 1).split('&');
        for (var i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:10:46.733

根据您使用的 IE 版本（请参见[此处](https://stackoverflow.com/questions/4403865/which-browsers-allow-cross-domain-ajax-calls-with-access-control-allow-origin)的示例），问题可能与跨域 AJAX 请求被拒绝有关。无论如何，请尝试添加`&callback=?`到请求 URL 以改用[JSONP](http://en.wikipedia.org/wiki/JSONP)。有关将JSONP 与 jQuery 结合使用的更多信息，请参阅[jQuery 文档。](http://api.jquery.com/jQuery.getJSON/)

# sql-server-2008 - SQL Server：列名中双冒号的用法

> ID：15814516
> 
> 赞同：0
> 
> 时间：2013-04-04T14:46:04.607
> 
> 标签：sql-server-2008

我正在使用需要集成到我们自己的系统中的第三方 SQL Server 2008 数据库。许多表列名称使用以下语法：

> [cl::id]

或者

> [分类::名称]

我只是好奇这是关于什么的。我已经用谷歌搜索了它，除了我认为在这种情况下不适用的模式和权限之外没有其他任何东西。

我所想的只是开发人员的命名法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:10:10.770

分隔标识符可能包含特殊字符。见[这里](http://msdn.microsoft.com/en-us/library/ms175874%28v=sql.100%29.aspx)。冒号没有特殊含义。

# javascript - jquery-mobile：无法更改对话框中的输入值

> ID：15814521
> 
> 赞同：0
> 
> 时间：2013-04-04T14:46:12.263
> 
> 标签：javascript, jquery-mobile, input

我在使用 JQueryMobile 的列表视图项打开的对话框上设置文本框的值时遇到问题。

我可以更改值，前后通过警报验证，但显示的值不会改变。

这个概念是一个显示购物清单项目的列表视图。如果用户单击其中一个项目，则应显示一个对话框，其中包含用于编辑产品信息的表单。

我首先将 href 设置为对话框页面，并绑定到 onclick 事件。问题是该事件在页面加载之前运行，因此没有可用的项目。

接下来，我在“onclick”事件上以编程方式打开了对话框。

我可以更改值，但不显示更改。

相关片段如下。

提前感谢您的帮助。

此致

若昂

```
<ul data-role="listview" data-inset="true" data-split-theme="b" data-split-icon="star" id="shopping_list_listview" style="margin-bottom:0px"> 
<li>
     <a data-rel="dialog" data-transition="pop" href="#" onClick="loadData($(this))">
        <span class="product_name truncate" SAMPLE product</span>
     </a>
</li> 
```

```
function loadData(obj)
        {

          $.mobile.changePage('product_dialog.html','pop',false,true) 

          var name = obj.find("span.product_name").text();

          alert ($("#popup-product-name").val());

          $("#popup-product-name").val(name);

          alert ($("#popup-product-name").val());

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:11:43.877

这样做，这是一个例子。

[**工作演示**](http://jsfiddle.net/Palestinian/tWPnR/)

**标记**

```
<!-- Page -->
<div data-role="page" id="p1">
 <p>Click on the text box to open dialog</p>
 <input type="text" id="two" /> <a data-role="button" href="#" id="btn">Move data to dialog</a>
</div>
<!-- /Page -->

<!-- Dialog -->
<div data-role="page" data-rel="dialog" id="dialog" data-theme="c" data-close-btn="right">
 <div data-role="header" data-position="fixed" data-theme="b">
  <h1>New values added!</h1>
 </div>

 <ul data-role="listview" id="list">
  <li><a href="#">old value</a>
  </li>
  <li><a href="#">some value</a>
  </li>
  <li><a href="#">text</a>
  </li>
 </ul>
</div>
<!-- /Dialog --> 
```

**代码**

```
$(document).on('click', 'a#btn', function () {
 var value = $("#two").val();
 $.mobile.changePage("#dialog", {
    role: "dialog"
 });
 $('#list').find('a').text(value);
}); 
```

# android - Google In App Billing 中的问题

> ID：15814524
> 
> 赞同：1
> 
> 时间：2013-04-04T14:46:17.450
> 
> 标签：android, in-app-purchase, in-app-billing

InAppBilling 模块不会调用在“launchPurchaseFlow()”方法中传递的活动对象的 onActivityResult。仅当用户在 Inapp 计费购买流程开始并返回并完成购买流程后将应用程序留在“接受和购买”屏幕上时才会发生这种情况。

InAppBilling 模块不会调用同一个活动对象的 onActivityResult，而是创建同一个 Activity 类的新对象。

# mongodb - MongoDB - 聚合 - 获取数组中的唯一项

> ID：15814526
> 
> 赞同：19
> 
> 时间：2013-04-04T14:46:18.327
> 
> 标签：mongodb, mongodb-php, mongodb-query

这是我的 MongoDB 集合：

```
{
    "_id" : ObjectId("515d8f53175b8ecb053425c2"),
    "category" : "Batteries",
    "products" : [
        {
            "brand" : "Duracell",
            "item" : [
                "AA",
                "AAA"
            ]
        },
        {
            "brand" : "Everyday",
            "item" : [
                "9V",
                "AA",
                "12V"
            ]
        }
    ]
} 
```

我需要的输出是

1）所有项目的唯一列表

```
{["AA", "AAA", "9V", "12V"]} 
```

和 2\. 每个产品的唯一项目列表

```
{
    "category" : "Batteries",
    "item": ["AA", "AAA", "9V", "12V"]
} 
```

我对 MongoDB 很陌生，我尝试了不同的聚合函数，但似乎没有任何效果。请帮忙。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-04T23:32:17.230

经过几次尝试，我已经解决了这个问题。这是命令：

```
db.xyz.aggregate( {$project: {a: '$products.item'}}, 
    {$unwind: '$a'}, 
    {$unwind: '$a'}, 
    {$group: {_id: 'a', items: {$addToSet: '$a'}}}); 
```

和

```
db.xyz.aggregate( {$project: {category: 1, a: '$products.item'}}, 
    {$unwind: '$a'}, 
    {$unwind: '$a'}, 
    {$group: {_id: '$category', items: {$addToSet: '$a'}}}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-05-12T03:40:14.567

mongodb3.4之后有了`$reduce`operator，所以我们可以扁平化一个数组，不需要额外的stage。

1.

```
col.aggregate([
  {
    $project: {
      items: {
        $reduce: {
          input: "$products.items",
          initialValue: [],
          in: { $concatArrays: ["$$value", "$$this"] },
        },
      },
    },
  },
  { $unwind: "$items" },
  { $group: { _id: null, items: { $addToSet: "$items" } } },
]); 
```

2.

```
col.aggregate([
  {
    $project: {
      category: 1,
      items: {
        $setUnion: {
          $reduce: {
            input: "$products.items",
            initialValue: [],
            in: { $concatArrays: ["$$value", "$$this"] },
          },
        },
      },
    },
  },
]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-03T12:06:32.480

我知道这是一个老问题，几年前你已经解决了！但是您标记为正确的答案存在一个小问题，它可能不适合所有情况。这`$unwind`是一个昂贵的运算符，可能会影响大型数据集的延迟和内存消耗。我认为`$reduce`运营商在这种情况下表现更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T14:57:32.167

我不确定你们在聚合函数中都尝试过什么，但我认为 unwind 会帮助你做同样的事情，假设你无法完成它，我们有一个 map-reduce 可以让你轻松做到这一点一 。您可以查看[http://docs.mongodb.org/manual/applications/map-reduce/](http://docs.mongodb.org/manual/applications/map-reduce/)。它允许您以您想要的方式获取数据，并且您可以轻松获取列表。我认为标签列上的 $unwind 然后 $group 它们将始终按照您在 1 中的要求为我们提供不同标签的列表，对于第二种情况，在两个关键类别和项目上创建 $group 之前是 $unwind 。

# java - 实体组、JPA 和每秒一次写入限制（应用引擎）

> ID：15814528
> 
> 赞同：0
> 
> 时间：2013-04-04T14:46:20.290
> 
> 标签：java, google-app-engine, jpa

我有两个实体，`parent`并且`child`，有一个`OneToMany relationship`. 父类有`@Owned`子类的注释。后面没有关系。（从孩子到父母）

```
@Entity
public class Parent {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Owned
    @OneToMany(fetch = FetchType.LAZY)
    private Set<Child> children;

    .........

}

@Entity
public class Child {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key id;

    public String value;

    .........

    public int hashCode() {
         ... based on this.value ...
    }

    public boolean equals(Object o) {
         ... based on this.value ...
   }

} 
```

**问题 1：**此设置是否类似于以 Parent 为祖先的实体组？以下两个语句确实返回一个相等的 Key：

```
- child.getId().qv.getId().getParent()
- KeyFactory.createKey("Parent", parent.getId()) 
```

* * *

**问题 2：**下面的代码是否需要大约十秒的时间来执行？它运行大约 223 毫秒：

```
for(int i = 0; i < 10; i++) {
    em.getTransaction().begin();

    parent = em.find(Parent.class, parentId);

    child = new Child("value" + i);
    parent.addChild(child)

    em.merge(parent)

    em.getTransaction().commit();
} 
```

我认为应该花费 10 秒的原因是因为 Google App Engine 文档中的这句话：

> “但是，您可以写入同一实体组的速率限制为每秒 1 次写入该实体组。”

在[https://developers.google.com/appengine/docs/java/gettingstarted/usingdatastore](https://developers.google.com/appengine/docs/java/gettingstarted/usingdatastore)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:04:06.430

您是在本地开发服务器上运行还是在生产环境上运行？本地开发服务器并不能完全模仿生产的性能特征。

该限制被放置为指导方针。您可能会获得比突发更好的性能。但是，如果您尝试长时间的高写入，则会出现异常。

数据存储写入的性能限制不会减慢您的代码执行速度。当事务性写入失败时，它们会抛出异常。确保您有一些异常处理程序来检查是否发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:02:09.060

Q1：父母确实看起来像祖先。

Q2：为什么需要 10 秒？我没有看到任何暗示必须是这种情况。所以我对此的回答是否定的。

# jquery - 在加载 DOM 之前在文档上使用事件处理程序

> ID：15814532
> 
> 赞同：0
> 
> 时间：2013-04-04T14:46:29.890
> 
> 标签：jquery

在加载 DOM 之前向 DOM添加`ajaxStop()`事件处理程序可以吗？`document`它与任何 DOM 元素都不相关，据我所知，这无关紧要。我对吗？

```
$(document).ajaxStop(function () {
    console.log('ajax complete');     
}); 
```

对比

```
$(function(){

    $(document).ajaxStop(function () {
        console.log('ajax complete');     
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:50:30.453

`$(function(){})`实际上是`$(document).ready(function(){})`.

因此，通过使用，`$(function(){})`您*已经*`document`在 DOM 准备好之前绑定了一个事件。

按照这个逻辑，在 DOM 准备好之前绑定是可以的`ajaxStop`。`document`

# c++ - _itow_s 和 _ltow_s 的用法

> ID：15814534
> 
> 赞同：1
> 
> 时间：2013-04-04T14:46:37.037
> 
> 标签：c++, visual-c++

我想在 VC8 中使用MSVC 的[_itow_s](http://msdn.microsoft.com/en-us/library/0we9x30h%28v=vs.80%29.aspx)和[_ltow_s](http://msdn.microsoft.com/en-us/library/zfh48htd.aspx)。但是我没有得到什么作为缓冲区长度传递给这两个 API。

MSDN 给我下面的解释 _itow_s

```
[in] sizeInCharacters
Size of the buffer in single-byte characters or wide characters. 
```

对于_ltow_s

```
sizeOfstr 
Size of the str in bytes for _ltoa_s or words for _ltow_s. 
```

那么，如果我将宽字符（`WCHAR`）的数量作为缓冲区的长度传递给这两个 API，如下所示

```
WCHAR buf[20];
_itow_s(11L, buf, sizeof(buf)/sizeof(WCHAR), 10);
_ltow_s(11L, buf, sizeof(buf)/sizeof(WCHAR), 10); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:52:21.213

`_itow_s`并`_ltow_s`期望这个参数是`WCHAR`s 的长度。你`buf`是类型`WCHAR`，并且你传递了`WCHAR`s 的数量，因此它看起来是正确的。

# database - 使用插入语句将 x00 插入 char 字段

> ID：15814540
> 
> 赞同：0
> 
> 时间：2013-04-04T14:46:57.680
> 
> 标签：database, db2

如何使用插入查询将 ascii 值 x00 插入表中的字符字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:54:44.530

**编辑：**实际上，您可以在 select(insert, etc) 语句中选择十六进制常量：

```
SELECT x'00' FROM SYSIBM.SYSDUMMY1 
```

请注意，如果您使用空终止符 (ASCII `\0`) 以外的字符，则结果将取决于您的数据库的编码。例如，`SELECT x'F5' FROM SYSIBM.SYSDUMMY1`在我的大型机 (EBCDIC) 上运行，我得到`5`.，而在我的 LUW 机器（我相信它是 Unicode）上，我得到`õ`.

# nosql - 从 RavenDB 的文档中从集合中查询信息的最佳方法是什么

> ID：15814541
> 
> 赞同：1
> 
> 时间：2013-04-04T14:46:58.080
> 
> 标签：nosql, ravendb

例如说我有以下课程

```
public class Parent
{
    public string Id { get; set; }
    public string Name { get; set; }

    public IList<Child> Children { get; set; }

    public class Child
    {
        public string Name { get; set; }
        public DateTime Date { get; set; }
    }
} 
```

以及以下文件

```
var document = new Parent
{
    Id = "parent/1",
    Name = "1",
    Children = new List<Parent.Child>
    {
        new Parent.Child {Date = new DateTime(2013, 1, 2)},
        new Parent.Child {Date = new DateTime(2013, 1, 3)},
        new Parent.Child {Date = new DateTime(2013, 1, 4)},
    }
}; 
```

我如何：

1.  要求 RavenDB 给我日期为 2013/1/4 的 Child 实例而不发送整个文档？
2.  分析我的查询以确保我在做正确的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:46:41.077

简单的答案是您不想这样做。文档数据库的重点是文档代表整个聚合根实体（在领域驱动设计术语中）。人们会期望在您描述的文档中，所有“孩子”都与根“父母”相关。

对于现实世界的示例，请考虑具有 LineItems 的 SalesOrder。从订单中只检索一行是否有意义？可能不是。您将检索整个 SalesOrder - 包括所有 LineItems。

这是一个需要理解的重要概念。在 RDBMS（如 SQL Server）中，您需要两个单独的表来存储订单及其行项目。要检索订单，您必须从 SalesOrders 表中读取 1 条记录，并从 LineItems 表中读取 N 条记录。这种反模式通常被称为“Select N+1”，它会导致重大的可伸缩性问题，例如，在批量检索许多订单时。

所以最好的答案是，根本不要查询。做一个简单的`session.Load<Parent>("parents/1")`，你将拥有所有的孩子数据，只需一次调用数据库。从而避免 Select N+1 问题。

...

现在是更复杂的答案 - 是的，您*可以*只取回文档的一部分。通常，您不会为单个文档执行此操作。您可能希望针对具有特定条件的多个文档进行查询。

例如，假设您要回答查询“给我所有具有特定日期的孩子”。这将是一个带有索引投影的查询。

默认情况下，Raven 旨在返回整个文档，而不是部分文档。换句话说，我们通常会回答相关查询“给我所有有特定日期的孩子的父母”。该查询如下所示：

```
var parents = session.Query<Parent>()
                     .Where(p=> p.Children.Any(c=> c.Date == theDate))
                     .ToList(); 
```

您可以获取此查询的结果并在客户端使用 linq-to-objects 过滤掉您想要的子项（在上述`ToList`调用之后）

```
var children = parents.SelectMany(p=> p.Children.Where(c=> c.Date == theDate)); 
```

这*可行*，但效率不高，因为您丢弃了从数据库返回的大量数据。

另一种方法是使用带有投影的静态索引在一次调用中执行此操作。一、索引​​定义：

```
public class ChildrenIndex : AbstractIndexCreationTask<Parent>
{
    public ChildrenIndex()
    {
        Map = parents => from parent in parents
                         from child in parent.Children
                         select new
                         {
                             child.Date,
                             child.Name
                         };

        StoreAllFields(FieldStorage.Yes);
    }
} 
```

然后查询：

```
session.Query<Parent.Child, ChildrenIndex>()
       .Where(x => x.Date == theDate)
       .AsProjection<Parent.Child>(); 
```

*请注意，`Parent.Child`语法只是因为您有`Child`一个嵌套类`Parent`.*

在索引中，我们映射了我们要投影的字段，并*存储*这些字段以便可以检索它们。我使用了`StoreAllFields`速记语法，但您也可以只用 . 单独标记每个字段`Store("FieldName", FieldStorage.Yes)`。

在查询中，我第一次指定`Parent.Child`是这样我就可以在`Where`谓词中通过它进行查询。留在这里，结果仍然是包含`Parent`. 所以我们`AsProjection`用来告诉 raven 我们真的想投影我们存储的字段，而不是返回与索引词匹配的文档。

...

现在希望你能看到这对于只从一个父母那里返回一个孩子来说是多余的，你应该为此加载整个父母。

如果您发现自己加载了很多特定的孩子，则可能是您上下文中的孩子确实是它自己的集合，应该在它自己的文档中。您仍然可以通过`ParentId`在子文档上存储 a 或`ChildrenIds`在父文档上存储列表，或两者兼而有之，来关联父子文档。

# reporting-services - 如何返回 0 而不是 #Error？

> ID：15814551
> 
> 赞同：0
> 
> 时间：2013-04-04T14:47:21.827
> 
> 标签：reporting-services

我有以下表达。

```
=Fields!AvgLOSC4.Value.Split("|"c)(0) 
```

有时，它会返回`#Error`而不是值。如果上面的表达式导致错误，如何返回`0`而不是显示`#Error`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:57:35.360

`Split`或`IIf`检查将不起作用，因为 SSRS 不会在这些上短路，如果任何部分失败，则整个表达式错误。

您可以使用自定义代码解决此问题。将以下代码添加到您的报告中：

```
Function FirstSplit(fieldValue As String) As String
  If IsDBNull(fieldValue) OrElse IsNothing(fieldValue) Then
    FirstSplit = "0"
  Else
    FirstSplit = fieldValue.Split("|")(0)
  End If
End Function 
```

调用单元格中的代码：

```
=Code.FirstSplit(Fields!AvgLOSC4.Value) 
```

使用由以下人员生成的数据集：

```
select AvgLOSC4 = '1|2'
union all select AvgLOSC4 = '1'
union all select AvgLOSC4 = null 
```

您可以生成如下报告：

![在此处输入图像描述](https://i.stack.imgur.com/9qZPI.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:55:45.160

检查字段是否`NULL`在拆分值之前

```
=Iif(IsNothing(Fields!AvgLOSC4.Value),"Display NULL",
                                      Fields!AvgLOSC4.Value.Split("|"c)(0)) 
```

# c# - 使用数据行字段填充对象列表

> ID：15814553
> 
> 赞同：1
> 
> 时间：2013-04-04T14:47:27.580
> 
> 标签：c#, asynchronous, datatable

我想知道用 DataTable 数据填充对象列表的最快和最佳实践方法是什么

目前我正在使用这种方法：

物体：

```
public class Car
{
    public int CarId { get; set; }
    public string CarName { get; set; }
    public Car(DataRow row)
    {
        if (row != null)
        {
            this.CarId = Convert.ToInt32(row["car_id"]);
            this.CarName = row["car_name"].ToString();
        }
    }
} 
```

转换：

```
public List<Car> GetCars(DataTable carTable)
    {
        return carTable.Select().SelectAsync(c => new Car(c)).ToList();
    } 
```

和异步扩展：

```
public static IEnumerable<S> SelectAsync<T, S>(this IEnumerable<T> query, Func<T, S> expression)
    {
        TaskFactory<S> tasks = new TaskFactory<S>();
        foreach (var item in query)
        {
            yield return tasks.StartNew(() => expression(item)).Result;
        }
    } 
```

我知道我可以使用“AsParallel”，但从我所做的测试来看，这种方法稍微快一些

但是，有人可以帮我找到更快的方法吗？有没有设计模式？

谢谢

# asp.net-mvc - 将现有的实体框架类库与 MVC WebAPI 一起使用

> ID：15814556
> 
> 赞同：0
> 
> 时间：2013-04-04T14:47:31.067
> 
> 标签：asp.net-mvc, entity-framework, asp.net-web-api

我有一个包含我所有实体框架代码的类库。

在一个标准的 ASP.NET 项目中，我可以引用这个 DLL 并开始使用这些类并与我的数据库进行交互。

但是，我现在开始使用新的[ASP.NET MVC Web API 构建一个新的 Web API](http://www.asp.net/web-api)。我希望能够在这个新 API 中使用这个现有的库，但我不确定如何连接它。这是可能的吗？或者我应该为这个项目重新生成实体集？

我在 MVC 方面的经验有限，并且只用它构建了一个小型产品组合，并且该站点具有所有新模型和实体等。

我尝试添加一个控制器并从我的实体库和数据上下文类中选择模型类，但收到“不支持的上下文类型”消息。

如果有帮助，我可以将实体库的代码作为一个单独的项目添加到我的解决方案中，而不仅仅是 DLL，尽管我想对此进行最小的更改，因为其他项目使用相同的框架。

**更新**

我知道我可以使用 DbContext 生成器为 EF 实体生成所有 dbContext 类，但我想知道是否还有其他方法，因此我不必将 EF 文件也直接添加到该项目中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:33:18.477

这是我们为每个系统确定的配方，这些系统对我们有利。

项目：

用于部署目的的 SQL Server 项目。EDM 项目用于保存 EF 模型和数据上下文，无需生成代码。带有 T4 模板的实体/POCO 项目，用于从 EDM 自动生成类。

WCF 服务解决方案包含上述所有三个项目以及 WCF 服务项目本身，可以访问数据上下文并以受控方式向任何 UI 层公开对象。

UI 还包含实体/POCO 项目和对 UI 项目本身中的服务的引用，服务引用在该实体项目程序集中重用类型。

好处：

1.  几乎没有重复。
2.  快速的可维护性和可持续性。
3.  关注点分离。
4.  通过 Net Tcp 服务实现可扩展性。

总而言之，我不会使用 DLL 引用，我会使用 Entity/Poco 项目作为您的中介，包含在您的应用程序交付的两端。

我希望这会有所帮助。

# regex - 我只使用了一个空格、连字符或撇号，但它不能正常工作

> ID：15814564
> 
> 赞同：0
> 
> 时间：2013-04-04T14:47:52.067
> 
> 标签：regex

名称必须介于 2 到 25 个字符之间，并且只能包含一个空格、连字符或撇号，因为我使用了给定的代码，但它不能正常工作。^[a-zA-Z]{2}[a-zA-Z-\s']*$

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:52:39.853

您可以使用前瞻来检测表达式中恰好有零个或一个这样的字符：

```
/^(?=^[^\s'-]*[\s'-]?[^\s'-]*$)[a-zA-Z\s'-]{2,}$/ 
```

# asp.net-mvc - 未调用 SignalR 客户端函数

> ID：15814566
> 
> 赞同：4
> 
> 时间：2013-04-04T14:47:56.643
> 
> 标签：asp.net-mvc, signalr

## 概述

我在让我的 SignalR 服务器/集线器在我的 SignalR 客户端上调用 javascript 函数时遇到了真正的问题。

## 我试过的

*   我已经阅读了更多的教程并查看了很多关于它应该如何工作的示例（包括官方文档），这几乎是荒谬的。
*   我已经尝试注释掉除核心功能之外的所有功能。
*   我已确保服务器和客户端功能不同且拼写正确。
*   我也打开了登录，但 Firebug 控制台中没有出现任何错误。

## 环境

有问题的 SignalR 代码已在 ASP.net MVC4 项目中使用 VB.net 与 MySQL 和实体框架 v5 实现。我正在使用 IISExpress 在 Visual Studio 2012 中的本地开发机器上调试系统。

## 代码片段

**全球.asax.vb：**

```
Sub Application_Start()

    MiniProfilerEF.Initialize()

    AreaRegistration.RegisterAllAreas()

    ' Register the default hubs route: ~/signalr
    RouteTable.Routes.MapHubs()

    WebApiConfig.Register(GlobalConfiguration.Configuration)
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters)
    RouteConfig.RegisterRoutes(RouteTable.Routes)
    BundleConfig.RegisterBundles(BundleTable.Bundles)
    AuthConfig.RegisterAuth()

    ' Register custom view
    ViewEngines.Engines.Add(New CustomViewEngine())

End Sub 
```

**SignalR初始化javascript：**

```
$(function () {

    // Proxy created on the fly
    var notification = $.connection.notificationHub;
    //$.connection.notificationHub.logging = true;

    // Declare functions that can be run on the client by the server
    notification.client.sendNotification = onAddNotification;

    // Testing code only
    $("#testButton").click(function () {
        // Run test function on server
        notification.server.runTest();
    });

    // Map the onConnect and onDisconnect functions
    notification.client.connected = function () { };
    notification.client.disconnected = function () { };

    //$.connection.hub.start();
    $.connection.hub.start(function () {
        alert("Notification system connected");
    });
});

// Process a newly received notification from the server
function onAddNotification(message) {

    // Convert the passed json message back into an object
    var obj = JSON.parse(message);

    var parsedDate = new Date(parseInt(obj.Timestamp.substr(6)));

    // Update the notification list
    $('#notifications').prepend('<li>' + obj.Message + ' at ' + dateFormat(parsedDate, "default") + '</li>');

    // Update the new notification count
    var count = document.getElementById("notification_count")
    if (count.textContent) {
        //W3C DOM
        count.textContent = obj.Count;
    } else if (anchor.innerText) {
        //Microsoft DOM
        count.innerText = obj.Count;
    }
    //document.getElementById("notification_count").innerHTML = obj.Count + '<i class="splashy-comment"></i>';

    // Show a brief notification message
    $.sticky(obj.Message, { autoclose: 2000, position: "top-right", type: "st-info" });

}; 
```

**集线器类：**

```
Public Class NotificationHub
Inherits Hub

ReadOnly Group As String = "Notification"

Public Function RunTest()
    Dim testMessage As New SignalR_Notification_Message

    testMessage.Count = 3
    testMessage.Message = "Some test message"
    testMessage.Timestamp = Now

    Call Notify(testMessage, "joebloggs")
End Function

Public Overrides Function OnConnected() As Task

    Dim db As New MyEntities
    Dim userName As String = Context.User.Identity.Name
    Dim connectionID = Context.ConnectionId

    Dim conn As SignalR_Connection

    ' Attempt to find a retrieve a connection entry with the same Connection ID
    conn = db.SignalR_Connection.Where(Function(s) s.Connection_ID = connectionID).FirstOrDefault

    ' If the connection does not already exist, add it
    If IsNothing(conn) Then
        conn = New SignalR_Connection

        ' Create the new connection entry
        conn.Connection_ID = connectionID
        conn.Username = userName
        conn.Group = Group

        ' Attempt to save the new connection entry
        Try
            db.SignalR_Connection.Add(conn)
            db.SaveChanges()
        Catch ex As Exception
            Dim a As String = ""
            a = ""
        End Try
    End If

    Return MyBase.OnConnected()
End Function

Public Overrides Function OnDisconnected() As Task

    Dim db As New MyEntities
    Dim userName As String = Context.User.Identity.Name
    Dim connectionId As String = Context.ConnectionId

    Dim conn As SignalR_Connection

    ' Attempt to find a retrieve the connection entry
    conn = db.SignalR_Connection.Where(Function(s) s.Connection_ID = connectionId And s.Username = userName).FirstOrDefault

    ' Attempt to remove the connection entry
    Try
        db.SignalR_Connection.Remove(conn)
        db.SaveChanges()
    Catch ex As Exception
        Dim a As String = ""
        a = ""
    End Try

    Return MyBase.OnDisconnected()
End Function

''' <summary>
''' Send the notification to the client
''' </summary>
Public Sub Notify(Message As SignalR_Notification_Message, Username As String)

    Dim ConnectionIDs As List(Of String)
    Dim Serializer As New JavaScriptSerializer()
    Dim json As String

    ' Attempt to convert the object into json before sending
    Try
        json = Serializer.Serialize(Message)
    Catch ex As Exception
        Exit Sub
    End Try

    ' Get the connection id's this message must go to
    ConnectionIDs = GetUsersConnectionID(Username)

    If Not IsNothing(ConnectionIDs) Then
        ' Send the message to all connection ID's
        For Each ConnectionID In ConnectionIDs
            Clients.Client(ConnectionID).sendNotification(json)
        Next
    End If

End Sub

''' <summary>
''' Retrieve a list of connection ID's for the current user
''' </summary>
Public Function GetUsersConnectionID(Username As String) As List(Of String)

    Dim db As New MyEntities

    ' Attempt to find a retrieve the connection entries
    Return db.SignalR_Connection.AsNoTracking.Where(Function(s) s.Username = Username).Select(Function(s) s.Connection_ID).ToList

End Function

End Class 
```

**HTML（部分视图）：**

```
@ModelType Geo_sight.NotificationWindowModel

<div class="modal hide fade" id="myNotifications">
<div class="modal-header">
    <button class="close" data-dismiss="modal">×</button>
    <h3>Notifications</h3>
</div>
<div class="modal-body">
    <ul class="unstyled" id="notifications">
        @For Each Notification In Model.Notifications
            @<li>@Html.Raw(Notification.Text)</li>
        Next
    </ul>
</div>
<div class="modal-footer">
    <a href="javascript:void(0)" class="btn" id="testButton">Send test</a>
</div> 
```

## 问题

在*onAddNotification*函数的第一行设置断点：

> var obj = JSON.parse(消息);

每当调用 Hub 中的*Notify*函数时，实际上从不调用客户端函数！

## 其他有用的位

1.  连接肯定是成功的，因为我可以在 Firebug 中看到连接长轮询。
2.  *在onConnected*和*GetUsersConnectionID*函数中，我的用户连接已成功保存并从我的数据库中检索。
3.  在我尝试从服务器运行客户端功能的几十次中（使用*testButton*触发集线器上的通知调用），它运行的次数不超过 3-4 次，我都没有能够重复。
4.  在函数运行的非常罕见和随机的情况下，它已经完成了它应该做的事情，并且我已经能够在客户端中使用断点停止函数的执行。
5.  我检查了我的*~/signalr/hubs*脚本，客户端函数定义下没有列出任何内容，但用于服务器（见下文）。这个对吗？我想客户端功能应该在这里？

    ```
    proxies.notificationHub = this.createHubProxy('notificationHub'); 
    proxies.notificationHub.client = { };
    proxies.notificationHub.server = {
        getUsersConnectionID: function (Username) {
            return proxies.notificationHub.invoke.apply(proxies.notificationHub, $.merge(["GetUsersConnectionID"], $.makeArray(arguments)));
         },

        notify: function (Message, Username) {
            return proxies.notificationHub.invoke.apply(proxies.notificationHub, $.merge(["Notify"], $.makeArray(arguments)));
         },

        runTest: function () {
            return proxies.notificationHub.invoke.apply(proxies.notificationHub, $.merge(["RunTest"], $.makeArray(arguments)));
         }
    };

    return proxies; 
    ```

* * *

## 2013-04-04 更新

通过更多的调试，我可以让客户端运行，但完全随机且非常偶然，只需在前一个 signalR 发送调用完成后几秒钟一次又一次地按下我的测试按钮。

这是来自 Firebug 控制台的一个示例... ![萤火虫控制台](https://github.com/SignalR/SignalR/wiki/Faq#why-does-signalr-stop-accepting-connections-after-10-or-so)

* * *

## 2013-04-05 更新

随着越来越多的测试和调试，我遇到了客户端函数何时调用和不调用的特征......

从我之前的更新中可以看出，SignalR 选择使用超时时间约为 35 秒的长轮询。

在对客户端函数进行了多次重复调用之后，似乎只有在长轮询生命的前 10 秒内进行的调用才能到达客户端并成功运行该函数。在这段时间之后发出的电话似乎没有打通。

我想这意味着我的代码是正确的，但为什么会这样？

**SignalR 常见问题解答...**

我还在这里找到了与我的问题类似的东西：[SignalR Wiki FAQ's](https://github.com/SignalR/SignalR/wiki/Faq#why-does-signalr-stop-accepting-connections-after-10-or-so)

我使用的是 Windows 7 Professional，但我没有使用 IIS（我使用的是 IIS Express），所以这可能是同一个问题吗？

# certificate - 使用 KeyTool 命令将 PKCS7（链式证书）导入 JKS

> ID：15814569
> 
> 赞同：9
> 
> 时间：2013-04-04T14:48:07.177
> 
> 标签：certificate, keytool, pkcs#7, jks

我有一个 CA 颁发的 PKCS#7 格式的 CERT。它里面有证书（链式）。Keytool 无法识别 PKCS7 格式。我曾尝试使用 OpenSSL 工具将 PKCS7 格式证书转换为 PEM 格式，但它失败了。我收到一条错误消息“无法加载 PKCS7 对象”。

如何将 PKCS7 证书链导入我的 JKS？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T09:06:42.530

正如您可以在***-importcert***命令的[keytool 参考](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/keytool.html#importCertCmd)中阅读的那样：

 **> 从文件 cert_file 中读取证书或证书链（后者在 PKCS#7 格式的回复中提供），并将其存储在由别名标识的密钥库条目中。如果没有给出文件，则从标准输入读取证书或 PKCS#7 回复。
> 
> keytool 可以导入 X.509 v1、v2 和 v3 证书，以及由该类型证书组成的 PKCS#7 格式的证书链。

尝试按原样导入 PKCS7 证书。

虽然，它并不总是有效。如果您遇到问题，请尝试执行以下操作（使用 OpenSSL）：

1.  将它包含的所有证书打印到 PEM 文件中

    `OpenSSL> pkcs7 -in initial_file.p7b -inform DER -print_certs -outform PEM -out certs_chain.pem`

2.  使用编辑器打开新的 PEM 文件（**certs_chain.pem**）并删除所有外部`-----BEGIN CERTIFICATE-----`和`-----END CERTIFICATE-----`边界（仅保留边界内的编码内容，证书本身）并保存。

现在 keytool 导入证书应该没有问题，使用**certs_chain.pem**作为`cert_file`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:28:41.370

另一种方法是使用 IE 创建 X.509 证书。您可以在我的文章中找到有关在 WLS 和 IIS 之间执行 SSL 的步骤，网址为[http://techblog.fywservices.com/2012/10/establishing-weblogic-server-https-trust-of-iis-using-a-microsoft-本地证书颁发机构/](http://techblog.fywservices.com/2012/10/establishing-weblogic-server-https-trust-of-iis-using-a-microsoft-local-certificate-authority/)**

# data-structures - 节点之间的连接强度

> ID：15814570
> 
> 赞同：1
> 
> 时间：2013-04-04T14:48:09.653
> 
> 标签：data-structures, graph, tree, social-networking

我们如何准确测量社交网络图上 2 个节点之间的连接强度。本质上在一个节点和它的一级连接之间，我们可以测量连接的强度吗？

社交网络分析上下文中的“连接强度”究竟是什么意思。

我假设一级连接意味着如果 a--b--c 那么 b 是 a 的一级连接，而 c 是 a 的二级连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-06T12:42:43.590

连接节点强度是所有相邻链路权重的总和，即节点度加上一个衡量通信强度的权重。您可以在社交网络上的两个节点之间分配一些任意的通信度量，使其成为加权网络。

![从节点度计算节点强度](https://i.stack.imgur.com/tgfgS.png)

例如，哈拉雷和约翰内斯堡之间的入境和出境航班的总和构成了两个城市之间已建立航线的权重（在将这两个城市中的任何一个城市连接到世界其他地区的所有航线中的一小部分）。

# spring - 提交响应后 Spring Webflow 无法调用 sendRedirect()

> ID：15814576
> 
> 赞同：1
> 
> 时间：2013-04-04T14:48:49.743
> 
> 标签：spring, exception, spring-webflow-2

我有一个基于 Spring Webflow 和 Primefaces 的 web 应用程序，有时当我执行屏幕时，我会收到 IllegalStateException ......但这真的很奇怪，因为我们在渲染屏幕之前没有进行调用以产生这个错误提示......什么否则我们需要看看修复这个错误？

```
 SEVERE: Servlet.service() for servlet [Spring MVC Dispatcher Servlet] in context with path [/Project] threw exception [Request processing failed; nested exception is java.lang.IllegalStateException: Cannot call sendRedirect() after the response has been committed] with root cause
java.lang.IllegalStateException: Cannot call sendRedirect() after the response has been committed
    at org.apache.catalina.connector.ResponseFacade.sendRedirect(ResponseFacade.java:483)
    at javax.servlet.http.HttpServletResponseWrapper.sendRedirect(HttpServletResponseWrapper.java:138)
    at org.springframework.security.web.firewall.FirewalledResponse.sendRedirect(FirewalledResponse.java:25)
    at javax.servlet.http.HttpServletResponseWrapper.sendRedirect(HttpServletResponseWrapper.java:138)
    at org.springframework.security.web.context.SaveContextOnUpdateOrErrorResponseWrapper.sendRedirect(SaveContextOnUpdateOrErrorResponseWrapper.java:91)
    at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.sendRedirect(FlowHandlerAdapter.java:324)
    at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.sendFlowExecutionRedirect(FlowHandlerAdapter.java:372)
    at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handleFlowExecutionResult(FlowHandlerAdapter.java:339)
    at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:194)
    at org.springframework.faces.webflow.JsfFlowHandlerAdapter.handle(JsfFlowHandlerAdapter.java:48)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:88)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 
```

提前致谢！

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-03T21:05:45.337

我也一直遇到同样的问题。通常（*无论如何对我来说*）这是由于添加到流中的东西不是`Serializable`。`DEBUG`您应该通过将日志级别设置为for来获得更多信息`org.springframework.web.servlet`。

# c# - Linq to Sql 选择具有嵌套计数的项目

> ID：15814579
> 
> 赞同：2
> 
> 时间：2013-04-04T14:48:53.430
> 
> 标签：c#, .net, linq, linq-to-sql

我有以下表结构：

![在此处输入图像描述](https://i.stack.imgur.com/xFJfD.png)

使用 Linq To SQL 我想得到一个这样的列表：

```
new {
    E = e,      // the E object
    Ds = e.Ds,  // list of D objects referenced by E
    NumAs = ??? // COUNT OF A objects that are eventually associated with this E
} 
```

但是，我希望这些东西按与每个 E 关联的 A 的数量排序。

我一直在尝试使用 joins/orderby 和嵌套查询的组合，但我不确定如何获得它。

如果我从表 E 到 A 的引用，那么它似乎微不足道；即：

![在此处输入图像描述](https://i.stack.imgur.com/KjH5J.png)

```
from e in ctx.E
orderby e.As.Count()
select new {
   E     = e,
   Ds    = e.Ds,
   numAs = e.As.Count()
} 
```

但是，该引用是否违反了某种数据库规范化规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:51:21.460

你可以这样做

```
from e in ctx.E
let ds = e.Ds
let cs = ds.SelectMany(d => d.Cs)
let as = cs.SelectMany(c => c.As)
orderby as.Count()
select new {
   E     = e,
   Ds    = e.Ds,
   numAs = as.Count()
} 
```

或者这个，为简洁起见

```
from e in ctx.E
let as = e.Ds.SelectMany(d => d.Cs).SelectMany(c => c.As)
orderby as.Count()
select new {
   E     = e,
   Ds    = e.Ds,
   numAs = as.Count()
} 
```

另一种方法可能是从`A`s 开始并将它们分组如下：

```
from a in ctx.A
group a by a.C.D.E into g
orderby g.Count()
select new {
    E = g.Key,
    Ds = g.Key.Ds,
    numAs = g.Count()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:57:08.877

好吧，请始终遵循您的实体关系：

```
ctx.E.Select(e => new {
                 E = e
               , Ds = e.Ds
               , numAs = e.Ds.SelectMany(d => d.Cs).SelectMany(c => c.As).Count()
                 }
             )
     .OrderBy(e => e.numAs); 
```

`e.Ds.SelectMany(d=>d.Cs)`通过 Ds 给你所有与你的 e 相关的 Cs。
再一次，`SelectMany(c => c.As)`通过 Cs 和 Ds 给你所有与你的 e 相关的 As。

# spring - 带有 Spring 3.1.0 的 Hibernate 4.1 无法在 Web 应用程序中注册事件侦听器

> ID：15814584
> 
> 赞同：0
> 
> 时间：2013-04-04T14:49:05.370
> 
> 标签：spring, hibernate

在下面的线程中，讨论了如何使用 spring 在 hibernate 中注册事件侦听器： [eventlisteners using hibernate 4.0 with spring 3.1.0.release?](https://stackoverflow.com/questions/8616146/eventlisteners-using-hibernate-4-0-with-spring-3-1-0-release)

正如在注册事件侦听器的线程中提到的那样，我在文件中有我的 Integrator。

```
META-INF/services/org.hibernate.integrator.spi.Integrator 
```

当我在主程序（使用 Eclipse）中运行代码时，这可以正常工作。但是，当我在 tomcat 中将应用程序部署为战争时，集成器永远不会被调用。在 tomcat 中，此文件位于以下位置：

```
webapps/ROOT/META-INF/services/org.hibernate.integrator.spi.Integrator 
```

有人可以看看吗？

我尝试使用测试应用程序上下文运行 JUnit 测试用例来复制场景，但这里调用了 Integrator。

在进一步调试时，注意到 Hibernate 中的以下代码正在添加集成器：

```
public IntegratorServiceImpl(LinkedHashSet<Integrator> providedIntegrators, ClassLoaderService classLoaderService) {
    // register standard integrators.  Envers and JPA, for example, need to be handled by discovery because in
    // separate project/jars.
    addIntegrator( new BeanValidationIntegrator() );

    // register provided integrators
    for ( Integrator integrator : providedIntegrators ) {
        addIntegrator( integrator );
    }

    for ( Integrator integrator : classLoaderService.loadJavaServices( Integrator.class ) ) {
        addIntegrator( integrator );
    }
} 
```

在这里面，当我的应用程序部署在 tomcat 中时，classLoaderService.loadJavaServices( Integrator.class ) 无法找到我的自定义集成器，而它在测试用例中或在独立运行时找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:21:31.177

现在，我使用了线程中提到的另一个想法，它是一种基于代码的方法：

```
@PostConstruct
public void registerListeners() 
{
    EventListenerRegistry registry = ((SessionFactoryImpl) sessionFactory).getServiceRegistry().getService(
        EventListenerRegistry.class);
        registry.getEventListenerGroup(EventType.POST_COMMIT_INSERT).appendListener(listener);
registry.getEventListenerGroup(EventType.POST_COMMIT_UPDATE).appendListener(listener);
} 
```

但是，基于配置的方法会更有帮助。

# php - 从常规 ajax 到 jquery ajax

> ID：15814585
> 
> 赞同：0
> 
> 时间：2013-04-04T14:49:05.980
> 
> 标签：php, jquery, ajax

我想改变：

```
function showUser(str)
{
    if (str=="")
    {
        document.getElementById("txtHint").innerHTML="";
        return;
    } 
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","get_content.php?q="+str,true);
    xmlhttp.send();
} 
```

进入 jQuery ajax。现在我有以下实现：

```
 $('#menurow').change(function () {
    $.ajax({
        type: "GET",
        url: "get_content.php?q="+str,true,
        data: $('#txtHint').innerHTML(),
        success: function(data) {
            alert('test');
        }
    })
}); 
```

当我尝试这段代码时，浏览器一直说 Uncaught SyntaxError: Unexpected identifier on data: `$('#txtHint').innerHTML()`。有人知道如何解决这个问题吗？这是 html/php 代码：

```
 <form>
<select name="menurow" id="#menurow">
<option value ="select">Selecteer een menu</option>
 <?php 
    $sql= mysql_query("SELECT * FROM Menu") or die(mysql_error());

    while ($row = mysql_fetch_array($sql))
    {
        ?><option data="menu" value="<?php echo $row['menu_id']; ?>"><?php echo $row['menu_name']; ?></option>
        <?php
        $subsql= mysql_query("SELECT * FROM SubMenu INNER JOIN Menu WHERE SubMenu.menu_id = Menu.menu_id AND Menu.Menu_id = ".$row['menu_id']."") or die(mysql_error());
        while ($subrow = mysql_fetch_array($subsql))
        {
        ?><option data="submenu" value="<?php echo $subrow['submenu_id']; ?>"><?php echo "--".$subrow['submenu_name']; ?></option>
        <?php
        }
    }
 ?>
</select>
</form>
<div id="txtHint"></div> 
```

提前致谢

谢谢你们的帮助。现在我有它如下：

```
$('.menurow').change(function(str) {
    $.ajax({
        type: "GET",
        url: "get_content.php?q="+str,
        success: function(data) {
            $('#txtHint').html(data);
                        tinyMCE.init({
            theme : "advanced",
            mode : "textareas"
        });
        }
    })
}); 
```

如何在其中获取表单的数据？我已经在函数中声明了 str 。因此，它显示空字段。我怎样才能用数据填充它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:55:06.897

```
url: "get_content.php?q="+str 
```

`,true,`不需要该部分。

此外，您还需要数据的变量名称。顺便说一句，您可以使用相同的格式传递 q 变量，而无需将其附加到 URL（它也可以使用您的方法）

您可以使用简短版本：

```
$.get("get_content.php", {q: str, txtHint: $('#txtHint').innerHTML()}, 
    function(data) {
         alert('test');
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:50:58.193

数据需要是对象类型：

`data: { hint: $('#txtHint').innerHTML() }`

但鉴于这不是您的实际意图， data 属性是您要发送到服务器的数据。看起来你想把输出放在`#txtHint`. 所以你需要这样做：

```
$('#menurow').change(function () {
    $.ajax({
        type: "GET",
        url: "get_content.php?q="+str,
        success: function(data) {
            $('#txtHint').html(data);
        }
    })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:52:20.250

您的数据应该是具有每个查询参数的键值对的对象：

```
data: { var1: 'theValue1', var2: 'theValue2' } 
```

# amazon-web-services - 我在 Amazon EC2 上的服务器 IP 在哪里？

> ID：15814586
> 
> 赞同：0
> 
> 时间：2013-04-04T14:49:08.230
> 
> 标签：amazon-web-services, amazon-ec2

我刚刚开始使用 Amazon Web Services 并设置了我的第一个实例。我刚刚安装了 apache，但现在我想测试安装是否成功。我似乎无法找到我的服务器 IP 地址在哪里。你知道我需要去哪里找这个吗？

![在此处输入图像描述](https://i.stack.imgur.com/Edqi6.png)

更新：

我仍然没有看到它。也许我是个盲人。我看到的只是私有 IP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:35:11.117

您可以通过显示的公共 DNS 值访问您的实例。公共 DNS 值实际上会暗示实例的公共 IP 地址，因为这些是名称中显示的数字。

如果您想要一个静态 IP 地址（即您可以在实例重启后重新使用相同的 IP），那么您需要分配一个弹性 IP 并将其附加到实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:51:35.300

[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-instance-addressing.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-instance-addressing.html) 在“确定您的公共和私有 IP 地址”下

# c# - 构建操作后asp.net mvc更新网站？

> ID：15814588
> 
> 赞同：1
> 
> 时间：2013-04-04T14:49:20.687
> 
> 标签：c#, asp.net, asp.net-mvc, publishing

在 asp.net mvc 项目中，在项目构建之前，您看不到更改。我在托管公司有一个网站，我更改了一些 C# 代码，并在本地构建项目。如果我只发布更改的课程，我看不到更改。（当然，css和html代码也在变化，更新后发布到host）

那么，我应该每次都在项目构建后发布我的项目吗？有没有简单的方法来更新更改的类（只需将更改的类发布到主机）？网站更新步骤是什么？

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:05:40.890

如果您习惯于将代码保存在**App_Code**文件夹中的旧“网站”项目，您只需更新代码 (.cs/.vb) 文件，网站就会重新编译。

但是，大多数 Web 项目（包括 ASP.NET MVC 项目）都是“Web**应用程序**”项目，其中所有编译的代码都在**bin**文件夹中。服务器上的任何代码文件实际上都是多余的，因为已编译的代码已经在程序集中（.DLL 文件）。

因此，您必须更新服务器上**bin**文件夹中的 .DLL 文件。例如，通过执行“发布”以确保仅将更改的文件上传到您的托管环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:46:33.147

In a ASP MVC website, if you change server side code (c#,VB) you need to post the affected Dlls to the production server, is the only way. Tou cannot upload a c# file alone.

Only if you change client code you can post to the server the files (cshtml, js, css) without upload dlls and without recompile the App.

You can publish the Project to a local folder and upload only the necesary files.

# php - 如何计算没有数据库的网站联系表单提交

> ID：15814591
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:49:30.400
> 
> 标签：php, counter

您好我是新来的，对 SMTP 邮件 PHP 函数有疑问。我创建了一个向公司发送 HTML 电子邮件的联系表单。

现在我被要求为从网页发送的每封电子邮件创建一个计数器，这样他们就可以知道有多少人在请求有关产品的信息。我读到没有数据库是不可能的，我们没有在这个项目中使用它，但我正在考虑用 XML 计数器来做。

这是更好的方法，还是有其他可能性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:53:51.057

不，您不需要 xml。一个简单的文件就可以了：

计数.txt：

```
0 
```

counter_update.php：

```
<?php

$count = trim(file_get_contents('counts.txt'));
$count++;
file_put_contents('counts.txt', $count); 
```

如果您的系统比较繁忙，您可能需要添加一些文件锁定，这样两个并行邮件脚本就不会破坏彼此的计数增量，但这是您需要的基础。

# regex - 如何在此正则表达式中包含负十进制数？

> ID：15814592
> 
> 赞同：110
> 
> 时间：2013-04-04T14:49:32.480
> 
> 标签：regex, numbers

我如何通过这个正则表达式匹配负数？此正则表达式适用于正值，但我希望它也允许负值，例如 -10、-125.5 等。

```
^[0-9]\d*(\.\d+)?$ 
```

谢谢

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2013-04-04T14:52:14.177

您应该在开头添加一个可选的连字符`-?`（`?`是一个[**量词**](http://www.rexegg.com/regex-quantifiers.html#cheat_sheet)，表示*出现一次或零次*）：

```
^-?[0-9]\d*(\.\d+)?$ 
```

我用这些值在 Rubular 中验证了它：

```
10.00
-10.00 
```

并且都按预期匹配。

```
let r = new RegExp(/^-?[0-9]\d*(\.\d+)?$/);

//true
console.log(r.test('10'));
console.log(r.test('10.0'));
console.log(r.test('-10'));
console.log(r.test('-10.0'));
//false
console.log(r.test('--10'));
console.log(r.test('10-'));
console.log(r.test('1-0'));
console.log(r.test('10.-'));
console.log(r.test('10..0'));
console.log(r.test('10.0.1'));
```

* * *

## 回答 #2

> 赞同：150
> 
> 时间：2013-04-04T14:53:00.310

一些正则表达式示例：

**正整数**：

```
^\d+$ 
```

**负整数**：

```
^-\d+$ 
```

**整数**：

```
^-?\d+$ 
```

**正数**：

```
^\d*\.?\d+$ 
```

**负数**：

```
^-\d*\.?\d+$ 
```

**正数或负数**：

```
^-?\d*\.{0,1}\d+$ 
```

**电话号码**：

```
^\+?[\d\s]{3,}$ 
```

**带代码的电话**：

```
^\+?[\d\s]+\(?[\d\s]{10,}$ 
```

**1900-2099 年**：

```
^(19|20)[\d]{2,2}$ 
```

**日期**（dd mm yyyy、d/m/yyyy 等）：

```
^([1-9]|0[1-9]|[12][0-9]|3[01])\D([1-9]|0[1-9]|1[012])\D(19[0-9][0-9]|20[0-9][0-9])$ 
```

**IP v4**：

```
^(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]){3}$ 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-04T14:53:22.780

我不知道你为什么首先需要它`[0-9]`。

尝试：

```
^-?\d*(\.\d+)?$ 
```

**更新**

如果您想确保在这些地方有一个数字，请使用

```
^-?\d+(\.\d+)?$ 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-13T05:07:06.283

**更新（13/08/2014）：**这是正数和负数的最佳代码 =）

```
(^-?0\.[0-9]*[1-9]+[0-9]*$)|(^-?[1-9]+[0-9]*((\.[0-9]*[1-9]+[0-9]*$)|(\.[0-9]+)))|(^-?[1-9]+[0-9]*$)|(^0$){1} 
```

我尝试了这个数字并且工作正常：

```
-1234454.3435
-98.99
-12.9
-12.34
-10.001
-3
-0.001
-000
-0.00
0
0.00
00000001.1
0.01
1201.0000001
1234454.3435
7638.98701 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-15T21:08:33.240

这将只允许一个`-`or`+`字符后跟一个数字：

```
 ^([+-](?=\.?\d))?(\d+)?(\.\d+)?$ 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-31T04:14:29.560

我在 django url 中有一些关于正则表达式的实验，需要从负数到正数

```
^(?P<pid>(\-\d+|\d+))$ 
```

让我们专注于这`(\-\d+|\d+)`部分而忽略其他部分，这个分号`|`表示正则表达式中的**OR**，那么负值将与这`\-\d+`部分匹配，正值将与此部分匹配`\d+`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-08T12:34:39.303

这将允许正整数和负整数

> ValidationExpression="^-?[0-9]\d*(\d+)?$"

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-12-23T10:30:08.730

```
^[+-]?\d{1,18}(\.\d{1,2})?$ 
```

接受正或负十进制值。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-03-12T20:37:29.260

这对我有用，[允许负数和正数](https://social.msdn.microsoft.com/Forums/en-US/eed0a8cf-317a-44a2-bf84-5f30c86a8a91/regular-expression-to-allow-negative-and-positive-numbers?forum=winappswithcsharp)：

```
 \-*\d+ 
```

如果使用 C#：

```
Regex.Match(someString, @"\-*\d+").Value; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-12-30T06:48:39.320

如果你有这个`val="-12XXX.0abc23"`并且你只想提取十进制数，在这种情况下，这个正则表达式 ( `^-?[0-9]\d*(\.\d+)?$`) 不会帮助你实现它。
这是具有正确检测正则表达式的正确代码：

```
var val="-12XXX.0abc23";
val = val.replace(/^\.|[^-?\d\.]|\.(?=.*\.)|^0+(?=\d)/g, '');
console.log(val);
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-09-06T12:12:44.167

添加`"-" minus`后跟`? quantifier`在前面`[0-9] expression`应该可以完成工作。

**`-?[0-9]`**

**以供参考**

*   `^b`-`^ quantifier`匹配任何以“b”开头的字符串
*   `c?`-`? quantifier`匹配 0 或 1 次出现的“c”
*   `[0-9]`- 找到之间的任何字符`[] brackets`
*   `\d`- 从中找到一个数字`0-9`
*   `d*`-`* quantifier`匹配零次或多次出现的“d”
*   `\.`- 匹配一个`"." character`
*   `z+`-`+ quantifier`匹配一次或多次出现的“z”
*   `e$`-`$ quantifier`匹配任何以“e”结尾的字符串

*希望，这将有助于理解问题中发布的正则表达式*。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-04-04T14:54:33.877

只需添加一个 0 或 1 标记：

```
^-?[0-9]\d*(.\d+)?$ 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-08-23T17:24:20.437

仅对于负数，这是完美的。

```
^-\d*\.?\d+$ 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-02-09T06:29:49.553

数字的正则表达式，可选小数点，可选负数：

```
^-?(\d*\.)?\d+$; 
```

适用于负整数、小数、带小数的负数

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-01-26T10:09:20.967

```
^(-?\d+\.)?-?\d+$ 
```

允许：

```
23425.23425
10.10
100
0
0.00
-100
-10.10
10.-10
-10.-10
-23425.23425
-23425.-23425
0.234 
```

# python - 列表理解中奇怪的 lambda 行为

> ID：15814595
> 
> 赞同：3
> 
> 时间：2013-04-04T14:49:49.170
> 
> 标签：python, python-3.x, lambda, list-comprehension

我在列表理解中使用 lambda 函数，发现了一些奇怪的行为

```
x = [(lambda x: i) for i in range(3)]

print(x[0](0)) #print 2 instead of 0
print(x[1](0)) #print 2 instead of 1
print(x[2](0)) #print 2 
```

有人可以解释为什么结果不是我所期望的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T14:51:54.673

`lambda`s 绑定变量本身，而不是它们拥有的值。`i`更改为`2`在列表理解的末尾，所以所有的`lambda`s 都`i`在那个时候引用，因此引用 2。

为避免这种情况，您可以使用*默认参数技巧*：

```
[lambda x,i=i:i for i in range(3)] 
```

这将绑定`i`默认参数中的值（在函数定义时评估）。

# asp.net - 第二个 modalPopupExtender 不会取消验证错误的回发

> ID：15814597
> 
> 赞同：0
> 
> 时间：2013-04-04T14:49:52.887
> 
> 标签：asp.net, modalpopupextender

同一页面中的多个 ModalPopupExtender 存在问题，每个都需要验证。由于某种原因，我没有看到，第二次验证触发（即显示错误消息），但回发没有被取消，而且 Page.IsValid 在代码隐藏中为真。在第一个 MPE 上，回发被取消，我们从未遇到过代码隐藏。

模态的标记：

```
<asp:Panel ID="pnlIndicatorEdit" runat="server" CssClass="modalPopup" style="display: none; width: 400px;">
<h3>Indicator edit</h3>
Name: <asp:TextBox ID="txtName" runat="server" Width="200px" />
<asp:RequiredFieldValidator ID="rfvIndicatorName" runat="server" Display="Dynamic" ControlToValidate="txtName"
    ErrorMessage="Required" ValidationGroup="Indicator" CssClass="validator" />
<br />
Active:
<asp:RadioButtonList ID="rblActive" runat="server" RepeatDirection="Horizontal" RepeatLayout="Flow">
    <asp:ListItem Text="True" Value="True" />
    <asp:ListItem Text="False" Value="False" />
</asp:RadioButtonList>
<br />
Category: <asp:DropDownList id="ddlCategory" runat="server" DataTextField="Name" DataValueField="KpiCategoryId" />
<br />
Indicator Type: <asp:DropDownList id="ddlIndicatorType" runat="server" DataTextField="Name" DataValueField="IndicatorTypeId" />
<br />
Inspection Item: <asp:DropDownList ID="ddlInspectionItem" runat="server" DataTextField="FriendlyName" 
    DataValueField="InspectionItemId" AppendDataBoundItems="true">
    <asp:ListItem Text="--None--" Value="" />
</asp:DropDownList>
<br />
Instructions: <asp:TextBox ID="txtInstructions" runat="server" TextMode="MultiLine" Columns="40" Rows="5" />
<br /><br />
<asp:Button ID="btnIndicatorSave" runat="server" CssClass="button-save" Text="Save" OnClick="btnIndicatorSave_Click" ValidationGroup="Indicator" />&nbsp;<asp:Button ID="btnCancel" runat="server" CssClass="button-cancel" Text="Cancel" runat="server" CausesValidation="false" />
</asp:Panel>

<asp:Panel ID="pnlTargetEdit" runat="server" CssClass="modalPopup" style="display: none; width: 400px;">
<h3>Target edit</h3>
Indicator: <asp:Label ID="lblTargetIndicator" runat="server"/> Program: <asp:Label ID="lblTargetProgram" runat="server" />
<br />
<asp:RadioButtonList ID="rblTargetActive" runat="server" RepeatDirection="Horizontal" RepeatLayout="Flow">
    <asp:ListItem Text="True" Value="True" />
    <asp:ListItem Text="False" Value="False" />
</asp:RadioButtonList>
<br />
Value: <asp:TextBox ID="txtTargetValue" runat="server" ValidationGroup="target" />
<asp:RequiredFieldValidator ID="rfvTargetValue" runat="server" ControlToValidate="txtTargetValue" 
    ErrorMessage="Value is required" CssClass="validator" Display="Dynamic" Text="Required" />
<br />
<asp:Button ID="btnTargetSave" runat="server" CssClass="button-save" Text="Save" OnClick="btnTargetSave_Click" ValidationGroup="target" />&nbsp;<asp:Button ID="btnTargetCancel" runat="server" CssClass="button-cancel" Text="Cancel" runat="server" CausesValidation="false" />
</asp:Panel>

<asp:HyperLink ID="lnkHiddenIndicatorEdit" style="display:none;" runat="server" />
<ajaxToolkit:ModalPopupExtender ID="mpeIndicatorEdit" BehaviorID="mpeIndicatorEdit" runat="server" TargetControlID="lnkHiddenIndicatorEdit" 
    PopupControlID="pnlIndicatorEdit" CancelControlID="btnCancel" BackgroundCssClass="modalBackground" />
<asp:HyperLink ID="lnkHIddenTargetEdit" style="display:none;" runat="server" />
<ajaxToolkit:ModalPopupExtender ID="mpeTargetEdit" BehaviorID="mpeTargetEdit" runat="server" TargetControlID="lnkHiddenTargetEdit" 
    PopupControlID="pnlTargetEdit" CancelControlID="btnTargetCancel" BackgroundCssClass="modalBackground" /> 
```

服务器端代码：

```
 protected void btnIndicatorSave_Click(object sender, EventArgs e)
    {
        //Never hit if vaildation fires
        try
        {
            Indicator indicator = IndicatorFactory.GetById(IndicatorId);

            indicator.Name = txtName.Text;
            int newCategoryId = 0;
            Int32.TryParse(ddlCategory.SelectedValue, out newCategoryId);
            if (indicator.Category.KpiCategoryId != newCategoryId)
            {
                indicator.Category = KpiCategoryFactory.GetById(newCategoryId);
            }
            int newIndicatorTypeId = 0;
            Int32.TryParse(ddlIndicatorType.SelectedValue, out newIndicatorTypeId);
            if (indicator.IndicatorType.IndicatorTypeId != newIndicatorTypeId)
            {
                indicator.IndicatorType = IndicatorTypeFactory.GetById(newIndicatorTypeId);
            }
            indicator.IsActive = bool.Parse(rblActive.SelectedValue);

            indicator.Instructions = txtInstructions.Text;

            int newInspectionItemId = 0;
            Int32.TryParse(ddlInspectionItem.SelectedValue, out newInspectionItemId);
            if (indicator.InspectionItem == null)
            {
                if (newInspectionItemId > 0)
                {
                    indicator.InspectionItem = InspectionFactory.GetById(newInspectionItemId);
                }
            }
            else
            {
                if (newInspectionItemId == 0)
                {
                    indicator.InspectionItem = null;
                }
                else if (newInspectionItemId != indicator.InspectionItem.InspectionItemId)
                {
                    indicator.InspectionItem = InspectionFactory.GetById(newInspectionItemId);
                }
            }

            IndicatorFactory.Save(indicator);

            DataBind();

            divMsg.Visible = true;
            lblMsg.Text = "Save Successful!";

        }
        catch (Exception ex)
        {
            Logger.Error("An error occurred trying to save indicator with id " + IndicatorId.ToString(), ex);
            divMsg.Visible = true;
            lblMsg.Text = "An error occurred trying to save the indicator";
        }
        finally
        {
            mpeIndicatorEdit.Hide();
        }
    }

    protected void btnTargetSave_Click(object sender, EventArgs e)
    {
        //hit regardless of validation, IsValid = true
        if (Page.IsValid)
        {
            try
            {
                //trying to get validation right before filling in update code.
            }
            catch (Exception ex)
            {
                Logger.Error("An error occurred trying to save target with id " + hdnTargetId.Value, ex);
                divMsg.Visible = true;
                lblMsg.Text = "An error occurred trying to save the target";
            }
            finally
            {
                mpeTargetEdit.Hide();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:54:08.370

嗬！看看再看看，最后发现我没有在第二个弹出窗口中设置验证组。

我需要回去睡觉了。

抱歉，如果有人浪费时间看这个。

# javascript - 使用 Knockout 'foreach' 循环遍历多维数组

> ID：15814603
> 
> 赞同：4
> 
> 时间：2013-04-04T14:50:08.480
> 
> 标签：javascript, arrays, multidimensional-array, knockout.js

我有一个多维关联数组。

```
this.items = ko.observableArray([
    { name: "name1", viewable: true, children: [
        { name: "name1-1", viewable: true, children: []},
        { name: "name1-2", viewable: false, children: []}
    ] },
    { name: "name2", viewable: false, children: [] },
    { name: "name3", viewable: true, children: [
        { name: "name3-1", viewable: true, children: []},
    ] },
        { name: "name4", viewable: true, children: [] }
]); 
```

目标是遍历该数组并仅打印出“可见”设置为 true 的值。

我使用一堆 if 和 foreach 语句来完成这项工作，但代码开始失控。这个例子只涵盖了 2 层，我的数组可以达到**5 层的深度**，所以这段代码会成倍增加，很快就会变得*丑陋*。

```
<ul data-bind="foreach: items">
    <!-- ko if: viewable -->
    <li data-bind="text: name"></li>
        <!-- ko foreach: children -->
            <!-- ko if: viewable -->
            <li data-bind="text: name"></li>
            <!-- /ko -->
        <!-- /ko -->
    <!-- /ko -->
</ul> 
```

那么有没有更简单/更好的方法来循环整个数组？

[JS小提琴链接](http://jsfiddle.net/KSrzL/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:26:02.820

[Underscore.js](http://underscorejs.org/)有一些处理数组的好方法，也许你可以使用[flatten](http://underscorejs.org/#flatten)和[filter](http://underscorejs.org/#filter)从你的结构中创建一个数组，然后你可以写一个`foreach`：

或者您可以使用模板来封装您的`if: viewable`逻辑并递归地应用模板：

```
<script type="text/html" id="template">
  <!-- ko if: viewable -->
    <li data-bind="text: name"></li>    
        <!-- ko template: { name: 'template', foreach: $data.children } -->
        <!-- /ko -->    
  <!-- /ko -->
</script>

<ul data-bind="template: { name: 'template', foreach: items } ">
</ul> 
```

演示[JSFiddle。](http://jsfiddle.net/XC3ZX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:26:38.287

你需要的是一个模板：

```
<script type="text/html" id="ItemTemplate">
    <!-- ko if: viewable -->
        <li data-bind="text: name"></li>
        <!-- ko template: { name: 'ItemTemplate', foreach: children } --><!-- /ko -->
    <!-- /ko -->
</script> 
```

然后只是：

```
<ul data-bind="template: { name: 'ItemTemplate', foreach: items }"></ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T15:30:00.577

如果您在项目上添加空子数组，您可以使用[模板](http://knockoutjs.com/documentation/template-binding.html)

[JSFiddle 示例](http://jsfiddle.net/damienobringer/KSrzL/5/)

```
<ul data-bind="foreach: items">
    <idv data-bind="template: {name: 'mytemp'}" />
</ul>
<div data-bind="stopBinding:true">
    <div id="mytemp">
        <div data-bind="visible :viewable">
            <li data-bind="text: name"></li>
            <div data-bind="foreach: children">
                <div data-bind="template: {name: 'mytemp'}" /></div>
        </div>
    </div>
</div> 
```

# php - PHP pg_unescape_bytea 在不同的机器上产生不同的结果

> ID：15814606
> 
> 赞同：0
> 
> 时间：2013-04-04T14:50:24.407
> 
> 标签：php, postgresql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T00:41:02.533

我的直接猜测是，您在其中一台服务器上有一个旧的 libpq，无法正确处理 bytea 的十六进制编码。如果您要对 bytea 进行十六进制编码，您可以考虑直接在 PHP 中取消编码以节省您的工作量。

显然，如果没有更多信息，我们不能肯定地说，但是无论问题如何，PHP 中的简单解决方案是在返回的字符串的开头检查 \x，如果是，将其去掉，然后转换为十六进制为二进制。

# hibernate - BeginTransaction Hibernate 有必要吗？

> ID：15814607
> 
> 赞同：10
> 
> 时间：2013-04-04T14:50:25.910
> 
> 标签：hibernate, transactions

当您只执行一个查询而不删除或更新数据时，是否真的需要启动事务？

我目前正在使用带有 C3p0 的 Hibernate 4.1.9

例子，

```
session session = hibernateutil.getsessionfactory().opensession();
Transaction tx = session.beginTransaction();
List messages = session.createQuery("from Message m order by m.text asc").list();  
tx.commit();
session.close(); 
```

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T15:36:29.853

[文档](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html_single/#transactions-demarcation)说：

> 数据库或系统事务边界**始终是必需**的。在数据库事务之外不能与数据库进行通信（这似乎使许多习惯于自动提交模式的开发人员感到困惑）。**始终使用清晰的事务边界，即使是只读操作**。根据您的隔离级别和数据库功能，这可能不是必需的，但如果您始终明确划分事务，则没有缺点。当然，单个数据库事务将比许多小型事务执行得更好，即使是读取数据也是如此。

（强调我的）

# php - 请求 Google Maps Geolocation API

> ID：15814609
> 
> 赞同：0
> 
> 时间：2013-04-04T14:50:27.270
> 
> 标签：php, json, geolocation

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T16:51:43.887

试试这个（结果为 json 格式）：

```
public function getGeoPosition($address){
    $url = "http://maps.google.com/maps/api/geocode/json?sensor=false" . 
        "&address=" . urlencode($address);

    $json = file_get_contents($url);

    $data = json_decode($json, TRUE);

     if($data['status']=="OK"){
      return $data['results'];
    }

}

print_r(getGeoPosition('chicago,il')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:23:43.167

If you have a Business account ,as suggested by your link, Google supply help. If you don't have a business account you would will need to use use [This API](https://developers.google.com/maps/documentation/geocoding/#GeocodingRequests) which provides xml results. ie

```
 http://maps.googleapis.com/maps/api/geocode/xml?address=anywhere&sensor=true 
```

or

```
 sensor=false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-31T12:40:44.620

添加到穆罕默德的答案：

```
function getGeoPosition($address){
    $url = "https://maps.google.com/maps/api/geocode/json?sensor=false" .
        "&key=YOUR_API_KEY_HERE&address=" . urlencode($address);

    $json = file_get_contents($url);

    $data = json_decode($json, TRUE);
     if($data['status']=="OK"){
      return $data['results'];
    }
}
print_r(getGeoPosition('chicago,il')); 
```

请注意，请求需要通过 https 进行，并且需要一个不受限制的 API 密钥。

# entity-framework - Npgsql 与实体框架代码集成

> ID：15814612
> 
> 赞同：8
> 
> 时间：2013-04-04T14:50:38.797
> 
> 标签：entity-framework, npgsql

我有一个项目使用最新版本的 EF CF 和 PostgreSQL 和 Npgsql。

我的模型看起来像：

```
[Table("mytable")]
public class MyTable
{
    [Column("id")]
    public int Id { get; set; }
    [Column("mycolumn")]
    public string MyColumn { get; set; }
} 
```

并且数据库/表/列具有小写名称，例如：

```
CREATE TABLE mytable
{
    id serial,
    mycolumn character(50)
} 
```

Npgsql 生成带引号的 SQL 命令，因此由于 PostgreSQL 的特性，我必须使用数据注释，这很烦人。但是我不想在数据库中使用引号分隔的名称。

有没有办法将 Npgsql 配置为在生成命令时不包含引号或在生成的 SQL 中强制使用小写表/列名称？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T15:36:04.897

如果我没有遗漏什么 - 你想要一些通用的方法`of changing the naming convention for tables`吗？

EF6 有这个`custom conventions`功能 - 它仍然不是官方版本，但如果它适合你，一些链接......

[http://entityframework.codeplex.com/wikipage?title=Custom%20Conventions](http://entityframework.codeplex.com/wikipage?title=Custom%20Conventions)

在你的情况下，你必须为类/`Type`我猜实现它 - 例如（一些伪代码）......

1）实施`IConfigurationConvention<Type, EntityTypeConfiguration>`（您可以检查EF源`EntityConventionBase`）

2) 在`Apply`- 更改通过配置 ( `ToTable()`) 生成表名称的方式 - 类似于`.ToLowerCase()`

3）添加到约定...

例如...

```
public class SmallCapsEntitiesConfigurationConvention
    : IConfigurationConvention<Type, EntityTypeConfiguration>
{
    public void Apply(Type memberInfo, Func<EntityTypeConfiguration> configuration)
    {
        configuration().ToTable(memberInfo.Name.ToLowerInvariant(), null);
    }
} 
```

你可以在这里看到一个例子
[http://blog.cincura.net/233167-custom-conventions-in-entity-framework-6-helping-firebird/](http://blog.cincura.net/233167-custom-conventions-in-entity-framework-6-helping-firebird/)

否则，我不知道`Npgsql`/ PostgreSQL - 它对我来说确实有点“原始”。但是你可以在 EF 端处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-26T10:07:45.707

这是 EF Core 的示例。

当前代码转换`tables`,`properties`和为 蛇形大小写`keys`，您可以将其用作自定义约定的基础：`indexes``Postgre`

```
using System;
using System.Text.RegularExpressions;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata;
using Npgsql;

namespace Database.Customization
{
    public class PostgreDbContext : DbContext
    {
        private static readonly Regex _keysRegex = new Regex("^(PK|FK|IX)_", RegexOptions.Compiled);

        public PostgreDbContext(DbContextOptions options)
            : base(options)
        {
        }

        protected override void OnModelCreating(ModelBuilder modelBuilder)
        {
            base.OnModelCreating(modelBuilder);
            FixSnakeCaseNames(modelBuilder);
        }

        private void FixSnakeCaseNames(ModelBuilder modelBuilder)
        {
            var mapper = new NpgsqlSnakeCaseNameTranslator();
            foreach (var table in modelBuilder.Model.GetEntityTypes())
            {
                ConvertToSnake(mapper, table);
                foreach (var property in table.GetProperties())
                {
                    ConvertToSnake(mapper, property);
                }

                foreach (var primaryKey in table.GetKeys())
                {
                    ConvertToSnake(mapper, primaryKey);
                }

                foreach (var foreignKey in table.GetForeignKeys())
                {
                    ConvertToSnake(mapper, foreignKey);
                }

                foreach (var indexKey in table.GetIndexes())
                {
                    ConvertToSnake(mapper, indexKey);
                }
            }
        }

        private void ConvertToSnake(INpgsqlNameTranslator mapper, object entity)
        {
            switch (entity)
            {
                case IMutableEntityType table:
                    var relationalTable = table.Relational();
                    relationalTable.TableName = ConvertGeneralToSnake(mapper, relationalTable.TableName);
                    if (relationalTable.TableName.StartsWith("asp_net_"))
                    {
                        relationalTable.TableName = relationalTable.TableName.Replace("asp_net_", string.Empty);
                        relationalTable.Schema = "identity";
                    }

                    break;
                case IMutableProperty property:
                    property.Relational().ColumnName = ConvertGeneralToSnake(mapper, property.Relational().ColumnName);
                    break;
                case IMutableKey primaryKey:
                    primaryKey.Relational().Name = ConvertKeyToSnake(mapper, primaryKey.Relational().Name);
                    break;
                case IMutableForeignKey foreignKey:
                    foreignKey.Relational().Name = ConvertKeyToSnake(mapper, foreignKey.Relational().Name);
                    break;
                case IMutableIndex indexKey:
                    indexKey.Relational().Name = ConvertKeyToSnake(mapper, indexKey.Relational().Name);
                    break;
                default:
                    throw new NotImplementedException("Unexpected type was provided to snake case converter");
            }
        }

        private string ConvertKeyToSnake(INpgsqlNameTranslator mapper, string keyName) =>
            ConvertGeneralToSnake(mapper, _keysRegex.Replace(keyName, match => match.Value.ToLower()));

        private string ConvertGeneralToSnake(INpgsqlNameTranslator mapper, string entityName) =>
            mapper.TranslateMemberName(ModifyNameBeforeConvertion(mapper, entityName));

        protected virtual string ModifyNameBeforeConvertion(INpgsqlNameTranslator mapper, string entityName) => entityName;
    }
} 
```

**更新：**

如果您使用的是 EF 核心 3，那么`Relational()`将导致错误，因为该方法最近已被删除。修改`ConvertToSnake`函数定义如下：

```
private void ConvertToSnake(INpgsqlNameTranslator mapper, object entity)
{
        switch (entity)
        {
            case IMutableEntityType table:
                table.SetTableName(ConvertGeneralToSnake(mapper, table.GetTableName()));
                if (table.GetTableName().StartsWith("asp_net_"))
                {
                    table.SetTableName(table.GetTableName().Replace("asp_net_", string.Empty));
                    table.SetSchema("identity");
                }

            break;
        case IMutableProperty property:
            property.SetColumnName(ConvertGeneralToSnake(mapper, property.GetColumnName()));
            break;
        case IMutableKey primaryKey:
            primaryKey.SetName(ConvertKeyToSnake(mapper, primaryKey.GetName()));
            break;
        case IMutableForeignKey foreignKey:
            foreignKey.SetConstraintName(ConvertKeyToSnake(mapper, foreignKey.GetConstraintName()));
            break;
        case IMutableIndex indexKey:
            indexKey.SetName(ConvertKeyToSnake(mapper, indexKey.GetName()));
            break;
        default:
            throw new NotImplementedException("Unexpected type was provided to snake case converter");
    }
} 
```

# sql - 对于每个样式 SQL 查询

> ID：15814621
> 
> 赞同：2
> 
> 时间：2013-04-04T14:51:05.733
> 
> 标签：sql, sql-server, loops

基本上我想用伪代码做的是：

```
FOR EACH pig_id IN (SELECT pig_id FROM farm AS f)
BEGIN
-- Do something funky with the f.pig_id, for example
  SELECT bacon, ham, pork, (face + guts + brains + testicles) AS 'sausage'
  FROM farm
  WHERE pig_id = f.pig_id
END 
```

循环的实际内部更复杂，但这个简单的 SELECT 语句演示了在农场 TABLE 中的 FOR EACH pig_id 循环中使用 f.pig_id 的必要性。我看过 CREATE TRIGGER 解决方案，但我希望有更简单的东西。我知道这是一个低效的查询，但该项目需要简单且易于非技术人员阅读的查询。

编辑：它被用于一个小型数据集，因此人类可读性优先于效率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:56:31.817

我认为您正在寻找的是 CURSOR

这里是[MSDN 示例的链接，底部](http://msdn.microsoft.com/en-us/library/ms180169.aspx)有一个简单的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T15:40:08.463

如果 pig_id 唯一列（例如数据类型为 int），您可以使用没有 CURSOR 的循环

```
DECLARE @id int = (SELECT MIN(pig_id) FROM farm) 
WHILE (@id IS NOT NULL)
BEGIN  
  SELECT bacon, ham, pork, (face + guts + brains + testicles) AS 'sausage'
  FROM farm
  WHERE pig_id = @id

  SELECT @id = MIN(pig_id) FROM farm WHERE pig_id > @Id
END 
```

或者

```
DECLARE @id int = 0
WHILE 1 = 1
BEGIN
  SELECT @id = (select min(pig_id) from farm where pig_id > @id)     

  IF @id IS NULL
  BREAK
  ELSE

  SELECT bacon, ham, pork, (face + guts + brains + testicles) AS 'sausage'
  FROM farm
  WHERE pig_id = @id
  CONTINUE
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:59:24.970

***RBAR = 坏。***

[https://www.simple-talk.com/sql/t-sql-programming/rbar--row-by-agonizing-row/](https://www.simple-talk.com/sql/t-sql-programming/rbar--row-by-agonizing-row/)

定型好！

.....................................

我在这里创建了一个 ANTI 示例：

[http://granadacoder.wordpress.com/2008/07/24/cursors-setbased-and-scalar-udf/](http://granadacoder.wordpress.com/2008/07/24/cursors-setbased-and-scalar-udf/)

反例是我向您展示了如何使用游标，但随后我向您展示了如何不使用游标来解决相同的问题。

请，请，请避免光标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T15:00:58.317

如果您需要对第一个查询中的值做一些复杂的事情，那么您可以使用 cursor。

一个例子：

```
DECLARE @pig int
DECLARE db_cursor CURSOR FOR  
SELECT pig_id FROM farm AS f 

OPEN db_cursor  
FETCH NEXT FROM db_cursor INTO @pig  

WHILE @@FETCH_STATUS = 0  
BEGIN  
       --Do your thing here....

       FETCH NEXT FROM db_cursor INTO @pig  
END  

CLOSE db_cursor  
DEALLOCATE db_cursor 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T15:01:10.740

如前所述，游标应该做你想做的事，这是一个简单的例子：

```
DECLARE @valueHolder INT

DECLARE myCursor CURSOR FOR SELECT ID FROM MyTable
OPEN myCursor

FETCH NEXT FROM myCursor INTO @valueHolder

WHILE @@FETCH_STATUS = 0
BEGIN
    PRINT @valueHolder

    FETCH NEXT FROM myCursor INTO @valueHolder
END

CLOSE myCursor;
DEALLOCATE myCursor; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-04T15:24:41.670

如果不使用游标，您可以只使用计数器和`WHILE`循环：

架构：

```
CREATE TABLE #Pig
(
PigId INT
)
INSERT INTO #Pig VALUES
(1),
(3),
(6),
(10)

CREATE TABLE #Farm 
(
PigId INT,
Name VARCHAR(20)
)
INSERT INTO #Farm VALUES
(1,'michaeljackson'),
(1,'jim'),
(3,'jill'),
(3,'j') 
```

脚本：

```
SELECT  PigId,
        rn = ROW_NUMBER() OVER (ORDER BY PigId)
INTO    #PigRows
FROM    #Pig

DECLARE @max INT = (SELECT MAX(rn) FROM #PigRows)

DECLARE @counter INT = 1
WHILE @counter <= @max
BEGIN

    SELECT Name
    FROM #Farm
    WHERE PigId = @counter

    SET @counter = @counter + 1
END 
```

# ios - CATextLayer 中的 NSAttributedString 导致 EXC_BAD_ACCESS (ios 5.0)

> ID：15814622
> 
> 赞同：1
> 
> 时间：2013-04-04T14:51:06.830
> 
> 标签：ios, ios5, core-text, nsattributedstring, quartz-core

我很难使用 CoreText。不知道，如果我做错了什么或者是 iOS 自己的错误，但这就是我所拥有的：在 iOS 5.0 中，此代码使应用程序在显示视图时崩溃

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIFont * font = [UIFont systemFontOfSize:[UIFont systemFontSize]];

    NSDictionary * attrs = @{(NSString *)kCTFontAttributeName:font};

    NSAttributedString * attrStr = [[NSAttributedString alloc] initWithString:@"Test" attributes:attrs];

    CATextLayer * textLayer = [[CATextLayer alloc] init];

    textLayer.frame = self.view.frame;

    textLayer.string = attrStr;

    [self.view.layer addSublayer:textLayer];
} 
```

它生成 EXC_BAD_ACCESS 并打开`CoreText TAttributes::TAttributes(__CFDictionary const*):`显示发生异常的汇编程序行。

难道我做错了什么？我挣扎了将近 8 个小时，但仍然不知道发生了什么。

**更新**

似乎问题是基于这条线

```
 NSDictionary * attrs = @{(NSString *)kCTFontAttributeName:font}; 
```

因为当我删除 Font 属性并添加 ForegroundColor 属性时，它突然开始工作。我会尝试深入挖掘，但仍然需要一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T15:57:44.700

如果你直接使用 Core Text，你必须使用 CTFont，而不是 UIFont。它们*不是*相互兼容的（即它们之间没有免费的桥梁）。

我花了一整天的时间才发现这一点。我的问题就像你现在遇到的一样！

不幸的是，美妙的 NSAttributedString 仅适用于 iOS 6。因此，如果您想制作一个多样式字符串并在 iOS 5 中显示它，那么您所做的是正确的。但您必须仅使用与 iOS 5 兼容的呼叫。

下面是一些典型的代码，用于制作与 CoreText 一起工作的 NSAttributedString，并且可以由 iOS 5 上的 CATextLayer 显示：

[https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/iOS5bookExamples/ch23p689styledText1/p579p593styleText1/RootViewController.m](https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/iOS5bookExamples/ch23p689styledText1/p579p593styleText1/RootViewController.m)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:58:49.403

例外是内存问题，这`EXC_BAD_ACCESS`通常是对象（早期）释放问题，即访问已释放的对象。

如果您没有打开 NSZombies，请执行此操作并重试。这里肯定有很多与他们有关的帖子。

# wpf - 是否有 WPF 控件可以选择看起来像滑块的范围？

> ID：15814623
> 
> 赞同：3
> 
> 时间：2013-04-04T14:51:08.877
> 
> 标签：wpf, slider

是否有一个 WPF 控件看起来像一个滑块（或者可能是 Slider 本身），它同时具有最小值和最大值而不是单个值来让用户选择一个范围？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-03-02T15:02:54.457

MahApps.Metro库提供了出色的 RangeSlider 控件[。](http://mahapps.com/)以下是演示应用程序中的一个示例：

![演示应用程序中的范围滑块示例](https://i.stack.imgur.com/CfvkD.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T15:10:25.560

滑块栏有一个属性 IsSelectionRangeEnabled。检查示例： [http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/a9eb8697-3ae4-4045-9508-a75d6168a8af/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/a9eb8697-3ae4-4045-9508-a75d6168a8af/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-18T19:47:51.597

更新：Avalon 控件是 WPF 扩展工具包的前身，现在包括 AvalonDock。

RangeSlider 是 WPF 扩展工具包的一部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-09T07:35:31.170

我尝试将两个滑块放在另一个上面，所以它看起来像一个范围滑块然后，您可以设置值，一个滑块用于最小值，另一个滑块用于最大值，并添加更大和更小的值的逻辑。希望它有效，在这种情况下，您无需添加任何外部第三方库

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-20T19:26:23.570

正如*@kmatyaszek*已经说过的， [AvalonControlsLibrary](http://avaloncontrolslib.codeplex.com)是很棒的免费（*Microsoft 公共许可证（Ms-PL）*）控件库。

但是我发现**RangeSlider**的基本样式对我来说不是很令人满意。

这是**更现代版本的样式**（RangeSlider.xaml）：

```
 <ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
            xmlns:drawing="clr-namespace:System.Drawing;assembly=System.Drawing" >

    <SolidColorBrush x:Key="BrushSliderEdge" Color="LightGray" />
    <SolidColorBrush x:Key="BrushSliderActiveArea" Color="DeepSkyBlue" />
    <SolidColorBrush x:Key="BrushSliderThumb" Color="LightSkyBlue" />
    <SolidColorBrush x:Key="BrushSliderThumbBorder" Color="DeepSkyBlue" />

    <Style x:Key="SliderEdge" TargetType="RepeatButton">
    <Setter Property="Focusable" Value="false" />
    <Setter Property="IsTabStop" Value="false" />
    <Setter Property="OverridesDefaultStyle" Value="true" />
    <Setter Property="SnapsToDevicePixels" Value="true" />
    <Setter Property="Template">
        <Setter.Value>
        <ControlTemplate TargetType="RepeatButton">
            <Border Height="3" Background="{StaticResource BrushSliderEdge}" BorderBrush="{StaticResource BrushSliderEdge}" BorderThickness="1" />
        </ControlTemplate>
        </Setter.Value>
    </Setter>
    </Style>
    <Style x:Key="SliderInner" TargetType="Thumb">
    <Setter Property="OverridesDefaultStyle" Value="true" />
    <Setter Property="SnapsToDevicePixels" Value="true" />
    <Setter Property="Template">
        <Setter.Value>
        <ControlTemplate TargetType="Thumb">
            <Border Height="3" Background="{StaticResource BrushSliderActiveArea}" BorderBrush="{StaticResource BrushSliderThumbBorder}" BorderThickness="1" />
        </ControlTemplate>
        </Setter.Value>
    </Setter>
    </Style>

    <Style x:Key="SliderThumb" TargetType="Thumb">
    <Setter Property="OverridesDefaultStyle" Value="true" />
    <Setter Property="SnapsToDevicePixels" Value="true" />
    <Setter Property="Template">
        <Setter.Value>
        <ControlTemplate TargetType="Thumb">
            <Ellipse Width="10" Height="10" Fill="{StaticResource BrushSliderThumb}" />
        </ControlTemplate>
        </Setter.Value>
    </Setter>
    </Style>

    <Style TargetType="{x:Type local:RangeSlider}">
    <Setter Property="Template">
        <Setter.Value>
        <ControlTemplate TargetType="{x:Type local:RangeSlider}">
            <StackPanel Name="PART_RangeSliderContainer" Orientation="Horizontal">
            <RepeatButton Name="PART_LeftEdge" Style="{StaticResource SliderEdge}" />
            <Thumb Name="PART_LeftThumb" Cursor="SizeWE" Style="{StaticResource SliderThumb}" />
            <Thumb Name="PART_MiddleThumb" MinWidth="10" Cursor="ScrollAll" Style="{StaticResource SliderInner}" />
            <Thumb Name="PART_RightThumb" Cursor="SizeWE" Style="{StaticResource SliderThumb}" />
            <RepeatButton Name="PART_RightEdge" Style="{StaticResource SliderEdge}" />
            </StackPanel>
        </ControlTemplate>
        </Setter.Value>
    </Setter>
    </Style>
</ResourceDictionary> 
```

这是它的外观示例*（您可以通过更改画笔颜色值来更改颜色）*：

[![在此处输入图像描述](https://i.stack.imgur.com/RxrQ6.png)](https://i.stack.imgur.com/RxrQ6.png)

*   用它替换它的基本样式： [http ://avaloncontrolslib.codeplex.com/SourceControl/latest#trunk/AvalonControlsLibrary/Themes/RangeSlider.xaml](http://avaloncontrolslib.codeplex.com/SourceControl/latest#trunk/AvalonControlsLibrary/Themes/RangeSlider.xaml)

*   并用于控制： [http ://avaloncontrolslib.codeplex.com/SourceControl/latest#trunk/AvalonControlsLibrary/Controls/RangeSlider.cs](http://avaloncontrolslib.codeplex.com/SourceControl/latest#trunk/AvalonControlsLibrary/Controls/RangeSlider.cs)

# .NET 4.5 中的控件使用示例

```
<UserControl x:Class="MyProject.MyUserControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         xmlns:wpf="clr-namespace:Library.WPF;assembly=Library"
         MinWidth="700"
         HorizontalAlignment="Left"
         DataContext="{Binding RelativeSource={RelativeSource Self}}"
         mc:Ignorable="d">
<UserControl.Resources>
    <ResourceDictionary Source="/Library;component/WPF/RangeSlider/RangeSlider.xaml" />
</UserControl.Resources>

<StackPanel>
                <wpf:RangeSlider Width="400"
                                 MinRange="0"
                                 RangeStart="10"
                                 RangeStartSelected="{Binding MyValue_Min}"
                                 RangeStop="100"
                                 RangeStopSelected="{Binding MyValue_Max}" />
 </StackPanel> 
```

# 在上面的例子中：

控制数据所在的程序集：**库**

命名空间：**Library.WPF**

*   */WPF/RangeSlider/RangeSlider.xaml* <-- xaml 样式
*   */WPF/RangeSlider/RangeSlider.cs* <--控制代码

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-04T16:12:50.417

您可以使用[AvalonControlsLibrary](http://marlongrech.wordpress.com/2007/09/06/wpf-range-slider-control/)中的[RangeSlider](http://avaloncontrolslib.codeplex.com/)。

例子：

```
<avalon:RangeSlider RangeStart="0" RangeStop="100"
                    RangeSelectionChanged="RangeSlider_RangeSelectionChanged"/> 
```

阿瓦隆在哪里：

```
xmlns:avalon="http://schemas.AvalonControls/AvalonControlsLibrary/Controls" 
```

RangeSelectionChanged 事件处理程序：

```
private void RangeSlider_RangeSelectionChanged(object sender, AC.AvalonControlsLibrary.Controls.RangeSelectionChangedEventArgs e)
{
    Console.WriteLine("e.NewRangeStart: " + e.NewRangeStart);
    Console.WriteLine("e.NewRangeStop: " + e.NewRangeStop); 
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-06T16:47:58.490

我会推荐 Xceed 的 RangeSlider。

[https://github.com/xceedsoftware/wpftoolkit/wiki/RangeSlider](https://github.com/xceedsoftware/wpftoolkit/wiki/RangeSlider)

# python - 在美丽的汤中刮取维基页面

> ID：15814625
> 
> 赞同：1
> 
> 时间：2013-04-04T14:51:13.633
> 
> 标签：python, web-scraping, beautifulsoup, python-3.3

我正在尝试从 wiki 页面上抓取一些文本，特别是[这个。](http://yugioh.wikia.com/wiki/Card_Tips%3aBlue-Eyes_White_Dragon) 我正在使用 BeautifulSoup，或者至少尝试......我对网页抓取并不真正有经验。到目前为止，这是我的代码...

```
import urllib
import urllib.request
from bs4 import BeautifulSoup

soup =BeautifulSoup(urllib.request.urlopen('http://yugioh.wikia.com/wiki/Card_Tips:Blue-Eyes_White_Dragon').read())

for row in soup('span', {'class' : 'mw-headline'})[0].tbody('tr'):
      tds = row('td')
      print(tds[0].string, tds[1].string, tds[2].string) 
```

我只是想获取每个标题（可搜索，从手上特殊召唤等）并获取每个类别下的每张卡。谁能给我一些建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:21:16.263

如果您检查 HTML 代码，您会发现：

```
<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
 ...
 <h3>
  <span class="mw-headline" id="Searchable_by">
   Searchable by
  </span>
 ...
 </h3>
 <ul>
  <li>
   "
   <a href="/wiki/Summoner%27s_Art" title="Summoner's Art">
    Summoner's Art
   </a>
   "
  </li>
  <li>
   "
   <a href="/wiki/The_White_Stone_of_Legend" title="The White Stone of Legend">
    The White Stone of Legend
   </a>
   "
  ...
  </li>
 </ul>
 ...
<\div> 
```

上面的片段显示了这样一个事实：

*   一个`div`with`id="mw-content-text"`包含 wiki。
*   标题在`h3`标签的第一个（也是唯一的）`span`中。
*   一个`ul`标签包含项目符号列表。

所以在 Python 代码中：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(open('stack.htm').read()) # I saved the webpage
main_tag = soup.findAll('div',{'id':'mw-content-text'})[0]

headers = main_tag.find_all('h3')
ui_list = main_tag.find_all('ul')
for i in range(len(headers)):
    print(headers[i].span.get_text())
    print('\n -'.join(ui_list[i].get_text().split('\n')))
sections = zip((x.span.get_text() for x in headers), ('\n -'.join(x.get_text().split('\n')) for x in ui_list)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:35:50.310

您想查找`<ul>`标题后面的所有元素，然后列出这些元素下的链接以获取卡片：

```
for headline in soup('span', {'class' : 'mw-headline'}):
    print(headline.text)
    links = headline.find_next('ul').find_all('a')
    for link in links:
        print('*', link.text) 
```

打印：

```
Searchable by
* Summoner's Art
* The White Stone of Legend
* Deep Diver
Special Summoned from the hand by
* Ancient Rules
* Red-Eyes Darkness Metal Dragon
* King Dragun
* Kaibaman 
```

等等

# qt - 如何在 Qt 中显示一个窗口并在它关闭后立即删除它？

> ID：15814626
> 
> 赞同：9
> 
> 时间：2013-04-04T14:51:20.567
> 
> 标签：qt, qdialog

作为一个非常简单的示例，我想在按下按钮时在 Qt 中显示一个对话框。通常的模式（在我目前正在处理的应用程序中）似乎如下：

```
class MainWindow {
  ...
private slots:
  buttonClicked();
  ...
private:
  ChildWindow * childWindow;
}

MainWindow::MainWindow(QWidget * parent) : QWidget(parent) {
  ...
  childWindow = new ChildWindow(this);
  ...
}

MainWindow::buttonClicked() {
  childWindow.show();
} 
```

来自 .NET 和 Windows 窗体（并且因为我不需要从类中的其他地方访问该对象），我更熟悉以下模式：

```
button1_Clicked(object sender, EventArgs e) {
  ChildWindow f = new ChildWindow();
  f.Show();
} 
```

局部变量意味着我没有另一个实例字段，而且窗口不会在内存中停留比必要的时间更长的时间。将其直接翻译成 C++ 会有点难看，因为事后没人会澄清。我尝试了以下事情：

1.  `shared_ptr`. 不走运，`delete`只要方法结​​束，窗口就会 d，这意味着新窗口会出现一瞬间然后又消失了。不太好。

2.  `exec()`而不是`show()`. 这适用于模态对话框，但文档似乎暗示它也会停止事件循环，`QApplication::processEvents()`如果仍需要更新，您应该定期调用。我在这里了解得很少，但我想这也不太好。

3.  `deleteLater()`. 可悲的是，仅显示一个窗口并不会阻塞`deleteLater`，因此它一出现就消失了。

关闭窗口后是否有一个不错的选择来清理它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-04T14:58:00.913

```
childWindow->setAttribute( Qt::WA_DeleteOnClose ); 
```

另请注意，调用`exec()`将阻止调用事件循环的执行，但会产生自己的事件循环，因此不需要调用`processEvents()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:52:37.057

您可以将`finished()`对话框的信号连接到其`deleteLater`插槽：

```
ChildWindow * d = new ChildWindow(this);
connect(d, SIGNAL(finished(int)), d, SLOT(deleteLater()));
d->show(); 
```

`delete`这样，一旦您关闭对话框，它将立即变为d。

# jquery - 在 jsFiddle 中测试的 jQuery 脚本在 Firefox 中不起作用

> ID：15814628
> 
> 赞同：0
> 
> 时间：2013-04-04T14:51:22.343
> 
> 标签：jquery

我在表格中有 textarea，想通过单击来调整 textarea 的大小。我在 jsFiddle 中测试了脚本，但它在我的项目中不起作用。比我连接到脚本只是页面但没有成功。jQuery 已连接，另一个脚本工作，css 已连接。

这是代码：

```
$('textarea').click(function(){
    $('textarea').removeClass('active');
       $(this).addClass('textareastyle');
}); 
```

根据[jsFiddle](http://jsfiddle.net/dimaomni/gdVRh/ "jsFiddle")

使用 Firefox 20.0 和 jQuery 1.9.1 测试（缩小版）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:56:23.937

将代码写入：DOM

```
$(document).ready(function() {
      $('textarea').click(function(){
          $('textarea').removeClass('active');
          $(this).addClass('textareastyle');
     });    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:58:04.337

使用`.focus()`and`.blur()`代替`.click()`

[小提琴](http://jsfiddle.net/gdVRh/3/)

```
$('textarea').focus(function(){
    $(this).toggleClass('textareastyle');
});
$('textarea').blur(function(){
    $(this).toggleClass('textareastyle');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:00:43.017

这是来自您的 jsFiddle 的编译代码：

```
<html>                                                                  
    <head>                                                                  
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>        
         <script type="text/javascript">                                         
            $(document).ready(function() {
                  $('textarea').click(function(){
                      $('textarea').removeClass('active');
                      $(this).addClass('textareastyle');
                 });    
            });                         
         </script>
         <style>
             .textareastyle{
                width: 300px; 
                height:300px; 
                position: fixed;
                margin-top:-2%;
                margin-left:30%;
                background-color:yellow;
                color: black;
            }
        </style>                                      
    </head>                                                                 
<body>                                                                  
   <textarea class="dd"></textarea>                                    
</body>                                                                 
</html> 
```

它适用于 Firefox 和 Chromium。

请记住在方法中包装这样的代码`$(document).ready()`，以便在加载 DOM 时对其进行评估。

查看[初学者教程](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)以及[API 文档](http://api.jquery.com/)。

# openshift - Openshift 是否限制循环？

> ID：15814630
> 
> 赞同：0
> 
> 时间：2013-04-04T14:51:26.267
> 
> 标签：openshift

我正在 Openshift clound 上开发应用程序。

请看这个脚本：

```
 foreach ( $needle['tbody']['tr']['td'] as $key=>$values ){
      ....
      foreach( $values['table']['tr']['td'] as $value ){
        ....
        foreach ( $value['table']['tbody']['tr'] as $td_key => $td  ){

        }
        node_save($node);

$value['table']['tbody']['tr'] contains this values:
Array
(
    [0] => Array
        (
            [td] => Array
                (
                    [@attributes] => Array
                        (
                            [class] => tinh
                        )

                    [a] => Äá»“ng Nai
                )

        )

    [1] => Array
        (
            [td] => 
                4K1
        )

    [2] => Array
        (
            [td] => Array
                (
                    [@attributes] => Array
                        (
                            [class] => giai8
                        )

                    [div] => 27
                )

        )

    [3] => Array
        (
            [td] => Array
                (
                    [@attributes] => Array
                        (
                            [class] => giai7
                        )

                    [div] => 490
                )

        )

    [4] => Array
        (
            [td] => Array
                (
                    [@attributes] => Array
                        (
                            [class] => giai6
                        )

                    [div] => Array
                        (
                            [0] => 9861
                            [1] => 3667
                            [2] => 9921
                        )

                )

        )

    [5] => Array
        (
            [td] => Array
                (
                    [@attributes] => Array
                        (
                            [class] => giai5
                        )

                    [div] => 0262
                )

        )

    [6] => Array
        (
            [td] => Array
                (
                    [@attributes] => Array
                        (
                            [class] => giai4
                        )

                    [div] => Array
                        (
                            [0] => 95163
                            [1] => 89551
                            [2] => 99648
                            [3] => 39782
                            [4] => 69694
                            [5] => 09915
                            [6] => 90402
                        )

                )

        )

    [7] => Array
        (
            [td] => Array
                (
                    [@attributes] => Array
                        (
                            [class] => giai3
                        )

                    [div] => Array
                        (
                            [0] => 57076
                            [1] => 54943
                        )

                )

        )

    [8] => Array
        (
            [td] => Array
                (
                    [@attributes] => Array
                        (
                            [class] => giai2
                        )

                    [div] => 07304
                )

        )

    [9] => Array
        (
            [td] => Array
                (
                    [@attributes] => Array
                        (
                            [class] => giai1
                        )

                    [div] => 34882
                )

        )

    [10] => Array
        (
            [td] => Array
                (
                    [@attributes] => Array
                        (
                            [class] => giaidb
                        )

                    [div] => 339136
                )

        )

) 
```

foreach ( $value['table']['tbody']['tr'] as $td_key => $td ){ ... 仅循环 2 次，无法到达 node_save($node);。我想知道 Openshift 是否限制循环？该脚本在 localhost 上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:51:51.570

看看日志中抛出了什么会很有趣。发布您看到的任何错误： [https ://www.openshift.com/faq/how-to-troubleshoot-application-issues-using-logs](https://www.openshift.com/faq/how-to-troubleshoot-application-issues-using-logs)

# android - 从 AsyncTask for Android 绑定到服务

> ID：15814632
> 
> 赞同：1
> 
> 时间：2013-04-04T14:51:28.987
> 
> 标签：android, android-intent, android-asynctask, android-activity

我在从 AsyncTask 绑定到已建立的服务时遇到了一些问题。我在两个服务之间绑定没有问题。进一步的细节是我从命令链启动它（将初始化程序 Activity 作为上下文的一部分传递）。

如果我有目的仅从 SpecialActivity 启动，我可以在此链之外使用我的 SpecialService，但这不允许我拥有通过命令链实现可以实现的所需可配置性。

问题是，无论出于何种原因，FirstCommand 都不会绑定 SpecialService。有人可以在这里阐明问题吗？

流程是这样的：

MainActivity > SpecialActivity > CommandController > FirstCommand

```
public class MainActivity extends ViewBaseActivity {

    private void startServices(){

        Intent propertiesIntent = new Intent(this, PropertiesService.class);
        startService(propertiesIntent);

        Intent intentSpecialIntent = new Intent(this, SpecialService.class);
        startService(intentSpecialIntent);
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        startServices();
    }

}

public class RateActivity extends ViewBaseActivity {

    public void onClickOfSomeButton(View v){
        CommandController commander = new CommandController();
        commander.executeMyCommand(this);

    }
}

public class CommandController {

    protected interface IRemoteAsyncTask {
      public List<?> getResults();
      public void setContext(ContextBase context);
    };

    protected class RemoteTask extends AsyncTask<String, Void, Object> implements IRemoteAsyncTask{

        private ContextBase context = new ContextBase();

        public RemoteTask() {
          super();
          // TODO Auto-generated constructor stub
        }

        public RemoteTask(ContextBase context) {
          super();
          this.context = context;
        }

        @Override
        public List<?> getResults() {
          // TODO Auto-generated method stub
          return null;
        }

        @Override
        protected Object doInBackground(String... params) {
          // TODO Auto-generated method stub
          String command = (String) params[0];
          logger.debug("Command controller is attempting to launch ["+command+"]");
              try {
                getCatalog().getCommand(command).execute(getContext());
          } catch (Exception e) {
            logger.error(e.getMessage());
          }
          return null;
        }

        @Override
        public void setContext(ContextBase context) {
          this.context = context;
        }

        protected ContextBase getContext() {
          return context;
        }

    }

    public void executeMyCommand(ViewBaseActivity activity){
      ContextBase context = new ContextBase();
      context.put(ViewBaseActivity.class, activity);
      RemoteTask backgroundTask = new RemoteTask(context);
      backgroundTask.execute(COMMANDS.MY_COMMAND_CHAIN.toString());
    }

}

public class FirstCommand implements Command{

    private SpecialService specialService;
    private ViewBaseActivity hostActivity;

    private ServiceConnection specialServiceConnection = new ServiceConnection() {
        public void onServiceConnected(ComponentName className, IBinder service) {
            // This is called when the connection with the service has been
            // established, giving us the service object we can use to
            // interact with the service.  Because we have bound to a explicit
            // service that we know is running in our own process, we can
            // cast its IBinder to a concrete class and directly access it.
          specialService = ((GetService.LocalBinder)service).specialService();
          logger.debug("Get service connection established: "+specialService.toString());
        }

        public void onServiceDisconnected(ComponentName className) {
            // This is called when the connection with the service has been
            // unexpectedly disconnected -- that is, its process crashed.
            // Because it is running in our same process, we should never
            // see this happen.
          specialService = null;
        }
    };

    @Override
    public boolean execute(Context context) throws Exception {
      // TODO Auto-generated method stub
      logger.debug("Executing Special Command");
      ViewBaseActivity activity = hostActivity = (ViewBaseActivity) context.get(ViewBaseActivity.class);
      Intent intent = new Intent(activity.getApplicationContext(), SpecialService.class);
      activity.bindService(intent, specialServiceConnection, activity.BIND_AUTO_CREATE);
      logger.debug("Binding specialService");
      while(null==specialService){
          Thread.sleep(500);
      }
      logger.debug("Service invoking explicitly");
      specialService.execute();
      logger.debug("Finished with Special Command");
      return false;
    }

    @Override
    protected void finalize() throws Throwable {
        super.finalize();
        if(null!=specialService){
          hostActivity.unbindService(specialServiceConnection);
        }
    }

}

public class SpecialService extends IntentService {

    public SpecialService() {
        super("SpecialService");
    }

    public class LocalBinder extends Binder {
      public SpecialService specialService() {
            // Return this instance of LocalService so clients can call public methods
            return SpecialService.this;
        }
    }

    private final IBinder mBinder = new LocalBinder();

    private PropertiesService propertiesService;

    private ServiceConnection propertiesConnection = new ServiceConnection() {
        public void onServiceConnected(ComponentName className, IBinder service) {
            // This is called when the connection with the service has been
            // established, giving us the service object we can use to
            // interact with the service.  Because we have bound to a explicit
            // service that we know is running in our own process, we can
            // cast its IBinder to a concrete class and directly access it.
            propertiesService = ((PropertiesService.LocalBinder)service).getService();
        }

        public void onServiceDisconnected(ComponentName className) {
            // This is called when the connection with the service has been
            // unexpectedly disconnected -- that is, its process crashed.
            // Because it is running in our same process, we should never
            // see this happen.
            propertiesService = null;
        }
    };

    @Override
    public int onStartCommand(Intent intent, int flags, int startId){
        super.onStartCommand(intent, flags, startId);
        bindService(new Intent(SpecialService.this, PropertiesService.class), propertiesConnection, Context.BIND_AUTO_CREATE);
        logger.debug("Special Service has be requested!");
        return START_STICKY;
    }

    @Override
    public void onCreate(){
        super.onCreate();
    }

    @Override
    public void onDestroy(){
        super.onDestroy();
        unbindService(propertiesConnection);
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        logger.debug("Get Service onHandleIntent has be requested!");
    }

    public void execute() {
        //Do soemthing novel
    }
} 
```

# python - matplotlib 中更漂亮的默认绘图颜色

> ID：15814635
> 
> 赞同：58
> 
> 时间：2013-04-04T14:51:31.053
> 
> 标签：python, matplotlib

matplotlib 中使用的默认颜色（例如：http: [//matplotlib.org/examples/pylab_examples/pie_demo.html](http://matplotlib.org/examples/pylab_examples/pie_demo.html)）有点简单和丑陋。我还注意到，如果您在一个图中绘制超过 5-6 个不同的系列，matplotlib 就会开始重复颜色。

我已经看到了一些来自其他可视化包（默认为其他语言）的华丽图表，它们可以有 5-6 个不同的系列，仅由一种颜色和不同的阴影覆盖。有没有人可以在 matplotlib 中使用好的颜色集？以及让 matplotlib 默认使用它的方法？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-04T15:04:21.473

您可以使用[Matplotlib 的样式表](http://matplotlib.org/users/style_sheets.html)。它是从[mpltools 库](http://tonysyu.github.com/mpltools/index.html)中移植过来的，该库有一个重新定义 matplotlib rc 参数的[样式](http://tonysyu.github.com/mpltools/api/mpltools.style.html)模块。

作为示例，请参阅[ggplot 样式](http://tonysyu.github.com/mpltools/auto_examples/style/plot_ggplot.html)的使用和[Matplotlib 的手册](http://matplotlib.org/users/style_sheets.html)。

![图片](https://tonysyu.github.io/mpltools/_images/plot_ggplot_1.png)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2016-01-03T13:57:11.733

这个问题是 2 年前提出的，而今天为你的情节获得更好的风格要容易得多。您甚至不需要外部软件包。正如@asmaier 在他的评论中提到的那样， mpltools.style 功能已集成到 Matplotlib 1.4 中，因此您可以使用以下方式切换样式：

```
plt.style.use(style_name) 
```

例如：

```
import matplotlib.pyplot as plt
import numpy as np

plt.style.use('ggplot')

num_lines = 6

ax = plt.subplot(111)

for i in range(num_lines):
    x = np.linspace(0,20,200)
    ax.plot(x,np.sin(x)+i)

plt.show() 
```

[![在此处输入图像描述](https://i.stack.imgur.com/8ZIiT.png)](https://i.stack.imgur.com/8ZIiT.png)

您可以列出所有可用的样式：

```
print plt.style.available 
```

在 Matplotlib 1.5 中添加了几种新样式，包括来自 Seaborn 项目的许多样式：

```
plt.style.use('seaborn-dark-palette') 
```

[![在此处输入图像描述](https://i.stack.imgur.com/upzdt.png)](https://i.stack.imgur.com/upzdt.png)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-10-25T14:00:22.497

看看[prettyplotlib](http://olgabot.github.io/prettyplotlib/)一个库——最近朋友们向我指出——它修改了 matplotlib 以更好地与[Edward Tufte](http://www.edwardtufte.com/tufte/)的想法保持一致，以及[Cynthia Brewer](http://www.personal.psu.edu/cab38/)对颜色感知的一些非常仔细研究的工作。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-10-05T14:03:45.233

[Seaborn](http://stanford.edu/~mwaskom/software/seaborn/)包（基于 Matplotlib）具有很好的默认图形样式，我发现这是创建吸引人的颜色循环的好方法。

[他们在这里对调色板进行了很好的讨论： https](https://stanford.edu/~mwaskom/software/seaborn/tutorial/color_palettes.html) ://stanford.edu/~mwaskom/software/seaborn/tutorial/color_palettes.html

以下代码演示了如何为简单的线图自动选择新的 color_cycle：

```
import matplotlib.pyplot as plt
import numpy as np
import seaborn as sns   

num_lines = 6

ax = plt.subplot(111)
ax.set_color_cycle(sns.color_palette("coolwarm_r",num_lines))

for i in range(num_lines):
    x = np.linspace(0,20,200)
    ax.plot(x,np.sin(x)+i)

plt.show() 
```

[![在此处输入图像描述](https://i.stack.imgur.com/gclnY.png)](https://i.stack.imgur.com/gclnY.png)

如果您只想更改线条颜色而不使用其他 seaborn 预设，例如灰色背景，只需 import seaborn with

```
import seaborn.apionly as sns 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-04T14:57:08.913

您可以设置一个`.matplotlibrc`文件。一个真正被大量评论的例子是[here](http://matplotlib.org/users/customizing.html)。在我看来，您要更改的选项是`axes.color_cycle`. 对于如何制作更漂亮的界面，我没有任何建议——这有点太主观了 Stack Overflow ;-)（我对默认设置很满意）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-04T14:57:49.607

您可以使用 matplotlib 的[颜色](http://matplotlib.org/api/cm_api.html#module-matplotlib.cm)图功能。

[这个](https://stackoverflow.com/questions/8931268/using-colormaps-to-set-color-of-line-in-matplotlib)问题就是一个很好的例子。[您可以使用此脚本](http://www.scipy.org/Cookbook/Matplotlib/Show_colormaps)显示您的颜色图选项。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-26T09:21:10.303

如需更丰富的可与 一起使用的颜色`matplotlib`，请查看以美妙的[Wes](https://jiffyclub.github.io/palettable/) [Anderson](https://jiffyclub.github.io/palettable/wesanderson/)调色板为特色的调色板。

```
$ pip install palettable
$ python
>>> from palettable.colorbrewer.qualitative import Dark2_7 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-11T07:00:12.763

我为我的作品使用`ggplot`风格，您可以在此链接[matplotlib.org中查看其他风格的列表](https://matplotlib.org/stable/gallery/style_sheets/style_sheets_reference.html)

用法：

```
import matplotlib.pyplot as plt
plt.style.use('ggplot') 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-01T10:13:26.387

前段时间，我在 matplotx 中创建了[dufte](https://github.com/nschloe/matplotx)，这是 matplotlib 的简约风格。安装

```
pip install matplotx 
```

并与

```
plt.style.use(matplotx.styles.dufte) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/UV4Ng.png)](https://i.stack.imgur.com/UV4Ng.png)

# android - 如何在android中使用文件路径将图像设置为imageView

> ID：15814638
> 
> 赞同：16
> 
> 时间：2013-04-04T14:51:37.003
> 
> 标签：android

我正在使用浏览按钮获取图像的文件路径....之后我想使用文件路径将此图像设置为图像视图

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-04T14:56:12.230

如果`File`你的意思是一个`File`对象，我会尝试：

```
File file = ....
Uri uri = Uri.fromFile(file);
imageView.setImageURI(uri); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-04T14:57:54.083

你可以试试这段代码：

```
imageView.setImageBitmap(BitmapFactory.decodeFile(yourFilePath)); 
```

BitmapFactory 会将给定的图像文件解码为 Bitmap 对象，然后将其设置到 imageView 对象中。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-04T15:00:32.100

要从文件中设置图像，您需要执行以下操作：

```
 File file = new File(Environment.getExternalStorageDirectory()+File.separator + "image.jpg"); //your image file path
 mImage = (ImageView) findViewById(R.id.imageView1);
 mImage.setImageBitmap(decodeSampledBitmapFromFile(file.getAbsolutePath(), 500, 250)); 
```

什么时候`decodeSampledBitmapFromFile`：

```
 public static Bitmap decodeSampledBitmapFromFile(String path,
        int reqWidth, int reqHeight) { // BEST QUALITY MATCH

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(path, options);

    // Calculate inSampleSize
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        options.inPreferredConfig = Bitmap.Config.RGB_565;
        int inSampleSize = 1;

        if (height > reqHeight) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        }

        int expectedWidth = width / inSampleSize;

        if (expectedWidth > reqWidth) {
            //if(Math.round((float)width / (float)reqWidth) > inSampleSize) // If bigger SampSize..
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }

    options.inSampleSize = inSampleSize;

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;

    return BitmapFactory.decodeFile(path, options);
  } 
```

您可以使用数字（在本例中为 500 和 250）来更改`ImageView`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-03T05:52:24.350

要从文件加载图像：

```
Bitmap bitmap = BitmapFactory.decodeFile(pathToPicture); 
```

假设您`pathToPicture`是正确的，然后您可以将此位图图像添加到`ImageView`类似

```
ImageView imageView = (ImageView) getActivity().findViewById(R.id.imageView);
imageView.setImageBitmap(BitmapFactory.decodeFile(pathToPicture)); 
```

# wpf - 合并常见的 WPF 样式

> ID：15814639
> 
> 赞同：6
> 
> 时间：2013-04-04T14:51:39.160
> 
> 标签：wpf, xaml, styles, wpf-4.0

我的 WPF XAML 中有各种 Style 元素，除了数据绑定属性外，它们是相同的，例如：

```
<Style x:Key="HasAlphaStyle" TargetType="TextBlock">
    <Style.Triggers>
        <DataTrigger Binding="{Binding Path=HasAlpha, UpdateSourceTrigger=PropertyChanged}" Value="True">
            <Setter Property="Background" Value="Red"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>                   
        </DataTrigger>
        <DataTrigger Binding="{Binding Path=HasAlpha, UpdateSourceTrigger=PropertyChanged}" Value="False">
            <Setter Property="Background" Value="LightGreen"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="FontWeight" Value="Normal"/>
        </DataTrigger>
    </Style.Triggers>
</Style>

<Style x:Key="HasBetaStyle" TargetType="TextBlock">
    <Style.Triggers>
        <DataTrigger Binding="{Binding Path=HasBeta, UpdateSourceTrigger=PropertyChanged}" Value="True">
            <Setter Property="Background" Value="Red"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>                   
        </DataTrigger>
        <DataTrigger Binding="{Binding Path=HasBeta, UpdateSourceTrigger=PropertyChanged}" Value="False">
            <Setter Property="Background" Value="LightGreen"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="FontWeight" Value="Normal"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

该样式应用于如下控件：

```
<TextBlock Style="{StaticResource HasAlphaStyle}" .../> 
```

有没有办法可以合并我的 HasAlphaStyle 和 HasBetaStyle 以便不必复制属性设置器？两者之间的唯一区别是属性的绑定路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T16:15:49.900

我会创建一个附加属性并在其上使用我的触发器，而不是使用数据触发器。示例代码如下：

附加属性

```
public static class TextBlockBehavior
{
        public static readonly DependencyProperty HasValueProperty = 
            DependencyProperty.RegisterAttached("HasValue", typeof(bool), typeof(TextBlockBehavior),
            new FrameworkPropertyMetadata(true, FrameworkPropertyMetadataOptions.None));

        public static void SetHasValue(DependencyObject depObject, bool value)
        {
            depObject.SetValue(HasValueProperty, value);
        }

        public static bool GetHasValue(DependencyObject depObject)
        {
            return (bool)depObject.GetValue(HasValueProperty);
        }
} 
```

然后你的组合风格会变成

```
<Style x:Key="HasValueStyle" TargetType="TextBlock">
    <Style.Triggers>
        <Trigger Property="behaviors:TextBlockBehavior.HasValue" Value="True">
            <Setter Property="Background" Value="Red"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>                   
        </Trigger>
        <Trigger Property="behaviors:TextBlockBehavior.HasValue" Value="False">
            <Setter Property="Background" Value="LightGreen"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="FontWeight" Value="Normal"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

你可以把你的文本块写成

```
<TextBlock Style="{StaticResource HasValueStyle}"
           behaviors:TextBlockBehavior.HasValue="{Binding Path=HasAlpha, UpdateSourceTrigger=PropertyChanged}"            .../>

<TextBlock Style="{StaticResource HasValueStyle}"
           behaviors:TextBlockBehavior.HasValue="{Binding Path=HasBeta, UpdateSourceTrigger=PropertyChanged}"            .../> 
```

# sql - SQL 查询检索我想要的值，存储到单行中

> ID：15814640
> 
> 赞同：1
> 
> 时间：2013-04-04T14:51:41.537
> 
> 标签：sql, migration, dynamics-crm-2011, data-migration, goldmine

我正在尝试使用 Starfish ETL 从 Goldmine 5.5 迁移到 MCRM 2011。

问题是 Goldmine 数据库中有一个名为[Mailbox](http://www.enigmaware.co.uk/goldmine/tabledefs_85_9/mailbox.php)的表，其中我需要迁移传入电子邮件的所有信息都存储在名为 rfc822（完整标题和正文消息）的单行中。即使在其他表中也没有发件人/收件人/等行。

我在我的 ETL 软件中将此查询用作 Origin 以从原始数据库 (Goldmine) 获取我需要的信息，但 Starfish 提供的默认地图在我的情况下不起作用。

```
SELECT  ch.*, c1.PHONE1, mb.RFC822 
FROM    CONTHIST ch 
        INNER JOIN CONTACT1 c1 
            ON ch.ACCOUNTNO=c1.ACCOUNTNO 
        INNER JOIN MAILBOX mb 
            ON ch.recid=mb.LINKRECID 
WHERE   ch.RECTYPE='MI' 
```

之后，我可以映射目标 MCRM 电子邮件表并添加函数字段（vbscript、C#）。

大多数情况下，一旦作业完成，发件人/收件人将恢复为错误值（例如密件抄送字段中的用户）。

我想知道的是：

*   如何提取存储在 rfc822 行中的 CC 和 BCC 字段
*   有 HTML 和纯文本格式的电子邮件，唯一的区别方法是在这一行中查找。此外，Dynamics 不会以相同的方式存储它。
*   如何使用 SQL 检索发件人和收件人？

我认为必须有一种方法可以使用 SQL 查询来完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T07:16:09.503

GoldMine 5.5（！哇） - 我的哀悼（事实上，机器人，你很幸运，因为在未来版本的 GoldMine rfc822 字段也是加密的）

我看到两个选项可以解决您的问题（都需要 SQL Server 2005 或更高版本）：

1.  与 SQLCLR 集成以能够使用正则表达式来解析 rfc822 字段
2.  或使用 GoldMineAPI（如果您想从 SQL 使用 GoldMine API，则与 SQLCLR 集成）通过业务逻辑函数获取电子邮件

* * *

我有两个选项的一些例子：

例如，

# 使用 SQLCLR 解析 HTML 的示例

*我写了一次它来解析 GoldMine 9.0 的 ContHist 注释*

**SQLCLR 函数 (C#)**

```
[SqlFunction()]
public static SqlString RemoveHTML(SqlString html)
{
    if (!html.IsNull)
    {
        string remove_style = @"\<STYLE((\S|\ |\s)+?)\<\/STYLE\>";
        string remove_html = @"(?></?\w+)(?>(?:[^>'""]+|'[^']*'|""[^""]*"")*)>";

        string result = Regex.Replace(html.Value, remove_style, string.Empty, RegexOptions.IgnoreCase);
        result = Regex.Replace(result, remove_html, string.Empty, RegexOptions.IgnoreCase);

        return result;
    }
    else return new SqlString();
} 
```

**安装到数据库**

```
USE YourDB
sp_configure 'show advanced options', 1;
GO
RECONFIGURE;
GO
sp_configure 'clr enabled', 1;
GO
RECONFIGURE;
GO

ALTER DATABASE YourDB SET TRUSTWORTHY ON
----
CREATE ASSEMBLY GMSQLCLRAPI
FROM 'DRIVE:\Path\To\DLL\dll_name.dll'
with permission_set = UNSAFE;
--
CREATE FUNCTION RemoveHTML(@html NVARCHAR(MAX))
RETURNS NVARCHAR(MAX) WITH EXECUTE AS CALLER
AS EXTERNAL NAME GMSQLCLRAPI.[CLSQLCLR.GMSQLCLRAPI].RemoveHTML 
```

**用法**

```
select dbo.RemoveHTML(rfc822) from Mailbox 
```

使用这种方法，您可以将 SQLCLR 函数中的正则表达式替换为您自己的，它将为您解析收件人。

# 以及使用 GoldMine API 的示例

*代码其实挺多的，我就提供几块*

**С# 包装函数调用 ReadMail GoldMine API 函数**

```
public Dictionary<string, string> ReadMail(Dictionary<string, string> NVDictionary)
{
    const string failure = "Failure to read email\n";
    Int32 res;
    Dictionary<string, string> result = null;

    IntPtr nvc = import.GMW_NV_Create();
    if (nvc == null) throw (new CLGMAPIException(failure + "Unable to create name/value container"));
    try
    {
        foreach (KeyValuePair<string, string> kvp in NVDictionary)
        {
            import.GMW_NV_SetValue(nvc, kvp.Key, kvp.Value);
        }

        res = import.GMW_Execute("ReadMail", nvc);

        if (res > 0)
        {
            int count = import.GMW_NV_Count(nvc);
            result = new Dictionary<string, string>(count);
            IntPtr ptr;
            string name;

            for (int i = 0; i < count; i++)
            {
                ptr = import.GMW_NV_GetNameFromIndex(nvc, i);
                name = Marshal.PtrToStringAnsi(ptr);

                ptr = import.GMW_NV_GetValue(nvc, name, string.Empty);
                result[name] = Marshal.PtrToStringAnsi(ptr);
            }
        }
    }
    finally
    {
        import.GMW_NV_Delete(nvc);
    }

    switch (res)
    {
        case 0: throw (new CLGMAPIException(failure));
        case -1: throw (new CLGMAPIException(failure + "Message is private"));
        case -2: throw (new CLGMAPIException(failure + "Message not found, or cannot be loaded"));
        case -3: throw (new CLGMAPIException(failure + "Exception"));
        default:
            break;
    }

    return result;
} 
```

**包装器使用**

```
public GoldMineEmails(GoldMineAPI api, DataTable mailbox)
{
    foreach (DataRow emailRow in mailbox.Rows)
    {
        var dict = new Dictionary<string, string>(3);
        dict["MboxRecID"] = emailRow["recid"].ToString();
        dict["History"] = "1";

        try
        {
            var res = api.ReadMail(dict);

            var email = new GoldMineEmail(res["To"], res["Cc"], res["Bcc"], res["Outgoing"])
            {
                body = res["Body"],
                From = res["From"],
                subject = res["Subject"],
                user = res["User"]
            };

            this.Add(email);
        }
        catch
        {
            throw;
            // error logging
        }
    }
} 
```

我希望这有帮助。不要犹豫与我联系 - 我可以向您发送源代码示例

# api - RHEL 第 5 版开发人员指南在哪里？

> ID：15814641
> 
> 赞同：0
> 
> 时间：2013-04-04T14:51:43.303
> 
> 标签：api, redhat, rhel, abi, rhel5

我在以下位置找到了 RHEL 版本 6 的“开发人员指南”：[https](https://access.redhat.com/knowledge/docs/Red_Hat_Enterprise_Linux/) ://access.redhat.com/knowledge/docs/Red_Hat_Enterprise_Linux/ --> 单击开发人员指南链接。

但是，当您进一步向下滚动到 RHEL 版本 5 文档时，我找不到等效的开发人员指南。**是否有针对 RHEL 5 文档的等效开发人员指南？**

**如果 RHEL 版本 5 文档中没有等效的开发人员指南，那么 RHEL 5 文档/部分讨论的“应用程序兼容性”（涵盖跨主要/次要版本的 API 和 ABI 兼容性*）？**

* 注意：在 RHEL 6 中，应用程序兼容性包含在开发人员指南的第 3.2 节中。（[RHEL](https://access.redhat.com/knowledge/docs/Red_Hat_Enterprise_Linux/) --> 版本 6 -->[开发人员指南](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Developer_Guide/index.html)-->[第 3.2 节](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Developer_Guide/lib.compatibility.html)）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:21:09.557

Red Hat Enterprise Linux 5 没有开发人员指南，也没有直接的等价物：开发人员指南是与 Red Hat Enterprise Linux 6 一起作为一本全新的书引入的。但是，有[一篇知识库文章](https://access.redhat.com/site/articles/119073)提供了指向[Red Hat Enterprise Linux 应用程序兼容性规范](http://www.redhat.com/f/pdf/rhel/RHEL6_App_Compatibility_WP.pdf)文档的链接。

# jms - 如何向服务集成总线目标主题空间发送消息

> ID：15814642
> 
> 赞同：0
> 
> 时间：2013-04-04T14:51:45.273
> 
> 标签：jms, websphere, websphere-portal, jms-topic

我是服务集成总线的新手。我已经配置了一个总线，并将我的 websphere 门户服务器添加为总线成员。接下来已经创建了一个主题连接工厂，并在这里选择了创建的总线，我想向服务集成总线默认主题空间发送消息。我不确定如何使用 JMS 向默认主题空间发送消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:54:51.857

唯一剩下的就是创建一个新主题（**Resources > JMS > Topics > New**），在其中选择您要使用的主题空间，在您的情况下是**Default.Topic.Space**。之后，您可以使用如下代码向您的主题发送消息：

```
// Get the connection factory
connFactory=(ConnectionFactory)initCtx.lookup("jms/mycf");
// Get the destination used to send a message
destination = (Destination)initCtx.lookup("jms/mytopic");

Connection conn = connFactory.createConnection();
// Create a non-transacted session
Session session = conn.createSession(false, Session.AUTO_ACKNOWLEDGE);
// Create the message producer
MessageProducer msgProducer = session.createProducer(destination);
// Create the message
TextMessage txtMsg = session.createTextMessage("Hello There!!!");

 // Send the message
 msgProducer.send(txtMsg);
 session.close();
 conn.close(); 
```

# api - 如何将 MongoEngine 文档对象转换为 BSON？

> ID：15814643
> 
> 赞同：0
> 
> 时间：2013-04-04T14:51:47.023
> 
> 标签：api, mongoengine, bson

MongoEngine 中的 Document 类似乎没有“to_bson”函数：

```
from mongoengine import *

class MyDoc(Document):
    foo = StringField()
    bar = IntField()

doc = MyDoc.objects.create(foo=u"Hello World")

print "Document BSON length is:", len(doc.to_bson())  # fails : no "to_bson" 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:40:14.670

您可以使用`doc.to_mongo()`获取 dict 和`pymongo.bson.BSON.from_dict`（[http://api.mongodb.org/python/1.7/api/pymongo/bson.html](http://api.mongodb.org/python/1.7/api/pymongo/bson.html)获取 bson。MongoEngine 是 pymongo 的包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T08:41:10.710

关于上面的答案。请注意，现在不推荐使用 BSON.from_dict()。

“已弃用 - from_dict 已重命名为编码。

在 1.9 版更改：不推荐使用以支持 encode()"

引用自[http://api.mongodb.org/python/1.10/api/bson/index.html](http://api.mongodb.org/python/1.10/api/bson/index.html)

# ios - 如何在 MapView 中显示没有动画的用户位置

> ID：15814646
> 
> 赞同：0
> 
> 时间：2013-04-04T14:51:52.227
> 
> 标签：ios, objective-c, mkmapview

我使用此代码将 MKMapView 转换为 UIImage：

```
+(UIImage *)imageFromMapView:(MKMapView *)mapView {

    BOOL showsUserLocation = mapView.showsUserLocation; //save flag
    [mapView setShowsUserLocation:NO]; //hide blue bubble for taking picture

    CGRect frame = mapView.frame;
    if ([[UIScreen mainScreen] respondsToSelector:@selector(displayLinkWithTarget:selector:)] &&
        ([UIScreen mainScreen].scale == 2.0)) {
        frame.size.width *= 2;
        frame.size.height *= 2;
    }
    //    UIGraphicsBeginImageContext(frame.size);
    UIGraphicsBeginImageContextWithOptions((frame.size), YES, 0.0);
    [mapView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *mapImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    DLog(@"got mapImage size:%@",NSStringFromCGSize(mapImage.size));

    [mapView setShowsUserLocation:showsUserLocation];//restore flag
    return mapImage;
} 
```

我每次移动 MapView 中心位置时都会调用此方法，因此每一步都会出现黄色气泡和整个动画。这很烦人。

是否可以在没有动画的情况下显示当前用户位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:40:44.337

我不这么认为，并且`MKMapView`每次用户移动可见地图时，如果没有用户位置以便从中获取快照，则创建一个新的离线可能会太昂贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:33:46.717

简短的回答：你不能 - 没有一些努力:)

长答案：除非您伪造整个事物并为真实位置返回空白注释视图并使用位置管理器更新另一个自定义注释，否则您不能。

### 脚步：

1 - 如果`viewForAnnotation`要求 a `UIView`，`MKUserLocation`返回一个空白但不为零！使用一个空的 UIView。
*nil 会显示点。*

**现在从该位置返回 ANYTHIN BUT nil`viewForAnnotation`将禁用跟踪：这是地图工具包中的一个严重错误**

2 - 所以你需要`CLLocationManager`自己启动，添加一个 OWN`MKAnnotation`以`MKMapView`显示 userLocation。
*您可以像对待任何 MKAnnotation 一样在`locationDidUpdate`被触发时更新其坐标*

# r - 在一行中找到一个特定的字符并阅读它？

> ID：15814649
> 
> 赞同：1
> 
> 时间：2013-04-04T14:52:00.357
> 
> 标签：r

我对此有点问题。我拥有的每个文件的标题如下所示：

```
*COUNTRY : US                                     *
***************************************************
*CAPITAL : Washington, D.C, district of columbia  *
*Language: English                                *  
***************************************************
V1 V2 V3 
```

然后是我的数据变量（V1，V2，...）。我想要做的是只从每个文件中获取语言（英语、法语、西班牙语......）并将其放入我的情节脚本中。因为当我阅读文件时，我会跳过这些行`read.table`，否则`read.table`将无法工作。希望你理解我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:57:30.343

你可以使用这样的东西：

```
## File name
filename <- "/tmp/temp.txt"
## Read the 5 first lines
header <- readLines(filename, n=5)
## Grep the language field in these lines
result <- grep("^\\*Language: .*$", header, value=TRUE)
## Extract the language string
sub("^\\*Language: ", "", result) 
```

请注意，如果 Language 字段始终位于第 4 行，您可以简单地执行以下操作：

```
filename <- "/tmp/temp.txt"
header <- readLines(filename, n=4)
sub("^\\*Language: ", "", header[4]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:08:13.020

我会打开一个[文件](http://help.r-enthusiasts.com/library/base/html/connections.html)连接，读取标题数据，然后继续使用[read.table](http://help.r-enthusiasts.com/library/utils/html/read.table.html)来读取文件的其余部分。这样，您只需读取一次文件。像这样的东西：

```
f <- file( "data.txt", open = "r" )
language <- NULL
while( TRUE ){
    line <- readLines( f, 1L )
    if( grepl( "*Language: ", line ) ){
        language <- sub( "*Language: (.[*])", "\\1", line )    
    }
    if( !is.null(language) && grepl("^[*][*]", line) ) break
}
read.table( f, header = TRUE )
close( f ) 
```

# mysql - INDEX 如何减慢 LIKE 查询？

> ID：15814652
> 
> 赞同：1
> 
> 时间：2013-04-04T14:52:05.693
> 
> 标签：mysql, indexing

这既不是[MySQL 索引减慢查询](https://stackoverflow.com/questions/10931143/mysql-index-slowing-down-query)的副本，也不是[按索引查询的慢速搜索 LIKE% MYSQL](https://stackoverflow.com/questions/12745681/slow-search-by-index-query-like-mysql)

在一个非常简单的表上，我尝试了一个非常简单的查询，有无特定索引。

表（40 000 行）：

```
id                      int(11)     
shipping_address_id     int(11)     
billing_address_id      int(11)     
label                   varchar(100)
code                    varchar(15) 
email                   varchar(100) 
```

询问 ：`SELECT email FROM table WHERE email LIKE "%yahoo%"`

如果没有“电子邮件”上的索引，则需要 0.0035 秒。然而，有了这个 INDEX，它需要 0.021 秒，慢了 7 倍。

然而，同样的 INDEX 确实将相等查询加速了 50 倍 ( `WHERE email = "me@yahoo.com"`)。

那么，为什么`LIKE`查询会受到 INDEX 的负面影响？

**编辑错字：**最初陈述的查询`LIKE "yahoo"`应该`LIKE "%yahoo%"`是 ，我很抱歉。

**为清晰而编辑：**该表是 InnoDB，我正在比较相同查询的速度。在第一种情况下（“LIKE”情况），在比较字段上使用 INDEX 时，查询速度会慢 7 倍。在第二种情况下（“=”），使用 INDEX 的查询速度提高了 50 倍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:02:28.453

*索引隐式地使用比较运算符*解决（并加速）查询：=、<、>。如果你在`email`字段上有一个索引，并且有一个`LIKE`查询，MySQL*仍然*需要检索索引中的**所有**元素，并将正则表达式应用于它们。

如果查询是

```
 WHERE email LIKE 'yahoo%com' 
```

您可以通过观察`email`必须在 'yahoo' 和 'yahoo[' 之间来加快速度（假设 [ 按字典顺序在 z 之后，并且不能出现在该`email`字段中）。然后将查询更改为

```
WHERE (email BETWEEN 'yahoo' AND 'yahoo[') AND email LIKE 'yahoo%com' 
```

会产生好处，因为索引会快速预先选择一组较小的行，*然后*只针对这些行运行正则表达式（在已经可用的字段上，因为它在索引中，所以不需要表查找） .

但在这种情况下，实际上，*MySQL 必须进行全表扫描*；除了它是在*index*上这样做的。这样做的成本实际上可能**高于**“真正的”表扫描。在某些情况下，MySQL 会意识到这一点，并且您会看到该索引实际上*根本没有*被查询使用（取决于它最近被分析的时间、它的大小和其他因素），并且 MySQL 更喜欢使用完整的索引。表扫描。

索引可能通过收集查询所需的数据来帮助您的另一种情况也不适用，因为您只要求该`email`字段，这是正在进行的一个计算。因此，该指数再次没有产生任何性能提升。

如果你想要一个加速这种 的索引`WHERE`，你需要一个`FULLTEXT`索引，而不是一个“普通”的索引。

# winmerge - WinMerge 在哪里？

> ID：15814663
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:52:25.507
> 
> 标签：winmerge

不好了。

[http://www.winmerge.org/](http://www.winmerge.org/)

和

[http://winmerge.org/](http://winmerge.org/)

和

[http://manual.winmerge.org/Command_line.html](http://manual.winmerge.org/Command_line.html)

正在提供有关**“我如何摆脱债务”的**链接............

:<

以下是我发现的一些“替代品”：

[http://sourceforge.net/projects/winmerge/](http://sourceforge.net/projects/winmerge/)

[https://bitbucket.org/jtuc/winmerge2011/overview](https://bitbucket.org/jtuc/winmerge2011/overview)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:59:04.830

您现在可以访问项目网站[http://sourceforge.net/projects/winmerge/ 。](http://sourceforge.net/projects/winmerge/)

[https://bitbucket.org/jtuc/winmerge2011/overview](https://bitbucket.org/jtuc/winmerge2011/overview)是源存储库（作为 GitHub）

# image-processing - 用于数字图像处理的视频帧和图像文件之间的区别

> ID：15814666
> 
> 赞同：0
> 
> 时间：2013-04-04T14:52:32.183
> 
> 标签：image-processing

在一篇文章（Evaluation of Background Subtraction Techniques for Video Surveillance，S.Brutzer/B.Höferlin，G. Heidemann）中，帧类型被视为一项挑战。来自视频或标准的帧之间是否有任何区别。用于图像处理的.bmp 文件？？？

Adem Metin ÇALI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:22:51.823

通常，图像是来自任何地方的图像。
由于视频中的伪影，图像处理可能存在差异 - 视频文件通常以改变图片细节的方式压缩。

“帧”这个词在视频流中具有更多的技术含义，尤其是在每个图像都是根据前一帧和下一帧之间的差异计算出来的 - 但您可以将帧和图像视为相同的。

# javascript - SVG AnyElement.remove()

> ID：15814675
> 
> 赞同：1
> 
> 时间：2013-04-04T14:52:42.350
> 
> 标签：javascript, svg

someElmntInSVGDom.remove() 的跨浏览器兼容替代方案是什么？除了在 Chrome 中，它似乎不起作用。

我不是在寻找库函数，而是在寻找一种用纯 JavaScript 实现它的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:12:39.507

```
someElmntInSVGDom.parentNode.removeChild(someElmntInSVGDom) should do it. 
```

此处的文档[removeChild](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild)

# r - 如何计算在 R 中聚合时使用的像素数？

> ID：15814679
> 
> 赞同：-2
> 
> 时间：2013-04-04T14:52:57.857
> 
> 标签：r, aggregate

我有两个具有 (1440*720) 相同尺寸的二进制文件：我想根据第二个文件值（间隔）取第一个文件的平均值，这个文件的值范围从 1 到 7。只要值在0-1之间的第二个文件范围内，计算第一个文件中对应的平均值并返回结果，对2-3,3-4,5-6,7-8做同样的事情。没有数据值被分配为不适用。

1-读取第一个文件：

```
conne <- file("C:\\corr.bin","rb")
corr <- readBin(conne, numeric(), size=4, n=1440*720, signed=TRUE)
#please assume a matrix of 720*1440 dimnsions 
```

2-读取第二个文件：

```
conne1 <- file("C:\\use.bin","rb")
cus <- readBin(conne1, numeric(), size=4, n=1440*720, signed=TRUE)
#please assume a matrix of 720*1440 dimnsions 
```

计算：

```
cusBREAK <- cut(cus,1:8))
aggregate(corr, list(cusBREAK), mean, na.rm=TRUE) 
```

这很好，但我还需要知道使用的像素数以及占总像素数的百分比。

```
 Results 
  Group.1   x    number of pixels    percentage (out of the total number of pixcels)
 1   (0,1] 0.5      ?                       ?
 2   (1,2] 0.23     ?                       ?
 3   (2,3] 0.65     ?                       ?
 4   (3,4] 0.3      ?                       ?
 5   (4,5] 0.36 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:34:55.283

使您在[聚合](http://help.r-enthusiasts.com/library/stats/html/aggregate.html)中使用的函数返回多个值。例如：

```
aggregate(corr, list(cusBREAK), function(values){ 
   c( "x"       = mean(values), 
      "pixels"  = length(values), 
      "percent" = length(values) / length(corr) * 100 
   ) 
}, na.rm=TRUE) 
```

# android - 为什么我的标题使用自定义字体不在我的 ActionBar 中垂直居中？

> ID：15814680
> 
> 赞同：6
> 
> 时间：2013-04-04T14:52:58.700
> 
> 标签：android, fonts, actionbarsherlock

在尝试修改我的`ActionBar`标题的字体时，我找到了一个建议调整via的[答案](https://stackoverflow.com/questions/8607707/how-to-set-a-custom-font-in-the-actionbar-title/15181195#15181195)。虽然它的工作原理如答案中所述，但该位置似乎偏离了垂直居中。`Typeface``SpannableString`

![标题未垂直居中的屏幕截图](https://i.stack.imgur.com/4HBSW.png)

我已经尝试过使用两种不同的字体，OpenType (Roundhand) 和 TrueType (Billabong)。此外，我已经在运行 2.3.3 的较旧 Gingerbread 设备（屏幕截图来自）上以及通过运行 4.2 的较新 Jelly Bean 设备上进行了尝试。该项目使用了 ActionBarSherlock，因此是我最后的理论罪魁祸首。我还调整了字体大小，希望它稍微居中，但我知道这只不过是一个 hack，并没有解决手头的最终问题。

有了这个，为什么我的标题没有正确居中，我该如何纠正它？如果有一种方法可以根据上面引用的已实施解决方案调整对齐方式，那肯定就足够了，即使 ActionBarSherlock 是罪魁祸首。知道罪魁祸首是什么以及为什么会发生这种情况是答案的一部分，而不仅仅是提供解决方法。

**更新：**

下面的屏幕截图使用了*Show layout bounds*。请注意，为了利用*显示布局边界*，该设备显然正在运行 Jelly Bean，而之前的屏幕截图来自 Gingerbread 设备。无论哪种情况，问题都是一样的。

![在此处输入图像描述](https://i.stack.imgur.com/lFVZX.png)

**更新：**

如果我`Typeface.DEFAULT`在调用`setSpan`边界和对齐时使用它们应该出现的情况。

![在此处输入图像描述](https://i.stack.imgur.com/bHupp.png)

**更新：**

在尝试第三种字体时，问题似乎实际上与字体有关。

![在此处输入图像描述](https://i.stack.imgur.com/f2PN6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T16:26:27.700

这听起来真的很愚蠢，但我花了 1 个小时才发现我在标题下方有一个副标题，它被设置为操作栏背景的颜色，所以它是不可见的。

也许这会帮助某人，某处:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-29T18:04:40.117

如果您设置了自定义视图，则可以进入 xml 并将重力设置为居中。

# ruby-on-rails - Rails 资产未正确编译

> ID：15814682
> 
> 赞同：0
> 
> 时间：2013-04-04T14:53:03.073
> 
> 标签：ruby-on-rails, asset-pipeline

我今天在使用 Ruby on Rails 时遇到了一个令人不安的问题。我的资产没有被编译：我的意思是即使使用asset:precompiled，它们也没有被编译。

我相信这将更好地说明问题。预编译资产后，/public/assets/application.js 如下所示：

```
// This is a manifest file that'll be compiled into including all the files listed below.
// Add new JavaScript/Coffee code in separate files in this directory and they'll automatically
// be included in the compiled file accessible from http://example.com/assets/application.js
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require twitter/bootstrap
//= require_tree .
; 
```

css也是如此。该项目在其他计算机上运行良好，所以我怀疑我的配置在这里有问题。但是什么可能导致这种问题呢？Rails 并不是不尝试预编译，而是当他得到文件时，他只是将它们复制到资产文件夹而不预编译它们。

关于如何解决这个问题的任何线索？

编辑：添加资产输出：预编译

```
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/home/plaristote/.rvm/rubies/ruby-2.0.0-p0/bin/ruby /home/plaristote/.rvm/gems/ruby-2.0.0-p0@visibleo_commApp/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
/home/plaristote/.rvm/rubies/ruby-2.0.0-p0/bin/ruby /home/plaristote/.rvm/gems/ruby-2.0.0-p0@visibleo_commApp/bin/rake assets:precompile:nondigest RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:nondigest (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:nondigest 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:06:38.810

检查你是否在 config/enviroments/production.rb 中有这个：

# 禁用 Rails 的静态资源服务器（Apache 或 nginx 已经这样做了）

config.serve_static_assets = false

# 压缩 JavaScript 和 CSS

config.assets.compress = true

# 如果预编译资产丢失，不要回退到资产管道

config.assets.compile = false

# 为资产 URL 生成摘要

config.assets.digest = true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T13:55:50.497

我有完全相同的问题。在看到这个问题之前，我最近在生产环境中将 Ruby 升级到了 2.0.0。通常情况下，预编译需要几分钟，但有了这个问题，它只需要几秒钟并且不会产生错误。

由于我使用 RVM 管理 Ruby，我能够轻松切换回 1.9.3 并重新尝试预编译。当我重新尝试使用 Ruby 1.9.3 进行预编译时，我收到了有关丢失文件的错误，这些错误都与第三方 gem CSS 中的错误有关。在我手动修复这些之后，预编译成功（使用 1.9.3）。

但是，我没有尝试切换回 Ruby 2.0.0 并在修复错误后进行预编译——这是一个正在停机的生产服务器，所以一旦我让它恢复运行，我就没有更多的时间了。但我的理论是，如果我切换回 2.0.0，预编译就会成功。我可能会在计划的停机时间内尝试确认这一点并更新此答案。

因此，似乎与 Ruby 2.0.0 和预编译任务没有显示错误存在某种关系。

# php - 多维数组上使用的循环内循环可以对数据进行分组吗？

> ID：15814691
> 
> 赞同：0
> 
> 时间：2013-04-04T14:53:25.060
> 
> 标签：php, arrays, loops, multidimensional-array

我正在尝试从多维数组中输出分组数据。考虑最高级别的数组键“组”，然后在组内是单独的搜索行。

例如`$group[ 0 ][ 1 ]`将是“第 1 组，第 1 行”。

我想显示每个组中的所有行，然后通过插入 ' `<hr />`' 标记来表示该组已更改。目前第一组正确显示，然后显示 hr 标签，但第二组结果不显示。我的循环内循环方法错误吗？是否可以使用这样的多维数组？谢谢！！

我的数组如下所示：

```
Array
(
[0] => Array
    (
        [0] => stdClass Object
            (
                [name] => testing
                [searchID] => 131
                [lineID] => 190
                [searchString] => 1
            )

        [1] => stdClass Object
            (
                [name] => testing
                [searchID] => 131
                [lineID] => 191
                [searchString] => 2
            )

        [2] => stdClass Object
            (
                [name] => testing
                [searchID] => 131
                [lineID] => 192
                [searchString] => 3
            )

        [3] => stdClass Object
            (
                [name] => testing
                [searchID] => 131
                [lineID] => 193
                [searchString] => 4
            )

    )

[1] => Array
    (
        [4] => stdClass Object
            (
                [name] => test2
                [searchID] => 132
                [lineID] => 199
                [searchString] => 1
            )

        [5] => stdClass Object
            (
                [name] => test2
                [searchID] => 132
                [lineID] => 200
                [searchString] => 2
            )

    )

) 
```

我的代码如下所示：

```
 $x = 0;
 $y = 0;
 while( $x < count( $groups ) )
 {
 while( $y < count( $groups[ $x ] ) )
 {
     //display each single search string
    echo $groups[ $x ][ $y ]->searchString.'<br>';
    $y++; 
 }
 echo '<hr>';
 $x++;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:06:11.497

你可以试试

```
foreach ( $groups as $group ) {
    foreach ( $group as $var ) {
        echo $var->searchString, "<br />";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:02:25.450

您需要`y`在第一个循环内重置。

```
$x = 0;
while( $x < count( $groups ) )
{
    $y = 0;
    while( $y < count( $groups[ $x ] ) )
    {
        //display each single search string
        echo $groups[ $x ][ $y ]->searchString.'<br>';
        $y++; 
    }
     echo '<hr>';
     $x++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:06:53.567

查看您的示例数组，您的第二组的 y 值应该从 4 开始并循环直到达到 6。

我建议您使用 foreach 循环。[http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

您的代码如下所示：

```
foreach ( $groups as $gKey => $gValue )
{
    foreach ( $gValue as $key => $value )
    {
        echo $groups[$gKey][$key]->searchString . "<br />";
        // or $value->searchString . "<br />";
    }
    echo "<hr />";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T15:07:41.500

尝试foreach：

```
foreach ($groups as $x => $group )
{
    foreach ($group as $y => $subGroup )
    {
        echo $subGroup->searchString . '<br>';
    }
    echo '<hr>';
} 
```

# javascript - OpenLayers setCenter 将无法正常运行

> ID：15814693
> 
> 赞同：0
> 
> 时间：2013-04-04T14:53:31.873
> 
> 标签：javascript, openlayers

我将 OpenLayers 用于地图，当我加载它时，无论我将 setCenter 更改为什么，它总是以 0,0 为中心。

```
 var map, baseLayer;
    var options = {numZoomLevels: 7, isBaseLayer: true,};
    function collegeLaneInit()
    {

        map = new OpenLayers.Map('map');            
        baseLayer = new OpenLayers.Layer.Image("College Lane","college-lane-large.png", 
        new OpenLayers.Bounds(-1000, -1000, 1000, 1000),
        new OpenLayers.Size(2000,2000), options);
        map.addLayer(baseLayer);

        var center = new OpenLayers.LonLat(500,500);
        map.setCenter(center ,1);  

        map.addControl(new OpenLayers.Control.LayerSwitcher());
        map.zoomToMaxExtent();
        map.addControl(new OpenLayers.Control.MousePosition());

    } 
```

我不确定它为什么这样做。谁能发现我遗漏的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:16:45.450

```
map.zoomToMaxExtent(); 
```

是你的冒犯线，把它注释掉，如果你缩小得足够远，你总是会在中心结束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:13:19.463

您应该提供有效的纬度和经度值（[-180:180] 中的 Lon；[-90:90] 中的 Lat），因为 openlayers 中的默认投影是`EPSG:4326`（[参考](http://dev.openlayers.org/apidocs/files/OpenLayers/Map-js.html#OpenLayers.Map.projection)）。 ~~此外，您需要一个[基础层](http://dev.openlayers.org/apidocs/files/OpenLayers/Map-js.html#OpenLayers.Map.baseLayer)才能使其工作，或者从地图服务器加载您的图像。~~（您设置为基础层）。您的图像是否有地理参考？

# firefox - Selenium WebDriver 无法与 Firefox 20 连接

> ID：15814695
> 
> 赞同：10
> 
> 时间：2013-04-04T14:53:40.277
> 
> 标签：firefox, selenium-webdriver, launch

我正在使用 selenium-server-standalone-2.28.0.jar 。使用以下命令启动集线器并启动侦听器

```
"C:\Program Files (x86)\Java\jre7\bin\Java.exe" -jar selenium-server-standalone-2.28.0.jar -role webdriver -hub http://localhost:4444/grid/register -port 5557 -browser "browserName=firefox",maxInstances=5,platform=WINDOWS,javaScriptEnabled=true,TAKES_SCREENSHOT=true 
```

打开一个空白的 Firefox 窗口，然后显示以下错误：

```
Execute
System.InvalidOperationException: Unable to connect to host 127.0.0.1 on port 7055 after 45000 ms. Firefox console output:
*** LOG addons.manager: Application has been upgraded
*** LOG addons.xpi: startup
*** LOG addons.xpi: Skipping unavailable install location app-system-local
*** LOG addons.xpi: Skipping unavailable install location app-system-share
*** LOG addons.xpi: Ignoring file entry whose name is not a valid add-on ID:         C:\Users\PR~1.GRO\AppData\Local\Temp\anonymous768293325561108937webdriver-profile\extensions\webdriver-staging
*** LOG addons.xpi: checkForChanges
*** LOG addons.xpi-utils: Opening database
*** LOG addons.xpi-utils: Creating database schema
*** LOG addons.xpi: New add-on fxdriver@googlecode.com installed in app-profile
*** Blocklist::_loadBlocklistFromFile: blocklist is disabled
*** LOG addons.xpi: New add-on {972ce4c6-7e08-4474-a285-3208198ce6fd} installed in app-global
*** LOG addons.xpi: New add-on fiddlerhook@fiddler2.com installed in winreg-app-global
*** LOG addons.xpi: New add-on avg@toolbar installed in winreg-app-global
*** LOG addons.xpi: New add-on web2pdfextension@web2pdf.adobedotcom installed in winreg-app-global
*** LOG addons.xpi: Updating database with changes to installed add-ons
*** LOG addons.xpi-utils: Updating add-on states
*** LOG addons.xpi-utils: Writing add-ons list
*** LOG addons.manager: shutdown
*** LOG addons.xpi: shutdown
*** LOG addons.xpi-utils: shutdown
*** LOG addons.xpi-utils: Database closed
*** LOG addons.xpi: startup
*** LOG addons.xpi: Skipping unavailable install location app-system-local
*** LOG addons.xpi: Skipping unavailable install location app-system-share
*** LOG addons.xpi: Ignoring file entry whose name is not a valid add-on ID: C:\Users\PR~1.GRO\AppData\Local\Temp\anonymous768293325561108937webdriver-profile\extensions\webdriver-staging
*** LOG addons.xpi: checkForChanges
*** LOG addons.xpi: No changes found

at OpenQA.Selenium.Remote.RemoteWebDriver.UnpackAndThrowOnError(Response errorResponse) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\RemoteWebDriver.cs:line 1002
at OpenQA.Selenium.Remote.RemoteWebDriver.Execute(String driverCommandToExecute, Dictionary`2 parameters) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\RemoteWebDriver.cs:line 844
at OpenQA.Selenium.Remote.RemoteWebDriver.StartSession(ICapabilities desiredCapabilities) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\RemoteWebDriver.cs:line 809
at OpenQA.Selenium.Remote.RemoteWebDriver..ctor(ICommandExecutor commandExecutor, ICapabilities desiredCapabilities) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\RemoteWebDriver.cs:line 85
at OpenQA.Selenium.Remote.RemoteWebDriver..ctor(Uri remoteAddress, ICapabilities desiredCapabilities, TimeSpan commandTimeout) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\RemoteWebDriver.cs:line 117
at OpenQA.Selenium.Remote.RemoteWebDriver..ctor(Uri remoteAddress, ICapabilities desiredCapabilities) in c:\Projects\WebDriver\trunk\dotnet\src\WebDriver\Remote\RemoteWebDriver.cs:line 106
at SHL.Test.Selenium.ScreenShotRemoteWebDriver..ctor(Uri remoteAddress, ICapabilities desiredCapabilities) in C:\Preethi\vs1\WebTest\SeleniumWebTest\Framework\SHL.Test.Selenium\ScreenShotRemoteWebDriver.cs:line 9
at SHL.Test.Selenium.TestContext..ctor(Action testRun, ITestEnvironment testEnvironment, DesiredCapabilities desiredCapabilities) in C:\Preethi\vs1\WebTest\SeleniumWebTest\Framework\SHL.Test.Selenium\TestContext.cs:line 31
at SHL.Test.Selenium.TestBase.InitSelenium(DesiredCapabilities desiredCapabilities, ITestEnvironment testEnvironment, Action testRun) in C:\Preethi\vs1\WebTest\SeleniumWebTest\Framework\SHL.Test.Selenium\TestBase.cs:line 112 
```

调试时，去火狐浏览器插件列表发现火狐webDriver与火狐20.0不兼容当前火狐webdirver版本为2.28.0

我可以使用哪个最新的 Firefox 版本，或者有什么替代方案可以解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T10:30:39.557

请改用最新版本。现在 2.32.0

见[http://docs.seleniumhq.org/download/](http://docs.seleniumhq.org/download/) 或直接下载[http://selenium.googlecode.com/files/selenium-server-standalone-2.32.0.jar](http://selenium.googlecode.com/files/selenium-server-standalone-2.32.0.jar)

这个对我有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:17:04.320

Firefox 20 刚刚问世，Selenium 开发人员可能需要几天时间才能解决出现的任何兼容性问题。

Selenium 的最新版本是 2.31.0（可[在此处](https://code.google.com/p/selenium/downloads/list)获得），它将与 Firefox 19.0.2 一起使用。任何低于 2.30.0 的 Selenium 版本都无法与 FireFox 19 及更高版本一起使用，因此我建议您先尝试将 Selenium 更新到最新版本。

需要说明的是，我还没有下载并尝试过 FireFox 20，所以我不知道 Selenium 2.31.0 与它的兼容性如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T22:17:52.600

我有 Ubuntu 12.04 64 位。Selenium 在最近更新到 20 后停止工作。我使用的是 Eclipse（JDK 7）。我将 Eclipse.ini 改为使用 JDK 6，它开始工作。Webdriver 偶尔挂起，但大部分时间都可以工作（这也可能是我正在测试的网站的问题）。为了安全起见，我现在禁用了 Firefox 自动更新。

# ios - UITapGestureRecognizer 点击 self.view 但忽略子视图

> ID：15814697
> 
> 赞同：105
> 
> 时间：2013-04-04T14:53:46.640
> 
> 标签：ios, uitapgesturerecognizer

我需要实现一个功能，当我双击 self.view（视图`UIViewCotroller`）时会调用一些代码。但问题是我在这个视图上有其他 UI 对象，我不想将任何识别器对象附加到所有这些对象上。我在下面找到了如何在我的视图上做手势的方法，我知道它是如何工作的。现在我在障碍面前选择哪种方式来创建这个识别器忽略子视图。有任何想法吗？谢谢。

```
UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];
[doubleTap setNumberOfTapsRequired:2];
[self.view addGestureRecognizer:doubleTap]; 
```

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-04-04T14:59:28.863

您应该采用对象`UIGestureRecognizerDelegate`内部的协议`self`并调用以下方法来检查视图。在此方法中，检查您的视图`touch.view`并返回适当的布尔值（是/否）。像这样的东西：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    if ([touch.view isDescendantOfView:yourSubView]) {
        return NO;
    }
    return YES;
} 
```

编辑：请同时检查@Ian 的答案！

**斯威夫特 5**

```
// MARK: UIGestureRecognizerDelegate methods, You need to set the delegate of the recognizer
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -> Bool {
     if touch.view?.isDescendant(of: tableView) == true {
        return false
     }
     return true
} 
```

* * *

## 回答 #2

> 赞同：122
> 
> 时间：2016-07-06T06:00:58.357

另一种方法是仅比较触摸视图是否为手势视图，因为后代不会通过条件。一个不错的，简单的单行：

```
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -> Bool {
    return touch.view == gestureRecognizer.view
} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2015-02-28T10:37:43.000

对于 Swift 变体：

```
func gestureRecognizer(gestureRecognizer: UIGestureRecognizer, shouldReceiveTouch touch: UITouch) -> Bool {
    if touch.view.isDescendantOfView(yourSubView){
        return false
    }
    return true
} 
```

很高兴知道，`isDescendantOfView`返回一个`Boolean`值，指示接收者是给定视图的子视图还是与该视图相同。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2018-07-31T20:54:52.593

在 Swift 5 和 iOS 12 中，`UIGestureRecognizerDelegate`有一个名为[`gestureRecognizer(_:shouldReceive:)`](https://developer.apple.com/documentation/uikit/uigesturerecognizerdelegate/1624214-gesturerecognizer). `gestureRecognizer(_:shouldReceive:)`有以下声明：

> 询问代表手势识别器是否应该接收表示触摸的对象。

```
optional func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -> Bool 
```

* * *

下面的完整代码显示了`gestureRecognizer(_:shouldReceive:)`. 使用此代码，点击`ViewController`的视图（包括`imageView`）的子视图不会触发该`printHello(_:)`方法。

```
import UIKit

class ViewController: UIViewController, UIGestureRecognizerDelegate {

    override func viewDidLoad() {
        super.viewDidLoad()

        let tapGestureRecognizer = UITapGestureRecognizer(target: self, action: #selector(printHello))
        tapGestureRecognizer.delegate = self
        view.addGestureRecognizer(tapGestureRecognizer)

        let imageView = UIImageView(image: UIImage(named: "icon")!)
        imageView.frame = CGRect(x: 50, y: 50, width: 100, height: 100)
        view.addSubview(imageView)

        // ⚠️ Enable user interaction for imageView so that it can participate to touch events.
        // Otherwise, taps on imageView will be forwarded to its superview and managed by it.
        imageView.isUserInteractionEnabled = true
    }

    func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -> Bool {
        // Prevent subviews of a specific view to send touch events to the view's gesture recognizers.
        if let touchedView = touch.view, let gestureView = gestureRecognizer.view, touchedView.isDescendant(of: gestureView), touchedView !== gestureView {
            return false
        }
        return true
    }

    @objc func printHello(_ sender: UITapGestureRecognizer) {
        print("Hello")
    }

} 
```

* * *

的替代实现`gestureRecognizer(_:shouldReceive:)`可以是：

```
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -> Bool {
    return gestureRecognizer.view === touch.view
} 
```

但是请注意，此替代代码不检查是否`touch.view`是`gestureRecognizer.view`.

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-07-28T09:20:51.197

完整的快速解决方案（必须为识别器实施和设置委托）：

```
class MyViewController: UIViewController UIGestureRecognizerDelegate {

    override func viewDidLoad() {
        let doubleTapRecognizer = UITapGestureRecognizer(target: self, action: #selector(onBaseTapOnly))
        doubleTapRecognizer.numberOfTapsRequired = 2
        doubleTapRecognizer.delegate = self
        self.view.addGestureRecognizer(doubleTapRecognizer)
    }

    func gestureRecognizer(gestureRecognizer: UIGestureRecognizer, shouldReceiveTouch touch: UITouch) -> Bool {
        if touch.view.isDescendantOfView(self.view){
            return false
        }
        return true
    }

    func onBaseTapOnly(sender: UITapGestureRecognizer) {
        if sender.state == .Ended {
            //react to tap
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-05-14T14:33:30.650

**使用您触摸的 CGPoint 的变体 (SWIFT 4.0)**

```
class MyViewController: UIViewController, UIGestureRecognizerDelegate {

  func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -> Bool {

// Get the location in CGPoint
    let location = touch.location(in: nil)

// Check if location is inside the view to avoid
    if viewToAvoid.frame.contains(location) {
        return false
    }

    return true
  }
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-03-31T14:06:17.733

**清除 Swift 方式**

```
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -> Bool {
    return touch.view == self.view
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-09-06T15:45:23.637

请注意，[gestureRecognizer API](https://developer.apple.com/documentation/uikit/uigesturerecognizerdelegate/1624214-gesturerecognizer)已更改为：

手势识别器（_：应该接收：）

请特别注意第一个参数的外部标签的下划线（跳过）指示符。

使用上面提供的许多示例，我没有收到该事件。下面是一个适用于当前版本的 Swift (3+) 的示例。

```
public func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -> Bool {
    var shouldReceive = false
    if let clickedView = touch.view {
        if clickedView == self.view {
            shouldReceive = true;
        }
    }
    return shouldReceive
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-02-25T16:25:35.940

加上上述解决方案，不要忘记检查`User Interaction Enabled`您的子视图。

[![在此处输入图像描述](https://i.stack.imgur.com/9zjjK.png)](https://i.stack.imgur.com/9zjjK.png)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-03-13T15:17:53.643

我不得不阻止子视图上的手势。唯一有效的是允许并保留第一个视图并阻止所有下一个视图中的手势：

```
 var gestureView: UIView? = nil

    func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -> Bool {
        if (gestureView == nil || gestureView == touch.view){
            gestureView = touch.view
            return true
        }
        return false
     } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-11-07T18:37:22.083

**斯威夫特 4：**

`touch.view`现在是可选的，因此基于@Antoine 的回答：

```
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -> Bool {
    if let touchedView = touch.view, touchedView.isDescendant(of: deductibleBackgroundView) {
        return false
    }
    return true
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-07-01T13:37:01.507

如果您不希望您的“双击识别器”与您的按钮和/或其他控件发生冲突，您可以设置`self`为`UIGestureRecognizerDelegate`并实现：

```
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldReceive touch: UITouch) -> Bool
{
    return !(touch.view is UIControl)
} 
```

# magento - 在社区扩展中覆盖 Magento 控制器

> ID：15814708
> 
> 赞同：3
> 
> 时间：2013-04-04T14:54:15.060
> 
> 标签：magento, controller, overriding

我在我的 magento 1.7 商店上安装了扩展 CreativeStyle CheckoutByAmazon，我试图覆盖 CheckoutController 类，但 magento 似乎忽略了我的覆盖。任何建议将不胜感激。也清除了缓存但仍然不起作用

（在 app/code/local 文件夹中）

MyModule \CheckoutByAmazon \controllers \CheckoutController.php \etc \config.xml

(应用程序/etc/config.xml)

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <MyModule_CheckoutByAmazon>
            <version>0.1.0</version>
        </MyModule_CheckoutByAmazon>
    </modules>
    <frontend>
        <routers>
            <checkoutbyamazon>
                <args>
                    <modules>
                        <MyModule_CheckoutByAmazon before="Creativestyle_CheckoutByAmazon">MyModule_CheckoutByAmazon</MyModule_CheckoutByAmazon>
                    </modules>
                </args>
            </checkoutbyamazon>
        </routers>
    </frontend>
</config> 
```

（在 app/code/local/MyModule/CheckoutByAmazon/controllers/CheckoutController 中）

```
<?php
//Controllers are not autoloaded so we will have to do it manually:
require_once 'Creativestyle/CheckoutByAmazon/controllers/CheckoutController.php';

class MyModule_CheckoutByAmazon_CheckoutController extends Creativestyle_CheckoutByAmazon_CheckoutController {

    public function indexAction() {
       exit('I am here');
        parent::indexAction();
    }

    //i want to override this function
      public function saveShippingAction() {
       //insert my overriding code
        exit('saveShipping');
        }

}
?> 
```

（在 etc/modules/MyModule_CheckoutByAmazon.xml 中）

```
<?xml version="1.0"?>
<config>
    <modules>
        <MyModule_CheckoutByAmazon>
            <active>true</active>
            <codePool>local</codePool>
        </MyModule_CheckoutByAmazon>
    </modules>
</config> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T12:54:11.717

**tl;dr：原始扩展配置可能是问题所在，但这里是如何排除故障。**

为了开始调试，有必要了解您正在尝试做什么。目前没有任何自定义模块，Magento 将采用请求路径 frontname "checkout"，将其与目录*./app/code/core/Mage/Checkout/controllers/*匹配，然后查找第二个和第三个参数的匹配项为文件、该文件中的类定义和该类中的操作方法的组合。不推荐使用的重写语法（您尝试使用您的模块执行）只是***添加了一个额外的目录来匹配***. 在调试之前，最好先了解一下基础知识。这为调试控制器覆盖提供了一个很好的机会。

必须满足许多先决条件（您的模块的*config.xml*被合并、正确的语法和文件结构等）。最好先测试这些是否正常工作，因为它将减少并确定我们需要调试的区域。

在 Magento 根目录下的*test.php*文件中，执行以下操作：

```
<?php
ini_set('display_errors',1);
error_reporting(E_ALL^E_STRICT);
include 'app/Mage.php';
Mage::setIsDeveloperMode(true);
Mage::app();

$origDir = Mage::getModuleDir('controllers','Creativestyle_CheckoutByAmazon').DS;
require_once $origDir.'CheckoutController.php';

$controller = new MyModule_CheckoutByAmazon_CheckoutController(
    Mage::app()->getRequest(),    //required constructor arg
    Mage::app()->getResponse()    //required constructor arg
);

echo get_class($controller); 
```

访问 yoursite.com/test.php，您应该会看到您的控制器类名称。如果你看到一个错误，或者你什么也没看到，那么一些相当低级别的东西就被破坏了。如果错误消息不直观，请检查您的模块配置是否正在合并并从那里移动。

如果类实例化，我们知道以下内容：

1.  基本模块配置很好
2.  文件结构适合配置
3.  显式包含很好

我怀疑你会做到这一点，因为我相信这个问题是基于配置的。有几种可能性。为了深入了解，请将*test.php*修改为以下内容（假设 PHP >= 5.3）：

```
<?php
ini_set('display_errors',1);
error_reporting(E_ALL^E_STRICT);
include 'app/Mage.php';
Mage::setIsDeveloperMode(true);
Mage::app();

$router = Mage::app()->getFrontController()->getRouter('standard');
/* @var $router Mage_Core_Controller_Varien_Router_Standard */

$reflection = new ReflectionClass($router);
$modules = $reflection->getProperty('_modules');
$modules->setAccessible(true);

var_dump($modules->getValue($router)); 
```

输出应类似于以下内容：

```
array(35) {
  ["core"]=>
  array(1) {
    [0]=>
    string(9) "Mage_Core"
  }
  ["install"]=>
  array(1) {
    [0]=>
    string(12) "Mage_Install"
  }
  ["directory"]=>
  array(1) {
    [0]=>
    string(14) "Mage_Directory"
  }
  // ...
  ["checkout"]=>
  array(2) {
    [0]=>
    string(25) "MyModule_CheckoutByAmazon"
    [1]=>
    string(13) "Mage_Checkout"
  }
  // ...
} 
```

无论您在哪里看到多个子数组，都会重写控制器目录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-27T10:36:08.947

要完成 C4rter 的回答，以下是您必须添加到 config.xml 文件中的完整代码：

```
<admin>
    <routers>
        <checkoutbyamazon>
            <args>
                <modules>
                    <MyModule_CheckoutByAmazon before="Creativestyle_CheckoutByAmazon_Adminhtml">MyModule_CheckoutByAmazon</MyModule_CheckoutByAmazon>
                </modules>
            </args>
        </checkoutbyamazon>
    </routers>
</admin> 
```

您不需要前端重写部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-29T16:33:26.817

试图做同样的事情，也失败了。但我找到了原因。CheckoutByAmazon 扩展有一个同名的管理控制器：

```
<admin>
    <routers>
        <checkoutbyamazon>
            <use>admin</use>
            <args>
                <module>Creativestyle_CheckoutByAmazon</module>
                <frontName>checkoutbyamazon</frontName>
            </args>
        </checkoutbyamazon>
    </routers>
</admin> 
```

所以你必须重写管理控制器：

```
before="Creativestyle_CheckoutByAmazon_Adminhtml" 
```

# algorithm - 树木边缘切割

> ID：15814710
> 
> 赞同：3
> 
> 时间：2013-04-04T14:54:22.227
> 
> 标签：algorithm, graph, tree, graph-algorithm, depth-first-search

一棵树可以通过删除其中一条边分成两棵不同的树。给定一棵树，其`N`节点由范围内的整数唯一标识`[0, N-1]`，我需要编写一个函数来查找需要从树中删除的边，这样生成的树中所有节点 ID 的总和之间的差是最小化。

该函数应该将它发现的最小差异打印到标准输出（stdout）。

该函数将接收以下参数：

`parent`这是一个整数数组，具有以下含义：`parent[i]`= 节点的父节点`i`（更具体地说，它的 ID）

`parent[i] = -1`如果我没有父母（我是树的根）

**数据约束**

树中的最大节点数为 50,000

**效率限制**

该函数预计在 2 秒内打印结果

**例子**

```
 Input parent: [1, 4, 4, 2, -1, 2, 2]

 aka :         4
              / \
             1   2
            /  / | \
           0  3  5  6   

 Output: 9 
```

解释：我们删除节点 2 和 6 之间的边。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T21:45:40.390

1.  对于每个节点，计算其子节点的总和，然后将此值添加到自身，并将其存储在节点中。`S_n`让我们将此值`n`称为节点。（可以通过递归和后序遍历轻松完成）

2.  `n`找到与的`S_n`差异最小的节点`S_root/2`。n 和它的父节点之间的边就是我们想要的边。（这在最坏的情况下需要线性时间。）

# asp.net - ASP.NET 如何在 ASP.NET 中制作虚荣 URL？

> ID：15814711
> 
> 赞同：0
> 
> 时间：2013-04-04T14:54:26.017
> 
> 标签：asp.net, vanity-url

我需要为以下链接创建一个虚荣网址： [http ://www.cvent.com/d/2cq542](http://www.cvent.com/d/2cq542)

需要类似于： [http ://www.opportunityfinance.com/SmallandEmerging/](http://www.opportunityfinance.com/SmallandEmerging/)

我看到的最大问题是没有 apache 支持。只有 ASP.net，我仍在努力掌握。

有人可以为我指明正确的方向或帮助我开始做某事吗？认为我需要创建一个`.aspx`或文件并以某种方式`.asp`调用或其他东西。`Request.ServerVariables`

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:30:52.613

如果您寻找重定向，那么您有两种方法。

要么您单独拥有每个页面并且简单地进行重定向，要么以编程方式在 global.asax 上检查您的位置和您想去的地方，例如：

```
protected void Application_BeginRequest(Object sender, EventArgs e) 
{       
    // get here the map from /d/2cq542 to /SmallandEmerging/
    // return null for no map
    string cWhereToGo = GetTheRedirectMap(HttpContext.Current.Request.Path);

    if(cWhereToGo != null)
    {
        // you can also add different domain on the start.
        HttpContext.Current.Response.Redirect(cWhereToGo, true);
        HttpContext.Current.Response.End();
    }
} 
```

# php - Jeditable 不会显示更改或更新 textarea

> ID：15814715
> 
> 赞同：1
> 
> 时间：2013-04-04T14:54:33.633
> 
> 标签：php, jquery, jeditable

我一直在尝试使用 Jeditable，并且我已经让它将普通标签更新为 .edit ... 但它不会更新

使用 .editArea Plus 更新正常时，更新不会显示，直到我更新页面..

我不确定我做错了什么，我们将不胜感激:)

代码：

```
 <div>
<h2 id='<?= $row['id']?>' class="edit"> <?= $row['title']?></h2>
<p class="editArea"><?= $row['Text'] ?></p>
</div>
<?php 
```

} ?>

$(document).ready(function() { var text = 20;

```
 $('.edit').editable('http://www.JapSeyz.dk/save.php?type=header', {
     indicator : 'Saving...',
     submit : 'OK',
     id   : 'id',
     name : 'value',
     tooltip   : 'Click to edit...'
 });
 $('.editArea').editable('http://www.JapSeyz.dk/save.php?type=text', { 
     type      : 'textarea',
     submit    : 'OK',
     id   : 'id',
     name : 'value',
     rows : '6',
     cols : '100',
     indicator : '<img src="img/indicator.gif">',
     tooltip   : 'Click to edit...'
 }); 
```

}); （我把所有的要求/样式等都去掉了..）

和更新脚本

```
<?php
require("Oese/Connection.php");

$type = (isset($_GET['type'])) ? $_GET['type'] : "";
$value = (isset($_POST['value'])) ? $_POST['value'] : "";
$id = (isset($_POST['id'])) ? $_POST['id'] : "";

if($type == "text"){
mysql_query("UPDATE Oese SET Text='$value' WHERE id='$id'");
}
elseif($type == "header"){
mysql_query("UPDATE Oese SET title='$value' WHERE id='$id'");
}
print $value;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:03:08.367

在您传递的选项`id : 'id'`中，这可能会覆盖 jeditable 发送的值。

尝试删除它并查看。否则，`var_dump($_POST)`在服务器上查看实际发送的内容（在 Chrome 开发人员工具栏上，检查网络选项卡）。

# mysql - 在 MySQL 中在聚合 GROUP BY 函数中组合组

> ID：15814723
> 
> 赞同：0
> 
> 时间：2013-04-04T14:55:08.067
> 
> 标签：mysql, sql, aggregate-functions

我有一个包含这样的网站流量日志信息的数据表

```
date         ip     country     duration
02/12/2013   *      USA           455
02/13/2013   *      CA           1234
02/14/2013   *      Cambodia       13
02/12/2013   *      USA            12
03/11/2013   *      Korea          11
.... 
```

现在我想通过汇总查询进行总和/分组，按国家/地区汇总总访问持续时间，但我只想生成三个组（美国、加拿大、其他所有人）

并产生这样的理想输出：

```
 country     sum(durations) 
   USA            123456789
   Canada          55555679
Everyone Else        696969 
```

是否可以在单个查询中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:59:23.707

您可以使用以下`CASE`语句执行此操作：

```
select (
  case 
    when country in ('USA','Canada') then country 
    else 'Everyone Else' 
   end
) as country_group,
  sum(duration)
from your_table
group by country_group 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:58:01.510

```
select country, sum(duration)
from
(
select date, ip, 
       case 
           when country <> 'USA' and country <> 'Canada' then 'Everyone Else'
           else country
       end country,
       duration
from trafficlog
) subsel
group by country 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T14:58:31.793

就像是

```
SELECT ..
...
GROUP BY
    CASE country
        WHEN 'USA' THEN 'USA'
        WHEN 'Canada' THEN 'Canada'
        ELSE 'Everyone Else'
    END CASE 
```

会成功的。离开我的头顶，所以这可能不会按原样工作。但是 MySQL 确实接受 group/where/order 子句的任意逻辑，因此您可以编写任何您想做的分组。

另外一个选项：

```
SELECT IF(country NOT IN ('Canada', 'USA'), 'Everyone Else', country) AS country
...
GROUP BY country 
```

# php - 在 PHP 中获取本地打印机状态

> ID：15814726
> 
> 赞同：2
> 
> 时间：2013-04-04T14:55:12.500
> 
> 标签：php, printing

我正在尝试严格使用 PHP 查询本地打印机。目标是让 PHP 在打印机缺纸时通知用户。我查看了一些库，但它们似乎都只能访问网络打印机。我还没有找到一个可以模拟虚拟网络打印机的实用程序，以便我可以利用当前可用的库。

当前是否有在 PHP 中查询本地打印机或模拟网络打印机的解决方案，以便我可以利用 PHP 中的当前功能？

为澄清起见，这是在 Windows 机器上。最终，如果我能找到一个实用程序来模拟本地主机上的网络打印机，那么我的问题就会得到解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:20:40.103

PhP 本身并不适合远程硬件轮询。你是在 windows 还是 *nix/mac 上？

您可以尝试在 *nix 上执行一个 shell 脚本来检查并返回打印机状态（周围有很多，如果它们已经在系统上配置，则适应网络打印机相对简单）

并安装一些带有网络打印机管理窗口组件的远程服务器管理工​​具将允许您进行“可能”执行您想要的系统调用。加上我猜总是有'printui.exe'和'print.exe'。

# php - 从订单中获取ProductId

> ID：15814731
> 
> 赞同：0
> 
> 时间：2013-04-04T14:55:18.277
> 
> 标签：php, magento, product, ecommerce-sales

我是 Magento 的新手，所以我真的很困惑。我在以下方面需要一些帮助：我正在尝试制作一个脚本，在其中我可以看到来自特定状态的 Magento 的所有订单`timesperiod`。这个脚本应该每天给我邮寄我卖出了多少产品，这样我就可以知道我必须下多少订单。我现在为每个产品计算它们的手册

在生成的电子邮件中，我只想拥有产品名称、产品 ID、金额。

我目前有以下代码：

```
$content = '';
$yesterday = date('Y-m-d', strtotime("-1 day"));
$orders = Mage::getModel('sales/order')->getCollection()
->addFieldToFilter('status', Mage_Sales_Model_Order::STATE_PROCESSING)
->addAttributeToFilter('created_at', array('from'  => $yesterday));

foreach($orders as $order) {
 //this does not work
    $productId = $order->getProductId();

} 
```

谁能帮我从订单中获取产品ID？所以我可以从产品类中获取产品名称。我还需要对`productId`元素进行分组以获得产品的总订单。我还没有对它进行分组，因为我没有设法检索到产品 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:26:59.913

尝试

```
...
foreach($orders as $order) {
   //this does not work
   $items = $order->getAllItems();  //$order->getAllVisibleItems() 
   foreach($items as $item){
     $productId = $item->getProductId();
   }

} 
```

看看@http [://www.magentocommerce.com/boards/viewthread/18629/](http://www.magentocommerce.com/boards/viewthread/18629/)

# c# - 在从 C# 代码安装之前检查是否已经安装了 Windows 服务

> ID：15814734
> 
> 赞同：0
> 
> 时间：2013-04-04T14:55:24.770
> 
> 标签：c#, windows-services

我正在了解 Windows 服务
我使用安装项目安装
了 Windows 服务 现在在项目安装程序的构造方法中对 Windows 服务中的代码进行了更改
我正在检查服务是否已经安装

```
 ServiceController[] sc = ServiceController.GetServices();
        foreach (ServiceController service in sc)
            if (service.ServiceName == "VService") { flag = false; break; }
            else flag = true;
        if (flag)
        {
            ServiceInstaller ServiceInstallerObj = new ServiceInstaller();
            InstallContext Context = new InstallContext();
            ServiceInstallerObj.Context = Context;
            ServiceInstallerObj.ServiceName = "VService";
            ServiceInstallerObj.Uninstall(null);
        } 
```

但我想这不是卸载 Windows 服务的原因，当我在属性窗口中更改安装项目的版本并运行在项目构建时生成的安装程序时，我收到一个错误，即服务无法按原样启动已经在运行的任何机构都可以告诉我解决此问题的方法或其他可以完成的方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:00:48.790

你会想要使用这样的代码：

```
using System.ServiceProcess;

ServiceController sc = new ServiceController(SERVICENAME);

switch (sc.Status)
{
    case ServiceControllerStatus.Running:
        return "Running";
    case ServiceControllerStatus.Stopped:
        return "Stopped";
    case ServiceControllerStatus.Paused:
        return "Paused";
    case ServiceControllerStatus.StopPending:
        return "Stopping";
    case ServiceControllerStatus.StartPending:
        return "Starting";
    default:
        return "Status Changing";
} 
```

状态标志将告诉您服务正在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T02:59:42.823

```
ManagedInstallerClass.InstallHelper(new[] { "/u", Assembly.GetExecutingAssembly().Location }); 
```

# stata - 获取Stata中另一个变量的最大值对应的值

> ID：15814735
> 
> 赞同：1
> 
> 时间：2013-04-04T14:55:25.517
> 
> 标签：stata

是否有可能在 Stata 中获得一个变量中对应于另一个变量最大值的观察值？（在 SQL 中与[此](https://stackoverflow.com/questions/13367874/how-to-retrieve-the-value-which-corresponding-to-the-max-in-an-other-column-in-s)类似）。

**编辑：**你是对的，尼克。我对细节很轻。我的数据集看起来像[这样](https://docs.google.com/spreadsheet/ccc?key=0AlMMcUn_SxZGdDJ2SjY1UllsMDZtN05HTmRJU0FGZnc&usp=sharing)（wfs Google Docs 表；无法弄清楚如何在此处格式化表）。

我的目标是创建两个变量，其“col”和“row”值分别对应于“压力”的最大值和条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:32:54.667

这是相当笼统的，但确实是的，这是简短的回答。这里有两个具体的例子，一个是整体最大值，另一个是组内最大值。

```
. sysuse auto, clear
(1978 Automobile Data)

. su mpg , meanonly

. list weight if mpg == r(max)

     +--------+
     | weight |
     |--------|
 71\. |  2,040 |
     +--------+

. egen maxmpg = max(mpg), by(rep78)

. list rep78 maxmpg weight if mpg == maxmpg

    +-------------------------+
    | rep78   maxmpg   weight |
    |-------------------------|
 7\. |     .       26    2,230 |
14\. |     3       29    2,110 |
18\. |     2       24    2,750 |
40\. |     1       24    2,730 |
45\. |     .       26    2,520 |
    |-------------------------|
52\. |     2       24    2,690 |
63\. |     4       30    1,980 |
71\. |     5       41    2,040 |
    +-------------------------+ 
```

一些一般注意事项：

1.  注意平局，尤其是当数据（保存为）整数时。

2.  注意您的选择变量或任何其他变量上的缺失值。（例如，缺失值被`sort`添加到数据集的末尾。）

3.  与最大值比较时要注意精度问题。（此处未在此答案中记录，但`search precision, faq`会引发许多讨论。）

[http://www.stata-journal.com/article.html?article=dm0055](http://www.stata-journal.com/article.html?article=dm0055)讨论了相关技术。

（更新）

听上去像

```
. bysort side condition (pressure) : gen rowmax = row[_N]

. bysort side condition (pressure) : gen colmax = col[_N] 
```

有关`by:`参见[http://www.stata-journal.com/sjpdf.html?articlenum=pr0004](http://www.stata-journal.com/sjpdf.html?articlenum=pr0004)的教程，这是您应该阅读的免费 .pdf 的链接。和以前一样，如果您在 上有缺失值`pressure`，您将需要一些不同的东西，因为缺失将被排序到 和 的每个块的`side`末尾`condition`。

# javascript - Yammer Like 按钮不起作用... TypeError: yam.helper is undefined

> ID：15814738
> 
> 赞同：0
> 
> 时间：2013-04-04T14:55:41.463
> 
> 标签：javascript, typeerror, yammer, social-media-like

我正在使用 yammer 的点赞按钮。我已经尝试过所有的浏览器。它们都具有相同的功能。第一页加载他们将完美地加载 JS 和类似按钮......但是在第一页加载之后，类似按钮的任何后续加载都会引发以下错误。

```
Error
TypeError: yam.helper is undefined 
```

代码如下：

Javascript：

```
yam.connect.actionButton({
    container: '#like',
    network: 'gsk.com',
    action: 'like'
}); 
```

HTML：

```
<div id="like"><p></p></div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T23:59:04.337

我遇到过同样的问题。几个指针：

[在https://www.yammer.com/client_applications](https://www.yammer.com/client_applications)注册新应用

您的数据应用程序 ID 需要它。

新应用中的重定向 URI 需要与应用的 URL 匹配。

确保容器与代码中的 div id 匹配：

```
 <script>
    yam.connect.actionButton({
     container: "#embedded-like",
     network: "domain.com",
     action: "like"
    });
    </script>    
    <div id="embedded-like"></div> 
```

# excel - 从 Excel 2010 到 SQL Server 2012 的连接字符串

> ID：15814740
> 
> 赞同：0
> 
> 时间：2013-04-04T14:55:44.573
> 
> 标签：excel, sql-server-2008-r2

我在 Excel 2010 文件中有一个连接字符串，用于从 SQL Server 数据库中提取数据。

我该如何去实际创建这个连接字符串？我们切换到一个全新的服务器，并且 SQL Server 数据库名称已更改。有没有办法以某种方式产生这个？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:00:54.683

数据 > 连接 >

选择它所涉及的连接，并修改属性以匹配新的服务器参数

# visual-studio-2012 - 有人知道彩色代码块吗？

> ID：15814742
> 
> 赞同：0
> 
> 时间：2013-04-04T14:55:51.450
> 
> 标签：visual-studio-2012, colors, block, codeblocks

Greenfoot 是一个供学生学习编程基础知识的编程环境。这是一些图片：

[http://www.greenfoot.org/images/tutorials/crab-2c/edit-Crab-act.png?1345204188](http://www.greenfoot.org/images/tutorials/crab-2c/edit-Crab-act.png?1345204188)

[http://youtu.be/u1ToiEYKwRI?t=3m10s](http://youtu.be/u1ToiEYKwRI?t=3m10s)

运行中的 IDE。当您输入代码时，方法和循环等部分会以颜色标记。这使得在视觉上更容易区分各个方法。

我的问题：有人知道此功能是否可用于 code::blocks 或 Visual Studio 2012？我不知道怎么称呼这种行为，所以我不能谷歌它。我很想把它放在我的“成熟”IDE中。我正在寻找的是一个 IDE，或者一个插件，它可以为代码的区域着色，类似于链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:02:38.820

我想几乎每个 IDE 都可以使用颜色，如果它不在孔区域中，那么字母的颜色取决于它们所在的区域。

Visual Studio 使用彩色字母执行此操作，当然其他知名 IDE（例如 Eclipse 和 NETbeans 和 code::blocks 也是如此）。

如果您特别喜欢孔色区域，那么对于 java，您可以尝试具有 tha 功能的 blueJ。

我认为那篇文章会对你有所帮助

[IDE/文本编辑器颜色设置对我们眼睛的影响](https://stackoverflow.com/questions/4508643/effects-of-ide-text-editor-color-settings-on-our-eyes)

# c# - 可以在没有基类型的情况下使用 C# 约束吗？

> ID：15814746
> 
> 赞同：2
> 
> 时间：2013-04-04T14:55:58.903
> 
> 标签：c#, dynamic, reflection, constraints

我有一些具有公共属性的类，但是，我不能让它们派生自基类型（LINQ-to-SQL 限制）。

我想将它们视为具有基本类型，但**不是通过使用反射**（性能至关重要）。

例如：

```
public class User
{
    public int Id { get; set; }
    public string FirstName { get; set; }
}

public class Vehicle
{
    public int Id { get; set; }
    public string Label { get; set; }
} 
```

在这种情况下，如果我有`Id`可用的财产，我会很高兴，无论我持有什么类型。

在 C# 中有什么方法可以实现类似的东西：

```
public static int GetId<T>(T entity) where T // has an int property 'Id'
{
    return entity.Id;
} 
```

我想我可以使用`dynamic`，但是，我正在寻找一种方法来限制**编译时的代码，**不要将此方法用于没有`Id`属性的对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:57:31.980

您可以使用接口：

```
public interface IHasId
{
    int Id { get; }
}

public class User : IHasId { ... }
public class Vehicle : IHasId { ... }

public static int GetId<T>(T entity) where T : IHasId
{
    return entity.Id;
} 
```

但是，如果您无法修改类以添加接口，您将无法执行此操作。没有编译时检查将验证属性是否存在于`T`. 你必须使用反射——这很慢而且显然不理想。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:58:43.833

没有办法保证一个类型有一个给定的成员而不限制到一个公共的基类型或接口。解决此限制的一种方法是使用 lambda 访问该值

```
public static int Use<T>(T value, Func<T, int> getIdFunc) { 
  int id = getIdFunc(value);
  ...
}

Use(new User(), u => u.Id);
Use(new Vehicle(), v => v.Id); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T14:57:22.390

您可以创建一个具有公共属性的接口并让您的类实现它：

```
public interface IEntity
{
    int Id { get; set; }
}

public class User : IEntity
{
    public int Id { get; set; }
    public string FirstName { get; set; }
}

public class Vehicle : IEntity
{
    public int Id { get; set; }
    public string Label { get; set; }
}

public static int GetId<T>(T entity) where T : IEntity
{
    return entity.Id;
} 
```

你可以这样简化`GetId`：

```
public static int GetId(IEntity entity)
{
    return entity.Id;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T15:26:40.753

提到接口方法的其他答案当然很好，但我想根据您涉及 Linq-to-SQL 的情况定制响应。

但首先，按要求解决问题标题

> 可以在没有基类型的情况下使用 C# 约束吗？

一般来说，答案是否定的。具体来说，您可以使用`struct`、`class`或`new()`作为约束，这些在技术上不是基本类型，它们确实为如何使用该类型提供了一些指导。这并没有完全达到您希望做的水平，即将方法限制为具有特定属性的类型。为此，您需要限制到特定的接口或基类。

对于您的特定用例，您提到了 Linq-to-SQL。如果您正在使用为您生成的模型，那么您应该可以选择修改这些类，而无需直接修改*生成*的模型类文件。

你可能有类似的东西

```
// code generated by tool 
// Customer.cs
public partial class Customer // : EntityBaseClasses, interfaces, etc
{
    public int ID 
    {
        get { /* implementation */ }
        set { /* implementation */ }
    }
} 
```

以及其他类似的文件，例如帐户或订单或类似性质的东西。如果您正在编写希望利用常用 ID 属性的代码，您可以利用`partial`定义`partial class`第二*个*类文件来为这些模型引入一个通用接口类型。

```
public interface IIdentifiableEntity
{
    int ID { get; }
} 
```

这里的美妙之处在于使用它很容易，因为实现已经存在于您生成的模型中。你只需要声明它，你可以在另一个文件中声明它。

```
public partial class Customer : IIdentifiableEntity { }
public partial class Account : IIdentifiableEntity { }
// etc. 
```

当使用存储库模式并希望定义通用方法而不必在存储库中重复相同的样板时，这种方法对我很有价值。`GetById`存储库。我可以将方法/类限制在接口上，并`GetById`“免费”获得。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T14:57:33.130

要么你需要让两个类都实现一个具有你需要的属性的接口，并在泛型约束中使用它，要么你为每种类型编写单独的方法。这是获得编译时安全的唯一方法。

# visual-studio-2010 - Silverlight 应用程序的正确解决方案/项目结构

> ID：15814753
> 
> 赞同：0
> 
> 时间：2013-04-04T14:56:15.217
> 
> 标签：visual-studio-2010, silverlight, projects-and-solutions

我继承了使用 Silverlight 的解决方案。我发现有些项目几乎是其他项目的完全克隆，唯一的区别是克隆是 Silverlight 项目。例如，这是一个非 Silverlight 项目的项目和文件夹结构：

> MyCompany.Entities
> -> 实体
> -> --> Foo.cs

现在是 Silverlight 项目：

> MyCompany.Entities.SL
> -> 实体
> -> --> Foo.cs

Foo.cs 是两个项目在磁盘上的同一个文件。这是正确的吗？这就是 Silverlight 项目的结构吗？似乎有很多开销，应该有更好的方法。如果这是正确的，为什么这个结构是必要的？它有什么作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:00:51.500

好吧，Silverlight 使用范围缩小的 .NET 框架子集。如果 .NET 项目使用 Silverlight 运行时缺少的某些功能，则无法将普通 .NET 项目编译为 Silverlight XAP。但是，如果您的 .NET 项目仅使用框架的公共区域，则可以这样做。但是，拥有同一个 .cs 文件的两个副本会浪费磁盘空间，并且还会让您面临风险，因为您可能会在一个 .cs 文件中进行更改而忘记相应地更改另一个。这就是为什么我将所有原始文件保留在我的 .NET 解决方案中，并在将它们添加到我的项目时使用“添加为链接”按钮。显然，您从那里继承解决方案的人也是如此。这不是一个非常奇怪/深奥的结构，

# php - 按两个变量对多维数组进行排序 - PHP

> ID：15814761
> 
> 赞同：0
> 
> 时间：2013-04-04T14:56:29.833
> 
> 标签：php, arrays, sorting

我需要按键值对数组 php 进行排序。我的数组：

```
Array
(
    [1430039342393636453] => Array
        (
            [0] => Array
                (
                    [thrid] => 1430039342393636453
                    [uid] => 19748
                    [flag] => 1
                    [timestamp] => 1363791789
                    [date] => Mar 20
                    [content_preview] => 
                    [content] => 

                )

        )
[1430750471744336569] => Array
        (
            [0] => Array
                (
                    [thrid] => 1430750471744336569
                    [uid] => 19870
                    [flag] => 1
                    [timestamp] => 1364469959
                    [date] => Mar 28
                    [content_preview] =>
                    [content] =>
                )

            [1] => Array
                (
                    [thrid] => 1430750471744336569
                    [uid] => 19874
                    [flag] => 1
                    [timestamp] => 1364472417
                    [date] => Mar 28
                    [content_preview] => 
                    [content] => 
                )
) 
```

我需要按`timestamp`主数组和子数组排序。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:01:19.213

使用[asort](http://php.net/manual/en/function.asort.php)对关联数组进行排序。

相关SO帖子：

[在 PHP 中对关联数组进行排序](https://stackoverflow.com/questions/777597/sorting-an-associative-array-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:10:18.450

尝试类似：

```
private function sort($sort) {

    foreach($sort as &$arr) { //use a reference because usort uses references to manipulate your array.
                            //if you don't pass by reference you'll never see the sort
        usort($arr, function($a, $b) { return $a['timestamp'] - $b['timestamp'];
    }

    usort($sort, function($a, $b) { return key($a) - key($b); }

    return $sort;

} 
```

# twitter - twitter bot 未在 twitter 提要上显示为已转发

> ID：15814762
> 
> 赞同：0
> 
> 时间：2013-04-04T14:56:30.547
> 
> 标签：twitter, tweets

Twitter 现在不再在推文中使用 RT 前缀，而是在转推的推文上提供转推标志。我希望这显示在我的推特机器人上我转推的推文中......即原始用户信息嵌入在 twitter.com/user 的提要中

这是我到目前为止的代码（使用 API 1.1）：

```
 $twitter = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, ACCESS_TOKEN, ACCESS_TOKEN_SECRET);
    $twitter->host = "http://search.twitter.com/";
    $search = $twitter->get('search', array('q' => '-escort -RT -ADRTBot #abudhabi', 'count' => 5));
    $twitter->host = "https://api.twitter.com/1.1/";
    foreach($search->results as $tweet) {
        $status = $tweet->text;
        if(strlen($status) > 140) $status = substr($status, 0, 139);
        $twitter->post('statuses/retweet/$tweet->id', array('status' => $status));
        print "STATUS: $tweet->id $status<br>";
        } 
```

任何想法将不胜感激！

* * *

以上不起作用......我仍在努力使用新的 api 1.1 转发。

这是我到目前为止的修改后的代码：

```
 <?php
    require_once('twitteroauth/twitteroauth.php');

    define('CONSUMER_KEY', 'xxxxx');
    define('CONSUMER_SECRET', 'xxxxx');
    define('ACCESS_TOKEN', 'xxxxx');
    define('ACCESS_TOKEN_SECRET', 'xxxxx');

    $twitter = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, ACCESS_TOKEN, ACCESS_TOKEN_SECRET);

    $tweets = $twitter->get("https://api.twitter.com/1.1/search/tweets.json?q=-escort%20-RT%20-ADRTBot%20abudhabi&count=5");
    $twitter->host = "https://api.twitter.com/1.1/";
    foreach($tweets as $tweet) {
    foreach($tweet as $chirp) {
        $id = $chirp->id_str;
//testing that data coming through... and it is
        echo "<br>THIS IS THE ID: $id<br>";
        echo "statuses/retweet/$id.json<br>";
        echo "$chirp->text<br>";

        $twitter->post('https://api.twitter.com/1.1/statuses/retweet/$id.json');
    }
    }
    echo json_encode($tweets);

    ?> 
```

但是，它没有在 Twitter 上发布……我错过了什么？

非常感谢，

R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T14:23:37.167

您应该将代码与原始编码器分开。直到 2 天前，这个机器人实际上可以工作，但是由于 API 1.1 上的 Twitter 更新，机器人已经停止运行，我认为这取决于 search.twitter.com 的属性，但可以回答你的问题

[代码]

```
require_once('twitteroauth.php');

define('CONSUMER_KEY', '\\');
define('CONSUMER_SECRET', '\\');
define('ACCESS_TOKEN', '\\');
define('ACCESS_TOKEN_SECRET', '\\');

$twitter = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, ACCESS_TOKEN, ACCESS_TOKEN_SECRET);
$twitter->host = "http://search.twitter.com/";
$search = $twitter->get('search',array('q' => '#abudhabi', 'another hashtag here', 'another keyword here', 'rrp' => 4));

$twitter->host = "https://api.twitter.com/1.1/";
foreach($search->results as $tweet) {
    $status = 'RT @'.$tweet->from_user.' '.$tweet->text;
    if(strlen($status) > 140) $status = substr($status, 0, 139);
    $twitter->post('statuses/update', array('status' => $status));
}

echo "Success! Check your twitter bot for retweets!"; 
```

[/代码]

# ios - 故事板似乎没有正确加载

> ID：15814769
> 
> 赞同：0
> 
> 时间：2013-04-04T14:56:52.610
> 
> 标签：ios, objective-c, cocoa-touch, uistoryboard, uistoryboardsegue

我正在处理的项目中有一个故事板，但最近我注意到我遇到了问题。不知从何而来，我的代码现在告诉我我需要为单元标识符注册一个类

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'unable to dequeue a cell with identifier rootCell - must register a nib or a class for the identifier or connect a prototype cell in a storyboard' 
```

（我在情节提要中有单元原型，所以我认为我不需要。）如果我执行

`[tableView registerClass:<my class> forCellReuseIdentifier:<identifer>];`

它会超出这个范围，但是当我挂断时

`[self performSegueWithIdentifier:<my ID> sender:self];`

并告诉我它找不到segue。我能够确认 segue 是在情节提要中使用正确的标识符设置的。

有谁知道是什么问题？

不久前我在情节提要上进行了重命名，但我更新了 info.plist 并且我很确定它在那之后仍然有效。

如果我在另一个项目中重新创建故事板，它工作正常，但如果我在这个项目中重新创建故事板，它会失败。

编辑：我确实在 IB 中正确设置了课程，这也是手动 segue。

编辑：添加了确切的错误措辞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:14:31.430

我刚刚发生了这种情况。

`[self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:@"WhateverCellID"];`必须在我的 viewDidLoad中添加

我正在使用常规的 viewController，意识到我的错误，并切换到 tableViewController 并开始遇到同样的错误。

或者使用 'UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];` 如果没有 indexPath 选项，这是一个不同的调用，它不需要注册并且可能适合您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T05:15:28.350

如果你从你的 iPhone/iPad/Simulator 或任何你正在调试它的地方删除故事板，然后在 Xcode 中清理，然后构建并运行，你会看到不同的结果吗？我问的原因是每次你在 Xcode 中构建时，你都会得到项目曾经包含的所有内容的联合。因此，如果您重命名了故事板，并且还没有完全清理，那么您可能在构建的产品中同时拥有两个故事板。

# c# - WCF RestFul 服务上的 XML 反序列化

> ID：15814774
> 
> 赞同：1
> 
> 时间：2013-04-04T14:57:07.210
> 
> 标签：c#, .net, wcf

我有以下课程（不要介意命名空间）：

```
[DataContract(Namespace = "http://www.test.com/ReqBody2")]
[KnownType(typeof(ReqBody2))]
public class ReqBody2
{
    [DataMember]
    public string pass { get; set; }
    [DataMember]
    public int Tout { get; set; }
    [DataMember]
    public string RequestDate { get; set; }
    [DataMember]
    public ReqBody2Internal Req { get; set; }
    [DataMember]
    public string ReqEnc { get; set; }
}

[DataContract(Namespace = "http://www.test.com/ReqBodyInternal")]
[KnownType(typeof(ReqBody2Internal))]
public class ReqBody2Internal
{
    [DataMember]
    public string Field1 { get; set; }
    [DataMember]
    public string Field2 { get; set; }
    [DataMember]
    public string Field3 { get; set; }
    [DataMember]
    public string Field4 { get; set; }
} 
```

当我发布 ReqBody2 的 Xml 序列化时，服务会正确接收和反序列化对象的根属性。但是，来自 ReqBody2Internal 的属性都是空的。

OperationContract 是：

```
[OperationContract]
[WebInvoke(UriTemplate = "Invoke2",RequestFormat=WebMessageFormat.Xml , ResponseFormat=WebMessageFormat.Xml)]
void Invoke2(ReqBody2 req); 
```

这是我使用 Fiddler 发布的示例 Xml：

```
<?xml version="1.0" encoding="utf-8"?><ReqBody2 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.test.com/ReqBody2">
<pass>HOLA</pass>
<Req><Field1>asd</Field1><Field2>asd</Field2><Field3>asd</Field3><Field4>extra value</Field4></Req>
<RequestDate>2013-04-04T14:10:38</RequestDate>
<Tout>30000</Tout>
</ReqBody2> 
```

我期望发生的是可以访问 Req 属性，但它们在服务器上为空。

关于为什么会发生这种情况的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:11:43.803

您发布的文档具有定义的默认命名空间：

```
xmlns="http://www.test.com/ReqBody2" 
```

这意味着除非指定，否则所有子元素都将继承此 XML 命名空间。这包括`Req`将被反序列化为类型元素的元素`ReqBody2Internal`。

但是，您的`ReqBody2Internal`类型有一个声明为`http://www.test.com/ReqBodyInternal`. 这意味着子 XML 元素应该来自此命名空间以正确反序列化，但它们继承默认命名空间，因此被序列化程序视为“错误”元素。

要解决此问题，您需要更改数据协定上的名称空间声明以共享相同的名称空间，或更改您的 XML 以为元素的子元素指定正确的名称空间`Req`。

# c++ - 自动化 LLVM 风格的 RTTI 代码

> ID：15814775
> 
> 赞同：4
> 
> 时间：2013-04-04T14:57:07.323
> 
> 标签：c++, llvm, rtti

对于特定的类层次结构，我需要知道基类引用是否是特定派生类的实例。由于不同的原因，我不能在这里使用标准的 C++ RTTI，我需要实现一个自定义`instanceof`机制。

[LLVM-stle RTTI](http://llvm.org/docs/HowToSetUpLLVMStyleRTTI.html)可以满足我的需求，但我想知道它是否存在一种方法（以某种方式使用模板）来自动执行该方法`classof`？

这种机制是否有其他/更简单的实现可以让我们知道基类是否是派生类的实例？

我的限制：

*   我没有多重继承，但我有几个级别的继承。
*   对内存占用的影响必须尽可能小，并且不可能执行动态分配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T16:23:50.700

> 我想知道是否存在一种方法（以某种方式使用模板）来自动执行 classof 方法？

是的，有一些方法可以自动化 classof 方法，我真的不明白为什么 LLVM 页面会展示一组手动的 classof 方法，因为如果你自动化这个非常简单的过程，它的可扩展性就会大大提高。

这是一个非常基本的解决方案：

```
class TypedObject {
  public:
    virtual ~TypedObject() { };

    virtual int getClassId() const { return 0; };
    static int getStaticClassId() { return 0; };

    virtual bool isOfType(int aID) const { return (aID == 0); };

    template <typename T>
    bool isOfClass() const { return isOfType( T::getStaticClassId() ); };

}; 
```

运行时转换（即`dynamic_cast`）函数如下所示：

```
template <typename T>
T* runtime_ptr_cast(TypedObject* p) {
  if( (p) && (p->isOfClass<T>()) )
    return static_cast<T*>( p );
  return NULL;
};

template <typename T>
typename std::enable_if< 
  std::is_const< T >::value,
T* >::type runtime_ptr_cast(const TypedObject* p) {
  if( (p) && (p->isOfClass<T>()) )
    return static_cast<T*>( p );
  return NULL;
}; 
```

然后，您只需要宏来自动创建虚拟和静态函数：

```
#define MY_RTTI_SYSTEM_CREATE_TYPE_1_BASE( NEWCLASSID, BASECLASSNAME ) \
  public: \
    virtual int getClassId() const { return NEWCLASSID; }; \
    static int getStaticClassId() { return NEWCLASSID; }; \
     \
    virtual bool isOfType(int aID) const { \
      return ((aID == NEWCLASSID) || BASECLASSNAME::isOfType(aID)); \ 
    }; 
```

然后，您可以像这样创建一个新类：

```
class Foo : public TypedObject {

  // ... some code, as usual ...

  // call the macro with a given ID number and the name of the base-class:
  MY_RTTI_SYSTEM_CREATE_TYPE_1_BASE(1, TypedObject)
}; 
```

这导致：

```
int main() {
  Foo f;
  TypedObject* b = &f;

  // check the type:
  if( b->isOfClass<Foo>() ) 
    std::cout << "b is indeed for class Foo!" << std::endl;

  // make a dynamic cast:
  Foo* pf = runtime_ptr_cast<Foo>( b );
  if( pf )
    std::cout << "cast to 'Foo*' was successful!" << std::endl;

  const TypedObject* cb = b; 
  const Foo* cpf = runtime_ptr_cast<const Foo>( cb );
  if( cpf )
    std::cout << "cast to 'const Foo*' was successful!" << std::endl;

  Foo* pf2 = runtime_ptr_cast<Foo>( cb ); // ERROR: no such function (invalid cast).
}; 
```

当然，您也可以将其扩展到多重继承，只需创建更多宏来注册类型。这个方案也有无数的变化（就我个人而言，在[我的实现](https://github.com/mikael-s-persson/ReaK/tree/master/src/ReaK/core/rtti)中，我将类型注册到一个全局存储库并提供对工厂函数的访问权限）。

我认为没有任何实用的方法可以避免在您创建的每个类中都使用 MACRO 调用。我已经考虑了一段时间（前段时间，当我自己做的时候），我得出结论，最简单和最干净的解决方案是在课堂上进行 MACRO 调用（尽管我非常不屑于 MACRO 在一般的）。但我不知道，也许其他人对此有更好的（基于模板的）解决方案，不会造成太多混乱或不太干扰。我多年来一直在使用这个方案，它非常漂亮和干净。

> 我没有多重继承，但我有几个级别的继承。

上述方案适用于任何级别的继承（即，它是一种可扩展的解决方案）。如果有一天您愿意，它也可以很容易地适应多重继承。

> 对内存占用的影响必须尽可能小

我知道 LLVM 更喜欢没有任何虚函数的解决方案，而是在基类中使用整数 ID 数据成员。使用这种方案（但可能）实现与上述相同的功能变得有点困难。使用虚拟函数要容易得多，它只占用一个指针（vtable 指针）的空间，该指针通常不比整数 ID 数据成员大多少。如果类已经是多态的，那么成本就完全没有了。而且，当然，上面的内容比内置的 C++ RTTI 轻得多。所以，除非你真的想压缩那些你可以用积分 id（或枚举）解决方案节省的字节，否则我建议你使用基于虚拟函数的解决方案，就像我上面展示的那样。

> 无法执行动态分配。

一般不需要动态分配。只有更复杂（且功能丰富）的 RTTI 实现需要一些动态分配。如果您想要的只是能够执行“classof()”（因此，动态转换），那么肯定不需要动态内存分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T18:10:03.193

您想要某种树状数据结构作为全局变量来存储您的类层次结构

```
class Foo : public Foo_Parent {
  IS_PART_OF_HIERARCHY

public:
  Foo();
  ...
}

#define IS_PART_OF_HIERARCHY
  private:
    static Hierarchy<string> *node;
  public:
    bool isChildOf( string parent ) const;
    bool isParentOf( string child ) const; 
```

在 .cpp 文件中

```
INSERT_INTO_HIERARCHY( Foo, Foo_Parent )

Foo::Foo() {}
....

#define INSERT_INTO_HIERARCHY( class_name, parent_class_name )
  Hierarchy<string> class_name::node = classes_hierarchy.insertAfter( #parent_class_name );
  bool class_name::isChildOf const( string ) {
      auto *node = class_name::node;
      // traverse the parents of node
  }
  bool class_name::isParentOf const( string ) {
      auto *node = class_name::node;
      // traverse the children of node
  } 
```

我在STL中找不到层次类，实现一个有点棘手，我不知道是否值得努力。

# qt - 如何获取实际可见光标的行号

> ID：15814776
> 
> 赞同：5
> 
> 时间：2013-04-04T14:57:07.637
> 
> 标签：qt, user-interface

我可以通过使用来获取光标所在的行`QTextEdit.textCursor().blockNumber()`，但是当一行换成多行时，它不能返回实际的行号。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T20:52:12.247

我不确定它会起作用，所以我编写了一个快速测试应用程序（Qt 5.0.1）并且它起作用了，这里是它的一部分：

```
void MainWindow::on_plainTextEdit_cursorPositionChanged()
{
    QPlainTextEdit *edit = qobject_cast<QPlainTextEdit *>(sender());
    Q_ASSERT(edit);
    QTextCursor cursor = edit->textCursor();
    cursor.movePosition(QTextCursor::StartOfLine);

    int lines = 1;
    while(cursor.positionInBlock()>0) {
        cursor.movePosition(QTextCursor::Up);
        lines++;
    }
    QTextBlock block = cursor.block().previous();

    while(block.isValid()) {
        lines += block.lineCount();
        block = block.previous();
    }
    ui->label->setText(QString::number(lines));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-01T16:34:47.180

这是 Python 中的类似解决方案。它解决了我在上面评论中提到的问题。这是一个子类中的方法`QTextEdit`：

```
def getLineAtPosition(self, pos):
  cursor = self.textCursor()
  cursor.setPosition(pos)

  cursor.movePosition(QTextCursor.StartOfLine)
  lines = 0

  lines_text = cursor.block().text().splitlines()
  lines_pos = 0
  for line_text in lines_text:
    lines_pos += len(line_text) + 1
    if lines_pos > cursor.position() - cursor.block().position():
      break
    lines += 1

  block = cursor.block().previous()
  while block.isValid():
    lines += block.lineCount()
    block = block.previous()

  return lines 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T15:58:02.937

`QTextCursor`有很多有用的方法，比如：

```
int QTextCursor::position () const 
```

返回光标在文档中的绝对位置。光标位于字符之间。

和

int QTextCursor::positionInBlock () 常量

返回光标在块内的相对位置。光标位于字符之间。

这相当于`position() - block().position()`.

# c# - 在 .NET/C# 中渲染 Handlebar 模板服务器端

> ID：15814781
> 
> 赞同：27
> 
> 时间：2013-04-04T14:57:18.567
> 
> 标签：c#, .net, templates, handlebars.js

是否有在 .NET 中呈现车把模板的现有库？

我想用它作为用户创建 HTML 电子邮件模板的模板引擎

我花了几个小时寻找，但似乎找不到任何东西。包装好的 javascript 渲染模型可以，但本地库更好。

否则，是否有更适合 .NET 环境的类似模板引擎？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-01-10T17:28:19.527

自从回答了这个问题后，一个成熟的 Handlebars 原生 .NET 库就可用了（披露：我是主要作者）。

[GitHub](https://github.com/rexm/handlebars.net)和[NuGet 上的Handlebars.Net](https://www.nuget.org/packages/Handlebars.Net/)

它将 Handlebars 模板编译为 IL，并具有出色的功能覆盖率。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-04T15:08:54.920

典型的，发布后不久，我想我找到了解决方案：

[https://github.com/jehugaleahsa/mustache-sharp#readme](https://github.com/jehugaleahsa/mustache-sharp#readme)

名字中的“Mustache”让我很困惑，但实际上这个库是基于把手语法的。

从那以后，我开始了我自己的这个库的 Fork，以启用“大于/小于/等于”标签：

[https://github.com/PaulGrimshaw/mustache-sharp](https://github.com/PaulGrimshaw/mustache-sharp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-15T15:01:48.157

另一种选择是通过 V8 绑定在 C# 中封装实际的 handlebars.js 库。 [https://github.com/pressf12/handlebars.cs](https://github.com/pressf12/handlebars.cs)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T15:02:23.543

如果您想使用 Handlebar 服务器端，请查看 node.js 和这两个问题：

[服务器和客户端上带有 Handlebars.js 的 Node.js](https://stackoverflow.com/questions/10037936/node-js-with-handlebars-js-on-server-and-client#)

[从 C# 连接到 node.js 服务器](https://stackoverflow.com/questions/14205604/connecting-to-a-node-js-server-from-c-sharp#)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-26T18:56:52.087

似乎您更喜欢在服务器端使用车把视图，但是如果您想在 C# 中编译它们在服务器端，并在客户端渲染它们，那么我找到了 2 个选项：

*   [来自另一个问题的 with-ember.js bundletransform 解决方案](https://stackoverflow.com/a/16264001/135202)
*   [我自己的解决方案，基于上述，但不使用灰烬，只是直把手。](https://gist.github.com/agbell/70f06205e205cd995850)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-04T15:05:51.320

车把确实是为浏览器内的用户制作的。我认为在服务器上使用它不是一个好主意（即使 node.js 也没有服务器端 Handlebars 编译器）

虽然，Handlebars 的基本语法源自[Mustache 模板引擎](http://mustache.github.com/)。而且，Mustache 直接支持 .NET！

# sql - 需要帮助将此 Oracle SQL 转换为 T-SQL

> ID：15814790
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:57:40.240
> 
> 标签：sql, sql-server, oracle

需要帮助将以下 Oracle SQL 查询转换为 T-SQL 查询

```
SELECT rh.user_name, rh.report_name, rh.report_run_date
FROM report_history rh,
  (SELECT max(report_run_date) as maxdate, report_name
   FROM report_history
   GROUP BY report_name) maxresults
WHERE rh.report_name = maxresults.report_name
AND rh.report_run_date= maxresults.maxdate; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:00:43.550

尝试：

```
SELECT 
  rh.user_name, 
  rh.report_name, 
  rh.report_run_date

FROM 
  report_history rh

  INNER JOIN 
  (
     SELECT 
       max(report_run_date) as maxdate, 
       report_name
     FROM 
       report_history
     GROUP BY 
       report_name

  ) maxresults
  ON rh.report_name = maxresults.report_name
  AND rh.report_run_date= maxresults.maxdate; 
```

# install4j - 在 Install4j 中更改默认安装位置并创建桌面快捷方式链接

> ID：15814797
> 
> 赞同：2
> 
> 时间：2013-04-04T14:57:57.090
> 
> 标签：install4j

我正在使用 Install4j 为我的应用程序创建安装程序。

1.  我想将默认安装文件夹位置更改为“我的文档”文件夹。我正在尝试从“安装位置”屏幕执行此操作。但没有得到结果。谁能告诉我我需要更改/编辑哪些内容？

2.  我想创建一个桌面快捷方式链接图标。我正在尝试使用“桌面集成”“类别下的“添加桌面链接”操作来做到这一点。但没有得到预期的结果。我确定我错过了一些东西，但不知道是哪一部分。所以任何人都可以建议我整个操作添加一个桌面链接？

我不是 Install4j 方面的专家，但具有基本知识。我在谷歌上搜索并检查了 stackoverflow 上的先前线程，但没有得到我预期的结果。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:26:50.813

> 我想将默认安装文件夹位置更改为“我的文档”文件夹。

在安装程序的“启动”节点中，使用脚本添加“运行脚本”操作：

```
File docsDir = WinFileSystem.getSpecialFolder(SpecialFolder.DOCS, false);
File installationDir = new File(docsDir, "myApp");
context.setInstallationDirectory(installationDir);
return true; 
```

> 我想创建一个桌面快捷方式链接图标。我正在尝试使用“添加桌面链接”操作

可能该文件尚不存在。在“安装”屏幕上的“安装文件”操作之后移动该操作。

# mysql - MySQL表格式使用watch

> ID：15814798
> 
> 赞同：0
> 
> 时间：2013-04-04T14:57:59.997
> 
> 标签：mysql, bash, unix, monitoring, watch

目前，当我运行以下命令时，它不会以正常格式输出 MySQL 查询：

```
cat mysqlmon.sh
mysql --raw -p"password" -D database -e "select * from table ORDER BY data_id DESC LIMIT 1;"

watch -n1 ./mysqlmon.sh 
```

我尝试过使用和不使用 --raw 但它总是以下面的选项卡格式输出：

data_id date player_id action world_id xyz data 55151 2013-04-04 15:56:46 1 0 1 -360 63 -167 32

这样做的原因是因为我希望列对齐，因为日期很长。

我是否缺少手册页中的 MySQL 或 watch 开关？

我也不确定如何像这样运行 watch 和 mysql （因为它出错或挂起）：

```
watch -n1 mysql --raw -p"password" database -e "select * from table ORDER BY data_id DESC LIMIT 1;"
watch -n1 `mysql --raw -p"password" database -e "select * from table ORDER BY data_id DESC LIMIT 1;"`
watch -n1 `mysql --raw -p"password" database -e 'select * from table ORDER BY data_id DESC LIMIT 1;'`
watch -n1 "mysql --raw -p"password" database -e 'select * from table ORDER BY data_id DESC LIMIT 1;'" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:05:38.400

你总是可以使用`\G`而不是`;`

例子：

```
SELECT 'foo' as bar, 'meh' as moo, NOW() as date\G

-- should produce something like this:
-- ===============
-- bar:  foo
-- moo:  meh
-- date: 2013-04-06 17:05:00 
```

# spring - JUnit 测试用例在使用 Maven 运行时失败，但可以与 Eclipse 一起使用

> ID：15814806
> 
> 赞同：0
> 
> 时间：2013-04-04T14:58:20.943
> 
> 标签：spring, maven, junit

我有一个 Junit 测试用例，如果我使用 Maven 运行它就不起作用。但是当我使用 Eclipse 运行时，同样的测试用例可以工作。我的 Junit 课是这样的。

```
@RunWith(SpringJUnit4ClassRunner.class) 
@ContextConfiguration(locations = {"classpath:/test-config.xml"} )
public class TestDaoImpl { 
private final static Logger logger = Logger.getLogger(TestDaoImpl.class);

@Autowired
private MyDaoImpl myDao;

@Test
public void testMyDao() throws Exception {
logger.info("Called testMyDao()================");
     // here myDao is null and throwing NullPointerException in sunfire log.
     // But this works when I run using Eclipse.
List<MyObj> objList = myDao.getList();

}

@Test
public void testMyCode() throws Exception {
logger.info("Called testMyCode()================");
     // this test case works with Maven
List<MyObj> objList = MyClass.getList();

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:16:37.267

sunfire 插件丢失。添加后它开始工作。

# c# - 有什么方法可以阻止 WebBrowser 滚动到页面之外

> ID：15814807
> 
> 赞同：0
> 
> 时间：2013-04-04T14:58:30.983
> 
> 标签：c#, html, browser, windows-phone-8

有什么方法可以防止 Windows Phone 8 中 WebBrowser 的页面滚出？我不知道我的问题是否清楚，所以我举个例子

如果我在网络浏览器中导航到 StackOverflow，即使我在页面顶部，我也可以向上滚动。这使得最上面的菜单向下显示菜单上方的部分中的白色块。我在页面外滚动。当我释放滚动页面返回到正确的位置

有什么办法可以防止页面外滚动？请注意，我仍然希望能够滚动，但我希望当我在顶部时滚动停止

希望我的英语很清楚

我可以分享的代码不多，这是 WebBrowser 处理滚动的标准方式，我找不到覆盖它的方法

```
<phone:WebBrowser  Source="http://stackoverflow.com/questions/ask"/> 
```

启动应用程序，向上滚动您会看到顶部菜单向下滚动。有什么办法可以防止滚动超出界限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:36:36.870

好的供其他人参考，我回答我的问题

由于操作事件被网络浏览器吞没，因此没有简单的方法可以做到这一点。

我找到了这个链接[http://www.scottlogic.co.uk/blog/colin/2011/12/a-simple-multi-page-windows-phone-7-phonegap-example/](http://www.scottlogic.co.uk/blog/colin/2011/12/a-simple-multi-page-windows-phone-7-phonegap-example/)

它提供了一些库来从 WebBrowser 获取操作事件

为了解决这个问题，你（和我）仍然需要为 operationDelta 事件创建一个算法，我不确定它是否可行......

# java - 将句子转换为变量名语法

> ID：15814812
> 
> 赞同：0
> 
> 时间：2013-04-04T14:58:41.680
> 
> 标签：java

如何将字符串从“Bobs big barbeque”之类的字符串转换为 bobsBigBarbeque？

```
String variableName = result;
for ( int i = 0; i < result.length( ); i++ ) {
    char c = result.charAt( i );
    if ( c == ' ' ) {
       Character.toUpperCase( variableName.charAt( result.indexOf( c )+1 ) );
    }
    variableName = variableName.replace( " ", "" );
    Character.toLowerCase( variableName.charAt( 0 ) );
    System.out.println( variableName );
} 
```

我几乎让它工作了。我现在唯一的问题是线路....

```
Character.toLowerCase( variableName.charAt( 0 ) ); 
```

我必须将第一个字符转换为小写

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:00:16.453

```
String str = "Bobs big barbeque";
str = str.replace(" ", ""); 
```

如果您只想替换给定字符串中的空格，请尝试上面的代码：

我根据您给定的输入和输出编写了以下代码：

```
public static void main(String[] args) {

    String str = "Bobs big barbeque";
    String newStr = String.valueOf(str.charAt(0)).toLowerCase();
    for (int i = 1; i < str.length(); i++) {
        if (str.charAt(i) == ' ') {
            newStr = newStr
                    + String.valueOf(str.charAt(i + 1)).toUpperCase();
            i = i + 1;
        }
        newStr = newStr + String.valueOf(str.charAt(i));
    }

    System.out.println(newStr);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:11:51.207

```
String sentence = "Bobs big barbeque";
String[] words = sentence.split(" ");
String newVarName = "";

for (int i = 0; i < words.length; i++) {
  if (i == 0) {
    newVarName += words[i].toLowerCase();
  } else {
    newVarName += words[i].substring(0,1).toUpperCase() + words[i].substring(1);
  }
} 
```

您可能需要花时间通过确保子字符串不会溢出来使其更安全，但本质上它需要您的句子，在空格上将其分开，然后通过将第一个单词小写来重构它，所有其他单词都以 a 开头首都。

编辑：修复了我的字符串函数名称......或者你可以这样做，我认为它看起来更干净：

```
for (int i = 0; i < words.length; i++) {
    newVarName += words[i].substring(0,1).toUpperCase() + words[i].substring(1);
}
newVarName = newVarName.substring(0,1).toLowerCase() + newVarName.substring(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:27:27.523

```
String a = "Bobs big barbeque";
a = WordUtils.capitalizeFully(a);  //Capitalize the first letter of each word only 
a = a.replace(" ", "");            // Remove Spaces
a = a.substring(0,1).toLowerCase() + a.substring(1); // Lowercase first letter 
```

注意：或者只是大写（a）以大写每个单词的第一个字母，并保留单词的其余部分。例如

BoBs big barBeque 将是 BoBs BIg BarBeque 与大写（a）

Bobs Big Barbeque with capitlizeFully(a);

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-04T15:01:25.180

```
String a = "Bobs big barbeque";
String r = a.replace(" ",""); 
```

r 现在包含没有空格的字符串...

# android - Android中的apk资源文件和内部/外部文件的混淆

> ID：15814819
> 
> 赞同：1
> 
> 时间：2013-04-04T14:58:56.123
> 
> 标签：android

我正在编写一个应用程序，该应用程序具有由 ImageViews 组成的 LinearLayout 组成的 Horizo​​ntalSrollView。

我在 res/drawable 文件夹中有 Horizo​​ntalScrollView 的默认图像。这些图像应检查某处服务器上的图像列表，如果文件不同，则应下载新文件，并且应删除文件中不存在但设备上的其他文件。

所有这些都有效，除了在我的调试过程中我有一个问题。每次我在 Eclipse 上单击“运行”时，我的应用程序的内部和外部存储是否会被清除干净，或者即使我正在安装我的应用程序的更新“版本”，文件是否仍保留在那里？

# java - 如何在 Java 中使用条形码？

> ID：15814823
> 
> 赞同：1
> 
> 时间：2013-04-04T14:59:09.603
> 
> 标签：java, netbeans, barcode

我想创建条形码并在 java 中读取它。我读过这个，但我不确定要使用什么。

现在，我阅读了有关 Java Barcode API 和 BarcodeImageHandler 的信息。任何人都可以给我一个建议来了解更多关于这个的信息吗？

我不知道它是否相关，但我使用的是 NetBeans 7.1.2 IDE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:27:56.363

尝试在本[教程中使用](http://java.dzone.com/articles/java-barcode-api)[ZXing](http://code.google.com/p/zxing/)，或者您可以下载条形码字体，例如[Code38](http://www.barcodesinc.com/free-barcode-font/)或[IDAutomationHC39M](http://www.dafont.com/idautomationhc39m.font)，并在您的文档中使用它。

# jakarta-ee - 使用 EJB 事务，当我在主外部事务中插入记录时，在内部事务中找不到它（由 REQUIRES_NEW 注释）

> ID：15814827
> 
> 赞同：0
> 
> 时间：2013-04-04T14:59:18.003
> 
> 标签：jakarta-ee, jpa, transactions, ejb, jta

我的目标是在我的数据库中插入一条记录，然后在新事务中更新它。

我这样尝试：

```
@PersistenceContext(unitName="Table")
private EntityManager manager;

@EJB
private ITransactionTest itt;

public void insertRecord(int i) throws RuntimeException{
      Record record = new Record();
      record.setId(i+"");
      record.status(1);
      manager.persist(record);
      manager.flush();
      itt.updateRecord(i);
}

@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public void updateRecord(int i) throws RuntimeException{
      Record record = manager.find(Record.class, i+"");
      record.setStatus(2);
      manager.flush();
} 
```

但是，它不起作用。我也尝试用它`getReference()`来检索我的记录，然后它抛出一个异常，说找不到实体。该实体似乎不再驻留在持久性上下文中。

如果我删除 的注释`REQUIRES_NEW`，它可以工作并且我可以成功更新我的记录。

那么如何在新交易中更新我的记录呢？如何在跨事务的持久性上下文中保持实体处于托管状态？

似乎使用 JPA 执行更新 sql 查询可以实现我的目标。但是还有其他方法吗？

最好的祝福，

卡杰拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:05:25.897

“持久性上下文通常绑定到 Java EE 中的 JTA 事务，并且持久性上下文在事务边界（事务范围）开始和结束，除非您使用扩展实体管理器。”

来源：[http](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/transactions.html) ://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/transactions.html 。

JPA 仅支持（理论上）READ_COMMITTED 隔离（请参阅[Hibernate、spring、JPS 和隔离 - 不支持自定义隔离](https://stackoverflow.com/questions/5234240/hibernatespringjpaisolation-does-not-work)）以获得最终解决方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:24:58.160

查看[http://www.adam-bien.com/roller/abien/entry/how_to_self_invoke_ejb](http://www.adam-bien.com/roller/abien/entry/how_to_self_invoke_ejb)
我认为该条目中的问题已解决。

# java - 如何将 CXF 异常从服务器传播到客户端

> ID：15814829
> 
> 赞同：1
> 
> 时间：2013-04-04T14:59:24.653
> 
> 标签：java, cxf

我有一个 WSDL First Apache CXF Web 服务，它按预期工作，除了我在服务器端抛出的异常在客户端上没有收到。相反，在客户端，我得到一个 SOAPFaultException 类型的异常，其中只有 detailMessage 包含来自原始服务器端异常的消息，但我想接收我在服务器端抛出的确切异常类型，包括原因链。

我希望默认情况下它会像这样工作，但它肯定不在我的系统中。我一直在检查 CXF 文档以找到有关如何实现此目的的提示，但到目前为止我还没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T02:48:06.147

SOAP 参考不支持堆栈跟踪。如果需要，您需要将堆栈跟踪复制为 SoapFault 返回的消息。

使用 CXF，您可以通过在收入拦截器链上添加拦截器来实现。请参阅[此问题](https://stackoverflow.com/questions/15811455/logging-request-response-with-cxf-dynamic-client/15825008#15825008)以了解如何创建拦截器。

你应该把它放在 POST_INVOKE 阶段。

# pagination - 尝试使用 laravel 分页会破坏我的控制器/视图

> ID：15814839
> 
> 赞同：0
> 
> 时间：2013-04-04T14:59:39.707
> 
> 标签：pagination, laravel, eloquent, laravel-3

我正在尝试让分页在 Laravel 中工作。我之前没有使用过分页，所以我尝试使用文档和谷歌结果中的一些示例。我想知道是否需要在配置中的某个地方打开“分页”。

这是我的简单工作控制器：

```
public function get_index() {
  $locations = Location::all();
  return View::make('location.index')->with('locations', $locations)->render();
} 
```

当我尝试像这样添加分页时，它会中断：

```
public function get_index() {
  $locations = Location::paginate(5);
  return View::make('location.index')->with('locations', $locations)->render();
} 
```

..我得到错误：

```
Unhandled Exception

Message:
Error rendering view: [location.index]

Trying to get property of non-object 
```

这是我的 location.index 视图：

```
@layout('layouts.blank')
@section('content')
<div class="row">
<div class="twelve columns">
    <div role="main" id="content">
        <h3>Locations - All</h3>
        @if($locations)
            <table class="twelve">
                <thead>
                    <tr>
                        <th style="text-align: left;">Address</th>
                        <th>Area</th>
                        <th>Region</th>
                        <th>Edit</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                @foreach($locations as $location)
                <tbody> 
                    <tr>
                        <td style="text-align: left;">{{ $location->company,', ',$location->add_name,', ',$location->add_city }}</td>
                        <td> – </td>
                        <td> – </td>
                        <td>{{ HTML::link('location/update/'.$location->id, '',array('class'=>"foundicon-edit updateicon")) }}</td>
                        <td>{{ HTML::link('location/delete/'.$location->id, '',array('class'=>"foundicon-remove warnicon")) }}</td>
                    </tr>
                </tbody>
                @endforeach
            </table>
        @else
          Looks like we haven't added any locations, yet!
        @endif
        <p>{{ HTML::link('location/create', 'Create a location', array('class'=>"small radius button")) }}</p>
    </div>
</div>
</div>
@endsection 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:47:43.807

我对这个主题的阅读不够深入。它现在正在工作，这是我必须在视图中更改的内容：

```
//from:
@foreach($locations as $location)

//to:
@foreach($locations->results as $location) 
```

那只返回了 5 个结果。然后添加到我的表格页脚的链接，我添加了这个 HTML/Blade：

```
<tfoot>
  <tr>
    <td colspan="5"> {{ $locations->links() }} </td>
  </tr>
</tfoot> 
```

希望其他人受益，因为我在文档中没有发现这一点非常清楚。

# java - 休眠以获取最大ID并将其存储在内存中

> ID：15814840
> 
> 赞同：-1
> 
> 时间：2013-04-04T14:59:44.120
> 
> 标签：java, spring, hibernate

我是使用休眠的新手。我编写了以下代码在我的订单表中获取最大 ID。

```
 public int getOrderMaxUID() {
     Session session = sessionFactory.getCurrentSession();
     String query = "SELECT max(o.UID) FROM Order o";
     List list = session.createQuery(query).list();
     int maxOrderUID = ((Integer) list.get(0)).intValue();

     return maxOrderUID;
 } 
```

在向表中添加新记录之前，我在控制器中调用此方法。

```
orderService.getOrderMaxUID();
orderService.add(o); 
```

**问题：**记录也被其他进程添加到我们的订单表中。因此，为了避免重复 PK 问题，我在插入记录之前从订单表中获取最大 ID。但是当其他进程添加记录时我仍然会出现以下错误

```
2013-04-04 09:27:24,841 WARN  ["ajp-bio-8009"-exec-2]     org.hibernate.util.JDBCExceptionReporter - SQL Error: 2627, SQLState: S1000
2013-04-04 09:27:24,841 ERROR ["ajp-bio-8009"-exec-2]     org.hibernate.util.JDBCExceptionReporter - Violation of PRIMARY KEY constraint 'PK_Order'.     Cannot insert duplicate key in object 'Order'. The duplicate key value is (1001508). 
```

和

```
org.springframework.dao.DuplicateKeyException: Hibernate flushing: could not insert: 
```

我希望休眠将 getMaxOrderId() 方法检索到的 id 存储在内存中，并在添加新记录时使用下一个数字。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:01:56.087

为什么不让 Hibernate 为您生成 ID？

```
/** The id. */
@Id @GeneratedValue
private Long id; 
```

编辑：

只要您通过休眠进行，您就可以从多个进程创建条目，并且ID将相应调整。

但是，在休眠之外插入数据库会导致问题。您可以使用客户 ID 生成器来解决此问题。[我发现这个例子可能会有所帮助](http://danu-javastuff.blogspot.co.uk/2009/01/custom-id-generator-class-for-hibernate.html)

如果您在休眠之外编辑数据库，您也可能会遇到其他问题（尤其是如果您使用二级缓存）

如果你使用相同的`Session`，你也会遇到一级缓存引起的问题。

# bash - 如何防止 bash for 循环转换字符串数据

> ID：15814843
> 
> 赞同：0
> 
> 时间：2013-04-04T14:59:47.013
> 
> 标签：bash, awk, grep

我想从消息日志中过滤掉日期戳并删除所有出现的事件：（基本上这是 USB 历史清理脚本的一部分，head -n1 仅因测试而添加）

```
delimiter=`echo $HOSTNAME | cut -f1 -d.`

for item in `egrep usb /var/log/messages | awk -F"$delimiter" '{print $1}' | uniq | head -n1`; do
echo ${item}
done 
```

当我运行这个命令时：

```
egrep usb /var/log/messages | awk -F"$delimiter" '{print $1}' | uniq | head -n1 
```

输出很好：

```
Mar 31 03:25:03 
```

但是当它返回给 for 循环时，由于空格，数据会像这样传输：

```
Mar
31
03:25:03 
```

问题是：我怎样才能防止这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:36:22.467

代替：

```
for item in `whatever`; do
echo ${item}
done 
```

采用：

```
whatever |
while IFS= read -r item; do
echo "${item}"
done 
```

但是您的整个脚本可以重写为：

```
awk -F"${HOSTNAME%%.*}" '/usb/ && !seen[$1]++ {print $1}' /var/log/messages 
```

# regex - 如何从 Google 电子表格中的正文中删除 HTML 标记？

> ID：15814846
> 
> 赞同：5
> 
> 时间：2013-04-04T14:59:52.453
> 
> 标签：regex, google-docs

我正在清理谷歌文档中的文本。挑战在于副本包含`HTML`标记，我试图将其删除以保留干净的文本。

我已经创建了以下内容，但它似乎只删除`HTML`了单元格中的第一个代码实例，我该如何将其全部取出？

```
= regexreplace(C9,"\<[a-zA-Z0-9-?]*\>","") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T15:36:24.370

试试这个正则表达式：

```
= regexreplace(C9,"<.*?>","") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-09T14:44:16.987

```
=REGEXREPLACE(C9; "</?\S+[^<>]*>";"") 
```

或者

```
=REGEXREPLACE(C9; "</?\S+[^<>]*>";) 
```

会做的。

# perl - 隐藏 glibc 输出和段错误（系统调用）

> ID：15814847
> 
> 赞同：0
> 
> 时间：2013-04-04T14:59:53.707
> 
> 标签：perl, bash

我正在为一个学生项目编写一个类似 bash 的 shell。我需要对`perl` *行命令进行自动测试*。

```
my $cmd = "(echo \"foo\" | ./shell >& /dev/null)";
system($cmd);
if ($? == 35584) {
    print "SIGSEGV";
}
elsif ($? == 34304) {
    print "GLIB C";
}
else {
    print "GOOD";
} 
```

我希望能够在`segfault`or上隐藏输出`glibc`。

@Marc B 好的，但是我的 shell 在输出 0 上读取，所以我必须有“echo”：s

@drquicksilver *** 检测到 glibc****./shell: free(): 无效指针: 0x0000000000608291 ** * OR 分段错误*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:34:53.507

首先，`system`executes `sh`，但您使用的是`csh`语法。

```
my $cmd = "(echo \"foo\" | ./shell >& /dev/null)"; 
```

应该

```
my $cmd = "(echo \"foo\" | ./shell >/dev/null 2>&1)"; 
```

但是执行 shell 只会干扰你的测试。所以让我们完全避免使用外壳。

```
use Config   qw( %Config );
use IPC::Run qw( run );

sub sig_name {
   my ($sig_num) = @_;
   my %sig_names;
   @sig_names{ reverse split ' ', $Config{sig_num} } =
      reverse split ' ', $Config{sig_name};
   return $sig_names{$sig_num}
      ? "SIG$sig_names{$sig_num} (".($sig_num).")"
      : $sig_num;
}

run [ './shell' ], \"foo\n", '>','/dev/null', '2>&1';

if (my $sig_num = $? & 0x7F) {
   print "Killed by signal ".sig_name($sig_num)."\n";
} elsif (my $exit_code = $? >> 8) {
   print "Exited with error code $exit_code\n";
} else {
   print "GOOD\n";
} 
```

你所说的“GLIB C”实际上是 SIGABRT。*

# html - 选择给定类的第一个孩子（CSS）

> ID：15814854
> 
> 赞同：2
> 
> 时间：2013-04-04T15:00:24.033
> 
> 标签：html, css, css-selectors

我们有一个部分 html：

```
<ul>
    <li class="class1">AFFECTED</li>
    <li class="class1 class2">NOT</li>
    <li class="class1">NOT</li>
</ul>

<ul>
    <li class="class1 class2">NOT</li>
    <li class="class1">AFFECTED</li>
    <li class="class1">NOT</li>
</ul>

<ul>
    <li>NOT</li>  
    <li class="class1">AFFECTED</li>
    <li class="class1">NOT</li>
</ul> 
```

我需要一个***通用*的css 选择器**，用于任何只有 class1 的列表的第一个 li。

*   具有额外课程（class2）的 li 不得受到影响。
*   只应选择 class1 的第一个 li（以更改 A.
*   没有 JS/jQuery。
*   li 是浮动的，所以没有硬编码的 nth-child。
*   代码是自动生成的，因此无法添加/删除自定义类。

我尝试使用 :not(class2), [class2] :first-child & :first-of-type 但无济于事。

谢谢！

解决方案：http: [//jsfiddle.net/6hxZa/3/](http://jsfiddle.net/6hxZa/3/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T15:10:19.120

您应该能够`.class1`使用此选择器仅捕获元素，而不能捕获其他元素：

```
li[class="class1"] 
```

您将无法仅匹配这些元素中的*第一个*，因为没有选择器来执行此操作。`:first-child`只选择第一个子元素，无论`ul`它有什么类，并`:first-of-type`选择第一个`li`，也不管它的类（有效地使它与元素相同`:first-child`）`li`。您必须使用[此处](https://stackoverflow.com/questions/2717480/css-selector-for-first-element-with-class/8539107#8539107)给出的技术（其中还解释了为什么这两个伪类不起作用）将规则应用于所有此类元素，然后为后续元素撤消它：

```
li[class="class1"] {
    /* Apply styles... */
}

li[class="class1"] ~ li[class="class1"] {
    /* ... and remove them after the first */
} 
```

请注意，使用了相同的选择器，因此无类元素和具有的元素`.class2`都完全不受影响。

此 jsFiddle 使用提供的 HTML 演示了所需的效果：http: [//jsfiddle.net/Cmypc/4/](http://jsfiddle.net/Cmypc/4/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T15:06:47.793

如果`class2`要从选择器中明确排除，请使用：

```
li.class1:first-child:not(.class2) { } 
```

如果您想排除除`class1`使用以外的任何其他类：

```
li[class=class1]:first-child { } 
```

如果您知道要排除哪个类，我会推荐第一个，因为它对其他/未来样式的干扰较小。

#1 的 jsFiddle：http: [//jsfiddle.net/Cmypc/](http://jsfiddle.net/Cmypc/) #2 的 jsFiddle：http: [//jsfiddle.net/Cmypc/1/](http://jsfiddle.net/Cmypc/1/)

**编辑**如果您正在寻找`:first-of-class`选择器，则没有选择器（请参阅[此线程](https://stackoverflow.com/questions/2717480/css-selector-for-first-element-with-class)）。未来的解决方案可能是`:nth-match`选择器，但您必须等待 CSS4。或者，您可以使用更精细的清除选择器来撤消应用的样式（请参阅 BoltClock 的答案）作为解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:02:07.403

试试这个

```
li:first-child
{
...
} 
```

这仅适用于 1 级

```
li.class1:first-child
{
color:#ff0000;
} 
```

这是一个[小提琴](http://jsfiddle.net/x7Ezh/)

如果您不希望 class2 的列表受到影响，也许这对您有用

```
 li.class1.class2:first-child
    {
        ...
        code that will reset
    } 
```

# python - 用正则表达式替换python

> ID：15814855
> 
> 赞同：0
> 
> 时间：2013-04-04T15:00:24.643
> 
> 标签：python, regex, replace

我有 fortran 格式的数字字符串，看起来这种`0.1245-102` 浮点转换不起作用，因为格式不是预期的：`0.1245e-102`

我使用这个命令

`re.sub(r"[0-9]-[0-9]",r"e-","0.1245-102")`

我对正则表达式非常陌生，通过这种方式我可以获得`0.124e-02` 如何保持`5e-1`新结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:08:29.333

您正在寻找：

```
r'(?<=\d|\.)-(?=\d)' 
```

`-`如果前面有数字或点，则匹配 a ，后面有数字。

演示：

```
>>> exponent = re.compile(r'(?<=\d|\.)-(?=\d)')
>>> exponent.sub('e-', '0.1245-102')
'0.1245e-102'
>>> float(exponent.sub('e-', '0.1245-102'))
1.245e-103
>>> float(exponent.sub('e-', '1-10'))
1e-10
>>> float(exponent.sub('e-', '1.-10'))
1e-10
>>> float(exponent.sub('e-', '-1-10'))
-1e-10 
```

要同时处理`-`和`D+`（负指数和正指数），您可以使用：

```
r'(?<=\d|\.)D?(?=(?:\+|-)\d) 
```

这将允许并替换一个 optional `D`，在替换时将`-`or留在原处：`+`

```
>>> exponent = re.compile(r'(?<=\d|\.)D?(?=(?:\+|-)\d)')
>>> float(exponent.sub('e', '0.1245-102'))
1.245e-103
>>> float(exponent.sub('e', '456D+5'))
45600000.0 
```

这*确实*允许 the`D`也位于 , 之前`-`，因此`0.1245D-102`也有效，但它简化了替换处理。

# ruby - 绑定到 LDAP 服务

> ID：15814857
> 
> 赞同：1
> 
> 时间：2013-04-04T15:00:29.377
> 
> 标签：ruby, ldap

我正在使用 Ruby 并尝试绑定 LDAP 服务器。Ruby 文档在这里似乎很模糊，在以下之后我需要做什么并不明显：

```
>> require 'uri'
=> true

>> newuri = URI::LDAP.build({:host => '10.1.1.1', :dc => 'cjndemo' , :dc => 'com',       :user =>'admin', :password => 'Passw0rd'})
=> #<URI::LDAP:0x007fea9d0cef60 URL:ldap://10.1.1.1?> 
```

我需要做什么来绑定然后查询我的 LDAP 服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:16:39.790

URI::LDAP 仅用于解析和生成 LDAP URI。如果要查询 LDAP 服务器，则需要使用其他工具，例如[net-ldap](https://github.com/RoryO/ruby-net-ldap)或[ruby​​-ldap](https://github.com/alexey-chebotar/ruby-ldap)。

使用 net-ldap 进行简单身份验证的绑定示例：

```
require 'net/ldap'

ldap = Net::LDAP.new(:host => '10.1.1.1',
                     :auth => {
                       :method => :simple,
                       :username => 'cn=admin,dc=cjndemo,dc=com',
                       :password => 'Passw0rd'
                      })

if ldap.bind
  base = 'dc=cjndemo,dc=com'
  filter = Net::LDAP::Filter.eq('objectclass', '*')
  ldap.search(:base => base, :filter => filter) do |object|
    puts "dn: #{object.dn}"
  end
else
  # authentication error
end 
```

# java - 是否有任何示例在 if 语句中 & 比 && 有用

> ID：15814863
> 
> 赞同：-1
> 
> 时间：2013-04-04T15:00:46.827
> 
> 标签：java

我正在阅读这篇[文章](https://stackoverflow.com/questions/5564410/difference-in-and)，我想知道如果第一个条件为假，为什么有人会关心测试第二个条件

例如：

```
boolean a =false;
if(a && b) //do soemthing 
```

为什么要测试 b 是否为假？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:08:26.113

Single`&`是一个按位运算符，所以这就是您使用它的目的。例如，如果您想检查是否设置了某个位：

```
unsigned int bit = 4;
if (bit & value) {
    //third lowest bit is set
} 
```

这在 C 库函数中经常发生。如果您要节省内存并使用单独的位而不是单独的变量，这将非常有用。

编辑：我误读了这篇文章。我看到了你现在所说的上下文。所以要同意其他人，只有当 b 有副作用时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:05:27.743

> 为什么要测试 b 是否为假？

我猜你的意思是：

如果 a 为假，为什么要测试 b？

例如，如果 b 有副作用。尽管在这种情况下您可能会遇到设计问题。

实际上，除了“&=”之外，“&”不用于布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:02:59.480

例如，如果您有一个函数可以执行您想要被解雇的事情，而不管第一个值是什么，这可能是有意义的。

```
if( a & _checkForB()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T15:03:18.310

我能想到的唯一情况是对第二个的评估有一些理想的副作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T15:03:34.810

我不知道这是否是实际使用，但有时你有代码杂技如

```
string s;
if((s = reader.read()))
{
    doStuff
} 
```

我想你可以使用`&`, 如果你在你的条件下有多个东西可以做一些事情。

# bash - 在连接命令中从压缩文件中捕获一行

> ID：15814864
> 
> 赞同：2
> 
> 时间：2013-04-04T15:00:47.763
> 
> 标签：bash, unix, join, gunzip

我正在尝试从 join 命令返回的行中获取特定属性。我将两个文件压缩（不保存到磁盘）然后对它们进行连接的代码是：

```
join <(gunzip -c fileA.gz) <(gunzip -c fileB.gz) -t $'|' 
```

-t $'|' 是因为 *.gz 文件由 '|' 分隔 而不是空格。我可以用：

```
awk 'BEGIN {FS="|"};{print $1}' 
```

要正常获取每行上的第一个字段，但我不确定 join 是否将返回的匹配作为批次或每行输出......如果是每行，我该如何暂停它以获取第一个属性并进行比较（比如是否继续看多行）？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:47:56.973

```
marker="foo"
join <(gunzip -c fileA.gz) <(gunzip -c fileB.gz) -t $'|' | awk -F '|' '{print; if ($1=="'"${marker}"'") exit}' 
```

这将输出行，直到第一个字段等于 $marker 的值，然后停止。

如果您只想输出带有标记的行，请使用 grep：

```
join <(gunzip -c fileA.gz) <(gunzip -c fileB.gz) -t $'|' | grep "^${marker}|" 
```

**更新：**
如果您的标记是一个整数（例如 100）并且您试图停在标记处或之外（即任何数字 >= 100 都是有效标记），请使用以下命令：

```
marker=100
join <(gunzip -c fileA.gz) <(gunzip -c fileB.gz) -t $'|' | awk -F '|' '{print; if ($1>='"${marker}"') exit}' 
```

# jquery - addElement / removeElement 无法正常工作

> ID：15814867
> 
> 赞同：0
> 
> 时间：2013-04-04T15:00:51.767
> 
> 标签：jquery, validation, parsley.js

我正在尝试添加即时验证器，但似乎欧芹甚至没有远程考虑这些语句，甚至没有在控制台中留下错误。这是我的场景

用户单击复选框，然后：

```
if(!$scope.data.contest.prizes[1].enabled)
{
    $( '#edit_contest' ).parsley( 'removeItem', '#prz2_it_ttl' );
} else {
    $( '#edit_contest' ).parsley( 'addItem', '#prz2_it_ttl' );
} 
```

我也尝试给 jquery 对象 $("#myelement")

```
$( '#edit_contest' ).parsley( 'addItem', $('#prz2_it_ttl') ); 
```

或者，我试图将它包装在销毁/创建语句周围

```
$( '#edit_contest' ).parsley('destroy');
$( '#edit_contest' ).parsley( 'addItem', $('#prz2_it_ttl'));
$( '#edit_contest' ).parsley(); 
```

这并没有改变任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:09:24.190

事实证明，这种奇怪行为背后的原因是 add/removeItem 中提到的其中一个 id 拼写错误但日志指向错误的行。

我有这个

```
$( '#edit_contest' ).parsley( 'removeItem', '#prz2_it_ttl' );
$( '#edit_contest' ).parsley( 'removeItem', '#prz2_en_ttl' );
$( '#edit_contest' ).parsley( 'removeItem', '#prz2_it_des' );
$( '#edit_contest' ).parsley( 'removeItem', '#prz2_en_des' ); 
```

当真正的拼写错误在第 4 行时，错误指向第 1 行。在发现并修复它之后，一切都开始像魅力一样工作（或多或少）。所以这个故事的寓意是：在你的调试程序中做任何其他事情之前，总是仔细检查所有的 id。

# java - Java 枚举和嵌套类

> ID：15814872
> 
> 赞同：1
> 
> 时间：2013-04-04T15:01:02.063
> 
> 标签：java, enums, inner-classes

我是 Java 的初学者（Objective-C 是我最知名的语言），我真的很难找到一个干净的例子来说明我想要实现的目标：

```
public class OuterClass extends ClassToExtend {

    public enum Enum { value1, value2 }

    public class InnerClass extends AnotherClassToExtend {

        public void aMethod(int position) {
            switch (position) {
                case Enum.value1:
                    //Do something
                case Enum.value2:
                    //Do Something else
            }
        }
    }
} 
```

显然这不起作用（对枚举的引用）但应该让我知道我正在尝试做**什么，需要改变什么才能使这项工作？** 我想我需要在某处声明枚举以引用它？

我将不胜感激对更正的解释，以便我可以学习并希望将来为自己解决类似的困难。

谢谢

**编辑：**如果方法是 @Override 并且无法更改签名怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:05:15.290

首先，您必须打开枚举本身，因此您需要更改以下行：

```
public void aMethod(int position) { 
```

接受您的枚举而不是 int。其次，枚举的值需要在开关中直接引用，因为枚举已经在当前对象的范围内。

```
public class OuterClass extends ClassToExtend {

    public enum Enum { value1, value2 };

    public class InnerClass extends AnotherClassToExtend {

        public void aMethod(Enum position) {
            switch (position) {
                case value1:
                    //Do something
                case value2:
                    //Do Something else
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T15:03:50.017

您不能打开 an`int`然后尝试将其与`enum`.

如果您将方法签名更改为

```
public void aMethod(Enum position) 
```

并使用裸枚举值（例如`value1`）然后它应该工作：

```
case value1: 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T15:06:44.670

> 从需要具有 int 参数的方法的抽象类覆盖

我会这样做：

```
public enum Enum { value1, value2 }
public class InnerClass  {
  public void aMethod(int position) {
    Enum value = Enum.values()[position];
    switch (value) {
      case value1: 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T15:38:03.653

您的 aMethod 不应使用 int 作为参数类型。在 JDK6 之前，也不能在 Switch 语句中使用字符串。在 Java SE 7 中实现了带有 String case 的 Switch 语句，至少在它们首次被请求之后 16 年。

你也不应该忘记每个 case 之后的 break 语句。否则，您的所有案例都将被阅读。

```
public void aMethod(Enum position) {
 switch (position) {
                case value1:
                    System.out.println("I am Value 1");
                    break;
                case value2:
                    System.out.println("I am Value 1");
                    break;
 }
} 
```

测试它，使用

```
ob.aMethod(Enum.value1); 
```

或者

```
ob.aMethod(Enum.valueOf("value1")); 
```

# tree - Wicket - 展开不可见的树节点

> ID：15814875
> 
> 赞同：0
> 
> 时间：2013-04-04T15:01:10.130
> 
> 标签：tree, wicket-1.6

我想扩展一个在我的 DefaultNestedTree（wicket 6）中不可见的树节点。我了解到 AbstractTree 类无法扩展不可见的树节点（来自来源：如果给定节点当前不可见，则不执行任何操作）

有什么我不知道的方法可以轻松扩展不可见的树节点吗？

在我看来，遍历所有节点（例如通过 getParent()）并不是一个非常令人满意的选择。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T10:14:43.583

我的回答基于 Wicket 6.9.0 来源。

“AbstractTree”在模型对象中保存节点状态 - `Set<T>`。在调用“展开”和“折叠”时，从模型对象中添加或删除受影响的节点。

所以可能的解决方案：

1.  使用“展开”。
2.  直接修改模型对象`Set<T>`。

# android - ActionBarSherlock 主题色

> ID：15814886
> 
> 赞同：0
> 
> 时间：2013-04-04T15:01:47.310
> 
> 标签：android, colors, themes, android-actionbar, actionbarsherlock

我希望将红色替换为 ActionBarSherlock 的默认颜色，我搜索但不知道在 style.xml 中插入什么，下面是我的代码：

```
<style name="Theme.Red" parent="Theme.Sherlock.Light">
    <!-- what should i insert here? -->
</style> 
```

如果我想改变绿色高亮区域的颜色，我应该怎么做？整个栏，不仅仅是标题。

![在此处输入图像描述](https://i.stack.imgur.com/UDJbc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:01:28.733

那么，你想要一个红色的操作栏吗？

```
<style name="Theme.Red" parent="Theme.Sherlock">
    <item name="android:actionBarStyle">@style/RedActionBar</item>
    <item name="actionBarStyle">@style/RedActionBar</item>
</style>

<style name="RedActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">#f00</item>
</style> 
```

# java - Java 从现有代码中创建函数

> ID：15814889
> 
> 赞同：0
> 
> 时间：2013-04-04T15:02:06.977
> 
> 标签：java

我正在尝试将一些（外观丑陋的）代码转换为函数，以便更好地管理所有内容。但是我遇到了一个问题，当前代码：

```
 int red = card.getColor().getRed();
    int green = card.getColor().getGreen();
    int blue = card.getColor().getBlue();
    Color color = new Color(red, green, blue);

    int width;
    int height;
    int xOffset;
    int yOffset;
    int border;

    //Whole card
    width = CARD_DIMENSION.width;
    height = CARD_DIMENSION.height;
    xOffset = 0;
    yOffset = 0;
    border = 5;
    for (int x = 0; x < width; x++) {
        for (int y = 0; y < height; y++) {
            int dx = Math.min(x, width - 1 - x);
            int dy = Math.min(y, height - 1 - y);
            if (dx < border || dy < border) {
                g2d.setColor(new Color(red, green, blue, 255 - Math.min(dx, dy)));
            }
            else {
                g2d.setColor(new Color(red, green, blue, 192 - Math.min(dx, dy)));
            }
            g2d.drawLine(x + xOffset, y + yOffset, x + xOffset, y + yOffset);
        }
    } 
```

每次我想绘制一些新的矩形时，我都必须复制它。乍一看，将它放在一个函数中并不难，但是这些行：

```
 if (dx < border || dy < border) {
                g2d.setColor(new Color(red, green, blue, 255 - Math.min(dx, dy)));
            }
            else {
                g2d.setColor(new Color(red, green, blue, 192 - Math.min(dx, dy)));
            } 
```

自从我在那里使用 dx 和 dy 后，它们变得很困难。

现在我提出了一个建议的解决方案，我想将它与匿名内部类一起使用并覆盖这两个函数：

```
private abstract class CustomRectangle {
    protected final int width;
    protected final int height;
    protected final int xOffset;
    protected final int yOffset;
    protected final int borderSize;

    public CustomRectangle(final int width, final int height, final int xOffset, final int yOffset, final int borderSize) {
        this.width = width;
        this.height = height;
        this.xOffset = xOffset;
        this.yOffset = yOffset;
        this.borderSize = borderSize;
    }

    abstract void inBorder();

    abstract void outBorder();

    public void draw(Graphics2D g2d) {
        for (int x = 0; x < width; x++) {
            for (int y = 0; y < height; y++) {
                int dx = Math.min(x, width - 1 - x);
                int dy = Math.min(y, height - 1 - y);
                if (dx < borderSize || dy < borderSize) {
                    inBorder();
                }
                else {
                    outBorder();
                }
                g2d.drawLine(x + xOffset, y + yOffset, x + xOffset, y + yOffset);
            }
        }
    }
} 
```

但我仍然担心使用 dx 和 dy（for 循环的两个局部变量）输入公式会很困难，如果不是不可能的话。

如果有人对一般问题或我自己的方法有任何建议，我将不胜感激，因为拥有几个基本相同的代码块是不可接受的。

问候。

# android - 我看不到我的日期选择器 Android，phonegap

> ID：15814894
> 
> 赞同：0
> 
> 时间：2013-04-04T15:02:14.667
> 
> 标签：android, jquery, cordova

我有一个应用程序，它是在 phonegap 上开发的。

我使用了一个缓慢的日期选择器插件，所以我想更改它。

我搜索并找到一个可用的；

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker](https://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker)

我跟着步骤。

但我没有看到我的日期选择器，只看到一个空的输入元素。

我创建了一个包“com.phonegap.plugin”并将我的“DatePickerPlugin.java”放入这个包中。

我创建了“datePickerPlugin.js”并将其放在 assets/www 文件下。

我将它包含在 index.html 中

```
<script type="text/javascript" charset="utf-8" src="datePickerPlugin.js"></script> 
```

或者

```
<script type="text/javascript" src="datePickerPlugin.js"></script> 
```

我在我的元素中添加了一个 class="nativedatepicker"

```
<input type="text" class="nativedatepicker" id="get_date" name="get_date" /> 
```

我将代码放入 index.html 的脚本部分

```
$('.nativedatepicker').focus(function(event) {
    var currentField = $(this);
    var myNewDate = Date.parse(currentField.val()) || new Date();

    // Same handling for iPhone and Android
    window.plugins.datePicker.show({
        date : myNewDate,
        mode : 'date', // date or time or blank for both
        allowOldDates : true
    }, function(returnDate) {
        var newDate = new Date(returnDate);
        currentField.val(newDate.toString("dd/MMM/yyyy"));

        // This fixes the problem you mention at the bottom of this script with it not working a second/third time around, because it is in focus.
        currentField.blur();
    });
});

$('.nativetimepicker').focus(function(event) {
    var currentField = $(this);
    var time = currentField.val();
    var myNewTime = new Date();

    myNewTime.setHours(time.substr(0, 2));
    myNewTime.setMinutes(time.substr(3, 2));

    // Same handling for iPhone and Android
    plugins.datePicker.show({
        date : myNewTime,
        mode : 'time', // date or time or blank for both
        allowOldDates : true
    }, function(returnDate) {
      // returnDate is generated by .toLocaleString() in Java so it will be relative to the current time zone
        var newDate = new Date(returnDate);
        currentField.val(newDate.toString("HH:mm"));

        currentField.blur();
    });
}); 
```

最后，我把插件放到我的 plugins.xml

```
<plugin name="DatePickerPlugin" value="com.phonegap.plugin.DatePickerPlugin"/> 
```

我的错误在哪里？

我使用cordova-1.9.0 和Android 2.2。我还包括了我的 Cordova 库文件。

我几乎在stackoverflow中查看了有关此错误的所有问题，但没有找到任何有效的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T05:25:11.563

你可以试试这个来获取日期。

```
function  ShowDatePicker(){

                        var currentField = $('#nativedate');
                        var myNewDate = Date.parse(currentField.val()) || new Date();

                        // Same handling for iPhone and Android
                        window.plugins.datePicker.show({
                            date : myNewDate,
                            mode : 'date', // date or time or blank for both
                            allowOldDates : true
                        }, function(returnDate) {
                            var newDate = new Date(returnDate);

                            var curr_date = newDate.getDate();
                            var curr_month = newDate.getMonth() + 1; //Months are zero based
                            var curr_year = newDate.getFullYear();
                            if(curr_month < '10' || curr_month < 10 )
                                {
                                curr_month ='0'+curr_month.toString(); 
                                }

                            currentField.val(curr_date + "-" + curr_month + "-" + curr_year);

                            // This fixes the problem you mention at the bottom of this script with it not working a second/third time around, because it is in focus.
                            currentField.blur();
                        });
                    } 
```

改变

```
<input type="text" class="nativedatepicker" id="get_date" name="get_date" /> 
```

至

```
<input type="text"  id="nativedate" onclick="ShowDatePicker();" name="get_date" /> 
```

# jquery - 如何在Edge animate中返回10秒onclick

> ID：15814895
> 
> 赞同：0
> 
> 时间：2013-04-04T15:02:20.493
> 
> 标签：jquery, jquery-animate, adobe-edge

是否有任何功能可以在时间线上获取当前时间并转到我们想要的上一个时间。

我正在尝试在 Edge 动画中制作上一个按钮，但只有命令`sym.play();` ，如果像这样以毫秒为单位输入时间，`sym.play(3000);`它会在舞台上播放 3 秒并播放。

所以我想把时间倒回去或者想去以前的标签。与转发按钮相同，我想在时间线上将时间转发 10 秒。

[这](http://singhbalwant.com/lego/lego.html)是我正在创建的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T07:19:31.180

您可以通过 sym.getPosition() 获取播放头的当前位置，所以如果您将使用

sym.play(sym.getPosition() - 10000),

它应该提前 10 秒。我建议使用标签，它可以使您的工作更轻松。Adobe edge api 在[这里](http://www.adobe.com/devnet-apps/edge/api/current/EdgeAPI.0.1.6.html)，一切都在那里。

# c# - 网络表单报告查看器

> ID：15814897
> 
> 赞同：1
> 
> 时间：2013-04-04T15:02:24.543
> 
> 标签：c#, asp.net, webforms, reportviewer

我在我的应用程序中使用 webforms reportviewer。

在 winforms 中，我有一种方法可以让我打印布局模式。

```
ReportViewer1.SetDisplayMode(Microsoft.Reporting.WinForms.DisplayMode.PrintLayout); 
```

然而对于 WebForms 来说并不是这样。我搜索了一些类似的方法，但没有找到。

任何人都知道以某种方式使用网络表单，激活打印布局？

**编辑：**

我有这个代码，如果有帮助的话。

```
 ReportViewer1.ServerReport.ReportServerUrl = new Uri(url);
        ReportViewer1.ServerReport.ReportPath = path;
        ReportViewer1.ShowParameterPrompts = false;
        ReportViewer1.ProcessingMode = Microsoft.Reporting.WebForms.ProcessingMode.Remote;
        ReportParameter parameter1 = new ReportParameter("ID", idSession);
        ReportViewer1.ServerReport.SetParameters(new ReportParameter[] { parameter1 });
        ReportViewer1.ServerReport.Refresh(); 
```

# android - 如果应用允许，发送 html 邮件

> ID：15814902
> 
> 赞同：11
> 
> 时间：2013-04-04T15:02:40.127
> 
> 标签：android, email, sendmail, html-email

我想从我的应用程序发送 html 邮件。我知道并非所有邮件客户端都允许使用 html 标签。[但我在 API ( http://developer.android.com/reference/android/content/Intent.html#EXTRA_HTML_TEXT](http://developer.android.com/reference/android/content/Intent.html#EXTRA_HTML_TEXT) )中找到了常量 Intent.EXTRA_HTML_TEXT 。

我的代码看起来像这样，但无论我使用什么邮件客户端，它总是只显示文本而不是 html 格式的文本：

```
 Intent intent = new Intent(Intent.ACTION_SEND);
 intent.putExtra(Intent.EXTRA_SUBJECT, subject);
 intent.putExtra(Intent.EXTRA_TEXT, "Hello World");
 intent.putExtra(Intent.EXTRA_HTML_TEXT, "<html><body><h1>Hello World</h1></body><html>");

 intent.setType("text/html"); // intent.setType("plain/text");

 startActivity(Intent.createChooser(intent,  "Choose Email Client:")); 
```

那么错误在哪里呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-27T21:57:40.787

抱歉，这不是一个肯定的答案，因为它似乎不起作用，至少不是以一种真正普遍和可靠的方式。一些邮寄者对此感到满意：

```
String body = "<html>something</html>";
intent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(body)); 
```

请注意，您不需要 new `EXTRA_HTML_TEXT`，它也适用于旧的。如果这涵盖了您需要的所有内容，那么您可能会没事。但是，如果您还想解决许多其他可能的意图接收器，例如 Facebook、Skype 甚至是 Drive 或 Keep 等应用程序，不幸的是，我找不到完美的解决方案，但我非常希望被证明是错误的。

基本上，我们有三种不同的格式：

```
String body = "<html>something</html>";
Spanned html = Html.fromHtml(body);
String stripped = html.toString(); 
```

和两个可能的收件人：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN)
  intent.putExtra(Intent.EXTRA_HTML_TEXT, ???);
intent.putExtra(Intent.EXTRA_TEXT, ???); 
```

我尝试了所有可能的组合，但在任何一种组合中，都会有一些众所周知且广泛使用的应用程序不想玩得很好。我们要么嵌入 HTML 标签，要么没有格式，甚至根本没有文本......

# c++ - MPI_File_read 错误

> ID：15814905
> 
> 赞同：0
> 
> 时间：2013-04-04T15:02:43.763
> 
> 标签：c++, mpi

我正在尝试使用 MPI_File_read 从输入文件中读取。但它没有正确读取这些值。这是我的输入文件：

```
11 3 4 5 2 
```

这是我用来尝试阅读它的代码：

```
char *filename = "input/8";
int n;

if (MPI_File_open(comm_2d, filename, MPI_MODE_RDONLY, MPI_INFO_NULL, &f) != MPI_SUCCESS) {
    fprintf(stderr, "Cannot open file %s\n", filename);
    MPI_Abort(comm_2d, FILE_NOT_FOUND);
    MPI_Finalize();
    return 1;
}
MPI_File_seek(f, 0, MPI_SEEK_SET);
MPI_File_read(f, &n, 1, MPI_INT, &status);

cout << "n :" << n << endl;
MPI_File_close(&f); 
```

据我了解，这应该从 input.txt 中读取第一个 int "11"。但是如果给了我一个非常大的数字。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:44:00.370

MPI_File_Read 从您的文件中读取 MPI_INT 的二进制表示。如果你给它一个 ASCII (text-) 文件，它可能会将前 4 个字符解释为一个 32 位整数并返回一个“非常大的数字”，就像你描述的那样。

在这种情况下，您可以例如将整个文件读入缓冲区，然后使用 sscanf() 或您可用的任何其他文本解析函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-08T07:28:09.060

我认为您可以使用类似的 API：MPI_File_write 轻松生成您想要的二进制文件。

```
char *filename = "input/8";
int n;

if (MPI_File_open(comm_2d, filename, MPI_MODE_CREATE| MPI_MODE_RDWR, MPI_INFO_NULL, &f) != MPI_SUCCESS) {
    fprintf(stderr, "Cannot open file %s\n", filename);
    MPI_Abort(comm_2d, FILE_NOT_FOUND);
    MPI_Finalize();
    return 1;
}
MPI_File_seek(f, 0, MPI_SEEK_SET);
int data[10];
data[0]=11;
data[1]=3;data[2]=4;data[3]=5;data[4]=2;
MPI_File_write(f, data, 5, MPI_INT, &status);
MPI_File_close(&f); 
```

使用 1 个进程运行上述代码后，您可以使用 MPI_File_read 获取二进制文件可以读取

# sql-server - Visual Studio 2012 中的 SQL 数据库工具

> ID：15814906
> 
> 赞同：0
> 
> 时间：2013-04-04T15:02:46.700
> 
> 标签：sql-server, visual-studio

我正在尝试将我的 Visual Studio 项目设置为只能使用一个 IDE 来使用 TFS 2012 管理 SQL 对象。有没有办法配置我的项目连接到源代码控制，例如，如果我去 SSMS 并尝试修改存储过程，自动获取源代码管理中的存储过程，反之亦然，使用 Visual Studio 2012 签出过程并从 SSMS 显示已签出？

无论我在哪里（Management Studio 或 Visual Studio 2012），SQL 对象都是同步的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:35:42.380

Microsoft 不提供任何内置支持，但您可以使用最新版本的 SQL Source Control 将您的 SSDT 数据库项目链接到 SSMS，这是我工作的公司 Red Gate 开发的商业工具。步骤是：

*   下载[SQL Source Control](http://www.red-gate.com/products/sql-development/sql-source-control/)并安装它（它有 28 天的免费试用期）
*   加载 SSMS，在对象资源管理器中右键单击您的数据库，然后选择“链接到源代码管理”选项。
*   在“链接”对话框中，浏览到存储库中的数据库项目文件夹。

而已。现在已经设置好了。只需使用“提交”和“获取最新”选项卡即可使您的数据库与源代码控制中的数据库项目保持同步。

如果您遇到任何问题，我很乐意为您提供帮助。请对此答案添加评论或联系 support@red-gate.com

# facebook - NewsFeed 过滤（最新/热门故事）使用传统的 rest api。

> ID：15814907
> 
> 赞同：1
> 
> 时间：2013-04-04T15:02:51.167
> 
> 标签：facebook, filtering, facebook-rest-api

有没有办法过滤新闻提要以使用 REST 获取“最新/热门”故事。我想我可以使用统计/结束时间来获取最新的。使用 REST 获取“热门”故事的最佳方式是什么（我知道这是旧版 API，但我们已经有一个使用这些 API 的系统，并且想知道是否可以使用 REST 获取新闻提要的热门故事）。

从文档[https://developers.facebook.com/docs/reference/rest/stream.get/](https://developers.facebook.com/docs/reference/rest/stream.get/)中，它似乎没有提及有关热门故事的任何内容。想问问有没有其他办法。

谢谢

——幸

# javascript - XMLHttpRequest 无法加载 http://ideone.com/api/1/service.wsdl。Access-Control-Allow-Origin 不允许 Origin null。

> ID：15814908
> 
> 赞同：0
> 
> 时间：2013-04-04T15:02:56.610
> 
> 标签：javascript, jquery, soap, wsdl

XMLHttpRequest 无法加载[http://ideone.com/api/1/service.wsdl](http://ideone.com/api/1/service.wsdl)。Access-Control-Allow-Origin 不允许 Origin null。

请在这方面帮助我

```
 <html>
<head>
 <title> Web services </title>

<script type="text/javascript" src="jquery.js">
</script>

<script type="text/javascript" src="soapproxy.js">
</script>

<script type="text/javascript">

testob={user:"harisrinivas",pass:"ideonehari"};

function resultcallback(res, xml, text, proxy) {
            alert(res);
        }
        function failurecallback(res, xml, text, proxy) {
            alert("SayHello() failed");
        }
        function gotproxycallback(proxy, wsdl, text) {
            if (proxy instanceof SOAPProxy) {
               //proxy.SayHello(null, true, resultcallback, failurecallback);
               SOAPProxy.prototype.invoke(test, testob, async, resultcallback, faultcallback);

            } else {
                alert("Proxy not created!");
            }
        }
        $(document).ready(function () {
            try {
                SOAPProxyFabric.fromUrl("http://ideone.com/api/1/service.wsdl", true, gotproxycallback);
            } catch (x) {
                alert("Failed to load or parse WSDL!");
            }
        });
</script>

</head>

<body>

<h1> Web service testing by Hari Srinivas </h1>

</body>

</html> 
```

我正在使用 jquery 和 soapproxy ( [http://code.google.com/p/js-soap-proxy/](http://code.google.com/p/js-soap-proxy/) )。问题是什么 ？我怎样才能消除这个错误..??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T13:38:39.057

If you have access to the server that has the service on it, you can enable cors easily on the server by following directions on this site: [http://enable-cors.org/](http://enable-cors.org/) , they have examples for each type of webserver.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:14:12.323

我猜 soapproxy fromurl 使用 xmlhttprequest，网站 A 的页面不允许向网站 B 发出请求。其中：

```
A = google.com 
B = yahoo.com 
or 
A = mysite:80.com 
B = mysite:90.com 
or 
A = subdomain.mysite.com 
B = othersub.mysite.com 
```

您可以在维基百科上找到同源政策信息。绕过它的一种方法是 JSONP，但我不认为 soapproxy 使用它。快速找出这是否是您的问题的另一种方法是获取 firefox 的 forcecors 插件，激活它（查看 -> 工具栏 -> 添加栏）单击 cors（屏幕右下角）。如果它是红色的，您可以从任何站点连接到任何站点，因为插件会摆弄 http 响应，使其假装服务器 B 已向您发送 cors 标头（允许其他网站使用 xmlhttprequests 连接到它）。

# java - 如何减去两个 joda 日期时间？

> ID：15814911
> 
> 赞同：41
> 
> 时间：2013-04-04T15:03:09.340
> 
> 标签：java, datetime, jodatime

我知道这不是“它应该工作的方式”，但仍然：如果你有两个 DateTime 对象，那么减去它们的好方法是什么？将它们转换为 Date 对象？

```
DateTime start = new DateTime();
System.out.println(start + " - doing some stuff");

// do stuff

DateTime end = new DateTime();
Period diff = // end - start ???
System.out.println(end + " - doing some stuff took diff seconds"); 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-04T15:10:10.310

Period 有[一个构造函数，它接受两个`ReadableInstant`实例](http://joda-time.sourceforge.net/apidocs/org/joda/time/Period.html#Period%28org.joda.time.ReadableInstant,%20org.joda.time.ReadableInstant%29)：

```
Period diff = new Period(start, end); 
```

（`ReadableInstant`是由`DateTime`以及其他类实现的接口。）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-04T16:37:41.583

从您的示例中，您似乎想要以秒为单位的差异，因此[这应该会有所帮助](http://joda-time.sourceforge.net/apidocs/org/joda/time/Seconds.html#secondsBetween%28org.joda.time.ReadableInstant,%20org.joda.time.ReadableInstant%29)：

```
Seconds diff = Seconds.secondsBetween(start, end); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-04T15:14:53.740

这有帮助吗？[http://joda-time.sourceforge.net/key_period.html](http://joda-time.sourceforge.net/key_period.html) 它显示了以下示例

```
DateTime start = new DateTime(2004, 12, 25, 0, 0, 0, 0);
DateTime end = new DateTime(2006, 1, 1, 0, 0, 0, 0);

// period of 1 year and 7 days
Period period = new Period(start, end);

// calc will equal end
DateTime calc = start.plus(period);

// able to calculate whole days between two dates easily
Days days = Days.daysBetween(start, end); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-04T15:13:11.417

取决于您想要获得的精度。您应该检查`org.joda.time`包并检查 Helper 类，例如`Hours`,`Days`等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T15:10:14.933

我认为您可以`Period`使用[此](http://joda-time.sourceforge.net/apidocs/org/joda/time/Period.html#Period%28org.joda.time.ReadableInstant,%20org.joda.time.ReadableInstant%29 "这")构造函数创建一个带有两个`DateTime`对象的构造函数。

# c - 是否有类似 access() 但针对特定用户 ID 的功能？

> ID：15814912
> 
> 赞同：1
> 
> 时间：2013-04-04T15:03:16.620
> 
> 标签：c, linux, freepascal

Linux 功能[`access()`](http://linux.die.net/man/2/access)允许我检查**当前**用户的文件权限。

是否有类似的功能可以为我提供相同的信息 - 但不是检查当前用户，而是检查任何给定系统用户的权限？

之类`int access_for(const char *pathname, uid_t uid, int mode);`的东西

我不能将[`seteuid()`](http://linux.die.net/man/2/seteuid)它用于会同时影响所有线程的多线程进程（POSIX 线程），因为我需要它。这就是为什么我需要自己检查文件权限的原因。

**编辑：**进程本身已知/假定*至少*具有相关用户的权限。所以，理论上我也可以遍历文件系统并手动计算权限，但我需要更有效的东西，因为检查需要每秒完成几次（最多数百次）。可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:05:03.883

不知道它是如何工作的。如果您以用户 X 的身份运行，则无法可靠地检查用户 Y 是否有权访问某些内容，因为检查将在您的权限下完成。您可能无法访问可以执行的`Y`操作，这意味着您会得到误报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T15:39:09.020

当心[TOCTOU](http://en.wikipedia.org/wiki/Time_of_check_to_time_of_use)。如果您现在检查文件可以访问，这并不意味着现在可以（或不能），因为您在“现在”和“现在”之间读取这些单词所花费的时间，文件权限可能好已经改变了。

因此，正确的解决方案是以您想要访问文件的用户身份在线程/进程中运行。否则，您将面临“工作时文件权限已更改”问题的风险。

当然，这适用于任何类型的访问“可能基于我的运行身份而受到限制的事物”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T15:24:01.543

在 Linux 上，基本上所有`set*id`操作都是线程本地的。这是错误且不符合标准的（标准指定*进程*而不是线程具有由这些函数设置的 id）并且用户空间代码（在 libc 中）必须通过微妙且容易出错的逻辑来解决该问题以同步的方式更改所有线程 uid。但是，您可以直接（通过`syscall()`）调用系统调用来更改一个线程的 ID。

`setfsuid`此外，Linux 具有由函数设置的“文件系统 uid”的概念。如果我没记错的话，libc 会保留这个线程本地的，因为它没有由任何标准指定（因此没有任何要求）并且因为这个函数的全部目的是线程本地使用，就像你正在做。我认为如果它有效，第二个选项会更好。

最后，有一个完全可移植但速度慢的解决方案：`fork`然后`seteuid`在孩子中使用，在`access`那里调用，将结果传回给父母，然后`_exit`.

# c# - 使用 Unity 进行通用依赖注入

> ID：15814917
> 
> 赞同：4
> 
> 时间：2013-04-04T15:03:35.063
> 
> 标签：c#, dependency-injection, unity-container

我们在 C# 应用程序中的我们自己的日志服务中包装了一个现有的日志库，以便为某些日志记录情况使用预定义的方法。

```
public class LoggingBlockLoggingService : ILoggingService
{
    private LogWriter writer;

    public LoggingBlockLoggingService(LogWriter writer)
    {
        this.writer = writer;
    }
    ....//logging convenience methods, LogWarning(), etc...
} 
```

我想修改这个实现，以便它接受实例化它的类的类型（在这种情况下，底层记录器 LogWriter 将是一个单例）。所以要么使这个实现（和接口 ILoggingService）通用：

```
public class LoggingBlockLoggingService<T> : ILoggingService<T>
{
    ...
    private string typeName = typeof(T).FulName;
    ... 
```

或者添加一个额外的构造函数参数：

```
public class LoggingBlockLoggingService : ILoggingService
{
    private LogWriter writer;
    private string typeName;

    public LoggingBlockLoggingService(LogWriter writer, Type type)
    {
        this.writer = writer;
        this.typeName = type.FullName;
    }
    ....//Include the typeName in the logs so we know the class that is logging.
} 
```

注册我们的类型时，有没有办法在 Unity中配置**一次？**我想避免为每个想要记录的类添加一个条目。理想情况下，如果有人想向我们项目中的类添加日志记录，他们只需将 ILoggingService 添加到他们正在使用的类的构造函数中，而不是在我们的统一配置中添加另一行来注册他们正在使用的每个类.

**我们使用的是运行时/代码配置，而不是 XML**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T15:07:29.513

是的，您可以使用：

`container.RegisterType(typeof(IMyGenericInterface<>), typeof(MyConcreteGenericClass<>));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:11:24.217

在您的情况下，当有简单的直接 generic-param-to-generic-param 映射时，Unity 可能实际上会处理这个问题，但我怀疑是否没有处理任何更高级的案例，因为某些时候必须提供映射类型之间的通用参数（例如重新排序键值与值键等）。

如果 Dave 的回答还不够，我很确定您可以向 Unity/ObjectBuilder 编写一个插件，该插件将注册一个新策略或一组策略，涵盖您想要的任何类型映射，包括自动装配扫描或物化仿制药。

[请参阅http://www.orbifold.net/default/unity-objectbuilder-part-ii/](http://www.orbifold.net/default/unity-objectbuilder-part-ii/)上的系列文章和附近的部分

```
Context.Strategies.AddNew< buildkeymappingstrategy >(UnityBuildStage.TypeMapping); 
```

# c# - TFS：追溯与票证绑定

> ID：15814918
> 
> 赞同：1
> 
> 时间：2013-04-04T15:03:37.890
> 
> 标签：c#

我一直在做一些尚未开票的事情。我进行了多次签到，但没有将它们与票关联。既然已经创建了票证，我一直在尝试找到一种方法将我以前的签到与它关联起来，但没有运气。这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:41:28.043

如果您转到工作项并转到“链接”选项卡，则可以将链接添加到变更集。

# r - 基于ggplot2中的子集的黄土平滑

> ID：15814921
> 
> 赞同：3
> 
> 时间：2013-04-04T15:04:06.033
> 
> 标签：r, ggplot2

我正在研究最后两点不是最新的一些情节。由此产生的低数字拉低了我的平滑线。

```
dat1<-data.frame(vals=c(30,40,50,30,40,50,30,10,5),
                 q.year=c("q1 09", "q2 09", "q3 09", "q4 09", "q1 10", "q2 10", "q3 10", "q4 10", "q1 11"),
                 dummy=rep("g1", 9)
)
dat1$q.year<-factor(dat1$q.year, unique(dat1$q.year))

ggplot(dat1, aes(x=q.year, y=vals, group=dummy))+
  geom_point()+
  geom_line()+
  geom_smooth(method="loess", se=FALSE, lty=2) 
```

我想在没有两个低点的情况下绘制更平滑的图。我可以用一个子集来做到这一点：

```
gg1<-ggplot(dat1, aes(x=q.year, y=vals, group=dummy))+
  geom_point()+
  geom_line()+
  geom_smooth(data=subset(dat1, q.year %in% levels(q.year)[1:7]),
              method="loess", se=FALSE, lty=2)
print(gg1) 
```

但是，当涉及到使用新数据重用绘图时（即 gg2<- gg1 %+% someMoreData），我必须添加另一行来子集新数据集（someMoreData）。

有一个更好的方法吗？我可以参考已经传递到情节中的数据吗？

如果问题不太清楚，请道歉 - 如果需要，将更新

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:22:29.067

```
fun <- function(val,fac,n) {val[fac %in% tail(levels(fac),n)] <- NA; val}

gg1a <- ggplot(dat1, aes(x=q.year, y=vals, group=dummy))+
  geom_point()+
  geom_line()+
  geom_smooth(aes(x=q.year,y=fun(vals,q.year,2)),
              method="loess", se=FALSE, lty=2)
print(gg1a)
#Warning message:
#Removed 2 rows containing missing values (stat_smooth).

dat2<-data.frame(vals=c(50,40,50,30,40,50,30,10,5,5),
                 q.year=c("q1 09", "q2 09", "q3 09", "q4 09", "q1 10", "q2 10", "q3 10", "q4 10", "q1 11","q2 11"),
                 dummy=rep("g1", 10)
)
#make sure that your factor is ordered, 
#otherwise it gets reordered by ggplot according to levels
dat2$q.year <- factor(as.character(dat2$q.year),levels=as.character(dat2$q.year),ordered = TRUE)

gg1a %+% dat2
#Warning message:
#Removed 2 rows containing missing values (stat_smooth). 
```

# javascript - 为什么用 null 初始化对象的属性会提高速度？

> ID：15814923
> 
> 赞同：3
> 
> 时间：2013-04-04T15:04:08.267
> 
> 标签：javascript, performance, performance-testing

出于某种原因，看起来（至少在 Chrome 中）如果您创建一个对象并使用空值初始化每个属性，然后为每个属性分配一个值，这比最初将对象留空要快。为什么会这样（[测试](http://jsperf.com/object-initalisation-methodology)）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:18:13.800

V8（Chrome 的 Javascript 引擎）进行了优化，可以定义隐藏类来表示 Javascript 中的特定对象。当您在创建时声明对象的属性时，这样做会更好。

> 使用隐藏类有两个优点：属性访问不需要字典查找，它们使 V8 能够使用经典的基于类的优化，内联缓存。

[https://developers.google.com/v8/design#prop_access](https://developers.google.com/v8/design#prop_access)

# asp.net - ASP Cookie“对象引用未设置为对象的实例”

> ID：15814925
> 
> 赞同：2
> 
> 时间：2013-04-04T15:04:15.893
> 
> 标签：asp.net

好的，所以我在 Cristian Darie 的一本名为“电子商务中的 ASP.NET 入门”的书中遵循这个示例。该示例构建了一个名为 BalloonShop 的在线商店。当我的网站由于这个错误而不再启动时，我一直在努力直到第 17 章：

```
Object reference not set to an instance of an object

Line 27:             HttpContext context = HttpContext.Current;
Line 28:             // try to retrieve the cart ID from the user cookie
Line 29:             string cartId = context.Request.Cookies["BalloonShop_CartID"].Value;
Line 30:             // if the cart ID isn't in the cookie...
Line 31:             { 
```

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

我的堆栈跟踪如下：

> [NullReferenceException：对象引用未设置为对象的实例。] ShoppingCartAccess.get_shoppingCartId() in f:\TheGate\App_Code\ShoppingCartAccess.cs:29 ShoppingCartAccess.GetItems() in f:\TheGate\App_Code\ShoppingCartAccess.cs: 188 UserControls_CartSummary.PopulateControls() in f:\TheGate\UserControls\CartSummary.ascx.cs:25 UserControls_CartSummary.Page_PreRender(Object sender, EventArgs e) in f:\TheGate\UserControls\CartSummary.ascx.cs:18 System.Web。 Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, >EventArgs e) +14 System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35 System.Web.UI.Control.OnPreRender(EventArgs e) +8998946 System.Web.UI.Control.PreRenderRecursiveInternal() +103 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Control.PreRenderRecursiveInternal() +175 System.Web.UI.Page.ProcessRequestMain（布尔型 includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint）+2496

就我有限的知识而言，我的代码似乎没问题（如下，来自我的 ShoppingCartAccess.cs 类）：

```
 private static string shoppingCartId
{
    get
    {

        // get the current HttpContext
        HttpContext context = HttpContext.Current;
        // try to retrieve the cart ID from the user cookie
        string cartId = context.Request.Cookies["BalloonShop_CartID"].Value;
        // if the cart ID isn't in the cookie...
        {
            // check if the cart ID exists as a cookie
            if (context.Request.Cookies["BalloonShop_CartID"] != null)
            {
                // return the id
                return cartId;
            }
            else
            // if the cart ID doesn't exist in the cookie as well, generate a new ID
            {
                // generate a new GUID
                cartId = Guid.NewGuid().ToString();
                // create the cookie object and set its value
                HttpCookie cookie = new HttpCookie("BalloonShop_CartID", cartId);
                // set the cookie's expiration date
                int howManyDays = TheGateConfiguration.CartPersistDays;
                DateTime currentDate = DateTime.Now;
                TimeSpan timeSpan = new TimeSpan(howManyDays, 0, 0, 0);
                DateTime expirationDate = currentDate.Add(timeSpan);
                cookie.Expires = expirationDate;
                // set the cookie on the client's browser
                context.Response.Cookies.Add(cookie);
                // return the CartID
                return cartId.ToString();
            }
        }
    }
} 
```

在我的编程学习的这个阶段，我很无助。据我所知，我的程序正在寻找一个 cookie，如果它没有看到它，它会创建一个，但不知何故，现在一切都出错了。直到第 16 章我都做得很好，但现在我有点搞砸了，因为我不知道如何解决它。有任何想法吗？谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:09:31.213

由于第 29 行是这样的：

```
string cartId = context.Request.Cookies["BalloonShop_CartID"].Value; 
```

根据错误，唯一可能的情况是：

*   HTTP 上下文不可用（因为您在用户控件中，这极不可能）。
*   HTTP 请求或 cookie 集合为空（不可能是您获取 HTTP 上下文的方式）
*   `Cookies["BalloonShop_CartID"]`返回null，当您访问时这会爆炸`.Value`（很可能）

这些是对象引用异常的唯一可能原因，并且很可能是最后一项，cookie 返回 null。在查看整个代码示例时，奇怪的是它会检查 cookie，然后执行 null 检查以查看 cookie 是否不为 null；它应该执行以下操作（删除第 29 行）。

```
HttpContext context = HttpContext.Current;
 // check if the cart ID exists as a cookie
if (context.Request.Cookies["BalloonShop_CartID"] != null)
{
     // return the id
      return context.Request.Cookies["BalloonShop_CartID"].Value;
}
else
// if the cart ID doesn't exist in the cookie as well, generate a new ID
{
     .
     . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:35:52.553

你也可以做这样的事情......

```
string cartId = context.Request.Cookies["BalloonShop_CartID"] != null 
    ? context.Request.Cookies["BalloonShop_CartID"].Value
    : ""; 
```

另外，我刚刚注意到你的代码有点乱，我在这里重写了它，我无法真正测试它，但希望它能让你更接近你的答案：

```
private static string GetShoppingCartId() {

    HttpContext context = HttpContext.Current;
    string cartId = context.Request.Cookies["BalloonShop_CartID"] != null 
        ? context.Request.Cookies["BalloonShop_CartID"].Value 
        : "";

    if (cartId == "")
    {
            // generate a new GUID
            cartId = Guid.NewGuid().ToString();
            int cartPersistDays = TheGateConfiguration.CartPersistDays;
            // create the cookie object and set its value
            context.Response.Cookies.Add(new HttpCookie("BalloonShop_CartID", cartId) {
                Expires = DateTime.Now.AddDays(cartPersistDays)
            });
     }

     return cartId;
 } 
```

# android - 如何在操作栏中获取白色文本

> ID：15814927
> 
> 赞同：2
> 
> 时间：2013-04-04T15:04:22.317
> 
> 标签：android, xml, android-actionbar

我正在尝试将此黑色文本变为白色，但我不确定如何。

![截屏](https://i.imgur.com/OPNs96z.png)

目前我的代码是这样的

```
<style name="AppBaseTheme" parent="android:Theme.Holo.Light">
    <!-- API 14 theme customizations can go here. -->
    <item name="android:actionBarStyle">@style/MainActionBar</item>
</style>

<style name="MainActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">@color/icsb</item>
    <item name="android:displayOptions"></item>
    <item name="android:titleTextStyle">@style/TitleTextStyle</item>
</style>

<style name="TitleTextStyle" parent="@android:style/TextAppearance.Holo.Widget">
    <item name="android:textColor">@color/white</item>
</style> 
```

PS：这不是 ActionBarSherlock。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:50:09.187

尝试将您的父主题更改为`android:Theme.Holo.Light.DarkActionBar`并将操作栏父样式更改为`@android:style/Widget.Holo.ActionBar`. 父主题控制操作栏文本的颜色，因此在深色操作栏上，文本具有浅色。

# bash - Bash while 语句 - 无限循环

> ID：15814932
> 
> 赞同：0
> 
> 时间：2013-04-04T15:04:34.737
> 
> 标签：bash, shell, loops, if-statement, while-loop

```
#!/bin/bash
CHECKUSER=$(grep "$USER" /var/log/string.log)
if [[ $CHECKUSER == "" ]];
   then
        echo  "Please enter y or n? (y/n)?"
        read string
        if [ "$string" = "y" -o "$string" = "n" ];
           then
              {
              echo "$USER - $string" >> /var/log/string.log
              }
           else
              while [ "$string" != "y" -o "$string" != "n" ];
                 do
                 echo "'$string' is an invalid option, please enter y or n: "
                 read string
              done
        fi
elif [[ $CHECKUSER == "$USER - n" ]];
   then
        echo "User selected n"
elif [[ $CHECKUSER == "$USER - y" ]];
   then
        echo "You've already said that you would like your account backed up."
else echo "User entered something other than y or n"
fi 
```

这一切都很好！但是，如果您输入的不是 y|n，您就会陷入无限循环。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T15:06:34.763

你必须改变

```
while [ "$string" != "y" -o "$string" != "n" ]; 
```

到

```
while [ "$string" != "y" -a "$string" != "n" ]; 
```

因为否则它总是正确的：

```
if string="y" ----------> [ false -o true  ] == [ true ]
if string="n" ----------> [ true  -o false ] == [ true ]
if string="whatever" ---> [ true  -o true  ] == [ true ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T16:25:14.113

在这个 while 循环中有两个问题：

```
while [ "$string" != "y" -o "$string" != "n" ];
do
    echo "'$string' is an invalid option, please enter y or n: "
    read backup
done 
```

正如 fedorqui 指出的那样，您的测试始终是正确的，但即使您修复了该问题，您也将循环，因为您正在读取*backup*而不是*string*。将内容更改为：

```
while [ "$string" != "y" -a "$string" != "n" ];
do
    echo "'$string' is an invalid option, please enter y or n: "
    read string
done 
```

# java - 检查字符数组

> ID：15814935
> 
> 赞同：1
> 
> 时间：2013-04-04T15:04:38.567
> 
> 标签：java, arrays, string, contains

我有一个读取文件的方法，将每个单词放入字符串数组中，然后将每个单词添加到树中。我想修改它，以便如果单词包含非英文字符（例如西班牙语等），则不会将其添加到树中。我虽然关于“包含”方法，但它不适用于字符串类型的数组。我该怎么做？

```
 public void parse(File f) throws Exception {

    Node root = new  Node('+'); //create a root node
    BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(f)));

    String line;
    while((line = br.readLine())!=null){
        String[] words = line.toLowerCase().split(" ");

        for(int i = 0; i < words.length; i++){
            addToTree(words[i], root);
        }
    }//end of while 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:10:39.937

您可以为此使用正则表达式：

```
Pattern nonEng = Pattern.compile("[^A-Za-z]");
...
for(int i = 0; i < words.length; i++) {
    if (!pattern.matcher(words[i]).find()) {
        addToTree(words[i], root);
    }
} 
```

这将丢弃所有*不*完全由英文字符组成的单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:16:59.987

如果单词由 [a-zA-Z_0-9] 中的字母组成

```
return !myString.matches("^\\w+$"); 
```

如果您有标点符号和其他字符等特殊要求，请在正则表达式中添加它们。[^\w.,;:'"]

# javascript - jquery->iframe 忽略脚本标签？

> ID：15814936
> 
> 赞同：0
> 
> 时间：2013-04-04T15:04:39.737
> 
> 标签：javascript, jquery, dom, iframe

因为 jquery UI draggable 会干扰点击，所以我认为我会将视频放在 iframe 中。该视频有效，但是我注意到javascript没有启动。似乎没有添加脚本标签（根据firefox和chrome DOM）。为什么？

```
function LoadVideo(IFrameForVideoDom, videourl, posterUrl) {
    var ibody = $($(IFrameForVideoDom)[0].contentWindow.document).find('body');
    ibody.css("border", "none");
    var sz = '<scr'+'ipt src="/javascripts/mediaelement/mediaelement-and-player.min.js">'+'</scr'+'ipt><link rel="stylesheet" href="/javascripts/mediaelement/mediaelementplayer.css" />';
    ibody.html(sz+'<video src="' + videourl + '" controls="controls" preload="none" poster="' + posterUrl + '"></video>');
} 
```

# sitecore - Sitecore - 在哪里使用/显示共享内容？

> ID：15814942
> 
> 赞同：0
> 
> 时间：2013-04-04T15:04:59.253
> 
> 标签：sitecore

有没有办法查看/报告某种共享模块的显示位置？例如，如果我有一个我知道在 20 个页面上使用的链接列表，但是我不确定在哪里，我可以在树中的那个节点上报告以查看哪些页面正在使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:19:40.667

如果您想查看哪些项目链接到特定项目，则可以从[Advanced System Reporter](http://marketplace.sitecore.net/en/Modules/Advanced_System_Reporter.aspx)运行链接报告。您还可以生成自己的报告以满足您的需求。

![链接报告 - 高级系统报告器](https://i.stack.imgur.com/w1g0c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:17:55.463

如果您的链接列表保存在 Sitecore 中的某个项目中，您可以在内容编辑器中选择该项目，选择“导航”选项卡并单击“链接”按钮。这将向您显示该项目的引用位置。

如果您想查看子布局的使用位置，[Presentation Usage Reporter](http://marketplace.sitecore.net/en/Modules/Presentation_Usage_Reporter.aspx)模块是一个非常有用的工具来显示它。注意：理论上这也可以通过上述方法完成（首先选择有问题的子布局）但是结果不是很可靠......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:34:34.350

我认为您可以使用 mdresser 正在谈论的方法，转到导航并单击链接，但如果它用于数据源字段，它将不会显示。然后，您可以为此使用 XPath 查询，类似于`fast:/<StartLocationOfQuery>/*[@__Renderings = '%path of the datasource you're interested in%']`

请注意，我在没有测试的情况下输入了查询，因此可能存在拼写错误等。

# c++ - c++ 模板：我可以/如何使用结构作为模板的实例化类型？

> ID：15814944
> 
> 赞同：0
> 
> 时间：2013-04-04T15:05:10.150
> 
> 标签：c++, templates

规格：

我想要以下结构

```
struct edgeT {      
  string home;      
  string away;      
  int weight;  
}; 
```

然后有一个 edgeT 类型的优先级队列。

我编写了一个快速程序来测试优先级队列，但我收到以下错误消息。

> '模板类 minPQ' 的模板参数使用本地类型 'Main()::edgeT'

我刚刚在 main() 例程的开头定义/声明了结构。

结构是否必须在其他地方定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:07:28.267

只有从 C++11 开始，您才能将函数中定义的类型用作模板参数。要么使用 C+11，要么将结构定义放在命名空间范围内。

# php - 丹麦语字符替换为问号

> ID：15814947
> 
> 赞同：1
> 
> 时间：2013-04-04T15:05:19.727
> 
> 标签：php, character-encoding

我想从这个丹麦语字符串中删除问号。

```
...mest i betydningen moralsk ford�rvelse eller bestikkelighed, men ogs� i... 
```

我尝试`utf8_encode()`了返回以下内容：

```
...mest i betydningen moralsk fordï¿½rvelse eller bestikkelighed, men ogsï¿½ i... 
```

第一个字符串是我在 Web 服务的 XML 中得到的响应。有没有办法从我这边解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T15:09:01.447

您可以使用

```
header('Content-type: text/html; charset=utf-8'); 
```

在您的页面中将字符编码设置为 UTF-8。

除了确保您告诉浏览器您使用的是 UTF-8 外，还将其添加到您的代码中：

```
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<!-- rest of code here -->
</head> 
```

另请记住，它还取决于此数据的来源。如果它是从数据库中提取的，请检查数据库的编码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T12:36:49.403

读取`encoding`XML 文件的属性并使用该编码将其转换为您的网站正在使用的编码。如果没有 encoding 属性，则默认为 UTF-8。如果步骤生成的编码与您的网站使用的编码相同，则无需转换。

```
$encoding_read_from_xml = "ISO-8859-1";
$encoding_my_website_uses = "UTF-8";
$xml_content = mb_convert_encoding($xml_content, $encoding_my_website_uses, $encoding_read_from_xml); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-05T13:59:31.223

避免此类问题的最佳方法是，对整个网站使用 UTF-8，这意味着：

1.  将 PHP 文件本身编码为 UTF-8，这由您的编辑器/IDE 完成。
2.  将元标记添加到页面，例如`<meta charset="UTF-8">`HTML5。
3.  也许最重要的一点：在进行查询之前将数据库连接对象的字符集设置为 UTF-8，对于 mysqli，您可以调用`$mysqli->set_charset('utf8')`.

当您遵循这些要点时，您将永远不必在不同编码之间转换任何数据。您可以在这篇小文章[UTF-8 for PHP and MySQL](http://www.martinstoeckli.ch/php/php.html#utf8)中找到更多信息和示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T15:11:58.890

检查您的输入**和**输出编码。在大多数情况下，为两者选择 UTF-8 是最好的方法。

如果您的输入采用 ISO-8859-1 格式，请使用`utf8_encode()`将其编码为 UTF-8。如果它已经是 UTF-8，`utf8_encode()`再次调用会搞砸。

要将输出指定为 UTF-8，请`header('Content-type: text/html; charset=utf-8');`在 PHP 或`<meta charset="UTF-8" />`HTML 中使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T15:07:42.493

您是否尝试过如下所示调整标题？，我遇到了同样的问题，但这清除了事情

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"> 
    <head> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

# visual-studio-2012 - UnsatisfiedLinkError 的原因

> ID：15814950
> 
> 赞同：0
> 
> 时间：2013-04-04T15:05:22.837
> 
> 标签：visual-studio-2012, java-native-interface, unsatisfiedlinkerror

我有一个`C++`代码，我用它编译`Visual Studio 2012`为`.dll`.

然后，我使用该方法将该库加载到 Java 应用程序中`System.loadLibrary`。

我已经做了很多时间，在 Visual Studio 上用旧版本编译库，没有问题。

现在，用 VS2012 编译它我得到这个错误：

```
Exception in thread "Thread-2" java.lang.UnsatisfiedLinkError: C:\path\to\library.dll: The specified procedure could not be found 
```

我检查了 .dll`Dependecy Walker`并且没有缺少依赖项。

我真的不知道我能做些什么才能让它发挥作用。

你能给我一些提示吗？

# css - HTML 无序列表的项目符号被隐藏了一半

> ID：15814958
> 
> 赞同：0
> 
> 时间：2013-04-04T15:05:39.760
> 
> 标签：css, html-lists

我有一个无序列表，在每个列表项的左侧显示项目符号。在 FF/IE 中，项目符号显示一半。在 Chrome 中，它们根本不显示。通过添加`margin-left: 5px`到`<li>`我可以让他们出现。

但我真正想了解的是它们为什么被隐藏。我宁愿治疗原因而不是症状。我无法在小提琴中重现，所以这里是该页面的链接。我已将其尽可能简化，并在页面中提供了解释。

[http://help.projectorpsa.com/display/doc432m/Test](http://help.projectorpsa.com/display/doc432m/Test)

我正在使用一个名为 Confluence 的 CMS 系统，因此我对 html 标记没有太多控制权。无论如何，这是标记。

```
<div class="panelMacro">
    <table class="infoMacro">
        <tbody>
            <tr>
                <td>
                    <div class="panel" style="background-color: transparent;border-color: transparent;border-width: 1px;">
                        <div class="panelContent" style="background-color: transparent;">
                            <ul>
                                <li>A - There is no bullet displayed for this list. If I add margin-left: 6px to this &lt;li&gt; then I can see it. But I don't understand why this is happening. What is the bullet hiding behind?</li>
                                <li>B</li>
                                <li>C</li>
                                <li>D</li>
                            </ul>
                        </div>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:07:20.983

因为这条规则：

```
table.infoMacro ul {
padding-left: 0px;
} 
```

要么摆脱它，要么将填充增加到 6px。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:08:15.987

这就是 custom.css 第 33 行的原因：

```
table.infoMacro ul {
padding-left: 0px;
} 
```

尝试覆盖这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T15:06:51.123

尝试添加`list-style-position: inside;`到您的`ul`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-16T18:57:18.800

如果您逐步浏览 html，您会看到您 `<div class="panel">`的设置为溢出：隐藏；

将其更改为溢出：可见；你应该很高兴。

# php - 使用 foreach 循环在 PHP 中回显数组元素

> ID：15814963
> 
> 赞同：0
> 
> 时间：2013-04-04T15:05:50.977
> 
> 标签：php

我正在尝试使用 foreach 循环测试 PHP 中的 URL 是否存在多个文件。

出于某种原因，我只将最后一个 URL 附加到数组中，但我无法找出原因。

它应该像这样打印出来：

```
TEST.COM/sky.jpg exists.
TEST.COM/water.jpg doesnt exist
TEST.COM/trees.jpg exists. 
```

但最后一个 url 只附加，即`trees.jpg`.

这是我的代码，我不太擅长 PHP。可能对功能有点误解`foreach`。

我哪里出错了？

```
$neg = 'doesnt exist';
$exists = 'exists.';
$file = $_POST['URL'];
$terms = array('sky.jpg','water.jpg','trees.jpg');
reset($terms);
$list = array();
foreach ($terms as &$i){
    $fullurl = $file.$i;
    $file_headers = @get_headers($fullurl);}
    if($file_headers[0] == 'HTTP/1.1 404 Not Found') {
        array_push($list,$fullurl." ".$neg);}
    else {array_push($list,$fullurl." ".$exists);}
foreach ($list as &$x){echo $x;}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:12:45.770

错误在于这一行：

```
$file_headers = @get_headers($fullurl);} 
```

删除尾随`}`并将其放在这里：

```
else {array_push($list,$fullurl." ".$exists);}} 
```

否则，`array_push`总共只被调用一次，结果为 getting `trees.jpg`。

您可以将右大括号单独放在一行上并更正缩进以提高代码可读性。

# sql - intellij idea 社区版 - Java 中的 sql 自动完成？

> ID：15814972
> 
> 赞同：0
> 
> 时间：2013-04-04T15:06:16.213
> 
> 标签：sql, intellij-idea

我看到 Intellij 社区版不支持 sql 工具（根据这个比较：[http](http://www.jetbrains.com/idea/features/editions_comparison_matrix.html?IC) ://www.jetbrains.com/idea/features/editions_comparison_matrix.html?IC ）。

是否有任何插件可以在 Java 代码中启用 SQL 自动完成/语法突出显示？如此处所述 - “其他语言中的 SQL”： http: [//www.jetbrains.com/idea/features/database_tools.html](http://www.jetbrains.com/idea/features/database_tools.html)

# javascript - Onclick 与 Onsubmit 问题（真/假和警报行为？）

> ID：15814975
> 
> 赞同：0
> 
> 时间：2013-04-04T15:06:25.793
> 
> 标签：javascript, html, onclick, onsubmit

长话短说，我试图了解如何正确使用 onsubmit。testresults 函数可以在 onclick 上正常工作，但我无法在提交时激活它（使用按钮或按 Enter 键）。我在这里错过了什么吗？最终，我只想让 onsubmit 运行检查并提供与 onclick 相同的边界更改/警报。这不可能吗？

```
function testResults(form) {
    var TestVar = form.firstname.value;
    if (TestVar.length > 0) {
        alert("You typed: " + TestVar);
        document.getElementById('firstname').style.border = ''
    } else {
        alert("You didn't typed!" + TestVar);
        document.getElementById('firstname').style.border = '1px solid red';
        return false;
    }
    return true;
} 
```

HTML

```
<html>    
<head>
    <link rel="stylesheet" type="text/css" href="note.css">
    <script type="text/javascript" src="formJS2.js"></script>
</head>
<body>
    <form NAME="myform" ACTION="" METHOD="GET" onSubmit="testResults();"> <span>First name:</span> 
        <input type="text" name="firstname" id="firstname" value="" />
        <br>
        <input type="submit" value="Submit">
        <input type="button" name="button" value="Click" onClick="testResults(this.form)">
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:08:31.367

是的，你错过了一些东西。您的`testResults`函数有一个`form`参数，但是当您在`onSubmit`属性中调用它时，您没有传递任何值（因此`form`函数内部将是`undefined`）。将其更改为：

```
<form NAME="myform" ACTION="" METHOD="GET" onSubmit="testResults(this);"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T15:08:02.487

只需使用：

```
onSubmit="testResults(this);" 
```

解释：您的方法需要一个类型为形式的参数，您需要传递它...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T15:14:18.420

您当前的方法是您期望`form`作为 onsubmit 回调的第一个参数。其他答案已经表明您只需将其传递进去。

通常，当您有一个事件处理程序时，第一个参数是事件。通过以这种方式用您自己的函数覆盖它，您将失去对事件执行任何操作的能力。在此示例中，您可以摆脱它，但如果您正在寻找一种*正确*的方法，那么这是我的建议：

```
<form method="post" action="submit.php" id="my_form">
    <input type="submit" value="submit" />
</form>

<script type="text/javascript">
    document.getElementById("my_form").addEventListener("submit", function (event) {
        if (false === form_is_valid(event.target)) {
            event.preventDefault(); // prevents submitting to submit.php
        }
    });
</script> 
```

*免责声明：*这是代码不完整，不适用于所有（旧）浏览器。它只是为了说明如何使用事件处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T15:28:39.880

你也可以用这个

```
 <input type="button" name="button" value="Click" onClick="return testResults(this.form)"> 
```

只需将 return 放在您的函数之前并相应地返回 true 或 false 。

# caching - Symfony 2 缓存清除问题

> ID：15814976
> 
> 赞同：12
> 
> 时间：2013-04-04T15:06:30.893
> 
> 标签：caching, symfony, cache-control

当我尝试清除缓存时，我的 Symfony 2 网站最近出现问题。我在终端中输入以下命令：

```
php app/console cache:clear --env=dev 
```

并得到以下错误：

```
[ErrorException]                                                                                                                                                                                                                                   
 Warning: rename(/var/www/corpsite/corpsite/app/cache/dev,/var/www/corpsite/corpsite/app/cache/dev_old): Directory not empty in /var/www/corpsite/corpsite/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/Command/CacheClearCommand.php line 74 
```

所以我将该文件的权限更改为 777，然后重新运行 clear cache 命令，这给了我这个错误：

```
 [ErrorException]                                                                                                                                                                                                                         
  Warning: unlink(/var/www/corpsite/corpsite/app/cache/dev_old/twig/6b/e9/4491e41b895786689b86f32f446f.php): Permission denied in /var/www/corpsite/corpsite/vendor/symfony/src/Symfony/Component/HttpKernel/Util/Filesystem.php line 100 
```

我可以通过删除“dev_old”文件夹来解决问题，但我想解决导致问题的问题。

PS - 我知道该网站正在开发模式下运行。该网站已经运行了 10 个月，这在以前从未成为问题。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-04T15:58:53.070

您需要获得对缓存和日志文件夹的访问权限。为此，您可以按照此处给出的指示进行操作：http: [//symfony.com/doc/current/book/installation.html#configuration-and-setup](http://symfony.com/doc/current/book/installation.html#configuration-and-setup)

有几种方法，具体取决于您的操作系统（将 www-data 替换为您的 apache 用户）：

如果它支持 chmod +a：

```
$ rm -rf app/cache/*
$ rm -rf app/logs/*

$ sudo chmod +a "www-data allow delete,write,append,file_inherit,directory_inherit" app/cache app/logs
$ sudo chmod +a "`whoami` allow delete,write,append,file_inherit,directory_inherit" app/cache app/logs 
```

否则，如果它支持 setfacl（请参阅[https://help.ubuntu.com/community/FilePermissionsACLs](https://help.ubuntu.com/community/FilePermissionsACLs)）：

```
$ sudo setfacl -R -m u:www-data:rwX -m u:`whoami`:rwX app/cache app/logs
$ sudo setfacl -dR -m u:www-data:rwx -m u:`whoami`:rwx app/cache app/logs 
```

否则，将这些行放在 app/console、web/app.php 和 web/app_dev.php 的开头（不推荐）：

```
umask(0002); // This will let the permissions be 0775

// or

umask(0000); // This will let the permissions be 0777 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-25T19:00:36.233

在**Symfony3**文件夹中，缓存从`app`移至`var`，因此命令将是：

```
$ rm -rf var/cache/*
$ rm -rf var/logs/*
$ sudo chmod +a "www-data allow delete,write,append,file_inherit,directory_inherit" var/cache var/logs
$ sudo chmod +a "`whoami` allow delete,write,append,file_inherit,directory_inherit" var/cache var/logs 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2016-05-15T22:24:34.773

您需要获得对缓存和日志文件夹的访问权限。为此，您可以按照此处给出的指示进行操作：

# android - 在 Android 上实现推送通知的简单方法

> ID：15814983
> 
> 赞同：3
> 
> 时间：2013-04-04T15:06:50.077
> 
> 标签：android, push-notification, google-cloud-messaging

我已经在 iOS 和 WP7 上实现了推送通知。

在这两种情况下，代码都不超过 20 行，即使对于像我这样的非本地程序员来说，这也是完全可以自我解释的。

现在我正在尝试在 Android 上做同样的事情。作为记录，我的应用程序只做两件事。打开一个带有 URL 的 webView 并注册推送通知。

我为 Android 找到的是 API 和[本](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)教程中的示例代码。但是很难相信我需要 5-6 个 Java 类，每个类 50-80 行代码来完成这样一个简单的任务。我看到代码尝试连接到您的服务器 5 次，每次都等待一段时间，然后再试一次等​​等。我想这只是“不需要”的许多事情中的一件，只是在附近让我更加困惑。

是否有一种干净且简单的方法来注册推送通知？我对在我的服务器上注册令牌不感兴趣，因为我自己会这样做。我只需要从 GCM 服务器获取令牌，仅此而已，没什么花哨的。

* * *

作为记录，我确实尝试使用示例代码，但曾经有两种不同的错误：

1）有时不是说我在GCM服务器上注册了，而是说我成功注销了？！我不知道为什么会发生这种情况。我刚刚杀死了该应用程序并重新启动它，有时我收到了这条消息。

2) 有时，当应用程序在后台运行时，我会毫无理由地收到一条消息，提示它崩溃并停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:13:48.767

不知道该告诉你什么。除非您想编写自己的推送服务，否则 Google 的 GCM 是不错的选择。这是[“入门”](http://developer.android.com/google/gcm/gs.html)文档。

# c - ALSA snd_pcm_sw_params_set_stop_threshold() 设置为较低的值会导致欠载

> ID：15814986
> 
> 赞同：1
> 
> 时间：2013-04-04T15:06:56.293
> 
> 标签：c, linux, alsa

对于麦克风，我将停止阈值理解为：如果声卡硬件环形缓冲区中的填充样本超过此阈值，则硬件停止从麦克风的模数转换器读取。因此环形缓冲区不会被覆盖。

对于扬声器，它是应该导致停止使用声卡的数模转换器播放音频的最大数据。任何进一步的数据都应该导致溢出。

（如果我在上述假设中错了，请纠正我）

对于扬声器，当我将 ALSA snd_pcm_sw_params_set_stop_threshold() 设置为较低的值时，我可以看到欠载。我预计会有更多的超支。为什么是这样 ？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T16:34:50.147

对于捕获设备，当可用帧（即捕获但尚未从缓冲区读取的帧）的数量达到停止阈值时会发生溢出。只有捕获设备才会发生溢出。

对于播放设备，当可用帧数（即缓冲区中的可用空间）达到停止阈值时，就会发生欠载。只有播放设备才会发生欠载。

降低停止阈值将使 xruns 更有可能。

# ruby-on-rails - 登录不适用于heroku应用程序

> ID：15814988
> 
> 赞同：2
> 
> 时间：2013-04-04T15:06:58.623
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku

好的，这变得非常令人沮丧，一个接一个的问题。我将我的应用程序推送到 heroku，当我访问 url 时，我得到了我的登录屏幕（我应该这样做）。但是当我实际尝试登录时，它会给我“无效的用户名/密码”警告消息。但是，在我的本地主机上一切正常。我假设应用程序与我的数据库通信存在问题。我已经运行了“heroku run rake db:migrate”，但没有运气。

在我的本地主机上，我使用的是标准 sqlite3 数据库，但是当我将它推送到 heroku 时，我必须在我的 gem 文件中包含 gem 'pg' 以避免错误。当我将它保留为 gem sqlite3 时，我收到一条错误消息，说它找不到 sqlite3.h 文件或类似的东西。

我可以看到我的数据库位于 postgres.heroku.com 上。我还通过 heroku 支持的推荐安装了这个 gem

宝石'activerecord-postgresql-适配器'

当我尝试输入登录信息时，这里有一些来自 heroku 的日志。任何帮助是极大的赞赏。

```
←[36m2013-04-04T14:31:15+00:00 app[web.1]:←[0m Started POST "/session" for 74.143.68.203 at 2013-04-04 14:31:15 +0000
←[36m2013-04-04T14:31:15+00:00 app[web.1]:←[0m Processing by SessionsController#create as HTML
←[36m2013-04-04T14:31:15+00:00 app[web.1]:←[0m   Parameters: {"utf8"=>"???", "authenticity_token"=>"rQ1i9DRCV3qju2+RSBwp/9XYW8+6RiLfKfGZFNEcbT8=", "email"=>"admin@ciagent.com", "password"=>"[FILTERED]", "commit"=>"Login"}
←[36m2013-04-04T14:31:15+00:00 app[web.1]:←[0m   Rendered sessions/new.html.erb within layouts/application (0.9ms)
←[36m2013-04-04T14:31:15+00:00 app[web.1]:←[0m Completed 200 OK in 4ms (Views: 2.2ms | ActiveRecord: 1.2ms)
←[33m2013-04-04T14:31:16+00:00 heroku[router]:←[0m at=info method=GET path=/favicon.ico host=boiling-reef-2060.herokuapp.com fwd="74.143.68.203" dyno=web.1 connect=2ms service=7ms status=304 bytes=0
←[33m2013-04-04T14:31:15+00:00 heroku[router]:←[0m at=info method=POST path=/session host=boiling-reef-2060.herokuapp.com fwd="74.143.68.203" dyno=web.1 connect=1ms service=12ms status=200 bytes=1721 
```

我只是不明白为什么当我的应用程序在本地主机上使用相同的用户名/密码时我可以登录，但是当应用程序在 heroku 上时它无法识别登录信息。

附加编辑***_* __ *_* __ *_* __ *_* ____**

我为我的本地应用程序打开了控制台，并在寻找用户时发现了我所期望的：

```
$ rails c
Loading development environment (Rails 3.2.13)
irb(main):001:0> user=User.find(1)
  ←[1m←[36mUser Load (5.0ms)←[0m  ←[1mSELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1←[0m  [["id", 1]]
=> #<User id: 1, email: "admin@ciagent.com", hashed_password: "dc009272b087019fb2b20b691dc827dca1424a1a", created_at: "2010-10-29 19:43:00", updated_at: "2011-01-12 20:07:09", admin: "yes", logo: nil> 
```

当我在heroku上打开控制台时寻找这个时，这是我收到的错误。我会继续寻找修复，但也许你们会看到一个明显的危险信号。

```
Connecting to database specified by DATABASE_URL
Loading production environment (Rails 3.2.13)
irb(main):001:0> user=User.find(1)
user=User.find(1)
User Load (39.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
ActiveRecord::RecordNotFound: Couldn't find User with id=1
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/relation/finder_methods.rb:343:in `find_one'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/relation/finder_methods.rb:314:in `find_with_ids'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/relation/finder_methods.rb:107:in `find'
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/querying.rb:5:in `find' from (irb):1
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands/console.rb:47:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands/console.rb:8:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.13/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:45:49.880

When you run the app on your local computer (a.k.a. development) it is using a local `sqlite` database. When you run it on heroku (a.k.a. production), it uses a cloud-based `postgres` database. This is necessary so that you can make changes and develop the app on your local computer, without having to worry about breaking the live production database. Database settings are in `config/database.yml`.

If you've added the username / password to `db/seeds` or via a migration, you can reasonably expect the same logins to work in development and production. Presumably, this is what you did before, when you say this worked. Either that, or you had both production and development pointing to the same database (NOT recommended).

Because it's not working here, I'm guessing you added the logins via the console, or via the site itself. You can either run `heroku run rails console` to open a console on the production server, and add the logins. Or you can add them via a migration, then run the same migration in production so that they're added there as well.

# string - 批量比较路径名 %1

> ID：15814990
> 
> 赞同：1
> 
> 时间：2013-04-04T15:07:02.003
> 
> 标签：string, batch-file, path, compare

这是我的批处理脚本的一小部分，一旦路径中有空格，即使我在它周围使用“”，它也不起作用。

```
 call :part %1

    :part
    set  _fname=%~nx1
    if "%_fname:~0,7%"=="CREATE_" (
      copy "%~1" "%appdata%\somefolder"
      goto :eof
      ) 
```

如果我以这样的方式开始，一切正常。

```
 mybatch.bat "Z:\hello_world\CREATE_abc.def" 
```

像这样启动它时：

```
 mybatch.bat "Z:\hello world\CREATE_abc.def" 
```

我收到这样的错误：“world\CREATE_abc.def”“==""" 无法处理。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:29:35.930

问题是 CALLed 中 %1 的解析：part

尝试

```
 CALL :part "%~1" 
```

`%~1`扩展第一个参数，不带引号。并且添加的引号确保被调用的标签只会接收一个参数。

# pickle - 石墨泡菜与线路接收器

> ID：15814991
> 
> 赞同：6
> 
> 时间：2013-04-04T15:07:06.547
> 
> 标签：pickle, graphite

似乎有两种方法可以将指标推向石墨/碳，

1.  线路接收器
2.  泡菜接收器

根据文档[http://graphite.readthedocs.org/en/1.0/feeding-carbon.html](http://graphite.readthedocs.org/en/1.0/feeding-carbon.html) pickle 更好，因为它允许在一次调用中批处理多个指标。

但是，也可以通过使用换行符分隔指标来将指标批处理到线路接收器。例如：

```
echo -e "local.random.diceroll4 40 `date +%s`\nlocal.random.diceroll5 400 `date +%s`" | nc localhost 2003 
```

因此，鉴于酸洗/取消酸洗指标的额外开销，泡菜接收器何时以及为什么比线路接收器更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T02:08:21.913

Pickle 允许您为单个指标发送多个时间戳/值对。该文档确实声明它比逐行协议更快，但没有给出原因。一种可能性是，通过为同一指标批量处理多个值，.wsp 文件打开并在缓存中用于第二个和以后的数据点。如果每次命名度量时只提供一个时间/值对，它似乎不太可能更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T11:18:43.567

我的猜测是不会一遍又一遍地发送指标名称（大小）以及通过列表更好的可读性和管理

# php - 在 JavaScript 或 PHP 中转义撇号

> ID：15814993
> 
> 赞同：4
> 
> 时间：2013-04-04T15:07:15.173
> 
> 标签：php, javascript, escaping

我在 PHP 中有一个 foreach 循环：

```
var circle_<?php echo $x; ?> = '<?php echo $c; ?>'; 
```

它在 JavaScript 中返回：

```
var circle_0 = '<p class="medium">With us, you can customize more than just a closet.</p>';

var circle_1 = '<p class="medium">We are boutique condo builders who love what we do.</p>';

var circle_2 = '<p class="medium">who says condos can't be spacious?<br/></p>'; 
```

如您所见， circle_2 在字符串中有一个撇号，因此它破坏了脚本：

> Uncaught SyntaxError: Unexpected token ILLEGAL

我会使用什么过滤器来解决这个问题（PHP 或 JavaScript）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T15:09:28.430

使用[PHP](http://en.wikipedia.org/wiki/PHP)，您可以尝试：

```
 <?php echo str_replace("'", "\'",$c); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T15:11:34.003

PHP addslashes() 函数将帮助您： http: [//php.net/manual/en/function.addslashes.php](http://php.net/manual/en/function.addslashes.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T15:18:07.280

不要`foreach`为此使用循环，也不要`addslashes`在这里使用或任何其他不好的答案。

像这样编写代码：

```
echo "var circle = ".json_encode($carray).';'; 
```

`$carray`您当前正在循环`foreach()`以获取`$x`和的数组在哪里`$c`？

这将创建一个如下所示的 Javascript 数组：

```
var circle = [
    '\'<p class="medium">With us, you can customize more than just a closet.</p>\'',
    '\'<p class="medium">We are boutique condo builders who love what we do.</p>\'',
    '\'<p class="medium">who says condos can't be spacious?<br/></p>\''
]; 
```

然后，您可以通过 、 等方式访问`circle[0]`元素`circle[1]`。

希望有帮助。

# ssl - 在 Wireshark 中解密 HTTPS 流量不起作用

> ID：15814999
> 
> 赞同：13
> 
> 时间：2013-04-04T15:07:31.053
> 
> 标签：ssl, https, wireshark, encryption

我在 Windows Server 2008 R2 上运行 Wireshark 1.8.6 并尝试解密传入的 HTTPS 通信以调试我看到的问题。

我的 RSA 密钥列表设置正确（我认为），但 Wireshark 出于某种原因不会解密 SSL 流量。过去在调试与其他客户端系统的交换时，我已经让它工作了，所以我想知道这里使用的 TLS 是否是特定的（即我已经读到如果使用 Diffie-Hellman，你无法解密，但我可以'不知道这是否是正在使用的）。

我的 RSA 密钥列表条目如下：

```
IP Address: 192.168.1.27 (the IP address of the server)
Port: 7447
Protocol: http
Key File: set to my .pem (which I created using openssl from a .pfx containing both the public and private key).
Password: blank because it doesn't seem to need it for a .pem (Wireshark actually throws an error if I enter one). 
```

在我的 Wireshark 跟踪中，我可以看到 Client Hello 和 Server Hello，但应用程序数据没有被解密（右键单击 -> Follow SSL Stream 没有显示任何内容）。

我的 SSL 日志粘贴在下面 - 这里有什么我遗漏的东西会告诉我为什么解密失败？我看到一些这样的条目让我担心，但我不确定如何解释它们：

```
packet_from_server: is from server - FALSE
decrypt_ssl3_record: using client decoder
decrypt_ssl3_record: no decoder available
dissect_ssl3_handshake iteration 1 type 16 offset 5 length 258 bytes, remaining 267 
ssl_decrypt_pre_master_secret key exchange 0 different from KEX_RSA (16)
dissect_ssl3_handshake can't decrypt pre master secret
  record: offset = 267, reported_length_remaining = 59 
```

SSL 日志：

```
ssl_association_remove removing TCP 7447 - http handle 00000000041057D0
Private key imported: KeyID 02:bb:83:4f:80:cf:39:59:39:cd:74:ab:b4:4b:c7:20:...
ssl_load_key: swapping p and q parameters and recomputing u
ssl_init IPv4 addr '192.168.1.27' (192.168.1.27) port '7447' filename 'C:\Users\username\Desktop\Certs\server_cert.pem.pem' password(only for p12 file) ''
ssl_init private key file C:\Users\username\Desktop\Certs\server_cert.pem.pem successfully loaded.
association_add TCP port 7447 protocol http handle 00000000041057D0

dissect_ssl enter frame #2968 (first time)
ssl_session_init: initializing ptr 0000000006005E40 size 680
  conversation = 00000000060056C0, ssl_session = 0000000006005E40
  record: offset = 0, reported_length_remaining = 123
dissect_ssl3_record: content_type 22 Handshake
decrypt_ssl3_record: app_data len 118, ssl state 0x00
association_find: TCP port 59050 found 0000000000000000
packet_from_server: is from server - FALSE
decrypt_ssl3_record: using client decoder
decrypt_ssl3_record: no decoder available
dissect_ssl3_handshake iteration 1 type 1 offset 5 length 114 bytes, remaining 123 
packet_from_server: is from server - FALSE
ssl_find_private_key server 192.168.1.27:7447
dissect_ssl3_hnd_hello_common found CLIENT RANDOM -> state 0x01

dissect_ssl enter frame #2971 (first time)
  conversation = 00000000060056C0, ssl_session = 0000000006005E40
  record: offset = 0, reported_length_remaining = 326
dissect_ssl3_record found version 0x0301(TLS 1.0) -> state 0x11
dissect_ssl3_record: content_type 22 Handshake
decrypt_ssl3_record: app_data len 262, ssl state 0x11
packet_from_server: is from server - FALSE
decrypt_ssl3_record: using client decoder
decrypt_ssl3_record: no decoder available
dissect_ssl3_handshake iteration 1 type 16 offset 5 length 258 bytes, remaining 267 
ssl_decrypt_pre_master_secret key exchange 0 different from KEX_RSA (16)
dissect_ssl3_handshake can't decrypt pre master secret
  record: offset = 267, reported_length_remaining = 59
dissect_ssl3_record: content_type 20 Change Cipher Spec
dissect_ssl3_change_cipher_spec
packet_from_server: is from server - FALSE
ssl_change_cipher CLIENT
  record: offset = 273, reported_length_remaining = 53
dissect_ssl3_record: content_type 22 Handshake
decrypt_ssl3_record: app_data len 48, ssl state 0x11
packet_from_server: is from server - FALSE
decrypt_ssl3_record: using client decoder
decrypt_ssl3_record: no decoder available
dissect_ssl3_handshake iteration 1 type 166 offset 278 length 4253081 bytes, remaining 326 

dissect_ssl enter frame #2972 (first time)
  conversation = 00000000060056C0, ssl_session = 0000000006005E40
  record: offset = 0, reported_length_remaining = 59
dissect_ssl3_record: content_type 20 Change Cipher Spec
dissect_ssl3_change_cipher_spec
packet_from_server: is from server - TRUE
ssl_change_cipher SERVER
  record: offset = 6, reported_length_remaining = 53
dissect_ssl3_record: content_type 22 Handshake
decrypt_ssl3_record: app_data len 48, ssl state 0x11
packet_from_server: is from server - TRUE
decrypt_ssl3_record: using server decoder
decrypt_ssl3_record: no decoder available
dissect_ssl3_handshake iteration 1 type 8 offset 11 length 5212462 bytes, remaining 59 

dissect_ssl enter frame #2973 (first time)
  conversation = 00000000060056C0, ssl_session = 0000000006005E40
  record: offset = 0, reported_length_remaining = 277
dissect_ssl3_record: content_type 23 Application Data
decrypt_ssl3_record: app_data len 272, ssl state 0x11
packet_from_server: is from server - FALSE
decrypt_ssl3_record: using client decoder
decrypt_ssl3_record: no decoder available
association_find: TCP port 59050 found 0000000000000000
association_find: TCP port 7447 found 0000000004FCF520

dissect_ssl enter frame #2990 (first time)
  conversation = 00000000060056C0, ssl_session = 0000000006005E40
  record: offset = 0, reported_length_remaining = 53
dissect_ssl3_record: content_type 23 Application Data
decrypt_ssl3_record: app_data len 48, ssl state 0x11
packet_from_server: is from server - TRUE
decrypt_ssl3_record: using server decoder
decrypt_ssl3_record: no decoder available
association_find: TCP port 7447 found 0000000004FCF520

dissect_ssl enter frame #2991 (first time)
  conversation = 00000000060056C0, ssl_session = 0000000006005E40
  record: offset = 0, reported_length_remaining = 1380
  need_desegmentation: offset = 0, reported_length_remaining = 1380

dissect_ssl enter frame #2999 (first time)
  conversation = 00000000060056C0, ssl_session = 0000000006005E40
  record: offset = 0, reported_length_remaining = 8565
dissect_ssl3_record: content_type 23 Application Data
decrypt_ssl3_record: app_data len 8560, ssl state 0x11
packet_from_server: is from server - FALSE
decrypt_ssl3_record: using client decoder
decrypt_ssl3_record: no decoder available
association_find: TCP port 59050 found 0000000000000000
association_find: TCP port 7447 found 0000000004FCF520

dissect_ssl enter frame #3805 (first time)
  conversation = 00000000060056C0, ssl_session = 0000000006005E40
  record: offset = 0, reported_length_remaining = 389
dissect_ssl3_record: content_type 23 Application Data
decrypt_ssl3_record: app_data len 384, ssl state 0x11
packet_from_server: is from server - FALSE
decrypt_ssl3_record: using client decoder
decrypt_ssl3_record: no decoder available
association_find: TCP port 59050 found 0000000000000000
association_find: TCP port 7447 found 0000000004FCF520

dissect_ssl enter frame #3807 (first time)
  conversation = 00000000060056C0, ssl_session = 0000000006005E40
  record: offset = 0, reported_length_remaining = 53
dissect_ssl3_record: content_type 23 Application Data
decrypt_ssl3_record: app_data len 48, ssl state 0x11
packet_from_server: is from server - TRUE
decrypt_ssl3_record: using server decoder
decrypt_ssl3_record: no decoder available
association_find: TCP port 7447 found 0000000004FCF520

dissect_ssl enter frame #3808 (first time)
  conversation = 00000000060056C0, ssl_session = 0000000006005E40
  record: offset = 0, reported_length_remaining = 1380
  need_desegmentation: offset = 0, reported_length_remaining = 1380

dissect_ssl enter frame #3815 (first time)
  conversation = 00000000060056C0, ssl_session = 0000000006005E40
  record: offset = 0, reported_length_remaining = 8469
dissect_ssl3_record: content_type 23 Application Data
decrypt_ssl3_record: app_data len 8464, ssl state 0x11
packet_from_server: is from server - FALSE
decrypt_ssl3_record: using client decoder
decrypt_ssl3_record: no decoder available
association_find: TCP port 59050 found 0000000000000000
association_find: TCP port 7447 found 0000000004FCF520

dissect_ssl enter frame #2968 (already visited)
  conversation = 00000000060056C0, ssl_session = 0000000000000000
  record: offset = 0, reported_length_remaining = 123
dissect_ssl3_record: content_type 22 Handshake
dissect_ssl3_handshake iteration 1 type 1 offset 5 length 114 bytes, remaining 123 

dissect_ssl enter frame #2971 (already visited)
  conversation = 00000000060056C0, ssl_session = 0000000000000000
  record: offset = 0, reported_length_remaining = 326
dissect_ssl3_record: content_type 22 Handshake
dissect_ssl3_handshake iteration 1 type 16 offset 5 length 258 bytes, remaining 267 
  record: offset = 267, reported_length_remaining = 59
dissect_ssl3_record: content_type 20 Change Cipher Spec
dissect_ssl3_change_cipher_spec
  record: offset = 273, reported_length_remaining = 53
dissect_ssl3_record: content_type 22 Handshake
dissect_ssl3_handshake iteration 1 type 166 offset 278 length 4253081 bytes, remaining 326 

dissect_ssl enter frame #2973 (already visited)
  conversation = 00000000060056C0, ssl_session = 0000000000000000
  record: offset = 0, reported_length_remaining = 277
dissect_ssl3_record: content_type 23 Application Data
association_find: TCP port 59050 found 0000000000000000
association_find: TCP port 7447 found 0000000004FCF520

dissect_ssl enter frame #2999 (already visited)
  conversation = 00000000060056C0, ssl_session = 0000000000000000
  record: offset = 0, reported_length_remaining = 8565
dissect_ssl3_record: content_type 23 Application Data
association_find: TCP port 59050 found 0000000000000000
association_find: TCP port 7447 found 0000000004FCF520

dissect_ssl enter frame #3805 (already visited)
  conversation = 00000000060056C0, ssl_session = 0000000000000000
  record: offset = 0, reported_length_remaining = 389
dissect_ssl3_record: content_type 23 Application Data
association_find: TCP port 59050 found 0000000000000000
association_find: TCP port 7447 found 0000000004FCF520

dissect_ssl enter frame #2968 (already visited)
  conversation = 00000000060056C0, ssl_session = 0000000000000000
  record: offset = 0, reported_length_remaining = 123
dissect_ssl3_record: content_type 22 Handshake
dissect_ssl3_handshake iteration 1 type 1 offset 5 length 114 bytes, remaining 123 

dissect_ssl enter frame #2968 (already visited)
  conversation = 00000000060056C0, ssl_session = 0000000000000000
  record: offset = 0, reported_length_remaining = 123
dissect_ssl3_record: content_type 22 Handshake
dissect_ssl3_handshake iteration 1 type 1 offset 5 length 114 bytes, remaining 123 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T15:20:38.220

> ssl_decrypt_pre_master_secret 密钥交换 0 不同于 KEX_RSA (16)

看起来您正在使用 DHE 密码套件（至少不是具有 RSA 密钥交换的密码套件），即使您拥有私钥，它也将提供*完美前向保密并防止解密这些数据包。*

您可能对以下内容感兴趣：

*   [这个 Security.SE 问题](https://security.stackexchange.com/a/14083/2435)
*   [*SSL/TLS & Perfect Forward Secrecy* by Vincent Bernat](http://vincent.bernat.im/en/blog/2011-ssl-perfect-forward-secrecy.html)

如果这是为了调试，请尝试关闭 DHE 密码套件。

`Server Hello`通过查看Wireshark中的数据包，您应该能够看到您正在使用的密码套件。

* * *

较新的版本也可以直接使用 pre-master secret（阅读[Wireshark wiki SSL 页面的“](http://wiki.wireshark.org/SSL)*使用 (Pre)-Master-Secret* ”部分）。在某些情况下，这也是您可以从客户端获得的东西。无论哪种方式，要使其正常工作，您都需要从两方之一获取预主密钥。以下是 Wireshark wiki 该部分的几个链接：

*   [Ask.Wireshark：使用主密钥和会话 ID 跟踪 SSL 流](http://ask.wireshark.org/questions/4229/follow-ssl-stream-using-master-key-and-session-id)
*   [Security.SE：使用 DHE_RSA 密码套件时在 Wireshark 中解密 TLS](https://security.stackexchange.com/a/42350/2630)