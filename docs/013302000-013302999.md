# StackOverflow 问答 13302000-13302999

# foursquare - 功能请求：将搜索半径添加到 Suggestion Complete Venues api 方法

> ID：13302002
> 
> 赞同：1
> 
> 时间：2012-11-09T04:12:26.400
> 
> 标签：foursquare

我正在将建议完整场所搜索集成到我的网站中。它正在从远离我们要搜索的城市的地方拉回结果。您可以在 api 方法中添加搜索半径参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:53:48.800

半径参数实际上是可用的，尽管缺少该参数的文档。感谢您指出这一点，将添加文档。

# c# - 每次迭代的 C#

> ID：13302004
> 
> 赞同：-4
> 
> 时间：2012-11-09T04:12:53.177
> 
> 标签：c#

> **可能重复：**
> [C# 列格式](https://stackoverflow.com/questions/13283184/c-sharp-column-formatting)

好吧，我在我的代码中这个棘手的部分，暂时被卡住了，所以我寻求帮助。我也在用 C# 开发这个。这是我处理它的一段代码：方法显示是我在其他人身上遇到的问题是正确的。问题输出错误，与 for each 循环有关。请看看我的输出现在是什么样子的链接，以及我试图让它看起来像什么的链接

```
thanks alot guys the question was answered 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:35:48.163

以下是获得所需结果的查询

```
var dict = items.GroupBy(x=>x.Value).ToDictionary(y=> y.Key, y=> String.Join(" ", y.Select(z=>z.Key))); 
```

要了解上述查询，请参阅[grouping](http://msdn.microsoft.com/en-us/library/bb549393.aspx)、[ToDictionary](http://msdn.microsoft.com/en-us/library/bb549277.aspx)和[String.Join](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)。

以下是您修改后的程序

```
void Main()
    {

        SortedDictionary<string, int> dict =Words();
        display(dict);
        Console.WriteLine();
    }

    private static SortedDictionary<String, int> Words()
    {

        SortedDictionary<string, int> dic = new SortedDictionary<string, int>();

        String input = "today is Wednesday right and it sucks. today how are you are you a rabbit today";
        string[] word = Regex.Split(input, @"\s");

        foreach (string current in word)
        {
            string wordKey = current.ToLower();

            if (dic.ContainsKey(wordKey))
            {
                ++dic[wordKey];
            }
            else
            {
                dic.Add(wordKey, 1);
            }
        }
        return dic;
    }

    private static void display(SortedDictionary<string, int> dictionary)
    {

         var items = from pair in dictionary
                orderby pair.Value descending
                select pair;
        var dict = items.GroupBy(x=>x.Value).ToDictionary(y=> y.Key, y=> String.Join(" ", y.Select(z=>z.Key)));
          foreach (var item in dict)
         {
             Console.WriteLine("Words occurung "+item.Key +" times");
             Console.WriteLine("{0}", item.Value);
         }

        Console.ReadLine();
    } 
```

输出

```
Words occurung 3 times 
today 
Words occurung 2 times 
are you 
Words occurung 1 times 
a and how is it rabbit right sucks. wednesday 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T04:30:52.707

```
var max =
    (from pair in dictionary
    select pair.Value).Max()
for (int i = max; i > -1; i--)
{
    var items =
        from pair in dictionary
        where pair.Value == i
        select pair.Key;
    if (items.Count() > 0)
    {
        Console.WriteLine("\nWords occuring " + i.ToString() +" times");
        int count = 0;
        foreach(var item in items)
        {
            if (count == 4)
            {
                Console.WriteLine("");
                count = 0;
            }
            else
            {
                count++;
            }
            Console.Write(item + "\t");
        }
    }   
} 
```

用与此类似的内容替换`display`方法中的代码应该会返回所需的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T04:17:19.083

在选择中使用 .Distinct() ：

`var items = (from pair in dictionary order by pair.Value descending select pair).Distinct();`

# android - 在带有 cygwin 的 Windows 中提升 android - 加载共享库时出错

> ID：13302010
> 
> 赞同：2
> 
> 时间：2012-11-09T04:13:26.433
> 
> 标签：android, boost, android-ndk

[我从这里](https://github.com/MysticTreeGames/Boost-for-Android)下载了 android 的 boost 库，但是在编译时出现错误：

```
/bjam.exe: error while loading shared libraries: ?: cannot open shared object file: No such file or directory 
```

系统信息 - ndk 版本：ndk-r8 操作系统：Windows 7 64bit，cygwin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:39:01.723

很可能，您缺少 1a。一些依赖 1b。bjam 与您目录中已放置的 bjam 冲突。

别的..

2.  试试[http://www.codexperiments.com/android/2011/05/tips-tricks-building-boost-with-ndk-r5/](http://www.codexperiments.com/android/2011/05/tips-tricks-building-boost-with-ndk-r5/)

3.  或参考[官方“Boost library”对 Android 和 iOS 的支持？](https://stackoverflow.com/questions/14036311/official-boost-library-support-for-android-and-ios/14054565#14054565)

# python - python - 如何使用loadtxt在python中的相同数组中加载多个文件？

> ID：13302011
> 
> 赞同：4
> 
> 时间：2012-11-09T04:13:31.880
> 
> 标签：python, arrays, numpy

我有几个表文件，我加载它们：

```
x, y, rho, phi = np.loadtxt(myfile, unpack=True) 
```

现在，考虑一下我有`myfile1`并且`myfile2`格式相同的情况。如何将它们加载到相同的数组中（好像只有一个文件）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T04:19:25.827

有多种方法可以做到这一点（例如，您可以加载两个数组，然后通过`x = numpy.concatenate((x1, x2))`等连接它们），但我要做的是即时连接文件，并将结果传递给`loadtxt`.

正如[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)所说，`fname`可以是：

> 要读取的文件、文件名或生成器。如果文件扩展名为 .gz 或 .bz2，则首先解压缩文件。请注意，生成器应该返回 Python 3k 的字节字符串。

因此，您只需要一个生成器来生成 myfile1，然后生成 myfile2。

显而易见的方法是`itertools`：

```
with open(myfile1, 'rb') as f1, open(myfile2, 'rb') as f2:
  x, y, rho, phi = numpy.loadtxt(itertools.chain(f1, f2)) 
```

你可能会注意到我离开了`unpack=True`. 那是因为`unpack`只有在传递文件名而不是文件对象或生成器时才有效。（它查看扩展名，而不是文件魔术或任何花哨的东西。）

如果您知道这些文件将*始终*是 gzip 或 bzip2 文件，则可以替换`gzip.GzipFile`或`bz2.BZ2File`替换`open`上述文件。

但是，如果您需要处理*可能*压缩的文件，则必须进行相同的扩展检查`numpy`，然后创建适当的对象（编写一个`open_compressed`将其包装起来的函数），此时这将变得顽固地坚持错误的解决方案。所以，如果这是一个问题，我可能会单独加载它们，然后再做`numpy.concatenate`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T07:31:51.723

您可以使用标准文件输入模块：

```
import fileinput
import glob
import numpy as np
data = np.loadtxt(fileinput.input(glob.glob("*.dat"))) 
```

# r - R语言数据查看

> ID：13302012
> 
> 赞同：0
> 
> 时间：2012-11-09T04:13:33.017
> 
> 标签：r

我可能是个白痴，但我在文档中找不到如何显示对象。我安装的一个包返回一个名为 a 的对象。

我怎样才能弄清楚里面有什么？这个对象里面有一些我需要的矩阵和数字。

（我承认一年前（上次我不得不使用 R）我有同样的问题，我在谷歌上搜索了一个小时后找到了解决方案。这次我在 20 分钟后失去了耐心，我希望有人可怜我。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T05:20:45.430

你可以输入

```
a 
```

或者

```
str(a) 
```

或者

```
summary(a) 
```

这些都是好的开始

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T04:22:42.257

该`str()`函数擅长揭示对象的一般结构。您可能需要了解如何显示某些类型的对象。矩阵不会说“矩阵”，而是显示为 name[rows, cols]

```
> str(matrix(NA, 4,4) )
 logi [1:4, 1:4] NA NA NA NA NA NA ... 
```

有多种版本的`describe`函数是对内置`summary`函数的数据帧的改进。还有一些函数可用于确定`length`、`class`、`mode`和其他特征。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T08:04:42.457

真正的解决方案是阅读软件包文档。例如，要从 GLM 中获取拟合值，您需要执行`fitted(a)`. 要获得与您最近的邻居距离，`splancs:nndistG`请获取`a$dists`.

如果包中函数的返回值没有记录，请告诉维护者。这是一个错误。

如果你在一个对象的结构中四处挖掘，认为这`a$foo`是你想要的，没有文档，那么你可能不会得到你认为你得到的东西。例如，假设一个模型拟合函数有一个`$resid`分量。你不知道这些是什么残差。

此外，不能保证包的升级将保持相同的定义`$resid`，并且可能不会记录更改，因为作者不希望人们在对象的内部进行挖掘。

# javascript - XMLRequest ResponseText 为空

> ID：13302013
> 
> 赞同：0
> 
> 时间：2012-11-09T04:13:50.430
> 
> 标签：javascript, xmlhttprequest

我有一个 JavaScript 函数，如果它成功更新数据库或出现错误，我想向用户报告一条警报消息。

在主 X.JSP 文件中，我有：

```
function startRequest(pChange)
        {

                //alert("startRequest");
                createXmlHttpRequest();
                //alert("sending message");
                //var u1=document.f1.user.value;
                //alert("Running startRequest for: " + pChange.id);
                //xmlHttp.open("GET","updateEntry.jsp&pID=pChange.id&pStatus=pChange.status&pAddress=pChange.address&pDate=pChange.date&pNotes=pChange.note&pAssigned=pChange.assigned" ,true)
                xmlHttp.open("GET","updateEntry.jsp?pID=" + pChange.id + "&pAddress=" +pChange.address + "&pStatus=" + pChange.status +"&pNote=" + pChange.notes +"&pAssigned=" +pChange.assigned ,true)
                //alert(xmlHttp.responseText);
                xmlHttp.onreadystatechange=handleStateChange;
                xmlHttp.send(null);           
        }
function handleStateChange()
        {
            //alert("handleStateChange");
            var message = xmlHttp.responseText;
            alert("Return Code:" + message);
            if(xmlHttp.readyState==4)
            {
                if(xmlHttp.status==200)
                {
                    //alert("test2");
                    //alert("recieved Message");
                    var message = xmlHttp.responseText;
                    alert(message);
                }
            }
            else
            {
                alert("Error loading page"+ xmlHttp.status +
            ":"+xmlHttp.statusText);
            }
        } 
```

然后我在 updateEntry.jsp 中运行一个方法，它做了很多事情，但有趣的是这部分：

```
if(nId.equals("NMI")||nId.equals("MI")||nId.equals("NI")||nId.equals("SA")||nId.equals("S"))
            {
                org.hibernate.Query query2 = session2.createQuery("update Leads set Status = :nstatus where Id = :nid");
                query2.setParameter("nid", nId);
                query2.setParameter("nstatus", nstatus);
                query2.executeUpdate();
                out.println("Update successfully with: " + nstatus);
                // Actual contact insertion will happen at this step
                session2.flush();
                session2.close();
            }
            else
            {   
                out.println("Status must be: NMI, MI, NI, SA or S");        
            } 
```

我的理解是，如果函数成功完成，这应该只创建一个警报。相反，它会创建 9 个警报，所有这些警报都是空白的。我究竟做错了什么？我同时看到“返回代码：”消息和空白“”消息（两个不同的代码部分），但都输出空白消息变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:15:26.683

如果readystate不是4，不代表是错误。Ajax 有多种状态可以通知客户端正在发生的事情。您的代码说这些连接状态都是错误的。

```
 if(xmlHttp.readyState==4)
        {
            if(xmlHttp.status==200)
            {
                //alert("test2");
                //alert("recieved Message");
                var message = xmlHttp.responseText;
                alert(message);
            }  <-- your else should most likely be up here
        }
        else  <-- this is incorrect
        {
            alert("Error loading page"+ xmlHttp.status +
        ":"+xmlHttp.statusText);
        } 
```

阅读[MDN 上的文档 - Ajax 入门](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)

# html - 在 Go Web 应用程序中渲染 CSS

> ID：13302020
> 
> 赞同：26
> 
> 时间：2012-11-09T04:14:42.923
> 
> 标签：html, css, web-applications, go

[我按照本](http://golang.org/doc/articles/wiki/)教程编写了一个非常基本的 Web 应用程序。我想在外部样式表中添加 css 规则，但它不起作用 - 当呈现 HTML 模板时，出现问题并且 CSS 被完全忽略。如果我将规则放在标签中，它会起作用，但我不想处理它。

在 Go Web 应用程序中，如何呈现外部 CSS 样式表？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-09T07:32:54.137

添加一个处理程序来处理来自指定目录的静态文件。

例如。创建 {server.go 目录}/resources/ 并使用

```
http.Handle("/resources/", http.StripPrefix("/resources/", http.FileServer(http.Dir("resources")))) 
```

连同 /resources/somethingsomething.css

使用 StripPrefix 的原因是您可以随意更改服务目录，但保持 HTML 中的引用相同。

例如。从 /home/www/ 服务

```
http.Handle("/resources/", http.StripPrefix("/resources/", http.FileServer(http.Dir("/home/www/")))) 
```

请注意，这将使资源目录列表保持打开状态。如果你想防止这种情况发生，go snippet 博客上有一个很好的片段：

[http://gosnip.posterous.com/disable-directory-listing-with-httpfileserver](http://gosnip.posterous.com/disable-directory-listing-with-httpfileserver)

**编辑：** Posterous 现在已经消失了，所以我只是从 golang 邮件列表中提取了代码并将其发布在这里。

```
type justFilesFilesystem struct {
    fs http.FileSystem
}

func (fs justFilesFilesystem) Open(name string) (http.File, error) {
    f, err := fs.fs.Open(name)
    if err != nil {
        return nil, err
    }
    return neuteredReaddirFile{f}, nil
}

type neuteredReaddirFile struct {
    http.File
}

func (f neuteredReaddirFile) Readdir(count int) ([]os.FileInfo, error) {
    return nil, nil
} 
```

讨论它的原始帖子：[https ://groups.google.com/forum/#!topic/golang-nuts/bStLPdIVM6w](https://groups.google.com/forum/#!topic/golang-nuts/bStLPdIVM6w)

并像这样使用它来代替上面的行：

```
 fs := justFilesFilesystem{http.Dir("resources/")}
 http.Handle("/resources/", http.StripPrefix("/resources/", http.FileServer(fs))) 
```

# iphone - 无法在 iPhone 相机拍摄的图像中检测到人脸

> ID：13302024
> 
> 赞同：0
> 
> 时间：2012-11-09T04:14:57.727
> 
> 标签：iphone, ios, image

我有个问题。我使用2图像。一种是从网上下载。另一个是由 iPhone 的相机拍摄的。我使用**CIDetector**在 2 张图像中检测人脸。它在从互联网下载的图像中完美运行。但另一方面，它无法检测或检测错误。

我检查了许多图像。结果是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:55:09.050

我尝试使用上面的代码。它可以检测由 Iphone 捕获的图像。但它无法检测到从 Internet 下载的图像。这是我的代码

```
NSDictionary *options = [NSDictionary dictionaryWithObject: CIDetectorAccuracyLow            forKey: CIDetectorAccuracy];
CIDetector  *detector = [CIDetector detectorOfType: CIDetectorTypeFace context:    nil options: options];

CIImage *ciImage = [CIImage imageWithCGImage: [facePicture CGImage]];
NSDictionary* imageOptions = [NSDictionary dictionaryWithObject:[NSNumber        numberWithInt:6] forKey:CIDetectorImageOrientation];
NSArray *features = [detector featuresInImage:ciImage options:imageOptions]; 
```

当它检测到人脸时。我用代码显示

```
for (CIFaceFeature *feature in features) { 
```

// // 设置红色特征颜色

```
 CGRect faceRect = [feature bounds];

    CGContextSetRGBFillColor(context, 0.0f, 0.0f, 0.0f, 0.5f);
    CGContextSetStrokeColorWithColor(context, [UIColor whiteColor].CGColor);
    CGContextSetLineWidth(context, 2.0f * scale);
    CGContextAddRect(context, feature.bounds);
    CGContextDrawPath(context, kCGPathFillStroke);
    CGContextDrawImage(context, faceRect, [imgDraw CGImage]); 
```

这不是正确的位置。它向右移动一段距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T04:24:11.067

尝试这个

```
 NSDictionary *options = [NSDictionary dictionaryWithObject: CIDetectorAccuracyLow            forKey: CIDetectorAccuracy];
        CIDetector  *detector = [CIDetector detectorOfType: CIDetectorTypeFace context:    nil options: options];

      CIImage *ciImage = [CIImage imageWithCGImage: [image CGImage]];
    NSNumber *orientation = [NSNumber numberWithInt:[image imageOrientation]+1];
    NSDictionary *fOptions = [NSDictionary dictionaryWithObject:orientation forKey: CIDetectorImageOrientation];
        NSArray *features = [detector featuresInImage:ciImage options:fOptions];
        for (CIFaceFeature *f in features) {

            NSLog(@"left eye found: %@", (f. hasLeftEyePosition ? @"YES" : @"NO"));

            NSLog(@"right eye found: %@", (f. hasRightEyePosition ? @"YES" : @"NO"));

            NSLog(@"mouth found: %@", (f. hasMouthPosition ? @"YES" : @"NO"));

            if(f.hasLeftEyePosition)

                NSLog(@"left eye position x = %f , y = %f", f.leftEyePosition.x, f.leftEyePosition.y);

            if(f.hasRightEyePosition)

                NSLog(@"right eye position x = %f , y = %f", f.rightEyePosition.x, f.rightEyePosition.y);

            if(f.hasMouthPosition)

                NSLog(@"mouth position x = %f , y = %f", f.mouthPosition.x, f.mouthPosition.y);

        } 
```

如果您始终在纵向使用前置摄像头，请添加此

```
 NSDictionary* imageOptions = [NSDictionary dictionaryWithObject:[NSNumber        numberWithInt:6] forKey:CIDetectorImageOrientation];
      NSArray* features = [detector featuresInImage:image options:imageOptions]; 
```

欲了解更多信息

示例：[https ://github.com/beetlebugorg/PictureMe](https://github.com/beetlebugorg/PictureMe)

[iOS 人脸检测问题](https://stackoverflow.com/questions/9121427/ios-face-detection-issue)

[使用 CIDetector 的人脸检测问题](https://stackoverflow.com/questions/11154585/face-detection-issue-using-cidetector)

[https://stackoverflow.com/questions/4332868/detect-face-in-iphone?rq=1](https://stackoverflow.com/questions/4332868/detect-face-in-iphone?rq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-17T14:50:09.260

我有同样的问题。您可以在检测之前更改图像的大小。

```
CGSize size = CGSizeMake(cameraCaptureImage.size.width, cameraCaptureImage.size.height);
UIGraphicsBeginImageContext(size);
[cameraCaptureImage drawInRect:CGRectMake(0, 0, size.width, size.height)];
cameraCaptureImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# django - Django：将 item.id 列为字段属性？

> ID：13302029
> 
> 赞同：1
> 
> 时间：2012-11-09T04:15:46.663
> 
> 标签：django, modelform, templatetag

在我的模板中，我有：

```
{% for link in solution_list %}
 <form id="marked_solved_form{{link.id}}" action="" method="post">                                                                     
 {{mark_solved_form.is_solution}}                                                                                                      
 {% csrf_token %}                                                                                                                      
 <label for="id_is_solution{{link.id}}">test form</label>                                    
 <input type="hidden" name="next" value="{{ request.path }}"/>                                                                         
 </form>                                 
 {% endfor %} 
```

is_solution 只是用户可以设置的复选框的布尔字段。

我面临的问题是，除了 {{mark_solved_form.is_solution}} 之外，所有表单都使用 id 正确填充，例如 id="marked_solved_form3"。我想我可以去模型表单并编辑属性：

```
class PostMarkedSolved(ModelForm):                                                                                                          
 class Meta:                                                                                                                             
     model = MarkedSolved                                                                                                                

 def __init__(self, *args, **kwargs):                                                                                                    
     super(PostMarkedSolved, self).__init__(*args, **kwargs)                                                                             
     #self.fields['is_solution'].queryset = Factory.objects.all()                                                                        
     self.fields['is_solution'].widget.attrs={'onchange':'this.form.submit();', 'class':'testing{{link.id}}', 'id':'testing{{link.id}}'} 
```

到目前为止，一切都很好。除了表单加载时，我为每个列表表单中的每个复选框得到以下信息：

```
<input name="is_solution" type="checkbox" class="testing{{link.id}}" onchange="this.form.submit();" id="testing{{link.id}}"> 
```

就好像 django 忽略了 modelform 正在一起转义模板标签 {{link.id}} 。理想情况下，它会为每个表单实例返回如下内容：

```
 <td>
  <form id="marked_solved_form3" action="" method="post">
  <input name="is_solution" type="checkbox" class="testing3" onclick="this.form.submit();" id="testing3" />
  <div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='bwuXYhSpQA8yEOEPSaCt3wAANC0kR7CE' /></div>
  <label for="id_is_solution3" onclick="this.form.submit();">test form</label>
  <input type="hidden" name="next" value="/task/1"/>
  </form>
  </td>

  <td>
  <form id="marked_solved_form4" action="" method="post">
  <input name="is_solution" type="checkbox" class="testing4" onclick="this.form.submit();" id="testing4" />
  <div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='bwuXYhSpQA8yEOEPSaCt3wAANC0kR7CE' /></div>
  <label for="id_is_solution4" onclick="this.form.submit();">test form</label>
  <input type="hidden" name="next" value="/task/1"/>
  </form>
  </td> 
```

我什至安装了 django-widget-tweaks （这太棒了，顺便说一句！），并尝试这样做：

```
{{mark_solved_form.is_solution|attr:"id:id_is_solution{{link.id}}"}} 
```

然而，这令人窒息，因为它无法在另一个模板标签中处理 {{link.id}}。:( 任何建议将不胜感激。在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:06:46.120

模板无法呈现放置在`__init__`方法中的那些变量。您应该能够通过执行以下操作访问模型实例`self.instance`并在方法中添加正确的 id `__init__`：

```
def __init__(self, *args, **kwargs):                                                                                                    
    super(PostMarkedSolved, self).__init__(*args, **kwargs)                                                                             
    self.fields['is_solution'].widget.attrs={
        'onchange':'this.form.submit();',
        'class':'testing{0}', 'id':'testing{1}'.format(self.instance.id, self.instance.id)
    } 
```

[隐藏在 Django 的文档中：](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-clean-method)

> 此外，绑定到模型对象的模型表单实例将包含一个 self.instance 属性，该属性使模型表单方法可以访问该特定模型实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:04:31.567

这是错误的做法。您应该使用带有前缀的单独表单，甚至更好地使用表单集。

# javascript - 搜索引擎可以索引 JavaScript 驱动的 Web 应用程序中的单个页面吗？

> ID：13302030
> 
> 赞同：1
> 
> 时间：2012-11-09T04:16:16.303
> 
> 标签：javascript, ajax, rest, web-applications, seo

我正在构建的 Web 应用程序有一个 JavaScript 驱动的界面，并使用 AJAX 从服务器获取数据。每个人都在同一个“页面”上，但 URL 中主题标签之后的数据用于确定要加载哪些数据，然后将其显示在页面上。我的网络应用程序中的 URL 示例可能是[http://www.myapp.com/#/user/stackmaster](http://www.myapp.com/#/user/stackmaster)。JavaScript 看到标签后面的数据（在本例中为“user”和“stackmaster”）并使用 AJAX 加载用户名为 stackmaster 的用户，然后将其显示在屏幕上。我这样构造我的 URL 的原因是我希望搜索引擎能够索引单个页面。

是否有可能让像这样的基于 AJAX 的 Web 应用程序能够查找和索引单个页面？据我了解，Google 等网络爬虫无法索引加载 AJAX 的动态内容，对吗？是否有任何替代技术可以帮助搜索引擎找到这些数据？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T04:24:25.217

> 如果您运行的 AJAX 应用程序包含您希望出现在搜索结果中的内容，Google 有一个新流程，在实施后，它可以帮助 Google（以及可能的其他搜索引擎）抓取您的内容并将其编入索引。从历史上看，AJAX 应用程序一直难以被搜索引擎处理，因为 AJAX 内容是由浏览器动态生成的，因此对爬虫来说是不可见的。虽然存在处理此问题的现有方法，但它们涉及定期手动维护以使内容保持最新。

[入门](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)

[https://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/)

爬虫和服务器之间的协议

为了使您的 AJAX 应用程序可抓取，您的站点需要遵守新协议。本协议基于以下内容：

> 本站采用AJAX爬取方案。对于每个具有动态生成内容的 URL，您的服务器会提供一个 HTML 快照，它是用户（使用浏览器）看到的内容。通常，此类 URL 将是 AJAX URL，即包含散列片段的 URL，例如 www.example.com/index.html#key=value，其中#key=value 是散列片段。HTML 快照是 JavaScript 执行后出现在页面上的所有内容。搜索引擎索引 HTML 快照并在搜索结果中提供您的原始 AJAX URL。

[https://developers.google.com/webmasters/ajax-crawling/docs/learn-more](https://developers.google.com/webmasters/ajax-crawling/docs/learn-more)

[http://googlewebmastercentral.blogspot.in/2007/11/spiders-view-of-web-20.html](http://googlewebmastercentral.blogspot.in/2007/11/spiders-view-of-web-20.html)

# android - 如何在 Android 中为 MediaPlayer 设置计时器？

> ID：13302032
> 
> 赞同：0
> 
> 时间：2012-11-09T04:16:29.970
> 
> 标签：android

我正在开发一个电话查找器应用程序，我想实现远程响铃功能......我已经为MediaPlayer编写了代码，但是当我测试它时，闹钟响个不停（可能是闹钟歌曲的时间）太长了，但我想让它只响一个特定的时间）......我希望为闹钟响铃设置一个计时器，比如让响铃 10 秒，但不知道如何实现它......需要帮助你们……谢谢……

```
 MediaPlayer mp = new MediaPlayer();
    mp = MediaPlayer.create(RingerActivity.this, R.raw.alarm);
    try {
        mp.prepare();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (Exception e) {
        Toast.makeText(this, e.getMessage() , Toast.LENGTH_SHORT).show();         }
    mp.start();

    mp.setOnCompletionListener(new OnCompletionListener() {
        public void onCompletion(MediaPlayer mp) {
            mp.release();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:24:28.273

您可以使用 Runnable 和 Handler 在 10 秒后停止 MediaPlayer。

```
Handler h = new Handler();
Runnable stopPlaybackRun = new Runnable() {
    public void run(){
        mp.stop();
        mp.release();
    }    
};
h.postDelayed(stopPlaybackRun, 10 * 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-31T11:20:50.540

**安卓**

> 计时器中的媒体播放器

```
MediaPlayer buzzer; //Outside the method
public void BuzzerSound(){
buzzer=MediaPlayer.create(MainActivity.this, R.raw.buzzer_sound);
Thread timer= new Thread(){
    public void run(){
     try{
         buzzer.start();
         buzzer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
            public void onCompletion(MediaPlayer mp) {
                mp.release();
                }
            });
        }catch(Exception e){
         e.printStackTrace();
            }
     }
    };
    timer.start(); } 
```

# c# - 从链接到数据库的下拉列表中获取选定的对象 - MVC3

> ID：13302045
> 
> 赞同：1
> 
> 时间：2012-11-09T04:17:21.213
> 
> 标签：c#, asp.net-mvc-3, jquery

我是 MVC3 框架的新手。所以我正在练习并尝试学习如何使用 jquery 来创建级联下拉列表。我发现了 Rick Anderson 的这个样本：http: [//blogs.msdn.com/b/rickandy/archive/2012/01/09/cascasding-dropdownlist-in-asp-net-mvc.aspx](http://blogs.msdn.com/b/rickandy/archive/2012/01/09/cascasding-dropdownlist-in-asp-net-mvc.aspx)

因此，我尝试使用此示例自定义我自己的网站，以获得级联下拉列表。这是我的控制器：

```
private SelectList GetMakeSelectList()
    {
        var makeQry = from m in db.Car
                      orderby m.Make
                      select m.Make;
        return new SelectList(makeQry.ToArray(), "Make");
    }

    public ActionResult MakeList()
    {
        if (HttpContext.Request.IsAjaxRequest())
            return Json(GetMakeSelectList(), JsonRequestBehavior.AllowGet);

        return RedirectToAction("Categories");
    }

    public ActionResult ModelList(string Make)
    {
        string make = Make;
        var model = from s in db.Car
                     where s.Make == make
                     select s.Model;

        if (HttpContext.Request.IsAjaxRequest())
            return Json(new SelectList(
                            model.ToArray())
                       , JsonRequestBehavior.AllowGet);

        return RedirectToAction("Categories");
    }

    public ActionResult Categories()
    {
        return View();
    } 
```

这是我的模型：

```
public class Car
{
    public int ID { get; set; }

    public String Make { get; set; }

    public String Model { get; set; }

    public decimal Price { get; set; }

    public String Edition { get; set; }

    public String Type { get; set; }

    public decimal Consumption { get; set; }

    public decimal Acceleration { get; set; }

    public decimal Horsepower { get; set; }

    public bool? Convertible { get; set; }
}
public class MovieDBContext : DbContext
{
    public DbSet<Car> Car { get; set; }
} 
```

问题是：ModelList 方法中的 String Make 为空。所以我试图不在模型类中手动设置我的值，而只是在数据库中设置它们。

我的猜测是：SelectList(makeQry.ToArray(), "Make")，我使用的选定值的类型不是它所期望的。但我不知道如何传递查询的预期类型。

我正在为此使用 Jquery。我真的很感激任何帮助。

更新：这是视图：

```
@model IEnumerable<Cars.Models.Car>

<script src="@Url.Content("~/Scripts/GetMake.js")"></script>
<script src="@Url.Content("~/Scripts/makeModel.js")"></script>
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/CategoriesStyle.css")" />

@using (Html.BeginForm("Categories", "Category", FormMethod.Post, 
new { id = "CategoryFormID", 
    data_modelListAction = @Url.Action("ModelList"),
    data_makeListAction = @Url.Action("MakeList")})) {

<div id="content">
    <fieldset>
        <legend>Advanced Search</legend> 

        <div class="myform">

            <p>Search the car you're looking for in all details you can imagine right here!</p>

            <div id="MakeDivID">
                <label>Make</label>
                <select id="MakeID" name="Make"></select>
            </div>

            <div id="ModelDivID">
                <label>Model</label>
                <select id="ModelID" name="Model"></select>
            </div>

            <button type="submit" id="SubmitID">Search</button>
        </div>
    </fieldset>
</div> 
```

}

这将是我的 Jquery，我在其中填充保管箱并调用方法：

这是 GetMake.js

```
$(function () {
var URL = $('#CategoryFormID').data('makeListAction');
$.getJSON(URL, function (data) {
    var items = "<option>Select a Car Make</option>";
    $.each(data, function (i, make) {
        if (make.Text.indexOf("\'") > -1) {
            s = make.Text;
            alert(s + ": Country.Value cannot contain \'")
        }
        items += "<option>" + make.Text + "</option>";
    });
    $('#MakeID').html(items);
});
}); 
```

这是makeModel.js：

```
$(function () {
$('#ModelDivID').hide();
$('#SubmitID').hide();
$('#MakeID').change(function () {
    var URL = $('#CategoryFormID').data('modelListAction');
    $.getJSON(URL + '/' + $('#MakeID').val(), function (data) {
        var items = '<option>Select a Model</option>';
        $.each(data, function (i, model) {
            items += "<option>" + model.Text + "</option>";
            // state.Value cannot contain ' character. We are OK because state.Value = cnt++;
        });
        $('#ModelID').html(items);
        $('#ModelDivID').show();
    });
});
$('#ModelID').change(function () {
    $('#SubmitID').show();
});
}); 
```

第二次更新：我忘了提到我得到的结果不是我想要的。结果是第一个保管箱出现，其中包含所有正确的值，当我单击其中一个时，第二个保管箱出现但它是空的，因为我没有传递 Make 对象在 ModelList() 中为空。

第三次更新：这是你问的我的路线。我希望这就是你要找的。

```
using System;
using System.Collections.Generic;
using System.Data.Entity;
using System.Data.Entity.Infrastructure;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;

namespace Cars
{
// Note: For instructions on enabling IIS6 or IIS7 classic mode, 
// visit http://go.microsoft.com/?LinkId=9394801

public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        // Use LocalDB for Entity Framework by default
        Database.DefaultConnectionFactory = new SqlConnectionFactory(@"Data Source=(localdb)\v11.0; Integrated Security=True; MultipleActiveResultSets=True");

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:53:03.640

看过您的路线后，我认为这是您的问题：

```
public ActionResult ModelList(string Make) 
```

您的路线说必须调用参数`id`，以便可以对其进行映射（这是默认路由..这就是我想仔细检查的原因）。

```
routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // <---- This part here says {id}
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    ); 
```

要解决您的问题，您可能只需将 ModelList 函数更改为：

```
public ActionResult ModelList(string id) {
    string make = id; // assign the string id to the make variable 
```

# linux - ARM 的内核糟糕页面错误错误代码

> ID：13302046
> 
> 赞同：4
> 
> 时间：2012-11-09T04:17:23.403
> 
> 标签：linux, linux-kernel, arm, fault

Oops 之后的错误代码提供了有关 arm ex 中的恐慌的信息。 `Oops: 17 [#1] PREEMPT SMP` 在这种情况下，17 提供了什么信息。在 x86 中，它代表 -

*   `bit 0 == 0: no page found 1: protection fault`

*   `bit 1 == 0: read access 1: write access`

*   `bit 2 == 0: kernel-mode access 1: user-mode access`

*   `bit 3 == 1: use of reserved bit detected`

*   `bit 4 == 1: fault was an instruction fetch`

但我无法在 arm 中找到任何信息。

谢谢顺蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:09:02.607

您在上面打印的位描述是页面错误描述，而不是 Oops 错误。

有关查找 Linux 崩溃分析的更多信息，请参阅 Linux 的[oops-tracing](https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/tree/Documentation/oops-tracing.txt?h=v4.9)。

以下是您的`Oops: 17 [#1] PREEMPT SMP` [arch/arm/kernel/traps.c 的方式](https://github.com/torvalds/linux/blob/master/arch/arm/kernel/traps.c#L242)：

```
 #define S_PREEMPT " PREEMPT"
    ...
    #define S_SMP " SMP"
    ...
    printk(KERN_EMERG "Internal error: %s: %x [#%d]" S_PREEMPT S_SMP S_ISA "\n", str, err, ++die_counter); 
```

页面错误不需要使内核崩溃，并且并非所有内核崩溃都是页面错误。所以很有可能`Oops: 17`根本与页面错误无关。（作为奖励，我的疯狂猜测是它是关于调度/只是听起来我很熟悉。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-24T05:28:22.227

看起来您在询问**ARM 故障状态寄存器 (FSR)**位。我查看了内核代码（arch/arm/mm/fault.c），发现这实际上是作为参数传递给 Oops 代码的：

```
 static void
    __do_kernel_fault(struct mm_struct *mm, unsigned long addr, unsigned int fsr,
              struct pt_regs *regs)
    {
    [...]
        pr_alert("Unable to handle kernel %s at virtual address %08lx\n",
             (addr < PAGE_SIZE) ? "NULL pointer dereference" :
             "paging request", addr);

        show_pte(mm, addr);
        die("Oops", regs, **fsr**);
   [...]
   } 
```

所以，无论如何，我追踪到了 ARM（v4 及更高版本？）MMU 上的 FSR 寄存器：

来源： http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0438d/ [BABFFDFD.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0438d/BABFFDFD.html)

```
...
    [3:0]   FS[3:0] 
    Fault Status bits. This field indicates the type of exception generated. Any encoding not listed is reserved:
    b00001
       Alignment fault.
    b00100
       Instruction cache maintenance fault[a].
    b01100
       Synchronous external abort on translation table walk, 1st level.
    b01110
       Synchronous external abort on translation table walk, 2nd level.
    b11100
       Synchronous parity error on translation table walk, 1st level.
    b11110
       Synchronous parity error on translation table walk, 2nd level.
    b00101
       Translation fault, 1st level.
    b00111
       Translation fault, 2nd level.
    b00011
       Access flag fault, 1st level.
    b00110
       Access flag fault, 2nd level.
    b01001
       Domain fault, 1st level.
    b01011
       Domain fault, 2nd level.
    b01101
       Permission fault, 1st level.
    b01111
       Permission fault, 2nd level.
    b00010
       Debug event.
    b01000
       Synchronous external abort, non-translation.
    b11001
       Synchronous parity error on memory access.
    b10110
       Asynchronous external abort.
    b11000
       Asynchronous parity error on memory access. 
```

...

免责声明：我不知道此信息是否仍然相关；该文档声明它适用于 ARM Cortex A15，并且该页面被标记为已取代。

也可以看到这个页面： [ARM926EJ-S 故障地址和故障状态寄存器](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0198e/Babgbhee.html)

# automatic-ref-counting - 使用 ARC 保留 CTFrameRef 属性

> ID：13302047
> 
> 赞同：0
> 
> 时间：2012-11-09T04:17:57.767
> 
> 标签：automatic-ref-counting, core-text

使用 ARC，我怎样才能确保一个`CTFrameRef`属性没有被释放？我目前正在使用一个`assign`属性，这显然不是我想要的

* * *

**编辑：**我的解决方案基于@KevinBallard 答案：

```
- (void)setCoreTextFrame:(CTFrameRef)coreTextFrame
{
    _coreTextFrame = CFRetain(coreTextFrame);
}

- (void)dealloc
{
    CFRelease(_coreTextFrame);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:23:12.217

`CTFrameRef`不是 obj-c 对象。它遵循 CoreFoundation 内存管理规则，因此您可以`CFRetain()`使用`CFRelease()`.

所以基本上，您处理的代码`CTFrameRef`看起来与非 ARC 代码相同。

# mysql - 如何检查列 MySQL 中的多个值

> ID：13302050
> 
> 赞同：0
> 
> 时间：2012-11-09T04:18:27.033
> 
> 标签：mysql, database

我有一列包含值，即

```
number   id
1        111
1        111
3        222
4        222
5        333 
```

我正在检查 ID 是否有多个实例，以及数量是否与第二个或更多实例相同。所以在这里，它会返回 1，因为有 2x 1 的 id 为 111，但 222 不会返回，因为 3 和 4 不一样。

我该怎么做这样的查询？

有人告诉我，我可以做两个或更多查询，而在第二个或更多查询时，我会忽略第一个实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:23:07.127

```
select id, number
from the_table
group by id, number
having count(*)>1 
```

您应该在两`id, and number`列上都定义了索引

ps：顺序可以是数字，id ...取决于你的复合索引键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T04:20:07.967

您应该尝试使用`group by`子句并查看输出是否符合您的预期：

`select number,id from table_name group by number;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T04:22:11.717

[按文档分组](http://www.tutorialspoint.com/mysql/mysql-group-by-clause.htm)

```
Select number,id from table_name group by number; 
```

# python - 在 Flask 中检索 SQLite 条目

> ID：13302053
> 
> 赞同：1
> 
> 时间：2012-11-09T04:19:04.517
> 
> 标签：python, sqlite, http, flask

我第一次将 SQLite 与 Flask 一起使用，并尝试检索我刚刚插入数据库的数据。我将 JSON 数据插入数据库的 POST 请求工作正常（或至少不返回错误）。

我正在尝试显示我插入的任何内容以进行验证并按如下方式进行操作：

```
cur = db.execute('select * from places order by id')
entries = [dict(lat=row[0], long=row[1], address=row[2], name=row[3]) for row in cur.fetchall()]
return entries 
```

我收到错误 500。为什么会这样？我只能找到两个做的例子，他们都在做我上面所说的。

**编辑：**

这是烧瓶的错误：

```
Traceback (most recent call last):
  File "/Users/nayef/.virtualenvs/uber-api/lib/python2.7/site-packages/flask/app.py", line 1701, in __call__
    return self.wsgi_app(environ, start_response)
  File "/Users/nayef/.virtualenvs/uber-api/lib/python2.7/site-packages/flask/app.py", line 1689, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/Users/nayef/.virtualenvs/uber-api/lib/python2.7/site-packages/flask/app.py", line 1687, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/nayef/.virtualenvs/uber-api/lib/python2.7/site-packages/flask/app.py", line 1361, in full_dispatch_request
    response = self.make_response(rv)
  File "/Users/nayef/.virtualenvs/uber-api/lib/python2.7/site-packages/flask/app.py", line 1450, in make_response
    rv = self.response_class.force_type(rv, request.environ)
  File "/Users/nayef/.virtualenvs/uber-api/lib/python2.7/site-packages/werkzeug/wrappers.py", line 711, in force_type
    response = BaseResponse(*_run_wsgi_app(response, environ))
  File "/Users/nayef/.virtualenvs/uber-api/lib/python2.7/site-packages/werkzeug/wrappers.py", line 55, in _run_wsgi_app
    return _run_wsgi_app(*args)
  File "/Users/nayef/.virtualenvs/uber-api/lib/python2.7/site-packages/werkzeug/test.py", line 818, in run_wsgi_app
    app_iter = app(environ, start_response)
TypeError: 'list' object is not callable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:49:14.933

尝试返回`return repr(entries)`。您的视图应该返回字符串而不是列表对象。无论出于何种原因，如果你返回一个列表，flask 会尝试调用它，你会得到一个`TypeError: 'list' object is not callable`错误。

# php - 如何将我的 PHP 注册系统与 Joomla 注册相结合？

> ID：13302055
> 
> 赞同：3
> 
> 时间：2012-11-09T04:19:07.720
> 
> 标签：php, session, login, joomla, registration

我有一个自定义的 PHP 系统。

我正在尝试使用 RSVP 和其他功能制作日历，但我注意到 Joomla 具有高级插件。我的问题是如何将自定义注册表单中的数据发送到 Joomla DB。

还有我的用户在使用我的自定义登录表单时如何访问受 Joomla 保护的页面（会话）？

有可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T19:06:44.720

这适用于 joomla 1.6-2.5（和 prob 3.0，但未经测试）。不要认为这适用于 Joomla 1.5

因此，在您的模型文件中创建一个具有以下内容的函数：这​​使用最少数量的字段（名称，电子邮件，用户名，密码）......并且我使用电子邮件作为用户名

```
<?php
//create or link joomla user
JModel::addIncludePath(JPATH_BASE.'/components/com_users/models');
$params = JComponentHelper::getParams('com_users');

$forMYSQL = array();
$forMYSQL['id']     = '';
$forMYSQL['name']       = JRequest::getVar('fname').JRequest::getVar('name');
$forMYSQL['username']   = JRequest::getVar('email');
$forMYSQL['email']      = JRequest::getVar('email');
$forMYSQL['groups'][0]  = 2;    //Registered user group, 
//$forMYSQL['groups'][1]    = 8;    //Super Admin user group
$forMYSQL['password']   = JUserHelper::genRandomPassword(); //Random password.
$forMYSQL['password2']  = $forMYSQL['password'];

//If a email is found....
$query = sprintf("SELECT * FROM `#__users` WHERE `email`='%s'", $forMYSQL['email']);
$this->_db->setQuery($query);
$checkuser = $this->_db->loadObject();
if ($checkuser->id > 0) {
    //E-mail in use already NOT CREATING....
} else {
    //EMAIL NOT USED... CREATING Joomla user
    $userModel =& $this->getInstance('User', 'UsersModel');
    $userModel->save($forMYSQL);

    $newuid = $userModel->getState('user.id');
    if ($newuid > 0) {
        //User created.

    } else {
        //ERROR USER NOT CREATED.
    }
}
?> 
```

因此，如果您在 joomla 内部 .. 理想情况下在组件的模型文件内部 ... 否则您可以加载 joomla 框架，然后通过加载下一个代码片段来运行该代码：

```
// START: Initialize Joomla framework
define( '_JEXEC', 1 );
define( 'DS', DIRECTORY_SEPARATOR );
define('JPATH_BASE', dirname(__FILE__));    //This needs to point to the root of your joomla
// Including Required Files
require_once ( JPATH_BASE.DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE.DS.'includes'.DS.'framework.php' );
// Create the Application
$mainframe =& JFactory::getApplication('administrator');
$mainframe->initialise();
$user =& JFactory::getUser();
define( '_JEXEC', 1 );
//Including Required Joomla libarys
jimport('joomla.application.component.model');
jimport('joomla.application.component.modelitem');
jimport('joomla.application.component.modellist');
// END: Initialize Joomla framework 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:36:07.147

这一切都是可能的。

听起来您想采用现有的登录表单并将其转换为自定义的 Joomla 登录模块。这是 Joomla 关于如何创建自定义模块的文档的链接。

[http://docs.joomla.org/How_do_you_create_a_custom_module%3F](http://docs.joomla.org/How_do_you_create_a_custom_module%3F)

这是另一个关于修改 Joomla 登录模块的内容。

[http://docs.joomla.org/Customising_the_Login_Form_module](http://docs.joomla.org/Customising_the_Login_Form_module)

我没有快速的方法来教你如何做到这一点，但我会从学习 Joomla 模块结构开始并拆分（备份）现有的 Joomla mod_login（登录模块），这样你就可以了解它是如何工作的。

然后它只是将您的自定义 PHP 登录页面混入其中的任务。

没有切割和干燥，但绝对有可能。

一个快速的谷歌搜索产生了许多结果，人们试图修改自定义 Joomla 登录过程。我建议您加入 Joomla 板并开始尽可能多地阅读它。

# java - MimeMessage.getContent - 未知编码：8bitPrecedence

> ID：13302058
> 
> 赞同：0
> 
> 时间：2012-11-09T04:19:34.440
> 
> 标签：java, jakarta-mail, pop3

当我从 POP3 收到电子邮件时，出现以下错误

```
Fatal exception java.io.IOException: Unknown encoding: 8bitPrecedence
at javax.mail.internet.MimePartDataSource.getInputStream(MimePartDataSource.java:109)
at com.sun.mail.handlers.text_plain.getContent(text_plain.java:107)
at javax.activation.DataSourceDataContentHandler.getContent(DataHandler.java:790)
at javax.activation.DataHandler.getContent(DataHandler.java:537)
at javax.mail.internet.MimeMessage.getContent(MimeMessage.java:1419) 
```

源代码

```
Session session = property.getSession();
HashMap<String, String> isNotified = Util.getIsNotified(connection, userId);
store = session.getStore("pop3");
store.connect();
inbox = store.getFolder("INBOX");
inbox.open(Folder.READ_ONLY);
int count       = inbox.getMessageCount();
for(int i = 0; i < count; i++)
{
    Message message     = inbox.getMessage(i);
    Object content = message.getContent();
} 
```

收到的其他消息没有任何错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:48:48.570

看起来消息已损坏。“8bit”和“Precedence”之间应该有一个换行符。如果您只想忽略这些错误，可以将系统属性“mail.mime.ignoreunknownencoding”设置为“true”。

# ios - 带有部分名称的 NSFetchedResultsController

> ID：13302063
> 
> 赞同：1
> 
> 时间：2012-11-09T04:20:17.353
> 
> 标签：ios, core-data, nsfetchedresultscontroller, nsfetchrequest

设想：

我有一个费用跟踪 iOS 应用程序，我将费用从费用详细视图控制器存储到表视图（带有获取的结果控制器）中，该表视图显示费用列表以及类别、金额和日期。我的实体“Money”中确实有一个日期属性，它是支出或收入的父实体。

我的问题：

我想要的是基本上对给定一周、一个月或一年的费用/收入进行分类，并将其显示为部分标题标题，例如：（2012 年 10 月 1 日至 10 月 7 日），它显示费用/收入金额和相关根据那一周的东西。该视图中提供了两个按钮，如果我按下右侧按钮，它将一周增加一周（2012 年 10 月 1 日至 10 月 7 日现在显示 2012 年 10 月 8 日至 10 月 15 日），同样，左侧按钮将减少一周一个星期。我在视图中也有两个段控件。我想要做的是按下显示“每周”的段控制，如果我按下另一个显示“类别”的段 - 我将如何根据类别过滤掉我每周的费用/收入？

我想在我的表格视图中显示两个部分（一个显示费用日期，另一个显示格式的收入日期（2012 年 10 月 1 日 - 2012 年 10 月 7 日））。我将如何实现这一目标？我写了一些伪代码，如果有人能告诉我如何完成上述操作，那就太好了。

编辑 - 获取控制器

```
- (void)userDidSelectStartDate:(NSDate *)startDate andEndDate:(NSDate *)endDate
{    
    AppDelegate * applicationDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
    NSManagedObjectContext * context = [applicationDelegate managedObjectContext];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Money" inManagedObjectContext:context];
    [fetchRequest setEntity:entity];

    [NSFetchedResultsController deleteCacheWithName:nil];

    //Here you create the predicate that filters the results to only show the ones with the selected date
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(date >= %@) AND (date <= %@)", startDate, endDate];
    [fetchRequest setPredicate:predicate];

    // Set the batch size to a suitable number.
     [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.

    NSSortDescriptor * sortDescriptor1 = [[NSSortDescriptor alloc] initWithKey:@"type" ascending:YES];

    NSSortDescriptor *sortDescriptor2 = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES];

    NSSortDescriptor *sortDescriptor3 = [[NSSortDescriptor alloc] initWithKey:@"cat" ascending:YES];

    NSArray * descriptors = [NSArray arrayWithObjects:sortDescriptor1, sortDescriptor2, sortDescriptor3, nil];

    [fetchRequest setSortDescriptors:descriptors];
    [fetchRequest setIncludesSubentities:YES];
    [fetchRequest setResultType:NSManagedObjectResultType];

    if(_fetchedResultsController)
    {
          [_fetchedResultsController release]; _fetchedResultsController = nil;

    }
    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    _fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:context sectionNameKeyPath:@"type" cacheName:nil];

    _fetchedResultsController.delegate = self;

    NSError *anyError = nil;

    if(![_fetchedResultsController performFetch:&anyError])
    {
        NSLog(@"error fetching:%@", anyError);
    }

    [sortDescriptor1 release];
    [sortDescriptor2 release];
    [sortDescriptor3 release];

    [fetchRequest release];

     //Finally you tell the tableView to reload it's data, it will then ask your NEW FRC for the new data
    [self.dashBoardTblView reloadData];

} 
```

编辑 - 获取控制器委托方法

```
- (void)controllerWillChangeContent:(NSFetchedResultsController*)controller
{
     [self.dashBoardTblView beginUpdates];

}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
       atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {

   switch(type) {
    case NSFetchedResultsChangeInsert:
        [self.dashBoardTblView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                      withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeDelete:
        [self.dashBoardTblView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                      withRowAnimation:UITableViewRowAnimationFade];
        break;
   }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath{

    switch(type) {
    case NSFetchedResultsChangeInsert:

        [self.dashBoardTblView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeDelete:

        [self.dashBoardTblView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeMove:

        [self.dashBoardTblView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                         withRowAnimation:UITableViewRowAnimationFade];
        [self.dashBoardTblView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                         withRowAnimation:UITableViewRowAnimationFade];

        break;

    case NSFetchedResultsChangeUpdate:
    {
        [self.dashBoardTblView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;
    }
  }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.dashBoardTblView endUpdates];
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T19:08:30.243

要将“费用”/“收入”对象分组到不同的部分，您需要向实体添加一个`type`属性`Money`，例如用于费用和收入的`Integer`属性。`0``1`

要按类型（费用/收入）对表视图部分进行排序，请`type`用作*第一个*排序描述符：

```
NSSortDescriptor *s1 = [[NSSortDescriptor alloc] initWithKey:@"type" ascending:YES]; 
```

要按日期对每个部分中的条目进行排序，请`date`用作*第二个*排序描述符：

```
NSSortDescriptor *s2 = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES];

NSArray *descriptors = [NSArray arrayWithObjects:s1, s2, nil];
[fetchRequest setSortDescriptors:descriptors]; 
```

最后，要将表格视图按类别分组，请使用`type`as `sectionNameKeyPath`：

```
NSFetchedResultsController *aFetchedResultsController =
   [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                       managedObjectContext:context
                                         sectionNameKeyPath:type
                                                  cacheName:nil]; 
```

这应该给出 2 个部分，第一部分包含所有费用，第二部分包含所有收入。

现在对于您必须实现的部分标题`tableView:viewForHeaderInSection:`（我希望我做对了）：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
    Money *money = [[sectionInfo objects] objectAtIndex:0]; // The first object in this section
    NSNumber *type = money.type;
    if (type.intValue == 0) {
        // Create and return header view for "expense" section.

    } else {
        // Create and return header view for "incomes" section.

    }
} 
```

# zend-framework - 在 Zend Framework 2 RBAC 或 ACL 中。推荐哪个？

> ID：13302067
> 
> 赞同：8
> 
> 时间：2012-11-09T04:20:29.590
> 
> 标签：zend-framework, acl, rbac

我即将在我的 ZF2 项目中实施访问控制。我正在检查 RBAC 和 ACL。哪一个最适合另一个？为什么？

Zend 将来会很好地支持哪一个？

我用谷歌搜索了它，但无法得到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:09:02.017

如果您使用 ZF2 ACL，您可能还需要做一些其他的事情，例如放置防火墙、加载 ACL 配置和设置规则等。

我对 ZF1 ACL 非常满意，但设置和保持最新资源（在我们的案例中为模型/控制器/动作）有点痛苦。

在 ZF2 中，您应该使用路由 - routeMatch 或 Controller 匹配。我发现 ZfcRbac 非常有用，它与 RBAC 非常相似，但它会增加一些位。

从那里开始可能更容易。

[ZfcRbac](https://github.com/ZF-Commons/ZfcRbac)

# android - 在 mac os xlion 上构建 android 源代码

> ID：13302068
> 
> 赞同：1
> 
> 时间：2012-11-09T04:20:34.880
> 
> 标签：android, android-source

我刚买了一个新的macbook。我试图在 mac os x lion 上为 android 源代码构建环境。Android 网站建议下载 Xcode 3.1.4，但是当我尝试安装 macports 时，它显示了一些错误并要求安装 Xcode 4.something。我安装了 OSX 狮子。我试图从应用商店安装 xcode，但现在的问题是 xcode 路径都搞砸了。我尝试了谷歌的一些解决方案，但可以解决。任何帮助表示赞赏。谢谢

# windows-8 - 在动态磁贴上显示生成的图像

> ID：13302069
> 
> 赞同：1
> 
> 时间：2012-11-09T04:20:45.610
> 
> 标签：windows-8, microsoft-metro, live-tile

我在我的应用程序中创建了一个自定义图像（例如通过捕获墨迹数据），然后想要在 Live Tile 上显示生成的图像。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:30:49.597

您需要做的就是将图像分配给动态磁贴模板。

```
TileUpdateManager.GetTemplateContent(TileTemplateType.TileWideImageAndText01);

XmlNodeList tileTextAttributes = tileXml.GetElementsByTagName("text");
tileTextAttributes[0].InnerText = "Hello World! My very own tile notification";

XmlNodeList tileImageAttributes = tileXml.GetElementsByTagName("image");
((XmlElement)tileImageAttributes[0]).SetAttribute("src", "ms-appx:///images/redWide.png");
((XmlElement)tileImageAttributes[0]).SetAttribute("alt", "red graphic");

XmlDocument squareTileXml = TileUpdateManager.GetTemplateContent(TileTemplateType.TileSquareText04);
XmlNodeList squareTileTextAttributes = squareTileXml.GetElementsByTagName("text");
squareTileTextAttributes[0].AppendChild(squareTileXml.CreateTextNode("Hello World! My very own tile notification"));
IXmlNode node = tileXml.ImportNode(squareTileXml.GetElementsByTagName("binding").Item(0), true);
tileXml.GetElementsByTagName("visual").Item(0).AppendChild(node);

TileNotification tileNotification = new TileNotification(tileXml);

tileNotification.ExpirationTime = DateTimeOffset.UtcNow.AddSeconds(10);

TileUpdateManager.CreateTileUpdaterForApplication().Update(tileNotification); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:05:02.420

Jeff Blankenburg 的以下博客文章可以作为您想了解的有关动态磁贴的所有信息的起点：

[31 天的 Windows 8](http://www.jeffblankenburg.com/2012/11/09/31-days-of-windows-8-day-9-live-tiles/)

# javascript - 使用ajax提交复选框数据

> ID：13302071
> 
> 赞同：1
> 
> 时间：2012-11-09T04:20:50.550
> 
> 标签：javascript, ajax

```
<html>
<body>
<input type="checkbox" checked="checked">
</body>
</html> 
```

我想根据选择将复选框的值传递为 1 或 0。如果选中，则将 1 发送到 PHP 文件，否则发送 0。该值是使用 html 中的 onClick 事件发送的，使用 AJAX 我想发送该值。

我是 AJAX 新手，所以无法找到完成这项任务的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T04:26:52.210

```
$(document).ready(function(){
  $('body').delegate('#Yourbuttonid','click',function(){
        var chkval = 0
          if($('#yourcheckboxid').is(':checked')){
            chkval  = 1;
          }
   $.ajax({
       url: "Your_url",
       type: "POST",
       data:{'checkboxvalue':chkval},

       success:function(returndata){

       },error:function(errordata){

       }
     });

   });  

}); 
```

在你的 PHP 文件中

您可以将复选框值获取为`echo $_POST['checkboxvalue'];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T04:27:40.707

尝试

```
$('element').on('click', function(){
$checkbox = $(':checkbox').prop('checked');
​$.post({ 
          url :'PageWhereYouWanToSend.php'​​​​​​​​​​​​​​​​​​​​​​​​​​,
          data : {​ 'checked' : $checkbox },
          success : function (resp){
                     alert(resp);
                   }
      });
​});​ 
```

### 参考：

[`.prop`](http://api.jquery.com/prop/)

[`.post`](http://api.jquery.com/jQuery.post/)

[`.on`](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T04:31:58.743

```
var subcheck = 0;
$('input:checkbox').change(function(){
   if($(this).is(':checked')){
      subcheck = 1;
   } else {
      subcheck = 0;
   }

   $.post("your.php", { checkdata: subcheck},
   function(data) {
      //your code here
   });
}); 
```

# ios - CATransition 提前推送过渡替换内容

> ID：13302072
> 
> 赞同：1
> 
> 时间：2012-11-09T04:21:06.860
> 
> 标签：ios, macos, cocoa, core-animation, caanimation

我在 Mac 应用程序中有一个简单的动画设置，其中页面控件交换了一些视图。我非常接近获得我想要的类似分页的动画，但是有一个小问题。分页工作正常，新页面动画正确到位，但新页面也会替换动画*之前*的初始页面。我希望最终让被推出的视图保持不变，而不是提前更改到新页面。[这是一个显示问题的视频](http://f.cl.ly/items/0w3x2h2g203W1b3V2W1m/SO.mov)，动画持续时间减慢到 3 秒。这是代码：

```
UASourceView *previousSourceView = [self.sourceViewContainer.subviews objectAtIndex:0];
NSInteger previousIndex = [self.sourceViews indexOfObjectIdenticalTo:previousSourceView];

CATransition *pushTransition = [CATransition animation];
[pushTransition setType:kCATransitionPush];
[pushTransition setSubtype:(previousIndex < index) ? kCATransitionFromRight : kCATransitionFromLeft];
[pushTransition setDuration:PANEL_PAGE_SWIPE_ANIMATION_DURATION];
[pushTransition setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
[pushTransition setRemovedOnCompletion:YES];

[CATransaction begin];
[self.sourceViewContainer replaceSubview:previousSourceView with:sourceView];
[CATransaction commit];

[sourceView.layer addAnimation:pushTransition forKey:@"push"]; 
```

有一个固定的容器视图`self.sourceViewContainer`，可以在每个动画上替换一个新的子视图。如上所示，问题是`previousSourceView`立即被替换`sourceView` **并且也**被推入。请帮我停止立即更换。我哪里错了？

*注意，`iOS`添加标签是因为此代码与平台无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:25:14.807

[我使用CAAnimationBlocks](https://github.com/trojanfoe/CAAnimationBlocks)解决了类似的问题（这是我[原来](https://github.com/xissburg/CAAnimationBlocks)的分支，作者已经朝着我不太关心的方向移动）。

这个想法是在完成块中设置和`removedOnCompletion`执行`NO`实际的切换（没有动画）。这仅在 OSX 下进行了测试（您可能需要一个不同的 iOS 解决方案，它已经支持完成块）。`fillMode``kCAFillModeForwards`

这是我的代码中的一个示例用法，它在棋盘上移动一个棋子，然后再返回：

```
CABasicAnimation *moveAnimation = [CABasicAnimation animationWithKeyPath:@"position"];
moveAnimation.fromValue = [NSValue valueWithPoint:[self _pointForSquare:move.from()]];
moveAnimation.toValue = [NSValue valueWithPoint:[self _pointForSquare:move.to()]];
moveAnimation.duration = _animateSpeed / 1000.0;
moveAnimation.autoreverses = YES;
moveAnimation.removedOnCompletion = NO;
moveAnimation.fillMode = kCAFillModeForwards;
moveAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
moveAnimation.completion = ^(BOOL finished)
{
    [pieceLayer removeAnimationForKey:@"movePiece"];
    [self _setPieceLayer:pieceLayer toPiece:piece];
    [pieceLayer setNeedsDisplay];
};

[pieceLayer addAnimation:moveAnimation forKey:@"movePiece"]; 
```

# matlab - 使用有限数据集的 2D 彩色图

> ID：13302075
> 
> 赞同：0
> 
> 时间：2012-11-09T04:21:30.980
> 
> 标签：matlab, plot

试了很久也没找到解决办法。

我有 3 列数据： `x`、和每个点`y`的应力值 ( ) 。我想生成一个 2D 彩色图，显示随着应力大小的连续颜色变化（）。应力值从增加到。我只有一个区域的数百个数据点，但我想查看每个位置的应力大小（从颜色中读取）。我应该使用什么 Matlab 命令？`S``(x,y)``S``-3*10^4 Pa``4*10^4 Pa``(x, y)`

我想根据使用有限数据点的连续颜色变化制作一个 2D 彩色图，显示`S`每个位置的应力大小 ( )`(x, y)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:30:46.040

我会使用带有插值着色的[补丁：](http://www.mathworks.nl/help/matlab/ref/patch.html)

```
% some data, x/y are random
N = 50;
x = rand(N,1);
y = rand(N,1);
S = sin(2*x)+y;

% plotting
tr = delaunay(x,y);
trisurf(tr,x,y,zeros(N,1),S,'FaceColor','interp');
view (2) 
```

![在此处输入图像描述](../Images/4660151784cdaa809344af9b88556463.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T04:57:45.353

查看[`surf`MATLAB`mesh`文档](http://www.mathworks.com.au/help/matlab/learn_matlab/creating-mesh-and-surface-plots.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T07:33:42.407

进一步为 Gunther Struyf 的回答做出贡献；假设它是 FEM 分析，您可能已经有一个连接矩阵，比如带有节点坐标的“M”和“x”“y”列向量。节点处的应力值可能包含在列向量“S”中；那么您可以使用上述补丁功能：

> patch('faces',M,'vertices',[x(:) y(:)],'facevertexcdata',S(:),'FaceColor','interp');

您将获得与 Gunther Struyf 发布的数据相似的二维数据图。

# c++ - OpenCV 2.4.0 C++ goodFeaturesToTrack 损坏堆？

> ID：13302079
> 
> 赞同：0
> 
> 时间：2012-11-09T04:22:09.353
> 
> 标签：c++, opencv, heap-memory, heap-corruption

我现在才开始学习如何使用 openCV 库。我已经下载并安装了 openCV 2.4.0，并运行了一些示例项目。在这段代码中，我试图从 goodFeaturesToTrack 获取输出并在图像上绘制点。代码编译，但每次我运行它，它崩溃，我得到以下错误：

* * *

Windows 在 Corner.exe 中触发了一个断点。

这可能是由于堆损坏，这表明 Corner.exe 或其已加载的任何 DLL 中存在错误。

这也可能是由于用户在 Corner.exe 具有焦点时按 F12。

输出窗口可能有更多诊断信息。

* * *

输出窗口没有更多的诊断信息。我已将错误追溯到 goodFeaturesToTrack 函数。这是有问题的代码：

```
// Corner.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <opencv.hpp>
#include <opencv_modules.hpp>
#include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>

#include <iostream>
#include <string>
#include <iomanip>
#include <sstream>

using namespace cv; //If you don't have this, you won't be able to create a mat...
using namespace std;

#include <stdio.h>
#include <cv.h>
#include <highgui.h>
#include <math.h>

//Whole bunch of #defines to make editing the code a lot easier

#define MAX_FEATURES 5
#define FILENAME "C:/Users/Mitchell/Desktop/lol.jpg"

int main(void)
{
    namedWindow("Out", CV_WINDOW_AUTOSIZE);
    namedWindow("In", CV_WINDOW_AUTOSIZE);  
    Mat Img;
    Img = cvLoadImage(FILENAME, CV_LOAD_IMAGE_GRAYSCALE);

    if(!Img.data)
    {
        fprintf(stderr, "ERROR: Couldn't open picture.");
        waitKey();
        return -1;
    }

    else
    {
        imshow("In", Img);
        waitKey();
    }

    std::vector<cv::Point2f> Img_features;
    int number_of_features = MAX_FEATURES;

    Mat Out = Mat::zeros(Img.cols, Img.rows, CV_32F);

    goodFeaturesToTrack(Img, Img_features, MAX_FEATURES, .01, .1, noArray(), 3, false);

    fprintf(stdout, "Got here...");

    /*for (int i = 0; i < MAX_FEATURES; i++)
    {
        Point2f p = Img_features[i];
        ellipse(Img, p, Size(1,1), 0, 0, 360, Scalar(255,0,0));
    }*/

    imshow("Out", Out);

    waitKey(0);
    return 0;

} 
```

这是图书馆中的错误，还是我在做一些愚蠢的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:55:35.727

在调用goodFeatures之前可能是`Img_features`vector应该有项目？`MAX_FEATURES`即`Img_features.resize(MAX_FEATURES)`在 goodFeatures 调用之前尝试。

# c# - JSON.Net Iso 持续时间未正确序列化/反序列化

> ID：13302090
> 
> 赞同：1
> 
> 时间：2012-11-09T04:23:14.473
> 
> 标签：c#, json.net, iso8601

> **可能重复：**
> [使用 JSON.Net 解析 ISO 持续时间](https://stackoverflow.com/questions/12633588/parsing-iso-duration-with-json-net)

鉴于以下片段，

**序列化时**

```
var settings = new JsonSerializerSettings { DateFormatHandling = DateFormatHandling.IsoDateFormat };
settings.Converters.Add(new IsoDateTimeConverter()); 

var duration = new TimeSpan(0, 1, 0);
Debug.WriteLine(JsonConvert.SerializeObject(duration, settings)); 
```

> **输出：** “00:01:00”
> **应该输出：** “PT1M”

**反序列化时**

```
Debug.WriteLine(JsonConvert.DeserializeObject("{\"Duration\": \"PT1M\"}", settings)); 
```

> **失败**：将值“PT1M”转换为类型“System.TimeSpan”时出错。路径“持续时间”，第 1 行，位置 19。

然而，此页面 - [Json.NET 4.5 第 1 版 - ISO 日期、异步、Metro build](http://james.newtonking.com/archive/2012/03/20/json-net-4-5-release-1-iso-dates-async-metro-build.aspx)另有声明。我错过了什么？

# dynamics-crm - 在 Dynamics CRM 2011 中表示大量数字

> ID：13302091
> 
> 赞同：6
> 
> 时间：2012-11-09T04:23:52.187
> 
> 标签：dynamics-crm, dynamics-crm-2011

我试图在 Dynamics CRM 2011 中表示大于 100,000,000,000（十进制数据类型的最大值）的数字。似乎唯一的方法是使用货币字段或使用文本字段。这些选项都不是很吸引人。

在 Dynamics CRM 中表示大量数字的最佳方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T07:17:17.173

唯一的方法确实是在货币字段中或使用文本字段。您不能增加十进制字段的最大值。

但是，如果这有什么好处的话，Float-Field 可以覆盖到 100,000,000,000。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T05:21:27.513

一个可能的答案是只存储数十亿 (2.15 = 2,150,000,000) - 尽管如果您将小数字添加到大数字中，这将不起作用。

另一种方法是添加一个包含一千、百万或十亿的“乘数”字段，并在需要报告时将这些数字相乘。

最后，您可以将数字存储在字符串中，并在 RetrieveMultple 和 PreSave 插件的数字属性中验证/复制它。只要您不在数字字段中*保存*大值，就可以使用它来保存瞬时大值。使用字符串作为持久性持有者。哈基，是的-但至少您可以在图表等中使用该值。

“货币”类型[使用不稳定](https://stackoverflow.com/questions/13128563/cannot-add-currency-field-to-entity-after-importing)

# php - 在PHP中使用条件删除数组上的重复值

> ID：13302102
> 
> 赞同：0
> 
> 时间：2012-11-09T04:25:10.160
> 
> 标签：php, arrays, unique

我想删除数组上的一些重复值，但有一个条件是脚本必须忽略包含特定单词的数组。

以下代码改编自[**PHP： in_array**](http://php.net/manual/de/function.array-unique.php)。

```
$array = array( 'STK0000100001',
                'STK0000100002',
                'STK0000100001',           //--> This should be remove
                'STK0000100001-XXXX',      //--> This should be ignored
                'STK0000100001-XXXX' );    //--> This should be ignored

$ignore_values = array('-XXXX');

if(make_unique($array, $ignore_values) > 0) {
    //ERROR HERE
} 
```

使数组唯一的函数是：

```
function make_unique($array, $ignore) {
    $i = 0;
    while($values = each($array))  {
        if(!in_array($values[1], $ignore)) {
            $dupes = array_keys($array, $values[1]);
            unset($dupes[0]);
            foreach($dupes as $rmv) {
                $i++;
            }            
        }
    }
    return $i;
} 
```

我尝试过使用`if(!in_array(str_split($values[1]), $ignore)) ...`，但它是一样的。

数组应该变成这样：

```
STK0000100001
STK0000100002
STK0000100001-XXXX
STK0000100001-XXXX 
```

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:18:58.290

这应该适用于`>= PHP 5.3`.

```
$res = array_reduce($array, function ($res, $val) use ($ignore_values) { 
    $can_ignore = false;
    foreach ($ignore_values as $ignore_val) {
      if (substr($val, 0 - strlen($ignore_val)) == $ignore_val) {
        $can_ignore = true;
        break;
      }
    }

    if ( $can_ignore || ! in_array($val, $res)) {
      $res[] = $val;
    }
    return $res;

  }, array()
); 
```

否则

```
$num_of_duplicates = 0;
$res = array();
foreach ($array as $val) { 
  $can_ignore = false;
  foreach ($ignore_values as $ignore_val) {
    if (substr($val, 0 - strlen($ignore_val)) == $ignore_val) {
      $num_of_duplicates++;
      $can_ignore = true;
      break;
    }
  }
  if ( $can_ignore || ! in_array($val, $res)) {
    $res[] = $val;
  }
} 
```

编辑：添加`duplicate count`到第二个片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T05:07:12.493

试试这个，`print_r();`在生产中使用时去掉里面的函数

```
if(make_unique($array, $ignore_values) > 0) {
    //ERROR HERE
}

function make_unique($array, $ignore)  {
    $array_hold = $array;
    $ignore_val = array();
    $i = 0;
    foreach($array as $arr) {
        foreach($ignore as $ign) {
            if(strpos($arr, $ign)) { 
                 array_push( $ignore_val, $arr);
                 unset($array_hold[$i]);
                 break;
            }
        }
        $i++;
    }
    $unique_one = (array_unique($array_hold));
    $unique_one = array_merge($unique_one,$ignore_val);
    print_r($unique_one);

    return count($array) - count($unique_one);
} 
```

# php - 将复数数组转换为关联数组

> ID：13302104
> 
> 赞同：3
> 
> 时间：2012-11-09T04:25:42.410
> 
> 标签：php, arrays, multidimensional-array

我有一个看起来像这样的数组数据：

```
Array (
    [0] => Array (
        [0] => Name:
        [1] => John W.
        [2] => Registration ID:
        [3] => 36
    ) 
    [1] => Array (
        [0] =>Age:
        [1] => 35
        [2] => Height:
        [3] => 5'11"
    ) 
    [3] => Array (
        [0] => Sex:
        [1] => M
        [2] => Weight:
        [3] => 200lbs
    )
    [4] => Array (
        [0] => Address
    )
    [5] => Array (
        [0] => 6824 crestwood dr delphi, IN 46923
    )) 
```

我想把它转换成这样的关联数组：

```
Array(
    ['Name']=> John W.
    ['Registration ID']=> 36
    ['Age']=> 35
    ['Height'] => 5'11''
    ['Sex']=>M
    ['Weight']=>200lbs
    ['Address']=>6824 crestwood dr delphi, IN 46923
) 
```

我完全不知道该怎么做，因为应该是数组列标题也是按顺序排列的，所以很难转换这个数组。

我感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:32:37.787

鉴于您的原始数组被调用`$origin`，您可以这样做：

```
$merged = array();
foreach($origin as $val) {
   $merged = array_merge($merged, $val);
}
$tot = count($merged) - 1;
for ($i=0;$i<$tot;$i+=2) {
   $result[$merged[$i]] = $merged[$i+1];
}

var_dump($result); // To test the resulting array 
```

首先，我使用`array_merge()`将`$origin`数组展平为只有一个维度/深度，因此我们稍后对其进行迭代（每次迭代每 2 个项目步进）并将每对项目 (`$i`和`$i+1`) 分配给结果数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T04:43:45.417

看起来，对于前 3 个孩子，您可以将偶数值分配给前一个元素作为键。然后，将第四个指定为第五个元素的键。

```
 $result = array();
   foreach ($array as $key => $value)
   {
       if ($key < 4) {
             $elements = array_values($value);
             $result[$elements[0]] = $elements[1];
             $result[$elements[2]] = $elements[3];
        }

        if ($key == 4)
             $fifthkey = $value;

         if ($key == 5)
             $result[$fifthkey] = $value;
    } 
```

另外，请注意，您必须转义您的高度字符串引号。

# ruby-on-rails-3 - Inherited_resources 将资源构建为角色

> ID：13302105
> 
> 赞同：0
> 
> 时间：2012-11-09T04:25:59.117
> 
> 标签：ruby-on-rails-3

举个例子：

```
 def create

    resource = build_resource
    resource.assign_attributes(params[resource_instance_name], as: :admin)

    create! do |format|
      format.js {...}
    end

  end 
```

上面的问题是属性没有被分配`as: :admin`，它们在没有任何检查的情况下被分配，所以这个方法没有任何效果。是`create!`方法吗？属性正在其他地方分配给此资源，我无法找到它在哪里。欣赏任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:20:12.820

在这里找到我的答案：[https](https://github.com/josevalim/inherited_resources/pull/153) ://github.com/josevalim/inherited_resources/pull/153 。不得不覆盖`as_role`和`role_given?`——

```
def as_role
  { as: current_user.highest_role }
end

def role_given?
  true
end 
```

然后，如果您像我一样从主资源控制器继承，这将始终将角色应用于定义它的控制器或所有资源的属性。

# algorithm - 哪个是维基百科最快的图形表示？

> ID：13302109
> 
> 赞同：2
> 
> 时间：2012-11-09T04:26:48.867
> 
> 标签：algorithm, api, graph, wikipedia, wikipedia-api

我正在做这个项目，我需要在代表英语维基百科文章的图形上运行一些图形算法。这需要实时

我努力了

*   只有一个 PHP 接口的[WikiMapUW](http://code.google.com/p/wiki-map-uw-cse/)

*   [WikipediaLinkGraph](http://blog.alwaysmovefast.com/wikipedias-link-graph)没有前一个那么快，但有一个 Python 接口

想知道是否有一些明显的快速 Java/Python API 可用而我错过了并且更好？

# php - Symfony 和 Percona

> ID：13302124
> 
> 赞同：1
> 
> 时间：2012-11-09T04:27:46.730
> 
> 标签：php, mysql, symfony, doctrine-orm, percona

Symfony 2 是否支持 Percona？或者我应该坚持使用 MySQL 吗？我正在运行 Debian 6（挤压）并安装了 MySQL，但在我安装 Symfony 之前我在想 Percona 可能会更好（更快）交易？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T04:43:58.927

Percona 只是 MySQL 的一个分支，它根据每个发行版/版本重新构建。因此，您可以获得与 MySQL 完全相同的功能，而且还可以获得额外的性能。

是的，你可以像使用 MySQL 服务器一样使用 Percona 服务器。

# hadoop - Microsoft HDInsight 仪表板服务不可用

> ID：13302128
> 
> 赞同：0
> 
> 时间：2012-11-09T04:28:00.953
> 
> 标签：hadoop, port, azure-hdinsight

当我尝试打开 HDInsight 仪表板服务时，它显示“服务不可用 HTTP 错误 503。服务不可用”。本地主机端口号是 8085。

任何帮助，将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:04:05.883

检查 HadoopAppPool 的身份...请参阅[Microsoft 上的这篇文章](http://social.msdn.microsoft.com/Forums/en-US/hdinsight/thread/e55dc1b8-5022-433f-8904-37b6f1a7877a)。

# php - 从 mysql 获取空白输出。以前从未使用过“%s”

> ID：13302132
> 
> 赞同：0
> 
> 时间：2012-11-09T04:29:31.137
> 
> 标签：php, mysql, insert

我的问题是我是否正确使用 %s 或者它是否必须是我的变量的其他东西？（我的数据库中没有添加任何记录）

参赛作品：

```
$login = "coolkidz";
$sname = "heyu";
$city = "beautiful";
$pass = "awesome";
$username = "what";
$mcode = "nice"; 
```

查询

```
mysql_query("INSERT INTO login(sname, city, pass, username, mcode, username) VALUES('%s','%s','%s','%s','%s','%s')", $sname, $city, $pass, $username, $mcode, $login); 
```

这是不发出任何东西的回声

```
echo "'INSERT INTO login(sname, city, pass, username, mcode, username) VALUES('%s','%s','%s','%s','%s','%s')', $sname, $city, $pass, $username, $mcode, $login"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:32:02.290

改成这样：

```
mysql_query("INSERT INTO login(sname, city, pass, username, mcode, username) VALUES('$sname','$city','$pass','$username','$mcode','$login')"); 
```

# mysql - 组串联记录

> ID：13302134
> 
> 赞同：0
> 
> 时间：2012-11-09T04:30:08.300
> 
> 标签：mysql, sql, group-by, tandem

我有一张这样的桌子：

```
|     A |     B |
-----------------
|  22.1 |  15.8 |
| 12.15 |  4.55 |  <- Duplicate record
| 12.15 |  4.55 |  <- Duplicate record
| 12.15 |  4.55 |  <- Duplicate record
|  30.4 | 44.12 |
|  10.5 |  7.58 |
|  31.2 |  65.1 |  <- Duplicate record
|  31.2 |  65.1 |  <- Duplicate record
|   9.4 |   7.8 |
| 12.15 |  4.55 |  <- Same Duplicate record
| 12.15 |  4.55 |  <- Same Duplicate record
| 12.15 |  4.55 |  <- Same Duplicate record
|  31.2 |  65.1 |  <- Same Duplicate record
|  31.2 |  65.1 |  <- Same Duplicate record 
```

在这里我想分组`A`和`B`。但我想对串联值进行分组。
因此，如果两个相同的记录之间有不同的记录，那么两个记录（相同）都应该出现。

例如，我的预期输出应该是：

```
|     A |     B |
-----------------
|  22.1 |  15.8 |
| 12.15 |  4.55 |  <- Group 1
|  30.4 | 44.12 |
|  10.5 |  7.58 |
|  31.2 |  65.1 |  <- Group 2
|   9.4 |   7.8 |
| 12.15 |  4.55 |  <- Group 3 (Second Time)
|  31.2 |  65.1 |  <- Group 4 (Second Time) 
```

我正在尝试的是：

```
SELECT * FROM MyTable
GROUP BY A,B 
```

但它给了我错误的结果：

```
|     A |     B |
-----------------
|  22.1 |  15.8 |
| 12.15 |  4.55 |
|  30.4 | 44.12 |
|  10.5 |  7.58 |
|  31.2 |  65.1 |
|   9.4 |   7.8 |
Here `12.15` and `31.2` is skipped second time. But I want it. 
```

请注意，我阅读[了这个问题](https://stackoverflow.com/q/13252936/1584397)，但解决方案是在 PHP 中给出的，而我想要在 MySQL 中。
我正在尝试解决[此 SQLFiddle](http://sqlfiddle.com/#!2/11de1/5)中的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:36:30.303

列上是否有顺序 ID？如果是这样，您可以尝试以下操作：

```
SELECT t.A, t.B
FROM myTable t
WHERE NOT EXISTS
(
    SELECT 1
    FROM myTable t2
    WHERE t2.A = t.A
    AND t2.B = t.B
    AND t2.Id = (SELECT MIN(t3.Id) FROM myTable t3 WHERE t3.Id > t.Id)
) 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!2/a1804/1)

* * *

如果您没有 ID，可以尝试以下方法，但请记住，不能保证您一定会得到想要的结果；服务器可以按它希望的任何顺序返回结果，除非您指定要按以下顺序排序的列：

```
SELECT t.A, t.B
FROM
(
    SELECT @curRow := @curRow + 1 AS Id, A, B
    FROM myTable
    JOIN (SELECT @curRow := 0) r ON 1=1
) t
WHERE NOT EXISTS
(
    SELECT 1
    FROM (
        SELECT @curRow2 := @curRow2 + 1 AS Id, A, B
        FROM myTable
        JOIN (SELECT @curRow2 := 0) r ON 1=1
    ) t2
    WHERE t2.A = t.A
    AND t2.B = t.B
    AND t2.Id = (
        SELECT MIN(t3.Id) 
        FROM (
            SELECT @curRow3 := @curRow3 + 1 AS Id, A, B
            FROM myTable
            JOIN (SELECT @curRow3 := 0) r ON 1=1
        ) t3
        WHERE t3.Id > t.Id
   )
) 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!2/a1804/4)

# c# - 捕获和比较图像

> ID：13302136
> 
> 赞同：1
> 
> 时间：2012-11-09T04:30:22.790
> 
> 标签：c#, vb.net

有没有办法抓取屏幕特定部分的屏幕截图并将其与已存储在磁盘中的另一个图像进行比较。如果图像相同，它会提示一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:36:11.893

查看[http://www.developerfusion.com/code/4630/capture-a-screen-shot/](http://www.developerfusion.com/code/4630/capture-a-screen-shot/)以获取有关如何捕获屏幕截图的示例。

图像比较要复杂得多。存储在磁盘上的图像可能具有不同的大小、不同的纵横比或不同的深度。除非您可以确定屏幕截图和磁盘上的图像绝对相同，否则您必须查看一种识别**相似**图像的方法。

看一下[pHash Demo](http://phash.org/demo/)，它采用两张图像并输出相似度分数。它使用的算法非常简单，可以在网站上找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T04:42:23.540

如果您尝试将图像（或其中的一部分）与另一张图像进行比较，我在互联网上搜索并发现 Leadtools 具有相关功能，可以将图像与另一张图像中相同尺寸的所有区域进行比较。有关更多信息，请参阅此链接： http: [//www.leadtools.com/help/leadtools/v175/dh/po/leadtools.imageprocessing.core~leadtools.imageprocessing.core.correlationcommand.html](http://www.leadtools.com/help/leadtools/v175/dh/po/leadtools.imageprocessing.core~leadtools.imageprocessing.core.correlationcommand.html)

或者

这个项目可能是你正在寻找的：

[https://github.com/cameronmcefee/Image-Diff-View-Modes/commit/8e95f70c9c47168305970e91021072673d7cdad8](https://github.com/cameronmcefee/Image-Diff-View-Modes/commit/8e95f70c9c47168305970e91021072673d7cdad8)

# php - 使用 JSON 通过 onClick 将 PHP 数组传递给 Javascript

> ID：13302143
> 
> 赞同：0
> 
> 时间：2012-11-09T04:31:49.217
> 
> 标签：php, jquery, json

我正在使用 PHP 和 MySQL 来遍历产品并生成 HTML 代码，该代码由一个 img 标记和一个调用 Javascript 函数的 onClick 事件组成。我想通过 onClick 事件将 PHP 变量传递给 Javascript 函数。我正在使用 jQuery，并认为使用 PHP 的 json_encode() 函数和 jQuery 的 jquery-json 插件是个好主意。

我的 PHP 代码如下所示：

```
$onclick = json_encode(array(
  'productid' => $productsRow['ProductID'],
  'description' => $productsRow['Description']
));
echo "<a href=\"javascript:;\" onClick=\"changepic('" . htmlentities($onclick) . "')\">";
echo "<img src=\"products/$thumbnailfilename\" width=\"100\" height=\"100\">";
echo "</a>"; 
```

如您所见，我的 Javascript 函数称为 changepic()。我遗漏了一些与这个问题无关的代码（即数据库访问代码和决定缩略图的位置）。

我的 Javascript 代码是：

```
function changepic(productarray) {
  var productid = $.evalJSON(productarray).productid;
  var productdesc = $.evalJSON(productarray).description;
  alert(productid);
} 
```

我还没有真正对传递给 Javascript 数组的 PHP 变量做任何事情，我只是想让它首先工作！我的最终目标是使用 jQuery 将产品描述插入到`<div>`

示例产品详细信息可能如下所示：

```
ProductID: 30c7508008ac7597619ad9b90a97b40f
Description: <p>Wide and Narrow Bands<br>
Set with Top-Quality Diamonds</p><p> 
```

如您所见，描述包含 HTML 代码，以及`<br>`标签后的换行符。

生成的 HTML 如下所示：

```
<a href="javascript:;" onClick="changepic('{&quot;productid&quot;:&quot;30c7508008ac7597619ad9b90a97b40f&quot;,&quot;description&quot;:&quot;&lt;p&gt;Wide and Narrow Bands&lt;br&gt;\r\nSet with Top-Quality Diamonds&lt;\/p&gt;&quot;}')"><img src="products/tn-30c7508008ac7597619ad9b90a97b40f.jpg" width="100" height="100"></a> 
```

当我运行它时，我得到一个 Javascript 错误：

```
Event thread: click
Uncaught exception: SyntaxError: JSON.parse: Unescaped control char in string: "<p>Wid
Error thrown at line 18, column 2 in changepic(productarray) in http://isis/carats/view-collection.php?collectionid=32d0c7b8774f7f82a2d7c7d053286cfc:
var productid = $.evalJSON(productarray).productid;
called from line 1, column 0 in <anonymous function>(event) in http://isis/carats/view-collection.php?collectionid=32d0c7b8774f7f82a2d7c7d053286cfc:
changepic('{"productid":"30c7508008ac7597619ad9b90a97b40f","description":"<p>Wide and Narrow Bands<br>\r\nSet with Top-Quality Diamonds<\/p>"}') 
```

据我所知，我在编码 JSON 字符串时做错了。我做了一些谷歌搜索，发现有些人说不需要编码（我试过了，产品描述被视为 HTML 并显示在页面中），其他人说使用 addlashes() 和一些人说 htmlentities()。

在尝试将其与 evalJSON() 一起使用之前，是否需要在 Javascript 函数中对其进行解码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:30:52.367

我认为我过于复杂了，我根本不需要使用 JSON。

我通过将我的 PHP 代码更改为：

```
$productid = $productsRow['ProductID']
$description = rawurlencode($productsRow['Description']);
echo "<a href=\"javascript:;\" onClick=\"changepic('$productid','$description')\">"; 
```

然后我的 Javascript 看起来像这样：

```
function changepic(productid, description) {
    description = decodeURIComponent(description);
    alert(description);
} 
```

这工作正常，所以现在我可以继续并实际在 Javascript 函数中做一些有用的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:04:08.170

我通常只是这样做，

```
var foo = <?php echo json_encode($foo); ?>; 
```

而且我真的不明白这会如何导致任何形式的“注入”攻击，只要它`json_encode`正在发挥作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T05:09:31.030

我不明白你为什么会陷入这么多混乱..这是解决方案，它有效

```
$onclick = json_encode(array(
'productid' => $productsRow['ProductID'],
'description' => $productsRow['Description']
));
echo "<a id='test' href='' var='$onclick'>";
echo "<img src=\"products/$thumbnailfilename\" width=\"100\" height=\"100\">";
echo "</a>"; 
```

这是你的jQuery：

```
$(function(){

   $("#test").click(function(){
   var img = jQuery.parseJSON(($(this).attr("var")));
   alert(img.description);
});

}); 
```

现在，由于您拥有 json 对象，您可以创建 div 标签并将变量放入其中或将内容放在已经存在的 div 标签上。我相信你知道在这里做什么。

丁斯

# mysql - 想要来自 ireport 交叉表的两个单独类别行的报告

> ID：13302144
> 
> 赞同：1
> 
> 时间：2012-11-09T04:31:57.627
> 
> 标签：mysql, jasper-reports, ireport

这是我要使用的查询

```
select monthNmae, monthID, achievement , target from salse 
```

上面的查询返回以下结果

```
month  | monthID | achievement  | target
jan      1         12              10
feb      2         56              20
mar      3         9               20
.        .         .               .
.        .         .               .
.        .         .               .
.        .         .               .
dec     12        70               68 
```

我想要一张来自 Jasper 报告的表格，例如

```
month          jan    feb    mar ............... Dec 
Achievement    12     56     9   ..............  70
target         10     26     20  ..............  68 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:32:34.490

您可以编写查询以获取所需格式的数据。在 MySQL 中，您可以使用聚合函数和`CASE`语句：

```
select src_col as month, 
  sum(case when month = 'jan' then value end) `jan`,
  sum(case when month = 'feb' then value end) `feb`,
  sum(case when month = 'mar' then value end) `mar`,  -- add other months here
  sum(case when month = 'dec' then value end) `dec`   
from
(
  select month, monthid, achievement value, 'achievement' src_col
  from salse
  union all
  select month, monthid, target value, 'target' src_col
  from salse
) src
group by src_col 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/88960/5)

# iphone - 如何处理 ios6 和旧版本的 .xib 文件

> ID：13302149
> 
> 赞同：0
> 
> 时间：2012-11-09T04:32:22.250
> 
> 标签：iphone, objective-c, ios5, ios6

我正在 ios 6 上创建我的项目，但根据要求，同一个项目应该在 ios 6 和旧版本中都可以工作。

那么我该如何管理这两个版本的 .xib 文件，因为在 ios 6 中我们有很大的 .xib 文件。

我应该为旧版本创建新的 .xib 文件吗？

分享你的想法的朋友，

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:40:03.527

不需要。您不需要为 iOS 6 和其他较低的操作系统版本制作单独的 nib 文件。您唯一需要遵循的是禁用 xcode 5 中每个 nib 的“使用自动布局”功能，并且可以使用视图的 autoresize 属性使视图与 iOS 6 和其他较低版本兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T04:38:12.277

创建两个 Xib 文件，一个用于 iphone5，另一个用于 iPhone 3GS/4//4s 一类

然后

检查设备成语和高度，它将按以下方式工作......

```
#define isiPhone5 ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 568)

    if(isiPhone5 == 1)
    {
        nibName = @"DesclaimerViewiPhone5";
    }
    else
    {
        nibName = @"DesclaimerView";
    }
    DesclaimerView* Obj = [[DesclaimerView alloc]initWithNibName:nibName bundle:nil];
   [self.navigationControl pushViewController:obj animated:YES]; 
```

# python - 从一个字符串中创建一个元组列表，，

> ID：13302155
> 
> 赞同：1
> 
> 时间：2012-11-09T04:34:00.310
> 
> 标签：python, string, list, tuples

我想用一个字符串制作一个元组列表。基本上，鉴于以下情况，

```
s = "a b c d"
w = s.split() 
```

我想要下面的元组列表：

```
[(a, b), (b, c), (c, d)] 
```

我觉得我应该使用 append 函数和 for 循环，但我被卡住了。我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T04:41:14.840

```
>>> s = "a b c d"
>>> w = s.split()
>>> zip(w, w[1:])
[('a', 'b'), ('b', 'c'), ('c', 'd')] 
```

如果你真的想使用`for`循环 and ，你可以像这样`append`替换`zip()`

```
>>> res = []
>>> for i in range(1, len(w)):
...     res.append((w[i-1], w[i]))
... 
>>> res
[('a', 'b'), ('b', 'c'), ('c', 'd')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:08:59.220

```
 s = "a b c d"
     s = s.split(" ")
     c=[]
     for i in range(len(b)-1):
            c.append((b[i],b[i+1]))

    list comprehension
    s = "a b c d"
    s = s.split(" ")
    d=[(s[i],s[i+1])for i in range(len(s)-1)] 
```

# php - 将 PHP 文件权限设置为完全的安全风险

> ID：13302158
> 
> 赞同：1
> 
> 时间：2012-11-09T04:34:17.097
> 
> 标签：php, codeigniter

我在 Ubuntu 上运行 XAMPP，并将 lampp 文件夹复制到 /opt/。我还将 CodeIgniter 下载到 htdocs/，并在其中创建和修改了一些文件，包括更改它们的权限。CodeIgniter 中是否有我不应该将权限设置为完整的文件，因为也许一旦我将它们上传到服务器上，任何人都可以看到它们的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:43:00.503

理想情况下，您的 CodeIgniter 应该设置为使`application`and`system`文件夹位于文档根目录之外。只有`index.php`文件连同任何资产（图像、javascript、css 等）应位于文档根目录中。

至于文件权限，`755`工作正常。不需要完全权限`777`。

# key-value-store - 功能请求：gwan.h 中包含的 atomicAdd() 函数

> ID：13302161
> 
> 赞同：1
> 
> 时间：2012-11-09T04:34:38.180
> 
> 标签：key-value-store, atomic, g-wan

在 G-WAN KV 选项中，`KV_INCR_KEY`将使用第一个字段作为主键。

这意味着在 G-WAN 核心中已经内置了一个以原子方式递增的功能，以使该主索引正常工作。

最好将此函数打开以供servlet 使用，即包含在gwan.h 中。

通过这样做，像我这样的 ANSI C 新手可以从中受益。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:59:32.750

在旧的 G-WAN 论坛上对此进行了充分讨论，并邀请人们分享他们在原子操作方面的经验，以便逐个平台构建丰富的文档功能列表。

原子操作不可移植，因为它们直接寻址 CPU。这意味着 Intel x86（32 位）和 Intel AMD64（64 位）的代码不同。每个平台（ARM、Power7、Cell、Motorola 等）都有自己的原子指令集。

`gwan.h`到目前为止，此类列表尚未在文件中发布，因为基本操作很容易找到（ [GCC 编译器提供了几个原子内在函数](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Atomic-Builtins.html)作为 C 扩展），但更复杂的操作不太明显（需要`asm`技能），人们会根据需要构建它们 -在他们的代码中非常具体的用途。

软件工程始终在以尽可能低的入门成本（例如使用少量功能的 G-WAN KV 存储）和它的实际工作方式（这远不那么容易遵循）之间取得平衡.

因此，除了显而易见的（incr/decr、set/get）之外，要了解更多关于原子操作的信息，请使用 Google，查找 CPU 指令集手册，并鼓起勇气武装自己！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:40:44.800

感谢 Gil 的帮助指导。
现在，我可以自己做。
我更改了persistence.c中的代码，如下所示：
首先，我将数据中val的定义更改为**volatile**。

```
//data[0]->val++;  
//xbuf_xcat(reply, "Value: %d", data[0]->val);  
int new_count, loops=50000000, time1, time2, time;  

time1=getus();
for(int i; i<loops; i++){
    new_count = __sync_add_and_fetch(&data[0]->val, 1);
}
time2=getus();

time=loops/(time2-time1);
time=time*1000;

xbuf_xcat(reply, "Value: %d, time: %d incr_ops/msec", new_count, time); 
```

我的旧 E2180 CPU 获得了 52,000 incr_operations/msec。
因此，使用 GCC 编译器，我可以自己完成。
再次感谢。

# ios - 如何使用 NSMutable 数组作为数据源

> ID：13302165
> 
> 赞同：0
> 
> 时间：2012-11-09T04:35:08.493
> 
> 标签：ios, uitableview, nsmutablearray, datasource, uialertview

对不起，我是 iOS 新手。我打算做一个`UITableView`里面`UIAlertView`。最后我得到[了这个教程](http://codesofa.com/blog/archive/2009/07/15/look-uialertview-is-dating-uitableview.html)

我已经`UIAlertTableView`以这种方式实现了课程

```
UIAlertTableView *alert = [[UIAlertTableView alloc] initWithTitle:@"Choose a number"
                                                          message:nil
                                                         delegate:self
                                                cancelButtonTitle:@"Cancel"
                                                otherButtonTitles:nil, nil];
alert.tableDelegate = self;
alert.dataSource = self;
alert.tableHeight = 120;
[alert show]; 
```

但是经过测试，我得到 UIAlert 显示一个空白列表，里面没有出现任何项目。以前我有一个我想用作数据源的 NSMUtableArray。从上面的教程中，似乎分配数据源是使用`alert.dataSource = self`. 然而我仍然想知道如何使用我的 NSMutableArray 作为数据源以及它与它的关系`alert.dataSource`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:05:20.380

您已经告诉 UIAlertView 您的类将充当其数据源，但您还需要至少覆盖​​以下 UITableView 数据源方法，这里 mutableArray 是指您要用作数据源的可变数组：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [mutableArray count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
    }
    // Set up the cell...
    NSString *cellValue = [mutableArray objectAtIndex:indexPath.row];
    cell.text = cellValue;
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:25:37.147

我建议您需要创建一个新文件作为 alertView 的表数据源和委托。实施：

```
@interface MyTableSource: UIViewController <UITableViewDataSource, UITableViewDelegate>
@end

@implementation MyTableSource

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

return 7;

}

- (UITableViewCell *)tableView:(UITableView *)tableViews cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"MyIdentifier";

    UITableViewCell *cell = [tableViews dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text = @"M";
    return cell;

}

@end 
```

创建警报，如：

```
UIAlertTableView *alert = [[UIAlertTableView alloc] initWithTitle:@"Choose a number"
                                                          message:nil
                                                         delegate:self
                                                cancelButtonTitle:@"Cancel"
                                                otherButtonTitles:nil, nil];
MyTableSource *data = [[MyTableSource alloc] init];
alert.tableDelegate = data;
alert.dataSource = data;
alert.tableHeight = 120;
[alert show]; 
```

**注意：** 我实现了那个 alertView 进行测试，有很多问题。您需要致电：

`[self layoutAnimated:YES];`而不是`[self setNeedsLayout];`在 alertView 类中。

# c - 如何从共享内存中分离字符串数组？C

> ID：13302166
> 
> 赞同：2
> 
> 时间：2012-11-09T04:35:20.637
> 
> 标签：c, arrays, ipc, shared-memory, detach

我有：

```
int array_id;
char* records[10];

// get the shared segment
if ((array_id = shmget(IPC_PRIVATE, 1, 0666)) == -1) {
            perror("Array Creating");
}

// attach
records[0] = (char*) shmat(array_id, (void*)0, 0);
if ((int) *records == -1) {
     perror("Array Attachment");
} 
```

效果很好，但是当我尝试分离时，出现“无效参数”错误。

```
// detach
int error;
if( (error = shmdt((void*) records[0])) == -1) {
      perror(array detachment);   
} 
```

有任何想法吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:15:35.077

假设附加进展顺利，`invalid argument`仅仅意味着该段已经被分离，或者`records[0]`自从附加设置以来它的值已经改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:01:28.123

在`shmdt()`，不需要将指针参数转换为`void*`它会自动处理这一点。

`(void*)`从中删除`shmdt((void*) records[0]))`。应该是这样的。

```
if ((error = shmdt(records[0]) ) == -1)
{
  perror("Array detachment");
} 
```

它会起作用。

同样`shmat()`，在错误时它会返回`(void*) -1`，因此您的比较会发出警告。所以这样做

```
if ((char *)records[0] == (void *)-1)
{
  perror("Array Attachment");
} 
```

# android - Android，如何通过广播接收器接收主页按钮点击？

> ID：13302167
> 
> 赞同：2
> 
> 时间：2012-11-09T04:35:25.620
> 
> 标签：android, broadcastreceiver, android-homebutton

在我的应用程序中，当用户通过单击注销按钮或按主页按钮关闭应用程序退出应用程序时，我需要向服务器发送注销请求。

按钮没有问题，结果如我所料。问题是如何获得主页按钮。根据我的研究，无法使用`onKeyDown(int keyCode, KeyEvent event)`，因为我们可以使用返回按钮。

我正在考虑的解决方案是注册接收器并在单击主页按钮时发送广播。所以通过接收器我可以启动一个服务来向服务器发送注销请求。

我目前的问题是每次单击时都无法获得主页按钮。这是我写的代码：

**清单.xml**

```
<application ...

        <receiver android:name="HomeButtonReceiver" >
            <intent-filter>
                <category android:name="android.intent.category.HOME" />
            </intent-filter>
        </receiver>

</application> 
```

**主页按钮接收器**

```
public class HomeButtonReceiver extends BroadcastReceiver {

    private final String TAG = "HomeButtonReceiver";

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.i(TAG, "inside onReceive()...");
    }
} 
```

任何意见/建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:34:12.370

为什么不使用`dispatchKeyEvent`函数。它可以拦截HOME键按下事件。

```
@Override
    public boolean dispatchKeyEvent(KeyEvent keyevent) {

        if (keyevent.getKeyCode() == KeyEvent.KEYCODE_HOME) {
            //Do here what you want
            return true;
        }
        else
            return super.dispatchKeyEvent(event);
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:38:41.977

你能做的就是这样

创建您的主页按钮事件捕获器

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(keyCode==KeyEvent.KEYCODE_HOME){
       //Send your own custom broadcast message
    }
    return super.onKeyDown(keyCode, event);
} 
```

现在您可以创建一个广播接收器，以便您可以接收您的消息

您可以参考[此处](http://mobisys.in/blog/2012/01/android-sending-receiving-broadcast-messages/)和[此处](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/kXNk5PQ2ri8)了解如何发送广播消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T05:40:36.443

如果您只需要了解用户何时退出应用程序，为什么不`onPause(..)`使用`Activity`?

# c# - LINQ - 合并两个查询并从第一个查询中排除项目

> ID：13302168
> 
> 赞同：1
> 
> 时间：2012-11-09T04:35:36.343
> 
> 标签：c#, linq, entity-framework

我很确定这属于“UNION”场景，但我真的只是在寻找解决我的问题的最佳方法（即使它不是 UNION）。

我有一个看起来像这样的查询：

```
var query = context.AffiliateConfigurations.Where(x => x.AffiliateId == affiliateId).Select(config => new ViewModels.ConfigurationItem
                {
                    ConfigurationId = config.AffiliateConfigurationId,
                    ConfigKey = config.ConfigKey,
                    ConfigValue = config.ConfigValue,
                    UpdatedDate = config.UpdatedDate,
                    ConfigurationType = ViewModels.ConfigurationType.Affiliate
                }); 
```

我想要做的是向该查询添加更多结果。我有另一个名为 SiteConfiguration 的表，它具有完全相同的架构，但我只想从该表中添加原始查询中不存在 ConfigKey 的行。

我目前有以下类似的东西（并且它有效），但我正在寻找一种“纯”的 LINQ 方式来做到这一点：

```
var items = context.AffiliateConfigurations.Where(x => x.AffiliateId == affiliateId).Select(config => new ViewModels.ConfigurationItem
    {
        ConfigurationId = config.AffiliateConfigurationId,
        ConfigKey = config.ConfigKey,
        ConfigValue = config.ConfigValue,
        UpdatedDate = config.UpdatedDate,
        ConfigurationType = ViewModels.ConfigurationType.Affiliate
        }).ToList();

var query = context.SiteConfigurations.Select(config => new ViewModels.ConfigurationItem
{
    ConfigurationId = config.SiteConfigurationId,
    ConfigKey = config.ConfigKey,
    ConfigValue = config.ConfigValue,
    UpdatedDate = config.UpdatedDate
});

foreach (var item in query)
{
    if (items.All(x => x.ConfigKey != item.ConfigKey))
    {
        items.Add(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:13:45.547

所以你的问题是`"I have two collections and i want to merge them.how do i exclude items from the second collection,if the item's property is matching with another item's property on the first list."`

是的 LINQ 的 UNION 是您在这种情况下所需要的

您需要做的就是为您的`ConfigurationItem`

```
class ConfigEqualityComparer : IEqualityComparer<ConfigurationItem>
{

    public bool Equals(ConfigurationItem a, ConfigurationItem b)
    {
        if (a.ConfigKey == b.ConfigKey)
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    public int GetHashCode(ConfigurationItem a)
    {
            //do some hashing here
            //int hCode = IntegerField1 ^ IntegerField2;
            return hCode.GetHashCode();
    }

} 
```

这就是您所需要的。您现在可以运行 UNION 查询并获得预期的输出。

```
 var comparer = new ConfigEqualityComparer();
 var result = Enumerable.Union<ConfigurationItem>(items, query, comparer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:03:41.817

我认为 LINQ Union 运算符是您想要的。您只需要创建一个实现`IEqualityComparer<T>`项目接口的类。这是一些演示代码。在没有比较器的情况下尝试`foreach`查看包含的欺骗，或者将它们删除。我在 LINQPad 中运行代码，如果您使用的是 Visual Studio，则需要将该`Main`方法移动到一个类中并调用它。

```
void Main()
{
    List<DataObject> set1 = new List<DataObject>();
    List<DataObject> set2 = new List<DataObject>();

    set1.Add(new DataObject("a"));
    set1.Add(new DataObject("b"));
    set1.Add(new DataObject("c"));
    set1.Add(new DataObject("d"));
    set1.Add(new DataObject("e"));

    set2.Add(new DataObject("c"));
    set2.Add(new DataObject("d"));
    set2.Add(new DataObject("e"));
    set2.Add(new DataObject("f"));
    set2.Add(new DataObject("g"));
    set2.Add(new DataObject("h"));

    // try as  
    // foreach (DataObject d in set1.Union(set2)) {
    // and dupes will be present

    foreach (DataObject d in set1.Union(set2, new DOComparer())) {
        Console.WriteLine(d);
    }
}

// Define other methods and classes here
public class DataObject {
    public DataObject(string value) {
        Value = value;
    }
    public string Value {get;private set;}

    public override string ToString() {
        return Value;
    }
}

public class DOComparer:IEqualityComparer<DataObject> {
    public bool Equals(DataObject do1, DataObject do2) {
        return do1.Value.Equals(do2.Value);
    }

    public int GetHashCode(DataObject d) {
        return d.Value.GetHashCode();
    }
} 
```

# javascript - jQuery 或 onClick Div 淡入淡出

> ID：13302172
> 
> 赞同：-3
> 
> 时间：2012-11-09T04:35:58.640
> 
> 标签：javascript, jquery

如果这是在错误的部分，我深表歉意..

有人可能会指向我的脚本或教程：

当我点击某个东西时，比如一个“x”，我会点击它，然后它会在点击时消失。

如果你明白我的意思，有人能指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:39:29.427

请熟悉谷歌。

然后熟悉[http://docs.jquery.com/Tutorials:How_jQuery_Works](http://docs.jquery.com/Tutorials:How_jQuery_Works)

[在http://www.jsfiddle.net](http://www.jsfiddle.net)上尝试一些代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T04:56:26.130

[参考](http://jsfiddle.net/8bCAg/)

```
$('someclass/id').click(function() {
$('someclass/id').fadeOut();
}); 
```

[检查这个](https://stackoverflow.com/questions/3453710/fadeout-div-after-onclick-event-problem)

```
$('a').toggle(
function() { $('#us').fadeIn(); },
function() { $('#us').fadeOut(); }
); 
```

[.fadeToggle()](http://api.jquery.com/fadeToggle/)

显示（效果，[选项]，[速度]，[回调]）[jQuery UI](http://jqueryui.com/show/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T04:38:29.287

参考这个：[http ://www.webdesignerwall.com/demo/jquery/](http://www.webdesignerwall.com/demo/jquery/)

有针对不同 UI 元素的小教程，有很好的解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T04:41:26.623

很容易你可以用谷歌搜索。

```
jQuery('#divId').click(function(){
  jQuery(this).hide('slow'); //this will give a little animated effect.
 // or
  jQUery(this).fadeOut('slow');
}); 
```

[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/) http://api.jquery.com/hide/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T04:41:35.493

这描述了如何在单击时淡入和淡出元素

```
 $(document).ready(function(){ 
  $("#elemntID").click(function() { 
    $("#ID_of_element_need_to_fade_in").fadeIn("slow");
  });

  $("#elemntID").click(function() { 
    $("#ID_of_element_need_to_fade_out").fadeOut("slow"); 
  });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T10:40:47.107

采用

```
$('#id').click(function() {
$('#id').fadeIn();
$('#id').fadeOut(); 

});
[link][1]
<script>
$("button:first").click(function() {
$("p:first").fadeToggle("slow", "linear");
});
$("button:last").click(function () {
$("p:last").fadeToggle("fast", function () {
 $("#log").append("<div>finished</div>");
});
});
</script> 
```

# java - 如何从 google api 响应中获取电子邮件 ID

> ID：13302177
> 
> 赞同：0
> 
> 时间：2012-11-09T04:36:31.993
> 
> 标签：java, google-api, google-oauth

我可以使用 oath2 从 Google API 响应中获取用户信息。但我不知道如何单独获得这些回复。

**我从 Google Api 得到的响应：** *

```
Access token: ya29.AHES6ZQ3QxKxnfAzpZasdfd23423NuxJs29gMa39MXV551yMmyM5IgA 
     {
     "id": "112361XXXXXXXXXXX",
     "name": "Ansuman XX",
     "given_name": "Ansuman",
     "family_name": "Singh",
     "link": "https://plus.google.com/XXXXXXXXXXXXXXXXX",
     "gender": "male",
     "birthday": "0000-03-18",
     "locale": "en"
    }
    Original Token: ya29.AHES6ZQ3QxKxnfAzpZu0lYHYu8sdfsdafdgMa39MXV551yMmyM5IgA New Token: ya29.AHES6ZQ3QxKxnfdsfsdaYHYu8TNuxJs29gMa39MXV551yMmyM5IgA 
```

**但我只想将“id”和“name”单独保存在我的数据库表中。我怎样才能做到这一点？**

通过使用下面的代码，我得到了上述响应/输出。

```
 public static void main(String[] args) throws IOException 
          {

            -------------------------
            -------------------------
            -------------------------        

            String accessToken = authResponse.accessToken;
            GoogleAccessProtectedResource access = new GoogleAccessProtectedResource(accessToken, TRANSPORT, JSON_FACTORY, CLIENT_ID, CLIENT_SECRET, authResponse.refreshToken); 
            HttpRequestFactory rf = TRANSPORT.createRequestFactory(access);
            System.out.println("Access token: " + authResponse.accessToken); 
            String url = "https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token="   + authResponse.accessToken;
                final StringBuffer r = new StringBuffer(); 
                    final URL u = new URL(url);
                    final URLConnection uc = u.openConnection();
                    final int end = 1000;
                    InputStreamReader isr = null;
                    BufferedReader br = null; 
                        isr = new InputStreamReader(uc.getInputStream());
                        br = new BufferedReader(isr);
                        final int chk = 0;
                        while ((url = br.readLine()) != null)
                        {
                            if ((chk >= 0) && ((chk < end)))
                            {
                                r.append(url).append('\n');
                            }
                         } 
              System.out.print("");
              System.out.println();
 System.out.print(" "+   r ); //this is printing at once but i want them individually
              access.refreshToken();
 System.out.println("Original Token: " + accessToken + " New Token: " + access.getAccessToken());
          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:56:56.153

好吧，您可以在整个生成的 JSON 对象上使用像[这样](http://code.google.com/p/json-simple/)的 JSON 库（围绕简单性设计；[此处](http://code.google.com/p/json-simple/wiki/DecodingExamples)的示例），或者您可以使用自己的正则表达式代码。类似以下的内容可能适用于后者：

```
//.... other existing code
String pat = "\"(.*)\": \"(.*)\"";
Pattern pattern = Pattern.compile(pat);
Matcher matcher = null;
Map<String,String> map = new HashMap<String,String>();

while ((url = br.readLine()) != null) {
    if ((chk >= 0) && ((chk < end))) {  
        matcher = pattern.matcher(url);
        if(matcher.find()) {
            map.put(matcher.group(1), matcher.group(2));
        }
        //r.append(url).append('\n');
    }
} 
System.out.println(map.get("id"));
//... rest of code 
```

库方法可能是矫枉过正，但可能会处理数据类型转换等。也将处理非字符串数据类型与我悲伤的正则表达式。

# android - XMPP（带有 smack） - 添加朋友

> ID：13302178
> 
> 赞同：1
> 
> 时间：2012-11-09T04:36:35.387
> 
> 标签：android, xmpp, smack, subscriptions

在我的聊天应用程序中，当我必须添加朋友时，我必须遵循这个过程 -

假设 A->B ist：A 将向 B 发送订阅数据包（服务器条目显示 NONE 订阅） iind - B 将向 A 发送订阅数据包（服务器条目将是 - TO/FROM） iiird - B 将再次向 A 发送订阅数据包(服务器条目 TO/FROM ) ivth - A 将订阅的数据包发送给 B (服务器条目 BOTH )

每次向相关用户发送通知并允许发送相应的数据包后。

我想这样做-

当 A 向 B 发送好友请求（将向 B 发送通知 - 并且服务器条目应该是 TO/FROM ）并且由 B 接受与否，如果他接受它，那么服务器条目应该立即成为 BOTH。

请告诉我如何通过仅发送两组订阅数据包来实现相同的目的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T10:20:39.620

AFAIK 这只能在客户端/库级别完成：您必须实现客户端，以便对于每个确认的订阅请求，将另一个订阅请求发送回初始请求者。

但是您将始终有 4 个步骤/数据包要发送给“朋友”到 JID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:53:16.727

这将根据适当的规范实现，因此尝试更改它是没有意义的。

这不是 Smack 定义的行为，而是 XMPP 规范定义的行为。

# c# - DevExpress Gridview - 根据特定条件在 C# 中格式化行

> ID：13302186
> 
> 赞同：2
> 
> 时间：2012-11-09T04:37:56.760
> 
> 标签：c#, devexpress

我正在使用 DevExpress GridView 并通过 C# 代码绑定数据。

我的要求是根据我在代码逻辑中执行的计算来更改行颜色。

我想遍历所有可用的行，如果行单元格值与条件的结果匹配，我需要更改颜色。

我在网上看到了示例和示例源，但似乎没有任何东西可以让我解决这个问题。他们中的大多数都在使用 XAML 代码或使用 DataBinding 或在 DataBound 期间等。我不太习惯使用 inotifyvaluechange。

期待您的支持和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:03:24.003

试试这个 DevExpress Gridview

```
using DevExpress.XtraGrid.Views.Grid;

private void gridView1_RowStyle(object sender, 
DevExpress.XtraGrid.Views.Grid.RowStyleEventArgs e) {
   GridView View = sender as GridView;
   if(e.RowHandle >= 0) {
      string category = View.GetRowCellDisplayText(e.RowHandle, View.Columns["Category"]);
      if(category == "Beverages") {
         e.Appearance.BackColor = Color.Salmon;
         e.Appearance.BackColor2 = Color.SeaShell;
      }            
   }
} 
```

**输出**

![在此处输入图像描述](../Images/73aa75c60cba491bd7f42e91499fbb6f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T05:07:23.073

```
private void grvAssesse_RowCellStyle(object sender, DevExpress.XtraGrid.Views.Grid.RowCellStyleEventArgs e)
{
  if (e.RowHandle >= 0)
  {
    GridView View = sender as GridView;        
    if (Condition)
    {
      e.Appearance.ForeColor = Color.Red;
    }
  }
} 
```

您需要全局设置条件，基于该条件网格将为每一行加载执行此事件。

**有关更多详细信息，请参阅：** [GridView](http://documentation.devexpress.com/#WindowsForms/CustomDocument758)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:58:12.837

您可以处理 HtmlRowPrepared 事件以更改行的颜色。

以下是可以帮助您的示例：

```
 protected void ASPxGridView1_HtmlRowPrepared(object sender, DevExpress.Web.ASPxGridView.ASPxGridViewTableRowEventArgs e) {
        if (e.RowType != GridViewRowType.Data) return;                    
            e.Row.BackColor = System.Drawing.Color.LightCyan; // Changes The BackColor of ENTIRE ROW
            e.Row.ForeColor = System.Drawing.Color.DarkRed; // Change the Font Color of ENTIRE ROW
    } 
```

您还可以设置一些条件，以便仅对几行进行着色，例如：

```
 protected void ASPxGridView1_HtmlRowPrepared(object sender, DevExpress.Web.ASPxGridView.ASPxGridViewTableRowEventArgs e) {

    if (e.RowType != GridViewRowType.Data) return;       
     int VALUE = Convert.ToInt32(e.GetValue("COLUMNNAME"));
          if (VALUE < 20)          
       {
                e.Row.BackColor = System.Drawing.Color.LightCyan; // Changes The BackColor of ENTIRE ROW
                e.Row.ForeColor = System.Drawing.Color.DarkRed; // Change the Font Color of ENTIRE ROW
        }
} 
```

# sql - SQL查询优化

> ID：13302187
> 
> 赞同：0
> 
> 时间：2012-11-09T04:38:07.027
> 
> 标签：sql, query-optimization

在幻灯片[http://www.slideshare.net/billkarwin/models-for-hierarchical-data](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)中，我看到了一个 sql 代码（第 22 页）：

```
INSERT INTO Comments (author, comment)
VALUES (‘Ollie’, ‘Good job!’);

SELECT path FROM Comments
WHERE comment_id = 7;

UPDATE Comments
SET path = $parent_path || LAST_INSERT_ID() || ‘/’
WHERE comment_id = LAST_INSERT_ID(); 
```

我认为我们可以优化它：

```
SELECT path FROM Comments
WHERE comment_id = 7;

INSERT INTO Comments (author, comment, path )
VALUES (‘Ollie’, ‘Good job!’,  $parent_path || LAST_INSERT_ID() || ‘/’); 
```

我对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:59:42.903

是的，单个插入比插入后更新要好，但在这种情况下，自动生成的 id(?) 也被用作列值。路径中使用的 LAST_INSERT_ID() 不是当前正在执行的插入语句的 id，而是最后（上一个）插入的 id。

# ruby-on-rails - Rails 长期 gem 未按预期验证

> ID：13302190
> 
> 赞同：4
> 
> 时间：2012-11-09T04:38:14.870
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, chronic

我正在尝试将日期“03/20/1985”输入到名为“生日”的文本字段中，并将其插入列类型为“日期”的数据库字段中。

当我输入时`10/20/1985`，我收到错误“生日无效”，但是当我输入时`20/10/1985`，它工作得很好。

从我一直在阅读的所有文档中，慢性应将“10/20/1985”解析为 mm/dd/yyyy，但似乎将其解析为 dd/mm/yyyy。

我怎样才能将日期解析为 mm/dd/yyyy？

/models/user.rb

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :authentication_keys => [:login]

  # Virtual attribute for authenticating by either username or email
  # This is in addition to a real persisted field like 'username'
  attr_accessor :login

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username, :login, :first_name, :last_name, :home_phone, :cell_phone, :work_phone, :birthday, :home_address, :work_address, :position, :company

  validate :birthday_is_date
  validate :position, :presence => true

  require 'chronic'

  # validate the birthday format
  def birthday_is_date 
    errors.add(:birthday, "is invalid") unless Chronic.parse(birthday)
  end

  # validates email or username when logging in
  def self.find_first_by_auth_conditions(warden_conditions)
    conditions = warden_conditions.dup
    if login = conditions.delete(:login)
      where(conditions).where(["lower(username) = :value OR lower(email) = :value", { :value => login.downcase }]).first
    else
      where(conditions).first
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T13:50:28.260

如果值作为日期存储在数据库中，Rails 将在赋值时将值从字符串强制转换为 Ruby 日期。我认为它可能使用内置`Date.parse`方法（[docs](http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/Date.html#method-c-parse)）：

```
Date.parse "2012-10-20"
# => #<Date 2012-10-20 ...>

Date.parse "20-10-2012"
# => #<Date 2012-10-20 ...>

Date.parse "10-20-2012"
# => ArgumentError: invalid date 
```

在这种情况下，您希望避免强制并获得原始字符串以使用 Chronic 进行解析。这是[虚拟属性](http://asciicasts.com/episodes/16-virtual-attributes)的理想用例。有几种方法可以做到这一点，这样的事情应该让你开始

```
class User < ActiveRecord::Base
  validate :birthday_is_date

  # an explicit implementation
  def birthday_string
    if @birthday_string
      @birthday_string
    elsif birthday.present?
      birthday.strftime("%d-%m-%Y")
    else
      ""
    end
  end

  # a shorter implementation
  def birthday_string
    @birthday_string || birthday.try(:strftime, "%d-%m-%Y")
  end

  def birthday_string=(value)
    @birthday_string = value
    self.birthday = parse_birthday
  end

  private

  def birthday_is_date
    errors.add(:birthday_string, "is invalid") unless parse_birthday
  end

  def parse_birthday
    Chronic.parse(birthday_string)
  end
end 
```

然后`birthday_string`在您的表单中使用，而不是`birthday`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T04:55:21.423

两者都对我有用，也许您需要更新。

还：

```
Chronic.parse '2/10/1985'
#=> 1985-02-10 12:00:00 +0800
Chronic.parse '2/10/1985', :endian_precedence => :little
#=> 1985-10-02 12:00:00 +0800 
```

# asp.net - 显示来自 CSV 的数据

> ID：13302192
> 
> 赞同：0
> 
> 时间：2012-11-09T04:38:39.317
> 
> 标签：asp.net, ajax, jquery, asp.net-ajax

我有 CSV 格式的数据，我在前端使用 asp.net 使用 AJAX、JSON 显示它，但它没有在搜索引擎中编入索引。是否有其他方法可以在前端显示来自 CSV 的数据，以便在搜索引擎中对其进行索引？什么 Id 数据也是 XML 格式的。我应该选择哪种格式，它会比 CSV 受益吗？

问候， 阿西夫·哈米德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:58:53.830

为了让您的文件被索引，它只需要一个链接以使其对网络爬虫公开可用。

您可以创建一个特殊情况以使该文件在 IIS 中可用，或者您可以编写一个[HttpHandler](http://msdn.microsoft.com/en-us/library/system.web.ihttphandler.aspx)来提供文件的原始内容。无论哪种方式，您只需要一种让网络爬虫发现 URL 并获取内容的方法。

# java - 创建的字符串对象数

> ID：13302200
> 
> 赞同：0
> 
> 时间：2012-11-09T04:39:47.510
> 
> 标签：java

下面的代码会产生多少个 String 对象？

```
String s1="Hello"; //"Hello" is in String Pool Object #1
String s2 = s1.substring(2,3);//String object #2
String s3 = s1.toString();
String s4 = new StringBuffer(s1).toString(); //String Object #3 
```

这是我正在阅读的一本练习 Java 书籍的问题。没有答案，所以我不确定我的答案是否正确。是否创建了 3 个或 5 个字符串对象？toString() 会创建一个新的 String 对象吗？我在网上查了一下，发现 toString() “返回对象的字符串表示形式”。我不太明白这是什么意思。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T04:43:05.217

它将创建三个。你的分析是正确的。

> toString() 会创建一个新的 String 对象吗？我在网上查了一下，发现 toString() “返回对象的字符串表示形式”。

这是 generic 的描述`Object.toString`，但`String`会覆盖它以提供更具体的行为。它的版本是这样记录的：

> 这个对象（它已经是一个字符串！）本身被返回。

[[链接](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toString%28%29)]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T04:42:41.950

我认为你是对的。String 对象的数量将是 3 而不是 5。

`s1.toString();`javadoc 说：

> 这个对象（它已经是一个字符串！）本身被返回。

```
new StringBuffer(s1) 
```

创建新的字符串对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T04:52:07.397

Whenever you use a new keyword to create a string object it will create a new String object no matter the string is already present in the pool of strings

```
String s1="Hello"; //this will create a new string object and add it to the pool of strings

String s2 = s1.substring(2,3);//String object #2 again creates a string and adds it in the pools of strings
String s3 = s1.toString();//this will not create a new object but simply refer to already existing object in the pool of strings
String s4 = new StringBuffer(s1).toString(); //String Object #3 this will create a new object as you are using new keyword 
```

an example

```
public class Main {
    public static void main(String[] args) {
        String s1 = "abc";//created a string and added it to pool of string
        String s2 = "abc";//no need to create a new object
        String s3 = new String("abc");
        System.out.println("s1 = " + s1);
        System.out.println("s2 = " + s2);
        System.out.println("s2 = " + s3);
        System.out.println("s1 == s2? " + (s1 == s2));//proves that the ref refer to same object
        System.out.println("s1 == s3?"+ (s1==s3));
        System.out.println("s1.equals(s2)? " + (s1.equals(s2)));    
  }
} 
```

the output

```
s1 = abc
s2 = abc
s3 = abc
s1 == s2? true
s1 == s3? false
s1.equals(s2)? true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T05:28:19.847

您的问题的答案取决于实现，并且具有误导性。在代码片段的末尾可能有 2 到 4 个“字符串对象”，具体有多少取决于 JVM，以及它对小字符串的执行程度（如果有的话）。正如已经指出的 JDK 文档指定 String.toString() 返回对象，所以答案应该是“2 或 3”；但是，依赖这种行为是非常愚蠢的。

我说这具有误导性的原因是您从不关心“字符串对象的数量”。Java 中的对象重量非常轻，您从不担心计算它们。

我要补充的唯一条件是，虽然您从不关心对象计数，但您确实关心引用。在字符串的情况下，一个令人讨厌的惊喜可能是对底层 char 数组的引用数量。字符串对象是共享 char 数组的享元，忘记这一点会导致严重的内存泄漏。用尽 java 程序堆的一种非常简单的方法是：

```
while(!multiGBFileEOF) {
    String bigString = readMultiMBString();
    int index = findSmallFeature(bigString);
    String featureOfInterest = bigString.substring(index, index+4);
    featureList.add(featureOfInterest);
} 
```

featureList 最终应该最多只有几个 10KB（每个 ~1000 个列表项 *（arrayref 4-8 个字节 + 对象 12-20 个字节 + char 数组 8-16 个字节），即微不足道。但是因为一些常见的 JVM 实现共享由 substring() 生成的字符串的后备数组，这最终可能会尝试将整个文件存储在内存中。解决方案是通过调用来强制底层数组的显式副本`String copy = new String(featureOfInterest)`。这里你不关心if`copy`和`featureOfInterest`是否是同一个对象，只要`copy`不给 char 后面的数组起别名`bigString`。

祝你学习顺利。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T05:39:04.030

它将创建 3 个 String 对象。String 类的 toString() 方法实现打印内容；它不会创建任何新对象。

# javascript - 使用 HTML 和 Jquery 创建网格而不使用插件

> ID：13302204
> 
> 赞同：1
> 
> 时间：2012-11-09T04:40:31.673
> 
> 标签：javascript, jquery, html

选择网格的值并且应该出现在网格行中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:16:52.867

试试这个，

**jQuery代码**

```
<script language="javascript" type="text/javascript" src="jquery-1.8.2.js"></script>

<script language="javascript" type="text/javascript">
    $(document).ready(function() {
        $('#selectbox').change(function(){
            var val = $(this).val();
            $('.changedValue').html(val);
        });
    });                
</script> 
```

**HTML 代码**

```
<form>
    <select name="selectbox" id="selectbox">
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
    </select>
</form>

<table width="400" border="1" cellpadding="2" cellspacing="2">
    <tr>
        <td>Changed Value</td>
        <td class="changedValue">&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T04:51:49.263

you can create grid with jQuery Check below link for grid view with jQuery..

[http://www.trirand.net/default.aspx](http://www.trirand.net/default.aspx)

[http://reconstrukt.com/ingrid/](http://reconstrukt.com/ingrid/)

# ruby-on-rails - 基本活动记录查询

> ID：13302211
> 
> 赞同：1
> 
> 时间：2012-11-09T04:41:52.147
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.1, ruby-on-rails-3.2

我有一个带有三个模型的 Rails 应用程序，称为作者、书籍和作者身份。例如，一本书通过称为作者身份的联合模型有许多作者，而作者通过称为作者身份的联合模型有许多书

```
class Author < ActiveRecord::Base
  attr_accessible :name
  has_many :authorships
  has_many :books, :through => :authorships
end

class Book < ActiveRecord::Base
  attr_accessible :name, :author_ids
  has_many :authorships
  has_many :authors, :through => :authorships
end

class Authorship < ActiveRecord::Base
  attr_accessible :book_id, :author_id
  belongs_to :book
  belongs_to :author
end 
```

现在我的问题是，我怎样才能找到作为相似作者的任何选定的书籍

例如，`<% book = Book.first %>` 像

```
<% book.similar_authors.each do |book| %>
  #......
<% end %> 
```

我将使用什么样的查询来定义`similar_authors`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:12:03.380

你的关系似乎已经定义了它。试试这个：

```
<% book.authors.each do |author| %>
  <% author.books.each do |book| %>
    #......
  <% end %>
<% end %> 
```

或者，如果你只想有一个迭代器，并且没有欺骗，可能是这样的（这与上面相同）：

```
<% book.authors.map { |author| author.books }.flatten.uniq.sort.each do |book|  %>
  #......
<% end %> 
```

而且，要绕一圈，可能在您的模型中（这与上面相同）：

```
def books_from_similar_authors
  authors.map { |author| author.books }.flatten.uniq.sort
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:02:41.433

你可以这样做，

**例如**

假设你`author name`是`"xyz"`，

在你的模型中

```
def similar_authors(name)
  where("author_name = ?", name )
end 
```

在你的控制器中

```
book.similar_authors('xyz') # you will get all books that have author_name is 'xyz' 
```

如果你想优化，那么你也可以`scope`为此做一个

# php - Web 服务获取 而不是 JSON

> ID：13302217
> 
> 赞同：0
> 
> 时间：2012-11-09T04:42:35.363
> 
> 标签：php, android, bufferedreader

我正在开发一个简单的 PHP 页面来生成 JSON 文本，这样我就可以测试我的应用程序（实际的服务器正在由另一个人开发），但我遇到了一个奇怪的错误。我的 PHP 页面只有这个：

```
<?php
header('Content-type: application/json');
$trip = array ('trip' => array  ( array ('departureStation' => $_GET['from'],
                'arriveStation' => $_GET['to'],
                'departureTime' => '08:00',
                'arriveTime' => '11:00',
                'date' => $_GET['date'],
                'duration' => '3',
                'distance' => '80',
                'price' => '5',
                'changeLine' => false,
                'waitTime' => '0',
                'passengers' => '13'),
                array ('departureStation' => $_GET['from'],
                'arriveStation' => $_GET['to'],
                'departureTime' => '11:00',
                'arriveTime' => '14:00',
                'date' => $_GET['date'],
                'duration' => '3',
                'distance' => '80',
                'price' => '5',
                'changeLine' => false,
                'waitTime' => '0',
                'passengers' => '29'),
                array ('departureStation' => $_GET['from'],
                'arriveStation' => $_GET['to'],
                'departureTime' => '17:00',
                'arriveTime' => '20:00',
                'date' => $_GET['date'],
                'duration' => '3',
                'distance' => '80',
                'price' => '5',
                'changeLine' => false,
                'waitTime' => '0',
                'passengers' => '45')));

echo json_encode($trip);
?> 
```

我检查并返回一个有效的 JSON，但是当我这样做时

```
URL url = new URL("http://xxx.xxx.x.xx/consult.php" + param);

con = (HttpURLConnection) url.openConnection();
con.setReadTimeout(10000);      /* milliseconds */
con.setConnectTimeout(15000);   /* milliseconds */
con.setRequestMethod("GET");
con.setDoInput(true);

con.connect();

BufferedReader reader = new BufferedReader(new InputStreamReader(con.getInputStream(), "UTF-8" ));
payload = reader.readLine(); 
```

有效载荷变量只得到一个`<br />`

我知道那是 PHP 上的东西，因为我在页面上输入，复制了输出，再次回到 PHP 代码，然后放

```
$echo 'json_copied_from_the_page_here'; 
```

并且有效，有效负载正在正确读取页面。所以我很好奇，为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:14:04.093

您只阅读一行，其余输出应位于该行之后。

尝试这个

编辑：不能在字符串上使用 +=。

```
String temp = null;
String output = "";
while ((temp = reader.readLine()) != null) {
    output = output + temp;
} // end while 
```

如果有效，请查看输出。

# java - 如何设置 iText 中使用的字体的编码？

> ID：13302221
> 
> 赞同：0
> 
> 时间：2012-11-09T04:42:57.287
> 
> 标签：java, encoding, itext

如何在 iText 中设置编码。当我用另一种语言写作时，它会写空格。任何想法？我找到了:) 但现在我不知道如何为表格中的数据制作这种字体你知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:48:11.063

因此，您正在创建一个包含单元格的表格，并且您希望单元格中的文本具有不同于 Helvetica 的字体。

这很容易：您已经知道如何根据评论中的答案创建 a`Font`和 a `Paragraph`（或 a `Phrase`）。

现在在构造函数中`PdfPCell`使用 a （*文本模式*）或添加一个with （*复合模式*）。`Phrase`*`Paragraph``addElement()`*

 **现在，当您使用 时`addCell()`，传递该`PdfPCell`实例而不是`String`.

另外：在开始编码之前阅读文档：http: [//itextpdf.com/book](http://itextpdf.com/book)**

# javascript - 如何使用 jquery 在调用函数中传递函数的变量？

> ID：13302226
> 
> 赞同：0
> 
> 时间：2012-11-09T04:43:26.990
> 
> 标签：javascript, jquery, scope

使用以下代码我无法在调用函数更改中获取 this.select 的值...见下文

```
function getSelection(selectionType) {
    this.select = selectionType;
    alert(this.select); // works
    this.getFile = function() {
        $(".file").change(function() {
            alert($(this).attr("id")); // works
            alert(this.select); // says undefined
            if ($(this).attr("id") == this.select) {
                alert("test"); // no display
            }
        });
    };
}​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T04:47:08.823

缓存`this`：

```
function getSelection(selectionType) {
    var that = this; // <========================
    this.select = selectionType;
    alert(this.select);

    this.getFile = function() {
        $(".file").change(function() {
            alert($(this).attr("id"));
            alert(that.select);
            if ($(this).attr("id") == that.select) {
                alert("test");
            }
        });
    }
}​ 
```

# google-apps-script - 'new Charts.newColumnChart().setDataSourceUrl' 在 Google Apps 脚本中是否有效

> ID：13302230
> 
> 赞同：0
> 
> 时间：2012-11-09T04:44:18.767
> 
> 标签：google-apps-script

我无法使以下代码正常工作：

```
function doGet () {
  var colChart = new Charts.newColumnChart()
  .setDataSourceUrl('https://docs.google.com/a/1ins.us/spreadsheet/tq?&key=<mysecretkey>&tq=select%20N,%20S,%20count(A)%20Where%20A%20is%20not%20Null%20group%20by%20N,S')
  .build();
  var myapp = UiApp.createApplication().setTitle('Report for problems');
  var mypanel = myapp.createVerticalPanel();
  mypanel.add(colChart);
  myapp.add(mypanel);
  return myapp;
} 
```

我收到此错误：

> 方法“newColumnChart”被调用，[object Object] 作为“this”值，无法转换为 $Proxy715 类型。

这发生在包含`setDataSourceUrl()`. 那里有什么问题？

我已经考虑了许多可能的问题，并且已经尝试了以下方法：

*   这是通过 Google Apps for Business 帐户使用的。
*   我发布了谷歌电子表格。
*   我在 chrome 浏览器中测试了 url 并得到了 JSON

    ```
    google.visualization.Query.setResponse({
          "version":"0.6",
          "status":"ok",
          "sig":"983199261",
          "table":{"cols":[{...... 
    ```

*   我尝试通过单击部署为**Web 应用程序从 GAS IDE 启动它**

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:35:49.387

一开始就摆脱那个新的。是`Charts.newColumnChart()`，不是`new Charts.newColumnChart()`。

# html - 网站的简单读入文件

> ID：13302234
> 
> 赞同：1
> 
> 时间：2012-11-09T04:44:46.070
> 
> 标签：html, css, text

我想用css样式制作一个简单的单页html页面

（这是关于某些主题的首选帮助页面。）页面的内容会非常罗嗦，所以我想将内容保留在页面之外。

我使用了这样的简单读入代码

```
<?php

    $f = fopen("unitednations.txt", "r");

    // Read line by line until end of file
    while(!feof($f)) { 
        echo fgets($f) . "<br />";
    }

    fclose($f);

    ?> 
```

这很有效，因为它允许样式表中的所有内容都应用于传入的 txt 文件中的任何文本。所以它实际上只是页面的一部分。

但是，我计划将它托管在一个简单的地方，作为一个单页事件，我不想费心寻找一个提供 php 和所有爵士乐的免费主机。

就像 css 样式表一样，我想“链接”一个 txt 文件并在页面上转储。

Html 提供嵌入和对象代码，但这些不允许 CSS 做它的事情，我什至想将 html 代码（如链接）嵌入到文本文件中，并让页面像往常一样捕捉它。它适用于 php，我只想要一个类似的替代方案。

谢谢！

这是我计划做的涂鸦

![在此处输入图像描述](../Images/05d6313e7de13a54c902dc11b769862f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:36:25.740

您可以使用 jQuery 并替换 body 标记的 HTML。

不是，您将无法使用 Chrome 测试这些内容并打开本地文件，而不是从服务器打开文件（尽管服务器可以在本地运行）。在 IE 中测试。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
  $(function () {
    $('body').load('file_name.txt');
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:31:34.613

**Javascript**

这是使用 Javascript 的方法。

```
var contents = new XMLHttpRequest();
contents.open('GET', 'unitednations.txt');

contents.onreadystatechange = function() {
    document.getElementById('content').innerHTML=contents.responseText;
}
contents.send(); 
```

将 PATH TO YOUR FILE 替换为要加载的文件的路径。也不要忘记将内容（第 5 行）替换为要加载文本的元素的 id。

**评论**

这只有在用户启用了 Javascript 并且您只能导入您自己域的文件时才有效。更简单的方法是使用以下方法：

**框架**

```
<iframe src="unitednations.txt" frameborder="0"></iframe> 
```

不要忘记设置 iFrame 的宽度和高度；）。

# qt - Qt 简单的发布请求

> ID：13302236
> 
> 赞同：7
> 
> 时间：2012-11-09T04:45:01.103
> 
> 标签：qt, post

我正在寻找对网页进行非常简单的 POST 请求。该页面在 php 中，并将根据数据库检查发布的任何内容，然后如果该项目在数据库中，则以密钥响应。

我不知道如何在 Qt 中使用发布请求，或者如何获取返回的信息并将其存储回 Qt 中的变量中。任何帮助都将受到高度赞赏，因为我从 Qt 方面的空白开始。

我看过其他例子：

[https://stackoverflow.com/questions/11348359/qt-https-post-request](https://stackoverflow.com/questions/11348359/qt-https-post-request)

[如何使用 QNetworkAccessManager 将数据发布到 url](https://stackoverflow.com/questions/2599423/how-can-i-post-data-to-a-url-using-qnetworkaccessmanager)

但我看不到如何存储来自 php 脚本的响应

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-11-30T11:22:20.133

opc0de 以前的答案对我来说不是 POST，而是 GET。

这是如何执行 POST 请求

```
void xxx::postRequest(QByteArray & postData)
{
    QUrl url = QUrl("abc.com");

    QNetworkAccessManager * mgr = new QNetworkAccessManager(this);

    connect(mgr,SIGNAL(finished(QNetworkReply*)),this,SLOT(onFinish(QNetworkReply*)));
    connect(mgr,SIGNAL(finished(QNetworkReply*)),mgr,SLOT(deleteLater()));

    QHttpMultiPart http;

    QHttpPart receiptPart;
    receiptPart.setHeader(QNetworkRequest::ContentDispositionHeader, QVariant("form-data; name=\"data\""));
    receiptPart.setBody(postData);

    http.append(receiptPart);

    mgr->post(QNetworkRequest(url), http);
}

void xxx::onFinish(QNetworkReply *rep)
{

} 
```

从这里的文档[。](http://doc.qt.io/archives/qt-4.8/qhttpmultipart.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-03-30T20:18:38.720

```
QNetworkAccessManager * manager = new QNetworkAccessManager(this);

QUrl url("https://accounts.google.com/o/oauth2/token");
QNetworkRequest request(url);

request.setHeader(QNetworkRequest::ContentTypeHeader, "application/x-www-form-urlencoded");

QUrlQuery params;
params.addQueryItem("client_id", "...");
params.addQueryItem("client_secret", "...");
params.addQueryItem("code", "...");
// etc

connect(manager, SIGNAL(finished(QNetworkReply *)), this, SLOT(replyFinished(QNetworkReply *)));

manager->post(request, params.query().toUtf8()); 
```

[来源](https://www.qtcentre.org/threads/42545-HTTP-request-POST-in-QT-application?p=194678#post194678)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-09T08:08:23.037

将**QNetworkAccessManager**信号完成连接到您的插槽并使用**QNetworkReply**您应该阅读网页的所有内容。

这是一个 get 示例，它可以很容易地适应 post 方法。

```
void MainWindow::on_pushButton_clicked()
{
    QNetworkAccessManager * mgr = new QNetworkAccessManager(this);
    connect(mgr,SIGNAL(finished(QNetworkReply*)),this,SLOT(onfinish(QNetworkReply*)));
    connect(mgr,SIGNAL(finished(QNetworkReply*)),mgr,SLOT(deleteLater()));

    mgr->get(QNetworkRequest(QUrl("http://www.google.com")));

}

void MainWindow::onfinish(QNetworkReply *rep)
{
    QByteArray bts = rep->readAll();
    QString str(bts);
    QMessageBox::information(this,"sal",str,"ok");

} 
```

# python - 如何在python django中向美味的派返回json添加额外的对象

> ID：13302240
> 
> 赞同：8
> 
> 时间：2012-11-09T04:46:00.820
> 
> 标签：python, django, tastypie

在 Django 项目中，当我收到 JSON 响应时，我得到了两个对象

`data.meta`和`data.objects`

这是我的资源

```
class MyResource(ModelResource):
    def dehydrate(self, bundle):
        bundle.data["absolute_url"] = bundle.obj.get_absolute_url()
        bundle.data['myfields'] = MyDataFields
        return bundle
    class Meta:

        queryset = MyData.objects.all()
        resource_name = 'weather'
        serializer = Serializer(formats=['json'])
        ordering = MyDataFields 
```

现在我想要json中的其他字段，比如

`data.myfields`

但是如果我按照上述方式进行操作，那么该字段将添加到每个对象中，例如

`data.objects.myfields`

我能怎么做`data.myfields`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-30T15:54:44.027

恕我直言，更好的方法是使用[alter_list_data_to_serialize](http://django-tastypie.readthedocs.io/en/latest/resources.html?#Resource.alter_list_data_to_serialize)，该函数用于在做出响应之前覆盖/添加字段到数据：

```
 def alter_list_data_to_serialize(self, request, data):
        data['meta']['current_time'] = datetime.strftime(datetime.utcnow(), "%Y/%m/%d") 
        return data 
```

这样您就不会覆盖所有调用的所有 mimetype/状态代码，并且它更干净。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T05:38:38.180

一种方法是重写 Tastypie ModelResource 的`get_list`方法。

```
import json
from django.http import HttpResponse

...

class MyResource(ModelResource):

    ...

    def get_list(self, request, **kwargs):
        resp = super(MyResource, self).get_list(request, **kwargs)

        data = json.loads(resp.content)

        data['myfields'] = MyDataFields

        data = json.dumps(data)

        return HttpResponse(data, content_type='application/json', status=200) 
```

# c# - 基于 Windows 文件锁定错误的事件

> ID：13302243
> 
> 赞同：0
> 
> 时间：2012-11-09T04:46:18.013
> 
> 标签：c#, .net, windows, file, filelock

我正在尝试研究如何创建一个 dotnet 事件，当有人尝试访问我的计算机上共享的已锁定文件时触发该事件（如 compmgmt.msc 所示）。

有谁知道我怎么能做到这一点？

# java - 获取“Set-Cookie”标头

> ID：13302245
> 
> 赞同：7
> 
> 时间：2012-11-09T04:46:44.723
> 
> 标签：java, cookies, apache-httpclient-4.x

我正在尝试使用 apache httpclietn-4.2.2 获取“Set Cookie”标头并遇到一些问题。

Firebug 中的标头：

```
Set-Cookie  remixreg_sid=deleted; expires=Thu, 10-Nov-2011 04:32:30 GMT; path=/; 
domain=.vk.com remixapi_sid=deleted; expires=Thu, 10-Nov-2011 04:32:30 GMT; path=/; 
domain=.vk.com remixrec_sid=deleted; expires=Thu, 10-Nov-2011 04:32:30 GMT; path=/;
domain=.vk.com remixsid=0000000000000000000000000000000000000000000000000000; expires=Mon, 04-Nov-2013 16:10:24 GMT; path=/; domain=.vk.com 
```

我如何尝试获得它：

```
 //location is a header with url I need to do GET request to
 Header location = response.getFirstHeader("Location");
 HttpGet httpGet = new HttpGet(location.getValue());
 httpClient.getParams().setParameter(
 //tried to use different policies
 ClientPNames.COOKIE_POLICY, CookiePolicy.RFC_2965);
 Header [] allHeaders=response.getAllHeaders(); 
```

在 allHeaders 中，我有除“Set Cookie”之外的所有标题。我有这样的警告：

```
WARNING: Invalid cookie header: "Set-Cookie: remixlang=0; expires=Mon, 18-Nov-2013 
03:21:47 GMT; path=/; domain=.vk.com". Unrecognized cookie header 'Set-Cookie: 
remixlang=0; expires=Mon, 18-Nov-2013 03:21:47 GMT; path=/; domain=.vk.com'
Nov 09, 2012 4:31:41 AM org.apache.http.client.protocol.ResponseProcessCookies 
processCookies 
```

所以我认为问题在于“到期”日期。

我试图做的事情：

1）[无效的cookie标头：过期属性为空时无法解析过期属性](https://stackoverflow.com/questions/9500714/invalid-cookie-header-unable-to-parse-expires-attribute-when-expires-attribute) 创建自定义CookieSpec并尝试使用它：

```
 httpClient.getCookieSpecs().register("vkCookie", new CookieSpecFactory() {
     public CookieSpec newInstance(HttpParams params){
         return new VkCookieSpec();
         }
     });
HttpClientParams.setCookiePolicy(httpClient.getParams(), "vkCookie"); 
```

2) 尝试在 httpClient 参数中设置数据格式：

```
 httpClient.getParams().setParameter(CookieSpecPNames.DATE_PATTERNS, Arrays.asList("EEE, dd-MMM-yyyy HH:mm:ss z")); 
```

但我仍然收到这个警告。将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-09-14T08:15:11.020

我知道这是一个老问题。但是我遇到了同样的问题，只是想发布我的代码片段来解决它，特别是`CookieSpecs.STANDARD`明确设置（有关详细信息，请参阅[apache commons 规范](https://hc.apache.org/httpcomponents-client-ga/tutorial/html/statemgmt.html)）：

```
 RequestConfig globalConfig = RequestConfig.custom()
                .setCookieSpec(CookieSpecs.DEFAULT)
                .build();
        CloseableHttpClient httpClient = HttpClients.custom()
                .setDefaultRequestConfig(globalConfig)
                .build();
        RequestConfig localConfig = RequestConfig.copy(globalConfig)
                .setCookieSpec(CookieSpecs.STANDARD)
                .build();
        HttpGet httpGet = new HttpGet(url);
        httpGet.setConfig(localConfig); 

        // Request
        CloseableHttpResponse response = httpClient.execute(httpGet); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T09:59:14.927

*   您正在尝试使用 RFC 2965 兼容规范解析“Set-Cookie”标头，而 RFC 2965 仅接受“Set-Cookie2”标头。

*   有问题的 cookie 格式不正确。它包含非标准的 'expires' 属性，更糟糕的是，它包含一个保留字符（逗号），没有括起来引号。然而，鉴于这是一个非常常见的协议违规，HttpClient 应该能够使用“best_match”、“browser_compatibility”或“netscape_draft”策略解析此 cookie。

事实上，应该始终使用“best_match”策略，并让 HttpClient 根据 cookie 标头的组成选择最佳匹配策略。

# jquery - jQuery在右键单击时删除动态生成的li

> ID：13302247
> 
> 赞同：0
> 
> 时间：2012-11-09T04:47:02.163
> 
> 标签：jquery

我有一个网站需要能够通过添加和删除来创建收藏夹。我正在使用 jQuery 的 mousedown 和 contextMenu 让我走到这一步；但我无法删除/删除 li。删除li后，我需要更新数据库。生成的 ul/li 如下所示：

```
<div id="ctl00_updt_pnl">
    <ul id="ctl00_ul_0_button">
        <li id="ctl00_li_0_button"><a href="#" id="ctl00_a_0">myFavorites<!--[if gt IE 6]><!--></a><!--<![endif]--><!--[if lt IE 7]><table border="0" cellpadding="0" cellspacing="0"><tr><td><![endif]-->
            <ul id="ctl00_ul_1_button">
                <li id="ctl00_li_1_button_1" class="right">
                    <div id="ctl00_Panel_1" style="width:300px;"><input type="submit" name="ctl00$add_myFavorites" value="Add to myFavorites..." id="ctl00_add_myFavorites" class="right" style="color:Black;font-size:9pt;font-weight:bold;width:130px;float:left;" />&nbsp&nbsp&nbsp&nbsp<img title="Click to View How to use" class="right_openmenu" src="Scripts/jQuery_ContextMenu/images/lightning.png" alt="How to use Menu" style="border-width:0px;margin:0 25px 0 0;" />
                    </div>
                </li>

                <div>
                    <li class="right_li" id="li_49"><a class="right_li_href" href="">&nbsp;test 11-28 #18</a></li>
                    <li class="right_li" id="li_50"><a class="right_li_href" href="">&nbsp;test 11-28 #19</a></li>
                    <li class="right_li" id="li_51"><a class="right_li_href" href="">&nbsp;test 11-28 #20</a></li>
                    <li class="right_li" id="li_52"><a class="right_li_href" href="">&nbsp;test 11-28 #21</a></li>
                </div>
            </ul><!--[if lte IE 6]></td></tr></table></a><![endif]-->
        </li>
    </ul>
    <div id="ctl00_Panel_2" class="div_hf_favorite_name_css">
        <input type="submit" name="ctl00$ButtonHiddenDeleteFavorite" value="ButtonHiddenDeleteFavorite" id="ctl00_ButtonHiddenDeleteFavorite" class="css_deleteFavorite" style="display:none;" /><input type="hidden" name="ctl00$id_hf_favorite_name" id="ctl00_id_hf_favorite_name" value="0" />
    </div>
    <div id="ctl00_Panel_3" class="div_hf_li_to_be_deleted_css">
        <input type="hidden" name="ctl00$id_hf_li_to_be_deleted" id="ctl00_id_hf_li_to_be_deleted" />
    </div>
</div> 
```

我的jQuery代码如下：

```
$(document).ready(function() {
        // Was the  right-mousedown clicked?
            $(".right_li").mousedown(function(event) {
        // if (event.which == 3) {
        // $("#spanMouseButton").text('Right Button Clicked');
        //              }
            }); 
 //
 $(".right_li").contextMenu({ menu: 'my_favorites_Delete_Menu' }, function(action, el, pos) { contextMenuWork(action, el, pos); });
//
        function contextMenuWork(action, el, pos) {
                switch (action) {
                    case "delete":
                        {
            var msg = "Delete your favorite by the name you saved as: " + $(el).find(".right_li_href").text() + "?";                                
            var msg2 = $(el).find(".right_li_href").text();
        var li = $(this);
            li.remove();                            
        confirm(msg);
    // save the href in a hiddenfield for pass back to the codebehind (Ajax)
        $('.div_hf_favorite_name_css input[type=hidden]').val(msg2);                                
            break;
                        }                           
                    case "how_to":
                        {
                    $("#ShowInstructions").modal({
                                close: true,
                                onOpen: modalOpenShowInstructions,
                                onClose: modalOnClose,
                                persist: true,
                    containerCss: ({ width: "600px", height: "100%", marginLeft: "-300px", marginTop: "-100px", overflow: "auto" })
                            });
                            break;
                        }                       
                }
            }
 //
            function contextHowto() {               
                $("#ShowInstructions").modal({
                    close: true,
                    onOpen: modalOpenShowInstructions,
                    onClose: modalOnClose,
                    persist: true,
                    containerCss: ({ width: "600px", height: "100%", marginLeft: "-300px", marginTop: "-100px", overflow: "auto" })
                });
            }
//
            function confirm(message) {
                $("#confirm").modal({
                    close: true,
                    overlayId: 'confirmModalOverlay',
                    containerId: 'confirmModalContainer',
                    onClose: modalOnClose,
                    onShow: function modalShow(dialog) {
                        dialog.overlay.fadeIn('slow', function() {
                            dialog.container.fadeIn('fast', function() {
                                dialog.data.hide().slideDown('slow');
                            });
                        });
                        dialog.data.find(".confirmmessage").append(message);
                        // Yes button clicked
                        dialog.data.find("#ButtonYes").click(function(ev) {
                            ev.preventDefault();
                            $.modal.close();        
 //         remove the li on the confirmation of the delete
                            var li = $(this);
                        li.remove();
 //             don't postback for now
                            false;

 // Here's where to go in the code-behind on the postback                                        //$("[id*=ButtonHiddenDeleteFavorite]").click();
//
                        });
                    }
                });
            }
 //
            function modalOpenAddCustomer(dialog) {
                dialog.overlay.fadeIn('fast', function() {
                    dialog.container.fadeIn('fast', function() {
                        dialog.data.hide().slideDown('slow');
                    });
                });
                dialog.data.find(".modalheader span").html("Add New Customer");                     
            }
 //                 
            function modalOpenShowInstructions(dialog) {
                dialog.overlay.fadeIn('fast', function() {
                    dialog.container.fadeIn('fast', function() {
                        dialog.data.hide().slideDown('slow');
                    });
                });
                dialog.data.find(".modalheader span").html("How to use the Favorites");
                // if the user clicks "yes"
                dialog.data.find("#Show_Instructions").click(function(ev) {
                    ev.preventDefault();
                    //Perfom validation
                    if (Page_ClientValidate("addCustomer")) {
                        $.modal.close();
                        $("#ButtonHiddenAddCustomer").click();
                    };
                });
            }
  //                
                    function modalOnClose(dialog) {
                dialog.data.fadeOut('slow', function() {
                    dialog.container.slideUp('slow', function() {
                        dialog.overlay.fadeOut('slow', function() {
                $.modal.close(); // must call this to have SimpleModal                   

        // re-insert the data correctly and
        // clean up the dialog elements                         
 //
                        });
                    });
                });
            };
        });
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:15:59.097

如果您需要将事件绑定到将动态创建的 li，请改用 .on() 处理程序

```
$(document).ready(function() {

    $('body').on('mousedown', '.right_li', function(event) {
        if (event.which == 3) {
            $(this).remove();
            // Your Code Here
        }
    });

}); 
```

# javascript - 如何用两个 CSS 文件设置一个 HTML 文件的样式？

> ID：13302249
> 
> 赞同：2
> 
> 时间：2012-11-09T04:47:05.797
> 
> 标签：javascript, html, css, responsive-design

我必须创建两个版本的网络应用程序：一个用于横向，一个用于纵向。但我需要像我们通常在 iPad 中那样运行它们；在纵向模式下，纵向版本应该可以工作，如果模式是横向，那么横向版本。

如何用一个 HTML 文件和两个 CSS 文件制作网站？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T04:51:50.607

use the css3 media query

```
/* iPads (landscape) */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T04:52:44.550

Look into responsive design. Twitter's Bootstrap project includes a series of responsive layouts, but the method is pretty basic: you define your CSS based on the current width of the device.

[http://twitter.github.com/bootstrap/scaffolding.html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

Here's an article explaining CSS3 and media queries: [http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T05:00:47.523

以下是`css media queries`标准设备：-

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T05:07:00.063

这个可以帮助你

[http://ajaxian.com/archives/iphone-windowonorientationchange-code](http://ajaxian.com/archives/iphone-windowonorientationchange-code)

它检测浏览器的方向变化并调用**java Script**函数。在函数内部，您可以根据自己的喜好加载您的**css 类**:)

# java - 在 maven 项目中使用 log4j

> ID：13302252
> 
> 赞同：2
> 
> 时间：2012-11-09T04:47:18.510
> 
> 标签：java, maven

我无法创建日志文件

我在我的 pom.xml 中添加了

```
<dependency>
  <groupId>log4j</groupId>
  <artifactId>log4j</artifactId>
  <version>1.2.16</version>
</dependency> 
```

然后我将 log4j.properies 放在资源文件夹下

```
# Define the root logger with appender file
log = /home/soumya/log4j
log4j.rootLogger = DEBUG, FILE

# Define the file appender
log4j.appender.FILE=org.apache.log4j.FileAppender
log4j.appender.FILE.File=${log}/log.out

# Define the layout for file appender
log4j.appender.FILE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILE.layout.conversionPattern=%m%n 
```

然后在我的java代码中我使用

```
public class Test
{
static Logger logger = Logger.getLogger(Test.class.getName());
 public void testLog(){
 logger.info("testing ..!!!");
} 
```

但是运行时出现以下错误并且未创建日志文件！

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation 
```

我的 Maven 版本是 Apache Maven 2.2.1 (rdebian-6)，我正在使用 eclipse Indigo 感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T04:54:22.810

SLF4j 库需要手动包含在您的 pom.xml 中

```
 <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-api</artifactId>
                <version>1.6.1</version>
        </dependency>
        <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>jcl-over-slf4j</artifactId>
                <version>1.6.1</version>
        </dependency>
        <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-log4j12</artifactId>
                <version>1.6.1</version>
        </dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-10T16:07:35.283

所以，我确实有这样的

在 pom.xml 中导入依赖项

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>log4j-over-slf4j</artifactId>
        <version>1.7.30</version>
    </dependency> 
```

在我导入class.java之后，有这样的

```
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger; 
```

在我这样做之后，在类中创建变量并在您的代码中使用

```
final Logger logger = (Logger) LogManager.getLogger(TechLearningv3Application.class);

logger.info("Clientes Encontrados com função findAll():"); 
```

在此处打印此项目 [![在此处输入图像描述](../Images/12f8a71a01328609f19c414450a8bc69.png)](https://i.stack.imgur.com/Llvyo.png)

参考 - [https://www.sentinelone.com/blog/maven-log4j2-project/](https://www.sentinelone.com/blog/maven-log4j2-project/)

# windows-8 - 在 Windows 8 上的 Visual Studio 2012 上安装 xna

> ID：13302253
> 
> 赞同：1
> 
> 时间：2012-11-09T04:47:34.983
> 
> 标签：windows-8, visual-studio-2012, xna-4.0

我刚刚在上面安装了 Windows 8 Ultimate 和 Visual Studio 2012 Ultimate。后来我下载了windows phone 8 sdk并安装在上面，这样我就可以得到xna game studio 4.0了。

现在我可以为 Windows 和 Xbox 创建除 xna 游戏之外的所有类型的应用程序。缺少一个模板。

我尝试浏览它并看到微软正在停止使用 XNA 的几篇文章？是真的吗？

我想为 Windows 8 创建一个触摸感知 Windows 桌面游戏。

有什么解决办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T09:12:19.950

首先，您必须为 Windows Marketplace 客户端安装游戏

下载： http: [//www.xbox.com/en-US/LIVE/PC/DownloadClient](http://www.xbox.com/en-US/LIVE/PC/DownloadClient)

完成上述客户端软件的安装后，安装您的 XNA Studio 4，它应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:26:02.537

默认情况下，Windows 应用商店应用程序是触控感知的，这与 XNA 的使用无关。事实上，XNA 不是构建 Windows 应用商店应用程序的选项。

如果您确实有要部署到 Windows 应用商店的 XNA 应用程序，则不能直接执行此操作。但是，您可以使用开源项目[MonoGame](http://monogame.codeplex.com/)，它实现了 XNA 框架 API 并支持部署到 Windows 8、iOS、Mac OSX、Linux 和 Android。

**更新：**

如果您想继续为 Windows 8 桌面应用程序进行 XNA 开发，我们将继续支持 - 请查看[Aaron Stebner 的博客文章](http://blogs.msdn.com/b/astebner/archive/2012/09/29/10354437.aspx)了解详细信息。

# xml - ISO schematron 无法验证 XML 文档中的处理指令

> ID：13302259
> 
> 赞同：2
> 
> 时间：2012-11-09T04:48:51.180
> 
> 标签：xml, validation, xslt, schematron

**需求描述**：我们的需求是在输入的xml文档中寻找目标为PubTbl且具有伪属性@rth的处理指令。这些处理指令特定于 Arbortext Editor，它们以表格形式呈现在整个 XML 文档中。

```
<?PubTbl row rht="0.76in"?> 
```

我们注意到，在我们的 xml 文档中的处理指令中，我们的 ISO Schematron 模式（如下所述）没有被触发。

*   ISO Schematron 不验证处理指令吗？
*   如果 ISO Schematron 验证了处理指令，我需要注意任何设置/参数更改吗？

# ISO Schematron 模式

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://purl.oclc.org/dsdl/schematron" id="vert-space-tables_schema"
    queryBinding="xslt2" schemaVersion="iso">
    <title>Forcing vertical space in content within tables</title>
    <pattern id="vert-space-tables_pattern">
        <title>Forcing vertical space in content within tables</title>
        <rule id="vert-space-tables_processing-inst_rule" context="processing-instruction('PubTbl')"
            abstract="false">
            <report test="contains(.,'rht=')"> 
                The table have got processing instructions you are looking altered to modify
                pagination. </report>
        </rule>
    </pattern>
</schema> 
```

我正在使用附加的“ant-schematron-2010-04-14.jar”zip 文件中的 ISO schematron 样式表，使用 ant 任务

```
 <taskdef name="schematron" classname="com.schematron.ant.SchematronTask"
        classpath="${lib}/ant-schematron-2010-04-14.jar; ${lib}/resolver.jar"/>

<schematron schema="${schema}/vert-space-tables/vert-space-tables.sch" failonerror="false"
            queryLanguageBinding="xslt2" format="svrl" OutputDir="${dist}/vert-space-tables"
            outputFilename="fail.xml" debugMode="true" failOnError="false" diagnose="true" classpathref="saxon-loc">
            <fileset dir="${xml}/vert-space-tables" includes="Forcing_vertical_space_in_content_within_tables-fail.xml"/>            
            </schematron> 
```

“debug.xslt”——还附加了从 ISO schematron 生成并针对 xml 文档进行验证的 XSL 样式表。

在 debug.xslt 中（在文件的底部），我注意到 apply-templates 只处理元素节点，它永远不会处理处理指令，这是为什么呢？

```
<xsl:template match="@*|node()" priority="-2" mode="M1">
              <xsl:apply-templates select="*****" mode="M1"/>
           </xsl:template> 
```

**debug.xslt 内容如下：**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xsl:stylesheet xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                xmlns:saxon="http://saxon.sf.net/"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:schold="http://www.ascc.net/xml/schematron"
                xmlns:iso="http://purl.oclc.org/dsdl/schematron"
                xmlns:xhtml="http://www.w3.org/1999/xhtml"
                version="2.0"><!--Implementers: please note that overriding process-prolog or process-root is 
    the preferred method for meta-stylesheets to use where possible. -->
<xsl:param name="archiveDirParameter"/>
   <xsl:param name="archiveNameParameter"/>
   <xsl:param name="fileNameParameter"/>
   <xsl:param name="fileDirParameter"/>
   <xsl:variable name="document-uri">
      <xsl:value-of select="document-uri(/)"/>
   </xsl:variable>

   <!--PHASES-->

<!--PROLOG-->
<xsl:output xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
               method="xml"
               omit-xml-declaration="no"
               standalone="yes"
               indent="yes"/>

   <!--XSD TYPES FOR XSLT2-->

<!--KEYS AND FUNCTIONS-->

<!--DEFAULT RULES-->

<!--MODE: SCHEMATRON-SELECT-FULL-PATH-->
<!--This mode can be used to generate an ugly though full XPath for locators-->
<xsl:template match="*" mode="schematron-select-full-path">
      <xsl:apply-templates select="." mode="schematron-get-full-path"/>
   </xsl:template>

   <!--MODE: SCHEMATRON-FULL-PATH-->
<!--This mode can be used to generate an ugly though full XPath for locators-->
<xsl:template match="*" mode="schematron-get-full-path">
      <xsl:apply-templates select="parent::*" mode="schematron-get-full-path"/>
      <xsl:text>/</xsl:text>
      <xsl:choose>
         <xsl:when test="namespace-uri()=''">
            <xsl:value-of select="name()"/>
         </xsl:when>
         <xsl:otherwise>
            <xsl:text>*:</xsl:text>
            <xsl:value-of select="local-name()"/>
            <xsl:text>[namespace-uri()='</xsl:text>
            <xsl:value-of select="namespace-uri()"/>
            <xsl:text>']</xsl:text>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:variable name="preceding"
                    select="count(preceding-sibling::*[local-name()=local-name(current())                                   and namespace-uri() = namespace-uri(current())])"/>
      <xsl:text>[</xsl:text>
      <xsl:value-of select="1+ $preceding"/>
      <xsl:text>]</xsl:text>
   </xsl:template>
   <xsl:template match="@*" mode="schematron-get-full-path">
      <xsl:apply-templates select="parent::*" mode="schematron-get-full-path"/>
      <xsl:text>/</xsl:text>
      <xsl:choose>
         <xsl:when test="namespace-uri()=''">@<xsl:value-of select="name()"/>
         </xsl:when>
         <xsl:otherwise>
            <xsl:text>@*[local-name()='</xsl:text>
            <xsl:value-of select="local-name()"/>
            <xsl:text>' and namespace-uri()='</xsl:text>
            <xsl:value-of select="namespace-uri()"/>
            <xsl:text>']</xsl:text>
         </xsl:otherwise>
      </xsl:choose>
   </xsl:template>

   <!--MODE: SCHEMATRON-FULL-PATH-2-->
<!--This mode can be used to generate prefixed XPath for humans-->
<xsl:template match="node() | @*" mode="schematron-get-full-path-2">
      <xsl:for-each select="ancestor-or-self::*">
         <xsl:text>/</xsl:text>
         <xsl:value-of select="name(.)"/>
         <xsl:if test="preceding-sibling::*[name(.)=name(current())]">
            <xsl:text>[</xsl:text>
            <xsl:value-of select="count(preceding-sibling::*[name(.)=name(current())])+1"/>
            <xsl:text>]</xsl:text>
         </xsl:if>
      </xsl:for-each>
      <xsl:if test="not(self::*)">
         <xsl:text/>/@<xsl:value-of select="name(.)"/>
      </xsl:if>
   </xsl:template>
   <!--MODE: SCHEMATRON-FULL-PATH-3-->
<!--This mode can be used to generate prefixed XPath for humans 
    (Top-level element has index)-->
<xsl:template match="node() | @*" mode="schematron-get-full-path-3">
      <xsl:for-each select="ancestor-or-self::*">
         <xsl:text>/</xsl:text>
         <xsl:value-of select="name(.)"/>
         <xsl:if test="parent::*">
            <xsl:text>[</xsl:text>
            <xsl:value-of select="count(preceding-sibling::*[name(.)=name(current())])+1"/>
            <xsl:text>]</xsl:text>
         </xsl:if>
      </xsl:for-each>
      <xsl:if test="not(self::*)">
         <xsl:text/>/@<xsl:value-of select="name(.)"/>
      </xsl:if>
   </xsl:template>

   <!--MODE: GENERATE-ID-FROM-PATH -->
<xsl:template match="/" mode="generate-id-from-path"/>
   <xsl:template match="text()" mode="generate-id-from-path">
      <xsl:apply-templates select="parent::*" mode="generate-id-from-path"/>
      <xsl:value-of select="concat('.text-', 1+count(preceding-sibling::text()), '-')"/>
   </xsl:template>
   <xsl:template match="comment()" mode="generate-id-from-path">
      <xsl:apply-templates select="parent::*" mode="generate-id-from-path"/>
      <xsl:value-of select="concat('.comment-', 1+count(preceding-sibling::comment()), '-')"/>
   </xsl:template>
   <xsl:template match="processing-instruction()" mode="generate-id-from-path">
      <xsl:apply-templates select="parent::*" mode="generate-id-from-path"/>
      <xsl:value-of select="concat('.processing-instruction-', 1+count(preceding-sibling::processing-instruction()), '-')"/>
   </xsl:template>
   <xsl:template match="@*" mode="generate-id-from-path">
      <xsl:apply-templates select="parent::*" mode="generate-id-from-path"/>
      <xsl:value-of select="concat('.@', name())"/>
   </xsl:template>
   <xsl:template match="*" mode="generate-id-from-path" priority="-0.5">
      <xsl:apply-templates select="parent::*" mode="generate-id-from-path"/>
      <xsl:text>.</xsl:text>
      <xsl:value-of select="concat('.',name(),'-',1+count(preceding-sibling::*[name()=name(current())]),'-')"/>
   </xsl:template>

   <!--MODE: GENERATE-ID-2 -->
<xsl:template match="/" mode="generate-id-2">U</xsl:template>
   <xsl:template match="*" mode="generate-id-2" priority="2">
      <xsl:text>U</xsl:text>
      <xsl:number level="multiple" count="*"/>
   </xsl:template>
   <xsl:template match="node()" mode="generate-id-2">
      <xsl:text>U.</xsl:text>
      <xsl:number level="multiple" count="*"/>
      <xsl:text>n</xsl:text>
      <xsl:number count="node()"/>
   </xsl:template>
   <xsl:template match="@*" mode="generate-id-2">
      <xsl:text>U.</xsl:text>
      <xsl:number level="multiple" count="*"/>
      <xsl:text>_</xsl:text>
      <xsl:value-of select="string-length(local-name(.))"/>
      <xsl:text>_</xsl:text>
      <xsl:value-of select="translate(name(),':','.')"/>
   </xsl:template>
   <!--Strip characters--><xsl:template match="text()" priority="-1"/>

   <!--SCHEMA SETUP-->
<xsl:template match="/">
      <svrl:schematron-output xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                              title="Forcing vertical space in content within tables"
                              schemaVersion="iso">
         <xsl:comment>
            <xsl:value-of select="$archiveDirParameter"/>   
         <xsl:value-of select="$archiveNameParameter"/>  
         <xsl:value-of select="$fileNameParameter"/>  
         <xsl:value-of select="$fileDirParameter"/>
         </xsl:comment>
         <svrl:active-pattern>
            <xsl:attribute name="document">
               <xsl:value-of select="document-uri(/)"/>
            </xsl:attribute>
            <xsl:attribute name="id">vert-space-tables_pattern</xsl:attribute>
            <xsl:attribute name="name">Forcing vertical space in content within tables</xsl:attribute>
            <xsl:apply-templates/>
         </svrl:active-pattern>
         <xsl:apply-templates select="/" mode="M1"/>
      </svrl:schematron-output>
   </xsl:template>

   <!--SCHEMATRON PATTERNS-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">Forcing vertical space in content within tables</svrl:text>

   <!--PATTERN vert-space-tables_patternForcing vertical space in content within tables-->
<svrl:text xmlns:svrl="http://purl.oclc.org/dsdl/svrl">Forcing vertical space in content within tables</svrl:text>

      <!--RULE vert-space-tables_processing-inst_rule-->
<xsl:template match="processing-instruction('PubTbl')" priority="1000" mode="M1">
      <svrl:fired-rule xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                       context="processing-instruction('PubTbl')"
                       id="vert-space-tables_processing-inst_rule"/>

            <!--REPORT -->
<xsl:if test="contains(., 'breakpenalty=&#34;-10000&#34;') or contains(., 'breakpenalty=&#34;2000&#34;') or contains(.,'rht=')">
         <svrl:successful-report xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                                 test="contains(., 'breakpenalty=&#34;-10000&#34;') or contains(., 'breakpenalty=&#34;2000&#34;') or contains(.,'rht=')">
            <xsl:attribute name="location">
               <xsl:apply-templates select="." mode="schematron-select-full-path"/>
            </xsl:attribute>
            <svrl:text> 
                The table have got processing instructions you are looking altered to modify
                pagination. </svrl:text>
         </svrl:successful-report>
      </xsl:if>
      <xsl:apply-templates select="*" mode="M1"/>
   </xsl:template>
   <xsl:template match="text()" priority="-1" mode="M1"/>
   <xsl:template match="@*|node()" priority="-2" mode="M1">
      <xsl:apply-templates select="*" mode="M1"/>
   </xsl:template>
</xsl:stylesheet> 
```

谢谢和问候，苏雷什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T08:24:04.253

当我运行这个 schematron 文件（从上面复制）时，我无法复制这个问题：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://purl.oclc.org/dsdl/schematron" id="vert-space-tables_schema"
  queryBinding="xslt2" schemaVersion="iso">
  <title>Forcing vertical space in content within tables</title>
  <pattern id="vert-space-tables_pattern">
    <title>Forcing vertical space in content within tables</title>
    <rule id="vert-space-tables_processing-inst_rule" context="processing-instruction('PubTbl')"
      abstract="false">
      <report test="contains(.,'rht=')"> 
        The table have got processing instructions you are looking altered to modify
        pagination. </report>
    </rule>
  </pattern>
</schema> 
```

针对这个xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
  <?PubTbl row rht="0.76in"?>  
</root> 
```

使用 Oxygen 14 的 schematron 实现，我收到以下消息：

```
Warning: unrecognized element svrl:schematron-output 
```

当我下载[http://schematron.googlecode.com/files/ant-schematron-2010-04-14.jar](http://schematron.googlecode.com/files/ant-schematron-2010-04-14.jar)并从中使用 iso_svrl_for_xslt2.xsl 来编译 schematron，然后针对示例 xml 运行它，我得到以下信息服务：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<svrl:schematron-output xmlns:svrl="http://purl.oclc.org/dsdl/svrl"
                        xmlns:xs="http://www.w3.org/2001/XMLSchema"
                        xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                        xmlns:saxon="http://saxon.sf.net/"
                        xmlns:schold="http://www.ascc.net/xml/schematron"
                        xmlns:iso="http://purl.oclc.org/dsdl/schematron"
                        xmlns:xhtml="http://www.w3.org/1999/xhtml"
                        title="Forcing vertical space in content within tables"
                        schemaVersion="iso"><!--   

         --><svrl:active-pattern document="file:/Users/nunes/Desktop/tmp/test.xml"
                        id="vert-space-tables_pattern"
                        name="Forcing vertical space in content within tables"/>
</svrl:schematron-output> 
```

然后，当我从同一个 jar 中针对 iso_schematron_message.xsl 运行时，我也收到以下消息：

```
Warning: unrecognized element svrl:schematron-output 
```

当我将您的 debug.xslt 与使用指定 jar 中的样式表生成的 xsl 进行比较时（在对它们都运行 Oxygen 的 tidy 以标准化空白之后），我看到了这些差异：

```
--- debug.xslt  2012-11-10 00:19:39.000000000 -0800
+++ iso.xsl     2012-11-10 00:19:14.000000000 -0800
@@ -310 +310 @@
-      test="contains(., 'breakpenalty=&#34;-10000&#34;') or contains(., 'breakpenalty=&#34;2000&#34;') or contains(.,'rht=')">
+      test="contains(.,'rht=')">
@@ -312 +312 @@
-        test="contains(., 'breakpenalty=&#34;-10000&#34;') or contains(., 'breakpenalty=&#34;2000&#34;') or contains(.,'rht=')"
+        test="contains(.,'rht=')" 
```

您确定您使用的是上面粘贴的 schematron 并使用正确的样式表解析它吗？

# c++ - 在 3rd 方库中扩展隐式转换

> ID：13302264
> 
> 赞同：2
> 
> 时间：2012-11-09T04:49:49.490
> 
> 标签：c++, explicit-conversion

**背景**

如果第三方库有类似的代码

```
class ThirdPartyClass
{
public:
    int value;

    ThirdPartyClass(int i) : value(i) {}
    ThirdPartyClass(const std::string& s) : value(0) {}

};

bool ThirdPartyFunction(int a, const ThirdPartyClass obj)
{
    return a == obj.value;
} 
```

然后可以像这样调用

```
ThirdPartyFunction(1, 1);
ThirdPartyFunction(1, std::string("Hello, World!")); 
```

**问题**

是否可以扩展此库（不修改第 3 方代码）以接受以下内容：

```
ThirdPartyFunction(1, "Hello, World!");   // const char* is not a string, implicit conversion fails 
```

我想避免需要写

```
ThirdPartyFunction(1, std::string("Hello, World!")); 
```

以上是简化的：在我的真实示例`ThirdPartyFunction`中是一个流操作符，并且`ThirdPartyClass`是一个允许与流操作符交互的类型包装器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:49:49.490

当我开始这个问题时，我怀疑不可能得到我想要的，因为其他类似的 SO 答案。

当我完成这个问题时，我想出了一个适合我需要的解决方法，它并不是真正的明确转换，所以你的里程可能会根据你需要实现的目标而有所不同。

我想我不妨把它贴出来，以防有人觉得它有用。

**解决方法**

添加以下定义：

```
class MyExtension : public ThirdPartyClass
{
public:
    MyExtension(const char*) : ThirdPartyClass(0) {}
};

bool ThirdPartyFunction(int a, MyExtension obj)
{
    return ThirdPartyFunction(a, (ThirdPartyClass)obj);
} 
```

现在可以调用

```
ThirdPartyFunction(1, "Hello, World!"); 
```

请注意，无需修改第三方代码即可完成上述操作。它确实依赖于函数的重载，因此如果您必须为许多函数执行此操作，则可能不可行。您也可以避免继承，只需在重载函数中转换`MyExtension`from `ThirdPartyClass`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T05:00:03.330

在将参数与参数匹配并选择函数重载时，C++ 允许进行一系列隐式转换。但是序列中只允许进行一次“用户定义的”转换（涉及函数调用）。传递字符串文字需要`std::string::string( char const * )`and `ThirdPartyClass::ThirdPartyClass( std::string const & )`，这是两个函数。C++ 不允许这样做，因为无限制的转换会使编译器变慢并产生不可预测的结果。

You have found a workaround by defining additional function overloads, so if that's viable, go for it :v) .

# assembly - 加载字符字节的 MIPS 无限循环/错误

> ID：13302265
> 
> 赞同：0
> 
> 时间：2012-11-09T04:49:50.287
> 
> 标签：assembly, mips

我试图让用户输入“Y”来重新启动程序（分支回到主程序）或“N”（分支到结束程序）。我正在使用系统调用操作码 12 读取单个字符

```
endCheck:
la $a0, newLine             # Print the newLine
li $v0, 4
syscall

la $a0, endPrompt           # print the Start over message
li $v0, 4
syscall

li $v0, 12              # take in char input
syscall
move $t0, $v0

lb $t1, ($t0)               # Load the char byte into t1

beq $t1, 89, main           # Go back to start if they entered 'Y'
bne $t1, 78, endCheck           # Ask the user again because input was not 'N' or 'Y'

li $v0, 10              
syscall 
```

我在 lb 线上遇到错误。即使我在数据段上分配了 1 个字节的空间并将输入读取为 1 个字符的字符串，我也会得到一个无限循环（当它编译正确时它总是分支回 endCheck）我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:56:21.667

使用`syscall 12`时，*字符本身*返回`$v0`. 它不会为您提供读取字符的地址。你可以完全省略`lb`。

因此，`$t1`当您应该使用`$t0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-02T18:29:40.620

这可能对任何看到这个旧帖子的人有用；系统调用 12 使用 spim 进入这个无限循环，但使用 qtspim 可以正常运行。spim 自 2010 年以来一直没有开发，但我正在使用它，因为它具有 emacs 集成。

# jquery - 如何使用 Jquery 删除特定值的链接标记

> ID：13302268
> 
> 赞同：1
> 
> 时间：2012-11-09T04:50:22.983
> 
> 标签：jquery, dom-manipulation

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T04:52:50.873

```
$('a').filter(function(){
    return this.innerHTML === 'N';
}).replaceWith('N'); 
```

[**Live DEMO**](http://jsfiddle.net/4reE4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:01:25.217

添加您选择的类名，以便您可以更好地控制存在的所有 td 元素中的 td 元素：例如：“report_td”

所以html看起来像这样：

```
<td align="center" class="report_td" headers="MPA_CHANGED">...</td> 
```

然后像这样尝试：

```
$(function(){
  $("td.report_td").each(function(i, e){
    var tdElement = $(e);
    var value = tdElement.find("a").text();
    if(value == "N") {
      tdElement.html("N");
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T05:07:30.577

```
$('a').each(function() {
if ( $(this).text() == 'N') {
    $(this).replaceWith('N');
}
}); 
```

# java - Errors when installing jdk 1.7 in linux

> ID：13302271
> 
> 赞同：7
> 
> 时间：2012-11-09T04:50:38.073
> 
> 标签：java, linux, oracle, installation, java-7

When I am installing jdk 1.7 in Oracle Linux by using the following

rpm -ivh jdk-7u9-linux-i586.rpm

However I am getting the following errors, how can I resolve these errors and install jdk 1.7?

Any help is highly appreciable.

Thanks

```
rpm -ivh /tmp/mnt/jdk-7u9-linux-i586.rpm
Preparing...                ########################################### [100%]
   1:jdk                    ########################################### [100%]
Unpacking JAR files...
        rt.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_09/jre/lib/rt.pack
        jsse.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_09/jre/lib/jsse.pack
        charsets.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_09/jre/lib/charsets.pack
        tools.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_09/lib/tools.pack
        localedata.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_09/jre/lib/ext/localedata.pack
        plugin.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_09/jre/lib/plugin.pack
        javaws.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_09/jre/lib/javaws.pack
        deploy.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_09/jre/lib/deploy.pack 
```

My Linux version is `oracle linux 5.5`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T05:12:09.473

1）我同意 Stephen C 的观点——这听起来绝对像是“许可”

2）“sudo”——你必须以“root”身份运行命令

3）做一个`ls -ld /usr/java/jdk1.7.0_09/`以确保目录存在。

如果没有，请考虑执行“mkdir /usr/java”并重新运行命令

4）这个帖子可能会迁移到“superuser.com”，这更多是用于管理问题

5) 如果您仍然没有解决方案，请务必指定您的 Linux 版本。

==================================================== =================================

附录：

该帖子给人的印象是JDK安装失败；听起来好像*没有任何*RPM 被提取出来。

根据随后的信息，这听起来只是一个警告：

> *   [http://www.geilthings.com/wiki/Java#1.7.x](http://www.geilthings.com/wiki/Java#1.7.x)
> 
> 在版本 7u9 中，显示以下与使用 Java Web Start 的 Java 应用程序工具中使用的文件扩展包相关的错误消息。这不会影响安装在您系统上的 JRE 的功能，由这种二进制包格式 (RPM) 制作。
> 
> *   [http://forums.fedoraforum.org/showthread.php?t=285076](http://forums.fedoraforum.org/showthread.php?t=285076)
> 
> 您已成功安装 Sun jdk-7u7-linux-x64.rpm。显示的错误信息是正常的。它们存在是因为这些文件在包中不存在。我在安装 Sun jre rpm 软件包时得到它们。只需忽略那些特定的错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T05:05:35.150

您可能需要以`rpm`root 身份调整命令。

另一种可能性是 SELinux 正在阻碍。您是否使用严格的策略启用了 SELinux 强制？

# scala - How do you Map a Cucumber DataTable to Scala?

> ID：13302274
> 
> 赞同：0
> 
> 时间：2012-11-09T04:51:07.347
> 
> 标签：scala, cucumber, cucumber-jvm

Code:

```
val someVariableIWantToSave    //I do not know what to do here

When("""^this request is sent to the XYZ service:$"""){ (requestData:DataTable) =>
 //// we might want to do somethign else with Datatable in the mapping of the       feature, nothing yet
var someVariableIWantToSave = requestData.asMaps()

} 
```

I mean the asMaps method returns a List[Map[String,String]] type and I want to save it to the someVariableIWantToSave val so I can use it in other steps, but I am not sure what to initialize it to and how to map it properly without a lot of code noise.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T00:33:47.150

这是我的解决方案。因为这只是使用 var 的测试代码在这里是可以的。我在测试中将它设置为全局，然后其他步骤可以使用它...

```
var request: java.util.List[java.util.Map[String, String]] = _

When("""^this request is sent to the blah service:$"""){ (requestData:DataTable) =>
request = requestData.asMaps() 
} 
```

`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:22:34.873

您不能“将某些内容保存到 a `val`”，因为`val`s 无法更改。由于您只是在此步骤中而不是在其他步骤中获取请求数据，因此您应该只有

```
When("""^this request is sent to the XYZ service:$"""){ (requestData:DataTable) =>
  val someVariableIWantToSave = requestData.asMaps()
  // do something with someVariableIWantToSave
} 
```

# flash - What is Flash's timeout (TTL) when loading variables? AS2

> ID：13302276
> 
> 赞同：0
> 
> 时间：2012-11-09T04:51:24.243
> 
> 标签：flash, load, timeout, actionscript-2, loading

I have a Flash AS 2 project.. it loads variables using the myData.load(link) function..during this loading period i have a "please wait" animation.... when data is it turns off this waiting animation and runs my routine ..

all is well.

but my problem is if this myData.load() TIMES OUT.. meaning if FLASH tries to load the variables when the internet is down , the waiting animation stays forever.. even when i reconnect to the internet already, flash seems to get stuck at that loading sequence..

now, i can simply fix this by putting a "timeout" on the waiting animation to turn off after a few seconds.. that is in sync when flash decides to stop sending/loading the variables (Time To Live/Time Out kind of thing).. hence i need to know how long flash waits, and how to detect it.

I hope flash can detect this time out, trigger my load function w/ a fail status at least .. w/ the obsolete loadVariables() function this is better coz atleast flash responds FAIL when it cant connect to the target URL..

This also avoids several problems for me when that function is re-called.

any ideas?

# android - Android FaceRecognition App -- Issues with CvOpenFileStorage()

> ID：13302277
> 
> 赞同：0
> 
> 时间：2012-11-09T04:51:24.843
> 
> 标签：android, face-recognition, javacv

I'm working on a face-recognition application on Android using JavaCV. I'm currently having issues accessing a facedata.xml file which will contain the data from the trained images. This is my code:

```
CvFileStorage fileStorage;

fileStorage = cvOpenFileStorage("/sdcard/external_sd/facedata.xml", null,         CV_STORAGE_WRITE, null); 

cvOpenFileStorage returns null 
```

I'm not sure if it is an issue with JavaCV or what i'm doing wrong. It should be pretty straight forward.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:17:15.637

我用过这个，似乎做同样的事情，我的代码是：

```
fileStorage = cvOpenFileStorage("/sdcard/FaceDB/facedata.xml", // filename
            null, // memstorage
            CV_STORAGE_WRITE, // flags
            null); // encoding 
```

仅从文件路径来看，我会说这很可能是错误的，因为在您的 sd 卡中有一个名为 external_sd 的文件夹看起来很奇怪。如果不是，那可能是另一个问题，我发现很多奇怪的问题很难用 JavaCV 解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T07:41:01.420

它接缝，cvOpenFileStorage 无法为 facedata.xml 分配内存。当我手动创建大尺寸（20meg）的 facedata.xml 时，它可以工作并且可以写入 facedata.xml 文件。因此，只需在您的目录（“/sdcard/external_sd/”）中复制一个大尺寸的 facedata.xml 文件。

# sql - Can SQL Server automatically create a new data file when MAXSIZE is reached?

> ID：13302279
> 
> 赞同：0
> 
> 时间：2012-11-09T04:51:31.747
> 
> 标签：sql, sql-server

I have a fast growing database. I make backups everyday but I want to avoid copying one large file daily. Rather, I want to have new data files automatically created (say, 10GB) so that I can create incremental backups and only copy the new files.

How do I do this? If I set a maxfile size, what happens when DB reaches this size?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:46:14.777

每周创建完整备份，每天创建差异备份，每小时创建事务日志备份（如果需要）。

要恢复数据库，您必须恢复上次完整备份、所有差异备份（从上次完整备份的那一刻起）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:05:51.780

我认为您需要查看差异备份。

[http://msdn.microsoft.com/en-us/library/ms175526.aspx](http://msdn.microsoft.com/en-us/library/ms175526.aspx)

# sql-server - 如何以 HH MM SS 格式计算总时间

> ID：13302287
> 
> 赞同：1
> 
> 时间：2012-11-09T04:52:28.747
> 
> 标签：sql-server, time-format

有一个表格，`HH MM SS`每个用户都有格式的使用详细信息，我如何计算`HH MM SS`格式的总使用量

![在此处输入图像描述](../Images/368fb2350d085d8a20eb2eeb62caf5e4.png)

`i want result to be total=6:47:33`
我知道这很基本但无法弄清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:03:18.817

你总是可以用老式的方式来做：

```
;WITH s AS (SELECT SUM(((Hours * 60) + Minutes) * 60 + Seconds) AS t FROM myTable)
SELECT CAST(t / 60 / 60 AS VARCHAR(10)) + ':' + RIGHT('0' + CAST((t / 60) % 60 AS VARCHAR(2)),2) + ':' + RIGHT('0' + CAST(t % 60 AS VARCHAR(2)), 2) AS total
FROM s 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/5e464/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:22:57.820

```
;with cte as (select (hours * (60*60))+(minutes * 60)+seconds as seconds from table)

select cast(sum(case when seconds = 0 then 0 else 1\. / (86400\. / seconds) end) as datetime)
from cte 
```

# javascript - Playing/Stopping an animation with a button

> ID：13302290
> 
> 赞同：1
> 
> 时间：2012-11-09T04:52:55.070
> 
> 标签：javascript, html, css

I've got a basic animation going, but I want to be able to start and stop it at will - preferably with a simple function and none/limited jquery.

So far I've simply been switching the play state from "paused" to "running", but this hasn't worked - ideas?

This is my code so far:

HTML:

```
<div id="Arena"></div>
<div id="PlayButton" class="Button" onClick="onclick = AnimationStart"></div> 
```

Javascript:

```
var AnimationStart;

var AnimationStart = function(){
    document.getElementById('Arena').style.animationPlayState="running";
    alert("The onclick is working!");
} 
```

CSS:

```
 <style type="text/css">

#Arena{
    color:#FFF;
    width:400px;
    height:300px;
    animation-iteration-count:infinite;
    animation-play-state:paused;
    animation:colorchange 20s;
    -moz-iteration-count:infinite;
    -ms-iteration-count:infinite;
    -o-iteration-count:infinite;
    -webkit-iteration-count:infinite;
    -moz-play-state:paused;
    -ms-play-state:paused;
    -o-play-state:paused;
    -webkit-animation-play-state:paused;
    -moz-animation:colorchange 20s;
    -ms-animation:colorchange 20s;
    -o-animation:colorchange 20s;
    -webkit-animation:colorchange 20s;
}

@keyframes colorchange{
    0%{background:#FFF;}
    5%{background:#000;}
    10%{background:#FFF;}
    15%{background:#000;}
    20%{background:#FFF;}
    25%{background:#000;}
    30%{background:#FFF;}
    35%{background:#000;}
    40%{background:#FFF;}
    45%{background:#000;}
    50%{background:#FFF;}
    55%{background:#000;}
    60%{background:#FFF;}
    65%{background:#000;}
    70%{background:#FFF;}
    75%{background:#000;}
    80%{background:#FFF;}
    85%{background:#000;}
    90%{background:#FFF;}
    95%{background:#000;}
    100%{background:#FFF;}                              
}

@-moz-keyframes colorchange{
    0%{background:#FFF;}
    25%{background:#000;}
    50%{background:#FFF;}
    75%{background:#000;}
    100%{background:#FFF;}
}

@-webkit-keyframes colorchange{

        0%{background:#FFF;}
    5%{background:#000;}
    10%{background:#FFF;}
    15%{background:#000;}
    20%{background:#FFF;}
    25%{background:#000;}
    30%{background:#FFF;}
    35%{background:#000;}
    40%{background:#FFF;}
    45%{background:#000;}
    50%{background:#FFF;}
    55%{background:#000;}
    60%{background:#FFF;}
    65%{background:#000;}
    70%{background:#FFF;}
    75%{background:#000;}
    80%{background:#FFF;}
    85%{background:#000;}
    90%{background:#FFF;}
    95%{background:#000;}
    100%{background:#FFF;}
}

@-ms-keyframes colorchange{
    0%{background:#FFF;}
    50%{background:#000;}
    100%{background:#FFF;}
}

@-o-keyframes colorchange{
    0%{background:#FFF;}
    50%{background:#000;}
    100%{background:#FFF;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T04:55:53.137

`onClick="onclick = AnimationStart"`应该`onClick="AnimationStart()"`

# django - View Does Not Exist

> ID：13302291
> 
> 赞同：0
> 
> 时间：2012-11-09T04:53:10.690
> 
> 标签：django, django-forms, django-views

I am a beginner in Django. When I run my program I got the following error.

```
Exception Type:     ViewDoesNotExist
Exception Value:    

Could not import polls.views.output. View does not exist in module polls.views. 
```

I have a search Function in my view:

```
def search(request):
    c = {}
    c.update(csrf(request))
    if request.method == 'POST': # If the form has been submitted...
        form = Search(request.POST) # A form bound to the POST data  
        if form.is_valid():
            search_query=form.cleaned_data['query']
            pi=add.add(search_query)
            return render_to_response('polls/output.html',{'pi': pi}) # Redirect after POST
    else:
        form=Search()
        return render_to_response(request, 'polls/search.html', c.update(form=form))

output.html
    <ul>
    {% for p in pi %}
       <li>{{p}}</li>
    {% endfor %}
    </ul> 
```

Can you please help me?

Here is my url file. I updated it. But, now it tells me syntax error at url.py file:

```
urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'mysite.views.home', name='home'),
    # url(r'^mysite/', include('mysite.foo.urls')),
    url(r'^polls/output$', 'polls.views.search')
    url(r'^polls/search$', 'polls.views.search'),
    url(r'^polls/$', 'polls.views.index'),
    url(r'^polls/(?P<poll_id>\d+)/$', 'polls.views.detail'),
    url(r'^polls/(?P<poll_id>\d+)/results/$', 'polls.views.results'),
    url(r'^polls/(?P<poll_id>\d+)/vote/$', 'polls.views.vote'),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:06:41.093

在您的 urls.py 中，您指的是`polls.views.output`但不在您的 views.py 中。`polls.views.search`如果您为该视图添加了 url，您可能需要更正它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:48:52.053

该错误与您的视图代码无关..检查您的导入

# linux - Dumping page table entries of a process in Linux

> ID：13302294
> 
> 赞同：4
> 
> 时间：2012-11-09T04:53:22.363
> 
> 标签：linux, linux-kernel, mmu

I was wondering if there is any utility/code in Linux (x86-64) that could dump each page table entries for a given process's (user) address space?

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T05:14:11.963

我认为`/proc/pid/pagemap`并`/proc/pid/maps`包含此信息，但我不知道有任何工具以更有意义的格式转储它们。

您始终可以使用内核文档自己编写它：

[http://www.kernel.org/doc/Documentation/vm/pagemap.txt](http://www.kernel.org/doc/Documentation/vm/pagemap.txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-23T23:43:39.633

我最近用来执行此操作的脚本：

```
cat /proc/self/maps | while read line
do
    echo ${line}
    echo ${line} | awk '{print $1}' | (
        IFS=- read start end
        start=$(( 0x${start} ))
        end=$(( 0x${end} ))
        addr=${start}
        while [ ${addr} -lt ${end} ]
        do
            printf "%08x: " ${addr}
            dd if=/proc/self/pagemap bs=8 skip=$(( addr / 4096 )) count=1 2>/dev/null | od -v -t x8 -A none
            addr=$(( addr + 4096 ))
        done
    )
done 
```

# ios - Access the selectedindex of UISegmentedControl in another view controller

> ID：13302295
> 
> 赞同：0
> 
> 时间：2012-11-09T04:53:35.487
> 
> 标签：ios, uisegmentedcontrol, xcode4.5

I have a UISegmentedControl in one of my ViewControllers.This VC has a 'close' button,so the user makes a selection using the segmentedcontrol and then closes the window by clicking on the 'close' button.I want to use the value selected by the user in another VC.But the selection of the segmentedcontrol is not persisted. If I close the window and open it,the segmented control switches back to its original state. I have not set the segmented control to be 'Momentary'. Any idea why the state isn't persisted? And how do I access the selected index in another view controller?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:13:33.923

状态不是持久的，因为当您关闭窗口时，视图控制器可能已被释放，并且当您再次打开它时会创建一个新实例（尽管这只是一个猜测，因为您没有发布任何代码）。

您如何获得该值取决于您的应用程序是如何设置的。您可以使用通知或委托方法。如果您需要更多细节，那么您需要提供有关您的应用程序结构的更多信息。

# perl - Perl脚本在分隔符后将多行连接成单行

> ID：13302301
> 
> 赞同：1
> 
> 时间：2012-11-09T04:54:25.777
> 
> 标签：perl

我从远程系统获取消息，响应是多行的，我必须根据分隔符将其转换为单行。

流阅读器的内容如下

```
Iam in first Line
Iam in second Line
:

Iam in third Line
Iam  in the forth Line
Iam in fifth Line
:

Iam in Sixth Line
Iam In seventh Line
IAm in Eighth Line
: 
```

响应的多行应转换为单行，直到分隔符“：”

请注意，我是从远程系统读取它，而不是从文件中读取它，它是连续的并且没有 eof。直到与远程系统的连接终止

输出应该是：

```
Iam in first Line Iam in second Line:
Iam in third Line Iam in the forth Line:
Iam in Sixth Line Iam In Seventh Line Iam in Eighth Line: 
```

有人可以帮忙提供一种方法或命令来实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T05:04:59.260

单程：

```
$ perl -pne 'chomp unless(/^:/);' file
Iam in first LineIam in second Line:
Iam in third LineIam  in the forth LineIam in fifth Line:
Iam in Sixth LineIam In seventh LineIAm in Eighth Line: 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T06:13:09.103

```
perl -p -e 's/\n/ /g;s/:[\s]*/:\n/g' your_file 
```

测试如下：

```
> cat temp
Iam in first Line
Iam in second Line
:

Iam in third Line
Iam  in the forth Line
Iam in fifth Line
:

Iam in Sixth Line
Iam In seventh Line
IAm in Eighth Line
:
> perl -p -e 's/\n/ /g;s/:[\s]*/:\n/g' temp
Iam in first Line Iam in second Line :
 Iam in third Line Iam  in the forth Line Iam in fifth Line :
 Iam in Sixth Line Iam In seventh Line IAm in Eighth Line :
> 
```

# c# - GridView 未从 DataBinding mysql 表中填充

> ID：13302314
> 
> 赞同：0
> 
> 时间：2012-11-09T04:55:35.523
> 
> 标签：c#, mysql, gridview

您好我正在尝试从 MySQL 数据库加载表并在 asp:GridView 组件中显示表的内容。

在 .aspx 文件中是我的 GridView 组件所在的位置。

```
<asp:GridView ID="ViewUsers" runat="server" 
onselectedindexchanged="ViewUsers_SelectedIndexChanged"  > 
</asp:GridView> 
```

在 .aspx.cs 文件中，我有我的 C# 代码来将 MySQL 表中的数据绑定到 GridView。但由于某种原因，它没有这样做。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using MySql.Data.Common;
using MySql.Data.MySqlClient;
using System.Data.SqlClient;
using System.Windows.Forms;
using System.Data;

public partial class viewAdmin : System.Web.UI.Page
{
    String MyConString = "SERVER=localhost;" +
                "DATABASE=logintable;" +
                "UID=root;" +
                "PASSWORD=;";
protected void Page_Load(object sender, EventArgs e)
{
        if ((String)Session["authorize"] != "1")
        {
            Response.Redirect("Default.aspx");
        }
        MySqlConnection conn = new MySqlConnection(MyConString);
        MySqlCommand cmd = new MySqlCommand("SELECT * FROM logindata;", conn);
        conn.Open();
        DataTable dataTable = new DataTable();
        MySqlDataAdapter da = new MySqlDataAdapter(cmd);

        da.Fill(dataTable);

        ViewUsers.DataSource = dataTable;
        ViewUsers.DataMember = dataTable.TableName;
}

} 
```

GridView 假设在我的页面加载时填充。任何帮助是极大的赞赏。哦，我也是 ASP.NET 的初学者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:00:20.203

您需要调用`DataBind()`GridView。

```
ViewUsers.DataSource = dataTable;
ViewUsers.DataBind(); 
```

另外，请确保关闭该数据库连接！

# android - 如何在 Android 上的夜间模式和日间模式主题之间切换？

> ID：13302317
> 
> 赞同：12
> 
> 时间：2012-11-09T04:55:48.883
> 
> 标签：android

我想使用设置/共享首选项在 Android 应用程序中设置夜间模式和白天模式主题。如何才能做到这一点？

# r - 使用 R 循环遍历回归中的协变量

> ID：13302323
> 
> 赞同：5
> 
> 时间：2012-11-09T04:56:33.950
> 
> 标签：r, loops, for-loop, regression

我正在尝试运行 96 个回归并将结果保存为 96 个不同的对象。更复杂的是，我希望模型中协变量之一的下标也改变 96 次。我几乎解决了这个问题，但不幸的是我碰壁了。到目前为止的代码是，

```
for(i in 1:96){

  assign(paste("z.out", i,sep=""), lm(rMonExp_EGM~ TE_i + Month2+Month3+Month4+Month5+Month6+Month7+Month8+Month9+
  Month10+Month11+Month12+Yrs_minus_2004 + 
  as.factor(LGA),data=Pokies))

} 
```

这适用于对象创建方面（例如，我有 z.out1 - z.out96），但我似乎无法让协变量上的下标也发生变化。

我在数据集中有 96 个变量，称为 TE_1、TE_2 ... TE_96。因此，TE_ 上的下标“i”需要更改以对应于我创建的每个对象。也就是说，z.out1 应该保存这个模型的结果：

```
z.out1 <- lm(rMonExp_EGM~ TE_1 + Month2+Month3+Month4+Month5+Month6+Month7+Month8+Month9+
  Month10+Month11+Month12+Yrs_minus_2004 + as.factor(LGA),data=Pokies) 
```

z.out96 应该是：

```
z.out96 <- lm(rMonExp_EGM~ TE_96+ Month2+Month3+Month4+Month5+Month6+Month7+Month8+Month9+
  Month10+Month11+Month12+Yrs_minus_2004 + as.factor(LGA),data=Pokies) 
```

希望这是有道理的。我很感激任何提示/建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T05:04:48.920

我会将结果放在一个列表中并避免使用`for loop`and`assign`语句

您可以使用 `reformulate`和的组合`update`来创建您的公式

```
orig_formula <- MonExp_EGM~ Month2+Month3+Month4+Month5+Month6+Month7+Month8+Month9+
 Month10+Month11+Month12+Yrs_minus_2004 + as.factor(LGA)

te_variables <- paste0('TE_', 1:96) 
# Or if you don't have a current version of R
# te_variables <- paste('TE', 1:96, sep = '_')  

 new_formula <- lapply(te_variables, function(x,orig = orig_formula) { 
    new <- reformulate(c(x,'.'))
    update(orig, new)})
 ## it works!    
new_formula[[1]]
## MonExp_EGM ~ TE_1 + Month2 + Month3 + Month4 + Month5 + Month6 + 
##   Month7 + Month8 + Month9 + Month10 + Month11 + Month12 + 
##   Yrs_minus_2004 + as.factor(LGA)
new_formula[[2]]
## MonExp_EGM ~ TE_2 + Month2 + Month3 + Month4 + Month5 + Month6 + 
## Month7 + Month8 + Month9 + Month10 + Month11 + Month12 + 
## Yrs_minus_2004 + as.factor(LGA)

models <- lapply(new_formula, lm, data = pokies) 
```

现在列表中应该有 96 个元素`models`

您可以命名它们以反映您最初计划的 nnames

```
names(models) <- paste0('z.out', 1:96)
# or if you don't have a current version of R
# names(models) <-paste('z.out', 1:96 ,sep = '' ) 
```

然后通过

```
 models$z.out5 
```

ETC

或创建所有模型的摘要

```
 summaries <- lapply(models, summary) 
```

ETC....

```
 # just the coefficients
 coefficients <- lapply(models, coef)

 # the table with coefficient estimates and standard.errors

 coef_tables <- apply(summaries, '[[', 'coefficients') 
```

# jquery - 我的wordpress网站加载时间长怎么减少呢？

> ID：13302331
> 
> 赞同：2
> 
> 时间：2012-11-09T04:58:04.323
> 
> 标签：jquery, css, image, wordpress

我正在使用本地语言运行一个 wordpress 网站，加载时间超过 20 秒，我从标题中删除了不需要的脚本和所有内容，但加载仍然需要时间。

这是网址 [http://www.thefirstdrive.com](http://www.thefirstdrive.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:03:08.653

如果您查看**Web-inspector**中的**Network 选项卡**，您可以找到每个资源加载所用的时间

 **![督察](../Images/5e0e0cfcf6c4524acfb35614d82b28ff.png)

**在您的情况下，上述图像**的加载花费的时间最多。你可以尝试以某种方式压缩它。它`1.66 MB`的大小，这是你的情况的瓶颈。**

# ruby - 如何在 Ruby 中设置布尔默认值？

> ID：13302335
> 
> 赞同：9
> 
> 时间：2012-11-09T04:59:11.010
> 
> 标签：ruby

对于其他类型的变量，我使用`||=`，但这不适用于布尔值（`x ||= true`即使 x 先前已分配为 false，也将 x 分配给 true）。

我认为这会起作用：

```
x = true unless defined?(x) 
```

但它没有：它出于某种原因将 x 分配给 nil 。（这里的解释将不胜感激。）

我确实知道一种有效的方法：

```
unless defined?(x)
  x = true
end 
```

但它比较冗长。有没有更简洁的方法来为 Ruby 中的布尔变量分配默认值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-09T05:22:22.793

您必须首先拥有`defined?` *，*否则解析器会在运行之前到达`x =`并定义`x`（使其成为） ：`nil``unless`

```
defined?(x) or x = true
x  #=> true 
```

```
x = false
defined?(x) or x = true
x  #=> false 
```

做一个`if`/`unless`块（而不是 post- `if`/ `unless`one-liner）也有效：

```
unless defined?(x)
  x = true
end
x  #=> true 
```

```
x = false
unless defined?(x)
  x = true
end
x  #=> false 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T05:01:55.210

Ruby中只有两个*非真*`false`值：和`nil`. 您需要做的就是区分这些。在自动执行此操作的新`//=`操作员出现之前，您会遇到以下问题：

```
if (x.nil?)
  x = true
end 
```

希望这可以在未来的 ruby​​ 版本中被缩写。99% 的时间你并不真正关心这两个非真实值之间的差异，但有 1% 的时间你这样做会变得很烦人，不得不如此冗长。

请记住，`defined?`运算符将始终`"local-variable"`针对该条件返回，因为该变量`x`被“定义”为局部变量。对比，`defined?(nope)`你会得到`nil`，因为那个变量不存在。Ruby 关心的是有问题的变量或常量，而不是该变量或常量是否已用值*定义。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T07:11:23.307

```
x = defined?(x) ? true  : false 
```

# php - 无法获取 mysqli 查询以将值插入 mysql

> ID：13302346
> 
> 赞同：0
> 
> 时间：2012-11-09T05:00:49.913
> 
> 标签：php, mysql

我是 mysql 查询的新手，只是无法将此 mysqli 语句插入 mysql。我的脚本设置或我的 $sql 有问题吗？（虽然我没有收到任何错误，只是没有插入）

```
 <?php

$login = "coolkidz";  //this line insets into username
$sname = "heyu";
$city = "beautiful";
$empass = "awesome";
$eusername = "what";
$mcode = "nice";

$sql = "INSERT INTO login(sname, city, empass, eusername, mcode, username) VALUES('$sname', '$city', '$empass', '$eusername', '$mcode', '$login')");

    $hostname_Database = "censored";
    $database_Database = "censored";
    $username_Database = "censored";
    $password_Database = "censored";

    $mysqli = new mysqli($hostname_Database, $username_Database, $password_Database, $database_Database); 
    if (mysqli_connect_errno()) {
       printf("Connect failed: %s\n", mysqli_connect_error());
       exit();
    }

    $result = $mysqli->query($sql);
    if (!$result) {
       printf("%s\n", $mysqli->error);
       exit();
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:09:01.430

你有这一行：

```
$sql = "INSERT INTO login(sname, city, empass, eusername, mcode, username) VALUES('$sname', '$city', '$empass', '$eusername', '$mcode', '$login')"); 
```

尝试将其更改为以下内容：

```
$sql = "INSERT INTO login(`sname`, `city`, `empass`, `eusername`, `mcode`, `username`) VALUES('$sname', '$city', '$empass', '$eusername', '$mcode', '$login')"; 
```

注意列名处的`，

`)`你在行尾有一个到很多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:11:42.020

```
Please update "..'$var'..." to  "..'" . $var . "'..." like ex:
=>
$sql = "INSERT INTO login(sname, city, empass, eusername, mcode, username) 
     VALUES('" . $sname . "', '" . $city . "', '" . $empass . "', '"
     . $eusername . "','" . $mcode . "', '" . $login . "')"; 
```

# python - 根据 .CSV 文件中字典键的出现次数进行计数

> ID：13302347
> 
> 赞同：1
> 
> 时间：2012-11-09T05:00:55.510
> 
> 标签：python, string, csv, dictionary

我有一个看起来像这样的字典：

```
{100002: "['Apple', 'M', 'R', '500001', 'Fruit', '90']", 100004: "['Banana', 'M', 'Y', '500001', 'Fruit', '75']"} 
```

键是整数，值是字符串。

我有一个如下所示的 .csv 文件：

```
100001,1
100001,1
100001,2
100002,1
100002,1
100002,3
100002,3
100003,1
100003,4
100004,2
100004,3
100004,3 
```

我想计算给定键的第二列中每个数字的出现次数，并将该计数添加到我的字典中。因此，对于这个样本，100001 的 1 计数为 2，2 的计数为 1，100002 的计数为 1 的计数为 2，3 的计数为 2，100003 的计数为 1 的计数为 1，4 的计数为 1，100004 的计数为2 的计数为 1，3 的计数为 2。虽然此 .csv 文件包含各种键的数据（其中我的 dict 中的键是子集），但我想将这些计数附加到我的 dict 以便它看起来像这样（为每个键添加 4 个新值，每个键按顺序计数 1-4。）

```
{100002: "['Apple', 'M', 'R', '500001', 'Fruit', '90', '2', '0', '2', '0']", 100004: "['Banana', 'M', 'Y', '500001', 'Fruit', '75', '0', '1', '2', '0']"} 
```

这 4 个添加的部分是数字 1-4 的计数，因此 100002 具有`'2', '0', '2', '0'`，因为在 .csv 文件中有 2 行`100002,1`但 0 行与`100002,2`2 行`100002,3`但 0 行与`100002,4`.

我的问题有两个部分。1）如何计算 .csv 文件中一个键后跟一个 1-4 的数字的次数，以便我有 4 个计数（数字 1-4 各一个）？2）如何将这些计数添加到我的字典中？

## 回答：

根据接受的答案，我制作了这个。它比我想要的要丑一些，但我设法完成了工作。

```
dd = defaultdict(lambda: defaultdict(int))
with open('AgentsCorpLevel.csv') as fin:
    csvin = csv.reader(fin)
    for row in csvin:
        if int(row[0]) in MyDict.keys():
            dd[int(row[0])][row[1]] += 1
print dd
dicts = MyDict,dd
#print dicts
FullDict = {}
PartlyCleanedDict = {}
CleanedDict = {}
TwoTypeDict = {k:[d.get(k) for d in dicts] for k in {k for d in dicts for k in d}}
for key, value in TwoTypeDict.iteritems():
    FullDict.setdefault((int(key)), str(value))
for key, value in FullDict.iteritems():
    PartlyCleanedDict.setdefault((int(key)), value.translate(None, "[]{()\/\'\"<>").replace('}',',}'))
for key, value in PartlyCleanedDict.iteritems():
    CleanedDict.setdefault((int(key)), value.replace(',defaultdicttype int', ''))
print CleanedDict 
```

的看起来像`print`这样`dd`

```
defaultdict(<function <lambda> at 0x00000000025C3518>, {1000164: defaultdict(<ty
pe 'int'>, {'1': 12, '3': 5, '2': 17, '4': 10}), 1000103: defaultdict(<type 'int
'>, {'1': 3, '3': 3, '2': 3, '4': 3}), 1000137: defaultdict(<type 'int'>, {'1':
5, '3': 4, '2': 7, '4': 1}), 1000140: defaultdict(<type 'int'>, {'1': 28, '3': 2
6, '2': 33, '4': 8}), 1000143: defaultdict(<type 'int'>, {'1': 1, '3': 3, '2': 1
, '4': 1}), 1000149: defaultdict(<type 'int'>, {'1': 6, '3': 7, '2': 9, '4': 6})
, 1000150: defaultdict(<type 'int'>, {'1': 13, '3': 11, '2': 22, '4': 12}), 1000
132: defaultdict(<type 'int'>, {'1': 2, '3': 4, '2': 4, '4': 1}), 1000155: defau
ltdict(<type 'int'>, {'1': 10, '3': 4, '2': 2, '4': 3}), 1000158: defaultdict(<t
ype 'int'>, {'1': 6, '3': 1, '2': 7, '4': 5})}) 
```

不幸的是，我尝试完全“清理”生成的 CleanedDict 并没有奏效，因为这是`print`CleanedDict 的示例（请注意，我在这里只提供了 3 个键，并且我已经更改了名称以适应水果和我和我的样品一起去的蔬菜主题。

```
{1000132: 'Kiwi, S, B, 500006, Fruit, 3n, defaultdicttype int, 1: 2, 3: 4, 2: 4, 4: 1,}', 1000103: 'Iceberg Lettuce, M, G, 500004, Vegetable, 2n, defaultdicttype int, 1: 3, 3: 3, 2: 3, 4: 3,}',1000137: 'Pineapple, M, Y, 500006, Fruit, 45n,defaultdicttype int, 1: 5, 3: 4, 2: 7, 4: 1,}'} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:07:07.940

您可以使用嵌套`defaultdict`- 我将把超过 4 个值的微调和处理以及确切的格式等...留给您...

```
import csv
from collections import defaultdict

d = {100002: "['Apple', 'M', 'R', '500001', 'Fruit', '90']", 100004: "['Banana', 'M', 'Y', '500001', 'Fruit', '75']"}
dd = defaultdict(lambda: defaultdict(int))
with open('test.csv') as fin:
    csvin = csv.reader(fin)
    for row in csvin:
        dd[int(row[0])][row[1]] += 1

for key in (key for key in dd if key in d):
    counts = [0] * 4
    for idx, val in dd[key].iteritems():
        counts[int(idx) - 1] = int(val)
    print key, d[key], counts

# 100002 ['Apple', 'M', 'R', '500001', 'Fruit', '90'] [2, 0, 2, 0]
# 100004 ['Banana', 'M', 'Y', '500001', 'Fruit', '75'] [0, 1, 2, 0] 
```

# oop - 面向对象编程和DAO设计模式

> ID：13302351
> 
> 赞同：1
> 
> 时间：2012-11-09T05:01:47.050
> 
> 标签：oop, dao

我是 Java 编程新手，正在尝试了解实现 DAO 设计模式的正确方法。这是一个示例，我有一个 itemCatalog 类，其中包含 populateItemCatalog 和 searchitemCatalog 方法。项目目录是使用类型项目对象的数组实现的。

现在我想切换到 DAO 设计以从 ms-access 数据库访问相同的数据。我的问题是现在这些方法会变成什么，因为 DAO 正在搜索数据库。我是否修改它们以从 DAO 返回 DTO。希望我的问题很清楚。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:09:01.170

通常这是它的工作原理。

你为你的对象实现了一个 DAO 接口。在您的情况下，CatalogDao。

这应该具有所有必需的数据访问方法。

现在，DAO 模式背后的想法是您可以拥有相同的多个实现。

在您的情况下，您将拥有它的 MS-Access 实现。这应该隐藏所有数据库特定的逻辑，并且应该返回 POJO。

DTO 通常是不同的东西。在其通常意义上，它意味着用于客户端-服务器通信的对象。例如，您的 POJO 可以转换为 xml 或 json。从客户端调用时。

这是完全不同的。

简而言之，DAO 对您的应用层隐藏了 db 实现细节，以便应用层可以直接处理 java 对象。

```
public interface ItemCatalogDao{
  ItemCatalog searchItemCatalog(Long itemId)
} 
```

一种可能的实现可能是

```
public class ItemCatalogDaoMsImpl implements ItemCatalogDao{

  public ItemCatalogDaoMsImpl(){
    //do your initialization code here , such as getting connection etc
}
  public ItemCatalog searchItemCatalog(Long itemId){
   //write your sql code here
}
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T05:28:09.363

正如你所说; 现在您想从不同的数据库中获取相同的数据。这种情况 DAO 模式非常适合。

```
 public interface ItemCatalogDAO extends GenericDAO<DTO, String> {
   public DTO populateCatalog(String id); 
       public searchCatalog(String x);
     } 
```

现在您的实现类将必须实现上述（示例）接口。只要确保你设计的接口可以被所有实现类使用。

因此，正如您所问的，您能否返回 DTO。是的，您应该根据您的要求返回 DTO 或 DTO 列表。从您的 DAO 返回一个对象是一种很好的做法。这样你就可以抽象你的实现，它也支持泛型的使用。

# azure - 调整单个分片大小的 SQL 命令 Windows SQL Azure

> ID：13302353
> 
> 赞同：1
> 
> 时间：2012-11-09T05:01:59.653
> 
> 标签：azure, azure-sql-database

可以通过 Windows Azure 数据库管理门户调整单个分片的大小，但似乎没有任何文档说明如何以编程方式执行此操作。此命令可通过 SQL 获得吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:40:57.577

唯一可用的命令是[ALTER FEDERATION](http://msdn.microsoft.com/en-us/library/windowsazure/hh597475.aspx)命令。使用该命令，您可以拆分联合 - 即从一个联合中创建两个联合。或者，您可以 DROP 联盟。目前没有单个命令可以执行联合调整大小。您可以使用 ALTER Federation 命令来实现您的目标，但调整联合的大小需要不止一个步骤。目前的做法是：

*   将要调整大小的联邦中的数据复制到某个数据库（本地或联邦根）
*   放弃联邦
*   使用新的“大小”创建联邦
*   取回数据

好吧，如果您想更改联合密钥的联合边界值（顶部和底部），这是为了。如果您只是想根据 MA​​X SIZE 调整大小，您可以只更改 DATABASE 语法。每个联合成员实际上是一个单独的 SQL 数据库。您可以查看您的 MASTER DB 并查看以下 VIEWS 以找到联合成员背后的数据库的确切名称：

*   [sys.databases](http://msdn.microsoft.com/en-us/library/windowsazure/ff951625.aspx)，它有列 Is_Federation_Member
*   [系统联盟](http://msdn.microsoft.com/en-us/library/windowsazure/hh597459.aspx)
*   [sys.federation_members](http://msdn.microsoft.com/en-us/library/windowsazure/hh597450.aspx)
*   [sys.federation_member_distributions](http://msdn.microsoft.com/en-us/library/windowsazure/hh597453.aspx)

一旦找到，只需执行`ALTER DATABASE [your_found_federation_member_db_name] MODIFY (MAXSIZE = [1 | 5 | 10 | 20 | 30 … 150] GB)`.

# asp.net - MVC3 WebGrid 打印整个网格值而不仅仅是页面

> ID：13302355
> 
> 赞同：0
> 
> 时间：2012-11-09T05:02:37.423
> 
> 标签：asp.net, asp.net-mvc-3, webgrid

如果这是可能的，我会感到非常惊讶，但这里就是这样。

我正在使用 MVC WebGrid 并启用了分页以更好地管理屏幕空间。

一切都很顺利，直到最终用户询问他们何时打印他们想要查看所有数据的页面，而不仅仅是分页数据。

当用户打印屏幕时，我是否可以返回全部数据量而不是打印窗口中的分页结果？

我真的不想做的一个真正肮脏的黑客行为是渲染一个标准表格，用 css 隐藏它，并创建一个只显示这个隐藏表格的打印 css 文件。

有没有人有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:33:04.720

您无法让浏览器打印不存在的内容，并且正如您所说，显示所有数据只是为了隐藏大部分数据的想法是“真正的肮脏黑客”。最干净的选项是为您提供自己的打印按钮，该按钮链接到另一个操作，该操作返回包含关闭分页的 WebGrid 的视图。

简化的东西 - 这是返回打印视图的操作：

```
public ActionResult Print() {
    var db = new NorthwindEntities();
    var products = db.Products.ToList();
    return View(products);
} 
```

这是视图：

```
@model IEnumerable<MvcApplication1.Models.Product>
@{
    ViewBag.Title = "Print";
    var grid = new WebGrid(Model, canPage: false);
}

@grid.GetHtml()
<script>
    $(function() {
        window.print();
    });
</script> 
```

您需要确保引用了 jQuery，并且 JavaScript 将导致浏览器的打印对话框出现，显示所有数据。

# java - 使用 SAX 在 Android 中解析 XML

> ID：13302358
> 
> 赞同：0
> 
> 时间：2012-11-09T05:03:04.513
> 
> 标签：java, android, xml, parsing, sax

我有一个 XML 文件，如下所示：

```
<questions title="(Some question Category)">
 <question>
  <ask>(Some question)?</ask>
  <answer>(Some answer)</answer>
  <answer correct="true">(Some correct answer)</answer>
  <answer>(Some answer)</answer>
  <answer>(Some answer)</answer>
 </question>
</questions> 
```

我正在使用 SAX 来解析文件。据我所知，所有必需的 SAX 文件都已正确设置。

然后我有一个处理程序类，我查找了如何为稍微不同的 XML 文件编写代码。我尝试为上面的 xml 调整它，这就是我想出的（未完成）：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.Attributes;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.DefaultHandler;
import android.content.Context;
import android.graphics.Color;
import android.util.Log;
import android.widget.TextView;

public class QuestionHandler extends DefaultHandler {
    //list for imported product data
    private ArrayList<TextView> theViews;
    //string to track each entry
    private String currQuestion = "";
    //flags to keep track of XML processing
    private boolean isAsk = false;
    private boolean isAnswer = false;
    //context for user interface
    private Context theContext;
    //constructor
    public QuestionHandler(Context cont) {
        super();
        theViews = new ArrayList<TextView>();
        theContext = cont;
    }

    //start of the XML document
    public void startDocument () { Log.i("QuestionHandler", "Start of XML document"); }

    //end of the XML document
    public void endDocument () { Log.i("QuestionHandler", "End of XML document"); }

    //opening element tag
    public void startElement (String uri, String name, String qName, Attributes atts)
    {
        //find out if the element is a question
        if(qName.equals("question"))
        {
            //set ask and answer tag to false
            isAsk = false;
            isAnswer = false;
            //create View item for question display
            TextView questionView = new TextView(theContext);
            questionView.setTextColor(Color.rgb(73, 136, 83));
            //add the attribute value to the displayed text
            String viewText = "Items from " + atts.getValue("name") + ":";
            questionView.setText(viewText);
            //add the new view to the list
            theViews.add(questionView);
        }
        //or if the element is an asked question
        else if(qName.equals("ask"))
            isAsk = true;

        //or if element is an answer
        else if(qName.equals("answer"))
            isAnswer = true;
    }

    //closing element tag
    public void endElement (String uri, String name, String qName)
    {
        if(qName.equals("question"))
        {
            //create a View item for the asked
            TextView askView = new TextView(theContext);
            askView.setTextColor(Color.rgb(192, 199, 95));
            //display the compiled items
            askView.setText(currQuestion);
            //add to the list
            theViews.add(askView);
            //create a View item for the answers
            TextView answersView = new TextView(theContext);
            answersView.setTextColor(Color.rgb(192, 199, 95));
            //display the compiled items
            answersView.setText(currQuestion);
            //add to the list
            theViews.add(answersView);
            //reset the variable for future items
            currQuestion = "";
        }
    }

    //element content
    public void characters (char ch[], int start, int length)
    {
        //string to store the character content
        String currText = "";
        //loop through the character array
        for (int i=start; i<start+length; i++)
        {
            switch (ch[i]) {
            case '\\':
                break;
            case '"':
                break;
            case '\n':
                break;
            case '\r':
                break;
            case '\t':
                break;
            default:
                currText += ch[i];
                break;
            }
        }
        //prepare for the next item
        if(isAsk || isAnswer && currText.length()>0)
            currQuestion += currText+"\n";
    }
    public ArrayList<TextView> getData()
    {
        //take care of SAX, input and parsing errors
        try
        {
            //set the parsing driver
            System.setProperty("org.xml.sax.driver","org.xmlpull.v1.sax2.Driver");
            //create a parser
            SAXParserFactory parseFactory = SAXParserFactory.newInstance();
            SAXParser xmlParser = parseFactory.newSAXParser();
            //get an XML reader
            XMLReader xmlIn = xmlParser.getXMLReader();
            //instruct the app to use this object as the handler
            xmlIn.setContentHandler(this);
            //provide the name and location of the XML file **ALTER THIS FOR YOUR FILE**
            URL xmlURL = new URL("http://www.macs.hw.ac.uk/~pjbk/quiz/example.xml");
            //open the connection and get an input stream
            URLConnection xmlConn = xmlURL.openConnection();
            InputStreamReader xmlStream = new InputStreamReader(xmlConn.getInputStream());
            //build a buffered reader
            BufferedReader xmlBuff = new BufferedReader(xmlStream);
            //parse the data
            xmlIn.parse(new InputSource(xmlBuff));
        }
        catch(SAXException se) { Log.e("AndroidTestsActivity", 
                "SAX Error " + se.getMessage()); }
        catch(IOException ie) { Log.e("AndroidTestsActivity", 
                "Input Error " + ie.getMessage()); }
        catch(Exception oe) { Log.e("AndroidTestsActivity", 
                "Unspecified Error " + oe.getMessage()); }
        //return the parsed product list
        return theViews;
    }

} 
```

最后，我的 initialiseQuestions() 方法，来自其他工作活动，将提取的 XML 数据分配给问题类（同样，未完成）：

```
private void initialiseQuestions() {
    // TODO Auto-generated method stub

    questions = new Vector<Question>(); //Vector containing our questions

    try
    {
        //create an instance of the QuestionHandler class
        QuestionHandler handler = new QuestionHandler(getApplicationContext());
        //get the string list by calling the public method
        ArrayList<TextView> newViews = handler.getData();
        //convert to an array
        Object[] question = newViews.toArray();
        //loop through the items, creating a View item for each
        for(int i=0; i<question.length; i++)
        {
            //add the next question in the list
            Question q1 = new Question(question[i]);
            q1.addAnswer("Harold Godwin", false);
            q1.addAnswer("Edward the Confessor", false);
            q1.addAnswer("William the Conqueror", true);
            q1.addAnswer("Alfred the Great", false);
            questions.add(q1);
            //mainLayout.addView((TextView)products[i]);
        }

    }
    catch(Exception pce) { Log.e("AndroidTestsActivity", "PCE "+pce.getMessage()); } 
```

我的主要问题是我真的不明白我在做什么/需要在处理程序和 initialiseQuestions 方法中进行更改。我不明白字符串是如何在处理程序中创建的（如果您只需要发回一个字符串数组，为什么还需要 textViews？）而且我不明白如何在 initialiseQuestions 中处理数据。如您所见， initaliseQuestions 方法应采用已解析的 XML 并使用数据实例化问题对象。

有人能告诉我我需要改变什么吗？

这是我一直在尝试调整[的教程](http://www.codeproject.com/Articles/334859/Parsing-XML-in-Android-with-SAX)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:15:18.117

解析 XML 确实是一项整洁的工作。有一个非常好的库[Simple XML](http://simple.sourceforge.net/)，我们可以很容易地在 Android 中使用它。它是基于注释的库，有很好的教程。最好的事情是它直接从您的 XML 中返回一个 POJO，并且在性能方面，这很好。

您需要做的就是为您的 XML 创建一个基于注释的 POJO（请参阅网站上的教程）。用于`serializer.read(pojoClassType, xmlStr)`获取 POJO 的对象。

您也可以使用`Java Generics`概念来制作仅一种通用方法来读取每个 XML 文件。喜欢，

```
public <T> T parseXML(Class<T> pojoType, String xmlStr){
 //your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T05:08:04.167

这就是我使用 SAX 使其工作的方式。

我已经为我的调试示例修改了一点你的 XML 文件：

```
 <game>
    <questions title="History">
        <question>
        <ask>Who won the Battle of Hastings?</ask>
        <answer>Harold Godwinson</answer>
        <answer correct="true">William of Normandy</answer>
        <answer>Edward the Confessor</answer>
        <answer>Harald Hadrada</answer>
        </question>
        <question>
        <ask>French revolution date?</ask>
        <answer>January 10th</answer>
        <answer correct="true">July 14th</answer>
        <answer>September 9th</answer>
        <answer>February 20th</answer>
        </question>
    </questions>
    <questions title="Geography">
        <question>
        <ask>France capital?</ask>
        <answer>Montreal</answer>
        <answer correct="true">Paris</answer>
        <answer>Lyon</answer>
        <answer>Barcelona</answer>
        </question>
    </questions>
</game> 
```

我已经按顺序放置了游戏*根标签*，如您所见，让 XML 有效，以防您需要多个主题。

**重要提示：**我的示例也适用于 URL ( [http://www.macs.hw.ac.uk/~pjbk/quiz/example.xml](http://www.macs.hw.ac.uk/~pjbk/quiz/example.xml) )。您只需取消注释即可。

## JAVA 类

**答案**

```
public class Anserw {

    private String content;
    private boolean isCorrect;

    public Anserw(){}

    public String getContent() {
        return content;
    }

    public void setContent(String content) {
        this.content = content;
    }

    public boolean isCorrect() {
        return isCorrect;
    }

    public void setCorrect(boolean isCorrect) {
        this.isCorrect = isCorrect;
    }

} 
```

**问题**

```
public class Question {

    private String ask;
    private ArrayList<Anserw> alAnserws;

    public Question(){}

    public String getAsk() {
        return ask;
    }

    public void setAsk(String ask) {
        this.ask = ask;
    }

    public ArrayList<Anserw> getAlAnserws() {
        return alAnserws;
    }

    public void setAlAnserws(ArrayList<Anserw> alAnserws) {
        this.alAnserws = alAnserws;
    }

} 
```

**问题处理程序**

```
public class QuestionsHandler extends DefaultHandler{

    private HashMap<String, ArrayList<Question>> hmTitleQuestions;
    private String reading;
    private String currentTitle;
    private Question question;
    private ArrayList<Anserw> alAnserws;
    private ArrayList<Question> alQuestions;
    private Anserw anserw;

    public QuestionsHandler(){
        hmTitleQuestions = new HashMap<>();
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        if(qName.equals("questions")){
            currentTitle = attributes.getValue("title");
            alQuestions = new ArrayList<>();
        }
        if(qName.equals("question")){
            question = new Question();
        }
        if(qName.equals("answer")){
            anserw = new Anserw();
            boolean flag = false;
            String correctAttribute = attributes.getValue("correct");
            if(correctAttribute != null){
                if(correctAttribute.equals("true")){
                    flag = true;
                }
            }
            anserw.setCorrect(flag);
        }

    }

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        if(qName.equals("questions")){
            hmTitleQuestions.put(currentTitle, alQuestions);
        }
        if(qName.equals("question")){
            question.setAlAnserws(alAnserws);
            alQuestions.add(question);
        }
        if(qName.equals("ask")){
            question.setAsk(reading);
            alAnserws = new ArrayList<>();
        }
        if(qName.equals("answer")){
            anserw.setContent(reading);
            alAnserws.add(anserw);
        }

    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        reading = new String(ch, start, length);
    }

    public HashMap<String, ArrayList<Question>> getHmTitleQuestions() {
        return hmTitleQuestions;
    }

} 
```

**XML管理器**

```
public final class XMLManager {

    public static HashMap<String, ArrayList<Question>> getHmTitleQuestions(){

        HashMap<String, ArrayList<Question>> hmTitleQuestions = null;
        SAXParserFactory factory = SAXParserFactory.newInstance();
        try {

            SAXParser parser = factory.newSAXParser();
            /*
            URL url = new URL("http://www.macs.hw.ac.uk/~pjbk/quiz/example.xml");
            HttpURLConnection connexion = (HttpURLConnection) url.openConnection();
            connexion.connect();
            InputSource in = new InputSource(connexion.getInputStream());
            */
            QuestionsHandler qHandler = new QuestionsHandler();
            /*
             *  FROM INTERNET XML
             * 
                parser.parse(in, qHandler);
                hmTitleQuestions = qHandler.getHmTitleQuestions();

            */

            /*
             *  FROM LOCAL XML TO DEBUG
             */
            File file = new File("D:\\Loic_Workspace\\TestGameSAXUrl\\res\\game.xml");
            parser.parse(file,qHandler);
            hmTitleQuestions = qHandler.getHmTitleQuestions();

        } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return hmTitleQuestions;

    }

} 
```

**我的主**

```
public class MyMain {

    /**
     * @param args
     */
    public static void main(String[] args) {

        for(String s : XMLManager.getHmTitleQuestions().keySet()){
            ArrayList<Question> alQuestions = XMLManager.getHmTitleQuestions().get(s);
            ArrayList<Anserw> alAnserws = null;
            System.out.println(s);
            for(Question q:alQuestions){
                System.out.println(q.getAsk());
                alAnserws = q.getAlAnserws();
                for(Anserw a:alAnserws){
                    System.out.println("Content anserw : "+a.getContent()+"/"+a.isCorrect());
                }

            }
        }

    }

} 
```

## 控制台输出

```
History
Who won the Battle of Hastings?
Content anserw : Harold Godwinson/false
Content anserw : William of Normandy/true
Content anserw : Edward the Confessor/false
Content anserw : Harald Hadrada/false
French revolution date?
Content anserw : January 10th/false
Content anserw : July 14th/true
Content anserw : September 9th/false
Content anserw : February 20th/false
Geography
France capital?
Content anserw : Montreal/false
Content anserw : Paris/true
Content anserw : Lyon/false
Content anserw : Barcelona/false 
```

希望能帮助到你 ;-）

# c# - C#：如何设计一个与动态生成的对象耦合的 UI？

> ID：13302362
> 
> 赞同：2
> 
> 时间：2012-11-09T05:03:21.590
> 
> 标签：c#, winforms, reflection, dll

我在工作中开发的软件有问题。在用户执行以下步骤后，我正在创建一个 dll 文件。

1.  将某些参数和计算代码指定到 win 表单中。
2.  指定 dll 的名称。

完成后，我将创建所有必要的代码文件（使用 codeDOM）并编译源文件以生成 dll。

现在，我的问题在于用户界面。我想在我的 UI 中的 dll 对象中显示参数，但我不知道用户要添加哪些参数。

我想要一个系统，我可以指定配置文件来耦合 UI 元素（我事先知道）和 dll 中的对象（我没有先验知识，除了我可以从使用反射中收集到的信息） .

因此，实际上，我想将 UI 元素（label.text 等）之间的耦合从我的代码中引入，可能是一个 xml 文件，我的 UI 应该使用这个 xml 文件来填充动态加载的对象中的数据dll。

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:36:48.087

这是一个简短的代码片段，可帮助您入门：

```
Assembly asm = Assembly.LoadFrom("generated_asm.dll");
// or if the assembly is already loaded:
// asm = AppDomain.CurrentDomain.GetAssemblies().First(a => a.GetName().Name == "Generated.Assembly");

var type = asm.GetType("InsertNamespaceHere.InsertTypeNameHere");

// creates a table layout which you can add to a form (preferable you use the designer to create this)
var tbl = new TableLayoutPanel { ColumnCount = 2 };

// enumerate the public properties of the type
foreach(var property in type.GetProperties())
{
  tbl.Add(new Label(property.Name));

  var input = new TextBox { Tag = property };
  input.TextChanged = this.HandleTextChanged;
  input.Enabled = property.CanWrite;

  tbl.Add(input);
} 
```

在处理程序中你可以使用这个：

```
void HandleTextChanged(object source, ...) {
  var input = source as TextBox;
  var property = input.Tag as PropertyInfo;
  property.GetSetMethod().Invoke(this.instanceOfThatType, new object[] { Convert.ChangeType(input.Text, property.PropertyType) });
} 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:04:48.833

我想你可能想看看[Prism](http://msdn.microsoft.com/en-us/magazine/cc785479.aspx)或[MEF (Managed Extensibility Framework)](http://msdn.microsoft.com/en-us/library/dd460648.aspx)。肯定支持您所描述的那种后期绑定。事实上，这是我们在工作中使用的技术堆栈，用于在程序集中进行后期绑定（或多或少类似于插件架构）。

# oracle - 如何解决 SQL 错误：oracle 11g 中的 ORA-01858

> ID：13302365
> 
> 赞同：1
> 
> 时间：2012-11-09T05:03:40.017
> 
> 标签：oracle, create-table, ora-01858

我正在尝试使用现有的 DDL 文件创建一个表，该语句非常像这样

```
CREATE TABLE SYSTEM.LS_Ss_VERSION 
    ( 
     ID NUMBER (20)  NOT NULL , 
     SSID NUMBER (20) , 
     CONTENT VARCHAR2 (4000 BYTE) , 
     CREATEDBY NUMBER (20) , 
     CREATED_ON DATE DEFAULT 'NULL' 
    ) 
```

我得到的错误是

```
SQL Error: ORA-01858: a non-numeric character was found where a numeric was expected
01858\. 00000 -  "a non-numeric character was found where a numeric was expected"
*Cause:    The input data to be converted using a date format model was
           incorrect.  The input data did not contain a number where a number was
           required by the format model. 
```

我已经搜索了谷歌，但无法得到正确的解决方案。请在这里给我建议一个解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T05:09:02.897

请删除 'NULL' 为 null 并在[http://sqlfiddle.com/#!4/256ab](http://sqlfiddle.com/#!4/256ab)中尝试并测试它：

```
CREATE TABLE LS_Ss_VERSION 
    ( 
     ID NUMBER (20)  NOT NULL , 
     SSID NUMBER (20) , 
     CONTENT VARCHAR2 (4000 BYTE) , 
     CREATEDBY NUMBER (20) , 
     CREATED_ON DATE DEFAULT NULL 
    ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T05:14:21.067

你的问题是这样的：

```
CREATED_ON DATE DEFAULT 'NULL' 
```

`'NULL'`是一个*字符串*，因此数据库将其解释为使用指定为默认值的任何掩码的隐式数据转换，例如`to_date('NULL', 'DD-MON-YYYY')`，这显然是无稽之谈。

如果我们在填充行时没有指定值，系统会输入 NULL（不是字符串），所以我们不需要指定这个......

```
CREATED_ON DATE DEFAULT NULL 
```

...因为无论如何都会发生这种情况。但是鉴于列的名称，指定以下内容会更有意义：

```
CREATED_ON DATE DEFAULT SYSDATE 
```

# javascript - 在动态添加的元素上应用带有选项的 jquery 插件/函数

> ID：13302366
> 
> 赞同：0
> 
> 时间：2012-11-09T05:03:46.413
> 
> 标签：javascript, jquery, ajax, jquery-plugins

在 jQuery 中，有一个特性可用于`$(document).on(...)`将事件也分配给 html 中新添加的元素，例如在 ajax 请求之后。

您能否举一个将其与自定义函数/插件一起使用的示例，例如[hoverpulse](http://jquery.malsup.com/hoverpulse/jquery.hoverpulse.js)。

我面临的另一个问题是，它还期望将一些值传递给该函数，该函数在选择器上调用时由 hoverpulse 返回。

```
 $(document).ready(function(){  
    $('div.thumb img').hoverpulse({ size: 40, speed: 400 });   
  }); 
```

如何通过 jQuery 的 on() 方法传递此类函数的选项？请注意，选项不会传递给处理程序，而是传递给函数`hoverpulse`本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:33:51.580

该`.on()`方法用于分配事件处理程序，考虑使用它来应用插件是没有意义的。

> *“如果我只使用 $(selector).hoverpulse() 是否会重新分配相同的功能......因此在某些情况下会执行两次效果？”*

是的，如果您使用相同的选择器，它将将该插件应用于当时与选择器匹配的所有元素，包括之前已经完成的元素。对于一些可能无关紧要的插件，但对于其他插件来说，它会。我具体不熟悉，但可以想象，如果您多次`.hoverpulse()`调用该元素，它可能会在同一个元素上多次执行该效果。`.hoverpulse()`

想到的第一个解决方法是向已经应用插件的元素添加一个类，然后下次将自己限制为没有该类的元素：

```
$('div.thumb img').not(".HPapplied")
                  .hoverpulse({ size: 40, speed: 400 })
                  .addClass("HPapplied"‌​); 
```

鉴于您（可能）需要在文档就绪和 Ajax 成功回调中应用相同的选项，您可能希望将上述语句放入一个函数中，然后从两个位置调用该函数。这样，如果您需要更改其中一个选项，您只需在一个地方进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:36:26.600

嗨，当您动态添加图像时，只需以他们有这样的 onload 事件的方式进行...

```
<div style="position: relative;" class="thumb"><img onload="$(this).hoverpulse();"style="position: absolute; top: 0px; left: 0px;" src="hoverpulse_files/beach1.jpg" height="64" width="64"></div> 
```

它可以正常工作，无需对代码进行任何其他更改...

# inno-setup - Inno Setup：如何设置安装程序“以管理员身份运行”？

> ID：13302369
> 
> 赞同：14
> 
> 时间：2012-11-09T05:04:13.360
> 
> 标签：inno-setup

在 Inno 设置中，

```
[Setup] 
PrivilegesRequired=admin 
```

仍然无法以管理员身份运行安装程序，但我需要在 Inno Setup 的最后一步启动我的程序。

如何设置我的安装程序可以以管理员身份运行？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-07-23T12:25:35.883

我也遇到了同样的问题，我花了很长时间才弄清楚，在设置 PrivilegesRequired=admin 之后，还需要将 runascurrentuser 添加到所有 [Run]Flags 中。

```
[Setup]
PrivilegesRequired=admin

[Run]
Filename: "{app}\MyApp.exe"; Description: "{cm:LaunchProgram,MyApp}"; Flags: runascurrentuser nowait postinstall skipifsilent; Check: returnTrue()
Filename: "{app}\MyApp.exe"; Flags: runascurrentuser; Parameters: "-install -svcName ""MyApp"" -svcDesc ""MyApp"" -mainExe ""MyApp.exe""  "; Check: returnFalse() 
```

我知道你可能已经弄清楚了这个问题，考虑到这个问题是在两年前提出的，但我想我还是会为像我这样发现这个未回答的问题但真的很想看到答案的其他人回答这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-02T09:41:23.023

我的 inno 设置脚本如下，

```
#define MyAppName "MyApp"  
#define MyAppExeName "MyApp.exe"

[Setup]  
PrivilegesRequired=admin

[Run]   
Filename: "{app}\{#MyAppExeName}"; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; Flags: runascurrentuser nowait postinstall skipifsilent 
```

# php - 按数组多选

> ID：13302371
> 
> 赞同：1
> 
> 时间：2012-11-09T05:04:56.250
> 
> 标签：php, arrays

我有：

```
$selectedItem = '100,200,300'; 
```

和mysql加载：

```
<select multiple="multiple" name="product_id">
   <?php
   $query = mysql_query("SELECT * FROM products ORDER BY id");
   while($row = mysql_fetch_array($query)){
      echo '<option value="$row[id]">$name</option>';
   }
   ?>
</select> 
```

我需要**$selectedItem**（三个值）是：

```
<option value="$row[id]" selected>$row[id]</option> 
```

我怎样才能做到这一点？**当selectedItem**超过 1时，我只是找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:13:16.170

您应该将`$selectedItem`变量设为数组（并将其命名为复数，因为它可以有多个值；只是我添加的偏好 =P）：

```
$selectedItems = array(100, 200, 300); 
```

这样做，您将能够检查当前行`id`是否在数组中（使用`in_array()`），然后“选择”该行：

```
while($row = mysql_fetch_array($query)) {
    $selected = in_array($row['id'], $selectedItems) ? ' selected="selected"' : '';
    echo '<option value="' . $row[id] . '"' . $selected . '>' . $row['id'] . '</option>';
} 
```

或者，如果您无法将所选项目列表“定义”为数组，并且您将*只有*一个逗号分隔的字符串，则可以使用`explode()`将其转换为数组：

```
$selectedItems = explode(',', $selectedItem); 
```

这将`$selectedItem`通过逗号将变量拆分为存储到的数组`$selectedItems`（可与上述代码一起使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:13:06.957

你可以这样做：

```
while($row = mysql_fetch_array($query)){
     if ( str_pos( $selectedItem.',' , $row[id].',' ) !== false) {
        $sel = 'selected';
     } else {
        $sel = '';
     }
     echo "<option value='$row[id]' $sel>$row[id]</option>";
} 
```

# entity-framework - 上下文 SaveChanges 不起作用，首先使用 EF 代码，datagridview 和 bindingsource

> ID：13302375
> 
> 赞同：1
> 
> 时间：2012-11-09T05:05:18.923
> 
> 标签：entity-framework, ef-code-first

为什么我的数据无法保存？Db 是类型`System.Data.Entity.DbContext`

当我加载我调用的网格时

```
this.bindingSource1.DataSource = Db.People.Where(e => e.LastName.Contains("e")).ToList() ;

this.dataGridView1.DataSource = this.bindingSource1; 
```

当我保存我调用的数据时

```
this.bindingSource1.EndEdit();

Db.SaveChanges(); 
```

我没有收到错误，但数据没有保存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:43:28.830

答案是 Db.People.Where(p => p.LastName.Contains("e")).Load(); this.bindingSource1.DataSource = Db.People.Local.ToBindingList();

# c++ - C ++根据用户输入字符串长度创建二维数组

> ID：13302377
> 
> 赞同：1
> 
> 时间：2012-11-09T05:05:24.890
> 
> 标签：c++, multidimensional-array

我有一项任务是创建一个块转置密码程序。用户将输入他们选择的短语，程序将去除短语的空格、标点符号并使其小写，然后读取其长度并创建一个二维数组，该数组的大小与最近的正方形大小相匹配，以适合所有变异字符串中的字符，并用随机字母填充剩余空间。

问题是，我在创建那个正方形时遇到了问题。

到目前为止我有这个：

```
int main()
{
    string input;
    cout << "Please enter message to cipher." << endl;
    getline(cin, input);

    /* do punctuation removal/mutation */

    int strLength = input.length(); //after mutation

    /* need to find the square here before applying sizes and values to arrays */

    char * original = new char[][]; // sizes pending
    char * transposed = new char[][]; // sizes pending

    for (int i = 0; i <= /* size pending */ ; i++)
    {
        for (int j = 0; j <= /* size pending */ ; j++)
        {
            transposed[j][i] = original[i][j];
        }
    }

    /* do more stuff here */
} 
```

有任何想法吗？

（我已经完成了突变部分；使用备用代码进行了测试）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:12:29.537

你不能做例如

```
char * original = new char[][]; 
```

首先，您尝试创建一个数组数组（或指针的指针）并将其分配给单个指针。您需要分两步完成：

1.  分配“外部”数组：

    ```
    char **original = new char* [size]; 
    ```

2.  分配“内部”字符串：

    ```
    for (int i = 0; i < size; i++)
        original[i] = new char [other_size]; 
    ```

但是我强烈建议*不要*使用它！相反，您应该使用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)而不是在堆上分配的“数组”，如果内容是字符串，则使用`std::string`：

```
std::vector< std::vector< std::string > > original; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:16:50.517

我相信你不需要“新”来创建你的存储。以下代码应该可以完成这项工作：

```
char buf[size][size]; // size is a variable
... // populate your buf

char tmp;
for(int i = 0; i < size; i++) {
  for(int j = 0; j < i; j++) {
    tmp = buf[i][j];
    buf[i][j] = buf[j][i];
    buf[j][i] = tmp;
  }
} 
```

这会在适当的位置进行转置。您不需要另一个数组来存储字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T05:33:59.310

您可以取长度的平方根，向下舍入为整数，然后加一得到新的长度。

```
int len = (int)(sqrt(strLength) + 1e-9) + 1; 
```

然后，您将像往常一样使用和填充`malloc`正方形。`len`

# c# - 在 ASP.NET 中控制 ImageButton 的提交行为

> ID：13302378
> 
> 赞同：-1
> 
> 时间：2012-11-09T05:05:29.937
> 
> 标签：c#, asp.net

我在页面中有一个图像按钮，可以在鼠标单击时触发，默认情况下它会在输入时触发，我也想禁用它。如何使`aspx:image`按钮的提交行为为假

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:35:30.783

尝试这个：

```
 $(function(){
        $('#<%=imgBtn.ClientID%>').keydown(function(e){
            if(e.which==13)
            {
                 return false;
            }
        });
    }); 
```

# colors - 如何让销售额度量在 MDX 立方体中显示为红色或绿色？

> ID：13302381
> 
> 赞同：1
> 
> 时间：2012-11-09T05:05:54.273
> 
> 标签：colors, mdx, cube, measure

我是 mdx 的新手，这是一项简单的任务，但我无法正确完成。我有一个包含销售额、税金、订单数量等的销售量度组。

如果销售额> 50，我试图让销售额显示为绿色或红色，否则为红色..无论首选颜色。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:28:05.943

您必须使用[FORE_COLOR](http://technet.microsoft.com/en-us/library/ms145573.aspx)单元格属性。

这是一个带有计算成员的示例：

```
WITH MEMBER [Measures].[color] AS [Measures].[sales amount],
             FORE_COLOR = IIf([Measures].[sales amount] > 50, 255, 65280) 
```

# entity-framework - 从一个实体到另一个实体的多个引用、数据库模式、实体框架

> ID：13302383
> 
> 赞同：1
> 
> 时间：2012-11-09T05:05:59.770
> 
> 标签：entity-framework, database-schema

读了几遍，明白我在正确提问方面不太擅长。对问题做了一些更正。

我的应用程序中有 2 个类：`Contractor`和`ContractorGroup`.

1.  每个`Contractor`人都有一个父母`Contractor`。父母`Contractor`只能看到它的家属。并且看不到它的眷属的眷属。只有一层可见性。

2.  父母`Contractor`可以将它的依赖分组`Contractors`到`ContractorGroup`.

    因此，许多依赖`Contractors`于一个`ContractorGroup`（多对一）
    `Contractor`具有 NavProperty `ContractorGroup`，它所属的组。每个都`Contractor`可以是 ONLY IN ONE `ContractorGroup`。

**示例：** 我是父母`Contractor`，有 5 个受抚养人`Contractors`，我想将其中的前 2 个分组为 1st `ContractorGroup`，最后 3 个分组为 2nd `ContractorGroup`。因此，要实施的选项：

***首先：***我不能包含将 2 个组中的每一个连接到 parent`VisibleToContractorId`-id of my parent`Contractor`)。 在这种情况下，我可以进行类似于以下的查询：`ContractorGroup``Contractor`

```
 var ContractorGroupsToDispalayForParentContractor =
context.ContractorGroups.Where(p => p.Contractors.All(p => p.Parent == ParentContractor)); 
```

换句话说：“查找所有由具有 parent == ParentContractor 的承包商组成的组”
在此选项中，一切正常。DbSchema 简单明了。但我不喜欢这个查询。

***第二：***或者我可以引入 FK( `VisibleToContractorId`)。因此，一个父母`Contractor`有很多`ContractorGroups`由依赖组成的`Contractors`。然后我有一个更简单，更强大的查询：

```
 var ContractorGroupsToDispalayForParentContractor = 
context.ContractorGroups.Where(p => p.VisibleToContractor == ParentContractor); 
```

我喜欢这个查询。但是 EF 引入了奇怪的 DbColumn ，它总是`null`。>:-E

短数据库架构：

```
Table("Contractor")
ContractorId = PK
ContractorGroupId = FK
ContractorGroup_ContractorGroupId = FK <--- This One

Table("ContratorGroup")
ContractorGroupId = PK
VisibleToContractorId = FK 
```

**我的域类和实体配置：**

```
public class Contractor : IObjectWithState
{
    [Key]
    public virtual int ContractorId { get; set; }

    public virtual Contractor Parent { get; set; }
    public virtual int? ParentId { get; set; }

    public virtual ContractorGroup ContractorGroup { get; set; }
    public virtual int? ContractorGroupId { get; set; }

    public virtual ICollection<ContractorGroup> GroupsVisible { get; set; } 
 }

public class ContractorGroup : IObjectWithState
{
    [Key]
    public virtual int ContractorGroupId { get; set; }

    public virtual Contractor VisibleToContractor { get; set; }
    public virtual int? VisibleToContractorId { get; set; }

    public virtual ICollection<Contractor> Contractors { get; set; }            
} 
```

实体配置（仅在 中`ContractorGroupConfiguration`）：

```
HasMany(p => p.Contractors).WithOptional(p=>p.ContractorGroup);
HasOptional(p => p.VisibleToContractor).WithMany(
       p=>p.GroupsVisible).HasForeignKey(p=>p.VisibleToContractorId); 
```

它是EF中的错误吗？您更喜欢领域模型的***第一个***或***第二个***实现是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T09:40:59.170

The point is that you need to tell EF that the associations `ContractorGroup.VisibleToContractor` and `Contractor.GroupsVisible` are no independent associations (with two FK fields), but are two parts of a bidirectional association. Replace the entity configurations by:

```
class ContractorConfiguration : EntityTypeConfiguration<Contractor>
{
    public ContractorConfiguration()
    {
        HasMany(c => c.GroupsVisible).WithOptional(g => g.VisibleToContractor);
    }
} 
```

Without this, EF creates the field `ContractorGroup_ContractorGroupId` as a FK for `Contractor.GroupsVisible` on top of the FK `VisibleToContractorId`.

# android - 为什么我不能在我的 android 主题中使用这个属性？

> ID：13302384
> 
> 赞同：2
> 
> 时间：2012-11-09T05:06:01.267
> 
> 标签：android, attributes, styles, themes, searchview

从一些上下文开始，我正在尝试设置 SearchView 小部件的背景颜色。已经发布了对这个问题的一个非常[有见地的答案，我从中学到了很多。](https://stackoverflow.com/questions/11085308/changing-the-background-drawable-of-the-searchview-widget)

不过，我的理解有一个差距，我希望有人可以向我解释。当我创建一个主题时，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="MyCustomTheme" parent="android:Theme">
        <item name="android:searchViewTextField">@android:color/white</item>
    </style>
</resources> 
```

Eclipse 编译时出现错误，说它不知道该属性：

```
error: Error: No resource found that matches the given name: attr 'android:searchViewTextField'. 
```

但是，如果我重新声明该属性：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <declare-styleable name="CustomSearchView">
        <attr name="android:searchViewTextField" format="reference" />
    </declare-styleable>
</resources> 
```

Eclipse 以错误消息响应：

```
error: Attribute "android:searchViewTextField" has already been defined 
```

Eclipse 似乎知道该属性，但是当我想使用它时很方便地忘记了该属性。（我想知道后台是否正在进行一些上下文切换）

无论如何，如果我删除了问题代码，那么我可以看到我的自定义主题从其父主题继承了 searchViewTextField。我只是不明白为什么我不能用我自己的来代替它。

（另一个答案提到了 android.R.stylable，但该文件在 api 16 中已过时）

提前致谢。

相关安卓资源：

[theme.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml)、[attrs.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/attrs.xml)和 search_view.xml （对不起，两个链接限制）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:22:18.017

您明确链接的 SO 答案中的答案表示您无法在自己的主题中指定 searchViewTextField ，因为它不是可样式化的资源。您需要根据其他答案在代码中修改它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T02:33:58.130

问题是，为什么我不能使用主题属性“android:searchViewTextField”？

出于怀疑编译后的 Android.jar 文件与发布的 Android 源代码不一致，我撕开 jar 并开始反编译（对我来说是第一次）。在四处寻找之后，似乎有人带着砍刀进入了 R$style.class 并砍掉了大量资源。据我所知，它一定是故意的，甚至可能是手动完成的。

这种编译源代码修改在其他类似框架中并非没有先例，但它肯定会让任何试图调试框架的人感到困惑。

具有讽刺意味的是，自动生成的 R 文件都有一个标题，上面写着，

```
/* AUTO-GENERATED FILE.  DO NOT MODIFY. 
```

当您将修改文件设为例行程序时，这毫无意义。

# zend-framework - 应用程序变量问题

> ID：13302388
> 
> 赞同：0
> 
> 时间：2012-11-09T05:06:17.257
> 
> 标签：zend-framework, web, webserver

使用 Plesk Panel 进行管理，在具有两个不同域名的专用服务器中的虚拟主机下运行相同应用程序的两个实例（作为 Dev/PROD）。我知道在一个实例上使用 Dev/PROD 没有任何意义，但 DEV 几乎没有 5-10% 的时间使用，而且我们无法再拥有一台服务器。但问题是 PROD 域中使用的应用程序变量被 DEV 中的变量覆盖。有什么方法可以配置 webserver 或 Zend 框架以将两个实例视为单独的空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:05:17.057

这是一个很好的解决方案，可能对您的情况有所帮助。 [将 application.ini 保留在版本控制中而不会发生冲突](http://www.iostream.eu/keeping-application-ini-in-version-control-without-conflicting/)

# php - Jquery 与另一个文本区域自动增长

> ID：13302389
> 
> 赞同：1
> 
> 时间：2012-11-09T05:06:54.820
> 
> 标签：php, javascript, jquery

我有一个超过 1 的 JS textarea autogrow 和 textarea。例如，textarea 的 ID 为 1,2,3,4....

这里是 JS

```
<script type="text/javascript">
  $(document).ready(function(){
    $("#ctextarea").autoGrow();
  });
</script> 
```

这是文本区域：

```
<textarea name="comment" class="comment" maxlength="200"  id="ctextarea<?php echo $msg_id;?>"></textarea> 
```

现在我该如何设置，如果我去 textarea 2,3,4... textarea 会自动增长？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:10:54.203

给所有的文本区域，相同的类......并在 jquery 中调用一个类选择器

HTML

```
<textarea name="comment" class="comment" maxlength="200"  id="ctextarea<?php echo $msg_id;?>"></textarea>
<textarea name="comment" class="comment" maxlength="200"  ></textarea>
<textarea name="comment" class="comment" maxlength="200"  ></textarea> 
```

查询

```
<script type="text/javascript">
 $(document).ready(function(){
   $(".comment").autoGrow();
 }); 
```

或者

您可以使用名称选择器...

```
$('textarea[name="comment"]').autoGrow();  // this is jus an example coz i think u 'll not have all three textarea with the same name.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:11:14.507

假设只有那些 textareas 使用`"comment"`该类，那么您可以使用该类而不是 id 作为选择器：

```
$(".comment").autoGrow(); 
```

或者使用使用通用名称的属性选择器：

```
$('textarea[name="comment"]').autoGrow(); 
```

或者使用带有 id的[属性 starts-with 选择器：](http://api.jquery.com/attribute-starts-with-selector/)

```
$('textarea[id^="ctextarea"]').autoGrow(); 
```

类选择器是选择相似元素的最佳选择——如果有必要，只为这些元素添加另一个类。

# python - 重复获取列表中元素位置的更好方法？

> ID：13302390
> 
> 赞同：2
> 
> 时间：2012-11-09T05:06:54.930
> 
> 标签：python

我有一个整数列表（从 0 到 N），我需要创建一个新列表，其中包含第一个列表中每个整数的索引。

也就是说，给定

```
s = [4, 2, 6, 3, 0, 5, 1] 
```

确定`r`这样`s[r[i]] = i`

```
r = [4, 6, 1, 3, 0, 5, 2] 
```

我目前的解决方案是

```
r = [s.index(i) for i in xrange(len(s))] 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T05:26:10.167

我假设每个整数只`S`出现一次。您当前的解决方案将起作用，问题是`s.index`执行`O(N)`搜索，使其成为一项`O(N**2)`操作。

对于一个大列表，我希望下面的代码更快，因为它是`O(N)`

```
# initialise the whole list with some value
r = [-1]*N

for j, s_j in enumerate(s):
    r[s_j] = j

# if any element of r is still -1 then you know it did not appear in s 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T05:20:53.770

看起来字典会更好：

```
s = [4, 2, 6, 3, 0, 5, 1]
r = dict((v,i) for i,v in enumerate(s)) 
```

测试：

```
>>> for i,_ in enumerate(s):
...     print i, s[r[i]]
... 
0 0
1 1
2 2
3 3
4 4
5 5
6 6 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T05:22:26.223

就个人而言，您展示的方法很棒。

任何一个字典都可以——这将是我的第一次尝试：

```
r = {v:i for i, v in enumerate(s)} 
```

或者，如果您必须使用列表，另一种方法是：

```
r = [x[0] for x in sorted(enumerate(s), key=lambda v:v[1])] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T05:42:10.583

你可以使用`numpy`吗？

```
>>> import numpy as np
>>> s = np.array([4, 2, 6, 3, 0, 5, 1])
>>> s.argsort()
array([4, 6, 1, 3, 0, 5, 2], dtype=int64) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-09T06:04:57.797

我用 timit 模块 @10^6 次迭代 - 5 次重复做了一个简单的基准测试。

```
DaveP :       1.16 +/- 0.04s

koblas:       7.02s +/- 0.04s

Jon Clements: 1.82 +/- 0.02s

Zero Piraeus: 6.04 +/- 0.4s 
```

最后但并非最不重要：

```
r=s[:]
[r[s[i]] for i in s] 
```

我的建议：1.11 +/- 0.03s

# python - QObject::connect：无法在 PySide 中对“对象”类型的参数进行排队

> ID：13302393
> 
> 赞同：2
> 
> 时间：2012-11-09T05:07:00.983
> 
> 标签：python, multithreading, qt, events

我正在使用 PySide（Python Qt 绑定）。

我有一个 QThread 类的工作线程，它通过信号/插槽机制更新主 GUI 线程（更新 QTableWidget）。

在我的工作线程中，我有以下内容：

```
self.emit(SIGNAL("alterTable(object"), params) 
```

在我的 GUI 线程中，我有这个：

```
self.connect(self.worker, SIGNAL("alterTable(object)"), self.updateMainTable, Qt.AutoConnection) 
```

由于有几个类似的工作线程运行都连接到同一个插槽（the `self.updateMainTable`），我应该使用 AutoConnection（以及因此 QueuedConnection）。使用这些`Qt.DirectConnection`作品，但它不安全（或者我被告知）。

但是当我尝试使用 AutoConnection 时，出现以下错误：

```
QObject::connect: Cannot queue arguments of type 'object'
(Make sure 'object' is registered using qRegisterMetaType().) 
```

我已经用谷歌搜索了很久，试图找出一种如何`qRegisterMetaType()`在 PySide 中使用的方法，但无济于事。我在网上找到的所有资源都指向 C++ 语法/文档。

如果它有任何区别，那么`dict`大部分时间都是有问题的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:43:39.957

我想我自己找到了答案，不完全是答案，而是一个可行的解决方案。

我将所有信号切换为新式语法。如果有人想知道，我通过在我的工人类中定义一个自定义信号来做到这一点。所以我的代码看起来像这样

```
class Worker(QThread):

    alterTable = Signal(dict)

    def __init__(self, parent=None):
        ....
        self.alterTable.emit(parameters)

class GUI(QMainWindow):

    def __init__(self, parent=None):
        WorkerModule.Worker().alterTable.connect(self.myMethod) 
```

由于某种原因，信号必须在 QThread 类中；否则，Qt 会报错“Signal has no attribute connect”，这很奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-03T17:39:47.080

这里的答案令人难以置信地迟到了，我很抱歉。没有足够的声誉来为您接受的答案添加评论。我希望这可能对偶然发现您的问题的新 PySide/Pyside2 用户有所帮助。

问题：`QObject::connect: Cannot queue arguments of type 'object'`

解决方案：`self.connect(self.worker, SIGNAL("alterTable(PyObject)"), self.updateMainTable, Qt.AutoConnection)`

问题：`Qt complains about "Signal has no attribute connect" error`

解决方法：该`connect`属性是在QObject中实现的，所以必须先通过`QMainWindow.__init__(self)`or `super(GUI, self).__init__()`(Py2) or also `super().__init__()`(Py3)调用父类的init方法。

干杯。

# c++ - 给定两个点，找到线上的第三个点

> ID：13302396
> 
> 赞同：1
> 
> 时间：2012-11-09T05:07:20.520
> 
> 标签：c++, algorithm

我有两点作为程序`A (x1,y1)`的`B (x2,y2)`输入给出。我必须找到`C`位于线上`AB`并且`10`与点 A 相距一定距离的第三点。

我可以很容易地得到直线的斜率，但这并没有给我完整的直线方程。即使我得到了完整的方程，我也不确定使用这个方程，我怎么能找到一个`x`远离 A的点。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T05:17:36.897

每条线上总是有两个点：

*   `A`从to获取向量`B`（减去坐标）
*   标准化向量（除以它的长度；勾股定理）
*   将向量乘以 10**或**-10
*   将向量添加`A`到`C`

请注意，如果`A==B`，则未定义该行，并且此算法会导致除以零。您可能希望在开始时添加相等性测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T05:15:50.607

您可以使用直线角度的正弦或余弦（乘以 10）来获得与给定点相距 10 的点的水平或垂直距离。一个捷径是使用水平或垂直距离除以点之间的直接距离来获得正弦或余弦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T05:22:06.193

你可以使用这样的向量来做到这一点：

令 D = B 和 A 之间的差 (D = B - A)

那么这条线上的任何一点都可以用这个公式来描述：

```
point = A + Dt 
```

其中 t 是一个实数。

因此，只需为 t 插入任何值即可获得另一点。例如，如果您让 t == 1，那么上面的等式会简化为点 = B。如果您让 t = 0，那么它会简化为点 = A。所以您可以看到您可以使用它来找到 A 和 B 之间的点只需让 t 的范围从 0 到 1。此外，如果让 t > 1，您将找到 B 之后的点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T06:51:26.753

![在此处输入图像描述](../Images/51da91dd129883f097439d96e2f543eb.png)

您可以从图像中看到您给定的点是 x1,y1 和 x2,y2。您需要在距点 x1,y1 的距离“R”处找到一个中间点。

您需要做的就是使用

`Tan θ = (y2-y1)/(x2-x1)`

然后可以得到中间点为 (R * cos θ),(R * Sin θ)

我画了这个假设正斜率。

继续类似的路线，您可以为其他特殊情况寻求解决方案：

一世。水平线 ii。垂直线 iii。负斜率

希望它澄清。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-09T10:40:41.403

我已经使用 Sprite 对象在 Andengine 中完成了计算。我有两个数组列表 x 坐标和 y 坐标。在这里，我只是使用这两个数组列表中的最后两个值来计算距离您的点 B 800 像素的第三个点。您可以使用 800 以外的其他值对其进行修改。希望它会起作用。这里的坐标系是屏幕左上角的 (0,0) 位置略有不同。谢谢

```
private void addExtraCoordinate(CarSprite s) {
int x0, y0, x1, y1;
float x = 0f, y = 0f;
x0 = Math.round(xCoordinates.get(xCoordinates.size() - 2));
x1 = Math.round(xCoordinates.get(xCoordinates.size() - 1));
y0 = Math.round(yCoordinates.get(yCoordinates.size() - 2)) * (-1);
y1 = Math.round(yCoordinates.get(yCoordinates.size() - 1)) * (-1);

if (x1 == x0 && y1 == y0) {
    return;
} else if (y1 == y0 && x1 != x0) {
    if (x1 > x0) {
        x = (float) x1 + 800f;
    } else
        x = (float) x1 - 800f;
    y = Math.round(yCoordinates.get(yCoordinates.size() - 1));
} else if (y1 != y0 && x1 == x0) {
    if (y1 > y0) {
        y = (float) Math.abs(y1) - 800f;
    } else
        y = (float) Math.abs(y1) + 800f;
    x = Math.round(xCoordinates.get(xCoordinates.size() - 1));
} else {
    float m = (float) (yCoordinates.get(yCoordinates.size() - 1) * (-1) - yCoordinates
            .get(yCoordinates.size() - 2) * (-1))
            / (float) (xCoordinates.get(xCoordinates.size() - 1) - xCoordinates
                    .get(xCoordinates.size() - 2));
    if (x1 > x0) {
        x = (float) ((float) x1 + 800f / (float) Math
                .sqrt((double) ((double) 1f + (double) (m * m))));
    } else
        x = (float) ((float) x1 - 800f / (float) Math
                .sqrt((double) ((double) 1f + (double) (m * m))));

    if (y0 > y1) {
        y = (float) ((float) Math.abs(y1) + 800f / (float) Math
                .sqrt((double) (((double) 1f / (double) (m * m)) + (double) 1f)));
    } else
        y = (float) ((float) Math.abs(y1) - 800f / (float) Math
                .sqrt((double) (((double) 1f / (double) (m * m)) + (double) 1f)));
}

xCoordinates.add(x);
yCoordinates.add(y); 
```

}

# complexity-theory - 前缀时间和空间复杂度的中缀

> ID：13302402
> 
> 赞同：0
> 
> 时间：2012-11-09T05:08:15.363
> 
> 标签：complexity-theory, time-complexity, prefix, infix-notation, space-complexity

我一直在编写一个 Java 程序，使用操作数堆栈和运算符堆栈从中缀表示法转换为前缀表示法。我已经根据此处最佳答案中的伪代码实现了一个工作转换器：

[中缀到前缀的转换](https://stackoverflow.com/questions/1946896/conversion-from-infix-to-prefix)

但是，我现在正在尝试计算上述算法的时间和空间复杂度。

我认为空间复杂度必须是 O(n)，因为我们只有两个堆栈来存储它们之间共享的输入。

考虑到时间复杂度，我不完全确定，是不是 O(n^2) 因为必须将每个子部分从中缀转换为前缀？我不太确定这部分。

基本上我的问题是：我的空间复杂度结果是否正确，算法的时间复杂度是多少？

非常感谢！

**编辑：** 这是算法的伪代码：

```
Algorithm ConvertInfixtoPrefix

Purpose: Convert and infix expression into a prefix expression. Begin 
// Create operand and operator stacks as empty stacks. 
Create OperandStack
Create OperatorStack

// While input expression still remains, read and process the next token.

while( not an empty input expression ) read next token from the input expression

// Test if token is an operand or operator 
if ( token is an operand ) 
// Push operand onto the operand stack. 
    OperandStack.Push (token)
endif

// If it is a left parentheses or operator of higher precedence than the last, or the stack is empty,
else if ( token is '(' or OperatorStack.IsEmpty() or OperatorHierarchy(token) > OperatorHierarchy(OperatorStack.Top()) )
// push it to the operator stack
    OperatorStack.Push ( token )
endif

else if( token is ')' ) 
// Continue to pop operator and operand stacks, building 
// prefix expressions until left parentheses is found. 
// Each prefix expression is push back onto the operand 
// stack as either a left or right operand for the next operator. 
    while( OperatorStack.Top() not equal '(' ) 
        OperatorStack.Pop(operator) 
        OperandStack.Pop(RightOperand) 
        OperandStack.Pop(LeftOperand) 
        operand = operator + LeftOperand + RightOperand 
        OperandStack.Push(operand) 
    endwhile

// Pop the left parthenses from the operator stack. 
OperatorStack.Pop(operator)
endif

else if( operator hierarchy of token is less than or equal to hierarchy of top of the    operator stack )
// Continue to pop operator and operand stack, building prefix 
// expressions until the stack is empty or until an operator at 
// the top of the operator stack has a lower hierarchy than that 
// of the token. 
    while( !OperatorStack.IsEmpty() and OperatorHierarchy(token) lessThen Or Equal to OperatorHierarchy(OperatorStack.Top()) ) 
        OperatorStack.Pop(operator) 
        OperandStack.Pop(RightOperand) 
        OperandStack.Pop(LeftOperand) 
        operand = operator + LeftOperand + RightOperand 
        OperandStack.Push(operand)
    endwhile 
    // Push the lower precedence operator onto the stack 
    OperatorStack.Push(token)
endif
endwhile 
// If the stack is not empty, continue to pop operator and operand stacks building 
// prefix expressions until the operator stack is empty. 
while( !OperatorStack.IsEmpty() ) OperatorStack.Pop(operator) 
OperandStack.Pop(RightOperand) 
OperandStack.Pop(LeftOperand) 
operand = operator + LeftOperand + RightOperand

OperandStack.Push(operand) 
endwhile

 // Save the prefix expression at the top of the operand stack followed by popping // the      operand stack.

print OperandStack.Top()

OperandStack.Pop()

End 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:18:28.100

是的，O(n^2) 看起来是正确的——因为本质上你有一个外部和一个内部 while 循环。

编辑：O(m *n) 其中 m <= n，但仍然是二次的

# python - Python：如何获取列表列表，将每个元素转换为字符串，并返回列表列表？

> ID：13302403
> 
> 赞同：0
> 
> 时间：2012-11-09T05:08:17.173
> 
> 标签：python

例如：

```
list = [[11,2,3,5],[5,3,74,1,90]] 
```

返回相同的东西，只有一切都是 str 而不是 int。我希望能够在他们身上使用 .join。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T05:10:27.933

如果您只深入 2 个列表：

```
>>> l = [[11, 2, 3, 5], [5, 3, 74, 1, 90]]
>>> [[str(j) for j in i] for i in l]
[['11', '2', '3', '5'], ['5', '3', '74', '1', '90']] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T05:11:02.360

我会使用 list-comp 并`map`为此：

```
[ map(str,x) for x in lst ] 
```

* * *

但我想 py3.x 需要`list`在那里添加（恶心）。

```
[ list(map(str,x)) for x in lst ] 
```

* * *

作为旁注，您不能`join`在我们返回的此列表中使用。我猜你想做这样的事情：

```
for x in lst:
   print ("".join(x)) 
```

如果是这种情况，您可以一起放弃转换，并在加入时进行：

```
for x in lst:
   print ("".join(str(item) for item in x)) 
```

# java - Sitebricks JSON 默认序列化程序。为什么它返回 text/json 而不是 application/json

> ID：13302404
> 
> 赞同：0
> 
> 时间：2012-11-09T05:08:27.127
> 
> 标签：java, json, serialization, content-type, sitebricks

嗯...我打算只问一个问题。但我决定*用一块石头杀死两只鸟*。

**第一个问题**：Sitebricks 使用什么作为 Java POJO 和 JSON 之间的默认序列化器/反序列化器？例如，假设这是我的 POJO：

```
public class MyObject {
    private String key;
    private int value;
    public MyObject (String k, int v) {
        this.key = k;
        this.value = v;
    }
} 
```

这是我的 Sitebricks servlet 中的一个方法示例：

```
@Get
public Reply<?> listPools() {
    return Reply.with(new MyObject("Foo", 6)).as(Json.class);
} 
```

我没有`MyObject`使用任何**Jackson**注释进行注释，也没有在代码中的任何地方使用**GSON**。然而，令我惊讶的是，我在回复中将其作为我的内容主体返回：

```
{"value":6,"key":"Foo"} 
```

所以我想知道的是，Sitebricks 默认使用什么技术或框架来序列化-反序列化 JSON。杰克逊？格森？巫术和巫术？

现在是**第二个问题**。我在标题中注意到响应*Content-Type*是`text/json`. 这对我来说看起来很奇怪，因为在我过去的经验中，我一直将`application/json`JSON 作为 Content-Type 来处理。这篇[Stackoverflow 帖子](https://stackoverflow.com/questions/477816/the-right-json-content-type)证实了我的信念。对此有何评论？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:11:40.893

Sitebricks 默认使用 Jackson，它将使用合理的默认值在没有任何配置的情况下转换对象。如果要覆盖该行为，请使用标准 Jackson 规定的配置绑定 ObjectMapper。

在大多数情况下，您可能应该设置 application/json ，正确的。SB应该设置这个，你是对的，我会在trunk中进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:58:19.037

仍然可以通过以下方式随时更改它

```
 return Reply.with(...).as(Json.class).type("application/json; charset=utf-8"); 
```

# c# - 想合并多次填写的PDF表格

> ID：13302405
> 
> 赞同：0
> 
> 时间：2012-11-09T05:08:38.970
> 
> 标签：c#, itextsharp

我有一份由主管（或用户）填写的 PDF 表格。
我想合并生成的 PDF。
我已经完成了简单的合并，但在其中我必须首先生成多个文件然后合并它们。
有没有什么方法可以让用户填写多个表格，然后在最终提交或打印时，我只得到所有填写的 PDF 的一个合并。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:52:02.170

试试这个合并功能来合并 PDF 文件：

```
public static void Merge(string[] sourceFiles, string destinationFile)
{
    try
    {
        int f = 0;
        // we create a reader for a certain document
        PdfReader reader = new PdfReader(sourceFiles[f]);
        // we retrieve the total number of pages
        int n = reader.NumberOfPages;
        //Debug.WriteLine("There are " + n + " pages in the original file.");
        // step 1: creation of a document-object
        Document document = new Document(reader.GetPageSizeWithRotation(1));
        // step 2: we create a writer that listens to the document
        PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(destinationFile, FileMode.Create));
        // step 3: we open the document
        document.Open();
        PdfContentByte cb = writer.DirectContent;
        PdfImportedPage page;
        int rotation;
        // step 4: we add content
        while (f < sourceFiles.Length)
        {
            int i = 0;
            while (i < n)
            {
                i++;
                document.SetPageSize(reader.GetPageSizeWithRotation(i));
                document.NewPage();
                page = writer.GetImportedPage(reader, i);
                rotation = reader.GetPageRotation(i);
                if (rotation == 90 || rotation == 270)
                {
                    cb.AddTemplate(page, 0, -1f, 1f, 0, 0, reader.GetPageSizeWithRotation(i).Height);
                }
                else
                {
                    cb.AddTemplate(page, 1f, 0, 0, 1f, 0, 0);
                }
                //Debug.WriteLine("Processed page " + i);
            }
            f++;
            if (f < sourceFiles.Length)
            {
                reader = new PdfReader(sourceFiles[f]);
                // we retrieve the total number of pages
                n = reader.NumberOfPages;
                //Debug.WriteLine("There are " + n + " pages in the original file.");
            }
        }
        // step 5: we close the document
        document.Close();
    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

参考：[使用 iTextSharp 合并 PDF 文件](http://www.khswsoft.be/Blog/tabid/81/EntryId/16/Merge-PDF-Files-using-iTextSharp.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T08:07:59.240

基于我在上面的评论中获取的合并代码。我用它来写入 http 响应的输出流。它返回一个 byte[]，但您可以使用原始代码和 this 来完成工作。

```
public static byte[] MergeFiles(List<byte[]> sourceFiles)
    {
        Document document = new Document();
        MemoryStream output = new MemoryStream();

        try
        {
            // Initialize pdf writer
            PdfWriter writer = PdfWriter.GetInstance(document, output);

            // Open document to write
            document.Open();
            PdfContentByte content = writer.DirectContent;

            // Iterate through all pdf documents
            for (int fileCounter = 0; fileCounter < sourceFiles.Count; fileCounter++)
            {
                // Create pdf reader
                PdfReader reader = new PdfReader(sourceFiles[fileCounter]);
                int numberOfPages = reader.NumberOfPages;

                // Iterate through all pages
                for (int currentPageIndex = 1; currentPageIndex <=
                                   numberOfPages; currentPageIndex++)
                {
                    // Determine page size for the current page
                    document.SetPageSize(
                       reader.GetPageSizeWithRotation(currentPageIndex));

                    // Create page
                    document.NewPage();
                    PdfImportedPage importedPage =
                      writer.GetImportedPage(reader, currentPageIndex);

                    // Determine page orientation
                    int pageOrientation = reader.GetPageRotation(currentPageIndex);
                    if ((pageOrientation == 90) || (pageOrientation == 270))
                    {
                        content.AddTemplate(importedPage, 0, -1f, 1f, 0, 0,
                           reader.GetPageSizeWithRotation(currentPageIndex).Height);
                    }
                    else
                    {
                        content.AddTemplate(importedPage, 1f, 0, 0, 1f, 0, 0);
                    }
                }
            }
        }
        catch (Exception exception)
        {
            throw new Exception("There has an unexpected exception" +
                  " occured during the pdf merging process.", exception);
        }
        finally
        {
            document.Close();
        }
        return output.GetBuffer();
    } 
```

# c++ - 在 C++ 中序列化二进制数据的正确方法

> ID：13302407
> 
> 赞同：4
> 
> 时间：2012-11-09T05:08:59.637
> 
> 标签：c++, c, serialization, binary, undefined-behavior

在阅读了以下[1](https://stackoverflow.com/questions/12612488/aliasing-t-with-char-is-allowed-is-it-also-allowed-the-other-way-around)和[2](https://stackoverflow.com/questions/13280771/is-this-use-of-stdarray-undefined-behavior?) Q/As 并在具有 GCC 和 MSVC 的 x86 架构上使用了下面讨论的技术多年并且没有看到问题之后，我现在对什么应该是正确的感到非常困惑，但是也是使用 C++ 序列化然后反序列化二进制数据的重要“最有效”方式。

鉴于以下“错误”代码：

```
int main()
{
   std::ifstream strm("file.bin");

   char buffer[sizeof(int)] = {0};

   strm.read(buffer,sizeof(int));

   int i = 0;

   // Experts seem to think doing the following is bad and
   // could crash entirely when run on ARM processors:
   i = reinterpret_cast<int*>(buffer); 

   return 0;
} 
```

现在，据我了解，重新解释强制转换向编译器表明它可以将缓冲区中的内存视为整数，然后可以自由发出整数兼容指令，这些指令要求/假设相关数据的某些对齐 - 唯一的开销是当 CPU 检测到它试图执行面向对齐的指令的地址时，额外的读取和移位实际上没有对齐。

也就是说，就 C++ 而言，上面提供的答案似乎表明这都是未定义的行为。

假设缓冲区中将发生强制转换的位置的对齐方式不符合要求，那么解决这个问题的唯一方法是逐个复制字节，这是真的吗？是否有更有效的技术？

此外，多年来我见过许多完全由 pod 组成的结构（使用编译器特定的编译指示来删除填充）被转换为 char* 并随后写入文件或套接字，然后再读回缓冲区的情况并且缓冲区转换回原始结构的指针（忽略机器之间潜在的字节序和浮点/双精度格式问题），这种代码是否也被视为未定义行为？

下面是更复杂的例子：

```
int main()
{
   std::ifstream strm("file.bin");

   char buffer[1000] = {0};

   const std::size_t size = sizeof(int) + sizeof(short) + sizeof(float) + sizeof(double);

   const std::size_t weird_offset = 3;

   buffer += weird_offset;

   strm.read(buffer,size);

   int    i = 0;
   short  s = 0;
   float  f = 0.0f;
   double d = 0.0;

   // Experts seem to think doing the following is bad and
   // could crash entirely when run on ARM processors:
   i = reinterpret_cast<int*>(buffer); 
   buffer += sizeof(int);

   s = reinterpret_cast<short*>(buffer); 
   buffer += sizeof(short);

   f = reinterpret_cast<float*>(buffer); 
   buffer += sizeof(float);

   d = reinterpret_cast<double*>(buffer); 
   buffer += sizeof(double);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T05:28:36.883

首先，您可以使用 std::aligned_storage::value>::type 代替 char[sizeof(int)] （或者，如果您没有 C++ 11，可能有类似的编译器特定的功能）。

即使您正在处理一个复杂的 POD，`aligned_stored`并且`alignment_of`会给您一个缓冲区，您可以`memcpy`将 POD 放入和取出，将其构造成等等。

在一些更复杂的情况下，您需要编写更复杂的代码，可能会使用编译时算术和基于模板的静态开关等，但据我所知，在 C++11 审议期间没有人提出案例这是新功能无法处理的。

但是，仅`reinterpret_cast`在随机字符对齐缓冲区上使用是不够的。让我们看看为什么：

> 重新解释强制转换向编译器表明它可以将缓冲区中的内存视为整数

是的，但是您还表明它可以假定缓冲区针对整数正确对齐。如果您对此撒谎，则可以免费生成损坏的代码。

> 随后可以自由发布整数兼容指令，这些指令要求/假设相关数据的某些对齐方式

是的，可以自由发布需要这些对齐的指令，或者假设它们已经被处理好。

> 唯一的开销是当 CPU 检测到它试图执行面向对齐的指令的地址实际上没有对齐时额外的读取和移位。

是的，它可能会发出带有额外读取和移位的指令。但它也可能会发出不这样做的指令，因为你告诉它它不必这样做。因此，它可以发出“读取对齐字”指令，当用于非对齐地址时会引发中断。

一些处理器没有“读取对齐字”指令，只是“读取字”对齐比没有对齐更快。其他可以配置为抑制陷阱，而是退回到较慢的“读取字”。但其他人——比如 ARM——只会失败。

> 假设缓冲区中将发生强制转换的位置的对齐方式不符合要求，那么解决这个问题的唯一方法是逐个复制字节，这是真的吗？是否有更有效的技术？

您不需要逐个复制字节。例如，您可以将`memcpy`每个变量一个一个地复制到正确对齐的存储中。（如果您的所有变量都是 1 字节长，那只会是 1 个字节地复制字节，在这种情况下，您首先不会担心对齐问题……）

至于将 POD 转换为 char* 并使用编译器特定的编译指示返回……嗯，任何依赖编译器特定编译指示来确保正确性（而不是效率）的代码显然都是不正确的、可移植的 C++。有时“在具有 IEEE 64 位双精度的任何 64 位 little-endian 平台上使用 g++ 3.4 或更高版本正确”对于您的用例来说已经足够了，但这与实际上是有效的 C++ 不同。而且您当然不能指望它可以在具有 80 位双精度的 32 位大端平台上与 Sun cc 一起工作，然后抱怨它不能。

对于您稍后添加的示例：

```
// Experts seem to think doing the following is bad and
// could crash entirely when run on ARM processors:
buffer += weird_offset;

i = reinterpret_cast<int*>(buffer); 
buffer += sizeof(int); 
```

专家是对的。这是同一件事的一个简单示例：

```
int i[2];
char *c = reinterpret_cast<char *>(i) + 1;
int *j = reinterpret_cast<int *>(c);
int k = *j; 
```

该变量`i`将在某个可被 4 整除的地址对齐，例如 0x01000000。因此，`j`将位于 0x01000001。所以该行将`int k = *j`发出一条指令，从 0x01000001 读取一个 4 字节对齐的 4 字节值。例如，在 PPC64 上，它只需要大约 8 倍的时间`int k = *i`，但在 ARM 上，它会崩溃。

所以，如果你有这个：

```
int    i = 0;
short  s = 0;
float  f = 0.0f;
double d = 0.0; 
```

你想把它写到一个流中，你是怎么做的？

```
writeToStream(&i);
writeToStream(&s);
writeToStream(&f);
writeToStream(&d); 
```

你如何从流中读回？

```
readFromStream(&i);
readFromStream(&s);
readFromStream(&f);
readFromStream(&d); 
```

大概你正在使用的任何类型的流（无论是`ifstream`, `FILE*`, 不管）都有一个缓冲区，所以`readFromStream(&f)`要检查是否有`sizeof(float)`可用的字节，如果没有，则读取下一个缓冲区，然后将第一个`sizeof(float)`字节从缓冲区复制到地址的`f`。（事实上​​，它甚至可能更聪明——例如，它可以检查您是否刚刚*接近*缓冲区的末尾，如果是，则发出异步预读，如果库实现者认为这是一个好主意.) 该标准没有说明它必须如何进行复制。标准库不必在任何地方运行，只要在它们所属的实现上运行，因此您的平台`ifstream`可以使用`memcpy`, 或`*(float*)`, 或编译器内在的, 或内联汇编——它可能会使用你平台上最快的东西。

那么，未对齐的访问究竟将如何帮助您优化或简化它呢？

在几乎所有情况下，选择正确的流类型，并使用它的读写方法，是最有效的读写方式。而且，如果您从标准库中选择了一个流，那么它也可以保证是正确的。所以，你已经得到了两全其美。

如果您的应用程序有什么特别之处可以让不同的东西更有效率——或者如果你是编写标准库的人——那么你当然应该继续这样做。只要您（以及您的代码的任何潜在用户）知道您在哪里违反标准以及为什么（并且您实际上是在优化事物，而不是仅仅因为它“看起来应该更快”而做某事），这是完全合理的。

您似乎认为能够将它们放入某种“打包结构”并编写它会有所帮助，但 C++ 标准没有任何“打包结构”之类的东西。一些实现具有非标准特性，您可以使用这些特性。例如，MSVC 和 gcc 都允许您在 i386 上将上述内容打包成 18 个字节，并且您可以将打包的结构和`memcpy`它`reinterpret_cast`通过`char *`网络发送，无论如何。但它与由不理解您的编译器特殊编译指示的不同编译器编译的完全相同的代码不兼容。它甚至不兼容相关的编译器，比如 ARM 的 gcc，它将相同的东西打包成 20 个字节。当您使用标准的不可移植扩展时，结果是不可移植的。

# c - C程序空值解析

> ID：13302412
> 
> 赞同：4
> 
> 时间：2012-11-09T05:09:20.097
> 
> 标签：c

我已经编写了一个代码来使用贪婪算法和动态算法来计算硬币的最小数量，但是动态算法部分不能正常工作。数组中有一个 Null 值，我找不到它。请帮我。我需要尽快得到答复。

```
#include <stdio.h>
int n;
int denom[]={1,2,4,5,20,25};
int coinCounter(int n);
int main(){

     printf("Please Enter a Number : ");
     scanf("%d",&n);
    int coinmin,orin,i;
    orin=n;
    i=coinmin=0;
     for(i=(sizeof(denom)/4)-1;i>=0;i--){

         coinmin =coinmin+n/denom[i];
          n=n%denom[i];
      }

    printf("Coin Min By Greedy Algorithm : %d\n",coinmin);
    printf("Dynamic Algorithm : %d\n",coinCounter(orin));
    return 0;
}

int coinCounter(int n){
    int opt[n];
    int largest[n];
    int i,j,a;
    i=j=0;
    for(j=1;j<=n;j++){

        opt[j]=10000;
         //printf("xxn");
        for(i=(sizeof(denom)/4)-1;i>=0;i--){

            if(denom[i]==j){

                opt[j]=1;
                largest[j]=j;
            }
            else if(denom[i]<j){
                a=opt[j-denom[i]]+1;
            }
            if(a<opt[j]){
                opt[j]=a;
                largest[j]=denom[i];
            }
        }

    }
     return opt[n];

} 
```

我编辑了代码如下，但答案没有出现

```
int coinCounter(int n){
    int opt[n];
    int largest[n];
    int i,j,a;
    i=j=0;
    for(j=1;j<n;j++){

        opt[j]=10000;
         printf("xxn");
        for(i=(sizeof(denom)/4)-1;i>=0;i--){

            if(denom[i]==j){

                opt[j]=1;
                largest[j]=j;
            }
            else if(denom[i]<j){
                a=opt[j-denom[i]]+1;
            }
            if(a<opt[j]){
                opt[j]=a;
                largest[j]=denom[i];
            }
        }

    }
     return opt[n-1];

} 
```

嘿，这些是我得到的结果

```
请输入数字：8
贪心算法的硬币最小值：3
动态算法：1

```

我得到的另一个答案我无法弄清楚我做错了什么

```
请输入数字：71
贪心算法的硬币最小值：4
动态算法：3

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T05:11:41.877

### 1

```
int opt[n]; // not the right way to do dynamic allocation. Use malloc/calloc
int largest[n]; 
```

### 2

```
for(j=1;j<=n;j++){
          ^ array is indexed from 0...n-1, index-n is outside array bounds 
```

**不要这样做。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T05:41:53.327

```
int coinCounter(int n){
    int opt[n];
    int largest[n]; <---- Don't do this. This does not work like you expect it to. 
```

改成

```
int coinCounter(int n){
        int opt[n];
        int *largest = malloc(sizeof(int)*n); 
```

编辑：

该算法的另一个错误

您的变量“a”未初始化，您在 if 条件下使用它。

想想当`denom[i]>j` 你的变量**“a”没有被初始化**的 情况，所以取决于它有什么垃圾值，结果会有所不同。错误在这里，但是当你更改 opt 分配时它会出现，因为该分配会改变条件。我想说的是 - `if (X<Y)`，取决于 X 和 Y。问题出在 X 上，但是因为你改变了 Y，条件改变了，你得到不同的结果

# ruby-on-rails - Rails - 电子邮件视图中的邮件程序实例变量 Nil

> ID：13302414
> 
> 赞同：2
> 
> 时间：2012-11-09T05:09:33.310
> 
> 标签：ruby-on-rails, actionmailer, instance-variables

我正在尝试使用 railscasts 第 124 集的结构创建 beta 邀请，为 rails 3.2.8 更新。

目前，邀请电子邮件已发送，但不包含供用户注册的 url（包括邀请令牌），因为我在 ActionMailer (@invitation_link) 中创建的实例变量在视图中为零。在 ActionMailer 控制器中检查 @invitation_link 表明它指向正确的 url，但在视图中它是 nil。

我还检查了以下问题，但没有一个解决方案对我有用：

[如何在 Ruby on Rails 中将实例变量与邮件程序一起使用？](https://stackoverflow.com/questions/2122320/how-do-you-use-an-instance-variable-with-mailer-in-ruby-on-rails)

[https://stackoverflow.com/questions/5831038/unable-to-access-instance-variable-in-mailer-view](https://stackoverflow.com/questions/5831038/unable-to-access-instance-variable-in-mailer-view)

[Actionmailer 实例变量问题 Ruby on Rails](https://stackoverflow.com/questions/7054521/actionmailer-instance-variable-problem-ruby-on-rails)

[ActionMailer 将局部变量传递给 erb 模板](https://stackoverflow.com/questions/12317000/actionmailer-pass-local-variables-to-the-erb-template)

相关代码片段如下：

**邀请控制器.rb**

```
class InvitationsController < ApplicationController
  def new
    @invitation = Invitation.new
  end

  def create
    @invitation = Invitation.new(params[:invitation])
    @invitation.sender = current_user
    if @invitation.save
      if signed_in?
        InvitationMailer.invitation(@invitation).deliver
        flash[:notice] = "Thank you, invitation sent."
        redirect_to current_user
      else
        flash[:notice] = "Thank you, we will notify when we are ready."
        redirect_to root_url
      end
    else
      render :action => 'new'
    end
  end
end 
```

**在invitation_mailer.rb 文件中**

```
class InvitationMailer < ActionMailer::Base
  default from: "holler@thesite.com", content_type: "text/html"

  def invitation(invitation)
    mail to: invitation.recipient_email, subject: "Invitation"
    @invitation_link = invited_url(invitation.token)
    invitation.update_attribute(:sent_at, Time.now)
  end
end 
```

**意见/invitation_mailer/invitation.text.erb**

```
You are invited to join the site!

<%= @invitation_link %> # INSTANCE VARIABLE THAT IS NIL IN VIEW 
```

**routes.rb（仅显示相关行）**

```
match '/invited/:invitation_token', to:  'users#new_invitee', as: 'invited' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T06:50:33.143

试试这个方法

这是你的`InvitationMailer`

```
def invitation(invitation)
  @invitation = invitation
  mail(:to => @invitation.recipient_email, :subject => "Invitation")
end 
```

现在，在你的`InvitationsController`

```
if signed_in?
  @invitation.update_attribute(:sent_at, Time.now)
  InvitationMailer.invitation(@invitation).deliver
  ...
else
  ...
end 
```

现在，`views/invitation_mailer/invitation.text.erb`

```
You are invited to join the site!
<%= invited_url(@invitation.token) %> # INSTANCE VARIABLE THAT IS NIL IN VIEW 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:22:54.443

试试这个...

`@invitation_link = invited_url(invitation.token, :host => "localhost:3000")`

# java - 在 Java Swing GUI 中运行 .bat 不起作用

> ID：13302416
> 
> 赞同：0
> 
> 时间：2012-11-09T05:09:41.810
> 
> 标签：java, swing, user-interface, exec, runtime.exec

使用以下代码，我可以执行 .bat 文件（没有 GUI，只有以下几行）。但是，当我将它作为按钮的 ActionListener 方法（它是一个 Java Swing 应用程序）添加时，.bat 文件永远不会执行。有任何想法吗？

```
Runtime runtime = Runtime.getRuntime();
try {
    Process proc = runtime.exec("cmd /c start C:\\Users\\someName\\Desktop\\test.bat");
} catch (IOException e1) {
    e1.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:40:44.967

我也遇到同样的错误。

你可以这样使用

公共无效actionPerformed（java.awt.event.ActionEvent evt）{

```
 File file = new File("filename.bat");
            try {
                Desktop.getDesktop().open(file);
                } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            jButton1ActionPerformed(evt);
        } 
```

# asp.net - 存储过程执行但无法访问 asp.net 中的数据

> ID：13302420
> 
> 赞同：0
> 
> 时间：2012-11-09T05:10:27.623
> 
> 标签：asp.net, sql-server, stored-procedures, data-access-layer

我有一个在 SQL Server 中完美执行的存储过程。但是我无法从数据访问层访问它在 asp.net 中返回的行

我的`DataAccessLayer`代码如下：

```
 public List<AdvancePaymentRep> getPaymentAdvanceData(int? InternalCompany = 0, string Currency = "", DateTime? InvoiceDateFrom = null, DateTime? InvoiceDateTo = null, DateTime? AdvDateDueFrom = null, DateTime? AdvDateDueTo = null)
    {
      CreateConnectionString();
      List<AdvancePaymentRep> paymentAdvanceCollection = new List<AdvancePaymentRep>();
      SqlDataReader rdrval = null;
      SqlCommand command1 = sqlConnection.CreateCommand();
      command1.CommandType = System.Data.CommandType.StoredProcedure;
      command1.CommandText = "[dbo].[NST_GetDataForAdvancePaymentReport]";

      if (InternalCompany != 0)
      {

        SqlParameter parametersInternalCompany = new SqlParameter();
        parametersInternalCompany.ParameterName = "@AlhInternalCie";
        parametersInternalCompany.SqlDbType = System.Data.SqlDbType.Int;
        parametersInternalCompany.Direction = ParameterDirection.Input;
        parametersInternalCompany.Value = InternalCompany;
        command1.Parameters.Add(parametersInternalCompany);
      }

      SqlParameter parametersCurrency = new SqlParameter();
      parametersCurrency.ParameterName = "@AlhCurrency";
      parametersCurrency.SqlDbType = System.Data.SqlDbType.NVarChar;
      parametersCurrency.Direction = ParameterDirection.Input;
      parametersCurrency.Value = Currency;
      command1.Parameters.Add(parametersCurrency);

      if (InvoiceDateFrom != Convert.ToDateTime("01/01/0001 00:00:00"))
      {

        SqlParameter parametersInvoiceDateFrom = new SqlParameter();
        parametersInvoiceDateFrom.ParameterName = "@AldDtCreatedFrom";
        parametersInvoiceDateFrom.SqlDbType = System.Data.SqlDbType.Date;
        parametersInvoiceDateFrom.Direction = ParameterDirection.Input;
        parametersInvoiceDateFrom.Value = InvoiceDateFrom;
        command1.Parameters.Add(parametersInvoiceDateFrom);
      }

      if (InvoiceDateTo != Convert.ToDateTime("01/01/0001 00:00:00"))
      {
        SqlParameter parametersInvoiceDateTo = new SqlParameter();
        parametersInvoiceDateTo.ParameterName = "@AldDtCreatedTo";
        parametersInvoiceDateTo.SqlDbType = System.Data.SqlDbType.Date;
        parametersInvoiceDateTo.Direction = ParameterDirection.Input;
        parametersInvoiceDateTo.Value = InvoiceDateTo;
        command1.Parameters.Add(parametersInvoiceDateTo);

      }

      if (AdvDateDueFrom != Convert.ToDateTime("01/01/0001 00:00:00"))
      {
        SqlParameter parametersInvoiceDateDueFrom = new SqlParameter();
        parametersInvoiceDateDueFrom.ParameterName = "@InvhDtDueFrom";
        parametersInvoiceDateDueFrom.SqlDbType = System.Data.SqlDbType.Date;
        parametersInvoiceDateDueFrom.Direction = ParameterDirection.Input;
        parametersInvoiceDateDueFrom.Value = AdvDateDueFrom;
        command1.Parameters.Add(parametersInvoiceDateDueFrom);
      }

      if (AdvDateDueTo != Convert.ToDateTime("01/01/0001 00:00:00"))
      {
        SqlParameter parametersInvoiceDateDueTo = new SqlParameter();
        parametersInvoiceDateDueTo.ParameterName = "@InvhDtDueTo";
        parametersInvoiceDateDueTo.SqlDbType = System.Data.SqlDbType.Date;
        parametersInvoiceDateDueTo.Direction = ParameterDirection.Input;
        parametersInvoiceDateDueTo.Value = AdvDateDueTo;
        command1.Parameters.Add(parametersInvoiceDateDueTo);
      }

      try
      {
        if (sqlConnection == null)
        {
          sqlConnection.Open();
        }
        rdrval = command1.ExecuteReader(); // Getting HasRows = false out here 
```

编辑：已经解决了我如何提供的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:17:51.860

SP 中的最后一个命令应该是一个`SELECT`命令。否则，您会得到其他结果，例如受影响的行数等。Management Studio 仍然能够显示从`SELECT`您的 SP 中的一个 s 创建的行，但实际上它们不是当您针对该 SP 调用 ADO.NET 命令时返回的第一个“事物”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:21:12.713

在你之后

```
rdrval = command1.ExecuteReader(); 
```

你需要做类似的事情

```
while (rdrval.Read()) 
{
  //do something
} 
```

# c++ - Apple mach O 链接器

> ID：13302425
> 
> 赞同：2
> 
> 时间：2012-11-09T05:11:10.583
> 
> 标签：c++, xcode, linker

我有一个链接器错误，我似乎不知道：

默认构造函数设置 name 为“Unknown”，Office Number 为 nextOfficeNo，Employee number 为 nextEmpId 的值，Department number 为 0，Employee Position 为 Entry level，工作年限为 0，salary 为 0。所有静态属性的值都加 1。

第二个构造函数根据传递给函数的内容设置属性。Employee Salary 的值仍将设置为 0，Office Number 和 Employee number 的值分别设置为 nextOfficeNo 和 nextEmpId。同样，构造函数应该将所有静态属性的值增加 1。totalNumOfEmployees 的值必须在创建任何对象之前初始化为 0，在创建 Employee 类的每个对象时递增（在每个构造函数中），并在 Employee 类的对象超出范围时递减（在析构函数中）。

nextEmpId 的值必须在创建任何对象之前初始化为 1000，并且必须在每个构造函数中创建 Employee 类的每个对象时递增。

nextOfficeNo 的值必须在创建任何对象之前初始化为 10，并且必须在每个构造函数中创建 Employee 类的每个对象时递增。

这是我的头类：

```
#include <iostream>
#include <string>
using namespace std;

class Employee
{
private:
    string name;
    const long officeNo;
    const long empId;
    int deptNo;
    char empPosition; // ‘E’: entry level, ‘M’: manager, ‘D’: Director, ‘P’:Project_leader
    int yearOfExp;
    float salary;
    static int totalNumofEmployees;
    static int nextEmpId;
    static int nextOfficeNo;
public:
    Employee();
    ~Employee();
    Employee(string theName, int theDeptNo, char theEmpPosition, int theYearOfExp);
    void Print() const ;
    void GetInfo();
    friend void setSalary(Employee& );
 }; 
```

这是我的 CPP 课程：
我的构造函数有问题：

```
#include "Employee.h"
#include <string>
#include <iostream>

Employee::Employee()
  : officeNo(nextOfficeNo), empId(nextEmpId)
{
    name = "Unknown";
    deptNo = 0;
    empPosition = 'E';
    yearOfExp = 0;
    salary = 0;
    totalNumofEmployees = 0;
    nextEmpId = 1000;
    nextOfficeNo = 10;
    totalNumofEmployees++;
    nextEmpId++;
    nextOfficeNo++;
}

Employee::Employee(string theName, int theDeptNo, char theEmpPosition, int theYearOfExp)
  : officeNo(nextOfficeNo), empId(nextEmpId)
{
    name = theName;
    deptNo = theDeptNo;
    empPosition = theEmpPosition;
    yearOfExp = theYearOfExp;
    salary = 0;
    totalNumofEmployees = 0;
    nextEmpId = 1000;
    nextOfficeNo = 10;
    totalNumofEmployees++;
    nextEmpId++;
    nextOfficeNo++;
} 
```

以下是错误：

```
{Undefined symbols for architecture x86_64:
"Employee::nextOfficeNo", referenced from:
Employee::Employee() in Employee.o
Employee::Employee(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, int, char, int) in Employee.o
"Employee::totalNumofEmployees", referenced from:
Employee::Employee() in Employee.o
Employee::Employee(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, int, char, int) in Employee.o
Employee::~Employee() in Employee.o
Employee::Print() const in Employee.o
"Employee::nextEmpId", referenced from:
Employee::Employee() in Employee.o
Employee::Employee(std::__1::basic_string<char, std::__1::char_traits<char>,  std::__1::allocator<char> >, int, char, int) in Employee.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T05:34:17.570

您已经声明了静态成员变量，但您忘记定义它们：

> **§ 9.4.2/2**静态数据成员在其类定义中的声明不是定义，并且可能是除 cv 限定的 void 之外的不完整类型。静态数据成员的定义应出现在包含该成员的类定义的命名空间范围内。在命名空间范围的定义中，静态数据成员的名称应使用 :: 运算符由其类名限定。静态数据成员定义中的初始化表达式在其类的范围内。

```
// Example:
class process {
    static process* run_chain;
    static process* running;
};
process* process::running = get_main();
process* process::run_chain = running; 
```

在你的情况下：

```
// add this to your .cpp
int Employee::totalNumofEmployees = 0;
int Employee::nextEmpId = 1000;
int Employee::nextOfficeNo = 10; 
```

并从您的构造函数中删除这些分配：

```
totalNumofEmployees = 0;
nextEmpId = 1000;
nextOfficeNo = 10; 
```

否则，每次创建对象时，这些值都会被重置。

# actionscript-3 - Flex SDK 4.5 中的 MXMLC 在 Mac OS 10.8 上不起作用

> ID：13302427
> 
> 赞同：21
> 
> 时间：2012-11-09T05:11:16.283
> 
> 标签：actionscript-3, apache-flex, osx-mountain-lion, flex4.5, mxmlc

在最新的 mac 上启动 mxmlc 会退出并显示错误消息：

错误：此 Java 实例不支持 32 位 JVM。请安装所需的版本。

怎么修？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-09T05:11:16.283

mac 的最新 Java 更新删除了 32 位模式，因此不提供 -d32。这个问题有多种解决方案：

*   ### 删除 mxmlc 脚本的 -d32 部分。

    mxmlc 文件是一个“常规文本文件”，可以使用任何编辑器进行编辑。vim 应该做的工作。简单的解决方法是像这样“注释”“-d32”部分：

    ```
    # if [ "$isOSX" != "" -a "$HOSTTYPE" = "x86_64" -a "$check64" != "" ]; then
    #      D32='-d32'
    # fi 
    ```

*   ### 使用新的 Flex SDK

    Flex 4.8 SDK 似乎解决了这个问题

*   ### 更改为旧的 java 版本

    1.) 删除旧的 java [http://www.java.com/en/download/help/mac_uninstall_java.xml](http://www.java.com/en/download/help/mac_uninstall_java.xml) 2.) 在命令行中输入“java --version”安装旧版本

# c++ - C++ 字符串的算术运算

> ID：13302429
> 
> 赞同：0
> 
> 时间：2012-11-09T05:11:32.417
> 
> 标签：c++, string, vector

这段代码真的让我很困惑，它使用了一些斯坦福库的向量（数组）类。谁能告诉我`int index = line [j] - 'a';`为什么-'a'的目的是什么？

```
void countLetters(string filename)
{
Vector<int> result;

ifstream in2;
in2.open(filename.c_str());
if (in.fail()) Error("Couldn't read '" + filename + "'");

for (int i = 0; i < ALPHABETH_SIZE; i++)
{
    result.add(0);  // Must initialize contents of array
}

string line;
while (true)
{
    getLine(in, line);
    // Check that we got a line
    if (in.fail()) break;

    line = ConvertToLowerCase(line);
    for (int j = 0; j < line.length(); j++)
    {
        int index = line [j] - 'a';
        if (index >= 0 && index < ALPHABETH_SIZE)
        {
            int prevTotal = result[index];
            result[index] = prevTotal +1;
        }
    }
}
} 
```

代码的目的：

获取文件名并打印字母表中每个字母在该文件中出现的次数。因为要打印 26 个数字，所以 CountLetters 需要创建一个 Vector。例如，如果文件是：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:16:46.917

“a”在 ASII 字符的开头。

int index = line [j] - 'a'; 如果（索引 >= 0 && 索引 < ALPHABETH_SIZE）

这两行代码就是如果 line[j] 是一个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T05:30:35.173

字符串中的字符使用字符集进行编码......通常是英语语言系统中常见的硬件上的 ASCII。[您可以在http://en.wikipedia.org/wiki/ASCII](http://en.wikipedia.org/wiki/ASCII)查看 ASCII 表

在 ASCII（和大多数其他字符集）中，表示字母的数字是连续的。`j`因此，这是测试字符数组中索引处的字符是否为字母的自然方法`line`：

```
line[j] >= 'a' && line[j] <= 'z' 
```

你的程序等价于它，在代数意义上，它`a`从两边减去（知道这`a`是字符集中的第一个字符）：

```
line[j] >= 'a' - `a` && line[j] <= 'z' - `a`

line[j] >= 0 && line[j] <= 'z' - `a` 
```

将“<= `z`- `a`”替换为等价物：

```
line[j] >= 0 && line[j] < ALPHABET_SIZE 
```

其中 ALPHABET_SIZE 是 26。这将依赖于知道`z`是字符集中的最后一个字符，而不是知道字符集中有多少个字符 - 两者都有点脆弱，但如果你知道你正在处理一个众所周知的，稳定的字符集编码。

检查字母的更好方法是使用`isalpha()`谓词：[http ://www.cplusplus.com/reference/clibrary/cctype/isalpha/](http://www.cplusplus.com/reference/clibrary/cctype/isalpha/)

# android - 使用 MAT 进行 Android 内存泄漏检测

> ID：13302432
> 
> 赞同：0
> 
> 时间：2012-11-09T05:11:45.760
> 
> 标签：android

我正在尝试分析我的 android 应用程序的堆转储。分析仪 MAT 向我显示此消息

“”加载的“android.content.res.Resources”类占用12084776（87.38%）字节。内存在“”加载的“java.lang.Object[]”的一个实例中累积。

我该怎么办？我想避免 OutOfMemoryError。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:57:30.850

正如 almuneef 所提到的，这通常在您的资源规模很大时看到。您是否尝试加载位图？您可能想查看[Android 内存分配](https://stackoverflow.com/questions/2131947/android-memory-allocation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T09:13:25.363

不用担心“android.content.res.Resources”，它是系统加载的，</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:36:04.437

您的问题是由于大量资源造成的。只需减少资源的大小，您的问题就会得到解决。如果您的资源是 .png 格式，则将其更改为 jpeg，您可以轻松降低图像质量（即使质量损失很小，尺寸也会大大降低）希望这可以解决您的内存不足问题

# xslt - 使用递归将字符串连接到数字

> ID：13302435
> 
> 赞同：2
> 
> 时间：2012-11-09T05:12:22.143
> 
> 标签：xslt, xslt-1.0

## XML编码如下

```
<math>
  <mn>
    <mphantom>12</mphantom>
  </mn>
</math> 
```

## 需要输出：

```
<?xml version='1.0' encoding='UTF-8'?>
<math>|phantom1||phantom2|</math> 
```

## XSLT 试过：

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:m="http://www.w3.org/1998/Math/MathML"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:cl="http://xml.cengage-learning.com/cendoc-core"
  xmlns:mml="http://www.w3.org/1998/Math/MathML"
  xmlns:xlink="http://www.w3.org/1999/xlink">
    <xsl:output method="xml" encoding="UTF-8" indent="no" />
    <xsl:strip-space elements="*" />

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()" />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="mn">
        <xsl:variable name="pText" select="." />
        <xsl:variable name="numst" select="2" />
        <xsl:choose>
            <xsl:when test="not(string-length($pText))&gt;0">
                <xsl:value-of select="$pText" />
            </xsl:when>
            <xsl:otherwise>
                <xsl:variable name="ConcatStr" select="substring($pText,$numst)" />
                <xsl:variable name="FinalStr" select="substring-before($pText,$ConcatStr)" />
                <xsl:text disable-output-escaping="yes">|phantom</xsl:text>
                <xsl:value-of select="$FinalStr" />
                <xsl:text disable-output-escaping="yes">|</xsl:text>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

    <xsl:template match="mphantom">
        <xsl:apply-templates />
    </xsl:template>

</xsl:stylesheet> 
```

我使用上面的 XSLT 进行转换，但我只得到第一个数字。但我需要将它用作递归。我正在使用 XSLT 1.0。请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:55:05.460

试试这个..

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="mn[mphantom]" name="phant">
  <xsl:param name="chars" select="mphantom" />
  <xsl:value-of select="concat('|phantom',substring($chars,1,1),'|')" />
  <xsl:if test="substring($chars,2)">
    <xsl:call-template name="phant">
      <xsl:with-param name="chars" select="substring($chars,2)" />
    </xsl:call-template>
  </xsl:if>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T13:13:44.183

**这是一个更简单的*非递归*解决方案，使用[Piez 方法](http://www.dpawson.co.uk/xsl/sect2/muench.html#d9945e300)**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="mphantom">
     <math>
     <xsl:variable name="vCur" select="."/>
      <xsl:for-each select=
       "(document('')//node()|document('')//@*|document('')//namespace::*)
          [not(position() > string-length($vCur))]
       ">
        <xsl:value-of select="concat('|', substring($vCur, position(), 1),'|')"/>
      </xsl:for-each>
     </math>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<math>
    <mn>
        <mphantom>12</mphantom>
    </mn>
</math> 
```

**产生了想要的正确结果**：

```
<math>|1||2|</math> 
```

* * *

**二、为了完整起见，这里是一个 XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="mphantom">
     <math>
       <xsl:value-of separator="" select=
        "for $i in 1 to string-length()
          return
             concat('|', substring(., $i, 1), '|')
        "/>
     </math>
 </xsl:template>
</xsl:stylesheet> 
```

# r - 在 ggplot2 中添加动态 x 和 y 标题

> ID：13302437
> 
> 赞同：0
> 
> 时间：2012-11-09T05:12:37.990
> 
> 标签：r, ggplot2

我正在使用一个数据集，其中有一些变量，我不断地用特定的命名约定从 CSV 文件中绘制这些变量。所以例如我会有类似的东西：

```
p <- ggplot(plot_df, aes(x=ms, y=bandwidth)) + geom_line() 
```

默认情况下，图表的 x 和 y 标题将分别显示为“ms”和“带宽”。我想做的是定义一个具有这些映射列表的函数，例如：

```
"bandwidth"->"Bandwidth (GB/s)"
"ms"->"Time (ms)" 
```

所以我可以提供`p`一个基本上会执行的函数：

```
p + xlab("Time (ms)") + ylab("Bandwidth GB/s") 
```

自动，无需我一直指定标签应该是什么。为了做到这一点，我需要以某种方式访问​​ x 和 y 标题作为字符串。我很难弄清楚如何从`p`.

编辑：我猜通常 y 轴会因为融化而出现“值”，但为了论证，我们现在就说我正在做 x 轴。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T05:26:15.937

它们存储在`p$mapping`（查看`str(p)`）

除非您想对字符串操作做一些真正花哨的事情，否则查找表可能是在变量名和正确标签之间进行转换的最佳选择

例如

```
d <- data.frame(x = 1:5, z = 12)

p <- ggplot(d, aes(x=x, y = z)) + geom_point()

labels.list <- list('x' = 'X (ms)', 'z' = 'Hello something')

p + xlab(labels.list[[as.character(p$mapping$x)]]) +   
    ylab(labels.list[[as.character(p$mapping$y)]]) 
```

![在此处输入图像描述](../Images/ada619843d2ced948a200ff4640dffd5.png)

你可以把它写成一个函数

```
label_nice <- function(ggplotobj, lookup) { 
   .stuff <- lapply(ggplotobj$mapping, as.character)
   nice <- setNames(lookup[unlist(.stuff)], names(.stuff))
   labs(nice)
}
# this will give you the same plot as above
p + label_nice(p, labels.list) 
```

# ruby-on-rails - 为什么 update_all 不能在带有 mongoid 的 Rails 中工作？

> ID：13302438
> 
> 赞同：3
> 
> 时间：2012-11-09T05:12:40.300
> 
> 标签：ruby-on-rails, mongoid

我有一个用户和通知模型，用户 has_many 通知。通知由 kaminari 分页：通知模型定义，

```
class Notification
  ...
  field read, type: Boolean, default: false
  belongs_to :user
  scope :recent, ->(source) { where(source: source).desc(:created_at) }
  ...
end 
```

在通知控制器中，

```
@notifications = current_user.notifications.recent(@source).page(params[:page]) 
```

然后我想在渲染当前页面后将 read 属性更改为 true 但它不起作用：

```
@notifications.update_all(read: true) 
```

那里的*read*属性没有改变。而且我还有 1 件棘手的事情：

1.  删除范围指令（最近）时，update_all 可以工作，但它不仅会更新当前用户，还会更新所有其他用户。

我在我的瘦服务器中找到了一些日志，但没有发现错误：

```
MOPED: 127.0.0.1:27017 UPDATE       database=cse_development collection=notifi
cations selector={"$query"=>{"user_id"=>"509765c42061c79036000004", "source"=>"t
opic"}, "$orderby"=>{"created_at"=>-1}} update={"$set"=>{:read=>true}} flags=[:m
ulti] (0.9999ms) 
```

我错过了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:22:50.010

你可以试试这个

```
@notifications.update_all(:read => true) 
```

# regex - Perl 中的否定后向断言

> ID：13302439
> 
> 赞同：5
> 
> 时间：2012-11-09T05:12:40.893
> 
> 标签：regex, perl

我有一组文件路径，我想列出所有不包含`x/y/z/`. 另一个限制是我不能使用`print if !m{x/y/z/}`，因为我没有脚本的写权限。我可以为脚本提供正则表达式模式以*包含*（作为命令行选项），即所有匹配的内容都将被打印出来。

这是我的尝试。我正在尝试匹配之前*没有*的所有行`x/y/z/`。

```
#!/usr/bin/perl
use warnings;
use strict;

while(<DATA>) {
   print if m{(?<!x/y/z/).*};
}

__DATA__
x/y/z/a/b/x.cc
x/y/z/a/b/x.cc
x/y/z/a/b/x.cc
x/y/a/b/m.cc
x/y/a/b/m.cc 
```

我的期望是它只会打印底部的两个字符串，但它会打印所有内容。但是当我将模式更改为 时`(?<=x/y/z/).*`，它只打印前 3 个字符串：

```
x/y/z/a/b/x.cc
x/y/z/a/b/x.cc
x/y/z/a/b/x.cc 
```

为什么会这样，我应该怎么做才能修复我的正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T05:44:20.370

您需要的是**负前瞻**。所以，直接从[**寺院**](http://www.perlmonks.org/?node_id=588318)传来答案：

```
#!/usr/bin/perl
use warnings;
use strict;

while(<DATA>) {
   print if m{^(?!(?s:.*)x/y/z)}; 
}

__DATA__
x/y/z/a/b/x.cc
x/y/z/a/b/x.cc
x/y/z/a/b/x.cc
x/y/a/b/m.cc
x/y/a/b/m.cc 
```

# java - 为什么 JLabel.getLocationOnScreen() 根据父 JPanel 布局返回不同

> ID：13302440
> 
> 赞同：1
> 
> 时间：2012-11-09T05:12:55.693
> 
> 标签：java, swing, layout, jframe, jlabel

我用的是Jave Swing，简化的层次结构可以理解为JFrame -> JPanel -> JLabel。

现在我可以选择将 JLabel 添加到 JPanel 中：

1.  面板。添加（标签）；
2.  panel.setLayout(new BorderLayout()); panel.add(label, BorderLayout.NORTH);

这是我在两种情况下都在做的常见配置

```
panel.setOpaque(false);
panel.setBorder(BorderFactory.createLineBorder(Color.yellow)); 
```

即使我保持所有其他代码不变，以下方法调用也会给出非常不同的结果：

```
 Point location = getLocationOnFrame(label); 
```

我调用这个方法来识别 JLabel 相对于 JFrame 的位置：

```
 public Point getLocationOnFrame (JLabel label) {
        if (label == null) return null;

        try {
            Point location = label.getLocationOnScreen();
            System.out.println(location);
            Point frameOffset = mainFrame.getLocationOnScreen();
            System.out.println(frameOffset);
            location.translate(-frameOffset.x, -frameOffset.y);
            return location;
        } catch (IllegalComponentStateException e) {}

        return null;
    } 
```

这些是 System.out.println() 的结果，即使标签出现在同一个地方。

```
java.awt.Point[x=578,y=305]
java.awt.Point[x=0,y=0]

java.awt.Point[x=224,y=300]
java.awt.Point[x=0,y=0] 
```

在我看来，在第二种情况下，数字来自父 JPanel 的左上角，而不是 JLabel 本身。

**基本上我正在尝试使用第二种情况的代码并从第一种情况下获取数字。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T05:52:30.180

至于为什么你会得到不同的结果，我完全不知道。

但是，我相信你正在为自己做更多的工作......

```
Point loc = label.getLocation();
Window win = SwingUtilities.getWindowAncestor(label);
Point wrPos = SwingUtilities.convertPoint(label, loc, win); 
```

将为您将标签坐标转换为窗口坐标空间。

知道记住，框架的位置是框架的左上角（不，真的是;)），但是你的标签存在于框架的`contentPane`边界内，它在框架边界内偏移，所以取决于你想要做什么，你可能会更好地使用`contentPane`而不是框架；）

这是我用来测试逻辑的一个简单示例；）

```
public class TestLocation {

    public static void main(String[] args) {
        new TestLocation();
    }

    public TestLocation() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new LocationPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class LocationPane extends JPanel {

        private JLabel label;

        public LocationPane() {
            setLayout(new GridBagLayout());
            label = new JLabel("A Label");
            add(label);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();

            // While this works, really, don't do this, in paint methods
            // it's expensive and will slow down your system ;)
            Point loc = label.getLocation();
            Point pos = label.getLocationOnScreen();
            Window win = SwingUtilities.getWindowAncestor(this);
            Point wPos = win.getLocationOnScreen();
            Point wLoc = win.getLocation();

            Point rPos = SwingUtilities.convertPoint(label, label.getLocation(), win);
            JRootPane rootPane = SwingUtilities.getRootPane(this);
            Point cPos = SwingUtilities.convertPoint(label, loc, rootPane.getContentPane());
            Point wrPos = SwingUtilities.convertPoint(label, loc, win);

            FontMetrics fm = g2d.getFontMetrics();
            int rowHeight = fm.getHeight();

            String[] messages = new String[]{
                "Label.location = " + loc.x + "x" + loc.y,
//                "Label.locationOnScreen = " + pos.x + "x" + pos.y,
//                "Window.location = " + wLoc.x + "x" + wLoc.y,
//                "Window.locationOnScreen = " + wPos.x + "x" + wPos.y,
                "RelativeTo.Window = " + wrPos.x + "x" + wrPos.y,
                "RelativeTo.RootPane = " + rPos.x + "x" + rPos.y,
                "RelativeTo.ContentPane = " + cPos.x + "x" + cPos.y,
            };

            int y = 0;
            for (String msg : messages) {
                g2d.drawString(msg, 0, y + fm.getAscent());
                y += rowHeight;
            }

        }

    }

} 
```

# django - Django 外键

> ID：13302452
> 
> 赞同：0
> 
> 时间：2012-11-09T05:14:31.757
> 
> 标签：django, foreign-keys

我有一个地方模型和评级模型：

```
class Descriptions(models.Model):
    name=models.CharField(max_length=50)
    website=models.CharField(max_length=50,blank=True)
    street1=models.CharField(max_length=50,blank=True)
    street2=models.CharField(max_length=50,blank=True)
    city=models.CharField(max_length=50,blank=True)
    state=models.CharField(max_length=50,blank=True)
    zip=models.CharField(max_length=5,blank=True)
    description=models.TextField()
    areas_related=models.TextField()
    add_area=models.CharField(max_length=50,blank=True)
    federal=models.NullBooleanField(null=True)
    lat=models.TextField(blank=True)
    long=models.TextField(blank=True)
    creator=models.ForeignKey(User)

    def __unicode__(self):
    return u'%s %s %s %s %s %s %s %s %s %s %s %s %s' %(self.name,self.website,self.street1,
    self.street2,self.city,self.state,self.zip,self.description,self.add_area, self.federal, self.lat, self.long, self.creator) 
```

对于这些地方。然后我有：

```
class Rating(models.Model):
    user=models.ForeignKey(User)
    rating=models.IntegerField(blank=True)
    place=models.ForeignKey(Descriptions)

    def __unicode__(self):
        return u'%s %s' %(self.rating, self.place) 
```

在我看来，我使用注释来获得平均评分：

```
 relevant=Descriptions.objects.annotate(Avg('rating__rating')) 
```

现在，我可以添加到这个查询集中，以便我还能够访问哪些用户给出了评分吗？还是我必须创建一个单独的查询集？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:42:03.390

好吧，您始终可以访问给出评分的用户。

例子，

```
for desc in Descriptions.objects.annotate(Avg('rating__rating')):
    for rating in desc.rating_set.all():
           print rating.user 
```

# android - Android - 果冻豆通知关闭按钮

> ID：13302454
> 
> 赞同：1
> 
> 时间：2012-11-09T05:14:38.117
> 
> 标签：android, android-notifications, android-4.2-jelly-bean

google play 音乐应用在右上角有一个小“X”，而不是在该位置显示时间和一个微型通知图标。点击按钮会杀死玩家并关闭通知。伟大的！

我想对我的应用程序做同样的事情 - 这是否只能通过膨胀远程视图并将自定义按钮与破坏服务的意图相关联，或者是否有一些我忽略的通知生成器方法可以完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-30T03:28:28.200

没有实现此目的的通知生成器方法。唯一的解决方案是创建一个具有未决意图的自定义按钮来执行所需的操作。

# javascript - 像手风琴一样滑下高度

> ID：13302455
> 
> 赞同：1
> 
> 时间：2012-11-09T05:14:43.673
> 
> 标签：javascript, jquery, html, css

伙计们，我正在研究一个通过 onclick() 显示日历的 div。我使用切换方法来显示这个日历。

但是在向下滚动时，我想让 div 的高度像这个[手风琴](http://tympanus.net/Tutorials/FlexibleSlideToTopAccordion/)一样改变。

我想将我的 div 移到上方一点，以便用户可以看到日历。有什么想法可以为该手风琴中使用的高度设置动画吗？

检查这个

[http://jsfiddle.net/vivekdx/VVP3v/2/]

我喜欢在单击“显示日历”时移动日历

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:51:14.047

试试这个...

```
 $('html, body').animate({ scrollTop: $('#calender').position().top }, 'slow'); 
```

这是小提琴..

[http://jsfiddle.net/VVP3v/5/](http://jsfiddle.net/VVP3v/5/)

您正在使用滑动切换......所以效果可能看起来不像在现场...... :)

# javascript - 选择列表的默认选择选项有问题吗？

> ID：13302461
> 
> 赞同：1
> 
> 时间：2012-11-09T05:15:35.053
> 
> 标签：javascript, jquery, knockout.js

我在选择列表上使用[淘汰赛选项绑定](http://knockoutjs.com/documentation/options-binding.html)和[select2 插件。](http://ivaynberg.github.com/select2/)最初，我不想默认选择任何选项，而是想显示类似“选择国家..”的文本，并且最初应该选择此文本。为此，我使用了淘汰赛`optionsCaption binding`。它工作正常，但如果我在选择列表上应用 select2 插件，则不会选择初始默认文本。这是我的代码：

**HTML**

```
<select data-bind="options: array, optionsCaption: 'All'" size="1">
</select> 
```

**JS**

```
$('select').select2();

function VM(){
  this.array = 
    ['Afghanostan', 'Albania', 'Algeria', 'Argentina']; 
}

ko.applyBindings(new VM()); 
```

我也创建了一个[**JSFIDDLE**](http://jsbin.com/ivetel/2/edit)。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:47:14.893

试试这个代码

```
$('select').select2({
  placeholder: "ALL"
});

<select data-bind="options: array" size="1" style="width: 200px;">
    <option><option>
</select> 
```

请参阅此链接[http://jsbin.com/ivetel/19/edit](http://jsbin.com/ivetel/19/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:41:59.467

这与“All”的值为“”这一事实有关。从 select2 的来源：

```
 initSelection: function () {
        var selected;
        if (this.opts.element.val() === "") {
            this.close();
            this.setPlaceholder();
        } else {
            var self = this;
            this.opts.initSelection.call(null, this.opts.element, function(selected){
                if (selected !== undefined && selected !== null) {
                    self.updateSelection(selected);
                    self.close();
                    self.setPlaceholder();
                }
            });
        }
    } 
```

如您所见，如果 element.val() === ''，它会短路。您需要修改 select2 的源以使用空值选项。

# java - onStart 方法中的 NoClassDefFoundError - Android

> ID：13302462
> 
> 赞同：2
> 
> 时间：2012-11-09T05:15:45.500
> 
> 标签：java, android, amazon, android-mediaplayer

我正在将 Amazon IAP 实施到我的媒体播放器应用程序中。正如亚马逊文档中所说，我已经注册了我的观察员。但是，当我运行项目时，它正在抛出`NoClassDefFoundError`.

项目中没有编译错误，并且该类在项目中具有正确的包名称。搜索了其他论坛，但无法解决问题。

任何帮助是极大的赞赏！！

```
11-08 21:02:07.399: E/AndroidRuntime(11667): FATAL EXCEPTION: main
11-08 21:02:07.399: E/AndroidRuntime(11667): java.lang.NoClassDefFoundError: com.songs.mysongs.PlaySongObserver
11-08 21:02:07.399: E/AndroidRuntime(11667):    at com.songs.mysongs.PlaySongActivity.onStart(PlaySongActivity.java:111)
11-08 21:02:07.399: E/AndroidRuntime(11667):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1133)
11-08 21:02:07.399: E/AndroidRuntime(11667):    at android.app.Activity.performStart(Activity.java:4639)
11-08 21:02:07.399: E/AndroidRuntime(11667):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1972)
11-08 21:02:07.399: E/AndroidRuntime(11667):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2024)
11-08 21:02:07.399: E/AndroidRuntime(11667):    at android.app.ActivityThread.access$600(ActivityThread.java:126)
11-08 21:02:07.399: E/AndroidRuntime(11667):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
11-08 21:02:07.399: E/AndroidRuntime(11667):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-08 21:02:07.399: E/AndroidRuntime(11667):    at android.os.Looper.loop(Looper.java:137)
11-08 21:02:07.399: E/AndroidRuntime(11667):    at android.app.ActivityThread.main(ActivityThread.java:4479)
11-08 21:02:07.399: E/AndroidRuntime(11667):    at java.lang.reflect.Method.invokeNative(Native Method)
11-08 21:02:07.399: E/AndroidRuntime(11667):    at java.lang.reflect.Method.invoke(Method.java:511)
11-08 21:02:07.399: E/AndroidRuntime(11667):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-08 21:02:07.399: E/AndroidRuntime(11667):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-08 21:02:07.399: E/AndroidRuntime(11667):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:52:43.630

试试这个。如果您使用的是新`SDK`的，那么在项目中添加库的方式完全不同。

1.  在您的项目中创建名为 as 的文件夹`libs`并将您的库放在那里。
2.  右键单击您的项目>构建路径>添加外部档案

我希望这能解决您的问题。如果您已经使用添加外部库添加了库，请尝试按照我提到的步骤进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-09T03:02:05.660

在我的情况下，清理项目已通过采购观察员解决了 NoClassDefFoundError；我猜.jar 库并不总是自动拾取？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T05:32:21.803

**NoClassDefFoundError**因为以下原因：

> 如果 Java 虚拟机或 ClassLoader 实例尝试加载类的定义（作为正常方法调用的一部分或作为使用 new 表达式创建新实例的一部分）并且找不到类的定义，则抛出此异常。

在您的情况下`com.songs.mysongs.PlaySongObserver`，JVM 找不到类。因此，您必须检查您的类路径是否设置不正确或者如果您使用的是 IDE（如 Eclipse），则检查该类是否被选择用于运行时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T05:38:56.047

添加 jar 后检查它是否要导出到。

# war - gradle的war插件没有将文件从src/main/java/**复制到classes文件夹

> ID：13302465
> 
> 赞同：1
> 
> 时间：2012-11-09T05:16:07.917
> 
> 标签：war, gradle

我正在将构建工具从 Maven 迁移到 Gradle 以用于 Web 应用程序。

gradle build 命令成功。

但是，gradle 不会将*.hbm.xml 文件从 src\main\java\* * 文件夹复制到 WEB-INF\classes\** 文件夹。

构建.gradle：

```
apply plugin: "war"

repositories {
    mavenLocal()
    mavenCentral()
}

ext {
    hibernateVersion = "3.6.9.Final"
}

dependencies {

    compile "org.slf4j:slf4j-api:$slf4jVersion"
    compile "org.slf4j:slf4j-log4j12:$slf4jVersion"
    compile "log4j:log4j:1.2.17"

    compile "org.hibernate:hibernate-core:$hibernateVersion"
    ...
} 
```

# build-automation - 使用 Gradle Application Plugin DistZip Task 构建 Runnable Jar 时如何排除 jar

> ID：13302466
> 
> 赞同：0
> 
> 时间：2012-11-09T05:16:39.943
> 
> 标签：build-automation, gradle

当我们使用 Gradle Application 插件为我的项目创建可运行的 jar 时，distZip 任务会添加所有与 lib 文件夹无关的 jar。

有什么方法可以排除 Gradle 创建的分发 zip 文件中不需要的 jar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:04:40.497

为了排除添加的 dist 中的传递依赖 jar。

```
compile ("org.apache.solr:solr-solrj:3.6.0"){
            transitive = false
} 
```

# jquery - 在 Adob e Edge 中，使用 JQuery 调用 Web 服务不会在返回时触发成功

> ID：13302467
> 
> 赞同：0
> 
> 时间：2012-11-09T05:16:41.380
> 
> 标签：jquery, web-services, adobe-edge

我有这个网络服务

```
 [WebService(Namespace = "http://localhost/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]

[ScriptService]
[System.ComponentModel.ToolboxItem(false)]
public class CompanyData : WebService
{   [WebMethod]
    public String HelloWorld()
    {

        return "Hello JSON";

  }
} 
```

在同一个目录中，我有一个边缘生成的 HTML 文件

在场景中，有一个带有此代码的按钮 onClick

```
$.ajax({
    type: "POST",
    url: "CompanyData.asmx/HelloWorld",    
    data: "{}",    
    contentType: "application/json; charset=utf-8",
    dataType: 'json',  
    success: function(response) 
    {
        //get the value of a Symbol variable

        //sym.getComposition().getStage().sym.getSymbol("feedback").html(response.d);
        this.play();

    },
failure: function(msg) 
{
    sym.getComposition().getStage().sym.getSymbol("feedback").html(msg);
},

 error:function (request, status, error) 
 {

}
}); 
```

未达到成功功能。我不知道为什么。尝试了代码的变体，阅读其他示例 - 仍然无法正常工作。

我已经使用了错误和失败

我究竟做错了什么 ？两个页面都在 localhost 上的 IIS 7 上

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:31:05.357

我想到了。问题不在于返回的数据没有触发成功函数——它是。问题出在我的垃圾 Adob​​e Edge 脚本语法上。

# javascript - 如何在javascript中删除谷歌地图上标记的阴影？

> ID：13302469
> 
> 赞同：1
> 
> 时间：2012-11-09T05:16:49.340
> 
> 标签：javascript, google-maps, google-maps-api-3

我的谷歌地图上有一些标记，一些标记在另一个标记的阴影下。阴影中的标记不起作用。我怎样才能删除阴影或任何其他解决方案。

提前致谢。

```
enter code here
 function createMarker(){
                    var s;
                        for (var i = 0, j=0; i < markers_array.length; i++, j++) {
    // obtain the attribues of each marker
                            var lat = parseFloat(markers_array[i][0]);
                            var lng = parseFloat(markers_array[i][1]);
                            //alert(markers_array[i][2]);
                            //alert(markers_array[i][3]);
                            var trailhead_name = markers_array[i][2];
                            var trailhead_name1 = markers_array[i][3];
                            var image = markers_array[i][4];

                            var myLatlng = new google.maps.LatLng(lat, lng);

                            var contentString = trailhead_name;
                            var contentString1= trailhead_name1;
                            var marker=[];
                             marker[i] = new google.maps.Marker({
                                position: myLatlng,
                                map: map,
                                icon: image,
                                clickable: true,
                                title:markers_array[i][5],

                                });
                            google.maps.event.addListener(map, 'click', function(e) {

                            infobox.close();
                            infobox1.close();
                            infobox2.close();

                            });

                            marker[i]['infowindow'] = contentString;
                            marker[i]['infowindow1']= contentString1;
                            global_markers[i] = marker[i];

                            var la;
                            var lt;
                            google.maps.event.addListener(global_markers[i], 'click', function(e) {
                            infobox.close();
                            infobox1.close();
                            infobox2.close(); 
                            la=this.getPosition().lat();
                            lt=this.getPosition().lng();
                                infobox.setPosition(e.latLng);
                                infobox.setContent(this['infowindow']);
                                infobox.boxStyle_ = {
                                        background: "url('images/tipbox.gif') no-repeat  scroll 0 0 #E1E3E4",

                                        width: "270px"
                                    };
                                infobox.open(map);
                                var title=this.title;
                                s=this['infowindow1'];
                                $(document).delegate("#content", "mouseenter touchstart", function() {
                                map.setOptions({
                                draggable: false,
                                scrollwheel: false
                                });

                                });

                            $(document).delegate("#content", "mouseleave touchend", function() {
                                map.setOptions({draggable: true,scrollwheel: true});

                            });
                            });
                            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:41:20.163

您需要为图标和阴影创建和使用[MarkerImage](https://developers.google.com/maps/documentation/javascript/reference#MarkerImage)类，然后在活动期间使用标记 setIcon 和 setShadow 方法将它们与放大版本交换。放大后的 MarkerImage 类需要使用 scaledSize 属性。这会将图像拉伸到 MarkerImage 大小属性的大小

这是一个实际的小提琴示例：[检查](http://jsfiddle.net/bryan_weaver/jDgGD/)

```
var shadow = new google.maps.MarkerImage(
  beachflagShadowUrl,
  // The shadow image is larger in the horizontal dimension
  // while the position and offset are the same as for the main image.
  new google.maps.Size(37, 32),
  new google.maps.Point(0,0),
  new google.maps.Point(0, 32)); 
```

或检查[这个](https://stackoverflow.com/questions/11116435/different-ways-of-controlling-image-marker-size-and-shadow-in-google-maps)

```
 chst=d_map_pin_icon[_withshadow]
 chld=<icon_string>|<fill_color> 
```

[看到这个](https://developers.google.com/chart/infographics/docs/dynamic_icons)

# java - java.rmi.NotBoundException

> ID：13302471
> 
> 赞同：2
> 
> 时间：2012-11-09T05:17:11.030
> 
> 标签：java, swing, user-interface, rmi

我已经编写了小型 RMI 聊天程序及其编译正确。但是当我尝试运行客户端程序时，它会导致异常“ `java.rmi.NotBoundException - ServerInterface`”服务器程序运行时没有任何错误。请帮我解决这个问题。

这是一些客户端代码

```
public static void main (String[] args)
{
String address = "rmi://localhost/ServerInterface";
try
{
ServerInterface si= (ServerInterface) Naming.lookup(address);
new Thread(new Client(si)).start();
}
catch (Exception e)
{
System.err.println(e.toString()) ;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T05:21:50.420

您似乎正在尝试查找未绑定的名称。

> 公共类 NotBoundException 扩展异常
> 
> 如果尝试在注册表中查找或取消绑定没有关联绑定的名称，则会引发 NotBoundException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T05:23:51.280

> 如果尝试在注册表中查找或取消绑定没有关联绑定的名称，则会引发 NotBoundException。

您的服务器代码是什么样的？您遇到的这个异常很可能是由于服务器设置不正确造成的。

我认为在您的服务器代码中，您与名称绑定`ChatServer`

```
 Naming.rebind("ChatServer", new Server()); 
```

但是在您的客户端代码中，您使用的是`ServerInterface`名称

```
String address = "rmi://localhost/ServerInterface"; 
```

更多详情[命名](http://docs.oracle.com/javase/1.4.2/docs/api/java/rmi/Naming.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-26T09:02:25.863

只需确保您的 registry.rebind(ClassName.class.getSimpleName(), new ClassImplementaion()) 与您的 ClassImplementation 匹配。

# iphone - 如何在 iphone 的照片库中手动添加 auido 文件

> ID：13302472
> 
> 赞同：1
> 
> 时间：2012-11-09T05:17:14.400
> 
> 标签：iphone

我是 iphone 编程新手。**任何人都可以告诉我如何在照片库中手动添加音频文件吗？**我有一些链接，比如我们可以在模拟器中手动添加视频，但这只是视频。我也想要音频文件。我在谷歌搜索过，但我没有找到任何如何在照片库中添加音频文件的地方。

请任何人告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:19:21.310

iPhone 的照片库不支持音频文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:29:21.197

您不能将音频文件添加到照片库。但是您可以使用[iPod Library Access Programming Guide](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008765)进行相同的方法。

另请参阅[AddMusic](http://developer.apple.com/library/ios/#samplecode/AddMusic/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008845)演示。`AddMusic`演示了 iPod 库访问的基本使用，它是媒体播放器框架的一部分。您可以使用 iPod 库访问来播放从用户桌面 iTunes 库同步的歌曲、有声读物和音频 podcast。此示例使用 Media Player 框架的内置用户界面来选择音乐。

AddMusic 还演示了如何将应用程序音频与 iPod 库音频混合

# mysql - 从mysql命令中删除系统文件

> ID：13302476
> 
> 赞同：0
> 
> 时间：2012-11-09T05:17:43.360
> 
> 标签：mysql, database-administration

我从 mysql 命令创建了一些文件，即**select * into outfile '/tmp/abc.csv' from abc;** .这个文件拥有mysql.mysql的所有权，即没有其他用户能够删除这个文件。我没有超级用户权限；我可以编辑、添加和删除内容，但不能编辑整个文件。

有什么方法可以从 mysql 命令中删除，即从 mysql 用户中删除。或从 mysql 终端。

谢谢，

尼特什·库马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:00:18.317

如果没有关于您正在谈论的操作系统的更多详细信息，很难准确地说出，但最好的办法是查看事件日志，因为这些应该被记录下来

当 W32Time 服务更改时间时，它应该在系统事件日志中记录一个条目，并在详细信息中指定更改它的用户。

它将是交互式用户 (DOMAIN\user) 或来自 NTP 自动更新时间的“系统”用户。

# android - 单击按钮时启动 IntentService 错误

> ID：13302478
> 
> 赞同：1
> 
> 时间：2012-11-09T05:17:57.167
> 
> 标签：android, nullpointerexception, intentservice

我一直在努力解决这个问题，所以希望你们能提供帮助。我正在通过单击按钮运行 IntentService，并且出现空指针异常。这是我的代码：

主要活动：

```
public class MainActivity extends Activity {

    private ResponseReceiver receiver;
    private Button getButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        IntentFilter filter = new IntentFilter(ResponseReceiver.ACTION_RESP);
        filter.addCategory(Intent.CATEGORY_DEFAULT);
        receiver = new ResponseReceiver();
        registerReceiver(receiver, filter);

        getButton = (Button) findViewById(R.id.button1);
        setGetButtonOnClickListener();
    }

    public void setGetButtonOnClickListener()
    {
        getButton.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View  v)
            {
                Intent msgIntent = new Intent(getApplicationContext(), XMLIntentService.class);
                msgIntent.putExtra(XMLIntentService.PARAM_IN_MSG, "test");
                startService(msgIntent);
                Toast.makeText(getApplicationContext(), "intent started" , Toast.LENGTH_SHORT).show();
            }
        });
    }

    public class ResponseReceiver extends BroadcastReceiver {
       public static final String ACTION_RESP = "com.example.intent.action.MESSAGE_PROCESSED";
       @Override
        public void onReceive(Context context, Intent intent) {
           String information = intent.getStringExtra(XMLIntentService.PARAM_OUT_MSG);
           information += " yay!";
          Toast.makeText(getApplicationContext(), information , Toast.LENGTH_SHORT).show();
       }
    }
} 
```

XMLIntentService

```
public class XMLIntentService extends IntentService {
    public static final String PARAM_IN_MSG = "omsg";
    public static final String PARAM_OUT_MSG = "omsg";

    public XMLIntentService() {
        super("XMLIntentService");
        Toast.makeText(getApplicationContext(), "Intent Service Called" , Toast.LENGTH_SHORT).show();
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        Toast.makeText(getApplicationContext(), "On handle intent called" , Toast.LENGTH_SHORT).show();
        String msg = intent.getStringExtra(PARAM_IN_MSG);

        //Get XML info here
        String resultTxt = "Yayy";
        Log.v("XMLIntentService", "Handling msg: " + resultTxt);

        Intent broadcastIntent = new Intent();
        broadcastIntent.setAction(ResponseReceiver.ACTION_RESP);
        broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
        broadcastIntent.putExtra(PARAM_OUT_MSG, resultTxt);
        sendBroadcast(broadcastIntent);
    }
} 
```

日志文件：

```
11-08 23:06:31.130: E/Trace(1304): error opening trace file: No such file or directory (2)
11-08 23:06:31.902: D/gralloc_goldfish(1304): Emulator without GPU emulation detected.
11-08 23:06:39.922: D/AndroidRuntime(1304): Shutting down VM
11-08 23:06:39.922: W/dalvikvm(1304): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-08 23:06:39.951: E/AndroidRuntime(1304): FATAL EXCEPTION: main
11-08 23:06:39.951: E/AndroidRuntime(1304): java.lang.RuntimeException: Unable to instantiate service com.example.cis345lab5.XMLIntentService: java.lang.NullPointerException
11-08 23:06:39.951: E/AndroidRuntime(1304):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2347)
11-08 23:06:39.951: E/AndroidRuntime(1304):     at android.app.ActivityThread.access$1600(ActivityThread.java:130)
11-08 23:06:39.951: E/AndroidRuntime(1304):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1277)
11-08 23:06:39.951: E/AndroidRuntime(1304):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-08 23:06:39.951: E/AndroidRuntime(1304):     at android.os.Looper.loop(Looper.java:137)
11-08 23:06:39.951: E/AndroidRuntime(1304):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-08 23:06:39.951: E/AndroidRuntime(1304):     at java.lang.reflect.Method.invokeNative(Native Method)
11-08 23:06:39.951: E/AndroidRuntime(1304):     at java.lang.reflect.Method.invoke(Method.java:511)
11-08 23:06:39.951: E/AndroidRuntime(1304):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-08 23:06:39.951: E/AndroidRuntime(1304):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-08 23:06:39.951: E/AndroidRuntime(1304):     at dalvik.system.NativeStart.main(Native Method)
11-08 23:06:39.951: E/AndroidRuntime(1304): Caused by: java.lang.NullPointerException
11-08 23:06:39.951: E/AndroidRuntime(1304):     at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:101)
11-08 23:06:39.951: E/AndroidRuntime(1304):     at com.example.cis345lab5.XMLIntentService.<init>(XMLIntentService.java:16)
11-08 23:06:39.951: E/AndroidRuntime(1304):     at java.lang.Class.newInstanceImpl(Native Method)
11-08 23:06:39.951: E/AndroidRuntime(1304):     at java.lang.Class.newInstance(Class.java:1319)
11-08 23:06:39.951: E/AndroidRuntime(1304):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2344)
11-08 23:06:39.951: E/AndroidRuntime(1304):     ... 10 more 
```

在我的 Android Manifest.xml

```
<service android:enabled="true"
            android:name=".XMLIntentService"></service> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:36:06.787

问题是 XmlIntentService 构造函数中的这一行：

```
Toast.makeText(getApplicationContext(), "Intent Service Called" , Toast.LENGTH_SHORT).show(); 
```

在构造 IntentService 时（特别是在调用 attach(...) 之前），父 Service 中的 mBase 成员变量为 null。对 getApplicationContext 的调用试图取消引用父 Service 类中的 mBase，从而导致 NullReferenceException。

解决方案是从 XmlIntentService 构造函数中删除 Toast.makeText 行。

# vb.net - 错误“算术运算导致溢出。”

> ID：13302480
> 
> 赞同：0
> 
> 时间：2012-11-09T05:18:32.357
> 
> 标签：vb.net, oracle

我的任务是创建一个运行极长查询的程序。该查询在 Oracle 中执行良好，但每当我尝试从 VB.Net 运行它时，都会导致标题中提到的错误。而且，我注意到当我将查询复制到 SQLDataSource 时，它​​只复制了某些部分而不是整个查询。这有机会吗？谢谢！

# android-widget - 进度条不起作用

> ID：13302485
> 
> 赞同：0
> 
> 时间：2012-11-09T05:19:16.160
> 
> 标签：android-widget

我是 android 新手，我想制作一个需要进度条的应用程序，但我编写的代码似乎每次运行时都会崩溃。到目前为止我无法找到错误。我正在使用垂直进度条.

提前谢谢。

```
package com.example.progtask;

import android.app.Activity;

import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ProgressBar;

public class MainActivity extends Activity implements OnClickListener, Runnable {
    private ProgressBar pb;
    private Button show;
    private Button hide;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        pb = (ProgressBar) findViewById(R.id.progressBar1);
        show = (Button) findViewById(R.id.button1);
        hide = (Button) findViewById(R.id.hide);
        // pb.setVisibility(ProgressBar.GONE);
        show.setOnClickListener(this);
        hide.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if (v.equals(show)) {

            pb.setVisibility(ProgressBar.VISIBLE);
            pb.setProgress(0);
            pb.setMax(12);
            new Thread(this).start();
        } else {
            pb.setVisibility(ProgressBar.GONE);
        }

    }

    @Override
    public void run() {
        // TODO Auto-generated method stub
        int n = 0;
        while (n < 10) {
            n++;
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        pb.setProgress(n);

    }

} 
```

下面是xml文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:padding="@dimen/padding_medium"
        android:text="picelate"
        tools:context=".MainActivity" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginTop="82dp"
        android:layout_toLeftOf="@+id/textView1"
        android:text="show" />

    <Button
        android:id="@+id/hide"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:layout_toRightOf="@+id/textView1"
        android:text="hide" />

    <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textView1"
        android:layout_alignParentLeft="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T09:21:12.960

试试这个

```
 @Override
        public void onClick(View v) {
           switch (v.getId())
        {
           case R.id.button1:

            pb.setVisibility(ProgressBar.VISIBLE);
            pb.setProgress(0);
            pb.setMax(12);
            new Thread(this).start();
           break;

          case R.id.hide:
         // do the needful.
         break;
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:07:08.470

它是这样工作的：

```
 public class MainActivity extends Activity implements OnClickListener, Runnable {

    private ProgressBar pb;
    private Button show;
    private Button hide;
int n;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        pb = (ProgressBar) findViewById(R.id.progressBar1);
        show = (Button) findViewById(R.id.button1);
        hide = (Button) findViewById(R.id.button2);
        // pb.setVisibility(ProgressBar.GONE);
        show.setOnClickListener(this);
        hide.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
         switch (v.getId())
            {
               case R.id.button1:

                pb.setVisibility(ProgressBar.VISIBLE);
                pb.setProgress(0);
                pb.setMax(100);
                n = 0;
                new Thread(this).start();
               break;

              case R.id.button2:
             // do the needful.
                  pb.setVisibility(ProgressBar.GONE);
             break;
            }
    }

    @Override
    public void run() {
        // TODO Auto-generated method stub
        int n = 0;
        while (n < 100) {
            n++;
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }pb.setProgress(n*10);

        }
        pb.setProgress(n*10);

    }

} 
```

xml文件是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

      <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="show" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:text="hide" />

    <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
      android:progressDrawable="@drawable/progbar"
      android:layout_gravity="bottom"
        />

</LinearLayout> 
```

# c++ - LPARAM 在 TVITEM 中不断变化

> ID：13302488
> 
> 赞同：0
> 
> 时间：2012-11-09T05:19:31.893
> 
> 标签：c++, winapi, pointers, treeview, lparam

我将一堆项目添加到树视图中，其中存储了一个字符串`lParam`，如下所示：

```
TVITEM tvi = {sizeof(TVITEM)};
tvi.mask = TVIF_TEXT | TVIF_PARAM;
tvi.pszText = const_cast<char *> (txt0.c_str());  // Display text
tvi.cchTextMax = sizeof(tvi.pszText);
tvi.lParam = (LPARAM) add0.c_str();  // A file path string

TVINSERTSTRUCT tvis;
tvis.item = tvi;
tvis.hParent = hti0;  // Some parent node

TreeView_InsertItem(tvw_filelist_, &tvis); 
```

添加完所有这些后，我回来检查（在不同的函数中）：

```
TVITEM tvi = {sizeof(TVITEM)};
char buf[200];
tvi.pszText = buf;
tvi.cchTextMax = 200;
tvi.hItem = htiTemp;  // htiTemp is the current node in the iteration
tvi.mask = TVIF_TEXT | TVIF_PARAM;

// Retrieve; address is stored in lParam.
TreeView_GetItem(tvw_filelist_, &tvi);

char out[200];
strcpy(out, "Checking: PSZTEXT: ");
strcat(out, tvi.pszText);
strcat(out, ". LPARAM: ");
strcat(out, (const char *) tvi.lParam); 
```

...并且 LPARAM 已重置为最后添加的项目的值。

所以，如果我添加`one, two, three, four`具有相似`lParam`值的项目，那么在我检查它们都`lParam`具有`four`. （有时，会有垃圾值。）

这里显然有问题，而且可能很容易修复，但经过几个小时的试验，我找不到问题所在。帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T05:27:04.763

`tvi.lParam = (LPARAM) add0.c_str();`这就是问题。`tvi.lParam`是指针类型。

来自 MSDN：

> LPARAM 此类型在 WinDef.h 中声明如下： typedef LONG_PTR LPARAM;

什么是`add0`？我猜这是一个局部变量。如果函数返回，这个`add0`var 将被解构，并`tvi.lParam`指向 string 的 inter buff `add0`，现在这个 inter buff 被释放，所以`tvi.lParam`指向垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:31:13.863

您正在将地址存储在`tvi.lParam`. 这是字符串的地址`add0`。

如果`add0`超出范围，则地址无效。这就是您看到不同值的原因。

您必须分配`tvi.lParam`一个始终可用的地址。使字符串成为全局变量或类成员变量。

同样，每个树节点都需要一个字符串。所以你需要维护一个字符串数组。如果您只有一个字符串，那么相同的地址将具有不同的值，就像您观察到的一、二、三、四的情况一样。

谢谢。

# ruby-on-rails - 带有 Memcached 的 Radiant 和 NewRelic 不记录流量

> ID：13302496
> 
> 赞同：0
> 
> 时间：2012-11-09T05:21:00.017
> 
> 标签：ruby-on-rails, ruby, memcached, newrelic, radiant

我已经使用 Memcached 作为 Radiant 缓存资源设置了一个 Radiant 实例，但是，缓存命中似乎没有记录到 Radiant。

这是缓存实现的示例：

```
# file: :rails_root/config/environments/[RAILS_ENV].rb
require 'dalli'
$cache = Dalli::Client.new(["remotehost.com:11211", "127.0.0.1:11211"], :compress => true)
config.middleware.use ::Radiant::Cache, :metastore => $cache, :entitystore => $cache 
```

当我在 Radiant 实例（通过 httperf）上扔负载时，只有缓存未命中会在 NewRelic 中注册。

：：编辑：：

一些可能还值得注意的事情：

1.  我正在使用 nginx 和独角兽。
2.  我目前需要`:rails_root/config.ru`像这样的newrelic：

    ```
    begin
      require 'newrelic_rpm'
      NewRelic::Agent.after_fork(:force_reconnect => true)
    rescue LoadError
      # proceed without NewRelic
    end 
    ```

3.  我正在使用捆绑器，这是我的示例`Gemfile`：

    ```
    source "http://my_gem_server"
    source :rubygems

    gem "radiant", "~> 1.1.0"
    gem 'unicorn'
    gem 'therubyracer', '~> 0.9'
    gem 'newrelic_rpm'
    gem 'rack-cache'
    gem 'dalli'
    gem "compass-rails", "~> 1.0.3"
    group :extensions do
      # radiant extensions
      gem "radiant-archive-extension",             "~> 1.0.7"
      gem "radiant-clipped-extension",             "~> 1.1.0"
      gem "radiant-debug-extension",               "~> 1.0.2"
      gem "radiant-exporter-extension",            "~> 1.1.0"
      gem "radiant-markdown_filter-extension",     "~> 1.0.2"
      gem "radiant-snippets-extension",            "~> 1.1.0"
      gem "radiant-site_templates-extension",      "~> 1.0.4"
      gem "radiant-smarty_pants_filter-extension", "~> 1.0.2"
      gem "radiant-textile_filter-extension",      "~> 1.0.4"

      # additional extensions
      gem "radiant-index_page-extension",          "~> 1.0.1"
      gem "radiant-vapor-extension",               "~> 2.1.4"
      gem "radiant-reorder_children-extension",    "~> 1.0.6"
      gem "radiant-layouts-extension",             "~> 1.1.3"
      gem "radiant-sibling_tags-extension",        "~> 0.2.1"
      gem "radiant-if_param_tags-extension",       "~> 1.0.1"
      gem "radiant-cache_buster-extension",        "~> 0.0.1"

      # forked extensions
      gem "radiant-sheets-extension",              "1.1.0my1"
    end 
    ```

4.  我试过的东西：
    *   将 newrelic 的 require 代码移动到 config.ru 的顶部和底部。
    *   移动`gem "newrelic_rpm"`到我的 Gemfile 的顶部和底部（底部：[https](https://newrelic.com/docs/ruby/does-new-relic-work-with-the-bundler-gem) ://newrelic.com/docs/ruby/does-new-relic-work-with-the-bundler-gem ）
    *   将 newrelic 的 require 代码移动到我的底部`:rails_root/config/enivornments/[RAILS_ENV].rb`
    *   将 newrelic 的 require 代码移动到顶部`:rails_env/config/boot.rb`和`:rails_env/config/environment.rb`底部。
    *   `newrelic_rpm`在 Gemfile 中明确要求`gem "newrelic_rpm", :require => 'newrelic_rpm'`

：：/编辑：：

有人有想法么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:06:50.970

在与 NewRelics 支持人员合作后，他们让我发了这篇文章： http: [//newrelic.github.com/rpm/NewRelic/Agent/Instrumentation/Rack.html](http://newrelic.github.com/rpm/NewRelic/Agent/Instrumentation/Rack.html)。

然后我稍微解构了这个方法，并提出了以下解决方案：

[https://gist.github.com/4076773](https://gist.github.com/4076773)

# objective-c - 如何将音频 URL 放入数组并逐页循环播放？

> ID：13302497
> 
> 赞同：2
> 
> 时间：2012-11-09T05:20:59.660
> 
> 标签：objective-c, arrays, ipad, avaudioplayer, nsurl

***这是在 viewDidLoad 下定义的*** - 尝试将音频的 URL 路径放入数组 - 放入数组后，想逐页循环 - 尝试翻页并自动播放自动播放每个页面的音频

# 定义音频 6

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"part-%d.mp3"];

    NSURL *url = [NSURL fileURLWithPath:filePath];

    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:NULL];

    audioPlayer.numberOfLoops = 1; //repeat once

self.video =[[NSMutableArray alloc]initWithCapacity:Audio];
for (int i=0; i <Audio; i++)
{
   [self.video addObject:paths];
}

[audioPlayer play]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:27:07.283

一种解决方案可以`create` `one` `audio`（由苹果指南支持）将`all`您的所有`audio`.

现在你知道它什么时候开始`timing`了。制作实例。`audio``gobal``AVAudioPlayer`

`yourAudioPlayer`从一个音频文件开始。页面更改时使用以下方法：

```
[yourAudioPlayer playAtTime:timeWhenSpecificPageAudioStarts]; 
```

# regex - 如何转到 Vim 搜索模式的最后一个匹配项

> ID：13302500
> 
> 赞同：8
> 
> 时间：2012-11-09T05:21:15.493
> 
> 标签：regex, vim

在一行中，Vim 如何只匹配最后一次出现的搜索模式？有点像非贪婪，但从一开始。

例如，在以下行中，我想匹配`Twinkle little star`（以粗体突出显示）：

> Twinkle blah Twinkle blah blah**一闪一闪的小星星**。

我尝试了如下的负前瞻，但它与整行匹配：

```
Twinkle.*\(Twinkle\)\@!$ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T05:25:55.953

转义括号并在锚点前添加通配符匹配：

```
Twinkle\(.*Twinkle\)\@!.*$
       ^          ^    ^^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T01:33:47.153

```
/\v.*\zsTwinkle.* 
```

*   ".*" 贪婪地匹配所有内容，如果匹配较少（可能什么都不匹配）则回溯
*   "\zs" 设置“匹配开始”，用于替换和光标放置
*   剩下的就是你想要匹配的

使用 ":set incsearch"，将一些文本加载到缓冲区中，然后开始输入模式以查看它是如何应用的。

例如，一个缓冲区：

```
Twinkle brightly little star
Twinkle brightly, Twinkle brightly little star 
```

和替换：

```
:%s/\v.*\zsTwinkle /&extra / 
```

给出：

```
Twinkle extra brightly little star
Twinkle brightly, Twinkle extra brightly little star 
```

# ios - 在 iOS 中添加到主屏幕时 HTML5 Web 应用程序不缓存

> ID：13302501
> 
> 赞同：15
> 
> 时间：2012-11-09T05:21:19.123
> 
> 标签：ios, web-applications, mobile-safari, manifest, offline-caching

需要明确的是，Web 应用程序正在缓存，并且在 Mobile Safari 中离线运行良好。

问题是当它被添加到运行 iOS 6.0.1 的 iPhone 4s 和 iPad 2 的主屏幕时。它无法脱机工作，并在连接到互联网时出现网络错误，即“无法打开 MYWEBAPP。MYWEBAPP 无法打开，因为它没有连接到互联网”

我已经调试了几个小时，似乎找不到解决方案。我在控制台中没有收到任何错误，我正在运行 Jonathan Stark 的[调试代码](http://jonathanstark.com/blog/2009/09/27/debugging-html-5-offline-application-cache/)

我已经在桌面 Safari、Chrome 和 Firefox 的在线/离线开发者工具中测试了该应用程序。以及带有 Safari 中设备的 Web Inspector。结果在 iPhone 或 iPad 上都是一样的。它们都将缓存 Web 应用程序并在 Mobile Safari 中运行，但在添加到主屏幕时不会。离线或在线都没有错误。

据我所知，我正在使用最佳实践：

1.  添加了 HTML 标头： `<html manifest="photo.appcache">`

    我还尝试过为清单文件使用不同的名称，包括：cache.manifest 和 offline.manifest，因为我读到它会有所不同，但在我的测试中，只要扩展名是 . manifest 或 .appcache 并在 .htaccess 文件中适当地提供。

2.  添加了正确的 MIME 类型： `AddType text/cache-manifest appcache manifest`

    我也试过：`AddType text/cache.manifest manifest`,, `AddType text/cache.manifest .manifest manifest``AddType text/cache-manifest .manifest`

    我不相信这有效：`AddType text/cache.manifest` 但我不记得了。在大多数情况下，这并不重要，我坚持：

    AddType text/cache-manifest 应用缓存清单

    就像 HTML5 Mobile Boilerplate 中的内容一样。

3.  添加：

网络： *

到 appcache 文件。我相信这允许下载所有内容以及使所有链接正常工作。

4.  我试过删除这一行： `<meta name="apple-mobile-web-app-capable" content="yes">` 因为我在这里阅读了 SO 解决了与我类似的问题，但我可以确认它在我的测试中不起作用。当按下主屏幕图标时删除此行或将内容设置为“否”将重定向到 Mobile Safari 而不是全屏打开。

我几乎把它缩小到它是 iOS 6 中的一个错误（我实际上使用的是 iOS 6.0.1），因为我知道现在已经为浏览器中的 Web 应用程序和添加到主屏幕的应用程序分离了数据. 我在这里发布这个问题，看看是否有其他开发人员遇到过同样的问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-09T18:43:55.850

我已经解决了这个问题。对于 iOS 6 中的主屏幕 Web 应用程序，我推荐以下内容。

出于测试目的，请使用 Web Inspector 和 Jonathan Stark 之类的 JS 脚本来了解应用程序何时缓存到 Mobile Safari 中：

[http://jonathanstark.com/blog/debugging-html-5-offline-application-cache?filename=2009/09/27/debugging-html-5-offline-application-cache/](http://jonathanstark.com/blog/debugging-html-5-offline-application-cache?filename=2009/09/27/debugging-html-5-offline-application-cache/)

成功缓存后，将应用添加到主屏幕并保持打开状态，以便单独缓存主屏幕版本。它必须完全缓存才能离线工作。

由于我的应用程序缓存是 22mb 的数据，并且数据的缓存对于 web 应用程序是单独的，所以我遇到的问题是没有让主屏幕应用程序打开足够长的时间来缓存。

就用户体验而言，这很糟糕，但数据是分开的也很好。我可以确认这一点，因为如果您从 Safari 中删除网站数据，主屏幕网络应用程序仍然可以运行。

据我所知，没有办法调试为主屏幕 Web 应用程序缓存的数据或其存储位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T22:15:40.773

上面的答案非常有帮助。@aul 说他不知道调试主屏幕网络应用程序的方法，但我找到了一种方法。

将您的 iPad 或 iPhone 连接到您的计算机，然后在 Safari 中转到“开发”> 并选择您的设备。您的主屏幕应用程序必须打开才能显示在下拉菜单中。访问该应用程序后，您可以打开错误控制台并观看[Jonathan Stark 的脚本](http://jonathanstark.com/blog/debugging-html-5-offline-application-cache?filename=2009/09/27/debugging-html-5-offline-application-cache/)开始工作。下载清单后，您将能够在离线模式下使用该应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-20T18:32:38.123

这个脚本让生活更轻松！感谢@保罗！

```
var cacheStatusValues = [];
cacheStatusValues[0] = 'uncached';
cacheStatusValues[1] = 'idle';
cacheStatusValues[2] = 'checking';
cacheStatusValues[3] = 'downloading';
cacheStatusValues[4] = 'updateready';
cacheStatusValues[5] = 'obsolete';

var cache = window.applicationCache;
cache.addEventListener('cached', logEvent, false);
cache.addEventListener('checking', logEvent, false);
cache.addEventListener('downloading', logEvent, false);
cache.addEventListener('error', logEvent, false);
cache.addEventListener('noupdate', logEvent, false);
cache.addEventListener('obsolete', logEvent, false);
cache.addEventListener('progress', logEvent, false);
cache.addEventListener('updateready', logEvent, false);

function logEvent(e) {
    var online, status, type, message;
    online = (navigator.onLine) ? 'yes' : 'no';
    status = cacheStatusValues[cache.status];
    type = e.type;
    message = 'online: ' + online;
    message+= ', event: ' + type;
    message+= ', status: ' + status;
    if (type == 'error' && navigator.onLine) {
        message+= ' (prolly a syntax error in manifest)';
    }
    console.log(message);
}

window.applicationCache.addEventListener(
    'updateready', 
    function(){
        window.applicationCache.swapCache();
        console.log('swap cache has been called');
    }, 
    false
);

setInterval(function(){cache.update()}, 10000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-08T18:36:29.237

我有一个两部分的问题。我正在使用 ASP.NET MVC/Razor 生成我的缓存清单，因为我希望能够轻松地将站点托管在虚拟应用程序之外并且仍然保持路径对齐。缓存清单上的内容类型未正确设置，因此 Internet Explorer 和 Safari (iOS) 无法识别它（即使 PC 和 Android 上的 Chrome 可以）。

一旦我解决了这个问题，当我尝试使用 iOS Safari 访问我的 Azure 托管应用程序时，它仍然无法正常工作。当我尝试使用 Internet Explorer 访问时，我发现它没有我所拥有的字体的正确 mime 类型。

因此，请注意：不仅要绝对确定清单的 MIME 类型，还要确定清单所依赖的所有文件的 MIME 类型。

# java - Eclipse - 输出字符不同于键盘键值

> ID：13302503
> 
> 赞同：2
> 
> 时间：2012-11-09T05:21:21.327
> 
> 标签：java, eclipse

我对 Eclipse 有一个奇怪的问题。问题是

*   对于某些键盘键，屏幕上打印的输出值与该键的实际值不同。例如，当我按下`#`键时，它会打印`£`符号。同样，当我尝试使用引号键时`"`，将`@`打印出来。
*   在日食之外，按键工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:40:02.660

我认为你应该改变你的键盘设置。它可能是任何其他英文版本类型。

# r - Facet_grid 在多个窗口中输出

> ID：13302514
> 
> 赞同：0
> 
> 时间：2012-11-09T05:22:58.470
> 
> 标签：r, window, facet, ggplot2

我的代码：

```
ggplot(data=ICL3, aes(x=as.Date(AÑO_MES), y=IndICL3, group=RUN_FM, colour=RUN_FM)) +
  labs(colour = "RUN Fondos") +
  coord_cartesian(ylim=c(0, 150)) + 
  xlab("Periodo") + ylab("% Cobertura")  +
  geom_hline(aes(yintercept=100),colour="red",size=1.2) +
  stat_summary(fun.y = mean, geom="smooth", size=1, mapping = aes (group = 1),colour="green") + 
  geom_point() +
  facet_grid(RUN_FM ~ SERIE) 
```

`Facet_grid`正在一个窗口中绘制所有结果，该窗口包含 100 多个表，这显然看起来很糟糕且难以理解。

有没有办法对表格数量设置条件，并将结果绘制在 1 个以上的窗口中？还是我必须手动拆分数据以获得可理解的图形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:55:18.047

我能想到的最好的方法是保存整个方面系列的子集。

没有可重现的数据集，我只能建议你

1）[在此处](https://stackoverflow.com/questions/10608133/plot-only-a-select-few-facets-in-facet-grid)查找如何为方面（一次两个？）

2）围绕情节调用包装`for`循环或函数`lapply()``ggsave()`

```
try(ggsave(file = paste(<some directory>,<some changing file name>,".png">),
    height=y,width=x)) 
```

# java - 如何获得 ActiveMQ - 单个发送方和接收方的 FIFO 要求？

> ID：13302518
> 
> 赞同：1
> 
> 时间：2012-11-09T05:23:42.583
> 
> 标签：java, jms, activemq

我正在使用单个发送者和接收者来发送对象消息。这是否可以在没有任何额外配置的情况下实现 FIFO，或者我必须做些什么。

我必须的意思，请告诉我我必须做什么？

我正在使用 PTP 消息传递。

每当我想发送 Message 时，我都会创建一个连接并发送消息并关闭连接。但是接收器将永远监听以接收消息。接收器端必须是 FIFO。

我读到了单发送者和多接收者以及其他组合。我没有得到任何关于单发送者到单个接收者的信息。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T08:57:26.087

根据定义，队列是 FIFO。所以总的来说，你的问题的答案是肯定的。

（然后，在现实世界中，过滤可能会变得任意复杂，消息会因处理失败而退出队列或后备数据库停止或其他任何事情......）

您的“单个发送者多个接收者”可能是主题/[发布订阅者模式](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)- 看看这个[SO question](https://stackoverflow.com/questions/5576415/jms-topic-vs-queues)。

干杯，

# python - pyqt：QPixmap 保存到 StringIO？

> ID：13302524
> 
> 赞同：1
> 
> 时间：2012-11-09T05:24:11.910
> 
> 标签：python, pyqt, qpixmap, stringio

我尝试发布 QPixmap 图像 bia http。为此，我必须让 QPixmap 保存到临时文件并将其作为 python 文件类读取，然后进行 POST 工作。但我认为还有另一种发布 QPixmap 的方法。猜猜看，QPixmap 保存到 StringIO（或其他东西），用它我可以做 POST。

目前我是这样写的。

```
from poster.encode import multipart_encode
from poster.streaminghttp import register_openers
import urllib2, os

tmpIm = "c:/tmpIm.png"
PIXMAP.save(tmpIm, "PNG")
register_openers()
_f = open(tmpIm, "rb")
datagen, headers = multipart_encode({"image": _f})
request = urllib2.Request(UPLOAD_URL, datagen, headers)
_rnt = urllib2.urlopen(request)
_f.close()
os.remove(tmpIm) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:19:46.123

您可以通过 a将 a 保存`QPixmap`到 a中，然后将其读入对象：`QByteArray``QBuffer``StringIO`

```
from PyQt4.QtCore import QBuffer, QByteArray, QIODevice
from PyQt4.QtGui import QPixmap, QApplication

import cStringIO as StringIO

if __name__ == '__main__':
    # Create a QApplication so that QPixmaps will work.
    app = QApplication([])

    # Load a PNG into a QPixmap.
    pixmap = QPixmap('c:/in.png')

    # Save QPixmap to QByteArray via QBuffer.
    byte_array = QByteArray()
    buffer = QBuffer(byte_array)
    buffer.open(QIODevice.WriteOnly)
    pixmap.save(buffer, 'PNG')

    # Read QByteArray containing PNG into a StringIO.
    string_io = StringIO.StringIO(byte_array)
    string_io.seek(0)

    # Write the StringIO back to a file to test all is ok.
    with open('c:/out.png', 'wb') as out_file:
        out_file.write(string_io.read()) 
```

# iphone - 如何通过 iphone sdk 中的应用内购买以不同的金额付款？

> ID：13302527
> 
> 赞同：1
> 
> 时间：2012-11-09T05:24:32.503
> 
> 标签：iphone

请告诉我如何通过 iphone sdk 中的应用内购买支付不同的金额？因为我正在创建一个应用程序，其中从网站扣除订阅费用，并且以同样的方式我想使用我的应用程序进行付款，并且订阅金额一直在变化..因为苹果不批准 paypal 用于相同目的。这个问题怎么处理？？

我们可以使用网络服务来扣除费用并从网络服务中获得成功或失败的响应吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T07:35:08.487

对于应用内容的应用内购买，您只能使用 Apple 的应用内购买系统。您不能在应用程序中使用贝宝或其他任何东西。

设置应用内购买项目价格的唯一方法是在 iTunes Connect 中。StoreKit（您用于应用内购买的 API）从 iTunes Connect 获取产品价格，并且没有用于覆盖应用内价格的 API。

也没有公共 API（据我所知）用于更改 iTunes Connect 中的价格。也许您可以编写正常的 Web 浏览界面脚本，或者查找其他人编写的脚本代码。但 Apple 提供的更改应用内购买价格的唯一方法是在网络浏览器中登录 iTunes Connect 网站。

# asp.net - 可以右键单击我在 GridView 中使用的按钮并打开新选项卡

> ID：13302529
> 
> 赞同：1
> 
> 时间：2012-11-09T05:25:14.427
> 
> 标签：asp.net

我在 GridView 中使用下面的代码来显示每一行信息，当用户单击此按钮（图像）时转到另一个页面。现在我想这样做，当用户右键单击此按钮时，可以在新选项卡中打开页面

```
<asp:ButtonField ButtonType="Image" CommandName="Update" HeaderText="show" ImageUrl="~/Images/show.png" DataTextField="show" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:27:37.590

使用超链接字段代替按钮字段。或者，如果您需要`CommandName`，您可以使用`TemplateColumn`和使用`LinkButton`控制。这将解决你的问题。

# php - 当 ID 由 PHP 动态创建时，如何在 Java 脚本中获取选项 elementId？

> ID：13302531
> 
> 赞同：0
> 
> 时间：2012-11-09T05:25:20.273
> 
> 标签：php, javascript

> **可能重复：**
> [如何使用 JavaScript 获取下拉列表的选定值？](https://stackoverflow.com/questions/1085801/how-to-get-the-selected-value-of-dropdownlist-using-javascript)

我有一个下拉列表框，其条目是使用 php 从 mysql 动态填充的。

这是片段。

```
 <?php
        //include '../db/interface/DB_Manager.php';
        $connect = mysql_connect("localhost", "root", "infinit") or die(mysql_error()); 
        mysql_select_db("serverapp") or die(mysql_error()); 

        $query = "select id,name from rpt_shift_def"; //Write a query
        $data = mysql_query($query);  //Execute the query
    ?>
    <select id="selectShift" name="selectShift" onchange="ready(this.value)">
    <?php
    while($fetch_options = mysql_fetch_array($data)) { //Loop all the options retrieved from the query
    ?>

    <option id ="<?php echo $fetch_options['id']; ?>"  value="<?php echo $fetch_options['name']; ?>"><?php echo $fetch_options['name']; ?></option><!--Echo out options-->
    <?php
        }
    ?>
    </select> 
```

现在我希望选项 id 中的值将其传递给 Mysql 查询以将这些值用作过滤器（这些 ID 是此处用作主键的 Mysql 的 UUID）。

如果 id 是静态的，我可以使用 document.getElementById("ID"); 要获取这些值，因为它是 PHP 回声，我不能使用 document.getElementById()。

如何在 Javascript 中的 ID 中获取 echo'ed 中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:48:53.800

感谢 Marwan Alsabbagh，使用 options[e.selectedIndex].value 解决了我的问题。

```
 select = document.getElementById("selectShift");
   select.onchange = function(){
        var options = this.getElementsByTagName("option");
        optionHTML = options[this.selectedIndex].value; 
   } 
```

# mysql - #1148 - 此 MySQL 版本不允许使用的命令

> ID：13302532
> 
> 赞同：4
> 
> 时间：2012-11-09T05:25:27.687
> 
> 标签：mysql, ubuntu

04，我试图将 csv 文件加载到数据库中，但它给出了错误

```
#1148 - The used command is not allowed with this MySQL version 
```

我的代码加载文件

```
LOAD DATA LOCAL INFILE '//home//triveni//Documents//test.csv'
INTO TABLE 1981_5
FIELDS TERMINATED BY ','
ENCLOSED BY ''
LINES TERMINATED BY '\n'
(question,answer1,answer2,answer3,answer4,answer5,answer6,rightAnswer,Marks) 
```

文件中的数据是

```
Whartsdf,dsfds,sdfdsf,sdfdsf,sdfds,sdf,fsdf,2,2 
```

任何人请帮助我，我已经尝试了所有可能更改权限的方法，仅尝试过`LOAD DATA INFILE` 但我没有得到解决方案...

它在 Windows 操作系统中运行良好这是操作系统问题吗？？？？

# http - 一种方式 web/socket/tcp/whatever 请求，这可能吗，不必在浏览器中

> ID：13302533
> 
> 赞同：0
> 
> 时间：2012-11-09T05:25:34.847
> 
> 标签：http, sockets, networking, tcp

我希望我能正确解释我的问题。

我想向居住在某个端口或地址的 url 或实体发出请求

并且在该端口上侦听的任何内容都会接受请求并与之一起运行，但根本不会响应，客户端也不会等待响应，它将继续做接下来需要做的事情，

服务器或在该端口上侦听的任何东西将执行我在请求中列出的指令，就是这样，我不需要确认我想要完成的事情是否已经完成

这可能吗？

如果我可以总结我的问题，那将是如何使客户端对远程主机上的侦听器的 http 请求不阻塞

如果不可能，请简而言之向我解释原因或指出我在哪里可以找到此信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:28:41.277

你的问题体现了一个矛盾的术语。HTTP 是一种请求/响应协议。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-18T17:16:41.073

是的，当你跑步时——

```
 http.get(myUrl) 
```

由于缺少回调，计算机无论如何都会坐在那里等待响应。这有点奇怪，但这是 HTTP 的宗旨。

您可能对[UDP](https://www.hacksparrow.com/node-js-udp-server-and-client-example.html)感兴趣，它更“即发即弃”，在节点 API 中[有些相似。](https://nodejs.org/api/dgram.html#dgram_udp_datagram_sockets)（它也有一些陷阱！）

# ios - 在未来版本中更改 iOS 应用程序图标

> ID：13302535
> 
> 赞同：0
> 
> 时间：2012-11-09T05:25:52.990
> 
> 标签：ios, icons, version

是否可以在 iOS 的未来版本中更改应用程序图标。我无法在开发人员库中找到任何说明这一点的文档。苹果是否允许在未来的更新中更改应用程序图标。

商店中是否有任何应用程序更改了更新中的应用程序图标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T05:28:51.723

当您在应用商店更新您的应用时，您需要再次重新提交应用。通过这种方式，您可以包含更新的图标。此外，当您提交更新的应用程序时，您可以在 iTunes Connect 上更新您的徽标、屏幕截图和说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:33:51.937

是的，我最近在更新中更改了我的整个图标集（更改为完全不同的图像），并且它通过了 App Store 的审核过程。

# html - 圆形图像链接问题

> ID：13302538
> 
> 赞同：0
> 
> 时间：2012-11-09T05:26:06.900
> 
> 标签：html, css

我已使用以下图像作为链接的背景图像。

![在此处输入图像描述](../Images/045d65cf8f7cb9c1ba9315e47be38f43.png)

如果我将鼠标悬停在图像上，链接也会显示在边缘。我只想显示精确圆形图像的链接，而不是空白边缘的链接。有没有可能在css中做到这一点？

![在此处输入图像描述](../Images/dd326723d22de7d5343974aa27f713aa.png)

```
css:

.buy_purple a{ background-image:url(../imagesf/buy_purple.png); width:81px; height:57px; background-repeat:no-repeat; float:right; font-size:20px; font-weight:bold; text-shadow: 1px 1px 2px #c9a3c2; text-align:center; padding-top:29px; color:#000;}

Html: 

<div class="buy_purple"><a href="#">BUY</a></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:37:00.340

如果你让你的图像是方形的并且完全居中，你可以只使用该`border-radius`属性，这也会影响有效的可点击区域。

```
a{
    ...
    display: block;

    border-radius: 40px; /* if the height+width are 80px */
} 
```

示例：http: [//jsfiddle.net/tvJMG/](http://jsfiddle.net/tvJMG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:37:44.333

我认为你应该使用`map`标签

```
 <img src="test.png" alt="test" usemap="links"/>
 <map name="links">
    <area shape="circle" coords="your image co-ords(centerX,centerY,Radius)" href="your link" />
 </map> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T05:43:45.920

嘿，你看起来像这样吗：-

[http://tinkerbin.com/yY4FzaZr](http://tinkerbin.com/yY4FzaZr)

**HTML**

```
<div class="buy_purple"><a href="#">BUY</a></div> 
```

**CSS**

```
.buy_purple a{ background-image:url(http://i.stack.imgur.com/wC3xc.png); width:81px; height:57px; background-repeat:no-repeat; float:right; font-size:20px; font-weight:bold; text-shadow: 1px 1px 2px #c9a3c2; text-align:center; padding-top:29px; color:#000;}
.buy_purple a:hover {
  background:url(http://i.stack.imgur.com/C4Jia.jpg) no-repeat 1px -5px;
} 
```

或者你正在寻找**纯 CSS**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T05:52:36.610

你可以使用纯 CSS 来做到这一点

这里的html

```
<div>
<a href="/"><img src="https://upload.wikimedia.org/wikipedia/commons/e/e4/Small-city-symbol.svg"></a>
</div> 
```

这里的CSS

```
img {
border: 1px solid red;
border-radius: 169px 169px 169px 169px;
width: 200px;
height: 200px;
}
a {
height: 0px;
} 
```

这里的演示：[小提琴](http://jsfiddle.net/BthKg/1/)

# ios - iOS 应用程序可以分配多少内存？

> ID：13302542
> 
> 赞同：2
> 
> 时间：2012-11-09T05:26:22.287
> 
> 标签：ios, ipad, ios-simulator

我试图了解 iOS 应用程序可以可靠分配的内存量，以帮助我做出一些设计决策。该应用程序将涉及实时同步处理的音频和动画。

除了编写加载我需要的框架的代码然后尝试逐步分配内存直到我收到警告之外，有没有办法确定这种事情？

模拟器不允许您选择特定的硬件模型，所以我假设我什至无法模拟这些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:07:07.367

据我所知，您无法确定应用程序分配了多少内存。始终尝试为您的应用程序保持尽可能低的内存。

分配给您的应用程序的内存取决于许多因素，例如：发生的后台进程数量、可用内存量、其他应用程序使用的内存、您正在运行的设备等。

因此，为您的应用程序消耗的内存保持最大线并相应地设计并不是一个好习惯。还要尝试仅保留您需要的必要内存，并在内存回调方法中处理内存问题，例如“didreceivememorywarning”。始终考虑操作系统分配的内存量最少。

# c# - Typedef 用于 C# 中的索引，具有静态类型检查，无需运行时开销

> ID：13302545
> 
> 赞同：2
> 
> 时间：2012-11-09T05:26:39.773
> 
> 标签：c#, typechecking, static-typing

使用具有复杂索引的多维数组是很常见的情况。当所有索引都是整数时，这确实令人困惑且容易出错，因为您可以轻松地混淆列和行（或您拥有的任何内容）并且编译器无法识别问题。实际上应该有两种类型的索引：行和列，但它不是在类型级别上表示的。

这是我想要的一个小例子：

```
var table = new int[RowsCount,ColumnsCount];
Row row = 5;
Column col = 10;
int value = table[row, col];

public void CalcSum(int[,] table, Column col)
{
    int sum = 0;
    for (Row r = 0; r < table.GetLength(0); r++)
    {
        sum += table[row, col];
    }
    return sum;
}

CalcSum(table, col); // OK
CalcSum(table, row); // Compile time error 
```

加起来：

*   应静态检查索引是否混淆（类型检查）
*   **重要的！**它们应该是运行时高效的，因为将整数包装到包含索引的自定义对象然后将它们解包回来对性能来说是不合适的
*   它们应该可以隐式转换为整数，以便用作本机多维数组中的索引

有什么办法可以做到这一点？完美的解决方案类似于`typedef`仅编译成平面整数的编译时检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:18:05.583

x64 抖动只会使您减速 2 倍。它生成有趣的优化代码。使用该结构的循环如下所示：

```
00000040  mov         ecx,1 
00000045  nop         word ptr [rax+rax+00000000h] 
00000050  lea         eax,[rcx-1] 
                s.Idx = j;
00000053  mov         dword ptr [rsp+30h],eax 
00000057  mov         dword ptr [rsp+30h],ecx 
0000005b  add         ecx,2 
            for (int j = 0; j < 100000000; j++) {
0000005e  cmp         ecx,5F5E101h 
00000064  jl          0000000000000050 
```

这需要一些注释，因为代码不寻常。首先，偏移 45 处的奇怪 NOP 用于在循环开始时对齐指令。这使得偏移 64 处的分支更快。53 处的指令看起来完全没有必要。您在这里看到的是*循环展开*，请注意 5b 处的指令如何将循环计数器增加 2。但是优化器不够聪明，因此也无法看到存储是不必要的。

最重要的是，没有看到 ADD 指令。换句话说，代码实际上并没有计算“sum”的值。这是因为你没有在循环之后的任何地方使用它，优化器可以看到计算是无用的并完全删除它。

它在第二个循环中做得更好：

```
000000af  xor         eax,eax 
000000b1  add         eax,4 
            for (int j = 0; j < 100000000; j++) {
000000b4  cmp         eax,5F5E100h 
000000b9  jl          00000000000000B1 
```

它现在完全删除了“sum”计算和“i”变量赋值。它也可以删除整个 for() 循环，但抖动优化器从未这样做过，它假定延迟是故意的。

希望现在信息很清楚：避免从人为的基准中做出假设，只分析*真实*代码。您可以通过实际显示“sum”的值来使其更加真实，这样优化器就不会丢弃计算。在循环之后添加这行代码：

```
 Console.Write("Sum = {0} ", sum); 
```

现在你会发现没有什么不同了。

# android - 使用“矩阵”旋转两个“位图”

> ID：13302546
> 
> 赞同：2
> 
> 时间：2012-11-09T05:26:40.343
> 
> 标签：android, matrix, rotation, android-canvas

我有一个`Canvas`和一个`Bitmap`。我必须在画布上绘制位图两次并旋转它们。这是我的代码：

```
Bitmap bitmap = ... ;
Matrix matrix = new Matrix();
Camera camera = new Camera();
camera.save();

// First drawing:
camera.rotateX(x_rotate_angle);
camera.rotateY(y_rotate_angle);
camera.getMatrix(matrix);
matrix.postTranslate(0, 0);
matrix.postScale(3, 3);
canvas.drawBitmap(bitmap, matrix, null);
camera.restore();

// Second drawing:
camera.rotateX(x_rotate_angle);
camera.rotateY(y_rotate_angle);
camera.getMatrix(matrix);
matrix.postTranslate(10, 10 + bitmap.getHeight());
matrix.postScale(3, 3);
canvas.drawBitmap(bitmap, matrix, null); 
```

旋转前的结果：

![在此处输入图像描述](../Images/8b43c7706c09b387139d335ce944d981.png)

当位图仅**旋转 X 轴**时，一切都很好。在这种情况下，结果如下所示：

![在此处输入图像描述](../Images/946be8be32f57059b09893937b4b496e.png)

在上面的两个图像中，您可以看到所有边缘都是`parallel`。但是当位图旋转**Y 轴**时，边缘将不平行（顶部位图的底部边缘与底部位图的顶部边缘交叉）：

![在此处输入图像描述](../Images/96acaab3dc4873cf2a4a9cc98dff5282.png)

我做错什么了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T15:20:16.427

你没有做错任何事，只是你没有理解你将从代码中得到的结果。您使用的相机是 3D 相机，您会看到在 3D 空间中移动相机的结果。旋转相机时，平行线通常不会保持平行。您在绕 y 轴旋转时注意到了伪影，但它也出现在 x 轴旋转的插图中。请注意，对于 x 轴，左右两侧不平行；左侧比右侧更接近垂直。

Android`canvas`对象具有缩放、倾斜、平移和旋转操作。如果您需要的是 2D 操作，您可以`camera`完全放弃该对象。

# asp.net - 如何在 ASP.NET 中 exipryDate 后过期密码

> ID：13302560
> 
> 赞同：0
> 
> 时间：2012-11-09T05:28:29.067
> 
> 标签：asp.net

在我的 asp.net 应用程序中，我如何在 exiprydate 之后过期密码并要求用户更改密码...你能请我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:32:25.567

假设您有一个到期日期，您可以简单地将当前日期与到期日期进行比较，如果差异超出您允许的时间范围，您会提示用户更改密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:32:27.513

在您的登录过程中添加检查：如果密码过期日期已过，请将用户重定向到他/她可以更改密码的页面。如果尚未过期，请照常登录。

# iphone - 消息仅发送到设备上的已释放实例

> ID：13302562
> 
> 赞同：0
> 
> 时间：2012-11-09T05:28:38.100
> 
> 标签：iphone, ios, xcode, memory

我因内存错误而完全不知所措。这个问题只`happens`在 上`device`而不在`simulator`. 它也仅在应用程序首次在设备上加载时发生。如果我关闭应用程序并重新启动它，问题不会自行预设。这是我得到的错误

```
-[CFString retain]: message sent to deallocated instance 0xfd5a2f0 
```

我已经尽一切努力试图弄清楚释放的字符串是什么。请帮我弄清楚在设备而不是模拟器上运行时释放的对象是什么！提前致谢！

更新：我仍然没有解决方案，但我已经确认该应用程序将在我设置框架的代码行上持续崩溃，并且显示上述错误。如果我将此代码注释掉，应用程序将通过这一点，但可能会在其他奇怪的地方崩溃。我什至无法开始确定崩溃的起源。

```
CGRect frame = CGRectMake(27, 96, 265.0, 50.0);
someAcct.frame = frame; 
```

我对此感到很困惑，因为这不是一个字符串。有任何想法吗？

更新 2：此问题与正在同步的 NSUser 默认值直接相关。这似乎很随机，但这就是导致问题的原因。有什么帮助吗？

更新3：问题已在一周前得到解决。这实际上是由于无法访问字符串。一个字符串被传递给一个方法，然后该方法确实起作用并将数据传递给另一个方法，依此类推。直到最后，数据将被写入用户默认值和文档文件夹中包含的本地 plist。突然之间，即使这些地方与字符串无关，应用程序也会在上述非常奇怪的地方持续崩溃。我很困惑，在玩了很长时间后，我决定转到 .h 文件并一次检查每个字符串，确保每个字符串都在 .m 文件中合成并且应用了 self.stringName在整个 .m 文件中。在花了一个小时之后，我终于找到了应该受到指责的字符串，问题现在已经解决。使用自我。stringName 允许找到内存并避免这些晦涩难懂且高度混乱的应用程序崩溃。感谢大家的所有建议和提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:52:48.770

为了帮助您追踪它，您是否可以尝试将 NSLog 放在 didFinishLaunching() 方法的开头、中间的某个位置和 didFinishLaunching() 的开头。

然后你也可以在你的应用程序显示的第一个视图控制器的 viewDidLoad() 中推送一个 NSLog。例如，如果您使用的是选项卡栏界面，则在第一个选项卡的根视图控制器中使用 NSLog。

您可以使用 NSLog(@"step 1"), NSLog(@"step 2"), NSLog(@"step 3") ... 来组织输出，以便您知道代码在崩溃之前设法达到的位置，而不是 NSLog(@"I am here")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:39:43.317

问题是`retain` `count`. 请参阅[内存管理](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)并检查您是否遗漏了某些内容。

别忘了转`on` `NSZombieEnabled`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:40:40.987

一个原因可能是由于`iOS`兼容性。检查您的设备和模拟器是否使用相同的。尝试在与您的设备`iOS`相同版本的操作系统上运行模拟器并相应地更改`release`字符串。

# android - 用手指沿点画线

> ID：13302566
> 
> 赞同：7
> 
> 时间：2012-11-09T05:28:51.017
> 
> 标签：android

我实际上可以在我的应用程序中使用`FingerPaint in API Demos`给定的`Android SDK`. 但是如何用手指仅沿着放置在屏幕上的点绘制这些线。我想在这个应用程序中使用类似的东西：https: [//play.google.com/store/apps/details?id=zok.android.dots](https://play.google.com/store/apps/details?id=zok.android.dots) ![在此处输入图像描述](../Images/5feeaa8d402199dbf57662043388231f.png) 我只想用手指在点 1 和点 2 之间画线。只有当点 2 被触摸时，才必须绘制 1 和 2 之间的线，否则不应绘制。同样，再次从第 2 点到第 3 点，依此类推。请帮我提供一个代码。提前致谢

PS请在回答之前仔细查看链接中的应用程序，以便您对我的要求有一个清晰的了解。

**更新：**

```
public class PaintView extends View {

private Bitmap mBitmap;
private Canvas mCanvas;
private Path mPath;
private Paint mPaint;
private static final int TOUCH_TOLERANCE_DP = 20;
private static final int BACKGROUND = 0xFFDDDDDD;
private List<Point> mPoints = new ArrayList<Point>();
private int mLastPointIndex = 0;
private int mTouchTolerance;
private boolean isPathStarted = false;

public PaintView(Context context) {
    super(context);
    mCanvas = new Canvas();
    mPath = new Path();
    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.BLACK);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(12);
    mTouchTolerance = dp2px(TOUCH_TOLERANCE_DP);

    // TODO just test points
    Point p1 = new Point(133, 123);
    Point p2 = new Point(149, 136);
    Point p3 = new Point(182, 136);
    Point p4 = new Point(206, 118);
    Point p5 = new Point(208, 87);
    Point p6 = new Point(187, 71);
    Point p7 = new Point(144, 78);
    Point p8 = new Point(124, 101);
    Point p9 = new Point(113, 128);
    Point p10 = new Point(112, 157);
    Point p11 = new Point(119, 188);
    Point p12 = new Point(134, 209);
    Point p13 = new Point(162, 228);
    Point p14 = new Point(194, 238);
    Point p15 = new Point(232, 240);
    Point p16 = new Point(263, 237);
    Point p17 = new Point(289, 224);
    Point p18 = new Point(315, 204);
    Point p19 = new Point(332, 174);
    Point p20 = new Point(339, 128);
    Point p21 = new Point(329, 95);
    Point p22 = new Point(304, 73);
    Point p23 = new Point(280, 69);
    Point p24 = new Point(254, 87);
    Point p25 = new Point(248, 116);
    Point p26 = new Point(259, 143);
    Point p27 = new Point(278, 153);
    Point p28 = new Point(241, 157);
    Point p29 = new Point(192, 160);
    Point p30 = new Point(150, 159);
    mPoints.add(p1);
    mPoints.add(p2);
    mPoints.add(p3);
    mPoints.add(p4);
    mPoints.add(p5);
    mPoints.add(p6);
    mPoints.add(p7);
    mPoints.add(p8);
    mPoints.add(p9);
    mPoints.add(p10);
    mPoints.add(p11);
    mPoints.add(p12);
    mPoints.add(p13);
    mPoints.add(p14);
    mPoints.add(p15);
    mPoints.add(p16);
    mPoints.add(p17);
    mPoints.add(p18);
    mPoints.add(p19);
    mPoints.add(p20);
    mPoints.add(p21);
    mPoints.add(p22);
    mPoints.add(p23);
    mPoints.add(p24);
    mPoints.add(p25);
    mPoints.add(p26);
    mPoints.add(p27);
    mPoints.add(p28);
    mPoints.add(p29);
    mPoints.add(p30);
}

public PaintView(Context context, AttributeSet attrs) {
    super(context, attrs);
    mCanvas = new Canvas();
    mPath = new Path();
    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.BLACK);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(12);
    mTouchTolerance = dp2px(TOUCH_TOLERANCE_DP);

    // TODO just test points
    Point p1 = new Point(133, 123);
    Point p2 = new Point(149, 136);
    Point p3 = new Point(182, 136);
    Point p4 = new Point(206, 118);
    Point p5 = new Point(208, 87);
    Point p6 = new Point(187, 71);
    Point p7 = new Point(144, 78);
    Point p8 = new Point(124, 101);
    Point p9 = new Point(113, 128);
    Point p10 = new Point(112, 157);
    Point p11 = new Point(119, 188);
    Point p12 = new Point(134, 209);
    Point p13 = new Point(162, 228);
    Point p14 = new Point(194, 238);
    Point p15 = new Point(232, 240);
    Point p16 = new Point(263, 237);
    Point p17 = new Point(289, 224);
    Point p18 = new Point(315, 204);
    Point p19 = new Point(332, 174);
    Point p20 = new Point(339, 128);
    Point p21 = new Point(329, 95);
    Point p22 = new Point(304, 73);
    Point p23 = new Point(280, 69);
    Point p24 = new Point(254, 87);
    Point p25 = new Point(248, 116);
    Point p26 = new Point(259, 143);
    Point p27 = new Point(278, 153);
    Point p28 = new Point(241, 157);
    Point p29 = new Point(192, 160);
    Point p30 = new Point(150, 159);
    mPoints.add(p1);
    mPoints.add(p2);
    mPoints.add(p3);
    mPoints.add(p4);
    mPoints.add(p5);
    mPoints.add(p6);
    mPoints.add(p7);
    mPoints.add(p8);
    mPoints.add(p9);
    mPoints.add(p10);
    mPoints.add(p11);
    mPoints.add(p12);
    mPoints.add(p13);
    mPoints.add(p14);
    mPoints.add(p15);
    mPoints.add(p16);
    mPoints.add(p17);
    mPoints.add(p18);
    mPoints.add(p19);
    mPoints.add(p20);
    mPoints.add(p21);
    mPoints.add(p22);
    mPoints.add(p23);
    mPoints.add(p24);
    mPoints.add(p25);
    mPoints.add(p26);
    mPoints.add(p27);
    mPoints.add(p28);
    mPoints.add(p29);
    mPoints.add(p30);
}

public PaintView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    mCanvas = new Canvas();
    mPath = new Path();
    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.BLACK);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(12);
    mTouchTolerance = dp2px(TOUCH_TOLERANCE_DP);
}

@Override
protected void onSizeChanged(int width, int height, int oldWidth, int oldHeight) {
    super.onSizeChanged(width, height, oldWidth, oldHeight);
    clear();

}

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(BACKGROUND);
    canvas.drawBitmap(mBitmap, 0, 0, null);
    canvas.drawPath(mPath, mPaint);

    // TODO remove if you dont want points to be drawn
    for (Point point : mPoints) {
        canvas.drawPoint(point.x, point.y, mPaint);
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            touch_move(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            touch_up(x, y);
            invalidate();
            break;
    }
    return true;
}

private void touch_start(float x, float y) {

    if (checkPoint(x, y, mLastPointIndex)) {
        mPath.reset();
        // user starts from given point so path can beis started
        isPathStarted = true;
    } else {
        // user starts move from point which doen's belongs to mPinst list
        isPathStarted = false;
    }

}

//ADDED WITH LAST EDIT
private void touch_move(float x, float y) {
    // draw line with finger move
    if (isPathStarted) {
        mPath.reset();
        Point p = mPoints.get(mLastPointIndex);
        mPath.moveTo(p.x, p.y);
        if (checkPoint(x, y, mLastPointIndex + 1)) {
            p = mPoints.get(mLastPointIndex + 1);
            mPath.lineTo(p.x, p.y);
            mCanvas.drawPath(mPath, mPaint);
            mPath.reset();
            ++mLastPointIndex;
        } else {
            mPath.lineTo(x, y);
        }
    }
}

/**
 * Draws line.
 */
private void touch_up(float x, float y) {
    mPath.reset();
    if (checkPoint(x, y, mLastPointIndex + 1) && isPathStarted) {
        // move finished at valid point so draw whole line

        // start point
        Point p = mPoints.get(mLastPointIndex);
        mPath.moveTo(p.x, p.y);
        // end point
        p = mPoints.get(mLastPointIndex + 1);
        mPath.lineTo(p.x, p.y);
        mCanvas.drawPath(mPath, mPaint);
        mPath.reset();
        // increment point index
        ++mLastPointIndex;
        isPathStarted = false;
    }

}

/**
 * Sets paint
 * 
 * @param paint
 */
public void setPaint(Paint paint) {
    this.mPaint = paint;
}

/**
 * Returns image as bitmap
 * 
 * @return
 */
public Bitmap getBitmap() {
    return mBitmap;
}

/**
 * Clears canvas
 */
public void clear() {
    mBitmap = Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);
    mBitmap.eraseColor(BACKGROUND);
    mCanvas.setBitmap(mBitmap);
    invalidate();
}

/**
 * Checks if user touch point with some tolerance
 */
private boolean checkPoint(float x, float y, int pointIndex) {
    if (pointIndex == mPoints.size()) {
        // out of bounds
        return false;
    }
    Point point = mPoints.get(pointIndex);
    if (x > (point.x - mTouchTolerance) && x < (point.y + mTouchTolerance)) {
        if (y > (point.y - mTouchTolerance) && y < (point.y + mTouchTolerance)) {
            return true;
        }
    }
    return false;
}

public List<Point> getPoints() {
    return mPoints;
}

public void setPoints(List<Point> points) {
    this.mPoints = points;
}

private int dp2px(int dp) {
    Resources r = getContext().getResources();
    float px = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dp, r.getDisplayMetrics());
    return (int) px;
}
} 
```

我还是错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-15T20:41:21.400

我做了类似的事情，但我不确定这是否正是你所期望的。试试这个实现`PaintView`：

编辑：添加`touch_move()`到沿着手指移动绘制的线。

Edit2：使用一种移动更改`touch_move()`方法绘制多条线：

```
private void touch_move(float x, float y) {
// draw line with finger move
if (isPathStarted) {
    mPath.reset();
    Point p = mPoints.get(mLastPointIndex);
    mPath.moveTo(p.x, p.y);
    if (checkPoint(x, y, mLastPointIndex + 1)) {
        p = mPoints.get(mLastPointIndex + 1);
        mPath.lineTo(p.x, p.y);
        mCanvas.drawPath(mPath, mPaint);
        mPath.reset();
        ++mLastPointIndex;
    } else {
        mPath.lineTo(x, y);
    }
}
} 
```

_

```
public class PaintView extends View {

private Bitmap mBitmap;
private Canvas mCanvas;
private Path mPath;
private Paint mPaint;
private static final int TOUCH_TOLERANCE_DP = 24;
private static final int BACKGROUND = 0xFFDDDDDD;
private List<Point> mPoints = new ArrayList<Point>();
private int mLastPointIndex = 0;
private int mTouchTolerance;
private boolean isPathStarted = false;

public PaintView(Context context) {
    super(context);
    mCanvas = new Canvas();
    mPath = new Path();
    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.BLACK);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(12);
    mTouchTolerance = dp2px(TOUCH_TOLERANCE_DP);

    // TODO just test points
    Point p1 = new Point(20, 20);
    Point p2 = new Point(100, 100);
    Point p3 = new Point(200, 250);
    Point p4 = new Point(280, 400);
    Point p5 = new Point(350, 600);
    Point p6 = new Point(400, 500);
    mPoints.add(p1);
    mPoints.add(p2);
    mPoints.add(p3);
    mPoints.add(p4);
    mPoints.add(p5);
    mPoints.add(p6);
}

public PaintView(Context context, AttributeSet attrs) {
    super(context, attrs);
    mCanvas = new Canvas();
    mPath = new Path();
    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.BLACK);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(12);
    mTouchTolerance = dp2px(TOUCH_TOLERANCE_DP);

    // TODO just test points
    Point p1 = new Point(20, 20);
    Point p2 = new Point(100, 100);
    Point p3 = new Point(200, 250);
    Point p4 = new Point(280, 400);
    Point p5 = new Point(350, 600);
    Point p6 = new Point(400, 500);
    mPoints.add(p1);
    mPoints.add(p2);
    mPoints.add(p3);
    mPoints.add(p4);
    mPoints.add(p5);
    mPoints.add(p6);
}

public PaintView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    mCanvas = new Canvas();
    mPath = new Path();
    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(Color.BLACK);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(12);
    mTouchTolerance = dp2px(TOUCH_TOLERANCE_DP);
}

@Override
protected void onSizeChanged(int width, int height, int oldWidth, int oldHeight) {
    super.onSizeChanged(width, height, oldWidth, oldHeight);
    clear();

}

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(BACKGROUND);
    canvas.drawBitmap(mBitmap, 0, 0, null);
    canvas.drawPath(mPath, mPaint);

    // TODO remove if you dont want points to be drawn
    for (Point point : mPoints) {
        canvas.drawPoint(point.x, point.y, mPaint);
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            touch_move(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            touch_up(x, y);
            invalidate();
            break;
    }
    return true;
}

private void touch_start(float x, float y) {

    if (checkPoint(x, y, mLastPointIndex)) {
        mPath.reset();
        // user starts from given point so path can beis started
        isPathStarted = true;
    } else {
        // user starts move from point which doen's belongs to mPinst list
        isPathStarted = false;
    }

}

//ADDED WITH LAST EDIT
private void touch_move(float x, float y) {
    // draw line with finger move
    if (isPathStarted) {
        mPath.reset();
        Point p = mPoints.get(mLastPointIndex);
        mPath.moveTo(p.x, p.y);
        mPath.lineTo(x, y);
    }
}

/**
 * Draws line.
 */
private void touch_up(float x, float y) {
    mPath.reset();
    if (checkPoint(x, y, mLastPointIndex + 1) && isPathStarted) {
        // move finished at valid point so draw whole line

        // start point
        Point p = mPoints.get(mLastPointIndex);
        mPath.moveTo(p.x, p.y);
        // end point
        p = mPoints.get(mLastPointIndex + 1);
        mPath.lineTo(p.x, p.y);
        mCanvas.drawPath(mPath, mPaint);
        mPath.reset();
        // increment point index
        ++mLastPointIndex;
        isPathStarted = false;
    }

}

/**
 * Sets paint
 * 
 * @param paint
 */
public void setPaint(Paint paint) {
    this.mPaint = paint;
}

/**
 * Returns image as bitmap
 * 
 * @return
 */
public Bitmap getBitmap() {
    return mBitmap;
}

/**
 * Clears canvas
 */
public void clear() {
    mBitmap = Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);
    mBitmap.eraseColor(BACKGROUND);
    mCanvas.setBitmap(mBitmap);
    invalidate();
}

/**
 * Checks if user touch point with some tolerance
 */
private boolean checkPoint(float x, float y, int pointIndex) {
    if (pointIndex == mPoints.size()) {
        // out of bounds
        return false;
    }
    Point point = mPoints.get(pointIndex);
    //EDIT changed point.y to poin.x in the first if statement
    if (x > (point.x - mTouchTolerance) && x < (point.x + mTouchTolerance)) {
        if (y > (point.y - mTouchTolerance) && y < (point.y + mTouchTolerance)) {
            return true;
        }
    }
    return false;
}

public List<Point> getPoints() {
    return mPoints;
}

public void setPoints(List<Point> points) {
    this.mPoints = points;
}

private int dp2px(int dp) {
    Resources r = getContext().getResources();
    float px = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dp, r.getDisplayMetrics());
    return (int) px;
} 
```

}

我从 xml 使用它，但您也可以从代码创建它，简单的 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <com.example.lecho.PaintView
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:34:34.870

在这里，我将绘图对象的代码放在 canvas 上。你可以画线、圆等。

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

**SampleCanvasActivity.java**

```
public class SampleCanvasActivity extends Activity implements OnTouchListener {

    DrawPanel dp;
    private ArrayList<Path> pointsToDraw = new ArrayList<Path>();
    private Paint mPaint;
    Path path;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);
        dp = new DrawPanel(this); 
        dp.setOnTouchListener(this);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
        mPaint = new Paint();
        mPaint.setDither(true);
        mPaint.setColor(Color.WHITE);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);

        mPaint.setStrokeWidth(3);
        FrameLayout fl = new FrameLayout(this);  
        fl.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));  
        fl.addView(dp);  
        setContentView(fl);  
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        dp.pause();
    }
    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        dp.resume();
    }

    public boolean onTouch(View v, MotionEvent me) {
        // TODO Auto-generated method stub
                synchronized(pointsToDraw)
                {
        if(me.getAction() == MotionEvent.ACTION_DOWN){
            path = new Path();
            path.moveTo(me.getX(), me.getY());
            Log.e("Location", String.valueOf("x : "+ me.getX()+ "y : " +me.getY()));
            //path.lineTo(me.getX(), me.getY());
            pointsToDraw.add(path);
        }else if(me.getAction() == MotionEvent.ACTION_MOVE){
            path.lineTo(me.getX(), me.getY());
        }else if(me.getAction() == MotionEvent.ACTION_UP){
            //path.lineTo(me.getX(), me.getY());
        }
        }       
        return true;
    }

    public class DrawPanel extends SurfaceView implements Runnable{

        Thread t = null;
        SurfaceHolder holder;
        boolean isItOk = false ;

        public DrawPanel(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
            holder = getHolder();
        }

        public void run() {
            // TODO Auto-generated method stub
            while( isItOk == true){

                if(!holder.getSurface().isValid()){
                    continue;
                }

                Canvas c = holder.lockCanvas();

                c.drawARGB(255, 0, 0, 0);
                onDraw(c);
                holder.unlockCanvasAndPost(c);
            }
        }

        @Override
        protected void onDraw(Canvas canvas) {
            // TODO Auto-generated method stub
            super.onDraw(canvas);
                        synchronized(pointsToDraw)
                        {
            for (Path path : pointsToDraw) {
                canvas.drawPath(path, mPaint);
            }
                        }
        }

        public void pause(){
            isItOk = false;
            while(true){
                try{
                    t.join();
                }catch(InterruptedException e){
                    e.printStackTrace();
                }
                break;
            }
            t = null;
        }

        public void resume(){
            isItOk = true;  
            t = new Thread(this);
            t.start();

        }
    }
} 
```

# java - 如何让控制台将字符串放在右侧边缘？

> ID：13302573
> 
> 赞同：0
> 
> 时间：2012-11-09T05:29:51.337
> 
> 标签：java

我一直试图让控制台打印这个

```
1
22
333
4444
55555
666666 
```

作为

```
 1
               22
              333
             4444
            55555
           666666 
```

我试过使用`\t`，但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T05:32:19.373

在写数字之前写下所需数量的空格字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T05:37:58.373

使用**[字符串格式](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.util.Locale,%20java.lang.String,%20java.lang.Object...%29)**

```
String formattedString = String.format("%" + spaceCount + "s", " "); 
//prints spaceCount spaces
System.out.println(formattedString); 
```

根据需要在行之间增加空格数，你会得到那么多空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T05:36:26.877

没有好的方法可以做到这一点，所以你需要使用空格。但请记住，控制台窗口每次的宽度都不相同！

```
String number = /* Your number as string is needed here*/
String outcome = "";
int width = 15;
for(int i = 0; i < width - number.length; i++) {
    outcome += " ";
}
outcome += number; 
```

这是不好的方法，但它应该工作。对您拥有的每个号码重复此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T05:37:42.973

要在控制台上使用右对齐，你必须知道你想要它有多远。大多数终端都是 80 个字符宽，所以你可以这样做：

```
String.format("%80d", i); 
```

如果您想要小于这个值，请使用小于 80 的数字。

使用`String.format`使 java 为您完成所有计数工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T05:41:34.993

```
for ( int i = 1 ; i <=6 ; i++ ){
            for( int j = 0 ; j <= 20 - i ; j++ ){
                System.out.print(" ");
            }
            int k = i ;
            while (k > 0){
                System.out.print(i);
                k--;
            }
            System.out.println("");
        } 
```

# php - 函数 __construct 上的数据库参数

> ID：13302576
> 
> 赞同：0
> 
> 时间：2012-11-09T05:30:20.747
> 
> 标签：php, mysql, pdo

我想知道我的理解是否正确。

我将我的数据库连接参数放在了 my 上`__construct()`，所以这意味着每次实例化类时，我也会重新连接到我的数据库，对吗？

```
private $handle;
public function __construct()
{
  $username = "test";
  $password = "9712nc*<?12";
  $host = "localhost";
  $db = "miner";
  $dsn = 'mysql:dbname='.$db.';host='.$host;
  try {
    $this->handle = new PDO($dsn,$username,$password);
  }
  catch(PDOException $e) {
    print $e->getMessage();
    die();
  }
} 
```

如果我有来自某个用户的许多请求，这是一个好习惯吗？这是否意味着每次用户发出请求时（即使请求刚刚在几分钟前完成），脚本都应该首先连接到数据库？有什么合适的方法可以保存我的`$handle`吗？

*顺便说一句：数据库连接工作正常。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:58:52.023

如果该类被实例化一次，那么你会没事的。在这种情况下，您只打开一个连接。

如果您多次实例化该类，或者将其用作静态类，那么您可能每次都创建一个连接，这并不理想。

如果您保持所有类都处于活动状态（即，一旦创建类，您就永远不会删除对类的引用，从内存中（我从未测试过）PHP 的内部实际上应该为您解决这个问题，您仍然只有与数据库的唯一连接。但是如果您丢失了创建的类的句柄，则 PDO 将被销毁并重新开始。如果您将其用作静态类（即使用 调用它`class:function()`），那么您就是在错误的道路上。

* * *

有两种常见的解决方案，您会发现支持和反对这两种解决方案的争论。

1）使用全局存储您的数据库连接。您创建 $handle = PDO 并将 $handle 存储为全局变量。容易通过。易于覆盖 - 我不打算在这里辩论。

2）创建一个你记得的“静态”类（通常称为单例）。基本结构将是

```
private static $ThisObj;
private static $handle;

public static function getInstance() {
    if( !(self::$ThisObj instanceof SoapDB) ) {
        self::$ThisObj = new SoapDB();
        try {
            $this->handle = new PDO_Handler('mysql:dbname=' . DB_NAME . ';host=' . DB_HOST, DB_USER, DB_PASS);
            $this->handle->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch (PDOException $e) {
            // Error Here
        }
    }
    return self::$ThisObj;
} 
```

使用它，您通常会创建一个单独的 DB 类作为单例。使用 Singleton vs Global：您的电话（经过研究）。

3）第三个答案是，如果您只是将上面的类称为静态（即您调用`class::function()`），那么您可以将 $handle 作为静态，实际上您的问题应该得到很好的解决。本质上，您正在创建一个 Singleton，其中数据库作为属性之一。

对不起，没有错误或正确的答案。

* * *

根据评论“什么是静态类”进行编辑：

严格来说，我应该说“具有静态属性的类”。为了解释，通常您使用以下语法创建一个类：

```
$myClass = new class();
$methodResult = $myClass->method(); 
```

然后`$myClass`通过调用函数做很多漂亮的小事情。然后，您可以删除对类的引用，丢失属性（变量）并稍后重新初始化。

静态类（出于此答案的目的）是具有静态属性的类。通常（不是绝对）它们是通过 go 调用的。

```
$methodResult = class::method(); 
```

你不会坚持上课——它会被启动、使用和丢弃。但是，如果您将属性 ( `var`s) 存储为静态，那么每次使用该类时，这些属性仍将以其上次的状态存在。所以`method`可以设置`$this->MyVar = 'something'`，下一次，$this->MyVar 仍然是一些东西。

对于划分代码非常有用，可以阻止函数覆盖其他函数，并且可以使单元测试更容易。

（注意 - 我正在概括以使其更简单。但它应该让您了解这些过程。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:01:23.753

你应该使用单例。尝试 google 'mysql php singleton' 例如。

[http://www.swhistlesoft.com/blog/2011/08/05/1435-mysql-singleton-class-to-allow-easy-and-clean-access-to-common-mysql-commands](http://www.swhistlesoft.com/blog/2011/08/05/1435-mysql-singleton-class-to-allow-easy-and-clean-access-to-common-mysql-commands)

# php - 检查 URL 末尾的斜杠数

> ID：13302583
> 
> 赞同：-2
> 
> 时间：2012-11-09T05:31:09.437
> 
> 标签：php, url

我正在寻找 PHP 代码来查找 URL 末尾是否有多个斜杠（/）。例如，我想要一个具有以下结构的 if 条件：

```
$requesturl = $_SERVER['PATH_INFO']
if ( <condition> ) {
header("HTTP/1.1 301 Moved Permanently");
header("Location: <url>");
} 
```

我正在寻找*条件*和*url*代码。该条件需要在 $requesturl 的末尾检测多个斜杠，并且 url 必须是只有一个斜杠的当前页面 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:50:31.363

即使 '//' 在 url 的中间，这肯定会起作用。希望这个Hepls。

```
<?php
$url = $_SERVER['REQUEST_URI'];
$len = strlen($url);
$i=0;
while($i<=$len)
{
$i++;
$url = str_replace('//','/',$url);

}
$url = str_replace('http:','http://',$url);
echo "<script>window.location='".$url."'</script>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:51:56.900

```
<?php

$sample = array(
     "http://www.example.com/abc/d",
     "http://www.example.com/abc/d/",
     "http://www.example.com/abc/d//",
     "http://www.example.com/abc/d///"
);

foreach ($sample as $url) {
    echo trim_end_slash($url);
}

function trim_end_slash($url) {
    if(preg_match("/(.*?\/)\/+$/", $url, $matches)) {
        return $matches[1] . "\n";
    } else {
        return $url . "\n";
    }
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T05:52:15.163

如果 URL 末尾有两个或多个斜杠：

```
$requesturl = $_SERVER['PATH_INFO'];

if(preg_match('/\/{2,}$/',$requesturl) === 1){
header("HTTP/1.1 301 Moved Permanently");
header("Location: <url>");
} 
```

# spring - Hiberante + Struts + Spring Security：Tomcat 服务器未启动：上下文初始化失败

> ID：13302587
> 
> 赞同：1
> 
> 时间：2012-11-09T05:31:39.333
> 
> 标签：spring, hibernate, struts2, spring-security, pom.xml

> **可能重复：**
> [“java.lang.NoSuchFieldError: NONE”在 Spring 3、maven、JPA、c3p0 的休眠中](https://stackoverflow.com/questions/5727463/java-lang-nosuchfielderror-none-in-hibernate-with-spring-3-maven-jpa-c3p0)

我正在尝试整合 Struts2 + Spring Security3.1.1 + Hibernate 4.1.1

在启动我的 tomcat 服务器时，我收到以下错误：

```
 09 Nov 2012 11:06:52 ERROR context.ContextLoader - Context initialization failed
java.lang.NoSuchFieldError: NULL
    at org.springframework.expression.TypedValue.<clinit>(TypedValue.java:32)
    at org.springframework.expression.spel.support.StandardEvaluationContext.setRootObject(StandardEvaluationContext.java:88)
    at org.springframework.expression.spel.support.StandardEvaluationContext.<init>(StandardEvaluationContext.java:74)
    at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:124)
    at org.springframework.beans.factory.support.AbstractBeanFactory.evaluateBeanDefinitionString(AbstractBeanFactory.java:1299)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.evaluate(BeanDefinitionValueResolver.java:224)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:311)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:630)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:148)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1035)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:939)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:649)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3972)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4467)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:519)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:581)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
9 Nov, 2012 11:06:52 AM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
java.lang.NoSuchFieldError: NULL
    at org.springframework.expression.TypedValue.<clinit>(TypedValue.java:32)
    at org.springframework.expression.spel.support.StandardEvaluationContext.setRootObject(StandardEvaluationContext.java:88)
    at org.springframework.expression.spel.support.StandardEvaluationContext.<init>(StandardEvaluationContext.java:74)
    at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:124)
    at org.springframework.beans.factory.support.AbstractBeanFactory.evaluateBeanDefinitionString(AbstractBeanFactory.java:1299)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.evaluate(BeanDefinitionValueResolver.java:224)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:311)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:630)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:148)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1035)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:939)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:649)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3972)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4467)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:519)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:581)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
9 Nov, 2012 11:06:52 AM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
9 Nov, 2012 11:06:52 AM org.apache.catalina.core.StandardContext start
SEVERE: Context [/PayPilotWeb] startup failed due to previous errors
9 Nov, 2012 11:06:52 AM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
log4j:ERROR LogMananger.repositorySelector was null likely due to error in class reloading, using NOPLoggerRepository. 
```

我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:commons-context.xml</param-value>
</context-param>
<display-name> Web Application</display-name>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter> 
<filter>
    <filter-name>action2-cleanup</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ActionContextCleanUp</filter-class>
</filter>
<filter>
    <filter-name>sitemesh</filter-name>
    <filter-class>com.opensymphony.sitemesh.webapp.SiteMeshFilter</filter-class>
</filter>
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>action2-cleanup</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>sitemesh</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>*.html</url-pattern>
</filter-mapping>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>
<session-config>
    <session-timeout>15</session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>/home.html</welcome-file>
</welcome-file-list> 
```

安全.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"

xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd">

<debug />
<global-method-security pre-post-annotations="enabled" />
<http pattern="/styles/**" security="none" />
<http pattern="/images/**" security="none" />
<http pattern="/js/**" security="none" />
<http pattern="/login.html*" security="none" />
<http auto-config="true" authentication-manager-ref="authenticationManager" use-expressions="true" access-decision-manager-ref="accessDecisionManager">
    <form-login login-page='/login.html' default-target-url='/about.html' always-use-default-target='false' authentication-failure-url="/login.html?failed=true"/>
    <intercept-url pattern="/**/*.html" access="isFullyAuthenticated()" />
    <http-basic />
    <session-management invalid-session-url="/login.html">
        <concurrency-control max-sessions="1" />
    </session-management>
    <logout logout-success-url="/login.html?logout=true" logout-url="/logout.html" invalidate-session="true" delete-cookies="JSESSION" />
    <access-denied-handler ref="deniedAccessHandler" />

</http>
<authentication-manager alias="authenticationManager" >
    <authentication-provider user-service-ref="userDetailsService">
        <password-encoder ref="passwordEncoder">
             <salt-source ref="saltSource" />
        </password-encoder>
    </authentication-provider>
</authentication-manager>
<beans:bean id="accessDecisionManager" class="org.springframework.security.access.vote.AffirmativeBased">
    <beans:constructor-arg index="0">
        <util:list>
            <beans:bean class="org.springframework.security.web.access.expression.WebExpressionVoter" />
        </util:list>
    </beans:constructor-arg>
    <beans:property name="allowIfAllAbstainDecisions" value="false" />
</beans:bean>
<beans:bean id="passwordEncoder" class="org.springframework.security.authentication.encoding.Md5PasswordEncoder"/>  
<beans:bean id="saltSource" class="org.springframework.security.authentication.dao.ReflectionSaltSource">

    <beans:property name="userPropertyToUse" value="username" />
</beans:bean>
<beans:bean id="userDetailsService" class="com.impl.UserServiceImpl" /> 
```

commons-context.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"

xmlns:util="http://www.springframework.org/schema/util"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:task="http://www.springframework.org/schema/task"
    xsi:schemaLocation="http://www.springframework.org/schema/aop     http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<import resource="classpath:security.xml" />
<context:annotation-config />
<tx:annotation-driven />
<context:component-scan base-package="com.web" />
<aop:aspectj-autoproxy proxy-target-class="true" />
<bean id="conversionService" class="org.springframework.context.support.ConversionServiceFactoryBean" />
<bean id="propertyConfigurer" class="org.jasypt.spring.properties.EncryptablePropertyPlaceholderConfigurer">           
    <constructor-arg ref="configurationEncryptor" />
    <property name="locations">
        <list>
            <value>classpath:commons.properties</value>
        </list>
    </property>
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="searchSystemEnvironment" value="true" />
    <property name="ignoreResourceNotFound" value="true" />
    <property name="order" value="1" />
</bean>
<bean id="configurationEncryptor" class="com.PasswordEncryptor" />
<!-- Database and Hibernate Configuration %Starts-->
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${app.db.driverclass}" />
    <property name="url" value="${app.db.jdbcurl}" />
    <property name="username" value="${app.db.username}" />
    <property name="password" value="${app.db.password}" />
</bean>
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"> 
    <property name="dataSource" ref="dataSource" />
    <property name="annotatedClasses">
        <list>
            <value>com.dao.ABC</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${app.db.dailect}</prop>
            <prop key="initialSize">5</prop>
            <prop key="maxActive">${app.db.maxpoolsize}</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
        </props>
    </property>
</bean> 
<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager"> 
    <property name="sessionFactory" ref="sessionFactory"/> 
</bean> 
<bean id="hibernateTemplate" class="org.springframework.orm.hibernate3.HibernateTemplate">
    <property name="sessionFactory">
        <ref bean="mySessionFactory"/>
    </property>
</bean> 
```

POM.xml

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>abc</groupId>
    <artifactId>abc</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>war</packaging>
    <name>abc</name>
    <properties>
        <java-version>1.6</java-version>
        <org.springframework-version>3.1.2.RELEASE</org.springframework-version>
        <org.springsecurity-version>3.1.1.RELEASE</org.springsecurity-version>
        <org.aspectj-version>1.7.0</org.aspectj-version>
        <org.slf4j-version>1.6.1</org.slf4j-version>
        <org.struts-version>2.3.4</org.struts-version>
        <hibernate.jpa.version>2.0-cr-1</hibernate.jpa.version>
        <org.hibernate-version>3.6.0.Final</org.hibernate-version>
    </properties>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <dependencies>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${org.springsecurity-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-taglibs</artifactId>
            <version>${org.springsecurity-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${org.springsecurity-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <scope>compile</scope>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${org.springframework-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${org.springframework-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${org.springframework-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${org.springframework-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${org.springframework-version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.1.Final</version>
            <!-- will come with Hibernate core -->
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
            <scope>runtime</scope>
        </dependency> 
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjweaver</artifactId>
            <version>${org.aspectj-version}</version>
        </dependency>
        <dependency>
            <groupId>com.mchange</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.2-pre4</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.geronimo.specs</groupId>
            <artifactId>geronimo-jms_1.1_spec</artifactId>
            <version>1.1</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <scope>compile</scope>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>net.sourceforge.jtds</groupId>
            <artifactId>jtds</artifactId>
            <version>1.2.4</version>
            <scope>compile</scope>
            <classifier/>
        </dependency>
        <dependency>
            <groupId>org.jasypt</groupId>
            <artifactId>jasypt</artifactId>
            <version>1.4</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>${org.struts-version}</version>
            <scope>compile</scope>
            <exclusions>
                <exclusion>
                    <artifactId>tools</artifactId>
                    <groupId>com.sun</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-json-plugin</artifactId>
            <version>${org.struts-version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>opensymphony</groupId>
            <artifactId>sitemesh</artifactId>
            <version>2.4.2</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-spring-plugin</artifactId>
            <version>${org.struts-version}</version>
            <scope>compile</scope>
        </dependency>
    </dependencies>
    <repositories>
        <repository>
            <id>repository.springframework.maven.release</id>
            <name>Spring Framework Maven Release Repository</name>
            <url>http://maven.springframework.org/release</url>
        </repository>
        <repository>
            <id>repository.springframework.maven.milestone</id>
            <name>Spring Framework Maven Milestone Repository</name>
            <url>http://maven.springframework.org/milestone</url>
        </repository>
    </repositories>
</project> 
```

请帮帮我。如果您需要我提供更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:11:31.357

你定义了一个常量

```
<org.springframework-version>3.1.2.RELEASE</org.springframework-version> 
```

并将它用于一些 Spring 依赖项，但您仍然使用不同的版本定义了其中一些：

```
<dependency>
     <groupId>org.springframework</groupId>
     <artifactId>spring-orm</artifactId>
     <version>3.1.1.RELEASE</version>
</dependency> 
```

它是在自找麻烦。

您还可以使用 2 个不同版本的 Hibernate-Spring 组件：

```
<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager"> 
    <property name="sessionFactory" ref="sessionFactory"/> 
</bean> 
<bean id="hibernateTemplate" class="org.springframework.orm.hibernate3.HibernateTemplate">
    <property name="sessionFactory">
        <ref bean="mySessionFactory"/>
    </property>
</bean> 
```

看包装：

`hibernate3`和`hibernate4`。

您定义了常量：

```
<org.hibernate-version>3.6.0.Final</org.hibernate-version> 
```

但仍然对您的 Hibernate 版本进行硬编码：

```
 4.1.1.Final 
```

另请注意，Spring Security 3.1.X 使用 Spring 3.0.X 查看类路径中的 jar 版本。

确保您的类路径中只有一个版本的 Spring。

# validation - Jasig cas 如何在视图状态下验证自定义模型属性

> ID：13302588
> 
> 赞同：0
> 
> 时间：2012-11-09T05:31:39.430
> 
> 标签：validation, model, cas, jasig

我使用了 jasig (3.5.1) cas sever 并成功配置。它工作正常。我的项目有另一个要求。我在下面提到它我需要另一个登录机制。这意味着我需要企业用户的公司代码、手机号码和密码验证，而不是使用用户名密码。所以我为此创建了另一个凭据类

```
public class CodeMobileNumberCredintials implements Credentials{
@NotNull
    @Size(min=1,message = "required.code")
    private String code;

    @NotNull
    @Size(min=1, message = "required.mobileNumber")
    private String mobileNumber;

    @NotNull
    @Size(min=1, message = "required.password")
    private String password;
...
}

Then i created a variable called "codeMobileNumberCredintials"in web-flow.

    <var name="credentials" class="org.jasig.cas.authentication.principal.UsernamePasswordCredentials" />
        <var name="codeMobileNumberCredintials" class="org.jasig.cas.authentication.principal.CodeMobileNumberCredintials"/>

     <view-state id="viewCorporateLoginForm" view="casCorporateLoginView" model="codeMobileNumberCredintials">
            <binder>
                <binding property="code" />
                <binding property="mobileNumber" />
                <binding property="password" />
            </binder>
            <on-entry>
                <set name="viewScope.commandName" value="'codeMobileNumberCredintials'" />
            </on-entry>
            <transition on="submit" bind="true" validate="true" to="realCorporateSubmit">
                <evaluate expression="authenticationViaFormAction.doCorporateBind(flowRequestContext, flowScope.codeMobileNumberCredintials)" />
            </transition>
        </view-state> 
```

问题是 bean 验证过程不适用于我的自定义登录表单。但正常的用户名密码表单已验证（提交表单时没有给出用户名和密码，它显示“用户名和密码空白”）。但是我的自定义身份验证表单没有经过验证。它直接进入控制器类。
我花了很多时间来做这件事。谁能帮我完成我的任务。

```
Thank you
Amila 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:44:03.160

我有一个类似的问题。解决它的最简单方法是在 cas-server-webapp 模块的 cas-servlet.xml Spring 配置文件中添加新的验证器 bean。在您的情况下，它将是：

```
 <bean id="codeMobileNumberCredintialsValidator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"
    p:messageInterpolator-ref="messageInterpolator" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T07:52:54.330

Spring Web Flow 存在问题，导致验证期间出错。它发生如下堆栈跟踪并显示错误页面，而不是重新显示登录表单：

```
2013-10-04 09:48:31,683 TRACE [org.jasig.cas.web.init.SafeDispatcherServlet] - <Entering method [service with arguments [[org.apache.catalina.connector.RequestFacade@411c345a, org.apache.catalina.connector.ResponseFacade@22b1221b]]>
2013-10-04 09:48:31,686 DEBUG [org.jasig.cas.web.FlowExecutionExceptionResolver] - <Ignoring the received exception due to a type mismatch> org.springframework.webflow.execution.repository.BadlyFormattedFlowExecutionKeyException: Badly formatted flow execution key '[Ljava.lang.String;@58714e00', the expected format is 'e<executionId>s<snapshotId>' 
```

此处描述了该修复程序[CAS-1142](https://issues.jasig.org/browse/CAS-1142)。它对我有帮助，它总结为在 cas-servlet.xml 中添加一行`<webflow:redirect-in-same-state value="false" />`，结果如下：

```
 <webflow:flow-executor id="flowExecutor" flow-registry="flowRegistry">
    <webflow:flow-execution-attributes>
        <webflow:always-redirect-on-pause value="false"/>
        <webflow:redirect-in-same-state value="false" />
    </webflow:flow-execution-attributes>
    <webflow:flow-execution-listeners>
        <webflow:listener ref="terminateWebSessionListener" />
    </webflow:flow-execution-listeners>
</webflow:flow-executor> 
```

# html - WORDPRESS：尝试编辑 News.php（页面模板）但浏览器中没有任何变化

> ID：13302594
> 
> 赞同：0
> 
> 时间：2012-11-09T05:32:21.023
> 
> 标签：html, wordpress, templates, position, footer

我的新闻页面的页脚位于容器内。

实际文件在容器之外有页脚代码，所以我无法真正掌握导致页脚移动位置的原因。

我试图编辑我的`news.php`，但是当我编辑（删除`divs`该模板上的某些内容）时，没有任何变化。但是，如果我`divs`在我的`index.php`文件中删除，当我在浏览器中查看该站点时会发生更改。

为什么会发生这种情况？

每个文件中的 HTML 几乎相同，所以我不明白。

看看这些页面，看看有什么不同。

*   [http://keihead.com/test/about](http://keihead.com/test/about) - 正确
*   [http://keihead.com/test/news](http://keihead.com/test/news) - 错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:51:49.470

在 WordPress 中，特定页面模板会根据查询加载。从 WordPress codex查看[此页面。](http://codex.wordpress.org/Template_Hierarchy)

我认为您正在编辑错误的文件。找出正在调用哪个模板并更改该特定文件。

# android - cocos2dx(2.0.4) android 创建项目问题

> ID：13302598
> 
> 赞同：2
> 
> 时间：2012-11-09T05:32:30.690
> 
> 标签：android, cocos2d-x

我已经下载了 cocos2dx 2.0.4(2012-11-02) 并通过运行 Android 的 bat 文件来创建项目，但是在 src\org\cocos2dx 中没有生成文件？我也有版本 2.0.3 的问题。任何人都可以帮助解决问题。

```
http://www.cocos2d-x.org/boards/6/topics/18007?r=18048#message-18048 
```

操作系统：Windows 7（32 位）平台：Android

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T11:56:48.330

他们分别构建 cocos2d-x java 代码。您需要使用 platform/android/java 文件夹使用现有源代码创建 android 项目（与在 eclipse 中为项目创建项目时相同），然后将此项目添加为您自己项目的库项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:08:03.177

编辑名为 create-android-project.bat 的批处理文件以使其适应您的环境，例如： set _CYGBIN=C:\cygwin\bin cygwin bin 的路径

set _ANDROIDTOOLS=D:\android\android-sdk-windows\tools android sdk工具的路径

set _NDKROOT=D:\android\android-ndk-r7b ndk的根

请随时询问是否有任何问题

“帮助他人就是帮助自己”

# wpf - 如何在 wpf 表单上显示可滚动的树视图控件

> ID：13302600
> 
> 赞同：0
> 
> 时间：2012-11-09T05:32:48.000
> 
> 标签：wpf, treeview, scroll

如何在占据窗口左角并随窗口高度调整的窗口上呈现可滚动的 wpf 树视图控件。我一直在尝试使用 Grid 和停靠面板，但除非您指定高度，否则滚动条不会出现。请用 XAML 标记回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T08:28:38.530

告诉我这是否是您需要的：

```
<Window x:Class="WpfApplication6.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Name="window" Height="350" Width="525">
<Grid>
    <TreeView 
        ItemsSource="{Binding ElementName=window, Path=TreeviewDummySource}" 
        Background="Gray" 
        Width="150" 
        HorizontalAlignment="Left"
        ScrollViewer.VerticalScrollBarVisibility="Visible"/>
</Grid>
</Window> 
```

虚拟物品来源：

```
 public int[] TreeviewDummySource
    {
        get { return treeviewDummySource; }
    }

    private int[] treeviewDummySource = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17 }; 
```

所以诀窍是只有当 ScrollViewer 的内容大于可用大小时，才会出现 ScrollBar。通过指定`ScrollViewer.VerticalScrollBarVisibility="Visible"`TreeView 属性，滚动查看器将始终存在（启用或禁用）。尝试更改窗口的高度以查看 ScrollBar 是如何启用的。

# jquery - 在移动设备上播放 Youtube 表单文本链接而不使用应用程序

> ID：13302601
> 
> 赞同：2
> 
> 时间：2012-11-09T05:32:57.150
> 
> 标签：jquery, mobile, jquery-mobile, youtube

我认为这将是一个常见问题，但到目前为止还没有找到答案！

我有一个指向 youtube 视频的文本链接。在 iphone 上，如果我使用标准的 youtube 链接（例如 - [http://www.youtube.com/watch?v=4d5xkULjc50&feature=b-mv](http://www.youtube.com/watch?v=4d5xkULjc50&feature=b-mv)），默认是打开 youtube 应用程序并播放视频，所以当您单击“完成”按钮时，您会转到 YouTube 应用程序，而不是返回网站。

如果您将 Youtube 视频嵌入到 iFrame 中，它会播放视频，然后在您单击完成后返回网站。这就是我希望它执行的方式，只有一个文本链接。

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/4d5xkULjc50" frameborder="0" allowfullscreen></iframe> 
```

我可以使用 iFrame 嵌入代码，但我希望它显示为文本链接，这可能吗，还是有另一种 JQuery 或类似方法？

如果有一个 JQuery 插件可以在您的桌面上打开一个弹出窗口，但直接转到移动设备上的视频，那就更好了，但还没有找到！

谢谢你的帮助。

# c# - 使用海量 ORM 从表中选择不同的行

> ID：13302602
> 
> 赞同：0
> 
> 时间：2012-11-09T05:32:59.567
> 
> 标签：c#, asp.net-mvc-3, massive

如何使用大量 ORM 从表中检索不同的行。我需要从具有列 ID,StudentName,Age 的表 'Student' 中获取唯一学生名的列表。ID 是主键。

注意：不需要使用 Query() 执行原始查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T05:31:12.230

那这个呢：

```
dynamic studentTable = new Students();
var students = studentTable.All(columns: "distinct StudentName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:20:43.780

在 studentname 列上创建非聚集索引，然后尝试此查询

```
select distinct StudentName from Student 
```

# javascript - 类初始化总是失败

> ID：13302608
> 
> 赞同：0
> 
> 时间：2012-11-09T05:33:48.003
> 
> 标签：javascript, ajax, coffeescript, jasmine

我是 JavaScript 的新手，正在学习 CoffeeScript。我想创建一个在初始化时使用 Ajax与**Flickr Web API通信的类。**

```
class Photo

  json: null

  constructor: ->
    @getJson()

  _getJson: (data) ->
    @json = data.photos.photo

  getJson: ->
    $.ajax(
      url : 'http://www.flickr.com/services/rest/'
      type : 'GET'
      data :
        format : 'json'
        method : 'flickr.photos.search'
        api_key : 'api_key'
        user_id : '29242822@N00'
        per_page : '100'
      dataType : 'jsonp'
      jsonp : 'jsoncallback'
      success : @_getJson
    ) 
```

我写了一个**Jasmine**测试来测试类的初始化。

```
describe("Photo", ->
  photo = new Photo
  console.log(photo.json)
  it("should get json when constructed", ->
    expect(photo.json).toBeDefined()
  )
  it("should have json which begins", ->
    expect(photo.json[0].title).beBe('Ridges of Shirouma')
  )
) 
```

但`photo.json`始终为空。

谢谢你的好意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:02:13.857

[`$.ajax`](http://api.jquery.com/jQuery.ajax/)在设置对象的上下文中调用其回调函数：

> **上下文**对象
> 
> 该对象将成为所有与 Ajax 相关的回调的上下文。默认情况下，上下文是一个对象，表示调用中使用的 ajax 设置（`$.ajaxSettings`与传递给的设置合并`$.ajax`）。

所以`@`你的回调中不是你的 Photo 对象，它是一些对你用处不大的设置对象。但是，如果您通过使用[胖箭头 (](http://coffeescript.org/#fat_arrow) [)](http://coffeescript.org/#fat_arrow)`_getJson`定义它来将您的照片绑定到您的照片：[`=>`](http://coffeescript.org/#fat_arrow)

```
_getJson: (data) =>
  @json = data.photos.photo 
```

然后`@`将是您的照片，`@json`最终将成为您正在寻找的东西。

您可能会遇到的下一个问题是，当 Jasmine 尝试查看它是否有效时，您的 AJAX 调用不一定会返回。我对 Jasmine 不太熟悉，但是人们似乎喜欢[用 Jasmine 测试 AJAX 的这个答案；](https://stackoverflow.com/a/6199132/479863)还有[http://github.com/pivotal/jasmine-ajax](http://github.com/pivotal/jasmine-ajax)用于存根 AJAX 部分以避免异步部分。

# asp.net - 如何为所有分辨率显示器设计网页

> ID：13302617
> 
> 赞同：-2
> 
> 时间：2012-11-09T05:35:02.063
> 
> 标签：asp.net

我在 asp.net 中创建了一个 Web 应用程序。在我的电脑分辨率下，它运行良好，没有任何拉伸。但是我的 Web 应用程序拉伸了其他一些监视器分辨率。如何解决屏幕分辨率问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:06:26.560

不同的浏览器也会出现分辨率问题，有一种方法可以将屏幕宽度调整为 1024 x 768 并将中心对齐应用于您的内容。另一种方法是您可以将百分比调整为 100%，以便根据分辨率缩小和扩展。如果您将 1024 x 768 分辨率作为您网站的最低分辨率，则不会考虑 800x600 分辨率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T05:44:08.330

这与 ASP.NET 无关，除非您是 2003 年的时间旅行者，当时 Visual Studio 为 HTML 页面（包括 ASP.NET）提供“网格模式”。

...我们不再谈论那些时代了:)

这是一个 HTML + CSS 的东西。灵活布局要记住的关键事项是：

*   保持文本块的大小与`em`单位一致，以便它们保持不变 - 长文本很难阅读，非常窄的列也是如此。我建议介于`20em`和`30em`文本之间。
*   根据您的审美，布局元素（横幅、标题等）的大小可以设置为视口宽度的百分比或固定宽度，两者都是有效的。您还可以使用`max-width`和`min-width`指定元素框大小的界限，从而允许单个站点设计从智能手机大小的屏幕扩展到超大的 2560x1400 显示器。
*   如果您的设计经验非常有限：不要冒险。当人们试图过于雄心勃勃时，这就是灾难的发生方式（想想：*所有*内容都加载了 AJAX 的网站，或 1990 年代后期带有动画 GIF 和背景 MIDI 音轨播放的 Geocities 网站）。

...从设计理论的角度来看，这就是真正需要说的全部内容。如果您在用 CSS 实现设计方面需要帮助，那么我建议您查看其他人在他们的答案中发布的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:44:57.497

在 IE的**RESPOND.JS**的帮助下使用**CSS3 媒体查询**

 **参考

[http://coding.smashingmagazine.com/2011/08/10/techniques-for-gracefully-degrading-media-queries/](http://coding.smashingmagazine.com/2011/08/10/techniques-for-gracefully-degrading-media-queries/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T05:39:46.857

也许您应该尝试使用 Twitter 的 Bootstrap 工具 ( [http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/) )。这是一组很好的 CSS 规则，可以轻松创建流畅的布局。**

# powerbuilder - Powerbuilder 旋转文本和边框

> ID：13302622
> 
> 赞同：0
> 
> 时间：2012-11-09T05:35:33.663
> 
> 标签：powerbuilder

我正在尝试通过在擒纵表达式中输入整数来旋转数据窗口中的文本控件，如下面的链接所示。

[http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc00844.1200/html/pbug/BABBCCJF.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc00844.1200/html/pbug/BABBCCJF.htm)

现在问题如下：我实际上在文本周围有边框。当文本本身旋转时，我也需要边框也旋转。

这样做的原因是我正在尝试打印标签，并且由于文本框的边框不旋转，它实际上超出了纸张的允许宽度。

文本控件旋转 270 度。

（轮换前：）

![在此处输入图像描述](../Images/ffd4e0f073c24dcb748c23a72cbcda5c.png)

（旋转后。您可以看到边框没有旋转。）

![在此处输入图像描述](../Images/b96efdd36e5ad567916b39c14d2bf9db.png)

如何随文本旋转边框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:07:44.557

不幸的是，您无法旋转它们。text Escapement 确实会旋转显示，但在实际页面定位中它仍然是相同的。意思是，如果您的文本位于页面的最右侧，您将获得两 (2) 页而不是一页，因为它会将您的擒纵装置正确地显示为垂直，但它仍然会使您当前的边距失效。我建议您使用自动调整高度并使用垂直显示的字体。我曾在我现在的公司尝试过这样做，但您还必须部署该字体。

我希望我能以某种方式提供帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-20T16:07:58.660

是的你可以。在您的代码语法中使用它。

```
dw_1.object.<tag>.font.escapement = ### 
```

您可以使用等级 *10 更改###，例如：90º = 900

# matlab - matlab：具有大量数据点的散点图

> ID：13302623
> 
> 赞同：17
> 
> 时间：2012-11-09T05:35:35.447
> 
> 标签：matlab, plot, figure, scatter

我正在尝试绘制散点图，例如：

```
scatter(coor(:, 2), coor(:, 3), 1, coor(:, 4)); 
```

问题是，我有很多坐标要绘制（~100 000）。绘制它需要很长时间，当我尝试将图形导出到 tiff 时 - 然后 matlab 已经死了好几分钟......有什么解决方案可以改善绘图，或者至少是 tiff 导出？

编辑：忘了提，第三个坐标 (coor(:, 4)) 是一个颜色代码。

所以，当我使用 scatter （如上）时，我在下图中有类似的东西，这正是我想要看到的（只是它超级慢，我无法导出）：

![分散](../Images/0e8e99cd97b05ea7237bc41107eb4fee.png)

当我做：

> plot3(coor(:, 2), coor(:, 3), coor(:, 4), '.')

效果不再那么酷了（注意：图像不是来自相同的坐标......）：

![在此处输入图像描述](../Images/2d3487d8db38c6dd45096abfe7ef5085.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-09T07:56:20.210

您可以使用[plot](http://www.mathworks.nl/help/matlab/ref/plot.html)，但所有点都具有相同的颜色。但是，您可以将集合划分为不同的子集，并用自己的颜色绘制它们：

```
N = 100000;
x = rand(N,1);
y = rand(N,1);
C = sin(2*x)+y;

cdivs = 10;
[~, edges] = hist(C,cdivs-1);
edges = [-Inf edges Inf]; % to include all points
[Nk, bink] = histc(C,edges);

figure;
hold on;
cmap = jet(cdivs);
for ii=1:cdivs
    idx = bink==ii;
    plot(x(idx),y(idx),'.','MarkerSize',4,'Color',cmap(ii,:));
end

colormap(cmap)
caxis([min(C) max(C)])
colorbar 
```

![在此处输入图像描述](../Images/276daf6f32bd67f1742ef997d21faee3.png)

它的响应已经比`scatter(x,y,1,C)`给出大约相同的情节要好得多，但颜色分辨率更高（在我上面的代码中可以调整）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T23:08:27.517

我的经验是，matlab 中最有效的绘图命令是 Patch，我用它来模拟 scatter 或 scatter3 的功能，效率要高得多。

如果您有一个点列表，请使用每个点为您的特定数据定义一个具有合理边长的正方形补丁（或八边形，或其他），然后通过一次调用 patch 绘制补丁集合。创建图形对象后，您可以更新其颜色数据以单独为正方形着色。

您可以通过从数据集中构建立方体或 3D 交叉在 3D 中使用相同的概念。

这个片段创建了 1e5 个随机放置的正方形，在这种情况下具有随机颜色，并且在我四岁的笔记本电脑上运行不到一秒钟。对 scatter 的类似调用需要 40 秒，并返回一个难以操作的笨重图形。

```
tic
P=rand(1e5,2);
Edge=.01;
X=[P(:,1)'; P(:,1)'+Edge; P(:,1)'+Edge; P(:,1)'];
Y=[P(:,2)'; P(:,2)'; P(:,2)'+Edge; P(:,2)'+Edge];
figure;
h=patch(X,Y,'r');
set(h,'facevertexcdata',rand(size(X,2),3),'facecolor','flat','edgecolor','none')
drawnow
toc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T05:42:19.020

是的，使用 plot3

```
plot3(coor(:, 2), coor(:, 3), coor(:, 4), '.') 
```

这将与 3d 散点图相同（点将是小点，您也可以`'o' or 'x'`根据需要使用）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T09:58:22.397

如果你有太多的点，减少数据可能是有意义的。

基本上你可以做两种方法：

1.  简单 - 只需选择 - 随机说 10% 的点。

2.  丢弃不可见的点，显然是那些超出你的范围的点，但如果你有很多重叠的点——比如一个点的直径应该是 3px——所以一个点会覆盖 9px。在我的机器上，您发布的图将是 - 比如说 400x400px，因此大多数`ceil(400*400/9) < 20 000`数据点都是可见的。

* * *

您也可以尝试将情节分成更小的块 - 比如情节 1000 点，`drawnow`然后发出下一个 1000 直到你完成。因此，您不必在空白屏幕前等待。

# java - 你如何在 Java 中写入磁盘（使用刷新）并保持性能？

> ID：13302634
> 
> 赞同：6
> 
> 时间：2012-11-09T05:36:46.283
> 
> 标签：java, c, performance, disk

使用以下代码作为基准，系统可以在几分之一秒内将 10,000 行写入磁盘：

```
void withSync() {
    int f = open( "/tmp/t8" , O_RDWR | O_CREAT );
    lseek (f, 0, SEEK_SET );
    int records = 10*1000;
    clock_t ustart = clock();
    for(int i = 0; i < records; i++) {
        write(f, "012345678901234567890123456789" , 30);
        fsync(f);
    }
    clock_t uend = clock();
    close (f);
    printf("   sync() seconds:%lf   writes per second:%lf\n", ((double)(uend-ustart))/(CLOCKS_PER_SEC), ((double)records)/((double)(uend-ustart))/(CLOCKS_PER_SEC));
} 
```

在上面的代码中，10,000 条记录可以在几分之一秒内写入并刷新到磁盘，输出如下：

```
sync() seconds:0.006268   writes per second:0.000002 
```

在 Java 版本中，写入 10,000 条记录需要 4 秒以上。这只是Java的限制，还是我遗漏了什么？

```
public void testFileChannel() throws IOException {
    RandomAccessFile raf = new RandomAccessFile(new File("/tmp/t5"),"rw");
    FileChannel c = raf.getChannel();
    c.force(true);
    ByteBuffer b = ByteBuffer.allocateDirect(64*1024);
    long s = System.currentTimeMillis();
    for(int i=0;i<10000;i++){            
        b.clear();
        b.put("012345678901234567890123456789".getBytes());
        b.flip();
        c.write(b);
                    c.force(false);
    }
    long e=System.currentTimeMillis();
    raf.close();
    System.out.println("With flush "+(e-s));

} 
```

返回这个：

```
With flush 4263 
```

请帮助我了解用 Java 将记录写入磁盘的正确/最快方法是什么。

**注意：**我将`RandomAccessFile`类与 a 结合使用，`ByteBuffer`因为最终我们需要对该文件进行随机读/写访问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T07:32:16.510

实际上，我很惊讶测试并没有变慢。force 的行为取决于操作系统，但从广义上讲，它会将数据强制写入磁盘。如果您有 SSD，您可能会实现每秒 40K 的写入，但使用 HDD 则不会。在 C 示例中，它显然没有将数据提交到磁盘，因为即使是最快的 SSD 也无法执行超过 235K IOPS（制造商保证它不会比这更快：D）

如果您每次都需要将数据提交到磁盘，您可以预期它会很慢并且完全取决于硬件的速度。如果您只需要将数据刷新到操作系统，并且如果程序崩溃但操作系统没有，您不会丢失任何数据，您可以无需强制写入数据。更快的选择是使用内存映射文件。这将为您提供随机访问，而无需对每条记录进行系统调用。

我有一个[Java Chronicle](https://github.com/peter-lawrey/Java-Chronicle)库，它每秒可以读取/写入 5-20 百万条记录，延迟为 80 ns，采用随机访问的文本或二进制格式，并且可以在进程之间共享。这只工作这么快，因为它不会在每条记录上将数据提交到磁盘，但您可以测试如果 JVM 在任何时候崩溃，写入编年史的数据不会丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T08:04:10.170

这段代码更类似于你用 C 编写的代码。在我的机器上只需要 5 毫秒。如果您确实需要在每次写入后刷新，则大约需要 60 毫秒。您的原始代码在这台机器上花费了大约 11 秒。顺便说一句，关闭输出流也会刷新。

```
public static void testFileOutputStream() throws IOException {
  OutputStream os = new BufferedOutputStream( new FileOutputStream( "/tmp/fos" ) );
  byte[] bytes = "012345678901234567890123456789".getBytes();
  long s = System.nanoTime();
  for ( int i = 0; i < 10000; i++ ) {
    os.write( bytes );
  }
  long e = System.nanoTime();
  os.close();
  System.out.println( "outputstream " + ( e - s ) / 1e6 );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T02:48:50.877

我认为这与您的 C 版本最相似。我认为您的 java 示例中的直接缓冲区导致的缓冲区副本比 C 版本多得多。这在我的（旧）盒子上大约需要 2.2 秒。

```
 public static void testFileChannelSimple() throws IOException {
    RandomAccessFile raf = new RandomAccessFile(new File("/tmp/t5"),"rw");
    FileChannel c = raf.getChannel();
    c.force(true);
    byte[] bytes = "012345678901234567890123456789".getBytes();
    long s = System.currentTimeMillis();
    for(int i=0;i<10000;i++){
      raf.write(bytes);
      c.force(true);
    }
    long e=System.currentTimeMillis();
    raf.close();
    System.out.println("With flush "+(e-s));
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T06:08:42.563

fputs 的 Java 等价物是`file.write("012345678901234567890123456789");`，您正在调用 4 个函数，而 C 中只有 1 个，延迟似乎很明显

# java - Java 中使用 Map 实现的队列数据结构，大小限制为 5

> ID：13302635
> 
> 赞同：1
> 
> 时间：2012-11-09T05:36:49.187
> 
> 标签：java, data-structures, map, queue, linkedhashmap

> 我有一些记录的地图。我想将该地图限制为仅 5 个元素，并且每当添加新元素时，应删除第一项，并应在地图的最后位置添加新元素。类似于 FIFO 的东西。谁能建议我使用的数据结构或解决方案本身。

例如：

```
Map<String,String> map=new LinkedHashMap<String,String>(5);
for(int i=0;i<5;i++){
map.put(i+"",i+"");
}
map.put("5","5"); /* should remove map.get(0) and map.size will be still 5.Contents      would 1,2,3,4,5 */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:33:55.447

以[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)为基类，并按照`removeEldestEntry`方法使用示例中的说明覆盖其方法。

# jquery - “实时”更新验证摘要

> ID：13302638
> 
> 赞同：11
> 
> 时间：2012-11-09T05:36:58.737
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, jquery-validate

嗨，我正在使用带有客户端验证的 MVC4。这非常适合在字段旁边显示验证消息。

我添加了一个验证摘要：

```
 @Html.ValidationSummary(false) 
```

这有效，客户端'n所有。我希望它的行为有所不同；目前，验证摘要中的消息仅在单击提交按钮时才会更改。我希望它们是动态的，以与每个字段的验证消息类似的方式填充。

有人可以建议一种方法来实现这一目标吗？

有关触发摘要更新的任何信息都会很棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T13:04:31.830

我已将验证摘要设置为“实时”更新，还考虑了以下几点：

1.  **仅**在可见时更新摘要（页面验证/提交后）
2.  一切有效时清除摘要

让我们提取验证器，覆盖 showErrors() 并实现我们的逻辑：

```
var validator = $('form').data('validator');
validator.settings.showErrors = function (map, errors) {
    this.defaultShowErrors();
    if ($('div[data-valmsg-summary=true] li:visible').length) {
        this.checkForm();
        if (this.errorList.length)
            $(this.currentForm).triggerHandler("invalid-form", [this]);
        else
            $(this.currentForm).resetSummary();
    }
} 
```

由于我在整个站点中使用此解决方案，因此我创建了以下 init（准备就绪）：

```
$('form').each(function () {
    var validator = $(this).data('validator');
    if (validator) {
        validator.settings.showErrors = function (map, errors) {
            this.defaultShowErrors();
            if ($('div[data-valmsg-summary=true] li:visible').length) {
                this.checkForm();
                if (this.errorList.length)
                    $(this.currentForm).triggerHandler("invalid-form", [this]);
                else
                    $(this.currentForm).resetSummary();
            }
        };
    }
}); 
```

这是上面使用的resetSummary：

```
jQuery.fn.resetSummary = function () {
    var form = this.is('form') ? this : this.closest('form');
    form.find("[data-valmsg-summary=true]")
        .removeClass("validation-summary-errors")
        .addClass("validation-summary-valid")
        .find("ul")
        .empty();
    return this;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:41:41.337

客户端摘要似乎是在验证整个表单时生成的，您可以通过调用 valid() 插件方法自己执行此操作。在 jquery 验证脚本之后添加它。

```
<script>
    $(function () {
        $(':input').on("keyup click", function () {
            $('form').valid();
        });
    });
</script> 
```

我包含的示例事件是 keyup 和 click，但您可以添加到此空格分隔列表中或从中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-16T10:21:55.430

**Javascript：**

```
function resetValidationSummary() {
    var form = $('#myForm');

    var validator = form.validate();
    validator.resetForm();

    if (form.valid()) {
        $('.validation-summary-errors').addClass('validation-summary-valid');
        $('.validation-summary-errors').removeClass('validation-summary-errors');
    }
} 
```

**CSS：**

```
.validation-summary-valid {
    display: none;
} 
```

# sqlite - 在提交之前取消事务或事务的一部分？

> ID：13302644
> 
> 赞同：1
> 
> 时间：2012-11-09T05:37:17.107
> 
> 标签：sqlite, commit

我有一个很长的交易，我已经开始使用`BEGIN`，我在最后一行之前犯了大约 3 行的错误。有没有办法使那条线归零？

这是一个例子：

```
BEGIN TRANSACTION;
CREATE TABLE purchase(id integer PRIMARY KEY, purchasePrice integer CHECK(purchasePrice>0), customer text);
INSERT INTO purchase(purchasePrice, customer) VALUES(1200, "Jerome");
INSERT INTO purchase(purchasePrice, customer) VALUES(200, "Jeffery");
INSERT INTO purchase(purchasePrice, customer) VALUES(40, "Craig");
INSERT INTO purchase(purchasePrice, customer) VALUES(1640, "Donovan");
INSERT INTO purchase(purchasePrice, customer) VALUES(100, "Williams");
INSERT INTO purchase(purchasePrice, customer) VALUES(50, "Matsushi");
INSERT INTO purchase(purchasePrice, customer) VALUES(150, "Xhao");
INSERT INTO purchase(purchasePrice, customer) VALUES(250, "Dilberta");
INSERT INTO purchase(purchasePrice, customer) VALUES(840, "Brow"); //Supposed to be 9440,"Brown"
INSERT INTO purchase(purchasePrice, customer) VALUES(440, "DarkBrown");
INSERT INTO purchase(purchasePrice, customer) VALUES(20, "Black");
COMMIT; 
```

我明白我可以稍后更新受影响的行。

另一个示例情况：

```
BEGIN TRANSACTION;
CREATE TABLE Movies(MId integer primary key autoincrement, Title text);
INSERT INTO Movies VALUES(1,'Capote');
INSERT INTO Movies VALUES(2,'Scent of a woman');
INSERT INTO Movies VALUES(3,'Stigmata');
INSERT INTO Movies VALUES(4,'Exorcist');
INSERT INTO Movies VALUES(5,'Hamsun');
//Changed my mind and want to name the table "movie" and  name the columns "m_id" and "title". 
```

所以，我想知道a）如何取消；b）是否有可能上升几行，如果可以，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:25:52.913

如果您创建了[保存点](http://www.sqlite.org/lang_savepoint.html)，您将能够回滚部分事务。（但这将是更多的打字。）

当您进行许多更改时，最好在执行之前将所有 SQL 命令写入一个文本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:54:18.630

该`ROLLBACK`功能取消了完整的交易。我还没有找到逐行返回的方法，因此`UPDATE`or`ALTER`命令可以分别用于表或字段/行。

# ruby - 红宝石正则表达式为什么不会停止循环

> ID：13302645
> 
> 赞同：-1
> 
> 时间：2012-11-09T05:37:16.410
> 
> 标签：ruby, regex

这应该只匹配一项，但当搜索为空白时它会无限循环

```
require 'optparse'
require 'json'
require 'pp'
require "base64"

data = 'a:92:{s:7:"key_one";s:0:"";s:7:"key_two";s:17:"http://localhost/";}'
key = "key_one"
search = ""
replace = "newstring"

num = 0
while matches = /(\"#{key}\")(\}|;)s:(\d+):\"#{search.gsub('/', '\/')}(.*?)\";/.match(data)
    full_match      = matches[0]
    the_key         = matches[1]
    start_char      = matches[2]
    characters      = matches[3]
    post_domain_str = matches[4]

    ### Debug
    num = num + 1
    puts the_key + "--" + start_char + "--" + characters + "--" + post_domain_str + "\n"
    ###

    replacement_string  = "#{the_key}#{start_char}s:#{characters.to_i + replace.length - search.length}:"

    if search == ""
        replacement_string << "\"#{replace}\";"
    else
        replacement_string << "\"#{replace}#{post_domain_str}\";"
    end

    data.gsub!(/#{Regexp.escape(full_match)}/, replacement_string)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:38:37.373

你可以试试这个：

```
require 'optparse'
require 'json'
require 'pp'
require "base64"

data = 'a:92:{s:7:"key_one";s:0:"";s:7:"key_two";s:17:"http://localhost/";}'
key = "key_one"
replace = "newstring"

def get_replaced_data(data, key, replace)
    key_str = data.match(/.*{(.*)}.*/)[1]
    ary = key_str.split(';')
    key_vals = []
    i = 0
    while i < ary.size
        key_vals << [ary[i], ary[i+1]]
        i += 2
    end
    replace_data = "s:#{replace.size}:\"#{replace}\""
    key_vals.each do |dat|
        data_key = dat[0].match(/.*\"(.*)\".*/)[1]
        dat[1] = replace_data if data_key == key
    end
    result_str =key_vals.join(';')
    data.gsub(/\{.*\}/, '{'+result_str+'}')
end

data_r = get_replaced_data(data, key, replace)
# puts data_r 
```

# android - 在保持 ADB 存活的同时断开 Android 模拟器中的网络

> ID：13302646
> 
> 赞同：6
> 
> 时间：2012-11-09T05:37:17.813
> 
> 标签：android, android-emulator, adb

我在代码的某处犯了一个错误，当我在应用程序的 HTTPClient 发出一些请求时关闭模拟器中的网络时，我的 Android 应用程序崩溃了。

但是我无法调试它，因为当我关闭网络时，我也失去了 ADB 连接。因此我看不到是什么异常导致了崩溃。

我尝试通过以下方式关闭网络：

*   F8
*   在 DDMS 模拟器控制中将“数据”设置为“未注册”或“拒绝”

我可以让我的 Mac 离线，ADB 会继续运行，但不幸的是我无法以这种方式重现崩溃。

**有没有办法在模拟器中关闭网络，同时保持 ADB 活着？**我基本上需要访问 LogCat 条目。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:10:08.960

您可以从设备而不是 ADB 运行 logcat，并将其重定向到文件以供离线阅读。

```
adb shell logcat [-v threadtime] > /sdcard/mylogs/logcat.log 
```

代替

```
adb logcat [-v threadtime] 
```

然后，您可以在重新连接到设备时获取该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T07:23:51.653

在 linux 上，使用 iptables 防火墙非常简单。我想你试图调试 api 调用所以只是阻止 api 主机：

```
iptables -I OUTPUT -d api.example.com -j DROP 
```

当然，您可以使用 Mac 或 Windows 防火墙做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T08:24:57.727

您始终可以将设备置于飞行模式，这仍然允许您通过 adb 进行连接，但不能让模拟器连接到互联网。您还可以通过 ddms 中的模拟器控制部分通过 eclipse 关闭数据，方法是在数据下拉列表中输入未注册/拒绝。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-18T12:43:58.080

我知道这是个老问题，但有人可能会为此使用 find 。

我的设置

> 带有模拟 android 4.4 的 Eclipse Kepler

如果你想让你的 adb 保持活动状态并关闭网络，你可以试试这个。

1.  启动模拟设备
2.  激活飞行/飞行模式
3.  重启 Eclipse
4.  它应该工作！检查连接设备的 DDMS 透视图或使用`adb devices`命令

# c - 通过串口访问机器人

> ID：13302649
> 
> 赞同：0
> 
> 时间：2012-11-09T05:37:35.487
> 
> 标签：c, macos, serial-port

我尝试使用 gcc（我使用 mac）通过串行端口访问机器人。

我已经让我的程序发送简单的命令：

> HOME（回车），机器人有一些反馈：这是
> 归位序列命令。机器人将在每个轴上寻找其归位开关
> ，并将在该位置执行归位功能。你
> 想继续吗（是/否）？

我发送

> Y(输入)

机器人假设移动。

现在访问机器人是使用调制解调器/终端 Zterm。此调制解调器使用波特率 38400、8N1

我使用相同的波特率和 8n1

这是我的代码，我不知道为什么我的代码不能让机器人移动

谢谢

丹尼尔

```
 #include<stdio.h>   /* Standard input/output definitions */
    #include<stdlib.h>
    #include<string.h>  /* String function definitions */
    #include<unistd.h>  /* UNIX standard function definitions */
    #include<fcntl.h>   /* File control definitions */
    #include<errno.h>   /* Error number definitions */
    #include<termios.h> /* POSIX terminal control definitions */
    //#include<conio.h> 

    /*
     * 'open_port()' - Open serial port 1.
     *
     * Returns the file descriptor on success or -1 on error.
     */

    int buf_size;
    char *buf;
    char *buff;
    int fd; /* File descriptor for the port */

    int open_port(void)
    {

       fd = open("/dev/tty.USA28X1a2P2.2", O_RDWR | O_NOCTTY | O_NDELAY);  //      USA28X1a2P2.for keyspan 
    //fd = open("/dev/ttys000", O_RDWR | O_NOCTTY | O_NDELAY);   
    if (fd == -1) {
     /*
      * Could not open the port.
      */
      perror("cannot open");
   }
     else 
        fcntl(fd, F_SETFL, 0);
        struct termios options;
          /* 
           * Get the current options for the port...
           */
          tcgetattr(fd, &options);

          /*
           * Set the baud rates to 38400...
           */

         cfsetispeed(&options, B38400);
         cfsetospeed(&options, B38400);

         /*
          * Enable the receiver and set local mode...
          */

         options.c_cflag |= (CLOCAL | CREAD);

         /*
          * Set the new options for the port...
          */

         tcsetattr(fd, TCSANOW, &options);

         options.c_cflag &= ~CSIZE; /* Mask the character size bits */

         options.c_cflag &= ~PARENB;
         options.c_cflag &= ~CSTOPB;
         options.c_cflag &= ~CSIZE;
         options.c_cflag |= CS8;

     return (fd);
    }

    int main(int argc, char**argv) {
        buf =malloc(20);
        buff=malloc(20);

    //   strcpy(buf,"HOME");
    //    strcpy(buff,"Y");
        open_port();
        printf("type the command using Capital Letter : \n");
        scanf("%s",buf);
        write(fd, buf,20); // 
        write(fd," \r ",5);
        printf("Command = %s\n", buf);
        read(fd, buff,50);
        printf(" %s \n",buff);
        free(buf);
        free(buff);
        printf("type Y/N : \n");
        scanf("%s",buf);
        write(fd, buf,2);
        write(fd,"\r",2);

    //    free(buf);
    //  free (buff);
    //    printf("type Y/N : \n");
    //    write(fd, buf,20);
    //    printf("You choose %s \n",buff);
    //    free(buf);

        close(fd);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:52:47.310

你一次阅读太多。您将缓冲区分配为 20 个字节，`buff=malloc(20);`但在这里您读取的是 50个字节，`read(fd, buff,50);`这充其量会导致奇怪的行为。确保分配尽可能多的空间。你甚至不需要分配它，你可以使用一个数组。

```
char buf[1024];
char buff[1024]; 
```

然后在再次使用它们之前释放你的内存。

```
 free(buf);
 free(buff);
 printf("type Y/N : \n");
 scanf("%s",buf); 
```

在调用之前不要释放 buf 或 buff `close(fd)`。

也阅读良好的 C 风格。您正在做一些不是错误的事情，但以后会让您的生活更加艰难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:52:34.143

代码中有很多错误（如缓冲区溢出等），但我能发现的最明显的错误在这里：

```
tcsetattr(fd, TCSANOW, &options);

options.c_cflag &= ~CSIZE; /* Mask the character size bits */

options.c_cflag &= ~PARENB;
options.c_cflag &= ~CSTOPB;
options.c_cflag &= ~CSIZE;
options.c_cflag |= CS8; 
```

**只有在您已经使用它来设置文件描述符的属性之后，您才**`options`可以设置结构的字段。您必须将调用置于整个序列的末尾：**`tcsetattr()`**

 **```
options.c_cflag &= ~CSIZE; /* Mask the character size bits */
options.c_cflag &= ~PARENB;
options.c_cflag &= ~CSTOPB;
options.c_cflag &= ~CSIZE;
options.c_cflag |= CS8;

tcsetattr(fd, TCSANOW, &options); 
```

如果您不想自己手动设置所有这些，请尝试我的[辅助功能。](http://github.com/H2CO3/serialtool)**

# php - 为什么 blueimp jQuery File Upload 中出现此错误：无法将文件写入磁盘？

> ID：13302651
> 
> 赞同：0
> 
> 时间：2012-11-09T05:37:41.743
> 
> 标签：php, jquery, file-upload, blueimp

我正在使用 blueimp jQuery。如果我上传超过 50 MB 的文件，则会显示错误：`Failed to write file to disk`. 为什么会这样？我的 phpinfo 设置为`post_max_size`1072。

请帮助我显示我必须在哪里进行更改，以便一次允许上传至少 100 MB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:41:37.913

在 php.ini 中试试这个

```
upload_max_filesize 100M
post_max_size 100M
memory_limit 256M 
```

还要检查

[如何实施文件限制](https://github.com/blueimp/jQuery-File-Upload/wiki/How-to-implement-File-Limits)

# java - 获取 java.io.FileNotFoundException（访问被拒绝）

> ID：13302653
> 
> 赞同：0
> 
> 时间：2012-11-09T05:37:45.793
> 
> 标签：java

我正在使用以下代码将 a 保存`BufferedImage`到磁盘：

```
savePath = new File(path);
savePath.mkdirs();
savePath.createNewFile();
javax.imageio.ImageIO.write(img, "png", savePath); 
```

这段特定的代码在服务器之外执行，并且对于每个客户端请求运行大约 10 次。大多数情况下（10 个请求中有 9 个请求），它工作正常，并且图像按预期保存到磁盘。

但是，**有时**我得到一个`java.io.FileNotFoundException (Access is denied)`就`...ImageIO.write()`行了，并且图像没有保存。（文件夹仍然被创建）

什么会导致异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T05:51:06.870

很难相信这真的有效。您正在`savePath`通过调用创建目录，`mkdirs()`然后尝试将其创建为文件。你需要打电话`savePath.getParentFile().mkdirs()`。

`createNewFile()`调用是多余的。

# scala - Play 2.0：FakeApplication 调用存根控制器而不是真实控制器

> ID：13302657
> 
> 赞同：1
> 
> 时间：2012-11-09T05:38:24.580
> 
> 标签：scala, testing, playframework-2.0, stubbing

这是[先前问题](https://stackoverflow.com/questions/13284579/stub-controller-in-play-2-0)的延续，在该问题中我看到我对在 FakeApplication 中使用插件有误解。

首先，我有一个作为特征创建的模型和一个实现它的对象。

```
trait UserModel extends ModelCompanion[User, ObjectId] {
 // ...
}

object User extends UserModel 
```

接下来，我有一个控制器，它被创建为一个接收 UserModel 实例的抽象类，以及它各自使用 User 对象的实现。

```
abstract class UsersController extends Controller {

  val userModel: UserModel

  def sayHello = Action(parse.json) { request =>
    // return a play Action. It doesn't use userModel
  }

  // Other methods

}

object Users extends UsersController(User) 
```

在测试目录中，我使用 UserModel 模拟创建了一个 UsersController 存根：

```
package controllers

import org.specs2.mock.Mockito

object UserControllersTest extends UsersController with Mockito {
  val userModel = mock[models.UserModel]
} 
```

现在我有我的 UsersControllers Spec 测试：

```
package controllers

import org.specs2.mutable.Specification

import play.api.libs.json.Json
import play.api.test._
import play.api.test.Helpers._

class UsersSayHelloSpec extends Specification {

  running(FakeApplication()) {

    "Users.SayHello" should {

      def sendJson(jsonMap: Map[String, String], shouldBeCorrect: Boolean) = {
        running(new FakeApplication(
          additionalPlugins = Seq("controllers.UserControllersTest"))) {
          // Preapration 
          val jsonRequisition = Json.toJson(jsonMap)
          // ***************************************
          // It will call UsersControllers.sayHello
          val Some(result) = routeAndCall(FakeRequest(POST,
              "/hello",
              FakeHeaders(Map("Content-Type" -> Seq("application/json"))),
              jsonRequisition))
          // ***************************************

            // ...
        }
      }

      "Not process a empty String" in {
        sendJson(Map.empty[String, String], false)
      }

      // Other tests calling sendJson ...
    }

  }

} 
```

所以我的问题是：在 routeAndCall() 调用中，当调用“/hello”URL 时，我如何对 FakeApplication 说使用 UserControllersTest 而不是真正的 UserControllers 实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:57:51.717

您可能想要测试应用程序的两个不同部分：

*   控制器本身
*   http路由器

当您测试控制器本身时，您通常会创建一个请求并将其直接传递给控制器​​方法，该方法将生成答案。然后，您对答案进行一些验证以验证测试结果。

当您测试路由器时，您要测试的是请求是否被路由到正确的控制器方法：您直接调用 url 并检查结果是否是您期望的控制器的结果。

您尝试做的事情对我来说没有多大意义：

> 如果在路由 /hello 我有一个 dummyController，我发到路由 /hello 的帖子会正常工作吗？

由于路由文件被编译成一个实际上作为路由器工作的 Scala 类，如果（我不确定）这样的动态路由功能可用，您将不得不：

*   删除 /hello 路径上的现有路由
*   将新路由点添加到不同的控制器

# ios - 如何将图标添加到跳板

> ID：13302660
> 
> 赞同：1
> 
> 时间：2012-11-09T05:38:40.727
> 
> 标签：ios, jailbreak

我有一个关于向跳板添加图标的问题。在 Mobile Safari 中，您可以将网站作为图标添加到跳板。然后你可以点击图标进入这个网站。所以，我想知道是否有一种方法可以通过程序将这样的图标添加到跳板。越狱与否无关紧要。谢谢。

# android - Eclipse 在 NDK 构建后给出错误并且找不到大量的 android 源文件

> ID：13302661
> 
> 赞同：1
> 
> 时间：2012-11-09T05:38:42.710
> 
> 标签：android, android-ndk, native, browser-plugin

我收到以下构建错误：

```
**** Build of configuration Default for project MyPlugin ****

D:\android-ndk-r8b-windows\android-ndk-r8b\ndk-build.cmd all 
"Compile++ thumb : sampleplugin <= main.cpp

In file included from jni/animation/AnimationThread.h:25:0,
                 from jni/animation/AnimationPlugin.h:27,
                 from jni/main.cpp:31:
jni/RenderingThread.h:26:22: fatal error: SkCanvas.h: No such file or directory
compilation terminated.
make: *** [obj/local/armeabi/objs/sampleplugin/main.o] Error 1

**** Build Finished **** 
```

这是我的 Android.mk 文件：

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)

LOCAL_SRC_FILES := \
    main.cpp \
    PluginObject.cpp \
    RenderingThread.cpp \
    animation/AnimationPlugin.cpp \
    animation/AnimationThread.cpp \
    audio/AudioPlugin.cpp \
    background/BackgroundPlugin.cpp \
    form/FormPlugin.cpp \
    navigation/NavigationPlugin.cpp \
    paint/PaintPlugin.cpp \
    video/VideoPlugin.cpp \
    jni-bridge.cpp \

WEBCORE_PATH := external/webkit/Source/WebCore

LOCAL_C_INCLUDES += \
    $(JNI_H_INCLUDE) \
    $(LOCAL_PATH) \
    $(LOCAL_PATH)/animation \
    $(LOCAL_PATH)/audio \
    $(LOCAL_PATH)/background \
    $(LOCAL_PATH)/form \
    $(LOCAL_PATH)/navigation \
    $(LOCAL_PATH)/paint \
    $(LOCAL_PATH)/nspluginwrapper \
    $(LOCAL_PATH)/video \
    $(WEBCORE_PATH)/bridge \
    $(WEBCORE_PATH)/plugins \
    $(WEBCORE_PATH)/platform/android/JavaVM \
    external/webkit/Source/WebKit/android/plugins \
    external/skia/include/core

LOCAL_SHARED_LIBRARIES := \
    libnativehelper \
    libandroid \
    libutils \
    libcutils \
    libEGL \
    libGLESv2 \
    libskia

LOCAL_CFLAGS += -fvisibility=hidden 

LOCAL_MODULE:= libsampleplugin

LOCAL_MODULE_TAGS := optional

include $(BUILD_SHARED_LIBRARY) 
```

似乎在 android.mk 中指定了所需的每个路径，并且没有将每个标头复制到源 jni 文件夹中，我有什么选择？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T20:44:01.207

Skia 不是 NDK 的一部分，这就是缺少 SkCanvas.h 的原因。从您的 Android.mk 来看，您需要使用完整的 Android 树构建“您的共享库”。这可能是可能的，但由于没有库提供稳定的 API，因此无法保证您构建的内容将与不同的 Android 版本兼容（因为您使用的是共享库）。

# java - Java：将字符串中的字符添加到常量

> ID：13302664
> 
> 赞同：2
> 
> 时间：2012-11-09T05:39:00.370
> 
> 标签：java, char, addition

我遇到了一个作业问题给我

```
String test = "problemnumber3";
System.out.println(test.charAt(1));
System.out.println(test.charAt(7));
String piece = test.charAt(13)+4+"7"+test.charAt(13);
System.out.println(piece); 
```

并询问打印的内容。我看到代码得出的答案是它会打印

```
r
n
773 
```

但决定将其输入 BlueJ（我们在课堂上使用的）进行仔细检查。打印出来的代码

```
r
n
5573 
```

我不知道 55 是从哪里来的。我已经检查了所有可用的笔记和讲座材料。字符串中的数字字符是否奇怪地添加到常量或什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:42:10.120

它是字符的 ASCII 表示`'3'`，（自动转换）`4`添加到它。`48`是`'0'`，`49`是`'1'`，所以`51`是`'3'`。然后编译器添加`4`到 get `55`，然后 Java 会`String`自动将 转换为当你做时`55`的`String`表示。`55``+ "7"`

# android - 如何在android中使用http post方法发送文件？

> ID：13302670
> 
> 赞同：3
> 
> 时间：2012-11-09T05:39:37.163
> 
> 标签：android

我正在实现一个与将文件发送到服务器相关的应用程序。

我正在尝试使用 http post 方法将文件发送到服务器。

我正在使用休闲代码从 sd 卡获取文件。

```
File root = Environment.getExternalStorageDirectory();
String pathToOurFile = root+"111"; 
```

我的代码看起来像休闲。

```
StringBuilder response = new StringBuilder();
try {
  HttpPost post = new HttpPost();
  post.setURI(uri);
  List params = new ArrayList();
  params.add(new BasicNameValuePair("paramName", "paramValue"));
  post.setEntity(new UrlEncodedFormEntity(params));
  DefaultHttpClient httpClient = new DefaultHttpClient();
  HttpResponse httpResponse = httpClient.execute(post);
  if (httpResponse.getStatusLine().getStatusCode() == 200) {
    Log.d(APP_TAG, "HTTP POST succeeded");
    HttpEntity messageEntity = httpResponse.getEntity();
    InputStream is = messageEntity.getContent();
    BufferedReader br = new BufferedReader(new InputStreamReader(
    openFileInput(pathToOurFile)));
    String line;

    while ((line = br.readLine()) != null) {
     Log.v("info",",,,"+line);
     response.append(line);
     }
   } else {
     Log.e(APP_TAG, "HTTP POST status code is not 200");
   }
} catch (Exception e) {
  Log.e(APP_TAG, e.getMessage());
} 
```

但它不能正常工作。

如果知道解决方案请帮助我

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T05:53:53.137

这应该可以，但我还没有测试过代码。

```
 import org.apache.http.HttpEntity;
    import org.apache.http.HttpResponse;
    import org.apache.http.client.HttpClient;
    import org.apache.http.client.methods.HttpPost;
    import org.apache.http.entity.mime.MultipartEntity;
    import org.apache.http.entity.mime.content.FileBody;
    import org.apache.http.entity.mime.content.StringBody;
    import org.apache.http.impl.client.DefaultHttpClient;

    ...

        public static void uploadFile() throws Exception {
            HttpClient httpclient = new DefaultHttpClient();
            try {
                HttpPost httppost = new HttpPost(uri);
                String pathToOurFile = root+"111";

                File f = new File(pathToOurFile);
                FileBody bin = new FileBody(f);

                MultipartEntity reqEntity = new MultipartEntity();
                reqEntity.addPart("file", bin);
                reqEntity.addPart("paramName", paramValue);

                httppost.setEntity(reqEntity);

                HttpResponse response = httpclient.execute(httppost);
                HttpEntity resEntity = response.getEntity();

                String postResponse = response.getStatusLine();
        }

    } 
```

# sql-server - 不正确的 SQL 语法错误 ADO.NET

> ID：13302677
> 
> 赞同：0
> 
> 时间：2012-11-09T05:39:57.263
> 
> 标签：sql-server, ado.net

当我尝试运行此程序时，我得到一个 SqlException 消息“关键字'PROCEDURE'附近的语法不正确”。

```
120: cmd.CommandText = @"CREATE PROCEDURE FindState @Name nvarchar(50)
     AS SELECT IDState FROM State WHERE Name=@Name";
121: cmd.ExecuteNonQuery(); 
```

堆栈跟踪：

```
at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe)
at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
at xxx.Program.Main(String[] args) in C:\xxx\Program.cs:line 121 
```

但是我尝试直接在 SQL 查询中复制 SQL 命令并执行它并且它工作。（它创建了程序）

这里给你一些上下文是代码的一个更大的部分

```
SqlParameter stateName = new SqlParameter();
stateName.SqlDbType = SqlDbType.NVarChar;
stateName.Direction = ParameterDirection.Input;
stateName.ParameterName = "@Name";
stateName.Size = 50;
Console.Write("Enter state name: ");
stateName.Value = Console.ReadLine();
cmd.Parameters.Add(stateName);

cmd.CommandText = @"IF EXISTS (SELECT name FROM sysobjects WHERE name='FindState' AND type='P') DROP PROCEDURE FindState";
cmd.ExecuteNonQuery();
cmd.CommandText = @"CREATE PROCEDURE FindState
@Name nvarchar(50)
AS
SELECT IDState FROM State WHERE Name=@Name";
cmd.ExecuteNonQuery();
cmd.CommandType = CommandType.StoredProcedure;
cmd.CommandText = "FindState";
sdr = cmd.ExecuteReader();
if (sdr.HasRows)
{
  while (sdr.Read())
  {
    Console.WriteLine("ID state " + stateName.Value + " is " + sdr[0]);
  }
}
else
{
  Console.WriteLine("No such state exists");
}
sdr.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:16:05.643

尝试这个：

```
SqlParameter stateName = new SqlParameter();
stateName.SqlDbType = SqlDbType.NVarChar;
stateName.Direction = ParameterDirection.Input;
stateName.ParameterName = "@Name";
stateName.Size = 50;
Console.Write("Enter state name: ");
stateName.Value = Console.ReadLine();
cmd.Parameters.Add(stateName);

cmd.CommandText = "IF EXISTS (SELECT name FROM sysobjects WHERE name='FindState' AND type='P') DROP PROCEDURE FindState";
cmd.ExecuteNonQuery();
cmd.CommandText = "CREATE PROCEDURE FindState
@Name nvarchar(50)
AS
BEGIN
SELECT IDState FROM State WHERE Name=@Name";
END

cmd.CommandType = CommandType.StoredProcedure;
cmd.ExecuteNonQuery();
cmd.CommandText = "FindState";

sdr = cmd.ExecuteReader();
if (sdr.HasRows)
{
  while (sdr.Read())
  {
    Console.WriteLine("ID state " + stateName.Value + " is " + sdr[0]);
  }
}
else
{
  Console.WriteLine("No such state exists");
}
sdr.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:33:03.977

我弄清楚了问题所在。在创建过程之前，该参数已添加到 SqlCommand。我把这条线移了下来，现在它可以工作了

```
cmd.CommandText = @"CREATE PROCEDURE FindState @Name nvarchar(50) AS SELECT IDState FROM State WHERE Name=@Name";
cmd.ExecuteNonQuery();
cmd.CommandType = CommandType.StoredProcedure;
cmd.CommandText = "FindState";
cmd.Parameters.Add(stateName);
sdr = cmd.ExecuteReader(); 
```

# c++ - 是否可以在 Windows 8 环境下运行在 Visual Studio 2005 上编译的 VC++、Win32 应用程序？

> ID：13302681
> 
> 赞同：2
> 
> 时间：2012-11-09T05:40:23.387
> 
> 标签：c++, windows, visual-c++, windows-8, visual-studio-2005

我是一名 C++ 开发人员，正在学习开发在 Windows 8 环境中运行的应用程序。

我当前的应用程序是 VC++ - Win32 (Non-MFC) 应用程序，它是在 Visual Studio 2005 上编译的。
它在 Windows XP、Windows 7 上运行得很好。

我的问题：

1.  有没有免费的教程可以帮助我让我的应用程序在 Windows 8 上运行？
2.  是否强烈需要重新编写代码并将我的应用程序转换为 Metro 风格应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T05:46:32.473

您可以在 Windows 8（Windows RT 除外）上将应用程序作为常规 win32 应用程序运行。我们目前使用 Visual Studio 2005 编译我们的 Windows 应用程序，它适用于 Windows 2000 到 Windows 8。

如果您想让它成为具有以前称为 Metro 界面的“Windows 应用商店应用程序”，您至少需要重写用户界面以使用新的 Metro API，并且您将无法使用 Visual Studio 2005为了那个原因。如果你这样做了，你需要制作两个版本的应用程序，一个用于 Windows 8 上的“Windows 商店”，一个用于所有以前版本的 Windows。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T05:47:05.597

如果您的应用程序在 7 和 Vista 上运行良好，那么您的应用程序几乎可以肯定地在 Windows 8 上运行良好，前提是安装了任何必要的运行时组件（例如 VS2005 redist）（如果它们尚未存在）。

至于将其重写为 Metro 风格，这实际上取决于应用程序本身，以及您是否认为它对您的目标市场有意义。这个问题只能由您（我猜是您的用户）回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T05:46:13.020

对于问题 1，查看 MSDN，那里有很多材料。2、不需要，大部分旧应用程序无需修改即可在Windows 8上运行。您无需将应用程序转换为 Metro 风格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T21:53:17.030

您的商店应用程序需要使用 Visual Studio 2012 编写的原因是，对于商店应用程序，仅支持 VS 2012 中的 C++ 运行时。有关更多详细信息，请参阅以下帖子：

[http://blogs.msdn.com/b/vcblog/archive/2012/09/28/10354327.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/09/28/10354327.aspx)

# c - C 中的 PostgreSQL UDF 使用 hstore

> ID：13302682
> 
> 赞同：3
> 
> 时间：2012-11-09T05:40:30.377
> 
> 标签：c, postgresql, hstore

我正在用 C 编写 PostgreSQL 的扩展，我需要在我的 UDF 中使用[hstore](http://www.postgresql.org/docs/9.1/static/hstore.html%20hstore)。我可以无错误地构建（使用 pgxc），但不能在 SQL 查询中使用任何函数。

我已经尝试过`PG_LIBS=hstore`，但在加载库时遇到了未定义的引用错误。

下一次尝试是`SHLIB_LINK=-L/usr/lib/postgresql/9.1/lib -lhstore`（系统中不存在 libhstore.so，只有 hstore.so，所以我尝试了 sym 和硬链接）并得到了

```
psql:libname.sql:69: ERROR:  could not load library
"/usr/lib/postgresql/9.1/lib/libname.so": libhstore.so: cannot open shared 
object file: No such file or directory 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T05:47:06.213

从内存中，`hstore`不会暴露太多的 C API。您必须通过[服务器编程接口 (SPI)](http://www.postgresql.org/docs/current/static/spi.html)使用它，通过 C 扩展使用它的 SQL 级接口。**更新**：或者，[正如 Tom Lane 在邮件列表中指出的那样](http://archives.postgresql.org/message-id/1189.1352441539@sss.pgh.pa.us)，使用`fmgr`调用它公开的 SQL 函数，而不是使用 SPI 运行完整的 SQL 语句。**UPDATE2**：另一种选择是`load_external_function("extension", "symbol")`直接使用 C 函数；见`fmgr.h`。

您尝试使用的大多数函数都`hstore`将被声明`static`（因此它们是 hstore 模块的本地函数），这可能就是您获得未定义引用的原因。您只能将声明的内容`hstore.h`用作宏或`extern`函数。您不能只`hstore_io.c`通过直接 C 链接调用您在（例如）中找到的任何函数。

`PG_LIBS`允许您指定要链接到的共享库，但`hstore.so`不是用于在编译期间链接到的典型共享库。它是一个 PostgreSQL 扩展模块，旨在`dlopen()`由服务器编辑。我不认为真正支持链接到另一个的扩展模块。这意味着您可能甚至无法使用这些`extern`功能，而无需大量修改。

使用 SPI、`fmgr`或`load_external_function`.

如果使用`load_external_function`您可能需要管理内存上下文和其他调用上下文。试着找到它的使用例子。

看：

*   [PGXS](http://www.postgresql.org/docs/current/static/extend-pgxs.html)
*   [服务器编程接口 (SPI)](http://www.postgresql.org/docs/current/static/spi.html)
*   [调频器](http://doxygen.postgresql.org/fmgr_8h.html)
*   [我关于 pgsql-general 的问题](http://archives.postgresql.org/message-id/509C9D42.8090003@2ndQuadrant.com)

# android - 如何在片段android上做平滑过渡效果

> ID：13302683
> 
> 赞同：0
> 
> 时间：2012-11-09T05:40:34.930
> 
> 标签：android, animation, fragment

我在通过使用更改片段时应用进出过渡效果`setCustomAnimations`

方法。我有三个片段，其中两个只包含背景图像，一个片段包含三个画廊视图。

现在在对这些片段应用过渡效果时。包含画廊视图的片段相对于剩余的片段缓慢地应用过渡效果。

要如何解决这个问题，必须要感受三个具有相同平滑度的片段。查看我的代码如何将过渡应用到片段。

```
FragmentTransaction previewTransition=fragmentManager.beginTransaction();
previewTransition.setCustomAnimations(R.anim.leftin,R.anim.leftout);
PreviewFragment preview=new PreviewFragment();
previewTransition.replace(R.id.fragcontainer,preview,"Preview");
previewTransition.commit(); 
```

这是适配器 getView() 方法代码

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view;
        if(imagePaths.size() == 0)
        {
            return getCustomView();
        }
        int itemPos;
        try {
            itemPos = (position % imagePaths.size());
            if(images[itemPos] == null){
                String path = imagePaths.get(itemPos);
                BitmapDrawable drawable =new BitmapDrawable(BitmapFactory.decodeFile(path));
                drawable.setAntiAlias(true);
                images[itemPos] = drawable;
            }
        } catch (OutOfMemoryError e) {
            return getCustomView();
        }
        view=convertView;
        if(view==null)
        view = getCustomView();
        ImageView containerImage=(ImageView)view.findViewById(R.id.container);
        containerImage.setImageDrawable(images[itemPos]);
        return view;
    }
    private View getCustomView()
    {
        View imgLayout=(RelativeLayout)inflaterLayout.inflate(R.layout.conainers,null);
        return imgLayout;
    } 
```

感谢提前。

# android - AlertDialog 按钮需要双击

> ID：13302687
> 
> 赞同：1
> 
> 时间：2012-11-09T05:40:43.907
> 
> 标签：android, android-alertdialog

我在我的应用程序中显示下载文件的进度对话框，但如果用户需要取消下载，那么他将不得不按下后退按钮，然后它将弹出带有两个按钮的警报对话框。问题是我必须双击警报对话框的按钮，然后只关闭警报对话框。建议我任何解决方案。

这是和平的代码供您参考..

```
@Override
    protected Dialog onCreateDialog(int id)
    {
        switch (id)
        {
        case progress_bar_type:
            pDialog = new ProgressDialog(this);
            pDialog.setMessage("Downloading file. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setMax(100);
            pDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            pDialog.setCancelable(true);
            pDialog.show();
            pDialog.setOnKeyListener(new DialogInterface.OnKeyListener() {

                @Override
                public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
                    // TODO Auto-generated method stub
                    if(keyCode == KeyEvent.KEYCODE_BACK){

                        running = false;
                        /*Intent intent = new Intent(context, NewDialog.class);
                        startActivity(intent);*/
                        AlertDialog.Builder  alertDialog = new AlertDialog.Builder(context);
                        alertDialog.setIcon(R.drawable.ic_launcher);
                        alertDialog.setTitle("Ariisto");
                        alertDialog.setMessage("Do you Want to Cancel the Download ?");
                        alertDialog.setCancelable(true);
                        alertDialog.setPositiveButton("YES", new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog, int which) {

                                File externalFile = new File(Environment.getExternalStorageDirectory(),"downloadedfile.pdf");
                                externalFile.delete();
                                pDialog.dismiss();
                                running = false;
                                Log.d("External File", "DELETED");
                                pDialog.setProgress(0);
                                count = 2;
                            }
                        });
                        alertDialog.setNegativeButton("NO", new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog, int which) {
                                // TODO Auto-generated method stub
                                new DownloadFileFromURL().execute(file_url);
                                running = true;
                                count = 0;
                            }
                        });
                        AlertDialog alert = alertDialog.create();
                        alert.show();
                    }
                    return false;
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:46:52.103

问题是覆盖`onKey()`注册你`Activity`的两个事件，`KEY_DOWN`以及`KEY_UP`给定的键。所以碰巧你`AlertDialog`在这两个事件上触发了两次。我建议您覆盖该`onKeyDown()`方法并将您的代码移到那里。希望这可以帮助。

# ruby-on-rails - 从某些页面获取路由错误

> ID：13302692
> 
> 赞同：0
> 
> 时间：2012-11-09T05:41:11.580
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我有这条路线

`profile GET /contacts/:id(.:format) {:controller=>"my_devise/contacts", :action=>"profile"}`

这是我的控制器/application_controller.rb

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  before_filter :get_current_user

    def get_current_user
        @current_user = current_user
    end

end 
```

`<%= link_to "Profile", profile_path(@current_user) %>`如果我在 url 上的view/layouts/application.html.erb 文件中有此链接，我`http://localhost:3000/contacts/1`没有错误，但如果我尝试点击 url `http://localhost:3000/contacts`，我会收到以下错误

```
Routing Error

No route matches {:controller=>"my_devise/contacts", :action=>"profile"} 
```

如果我删除 application.html.erb 文件中的链接并点击`http://localhost:3000/contacts`，错误就会消失。

为什么该链接会导致此错误？

**编辑**

完整的路线文件

```
$ rake routes
          users_sign_out GET    /users/sign_out(.:format)      {:controller=>"devise/sessions", :action=>"destroy"}
           users_sign_in GET    /users/sign_in(.:format)       {:controller=>"my_devise/sessions", :action=>"new"}
                    home GET    /home(.:format)                {:action=>"index", :controller=>"my_devise/sessions"}
                contacts GET    /contacts(.:format)            {:action=>"list", :controller=>"my_devise/contacts"}
                 profile GET    /contacts/:id(.:format)        {:controller=>"my_devise/contacts", :action=>"profile"}
            edit_profile GET    /contacts/:id/edit(.:format)   {:controller=>"my_devise/contacts", :action=>"edit"}
                         POST   /contacts/:id/edit(.:format)   {:controller=>"my_devise/contacts", :action=>"update_user"}
                    more GET    /more/:id(.:format)            {:controller=>"my_devise/contacts", :action=>"more"}
                         POST   /home(.:format)                {:action=>"create_new_user", :controller=>"my_devise/sessions"}
           users_sign_up GET    /users/sign_up(.:format)       {:controller=>"my_devise/registrations", :action=>"new"}
                         POST   /users/sign_up(.:format)       {:controller=>"my_devise/registrations", :action=>"new"}
        new_user_session GET    /users/sign_in(.:format)       {:action=>"new", :controller=>"devise/sessions"}
            user_session POST   /users/sign_in(.:format)       {:action=>"create", :controller=>"devise/sessions"}
    destroy_user_session DELETE /users/sign_out(.:format)      {:action=>"destroy", :controller=>"devise/sessions"}
           user_password POST   /users/password(.:format)      {:action=>"create", :controller=>"devise/passwords"}
       new_user_password GET    /users/password/new(.:format)  {:action=>"new", :controller=>"devise/passwords"}
      edit_user_password GET    /users/password/edit(.:format) {:action=>"edit", :controller=>"devise/passwords"}
                         PUT    /users/password(.:format)      {:action=>"update", :controller=>"devise/passwords"}
cancel_user_registration GET    /users/cancel(.:format)        {:action=>"cancel", :controller=>"devise/registrations"}
       user_registration POST   /users(.:format)               {:action=>"create", :controller=>"devise/registrations"}
   new_user_registration GET    /users/sign_up(.:format)       {:action=>"new", :controller=>"devise/registrations"}
  edit_user_registration GET    /users/edit(.:format)          {:action=>"edit", :controller=>"devise/registrations"}
                         PUT    /users(.:format)               {:action=>"update", :controller=>"devise/registrations"}
                         DELETE /users(.:format)               {:action=>"destroy", :controller=>"devise/registrations"}
        new_user_session GET    /users/sign_in(.:format)       {:action=>"new", :controller=>"my_devise/sessions"}
                         POST   /users/sign_in(.:format)       {:action=>"create", :controller=>"my_devise/sessions"}
    destroy_user_session DELETE /users/sign_out(.:format)      {:action=>"destroy", :controller=>"my_devise/sessions"}
                         POST   /users/password(.:format)      {:action=>"create", :controller=>"devise/passwords"}
                         GET    /users/password/new(.:format)  {:action=>"new", :controller=>"devise/passwords"}
                         GET    /users/password/edit(.:format) {:action=>"edit", :controller=>"devise/passwords"}
                         PUT    /users/password(.:format)      {:action=>"update", :controller=>"devise/passwords"}
                         GET    /users/cancel(.:format)        {:action=>"cancel", :controller=>"my_devise/registrations"}
                         POST   /users(.:format)               {:action=>"create", :controller=>"my_devise/registrations"}
                         GET    /users/sign_up(.:format)       {:action=>"new", :controller=>"my_devise/registrations"}
                         GET    /users/edit(.:format)          {:action=>"edit", :controller=>"my_devise/registrations"}
                         PUT    /users(.:format)               {:action=>"update", :controller=>"my_devise/registrations"}
                         DELETE /users(.:format)               {:action=>"destroy", :controller=>"my_devise/registrations"}
              home_index GET    /home/index(.:format)          {:controller=>"home", :action=>"index"}
                    root        /                              {:controller=>"home", :action=>"index"}
                    root        /                              {:controller=>"home", :action=>"index"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:55:30.753

要回答您的实际问题，这是因为您没有针对该问题的路线（`/contacts`- 请注意没有 id）。您的路线是`/contacts/:id(.:format)`- 格式是可选的，但 id 不是。您还需要将 id 设为可选，或创建另一条路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:13:26.533

路线是这样的

联系人 GET /contacts(.:format) {:action=>"list", :controller=>"my_devise/contacts"}

在这里，我们还必须给出格式。如果我们提供联系人，它将引发路由错误。所以也请输入格式。

# asp.net-mvc - ASP.NET MVC 中的异步控制器

> ID：13302696
> 
> 赞同：11
> 
> 时间：2012-11-09T05:41:26.060
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我检查了 MVC 4.0 中的 System.Web.Mvc.AsyncController，它有注释“提供与 ASP.NET MVC 3 的向后兼容性”。这是否意味着在 MVC 4 中有一个新的异步控制器实现？MVC 4.0 中启用异步控制器以将 I/O 密集操作放在 IIS 请求线程池以外的其他线程池中的正确方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-09T06:51:12.317

从 ASP.NET MVC 4 开始，您现在可以使用`System.Web.Mvc.Controller`该类作为基类并利用 TAP（基于任务的异步模式）：

```
public async Task<ViewResult> Index() { 

     return View(await GetThingsAsync());
} 
```

请注意，您不必使用C# 5.0 附带的`async`和`await`关键字，但它们使异步编程变得更加容易和可维护。

看看以下文章：

*   [在 ASP.NET MVC 4 中使用异步方法](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)
*   [我对 C# 5.0 和 ASP.NET MVC Web 应用程序中基于任务的异步编程的看法](http://www.tugberkugurlu.com/archive/my-take-on-task-base-asynchronous-programming-in-c-sharp-5-0-and-asp-net-mvc-web-applications)
*   [ASP.NET MVC 4 中使用基于任务的异步编程模型 (TAP) 的异步数据库调用](http://www.tugberkugurlu.com/archive/asynchronous-database-calls-with-task-based-asynchronous-programming-model-tap-in-asp-net-mvc-4)

# ocaml - 小 Lwt 端口扫描仪不工作

> ID：13302697
> 
> 赞同：1
> 
> 时间：2012-11-09T05:41:26.963
> 
> 标签：ocaml

我正在尝试编写一个小型 Lwt（和电池）端口扫描仪以更好地理解 Lwt，但是每当我尝试使用 scan_ports_range 一次扫描太多端口时，我都会遇到一个奇怪的异常。我怀疑我的保持最大连接打开数的机制不起作用......

`Exception: Unix.Unix_error (Batteries.Unix.EMFILE, "socket",""). Fatal error: exception Sys_error("/home/(censored)/.opam/4.00.1/lib/utop: Too many open files")` （顺便说一句，这也会崩溃）

代码如下。要触发错误评估： `scan_ports_range ~host:"127.0.0.1" (1000,2000)`

也欢迎对我的 lwt 风格提出任何批评/建议，因为我才刚刚开始学习它。

```
open Lwt

let addr_parts addr = 
  let (host, port) = String.split addr ":" in (host, int_of_string port)

let addr ~host ~port = 
  lwt entry = Lwt_unix.gethostbyname host in
  if Array.length entry.Unix.h_addr_list = 0 then begin
    failwith (Printf.sprintf "no address found for host %S\n" host)
  end;
  return (Unix.ADDR_INET (entry.Unix.h_addr_list.(0), port))

let test_connection ?(timeout=1.0) addr = 
  let fd = Lwt_unix.socket Unix.PF_INET Unix.SOCK_STREAM 0 in
  let connect_close = 
    (Lwt_unix.connect fd addr) >>= (fun () -> Lwt_unix.close fd)  in
  try_lwt
    (pick [connect_close ; Lwt_unix.timeout timeout])
    >>= (fun () -> return true)
  with _ -> return false

let scan_ports ~host ~ports =
  ports |> Lwt_list.map_p (fun port ->
        lwt adr = addr ~host ~port in
        test_connection adr >>= (fun res -> return (res,port)) )
    >>= (fun l -> return ( l |> List.filter_map ( function
      | false, _ -> None | true, port -> Some(port) ) ) )

let scan_ports_range ?(max_open=20) ~host (a, b) =
  let rec loop acc enum = 
    match Enum.peek enum with
    | None -> acc |> List.concat |> List.rev |> return
    | Some _ -> 
        let ports = enum |> Enum.take max_open |> List.of_enum in
        let open_ports = scan_ports ~host ~ports in
        open_ports >>= (fun l -> loop (l::acc) enum )
  in loop [] (a--b) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T08:19:15.203

作为一个疯狂的猜测，我认为你需要在超时的情况下强制关闭套接字，所以 cullprint 可能是：

```
pick [connect_close ; Lwt_unix.timeout timeout] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:17:32.497

这是根据 Thomas 的更正代码。

```
let test_connection ?(timeout=1.0) addr = 
  let fd = Lwt_unix.socket Unix.PF_INET Unix.SOCK_STREAM 0 in
  let connect_close = 
    (Lwt_unix.connect fd addr) >>= (fun () -> Lwt_unix.close fd)  in
  try_lwt
    (pick [connect_close ; Lwt_unix.timeout timeout])
    >>= (fun () -> return true)
  with _ -> (Lwt_unix.close fd) >>= (fun () -> return false) 
```

# c# - 数组不同的 lambda 比较与偏好

> ID：13302705
> 
> 赞同：3
> 
> 时间：2012-11-09T05:42:03.620
> 
> 标签：c#, lambda, comparison, distinct

我有以下形状的数据

```
someArray = [{ Name: "Some Class", TypeEnum: "Default" },
 { Name: "Some Class", TypeEnum: "Other" },
 { Name: "Some Class 2", TypeEnum: "Default" },
 { Name: "Some Class 2", TypeEnum: "Other" },
 { Name: "Some Class 3", TypeEnum: "Default" },
 { Name: "Some Class 4", TypeEnum: "Not Other" }] 
```

将它们中的每一个想象成 C# 中的对象

我需要的是该数组的一个不同版本的数组，优先选择一个选定的 TypeEnum。例如，如果我选择了其他的 TypeEnum，如果找不到具有“其他”TypeEnum 的类的版本，我仍然希望它默认为默认值

例如选择“其他”作为类型枚举，上面的数据看起来像

```
 [{ Name: "Some Class", TypeEnum: "Other" },
 { Name: "Some Class 2", TypeEnum: "Other" },
 { Name: "Some Class 3", TypeEnum: "Default" }] 
```

我现在正在做的是从[这里开始的 lambda 比较](http://www.codekeep.net/snippets/b0255a8b-a5e5-4a7c-9f2a-f6a4c2f2c6f1.aspx)

```
TypeEnum myEnum = "Other"
someArray.Distinct((x,y) => x.Name == y.Name && 
                   x.TypeEnum != myEnum && 
                   (y.TypeEnum == myEnum || y.TypeEnum == "Default")); 
```

我希望 Distinct 从数组中弹出任何从该表达式中得到为真的 x 。

我认为 Distinct 的工作方式是错误的。如果我是，我应该用什么代替？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:46:34.717

您可以定义一个`Comparer<T>`类来处理您的比较偏好，如下所示：

```
public class SomeClassComparer : Comparer<SomeClass>
{
    private TypeEnum _preference;

    public SomeClassComparer(TypeEnum preference)
        : base()
    {
        _preference = preference;
    }

    public override int Compare(SomeClass x, SomeClass y)
    {
        if (x.Name.Equals(y.Name))
        {
            return x.TypeEnum == y.TypeEnum ? 0
                : x.TypeEnum == _preference ? -1
                : y.TypeEnum == _preference ? 1
                : x.TypeEnum == TypeEnum.Default ? -1
                : y.TypeEnum == TypeEnum.Default ? 1
                : x.TypeEnum.CompareTo(y.TypeEnum);
        }
        else
            return x.Name.CompareTo(y.Name);
    }
} 
```

更新：如果您只对首选或 Default 的元素感兴趣，则`TypeEnum`可以先过滤掉其余的元素。然后根据比较器对数组进行排序，即给予`TypeEnum`比默认更高的优先级。最后按对象的名称对对象进行分组，并从每个组中取出第一个：

```
var result = someArray.Where(x => x.TypeEnum == TypeEnum.Default || x.TypeEnum == myEnum)
                      .OrderBy(x => x, new SomeClassComparer(myEnum))
                      .GroupBy(x => x.Name)
                      .Select(x => x.First()); 
```

* * *

或者，如果您不想定义 Comparer 类，可以使用以下版本：

```
Comparison<SomeClass> compareByTypeEnum = (x, y) =>
{
    if (x.Name.Equals(y.Name))
    {
        return x.TypeEnum == y.TypeEnum ? 0
            : x.TypeEnum == myEnum ? -1
            : y.TypeEnum == myEnum ? 1
            : x.TypeEnum == TypeEnum.Default ? -1
            : y.TypeEnum == TypeEnum.Default ? 1
            : x.TypeEnum.CompareTo(y.TypeEnum);
    }
    else
        return x.Name.CompareTo(y.Name);
};
Array.Sort(someArray, compareByTypeEnum);
var result = someArray.Where(x => x.TypeEnum == TypeEnum.Default || x.TypeEnum == TypeEnum.Other)
                      .GroupBy(x => x.Name)
                      .Select(x => x.First()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:49:59.033

您可以使用 GroupBy 获取字典来完成此类工作。可能它也简单得多。

```
List<Tuple<string, string>> lst = new List<Tuple<string, string>>();
lst.Add(new Tuple<string, string>("Some Class", "Default"));
lst.Add(new Tuple<string, string>("Some Class", "Other"));
lst.Add(new Tuple<string, string>("Some Class 2", "Default"));
lst.Add(new Tuple<string, string>("Some Class 2", "Other"));
lst.Add(new Tuple<string, string>("Some Class 3", "Default"));

var dict = lst.GroupBy(g => g.Item1)
              .ToDictionary(g => g.Key, k => k.Select(s => s.Item2)
                                              .Where(p => p == "Other")
                                              .DefaultIfEmpty("Default")
                                              .First()); 
```

或者在你的情况下：

```
TypeEnum myEnum = "Other"
var dict = lst.GroupBy(g => g.Name)
    .ToDictionary(g => g.Key, k => k.Select(s => s.TypeEnum)
                                .Where(p => p == myEnum)
                                .DefaultIfEmpty("Default")
                                .First()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T07:18:15.557

Distinct 无法按照您想要的方式工作，这就是为什么您可能永远无法让它自己工作的原因。Distinct 使用哈希表来查找唯一值。它按顺序将每个项目添加到哈希表中，并省略添加哈希值等于哈希表中已经存在的任何其他值的任何值。

这意味着您的项目的顺序很重要，因为数组中的第一个项目获胜。我们可以通过在调用 distinct 之前修改列表的顺序来利用这一点。稍微修改@Fung的[解决方案，我们得到这个......](https://stackoverflow.com/a/13303381/1370166)

```
var result = someArray.OrderBy(key => key.TypeEnum, new TypeEnumComparer(myEnum))
    .Distinct(new LambdaEqualityComparer<SomeClass>((x, y) => x.Name == y.Name)); 
```

使用修改后的比较器...

```
public class TypeEnumComparer : Comparer<TypeEnum>
{
    private TypeEnum _preference;

    public TypeEnumComparer(TypeEnum preference)
        : base()
    {
        _preference = preference;
    }

    public override int Compare(TypeEnum x, TypeEnum y)
    {
        if (x == y)                return 0;
        if (x == _preference)      return -1;
        if (y == _preference)      return 1;
        if (x == TypeEnum.Default) return -1;
        if (y == TypeEnum.Default) return 1;

        return x.CompareTo(y);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T06:46:43.173

试试这个，使用`DefaultIfEmpty("Default")`

```
 var someArray = new List<TestClass>
                            {
                                new TestClass {Name = "Some Class", TypeEnum = "Default"},
                                new TestClass {Name = "Some Class", TypeEnum = "Other"},
                                new TestClass {Name = "Some Class 2", TypeEnum = "Default"},
                                new TestClass {Name = "Some Class 2", TypeEnum = "Other"},
                                new TestClass {Name = "Some Class 3", TypeEnum = "Default"}
                            };

        string myEnum = "Other";

        var result = someArray.GroupBy(t => t.Name).
                     Select(t => new TestClass
                       {
                           Name = t.Key,
                           TypeEnum = t.Select(s => s.TypeEnum).Where(p => p == myEnum).DefaultIfEmpty("Default").FirstOrDefault()
                       }); 
```

# javascript - 没有在 javascript 中删除的 cookie

> ID：13302707
> 
> 赞同：0
> 
> 时间：2012-11-09T05:42:09.857
> 
> 标签：javascript

我有三个cookie compare1、compare2 和compare3。用户单击关闭按钮后，我想删除 cookie，然后获取设置为 compare2 或 compare3 或 compare1 的 cookie。我也在使用 javascript，但我的 cookie 没有被删除。这是我的代码：

```
 $('#srchresult #frmCompare a.close').click( function() {
   var parentName = $(this).parent().attr('id');
   var parentId=  parentName.replace('dvPkg','');       
   document.cookie = 'compare'+parentId + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        alert(document.cookie);
        var username1=getCookie("compare1");
        var username2=getCookie("compare2");
        var username3=getCookie("compare3");

        if (username1!=null && username1!="")
  {
  alert(username1);
  }
   if (username2!=null && username2!="")
  {
  alert(username2);
  }
   if (username3!=null && username3!="")
  {
  alert(username3);
  }
}); 
```

尽管删除了 cookie，但我仍然在警报中收到 cookie。我想在不刷新页面的情况下删除 cookie 并获取剩余的两个 cookie。

创建 cookie 时，我没有设置域或路径。我想在不刷新页面的情况下删除 cookie。我正在使用 php 创建 cookie

```
 $cookie = array( 'name' => 'compare' . $noOfItem, 'value' => $noOfItem . '^' . $postId . '^' . $postType . '^' . $return_result['deal_title'] . '^' . $return_result['img_filename'] . '^' . $postcompareCountry, 'expire' => '0', ); 

$this->input->set_cookie($cookie); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:57:49.437

您需要为您的 cookie 添加一个“路径”。例如：

```
document.cookie = 'cookie2=yet another test; expires=Fri, 27 Jul 2001 02:47:11 UTC; path=/'; 
```

路径代表您网站中 cookie 可读的相对路径。path=/ 意味着它将在您的整个网站中可读。path=/common/ 意味着它只能在 /common/ 文件夹（及其子文件夹）中读取

这是关于 cookie的**[MDN](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)**上很好的教程：-

**更新 ：-**

在创建 Cookie 时尝试添加路径：-

```
 $cookie = array( 'name' => 'compare' . $noOfItem, 'value' => $noOfItem . '^' . $postId . '^' . $postType . '^' . $return_result['deal_title'] . '^' . $return_result['img_filename'] . '^' . $postcompareCountry, 'expire' => '0','path' => '/' ); 
```

你也可以看看[这个](http://php.net/manual/en/function.setcookie.php)：-

# bash - 壳牌初学者

> ID：13302710
> 
> 赞同：1
> 
> 时间：2012-11-09T05:42:19.693
> 
> 标签：bash, shell, sh

我已经做了很多研究，但是信息有点压倒性，我不确定我在需要采取的步骤中是否获取了正确的信息。

只是一些基本的问题让我开始：

我已经阅读了一些教程并设法编写了自己的小脚本，但我注意到每个人的脚本中都有不同的东西让我感到困惑。

由于我真的不知道如何问这些问题，也不知道应该按什么顺序问它们，所以我就卸载一些。

我如何知道何时需要附加`.sh`到文件？为什么有些脚本的开头与 中相同，`#!/bin/bash`但其中一些已`.sh`附加到文件中而有些则没有？

我想我还有很多问题，但首先，最重要的是我刚刚问的两个问题。我只是对我应该如何...“声明”我的 shell 脚本感到困惑。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T05:52:08.357

> 我如何知道何时需要将 .sh 附加到文件中？

文件扩展名对您来说只是一个标志，也许还有其他一些“聪明”的程序来指示它里面有什么样的内容。没有必要。

> 为什么有些脚本的开头与 #!/bin/bash 相同，但有些脚本在文件中附加了 .sh 而有些则没有？

[Shebang](http://tldp.org/LDP/abs/html/sha-bang.html) inside 文件`X.sh`允许它像`$> ./X.sh`.

还有一个小建议：做一些随机的问题或任务，可能不是真的有用，并尝试用`bash`. 这[两个](http://tldp.org/LDP/abs/html/) [家伙](http://mywiki.wooledge.org/EnglishFrontPage)可以帮助你很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T08:18:59.913

1.  `.sh`是可选的（比如文本文件并不总是有`.txt`扩展名）。它确实允许用户将其识别为 shell 脚本。

2.  `#!/bin/bash`被称为“shebang”（或“hashbang”）。维基百科上有一个相当不错的[条目](https://en.wikipedia.org/wiki/Shebang_%28Unix%29)。

    Shebang 仅在您执行脚本时使用。它指定执行脚本时要使用的解释器。如果没有 shebang，则使用默认 shell 来解释脚本。

    如果您的 shebang 是`#!/bin/bash`，并且您执行脚本`./script.sh`，则相当于在控制台中键入：

    ```
    /bin/bash ./script.sh 
    ```

* * *

要使您的脚本可执行，您需要

```
 chmod +x script.sh 
```

* * *

shebang 演示（打印前五行的“脚本”）

1.  创建一个`printmeself`包含此内容的文件

    ```
    #!/usr/bin/head -5
    I will be printed
    I will be printed 2
    I will be printed 3
    I will be printed 4
    I won't be printed
    Bye 
    ```

2.  `chmod +x printmeself`

3.  `./printmeself`

4.  ？？？

5.  利润

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T05:53:09.573

1.  `.sh`只是一个约定，它可以帮助用户在不打开文件的情况下知道它是否是一个 shell 脚本。对于 shell 脚本来说，有这个约定并不是必须的。但是，建议使用它。
2.  `#!/bin/bash`是写入文件开头的魔法线，它告诉脚本必须在哪个 shell 中执行。不同的 shell 的语法是不同的。因此，当您编写一个 shell 脚本时，建议指定您希望执行此脚本的 shell。如果未指定，内核将决定哪个 shell 可以是 bourne shell 或与登录 shell 相同。

# asp.net - Maximizer CRM 12 Web 访问中的 ASP.NET 错误

> ID：13302711
> 
> 赞同：1
> 
> 时间：2012-11-09T05:42:20.380
> 
> 标签：asp.net

安装 Maximizer CRM 12 (Web Access) 后出现以下错误。

> “在执行当前 Web 请求期间发生了未处理的异常。请查看堆栈跟踪以获取有关该错误及其源自代码的位置的更多信息。”

该代码是 100% 正确的，我不想碰它。

我的系统是 Windows Server 2008 R2，运行 IIS 7.5、ASP.Net 4.0 和 MS SQL Server 2008 R2。

任何帮助，将不胜感激。

提前致谢！

劳伦斯

* * *

完整的错误详细信息：

## “/MaximizerWebAccess”应用程序中的服务器错误。

你调用的对象是空的。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[NullReferenceException：对象引用未设置为对象的实例。] d:\v12\Release_v12\WebPortals\Employee\Content\MyWorkDay\mwdTasks.aspx.cs 中的 Maximizer.Employee.Content.MyWorkDay.mwdTasks.SetInterfaceStrings()： 36 Maximizer.Employee.Content.MyWorkDay.mwdTasks.OnInit(EventArgs e) 在 d:\v12\Release_v12\WebPortals\Employee\Content\MyWorkDay\mwdTasks.aspx.cs:786 System.Web.UI.Control.InitRecursive(Control命名容器）+140 System.Web.UI.Page.ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+480

# java - 字符串“”（空白字符串）的字符等价物是什么？

> ID：13302712
> 
> 赞同：1
> 
> 时间：2012-11-09T05:42:23.120
> 
> 标签：java

> **可能重复：**
> [如何在 Java Character 类中表示空字符](https://stackoverflow.com/questions/8534178/how-to-represent-empty-char-in-java-character-class)

我正在使用 java.lang.String 中定义的替换函数，我尝试使用“\0”作为“”（空白字符串）的等效项，但它添加了一个空格而不是空白字符串。

是否有与空白字符串等效的字符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T05:48:24.847

没有所谓的“空字符”。A`char`是一个值类型，所以它必须有一个值。没有值就是没有 a `char`- 这就是为什么你可以有空字符串（即“无字符”）和可以为空的字符，但不能有“空字符”。

无论如何，该`String.replace(char, char)`方法旨在用一个字符替换另一个字符。这个操作非常简单，因为这意味着必须分配一个已知大小的块。而`String.replaceAll(string,string)`实现方法要复杂得多，这就是它们不同的原因。

不幸的是，没有`String.replace(char,string)`方法 - 但我希望你能理解为什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T05:53:56.587

如果要删除字符，则不能使用[String.replace(char,char) 。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replace%28char,%20char%29)没有空字符。该方法永远不会改变字符串的长度，它只是用另一个字符替换一个字符

您必须使用[String.replaceAll(java.lang.String, java.lang.String)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)（或`replaceFirst`）

```
"ababababa".replaceAll("a", ""); // returns "bbbb" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T05:49:57.183

我想你想用“”替换“某事”，你不能反过来做......

```
 String ou="test";
       ou = ou.replace("t", "");
       System.out.println(ou); 
```

输出将是：`es`

使用`char`替换版本这将不起作用，因为 '' 不是有效的`char`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T05:44:27.713

`String`给定的空白有无限多个……在和`String`之间有多少“无” ？这就像除以零！`'a'``'b'``"ab"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T05:46:04.387

没有，但请注意有一个`String.replace(CharSequence, CharSequence)`，因此您应该能够`String.replace`使用字符串作为第一个参数和 "" 作为第二个参数进行调用。

# mysql - 具有动态值的 MySql 条件插入

> ID：13302714
> 
> 赞同：4
> 
> 时间：2012-11-09T05:42:35.077
> 
> 标签：mysql, sql

所以在我解释我的问题之前，这里有几个精简的表定义来帮助说明我的问题：

```
-- Holds data about different memberships
CREATE TABLE IF NOT EXISTS `Member_Types` ( 
`ID` INT UNSIGNED NOT NULL AUTO_INCREMENT, 
`Name` VARCHAR(20) NOT NULL,  
`Description` VARCHAR(255) NOT NULL, 
`Member_Limit` TINYINT(2) UNSIGNED NOT NULL DEFAULT '0', 
PRIMARY KEY( `ID` )
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `Member_Types` ( `ID`, `Name`, `Description`, `Member_Limit` ) VALUES 
( 1, 'General Member', 'Description of this membership.', 00 ), 
( 2, 'Extended Member', 'Description of this membership.', 00 ), 
( 3, 'Premium Member', 'Description of this membership.', 00), 
( 4, 'General Administrator', 'Description of this membership.', 05 ), 
( 5, 'Master Administrator', 'Description of this membership.', 01 );

-- Stores the basic data about our site members
CREATE TABLE IF NOT EXISTS `Member_Infos` ( 
`ID` BIGINT(8) UNSIGNED ZEROFILL NOT NULL AUTO_INCREMENT, 
`Username` VARCHAR(30) NOT NULL UNIQUE, 
`Password` CHAR(41) NOT NULL, 
`EmailAddr` VARCHAR(100) NOT NULL, 
`Type_ID` INT UNSIGNED NOT NULL, 
`Salt_ID` BIGINT(8) UNSIGNED ZEROFILL NOT NULL, 
PRIMARY KEY( `ID` ), 
FOREIGN KEY( `Type_ID` ) REFERENCES `Member_Types` ( `ID` )
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

Member_Infos 表包含绑定 Member_Infos.Type_ID = Member_Types.ID 的外键

Member_Types 表有一个列 Member_Limit，它包含一个整数，表示 Member_Infos 表可以包含的最大记录数，其中 Type_ID 等于 Member_Types.ID

我能够编写一个检查约束，但显然 mysql 没有检查约束。我想编写一个触发器，在插入之前检查 member_infos 表中的记录数是否 <= Member_Types.Member_Limit。例如：使用上面的数据，记录 4 的 Member_Limit = 5。如果尝试将新记录插入到 Type_ID = 4 的 Member_Infos 表中，并且在 Member_Infos 表中 Type_ID <= 5 的记录计数比数据被插入，否则被拒绝。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T07:13:24.403

您可以编写自己的普通查询来在插入之前检查“约束”，而不是触发器。尝试：

```
INSERT INTO member_infos
SELECT      1, 'Timothy', 'secret', 'me@myself.com', 5, 0
FROM        dual
WHERE       (SELECT COUNT(*) FROM member_infos WHERE Type_ID = 5) 
            < 
            (SELECT Member_Limit FROM member_types WHERE ID = 5) 
```

我曾经检查过`Type_ID`= 5 的情况。如果不满足计数条件，这将忽略，并且仅当 member_info 中类型 id = 5 的条目的成员计数小于`member_types`表中设置的限制时才插入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T10:17:08.907

在 MySQL 中，触发器可能是在数据库级别执行此操作的正确方法。

但是，执行这种业务规则通常被认为是您应该在应用程序层而不是在数据库中执行的操作。业务规则有变化的习惯，修改应用层通常比修改数据库容易。为应用层代码编写单元测试也更容易，调试应用层通常也更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T10:07:01.013

要引发错误，请在触发器中使用 SIGNAL 语句。

见 [http://dev.mysql.com/doc/refman/5.5/en/signal.html](http://dev.mysql.com/doc/refman/5.5/en/signal.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T10:57:19.903

[**Sql Fiddle 演示链接**](http://sqlfiddle.com/#!2/77f37)

您可以尝试通过添加以下插入语句

```
INSERT INTO `member_infos` (`ID`, `Username`, `Password`, `EmailAddr`, `Type_ID`,
 `Salt_ID`) VALUES (2, 'ewsew', 'ew', 'ewq', 2, 2); 
```

在整个代码的末尾。不允许您进行此插入，因为`type_id=2`允许 0 条记录`member_ifos`。`type_id=5`同样，插入五个记录后，您将在插入时出错。

我添加了一个触发器，因为您需要对每个新条目进行验证，而不是一些静态值。**所以它不是同一个问题，dual 可以像** [MySQL Conditional Insert](https://stackoverflow.com/questions/913841/mysql-conditional-insert)这样的 SO 上的一些问题一样工作，因为你需要 new.type_id ，它只在触发器中可用

**以下是完整代码**

```
CREATE TABLE IF NOT EXISTS `member_infos` (
  `ID` bigint(8) unsigned zerofill NOT NULL AUTO_INCREMENT,
  `Username` varchar(30) NOT NULL,
  `Password` char(41) NOT NULL,
  `EmailAddr` varchar(100) NOT NULL,
  `Type_ID` int(10) unsigned NOT NULL,
  `Salt_ID` bigint(8) unsigned zerofill NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Username` (`Username`),
  KEY `Type_ID` (`Type_ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;

-- Triggers `member_infos`

DROP TRIGGER IF EXISTS `validate_Member_infos_insert`;
DELIMITER //
CREATE TRIGGER `validate_Member_infos_insert` BEFORE INSERT ON `member_infos`
 FOR EACH ROW begin
declare lim int;declare cnt int;
select member_limit into lim from member_types where id=new.Type_id;
select count(*) into cnt from Member_Infos where type_id=new.Type_id;
if cnt>=lim
then
select `Member Limit exeeded for this type` into lim from member_infos;
end if;
end
//
DELIMITER ;

CREATE TABLE IF NOT EXISTS `member_types` (
  `ID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `Name` varchar(20) NOT NULL,
  `Description` varchar(255) NOT NULL,
  `Member_Limit` tinyint(2) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=6 ;

INSERT INTO `member_types` (`ID`, `Name`, `Description`, `Member_Limit`)
VALUES (1, 'General Member', 'Description of this membership.', 0),
(2, 'Extended Member', 'Description of this membership.', 0),
(3, 'Premium Member', 'Description of this membership.', 0),
(4, 'General Administrato', 'Description of this membership.', 5),
(5, 'Master Administrator', 'Description of this membership.', 1);

INSERT INTO `member_infos` (`ID`, `Username`, `Password`, `EmailAddr`,
`Type_ID`, `Salt_ID`) VALUES (1, 'ewsew', 'ew', 'ewq', 5, 2); 
```

注意：有些人可能会改进/删除错误消息`#1054 - Unknown column 'Member Limit exeeded for this type' in 'field list'`。需要此异常，因为它会阻止在询问者所需条件下插入。但改进将不胜感激。我无法解决它。

# jquery - Jquery 多个 id 链接来切换不同的 div

> ID：13302716
> 
> 赞同：1
> 
> 时间：2012-11-09T05:42:43.130
> 
> 标签：jquery, html, click, toggle

我有这些链接来切换相应的 div，`display:hidden;`我该如何对它们进行分组？因为我有10多个。

```
 $('a#toggle-b').click(function() {
            $('.toggle-b').toggle('slow').css('display','inline-block').siblings().hide('slow');
            $('.describe').fadeIn('slow');
            return false
            });

            $('a#toggle-c').click(function() {
            $('.toggle-c').toggle('slow').css('display','inline-block').siblings().hide('slow');
            $('.describe').fadeIn('slow');
            return false
            });

            $('a#toggle-d').click(function() {
            $('.toggle-d').toggle('slow').css('display','inline-block').siblings().hide('slow');    
            $('.describe').fadeIn('slow');
            return false
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:52:36.530

```
 $('a[id^=toggle-]').click(function() {
    $('.' + this.id ).toggle('slow').css('display','inline-block').siblings().hide('slow');
    $('.describe').fadeIn('slow');
    return false;
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:47:36.360

试试这个：

```
$('a').click(function() {
     $('.'+this.id).toggle('slow').css('display','inline-block').siblings().hide('slow');
     $('.describe').fadeIn('slow');
            return false
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T05:48:54.767

```
$('a').click(function() {
    var cls = '.'+$(this).attr('id');
        $(cls).toggle('slow').css('display','inline-block').siblings().hide('slow');
        $('.describe').fadeIn('slow');
        return false
        });​ 
```

# php - 简单的 XML 对象导航问题

> ID：13302719
> 
> 赞同：0
> 
> 时间：2012-11-09T05:42:57.700
> 
> 标签：php, xml

我有一个像这样的 xml obj：

```
SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [id] => survey1_question01
            [num] => 01
            [text] => 1\. What times will I take my 2 pills of Incivek (telaprevir) each day?
        )

    [response] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [dose1] => 08:00 AM
                    [dose2] => 12:02 PM
                    [dose3] => 08:00 PM
                )

        ) 
```

我如何导航到 [文本] 和 [响应] ？问题是 $xmlTxt->results->question[1]->@attributes 不起作用。可能是@符号是我如何绕过这个的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:47:23.650

如果您想使用特殊字符访问对象属性，请使用`{}`例如

```
$xmlTxt->results->question[1]->{'@attributes'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:08:39.037

使用[attributes()](http://php.net/manual/en/simplexmlelement.attributes.php)访问 xml 属性

`echo $xmlTxt->results->question[1]->attributes()->text;`

# android - 如何从 mySQL 获取我的目的地纬度和经度以编辑目的地中的文本以用于 android 中的地图应用程序

> ID：13302721
> 
> 赞同：0
> 
> 时间：2012-11-09T05:43:23.280
> 
> 标签：android, maps

> **可能重复：**
> [如何获取存储在 mySQL 中的纬度和经度位置并在 android 地图应用程序中使用它。](https://stackoverflow.com/questions/13303045/how-to-get-latitude-and-longitude-position-that-stored-in-mysql-and-use-it-in-an)

我试图从 mySQL 数据库获取可能的纬度和经度到 android 以将它们用于地图应用程序。我使用这个来源：

```
Button shareit = (Button) findViewById (R.id.btnDir);
        shareit.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0) {
            Intent z = getIntent();
            String des_lat = z.getStringExtra("des_lat");
            String des_long = z.getStringExtra("des_long");
            Intent i = new Intent(android.content.Intent.ACTION_VIEW, Uri 
                    .parse (String.format("http://maps.google.com/maps?daddr="+des_lat+","+des_long)));
                    //("geo:37.827500,-122.481670"));
            startActivity(i);
            }
        }
        ); 
```

但我的应用程序的结果是刚刚填写的地图应用程序中的编辑文本`null,null`

怎么做`des_latitude,des_longitude`

请帮帮我...！

# spring - Spring 测试类中的 NullPointerException

> ID：13302723
> 
> 赞同：1
> 
> 时间：2012-11-09T05:43:27.700
> 
> 标签：spring, junit, annotations

我在测试 Spring Junit 测试配置时收到 NullPointerException。问题在于使用 @ContextConfiguration 和 @Autowired 注释。

当我实例化上下文并直接获取对 bean 的引用时，如测试方法中注释掉的代码所示，测试运行正确并成功。但是，当我尝试使用具有相同 XML 文件属性的 @ContextConfiguration 和 @autowired 注释时，我的 assertEquals 语句中出现 NullPointerException。你知道我做错了什么吗？

```
package com.greathouse.helloworld.HelloWorldTest;

import javax.inject.Inject;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import junit.framework.TestCase;

@ContextConfiguration(locations = {"classpath:/resources/application-config.xml"})
@RunWith(SpringJUnit4ClassRunner.class)
public class AppTest extends TestCase
{
    @Autowired
    MessageService messageService;

    @Test
    public void testApp()
    {
        //ApplicationContext context = new ClassPathXmlApplicationContext("classpath:/resources/application-config.xml");
        //messageService = context.getBean("printMessage", MessageService.class);
        assertEquals( messageService.getMessage(), "Hello World" );
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T14:50:58.943

看起来 messageService 没有自动装配。如果您根据需要放置 messageService 会有所帮助。

```
@Autowired( required = true ) 
```

这样当 spring 上下文启动时 spring 会告诉你为什么它没有自动装配你的组件。另外作为旁注，由于您使用的是 JUnit 4，因此您的测试不需要从 TestCase 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:46:34.337

您的字段 messageService 未初始化 - 您应该再次取消注释 context.getBean-line。

# c# - C# - 我们可以为每个堆叠的堆叠条形图设置不同的颜色吗

> ID：13302725
> 
> 赞同：0
> 
> 时间：2012-11-09T05:43:34.573
> 
> 标签：c#, asp.net, asp.net-mvc-3, stackedbarseries

我们可以为单个堆叠的条形图设置不同的颜色或更改堆叠条形图条中的颜色顺序吗？

![在此处输入图像描述](../Images/ee4a5cb838ecd65dc609f3f27bcad90b.png)

[与此处](https://stackoverflow.com/questions/11273196/stacked-bar-chart-with-differently-ordered-colors-using-matplotlib)python 中提供的此解决方案相同

任何帮助都会非常非常有帮助。非常感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:09:54.627

是的你可以。

我假设你有 4 个系列，这些系列是 A、B、C 和 D。

根据您可以使用的数据 1、2、3、4 来更改颜色，比如说 A；

```
Series sr = new Series();
sr.Name = "A";
sr.Points.DataBindXY(xValues, yValues);
sr.ChartType = SeriesChartType.StackedBar;
sr.Font = new System.Drawing.Font("Tahoma", 8, System.Drawing.FontStyle.Bold);

for (int i = 0 ; i < xValues.Lenght; i++) //xValues.Lenght = 4 in this case where you have 4 Data number
{ 
    if(i == 0) // Don't forget xValues[0] is Data4 in your case
        sr.Points[i].Color = Dr.Color.Black;
    else
        sr.Points[i].Color = Dr.Color.Yellow;
} 
```

这将给出这样的东西；![输出示例](../Images/f0a8281a0341b90faec7e42008ca731b.png)

# java - 来自 Getter Setter 的 JSF EL 字段引用如何工作？

> ID：13302732
> 
> 赞同：0
> 
> 时间：2012-11-09T05:44:24.670
> 
> 标签：java, oop

我想为我自己的项目复制它，而不是为 xhtml 或其他 xml 结构化文件。我想在 java 文件中复制这种功能。可能吗？

```
#{Object.field} 
```

示例类

```
class Object
{
   public String getField()
   {
      return "field";
   }

   public void setField()
   {
   }
} 
```

它以某种方式将 getter 和 setter 的后缀转换为像实际的字段引用一样工作。但我希望开发人员只能放置实际字段。因此，当他们没有输入实际字段的名称（这是 getter 和 setter 函数的后缀）时，它会在编译时显示错误。

我真的不想使用 EL 表达式。“#{Object.field}”。我只是想复制系统以使开发人员不必使用循环、getter 和 setter 来制作表格。如果可能的话，我希望他们能够像这样编写代码

```
createTable(new Field[]{Object.field1, Object.field4, Object.field6}, new Object[]{object1, object2, object3});
//new Field[]{Object.field1, Object.field4} <-- selected fields
//new Object[]{object1, object2, object3} <-- objects that is going to be shown in the table 
```

我发现可以通过使用 java 反射来做到这一点。但是要获得一个特定的“领域”有很多麻烦。如果我可以像“Object.fieldName”一样简单地获取“Field”，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:07:22.127

这些表达式是字符串，只能在运行时计算。字段名称以 get/set 为前缀以形成方法名称，然后使用反射 API 在对象上调用该方法名称。

我认为，如果有可能在编译时强制执行类似的操作，那么他们肯定会这样做。

`Object.field1`这是无效的，除非你在那个类中有一个像这样的公共字段。它必须是一个字符串`"Object.field1"`。而且您无法在编译时真正检查该字符串的内容。

因此，不可能在编译时强制执行。你能做的最好的就是抛出一个运行时异常。

我认为您不需要构建像 EL-API 那样复杂的系统。只需学习[反射 API](http://docs.oracle.com/javase/tutorial/reflect/TOC.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:26:25.257

我认为您需要的是 EL Resolver。您需要从 javax 实现 ELResolver，只要您有任何 EL 字符串，只需使用您自己的 EL Resolver 解析它。

下面是示例代码。它不会按原样工作，所以尝试删除不必要的东西，如函数映射器、变量映射器等，然后运行它。

Maven 依赖

```
 <dependency>
        <groupId>javax.el</groupId>
        <artifactId>el-api</artifactId>
        <version>2.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>jasper-el</artifactId>
        <version>6.0.18</version>
    </dependency> 
```

自定义 EL 解析器

```
package ravi.tutorial.el;

import java.beans.FeatureDescriptor;
import java.util.Iterator;
import java.util.Map;

import javax.el.ELContext;
import javax.el.ELResolver;
import javax.el.MapELResolver;

public class DemoELResolver extends ELResolver {

    private ELResolver delegate = new MapELResolver();
    private Map<Object, Object> userMap;

    public DemoELResolver(Map<Object, Object> userMap) {
        this.userMap = userMap;
    }

    @Override
    public Object getValue(ELContext context, Object base, Object property) {
        if (base == null) {
            base = userMap;
        }
        return delegate.getValue(context, base, property);
    }

    @Override
    public Class<?> getCommonPropertyType(ELContext context, Object base) {
        if (base == null) {
            base = userMap;
        }
        return delegate.getCommonPropertyType(context, base);
    }

    @Override
    public Iterator<FeatureDescriptor> getFeatureDescriptors(ELContext context,
            Object base) {
        if (base == null) {
            base = userMap;
        }
        return delegate.getFeatureDescriptors(context, base);
    }

    @Override
    public Class<?> getType(ELContext context, Object base, Object property) {
        if (base == null) {
            base = userMap;
        }
        return delegate.getType(context, base, property);
    }

    @Override
    public boolean isReadOnly(ELContext context, Object base, Object property) {
        if (base == null) {
            base = userMap;
        }
        return delegate.isReadOnly(context, base, property);
    }

    @Override
    public void setValue(ELContext context, Object base, Object property,
            Object value) {
        if (base == null) {
            base = userMap;
        }
        delegate.setValue(context, base, property, value);
    }

} 
```

使用 ELResolver

```
 ExpressionFactory expressionFactory;

    if (args == null || args.length == 0) {
        System.out
                .println("Enter command line argument  1=Apache Jasper   2=Sourceforge JUEL.");
        return;
    }

    if (args[0].equals("1")) {
        expressionFactory = new org.apache.el.ExpressionFactoryImpl();
        System.out.println("Choosing org.apache.el.ExpressionFactoryImpl");
    } else if (args[0].equals("2")) {
        expressionFactory = new de.odysseus.el.ExpressionFactoryImpl();
        System.out.println("Choosing de.odysseus.el.ExpressionFactoryImpl");
    } else {
        System.out.println("Wrong argument");
        return;
    }

    // create a map with some variables in it
    Map<Object, Object> userMap = new HashMap<Object, Object>();
    userMap.put("x", new Integer(123));
    userMap.put("y", new Integer(456));

    // get the method for ${myprefix:hello(string)}
    Method sayHello = DemoEL.class.getMethod("sayHello",
            new Class[] { String.class });

    // create the context
    ELResolver demoELResolver = new DemoELResolver(userMap);
    final VariableMapper variableMapper = new DemoVariableMapper();
    final DemoFunctionMapper functionMapper = new DemoFunctionMapper();
    functionMapper.addFunction("myprefix", "hello", sayHello);
    final CompositeELResolver compositeELResolver = new CompositeELResolver();
    compositeELResolver.add(demoELResolver);
    compositeELResolver.add(new ArrayELResolver());
    compositeELResolver.add(new ListELResolver());
    compositeELResolver.add(new BeanELResolver());
    compositeELResolver.add(new MapELResolver());
    ELContext context = new ELContext() {
        @Override
        public ELResolver getELResolver() {
            return compositeELResolver;
        }

        @Override
        public FunctionMapper getFunctionMapper() {
            return functionMapper;
        }

        @Override
        public VariableMapper getVariableMapper() {
            return variableMapper;
        }
    };

    // create and resolve a value expression
    String sumExpr = "${x+y}";
    ValueExpression ve = expressionFactory.createValueExpression(context,
            sumExpr, Object.class);
    Object result = ve.getValue(context);
    System.out.println("Result=" + result);

    // call a function
    String fnExpr = "#{myprefix:hello('Dave')}";
    ValueExpression fn = expressionFactory.createValueExpression(context,
            fnExpr, Object.class);
    fn.getValue(context); 
```

参考： [http ://weblogs.java.net/blog/felipeal/archive/2008/10/adding_el_suppo.html](http://weblogs.java.net/blog/felipeal/archive/2008/10/adding_el_suppo.html)

# ios - 多个自定义单元格动态加载到单个表格视图中

> ID：13302734
> 
> 赞同：1
> 
> 时间：2012-11-09T05:44:30.193
> 
> 标签：ios, tableview, cell

我的一些代码有问题。我很肯定有一个非常简单的解决方案，我似乎看不到它！基本上，我使用单个 tableview 类来显示不同的数据（内容、项目、动作）。我没有 3 个不同的表格视图控制器，而是有一个可以跟踪哪个单元格被点击并显示相关数据。一切都很好！我正在使用带有单独 nib 文件的自定义单元格类，因此我需要正确实现一个 if 语句（或 switch 语句）来检查哪个单元格被点击（self.title），然后基于它创建自定义单元格。

显然我遇到的问题是范围，cell.imageView 不知道它引用的是什么，因为它在 if 语句中时超出了范围。

我试过使用

```
id cell; 
```

我得到同样的错误。我有什么方法可以做到这一点，所以每个“标题”都使用不同的自定义单元格？

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
        {

            static NSString *CellIdentifier = @"Cell";

            if (title == @"Content" || title == @"Favorite Content")
            {
                ContentCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

                if (cell == nil) {
                    NSArray *objects = [[NSBundle mainBundle] loadNibNamed:@"ContentCell" owner:self options:nil];

                    for (id currentObject in objects) {
                        if ([currentObject isKindOfClass:[UITableViewCell class]]) {
                            cell = (ContentCell *)currentObject;

                            break;
                        }
                    }
                }

            }
            else if (title == @"Items" || title == @"Favorite Items")
            {
                ItemCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

                if (cell == nil) {
                    NSArray *objects = [[NSBundle mainBundle] loadNibNamed:@"ItemCell" owner:self options:nil];

                    for (id currentObject in objects) {
                        if ([currentObject isKindOfClass:[UITableViewCell class]]) {
                            cell = (ItemCell *)currentObject;

                            break;
                        }
                    }
                }

            }
            else if (title == @"Moves" || title == @"Favorite Moves")
            {
                MoveCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

                if (cell == nil) {
                    NSArray *objects = [[NSBundle mainBundle] loadNibNamed:@"MoveCell" owner:self options:nil];

                    for (id currentObject in objects) {
                        if ([currentObject isKindOfClass:[UITableViewCell class]]) {
                            cell = (MoveCell *)currentObject;

                            break;
                        }
                    }
                }

            }

            cell.imageView.image = [UIImage imageNamed:[[self.theData objectAtIndex:indexPath.row] objectForKey:@"image"]];
            cell.contentName.text = [[self.theData objectAtIndex:indexPath.row] objectForKey:@"name"];

            return cell;

    } 
```

任何帮助都会很棒！我敢肯定，我盯着屏幕看的时间让我错过了一些简单的事情。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T06:14:28.717

`NSString *CellIdentifier;`每次使用新的自定义单元格时都必须更改值。您必须输入与输入相同的值

![在此处输入图像描述](../Images/828c24e2a5e71e4afed83ba61853be8e.png)

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

NSString *CellIdentifier;
UITableViewCell *cell;

if (title == @"Content" || title == @"Favorite Content")
{
    CellIdentifier = @"Cell";
    ContentCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray *objects = [[NSBundle mainBundle] loadNibNamed:@"ContentCell" owner:self options:nil];

        for (id currentObject in objects) {
            if ([currentObject isKindOfClass:[UITableViewCell class]]) {
                cell = (ContentCell *)currentObject;

                break;
            }
        }
    }

}
else if (title == @"Items" || title == @"Favorite Items")
{
    CellIdentifier = @"";
    ItemCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray *objects = [[NSBundle mainBundle] loadNibNamed:@"ItemCell" owner:self options:nil];

        for (id currentObject in objects) {
            if ([currentObject isKindOfClass:[UITableViewCell class]]) {
                cell = (ItemCell *)currentObject;

                break;
            }
        }
    }

}
else if (title == @"Moves" || title == @"Favorite Moves")
{
    CellIdentifier = @"";
    MoveCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray *objects = [[NSBundle mainBundle] loadNibNamed:@"MoveCell" owner:self options:nil];

        for (id currentObject in objects) {
            if ([currentObject isKindOfClass:[UITableViewCell class]]) {
                cell = (MoveCell *)currentObject;

                break;
            }
        }
    }

}

cell.imageView.image = [UIImage imageNamed:[[self.theData objectAtIndex:indexPath.row] objectForKey:@"image"]];
cell.contentName.text = [[self.theData objectAtIndex:indexPath.row] objectForKey:@"name"];

return cell; 
```

}

# android - 如何解决错误“无法启动活动组件信息”？

> ID：13302735
> 
> 赞同：0
> 
> 时间：2012-11-09T05:44:35.340
> 
> 标签：android, alarmmanager

我已经编写了一个特定时间报警电话的代码，并且警报将在该时间段后停止。我试过在模拟器中运行这段代码，一切运行顺利。但是当我在我的 HTC Desire HD (Android 2.3.5) 上尝试这个时，应用程序被强制关闭。谁能告诉我发生了什么？？？

```
public class RingerActivity extends Activity{
/** Called when the activity is first created. */
Button press;
boolean tone = true;
MediaPlayer mp;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mp = new MediaPlayer();
    mp = MediaPlayer.create(RingerActivity.this, R.raw.alarm);
    try {
        mp.prepare();

    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (Exception e) {
        Toast.makeText(this, e.getMessage() , Toast.LENGTH_SHORT).show();         }
    mp.start();

    Handler h = new Handler();
    Runnable stopPlaybackRun = new Runnable() {
        public void run(){
            mp.stop();
            mp.release();
        }    
    };
    h.postDelayed(stopPlaybackRun, 20 * 1000);

    AudioManager manager = (AudioManager)getSystemService(AUDIO_SERVICE);
    manager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
    int maxVolume = manager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
    manager.setStreamVolume(AudioManager.STREAM_MUSIC, maxVolume, 0);

}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event){

    if (keyCode == KeyEvent.KEYCODE_VOLUME_UP){
        Toast.makeText(this, "Volume Up", Toast.LENGTH_LONG).show();
        return true;
    }

    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN){
        Toast.makeText(this, "Volume Down", Toast.LENGTH_LONG).show();
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

日志猫

```
11-09 13:36:51.220: E/AndroidRuntime(2370): FATAL EXCEPTION: main
11-09 13:36:51.220: E/AndroidRuntime(2370): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.testing.ringer/com.testing.ringer.RingerActivity}: java.lang.NullPointerException
11-09 13:36:51.220: E/AndroidRuntime(2370):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1872)
11-09 13:36:51.220: E/AndroidRuntime(2370):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
11-09 13:36:51.220: E/AndroidRuntime(2370):     at android.app.ActivityThread.access$1500(ActivityThread.java:135)
11-09 13:36:51.220: E/AndroidRuntime(2370):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
11-09 13:36:51.220: E/AndroidRuntime(2370):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 13:36:51.220: E/AndroidRuntime(2370):     at android.os.Looper.loop(Looper.java:150)
11-09 13:36:51.220: E/AndroidRuntime(2370):     at android.app.ActivityThread.main(ActivityThread.java:4385)
11-09 13:36:51.220: E/AndroidRuntime(2370):     at java.lang.reflect.Method.invokeNative(Native Method)
11-09 13:36:51.220: E/AndroidRuntime(2370):     at java.lang.reflect.Method.invoke(Method.java:507)
11-09 13:36:51.220: E/AndroidRuntime(2370):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
11-09 13:36:51.220: E/AndroidRuntime(2370):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
11-09 13:36:51.220: E/AndroidRuntime(2370):     at dalvik.system.NativeStart.main(Native Method)
11-09 13:36:51.220: E/AndroidRuntime(2370): Caused by: java.lang.NullPointerException
11-09 13:36:51.220: E/AndroidRuntime(2370):     at com.testing.ringer.RingerActivity.onCreate(RingerActivity.java:35)
11-09 13:36:51.220: E/AndroidRuntime(2370):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
11-09 13:36:51.220: E/AndroidRuntime(2370):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
11-09 13:36:51.220: E/AndroidRuntime(2370):     ... 11 more 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.testing.ringer"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<uses-permission android:name="android.permission.RECORD_AUDIO"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".RingerActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:09:37.673

该问题是由于 onCreate 处的空指针异常引起的。有时音频服务不会返回 AudioManager。

更改代码：

```
AudioManager manager = (AudioManager)getSystemService(AUDIO_SERVICE);
manager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
int maxVolume = manager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
manager.setStreamVolume(AudioManager.STREAM_MUSIC, maxVolume, 0); 
```

如下 onCreate ：

```
AudioManager manager = (AudioManager)getSystemService(AUDIO_SERVICE);
if(manager!=null){
manager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
int maxVolume = manager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
manager.setStreamVolume(AudioManager.STREAM_MUSIC, maxVolume, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:01:23.437

尝试使用此代码，

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mp = MediaPlayer.create(RingerActivity.this, R.raw.alarm);
    // are you sure that res/raw/alarm is a valid media file?
    mp.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:03:36.660

您的活动中有一条`NullPointerException`在线 35。修理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-21T08:23:01.253

```
MediaPlayer mp = MediaPlayer.create(context, R.raw.alarm);
mp.prepare(); <- Error, delete this line in your code 
```

您无需调用方法“prepare();”、方法“create(,);” 为你做。:)

# ruby - ruby 中的 Datetime.civil 和 Datetime.new 有区别吗？

> ID：13302736
> 
> 赞同：7
> 
> 时间：2012-11-09T05:45:06.787
> 
> 标签：ruby

您好，我一直在互联网上搜索，发现 ruby​​ 方法有很多别名都在做同样的事情（我不知道为什么）所以我很困惑，Datetime.civil 和 Datetime.new 在 ruby​​ 中是否有区别?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T05:48:00.373

根据[文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-c-civil)，它们是相同的。还：

```
DateTime.method(:new) == DateTime.method(:civil)
=> true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:01:49.170

日历日期是日历年的特定日期，由其在该年的日历月内的序号标识。

在那些课程中，这就是所谓的“公民”。

请查看这个.. [http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html)

# c++ - 在 C++ 中使用静态类

> ID：13302739
> 
> 赞同：1
> 
> 时间：2012-11-09T05:45:36.220
> 
> 标签：c++

我的 C++ 项目中有一些数学方法（例如：点查找器、规范化等），它们可能可以用于项目中的不同类或不同位置。

我来自 C# 背景并且有困惑，如果在这种情况下，我应该制作一个包含所有这些方法的静态类并在程序中使用它们？或者我应该定义一个类并在我想要的任何地方通过类对象使用它？

在这种情况下什么是理想的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T05:49:36.793

如果方法之间没有关系，您应该将它们定义为类中的公共静态函数或专用命名空间中的常规函数​​。这两种方式都只会为您的方法定义一个范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T05:53:13.987

在 C++ 中，你可以定义一个类，在这个类中，你将这些方法定义为 public static，你可以在任何地方使用它。例如：

```
class Mathematical
{
 public:
   static void normalize();
} 
```

您可以将该功能用作：

```
Mathematical::normalize(). 
```

与C#中的静态类函数相同

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T12:39:32.183

使用命名空间。将一堆静态函数粘贴在一个类中，其唯一目的是将它们组合在一起是一种 Java hack，以弥补其命名空间的不足。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T05:54:07.027

好吧，我认为这取决于您的工作，所以如果您不指定更多内容，我无法给您具体的答案。

正如您所说，您可以在多个地方编写它，并且它会起作用，因此编译器会很高兴。现在我们需要取悦你——程序员。

所以问问自己“它应该在哪里？”。会想到的答案是有意义的。

关于数学运算：我认为他们应该有自己的带有静态方法的类（而不是静态类；请看下面的注释），除非它们仅用于一种类型。如果它们仅用于一种类型，则（通常）最好将其放在该类型中，即使作为非静态方法也是如此。

注意：C++ 不支持 C# 中的静态类（当然，除非您使用[托管 C++](http://en.wikipedia.org/wiki/C++/CLI)）

# c# - 编译像素着色器时出错

> ID：13302740
> 
> 赞同：1
> 
> 时间：2012-11-09T05:45:42.307
> 
> 标签：c#, windows-phone-8, sharpdx

我正在尝试编译要在 SharpDX 中使用的像素着色器 - 更具体地说，作为效果（应用于图像）。

我正在使用他们的 tkfxc 编译器编译它。

着色器代码是：

```
float4 test(float4 pos: SV_POSITION) : SV_TARGET{
return float4(1,0,0,1);
}

technique named{

    pass p0{

        PixelShader = compile ps_4_0_level_9_3 test();

    }

} 
```

当我尝试编译它时，我收到以下错误：![在此处输入图像描述](../Images/d426f1fb4a73dd65330635a079405a6f.png)

以前有人遇到过这个错误吗？我完全不知道如何解决它。

# php - 从另一个表中的名称更新字段

> ID：13302741
> 
> 赞同：0
> 
> 时间：2012-11-09T05:46:00.033
> 
> 标签：php, mysql

我有这两张表：

```
tbl_courses
id  user_id  course_name
3   5        First Course
4   5        Second Course

tbl_notes
id  user_id  course_id
1   5        3
2   5        4 
```

我正在尝试编写一个简单的合并脚本，该脚本正在接收更新的课程标题：`course_name`

例如，用户更改`First Course`为`Second Course`并已请求将具有此新标题的所有便笺合并到此中。

所以我试图找到一种方法来更新`tbl_notes`course_id中的所有条目`First Course`以匹配 id`Second Course`

我发送`$user_id`, `$course_id`, 和`$course_name`作为参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:01:38.487

如果我正确理解有查询您需要什么：

**[SQLFiddle示例](http://sqlfiddle.com/#!2/a14ae/1)**

```
 UPDATE `tbl_notes`
    LEFT JOIN `tbl_courses` 
      ON `tbl_courses`.`user_id`  =`tbl_notes`.`user_id`
        AND `tbl_courses`.id  = `tbl_notes`.`course_id`
    SET `tbl_notes`.`course_id` = 4
    WHERE `tbl_courses`.`course_name` ='First Course'
      AND `tbl_courses`.`user_id` = 5 
```

用PHP代码SQL查询：

```
$sql = "UPDATE `tbl_notes`
LEFT JOIN `tbl_courses` 
  ON `tbl_courses`.`user_id`  =`tbl_notes`.`user_id`
    AND `tbl_courses`.id  = `tbl_notes`.`course_id`
SET `tbl_notes`.`course_id` = $course_id
WHERE `tbl_courses`.`course_name` ='First Course'
AND `tbl_courses`.`user_id` =$user_id "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:49:51.413

```
update tbl_notes set course_id=(select id  
from tbl_courses where course_name='First Course' limit 1) 
```

# iphone - 在IOS中将从Web服务接收到的字节数组转换为PDF

> ID：13302748
> 
> 赞同：1
> 
> 时间：2012-11-09T05:46:19.247
> 
> 标签：iphone, ios, cocoa-touch, pdf, nsdata

我收到了来自 Web 服务调用的字节数组。我可以从中生成 PDF，但它显示错误“无法打开文件“abc.pdf”。它可能已损坏“。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T05:09:31.400

@NisithSeth：

我建议对您的字节进行 base64 编码，并将编码的 base64 字符串包含在您的 xml 中。然后，当您解析 xml 时，您可以对字符串进行 base64 解码以获取可用于创建 PDF 的 NSData。您可以使用 Google 找到多个关于如何在 obj-c 中进行 base64 编码/解码的代码片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:57:15.900

嗨，我认为您可以像下面这样将数据转换为 PDF，然后尝试打开它..

```
NSData *data               = yourData //some NSData
CFDataRef myPDFData        = (CFDataRef)data;
CGDataProviderRef provider = CGDataProviderCreateWithCFData(myPDFData);
CGPDFDocumentRef pdf       = CGPDFDocumentCreateWithProvider(provider); 
```

**更新**

有关 CGPDF 文档信息，请参阅[此链接](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGPDFDocument/Reference/reference.html#//apple_ref/doc/c_ref/CGPDFDocumentCreateWithURL)

# android - 如何将 Activity 转换为 FragmentActivity？

> ID：13302749
> 
> 赞同：0
> 
> 时间：2012-11-09T05:46:20.167
> 
> 标签：android, listview, android-activity, fragment, android-fragmentactivity

到目前为止，这是我尝试的。这是来自设置片段的活动。这是加载片段的方法。

```
@Override
public Fragment getItem(int i) {
      Fragment f = new Fragment();
      FragmentActivity fa = new FragmentActivity();

      switch(i){
      case 0:
         f=News.newInstance(_context);
      break;    
      case 1:
         f=Info.newInstance(_context);
      break;
      case 2:
         //f=Info.newInstance(_context);
         fa=Files.newInstance(_context);
      break;
      case 3:
         f=Donate.newInstance(_context);
      break;
} 
```

接下来我设置 Files 类，以便它可以通过我将 Activity 转换为`FragmentActivity`. 我不想使用 a `ListFragment`，因为我想制作一些按钮并`onclicklistener`为它们设置。

```
public class Files extends FragmentActivity {

      private ListView m_listview;

      @Override
      public void onCreate(Bundle savedInstanceState)
      {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.files);

        m_listview = (ListView) findViewById(R.id.id_list_view);

        String[] items = new String[] {"Item 1", "Item 2", "Item 3"};
        ArrayAdapter<String> adapter =
          new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, items);

        m_listview.setAdapter(adapter);
      }

    public static FragmentActivity newInstance(Context _context) {
         Files f = new Files();

            return f;
    }
} 
```

现在，当我运行应用程序时，没有错误，堆栈跟踪中没有任何内容，当我点击选项卡加载它`FragmentActivity`时，它只是空白。我尝试删除`listview`所有内容，然后将 a`textview`放入 XML 布局中，当我尝试它时甚至都没有出现。

# c# - 如何在 Java 中编写泛型方法

> ID：13302767
> 
> 赞同：1
> 
> 时间：2012-11-09T05:48:22.007
> 
> 标签：c#, java, generics

我是 Java 新手，我需要在 Java6 中编写一个通用方法。我的目的可以用下面的 C# 代码来表示。有人可以告诉我如何用 Java 编写它吗？

```
class Program
{
    static void Main(string[] args)
    {
        DataService svc = new DataService();
        IList<Deposit> list = svc.GetList<Deposit, DepositParam, DepositParamList>();
    }
}

class Deposit { ... }
class DepositParam { ... }
class DepositParamList { ... }

class DataService
{
    public IList<T> GetList<T, K, P>()
    {
        // build an xml string according to the given types, methods and properties
        string request = BuildRequestXml(typeof(T), typeof(K), typeof(P));

        // invoke the remote service and get the xml result
        string response = Invoke(request);

        // deserialize the xml to the object
        return Deserialize<T>(response);
    }

    ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T05:52:56.073

因为泛型是 Java 中仅编译时的特性，所以没有直接的等价物。 `typeof(T)`根本不存在。java 端口的一种选择是让方法看起来更像这样：

```
public <T, K, P> List<T> GetList(Class<T> arg1, Class<K> arg2, Class<P> arg3)
{
    // build an xml string according to the given types, methods and properties
    string request = BuildRequestXml(arg1, arg2, arg3);

    // invoke the remote service and get the xml result
    string response = Invoke(request);

    // deserialize the xml to the object
    return Deserialize<T>(response);
} 
```

这样，您需要调用者以使类型在运行时可用的方式编写代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T05:57:02.583

几个问题
- A. Java 中的泛型比 C# 中的“弱”。
没有"typeof，所以你必须传递代表typeof的类参数
。B。你的签名还必须在泛型定义中包含K和P。
所以代码看起来像：

```
public <T,K,P> IList<T> GetList(Class<T> clazzT, Class<K> claszzK,lass<P> clazzP) {
    String request = buildRequestXml(clazzT, clazzK, clazzP);
    String response = invoke(request);
    return Deserialize(repsonse);
} 
```

# python - 操作系统路径插入命令

> ID：13302770
> 
> 赞同：-1
> 
> 时间：2012-11-09T05:48:36.580
> 
> 标签：python

使用 PYTHONPATH 环境变量存在一些问题。因此，我必须在我的代码中找出一些其他选项来从另一个文件夹导入模块。我正在尝试基于“TEST_INSTALL_DIR”环境变量（值=C:\test）的sys.path，插入。

我想创建

```
path = os.getenv("TEST_INSTALL_DIR")#C:\test
path=  path.replace("\\", "/")
pypath= '%s/python/profile'%(path)#C:/test/python/profile
pypath= "\'%s\'" %(pypath)# 'C:/test/python/profile'
print "PYPATH:",pypath
sys.path.insert(0, pypath) 
```

如果将路径设置如下，一切正常。：

```
 sys.path.insert(0, 'C:/test/python/profile') 
```

我在我的代码中做错了什么吗？任何想法都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-07T17:32:31.220

我认为sberry的评论应该是正确的。只是为了确定您是否尝试过以下方法？

```
path = os.getenv("TEST_INSTALL_DIR")#C:\test
path = path.replace("\\", "/")
pypath = '%s/python/profile'%(path)#C:/test/python/profile
print "PYPATH:",pypath
sys.path.insert(0, pypath) 
```

# php - 两个登录用户之间的实时响应

> ID：13302772
> 
> 赞同：1
> 
> 时间：2012-11-09T05:48:41.507
> 
> 标签：php, javascript, mysql

我是 PHP/MySQL 的初学者，也是 javascript 的新手，我想制作一个页面，一个用户可以向另一个用户发送实时请求。例如，UserA 可以看到在线用户列表，并向 UserB（在线）发送请求，UserB 的页面会弹出警报，UserB 可以选择单击是或否。UserA 会收到一个弹出窗口，其中包含 B 的响应（或者如果超时则默认为否）

这通常是怎么做的？我想我的问题有两个部分：

1.  如何记录在线/离线用户？（我应该有一个记录登录/注销时间的表格吗？）
2.  通常如何在 2 个用户之间发送消息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T06:58:05.150

我不知道您要做什么，但我认为私人聊天是一个很好的例子？我会假装那是你正在做的。

我将尝试在适当的情况下提供大量信息，而不会将其变成完整的教程。期待大量的链接和阅读建议。

* * *

# 理念

您在应用程序的核心有一个基本概念，即**用户通信**。您需要以某种方式从 HTTP 的无状态、异步世界转到有状态、同步的世界。有几种方法可以做到这一点。

## 轮询

这是使用[AJAX](https://en.wikipedia.org/wiki/AJAX)向服务器重复请求信息。AJAX 代表*Asynchronous Javascript And XML*，不过不用担心 XML 位，这只是历史。基本上，AJAX 就像从浏览器中的脚本发出常规请求一样，这为您提供了无需刷新即可从服务器发送和接收数据的优势。这适用于用户启动或可以处理延迟的情况。对于您的情况，您将标记某人上次执行操作的时间，然后指定一些超时时间来决定某人何时离线。请求的结果包含自检查后可能到达的任何新消息。

## 长轮询/彗星

这是之前投票思想的延伸。对于基本 AJAX 的客户端启动性质，这几乎是一种明确的解决方法。Comet 本质上只是 AJAX，但您可以使连接保持打开更长的时间，从而允许服务器向下推送信息。您可以在此处找到有关此技术的信息：[Comet](http://ajaxpatterns.org/HTTP_Streaming)。但是，这种技术存在一些问题：

*   片状体验。不同的浏览器会以不同的方式处理长时间打开的连接，这使得为所有浏览器中的所有用户提供一致的体验成为一项挑战。
*   断开连接。最终*会*出现脱节。最终浏览器调用`.abort()`请求，你必须重新打开它。
*   单连接限制。HTTP/1.1 标准规定浏览器在每台服务器上一次只能同时打开一个连接。您可以通过使用多个（子）域来解决此问题。

您必须使用与以前基本相同的技术，因为您仍然有属于正常使用的一部分的断开连接。不同之处在于服务器必须在必要时保持连接打开。根据您在后端使用的技术，这可能是微不足道的，也可能是困难的，如果不小心处理，可能会造成巨大的性能成本。

## 网络套接字

[WebSockets](https://en.wikipedia.org/wiki/WebSocket)本质上是以前的解决方案，但已标准化并正确实施。WebSockets 的本质是你可以定期向服务器发出请求，但要求升级为 TCP 连接。*这里的升级*这个词有点误导，因为从技术上讲，它只是从连接中删除 HTTP 内容，并为您留下原始的底层连接。

WebSockets 是为持久连接而设计的，并且是全双工的（双向通信）。

然而，有两个主要缺点：它们是新的，这意味着支持不是那么广泛，大多数现代浏览器都支持它们，但你不能依赖每个人都拥有最新的浏览器。需要服务器端支持。这意味着您必须拥有一个能够升级请求并有效处理它们的系统，因为这是一项新技术，支持有限，[socket.io](http://socket.io)是主要技术。socket.io 是一个 node.js 模块，因此可能不适合您。其他语言/技术也在那里，但可用的支持明显较少。

（编辑：重读你的问题，发现你正在使用 PHP，你可以使用这个库：[php-websocket](https://github.com/nicokaiser/php-websocket) for websockets。我已经测试过了，所以请注意）

使用 WebSockets，您可以将连接断开用作离线信号，您只需根据需要发送数据。但是，如果 WebSockets 不可用，则回退到更旧、更可靠的解决方案是明智的，因此请记住这一点。

* * *

您需要解决所有这些解决方案周围的许多问题，但希望这能让您对从何处以及如何开始有所了解。至少它提供了一些你可以用谷歌搜索的短语（或 bing 或 dadduckgo 或询问）！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T05:50:46.197

您可以让每个用户“轮询”（例如 ajax 调用）服务器查看是否有新消息。但我会查看[socket.io](http://socket.io/)或类似的框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T05:56:07.693

1，当某人已经登录时，您将能够知道，您将在从数据库中读取用户名/密码或密码密钥后进行登录验证，因此一旦用户登录，您就可以在数据库中标记它以及服务器中的会话处理

2，为此有两种方法，最先进的是使用网络套接字，这样就不需要轮询，另一种方法是等待ajax/Comet等

我的解释就像从直升机上看你的要求..当你开始阅读上面提到的东西时，会有更多的细节出现......

希望这能回答您的问题谢谢

# python - 使用 pyplot 正确显示 bin

> ID：13302780
> 
> 赞同：0
> 
> 时间：2012-11-09T05:49:19.513
> 
> 标签：python, matplotlib, histogram

可能是一个简单修复的简单问题，但我对分箱的实际工作方式感到困惑。我想绘制一个相当简单的直方图。x 轴应该只有两个值，0 和 1，y 轴的浮点数介于 0 和 1.0 之间，表示每个值的频率。0 和 1 都是数组中唯一的值，但是当我显示直方图时，这些 bin 似乎没有与 0 和 1 对齐，并且 x 轴上有几个不需要的刻度线。如何制作此图，以便在 x 轴（0 和 1）上仅显示两个刻度，并且每个值的相应频率列正确显示在刻度上方？

这是我的代码：

```
trials = []
for i in range (m):
    trials.append(bernoulli_trial(p))
plt.figure(1)
plt.hist(trials, bins=2, align="mid", weights=np.zeros_like(trials) + 1\. / len(trials))
plt.ylim(0,1.0)
plt.title("Bernoulli Distribution with p = " + str(p))
plt.xlabel("Outcome")
plt.ylabel("Probability")    
plt.show() 
```

谁能提供任何关于我在这里做错了什么的见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:42:38.720

```
plt.figure(1)
plt.hist(trials, bins=2, align="mid",
         weights=np.zeros_like(trials) + 1\. / len(trials))

# ------------------------------
# New lines to add tick marks as requested
tick_locs = [0.25, 0.75]
tick_lbls = ['0','1']
plt.xticks(tick_locs, tick_lbls)
# ------------------------------

plt.ylim(0,1.0)
plt.title("Bernoulli Distribution with p = " + str(p))
plt.xlabel("Outcome")
plt.ylabel("Probability")    
plt.show() 
```

# c# - 通过使用变量引用表单对象来优化 C# 代码

> ID：13302793
> 
> 赞同：2
> 
> 时间：2012-11-09T05:50:24.233
> 
> 标签：c#

我希望能够重置为“0”的表单上有几个标签。我通过引用每个标签来解决它。我还使用了数组和 for 循环，这似乎更有效率。有没有办法通过使用 for 变量并构造一个字符串来引用每个标签名称，而不用数组来评估标签名称？

像这样：

```
 for (int x = 0; x < 6; x++)
            lbls[x].Text = "0"; 
```

这是我的代码：

```
 // Clear form labels
    private void btnClear_Click(object sender, EventArgs e)
    {
        Label[] lbls = new Label[]
        {
            lbl1, lbl2,lbl3,lbl4,lbl5,lbl6
        };

        for (int x = 0; x < 6; x++)
            lbls[x].Text = "0";

        //lbl1.Text = "0";
        //lbl2.Text = "0";
        //lbl3.Text = "0";
        //lbl4.Text = "0";
        //lbl5.Text = "0";
        //lbl6.Text = "0";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:58:30.467

如果您没有其他标签：

```
this.Controls.OfType<Label>() 
```

将为您提供`IEnumerable`表单上的所有标签，然后您可以使用 Simons 代码：

```
this.Controls.OfType<Label>().ToList<Label>().ForEach(l => l.Text = "0"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:58:47.483

这将更加昂贵，因为您需要使用反射按名称查找对象并将其文本属性设置为“0”。

如果您想要更小的东西，这里有一个适合您的衬垫：

```
new List<Label>() { lbl1, lbl2, lbl3, lbl4, lbl5, lbl6 }.ForEach(x => x.Text = "0"); 
```

..有点恶心虽然:)

# javascript - 类型错误：this.canvas 未定义

> ID：13302796
> 
> 赞同：4
> 
> 时间：2012-11-09T05:50:28.393
> 
> 标签：javascript, html5-canvas

我正在尝试用 javascript 手动编写一个飞镖演示。我收到一个奇怪的`TypeError: this.canvas is undefined`错误，该错误源于使用 firebug 的类中的`draw`函数和 chrome 中的类似错误。`SolarSystem`我无法弄清楚为什么会这样。

这是我在 JS Bin 中的代码的链接，因此您可以使用它。 [http://jsbin.com/udujep/1/edit](http://jsbin.com/udujep/1/edit)

为了后代，这里是完整的 javascript 代码：

```
var main, fpsAverage, showFps, Point, SolarSystem, PlanetaryBody;
main = function(){
  var solarSystem;
  solarSystem = new SolarSystem(document.getElementById('container'));
  solarSystem.start();
};
showFps = function(fps){
  if (fpsAverage != null) {
    fpsAverage = fps;
  }
  fpsAverage = fps * 0.05 + fpsAverage * 0.95;
  document.getElementById('notes').textContent = Math.round(fpsAverage) + ' fps';
};
Point = (function(){
  Point.displayName = 'Point';
  var prototype = Point.prototype, constructor = Point;
  function Point(x, y){
    var ref$;
    ref$ = [x, y], this.x = ref$[0], this.y = ref$[1];
  }
  return Point;
}());
SolarSystem = (function(){
  SolarSystem.displayName = 'SolarSystem';
  var prototype = SolarSystem.prototype, constructor = SolarSystem;
  prototype.canvas = null;
  prototype.renderTime = null;
  function SolarSystem(canvas){
    this.canvas = canvas;
  }
  prototype.start = function(){
    this.width = this.canvas.parentNode.clientWidth;
    this.height = this.canvas.parentNode.clientWidth;
    this.canvas.width = this.width;
    this._start();
  };
  prototype._start = function(){
    var earth, f, h, g, jupiter;
    this.sun = new PlanetaryBody(this, 'Sun', '#ff2', 14.0);
    this.sun.addPlanet(new PlanetaryBody(this, 'Mercury', 'orange', 0.382, 0.387, 0.241));
    this.sun.addPlanet(new PlanetaryBody(this, 'Venus', 'green', 0.949, 0.723, 0.615));
    earth = new PlanetaryBody(this, 'Earth', '#33f', 1.0, 1.0, 1.0);
    this.sun.addPlanet(earth);
    earth.addPlanet(new PlanetaryBody(this, 'Moon', 'gray', 0.2, 0.14, 0.075));
    this.sun.addPlanet(new PlanetaryBody(this, 'Mars', 'red', 0.532, 1.524, 1.88));
    this.addAsteroidBelt(this.sun, 150);
    f = 0.1;
    h = 1 / 1500.0;
    g = 1 / 72.0;
    jupiter = new PlanetaryBody(this, 'Jupiter', 'gray', 4.0, 5.203, 11.86);
    this.sun.addPlanet(jupiter);
    jupiter.addPlanet(new PlanetaryBody(this, 'Io', 'gray', 3.6 * f, 421 * h, 1.769 * g));
    jupiter.addPlanet(new PlanetaryBody(this, 'Europa', 'gray', 3.1 * f, 671 * h, 3.551 * g));
    jupiter.addPlanet(new PlanetaryBody(this, 'Ganymede', 'gray', 5.3 * f, 1070 * h, 7.154 * g));
    jupiter.addPlanet(new PlanetaryBody(this, 'Callisto', 'gray', 4.8 * f, 1882 * h, 16.689 * g));
    this.requestRedraw();
  };
  prototype.draw = function(){
    var time, context;
    time = Date.now();
    if (this.renderTime != null) {
      showFps(Math.round(1000 / (time - this.renderTime)));
    }
    this.renderTime = time;
    context = this.canvas.getContext('2d');
    this.drawBackground(context);
    this.drawPlanets(context);
    this.requestRedraw();
  };
  prototype.drawBackground = function(context){
    var x$;
    x$ = context;
    x$.fillStyle = 'white';
    x$.rect(0, 0, this.width, this.height);
    x$.fill();
  };
  prototype.drawPlanets = function(context){
    this.sun.draw(context, this.width / 2, this.height / 2);
  };
  prototype.requestRedraw = function(){
    window.requestAnimationFrame(this.draw);
  };
  prototype.addAsteroidBelt = function(body, count){
    var i$, radius;
    for (i$ = 0; i$ < count; ++i$) {
      radius = 2.06 + Math.random() * (3.27 - 2.06);
      body.addPlanet(new PlanetaryBody(this, 'asteroid', '#777', 0.1 * Math.random(), radius, radius * 2));
    }
  };
  prototype.normalizeOrbitRadius = function(r){
    return r * (this.width / 10.0);
  };
  prototype.normalizePlanetSize = function(r){
    return Math.log(r + 1) * (this.width / 100.0);
  };
  return SolarSystem;
}());
PlanetaryBody = (function(){
  PlanetaryBody.displayName = 'PlanetaryBody';
  var prototype = PlanetaryBody.prototype, constructor = PlanetaryBody;
  prototype.planets = [];
  function PlanetaryBody(solarSystem, name, color, bodySize, orbitRadius, orbitPeriod){
    orbitRadius == null && (orbitRadius = 0.0);
    orbitPeriod == null && (orbitPeriod = 0.0);
    this.solarSystem = solarSystem;
    this.name = name;
    this.color = color;
    this.orbitPeriod = orbitPeriod;
    this.bodySize = solarSystem.normalizePlanetSize(bodySize);
    this.orbitRadius = solarSystem.normalizeOrbitRadius(orbitRadius);
    this.orbitSpeed = prototype._calculateSpeed(orbitPeriod);
  }
  prototype.addPlanet = function(planet){
    this.planets.push(planet);
  };
  prototype.draw = function(context, x, y){
    var pos;
    pos = this._calculatePos(x, y);
    this.drawSelf(context, pos.x, pos.y);
    this.drawChildren(context, pos.x, pos.y);
  };
  prototype.drawSelf = function(context, x, y){
    var x$;
    x$ = context;
    x$.save();
    try {
      x$.lineWidth = 0.5;
      x$.fillStyle = this.color;
      x$.strokeStyle = this.color;
      if (this.bodySize >= 2.0) {
        x$.shadowOffsetX = 2;
        x$.shadowOffsetY = 2;
        x$.shadowBlur = 2;
        x$.shadowColor = '#ddd';
      }
      x$.beginPath();
      x$.arc(x, y, this.bodySize, 0, Math.PI * 2, false);
      x$.fill();
      x$.closePath();
      x$.stroke();
      x$.shadowOffsetX = 0;
      x$.shadowOffsetY = 0;
      x$.shadowBlur = 0;
      x$.beginPath();
      x$.arc(x, y, this.bodySize, 0, Math.PI * 2, false);
      x$.fill();
      x$.closePath();
      x$.stroke();
    } finally {
      x$.restore();
    }
  };
  prototype.drawChildren = function(context, x, y){
    var i$, ref$, len$, planet;
    for (i$ = 0, len$ = (ref$ = this.planets).length; i$ < len$; ++i$) {
      planet = ref$[i$];
      planet.draw(context, x, y);
    }
  };
  prototype._calculateSpeed = function(period){
    if (period === 0.0) {
      return 0.0;
    } else {
      return 1 / (60.0 * 24.0 * 2 * period);
    }
  };
  prototype._calculatePos = function(x, y){
    var angle;
    if (this.orbitSpeed === 0.0) {
      return new Point(x, y);
    } else {
      angle = this.solarSystem.renderTime * this.orbitSpeed;
      return new Point(this.orbitRadius * Math.cos(angle) + x, this.orbitRadius * Math.sin(angle) + y);
    }
  };
  return PlanetaryBody;
}());
window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
window.onload = main; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:17:38.267

问题是这里的这条线。

```
window.requestAnimationFrame(this.draw); 
```

发生的事情是，当您将原始`draw`方法传递给`requestAnimationFrame`您时，您会丢失`SolarSystem`. 例如，如果您尝试这样做，`draw`它将返回 true。

```
alert(this === window) 
```

解决方案很简单，通过使用闭包来更改上下文。

```
prototype.requestRedraw = function(){
    var self = this;
    window.requestAnimationFrame(function () {self.draw()});
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-16T20:41:57.763

# 如果你使用 ES6

如果您使用的是 ES6，则可以使用箭头函数，它会保持您`this`的范围。

```
window.requestAnimationFrame(() => this.draw()); 
```

或者如果您使用 setInterval

```
setInterval(() => app.draw(), 10); 
```

# amazon-s3 - 如何通过 YouTube API 从 Amazon S3 url 上传视频？

> ID：13302804
> 
> 赞同：2
> 
> 时间：2012-11-09T05:51:06.293
> 
> 标签：amazon-s3, youtube-api

我有一个 S3 Amazon 帐户，目前我在我的网站上上传的所有视频都到那里。

我添加了功能，以便用户也可以选择在 YouTube 上分享他们的视频。为此，我正在使用不支持视频 URL 的 YouTube API。我想知道我们是否可以以某种方式提供直接的 s3 链接，以便将视频上传到 YouTube。

这是流程：-

选定的视频 -> 从 encoding.com 转换为 mp4 格式 -> 协调的视频上传到 s3 amazon。

注意：我尝试将我的视频从 s3 下载到 tmp 文件夹，然后上传，这工作正常，但由于我们使用的是负载平衡服务器，因此无法使用它。

需要尽快解决。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:40:30.303

您可以在 Encoding.com 作业中将 Youtube 指定为目的地，他们已经构建了与 YouTube API 的集成。有关 API 语法，请参阅[http://www.encoding.com/syndicate_your_videos_to_youtube](http://www.encoding.com/syndicate_your_videos_to_youtube)。它可以包含完整的元数据。请注意，您必须使用 Google 的 2 步身份验证过程来创建与 Encoding.com API 一起使用的密码

# php - 使用 lightopenid 和信息注册用户一次，然后使用数据库信息登录

> ID：13302808
> 
> 赞同：0
> 
> 时间：2012-11-09T05:51:32.060
> 
> 标签：php, lightopenid

我已经实现了一个使用 lightopenid 的 Google 开放 ID 登录注册系统，它运行良好，我想添加一个功能，要求用户只注册一次以允许访问他们的信息，然后我将该信息存储在数据库中以供登录后记.

一旦我得到他们的信息（身份、姓名、电子邮件），我将它们存储在数据库中，以便通过相同的过程将它们记录在后记中，除了跳过用户一次又一次地授予对他们信息的访问权限。

即当用户注册并授予访问该信息的权限时，下次用户不必每次登录都授予访问权限。

为了实现它，我在尝试登录时检查他们在数据库中的身份，如果存在身份，则登录他们而不在 lightopenid 中询问信息，如果身份不是他们，请他们一次将他们的信息存储在数据库中以供以后登录使用。

我可以在数据库中检查他们的身份，但如果身份不是他们的身份，则卡在该部分，然后如何询问他们的信息，因为我没有在登录时请求 lightopenid 中的信息。

**存储信息一次的代码。（注册）**

```
 $openid = new LightOpenID('localhost');
    if(!$openid->mode) {
    if(isset($_GET['login'])) {
        $openid->identity = 'https://www.google.com/accounts/o8/id';
        $openid->required = array('namePerson/first', 'namePerson/last', 'contact/email');
        header('Location: ' . $openid->authUrl());
    }
} 
if($openid->validate()) {
    require_once('../connect.php');
    $identity = $openid -> identity;
    $info = $openid->getAttributes();
    $username = $info['namePerson/first'].'.'.$info['namePerson/last'];
    $open_id = explode('=', $identity);
    $identity_hash = $open_id[1];
    $email = $info['contact/email'];

    $query = "INSERT INTO user_login (username, identity_hash, email) VALUES ('$username', '$identity_hash', '$email')"; 
    $create_user = mysqli_query($connection, $query) or trigger_error(mysqli_error($connection), E_USER_ERROR);
} 
```

**检查身份的代码。（登录）**

```
 if(!$openid->mode) {
    if(isset($_GET['login'])) {
        $openid->identity = 'https://www.google.com/accounts/o8/id';
        header('Location: ' . $openid->authUrl());
    }
} 
if($openid->validate()) {
    require_once('../connect.php');
    $identity = $openid -> identity;
    $open_id = explode('=', $identity);
    $identity_hash = $open_id[1];
    $query = "SELECT * FROM user_login WHERE identity_hash='$identity_hash'";
    $result = mysqli_query($ulconnection, $query) or trigger_error(mysqli_connect_error(), E_USER_ERROR);

    if($result){
    $row = mysqli_fetch_assoc($result);
    $username = $row['username'];
    $email = $row['email'];
    echo $username.'<br />';
    echo $email.'<br />';
    }
    else{
    // how to ask for info here.
    }
} 
```

请查看并建议任何可能的方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:32:27.633

我让它以这种方式工作。

```
 if($result){
    $row = mysqli_fetch_assoc($result);
    $username = $row['username'];
    $email = $row['email'];
    echo $username.'<br />';
    echo $email.'<br />';
    }
    else{
    header("Location: signup.php?login");   
    } 
```

希望这对其他人也有帮助。

# php - 通过 jQuery 使用 PHP 中的新幻灯片重新初始化幻灯片

> ID：13302809
> 
> 赞同：0
> 
> 时间：2012-11-09T05:51:48.523
> 
> 标签：php, jquery, jquery-cycle

我正在使用出色的 Cycle2 插件在我的网站上运行幻灯片，请参见此处： http: [//new.element17.com](http://new.element17.com)。

幻灯片在为 Cycle2 指定的 div 中生成，如下所示：

```
<?php
    if(isset($_COOKIE["currentalbum"])) {
        $currentalbum = $_COOKIE["currentalbum"];
    } else {
        $currentalbum = "gallery/01_New";
    }
    $photos = glob($currentalbum.'/*.[Jj][Pp][Gg]');
    $albumparts = explode('_', $currentalbum);
    switch (array_key_exists(2,$albumparts)) {
        case false:
            usort($photos,"cmpexiftime");
            break;
        case true:
            usort($photos,"cmpexiftimer");
            break;
    }
    foreach($photos as $photo){
        $title = basename($photo,".jpg");
        $exif = read_exif_data_raw("$photo",0);
        $desc = $exif["IFD0"]["ImageDescription"];
        $camera = ucwords(strtolower($exif["IFD0"]["Model"]));
        switch($exif["SubIFD"]["LensInfo"]) {
            case "105.0 mm f/2.8":
                $lens = "Micro-Nikkor 105mm f/2.8 VR";
                break;
            case "50.0 mm f/1.8":
                $lens = "Nikkor 50mm f/1.8D";
                break;
            case "17.0-50.0 mm f/2.8":
                $lens = "Tamron 17-50mm f/2.8 VC";
                break;
            case "70.0-300.0 mm f/4.5-5.6":
                $lens = "Nikkor 70-300mm f/4.5-5.6 VR";
                break;
            default:
                $lens = $exif["SubIFD"]["LensInfo"];
                break;
        }
        $length = str_replace(" ","",$exif["SubIFD"]["FocalLength"]);
        $shutter = str_replace(" ","",str_replace("ec","",$exif["SubIFD"]["ShutterSpeedValue"]));
        $aperture = $exif["SubIFD"]["ApertureValue"];
        $iso = $exif["SubIFD"]["ISOSpeedRatings"];
        list($width,$height) = getimagesize($photo);
        if ($height >= $width) {                            
            $photolist .= '<span data-title="'.$title.'" data-desc="'.$desc.'" data-camera="'.$camera.'" data-lens="'.$lens.'" data-length="'.$length.'" data-shutter="'.$shutter.'" data-aperture="'.$aperture.'" data-iso="'.$iso.'" style="background-image:url('.$photo.'); background-size:contain;" class="slide"></span>';
        } else {
            $photolist .= '<span data-title="'.$title.'" data-desc="'.$desc.'" data-camera="'.$camera.'" data-lens="'.$lens.'" data-length="'.$length.'" data-shutter="'.$shutter.'" data-aperture="'.$aperture.'" data-iso="'.$iso.'" style="background-image:url('.$photo.'); background-size:cover;" class="slide"></span>';
        }
    }
?> 
```

幻灯片的 div 设置如下：

```
<div class="cycle-slideshow" data-cycle-slides="> span" data-cycle-timeout="10000" data-cycle-speed="1000" data-cycle-sync=false data-cycle-overlay-template="
    <div class='photo_title'>{{title}}</div>
    <div class='photo_desc'>{{desc}}</div>
    <div class='exif'>{{camera}}, {{lens}} @ {{length}}, {{shutter}}, {{aperture}}, ISO {{iso}}
    </div>
    <img src='images/close_pane.png' class='fadein close_pane button toggleinfo' alt='Close Info Pane'>" data-cycle-prev="#prev" data-cycle-next="#next" id="slideshow">
    <div class="cycle-overlay custom info"></div>
    <?php echo $photolist; ?>
</div> 
```

还有一个专辑列表，生成如下：

```
<div class="toggleblock pane" id="albums">
<?php
    $directory = 'gallery/*';
    $subfolders = glob($directory);
    foreach($subfolders as $subfolder) {
        $album = explode('_'. $subfolder);
        $albumname = str_replace(' ','%20',$album[1]);
        echo '<a href="#" class="fadein togglealbum" id="',$subfolder,'">',$albumname,'</a>';
    }
?>
<img src="images/close_pane.png" class="togglelink fadein close_pane button" data-block="albums" alt="Close Album List">
</div> 
```

当用户点击其中一张专辑时，会触发以下 jQuery：

```
$('.togglealbum').on('click',function() {       
    var slideshow = $('#slideshow');
    slideshow.cycle('destroy');
    slideshow.html("HTML GOES HERE");
    slideshow.cycle();
    $.cookie("currentalbum",(this).id,{expires:7});
}); 
```

`slideshow.html()`对于如何将新幻灯片的 HTML 获取到该方法中，我已经摸索了一两天了。现在发生的情况是，由于设置了 cookie，当您单击相册然后刷新页面时，会加载新相册。我想过也许让这种方法重新加载页面本身（我还不知道这是否可能），但这似乎真的很不雅。

有什么方法可以让幻灯片生成的代码基本上重新运行吗？

我还考虑过提前生成所有专辑的所有幻灯片，并将它们填充到带有变量名的变量中（我知道大多数人讨厌它们，但我喜欢 PHP 中变量变量的概念），但我仍然可以' t 实现从 PHP 代码到 jQuery 的飞跃。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T05:56:12.850

听起来您想要做的是对 PHP 脚本使用 AJAX 请求，该脚本可以发回专辑的信息。唯一的另一种方法是预先生成所有专辑信息并将其发送到页面，然后使用 JavaScript 来决定哪些是在页面上实际可见的。

服务器上的 PHP 脚本（为了简洁起见中途开始）：

```
<?php
    $directory = 'gallery/*';
    $subfolders = glob($directory);
    $albums = array();
    foreach($subfolders as $subfolder) {
        $album = explode('_'. $subfolder);
        $albumname = str_replace(' ','%20',$album[1]);
        array_push($albums, array('name' => $albumname, 'subfolder' => $subfolder));
    }
    echo json_encode($albums);
?> 
```

客户端中的 JavaScript：

```
$('.togglealbum').on('click',function() {
    $.ajax("my_uri", { dataType : "json", success: function(data, textStatus, jqXHR) {
        var slideshow = $('#slideshow');
        var html = "";
        for (var i = 0; i < data.length; i++) {
            html += "<a href='#' class="fadein togglealbum" id='" + data[i].subfolder + "'>" + data[i].name + "</a>";
        }
        slideshow.cycle('destroy');
        slideshow.html(html);
        slideshow.cycle();
    } }); 
```

});

显然根据您的需要调整输出 HTML 和您的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:08:28.107

我从您的网站下载了所有内容，并使用您给定的 PHP 代码将其合并到 index.php 文件中，

我通过将所有照片数据分配给一个 php 变量，然后通过首先对其进行 JSON 编码将其传递给一个全局 JS 变量来解决您的问题。

[http://w3egitim.com/stack/](http://w3egitim.com/stack/)在这里您可以查看。

有一些错误，但我认为那是因为我不完全理解你所有的 jquery 插件是如何工作的。

这是我的 index.php 和一些评论

```
 <?php
    ini_set("display_errors", true);
    error_reporting(E_ALL);

    include "exif.inc.php"; //I included this for read_exif_data_raw function was undefined

    if(isset($_COOKIE["currentalbum"])) {
            $currentalbum = $_COOKIE["currentalbum"];
    } else {
        $currentalbum = "gallery/01_New";
    }

    $photolist = getPhotoList($currentalbum); //get photolist data from a function

    //normal flow breaks here
    //we get all photollists for all album lists
    $allList = array();
    $directory = 'gallery/*';
    $subfolders = glob($directory);
    foreach($subfolders as $subfolder) {
        $album = explode('_', $subfolder);
        $albumname = str_replace(' ','%20',$album[1]);
        $allList[$subfolder] = getPhotoList($subfolder); //get photolist for each of the albums
    }

    $allList = json_encode($allList); //json encode them

  // I encapsulated your photo list code into a function for reusability
    function getPhotoList($currentalbum){
        $photos = glob($currentalbum.'/*.[Jj][Pp][Gg]');
        $albumparts = explode('_', $currentalbum);
        switch (array_key_exists(2,$albumparts)) {
            case false:
                usort($photos,"cmpexiftime");
                break;
            case true:
                usort($photos,"cmpexiftimer");
                break;
        }
        $photolist = "";
        foreach($photos as $photo){
            $title = basename($photo,".jpg");
            $exif = read_exif_data_raw("$photo",0);

            $desc = @$exif["IFD0"]["ImageDescription"];
            $camera = ucwords(strtolower(@$exif["IFD0"]["Model"]));
            switch(@$exif["SubIFD"]["LensInfo"]) {
                case "105.0 mm f/2.8":
                    $lens = "Micro-Nikkor 105mm f/2.8 VR";
                    break;
                case "50.0 mm f/1.8":
                    $lens = "Nikkor 50mm f/1.8D";
                    break;
                case "17.0-50.0 mm f/2.8":
                    $lens = "Tamron 17-50mm f/2.8 VC";
                    break;
                case "70.0-300.0 mm f/4.5-5.6":
                    $lens = "Nikkor 70-300mm f/4.5-5.6 VR";
                    break;
                default:
                    $lens = @$exif["SubIFD"]["LensInfo"];
                    break;
            }
            $length = str_replace(" ","",$exif["SubIFD"]["FocalLength"]);
            $shutter = str_replace(" ","",str_replace("ec","",$exif["SubIFD"]["ShutterSpeedValue"]));
            $aperture = $exif["SubIFD"]["ApertureValue"];
            $iso = $exif["SubIFD"]["ISOSpeedRatings"];
            list($width,$height) = getimagesize($photo);

            if ($height >= $width) {                            
                $photolist .= '<span data-title="'.$title.'" data-desc="'.$desc.'" data-camera="'.$camera.'" data-lens="'.$lens.'" data-length="'.$length.'" data-shutter="'.$shutter.'" data-aperture="'.$aperture.'" data-iso="'.$iso.'" style="background-image:url('.$photo.'); background-size:contain;" class="slide"></span>';
            } else {
                $photolist .= '<span data-title="'.$title.'" data-desc="'.$desc.'" data-camera="'.$camera.'" data-lens="'.$lens.'" data-length="'.$length.'" data-shutter="'.$shutter.'" data-aperture="'.$aperture.'" data-iso="'.$iso.'" style="background-image:url('.$photo.'); background-size:cover;" class="slide"></span>';
            }
        }

        return $photolist;
    }

    function cmpexiftime($a, $b) { 
        $exif1 = exif_read_data($a, 0, true); 
        $exif2 = exif_read_data($b, 0, true); 

        if ($exif1["EXIF"]["DateTimeOriginal"]==$exif2["EXIF"]["DateTimeOriginal"]) { 
         return 0; 
         } 
         return $exif1["EXIF"]["DateTimeOriginal"] < $exif2["EXIF"]["DateTimeOriginal"] ? -1 : 1; 
        } 
    ?>
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Element&#185;&#8311; Photography</title>
        <link rel="stylesheet" href="css/main.css" />
        <script src="js/jquery-1.8.0.min.js"></script>
        <script src="js/jquery.cycle2.min.js"></script>
        <script src="js/jquery.cokie.js"></script>
        <script src="js/main.js"></script>
        <script type="text/javascript">
                        //here I just echo json encoded string to JS, you should use a more secure JSON decode library for javascript
            var all_photo_data = <?php echo $allList;?>;

        </script>
    </head>
    <body> 
```

然后你的 main.js 需要进行以下更改，你去弄清楚

```
$('.togglealbum').on('click',function() {       
        var slideshow = $('#slideshow');
        slideshow.cycle('destroy');
        slideshow.html(all_photo_data[(this).id]);
        slideshow.cycle();
        $.cookie("currentalbum",(this).id,{expires:7});
    }); 
```

# angularjs - 有没有办法制作一个指令，使其只能在某个其他指令中使用？

> ID：13302812
> 
> 赞同：3
> 
> 时间：2012-11-09T05:51:59.147
> 
> 标签：angularjs

假设我有两个指令，`my-awesome-table`并且`my-awesome-table-cell`. 我永远不想`my-awesome-table-cell`在`my-awesome-table`指令之外使用。有没有办法强制执行？那么在`my-awesome-table`指令之外使用时会引发错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T05:49:30.260

您也可以通过让外部指令在 DOM 上放置一个“控制器指令”然后让内部指令“要求”这个“控制器指令”来做到这一点。

请参阅此 Plunk：http://plnkr.co/edit/QPNPu4。

```
app.directive('myAwesomeTable', function() {
  return {
    controller: function($scope) {},
    link: function(scope, element) {
      ...
    }
  };
});

app.directive('myAwesomeTableCell', function() {
  return {
    require: '^myAwesomeTable',
    link: function(scope, element, attributes, controller) {
      ...
    }
  };
}); 
```

您还可以使用 ?^ 将要求设为可选，然后在链接函数内部检查正在定义的控制器参数是否需要对其进行细粒度控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T14:05:36.020

这不应该是一个问题，假设您可以控制自己的代码......但是，在它成为一个问题的情况下，您可以检查您的链接函数以查看您的指令是否包含在正确的父指令中：

```
app.directive('testChild', function() {
  return {
    restrict: 'E',
    template: '<div>child</div>',
    link: function(scope, elem, attr){
      if(elem.parents('test').length === 0) {
        throw new Error('Must be inside test directive');
      }
    }
  };
});

app.directive('test', function(){ 
  return {
    restrict: 'E',
    transclude: true,
    template: '<div>' +
      '<h3>parent</h3>' +
      '<div ng-transclude></div>' +
    '</div>'    
  };
}); 
```

测试标记：

```
 <test>
    <test-child></test-child>
    <test-child></test-child>
  </test>
  <!-- this will throw an error in JS -->
  <test-child></test-child> 
```

**笔记**

链接函数中的`elem`参数是一个 JQuery LITE 对象，除非您还引用 JQuery，否则它是一个完整的 JQuery 对象。JQuery Lite 没有`.parents()`功能。你仍然可以检查父母，但如果可能的话，我建议在这里使用 JQuery。

要知道的另一件事是错误的指令仍然会呈现，除非您`elem.remove()`在链接函数中使用摆脱它。

此外，如果您`replace:true`在父指令上使用，您将需要在其模板中放入一些东西来识别它，例如您可以通过`parent()`调用查询的类或属性。

# java - 无法运行 Java Web Start JNLP

> ID：13302816
> 
> 赞同：1
> 
> 时间：2012-11-09T05:52:14.643
> 
> 标签：java, windows-7-x64, jnlp

我有一个特殊的java问题。我使用的是 Windows 7 64 位版本并获得了 JDK 1.7 64 位和 32 位，但问题是，我无法打开下载的 JNLP 文件（例如来自 Oracle 教程）这是由于两个不同的冲突造成的吗Java的体系结构还是背后有任何其他原因？如果我安装任何一个 JRE（64 位或 32 位），它工作正常，我可以运行它们。但是如果我卸载 64 位，我的应用程序将无法运行，如果我删除 32 位，我将无法在网络上查看 java 内容。所以，我想让他们两个都在场。有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:47:43.503

尝试更新您的 Java JRE。我建议您更新 x86 Java，因为我期望的原因是它们两者的版本冲突。

# jquery - 使用 AngularJS 自定义表单验证

> ID：13302822
> 
> 赞同：1
> 
> 时间：2012-11-09T05:52:35.947
> 
> 标签：jquery, forms, angularjs

我正在尝试使用 AngularJS 来验证表单。该表单将跨越多个页面，我想在用户移动到下一个页面之前验证每个页面。

这很简单。但是，每个页面都可以包含多个选项卡，我不确定如何打开和关闭特定选项卡的验证。

正如您在下面的小提琴中看到的那样，“#page1”有“个人”和“公司”。用户只能选择这两个中的一个，并且根据该选择，我必须禁用其他选项卡上的验证。使用 jQuery 动态添加“ng-disabled”属性不起作用。

我怎样才能做到这一点？任何帮助表示赞赏。

[http://jsbin.com/ijuhos/5/edit](http://jsbin.com/ijuhos/5/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:37:22.010

[ngDisabled](http://docs.angularjs.org/api/ng.directive%3angDisabled)接受一个表达式。您可以在每个下一个按钮上设置每个 ngDisabled 属性，以调用控制器中检查活动选项卡的函数，并执行更多逻辑（您必须弄清楚，您的小提琴很难阅读；）

# c# - 我想在双击标题栏时禁用屏幕大小调整

> ID：13302828
> 
> 赞同：1
> 
> 时间：2012-11-09T05:52:55.657
> 
> 标签：c#

我想在我的应用程序中禁用表单的大小调整。我禁用了最大化和最小化按钮，但是在双击标题栏时表单被调整大小。我保持最大化是真的。谁能告诉我如何禁用调整大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:15:24.650

将 FormBorderStyle 设置为 FixedSingle

```
this.FormBorderStyle = FixedSingle; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T15:26:49.843

您可以通过为您的表单创建 doubleClick 事件处理程序来解决它：

> ```
>  private void yourForm_DoubleClick(object sender, EventArgs e)
>     {
>         return;
>     } 
> ```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T05:56:20.520

您可以设置表单的 MaximumSize 属性。

# android - 如何在图像单击时垂直打开菜单（API-7 及更高版本）

> ID：13302832
> 
> 赞同：0
> 
> 时间：2012-11-09T05:53:05.560
> 
> 标签：android, android-layout, android-widget

我在屏幕底部有一个图像。我希望在单击图像时会打开一个垂直菜单。我使用的是 android api 7。屏幕如下图所示

![在此处输入图像描述](../Images/d2de7dc9a97b71bbfd996e61fe01332d.png)

**创建的菜单-**

```
 public boolean onCreateOptionsMenu(Menu menu) {
     MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.layout.menu, menu);
        return true;
} 
```

**菜单**

```
 <?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
 >
<item android:id="@+id/en"
          android:title="English"
            />
<item android:id="@+id/pt"
           android:title="Portugess" />
 <item android:id="@+id/es"
        android:title="Spainsh" />
 </menu> 
```

菜单显示但水平。请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:16:11.550

我不知道如何在菜单中使用。**但我使用 Layout 做了同样的效果**。我放的代码可能对你有帮助。

您必须根据您的要求更改布局。

activity_main.xml

```
<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:gravity="center_vertical|center_horizontal"
    android:orientation="horizontal" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Buy" />

    <Button
        android:id="@+id/btn_ex"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Example" />
</LinearLayout>

<LinearLayout
    android:id="@+id/layout_ex"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/linearLayout1"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="18dp"
    android:layout_marginRight="104dp"
    android:gravity="bottom"
    android:orientation="vertical"
    android:visibility="invisible"
     >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Example1" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Example2" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Example3" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Example4" />
</LinearLayout> 
```

顶部.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="2500"
    android:fromXDelta="0%"
    android:fromYDelta="200%"
    android:toXDelta="0%"
    android:toYDelta="0%"
    android:zAdjustment="normal" /> 
```

MainActivity.java

```
public class MainActivity extends Activity implements AnimationListener {

    private Button btn_ex;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        btn_ex = (Button) findViewById(R.id.btn_ex);

        btn_ex.setOnClickListener(new OnClickListener() {

            private LinearLayout layout_ex;

            public void onClick(View v) {

                Animation movement5;
                layout_ex = (LinearLayout) findViewById(R.id.layout_ex);

                layout_ex.setVisibility(View.VISIBLE);

                // layout3.setVisibility(true); //USE THIS LINE //EDITED

                movement5 = AnimationUtils.loadAnimation(MainActivity.this,
                        R.layout.top);
                movement5.reset();
                movement5.setFillAfter(true);
                movement5.setAnimationListener(MainActivity.this);
                layout_ex.startAnimation(movement5);

            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void onAnimationEnd(Animation arg0) {
        // TODO Auto-generated method stub

    }

    public void onAnimationRepeat(Animation arg0) {
        // TODO Auto-generated method stub

    }

    public void onAnimationStart(Animation arg0) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T04:03:14.533

你可以做这样一件事，

1.  根据您的需要在主布局中创建一种布局（比如说菜单布局）。

例如：

```
<RelativeLayout ....>
   <LinearLayout ....> // Your main layout start here

    // your main layout

   </LinearLayout> // Your main layout end here

   <LinearLayout ....>

    // Your menu layout

   </LinearLayout>

</RelativeLayout> 
```

1.  为菜单布局 LinearLayout 定义 id。
2.  最初作为该菜单布局的属性，`android:visibility="gone"`因此它在主布局中不可见。
3.  现在，当您单击图像时，根据需要显示带有垂直动画的菜单。

希望这个想法对你有所帮助。我以前做过，所以有可能，你可以用这种方式实现你的目标。

如果需要任何帮助，请评论我。

享受编码。:)

# java - 将字节数组中包含的字符代码转换为int的简短方法？

> ID：13302833
> 
> 赞同：0
> 
> 时间：2012-11-09T05:53:06.163
> 
> 标签：java, casting

有一个 byte[4] 包含随机十六进制数的字符代码，即 b[0] == 49, b[1] == 68, b[2] == 70 ...

我想用这些十六进制值计算一些东西，所以我需要将 char 值转换为 int。这听起来很简单，但我的解决方案看起来很糟糕：

```
char c1 = ((char)b[0]);
String s1 = String.valueOf(c1);
int p1 = Integer.parseInt(s1);

char c2 = ((char)b[1]);
String s2 = String.valueOf(c2);
int p2 = Integer.parseInt(s2);

... 
```

没有更短的方法吗？我的问题中有很多通用关键词，我也无法通过谷歌找到解决方案。

**更新帖子：**

哎呀，我忘了提到 byte[] 包含十六进制值。所以

```
int x = b[0] - '0'; 
```

是不够的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T05:54:41.723

怎么样：

```
int p1 = b[0];
// etc 
```

等一下。您想将字符解释为数字并使用这些值。如果您确定字节值是 ASCII 数字代码，您可以这样做：

```
int p1 = b[0] - '0';
// etc 
```

如果你想要一个正式正确的方法来做到这一点：

```
int p1 = Character.getNumericValue(b[0]);
// etc 
```

这将正确处理十六进制字符 (0, 1, ..., F) 甚至像`'\u216C'`(ROMAN NUMERAL FIFTY) 这样的字符。

# iphone - 如何在 iPhone 中隐藏 UITabbarController

> ID：13302837
> 
> 赞同：1
> 
> 时间：2012-11-09T05:53:22.700
> 
> 标签：iphone, objective-c, uitabbarcontroller

我已经在我的应用程序中实现了 UITabBarController。它的代码如下：

```
MainCollection *mainView = [[MainCollection alloc] initWithNibName:@"MainCollection" bundle:nil];
    UINavigationController *mainNav = [[UINavigationController alloc] initWithRootViewController:mainView];

    mainView = (MainCollection *)mainNav.topViewController;
    mainView.managedObjectContext = self.managedObjectContext;

    ShowFavourites *showVC = [[ShowFavourites alloc] initWithNibName:@"ShowFavourites" bundle:nil];
    UINavigationController *showNav = [[UINavigationController alloc] initWithRootViewController:showVC];
    showNav.title=@"Favourites";
     self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    UITabBarController *tabBar = [[UITabBarController alloc] init];

    [tabBar setViewControllers:@[mainNav,showNav]];

    [self.window setRootViewController:tabBar];

    [self.window makeKeyAndVisible];

    return YES; 
```

我的第一个屏幕是**MainCollection**我应该在这个视图中显示 tabBar。假设下一个视图是**SubCategory**但是当我导航到 SubCategory 时，在这个视图上我想隐藏 Tabbar 那么如何隐藏它或仅从 SubCategory 视图中删除**它**？

任何的想法？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T06:00:48.480

这有一个非常简单的解决方案。你应该更加努力。在要隐藏的视图中，`UITabBar`只需添加

```
self.hidesBottomBarWhenPushed = YES; 
```

在这里访问 SO 本身的这些链接。你会很容易找到答案：-

[在 iphone 中显示/隐藏 TabBarController](https://stackoverflow.com/questions/1356828/show-hide-tabbarcontroller-in-iphone)

[如何隐藏uitabbar控制器](https://stackoverflow.com/questions/5272290/how-to-hide-uitabbarcontroller)

[如何隐藏标签栏控制器？](https://stackoverflow.com/questions/7466829/how-to-hide-tab-bar-controller)

[当按下按钮以允许全屏查看内容时，是否可以隐藏标签栏？](https://stackoverflow.com/questions/1209582/is-it-possible-to-hide-the-tabbar-when-a-button-is-pressed-to-allow-a-full-scree)

[如何以编程方式隐藏 UITabBarController？](https://stackoverflow.com/questions/2257178/how-to-hide-tab-bar-controller-programmatically)

[如何隐藏 iPhone 标签栏？](https://stackoverflow.com/questions/2499892/how-to-hide-an-iphone-tab-bar)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T06:10:01.307

无需隐藏标签栏，只需使用父导航控制器推送到子类别屏幕

```
[self.tabBarController.navigationController pushViewController:subCategoryObj animated:YES]; 
```

谢谢，

# javascript - 在 div 内居中

> ID：13302839
> 
> 赞同：-3
> 
> 时间：2012-11-09T05:53:43.200
> 
> 标签：javascript, jquery, css

> **可能重复：**
> [如何在 div 中居中 div？](https://stackoverflow.com/questions/114543/how-to-center-a-div-in-a-div)

我有一个大的 DIV，它的宽度和高度为 100%，所以它占据了整个浏览器。我里面还有另一个 DIV，宽度为 1024 像素，高度为 400 像素。我想知道将 div 水平和垂直居中的最佳方法是什么？我还希望它在调整浏览器大小时保持在中心。是否有一个 jQuery 插件，一些方便的 javascript 或者我可以简单地使用 CSS 来做到这一点。

标记

```
.bigdiv{
height:100%;
width:100%;
background-color:#eee;
}
.smalldiv{
height:400px;
width:1024px;
background-color:#ccc;
}

<div class="bigdiv">
<div class="smalldiv"></div>
</div> 
```

感谢您的任何帮助和建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T05:59:34.893

您可以轻松地`margin:auto;`为您的子 div 提供您想要的结果

**HTML**

```
<div class="bigdiv">
<div class="smalldiv"></div>
</div> 
```

**CSS**

```
 .bigdiv{
    height:100%;
    width:100%;
    background-color:#eee;
    }
    .smalldiv{
    height:400px;
    width:1024px;
    background-color:#ccc;
    margin:auto;
    } 
```

[演示](http://jsfiddle.net/D2EBA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:58:16.510

尝试使用，`margin:0 auto;`

```
.smalldiv{
height:400px;
width:1024px;
background-color:#ccc;
margin:0 auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:20:44.663

好的，这就是如何让它居中。

```
.bigdiv{
height:100%;
width:100%;
background-color:#eee;
position:relative;
}
.smalldiv{
height:400px;
width:1024px;
background-color:#ccc;
position:absolute;
left:50%;
top:50%;
margin-left:512px;
margin-top:200px;
}

<div class="bigdiv">
<div class="smalldiv"></div>
</div> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-09T05:56:37.147

在`text-align:center`你的大 div 和`margin:0 auto` 你的内部 div 中使用

# java - Java中如何从字节数组中获取数据类型

> ID：13302848
> 
> 赞同：0
> 
> 时间：2012-11-09T05:54:23.440
> 
> 标签：java, cassandra

我有一个 Java 应用程序，允许用户将数据存储在数据库中，但在存储时我将这些数据存储为与 cassandra 相同的字节数组，现在当我返回字节数组时，我想将这些数据转换为用户保存的数据，这意味着如果用户保存为 Long 我想显示 long 值，或者如果用户保存 String 我想显示 String 值。现在，如果我将所有字节数组字段转换为字符串，显然长字节数组将显示为野生 char.string 字段就可以了。

请建议我如何在java中解决这个问题。它类似于 cassandra 存储数据的方式。cassandra 将所有数据存储为字节数组。

基本上我想知道字节数组的数据类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:24:38.623

你的问题不是很清楚你到底想要什么，但是......

您可以提出一些自定义方案来执行此操作，例如数组的第一个字节指示什么类型，其余字节是实际数据。然后，您需要编写代码将 byte[1] 到 byte[length-1] 转换为给定的类型。对我来说，这似乎是很多工作。

我可能会尝试使用对象序列化。它基本上可以完成您在此处询问的内容，无需任何自定义代码。

```
public static void main(String[] args) throws Exception {
    String strValue = "hello";
    int myInt = 3;
    long myLong = 45677;
    short myShort = 1;
    double myFloat = 4.5;

    serializeThenDeserialize(strValue);
    serializeThenDeserialize(myInt);
    serializeThenDeserialize(myLong);
    serializeThenDeserialize(myShort);
    serializeThenDeserialize(myFloat);
}

private static void serializeThenDeserialize(Object value) throws Exception {
    System.out.println("Input Type is " + value.getClass() + " with value '" + value + "'");
    ByteArrayOutputStream byteArrayStream = new ByteArrayOutputStream();
    ObjectOutputStream out = new ObjectOutputStream(byteArrayStream);
    out.writeObject(value);
    out.close();

    byte[] objectAsBytes = byteArrayStream.toByteArray();
    // Persist here..

    // Now lets deserialize the byte array
    ObjectInputStream in = new ObjectInputStream(new ByteArrayInputStream(objectAsBytes));
    Object deserializedValue = in.readObject();
    in.close();

    System.out.println("Deserialized Type is " + deserializedValue.getClass() + " with Value '" + deserializedValue + "'");
    System.out.println();
} 
```

运行它时，它就像我们想要的那样。返回数据并维护类型。

```
Input Type is class java.lang.String with value 'hello'
Deserialized Type is class java.lang.String with Value 'hello'

Input Type is class java.lang.Integer with value '3'
Deserialized Type is class java.lang.Integer with Value '3'

Input Type is class java.lang.Long with value '45677'
Deserialized Type is class java.lang.Long with Value '45677'

Input Type is class java.lang.Short with value '1'
Deserialized Type is class java.lang.Short with Value '1'

Input Type is class java.lang.Double with value '4.5'
Deserialized Type is class java.lang.Double with Value '4.5' 
```

这样做的好处是它适用于所有 Java 对象。不好的是，Java 对象序列化可能会随着您存储的对象的发展而变得有点麻烦（即，您删除方法、字段、使用不同的 JDK 编译等）。如果你坚持原语，你应该没有问题。[如果您序列化自己的对象，您应该在此处](http://docs.oracle.com/javase/6/docs/platform/serialization/spec/version.html#6519)阅读有关兼容和不兼容更改的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T08:08:16.710

我建议以某种格式序列化数据，存储类型信息，如 BSON：[http](http://bsonspec.org/) ://bsonspec.org/或微笑：[http ://wiki.fasterxml.com/SmileFormat](http://wiki.fasterxml.com/SmileFormat)

在这种情况下，反序列化将恢复类型信息，反序列化后您将获得正确类型的 Object。

这些格式非常紧凑：类型信息只需要几个额外的字节，而 java 标准序列化需要数百个字节来序列化最简单的对象。

# android - sqlcipher 因“不是错误”堆栈跟踪而崩溃

> ID：13302849
> 
> 赞同：4
> 
> 时间：2012-11-09T05:54:35.873
> 
> 标签：android, sqlcipher

我正在尝试在我的 API 16 (Motorola Xoom 4.1.2) 项目中使用 sqlcipher (2.0.8) 并获得以下堆栈跟踪。我在 libs 的 armeabi 文件夹和资产文件夹中的 icudt46l.zip 中有 3 个 so 库。我`SQLiteDatabase.loadLibs(context);`在 onCreate 我的活动。然而，当 II 创建数据库时，应用程序崩溃了。

```
11-08 21:00:33.050: E/AndroidRuntime(2222): FATAL EXCEPTION: Main:
11-08 21:00:33.050: E/AndroidRuntime(2222): net.sqlcipher.database.SQLiteException: not an error
11-08 21:00:33.050: E/AndroidRuntime(2222):     at net.sqlcipher.database.SQLiteDatabase.dbopen(Native Method)
11-08 21:00:33.050: E/AndroidRuntime(2222):     at net.sqlcipher.database.SQLiteDatabase.<init>(SQLiteDatabase.java:1952)
11-08 21:00:33.050: E/AndroidRuntime(2222):     at net.sqlcipher.database.SQLiteDatabase.openDatabase(SQLiteDatabase.java:902)
11-08 21:00:33.050: E/AndroidRuntime(2222):     at net.sqlcipher.database.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:945)
11-08 21:00:33.050: E/AndroidRuntime(2222):     at net.sqlcipher.database.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:107) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T05:54:35.873

原因是我在库项目的资产文件夹中有icudt46l.zip。我必须将 icudt46l.zip 复制到应用程序项目的资产文件夹中。这是有关此[https://github.com/sqlcipher/android-database-sqlcipher/issues/64的更多信息](https://github.com/sqlcipher/android-database-sqlcipher/issues/64)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T23:24:14.810

尝试卸载您的应用程序并重新安装它。在我的情况下，eclipse 在添加新资产文件时面临一些问题。

# ajax - 从 ajax 加载 Wordpress 特定的帖子模板

> ID：13302851
> 
> 赞同：0
> 
> 时间：2012-11-09T05:54:40.063
> 
> 标签：ajax, wordpress

我有一个`portfolio-modal.php`为帖子的模式窗口构建 html 的模板。

我可以从加载 php 模板`functions.php`

```
function ajaxPortfolioItem(){  
  //get the data from ajax() call  
   $postID = $_GET['postID'];  
   $portfolioItem = get_template_part('portfolio','modal');
   die($portfolioItem);  
}
add_action( 'wp_ajax_ajaxPortfolioItem', 'ajaxPortfolioItem' ); 
```

但是我怎样才能将 传递`$postID`给模板，以便它可以呈现正确的帖子？

这似乎是我见过一百万个主题所做的事情，但我已经搜索了所有内容，但找不到答案。

PS我不是一个WP家伙，所以也许我正在接近这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T06:38:03.350

在我现在正在研究的主题上，我正在使用这个加载点击事件的特定页面

```
$(".YourOpeningButton").click(function(){
        var post_link = $(this).attr("href");
        $("#YourContainer").html("loading...");
        $("#YourContainer").load(post_link + " #container > * ");
    return false;
    }); 
```

然后你只需要在 WP 中创建一个页面，并在你的主题中添加一个指向该页面的链接。

```
<a href="<?php echo get_option('home'); ?>/YourPage/" class="">link</a> 
```

当您单击`YourOpeningButton`它时，应检查 href 并以`YourContainer`. 我希望它有帮助...

# ruby-on-rails - 自定义 ruby gem 不遵守配置信息

> ID：13302853
> 
> 赞同：0
> 
> 时间：2012-11-09T05:54:44.463
> 
> 标签：ruby-on-rails, ruby, rubygems

我正在编写一个依赖于正在运行的应用程序中的配置信息的 ruby​​ gem。

我正在尝试遵循基于[此思想机器人文章](http://robots.thoughtbot.com/post/344833329/mygem-configure-block) 或[此堆栈溢出问题的模式](https://stackoverflow.com/questions/10584638/setting-up-configuration-settings-when-writing-a-gem)

我可以看到我在外部应用程序中的配置/初始化程序数据确实加载了，但问题是，我的代码依赖于在初始化程序设置被 gem 拾取之前运行的初始化程序。

如何保证初始化数据及时加载？

这是我的配置/初始化程序代码：

```
MbSharedScoreboard.configure do |config|
   config.foo = "bar"
end 
```

这是我在 gem 中读取数据的顺序：

```
require "mb_shared_scoreboard/configuration"
require "mb_shared_scoreboard/version"
require "mb_shared_scoreboard/models/service"
require "mb_shared_scoreboard/models/subject"
require "mb_shared_scoreboard/models/foo"

module MbSharedScoreboard

  def self.root
    File.expand_path('../..', __FILE__)
  end

end 
```

这是 configuration.rb - 加载的第一个文件：

```
module MbSharedScoreboard

  class Configuration
    attr_accessor :foo
    def initialize
      @foo = "foo"
    end
  end

  class << self
    attr_accessor :configuration
  end

  def self.configure
    self.configuration ||= Configuration.new
    yield configuration
    puts "startup configuration: #{self.configuration.to_s}"
  end 
end 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:05:45.077

根据[官方文档](http://guides.rubyonrails.org/configuring.html)，

> 在极少数情况下，您的应用程序需要在 Rails 本身加载之前运行一些代码，请将其放在 config/application.rb 中的 require 'rails/all' 调用之上。

您可以只在其中包含该文件，而不是移动整个内容。

# dynamic - jQuery动态生成的内容 - 点击不起作用

> ID：13302854
> 
> 赞同：0
> 
> 时间：2012-11-09T05:54:46.287
> 
> 标签：dynamic, jquery

我有一个页面，可以在其中动态添加 div，例如：

```
$(divCol).insertAfter(parentNewRow.children('.edCol:last')); 
```

这会在最后一个 div 之后插入另一个重复的`.edCol`div。一切都很好，除了使用新的`.edCol`div 时，所有按钮都不再起作用了。所有在原始 div 上完美运行的 jQuery 函数现在什么都不做。新 div 中的代码相同，所有类都相同，等等，但没有任何效果。

显然我错过了一些东西。任何人都可以对此有所了解吗？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T05:59:16.627

jQuery 文档表明`live()`已弃用，您应该使用该[`on()`](http://api.jquery.com/on/)函数。

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

这是一个你可以在这个[fiddle](http://jsfiddle.net/NzYXs/2/)中看到的例子。

```
$(function() {
    $('#container').on('click', 'div', function() {
        console.log('clicked');
    });

    $('#container').append($('<div>BLE</div>'));
});​ 
```

以及随之而来的 HTML：

```
<div id="container">
    <div>BLA</div>
</div>​ 
```

* * *

**编辑**

`on()`请查看以下小提琴，这是一个更完整的示例，可能会澄清您对该方法的使用方式的疑问： [DEMO](http://jsfiddle.net/NzYXs/8/)。

**HTML**

```
<div id="container">
    <div>
        First you have these buttons with the bound click handler<br/>
        <button>One</button><br/>
        <button>Two</button><br/>
        <button>Three</button><br/>
    </div>
</div>
<hr/>
<button id="load-btn">Click this button to load the buttons below in the &lt;div&gt; above</button>
<hr/>
<div id="content">
    <div>
        These buttons are going to be loaded above.<br/>
        <button>Four</button><br/>
        <button>Five</button><br/>
        <button>Six</button><br/>
    </div>    
</div> 
```

**​JS**

```
$(function() {
    // Bind click handler to the #load-btn which will
    // dynamically load the lower div content inside the upper div.
    $('#load-btn').on('click', function() {
        $('#container').append($('#content').html());
    });

    // Bind another click handler to all <button>s that exist at the moment
    // and that could be added dynamically inside the #container element.
    $('#container').on('click', 'button', function() {
        console.log('button ' + $(this).html() + ' clicked.');
    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T05:57:44.353

使用 jQuery 的 live() 方法。描述：为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。

参考：[http ://api.jquery.com/live/](http://api.jquery.com/live/)

```
$("p").live("click", function(){
$(this).after("<p>Another paragraph!</p>");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T05:57:36.137

使用[“实时”绑定](http://api.jquery.com/live/)，您将来也可以将事件附加到元素。

```
$('a').live('click' , function() {
    alert('clicked');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T14:09:27.463

```
$(document).on("click", ".my_Class", function (e) {
        alert("Works Fine");
    }); 
```

# asp.net-mvc - 将登录用户的信用卡号放在隐藏字段中

> ID：13302855
> 
> 赞同：0
> 
> 时间：2012-11-09T05:55:08.297
> 
> 标签：asp.net-mvc, security, model-binding

用户必须登录才能查看他们的信用卡信息。我想知道当时将该号码放在隐藏字段中是否安全。我必须这样做的原因是 MVC 的模型绑定。如果该字段不存在，那么我会丢失信用卡号，并且将不得不进行额外的 Web 服务调用。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T13:45:58.183

即使将其保留在会话中也不安全。移动你的背部并正确地做。

请记住 - 任何存储和处理信用卡信息的东西都属于 PCI-DSS 法规，如果您这样做（隐藏字段），您的产品将在第一次检查时被扔出大门，希望在它产生额外的法律 + 财务之前对使用它的公司承担责任。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T06:03:13.667

这不安全。因为任何人都可以对其进行编辑和提交。您可以将其保留在会话中。

恶意用户很容易看到和修改隐藏字段的内容。不要将任何敏感信息或您的应用程序依赖于正常工作的隐藏字段中存储。来自 MSDN

所有会话管理方法都在这里。

[http://msdn.microsoft.com/en-us/library/75x4ha6s(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/75x4ha6s(v=vs.100).aspx)

# flash - Flash 在浏览器中无法使用，但在计算机上可以正常使用

> ID：13302857
> 
> 赞同：1
> 
> 时间：2012-11-09T05:55:12.393
> 
> 标签：flash, slideshow, flash-cs5

在发布之前我正在这个测试网站上工作： [http ://www.mjmwebstudios.com/anchor](http://www.mjmwebstudios.com/anchor)

由于某种原因，主页上的幻灯片无法正常工作。如果我继续发布并重新上传它，有时它会起作用，但在所有三种主要浏览器（Firefox、Chrome、IE）中很少见。有时它可以在 IE 和 Chrome 中工作，但不能在 Firefox 中工作，或者在 Firefox 和 Chrome 中但不能在 IE 中工作。现在它在其中任何一个都不起作用。

当我直接在电脑上播放电影时，每次都运行良好。不知何故，浏览器无法正确播放。

随意在此处下载 swf 并亲自[查看 http://www.mjmwebstudios.com/anchor/flash/shorehouse5.swf](http://www.mjmwebstudios.com/anchor/flash/shorehouse5.swf) （如果您不知道，请右键单击它并点击“将链接另存为...”

什么可能导致这种情况发生？

我用 Flash CS4 写的，想着可能是这个问题，我在朋友的电脑上把它转换成 CS5.5 得到了同样的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:22:21.253

当您通过`ctrl`+从 Flash Pro 本地`enter`运行时，swf 在投影仪中运行。

要确保通过浏览器访问网络，请确保您的发布设置启用*“本地播放安全”*的网络访问：

![发布设置](../Images/be1c73ab3dc9c0c8d1b36be0463781d8.png)

# php - 从关联数组中弹出一个固定的键值对 - PHP

> ID：13302860
> 
> 赞同：1
> 
> 时间：2012-11-09T05:56:06.487
> 
> 标签：php, arrays, associative-array

我有这样的数组结构：

```
Main-Array
(
    [0] => Sub-Array
    (
        [0] => AAA
        [1] => BBB
        [2] => -
        [3] => DDD
    )

    [1] => Sub-Array
    (
        [0] => 111
        [1] => 222
        [2] => -
        [3] => 444
    )
) 
```

根据上面提到的示例，我想将**Main-Array[0][2] 和 Main-Array[1][2]**从数组中弹出，因为两者都是空的..

我知道通过执行foreach循环并根据要求分配一个新数组来做到这一点..但是如果有更好的方法或我不知道的任何PHP数组函数..那么欢迎提出建议..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:03:02.887

请用于`unset($index);` 从数组中删除项目

请注意，在上述情况下，索引保持不变。

别的

`array_splice()`如果您想标准化整数键，可以使用。另一种选择是使用`array_values()`after`unset()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T06:25:21.210

```
$array_fill = array(array('AAA','BBB','-','DDDD'), array(111,222,'-',444));
function clean_now($var)
{
    return $var == '-'? false: true;    
}

function cleanme($var)
{
    return array_filter($var, "clean_now"); 
}

print_r(array_map("cleanme",$array_fill)); 
```

由于它是二维数组，我首先使用`array_map`过滤每个数组内部的数组，并从数组`array_filter`中删除`'-'`。

尝试复制我的代码，然后在您身边运行它。我添加了变量值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T09:13:12.450

```
$a[]=array(DD,AA,'',1);
$a[]=array(mm,er,'',4);
foreach($a as $b)
{
    rsort($b);
    array_pop($b);
    $c[]=$b;
}
print_r($c); 
```

因为你说两者都是空的，这是实现它的最简单方法之一，之后你的输出将如下所示

```
Array
(
    [0] => Array
        (
            [0] => 1
            [1] => DD
            [2] => AA
        )

    [1] => Array
        (
            [0] => 4
            [1] => mm
            [2] => er
        )

) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T06:00:48.040

尝试

```
foreach ($main_arr as &$arr) {
  $arr = array_filter($arr);
} 
```

# seo - SEO友好的分页结构

> ID：13302870
> 
> 赞同：3
> 
> 时间：2012-11-09T05:56:41.523
> 
> 标签：seo, googlebot, google-search-console

我有 1 到 1700 页，每页包含 20 个线程。我从谷歌网站管理员博客阅读了关于使用 rel='next' 和 rel='prev' 属性的 SEO 友好分页的教程。

但是我的分页 URL 应该看起来像更好的 SEO。

```
FOR EXAMPLE: 

// im Using Zend Framework 
//Default URL for threads is

http://domain.com/Movies/Action/page/3/  

// I changed this URL for better SEO to 

http://domain.com/ActionMovies/pagenumber 
```

请建议我分页的 URL 结构应该是什么，以便与 google BOT 更友好。

我应该在 URL 中使用 URI 查询符号（ ? , & ）吗，像这样

```
http://domain.com/movies=action&page=3 
http://domain.com/movies=action
http://domain.com/movies=drama

// OR

http://domain.com/ActionMovies/3/

// OR

http://domain.com/Movies/Action/page/3 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T08:39:12.267

如果您希望在电影类别中进行分页，则可以使用此层次结构：

**主页**>**电影**>**动作**

最佳的 URL 结构可能是：

www.domain.com/movies/action

使用**页面**查询参数进行分页对搜索引擎非常友好。

第 1 页：www.domain.com/movies/action

第 2 页：www.domain.com/movies/action?page=2

第 3 页：www.domain.com/movies/action?page=3

但是，正如其他人所提到的，建议您对系列中的每个页面使用 rel="prev" 和 rel="next" 分页标记。在提供的示例中，我们的系列中有三页。以下是每个分页链接元素的外观：

第 1 页：www.domain.com/movies/action

```
<link rel="next" href="http://www.domain.com/movies/action?page=2"/> 
```

第 2 页：www.domain.com/movies/action?page=2

```
<link rel="prev" href="http://www.domain.com/movies/action"/>
<link rel="next" href="http://www.domain.com/movies/action?page=3"/> 
```

第 3 页：www.domain.com/movies/action?page=3

```
<link rel="prev" href="http://www.domain.com/movies/action?page=2"/> 
```

请注意，该系列中的第一页和最后一页将分别只有 rel="next" 和 rel="prev" 链接元素，而中间页面（或夹在中间的页面）将具有两个链接元素. 此标记可帮助 Google 和其他搜索引擎识别分页系列并整合这些系列的索引属性。

另一种可能的解决方案（之前也提到过）是使用查看所有页面和 rel="canonical" 链接元素。在这种情况下，您将拥有一个查看所有页面，其中包含分页系列中可见的所有内容，系列中的每个页面都将查看所有页面作为其规范 URL。

例如，如果查看所有页面位于**www.domain.com/movies/action?view=all**，则该系列中的每个页面都将具有以下规范链接元素：

```
<link rel="canonical" href="http://www.domain.com/movies/action?view=all"/> 
```

请记住，指定为规范的 URL 应包含放置链接元素的页面所包含的所有（或基本上所有）HTML 内容。当然，它也可以包含更多内容，这就是为什么查看所有页面是一种有效的实现方式。尽管如此，这是需要考虑的——特别是如果系列中的每一页都有内容（比如一段文字），而这些内容没有被带到查看所有页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-08T09:45:20.697

rel next/prev 未被 Google 使用，请参阅 John Mueller 的这条推文： [https ://twitter.com/JohnMu/status/1108719402558590976](https://twitter.com/JohnMu/status/1108719402558590976)

指向带有内部链接的下一页就足够了。无论您是用户路径还是参数，这都取决于您，Google 可以同时抓取两者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T06:04:01.223

根据[这篇文章](http://googlewebmastercentral.blogspot.hu/2011/09/pagination-with-relnext-and-relprev.html)，您也可以使用 url 参数，但是我建议使用这种语法。

```
http://domain.com/movies/action?page=3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T20:53:31.190

使用 rel=next 和 rel=prev 的分页是一种解决方案，但不是从 SEO 角度来看的最佳方式。谷歌更喜欢所有视图内容，所以是一个解决方案，但不是最好的。您必须决定分页中是否会有非常相似的内容，因为您可以进行分页，但如果知道有重复的内容，谷歌会处罚。

所以我建议只在内容足够不同的情况下进行分页。Google URL 上的参数看起来像不同的页面，因此您可能会因重复内容而受到处罚。

我给你举个例子： [http ://www.rightmove.co.uk/property-for-sale/property-24433887.html](http://www.rightmove.co.uk/property-for-sale/property-24433887.html)

照片库更改照片，但 URL 未更改。

其他建议，不要对 URL 使用重写，因为它也会受到 Google 的惩罚。(HTML5)

我希望它会帮助你做出决定。

# wordpress - 在 Buddypress 上添加自定义活动流

> ID：13302874
> 
> 赞同：3
> 
> 时间：2012-11-09T05:56:53.457
> 
> 标签：wordpress, buddypress

我正在使用 wordpress 多站点以及安装的 buddypress。

我想向更新帖子的用户添加活动。但是，它不起作用。不添加任何活动。

这是我的代码：

```
function buddypress_edit_post($post_id) {
     global $bp, $user_id;
     $post = get_post($post_id); 
     $title = $post->post_title;
     $user_fullname  = bp_core_get_user_displayname($user_id);

     bp_activity_add(array(
    'action' => $user_fullname.' updated ' . $title . ':',
    'component' => 'blog_post',
    'type' => 'update_post',
    'primary_link' => get_permalink($post_id),
    'user_id' => $user_id
     ));

}
add_action('edit_post', 'buddypress_edit_post'); 
```

似乎是什么问题？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:58:52.737

活动类型为“update_post”在 Buddypress 中不可用。您必须使用默认的“activity_update”更新活动。

```
bp_activity_add(array(
    'action' => $user_fullname.' updated ' . $title . ':',
    'component' => 'blog_post',
    'type' => 'activity_update',
    'primary_link' => get_permalink($post_id),
    'user_id' => $user_id
     )); 
```

# regex - 代表帽子符号的 gsub 模式值

> ID：13302876
> 
> 赞同：3
> 
> 时间：2012-11-09T05:57:07.380
> 
> 标签：regex, r

那些知道答案的人的快速问题......代表“^”（帽子符号）的正则表达式模式是什么？这样我可以在执行以下操作时将其删除？

```
gsub("^","","^GSPC") 
```

即上面的输出并不`GSPC`像预期的那样......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T05:58:23.897

您需要转义`^`，因为它是一个正则表达式元字符（如评论中的@Roman 注释）

```
gsub("\\^","","^GSPC") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T13:46:29.487

每当您只想匹配文字字符串时，您可以设置`fixed = TRUE`然后键入字符串“verbatim”。它使`pattern`参数更具可读性，并且启动速度更快！

```
gsub("^", "", "^GSPC", fixed = TRUE)
# [1] "GSPC" 
```

# android - 没有找到处理意图 twitter android 的活动

> ID：13302878
> 
> 赞同：1
> 
> 时间：2012-11-09T05:57:14.320
> 
> 标签：android, twitter, android-activity

我正在尝试按照代码在我的应用程序中使用 twitter，但它没有提供任何活动来处理 OAuthRequestTokenTask 类中的意图

我的代码是

```
@Override
protected Void doInBackground(Void... params) 
{

    try {
        Log.i(TAG, "Retrieving request token from Google servers");
        final String url = provider.retrieveRequestToken(consumer, Constants.CALLBACK_URL);
        Log.i(TAG, "Popping a browser with the authorize URL : " + url);
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_FROM_BACKGROUND);
        Log.i(TAG, "before start Context= " + context.toString());
        context.startActivity(intent);
        Log.i(TAG, "after start Context= " + context.toString());
    } catch (Exception e) {
        Log.e(TAG, "Error during OAUth retrieve request token", e);
    }

    return null;
} 
```

它在开始活动时出错。当我使用 log.i 来跟踪上下文时，它也会打印正确的一个（PrepareRequestTokenActivity）。

我的清单是

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.supra.saiapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name="PrepareRequestTokenActivity" android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="x-oauthflow-twitter" android:host="callback" />
        </intent-filter>
    </activity>

    <activity android:name="RegisterActivity"></activity>
    <activity android:name="ContinueActivity"></activity>
    <activity android:name="TabActivity"></activity>
    <activity android:name="TabGroupActivity"></activity>
    <activity android:name="TabGroup1Activity"></activity>
    <activity android:name="TabGroup2Activity"></activity>
    <activity android:name="TabGroup3Activity"></activity>
    <activity android:name="TabGroup4Activity"></activity>
    <activity android:name="TabGroup5Activity"></activity>
    <activity android:name="AboutusActivity"></activity>
    <activity android:name="PictureGalleryActivity"></activity>
    <activity android:name="FullImageActivity"></activity>
    <activity android:name="StoriesListActivity"></activity>
    <activity android:name="StoryActivity"></activity>
    <activity android:name="FavoriteActivity"></activity>
    <activity android:name="MyAccountActivity"></activity>
    <activity android:name="ShareOnFacebook"></activity>

  </application> 
```

错误是

```
android.content.ActivityNotFoundException: No Activity found to handle Intent {      act=android.intent.action.VIEW dat= https://api.twitter.com/oauth/authorize?oauth_token=7IeCQcKtUWXsP9IH6ftseF8HAGnA5IDRp0WcZqxqM flg=0x60000004 } 
```

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:26:57.890

使用此演示进行 Twitter 集成...

[https://github.com/lorensiuswlt/AndroidTwitter](https://github.com/lorensiuswlt/AndroidTwitter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:13:28.650

你改变了这个实体

```
 <activity android:name="PrepareRequestTokenActivity" 
```

到

```
 <activity android:name=".PrepareRequestTokenActivity" 
```

# c# - 获取数组中的最后一个数字（输入和输出）C#

> ID：13302880
> 
> 赞同：3
> 
> 时间：2012-11-09T05:57:18.083
> 
> 标签：c#, input, android-activity

嗨，我是 c# 编程的新手，我正在做一个将输入多少输入的活动，它将查看插入的数字。现在我只有一个问题，如何才能只查看最后插入的数字，这是我的代码：

```
 Console.Write("Enter How Many Inputs: ");
        int num1 = int.Parse(Console.ReadLine());
        int[] arr = new int[num1];
        for (int i = 0; i < num1; i++) {
            Console.Write("Input Value #" + (i + 1) + ":");
            arr[i] = int.Parse(Console.ReadLine());
        }
        Console.Write("The Numbers inserted are: ");
        for (int x = 0; x < arr.Length; x++) {
            Console.Write(" " + arr[x]);
        }
        Console.Write("The Last Number Inserted is: ");
        (???)

  Sample Output:
  Enter How Many Inputs: 3
  Value #1: 80
  Value #2: 83
  Value #3: 50
  The Numbers inserted are: 80 83 50
  The Last Number inserted is: 50 
```

我不知道我将使用什么循环来查看最后插入的数字。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T06:00:48.513

```
arr[arr.length-1] 
```

或者

```
arr[num1-1] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T06:03:15.407

数组的最后一个元素可以由

```
arrayname[totalsize-1] 
```

因为 array 被`0th`index 盯着，这就是为什么`[totalsize-1]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T07:35:30.400

你也可以使用`arr.Last()`

> `public static TSource Last<TSource>(this System.Collections.Generic.IEnumerable<TSource> source)`
> 
> System.Linq.Enumerable 的成员

这将为您提供序列的最后一个元素。

# character-encoding - 我在哪里可以指定我的 javadoc 文档字符集？

> ID：13302881
> 
> 赞同：6
> 
> 时间：2012-11-09T05:57:23.150
> 
> 标签：character-encoding, javadoc

我正在用波兰语编写 javadoc，我想为 eclipse 生成的 javadoc 文档定义 UTF-8 字符集 - 我该如何以及在哪里可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-04-02T14:54:13.343

右键单击您的项目
Export... > javadoc
在第三个面板中，这样写

> -encoding utf8 -docencoding utf8 -charset utf8

![在此处输入图像描述](../Images/a5a4bff1067f6095bcde422c8fd7eb44.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-10T20:42:15.397

Javadoc 有三个相关选项：

*   该[`-encoding`选项](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javadoc.html#encoding)指示源文件的编码。这应该是您的源文件实际编码的任何内容（并且编译器应该使用相同的`-encoding`选项）。`\uXXXX`您可以使用约定对不在此编码字符集中的字符进行编码。（有些人认为你不应该在源代码中使用 US-ASCII 以外的字符，以使其可移植。我认为现在 UTF-8 很好。）

*   该[`-docencoding`选项](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javadoc.html#docencoding)指示在写出 HTML 文件时要使用的编码。在生成的 HTML 中使用而不在字符集中使用的字符将替换为它们的`&#...;`等效字符。

*   该[`-charset`选项](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javadoc.html#charset)`<META http-equiv="Content-Type" content="text/html; charset=...">`指示在生成的 HTML 文件的标头中的标记中写入的内容。

几乎没有理由不对 and 使用相同的值`-docencoding`，`-charset`而且我不知道为什么它们有两个不同的选项。使用不同的值会产生无效的 HTML 或至少是错误的字符。

# visual-c++ - 重新绑定 UDP 套接字

> ID：13302894
> 
> 赞同：0
> 
> 时间：2012-11-09T05:58:17.050
> 
> 标签：visual-c++, winsock

我制作了一个使用 udp 发送消息的程序。该程序最初将使用默认 IP 地址和端口初始化 udp 套接字。但是，它还应该允许用户在运行时更改目标 IP 地址和端口。

目前，如果用户更改 ip 地址/端口，我将关闭当前套接字，并使用新的 ip 地址/端口重新初始化/绑定套接字。

该程序能够使用初始套接字成功发送消息。但是当我重新绑定 ip 地址/端口时，绑定有时会失败。Bind() 返回值 -1。我在网上做了一些搜索，发现当套接字关闭时 TCP 协议有 2msl 超时。这适用于UDP吗？

此外，是否有更好的方法允许用户更改目标 IP/端口。顺便说一句，我在 Visual Studio 上使用 C++。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T04:13:36.700

2MSI 超时不适用于 UDP。但是，另一个应用程序可能正在使用您尝试绑定到的 IP/端口。如果您知道 ip/port 可以安全使用，您可以`setsockopt()`在`SO_REUSEADDR`调用`bind()`.

# json.net - 我需要 Json.NET 中的类版本控制支持

> ID：13302895
> 
> 赞同：2
> 
> 时间：2012-11-09T05:58:20.537
> 
> 标签：json.net

我正在使用 Json.NET 4.5 版，我对 Json.Net 很陌生。

问题：我需要知道如何在 Json.NET 中支持类的版本控制。

示例：如下例所示，我在第二个版本中有 EmployeeDetail 类，Name 属性分为 FirstName 和 LastName；并且单个地址成为地址。

我尝试使用自定义 JsonConverter 在反序列化对象时提供向后兼容性，但是在使用多个转换器时遇到了问题，因为我已经在使用通用的自定义创建 JsonConverter，它将接口映射到 ConcreteType，如下例所示。

```
 // Employee Detail Version 1.0
    [JsonObject()]
    public class EmployeeDetail
    {
        public EmployeeDetail()
        {

        }

        public EmployeeDetail( string name )
        {
            Name = name;
        }

        [JsonProperty]
        public string Name { get; set; }

        [JsonConverterAttribute( typeof( CustomObjectCreationConverter<iAddress, Address> ) )]
        public iAddress Address { get; set; }

    }

    // Employee Detail Version 2.0
    [JsonObject()]
    public class EmployeeDetail
    {
        public EmployeeDetail()
        {

        }

        public EmployeeDetail( string firstName, string lastName )
        {
            FirstName = firstName;
            LastName = lastName;
        }

        [JsonProperty]
        public string FirstName { get; set; }

        [JsonProperty]
        public string LastName { get; set; }

        [JsonConverterAttribute( typeof( CustomArrayCreationConverter<iAddress, Address> ) )]
        public IEnumerable<iAddress> Addresses { get; set; }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T04:59:43.163

在这里向属性添加属性 [JsonConverterAttribute] 不是一个好的选择。而不是这个尝试`JsonSerializerSettings`使用`TypeNameHandling = TypeNameHandling.Objects`and设置`TypeNameAssemblyFormat = FormatterAssemblyStyle.Full`。

所以在使用设置序列化之后，Json 字符串将包含标签，如 "Address":{"$type":"...

您可以使用 jObject.Property("Address").Value 获得它

```
Var AddressValue = jObject.Property( "Address" ).Value
JsonTextReader textReader = new JsonTextReader( new StringReader( AddressValue.ToString() ) );
iAddress myAddress = serializer.Deserialize<iAddress>( textReader ); 
```

现在，如果地址对象没有改变，那么它应该为你序列化它，否则你也需要另一个转换器。

这两个转换器都需要传递给`DeserializeObject`.

我还没有实际测试过这段代码，所以如果事情不清楚，请告诉我

# mysql - Mysql join 查询三个多列的表

> ID：13302898
> 
> 赞同：11
> 
> 时间：2012-11-09T05:58:36.907
> 
> 标签：mysql, join, relational-database

我有三个这样的表：

**专业化**

```
sid | s_name
--------------
 1  | test 1
 2  | test 2 
```

**人**

```
pid | name | sid
------------------
 1  | ABC  |  1
 2  | XYZ  |  2 
```

**定时**

```
tid | time_from | time_to  | pid
----------------------------------
 1  | 08:00:00  | 10:00:00 |  1
 2  | 20:00:00  | 22:00:00 |  1
 3  | 09:00:00  | 14:00:00 |  2
 4  | 19:00:00  | 20:00:00 |  2 
```

**我想得到这样的结果*

```
pid | name | s_name | time_from  | time_to
--------------------------------------------
 1  | ABC  | test 1 | 08:00:00   | 10:00:00 
```

说明：
所有三个表都已连接。
我想要所有
**专业化**id = '1'
**人名**（**如**'ABC'
**时间**在 '08:00:00' 和 '10:00:00' 之间）的记录。

我尝试了几种 mysql 连接组合，但无法正确获取数据。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-09T06:02:11.470

你可以用`INNER JOIN`这个，

```
SELECT  a.pid, a.name,
        b.sname,
        c.time_from,
        c.time_to
FROM    person a
        INNER JOIN specialisation b
            ON a.sid = b.sid
        INNER JOIN Timing c
            ON a.pid = c.pid
WHERE   a.sid = 1 and 
        a.name='ABC'  AND 
        c.time_from >= '08:00:00' AND c.time_to <= '10:00:00' 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/3ea7e/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:07:06.837

您可以像这样使用简单加入

```
 Select P.pid , name , s_name ,time_from ,
     time_to from Specialisation S 
     Join Person P on P.sid=S.sid 
     Join Timing T on T.pid= P.pid 
     where T.time_from >= '08:00:00' AND T.time_to <='10:00:00' And P.name='ABC'; 
```

[小提琴](http://sqlfiddle.com/#!2/3ea7e/32)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:04:54.050

`JOIN`在适当的`WHERE`条件下，这是直截了当的。

```
 SELECT t.pid, p.name, s.s_name, t.time_from, t.time_to 
 FROM   Timing AS t
 JOIN   Person AS p ON p.pid = t.pid
 JOIN   Specialisation AS s ON s.sid = p.sid
 WHERE  s.sid = 1
    AND t.time_from >= 08:00:00 AND t.time_to <= 10:00:00 
```

这是一个简单的条件，您必须使用`JOIN`s 以这种方式获取数据。它是如此简单，以至于您在第一次使用后就会立即掌握它。可能这个问题和答案会帮助你理解它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T06:06:35.123

```
SELECT p.pid, p.name, s.s_name, t.time_from, t.time_to 
FROM   Timing AS t
JOIN   Person AS p ON p.pid = t.pid
JOIN   specialisation AS s ON s.sid = p.sid
WHERE  s.sid = 1 and p.name='ABC'
AND t.time_from >= '08:00:00' AND t.time_to <= '10:00:00' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T06:09:57.283

```
SELECT B.PID pid, B.NAME name, A.SNAME s_name, C.TIME_FROM time_from, C.TIME_TO time_to
FROM SPECIALISATION A, PERSON B, TIMING C
WHERE A.SID = 1 AND A.SID=B.SID AND B.PID=C.PID 
AND C.TIME_FROM >=08:00:00 AND C.TIME_TO <=10.00.00 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T06:10:18.903

尝试 ：

```
 SELECT t.pid, p.name, s.s_name, t.time_from, t.time_to 
     FROM   Specialisation AS s
    left join  Person AS p ON p.sid = s.sid
    left join  Timing AS t ON t.pid = p.pid
    WHERE  s.sid = 1
        AND t.time_from >= 08:00:00' AND t.time_to <= 10:00:00
group by t.tid 
```

# jquery - 显示像三个单元格的块必须删除单元格间距

> ID：13302899
> 
> 赞同：0
> 
> 时间：2012-11-09T05:58:43.370
> 
> 标签：jquery, html, css

![在此处输入图像描述](../Images/7113b65f513353b671519249726b8cd7.png)[http://jsbin.com/uzojax/11/edit](http://jsbin.com/uzojax/11/edit)

```
<table cellspacing="1" width="50%" bgcolor="#cccccc" width="50%">
     <tr class="csstextheader">
     <td>   
     </td>
     <td>Class  
     </td>
     <td>Numbers
     </td>
     </tr>
   <tr class="csstablelisttd">
     <td> 1  
     </td>
     <td>2  
     </td>
     <td>3
     </td>
     </tr>
      <tr class="csstablelisttd">
     <td>  4
     </td>
     <td class='csstdred' > 
     </td>
     <td> 6  
     </td>
     </tr>   
      <tr class="csstablelisttd">
     <td >  7 
     </td>
     <td class='csstdred'>  8
     </td>
    <td>   9
     </td>
     </tr>  
      <tr class="csstablelisttd">
     <td> 10
     </td>
     <td class='csstdred'>
     </td>
    <td>12
    </td>
     </tr>      
   </table> 
```

我必须删除具有类 csstdred 的单元格的边框，并且必须像没有行跨度的三个单元格一样显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T06:11:23.800

### 使用这个 CSS：

```
table {border-collapse: collapse;} 
```

### 小提琴：http: [//jsbin.com/ogusaq/1/edit](http://jsbin.com/ogusaq/1/edit)

* * *

### 更新#1：

如果你想要其他边框：

```
table {border-collapse: collapse;}
td {border: 1px solid #ccc;}
.csstdred {border-color: #f00;} 
```

### 小提琴：http: [//jsbin.com/iwenuw/1/edit](http://jsbin.com/iwenuw/1/edit)

### 截屏：

![截屏](../Images/508af1bea91d337d82219bd4795380b1.png)

* * *

### 更新#2：

如果您只想让一个`table`受到影响，请给表格一个类别`.redborder`：

```
table.redborder {border-collapse: collapse;}
table.redborder td {border: 1px solid #ccc;}
table.redborder .csstdred {border-color: #f00;} 
```

### 小提琴：http: [//jsbin.com/ujabav/1/edit](http://jsbin.com/ujabav/1/edit)

* * *

### 更新#3：

单击时`.csstdred`，它应变为蓝色。这只能使用 JavaScript 来完成。所以，这里是代码。

```
$(document).ready(function(){
  $(".csstdred").click(function(){
    $(this).toggleClass("active");
  });
}); 
```

为活动状态添加此 CSS：

```
table.redborder {border-collapse: collapse;}
table.redborder td {border: 1px solid #ccc;}
table.redborder .csstdred {border-color: #f00;}
table.redborder .csstdred.active {border-color: #00f; border-width: 2px 1px 1px 2px; border-collapse: separate;} 
```

### 小提琴：http: [//jsbin.com/ihejep/1/edit](http://jsbin.com/ihejep/1/edit)

* * *

### 更新#4

```
table.redborder {border-collapse: collapse;}
table.redborder td {border: 1px solid #ccc;}
table.redborder .csstdred {border-color: #f00;}
table.redborder .csstdred div {border: 1px solid #f00;}
table.redborder .csstdred.active div {border: 1px solid #00f;} 
```

### JavaScript

```
$(document).ready(function(){
  $(".csstdred").wrapInner("<div>").click(function(){
    $(this).toggleClass("active");
  });
}); 
```

### 小提琴：http: [//jsbin.com/abekup/1/edit](http://jsbin.com/abekup/1/edit)

### 小提琴： http: [//jsbin.com/abekup/5/edit](http://jsbin.com/abekup/5/edit)（更新）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:17:43.897

CSS中没有修改..只是更改了html

请检查这个[http://jsbin.com/uzojax/34/](http://jsbin.com/uzojax/34/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:20:33.640

使用可以将特定位置的 tb 更改为 div。

```
 <td rowspan="3" class="csstdred">
    <div><p>1</p><p>1</p><p>1</p></div>
    </td> 
```

# iphone - 我已经在我的 IOS 应用程序中集成了 google plus，但是我无法获取当前登录用户的电子邮件 ID

> ID：13302904
> 
> 赞同：1
> 
> 时间：2012-11-09T05:59:10.890
> 
> 标签：iphone, ios, ios6, google-plus, google-plus-one

我已经在我的 ios 应用程序中集成了 google plus，我能够成功登录，但我无法获取当前登录用户的电子邮件 ID。我参考了[https://developers.google.com/+/ mobile/ios/](https://developers.google.com/+/mobile/ios/)并已完成登录所需的所有步骤！

那么，我如何获得在 Google plus 中登录的当前用户邮件 ID？

![在此处输入图像描述](../Images/4d05cfc991563a8b30ed6e7b3be3a32c.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T07:50:14.160

转到 dic 中的 GTMOAuth2Authentication.m 文件方法 setKeysForResponseDictionary 在方法结束时返回访问令牌。

```
accessTocken = [dict valueForKey:@"access_token"]; // access tocken pass in .pch file
[accessTocken retain]; 
```

在你的控制器中

```
- (IBAction)momentButton:(id)sender {
  NSString *str =  [NSString stringWithFormat:@"https://www.googleapis.com/oauth2/v1/userinfo?access_token=%@",accessTocken];
  NSString* escapedUrl = [str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
  NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@",escapedUrl]];
  NSString *jsonData = [[NSString alloc] initWithContentsOfURL:url usedEncoding:nil error:nil];
  NSMutableDictionary *proDic = [[NSMutableDictionary alloc] init];

  proDic=[jsonData JSONValue];
  NSLog(@"%@",proDic); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T10:28:46.633

这是获取当前登录用户的电子邮件 ID 的最简单和最简单的方法
首先创建 GPPSignIn 类的实例变量

```
GPPSignIn *signIn; 
```

然后在`viewDidLoad`

```
- (void)viewDidLoad
  {
  [super viewDidLoad];

   static NSString * const kClientID = @"your client id";
   signIn = [GPPSignIn sharedInstance];
   signIn.clientID= kClientID;
   signIn.scopes= [NSArray arrayWithObjects:kGTLAuthScopePlusLogin, nil];
   signIn.shouldFetchGoogleUserID=YES;
   signIn.shouldFetchGoogleUserEmail=YES;
   signIn.delegate=self;

   } 
```

接下来`GPPSignInDelegate`在您的视图控制器中实现，您
可以获得登录用户的电子邮件 ID

```
- (void)finishedWithAuth:(GTMOAuth2Authentication *)auth
               error:(NSError *)error
 {  
  NSLog(@"Received Access Token:%@",auth);
   NSLog(@"user google user id  %@",signIn.userEmail); //logged in user's email id
  } 
```

# pyqt - 从 PIL 到 PySide QImage 的更好方法？

> ID：13302908
> 
> 赞同：3
> 
> 时间：2012-11-09T05:59:15.983
> 
> 标签：pyqt, pyqt4, python-imaging-library, pyside

我的应用程序加载图像并在其上打印一些文本。然后我想将打印的图像用作按钮图标上的标签。

问题是我无法将“图像”传递给 QIcon 或任何 PyQt 类。我在网上找到了一种方法，建议将文件作为原始字符串发送到 Qt 的解析器中，并从中重建图像。

它工作得非常好，只是图像是蓝色的。在阅读了一些关于图像处理的内容后，我了解到要修复它，我需要移动和反转所有位，所以

```
 data = im.convert('RGBA').tostring()
    data = ''.join([''.join(i) for i in zip(data[2::4],data[1::4],data[0::4],data[3::4])])
    qim = QtGui.QImage(data, im.size[0], im.size[1],
                    QtGui.QImage.Format_ARGB32)
    pix = QtGui.QPixmap.fromImage(qim) 
```

我的小加入/压缩魔术似乎有些不合时宜，我不明白为什么它是必要的。有一个更好的方法吗？我知道吐出 RGBA 并将其解析为 ARGB 存在明显的问题，但我探索了 PIL 和 PyQt 文档无济于事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T17:39:25.273

`PIL`（1.6 及更高版本）有一个模块，这使得将 an 转换为 a[`ImageQt`](http://www.pythonware.com/library/pil/handbook/imageqt.htm)非常容易，至少对于. 如果您还需要它与 PySide 一起使用，它应该是对[源代码的简单更改](http://svn.effbot.org/public/stuff/sandbox/pil/ImageQt.py)`Image``QImage``PyQt4`

# ios - 尝试在 ios 中连接 twitter 时应用程序崩溃

> ID：13302909
> 
> 赞同：0
> 
> 时间：2012-11-09T05:59:20.860
> 
> 标签：ios, twitter-oauth, sharekit

在我的 iPhone 应用程序中，我正在使用 ShareKit 实现 twitter 分享功能。当我尝试在设备中通过 twitter 分享时，应用程序崩溃了

```
- (void)connectionDidFinishLoading:(NSURLConnection *)aConnection 
```

我收到了错误消息；

```
NSInvalidArgumentException, [NSCFType tokenRequestTicket:didFinishWithData]: 
```

但它在模拟器上运行良好。而且我之前在另一个应用程序中使用了相同的代码，没有任何更改，它仍然运行良好。问题仅存在于新创建的应用程序中。

请帮忙，如果有人需要更多详细信息，请告诉我。

**更新** 这些是调用的方法

```
 - (void)tokenRequest
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"ShareStarted" object:nil];
    [[SHKActivityIndicator currentIndicator] displayActivity:SHKLocalizedString(@"Connecting...")];
    NSLog(@"Url: %@\n Token: %@ \n Consumer: %@\n Key: %@",requestURL, requestToken, consumer, consumerKey);
    OAMutableURLRequest *oRequest = [[OAMutableURLRequest alloc] initWithURL:requestURL
                                                                   consumer:consumer
                                                                      token:nil   // we don't have a Token yet
                                                                      realm:nil   // our service provider doesn't specify a realm
                                                           signatureProvider:signatureProvider];

    [oRequest setHTTPMethod:@"POST"];

    [self tokenRequestModifyRequest:oRequest];

    OAAsynchronousDataFetcher *fetcher = [OAAsynchronousDataFetcher asynchronousFetcherWithRequest:oRequest
                         delegate:self
                didFinishSelector:@selector(tokenRequestTicket:didFinishWithData:)
                  didFailSelector:@selector(tokenRequestTicket:didFailWithError:)];
    [fetcher start];    
    [oRequest release];
}

- (void)tokenRequestTicket:(OAServiceTicket *)ticket didFinishWithData:(NSData *)data 
{
    if (SHKDebugShowLogs) // check so we don't have to alloc the string with the data if we aren't logging
        SHKLog(@"tokenRequestTicket Response Body: %@", [[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease]);

    [[SHKActivityIndicator currentIndicator] hide];
    [[NSNotificationCenter defaultCenter] postNotificationName:@"SharingCancel" object:nil];
    if (ticket.didSucceed) 
    {
        NSString *responseBody = [[NSString alloc] initWithData:data
                                                       encoding:NSUTF8StringEncoding];
        OAToken *aToken = [[OAToken alloc] initWithHTTPResponseBody:responseBody];
        [responseBody release];
        self.requestToken =  aToken;
        [aToken release];       

        [self tokenAuthorize];
    }

    else
        // TODO - better error handling here
        [self tokenRequestTicket:ticket didFailWithError:[SHK error:SHKLocalizedString(@"There was a problem requesting authorization from %@", [self sharerTitle])]];
} 
```

**更新** 错误点

```
libobjc.A.dylib`objc_msgSend:
0x360a25a0:  teq.w  r0, #0
0x360a25a4:  beq    0x360a25e6                ; objc_msgSend + 70
0x360a25a6:  push.w {r3, r4}
0x360a25aa:  ldr    r4, [r0]
0x360a25ac:  lsr.w  r9, r1, #2
0x360a25b0:  ldr    r3, [r4, #8]
0x360a25b2:  add.w  r3, r3, #8
0x360a25b6:  ldr    r12, [r3, #-8]
0x360a25ba:  and.w  r9, r9, r12
0x360a25be:  ldr.w  r4, [r3, r9, lsl #2]   //here EXC_BAD_ACCESS happened
0x360a25c2:  teq.w  r4, #0
0x360a25c6:  add.w  r9, r9, #1
0x360a25ca:  beq    0x360a25e0                ; objc_msgSend + 64
0x360a25cc:  ldr.w  r12, [r4]
0x360a25d0:  teq.w  r1, r12
0x360a25d4:  bne    0x360a25b6                ; objc_msgSend + 22
0x360a25d6:  ldr.w  r12, [r4, #8]
0x360a25da:  pop.w  {r3, r4}
0x360a25de:  bx     r12
0x360a25e0:  pop.w  {r3, r4}
0x360a25e4:  b      0x360a2600                ; objc_msgSend_uncached
0x360a25e6:  mov.w  r1, #0
0x360a25ea:  bx     lr
0x360a25ec:  nop    
0x360a25ee:  nop    
0x360a25f0:  nop    
0x360a25f2:  nop    
0x360a25f4:  nop    
0x360a25f6:  nop    
0x360a25f8:  nop    
0x360a25fa:  nop    
0x360a25fc:  nop    
0x360a25fe:  nop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:37:22.197

`ShareKit`将尝试使用导航控制器堆栈到`find`您的`root view controller`，然后`pop`从`modal view controller`那里。`error`当它不能时它会抛出这个`find`。

您可以通过使用以下调用设置`correct`它：`manually``root view controller`

```
[SHK setRootViewController:myViewController]; 
```

检查[答案](https://stackoverflow.com/a/6202290/1106035)。

# actionscript-3 - 将对象的新实例添加到数组中的每个对象

> ID：13302913
> 
> 赞同：0
> 
> 时间：2012-11-09T05:59:24.910
> 
> 标签：actionscript-3, flash

我有一个影片剪辑数组，`highlights[i]`我想为每个对象添加一个矩形命中区域精灵。如何在不引起命名冲突的情况下执行此操作？

```
for (var i:int = 0; i < highLights.length; i++)
                {
                    this[i + 'Zone'] = new HitZone(highLights[i].x, highLights[i].y, highLights[i].width, highLights[i].height));
                    highLights[i].addChild(this[i + 'Zone']);
                    addChild(highLights[i]);
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:48:36.210

要设置 Sprites 或 MovieClips hitArea，您需要将指定的 sprite 分配给它的 hitArea 属性，如[在这里回答](https://stackoverflow.com/questions/7728245/as3-defining-hit-area)。

例如。`hilights[i].hitArea = this[i +"Zone"];`

您不应以数字开头命名变量，`i`. [此处命名指南](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000478.html)

你也在其他地方使用这个动态属性吗？如果不是这样使用局部变量：

```
var _oHitZone:HitZone;
var _oHilight:MovieClip;//assume that it is MovieClip
for (var i:int = 0; i < highLights.length; i++)
{
    _oHilight = hilights[i];
    _oHitZone = new HitZone(_oHilight.x, _oHilight.y, _oHilight.width, _oHilight.height));
    _oHilight.addChild(_oHitZone);
    _oHilight.hitArea = _oHitZone;
    addChild(_oHilight);
} 
```

这应该有帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T16:30:15.333

```
var hitZone:HitZone;
for (var i:int = 0; i < highLights.length; i++)
{
  hitZone = new HitZone(highLights[i].x, highLights[i].y, highLights[i].width, highLights[i].height));
  highLightsthis[i + 'Zone'] = hitZone;
  addChild(hitZone );
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T13:32:41.147

使用数组存储 HitZone。

```
var zones:Array = [];
var zone:HitZone;
for (var i:int = 0; i < highLights.length; i++)
            {
                zone = new HitZone(highLights[i].x, highLights[i].y, highLights[i].width, highLights[i].height));
                zones.push(zone); 
                highLights[i].addChild(zone);
                addChild(highLights[i]);
            } 
```

如果您不需要存储区域而不是创建数组。

# python - dir(self) 和 self.__dict__ 有什么区别

> ID：13302917
> 
> 赞同：4
> 
> 时间：2012-11-09T05:59:52.507
> 
> 标签：python, class

> **可能重复：**
> [inspect.getmembers() vs __dict__.items() vs dir()](https://stackoverflow.com/questions/6761106/inspect-getmembers-vs-dict-items-vs-dir)

```
class Base():
    def __init__(self, conf):
        self.__conf__ = conf
        for i in self.__dict__:
            print i,"dict"
        for i in dir(self):
            print i,"dir"

class Test(Base):
      a = 1
      b = 2

t = Test("conf") 
```

输出是：

```
__conf__ dict
__conf__ dir
__doc__ dir
__init__ dir
__module__ dir
a dir
b dir 
```

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T06:07:30.317

对象`__dict__`存储实例的属性。您的实例的唯一属性是`__conf__`因为它是您的`__init__()`方法中唯一的一个集合。`dir()`返回实例、其类及其父类的“有趣”属性的名称列表。这些包括`a`和`b`来自你的`Test`班级和`__init__`来自你的`Base`班级，以及 Python 自动添加的一些其他属性。

类属性存储在每个类的`__dict__`中，因此`dir()`所做的是遍历继承层次结构并从每个类中收集信息。

# app-store - 抓取mac应用商店

> ID：13302919
> 
> 赞同：0
> 
> 时间：2012-11-09T06:00:05.033
> 
> 标签：app-store, screen-scraping, web-scraping, itunes-store

我一直在想这是否可能？我知道苹果让这件事变得很困难，但这真的不可能吗？

所有应用程序都有一个 ID，您可以使用它来查找应用程序的网站 - [https://itunes.apple.com/us/app/clear/id504544917](https://itunes.apple.com/us/app/clear/id504544917) - 但我似乎无法弄清楚如何获得这些 id 的列表。有什么建议么？

所有应用程序都列在 Mac App Store（Mac 上的应用程序）中。是否有可能以某种方式从那里抓取信息？一个人会怎么做呢？

让我知道这是否完全不可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:16:18.777

苹果实际上为应用程序提供了一个 RSS 提要生成器。您可以编写一个脚本来请求提要并根据结果构建数据。可能不是您正在寻找的 100%，但似乎是一个不错的起点。它是 Apple 提供的工具，它的公开信息，所以你不应该有任何问题。

ID 在提要中。这是我从前 10 名付费商业 mac 应用程序中提取的内容：

```
<id im:id="546392952" im:bundleId="com.creaceed.mas.prizmo2"> 
```

[iTunes RSS 源](http://itunes.apple.com/us/rss)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T18:12:05.300

iTunes、App Store、iBookstore、Mac App Store 附属程序为商店中的每条内容提供元数据转储。这每周更新一次，然后每天发布增量更改。

在此处阅读有关企业合作伙伴供稿 (EPF) 的更多信息：http:
[//www.apple.com/itunes/affiliates/resources/documentation/itunes-enterprise-partner-feed.html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-enterprise-partner-feed.html)

如果你想要 Mac App Store 中的每个 adamID，这个文件就会有。

# php - InnoDB - 丢失 mysql 事务数据 - InnoDB：数据库未正常关闭

> ID：13302920
> 
> 赞同：2
> 
> 时间：2012-11-09T06:00:28.107
> 
> 标签：php, mysql, mysqli, wamp

我正在尝试在 php 和 mysql 中做一个小应用程序。

**问题：** 数据库损坏，我随机丢失数据。总是丢失的数据是事务的一部分，绝不是完整的事务，只是事务的一部分。

**关于应用程序的信息：** Wampserver 用于 Windows 7 机器上的基本设置。该机器是个人桌面。该应用程序不会在线托管，它将始终在本地服务器上运行。

这是 mysql 日志的一部分

```
121108 19:19:57 [Note] wampmysqld: ready for connections.
Version: '5.5.24-log'  socket: ''  port: 3306  MySQL Community Server (GPL)
121109 10:09:56 [Note] Plugin 'FEDERATED' is disabled.
121109 10:09:56 InnoDB: The InnoDB memory heap is disabled
121109 10:09:56 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121109 10:09:56 InnoDB: Compressed tables use zlib 1.2.3
121109 10:09:56 InnoDB: Initializing buffer pool, size = 128.0M
121109 10:09:56 InnoDB: Completed initialization of buffer pool
121109 10:09:56 InnoDB: highest supported file format is Barracuda.
InnoDB: The log sequence number in ibdata files does not match
InnoDB: the log sequence number in the ib_logfiles!
121109 10:09:56  InnoDB: Database was not shut down normally!
InnoDB: Starting crash recovery.
InnoDB: Reading tablespace information from the .ibd files...
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer...
InnoDB: Last MySQL binlog file position 0 659637, file name .\mysql-bin.000056
121109 10:09:58  InnoDB: Waiting for the background threads to start
121109 10:09:59 InnoDB: 1.1.8 started; log sequence number 6158775
121109 10:09:59 [Note] Recovering after a crash using mysql-bin
121109 10:09:59 [Note] Starting crash recovery...
121109 10:09:59 [Note] Crash recovery finished.
121109 10:09:59 [Note] Server hostname (bind-address): '(null)'; port: 3306
121109 10:09:59 [Note]   - '(null)' resolves to '::';
121109 10:09:59 [Note]   - '(null)' resolves to '0.0.0.0';
121109 10:09:59 [Note] Server socket created on IP: '0.0.0.0'.
121109 10:09:59 [Note] Event Scheduler: Loaded 0 events
121109 10:09:59 [Note] wampmysqld: ready for connections.
Version: '5.5.24-log'  socket: ''  port: 3306  MySQL Community Server (GPL) 
```

这是我正在使用的代码 - [PHP CODE](https://github.com/lazyguy/Event-management/blob/master/addParticipant.php)

请注意 ：

*   我不确定这是我的代码还是其他问题。
*   代码不好，这是我第一次写超过 2 行的 PHP。
*   需要检查的代码是从第11行到第198行
*   丢失数据的 mysql 查询位于第 176 行

任何帮助表示赞赏。

# c++ - const 静态方法修改值

> ID：13302921
> 
> 赞同：4
> 
> 时间：2012-11-09T06:00:31.410
> 
> 标签：c++, constants

我正在试验`const`关键字并试图从中获得有用的方法。

```
#include <iostream>

class A
{
  public:
  static const void modify(float& dummy)
  {
    dummy = 1.5f;
  }  
};

int main(int argc, char* argv[])
{
  auto a = 49.5f;

  A::modify(a);

  std::cout << a << std::endl; 

  return(0);
} 
```

这段代码编译并工作，输出是`1.5`，我期待编译器出错，因为我有一个 const 方法试图修改参数的值。

我在这里缺少什么？我如何设计不会修改参数值的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T06:04:36.433

1.  您声明的方法不是`const`。它返回一个`const void`（不管是什么），但它`const`本身不是一个 - 方法。

2.  如果被宣布

    ```
    void modify(float& dummy) const 
    ```

    这将是一个 const 方法，但它仍然可以修改参数的值，因为允许 const 方法执行此操作。唯一不允许做的是修改它所属的类的成员的值。

3.  请注意，为了声明一个`const`方法，我必须删除`static`规范。方法`static`永远不可能是`const`，因为静态方法无论如何都不能修改任何成员。

4.  如果要阻止函数修改其参数，则必须使参数为 const：

    ```
    static void modify(const float& dummy) 
    ```

* * *

为了说明 const 方法能做什么和不能做什么，这里有一个类，它有一个成员和一个 const 函数：

```
class A
{
  float my_member;
public:
  void modify(float& dummy) const
  {
    my_member = dummy; // attempt to modify member -> illegal
    dummy = 1.5f;      // modifies a non-const argument -> ok
  }  
}; 
```

如您所见，它不能修改成员，但可以修改其参数的值。如果你想防止这种情况，你需要提出论点`const`：

```
class A
{
  float my_member;
public:
  void modify(const float& dummy) const
  {
    my_member = dummy; // attempt to modify member -> illegal
    dummy = 1.5f;      // attempt to modify a const reference -> illegal
  }  
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:08:05.100

您误解了 'const' 在这种情况下的作用及其运作方式。

首先，在 C++ 中静态成员函数*不能*是 const。您显示的函数返回一种“const void”类型（这是否有意义以及编译器是否应该发出警告是另一个话题）。

其次，您要更改的参数不是 const。如果 'modify' 不是一个静态函数并且在函数上有一个 'const' 修饰符，dummy 仍然可以被修改：

```
void modify_nonstatic(float &dummy) const
{
    dummy = 1.5f; // perfectly fine - dummy isn't a member of
                  // the class and can be modified
} 
```

如果您希望参数为 const，请将参数设为 const：

```
static void modify(const float &dummy) 
{
    dummy = 1.5f; // fail! you can't modify a const.
}

void modify_nonstatic(const float &dummy)
{
    dummy = 1.5f; // fail! you can't modify a const.
} 
```

# xcode - 为什么 Xcode 决定不递归搜索标头，尽管构建设置说它应该

> ID：13302923
> 
> 赞同：1
> 
> 时间：2012-11-09T06:00:34.187
> 
> 标签：xcode, search-path

我的项目使用我的个人图书馆。在“标题搜索路径”中，我包含了“../WJLibrary/**”。这是我的库的正确相对路径。但是根据构建日志，它没有进行递归搜索。结果，它没有找到我需要的各种文件。

如果我开始一一添加相关子目录，它就会开始在这些特定子目录中查找文件。但这不是管理项目的方法。

对于它的价值，我有一个存档的旧版本的项目，在那个版本中，一切正常。我正在更改图书馆内的一些设置。其中一项更改一定破坏了某些东西。但是对于我的一生，我无法弄清楚是什么导致了它。

这可能是什么原因造成的？

编辑：无论问题是什么，它都不是存储库中的东西，因为更新到旧版本没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:52:49.483

如果您在构建日志中没有看到该选项，这意味着您编辑的任何设置都不会传播到最终的“已解决”值。Xcode 使用级联级别系统进行构建设置。它由以下级别组成：

iOS 默认设置 -> 项目设置 -> 目标设置 -> 最终解决设置

（更不用说 .xcconfig 文件了，但我猜你没有这些）

如果您在项目级别设置路径，则可能存在覆盖它的目标级别路径。在 Xcode 的“Build Settings”窗口中，确保您选择了“Levels”选项卡，这样您就可以看到每个级别的所有设置，最左边的一个是最终的 Resolved 值。

然后是每个配置设置，您可以在其中为 Debug 与 Release 构建设置不同的值。确保您将其设置为适合您正在运行的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:57:10.107

答案似乎是包含 .. 的递归搜索路径没有展开。我所做的修复它是创建一个符号链接：

```
ln -s ../WJLibrary WJLibrary 
```

然后我输入这个递归搜索路径：

```
WJLibrary/** 
```

在这一点上，一切正常。

# ruby-on-rails - Rails 3 中的收藏夹系统

> ID：13302929
> 
> 赞同：0
> 
> 时间：2012-11-09T06:01:09.047
> 
> 标签：ruby-on-rails, favorites

在 Rails 3 中添加收藏夹的最佳方式是什么？我只找到了这篇关于收藏系统的文章，但它是在 2009 年发布的。

[用户收藏系统](http://doblock.com/articles/creating-an-extensible-user-favorites-system-in-rails)

这是制作此类系统的最佳方法还是您可以提出更多建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:05:27.137

您指向的那个链接可以正常工作。

不过，您必须记住的是，“最佳”方式将完全取决于您的应用程序的设置方式以及您希望使用收藏夹系统完成的任务。我的建议是通读[Rails Guide for associations](http://guides.rubyonrails.org/association_basics.html)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-09T06:19:07.757

为了对这种系统进行建模，需要进行广泛的规划，这完全取决于您如何实现它...我建议您首先仔细查看 ActiveRecord::Associations、Callbacks 和 Validations，因为它们是任何应用程序中的金钱逻辑……Railscasts.com 上免费提供了许多不错的截屏视频。在 Rails 的 api 指南上阅读它们也是有益的

# c# - 替换所有元素或添加元素集合时如何避免多次触发 ObservableCollection.CollectionChanged

> ID：13302933
> 
> 赞同：50
> 
> 时间：2012-11-09T06:01:30.887
> 
> 标签：c#, silverlight, observablecollection

我有`ObservableCollection<T>`集合，我想用新的元素集合替换所有元素，我可以这样做：

```
collection.Clear(); 
```

或者：

```
collection.ClearItems(); 
```

（顺便说一句，这两种方法有什么区别？）

我也可以`foreach`一一使用`collection.Add`，但这会触发多次

添加元素集合时相同。

编辑：

我在这里找到了一个很好的库：[Enhanced ObservableCollection，能够延迟或禁用通知](http://www.codeproject.com/Articles/249311/Enhanced-ObservableCollection)，但它似乎不支持 Silverlight。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-11-09T06:34:48.110

ColinE 对他的所有信息都是正确的。我只想添加我`ObservableCollection`用于这种特定情况的子类。

```
public class SmartCollection<T> : ObservableCollection<T> {
    public SmartCollection()
        : base() {
    }

    public SmartCollection(IEnumerable<T> collection)
        : base(collection) {
    }

    public SmartCollection(List<T> list)
        : base(list) {
    }

    public void AddRange(IEnumerable<T> range) {
        foreach (var item in range) {
            Items.Add(item);
        }

        this.OnPropertyChanged(new PropertyChangedEventArgs("Count"));
        this.OnPropertyChanged(new PropertyChangedEventArgs("Item[]"));
        this.OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
    }

    public void Reset(IEnumerable<T> range) {
        this.Items.Clear();

        AddRange(range);
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-09T06:17:41.753

您可以通过子类化`ObservableCollection`和实现自己的`ReplaceAll`方法来实现这一点。此方法的实现将替换内部`Items`属性中的所有项目，然后触发一个`CollectionChanged`事件。同样，您可以添加一个`AddRange`方法。有关此的实现，请参阅此问题的答案：

[ObservableCollection 不支持 AddRange 方法，所以我会收到添加的每个项目的通知，除了 INotifyCollectionChanging 呢？](https://stackoverflow.com/questions/670577/observablecollection-doesnt-support-addrange-method-so-i-get-notified-for-each)

和之间的区别在于`Collection.Clear`，`Collection.ClearItems`它`Clear`是一个公共 API 方法，而`ClearItems`受保护，它是一个扩展点，允许您扩展/修改`Clear`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-12T04:54:56.003

这是我为其他人参考而实现的：

```
// http://stackoverflow.com/questions/13302933/how-to-avoid-firing-observablecollection-collectionchanged-multiple-times-when-r
// http://stackoverflow.com/questions/670577/observablecollection-doesnt-support-addrange-method-so-i-get-notified-for-each
public class ObservableCollectionFast<T> : ObservableCollection<T>
{
    public ObservableCollectionFast()
        : base()
    {

    }

    public ObservableCollectionFast(IEnumerable<T> collection)
        : base(collection)
    {

    }

    public ObservableCollectionFast(List<T> list)
        : base(list)
    {

    }

    public virtual void AddRange(IEnumerable<T> collection)
    {
        if (collection.IsNullOrEmpty())
            return;

        foreach (T item in collection)
        {
            this.Items.Add(item);
        }

        this.OnPropertyChanged(new PropertyChangedEventArgs("Count"));
        this.OnPropertyChanged(new PropertyChangedEventArgs("Item[]"));
        this.OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
        // Cannot use NotifyCollectionChangedAction.Add, because Constructor supports only the 'Reset' action.
    }

    public virtual void RemoveRange(IEnumerable<T> collection)
    {
        if (collection.IsNullOrEmpty())
            return;

        bool removed = false;
        foreach (T item in collection)
        {
            if (this.Items.Remove(item))
                removed = true;
        }

        if (removed)
        {
            this.OnPropertyChanged(new PropertyChangedEventArgs("Count"));
            this.OnPropertyChanged(new PropertyChangedEventArgs("Item[]"));
            this.OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
            // Cannot use NotifyCollectionChangedAction.Remove, because Constructor supports only the 'Reset' action.
        }
    }

    public virtual void Reset(T item)
    {
        this.Reset(new List<T>() { item });
    }

    public virtual void Reset(IEnumerable<T> collection)
    {
        if (collection.IsNullOrEmpty() && this.Items.IsNullOrEmpty())
            return;

        // Step 0: Check if collection is exactly same as this.Items
        if (IEnumerableUtils.Equals<T>(collection, this.Items))
            return;

        int count = this.Count;

        // Step 1: Clear the old items
        this.Items.Clear();

        // Step 2: Add new items
        if (!collection.IsNullOrEmpty())
        {
            foreach (T item in collection)
            {
                this.Items.Add(item);
            }
        }

        // Step 3: Don't forget the event
        if (this.Count != count)
            this.OnPropertyChanged(new PropertyChangedEventArgs("Count"));
        this.OnPropertyChanged(new PropertyChangedEventArgs("Item[]"));
        this.OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-08T12:07:49.157

在过去的几年里，我使用了一个更通用的解决方案来消除过多的 ObservableCollection 通知，方法是创建一个批量更改操作并使用重置操作通知观察者：

```
public class ExtendedObservableCollection<T>: ObservableCollection<T>
{
    public ExtendedObservableCollection()
    {
    }

    public ExtendedObservableCollection(IEnumerable<T> items)
        : base(items)
    {
    }

    public void Execute(Action<IList<T>> itemsAction)
    {
        itemsAction(Items);
        OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
    }
} 
```

使用它很简单：

```
var collection = new ExtendedObservableCollection<string>(new[]
{
    "Test",
    "Items",
    "Here"
});
collection.Execute(items => {
    items.RemoveAt(1);
    items.Insert(1, "Elements");
    items.Add("and there");
}); 
```

调用 Execute 将生成单个通知，但有一个缺点 - 列表将在整个 UI 中更新，而不仅仅是修改的元素。这使其非常适合 items.Clear() 后跟 items.AddRange(newItems)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-12T13:10:16.563

我还不能评论以前的答案，所以我在这里添加了对上述 SmartCollection 实现的 RemoveRange 改编，它不会抛出 C# InvalidOperationException: Collection Was Modified。它使用谓词来检查是否应该删除该项目，在我的情况下，这比创建满足删除标准的项目子集更优化。

```
public void RemoveRange(Predicate<T> remove)
{
    // iterates backwards so can remove multiple items without invalidating indexes
    for (var i = Items.Count-1; i > -1; i--) {
        if (remove(Items[i]))
            Items.RemoveAt(i);
    }

    this.OnPropertyChanged(new PropertyChangedEventArgs("Count"));
    this.OnPropertyChanged(new PropertyChangedEventArgs("Item[]"));
    this.OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
} 
```

例子：

```
LogEntries.RemoveRange(i => closeFileIndexes.Contains(i.fileIndex)); 
```

# javascript - 滚动浮动/滑动侧边栏问题

> ID：13302936
> 
> 赞同：2
> 
> 时间：2012-11-09T06:01:56.197
> 
> 标签：javascript, css

我已经浏览了这里所有与我所面临的问题相关的东西，但仍然无法修复它。

我正在尝试做的事情：

1.  当用户向上/向下滚动页面时，获取侧边栏导航浮动。
2.  使侧边栏居中停止，以便可以查看和单击所有元素。

我得到了什么：

1.  向下滚动时侧边栏跟随滚动（集中视图），但向上滚动时，当页面向上滚动太快时，侧边栏仅显示一半。
2.  向下滚动页面时，侧边栏会将页脚推到更下方，没有尽头。
3.  当页面从底部一直向上滚动时，侧边栏不会锁定回其原始位置。似乎有一点缝隙。

[**演示链接**](http://demo.blufroge.com/index.php?m=main&c=show_shopping_details_all&subCateId=2)

这是脚本（改编自慷慨的 Jordon Mears）：

```
<script type="text/javascript">
function animate_box() {  
var offset = -15; /* set this to the starting margin-top in the css */  
var element = document.getElementById('animate_box'); 

if(element) {  
    var top = Number(String(element.style.marginTop).substring(0,String(element.style.marginTop).indexOf('px')));

    try {  
        if(document.body.scrollTop > 500) {  
            var difference = (document.body.scrollTop + offset);
        } else if(document.documentElement.scrollTop > 0) {  
            var difference = (document.documentElement.scrollTop + offset);

        } else {  
            var difference = offset;  
        }  
    } catch(e) {  
        var difference = offset;  
    }  

    difference = difference - top;  

    if(difference > 200) {  
        element.style.marginTop = (top + Math.abs(Math.ceil(difference / 30))) + 'px';  
    } else if(difference < 190) {  
        element.style.marginTop = (top - Math.abs(Math.ceil(difference / 30))) + 'px';  
    }  
}  
}  
window.setInterval(animate_box, 50);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:38:35.877

我建议一种不同的方法：

*   保存元素的起始位置 (.offset().top)
*   当滚动发生时：
*   如果窗口滚动偏移量 (.scrollTop()) 大于起始位置，则将侧边栏的位置更改为“固定”与“顶部：0”
*   如果它低于起始位置，则将其更改回静态（默认位置）。

像这样的东西：

```
$(function() {
    var backup_position_toolbar = $('#sidebar').offset().top;
    $(window).scroll(function() {
        if ( $('#sidebar').offset().top - $(window).scrollTop() &lt; 0) $('#sidebar').addClass('fixed');
        if ( $(window).scrollTop() &lt; backup_position_toolbar ) $('#sidebar').removeClass('fixed');
    });
}); 
```

请注意，我使用定义如下的“固定”类： .fixed { position: fixed; 顶部：0；}

这使菜单更有用。如果您想在某个点阻止侧边栏，您可以添加更多逻辑（即当底部太靠近时）。通过这种方式，您无需设置数值（500、200 等）。

但是，如果您想要更多内容，请尝试使用“affix”进行引导（查看左侧菜单，这就是您想要的） [http://twitter.github.com/bootstrap/javascript.html#affix](http://twitter.github.com/bootstrap/javascript.html#affix)

# android - 外部库的 Proguard 错误

> ID：13302937
> 
> 赞同：1
> 
> 时间：2012-11-09T06:02:01.463
> 
> 标签：android, proguard

我在使用一些外部库时遇到了这些错误。

1.  找不到引用的类
2.  找不到超类或接口

现在，在为这些 jar 添加 - **dontwarn**之后，它成功完成了构建过程，但在**运行时**我的应用程序无法正常工作。当我通过我的应用程序登录时，我收到了**javax.net.ssl.SSLPeerUnverifiedException 。**如果没有混淆混淆，这可以很好地工作。

**这是我的 proguard.cfg 代码**

```
-injars bin/classes
-outjars bin/classes-processed.jar

-libraryjars usr/local/android-15/android.jar
-libraryjars /libs/bugsense-1.9.jar
-libraryjars /libs/Facebook.jar
-libraryjars /libs/FlurryAgent.jar
-libraryjars /libs/GoogleAdMobAdsSdk-5.0.0.jar
-libraryjars /libs/httpclient-4.0.1.jar
-libraryjars /libs/httpmime-4.0.1.jar
-libraryjars /libs/jackson-core-asl-1.7.4.jar
-libraryjars /libs/jackson-mapper-asl-1.7.4.jar
-libraryjars /libs/signpost-commonshttp4-1.2.1.1.jar
-libraryjars /libs/twitter4j-core-2.1.11.jar
-libraryjars /libs/asmack-android-5.jar
-libraryjars /libs/signpost-core-1.2.1.1.jar

-dontpreverify
-allowaccessmodification
-dontwarn android.support.**
-dontskipnonpubliclibraryclassmembers
-useuniqueclassmembernames
-repackageclasses ''

-dontwarn com.inmobi.androidsdk.**
-dontwarn com.mobclix.android.sdk.**
-dontwarn com.millennialmedia.android.**
-dontwarn com.jumptap.adtag.**
-dontwarn org.apache.**
-dontwarn com.mobclix.android.sdk.**
-dontwarn org.w3c.dom.**
-dontwarn org.joda.**
-dontwarn org.slf4j.**
-dontwarn com.google.ads.**

-dontshrink
-dontoptimize
-keepattributes *Annotation*

-keep public class * extends android.app.Activity
-keep public class * extends android.os.AsyncTask
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public interface com.android.vending.licensing.ILicensingService

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.content.Context {
   public void *(android.view.View);
   public void *(android.view.MenuItem);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keepclassmembers class **.R$* {
    public static <fields>;
} 
```

去混淆的 Logcat 报告

```
 11-10 00:51:39.893: W/System.err(1631): javax.net.ssl.SSLPeerUnverifiedException: No peer certificate
    11-10 00:51:39.893: W/System.err(1631):     at 11-14 21:18:44.491: W/System.err(13184): javax.net.ssl.SSLPeerUnverifiedException: No peer certificate
11-14 21:18:44.501: W/System.err(13184):    at org.apache.harmony.xnet.provider.jsse.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:258)
11-14 21:18:44.501: W/System.err(13184):    at org.apache.http.conn.ssl.AbstractVerifier.void verify(java.lang.String,javax.net.ssl.SSLSocket)(Unknown Source)
                                                                                       void verify(java.lang.String,java.security.cert.X509Certificate)
                                                                                       void verify(java.lang.String,java.lang.String[],java.lang.String[],boolean)
                                                                                       boolean acceptableCountryWildcard(java.lang.String)
                                                                                       java.lang.String[] getCNs(java.security.cert.X509Certificate)
                                                                                       java.lang.String[] getSubjectAlts(java.security.cert.X509Certificate,java.lang.String)
11-14 21:18:44.501: W/System.err(13184):    at org.apache.http.conn.ssl.SSLSocketFactory.javax.net.ssl.KeyManager[] createKeyManagers(java.security.KeyStore,java.lang.String)(Unknown Source)
                                                                                       javax.net.ssl.TrustManager[] createTrustManagers(java.security.KeyStore)
                                                                                       java.net.Socket createSocket()
                                                                                       java.net.Socket connectSocket(java.net.Socket,java.lang.String,int,java.net.InetAddress,int,org.apache.http.params.HttpParams)
                                                                                       boolean isSecure(java.net.Socket)
                                                                                       java.net.Socket createSocket(java.net.Socket,java.lang.String,int,boolean)
                                                                                       void setHostnameVerifier(org.apache.http.conn.ssl.X509HostnameVerifier)
11-14 21:18:44.501: W/System.err(13184):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.org.apache.http.conn.OperatedClientConnection createConnection()(Unknown Source)
                                                                                                       void openConnection(org.apache.http.conn.OperatedClientConnection,org.apache.http.HttpHost,java.net.InetAddress,org.apache.http.protocol.HttpContext,org.apache.http.params.HttpParams)
                                                                                                       void updateSecureConnection(org.apache.http.conn.OperatedClientConnection,org.apache.http.HttpHost,org.apache.http.protocol.HttpContext,org.apache.http.params.HttpParams)
                                                                                                       void prepareSocket(java.net.Socket,org.apache.http.protocol.HttpContext,org.apache.http.params.HttpParams)
11-14 21:18:44.501: W/System.err(13184):    at org.apache.http.impl.conn.AbstractPoolEntry.java.lang.Object getState()(Unknown Source)
                                                                                         void setState(java.lang.Object)
                                                                                         void open(org.apache.http.conn.routing.HttpRoute,org.apache.http.protocol.HttpContext,org.apache.http.params.HttpParams)
                                                                                         void tunnelTarget(boolean,org.apache.http.params.HttpParams)
                                                                                         void tunnelProxy(org.apache.http.HttpHost,boolean,org.apache.http.params.HttpParams)
                                                                                         void layerProtocol(org.apache.http.protocol.HttpContext,org.apache.http.params.HttpParams)
11-14 21:18:44.501: W/System.err(13184):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.void open(org.apache.http.conn.routing.HttpRoute,org.apache.http.protocol.HttpContext,org.apache.http.params.HttpParams)(Unknown Source)
                                                                                                 void tunnelTarget(boolean,org.apache.http.params.HttpParams)
                                                                                                 void tunnelProxy(org.apache.http.HttpHost,boolean,org.apache.http.params.HttpParams)
                                                                                                 void layerProtocol(org.apache.http.protocol.HttpContext,org.apache.http.params.HttpParams)
                                                                                                 void setState(java.lang.Object)
11-14 21:18:44.501: W/System.err(13184):    at org.apache.http.impl.client.DefaultRequestDirector.org.apache.http.impl.client.RequestWrapper wrapRequest(org.apache.http.HttpRequest)(Unknown Source)
                                                                                                void rewriteRequestURI(org.apache.http.impl.client.RequestWrapper,org.apache.http.conn.routing.HttpRoute)
                                                                                                org.apache.http.HttpResponse execute(org.apache.http.HttpHost,org.apache.http.HttpRequest,org.apache.http.protocol.HttpContext)
                                                                                                void releaseConnection()
                                                                                                void establishRoute(org.apache.http.conn.routing.HttpRoute,org.apache.http.protocol.HttpContext)
                                                                                                boolean createTunnelToProxy(org.apache.http.conn.routing.HttpRoute,int,org.apache.http.protocol.HttpContext)
                                                                                                org.apache.http.impl.client.RoutedRequest handleResponse(org.apache.http.impl.client.RoutedRequest,org.apache.http.HttpResponse,org.apache.http.protocol.HttpContext)
                                                                                                void processChallenges(java.util.Map,org.apache.http.auth.AuthState,org.apache.http.client.AuthenticationHandler,org.apache.http.HttpResponse,org.apache.http.protocol.HttpContext)
                                                                                                void updateAuthState(org.apache.http.auth.AuthState,org.apache.http.HttpHost,org.apache.http.client.CredentialsProvider)
11-14 21:18:44.501: W/System.err(13184):    at org.apache.http.impl.client.AbstractHttpClient.org.apache.http.HttpResponse execute(org.apache.http.client.methods.HttpUriRequest)(Unknown Source)
                                                                                            org.apache.http.HttpResponse execute(org.apache.http.client.methods.HttpUriRequest,org.apache.http.protocol.HttpContext)
                                                                                            org.apache.http.HttpResponse execute(org.apache.http.HttpHost,org.apache.http.HttpRequest)
                                                                                            org.apache.http.HttpResponse execute(org.apache.http.HttpHost,org.apache.http.HttpRequest,org.apache.http.protocol.HttpContext)
                                                                                            java.lang.Object execute(org.apache.http.client.methods.HttpUriRequest,org.apache.http.client.ResponseHandler)
                                                                                            java.lang.Object execute(org.apache.http.client.methods.HttpUriRequest,org.apache.http.client.ResponseHandler,org.apache.http.protocol.HttpContext)
                                                                                            java.lang.Object execute(org.apache.http.HttpHost,org.apache.http.HttpRequest,org.apache.http.client.ResponseHandler)
                                                                                            java.lang.Object execute(org.apache.http.HttpHost,org.apache.http.HttpRequest,org.apache.http.client.ResponseHandler,org.apache.http.protocol.HttpContext)
11-14 21:18:44.501: W/System.err(13184):    at org.apache.http.impl.client.AbstractHttpClient.org.apache.http.HttpResponse execute(org.apache.http.client.methods.HttpUriRequest)(Unknown Source)
                                                                                            org.apache.http.HttpResponse execute(org.apache.http.client.methods.HttpUriRequest,org.apache.http.protocol.HttpContext)
                                                                                            org.apache.http.HttpResponse execute(org.apache.http.HttpHost,org.apache.http.HttpRequest)
                                                                                            org.apache.http.HttpResponse execute(org.apache.http.HttpHost,org.apache.http.HttpRequest,org.apache.http.protocol.HttpContext)
                                                                                            java.lang.Object execute(org.apache.http.client.methods.HttpUriRequest,org.apache.http.client.ResponseHandler)
                                                                                            java.lang.Object execute(org.apache.http.client.methods.HttpUriRequest,org.apache.http.client.ResponseHandler,org.apache.http.protocol.HttpContext)
                                                                                            java.lang.Object execute(org.apache.http.HttpHost,org.apache.http.HttpRequest,org.apache.http.client.ResponseHandler)
                                                                                            java.lang.Object execute(org.apache.http.HttpHost,org.apache.http.HttpRequest,org.apache.http.client.ResponseHandler,org.apache.http.protocol.HttpContext)
11-14 21:18:44.501: W/System.err(13184):    at org.apache.http.impl.client.AbstractHttpClient.org.apache.http.HttpResponse execute(org.apache.http.client.methods.HttpUriRequest)(Unknown Source)
                                                                                            org.apache.http.HttpResponse execute(org.apache.http.client.methods.HttpUriRequest,org.apache.http.protocol.HttpContext)
                                                                                            org.apache.http.HttpResponse execute(org.apache.http.HttpHost,org.apache.http.HttpRequest)
                                                                                            org.apache.http.HttpResponse execute(org.apache.http.HttpHost,org.apache.http.HttpRequest,org.apache.http.protocol.HttpContext)
                                                                                            java.lang.Object execute(org.apache.http.client.methods.HttpUriRequest,org.apache.http.client.ResponseHandler)
                                                                                            java.lang.Object execute(org.apache.http.client.methods.HttpUriRequest,org.apache.http.client.ResponseHandler,org.apache.http.protocol.HttpContext)
                                                                                            java.lang.Object execute(org.apache.http.HttpHost,org.apache.http.HttpRequest,org.apache.http.client.ResponseHandler)
                                                                                            java.lang.Object execute(org.apache.http.HttpHost,org.apache.http.HttpRequest,org.apache.http.client.ResponseHandler,org.apache.http.protocol.HttpContext)
11-14 21:18:44.501: W/System.err(13184):    at org.apache.http.impl.client.AbstractHttpClient.org.apache.http.HttpResponse execute(org.apache.http.client.methods.HttpUriRequest)(Unknown Source)
                                                                                            org.apache.http.HttpResponse execute(org.apache.http.client.methods.HttpUriRequest,org.apache.http.protocol.HttpContext)
                                                                                            org.apache.http.HttpResponse execute(org.apache.http.HttpHost,org.apache.http.HttpRequest)
                                                                                            org.apache.http.HttpResponse execute(org.apache.http.HttpHost,org.apache.http.HttpRequest,org.apache.http.protocol.HttpContext)
                                                                                            java.lang.Object execute(org.apache.http.client.methods.HttpUriRequest,org.apache.http.client.ResponseHandler)
                                                                                            java.lang.Object execute(org.apache.http.client.methods.HttpUriRequest,org.apache.http.client.ResponseHandler,org.apache.http.protocol.HttpContext)
                                                                                            java.lang.Object execute(org.apache.http.HttpHost,org.apache.http.HttpRequest,org.apache.http.client.ResponseHandler)
                                                                                            java.lang.Object execute(org.apache.http.HttpHost,org.apache.http.HttpRequest,org.apache.http.client.ResponseHandler,org.apache.http.protocol.HttpContext)
11-14 21:18:44.501: W/System.err(13184):    at com.mypackage.android.services.secure.HttpsWebServiceHelper.java.lang.String doPost(org.apache.http.client.methods.HttpPost)(Unknown Source)
                                                                                                        java.lang.String doPost(java.lang.String,java.util.Map)
                                                                                                        java.lang.String doPost(java.lang.String,java.lang.String)
                                                                                                        java.lang.String doPost(java.lang.String,java.util.Map,java.lang.String)
11-14 21:18:44.501: W/System.err(13184):    at com.mypackage.android.services.secure.HttpsWebServiceHelper.java.lang.String doPost(org.apache.http.client.methods.HttpPost)(Unknown Source)
                                                                                                        java.lang.String doPost(java.lang.String,java.util.Map)
                                                                                                        java.lang.String doPost(java.lang.String,java.lang.String)
                                                                                                        java.lang.String doPost(java.lang.String,java.util.Map,java.lang.String)
11-14 21:18:44.501: W/System.err(13184):    at com.mypackage.android.activity.LoginActivity$LoginAsyncTask.java.lang.String doInBackground(java.lang.Void[])(Unknown Source)
                                                                                                        void onPostExecute(java.lang.String)
11-14 21:18:44.501: W/System.err(13184):    at com.mypackage.android.activity.LoginActivity$LoginAsyncTask.java.lang.Object doInBackground(java.lang.Object[])(Unknown Source)
11-14 21:18:44.501: W/System.err(13184):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
11-14 21:18:44.501: W/System.err(13184):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
11-14 21:18:44.501: W/System.err(13184):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
11-14 21:18:44.511: W/System.err(13184):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
11-14 21:18:44.511: W/System.err(13184):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
11-14 21:18:44.511: W/System.err(13184):    at java.lang.Thread.run(Thread.java:1027)
11-14 21:18:44.511: W/System.err(13184): java.io.IOException
11-14 21:18:44.511: W/System.err(13184):    at com.mypackage.android.services.secure.HttpsWebServiceHelper.java.lang.String doPost(org.apache.http.client.methods.HttpPost)(Unknown Source)
                                                                                                        java.lang.String doPost(java.lang.String,java.util.Map)
                                                                                                        java.lang.String doPost(java.lang.String,java.lang.String)
                                                                                                        java.lang.String doPost(java.lang.String,java.util.Map,java.lang.String)
11-14 21:18:44.511: W/System.err(13184):    at com.mypackage.android.services.secure.HttpsWebServiceHelper.java.lang.String doPost(org.apache.http.client.methods.HttpPost)(Unknown Source)
                                                                                                        java.lang.String doPost(java.lang.String,java.util.Map)
                                                                                                        java.lang.String doPost(java.lang.String,java.lang.String)
                                                                                                        java.lang.String doPost(java.lang.String,java.util.Map,java.lang.String)
11-14 21:18:44.511: W/System.err(13184):    at com.mypackage.android.activity.LoginActivity$LoginAsyncTask.java.lang.String doInBackground(java.lang.Void[])(Unknown Source)
                                                                                                        void onPostExecute(java.lang.String)
11-14 21:18:44.511: W/System.err(13184):    at com.mypackage.android.activity.LoginActivity$LoginAsyncTask.java.lang.Object doInBackground(java.lang.Object[])(Unknown Source)
11-14 21:18:44.511: W/System.err(13184):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
11-14 21:18:44.511: W/System.err(13184):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
11-14 21:18:44.511: W/System.err(13184):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
11-14 21:18:44.511: W/System.err(13184):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
11-14 21:18:44.521: W/System.err(13184):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
11-14 21:18:44.521: W/System.err(13184):    at java.lang.Thread.run(Thread.java:1027) 
```

# xml - 带有保存路径的 XML 转换

> ID：13302943
> 
> 赞同：1
> 
> 时间：2012-11-09T06:02:50.733
> 
> 标签：xml

我有以下文件 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<parent>
    <child1>
        <node>
                .... node attributes 
        </node>            
        <node>
                .... node attributes 
        </node>            
        <subchild1>
            <node>
                    .... node attributes 
            </node>            
            <subchild1>
            </child1>
            <child2>
                <node>
                .... node attributes 
                </node>            
                ....
            </child2>
.....
</parent> 
```

任意数量的节点，只有一个元素节点具有属性，所有其他元素都需要保留层次结构。

我需要将 xml 转换为：

```
<?xml version="1.0" encoding="UTF-8"?>
<parent>         
   <node>
     <path>parent\child1</path>
     .... node attributes 
   </node>            
   <node>
     <path>parent\child2</path>
     .... node attributes 
   </node>            
   <node>
     <path>parent\child1\subchild1</path>
     .... node attributes 
   </node>            
   .....
 </parent> 
```

即在列表中部署节点类型的元素，并为每个元素添加一个属性[路径]。属性显示层次结构中节点的路径。

该技术预计将用于 XSLT 2.0 版。

# iphone - iPhone哪些情况下无法获取mac地址成功？

> ID：13302946
> 
> 赞同：5
> 
> 时间：2012-11-09T06:03:13.563
> 
> 标签：iphone, ios, objective-c, xcode, mac-address

**使用以下方法并在 99.5% 的情况下工作良好，但AppStore**中很少有用户报告他们无法获取 mac 地址（我们使用**标识符**来验证每个服务器调用）。

失败案例基于 IOS 版本 5.0.1 的 iPhone 4S。

你知道在哪种情况下（除了内存不足）它会失败吗？

```
/* Original source code courtesy John from iOSDeveloperTips.com */

#include <sys/socket.h>
#include <sys/sysctl.h>
#include <net/if.h>
#include <net/if_dl.h>

- (NSString *)getMacAddress
{
    int                 mgmtInfoBase[6];
    char                *msgBuffer = NULL;
    NSString            *errorFlag = NULL;
    size_t              length;

    // Setup the management Information Base (mib)
    mgmtInfoBase[0] = CTL_NET;        // Request network subsystem
    mgmtInfoBase[1] = AF_ROUTE;       // Routing table info
    mgmtInfoBase[2] = 0;              
    mgmtInfoBase[3] = AF_LINK;        // Request link layer information
    mgmtInfoBase[4] = NET_RT_IFLIST;  // Request all configured interfaces

    // With all configured interfaces requested, get handle index
    if ((mgmtInfoBase[5] = if_nametoindex("en0")) == 0) 
        errorFlag = @"if_nametoindex failure";
    // Get the size of the data available (store in len)
    else if (sysctl(mgmtInfoBase, 6, NULL, &length, NULL, 0) < 0) 
        errorFlag = @"sysctl mgmtInfoBase failure";
    // Alloc memory based on above call
    else if ((msgBuffer = malloc(length)) == NULL)
        errorFlag = @"buffer allocation failure";
    // Get system information, store in buffer
    else if (sysctl(mgmtInfoBase, 6, msgBuffer, &length, NULL, 0) < 0)
    {
        free(msgBuffer);
        errorFlag = @"sysctl msgBuffer failure";
    }
    else
    {
        // Map msgbuffer to interface message structure
        struct if_msghdr *interfaceMsgStruct = (struct if_msghdr *) msgBuffer;

        // Map to link-level socket structure
        struct sockaddr_dl *socketStruct = (struct sockaddr_dl *) (interfaceMsgStruct + 1);

        // Copy link layer address data in socket structure to an array
        unsigned char macAddress[6];
        memcpy(&macAddress, socketStruct->sdl_data + socketStruct->sdl_nlen, 6);

        // Read from char array into a string object, into traditional Mac address format
        NSString *macAddressString = [NSString stringWithFormat:@"%02X:%02X:%02X:%02X:%02X:%02X",
                                      macAddress[0], macAddress[1], macAddress[2], macAddress[3], macAddress[4], macAddress[5]];
        NSLog(@"Mac Address: %@", macAddressString);

        // Release the buffer memory
        free(msgBuffer);

        return macAddressString;
    }

    // Error...
    NSLog(@"Error: %@", errorFlag);

    return errorFlag;
} 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T17:53:27.747

在将 iPhone 升级到 iOS 5 后，我遇到了这样的情况，问题是臭名昭著的 wifi 错误。您不会喜欢这个答案，但唯一的解决方案是将设备带回 Apple 并获得一个可以正常工作的新设备。当 mac 地址查找失败时，可以将代码更改为不会崩溃，但是当 REST 调用需要唯一标识符时，这无济于事。作为一名开发人员，你被困在一块石头和一个坚硬的地方之间。

# iphone - 将选定的数据表单行传递到 iPhone 中的下一页

> ID：13302953
> 
> 赞同：-4
> 
> 时间：2012-11-09T06:04:08.633
> 
> 标签：iphone, ios

我是 iphone 新手，我有一个 tableview。我在使用以下函数选择一行时获取所选行的数据。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

如何将此选定的数据传递到下一页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:07:58.063

在第二个视图中设置变量。当行被选中时，这意味着

> -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

被调用，将所选数据设置为该函数中的变量。

然后你可以从第二个视图操纵变量。这是提供您实例化第二个视图....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:12:21.177

属性合成字符串，数组等像这样..在`yourNextViewController.h`文件中

```
@property(nonatomic, retain) NSMutableArray *nextViewArray; 
```

并在`yourNextViewController.m`文件中像下面这样合成..

```
@synthesize nextViewArray; 
```

然后像下面这样昏倒..

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
      yourNextViewController *objNextView = [[yourNextViewController alloc]initWithNibName:@"yourNextViewController" bundle:nil];
      objNextView.nextViewArray = [[NSMutableArray alloc]init];
      objNextView.nextViewArray = [yourCurrentArray objectAtIndex:indexPath.row];
      [objNextView.nextViewArray retain];
      [self.navigationController pushViewController:objNextView animated:YES];
      [objNextView release];
} 
```

# lucene - “轮胎批量 api”完成索引数据所花费的时间比河流还多

> ID：13302958
> 
> 赞同：0
> 
> 时间：2012-11-09T06:05:22.397
> 
> 标签：lucene, elasticsearch, tire

以前我使用[jdbc River](https://github.com/jprante/elasticsearch-river-jdbc)来索引从 mysql 到 elasticsearch 的所有数据。现在我已经转移到[轮胎](https://github.com/karmi/tire)批量 api，因为它让我可以在将数据索引到 elasticsearch 之前自由地操作数据。但是与 3M 记录的 jdbc 河相比，使用轮胎批量 api 的索引过程需要大量时间（4 倍）。有没有办法让索引过程更快更高效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:33:28.953

恕我直言，关键是 JDBC 河流是在 Elasticsearch 内部启动的。所以 JDBC 请求后，数据在内存中，直接发送给 ES。

使用外部进程，您可以多出一个网络跃点。

也就是说，降低 4 倍可能太多了。

# android - 在自定义视图中实现 onclick 不起作用

> ID：13302962
> 
> 赞同：-1
> 
> 时间：2012-11-09T06:05:45.907
> 
> 标签：android, android-custom-view

我正在开发一个 Android 应用程序。在我的应用程序中，我使用的是自定义视图。现在我想在那个视图中实现 onclick。但我没有做到这一点。ontouch 工作正常。请查看我的代码并帮助我解决问题。

```
public class ImagePageCurlView extends View implements OnClickListener{

/** Our Log tag */
private final static String TAG = "PageCurlView";

// Debug text paint stuff
private Paint mTextPaint;
private TextPaint mTextPaintShadow;

/** Px / Draw call */
private int mCurlSpeed;

/** Fixed update time used to create a smooth curl animation */
private int mUpdateRate;

/** The initial offset for x and y axis movements */
private int mInitialEdgeOffset;

/** The mode we will use */
private int mCurlMode;

/** Simple curl mode. Curl target will move only in one axis. */
public static final int CURLMODE_SIMPLE = 0;

/** Dynamic curl mode. Curl target will move on both X and Y axis. */
public static final int CURLMODE_DYNAMIC = 1;

/** Enable/Disable debug mode */
private boolean bEnableDebugMode = false;

/** The context which owns us */
private WeakReference<Context> mContext;

/** Handler used to auto flip time based */
private FlipAnimationHandler mAnimationHandler;

/**
 * Maximum radius a page can be flipped, by default it's the width of the
 * view
 */
private float mFlipRadius;

/** Point used to move */
private Vector2D mMovement;

/** The finger position */
private Vector2D mFinger;

/** Movement point form the last frame */
private Vector2D mOldMovement;

/** Page curl edge */
private Paint mCurlEdgePaint;

/** Our points used to define the current clipping paths in our draw call */
private Vector2D mA, mB, mC, mD, mE, mF, mOldF, mOrigin;

/** Left and top offset to be applied when drawing */
private int mCurrentLeft, mCurrentTop;

/** If false no draw call has been done */
private boolean bViewDrawn;

/** Defines the flip direction that is currently considered */
private boolean bFlipRight;

/** If TRUE we are currently auto-flipping */
private boolean bFlipping;

/** TRUE if the user moves the pages */
private boolean bUserMoves;

/** Used to control touch input blocking */
private boolean bBlockTouchInput = false;

/** Enable input after the next draw event */
private boolean bEnableInputAfterDraw = false;

/** LAGACY The current foreground */
private Bitmap mForeground;

/** LAGACY The current background */
private Bitmap mBackground;

/** LAGACY List of pages, this is just temporal */
public ArrayList<Bitmap> mPages;
private ArrayList<Bitmap> mPages1;

/** LAGACY Current selected page */
private  static int mIndex = 0;

private static int cInt=0;

MediaPlayer mediaPlayer;

String[] example = getResources().getStringArray(R.array.example_array);

/**
 * Inner class used to represent a 2D point.
 */
private class Vector2D {
    public float x, y;

    public Vector2D(float x, float y) {
        this.x = x;
        this.y = y;
    }

    @Override
    public String toString() {
        // TODO Auto-generated method stub
        return "(" + this.x + "," + this.y + ")";
    }

    public float length() {
        return (float) Math.sqrt(x * x + y * y);
    }

    public float lengthSquared() {
        return (x * x) + (y * y);
    }

    public boolean equals(Object o) {
        if (o instanceof Vector2D) {
            Vector2D p = (Vector2D) o;
            return p.x == x && p.y == y;
        }
        return false;
    }

    public Vector2D reverse() {
        return new Vector2D(-x, -y);
    }

    public Vector2D sum(Vector2D b) {
        return new Vector2D(x + b.x, y + b.y);
    }

    public Vector2D sub(Vector2D b) {
        return new Vector2D(x - b.x, y - b.y);
    }

    public float dot(Vector2D vec) {
        return (x * vec.x) + (y * vec.y);
    }

    public float cross(Vector2D a, Vector2D b) {
        return a.cross(b);
    }

    public float cross(Vector2D vec) {
        return x * vec.y - y * vec.x;
    }

    public float distanceSquared(Vector2D other) {
        float dx = other.x - x;
        float dy = other.y - y;

        return (dx * dx) + (dy * dy);
    }

    public float distance(Vector2D other) {
        return (float) Math.sqrt(distanceSquared(other));
    }

    public float dotProduct(Vector2D other) {
        return other.x * x + other.y * y;
    }

    public Vector2D normalize() {
        float magnitude = (float) Math.sqrt(dotProduct(this));
        return new Vector2D(x / magnitude, y / magnitude);
    }

    public Vector2D mult(float scalar) {
        return new Vector2D(x * scalar, y * scalar);
    }
}

/**
 * Inner class used to make a fixed timed animation of the curl effect.
 */
class FlipAnimationHandler extends Handler {
    @Override
    public void handleMessage(Message msg) {
        ImagePageCurlView.this.FlipAnimationStep();
    }

    public void sleep(long millis) {
        this.removeMessages(0);
        sendMessageDelayed(obtainMessage(0), millis);
    }
}

/**
 * Base
 * 
 * @param context
 */
public ImagePageCurlView(Context context) {
    super(context);
    init(context);
    ResetClipEdge();
    setOnClickListener(this);
    setClickable(true);
}

/**
 * Construct the object from an XML file. Valid Attributes:
 * 
 * @see android.view.View#View(android.content.Context,
 *      android.util.AttributeSet)
 */
public ImagePageCurlView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init(context);

    // Get the data from the XML AttributeSet
    {
        TypedArray a = context.obtainStyledAttributes(attrs,
                R.styleable.PageCurlView);

        // Get data
        bEnableDebugMode = a.getBoolean(
                R.styleable.PageCurlView_enableDebugMode, bEnableDebugMode);
        mCurlSpeed = a.getInt(R.styleable.PageCurlView_curlSpeed,
                mCurlSpeed);
        mUpdateRate = a.getInt(R.styleable.PageCurlView_updateRate,
                mUpdateRate);
        mInitialEdgeOffset = a.getInt(
                R.styleable.PageCurlView_initialEdgeOffset,
                mInitialEdgeOffset);
        mCurlMode = a.getInt(R.styleable.PageCurlView_curlMode, mCurlMode);

        Log.i(TAG, "mCurlSpeed: " + mCurlSpeed);
        Log.i(TAG, "mUpdateRate: " + mUpdateRate);
        Log.i(TAG, "mInitialEdgeOffset: " + mInitialEdgeOffset);
        Log.i(TAG, "mCurlMode: " + mCurlMode);

        // recycle object (so it can be used by others)
        a.recycle();
    }

    ResetClipEdge();
}

/**
 * Initialize the view
 */
private final void init(Context context) {
    // Foreground text paint
    cInt=0;

    mTextPaint = new Paint();
    mTextPaint.setAntiAlias(true);
    mTextPaint.setTextSize(16);
    mTextPaint.setColor(0xFF000000);

    // The shadow
    mTextPaintShadow = new TextPaint();
    mTextPaintShadow.setAntiAlias(true);
    mTextPaintShadow.setTextSize(16);
    mTextPaintShadow.setColor(0x00000000);

    // Cache the context
    mContext = new WeakReference<Context>(context);

    // Base padding
    setPadding(3, 3, 3, 3);

    // The focus flags are needed
    setFocusable(true);
    setFocusableInTouchMode(true);

    mMovement = new Vector2D(0, 0);
    mFinger = new Vector2D(0, 0);
    mOldMovement = new Vector2D(0, 0);

    // Create our curl animation handler
    mAnimationHandler = new FlipAnimationHandler();

    // Create our edge paint
    mCurlEdgePaint = new Paint();
    mCurlEdgePaint.setColor(Color.WHITE);
    mCurlEdgePaint.setAntiAlias(true);
    mCurlEdgePaint.setStyle(Paint.Style.FILL);
    mCurlEdgePaint.setShadowLayer(10, -5, 5, 0x99000000);

    // Set the default props, those come from an XML :D
    mCurlSpeed = 200;
    mUpdateRate = 33;
    mInitialEdgeOffset = 20;
    mCurlMode = 1;

    // LEGACY PAGE HANDLING!

    // Create pages

    if(ListingActivity.sFlag){

        ImageActivity.tv.setText(example[ListingActivity.sPosition]);
        // Create some sample images
        mForeground = BitmapFactory.decodeResource(getResources(),
                ImageActivity.ImageIds[ListingActivity.sPosition]);//HomeActivity.mPages.get(0);
        mBackground = BitmapFactory.decodeResource(getResources(),
                ImageActivity.ImageIds[ListingActivity.sPosition+1]);//HomeActivity.mPages.get(1);

    }
    else{

        ImageActivity.tv.setText(example[0]);
        // Create some sample images
        mForeground = BitmapFactory.decodeResource(getResources(),
                ImageActivity.ImageIds[0]);//HomeActivity.mPages.get(0);
        mBackground = BitmapFactory.decodeResource(getResources(),
                ImageActivity.ImageIds[1]);//HomeActivity.mPages.get(1);

    }

}

/**
 * Reset points to it's initial clip edge state
 */
public void ResetClipEdge() {
    // Set our base movement
    mMovement.x = mInitialEdgeOffset;
    mMovement.y = mInitialEdgeOffset;
    mOldMovement.x = 0;
    mOldMovement.y = 0;

    // Now set the points
    // TODO: OK, those points MUST come from our measures and
    // the actual bounds of the view!
    mA = new Vector2D(mInitialEdgeOffset, 0);
    mB = new Vector2D(this.getWidth(), this.getHeight());
    mC = new Vector2D(this.getWidth(), 0);
    mD = new Vector2D(0, 0);
    mE = new Vector2D(0, 0);
    mF = new Vector2D(0, 0);
    mOldF = new Vector2D(0, 0);

    // The movement origin point
    mOrigin = new Vector2D(this.getWidth(), 0);
}

/**
 * Return the context which created use. Can return null if the context has
 * been erased.
 */
private Context GetContext() {
    return mContext.get();
}

/**
 * See if the current curl mode is dynamic
 * 
 * @return TRUE if the mode is CURLMODE_DYNAMIC, FALSE otherwise
 */
public boolean IsCurlModeDynamic() {
    return mCurlMode == CURLMODE_DYNAMIC;
}

/**
 * Set the curl speed.
 * 
 * @param curlSpeed
 *            - New speed in px/frame
 * @throws IllegalArgumentException
 *             if curlspeed < 1
 */
public void SetCurlSpeed(int curlSpeed) {
    if (curlSpeed < 1)
        throw new IllegalArgumentException(
                "curlSpeed must be greated than 0");
    mCurlSpeed = curlSpeed;
}

/**
 * Get the current curl speed
 * 
 * @return int - Curl speed in px/frame
 */
public int GetCurlSpeed() {
    return mCurlSpeed;
}

/**
 * Set the update rate for the curl animation
 * 
 * @param updateRate
 *            - Fixed animation update rate in fps
 * @throws IllegalArgumentException
 *             if updateRate < 1
 */
public void SetUpdateRate(int updateRate) {
    if (updateRate < 1)
        throw new IllegalArgumentException(
                "updateRate must be greated than 0");
    mUpdateRate = updateRate;
}

/**
 * Get the current animation update rate
 * 
 * @return int - Fixed animation update rate in fps
 */
public int GetUpdateRate() {
    return mUpdateRate;
}

/**
 * Set the initial pixel offset for the curl edge
 * 
 * @param initialEdgeOffset
 *            - px offset for curl edge
 * @throws IllegalArgumentException
 *             if initialEdgeOffset < 0
 */
public void SetInitialEdgeOffset(int initialEdgeOffset) {
    if (initialEdgeOffset < 0)
        throw new IllegalArgumentException(
                "initialEdgeOffset can not negative");
    mInitialEdgeOffset = initialEdgeOffset;
}

/**
 * Get the initial pixel offset for the curl edge
 * 
 * @return int - px
 */
public int GetInitialEdgeOffset() {
    return mInitialEdgeOffset;
}

public void SetCurlMode(int curlMode) {
    if (curlMode != CURLMODE_SIMPLE && curlMode != CURLMODE_DYNAMIC)
        throw new IllegalArgumentException("Invalid curlMode");
    mCurlMode = curlMode;
}

public int GetCurlMode() {
    return mCurlMode;
}

/**
 * Enable debug mode. This will draw a lot of data in the view so you can
 * track what is happening
 * 
 * @param bFlag
 *            - boolean flag
 */
public void SetEnableDebugMode(boolean bFlag) {
    bEnableDebugMode = bFlag;
}

/**
 * Check if we are currently in debug mode.
 * 
 * @return boolean - If TRUE debug mode is on, FALSE otherwise.
 */
public boolean IsDebugModeEnabled() {
    return bEnableDebugMode;
}

/**
 * @see android.view.View#measure(int, int)
 */
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int finalWidth, finalHeight;
    finalWidth = measureWidth(widthMeasureSpec);
    finalHeight = measureHeight(heightMeasureSpec);
    setMeasuredDimension(finalWidth, finalHeight);
}

/**
 * Determines the width of this view
 * 
 * @param measureSpec
 *            A measureSpec packed into an int
 * @return The width of the view, honoring constraints from measureSpec
 */
private int measureWidth(int measureSpec) {
    int result = 0;
    int specMode = MeasureSpec.getMode(measureSpec);
    int specSize = MeasureSpec.getSize(measureSpec);

    if (specMode == MeasureSpec.EXACTLY) {
        // We were told how big to be
        result = specSize;
    } else {
        // Measure the text
        result = specSize;
    }

    return result;
}

/**
 * Determines the height of this view
 * 
 * @param measureSpec
 *            A measureSpec packed into an int
 * @return The height of the view, honoring constraints from measureSpec
 */
private int measureHeight(int measureSpec) {
    int result = 0;
    int specMode = MeasureSpec.getMode(measureSpec);
    int specSize = MeasureSpec.getSize(measureSpec);

    if (specMode == MeasureSpec.EXACTLY) {
        // We were told how big to be
        result = specSize;
    } else {
        // Measure the text (beware: ascent is a negative number)
        result = specSize;
    }
    return result;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (!bBlockTouchInput) {

        // Get our finger position
        mFinger.x = event.getX();
        mFinger.y = event.getY();
        int width = getWidth();

        // Depending on the action do what we need to
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            mOldMovement.x = mFinger.x;
            mOldMovement.y = mFinger.y;

            // If we moved over the half of the display flip to next
            if (mOldMovement.x > (width >> 1)) {
                mMovement.x = mInitialEdgeOffset;
                mMovement.y = mInitialEdgeOffset;

                // Set the right movement flag
                bFlipRight = true;

            } else {
                // Set the left movement flag
                bFlipRight = false;

                // go to next previous page
                previousView();

                // Set new movement
                mMovement.x = IsCurlModeDynamic() ? width << 1 : width;
                mMovement.y = mInitialEdgeOffset;
            }

            break;
        case MotionEvent.ACTION_UP:
            bUserMoves = false;
            bFlipping = true;
            FlipAnimationStep();

            break;
        case MotionEvent.ACTION_MOVE:
            bUserMoves = true;

            // Get movement
            mMovement.x -= mFinger.x - mOldMovement.x;
            mMovement.y -= mFinger.y - mOldMovement.y;
            mMovement = CapMovement(mMovement, true);

            // Make sure the y value get's locked at a nice level
            if (mMovement.y <= 1)
                mMovement.y = 1;

            // Get movement direction
            if (mFinger.x < mOldMovement.x) {
                bFlipRight = true;
            } else {
                bFlipRight = false;
            }

            // Save old movement values
            mOldMovement.x = mFinger.x;
            mOldMovement.y = mFinger.y;

            // Force a new draw call
            DoPageCurl();
            this.invalidate();
            break;
        }

    }

    // TODO: Only consume event if we need to.
    return true;
}

private Vector2D CapMovement(Vector2D point, boolean bMaintainMoveDir) {
    // Make sure we never ever move too much
    if (point.distance(mOrigin) > mFlipRadius) {
        if (bMaintainMoveDir) {
            // Maintain the direction
            point = mOrigin.sum(point.sub(mOrigin).normalize()
                    .mult(mFlipRadius));
        } else {
            // Change direction
            if (point.x > (mOrigin.x + mFlipRadius))
                point.x = (mOrigin.x + mFlipRadius);
            else if (point.x < (mOrigin.x - mFlipRadius))
                point.x = (mOrigin.x - mFlipRadius);
            point.y = (float) (Math.sin(Math.acos(Math.abs(point.x
                    - mOrigin.x)
                    / mFlipRadius)) * mFlipRadius);
        }
    }
    return point;
}

/**
 * Execute a step of the flip animation
 */
public void FlipAnimationStep() {
    if (!bFlipping)
        return;

    int width = getWidth();

    // No input when flipping
    bBlockTouchInput = true;

    // Handle speed
    float curlSpeed = mCurlSpeed;
    if (!bFlipRight)
        curlSpeed *= -1;

    // Move us
    mMovement.x += curlSpeed;
    mMovement = CapMovement(mMovement, false);

    // Create values
    DoPageCurl();

    // Check for endings :D
    if (mA.x < 1 || mA.x > width - 1) {
        bFlipping = false;
        if (bFlipRight) {
            // SwapViews();
            nextView();
        }
        ResetClipEdge();

        // Create values
        DoPageCurl();

        // Enable touch input after the next draw event
        bEnableInputAfterDraw = true;
    } else {
        mAnimationHandler.sleep(mUpdateRate);
    }

    // Force a new draw call
    this.invalidate();
}

/**
 * Do the page curl depending on the methods we are using
 */
private void DoPageCurl() {
    if (bFlipping) {
        if (IsCurlModeDynamic())
            doDynamicCurl();
        else
            doSimpleCurl();

    } else {
        if (IsCurlModeDynamic())
            doDynamicCurl();
        else
            doSimpleCurl();
    }
}

/**
 * Do a simple page curl effect
 */
private void doSimpleCurl() {
    int width = getWidth();
    int height = getHeight();

    // Calculate point A
    mA.x = width - mMovement.x;
    mA.y = height;

    // Calculate point D
    mD.x = 0;
    mD.y = 0;
    if (mA.x > width / 2) {
        mD.x = width;
        mD.y = height - (width - mA.x) * height / mA.x;
    } else {
        mD.x = 2 * mA.x;
        mD.y = 0;
    }

    // Now calculate E and F taking into account that the line
    // AD is perpendicular to FB and EC. B and C are fixed points.
    double angle = Math
            .atan((height - mD.y) / (mD.x + mMovement.x - width));
    double _cos = Math.cos(2 * angle);
    double _sin = Math.sin(2 * angle);

    // And get F
    mF.x = (float) (width - mMovement.x + _cos * mMovement.x);
    mF.y = (float) (height - _sin * mMovement.x);

    // If the x position of A is above half of the page we are still not
    // folding the upper-right edge and so E and D are equal.
    if (mA.x > width / 2) {
        mE.x = mD.x;
        mE.y = mD.y;
    } else {
        // So get E
        mE.x = (float) (mD.x + _cos * (width - mD.x));
        mE.y = (float) -(_sin * (width - mD.x));
    }
}

/**
 * Calculate the dynamic effect, that one that follows the users finger
 */
private void doDynamicCurl() {
    int width = getWidth();
    int height = getHeight();

    // F will follow the finger, we add a small displacement
    // So that we can see the edge
    mF.x = width - mMovement.x + 0.1f;
    mF.y = height - mMovement.y + 0.1f;

    // Set min points
    if (mA.x == 0) {
        mF.x = Math.min(mF.x, mOldF.x);
        mF.y = Math.max(mF.y, mOldF.y);
    }

    // Get diffs
    float deltaX = width - mF.x;
    float deltaY = height - mF.y;

    float BH = (float) (Math.sqrt(deltaX * deltaX + deltaY * deltaY) / 2);
    double tangAlpha = deltaY / deltaX;
    double alpha = Math.atan(deltaY / deltaX);
    double _cos = Math.cos(alpha);
    double _sin = Math.sin(alpha);

    mA.x = (float) (width - (BH / _cos));
    mA.y = height;

    mD.y = (float) (height - (BH / _sin));
    mD.x = width;

    mA.x = Math.max(0, mA.x);
    if (mA.x == 0) {
        mOldF.x = mF.x;
        mOldF.y = mF.y;
    }

    // Get W
    mE.x = mD.x;
    mE.y = mD.y;

    // Correct
    if (mD.y < 0) {
        mD.x = width + (float) (tangAlpha * mD.y);
        mE.y = 0;
        mE.x = width + (float) (Math.tan(2 * alpha) * mD.y);
    }
}

/**
 * Swap between the fore and back-ground.
 */
@Deprecated
private void SwapViews() {
    Bitmap temp = mForeground;
    mForeground = mBackground;
    mBackground = temp;
}

/**
 * Swap to next view
 */
private void nextView() {

    int foreIndex = mIndex + 1;

    if (foreIndex >= ImageActivity.ImageIds.length) {
        foreIndex = 0;
    }

    ImageActivity.tv.setText(example[foreIndex]);

    int backIndex = foreIndex + 1;
    if (backIndex >= ImageActivity.ImageIds.length) {
        backIndex = 0;
    }
    mIndex = foreIndex;
    setViews(foreIndex, backIndex);
}

/**
 * Swap to previous view
 */
private void previousView() {
    int backIndex = mIndex;
    int foreIndex = backIndex - 1;
    if (foreIndex < 0) {
        foreIndex = ImageActivity.ImageIds.length - 1;
    }

    ImageActivity.tv.setText(example[foreIndex]);

    mIndex = foreIndex;
    setViews(foreIndex, backIndex);
}

/**
 * Set current fore and background
 * 
 * @param foreground
 *            - Foreground view index
 * @param background
 *            - Background view index
 */
private void setViews(int foreground, int background) {
    mForeground = BitmapFactory.decodeResource(getResources(),
            ImageActivity.ImageIds[foreground]);//HomeActivity.mPages.get(foreground);
    mBackground = BitmapFactory.decodeResource(getResources(),
            ImageActivity.ImageIds[background]);//HomeActivity.mPages.get(background);
}

// ---------------------------------------------------------------
// Drawing methods
// ---------------------------------------------------------------

@Override
protected void onDraw(Canvas canvas) {
    // Always refresh offsets
    mCurrentLeft = getLeft();
    mCurrentTop = getTop();

    // Translate the whole canvas
    // canvas.translate(mCurrentLeft, mCurrentTop);

    // We need to initialize all size data when we first draw the view
    if (!bViewDrawn) {
        bViewDrawn = true;
        onFirstDrawEvent(canvas);
    }

    canvas.drawColor(Color.WHITE);

    // Curl pages
    // DoPageCurl();

    // TODO: This just scales the views to the current
    // width and height. We should add some logic for:
    // 1) Maintain aspect ratio
    // 2) Uniform scale
    // 3) ...
    Rect rect = new Rect();
    rect.left = 0;
    rect.top = 0;
    rect.bottom = getHeight();
    rect.right = getWidth();

    // First Page render
    Paint paint = new Paint();

    // Draw our elements
    drawForeground(canvas, rect, paint);
    drawBackground(canvas, rect, paint);
    drawCurlEdge(canvas);

    // Draw any debug info once we are done
    if (bEnableDebugMode)
        drawDebug(canvas);

    // Check if we can re-enable input
    if (bEnableInputAfterDraw) {
        bBlockTouchInput = false;
        bEnableInputAfterDraw = false;
    }

    // Restore canvas
    // canvas.restore();
    this.setOnClickListener(this);
}

/**
 * Called on the first draw event of the view
 * 
 * @param canvas
 */
protected void onFirstDrawEvent(Canvas canvas) {

    mFlipRadius = getWidth();

    ResetClipEdge();
    DoPageCurl();
}

/**
 * Draw the foreground
 * 
 * @param canvas
 * @param rect
 * @param paint
 */
private void drawForeground(Canvas canvas, Rect rect, Paint paint) {
    canvas.drawBitmap(mForeground, null, rect, paint);

    // Draw the page number (first page is 1 in real life :D
    // there is no page number 0 hehe)
    drawPageNum(canvas, mIndex);
}

/**
 * Create a Path used as a mask to draw the background page
 * 
 * @return
 */
private Path createBackgroundPath() {
    Path path = new Path();
    path.moveTo(mA.x, mA.y);
    path.lineTo(mB.x, mB.y);
    path.lineTo(mC.x, mC.y);
    path.lineTo(mD.x, mD.y);
    path.lineTo(mA.x, mA.y);
    return path;
}

/**
 * Draw the background image.
 * 
 * @param canvas
 * @param rect
 * @param paint
 */
private void drawBackground(Canvas canvas, Rect rect, Paint paint) {
    Path mask = createBackgroundPath();

    // Save current canvas so we do not mess it up
    canvas.save();
    canvas.clipPath(mask);
    canvas.drawBitmap(mBackground, null, rect, paint);

    // Draw the page number (first page is 1 in real life :D
    // there is no page number 0 hehe)
    drawPageNum(canvas, mIndex);

    canvas.restore();
}

/**
 * Creates a path used to draw the curl edge in.
 * 
 * @return
 */
private Path createCurlEdgePath() {
    Path path = new Path();
    path.moveTo(mA.x, mA.y);
    path.lineTo(mD.x, mD.y);
    path.lineTo(mE.x, mE.y);
    path.lineTo(mF.x, mF.y);
    path.lineTo(mA.x, mA.y);
    return path;
}

private void drawCurlEdge(Canvas canvas) {
    Path path = createCurlEdgePath();
    canvas.drawPath(path, mCurlEdgePaint);
}

private void drawPageNum(Canvas canvas, int pageNum) {
    mTextPaint.setColor(Color.WHITE);
    String pageNumText = "- " + pageNum + " -";
    drawCentered(canvas, pageNumText,
            canvas.getHeight() - mTextPaint.getTextSize() - 5, mTextPaint,
            mTextPaintShadow);
}

public static void drawTextShadowed(Canvas canvas, String text, float x,
        float y, Paint textPain, Paint shadowPaint) {
    canvas.drawText(text, x - 1, y, shadowPaint);
    canvas.drawText(text, x, y + 1, shadowPaint);
    canvas.drawText(text, x + 1, y, shadowPaint);
    canvas.drawText(text, x, y - 1, shadowPaint);
    canvas.drawText(text, x, y, textPain);
}

public static void drawCentered(Canvas canvas, String text, float y,
        Paint textPain, Paint shadowPaint) {
    float posx = (canvas.getWidth() - textPain.measureText(text)) / 2;
    drawTextShadowed(canvas, text, posx, y, textPain, shadowPaint);
}

/**
 * Draw debug info
 * 
 * @param canvas
 */
private void drawDebug(Canvas canvas) {
    float posX = 10;
    float posY = 20;

    Paint paint = new Paint();
    paint.setStrokeWidth(5);
    paint.setStyle(Style.STROKE);

    paint.setColor(Color.BLACK);
    canvas.drawCircle(mOrigin.x, mOrigin.y, getWidth(), paint);

    paint.setStrokeWidth(3);
    paint.setColor(Color.RED);
    canvas.drawCircle(mOrigin.x, mOrigin.y, getWidth(), paint);

    paint.setStrokeWidth(5);
    paint.setColor(Color.BLACK);
    canvas.drawLine(mOrigin.x, mOrigin.y, mMovement.x, mMovement.y, paint);

    paint.setStrokeWidth(3);
    paint.setColor(Color.RED);
    canvas.drawLine(mOrigin.x, mOrigin.y, mMovement.x, mMovement.y, paint);

    posY = debugDrawPoint(canvas, "A", mA, Color.RED, posX, posY);
    posY = debugDrawPoint(canvas, "B", mB, Color.GREEN, posX, posY);
    posY = debugDrawPoint(canvas, "C", mC, Color.BLUE, posX, posY);
    posY = debugDrawPoint(canvas, "D", mD, Color.CYAN, posX, posY);
    posY = debugDrawPoint(canvas, "E", mE, Color.YELLOW, posX, posY);
    posY = debugDrawPoint(canvas, "F", mF, Color.LTGRAY, posX, posY);
    posY = debugDrawPoint(canvas, "Mov", mMovement, Color.DKGRAY, posX,
            posY);
    posY = debugDrawPoint(canvas, "Origin", mOrigin, Color.MAGENTA, posX,
            posY);
    posY = debugDrawPoint(canvas, "Finger", mFinger, Color.GREEN, posX,
            posY);

}

private float debugDrawPoint(Canvas canvas, String name, Vector2D point,
        int color, float posX, float posY) {
    return debugDrawPoint(canvas, name + " " + point.toString(), point.x,
            point.y, color, posX, posY);
}

private float debugDrawPoint(Canvas canvas, String name, float X, float Y,
        int color, float posX, float posY) {
    mTextPaint.setColor(color);
    drawTextShadowed(canvas, name, posX, posY, mTextPaint, mTextPaintShadow);
    Paint paint = new Paint();
    paint.setStrokeWidth(5);
    paint.setColor(color);
    canvas.drawPoint(X, Y, paint);
    return posY + 15;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

    System.out.println("testing click");

}

} 
```

它现在工作当我在每个块中添加 onclicklistener 并在 ontouchevent 中将 return true 更改为 false 时。但是现在 ontouch 不起作用，因为我更改了它的返回类型。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:13:46.687

该方法`onTouchEvent`在[视图](http://developer.android.com/reference/android/view/View.html)中定义，您只是覆盖它。你`setOnTouchListener(this);`与它无关。

添加所有构造函数`setOnClickListener(this);`，你应该很高兴。

# ruby-on-rails - 测量多线程环境中线程的执行时间

> ID：13302963
> 
> 赞同：3
> 
> 时间：2012-11-09T06:05:49.757
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, multithreading

在 Ruby/Rails 中是否可以在多线程环境中测量单个线程的实际执行时间？

我一次最多创建 10 个线程，并且我目前正在计算每个线程的经过时间，但是由于多个线程共享处理器，因此它们共享资源时会存在间隙。所以我的时间将比实际时间更多。

```
@urls.each do |url|
  Thread.new do
    time = Time.now
    request = http.get(url)
    response_time = Time.now - time
  end
  ...
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T06:13:56.237

[wycats](http://yehudakatz.com/)制作了一个很酷的 gem，叫做[ruby](http://rubydoc.info/github/wycats/ruby-prof) ​​-prof ，它应该可以帮助你。它支持同时分析多个线程，包括进程时间、cpu 时间和 wall 时间。

# android - 使用 Android 设备连接到 Web 服务

> ID：13302977
> 
> 赞同：0
> 
> 时间：2012-11-09T06:07:09.647
> 
> 标签：android, web-services, c#-4.0, android-wifi

我在 Visual Studio 中使用 C# 创建 Web 服务。使用 Android Emulator 它可以在本地主机环境中调用 Web 方法，

所以现在我尝试在真正的 Android 设备中安装我的应用程序，并希望使用 Wi-Fi（或其他方式）在本地主机环境中调用 Web 服务，而不是在 Internet Web 主机中托管服务。我还托管使用 IIS 在我的本地主机中服务。

这是可以做的吗？或者我想改变我在本地主机中调用 Web 服务的方式，在这种情况下，我用户使用 Wi-Fi 连接 Web 服务

```
 // send login request to the webservice

    String SOAP_ACTION_LOGIN = "http://tempuri.org/AuthenticateUser";
    String METHOD_NAME_LOGIN = "AuthenticateUser";
    String URL_LOGIN = "http://10.0.2.2:100/Service1.asmx?op=AuthenticateUser"; 
```

# android - 用于二维码生成的 Android Zxing 库

> ID：13302978
> 
> 赞同：1
> 
> 时间：2012-11-09T06:07:15.293
> 
> 标签：android, zxing

我想在我的应用程序中生成文本的二维码，我必须使用 zxing 库，但我不知道要实现它。我该如何实施？任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T05:37:53.437

```
 QRCodeWriter writer = new QRCodeWriter();
        try
        {
            EnumMap<EncodeHintType, Object> hint = new EnumMap<EncodeHintType, Object>(EncodeHintType.class);
            hint.put(EncodeHintType.CHARACTER_SET, "UTF-8");
            BitMatrix bitMatrix = writer.encode(content, BarcodeFormat.QR_CODE, dimention, dimention, hint);
            int width = bitMatrix.getWidth();
            int height = bitMatrix.getHeight();
            int[] pixels = new int[width * height];
            for (int y = 0; y < height; y++)
            {
                int offset = y * width;
                for (int x = 0; x < width; x++)
                {
                    // pixels[offset + x] = bitMatrix.get(x, y) ? 0xFF000000
                    // : 0xFFFFFFFF;
                    pixels[offset + x] = bitMatrix.get(x, y) ? colorBack : colorFront;
                }
            }

            Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
            bitmap.setPixels(pixels, 0, width, 0, 0, width, height);
            return bitmap; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T21:56:34.333

您需要将`core.jar`ZXing 最新版本中的文件添加到您的项目中。您还需要向项目中添加另外两个类。

这是有关如何执行此操作[的分步指南。](https://stackoverflow.com/a/15510698/1181911)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T06:22:32.147

```
below code can help you to generate qr code 

Intent intent = new Intent();
intent.setAction(Intents.Encode.ACTION);
intent.putExtra(Intents.Encode.FORMAT, BarcodeFormat.QR_CODE.toString());
intent.putExtra(Intents.Encode.TYPE, Contents.Type.TEXT);
intent.putExtra(Intents.Encode.DATA, codeString);
QRCodeEncoder qrcode = new QRCodeEncoder(YourActivity.this, intent,250);

try {
Bitmap bitmap = qrcode.encodeAsBitmap();
imgBarcode = (ImageView) findViewById(R.id.imgbarcode);
imgBarcode.setImageBitmap(bitmap);

} catch (WriterException e) {
e.printStackTrace();
} 
```

# java - 如何使用 Spring 配置将文本文件内容设置为 bean 属性

> ID：13302979
> 
> 赞同：0
> 
> 时间：2012-11-09T06:07:16.013
> 
> 标签：java, spring

我有一个包含数据的文本文件。我想将此数据设置为 String 实例变量。

我知道我可以使用 Java I/O 来做到这一点，读取文件并将其内容设置为 String 变量。

但是有没有一种简单的方法来使用 Spring 配置文件初始化字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:34:30.977

尝试使用带有此 xml 标签的属性文件：

```
<bean id="placeholderConfig"
class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location" value="classpath:YourFile.properties" />
    </bean> 
```

并将值用作 ${your_key}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:48:46.827

是的，您可以使用`Resource`然后在资源上使用 getFile() 来做到这一点。检查[此](http://static.springsource.org/spring/docs/2.5.x/reference/resources.html)春季文档。[这里](http://aredko.blogspot.com/2010/10/injecting-file-dependency-into-spring.html)有更好的例子。

# regex - RegExp：拆分字符串字母数字/数字

> ID：13302980
> 
> 赞同：3
> 
> 时间：2012-11-09T06:07:22.517
> 
> 标签：regex, postgresql, split

你能帮我在每次从字母数字更改为数字后拆分一个字符串（或者如果可能的话，最好在每个“拆分”场合放置一个空白），反之亦然？

所以一个像这样的字符串`D2c1 22`应该是这样的`D 2 c 1 22`。最好的方法是在从字母数字到数字的每次更改处留一个空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T06:14:30.200

您可以使用此正则表达式来查找它切换的位置：

```
(?<=\d)(?=\D)|(?<=\D)(?=\d) 
```

这边走：

```
"234kjh23ljkgh34klj2345klj".gsub(/(?<=\d)(?=\D)|(?<=\D)(?=\d)/, " ")
=> "234 kjh 23 ljkgh 34 klj 2345 klj" 
```

**编辑：**没有零长度向前看，向后看：

```
"234kjh23ljkgh34klj2345klj".gsub(/(\d)(\D)/, "#{$1} #{$2}").gsub(/(\D)(\d)/, "#{$2} #{$1}")
=> "23 jk 5 jkgk 5 lk 534 lj" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T06:35:22.403

这是一种使用 PostgreSQL 测试并验证可以工作的方法。这有点折磨，所以表演可能......很有趣。

```
CREATE AGGREGATE array_cat_agg (
  BASETYPE = anyarray,
  SFUNC = array_cat,
  STYPE = anyarray
);
SELECT array_to_string(array_cat_agg(a), ' ')
FROM regexp_matches('234kjh23ljkgh34klj2345klj', '(\D*)(\d*)', 'g') x(a); 
```

我们需要`array_cat_agg`因为常规`array_agg`不能聚合数组的数组。

或者，@davidrac 的一种方法可以与 PostgreSQL 一起使用，并且可能表现得更好（尽管我还没有测试过）：

```
SELECT regexp_replace(
  regexp_replace(
     '234kjh23ljkgh34klj2345klj', '(\d)(\D)', '\1 \2', 'g'
  ), '(\D)(\d)', '\1 \2', 'g'); 
```

这是在两遍中执行替换。首先，它在一系列数字结束和一系列非数字开始的地方插入一个空格。然后在另一遍中，它在非数字系列结束和数字系列开始的地方插入空格。

**更新**：这是一个改进的公式：

```
SELECT trim(regexp_replace('234kjh23ljkgh34klj2345klj', '(?!\d)(\D+)|(?!\D)(\d+)', '\1\2 ', 'g')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T06:15:41.777

> 最好的方法是在从字母数字到数字的每次更改处留一个空白。

不难做到：

```
$ echo "D2c1 22" | sed 's|\([a-ZA-Z]\)\([0-9]\)|\1 \2|g;s|\([0-9]\)\([a-ZA-Z]\)|\1 \2|g'
D 2 c 1 22 
```

在这里我使用`sed`了它的正则表达式，因为你没有提到你使用哪种语言。主要思想是使用 2 正则表达式，它将 alpha 替换为 digit 和 digit 用 alpha 替换为第一个字符、空格和第二个字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T06:17:14.580

您可以使用正则表达式匹配

```
(?<=[a-z])(?=[0-9])|(?<=[0-9])(?=[a-z]) 
```

并用空格替换它。

[**在 Perl 中查看**](http://ideone.com/Gq61FQ)

# fullscreen - 如何为 xcb 提供 _NET_WM_STATE_FULLSCREEN 提示？

> ID：13302982
> 
> 赞同：5
> 
> 时间：2012-11-09T06:07:30.333
> 
> 标签：fullscreen, xcb, ewmh

我正在尝试使用 xcb 编写一个全屏应用程序来进行我自己的教育，但我遇到了上述问题。我发现了一些使用 Xlib 执行此操作的代码，但没有使用 xcb。我已经找到了`xcb_ewmh_connection_t`结构，我暂时这样使用它：

```
xcb_connection_t *Connection = xcb_connect(NULL, NULL);
xcb_ewmh_connection_t EWMH;
xcb_intern_atom_cookie_t *EWMHCookie = xcb_ewmh_init_atoms(Connection, &EWMH); 
```

然后使用结构内部的原子`EWMH._NET_WM_STATE`等。

鉴于这个小背景，我如何才能暗示窗口管理器窗口应该是全屏的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T04:52:16.060

检查`xcb_ewmh.h`，在我看来你也需要打电话

```
if(!xcb_ewmh_init_atoms_replies(&EWMH, EWMHCookie, NULL))
    /* handle errors */; 
```

完成此操作后，[`_NET_WM_STATE`](http://standards.freedesktop.org/wm-spec/wm-spec-latest.html#id2578152)文档应该会帮助您了解如何使用此特定属性。

有关使用属性与窗口管理器通信的这种技术的背景信息，请参阅[客户端属性的](http://tronche.com/gui/x/icccm/sec-4.html#s-4.1.2)[ICCCM](http://tronche.com/gui/x/icccm/)部分。

有关如何设置属性的一般信息，请参阅[ChangeProperty请求。](http://www.x.org/releases/X11R7.7/doc/xproto/x11protocol.html#requests%3aChangeProperty)`xcb_change_property`这通过通常的[协议存根规则](http://xcb.freedesktop.org/ProtocolStubApi/)映射到函数。

我希望这足以让你继续前进！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-18T16:49:26.850

我不确定，是否`xcb_change_property`是规范所述的正确方法：

> 希望更改窗口状态的客户端必须向根窗口发送 _NET_WM_STATE 客户端消息。

到目前为止，我还没有看到任何 WM 如果您使用 设置它会忽略它`xcb_change_property`。不过，它可能不适用于其他 WM。

* * *

> [...] 必须发送 [...] 客户端消息

将转换为以下代码：

```
xcb_client_message_event_t  payload = 
{
    .response_type  = XCB_CLIENT_MESSAGE,
    .type           = atoms._NET_WM_STATE,
    .format         = 32,
    .window         = window_handle,
    .data           =
    {
        .data32[0]  = fullscreen
            ? atoms._NET_WM_STATE_ADD
            : atoms._NET_WM_STATE_REMOVE,
        .data32[1]  = atoms._NET_WM_STATE_FULLSCREEN,
        .data32[2]  = XCB_ATOM_NONE
    }
};

xcb_send_event(
    conn,
    1,
    window_handle,
    XCB_EVENT_MASK_SUBSTRUCTURE_REDIRECT
    | XCB_EVENT_MASK_SUBSTRUCTURE_NOTIFY,
    (const char*) &payload
);

xcb_flush(conn); 
```

* * *

`atoms`只是我在查询原子值后存储原子的结构。

# android - 没有标题的自定义对话框弄乱了我的布局

> ID：13302984
> 
> 赞同：2
> 
> 时间：2012-11-09T06:07:38.783
> 
> 标签：android, android-layout, android-dialog

我正在尝试创建一个没有标题栏的自定义对话框，并且我通过执行以下操作来遵循 SO 建议

```
propDiag = new Dialog(this);
propDiag.requestWindowFeature(Window.FEATURE_NO_TITLE);
propDiag.setContentView(R.layout.property_daig); 
```

这是我的 xml 的一部分

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:background="@drawable/background"
        android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:orientation= "horizontal">
        <LinearLayout android:layout_width="wrap_content"
            android:layout_height="fill_parent" android:orientation= "vertical" android:layout_weight="1" >

                   //COUPLE OF buttons

        </LinearLayout>
        <View android:layout_width="0dp" android:layout_height="wrap_content" android:layout_weight="0.5" ></View>
        <LinearLayout android:layout_width="wrap_content"
            android:layout_height="fill_parent" android:orientation= "vertical"  android:layout_weight="1"  >
                       //COUPLE OF buttons
            </LinearLayout>
    </LinearLayout> 
```

它弄乱了我的布局并且一切都被推到最大左右的问题

当我在没有 requestWindowFeature 的情况下执行此操作时，除了出现标题之外，一切都很好！

任何人都可以解释并推荐解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T07:31:33.880

见下面的代码：

我没有你的背景图片，只是放了图标图片并执行了下面的代码。

还附上了输出的屏幕截图。

代码：

```
 Button test = (Button) findViewById(R.id.button1);

    test.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
             final Dialog dialog = new Dialog(MainActivity.this);
             dialog.getWindow();
             dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
             dialog.setContentView(R.layout.property_daig);

             dialog.show();

        }

    }); 
```

**输出：**

![在此处输入图像描述](../Images/5eacc860c78f87e812b0e83820709982.png)

希望它会帮助你。

享受编码。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:14:57.737

```
Try this    

            final Dialog dialog = new Dialog(context);
                    dialog.getWindow();
                    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
                    dialog.setContentView(R.layout.custom_dialog);

                    TextView customText = (TextView)dialog.findViewById(R.id.customDialogTitletext);
                    customText.setText(text);
                    customText.setTypeface(tf);
                    Button btnOk = (Button) dialog.findViewById(R.id.buttonOk);
                    btnOk.setOnClickListener(new OnClickListener() {
                        @Override
                        public void onClick(View arg0) {
                            dialog.dismiss();
                        }
                    });
                    dialog.show();

                } 
```

让我知道您的问题是否已解决。

# matlab - 从 MATLAB 低性能调用内核

> ID：13302987
> 
> 赞同：3
> 
> 时间：2012-11-09T06:07:59.780
> 
> 标签：matlab, cuda, gpu

我从我的 MATLAB 实现中调用了一个 CUDA 内核；但是我的 CPU 结果比我的 GPU 实现要快。我知道更大的矩阵可以获得更好的性能，但是当我也尝试使用大尺寸时，我会得到较低的 GPU 性能。

结果是： CPU：0.000006 GPU：0.00134 我的内核和 MATLAB 代码如下：

提前致谢！

```
matrix.cu

__global__ void matrix_mult2(double *A, double *B, double * C) {
   int x =  threadIdx.x;

C[x] = A[x] * B[x];

}

main.m
kernel = parallel.gpu.CUDAKernel( 'matrix_mult2.ptx', ...
                              'matrix_mult2.cu' );

kernel.ThreadBlockSize = [25,1,1];
kernel.GridSize = [1,1];

A = parallel.gpu.GPUArray.rand(5,5,'double');
B = parallel.gpu.GPUArray.rand(5,5,'double');
C = parallel.gpu.GPUArray.zeros(5,5);

C = feval(kernel,A,B,C); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:16:01.087

You need to give the GPU some real work to do. In your current example, the only time-consuming operations are copying the data to the GPU and back. As the CPU doesn't have to perform these steps, it has an obvious advantage here. Try e.g. a real matrix multiplication of large matrices (not an element wise multiplication).

In slightly more formal terms, your kernel is PCIe bandwidth bound. To amortize the time spent copying *N* elements forth and back, you need to do some operations that are a lot more expensive than the data copying. Elementwise multiplication is cheap and scales linearly with *N*. Multiplication of *N×N*-matrices scales with *N*³ while the data transfer only scales with *N*², so for large enough matrices matrix multiplication on the GPU will be faster than on the CPU.

# php - 成功功能在 Ext JS 表单提交中不起作用

> ID：13302989
> 
> 赞同：0
> 
> 时间：2012-11-09T06:08:22.873
> 
> 标签：php, extjs

我正在我的 PHP 代码中下载一个 CSV 文件，但它没有返回到我的 Ext JS 页面。我的代码如下：

**外部 JS 代码**

```
Ext.getCmp('btnExport').on('click', function(button, event)    
{       
    Ext.getCmp("frmReportQuotes").getForm().standardSubmit = true;      
    Ext.getCmp('frmReportQuotes').getEl().dom.method = 'POST';      
    Ext.getCmp('frmReportQuotes').getEl().dom.target = '_blank';        
    Ext.getCmp('frmReportQuotes').getForm().submit({        
        params: {       
            output: 'csv'    
        },    
        success: function(form, action){        
            alert('jjkjlkj');           
        },    
        failure: function(form, action){    
            alert('jjkjlkj');           
        }    
    });    
}); 
```

**PHP 代码**

```
if (!empty($strOutputType) && $strOutputType == 'csv')    
{       
    header("Content-type: text/csv");       
    header("Content-Disposition: attachment; filename=data.csv");       
    header("Pragma: no-cache");     
    header("Expires: 0");

    if (!empty($entRequestList))    
    {
        $arrKeys = array();

        foreach ($this->view->Data[0] as $key => $value)    
            $arrKeys[] = $key;

        echo '"' . implode('","', $arrKeys) . '"' . "\n";           

        foreach ($this->view->Data as $entRow)
        {
            $strCSV = '"' . implode('","', $entRow) . '"';
            $strCSV = preg_replace("[\n\r]", " ", $strCSV);
            echo $strCSV . "\n";
        }
    }

    die();
} 
```

请帮忙，以便它返回到我的 Ext JS 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:22:28.777

问题是，如果您返回一个 CSV 文件附件，您不能期望它被 ajax 请求处理程序处理，所以不要期望您的成功函数能够运行。

同样来自文档：

```
standardSubmit : Boolean 
```

> 如果设置为 true，则使用标准 HTML 表单提交而不是 XHR (Ajax) 样式的表单提交。

这意味着不会进行任何 js 回调。

# android - 从应用程序保存图像

> ID：13302990
> 
> 赞同：0
> 
> 时间：2012-11-09T06:08:22.810
> 
> 标签：android, camera

在我的应用程序中，我必须使用相机拍摄图像并保存。是否可以将这些图像保存到数据库，因为它应该是安全的。或者有什么方法可以以其他应用程序无法查看的方式将图像保存在 sd 卡中，请提前提供一些建议和感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T06:15:22.050

您可以将其保存到数据库中，但不建议这样做，因为 SQL Lite 数据库并非用于此目的。

最好将图像保存到应用程序的缓存目录中，这样除非设备已root，否则其他应用程序无法访问它。

您可以使用 ：

```
context.getCacheDir() 
```

获取缓存目录的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:12:17.607

使用相机并保存图像是通过这个[http://code.google.com/p/crw-cmu/source/browse/luis/PhotoIntentActivity/src/com/example/android/photobyintent/PhotoIntentActivity.java?r= 734](http://code.google.com/p/crw-cmu/source/browse/luis/PhotoIntentActivity/src/com/example/android/photobyintent/PhotoIntentActivity.java?r=734)

它将从相机中获取图像并将其保存到 SD 卡中。如果您的图像尺寸很大，我会建议这种方式，否则您可以将其保存在数据库中。此外，如果您不想被其他应用程序查看，请将图像保存在应用程序的数据文件夹中，以便只有您的应用程序可以访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:19:45.930

如果您正在考虑将图像保存到数据库，那么您也可以将其保存到内部存储器并将其路径保存在数据库中。请注意，如果手机已植根，则任何应用程序都可以访问您应用程序的内部存储区域。

除非您对它们进行加密，否则无法保护 SD 卡上的文件不受其他应用程序的影响。在这种情况下，您需要嵌入安全密钥（显然），如果有人对您的应用程序进行逆向工程，那么加密就会受到损害。

简而言之 - 在有根手机上没有什么是安全的，并且不能保证 SD 卡上的数据安全。

# node.js - 更新 npm 包的自述文件时出现版本问题？

> ID：13302995
> 
> 赞同：34
> 
> 时间：2012-11-09T06:09:10.013
> 
> 标签：node.js, npm

如果我为我维护的一个 npm 包修改了我的自述文件，我是否需要在 package.json 中修改版本并再做一次 npm 发布？还是有另一种方法来更新自述文件而不会出现版本问题。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-13T21:29:52.157

根据您对“需要”的定义，这可能是两个非常不同的问题：

1.  [不碰版本号就可以发布自述文件更改吗？]

2.  [技术上是否可以在不增加版本的情况下发布更改]

接受的答案（通过 更新`npm publish --force`，即不增加版本号的任何部分）是 Q2 的一个很好的答案。但我想谈谈 Q1。

`npm publish --force`不鼓励使用。相反，鼓励作者使用[语义版本控制又名 semver](http://semver.org/)，它规定：

> ... XYZ 的版本格式（Major.Minor.Patch）。不影响 API 的错误修复会增加补丁版本，向后兼容的 API 添加/更改会增加次要版本，而向后不兼容的 API 更改会增加主要版本。

所以我的回答是：虽然从技术上讲，有一种方法可以在没有版本冲突的情况下发布更改，但您不应该这样做。对于不影响包 API 的小修改，您应该升级“补丁”版本，例如从 1.2.0 到 1.2.1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:27:34.870

`npm publish --force`如果注册表中已经存在版本号，将覆盖。

[https://npmjs.org/doc/publish.html](https://npmjs.org/doc/publish.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-10T11:43:17.580

# 你能做的最好的事情是：

发布新的次要版本：

```
npm publish [@<scope>/]<name>[@<your new minor version>] 
```

请在此处详细查看讨论：http: [//blog.npmjs.org/post/77758351673/no-more-npm-publish-f](http://blog.npmjs.org/post/77758351673/no-more-npm-publish-f)

* * *

### 以下是不鼓励的（！），不应该是你的第一选择

*执行此操作时要小心，在您取消发布一个包后，它不会让您重新发布它，直到 24 小时过去。*

您可以取消发布包，将该版本留空（但请在执行此操作之前了解其含义）：`npm unpublish [@<scope>/]<name>[@<version>]`

注意：该`--force`参数已弃用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-18T01:39:54.663

对于那些登陆这里并认为他们做得对的人。是的，你做对了；`npm`在 5-10 分钟内检查您的页面。

# magento-1.7 - Magento 通过 Store id 获取管理控制器中的所有产品集合

> ID：13302996
> 
> 赞同：2
> 
> 时间：2012-11-09T06:09:14.917
> 
> 标签：magento-1.7, magento

我已经在加拿大和澳大利亚的 magento admin 中添加了 2 家商店现在我想获得商店明智的产品集合目前正在使用
mangeto **admin 控制器获取产品集合**

```
$collection = Mage::getModel('catalog/product')->getCollection(); 
```

使用这个我得到了我尝试过的所有产品

```
$collection->setStoreId(2); // here 2 is the store id 
```

但运气不太好:(我错过了什么吗？我扩展了 Mage_Adminhtml_Controller_Action 类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:27:52.303

**获取活动商店 ID**：-`$storeId =Mage::app()->getStore()->getStoreId();`

你可以使用下面的代码可能会帮助你

```
$collection->setStoreId($storeId)

$collection->addStoreFilter($storeId) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T06:46:02.857

请试试这个 -

**过滤当前商店产品 -**

```
$collection = Mage::getResourceModel('catalog/product_collection');

$collection->addStoreFilter(); 
```

有关更多信息，请关注此 - [Magento 中的产品集合](http://magentostriker.blogspot.in/2012/04/product-collection.html)

-

谢谢

# java - 对象作为文字的父级

> ID：13302998
> 
> 赞同：1
> 
> 时间：2012-11-09T06:09:43.600
> 
> 标签：java

我正在为我的应用程序构建一个帮助系统。帮助系统由带有工具栏树和浏览器窗格的外壳组成。树将文件加载到节点中，单击该链接时会在浏览器中打开一个 HTML 文件。当单击工具栏上的按钮时，调用 text = browser.getText() 并通过缓冲区将文本加载到 HTML 标签剥离器，该标签剥离器被收集在三个数组中，然后解析给 styledtext 编辑器的样式创建器。

*   缓冲区集成在标签阅读器类中，我想创建一个全局类以在应用程序中的任何地方需要时使用它，但在解析到 buffer.class 时遇到常量字符字符串等问题
*   该数组由三个数组组成，其中填充了阅读器找到的标签，我希望 add 方法在全局范围内工作，以便在需要的应用程序中使用它。

*   我可以使用 List list = new ArrayList(); 但为了便于开销和更好的理解，我尝试只使用数组。

    ```
    public class XMLHtmlTagReader {
     private static  char startchar = '<';
     private static  char endchar= '>';
     private static  char[] closingchar ={'<','/'};
     private static  String startTag;
     private static  String endTag;
     private static  String tagValue;
     static String[] starttaglist = new String[]{"first","second","third","fourth"};
     static String[]tagvaluelist;// = new String[1];
     static String[] endtaglist;// = new String[1];
     int tagcount=0;
     static char newchar;
     static char newchar1;
     static int i=0;
     static int startcharint = -1;
     static int endcharint = -1; 
     static int closingcharint = -1;
     static int level=0;
     static int elm=0;
     boolean closing = false;
     static Object store[] = new Object[26];
     Object[][][] megastore = new Object[50][50][50];
     int storeCounter = 0;
     int count=-1;
     int Wmstore=0,WstoreCounter=0,Wv=0;
     int Rmstore=0;
     static int RstoreCounter=0;
     static int Rv=0;
     static int Rtmp;
     int Omstore=0;
     static int OstoreCounter=0;
     static int Ov=0;
     int mstore=0;
     long time =   3087;

    public static void main(String[] args) {
         XMLHtmlTagReader run=new XMLHtmlTagReader();
     }

     XMLHtmlTagReader(){
         long memstart = (Runtime.getRuntime().totalMemory()-       Runtime.getRuntime().freeMemory());
     System.out.println("Memory at start:"+memstart);
     long startTime = System.nanoTime();
     getStream("<html><title>hallo de titel ...</title><p>Dit is de text.</p><b>dikke text</b></html>");
     //for(int t=0;t<100000;t++){new com.pim.Buffer(endchar);}
     long estimatedTime = (System.nanoTime() - startTime);  
         //(System.currentTimeMillis() - startTime);
         //(System.nanoTime() - startTime)/1000000;
         //long calc = (estimatedTime/time)*100;
     System.out.println(memstart+"memstart  "+"execution time = "+estimatedTime+" is % sneller/langzamer  = "+(estimatedTime/time)*100+"Memory = "+(Runtime.getRuntime().totalMemory()-Runtime.getRuntime().freeMemory()));
    bufferWrite('E');
     }

    public static String getStream(String input) {

         while(input != null){
                            i++;
                try {
                    newchar = input.charAt(i);
                    }
                catch (java.lang.StringIndexOutOfBoundsException exception){
                    break;
                    }
                if(newchar!=closingchar[1]&&input.charAt(i-1)==startchar){
                    startcharint=i;
                            level++;
                }
                if(newchar==closingchar[1]&&input.charAt(i-1)==startchar) {
                    closingcharint=i;
                    tagValue = input.substring(endcharint+1,closingcharint-1);
                    if(tagValue!=null){log("valuetag ["+tagValue+"]->"+endcharint+" ->"+closingcharint);}
                }
                 if(newchar==endchar)  {
                                            endcharint=i;
                                            if(startcharint>=0){
                                                startTag = input.substring(startcharint-1,endcharint+1);
                                                    log("starttag "+startTag);
                                            }
                                            else {startTag=" no Start tag found "; }
                                            if(closingcharint>0){
                                                endTag = input.substring(closingcharint-1,endcharint+1);
                                                level--;
                                                    log("endtag->"+endTag);
                                                    log("level->"+level);
                                            }
                                            else {  endTag=" no end tag found "; }
                                            closingcharint=0;
                                            startcharint=-1;
                                        }   
                    }
        startchar = 0;
        endchar = 0;
        closingchar = null;
        newchar = 0;
        newchar1 = 0;
        return input;
    }
    private static  void addElementToArray(String string){
        String[] tmpArray;
        int length = starttaglist.length;
        tmpArray = new String[length+1];
        System.arraycopy(starttaglist, 0,tmpArray , 0, length);
        tmpArray[length] = new String(string);
        starttaglist = null;
        starttaglist = new String[length+1];
        System.arraycopy(tmpArray, 0,starttaglist , 0, length+1);
        for(String tmp:starttaglist){
            System.out.println("Elements in Array  "+tmp);
            }
        tmpArray = null;
    }
    public static String[] getStartTag(){
        return starttaglist;
    }
    public static  String[] getTagValue(){
        for(String tmp:tagvaluelist){

        }
        return tagvaluelist;
    }
    public static  String[] getEndTag(){
        return endtaglist;
    }

    static Object bufferWrite(char value){
        store[OstoreCounter] =  new Object();
        store[OstoreCounter] = value;
        //System.out.println("bufferWrite=["+OstoreCounter+"] storeValue=["+store[OstoreCounter]+"] Ov="+Ov);
        if(Ov==30&&store[RstoreCounter] == null){
            Rtmp=Ov;
            Ov=0;
            }
        if(Ov==40){
            OstoreCounter++;
            Ov=0;
            }
            Ov++;
             char tmp  = (char)  bufferRead();
             return tmp;
    }

     static Object bufferRead(){
        Object tmp = store[RstoreCounter];
        //System.out.println("bufferRead=["+RstoreCounter+"] storeValue= ["+store[RstoreCounter]+"] Rv="+Rv);
        store[RstoreCounter] =  null;
        if(Rv==Rtmp){
            Rv=0;
            }
        if(Rv==40){
                RstoreCounter++;
                Rv=0;
                }
        //System.out.println("bufferRead reads till end of int"+Rtmp);
            Rv++;
            return tmp;
    }

     static void log(String txt){
                System.out.println(txt);
                }
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T11:13:08.723

我无法完成解析对该方法的数组引用

```
 private void addElementToArray(String string, String[] obj); 
```

相反，我将代码包含在 main 方法中，它不是最干净的方法，但效果很好。

```
 tagValue = input.substring(endcharint+1,closingcharint-1);
        tmpArray = new String[tagvaluelist.length+1];
        System.arraycopy(tagvaluelist, 0,tmpArray , 0, tagvaluelist.length);
        tmpArray[tagvaluelist.length] = new String(tagValue);
        tagvaluelist = null;
        tagvaluelist = new String[tmpArray.length];
        System.arraycopy(tmpArray, 0, tagvaluelist , 0, tmpArray.length);
        tmpArray = null; 
```

对于除原始字符之外的 Buffer 类，我找到了一种将 char 作为对象解析为 Buffer 类的解决方案，并且它可以工作，但希望它符合 java 规则。

```
 newchar1 = input.charAt(i);
        Buffer buffer =  new Buffer(newchar1);
        buffer.buffer(newchar1);
            newchar = newchar1; // to test its going through the buffer 
```

缓冲类：

```
 package com.test;

    public class Buffer {
         Object store[] = new Object[26];
         Object[][][] megastore = new Object[50][50][50];
         int Wmstore=0,WstoreCounter=0,Wv=0;
         int Rmstore=0,RstoreCounter=0,Rv=0,Rtmp;
         int Omstore=0,OstoreCounter=0,Ov=0;
         int mstore=0;
     public Object buffer(Object obj){
        return new Buffer(obj);}
 public Buffer(Object obj){
                bufferWrite(obj);
                store = null;
                megastore = null;
    }
Object bufferWrite(Object obj){
        store[OstoreCounter] =  new Object();
        store[OstoreCounter] = obj;
        System.out.println("bufferWrite=["+OstoreCounter+"] storeValue=["+store[OstoreCounter]+"]");// Ov="+Ov);
        if(Ov==30&&store[RstoreCounter] == null){
            Rtmp=Ov;
            Ov=0;
            }
        if(Ov==40){
            OstoreCounter++;
            Ov=0;
            }
            Ov++;
             Object tmp  =   bufferRead();
             return tmp;
    }

     Object bufferRead(){
        Object tmp = store[RstoreCounter];
        System.out.println("bufferRead=["+RstoreCounter+"] storeValue=["+store[RstoreCounter]+"]");// Rv="+Rv);
        store[RstoreCounter] =  null;
        if(Rv==Rtmp){
            Rv=0;
            }
        if(Rv==40){
                RstoreCounter++;
                Rv=0;
                }
        //System.out.println("bufferRead reads till end of int"+Rtmp);
            Rv++;
            return tmp;
    }
     void log(String txt){
                System.out.println(txt);
                }
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:14:46.170

int 不是对象

试试看

```
Integer i = new Integer[10]; 
```

这会起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T06:16:16.647

`int`不是**的**子类`Object`，`Integer`是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T06:22:02.673

`Object`不是原始 like 的超类`int`，而是 type的超类`Integer`。另一个问题是您的声明。使用长度或初始值，而不是两者：

```
Integer[] i = new Integer[] {0, 1, 2, null, null, null, null, null, null, null};
Integer[] i = new Integer[10]; 
```

要编写通用方法，您需要使用泛型：

```
void <T> add(T object , T[] lateral); 
```

下一个问题是，数组具有固定长度，不能扩展。索引必须始终在 [0..length-1] 范围内，而不是 length 或 length+1。为此，您应该使用`List`：

```
List<T> lateral = new ArrayList<Integer>();

void <T> add(T object , List<T> lateral) {
  literal.add(object);
} 
```

对数组做这种事情的唯一机会是将新值放在第一个非空位置：

```
void <T> add(T object , T[] lateral) {
  for (int i = 0; i < lateral.length; ++i) {
    if (lateral[i] == null) {
      lateral[i] = object;
      return;
    }
  }
  throw new IllegalStateException("array to short, no null value found to insert " + object);
} 
```

PS：这都是 Java 5 代码，不适用于早期版本！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T06:22:59.400

```
int is not a subclass of Object 
```

但是在**java 5**之后，有一个概念被称为`auto Boxing`将您的原始数据类型转换为相应的包装类。所以在这种情况下。
`add(6, i);`

`6`会自动转换成那里的包装类`Integer`。但问题在于`i`，因为您的函数采用对象数组，但`i`它的整数数组。这不能由 JVM 使用 AutoBoxing 转换。

因此，如果您尝试`add(6, string);`，则不会显示任何错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T06:23:42.627

**-**首先`int`, `char`, `boolean`, `byte`,`short`等是原始类型。

**-**我们拥有`Wrapper Object`上述内容，`primitives`并且随着**Java 5**的到来，该功能被调用`Auto-Boxing`并`Un-Boxing`开始存在。

**例如：**

```
int i = 5;

Integer intObj = new Integer(i); 
```

**现在方法定义：**

`public <T extends Object> void doIt(ArrayList<T> arr){}`

**或者**

`public void doIt(ArrayList<? extends Object> arr){}`