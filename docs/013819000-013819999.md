# StackOverflow 问答 13819000-13819999

# java - java android视图结构

> ID：13819000
> 
> 赞同：0
> 
> 时间：2012-12-11T11:05:34.780
> 
> 标签：java, android, eclipse, android-activity, object-oriented-analysis

只是一个简单的也许愚蠢的问题。可以在使用 Inflater 的 android 应用程序中一次使用多个活动吗？我想在我的屏幕上有多个视图而不会丢失以前的视图。例如，用户单击按钮并显示信息屏幕。Start Intent 会将整个屏幕转换为信息屏幕活动。

使用 Inflater 是可行的，但我只是想知道它是否是显示多个视图的正确方法。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:27:11.660

您应该为此使用 Fragments。每个片段都有一个视图/布局，您可以根据需要将它们移入和移出主视图。有很多教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:11:40.200

您可以设置视图的可见性，例如：

```
Button b = (Button)findViewById(R.id.button);
b.setVisibility(View.GONE); 
```

# c++ - 什么是 C++ 中的基本初始化程序？

> ID：13819002
> 
> 赞同：-3
> 
> 时间：2012-12-11T11:05:37.060
> 
> 标签：c++, oop

我的老师问我 C++ 中的基本初始化程序是什么。有人能给我一个定义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:21:00.787

阅读：初始化程序列表。

[http://www.cprogramming.com/tutorial/initialization-lists-c++.html](http://www.cprogramming.com/tutorial/initialization-lists-c++.html)

# active-directory - Active Directory 和 Active Directory LDS 中的字段

> ID：13819003
> 
> 赞同：0
> 
> 时间：2012-12-11T11:05:45.140
> 
> 标签：active-directory, asp.net-membership, schema, adam, adlds

是否有明确的来源可以让我知道`ActiveDirectoryMembershipProvider`Active Directory 或 Active Directory LDS 中所需的对象、字段。浏览活动目录中的所有字段以了解 Asp.net 提供程序正在修改哪些字段是很烦人的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T23:52:28.033

检查此链接[http://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx)

在那里，您将看到一个带有属性和默认目录属性的表。

# vb.net - 从 VB 访问 XAML 中的“背景”属性

> ID：13819005
> 
> 赞同：1
> 
> 时间：2012-12-11T11:05:46.440
> 
> 标签：vb.net, xaml

我在vb编程中很新..

我的 Form.xaml 中有这个代码片段

```
<MenuItem Name="testItem" Background="Gray" Width="37" >
    <MenuItem.Icon>
        <Image Source="Image\test.png"  Width="35" Height="35"/>
    </MenuItem.Icon>
</MenuItem> 
```

在我的 Form.xaml.vb 中如何访问 testItem 的背景？我做了类似的事情

```
testItem.Background = Colors.Blue 
```

但它不起作用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:31:20.610

Menu 的 Background 属性需要一个 Brush，而不是 Color。您可以像这样使用 SolidColorBrush：

```
testItem.Background = New SolidColorBrush(Colors.Red) 
```

# mysql - 为什么 MySQL 不在范围查询中使用复合键？

> ID：13819016
> 
> 赞同：0
> 
> 时间：2012-12-11T11:06:24.267
> 
> 标签：mysql, composite-key, composite-primary-key

我检查了许多其他 SO 帖子和 MySQL 文档，但似乎无法得到关于为什么不使用索引以及如何强制使用它的答案 - 我可以看到许多其他人也有类似的问题，但是找不到解决方案。

桌子看起来像这样

```
CREATE TABLE `countries_ip` (
`ipfrom` INT(10) UNSIGNED ZEROFILL NOT NULL,
`ipto` INT(10) UNSIGNED ZEROFILL NOT NULL,
`countrySHORT` CHAR(2) NULL DEFAULT NULL,
`country_id` INT(10) UNSIGNED NOT NULL,
PRIMARY KEY (`ipfrom`, `ipto`, `country_id`),
INDEX `from_to_index` (`ipfrom`, `ipto`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB; 
```

不知道为什么“from_to_index”在那里——对我来说似乎是多余的。但无论如何，EXPLAIN 查询看起来像这样

```
EXPLAIN SELECT *
        FROM track_report t, countries_ip ip
        WHERE t.ip BETWEEN ip.ipfrom AND ip.ipto 
```

EXPLAIN 的结果如下：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  t   ALL getwebmaster    NULL    NULL    NULL    36291   
1   SIMPLE  ip  ALL PRIMARY,from_to_index   NULL    NULL    NULL    153914  Range checked for each record (index map: 0x3) 
```

如您所见，`countries_ip`表中的 PRIMARY KEY 没有被使用，因此查询需要很长时间（`countries_ip`有超过 15 万条记录）

我可能遗漏了一些简单的东西，但是对于如何优化此查询的任何建议都将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:26:52.977

它*可能*有助于在`track_report.ip`. 请参阅[SQL 小提琴](http://www.sqlfiddle.com/#!2/bbd2c/2/0)。

我修改了 where 子句来进行显式比较，现在它使用 from_to_index。

```
SELECT ip
FROM track_report t, countries_ip ip
where t.ip >= ip.ipfrom and t.ip <= ip.ipto 
```

请参阅[SQL 小提琴](http://www.sqlfiddle.com/#!2/e9ab0/2/0)。

# python - 在 Python 中将元素添加到 bibtex 文件

> ID：13819019
> 
> 赞同：2
> 
> 时间：2012-12-11T11:06:34.203
> 
> 标签：python, bibtex

我创建了一个脚本，它为摘要和关键字抓取了许多 pdf。我还有一组 bibtex 文件，我想在其中放置我提取的文本。我正在寻找的是一种将元素添加到 bibtex 文件的方法。

我写了一个简短的解析器：

```
#!/usr/bin/python
#-*- coding: utf-8

import os
from pybtex.database.input import bibtex

dir_path = "nime_archive/nime/bibtex/"
num_texts = 0

class Bibfile:
  def __init__(self,bibs):
    self.bibs = bibs
    for a in self.bibs.entries.keys():
      num_text += 1
       print bibs.entries[a].fields['title']
       #Need to implement a way of getting just the nime-identificator
       try:
         print bibs.entries[a].fields['url']
       except:
         print "couldn't find URL for text: %s " % a

    print "creating new bibfile"

bibfiles = []
parser = bibtex.Parser()

for infile in os.listdir(dir_path):
    if infile.endswith(".bib"):
      print infile
      bibfiles = Bibfile(parser.parse_file(dir_path+infile)) 
```

我的问题是是否可以使用 Pybtex 将元素添加到现有的 bibtex 文件中（或创建一个副本），以便我可以将我的提取与已有的内容合并。如果这在 Pybtex 中是不可能的，我可以使用其他什么 bibtex 解析器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:24:54.083

我从来没有使用过 pybtex，但快速浏览一下，您可以添加条目。由于`self.bibs.entries`似乎是 a `dict`，因此您可以想出一个唯一的键，并向其中添加更多条目。例子：

```
key = "some_unique_string"
new_entry = Entry('article',
        fields={
            'language': u'english',
            'title': u'Predicting the Diffusion Coefficient in Supercritical Fluids',
            'journal': u'Ind. Eng. Chem. Res.',
            'volume': u'36',
            'year': u'1997',
            'pages': u'888-895',
        },
        persons={'author': [Person(u'Liu, Hongquin'), Person(u'Ruckenstein, Eli')]},
    )
self.bibs.entries[key] = new_entry 
```

（警告：未经测试）

如果你想知道我从哪里得到这个示例表单：查看`tests/`pybtex 源的子目录。我主要从`tests/database_test/data.py`. 如果缺少实际文档，测试可以成为很好的文档来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T15:23:23.927

.data.add_entry(key, entry) 对我有用。在这里，我使用了手动创建的条目（取自 Evert 的示例），但您可以从另一个正在解析的围兜复制现有条目。

```
 from pybtex.database.input.bibtex import Parser
   from pybtex.core import Entry, Person

   key = "some_unique_string"

   new_entry = Entry('article',
           fields={
               'language': u'english',
               'title': u'Predicting the Diffusion Coefficient in Supercritical Fluids',
               'journal': u'Ind. Eng. Chem. Res.',
               'volume': u'36',
               'year': u'1997',
               'pages': u'888-895',
           },
    persons={'author': [Person(u'Liu, Hongquin'), Person(u'Ruckenstein, Eli')]},
       )

   newbib_parser = Parser()
   newbib_parser.data.add_entry(key, new_entry)
   print newbib_parser.data 
```

# javascript - Knockout.js - 防止多个表单提交

> ID：13819021
> 
> 赞同：1
> 
> 时间：2012-12-11T11:06:41.073
> 
> 标签：javascript, knockout.js

目前，我只在提交表单后使用“禁用”ko 绑定来禁用表单按钮和输入字段，但大部分添加将使用回车键完成。我注意到如果我多次按回车键，每次都会触发添加功能。

有没有办法检测视图模型中添加功能内的按键？或者任何其他在 KO 内部解决这个问题而不求助于 jQuery 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:27:22.127

您可以向您的 viem 模型添加一个标志，该标志将指示表单状态并禁止第二次提交：

```
function ViewModel(){
    var self = this;

    self.isSubmiting = ko.observable(false);

    self.clickFunc = function(){
        if (!self.isSubmiting())
        {
            self.isSubmiting(true);

            // Do submit
            console.log("submit");
        }
    }
} 
```

这是一个小提琴：http: [//jsfiddle.net/JMLbV/](http://jsfiddle.net/JMLbV/)

# screenshot - 如何使用 LWJGL 制作简单的截图方法？

> ID：13819030
> 
> 赞同：0
> 
> 时间：2012-12-11T11:06:58.370
> 
> 标签：screenshot, rgb, lwjgl, javax.imageio, glreadpixels

所以基本上我现在在搞 LWJGL 一段时间了，我突然停下来，周围有很多烦恼`glReadPixels()`。
以及为什么它只会从左下 -> 右上角读取。
所以我在这里回答我自己的问题，因为我弄清楚了所有这些东西，
我希望我的发现可能对其他人有用。

作为旁注，我正在使用：

```
glOrtho(0, WIDTH, 0 , HEIGHT, 1, -1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:06:58.370

所以这是我的屏幕捕获代码，可以在任何 LWJGL 应用程序 C 中实现：

```
//=========================getScreenImage==================================//
    private void screenShot(){
             //Creating an rbg array of total pixels
             int[] pixels = new int[WIDTH * HEIGHT];
             int bindex;
             // allocate space for RBG pixels
             ByteBuffer fb = ByteBuffer.allocateDirect(WIDTH * HEIGHT * 3);

             // grab a copy of the current frame contents as RGB
             glReadPixels(0, 0, WIDTH, HEIGHT, GL_RGB, GL_UNSIGNED_BYTE, fb);

             BufferedImage imageIn = new BufferedImage(WIDTH, HEIGHT,BufferedImage.TYPE_INT_RGB);
             // convert RGB data in ByteBuffer to integer array
             for (int i=0; i < pixels.length; i++) {
                 bindex = i * 3;
                 pixels[i] =
                     ((fb.get(bindex) << 16))  +
                     ((fb.get(bindex+1) << 8))  +
                     ((fb.get(bindex+2) << 0));
             }
             //Allocate colored pixel to buffered Image
             imageIn.setRGB(0, 0, WIDTH, HEIGHT, pixels, 0 , WIDTH);

             //Creating the transformation direction (horizontal)
             AffineTransform at =  AffineTransform.getScaleInstance(1, -1);
             at.translate(0, -imageIn.getHeight(null));

             //Applying transformation
             AffineTransformOp opRotated = new AffineTransformOp(at, AffineTransformOp.TYPE_BILINEAR);
             BufferedImage imageOut = opRotated.filter(imageIn, null);

             try {//Try to screate image, else show exception.
                 ImageIO.write(imageOut, format , fileLoc);
             }
             catch (Exception e) {
                 System.out.println("ScreenShot() exception: " +e);
             }
         } 
```

我希望这很有用。
对于代码的任何问题或意见，请随意询问/建议。C：
拥抱，
罗斯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-28T17:31:54.570

抱歉回复晚了，但这适用于仍在寻找解决方案的任何人。

```
public static void saveScreenshot() throws Exception {
    System.out.println("Saving screenshot!");
    Rectangle screenRect = new Rectangle(Display.getX(), Display.getY(), Display.getWidth(), Display.getHeight());
    BufferedImage capture = new Robot().createScreenCapture(screenRect);
    ImageIO.write(capture, "png", new File("doc/saved/screenshot.png"));
} 
```

# html - 边框半径在 Chrome 和 Safari 浏览器中不起作用

> ID：13819033
> 
> 赞同：2
> 
> 时间：2012-12-11T11:07:10.657
> 
> 标签：html, css

我正在为我的图像使用边框半径，图像的角没有变圆。

但是同样的代码在 Mozilla Firefox 中运行正常。

CSS：

```
 body img { 
     border-radius: 20px 20px 20px 20px;
    -moz-border-radius: 20px 20px 20px 20px;
    -webkit-border-radius: 20px 20px 20px 20px;
    border: 3px solid #ed1d24;
    } 
```

![在此处输入图像描述](../Images/d89a770fff4c26f28d270dbd1496cf94.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:08:52.360

首先设置边框，然后覆盖其半径：

```
 body img { 
    border: 1px solid #ed1d24;
     border-radius: 20px 20px 20px 20px;
    -moz-border-radius: 20px 20px 20px 20px;
    -webkit-border-radius: 20px 20px 20px 20px;
    } 
```

[编辑]

实际上，我只能得出结论，它以一种或另一种方式起作用。我自己使用的是 Chrome，这个小提琴中的两个图像都有圆角。

[http://jsfiddle.net/aqBA7/](http://jsfiddle.net/aqBA7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:15:54.900

您的代码中的其他地方一定有错误，`border-radius`正如 GolezTrol 已经显示的那样，在 Google Chrome 中运行良好，您的 CSS 也是正确的。

尝试打开开发人员工具并检查样式是否正确应用于您的`img`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T05:34:59.243

使用包装器`div`并将 and 应用于`border`并且仅`border-radius`应用于内部图像。我将图像上的 减少了与 相同的数量，以便用图像正确填充容器。如果你在两个元素上做同样的事情，你会在角落看到一个微小的间隙，因为.`#wrapper``border-radius``border-radius``border` `width``wrapper``border-radius``border` `width`

**HTML**：

```
<div id="wrapper">
   <img src="http://i.telegraph.co.uk/multimedia/archive/01452/fer1_1452403i.jpg" width="620" height="388" alt="" /> 
</div> 
```

**CSS**：

```
#wrapper {
    width: 620px; height: 388px;
    border: 2px solid #ed1d24;
    border-radius: 20px;
}    

#wrapper img { 
    border-radius: 18px; /* wrapper radius minus wrapper border width */
}​ 
```

[**在 Safari 中测试的演示**：](http://jsfiddle.net/D7MHh/2/)

[http://jsfiddle.net/D7MHh/2/](http://jsfiddle.net/D7MHh/2/)

**Safari 中 jsFiddle 的截图**：

![jsFiddle Safari 中的截图](../Images/03b76c121e8b718824f679abd8196d5e.png)

# objective-c - 自定义tableView

> ID：13819036
> 
> 赞同：-3
> 
> 时间：2012-12-11T11:07:23.750
> 
> 标签：objective-c, uitableview, custom-controls

如何在 a`UIButtons`上方添加 3 条`UITableView`？拜托，我需要例子。我想让它[像这样](http://rghost.net/42163545.view)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:10:36.197

您可以在情节提要中创建一个包含分段控制器的单元格。

现在在

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

您可以将该单元格从表中的第一个队列中取出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:12:19.863

在您的`viewDidLoad`中，创建一个`UIView`具有清晰背景色的。

然后，创建 a`UISegmentedControl`并将其作为 a 添加`subview`到清晰视图中。

最后，将您的清晰视图设置为表头视图：

```
self.tableView.tableHeaderView = myClearView; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:17:42.063

Bar 在 iPhone 中被称为分段控件。要创建它的子类 UIViewControl 类并在顶部添加分段控件，然后在下面添加 UITableView，您可以更好地使用 Xib，或者您可以找到坐标并以编程方式添加这两个控件。

参考[这个链接](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T11:22:38.777

您可以通过在以下委托方法中为您实现`Header View Section`委托方法来做到这一点 ，给出您想要实现的视图的大小`UITableView``ViewController`

```
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    return 60.0f;
} 
```

实施`UISegmentedControl`以获取您的三个按钮并在您的`viewForHeaderInSection`方法中实施

```
-(UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
      UISegmentedControl *segmentedControl = [[UISegmentedControl alloc]initWithItems:segments] autorelease];
      segmentedControl.frame =  GRectMake(60, 10, 200, 40);
      ........
      // Do other Stuffs of Segmented Control
      ........
     return segmentedControl;
} 
```

# c# - 使用枚举和 StringValue

> ID：13819042
> 
> 赞同：1
> 
> 时间：2012-12-11T11:07:37.717
> 
> 标签：c#, .net, selenium, nunit, specflow

我正在使用 specflow 和 selenium，并且正在制作一个表格来构建网站中的用户输入。

```
| Input1 | Input2 | Input3 |
| Opt1   | OptX   | Opt2   | 
```

我为输入建立了一个类：

```
public class ObjectDTO 
{
    public string Input1;
    public Input2Type Input2;
    public string Input3;
} 
```

以及一个特定选项的枚举（因为它是静态输入）

```
public enum Input2Type
{
    [StringValue("OptX")]
    X,
    [StringValue("OptY")]
    Y,
    [StringValue("OptZ")]
    Z
} 
```

当我得到输入时，我尝试实例化对象：

```
ObjectDTO stocks = table.CreateInstance<ObjectDTO>(); 
```

但它说“没有找到价值 OptX 的枚举”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T17:48:57.290

不幸的是 table.CreateInstance() 是一个相当幼稚的方法，并且对于 Enums 失败（除其他外）。我最终为表编写了一个扩展方法，该方法使用反射来询问它试图创建的对象实例。这种方法的好处是该方法只会覆盖表列中指定的实例值，但是，您必须为表的每一行调用它并传入一个已经实例化的实例。它可以很容易地修改为就像 CreateInstance 方法一样，但就我的目的而言，这效果更好......

```
public static class TableExtensions
{
  public static void FillInstance(this Table table, TableRow tableRow, object instance) {
    var propertyInfos = instance.GetType().GetProperties();
    table.Header.Each(header => Assert.IsTrue(propertyInfos.Any(pi => pi.Name == header), "Expected to find the property [{0}] on the object of type [{1}]".FormatWith(header, instance.GetType().Name)));
    var headerProperties = table.Header.Select(header => propertyInfos.Single(p => p.Name == header)).ToList();
    foreach (var propertyInfo in headerProperties) {
      object propertyValue = tableRow[propertyInfo.Name];
      var propertyType = propertyInfo.PropertyType;
      if (propertyType.IsGenericType && propertyType.GetGenericTypeDefinition() == typeof(Nullable<>)) {
        propertyType = propertyType.GetGenericArguments().Single();
      }

      var parse = propertyType.GetMethod("Parse", new[] { typeof(string) });
      if (parse != null) {
        // ReSharper disable RedundantExplicitArrayCreation
        try {
          propertyValue = propertyType.Name.Equals("DateTime") ? GeneralTransformations.TranslateDateTimeFrom(propertyValue.ToString()) : parse.Invoke(null, new object[] { propertyValue });
        } catch (Exception ex) {
          var message = "{0}\r\nCould not parse value: {2}.{3}(\"{1}\")".FormatWith(ex.Message, propertyValue, parse.ReturnType.FullName, parse.Name);
          throw new Exception(message, ex);
        }
        // ReSharper restore RedundantExplicitArrayCreation
      }

      propertyInfo.SetValue(instance, propertyValue, null);
    }
  }
} 
```

您可以按如下方式调用它：

```
ObjectDTO objectDTO;
foreach (var tableRow in table.Rows)
{
  objectDTO = table.FillInstance(tableRow, new ObjectDTO());
  //Do individual row processing/testing here...
} 
```

# c# - Registry.CurrentUser 和 64 位

> ID：13819044
> 
> 赞同：1
> 
> 时间：2012-12-11T11:07:38.267
> 
> 标签：c#, .net, registry, 64-bit

有人可以为我解释这个奇怪的结果吗？

在 linqPad 中得到以下代码

```
Microsoft.Win32.Registry.CurrentUser.OpenSubKey(@"Software\Microsoft").Dump();
Microsoft.Win32.Registry.LocalMachine.OpenSubKey(@"Software\Microsoft").Dump(); 
```

在进程监视器中查看时，它看起来像这样：

```
RegQueryKey    HKU\S-1-5-21-...   
RegOpenKey     HKU\S-1-5-21-...\Software\Microsoft   
RegSetInfoKey  HKU\S-1-5-21-...\Software\Microsoft   
RegQueryKey    HKU\S-1-5-21-...\Software\Microsoft   
RegQueryKey    HKU\S-1-5-21-...\Software\Microsoft   
RegQueryKey    HKLM   
RegOpenKey     HKLM\Software\Wow6432Node\Microsoft   
RegSetInfoKey  HKLM\SOFTWARE\Wow6432Node\Microsoft   
RegQueryKey    HKLM\SOFTWARE\Wow6432Node\Microsoft   
RegQueryKey    HKLM\SOFTWARE\Wow6432Node\Microsoft 
```

我的问题是：
**为什么 Registry.CurrentUser 访问 64 位和 Registry.LocalMachine 32 位？**

（还有，为什么 Registry.CurrentUser 访问`HKU\S-..`而不是`HKCU`）

使用 Windows 7、64 位、.Net 3.5、`LINQPad.exe *32`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:46:50.770

如果您查看 MSDN[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384253%28v=vs.85%29.aspx)，它会说 HKCU\Software\Classes 是通过 WOW64 重定向重定向的，但不是整个 HKCU\Software 键。

```
HKEY_CURRENT_USER           Shared          Shared
    SOFTWARE                Shared          Shared
        Classes             Shared          Redirected and reflected
            Appid           Shared          Redirected and reflected with one exception: the DllSurrogate and DllSurrogateExecutable registry values are not reflected if their value is an empty string.
            CLSID           Redirected      Redirected and reflected
            DirectShow      Redirected      Redirected and reflected
            Interface       Redirected      Redirected and reflected
            Media Type      Redirected      Redirected and reflected
            MediaFoundation Redirected      Redirected and reflected 
```

# php - 选择重构而不是完全重写的标准

> ID：13819051
> 
> 赞同：2
> 
> 时间：2012-12-11T11:07:50.900
> 
> 标签：php, refactoring, project, codebase

我正在做一个项目，它的代码库大约有 3500 个文件，可能比实际少几百个。这个项目是用 PHP 编写的，非常混乱，在这种情况下，这意味着文档很难理解 OOP 并且过程编程是混合的，依赖项不明确，并且那些制作系统的人是初学者程序员所需要的。

老实说，他们所做的令人印象深刻，它是一个有效的产品等等。但是调试和添加新功能是一件真正的苦差事。

现在我的问题是什么是我们应该重构整个项目或进行完全重写的一些好的标准。我应该提到，在我们进行时重写系统的某些部分可能是不可行的，因为一切都是相互依赖的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:40:26.320

如果应用程序很大、成功并且做了一些有趣的事情，那么手动重写它的尝试很可能会失败。重写永远不会有足够的质量来取代原件，并且在它完成之前你不能扔掉原件，这意味着你将继续增强原件直到替换准备好。两倍的工作量，没有额外的价值。你可能会好得多，保留应用程序并清理它。

您可能会考虑两个想法来帮助减少代码库的大小：

*   对代码运行测试覆盖率。通常人们使用它来验证应用程序的功能，但如果你运行测试覆盖并简单地运行应用程序代码很长一段时间，它会告诉你哪些代码没有被执行，因此很可能死了。如果系统一团糟，它可能有很多死代码，这是找到候选人的简单方法。有一些测试覆盖工具可以以低开销收集整个应用程序的数据；您可以在生产代码中使用它们。

*   Run a clone detector. This will find duplicate code. Outright duplication is easy to remove. A good clone detector will find not just identical clones, but parametric clones, that is, code which has been copy/paste/edited but in a way that can be summarized with parameters. Parametric clones require more finesse to remove, but finding them tells you of likely missed abstractions, and removing them (by replacing with objects or methods) inserts those missing abstractions into your code, making further maintenance involving that idea easier. (It isn't a very well known fact, but clone removal also raises test coverage rates, if you are really using test coverage to verify functionality!)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:24:35.010

如果应用程序已经工作并且没有重大故障，那么我会保留大部分内容，因为从头开始重写所有内容总是很昂贵。

也许您应该考虑在您看到重复的代码制作对象/函数的地方减少文件/行的数量，以尽可能集中所有内容。这对最终的维护有很大帮助，并且不需要大量的时间来完成。尤其是如果它是由初学者所说的那样编写的，您将很容易找到改进的“错误方法”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:09:04.990

The basic criteria will probably be the time ( = money).
The estimation is always hard when something is big. Split it to the smallest chunks.

Mind the point of view. Your estimation will probably differ from the estimation of the previous programmers, as it will be biased by the style you prefer. Maybe a better choice would be to hire the previous programmers to "fix" the code.

Anyways, you should state the minimum requirements to call the app well written and easy to maintain, discuss this with the boss and the team, split to smallest possible sprints and estimate the time required for all of them.

If you are able to convince your boss that the rewrite will return in better ROI overall, do rewrite. Otherwise, learn the "new style". If you have the comfort to stop the business for the time of the rewrite, or a spare time to do it, you're lucky. You're even more lucky if the code is testable, or you have at least some unit tests. If this is not possible, you should implement functional tests at least to help with both cases (refactoring or rewrite).

Note, that each one of us will probably prefer to rewrite from scratch, than to refactor. Then rewrite this rewritten...

So refactoring is always a good choice, assuming you already have tests or you are able to easily implement the tests.

# javascript - 如何验证网址

> ID：13819052
> 
> 赞同：0
> 
> 时间：2012-12-11T11:07:57.927
> 
> 标签：javascript, javascript-events

> **可能重复：**
> [检查字符串是否为有效 URL 的最佳正则表达式是什么？](https://stackoverflow.com/questions/161738/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url)

我想验证从用户那里获取的 url... 就像[http://www.google.com](http://www.google.com)我想验证 url (.com) 的最后一部分我继续在网上搜索但没有找到正确的答案。我的代码是

```
function validate()
{
    var url = document.getElementById("url").value;

    var pattern = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;

    if (pattern.test(url)) {
        alert("Valid Url");
        return true;
    } 
        alert("Please Input Right URL");
        return false;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:19:22.750

```
function ValidURL(str) {
   var pattern = new RegExp('^(https?:\/\/)?'+ // protocol
      '((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|'+ // domain name
      '((\d{1,3}\.){3}\d{1,3}))'+ // OR ip (v4) address
      '(\:\d+)?(\/[-a-z\d%_.~+]*)*'+ // port and path
      '(\\?[;&a-z\d%_.~+=-]*)?'+ // query string
      '(\#[-a-z\d_]*)?$','i'); // fragment locater
   if(!pattern.test(str)) {
      alert("Please enter a valid URL.");
      return false;
   } else {
      return true;
   }
}
ValidURL('google.com'); 
```

检查你的控制台

# c# - ReadOnlyCollection vs Liskov - 如何正确建模可变集合的不可变表示

> ID：13819058
> 
> 赞同：23
> 
> 时间：2012-12-11T11:08:11.613
> 
> 标签：c#, immutability, directed-acyclic-graphs, liskov-substitution-principle, readonly-collection

Liskov-substitution 原则要求子类型必须满足超类型的契约。据我了解，这将`ReadOnlyCollection<T>`违反 Liskov。 `ICollection<T>`的合约暴露`Add`和`Remove`操作，但是只读子类型不满足这个合约。例如，

```
IList<object> collection = new List<object>();
collection = new System.Collections.ObjectModel.ReadOnlyCollection<object>(collection);
collection.Add(new object());

    -- not supported exception 
```

显然需要不可变的集合。.NET 的建模方式有问题吗？更好的方法是什么？ `IEnumerable<T>`在暴露集合方面做得很好，至少看起来是不可变的。然而，语义是非常不同的，主要是因为`IEnumerable`没有显式地暴露任何状态。

在我的特殊情况下，我正在尝试构建一个不可变的[DAG](http://en.wikipedia.org/wiki/Directed_acyclic_graph)类来支持[FSM](http://en.wikipedia.org/wiki/Finite-state_machine)。一开始我显然需要`AddNode`/`AddEdge`方法，但我不希望一旦它已经运行就可以更改状态机。我很难表示 DAG 的不可变和可变表示之间的相似性。

现在，我的设计涉及预先使用 DAG Builder，然后创建一次不可变图，此时它不再可编辑。Builder 和具体的不可变 DAG 之间唯一的通用接口是`Accept(IVisitor visitor)`. 我担心面对可能更简单的选项，这可能是过度设计/过于抽象。同时，我无法接受我可以在我的图形接口上公开方法，`NotSupportedException`如果客户端获得特定的实现，这些方法可能会抛出。处理这个问题的*正确*方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T11:36:36.190

您始终可以拥有一个（只读）图形接口，并使用读/写可修改图形接口对其进行扩展：

```
public interface IDirectedAcyclicGraph
{
    int GetNodeCount();
    bool GetConnected(int from, int to);
}

public interface IModifiableDAG : IDirectedAcyclicGraph
{
    void SetNodeCount(int nodeCount);
    void SetConnected(int from, int to, bool connected);
} 
```

（我不知道如何将这些方法拆分为属性的一半。`get`）`set`

```
// Rubbish implementation
public class ConcreteModifiableDAG : IModifiableDAG
{
    private int nodeCount;
    private Dictionary<int, Dictionary<int, bool>> connections;

    public void SetNodeCount(int nodeCount) {
        this.nodeCount = nodeCount;
    }

    public void SetConnected(int from, int to, bool connected) {
        connections[from][to] = connected;
    }

    public int GetNodeCount() {
        return nodeCount;
    }

    public bool GetConnected(int from, int to) {
        return connections[from][to];
    }
}

// Create graph
IModifiableDAG mdag = new ConcreteModifiableDAG();
mdag.SetNodeCount(5);
mdag.SetConnected(1, 5, true);

// Pass fixed graph
IDirectedAcyclicGraph dag = (IDirectedAcyclicGraph)mdag;
dag.SetNodeCount(5);          // Doesn't exist
dag.SetConnected(1, 5, true); // Doesn't exist 
```

这就是我希望微软对他们的只读集合类所做的事情——为 get-count、get-by-index 行为等创建一个接口，并用一个接口扩展它以添加、更改值等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T11:26:32.133

I don't think that your current solution with the builder is overengineered.

It solves two problems:

1.  Violation of LSP
    You have an editable interface whose implementations will never throw `NotSupportedException`s on `AddNode` / `AddEdge` and you have a non-editable interface that doesn't have these methods at all.

2.  [Temporal coupling](http://blog.ploeh.dk/2011/05/24/DesignSmellTemporalCoupling.aspx)
    If you would go with one interface instead of two, that one interface would need to somehow support the "initialization phase" and the "immutable phase", most likely by some methods marking the start and possibly end of those phases.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T00:42:08.313

.Net 中的只读集合不违反 LSP。

如果调用 add 方法，您似乎对只读集合抛出不受支持的异常感到困扰，但它并没有什么特别之处。

许多类表示可以处于多种状态之一的域对象，并且并非每个操作在所有状态下都有效：流只能打开一次，窗口在处理后无法显示，等等。

只要有办法测试当前状态并避免异常，在这些情况下抛出异常是有效的。

.Net 集合旨在支持以下状态：只读和读/写。这就是存在 IsReadWrite 方法的原因。它允许调用者测试集合的状态并避免异常。

LSP 需要子类型来遵守超类型的契约，但契约不仅仅是一个方法列表；它是基于对象状态的输入和预期行为列表：

“如果你给我这个意见，当我处于这种状态时，预计会发生这种情况。”

当集合的状态为只读时，ReadOnlyCollection 通过引发不受支持的异常来完全遵守 ICollection 的约定。[请参阅ICollection 文档](http://msdn.microsoft.com/en-us/library/63ywd54z.aspx)中的异常部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T21:03:10.453

我喜欢首先设计我的数据结构不可变的想法。有时这是不可行的，但有一种方法可以经常做到这一点。

对于您的 DAG，您很可能在文件或用户界面中有一些数据结构，您可以将所有节点和边作为 IEnumerables 传递给不可变 DAG 类的构造函数。然后，您可以使用 Linq 方法将源数据转换为节点和边。

然后，构造函数（或工厂方法）可以以对您的算法有效的方式构建类的私有结构，并进行非循环等前期数据验证。

该解决方案与构建器模式的区别在于，数据结构的迭代构造是不可能的，但通常这并不是真正需要的。

就个人而言，我不喜欢由同一个类实现的具有单独的读和读/写访问接口的解决方案，因为写功能并没有真正隐藏......将实例转换为读/写接口会暴露变异方法。在这种情况下，更好的解决方案是使用 AsReadOnly 方法创建一个真正不可变的数据结构来复制数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T15:13:39.217

您可以使用显式接口实现将修改方法与只读版本中所需的操作分开。在您的只读实现中还有一个将方法作为参数的方法。这使您可以将 DAC 的构建与导航和查询隔离开来。请参阅下面的代码及其注释：

```
// your read only operations and the
// method that allows for building
public interface IDac<T>
{
    IDac<T> Build(Action<IModifiableDac<T>> f);
    // other navigation methods
}

// modifiable operations, its still an IDac<T>
public interface IModifiableDac<T> : IDac<T>
{
    void AddEdge(T item);
    IModifiableDac<T> CreateChildNode();
}

// implementation explicitly implements IModifableDac<T> so
// accidental calling of modification methods won't happen
// (an explicit cast to IModifiable<T> is required)
public class Dac<T> : IDac<T>, IModifiableDac<T>
{
    public IDac<T> Build(Action<IModifiableDac<T>> f)
    {
        f(this);
        return this;
    }

    void IModifiableDac<T>.AddEdge(T item)
    {
        throw new NotImplementedException();
    }

    public IModifiableDac<T> CreateChildNode() {
        // crate, add, child and return it
        throw new NotImplementedException();
    }

    public void DoStuff() { }
}

public class DacConsumer
{
    public void Foo()
    {
        var dac = new Dac<int>();
        // build your graph
        var newDac = dac.Build(m => {
            m.AddEdge(1);
            var node = m.CreateChildNode();
            node.AddEdge(2);
            //etc.
        });

        // now do what ever you want, IDac<T> does not have modification methods
        newDac.DoStuff();
    }
} 
```

从此代码中，用户只能调用`Build(Action<IModifiable<T>> m)`以访问可修改的版本。并且方法调用返回一个不可变的。如果`IModifiable<T>`没有有意的显式强制转换，就无法访​​问它，这在您的对象的合同中没有定义。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-20T17:38:43.453

我喜欢它的方式（但也许这只是我），是在界面中拥有阅读方法，在类本身中拥有编辑方法。对于您的 DAG，您不太可能拥有数据结构的多个实现，因此拥有一个编辑图形的界面有点矫枉过正，而且通常不是很漂亮。

我发现具有表示数据结构的类和作为读取结构的接口非常干净。

例如：

```
public interface IDAG<out T>
{
    public int NodeCount { get; }
    public bool AreConnected(int from, int to);
    public T GetItem(int node);
}

public class DAG<T> : IDAG<T>
{
    public void SetCount(...) {...}
    public void SetEdge(...) {...}
    public int NodeCount { get {...} }
    public bool AreConnected(...) {...}
    public T GetItem(...) {...}
} 
```

然后，当您需要编辑结构时，传递类，如果您只需要只读结构，则传递接口。这是一个假的“只读”，因为你总是可以转换为类，但只读永远不是真的......

这使您可以拥有更复杂的阅读结构。与在 Linq 中一样，您可以使用在接口上定义的扩展方法来扩展您的阅读结构。例如：

```
public static class IDAGExtensions
{
    public static List<T> FindPathBetween(this IDAG<T> dag, int from, int to)
    {
        // Use backtracking to determine if a path exists between `from` and `to`
    }

    public static IDAG<U> Cast<U>(this IDAG<T> dag)
    {
        // Create a wrapper for the DAG class that casts all T outputs as U
    }
} 
```

这对于将数据结构的定义与“你可以用它做什么”分开非常有用。

此结构允许的另一件事是将泛型类型设置为`out T`. 这使您可以对参数类型进行逆变。

# java - 仅使用一种颜色生成渐变

> ID：13819061
> 
> 赞同：4
> 
> 时间：2012-12-11T11:08:17.560
> 
> 标签：java, android, colors, rgb

例如，我有一种颜色`0xFF0000`。我想只使用这种颜色作为起点信息来创建简单的渐变。第二个点将是第一个颜色较浅的颜色。

例如，如果我有价值——`0xFF0000`我想从中获得`0xCC0000`。然后我可以绘制简单的渐变。

所以第二种颜色应该比第一种颜色浅 10% 或 20%

硬代码值是不可接受的。用户将从色轮中选择颜色，应用程序应自动生成第二种颜色以绘制简单的渐变。

有什么算法或方法可以实现吗？可能算法会计算出更高的值：R 或 G 或 B，然后并行减少其他组件，或其他东西......我不确定这是如何工作的。

PS：我正在使用android SDK

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:34:21.243

我认为最好的方法是从 RGB 转换[为 HSV 空间](http://en.wikipedia.org/wiki/HSL_and_HSV)：

```
public int enlight(int color, float amount) {
  float[] hsv = new float[3];
  Color.colorToHSV(color, hsv);
  hsv[2] = Math.min(1.0f, amount * hsv[2]);
  return Color.HSVToColor(hsv);
} 
```

then you can *enlight* a color simply by incrementing the `v` (value) component, and then converting back to RGB if needed with the very same Android API [`Color`](http://developer.android.com/reference/android/graphics/Color.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:30:36.220

似乎是这样的：

```
int red     = Color.red(color);
int green   = Color.green(color);
int blue    = Color.blue(color);

int secondColor = 0;
int lighting    = 51; // from 0 to 255\. The larger the number is the brighter second color

if (red > green && red > blue)
    secondColor = Color.rgb(red, green - lighting, blue - lighting);
else if (green > red && green > blue)
    secondColor = Color.rgb(red - lighting, green, blue - lighting);
else if (blue > red && blue > green)
    secondColor = Color.rgb(red - lighting, green - lighting, blue); 
```

我应该测试它的所有颜色...

* * *

**更新：**

它有效，但是您需要设置一些其他条件来检查绿色和蓝色是否等于或红色和蓝色等..请放松@Raffaele 回答

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:30:38.513

我做了一个简单的例子来向你展示一种可能的方法，它利用`getRGBColorComponents()`了 Color 类的方法。

```
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.image.BufferedImage;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Test extends JFrame {

public Test(Color c1, Color c2) {
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(200, 200);
    setVisible(true);
    JPanel panel = new JPanel(new FlowLayout(FlowLayout.CENTER));
    panel.add(new JLabel(createColorIcon(c1)));
    panel.add(new JLabel(createColorIcon(c2)));
    add(panel);
}

public ImageIcon createColorIcon(Color c) {
    int w = 44, h = 20;
    BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);
    Graphics2D g = bi.createGraphics();
    if (c != null) {
        g.setColor(c);
        g.fillRect(0, 0, w, h);
    } else {
        g.setColor(Color.GRAY);
        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g.drawLine(1, 1, w - 2, h - 2);
        g.drawLine(1, h - 2, w - 2, 1);
    }
    g.setColor(Color.GRAY);
    g.drawRect(0, 0, w - 1, h - 1);
    g.dispose();
    return new ImageIcon(bi);
}

public static void main(String[] args) {

    Color c1 = Color.decode("0xFF0000");
    float[] f = c1.getRGBColorComponents(null);
    System.out.println(f.length);
    for (int i = 0; i < f.length; i++) {
        System.out.println(f[i]);
    }
    f[0] = f[0] * 0.8f;
    Color c2 = new Color(f[0],f[1],f[2]);
    new Test(c1,c2);

} 
```

}

您只需调用该`getRGBColorComponents()`方法，您就会得到一个数组，其中红色、绿色和蓝色的颜色值是 0.0 到 1.0 范围内的浮点值，其中 255（或 0xFF）的 int 值对应于 1.0 浮点值。正如我在示例末尾所做的那样，您只需将其与您选择的因子相乘即可。

# visual-studio-2010 - Visual Studio 中的 emacs 样式自动完成 (alt+/)

> ID：13819064
> 
> 赞同：3
> 
> 时间：2012-12-11T11:08:26.510
> 
> 标签：visual-studio-2010, emacs, visual-studio-2012, keyboard-shortcuts

Intellisense 在各种 Visual Studio 编辑器（C#、VB...）中都很好。

但是，在其他各种情况下，您的打字效率会急剧下降，因为 Intellisense 根本不适用（没有 XSD 的 XML，简单的文本文件）。

Emacs 和 eclipse 对这些情况有一个简单、通用的答案：`ALT`+ `/` **autocompletion**。

通过重复按`ALT`+ `/`，编辑器将循环显示单词完成建议。 `ALT`+`/`没有目标缓冲区语法的概念（可以是文本），只会处理单词。建议的单词被过滤为以反向出现顺序匹配已键入的字符。

**问题：**
有没有办法在 VS2012 (+Resharper 7.1) 中模拟这个快捷方式 - 甚至是以前的版本？我的大脑现在已经硬连线可以使用它，当我从 eclipse 切换到 VS 时，我觉得我失去了一半的手指。

**警告：**
我不是要一种方法来导入完整的 emacs 快捷方式集（因为我希望避免冲突，并且我想在 IDE 的其余部分坚持标准的 VS 快捷方式文化，与 resharper 混合很难足够的）。

# java - 将变量从一个类传递给paintComponent类

> ID：13819074
> 
> 赞同：2
> 
> 时间：2012-12-11T11:08:52.613
> 
> 标签：java, swing, paintcomponent

我第一次来这里，完全是新手。我的程序中有两个类，第一个类 SwingPaintDemo2 和第二个类 MyPanel。MyPanel 包含我的paintComponent(Graphics g) 方法。我的第一个类中有一个名为 isTrue 的布尔变量。我想这样做 if isTrue = true; 然后paintComponent 执行g.fillRect(l, w, 50, 50)。相信我，我已经用谷歌搜索了谷歌和谷歌......

```
import java.awt.*;
import javax.swing.*;

public class SwingPaintDemo2 extends JComponent {

public static boolean isTrue = true;

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI(); 
        }
    });
}

private static void createAndShowGUI() {

    JFrame f = new JFrame("Swing Paint Demo");
    JPanel MyPanel = new JPanel();
     MyPanel.setBorder(BorderFactory.createEmptyBorder(1000, 1000, 1000, 1000));
     MyPanel.setPreferredSize(new Dimension(250, 200));
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
    f.add(new MyPanel());
    f.pack();
    f.setVisible(true);

}

}

class MyPanel extends JComponent {

public MyPanel() {
    setBorder(BorderFactory.createLineBorder(Color.black));
}

public Dimension getPreferredSize() {
    return new Dimension(250,200);
}

public void paintComponent(Graphics g) {
    super.paintComponent(g); 
    int l = 30;
    int w = 30;

    if (SwingPaintDemo2.isTrue){g.setColor(Color.black); 
  g.fillRect(l, w, 50, 50);}

}  
} 
```

如何将我的 isTrue 变量添加到我的paintComponent 类（在paintComponent 类中获取变量未找到错误）？提前感谢您的帮助。

更新：在进行了前面建议的更改后，我刚刚在上面发布了我最新的代码。现在我得到“找不到符号 - 变量 isTrue”，任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:40:38.047

如果要访问公共静态变量，请始终使用封闭类的名称来引用它（而不是通过重新创建 SwingPaintDemo2 类的新实例）：

```
SwingPaintDemo2.isTrue 
```

您应该尽量避免使用静态变量。

现在，也许您打算声明一个常量，那么您需要声明它`final`

```
public static final boolean isTrue = true; 
```

最后，我还看到了一条可疑的线：

```
if (isTrue=true) 
```

应该是

```
if (isTrue) 
```

注意：变量应该以小写字母开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:41:26.223

由于`isTrue`是`SwingPaintDemo2`类的静态成员，您可以在不实例化新对象的情况下访问它，即`SwingPaintDemo2.isTrue`

所以你的代码看起来像：

```
public void paintComponent(Graphics g) {
    super.paintComponent(g); 
    int l = 30;
    int w = 30;
   SwingPaintDemo2 PaintDemo = new SwingPaintDemo2();

    if (SwingPaintDemo2.isTrue == true){
        g.setColor(Color.black); 
        g.fillRect(l, w, 50, 50);
    }

} 
```

# server.mappath - System.Web.HttpServerUtility.MapPath（字符串路径）

> ID：13819080
> 
> 赞同：0
> 
> 时间：2012-12-11T11:09:26.043
> 
> 标签：server.mappath

我在我的代码中使用 System.IO.File.Exists(Server.MapPath(path)) 。有时当字符 (:) 冒号出现时，Server.MapPath 会抛出 System.Web.HttpException: '/MyWeb/pages/javascript:void(0).aspx' 不是有效的虚拟路径的异常。

我如何抑制此错误并仍然调用 Server.MapPath()

问候...

# mysql - 从数据库转储导入 MySQL 表

> ID：13819091
> 
> 赞同：0
> 
> 时间：2012-12-11T11:09:52.393
> 
> 标签：mysql, mysqldump

> **可能重复：**
> [我可以从完整的 mysql mysqldump 文件恢复单个表吗？](https://stackoverflow.com/questions/1013852/can-i-restore-a-single-table-from-a-full-mysql-mysqldump-file)

任何人都知道您是否可以从完整的 MySQL 转储中导入特定表？我的客户要求他的数据库每小时转储一次，我们保留过去 3 天左右的 SQL 每小时备份以防万一。

编辑：在 Windows 服务器上运行的 MySQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:06:49.777

也许只备份/转储特定表会更容易？

我用这个： [http ://www.dwalker.co.uk/phpmysqlautobackup/](http://www.dwalker.co.uk/phpmysqlautobackup/)

强烈推荐 :) - 您可以传入要导出的特定表数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:45:37.260

我猜如果整个系统出现故障，您正在转储整个数据库以进行恢复，因此您希望继续这样做。

但是，在您转储整个数据库之后，也不需要花费太多额外的时间来转储单个文件。只需编写第二个 mysqldump 命令的形式

> mysqldump -u xxx -pxxx database_name table_name > database.table.yyyymmdd.sql

并且您可以在需要时将表格单独保存在文件中。

# c# - 将 DataTable 对象转换为继承自 DataTable 的自定义类对象

> ID：13819095
> 
> 赞同：0
> 
> 时间：2012-12-11T11:10:08.807
> 
> 标签：c#, inheritance, datatable

我想创建一个类，该类将添加一些有助于使用 DataTable 类的新方法。我想避免静态类，所以我创建了一个类

```
MyDataTable : DataTable 
```

和我在那里的方法。

如何将 DataTable 对象转换为 MyDataTable 对象？我已经试过了

```
MyDataTable dt2 = (MyDataTable)dt; 
```

但它返回一个 InvalidCastException。

我现在知道这种方式行不通。但我也不知道如何解决这个问题。谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:17:38.637

当然它会导致一个，`InvalidCastException`因为不是每个`DataTable`都是 type `MyDataTable`。您需要创建您的类型的实例：

```
MyDataTable myTable = new MyDataTable(); 
```

通常我提供最常用的我继承的类型的构造函数。 您可以从您的类型的构造函数中调用[基本构造函数。](http://msdn.microsoft.com/en-us/library/ms173115%28v=vs.80%29.aspx)例如：

```
public class MyDataTable : DataTable
{
    public MyDataTable(string name)
        : base(name)
    {
        // additional initialization
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:19:51.067

您甚至可以为继承自 DataTable 的自定义类编写隐式转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T16:37:34.617

以下文章概述了如何从 DataTables 和 DataRows 扩展：

[http://www.internetworkconsulting.net/extending-data-tables-and-rows](http://www.internetworkconsulting.net/extending-data-tables-and-rows)

# android - 如何将音频 .mp3 文件转换为字符串，反之亦然？

> ID：13819097
> 
> 赞同：1
> 
> 时间：2012-12-11T11:10:15.997
> 
> 标签：android, audio-streaming

是否可以将音频 mp3 文件转换为字符串数据以将数据发送到服务器，服务器会将字符串数据返回给我的应用程序，我想将该数据转换为 mp3 文件并播放音频。

我正在使用此代码将 mp3 文件转换为字符串数据

```
public static String readFileAsString(String filePath) throws java.io.IOException {

    BufferedReader reader = new BufferedReader(new FileReader(filePath));
    String line, results = "";
    while( ( line = reader.readLine() ) != null)
    {
        results += line;
    }
    reader.close();
    return results;

} 
```

我不知道如何从转换后的 strind 数据中取回我的 mp3 文件。

如果可能的话怎么办？任何人帮助我。

或任何其他满足此要求的解决方案告诉我：我想将音频和视频文件传递到服务器并从服务器返回以在应用程序中使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T11:23:42.943

使用 Base64.encodeToString() 试试这个[http://developer.android.com/reference/android/util/Base64.html#encodeToString%28byte%5B%5D,%20int%29](http://developer.android.com/reference/android/util/Base64.html#encodeToString%28byte%5B%5D,%20int%29)

```
File file = new File(Environment.getExternalStorageDirectory() + "/hello-4.wav");
byte[] bytes = FileUtils.readFileToByteArray(file);

String encoded = Base64.encodeToString(bytes, 0);                                       
Utilities.log("~~~~~~~~ Encoded: ", encoded);

byte[] decoded = Base64.decode(encoded, 0);
Utilities.log("~~~~~~~~ Decoded: ", Arrays.toString(decoded));

try
{
    File file2 = new File(Environment.getExternalStorageDirectory() + "/hello-5.wav");
    FileOutputStream os = new FileOutputStream(file2, true);
    os.write(decoded);
    os.close();
}
catch (Exception e)
{
    e.printStackTrace();
}

public class FileUtils {

    /**
     * Instances should NOT be constructed in standard programming.
     */
    public FileUtils() { }

    /**
     * The number of bytes in a kilobyte.
     */
    public static final long ONE_KB = 1024;

    /**
     * The number of bytes in a megabyte.
     */
    public static final long ONE_MB = ONE_KB * ONE_KB;

    /**
     * The number of bytes in a gigabyte.
     */
    public static final long ONE_GB = ONE_KB * ONE_MB;

    public static String readFileToString(
            File file, String encoding) throws IOException {
        InputStream in = new java.io.FileInputStream(file);
        try {
            return IOUtils.toString(in, encoding);
        } finally {
            IOUtils.closeQuietly(in);
        }
    }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T18:11:07.053

```
Error:(49, 41) error: cannot find symbol method readFileToByteArray(File) 
```

我认为您没有在 FileUtils 中定义该方法，是吗？

我已经通过更改代码解决了这个问题，如下所示：

```
//byte[] bytes = FileUtils.readFileToByteArray(file);
            byte[] bytes = new byte[(int)file.length()]; 
```

# ios - Facebook iOS SDK 3.1.1：如何检查过期令牌？

> ID：13819099
> 
> 赞同：0
> 
> 时间：2012-12-11T11:10:27.710
> 
> 标签：ios, facebook, session, sdk, token

如何通过 iOS SDK 检查访问令牌是否过期？

`[FBSession openActiveSessionWithReadPermissions:permissions allowLoginUI:NO completionHandler:nil]`当我的应用程序开始从缓存中加载会话时，我会调用。

活动会话如下所示：

```
<FBSession: 0x1fdcbae0,
state: FBSessionStateOpen,
loginHandler: 0x0,
appID: 1234567890,
urlSchemeSuffix: ,
tokenCachingStrategy:<FBSessionTokenCachingStrategy: 0x1fdcb840>, 
expirationDate: 4001-01-01 00:00:00 +0000,
refreshDate: 2012-12-10 07:09:18 +0000,
attemptedRefreshDate: 0001-12-30 00:00:00 +0000,
permissions:(
    email
) 
```

`FBSession.activeSession.isOpen`总是返回 YES。为什么`expirationDate`在遥远的未来？

在我的服务器上，我通过 PHP 调用一个方法，并被告知会话已过期。我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:48:49.237

检查过期令牌的最佳方法是实际尝试 API 调用并处理错误。例如，在您的 open 调用之后，您可以在完成处理程序中调用 startForMeWithCompletionHandler:。在 startForMeWithCompletionHandler: 完成处理程序中，您可以检查错误。

有关如何处理可能返回的错误的更多信息，请参阅此文档： [https ://developers.facebook.com/docs/reference/api/errors/](https://developers.facebook.com/docs/reference/api/errors/)

# asp.net - 在asp.net服务器端的选择框中设置特定选项

> ID：13819105
> 
> 赞同：0
> 
> 时间：2012-12-11T11:10:44.323
> 
> 标签：asp.net, html

在使用 HTML 选择控件（不是 .net 服务器控件 DropDownList）时，我想从服务器端设置一个具有特定值的项目。我该怎么做。我使用 asp.net 作为服务器端技术。

以下是我的选择框。我不想在其中添加 runnat="server" 属性

```
<select id="ddlPriceBetween" name="ddlPriceBetween">
    <option value="0" selected="selected">All</option>
    <option value="1">Less than 10,000 Rs. </option>
    <option value="2">10,000 - 20,000 Rs. </option>
    <option value="3">20,000 - 30,000 Rs. </option>
    <option value="4">30,000 - 40,000 Rs. </option>
    <option value="5">40,000 - 50,000 Rs. </option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:16:30.897

在 ASP.NET 中，通常的约定是使用与 Postback 模型配合得更好的服务器端控件。所以你可以使用等价物：

```
<asp:DropDownList ID="filterResultsBy" runat="server" CssClass="ddlFilter">
    <asp:ListItem Value="" Text="Select..." />
    <asp:ListItem Value="Date" Text="Date" />
    <asp:ListItem Value="Subject" Text="Subject" />
    <asp:ListItem Value="Status" Text="Status" />
</asp:DropDownList> 
```

这将允许您访问后面代码中的 filterResultsBy 变量并检索当前选择的值。要使此功能与 jQuery 等客户端脚本库一起工作，请添加一个类并使用类选择器而不是 id 选择器，因为 ASP.NET 服务器端控件中会发生名称修改：

```
$('.ddlFilter').change(function() {
    var sel = $(this).val(); 
    if(sel === 'DATE') { 
        hideAll(); // a function to hide all the divs first 
        $('#divDateRangeSearch').show(); 
    } else if (sel === 'SUBJECT') { 
        ///so on... 
    } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:46:18.620

如果您不想使用`runat='server'`或 ASP 下拉菜单，那么您将无法在服务器上访问它，您应该考虑的一件事是 html 标记的美妙之处在于它在客户端呈现并且它没有直接的服务器通信。所以如果你愿意，那么你需要间接的方法来设置使用 jquery 或 javascript 的选择，即你可以使用选定的值设置隐藏字段，并且在文档准备好时你可​​以设置选定的值。

例如：[设置选定值](https://stackoverflow.com/questions/3644449/jquery-setting-select-list-selected-based-on-text-failing-strangely/3644500#3644500)

[工作演示](http://jsfiddle.net/nick_craver/RB5wU/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T11:28:35.517

无法访问 .cs 页面上的 HTML 控件。因此，在您的情况下，将 runat 服务器放在您的选择控件中，如下所示

```
 <select id="ddlPriceBetween" name="ddlPriceBetween" runat="server">
      <option value="0" selected="selected">All</option>
      <option value="1">Less than 10,000 Rs. </option>
      <option value="2">10,000 - 20,000 Rs. </option>
      <option value="3">20,000 - 30,000 Rs. </option>
      <option value="4">30,000 - 40,000 Rs. </option>
      <option value="5">40,000 - 50,000 Rs. </option>
 </select> 
```

您的 .cs 代码将是

```
 ddlPriceBetween.SelectedIndex=yourindex. 
```

# android - Android SDK 获取 URL 失败

> ID：13819106
> 
> 赞同：3
> 
> 时间：2012-12-11T11:10:45.617
> 
> 标签：android, sdk, windows-8

Android SDK 未能获取到 URL，这是 SDK 管理器日志消息。

```
Fetching https://dl-ssl.google.com/android/repository/addons_list-2.xml
Fetched Add-ons List successfully
Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml
Done loading packages.
Fetching https://dl-ssl.google.com/android/repository/addons_list-2.xml
Failed to fetch URL https://dl-ssl.google.com/android/repository/addons_list-2.xml, reason: Cannot assign requested address: connect
Fetched Add-ons List successfully
Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml
Failed to fetch URL https://dl-ssl.google.com/android/repository/repository-7.xml, reason: Bind Cannot assign requested address: connect
Done loading packages. 
```

我使用的是`windows 8`64 位系统。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T11:22:39.207

可能是您组织的防火墙造成的问题。尝试在 Eclipse->Android SDK Manager->Tools->Options 中设置代理

# asp.net - Juice UI - 手风琴问题内的文本框

> ID：13819108
> 
> 赞同：0
> 
> 时间：2012-12-11T11:10:55.820
> 
> 标签：asp.net, accordion, juice-ui

我无法检索手风琴面板内的文本框的内容。我的标记如下：

```
<juice:Accordion ID="Accordion1" runat="server">

<juice:AccordionPanel ID="AccordionPanel1" runat="server" Title="Media ID">
<PanelContent>
  <asp:Label ID="LabelMediaID" runat="server" Text="Media ID"     AssociatedControlID="TextBoxMediaID"></asp:Label>    
  <asp:TextBox ID="TextBoxMediaID" runat="server"></asp:TextBox>
</PanelContent>
</juice:AccordionPanel> 
```

当用户点击一个按钮时，我的服务器端代码被触发：

```
protected void ButtonSearch_Click(object sender, EventArgs e)
{
    // Retrieve controls within accordion panels
    TextBox TextBoxMediaID = (TextBox)AccordionPanel1.FindControl("TextBoxMediaID");
    string mediaID= "abc";
    if (TextBoxMediaID != null)
        mediaID= TextBoxMediaID.Text; 
```

我能够成功检索我的文本框控件，但是当我尝试访问其 Text 属性时，它始终为空。

有人能帮我吗？恐怕我对 ASP.NET、Juice 等世界还很陌生。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:29:43.957

事实证明，我的问题是由使用母版页的 ASP.NET 项目引起的。

如果您不使用母版页，那么

```
TextBox TextBox1 = (TextBox)AccordionPanel1.FindControl("TextBox1");
string content= Request.Form[TextBox1.UniqueId]; 
```

完美运行。但是，当使用带有 ContentPlaceHolder 的母版页时，请使用以下代码：

```
ContentPlaceHolder cph = (ContentPlaceHolder)Master.FindControl("MainContent");
TextBox TextBox1 = (TextBox)AccordionPanel1.FindControl("TextBox1");
string content= Request.Form[cph.UniqueID + "$" + TextBox1.UniqueId]; 
```

希望这会节省很多人的时间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:13:10.667

选项 1 - 快速修复

对于您的页面，请`ClientIDMode="static"`在页面指令中生成，然后用于`Request.Form["TextBoxMediaID"]`获取文本框的值。

选项 2 - 调试

转到调试模式并尝试`AccordionPanel1.Controls[0].("TextBoxMediaID");`，或者 `AccordionPanel1.Controls[0].Controls[0].("TextBoxMediaID");`因为您不知道有多少服务器端控件。简单的解决方案是使用[查找控制递归函数](https://stackoverflow.com/questions/4955769/better-way-to-find-control-in-asp-net)。

# ios6 - iOS 6 和 GKA 成就报告AchievementWithCompletionHandler

> ID：13819109
> 
> 赞同：0
> 
> 时间：2012-12-11T11:10:57.753
> 
> 标签：ios6, game-center

我正在为 iOS 游戏进行更新并面临下一个问题。我使用这段代码

```
[achievement reportAchievementWithCompletionHandler:^(NSError *error)
{
   if (error != nil)
   {
     NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
     [storedDictionary setObject:achievement forKey:identifier];
     NSLog(@"Game Center: could not report achievement progress for %@, stored in defaults", identifier);
   }
}]; 
```

报告成就进度（看起来很熟悉，是吗？是的，来自 Apple 教程的代码）。它在 iOS 5 或更低版本的设备上运行良好，但在 iOS 6 上没有任何反应。

我找到了线索，我不需要费心在 iOS 6 中保存推迟的成就，因为它会为我做这件事，但[手册](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/Achievements/Achievements.html#//apple_ref/doc/uid/TP40008304-CH7-SW13)仍然很清楚错误处理。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:54:02.427

也许你打错了这个问题的代码？它看起来像这条线：

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

应该：

NSUserDefaults *storedDictionary = [NSUserDefaults standardUserDefaults];

# php - 忽略搜索突出显示功能中的短字符和特定单词

> ID：13819111
> 
> 赞同：0
> 
> 时间：2012-12-11T11:11:01.543
> 
> 标签：php, regex, preg-replace, explode, implode

我在这里有关键字**“加粗”**功能：

```
$ignore = array ('div', 'class', 'high', 'light', 'highlight');
$keywords = explode(' ', $qsvarus);
$title[$key] = preg_replace('/'.implode('|', $keywords).'/i', '<b>$0</b>', $title[$key]);
$infoo[$key] = preg_replace('/'.implode('|', $keywords).'/i', '<b>$0</b>', $infoo[$key]); 
```

问题是它有时会捕获我的一些 html 标签。如何告诉它在 $keywords 时忽略 $ignore 数组中少于 3 个字母和某些特定单词的所有内容`<b></b>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:20:02.713

我会先简单地循环关键字数组，删除忽略数组中的所有匹配项（使用 in_array）以及任何 3 个字符或更少字符的关键字。

然后，如果您想确保自己不在标签中，则以下内容就足够了：

```
/\b(keyword|keyword|keyword)\b(?![^<]*[>])/ 
```

我基本上附加了一个负面的前瞻：

```
(?![^<]*[>]) 
```

只要`>`前面没有打开标签的关闭 html 不匹配，正则表达式就会`<`匹配。我确实得到了一个结束标签，你应该能够*假设你在一个标签内。

把它放回preg_replace：

```
preg_replace('/\b('.implode('|', $keywords).')\b(?![^<]*[>])/i', '<b>$1</b>', $subject); 
```

*   这确实假设没有未编码的大于 ( `>`)

# javascript - javascript 已加载第 3 方对象

> ID：13819115
> 
> 赞同：0
> 
> 时间：2012-12-11T11:11:11.250
> 
> 标签：javascript, setinterval, loaded

> **可能重复：**
> [如何在没有 jquery 的情况下检查跨浏览器的脚本元素加载事件](https://stackoverflow.com/questions/12574549/how-to-check-the-script-element-load-event-accross-browser-without-jquery)

我正在写一个页面来为某人生成图表。我正在使用 Google Charts API。

我想动态加载 API。我在使用“google”全局对象时遇到问题。如何检测是否已声明？如果是我自己的脚本，我想我可以使用回调。目前我有：

```
var addScript = function(src){
    var head= document.getElementsByTagName('head')[0];
    var script= document.createElement('script');
    script.type= 'text/javascript';
    script.src= src;
    head.appendChild(script);
}

var init = function (){           

    addScript('https://www.google.com/jsapi');

    var waitForScript = setInterval(function(){

        if(window['google']!==undefined){
            window.clearInterval(waitForScript);
            google.load('visualization', '1.0', {
                'packages':['corechart']
            });

        }

    },50);

} 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:21:29.453

属性的存在将始终自动转换为 true，因此它就足够了：

```
if (window['google']) {
//do stuff
}; 
```

此外，在 Opera 中，您不能保证始终拥有`head`标签。所以你做这样的脚本附加：

```
var addScript = function(src){
    var script= document.createElement('script');
    script.type= 'text/javascript';
    script.src= src;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(script);
} 
```

# java - Hashtable接口，用于设置对象实例的键

> ID：13819116
> 
> 赞同：0
> 
> 时间：2012-12-11T11:11:15.803
> 
> 标签：java, hashtable

我添加到哈希表方法失败，我做错了什么？或者我误解了什么？

测试：

```
@Test
public void testAddKeyValue() {
    AdminController cont = new AdminController();

    Apartment o1 = new Apartment(1, 4, "Maier B", true);
    ArrayList<Expense> exp = new ArrayList<>();

    cont.addKeyWithList(o1, exp);
    assertTrue(cont.isEmpty()); // ISSUE > the test works if it is true, but it is supposed be  False.
} 
```

回购类：

```
public class Repository extends HashMap<Apartment, ArrayList<Expense>>{
    private Map<Apartment,ArrayList<Expense>> dic; // last expense object refers to curret month
    Iterator<Map.Entry<Apartment, ArrayList<Expense>>> it;
    public void addKeyWithList(Apartment apt, ArrayList<Expense> exp){
        dic.put(apt, exp);
        }
} 
```

为什么我的测试不起作用？或者我在代码中哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:20:28.483

不要像你一样扩展 HashMap 。使用 HashMap 并委托给它：

```
public class Repository {
    private Map<Apartment, List<Expense>> dic = new HashMap<Apartment, List<Expense>>();

    public void addKeyWithList(Apartment apt, ArrayList<Expense> exp){
        dic.put(apt, exp);
    }

    public boolean isEmpty() {
        return dic.isEmpty();
    }
} 
```

目前，Repository 是一个 HashMap，但您不会在其中存储任何内容：您将值存储在 Repository 中包含的另一个 HashMap 中。

此外，将迭代器存储在字段中是一个坏主意。迭代器只能使用一次。一旦他们迭代了，就不能再迭代了。它应该是一个局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:24:54.907

而不是扩展，`HashMap<Apartment, ArrayList<Expense>>` 因为它不寻常，您只需创建一个变量，就像您已经在您的类中创建的一样。并根据你喜欢的 isEmpty() 实现你需要的方法：

```
public class Repository {
    private Map<Apartment,ArrayList<Expense>> dic; // last expense object refers to curret month
    Iterator<Map.Entry<Apartment, ArrayList<Expense>>> it;
    public void addKeyWithList(Apartment apt, ArrayList<Expense> exp){
        dic.put(apt, exp);
        }

   public boolean isEmpty() {
      return dic.isEmpty();
   }
} 
```

# pear - 调用 PEAR 包中未定义的方法 HTML_QuickForm_Error

> ID：13819118
> 
> 赞同：1
> 
> 时间：2012-12-11T11:11:26.267
> 
> 标签：pear

我正在使用梨来生成表单。Pear 可以添加元素，也可以获取元素。但在我的情况下，我在单击添加更多按钮时使用 jquery append 方法添加元素。因此，当我尝试提交表单时，梨 getElement 方法会引发错误。由于我的页面的dom模型是动态变化的梨getElement找不到那个元素。有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:48:48.750

[HTML_QuickForm2](http://pear.php.net/package/HTML_QuickForm2)[从](http://pear.php.net/package/HTML_QuickForm2/download/2.0.0beta2)2.0.0beta2开始支持。使用它来代替旧的和过时的 HTML_QuickForm v1。

# eclipse-rcp - rcp应用程序如何禁止在文件夹布局中延迟加载视图

> ID：13819127
> 
> 赞同：-1
> 
> 时间：2012-12-11T11:11:54.537
> 
> 标签：eclipse-rcp

我有一个包含顶视图的透视图和一个带有两个堆叠视图的文件夹：

当在顶视图中进行选择时，文件夹中的视图都需要更新。这是通过添加选择侦听器来完成的。但是，只有实际显示的视图才会对选择做出反应。当我选择另一个视图时，它仍然是空的。

添加选择侦听器的代码放置在视图的 init() 方法中，显然只有在加载透视图时文件夹中的第一个视图才会调用此方法。

有没有办法关闭这种“延迟加载”，以便在创建透视图时创建所有视图（并调用它们的 init() 方法）？

提前感谢您的帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:23:10.233

这不是一个错误，它是一个功能。Eclipse 极大地受益于这种行为，因为并非所有插件/视图/等。只要它们不是真正需要的，它们就会被加载。这就是您的听众最近注册的原因（一旦真正创建了视图内容）。

但回到您的问题：您可以尝试手动创建/激活所有这些。

只需调用

```
PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().showView(<ViewID>) 
```

对于他们每一个人。如果它们没有被激活并被带到前面（但显示在堆栈的背景中），那么请查看带有 secID（可以为 null）和附加特定模式标志的重载 showView() 方法。

# django - Django Haystack 更新索引更快

> ID：13819130
> 
> 赞同：12
> 
> 时间：2012-12-11T11:12:05.443
> 
> 标签：django, solr, django-haystack

我已经使用 Django Haystack 有一段时间了，它很棒！我有一个相当繁重的网站，其中包含需要不时更新的数据（15 到 30 分钟）。

使用`python manage.py update_index`时需要花费大量时间来更新数据。有没有办法加快这个速度？或者如果可能的话，也许只更新更改的数据..

我目前正在使用 Django Haystack 1.2.7 和 Solr 作为后端和 Django 1.4。

谢谢！！！

* * *

编辑：

是的，我已经尝试阅读文档的那一部分，但我真正需要的是一种加快索引速度的方法。也许只更新最近的数据而不是全部更新。找到`get_updated_field`了但是不知道怎么用 在文档中只提到了使用它的原因，但没有显示实际示例。

* * *

编辑2：

```
start = DateTimeField(model_attr='start', null=True, faceted=True, --HERE?--) 
```

* * *

编辑 3：

好的，我已经实现了下面的解决方案，但是当我尝试重建索引（有 45000 个数据）时，它几乎让我的电脑崩溃了。等待10分钟后出现错误：

```
 File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/dist-packages/haystack/management/commands/rebuild_index.py", line 16, in handle
    call_command('update_index', **options)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 150, in call_command
    return klass.execute(*args, **defaults)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/dist-packages/haystack/management/commands/update_index.py", line 193, in handle
    return super(Command, self).handle(*apps, **options)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 304, in handle
    app_output = self.handle_app(app, **options)
  File "/usr/local/lib/python2.7/dist-packages/haystack/management/commands/update_index.py", line 229, in handle_app
    do_update(index, qs, start, end, total, self.verbosity)
  File "/usr/local/lib/python2.7/dist-packages/haystack/management/commands/update_index.py", line 109, in do_update
    index.backend.update(index, current_qs)
  File "/usr/local/lib/python2.7/dist-packages/haystack/backends/solr_backend.py", line 73, in update
    self.conn.add(docs, commit=commit, boost=index.get_field_weights())
  File "/usr/local/lib/python2.7/dist-packages/pysolr.py", line 686, in add
    m = ET.tostring(message, encoding='utf-8')
  File "/usr/lib/python2.7/xml/etree/ElementTree.py", line 1127, in tostring
    ElementTree(element).write(file, encoding, method=method)
  File "/usr/lib/python2.7/xml/etree/ElementTree.py", line 821, in write
    serialize(write, self._root, encoding, qnames, namespaces)
  File "/usr/lib/python2.7/xml/etree/ElementTree.py", line 940, in _serialize_xml
    _serialize_xml(write, e, encoding, qnames, None)
  File "/usr/lib/python2.7/xml/etree/ElementTree.py", line 940, in _serialize_xml
    _serialize_xml(write, e, encoding, qnames, None)
  File "/usr/lib/python2.7/xml/etree/ElementTree.py", line 915, in _serialize_xml
    write("<" + tag)
MemoryError 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-11T18:55:25.310

`get_updated_field`应该返回一个字符串，其中包含模型上包含模型更新日期的属性名称（[haystack docs](https://django-haystack.readthedocs.org/en/latest/searchindex_api.html?highlight=get_updated_field#get-updated-field)）。带有 auto_now=True 的 DateField 将是理想的（[Django docs](https://docs.djangoproject.com/en/dev/ref/models/fields/#datefield)）。

例如，我的 UserProfile 模型有一个名为 updated 的字段

**模型.py**

```
class UserProfile(models.Model):
    user = models.ForeignKey(User)
    # lots of other fields snipped
    updated = models.DateTimeField(auto_now=True) 
```

**search_indexes.py**

```
class UserProfileIndex(SearchIndex):
    text = CharField(document=True, use_template=True)
    user = CharField(model_attr='user')
    user_fullname = CharField(model_attr='user__get_full_name')

    def get_model(self):
        return UserProfile

    def get_updated_field(self):
        return "updated" 
```

然后，当我运行`./manage.py update_index --age=10`它时，它只会索引过去 10 小时内更新的用户配置文件。

# c# - 如何制作等待响应最多 30 秒的定时对话框？

> ID：13819133
> 
> 赞同：1
> 
> 时间：2012-12-11T11:12:18.443
> 
> 标签：c#, dialog

我试图围绕 C# 中的线程进行思考，但我很难实现这种行为。

我需要一个简单的是/否对话框，`DialogResult.No`在 30 秒后返回。

到目前为止，我得到的是：

```
Thread th = new Thread(() =>
{
    try
    {
        result = message.ShowDialog();
    }
    catch (Exception)
    {

    }
});
th.Start();
Thread.Sleep(30000);
th.Abort(); 
```

当我在对话框中选择是或否时，它仍会等待 30 秒，我需要在收到响应时停止线程。

这可能是没有道理的，但我对 C# 比较陌生，并且真的可以在这方面使用一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:19:55.727

您可以在初始化表单时使用计时器。当计时器到期时，您关闭您的表单。

```
Timer time1 = new Timer();
time1.Elapsed += new ElapsedEventHandler(OnTimedEvent);
time1.Interval = 30000; // 30 secs
...
time1.Enabled = true; // Start the timer
message.ShowDialog();

private void OnTimedEvent(object source, ElapsedEventArgs e)
{
    // Close your Form
    message.Close();
    // Maybe you could set a variable, that indicates you, that the timer timed out

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:21:34.500

您必须覆盖`ShowDialog()`和`ShowDialog(owner)`。当您的显示对话框将被调用时，您将启动一个计时器并转发到`base.ShowDialog()`. 当计时器引发滴答事件时，只需调用`Close()`.

这是一个示例实现：

```
public partial class FormTimed : Form
{
    private String _OriginalText;
    private DateTime _StartTime;
    private Timer _Timer;

    public FormTimed()
    {
        InitializeComponent();
        InitializeTimer();

        Duration = TimeSpan.FromSeconds(10);
    }

    [DefaultValue(typeof(TimeSpan), "00:00:10")]
    public TimeSpan Duration { get; set; }

    public override string Text
    {
        get
        {
            return _OriginalText;
        }
        set
        {
            _OriginalText = value;
            base.Text = value;
        }
    }

    public void DisableTimer()
    {
        _Timer.Stop();
        base.Text = _OriginalText;
    }

    public void ResetTimer()
    {
        _StartTime = DateTime.UtcNow;
        _Timer.Start();
    }

    public new DialogResult ShowDialog()
    {
        StartTimer();
        return base.ShowDialog();
    }

    public new DialogResult ShowDialog(IWin32Window owner)
    {
        StartTimer();
        return base.ShowDialog(owner);
    }

    private void InitializeTimer()
    {
        _Timer = new Timer();
        _Timer.Interval = 100;
        _Timer.Tick += OnTimerTick;
    }

    private void OnTimerTick(object sender, EventArgs e)
    {
        var finishTime = _StartTime + Duration;
        var remainingDuration = finishTime - DateTime.UtcNow;

        if (remainingDuration < TimeSpan.Zero)
        {
            Close();
        }

        base.Text = _OriginalText + " (" + (int)remainingDuration.TotalSeconds + ")";
    }

    private void StartTimer()
    {
        _StartTime = DateTime.UtcNow;
        _Timer.Start();
    }
} 
```

# jquery - jQuery 日期选择器验证问题

> ID：13819135
> 
> 赞同：3
> 
> 时间：2012-12-11T11:12:25.867
> 
> 标签：jquery, jquery-ui, validation, datepicker

我正在尝试验证用户选择日期的两个输入框 - 我已经设法限制用户选择上一个日期，如果他们选择第一个文本框作为今天的日期，下一个输入框必须是一天提前（未来日期）

在提交时，我试图让它验证，所以如果你不选择其中一个输入框，它会给你一条错误消息。

```
<asp:Label ID="lblPickupDate" runat="server" Text="Pick-up Date" CssClass="lblPickup"></asp:Label>
<input type="text" class="datePicker" id="validBeforeDatepicker" value="Please select a date" name="pickupdate" /> <span class="ui-icon ui-icon-calendar"></span>

<asp:Label ID="lblReturnDate" runat="server" Text="Return Date" CssClass="lblReturnDate"></asp:Label>
<input type="text" class="datePicker" id="validAfterDatepicker" value="Please select a date" name="returdate" /> <span class="ui-icon ui-icon-calendar"></span>

$(function () {
    $("#validBeforeDatepicker").datepicker({
        showOn: "button",
        buttonImage: "/assets/img/calendar.gif",
        buttonImageOnly: true,
        minDate: 0,
        required: true,
        message: "This is a required field",
        dateFormat: 'dd-mm-yy',
        onClose: function() {$(this).valid();}
    });
});

$(function () {
    $("#validAfterDatepicker").datepicker({
        showOn: "button",
        buttonImage: "/assets/img/calendar.gif",
        buttonImageOnly: true,
        minDate: +1,
        required: true,
        message: "This is a required field",
        dateFormat: 'dd-mm-yy',
        onClose: function() {$(this).valid();}
    });
}); 
```

我已经将 required 设置为 true，所以如果你错过它不应该抛出验证错误吗？

表格所在的网站：[http ://www.rentruck.co.uk](http://www.rentruck.co.uk)

我也看过这个，但似乎无法复制它[http://keith-wood.name/uiDatepickerValidation.html](http://keith-wood.name/uiDatepickerValidation.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T11:39:35.473

您可以尝试使用这两个验证库来[验证 jQuery UI Datepicker](http://seesparkbox.com/foundry/validating_the_jquery_ui_datepicker)。

[H5F 的工作示例](http://jsfiddle.net/gh/gist/jquery/1.7.2/2628275/)

**CSS**：

```
.valid {
  background: green;
  color: #fff;
}
.error {
  background: red;
  color: #fff;
}
​ 
```

**HTML**：

```
<form id="h5ftest">
    <input type="date" required pattern="\d{2}\/\d{2}\/\d{4}">
</form>​ 
```

**jQuery** :

```
$(function() {
  H5F.setup( $( "#h5ftest" ) );

  $( "[type=date]" ).datepicker({
    onClose: function() {
      $( this ).focus().blur();
    }
  });
});​ 
```

[或jQuery Validate 插件](http://jsfiddle.net/gh/gist/jquery/1.7.2/2628089/)的工作示例

**CSS**：

```
.valid {
  background: green;
  color: #fff;
}
.error {
  background: red;
  color: #fff;
}​
​ 
```

**HTML**：

```
<form id="jQueryValidateTest">
    <input type="date" required>
</form>​ 
```

**jQuery** :

```
$(function() {

  $( "#jQueryValidateTest" ).validate();

  $( "[type=date]" ).datepicker({
    onClose: function() {
      $( this ).valid();
    }
  });
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T11:29:00.787

在部分的[Datepicker 站点上](http://jqueryui.com/datepicker/#date-range)`View source`，他们建议在`onClose`事件中手动检查日期范围：

```
$(function() {
    $( "#from" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onClose: function( selectedDate ) {
            $( "#to" ).datepicker( "option", "minDate", selectedDate );
        }
    });
    $( "#to" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onClose: function( selectedDate ) {
            $( "#from" ).datepicker( "option", "maxDate", selectedDate );
        }
    });
}); 
```

# knockout.js - Knockoutjs 多选未更新

> ID：13819141
> 
> 赞同：0
> 
> 时间：2012-12-11T11:12:38.870
> 
> 标签：knockout.js, multi-select

更新代码：

[http://jsfiddle.net/S96pA/1/](http://jsfiddle.net/S96pA/1/)

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script src="http://github.com/downloads/SteveSanderson/knockout/knockout-2.2.0.js" type="text/javascript"></script>

</head>

<body>

<form id="new-pub">

    <input data-bind="value: Title" /><br/>

    <select size="10" multiple="multiple"
            data-bind="selectedOptions: Attachment, options: AttachmentSelect"></select>

</form>

<script type="text/javascript">

var AttachmentSelect=["C2012_info_mail.pdf", "C2012_programme.pdf"];

 var viewModel =
 {
    Title : ko.observable('Hello world'),
    Attachment: ko.observableArray([ "C2012_info_mail.pdf" ,  "C2012_programme.pdf" ])
};

 ko.applyBindings(viewModel, document.getElementById("new-pub"));

</script>

</body>
</html>
​ 
```

预期，该`selected`项目被突出显示（选择），但没有任何反应。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:17:54.010

您必须为您的选择添加`value`绑定：

```
<select data-bind="options: myList, value: selected" multiple="multiple" size="5"> 
```

viewModel 也是一个函数，所以你必须创建它的实例：

```
ko.applyBindings(new viewModel()); 
```

这是工作小提琴：http: [//jsfiddle.net/wM3EX/4/](http://jsfiddle.net/wM3EX/4/)

**编辑**：

更改出价顺序`options`和`selectedOptions`出价。选项应该始终是第一个：

```
<select size="10" multiple="true"
        data-bind="options: AttachmentSelect, selectedOptions: Attachment">
</select> 
```

工作小提琴：http: [//jsfiddle.net/S96pA/2/](http://jsfiddle.net/S96pA/2/)

# php - 在 PHP 文件中存储加密密钥的安全性

> ID：13819143
> 
> 赞同：7
> 
> 时间：2012-12-11T11:12:51.063
> 
> 标签：php, security, codeigniter, encryption

所以我正在加密数据，将其存储在数据库中，并使用 mcrypt 对其进行解密。我想知道将加密密钥存储在 public_html 目录之外的 php 文件中是否安全？

将其存储在文件中的原因是它需要用于多次加密，以便多个用户可以解密某些数据，并且我认为将其存储在文件中比存储在数据库表中更安全，就在加密的旁边数据。

有哪些潜在的安全风险？黑客是否有可能获得对该文件的访问权限，从而获得密钥？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T11:23:56.063

将其存储在 public_html 之上是一个好主意。您的文件应配置正确的权限，以便只有 Web 服务器或需要它的用户才能读取它。

一种选择是将密钥拆分并存储在不同的地方，例如，它的一部分在文件系统上的文件中，一部分在数据库中。这样做的好处是攻击者更难获得完整的密钥，因为他们需要访问文件系统和数据库。

还要考虑您的服务器环境对安全性有影响，例如共享主机不如专用服务器安全。

没有人可以说攻击者不可能访问密钥，因为这取决于您的整个服务器设置和配置。服务器最常因网络服务器等软件中的漏洞而受到损害，因此您应该遵循良好的安全实践，例如保持软件最新。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-11T11:26:10.707

如果您的**服务器**（如在其操作系统中）受到威胁，则“游戏结束”，无论您的密钥是存储在文件中还是存储在数据库中。所以，是的，“黑客完全有可能获得对这个文件的访问权，从而获得密钥”——通过闯入你的服务器的操作系统。

如果 apache 或 PHP 受到威胁，但操作系统没有受到威胁，您最终会遇到鸡与蛋的问题：如果您将密钥放在 apache/PHP 可以访问它的地方，那么任何闯入 apache/PHP 的人都可以使用它. 如果没有，你不能在你的 webapp 中使用它。

这只留下了一个场景，你的 webapp 被破坏了，而不是周围的基础设施——在这种情况下，一个文件可能确实是一个好主意：许多入侵（例如大多数 SQL 注入变体）可以访问数据库，但不是文件系统。

对于敏感环境，我们有时会选择一个模型，其中加密/解密通过一对 FIFO 处理，真正的加密由外部进程完成 - 这可以做一些启发式并拒绝对可疑模式进行解密。

# perl - 如何获取 Net::OpenSSH->scp_get() 方法复制的文件列表

> ID：13819153
> 
> 赞同：2
> 
> 时间：2012-12-11T11:13:25.630
> 
> 标签：perl, scp, openssh

我想将一个目录从远程机器复制到本地。为此，我使用 Net::OpenSSH perl 模块。它工作正常，文件也被复制到我的本地机器上。但我想获取复制的文件列表。如何获取文件列表。

我不想使用 Net::SCP。

```
use Net::OpenSSH;
use Data::Dumper;

my $host='1.1.1.1';
my $credentials={username => 'root', password =>'abc123'};

my $ssh_obj = Net::OpenSSH->new(
                $host,
                user     => $credentials->{username},
                password => $credentials->{password},

            );
ooen $fh, ">/tmp/abc_scp" or die "$!";
my $opts={recursive => 1, glob => 1, timeout => 100, quiet => 1,stderr_to_stdout => 1,stdout_fh => $fh};
my $op=$ssh_obj->scp_get($opts, "/home/ABC", "/tmp/"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:45:45.430

Net::OpenSSH scp 方法不允许这样做，但还有其他方法：

*   使用`tar`：

    ```
    $ssh->system({stdout_file => '| (cd /tmp/ && tar xvzf - ) 2>tar.log'},
                 '(cd /tmp/ABC && tar czf - .)'); 
    ```

    那么您将不得不阅读`tar.log`以获取复制的文件列表。

*   通过 Net::OpenSSH + [Net::SFTP::Foreign](http://metacpan.org/module/Net%3a%3aSFTP%3a%3aForeign)（或仅 Net::SFTP::Foreign）使用 SFTP：

    ```
    # untested!
    my $ssh = Net::OpenSSH->new(...);
    my $sftp = $ssh->sftp;

    my @log;
    $sftp->rget("/home/ABC", "/tmp",
                wanted => sub { push @log, $_[1]->{filenane} },
                on_error => sub { push @log if $_[1]->{filename} eq $log[-1] }); 
    ```

*   使用可以在 Net::OpenSSH 之上运行的[Net::SSH::Any的](http://metacpan.org/module/Net%3a%3aSSH%3a%3aAny)[开发版本：](http://github.com/salva/p5-Net-SSH-Any)

    ```
    my $ssh = Net::SSH::Any->new($host, ..., backend => 'Net::OpenSSH');
    my @log;
    $ssh->scp_get({recursive => 1, action_log => \@log}, "/home/ABC", "/tmp"); 
    ```

    Net::OpenSSH 本身并没有实现 SCP 协议，而是使用 OpenSSH`scp`二进制文件，遗憾的是它不会返回复制的文件列表。Net::SSH::Any 有自己的用 Perl 编写的 SCP 实现，因此可以做更多的事情。最终，一旦 Net::SSH::Any 上的 SCP 实现变得成熟，我可能会将其反向移植到 Net::OpenSSH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:20:51.633

您应该真正考虑使用仅`rsync`基于无密码密钥的 ssh，而只需从 Perl 调用它。它将为您带来以下好处：

*   第二次和进一步尝试的同步时间非常快。它甚至会重新启动大文件的部分下载。
*   不太依赖 Perl，或者有时是奇怪的模块行为（不要误会我的意思——我喜欢 Perl，但一切都有它的位置）。
*   您可以进行递归同步并删除旧的本地文件：

    ```
    rsync -av --delete --progress --partial --stats \
          user@host:/src/dir/ dst/dir/ 
    ```

*   您将获得同步文件的列表（使用选项`-v`- 详细）。
*   您可以使用 rsync 选项获得一些同步统计信息`--stats`。
*   您可以使用选项限制同步过程使用的网络带宽`--bwlimit`。
*   您永远不应该将密码（尤其是 root！）嵌入到您的脚本中。配置无密码 ssh 并更好地睡眠。`rsync`会利用它。

# javascript - 当鼠标悬停在另一个 div 上时，以任何效果（如淡入淡出）更改 div 中的图像

> ID：13819154
> 
> 赞同：0
> 
> 时间：2012-12-11T11:13:25.930
> 
> 标签：javascript, jquery, html, css

下面显示的是我的 html 代码的格式。在标题 div 我有一个图像。包含 div 内的每个框（框 1、框 2、框 3）都有链接（软件开发（框 1）、图形设计（框 2）和技术培训（框 3））。单击这些链接时，我将转到具有它们的单独页面自己的标题图像。所以我为每个框有 3 个标题图像和主页中的默认标题图像。在主页中，当我将鼠标悬停在 box1 div 中时，标题图像应该更改为具有效果的 box1 标题图像像fadeIn并在鼠标移出时返回我的默认图像。box2和box3也是如此。请帮助我用CSS或JS或jQuery做这件事。谢谢

```
<body>
   <div class="wrapper">
      <div class="out">
         <div class="in">
            <div id="header"></div>
            <div class="contain">
               <div class="box1"></div>
               <div class="box2"></div>
               <div class="box3"></div>
            </div>
         </div>
      </div>
   </div>
</body> 
```

CSS：

```
.wrapper{
    width: 100%
    height: auto;
    margin: 0px;
}
.out{
    margin: auto;
    width: 1000px;
    height: 730px;
    border-top: 5px solid  #333333;
}
.in{
    width: 900px;
    height: 640px;
    margin: auto;
    margin-top: 25px;
}
#header{
    background:url(../img/Untitled-1.jpg);
    height: 175px;
    width: 900px;
    margin: 0px;
}
.contain{
    margin: 0px;
    width: 900px;
    height: 428px;
}
.box1{
    height: 360px;
    width: 295px;
    float: left;
    margin: 67px 0px 0px 0px;
    position: absolute;
    background-color: #e6e7e9;
    border-bottom: 4px solid #735d8c;
}
.box2{
    height: 360px;
    width: 295px;
    float: left;
    margin: 67px 0px 0px 302px;
    position: absolute;
    background-color: #e6e7e9;
    border-bottom: 4px solid #735d8c;
}
.box3{
    height: 360px;
    width: 295px;
    float: left;
    margin: 67px 0px 0px 602px;
    position: absolute;
    background-color: #e6e7e9;
    border-bottom: 4px solid #735d8c;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:03:42.143

我做了一个[BIN](http://jsbin.com/ilawuj/4/)

我为所有 3 个 div 放置相同的图像，例如

```
 $('#content,#content2,#content3').mouseover(function(){

$('#header').css('background','url(http://www.google.com/mobile/android/images/android.jpg)')

}); 
```

你改变你各自的图像，比如

```
 $('#content').mouseover(function(){

$('#header').css('background','url(http://www.google.com/mobile/android/images/android.jpg)')

});

 $('#content2').mouseover(function(){

$('#header').css('background','url(http://www.google.com/mobile/android/images/android.jpg)')

});.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:01:31.040

看到这个：http: [//jsfiddle.net/xTjQT/2/](http://jsfiddle.net/xTjQT/2/)

```
 $('a').mouseover(function() {
    var src = $(this).attr('alt');
alert(src);
$('#header img').stop().fadeOut(100, function() {
     $(this).attr('src', src);
     $(this).fadeIn(100);
});
});

$('a').mouseout(function() {
$('#header img').stop().fadeOut(200, function() {
     $(this).attr('src', 'http://jsfiddle.net/img/logo.png');
     $(this).fadeIn(100);
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:16:58.957

## *[jsBin 演示](http://jsbin.com/olehuz/3/edit)*

jQuery：

```
var currPage = 0; // PLAY HERE: set here current page (0 = home)

var $header = $('#header');
var $headerImg = $header.find('img');

$headerImg.eq( currPage ).show().addClass('currentImg');

// clone images to boxes:
var c = 0;
$('.box').each(function( i ){

  $(this).prepend( $headerImg.eq(i==currPage? (i+1+c++) : c+i).clone() );
});

$('.box img[class^=headImg]').on('mouseenter mouseleave', function( e ){

  var opacity = e.type=='mouseenter' ? 1 : 0 ;
  var myClass = $(this).prop('class'); // get class  
  var $mainImg = $header.find('img.'+myClass);

  $headerImg.hide();
  $mainImg.stop().fadeTo(300, opacity);
  $('.currentImg').stop().fadeTo(600, !opacity);

}); 
```

HTML：

```
<div class="wrapper">
  <div class="out">

     <div class="in">

        <div id="header">
          <img class="headImg1" src="home.jpg" alt="" />
          <img class="headImg2" src="ONE.jpg" alt="" />
          <img class="headImg3" src="TWO.jpg" alt="" />
          <img class="headImg4" src="THREE.jpg" alt="" />
        </div>

        <div class="contain">
           <div class="box">

          </div>
           <div class="box">

          </div>
           <div class="box">

          </div>
        </div>

     </div>

  </div>
 </div> 
```

修改后的 CSS 部分：

```
/*ADDED*/
#header img{
  position:absolute;
  display:none;
}

.contain{
    margin: 0px;
    width: 900px;
    height: 428px;
}
.box{ /* CHANGED */
    height: 360px;
    width: 294px;
    float: left;
    margin: 67px 3px 0px;
    position: relative;
    background-color: #e6e7e9;
    border-bottom: 4px solid #735d8c;
}

/* ADDED */
.box img{
  width:100%;
} 
```

# javascript - 如何使用 jquery 追加数据？

> ID：13819157
> 
> 赞同：0
> 
> 时间：2012-12-11T11:13:28.303
> 
> 标签：javascript, jquery, dom

我需要使用 dom 将值添加到跨度中。但现在我正在使用字符串操作。如何将其更改为 dom 或附加值。我需要使用 dom 以 html 格式获取返回值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:23:23.650

您可以附加如下：

```
$('.ClassName').append('<p>Test</p>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:35:38.323

```
$('#id').after('<p>Test</p>');
$('#id').before('<p>Test</p>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:20:20.660

将 layer.id 定义为一些文本，这将在所有 span 元素内容中被替换

```
$.each($("span"),function(){
$(this).html(layer.id);
}); 
```

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T12:06:51.943

试试这个：

```
$("<li class='" + liClass + "'>" + preElement + 
  "<label for='" + layer.id + "'>" + layer.name + "</label>").appendTo('ul.class'); 
                                                               //----------^^^^^ 
                                                               // use the id 
                                                               // or class of 
                                                               //the specific ul 
```

改用`appendTo()`return 并将其附加到您的元素。

`(as i see you are returning li then append it to the ul)`

# phantomjs - 在 CasperJs 中调试“about:blank”

> ID：13819159
> 
> 赞同：4
> 
> 时间：2012-12-11T11:13:52.733
> 
> 标签：phantomjs, casperjs

我在 Windows 7 机器上有以下简单的 casperjs 脚本（我无法命名实际的 URL - 抱歉）：

```
var casper = require('casper').create({verbose:true,logLevel: "debug"});

casper.start('https://[XXX].de', function() {
    console.log(this.getCurrentUrl());
});

casper.run(); 
```

输出表明它失败了 - 当前的 url 是：“about:blank”

```
[info] [phantom] Starting...
[info] [phantom] Running suite: 2 steps
[debug] [phantom] opening url: https://[XXX].de, HTTP GET
[debug] [phantom] Navigation requested: url=https://[XXX].de, type=Other, lock=true, isMainFrame=true
[warning] [phantom] Loading resource failed with status=fail: https://[XXX].de
[debug] [phantom] Successfully injected Casper client-side utilities
about:blank
[info] [phantom] Step 2/2: done in 39205ms.
[info] [phantom] Done 2 steps in 39309ms 
```

当使用 Firefox RESTCLient 插件发送 GET 请求时 - 我得到：

```
Status Code: 200 OK
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection: close
Content-Type: text/html
Date: Tue, 11 Dec 2012 11:09:37 GMT
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Pragma: no-cache
Server: unknown
Transfer-Encoding: chunked 
```

我的问题是：

我该如何调试呢？这是一个已知的问题 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-28T18:22:55.147

似乎传递给 casperjs 的命令行参数没有传递给 PhantomJS。我也遇到了这个问题，为了解决这个问题，我运行了我的脚本，如下所示：

```
PhantomJS.exe --ignore-ssl-errors=true myscript.js 
```

当我尝试以另一种方式传递参数时

```
PhantomJS.exe myscript.js --ignore-ssl-errors=true 
```

它**不起作用**，并给出与您所面临的相同的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-19T12:14:27.893

要将`phantomjs`参数传递给`casperjs`，您可以直接更新您的`casper`二进制文件（`casperjs.py`在 linux 或`casperjs.bat`windows 上）。

在 Linux 上，打开`casperjs.py`，更新`CASPER_COMMAND`构成命令的数组`phantomjs`并执行。

要添加“--ignore-ssl-errors=yes”，请`CASPER_COMMAND`通过以下方式扩展，

```
CASPER_COMMAND.extend(['--ignore-ssl-errors=yes']); 
```

同样，在 Windows 上或可以在[此处找到更多信息](https://github.com/n1k0/casperjs/issues/49)

# validation - 验证 SGML DTD

> ID：13819161
> 
> 赞同：3
> 
> 时间：2012-12-11T11:14:14.590
> 
> 标签：validation, dtd, sgml

我编写了以下 SGML DTD：

```
<!DOCTYPE tvguide[
    <!ELEMENT tvguide--(date,channel+)>
    <!ELEMENT date--(#PCDATA)>
    <!ELEMENT channel--(channel_name,format?,program*)>
    <!ELEMENT channel--(#PCDATA)>
    <!ATTLIST channel teletext (yes|no) "no">
    <!ELEMENT format--(#PCDATA)>
    <!ELEMENT program--(name,start_time,(end_time|duration))>
    <!ATTLIST program
        min_age CDATA #REQUIRED
        lang CDATA #IMPLIED es>
    <!ELEMENT name--(#PCDATA)>
    <!ELEMENT start_time--(#PCDATA)>
    <!ELEMENT end_time--(#PCDATA)>
    <!ELEMENT duration--(#PCDATA)>]> 
```

我应该使用哪个工具来检查是否有任何语法错误，在哪里，以及它是否是有效的 SGML DTD？

我应该使用哪个工具来验证使用此 DTD 的文件？我更喜欢 Windows 程序，但 linux 二进制文件或用 PHP、C、C++、Java 或 Javascript 编写的库也可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:28:38.203

看看[James Clark 的 SP](http://www.jclark.com/sp/)。我使用 OmniMark 来验证 SGML，但我认为您再也找不到副本了。

您应该收到有关标签最小化的错误（您需要在 之前/之后/之间有空格`--`）。您还应该得到关于`channel`被声明两次的元素的错误，以及关于`lang`属性声明中“es”的错误`program`。

这是一个有效的版本供参考：

```
 <!DOCTYPE tvguide [
 <!ELEMENT tvguide - - (date,channel+)>
 <!ELEMENT date - - (#PCDATA)>
 <!ELEMENT channel - - (channel_name,format?,program*)>
 <!ATTLIST channel teletext (yes|no) "no">
 <!ELEMENT format - - (#PCDATA)>
 <!ELEMENT program - - (name,start_time,(end_time|duration))>
 <!ATTLIST program
      min_age CDATA #REQUIRED
      lang CDATA "es">
 <!ELEMENT name - - (#PCDATA)>
 <!ELEMENT start_time - - (#PCDATA)>
 <!ELEMENT end_time - - (#PCDATA)>
 <!ELEMENT duration - - (#PCDATA)>
 ]> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-11T04:18:05.517

请注意，“有效的 SGML DTD”在技术上有点模棱两可：它取决于使用哪个“SGML 声明”，这是指定名称的最大长度，*甚至名称*中可以出现哪些字符的*地方*。那是在特定 DTD 中使用的“*具体语法*”（因此在特定的 SGML 文档中）。

SGML 的“默认”语法称为“*参考具体语法*”，在 ISO 8879:1986 中定义。因为在这个语法中名字的最大长度（所谓的“ *NAMELEN 数量*”）被设置为 8（八），而 LOW LINE ( `_`) 不能用在*名字*中（不是所谓的*名字字符*)，您的 DTD对于*参考具体语法是***无效**的。

 *例如，HTML 使用自己的[SGML 声明](https://www.w3.org/TR/html401/sgml/sgmldecl.html "W4C REC HTML 4.01 - HTML 4 的 SGML 声明")：它极大地增加了*NAMELEN 数量*并添加`_`到*名称字符*，以及其他更改。对于这种具体的语法，您的 DTD 在*语法上*确实是有效的。

* * *

但是没有*元素声明*，`channel_name`但 DTD 要求至少存在一个这样的元素`tvguide`（即包含在所需的元素中`channel`）。[省略文档中未出现的*元素类型*的声明本身不是错误或问题。]

因此，从您不能编写任何根据它有效的*文档元素*（即`tvguide`元素或简单的“文档”）的意义上说，DTD 不是（还）“有效的”。

* * *

`channel_name`为like添加一个简单的声明

```
<!ELEMENT channel_name (#PCDATA)> 
```

补救措施——现在例如*文档元素*

```
<tvguide>
  <date>2016</date>
  <channel><channel_name>XTV</channel_name></channel>
</tvguide> 
```

根据您的 DTD是*有效的。*（我使用另一个答案中提到的 SP 解析器进行了尝试。）

* * *

简化 DTD 中的名称将使整个内容成为有效的“*基本 SGML 文档*”，甚至是有效的“*最小 SGML 文档*”——这些术语（同样来自 ISO 8879）在没有具体说明时最接近“有效 SGML”的概念给出了上下文和 SGML 声明：它们基本上意味着“任何 SGML 系统都可以移植和接受”。这是我建议的版本：

```
<!DOCTYPE tvguide [
 <!ELEMENT tvguide  - - (date,channel+)>
 <!ELEMENT date     - - (#PCDATA)>

 <!ELEMENT channel  - - (ch-name,format?,program*)>
 <!ATTLIST channel
           teletext (yes|no) no>

 <!ELEMENT format   - - (#PCDATA)>
 <!ELEMENT ch-name  - - (#PCDATA)>

 <!ELEMENT program  - - (name,start-tm,(end-tm|duration))>
 <!ATTLIST program
           min-age  CDATA    #REQUIRED
           lang     CDATA    "es">

 <!ELEMENT name     - - (#PCDATA)>
 <!ELEMENT start-tm - - (#PCDATA)>
 <!ELEMENT end-tm   - - (#PCDATA)>
 <!ELEMENT duration - - (#PCDATA)>
]>
<tvguide>
 <date>2016-12-11</date>
 <channel><ch-name>X-TV 4</ch-name></channel>
</tvguide> 
```*

# caching - 如何更新企业库缓存数据

> ID：13819165
> 
> 赞同：0
> 
> 时间：2012-12-11T11:14:24.783
> 
> 标签：caching, enterprise-library

我有一个场景，我们需要请求 4 年的数据。我已经设法将企业库与内存缓存连接起来。

问题是请求 4 年的数据并在本地存储需要很长时间。另一种方法是根据需要请求 1 年的数据和另外 3 年的数据，并**添加**本地缓存。

有人可以帮助我了解如何将数据添加到现有的缓存数据以及如何更新缓存的键吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:22:38.740

Enterprise Library 不知道也不知道如何将数据附加到您的对象。为此，您需要从缓存中获取对象，将新数据添加到对象中，然后使用相同的键将对象添加回缓存中。现有的缓存对象将被新的对象替换。它看起来像下面的代码。

```
string key = "key";

// get the existing cached data
var list = (List<object>) cacheManager.GetData(key);

// if there was no existing data, list will be null, so initialize it
if (list == null)
    list = new List<object>();

// add the new data
list.Add(new object());

// add the data back to the cache
cacheManager.Add(key, list); 
```

# validation - primefaces 禁用组件验证

> ID：13819172
> 
> 赞同：1
> 
> 时间：2012-12-11T11:14:42.783
> 
> 标签：validation, jsf-2, primefaces, disabled-input

我正在使用 jsf 2.1 + primefaces 3.4.1。我遇到了阻止验证禁用组件的问题。

我所拥有的大约是这样的：

```
<h:form id="form">
    <p:dataTable id="parentDataTable" value=#{bean.list} var="parentItem"..>
        <p:column>
          ..
          <p:dataTable id="childDataTable" value=#{bean.map[parentItem]}" var="childItem">
                <p:column>
                    <f:facet name="header">
                        some inputText
                    </f:facet>
                    <p:inputText id="inputText"
                        disabled=#{bean.selectedObjectsMap[childItem]} required="true" requiredMessage="value required" />
                    <p:message for=":form:parentDataTable:childDataTable:inputText" />
                </p:column>
                <p:column>
                    <f:facet name="header">
                        Select
                    </f:facet>
                    <p:selectBooleanCheckbox id="checkBox" value="#{bean.selectedObjectsMap[childItem]}">
                        <p:ajax update=":form:parentDataTable:childDataTable:inputText" />
                    </p:selectBooleanCheckbox>
                </p:column>
            </p:dataTable>
        </p:column>
    </p:dataTable>
</h:form> 
```

这个想法是，默认情况下 inputText 组件被禁用，并且当我提交表单时“必填值”验证不起作用。当我单击 selectBooleancheckbox 组件时， inputText 被启用，并且当我提交表单时“必需值”验证也有效。但是，当我禁用 inputText 时，验证继续工作，并且出现“需要值”消息，我无法提交表单。当我单击复选框时，似乎服务器端的 JSF UI 组件树没有正确更新，尽管在视觉上我可以看到每次单击复选框时 inputText 组件都会被禁用。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:40:23.140

如果您的验证并不比此示例代码中显示的更复杂，您可以使用代码打开和关闭它

```
<p:inputText id="inputText" disabled="#{bean.selectedObjectsMap[childItem]}" required="#{!bean.selectedObjectsMap[childItem]}" requiredMessage="value required" /> 
```

这意味着您使用与禁用属性相同的 bean 值切换所需属性，只需添加一个 !

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T12:23:10.407

如果您想通过 commandButton 上的验证器，那么您可以实现

```
<f:validator validatorId="EmailValidator"  disabled="#{param['disableValidation']}" /> 
```

在表单上动态启用和禁用电子邮件验证器。

```
<p:commandButton
                                    icon="ui-icon-remove" id="removeBtn"
                                    title="#{commonLbl.cmdRemoveCon}"
                                    disabled="#{pc_searchProspectBean.searchProspectVO.prospectVO.removeContactFlg}"
                                    styleClass="btn btn-sm btn-primary"
                                    action="#{pc_searchProspectBean.doRemoveContact(prospectTbl.indexId)}"
                                    update=":frm1:pnlProspectContact" onclick="modalDialog.show()"
                                    oncomplete="modalDialog.hide()">
                                    <f:param name="disableValidation" value="true" />
                                </p:commandButton> 
```

# android - Android 列表视图检查文本视图

> ID：13819176
> 
> 赞同：1
> 
> 时间：2012-12-11T11:14:50.603
> 
> 标签：android, android-listview, checkedtextview

我的 Android 应用程序有问题。我正在尝试创建一个列表视图，其中每行包含一个 textview 和一个 checkedtextview。我已经完成了布局和适配器，它正确显示了所有项目，但我遇到的问题是：我可以完美地检查前 7 个项目（最初可见的项目）但是当我向下滚动以检查其中一个时以下项目（最初不可见的项目）我得到一个空指针异常。我应该怎么办？

适配器代码：

```
private class myAdapter extends ArrayAdapter<Orders> {

private ArrayList<Orders> items;

public myAdapter(Context context, int resource, ArrayList<Orders> items) {
    super(context, resource, items);
    this.items = items;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = getLayoutInflater().inflate(R.layout.orderslist_row,
                null);
    }

    Orders o = items.get(position);

    CheckedTextView txtSymbol = (CheckedTextView) convertView
            .findViewById(R.id.checkedTextView1);
    txtSymbol.setText(o.getInstrumentID());

    CheckedTextView txtQuantity = (CheckedTextView) convertView
            .findViewById(R.id.checkedTextView2);
    Double qty = o.getQuantity();
    txtQuantity.setText(FormatNumber.Number(qty, 0));

    if (o.getStatus().toString().equals("Rejected"))
        txtQuantity.setTextColor(Color.RED);
    if (o.getStatus().toString().equals("Active"))
        txtQuantity.setTextColor(Color.GREEN);

    return convertView;
} 
```

}

和 OnItemClickCode：

```
public void onItemClick(AdapterView<?> adapter, View view, int position,
    long id) {
View v = (View)lstOrders.getChildAt(position);
CheckedTextView ctv = (CheckedTextView) v.findViewById(R.id.checkedTextView2);
ctv.toggle(); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:56:17.957

`getChildAt(i)`根据可见的索引集工作。当您滚动并且位置 3 成为第一个可见行时，它已成为该方法的位置 0。因此，在任何给定时刻，您最多只能使用大约 7 的索引，如果这是屏幕上可以容纳的列表视图行数。如果您继续使用此方法，有一种方法可以根据您的喜好提示天平，您可以找出第一个可见行索引是什么，然后从总数中减去。listview 有这样的方法。

```
 public void onItemClick(AdapterView<?> adapter, View view, int position,
            long id) {
        View v = (View)lstOrders.getChildAt(position - lstOrders.getFirstVisiblePosition());
        CheckedTextView ctv = (CheckedTextView) v.findViewById(R.id.checkedTextView2);
        ctv.toggle();
} 
```

# mysql-real-escape-string - 回显时出现mysql_real_escape_string？

> ID：13819177
> 
> 赞同：0
> 
> 时间：2012-12-11T11:14:53.810
> 
> 标签：mysql-real-escape-string

我知道在查询中运行 mysql_real_escape_string 时必须使用它，例如：

```
$ProjectHasReservationQuery = ("
                        SELECT * 
                        FROM reservelist rl
                            INNER JOIN project p on rl.projectid = p.projectid
                        WHERE rl.projectid = ". mysql_real_escape_string($record['projectid']) ."
                        AND restype = 'res'
                        "); 
```

但是如何呼应它，例如：

```
query1 = mysql_query("SELECT * FROM users");
while ($record = mysql_fetch_array($query1 ))
{
    echo "".stripslashes(mysql_real_escape_string($record['usersurname']))."";
    // OR
    echo "".$record['usersurname']."";
} 
```

哪一个？我个人认为`echo "".$record['usersurname']."";`，因为这是来自查询而不是进入。但要100%确定。

（我知道 PDO 和 mysqli）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:57:39.663

> 我知道在查询中运行它时我必须使用 mysql_real_escape_string

恰恰相反，你**不应该**在这样的查询中使用 mysql_real_escape_string。
这不会有什么好处，只会给你留下虚假的安全感。

从函数名可以看出，它用于在添加数字时转义字符串。因此，此功能变得无用，而您的查询仍然对注入敞开大门。

只需使用此函数来格式化 SQL 查询中的引用字符串。
因此，您可以从这条规则得出答案：不，使用此功能进行输出没有意义。

至于保护，要么将您的号码视为字符串（通过引用和转义它），要么使用 intval() 函数对其进行转换。

或者，最好的选择是摆脱这种手动格式化并开始使用占位符来表示查询中的动态数据。它不一定是准备好的语句 - 它可以使用相同的转义，但封装在一些占位符处理函数中

# android - 如何以编程方式管理线性子布局？

> ID：13819178
> 
> 赞同：2
> 
> 时间：2012-12-11T11:14:56.157
> 
> 标签：android, android-layout, dynamic, view

关于布局元素的问题。

我想动态添加视图。

**逻辑代码：**

```
 linear1 = (LinearLayout) findViewById(R.id.parent);
    linear2 = (LinearLayout) findViewById(R.id.chiled);

    int len = 4;

    for (int i = 1; i <= len; i++) {
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT,
                LinearLayout.LayoutParams.WRAP_CONTENT);

        LinearLayout.LayoutParams params1 = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT,
                LinearLayout.LayoutParams.WRAP_CONTENT);

        params1.gravity = Gravity.RIGHT;

        final int id_txt;
        ImageView iv = new ImageView(this);
        iv.setId(i);
        id_txt = iv.getId();
        iv.setBackgroundResource(R.drawable.ic_launcher);
        linear1.addView(iv, params);
        iv = ((ImageView) findViewById(id_txt));

        for (int j = 1; j < 2; j++) {
            final int id_;
            Button btn = new Button(this);
            btn.setId(i);
            id_ = btn.getId();
            btn.setText("button " + id_);
            linear2.addView(btn, params1);
            btn = ((Button) findViewById(id_));

            btn.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    Toast.makeText(v.getContext(),
                            "Button clicked index = " + id_,
                            Toast.LENGTH_SHORT).show();
                }
            });
        }
        // btn.setBackgroundColor(Color.rgb(70, 80, 90));

        // linear1.addView(txt, params);

        // params.addRule(RelativeLayout.RIGHT_OF, txt.getId());

        iv.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Toast.makeText(view.getContext(),
                        "text clicked index = " + id_txt,
                        Toast.LENGTH_SHORT).show();
            }
        });
              }
    } 
```

**xml代码：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/parent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/chiled"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

我想在父视图中添加图像，在子视图中动态添加两个按钮。

**我启发制作这种类型的视图形式**

[像pinterest这样的Android异构gridview？](https://stackoverflow.com/questions/11736658/android-heterogeneous-gridview-like-pinterest)

**它应该像**

![在此处输入图像描述](../Images/42b568d30ec205a96b134d8a791c70ab.png)

**电流输出为**

![在此处输入图像描述](../Images/40ef71e6e9676067ff50297df118b482.png)

我不知道问题出在哪里。

如果我**在代码中看到布局，那么****我现在在编辑器中面临**一个奇怪的问题，然后它会显示给我，如果我**在大纲**中看到每个布局的显示。这怎么可能 ？**`android:orientation="vertical"`**`android:orientation="horizontal"`****

 ****帮我解决。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:41:00.153

**编辑：**

首先，首先将按钮添加到 xml。连同图像视图。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/extra_root"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/chiled"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Like" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Dislike" />
    </LinearLayout>

</LinearLayout> 
```

然后，您可以删除任何添加视图的概念，因为它们已经存在。

```
package com.example.yul;

import android.app.Activity;
import android.os.Bundle;
import android.view.Gravity;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class extra extends Activity {
  Button like, dislike;
  LinearLayout root, sub;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.extra);

    like = (Button) findViewById(R.id.button1);
    dislike = (Button) findViewById(R.id.button2);

    // add button listeners here.

    ImageView iv = (ImageView) findViewById(R.id.image);

      iv.setBackgroundResource(R.drawable.ic_launcher);

    }
  }
} 
```

不过，这只会显示一个带有按钮的图像。

您需要做的是将此 xml 和代码应用到一个`gridView`或类似的。因为否则你会有 id 冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:20:27.770

由于水平`LinearLayout chiled`是垂直的第一个子元素，`LinearLayout parent`因此它作为第一项对齐。因此，向其中添加视图会将它们置于顶部。

尝试将`chiled`Layout 移动到 root `LinearLayout root`。****

# php - 正则表达式匹配 php 代码中的第一个分号

> ID：13819180
> 
> 赞同：0
> 
> 时间：2012-12-11T11:15:00.127
> 
> 标签：php, regex

我有一个正则表达式，用于重新定义 php 文件中的常量，`preg_match`并使用 htmlspecialchars 筛选输入文件，例如

```
define('MEMBERSHIP', 'GOLD'); 
```

以下正则表达式有效

```
/define.*[&quote\']' . $constant . '[&quote;\'].*;/i 
```

但是它匹配最后一个分号，在大多数情况下都有效，但在以下情况下失败，例如：

```
define("MEMBERSHIP", 'GOLD'); // membership subscription; empty means not in use. 
```

*注意最后一个分号*，导致替换代码为

```
define("MEMBERSHIP", 'SILVER'); empty means not in use. 
```

这破坏了代码。尝试了下面的正则表达式，但它不适用于带有双引号的人

```
/define.*[&quote;\']' . $constant . '[&quote;\'][^;]*;/i 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:54:04.457

如果在`?`之后添加 a `*`，它将变得贪婪并占用尽可能少的字符。所以试试

```
/define.*?[&quote\']' . $constant . '[&quote;\'].*?;/i 
```

看看它是否符合您的要求。

一般来说，`.`如果您实际上并不表示*任何字符*，则应避免使用 s 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:04:28.760

您可以使用[反向引用](http://www.regular-expressions.info/brackets.html)匹配相应的引号：

```
'/define[^"\']*(["\'])' . $constant . '\1[^;]*;/i' 
```

否则，您最后拥有的否定字符类绝对是要走的路。

# objective-c - 将会计期间转换为日历期间的算法

> ID：13819181
> 
> 赞同：1
> 
> 时间：2012-12-11T11:15:04.317
> 
> 标签：objective-c, ios, algorithm, date, datetime

## 我想要做什么

我有点拼命地尝试构建一种算法，**将不同公司的财务数据从财政期间转换为日历期间**。

## 问题

**会计期间通常与****日历**期间不对应，例如，一家公司可能报告 2011 会计年度的收入为 100 美元，但其会计年度并未在 2011 年 12 月结束，而是在 2011 年 9 月结束。例如，[Apple](http://investor.apple.com/faq.cfm?FaqSetID=3)的会计年度结束九月底。[戴尔的](http://content.dell.com/us/en/corp/d/financials/investor-faqs)财年于 1 月底结束，[英特尔](http://www.intel.com/intel/company/corp4.htm)的财年于 12 月底结束。对于苹果和戴尔来说，所有财政季度和财政半年的结束也都发生了变化。

为了比较这些公司的收入或其他财务指标，我需要能够将每个会计期间转换为等效的日历期间。例如，有人可能会问，每家公司在 2011 日历年产生了多少收入。

以 Apple Corp. 为例，我们需要删除 2010 年日历期间产生的收入，这将等于 Apple 2010 财年第四季度，并加上 2012 财年第一季度（截至 2011 年 12 月）。

## 我有什么（数据模型）

我的数据模型对每个实体具有以下属性，`calendarPeriod`并且`fiscalPeriod`：

`endYear`（期间结束的年份）
`endMonth`（期间结束的月份数 1..12 ）（期间的月数 1..12
`length`）

## 我需要什么（迫切地）

我能做到这一点的最有效和最简短的算法是什么？

如果该算法能够处理像戴尔这样的“特殊情况”，那就*太好*了年。此外，该算法应该足够灵活，以处理所有周期长度和 endMonths，并在必要时尝试合并周期（例如，对于 2012 日历年的上半年，它应该尝试找到一个到 2012 年 6 月结束的六个月周期或连续添加两个时期（一个结束于 2012 年 3 月，一个结束于 2012 年 6 月，或以 2012 年 6 月结束的财政年度减去 2011 日历年的季度或半年）。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:25:33.540

这更像是一个财务问题，而不是技术问题。

如果您只有年终结果，则没有实用的方法可以比较，除非它们是在同一财务期间。

此外，如果您以某种方式设法获得月度结果并进行一些杂耍以准备可比较的结果，它们将无法比较，因为通常在年底财务结果中进行许多会计调整和准备金，而不是您将在月度结果中进行想念这里。

我建议您应该尝试比较那些产生更有意义结果的结果。

# c - 确定共享库的目录

> ID：13819184
> 
> 赞同：1
> 
> 时间：2012-12-11T11:15:15.197
> 
> 标签：c, shared-libraries

谁能告诉我是否有办法在 Windows 和 linux 平台上从共享库中的函数调用中确定共享库文件的位置。我有一个用 C 编写的共享库，它将在 linux 和 windows 下编译和运行。我希望能够通过函数确定共享库的当前位置，以便确定某些配置和其他文件的位置。

我已经在寻找方法来做到这一点，但我现在找不到任何答案，尽管我确信我曾经看过一篇文章，其中讲述了如何以特定于平台的方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:18:43.473

在 Windows 上，您可以使用[`GetModuleFileName()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms683197%28v=vs.85%29.aspx)获取 DLL 的完整路径：

```
char path[MAX_PATH];
if (GetModuleFileName(GetModuleHandle("kernel32.dll"), path, MAX_PATH) &&
    ERROR_INSUFFICIENT_BUFFER != GetLastError())
{
    char* last_slash = strrchr(path, '\\');
    if (last_slash) *last_slash = 0;
    printf("path=[%s]\n", path);
} 
```

输出：

> 路径=[C:\WINDOWS\system32]

# php - htaccess url 别名/干净的 urls - php

> ID：13819189
> 
> 赞同：-1
> 
> 时间：2012-12-11T11:15:54.907
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

您好，我已经尝试了 1 周来修复我自定义构建的网站上的一些网址，但我无法 100% 完成我想要的。所以这是我的问题：

我有一个管理事件的 php 登录页面，默认 url 结构是这样的：

```
foreach($resultSet as $key => $event)
{
    echo '<a href="/event.php?eid='.$event['eid'].'&cat='.$event['categroy'].'&title='.urlencode($event['title']).'">content</a>';
} 
```

如您所见，url格式是这样的

`/event.php?eid=145&cat=metal&title=Great+gig`

我希望它通过 htaccess 是这样的

`domain.com/event/metal/Great gig`

我一直在阅读 htaccess 指南，但我无法在 url 上使用更多 tahn 1 参数，请告知，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:57:47.673

1.  更改您的 php 代码，使其生成如下所示的 URL `domain.com/event/metal/Great gig`：

    ```
    echo '<a href="/event/'.$event['eid'].'/'.$event['categroy'].'/'.urlencode($event['title']).'">content</a>'; 
    ```

    （请注意，`'category'`您的示例中拼写错误）

2.  **在您的文档根目录**的 htaccess 文件中添加这些规则，最好在您可能已经存在的任何规则之上：

    ```
    RewriteEngine On
    RewriteRule ^/?event/([^/]+)/([^/]+)/(.+)$ /event.php?eid=$1&cat=$2&title=$3 [L,QSA] 
    ```

此外，如果您有不受您控制的链接仍然具有查询字符串，您可以添加以下规则：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /event\.php\?eid=([^&]+)&cat=([^&]+)&title=([^\ ]+)
RewriteRule ^ /event/%2/%3/%4? [L,R=301] 
```

# oauth - Live.com OAuth 撤销访问权限

> ID：13819193
> 
> 赞同：0
> 
> 时间：2012-12-11T11:16:06.093
> 
> 标签：oauth, live

在 live.com OAuth 中撤销访问令牌的 url 或请求是什么？Google Oauth 上的类似请求是：

```
POST https://accounts.google.com/o/oauth2/revoke?token=%access_or_refresh_token% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:30:37.980

从这个链接： http: [//msdn.microsoft.com/en-us/library/ff752110.aspx](http://msdn.microsoft.com/en-us/library/ff752110.aspx)，撤销同意似乎是一个手动过程，即使那样，它也不会立即撤销令牌。

# json - 如何将 array_agg/array_to_json 应用于具有修改列的查询

> ID：13819197
> 
> 赞同：16
> 
> 时间：2012-12-11T11:16:33.313
> 
> 标签：json, postgresql

我`array_to_json`结合使用`array_agg`将 PostgreSQL 中的某些结果格式化为 JSON。当我想返回查询的默认值（所有列，未修改）时，这适用于查询。但我很难过如何使用`array_agg`为要修改某些输出的查询创建 JSON 对象。

这是一个例子：

```
CREATE TABLE temp_user ( 
   user_id  serial PRIMARY KEY,
   real_name text
);
CREATE TABLE temp_user_ip (
   user_id  integer,
   ip_address text
);
INSERT INTO temp_user (user_id, real_name) VALUES (1, 'Elise'),  (2, 'John'), (3, NULL);
INSERT INTO temp_user_ip (user_id, ip_address) VALUES (1, '10.0.0.4'),  (2, '10.0.0.7'), (3, '10.0.0.9'); 
```

以下查询工作正常：

```
# SELECT array_to_json(array_agg(temp_user)) as users from temp_user;
                                            users                                                
-----------------------------------------------------------------------------------------------------
 [{"user_id":1,"real_name":"Elise"},{"user_id":2,"real_name":"John"},{"user_id":3,"real_name":null}] 
```

但是假设我不喜欢为用户 3 出现的空值。我宁愿看到字符串“用户从 $ip 登录”。

我可以做这个：

```
# SELECT user_id, (CASE WHEN real_name IS NULL THEN (select 'User logged in from ' || ip_address FROM temp_user_ip WHERE user_id = temp_user.user_id) ELSE real_name END) as name from temp_user; 
```

我得到以下结果：

```
 user_id |             name             
---------+------------------------------
       1 | Elise
       2 | John
       3 | User logged in from 10.0.0.9 
```

这是伟大的。但我不知道如何像第一个示例那样将这些数据操作为 JSON 格式。

所需的输出是：

```
[{"user_id":1,"name":"Elise"},{"user_id":2,"name":"John"},{"user_id":3,"name":"User logged in from 10.0.0.9"}] 
```

这不起作用：

```
# select array_to_json(array_agg ( (SELECT user_id, (CASE WHEN real_name IS NULL THEN (select 'User logged in from ' || ip_address FROM temp_user_ip WHERE user_id = temp_user.user_id) ELSE real_name END) as name from temp_user)));
ERROR:  subquery must return only one column 
```

我想不出任何方法将数据转换为`array_agg`可接受的格式。我什至尝试创建一个与 temp_user 格式匹配的自定义类型，并尝试`array_agg`调用类型构造函数，它返回了相同的错误。这个错误对我来说没有意义——如果子查询是聚合的，那么它是否返回多于一列就无关紧要了。有什么建议吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-11T14:08:49.540

您可以将聚合调用与子查询分开，并使用[`row`](http://www.postgresql.org/docs/9.1/static/sql-expressions.html#SQL-SYNTAX-ROW-CONSTRUCTORS)构造函数生成复合数据：

```
SELECT 
    array_to_json(array_agg(row(t.*))) AS users 
FROM 
    (
        SELECT user_id, 
            CASE 
                WHEN real_name IS NULL 
                THEN (
                    SELECT 'User logged in from ' || ip_address 
                    FROM temp_user_ip 
                    WHERE user_id = temp_user.user_id
                ) ELSE real_name 
            END AS name 
        FROM temp_user
    ) t
; 
```

您也可以在[SQLFiddle](http://sqlfiddle.com/#!12/eec4c/9)上检查这一点。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-04-26T15:07:42.453

PostgreSQL 现在有一个`json_agg`可以代替`array_to_json(array_agg( ... ))`但实际上在某些情况下表现更好的函数。请参阅“ [Array_agg 在 postgres 中选择性地引用](https://stackoverflow.com/questions/43262126/)”和文档：“[聚合函数](https://www.postgresql.org/docs/9.5/static/functions-aggregate.html)”。

这是修改后的查询：

```
SELECT 
    json_agg(row(t.*)) AS users 
FROM 
    (
        SELECT user_id, 
            CASE 
                WHEN real_name IS NULL 
                THEN (
                    SELECT 'User logged in from ' || ip_address 
                    FROM temp_user_ip 
                    WHERE user_id = temp_user.user_id
                ) ELSE real_name 
            END AS name 
        FROM temp_user
    ) t
; 
```

# mfc - 我将如何处理此链接器错误？

> ID：13819198
> 
> 赞同：0
> 
> 时间：2012-12-11T11:16:37.370
> 
> 标签：mfc, error-handling, polymorphism, linker-errors

我正在构建一个 mfc 应用程序，使用户能够绘制图形对象（类似于 ms paint）。但由于某种原因，我收到以下链接器错误：

CElement.obj：错误 LNK2001：未解析的外部符号“public：virtual void __thiscall CElement::Draw(class CDC *)”(?Draw@CElement@@UAEXPAVCDC@@@Z)。

我知道这与 CPolygon 类中的虚拟绘图功能有关。但究竟是什么帽子造成的呢？

//CElement.h

```
class CElement : public CObject
{
 public:
 virtual ~CElement();
 virtual void Draw(CDC* pDC);

}; 
```

注意：CElement 将作为所有其他类（如 CPolyline 和 CRectangle）的基类。Draw 函数是虚函数——多态的一个例子，CElement 的 Draw(CDC* pDC) 将被派生类的 Draw() 函数覆盖

```
class CPolygon : public CElement
{
public:

CPolygon(CPoint mFirstPoint,CPoint mSecondPoint);
~CPolygon(void);
virtual void Draw(CDC* pDC); 

---------------------------------------------------------------------------------------

//CElement.cpp

 #include "CElement.h"

 //constructors for the class

 void CPolygon::Draw(CDC* pDC)
 {
  pDC->MoveTo(mStartPoint);
  pDC->LineTo(mEndPoint); 
```

## }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:20:40.303

好吧，错误消息说您尚未为函数定义主体

```
virtual void Draw(CDC* pDC); 
```

要么定义它，要么使类抽象，即派生类必须实现它。

```
virtual void Draw(CDC* pDC) { } 
```

或者

```
virtual void Draw(CDC* pDC) = 0; 
```

# build - 如何在 FreeBSD 上安装流星？

> ID：13819199
> 
> 赞同：2
> 
> 时间：2012-12-11T11:16:35.930
> 
> 标签：build, installation, meteor, freebsd

我正在尝试在 FreeBSD 9 上运行 meteorjs。我已经从端口安装了 nodejs。

我也试过： `git clone https://github.com/meteor/meteor.git`然后`node meteor --help`，但它不起作用。

我在流星文件中找到了这个“如果”：

```
if [ "$UNAME" != "Linux" -a "$UNAME" != "Darwin" ] ; 然后
    echo "抱歉，不支持此操作系统。"
    1号出口
菲

```

有没有关于如何在 FreeBSD 上安装或构建 meteorjs 的信息？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-11-08T09:17:58.423

我为 FreeBSD 创建了一个自定义开发包：[https ://github.com/yonas/meteor-freebsd](https://github.com/yonas/meteor-freebsd)

以下是安装说明：

## 安装所需的软件包

```
sudo pkg install bash ca_root_nss curl expat gettext-runtime git-lite gmake indexinfo libevent2 libffi mongodb node npm pcre perl5 python2 python27 snappy v8 
```

## 安装流星

```
git clone git://github.com/yonas/meteor-freebsd.git
sudo mv meteor-freebsd /usr/local/share/meteor
sudo ln -s /usr/local/share/meteor/meteor /usr/local/bin/meteor 
```

## 创建和启动应用程序

```
meteor create myapp
cd myapp
meteor 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T01:15:02.667

Meteor 没有正式支持 FreeBSD，但它可能会工作。您需要生成自己的“开发包”（根据[https://github.com/meteor/meteor#slow-start-for-developers](https://github.com/meteor/meteor#slow-start-for-developers)）。

`meteor`首先，您需要在和中禁用特定于操作系统的安全带`admin/generate-dev-bundle.sh`。您还需要从某个地方获取 MongoDB 二进制文件，因为 10gen 不为 FreeBSD 提供预构建的二进制文件。

理论上，您应该能够使用该脚本构建一个开发包。开发包应该是流星的唯一特定于操作系统的部分，一旦你有一个工作的开发包，其余的代码应该正常运行。

# php - 如何在php中设置弹出窗口的修复时间

> ID：13819202
> 
> 赞同：-2
> 
> 时间：2012-12-11T11:16:49.923
> 
> 标签：php, html

我写过这样的代码

```
setTimeout('newWindow.close();',1000); 
```

但是这段代码不起作用。它不会给出任何错误，但弹出窗口不会被破坏。

有谁能够帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:47:37.070

在您的 php 代码中的脚本标记中尝试此操作

setTimeout('window.close()', 2000);

# oracle10g - 我收到错误：PLS-00402：在 SELECT 游标列表中需要别名以避免重复的列名

> ID：13819204
> 
> 赞同：0
> 
> 时间：2012-12-11T11:17:11.660
> 
> 标签：oracle10g

> 我已经使用选择数据舞会不同的表创建了这个过程，并将其填充到一个表中。编译代码时出现错误：“PLS-00402：SELECT 游标列表中需要别名以避免重复的列名”

```
create or replace procedure hrps.Employeeall
    is
    cursor EMA_FILL_EMPL_ALL
    IS 
     SELECT  DISTINCT base.eme_perno " EMPL BASE PNO",
             CAR.CAR_COMP_CD "COMP CODE",
             PER.EPR_SALUTATION,
             PER.EPR_FST_NAME,
             PER.EPR_MID_NAME,
             PER.EPR_LST_NAME,
             TRIM(per.EPR_SALUTATION) || ' '||TRIM(per.EPR_FST_NAME) || ' ' || TRIM(per.EPR_MID_NAME) || ' ' || TRIM(per.EPR_LST_NAME) "Name",
             BASE.EME_DOB,
             per.epr_gender "GENDER",
             NULL z1,
             PER.EPR_DIFF_ABLE,
             PER.EPR_DIFF_ABLE_DESC,
             BASE.EME_BLOOD_GRP,
             PER.EPR_AFF_ACT,
             DOJ.idt_dt,
             BASE.EME_CADRE,
             C3.IRC_DESC cd3,
             car.car_emp_class,
             CAR.CAR_EMP_TYP,
             BASE.EME_EMPL_STATUS,
             BASE.EME_SOURCE_EMPLMNT,
             CAR.CAR_PYRL,
             PYRL.IPY_PYRL_DESC,
             car.car_dept_cd "DEPT CODE",
             org_dept.oro_desc "DEPT DESC", 
             car.car_sec_cd "SECTION CODE",
             org_sec.oro_desc "SECTION DESC",
             car.car_desgn_cd "DESGN CODE",
             DES.IDS_DESGN_DESC "DESGN DESC",
             CAR.CAR_PER_GRADE_CD,
             CAR.CAR_SUB_GRADE_CD,
             NULL z2,
             NULL z3,
             NULL z4,
             NULL z5,
             CAR.CAR_PYRL_AREA,
             C1.IRC_DESC cd1,
             CAR.CAR_COST_CENT_CD,
             C2.IRC_DESC cd2,
             NULL z6,
             NULL z7,
             DOS.IDT_DT,
             CAR_SEP.CAR_ACTION_RSN,
             C4.IRC_DESC cd4,
             PDT.IDT_DT,
             EDR.IDT_DT,
             NULL z8,
             PROM.IDT_DT,
             INC.IDT_DT,
             NULL z9,
             NULL z10,
             C5.IRC_DESC cd5,
             car.car_exec_cd "EXEC HEAD",
             org_exe.oro_desc "EXEC HEAD DESC",
             car.car_grp_cd "GROUP CODE",
             org_grp.oro_desc "GROUP DESC",
             car.car_pu_cd " PU CODE",
             org_pu.idp_pu_desc "PU DESC",
             car.car_position_id "POSITION ID",
             NULL z11,
             NULL z12,
             NULL z13,
             NULL z14,
             FATHER.FML_FSTNAME || ' ' || FATHER.FML_MIDNAME || ' ' || FATHER.FML_LSTNAME F_NAME,
             SPOUCE.FML_FSTNAME || ' ' || SPOUCE.FML_MIDNAME || ' ' || SPOUCE.FML_LSTNAME S_NAME,
             TRGSD.IDT_DT,
             TRGED.IDT_DT,
             NULL z15,
             NULL z16,
             NULL z17,
             NULL z18,
             PAN.EID_ID,
             PHONE.EMC_CONTACT,
             EMAIL.EMC_CONTACT,
             PER.EPR_RELIGION,
             PER.EPR_NATIVE_STATE,
             PER.EPR_NATIONALITY,
             NULL z19,
             NULL  z20,
             NULL  z21,
             SYSDATE date1,
             '157068' num1,
             SYSDATE date2,
             '157068' num2
        fROM t_empl_base base
             LEFT OUTER JOIN 
             t_ir_em_career_dtls car
             ON base.eme_perno = car.car_eme_perno
             AND car.car_end_dt = '31-dec-9999'

             LEFT OUTER JOIN 
             t_ir_em_career_dtls car_SEP
             ON base.eme_perno = car_SEP.car_eme_perno
             AND CAR_SEP.CAR_ACTION_TYPE ='SP'

             LEFT OUTER JOIN
             t_ir_em_personal per
             ON base.eme_perno = per.epr_eme_perno 
             AND per.epr_end_dt = '31-dec-9999'

             LEFT OUTER JOIN
             T_IR_DESGN DES
             ON DES.IDS_DESGN_CODE= CAR.CAR_DESGN_CD
             AND DES.IDS_LOCATION = CAR.CAR_LOC_CD
             AND DES.IDS_END_DT='31-DEC-9999'

             LEFT OUTER JOIN
             t_ir_em_impdt pdt
             ON base.eme_perno = pdt.idt_eme_perno 
             AND pdt.idt_type = '03'

             LEFT OUTER JOIN
             t_ir_em_impdt DOJ
             ON base.eme_perno = DOJ.idt_eme_perno 
             AND DOJ.idt_type = '02'

             LEFT OUTER JOIN
             t_ir_em_impdt DOS
             ON base.eme_perno = DOS.idt_eme_perno 
             AND DOS.idt_type = '04'

             LEFT OUTER JOIN
             t_ir_em_impdt EDR
             ON base.eme_perno = EDR.idt_eme_perno 
             AND EDR.idt_type = '07'

             LEFT OUTER JOIN
             t_ir_em_impdt PROM
             ON base.eme_perno = PROM.idt_eme_perno 
             AND PROM.idt_type = '08'

             LEFT OUTER JOIN
             t_ir_em_impdt INC
             ON base.eme_perno = INC.idt_eme_perno 
             AND INC.idt_type = '09'

             LEFT OUTER JOIN
             t_ir_em_impdt TRGSD
             ON base.eme_perno = TRGSD.idt_eme_perno 
             AND TRGSD.idt_type = '12'

             LEFT OUTER JOIN
             t_ir_em_impdt TRGED
             ON base.eme_perno = TRGSD.idt_eme_perno 
             AND TRGSD.idt_type = '13'

             LEFT OUTER JOIN
             T_IR_EM_FAMILY FATHER
             ON FATHER.FML_EME_PERNO= BASE.EME_PERNO
             AND FATHER.FML_TYPE ='06' 

             LEFT OUTER JOIN
             T_IR_EM_FAMILY SPOUCE
             ON SPOUCE.FML_EME_PERNO= BASE.EME_PERNO
             AND SPOUCE.FML_TYPE IN ('01','02')         

             LEFT OUTER JOIN
             T_IR_PYRL PYRL
             ON CAR.CAR_PYRL = PYRL.IPY_PYRL_NO
             AND PYRL.IPY_END_DATE = '31-DEC-9999'
             AND PYRL.IPY_LOCN_CD = CAR.CAR_LOC_CD
             AND PYRL.IPY_VALID_TAG ='Y'

             LEFT OUTER JOIN
             t_ir_codes c2
             ON TRIM (CAR.CAR_COST_CENT_CD ) = c2.irc_code
             AND c2.irc_type = 'COSTC'

             LEFT OUTER JOIN
             t_ir_codes c1
             ON TRIM (CAR.CAR_PYRL_AREA ) = c1.irc_code
             AND c1.irc_type = 'PYARA'

             LEFT OUTER JOIN
             t_ir_codes c3
             ON BASE.EME_CADRE = c3.irc_code
             AND c3.irc_type = 'CADRE'

             LEFT OUTER JOIN
             t_ir_codes c4
             ON CAR_SEP.CAR_ACTION_RSN = c4.irc_code
             AND c4.irc_type = 'SEPAR'

             LEFT OUTER JOIN
             t_ir_codes c5
             ON CAR.CAR_COMP_CD = c5.irc_code
             AND c5.irc_type = 'COMP'

             LEFT OUTER JOIN 
             T_IR_EM_ID PAN
             ON PAN.EID_EME_PERNO=BASE.EME_PERNO
             AND PAN.EID_ID_CODE= '02'

             LEFT OUTER JOIN 
             T_IR_EM_CONTACT PHONE
             ON PHONE.EMC_EME_PERNO =BASE.EME_PERNO
             AND PHONE.EMC_CONTACT_TYPE= '04'
             AND PHONE.EMC_END_DATE='31-DEC-9999'

             LEFT OUTER JOIN 
             T_IR_EM_CONTACT EMAIL
             ON EMAIL.EMC_EME_PERNO =BASE.EME_PERNO
             AND EMAIL.EMC_CONTACT_TYPE= '03'
             AND EMAIL.EMC_END_DATE='31-DEC-9999'

             LEFT OUTER JOIN
             (SELECT DISTINCT oro_object_id, oro_desc
                         FROM t_org_object o
                        WHERE o.oro_str_type = 'IRSTR'
                          AND o.oro_end_date = '31-DEC-9999'
                          AND o.oro_type = 'EX') org_exe
             ON org_exe.oro_object_id = car.car_exec_cd

             LEFT OUTER JOIN
             (SELECT DISTINCT oro_object_id, oro_desc
                         FROM t_org_object o
                        WHERE o.oro_str_type = 'IRSTR'
                          AND o.oro_end_date = '31-DEC-9999'
                          AND o.oro_type = 'GR') org_grp
             ON org_grp.oro_object_id = car.car_grp_cd

             LEFT OUTER JOIN
             (SELECT DISTINCT oro_object_id, oro_desc
                         FROM t_org_object o
                        WHERE o.oro_str_type = 'IRSTR'
                          AND o.oro_end_date = '31-DEC-9999'
                          AND o.oro_type = 'DP') org_dept
             ON org_dept.oro_object_id = car.car_dept_cd

             LEFT OUTER JOIN
             (SELECT DISTINCT oro_object_id, oro_desc
                         FROM t_org_object o
                        WHERE o.oro_str_type = 'IRSTR'
                          AND o.oro_end_date = '31-DEC-9999'
                          AND o.oro_type = 'SE') org_sec
             ON org_sec.oro_object_id = car.car_sec_cd

             LEFT OUTER JOIN
             (SELECT DISTINCT idp_pu_code, idp_pu_desc
                         FROM t_ir_dept_pu o
                        WHERE o.idp_end_dt = '31-DEC-9999') org_pu
             ON org_pu.idp_pu_code = car.car_pu_cd
       WHERE base.eme_empl_status = '1';

     ct  EMA_FILL_EMPL_ALL%ROWTYPE;

    BEGIN

     FOR CT IN EMA_FILL_EMPL_ALL
     LOOP

      INSERT INTO T_EMPL_COMN  (
      EMA_PERNO,
    EMA_COMP_CD,
    EMA_SALUTATION,
    EMA_FST_NAME,
    EMA_MID_NAME,
    EMA_LST_NAME,
    EMA_ENAME,
    EMA_BIRTH_DT,
    EMA_GENDER,
    EMA_MARITAL_STATUS,
    EMA_DIFF_ABLE_CD,
    EMA_DIFF_ABLE_DESC,
    EMA_BLOODGRP,
    EMA_AFFIRMATIVE_ACTION_CD,
    EMA_JOINING_DT,
    EMA_CADRE,
    EMA_CADRE_DESC,
    EMA_EMP_CLASS,
    EMA_EMP_TYPE,
    EMA_EMPL_STATUS,
    EMA_SOURCE_EMPLMNT,
    EMA_PYRL,
    EMA_PYRL_DESC,
    EMA_DEPT_CD,
    EMA_DEPT_DESC,
    EMA_SECTION_CD,
    EMA_SECTION_DESC,
    EMA_DESGN_CD,
    EMA_DESGN_DESC,
    EMA_EMPL_PGRADE,
    EMA_EMPL_SGRADE,
    EMA_PERS_AREA,
    EMA_PERS_AREA_DESC,
    EMA_PERS_SUBAREA,
    EMA_PERS_SUBAREA_DESC,
    EMA_PYRL_AREA,
    EMA_PYRL_AREA_DESC,
    EMA_COST_CENTER_CD,
    EMA_COST_CENTER_DESC,
    EMA_PROFIT_CENTER_CD,
    EMA_PROFIT_CENTER_DESC,
    EMA_DISCH_DT,
    EMA_DISCH_RSN_CD,
    EMA_DISCH_RSN_DESC,
    EMA_CS_DATE,
    EMA_EXP_RETIRE_DT,
    EMA_TRF_DT,
    EMA_PROM_DT,
    EMA_INCR_DT,
    EMA_UNION_IND,
    EMA_UNION_DESC,
    EMA_COMP_DESC,
    EMA_EXEC_HEAD,
    EMA_EXEC_HEAD_DESC,
    EMA_GROUP,
    EMA_GROUP_DESC,
    EMA_PU,
    EMA_PU_DESC,
    EMA_POSITION_ID,
    EMA_REPORTING_TO_PNO,
    EMA_DEPT_HEAD_PNO,
    EMA_PERS_EXEC_PNO,
    EMA_REF_PNO,
    EMA_FATHERS_NAME,
    EMA_SPOUSE_NAME,
    EMA_TRG_ST_DT,
    EMA_TRG_EN_DT,
    EMA_FPF_ACNO,
    EMA_EFBS_IND,
    EMA_BANK_ACNO,
    EMA_BANK_CD,
    EMA_PANNO,
    EMA_PHONE_NO,
    EMA_EMAIL_ID,
    EMA_RELIGION,
    EMA_NATIVE_STATE,
    EMA_NATIONALITY,
    EMA_CHK_HOUSE,
    EMA_WRK_CHK_HOUSE,
    EMA_PYRL_STOP_DATE,
    EMA_ENTRY_DATE,
    EMA_ENTRY_USER,
    EMA_LAST_UPDATE_DATE,
    EMA_LAST_UPDATE_USER
    )

     VALUES( CT.base.eme_perno ,
             CT.CAR.CAR_COMP_CD,
             CT.PER.EPR_SALUTATION,
             CT.PER.EPR_FST_NAME,
             CT.PER.EPR_MID_NAME,
             CT.PER.EPR_LST_NAME,
             CT.HRPS.POP_NAME_FETCH(BASE.EME_PERNO),
             CT.BASE.EME_DOB,
             CT.per.epr_gender,
             NULL,
             CT.PER.EPR_DIFF_ABLE,
             CT.PER.EPR_DIFF_ABLE_DESC,
             CT.BASE.EME_BLOOD_GRP,
             CT.PER.EPR_AFF_ACT,
             CT.DOJ.idt_dt,
             CT.BASE.EME_CADRE,
             CT.C3.IRC_DESC,
             CT.car.car_emp_class,
             CT.CAR.CAR_EMP_TYP,
             CT.BASE.EME_EMPL_STATUS,
             CT.BASE.EME_SOURCE_EMPLMNT,
             CT.CAR.CAR_PYRL,
             CT.PYRL.IPY_PYRL_DESC,
             CT.car.car_dept_cd ,
             CT.org_dept.oro_desc , 
             CT.car.car_sec_cd ,
             CT.org_sec.oro_desc ,
             CT.car.car_desgn_cd ,
             CT.DES.IDS_DESGN_DESC ,
             CT.CAR.CAR_PER_GRADE_CD,
             CT.CAR.CAR_SUB_GRADE_CD,
             NULL,
             NULL,
             NULL,
             NULL,
             CT.CAR.CAR_PYRL_AREA,
             CT.C1.IRC_DESC,
             CT.CAR.CAR_COST_CENT_CD,
             CT.C2.IRC_DESC,
             NULL,
             NULL,
             CT.DOS.IDT_DT,
             CT.CAR_SEP.CAR_ACTION_RSN,
             CT.C4.IRC_DESC,
             CT.PDT.IDT_DT,
             CT.EDR.IDT_DT,
             NULL,
             CT.PROM.IDT_DT,
             CT.INC.IDT_DT,
             NULL,
             NULL,
             CT.C5.IRC_DESC,
             CT.car.car_exec_cd,
             CT.org_exe.oro_desc ,
             CT.car.car_grp_cd ,
             CT.org_grp.oro_desc ,
             CT.car.car_pu_cd ,
             CT.org_pu.idp_pu_desc ,
             CT.car.car_position_id,
             NULL,
             NULL,
             NULL,
             NULL,
             CT.F_NAME,
             CT.S_NAME,
             CT.TRGSD.IDT_DT,
             CT.TRGED.IDT_DT,
             NULL,
             NULL,
             NULL,
             NULL,
             CT.PAN.EID_ID,
             CT.PHONE.EMC_CONTACT,
             CT.EMAIL.EMC_CONTACT,
             CT.PER.EPR_RELIGION,
             CT.PER.EPR_NATIVE_STATE,
             CT.PER.EPR_NATIONALITY,
             NULL,
             NULL,
             NULL,
             SYSDATE,
             '157068',
             SYSDATE,
             '157068');

     END LOOP;

    END Employeeall; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:23:22.807

您必须确保每列在存储过程中具有不同的别名。

即我看到重复：

```
 DOJ.idt_dt,
         DOS.IDT_DT,
         PDT.IDT_DT,
         EDR.IDT_DT,
         PROM.IDT_DT,
         INC.IDT_DT,
         TRGSD.IDT_DT,
         TRGED.IDT_DT, 
```

只需为每个列添加一个唯一别名，就像您为其他一些列所做的那样。

# mysql - 得到维度处理错误；表 '/var/tmp/mysql.VArBWG/#sql_aa0_8.MYI' 的密钥文件不正确；尝试修复它

> ID：13819206
> 
> 赞同：0
> 
> 时间：2012-12-11T11:17:29.507
> 
> 标签：mysql, ssas, ssas-2008

当我处理维度 a 时出现此错误..

高级关系引擎中的错误。使用托管 IDbCommand 接口时发生以下异常：表 '/var/tmp/mysql.VArBWG/#sql_aa0_8.MYI' 的密钥文件不正确；尝试修复它。我正在使用 MYSQL 数据源。

我在那个特定的服务器上使用了这个空间；

已使用的文件系统大小可用使用百分比已安装在

/dev/sda2 64G 40G 21G 66% /

devtmpfs 16G 148K 16G 1% /dev

tmpfs 16G 4.0K 16G 1% /dev/shm

tmpfs 16G 0 16G 0% /var/spool/asterisk/monitor

请帮助朋友解决此问题。建议一些需要的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:26:32.907

见[http://dev.mysql.com/doc/refman/5.1/en/repair-table.html](http://dev.mysql.com/doc/refman/5.1/en/repair-table.html)

但在你这样做之前，请检查文件系统上是否有剩余空间，因为当没有剩余空间时，表经常会损坏。

# sql-server - 如何迁移 Visual Studio 2012 ASP.Net MVC 4 项目以使用 SQL Server 实例而不是数据文件？

> ID：13819207
> 
> 赞同：1
> 
> 时间：2012-12-11T11:17:28.237
> 
> 标签：sql-server, asp.net-mvc, visual-studio, entity-framework

当我使用 Visual Studio 2012 创建一个新的 ASP.Net MVC 4 项目时，它会将数据放入项目目录中的 mdf 文件中。

此时我想做的是将数据库轻轻迁移到 SQL Server 实例，保留 ASP.Net MVC 4 项目模板提供的所有脚手架内容（我的意思是用户帐户管理等）

正确的分步方法是什么？

我应该如何更改连接字符串？

我应该如何在生产环境中验证我在 SQL Server 中的应用程序？

抱歉问了一个愚蠢的问题，但我以前没有处理过 ASP.Net 应用程序，在我以前的经验（使用 WinForms）中，所有实际用户都有一个单独的 SQL Server 帐户，这非常简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:29:02.340

整个*User Instance 和 AttachDbFileName=*方法是有缺陷的 - 充其量！Visual Studio 将在`.mdf`文件周围进行复制，并且**很可能**，您的`INSERT`工作正常 - 但您最终只是查看了**错误的 .mdf 文件**！

**我认为真正的解决**方案是

1.  安装 SQL Server - Express（无论如何你已经完成了）或任何其他版本

2.  安装 SQL Server Management Studio (Express)

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`YourDatabase`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=YourDatabase;User ID=AppUser;Pwd=Top$ecret 
    ```

    其他一切都和以前**完全**一样......

对于部署到生产，您基本上有多种选择：

1.  自己创建部署 SQL 脚本并使用`sqlcmd`或任何其他有用的 SQL 脚本运行器执行它们

2.  使用像[Red-Gate SQL Compare](http://www.red-gate.com/products/sql-development/sql-compare/)这样的 SQL 差异工具，甚至是内置的 Visual Studio 差异工具来确定安装在客户站点上的数据库版本与新版本之间的差异，并从该差异创建单个升级 SQL 脚本

3.  使用 Visual Studio 数据库项目并让 VS 处理升级脚本和部署。VS 数据库项目在您的数据库之上制作模型 - 您基本上只需要创建`CREATE TABLE ....`脚本，VS 工具会找出需要更改、删除、创建新的内容

4.  如果您使用的是实体框架代码优先 - 考虑使用 EF 代码优先**迁移**从 C# 代码更新您的数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:32:04.580

我所做的只是移动 mdf 和日志文件并通过 SQL Server 管理工作室附加它们连接字符串可以非常简单，例如：

```
<add name="DefaultConnection" connectionString="Server=YourServer;Initial Catalog=YourDatabaseName;Integrated Security=SSPI;" providerName="System.Data.SqlClient" /> 
```

# jquery - 将 jquery.js 重命名为另一个名称

> ID：13819214
> 
> 赞同：-1
> 
> 时间：2012-12-11T11:17:52.997
> 
> 标签：jquery, ruby-on-rails

我们可以将 jquery.js 重命名为另一个名称吗？假设我重命名`jquery.js to jquery1.js` `then how can implement in ruby on rails`，

> **application.js 将如何知道它必须使用“jquery1.js”？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:24:14.287

也许我错过了一些东西，但 jQuery 用于服务器生成的页面。这些页面包含以下内容：

```
<script type="text/javascript" src="js/jquery.min.js"></script> 
```

您需要更改负责生成此行的代码，如果未生成，您可以在 html 文档的标题中更改它。

将其更改为您将 jquery 文件重命名为：

```
<script type="text/javascript" src="js/jquery1.min.js"></script> 
```

# ios - 我在我的项目中使用了 ASIHttprequest，我可以在完成块中更改 ui 吗？

> ID：13819218
> 
> 赞同：0
> 
> 时间：2012-12-11T11:18:31.840
> 
> 标签：ios, asihttprequest, objective-c-blocks

我在我的项目中使用了 ASIHttprequest，我知道我不应该在 iOS 开发的一个块中更改 ui，如下所示：

```
[request setCompletionBlock:^{ [self.view addSubview:view1]; }];
[request setFailedBlock:^{ [view removeFromSuperView]; }]; 
```

我知道我应该在 MainThread 中更改 ui 并且可能是上面的代码是错误的。但是我已经用了几个月了，如果它错了，为什么它仍然有效？我真的不太清楚objective-c中的线程和ui，有人可以教我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:23:56.533

有两种不同的东西：块和线程。您可以在后台或主线程中在块中执行代码。在您的情况下，您做的一切都是正确的：您在 MainThread 中执行更改 ui。

您可以查看有关此主题的更多信息-

1）关于线程： [https](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html) ://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html https://developer.apple.com/library/mac/#documentation/ Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html

2）关于块：http: [//developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)

# java - Java 等效于 .NET 的 Environment.HasShutdownStarted

> ID：13819220
> 
> 赞同：2
> 
> 时间：2012-12-11T11:18:37.807
> 
> 标签：java, application-shutdown

在 .NET 中，您可以检查[`Environment.HasShutdownStarted`](http://msdn.microsoft.com/en-us/library/system.environment.hasshutdownstarted.aspx)属性以查看您的服务是否因任何原因被卸载，并执行正常卸载/清理。

所以而不是：

```
while (true) { } 
```

...您可以使用...

```
while (!Environment.HasShutdownStarted) { } 
```

Java中有没有等价的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:22:52.870

也许您正在寻找关闭挂钩？这允许您指定在应用程序关闭时要运行的线程（只要它没有被残酷地强制关闭`kill -9`或类似，但在这种情况下，没有环境可以保证在关闭时执行任何操作。）

```
Runtime.getRuntime().addShutdownHook(new Thread() {

    public void run() {
        //Code here.
    }
}); 
```

从实际的角度来看，您还应该使这些线程快速执行 - 因为否则应用程序将在退出时出现挂起，并且没有人喜欢这样（另外，操作系统或用户可能会选择终止应用程序，中止钩子在任意点。）

您可以添加多个关闭挂钩，它们将同时执行（并且以任意顺序）。

可以通过调用以类似的方式移除关闭挂钩[`removeShutdownHook()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#removeShutdownHook%28java.lang.Thread%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:23:18.390

您可以添加一个[关闭挂钩](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)。基本上注册一个未启动的线程，该线程将在应用程序终止时运行。

```
Runtime.getRuntime().addShutdownHook(new Thread() {
   public void run() { 
      // logic for making a clean shutdown...
   }
}) 
```

上面的链接很好地描述了关机期间发生的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T11:26:44.183

您可以查看关闭挂钩 API，而不是做

```
while(true) {
} 
```

您可以在线程/可运行实现中声明一个成员以表示关闭：

```
class MyRunnable implements Runnable {
    private running= false;

    public void setRunning(boolean running) {
        running= running;
    }

    public void run() {
        setRunning(true);
        while(running) {
            // do task
        }
    }
}

public static void main(String[] args) {
    final MyRunnable myRunnable= new MyRunnable();
    final Thread runThread= new Thread(myRunnable);
    Runtime.getRuntime().addShutdownHook(new Thread() {
        public void run() {
            myRunnable.setRunning(false);
        }
    });

    runThread.start();
    runThread.join();
} 
```

这不是一个完美的解决方案，但至少应该让您朝着正确的方向前进。

# android - GridView imageAdapter 不起作用

> ID：13819221
> 
> 赞同：0
> 
> 时间：2012-12-11T11:18:38.920
> 
> 标签：android

我在片段中有gridView

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        //
        Bundle savedInstanceState) {

    if (container == null) {
        Log.e("Null container", "Null");

        return null;
    }
    Log.e("fragment1", "fragment1 reached!");
    View view =  inflater.inflate(R.layout.menu1_fragment, container, false);
    GridView gridView = (GridView)view.findViewById(R.id.gridview1);
    gridView.setAdapter(new ImageAdapter(this.getActivity()));

    Log.e("fragment1", "fragment1 reached!");

    return (GridView)inflater.inflate(R.layout.menu1_fragment, container, false);
} 
```

但是适配器不起作用，它没有达到覆盖的 getView 方法。

构造函数：

```
public ImageAdapter(Context c) {
    mContext = c;
    Log.e("ImageAdapter", "constructor");
} 
```

获取视图方法：

```
 @Override
public View getView(int position, View convertView, ViewGroup parent) {
    Log.e("ImageAdapter", "dsfdsf");
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        if (DefinedValues.width/3 < DefinedValues.height/4)
        imageView.setLayoutParams(new GridView.LayoutParams
                (DefinedValues.height/4, DefinedValues.height/4));
        else
            imageView.setLayoutParams(new GridView.LayoutParams
                    (DefinedValues.width/3-5, DefinedValues.width/3-5));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(mThumbIds[position]);
    return imageView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:20:40.170

在 中`onCreateView`，您将 xml 膨胀两次，一次正在编辑，然后返回未编辑的 ..

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    //
    Bundle savedInstanceState) {

if (container == null) {
    Log.e("Null container", "Null");

    return null;
}
Log.e("fragment1", "fragment1 reached!");
View view =  inflater.inflate(R.layout.menu1_fragment, container, false);
GridView gridView = (GridView)view.findViewById(R.id.gridview1);
gridView.setAdapter(new ImageAdapter(this.getActivity()));

Log.e("fragment1", "fragment1 reached!");

return view;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T11:22:19.853

我想你需要变成

```
public ImageAdapter(Context c) {
    this.mContext = c;
    Log.e("ImageAdapter", "constructor");
} 
```

检查这个。

# php - 是否可以在 Amazon EC2（弹性计算云）中执行 php 文件？

> ID：13819223
> 
> 赞同：-1
> 
> 时间：2012-12-11T11:18:49.550
> 
> 标签：php, amazon-ec2

您能否共享代码片段以在 Amazon EC2 中执行 PHP 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:22:53.567

EC2 中的 PHP 没有什么特别之处。您需要为您的特定用例（CLI、apache 模块、FastCGI）安装和配置 PHP 的实例，就像使用物理机器一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:23:14.237

你是什​​么意思执行一个php文件？

在 Amazon EC2 中，只需创建一个 Ubuntu 实例，安装 apache + php，将您的 php 文件上传到该实例并将其放在 apache 中（就像它是任何其他 Web 服务器一样）。

从浏览器浏览到文件位置，它将运行，就像任何其他 php 文件一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:32:25.127

Amazone 实例只不过是一个托管空间。您应该启用 PHP/Mysql（如果您为 PHP 购买服务器空间。）。只需将文件推送到服务器并运行它。

如果默认未启用，请安装 LAMP。

# objective-c - 词法或预处理器问题

> ID：13819226
> 
> 赞同：3
> 
> 时间：2012-12-11T11:18:55.337
> 
> 标签：objective-c, ios, xcode, precompile

![错误描述](../Images/ff57d17c28cc42ab796c0c213d6c63e9.png)

我在归档项目时遇到了这两个错误。

*   缺少宏名称
*   宏名必须是标识符

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:29:00.997

锡纸上写着什么。

第一个是`#define`，如果你自己有这个，它定义了什么？后面需要一个标识符/名称`#define`，例如`#define VARIABLE`.

第二个确实提供了某种名称，但它只是一个数字。标识符不能以数字开头（就像变量名不能一样）。因此不被归类为标识符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T20:32:13.550

尝试在构建设置中定义预处理器宏时遇到相同的错误，如下所示

```
Preprocessor Macros
    DEBUG=1 MY_MACRO = 1 
```

所以，解析器不喜欢空格，即 MY_MACRO=1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:31:25.813

您正在使用`macro`而不给予`name`。您必须`#define`按如下方式使用 with name 并且必须为`macro`

`#define macroname macrovalue`

第二个提供价值，因为您不能在其中使用`numbers`，`macro`但您提供的
`#define 0 1`

应该是
`#define ZERO 1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T11:50:04.810

您使用 0 作为宏的名称，数字不是任何变量、函数或宏的有效名称。所有标识符必须以字母（或_）开头：）

# tomcat - Eclipse Virgo 在 EC2 上无故关闭

> ID：13819228
> 
> 赞同：7
> 
> 时间：2012-12-11T11:19:05.847
> 
> 标签：tomcat, ssh, amazon-ec2, osgi, eclipse-virgo

一旦在 Amazon EC2 上的 Ubuntu 映像 12.04 上启动，我遇到了 Eclipse Virgo (3.5) 的全新安装问题，它显然会无缘无故地关闭。我从 SSH 启动 Virgo，启动工作正常，但几个小时后服务器停止，日志报告如下（见第三行）：

```
[2012-12-10 11:57:14.804] INFO  http-bio-8080-exec-9         org.springframework.web.servlet.handler.SimpleUrlHandlerMapping   Mapped URL path [/splash] onto handler 'splashController' 
[2012-12-10 11:57:14.840] INFO  http-bio-8080-exec-9         org.springframework.web.servlet.DispatcherServlet                 FrameworkServlet 'splash': initialization completed in 92 ms 
[2012-12-10 15:33:27.488] INFO  System Bundle Shutdown       o.e.g.b.extender.internal.activator.ContextLoaderListener         Stopping [org.eclipse.gemini.blueprint.extender] bundle v.[1.0.0.RELEASE] 
[2012-12-10 15:33:27.493] INFO  kernel-dm-10                 o.e.g.blueprint.context.support.OsgiBundleXmlApplicationContext   Unpublishing application context OSGi service for bundle Virgo Kernel Admin
 Shell (org.eclipse.virgo.kernel.shell) 
[2012-12-10 15:33:27.494] INFO  kernel-dm-10                 o.e.g.blueprint.context.support.OsgiBundleXmlApplicationContext   Closing OsgiBundleXmlApplicationContext(bundle=org.eclipse.virgo.kernel.she
ll, config=osgibundle:/META-INF/spring/*.xml): startup date [Mon Dec 10 11:40:04 UTC 2012]; root of context hierarchy 
[2012-12-10 15:33:27.495] INFO  kernel-dm-10                 o.s.beans.factory.support.DefaultListableBeanFactory              Destroying singletons in org.springframework.beans.factory.support.DefaultL
istableBeanFactory@1fc7875: defining beans [commandProcessor,singleCommandExecutor,ioManager,completerRegistry,modelAccessorHelper,stateService,installCommand,bundleCommands,serviceCommands,packageComma
nds,configCommands,planCommands,parCommands,shutdownCommand,exitCommand,helpCommand,helpAccessor,helpCommandCompleter,bundleCompleter,packageCompleter,configCompleter,parCompleter,planCompleter,installC
ompleter,longConverter,stringConverter,commandResolver,commandRegistry,commandInvoker,converterRegistry,quasiFrameworkFactory,moduleContextAccessor,eventLogger,configAdmin,org.eclipse.gemini.blueprint.s
ervice.exporter.support.OsgiServiceFactoryBean#0,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#1,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBe
an#2,userRegionBundleContext,deployer,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#3,regionDigraph,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactor
yBean#4,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#5,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#6,org.eclipse.gemini.blueprint.service
.exporter.support.OsgiServiceFactoryBean#7,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#8,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#9,o
rg.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#10,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#11,org.eclipse.gemini.blueprint.service.export
er.support.OsgiServiceFactoryBean#12,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#13,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#14,org.e
clipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#15,objectNameCreator,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#16,org.eclipse.gemini.blueprint.
service.exporter.support.OsgiServiceFactoryBean#17,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#18,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactor
yBean#19,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#20,org.eclipse.gemini.blueprint.service.exporter.support.OsgiServiceFactoryBean#21,org.eclipse.gemini.blueprint.serv
ice.exporter.support.OsgiServiceFactoryBean#22]; root of factory hierarchy 
[2012-12-10 15:33:27.497] INFO  kernel-dm-10                 o.e.g.blueprint.service.exporter.support.OsgiServiceFactoryBean   Unregistered service [ServiceRegistrationWrapper for {org.eclipse.virgo.ker
nel.shell.CommandCompleter}={org.eclipse.virgo.kernel.shell.completer.commmandNames=install, org.eclipse.gemini.blueprint.bean.name=installCompleter, org.springframework.osgi.bean.name=installCompleter,
 osgi.service.blueprint.compname=installCompleter, Bundle-SymbolicName=org.eclipse.virgo.kernel.shell, Bundle-Version=3.5.0.RELEASE, service.id=216}] 
```

**这些是服务器属性**

*   Java VM 描述：Oracle Corporation(OpenJDK 64-Bit Server VM) 23.2-b09
*   Java 版本：甲骨文公司 1.7.0_09
*   操作系统：Linux(amd64) 3.2.0-31-虚拟服务器
*   时区：等/UTC 处女座
*   服务器版本：3.5.0.RELEASE

有什么想法或建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:24:45.753

@Tarelli 在处女座社区论坛上交叉发布了这个，并且[找到了原因](http://www.eclipse.org/forums/index.php/mv/msg/441398/992902/#msg_992902)

问题是当他的 SSH 连接在空闲足够长的时间后关闭时，从 SSH 启动的 Virgo 进程也关闭了。

# php - 为 AES 加密/解密共享和存储 IV

> ID：13819231
> 
> 赞同：1
> 
> 时间：2012-12-11T11:19:08.670
> 
> 标签：php, android, encryption, aes

我目前在安卓应用程序上使用 AES-ECB 加密用户密码，但我必须将此应用程序的数据库连接到一个网站，用户可以在该网站上以与移动应用程序相同的方式注册和登录。

我读过 ECB 模式不安全，所以我想通过生成 IV 来使用 CBC。

将IV作为常量存储在代码中是否安全（我也以这种方式存储密钥），无论是在服务器端的php中还是在应用程序中？

如果没有，网站和移动应用程序有没有办法共享它的 IV 来加密/解密用户密码？

或者，我可能选择了错误的加密算法，可能有一个更适合我的需要

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:28:25.047

Best practice would be to create a new random IV for each encryption. The IV is basically a seed for that encryption call used in the first block.

Each IV can be safely stored in clear text along with the cypher text so it is available when decrypting the cypher text (the IV used to encrypt must be the same IV used to decrypt).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-27T12:33:22.280

如果你对这个算法很满意，我可能会建议 -***不要***从加密端到解密端共享 IV。

**虚拟** 块 在 16 字节的实际消息块之前添加一个 16 字节的初始虚拟块。这样，即使您不将 IV 共享给解密端，由于 AES-CBC 是一种链接模式，解密端的第一个块（虚拟块）将被破坏，其余块不受影响。

**加密结束** 按照 AES 中的 CBC 模式，在 CBC 模式下，每个明文块在加密之前都与前一个密文块进行异或。为了使每条消息唯一，必须在第一个块中使用初始化向量。参考：[http ://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_Block_Chaining_.28CBC.29](http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_Block_Chaining_.28CBC.29)

**解密结束** 使用不正确的 IV 解密会导致第一个明文块损坏，但随后的明文块将是正确的。这是因为一个明文块可以从两个相邻的密文块中恢复。

# android - android onscroll手势检测器

> ID：13819233
> 
> 赞同：1
> 
> 时间：2012-12-11T11:19:21.823
> 
> 标签：android, gesture, viewflipper

在我的 android 应用程序中，我有一个带有 ViewFlipper 的 Activity。在 Viewflipper 内部，我有 3 个线性布局。

```
 <ViewFlipper
    android:id="@+id/viewFlipper"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginBottom="20dip"
            android:text="@string/publicas"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <ListView
            android:id="@+id/listViewDemandasPublicas"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginBottom="20dip"
            android:text="@string/pendientes"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <ListView
            android:id="@+id/listViewDemandasPendientes"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_marginBottom="20dip"
            android:text="@string/pendientes"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <ListView
            android:id="@+id/listViewDemandasFinalizadas"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

</ViewFlipper> 
```

所以我想更改水平滚动时包含的 ViewFlippers。所以我实现了一个手势检测器和一个手势监听器。即使我有一个 ListView 里面（我已经在另一个活动中完成），它也能正常工作。我的 onScroll 方法是下一个：

```
@Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
 ViewFlipper vf = (ViewFlipper) getWindow().findViewById(R.id.viewFlipper);
    View view = null;
    if ((e1.getX() < e2.getX()) && (distanceX < -20)) { // dedo a la derecha
        Log.i("ListaDemandas", "Muevo a la derecha SCROLL");
        if (esPendientes) {
            esPendientes = false;
            esEntrada = true;
            verPublicas(view);
            vf.setInAnimation(AnimationUtils.loadAnimation(getParent(), R.anim.push_right_in));
            vf.setOutAnimation(AnimationUtils.loadAnimation(getParent(), R.anim.push_right_out));
            vf.showPrevious();
        } else if (esFinalizadas) {
            esFinalizadas = false;
            esPendientes = true;
            verPendientes(view);
            vf.setInAnimation(AnimationUtils.loadAnimation(getParent(), R.anim.push_right_in));
            vf.setOutAnimation(AnimationUtils.loadAnimation(getParent(), R.anim.push_right_out));
            vf.showPrevious();
        }
    } else if ((e1.getX() > e2.getX()) && (distanceX > 20)) { 
        Log.i("ListaDemandas", "Muevo a la izquierda SCROLL");
        if (esPendientes) {
            esPendientes = false;
            esFinalizadas = true;
            verFinalizadas(view);
            vf.setInAnimation(AnimationUtils.loadAnimation(getParent(), R.anim.push_left_in));
            vf.setOutAnimation(AnimationUtils.loadAnimation(getParent(), .anim.push_left_out));
            vf.showNext();
        } else if (esEntrada) {
            esEntrada = false;
            esPendientes = true;
            verPendientes(view);
            vf.setInAnimation(AnimationUtils.loadAnimation(getParent(), R.anim.push_left_in));
            vf.setOutAnimation(AnimationUtils.loadAnimation(getParent(), .anim.push_left_out));
            vf.showNext();
        }
    }
    return true;
} 
```

我的问题是每次滚动距离大于 20 时都会调用 onScroll （当然）。因此，如果我进行长滚动，则每次滚动移动大于 20 时都会调用该方法。因此，如果我的 Scroll 的距离为 50，则该方法将在 21、22、23 中调用......

我该如何管理它以使该方法仅被调用一次？我一直在阅读 API 并且一直在尝试控制 MotionEvent 时间，但这不是一个好的解决方案，因为我可以快速滚动两次。我也见过 addBatch 方法。这是我的解决方案？任何人都知道我怎样才能将所有电话批量处理？任何“手工”方式？

谢谢

==================================================== ==================================================== =========

编辑：

我以手工方式解决了它。用真正的 newScroll 初始化的布尔值。因此，当我制作 Scroll 时，我将其设置为 false 并且 onDown() 我再次将其设置为 true。所以：

```
 @Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
    ViewFlipper vf = (ViewFlipper) getWindow().findViewById(R.id.viewFlipper);
    if (scrollNuevo) {

        if ((e1.getX() < e2.getX()) && (distanceX < -20)) {                 
            Log.i("ListaDemandas", "Muevo a la derecha SCROLL");
            scrollNuevo = false; Log.i("ListaDemandas","ScrollNuevo=false");
            if (esPendientes) {
     ... 
```

以及 onDown 方法：

```
@Override
public boolean onDown(MotionEvent e) {
    scrollNuevo = true;Log.i("ListaDemandas","ScrollNuevo=true");
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:18:37.477

我以手工方式解决了它。用真正的 newScroll 初始化的布尔值。因此，当我制作 Scroll 时，我将其设置为 false 并且 onDown() 我再次将其设置为 true。所以：

```
 @Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
    ViewFlipper vf = (ViewFlipper) getWindow().findViewById(R.id.viewFlipper);
    if (scrollNuevo) {

        if ((e1.getX() < e2.getX()) && (distanceX < -20)) {                 
            Log.i("ListaDemandas", "Muevo a la derecha SCROLL");
            scrollNuevo = false; Log.i("ListaDemandas","ScrollNuevo=false");
            if (esPendientes) {
     ... 
```

以及 onDown 方法：

```
@Override
public boolean onDown(MotionEvent e) {
scrollNuevo = true;Log.i("ListaDemandas","ScrollNuevo=true");
return true;
} 
```

# sql - Oracle 中违反了完整性约束

> ID：13819235
> 
> 赞同：2
> 
> 时间：2012-12-11T11:19:30.940
> 
> 标签：sql, oracle, oracle11g

我有两个 Oracle 表：

```
CREATE TABLE MANAGEDSYSTEMS(
  MSYSTEMID INTEGER NOT NULL,
  MSYSTEMGROUPID INTEGER,
  SPECIALNUMBER VARCHAR2(40 ),
  SERIALNUMBER VARCHAR2(30 ),
  MSYSTEMSTATUS VARCHAR2(30 ),
  MSYSTEMNAME VARCHAR2(60 ),
  IPADDRESS VARCHAR2(30 ),
  DATEMSYSTEMADDED TIMESTAMP(6),
  DESCRIPTION CLOB
)
/

-- ADD KEYS FOR TABLE MANAGEDSYSTEMS

ALTER TABLE MANAGEDSYSTEMS ADD CONSTRAINT MSKEY PRIMARY KEY (MSYSTEMID)
/

CREATE TABLE AGENTS(
  AGENTID INTEGER NOT NULL,
  MSYSTEMID INTEGER,
  AGENTGROUPID INTEGER,
  AGENTSERIALNUMBER VARCHAR2(60 ),
  AGENTSTATUS VARCHAR2(30 ),
  AGENTOS VARCHAR2(60 ),
  AGENTIPADDRESS VARCHAR2(40 ),
  LASTSYNC TIMESTAMP(6),
  DATEAGENTADDED TIMESTAMP(6),
  CPULOADLIMIT INTEGER,
  RAMLOADLIMIT INTEGER,
  HDDSPACELIMIT INTEGER,
  NETWORKUPLIMIT INTEGER,
  NETWORKDOWNLIMIT INTEGER,
  REPORTUSERLOGINS VARCHAR2(30 ),
  CANEXECCOMMANDS VARCHAR2(30 ),
  SYNCHRONIZATIONTIME VARCHAR2(30 ),
  DATALIMITSPEAKTIMES INTEGER,
  DESCRIPTION CLOB
)
/

-- ADD KEYS FOR TABLE AGENTS

    ALTER TABLE AGENTS ADD CONSTRAINT AGENTID PRIMARY KEY (AGENTID)
ALTER TABLE AGENTS ADD CONSTRAINT MSYSTEMID FOREIGN KEY (MSYSTEMID) REFERENCES MANAGEDSYSTEMS (MSYSTEMID) 
```

我想将“代理”分配到“托管系统”表中。如您所见，我有一个表外键 - 用户必须先创建托管系统，然后再创建代理。但我也想给出一个选项来创建代理而不分配托管系统。当我尝试将托管系统 ID 的键更改为代理表时，我收到此错误：

```
Caused by: java.sql.SQLIntegrityConstraintViolationException: ORA-02291: integrity constraint (ADMIN.MSYSTEMID) violated - parent key not found 
```

看来我不能分配空值。我该如何解决这个问题？

更新：

我使用这个 SQL 语句来更新代理表：

```
String sql = "UPDATE AGENTS "
                             + " SET AGENTID = ?, MSYSTEMID = ?, AGENTGROUPID = ?, AGENTSERIALNUMBER = ?, AGENTSTATUS = ?, AGENTOS = ?, AGENTIPADDRESS = ?, "
                             + " LASTSYNC = to_timestamp(?, " + ts_template + "), DATEAGENTADDED = to_timestamp(?, " + ts_template + "), "
                             + " CPULOADLIMIT = ?, RAMLOADLIMIT = ?, HDDSPACELIMIT = ?, NETWORKUPLIMIT = ?, NETWORKDOWNLIMIT = ?, REPORTUSERLOGINS = ?, "
                             + " CANEXECCOMMANDS = ?, SYNCHRONIZATIONTIME = ?, DATALIMITSPEAKTIMES = ?, "
                             + " DESCRIPTION = ? WHERE AGENTID = ?"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:32:53.767

您在更新语句中绑定了什么值？`AGENTS.MSYSTEMID`的值应该是存在于父表（`MANAGEDSYSTEMS`）中的任何值，或者`null`如果您不想分配。所以代码应该是这样的：

```
String sql = "...";
..
PreparedStatement ps = ...
ps.setInt(1, ...);
if (you want to assign AGENTS.MSYSTEMID) {
    ps.setInt(2, ...);
} else {
    ps.setNull(2, ...);
}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:41:39.833

如果您在同一个事务中插入两个表，但您想先插入子表，然后让您的 FK 最初延迟。

```
SQL> CREATE TABLE MANAGEDSYSTEMS(
  2    MSYSTEMID INTEGER NOT NULL,
  3    MSYSTEMGROUPID INTEGER,
  4    SPECIALNUMBER VARCHAR2(40 ),
  5    SERIALNUMBER VARCHAR2(30 ),
  6    MSYSTEMSTATUS VARCHAR2(30 ),
  7    MSYSTEMNAME VARCHAR2(60 ),
  8    IPADDRESS VARCHAR2(30 ),
  9    DATEMSYSTEMADDED TIMESTAMP(6),
 10    DESCRIPTION CLOB
 11  )
 12  /

Table created.

SQL> ALTER TABLE MANAGEDSYSTEMS ADD CONSTRAINT MSKEY PRIMARY KEY (MSYSTEMID);

Table altered.

SQL> CREATE TABLE AGENTS(
  2    AGENTID INTEGER NOT NULL,
  3    MSYSTEMID INTEGER,
  4    AGENTGROUPID INTEGER,
  5    AGENTSERIALNUMBER VARCHAR2(60 ),
  6    AGENTSTATUS VARCHAR2(30 ),
  7    AGENTOS VARCHAR2(60 ),
  8    AGENTIPADDRESS VARCHAR2(40 ),
  9    LASTSYNC TIMESTAMP(6),
 10    DATEAGENTADDED TIMESTAMP(6),
 11    CPULOADLIMIT INTEGER,
 12    RAMLOADLIMIT INTEGER,
 13    HDDSPACELIMIT INTEGER,
 14    NETWORKUPLIMIT INTEGER,
 15    NETWORKDOWNLIMIT INTEGER,
 16    REPORTUSERLOGINS VARCHAR2(30 ),
 17    CANEXECCOMMANDS VARCHAR2(30 ),
 18    SYNCHRONIZATIONTIME VARCHAR2(30 ),
 19    DATALIMITSPEAKTIMES INTEGER,
 20    DESCRIPTION CLOB
 21  )
 22  /

Table created.

SQL> ALTER TABLE AGENTS ADD CONSTRAINT AGENTID PRIMARY KEY (AGENTID);

Table altered.

SQL> ALTER TABLE AGENTS ADD CONSTRAINT MSYSTEMID FOREIGN KEY (MSYSTEMID) REFERENCES MANAGEDSYSTEMS (MSYSTEMID) initially deferred;

Table altered.

SQL> insert into AGENTS (AGENTID, MSYSTEMID, AGENTGROUPID, AGENTSERIALNUMBER) values (1, 1, 1, 'x');

1 row created.

SQL> insert into MANAGEDSYSTEMS (MSYSTEMID, MSYSTEMGROUPID, SPECIALNUMBER) values (1, 1, 'x');

1 row created.

SQL> commit;

Commit complete. 
```

它不会让你在没有父母的情况下完成交易：

```
SQL> insert into AGENTS (AGENTID, MSYSTEMID, AGENTGROUPID, AGENTSERIALNUMBER) values (2, 2, 1, 'x');

1 row created.

SQL> commit;
commit
*
ERROR at line 1:
ORA-02091: transaction rolled back
ORA-02291: integrity constraint (DTD_TRADE.MSYSTEMID) violated - parent key not
found 
```

# c# - 如何获取 DataGrid 中的图像行？

> ID：13819236
> 
> 赞同：3
> 
> 时间：2012-12-11T11:19:34.437
> 
> 标签：c#, .net, wpf

我的 WPF 的一列中有图像`DataGrid`。我需要为它们生成动态工具提示，因此我为`ToolTipOpening`事件创建了一个处理程序。但问题是这个事件的发送者是 Image 类的实例，它没有关于事件发生的行的任何信息，而我需要它来生成工具提示。我`CellContentTemplate`为此列定义了这样

```
<DataTemplate x:Key="SomeTemplate" x:Shared="true">
    <Image Name="SomeImage"
           Style="{StaticResource SomeStyle}"
           Width="16"
           Height="16"
           HorizontalAlignment="Center"
           VerticalAlignment="Center"
           Stretch="None"
           ToolTipOpening="SomeTooltipHandler"/>
</DataTemplate> 
```

任何想法如何在我的处理程序中获取行号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:26:14.010

由于 Image 是一个 DependencyObject，您可以使用`VisualTreeHelper.GetParent`. 因此，以查找 DataGrid 为例：

```
public static DataGrid FindDataGridAncestor(DependencyObject dependencyObject)
{
        DependencyObject target = dependencyObject;
        do
        {
            target = VisualTreeHelper.GetParent(target);
        }
        while (target != null && !(target is DataGrid));

        return target as DataGrid;
} 
```

**用法：**

```
DataGrid myGrid = FindDataGridAncestor(myImage); 
```

# .htaccess - Magento .htaccess 重定向循环

> ID：13819238
> 
> 赞同：0
> 
> 时间：2012-12-11T11:19:41.793
> 
> 标签：.htaccess, magento

我目前正在一个 Magento 网站上工作，我正在尝试将所有不需要在 https 上的流量重定向到 http，因为它会导致该网站上包含的一系列文件（字体、css 和js）。

我原以为这是相当直截了当的，并尝试了我在 Stack Overflow 和其他地方找到的一系列建议，但没有运气。

https 页面要么只是重定向到主页，要么我得到一个重定向循环。

我最近的尝试看起来像这样（这会导致重定向循环）：

```
RewriteEngine on
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !^/onestepcheckout/$ [NC]
RewriteCond %{REQUEST_URI} !^/customer/account/?.*$ [NC]
RewriteRule ^(.*)$ http://example.com/$1 [L,R=301] 
```

我们确实安装了一个完整的页面缓存模块。我不确定可能会产生什么影响，但即使我关闭它也会出现问题。

# c# - JSON.parse: 意外字符错误，数据库查询列表正常，但列表数据失败

> ID：13819239
> 
> 赞同：0
> 
> 时间：2012-12-11T11:19:42.030
> 
> 标签：c#, ajax, json

我的ajax函数：

```
function fetchData(varUrl, varFunc, varData) {
 if (varData == undefined) varData = "";
 var options = {
    type: "POST",
    url: varUrl,
    data: varData,
    contentType: "application/json;charset=utf-8",
    dataType: "json",
    timeout: 8000,
    cache: false,
    beforeSend: ShowLoading(),
    success: varFunc,
    complete: HideLoading(),
    error: function (x, t, m) {
        if (t === "timeout") {
            alert("got timeout");
        } else {
            alert(t+"\r\n\r\n"+m);
        }
    }
  };
  //execute the ajax call and get a response
  var request = $.ajax(options);
}

  function funcA(data){
     $.each(data, function (i, item) {...}
  }

  function funcB(data){
     $.each(data, function (i, item) {...}
  } 
```

C#代码：

```
 public ActionResult AjaxA()
    {
        try
        {
            using (var db = new MvcContext())
            {
                var history = from h in db.Histories.Where(h => h.Id == 2)
                return this.Json(history.ToList());
            }
        }
        catch(Exception)
        {
            return this.Json("");
        }
    }

     public ActionResult AjaxB()
    {
        var history = new List<MyDataType>();
        history.Add( new MyData(...));
          ...
        history.Add( new MyData(...));
        return this.Json(history);
    } 
```

1）如果我使用 fetchData("AjaxA", funcA) 来获取数据，就可以了

2）如果我使用 fetchData("AjaxB", funcB) 来获取数据，它会失败并得到错误

JSON.parse：意外字符错误

但在这种情况下，firebug 也可以获得良好的 json 数据。

json 数据 [{"x":39,"y":115.5,"Data":16.743013706957576},{"x":39.5,"y":115.5,"Data":12.353‌​109643128887}]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:37:44.547

```
Parse error on line 10:
...      "Data": 12.353‌​109643128887    }
-----------------------^
Expecting '}', ',', ']' 
```

给你，我已经在[http://jsonlint.com/上验证了 JSON](http://jsonlint.com/)

当我在文本编辑器上复制 JSON 时，有几个字符被转换为`?`，请检查。它看起来像一个编码问题。

```
[{"x":39,"y":115.5,"Data":16.743013706957576},{"x":39.5,"y":115.5,"Data":12.353??109643128887}] 
```

# javascript - 允许可拖动内容超出但不在 Jquery 中的父边界内？

> ID：13819241
> 
> 赞同：1
> 
> 时间：2012-12-11T11:19:53.120
> 
> 标签：javascript, jquery, draggable

我正在使用 Jquery ui，它为我提供了制作可拖动内容的功能。它有一个“包含”选项，可以强制可拖动项目在框内移动。

但是，就我而言，内容（图像）必须超出屏幕，我怎么能强制它不要在屏幕内拖动？

谢谢

```
$("#popup").draggable({
    addClasses:true,
    scrollSpeed: "200",
    containment: "parent",
    //appendTo: "body",
    helper: function(){
        // Create an invisible div as the helper. It will move and
        // follow the cursor as usual.
        return $('<div></div>').css('opacity',0);
    },
    drag: function(event, ui){
        // During dragging, animate the original object to
        // follow the invisible helper with custom easing.
        var p = ui.helper.position();
        $(this).stop().animate({
            top: p.top,
            left: p.left
        },1000,'easeOutCirc');
    }
}); 
```

# android - 未显示图像按钮

> ID：13819242
> 
> 赞同：0
> 
> 时间：2012-12-11T11:19:54.203
> 
> 标签：android, android-layout, android-linearlayout

图像按钮未显示在 LinearLayout 中：

```
<LinearLayout 
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="50dip"
    android:background="@color/usualBike"
>    
    <TextView
        android:id="@+id/usesLabel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="@color/white"
        android:text="@string/tituloUsos"
        android:textSize="30dip"
        android:layout_marginLeft="10dip" 
        android:gravity="center"
        android:textStyle="bold"
    /> 

    <ImageButton
        android:id="@+id/disconnect"
        android:layout_width="45dip"
        android:layout_height="45dip"
        android:layout_marginRight="10dip" 
        android:gravity="center"
        android:src="@drawable/icon" />

</LinearLayout> 
```

水平条和文本出现，但 imageButton 不出现。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:22:58.730

可能是因为您在此处`android:background="@null"`为 ImageButton 提供了为空的背景。

**编辑**

更改 TextView 的宽度以换行内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:30:13.397

未显示图像按钮，因为您已将 LinearLayout 方向设置为水平，然后将 TextView 宽度设置为“fill_parent”，将 textview 宽度更改为“wrap_content”，您的 ImageButton 将可见

# language-agnostic - 在构建时区感知应用程序时，常见的陷阱（和要测试的东西）是什么？

> ID：13819244
> 
> 赞同：6
> 
> 时间：2012-12-11T11:19:57.800
> 
> 标签：language-agnostic, timezone

我正在构建一个时区感知应用程序。我应该测试哪些常见（但不那么常见）的场景？

我能想到的唯一极端情况是夏令时，但我确信我错过了很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:29:44.460

在我的头顶

*   时区是时间序列：我的意思是，如果您将某个瞬间的本地时间存储在某个地方，那么您将使用今天的时区信息。到明天，这些信息可能已经改变，存储的瞬间可能会被不同地解释。要解决此问题，请考虑将手头的时区信息与您要描述的事件或瞬间一起存储。

*   日期和时间是观察：我的意思是你可以在本地时间编码一个瞬间，而不管那个瞬间有效的时区，并在观察时进行转换。1 月 1 日凌晨 2 点可能比今天的某个参考点提前 4 天 3 小时。但在 1 月 1 日凌晨 2 点，相同的参考点可能看起来只是 4 天 2 小时前。因此，在不同时间的参考点之间的经过时间之间进行转换时，您必须留意。特别是，如果您设置了一个计时器（以`N`秒为单位），您可能需要重新计算它是否仍不时匹配事件。

*   时区是区域性的：我的意思是你不能只将具有相同时区偏移量的所有日期时间视为相等。尤其是北半球和南半球的 DST 观测地点在一年中可能会同时出现一段时间，而在一年中的其余时间它们完全不同步。

*   本地时间指定的日期和时间不必存在或可以存在多次。您给出了 DST 示例，在 DST 向后切换时发生两次，一次在切换之前，一次在切换之后，因此您可能需要一个标志。同样，DST 切换向前跳过时间。然而，夏令时并不是唯一的例子。国际日期变更线附近的一些地区决定在它的左边或右边，结果要么缺了一整天，要么一整天重复了两次。

# jquery - 我正在使用 jquery 垂直手风琴菜单。登录后我的第一页加载。如何突出显示我的第一页

> ID：13819245
> 
> 赞同：-4
> 
> 时间：2012-12-11T11:19:57.977
> 
> 标签：jquery, menu, accordion

我正在使用 jquery 垂直手风琴菜单。登录后，我的第一页被加载。如何突出显示我的第一页。默认情况下，iam 使用 jquery 点击事件来突出显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:53:23.427

由于您没有提及您的代码，所以我假设并举例说明：

```
Initialize the accordion with the active option specified:

$( ".selector" ).accordion({ active: 2 });

Get or set the active option, after initialization:
// getter
var active = $( ".selector" ).accordion( "option", "active" );

// setter
$( ".selector" ).accordion( "option", "active", 2 ); 
```

更改提及 2 的值。提及您要在登录后打开的手风琴值。

# regex - 域发生时删除标签

> ID：13819246
> 
> 赞同：0
> 
> 时间：2012-12-11T11:20:02.543
> 
> 标签：regex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:25:12.500

# javascript - Jquery：表格内行的内联编辑

> ID：13819248
> 
> 赞同：1
> 
> 时间：2012-12-11T11:20:07.557
> 
> 标签：javascript, jquery-ui, jquery, jqgrid

我是 jquery 和数据表的新手。我为“联系人”开发了可编辑的数据表，其中每一行代表一个联系人。每个“联系人”都有一些与之相关的“动作”。

当用户点击特定的“联系人”时，关联的“动作”将显示为该特定联系人下的附加行。

现在我想让“联系人”行和“操作”行都可编辑。我使用了“jEditable”插件，并且可以将“联系人”行设置为可编辑而不是“操作”。任何想法或帮助将不胜感激。

```
userInfo = "<table id='mycontacttable'><thead><tr><th></th><th>FirstName</th><th>FamilyName</th></tr></thead><tbody> ";
              /*constructing the Contact table, at this stage without the actions.*/
              for(i =0 ; i < response.result.length ; i++){
                  var contactid=response.result[i].contactID;
                  userInfo += "<tr><td>"+ 
                  "<img src=\"../javascript/datatables/media/images/details_open.png\" rel="+contactid+" alt=\"expand/collapse\"></td>"+
                  "<td>"+ response.result[i].givenName + "</td><td>" + response.result[i].familyName+"</td></tr> ";
              }
              userInfo +=  "</tbody></table> ";

              $('#info').html("The following are your contacts. " + userInfo);

              /*setting the sortable and unsortable columns*/
              oTable= $('#mycontacttable').dataTable({
                  "iDisplayLength": 25,

                  "bSort": true,

                  "aoColumns": [ 
                                { "bSortable": false },//Disable sorting on this column
                                null,
                                null

                                ]
              }).makeEditable();

              /*clicking a particular row in the table mycontacttable, and assigning the click event*/
              $('#mycontacttable tbody td img').live("click",function () {

                  var nTr = this.parentNode.parentNode;
                    if (this.src.match('details_close')) {
                        /* This row is already open - close it */
                        this.src = "../javascript/datatables/media/images/details_open.png";
                        oTable.fnClose(nTr);
                    }
                    else {
                        /* Open this row */
                        this.src = "../javascript/datatables/media/images/details_close.png";
                        var contact_id = $(this).attr("rel");/*contact id of a particular row that is clicked is stored in the variable contact_id*/

                        /*creating a sub table*/
                        action_sub_table = "<table id='submycontacttable'>"
                        for(i =0 ; i < response.result.length ; i++){
                              var contactid=response.result[i].contactID;
                              if(contact_id==contactid){
                                /*Iterating through each action of the contact, and constructing a sub table row for it*/
                                    for(count=0;count<response.result[i].actionSet.length;count++){
                                        action_sub_table += "<tr><td>"+response.result[i].actionSet[count].actionID+" </td><td>"+
                                                               response.result[i].actionSet[count].actionDueDate+"</td><td>" +
                                                            response.result[i].actionSet[count].actionNote+"</td></tr>";

                                    }   
                              }
                        }
                        action_sub_table +="</tablr>"; /*Construction of the subtable complete*/

                        oTable.fnOpen(nTr, action_sub_table, "info_row" );
                    }

                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:06:14.207

你可以试试 jqGrid，我想这对你来说是完美的[http://www.trirand.com/blog/](http://www.trirand.com/blog/)

# mysql - MySQL 根据特定字段值和行数选择多行

> ID：13819251
> 
> 赞同：6
> 
> 时间：2012-12-11T11:20:12.417
> 
> 标签：mysql, sql, select, group-by, having-clause

我有三张桌子：

```
author (columns: aut_id, aut_name)
book (columns: book_id, book_title)
authorbook (linking table, columns: aut_id, book_id) 
```

每个作者都可以与一本书或多本书相关联。
每本书可以与一个或多个作者相关联。
我想按姓名和作者的确切人数来选择一本书。

表结构：

```
author    
aut_id    |   aut_name
1             Aname
2             Bname
3             Cname

book    
book_id    |  book_title (the titles are identical on purpose) 
1             Atitle
2             Atitle
3             Atitle

authorbook
aut_id    |   book_id 
1             1
1             2
2             2
1             3
2             3
3             3 
```

这是我的代码（为了更好的说明，我省略了作者表）：

```
SELECT authorbook.book_id 
FROM authorbook 
INNER JOIN book
ON authorbook.book_id = book.book_id
WHERE book_title='Atitle'
AND FIND_IN_SET (authorbook.aut_id,'1,2')
GROUP BY authorbook.book_id
HAVING (COUNT(authorbook.aut_id)=2) 
```

问题：此代码不仅返回所需`authorbook.book_id(2)`的 TWO `authorbook.aut_ids (1,2)`，还返回`authorbook.book_id(3)`THREE `authorbook.aut_ids (1,2,3)`。

**问题：**我如何才能`SELECT`将一本书与该`FIND_IN_SET`条款中的作者完全关联（并且没有其他作者）？非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:37:16.457

尝试这个：

```
SELECT a.book_id
FROM authorbook a
INNER JOIN book b
ON a.book_id = b.book_id
WHERE b.book_title='Atitle'
  AND FIND_IN_SET (a.aut_id,'1,2')
GROUP BY a.book_id
HAVING COUNT(DISTINCT a.aut_id) = 2
   AND COUNT(DISTINCT a.aut_id) = (SELECT COUNT(DISTINCT a2.aut_id)
                                   FROM authorbook a2 
                                   WHERE a2.book_id = a.book_id); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/b4d29/16)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:55:50.150

这应该工作

```
SELECT COUNT(aut_id) AS authors, book_id FROM (SELECT authorbook.*
FROM authorbook 
INNER JOIN book
ON authorbook.book_id = book.book_id
WHERE book_title='Atitle') AS t1 GROUP BY book_id HAVING authors='2' 
```

# django - 在 django 中显示 GenericForeignKey 关系的内联管理表单

> ID：13819259
> 
> 赞同：2
> 
> 时间：2012-12-11T11:20:28.617
> 
> 标签：django, generic-foreign-key

我的模型.py

```
class PagePlaceholder(models.Model):
    content_type = models.ForeignKey()
    object_id = models.PositiveIntegerField()
    display_content = generic.GenericForeignKey('content_type', 'object_id')

class Page(models.Model):
    page_name = models.CharField(max_length=1000,default="sample_page")
    placeholder = models.ManyToManyField('PagePlaceholder') 
```

占位符可以通过通用外键关系引用 4 个类中的任何一个。page 与占位符有 many2many 关系，表示一个页面可以包含一堆不同的模型。

和我的 admin.py 相同。

```
class PagePlaceholderAdmin(admin.ModelAdmin):
    pass

class PageInline(GenericStackedInline):
    model = PagePlaceholder

class PageAdmin(admin.ModelAdmin):
    inlines = [PageInline,] 
```

现在我想要的是在页面管理视图中，显示用于编辑 pageplaceholder 的显示内容对象的表单。试图获得该内联给我一个错误，说该对象不是一个类。admin.py 是否有一个不错的解决方案，或者我是否有必要创建一个新表单并查看以正确显示这些模型表单？

# php - 使用 XSL、PHP、Perl、XML 逼近 MVC。

> ID：13819261
> 
> 赞同：5
> 
> 时间：2012-12-11T11:20:33.383
> 
> 标签：php, xml, perl, xslt

问题：我有一个存储在数据库中的 XML 片段，我想将它与数据库中的其他几个字段结合起来，并使用 PHP 中的 HTML 呈现它们。

我的解决方案：我有 Perl 后端脚本

```
$query = "select id, description, xml_content, name from table where id = '$id'"; 
```

然后修改 XML 以包含这些字段。

```
$xml_content =~ s|<Record>|<Record name="$name" id="$id" desc="$desc">|i; 
```

然后我使用 XSL 文件将其转换为

```
 <xsl:output method="html"/>

  <xsl:template match="/">
   <html xmlns="http://www.w3.org/1999/xhtml">
      <body>
        <form action="info.php" method="get" accept-charset="utf-8">
          <label for="id">Display xml for: </label>
          <input type="text" name="id" value="" id="id" size="40"/>
            <p><input type="submit" value="Display it! &#x02192;"/></p>
            </form>
            <xsl:apply-templates/>
      </body>
   </html>
  </xsl:template>

  <xsl:template match="doc:Record">
    <p>
      <xsl:choose>
        <xsl:when test="./@none">
          XML Content ID <xsl:value-of select="@id"/> NOT FOUND 
        </xsl:when>
        <xsl:otherwise>
          XML Content ID <xsl:value-of select="@id"/> Found  
         <xsl:value-of select="@desc"/> - <xsl:value-of select="@name"/> 
      </xsl:otherwise>
      </xsl:choose>
    </p>
  </xsl:template> 
```

然后我使用 PHP 获取 CGI 变量并运行 perl 脚本并显示输出。

```
<?php 
if (!empty($_GET['id'])) {
    $command = "getxml.pl --id=" . $_GET['id'];
    $process = proc_open($command, $descriptorspec, $pipes, null, $_SERVER);
    if (is_resource($process)) { 
        $line = stream_get_contents($pipes[1]);
    } else { 
        $line = '<Record none="" desc="' . $command . '"></Record>';
    }
}

header('Content-type: text/xml');
echo '<?xml version="1.0" encoding="ISO-8859-1"?>';
echo '<?xml-stylesheet type="text/xsl" href="xmlinfo.xsl"?>';
echo "\n";

if (empty($command)) { 
    #Display the form only.
    $line = '<Record></Record >';
}
echo "$line \n";

?> 
```

由于 PHP 是在没有 xslt 的情况下配置的，所以这是我能想到的唯一使用 PHP 在 HTML 中显示 XML 的方法。

我的问题是：

1.  有没有办法删除`<html><body><form>`XSL 中的部分并将其放入 PHP 中。这样看起来会干净得多。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:50:02.883

这是一个使用实际框架的示例。我使用的框架是[Mojolicious](http://mojolicio.us) for Perl，当然其他人也可以处理这个。我设置了几种数据库处理方法（您可能可以从原始脚本中调整）。然后我使用内置的 XML 解析器来更新记录的属性。

最后我设置了两条路线。当您访问时运行时，`/`您会按要求获得您的页面。请注意，XML 已被转义（在模板中），以便将其作为文本呈现给浏览器。如果您更喜欢其他形式的显示，则可以更改此设置。如果您访问`/record?id=1`，您将直接获得 XML 结果。这对于 RESTful 接口更有用。

让我们说你的名字`app.pl`。要运行它，您可以简单地

```
./app.pl daemon 
```

然后`http://localhost:3000`使用 mojo 的内置服务器之一访问查看（是的，它也可以在 CGI 下运行）。

或者您可以实际与脚本进行交互。假设您只想在命令行中查看一条记录

```
./app.pl get '/record?id=1' 
```

或者你想插入一些东西，`helper`s 可以通过`eval`

```
./app.pl eval 'app->insert(2, "Something", "<Record>Something Else</Record>", "Name")' 
```

酷吧？

```
#!/usr/bin/env perl

use Mojolicious::Lite;
use Mojo::DOM;
use DBI;

# connect to database
use DBI;

helper db => sub { 
  state $dbh = DBI->connect("dbi:SQLite:database.db","","") or die "Could not connect";
};

# add helper methods for interacting with database
helper create_table => sub {
  my $self = shift;
  warn "Creating table 'records'\n";
  $self->db->do('CREATE TABLE records (id INT, description TEXT, xml_content TEXT, name VARCHAR(255));');
  $self->insert(1,'Description','<Record>Contents</Record>','Name');
};

helper select => sub {
  my $self = shift;
  my $sth = eval { $self->db->prepare('SELECT * FROM records WHERE id = ?') } || return undef;
  my $id = shift or return 0;
  $sth->execute($id);
  return $sth->fetchrow_hashref;
};

helper insert => sub {
  my $self = shift;
  my ($id, $description, $xml, $name) = @_;
  my $sth = eval { $self->db->prepare('INSERT INTO records VALUES (?,?,?,?)') } || return undef;
  $sth->execute($id, $description, $xml, $name);
  return 1;
};

# if statement didn't prepare, assume its because the table doesn't exist
defined app->select or app->create_table;

helper 'xml_by_id' => sub {
  my $self = shift;
  my $id = shift;

  my $row = $self->select($id) || {};
  return '<Record></Record>' unless keys %$row;

  my $xml = Mojo::DOM->new->xml(1)->parse( $row->{xml_content} );
  my $record = $xml->at('Record');

  for my $key ( qw/ name id description / ) {
    $record->{$key} = $row->{$key};
  }

  return wantarray ? ($xml, $row) : $xml;
};

any '/record' => sub {
  my $self = shift;
  my $id = $self->param('id') || $self->render_not_found;
  my $xml = $self->xml_by_id($id);
  $self->render( text => $xml, format => 'xml' );
};

any '/' => sub {
  my $self = shift;

  if ( my $id = $self->param('id') ) {
    my ($xml, $row) = $self->xml_by_id($id);
    $self->stash( id  => $id  );
    $self->stash( xml => $xml );
    $self->stash( row => $row );
  }

  $self->render('index');
};

app->start;

__DATA__

@@ index.html.ep
<!DOCTYPE html>
<html>
<head><title>Get XML</title></head>
<body>
  <form action="/" method="get" accept-charset="utf-8">
    <label for="id">Display xml for: </label>
    <input type="text" name="id" value="" id="id" size="40"/>
    <p><input type="submit" value="Display it! &#x02192;"/></p>
  </form>
  % if ( my $id = stash('id') ) {
    <p> XML Content ID <%= $id %>
      % my $row = stash('row');
      % if ( keys %$row ) {
        Found
        <%= $row->{description} %> - <%= $row->{name} %> 
      %} else {
        NOT FOUND
      %}
    </p>
    %= stash('xml')
  % }
</body>
</html> 
```

# object - 使用（可能）处理.js 使某些对象发生变化或移动的悬停效果？

> ID：13819265
> 
> 赞同：1
> 
> 时间：2012-12-11T11:20:43.150
> 
> 标签：object, menu, hover, effect, processing.js

我花了一整夜来弄清楚这个网站[http://goo.gl/WXlGT](http://goo.gl/WXlGT)上的悬停效果是如何工作的。但我仍然无法得到它。起初我认为它是在 Flash 中制作的，而不是我认为它的 html5，但最后我发现它使用***processing.js***（我可能是错的）。我检查了他们的网站，但我不知道该怎么做。

我想知道的是如何使一个对象（例如菜单）的悬停效果使其他对象（例如徽标）发生变化或移动。我正在寻找的完美示例在这里：http: [//goo.gl/I777F](http://goo.gl/I777F)。

非常感谢对网络上的某些手册的任何帮助或提示。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:48:13.160

这是一个通用的面向对象编程问题，有一个通用的面向对象的答案。在通用处理代码中：

```
ArrayList<Drawable> things;

...

void somePlacementFunction() {
  ...
  things.add(new Drawable(<some parameters>));
  ... 
}

...

void draw() {
  for(Drawable things: things) {
    thing.draw();
  }
}

...

void mouseMoved() {
  for(Drawable thing: things) {
    if(thing.over(mouseX, mouseY)) {
      Drawable differentThing = getOtherThing(...);
      differentThing.changeSomePropertyThatAffectsHowItGetsDrawn();
    }
  }
} 
```

在这种特定情况下，处理代码是[http://labfiftyfive.com/res/mathsbaby2.pde](http://labfiftyfive.com/res/mathsbaby2.pde)，页面 JS 将其触发为[http://labfiftyfive.com/js/main.js](http://labfiftyfive.com/js/main.js)第 162 行等。

# android - 如何更改图像的不透明度。

> ID：13819266
> 
> 赞同：10
> 
> 时间：2012-12-11T11:20:46.670
> 
> 标签：android

我有一个背景图像设置为`ImageView`，现在我想更改图像的不透明度，因为我编写此代码来更改 ImageView 的不透明度，但是当我这样做时，它会从图像视图中删除背景图像，所以我的问题是如何在不删除背景图像的情况下更改 ImageView 的不透明度。

**我使用的代码是：**

```
ImageView imageView = (ImageView) findViewById(R.id.image_view);

imageView.setBackgroundResource(R.drawable.theme1_page_header); // Set background image

int opacity = 100; // from 0 to 255
imageView.setBackgroundColor(opacity * 0x1000000); // change opacity of image 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-08-25T20:50:09.093

alpha 最重要的部分是该值必须是十进制的

0 = 透明 1 = 可见

所以 0.5 是一半可见

在 XML 你可以做

```
<ImageView
        android:layout_width="30dp"
        android:layout_height="35dp"
        android:id="@+id/imageView"
        android:alpha="0.4" // <-----------------  this is the fun part
        android:layout_alignParentRight="false"
        android:background="@drawable/imagename"
        android:layout_alignParentLeft="false"
        android:layout_alignParentTop="false"
        android:layout_alignWithParentIfMissing="false"
        android:layout_marginLeft="100dp"
        android:layout_alignParentBottom="false"
        android:layout_alignParentStart="false"
        android:layout_alignTop="@+id/bar"
        android:layout_marginTop="30dp"/> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-11T11:28:06.350

You can use

```
imageView.setAlpha(yourValue); //  some value 0-255 where 0 is fully transparent and 255 is fully opaque 
```

See the [documentation](http://developer.android.com/reference/android/widget/ImageView.html#setImageAlpha%28int%29)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-11T11:28:17.273

```
ImageView imageView = (ImageView) findViewById(R.id.image_view);
Drawable dPage_header= getResources().getDrawable(R.drawable.theme1_page_header);

// setting the opacity (alpha)
dPage_header.setAlpha(10);

// setting the images on the ImageViews
imageView.setImageDrawable(dPage_header); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-22T05:52:46.080

> 对于 API >=16 。使用 setImageAlpha 作为您的练习，因为 setAlpha 将在未来被弃用。`

`ImageView.setAlpha(int)`一直`renamed`到`ImageView.setImageAlpha(int)`避免混淆。在此处查看[**详细说明**](https://stackoverflow.com/a/31551723/3496570)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-16T14:20:25.253

在布局 xml 中使用此选项以实现不透明度，并将 Android Material 图标从黑色变为灰色。安卓：阿尔法=0.5

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-29T09:58:08.900

在 Kotlin 中，我们可以像这样更改代码中的 alpha：

```
myImageView.alpha = 0.5f 
```

将 alpha 值更改为 0.0f 到 1f 之间的任何值

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-11T11:29:09.443

# 选项1

使用`imageView.setAlpha(100)`.

如果您使用的是 Android 2.3，则必须使用 Nineolddroids 对零长度动画进行可怕的破解。

# 选项 2

子类化`ImageView`并覆盖其`onDraw()`方法以透明地绘制图像。

# 选项 3

实际上使用`get/setPixel()`. 不过这会很慢；可能有更快的方法来做到这一点（例如使用渲染脚本）。

# c# - 将比较运算符作为参数传递给 SQL 查询

> ID：13819269
> 
> 赞同：2
> 
> 时间：2012-12-11T11:20:54.920
> 
> 标签：c#, .net, mysql, sql

有没有办法将比较运算符作为参数传递给 MySQL 查询？

假设我有这个查询

```
SELECT * FROM `table1` WHERE `column1` > @p 
```

而不是`>`我希望能够通过`<`或`=`取决于条件。我可以使用`string.format()`，但我希望我的查询被参数化。

而且我不想使用预定义的查询，只要它们仅在一个运算符上有所不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:28:00.003

试试这个：

```
SELECT * FROM `table1`
    WHERE (`column1` > @p and @condition = 1)
        or (`column1` = @p and @condition = 0)
        or (`column1` < @p and @condition = -1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:24:48.680

MySQL 准备好的语句仅支持变量的绑定值。不支持替换查询字符串的任意部分（即使是表名）。换句话说，您必须在客户端上动态构建 SQL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T11:28:01.167

不幸的是，为了防止 SQL 注入，不能这样做。

但我可以给你一个关于如何做到这一点的想法（解决方法）：

```
SELECT * FROM `table1` WHERE (`column1` > @p AND @op='>') OR (`column1` = @p AND @op='=') OR ........ 
```

因此，您可以将运算符传递给代码中的 @op 参数。

这种操作最好使用“switch case”来防止SQL注入。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T12:32:19.000

试试这个：

```
SET @MyQuery := CONCAT("SELECT * FROM table1 WHERE",@P);
PREPARE stmt1 FROM @MyQuery;
EXECUTE stmt1;
DEALLOCATE PREPARE stmt1; 
```

对于@P：

```
SET @P:= "> 1" OR SET @P:="=1" or other condition you need to put it 
```

# php - 使用数组与另一个表的关系

> ID：13819270
> 
> 赞同：2
> 
> 时间：2012-12-11T11:20:57.877
> 
> 标签：php, mysql, sql, database-design, yii

如何在与数据库中的另一个表相关的单元格中使用数组，例如？

**用户表：**

```
Name | languages_id
Anas | 1,2,3 
```

**语言表：**

```
id | language
1  | English
2  | Arabic 
```

是工作还是不工作？！你知道我可以在 yii 中使用什么来做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:46:05.713

不要这样做。

不要将多个项目存储为逗号分隔的列，[**这真的很糟糕**](https://stackoverflow.com/questions/3653462/is-storing-a-comma-separated-list-in-a-database-column-really-that-bad/3653574#3653574)。

您应该通过在和表之间创建一个多对多表的新表来保持表[***规范化***](http://en.wikipedia.org/wiki/Database_normalization)。像这样的事情：`UsersLanguages``USERS``Languages`

**`Users`**：

*   `UserId`,
*   `UserName`,
*   ... 其他详情。

**`Languages`：**

*   `LanguageId`,
*   `LanguageName`,
*   ...

**`UserLanguages`**：

*   `UserId`外键引用`Users(UserId)`，
*   `LanguageId`国外的关键参考资料`Languages(LanguageId)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:27:36.423

您可以使用`FIND_IN_SET`.

```
SELECT
    name,
    language
FROM
    users
INNER JOIN
    languages ON FIND_IN_SET(languages.id, languages_id) != 0
GROUP BY
    name 
```

尽管 Mahmoud Gamal 的评论可能是更好的解决方法。

# java - 具有 Runnable 接口的 Java Future 对象

> ID：13819272
> 
> 赞同：1
> 
> 时间：2012-12-11T11:21:03.773
> 
> 标签：java, logging, future

我必须做一个任务，我必须为 Web 服务实现一个后台线程记录器，对于记录器，我们有一些骨架代码，其中我们有一个运行方法和一个返回未来对象的方法。对于我们必须实现预写日志记录的活动日志记录，我设法为记录器启动了一个新线程，并在我在 Web 服务中执行插入/更新命令时向它发送了记录某些内容的命令（Web 服务实现了一个键到值映射），但我无法让主线程等待日志线程完成日志记录。有人有什么建议吗？也许我做错了什么？

```
public class IndexImpl implements Index<KeyImpl,ValueListImpl>
{
    private Thread log_thread;
    private MyLogger log;

    /*
     * in out pair, the long refers to the initial memory address that our data
     * has been saved too, and the integer refers to the length of the data in the file 
     */

    private HashMap<KeyImpl,Pair<Long,Integer>> m;
    private long endAddr;

    public IndexImpl()
    {
        valSer = new ValueSerializerImpl();
        endAddr = 0;
        m = new HashMap<KeyImpl,Pair<Long,Integer>>();
        this.log= new MyLogger();
        this.log_thread= new Thread(log);
        log_thread.start();
    }

    public void insert(KeyImpl k, ValueListImpl v) throws KeyAlreadyPresentException, IOException {
        locker.WriteLock(k);
        try {
            if (m.containsKey(k)) {
                throw new KeyAlreadyPresentException(k);
            }
            else {
            //LOGGING
                Object[] array = new Object[3]; // Key, Old Value List, New Value List
                array[0]= k.toString(); //Key
                array[1]= null; // Old value list
                array[2]= v; // New value list

            LogRecord l = new LogRecord(MyKeyValueBaseLog.class, "insert", array);
            FutureLog<LogRecord> future = (FutureLog<LogRecord>) log.logRequest(l);
            System.out.println("Inserting a new key " + k.getKey());
            future.get();

            long tempEndAddr;
            byte[] temp = valSer.toByteArray(v);
            //we are using the ReentrantReadWriteLock implementation found in java
            write.lock();
            try{
                tempEndAddr = endAddr;

                endAddr += temp.length;
            }
            finally{
                write.unlock();
            }

            store.write(tempEndAddr, temp);
            m.put(k, new Pair<Long, Integer>(tempEndAddr,temp.length));

        }
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ExecutionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }       
    finally
    {
        locker.WriteUnlock(k);
    }
} 
```

记录器的代码是：

```
public class MyLogger implements Logger {

private ArrayList<LogRecord> log = new ArrayList<LogRecord>(100);

public MyLogger()
{

}

@Override
public void run() {
    // TODO Auto-generated method stub
    System.out.println("This is the logger thread! " + Thread.currentThread());
}

@Override
public Future<?> logRequest(LogRecord record) {
    // TODO Auto-generated method stub
    this.log.add(record);
    System.out.println("Record added to log! operation: " + record.getMethodName() );
    FutureLog<LogRecord> future = new FutureLog();
    return future;

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:24:18.583

您的记录器线程已启动并将*立即退出*

```
@Override
public void run() {
    // TODO Auto-generated method stub
    System.out.println("This is the logger thread! " + Thread.currentThread());
} 
```

相反，您需要在此方法中循环，在日志记录进入时写入它们。我可能会建议从[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)读取，并且方法 logRequest() 应该将日志记录添加到此队列中。这样，您的`run()`方法将仅在队列上等待（使用队列提供的[take()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html#take%28%29)方法）并在将每条记录从队列中取出时写出。

您需要能够停止这种情况，并且也许[中断](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)线程是这里的解决方案。

以上所有只是一种实现选择。您遇到的根本问题是您的线程几乎是立即开始/停止的。

# jquery - 使用jquery根据可滚动div元素中突出显示的跨度将导航点添加到滚动条

> ID：13819275
> 
> 赞同：0
> 
> 时间：2012-12-11T11:21:10.537
> 
> 标签：jquery, navigation

我试图找到这样的例子，但没有找到任何（我的坏）。

让我解释一下我需要什么，我正在努力在 div 中显示大型日志文件内容（实时，有数千行）。div 是可滚动的（很明显），现在我添加了过滤器工具，使用的是：http: [//johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)

当用户搜索文本/正则表达式时，此工具将使用 <span class="highlight"> 包装匹配的文本

现在日志可能有许多匹配的项目，要找到它们，用户必须滚动并搜索所有突出显示的文本，我想要的是在滚动条附近添加一个小地图类型的面板，并带有快速导航标记到这些突出显示的项目。单击此标记时，div 将滚动到相关突出显示的文本。（就像我们在 SVN diff 工具中一样）

我搜索了小地图术语，但我发现的结果与我想要的无关。

如果没有现成的插件可用，任何人都可以建议我自己实现它的最佳方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:07:59.640

这并不容易，但我总是喜欢挑战。

我选择以滑块的形式实现“小地图”，发现我必须采用：

*   jQuery
*   jQuery 用户界面
*   一个**[滚动](http://demos.flesler.com/jquery/scrollTo/)**到插件
*   一个**[inview](http://remysharp.com/2009/01/26/element-in-view-event-plugin/)**脚本（一个插件而不是插件）

这是一个完整的工作页面：

```
<!DOCTYPE html>
<html>
<head>
<!-- fiddle http://jsfiddle.net/8KNZH/2/ -->
<style>
body {
    margin: 20px;
}
#logWrapper {
    position: relative;
}
#log {
    width: 800px;
    height: 400px;
    overflow: auto;
    border: 1px solid #000;
}
#log .highlight {
    background-color: #FFFF00;
}
#log .selected {
    background-color: #FF9900;
}
#controls {
    position: absolute;
    left: 810px;
    top: 0px;
}
#hSlider {
    height: 327px;
    margin: 15px 0 15px 15px;
}
</style>
<link rel="stylesheet" href="jquery/jquery-ui-1.9.2.custom/css/le-frog/jquery-ui-1.9.2.custom.css" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery/jquery-ui-1.9.2.custom/js/jquery-ui-1.9.2.custom.min.js"></script>

<!-- http://demos.flesler.com/jquery/scrollTo/ -->
<!-- http://demos.flesler.com/jquery/scrollTo/js/jquery.scrollTo-min.js -->
<script type="text/javascript" src="jquery/scrollTo/jquery.scrollTo-1.4.3.1-min.js"></script>

<!-- http://remysharp.com/2009/01/26/element-in-view-event-plugin/ -->
<!-- http://remysharp.com/downloads/jquery.inview.js -->
<script type="text/javascript" src="jquery/inview/inview.js"></script>

<script type='text/javascript'>
$(function(){
    var $log = $("#log"),
        $hNext = $("#hNext"),
        $hPrev = $("#hPrev"),
        $hSlider = $("#hSlider"),
        $h,
        hMax,
        tScroll = 300;

    function setHighlights() {
        return $log.find(".highlight").off('inview').on('inview', function (event, visible) {
            var fn = visible ? 'addClass' : 'removeClass';
            $(event.target)[fn]('inview');
        });
    }
    function setSelected(h) {
        return $h.removeClass('selected').eq(h).addClass('selected');
    }
    function goTo(h) {
        h = Math.max(0, Math.min(hMax, h));//range check
        $("#log").scrollTo(setSelected(h).get(0), tScroll);
    }

    //log scroll
    function logScrollHandler() {
        $(window).trigger('scroll');//for 'inview' functionality
        var h = $h.index($h.filter('.inview').eq(0));
        setSelected(h);
        $hSlider.trigger('detachHandler')
            .slider('option', 'value', hMax - h)
            .trigger('attachHandler');
    }
    $log.on('attachHandler', function() {
        $(this).on('scroll', logScrollHandler);
    }).on('detachHandler', function() {
        $(this).off('scroll');
    });

    //prev/next
    $hNext.add($hPrev).on('click', function() {
        var val = $hSlider.slider('value'),
            delta = Number($(this).data('delta')),
            h = Math.min(hMax, Math.max(0, val - delta));
        $hSlider.slider('value', h);
        $(window).trigger('scroll');//for 'inview' functionality
        return false;
    });

    //slider
    function sliderChangeHandler(event, ui) {
        $log.trigger('detachHandler');
        goTo(hMax - ui.value);
        setTimeout(function() {//setTimeout is slightly messy but there appears to be no other option
            $log.trigger('attachHandler');
        }, tScroll + 100);
    }
    $hSlider.slider({
        orientation: "vertical",
        min: 0,
        max: 1,//overridden later
        step: 1,
        disabled: true
    }).on('attachHandler', function() {
        $hSlider.slider('option', 'change', sliderChangeHandler);
    }).on('detachHandler', function() {
        $hSlider.slider('option', 'change', null);
    }).trigger('attachHandler');

    function setSliderMax(n) {
        n = n - 1;
        $hSlider.slider("option", {
            max: n,
            value: n,
            disabled: false
        });
        return n;
    }

    $h = setHighlights();
    hMax = setSliderMax($h.length);
    $hPrev.trigger('click');//go to first highlight (optional)
});
</script>
</head>

<body>

<div id="logWrapper">
    <div id="log">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus non diam sed felis molestie sagittis. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vestibulum pharetra volutpat libero a <span class="highlight">posuere</span>. Etiam scelerisque lectus id tortor congue et facilisis est consequat. Integer facilisis euismod congue. In luctus, arcu bibendum vulputate mollis, est lacus consequat ligula, ac rutrum felis est vitae velit. Duis ornare molestie semper. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae;</p> 
    <p>Ut placerat, eros quis dignissim iaculis, sem dui semper sapien, sit amet ullamcorper purus neque ac ligula. Sed vestibulum cursus lectus, nec consectetur neque tincidunt sed. Vivamus ultricies, est a dictum posuere, justo velit sodales odio, quis semper risus magna id mi. Cum sociis natoque penatibus et magnis dis parturient montes, <span class="highlight">nascetur</span> ridiculus mus. Etiam est risus, iaculis sed ultricies non, iaculis eu sapien. Nam vel lectus at libero porttitor mattis. Suspendisse potenti. Ut et nunc nec eros blandit pretium.</p> 
    <p>In hac <span class="highlight">habitasse</span> platea dictumst. Etiam scelerisque, mauris in lobortis fringilla, metus dui tincidunt sapien, quis iaculis velit augue a est. Quisque tortor urna, mattis ut vehicula sed, tempor nec dolor. Nulla sit amet tincidunt mauris. In eget nisl erat, eget fermentum justo. Nunc malesuada ultricies pulvinar. Aenean ut lacus ligula, quis egestas turpis. Phasellus placerat, nulla elementum consectetur pulvinar, purus lectus convallis justo, vitae elementum risus turpis et velit. Cras eu felis nec justo semper posuere. Sed rhoncus libero dui. Nunc condimentum laoreet tortor, ut ullamcorper nulla suscipit rhoncus.</p> 
    <p>Pellentesque varius massa in mi <span class="highlight">sagittis</span> pellentesque. Sed ut odio odio, nec rutrum ipsum. Vestibulum bibendum quam eu nulla lobortis viverra vel vitae tortor. Aliquam non facilisis nunc. Etiam et egestas sapien. Donec a velit erat. Vivamus commodo rhoncus dui, in ultrices nibh convallis quis. Phasellus tempus ultrices augue, at pretium leo tristique sed. Ut sit amet nisl massa. Vivamus consequat tincidunt odio at aliquam. Nunc arcu tortor, semper id elementum ac, porttitor sit amet tellus. Curabitur id ligula sed lacus mattis pellentesque sed vitae ipsum. Donec egestas lacus mauris. Quisque facilisis est non lectus cursus ac ullamcorper mi feugiat.</p> 
    <p>Suspendisse eu metus felis, eget porta mauris. Maecenas felis nibh, semper in consequat viverra, ornare et enim. In sit amet lectus magna, et pretium velit. Suspendisse ut neque urna. Aliquam ac turpis ligula, ut dignissim eros. Donec nisl mauris, rutrum quis feugiat ac, vehicula ac erat. Quisque vel mi purus. Etiam vitae tellus sit amet erat <span class="highlight">lacinia</span> pharetra. Aenean convallis hendrerit congue. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nam vehicula eleifend tempor. Pellentesque scelerisque blandit cursus.</p> 
    <p>Donec eget nulla ante, eu faucibus est. In hac habitasse platea dictumst. <span class="highlight">Phasellus</span> sed dictum purus. Sed velit leo, imperdiet sit amet tristique at, consequat interdum diam. Integer euismod tristique ante, eget vehicula libero accumsan nec. Mauris semper convallis metus, quis placerat lacus accumsan iaculis. Integer dignissim vestibulum lacus, id consectetur risus sagittis vitae. Donec semper tortor sit amet justo suscipit at adipiscing leo mollis. Nulla mollis, turpis sed ornare feugiat, sapien nibh pulvinar libero, euismod sodales ipsum orci vitae felis.</p> 
    <p>Nulla turpis nibh, hendrerit sed faucibus ut, posuere in quam. Sed nec condimentum massa. Quisque viverra mi <span class="highlight">fermentum</span> urna lobortis vitae cursus purus tempus. Donec ut diam vitae diam pharetra porta quis non tellus. Sed tempor tincidunt ultrices. Curabitur eu molestie justo. Maecenas euismod bibendum purus sed lacinia. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Maecenas non dignissim sem. Donec non mauris non orci pellentesque iaculis.</p> 
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed nec dui urna, quis tempor felis. In eu odio lectus. Fusce pharetra est et nisi vestibulum ut facilisis risus vulputate. Suspendisse vestibulum porttitor convallis. Maecenas sed aliquet urna. Phasellus facilisis, justo elementum pulvinar placerat, velit risus dictum urna, a molestie ipsum nulla a elit. Mauris malesuada nibh quis mi hendrerit <span class="highlight">cursus</span> eleifend est interdum. Vivamus fringilla venenatis dui, vehicula sollicitudin nisi iaculis eget. Suspendisse sit amet lorem tellus, et hendrerit nisi. Maecenas fermentum porttitor leo id viverra. Morbi et consequat ligula. Maecenas varius porta ante, bibendum ullamcorper tortor mollis nec. Curabitur dapibus purus quis quam pretium sit amet dictum diam euismod. Quisque sit amet risus sed libero rhoncus fermentum quis in nisl.</p> 
    <p>Phasellus lorem urna, semper eget lacinia ut, tristique ut sem. Ut diam erat, facilisis eget mollis quis, hendrerit nec elit. Sed libero augue, tempus nec suscipit a, pretium quis quam. Cras euismod, lacus commodo sodales dapibus, orci orci semper velit, quis ornare felis risus pellentesque enim. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quis dapibus tortor. Fusce ut nulla <span class="highlight">sem</span>, vitae imperdiet est. Ut eu est a odio vehicula condimentum quis id nisl. Curabitur vitae enim at tellus dictum mattis. Aenean vehicula placerat orci ut placerat. Pellentesque lectus est, blandit ut eleifend varius, luctus eget justo. Proin adipiscing aliquam tellus a ornare.</p> 
    <p>Nunc ac suscipit ipsum. Praesent porta varius fermentum. Phasellus eleifend nisl sit amet lacus vehicula sed posuere libero molestie. Proin posuere lacinia ullamcorper. Morbi leo lectus, commodo eu tempus in, mattis eget massa. Sed imperdiet, nunc eget imperdiet eleifend, nunc ipsum ultricies velit, at aliquet metus neque nec ipsum. Sed rhoncus pulvinar orci pharetra convallis. <span class="highlight">Donec</span> tristique, ipsum a ultricies sodales, diam leo pretium augue, ut pellentesque sem est a nunc. Sed ornare scelerisque eros, nec iaculis velit tempus non. Ut fringilla vestibulum massa at mattis. Aenean cursus tellus id lacus malesuada ut sagittis nunc egestas. Morbi mauris justo, porttitor sed venenatis vitae, eleifend quis lorem. Quisque non sapien id felis placerat cursus.</p> 
    <p>Donec eu pellentesque nibh. Sed ac mauris erat, non egestas nulla. Nam eleifend congue rutrum. Aliquam ac sem eros, vitae vulputate dolor. Curabitur libero libero, ullamcorper sit amet suscipit ac, tempus hendrerit urna. Vestibulum at orci tellus. Nulla facilisi. Morbi placerat porttitor velit vitae aliquam. Cras eleifend, <span class="highlight">lectus</span> sed varius mollis, est nunc aliquam augue, eu accumsan leo lorem quis leo. Donec eget sollicitudin lacus. Nulla in iaculis velit. Integer tempus ullamcorper nunc, vitae suscipit neque congue a. Suspendisse molestie tincidunt dignissim. Morbi nec eros nunc.</p> 
    <p>Quisque ut nisi quis lorem condimentum tincidunt. Suspendisse vitae urna lorem. Vestibulum varius, velit at fringilla posuere, nunc felis condimentum libero, ac dignissim eros dui in risus. Integer est massa, suscipit in sollicitudin at, aliquam congue risus. Fusce pulvinar consectetur massa in pharetra. Sed pretium justo eget leo scelerisque sollicitudin. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Cras vehicula, lacus ac ultricies adipiscing, neque eros faucibus mi, at euismod augue <span class="highlight">leo</span> id lorem. Quisque gravida, lectus sit amet malesuada pharetra, arcu turpis dapibus purus, vel posuere elit libero eget augue. Integer et justo nulla. Sed eu enim in metus venenatis gravida quis non risus. Ut nulla ligula, pretium eu tincidunt vitae, cursus id metus. Praesent porta varius tincidunt. In hac habitasse platea dictumst. Quisque non justo eget turpis scelerisque ullamcorper.</p> 
    <p>Vestibulum vel nisl sit amet nunc venenatis bibendum. Donec enim sem, ornare non dictum a, mollis sed quam. Aenean faucibus facilisis gravida. Quisque vitae nunc mi, sit amet hendrerit ante. Suspendisse sit amet mi tellus, dictum suscipit leo. Suspendisse molestie convallis odio ac egestas. Sed rutrum mattis sem a porttitor. Fusce adipiscing eros at massa ultricies vel dictum nisi imperdiet. Aenean rhoncus ornare sem, id iaculis <span class="highlight">tellus</span> accumsan vel. Curabitur tellus augue, mollis eget laoreet quis, imperdiet ac elit.</p> 
    <p>Fusce eleifend libero sed diam consectetur facilisis. Proin feugiat congue odio ac accumsan. Sed viverra urna at libero imperdiet tempor. Pellentesque habitant morbi <span class="highlight">tristique</span> senectus et netus et malesuada fames ac turpis egestas. Proin tempor, libero eleifend ultrices aliquet, orci ante euismod nunc, quis condimentum turpis nisl gravida tellus. In hac habitasse platea dictumst. Phasellus lacus tortor, condimentum nec auctor ut, tincidunt nec lacus. Fusce pulvinar eros et urna laoreet consectetur commodo ut purus. Sed et justo non purus placerat imperdiet. Pellentesque condimentum lobortis magna accumsan faucibus. Fusce porta elementum gravida. Sed ultricies ligula eget turpis sagittis et facilisis lectus adipiscing. Suspendisse luctus eros quis nibh cursus pulvinar. Aenean cursus risus in tortor sollicitudin nec tincidunt mi rutrum.</p> 
    <p>Integer mollis lorem <span class="highlight">semper</span> neque mattis vestibulum eu et diam. Proin tempus imperdiet hendrerit. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Pellentesque id rhoncus sem. Sed <span class="highlight">consectetur</span>, purus non hendrerit <span class="highlight">consectetur</span>, est nulla fermentum leo, et ultrices dui turpis sit amet mi. Nullam varius convallis metus, a imperdiet nibh faucibus non. Aenean a diam nibh, at pulvinar sem. Proin consectetur hendrerit augue sit amet pretium. Integer tincidunt sollicitudin augue, id ullamcorper augue condimentum id. Nam hendrerit faucibus <span class="highlight">quam</span> et tempor. Etiam vel justo quis justo luctus adipiscing eget vel tortor. Cum sociis natoque penatibus et magnis dis <span class="highlight">parturient</span> montes, nascetur ridiculus mus. Donec commodo, arcu eu iaculis ultricies, eros sem consectetur magna, ac sodales magna magna quis dui.</p> 
    <p>Suspendisse viverra felis viverra orci luctus pulvinar. Sed laoreet eros ut risus aliquet blandit. Aenean ac elementum mi. Nam in condimentum enim. Nulla tincidunt consectetur tortor a pellentesque. Aliquam sit amet nunc quis arcu tempor viverra. Vivamus nec odio tortor, eget sollicitudin urna. Sed euismod iaculis libero id consectetur. <span class="highlight">Morbi</span> dolor ante, ultrices non commodo eu, elementum ac sem. In neque odio, commodo ac pharetra ut, consectetur ac ipsum.</p> 
    <p>Maecenas nec ante vel leo auctor sagittis. Morbi sit amet est nulla, et ullamcorper erat. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Suspendisse nunc nunc, pulvinar vel volutpat nec, cursus ac tellus. Ut sollicitudin quam a nisi mollis faucibus. Donec accumsan vestibulum nulla lobortis placerat. Nullam eleifend sem quam. Cras venenatis porta odio, a gravida lectus interdum pulvinar. Sed aliquet porta imperdiet. Aliquam erat volutpat. Nam pharetra, lacus sed sagittis rutrum, dolor neque imperdiet turpis, sit amet aliquam nibh nulla sed tellus. Vestibulum facilisis justo at magna pellentesque vulputate eget a mauris. Vestibulum urna ante, suscipit feugiat pulvinar sed, facilisis sed nunc. Nam pulvinar pellentesque mi eu <span class="highlight">ullamcorper</span>.</p>
    <p>Duis lorem dui, condimentum at tempus eu, porttitor commodo nisi. Aliquam sit amet purus turpis. Quisque eu risus nulla, sit amet aliquam ante. Integer in dui dui. Ut eget ipsum dolor, a sodales neque. Nullam pretium pharetra urna, id accumsan sem <span class="highlight">dictum</span> eget. Fusce tincidunt mattis fringilla. Quisque condimentum dui non lorem eleifend non laoreet magna malesuada.</p> 
    <p>Nullam vitae <span class="highlight">mattis</span> leo. Sed eu orci nulla. Vivamus in est id leo auctor bibendum eu et nulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Aliquam erat volutpat. Nunc sed dui velit, eget mollis ligula. Cras volutpat egestas augue quis elementum. Sed id nulla elit, et feugiat eros.</p> 
    <p>Curabitur vel dolor vel sem aliquet luctus. Mauris hendrerit iaculis nisl, in placerat lacus dapibus ut. Vivamus sollicitudin luctus orci, at tincidunt mauris vestibulum sit amet. Curabitur dignissim, magna a adipiscing condimentum, <span class="highlight">velit</span> erat rutrum metus, elementum placerat libero nulla et ligula. Aenean in erat tortor, nec interdum ipsum. Curabitur vel turpis ut magna pharetra tincidunt quis et est. Curabitur eu mi odio, id interdum urna. Donec id egestas arcu. Aenean at purus purus.</p> 
    <p>Nam viverra orci a purus vestibulum condimentum. Duis rutrum neque sit amet nisi lobortis in consectetur enim interdum. Aenean justo felis, consequat eu rhoncus ac, pharetra tincidunt nisl. Pellentesque fringilla venenatis ornare. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec facilisis risus ut purus <span class="highlight">molestie</span> sagittis. Etiam iaculis suscipit justo vitae posuere. Integer et urna enim, a elementum eros. Suspendisse auctor ultricies odio, ac hendrerit magna egestas ut. Nunc ac sodales elit. Sed eget tincidunt elit. Fusce id nulla sapien, sed commodo mauris. Aliquam erat volutpat. Aliquam tempor, turpis a sagittis feugiat, odio justo euismod odio, sit amet sollicitudin nibh nibh et diam. Cras at urna nunc, vulputate dapibus velit.</p> 
    <p>Morbi vulputate dignissim elit sit amet sollicitudin. Nullam quis risus sapien, eu tempor ipsum. Aliquam ultricies adipiscing dolor, at interdum elit eleifend ut. Quisque feugiat fringilla dolor et faucibus. Quisque viverra placerat metus, sed semper metus pellentesque eu. Praesent sagittis, neque vitae luctus lacinia, lectus dui tincidunt lacus, et <span class="highlight">commodo</span> ligula augue et lorem. Cras sagittis dolor vel diam commodo consequat. Fusce congue purus adipiscing lectus congue auctor. Sed elit ipsum, ultricies vitae malesuada in, faucibus sit amet massa. Curabitur vestibulum mauris vitae turpis laoreet vitae vulputate massa malesuada. Curabitur consequat lacus id massa venenatis ornare. Aenean pellentesque lorem at lacus rhoncus dignissim. Mauris accumsan neque id lorem convallis mattis. Vestibulum eget risus dolor, nec interdum eros.</p> 
    <p>Quisque fringilla consectetur dapibus. Vivamus pulvinar tortor in diam mattis eu interdum lorem viverra. Vestibulum aliquet tincidunt fermentum. In aliquet ligula ac sem vestibulum sed eleifend nibh dignissim. Sed <span class="highlight">sapien</span> ipsum, porttitor et tincidunt eu, convallis nec velit. Mauris lobortis sapien et leo ornare dictum. Duis pellentesque tincidunt urna, eget tristique turpis laoreet et. Praesent sit amet lacus magna.</p> 
    <p>Vestibulum porttitor fringilla pulvinar. Mauris sapien nulla, interdum at consectetur sit amet, lobortis quis elit. Morbi non risus sapien, eget pulvinar tellus. In at lacinia nisl. Vivamus vestibulum euismod libero, vel semper lorem tempus accumsan. Curabitur id diam risus. Ut sapien massa, lacinia non ultrices a, ullamcorper non lectus. <span class="highlight">Proin</span> lacinia elit et nisi semper quis pulvinar dolor rutrum. Donec faucibus quam tellus, at fringilla nisl.</p> 
    <p>Etiam eros massa, vulputate nec viverra ac, varius quis metus. Phasellus ultricies libero ut leo faucibus aliquet. In vel massa eleifend augue interdum tincidunt. Sed tortor diam, commodo in rhoncus in, adipiscing sed odio. Integer sed metus quam, vel dapibus neque. Nam quis dui mi, eu dignissim ante. Proin et tellus placerat libero vestibulum ornare sit amet pellentesque felis. Nunc quis tellus eu magna pharetra sodales at at mauris. <span class="highlight">Pellentesque</span> ornare scelerisque sagittis. Vivamus sit amet metus urna. Nulla fringilla orci sed leo dignissim congue. Vivamus vel tellus leo. Integer vitae odio sit amet nisi ornare placerat a imperdiet dolor. Aliquam sagittis mi non velit sagittis porttitor.
    </div>
    <div id="controls">
        <button id="hPrev" data-delta="-1">Prev</button>
        <div id="hSlider"></div>
        <button id="hNext" data-delta="1">Next</button>
    </div>
</div>

</body>
</html> 
```

要使页面正常工作，您需要安装额外的脚本并相应地调整脚本/样式表路径。

或者，如果你只是想看看它是否正常工作，这里有一个**[DEMO](http://jsfiddle.net/8KNZH/2/)**

我认为适应不同形式的小地图会相当容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:57:26.873

试试下面的插件，你可能需要自定义它们。

[http://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

[https://github.com/djpate/jSlideto/](https://github.com/djpate/jSlideto/)

# android - 如何检索不在数组中的json对象元素？

> ID：13819278
> 
> 赞同：0
> 
> 时间：2012-12-11T11:21:21.450
> 
> 标签：android, json, listview

我在下面有这个 json 数据，但我想知道如何检索这对符号和图形并将其显示在 Listview 中。我只能检索位于 JSON 数组中的元素。请帮助

```
{ "rates": {
    "AED": 3.672626,
    "AFN": 48.3775,
    "ALL": 110.223333,
    "AMD": 409.604993,
     "ZAR": 8.416205,
    "ZMK": 4954.411262,
    "ZWL": 322.355011
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:28:02.810

try as:

```
JSONObject jarrau = new JSONObject("Your JSON String");

    JSONObject jsonobj = jarrau.getJSONObject("rates");
    double dub_AED,dub_AFN, dub_ALL;
     //AAED
    if(!jsonobj.isNull("AED"))
     dub_AED=jsonobj.getDouble("AED");
    else
       // set default value here
     //AFN
    if(!jsonobj.isNull("AFN"))
     dub_AFN=jsonobj.getDouble("AFN");
    else
       // set default value here        
     //ALL
    if(!jsonobj.isNull("ALL"))
     dub_ALL=jsonobj.getDouble("ALL");
    else
       // set default value here

    // pasre all same as... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:12:03.630

由于在这种情况下您没有键，我们还需要从 json 中获取键，所以在这种情况下，我们需要第一个键，然后我们需要获取该特定键的值。

因此，以下是代码：-

```
 String[] sKey,sValue;

    JSONObject jobject = new JSONObject(your result);
    JSONObject jobj = jobject;

    JSONObject jrates = jobj.getJSONObject("rates");

    sKey = new String[jrates.length()];
    sValue = new String[jrates.length()];

    for(int i=0;i<jrates.length();i++){
    sKey[i] = (String)keys.next();
    sValue[i] = (String)jrates.getString(sKey[i]);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:24:41.397

```
JSONObject jsonResult = new JSONObject(yourString);
JSONObject rates = jsonResult.getJSONObject("rates");
double aed = rates.getDouble("AED");
double afn = rates.getDouble("AFN");
.... 
```

# .net - 如何在没有 Visual Studio 的情况下查看远程 .NET 应用程序中哪个线程正在发狂

> ID：13819288
> 
> 赞同：3
> 
> 时间：2012-12-11T11:21:38.493
> 
> 标签：.net, debugging, windows-7, .net-4.0, process

我需要知道 .NET 应用程序的哪个线程正在发疯。它几乎消耗了整个 CPU 时间。

问题：

*   该应用程序正在远程 PC 上运行
*   我对机器的唯一访问是通过 RDP
*   客户站点上没有可用的 Visual Studio
*   所以我无法通过远程调试连接
*   但是，我可以将一些文件复制到机器上并在那里启动工具

我的问题：

*   是否有可能“看到”（使用标准工具或我可以复制到机器的工具）
    *   哪个线程正在消耗所有 CPU 时间
    *   该线程调用了哪些方法？

在“其他操作系统”上，我可以创建一个实时调用堆栈或启动转储，以查看某个线程是否处于无限循环中。Windows 7 和 .NET 有这种可能性吗？

环境：

*   视窗 7 (x86)
*   .NET 4.0

最好的问候和感谢

七

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:33:16.203

是的，这是可能的。
如果进程是在 x86 操作系统上运行的 x86 进程或在 x64 操作系统上运行的 x64 进程，则只需要[Process explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)。

1.  打开恶意应用程序的属性
2.  切换到“线程”选项卡
3.  按“CPU”排序
4.  选择CPU使用率高的线程，点击“堆栈”。您现在应该看到该线程的托管堆栈。有关更多信息，请参阅[此博客文章](http://blogs.msdn.com/b/dotnet/archive/2012/06/26/new-net-diagnostic-info-added-to-process-explorer.aspx)。

* * *

如果该进程是 x64 操作系统上的 x86 进程，则会涉及更多。如果您需要此信息，请发表评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:38:19.857

我们使用[Sam 的独立 CPU 分析器](http://samsaffron.com/archive/2009/11/11/Diagnosing+runaway+CPU+in+a+Net+production+application)，它分析 CPU 以查看它在做什么，生成一个文本文件。如果您有任何疑问，此代码[昨天已作为 OSS 发布。](https://github.com/SamSaffron/cpu-analyzer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:32:24.440

您可以使用（已安装的）`perfmon.exe`工具来监控每个线程的 CPU 利用率。

您可能还希望您的应用程序创建一个日志文件，该文件将某种线程名称与您创建的每个线程相关联，以便您知道哪个线程是哪个线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T11:30:56.390

您无需安装 Visual Studio 即可使用远程调试器，因为它可作为独立工具使用。您可以：

*   要求设置防火墙例外以允许“正常”使用远程调试器
*   使用 PuTTy+freeSSHd 之类的东西在远程机器和你的机器之间建立一个反向隧道，然后在隧道上使用远程调试器。

您还可以使用进程资源管理器查看哪个线程正在占用所有 CPU 时间，但这只会给您一个相对无用的线程句柄，而不是告诉您有什么用处。

您可以做的另一件事是将物理机转换为 VM 映像，然后在本地启动该 VM 映像以进行测试。

# javascript - JS 打破我的随机函数

> ID：13819292
> 
> 赞同：1
> 
> 时间：2012-12-11T11:22:09.737
> 
> 标签：javascript, function, break

```
 $(document).ready(function() {

  elem = new Array('a1','a2','a3','a4','a5','a6','a7','a8','a9');
  $('.graphic').hide();

  hidden = false;
  time = 0;
  elem.sort(randomize);
  $.each(elem, function(i, r) {
    setTimeout(function() {
      $('#'+r).fadeIn(400);
    }, time);
    time += 200;
  });

  time = 0;
  //elem.sort(randomize);
  setTimeout(function() {
    $.each(elem, function(i, r) {
      setTimeout(function() {
        $('#'+r).fadeOut(800);
      }, time);
      time += 200;
    });
    $('.graphic').fadeIn(2400);
      hidden = true;
  }, 3000);

  $('.graphic').mouseenter(function(){
    if(hidden) {
      //time = 0;
      //elem.sort(randomize);
      $('.graphic').fadeOut(400);
      $.each(elem, function(i, r) {
        /*setTimeout(function() {
          $('#'+r).fadeIn(400);
          }, time);
        time += 200;*/
        $('#'+r).fadeIn(400);
      });
      hidden = false;
    }
  });

  $('.content').mouseenter(function(){
    if(!hidden) {
      time = 0;
      //elem.sort(randomize);
      $.each(elem, function(i, r) {
        setTimeout(function() {
          $('#'+r).fadeOut(800);
        }, time);
        time += 200;
      });
      $('.graphic').fadeIn(2400);
      hidden = true;
    }
  });

  $('.tile').click(function(t) {
    $(this).fadeOut(800, function () {
        window.location = $(this).attr("href");
      }
    ); 
    return false;
  });

  function randomize(){
    return (Math.round(Math.random())-0.5); 
  }

}); 
```

由于某种原因，我无法打破这种效果。当侧面加载时，横幅被隐藏。9个元素来来去去。每次进入 div，banner 淡出，9 个 div 进入。当我离开 enter 时，有一个随机的淡出效果。但是，当我在这种效果进行时进入，一切都会中断。所以我需要在那里的某个地方休息一下，这样褪色就会停止，它会立即显示我的 9 个 div。有任何想法吗？：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:29:49.073

也许尝试使用[http://api.jquery.com/stop/](http://api.jquery.com/stop/ "停止（）")来停止当前正在运行的动画

# bash - 找不到`msbuild` 命令，但`msbuild.exe` 工作正常

> ID：13819294
> 
> 赞同：7
> 
> 时间：2012-12-11T11:22:16.380
> 
> 标签：bash, msysgit, msys

[我运行在Git for Windows](http://msysgit.github.com)中分发的 MSys/Bash 。我将文件夹添加`C:\Windows\Microsoft.NET\Framework\v4.0.30319`到我的路径中，所以我可以运行`msbuild`但它不起作用

```
$ msbuild
C:\Program Files (x86)\Git\bin\sh.exe: msbuild: command not found 
```

然而`msbuild.exe`确实：

```
$ msbuild.exe
Microsoft (R) Build Engine version 4.0.30319.17929 
```

然而，该命令`explorer`可以很好地解决。这是怎么回事？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-11T11:23:54.617

这是 MSys 中的一个错误，其中文件夹和文件共享相同的名称（减去扩展名）。在这种情况下：

*   文件`C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe`
*   文件夹`C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild`

您必须通过编写来解决`msbuild.exe`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T03:03:44.613

如果找不到 msbuild.exe，则需要对其进行配置。

打开命令提示符并运行位于 Visual Studio Common7/Tools 文件夹中的文件 vsvars32.bat。

即 C:\Program Files x86\Microsoft Visual Studio 12.0\Common7\Tools\vsvars32.bat

这将正确设置要找到的 msbuild.exe 的所有必需变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-16T15:53:49.263

如果找不到exe文件输出，请执行`copy C:\Windows\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe ProjectPath`
然后运行`msbuild.exe`

# php - Drupal：将菜单中的“登录”替换为“注销”

> ID：13819296
> 
> 赞同：0
> 
> 时间：2012-12-11T11:22:31.833
> 
> 标签：php, drupal, menu

我现在面临一个问题，我正在使用 Drupal 7，但我不知道如何在主菜单中添加/替换链接。如果用户已登录，我希望更改链接的标签。

有它，它显示我的菜单`<ul>`和`<li>`

```
$menu=menu_tree_output(menu_tree_all_data('main-menu'));
print drupal_render($main_menu); 
```

因此，我尝试在该菜单中再添加一个链接。（它不起作用）

```
//test if logged in on not
global $user;
$path=($user->uid)?'user/'.$user->uid.'/edit':'user/login';
$title=($user->uid)?'My account':'Loggin';

//item to add to my main-menu
$item=array(
  'link'=>array(
     'menu_name'=>'main-menu',
     'link_path'=>''.$path.'',
     'link_title'=>''.$title.'',
     'hidden'=>0,
     'title'=>''.$title.''),
  'below'=>array()
);
$menu=menu_tree_all_data('main-menu');
$menu[]=$item;
$main_menu = menu_tree_output($menu); 
```

我希望我的问题很清楚，并感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:04:46.883

无需通过代码执行此操作...只需使用 UI 将“登录”和“注销”链接添加到主菜单，并使用适当的路径（用户/登录，用户/注销），Drupal 的权限系统将采用照顾其余的。

由于经过身份验证的用户无权访问 /user/login，而匿名用户无权访问 /user/logout，因此您正在寻找的效果会自然而然地发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:36:12.427

我做了同样的事情，但使用了 JQuery 和 css：检查正文是否有“登录”类，然后我使用了：

```
$('ul.dropmenu').append('<li class="loggedInOverride">' + '<a href="/logout">' + 'Log out' + '</a>' + '</li>'); 
```

至少对我来说容易多了。这里的主要原因是我有一个内部部分的自定义菜单，它不是“主要”链接导航。所以这个想法可能也适用于主要或次要链接。

# typescript - 打字稿全局变量

> ID：13819302
> 
> 赞同：24
> 
> 时间：2012-12-11T11:22:36.783
> 
> 标签：typescript

有没有一种方便的方法可以在模块内访问全局变量，而不会出现编译器错误，即下面使用的 CANVAS_WIDTH？

```
 export class Bullet {

        x: number = 22;
        y: number = 22;

        constructor (speed: number) {
            this.xVelocity = speed;
        }

        inBounds() {
            return this.x >= 0 && this.x <= CANVAS_WIDTH &&
                this.y >= 0 && this.y <= CANVAS_HEIGHT;
        };
}
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-11T15:09:28.250

您需要将这些属性定义为静态，然后您可以像这样轻松访问它，

```
export class Game {
    static canvas: JQuery;
    static CANVAS_WIDTH: number;
    static CANVAS_HEIGHT: number;
    bullet: Bullet;

    constructor(canvasElem: JQuery) {
        Game.canvas = canvasElem;
        Game.CANVAS_WIDTH = Game.canvas.width();
        Game.CANVAS_HEIGHT = Game.canvas.height();
    }
}

export class Bullet {
    x: number = 22;
    y: number = 22;

    public inBounds() {
        // accessing static properties
        return this.x >= 0 && this.x <= Game.CANVAS_WIDTH && this.y >= 0 && this.y <= Game.CANVAS_HEIGHT;
    }
} 
```

* * *

这编译为：

```
define(["require", "exports"], function(require, exports) {
    var Game = (function () {
        function Game(canvasElem) {
            Game.canvas = canvasElem;
            Game.CANVAS_WIDTH = Game.canvas.width();
            Game.CANVAS_HEIGHT = Game.canvas.height();
        }
        return Game;
    })();
    exports.Game = Game;

    var Bullet = (function () {
        function Bullet() {
            this.x = 22;
            this.y = 22;
        }
        Bullet.prototype.inBounds = function () {
            // accessing static properties
            return this.x >= 0 && this.x <= Game.CANVAS_WIDTH && this.y >= 0 && this.y <= Game.CANVAS_HEIGHT;
        };
        return Bullet;
    })();
    exports.Bullet = Bullet;
});
//# sourceMappingURL=dhdh.js.map 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T14:47:20.487

这是一个人为的例子，但不是试图推送到全局范围，您可以使用模块范围来封装一个变量，该变量将从多个类中使用。

```
module MyModule {
    var x: number = 5;

    export class FirstClass {
        doSomething() {
            x = 10;
        }
    }

    export class SecondClass {
        showSomething() {
            alert(x.toString());
        }
    }
}

var a = new MyModule.FirstClass();
a.doSomething();

var b = new MyModule.SecondClass();
b.showSomething(); 
```

关于使用相同变量的多个事物的所有常规规则在这里都适用——您不想在调用代码上强制执行特定的事件顺序。

* * *

编译为：

```
var MyModule;
(function (MyModule) {
    var x = 5;

    var FirstClass = (function () {
        function FirstClass() {
        }
        FirstClass.prototype.doSomething = function () {
            x = 10;
        };
        return FirstClass;
    })();
    MyModule.FirstClass = FirstClass;

    var SecondClass = (function () {
        function SecondClass() {
        }
        SecondClass.prototype.showSomething = function () {
            alert(x.toString());
        };
        return SecondClass;
    })();
    MyModule.SecondClass = SecondClass;
})(MyModule || (MyModule = {}));

var a = new MyModule.FirstClass();
a.doSomething();

var b = new MyModule.SecondClass();
b.showSomething(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-25T15:01:31.660

我不确定我是否要*鼓励*这一点，但要从字面上回答 OP 的问题：

### 您可以将任何您想要的内容放入全局范围，然后在其他地方引用它。

例如，您可以在 index.html 等效项上添加以下内容：

```
function logit(x, loc) {
  if (console && console.log) {
    console.log(loc, JSON.stringify(x, null, '  '));
  }
} 
```

现在，您可以通过至少两种方式之一在任何您想要的地方使用它。

### 混合您的全球范围。

`(window as any).logit(item, "some location")`

呜呜呜。

### 使用声明

您也可以使用[`declare`](https://stackoverflow.com/a/40700848/1028230).

所以在一个常规的 TypeScript 文件中：

```
declare const logit: (x: any, loc: string) => void;
// you could also just use
// declare const logit: any;

export default class MyClass {
  public handleIt(x: string) {
    logit(x, "MyClass.handleIt");
    // ... logic
  }
} 
```

请注意，任何文件，不仅仅是“index.html”，都是公平的游戏，可以作为将内容推送到全局范围的启动点。请记住，如果您延迟加载模块，您可能会遇到麻烦。

* * *

### 你的例子

所以对你来说，你可以根据需要在全局范围内设置这两个值（或者可能是一个非 TypeScript 库为你做这件事，这*几乎*可以使它成为一个有效的用例），然后执行类似...

```
declare let CANVAS_WIDTH: number; // maybe const, I don't know your use case.
declare let CANVAS_HEIGHT: number;

export class Bullet {
  x: number = 22;
  y: number = 22;

  constructor (speed: number) {
    this.xVelocity = speed;
  }

  inBounds() {
    return this.x >= 0 && this.x <= CANVAS_WIDTH &&
    this.y >= 0 && this.y <= CANVAS_HEIGHT;
  };
} 
```

但是，同样，这是*高度*反模式的，并且可能表明代码有异味。[正如 Rajagopal 웃 所建议的那样](https://stackoverflow.com/a/13822619/1028230)，您希望在另一个类上具有静态值。

# javascript - 设置边框时div跳转

> ID：13819306
> 
> 赞同：0
> 
> 时间：2012-12-11T11:22:50.120
> 
> 标签：javascript, css

当用户单击 div 时（请参见下面的附加屏幕截图），我正在设置边框：

```
$div.addClass("selected-block"); 
```

在 CSS 中，我有：

```
div.selected-block {
   border: 2px solid #155BCE !important; 
   border-radius:3px;
} 
```

设置好边框`top`和`left`增加文字后`3`。如何避免这种情况？

**PS。**我想为取消选择的 div 制作白色边框，但这不是一个好的解决方案，因为白色边框可以与黑色线条相交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:28:43.383

**用于** `css3 box-sizing` **属性**

像这样

```
div.selected-block{
box-sizing:border-box;
-webkit-box-sizing:border-box;
-moz-box-sizing:border-box;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:29:02.837

以 2px 透明边框开始元素，然后更改边框颜色。

```
div {
   border: 2px solid transparent; 
   border-radius: 3px;}

div.selected-block {
   border-color: #155BCE; 
} 
```

# ruby - 奇怪的 DataMapper 问题

> ID：13819307
> 
> 赞同：0
> 
> 时间：2012-12-11T11:22:49.903
> 
> 标签：ruby, datamapper, ruby-datamapper

我有一个关联模型，当我尝试删除它返回`true`的记录但该记录仍然存在时，

该模型有 2 列是`keys`，而第三列是`enum`，也是一个键。

有关在 DataMapper 中更新/删除关联模型的任何提示

```
class A
   #some property definition
end

class B
   #some property definition
end

class C
  include DataMapper::Resource
  include DataMapper::Grape::Resource

  expose :type

  property :type, Enum[:a, :b], :key => true, :unique => false

  belongs_to :a, :key => true
  belongs_to :b, :key => true

end 
```

**内部机架**

```
element = C.get(:a,1,1)
# => returns Hash Object
# Fine till now
element.destroyed?
# => true
# I dont know why did it return true, I am 100% sure I havent performed destroy or destroy! on element
element.type
# => :a
element.type = :b
# => DataMapper::ImmutableError: Immutable resource cannot be modified
element.destroy!
# => true
C.get(:a,1,1)
# => the same Hash Object rather than returning nil 
```

# android - 当我按下返回按钮时手电筒没有关闭

> ID：13819313
> 
> 赞同：0
> 
> 时间：2012-12-11T11:23:05.037
> 
> 标签：android, onpause

我已经创建了一个手电筒应用程序...一切正常...除了手电筒打开并且我按下后退按钮...它保持打开...并且不会停止...该怎么办？ ..我使用了 onpause 方法，但它似乎不起作用...

另外，如果有人能向我解释参数的使用，我将不胜感激。我已从该程序的在线资源中获得帮助。我不明白参数方法...有人可以详细解释一下吗？提前致谢....：）

我的 XML：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/aaaaaaa"
tools:context=".Flash" >

<ImageButton
    android:id="@+id/ib2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:src="@drawable/ic_launcher" /></RelativeLayout> 
```

我的 Flash.java：

```
 package com.potapptoes.flashlight;

    import android.os.Bundle;
    import android.os.PowerManager;
    import android.os.PowerManager.WakeLock;
    import android.app.Activity;
    import android.content.Context;
    import android.hardware.Camera;
    import android.hardware.Camera.Parameters;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.view.Window;
    import android.view.WindowManager;
    import android.widget.ImageButton;

    public class Flash extends Activity implements OnClickListener {
Camera cam = null;
ImageButton ib1;
Parameters para;
PowerManager pm;
WakeLock wl;

@Override
protected void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
    wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "whatever");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    wl.acquire();
    initialize();
    ib1.setOnClickListener(this);
}

private void initialize() {
    // TODO Auto-generated method stub
    ib1 = (ImageButton) findViewById(R.id.ib2);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if (cam == null) {
        cam = Camera.open();
        para = cam.getParameters();
        para.setFlashMode(Parameters.FLASH_MODE_TORCH);
        cam.setParameters(para);
    } else {
        para.setFlashMode(Parameters.FLASH_MODE_OFF);
        cam.setParameters(para);
        cam.release();
        cam = null;

    }
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    wl.release();
    finish();
}
    } 
```

显现：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.potapptoes.flashlight"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />
<uses-permission android:name="android.permission.CAMERA"/>
<uses-permission android:name="android.permission.WAKE_LOCK"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.potapptoes.flashlight.Flash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:26:09.693

You can try this

```
 para.setFlashMode(Parameters.FLASH_MODE_OFF);
        cam.setParameters(para);
        cam.release();
        cam = null; 
```

in your `onpause` or maybe in `onBackPressed` and see if it works.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:26:26.917

Just use your working code to turn off flashlight in onPause().

# iphone - 下载图像时出现内存警告和应用程序崩溃

> ID：13819314
> 
> 赞同：2
> 
> 时间：2012-12-11T11:23:06.767
> 
> 标签：iphone, ios, memory, crash, sdwebimage

我正在使用`SDWebImage`库，图像大约 0.5 MB 并在`detailView`单击时显示`UITableViewCell`。

详细视图中的代码：

```
- (void)configureView
{
    if (self.imageURL)
    {
        [self.imageView setImageWithURL:self.imageURL placeholderImage:nil options:SDWebImageProgressiveDownload progress:^(NSUInteger receivedSize, long long expectedSize)
         {
             float percentDone = (float)receivedSize*200/(receivedSize+expectedSize);
             [SVProgressHUD showWithStatus:[NSString stringWithFormat:@"Downloading... %0.0f%%", percentDone]];
             if (percentDone == 100) {
                 [SVProgressHUD showSuccessWithStatus:@"Loaded."];
             }
         }
                              completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType)
         {

         }];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self configureView];
} 
```

图像是否太大（半兆字节）？ `SDWebImage`缓存这些图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:34:19.433

在 TABLEViewCell 中使用 SDWebImageProgressiveDownload 不是一个好主意，使用 SDWebImageRetryFailed 就可以了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:38:24.150

你说你在 viewDidUnload 中释放 imageView.image 但 viewDidUnload 在 ios6 上已弃用。视图不再被卸载..该方法可能不会被调用:)

做`didReceiveMemoryWarning`

# c - C：以正确的方式解析选项

> ID：13819315
> 
> 赞同：2
> 
> 时间：2012-12-11T11:23:12.037
> 
> 标签：c, parsing, arguments, main, purify

我正在尝试解析 C 程序中的两个选项。

该程序是这样调用的：

```
./a.out [OPTIONS] [DIRECTORY 1] [DIRECTORY 2] 
```

该程序同步两个目录并有两个选项。`(-r)`用于递归同步（文件夹内的文件夹），`(-n)`并将文件从本地复制到远程，以防远程中不存在。

```
Options are:
-r : recursive
-n : copy file if it doesn't exist in remote folder 
```

所以调用：

```
./a.out -r D1 D2 
```

将递归同步所有文件和目录从`D1`到`D2`。`D1`存在和不存在的文件将`D2`被忽略。

并调用：

```
./a.cout -rn D1 D2 
```

会做同样的事情，但存在`D1`和不存在的文件`D2`被复制到`D2`.

问题是 call与call`./a.out -rn`不一样，也不能正常工作，因为is not 。`./a.out -nr``./a.out -r -n``(-n)``D1`

以下是我实现 main 的方法。

```
int main(int argc, char** argv) {
  int next_option = 0;
  const char* const short_options = "hrn:";

  const struct option long_options[] = {
    { "help",      0, NULL,  'h' },
    { "recursive", 1, NULL,  'r' },
    { "new", 1, NULL,  'n' },
    { NULL,        0, NULL,  0   }
  };

  int recursive = 0;
  int new = 0;

  do {
    next_option = getopt_long(argc, argv, short_options, long_options, NULL);

    switch(next_option) {
      case 'r':
        recursive = 1;
        break;

      case 'n':
        new = 1;
        break;

      case 'h':
        print_help();
        return 0;

      case -1:
        break;

      default:
        print_help();
        return -1;
    }

  } while(next_option != -1);

  sync(argv[2], argv[3], recursive, new);

  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:41:44.307

您在这里有两个（潜在的）问题：

1.  `:`您的短选项字符串中有一个流浪者。这使得`-n`采取吞下任何后续的选项`r`。您还可以设置长选项来接受强制参数。

2.  您以不灵活的方式对参数编号进行了硬编码，并且您没有测试它们是否存在。

尝试这个：

```
int main(int argc, char** argv) {
  int next_option = 0;
  const char* const short_options = "hrn";
  extern int optind;

  const struct option long_options[] = {
    { "help",      no_argument, NULL,  'h' },
    { "recursive", no_argument, NULL,  'r' },
    { "new",       no_argument, NULL,  'n' },
    { NULL,        no_argument, NULL,  0   }
  };

  int recursive = 0;
  int new = 0;

  do {
    next_option = getopt_long(argc, argv, short_options, long_options, NULL);

    switch(next_option) {
      case 'r':
        recursive = 1;
        break;

      case 'n':
        new = 1;
        break;

      case 'h':
        print_help();
        return 0;

      case -1:
        break;

      default:
        print_help();
        return -1;
    }

  } while(next_option != -1);

  if (optind + 1 >= argc)
    return -1;

  sync(argv[optind], argv[optind+1], recursive, new);

  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:37:39.313

使用命令行的问题`-r -n`是因为您在对`sync`. 你不应该那样做。

如果您阅读[`getopt_long`](http://linux.die.net/man/3/getopt_long)手册页（当您遇到功能问题时总是这样做！）然后您会注意到这一行：

> 如果没有更多选项字符，**getopt()**返回 -1。然后*optind*是第一个*argv元素在**argv*中的索引，该元素不是选项。

 *仔细阅读第二句。*

# php - Magento - 确定购物车页面上应用的优惠券代码是否适用于“免费送货”

> ID：13819316
> 
> 赞同：3
> 
> 时间：2012-12-11T11:23:13.380
> 
> 标签：php, magento-1.7, magento

有谁知道如何判断购物车页面上的优惠券代码是通过代码免费送货吗？

我有一个为免费送货创建的购物车规则，效果很好。但是，如果客户还没有选择他的送货选项，那么他们会感到困惑，因为优惠券代码至少在购物车页面上对他们没有任何作用。

他们在结帐/单页上看到免费送货选项。

因此，我需要此信息，以便我可以向客户显示一条有效消息，表明“优惠券已应用，并且他们可以在下一阶段的结账中使用免费送货选项”

任何想法要查找哪个文件以及哪些代码可以帮助我确定我的优惠券代码是免费送货的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:45:46.997

你应该看看 in `Mage_SalesRule_Model_Validator`and than the method `public function processFreeShipping(Mage_Sales_Model_Quote_Item_Abstract $item)`。这就是计算免费送货的地方。

您可以修改/扩展它以在会话中保存某些内容，并使用它在前端检测购物车是否免费送货。

# symfony - 表单不显示模板中的表单错误

> ID：13819319
> 
> 赞同：1
> 
> 时间：2012-12-11T11:23:16.677
> 
> 标签：symfony, symfony-2.1

对于我的联系表格，不会显示任何表格错误。

```
 $contact = new Contact();

    $form = $this->createForm(new ContactFormType(), $contact);

    /* handle contact form submission */
    if ('POST' == $request->getMethod()) {
        $form->bindRequest($request);

        if ($form->isValid()) {
            //Do something
        }
    }

    return $this->render('MainBundle:Default:contact.html.twig', array(
                'form' => $form->createView()
    )); 
```

我的验证器

```
Fc\MainBundle\Entity\Contact:
    properties:
        firstName:
            - NotBlank: ~

        lastName:
            - NotBlank: ~

        email:
            - NotBlank: ~
            - Email:
                checkMX: true
        title:
            - NotBlank: ~
        message:
            - NotBlank: ~ 
```

我在我的表单标签中添加了一个 novalidate 属性来检查我的验证是否有效。现在，当我提交带有空数据的表单时，没有任何反应（使用正确的数据一切都很好），控制器将表单识别为无效并停止进一步的处理。

在我调用的模板中

```
 {{ form_errors(form) }} 
```

但什么都没有显示。任何想法为什么？我使用 symfony 2.1.X

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T11:40:18.280

您能否确认验证正在使用此：

```
if ($form->isValid()) {
//Do something
}
else
{ die('not valid') } 
```

表格是否张贴得很好？

HTML 中是否有任何内容显示您调用 {{ form_errors(form) }} 的位置？- 如果是这种情况，那将是 CSS 或 JS 问题...

您是否尝试按字段显示错误（显然您的验证中没有全局错误）：

```
{{ form_errors(form.firstName) }}
etc. 
```

备注：**form.firstName**有效，而不是**form.first_name**。你必须遵循 Doctrine2/Symfony2 的约定。

# nsurlconnection - 具有重试功能的 NSURLConnection sendAsynchronousRequest

> ID：13819321
> 
> 赞同：4
> 
> 时间：2012-12-11T11:23:21.653
> 
> 标签：nsurlconnection, grand-central-dispatch

我有我的主 UI 线程调用`sendAsynchronousRequest`方法`NSURLConnection`来获取数据。

```
[NSURLConnection sendAsynchronousRequest:[self request] 
 queue:[NSOperationQueue alloc] init
 completionHandler:
        ^(NSURLResponse *response, NSData *data, NSError *error)       
        {
            if (error)
            {
               //error handler 
            }
            else 
            {
               //dispatch_asych to main thread to process data.
            } 
        }]; 
```

这一切都很好。

我的问题是，我需要在错误时实现重试功能。

1.  我可以在此块中执行此操作并调用`sendSynchronousRequest`重试，因为这是后台队列。
2.  或者调度到主线程并让主线程处理重试（通过调用`sendAsynchronousRequest`并重复相同的循环）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:09:31.123

您正在通过调用来获取请求`[self request]`。如果`request`是原子@property，或者是线程安全的，我想不出你不能从非主线程开始重试的任何原因。

或者，您可以在`+sendAsynchronousRequest:queue:`调用之前将请求的副本放入本地变量中。如果你这样做，然后在你的完成处理程序中引用它，那么它将被隐式保留并且`[self request]`只会被调用一次。

一般来说，这可能不是一个很好的模式。如果服务关闭，没有其他检查，它将永远继续尝试。你可以尝试这样的事情：

```
NSURLRequest* req = [self request];
NSOperationQueue* queue = [[NSOperationQueue alloc] init];
__block NSUInteger tries = 0;

typedef void (^CompletionBlock)(NSURLResponse *, NSData *, NSError *);    
__block CompletionBlock completionHandler = nil;

// Block to start the request
dispatch_block_t enqueueBlock = ^{
    [NSURLConnection sendAsynchronousRequest:req queue:queue completionHandler:completionHandler];
};

completionHandler = ^(NSURLResponse *resp, NSData *data, NSError *error) {
    tries++;
    if (error)
    {
        if (tries < 3)
        {
            enqueueBlock();
        }
        else
        {
            // give up
        }
    }
    else
    {
        //dispatch_asych to main thread to process data.
    }
};

// Start the first request
enqueueBlock(); 
```

# python - Python正则表达式到行尾

> ID：13819327
> 
> 赞同：1
> 
> 时间：2012-12-11T11:23:36.967
> 
> 标签：python

有点沮丧，我无法解决这个问题，但我想定义一个选择未知数量的单词的正则表达式（一些间隔，一些合并数字，一些下划线）。

当我说“未知数量的单词”时，我很乐意将其限制为 10 个，如果这更现实的话。基本上我正在扫描文件名并且不怀疑有任何超过 10 个单词，但最好不必设置限制。

到目前为止我最好的是：

```
tc = re.findall(r'FROM CLIP NAME:\s\s(\w*\s*\w*\s*\w*\s*\w*\s*\w*\s*\w*\s*\w*\s*\w*\s*\w*\s*\w*)', text) 
```

其中 'FROM CLIP NAME:\s\s' 将位于每行的开头。

我上面的尝试完全失败，因为 \s 读取换行符和空格，因此也从下一行获取数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:37:58.687

```
FROM CLIP NAME:\s{2}([\w\s]*)$ 
```

您可以使用字符类来定义允许的字符（也可以是预定义的字符类，例如`\w`和`\s`）并接受任意数量的字符。这样你就不会真正关心它将包含什么。您也可以只使用一个点`.`来匹配*任何内容*。

尾随`$`将使正则表达式在末尾需要行尾。请注意，对于基于行的行为，`$`您需要使用`re.M`正则表达式的标志，否则`$`将匹配字符串的结尾。

```
re.compile('FROM CLIP NAME:\s{2}([\w\s]*)$', re.M) 
```

如果在您的情况下`FROM CLIP NAME:`是静态前缀，那么您不应该使用正则表达式。只需像 eumiro 所示那样迭代这些行并去掉前缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:31:02.087

不使用正则表达式怎么样？

检查一行是否以开头`"FROM CLIP NAME: "`，然后切断该开头并返回字符串的其余部分：

```
title = "FROM CLIP NAME:  "
for line in lines:
    if line.startswith(title):
        tc = line[len(title):] 
```

这会迭代行，因此`line`总是只到换行符。

如果您没有行列表（或文件对象），而是使用文本，请使用`for line in text.splitline()`.

# android - 在 eclipce 上安装 facebook api 后发现 2 个版本的 .jar。在我的新应用中

> ID：13819328
> 
> 赞同：3
> 
> 时间：2012-12-11T11:23:36.780
> 
> 标签：android, facebook, eclipse, api, jar

Eclipse 控制台消息：

```
Found 2 versions of android-support-v4.jar in the dependency list
but not all the versions are identical (check is based on SHA-1 only at this time).
All versions of the libraries must be the same at this time.
Versions found are:
Path: /Users/itaiirdam/Documents/facebook-android-sdk-3.0.2.b/facebook/libs/android-support-v4.jar
Length: 349252
SHA-1: 612846c9857077a039b533718f72db3bc041d389
Path: /Users/itaiirdam/Documents/workspace1/CTPuppy/libs/android-support-v4.jar
Length: 385677
SHA-1: b9c504522d97f64025c387493d3989e52bc617bd
Jar mismatch! Fix your dependencies
Found 2 versions of android-support-v4.jar in the dependency list,
but not all the versions are identical (check is based on SHA-1 only at this time).
All versions of the libraries must be the same at this time.
Versions found are:
Path: /Users/itaiirdam/Documents/facebook-android-sdk-3.0.2.b/facebook/libs/android-support-v4.jar
Length: 349252
SHA-1: 612846c9857077a039b533718f72db3bc041d389
Path: /Users/itaiirdam/Documents/workspace1/CTPuppy/libs/android-support-v4.jar
Length: 385677
SHA-1: b9c504522d97f64025c387493d3989e52bc617bd
Jar mismatch! Fix your dependencies 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T11:31:31.507

这是因为第三方 api 里面有支持库。您的项目中也可能包含相同的支持库。`Delete the common support library from your project's libs.`这应该可以解决您的问题并让我知道结果。

# php - 致命错误：无法在写入上下文中使用方法返回值 在线的

> ID：13819331
> 
> 赞同：2
> 
> 时间：2012-12-11T11:23:47.827
> 
> 标签：php, class, fatal-error

我收到以下代码的错误

```
 class Myclass {
              //...variables

              public function getName() {
                       return $this->strName;
              }

              public function checkDup() {
                      if(empty($this->getName())) {  //HERE IS THE ERROR
                        $strMessage = 'Please Enter First Name';
                        return $strMessage;
                      }
              }
     }

     $a = new Myclass (); //assume constructor is present and variables are set in class
     $a->checkDup(); 
```

有什么解决办法？我的 getName() 函数返回变量的名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:50:29.603

我弄清楚这里出了什么问题。

我应该使用 $this 来引用类成员变量，而不是在类中再次调用 getName() 函数。这将函数更改为：

```
 public function checkDup() {
                  if(empty($this->strName)) {  //HERE IS THE SOLUTION
                    $strMessage = 'Please Enter First Name';
                    return $strMessage;
                  }
          } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:28:02.023

change:

```
if(empty($this->getName())) { 
```

to

```
$name = $this->getName();
if( empty($name) ) {
... 
```

**empty() only checks variables as anything else will result in a parse error**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:52:36.373

这种`empty`结构有点傻。见[手册](http://cz2.php.net/empty)：

> 笔记：
> 
> 在 PHP 5.5 之前，empty() 只支持变量；其他任何事情都会导致解析错误。换句话说，以下内容将不起作用：empty(trim($name))。相反，使用 trim($name) == false。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-17T10:50:54.373

我不喜欢这里的任何答案。是的，您可以`$this->strName`直接参考。但如果你不能呢？如果`getName()`有一些重要的功能怎么办？

那么唯一的选择是创建另一个变量？`$var = $this->getName();`. 那也很烂。

通常，每当我动态访问类属性或函数时，我都会将其括在大括号中`{}`，因此：

1.  我知道它是动态的。
2.  如果有任何错误，我会得到有意义的错误。

例子：

```
$this->{$variable};
$this->{$class->property};
$this->{$class->method()};
$this->{function()};
$this->{$array['index']}; 
```

# gwt - GWT SuperDevMode 抛出这个：找到多个片段 0 源映射。太多的排列组合

> ID：13819338
> 
> 赞同：4
> 
> 时间：2012-12-11T11:24:16.370
> 
> 标签：gwt, gwt-2.5, source-maps

我在 Chrome 中使用 SuperDevMode，它运行良好，直到 sourcemaps 突然停止在 Chrome 中显示。
CodeServer 抛出以下异常：`Multiple fragment 0 sourcemaps found. Too many permutations.`

在编译期间它显示：

```
Compiling 5 permutations
  Compiling permutation 0...
  Source Maps Enabled
  Compiling permutation 1...
  Source Maps Enabled
  Compiling permutation 2...
  Source Maps Enabled
  Compiling permutation 3...
  Source Maps Enabled
  Compiling permutation 4...
  Source Maps Enabled
Compile of permutations succeeded 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-26T13:32:01.970

默认情况下，GWT 编译 6 种基本排列，一种用于每种浏览器类别。

*   火狐，所有版本
*   所有 Webkit 浏览器（Safari、Chrome、Android 浏览器等）
*   IE6 和 IE7
*   IE8
*   IE9（和 IE10）
*   歌剧

有一个报告的问题：[Issue 7458: Super Dev Mode should not compile 6 permutations when user.agent is missing](https://code.google.com/p/google-web-toolkit/issues/detail?id=7458)

问题描述中建议的解决方法：

> 是限制 gwt.xml 文件中的浏览器排列。例如，如果您使用的是 Chrome 或 Safari：

```
<set-property name="user.agent" value="safari"/> 
```

此外，如果您使用 Sencha GXT，我还建议您阅读以下文章：[使用 GWT 编译器获得更好的构建](http://www.sencha.com/blog/using-the-gwt-compiler-for-better-builds)

根据文章，我还在我的 gwt.xml 中添加了以下行：

```
<collapse-all-properties /> 
```

所以最后我对 SuperDev 模式的配置如下：

```
<add-linker name="xsiframe"/>
<set-configuration-property name="devModeRedirectEnabled" value="true"/>
<set-property name="compiler.useSourceMaps" value="true" />
<set-property name="user.agent" value="safari"/>
<collapse-all-properties /> 
```

结果 GWT 只编译一个排列：

```
binding: user.agent=safari
binding: compiler.useSourceMaps=true
binding: locale=en
Compiling module com.mycompany.Main
...
Compiling 1 permutation
  Compiling permutation 0...
  Source Maps Enabled
Compile of permutations succeeded 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T14:45:09.800

如果您添加了语言环境但没有`en`显式添加语言环境和/或没有“删除”`default`语言环境**并且**您在浏览器中加载页面之前没有*关闭开发模式，则可能会发生这种情况。*

例如，在我的模块中，我有：

```
<extend-property name="locale" values="fr" />
<set-property-fallback name="locale" value="fr"/> 
```

使用此设置，有 2 个语言环境：`fr`和`default`（但`default`不再使用该语言环境，因为我覆盖了回退到`fr`）。

启动 SuperDevMode 时，它​​编译 2 个排列（可能是因为它强制`locale`to`en`但实际上并没有检查模块中是否存在这样的语言环境）。

我之前启动了该应用程序并打开了*Dev Mode On*，但随后停止并重新启动了 SuperDevMode。当我在Chrome中刷新页面时，因为它仍*处于开发模式*（状态存储在`localStorage`一。
单击*Dev Mode On*和*Compile*会强制 SuperDevMode 使用浏览器环境中的属性重新编译（`locale=fr`这里，因为它是后备）。因此，它编译了一个排列，并且源映射再次工作。

在我的具体情况下，我需要一个排列；我所要做的就是添加`<set-property name="locale" value="fr"/>`.

您必须处于类似的情况。

很抱歉，我能分享的信息就这么多。没有什么权威的。

# c++ - 具有多个 QWidgets 的 QScrollArea 仅显示空框

> ID：13819340
> 
> 赞同：2
> 
> 时间：2012-12-11T11:24:22.037
> 
> 标签：c++, qt, user-interface

我正在尝试创建一个显示一些信息的小部件。每个信息都是一个 QWidget，其中包含多个带有文本的 QLabel（信息）。我的想法是将多个（这些数组）放入 QScrollArea 中，以便用户可以查看它们上下滚动。以下代码：

```
InfoWidget::InfoWidget(QWidget* parent) : QWidget(parent){
    widgets = new QVector<MarkerInfoWidget*>();
    csv_data = 0;
    csv_velocity = 0;
    labels = 0;
    infoWidgetLayout = new QVBoxLayout(this);
    setLayout(infoWidgetLayout);
    scrollArea = new QScrollArea(this);
    scrollWidgetLayout = new QVBoxLayout(scrollArea);
    scrollArea->setLayout(scrollWidgetLayout);
    infoWidgetLayout->addWidget(scrollArea);
    //Test
    QString name = "TEST";
    for(int i=0; i<10; i++){
        MarkerInfoWidget* markerWidget = new MarkerInfoWidget(name, scrollArea);
        scrollWidgetLayout->addWidget(markerWidget);
        widgets->append(markerWidget);
    }
} 
```

MarkerInfoWidget 和 InfoWidget 都扩展了 QWidget。我得到的只是一个文本很小的框：

![小文本示例](../Images/940e9f4dfd346425dbdc1c12b75eb4a7.png)

如果我将它拖出并重新调整大小，它会正确显示：

![调整大小的示例](../Images/3bd67c6b9cbe804a2040ba614a149f28.png)

我注意到的是，如果我将它重新调整得太小，它不会生成滚动。我需要什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:28:53.510

我想改变：

```
scrollArea->setLayout(scrollWidgetLayout); 
```

喜欢某事：

```
QFrame* frame = new QFrame(scrollArea);
frame->setLayout(scrollWidgetLayout);
scrollArea->setWidget(frame); 
```

据我所知，您必须将小部件放入 QScrollableArea 以使其真正可滚动。设置其布局可能不是您想要做的事情。

# silverlight - 无法让 Silverlight 媒体框架 SMFPlayer 显示电影全屏或正确的纵横比

> ID：13819343
> 
> 赞同：1
> 
> 时间：2012-12-11T11:24:26.370
> 
> 标签：silverlight, windows-phone-8, mmppf

我在 Windows Phone 8 上使用最新版本的 Silverlight 媒体框架。我已成功播放标准 MP4 和 DRM 加密的 MWV 媒体。

但是，两者都不会播放到屏幕的全部范围。标准 MP4 以正确的纵横比播放，但不填满可用区域。有些胶卷可以，所以我想有些分辨率比手机低，所以玩得更小。最好让分辨率更低的电影全屏播放。

DRM 电影垂直填充屏幕，但水平“挤压”（以 4:3 的纵横比）。这些应该是宽屏电影（！

我尝试了一些东西，例如将播放项目设置为播放器的高度和宽度

```
item.VideoHeight = player.ActualHeight;
item.VideoWidth = player.ActualWidth;
item.VideoStretchMode = Stretch.Uniform; 
```

这没有用。在播放器 xaml 中也没有设置以下内容！

```
HorizontalContentAlignment="Stretch"
VerticalContentAlignment="Stretch" 
```

我目前在 XAML 中使用最简单的实现。

```
<core:SMFPlayer 
Name="player"
IsEnabled="True"
Grid.Row="0" 
CaptionsVisibility="Disabled"
VolumeLevel="50"
Visibility="{Binding DisplayError, ConverterParameter=true, Converter={StaticResource BoolToVisibilityConverter}}" 
/> 
```

有人可以帮忙吗？我需要能够强制所有媒体播放尽可能全屏播放，同时保持纵横比而不是剪辑。

我可以设置 SMF 的任何属性以使电影尽可能大地播放并保持纵横比吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:45:07.123

你希望你的容器，而不仅仅是你的视频，已经`Stretch="Uniform"`设置好了。也就是说，无论是 Grid、SMFPlayer 等...我不确定哪个元素需要它，这取决于您的 XAML。

这应该可以满足您的要求：尽可能多地填充屏幕，同时保持纵横比，而不进行裁剪。如果您想“缩放”，还有另一种模式，即裁剪以使屏幕始终充满：`Stretch="UniformToFill"`。

# php - 如何在 symfony2 表单中自定义集合元素

> ID：13819345
> 
> 赞同：0
> 
> 时间：2012-12-11T11:24:39.843
> 
> 标签：php, symfony, twig, symfony-2.1

我有一个与用户相关的简单表单，我在其中添加了一组电话号码（另一种形式）。

我可以让它与 javascript 一起工作，但我想自定义每个电话输入的呈现。

同样的事情是通过这样做来处理一个简单的字段：

```
{% block _elementId_widget %}
    {{ block('form_widget_simple') }}
    <input type="button" class="btn" id="btnInvertNames" value="{{ "form.invertNames"|trans }}" />
{% endblock %} 
```

在小部件之后添加一个按钮，但不适用于集合..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:39:16.423

我发现的一个解决方案是编写一个新的“表单类型”并自定义其模板：

在此处查找[文档](http://symfony.com/doc/master/cookbook/form/create_custom_field_type.html)

# android - Android应用程序的数据库和包位置

> ID：13819348
> 
> 赞同：0
> 
> 时间：2012-12-11T11:24:49.267
> 
> 标签：android, sqlite

我正在开发 Android 应用程序。我使用 SQLite 将数据存储在用户的设备中。问题是我不知道数据库在哪里。我也无法在设备中找到我的应用程序包。通常包可以在目录**Android/Data/com.example.xxx**找到。谁能告诉我为什么？

顺便说一句，我遵循来自[http://www.edumobile.org/android/android-development/use-of-sqlite/的 SQLite 教程](http://www.edumobile.org/android/android-development/use-of-sqlite/)

我检查了代码，它没有显示数据库保存的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:00:32.140

> 我使用 SQLite 将数据存储在用户的设备中。问题是我不知道数据库在哪里。我也无法在设备中找到我的应用程序包。

您无权访问生产设备上的内部存储。

> 通常包可以在目录 Android/Data/com.example.xxx 找到

我从未见过这样的目录。

传统上，Android 4.1 及更低版本上的 SQLite 数据库将位于`/data/data/com.example.xxx/databases/`. 但是，您只能在模拟器和根设备上访问该目录。而且，在 Android 4.2 及更高版本上，内部存储的路径取决于用户帐户。

您的应用程序可以`getDatabasePath()`用来了解数据库的存储位置（例如，用于日志记录），并且您可以将该文件从您的应用程序内复制到外部存储设备（例如，通过备份操作栏项）。

# python - Disconnecting the connection in pycurl

> ID：13819364
> 
> 赞同：1
> 
> 时间：2012-12-11T11:25:54.210
> 
> 标签：python, connection, pycurl

I'm writing a python code to download files using `pycurl`. Is there any possibility to inform my program to disconnect the connection? I mean that while the code is running, I want to disconnect the connection whenever I want. (e.g. by clicking on a button and invoking a function). It can be used to pause the download.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T15:29:40.230

是的。为了回答您的问题更容易的部分，解决方案是`return`在您的`pycurl.WRITE_FUNCTION`.

[我项目](https://github.com/woozyking/tidehunter)中的一个示例演示了如何实际断开理论上永无止境的 HTTP GET 请求（流）

```
def _on_data_receive(self, data):
    self.buffer += data

    if data.endswith('\r\n'):  # or any valid chunk delimiter
        # Do something about self.buffer
        print self.buffer

    if True:  # some valid condition to disconnect
        return -1  # the way to stop the stream, would raise pycurl.error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T21:07:02.920

*   是的，您可以使用回调查看[PyCurl Doc中的那些示例](http://pycurl.sourceforge.net/doc/)
*   来自 libcurl 的许多 C 示例非常有用[LibCurl](http://curl.haxx.se/libcurl/c/example.html)
    *您可以轻松地在 python 中使用这些选项*

# lisp - 将科学计数法输出为十进制计数法

> ID：13819366
> 
> 赞同：1
> 
> 时间：2012-12-11T11:25:57.880
> 
> 标签：lisp, number-formatting

我正在使用[http://www.solve-et-coagula.com/As3Lisp.html](http://www.solve-et-coagula.com/As3Lisp.html)来运行一个基本的阶乘函数。

它以科学计数法输出结果，但我希望看到完整的“扩展”数字。

```
(defun factorial (n)
 (cond ((= n 0) 1)
       (t (* n (factorial (- n 1)))))) 
```

然后

```
(factorial 100)

9.33262154439441e+157 
```

我尝试了各种`format`命令，`(format t "~D" (factorial 100))`看起来像赢家，但它不起作用。也试过设置`(setq *READ-DEFAULT-FLOAT-FORMAT* 'double-float)`，但还是不行。

是我的命令有问题，还是环境有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:03:54.767

事实证明，不同的环境可以解决问题。

我使用了 Gnu Common Lisp (http://www.cs.utexas.edu/~novak/gclwin.html)，答案按预期返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:54:01.040

如果您的实现支持[srfi-28](http://srfi.schemers.org/srfi-28/srfi-28.html)（格式），那么我认为 ~F 可以解决问题。关于鸡肉计划：

```
#;1> (use format)
; loading /usr/local/lib/chicken/6/format.import.so ...
; loading /usr/local/lib/chicken/6/chicken.import.so ...
; loading /usr/local/lib/chicken/6/srfi-13.import.so ...
; loading /usr/local/lib/chicken/6/data-structures.import.so ...
; loading /usr/local/lib/chicken/6/ports.import.so ...
; loading /usr/local/lib/chicken/6/extras.import.so ...
; loading /usr/local/lib/chicken/6/format.so ...
#;2> (format #t "~F~%" (factorial 100))
93326215443944100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.0
#t 
```

查看[格式 egg 规范](http://wiki.call-cc.org/eggref/4/format)

干杯。

# overloading - C# Yes No box with variable overload?

> ID：13819369
> 
> 赞同：1
> 
> 时间：2012-12-11T11:26:04.233
> 
> 标签：overloading, messagebox

I'm building a word search application for my term 1 University project, I basically have a Windows Form Application which uses an array to populate a list box when a user inputs text into the "Add" field. I also have included the option to remove added items to the list but wanted to create a question box to ask the user if they wanted to delete item {0} in the array.

I have been experimenting for a good hour or so and could not find anything on the net to solve my problem. Below is my code snippet to the applicable section...

```
 //Clear the contents of the selected item
    private void deleteBtn_Click(object sender, EventArgs e)
    {
        string findMyWord = findLst.Text;

        if (MessageBox.Show(string.Format("You are trying to clear the contents of {0}, do you wish to proceed?", findMyWord, "Delete the items contents?", MessageBoxButtons.YesNo, MessageBoxIcon.Question)) == DialogResult.Yes)
        {
            findLst.Items.Remove(findLst.SelectedItem);
        } 
```

Thanks in advance.

# c# - 如何将模型集合的单个元素发布到操作？

> ID：13819374
> 
> 赞同：2
> 
> 时间：2012-12-11T11:26:23.183
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我有一个包含集合的模型。我想将每个人包装`EditorFor`在一个表单中，该表单以单个元素作为参数发布到一个动作。IE：

```
class ModelWithCollection
{
    List<ElementModel> Elements { get; set; }
}

class ElementModel
{
    int Field { get; set; }
}

public ActionResult ElementAction(ElementModel viewModel)
{

} 
```

但是，我`viewModel`没有填充属性。我可以理解这一点，因为编辑器将 id 呈现为`Elements[0].Field`. 宁愿在哪里行动就好了`Field`。

我怎样才能解决这个问题？

* * *

我不认为我可以使用 jquery 或其他东西手动构建帖子，因为它包括上传文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:42:28.603

[有一个重载`EditorFor`](http://msdn.microsoft.com/en-us/library/ee407399%28v=vs.100%29.aspx)需要三个参数：`expression`、`templateName`和`htmlFieldName`。如果您提供表达式`null`for `templateName`（从而告诉帮助程序以通常的方式解析编辑器模板）和一个空字符串 for `htmlFieldName`，这应该呈现不带`Elements[0].`前缀的字段。

```
<%=Html.EditorFor(m => m.Elements[i], null, string.Empty)%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:45:44.497

您可以使用局部视图解决此问题。如果您移动`EditorFor`到局部视图（使用`ElementModel`模型），则不会生成`[0]`括号。

# iphone - 加载在故事板中创建的视图控制器作为另一个视图控制器的子视图（进入屏幕的一部分）

> ID：13819376
> 
> 赞同：0
> 
> 时间：2012-12-11T11:26:31.057
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我目前正在开发 iPad 应用程序。我需要创建一个标签栏。问题是，出于设计目的，我需要标签栏位于屏幕的上半部分而不是底部，因为它位于默认的标签栏控制器上。

一旦标签栏位于顶部，我希望当一个按钮被触摸时，标签下方的子视图会发生变化。此外，应该加载的子视图也设计在情节提要内。下面的草图显示了我希望它的样子：

![在此处输入图像描述](../Images/9771e2da208a85914f40b909651585da.png)

在我的研究中，我找到了一个将标签栏放在顶部的解决方案（ [here ）。](https://stackoverflow.com/questions/8786648/on-top-tabbar-controller-or-segmented)现在我的问题是在它下面加载一个子视图。

我试过了，`[self.view addsubview:theNameOfTheViewCreatedINStoryboad.view]`但是当我按下按钮时应用程序只是挂起。

我认为那是因为我没有在任何地方指定新视图的尺寸或应该放置在碎石上的什么位置。这样做的原因是因为我不知道应该在哪里做。

谁能给我一些关于这件事的启示？推荐的方法是将标签栏放在顶部的最佳方法吗？如何解决子视图问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:37:22.780

很高兴看到您使用的是工具栏而不是 tabBar。更好的是创建一个自定义内容视图控制器。

您应该考虑使用遏制：

[UIViewController 包含](https://stackoverflow.com/questions/12286554/uiviewcontroller-containment) [View Controller Containment 在 iOS 5 中如何工作？](https://stackoverflow.com/questions/8379759/how-does-view-controller-containment-work-in-ios-5) [定位 UIViewController 包含子项](https://stackoverflow.com/questions/10727123/positioning-uiviewcontroller-containment-children)

查看[文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)

# java - AccessController 未考虑类的 ProtectionDomain

> ID：13819380
> 
> 赞同：6
> 
> 时间：2012-12-11T11:27:00.720
> 
> 标签：java, security, permissions, securitymanager, sandbox

# 语境

我正在编写一个 Java 系统，其中代码在非常严格的沙箱中执行。查询（由一个或多个类组成）在执行期间只允许访问一个文件夹（以及文件夹中包含的子文件夹和文件）。

我通过使用一个`SecurityManager`, 和一个新的`ClassLoader`每个查询执行来强制沙盒。在`ClassLoader`using中定义类时`defineClass`，我传递了一个`ProtectionDomain`包含应该授予的文件读取权限的文件。

由于并非调用堆栈上的所有对象都具有所需的权限，因此查询中的读取操作在`AccessController.doPrivileged(...)`-block 内运行。

# 问题

*   当我`AccessController.checkPermission(...)`直接从`doPrivileged(...)`块内调用时，它会静默返回
*   当我调用`System.getSecurityManager().checkPermission(...)`将请求转发到 时`AccessController`，会`AccessController`引发异常。
*   通过?`ProtectionDomain`呼叫时似乎迷路`AccessController`了`SecurityManager`？
*   受限制的文件操作（如创建`java.io.FileReader`），直接调用`SecurityManager`而不是`AccessController`. **当通过 调用时，****如何让 尊重调用-block 的类的 ？`AccessController``SecurityManager``ProtectionDomain``doRestricted(...)`**
*   可能是它`SecurityManager`本身没有所需的权限吗？因此，通过被夹在特权代码之间的调用堆栈中，`AccessController`生成一个没有特权的联合？

下面是一个示例部分：

```
AccessController.doPrivileged(new PrivilegedAction<QueryResult>() {
  public QueryResult run() {
    String location = folderName + "/hello";
    FilePermission p = new FilePermission(location, "read");
    try {
      AccessController.checkPermission(p); // Doesn't raise an exception
      System.out.println("AccessController says OK");
      System.getSecurityManager().checkPermission(p);  // Raises AccessControlException
      System.out.println("SecurityManager says OK");
    } catch (AccessControlException e) {
      System.out.println("### Not allowed to read");
    }
    return null;
  }
}); 
```

程序生成的输出，包括部分堆栈跟踪（PATH 替换使用的长路径名）：

```
AccessController says OK
Asked for permission: ("java.io.FilePermission" "PATH/hello" "read")
java.security.AccessControlException: access denied ("java.io.FilePermission" "PATH/hello" "read")
  at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
  at java.security.AccessController.checkPermission(AccessController.java:560)
  at com.aircloak.cloak.security.CloakSecurityManager.checkPermission(CloakSecurityManager.java:40)
  at com.dummycorp.queries.ValidQuery$1.run(ValidQuery.java:23)
  at com.dummycorp.queries.ValidQuery$1.run(ValidQuery.java:1)
  at java.security.AccessController.doPrivileged(Native Method)
  at com.dummycorp.queries.ValidQuery.run(ValidQuery.java:16)
  at com.aircloak.cloak.security.CloakSecurityManagerTest$1.run(CloakSecurityManagerTest.java:75)
  at java.lang.Thread.run(Thread.java:722) 
```

`CloakAccessController.checkPermission(...)`实施也可能很有趣。它看起来像这样：

```
public void checkPermission(Permission perm) {
  if (Thread.currentThread().getId() == this.masterThread) {
    return;
  } else {
    System.out.println("Asked for permission: "+perm.toString());
  }
  AccessController.checkPermission(perm);
} 
```

它的作用主要是绕过创建它的线程的安全限制。

* * *

我的[java.policy](https://gist.github.com/a84da7c87f76aa051e3e)文件的内容是标准 MacOSX 系统的内容。我相信它不包含任何非标准的变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T08:59:19.553

回答我自己的问题我觉得有点尴尬，但我找到了正确的解决方案，并且认为在这里添加它是正确的，所以它被记录下来以备将来有人偶然发现这个问题。

### **TL;博士**：

我的自定义[SecurityManager](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html)没有正确的权限。由于它位于调用 -block 的类`doPrivileged(...)`和[AccessController](http://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html)之间的调用堆栈上，因此权限的交集根本就没有权限。

### 长版

Java 安全模型的工作方式如下。当[AccessController](http://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html)验证是否允许类调用方法时，它会从调用堆栈的顶部向底部查看权限。如果调用堆栈中的每个条目都具有权限，则允许该操作。

这是一个任意示例，一切正常：

```
+-----------+-------------------+-----------------------+
| Callstack | Class permissions | Permissions in effect |
+-----------+-------------------+-----------------------+
| Some      | {Read,Write}      | {Read}                |
| Other     | {Read}            | {Read}                |
+-----------+-------------------+-----------------------+ 
```

现在，就我的问题而言，调用堆栈中的较低层根本没有权限。因此，我们最终得到了这样的图片，其中`query`顶部的实际上没有权限。

```
+-----------+-------------------+-----------------------+
| Callstack | Class permissions | Permissions in effect |
+-----------+-------------------+-----------------------+
| Query     | {Read}            | {}                    |
| Other     | {}                | {}                    |
+-----------+-------------------+-----------------------+ 
```

您可以通过使用`doPrivileged(...)`-block 来解决此问题。这允许通过调用堆栈的权限搜索在调用特权操作的条目处结束：

```
+-----------+-------------------+-----------------------+
| Callstack | Class permissions | Permissions in effect |
+-----------+-------------------+-----------------------+
| Query     | {Read}            | {Read}                |
| Other     | {}                | {}                    |
+-----------+-------------------+-----------------------+ 
```

这就是为什么当我`AccessController.checkPermission(...)`在查询中调用 from 时一切正常的原因。毕竟它确实具有正确的权限。（不）幸运的是，java API（为了向后兼容）总是调用[SecurityManager](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html)。就我而言，[SecurityManager](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html)根本没有特权。因为它实际上是在进行特权调用的查询和[AccessController](http://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html)之间的调用堆栈上，所以最终的权限是无的：

```
+-----------------+-------------------+-----------------------+
|    Callstack    | Class permissions | Permissions in effect |
+-----------------+-------------------+-----------------------+
| SecurityManager | {}                | {}                    |
| Query           | {Read}            | {Read}                |
| Other           | {}                | {}                    |
+-----------------+-------------------+-----------------------+ 
```

### **解决方案**

解决方案是为[SecurityManager](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html)提供一组基本权限。结果，授予 Query 的权限确实是所需的权限：

```
+-----------------+---------------------+-----------------------+
|    Callstack    |  Class permissions  | Permissions in effect |
+-----------------+---------------------+-----------------------+
| SecurityManager | {Read,Write,Delete} | {Read}                |
| Query           | {Read}              | {Read}                |
| Other           | {}                  | {}                    |
+-----------------+---------------------+-----------------------+ 
```

呸！那真是满口！希望这对那里的人有用:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T18:40:35.197

我认为这里的问题在于您如何`ProtectionDomain`提供`SecurityManager`.

如果你想自己加载类，并且能够使用 SM，你应该扩展[SecureClassLoader](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/SecureClassLoader.html)。此类提供带有模板的方法：

```
protected Class defineClass(String name, byte[] b, int off, int len, CodeSource cs) 
```

您应该在其中为您的班级提供一个`CodeSource`。然后是另一种方法：

```
 protected  PermissionCollection getPermissions(CodeSource codesource) 
```

它将返回`PermissionCollection`给定[CodeSource](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/CodeSource.html)的类。这就是您应该为动态加载的类实现动态权限的方式。

# php - 如何获得可用的 mime 类型的 blob 数据？

> ID：13819381
> 
> 赞同：1
> 
> 时间：2012-12-11T11:27:05.010
> 
> 标签：php, mysql, blob

我有一个 MySQL 表，其中一些数据 blob 数据存储在一个单元格中。

我试图回应它。

但我不知道该数据的 MIME 类型。如何从给定的 blob 数据中确定 mime 类型？

我尝试了这段代码，但不知道 blob 的 mime 类型：

```
<?php

    mysql_connect("localhost","root","");
    mysql_select_db("contents");
    $sql="SELECT * FROM `contents` limit 1";
    $result=mysql_query($sql);
    $row=mysql_fetch_assoc($result);
    echo $row['html']

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T12:05:24.363

您必须在数据库中添加带有插入“blob”的mime，如果您强制，您可以选择这种方式：

```
if (!function_exists('mime_content_type ')) {
    function mime_content_type($filename) {
        $finfo    = finfo_open(FILEINFO_MIME);
        $mimetype = finfo_file($finfo, $filename);
        finfo_close($finfo);
        return $mimetype;
    }
}

$filename = tempnam('/tmp', 'cre');
$fp = fopen($filename, 'w'); 
fwrite($fp, $row['html']);
fclose($fp); 

$ctype = mime_content_type($filename) ;

header("Content-Type: $ctype");
header("Content-Disposition: attachment; filename=\"".'samename'."\";" );
header("Content-Transfer-Encoding: binary");
header("Content-Length: ".filesize($filename)); 
unlink($filename);
echo $row['html']; 
```

这种方式不好，因为有很多用法，但是可以的。我为您提供更新表并添加 mime 类型并按顶级代码编辑所有记录...

你有第二种方法和使用：

```
 header("Content-type: application/force-download"); 
```

这是强制下载标头，可以将文件保存在用户的 PC 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:31:56.843

您应该在插入时将 MIME 类型作为单独的列存储在数据库中。

缺少这个，你可以尝试猜测它，模块[MIME_Type](http://pear.php.net/package/MIME_Type)可能会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-02T15:55:50.403

这是一个老问题，但它是搜索结果中的第一个问题

要获取二进制字符串的 mime 类型，您可以使用 finfo_buffer（或 finfo 类）[http://php.net/manual/fr/function.finfo-buffer.php](http://php.net/manual/fr/function.finfo-buffer.php)

```
// Object oriented style
$finfo = new finfo(FILEINFO_MIME_TYPE);
$mime = $finfo->buffer($buffer);

// Procedural style
$finfo = finfo_open(FILEINFO_MIME);
$mime = finfo_buffer($finfo, $buffer) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T11:55:59.423

这样做会产生巨大的开销。您应该按照其他用户的建议在插入时存储 MIME 类型。

不要使用从表单上传接收到的 MIME 类型，因为这是不可信的（它很容易被客户端伪造），而是在文件上传后自己计算。

如果您已经有一个充满 BLOB 文件且没有 MIME 类型的表，但您知道您需要定期引用这些文件，我建议您添加 MIME 列并编写一个脚本，通过循环使用所有值填充 MIME 字段通过现有记录并添加它。

因此，请参考 MIME 字段的类型，而不是将所有 BLOB 加载到内存中来解析 MIME 类型。

# blackberry-cascades - How to use TabbedPane onClick in blackberry 10 cascades?

> ID：13819382
> 
> 赞同：0
> 
> 时间：2012-12-11T11:27:05.970
> 
> 标签：blackberry-cascades

I have a problem while opening the layout2 from layout1\.

Here is what i have tried..! It is not getting in to the layout2 from layout1\.

```
 `TabbedPane {
        showTabsOnActionBar: true 
                Tab {
                   Page {`

                          ImageButton {
                       id: loginbtn
                       onClicked: {

                            tabbedPaneSheet.open()
                       }

                       attachedObjects: Sheet {
                                   id: tabbedPaneSheet
                                   Editnew{
                                   }
                           } 
```

and my Editnew Qml code

```
 `TabbedPane {
                         id: mainTab
                   showTabsOnActionBar: true 
                        Tab {
                         title: "Home"
                              Group1 {
                                  id: homepage
                                   }
                                              }
                          Tab {
                            title: "Message
                              Messages {

    }
}

Tab {
    title: "Search"
            Search{
    }
}
Tab {
    title: "Feeds"

    Feeds {

    }
}

Tab {
    title: "Nearby"

    Nearby{
    }
}
Tab {
    title: "Followers"

    Followers {
        id: foll
    }
}
Tab {
    title: "Group"

    Groups {
        id: groups
    }
}` 
```

The above code is not working and it is also throwing me no errors.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:07:59.857

我遇到了同样的问题。这是因为您从另一个点击的窗格中打开了一个选项卡式窗格。

尝试制作一个简单的页面并包含许多段，它会适合您。

# java - How to make an application work for only 3 days

> ID：13819383
> 
> 赞同：5
> 
> 时间：2012-12-11T11:27:07.637
> 
> 标签：java, android

I am installing this application on the said tablet and I intend to supply this tablet to my client for a day or two, what I want is:

After checking the operations, the client should not be able to use the said application after the expiry date. for this I am calling the calander function and comparing the extracted system date (Day) with a day I want the application to close operation. I am using the following code:

```
 public void expire(){
    Calendar c = Calendar.getInstance();

    int sDate = c.get(Calendar.YEAR);
    int sMonth = c.get(Calendar.MONTH)+1;
    int sDay = c.get(Calendar.DAY_OF_MONTH); 
    int sHour =  c.get(Calendar.HOUR_OF_DAY);
    int sMin = c.get(Calendar.MINUTE);

    Toast.makeText(getApplicationContext(), ""+sDate+sMonth+sDay+"Hour is"+sHour, Toast.LENGTH_LONG).show();

    if (sDay >=11){
        System.exit(0);
    }

} 
```

I call expire(); on a button click to check, but all I get is a blank black screen for a few seconds and then the application works fine. Which I do not want.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:31:58.700

要退出活动，请调用[`finish()`](http://developer.android.com/reference/android/app/Activity.html#finish%28%29).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:36:49.090

打电话`finish()`而不是`System.exit(0);`检查月也因为您的客户也将在下个月的前十天使用该应用程序：P：P：P

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:31:53.710

在我调用 expire(); 之后，使用 finish() 似乎正在模拟器上工作；从 onCreate 而不是 on 按钮单击。然而，在真实设备上使用 System.exit(0) 确实有帮助，而 finish() 则没有。

System.exit()（在纯 Java 和核心 Java 中）可用于在程序退出之前运行关闭挂钩。这是在较大程序中处理关闭的一种便捷方法，其中程序的所有部分都不能（也不应该）相互了解。然后，如果有人想退出，他可以简单地调用 System.exit()，然后关闭挂钩（如果设置正确）负责执行所有必要的关闭仪式，例如关闭文件、释放资源。

而在完成（）的情况下，调用完成（）的方法将运行到完成。在您将控制权返回给 Android 之前，finish() 操作甚至不会开始。

# java - A improved StringBuffer - Java.Lang

> ID：13819387
> 
> 赞同：1
> 
> 时间：2012-12-11T11:27:22.640
> 
> 标签：java, stringbuffer

I wanted to create my own StringBuffer which has 2-3 more methods added to the java.lang.StringBuffer. Since the original class is final I cannot extend that class.

Now, If I copy paste the class into my own class, then it says 'AbstractStringBuilder is not visible' error.

How to extend this class in my own namespace (say com.util).

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T11:30:25.003

我会使用[StringBuilder 而不是 StringBuffer](http://javahowto.blogspot.com/2006/08/stringbuilder-vs-stringbuffer.html)。

不幸的是，您无法实现表示的接口`StringBuilder`（除非[Appendable](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Appendable.html)适合？）。您是否尝试过创建一个`EnhancedStringBuilder`包含您`StringBuilder`作为成员的类。然后，您可以将大多数（全部？）调用委托给它，并提供您自己的调用。

另一种方法是简单地[获取 StringBuilder 的 OpenJDK 源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/StringBuilder.java)并重新打包和增强它。我认为许可将允许这样做，但我不熟悉您的情况，您应该检查一下。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-11T11:31:11.257

我个人会为此使用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)- 一个包装原始 StringBuilder 的类，然后提供额外的方法以供适当使用。

如果您只想添加更多方法，您可能还想看看使用等效的静态方法来完成这项工作。

（正如其他人所提到的，StringBuilder 是比 StringBuffer 更好、更有效的选择，除非你真的需要后者提供的线程安全。）

简单地复制和粘贴代码不是一个好主意，您可能会违反许可法并复制功能（即使该功能在原始 API 中。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-11T11:29:46.140

撇开潜在的许可问题不谈，我不建议仅仅为了添加几个方法而复制和粘贴源代码。相反，我建议制作这些方法`static`并将它们放入一个辅助类（调用它`StringBuilderUtils`或类似的东西）。

这些方法将采用 or 的实例`StringBuilder`（`StringBuffer`或者即使[`Appendable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Appendable.html)您可以根据 来实现您的功能`Appendable`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T11:31:48.887

您也可以复制 AbstractStringBuilder 。但我不知道那个的依赖关系。我的建议是为 StringBuilder 创建一个 Wrapper 类，并将其封装。

不用担心性能，使用 StringBuilderWrapper 可以很容易地将委托调用内联到类中。

# android - Is Intent responsible for launching MainActivity of he application?

> ID：13819388
> 
> 赞同：2
> 
> 时间：2012-12-11T11:27:21.773
> 
> 标签：android, android-intent

If Activity manager launches the MainActivity through `intent-filter` with `action=main`, and `category=launcher`, then which type of intent is used?

I'm confused little bit. Is it implicit intent?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:00:14.933

意图是对要执行的操作的抽象描述。它最重要的用途是启动活动。

当用户单击应用程序图标时，android 系统会在清单文件中查找意图

`action="android.intent.action.MAIN"`

和

`category="android.intent.category.LAUNCHER".`

**MAIN 动作**是应用程序的主要入口点。

**LAUNCHER 类别**意味着它应该作为顶级应用程序出现在 Launcher 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:36:00.400

Intent 只是关于**意图**的一条信息。意图**不**启动任何东西。它只是通知操作系统需要做某事（即启动应用程序）。系统寻找能够解决此意图的应用程序，启动它们并将其传递给它们的起始意图（因为您可以在其中传递部分数据）。

当用户单击启动器中的应用程序图标时，启动器应用程序会生成并向操作系统感应意图（具有要启动的所需应用程序的显式名称）。Android 创建单独的 DVM，主 Activity 类，通过调用 onCreate() 启动 acriivity 的生命周期并将 Activity 带到前台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T07:31:15.280

当用户从主屏幕选择您的应用程序图标时，系统会为您已声明为“启动器”（或“主”）活动的应用程序中的 Activity 调用**onCreate()**方法。这是作为应用程序用户界面主要入口点的活动。

**您可以在 Android 清单文件AndroidManifest.xml**中定义将哪个活动用作主要活动，该文件位于项目目录的根目录中。

您的应用程序的主要活动必须在清单中声明，并使用包含**MAIN**操作和 LAUNCHER 类别的*意图过滤器（您可能知道）。*

 **如果组件没有任何意图过滤器，则它只能接收显式意图。带有过滤器的组件可以接收显式和隐式意图。

因此，愿意接收隐式意图的活动必须在其意图过滤器中包含**“android.intent.category.DEFAULT” 。****具有“android.intent.action.MAIN”**和**“android.intent.category.LAUNCHER”**设置的过滤器是例外。它们标记开始新任务并在启动器屏幕上显示的活动。它们可以在类别列表中包含“android.intent.category.DEFAULT”，但不是必须的。

有关更多详细信息，请参阅此链接：http: [//developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)**

# html - Why doesn't word-wrap work properly in CSS3?

> ID：13819390
> 
> 赞同：49
> 
> 时间：2012-12-11T11:27:35.103
> 
> 标签：html, css, string, word-wrap

Why doesn't word wrap property work properly in the example below?

[http://jsfiddle.net/k5VET/739/](http://jsfiddle.net/k5VET/739/)

What can I do to ensure that part of the word 'consectetur' fits in the first line itself? I want maximum number of characters to fit in each line.

The css is :

```
#fos { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size:14px;
    font-weight: normal;
    line-height: 18px;
    width: 238px;
    height:38px;
    cursor: pointer;
    word-wrap:break-word;
    border:2px solid; } 
```

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2015-03-02T12:36:01.433

如果`word-wrap: break-all`不起作用，请尝试添加以下内容：

```
white-space:normal; 
```

使用 Bootstrap 3 中的 .btn 类为我工作

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-12-11T11:33:01.350

利用`word-break: break-all;`

```
#fos { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size:14px;
    font-weight: normal;
    line-height: 18px;
    width: 238px;
    height:38px;
    cursor: pointer;
word-break: break-all;
    border:2px solid; } 
```

[**现场演示**](http://jsfiddle.net/k5VET/744/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-09-27T19:28:20.810

好的，所以我知道这是一个老问题，但我认真地认为，何时使用哪个属性可能会有一些有用的说明。看看现有的答案，我觉得他们提供了没有解释的解决方案，所以这是我试图帮助解决的问题。对于上下文，默认情况下，容器不会尝试拆分单个长单词，因为它希望将单词保留为原始形式。

话虽如此，分解**单词**的 3 种主要方法是[`overflow-wrap`](https://developer.mozilla.org/en-US/docs/Web/CSS/overflow-wrap)、[`word-break`](https://developer.mozilla.org/en-US/docs/Web/CSS/word-break)和[`hypens`](https://developer.mozilla.org/en-US/docs/Web/CSS/hyphens)。不过，我不会深入研究炒作。

所以先下手。**我看到`word-wrap`问题中正在使用但阅读文档，该文档已被弃用，并且一些浏览器已决定将其简单地别名为`overflow-wrap`. 可能最好不要使用它。**

这两个属性之间的区别在文档中非常清楚，但为了清楚起见，`overflow-wrap`实际上只有两个可能的值，并且会检测单词是否溢出。如果是这样，默认情况下它会将整个单词移动到下一行。如果`break-word`设置，它只会在整个单词不能放在该行上时分解单词。

```
#fos { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size:14px;
    font-weight: normal;
    line-height: 18px;
    width: 238px;
    height:38px;
    cursor: pointer;
    overflow-wrap: break-word;
    border:2px solid; }
#sp { }
```

```
<div id="fos">
<span id="sp">The longest word ever: pneumonoultramicroscopicsilicovolcanoconiosis and then some.</span>  
</div>
```

您可以看到 pneumonoul... long 单词在它尝试分隔长单词后在下一行所需的位置完全中断。

现在相比之下，我们有`word-break`. 这具有更精细的属性，实际上也有一个`break-word`选项。这与上面的代码片段是同义的，所以我认为何时使用其中一个非常简单。

但是，`word-break`它还提供了一个`break-all`值，该值将尽可能地打破单词以适应最初预期的单词。它不会试图弄清楚它是否需要将单词放在新行上——它只是将换行符推到它溢出的地方。这里与上面最大的区别是我们使用的长词现在仍然在顶部。

```
#fos { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size:14px;
    font-weight: normal;
    line-height: 18px;
    width: 238px;
    height:38px;
    cursor: pointer;
    word-break: break-all;
    border:2px solid; }
#sp { }
```

```
<div id="fos">
<span id="sp">The longest word ever: pneumonoultramicroscopicsilicovolcanoconiosis and then some.</span>  
</div>
```

然后终于for`hyphens`有自己特殊的分手方式了。有关更多信息，请查看[文档](https://developer.mozilla.org/en-US/docs/Web/CSS/hyphens#Values)。还值得注意的是，不同的语言有不同的分解词的方式，但幸运的是`hyphens`属性挂钩到`lang`属性并理解​​该做什么。

人们建议的另一个选择是使用[`white-space`](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)试图通过**空格分隔**文本的属性。在我使用的示例中，这对我们的情况没有帮助，因为单词本身比容器长。我认为关于这个 CSS 属性需要注意的重要一点是，它不会尝试分解单词本身，而是尝试在适当的时候通过空格来实现。

```
#fos { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size:14px;
    font-weight: normal;
    line-height: 18px;
    width: 238px;
    height:38px;
    cursor: pointer;
    white-space: normal;
    border:2px solid; }
#sp { }
```

```
<div id="fos">
<span id="sp">The longest word ever: pneumonoultramicroscopicsilicovolcanoconiosis and then some.</span>  
</div>
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-20T14:57:52.227

这对于将文本包装在一行中很有用：

```
#fos {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 100%;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-07T08:54:55.370

它没有正确换行，因为默认情况下浏览器不应用自动断字（这将是导致*正确*换行的方式）。您需要使用 CSS 断字或基于 JavaScipt 的断字。根据定义，设置`word-wrap:break-word`和*会破坏*单词（在任意点将它们拆分为片段 s），而不是正确的包装。`word-break: break-all`

 ** * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-31T13:09:46.873

因为 css 自动换行不适用于所有浏览器，所以请改用 JavaScript！它应该给出相同的结果。

下面的函数需要 JQuery，它会在每次调整窗口大小时运行。

该函数检查元素是否比其父元素具有更大的宽度，如果有，它会破坏所有而不是只破坏单词。我们不希望孩子长得比父母大，对吧？

我只需要它用于表格，所以如果你想在其他元素中使用它，只需将“table”更改为“#yourId”或“.yourClass”。确保有一个父div或将“div”更改为“body”或其他什么？

如果它会转到 else，它会更改为 word-break，然后检查它是否应该改回，这就是为什么有这么多代码.. :'/

```
$(window).on('resize',function() {
    $('table').each(function(){
        if($(this).width() > $(this).parent('div').width()){
            $(this).css('word-break', 'break-all');
        }
        else{
            $(this).css('word-break', 'break-word');
            if($(this).width() > $(this).parent('div').width()){
                $(this).css('word-break', 'break-all');
            }
        }
     });
}).trigger('resize'); 
```

我希望这个对你有用！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-12T02:55:25.387

打破我用过的长词`word-break: break-word;`。由于某种原因，它似乎已被弃用，但它是唯一对我有用的东西。我需要的是只打破那些太长且需要打破的词。*

# reference - CS0104: 'Scripts' is an ambiguous reference between 'System.Web.WebPages.Scripts' and 'System.Web.Optimization.Scripts'

> ID：13819392
> 
> 赞同：1
> 
> 时间：2012-12-11T11:27:43.160
> 
> 标签：reference, ambiguous

My project is on MVC 4\. In it I can't access any of scripts function like @Scripts.Render("~/bundles/modernizr") as Scripts is an ambigious reference between 'System.Web.WebPages.Scripts' and 'System.Web.Optimization.Scripts'

I have following entries in my webconfig :

```
<pages>
      <namespaces>
        <add namespace="System.Web.Helpers"/>
        <add namespace="System.Web.Mvc"/>
        <add namespace="System.Web.Mvc.Ajax"/>
        <add namespace="System.Web.Mvc.Html"/>
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing"/>
        <add namespace="System.Web.WebPages"/>
        <add namespace="Product360"/>
      </namespaces>
    </pages> 
```

I updated System.web.optimization from package manager console, still it's showing me same error.

I can't figure out why it's intellisensing in System.web.WebPages instead of System.web.optimization.

Anyone has any updates on this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:55:51.727

您使用 WebMaxtrix / Web Pages 还是仅使用 ASP.NET MVC？如果你只使用 MVC 摆脱这一行

```
<add namespace="System.Web.WebPages"/> 
```

你不应该再有冲突了。

**注意**：您可能需要重新启动 Visual Studio，以便在修改后在 cshtml 文件中正确处理命名空间。

# xcode - Xcode: Library is not build for x86_64 valid architecture

> ID：13819404
> 
> 赞同：1
> 
> 时间：2012-12-11T11:28:30.123
> 
> 标签：xcode, x86-64, 32-bit, i386

Please help me with issue I break my neck with..

I work with `Xcode 4.5.*` and I try to build a library with Build Settings:
Architectures: *32-bit Intel*
Valid Architectures: *i386 & x86_64*

But after checking the library details with lipo command I see that the actual library is built only for i386

Now I know this **works** in `Xcode <=4.3` - the library is built for both architectures

Thanks Roman

# php - in_array 未按预期工作

> ID：13819407
> 
> 赞同：0
> 
> 时间：2012-12-11T11:28:36.480
> 
> 标签：php

我试图防止在最终数组中出现重复。我正在尝试检查`$media_candidate`对象列表中的重复项并编译它们：

```
$iterator = 0;

// ensure items in final array are unique
while ((count($final_array) < $numResults) && ($iterator < count($media_data))) {
    $media_candidate = $media_data[$iterator++];

    if(!in_array($media_candidate['id'], $final_array)){
         $final_array[] = $media_candidate;
    }
} 
```

正如您在[打印出来](http://pastebin.com/mPCQQ3Aa)的`$final_array`最后三个元素中看到的那样，id, 出现了 3 次`343050519221992426_18478933`。关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:30:29.230

尝试：

```
if(!in_array($media_candidate['id'], $final_array)){
    $final_array[] = $media_candidate['id'];
} 
```

随着`$final_array[]`您在数组末尾添加新元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T11:30:33.350

首先：你不会截断最终的数组，这样所有的双峰都会在最后结束。

第二：您正在重新发明轮子：继续阅读`array_unique()`

**编辑**

第三：编辑后，有一个更简单的方法：

```
$final_array=array(); 
foreach($media_data as $m) $final_array[$m['id']]=$m;
//You might want the next line or not
$final_array=array_values($final_array); 
```

本质上，您将唯一性外包给数组的哈希键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T11:30:18.543

您正在检查但`$media_candidate['id']`插入`$media_candidate``$final_array`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T11:42:50.313

尝试这样的array_unique函数

$final_array = array_unique($media_candidate);

# mysql - MySQL：更改每个选定行的用户变量

> ID：13819420
> 
> 赞同：1
> 
> 时间：2012-12-11T11:29:19.137
> 
> 标签：mysql, sql, user-variables

我正在尝试选择 MySQL 数据库中约会之间的前十个空时隙。

约会表基本上有 3 个字段：约会_id INT、startDateTime DATETIME 和 endDateTime DATETIME。

我们可以想象一些这样的数据（为简单起见，我将日期部分排除在日期时间之外，因此让我们考虑这些时间是在同一天）。数据也按 startDateTime 排序：

```
4 | 09:15:00 | 09:30:00
5 | 09:30:00 | 09:45:00
8 | 10:00:00 | 10:15:00
3 | 10:30:00 | 10:45:00
7 | 10:45:00 | 11:00:00
2 | 11:00:00 | 11:15:00
1 | 11:30:00 | 12:00:00 
```

所以我的目标是提取：

```
00:00:00 | 09:15:00
09:45:00 | 10:00:00
10:15:00 | 10:30:00
11:15:00 | 11:30:00 
```

最终这样做：

```
SET @myStart = '2012-10-01 09:15:00';
SET @myEnd = NULL;
SET @prevEnd = NULL;
SELECT a.endDateTime, b.startDateTime, @myStart := a.endDateTime
FROM appointment a, appointment b, (
    SELECT @myEnd := min(c.startDateTime) 
    FROM appointment c 
    WHERE c.startDateTime >= @myStart
    ORDER BY startDateTime ASC
) as var , 
(SELECT @prevEnd := NULL) v
WHERE a.appointment_id = (
    SELECT appointment_id 
    FROM (
        SELECT appointment_id, max(endDateTime), @prevEnd := endDateTime 
        FROM appointment d
        WHERE (@prevEnd IS NULL OR @prevEnd = d.startDateTime) 
            AND d.startDateTime >= @myEnd
    ) as z
) 
    AND b.startDateTime > a.endDateTime 
ORDER BY b.startDateTime ASC LIMIT 0,10; 
```

这不会返回任何结果。我猜这是因为我的用户定义变量的初始化不正确（刚刚发现它们，我可能完全错误地使用它们）。

如果我只运行第一个子查询，其目标是在@myStart 之后的第一次约会时初始化@myEnd，我可以看到它实际上返回 09:15:00。

第二个子查询`(SELECT @prevEnd := NULL) v`旨在每次在主查询中选择一行时将 @prevEnd 设置回 NULL。我不太确定它是否像那样工作......

最后一个子查询的意思是，从一个空的@prevEnd 和一个初始化的@myEnd 开始，用来选择之后有间隔的约会。如果与查询的其余部分分开，我可以验证它是否也有效。

您对我可以做些什么来修复查询，我可以/应该如何做，或者它是否可能有任何建议？

首先十分感谢。

**编辑**：我已经像这样编辑它：

```
SELECT * 
    FROM (
        SELECT COALESCE( s1.endDateTime,  '0000-00-00 00:00:00' ) AS myStart, MIN( s2.startDateTime ) AS minSucc
        FROM appointment s1
        RIGHT JOIN appointment s2 ON s1.endDateTime < s2.startDateTime
            AND s1.radiologyroom_id = s2.radiologyroom_id
        WHERE s1.startDateTime >=  '2012-10-01 00:00:00'
            AND s1.radiologyroom_id =174
            AND s1.endDateTime <  '2013-01-01 00:00:00'
        GROUP BY myStart
        ORDER BY s1.startDateTime
    )s
WHERE NOT 
    EXISTS (
        SELECT NULL 
        FROM appointment
        WHERE startDateTime >= myStart
            AND endDateTime <= minSucc
            AND radiologyroom_id =174
        ORDER BY startDateTime
    ) 
```

它在 14.6 秒内从 6530 条记录中检索出 369 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:47:44.100

如果 之间没有差距`ids`，并且`id`一直在增加，你可以使用这个：

```
SELECT coalesce(s1.endDateTime, '0000-00-00 00:00:00'), s2.startDateTime
FROM
  slots s1 right join slots s2
  on s1.appointment_id=s2.appointment_id-1
WHERE coalesce(s1.endDateTime, '0000-00-00 00:00:00')<s2.startDateTime
LIMIT 10 
```

**编辑：**你也可以试试这个：

```
SELECT * FROM
  (SELECT
     coalesce(s1.endDateTime, '0000-00-00 00:00:00') as start,
     min(s2.startDateTime) minSucc
   from slots s1 right join slots s2
        on s1.endDateTime<s2.startDateTime
   group by start) s
WHERE
  not exists (select null
              from slots
              where startDateTime>=start
              and endDateTime<=minSucc) 
```

**EDIT2：**我承认我对带变量的查询不太实用，但这看起来可以工作：

```
select d1, d2 from (
  select
    @previous_end as d1,
    s.startDateTime as d2,
    @previous_end:=s.endDateTime
  from (select startDateTime, endDateTime from slots order by startDateTime) s,
       (select @previous_end := '0000-00-00 00:00:00') t) s
where d1<d2 
```

# android - 在 Android 中从 XML 生成扭曲的布局

> ID：13819421
> 
> 赞同：0
> 
> 时间：2012-12-11T11:29:22.817
> 
> 标签：android, android-layout

我在我的一个应用程序中使用此布局。不知道为什么会变形。主要问题是在所有三个`LinearLayout`块中，只有第一个`TextView`显示在屏幕上，而代替`TextViews`后面的，显示了一个大的空白区域。

正在显示的图像的快照是[Snapshot](http://i47.tinypic.com/eev11.png) ...

**布局.xml**

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5sp" >

    <LinearLayout
        android:id="@+id/ll_images"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:orientation="vertical"
        android:padding="10sp" >

        <ImageView
            android:id="@+id/certification_image"
            android:layout_width="100sp"
            android:layout_height="wrap_content"
            android:contentDescription="@string/details_image"
            android:visibility="gone" />

        <ImageView
            android:id="@+id/image_details_page"
            android:layout_width="100sp"
            android:layout_height="100sp"
            android:contentDescription="@string/details_image" />
    </LinearLayout>

    <TextView
        android:id="@+id/details_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@id/ll_images"
        android:padding="10sp"
        android:textColor="#040404"
        android:textSize="25sp"
        android:textStyle="bold"
        android:typeface="sans" />

    <TextView
        android:id="@+id/details_tv1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/details_name"
        android:layout_toLeftOf="@id/ll_images"
        android:paddingLeft="5sp"
        android:textColor="#343434"
        android:textSize="15sp"
        android:typeface="sans" />

    <LinearLayout
        android:id="@+id/ll_facts"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/ll_images">

        <TextView
            android:id="@+id/tv_facts"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/gradient_bg"
            android:padding="10sp"
            android:text="Facts"
            android:textColor="@android:color/darker_gray"
            android:textSize="18sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/details_tv2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="5sp"
            android:textSize="15sp"
            android:text="@string/test" />

        <TextView
            android:id="@+id/details_tv3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="5sp"
            android:text="@string/test"
            android:textSize="15sp" />

        <TextView
            android:id="@+id/details_tv4"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="5sp"
            android:text="@string/test"
            android:textSize="15sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll_foundation"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/ll_facts">

        <TextView
            android:id="@+id/tv_foundation"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/gradient_bg"
            android:padding="10sp"
            android:text="Foundation Statement"
            android:textColor="@android:color/darker_gray"
            android:textSize="18sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/details_tv5"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:paddingLeft="5sp"
            android:textColor="#343434"
            android:text="@string/test"
            android:textSize="15sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ll_overview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/ll_foundation">

        <TextView
            android:id="@+id/tv_overview"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/gradient_bg"
            android:padding="10sp"
            android:text="Overview"
            android:textColor="@android:color/darker_gray"
            android:textSize="18sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/details_tv6"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/test"
            android:paddingLeft="5sp"
            android:textColor="#343434"
            android:textSize="15sp" />
    </LinearLayout>

    <Button
        android:id="@+id/btnViewScorecard"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/ll_overview"
        android:layout_margin="5sp"
        android:background="@drawable/search_button"
        android:paddingLeft="10sp"
        android:text="@string/ViewScorecard"
        android:textColor="#FFFFFF"
        android:typeface="sans" 
        android:visibility="gone"/>
</RelativeLayout> 
```

任何帮助将非常感激。提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:35:49.870

你忘记了 `xmlns:android="http://schemas.android.com/apk/res/android"`

只需更改
`<RelativeLayout`
为
`<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:40:56.543

最后我想通了......我所要做的就是将以下行添加到我的`LinearLayout`.

```
android:orientation="vertical" 
```

谢谢大家的帮助...

# iphone - 如何在 iPhone 应用中播放闹钟音乐？

> ID：13819423
> 
> 赞同：1
> 
> 时间：2012-12-11T11:29:25.973
> 
> 标签：iphone, objective-c, ios, uilocalnotification

嗨，我正在使用闹钟应用程序，并设置`LocalNotifications`闹钟音乐之类的铃声。我完美地播放铃声。但问题是在 AlertView 中单击“确定”按钮后，铃声正在播放。我怎样才能玩立即接收`LocalNotification`。

我正在使用以下代码播放铃声：

```
-(void)application:(UIApplication *)application 
didReceiveLocalNotification:(UILocalNotification *)notification 

{

      application.applicationIconBadgeNumber = 0;

      NSString *reminderText = [notification.userInfo objectForKey:kRemindMeNotificationDataKey];

      NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/Mitwa.mp3", [[NSBundle mainBundle] resourcePath]]];

      NSError *error;
      player = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
      player.numberOfLoops = -1;

      if (player == nil)
        NSLog([error description]);
      else
        [player play];

      [viewController showReminder:@"Good Evening Mahesh!"];

  } 
```

请帮我在收到通知后播放警报。

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:32:49.527

你不能这样做，你只能设置[`soundName`](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009565-CH1-SW8)on [`UILocalNotification`](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)。

如文档中所述：

> 对于此属性，指定应用程序主包中声音资源的文件名（包括扩展名）或 UILocalNotificationDefaultSoundName 以请求默认系统声音。当系统显示本地通知的警报或标记应用程序图标时，它会播放此声音。默认值为 nil（无声音）。不支持持续时间超过 30 秒的声音。如果您指定的文件的声音播放时间超过 30 秒，则会播放默认声音。

此外，该文件必须在 App 包中，因此在您构建应用程序时它必须存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:50:01.743

使用`UILocalNotification`我们可以设置警报，`UILocalNotification` 您可以设置声音，但声音应该只有 30 秒。您不能播放超过 30 秒的本地通知声音。如果您在单击警报后想要歌曲，我们可以在您的应用中播放歌曲。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T11:57:24.180

首先将`.mp3`文件包含`wav`到您的 xcode 项目或资源中，然后在声明警报设置的方法中，使用`UILocalNotification`.

```
UILocalNotification *localNotif = [[UILocalNotification alloc] init];
localNotif.soundName = yourSoundName; 
```

# php - Mail() php 直接在邮件中发送代码

> ID：13819424
> 
> 赞同：-1
> 
> 时间：2012-12-11T11:29:27.000
> 
> 标签：php, html, email

> **可能重复：**
> [Php 邮件：如何发送 html？](https://stackoverflow.com/questions/4897215/php-mail-how-to-send-html)

我的mail() 用php 工作了我的emailmessage =

```
$email_bericht .= "
        <table border='0' width='40%'>
            <tr>
                  <td>Bedrijfsnaam</td>
                  <td>
                  ".$naam."
                  </td>
            </tr>
            <tr>
                  <td>Risicoadres</td>
                  <td>
                  ".$risicoadres."
                  </td>
            </tr>
            <tr>
                  <td>Adres</td>
                  <td>
                  ".$adres."
                  </td>
            </tr>
            <tr>
                  <td>Woonplaats</td>
                  <td>
                  ".$woonplaats."
                  </td>
            </tr>
            <tr>
                  <td>Relatienummer</td>
                  <td>
                  ".$relatienummer."
                  </td>
            </tr>
            <tr>
                  <td>Aanhef</td>
                  <td>
                  ".$aanhef."
                  </td>
            </tr>
            <tr>
                  <td>Contactpersoon</td>
                  <td>
                  ".$contactpersoon."
                  </td>
            </tr>
            <tr>
                  <td>mailadres</td>
                  <td>
                  ".$emailadres."
                  </td>
            </tr>
                  <td>Jaar</td>
                  <td>
                  ".$jaar."
                  </td>
            </tr>
        </table>"; 
```

在电子邮件中显示：

```
 <table border='0' width='40%'>
            <tr>
                  <td>Bedrijfsnaam</td>
                  <td>
                  Bob
                  </td>
            </tr>
            <tr>
                  <td>Risicoadres</td>
                  <td>
                  Bobstreet 12
                  </td>
            </tr>
            <tr>
                  <td>Adres</td>
                  <td>
                  Bobstreet 12
                  </td>
            </tr>
            <tr>
                  <td>Woonplaats</td>
                  <td>
                  England
                  </td>
            </tr>
            <tr>
                  <td>Relatienummer</td>
                  <td>
                  123456
                  </td>
            </tr>
            <tr>
                  <td>Aanhef</td>
                  <td>
                  Dear guy
                  </td>
            </tr>
            <tr>
                  <td>Contactpersoon</td>
                  <td>
                  Bob
                  </td>
            </tr>
            <tr>
                  <td>mailadres</td>
                  <td>
                  BOB@bobbv.nl
                  </td>
            </tr>
                  <td>Jaar</td>
                  <td>
                  2028
                  </td>
            </tr>
        </table>"; 
```

我的邮件（）=

```
mail($email_naar, $email_onderwerp, $email_bericht);
mail($emailadres, $email_onderwerp, $email_bericht); 
```

它显示了已发送到电子邮件地址的邮件中的所有 table/tr's/td's 等以任何方式解决此问题我需要使用 html 标签或其他什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:32:40.040

如果发送没有标题信息的邮件，它将把 table,tr,td 作为字符串你需要包含

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: '. $sendermail . "\r\n";
mail($to, $subject, $message, $headers) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:33:43.443

你需要设置

```
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

接着：

```
mail($email_naar, $email_onderwerp, $email_bericht, $headers); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T11:33:49.463

您需要将标题添加到您的 mail() 调用（第四个参数）专门用于您需要的目的（使用相关字符集） `'Content-type: text/html; charset=iso-8859-1'`；

请参阅[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)以了解有关在电子邮件中发送标头的更多信息。您将需要其中一些，例如“回复”和其他一些

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T11:34:23.783

我认为`mail()`功能以纯文本形式发送邮件，其中不会呈现 HTML 部分。

这是发送 HTML 电子邮件的示例程序。（从 php.net 复制和粘贴）

```
<?php
// multiple recipients
$to  = 'aidan@example.com' . ', '; // note the comma
$to .= 'wez@example.com';

// subject
$subject = 'Birthday Reminders for August';

// message
$message = '
<html>
<head>
  <title>Birthday Reminders for August</title>
</head>
<body>
  <p>Here are the birthdays upcoming in August!</p>
  <table>
    <tr>
      <th>Person</th><th>Day</th><th>Month</th><th>Year</th>
    </tr>
    <tr>
      <td>Joe</td><td>3rd</td><td>August</td><td>1970</td>
    </tr>
    <tr>
      <td>Sally</td><td>17th</td><td>August</td><td>1973</td>
    </tr>
  </table>
</body>
</html>
';

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers);
?> 
```

代码来源来自[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

# android - 如何知道 Spinner 是否显示或不再显示

> ID：13819425
> 
> 赞同：1
> 
> 时间：2012-12-11T11:29:27.207
> 
> 标签：android, spinner

是否有一个回调/方法可以用来判断是否显示了 Spinner？是否有一个回调/方法可以用来判断 Spinner 何时不再显示？

setOnItemSelectedListener/onItemSelected is called when an item from the list is selected - but is there any method/callback when the list is removed because the user touches outside the list?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T15:48:22.850

我希望能够确定微调器菜单何时显示，以及何时被关闭。经过大量搜索，没有很多好的解决方案。我能够通过执行以下操作来完成此任务：

1.  创建了一个自定义微调器类，并覆盖以下方法：

    ```
    @Override
    public boolean performClick() {
    this.isDropDownMenuShown = true; //Flag to indicate the spinner menu is shown
        return super.performClick();
    } 
    ```

2.  在我的 Activity 中，重写 onWindowFocusChanged(boolean hasFocus) 方法。如果 hasFocus == true && #1 中的标志设置为 true，则微调器已被关闭（可以通过选择或在微调器外部点击）。

    ```
    @Override
    public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    if (actionBarSpinner.isDropdownShown() && hasFocus) {
        actionBarSpinner.setDropdownShown(false);
        //Do you work here
    } 
    ```

    }

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:31:29.930

您可以通过创建自定义微调器来获得它，

创建布局后，您应该在布局中使用它，

// com.talha.examples 是包名

**mySpinner.java**

```
package com.talha.examples;

import android.content.Context;
import android.util.AttributeSet;
import android.view.View;
import android.widget.Spinner;
import android.widget.Toast;

public class mySpinner extends Spinner {
    Context context;

    public mySpinner(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.context = context;
    }

    @Override
    protected void onVisibilityChanged(View changedView, int visibility) {
        super.onVisibilityChanged(changedView, visibility);

        if(visibility == View.VISIBLE)
            Toast.makeText(this.context, "VISIBLE NOW", 1000).show();

        if(visibility == View.GONE)
            Toast.makeText(this.context, "HAS GONE", 1000).show();
    }
} 
```

**activity_main_spinner.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.talha.examples.mySpinner
        android:id="@+id/mySpinner"
        android:layout_width="fill_parent"
        android:layout_height="300dp"
        android:background="#ffffaa" >

    </com.talha.examples.mySpinner>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/mySpinner"
        android:text="Button" />

</RelativeLayout> 
```

**主要活动.java**

导入android.app.Activity；导入android.os.Bundle；导入android.view.View；导入 android.view.View.OnClickListener；导入android.widget.Button；

公共类 MainActivity 扩展 Activity { Button 按钮；com.talha.examples.mySpinner mySpinner；

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_spinner);

    mySpinner = (com.talha.examples.mySpinner) findViewById(R.id.mySpinner);
    button = (Button) findViewById(R.id.button1);

    button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (mySpinner.getVisibility() == View.VISIBLE) {
                mySpinner.setVisibility(View.GONE);
            } else {
                mySpinner.setVisibility(View.VISIBLE);
            }
        }
    });

} 
```

}

# asp.net-mvc-3 - 如何在 ASP.NET MVC 中为登录用户设置会话

> ID：13819426
> 
> 赞同：5
> 
> 时间：2012-12-11T11:29:34.210
> 
> 标签：asp.net-mvc-3, session, web-config, session-timeout

我想为`session time`闲着不做任何工作的用户设置。

在用户再次出现并继续工作的特定时间后，它应该重定向到登录页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T11:34:41.947

您需要会话超时。使用 ASP.NET MVC 有多种方法可以做到这一点。请查看这些教程并选择更适合您的方式：

*   [在 ASP.NET MVC 中处理会话和身份验证超时](http://markfreedman.com/index.php/2012/02/28/handling-session-and-authentication-timeouts-in-asp-net-mvc/)
*   [优雅地处理会话超时](http://www.fairwaytech.com/2012/01/handling-session-timeout-gracefully/)
*   [使用 ASP.Net MVC 动作过滤器检测会话超时](http://www.tyronedavisjr.com/2008/11/23/detecting-session-timeouts-using-a-aspnet-mvc-action-filter/)

# sql - SQL JOIN 将列组合到单个列

> ID：13819428
> 
> 赞同：2
> 
> 时间：2012-12-11T11:29:47.480
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2008-r2

我为 Microsoft SQL Server 2008 R2 编写了以下查询...

```
with 
downloads as
(
    select convert(varchar(10), timestamp, 112) as downloadDate, COUNT(*) as counter 
    from <download_table> 
    group by convert(varchar(10), timestamp,112)
),
uploads as 
(
    select CONVERT(varchar(10), dateadded, 112) as uploadDate, COUNT(*) as counter
    from <upload_table>
    group by CONVERT(varchar(10), dateadded, 112)
)
select 
    downloads.downloadDate, 
    uploads.uploadDate, 
    downloads.counter as dCount,
    uploads.counter as uCount
from downloads 
full join uploads on uploads.uploadDate = downloads.downloadDate
order by downloadDate desc; 
```

它返回下表...

```
downloadDate    uploadDate  dCount  uCount
20121211    NULL        40  NULL
20121210    NULL        238 NULL
20121207    20121207    526 4
20121206    20121206    217 12
20121205    NULL        108 NULL
20121204    20121204    190 13
20121203    NULL        141 NULL
20121130    20121130    248 187
20121129    NULL        134 NULL
20121128    NULL        102 NULL
20121127    20121127    494 57
20121126    NULL        153 NULL
20121119    20121119    319 20
20121118    NULL        4   NULL
20121116    20121116    215 16
20121112    20121112    431 144
20121109    20121109    168 48
20121108    20121108    132 181
NULL        20121125    NULL    3 
```

但是如果没有一些 NULL 条目，我无法将两个日期组合成一个“日期”列，也无法让 dCount 或 uCount 中的 NULL 值显示 0 而不是 NULL。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:34:37.307

根据您的 SQL 方言，类似`IFNULL()`, `NVL()`,`COALESCE()`等`IIF()`的内容将帮助您摆脱 NULL 以支持过去的日期，例如 '18000101'。

完成后，您可以使用`MAX()`、`SWITCH()`、`IIF()`或`IF()`朋友创建一个“最后使用日期”列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:38:16.123

在 SQL Serve,r 中，您可以[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)在返回第一个非空值的日期字段[`ISNULL`](http://msdn.microsoft.com/en-us/library/ms184325.aspx)周围和在总数周围使用以将`null`值替换为零：

```
with 
downloads as
(
    select convert(varchar(10), timestamp, 112) as downloadDate, COUNT(*) as counter 
    from download_table 
    group by convert(varchar(10), timestamp,112)
),
uploads as 
(
    select CONVERT(varchar(10), dateadded, 112) as uploadDate, COUNT(*) as counter
    from upload_table
    group by CONVERT(varchar(10), dateadded, 112)
)
select 
    coalesce(downloads.downloadDate, uploads.uploadDate) as dDate, 
    isnull(downloads.counter, 0) as dCount,
    isnull(uploads.counter, 0) as uCount
from downloads 
full join uploads 
  on uploads.uploadDate = downloads.downloadDate
order by downloadDate desc; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c4ef3/2)

结果：

```
|    DDATE | DCOUNT | UCOUNT |
------------------------------
| 20121211 |      2 |      0 |
| 20121210 |      1 |      1 |
| 20121207 |      1 |      0 |
| 20121206 |      2 |      1 |
| 20121208 |      0 |      1 |
| 20121209 |      0 |      1 |
| 20121204 |      0 |      1 |
| 20121205 |      0 |      1 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T11:35:09.947

您可以像这样使用 coalesce 和 nvl：

```
with 
downloads as
(
    select convert(varchar(10), timestamp, 112) as downloadDate, COUNT(*) as counter 
    from <download_table> 
    group by convert(varchar(10), timestamp,112)
),
uploads as 
(
    select CONVERT(varchar(10), dateadded, 112) as uploadDate, COUNT(*) as counter
    from <upload_table>
    group by CONVERT(varchar(10), dateadded, 112)
)
select 
    coalesce(downloads.downloadDate, uploads.uploadDate) as dDate, 
    nvl(downloads.counter, 0) as dCount,
    nvl(uploads.counter, 0) as uCount
from downloads 
full join uploads on uploads.uploadDate = downloads.downloadDate
order by downloadDate desc; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T11:41:33.500

首先，如果要删除时间元素，最好将日期时间转换为日期，而不是转换为 varchar，在 SQL-Server 2008 中，您可以简单地使用：

```
CAST(DateAdded AS DATE) 
```

然后，我不会使用 FULL JOIN 来执行此操作`UNION ALL`，它应该会执行得更好（尽管如果不测试您的实际数据，我不能说 100%）。

```
WITH Data AS
(   SELECT  [Date] = CAST(Timestamp AS DATE),
            [Downloads] = 1,
            [Uploads] = 0
    FROM    Download_Table
    UNION ALL
    SELECT  [Date] = CAST(DateAdded AS DATE),
            [Downloads] = 0,
            [Uploads] = 1
    FROM    Upload_Table
)
SELECT  [Date], 
        [Downloads] = SUM(Downloads),
        [Uploads] = SUM(Uploads)
FROM    Data
GROUP BY [Date]
ORDER BY [Date]; 
```

# blackberry - 如何将浮点数转换为字符串而不在黑莓中获取 E

> ID：13819438
> 
> 赞同：0
> 
> 时间：2012-12-11T11:30:24.877
> 
> 标签：blackberry

在不获取 E（指数）的情况下将 Float 转换为字符串的任何方法。

```
String str = String.valueOf(floatvalue);
txtbox.settext(str); 
```

我`NumericTextFilter.ALLOW_DECIMAL`在我的 textField 中使用它允许十进制但不允许 E。

我正在变得这样，`1.3453E7`但我想要它，`1.34538945213`因为 ei 无法在编辑文本中设置我的值。所以任何方式都可以在没有 e 的情况下获得价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:13:53.917

我不是 100% 确定我了解您要格式化的数字。在美国（我的语言环境），数字`1.3453E7`不等于数字`1.34538945213`。我认为即使在使用*句*点或*句号*（`.`）来分组大量数字的语言环境中，您也不会使用`1.34538945213`. 所以，我猜你想要什么。

如果您只想显示`float`没有 的数字`E`，那么您可以使用[Formatter 类](http://www.blackberry.com/developers/docs/5.0.0api/javax/microedition/global/Formatter.html)。但是，它在 BlackBerry 上的方法并不像您在其他平台上所期望的那样。

你可以试试这个：

```
 float floatValue = 1.3453E7f;
     Formatter f = new Formatter();
     String str = f.formatNumber(floatValue, 1);
     text.setText(str); 
```

这将显示

> 13453000.0

上面的`1`方法参数表示要显示的小数位数，可以是 1 到 15 之间的任何值。它不能为零，但如果你想显示一个没有任何小数位的数字，我会假设你会使用`int`或`long`为此。

如果我误解了您的问题，请发布更多关于您需要什么的描述。

我还会提到[这个实用程序类，它显然可以用来在 BlackBerry 上进行更多的数字格式化](http://code.google.com/p/bbnumberformat/source/browse/trunk/src/javame/text/DecimalFormat.java?r=2)，尽管我自己没有尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:34:30.073

试试这个：

```
Double floatValue = 1.34538945213;
Formatter f = new Formatter();
String result = f.format("%.11f", floatValue); 
```

由于 java 中的浮点表示，浮点值 1.34538945213 与双精度值 1.34538945213 的表示不同。所以，如果你想得到 1.34538945213 作为输出，你应该使用一个双精度值并按照示例中所示的格式对其进行格式化。

# c# - 需要协变铸造解决方案

> ID：13819440
> 
> 赞同：1
> 
> 时间：2012-12-11T11:30:30.617
> 
> 标签：c#, casting, covariance

`Maybe.cs`我使用自定义解决方案有以下代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using FluentAssertions;
namespace FunctionalExtensions.Specs
{
    [Microsoft.VisualStudio.TestTools.UnitTesting.TestClass]
    public class TestMaybe
    {
        class Base { }
        class A : Base { }
        class B : Base { }

        [Microsoft.VisualStudio.TestTools.UnitTesting.TestMethod]
        public void TestCovariance()
        {
            A a = new A();
            Maybe<A> ma = a.ToMaybe();
            Maybe<A> maa;
            Base b = a;

            Maybe<Base> mb = ma;
            Maybe<Base> mbb = b.ToMaybe();

            // This works
            (mb is Some<A>).Should().BeTrue ();
            maa = (Some<A>)(mb as object);

            // This doesn't
            (mbb is Some<A>).Should().BeTrue ();
            maa = (Some<A>)(mbb as object);
        }
    }
} 
```

该`Maybe.cs`实现位于[Maybe Implementation in C# — Gist](https://gist.github.com/4257876)中，粘贴到问题中有点长。基本上，我有一个实例

```
object 
```

我需要在运行时检测是否可以将其转换为

```
Some<A> 
```

但是请注意，我认为这需要隐式转换才能工作。我的猜测是，我无法从接口（c# 标准的一部分）定义隐式转换，而 Some 是一个接口。有些必须是使其协变的接口（C# 标准的另一部分）

关于如何克服这个问题的任何猜测还是我完全被困住了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:40:19.103

诀窍是具体化 Maybe 类。

```
 public static Maybe<T> Reify<T>(this Maybe<T> This)
    {
        if (!This.IsSome())
        {
            return This;
        }
        dynamic v = This.Value();
        var r = ToMaybe(v);
        return r;
    } 
```

一旦我的 Maybe 都被具体化了，我就可以进行正常的铸造了。

```
A a = new A();
Base b = a;
Maybe<Base> m = b.ToMaybe();

Maybe<Base> mr = m.Reify();

Maybe<A> ma;

// Will pass
ma = (Maybe<A>) mr;

// Will fail
ma = (Maybe<A>) m; 
```

动态关键字是解开运行时类型的魔法。

# java - SwingWorker 问题，方法 doInBackground 未执行？

> ID：13819442
> 
> 赞同：0
> 
> 时间：2012-12-11T11:30:35.487
> 
> 标签：java, swing, swingworker

有时我的 SwingWorker 的 doInBackgorund() 方法似乎没有被执行，它直接进入 done() 方法而不在我的一些客户端机器上保存或打印任何东西，所以我想这是一个随机的事情，我想不通出为什么。这是我的代码：

```
public class saveCmdWorker extends SwingWorker<Integer, Integer> {

    Order ord;

    public saveCmdWorker(Order ord) {
        this.ord = ord;
    }

    @Override
    public Integer doInBackground() {
        if(999 != ord.getCaissier().getIdCaissier())                           
            saveCmd(ord); // database queries
        else
            JOptionPane.showMessageDialog(null,"Error",JOptionPane.WARNING_MESSAGE);

            if(ord.isIsProd() == false){
            try {
                // print via serial port
                Printer.print(ord, false, Restaurant.numCaisse); 
            } catch (Exception ex) {
                PosO2.errorLogger.log(Level.SEVERE, "Printing error", ex);

                }
            }
            try {

                Printer.printFacture(ord, false);

                if(btnDuplicata.getForeground() == Color.red)
                    Printer.printFacture(ord, true);

            } catch (Exception ex) {
                PosO2.errorLogger.log(Level.SEVERE, "Printing error", ex);
            }

        return 1;
    }

    @Override
    protected void done() {
        try {

            btnDuplicata.setForeground(Color.black);                     
            ARendre = 0.0;
            ord.clear();

            for (int j = 0; j < tab_paiement.size(); j++) {
                tab_paiement.get(j).setVisible(true);
            }

            montantRestant.setBackground(Color.red);
        } catch(Exception e) {
                PosO2.errorLogger.log(Level.SEVERE, "Refresh Error", e);
        }
    }
} 
```

我通过这个 actionlistener 执行这个工人：

```
ActionListener encaissListener = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {

                    worker = new saveCmdWorker(cmd);
                    worker.execute();

            }
        }; 
```

我没有任何可用的日志，所以我认为没有发现异常。我看到在 doInBackground() 中触发了 JOptionPane（考虑在其他线程中修改 ui 吗？）但是当应用程序不进入 else 语句时，问题就存在了。这可能是我的问题的原因吗？我的电脑上没有这个错误，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-25T16:02:27.620

根据 SwingWorker 文档（[http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html#execute()](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html#execute())）：

> SwingWorker 仅设计为执行一次。多次执行 SwingWorker 不会导致调用 doInBackground 方法两次。

因此，看起来您每次想要正确运行 execute 方法时都需要创建子类的新实例。

# c++ - 删除分配给列表的内存

> ID：13819451
> 
> 赞同：0
> 
> 时间：2012-12-11T11:31:02.460
> 
> 标签：c++, list, memory, delete-operator

看看下面的代码。在执行开始的这段代码中，内存使用量为 1020K。但在执行结束时内存使用量为 1144K。有人可以帮我识别内存泄漏。如果`func()`调用五次，内存使用量将达到 1500K+。如果我们不使用列表，内存使用量不会增加。

```
void func();

int _tmain(int argc, _TCHAR* argv[])
{
    func();
    return 0;
}

void func()
{
    list<char*> list1;
    list<char*>::iterator iter;
    char* val;
    for(int i=0; i<100000; i++)
    {
        val = new char[20];
        for(int j=0; j<20;j++)
        {
            val[j] = 'A';
        }
        val[19] = '\0';
        list1.push_back(val);
    }

    iter = list1.begin();
    for(int k=0; k<100000;k++, iter++)
    {
        delete[] *iter;
        *iter = NULL;
    }
    val = NULL;

    list1.clear();
    list1.empty();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:06:10.210

**我在这里没有看到内存泄漏**，但我确实看到了很多非常糟糕的代码。

我在您的代码中看到您在 Windows 下运行的一些提示，当我凝视我的水晶球时，我想我看到您正在检查任务管理器以检测内存泄漏。使用任务管理器检测内存泄漏就像使用大刀做手术一样。TM 可能会提示您系统中*可能*存在大量内存泄漏，但它与您的程序相距太远，而且太粗糙而无法确定。您需要使用专用于该工作的工具，而不是使用 TM 来确定是否存在内存泄漏。Visual Studio内置[了这样一个工具](http://msdn.microsoft.com/en-us/library/x98tx3cf%28v=vs.80%29.aspx)。

当我在您的代码中使用这些内置工具时：

```
#include <cstdlib>
#include <list>
using std::list;

#define _CRTDBG_MAP_ALLOC
#include <stdlib.h>
#include <crtdbg.h>

void func();

int main(int argc, char* argv[])
{
    func();
    return 0;
}

void func()
{
    list<char*> list1;
    list<char*>::iterator iter;
    char* val;
    for(int i=0; i<100000; i++)
    {
        val = new char[20];
        for(int j=0; j<20;j++)
        {
            val[j] = 'A';
        }
        val[19] = '\0';
        list1.push_back(val);
    }

    iter = list1.begin();
    for(int k=0; k<100000;k++, iter++)
    {
        delete[] *iter;
        *iter = NULL;
    }
    val = NULL;

    list1.clear();
    list1.empty();

    _CrtDumpMemoryLeaks();
} 
```

...我懂了：

```
Detected memory leaks!
Dumping objects ->
{142} normal block at 0x00000000000778C0, 24 bytes long.
 Data: < x       x      > C0 78 07 00 00 00 00 00 C0 78 07 00 00 00 00 00 
{141} normal block at 0x0000000000077840, 16 bytes long.
 Data: <(       h       > 28 F7 1A 00 00 00 00 00 68 F7 1A 00 00 00 00 00 
Object dump complete. 
```

报告了两次内存泄漏，总共 40 个字节，因此这里没有广泛的内存泄漏。此外，这些可能是误报，报告诸如 CRT 的静态内存分配之类的事情，应该被忽略。

然而，正如我所说，我确实看到了很多非常糟糕的代码。这不是内存泄漏的原因，但它们很容易出现在实际代码中。

1.  **你使用了很多[幻数](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)**。比如 with `for(int i=0; i<100000; i++)`，你应该在哪里迭代列表 ( `for( list<char*>::iterator it = list1.begin(); it != list1.end(); ++it)`)，或者至少询问列表它有多少元素 ( `for( size_t i = 0; i < list1.size(); ++i )`)

2.  **您正在使用动态分配/解除分配。** 在确实需要动态分配的情况下，您应该使用 RAII，但尽可能完全避免动态分配。在您的情况下，`list<char*>`您应该使用 a`list<std::string>`而不是 a 。

3.  **您在可以使用标准库提供的算法的地方**使用手写循环。**您从未编写过的代码是最可靠的代码。而不是初始化 char 数组的内部循环，只是 do `std::string s(20,'A')`，而不是设置每个列表成员的外部循环，使用类似`copy`or的东西`transform`。**

 ****编辑**这里是你的函数的一个 re-farctored 版本，它解决了我上面提到的一些问题：

```
#include <string>
using std::string;
#include <algorithm>
using std::generate_n;
#include <iterator>
using std::back_inserter;

void func()
{
    static const size_t NumStrings = 10000;
    typedef list<string> strings;

    // Populate the list
    strings list2;
    generate_n(back_inserter(list2), NumStrings, []() -> string
    {
        static const size_t NumChars = 19;
        static const char InitChar = 'A';
        return string(NumChars, InitChar);
    });

    // Clear the list
    list2.clear();

    // Done
    _CrtDumpMemoryLeaks();
} 
```

调用`generate_n`使用 C++11 lambda，但可以很容易地重构为完全使用仿函数或其他东西。**

# c# - 线程异常处理

> ID：13819456
> 
> 赞同：0
> 
> 时间：2012-12-11T11:31:28.010
> 
> 标签：c#, wpf, c#-4.0

我的逻辑层中有一个函数可以通过另一个线程插入信息，如果该线程中发生未知异常，我希望抛出它，但问题是在我的应用程序`UnhandledExceptionEventHandler`中出现一般异常，它给出了这个错误，我也不想关闭应用程序：

**调用线程必须是 STA，因为很多 UI 组件都需要这个**

```
///////////////////// this is my function in logical layer //////////
public string MahaleInsert(Mahales Mahale)
{
    Thread t = new Thread(delegate()
    {
        try
        {
            Mahale.OutMessage = DA_Agency.MahaleInsertDB(Mahale);
            Mahale.OutMessage = "SuccessInsert";
        }
        catch (Exception ex)
        {
            if (ex.Message.ToLower().Contains("violation of unique key constraint"))
                Mahale.OutMessage = "MahaleInsUniqueError";
            else
                throw;
        }
    });
    t.Start();
    t.Join();
    return Mahale.OutMessage;    
}

//////////////////////////// this in my aplication level  //////////////////
void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
{
    try
    {
        string messsage = GeneralMethod.CatchException(e.ExceptionObject as Exception);
        MessageClass.MessageBox(messsage);
    }
    catch
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:45:51.780

尝试执行以下操作：

```
 public string MahaleInsert(Mahales Mahale)
    {
        Thread t = new Thread(new ThreadStart(ThreadBody));
        t.Start();
        t.Join();
        return Mahale.OutMessage;
    }
    [STAThread]
    void ThreadBody()
    {
        try
        {
            Mahale.OutMessage = DA_Agency.MahaleInsertDB(Mahale);
            Mahale.OutMessage = "SuccessInsert";
        }
        catch (Exception ex)
        {
            if (ex.Message.ToLower().Contains("violation of unique key constraint"))
                Mahale.OutMessage = "MahaleInsUniqueError";
            else
                throw;
        }
    }

    //////////////////////////// this in my aplication level  //////////////////
    void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        try
        {
            string messsage = GeneralMethod.CatchException(e.ExceptionObject as Exception);
            MessageClass.MessageBox(messsage);
        }
        catch
        {

        }
    } 
```

# xml - 如何根据xsd中的父元素属性使子元素属性成为必需

> ID：13819457
> 
> 赞同：1
> 
> 时间：2012-12-11T11:31:28.030
> 
> 标签：xml, xsd

在下面的 XSD 示例中，我想要的是如果“Faron”元素具有“TestMethod”属性 = 1，那么子元素 faronsettings 必须具有属性“test1”并且具有值。

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="Faron">
<xs:complexType>
  <xs:sequence>
    <xs:element maxOccurs="unbounded" name="Application">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="FaronSettings">
            <xs:complexType>
              <xs:attribute name="test1" type="xs:string" use="optional" />
              <xs:attribute name="test2" type="xs:string" use="optional" />
              <xs:attribute name="test3" type="xs:string" use="optional" />
              <xs:attribute name="test4" type="xs:string" use="optional" />
            </xs:complexType>
          </xs:element>
        </xs:sequence>
        <xs:attribute name="TestMethod" type="TestType" use="required" />
      </xs:complexType>
    </xs:element>
  </xs:sequence>
</xs:complexType>
</xs:element>
<xs:simpleType name="TestType">
<xs:restriction base="xs:string">
  <xs:minLength value="1" />
  <xs:enumeration value="1"/>
  <xs:enumeration value="2"/>
  <xs:enumeration value="3"/>
  <xs:enumeration value="4"/>
</xs:restriction>
 </xs:simpleType>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:34:06.757

将 XSD 1.1 与条件类型分配和断言一起使用。

或者使用 Schematron。

或者设计您的词汇表，以便可以根据元素类型来表达有效性约束，而无需诉诸属性值。

你付钱，你做选择。

# wcf - 显示来自 Project server 2010 wcf 服务的错 误消息

> ID：13819461
> 
> 赞同：0
> 
> 时间：2012-12-11T11:31:32.600
> 
> 标签：wcf, ms-project-server-2010

我实现了一个连接到 ProjectServer.svc Web 服务的 Web 应用程序。该应用程序在项目环境服务器上运行，但在生产服务器中返回错误。不幸的是，由于安全设置，未显示服务器上发生的异常的文本和代码，而是收到以下消息：

*由于内部错误，服务器无法处理请求。有关错误的更多信息，请在服务器上打开 IncludeExceptionDetailInFaults（来自 ServiceBehaviorAttribute 或来自配置行为）以便将异常信息发送回客户端，或根据 Microsoft .NET Framework 3.0 SDK 文档打开跟踪并检查服务器跟踪日志*

我修改了项目服务器的 web 配置中的 wcf 设置，以使 web 服务返回错误...但是什么也没发生，因为项目服务器可能覆盖了 web 配置 wcf 设置。

如何获取错误消息，以便了解服务器配置有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T03:37:11.840

有时 ULS 日志可能会有所帮助 - 当 Project 服务器进程接受您的调用并在进程内部某处出错时。

我只碰过一次配置来创建代理程序集，那次它起作用了……也许同样的方法可以帮助你找到合适的配置。这是一个链接[http://msdn.microsoft.com/en-us/library/office/ff621594(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/office/ff621594%28v=office.14%29.aspx)

`iisreset`更改配置后不要忘记

# c# - 如何在主站点和子域站点之间的 MVC 2 中重写 SEO 友好的 URL

> ID：13819463
> 
> 赞同：2
> 
> 时间：2012-12-11T11:31:33.923
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-2, seo

我有两个基于 MVC 的网站

站点 1：mydemosite.co.uk

站点 2：subdomain.mydemosite.co.uk

站点 1 上有一个“频道区域”链接，但是当用户单击它时，我会像这样将他带到站点 2，然后从那里提供页面，该链接的位置如下

LinkA: subdomain.mydemosite.co.uk\channelarea

但我想要的是重写上面的 URL LinkA 用于 SEO 目的，如下面的 LinkB

LinkB：mydemosite.co.uk\channelarea

如果我的 LinkA 在用户点击它之前就像 LinkB，或者​​我只是在显示目标页面时将 URL 更改为 LinkB，我对如何处理 SEO 的上述情况感到困惑

我不知道如何做到这一点 MVC 2？

任何例子都会非常有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T08:32:40.303

为什么不将您的 Site2 放在 IIS 主站点下的虚拟应用程序中

在 IIS 管理器中右键单击 site1 并选择“添加应用程序”然后您的 Site2 链接可能类似​​于 /site2/channelarea

# php - 每次页面加载时，如何防止在 jQuery 选项卡中填充表格？

> ID：13819464
> 
> 赞同：0
> 
> 时间：2012-12-11T11:31:43.957
> 
> 标签：php, jquery-ui, tabs, smarty

我正在使用 smarty，我有两个选项卡，每个选项卡都包含一个表格。第一次加载页面时，两个表加载数据。然后，每次由于单击按钮（我使用 Ajax 按钮）而请求页面时，这两个表都会再次加载数据。

**我想做什么**：

如果我目前在第一个选项卡上，我只想重新加载第一个表。如果我目前在第二个标签上，我只想重新加载第二个。我怎样才能做到这一点？

我尝试使用该`$_SESSION`变量，但没有帮助。

此外，我尝试使用一个布尔变量，当我按下按钮以及在所需的选定选项卡上时（我在每个选项卡中使用隐藏输入 = 选定选项卡）时，该变量为真。它也没有用。

你能建议一个方法吗？这是一个if条件，我猜...

# javascript - jQuery基于Class获取ID，写入HTML和fadeIn

> ID：13819465
> 
> 赞同：1
> 
> 时间：2012-12-11T11:31:45.393
> 
> 标签：javascript, jquery, mouseover, fadein

我一直有一个问题让这个工作。

我能够根据 div 的 Class 获取 ID，并将其输出到屏幕，但我无法让 fadeIn 方法在同一个 div 上工作。

这是我迄今为止在 jsFiddle 所拥有的：http: [//jsfiddle.net/Y8Ara/1/](http://jsfiddle.net/Y8Ara/1/)

这是jQuery：

```
$('.courseLink').mouseover(function() {
    $('div#courseTitle').text(this.id);
}); 
```

如果可能的话，我还想让文本在鼠标移出时淡出。

任何帮助是极大的赞赏！

***已解决：感谢阿迪尔和烤！如果其他人想知道，我还添加了淡出功能 - [http://jsfiddle.net/Y8Ara/17/](http://jsfiddle.net/Y8Ara/17/)***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:34:53.070

可以这样做：

[演示](http://jsfiddle.net/Y8Ara/17/)

```
$('.courseLink').hover(function() {
    $('div#courseTitle').hide().fadeIn().text(this.id);
},function(){
     $('div#courseTitle').stop().fadeOut();
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:40:52.500

你的意思是这样的：

```
$('.courseLink').on({
    mouseenter: function() {
        $('div#courseTitle').hide().text(this.id).fadeIn("slow");
    },
    mouseleave: function() {
        $('div#courseTitle').text('');
    }        
}); 
```

# php - PHP拆分类函数调用

> ID：13819467
> 
> 赞同：0
> 
> 时间：2012-12-11T11:31:47.280
> 
> 标签：php, class, object, orm, idiorm

我使用 PHP 和[Idiorm](https://github.com/j4mie/idiorm)进行 SQL 查询。

**一个普通的查询**

这个有效。

```
$females = ORM::for_table('person')
               ->where('gender', 'female')
               ->find_many(); 
```

**问题**

在*某些情况下*，我需要添加另一个 where 子句，**而无需**再次重写整个查询。结果可能如下所示。有用。

```
$females = ORM::for_table('person')
               ->where('gender', 'female')
               ->where('parent', 22)
               ->find_many(); 
```

**我的尝试失败了**

它以某种方式丢失了对象。

```
$females = ORM::for_table('person')
               ->where('gender', 'female');

if( ! empty( $parent ) )
{
$females->where('parent', $parent);
}

$females->find_many(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:36:11.160

我不特别了解 Idiorm，但您应该能够将该代码重构为：

```
$query = ORM::for_table('person')->where('gender', 'female');

if ($parent) {
    $query->where('parent', $parent);
}

$females = $query->find_many(); 
```

# oop - MATLAB 类的 Description 和DetailedDescription 属性

> ID：13819469
> 
> 赞同：7
> 
> 时间：2012-12-11T11:31:51.710
> 
> 标签：oop, matlab

内置 MATLAB 类具有 Description 和DetailedDescription 属性的值：

```
>> ?handle
ans = 
  meta.class handle
  Package: meta

  Properties:
                     Name: 'handle'
              Description: 'Base class for handle classes'
      DetailedDescription: ''
[snip] 
```

同样，内置类的一些方法和属性具有相同的属性：

```
>> a = ?containers.Map;
>> a.PropertyList(1)
ans = 
  meta.property handle
  Package: meta

  Properties:
                   Name: 'Count'
            Description: 'Number of pairs in the collection'
    DetailedDescription: ''
[snip] 
```

如何为我的类/方法/属性设置这些属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T15:26:39.527

使用 classdef 的参数：

```
classdef (Description='A type of story.',...
    DetailedDescription='Once upon a time..') MyFairyTaleClass 
```

命令行：

```
>> ?MyFairyTaleClass

ans = 

  meta.class handle
  Package: meta

  Properties:
                     Name: 'MyFairyTaleClass'
              Description: 'A type of story.'
      DetailedDescription: 'Once upon a time..'
                   Hidden: 0
                   Sealed: 0
          ConstructOnLoad: 0
         HandleCompatible: 0
          InferiorClasses: {0x1 cell} 
```

这似乎是一个[未记录的功能。](http://www.mathworks.com/help/matlab/matlab_oop/class-attributes.html)

# web-applications - 没有xml配置奇怪的url映射web应用

> ID：13819474
> 
> 赞同：1
> 
> 时间：2012-12-11T11:32:03.910
> 
> 标签：web-applications, spring-mvc, tomcat7, jboss7.x, url-mapping

这是我的第一篇文章，所以请放轻松。我正在尝试在 JBoss AS 7 和或 TomCat 7 上使用 spring web mvc 3.1.3 设置一个 java web 应用程序。但是在 URL 映射中发生了一些奇怪的事情。我正在关注一堆教程，但我基本上是在尝试做[这个](http://zeroturnaround.com/labs/your-next-java-web-app-less-xml-no-long-restarts-fewer-hassles-part-1/)教程的第一部分。我的 WEB-INF/views 文件夹中有一个非常简单的 jsp，我希望在调用`http://localhost:8080/hello/welcome`. 但这不会发生。url 映射有问题。当我使用 /test/* 之类的东西时，我称`http://localhost:8080/hello/test/welcome`它按预期工作。当我使用 /*`http://localhost:8080/hello/welcome`返回一个未渲染的jsp。当我使用我的菜鸟认为应该是默认值时，我得到一个 404 资源未找到。我在 Eclipse 中运行或使用 war 文件部署的 JBoss 7.1.1 和 Tomcat 7.0.33 服务器上测试了这一切。我已经黔驴技穷了。每个谷歌结果页面都充满了紫色链接，我还没有找到我要找的东西。

有谁能帮忙吗？我知道一些信息可能会丢失，但请询问。

编辑：我忘了我使用 maven 来构建我的应用程序。这是使用 Eclipse 的 m2e wtp 插件完成的。我正在运行eclipse juno。

这是我的初始化程序（非常基本）。

```
Public class Initializer implements WebApplicationInitializer 
{   
public void onStartup(ServletContext servletContext) throws ServletException {
 AnnotationConfigWebApplicationContext root = new AnnotationConfigWebApplicationContext();
 root.register(WebappConfig.class);

 ServletRegistration.Dynamic servlet = servletContext.addServlet("dispatcher", new DispatcherServlet(root));
 servlet.addMapping("/");
 servlet.setLoadOnStartup(1);
}} 
```

这是我的 WebappConfig：

```
@Configuration
@ComponentScan("nl.hello")
@EnableWebMvc
public class WebappConfig extends WebMvcConfigurerAdapter
{
@Bean
public InternalResourceViewResolver setupViewResolver() 
{
InternalResourceViewResolver resolver = new InternalResourceViewResolver();
resolver.setPrefix("/WEB-INF/views/");
resolver.setSuffix(".jsp");

return resolver;
}

@Override
public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer{
configurer.enable();
}} 
```

和控制器：

```
@Controller
public class HelloController {

@RequestMapping("/welcome")
public String helloWorld(Model model) {
//let’s pass some variables to the view script
model.addAttribute("wisdom", "Goodbye XML");

return "welcome"; 
}} 
```

还有我的pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>hello</groupId>
<artifactId>hello</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>war</packaging>
<build>
  <plugins>
    <plugin>
      <artifactId>maven-compiler-plugin</artifactId>
      <version>2.3.2</version>
      <configuration>
        <source>1.6</source>
        <target>1.6</target>
      </configuration>
    </plugin>
    <plugin>
      <artifactId>maven-war-plugin</artifactId>
      <version>2.3</version>
      <configuration>
        <failOnMissingWebXml>false</failOnMissingWebXml>
      </configuration>
    </plugin>
  </plugins>
</build>
<properties>
    <project.build.sourceEncoding>utf8</project.build.sourceEncoding>
</properties>
<dependencies>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.1.8.Final</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
    <groupId>javax.inject</groupId>
    <artifactId>javax.inject</artifactId>
    <version>1</version>
</dependency>
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>2.2.2</version>
</dependency>
 </dependencies>
 </project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:46:23.557

我解决了！我应该提到我知道7.0.15 版本之前的 tomcat的“[错误”。](https://issues.apache.org/bugzilla/show_bug.cgi?id=51278)在此版本以下，无法覆盖默认 url 映射。但正如我所说，我意识到了这一点，并且我使用了 7.0.33 版本。所以这不可能吧！？错误的！在旁注中，我应该在 jboss 的 404 页面中注意到 7.1.1 (brontes) 使用版本 7.0.13 或其他版本，并且永远不会工作。但问题是什么。好吧，我正在使用 Eclipse 的 m2e wtp 插件来构建我的应用程序。[不幸的是， maven](https://issues.apache.org/bugzilla/show_bug.cgi?id=53863)中有一些东西打破了一切。首先，我认为这是嵌入的事实，并且使用外部 Maven 源确实解决了我的问题。也许版本不同？事实证明他们都使用3.0.4。诡异的！？当我切换回嵌入式时，它起作用了。

总结：使用 webapplicationinitializer 时，使用 Tomcat 7.0.15 版本，最好使用外部 maven 源。

# java - 在 Android 应用中滑动新活动

> ID：13819476
> 
> 赞同：2
> 
> 时间：2012-12-11T11:32:13.943
> 
> 标签：java, android, android-activity, slide

我有这段代码可以在我的 android 测试应用程序中启动一个新活动

```
protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_main);

   Button btnpriv = (Button)findViewById(R.id.btn_priv);
   btnpriv.setOnClickListener(new View.OnClickListener() {

      @Override
      public void onClick(View v) {
         Intent i = new Intent(getApplicationContext(), PrivateActivity.class);
         startActivity(i);
      }
}); 
```

这可以正常工作。按下按钮时，它会更改为新的 PrivateActivity。但这是一个没有动画的变化。我怎样才能让它在新活动中滑动以进行良好的过渡？

# javascript - jQuery隐藏和显示div

> ID：13819478
> 
> 赞同：0
> 
> 时间：2012-12-11T11:32:22.397
> 
> 标签：javascript, jquery, html

你好，编码不是很熟练。当点击 .background-button 时，我的 #content 淡出和淡入。如何在按钮上获取文本以显示隐藏内容/显示内容？

我还需要在单击隐藏内容时淡出另外两个 div（.button-next、.button-prev）？

有谁能帮忙吗？

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script type="text/javascript">

var openingdelay = 200; // Delay before fade in initiated (default is 200)
var closingdelay = 100; // Delay before fade out initiated (default is 100)
var openingspeed = 25; // Speed of fade in (default is 25)
var closingspeed = 15; // Speed of fade out (default is 15)

function Show(elementid) {
    ele = document.getElementById(elementid);
        if(ele.style.display == 'none') {
            ele.style.opacity = 0;
            ele.style.filter = 'alpha(opacity=0)';
            ele.style.display = '';
            valueop = 1;
            setTimeout("fadeIn()", openingdelay);
        } 
        else {
            valueop = 9;
            setTimeout("fadeOut()", closingdelay);
        }
}
        function fadeOut() {
        if(valueop < 1) {
        ele.style.display = 'none';
        return false;
        }
            ele.style.opacity = valueop/10;
            ele.style.filter = 'alpha(opacity='+(valueop*10)+')';
            valueop = valueop - 1;
            setTimeout("fadeOut()", closingspeed);
        }
        function fadeIn() {
        if(valueop > 10) {
        return false;
        }
            ele.style.opacity = valueop/10;
            ele.style.filter = 'alpha(opacity='+(valueop*10)+')';
            valueop = valueop + 1;
            setTimeout("fadeIn()", openingspeed);
        } 

</script>
<style type="text/css">
.layer1 {
margin: 0;
padding: 0;
width: 500px;
}

.background-button {
margin: 1px;
color: #fff;
padding: 3px 10px;
cursor: pointer;
position: relative;
background-color:#c30;
float:right;
}
#content {
padding: 5px 10px;
background-color:#000;
float:left; width:400px; height:600px; color:#FFF
}

</style>
</head>

<body>

<div id="content" >Hello! This will remain hidden until the link is clicked.</div>

<div class="background-button"><a href="#" onClick="Show('content'); return false;">Click Me To Reveal More</a></div>

<div style="background-color:#000; color:#FFF; position:absolute; right:0px; top:100px; height:50px; width:100px;" id="button-next">next</div>
<div style="background-color:#000; color:#FFF; position:absolute; right:0px; top:200px; height:50px; width:100px;" id="button-prev">prev</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:57:26.267

我将使用注册而不是内联事件处理程序添加事件侦听器：

```
var button = document.querySelector('.background-button');
button.addEventListener("click", function(){
    Show('content', this.children[0]);
    return false;
}); 
```

该函数`Show`相应地必须修改为：

```
function Show(elementid, link) {
    ele = document.getElementById(elementid);
    if (ele.style.display == 'none') {
        ele.style.opacity = 0;
        ele.style.filter = 'alpha(opacity=0)';
        ele.style.display = '';
        valueop = 1;
        setTimeout("fadeIn()", openingdelay);
    }
    else {
        valueop = 9;
        setTimeout("fadeOut()", closingdelay);
    }
    if(link.getAttribute('data-hidden') == "hidden"){
        link.innerHTML = "Click Me To Hide Stuff";
        link.removeAttribute("data-hidden");
    }else{
        link.innerHTML = "Click Me To Reveal More";
        link.setAttribute("data-hidden", "hidden");
    }
} 
```

结果如下：http: [//jsfiddle.net/p3Qzk/](http://jsfiddle.net/p3Qzk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:59:05.553

我修改了您的 html 以将和 ID 放入链接：`#show_more`

HTML：

```
<div id="content" >Hello! This will remain hidden until the link is clicked.</div>

<div class="background-button"><a id="show_more" href="#">Click Me To Reveal More</a></div>

<div style="background-color:#000; color:#FFF; position:absolute; right:0px; top:100px; height:50px; width:100px;" id="button-next">next</div>
<div style="background-color:#000; color:#FFF; position:absolute; right:0px; top:200px; height:50px; width:100px;" id="button-prev">prev</div>​ 
```

jQuery：

```
$('#content, #button-next, #button-prev').hide();
$('#show_more').click(function(e) {
    e.preventDefault(); // disable default <a> behavior

    if ($('#content').is(':visible')) {
        $('#show_more').text('Show Content');
    } else {
        $('#show_more').text('Hide Content');
    }

    $('#content, #button-next, #button-prev').fadeToggle();
}); 
```

第一行只是隐藏了内容和按钮。您应该通过 CSS 或内联样式隐藏它们并删除这行代码。

编辑：[jsFiddle](http://jsfiddle.net/arGtt/)

# javascript - Javascript 应用程序和 SEO

> ID：13819479
> 
> 赞同：0
> 
> 时间：2012-12-11T11:32:23.663
> 
> 标签：javascript, .htaccess, seo, history.js

我有这个设置：

*   使用 Javascript 生成 HTML 内容的单页应用程序。非 JS 用户没有可见的 HTML。
*   History.js (pushState) 用于处理没有 hashbang 的 URL。因此，“domain.com”上的应用程序可以加载“page-id”的动态内容并将URL更新为“domain.com/page-id”。此外，直接 URLS 通过 Javascript 可以很好地工作。

问题是 Google 无法以这种方式执行 Javascript。所以本质上，据谷歌所知，没有任何内容。

我正在考虑仅将缓存的内容提供给搜索机器人。因此，当搜索机器人点击“domain.com/page-id”时，它会加载缓存的内容，但如果用户加载相同的页面，它会看到正常的（Javascript 注入的）内容。

对此提出的解决方案是使用 hashbang，因此 Google 可以使用“escaped_fragment”字符串自动将这些 URL 转换为替代 URL。在服务器端，我可以将这些替代 URL 重定向到缓存的内容。因为我不会使用 hashbangs，所以这不起作用。

理论上我已经准备好了一切。我可以生成一个 sitemap.xml 并且可以生成缓存的 HTML 内容，但是缺少一块拼图。

我想我的问题是：如何过滤掉搜索机器人的访问权限，这样我就可以为这些机器人提供缓存的页面，同时为我的用户提供支持 JS 的普通应用程序？

一个想法是为任何机器人解析 .htaccess 中的“HTTP_USER_AGENT”字符串，但这是否可能并且不被视为伪装？还有其他更聪明的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:38:42.947

> 将 URL 更新为“domain.com/page-id”。此外，直接 URLS 通过 Javascript 可以很好地工作。

那是你的问题。直接 URL 不应该通过 JavaScript 工作。服务器应该生成内容。

一旦加载了客户端请求的任何页面，JavaScript 就可以接管。如果 JavaScript 不可用（例如，因为它是搜索引擎机器人），那么您应该有可以继续工作的常规链接/表单（如果 JS 可用，那么您将绑定到单击/提交事件并覆盖默认行为） .

> 一个建议的解决方案是使用 hashbangs

Hashbangs 是一个糟糕的解决方案。`pushState`已修复 hashbangs，并且您已经在使用它 - 您只需要正确使用它。

> 如何过滤掉搜索机器人访问

你不需要。改用[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)/[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。

# c#-4.0 - 消费者/生产者对消费项目有订单和约束

> ID：13819484
> 
> 赞同：2
> 
> 时间：2012-12-11T11:32:34.847
> 
> 标签：c#-4.0, concurrency, task-parallel-library, concurrent-programming

我有以下情况

*   我正在编写一个处理文件（作业）的服务器
    *   一个文件有一个“前缀”和一个时间
    *   文件要按时间处理（老文件优先）但也要考虑前缀（相同前缀的文件不能同时处理）
*   我有一个线程（Task with Timer），它监视一个目录并将文件添加到“队列”（生产者）
*   我有几个从“队列”（消费者）获取文件的消费者 - 他们应该符合上述规则。
    *   每个任务的工作都保存在某个列表中（这表明了约束）
*   有多个消费者，消费者的数量在启动时确定。

要求之一是能够优雅地停止消费者（立即或让正在进行的进程完成）。

我沿着这条线做了一些事情：

```
while (processing)
{
    //limits number of concurrent tasks
    _processingSemaphore.Wait(queueCancellationToken);  
    //Take next job when available or wait for cancel signal
    currentwork = workQueue.Take(taskCancellationToken);

    //check that it can actually process this work
    if (CanProcess(currnetWork)
    { 
        var task = CreateTask(currentwork)
        task.ContinueWith((t) => { //release processing slot });
    }
    else
       //release slot, return job? something else?
 } 
```

取消令牌源位于调用方代码中，可以取消。有两个是为了能够在不取消正在运行的任务的同时停止排队。

我厌倦了将“队列”实现为包装“安全”SortedSet 的 BlockingCollection。除了我需要找到与约束匹配的新工作的情况外，一般的想法工作（按时间排序）。如果我将工作返回队列并尝试再次接受，我将得到相同的。

可以从队列中取出作业，直到找到合适的作业，然后返回“非法”作业，但这可能会导致其他消费者处理乱序作业时出现问题

另一种选择是传递一个简单的集合和一种锁定它的方法，然后根据当前的约束锁定并进行简单的搜索。同样，这意味着编写可能不是线程安全的代码。

还有其他可以提供帮助的建议/指针/数据结构吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:12:11.880

我会用[TPL Dataflow](http://msdn.microsoft.com/en-us/library/hh228603.aspx)实现您的要求。看看你可以用它实现[生产者-消费者模式](http://msdn.microsoft.com/en-us/library/hh228601.aspx)的方式。我相信这将满足您的所有要求（包括取消消费者）。

**编辑（对于那些不喜欢阅读文档，但谁...）**

这是一个如何使用[TPL Dataflow](http://msdn.microsoft.com/en-us/library/hh228603.aspx)实现需求的示例。这种实现的美妙之处在于消费者没有绑定到单个线程，并且仅在需要处理数据时才使用池线程。

```
 static void Main(string[] args)
    {
        BufferBlock<string> source = new BufferBlock<string>();
        var cancellation = new CancellationTokenSource();
        LinkConsumer(source, "A", cancellation.Token);
        LinkConsumer(source, "B", cancellation.Token);
        LinkConsumer(source, "C", cancellation.Token);

        // Link an action that will process source values that are not processed by other 
        source.LinkTo(new ActionBlock<string>((s) => Console.WriteLine("Default action")));

        while (cancellation.IsCancellationRequested == false)
        {
            ConsoleKey key = Console.ReadKey(true).Key;
            switch (key)
            {
                case ConsoleKey.Escape:
                    cancellation.Cancel();
                    break;
                default:
                    Console.WriteLine("Posted value {0} on thread {1}.", key, Thread.CurrentThread.ManagedThreadId);
                    source.Post(key.ToString());
                    break;
            }
        }

        source.Complete();
        Console.WriteLine("Done.");
        Console.ReadLine();
    }

    private static void LinkConsumer(ISourceBlock<string> source, string prefix, CancellationToken token)
    {
        // Link a consumer that will buffer and process all input of the specified prefix
        var consumer = new ActionBlock<string>(new Action<string>(Process), new ExecutionDataflowBlockOptions() { MaxDegreeOfParallelism = 1, SingleProducerConstrained = true, CancellationToken = token, TaskScheduler = TaskScheduler.Default });
        var linkDisposable = source.LinkTo(consumer, (p) => p == prefix);

        // Dispose the link (remove the link) when cancellation is requested.
        token.Register(linkDisposable.Dispose);
    }

    private static void Process(string arg)
    {
        Console.WriteLine("Processed value {0} in thread {1}", arg, Thread.CurrentThread.ManagedThreadId);

        // Simulate work
        Thread.Sleep(500);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:04:08.410

我认为 Hans 是对的：如果您已经有一个线程安全的 SortedSet（实现了`IProducerConsumerCollection`，因此可以在 中使用`BlockingCollection`），那么您只需将现在可以处理的文件放入集合中。如果您完成了使另一个文件可用于处理的文件，请在此时而不是更早地将另一个文件添加到集合中。

# php - PHP mysql_real_escape_string 没有按预期工作

> ID：13819487
> 
> 赞同：-5
> 
> 时间：2012-12-11T11:32:39.027
> 
> 标签：php, mysql

我有一个奇怪的问题。

我有一个有标题字段的表。
我正在使用`mysql_real_escape_string`. 对于带有单引号的值，插入工作正常。
在其他地方，我正在使用 where 子句中提交的标题进行选择，如下所示

```
SELECT * FROM table WHERE title=mysql_real_escape_string(Girish's Photo); 
```

即使我插入了 Girish 的照片，此查询也会返回空结果集。

---- 编辑放一些代码

```
$photo_title=mysql_real_escape_string($_POST[photo_title]);<br/>
$sql = "INSERT INTO photos values($id,'$photo_title');<br/> 
```

从表格中使用它，我将*Girish 的照片*插入到 photo_title 中。它工作得很好。
... .. ..

然后在 PHP 的其他地方

```
$title="Girish's Photo";
$sql = "SELECT photo_id,photo_title FROM photos WHERE photo_title ='" . mysql_real_escape_string($title)."'" ; 
```

但此查询返回空结果集。

使用 phpMyAdmin，如果我尝试运行上述查询 .. 结果为空。如果我浏览表格，我会看到 Girish\'s Photo
现在的值，如果我在 phpMyAdmin 上运行查询，用 where photo_title='Girish\''s Photo' 替换 where 子句，我会得到记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:44:20.877

```
 $data = "Girish's Photo";

  $query = "SELECT * FROM table WHERE title='".mysql_real_escape_string($data)."'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:43:44.940

`mysql_real_escape_string()`是一个 PHP 函数，应按如下方式使用：

```
"SELECT * FROM table WHERE title='".mysql_real_escape_string("Girish's Photo")."'"; 
```

但是，这是不好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:42:29.117

我最近有一个类似的问题，我通过使用`htmlentites()`而不是在[手册](http://php.net/manual/en/function.htmlentities.php)或[w3 学校](http://www.w3schools.com/php/func_string_htmlentities.asp)`mysql_real_escape_string()`中检查它来解决

编辑：这是一个有效的答案，因为他`mysql_real_escape_string()`首先在错误的上下文中使用。如果您阅读该问题，则他正在逃避 FILENAME，因此他没有被注射的风险。如果您要投反对票，请至少说明原因..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T11:48:49.857

好的，所以您将要对所有查询使用 PDO。主要有以下几个原因：

1.  mysql_* 已被弃用。
2.  SQL 注入并不安全。
3.  PDO 能够访问众多数据库引擎，使其更加灵活而无需更改 API。

请查看这篇文章以了解如何使用 PDO 发出 SELECT。

[通过 PDO 进行参数化 SELECT 查询？](https://stackoverflow.com/questions/13812650/parameterized-select-queries-via-pdo)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T12:10:04.077

数据库中的值不应***包含***反斜杠。这就是您的查询*不匹配*的原因。`Girish's Photo`不匹配`Girish\'s Photo`。听起来你是[魔术引语](http://php.net/manual/en/security.magicquotes.php)的受害者。阅读[手册](http://php.net/manual/en/security.magicquotes.php)并摆脱它们。

# facebook - Facebook-ios-sdk-3.1 为 ios5 和 ios6 共享图像并获取相册照片

> ID：13819492
> 
> 赞同：0
> 
> 时间：2012-12-11T11:32:52.900
> 
> 标签：facebook, ios5, ios6, social-networking, facebook-ios-sdk

我在我的 ios 应用程序中集成了 FB SDK 3.1 以支持 iOS5 和 iOS6。

我可以在我的 FB 墙上成功分享 iOS6 的图像，但我无法在 iOS5 上进行分享。

任何人都知道如何使用 FBsdk 3.1 来实现这一点：

1) 使用适用于 iOS5 和 iOS6 的 FBsdk 3.1 共享图像（完成）

2) 获取 iOS5 和 iOS6 的用户相册照片。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:15:45.027

@ [Max](https://stackoverflow.com/users/1621656/max)：您可以在 facebook 上发布照片，如下所示...

```
[self performPublishAction:^{
        NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       imageToShare, @"picture",
                                       Description, @"caption",
                                       FACEBOOK_ACCESS_TOKEN],@"access_token",
                                       nil];

        [FBRequestConnection startWithGraphPath:@"me/photos" parameters:params HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
            if (!error) {
                NSLog(@"--- Post photo Result = %@",result);
            }else{
                NSLog(@"--- Error!!! :( = %@",error);
            }
        }];
 }]; 
```

# javascript - 更改 struts2 的标头值属性

> ID：13819495
> 
> 赞同：0
> 
> 时间：2012-12-11T11:33:03.587
> 
> 标签：javascript, struts2

我正在使用 Struts2 框架。我想更改`<s:select>`使用 javascript 的标头值。

这是我的代码：

```
<s:select label="Select Table" name="tableCheck" id="tableCheck" list="%{queryTableDisplay}" cssStyle="WIDTH:152px" headerKey="-1" headerValue="-- Select --"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:55:35.533

只需`select`通过 id 获取您的元素并更改 javascript 中的值。

```
// changes option value attribute
document.getElementById("tableCheck").options[0].value = "new_header_key";
// changes option inner HTML
document.getElementById("tableCheck").options[0].innerHTML = "new_header_value"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:03:04.650

即使我尝试过这样做，我也知道我们无法设置`<s:select>`使用 javascript 的标头值。在页面加载时，即在页面的DOM结构创建时，`<s:select>`展开和headerkey和header value形成select标签的option-name部分。您可以在页面源中查看它。但是，您可以通过某种方式将选择列表设置为某个默认值。要为下拉框自动选择默认值，只需在标签中声明一个“值”属性，并相应地设置默认值。

JAVA文件

```
public class SelectAction extends ActionSupport{

private List<String> searchEngine;
    private String yourSearchEngine;
//set default value
    public String getDefaultSearchEngine() {

        return "yahoo.com";
    }
  public SelectAction(){    
        searchEngine = new ArrayList<String>();
        searchEngine.add("google.com");
        searchEngine.add("bing.com");
        searchEngine.add("yahoo.com");
        searchEngine.add("baidu.com");
    }
    //...
} 
```

JSP

```
<s:select label="What's your favor search engine" 
        headerKey="-1" headerValue="Select Search Engines"
        list="searchEngine" 
        name="yourSearchEngine" 
        value="defaultSearchEngine" /> 
```

# python - os的makedirs和mkdir有什么区别？

> ID：13819496
> 
> 赞同：78
> 
> 时间：2012-12-11T11:33:07.343
> 
> 标签：python, linux, python-2.7

我很困惑使用这两种`os`方法来创建新目录。

请给我一些Python的例子。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-12-11T11:38:03.460

`makedirs()` [如果它们不存在，则创建所有中间目录](http://docs.python.org/2/library/os.html#os.makedirs)（就像`mkdir -p`在 bash 中一样）。

`mkdir()`可以创建单个子目录，如果指定了不存在的中间目录，则会抛出异常。

两者都可用于创建单个“叶”目录 (dirA)：

*   `os.mkdir('dirA')`
*   `os.makedirs('dirA')`

但是必须使用 makedirs 来创建“分支”：

*   `os.makedirs('dirA/dirB')`将工作[创建整个结构]

`mkdir`*如果* 已经存在，则可以在这里工作`dirA`，但如果不存在，则会引发错误。

请注意，与`mkdir -p`bash 不同，如果叶子已经存在，则两者都将失败。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-02-04T05:21:21.603

（不能评论，只是添加到 NPE 的答案。）

在 Python3 中，`os.makedirs`有一个默认参数`exist_ok=False`。
如果将其设置为`True`，则如果叶子存在，则**不会**`os.makedirs`抛出任何异常。 （虽然没有这个参数。） **`os.mkdir`**

 **像这样：

`os.makedirs('dirA', exist_ok=True)`

PS
您可以`?`在 IPython shell 中的方法名称前键入以快速查看文档。
例如：

```
>>> import os
>>> ? os.makedirs 
```**

# python - 是否可以防止python中的百分比字符串替换

> ID：13819497
> 
> 赞同：4
> 
> 时间：2012-12-11T11:33:10.023
> 
> 标签：python, string, substitution

```
>>> def mod2(n):
...   print 'the remainder is', n % 2
... 
>>> mod2(5)
the remainder is 1
>>> mod2(2)
the remainder is 0
>>> mod2('%d')
the remainder is 2
>>> mod2('%d\rHELLO. I AM A POTATO!')
HELLO. I AM A POTATO! 
```

有没有办法禁止`%`符号 ( `operator.mod`) 做古怪的字符串替换？如果我需要类似的东西，我总是使用`str.format`它，并且通常宁愿这个字符串替换功能根本不存在，`TypeError`而是给出一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:49:38.203

如果你想确保它`n`是一个数字，我认为最简单的方法是预先对其执行数字运算：

```
def mod2(n):
    n - 1
    print 'the remainder is', n % 2 
```

这将确保 a`TypeError`将被提出，因为您不能从字符串中删除，而您可以从所有数字类型中删除。

您可能希望将它包围在 try/catch 块中并引发您自己的异常，这对实际问题的描述性更强。

另请注意，在存储您的数据类型时可能需要更加小心。虽然 Python 是鸭子类型的，但遇到可以传入数字或字符串的情况有点奇怪。说明它不能正确处理字符串的注释可能是正确的调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T11:50:07.417

你不能用开关禁用它，不。该`str()`类型实现了一种处理格式的[`__mod__`方法](http://docs.python.org/2/reference/datamodel.html#object.__mod__)，这并不是 Python 将表达式仅用于字符串。

因此，为防止这种情况发生，您要么需要将`n`参数转换*为非*字符串（`int()`例如通过将其转换为），要么需要子类`str()`来覆盖该`__mod__`方法：

```
>>> class noformattingstr(str):
...     def __mod__(self, other):
...         raise TypeError('String formatting using "%" has been deprecated')
... 
>>> noformattingstr('hello world: %d') % 10
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in __mod__
TypeError: String formatting using "%" has been deprecated 
```

您可以将其分配给`__builtins__.str`，但这并不*意味着*所有字符串文字都将使用您的子类。您必须将`str()`值显式转换为`noformattingstr()`实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:42:59.883

在函数中使用 int() 强制转换 n。

```
def mod2(n):
    print 'the remainder is', int(n) % 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T11:49:45.467

我不知道为什么 eumiro 删除了他的答案，但这也是我的建议。除了我会明确检查类型以查找不受支持的类型，以使其对实际支持模运算符（如浮点数）的类型保持开放：

```
def mod2(n):
    if isinstance(n, basestring): # for Py3 use `isinstance(n, str)`
        raise TypeError('unsupported type')
    else:
        print 'the remainder is', n % 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T11:53:02.287

即使可以，您也不想这样做；大量代码仍然使用`%`字符串格式化方法，包括 Python 库中的代码。

`%`运算符编译为操作`BINARY_MODULO`码：

```
>>> dis.dis(mod2)
  2           0 LOAD_CONST               1 ('the remainder is')
              3 PRINT_ITEM          
              4 LOAD_FAST                0 (n)
              7 LOAD_CONST               2 (2)
             10 BINARY_MODULO       
             11 PRINT_ITEM          
             12 PRINT_NEWLINE       
             13 LOAD_CONST               0 (None)
             16 RETURN_VALUE 
```

这意味着在不修改参数的情况下无法阻止字符串格式化；如果您想允许任意数字类型在您的代码中工作，那么您需要允许它们以自己的方式处理模运算，即使用`%`运算符。

要检查参数是否为数字类型，请使用`numbers`：

```
from number import Number
if not isinstance(n, Number):
    raise TypeError(n) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T11:39:18.883

```
def mod2(n):
    print('the remainder is %d' % (n % 2))

mod2(5)
# the remainder is 1
mod2('%d\rHELLO. I AM A POTATO!')
# TypeError: %d format: a number is required, not str 
```

# javascript - Chrome 上的 Firebug Lite 导致页脚问题，是否有修复？

> ID：13819506
> 
> 赞同：2
> 
> 时间：2012-12-11T11:33:44.707
> 
> 标签：javascript, jquery, google-chrome, firebug, firebug-lite

我是 Chrome 用户，如果没有 Firebug，我会迷失方向，但有一个问题一直困扰着我。也就是说，Firebug 控制台没有出现在您正在查看的站点下方的事实（即它在 Firefox 中的行为方式）。相反，控制台位于站点上方，隐藏了页脚和内容。这是一件小事，但同样很烦人。

我知道这是因为谷歌限制 Chrome 扩展的方式，但有没有办法解决这个特定问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:33:44.707

我在任何地方都没有找到解决方案。所以，在其他堆栈溢出线程的帮助下，我想出了一个非常简单的函数，因为我找不到太多关于这个的东西，我想我会把它贴在这里给任何有问题的人。

我不是 JavaScript 程序员，但我确实使用 jQuery。因此，我在 jQuery 的 ready 方法中运行它。网站加载后，它会检查 Fire bug 是否打开，如果是，它会简单地为正文添加 400 像素的底部边距。显然，如果您的控制台比这更大/更小，只需更改 jQuery 代码中的大小。

但是，如果您打开站点然后打开 Firebug，它不会改变任何内容。这没什么大不了的，只需打开 Firebug 然后刷新页面即可。

```
// add body margin if firebug is open
if (console.log.toString().indexOf('apply') != -1 && navigator.userAgent.toLowerCase().indexOf('chrome') > -1) {
    $('body').css('margin-bottom', '400px');
} 
```

希望这对某人有用。

编辑：

警告：这可能会导致您的 jQuery 在 Internet Explorer 中停止工作。所以，如果你发现你的 jQuery 不起作用，只需删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:39:47.220

与其修改可能会产生不利影响的网页 CSS 代码，不如在 Chrome 中分离 Firebug Lite，然后将该弹出窗口放置在调整大小的 Chrome 浏览器窗口下方。

要执行此操作，只需按下位于右上角的 Firebug Lite 窗口中的中心按钮。

如果有帮助，请右键单击下面的图像并以全尺寸查看：
`Open Image in New Tab`/`View Image`

![在此处输入图像描述](../Images/5d03df68e5fe8b2087b725ea69fba5bc.png)

这样，您将有两个独立的区域，它们不重叠但可以很好地一起玩。

* * *

Per Stan 上面的评论...关于[**Firebug Lite**](https://getfirebug.com/firebuglite)与原生 Chrome 的开发者工具相比提供了哪些额外功能，我不得不说它提供了`DOM Tab`Chrome 所缺乏的熟悉度和出色功能。

更重要的是，您实际上可以同时使用两个***控制台***。

这允许更轻松地监视两个不同的窗格，并且通过**多监视器设置**，这可能是一个有用的场景。即使有一个大显示器，事情看起来也不错。

如果有帮助，请右键单击下面的图像并以全尺寸查看：
`Open Image in New Tab`/`View Image`

![在此处输入图像描述](../Images/c919cb8fcaf6d4e45d2a32e0bd37b8ae.png)

# c++ - 使用 .NET 4.5 和混合程序集时出现未知异常

> ID：13819511
> 
> 赞同：1
> 
> 时间：2012-12-11T11:33:54.377
> 
> 标签：c++, .net, command-line-interface, mixed

安装新的 .Net Framework（4.5 版）时出现问题。我正在开发一个通过本机代码访问的插件程序集。该库是使用 Visual Studio 2010 和 .NET 4.0 作为目标平台构建的。

以下代码片段在 .NET 4.5 中引发异常，并且在 .NET 4.0 中运行良好。知道如何解决这个问题吗？

```
#pragma managed(push, off)
#pragma managed(push, on)

static bool ManagedTestFunction() {
    return false;
}

#pragma managed(pop)

static void CheckIfManagedUnmanagedTransitionIsPossible() 
{
    try 
    {
        ManagedTestFunction();
    }
    catch (...) 
    {
        throw misc::mwException(0, _T("The program is not working if .NET Framework 4.5 is installed. Please revert to previous version .NET 4.0!"));
    }
}; 
```

此致

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:20:46.207

最后我自己解决了这个问题。由于 .NET 4.5 中的一些优化，这可能是一个概念问题。考虑以下示例：

```
// managed class
ref class A
{
}

// native class holding a reference to A
class B 
{
    msclr::gcroot<A^> m_refA;
}; 
```

当第一次跨越本机托管边界时，新的 .NET Framework 会尝试解析在本机类中引用的所有托管类型，无论它们是否实际使用。那时，还不能订阅 AppDomain.ResolveAssembly 事件。如果框架无法解析类型，则会发生崩溃。

一种可能的解决方案是修改 B 类，使其存储对 System::Object^ 的引用，并使用“cli_safe((System::Object^) m_refA)”动态转换

此致

迈克尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:52:01.330

我会看看最初抛出了什么异常——这应该会给你一个线索，说明为什么代码在 .NET Framework 4.5 下不起作用。

# tfs - 将 TFS 2010 升级到 2012 更新 1/就绪检查错误 TF400129：验证团队项目集合是否有空间用于新系统字段

> ID：13819512
> 
> 赞同：0
> 
> 时间：2012-12-11T11:34:00.093
> 
> 标签：tfs, upgrade, argumentexception

我正在将 TFS 2010 升级到 TFS 2012 Update 1。SQL Server 2008 R2 Service Pack 2 位于同一个服务器机箱上。目前我们有三个项目集合，每个集合中有 1-2 个项目，使用轻微修改的 Scrum 和敏捷模板。

在准备检查期间报告以下错误：

TF400129：就绪检查出错：验证团队项目集合是否有空间用于新系统字段

以下是日志文件的摘录：

```
[Info   @08:50:44.021] +-+-+-+-+-| Verifying that the team project collection has space for new system fields |+-+-+-+-+-
[Info   @08:50:44.021] Starting Node: VUPFLDLMT
[Info   @08:50:44.021] NodePath : VINPUTS/Progress/Conditional/VPCUPGRADE/VCOLLECTIONSREACHABLE/VUPFLDLMT
[Info   @08:50:44.021] Getting Reachable Collections
[Info   @08:50:44.021] Reachable collections found: 2
[Error  @08:50:44.131] System.ArgumentNullException: Value cannot be null.
Parameter name: serviceLevel
    at Microsoft.TeamFoundation.Common.TFCommonUtil.CheckStringForNullOrEmpty(String stringVar, String stringVarName, Boolean trim)
    at Microsoft.TeamFoundation.Framework.Server.ServiceLevel..ctor(String serviceLevel)
    at Microsoft.TeamFoundation.Admin.VerifyFieldLimitNotExceededInAllTpcs.GetNewFieldCount(String connectionString)
    at Microsoft.TeamFoundation.Admin.VerifyFieldLimitNotExceededInAllTpcs.Run(ActivityContext context)
    at Microsoft.TeamFoundation.Admin.Engine.AdminNode.RunNode()
    at Microsoft.TeamFoundation.Admin.Engine.AdminNode.Run(String& message, Boolean& continueOnError)
[Error  @08:50:44.131] Unhandled message not defined for task VUPFLDLMT:Verifying that the team project collection has space for new system fields
[Error  @08:50:44.131] TF400129: Error from readiness check: Verifying that the team project collection has space for new system fields
[Info   @08:50:44.131] Completed VerifyFieldLimitNotExceededInAllTpcs: Error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:51:17.737

由于某种原因，我们的项目集合之一留在了 Install stata 中。扩展属性 TFS_SERVICE_LEVEL_TO 设置为 TFS2010.RTM，但数据库中没有定义 TFS_SERVICE_LEVEL 属性。我们仍然无法弄清楚项目集合最初是如何处于安装状态的。

幸运的是，我们将损坏的集合用作游乐场，因此我们可以安全地删除它，因为它不包含任何重要数据。一旦我们使用 TfsConfig 工具删除了探测收集，我们就能够执行升级到 TFS 2012 Update 1 而不会出现任何验证错误。

```
TfsConfig.exe delete {CollectionName} 
```

如果您遇到类似问题，请使用以下查询检查 SQL Server dababase 扩展属性，以验证团队项目集合数据库是否损坏

```
USE {Tfs_CollectionName}
GO
select * from sys.extended_properties 
```

TFS_SERVICE_LEVEL 属性必须存在并且必须设置该属性的值才能执行升级。

# javascript - 如何在浏览器上渲染 Jade 代码？

> ID：13819514
> 
> 赞同：0
> 
> 时间：2012-12-11T11:34:12.477
> 
> 标签：javascript, javascript-framework, pug

我是 Jade 的新手，我想知道如何运行 .jade 文件，我正在使用 Node.js 并安装了 Jade 节点模块.. 运行代码并在浏览器中找到它的下一步是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:28:12.163

1) You must run your Node.js server on the command line.

```
$ node app.js 
```

2) Go to your browser and use the port number that your server is running on. Generally you want to console.log the port number in your app.js file so the port is displayed on the command line.

```
localhost:3000 
```

3) [https://github.com/visionmedia/jade](https://github.com/visionmedia/jade) for examples and more documentation to get you off the ground.

# android - 简单对话框中的 ViewPager

> ID：13819516
> 
> 赞同：2
> 
> 时间：2012-12-11T11:34:18.530
> 
> 标签：android, dialog, android-fragments, android-viewpager

我想在对话框中使用 ViewPager 但失败了！这是所有的代码。对话框中将显示两个片段：

# 布局

**主要的.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Main" >

<Button
    android:id="@+id/button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="dialog" />

</RelativeLayout> 
```

**details.xml**（片段布局）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/detailsText"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_gravity="center_horizontal|center_vertical"
    android:layout_marginTop="20dip"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="30dip" />

</LinearLayout> 
```

**image.xml**（片段布局）

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

**对话框.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" />

<com.viewpagerindicator.CirclePageIndicator
    android:id="@+id/indicator"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="10dip" />

</LinearLayout> 
```

**主.java**

```
public class Main extends FragmentActivity {

private Button button;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    setupUIComponents();
    setupListeners();
}

private void setupUIComponents() {
    button = (Button) findViewById(R.id.button);
}

private void setupListeners() {
    button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            MyDialog dialog = new MyDialog(Main.this);
            dialog.startDialog();
        }
    });
}
} 
```

**MyDialog.java**

```
public class MyDialog extends FragmentActivity {

private Dialog dialog;
private Context context;
private CirclePageIndicator mIndicator;
private Main mMain;
private ViewPager mPager;
private FragmentAdapter mAdapter;

public MyDialog(Context context) {
    super();
    this.context = context;
    this.mMain = (Main) context;
}

public void startDialog() {
    dialog = new Dialog(context);
    dialog.setContentView(R.layout.dialog);

    mAdapter = new FragmentAdapter(mMain.getSupportFragmentManager());
    mPager = (ViewPager) dialog.findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    mIndicator = (CirclePageIndicator) dialog.findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);
    mIndicator.setCurrentItem(0);

    dialog.show();
}

} 
```

**片段适配器.java**

```
public class FragmentAdapter extends FragmentPagerAdapter {
public FragmentAdapter(FragmentManager fm) {
    super(fm);
}

@Override
public Fragment getItem(int which) {
    switch (which) {
        case 0:
            ImageFragment imageFragment = new ImageFragment();
            return imageFragment;
        case 1:
            DetailFragment detailsFragment = new DetailFragment();
            return detailsFragment;
    }
    return null;
}

@Override
public int getCount() {
    return 2;
}

} 
```

**详细信息Fragment.java**

```
public class DetailFragment extends Fragment {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);
    View view = inflater.inflate(R.layout.details, container, false);
    TextView textView = (TextView) view.findViewById(R.id.detailsText);
    textView.setText("Testing");
    return view;
}
} 
```

**ImageFragment.java**

```
public class ImageFragment extends Fragment {

public ImageFragment() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState);
    View view = inflater.inflate(R.layout.image, container, false);
    ImageView imageView = (ImageView) view.findViewById(R.id.imageView1);
    imageView.setImageDrawable(getResources().getDrawable(R.drawable.ic_launcher));
    return view;
}
} 
```

为了快速总结代码，Main.java 被启动，单击该按钮将在视图分页器中启动一个包含两个片段的对话框。

**有堆栈跟踪：**

```
12-11 11:28:15.999: E/AndroidRuntime(7453): FATAL EXCEPTION: main
12-11 11:28:15.999: E/AndroidRuntime(7453): java.lang.IllegalArgumentException: No view found for id 0x7f040006 for fragment ImageFragment{410a2468 #0 id=0x7f040006 android:switcher:2130968582:0}
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:864)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:139)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.support.v4.view.ViewPager.populate(ViewPager.java:804)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1016)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.View.measure(View.java:15172)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.View.measure(View.java:15172)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.View.measure(View.java:15172)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.View.measure(View.java:15172)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.View.measure(View.java:15172)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.View.measure(View.java:15172)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1850)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1077)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1275)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4214)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.Choreographer.doFrame(Choreographer.java:525)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.os.Handler.handleCallback(Handler.java:615)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.os.Looper.loop(Looper.java:137)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at android.app.ActivityThread.main(ActivityThread.java:4966)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at java.lang.reflect.Method.invokeNative(Native Method)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at java.lang.reflect.Method.invoke(Method.java:511)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
12-11 11:28:15.999: E/AndroidRuntime(7453):     at dalvik.system.NativeStart.main(Native Method) 
```

同样，是否可以在对话框中的 viewpager 中显示片段？如果是这样，我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:56:54.383

> 同样，是否可以在对话框中的 viewpager 中显示片段？

是的，但不是您尝试的方式（如果我没有在您的代码中遗漏某些内容），`ViewPager`将无法附加那些`Fragments`放置在对话框中的孩子。`4.2`API 级别带来了嵌套的[片段](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)（但也可以在具有新版本兼容性包的较低版本上使用），您应该使用它来显示“对话片段”。

在您的`Main`活动中，您将创建一个`DialogFragment`并且`DialogFragment`您将设置`ViewPager`并传递`getChildFragmentManager()`给它的适配器。

另外，只需在活动中使用移动`startDialog()`方法，**不要**实例化一个新方法，因为这不是 Android 的方式（在你的情况下它可以工作，因为你没有用它做任何事情）。`Main`**`Activity`**

# lua - Corona Sdk：故事板 API 和对象 alpha（不透明度）

> ID：13819520
> 
> 赞同：0
> 
> 时间：2012-12-11T11:34:20.493
> 
> 标签：lua, coronasdk

我在故事板电晕应用程序中更改对象 alpha 时遇到问题。

加载页面时，该对象的默认 alpha 为 0（它是不可见的）。然后，通过单击一个按钮，他的 alpha 设置为 1（它变得可见）。

如果我离开页面，移动到另一个故事板页面，然后返回，该对象仍然可见，即使我在让我回到其他页面的函数中使用此代码再次将他的 alpha 设置回 0：

```
local function gotoHomefun()
if objectname then
objectname.alpha = 0
end
storyboard.gotoScene( "home", "crossFade", 400 )
return true
end 
```

在destroyScene 事件中：

```
function scene:destroyScene( event )
local group = self.view
if objectname then
objectname.alpha = 0
objectname :removeSelf()    
objectname = nil
end
display.remove( group )
group = nil     
end 
```

我真的不知道是我做错了什么，还是我发现了一个错误。

任何帮助将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:58:25.730

你打电话`removeScene`还是`purgeScene`从其他场景？

如果不是，那么除非内存不足，否则您的场景将不会被删除。`exitScene`尝试在将视图更改为新场景时调用的事件中设置执行当前代码。

有关事件的具体细节，请参阅此文档 - [Storyboard Lifecycle Events](http://www.coronalabs.com/blog/2011/11/14/introducing-the-storyboard-api/)

# eclipse - 如何从 Eclipse 内部运行 Eclipse

> ID：13819521
> 
> 赞同：0
> 
> 时间：2012-12-11T11:34:20.470
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我想创建一个非常简单的 eclipse 项目（插件/功能/产品/任何东西），在执行时创建一个新的 eclipse 实例，就像当前安装在我的系统中的实例一样。

这应该是一个简单的任务，但我搜索了互联网并没有找到任何可行的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:40:52.510

1.  创建插件
2.  右键单击项目资源管理器中的插件
3.  选择“运行为 Eclipse 应用程序”（或类似的东西）

并且一个新的 Eclipse 实例开始运行/包括您的插件。

# android - 使用 php 1 将 Android 与 MySQL 数据库连接时，eclipse logcat 中发生错误

> ID：13819528
> 
> 赞同：-2
> 
> 时间：2012-12-11T11:34:40.250
> 
> 标签：android, android-emulator

```
I am using the code I found in the following tutorial to connect an Android application with a MySQL database with the help of a php script I found here 
```

[http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/) 我下载了代码并尝试在模拟器中执行项目。我的应用程序是在模拟器中创建的，我是能够做`mainscreenactivity`但不能移动到下一个活动来做`CRUD`操作。在模拟器中，加载后它说，不幸的是， `MainScreen has stopped`作为弹出消息。我的应用程序名称是`MainScreen`. 我检查了我的 Eclipse LogCat，它显示以下错误。如果有人能帮我解决这个问题，我将不胜感激。

**日志猫：**

```
12-12 07:41:01.496: E/ActivityThread(685): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d5daa8 that was originally bound here 
```

12-12 07:41:01.496: E/ActivityThread(685): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService 泄露了原来绑定的ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d5daa8这里 12-12 07:41:01.496: E/ActivityThread(685): 在 android.app.LoadedApk$ServiceDispatcher.(LoadedApk.java:969) 12-12 07:41:01.496: E/ActivityThread(685): 在android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863) 12-12 07:41:01.496: E/ActivityThread(685): 在 android.app.ContextImpl.bindService(ContextImpl.java:1418) 12-12 07: 41:01.496: E/ActivityThread(685): 在 android.app.ContextImpl.bindService(ContextImpl.java:1407) 12-12 07:41:01.496: E/ActivityThread(685): 在 android.content.ContextWrapper.bindService (ContextWrapper.java:473) 12-12 07:41:01.496: E/ActivityThread(685): at com.android。emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157) 12-12 07:41:01.496: E/ActivityThread(685): at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145) 12 -12 07:41:01.496: E/ActivityThread(685): 在 com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191) 12-12 07:41:01.496: E/ActivityThread(685):在 com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850) 12-12 07:41:01.496: E/ActivityThread(685): 在 com.android.emailcommon.utility.Utility$2.doInBackground(Utility. java:551) 12-12 07:41:01.496: E/ActivityThread(685): at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549) 12-12 07:41:01.496: E /ActivityThread(685): 在 android.os.AsyncTask$2.call(AsyncTask.java:287) 12-12 07:41:01.496: E/ActivityThread(685): 在 java.util.concurrent.FutureTask.run(FutureTask .java:234) 12-12 07:41:01.496: E/ActivityThread(685): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080) 12-12 07:41:01.496: E/ActivityThread( 685): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 12-12 07:41:01.496: E/ActivityThread(685): 在 java.lang.Thread.run(Thread.java ：856）12-12 07：41：01.526：E / StrictMode（685）：空12-12 07：41：01.526：E / StrictMode（685）：android.app.ServiceConnectionLeaked：服务com.android.exchange.ExchangeService已泄露 ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d5daa8 最初绑定在这里 12-12 07:41:01.526: E/StrictMode(685): at android.app.LoadedApk$ServiceDispatcher.(LoadedApk.java :969) 12-12 07:41:01.526: E/StrictMode(685): 在 android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863) 12-12 07:41:01.526: E/StrictMode(685): 在 android.app.ContextImpl.bindService(ContextImpl.java:1418) 12-12 07:41:01.526: E/StrictMode(685): 在android.app.ContextImpl.bindService(ContextImpl.java:1407) 12-12 07:41:01.526: E/StrictMode(685): 在 android.content.ContextWrapper.bindService(ContextWrapper.java:473) 12-12 07: 41:01.526: E/StrictMode(685): 在 com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157) 12-12 07:41:01.526: E/StrictMode(685): 在 com.android .emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145) 12-12 07:41:01.526: E/StrictMode(685): at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191) 12-12 07:41:01.526: E/StrictMode(685): 在 com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850) 12-12 07:41:01.526: E/StrictMode(685):在 com.android.emailcommon。utility.Utility$2.doInBackground(Utility.java:551) 12-12 07:41:01.526: E/StrictMode(685): at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549) 12 -12 07:41:01.526：E/StrictMode(685)：在 android.os.AsyncTask$2.call(AsyncTask.java:287) 12-12 07:41:01.526：E/StrictMode(685)：在 java。 util.concurrent.FutureTask.run(FutureTask.java:234) 12-12 07:41:01.526: E/StrictMode(685): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080) 12-12 07:41:01.526: E/StrictMode(685): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 12-12 07:41:01.526: E/StrictMode(685): 在 java .lang.Thread.run(Thread.java:856)41:01.526: E/StrictMode(685): 在 android.os.AsyncTask$2.call(AsyncTask.java:287) 12-12 07:41:01.526: E/StrictMode(685): 在 java.util.concurrent。 FutureTask.run(FutureTask.java:234) 12-12 07:41:01.526: E/StrictMode(685): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080) 12-12 07:41: 01.526: E/StrictMode(685): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 12-12 07:41:01.526: E/StrictMode(685): 在 java.lang.Thread .run(Thread.java:856)41:01.526: E/StrictMode(685): 在 android.os.AsyncTask$2.call(AsyncTask.java:287) 12-12 07:41:01.526: E/StrictMode(685): 在 java.util.concurrent。 FutureTask.run(FutureTask.java:234) 12-12 07:41:01.526: E/StrictMode(685): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080) 12-12 07:41: 01.526: E/StrictMode(685): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 12-12 07:41:01.526: E/StrictMode(685): 在 java.lang.Thread .run(Thread.java:856)util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 12-12 07:41:01.526: E/StrictMode(685): at java.lang.Thread.run(Thread.java:856)util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 12-12 07:41:01.526: E/StrictMode(685): at java.lang.Thread.run(Thread.java:856)

**mysql数据库：**

```
CREATE DATABASE androidhive;

CREATE TABLE products(
pid int(11) primary key auto_increment,
name varchar(100) not null,
price decimal(10,2) not null,
description text,
created_at timestamp default now(),
updated_at timestamp
);

**php script:**

**db_config.php**

db_config.php
<?php

/*
 * All database connection variables
 */

define('DB_USER', "root"); // db user
define('DB_PASSWORD', ""); // db password (mention your db password here)
define('DB_DATABASE', "androidhive"); // database name
define('DB_SERVER', "localhost"); // db server
?>

**db_connect.php**

db_connect.php
<?php

/**
 * A class file to connect to database
 */
class DB_CONNECT {

    // constructor
    function __construct() {
        // connecting to database
        $this->connect();
    }

    // destructor
    function __destruct() {
        // closing db connection
        $this->close();
    }

    /**
     * Function to connect with database
     */
    function connect() {
        // import database connection variables
        require_once __DIR__ . '/db_config.php';

        // Connecting to mysql database
        $con = mysql_connect(DB_SERVER, DB_USER, DB_PASSWORD) or die(mysql_error());

        // Selecing database
        $db = mysql_select_db(DB_DATABASE) or die(mysql_error()) or die(mysql_error());

        // returing connection cursor
        return $con;
    }

    /**
     * Function to close db connection
     */
    function close() {
        // closing db connection
        mysql_close();
    }

}

?>

**Mysql CRUD operation:**

**Creating a row:**

**create_product.php**

<?php

/*
 * Following code will create a new product row
 * All product details are read from HTTP Post Request
 */

// array for JSON response
$response = array();

// check for required fields
if (isset($_POST['name']) && isset($_POST['price']) && isset($_POST['description'])) {

    $name = $_POST['name'];
    $price = $_POST['price'];
    $description = $_POST['description'];

    // include db connect class
    require_once __DIR__ . '/db_connect.php';

    // connecting to db
    $db = new DB_CONNECT();

    // mysql inserting a new row
    $result = mysql_query("INSERT INTO products(name, price, description) VALUES('$name', '$price', '$description')");

    // check if row inserted or not
    if ($result) {
        // successfully inserted into database
        $response["success"] = 1;
        $response["message"] = "Product successfully created.";

        // echoing JSON response
        echo json_encode($response);
    } else {
        // failed to insert row
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";

        // echoing JSON response
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}
?>

**Reading a row:**

**get_product_details.php**

<?php

/*
 * Following code will get single product details
 * A product is identified by product id (pid)
 */

// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// check for post data
if (isset($_GET["pid"])) {
    $pid = $_GET['pid'];

    // get a product from products table
    $result = mysql_query("SELECT *FROM products WHERE pid = $pid");

    if (!empty($result)) {
        // check for empty result
        if (mysql_num_rows($result) > 0) {

            $result = mysql_fetch_array($result);

            $product = array();
            $product["pid"] = $result["pid"];
            $product["name"] = $result["name"];
            $product["price"] = $result["price"];
            $product["description"] = $result["description"];
            $product["created_at"] = $result["created_at"];
            $product["updated_at"] = $result["updated_at"];
            // success
            $response["success"] = 1;

            // user node
            $response["product"] = array();

            array_push($response["product"], $product);

            // echoing JSON response
            echo json_encode($response);
        } else {
            // no product found
            $response["success"] = 0;
            $response["message"] = "No product found";

            // echo no users JSON
            echo json_encode($response);
        }
    } else {
        // no product found
        $response["success"] = 0;
        $response["message"] = "No product found";

        // echo no users JSON
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}
?>

**Reading all rows:**

**get_all_products.php**

<?php

/*
 * Following code will list all the products
 */

// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// get all products from products table
$result = mysql_query("SELECT *FROM products") or die(mysql_error());

// check for empty result
if (mysql_num_rows($result) > 0) {
    // looping through all results
    // products node
    $response["products"] = array();

    while ($row = mysql_fetch_array($result)) {
        // temp user array
        $product = array();
        $product["pid"] = $row["pid"];
        $product["name"] = $row["name"];
        $product["price"] = $row["price"];
        $product["created_at"] = $row["created_at"];
        $product["updated_at"] = $row["updated_at"];

        // push single product into final response array
        array_push($response["products"], $product);
    }
    // success
    $response["success"] = 1;

    // echoing JSON response
    echo json_encode($response);
} else {
    // no products found
    $response["success"] = 0;
    $response["message"] = "No products found";

    // echo no users JSON
    echo json_encode($response);
}
?>

**Updating a row:**

**update_product.php**

<?php

/*
 * Following code will update a product information
 * A product is identified by product id (pid)
 */

// array for JSON response
$response = array();

// check for required fields
if (isset($_POST['pid']) && isset($_POST['name']) && isset($_POST['price']) && isset($_POST['description'])) {

    $pid = $_POST['pid'];
    $name = $_POST['name'];
    $price = $_POST['price'];
    $description = $_POST['description'];

    // include db connect class
    require_once __DIR__ . '/db_connect.php';

    // connecting to db
    $db = new DB_CONNECT();

    // mysql update row with matched pid
    $result = mysql_query("UPDATE products SET name = '$name', price = '$price', description = '$description' WHERE pid = $pid");

    // check if row inserted or not
    if ($result) {
        // successfully updated
        $response["success"] = 1;
        $response["message"] = "Product successfully updated.";

        // echoing JSON response
        echo json_encode($response);
    } else {

    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}
?>

**Deleting a row:**

**delete_product.php**

<?php

/*
 * Following code will delete a product from table
 * A product is identified by product id (pid)
 */

// array for JSON response
$response = array();

// check for required fields
if (isset($_POST['pid'])) {
    $pid = $_POST['pid'];

    // include db connect class
    require_once __DIR__ . '/db_connect.php';

    // connecting to db
    $db = new DB_CONNECT();

    // mysql update row with matched pid
    $result = mysql_query("DELETE FROM products WHERE pid = $pid");

    // check if row deleted or not
    if (mysql_affected_rows() > 0) {
        // successfully updated
        $response["success"] = 1;
        $response["message"] = "Product successfully deleted";

        // echoing JSON response
        echo json_encode($response);
    } else {
        // no product found
        $response["success"] = 0;
        $response["message"] = "No product found";

        // echo no users JSON
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}
?> 
```

我的 android 代码在我的第二篇文章中。请检查代码并建议我修复错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:43:59.753

尝试在 oncreate() 方法中添加以下两行代码。

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 
```

顺便说一句，除此之外，您可能还有其他原因无法获得输出。但我无法回答，因为您没有提供代码。如果您使用更多详细信息编辑您的问题，如果可以的话，我可能会回答这些问题。

# android - 滚动时如何在图库中保持选定的图像状态？

> ID：13819532
> 
> 赞同：1
> 
> 时间：2012-12-11T11:34:58.013
> 
> 标签：android, android-layout, android-widget

我正在使用图库来显示图像并在 LongClick 上更改图库项目的背景。但是当我滚动图库时，它处于原始状态意味着它显示的是原始图像而不是更改后的图像。

我无法维持画廊项目的选定状态。

请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:38:36.043

好吧，当您在适配器中使用回收视图时，这是一种常见的情况。您可以保存所选位置，然后在您的 getView() 方法中检查该位置是否等于所选位置，如果是，则设置视图选择状态。

# xamarin.android - 在 TabHost 中添加选项卡时 ViewModel 数据丢失

> ID：13819537
> 
> 赞同：1
> 
> 时间：2012-12-11T11:35:22.960
> 
> 标签：xamarin.android, mvvmcross

我正在尝试使用 Cirrious Conference 示例创建一个选项卡式视图，但似乎在显示我的数据时遇到了问题。当在下面的代码中专门调用承载选项卡的视图时，就会出现问题

`// Initialize a TabSpec for each tab and add it to the TabHost spec = TabHost.NewTabSpec("welcome"); spec.SetIndicator(this.GetText("Welcome"),Resources.GetDrawable(Resource.Drawable.Tab_Welcome)); spec.SetContent(CreateIntentFor(ViewModel.Welcome)); TabHost.AddTab(spec);`

我的 ViewModel 课程如下

```
public class WelcomeViewModel : MvxViewModel
{
    private string _description;
    public string Description
    {
        get
        {
            return _description;
        }
        set
        {
            _description = value;
            FirePropertyChanged("Description");
        }
    }

    public WelcomeViewModel(string description)
    {
       Description = description;
    }

    public WelcomeViewModel()
    {

    }
} 
```

ViewModel.Welcome 对象是使用传递给它的数据创建和初始化的，并且在控制传递 SetContent 方法之前一直如此，但是当调用 AddTab 时，WelcomeViewModel 构造函数似乎再次被调用并且数据被重置。调用堆栈将此跟踪到

`base.OnCreate(bundle);`

在 BaseTabbedView 类中调用。如何保留 WelcomeViewModel 中的数据，以便它显示在我的选项卡中，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:13:03.177

我有一种感觉，这可能是我几周前修复的一个错误。

错误是用于存储这些子视图模型的缓存从 0 开始索引 - 并且 0 也被 Android Intent 视为空值。

* * *

在 vnext 中，请参阅此签入[https://github.com/slodge/MvvmCross/commit/bcebadffee3850857d6a73070704e72b3aa72bcb](https://github.com/slodge/MvvmCross/commit/bcebadffee3850857d6a73070704e72b3aa72bcb)

在master中，见[https://github.com/slodge/MvvmCross/commit/c3171e27168bf2b7e48dd73d105f5a08870cec5a](https://github.com/slodge/MvvmCross/commit/c3171e27168bf2b7e48dd73d105f5a08870cec5a)

# c# - 如果 udp 客户端接收到 datagam，我们可以信任数据完整性吗？

> ID：13819538
> 
> 赞同：2
> 
> 时间：2012-12-11T11:35:25.983
> 
> 标签：c#, udp

由于 UDP 是一种无连接协议，因此我们知道无法保证接收方会接收到数据。但是如果收到数据报，数据是否可能部分/完全损坏？

UDP标头也包含CRC，所以这让我觉得如果收到数据报，数据会可靠吗？这是正确的还是不正确的？

为了更详细地说明问题，我从 Java udp 服务器发送数据，例如

```
// Sending in Java
InetAddress group = InetAddress.getByName("230.0.0.1");
    //buf is a String.getBytes();
DatagramPacket packet = new DatagramPacket(buf, buf.length, group, 4446);
//socket is DatagramSocket in Java
socket.send(packet); 
```

并像这样在 C# 客户端中获取数据

```
 // client  is UdpClient of C#
       Byte[] data = client.Receive(ref localEp);                        
       strData = Encoding.ASCII.GetString(data); 
```

我自己不是在操作 CRC，在接收器端我得到了在 buf 中发送的相同数据，所以我如何在这里检查 CRC，因为我有一个字节数据数组..？或假设它是正确的（我可以忍受那些 CRC 匹配的极端情况，即 CRC 和数据被神奇地损坏）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:40:06.660

假设硬件、操作系统和 IP 堆栈正常工作，IP 校验和可确保单数据包完整性。

我提到了这个假设，因为我已经看到许多 IP 校验和被关闭的案例（在总是返回“OK”的意义上）出于性能原因，或者作为实现缺陷：一些 NIC 可以在硬件中进行校验和，但是不好或错误驱动程序参数可能会毁了你的一天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:39:50.907

默认情况下，操作系统会拒绝校验和无效的数据包。这意味着您将收到比正确数据包更少的坏数据包。但是您可以配置套接字以允许将部分/损坏的数据包传播到用户空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:40:33.647

如果校验和（技术上不是 CRC）正确，您可以相信数据报是完整的，但这并不意味着您可以信任数据。校验和公式没有什么神奇之处，因此更改数据的过程只能重新计算校验和，而您永远不会知道。

# dojo - 如何动态隐藏道场数据网格中的列？

> ID：13819539
> 
> 赞同：1
> 
> 时间：2012-12-11T11:35:32.663
> 
> 标签：dojo, hidden, dojox.grid.datagrid

我目前正在使用dojo 1.7。我的要求是我需要根据特定状态在网格中动态显示一列。Onload 列应该在网格中可见。但是，如果我将一个状态文本字段设置为非活动状态并在该数据网格内搜索列，则应该隐藏。我尝试了网站上提供的各种技术，但许多技术不符合我的要求，而有些技术没有达到预期的结果。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:54:35.287

我找到了我的问题的答案。可以使用下面提到的代码隐藏 dojo 数据网格中的任何列。

```
grid.layout.setColumnVisibility(columnIndex,booleanValue); 
```

# google-chrome-extension - 如何在扩展中解决 Access-Control-Allow-Origin

> ID：13819541
> 
> 赞同：2
> 
> 时间：2012-12-11T11:35:42.000
> 
> 标签：google-chrome-extension

由于相同的来源策略，我的请求失败了，但是无论如何我可以在扩展中使用 webRequest api 修改标头来解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T11:35:42.000

将此添加到您的 background.js 文件中：

```
/**
 * Force Access-Control-Allow-Origin
 *
 * Ideally, we'll want to remove this for production,
 * and actually set the header server side instead.
 */
chrome.webRequest.onHeadersReceived.addListener(function onHeadersReceived(resp) {
  var len = resp.responseHeaders.length;
  while(--len) {
    if(resp.responseHeaders[len].name.toLowerCase() === "access-control-allow-origin") {
      resp.responseHeaders[len].value = "*";
      break;
    }
  }
  if (len === 0) { //if we didn't find it len will be zero
    resp.responseHeaders.push({
      'name': 'Access-Control-Allow-Origin',
      'value': '*'
    });
  }
  return {responseHeaders: resp.responseHeaders};
}, {
  urls: ['*://*.YOU-API-DOMAIN.com/*', '*://localhost/*'],
  /*TYPES: "main_frame", "sub_frame", "stylesheet", "script",
           "image", "object", "xmlhttprequest", "other" */
  types: ['xmlhttprequest']
}, ['blocking', 'responseHeaders']); 
```

并将这些添加到您的 manifest.json 权限中：

```
"webRequest",
"webRequestBlocking" 
```

重新加载扩展，你应该很高兴！

# c# - 在 ITextSharp 中合并来自相同表单的 PDF 字段

> ID：13819550
> 
> 赞同：0
> 
> 时间：2012-12-11T11:36:21.737
> 
> 标签：c#, pdf, itextsharp

我有两个 PDF 表格 - 一个原始表格和一个新表格。新表单上有`x`大量额外`acro fields`内容，但没有原始 PDF 字段。

我想将旧 PDF 中的字段合并到新的 PDF 表单中。新字段/字段会移动旧字段的一些占位符，因此它们可能会重叠或不在正确的位置，但这无关紧要。

**我试过的**

```
//Get the old PDF
PdfReader oldPdfReader = new PdfReader("Old.Pdf");
MemoryStream oldMs = new MemoryStream();
PdfStamper oldPdfStamper = new PdfStamper(oldPdfReader, oldMs);
//Get the new PDF
PdfReader newPdfReader = new PdfReader("New.Pdf");
MemoryStream newMs = new MemoryStream();
PdfStamper newPdfStamper = new PdfStamper(newPdfReader, newMs);

foreach(var oldField in oldPdfStamper.AcroFields.Fields)
{
   //Do a check to see if the field isn't already added
   if(!newPdfStamper.AcroFields.Fields.Any(x => x.Key == oldField.Key))
      newPdfStamper.AcroFields.Fields.Add(oldField);
} 
```

即使调试命中，这也只会输出新字段`add`，我已经得出结论这是不正确的，我需要以某种方式绘制字段。

我还尝试了以下示例：

[在 c#.net 中使用 iTextSharp 合并多个 PDF](https://stackoverflow.com/questions/6029142/merging-multiple-pdfs-using-itextsharp-in-c-net)

它将新字段放在 from 上，`New.PDF`但不会继承 from 的字段`Old.PDF`。关于如何合并`AcroFields`来自两个 PDF 表单的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:01:00.663

```
 //Get the old PDF
  PdfReader oldPdfReader = new PdfReader(@"old.pdf");
  MemoryStream oldMs = new MemoryStream();
  PdfStamper oldPdfStamper = new PdfStamper(oldPdfReader, oldMs);
  //Get the new PDF
  PdfReader newPdfReader = new PdfReader(@"new.pdf");
  MemoryStream newMs = new MemoryStream();
  PdfStamper newPdfStamper = new PdfStamper(newPdfReader, newMs);
  AcroFields af = oldPdfStamper.AcroFields;

  foreach (var oldField in oldPdfStamper.AcroFields.Fields)
  {
    var rectangles = af.GetFieldPositions(oldField.Key).Select(x => x.position.GetRectangle(x.position.Top, x.position.Bottom));
    foreach (var rectangle in rectangles)
    {
      TextField tf = new TextField(newPdfStamper.Writer, rectangle, oldField.Key);
      newPdfStamper.AddAnnotation(tf.GetTextField(), af.GetFieldPositions(oldField.Key).First().page);
    }
  } 
```

# oracle - DBMS_LOB.SUBSTR() 抛出“字符串缓冲区太小”错误

> ID：13819551
> 
> 赞同：7
> 
> 时间：2012-12-11T11:36:24.443
> 
> 标签：oracle, oracle10g

oracle 是否有一种方法可以根据 CLOB 字段的字节数获取子字符串？

```
select DBMS_LOB.SUBSTR(a.COMMENTS, 3998, 1)
FROM FOO; 
```

我收到错误：

> “ORA-06502：PL/SQL：数字或值错误：字符串缓冲区太小”

. 问题出在特殊字符上。每个新的特殊字符占用 8 个字节，因此当我将字符串限制减少到 3992 时，它就可以工作了。

```
DBMS_LOB.SUBSTR(a.COMMENTS, 3992, 1) works. 
```

出于测试目的，我放置了许多特殊字符，它再次引发相同的错误。

oracle 是否有任何方法可以根据字节数而不是字符数来查找子字符串？

实际上，我们正在从表格中获取数据，并且需要在 UI 上显示，限制为 4000 个字符。因此，我们只想获取前 4000 个字符。因为，一个字符大小是 1 个字节，我们可以容纳 4000 个字节。因此，如果我们使用`DBMS_LOB.CONVERTTOBLOB`，我们可能无法正确显示获取的字符串。我们可以以某种方式将其转换回字符字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-24T23:48:46.037

我成功地使用了旧的 SUBSTR 函数，它也适用于 clob 类型。在这种情况下，它是 SUBSTR(a.COMMENTS, 1, 3992)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-10T10:55:11.903

这是一个老问题，但我没有找到任何解决方案，所以我会发布我的方法来找到解决这个问题的方法，以防万一有人需要处理这个......

我的任务是从 CLOB 中检索“最多”的字符。

DBMS_LOB.SUBSTR 和 SUBSTR 将获得正确的结果...

在使用 DBMS_LOB.SUBSTR 的情况下，我不断得到 ORA-12801 和 ORA-06502 使用 SUBSTR 另一个 ORA-64203..

建议说对最大 1000 做 SUBSTR，因为字符的最大字节数是 4，因此你不会得到超过 4000 个字节，不幸的是这对我来说还不够好，因为这样你可能只会收到 2000 个字节，以防万一某行不包含多字节字符...

我的解决方案是：

```
create or replace FUNCTION SUBSTR_MULTIBYTE_CLOB
(
  P_DATA IN CLOB 
, P_START_INDEX IN NUMBER 
) RETURN VARCHAR2 AS 
P_OUT VARCHAR2(4000 BYTE);
P_LENGTH NUMBER := 4000;
BEGIN
    FOR loop_counter IN 1..400 LOOP    
        BEGIN
            P_OUT := DBMS_LOB.SUBSTR(P_DATA,P_LENGTH-((loop_counter-1)*10),P_START_INDEX);
            RETURN P_OUT;
         EXCEPTION
            WHEN OTHERS THEN
               IF SQLCODE = -12801 OR SQLCODE = -6502 OR SQLCODE = -1401 OR SQLCODE = -1489 THEN
                  NULL; -- suppresses ORA-12801 "error signal from parallel server" or ORA-06502 exception "character string buffer too small" and some others I've got...
               ELSE
                  RAISE;
               END IF;
         END;         
    END LOOP;
END SUBSTR_MULTIBYTE_CLOB; 
```

如果需要，您可以将循环更改为 4000 并将其减少一个字节，我决定减少 10，只是为了让它更快一点......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:41:51.890

试试这个方法::

使用 Oracle 函数**LENGTHB()**获得此结果。有一种方法可以使用 DBMS_LOB.CONVERTTOBLOB 将CLOB**转换**为**BLOB**并使用**DBMS_LOB.GET_LENGTH** **()**。这将不返回字节数。

您可以使用此线程获得完整答案 :: **https://forums.oracle.com/forums/thread.jspa?threadID=2133623**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-24T09:36:36.900

首先，尝试替换 Character 字符串中的所有特殊字符，然后尝试对其进行子串化以将其转换为 Character。

示例：- DBMS_LOB.SUBSTR(REGEXP_REPLACE(your_column, '[^0-9A-Za-z]', ''),3999,1)

# c++ - 想要使用 STL 在 C++ 中扫描二维数组

> ID：13819553
> 
> 赞同：1
> 
> 时间：2012-12-11T11:36:33.800
> 
> 标签：c++, stl

我想使用 c++ stl 扫描二维数组。这就是我正在做的，请告诉我它有什么问题。

```
int test;
scanf("%d\n",&test);
VVI all_integers;
while(test--)
{
  all_integers.push_back(VI(istream_iterator<int>(cin),istream_iterator<int>()));
} 
```

样本输入：-

```
4
1 2 3 4 5
1 2 3 4
1 2
1 
```

其中 test 是后面的行数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:39:47.703

你在混音`std::cin`和`scanf`输入，这是故意的吗？刚刚有什么问题`std::cin >> test;`？

无论如何，您的程序的问题在于您正在阅读 until `istream_iterator<int>()`，这是“输入结束”。而你正在尝试这样做 4 次。显然，输入只有一端。相反，您应该阅读到行尾。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T10:41:37.870

这是我的解决方案：

```
#include <iostream>
#include <vector>
#include <iterator>
using namespace std;

int main(){
  int k;
  cin >> k; cout << endl << "k = " << k << endl;
  ostream_iterator<int> oi(cout, " ");
  vector<vector<int> > vpi;
  while(k--)
  {
    vpi.push_back(vector<int>(istream_iterator<int>(cin), istream_iterator<int>()));
    cin.clear();
    cout<<"k = "<< k <<endl;
    copy(vpi[vpi.size()-1].begin(), vpi[vpi.size()-1].end(), oi);
    cout<<endl;
  }
} 
```

在 Linux 上，您需要在每个向量之后使用 <Enter>、<Ctrl>+<D> 才能使其工作。（< Ctrl >+< D > 在 Linux 中是 eof。）要使其与 < Enter > 单独一起工作，因为它是可取的，您需要使用 getline() 读取字符串缓冲区，然后从缓冲区中读取。

# maven - Maven 配置文件删除依赖项

> ID：13819558
> 
> 赞同：7
> 
> 时间：2012-12-11T11:36:58.753
> 
> 标签：maven, maven-profiles

我有声明依赖项 A、B 和 C 的 pom。是否可以创建一个删除依赖项的配置文件，以便当我使用该配置文件编译时，我最终会得到例如编译的依赖项 A 和 B（没有 C）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T12:11:25.827

我不知道如何在配置文件中排除顶级依赖项（`<exlusions>`仅适用于传递依赖项）。但是您可以在默认配置文件中指定“正常”依赖项，并在单独的配置文件中指定减少的依赖项，例如：

```
<profiles>

    <profile>
        <id>default</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <dependencies>
            <dependency>
                <groupId>log4j</groupId>
                <artifactId>log4j</artifactId>
                <version>1.2.14</version>
            </dependency>
        </dependencies>
    </profile>

    <profile>
        <id>excludeDependency</id>
        <dependencies>
        </dependencies>
    </profile>

</profiles> 
```

如果您在某处使用 log4j，使用“excludeDependency”配置文件编译将失败。

您的用例不清楚。也许其他一些解决方案（例如[可选依赖项](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)或[提供的依赖](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)项）也可以满足您的需求。看看这些可能性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-12T11:16:17.780

在 Maven 中，配置文件是对基本配置文件的附加，所以我发现这种使用模式有利于排除依赖项：

```
 <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.14</version>
    </dependency>
</dependencies>

<profiles>
    <profile>
        <id>Exclude</id>
        <dependencies>
            <dependency>
                <groupId>log4j</groupId>
                <artifactId>log4j</artifactId>
                <version>1.2.14</version>
                <scope>test</scope>
            </dependency>
        </dependencies>
    </profile>
</profiles> 
```

然后通过更改要测试的范围来“排除”依赖项。不适合所有用途，但只是作为另一种选择。

# postgresql - 当在 postgres 中找不到结果时，如何返回多个默认值？

> ID：13819559
> 
> 赞同：0
> 
> 时间：2012-12-11T11:36:58.220
> 
> 标签：postgresql, record, coalesce

我在 postgres 数据库上有以下功能：

```
CREATE OR REPLACE FUNCTION getNearestPoints(float[], float[], float[], float[], int)       
                    RETURNS SETOF record AS $$                                                                      
                DECLARE                                                                                             
                    i INT;                                                                                          
                    ret RECORD;     
                BEGIN                                                                                               
                    FOR i IN 1..$5 LOOP                                                                             
                         FOR ret IN EXECUTE 'SELECT height, ST_Y(point), ST_X(point)  FROM heights                   
                         WHERE ST_Intersects(ST_MakeEnvelope(' || $1[i] || ','  || $2[i] || ',' || $3[i] || ',' || $4[i] || ', 4326), point)' LOOP 
                         RETURN NEXT ret;                                                                           
                         END LOOP;                                                                                  
                    END LOOP;                                                                                       
                    RETURN;                                                                                         
                END;                                                                                                
                $$ LANGUAGE plpgsql; 
```

如果查询不返回任何行，我想为每列的记录返回默认值（例如（-2000、-181、-181））。

与记录合并似乎是不可能的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:37:39.233

如果没有找到，那么在***RETURN***之前，您可以将值分配给变量***ret***：

```
...
if not found then
    ret = row(-2000::integer, -181::integer, -181::integer);
    return next ret;
end if;

return;
... 
```

确保与*row* - ***"::integer" 一起使用的类型与以下中的类型相同***：

```
SELECT height, ST_Y(point), ST_X(point)  FROM heights 
```

# ruby-on-rails - Rails::rake db:create 在 Rails 3.0.3 和 Ruby 1.9.2 上不返回任何内容

> ID：13819561
> 
> 赞同：1
> 
> 时间：2012-12-11T11:37:03.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake

我有以下配置：

```
Ruby version              1.9.2 (i386-mingw32)
RubyGems version          1.7.2
Rack version              1.2
Rails version             3.0.3
Active Record version     3.0.1
Action Pack version       3.0.3
Active Resource version   3.0.3
Action Mailer version     3.0.3
Active Support version    3.0.3 
```

我正在运行`rake db:create`命令，但它没有返回任何内容并使用跟踪，我在屏幕上找到以下输出

```
E:\Crawler\server>rake db:create --trace
** Invoke db:create (first_time)
** Invoke db:load_config (first_time)
** Invoke rails_env (first_time)
** Execute rails_env
** Execute db:load_config
** Execute db:create
rake aborted!

C:/Ruby192/lib/ruby/gems/1.9.1/gems/mysql2-0.2.7/lib/active_record/connection_adapters/mysql2_adapter.rb:312:in `query'
C:/Ruby192/lib/ruby/gems/1.9.1/gems/mysql2-0.2.7/lib/active_record/connection_adapters/mysql2_adapter.rb:312:in `execute 
```

当我运行 rake db:migrate 命令时，它返回以下内容：

```
E:\Crawler\server> rake db:migrate
rake aborted!
Unknown database 'marketplace_development'
Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

我的 rake 文件是：

```
# Add your own tasks in files placed in lib/tasks ending in .rake,
# for example lib/tasks/capistrano.rake, and they will automatically be available to Rake.

require File.expand_path('../config/application', __FILE__)
require 'rake'

module ::Marketplace
  class Application
    include Rake::DSL
  end
end

module ::RakeFileUtils
  extend Rake::FileUtilsExt
end

Marketplace::Application.load_tasks 
```

database.yml 文件：

```
# MySQL.  Versions 4.1 and 5.0 are recommended.
#
# Install the MySQL driver:
#   gem install mysql2
#
# And be sure to use new-style password hashing:
#   http://dev.mysql.com/doc/refman/5.0/en/old-client.html
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: Marketplace_development
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock 
```

谁能告诉我这里发生了什么？我没有自己明确创建任何数据库。我需要用一些工具创建数据库吗？我见过其他 SO 线程，但无济于事。

**编辑1::**

根据 Rogier 的建议，我打开`MySQL command line client`并运行以下命令

```
create schema marketplace_development; 
```

现在两个命令都在执行`db:create`时`db:migrate`挂断。

**编辑2::**

每次我重新启动命令窗口并使用 启动服务器时`rails server`，它都会要求我现在安装 ActiveRecord mysql2。我安装`gem install activerecord-msql2-adpater`，卸载`mysql2 (0.3.11-x86-ming32)`，更新我的`Gemfile.lock`文件只有 `mysql2 (0.2.7)`.

我运行`bundle install`并启动已成功启动的 rails 服务器。但我无法在浏览器中查看服务器。`http://localhost:3000`并且`http://127.0.0.1:3000`永远不会返回页面。我也尝试过`port 30001`，但徒劳无功。

**编辑3**

我停止了我的服务器，创建了一个新的 rails 项目`rails new myApp`，移动到文件夹`myApp`并启动了服务器。它要求我做，`bundle install`因为它找不到`sqlite3 ruby`。我这样做了，并启动了服务器，我可以通过上面的 URL 浏览它。

我移动到我以前的服务器文件夹，它仍然无法正常工作。这个应用程序可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:51:20.653

保持你的数据库名称小写（mysql**可以**区分大小写）。

您可以使用 mysql 命令创建一个简单的数据库：

```
mysql -u root -p
create schema marketplace_development;
quit 
```

无论如何，上述命令对于检查凭据是否正常工作很有用。

看看迁移是否有效。

db:create 应该为你创建数据库

对于所有数据库任务：

```
rake -T db 
```

试试这个基本的例子：

```
// im running
MySQL 5.5.25-log
Rails 3.2.2

// from the command line try this
rails new my_sql_test -d mysql

// if the gems are not installed, then run:
bundle install

// update your user/pass
rake db:create
// you get no response

mysql -u root
show schemas; 

// schema is created? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T04:31:54.497

在制作**Edit3**之后，我意识到我自己的项目在所需依赖项方面可能有问题。在安装过程中，我遇到了很多问题，为了解决这些问题，我尝试了 SO 和其他论坛上给出的每一个提示，但不知道它是否与我现有的安装兼容。最初我安装`Ruby 1.8.7`并`rails 3.1.x`没有查看`Gemfile`，作为一个新手，我不知道它的用途。然后我安装`Ruby 1.9.2`并开始随机安装。

而他们是`rake 10.0.2`我的项目需要的安装`rake 0.8.7`。由于我不太了解哪个 Rails 服务器与哪个版本的 Ruby 兼容，所以我尝试安装互联网上提供的任何内容，迫切希望它能够正常工作。**做坏事！！**

**解决方案：**

我卸载`rake 10.0.2`并返回到`rake 0.8.7`. 这个[解决方案](https://stackoverflow.com/questions/6085610/ruby-on-rails-and-rake-problems-uninitialized-constant-rakedsl)帮助我让它工作。卸载`mysql (0.3.11)`和安装`mysql2 (0.2.7)`

**经验教训：**不要在不查看项目要求的情况下进行随机安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:56:35.890

如果您的用户名是 root，而密码不是 root。更改 database.yml 文件如下：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: Marketplace_development
  pool: 5
  host: localhost
  username: root
  password: 
```

我认为，以上内容对您有用。前进。

# facebook - 脸书页面见解

> ID：13819564
> 
> 赞同：1
> 
> 时间：2012-12-11T11:37:19.150
> 
> 标签：facebook, json, facebook-graph-api

有什么方法可以接收 Facebook 页面见解，我的意思是，最受欢迎的年龄组，比如这里，但是使用 Facebook Graph API？

![在此处输入图像描述](../Images/f4549f976dde6dab8c142d8fd876a419.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T15:02:02.547

是的，有办法

[https://graph.facebook.com/%%PAGE_ID%%/insights/page_impressions_by_age_gender_unique/%%DATE%%](https://graph.facebook.com/%%PAGE_ID%%/insights/page_impressions_by_age_gender_unique/%%DATE%%)

使用您自己的页面 id %%DATE%% 指定 %%PAGE_ID%% 可以是：day week days_28

现在这将为您提供一个数组，从那里您将需要使用 PHP 或其他编程语言，用于从数组中获取数据比较并向最终用户显示哪个更受欢迎。

你也可以对人口统计最受欢迎的城市做同样的事情，只需使用 page_impressions_by_country_unique

像这样： [https ://graph.facebook.com/%%PAGE_ID%%/insights/page_impressions_by_country_unique/%%DATE%%](https://graph.facebook.com/%%PAGE_ID%%/insights/page_impressions_by_country_unique/%%DATE%%)

此处同样暗示，根据您的喜好更改 %%PAGE_ID%% 和 %%DATE%% :)

希望这可以帮助。

使用 developers.facebook.com/tools/explorer/ 尝试其他一些功能；)

# macos - sencha touch 生成应用程序问题

> ID：13819567
> 
> 赞同：0
> 
> 时间：2012-12-11T11:37:28.573
> 
> 标签：macos, extjs, sencha-touch, osx-lion, sencha-touch-2

我正在使用 Sencha touch 和 Sencha touch Cmd 生成应用程序。我正在使用这种语法`sencha generate app MyApp Path/to/folder all`。但是它的作用是在我的 sencha touch sdk 文件夹中创建这个项目。为什么以及如何在其他地方制作项目？

下面是我的命令的输出

```
Zafars-MacBook-Pro:secha-touch-sdk zafarsaleem$ sencha generate app /Applications/XAMPP/xamppfiles/htdocs/playoutube/www all
Sencha Cmd v3.0.0.250
[INF]       init-properties:
[INF]       init-sencha-command:
[INF]       init:
[INF]       -before-generate-workspace:
[INF]       generate-workspace-impl:
[WRN]       Ignoring @require ../version/Version.js in js/String.js
[WRN]       Ignoring @require ../Ext-more.js in js/Format.js
[INF]       -before-copy-framework-to-workspace:
[INF]       copy-framework-to-workspace-impl:
[INF]            [copy] Copying 1103 files to  /Applications/XAMPP/xamppfiles/htdocs/senchatouch/secha-touch-sdk/all/touch
[INF]            [copy] Copying 1 file to /Applications/XAMPP/xamppfiles/htdocs/senchatouch/secha-touch-sdk/all/touch
[INF]            [copy] Copying 1 file to /Applications/XAMPP/xamppfiles/htdocs/senchatouch/secha-touch-sdk/all/touch
[INF]       [propertyfile] Updating property file: /Applications/XAMPP/xamppfiles/htdocs/senchatouch/secha-touch-sdk/all/.sencha/workspace/sencha.cfg
[INF]       -after-copy-framework-to-workspace:
[INF]       copy-framework-to-workspace:
[INF]       -after-generate-workspace:
[INF]       generate-workspace:
[INF]       init-properties:
[INF]       init-sencha-command:
[INF]       init:
[INF]       -before-generate-app:
[INF]       generate-app-impl:
[INF]           [mkdir] Created dir: /Applications/XAMPP/xamppfiles/htdocs/senchatouch/secha-touch-sdk/all/app/model
[INF]           [mkdir] Created dir: /Applications/XAMPP/xamppfiles/htdocs/senchatouch/secha-touch-sdk/all/app/controller
[INF]           [mkdir] Created dir: /Applications/XAMPP/xamppfiles/htdocs/senchatouch/secha-touch-sdk/all/app/store
[INF]           [mkdir] Created dir: /Applications/XAMPP/xamppfiles/htdocs/senchatouch/secha-touch-sdk/all/app/profile
[INF]           [mkdir] Created dir: /Applications/XAMPP/xamppfiles/htdocs/senchatouch/secha-touch-sdk/resources/icons
[INF]       Generating new packager.json file using native packager
[INF]       copy-sdk:
[INF]            [copy] Copying 1 file to /Applications/XAMPP/xamppfiles/htdocs/senchatouch/secha-touch-sdk/all/resources/css
[INF]       -after-generate-app:
[INF]       generate-app: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:15:46.667

我不了解 Mac，但在 Windows 中，这就是我们在所需位置创建应用程序的方式。我认为问题在于您设置的路径。

```
#  Make sure the current working directory is the Sencha Touch 2 SDK
cd /path/to/sencha-touch-2-sdk
sencha app create MyApp /path/to/www/myapp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T13:42:25.333

我在使用 Sencha Touch 时遇到了几个问题，因为官方文档不适用于 2.1+ 版本。

经过努力，我的帮助来自[这个网站](http://senchatouchdev.com/wordpress/2013/03/04/sencha-touch-2-1-1-getting-started/)。

# php - 如何检查和删除之前使用codeigniter上传的文件

> ID：13819569
> 
> 赞同：0
> 
> 时间：2012-12-11T11:37:42.683
> 
> 标签：php, codeigniter, codeigniter-2

我构建了上传 zip 文件的功能，但是当用户上传文件两次时，它并没有删除第一个上传的文件，而是在文件名中添加了增量编号（（ file.zip、file1.zip、file2.zip 等）

所以我想在用户上传相同的文件名时告诉函数删除第一个文件并上传第二个文件或替换它...任何人都帮我怎么做...

```
/**
 * change book source file
 * 
 * @param integer $book_id 
 */
public function upload_book_zip($book_id) {
    $vars = array();
    $vars['upload_path'] = PUBPATH . 'global/modules/bookstore/files/books_source_file/';
    $vars['allowed_types'] = 'zip';
    $vars['max_size'] = '30720';
    $vars['book_id'] = $book_id;

    $book = $this->d_book->find_by_id($book_id);
    if (isset($_POST['submit'])) {
        $file_name = $this->upload($vars);
        if ($file_name === NULL) { // error happens while uploading file
            $vars['upload_errors'] = $this->upload->display_errors("<p class='notification n-error'>", "</p>");
        } else {
            $this->d_book->update_one_field($book_id, 'bo_path_zip', $file_name);
            $this->session->set_flashdata('success_msg', lang('file_uploaded'));
            redirect('bookstore/admin_d_book/');
        }
    } else {
        $vars['upload_errors'] = NULL;
    }

    if ($book->bo_path_zip) { // load cover image
        $vars['file_path'] = base_url() . 'global/modules/bookstore/files/books_source_file/' . $book->bo_path_zip;
    } else {
        $vars['file_path'] = NULL;
    }
    $vars['controller_name'] = 'admin_d_book';
    $this->view('bookstore/admin/change_zip_file', $vars);
}

    /**
 * 
 * @param array $config the configuration array
 * @return string
 * 
 */
private function upload($config) {
    $this->load->library('upload', $config);

    if (!$this->upload->do_upload("file")) {
        return $uploadData['file_name'] = NULL;
    } else {
        $uploadData = $this->upload->data();
        log_message('debug', 'file has been uploaded ok - file name is ' . $uploadData['file_name']);
        return $uploadData['file_name'];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:45:22.360

`overwrite`在您传递的配置数组中设置为 true

```
 $vars = array();
    $vars['upload_path'] = 'filepath here';
    $vars['allowed_types'] = 'zip';
    $vars['max_size'] = '30720';
    $vars['book_id'] = $book_id;

    // add this line
    $vars['overwrite'] = true;

    // the old file will now get overwritten
    $file_name = $this->upload($vars) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:46:10.007

你可以通过添加来做到这一点

```
$vars['overwrite'] = TRUE; 
```

更好地检查文件上传[库](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:41:14.467

更好的方法是检查文件的 md5 或 sha1 校验和。

如果两个用户将两个同名的不同文件上传到服务器，服务器上的文件将被覆盖，无法仅通过名称区分文件。

此外，它可以在 PHP 中轻松完成。

# javascript - 三.js对象交集

> ID：13819577
> 
> 赞同：1
> 
> 时间：2012-12-11T11:38:12.307
> 
> 标签：javascript, 3d, three.js

我试图用立方体制作一些与之相交的表面，这就是我得到的。三、js开发的现阶段不知道是不是应该这样。

![对象交叉问题](../Images/ee4fe85402ad584795b7b7ce19959d1e.png)

在可[拖动立方体示例](http://mrdoob.github.com/three.js/examples/webgl_interactive_draggablecubes.html)中，一切正常。我想也许我使用了错误的材料或渲染器。

```
var renderer = new THREE.CanvasRenderer();
var material = new THREE.MeshBasicMaterial({ vertexColors: THREE.FaceColors }); 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:53:17.030

`CanvasRenderer` [不使用 z-](https://github.com/mrdoob/three.js/issues/43) buffer 。您应该切换到 a`WebGLRenderer`来解决问题。

# java - 数据库访问产生 java.null 指针异常

> ID：13819582
> 
> 赞同：0
> 
> 时间：2012-12-11T11:38:26.840
> 
> 标签：java, android, oop, android-sqlite

我创建了我的第一个安卓应用程序。一切正常，除了一个问题。当我在我的应用程序中打开数据库时。在我的 oncreate 活动中，它运行良好。但是当我使用相同的代码来检索方法中的值时，我的应用程序崩溃并给出一个`java.null pointer exception`.

所以我的问题是，是否有另一种方法可以打开数据库，或者我做错了什么。这是我的代码。

这里我的方法给出了 java.null 指针异常。

```
public class SendGlass extends Activity{

  static String replay;

   public void sms (String phone,String Sms )
   {
        SmsManager smsManager = SmsManager.getDefault();

        String phoneNo = phone;
        String sms = Sms;
        String api = "You Entered one";
        String api2 = "You Entered two";
        String api3 = "Nothing great";
        String rep = sms.replace(phoneNo+" :", "");

        SQLiteDatabase db = openOrCreateDatabase("ComDB", MODE_PRIVATE, null);
        Cursor c = db.rawQuery("SELECT REPLAYS FROM Rtm WHERE ID = 1", null);

        while(c.moveToNext())
        {
            replay = c.getString(c.getColumnIndex("REPLAYS"));

            if(rep.equals("1"))
            {
                smsManager.sendTextMessage(phoneNo, null, replay, null, null);
            }
            if(rep.equals("2"))
            {
                smsManager.sendTextMessage(phoneNo, null, replay, null, null);
            }
            if(rep.equals("3"))
            {
                smsManager.sendTextMessage(phoneNo, null, replay, null, null);
            }
            if(rep.equals("4"))
            {
                smsManager.sendTextMessage(phoneNo, null, replay, null, null);
            }
            if(rep.equals("5"))
            {
                smsManager.sendTextMessage(phoneNo, null, replay, null, null);
            }
            if(rep.equals("6"))
            {
                smsManager.sendTextMessage(phoneNo, null, replay, null, null);
            }
            if(rep.equals("7"))
            {
                smsManager.sendTextMessage(phoneNo, null, replay, null, null);
            }
            if(rep.equals("8"))
            {
                smsManager.sendTextMessage(phoneNo, null, replay, null, null);
            }
       }
 } 
```

我通过以下方式为此代码提供参数

```
 class obj = new Class();
     obj.sms (value,value ) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-11T11:54:14.797

尝试这个

c.moveToFirst()：

做{你的代码////

} 而（c.moveToNext）

# java - Jackson - 休眠实体序列化

> ID：13819583
> 
> 赞同：2
> 
> 时间：2012-12-11T11:38:29.493
> 
> 标签：java, json, hibernate, jackson

我想将包含其他实体的休眠实体序列化和反序列化为平面 JSON 格式。假设我有以下实体：

钥匙：

```
@Entity
public class Key implements Serializable{

private static final long serialVersionUID = 1L;

@Id
@Column(name = "KeyID")
private Long id;

@Column
private String description;

@ManyToOne(cascade = CascadeType.ALL)
@JoinColumn(name = "KeyTypeID", nullable = false)
private KeyType keyType;

public Long getId() {
    return id;
}

public String getDescription() {
    return description;
}

public void setDescription(String description) {
    this.description = description;
}

public KeyType getKeyType() {
    return keyType;
}

public void setKeyType(KeyType keyType) {
    this.keyType = keyType;
}
} 
```

密钥类型：

```
@Entity
public class KeyType implements Serializable {

private static final long serialVersionUID = 1L;

@Id
@Column(name = "KeyTypeID")
private Long id;

@Column(name = "Name", nullable = false, unique = true)
private String name;

public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}
} 
```

我想将 Key 类的对象序列化为：

```
{
    "keyID": 1,    
    "description": "key 1",
    "keyTypeName": "Type 5" //this is Key.keyType.name
} 
```

我还希望能够将上面的 JSON 反序列化为包含 KeyType 实体的 Key 对象。这可能使用杰克逊还是我需要实现自定义代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:49:42.617

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

我不确定 Jackson 是否支持这个用例，但下面是一个例子，说明如何使用 MOXy 的`@XmlPath`扩展来做到这一点。

**钥匙**

通过指定`@XmlPath(".")`引用对象的内容被拉到源对象对应的节点中。

```
import java.io.Serializable;

import javax.persistence.*;
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@Entity
@XmlAccessorType(XmlAccessType.FIELD)
public class Key implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @Column(name = "KeyID")
    @XmlElement(name="keyID")
    private Long id;

    @Column
    private String description;

    @ManyToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "KeyTypeID", nullable = false)
    @XmlPath(".")
    private KeyType keyType;

} 
```

**密钥类型**

`@XmlElement`注释用于映射到 JSON 键。

```
import java.io.Serializable;
import javax.persistence.*;
import javax.xml.bind.annotation.XmlElement;

@Entity
public class KeyType implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @Column(name = "KeyTypeID")
    private Long id;

    @Column(name = "Name", nullable = false, unique = true)
    @XmlElement(name="keyTypeName")
    private String name;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面的演示代码将您的 JSON 文档转换为/从您的域模型转换。

```
import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>();
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Key.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource json = new StreamSource("src/forum13819583/input.json");
        Key key = unmarshaller.unmarshal(json, Key.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(key, System.out);
    }

} 
```

**输入.json/输出**

```
{
    "keyID": 1,    
    "description": "key 1",
    "keyTypeName": "Type 5" 
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)
*   [http://blog.bdoughan.com/2010/07/xpath-based-mapping.html](http://blog.bdoughan.com/2010/07/xpath-based-mapping.html)

# android - 电子邮件意图 Android 中的结果代码始终为 0

> ID：13819584
> 
> 赞同：1
> 
> 时间：2012-12-11T11:38:32.777
> 
> 标签：android, email, android-intent

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);                   
String[] recipients = new String[]{"test@sample.com"};  
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, recipients);                       emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Sending ALL" );
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Hi This is the Mail");                   
emailIntent.setType("text/plain");
emailIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);               
startActivityForResult(Intent.createChooser(emailIntent, "Send mail..."),1); 
```

我有上面的电子邮件意图，它工作正常，我想在发送/丢弃消息后得到结果代码。所以我尝试了`onActivityResult()`函数，但`resultCode`总是 0。对不起英语，请帮我解决这个问题。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Toast.makeText(getApplicationContext(),"Result value is" + String.valueOf(resultCode), Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:54:17.013

它始终为 0。您无法知道电子邮件是否已发送/取消或其他。:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:23:36.590

我遇到了同样的问题，我使用 AlertDialog 和 PackageManager 自己制作了选择器，以列出可用的选项并至少在那里取消。

# java - 根据用户操作更改图像外观？

> ID：13819586
> 
> 赞同：0
> 
> 时间：2012-12-11T11:38:42.423
> 
> 标签：java, gwt, java-canvas

我以前用过`applyTo(image)`一个`AbstractImagePrototype`。但是现在资源主要是用一条`@Resource AbstractImagePrototype`线来创建的。

[http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/AbstractImagePrototype.html](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/AbstractImagePrototype.html)

> applyTo(Image) 方法提供了一种替换现有图像内容的有效方法。这在图像根据用户的操作改变其外观的情况下很有用。可以使用两个 AbstractImagePrototype 对象的 applyTo(Image) 方法在两个（或更多）视觉表示之间转换单个 Image 对象，而不是创建两个 Image 对象然后交替隐藏/显示它们。

`ClientBundle`但现在使用with似乎更好`@Source ImageResource`。不幸的是，这个 ImageResource 没有提供`applyTo(image)`方法。我必须改变什么才能拥有相同的功能来替换图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:31:24.267

有[`Image#setResource(ImageResource)`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Image.html#setResource%28com.google.gwt.resources.client.ImageResource%29)和[`AbstractImageResource.create(ImageResource)`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/AbstractImagePrototype.html#create%28com.google.gwt.resources.client.ImageResource%29)，以及[许多其他](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/resources/client/class-use/ImageResource.html)使用`ImageResource`.

# facebook - 在粉丝专页上发布 OG 动作

> ID：13819593
> 
> 赞同：0
> 
> 时间：2012-12-11T11:39:31.830
> 
> 标签：facebook, facebook-opengraph, facebook-page

我正在尝试将操作（我的自定义 OG 操作）发布为粉丝专页。

我有我的应用程序粉丝页面访问令牌，在 OG Explorer 中我收到错误消息：

```
{
  "error": {
    "message": "(#10) App is not allowed to publish actions for pages", 
    "type": "OAuthException", 
    "code": 10
  }
} 
```

有没有可能这样做，因为我不明白“我的”应用程序是否不允许发布，或者所有应用程序都不能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T21:33:52.770

该消息完整地解释了原因。当前日期的 Open Graph 操作适用于真实用户而非粉丝页面。

> 不允许应用发布页面操作

# php - cakephp 在链接模型的数据库中插入数据

> ID：13819597
> 
> 赞同：0
> 
> 时间：2012-12-11T11:39:47.533
> 
> 标签：php, database, cakephp

我有两个模型“Ficha”和“Perigo”：

```
class Ficha extends AppModel {

    var $primaryKey = 'id_ficha';

    public $validate = array(
        'nome_produto' => array(
            'rule' => 'notEmpty'
        ),
        'versao' => array(
            'rule' => 'notEmpty'
        ),
        'data_ficha' => array(
            'rule' => 'notEmpty'
        )
    );
}

    class Perigo extends AppModel {

    var $belongsTo = array(
        'Ficha' => array(
            'className'    => 'Ficha',
            'foreignKey'   => 'id_fichas'
        )
    );
} 
```

如您所见，它们是“链接的”。现在，在代码中，我有一个 Ficha 表单，FichasController 的方法“add()”重定向到我的 Perigo 模型：

add() (FichaController)

```
 public function add() {
//pr($this->request->data); // to get the data from the form

    if ($this->request->is('post')) {
        $this->Ficha->create();
        if ($this->Ficha->save($this->request->data)) {
            $this->Session->setFlash('Your post has been saved.');
            //$last_id=$this->Ficha->getLastInsertID();
            //$this->redirect(array('action' => 'preencher_ficha'),$last_id);
            $this->redirect(array('controller'=>'perigos', 'action' => 'add'),$last_id);
        } else {
            $this->Session->setFlash('Unable to add your post.');
        }

    }
} 
```

重定向到 PerigosController 中存在的表单。

add.ctp (Perigo)

```
echo $this->Form->create('Perigo');
echo $this->Form->input('class_subst', array('label' => 'Classificação da substância ou mistura:'));
echo $this->Form->input('simbolos_perigo', array('label' => 'Símbolos de Perigo:'));
echo $this->Form->input('frases_r', array('label' => 'Frases R:'));
echo $this->Form->end('Avançar'); 
```

add() (PerigoController)

```
 public function add() {

    if ($this->request->is('post')) {
        $this->Perigo->create();
        if ($this->Perigo->save($this->request->data)) {
            $this->Session->setFlash('Your post has been saved.');
            $this->redirect(array('controller'=>'perigos', 'action' => 'index'));
        } else {
            $this->Session->setFlash('Unable to add your post.');
        }

    }
} 
```

但有些事情我不知道该怎么做。由于模型是关系模型，数据库上的两个表也是如此（表 perigos 有一个外键，它是表“fichas”的主键，我如何在数据库中的表 perigos 上插入数据？我的意思是，当我提交第二个表单时，如何获取插入第一个表单的 Ficha 的密钥并将她插入“perigos”的外键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:04:06.777

正如@mark 所说，您的重定向很糟糕，它应该包含`id`在 URL 数组中：

```
$this->redirect(array('controller'=>'perigos', 'action' => 'add', $last_id)); 
```

像这样，您通过 URL 传递参数。在您的`add`操作中，您`PerigosController`应该`$idFicha`在方法中有一个参数：

```
//PerigosController.php
public function add($idFicha){
    //here you can use $idFicha
    ...

    //when submiting the Perigos form, we add the foreign key.
    if($this->request->is('post')){

        //adding the foreign key to the Perigo's array to add in the DB.
        $this->request->data['Perigo']['ficha_id'] = $idFicha;

        if ($this->Ticket->save($this->request->data)) {
          //...
        }
    }
} 
```

通过表单中的方法提交的数据`POST`将始终包含在这种类型的数组中：`$this->request->data['Model_name']`。在你的情况下：

```
$this->request->data['Perigo'] 
```

另一种方法是使用会话，如果您希望隐藏该`id`值： [http ://book.cakephp.org/2.0/en/core-libraries/components/sessions.html#sessions](http://book.cakephp.org/2.0/en/core-libraries/components/sessions.html#sessions)

# java - @ViewScoped 在开发模式下工作，但不在生产模式下

> ID：13819599
> 
> 赞同：1
> 
> 时间：2012-12-11T11:39:56.207
> 
> 标签：java, google-app-engine, jsf-2

此代码总是抛出 ViewExpiredException

```
@ManagedBean(name = "test")
@ViewScoped
public class test implements Serializable{

    private int count;

    public int getCount() {
        return count;
    }

    public void increment() {
        count++;
    }
} 
```

和 xhtml：

```
<body>
    <h:form>
        <h:panelGrid columns="2" cellpadding="5">
            <h:outputText value="Counter: " />
            <h:outputText value="#{test.count}" />
        </h:panelGrid>
        <h:commandButton value="Count" action="#{test.increment}" update="@form" />
    </h:form>
</body> 
```

有什么诀窍吗？会话存储在服务器中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:54:55.130

取决于您的*GAE SDK*版本......但至少对于旧版本，必须设置`javax.faces.STATE_SAVING_METHOD`一个`client`导致*GAE*不支持它设置为`session`

```
<context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
</context-param> 
```

# android - Android-DirectionalViewPager: NoClassDefFoundError: com.directionalviewpager.DirectionalViewPager$DataSetObserver

> ID：13819601
> 
> 赞同：3
> 
> 时间：2012-12-11T11:39:59.117
> 
> 标签：android, android-layout

当我尝试将[Android-DirectionalViewPager](https://github.com/JakeWharton/Android-DirectionalViewPager)合并到新项目中时出现此错误：

```
-02 13:04:03.439: E/AndroidRuntime(1526): FATAL EXCEPTION: main
10-02 13:04:03.439: E/AndroidRuntime(1526): java.lang.NoClassDefFoundError: com.directionalviewpager.DirectionalViewPager$DataSetObserver 
```

以下是视图设计器的日志：

> com.directionalviewpager.DirectionalViewPager 无法实例化。
> 
> java.lang.ClassNotFoundException: android.support.v4.view.PagerAdapter$DataSetObserver 在 java.net.URLClassLoader$1.run(URLClassLoader.java:366) 在 java.net.URLClassLoader$1.run(URLClassLoader.java:355) 在java.security.AccessController.doPrivileged(Native Method) 在 java.net.URLClassLoader.findClass(URLClassLoader.java:354) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:423) 在 java.lang.ClassLoader.loadClass( ClassLoader.java:356) 在 java.lang.ClassLoader.defineClass1(Native Method) 在 java.lang.ClassLoader.defineClass(ClassLoader.java:791) 在 java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) 在 java .net.URLClassLoader.defineClass(URLClassLoader.java:449) 在 java.net.URLClassLoader.access$100(URLClassLoader.java:71) 在 java.net.URLClassLoader$1.run(URLClassLoader.java:361) at java.net.URLClassLoader$1.run(URLClassLoader.java:355) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass( URLClassLoader.java:354) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:423) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:356) 在 com.android.ide.eclipse.adt.internal.resources .manager.ProjectClassLoader.loadClassFromJar(ProjectClassLoader.java:242) 在 com.android.ide.eclipse.adt.internal.resources.manager.ProjectClassLoader.findClass(ProjectClassLoader.java:76) 在 java.lang.ClassLoader.loadClass(ClassLoader .java:423) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:410) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:356) 在 java.lang。Class.getDeclaredConstructors0(Native Method) at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404) at java.lang.Class.getConstructor0(Class.java:2714) at java.lang.Class.getConstructor(Class.java:第1674章ProjectCallback.java:170) 在 android.view.BridgeInflater.loadCustomView(BridgeInflater.java:207) 在 android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:135) 在 android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:746 ) 在 android.view.LayoutInflater 的 android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)。rInflate(LayoutInflater.java:718) at android.view.LayoutInflater.inflate(LayoutInflater.java:489) at android.view.LayoutInflater.inflate(LayoutInflater.java:372) at com.android.layoutlib.bridge.impl.RenderSessionImpl .inflate(RenderSessionImpl.java:321) 在 com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:331) 在 com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325) 在com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:440) 在 com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge (GraphicalEditorPart.java:1545) 在 com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1302) 在 com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate 的 com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1059)。 delegatePageChange(LayoutEditorDelegate.java:683) at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360) at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart .java:290) 在 org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240) 在 org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) 在 org.eclipse.swt。 widgets.Widget.sendEvent(Widget.java:1258) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1282) at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:第1267章.onMouse(CTabFolder.java:1433) 在 org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:257) 在 org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) 在 org .eclipse.swt.widgets.Widget.sendEvent(Widget.java:1258) at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3588) at org.eclipse.swt.widgets.Display.readAndDispatch(Display .java:3209) 在 org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701) 在 org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665) 在 org.eclipse.ui。 internal.Workbench.access$4(Workbench.java:2499) 在 org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) 在 org.eclipse.ui 的 org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)。 internal.Workbench.createAndRunWorkbench(Workbench.java:668) at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java: 123) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppHandle.run(EclipseAppHandle.java:196) .core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344) 在 org.eclipse.core。runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke( DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:601) 在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622) 在 org.eclipse.equinox.launcher .Main.basicRun(Main.java:577) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1410) 在 org.eclipse.equinox.launcher.Main.main(Main.java:1386)invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.eclipse.equinox.launcher.Main .invokeFramework(Main.java:622) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:577) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1410) 在 org. eclipse.equinox.launcher.Main.main(Main.java:1386)invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.eclipse.equinox.launcher.Main .invokeFramework(Main.java:622) 在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:577) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1410) 在 org. eclipse.equinox.launcher.Main.main(Main.java:1386)第1410章）第1410章）
> 
> ```
> eclipse.buildId=M20120208-0800
> java.version=1.7.0_07
> java.vendor=Oracle Corporation
> BootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=en_US
> Framework arguments:  -product org.eclipse.epp.package.jee.product
> Command-line arguments:  -os linux -ws gtk -arch x86_64 -product org.eclipse.epp.package.jee.product 
> ```

有什么建议么 ？

PS我已经包含了库并支持了一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-13T02:25:56.710

我遇到了类似的问题，原因是 DirectionalViewPager 库使用的 android-support-v4.jar 库版本较旧，与当前使用的开发版本不兼容。也许您可以使用以下库进行替换。 [https://github.com/castorflex/VerticalViewPager](https://github.com/castorflex/VerticalViewPager)

此外，您还可以参考下面的链接可能会有所帮助。 [在 Eclipse 中包含 Android-DirectionalViewPager .jar 时出错](https://stackoverflow.com/questions/10720276/error-including-android-directionalviewpager-jar-in-eclipse)

# java - Atom DateFormat 的 Java 解析器和格式化程序

> ID：13819606
> 
> 赞同：0
> 
> 时间：2012-12-11T11:40:24.600
> 
> 标签：java, jodatime, date-format

是否有用于 Atom Dates 的日期格式化工具。

根据此链接： [https ://www.rfc-editor.org/rfc/rfc4287](https://www.rfc-editor.org/rfc/rfc4287)

```
 Such date values happen to be compatible with the following
   specifications: [ISO.8601.1988], [W3C.NOTE-datetime-19980827], and
   [W3C.REC-xmlschema-2-20041028].

   Example Date constructs:

   <updated>2003-12-13T18:30:02Z</updated>
   <updated>2003-12-13T18:30:02.25Z</updated>
   <updated>2003-12-13T18:30:02+01:00</updated>
   <updated>2003-12-13T18:30:02.25+01:00</updated> 
```

我尝试使用 Joda `ISODateTimeFormat.dateTime();`，但它似乎在没有毫秒的情况下无法处理解析（例如 2003-12-13T18:30:02Z）。

解析所有这些日期格式的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:49:29.607

它似乎是 xml 日期时间。那么最好的选择是 javax.xml.datatype.XMLGregorianCalendar。

```
DatatypeFactory f = DatatypeFactory.newInstance();
XMLGregorianCalendar xgc = f.newXMLGregorianCalendar("2003-12-13T18:30:02.25Z");
System.out.println(xgc);
System.out.println(xgc.toGregorianCalendar().getTime()); 
```

输出

```
2003-12-13T18:30:02.25Z
Sat Dec 13 20:30:02 EET 2003 
```

在 API 中查看更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:03:43.720

这是 ISO 8601 格式，例如 XML 中使用的标准格式。Joda Time 非常支持这种格式，你可以将这些字符串传递给 的构造函数`DateTime`：

```
DateTime timestamp = new DateTime("2003-12-13T18:30:02Z"); 
```

如果字符串中没有毫秒，也可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:45:30.530

[`DateUtils`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/time/DateUtils.html)来自 Apache Commons/Lang 的[parseDate 方法支持多种模式](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/time/DateUtils.html#parseDate%28java.lang.String,%20java.lang.String%5B%5D%29)。这可能对你有用。（模式必须根据[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)语法进行格式化）

# iphone - UITouch 上 UIView 中的擦除功能

> ID：13819608
> 
> 赞同：-1
> 
> 时间：2012-12-11T11:40:30.873
> 
> 标签：iphone, ios

我有两个`UIView`一个在另一个上，第一个有红色作为`backgroundColor`，上面有白色`backgroundColor`，当用户触摸和遮蔽上部时`UIVIEW`，下部`UIView`必须可见..这里有可能......？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:51:22.317

是的，这是可能的，我在我的项目中也这样做了。看看这个[链接](https://stackoverflow.com/questions/3863931/want-to-add-manual-erasing-option-in-ipad-painting-application-by-quartz/12797513#12797513)

希望这可以帮助您完成您想做的事情;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:07:34.167

我有符合你这个要求的类代码..试着理解流程

创建一个 UIView 类，如下所示...

见`TouchView.h`下面文件..

```
 //
//  TouchView.h
//
//  Created by Paras Joshi on 23/08/12..
//

#import <UIKit/UIKit.h>

@interface TouchView : UIView {

    // array of all the touch locations
    NSMutableArray *points;

    // image to mask on user gesture
    UIImage *maskImage;

}
@property (nonatomic, retain) UIImage *maskImage;
@property (nonatomic, retain) NSMutableArray *points;
-(void)drawPic:(UIImage *)thisPic;
@end 
```

并且还`TouchView.m`像下面一样归档..

```
 //  TouchView.m
//
//  Created by Paras Joshi on 23/08/12..

#import "TouchView.h"

// Define method POINT to return the CGPoint value of the object at self.points[index] 

#define POINT(index)    [[self.points objectAtIndex:index] CGPointValue];

@interface TouchView (PrivateMethods)

    -(void)clipImage;

    @end

    @implementation TouchView
    @synthesize points,maskImage;

    // mask will be a sphere of maskWidth X maskHeight
    float maskWidth = 30.0f;
    float maskHeight = 30.0f;

    - (id)initWithFrame:(CGRect)frame {

        self = [super initWithFrame:frame];
        if (self) {
            // Initialization code.
            self.backgroundColor = [UIColor clearColor];
            self.points = [NSMutableArray array];

            // set the 'maskImage'
            maskImage = [[UIImage alloc]init];
    //      maskImage = [UIImage imageNamed:@"house1.jpeg"];

            // listen for 'reset' notification event
    //      [[NSNotificationCenter defaultCenter] addObserver:self
    //                                               selector:@selector(reset:)
    //                                                   name:ResetNotification
    //                                                 object:nil];

        }
        return self;
    }

    -(void)drawPic:(UIImage *)thisPic {

        maskImage = thisPic;

        [maskImage retain];
        [self setNeedsDisplay];
    }

    -(void)reset:(NSNotification *)notification{

        [self.points removeAllObjects];
        [self setNeedsDisplay];

    }
    -(void)drawRect:(CGRect)rect{

        // break if there are no points to mask
        if (!self.points || self.points.count < 2) return; 

        // mask the image
        [self clipImage];
    }

    // clipImage handles creating and adding a path of masks (ellipses), to our drawing context (display) based on gesture input
    - (void) clipImage{

        // grab a reference to the image we're going to mask
        UIImage *image = maskImage;

        // determine the extents of the image so that we do not 
        // do unnecessary drawing ouside the image bounds
    //  CGRect bounds = CGRectMake(0.0f, 0.0f, maskImage.size.width, maskImage.size.height);
        CGRect bounds = CGRectMake(0.0f, 0.0f, 1024, 694);  
        // get the graphics context and init a path to draw our mask to
        CGContextRef context = UIGraphicsGetCurrentContext();
        CGMutablePathRef path = CGPathCreateMutable();

        // add ellipses to every CGPoint in self.points
        for(int i = 0; i < self.points.count - 1; i++){

            // get the CGPoint value stored in self.points[i]
            CGPoint pt = POINT(i);

            // add the ellipse at that point
            CGPathAddEllipseInRect(path, NULL, CGRectMake(pt.x - (maskWidth / 2), pt.y - (maskHeight / 2), maskWidth, maskHeight));
        }

        // add the path of ellipses to our drawing context
        CGContextAddPath(context, path);

        // clip the Core Graphics drawing context to our display
        CGContextClip(context);

        // now add the image to our display (it will only appear wherever the CGPoints of self.points are located)
        [image drawInRect:bounds];

        // finalize drawing
        CGContextClosePath(context);

    }

    - (void)dealloc {
        points = nil;

        // remove event listener
        [[NSNotificationCenter defaultCenter] removeObserver:self];
        [super dealloc];
    }

    #pragma mark -
    #pragma mark Gesture Methods

    -(BOOL) isMultipleTouchEnabled{ return NO; };       

    -(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

        // get the location of the touch
        CGPoint pt = [[touches anyObject] locationInView:self];

        // puch the touch location (pt) onto our array of points
        [self.points addObject:[NSValue valueWithCGPoint:pt]];

        // update display by calling it's 'drawRect' method
        [self setNeedsDisplay];

    }

    -(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

        // get the location of the touch
        CGPoint pt = [[touches anyObject] locationInView:self];

        // puch the touch location (pt) onto our array of points
        [self.points addObject:[NSValue valueWithCGPoint:pt]];

        // update display by calling it's 'drawRect' method
        [self setNeedsDisplay]; 

    }
    @end 
```

只需将此视图添加为您的主视图的子视图，如下所示...

首先在.h文件中添加类..

```
@class TouchView; 
```

然后在`.h`文件中创建如下对象..

```
TouchView *viewScratch; 
```

并在`.m`文件中添加此代码

```
 - (void)viewDidLoad
   {
     viewScratch = [[TouchView alloc]initWithFrame:CGRectMake(0, 0, 1024, 694)];// set frame which you want...
    [viewScratch clipsToBounds];
    [viewScratch drawPic:[UIImage imageNamed:@"yourImageName"]];
    [self.view addSubview:viewScratch];
   } 
```

# java - 如何清除 JSONArray

> ID：13819612
> 
> 赞同：7
> 
> 时间：2012-12-11T11:40:44.230
> 
> 标签：java, android, json

如何清除**JSONArray中的数据**

没有什么像：

```
jsonArray.clear(); 
```

甚至不：

```
jsonArray.remove(index); 
```

这是在这里建议的：

[如何从 JSONArray 中删除特定元素？](https://stackoverflow.com/questions/8820551/how-do-i-remove-a-specific-element-from-a-jsonarray#answers)

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-11T11:47:15.720

```
jsonArray = new JSONArray(new ArrayList<String>()); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-11T12:06:58.620

这不是一个完美的答案，但你可以这样做，

```
jsonArray=new jsonArray("[{}]"); 
```

**编辑**

根据评论中的建议，您还可以使用以下代码：

```
jsonArray=new jsonArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-10T06:25:55.583

刚刚制作了局部变量

```
JSONArray jsonArray = new JSONArray();
jsonArray.put(productlist); 
```

每次使用本地块添加 jsonserver 数据时，如果您清除全局块，则需要清除 jsonarray

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-19T10:33:13.967

我尝试了一切，但唯一对我有用的是

```
jsonArray.clear();

or you can make it local variable again

JSONArray jsonArray = new JSONArray(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-01T07:51:19.113

`clear()`在我拥有的图书馆`ArrayList`中，似乎没有任何方法可以调用`JSONObject`. 然而它确实有`public Object remove(int index)`。我只是在使用`new JSONObject()`:(

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-20T10:10:11.620

我不认为“new JSONArray()”是一个好的解决方案。

有时您需要从内部类中访问 JSONArray 对象，因此您必须将 JSONArray 对象声明为 final，然后您不能再将其分配给新对象。

最好的方法是循环删除它的元素。

```
while(myjsonarray.length()>0)
{
    myjsonarray.remove(0);
} 
```

你说“没有什么像 jsonArray.remove(index);”，并且还用“java”、“android”标记了这个问题

但是现在我用的是Android Studio 3.6.3，JSONArray类有这个方法，你也可以在[Android Studio官方文档](https://developer.android.com/reference/org/json/JSONArray?hl=en#remove(int))中找到。因此，我想您应该编辑问题的标题，例如“为什么我的 android studio 没有 JSONArray 类的完整方法”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-03T13:27:32.877

`jsonArray.clear();`这对我有用。我使用的是 org.json（不是 org.json.simple）库中的 JSONArray。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-07-29T09:56:54.197

您需要在 JSONArray 的长度上运行一个 while 循环，并且每次都删除第一个索引。当 JSONArray 的长度为零时，循环将到达一个阶段，以表明 JSONArray 不为空并被清除。

```
while (optionArray.length() > 0) {
            optionArray.remove(0)
    } 
```

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2014-04-30T04:06:29.340

这是一个答案，请尝试一下：

```
jsonArray=[] 
```

# c - 汇编中的 C 调用约定（64 位） - scanf

> ID：13819615
> 
> 赞同：3
> 
> 时间：2012-12-11T11:40:53.383
> 
> 标签：c, assembly, 64-bit, printf, scanf

我有一些使用 scanf 和 printf 的汇编代码，但遇到了一些问题。当这两个函数在同一代码中使用时，寄存器中的值似乎会丢失。该程序基本上加载一个数字并将其打印出来。我们使用

```
nasm -f elf64 file.asm && gcc -o file file.o && ./file 
```

在 Linux 上

这是我们的代码：

```
extern printf
extern scanf
section .data

  a db "set: ", 0
  b db "not set: ", 0
  reading db "Please enter a number: ", 0
  message db "\n", 0
  printsent db "%s", 10, 0
  printint db "%d", 10, 0
  printchar db "%c", 10, 0

  readInt db "%d", 0
  input db "%d", 0

section .text
    global main

main:

hatta: 
push rbp,
mov  rbp, rsp,
push rbx,
xor  rax, rax,
mov  rdi, printsent,
mov  rsi, reading
call  printf,
pop  rbx,

xor  rax, rax,
mov  rdi, readInt,
call  scanf,
mov  rbx, rdi

push rbx,
xor  rax, rax,
mov  rdi, printint,

mov  rsi, rbx,
call  printf,
pop  rbx,

pop  rbp,
ret 
```

奇怪的是，如果`mov rdi, printint,`删除该行，我们会获得正确的值。然而，如果我们对 printsentence 做同样的事情，我们会得到一个分段错误。谁能告诉我们这样做的原因？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-07T09:03:07.133

您的使用中有两个错误`scanf`，可能基于一个错误的假设：您似乎的意思是`scanf`返回加载的数字，`rdi`并且不需要进一步的参数 format `"%d"`。事实上，数字（如果扫描成功）会在第二个参数指向的内存中返回。因此，以下更改使代码工作。

```
pop  rbx,                              |  ;delete
                                       =  
xor  rax, rax,                         =  xor  rax, rax,
mov  rdi, readInt,                     =  mov  rdi, readInt,
                                       >  mov  rsi, rsp
call  scanf,                           =  call  scanf,
mov  rbx, rdi                          |  pop  rbx, 
```

关于*是否删除了 mov rdi, printint 行，我们获得了正确的值*——我对此表示怀疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:01:25.150

我不明白你为什么在这里有 C 标志，没有涉及 C 代码，但是对于你的问题：

据我记得 Linux glibc x64 中的调用约定`printf(format, argument)`是`format in rdi`, `argument in rsi`.

如果您删除`mov rdi, printsent,`，那么您正在调用`printf(undefined,"Please enter a number: ")`. 您没有在 中提供格式参数`rdi`，但`printf` 不知道并使用当时的任何内容`rdi`。很可能是一个无效的内存地址，因此调用了`SIGSEGV`.

默认情况下，x86 中的函数调用应该对参数是非破坏性的，但这不是必需的。标准库函数通常是。他们通过将参数推入堆栈并在完成后重新加载它们来实现这一点。

因此，当您调用它时，它将恢复与返回时具有相同内容的`scanf(readInt, ...)`指针。因此，删除该行无效，因为包含指向您需要的格式的有效指针。`readInt``printint``rdi``mov rdi, printint,``rdi`

# multiple-databases - 从 vlookup 不起作用的 300 张纸中提取值

> ID：13819620
> 
> 赞同：1
> 
> 时间：2012-12-11T11:41:03.600
> 
> 标签：multiple-databases, vlookup

我有一个 Excel 电子表格，里面只有不到 300 张。第一张表有一个项目列表，所有项目都编号为 1.1.1、1.1.2 等。其余的表有一些项目列在上面，而不是按数字顺序排列。我正在尝试提取所有不同工作表上针对这些项目列出的数量和总数。

这些工作表由于结构不佳而变得复杂，因此具有跨合并单元格的部分标题。

我可以使用 excel 中的搜索工具手动获取此信息并访问数字的每个实例，然后手动将所有数量和总数相加。有什么办法可以自动化吗？即通过要求excel从表1中获取每个唯一标识符，在其余表中找到它并返回数量和/或总数？

我尝试使用 vlookup 但它似乎只返回一个值并忽略所有其他值。

即使有一个公式，我必须手动更改唯一标识符，这会更快！

感谢您提供的任何帮助。我不是程序员，所以自己构建 vb 可能比手工构建需要更长的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:16:27.123

If you add a $ before your lookup data for example

search - $A&2:&AZ&1000

then you are telling excel to look for anything in that array.

because if you do not have a $ in and you copy it, it starts excluding everything above that.

# java - Spring Rest Client 实现：无法提取响应：没有找到适合 xstreamMarshaller 的响应类型的 HttpMessageConverter

> ID：13819630
> 
> 赞同：1
> 
> 时间：2012-12-11T11:41:34.290
> 
> 标签：java, spring, rest, spring-mvc, restlet

我正在使用 spring mvc 和 rest 开发客户端服务器应用程序。它的简单计算器服务，客户端调用服务器的方法来执行操作。

**这是我的休息客户端代码restClient.java：**

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.blog.samples.client;

/**
 *
 * @author bhushan.baviskar
 */
import com.blog.samples.domain.Calculator;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.web.client.RestTemplate;

public class restClient {

  public static void main(String [] args)
  {
      restClient tmp = new restClient();
      tmp.calltoserver();
  }
  public void calltoserver() {
    ApplicationContext applicationContext = new ClassPathXmlApplicationContext("../../../../appContext.xml", restClient.class);
    RestTemplate restTemplate = applicationContext.getBean("restTemplate", RestTemplate.class);
    String url = "http://localhost:8080/rest/calc/4&3&+";
    Calculator calObj = (Calculator) restTemplate.getForObject(url, Calculator.class);
    System.out.println("details " + calObj.getDetails());
    System.out.println("done");
  }
} 
```

**这是我的 appContext.xml 文件：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd">

  <bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
        <property name="messageConverters">
      <bean id="messageConverter" class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
        <property name="marshaller" ref="xstreamMarshaller" />
        <property name="unmarshaller" ref="xstreamMarshaller" />
      </bean>
    </property>
  </bean>

  <bean id="xstreamMarshaller" class="org.springframework.oxm.xstream.XStreamMarshaller">
    <property name="aliases">
    <props>
      <prop key="Calculator">com.blog.samples.webservices.rest.CalcController</prop>
    </props>
    </property>
  </bean>

</beans> 
```

**我收到 json 格式的响应，但是当我执行 restclient.java 文件时它说：**

```
DEBUG: [Dec-11 16:54:39,706] web.client.RestTemplate - GET request for "http://localhost:8080/rest/calc/4&3&+" resulted in 200 (OK)

Exception in thread "main" org.springframework.web.client.RestClientException: **Could not extract response: no suitable HttpMessageConverter found for response type** [com.blog.samples.domain.Calculator] and content type [text/plain;charset=UTF-8]
    at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:84)
    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:446)
    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:401)
    at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:199)
    at com.blog.samples.client.restClient.calltoserver(restClient.java:27)
    at com.blog.samples.client.restClient.main(restClient.java:21)
------------------------------------------------------------------------ 
```

我是 Spring Rest 客户端开发的新手，因此将不胜感激。

如果有人知道请。告诉我如何处理响应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T09:42:47.997

这是因为 MappingJacksonHttpMessageConverter 未注册到您的 restTemplate。默认情况下，类路径中存在的所有类型的 MessageConverters 都将被注册。

您应该在 xml 中删除 bean restTemplate 的属性 messageConverters 以获得默认的 messageconverters，或者您必须将 MappingJacksonHttpMessageConverter 添加到 xml 中的 messageConverters 列表中。

希望这可以帮助

# performance - 为什么“grep --ignore-case”慢了 50 倍？

> ID：13819635
> 
> 赞同：15
> 
> 时间：2012-12-11T11:41:54.237
> 
> 标签：performance, bash, time, grep

我很惊讶地发现，当您添加该`--ignore-case`选项时`grep`，它会使搜索速度减慢 50 倍。我已经在两台不同的机器上进行了测试，结果相同。我很想知道巨大的性能差异的解释。

我还希望看到 grep 的替代命令以进行不区分大小写的搜索。我不需要正则表达式，只需要固定字符串搜索。首先，测试文件将是一个 50 MB 的纯文本文件，其中包含一些虚拟数据，您可以使用以下代码生成它：

**创建 test.txt**

```
yes all work and no play makes Jack a dull boy | head -c 50M > test.txt
echo "Jack is no fun" >> test.txt
echo "Jack is no Fun" >> test.txt 
```

**示范**

下面是缓慢的演示。通过添加该`--ignore-case`选项，命令会慢 57 倍。

```
$ time grep fun test.txt
all work and no plJack is no fun
real    0m0.061s

$ time grep --ignore-case fun test.txt
all work and no plJack is no fun
Jack is no Fun
real    0m3.498s 
```

**可能的解释**

谷歌搜索我发现一个关于 grep 在 UTF-8 语言环境中速度慢的讨论。所以我进行了以下测试，它确实加快了速度。我机器上的默认语言环境是`en_US.UTF-8`，因此将其设置为`POSIX`似乎已经启动了性能，但现在我当然无法正确搜索 Unicode 文本，这是不受欢迎的。它仍然慢了 2.5 倍。

```
$ time LANG=POSIX grep --ignore-case fun test.txt
all work and no plJack is no fun
Jack is no Fun
real    0m0.142s 
```

**备择方案**

我们可以改用 Perl，它更快，但仍然比区分大小写的 grep 快 5.5 倍。上面的 POSIX grep 大约快两倍。

```
$ time perl -ne '/fun/i && print' test.txt
all work and no plJack is no fun
Jack is no Fun
real    0m0.388s 
```

因此，如果有人有的话，我很想找到一个快速正确的替代方案和解释。

**更新-CentOS**

上面测试的两台机器都运行 Ubuntu，一台 11.04（Natty Narwhal），另一台 12.04（Precise Pangolin）。在 CentOS 5.3 机器上运行相同的测试会产生以下有趣的结果。两种情况的性能结果几乎相同。现在 CentOS 5.3 于 2009 年 1 月发布，运行 grep 2.5.1，而 Ubuntu 12.04 运行 grep 2.10。因此，新版本可能会发生变化，两个发行版可能会有所不同。

```
$ time grep fun test.txt
Jack is no fun
real    0m0.026s

$ time grep --ignore-case fun test.txt
Jack is no fun
Jack is no Fun
real    0m0.027s 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T12:01:16.103

我认为这个错误报告有助于理解为什么它很慢：

[错误报告 grep，忽略大小写速度慢](https://bugzilla.redhat.com/show_bug.cgi?id=194471)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-09T13:44:47.207

这种缓慢是由于 grep（在 UTF-8 语言环境上）不断访问文件“/usr/lib/locale/locale-archive”和“/usr/lib/gconv/gconv-modules.cache”。

它可以使用[strace](https://en.wikipedia.org/wiki/Strace)实用程序显示。这两个文件都来自 glibc。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-25T18:16:15.660

原因是它需要对当前语言环境进行 Unicode 感知比较，从 Marat 的回答来看，这样做效率不高。

这显示了不考虑 Unicode 时它的速度有多快：

```
$ time LC_CTYPE=C grep -i fun test.txt
all work and no plJack is no fun
Jack is no Fun
real    0m0.192s 
```

当然，这种替代方法不适用于其他语言中的字符，例如 Ñ/ñ、Ø/ø、Ð/ð、Æ/æ 等。

另一种选择是修改正则表达式，使其不区分大小写：

```
$ time grep '[Ff][Uu][Nn]' test.txt
all work and no plJack is no fun
Jack is no Fun
real    0m0.193s 
```

`sh`这是相当快的，但是将每个字符转换为一个类当然很痛苦，并且与上面的不同，将它转换为别名或脚本并不容易。

为了比较，在我的系统中：

```
$ time grep fun test.txt
all work and no plJack is no fun
real    0m0.085s

$ time grep -i fun test.txt
all work and no plJack is no fun
Jack is no Fun
real    0m3.810s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T12:12:02.260

要进行不区分大小写的搜索，grep 首先必须将整个 50 MB 文件转换为一种或另一种。这需要时间。不仅如此，还有内存副本……

在您的测试用例中，您首先生成文件。这意味着它将被内存缓存。第一次运行 grep 只需要[映射](https://en.wikipedia.org/wiki/Mmap)缓存的页面；它甚至不必访问磁盘。

不区分大小写的 grep 执行相同的操作，但随后它会尝试修改该数据。这意味着内核将对每个修改的 4 kB 页面进行异常处理，最终不得不将整个 50 MB 复制到新内存中，一次一页。

基本上，我*希望*这会更慢。也许不是慢 57 倍，但肯定更慢。

# ruby-on-rails - Rails erb文件中未定义的方法each_pair

> ID：13819636
> 
> 赞同：1
> 
> 时间：2012-12-11T11:41:59.500
> 
> 标签：ruby-on-rails

我收到以下错误：

```
undefined method `each_pair' for []:Array 
```

当尝试在 Rails erb 视图中迭代哈希时：

```
<% @result.each_pair do |k, v| %>
  <li><%= k %></li>
<% end %> 
```

在普通的 Ruby 中，它工作正常。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:58:07.083

根据错误消息，`@result`必须是**Array**。`each_pair`没有为它定义方法。（方法`each_pair`是为 Hash 等定义的。）

尝试这个：

```
<% @result.each do |v| %>
  <li><%= v %></li>
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:59:42.297

你们都是对的（当然）。在我使用的初始页面加载中

```
@result = [] 
```

它只有在填充后才成为哈希。

使用

```
@result = Hash.new 
```

修复了一切

对不起没用的帖子

# objective-c - 从数组元素属性获取对象时出错

> ID：13819640
> 
> 赞同：0
> 
> 时间：2012-12-11T11:42:07.280
> 
> 标签：objective-c, ios

我有一个简单的 Cocoa 应用程序，它解析 JSON 并将 JSON 的信息打包到 Day 类的对象。

天.h。

```
#import <Foundation/Foundation.h>

@interface Day : NSObject

@property(retain, nonatomic) NSString *dateString;

@end 
```

主文件

```
import <Foundation/Foundation.h>
import </Users/Admin/Documents/SimpleJsonParser/SBJSON.h>
#import "Day.h"

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        // source json object
        NSString *jsonSource = @"{\"days\":[{\"dateString\":\"10 december\"},{\"dateString\":\"11 december\"}]}";

        SBJsonParser *jsonParser = [[SBJsonParser alloc] init];

        NSError *error = nil;

        NSDictionary *jsonObjects = [jsonParser objectWithString:jsonSource error:&error];

        if(error != nil){
            NSLog([error description]);
        }

        // array of days objects
        NSArray *days = [jsonObjects objectForKey:@"days"];

        // create empty array
        NSMutableArray *daysSource = [[NSMutableArray array] retain];

        for(int i = 0; i < [days count]; i++){

            NSDictionary *day = [days objectAtIndex:i];

            // get dateString
            NSString *dateString = [day objectForKey:@"dateString"];

            // create Day object
            Day* dayObject = [[Day alloc] init];

            dayObject.dateString = dateString;

            NSLog(dayObject.dateString);            

            [daysSource addObject:day];
        }

        NSUInteger temp = [daysSource count];
        NSLog(@"Temp is %lu", temp);

        Day *myDay = [daysSource objectAtIndex:0];

        NSString *dateStringTemp = myDay.dateString;
    }
} 
```

当我运行这段代码时，我得到了这个错误：

```
2012-12-11 14:09:50.867 SimpleJsonParser[577:303] -[__NSDictionaryM dateString]: unrecognized selector sent to instance 0x10010e4d0
2012-12-11 14:09:50.869 SimpleJsonParser[577:303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSDictionaryM dateString]: unrecognized selector sent to instance 0x10010e4d0'
*** First throw call stack:
(
    0   CoreFoundation                      0x00007fff90a2e0a6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff8c6713f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff90ac46ea -[NSObject(NSObject) doesNotRecognizeSelector:] + 186
    3   CoreFoundation                      0x00007fff90a1c5ce ___forwarding___ + 414
    4   CoreFoundation                      0x00007fff90a1c3b8 _CF_forwarding_prep_0 + 232
    5   SimpleJsonParser                    0x0000000100001700 main + 704
    6   libdyld.dylib                       0x00007fff850b57e1 start + 0
    7   ???                                 0x0000000000000001 0x0 + 1
)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

为什么 Day 类的属性“dateString”保存为 NSDictionary？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:48:33.883

返回的对象`[daysSource objectAtIndex:0]`是`NSDictionary`

```
NSDictionary *myDay = [daysSource objectAtIndex:0];

NSString *dateStringTemp = [myDay objectForKey:@"dateString"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:55:50.460

**您正在将`dictionary`对象添加到数组而不是`Day`对象。**

改变：

```
[daysSource addObject:day]; 
```

到

```
[daysSource addObject:dayObject]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:54:00.260

一天是一本字典。你把它存储在 daySource 然后做 `Day *myDay = [daysSource objectAtIndex:0];`

# c++ - 我如何比较两个连续的迭代步骤？在 C++ 中

> ID：13819641
> 
> 赞同：-1
> 
> 时间：2012-12-11T11:42:12.377
> 
> 标签：c++, buffer, iteration

我构建了一个循环调用的程序。每次值 T 发生变化，我想比较上一个周期的值 T 和 T ，并为每个周期进行。

```
int T = externalsrc; //some external source
int prevT; //cannot do it because in the first cycle it will have no value when used in comparison
int prevT = 0; //cannot do it, because in every cycle prevT will be zero for my comparison
int comparison = prevT - T;
prevT = T; 
```

那我该怎么做呢？我也试过这个，但这里仍然没有声明 T：

```
int T;
int prevT;
if (prevT != T)
  prevT = 0;
else
  prevT = externalsrc;
int comparison = prevT - T;
prevT = T; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:47:25.620

使用您的第一个答案，但声明`prevT`为`static`并初始化为 0：

```
while (condition) {
    int T = externalsrc; //some external source
    static int prevT = 0; // declaring static means that it will only be set to 0 once
    int comparison = prevT - T;
    prevT = T;
} 
```

...这样在每次后续迭代中`prevT`都会忽略 的初始化，并且从上次迭代中保留该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:48:01.720

您可以保留一个布尔变量来告诉您这是不是第一次。

像这样的一些事情：

```
bool first_fime = true;

// ...

if (first_time)
{
    // Do something with T only
    previousT = T;

    // It's no longer the first time
    first_time = false;
}
else
{
    // Do something with both T and previousT
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T11:52:11.743

您可以在函数中定义 prevT `static`。

您的代码将是这样的

```
int T = externalsrc; //some external source
int prevT; //cannot do it because in the first cycle it will have no value when used in comparison
static int prevT = 0; //The first time it is called it will start with pr
int comparison = prevT - T;
prevT = T; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T11:51:50.810

```
struct compare
{
    compare() { prev = 0; }

    int operator() (int t)
    {
        int cmp;
        cmp = prev - t;
        prev = t;

        return cmp;
    }
private:
    int prev;
}; 
```

# c# - 跨项目命名空间的通用更改

> ID：13819644
> 
> 赞同：0
> 
> 时间：2012-12-11T11:42:24.097
> 
> 标签：c#, visual-studio-2010, namespaces, refactoring

我们有一个 ca 的解决方案。60个项目。

我们用于命名空间的标准是 CompanyName.ProjectName.Area.VisualStudioProjectname。

现在该项目已更改名称。

有没有办法在所有项目、wcf 服务和服务引用中更改命名空间的名称？

如果有帮助的话，我们有 ReSharper。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:44:13.047

一个好老人`Edit / Find and Replace / Replace in Files`怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:44:49.663

ReSharper -> Refactor -> Adjust Namespaces 可能会解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T11:45:21.673

[块同步编辑](http://coolthingoftheday.blogspot.co.uk/2012/12/block-edit-visual-studio-20102012.html)Visual Studio 扩展可能很好用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T11:50:22.307

有不同的方法可以达到这个结果。从 ReSharper 5.0 及更高版本开始，您可以简单地使用

**ReSharper -> 重构 -> 调整命名空间...**

但在你的情况下，我认为这不是你想要的。还有另一种解决方案，只需打开您想要更改的命名空间的一个代码文件选择部分，然后点击**CTRL + R + R**然后重命名。它将遍历您的所有项目文件并调整和重命名新的命名空间。

通过“类视图”窗口可以相当快速地更新它们，也可以获得相同的结果。打开类视图窗口，单击要重命名的命名空间，按**CTRL + R + R**然后重命名。

正如您提到的，您正在使用 ReSharper，因此您拥有获得结果所需的一切。

# jquery - 将具有新 id 的 HTML 元素动态添加到主干视图

> ID：13819653
> 
> 赞同：1
> 
> 时间：2012-12-11T11:43:05.803
> 
> 标签：jquery, backbone.js

我有一个模板，`<ul>`其中包含 2 个带有不同 ID`<li>`的链接的列表。`<a id='variable_id'>`我已将事件绑定到这 2 个 id`iniciais`和`palavras`. 问题是，当我单击示例`iniciais`链接时，我将其从 中删除`<ul>`并使用`id='palavras'`. 问题是，这个新链接没有绑定事件，即使事件在`events`哈希上。我怎样才能对子元素 执行类似`jQuery` `live`或`on`方法的操作？`Backbone` `View`

```
var MyView = Backbone.View.extend({
  el: '#campos',
  initialize: function() {
  }, 
```

请注意我如何将事件绑定到 2 种链接。

```
 events: {
    'click #palavras': 'mudar_para_consulta_palavras',
    'click #iniciais': 'mudar_para_consulta_iniciais'
  }, 
```

在这种方法中，我从列表中删除列表项，并插入一些具有新 ID 的新内容。

```
 mudar_para_consulta_palavras: function() {
    $('#campo_consulta').val('');
    $('#campo_consulta').attr('placeholder', 'Digite palavras inteiras');
    $("#campo_consulta").attr('tipo', 'chave');
    $('#palavras').parent().remove();
    $("<li><a id='#iniciais'>Consultar por Iniciais</a></li>").insertBefore('.divider');
  }, 
```

其他方法也一样，只是更改了 id 定义。

```
 mudar_para_consulta_iniciais: function() {
    $('#campo_consulta').val('');
    $('#campo_consulta').attr('placeholder', 'Digite inicio de palavras');
    $("#campo_consulta").attr('tipo', 'iniciais');
    $('#iniciais').parent().remove();
    $("<li><a id='#palavras'>Consultar por palavras</a></li>").insertBefore('.divider');
  }
});
return MyView;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:46:38.350

我认为您在插入 DOM 的标记中只是有小错字：

```
$("<li><a id='#iniciais'>Consultar por Iniciais</a></li>") 
```

和

```
$("<li><a id='#palavras'>Consultar por palavras</a></li>") 
```

id 属性中不应包含该`#`字符。

# php - 避免在电子邮件中获取 HTML 标签

> ID：13819659
> 
> 赞同：0
> 
> 时间：2012-12-11T11:43:18.160
> 
> 标签：php, html, email, tags

我编写了一个用于发送电子邮件的 PHP 脚本。我正在使用基于 PHP MySQL 的 CMS。我可以发送电子邮件，人们也可以收到电子邮件，但问题是他们的电子邮件中包含 HTML 标签。

当我使用该 CMS 编写邮件时，我必须在其中编写一些 HTML 标签，例如`</br>`等`<p>`。发送邮件的代码如下。我应该改变什么，以便人们可以收到没有 HTML 标记但格式化的 HTML 邮件的漂亮电子邮件。谢谢你的协助。

`$sentemail = mail($email_user, $subject, $message,"From: ABC<xyz@.com>\nX-Mailer: PHP/".phpversion());`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:46:29.080

您必须设置标头以发送 html 电子邮件，例如：`$headers = 'Content-type: text/html; charset=utf-8' . "\r\n";`，然后在 mail() 函数中使用标头而不是 From.. 语句。检查文档以获取更多信息[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)（示例 #4）

# html5-video - Video.js 是否支持 media 属性根据媒体查询改变来源？

> ID：13819662
> 
> 赞同：0
> 
> 时间：2012-12-11T11:43:36.210
> 
> 标签：html5-video, video.js

我正在使用 video.js 在响应式布局中提供 html5 视频（使用[Dave Rupert 的调整](http://daverupert.com/2012/05/making-video-js-fluid-for-rwd/)来改变宽度和高度以适应容器）。我现在正在开发一个需要在适当情况下提供更大视频的网站，我想使用 media 属性来提供不同的源视频。我可以使用 javascript 来更改源，但如果可能的话，我希望能够使用媒体查询，这样如果 JS 被禁用，那么仍然会提供合适的视频。

我的代码设置如下：

```
<video id="lightTouchVideo" class="video-js vjs-default-skin" controls preload="none" poster="/Content/images/video-posters/light-touch.jpg" data-setup="{}">
<source src="/Content/video/light-touch-240p.mp4" type='video/mp4'>
<source src="/Content/video/light-touch-240p.webm" type='video/webm'>
<source src="/Content/video/light-touch-240p.ogv" type='video/ogv'>
<source src="/Content/video/light-touch-360p.mp4" type='video/mp4' media="all and (min-width:599px)">
<source src="/Content/video/light-touch-360p.webm" type='video/webm' media="all and (min-width:599px)">
<source src="/Content/video/light-touch-360p.ogv" type='video/ogv' media="all and (min-width:599px)">
</video> 
```

我已经尝试为这两个来源使用非常明显不同的视频，我只是先得到源中列出的任何一个。我已经在最新的 Firefox、Chrome 和 IE 中尝试过，所以我不认为是浏览器不支持 video media 属性（尽管有传言称它会被考虑从规范中删除）。

那么，video.js 是否支持 media 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-18T23:23:07.727

直接回答你的问题，不。Video.js 不支持 media 属性。再说一次，source 的 media 属性只能在`<picture>`元素[(MDN)](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Media_queries)中使用。

但我们可以跳出框框思考来解决您的主要问题：

> 我现在正在开发一个需要在适当情况下提供更大视频的网站......如果可能的话，我希望能够使用媒体查询，这样如果 JS 被禁用，那么仍然会提供合适的视频.

因此，跳出框框思考并寻找一种非 js 的方法来解决它，我们仍然可以使用您对媒体查询的想法，只是不是以您可能想要的方式。

**[我在这里创建了一个示例](http://codepen.io/Manbearpixel/details/gbMoqG/)**来演示我将要解释的内容。

* * *

您需要将特定的类或 ID 名称附加到各种`<video>`标签，每个标签都包含您希望支持的每个特定设备的来源或适当的质量/尺寸。对于这个例子，我们将支持智能手机（最小 320 像素宽度）、平板电脑（最小 768 像素宽度）和台式机（最小 1224 像素宽度）。

从那里，您可以简单地`@media`在 CSS 文件中添加适当的定义来隐藏或显示特定视频。

```
.mobile-res, .tablet-res, .desktop-res {
  display: none;
}

/* Smartphones (portrait and landscape) */
@media (min-device-width : 320px) {
  .mobile-res {
    display: block;
  }
}

/* Tablets (portrait and landscape) */
@media (min-width : 768px) {
  .mobile-res {
    display: none;
  }
  .tablet-res {
    display: block;
  }
}

/* Desktops */
@media (min-width : 1224px) {
  .mobile-res,.tablet-res {
    display: none;
  }
  .desktop-res {
    display: block;
  }
} 
```

希望这有助于解决您的问题！干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T10:55:01.090

我有同样的问题，从我的测试来看，恐怕答案是否定的，这使得 video.js 无法用于定位移动设备。

# outlook - 当前上下文中不存在名称“应用程序”

> ID：13819663
> 
> 赞同：4
> 
> 时间：2012-12-11T11:43:36.943
> 
> 标签：outlook, vsto, ribbon

您好我正在开发一种解决方案，以使用 VSTO 2012 和 Microsoft Outlook 2010 插件在 Outlook 2010 中创建工具栏。简而言之，我可以创建 Outlook 功能区和一个按钮，但我无法获得打开 .oft 文件的按钮。在 Visual Studio 中，我收到以下错误“当前上下文中不存在名称‘应用程序’”。我还添加了对 Microsoft Office 14.0 对象库的引用。下面是代码...

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Linq;
using Outlook = Microsoft.Office.Interop.Outlook;
using Office = Microsoft.Office.Core;
using Microsoft.Office.Tools.Ribbon;

namespace OutlookAddIn8
{
public partial class Ribbon1
{
    private void Ribbon1_Load(object sender, RibbonUIEventArgs e)
    {

    }
    private void CreateItemFromTemplate()
    {
        Outlook.Folder folder =
            Application.Session.GetDefaultFolder(
            Outlook.OlDefaultFolders.olFolderDrafts) as Outlook.Folder;
        Outlook.MailItem mail =
            Application.CreateItemFromTemplate(
            @"c:\ivy.oft", folder) as Outlook.MailItem;
        mail.Subject = "Congratulations";
        mail.Save();
    }

    private void button1_Click(object sender, RibbonControlEventArgs e)
    {

    }
} 
```

}

感谢任何帮助，这可能是一些简单的事情被遗漏了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T03:58:05.177

可以使用 访问 Application 的实例`Globals.ThisAddIn.Application`。如果您将您的 AddIn 类重命名为不同的名称，例如 MyAddIn，那么命令将是：`Globals.MyAddIn.Application`。

这是一个包含更多详细信息的链接：http: [//msdn.microsoft.com/en-us/library/vstudio/bb157876 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb157876%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T17:15:02.367

终于到了最后，这里的代码......

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Office.Tools.Ribbon;
using Outlook = Microsoft.Office.Interop.Outlook;

namespace OutlookAddIn3
{
public partial class Ribbon1
{
    private void Ribbon1_Load(object sender, RibbonUIEventArgs e)
    {

    }
    private void button1_Click(object sender, RibbonControlEventArgs e)
    {
        Outlook.Application Application = Globals.ThisAddIn.Application;
        Outlook.MailItem mail =
            Application.CreateItemFromTemplate(
            @"Z:\Transfer\Outlook 2010 Templates\testsubject.oft") as Outlook.MailItem;
        mail.Display(true);
    } 
```

# asp.net - 将 asp.net 站点迁移到 windows azure 和错误 102 WAT080

> ID：13819670
> 
> 赞同：0
> 
> 时间：2012-12-11T11:43:53.760
> 
> 标签：asp.net, azure, azure-storage

我尝试将 asp 站点迁移到 windows azure。我按照以下链接进行操作。

[http://blogs.msdn.com/b/zkap/archive/2012/07/29/how-to-migrate-an-existing-asp-net-website-to-windows-azure.aspx](http://blogs.msdn.com/b/zkap/archive/2012/07/29/how-to-migrate-an-existing-asp-net-website-to-windows-azure.aspx)

按照步骤并尝试调试后，我收到以下错误：

```
Error   102 WAT080 : Failed to locate the Windows Azure SDK. Please make sure the Windows Azure SDK v1.7 is installed. 
```

我搜索并找到[了此链接](http://www.microsoft.com/en-us/download/details.aspx?id=28045)。我尝试下载并安装，但出现错误：

```
The installation package is not supported ........ 
```

只有最后一个是安装。

我搜索并没有找到 `SDK v1.7`下载链接。我正在使用`VS2010 ULTIMATE`。谢谢。

# ios - NSDate 对象未显示确切日期

> ID：13819672
> 
> 赞同：0
> 
> 时间：2012-12-11T11:43:59.580
> 
> 标签：ios, nsdate, nsdateformatter

我面临一个`NSDate`对象的奇怪问题，我想从两个日期之间的核心数据中获取记录。日期不同时似乎没问题，但是当我尝试从相同日期获取时，它什么也没给我。我尝试使用上面的代码设置两个日期的时间：

```
// This is for starting date
NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];

NSDateComponents *dateComps = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:date1];

[dateComps setHour:00];
[dateComps setMinute:00];
[dateComps setSecond:00];
NSDate *itemDate = [calendar dateFromComponents:dateComps];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd hh:mm a"];
NSString *fdate=[formatter stringFromDate:itemDate]; 
```

在这里，`fdate`给我我想要的字符串形式的日期（`2012-12-11 12:00 AM`）。但是当我尝试`NSDate`使用上面的代码将其转换为时；

```
NSDate *dt=[formatter dateFromString:fdate]; 
```

上面的输出（`2012-12-10 18:30:00 +0000`）完全破坏了我的努力。请建议我必须做些什么来阻止这种情况。

# c# - 如何将输入参数传递给正在运行的 Windows 应用程序？

> ID：13819675
> 
> 赞同：0
> 
> 时间：2012-12-11T11:44:06.430
> 
> 标签：c#, winforms, command-line-arguments

我有一个可以从托盘图标运行的 Windows 应用程序。

在其菜单上单击，将出现一个窗口窗体。我还添加了一个注册表项，它将在选择文件时在 Windows 菜单中添加一个菜单项。当我们单击该菜单项时，它将加载与我们单击的输入文件相同的窗体。事情到此为止还算顺利。但它正在任务管理器中生成另一个 exe。

我想在这里实现的是使用输入参数（这里说文件路径）打开已经运行的同一个 exe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:21:21.263

在以前的项目中，我将一个字符串打包到一个原子中，并通过 WM_COPYDATA 消息将其传递给其他应用程序。

这可能值得研究。我相信这是该信息的最初目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:28:59.770

在应用程序启动时，您应该：

*   搜索您的应用程序的现有流程；
*   如果存在；

    *   使用 WCF 传递参数；
*   如果它不存在，只需启动应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:30:48.367

只需稍加搜索即可找到答案

看到这个链接：

[http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/53a2c453-3502-44bd-9f43-b07250957ed5](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/53a2c453-3502-44bd-9f43-b07250957ed5)

[如何将字符串传递给 exe 并使用 C# 中的 Process 从 exe 中检索](https://stackoverflow.com/questions/4668019/how-to-pass-a-string-to-an-exe-and-retrieving-from-the-exe-using-process-in-c-sh)

[带参数运行EXE](https://stackoverflow.com/questions/7008647/running-exe-with-parameters)

欲了解更多信息谷歌这个： `send parameters to another exe file in c#`

# android - 比较android中两个图像的RGB颜色值

> ID：13819681
> 
> 赞同：1
> 
> 时间：2012-12-11T11:44:22.200
> 
> 标签：android, image, bitmap, rgb

为了获得一张图像的 RGB 值，我使用了以下代码片段

```
int[] pix = new int[picw * pich];
                 bitmap.getPixels(pix, 0, picw, 0, 0, picw, pich);

                 int R, G, B,Y;

                 for (int y = 0; y < pich; y++){
                 for (int x = 0; x < picw; x++)
                     {
                     int index = y * picw + x;
                     int R = (pix[index] >> 16) & 0xff;     //bitwise shifting
                     int G = (pix[index] >> 8) & 0xff;
                     int B = pix[index] & 0xff;

                     //R,G.B - Red, Green, Blue
                      //to restore the values after RGB modification, use 
     //next statement
                     pix[index] = 0xff000000 | (R << 16) | (G << 8) | B;
             }} 
```

我想比较两个图像，我知道比较像素值会更昂贵。我还分析了 OpenCV 库，但我不会满足我的要求。

是否有任何算法可以在android中使用RGB值比较图像？

或者

还有其他比较RGB值的方法吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T18:33:00.180

我不确定您的要求是什么，但如果您只想比较两个图像的 (RGB) 调色板，您可能需要使用[Apache Commons Imaging (fka "Sanselan")中的](http://commons.apache.org/proper/commons-imaging/)[PaletteFactory](http://commons.apache.org/proper/commons-imaging/apidocs/org/apache/commons/imaging/palette/PaletteFactory.html)方法：

这些`PaletteFactory`方法建立了集合 (`int[]`和`List<>`)，然后可以对其进行迭代。我不确定你需要做什么样的比较，但一个相当简单的例子，使用 eg `makeExactRgbPaletteSimple()`，将是：

```
final File img1 = new File("path/to/image_1.ext")
final File img2 = new File("path/to/image_2.ext")
final PaletteFactory pf;
final int MAX_COLORS = 256;
final Palette p1 = pf.makeExactRgbPaletteSimple(img1, MAX_COLORS);
final Palette p2 = pf.makeExactRgbPaletteSimple(img2, MAX_COLORS);

final ArrayList<Int> matches = new ArrayList<Int>(Math.max(p1.length(), p2.length()));
int matchPercent;

// Palette objects are pre-sorted, afaik

if ( (p1 != null) && (p2 != null) ) {
  if (p1.length() > p2.length()) {
    for (int i = 0; i < p1.length(); i++) {
      final int c1 = p1.getEntry(i);
      final int c2 = p2.getPaletteIndex(c1);
      if (c2 != -1) {
        matches.add(c1);
      }
    }
    matchPercent = ( (int)( (float)matches.size()) / ((float)p1.length) * 100 ) )
  } else if (p2.length() >= p1.length()) {
    for (int i = 0; i < p1.length(); i++) {
      final int c1 = p2.getEntry(i);
      final int c2 = p1.getPaletteIndex(c1);
      if (c2 != -1) {
        matches.add(c1);
      }
    }
    matchPercent = ( (int)( (float)matches.size()) / ((float)p2.length) * 100 ) )
  }
} 
```

*这只是一个最小的例子，它可能编译也可能不编译，而且几乎可以肯定不是你在比较逻辑方面寻找的东西*。

基本上，它所做的是检查 的每个成员`p1`是否也是 的成员`p2`，如果是，则将其添加到`matches`. 希望逻辑是正确的，不能保证。`matchPercent`是两个`Palette`s 中存在的颜色的百分比。

*这可能**不是**您想要的比较方法。这只是一个简单的例子。*

您肯定需要使用 , 的第二个参数`makeExactRgbPaletteSimple()`，因为我任意选择了 256 - 请记住，如果太小`int max`，该方法将（令人讨厌，imo）返回。`null``max`

我建议从源代码构建，因为存储库已经有一段时间没有更新了。该项目绝对不成熟，但它相当小，对于中等大小的图像和纯 Java 来说相当快。

希望这可以帮助。

# sql - 在 oracle 10 g 中添加列时出错

> ID：13819683
> 
> 赞同：0
> 
> 时间：2012-12-11T11:44:34.763
> 
> 标签：sql, oracle10g

我正在尝试将列 validFrom 添加到我的表中

这是我的查询

```
alter table mytable add validFrom date default getdate()  not null 
```

我收到类似的错误

```
ORA-04044: procedure, function, package, or type is not allowed here 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:48:35.793

Oracle 没有`getdate()`功能——通过查看手册很容易找到。

您需要使用`SYSDATE`或`CURRENT_DATE`

```
ALTER TABLE mytable ADD (validFrom date DEFAULT sysdate); 
```

# c#-4.0 - 当另一个应用程序使用相同的 MS Access 文件时连接 MS Access 数据库

> ID：13819685
> 
> 赞同：0
> 
> 时间：2012-12-11T11:44:42.477
> 
> 标签：c#-4.0, ms-access, silverlight-4.0

我将 Silverlight 与连接到服务器中的 ms 访问数据库的 c# 应用程序一起使用。我的连接字符串看起来像，

```
 Provider=Microsoft.JET.OLEDB.4.0; Data Source=\\151.12.1.99\DatabasePath\Database.mdb; Jet OLEDB:Database Password=Password;Mode= Read 
```

当我直接执行应用程序而没有任何错误时，它工作正常。但是当我部署应用程序时，它会抛出

```
 "The Microsoft Jet database engine cannot open the file "\\151.12.1.99\DatabasePath\Database.mdb". It is already opened exclusively by another user, or you need permission to view its data. 
```

任何人都可以帮助我有什么问题吗？我只以阅读模式打开文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:58:13.763

你为什么不使用DSN代替？？？

问题是，一旦您的应用程序打开 .mdb 文件，它就会“保留”到该应用程序实例。我认为最简单的方法是使用 DSN，让 ODBC 管理数据库访问。

```
conn.ConnectionString = "FIL=MS Access;DSN=your_dsn_name"; 
```

# android - Android：来自引用库项目的资源隐藏客户端应用程序的资源

> ID：13819687
> 
> 赞同：0
> 
> 时间：2012-12-11T11:44:51.733
> 
> 标签：android, openframeworks

我有两个安卓项目：

**项目A**：一个库项目（openframeworks的AndroidLib项目）。

**项目 B：**引用**项目 A 的**android 项目。

**问题是，当我在Project B**中添加字符串资源、布局或任何类型的资源时，我无法从代码中访问它，而是可以访问 Project A 中定义的资源。

我清理了项目并确保我使用**Project B**的包名称访问**R 类**，但仍然看不到**Project B**的资源。

 ****这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:10:44.220

好的，我知道了

我刚刚通过右键单击项目-> Android 工具->修复项目属性来修复项目****

# internet-explorer-7 - IE7 上不显示字体真棒图标

> ID：13819689
> 
> 赞同：6
> 
> 时间：2012-12-11T11:45:07.163
> 
> 标签：internet-explorer-7, mime-types, font-awesome

IE7 上不显示 Font Awesome 图标。他们在 IE8、IE9、FF 和 Chrome 上运行。

示例 HTML：

```
<span rel="tooltip" data-placement="top" data-original-title="Click to add question to favorites">
    <i class="icon-star-empty"></i>
</span> 
```

包括的文件：

```
<link href="/css/bootstrap.css" rel="stylesheet">
<link href="/css/font-awesome.css" rel="stylesheet">
<link href="/css/font-awesome-ie7.css"> 
```

对 .woff 的请求：

```
Request: 
URL:http://example.com/font/fontawesome-webfont.woff

Response:
Accept-Ranges:bytes 
Connection:Keep-Alive 
Content-Length:41752
Content-Type:application/octet-stream 
Date:Tue, 11 Dec 2012 11:31:51 GMT 
ETag:"4095e-a318-4cf1d75fb20dd" 
Keep-Alive:timeout=5, max=98
Last-Modified:Thu, 22 Nov 2012 23:02:27 GMT Server:Apache/2.2.22 (Ubuntu) 
```

我已经在 Apache 的 /etc/apache2/mods-enabled/mime.conf 上配置了这个（并重新启动了 Apache）：

```
AddType application/octet-stream .woff 
```

我是否缺少任何配置？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-12-09T16:58:12.707

快速更新到这个线程。

FontAwesome 不再支持 IE7，但如果你遇到了不幸的情况，你需要支持它，因为你需要支持专有软件，我不会提到谁的名字，它包括它作为唯一的浏览器，并且拒绝升级即使，在发这篇文章的时候，IE8已经出来将近4年了，我们现在在IE11上，然后像我一样做：

1.  下载 ie7.min.css 文件并添加上面答案中指示的部分：

2.  打开 ie7.min.css 文件并将所有“.icon-”更改为“.fa-”，因为 FontAwesome 已更改其命名约定。

这将使您支持大约 95% 的 FA 4.0.3 图标（旧的 ie7.min.css 文件不支持新引入的字体。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-28T13:54:05.350

最好使用 IE7 条件注释，这样文件只会在 IE7 中加载。（取自[Fontawesome 示例](http://fortawesome.github.io/Font-Awesome/get-started/)）

```
<link rel="stylesheet" media="all" href="assets/css/your-icons.css" />
<!--[if IE 7]>
<link rel="stylesheet" media="all" href="assets/css/your-icons-ie7.min.css" />
<![endif]--> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T13:06:51.013

毕竟配置是正确的。由于某种原因 font-awesome-ie7.css 没有正确加载。确保该文件正在加载后，一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-12T08:59:20.893

即使是新图标，也有一种方法可以支持 IE7。

首先下载这个作为基础。 [https://gist.github.com/dorajistyle/7461853](https://gist.github.com/dorajistyle/7461853)

然后，如果缺少任何图标，请转到图标列表中的该图标。例如新的fa-balance-scale。 [http://fontawesome.io/icon/balance-scale/](http://fontawesome.io/icon/balance-scale/)

在那里你会看到 unicode char 是 f24e

然后将它添加到最后的 font-awesome-ie7.min.css

```
.fa-balance-scale {
    *zoom: expression( this.runtimeStyle['zoom'] = '1', this.innerHTML = 
'&#xf24e;');
} 
```

对您正在使用的任何图标重复此操作

# sockets - 什么可以限制从 read() 读取的字节数

> ID：13819690
> 
> 赞同：0
> 
> 时间：2012-12-11T11:45:10.847
> 
> 标签：sockets

我正在从这样初始化的套接字中读取字节：

```
fd = socket(PF_PACKET, SOCK_RAW, htons(ETH_P_ALL)); 
```

但是，当我从这个套接字读取

```
char buf[ETH_FRAME_LEN]
len = read(fd, buf, sizeof(buf)); 
```

len 显示只读取了 1500 个字节。我检查了wireshark，返回的数据包是5854。IP下的总长度字段为5840（所以+ 14字节的以太网头= 5854）。我尝试使用更大的缓冲区（6000），但仍然只有 1500 个字节被从线路中读取。

我尝试从服务器请求一个较小的文件（1504 字节），但我得到了相同的结果。由于它是一个原始套接字，因此读入的数据包括以太网标头，因此它不会将最后 4 个字节读入缓冲区。

这可能是什么原因？我不知道有任何论据`socket()`可能导致这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:52:53.083

如果您`read`再次尝试呼叫会发生什么？消息的下一个块是否很快返回？

从阅读[手册页](http://linux.die.net/man/2/read)（我的重点）

> read() 尝试读取***最多***count 个字节

如果你想读取一定数量的字节，你应该准备好`read`循环调用，直到你收到你的目标总数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:57:12.807

正在发生的事情是，[每次](http://en.wikipedia.org/wiki/Maximum_transmission_unit)调用`read()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:17:03.020

`read()`返回：

> 成功时，返回读取的字节数（零表示文件结束），文件位置提前该数字。 **如果此数字小于请求的字节数，则不是错误**；这可能会发生，例如因为现在实际可用的字节数较少（可能是因为我们接近文件结尾，或者因为我们正在从管道或终端读取），或者因为 read() 被中断信号。出错时，返回 -1，并适当设置 errno。在这种情况下，未指定文件位置（如果有）是否更改。

您可以尝试使用`recv()`MSG_WAITALL**而**不是 pure `read()`：

> 此标志请求操作阻塞，直到满足完整请求。但是，如果捕获到信号、发生错误或断开连接，或者要接收的下一个数据与返回的类型不同，则调用返回的数据仍可能少于请求的数据。

```
len = recv(fd, buf, sizeof(buf), MSG_WAITALL); 
```

另一种方法是在循环中读取或接收，例如：

```
ssize_t Recv(int fd, void* buf, ssize_t n)
{
    ssize_t read = 0;
    ssize_t r;
    while(read != n)
    {
        r = recv(fd, ((char*)buf)+read, n-read, 0);
        if(r == -1)
            return (read) ? read : -1;
        if(r == 0)
            return 0;

        read += r;
    }

    return read;
} 
```

# firefox - Firefox 固定选项卡/应用程序选项卡

> ID：13819693
> 
> 赞同：2
> 
> 时间：2012-12-11T11:45:21.907
> 
> 标签：firefox, tabs, firefox-addon

我想移动固定的标签，使它们位于标签栏的右侧。

固定标签是否有单独的栏？

如果是这样，我怎样才能移动“固定标签栏”，使其相对于普通标签栏保持在右侧？

有没有人有任何想法或代码片段，以便我可以操纵固定的标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:34:52.660

这一切都是使用相对定位完成的。如果你想让所有东西都排列在右边，你必须重写这个函数，`_positionPinnedTabs`在源代码中查看它：http: [//mxr.mozilla.org/mozilla-central/source/browser/base/content/ tabbrowser.xml#3179](http://mxr.mozilla.org/mozilla-central/source/browser/base/content/tabbrowser.xml#3179)

使用`_positionPinnedTabs`使用`MozMarginEnd`（在选项卡框情况下）之类的功能，`MozMarginStart`您可以为选项卡创建右侧空间。然后你只需要在那个空间中正确定位标签。对不起，这并不容易:)

# java - (apache httpclient) 3 代码有什么不同？

> ID：13819696
> 
> 赞同：1
> 
> 时间：2012-12-11T11:45:34.933
> 
> 标签：java, apache-commons-httpclient

```
HttpClient client = new HttpClient();

//1
client.setConnectionTimeout(1000);

//2
client.getParams().setParameter(HttpConnectionParams.CONNECTION_TIMEOUT, 1000);

//3
client.getHttpConnectionManager().getParams().setConnectionTimeout(1000); 
```

我想知道这件事之间的主要区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:10:29.540

他们都是一样的

有一个`HttpClientParams`对象在构造函数中创建或提供给构造函数`HttpClient`并传递给`HttpConnectionManager`

从那里开始，这 3 种方式只是在参数对象中设置相同参数的流程略有不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:17:22.027

对于此类问题，请查看 setConnectionTimeout 方法和其他方法的 JavaDoc。根据您使用的版本，其中一些可能已被弃用/不好的做法。由于这是开源的，您还可以阅读代码并亲自查看幕后发生的事情，这是唯一确定的方法。

# android - 从自定义适配器获取特定列

> ID：13819697
> 
> 赞同：0
> 
> 时间：2012-12-11T11:45:35.930
> 
> 标签：android, database, onitemclicklistener, custom-adapter

我在数据库中进行了查询，并将其返回到我放在自定义适配器上的列表中，然后放入列表视图中。在我使用 onItemClikListener 之前工作正常。我想从查询中获取列“_id”，但我不知道该怎么做（我想将此 id 作为参数传递给另一个活动）。我从自定义适配器尝试了 getItemId，但它返回列表中的位置，而不是“_id”列。例如：我的查询选择 * where name = x; 返回 id 为 1 和 3 的行...但 getItemId 使其位置为 1="_id1" 和 2="_id3"...当我没有传递其他活动时，查询返回具有 "_id" 1 和2；

```
//Here i get the item position and pass to another activity
listagem.setOnItemClickListener(new OnItemClickListener() {
public void onItemClick(AdapterView<?> arg0, View arg1,int position, long id) {    
    String Column_id = String.valueOf(adapter.getItemId(position));
    Intent mostraLetra = new Intent(musica.this.getActivity(), ExibeMusica.class);
    mostraLetra.putExtra("id", Column_id);
    startActivity(mostraLetra);
    }
});

//Here i pass the Id when i click on a item on the list
public String[] exibeMusica(String idMusica){
    String r = idMusica;
    String[] resultado = {};
    Cursor resul = bancodados.query(Tabela_musica, new String[] {"_id", "Musica","Cantor","letra_musica","cat_oracao","cat_missa"}, "_Id = " +r+"", null, null, null, null, null);
    resul.moveToFirst();
    resultado[0] = String.valueOf(resul.getString(resul.getColumnIndex("_id")));
    resultado[1] = resul.getString(resul.getColumnIndex("Musica"));
    resultado[2] = resul.getString(resul.getColumnIndex("Cantor"));
    resultado[3] = resul.getString(resul.getColumnIndex("letra_musica"));
    resultado[4] = resul.getString(resul.getColumnIndex("cat_oracao"));
    resultado[5] = resul.getString(resul.getColumnIndex("cat_missa"));
    resul.close();
    return resultado;
}

//This is my custom adapter
public class CustomAdapter extends BaseAdapter{

LayoutInflater inflater;
List<musica.ItemLista> itens;

public CustomAdapter(Activity a, List<musica.ItemLista> itens) {
    super();    
    this.itens = itens;
    this.inflater = (LayoutInflater)a.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public int getCount() {
    // TODO Auto-generated method stub
    return itens.size();
}

public Object getItem(int position) {

    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {

    musica.ItemLista item = itens.get(position);
    View vi = convertView;

    if(convertView==null){
        vi = inflater.inflate(R.layout.linha_listview, null);
        TextView id = (TextView)vi.findViewById(R.linhaLista.id);
        TextView musica = (TextView)vi.findViewById(R.linhaLista.musica);
        TextView artista = (TextView)vi.findViewById(R.linhaLista.cantor);
        ImageView oracao = (ImageView)vi.findViewById(R.linhaLista.cat_oracao);
        ImageView missa = (ImageView)vi.findViewById(R.linhaLista.cat_missa);
        id.setText(String.valueOf(item.id));
        musica.setText(item.musica);
        artista.setText(item.cantor);
        String imgOra = item.oracao;
        String imgMissa = item.missa;

        if (imgOra.equals(null)) {
            oracao.setImageResource(R.drawable.blank);
        }else if(imgOra.equals("louvor")) {
            oracao.setImageResource(R.drawable.louvor);
        }else if(imgOra.equals("adoracao")) {
            oracao.setImageResource(R.drawable.adoracao);
        }

        if (imgMissa.equals(null)) {
            missa.setImageResource(R.drawable.blank);
        }else if(imgOra.equals("louvor")) {
            missa.setImageResource(R.drawable.louvor);
        }else if(imgOra.equals("adoracao")) {
            missa.setImageResource(R.drawable.adoracao);
        }
    }return vi;
    }
} 
```

任何人都可以帮助我获得正确的“_id”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:56:09.210

`getView`像这样将标签设置为适配器的行视图

```
 .........
    }
    vi.setTag(String.valueOf(item.id))
    return vi;
    ......... 
```

进而

```
public void onItemClick(AdapterView<?> arg0, View arg1,int position, long id) {    
String Column_id = (String) arg1.getTag();
...... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:58:15.393

在 CustomAdapter 中设置 linha_listview.xml 时，您尝试在 linha_listview.xml 中再添加一个 textview，如下所示：

```
<TextView
        android:id="@+id/pid"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:visibility="gone" /> 
```

当您将此可见性设置为消失时，它在列表视图上不再可见。稍后您在 getView() 方法中通过 pidtextview.setText(column_id) 设置此文本视图。因此，在单击列表项时，通过以下方式获取此 column_id

```
String pid = ((TextView) view.findViewById(R.id.pid)).getText().toString(); 
```

在您的列表项侦听器中。通过上面的代码，您将获得 pid，通过 intent.putExtra() 将其传递给其他活动；在该活动中，从 getIntent() 检索数据并检索包含该 column_id 的特定行的数据，并显示该活动的特定行详细信息。希望这可以帮助。如果您仍然有任何疑问，请返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:03:32.490

在 onItemClickListner 中编写此代码

resul.moveToPosition（位置）

字符串 Column_id = resul.getString(resul.getColumnIndex("_id");

# r - 如何将这些零值子集化？

> ID：13819698
> 
> 赞同：0
> 
> 时间：2012-12-11T11:45:39.720
> 
> 标签：r

我是 R 新手，我得到了一些向量，例如`vec <- c(1,5,0,6,9,10,20,0,6)`，我想对`log()`它们应用一个函数，但不希望`-Inf`结果中剩余的值。如何通过子集原始向量中的值“0”来避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:55:22.880

在这种情况下，使用函数应用*后*可能更容易删除它们：`log()``is.finite()`

```
> vec <- c(1,5,0,6,9,10,20,0,6)
> lvec <- log(vec)
> is.finite(lvec)
[1]  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE
> lvec[is.finite(lvec)]
[1] 0.000000 1.609438 1.791759 2.197225 2.302585 2.995732
[7] 1.791759 
```

请注意，有相反的功能`is.infinite()`来识别`Inf`和`-Inf`

```
> is.infinite(lvec)
[1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE 
```

要执行您想要的操作，您始终可以识别哪些等于（不等于）零并删除（选择）这些元素，如

```
> log(vec[vec != 0]) # select *not* zero elements
[1] 0.000000 1.609438 1.791759 2.197225 2.302585 2.995732
[7] 1.791759
> log(vec[!vec == 0]) # don't select the zero elements
[1] 0.000000 1.609438 1.791759 2.197225 2.302585 2.995732
[7] 1.791759 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:57:17.597

```
v <- c( 1,5,0,6,9,10,20,0,6)

log(v[v!=0])  # log to all values but 0's
log(v[v>=1])  # log of all non-negative and non-zeroes values log(v[!v<=0])
log(pmax(v, 1)) # all 0's are set to be 1, then applying log 
```

# backbone.js - 在主干“为什么要创建模型”中，它有什么用？- 下面是我的代码

> ID：13819700
> 
> 赞同：0
> 
> 时间：2012-12-11T11:45:43.560
> 
> 标签：backbone.js, backbone-model

我从主干站点获取了一个小代码，并控制了该函数，在此示例中，sidebar.on('change:color') 获取了该函数。但是它需要两个参数，一个是我们需要的“颜色”，我们在函数内部定义元素，为什么我们在这里给另一个参数作为“模型”，那个参数有什么作用？

如果我删除该参数只发送颜色，该功能根本不起作用......任何人帮助我理解这一点？

这里的示例函数：

```
var Sidebar = Backbone.Model.extend({
    promptColor : function(){
    var cssColor = prompt('Please enter a css color');
        this.set({color:cssColor});       
    }
});

window.sidebar = new Sidebar;

sidebar.on('change:color',function(model,color){ // what model parameter do here?
    console.log(model);
    $('#sidebar').css({
        background:color
    })
})

sidebar.set({color:'green'});
sidebar.promptColor(); 
```

当我控制台模型时，我得到了这个：

```
d
_callbacks: Object
_changing: false
_escapedAttributes: Object
_pending: Object
_previousAttributes: Object
_silent: Object
attributes: Object
changed: Object
cid: "c1"
__proto__: x 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:53:05.010

Backbone 是一个 Javascript MVC 框架。（与标准 MVC 不同，Backbone 没有控制器，而是有集合）。

您收到的模型是 MVC 范式的标准模型。模型是保存用户正在使用的数据的底层数据结构。

当你这样做

```
sidebar.on('change:color', function(model, color) { 
   // some code here
}); 
```

您正在将事件处理程序附加到侧边栏模型。具体来说，您是说当`color`此模型上的属性发生更改时，调用该函数。由于此事件可以并且将在稍后的时间点触发，因此 Backbone 向事件处理函数传递了两个参数：第一个是触发事件的模型，第二个是更改的属性。

参数按特定顺序传递，即模型是第一个参数，更改的属性是第二个。因此，如果您`model`从事件处理函数中省略参数，则传入的模型将分配给`color`，并且颜色不会分配给任何参数。

**推荐阅读：**

[更多关于 MVC 和模型](http://www.codinghorror.com/blog/2008/05/understanding-model-view-controller.html)
[更多关于主干模型](http://backbonejs.org/#Model)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:53:45.187

您可能想知道哪个模型受到了影响。

考虑一个您正在收听集合上的事件的情况。修改了哪个型号的颜色值？模型参数告诉你这一点。

另外，考虑一个情况，即同一个处理程序正在多个模型上侦听“change:color”。同样，您可能想知道哪个模型发送了事件。

就像在其他事件驱动的环境中一样，“发送者”总是与事件数据一起传递。 `model`，在这种情况下，是发件人。

# excel - 使用 vbscript 创建稀疏矩阵

> ID：13819708
> 
> 赞同：0
> 
> 时间：2012-12-11T11:46:16.443
> 
> 标签：excel, vbscript

假设我有一个 Array={A,B,Y,X}。现在我确实有一个 Excel 工作表，它可以有动态的列数和行数。比如下面的例子：

***输入：***

```
ColA   ColB   ColC  ....

 T      P      Y    ....
 C      Y      D    ....
 B      A      M    ....
 Z      R      X    .... 
```

***输出：***

```
ColA   ColB   ColC  ....

 -      -      Y    ....
 -      Y      -    ....
 B      A      -    ....
 -      -      X    .... 
```

所有列都只有数组值，如果发现任何其他值，则需要将它们替换为***“-”***

除了相对较慢的循环技术之外，是否有任何更快的过程可以使用 VBscript 来完成这些工作？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:21:06.487

```
Sub Macro1()

    Dim arr, i, rng As Range

    arr = Array("X", "Y", "Z")
    Set rng = ActiveSheet.Range("A1").CurrentRegion

    With Application
        .ScreenUpdating = False
        .Calculation = xlCalculationManual
    End With

    For i = LBound(arr) To UBound(arr)
        rng.Replace What:=arr(i), Replacement:="-", LookAt:=xlWhole, _
            SearchOrder:=xlByRows, MatchCase:=True, SearchFormat:=False, _
            ReplaceFormat:=False
    Next i

    With Application
        .ScreenUpdating = True
        .Calculation = xlCalculationAutomatic
    End With

End Sub 
```

**编辑：**

```
Sub KeepValues()

    Dim arr, arrVals, i, rng As Range, r, c
    Dim keepval As Boolean

    arr = Array("X", "Y", "Z")

    Set rng = ActiveSheet.Range("A1").CurrentRegion
    arrVals = rng.Value

    For r = 1 To UBound(arrVals, 1)
        For c = 1 To UBound(arrVals, 2)
            keepval = False
            For i = LBound(arr) To UBound(arr)
                If arr(i) = arrVals(r, c) Then
                    keepval = True
                    Exit For
                End If
            Next i
            If Not keepval Then arrVals(r, c) = ""
        Next c
    Next r

    rng.Value = arrVals

End Sub 
```

# sql - 如何根据 teradata SQL 中的条件计算带有重置的移动总和？

> ID：13819710
> 
> 赞同：9
> 
> 时间：2012-12-11T11:46:20.067
> 
> 标签：sql, sum, teradata

我有这些数据，我想对字段求和，`USAGE_FLAG`但在它下降到 0 或移动到新 ID 时重置，保持数据集按`SU_ID`and排序`WEEK`：

```
SU_ID   WEEK    USAGE_FLAG
100        1    0
100        2    7
100        3    7
100        4    0
101        1    0
101        2    7
101        3    0
101        4    7
102        1    7
102        2    7
102        3    7
102        4    0 
```

所以我想创建这个表：

```
SU_ID   WEEK    USAGE_FLAG    SUM
100        1    0             0
100        2    7             7
100        3    7             14
100        4    0             0
101        1    0             0
101        2    7             7
101        3    0             0
101        4    7             7
102        1    7             7
102        2    7             14
102        3    7             21
102        4    0             0 
```

我已经尝试过`MSUM()`使用该功能，`GROUP BY`但它不会保持我想要的顺序。它将我不想要的 7 和周数组合在一起。

有谁知道这是否可行？我正在使用 teradata

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T11:51:57.793

在标准 SQL 中，可以使用窗口函数完成运行总和：

```
select su_id,
       week,
       usage_flag, 
       sum(usage_flag) over (partition by su_id order by week) as running_sum
from the_table; 
```

我知道 Teradata 支持窗口功能，我只是不知道它是否还支持窗口定义中的 order by。

重置总和有点复杂。您首先需要创建每次使用标志变为 0 时都会更改的“组 ID”。以下适用于 PostgreSQL，我不知道这是否也适用于 Teradata：

```
select su_id,
       week,
       usage_flag,
       sum(usage_flag) over (partition by su_id, group_nr order by week) as running_sum
from (
  select t1.*,
         sum(group_flag) over (partition by su_id order by week) as group_nr
  from (
      select *,
             case
                when usage_flag = 0 then 1
                else 0
              end as group_flag
      from the_table
  ) t1
) t2
order by su_id, week; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-19T11:28:12.743

试试下面的代码，使用 RESET 功能它工作正常。

```
select su_id,
       week,
       usage_flag, 
       SUM(usage_flag) OVER (
        PARTITION BY su_id
        ORDER BY week
        RESET WHEN usage_flag < /* preceding row */ SUM(usage_flag) OVER (
             PARTITION BY su_id ORDER BY week
             ROWS BETWEEN 1 PRECEDING AND 1 PRECEDING)
        ROWS UNBOUNDED PRECEDING
   )
from emp_su; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-06T08:19:30.817

请尝试以下 SQL：

```
select su_id,
       week,
       usage_flag, 
       SUM(usage_flag) OVER (PARTITION BY su_id ORDER BY week
        RESET WHEN usage_flag = 0 
        ROWS UNBOUNDED PRECEDING
   )
from emp_su; 
```

这里**RESET WHEN usage_flag = 0**将在 sum usage_flag 降至 0 时重置 sum

# c++ - 以 r/w 对文件进行多次访问

> ID：13819712
> 
> 赞同：1
> 
> 时间：2012-12-11T11:46:30.130
> 
> 标签：c++, paging, fstream

我打算编写一个程序，它必须以读写方式多次访问某个文件。所以我决定使用 fstream，因为我可以将这个类用于阅读和写作目的。

我的想法是在应用程序启动时打开文件，然后在应用程序关闭时关闭它。

由于文件可以任意大，我打算使用“分页”结构，其中：

1）为每页预分配固定数量的内存和固定数量的页

2）将部分文件加载到第一个空闲页面

3）如果没有空闲页面，我选择一个具有一定标准的非空页面，我提交所有编辑（如果有的话），然后加载页面中的文件部分。

这并不难编码。但我想知道如果我要重新发明轮子......也许 fstream 本身是以一种聪明的方式编写的，因此它也实现了类似的分页机制。那样的话，我就不管了，随便写写读就行了。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:20:07.890

标准 C++ 库的内部工作因实现而异。因此，需要进行测试才能在您的首选平台上获取一些真实数据。通常，[内存映射文件](http://en.wikipedia.org/wiki/Memory-mapped_file)被认为是访问存储在文件中的数据的最快方式（正如 Uflex 在他的评论中提到的那样，但它也有一些缺点（参见链接的 wiki 页面）。您可以使用标准（POSIX ) C 函数`mmap()`和`munmap()`, 或[Boost C++ 库](http://www.boost.org/)，它们也具有用于内存映射文件的可移植 C++ 接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:44:18.273

不要自己做这件事。除非您使用非常奇特的实现，否则 fstream 类已经有效地实现了这种机制。

结帐[http://www.cplusplus.com/doc/tutorial/files/](http://www.cplusplus.com/doc/tutorial/files/) “缓冲区和同步”

如果您`seek`使用旧内核或标准库的实现进入大于 2GB 的文件，则可能会出现问题。[在 C++ 中](https://stackoverflow.com/questions/965725/large-file-support-in-c)检查此 大文件支持 或使用[Boost.Filesystem](http://www.boost.org/doc/libs/1_39_0/libs/filesystem/doc/index.htm)

# c++ - 布尔函数未给出正确答案

> ID：13819714
> 
> 赞同：0
> 
> 时间：2012-12-11T11:46:33.823
> 
> 标签：c++, vector, boolean

我的布尔函数 check_gift 有问题。当礼物在商店里时，它给出的价值是假的......

我究竟做错了什么？

```
#include <iostream>
#include <fstream>
#include <vector>
#include <string>
#include <cstdlib>
#include <string>
#include <cassert>
using namespace std;

typedef vector<string> Wishes;

int size(Wishes& w){ return static_cast<int>(w.size()); }

struct Wishlist
{
     double budget;
     Wishes wishes;
};

struct Gift
{
    double price;
    string name;
};

typedef vector<Gift> Giftstore;

int size(Giftstore& g) { return static_cast<int>(g.size()); }

void read_wishlist_into_struct(ifstream& infile, Wishlist& wishlist)
{
    double b;
    infile>>b;
    wishlist.budget=b;

    int i=0;
    string name;
    getline(infile,name);

    while(infile)
    {
        wishlist.wishes.push_back(name);
        i++;
        getline(infile,name);
    }
    infile.close();
}

void show_wishlist(Wishlist wishlist)
{
    cout<<"Budget: "<<wishlist.budget<<endl<<endl;
    cout<<"Wishes: "<<endl;
    for(int i=0; i<size(wishlist.wishes); i++)
    {
        cout<<wishlist.wishes[i]<<endl;
    }
    cout<<endl;
}

void read_giftstore_into_vector(ifstream& infile, Gift& gift, Giftstore& giftstore)
{
    double p;
    string name;
    int i=0;
    infile>>p;

    while(infile)
    {
        gift.price=p;
        getline(infile,name);
        gift.name=name;

        giftstore.push_back(gift);
        i++;
        infile>>p;
    }
    infile.close();
}

void show_giftstore(Giftstore giftstore)
{
    cout<<"All possible gifts in giftstore: "<<endl<<endl;

    for(int i=0; i<size(giftstore); i++)
    {
        cout<<giftstore[i].price<<"\t"<<giftstore[i].name<<endl;
    }
    cout<<endl;
}

bool check_gift(Giftstore giftstore, string giftname)
{
    int i=0;

    while(i<size(giftstore))
    {
        if(giftstore[i].name==giftname)
        {
            return true;
        }
        else
        {
            i++;
        }
    }
   return false;
}

void clear(Wishlist& b)
{
    b.budget=0;

    while(!b.wishes.empty())
    {
        b.wishes.pop_back();
    }
}

void copy(Wishlist a, Wishlist& b)
{
    b.budget=a.budget;

    for (int i=0; i<size(b.wishes); i++)
    {
        b.wishes.push_back(a.wishes[i]);
    }
}

int main ()
{

    ifstream infile2("giftstore.txt"); 

    Gift gift;
    Giftstore giftstore;

    read_giftstore_into_vector(infile2, gift, giftstore);
    show_giftstore(giftstore);

    string giftname;
    giftname=("dvd Up van Pixar");
    bool x;

    x=check_gift(giftstore, giftname);
    cout<<"in store?: "<<x<<endl;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:49:05.833

`return false;`函数末尾没有；所以如果没有找到礼物，程序将结束并给出未定义的行为。

如果您启用警告，编译器应该警告您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:48:01.260

您忘记在函数`false`结束时返回`check_gift`

```
bool check_gift(Giftstore giftstore, string giftname)
{
    int i=0;

    while(i<size(giftstore))
    {
        if(giftstore[i].name==giftname)
        {
            return true;
        }
        else
        {
            i++;
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:48:04.827

您需要`return false`在末尾添加`check_gift()`.

# actionscript-3 - 如何像在 as3 中阅读印刷书籍一样翻转影片剪辑

> ID：13819717
> 
> 赞同：-2
> 
> 时间：2012-12-11T11:46:42.907
> 
> 标签：actionscript-3, flash

我们如何像阅读印刷书籍一样将一些电影片段一个一个地翻转？

我需要在我们填充动态数据的 as3 中创建一个电子书。

这是我在搜索时得到的链接，[http://swf-flash.blogspot.in/2010/07/let-talk-about-how-to-create-pageflip.html#more](http://swf-flash.blogspot.in/2010/07/let-talk-about-how-to-create-pageflip.html#more)但是，它使用静态电影剪辑，而我需要一个动态内容的电影剪辑。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-11T12:22:11.057

那里有很多翻页解决方案。我不认为动态内容应该有很大的不同。在此处查看列表[http://flashspeaksactionscript.com/flip-a-page-with-these-flash-page-flippers/](http://flashspeaksactionscript.com/flip-a-page-with-these-flash-page-flippers/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-11T13:10:17.297

您可以从该网站了解更多信息[http://www.flashandmath.com/flashcs4/flip/index.html](http://www.flashandmath.com/flashcs4/flip/index.html)

祝你好运

# ruby-on-rails - 如何让 Compass 自动导入 app/assets/stylesheets 中的所有样式表？

> ID：13819720
> 
> 赞同：1
> 
> 时间：2012-12-11T11:46:50.160
> 
> 标签：ruby-on-rails, ruby-on-rails-3, compass-sass

我正在尝试使用[compass-rails将](https://github.com/compass/compass-rails)[Compass](http://compass-style.org/)添加到我的 Rails 3.2 应用程序中。如何让它自动导入所有样式表？目前我必须手动为每个人做。`app/assets/stylesheets``@import 'filename';``application.css.scss`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:18:31.400

将所有 scss 文件（**除了** *application.css.scss*）放在不同的文件夹中：

> /application.css.scss
> 
> /all/hello.css.scss
> 
> /all/hi.css.scss

如下所示的 application.css.scss 文件将起作用。

```
@import "compass";
@import "all/*"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T01:00:30.097

### 对于捆绑样式表，使用资产管道

如果您正在使用资产管道，这应该会自动发生：

```
/*
 * In application.css
 *= require_tree .
 */ 
```

文档： http: [//guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives](http://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives)

重要的警告是*“使用 Sprockets 指令，所有 Sass 文件都存在于它们自己的范围内，使变量或 mixin 仅在定义它们的文档中可用。”*

### 对于 mixins & vars，将你的导入放在一个地方，然后导入一次

如果您对功能很感兴趣，请尝试使用`app/assets/stylesheets/base.css.scss`包含`@import`所有 mixin 和 var 文件的指令（无论是否通配符）的文件。然后你只需要`@import "base"`为每个样式表做一次，并且仍然可以使用 sprockets 指令捆绑你的 css。

# android - TextureView onSurfaceTextureAvailable 从未调用过

> ID：13819721
> 
> 赞同：4
> 
> 时间：2012-12-11T11:46:59.460
> 
> 标签：android, video

当我的 Android 应用程序启动时，我尝试为启动 Activity 播放视频，但我遇到的问题是永远不会调用 onSurfaceTextureAvailable 接口方法。

这是代码：

```
public class HomeActivity extends Activity implements TextureView.SurfaceTextureListener,
        MediaPlayer.OnBufferingUpdateListener, OnCompletionListener,
        MediaPlayer.OnPreparedListener, MediaPlayer.OnVideoSizeChangedListener {

    private MediaPlayer videoMediaPlayer;
    private TextureView videoPreview;
    private Bundle extras;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        videoPreview = new TextureView(this);
        videoPreview.setSurfaceTextureListener(this);
        extras = getIntent().getExtras();
        setContentView(videoPreview);
    }

    @Override
    public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height) {
        Surface s = new Surface(surface);
        Log.d("HOME", "onSurfaceTextureAvailable");
        try {
            videoMediaPlayer= new MediaPlayer();
            Uri video = Uri.parse("android.resource://" + getPackageName() + "/"
                    + R.raw.intro_video);
            videoMediaPlayer.setDataSource(getApplicationContext(), video);
            videoMediaPlayer.setSurface(s);
            videoMediaPlayer.prepare();
            videoMediaPlayer.setOnBufferingUpdateListener(this);
            videoMediaPlayer.setOnCompletionListener(this);
            videoMediaPlayer.setOnPreparedListener(this);
            videoMediaPlayer.setOnVideoSizeChangedListener(this);
            videoMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
            videoMediaPlayer.start();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

// Other stuff 
```

该代码来自stackoverflow类似的[问题](https://stackoverflow.com/questions/10736517/playing-video-on-textureview)，似乎他让它像这样工作。

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-21T08:49:59.783

要调用 onSurfaceTextureAvailable()，必须启用硬件加速。您可以在 AndroidManifast.xml 文件中执行此操作

```
<activity
    android:name="com.example.HomeActivity"
    android:hardwareAccelerated="true" >
</activity> 
```

# android - 从三星 Galaxy S III 发送邮件时，简单的 HTML 锚链接不显示为链接

> ID：13819722
> 
> 赞同：2
> 
> 时间：2012-12-11T11:47:01.623
> 
> 标签：android

我开发了一个 android 应用程序，我在其中发送一封邮件，其正文包含从 Google Play 商店下载我的应用程序的链接。

这适用于除三星 Galaxy S III 之外的所有其他安卓设备。我面临的问题是当我**从三星 Galaxy S III 发送邮件**时，电子邮件中的**链接**似乎是**普通文本**。

似乎这是一个特定于设备的问题。我一直在寻找解决方案，但我找不到它。

为什么这种情况只发生在三星 Galaxy S III 的情况下？

# c# - WPF 中的 ScaleY 动画

> ID：13819723
> 
> 赞同：0
> 
> 时间：2012-12-11T11:47:05.963
> 
> 标签：c#, .net, wpf, animation, storyboard

为什么下面的代码不会更改`ScaleY`为`1`？

```
 var transform = new ScaleTransform { ScaleY = 0 };
  var story = new Storyboard();
  var animation = new DoubleAnimation { 
                    Duration = new Duration(new TimeSpan(0)), To = 1 };
  Storyboard.SetTarget(animation, transform);
  Storyboard.SetTargetProperty(animation, new PropertyPath("ScaleY"));
  story.Children.Add(animation);
  story.Begin(); 
```

我`transform`间接使用：它用于渲染一些`UIElements`并保存在它们的`DependencyProperty`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:16:00.077

如果您放下情节提要并直接调用[BeginAnimation](http://msdn.microsoft.com/en-us/library/ms590761.aspx)可能会起作用吗？

```
var transform = new ScaleTransform { ScaleY = 0 };
var animation = new DoubleAnimation { Duration = TimeSpan.Zero, To = 1 };

transform.BeginAnimation(ScaleTransform.ScalyYProperty, animation); 
```

[请注意，只有当动画的FillBehavior](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.fillbehavior.aspx)值为 时，这才会有任何效果`HoldEnd`。否则，动画属性将立即恢复为其本地值（此处为 0）。幸运`HoldEnd`的是 的默认值`FillBehavior`。

当然`transform`应该在某处*使用。*

# c# - udpclient轮询UDP组播地址

> ID：13819724
> 
> 赞同：1
> 
> 时间：2012-12-11T11:47:09.457
> 
> 标签：c#, sockets, udp, multicast, udpclient

我想检查 UDP 多播地址上的数据是否可用，我发现的唯一机制是`Poll`方法。

设置：

```
client = new UdpClient(localEp);
client.JoinMulticastGroup(multicastAddr, localIpAddress);
client.Connect(multicastAddr, receiveport); 
```

轮询：

```
if (!client.Client.Poll(100, SelectMode.SelectRead)) 
```

客户端已连接（我检查过）但从不返回 true。
在wireshark 中，我可以看到正确发送了udp 数据报。

修复建议？

编辑：

IPEndpoint localEp = 本地 ipv4 单播地址，多播 udps 的端口 receiveport = 接收多播的端口 multicastaddr = IPAddress

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:16:26.053

连接 UDP 套接字意味着在接收时将数据报的源地址和端口限制为指定的对，在发送时设置默认的目的地址和端口。

删除对 的调用[`Connect()`](http://msdn.microsoft.com/en-us/library/dx13cwba.aspx)。

### 编辑0：

您需要绑定到多播地址，而不是本地 IP。从构造函数中删除`localEp`，或者用多播组/端口对替换它。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.joinmulticastgroup%28v=vs.71%29.aspx)上的[示例](http://msdn.microsoft.com/en-us/library/ekd1t784.aspx)。

你错了，你只能[`Receive()`](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.receive.aspx)一个数据报。

# ruby-on-rails - 如何将 Rails 应用程序从 3.2 降级到 2.3.4

> ID：13819725
> 
> 赞同：0
> 
> 时间：2012-12-11T11:47:08.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-2

我创建了一个 rails 3.2 站点/应用程序，但我想使用的托管公司只支持 rails 2.3

有没有简单的降级选项。作为一个长排序，我尝试在我的开发副本上更改我的 Gemfile，但它抱怨各种依赖项。

有什么简单的降级方法还是我被迫创建一个新的 2.3 应用程序并重新创建文件？

# asp.net - 带有 DataTable 的特定行

> ID：13819730
> 
> 赞同：0
> 
> 时间：2012-12-11T11:47:21.620
> 
> 标签：asp.net, linq, datatable

我有一个包含“总计”列的数据表。我希望能够获得特定行“总计”而不是所有行。

```
public void maxValue()
    {
        string pass = (String)Session["name"];
        DataTable table = (DataTable)Session["CocaCola"];
        int total = table.AsEnumerable().Sum(r => r.Field<int>("Total"));
        int totalAllowed = table.AsEnumerable().Sum(r => r.Field<Int32>("Total Allowed"));

        if (total >= totalAllowed)
        {
            Label1.Text = "Total value exceeded the maximum of " + totalAllowed;
        }
        else if (total < totalAllowed)
        {
            Label1.Text = "Total value which is allowed :" + totalAllowed;
        }
        if (pass.Equals("Low"))
        {
            Label1.Text = "You are not allowed any assets at this Stage";
            //SNS.Checked = false;
            //TT.Checked = false;
            //Music.Checked = false;
            //SNS.Enabled = false;
            //TT.Enabled = false;
            //Music.Enabled = false;
        }
    } 
```

如您所见，我的方法有效，但添加了我不想做的列。我将如何改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:11:36.980

您不必*使用*linq。DataTable 具有用于此类操作的内置方法：

```
var selectedTotal = table.Compute("sum(Total)", "columnX == 'x'"); 
```

这告诉表格计算具有指定值`Total`的行中所有单元格的总和。`columnX`

当然你可以使用 linq。`Where()`在计算总和之前，您需要添加 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:56:21.527

你可以这样做

```
int yourTargetindex = 0; //Change this to get the value of your target element
int total =(from row in table.AsEnumerable()
            select row.Field<int>("Total")).ElementAt(yourTargetindex);
  //This will return the first value of "total" in the DataTable 
```

# javascript - 带有原型和基类的 JS OO 模式

> ID：13819733
> 
> 赞同：-1
> 
> 时间：2012-12-11T11:47:27.307
> 
> 标签：javascript

这是 OO JS 的好模式吗？我正在寻找的是一种解决 JavaScript 继承问题的简单方法。

```
function MySuperClass(arg)
{
    this.arg1 = arg;
}
function MyBaseClass(arg)
{
    this.base = MySuperClass;
    this.base(arg);
    this.arg2 = arg;
}
MyBaseClass.prototype = new MySuperClass();
function MySpecificClass(arg)
{ 
    this.base = MyBaseClass;
    this.base(arg);
    this.arg3 = arg;
}
//ensures inheritance of all properties
MySpecificClass.prototype = new MyBaseClass();

var myFirstInstance = new MySpecificClass("test");
var mySecondInstance = new MySpecificClass("test2"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:53:28.523

**注意：**请参阅 ES2015 更新的结尾。

### ES5 及更早版本

那里有几个问题。

1.  您的`MySuperClass`函数需要一个参数，但是当您调用它来创建`MyBaseClass.prototype`.

2.  `base`您在实例上设置的属性对于 中的代码将无法正常工作`MyBaseClass`，因为`MyBaseClass`期望它是`MySuperClass`，但事实并非如此，因为`MySpecificClass`已覆盖它。

这是复杂的东西。确保执行三代（ 、 和 ）是非常聪明的`MySuperClass`，`MyBaseClass`因为`MySpecificClass`对于两级层次结构非常容易做到这一点，但对于三级以上的层次结构，它要复杂得多。:-)

如果您想深入讨论在 JavaScript 中处理继承、调用超类方法等，我已经[写了一篇关于它的文章](http://blog.niftysnippets.org/2009/09/simple-efficient-supercalls-in.html)，并为此[编写了一个工具包。](http://code.google.com/p/lineagejs/)阅读文章并查看工具包源（超出文章范围）可能有助于理解原型链如何工作以及如何*使用*它。

这是一个*不*使用任何工具包并且不尝试简化超级调用的示例。为了清楚起见，我使用了`Parent`、`Child`和`GrandChild`三个世代的术语：

```
// A parent (base) "class"
function Parent(a) {
  this.a = a;
}
Parent.prototype.one = function() {
  console.log("I'm Parent#one: a = " + this.a);
};
Parent.prototype.two = function() {
  console.log("I'm Parent#two: a = " + this.a);
};

// A child "subclass"
function Child(a, b) {
  // Chain to "superclass" constructor
  Parent.call(this, a);

  // Do our own init
  this.b = b;
}

// Create the prototype objct that `new Child` will assign to instances
// by creating a blank object backed by `Parent.prototype`. Also set
// the `constructor` property on the object; JavaScript defines that it
// will refer back to the function on the default prototype objects, so
// we do that for consistency despite nothing in JavaScript actually
// _using_ `constructor`.
Child.prototype = Object.create(Parent.prototype);
Child.prototype.constructor = Child;

// Add things to `Child.prototype`
Child.prototype.one = function() {
  Parent.prototype.one.call(this);
  console.log("I'm Child#one: b = " + this.b);
};
Child.prototype.three = function() {
  console.log("I'm Child#three: b = " + this.b);
};

// A grandchild "subclass"
function GrandChild(b, c) {
  // Chain to "superclass" constructor
  // Note that GrandChild has a fixed value for Parent's `a`
  Child.call(this, "GrandChildFixedA", b);

  // Do our own init
  this.c = c;
}

// Again create a blank object to be the prototype `new GrandChild`
// assigns, again set `constructor`
GrandChild.prototype = Object.create(Child.prototype);
GrandChild.prototype.constructor = GrandChild;

// Add things to it
GrandChild.prototype.one = function() {
    Child.prototype.one.call(this);
    console.log("I'm GrandChild#one: c = " + this.c);
};
GrandChild.prototype.three = function() {
    Child.prototype.three.call(this);
    console.log("I'm GrandChild#three: c = " + this.c);
}; 
```

用法：

```
var p = new Parent("ParentA");
console.log("Calling p.one");
p.one();    // "I'm Parent#one: a = ParentA"
console.log("Calling p.two");
p.two();    // "I'm Parent#two: a = ParentA"
var c = new Child("ChildA", "ChildB");
console.log("Calling c.one");
c.one();    // "I'm Parent#one: a = ChildA" then "I'm Child #one: b = ChildB"
console.log("Calling c.two");
c.two();    // "I'm Parent#two: a = ChildA"
console.log("Calling c.three");
c.three();  // "I'm Child#three: b = ChildB"
var gc = new GrandChild("GrandChildB", "GrandChildC");
console.log("Calling gc.one");
gc.one();   // "I'm Parent#one: a = GrandChildFixedA" then "I'm Child #one: b = GrandChildB" then "I'm GrandChild#one: c = GrandChildC"
console.log("Calling gc.two");
gc.two();   // "I'm Parent#two: a = GrandChildA"
console.log("Calling gc.three");
gc.three(); // "I'm Child#three: b = GrandChildB" then "I'm GrandChild#three: c = GrandChildC" 
```

测试 instanceof，尽管如果您经常使用 instanceof，您可能需要阅读鸭子类型：

```
// Some things that should be true
console.log("p instanceof Parent? " + (p instanceof Parent));
console.log("c instanceof Parent? " + (c instanceof Parent));
console.log("c instanceof Child? "  + (c instanceof Child));
console.log("gc instanceof Parent? " + (gc instanceof Parent));
console.log("gc instanceof Child? "  + (gc instanceof Child));
console.log("gc instanceof GrandChild? "  + (gc instanceof GrandChild));

// And some things that *shouldn't* be true:
console.log("p instanceof Child? (should be false) " + (p instanceof Child));
console.log("p instanceof GrandChild? (should be false) " + (p instanceof GrandChild));
console.log("c instanceof GrandChild? (should be false) " + (c instanceof GrandChild)); 
```

如果您不在启用 ES5 的环境中，则可以将此 shim 用于`Object.create`（注意：**不是**完整的 shim，仅足以启用上述内容）：

```
Object.create = function(p) {
  var o;

  function ctor() {
  }

  ctor.prototype = p;

  o = new ctor();

  ctor.prototype = null;
  return o;
}; 
```

您可以看到为什么工具包脚本让生活更轻松。你有几个可供选择。[`Lineage`](http://code.google.com/p/lineagejs/)这是上面使用我的工具包的样子：

```
// A parent (base) "class"
var Parent = Lineage.define(function(p) {
  p.initialize = function(a) {
    this.a = a;
  };
  p.one = function() {
    console.log("I'm Parent#one: a = " + this.a);
  };
  p.two = function() {
    console.log("I'm Parent#two: a = " + this.a);
  };
});

// A child "subclass"
var Child = Lineage.define(Parent, function(p, pp) {
  p.initialize = function(a, b) {
    // Chain to "superclass" constructor
    pp.initialize.call(this, a);

    // Do our own init
    this.b = b;
  };
  p.one = function() {
    pp.one.call(this);
    console.log("I'm Child#one: b = " + this.b);
  };
  p.three = function() {
    console.log("I'm Child#three: b = " + this.b);
  };
});

// A grandchild "subclass"
var GrandChild = Lineage.define(Child, function(p, pp) {
  p.initialize = function(b, c) {
    // Chain to "superclass" constructor
    // Note that GrandChild has a fixed value for Parent's `a`
    pp.initialize.call(this, "GrandChildFixedA", b);

    // Do our own init
    this.c = c;
  };
  p.one = function() {
      pp.one.call(this);
      console.log("I'm GrandChild#one: c = " + this.c);
  };
  p.three = function() {
      pp.three.call(this);
      console.log("I'm GrandChild#three: c = " + this.c);
  };
}); 
```

用法是一样的。

### ES2015 及更高版本

从 ES2015（又名“ES6”）开始，JavaScript 有了`class`and`super`关键字，这极大地简化了上述内容，并且可以在*今天*与转译一起使用。

```
class Parent {
    constructor(a) {
        this.a = a;
    }

    one() {
        console.log("I'm Parent#one: a = " + this.a);
    }

    two() {
        console.log("I'm Parent#two: a = " + this.a);
    }
}

class Child extends Parent {
    constructor(a) {
        super(a);
    }

    one() {
        super.one();
        console.log("I'm Child#one: a = " + this.a);
    }

    three() {
        console.log("I'm Child#three: a = " + this.a);
    }
}

class GrandChild extends Child {
    constructor(a) {
        super(a);
    }

    one() {
        super.one();
        console.log("I'm GrandChild#one: a = " + this.a);
    }

    three() {
        super.three();
        console.log("I'm GrandChild#three: a = " + this.a);
    }
}

// Usage
var p = new Parent("ParentA");
console.log("Calling p.one");
p.one();    // "I'm Parent#one: a = ParentA"
console.log("Calling p.two");
p.two();    // "I'm Parent#two: a = ParentA"
var c = new Child("ChildA", "ChildB");
console.log("Calling c.one");
c.one();    // "I'm Parent#one: a = ChildA" then "I'm Child #one: b = ChildB"
console.log("Calling c.two");
c.two();    // "I'm Parent#two: a = ChildA"
console.log("Calling c.three");
c.three();  // "I'm Child#three: b = ChildB"
var gc = new GrandChild("GrandChildB", "GrandChildC");
console.log("Calling gc.one");
gc.one();   // "I'm Parent#one: a = GrandChildFixedA" then "I'm Child #one: b = GrandChildB" then "I'm GrandChild#one: c = GrandChildC"
console.log("Calling gc.two");
gc.two();   // "I'm Parent#two: a = GrandChildA"
console.log("Calling gc.three");
gc.three(); // "I'm Child#three: b = GrandChildB" then "I'm GrandChild#three: c = GrandChildC" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:58:27.947

我正在使用这种方法：

```
var func1 = function(parameter1, parameter2) {
    // do your stuff here
}

var func2 = function(parameter1, parameter2, parameter3) {
    // call the constructor of func1 with actual 'this'
    func1.call(this, parameter1, parameter2);

    // do your specific task here
}

func2.prototype = func1.prototype;
func2.prototype.constructor = func2; 
```

工作正常 ：）

# java - 无法获得通用的 ResponseEntity 其中 T 是一个泛型类“SomeClass "

> ID：13819734
> 
> 赞同：29
> 
> 时间：2012-12-11T11:47:31.977
> 
> 标签：java, spring, rest, generics, spring-mvc

请帮我弄明白`ResponseEntity<T>`where`T`本身就是一个泛型类型。正如我现在所看到的，spring RestTemplate 现在不支持这一点。我正在使用 Spring MVC 3.1.2 版

这是我想使用的代码： 代码：

```
ResponseEntity<CisResponse<CisResponseEntity>> res =
         this.restTemplate.postForEntity(
             this.rootURL, myRequestObj, CisResponse.class); 
```

我收到此错误：

```
Type mismatch: cannot convert from ResponseEntity<CisResponse> to
ResponseEntity<CisResponse<CisResponseEntity>> 
```

这是明显的错误，但我今天如何解决它？

比我想要得到我的通用响应类型：

```
CisResponse<CisResponseEntity> myResponse= res.getBody();
CisResponseEntity entity = myResponse.getEntityFromResponse(); 
```

现在，我使用这个解决方案，有`postForObject()`和没有`postForEntity()`：

```
CisResponse<CisResponseEntity> response = 
          this.restTemplate.postForObject(
               this.rootURL,myRequestObj, CisResponse.class); 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-11T12:36:54.697

这是[一个已知问题](https://jira.springsource.org/browse/SPR-7023)。现在它通过引入 来修复`ParameterizedTypeReference`，它是一个参数化类型，您显式**继承**它以在运行时提供类型信息。这被称为*超类型标记*，它围绕类型擦除工作，因为子类（在这种情况下是匿名的）在运行时保留**泛型超类型的类型参数。**

但是你不能使用`postForObject`，因为 API 只支持[`exchange()`](http://static.springsource.org/spring/docs/3.2.0.BUILD/api/org/springframework/web/client/RestTemplate.html)：

```
ResponseEntity<CisResponse<CisResponseEntity>> res = template.exchange(
        rootUrl,
        HttpMethod.POST,
        null,
        new ParameterizedTypeReference<CisResponse<CisResponseEntity>>() {}); 
```

请注意，最后一行演示了[超类型标记](http://gafter.blogspot.it/2006/12/super-type-tokens.html)的想法：您不提供字面量`CisResponse.class`，而是提供参数化类型的匿名实例化`ParameterizedTypeReference<T>`，它可以在运行时提取子类型信息。您可以将超级类型令牌*视为*实现`Foo<Bar<Baz>>.class`

顺便说一句，在 Java 中，您不需要在访问实例变量前加上`this`: 如果您的对象定义了 a`url`和`template`成员，则只需使用它们的简单名称访问它们，而不是像您一样使用前缀`this.url`和`this.template`

# css - 神秘的断线

> ID：13819738
> 
> 赞同：0
> 
> 时间：2012-12-11T11:47:38.770
> 
> 标签：css, line-breaks

看一下右侧列中的“绩效数据未扣除费用”：

[http://www.securisinvestments.com/](http://www.securisinvestments.com/)

由于某种原因，文本没有填满整个段落标记，即“费用”这个词看起来前面有一个 br 标记。我认为这可能与此有关，`text-align: justify;`但我在 CSS 中找不到任何引用。

谁能看到发生了什么？搞得我一头雾水...

谢谢

大须

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:54:01.273

在上面的行中，日期的底部边距为 20 像素并且是浮动的。

删除这个 20px。

```
.widget-title span {
    margin-bottom: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:53:03.957

### 上述问题`span`：

```
.widget-title {overflow: hidden;}
.widget-title span {margin: 0;} 
```

这解决了这个问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T11:54:44.220

试试这个：

```
<p class="small" style="white-space: nowrap;">* Performance figures are net of fees.</p> 
```

另外，我刚刚注意到上面标题的下边距很大，因此阻止了小文本的延伸。

如果可能的话给`.widget-title span` `margin-bottom: 0px;`

# c# - 图邻接表实现

> ID：13819744
> 
> 赞同：1
> 
> 时间：2012-12-11T11:47:49.233
> 
> 标签：c#, data-structures, graph, adjacency-list

我正在尝试`Adjacency List`使用 C# 表示图形，如下面的代码。 **但我想知道在哪里可以找到更好的 C# 实现。喜欢这个 Java 网站： http: [//algs4.cs.princeton.edu/41undirected/Graph.java.html](http://algs4.cs.princeton.edu/41undirected/Graph.java.html)**

为了改进这个实现，我有一些问题：

1.  是否有另一种简单的数据结构可供使用，并且您可以使诸如`DFS`, `BFS`,之类的操作`Find the Shortest-path`更容易？或者数据结构根据要解决的问题变化太大？

**=== 已编辑 ===**

我试图将数据结构实现如下。

**OBS**：这种方法看起来很简单，但我后来意识到这不太适合 DFS，例如，因为你需要一直跟踪第一个元素。在`LinkedList`我的解决方案中似乎最好使用自定义创建了链接列表，而不是 `LinkedList<Vertex>`.

考虑到下面的评论并保持简单性，我做了一些更改。但我不知道这些更改是否会影响进一步的操作，例如`BFS`. 为了能够拥有直接和间接图，我认为使用接口比使用属性更好。

```
 public interface IGraph
    {
        void InsertEdge(int edgeAKey, int edgeBKey);
        void IsertNewVertex(int vertexKey);
        LinkedList<Vertex> FindByKey(int vertexKey);
        bool ExistKey(int vertexKey);
    } 
```

为了使其尽可能简单，我们可以使用已经实现的数据结构，例如`Dictionary`和`LinkedList`。而不是使用`object`as `Dictionary key`，为了简单起见，我们可以在`Vertex`a `key`(or `label`) 和 a中创建`value`，如果您想添加一个已经存在于另一个中的值`Vertex`。

```
public class GraphDirect : IGraph
    {
        private Dictionary<int,LinkedList<Vertex>> Vertexes { get; set; }

        public GraphDirect()
        {
            Vertexes = new Dictionary<int, LinkedList<Vertex>>();
        }

        public bool ExistKey(int vertexKey)
        {
            if (this.FindByKey(vertexKey) == null)
                return false;
            else
                return true;
        }

        public void IsertNewVertex(int vertexKey)
        {
            if (!this.ExistKey(vertexKey))
            {
                Vertex vertex = new Vertex(vertexKey);
                LinkedList<Vertex> listVertexes = new LinkedList<Vertex>();
                listVertexes.AddFirst(vertex);
                this.Vertexes.Add(vertexKey, listVertexes);
            }
        }

        public void InsertEdge(int vertexAKey, int vertexBKey)
        {
            //Create the vertex A, if it doesn't exist            
            if (!this.ExistKey(vertexAKey))
            {
                this.IsertNewVertex(vertexAKey);
            } 
            //Will always insert the vertex B on this edge
            this.FindByKey(vertexAKey).AddLast(new Vertex(vertexBKey));
            //Create the vertex B, if doesn't exist
            if (!this.ExistKey(vertexBKey))
            {
                this.IsertNewVertex(vertexBKey);
            }
        }

        public LinkedList<Vertex> FindByKey(int vertexKey)
        {
            if (this.Vertexes.ContainsKey(vertexKey))
                return this.Vertexes[vertexKey];

            return null;
        }

    } 
```

Vertex 类不需要任何其他指针，如有必要，只需保留`key`and a 。`value`

```
public enum State { Visited = 0, UnVisited = 1, Processed = 2 }

public class Vertex
{
    public int Key;
    public int Value;
    public State Status = State.UnVisited;

    public Vertex(int key)
    {
        this.Key = key;
        this.Value = 0;
    }

    public Vertex(int key, int value)
    {
        this.Key = key;
        this.Value = value;
    }
}

public class Start
{
     public static void Main(){
         GraphDirect gDirect = new GraphDirect();
         gDirect.InsertEdge(2, 3);
         gDirect.InsertEdge(2, 8);
         gDirect.InsertEdge(5, 6);
     }
} 
```

# codeigniter-routing - Codeigniter Url Rewriting 没有任何控制器或方法或除域名/产品名称之外的任何其他单词

> ID：13819751
> 
> 赞同：0
> 
> 时间：2012-12-11T11:48:21.833
> 
> 标签：codeigniter-routing

我需要将我的网址从[http://www.website.com/controller-name/method-name/id/](http://www.website.com/controller-name/method-name/id/)更改 为[http://www.website.com/Art-Coupon-Codes](http://www.website.com/Art-Coupon-Codes)这是一个示例。如何这可以在codeigniter中完成吗

# node.js - 声明变量时'this'和'var'之间的区别，nodeJS

> ID：13819752
> 
> 赞同：0
> 
> 时间：2012-12-11T11:48:28.307
> 
> 标签：node.js, function, var

我有下一段代码：

```
function Server() {
    this.isStarted = false;
//  var isStarted = false;

    function status() {
        return isStarted;
    }

    console.log(status());
}

var a = new Server() 
```

当我运行它时，我得到

```
ReferenceError: isStarted is not defined
    at status (/a/fr-05/vol/home/stud/yotamoo/workspace/ex4/text.js:7:10)
    at new Server (/a/fr-05/vol/home/stud/yotamoo/workspace/ex4/text.js:10:14)
    at Object.<anonymous> (/a/fr-05/vol/home/stud/yotamoo/workspace/ex4/text.js: 
```

但是，如果我更改`this.isStarted = false;`为`var isStarted = false;`一切正常。

有人愿意解释为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:04:15.907

这是指某物的所有者。请参阅这篇[文章](http://www.quirksmode.org/js/this.html)。其中 var 声明了一个局部变量。

在您的情况下，您想知道服务器是否已启动，因此您需要将“this”添加到您的状态功能中。

```
function status() {
    return this.isStarted;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:03:54.050

长话短说。因为`isStarted`，当定义为 时`this.isStarted = true`，是当前对象的属性（JavaScript`this`关键字是指调用该函数的对象），在`status`函数中您必须将其作为`this.isStarted`.

将其声明为变量 ( `var`) 是不同的。从技术上讲，`isStatus`将成为隐藏词法范围对象的属性。`isStatus`您必须像在整个`Server`函数体和所有子函数中一样访问它。

# c# - ASP登录模板自定义下拉列表

> ID：13819756
> 
> 赞同：0
> 
> 时间：2012-12-11T11:48:44.327
> 
> 标签：c#, asp.net

我正在使用标准身份验证（使用 AD）和`asp:login`. 我想将下拉列表添加到登录模板（将从数据库中检索元素）。但是，如果我只是简单地添加：

```
<asp:DropDownList ID="ddlDomain" runat="server"/> 
```

无法从代码中访问它。登录成功后，我希望将来自 ddlDomain 的值添加到会话中。

我需要自己处理整个登录还是有办法将元素添加到模板中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:53:47.563

你可以做

```
DropDownList ddl = (DropDownList)Login1.LoginView.FindControl("ddlDomain");
```

在代码中获取您的下拉列表。

# download - javamail 仅从我的收件箱中下载选定的附件

> ID：13819759
> 
> 赞同：0
> 
> 时间：2012-12-11T11:48:59.403
> 
> 标签：download, jakarta-mail, attachment

我正在使用 javamail 将我的 gmail 附件下载到本地系统。我可以从我的收件箱下载所有附件。但我只想从我的收件箱下载选定邮件的附件。我怎样才能做到这一点。提前致谢。

葡萄酒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:01:55.617

您知道循环遍历所有附件并保存每个附件吗？将其更改为仅保存您想要的那个。

# c# - 是否有可以帮助构建 Google 地图链接的 C# API？

> ID：13819762
> 
> 赞同：1
> 
> 时间：2012-12-11T11:49:11.693
> 
> 标签：c#, .net, google-maps

例如：

```
OpenUrl(GoogleMaps.Location("my address here")); 
```

会打开谷歌地图并输入地址，就好像它是直接输入谷歌地图本身的搜索栏一样。

如果它能够执行以下操作就更好了：

```
OpenUrl(GoogleMaps.Directions("Starting address", "End Address")); 
```

我不希望将 Google 地图嵌入到我的应用程序或任何类似的东西中。网址生成将非常适合我的需求。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:59:50.933

也许您正在寻找： [适用于 .NET 的 Google Maps API](http://gmaps.codeplex.com/)

对于 Url 生成使用： **获取静态地图 url**

> 静态地图支持允许您获取可以使用的有效 url，例如，与标签一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:08:33.613

如果您在 Visual Studio 中使用 NuGet，请使用[http://nuget.org/packages/GoogleMapsApi](http://nuget.org/packages/GoogleMapsApi)

# git - 缩进配置仅适用于某些文件

> ID：13819764
> 
> 赞同：11
> 
> 时间：2012-12-11T11:49:28.017
> 
> 标签：git

我想用

```
git config core.whitespace tab-in-indent,tabwidth=4 
```

我想为 c++ 文件设置这些设置，以便在使用 git diff 时出现错误缩进时收到警告。但是，我也有需要选项卡的 Makefile。有没有办法为不同的文件配置不同的空白设置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T15:26:55.393

您可以使用[`gitattributes`](http://git-scm.com/docs/gitattributes)来调整这些设置。这是我的 .gitattributes 文件的片段：

```
*.c     text diff=cpp whitespace=trailing-space,space-before-tab,tab-in-indent
*.cpp   text diff=cpp whitespace=trailing-space,space-before-tab,tab-in-indent
*.h     text diff=cpp whitespace=trailing-space,space-before-tab,tab-in-indent
*.hpp   text diff=cpp whitespace=trailing-space,space-before-tab,tab-in-indent
*.py    text diff=python whitespace=trailing-space,space-before-tab,tab-in-indent
*.tex   text diff=tex whitespace=trailing-space,space-before-tab,tab-in-indent
*.java  text diff=java whitespace=trailing-space,space-before-tab,tab-in-indent
*.pl    text diff=perl whitespace=trailing-space,space-before-tab,tab-in-indent
*.php   text diff=php whitespace=trailing-space,space-before-tab,tab-in-indent
*.rb    text diff=ruby whitespace=trailing-space,space-before-tab,tab-in-indent

*.vcproj    eol=crlf
*.dsp       eol=crlf
*.dsw       eol=crlf

*.sh    eol=lf

*.jpg   binary
*.png   binary
*.gif   binary
*.tiff  binary 
```

要调整您的空白设置，您可以使用以下内容：

```
*.ext   whitespace=tab-in-indent,tabwidth=4 
```

`*.ext`can 指向路径，包含 glob 等。这是非常灵活的机制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-28T19:02:28.477

[John Szakmeister](https://stackoverflow.com/a/13823013/2504346)和[UpAndAdam](https://stackoverflow.com/a/32235112/2504346)对答案的一些补充。

要设置特定于文件的规则，您必须`.gitattributes`在项目的根目录中添加一个文件。[docs](https://www.git-scm.com/docs/gitattributes)
（如果您不希望它受版本控制，可以将其添加为：`.git/info/attributes`.）

```
# Macro's
[attr]cpp       diff=cpp whitespace=trailing-space,space-before-tab,indent-with-non-tab,tabwidth=4
[attr]makefile  whitespace=trailing-space,indent-with-non-tab,space-before-tab,tabwidth=4

*.[ch]        cpp
*.[ch]pp      cpp
makefile      makefile
s.makefile    makefile 
```

*   [使用.gitignore 文件](https://www.git-scm.com/docs/gitignore#_pattern_format)的语法匹配文件。ie`*`匹配所有内容并`[ch]`匹配字符`c`和`h`.
*   该`whitespace`选项列出了要警告的事情。
    *   `tabwidth`选项中的设置`whitespace`用于确定何时以及如何替换制表符和空格字符。（默认值为 8 个字符。）
    *   `tab-indent`认为使用制表符缩进是错误的。
    *   `indent-with-non-tab`在行首使用 4 个或更多空格时在此处发出警告。请注意，接受 3 个空格的缩进！
        添加`space-before-tab`以捕获隐藏在选项卡之前和之间的空格。
        请注意，制表符后面的空格是
*   *另外*：`diff=cpp`为 C 和 C++ 文件启用更智能的差异。
*   *除了 2*：`trailing-space`警告行尾和文件尾的尾随空格字符。

### 验证规则

*   要验证应用了哪些规则，`.gitattributes`请使用：

```
git check-attr --all -- <pathname> 
```

*`<pathname>`不必是现有文件。（即`some.cpp`工作）*

*   测试`whitespace`规则：
    创建一个与文件名规则匹配的虚拟文件并调用：`git diff`.

```
trailing space 
trailing tab    
  2 spaces
    4 spaces
    tab
     tab and space
    space and tab
        tab, space, tab 
```

### 用法

调用时标记问题并在调用时`git diff`检查/修复`git -apply ---whitespace=[warn|error|fix]`。配置 with 的默认行为`git apply`：

```
git config --[global|local] apply.whitespace [warn|error|fix] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-26T19:26:39.900

正如 jszakmeister 从我的评论中更新的那样，这里只是您所询问内容的一个小节。

*   .cpp/.hpp 文件不允许使用制表符缩进
*   制表符允许用于 Makefiles/makefiles 和 *.mk 文件
*   不允许有尾随空格
*   总共 4 的制表宽度

请注意“makefile-ish”条目中修饰符的使用，`-`以表示不要调用 tab-in-indent 错误。

```
makefile text          whitespace=-tab-in-indent,trailing-space,tabwidth=4
Makefile text          whitespace=-tab-in-indent,trailing-space,tabwidth=4
*.mk     text          whitespace=-tab-in-indent,trailing-space,tabwidth=4
*.cpp    text diff=cpp whitespace=tab-in-indent,trailing-space,tabwidth=4
*.hpp    text diff=cpp whitespace=tab-in-indent,trailing-space,tabwidth=4 
```

# sql - 让子查询返回一行而不是一列

> ID：13819766
> 
> 赞同：2
> 
> 时间：2012-12-11T11:49:37.353
> 
> 标签：sql

我有这个查询：

```
SELECT 
    [Address]=e.Address, 
    [LastEmail] = 
    (
        SELECT TOP 1 [Email] 
        FROM Email innerE 
        WHERE e.UserID = innerE.UserID 
        AND innerE.Contact = @emailId
        AND (IsSent is null OR isSent = 0)
        ORDER BY Timestamp DESC
    )

FROM Emails e 
```

这很好用，但是现在，我意识到我想获得包含 lastemail 列的整行，如果可能的话，有什么想法可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:53:16.717

你可以这样做：

```
;WITH LastEmails
AS
(
   SELECT *, 
     ROW_NUMBER() OVER(ORDER BY Timestamp DESC) rownum
   FROM Emails
   WHERE Contact = @emailId
     AND (IsSent is null OR isSent = 0)
)
SELECT * FROM LastEmails
WHERE rownum = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:09:17.700

如果您的 DBMS 支持它，您可以使用[APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)（我认为它看起来像 SQL-Server 语法）

```
SELECT  [Address]=e.Address, 
        [LastEmail] = ie.Email
FROM    Emails e
        OUTER APPLY
        (   SELECT  TOP 1 *
            FROM    Email innerE 
            WHERE   e.UserID = innerE.UserID 
            AND     innerE.Contact = @emailId
            AND     (IsSent is null OR isSent = 0)
            ORDER BY Timestamp DESC
        ) ie 
```

这类似于相关子查询，但允许多行和多列。

# sql - SQL 选择值总和相同的 ID

> ID：13819769
> 
> 赞同：16
> 
> 时间：2012-12-11T11:49:38.573
> 
> 标签：sql, select, group-by, sum

这是我的名为“SAM”的表

```
ID  |   S_Date   |  S_MK |   TID   |   Value   |
===============================================
1   | 2012-12-11 |   1   |   112   |   23      |
2   | 2012-12-11 |   2   |   112   |   3       |
3   | 2012-12-11 |   1   |   113   |   22      |
4   | 2012-12-11 |   3   |   114   |   2       | 
```

这应该是我的预期结果：具有相同 T_ID 的“值”列的总和：

```
S_Date     | TID   | sum(Value)|
===============================
2012-12-11 | 112   |   26      |
2012-12-11 | 113   |   22      |
2012-12-11 | 114   |   2       | 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-11T11:50:52.207

```
select S_Date, TID, sum(Value)
from SAM
group by S_Date, TID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:13:40.810

如果你真的需要这个结果集，只按 T_ID 分组，你可以使用这个查询：

```
SELECT   (SELECT top 1 S_Date FROM SAM as t1 WHERE t1.TID = t2.TID) as S_Date,
         TID,
         SUM(Value) 
FROM     SAM as t2
GROUP BY TID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:10:27.477

您必须对值列的总和使用聚合函数“sum”。

```
select S_Date ,TID, Sum(Value) from Sam group by S_Date, TID 
```

此外，您应该将所有列包含在您在 select 语句中使用的 group by 子句中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-06T16:12:16.313

```
SELECT *, SUM(Value) AS Value From SAM GROUP BY TID 
```

这将通过对`Value`同一`TID`列的列求和来返回同一个表。

# google-app-engine - 与（webapp2 + python 2.7 + Jinja2）集成聊天

> ID：13819772
> 
> 赞同：0
> 
> 时间：2012-12-11T11:49:52.620
> 
> 标签：google-app-engine, python-2.7, jinja2, webapp2

我正在尝试将聊天添加到我的网站，并将一些代码与我现有的代码集成。当聊天应用程序全部设置在原始 main.app 文件中时，它本身就可以正常工作。但是，当我尝试将相同的代码移动到 handlers.py 文件中，然后在 routes.py 中设置路由时，我收到错误消息，提示模板变量未定义。两种不同的代码在呈现模板的方式上是否存在冲突？他们似乎以不同的方式使用 webapp2，即我的代码呈现这样的模板：

```
self.render_template('secure_zone.html', **params) 
```

和这样的聊天应用程序：

```
self.response.out.write(render("main.html",
                                   username=username,
                                   usernameerror=usernameerror,
                                   channel=channelname,
                                   channelerror=channelerror)) 
```

两者都可以接受吗？

这是我的 handlers.py 文件：

```
Routes are setup in routes.py and added in main.py
"""
import httpagentparser
from boilerplate import models
from boilerplate.lib.basehandler import BaseHandler
from boilerplate.lib.basehandler import user_required

class SecureRequestHandler(BaseHandler):
"""
Only accessible to users that are logged in
"""

@user_required
def get(self, **kwargs):
    user_session = self.user
    user_session_object = self.auth.store.get_session(self.request)

    user_info = models.User.get_by_id(long( self.user_id ))
    user_info_object = self.auth.store.user_model.get_by_auth_token(
        user_session['user_id'], user_session['token'])

    try:
        params = {
            "user_session" : user_session,
            "user_session_object" : user_session_object,
            "user_info" : user_info,
            "user_info_object" : user_info_object,
            "userinfo_logout-url" : self.auth_config['logout_url'],
            }
        return self.render_template('secure_zone.html', **params)
    except (AttributeError, KeyError), e:
        return "Secure zone error:" + " %s." % e 
```

这是聊天应用程序的 main.py 文件：

```
import os
import hashlib
import urllib
import logging
import re
import json

import webapp2
import jinja2
from google.appengine.api import channel as channel_api # 'channel' is kind of ambiguous in     context
from google.appengine.ext import db
from google.appengine.api import memcache

# This section will eventually get moved to a Handler class
template_dir = os.path.join(
    os.path.dirname(__file__), 'templates')
jinja_env = jinja2.Environment(
    loader = jinja2.FileSystemLoader(template_dir),
    autoescape = True)

def render_str(template, **params):
'''Returns a string of the rendered template'''
t = jinja_env.get_template(template)
return t.render(params)

def render(template, **kw):
'''Render using the template and parameters'''
return(render_str(template, **kw))
# End Handler

class Main(webapp2.RequestHandler):
def get(self):
    '''Show connection page'''
    return self.render_template("main.html", channel="#udacity")

def post(self):
    '''Displays chat UI'''
    username = self.request.get('username')
    channelname = self.request.get('channel')
    usernameerror = ""
    if not username:
        usernameerror="Please enter a username"
    elif not re.compile(r'^[a-zA-Z0-9_-]{3,20}$').match(username):
        usernameerror = "Username must consist of 3-20 alphanumeric characters."
    elif get_user(username):
        usernameerror="Username already in use"
    channelerror = ""
    if channelname and not re.compile(r'^#[\w]{3,20}$').match(channelname):
        channelerror="Channel must consist of 3-20 alpha_numeric characters and start with a #"
    if len(usernameerror+channelerror) > 0:
        self.response.out.write(render("main.html",
                                       username=username,
                                       usernameerror=usernameerror,
                                       channel=channelname,
                                       channelerror=channelerror))

app = webapp2.WSGIApplication([
                           ('/', Main),
                           ('/communication', Communication),
                           ('/_ah/channel/connected/?', Connect),
                           ('/_ah/channel/disconnected/?', Disconnect)
                           ], debug=True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:03:07.507

您在评论“错误：'Main' 对象没有属性'render_template'”中发布的具体错误是因为在您的 Main 处理程序中，您尝试返回 self.render_template。你应该像这样调用函数：

```
render_template("main.html", channel="#udacity") 
```

请注意，我没有检查您的其余代码，因此如果您遇到任何其他问题，请发布您遇到的具体错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T04:42:47.723

那是因为你的 webapp2.RequestHandler 没有对应的函数“render_template”

您可以使用添加了 render_template 函数的 BaseHandler 来实现模板渲染

```
from google.appengine.ext.webapp import template   

class BaseHandler(webapp2.RequestHandler):
    def render_template(self, filename, **template_args):
        path = os.path.join(os.path.dirname(__file__), 'templates', filename)
        self.response.write(template.render(path, template_args))

class Main(BaseHandler):
    def get(self):
        '''Show connection page'''
        return self.render_template("main.html", channel="#udacity") 
```

参考： http: [//blog.notdot.net/2011/11/Migrating-to-Python-2-7-part-2-Webapp-and-templates](http://blog.notdot.net/2011/11/Migrating-to-Python-2-7-part-2-Webapp-and-templates)

我刚开始使用 webapp2 + python 2.7 + Jinja2 几天，这也是我遇到的同样的问题。希望这个解决方案可以帮助你；）

# java - 如何在 Tomcat 启动或应用程序部署上运行特定的 java 代码？

> ID：13819773
> 
> 赞同：10
> 
> 时间：2012-12-11T11:49:56.393
> 
> 标签：java, tomcat, servlets

> **可能重复：**
> [tomcat 自动启动 servlet](https://stackoverflow.com/questions/785769/tomcat-auto-start-servlet)
> [如何在 tomcat 服务器启动时加载 java 类（不是 servlet）](https://stackoverflow.com/questions/4175726/how-do-i-load-a-java-class-not-a-servlet-when-the-tomcat-server-starts)

我在 Tomcat 服务器上运行了 Web 应用程序。我想在 Tomcat 启动或部署此应用程序时在我的应用程序中运行特定代码。我怎样才能实现它？谢谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-11T11:54:47.373

您需要实现 ServletContextListner 接口并在其中编写要在 tomcat 启动时执行的代码。

以下是关于它的简要说明。

ServletContextListner 在 javax.servlet 包内。

这是有关如何执行此操作的简短代码。

```
public class MyServletContextListener implements ServletContextListener {

  @Override
  public void contextDestroyed(ServletContextEvent arg0) {
    //Notification that the servlet context is about to be shut down.   
  }

  @Override
  public void contextInitialized(ServletContextEvent arg0) {
    // do all the tasks that you need to perform just after the server starts

    //Notification that the web application initialization process is starting
  }

} 
```

您需要在部署描述符 web.xml 中配置它

```
<listener>
    <listener-class>
        mypackage.MyServletContextListener
    </listener-class>
</listener> 
```

# magento - Magento 原始图像

> ID：13819779
> 
> 赞同：0
> 
> 时间：2012-12-11T11:50:07.720
> 
> 标签：magento, magento-1.6

我上传以存储已经为 base_image、small_image 和 thumbnail 准备好的图像

如何在产品列表页面中显示来自画廊的原始图像（不是来自缓存），检查为 small_image

```
$_product->getSmallImage(); 
```

在目录/图像助手上工作，因此我们从缓存中获取图像，但我需要获取原始图像的 URL，该图像被检查为 small_image

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:18:31.347

请参阅[获取原始图像 url Magento (1.6.1.0)](https://stackoverflow.com/questions/8288340/get-original-image-url-magento-1-6-1-0/8288805#8288805)

或者

```
<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA) . 'catalog/product' . $_product->getSmallImage(); ?> 
```

# vector - 检查符号是否是方案中的点字符：#\.?

> ID：13819782
> 
> 赞同：2
> 
> 时间：2012-12-11T11:50:19.420
> 
> 标签：vector, char, scheme

鉴于这`myVector`是一个向量并且`i`是一个索引，当我这样做时：

```
(= (vector-ref myVector i) #\.) 
```

我得到：

```
=: contract violation
  expected: number?
  given: #\.
  argument position: 1st
  other arguments...:
   #\. 
```

如何检查位置的字符`i`是否为 a `.`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:59:47.670

您不应该将字符转换为数字，只需使用[`char=?`](http://docs.racket-lang.org/reference/characters.html#%28def._%28%28quote._%7E23%7E25kernel%29._char%7E3d%7E3f%29%29)文档中的过程：

> 如果所有参数都是 eqv，则返回 #t？

特别是对于您的示例：

```
(define myVector #(#\1 #\. #\2))
(define i 1)

(char=? (vector-ref myVector i) #\.)
=> #t 
```

您最近几天的一些问题与字符或字符串操作有关，我建议您仔细查看处理[这些](http://docs.racket-lang.org/reference/characters.html) [主题](http://docs.racket-lang.org/reference/strings.html)的文档页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:53:37.937

**编辑：**这错误地假设向量是数字而不是字符。使用奥斯卡的答案。

您需要将数字转换为字符，反之亦然。

例如：

```
(= (vector-ref myVector i) (char->integer #\.)) 
```

或者

```
(char=? (integer->char (vector-ref myVector i)) #\.) 
```

# azure - Lucene.NET 和在 Azure Blob 存储上存储数据

> ID：13819786
> 
> 赞同：2
> 
> 时间：2012-12-11T11:50:25.497
> 
> 标签：azure, lucene.net, azure-blob-storage

我问的问题是因为我不想使用 AzureDirectory 项目。我只是在自己尝试一些事情。

```
cloudStorageAccount = CloudStorageAccount.Parse("DefaultEndpointsProtocol=http;AccountName=xxxx;AccountKey=xxxxx");

        blobClient=cloudStorageAccount.CreateCloudBlobClient();

        List<CloudBlobContainer> containerList = new List<CloudBlobContainer>();
        IEnumerable<CloudBlobContainer> containers = blobClient.ListContainers();
        if (containers != null)
        {
        foreach (var item in containers)
        {
            Console.WriteLine(item.Uri);
        }
        }
        /* Used to test connectivity 
        */
        //state the file location of the index

        string indexLocation = containers.Last().Name.ToString();
        Lucene.Net.Store.Directory dir =
            Lucene.Net.Store.FSDirectory.Open(indexLocation);

        //create an analyzer to process the text
        Lucene.Net.Analysis.Analyzer analyzer = new
        Lucene.Net.Analysis.Standard.StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30);

        //create the index writer with the directory and analyzer defined.

        bool findexExists = Lucene.Net.Index.IndexReader.IndexExists(dir);

        Lucene.Net.Index.IndexWriter indexWritr = new Lucene.Net.Index.IndexWriter(dir, analyzer,!findexExists, Lucene.Net.Index.IndexWriter.MaxFieldLength.UNLIMITED);
        //create a document, add in a single field
        Lucene.Net.Documents.Document doc = new  Lucene.Net.Documents.Document();
        string path="D:\\try.html";
        TextReader reader = new FilterReader("D:\\try.html");
        doc.Add(new Lucene.Net.Documents.Field("url",path,Lucene.Net.Documents.Field.Store.YES,Lucene.Net.Documents.Field.Index.NOT_ANALYZED));
        doc.Add(new Lucene.Net.Documents.Field("content",reader.ReadToEnd().ToString(),Lucene.Net.Documents.Field.Store.YES,Lucene.Net.Documents.Field.Index.ANALYZED));
        indexWritr.AddDocument(doc);
        indexWritr.Optimize();
        indexWritr.Commit();
        indexWritr.Close(); 
```

现在的问题是索引完成后我看不到容器内创建的任何文件。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T12:39:36.910

您在那里使用 FSDirectory，它将文件写入本地磁盘。

您正在向它传递 blob 存储中的容器列表。Blob 存储是通过 REST API 提供的服务，不能直接从文件系统寻址。因此 FSDirectory 将无法将您的索引写入存储。

您的选择是：

1.  在机器上挂载 VHD 磁盘，并将 VHD 存储在 blob 存储中。这里有一些关于如何执行此操作的说明：http: [//blogs.msdn.com/b/avkashchauhan/archive/2011/04/15/mount-a-page-blob-vhd-in-any-windows-azure -vm-outside-any-web-worker-or-vm-role.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2011/04/15/mount-a-page-blob-vhd-in-any-windows-azure-vm-outside-any-web-worker-or-vm-role.aspx)
2.  使用您在问题中引用的 Azure 目录。我已经针对最新的存储 SDK 重建了 AzureDirectory：[https ://github.com/richorama/AzureDirectory](https://github.com/richorama/AzureDirectory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:05:22.270

人们环顾四周的另一种选择 - 我编写了一个使用 azure 共享缓存（预览版）的目录，它可以作为 AzureDirectory 的替代品（尽管适用于有界搜索集）

[https://github.com/ajorkowski/AzureDataCacheDirectory](https://github.com/ajorkowski/AzureDataCacheDirectory)

# java - 试图为 ENUM 类型获取一个 keyboard.next()

> ID：13819787
> 
> 赞同：0
> 
> 时间：2012-12-11T11:50:30.893
> 
> 标签：java, enums

嘿，我让用户输入航班的详细信息。我的飞机类型是 ENUM。

```
public enum AIRPLANETYPE
    {
        AIRBUS("1"), CORPORATE("2"), PRIVATE("3");

        private String planeName;

        private AIRPLANETYPE(String planeName)
        {
            this.planeName = planeName;
        }
    }

Flight.AIRPLANETYPE planeType = keyboard-------What goes in here.(); 
```

我不知道如何将枚举与 Scanner 对象一起使用。

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:14:34.110

你可以使用：

```
AIRPLANETYPE airplaneType = AIRPLANETYPE.valueOf(keyboard.next()); 
```

# javascript - 如何使用 DOM 查找表的列数？

> ID：13819788
> 
> 赞同：4
> 
> 时间：2012-12-11T11:50:37.327
> 
> 标签：javascript, jquery, html, dom

对于使用 DOM 的行数，我们有 tablename.rows.length 来获取行数，但我们没有 'cols.length' 来获取列数。

我们如何才能找到列数（仅使用 DOM）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T11:55:39.820

我认为你可以使用单元格来计算列，假设第一行的列数对于所有的都是相同的

```
tablename.rows[0].cells.length; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-11T12:04:11.507

我会使用表格的`rows`属性和第一行的`cells`属性，并合计行`colSpan`中每个单元格的属性。这将适用于所有主要浏览器回到 IE 4，并且应该非常快。

演示：http: [//jsfiddle.net/Gtdru/](http://jsfiddle.net/Gtdru/)

代码：

```
function getTableColumnCount(table) {
    var columnCount = 0;
    var rows = table.rows;
    if (rows.length > 0) {
        var cells = rows[0].cells;
        for (var i = 0, len = cells.length; i < len; ++i) {
            columnCount += cells[i].colSpan;
        }
    }
    return columnCount;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T11:52:24.987

DOM 中没有这样的概念。

`td`您可以尝试计算and `th`in的最大数量`tr`：

```
var max = 0;
$('#tableId tr').each(function(){max=Math.max(max, $('td,th', this).length)}); 
```

[示范](http://jsfiddle.net/uLFsp/)

如果你想考虑colspan，它会更重一点：

```
var max = 0;
$('#tableId tr').each(function(){
    var inTr = 0;
    $('td,th', this).each(function() { inTr += parseInt($(this).attr('colspan')) || 1;});
    max = Math.max(max,inTr);
}); 
```

[示范](http://jsfiddle.net/EdW4x/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-11T16:14:57.043

这将适用于复杂的表头：

```
$($('#table_id_here tbody tr')[0]).find('td').length 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T06:24:14.740

干得好：

```
$(function() {
    var colCount = 0;
    $('tr:nth-child(1) td').each(function () {
        if ($(this).prop('colspan')) {
            colCount += +$(this).prop('colspan');
        } else {
            colCount++;
        }
    });
    alert(colCount);
});​ 
```

[jsfiddle](http://jsfiddle.net/6CV9u/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-18T12:37:07.833

获取任何表中可能的列数的一种非常简单的方法是使用以下（vanillaJS）函数：

```
/**
 * Calculates the number of columns based on any row using colSpan attribute.
 *
 * @param {HTMLElement} table : The table element to be count.
 *
 * @return {int} The number of columns this table has.
 */
var getTableColSpan = function getTableColSpan(table) {

    var colSpan = 0; // initialize counter
    var trs = table.querySelectorAll('tr'); // get firt tr cells.

    for (var j = 0; j < trs.length; j++) {

        var tr = trs[j];
        var tds = tr.cells;

        var trColSpan = 0; // initialize counter

        // loops between columns and gets each one's colSpan
        for (var i = 0; i < tds.length; ++i) {
            trColSpan += tds[i].colSpan;
        }

        colSpan = trColSpan > colSpan ? trColSpan : colSpan;
    }

    return colSpan;
}; 
```

# android - 如何获得页面卷曲效果以供查看？

> ID：13819791
> 
> 赞同：1
> 
> 时间：2012-12-11T11:50:43.663
> 
> 标签：android

我看过这个例子：- [https://github.com/harism/android_page_curl](https://github.com/harism/android_page_curl) 用于在android中实现页面卷曲效果，但在这个项目中使用Bitmap，但我的要求是使用View来实现。有人建议我吗？

# javascript - 瘦客户端和胖客户端之间的通信

> ID：13819792
> 
> 赞同：2
> 
> 时间：2012-12-11T11:50:50.460
> 
> 标签：javascript, local-storage, thin-client, thick-client

我有一个在浏览器窗口（瘦客户端）上运行的 Web 应用程序。

我想从外部应用程序（厚客户端）向这个 Web 应用程序（窗口已经打开）发送一些信息，而不通过服务器（客户端到客户端）。

![在此处输入图像描述](../Images/99cfb9c78532abd96ec08ac9f6cbe5c5.png)

我找到的解决方案如下：

*   在`thin client`URL 中打开：`http://xx/index.html`
*   `thick client`打开一个带有 url 的新浏览器窗口`http://xx/send.html?var=val`
*   新的浏览器窗口使用“localStorage”发送`var=val`到瘦客户端。
*   新的浏览器窗口会自行关闭。

![在此处输入图像描述](../Images/3608fb3362324046ffe24e870020e299.png)

我有以下问题：

*   一旦完成其目的，有没有办法关闭FF中的临时窗口？`window.open('','_parent',''); window.close();`在最新的 FF 版本中不再起作用。
*   有没有办法`localStorage`在 IE7- 中使用事件？
*   还有另一种方法吗？（胖客户端和浏览器之间的通信）。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:41:35.503

如果您不想修改现有服务器，您可以设置另一个 Web 服务器作为胖客户端和瘦客户端之间的桥梁。

认为客户端将信息发送到桥接服务器，瘦客户端将等待来自桥接服务器的更新。

客户端一次可以与多个服务器进行交互。

胖客户端需要向瘦客户端推送什么样的信息？它是简单的文本还是更复杂的东西？

# google-apps-script - 从域管理员检索电子邮件

> ID：13819795
> 
> 赞同：-3
> 
> 时间：2012-12-11T11:50:59.133
> 
> 标签：google-apps-script

是否可以从域管理员检索域用户的电子邮件？

我必须创建一个谷歌应用脚​​本应用程序，它读取域用户的所有电子邮件并将电子邮件保存在一个帐户的 Gdrive 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:41:03.710

未经测试，但应该做你想做的就好了。

```
function myFunction() {
  var users = UserManager.getAllUsers();
  var content = "";
  for (var user in users) {
    content += users[user].getEmail() + "\n";
  }
  DocumentApp.create("Emails Of Users").appendParagraph(content);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:33:23.467

这是我在电子表格中使用的另一个版本：

```
function findUsers() {     
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet()
  sheet.getDataRange().clear()
  var users = UserManager.getAllUsers();
  var r = new Array();
//
  for( var i = 0 ; i < users.length ; i++ ){
    var Umail = users[i].getEmail(); 
    var UnomF = users[i].getFamilyName()
    var UnomP = users[i].getGivenName()

      if(users[i].getAgreedToTerms()){var Udejaconnect = 'oui'}else{var Udejaconnect = 'jamais'}
//
     r.push([UnomF,UnomP,Umail,Udejaconnect]);
  }   
  r.sort(function(x,y){
  var xp = x[0];
  var yp = y[0];
  Logger.log(xp+'   '+yp)
  return xp == yp ? 0 : xp < yp ? -1 : 1;//  sort on name ascending
}
)
  var header = ['Nom de famille','Prénom','Email','Déjà Connecté?']
    sheet.getRange(1,1,1,r[0].length).setValues([header]).setFontWeight('bold')
    .setBackground('silver').setBorder(true,true,true,true,true,true);
    sheet.getRange(2,1,r.length,r[0].length).setValues(r);
} 
```

# c# - 无法在 C# Metro 应用程序中将文件保存在所需位置

> ID：13819796
> 
> 赞同：0
> 
> 时间：2012-12-11T11:50:59.303
> 
> 标签：c#, microsoft-metro, app.xaml

我正在开发一个使用文件输入和输出的 Metro 应用程序。我用来保存文件的代码是

```
StorageFolder appfolder = await Windows.Storage.KnownFolders.DocumentsLibrary.CreateFolderAsync("Appdata.abc", Windows.Storage.CreationCollisionOption.ReplaceExisting);
StorageFile file = await Windows.Storage.KnownFolders.DocumentsLibrary.CreateFileAsync(DateFileName + ".uvraj", Windows.Storage.CreationCollisionOption.ReplaceExisting); 
```

现在如何在我创建的文件夹中创建/保存我的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:57:28.023

调用`appfolder`对象上的方法，而不是`KnownFolder`您正在使用的方法。

像这样：

```
StorageFolder appfolder = await Windows.Storage.KnownFolders.DocumentsLibrary.CreateFolderAsync("Appdata.abc", Windows.Storage.CreationCollisionOption.ReplaceExisting);
StorageFile file = await appfolder.CreateFileAsync(DateFileName + ".uvraj", Windows.Storage.CreationCollisionOption.ReplaceExisting); 
```

# android - Android：显示进度条时出现 AsyncTask 错误

> ID：13819798
> 
> 赞同：0
> 
> 时间：2012-12-11T11:51:05.717
> 
> 标签：android, android-asynctask, progress-bar, android-theme

在我的应用程序中有一个按钮和一个 ImageView。单击按钮后，它会从服务器获取照片并显示在 inmageView 上。在从服务器获取照片时，它会显示进度条。

此应用程序能够从服务器获取照片但无法在 imageview 上显示。

代码（用于按钮）：

```
@Override
public void onClick(View v) {
    switch (v.getId()) {
         case R.id.buttonFetchPhoto:
             new BackgroundTask().execute("Main");
             break;
    }
} 
```

代码（用于进度条）

```
class BackgroundTask extends AsyncTask<String , Integer, Void>
{
    @Override
    protected void onPreExecute()
    {
        bar = new ProgressDialog(activity.this);
        bar.setMessage("Processing..");
        bar.setIndeterminate(true);
        bar.show();

    } 
    @Override
    protected Void doInBackground(String... params) 
    {   
        // Code to get Photo Byte Array from server

        Bitmap bm = BitmapFactory.decodeByteArray(photoByteArray, 0,photoByteArray.length);
        DisplayMetrics dm = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(dm);

        imageViewGetPhoto.setImageBitmap(bm); //imageViewGetPhoto is define in activity class
        }

        return null;
    }
    @Override
    protected void onPostExecute(Void result) 
    {   
        bar.dismiss();
      }
} 
```

**由于“ imageViewGetPhoto.setImageBitmap(bm)** ” ，我收到错误

我认为这是因为“ **imageViewGetPhoto** ”被定义在主线程的布局类中，并且该线程无法与主线程同步。

我如何将数据获取到由其他线程检索的主线程中。

或者我如何将对象访问到主布局中定义的其他线程。

错误：

```
FATAL EXCEPTION: AsyncTask #1
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:200)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
at java.util.concurrent.FutureTask.setException(FutureTask.java:125)          
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
at java.lang.Thread.run(Thread.java:1019)
Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original      thread that created a view hierarchy can touch its views.
at android.view.ViewRoot.checkThread(ViewRoot.java:3020)
at android.view.ViewRoot.requestLayout(ViewRoot.java:634)
at android.view.View.requestLayout(View.java:8267)
at android.view.View.requestLayout(View.java:8267)
at android.view.View.requestLayout(View.java:8267)
at android.view.View.requestLayout(View.java:8267)
at android.widget.ScrollView.requestLayout(ScrollView.java:1580)
at android.view.View.requestLayout(View.java:8267)
at android.widget.TableLayout.requestLayout(TableLayout.java:226)
at android.view.View.requestLayout(View.java:8267)
at android.view.View.requestLayout(View.java:8267)
at android.widget.TableLayout.requestLayout(TableLayout.java:226)
at android.view.View.requestLayout(View.java:8267)
at android.view.View.requestLayout(View.java:8267)
at android.widget.ImageView.setImageDrawable(ImageView.java:322)
at android.widget.ImageView.setImageBitmap(ImageView.java:336)
at com.pixel.potholelocator.PohholeLocatorActivity$BackgroundTask.doInBackground(PohholeLocatorActivity.java:295)
at com.pixel.potholelocator.PohholeLocatorActivity$BackgroundTask.doInBackground(PohholeLocatorActivity.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:185)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:59:51.307

更新您的图像视图

```
 @Override
 protected void onPostExecute(Void result) {    
      //update your imageview 
 } 
```

我们无法在工作线程中更新 imageview。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:53:30.900

将ui之类的任何修改移动`imageViewGetPhoto.setImageBitmap(bm);` 到`onPostExecute`..

```
protected void onPostExecute(Void result) 
{   
    bar.dismiss();
    imageViewGetPhoto.setImageBitmap(bm);
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T11:53:49.213

将这 3 行写入

```
@Override
    protected void onPostExecute(Void result) 
    { 
        bar.dismiss();
        DisplayMetrics dm = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(dm);

        imageViewGetPhoto.setImageBitmap(bm); 

     } 
```

# c# - 如何区分系统变量和自定义变量

> ID：13819809
> 
> 赞同：2
> 
> 时间：2012-12-11T11:51:55.463
> 
> 标签：c#, c#-4.0, reflection

我有一个像下面这样的课程：-

```
public Class Student
{
  string Name {get; set;}
  int Age {get; set;}
  Address studentAddres {get; set;}
}

public class Address
{
 string Street{get; set;}
 string City {get; set;}
} 
```

这里**Name 和 Age**是**System Define 类型**，**StudentAddres**是**自定义类型**。如何使用代码区分它们。我正在使用反射但无法实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:57:04.193

```
if (SomeObject.GetType().Assembly != typeof(int).Assembly)
{
    //SomeObject is defined as part of my program
}
else
{
    //SomeObject is a standard .Net type
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:16:04.653

您似乎想查看值类型或字符串。然后你可以使用： [Type.IsPrimitive](http://msdn.microsoft.com/en-us/library/system.type.isprimitive.aspx)属性

> 获取一个值，该值指示 Type 是否是基本类型之一。
> 
> 基本类型是 Boolean、Byte、SByte、Int16、UInt16、Int32、UInt32、Int64、UInt64、IntPtr、UIntPtr、Char、Double 和 Single。

```
int i = 10;
string str = "";
var isPrimitive = i.GetType().IsValueType || i is string; // returns true since i is value type
var isPrimitiveWithString = str.GetType().IsValueType || str is string; 
 // returns true

CustomClass obj = new CustomClass();
var isPrimitive3 = obj.GetType().IsPrimitive; // returns false 
```

# c# - 将启用浏览器的 InfoPath 表单重定向到自定义 URL

> ID：13819816
> 
> 赞同：1
> 
> 时间：2012-12-11T11:52:16.810
> 
> 标签：c#, sharepoint, sharepoint-2010, infopath, infopath2010

在我的 InfoPath 表单中，我有一个按钮，我想在点击时重定向到自定义 URL。我已经尝试过`Response.Redirect`，`Server.Transfer`但`SPUtilities.Redirect`它们都不起作用。

当我尝试

```
HttpContext.Response.Redirect("http://google.com", false); 
```

我的表单显示错误消息：严重错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:40:05.750

您在发布 InfoPath Forms Services 时无法重定向，但可以在您自己的 XmlFormView webpart 上托管启用浏览器的 InfoPath 表单，然后通知主机重定向。

这是我的解决方案：

您可以使用 XmlForm 类的 NotifyHost 方法将通知发送到表单模板的托管环境。
将以下代码添加到 Button 控件的 Clicked 事件处理程序：

```
NotifyHost("Redirect") 
```

**NotifyHost**方法引发**XmlFormView**控件的**NotifyHost**事件。 创建 VisualWebPart 项目并将**XmlFormView**控件添加到 VisualWebPart，必须添加

 ****`OnNotifyHost="XmlFormView1_NotifyHost"`

和

`XsnLocation="http://ServerName/FormServerTemplates/MyFormTemplate.xsn"`

到 XmlFormView1 的控件标记。以下代码显示了如何执行此操作：

```
<cc1:XmlFormView ID="XmlFormView1" runat="server" XsnLocation="http://ServerName/FormServerTemplates/MyFormTemplate.xsn" OnNotifyHost="XmlFormView1_NotifyHost" /> 
```

连接事件后，必须在 VisualWebPart 的代码隐藏中实现 XmlFormView1_NotifyHost 事件处理程序，如下所示：

```
protected void XmlFormView1_NotifyHost(object sender, NotifyHostEventArgs e)
{
    ...
} 
```

将 NotifyHost 事件连接到事件处理程序后，您可以在事件处理程序中编写代码来注册和执行 JScript 代码。

```
protected void XmlFormView1_NotifyHost(object sender, NotifyHostEventArgs e)
{
    if (e.Notification == "Redirect")
    {
        string jsCode = "window.location='http://www.google.com';";
        Page.ClientScript.RegisterStartupScript(typeof(string), "RedirectScript", jsCode, true);
    }
} 
```****

# actionscript-3 - AS3 在 as3 中找不到 gotoAndStop 影片剪辑实例的正确方法

> ID：13819818
> 
> 赞同：0
> 
> 时间：2012-12-11T11:52:31.383
> 
> 标签：actionscript-3, flash, flash-cs5, movieclip, displayobject

我有一个来自我的图书馆的电影剪辑“achtergrond”，我把它放在舞台上，功能如下：

```
function set_game ()
        {
            oefNr = 4;
            var bg:achtergrond = new achtergrond();
            bg.x = 0;
            bg.y = 0;
            bg.name = "bg";
            bg.gotoAndStop ("uit");
            addChild (bg);
            set_next ();
        } 
```

影片剪辑包含 2 帧“aan”和“uit”，它从帧“uit”开始。在我的游戏中，我想在播放声音时将帧设置为“aan”，如下所示：

```
 function playSnd ():void
    {
        getChildByName("bg").gotoAndStop("aan");
        snd = new Sound(new URLRequest("phonetic_" + curArr[curSnd] + ".mp3"));
        cnl = snd.play();
        cnl.addEventListener (Event.SOUND_COMPLETE, completeSnd);
    } 
```

但是对于我的生活，我找不到正确的方法来做到这一点。Flash 一直在讨论 displayObjects 和其他事情，我不知道为什么我不能处理我的影片剪辑。实际上，我有一个线索，但仅此而已。我还不太了解 Flash 的这一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:15:39.760

答案是，如果我尝试像这样访问我的剪辑： this["bg"] 或 getChildByName("bg") 我指的是*DisplayObject*。这没有*MovieClip*的所有方法，就像我在这种情况下需要的**gotoAndStop一样。**

我声明了一个新变量：

```
var movie:MovieClip; 
```

然后我将 DisplayObject 转换为 MovieClip 并将其放入 var *movie 中*：

```
function set_game ()
        {
            oefNr = 4;
            var bg:achtergrond = new achtergrond();
            bg.x = 0;
            bg.y = 0;
            bg.name = "bg";
            bg.gotoAndStop ("uit");
            addChild (bg);
            movie = this.getChildByName("bg") as MovieClip;
            set_next ();
        } 
```

现在我可以使用特定于 MovieClip 的方法，例如 gotoAndStop：

```
function playSnd ():void
    {
        movie.gotoAndStop("aan");
        snd = new Sound(new URLRequest("phonetic_" + curArr[curSnd] + ".mp3"));
        cnl = snd.play();
        cnl.addEventListener (Event.SOUND_COMPLETE, completeSnd);
    } 
```

受此答案启发的[答案](https://stackoverflow.com/a/2479041/1140472)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T13:15:39.560

```
bg.name = "bg"; 
```

实际上很多时候这段代码不能正常工作。因此，您应该获取“achtergrond”对象的真实实例名称，而不是设置名称，而不是使用此实例名称。

另一个解决方案：

我认为 achtergrond 是单个对象，那么为什么将它与“getChildByName”一起使用？像使用它`bg.gotoAndStop();`。

# c++ - 字节数组的字符与无符号字符

> ID：13819820
> 
> 赞同：11
> 
> 时间：2012-12-11T11:52:35.783
> 
> 标签：c++, gcc, c++11

存储“字节数组”（blob ...）时，使用`char`或存储`unsigned char`项目（`unsigned char`又名`uint8_t`）更好吗？（标准说`sizeof`两者都是 1 字节。）

这有关系吗？还是一种比另一种更方便或更流行？也许，像 Boost 这样的库使用什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T12:04:36.807

如果`char`是有符号的，那么对设置了高位的字节值执行算术运算将导致在提升为时进行符号扩展`int`；所以，例如：

```
char c = '\xf0';
int res = (c << 24) | (c << 16) | (c << 8) | c; 
```

将给出`0xfffffff0`而不是`0xf0f0f0f0`. 这可以通过用 屏蔽来避免`0xff`。

`char`如果您正在与使用它而不是`unsigned char`.

请注意，从`char *`to/from 转换`unsigned char *`始终是安全的 (3.9p2)。支持的一个哲学理由`unsigned char`是标准中的 3.9p4 支持它，至少在表示可以保存对象的内存表示的字节数组时：

> 类型对象的*对象表示*是类型对象占用的对象`T`序列，其中等于。`N` `unsigned char``T``N``sizeof(T)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:56:12.287

理论上，C++ 中字节的大小取决于编译器设置和目标平台，但保证至少为 8 位，这就解释了为什么`sizeof(uint8_t)`要求为 1。

以下是标准对它的更准确说法

*§1.71*

> C++ 内存模型中的基本存储单元是字节。一个字节至少大到足以包含基本执行字符集 (2.3) 的任何成员和 Unicode UTF-8 编码形式的八位代码单元，并且由连续的位序列组成，其数量为实现定义。最低有效位称为低位；最高有效位称为高位。C++ 程序可用的内存由一个或多个连续字节序列组成。每个字节都有一个唯一的地址。

因此，如果您正在处理一些字节不是 8 位的特殊硬件，它可能会产生实际的影响。否则，我会说这是一个品味问题，以及您想通过选择类型来传达什么信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-20T19:39:57.030

可能对 blob 使用有符号值的其他问题之一是该值将取决于符号表示，这不是标准的一部分。因此，调用未定义的行为更容易。

例如...

```
signed char x = 0x80;
int y = 0xffff00ff;

y |= (x << 8); // UB 
```

实际的算术值也将严格取决于二进制补码，这可能会给一些人带来惊喜。显式使用 unsigned 可以避免这些问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-11T12:03:58.917

尽管从可读性的角度来看，如果类型`unsigned char`暗示值 0..255 可能会更清楚，但实际上并没有什么区别。

# php - 从 MySQL 表创建一个 tsv 文件。添加更多虚构的标题

> ID：13819822
> 
> 赞同：1
> 
> 时间：2012-12-11T11:52:45.447
> 
> 标签：php, csv, export-to-csv

我有一个 MySQL 表，我从中创建 tsv 和 csv 文件。我想在向文件添加虚构标题的同时创建 tsv 文件。我已经使用 MySQL 列标题作为文件的标题，但我需要添加 MySQL 表中没有的额外虚构标题。我当前的代码创建了文件，但我不知道如何添加虚构的标题。

它输出

```
name    age address
Daniel  24  Carlifornia
Jane    22  New York 
```

我要输出

```
name    age address option1 option2
Daniel  24  Carlifornia anything    anything
Jane    22  New York    anything    anything 
```

这是我的代码：

```
@chmod($export_tsv, 0777);
$fe = @fopen($export_tsv."/export.tsv", "w+");
if($fe){           
    $somecontent = "";
    //$somecontent = "header('Content-type: text/html; charset=utf-8')";
    $fields_count = 0;

    // fields headers
    $db->query($sql_view);
    if($row = $db->fetchAssoc()){
        foreach($row as $key => $val){
            if($fields_count++ > 0) $somecontent .= "\t";
            // mysql column headers here
            $somecontent .= $key;
        }
    }
    $somecontent .= "\r\n"; 

    $db->query($sql_view);
    while($row = $db->fetchAssoc()){
        $fields_count = 0;
        foreach($row as $key => $val){
            if($fields_count++ > 0) $somecontent .= "\t";
            //my own special code start
            $val = str_replace("\n","", $val);
            $val = str_replace("\r","", $val);
            $val = str_replace("\t","", $val);

            $val = stripslashes($val);                    
            $val = str_replace("chr(13)","", $val);
            //my own special code end

            $somecontent .= $val;              
        }
        $somecontent .= "\r\n"; 
    }
    utf8_encode($somecontent);
    $somecontent = mb_convert_encoding($somecontent, 'HTML-ENTITIES', "UTF-8");

    // write some content to the opened file.
   if (fwrite($fe, utf8_encode($somecontent)) == FALSE)
       echo 'file_writing_error'." (export.tsv)"; 
   fclose($fe);           
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:55:27.777

也许您可以`AS`在 SQL 查询中使用关键字？

```
select something AS `new column name` FROM some_table 
```

# asp.net - 如何进行求和运算，不包括第一条记录

> ID：13819825
> 
> 赞同：0
> 
> 时间：2012-12-11T11:52:53.943
> 
> 标签：asp.net, mysql, linq

我的表包含“小时”字段。我的表中有多条记录。我想获取除第一条记录之外的所有“小时”字段的总数。我如何获得除第一条记录之外的所有记录的总和？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:56:00.590

您可以在 Linq 中使用 Skip() 方法。

> var totalHours = dataContext.TimeZones.Skip(1).Sum(x=>x.Hours);

# symfony - Symfony - 获取具有多个 ID 的实体存储库

> ID：13819831
> 
> 赞同：3
> 
> 时间：2012-12-11T11:53:04.113
> 
> 标签：symfony, doctrine-orm

我有一个具有多个键的实体，我将如何根据多个 id 找到合适的对象？

```
$product = $em->getRepository('AcmeStoreBundle:Product')->find($id); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T12:04:37.547

你在这里问什么有点令人困惑。听起来好像您有一个具有复合键的实体（主键与多个列相关）并且想根据它的主键值找到它，是吗？

如果是这样，该`find`方法将需要一个数组，其中包含组成键的每个字段的值：

```
$product = $em->getRepository('AcmeStoreBundle:Product')->find(array(
    'key1' => 'value1', 
    'key2' => 'value2'
)); 
```

或者，您可以使用`findOneBy`方法。当提供的字段组合不是唯一的时，这将很有用，因为您可以提供第二个参数来定义排序。

```
$product = $em->getRepository('AcmeStoreBundle:Product')->findOneBy(array(
    'key1' => 'value1', 
    'key2' => 'value2'
), array('updated_at' => 'DESC')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T11:55:52.323

请参阅[http://symfony.com/doc/2.0/book/doctrine.html#fetching-objects-from-the-database](http://symfony.com/doc/2.0/book/doctrine.html#fetching-objects-from-the-database)

```
$product = $em->getRepository('AcmeStoreBundle:Product')->findBy(
    array('key1' => 'value1', 'key2'=>'value2')
); 
```

# android - Google Maps Android API v2 - MarkerOptions 可拖动和可见的方法

> ID：13819832
> 
> 赞同：6
> 
> 时间：2012-12-11T11:53:05.093
> 
> 标签：android, android-mapview, android-maps, google-play-services, google-maps-android-api-2

我正在使用本月早些时候发布的新的 Google Maps Android API (v2)，我很高兴看到一个`MarkerOptions.draggable(boolean draggable)`我认为在传递`draggable`. `true`然而，在尝试它时（即在地图上添加一个标记），它似乎没有做任何事情。

该方法也是，`MarkerOptions.visible(boolean visible)`我认为在传递`visible`.`false`

任何人都能够让这些方法发挥作用？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-11T13:09:28.083

后一个问题已经在[Google Bug Tracker](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4677)中。

该`draggable`方法应该有效。查看提供的示例项目。也许在长按后开始拖动，就像在示例项目中一样？

```
 // Creates a draggable marker. Long press to drag.
    mMelbourne = mMap.addMarker(new MarkerOptions()
            .position(MELBOURNE)
            .title("Melbourne")
            .snippet("Population: 4,137,400")
            .draggable(true)); 
```

# node.js - 如何在 HTMLPage 中显示 node.js 输出

> ID：13819839
> 
> 赞同：2
> 
> 时间：2012-12-11T11:53:31.283
> 
> 标签：node.js, webmatrix

我正在使用 webmatrix 并构建 node.js 应用程序。我想将值从 node.js 传递给项目中的 HTMLPage。

> var http = require('http'); var URL = 要求('url');

```
http.createServer(function (req, res)
{
    res.writeHead(200, { 'Content-Type': 'text/html' });
    res.end('Hi man');

}).listen(process.env.PORT || 8080); 
```

使用该代码，我尝试了它给出了一个带有 hi man 的页面。它很明显。但我希望在我在项目中拥有的 html 页面中呈现它。如何达到。请对此提出一些建议..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:55:48.730

首先我推荐你使用[Expressjs](http://expressjs.com/)，它是一个 Nodejs 的框架。

那么我推荐你使用[EJS](http://embeddedjs.com/)，一个 Nodejs 的引擎模板。

当集成所有时，您可以使用类似于以下的代码：

```
...
app.set('views', __dirname + '/views');
app.register('.html', require('ejs'));
app.set('view engine', 'html');
app.use(express.static(__dirname + '/public'));
app.use(express.favicon(__dirname + '/public/img/favicon.ico', { maxAge: 2592000000 }));
app.use(expressValidator);
... 
```

和

```
...
app.get('/test', function(req, res){
    res.render('test', {msg: "Hello World"});
});
... 
```

最后在您的文件中**views/test.html**：

```
...
<div><%- msg %></div>
... 
```

我希望它有所帮助。

补充审查：

*   [http://utahjs.com/2010/09/25/nodejs-express-and-ejs-templates/](http://utahjs.com/2010/09/25/nodejs-express-and-ejs-templates/)
*   [在 node.js 中渲染 ejs 文件](https://stackoverflow.com/questions/8660659/render-ejs-file-in-node-js)
*   [Node.js - EJS 示例](https://stackoverflow.com/questions/4600952/node-js-ejs-example)

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:01:54.937

听起来您想使用 AJAX 请求您的 nodejs 服务器并将服务器的响应注入 HTML 元素。

查看：[http ://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

这是一个使用 jQuery 连接并从运行在不同主机的端口 8080 上的节点检索服务器响应的示例，并将其插入到 HTML 元素中。

* * *

节点：

```
var http = require('http');
var url = require('url');

http.createServer(function (req, res)
{
    //parse the url and query string from the request 
    var url_parts = url.parse(req.url, true);

    //if the callback query parameter is set, we return the string (or object)
    if(url_parts.query.callback){
        var str = "Hi man";
        res.writeHead(200, {'Content-Type':'text/html'});
        res.end(url_parsed.query.callback+'("'+str+'")');

    //if it's not set, let's return a 404 error
    }else{
        res.writeHead(404, { 'Content-Type': 'text/html' });
        res.end('404 Error');        
    }
}).listen(process.env.PORT || 8080); 
```

* * *

索引.html

```
<div id="my-div"></div>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
    $(function(){
        //getJSON and the callback paramater make us cross-domain capable.
        $.getJSON('http://myotherhost.com:8080/?callback=?', function(data){
            $("#my-div").html(data);
        });         
    });
</script> 
```

# spring-mvc - Json 动态视图 Spring MVC

> ID：13819848
> 
> 赞同：1
> 
> 时间：2012-12-11T11:53:53.703
> 
> 标签：spring-mvc, jackson, json-view

我是 Spring MVC 的新手，我想为每个请求使用 JasonViews (Jackson) 动态 JSON，我不想过多地更改我的控制器 .. 所以@marty 在他的博客中给了我一个很好的解决方案

[http://martypitt.wordpress.com/2012/11/05/custom-json-views-with-spring-mvc-and-jackson/](http://martypitt.wordpress.com/2012/11/05/custom-json-views-with-spring-mvc-and-jackson/)

问题是我需要控制 HTTP 状态代码，所以我的控制器返回类型 HttpResponse{T} 而不是 List{T} 我如何自定义代码以支持解析 HttpResponse{List{Book} 等类型}?

如果不可能，我可以在没有 HttpResponse 的情况下控制 Http 状态码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:03:18.233

我可能需要查看您的代码示例才能真正理解您的要求，但这*可能会*为您指明正确的方向：

获取@marty 的代码并尝试用它扩展 HttpEntityMethodProcessor。

[http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/HttpEntityMethodProcessor.htmlS](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/HttpEntityMethodProcessor.htmlS)

然后，您需要使您的方法签名看起来像

```
public ResponseEntity<MyType> getMyTypeWithControlOverResponseEntity(...) {...} 
```

您可以在以下位置找到有关此签名类型的更多信息：

[http://static.springsource.org/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-ann-httpentity](http://static.springsource.org/spring/docs/current/spring-framework-reference/htmlsingle/#mvc-ann-httpentity)

如果这不是您尝试的正确方向或需要更多帮助，请告诉我。=)

# android - 为什么在运行应用程序时，Android Logcat 中总是显示 GC_CONCURRENT FREED 和 GC_CONCURRENT ALLOCATE？

> ID：13819852
> 
> 赞同：11
> 
> 时间：2012-12-11T11:54:10.573
> 
> 标签：android, memory-management, memory-leaks, garbage-collection, android-logcat

我想知道为什么每次运行任何应用程序时都会出现以下消息。

`12-11 17:18:37.141: D/dalvikvm(3155): GC_CONCURRENT freed 485K, 9% free 6696K/7303K, paused 9ms+335ms`

`paused 9ms+335ms`由于这个暂停，我应该播放的音频丢失了，因为根据我的代码，它每次都会接收音频数据，`40ms`所以在这里它暂停了`9ms+335ms`这是`10 times`数据丢失

我知道它执行某种**垃圾收集**，但我的问题是它为什么经常出现在 logcat 中。

感谢您的任何帮助！！！！！！！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T12:37:49.203

Java 使用垃圾收集来防止内存不足，方法是删除不再被任何类引用且无法从代码中访问的对象。

如果你有太多这些对象，你会得到很多 GC 调用，这有时可能会影响你的性能。另一方面，拥有一直被引用的对象，可能会阻止 GC 被调用（内存泄漏）并且您的内存可能会填满并且您会得到一个`OutOfMemoryException`.

您的目标不是消除 GC，而是在对延迟敏感且在 UI 线程上运行的方法中尽可能减少它们（例如`onDraw()`, `getView()`, ... 例如）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T13:28:45.997

这是 Android 的正常行为。手机只是进行垃圾收集。有关更多信息，请查看精彩的 Google I/O 视频： [Google I/O 2011：Android 应用程序的内存管理](http://www.youtube.com/watch?v=_CruQY55HOk)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-20T10:50:30.630

伙计们，看看这些文档/链接，它与内存管理有关：

[http://static.googleusercontent.com/media/www.google.com/en//events/io/2011/static/presofiles/memory_management_for_android_apps.pdf](http://static.googleusercontent.com/media/www.google.com/en//events/io/2011/static/presofiles/memory_management_for_android_apps.pdf)

[http://eclipse.org/mat/](http://eclipse.org/mat/)

[http://therockncoder.blogspot.in/2012/09/fixing-android-memory-leak.html](http://therockncoder.blogspot.in/2012/09/fixing-android-memory-leak.html)

# android - 重新排列Framelayout android上的视图顺序

> ID：13819853
> 
> 赞同：3
> 
> 时间：2012-12-11T11:54:13.680
> 
> 标签：android

我在 frameLayout 上添加了五个视图。

如何重新排列framelayout的childIndex。

我使用下面的代码：

```
fromindex  = 3;
toindex    = 4;
View tempFrom = frameLayout.getChildAt(fromindex);
View tempTo   = frameLayout.getChildAt(toindex);
frameLayout.removeViewAt(fromindex)
frameLayout.removeViewAt(toindex)
frameLayout.addView(tempFrom, toindex)
frameLayout.addView(tempTo,fromindex) 
```

但它会引发以下错误。

```
java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
```

如何重新排列 framelayout 的 childindex ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T14:42:27.880

> 如何重新排列framelayout的childIndex。

The`FrameLayout`没有能力直接重新安排其孩子，但您可以通过删除这些孩子并将它们重新添加到正确的位置来做到这一点。您的代码不起作用，因为您以不正确的顺序删除视图导致视图仍附加到父级：

```
fromindex  = 3;
toindex    = 4;
View tempFrom = frameLayout.getChildAt(fromindex);
View tempTo   = frameLayout.getChildAt(toindex);
// first remove the view which is above in the parent's stack
// otherwise, if you remove the other child you'll call the `removeViewAt`
// method with the wrong index and the view which was supposed to be detached
// from the parent is still attached to it
frameLayout.removeViewAt(toindex);
frameLayout.removeViewAt(fromindex);
// first add the child which is lower in the hierarchy so you add the views
// in the correct order
frameLayout.addView(tempTo,fromindex)
frameLayout.addView(tempFrom, toindex) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:03:23.580

试试这个代码

```
frameLayout.removeView(tempFrom) //to remove views
frameLayout.removeView(tempTo) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:42:48.660

我认为你不能交换观点。您需要定义新的视图组并膨胀到他的父母并删除旧的。

```
View C = findViewById(R.id.C);
ViewGroup parent = (ViewGroup) C.getParent();
int index = parent.indexOfChild(C);
parent.removeView(C);
C = getLayoutInflater().inflate(optionId, parent, false);
parent.addView(C, index); 
```

# entity-framework - 实体框架 5\. 多重包含。这可能吗？

> ID：13819856
> 
> 赞同：6
> 
> 时间：2012-12-11T11:54:24.727
> 
> 标签：entity-framework

我正在尝试在我的存储库中创建一个多重包含方法以使用如下：

```
repository.Include<Post>(x => x.Images, x => x.Tags).First(x => x.Id == 1) 
```

我尝试了一些方法：

```
public IQueryable<T> Include<T>(params Expression<Func<T, Object>>[] paths) where T : class {
  return paths.Aggregate(_context.Set<T>(), (x, path) => x.Include(path));
} // Include 
```

但我得到了错误：

无法将类型“System.Linq.IQueryable”隐式转换为“System.Data.Entity.DbSet”。

请注意，原始包含如下：

public static IQueryable Include(this IQueryable source, Expression> path) where T : class;

我可以在不将存储库方法变为静态的情况下完成这项工作吗？

谢谢你，

米格尔

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T12:05:38.383

如果您真的想创建自己的`.Include`非扩展方法，允许在一次调用中使用多个路径，内部转换为已提供的`.Include`方法，您可以执行类似的操作

```
public IQueryable<T> Include<T>(params Expression<Func<T, object>>[] paths)
    where T : class
{
    IQueryable<T> query = _context.Set<T>();
    foreach (var path in paths)
        query = query.Include(path);
    return query;
} 
```

这与您已经拥有的非常接近，但避免了`Enumerable.Aggregate`您遇到的陷阱：如果您在我的版本中`IQueryable<T> query`替换为，您将遇到同样的问题。`var query`

请注意，使用许多`.Include`可能会损害性能。如果在您的情况下确实如此，您可以重写它以使用多个查询，您可以在事务中一个接一个地运行这些查询。

就个人而言，您可以在 any 上调用已经提供的`.Include`扩展方法 ( `using System.Data.Entity;`) `IQueryable`，我将其写为：

```
repository.Posts.Include(x => x.Images).Include(x => x.Tags).First(x => x.Id == 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T04:12:29.863

```
public ICollection<SomeClass> Filter(string name, int skip, int take,out int total, params Expression<Func<SomeClass, object>>[] includeProperties) {
      IQueryable<SomeClass> query = Session.All<SomeClass>().AsNoTracking();
      //query = includeProperties.Aggregate(query, (current, property) => current.Include(property));
      foreach (var property in includeProperties){
          query = query.Include(property);
      }

      if (!string.IsNullOrWhiteSpace(name)){
          query = query.Where(x => x.Name.Contains(name));
          var page = query.OrderBy(x => x.Name)
              .Skip(skip)
              .Take(take)
              .GroupBy(p => new{Total = query.Count()})
              .FirstOrDefault();
         total = (page != null) ? page.Key.Total : 0;
         if (page == null) {
            return new List<SomeClass>();
         }
         return  page.ToList();
      } else {
          var page = query.OrderBy(x => x.Name)
              .Skip(skip)
              .Take(take)
              .GroupBy(p => new { Total = query.Count() })
              .FirstOrDefault();
          total = (page != null) ? page.Key.Total : 0;
          if (page == null) {
             return new List<SomeClass>();
          }
          return page.ToList();
      }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-11T17:25:29.973

我想最短的方法如下：

```
public static class LinqExtensions
{
    /// <summary>
    /// Acts similar of .Include() LINQ method, but allows to include several object properties at once.
    /// </summary>
    public static IQueryable<T> IncludeMultiple<T>(this IQueryable<T> query, params Expression<Func<T, object>>[] paths)
        where T : class
    {
        foreach (var path in paths)
            query = query.Include(path);

        return query;
    }
} 
```

# compiler-construction - 是否存在所有已知目标三元组的列表？

> ID：13819857
> 
> 赞同：12
> 
> 时间：2012-12-11T11:54:27.583
> 
> 标签：compiler-construction, cross-compiling, autoconf

交叉编译工具时，您通常必须提供“目标三元组”。给出的例子

*   i686-pc-linux-gnu
*   arm-none-linux-gnueabi
*   powerpc-unknown-linux

等等...

这些三元组，有时实际上是四个组件，具有以下形式：

`<CPU>-<MANUFACTURER>[-<KERNEL>]-<OS>`

内核是可选的，制造商可以是“未知”或“无”，因为它通常不相关。

我还没有找到一个记录所有可能在此处使用的值的页面。我知道所有组件几乎都是“自由风格”，因此没有官方标准会强制您使用官方标准化列表中的组件。然而，工具设计者和配置脚本编写者希望用户将这些三元组指定到他们的工具/脚本中，因此他们必须牢记一些可能的值，并且应该有类似“非官方列表”工具制造者、脚本编写者和用户可以用作一个参考。

有没有人找到过这样的清单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T19:51:36.543

是的，在 libtool 源代码中有。它被称为[平台](http://git.savannah.gnu.org/cgit/libtool.git/tree/doc/PLATFORMS)。应该是不完整吧。还有一个名为的文件在运行`config.sub`时生成`autoreconf`。这些可能是最新/完整的。

但根据定义，你所要求的似乎是不可能的。如果某些制造商推出了新的“xyz”CPU，它暂时不会出现在列表中。

那么`configure`在这种情况下，编剧会做什么呢？我的解决方案如下。我已经`autoreconf`调用了一个名为的脚本，该脚本在[Goat Book](http://www.sourceware.org/autobook/)人`bootstrap.sh`所倡导的构建之前设置了一些东西。该脚本使用 sed（好吧，技术上是[GNU shtool](http://www.gnu.org/software/shtool/)中的 sed 包装脚本）在将其复制到 AC_CONFIG_AUX_DIR后插入我需要的内容。`config.sub``autoreconf`

幸运的是，`config.sub`文件带有时间戳，因此如果/当“xyz”被添加到“官方”列表中时，您只需测试时间戳即可。然后，您将新的“官方”添加`config.sub`到您的 tarball 并用于`bootstrap.sh`测试是否`autoreconf`正在编写足够近的`config.sub`. 如果它不够新，请用新的复制旧的。

# java - 比较文本框中的字符串

> ID：13819859
> 
> 赞同：0
> 
> 时间：2012-12-11T11:54:39.487
> 
> 标签：java

我想比较文本框中的字符串是否包含“per/kg”并使用它来禁用按钮。我尝试了几种方法，但都不起作用，请帮忙。

```
if (productDescTextBox.getText().equals("per/kg"))
    {
        buttonDot.setEnabled(true);
    }
    else buttonDot.setEnabled(false); 
```

和这个

```
if ("per/kg".equals(productDescTextBox.getText().toString()))
    {
        buttonDot.setEnabled(true);
    }
    else buttonDot.setEnabled(false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:56:11.160

使用[**String.contains(CharSequence)**](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)

```
if (productDescTextBox.getText().contains("per/kg")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:00:20.777

使用 string.contains。

```
if (productDescTextBox.getText().contains("per/kg")){
        //Whatever you want
} 
```

注意该方法区分大小写

# java - Cobertura、Enums 和 Switch 语句

> ID：13819862
> 
> 赞同：3
> 
> 时间：2012-12-11T11:55:13.003
> 
> 标签：java, junit, enums, switch-statement, cobertura

在我们公司，我们有 90% 的代码覆盖率要求。

运行 Cobertura 报告，我只得到 88.8% 的覆盖率，并且我看到以下 switch 语句突出显示：

```
public TopBrandPrefix getPrefix() {
     switch(brandParamType) {
         case TOP12SUCHAS_AND:
             return TopBrandPrefix.SUCHAS;
         case TOP12COMME_ET:
             return TopBrandPrefix.COMME;
         case TOP12WIE_UND:
             return TopBrandPrefix.WIE;
         default:
             return TopBrandPrefix.NULL;
     }
 } 
```

它报告了80％的覆盖率。brandParamType 是以下枚举类型：

```
public enum BrandParamType {

    TOP123,
    TOP456,
    TOP123LINKED,
    TOP456LINKED,
    TOP12,
    TOP12AND,
    TOP12SUCHAS_AND,
    TOP12COMME_ET,
    TOP12WIE_UND
} 
```

在我的单元测试中，我使用这些值中的每一个调用 getPrefix，那么为什么我在这里没有获得 100% 的分支覆盖率呢？

我正在运行的单元测试如下：

```
@Test
public void testGetPrefixWithTOP123() {
    TopBrandTouchpointParameterSource source = new TopBrandTouchpointParameterSource(urlComposer, TouchpointParameterHelper.BrandParamType.TOP123);
    TopBrandTouchpointParameterSource.TopBrandPrefix prefix = source.getPrefix();
    assertEquals(TopBrandTouchpointParameterSource.TopBrandPrefix.NULL, prefix);
}

@Test
public void testGetPrefixWithTOP456() {
    TopBrandTouchpointParameterSource source = new TopBrandTouchpointParameterSource(urlComposer, TouchpointParameterHelper.BrandParamType.TOP456);
    TopBrandTouchpointParameterSource.TopBrandPrefix prefix = source.getPrefix();
    assertEquals(TopBrandTouchpointParameterSource.TopBrandPrefix.NULL, prefix);
}

@Test
public void testGetPrefixWithTOP123LINKED() {
    TopBrandTouchpointParameterSource source = new TopBrandTouchpointParameterSource(urlComposer, TouchpointParameterHelper.BrandParamType.TOP123LINKED);
    TopBrandTouchpointParameterSource.TopBrandPrefix prefix = source.getPrefix();
    assertEquals(TopBrandTouchpointParameterSource.TopBrandPrefix.NULL, prefix);
}

@Test
public void testGetPrefixWithTOP456LINKED() {
    TopBrandTouchpointParameterSource source = new TopBrandTouchpointParameterSource(urlComposer, TouchpointParameterHelper.BrandParamType.TOP456LINKED);
    TopBrandTouchpointParameterSource.TopBrandPrefix prefix = source.getPrefix();
    assertEquals(TopBrandTouchpointParameterSource.TopBrandPrefix.NULL, prefix);
}

@Test
public void testGetPrefixWithTOP12() {
    TopBrandTouchpointParameterSource source = new TopBrandTouchpointParameterSource(urlComposer, TouchpointParameterHelper.BrandParamType.TOP12);
    TopBrandTouchpointParameterSource.TopBrandPrefix prefix = source.getPrefix();
    assertEquals(TopBrandTouchpointParameterSource.TopBrandPrefix.NULL, prefix);
}

@Test
public void testGetPrefixWithTOP12AND() {
    TopBrandTouchpointParameterSource source = new TopBrandTouchpointParameterSource(urlComposer, TouchpointParameterHelper.BrandParamType.TOP12AND);
    TopBrandTouchpointParameterSource.TopBrandPrefix prefix = source.getPrefix();
    assertEquals(TopBrandTouchpointParameterSource.TopBrandPrefix.NULL, prefix);
}

@Test
public void testGetPrefixWithTOP12SUCH_AS() {
    TopBrandTouchpointParameterSource source = new TopBrandTouchpointParameterSource(urlComposer, TouchpointParameterHelper.BrandParamType.TOP12SUCHAS_AND);
    TopBrandTouchpointParameterSource.TopBrandPrefix prefix = source.getPrefix();
    assertEquals(TopBrandTouchpointParameterSource.TopBrandPrefix.SUCHAS, prefix);
}

@Test
public void testGetPrefixWithTOP12COMME_ET() {
    TopBrandTouchpointParameterSource source = new TopBrandTouchpointParameterSource(urlComposer, TouchpointParameterHelper.BrandParamType.TOP12COMME_ET);
    TopBrandTouchpointParameterSource.TopBrandPrefix prefix = source.getPrefix();
    assertEquals(TopBrandTouchpointParameterSource.TopBrandPrefix.COMME, prefix);
}

@Test
public void testGetPrefixWithTOP12WIE_UND() {
    TopBrandTouchpointParameterSource source = new TopBrandTouchpointParameterSource(urlComposer, TouchpointParameterHelper.BrandParamType.TOP12WIE_UND);
    TopBrandTouchpointParameterSource.TopBrandPrefix prefix = source.getPrefix();
    assertEquals(TopBrandTouchpointParameterSource.TopBrandPrefix.WIE, prefix);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T13:37:59.323

运行一个非常相似的测试，我看到 100% 的覆盖率。但是，当我`mvn cobertura:cobertura`在代码更改后运行但没有`clean`. 尝试删除您的 Cobertura 状态。

# java - 加速文件读取

> ID：13819864
> 
> 赞同：2
> 
> 时间：2012-12-11T11:55:14.830
> 
> 标签：java, file, file-io, io, random-access

我有一个 1.7G 的文件，格式如下：

```
String Long String Long String Long String Long ... etc 
```

本质上，*String*是一个键，*Long*是哈希图中的一个值，我有兴趣在我的应用程序中运行其他任何内容之前对其进行初始化。

我目前的代码是：

```
 RandomAccessFile raf=new RandomAccessFile("/home/map.dat","r");
                raf.seek(0);
                while(raf.getFilePointer()!=raf.length()){
                        String name=raf.readUTF();
                        long offset=raf.readLong();
                        map.put(name,offset);
                } 
```

这需要大约 12 分钟才能完成，我相信有更好的方法可以做到这一点，所以我将不胜感激任何帮助或指示。

谢谢

* * *

**按照 EJP 建议更新？**

EJP 谢谢你的建议，我希望这就是你的意思。如果这是错误的，请纠正我

```
DataInputStream dis=null;
    try{
     dis=new DataInputStream(new BufferedInputStream(new FileInputStream("/home/map.dat")));
     while(true){
       String name=dis.readUTF();
       long offset=dis.readLong();
       map.put(name, offset);
     }
    }catch (EOFException eofe){
      try{
        dis.close();
      }catch (IOException ioe){
        ioe.printStackTrace();
      }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:59:18.027

1.  使用包裹在 FileInputStream 周围的 BufferedInputStream 的 DataInputStream。

2.  而不是每次迭代至少四个系统调用，检查长度和当前大小并执行谁知道要获得字符串和 long 的读取次数，只需调用 readUTF() 和 readLong() 直到收到 EOFException。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:09:16.923

我会构建文件，以便它可以就地使用。即不以这种方式加载。由于您有可变长度的记录，您可以构建每个记录位置的数组，然后按顺序放置键，以便您可以对数据执行二进制搜索。（或者您可以使用自定义哈希表）然后您可以使用隐藏数据实际存储在文件中而不是转换为数据对象的事实的方法包装它。

如果你做了所有这些，“加载”阶段就变得多余了，你就不需要创建这么多的对象了。

* * *

这是一个很长的例子，但希望能展示什么是可能的。

```
import vanilla.java.chronicle.Chronicle;
import vanilla.java.chronicle.Excerpt;
import vanilla.java.chronicle.impl.IndexedChronicle;
import vanilla.java.chronicle.tools.ChronicleTest;

import java.io.IOException;
import java.util.*;

public class Main {
    static final String TMP = System.getProperty("java.io.tmpdir");

    public static void main(String... args) throws IOException {
        String baseName = TMP + "/test";
        String[] keys = generateAndSave(baseName, 100 * 1000 * 1000);

        long start = System.nanoTime();
        SavedSortedMap map = new SavedSortedMap(baseName);
        for (int i = 0; i < keys.length / 100; i++) {
            long l = map.lookup(keys[i]);
//            System.out.println(keys[i] + ": " + l);
        }
        map.close();
        long time = System.nanoTime() - start;

        System.out.printf("Load of %,d records and lookup of %,d keys took %.3f seconds%n",
                keys.length, keys.length / 100, time / 1e9);
    }

    static SortedMap<String, Long> generateMap(int keys) {
        SortedMap<String, Long> ret = new TreeMap<>();
        while (ret.size() < keys) {
            long n = ret.size();
            String key = Long.toString(n);
            while (key.length() < 9)
                key = '0' + key;
            ret.put(key, n);
        }
        return ret;
    }

    static void saveData(SortedMap<String, Long> map, String baseName) throws IOException {
        Chronicle chronicle = new IndexedChronicle(baseName);
        Excerpt excerpt = chronicle.createExcerpt();
        for (Map.Entry<String, Long> entry : map.entrySet()) {
            excerpt.startExcerpt(2 + entry.getKey().length() + 8);
            excerpt.writeUTF(entry.getKey());
            excerpt.writeLong(entry.getValue());
            excerpt.finish();
        }
        chronicle.close();
    }

    static class SavedSortedMap {
        final Chronicle chronicle;
        final Excerpt excerpt;
        final String midKey;
        final long size;

        SavedSortedMap(String baseName) throws IOException {
            chronicle = new IndexedChronicle(baseName);
            excerpt = chronicle.createExcerpt();
            size = chronicle.size();
            excerpt.index(size / 2);
            midKey = excerpt.readUTF();
        }

        // find exact match or take the value after.
        public long lookup(CharSequence key) {
            if (compareTo(key, midKey) < 0)
                return lookup0(0, size / 2, key);
            return lookup0(size / 2, size, key);
        }

        private final StringBuilder tmp = new StringBuilder();

        private long lookup0(long from, long to, CharSequence key) {
            long mid = (from + to) >>> 1;
            excerpt.index(mid);
            tmp.setLength(0);
            excerpt.readUTF(tmp);
            if (to - from <= 1)
                return excerpt.readLong();
            int cmp = compareTo(key, tmp);
            if (cmp < 0)
                return lookup0(from, mid, key);
            if (cmp > 0)
                return lookup0(mid, to, key);
            return excerpt.readLong();
        }

        public static int compareTo(CharSequence a, CharSequence b) {
            int lim = Math.min(a.length(), b.length());
            for (int k = 0; k < lim; k++) {
                char c1 = a.charAt(k);
                char c2 = b.charAt(k);
                if (c1 != c2)
                    return c1 - c2;
            }
            return a.length() - b.length();
        }

        public void close() {
            chronicle.close();
        }
    }

    private static String[] generateAndSave(String baseName, int keyCount) throws IOException {
        SortedMap<String, Long> map = generateMap(keyCount);
        saveData(map, baseName);
        ChronicleTest.deleteOnExit(baseName);

        String[] keys = map.keySet().toArray(new String[map.size()]);
        Collections.shuffle(Arrays.asList(keys));
        return keys;
    }
} 
```

生成 2 GB 的原始数据并执行一百万次查找。它以这样一种方式编写，即加载和查找使用很少的堆。( << 1 MB )

```
ls -l /tmp/test*
-rw-rw---- 1 peter peter 2013265920 Dec 11 13:23 /tmp/test.data
-rw-rw---- 1 peter peter  805306368 Dec 11 13:23 /tmp/test.index

/tmp/test created.
/tmp/test, size=100000000
Load of 100,000,000 records and lookup of 1,000,000 keys took 10.945 seconds 
```

每次查找使用哈希表查找会更快，因为它是 O(1) 而不是 O(ln N)，但实现起来更复杂。

# android - 如何知道 ViewPager 在 android 中滚动了一半的屏幕

> ID：13819865
> 
> 赞同：15
> 
> 时间：2012-12-11T11:55:17.950
> 
> 标签：android, android-viewpager

我想知道`ViewPager`s View 是否滚动了一半屏幕？

当我拖动它时，如果它已经覆盖了一半的屏幕，我想改变页面。

例如，如果我在 MDPI 上进行测试，即屏幕宽度为 320 像素，并且如果我将 ViewPager 的页面拖动 160 像素，那么我想更改页面。

如何从 ViewPager 中获取视图覆盖的这半个距离？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-01T15:33:20.047

使用 OnPageChangeListener 的方法。如果用户滚动屏幕的一半以上，onPageScrolled 方法返回 positionOffset > 0.5。 [http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)

我假设您想在页面滚动一半屏幕时更新一些静态视图，而无需等待它滚动整个页面宽度。这是我使用 onPageScrolled 回调解决此问题的方法。

```
@Override
public void onPageScrolled( int position , float positionOffset , int positionOffsetPixels )
{
    if ( position == mCurrentSelectedScreen )
    {
        // We are moving to next screen on right side
        if ( positionOffset > 0.5 )
        {   
            // Closer to next screen than to current
            if ( position + 1 != mNextSelectedScreen )
            {
                mNextSelectedScreen = position + 1;
                updateStaticViewsForScreen( mNextSelectedScreen );
            }
        }
        else
        {
            // Closer to current screen than to next
            if ( position != mNextSelectedScreen )
            {
                mNextSelectedScreen = position;
                updateStaticViewsForScreen( mNextSelectedScreen );
            }
        }
    }
    else
    {
        // We are moving to next screen left side
        if ( positionOffset > 0.5 )
        {   
            // Closer to current screen than to next
            if ( position + 1 != mNextSelectedScreen )
            {
                mNextSelectedScreen = position + 1;
                updateStaticViewsForScreen( mNextSelectedScreen );
            }
        }
        else
        {
            // Closer to next screen than to current
            if ( position != mNextSelectedScreen )
            {
                mNextSelectedScreen = position;
                updateStaticViewsForScreen( mNextSelectedScreen );
            }
        }
    }
}

@Override
public void onPageSelected( int arg0 )
{
    updateStaticViewsForScreen( arg0 );
    mCurrentSelectedScreen = arg0;
    mNextSelectedScreen = arg0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-05T09:02:51.757

我同意之前的回答，但是当我在 ViewPager 上快速滑动和释放时，onPageSelected 将在 onPageScrolled 之前触发，它会调用 updateStaticViewsForScreen 3 次并查看闪烁。我通过记录 ViewPager 的状态来升级解决方案：

```
@Override
public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels )
{
    if(mCurrentPagerState != ViewPager.SCROLL_STATE_SETTLING) 
    {

          // one of previous code of onPageScrolled         

    }
}

@Override
public void onPageSelected( int position)
{

    // one of previous code of onPageSelected   

}

@Override
public void onPageScrollStateChanged(int state) {
    mCurrentPagerState = state;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-17T09:09:21.343

它可以在没有`mNextSelectedScreen`. 做你想做的事`setPage()`。

```
private int mCurrentPage;

@Override
public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

    if (position == mCurrentPage) {
        // It's gone to right.
        if (positionOffset > 0.5) {
            setPage(position + 1);
        }
        // Not yet.
        else {
            setPage(position);
        }
    } else {
        // It's gone to left.
        if (positionOffset < 0.5) {
            setPage(position);
        }
        // Not yet.
        else {
            setPage(position + 1);
        }
    }
}

@Override
public void onPageSelected(int position) {
    mCurrentPage = position;
    setPage(position);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T12:09:09.073

查看寻呼机上的 setonpagechangelistner 事件。

```
MyPagerAdapter adapter = new MyPagerAdapter(getApplicationContext());
            myPager = (ViewPager)findViewById(R.id.myfivepanelpager);
            myPager.setAdapter(adapter);
            myPager.setCurrentItem(0);
            myPager.setOffscreenPageLimit(7);
            myPager.setOnPageChangeListener(new MyPageChangeListener()); 
```

然后

```
private class MyPageChangeListener extends ViewPager.SimpleOnPageChangeListener {

        /* (non-Javadoc)
         * @see android.support.v4.view.ViewPager.SimpleOnPageChangeListener#onPageSelected(int)
         */
        @Override
        public void onPageSelected(int position) {
            focusedPage = position;

            switch (focusedPage) {
            case 0: 
                break;
            case 1:
                                 Break;
}
} 
```

在这里你可以得到你当前页面的位置。

# codeigniter - 根据 Grocery CRUD 中的第三个参数设置下拉输入默认值

> ID：13819867
> 
> 赞同：3
> 
> 时间：2012-12-11T11:55:24.393
> 
> 标签：codeigniter, drop-down-menu, grocery-crud

下面的代码示例，

```
function product($parameter){

   $crud = new grocery_CRUD();
   ...
   $crud->callback_add_field('dropdown_field_name',array($this,'_add_field_callback'));
   ...
   $output = $crud->render();
} 
```

我可以做这样的事情吗？

```
function _add_field_callback($parameter){
   //load db model
   //call the result and return as dropdown input field with selected selection when value = $parameter 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T23:41:25.543

Actually this is easy to do it by using the controller. For example you can simply do:

```
function product($parameter){

    $this->my_test_parameter = $parameter;

   $crud = new grocery_CRUD();
   ...
   $crud->callback_add_field('dropdown_field_name',array($this,'_add_field_callback'));
   ...
   $output = $crud->render();
} 
```

And the callback:

```
function _add_field_callback($parameter){
   //load db model
   //call the result and return as dropdown input field with selected selection when value = $parameter 

   $value = !empty($this->my_test_parameter) ? $this->my_test_parameter : '';
   ...
   //here you can also use the form_dropdown of codeigniter (http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html)
} 
```

I know that you are desperately looking forward for the default value for grocery CRUD so I added an issue to the github [https://github.com/scoumbourdis/grocery-crud/issues/138](https://github.com/scoumbourdis/grocery-crud/issues/138) . This is will be a reminder that this thing has to be fixed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:07:36.887

我在我的一个 Web 应用程序中实现了 Grocery Crud。

检查“如何创建依赖下拉菜单”上的此链接

[http://demo.edynamics.co.za/grocery_crud/index.php/examples/customers_management/add](http://demo.edynamics.co.za/grocery_crud/index.php/examples/customers_management/add)

# android - 从 Android 中的 css 调用 assets 文件夹

> ID：13819870
> 
> 赞同：0
> 
> 时间：2012-12-11T11:55:33.533
> 
> 标签：android, css, assets

我正在用 Android 写一个 CSS。我想使用 HelveticaNeue_Light 字体。此字体位于资产文件夹中。我正在做的是

```
body ="<HEAD><STYLE>.class1{color:gray;text-align:left;@font-face {font-family: HelveticaNeue_Light;src: url('file:///android_asset/HelveticaNeue_Light.ttf');};font-size:17px;}</STYLE><‌​/HEAD><BODY><div class=\"class1\"><P>"+TEXT+ '</P></BODY>" 
```

但它没有用。该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:06:18.557

因为你应该分开选择器

```
 <STYLE>
    .class1{color:gray;text-align:left;font-size:17px;}
    @font-face {font-family: HelveticaNeue_Light;src: url('file:///android_asset/HelveticaNeue_Light.ttf');}
  </STYLE> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:08:16.100

这就是我在我的 CSS 中的做法：

```
@font-face 
{
    font-family: MyFont;
    src: url("fonts/UniversLTStd-BoldObl.ttf")
} 
```

我的字体和 css 都在 assets 文件夹下。

# jquery - 在 Lemonstand CMS 系统上保持手风琴风格菜单打开

> ID：13819875
> 
> 赞同：1
> 
> 时间：2012-12-11T11:55:47.407
> 
> 标签：jquery, menu

所以我正在使用手风琴风格的菜单（我想这是正确的术语）。我认为这里的独特困难在于我正在使用 Lemonstand 的集成 CMS 系统，这是一种祝福和噩梦。我不确定有多少人会熟悉lemonstand 的 API 等等，但我想我会先在这里发帖寻求帮助。

我想要做的是在点击后保持“下拉”打开。使用的JS如下：

```
 <script>
function initMenu() {
  $('#menu ul').hide(); // Hide the submenu
  if ($('#menu li').has('ul')) $('#menu ul').prev().addClass('expandable'); // Expand/collapse a submenu when it exists  
  $('.expandable').click(function(e) { // Prevent Default
        e.preventDefault(); 
        $(this).next().slideToggle();
        $(this).toggleClass('expanded');
      }
    );
  }

// When document ready, call initMenu() function 
$(document).ready(function() {initMenu();}); </script> 
```

我敢肯定这很容易，但就 js 而言，我对整个事情还是很陌生。

```
<? $category_listing = isset($parent) ? $parent->list_children('front_end_sort_order') : Shop_Category::create()->list_root_children('front_end_sort_order'); ?>
<? if ($category_listing->count()): ?>
<? if (!isset($parent)): ?>

<nav>
<ul id="menu">
<? else: ?>
<ul>
<? endif ?>

<? foreach ($category_listing as $_category): ?>

<li<?= (isset($category) && $category->id == $_category->id) ? ' class="current"' : '' ?>>
<a href="<?= $_category->page_url('bifrost-sandbox/category') ?>"><?= h($_category->name) ?></a>
<? $this->render_partial('sandbox:temp', array('parent' => $_category)) ?>
</li>
<? endforeach ?>
</ul>
<? if (!isset($parent)): ?>
<nav>

<? endif ?>
<? endif ?> 
```

如果有人可以帮助我，我将不胜感激。

# php - Symfony1.0 中高分辨率图像的 Mime 类型验证失败

> ID：13819882
> 
> 赞同：0
> 
> 时间：2012-12-11T11:56:06.030
> 
> 标签：php, symfony1

Symfony1 mime 类型验证导致错误消息，因为它无法验证高分辨率图像。我在 validate.yml 中的验证代码如下：

```
mime_types:       
      - 'image/jpg'
      - 'image/jpeg'
      - 'image/png'
      - 'image/gif'
      - 'image/bmp' 
      - 'application/pdf'       
    mime_types_error: The allowed file extensions are:jpg, png, gif, bmp and pdf 
```

但是如果尝试上传大小为 2-3 MB 的高分辨率图像，它会抛出 mime 类型错误消息，如：

```
The allowed file extensions are:jpg, png, gif, bmp and pdf 
```

虽然文件类型属于.jpg。谁能告诉我这是一个 symfony1 sfvalidator 错误吗？我该如何克服呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:04:17.550

您是否尝试过正常的 sfValidatorFile ？它在我的 sf1.4 应用程序中经常使用，我从来没有遇到任何问题。

```
$this->setWidget('file', new sfWidgetFormInputFile(array()));
$this->setValidator('file', new sfValidatorFile(array(
        'required'  => true,
        'path'      => sfConfig::get("sf_upload_dir").'/images',
        'max_size' => 5120000,
        'mime_types' => array('image/jpeg','image/pjpeg','image/png','image/x-png')
    ),
    array(
        'max_size' => 'Your file is too big',
        'mime_types' => 'This type of file is not allowed',
        'required' => 'Please choose a file'
    )
)); 
```

在您想要的表单类中使用它并自定义“mime_types”。

如果这不起作用，您可以尝试使用[Imagick](http://php.net/manual/en/imagick.identifyimage.php)。我希望这有帮助！

# c# - 正则表达式在空格之间查找一个或多个单词

> ID：13819886
> 
> 赞同：3
> 
> 时间：2012-12-11T11:56:17.557
> 
> 标签：c#, regex

我想在空格之间的句子中找到单词。所以直到搜索词前后第一个空格的词

`This is anexampleof what I want`如果`anexampleof`我的搜索词是`example`

我现在有了这个正则表达式`"(?:^|\S*\s*)\S*" + searchword + "\S*(?:$|\s*\S*)"`，但这在开头和结尾给了我一个额外的词。'这是我想要的一个例子'-->返回'是一个例子'

我试图更改正则表达式，但我一点也不擅长。我使用的是 c#。感谢您的帮助。

完整的 C# 代码：

```
MatchCollection m1 = Regex.Matches(content, @"(?:^|\S*\s*)\S*" + searchword + @"\S*(?:$|\s*\S*)",
                              RegexOptions.IgnoreCase | RegexOptions.Multiline); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:59:52.747

您可以简单地在最后省略非捕获组：

```
@"\S*" + searchword + @"\S*"; 
```

由于贪婪，您将在每一侧获得尽可能多的非空格字符。

此外，非捕获组的想法不是，它们不包括在匹配中。他们所做的只是不产生子匹配的捕获。如果您想检查是否有某些内容，但不将其包含在匹配中，则需要[环视](http://www.regular-expressions.info/lookaround.html)：

```
@"(?<=^|\S*\s*)\S*" + searchword + @"\S*(?=$|\s*\S*)" 
```

然而，在这种情况下，这些外观并没有真正做任何事情，因为`\s*\S*`对空字符串感到满意（因为`*`这两个字符都是可选的）。但只是为了进一步参考......如果你想在你的比赛边界做出断言，这不应该是比赛的一部分......环顾四周是要走的路。

# hadoop - Mahout RecommenderJob 未收敛

> ID：13819887
> 
> 赞同：2
> 
> 时间：2012-12-11T11:56:19.960
> 
> 标签：hadoop, mahout, mahout-recommender

这是我的第一个 SO 帖子，所以如果我错过了任何重要的事情，请告诉我。我是 Mahout/Hadoop 初学者，正在尝试组合一个分布式推荐引擎。

为了模拟在远程集群上的工作，我在我的机器上设置了 hadoop 以与同样位于我的机器上的 Ubuntu VM（使用 VirtualBox）通信，该机器上安装了 hadoop。此设置似乎运行良好，我现在尝试在（非常！）小型试验数据集上运行 Mahout 的“RecommenderJob”作为测试。

输入由一个`.csv`文件（保存在 hadoop dfs 上）组成，其中包含大约 50 个用户首选项，格式为：`userID, itemID, preference`... 我正在运行的命令是：

```
hadoop jar /Users/MyName/src/trunk/core/target/mahout-core-0.8-SNAPSHOT-job.jar org.apache.mahout.cf.taste.hadoop.item.RecommenderJob -Dmapred.input.dir=/user/MyName/Recommendations/input/TestRatings.csv -Dmapred.output.dir=/user/MyName/Recommendations/output -s SIMILARITY_PEARSON_CORELLATION 
```

where`TestRatings.csv`是包含首选项的文件，并且`output`是所需的输出目录。

起初，这项工作看起来运行良好，我得到以下输出：

```
12/12/11 12:26:21 INFO common.AbstractJob: Command line arguments: {--booleanData=[false], --endPhase=[2147483647], --maxPrefsPerUser=[10], --maxPrefsPerUserInItemSimilarity=[1000], --maxSimilaritiesPerItem=[100], --minPrefsPerUser=[1], --numRecommendations=[10], --similarityClassname=[SIMILARITY_PEARSON_CORELLATION], --startPhase=[0], --tempDir=[temp]}
12/12/11 12:26:21 INFO common.AbstractJob: Command line arguments: {--booleanData=[false], --endPhase=[2147483647], --input=[/user/Naaman/Delphi/input/TestRatings.csv], --maxPrefsPerUser=[1000], --minPrefsPerUser=[1], --output=[temp/preparePreferenceMatrix], --ratingShift=[0.0], --startPhase=[0], --tempDir=[temp]}
12/12/11 12:26:21 INFO jvm.JvmMetrics: Initializing JVM Metrics with processName=JobTracker, sessionId=
12/12/11 12:26:21 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
12/12/11 12:26:22 INFO input.FileInputFormat: Total input paths to process : 1 
12/12/11 12:26:22 WARN snappy.LoadSnappy: Snappy native library not loaded
12/12/11 12:26:22 INFO mapred.JobClient: Running job: job_local_0001
12/12/11 12:26:22 INFO mapred.Task:  Using ResourceCalculatorPlugin : null
12/12/11 12:26:22 INFO mapred.MapTask: io.sort.mb = 100
12/12/11 12:26:22 INFO mapred.MapTask: data buffer = 79691776/99614720
12/12/11 12:26:22 INFO mapred.MapTask: record buffer = 262144/327680
12/12/11 12:26:22 INFO mapred.MapTask: Starting flush of map output
12/12/11 12:26:22 INFO compress.CodecPool: Got brand-new compressor
12/12/11 12:26:22 INFO mapred.MapTask: Finished spill 0
12/12/11 12:26:22 INFO mapred.Task: Task:attempt_local_0001_m_000000_0 is done. And is in the process of commiting
12/12/11 12:26:22 INFO mapred.LocalJobRunner:
12/12/11 12:26:22 INFO mapred.Task: Task 'attempt_local_0001_m_000000_0' done.
12/12/11 12:26:22 INFO mapred.Task:  Using ResourceCalculatorPlugin : null
12/12/11 12:26:22 INFO mapred.ReduceTask: ShuffleRamManager: MemoryLimit=1491035776, MaxSingleShuffleLimit=372758944
12/12/11 12:26:22 INFO compress.CodecPool: Got brand-new decompressor
12/12/11 12:26:22 INFO compress.CodecPool: Got brand-new decompressor
12/12/11 12:26:22 INFO compress.CodecPool: Got brand-new decompressor
12/12/11 12:26:22 INFO compress.CodecPool: Got brand-new decompressor
12/12/11 12:26:22 INFO compress.CodecPool: Got brand-new decompressor
12/12/11 12:26:22 INFO mapred.ReduceTask: attempt_local_0001_r_000000_0 Thread started: Thread for merging on-disk files
12/12/11 12:26:22 INFO mapred.ReduceTask: attempt_local_0001_r_000000_0 Thread started: Thread for merging in memory files
12/12/11 12:26:22 INFO mapred.ReduceTask: attempt_local_0001_r_000000_0 Thread waiting: Thread for merging on-disk files
12/12/11 12:26:22 INFO mapred.ReduceTask: attempt_local_0001_r_000000_0 Need another 1 map output(s) where 0 is already in progress
12/12/11 12:26:22 INFO mapred.ReduceTask: attempt_local_0001_r_000000_0 Thread started: Thread for polling Map Completion Events
12/12/11 12:26:22 INFO mapred.ReduceTask: attempt_local_0001_r_000000_0 Scheduled 0 outputs (0 slow hosts and0 dup hosts)
12/12/11 12:26:23 INFO mapred.JobClient:  map 100% reduce 0%
12/12/11 12:26:28 INFO mapred.LocalJobRunner: reduce > copy >
12/12/11 12:26:31 INFO mapred.LocalJobRunner: reduce > copy >
12/12/11 12:26:37 INFO mapred.LocalJobRunner: reduce > copy > 
```

但是最后三行无限期地重复（我把它留了一夜......），两行：

```
12/12/11 12:27:22 INFO mapred.ReduceTask: attempt_local_0001_r_000000_0 Need another 1 map output(s) where 0 is already in progress
12/12/11 12:27:22 INFO mapred.ReduceTask: attempt_local_0001_r_000000_0 Scheduled 0 outputs (0 slow hosts and0 dup hosts) 
```

每十二行重复一次。

我不确定我的输入是否有问题，或者试验数据的微小尺寸是否把事情搞砸了。任何有关解决此问题的最佳方法的帮助和/或建议将不胜感激。

ps 我试图按照[https://www.box.com/s/041rdjeh7sny128r2uki的说明进行操作](https://www.box.com/s/041rdjeh7sny128r2uki)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:04:48.910

这确实是 Hadoop 或集群问题。它正在等待未到来的映射器输出。在映射阶段查找较早的故障。

# android - 方法编译错误以检查服务是否正在运行

> ID：13819890
> 
> 赞同：0
> 
> 时间：2012-12-11T11:56:30.920
> 
> 标签：android, service, compiler-errors, syntax-error

我发现了一些代码可以告诉您您的服务是否正在运行。但它出现编译错误，我不知道为什么。我的服务类名称是 AudioService（扩展服务的类），我在 if 语句代码行中遇到编译错误，它说，

`AudioService.equals(service.service.getClassName())`并且来自编译器的错误消息是，

> 无法从类型 object 对非静态方法 equals(object) 进行静态引用

我正在使用绑定到服务的 Activity 内部的方法。我`bindService()`在`onResume`方法和`unbindService()`onPause 中调用。只是想使用某种方法制作一个 Toast 消息以表明该服务正在实际运行。

我做错了什么以及如何使此代码正常工作？

```
private boolean isServiceRunning() {
    ActivityManager manager = (ActivityManager)getSystemService(ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
        if (AudioService.equals(service.service.getClassName())) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:04:05.670

尝试这个

```
 public boolean isMyServiceRunning(Context context) {
    ActivityManager manager = (ActivityManager) context
            .getSystemService(Context.ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager
            .getRunningServices(Integer.MAX_VALUE)) {
        if ("com.application.MyService"
                .equals(service.service.getClassName())) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:06:03.670

用这个`AudioService.class.getName()`

```
 private boolean isServiceRunning() {
  ActivityManager manager = (ActivityManager)getSystemService(ACTIVITY_SERVICE);
  for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
    if (AudioService.class.getName().equals(service.service.getClassName())) {
      return true;
    }
  }
  return false;
} 
```

# php - 将数据插入 MySQL 数据库（无数据）

> ID：13819892
> 
> 赞同：0
> 
> 时间：2012-12-11T11:56:33.243
> 
> 标签：php, mysql

我想使用php将值保存在数据库中，我没有错误，但是数据库是空的，它没有保存数据。

我放了 if 语句来检查之前保存的值是否

请检查我的代码

请帮我

```
<?php
$submit = $_POST['submit'];
$sid  = strip_tags($_POST['sid']);
$Desc = strip_tags($_POST['Desc']);    
if ($submit) {
    // open data base
    $connet = mysql_connect("localhost", "root", "hahaha1");
    mysql_select_db("senior");        
    $sensorcheck = mysql_query("SELECT sid FROM availblesensors WHERE sid='$sid'");
    $count       = mysql_num_rows($sensorcheck);
    if ($count != 0) {
        die("You add this Sensor ID before!");
    }        
    if ($sid && $Desc) {
        mysql_query("INSERT INTO availblesensors ('$sid','$Desc')");
        // success 
        die("You have add new sensor Successfully !! <a href='admin.php'>click here to return to admin page</a> or Here to
 <a href='gotoaddsensor.php'>add new sensor</a>");
    } else {
        echo "<h3><font color='red'>Please fill in <b>all</b> feilds!</font></h3>";
    }        
}
?>

<form action="gotoaddsensor.php" method="post" class="one">

<div class="info">

    <center><div>Please add availble sensors with a few description of it if you need</div></center><br/>
</div>

                <div><b><label for="sid">Sensor ID</label>:</b>
                <input name="sid" value="" id="sid" type="text" size="15"/> </div>
    <br />
                <div><b><label for="password">Description</label>:</b>
                <input name="Desc" value="" id="Desc" type="text" size="40"/></div>
    <br />

            <div id="login-button">
            <input  name="submit"  type="submit" value="submit"  />
                            <input type="reset" value="clear" />
 </div>

    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:27:11.487

代码有一点小错误。通过以下代码更改。

```
mysql_query("INSERT INTO availblesensors ('$sid','$Desc')"); 
```

取而代之

```
 mysql_query("INSERT INTO availblesensors values ("'.$sid.'","'.$Desc.'")"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:04:58.400

查询将是

```
mysql_query("INSERT INTO availblesensors VALUES ('$sid','$Desc')"); 
```

不是

```
mysql_query("INSERT INTO availblesensors ('$sid','$Desc')");` 
```

您在查询中错过了`VALUES`关键字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T12:06:36.557

你的sql语句是错误的..

```
mysql_query("INSERT INTO availblesensors ('$sid','$Desc')"); 
```

您是说 $id 和 $Desc 是可用传感器中的列，您应该在实际值之前添加 VALUES

```
mysql_query("INSERT INTO availblesensors VALUES ('$sid','$Desc')"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T12:55:28.867

这是所需的更改

```
$connet = mysql_connect("localhost", "root", "hahaha1");
mysql_select_db("senior", $connet);        
$sensorcheck = mysql_query("SELECT sid FROM availblesensors 
                                       WHERE sid='$sid'",$connet);
$count = mysql_num_rows($sensorcheck);
if ($count != 0) {
    die("You add this Sensor ID before!");
}        
if ($sid && $Desc) {
    mysql_query("INSERT INTO availblesensors ('$sid','$Desc') 
                                       VALUES('Sensor Id','Sensor Desc')", $connet); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T12:03:35.933

将这些行更改为：

```
if ($sid && $Desc) {
    if(!mysql_query("INSERT INTO availblesensors values ('$sid','$Desc')")) {
        die(mysql_error());
    }  
} else {
    echo "<h3><font color='red'>Please fill in <b>all</b> feilds!</font></h3>";
} 
```

这样你就可以看到它给你的错误（如果有的话）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T12:07:09.677

查询应该是

```
mysql_query("INSERT INTO availblesensors VALUES (' ".$sid." ',' ".$Desc." ')"); 
```

不是

```
mysql_query("INSERT INTO availblesensors ('$sid','$Desc')"); 
```

# c# - 添加图像后EPPlus错误，值不能为空，参数名称：contentType

> ID：13819896
> 
> 赞同：0
> 
> 时间：2012-12-11T11:56:47.560
> 
> 标签：c#, excel, epplus

我已经使用创建了一个 excel 文件`EPPlus`并且一切正常，直到我尝试将图像添加到我的工作表并收到错误消息

> （值不能为空，参数名称：contentType）

在以下行中：

```
package.Workbook.Worksheets.Add("MasterPackingList", createPackingListExcel(dt)); 
```

当下面的代码部分被删除时，它可以工作

```
System.Drawing.Image logo = System.Drawing.Image.FromFile(Server.MapPath("~/Images/")+"PLLogo_Nestle.png");
var addedLogo = worksheet.Drawings.AddPicture("Logo", logo); 
```

以下是我向用户提供 excel 的方式：

```
Response.Clear();
Response.AddHeader("content-disposition", "attachment;  filename=file.xlsx");
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
Response.BinaryWrite(package.GetAsByteArray());
Response.End(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:44:50.687

一切都是正确的，但是当一个方法（在我的例子中是 createPackingListExcel）返回工作表时，就会发生这个神秘的错误。

因此，我没有返回工作表，而是将我的包作为参数发送给函数，并让工作表添加到函数 createPackingListExcel 中的包中，然后错误就消失了。有趣的...

# sql - 使用函数作为表名

> ID：13819898
> 
> 赞同：0
> 
> 时间：2012-12-11T11:56:47.747
> 
> 标签：sql, database, function, postgresql

我有一组 4 个表，其中包含一些数据的不同分区。我还有一个 plpgsql 函数，它将接受一个 id 并将包含该数据的表的名称作为“字符变化”返回。

但是，当我尝试使用此功能从正确的表中进行选择时，例如

```
SELECT f.a FROM getTable(someID) AS f; 
```

它似乎不起作用。它不会在 SELECT 上抛出错误，但它也不会返回我期望的字段（即它说 fa 不存在）。

**如何从表名由函数返回给出的表中选择数据？**

我正在使用 PostgreSQL 9.1。这将运行数百万条记录，因此我不想将其作为两个单独的调用进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:18:21.287

我认为对于主题中描述的问题，您应该对表使用[**继承**](http://www.postgresql.org/docs/9.1/static/ddl-partitioning.html)。

回答问题 - 使用***执行***：

```
execute "SELECT f.a FROM " || getTable(someID) || " AS f"; 
```

# objective-c - Core Data“使用原始数据类型的标量属性”复选框

> ID：13819901
> 
> 赞同：54
> 
> 时间：2012-12-11T11:56:54.660
> 
> 标签：objective-c, core-data

`NSManagedObject`在创建对象期间，何时应检查“对原始数据类型使用标量属性” ？
我会花多少钱（我的数据库会提高性能还是更轻量级）？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-11T15:23:02.187

在 iOS 5 和 OSX 10.7 之前，标量属性无法自动生成，您必须添加 setter 和 getter 实现，这会导致一些损失。自动生成的属性得到优化。我不知道有任何其他处罚。

标量和非标量属性在 DB 中由相同的类型表示，因此 DB 的大小不会发生变化。 

您应该根据访问这些属性的方式来选择何时使用标量。例如，如果要将标量属性添加到集合（NSArray、NSSet、NSDictionary）中，则需要将标量属性包装在可可对象中。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-04-22T05:48:37.523

> Core Data 支持许多常见的数据类型，如整数、浮点数、布尔值等。但是，默认情况下，数据模型编辑器将这些属性生成为`NSNumber`托管对象子类中的属性。这通常会导致在应用程序代码中对这些对象进行无休止`floatValue`的 、`boolValue`、`integerValue`或类似调用。`NSNumber`
> 
> 但是我们也可以只使用正确的标量类型来指定这些属性，例如 as `int64_t`、`float_t`或`BOOL`，并且它将适用于 Core Data。Xcode 甚至在生成器的保存对话框中有一个小复选框`NSManagedObject`（“为原始数据类型使用标量属性”），它会为您完成此操作。

来源：[objc.io - 数据模型和模型对象](http://www.objc.io/issue-4/core-data-models-and-model-objects.html)

# apache - htaccess 重定向被 rewriteengine 忽略

> ID：13819915
> 
> 赞同：0
> 
> 时间：2012-12-11T11:57:28.053
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我有一个 htaccess 问题，我认为它可能非常简单（愚蠢？），以前没有人问过。我从使用 html 页面转换为 php，并且在大多数情况下，以下工作有效：

```
<IfModule mod_rewrite.c>
 Options +FollowSymlinks
 RewriteEngine on
 RewriteRule ^(.+)\.htm$ /htmlrewrite.php?page=$1 [R=301,NC,L]
</IfModule> 
```

不过有几个例外，所以我假设：

```
Redirect 301 /oldpage.htm http://example.com/newpage.php 
```

在 IfMofule... 上方可以解决问题，但事实并非如此。除非我删除其余代码，否则“重定向 301”将被忽略。有人可以告诉我我做错了什么吗？

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:15:37.900

Apache 首先处理 mod_rewrite (Rewrite*)，然后处理 mod_alias (Redirect)。

用于`RewriteCond`防止 /oldpage.htm 被 mod_rewrite 处理。

```
RewriteCond %{REQUEST_URI} !^/oldpage\.htm$
RewriteRule ^(.+).htm$ /htmlrewrite.php?page=$1 [R=301,NC,L] 
```

或使用`RewriteRule`代替`Redirect`.

```
RewriteRule ^oldpage\.htm$ http://example.com/newpage.php [L,R=301]
RewriteRule ^(.+).htm$ /htmlrewrite.php?page=$1 [R=301,NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:15:46.927

您同时使用 mod_rewrite 和 mod_alias 并且它们都被应用到同一个 URL。您应该坚持使用 mod_rewrite 或 mod_alias。

mod_rewrite：（删除`Redirect`指令）

```
<IfModule mod_rewrite.c>
 Options +FollowSymlinks
 RewriteEngine on
 RewriteRule ^oldpage.htm$ http://example.com/newpage.php [R=301,L]
 RewriteRule ^(.+)\.htm$ /htmlrewrite.php?page=$1 [R=301,NC,L]
</IfModule> 
```

mod_alias：（删除`<IfModule mod_rewrite.c>`块中的所有内容：

```
Options +FollowSymlinks
Redirect 301 /oldpage.htm http://example.com/newpage.php
RedirectMatch 301 ^/(.+)\.htm$ /htmlrewrite.php?page=$1 
```

# imagemagick - Ghoshscript 错误：错误：/rangecheck in --.dicttomark--

> ID：13819917
> 
> 赞同：-1
> 
> 时间：2012-12-11T11:57:38.050
> 
> 标签：imagemagick, ghostscript, docsplit

我正在尝试使用 ghoshscript 转换图像中的 pdf。

PDF是： http: [//www.coppernet.zm/MPLS.pdf](http://www.coppernet.zm/MPLS.pdf)

```
$ sudo docsplit images -o /tmp/previews -p 1-5 -s 150,750,1000 -f png MPLS.pdf 
While reading gs_cidfm.ps:
Error: /rangecheck in --.dicttomark--
Operand stack:
   (gs_cidfm.ps)   1   --nostringval--   1   Arial   --dict:4/4(G)--
Execution stack:
   %interp_exit   --nostringval--   --nostringval--   --nostringval--   %array_continue   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push   --nostringval--   --nostringval--   --nostringval--
Dictionary stack:
   --dict:956/1123(G)--   --dict:0/20(G)--   --dict:64/200(L)--   --dict:956/1123(G)--       --dict:8/14(G)--   --dict:1/1(G)--
Current allocation mode is global
Current file position is 4622
Unrecoverable error: undefined in .uninstallpagedevice
Operand stack:
    gs_cidfm.ps  1  --nostringval--  1  Arial  --nostringval--
gm convert: "gs" "-q" "-dBATCH" "-dMaxBitmap=50000000" "-dNOPAUSE" "-sDEVICE=pnmraw" "- dTextAlphaBits=4" "-dGraphicsAlphaBits=4" "-r150x150" "-dFirstPage=1" "-dLastPage=1" " sOutputFile=/tmp/d20121211-1674-zs83qu/gme03xr0" "--" "/tmp/d20121211-1674-zs83qu/gmcjhLqq" "-c" "quit".
gm convert: Postscript delegate failed (MPLS.pdf). 
```

[我试着应用这个： http](http://thomas-genin.com/ghostscript-convert-error-undefined-in-findresource/) ://thomas-genin.com/ghostscript-convert-error-undefined-in-findresource/它会产生这个错误。

**编辑：**如果我删除`/var/lib/ghostscript/fonts/cidfmap`文件，我就没有错误了。

```
1 /Arial << /FileType /TrueType /Path (/usr/share/fonts/truetype/msttcorefonts/arial.ttf) /SubfontID 0 /CSI [(Artifex) (Unicode) 0] >> ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:23:08.640

你没有说你使用的是什么版本的 Ghostscript，并且因为你使用的是执行 Ghostscript 的东西，所以你没有给我一个我可以实际尝试的命令行。

但是，假设错误中的 (ImageMagick?) 命令行是正在使用的命令行，我使用当前代码的副本将您的 PDF 文件渲染到 PNM 没有问题，所以我怀疑这个问题已经解决，我会推荐您升级到当前版本。

如果这不能解决问题，那么您应该在[http://bugs.ghostscript.com](http://bugs.ghostscript.com)打开一个错误报告，请在此处附上 PDF 文件，并提供一个演示问题的 Ghostscript 命令行。

# .net - 用线程解析和阅读？

> ID：13819920
> 
> 赞同：0
> 
> 时间：2012-12-11T11:57:46.033
> 
> 标签：.net, vb.net, parsing, file-io, multithreading

我有很多大小很大的文件。它们都需要解析，并且需要很长时间。所以，我想出了一个想法：当一个线程读取文件时（硬盘的读取速度是这里的瓶颈），另一个线程应该从行中解析所需的信息，并且在解析发生时，文件读取线程应该去下一个文件等等。

我只需创建两个线程，一个通过 File.ReadAllLines 读取所有文件，另一个线程解析返回的数组。但是，这会消耗大量内存。因此，例如，我需要将读取的文件数限制为 5。

我遇到的另一个问题是等待获取行过程完成。解析线程应该知道是否有准备解析数组。

问题是，我应该遵循什么方法？有没有这样的例子（我找不到）？还是有更好的主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:29:42.987

我有一个非常相似的应用程序并使用 BlockingCollection

[BlockingCollection 概述](http://msdn.microsoft.com/en-us/library/dd997371%28v=vs.100%29.aspx)

在我的情况下，解析比读取快，但我遇到的问题是文件大小不同，因此读取可能正在等待解析。
使用 BlockingCollection，队列大小为 8 管理大小差异并检查内存。
如果解析速度较慢，您还可以将解析设置为并行。
如果您从单个头读取，则并行读取将无济于事。

```
static void Main(string[] args)
{
    // A blocking collection that can hold no more than 5 items at a time.
    BlockingCollection<string[]> fileCollection = new BlockingCollection<string[]>(5);

    // Start one producer and one consumer.
    Task.Factory.StartNew(() => NonBlockingConsumer(fileCollection));  // parse - can use parallel
    Task.Factory.StartNew(() => NonBlockingProducer(fileCollection));  // read
} 
```

解析的本质是什么？
您一次解析一行？
在并行解析文件之前，我会查看行的并行解析。
[Parallel.ForEach 方法](http://msdn.microsoft.com/en-us/library/ee835497.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:44:03.897

如果您确定解析总是比读取快，您可以非常简单地做到这一点：线程 A（只是一个不阻塞 UI 线程的线程）读取文件，然后启动一个新线程 B 并将文件内容传递给它（使用任务而不是线程更容易）。把它放到一个循环中，你就完成了。由于解析速度更快，第二个线程/任务将在线程 A 启动新线程之前完成。因此，您将只有两个线程同时运行，并且同时在内存中运行 2 个文件。

> 等待获取线过程完成。解析线程应该知道是否有准备解析数组。

不确定我是否理解正确，但这将通过上述“解决方案”来解决。因为您总是启动一个新的线程/任务，何时且仅当文件已被完全读取时。

更新：如果处理不是（总是）比阅读快，你可以这样做，例如：

```
Private MaxTasks As Integer = 4

Private Async Sub ReadAndProcess(ByVal FileList As List(Of String))

    Dim ProcessTasks As New List(Of Task)

    For Each fi In FileList
        Dim tmp = fi
        Console.WriteLine("Reading {0}", tmp)
        Dim FileContent = Await Task.Run(Of Byte())(Function() As Byte()
                                                        Return File.ReadAllBytes(tmp)
                                                    End Function)
        If ProcessTasks.Count >= MaxTasks Then
            Console.WriteLine("I have to wait!")
            Dim NextReady = Await Task.WhenAny(ProcessTasks)
            ProcessTasks.Remove(NextReady)
        End If

        Console.WriteLine("I can start a new process-task!")
        ProcessTasks.Add(Task.Run(Sub()
                                      Console.WriteLine("Processing {0}", tmp)
                                      Dim l As Long
                                      For Each b In FileContent
                                          l += b
                                      Next
                                      System.Threading.Thread.Sleep(2000)
                                      Console.WriteLine("Done with {0}", tmp)
                                  End Sub))
    Next

    Await Task.WhenAll(ProcessTasks)

End Sub

Private Async Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

    Dim ofd As New OpenFileDialog
    ofd.Multiselect = True
    If ofd.ShowDialog = Windows.Forms.DialogResult.OK AndAlso ofd.FileNames.Count >= 1 Then
        ReadAndProcess(ofd.FileNames.ToList)
    End If

End Sub 
```

这个想法（通常可以在 .Net 中以 4 种方式实现）很简单，您可以安排新的处理任务，直到达到您自己设定的限制。如果达到这一点，您“等待”直到任务准备好并开始新的任务。

UPDATE2：使用 TPL lib 它可能看起来像：

```
Private Sub Doit()

    Dim ABProcess As New ActionBlock(Of Tuple(Of String, Byte()))(Sub(tp)
                                                                      Console.WriteLine("Processing {0}", tp.Item1)
                                                                      Dim l As Long
                                                                      For Each el In tp.Item2
                                                                          l += el
                                                                      Next
                                                                      System.Threading.Thread.Sleep(1000)
                                                                      Console.WriteLine("Done with {0}", tp.Item1)
                                                                  End Sub, New ExecutionDataflowBlockOptions With {.MaxDegreeOfParallelism = 4, .BoundedCapacity = 4})

    Dim ABRead As New ActionBlock(Of String())(Async Sub(sarr)
                                                   For Each s In sarr
                                                       Console.WriteLine("Reading {0}", s)
                                                       Dim t = New Tuple(Of String, Byte())(s, File.ReadAllBytes(s))
                                                       Dim taken = Await ABProcess.SendAsync(t)
                                                       Console.WriteLine("Output taken = {0}", taken)
                                                   Next
                                                   Console.WriteLine("All reading done")
                                               End Sub)

    Dim ofd As New OpenFileDialog
    ofd.Multiselect = True
    If ofd.ShowDialog = Windows.Forms.DialogResult.OK Then
        ABRead.Post(ofd.FileNames)
    End If

End Sub 
```

哪个版本“更好”......可能是个人口味；）我个人可能更喜欢“手动”版本，因为新的 TPL 块有时非常黑箱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:19:51.677

根据所需的处理，您*可以*通过拆分任务来提高性能。整个过程听起来类似于生产者/消费者设置。

您可能需要查看[Blocking Queue](https://stackoverflow.com/questions/530211/creating-a-blocking-queuet-in-net)以对处理进行排队。这个想法是让读取线程排队项目，并让处理线程出列和处理项目。

# c# - 从网络驱动器上运行的桌面应用程序请求权限失败

> ID：13819923
> 
> 赞同：1
> 
> 时间：2012-12-11T11:57:51.023
> 
> 标签：c#, wcf, exception, permissions, code-access-security

从 .NET 4 桌面应用程序打开 WCF 客户端时会引发以下异常。这似乎只发生在我们的一个客户端安装中：

`Request for the permission of type 'System.Net.WebPermission, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed`

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:32:19.983

有趣的是，这是来自 CruiseControl 的另一个（未回答的）SO：[.Net 4 CAS - Request for the permission of type 'System.Net.WebPermission, System, Version=4.0.0.0, Action: Demand](https://stackoverflow.com/questions/8222420/net-4-cas-request-for-the-permission-of-type-system-net-webpermission-syste)。这有可能最终成为骗局；但这目前是不公平的，因为尚未得到答复。

这似乎类似于 3.5 sp1 之前的网络安全问题，从网络位置运行的应用程序将通过 CAS 被拒绝许多权限。

我认为这篇博客文章可能会提供解决方案，但如果可执行文件本身是从远程位置加载的，它可能不适用（检查第一个解决方案）[http://www.damirscorner.com/CodeAccessSecurityStrikesBackInNET4.aspx](http://www.damirscorner.com/CodeAccessSecurityStrikesBackInNET4.aspx)

虽然，还查看[Exploring the .Net Framework 4 Security Model](http://msdn.microsoft.com/en-us/magazine/ee677170.aspx)（它提供与上述博客文章相同的解决方法）它可能不适用，因为它意味着从网络位置运行的非托管 Exes 默认情况下应该完全受信任 - 显然你的不是！

如果这不起作用，要尝试的一件事是使 exe（以及扩展它的所有引用）具有强名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:01:04.367

阅读了 Andras 的答案并检查了我们提供给客户的其他一些应用程序后，app.config 文件中的以下代码似乎*可以*对问题进行排序（因为它存在于我们的其他应用程序中，但不是我们遇到问题的应用程序）：

```
<configuration>
  <runtime>
    <loadFromRemoteSources enabled="true" />
  </runtime>
</configuration> 
```

# java - 将菜单栏上的菜单助记符从默认的 Alt 更改为 Ctrl？

> ID：13819925
> 
> 赞同：1
> 
> 时间：2012-12-11T11:57:51.250
> 
> 标签：java, mnemonics

我想使用 Ctrl 而不是 Alt 作为菜单栏上菜单的助记符。我认为它涉及使用 setAccelerator。

```
formatMenu.setMnemonic(KeyEvent.VK_F);
sizeMenu.setMnemonic(KeyEvent.VK_X);
styleMenu.setMnemonic(KeyEvent.VK_Z); 
```

这是初始化代码，它允许我打开菜单，但仅当我使用 Alt 时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:13:04.877

尝试使用

```
formatMenu.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_F, ActionEvent.CTRL_MASK)); 
```

编辑：除非 formatMenu 是 JMenuItem，否则这将不起作用；对于 JMenu，本地似乎不支持设置加速器（至少我没有找到任何结果）。一种解决方法是为菜单实现 get/setAccelerator ，就像在这个[SO 答案](https://stackoverflow.com/questions/12909851/how-to-set-an-accelerator-for-a-jmenu-sub-menu)中一样（对于子菜单已经完成，但您可以修改以满足您的需要）。

所以只要做一些像那里接受的答案一样的事情：

```
 JMenu formatMenu = new JMenu("Format Menu") {
           private KeyStroke accelerator;

           @Override
            public KeyStroke getAccelerator() {
                return accelerator;
            }

            @Override
            public void setAccelerator(KeyStroke keyStroke) {
                KeyStroke oldAccelerator = accelerator;
                this.accelerator = keyStroke;
                repaint();
                revalidate();
                firePropertyChange("accelerator", oldAccelerator, accelerator);
            }
            };
            formatMenu.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_F, KeyEvent.CTRL_MASK)); 
```

# javascript - 阻止javascript函数访问DOM

> ID：13819926
> 
> 赞同：2
> 
> 时间：2012-12-11T11:57:54.060
> 
> 标签：javascript, multithreading

有谁知道是否可以阻止 JavaScript 函数访问 DOM？

更多信息：

我正在尝试为 JavaScript 创建一个“线程”对象，例如使用 Worker 对象，在不可用时使用 setTimeOut。显然工作人员无法访问 DOM，我想保持这个标准。

更多信息：

一种可能但丑陋的可能解决方案（我刚才想通了）：

```
function test(document, window)
{

} 
```

*但是没有什么能阻止开发人员从他在此函数中调用的另一个函数访问 dom - 而且您必须列出参数的世界。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:59:29.423

不，这在普通的浏览器环境中是不可能的。

你也许可以`document.getElementById`在调用函数之前替换一些东西，然后再恢复它......但我相信有办法解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:01:23.063

[您可以在Web Worker](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)中执行该功能。Web Worker 无法访问 DOM。

但实际上，你想达到什么目的？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T12:44:37.033

由于您的目标是强制执行约定而不是完全将 JavaScript 沙箱化，因此您确实可以使用带有 的函数`window`，`document`以及在本地隐藏的其他 DOM 接口，然后评估第三方脚本：

```
(function test(window, self, top, document) {
    'use strict'; 
    eval(untrustedCode);
}()); 
```

当然，他们仍然可以访问真正的全局对象，但至少不能直接访问。

# ios - 带有 RKXMLReaderSerialization 和 XMLReader 的 RestKit 0.20-pre3

> ID：13819929
> 
> 赞同：1
> 
> 时间：2012-12-11T11:58:11.617
> 
> 标签：ios, xcode, restkit

我正在尝试将**RestKit 0.20-pre3**与**RKXMLReaderSerialization**和**XMLReader**一起使用，以便从 WebService 映射 XML 响应，如下所示：

```
<ArrayOfAddressBookItem xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
<AddressBookItem>
<CommonName>xxxxxxxxxx</CommonName>
<OU>xxxxxx</OU>
<Name>xxxxxx</Name>
<LastName>xxxxxxxxxx</LastName>
<Service>xxxxxxxxxx</Service>
<Email>xxxxxxxxxxxx</Email>
<InternalPhoneNumber>xxxxxxxxxxx</InternalPhoneNumber>
<ExternalPhoneNumber>xxxxxxxxxxx</ExternalPhoneNumber>
<Mobile>xxxxxxxxxxx</Mobile>
<Street>xxxxxxxxxxx</Street>
<PostalCode>xxxxxxxxxxx</PostalCode>
<City>xxxxxxx</City>
<County>xxxxxxxxx</County>
<SupervisorCommonName>
xxxxxxxxxxxxx
</SupervisorCommonName>
<SupervisorLastName>xxxxxxxxxx</SupervisorLastName>
</AddressBookItem>
<AddressBookItem>
<CommonName>yyyyyyyyyyyy</CommonName>
<OU>
yyyyyyyyyyyyy
</OU>
<Name>yyyyyyyyy</Name>
<LastName>yyyyyyyy</LastName>
<Service>yyyyyyyyyy</Service>
<Email>yyyyyyyyyy</Email>
<InternalPhoneNumber>yyyyyyyyy</InternalPhoneNumber>
<ExternalPhoneNumber>yyyyyyyy</ExternalPhoneNumber>
<Street>yyyyyyyyyyy</Street>
<PostalCode>yyyyyy</PostalCode>
<City>yyyyyy</City>
<County>yyyyyyyy</County>
<SupervisorCommonName>
yyyyyyyyyyy
</SupervisorCommonName>
<SupervisorLastName>yyyyyy</SupervisorLastName>
</AddressBookItem>
<AddressBookItem>
....
</AddressBookItem>
<AddressBookItem>
</ArrayOfAddressBookItem> 
```

在应用委托代码中：

```
[RKMIMETypeSerialization registerClass:[RKXMLReaderSerialization class] forMIMEType:@"application/xml"];
AFHTTPClient *httpClient = [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://thehostaddress/mywebserviceurl/"]];
httpClient.parameterEncoding = AFFormURLParameterEncoding;
RKObjectManager *objManager = [[RKObjectManager alloc] initWithHTTPClient:httpClient];

[objManager setAcceptHeaderWithMIMEType:RKMIMETypeTextXML];
objManager.requestSerializationMIMEType = RKMIMETypeTextXML;

RKObjectMapping *personMapping = [RKObjectMapping mappingForClass:[PersonItem class]];
[personMapping addAttributeMappingsFromDictionary:@{@"CommonName" : @"commonName", @"OU" : @"ou", @"Name" : @"name", @"LastName" : @"lastName", @"Service" : @"service", @"Email" : @"eMail", @"InternalPhoneNumber" : @"internalPhoneNumber", @"ExternalPhoneNumber" : @"externalPhoneNumber", @"Mobile" : @"mobilePhoneNumber", @"Street" : @"street", @"PostalCode" : @"postalCode", @"City" : @"city", @"County" : @"county", @"SupervisorCommonName" : @"supervisorCommonName", @"SupervisorLastName" : @"supervisorLastName"}];

RKResponseDescriptor *peopleResponse = [RKResponseDescriptor responseDescriptorWithMapping:personMapping pathPattern:@"/mywebserviceurl/" keyPath:@"ArrayOfAddressBookItem" statusCodes:[NSIndexSet indexSetWithIndex:200]];

[objManager addResponseDescriptor:peopleResponse]; 
```

稍后，当我想获取对象时：

```
[objManager getObjectsAtPath:@"/mywebserviceurl/" parameters:nil
                     success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                     NSLog(@"SUCCESS: %@", mappingResult);
                     _items = [[mappingResult array] mutableCopy];
                 }
                 failure:^(RKObjectRequestOperation *operation, NSError *error) {
                     NSLog(@"ERROR: %@", error);
                 }]; 
```

我可以看到映射器获得了正确数量的 Array 元素，但是对于对象的每个字段，我无法检索值：

```
2012-12-10 19:02:53.370 GenPeople2[14240:1703] T restkit.object_mapping:RKMappingOperation.m:341 Mapping attribute value keyPath 'CommonName' to 'commonName' 
2012-12-10 19:02:53.370 GenPeople2[14240:1703] T restkit.object_mapping:RKMappingOperation.m:228 Found transformable value at keyPath 'CommonName'. Transforming from type '__NSDictionaryM' to 'NSString' 
2012-12-10 19:02:53.371 GenPeople2[14240:1703] T restkit.object_mapping:RKMappingOperation.m:360 Skipped mapping of attribute value from keyPath 'CommonName to keyPath 'commonName' -- value is unchanged ((null)) 
```

我的对象中的结果是空值。

我看到 XML 解析器给了我这个：

```
2012-12-10 19:02:53.371 GenPeople2[14240:1703] D restkit.object_mapping:RKMapperOperation.m:218 Asked to map source
 object {
     City =     {
         text = thecity;
     };
     CommonName =     {
         text = thename;
     };
     County =     {
         text = thecounty;
     }; 
```

等等....

如何正确映射值以允许 RestKit 检索 NSDictionary 中每个字段的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:16:23.653

感谢 Richard 的反馈，但它没有按我的意愿工作。真的很简单：在源对象中使用嵌套的键路径来映射，就像一个魅力：

```
RKObjectMapping *abItemMapping = [RKObjectMapping mappingForClass:[AddressBookItem class]];
[abItemMapping addAttributeMappingsFromDictionary:@{@"CommonName.text" : @"commonName", @"OU.text" : @"ou", @"Name.text" : @"name", @"LastName.text" : @"lastName", @"Service.text" : @"service", @"Email.text" : @"email"}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:29:14.527

我将元素的子节点映射为它们自己的对象。因此，例如 OU 将由它自己的映射和关系表示：

```
RKObjectMapping *baseValueMapping = [RKObjectMapping mappingForClass:[CHRValue class]];
[baseValueMapping addAttributeMappingsFromDictionary:@{@"text" : @"value"}];

RKRelationshipMapping *ouRelation = [RKRelationshipMapping relationshipMappingFromKeyPath:@"OU" toKeyPath:@"ou" withMapping:baseValueMapping];

RKRelationshipMapping *nameRelation = [RKRelationshipMapping relationshipMappingFromKeyPath:@"Name" toKeyPath:@"name" withMapping:baseValueMapping];

[addressBookMapping addPropertyMapping:ouRelation];
[addressBookMapping addPropertyMapping:nameRelation]; 
```

其中 CHRValue 有一个名为“value”的属性，它是一个 NSString。请注意，您需要使用“文本”来引用节点的值。

# excel - 如何根据 Excel 中的日期范围设置值？

> ID：13819932
> 
> 赞同：0
> 
> 时间：2012-12-11T11:58:35.400
> 
> 标签：excel, vba, excel-formula

我想根据到达和离开日期设置值：

```
Idx    Arrive    Depart    01\. Jan    02\. Jan    03\. Jan    04\. Jan    05\. Jan    ...
 1     01\. Jan   04\. Jan      1          1          1
 2     02\. Jan   04\. Jan                 1          1
 3     02\. Jan   05\. Jan                 1          1          1          
 4     01\. Jan   05\. Jan      1          1          1          1          
 5     03\. Jan   05\. Jan                            1          1
...    ...       ...         ...        ...        ...        ...        ...      ...

                 Total        2          4          5          3 
```

例如，Idx 1：

1 月 1 日抵达 1 月 4 日出发 总共需要 3 晚住宿（1 月 1 日、02 日和 1 月 3 日列中的值为“1”）您会注意到 1 月 4 日列中没有输入“1”，因为这是出发日期，当晚不需要住宿。

如何在 Excel 中存档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:10:07.337

假设*Arrive*在 A 列中并且列标题（*Arrive*、*Depart*、*01\. Jan*）在第 1 行，您希望将以下公式放入单元格 C2 中：

```
=IF(AND(C$1>=$A2,C$1<$B2),1,"") 
```

从那里，您可以将公式复制到其他单元格中。该公式假定左侧和顶部的日期是正确的数据值，即 Excel 将它们视为日期。

# jquery - 根据父身高设置 UL 最小高度

> ID：13819939
> 
> 赞同：0
> 
> 时间：2012-12-11T11:59:06.047
> 
> 标签：jquery, html, navigation, e-commerce, css

基本上，我们有一个分为 3 个级别的商店类别导航。我们需要做的是让 UL 的高度至少延伸到其孩子的高度。

所以比如说**#nav ul**是600px，**#nav ul ul**会自动变成至少600px。但是，如果**#nav ul ul ul**是 750px，那么它需要能够达到那么高，而不是被限制为 600px。

我们可以得到它，如果父级为 600px，所有子级都设置为 600px 的 .height，但是你如何将其设置为 min-height？

例如见链接：

如您所见，第二级调整为父级的高度，但第三级被限制为该长度，因为 js 设置了高度，而不是 min-height

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:24:50.267

您无法检索隐藏元素的尺寸。结果将是高度和宽度为零。您可以使用 css 将子 UL 位置设置为屏幕外，而不是隐藏它们，例如：

```
 ul ul {position: absolute; left: 80px; top: -999em}
 ul li:hover > ul {top:0;} 
```

由于它们没有隐藏，因此您的`setAllToMaxHeight()`方法有效

演示：http: [//jsfiddle.net/bzsM9/18/](http://jsfiddle.net/bzsM9/18/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:04:33.550

只需使用`.css('min-height', someHeight)`而不是`.height(someHeight)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:08:32.233

我不明白你想要什么，但我可以做我能做的；）

```
$(document).ready( function() {
var i1 = 600;
var i2 = $("#nav ul ul").height();
var i3 = $("#nav ul ul ul").height();
if(i2 >= i1) {
$("#nav ul ul").css({ 'min-height':'600px' });
}
if(i3 >= i1) {
$("#nav ul ul ul").css({ 'min-height':'600px' });
}
}); 
```

**没有downvoting啊，如果它是错的**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T12:18:06.987

是你要找的吗？ [演示](http://jsfiddle.net/bzsM9/17/)

```
$(document).ready(function(){
    $('ul').hover(function(){
         $('ul').setAllToMaxHeight();
    });
});​ 
```

# c#-3.0 - excel数据上传在sql数据库中不起作用

> ID：13819940
> 
> 赞同：0
> 
> 时间：2012-12-11T11:59:10.163
> 
> 标签：c#-3.0

这是虔诚的

这是excel上传到sql数据库的代码

protected void btnupload_Click（对象发送者，EventArgs e）{

```
 //string name = ddloutlet.SelectedValue.ToString ();
  //cal
   try
   {

       System.IO.FileInfo file = new System.IO.FileInfo(fileupload1.PostedFile.FileName);
       string fname = file.Name.Remove((file.Name.Length - file.Extension.Length), file.Extension.Length);
       fname = fname + DateTime.Now.ToString("_ddMMyyyy_HHmmss") + file.Extension;
       fileupload1.PostedFile.SaveAs(Server.MapPath("locations/") + fname);
       string filexetion = file.Extension;
       if ( filexetion == ".xlsx" )
       {
          excelConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;" + "Data Source=" + Server.MapPath ( "locations/" ) + fname + ";" + ";Extended Properties=\"Excel 12.0;HDR=YES;\"";
       }
       else if ( filexetion == ".xls" )
       {
          excelConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source=" + Server.MapPath ( "locations/" ) + fname + ";" + "Extended Properties=\"Excel 8.0;HDR=Yes; \"";
       }
       OleDbConnection connection = new OleDbConnection(excelConnectionString);
       OleDbCommand command = new OleDbCommand("Select * FROM [Sheet1$]", connection);
       connection.Open();
       OleDbDataReader dr = command.ExecuteReader();
       SqlConnection conn = new SqlConnection(strconnection);
       conn.Open();
       try
       {
           if (dr.Read() == true)
           {
               while (dr.Read())
               {
                   string locationname = dr["Location Name"].ToString();
                   string status = dr["Status"].ToString();
                   if (locationname != "" && status != "")
                   {
                       string query = " select locationname from tbllocations where locationname='" + locationname + "' and outletid='" + Session["outlet_id"].ToString() + "'";
                      // conn.Open();
                       SqlCommand cmdquery = new SqlCommand(query, conn);
                      SqlDataReader drreader;
                      drreader = cmdquery.ExecuteReader();
                       if (drreader.Read())
                       {

                           c = true;
                           ssss = ssss + locationname + ",";
                          // ss = ssss.Split(',');
                       }
                       else
                       {
                           drreader.Close();
                           string qryprduct = "insert into tbllocations(locationname,status,outletid,cityid)values('" + locationname + "','" + status + "','" + Session["outlet_id"].ToString() + "','" + Session["cityid"].ToString() + "')";
                           SqlCommand cmd1 = new SqlCommand(qryprduct, conn);
                           conn.Close();
                           conn.Open();
                           cmd1.ExecuteNonQuery();
                           lblerror1.Visible = true;
                           lblerror1.Text = "Locations uploaded Sucess";
                           //conn.Close();
                       }
                       drreader.Close();
                   }
               }
               // connection.Close (); conn.Close ();
           }
           else
           {
               lblerror1.Text = "There is a empty excel sheet file,plz check";
               lblerror1.Visible = true;
           }
       }
       catch (Exception ex)
       {
           lblerror1.Visible = true;
           lblerror1.Text = "Plz check the excel file formate";
       }
       finally
       {
           connection.Close(); conn.Close();
           bind();
           if (c == true)
           {
               lblerror1.Visible = true;
               lblerror1.Text = "In excel this loactions are already exist. Please check,";
               //for (int i = 0; i < ss.Length; i++)
               //{
                   lblerror3.Visible = true;
                   lblerror3.Text = ssss;
               //}
           }
       }
   }
   catch
   {
   } 
```

}

上面的代码上传工作，但在 excel 第一条记录没有上传，请告诉我是什么问题，请给我建议。

excel数据是

位置名称 状态 test1 1 test2 1 test3 1 test4 0 test5 1 test6 0 test7 1 test8 0 test9 1 test10 1

谢谢

普拉迪普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:07:13.077

您需要删除

```
if (dr.Read() == true) 
```

因为它紧随其后的是

```
while (dr.Read()) 
```

其中每一个都将读取一条记录，第一个将跳过文件的第一行

# python - python列出通过*导入的所有导入模块，pythonic方式

> ID：13819945
> 
> 赞同：0
> 
> 时间：2012-12-11T11:59:25.650
> 
> 标签：python, dynamic, import, extension-methods

假设我有一个包“colorExtentions”，并且在我的包中`__init__.py`有`__all__=["red", "blue"]`. 这个包应该能够通过将模块添加到目录和`__all__`列表来自动扩展。以下是可以接受的还是对于此类事情是否有另一种“最佳实践”？

```
import colorExtentions
from colorExtentions import *

for moduleName in colorExtentions.__all__:
    colors.append(moduleName)
promptUserToChoose(colors) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T12:12:04.033

假设每种颜色都是一个类，我认为更好的解决方案是确保您的所有颜色都来自一个类（无论如何这是一个好的设计）：

```
class Color:
    ... 
```

然后，当您想要所有颜色的列表时，您可以简单地导入任何包含这些类的模块，然后执行以下操作：

```
from colorExtentions import *

colors = Color.__subclasses__() 
```

这样，您最终会得到每个`Color`子类的列表。

请注意，在 2.x 中，您将需要新样式的类（继承自`object`）才能使用该`__subclasses__()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:10:46.307

在 Python 官方文档中不鼓励从模块中导入所有名称。看：

[http://docs.python.org/2/howto/doanddont.html#from-module-import](http://docs.python.org/2/howto/doanddont.html#from-module-import)

引用：

> 什么时候就好了
> 
> 在某些情况下 from module import * 就可以了：
> 
> *   交互式提示。例如，from math import * 使 Python 成为一个了不起的科学计算器。
> *   在 Python 中使用 > 模块扩展 C 中的模块时。
> *   当模块将自己宣传为 from import * safe 时。

如果您坚持使用`__all__`- 使用其他名称，例如`color_list`，并动态扩展该变量。然后导入该变量：

```
import colorExtentions
from colorExtentions import color_list

colors.extends(color_list) 
```

# macos - Mac Terminal - 打开终端时如何摆脱“找不到 Bash Alias”的通知？

> ID：13819948
> 
> 赞同：-2
> 
> 时间：2012-12-11T11:59:28.467
> 
> 标签：macos, bash, terminal, alias

在遵循有关某些 php 框架的多个教程时，我在终端中输入了一些命令，但并没有真正理解我在做什么（主要是创建别名......）。我的问题是，当我现在启动终端时，我写了一些奇怪的东西，但我不知道如何摆脱这些东西。我知道这很模糊，但是当尝试在其他帖子、互联网等上搜索时，并没有找到或理解任何东西。希望有人可以帮助我前进。先感谢您。

```
Last login: Tue Dec 11 12:35:38 on ttys000
-bash: alias: -c: not found
-bash: alias: /Applications/MAMP/bin/php/php5.4.4/conf/php.ini: not foun
-bash: alias: -c: not found
-bash: alias: /Applications/MAMP/bin/php/php5.4.4/conf/php.ini: not found
-bash: alias: -c: not found
-bash: alias: /Applications/MAMP/bin/php/php5.4.4/conf/php.ini: not found
macbook-pro-de-my-name:~ someFolder$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:26:16.993

看起来您在历史上安装了 MAMP。正因为如此，你`.profile`被 MAMPs 安装改变了。可能你在那之后卸载了 MAMP，但你`.profile`仍然和安装后一样。因此，您应该删除出现问题的行。

`.profile`只需`open -a TextEdit ~/.profile`在终端中输入即可进行编辑。

# razor - 在插入模式下在 Telerik 网格文本框中添加最大最小长度属性

> ID：13819950
> 
> 赞同：1
> 
> 时间：2012-12-11T11:59:31.403
> 
> 标签：razor, asp.net-mvc-4, telerik

我正在使用 mvc telerik 网格。在添加新记录时，它正在获取文本框，对于那些输入控件，需要限制最大字符数，例如：20。

请帮助我..在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:06:39.760

我们可以获取特定列的 id（例如：codeId）并添加 maxlength onEdit 客户端事件的属性。网格有一个 OnEdit 客户端事件，该事件编写了一个函数 javascript，其中包含输入字段的必要道具。

```
$("#elementId").prop("maxlength",'your max length for restriction'); 
```

# iphone - 任何想法如何从同一工作区下的其他项目加载笔尖 - IOS？

> ID：13819952
> 
> 赞同：2
> 
> 时间：2012-12-11T11:59:42.603
> 
> 标签：iphone, ios, cocoa-touch, uiview, nib

我在加载存在于同一工作区下的另一个项目中的笔尖时遇到问题，当我尝试加载它时说崩溃时崩溃：'Could not load NIB in bundle:.. like that.. 任何想法如何加载在这种情况下查看？？？

这个问题不需要希望代码。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:53:26.397

需要在主项目中添加所有 xib 文件，因为 xib 是一种资源，它不会成为 .a 文件的一部分。

# c# - 有人可以告诉我如何从 ActionFilterAttribute 方法访问 DbContext

> ID：13819953
> 
> 赞同：0
> 
> 时间：2012-12-11T11:59:43.603
> 
> 标签：c#, debugging, model-view-controller

我需要在`OnActionFilterExecuting`接收`ActionExecutingContext`参数（filterContext）的方法中访问当前的数据库上下文。

调试时我可以在本地堆栈中看到它，但我不知道如何访问它。

我努力了：

1.  `filterContext.Controller.db`
2.  `filterContext.Controller(ftvcdl.Controllers.PartController).db`

这是我的调试跟踪：http: [//i.imgur.com/P7zu5.png](http://i.imgur.com/P7zu5.png)

PS：我是 C# 新手，所以虽然我正在学习，但我并不完全理解语法或如何很好地阅读调试堆栈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:03:53.033

您需要将控制器转换为提供对数据库的访问权限的东西，例如：

```
var db = ((PartController)filterContext.Controller).DB; 
```

`PartController`但是，如果您在不是（或其中的方法）的东西上使用该属性，您将遇到问题。您也许可以通过使用基本类型或接口而不是`PartController`.

另一种方法是使用 http-context 来传达数据库：

```
var db = (SomeDbType)filterContext.HttpContext.Items["db"] 
```

并在创建数据库时将其填充到 http-context 中（同样，请确保在请求结束时将其处理掉）

最后，您可以在属性中有一个单独的数据库上下文；连接池意味着这可能不是问题：

```
using(var db = SomeUtilityType.GetDb()) {
     ...
} 
```

# html - 使用jsp/html动态改变行列标题

> ID：13819954
> 
> 赞同：1
> 
> 时间：2012-12-11T11:59:44.697
> 
> 标签：html, jsp, struts2, displaytag

我需要准备一个表格，其中行和列标题是动态的。以前我使用 struts 显示标签来显示来自 DB 的详细信息。现在，由于列标题的要求也有所不同......任何关于使用什么的建议都将不胜感激。

目前正在使用 struts、jsp 和 Oracle db 来满足这个要求。

目标是显示带有如下标题的摘要报告： ![](../Images/cf91e2aad209d22497c160206a33a315.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:43:59.440

`Struts2-jQuery`插件和一个呢`sjGrid`？

[http://struts.jgeppert.com/struts2-jquery-showcase/index.action](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)

（点击网格和左侧菜单查看所有展示）

# facebook-comments - asp.net 中的 facebook 评论出错-(URL Rewritng)

> ID：13819957
> 
> 赞同：0
> 
> 时间：2012-12-11T11:59:47.767
> 
> 标签：facebook-comments

使用 fb:comments 我收到以下错误：示例：`Warning: http://www.goodnewstab.com/article/HealthTechnolgy/Health/Cuts-That-Save-A-Millon-Hearts is unreachable.`

我在做什么：

使用 .net 4.0 重写 URL

我已经包含了以下代码库

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
<meta property="fb:app_id" content="358301920913978" />
<meta property="og:type" content="article" />
<meta property="og:site_name" content="The Good News Tab" />
<meta property="og:url" content="http://www.goodnewstab.com/article/HealthTechnolgy/Health/Cuts-That-Save-A-Millon-Hearts/" />
<meta property="og:title" content="Cuts That Save A Millon Hearts" />
<meta property="og:description" content="Cuts That Save A Millon Hearts" />

    <!-- FACEBOOK JAVASCRIPT-->
    <script type="text/javascript">
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement(s); js.id = id;
           // js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=";
              js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=358301920913978";
            fjs.parentNode.insertBefore(js, fjs);
        } (document, 'script', 'facebook-jssdk'));</script>

    <!-- ================= -->

</head>
<body>
<fb:comments  href='http://www.goodnewstab.com/article/HealthTechnolgy/Health/Cuts-That-Save-A-Millon-Hearts' num_posts='10' width='570'></fb:comments>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:46:21.723

[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.goodnewstab.com%2Farticle%2FHealthTechnolgy%2FHealth%2FCuts-That-Save-A-Millon-Hearts](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.goodnewstab.com%2Farticle%2FHealthTechnolgy%2FHealth%2FCuts-That-Save-A-Millon-Hearts)

您的 UL 会自动重定向到[http://www.goodnewstab.com/home](http://www.goodnewstab.com/home)，并且通过再次重定向到自身来导致循环重定向：[https ://developers.facebook.com/tools/debug/og/object?q= http%3A%2F%2Fwww.goodnewstab.com%2Fhome](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.goodnewstab.com%2Fhome)

# asp.net - 错误：找不到类型或命名空间名称“ExcelPackage”

> ID：13819962
> 
> 赞同：3
> 
> 时间：2012-12-11T12:00:03.507
> 
> 标签：asp.net, linq

当我按下带有以下代码的按钮时，我喜欢制作 excel 文件，但我有 2 个错误。

```
Error 1: The type or namespace name 'ExcelPackage' could not be found

Error 2: var ds = query.CopyToDataTable(); 
```

按钮点击事件的代码如下：

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Data.OleDb;
using Microsoft.Office.Interop.Excel;
using Microsoft.Office.Core;
using System.Reflection;
using System.ComponentModel;
using System.Collections.Generic;
using System.Data.Linq;
using System.Data.SqlClient;
using System.Drawing;
using System.Text;

public partial class Default2 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        var p = new ExcelPackage();
        var sheetName = "MyWorksheet";
        ExcelWorksheet ws = p.Workbook.Worksheets.Add(sheetName);

        ws.Cells.Style.Font.Size = 11; //Default font size for whole sheet
        ws.Cells.Style.Font.Name = "Calibri"; //Default Font name for whole sheet

        LinqBooksDataSet dataSet = new LinqBooksDataSet();
        FillDataSetUsingLinqToSql2(dataSet);

        // Query the DataTables
        var query =
         from publisher in dataSet.Publisher
        join book in dataSet.Book
        on publisher.ID equals book.Publisher
        select new
       {
    Publisher = publisher.Name,
    Book = book.Title
};

        var ds = query.CopyToDataTable();

        if (ds.Tables.Count > 0 && ds.Rows.Count > 0)
        {
            ws.Cells["A1"].LoadFromDataTable(ds, true);
            Response.BinaryWrite(p.GetAsByteArray());
            Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
            Response.AddHeader("content-disposition", "attachment;  filename=" + sheetName + ".xlsx");
        }

    }
    private static void FillDataSetUsingLinqToSql2(LinqBooksDataSet dataSet)
    {
        // Prepare the LINQ to SQL DataContext
        var linqBooks = new LinqBooksDataContext();

        // Query the Publisher table
        var publisherQuery =
          from publisher in linqBooks.Publishers
          select new { publisher.ID, publisher.Name };
        // Query the Book table
        var bookQuery =
          from book in linqBooks.Books
          where book.PubDate.Value.Year > 1950
          select new
          {
              book.ID,
              book.Title,
              book.Subject

          };

        // Execute the queries and load the data into the DataSet
        foreach (var publisher in publisherQuery)
        {
            dataSet.Publisher.AddPublisherRow(
            publisher.ID, publisher.Name, null, null);
        }
        foreach (var book in bookQuery)
        {
            dataSet.Book.AddBookRow(book.ID, book.Title, book.Subject);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T12:03:37.573

我假设您正在使用`EPPLus`. 但是，您需要添加`using OfficeOpenXml;`.

```
using OfficeOpenXml;

// ...

using (var pck = new OfficeOpenXml.ExcelPackage())
{
    using (var stream = File.OpenRead(path))
    {
        pck.Load(stream);
    }
    // ...
} 
```

下一个异常`query.CopyToDataTable();`是由于这`CopyToDataTable`是一个扩展方法，`IEnumerable<DataRow>`但您的查询是一个`IEnumerable<anonymous type>`. 所以这根本行不通。您需要`DataRows`能够从中创建一个新`DataTable`的。

如果您想将它与任何类型一起使用，您可以在我的其他答案中使用这里的方法：

[**为什么我不能在 LINQ 查询中使用 .CopyToDataTable？**](https://stackoverflow.com/a/9259348/284240)

# scala - 如何将 scalatest 与 selenium 集成

> ID：13819965
> 
> 赞同：3
> 
> 时间：2012-12-11T12:00:09.683
> 
> 标签：scala, selenium, scalatest

通过阅读[http://www.scalatest.org/user_guide/using_selenium](http://www.scalatest.org/user_guide/using_selenium)我正在尝试整合 selenium 和 scalatest selenium DSL。

这是我正在使用的代码：

```
class BlogSpec extends FlatSpec with ShouldMatchers with Chrome {

    System.setProperty("webdriver.chrome.driver", "C:\\selenium-drivers\\chromedriver.exe"); 
    val host = "http://www.google.com"

    go to (host)
    title should be ("Awesome Blog")

} 
```

但我收到此错误：

> *** RUN ABORTED *** java.lang.IllegalStateException：驱动程序可执行文件的路径必须由 webdriver.chrome.driver 系统属性设置；有关详细信息，请参阅 [http://code.google.com/p/selenium/wiki/ChromeDriver](http://code.google.com/p/selenium/wiki/ChromeDriver)。最新版本可以从 org.openqa.selenium 的 com.google.common.base.Preconditions.checkState(Preconditions.java:176) 的[http://code.google.com/p/chromedriver/downloads/list](http://code.google.com/p/chromedriver/downloads/list)下载。 remote.service.DriverService.findExecutable(DriverService.java:118) 在 org.openqa.selenium.chrome.ChromeDriverService.createDefaultService(ChromeDriverService.java:61) 在 org.openqa.selenium.chrome.ChromeDriver.(ChromeDriver.java:107 ) 在 org.scalatest.selenium.Chrome$class.$init$(WebBrowser.scala:3756)
> 在 BlogSpec.(BlogSpec.scala:12) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) 在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java: 27) 在 java.lang.reflect.Constructor.newInstance(Constructor.java:513)
> ...

驱动程序确实存在`C:\\selenium-drivers\\chromedriver.exe`我是否正确设置了驱动程序，或者上面的代码中是否存在单独的问题？Chrome 也没有启动

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T13:04:30.833

我认为`System.setProperty`上面的代码只有在 Chrome 被实例化之后才会被调用，这意味着在上面的错误被抛出之后。也许您应该尝试使用`-D`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T08:26:19.120

我使用 Maven 自动运行 ScalaTest Selenium 集成测试。我没有使用 ChromeDriver，而是使用了 HtmlUnit 驱动程序。使用 Maven，您还可以通过命令行使用“-Dxxx”设置自定义属性。

查看：[https](https://bitbucket.org/olimination/hello-scalajava/overview) ://bitbucket.org/olimination/hello-scalajava/overview以获取使用 Scala/Java 的示例 Maven webapp 项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-18T16:24:47.080

或者你可以试试这个而不是从 Chrome 扩展

```
private val chromeDriverPath = "~/Downloads/chromedriver"
System.setProperty("webdriver.chrome.driver", chromeDriverPath)
import Chrome._
` 
```

# c# - 无效转换异常 C#

> ID：13819969
> 
> 赞同：0
> 
> 时间：2012-12-11T12:00:27.533
> 
> 标签：c#, visual-studio

我被困在这个问题上。请帮忙。

```
OracleCommand cmd = new OracleCommand();
cmd.Connection = conn;
cmd.CommandTimeout = 0;
cmd.CommandText = "hhrcv_upsert_grv_sku";
cmd.CommandType = CommandType.StoredProcedure;

cmd.Parameters.Add("pv_delivery_bay_code", OracleDbType.VarChar).Value = this.bayCode.ToString();
cmd.Parameters.Add("pn_company_id_no", OracleDbType.Number).Value = lblCompany_id_no.Text.ToString();
cmd.Parameters.Add("pn_order_no", OracleDbType.Number).Value = this.orderCode.ToString();
cmd.Parameters.Add("pn_sku_id_no", OracleDbType.Number).Value = lblSku_id_no.Text.ToString();
cmd.Parameters.Add("pn_price", OracleDbType.Number).Value = txtPrice.Text.ToString();

cmd.Parameters.Add(new OracleParameter("pv_error", OracleDbType.VarChar));
cmd.Parameters["pv_error"].Direction = ParameterDirection.Output;

string pv_error;

conn.Open();
cmd.ExecuteNonQuery();
pv_error = (string)cmd.Parameters["pv_error"].Value;

if (cmd.Parameters["pv_error"].Value.ToString().Equals("Invalid"))
{
    MessageBox.Show("Invalid");
}
else
{
    MessageBox.Show("valid");
} 
```

在读取的行上未处理获取**InvalidCastException**`pv_error = (string)cmd.Parameters["pv_error"].Value;`

不知道如何修复。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:05:32.913

Parameters["pv_error"].Value 的类型可能不是字符串。

```
pv_error = (string)cmd.Parameters["pv_error"].Value; 
```

尝试将其替换为：

```
pv_error = cmd.Parameters["pv_error"].Value.ToString(); 
```

正如你在下一行中所做的那样。而且您必须测试 Value != null 是否。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T12:12:04.597

尝试

```
Convert.ToString(cmd.Parameters["pv_error"].Value) 
```

Convert.ToString() 处理空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:05:06.887

你可以这样试试。

```
 OracleCommand cmd = new OracleCommand();
        cmd.Connection = conn;
        cmd.CommandTimeout = 0;
        cmd.CommandText = "hhrcv_upsert_grv_sku";
        cmd.CommandType = CommandType.StoredProcedure;

    cmd.Parameters.Add("pv_delivery_bay_code", OracleDbType.VarChar).Value = this.bayCode.ToString();
    cmd.Parameters.Add("pn_company_id_no", OracleDbType.Number).Value = lblCompany_id_no.Text.ToString();
    cmd.Parameters.Add("pn_order_no", OracleDbType.Number).Value = this.orderCode.ToString();
    cmd.Parameters.Add("pn_sku_id_no", OracleDbType.Number).Value = lblSku_id_no.Text.ToString();
    cmd.Parameters.Add("pn_price", OracleDbType.Number).Value = txtPrice.Text.ToString();

    var pv_error = cmd.Parameters.Add(new OracleParameter("pv_error", OracleDbType.VarChar));
    pv_error.Direction = ParameterDirection.Output;

    conn.Open();
    cmd.ExecuteNonQuery();

    if (pv_error.Value.ToString().Equals("Invalid"))
    {
        MessageBox.Show("Invalid");
    }
    else
    {
        MessageBox.Show("valid");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T12:05:46.547

`pv_error`查看导致异常的实际值会很有用，但由于`pv_error`它是一个**输出参数**- 如果没有“错误”，它将出现`NULL`并因此导致**InvalidCastException**

我认为在设置之前进行一些检查可以解决问题。

# r - ggplot 轴标签中的 utf-8

> ID：13819972
> 
> 赞同：20
> 
> 时间：2012-12-11T12:00:53.740
> 
> 标签：r, ggplot2

我正在努力让 ggplot 在非标准字符集 [俄语] 中正确显示轴标签。使用此类字符串时，ggplot 标记轴，例如

> \ U+0441 U+043D U+0433

当我将名称保存为单独的变量并将它们绘制为标签时，Ggplot 得到正确的编码`geom_text()`

转换数据帧的格式也无济于事： `db$variable=sapply(db$variable,function(row) iconv(row,to='UTF-8'))`导致字符乱码，大概是因为数据已经在数据帧中编码为 UTF-8

我可以通过使用自定义轴来完成这项工作，`scale_x_discrete( labels=names)`但这有点笨拙，尤其是当数据缺少值时。有没有办法让ggplot首先正确显示这些字符？

**编辑**

经过一番挠头后，似乎

```
Sys.setlocale("LC_CTYPE","russian") 
```

将解决问题。不过，我仍然不明白为什么 R/ggplot 在什么情况下会接受 UTF8 代码不一致。在上面的示例中，问题仅限于轴标签。这是因为对于轴标签，字符串是从数据表中获取的，如果相同的行存储在字符串或矩阵中，它以某种方式处理编码不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-28T14:48:02.477

我想这已经在最新版本的`ggplot`.

```
 library(tidyverse)
library(ggrepel)

russian_names<-structure(list(rowname = c("Мазда RX4", "Мазда RX4 Вагон", "Датсун 710", 
                                          "Хорнет 4 Drive", "Хорнет Sportabout", "Валиант", "Дастер 360", 
                                          "Мерседес 240D", "Мерседес 230", "Мерседес 280", "Мерседес 280C", "Мерседес 450SE", 
                                          "Мерседес 450SL", "Мерседес 450SLC", "Кадиллак Флитвуд", "Линкольн Континенталь", 
                                          "Крайслер Империал", "Фиат 128", "Хонда Сивик", "Тойота Королла", 
                                          "Тойота Корона", "Додж Чаленджер", "ЭйЭмСи Джавелин", "Камаро Z28", 
                                          "Понтиак Файербёрд", "Фиат X1-9", "Порш 914-2", "Лотус Европа", 
                                          "Форд Пантера L", "Феррари Дино", "Мазерати Бора", "Вольво 142E"
)), row.names = c(NA, -32L), class = "data.frame", .Names = "rowname")

mtcars %>% bind_cols(russian_names)  %>% 
  ggplot(mapping=aes(x=mpg, y=disp))+
  geom_point()+
  geom_label_repel(aes(label=russian_names), size=2)+
  labs(x="Миль на галлон",
       y="Замещение, куб.дюйм") 
```

产生正确的情节：

[![在此处输入图像描述](../Images/4d7dd4ae01a756a18a42df84b1c5ab1d.png)](https://i.stack.imgur.com/LAM7m.png)

# sql - 从地址sql查询中分离城市名称

> ID：13819973
> 
> 赞同：2
> 
> 时间：2012-12-11T12:00:54.303
> 
> 标签：sql, sql-server, street-address

我想将城市名称与数据库中的地址分开。

地址有不同的格式，例如

```
835 street no.3  Jalabad D.I. Khan ................ here city name is D.I khan
Ho. No. 102 St. No. 85  RawalPindi   ..........here city name is RawalPindi
h no.944 St. No.74  Karkhana road Gujrat   ......here city name is Gujrat
Ho. no.241 S No.26  I-8/3 Isb              .........here city name is isb 
```

我正在这样做，但它只适用于少数人......我需要一个适用于每种地址格式的通用查询

```
SELECT DISTINCT REVERSE
( 
  LEFT( REVERSE(All_Students.Address), CHARINDEX(' ', REVERSE(All_Students.Address))-1 ) 
) as Addresses
from All_Students
order by addresses 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:56:26.910

我们对这些地址字符串中的城市了解多少？城市位于字符串的末尾，但它可以包含 1 个以上的单词。所以我认为没有办法正式确定仅使用此表从地址行中删除城市名称的方法。

我认为做到这一点的一种方法是在互联网上为您所在地区/国家/地区找到一个通用城市表，例如以任何格式（邮政编码、政府统计数据......）并使用此表从该表中删除 Cities地址行。

**对于 MySQL**

```
SELECT TRIM(TRIM(TRAILING Cities.Name FROM Address) ), Cities.Name
from All_Students left join Cities 
     on All_Students.Address like CONCAT('% ',Cities.Name) 
```

**对于 MS SQL 服务器**

```
SELECT LEFT(Address,LEN(Address)-LEN(Cities.Name)), Cities.Name
from All_Students left join Cities 
     on All_Students.Address like '% '+Cities.Name 
```

**要按照注释中的要求在 MS SQL 中更新，请使用以下命令：**

```
UPDATE
    A
SET
    A.address = B.NewAddress,
    A.City = B.City
FROM
    Transformed_All_Student A
    JOIN
    (
      SELECT Student_id, 
             LEFT(Address,LEN(Address)-LEN(Cities.Name)) as NewAddress, 
             Cities.Name as City
      from All_Students left join Cities 
         on All_Students.Address like '% '+Cities.Name

    ) B 
ON A.Student_ID = B.Student_id 
```

# ios - 使用未记录的 iOS API 从 iPhone 照片库中删除图像？

> ID：13819974
> 
> 赞同：0
> 
> 时间：2012-12-11T12:00:55.410
> 
> 标签：ios, screenshot, alassetslibrary, undocumented-behavior

我正在为我的客户创建一个适用于 iOS 设备的应用程序，该**客户将使用企业分发但没有配置实用程序，因此我们不必通过将限制使用未记录 API 的 Apple**。我需要**禁用**iOS 设备的屏幕截图功能。但是，由于我无法在任何地方找到要使用的 api 或方法，因此我正在转变为在**截取屏幕截图后从 iPhone 照片库中删除最新图像**的想法，可能是通过某些资产库无证版本。

它可以使用配置实用程序轻松完成，但我的客户不会同意这一点，因为它会禁用整个设备的屏幕截图功能，而不仅仅是应用程序。

我明白，如果**我们不必去苹果商店进行审查**，那么一定有办法做到这一点。请问有谁有这方面的经验吗？？我已经坚持了几天了，但在互联网上找不到任何东西？

# javascript - 有没有办法将javascript值传递给视图模型

> ID：13819977
> 
> 赞同：1
> 
> 时间：2012-12-11T12:00:59.410
> 
> 标签：javascript, jquery, asp.net-mvc-3

我正在使用城市的 css 下拉列表如何将城市的选定值传递给视图中的模型

```
<span class='selected' id="SelectedCity">select City</span> 
```

所选值在跨度中如何将跨度值传递给模型？

我已经使用`$.post`了方法，但它第二次点击了 action 方法，它为 city 取值为 null

```
 $.post("/UserRegistration/CreateEducator", { city: cityTextValue }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:07:43.653

这很简单。在 Java EE 中，我们通常使用***request.getparameter("parameter name")***从视图中检索值。您唯一需要做的就是为您的输入、选择或下拉列表命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:20:03.337

使用`onchange`事件`Select`。

像这样写脚本

```
function GetSelectedItem()
{
    var e = document.getElementById("select");
    var cityTextValue = "The Value is: " + e.options[e.selectedIndex].value + " and text is: " + e.options[e.selectedIndex].text;
    alert(cityTextValue );
} 
```

希望这可以帮助

# dynamics-crm-2011 - 是否需要在 OrganizationData 服务结束时处理斜杠字符？

> ID：13819981
> 
> 赞同：0
> 
> 时间：2012-12-11T12:01:18.003
> 
> 标签：dynamics-crm-2011, crm

在@JamesWood从[这个问题](https://stackoverflow.com/questions/13815756/creating-url-string-for-call-to-organizationdata-svc-using-javascript/13819637#13819637)链接到的[MSDN 文章中，有这段代码段落（此处转述）用于获取服务器的名称。](http://msdn.microsoft.com/en-us/library/gg334427.aspx)

```
function getServerUrl(){
  var serverUrl = this.context().getServerUrl()
  if (serverUrl.match(/\/$/)) {
    serverUrl = serverUrl.substring(0, serverUrl.length - 1);
  }
  return serverUrl;
} 
```

我不是 JS 也不是 RegEx 专家，但在我看来，有可能会在 URL 末尾多余地添加斜杠字符，我们需要处理这个问题。

但是，为上述问题提供的所有答案似乎都忽略了该问题。响应者是否错过了这一点，或者代码保护性太强，可以放松控制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:51:38.173

正则表达式和子字符串处理这个问题。查看[这篇](http://msdn.microsoft.com/en-us/library/gg334511.aspx#BKMK_getServerUrl)解释 getServerUrl 工作原理的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T04:40:56.397

MSDN 文章中的代码是为了满足 CRM On-Premise 和 CRM Online 之间的差异。
在 CRM On-Premise（实际上是合作伙伴托管）中，我使用

```
var orgdata = Xrm.Page.context.getServerUrl() +
  "XRMServices/2011/OrganizationData.svc" 
```

*Xrm.Page.context.getServerUrl()*返回带有 / 附加的 URL，如果您要使用*OrganizationData* ，这会更方便。

我不知道 CRM Online 如何返回服务器 URL，但如果您知道您的代码将位于 CRM On-Premise 中，那么我建议不要使用正则表达式和模式匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:43:18.500

据我所知，在最后的斜线方面，在线和本地解决方案没有区别。我的解释是，它要么是一些旧设置的遗留物，要么是一种比抱歉更安全的方法。

我从来没有使用过它，而且我对额外的斜线没有任何问题。也许对于联合解决方案......

我的建议是你跳过它，但你也要记住它做一个心理笔记。如果会有一些与策略 URL 相关的问题，可能需要检查。

# spring - 不同的项目 Spring MVC

> ID：13819986
> 
> 赞同：1
> 
> 时间：2012-12-11T12:01:34.987
> 
> 标签：spring, spring-mvc, maven-2, spring-security, setup-project

**我在使用Spring MVC**、**Spring Security**、**Spring ORM**、**Hibernate with Maven**的 web 项目中遇到项目重构问题。

现在我有这种情况：

我有两个项目，一个针对普通用户，另一个针对有经验的用户。这个项目有他们的 spring 安全配置、他们的控制器、他们的视图和其他配置。

我希望只有一个项目用于控制器和其他项目及其视图，因为我需要 Rest API 。

但是我不知道如何为安全的三个项目配置spring security，也不知道如何解析视图。

# xcode - xcode的撤消搞砸了，有人吗？

> ID：13819987
> 
> 赞同：1
> 
> 时间：2012-12-11T12:01:39.387
> 
> 标签：xcode

我对此没有任何解释，但 xcode 有时对我来说很疯狂。有时我只是将一些代码复制/粘贴到我的代码中，而 xcode 的撤消只是忘记（！）一些步骤，因此在一些撤消后它会以错误的代码结束！

有人见过吗？在网上查了一下，没有任何迹象！

顺便说一句，使用最新的 xcode (4.5.2) 版本

# android - 如何正确传递上下文？

> ID：13819990
> 
> 赞同：1
> 
> 时间：2012-12-11T12:01:48.787
> 
> 标签：android

我在 LayoutEditor 中遇到一些错误。

> 无法实例化。... java.lang.NullPointerException

在我的应用程序中，我尝试将 ApplicationContext 传递给一个类，但我收到这些错误，我不知道为什么？这是 MainActivity

```
 public class MainActivity extends Activity {

static Window   window;
static Context  context;
static Consts consts;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     window = this.getWindow();
     context = this.getApplicationContext();
     consts = new Consts();

    setContentView(R.layout.activity_lap_timer);

} 
```

在 Consts 类中，我尝试通过静态变量获取上下文

```
private Context context = MainActivity.context;

public Consts() {

    DisplayMetrics metrics = this.context.getResources().getDisplayMetrics(); <-- here i have the error 
```

对不起，我忘了这个

```
public static Consts getConsts() {
    if(_currentConsts==null)
        return new Consts();
    return _currentConsts;
} 
```

这个东西很重要，这个构造函数怎么处理（是在Consts类中）？

我能做些什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:03:57.213

将 MainActivity 上下文传递给 Consts 类构造函数，如下所示。

```
consts = new Consts(MainActivity.this); 
```

并将构造函数上下文分配给 Consts 类中的全局变量上下文，如下所示。

```
Context ctx;
public Consts(Context ctx)
{
  this.ctx = ctx;
  DisplayMetrics metrics = ctx.getResources().getDisplayMetrics();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:04:03.720

在你的`MainActivity`你应该发起你的`Consts`喜欢：

```
Consts consts = new Consts(this); 
```

在您的`Consts`班级中，您的构造函数应如下所示：

```
public Consts(Context context) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T12:04:51.260

使用静态变量不是一个好习惯。

一个更好的主意是在你的 Consts 类中创建一个构造函数

```
private Context context;

public Consts(Context ctx) {

    DisplayMetrics metrics = ctx.getResources().getDisplayMetrics();
} 
```

然后从您的活动中调用它：

```
consts = new Consts(this); 
```

# java - Spring 3.1.2 RowMapper 参数化

> ID：13819995
> 
> 赞同：2
> 
> 时间：2012-12-11T12:02:04.093
> 
> 标签：java, spring, generics, spring-mvc, spring-3

我正在使用 Spring 3.1.2 开发一个 Web 应用程序，并且需要创建一个自定义行映射器。我创建了一个实现 RowMapper 的私有静态最终类，但我收到错误消息“RowMapper 类型不是通用的；它不能用参数参数化”。

我的 lib 文件夹中所有与 Spring 相关的 jar 都是 3.1.2.RELEASE 版本。我一直无法在其他地方找到任何类似的东西。任何想法为什么会发生这种情况？

谢谢。

这是示例代码：

```
public class OutPatient extends Patient{
     @Pattern(regexp="[0-9]+", message="OPD No. should only contain digits.")
String opdNo;

public String getOpdNo() {
    return opdNo;
}

public void setOpdNo(String opdNo) {
    this.opdNo = opdNo;
}
} 
```

DAO类：

```
 @Repository("dbHelper")
 public class DBHelperImpl{
private JdbcTemplate jdbcTemplate;
private NamedParameterJdbcTemplate namedParameterJdbcTemplate;

@Autowired
public void setDataSource(DataSource dataSource) {
    this.jdbcTemplate = new JdbcTemplate(dataSource);
    this.namedParameterJdbcTemplate = new NamedParameterJdbcTemplate(dataSource);
}

     public List<OutPatient> fetchOutPatients() {
    String sql = "SELECT  OPDNO as opdNo FROM `test`.`out_patient`";

    @SuppressWarnings("unchecked")  //Have to add this annotation to prevent warning
    List<OutPatient> outPatients = jdbcTemplate.query(sql, new OutPatientRowMapper());
    return outPatients;     

}

     private static final class OutPatientRowMapper implements RowMapper{  //Unable to add <OutPatient> generics here!      
    public OutPatient mapRow(ResultSet rs, int rowNum) throws SQLException {
        OutPatient outPatient = new OutPatient();           
        outPatient.setOpdNo(rs.getString("opdNo"));
                       return outPatient;
              }
     } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-08T01:10:45.700

我遇到了同样的问题，Eclipse 警告我 RowMapper 不是通用的。

所以我手工编写了导入：

**导入 org.springframework.jdbc.core.RowMapper；**

这产生了这个错误：`The import org.springframework.jdbc.core.RowMapper collides with another import statement`

所以我查看了我的其他导入语句，我发现我的 Spring 项目中潜伏着什么：

**导入 javax.swing.tree.RowMapper；**

...我删除了该导入，然后一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T12:27:42.517

它应该是这样的

```
List<Bank> list = t.query(sql, args, new RowMapper<Bank>() {
    @Override
    public Bank mapRow(ResultSet rs, int rowNum) throws SQLException {
        Bank t = new Bank();
        t.setName(rs.getString("name"));
        return t;
    }
}); 
```

此代码也可以在没有警告的情况下编译

```
 private static final class OutPatientRowMapper implements
            RowMapper<OutPatient> {
        public OutPatient mapRow(ResultSet rs, int rowNum) throws SQLException {
            OutPatient outPatient = new OutPatient();
            outPatient.setOpdNo(rs.getString("opdNo"));
            return outPatient;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-28T18:59:23.500

以上答案都不适合我。我拥有所有正确的 Maven 依赖项；他们只是在 pom.xml 文件中的顺序错误。在我将顺序更改为下面的顺序后，RowMapper 被识别为参数化类。

```
<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>4.3.4.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>4.3.4.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>4.3.4.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>6.0.5</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>4.3.4.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>20030825.184428</version>
    </dependency>
  </dependencies> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T09:36:27.223

经过一番修改后，我找到了解决问题的方法。Tomcat 的 lib 文件夹中有一些旧的 spring jar（我猜是 2.0）。这导致 spring 使用不支持参数化的旧版本的 RowMapper。

解决此问题的方法是从构建路径中删除较旧的 jar，或者从“订购和导出”选项卡中更改 jar 的顺序并将最新的 jar 置于顶部。

感谢所有回复的人！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-18T09:32:39.150

您必须添加这些依赖项

```
 <dependency>
<groupId>org.springframework</groupId>
<artifactId>spring-jdbc</artifactId>
<version>3.2.4.RELEASE</version> 
```

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>4.0.0.RELEASE</version>
</dependency> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-02-20T19:58:16.810

问题是它找不到获取 RowMapper 的库。解决方案是添加依赖项。

这些是您必须添加到 pom.xml 中的内容：

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>3.2.4.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>4.0.0.RELEASE</version>
    </dependency> 
```

# php - loginredirect 显示特定用户视图

> ID：13819997
> 
> 赞同：1
> 
> 时间：2012-12-11T12:02:46.993
> 
> 标签：php, login

```
class AppController extends Controller {
public $components = array(
    'Session',
    'Auth'=>array(
        'loginRedirect'=>array('controller'=>'users', 'action'=>'view'),
        'logoutRedirect'=>array('controller'=>'users', 'action'=>'login'),
        'authError'=>"You can't access that page",
        'authorize'=>array('Controller')
    )
); 
```

当我使用索引而不是视图时它可以工作，但是当我使用视图时出现错误：

```
invalid user
Error: The requested address '/skill_application/users/view' was not found on this server. 
```

当用户登录时，我希望它重定向到用户视图。如何将 id 赋予视图？

# php - 循环遍历列并使用 MySQL 和 PHP 有条件地更新它们的值

> ID：13819998
> 
> 赞同：0
> 
> 时间：2012-12-11T12:02:57.697
> 
> 标签：php, mysql, sql, sql-update

我正在使用 PHP 和 MySQL。

在我们开始之前：
**我知道 SQL 注入：请不要提出替代方案，我已经知道了。**

我对 SQL 查询不太感兴趣，我目前正在通过从`POST`表单获取的字段值数组进行 PHP 循环。然后根据数据库中已有的值检查这些值，如果它们不同（而不是 NULL），则将更新列。所有这些都是在 PHP 中完成的。我想知道是否有办法用纯 SQL 查询“循环”？这是我的代码的总体思路：

```
foreach($myInfo as $key=>$value){
    if($value["mand"]){
        $frmErr = $_POST[$value["post"]] == "" ? 1 : $frmErr ;
        $frmErrStr .= $_POST[$value["post"]] != "" ? "" : "- Your ".$value["response"]."<br />" ;
    }
}
if(!$frmErr){
    $updUser = mysql_query("
        UPDATE table_name SET
        homeTelephone='".$_POST[$myInfo["homeTelephone"]["post"]]."'
        WHERE samaccountname='".$samaccountname.
        "'");
    header("Location: confUpdate.php?s=yes");
} 
```

总而言之，我在这里寻找的是一个纯 MySQL 查询，它将遍历数组中的元素，`$_POST[$arrayVal]`根据相应的数据库列检查发布的值 ()，然后，如果它们不同，则使用发布的价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:29:10.673

如果`samaccountname`是唯一键，您可以插入新记录或更新现有记录，如下所示：

```
INSERT INTO mytable(samaccountname, hometelephone)
VALUES ($samaccountname1, $hometel1),  ($samaccountname2, $hometel2), ...
ON DUPLICATE KEY UPDATE hometelephone = VALUES(hometelephone) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:12:14.697

您不能使用 MySQL 循环遍历 PHP 数组。您可以创建一个非常复杂的查询，通过在 PHP 中循环 thourgh 数组，然后执行该查询，或者您可以将整个 db 表放入一个数组，然后遍历该数组，对其进行必要的更改，然后再次循环它更新表的更改部分。

并看看[SQL 存储过程](http://net.tutsplus.com/tutorials/an-introduction-to-stored-procedures/)。;)

# actionscript-3 - 调用 .net Web 服务时出现操作脚本错误

> ID：13819999
> 
> 赞同：0
> 
> 时间：2012-12-11T12:03:03.767
> 
> 标签：actionscript-3

我正在使用 .net Web 服务和 flex 4.6 来开发 Web 应用程序。在我的应用程序中，我在接收 Web 服务响应时收到错误消息。

“无法解码 SOAP 响应。原始响应：”

从登录到登陆页面，有 3-4 个 Web 服务调用不会给我错误，但是有一个事务我调用 Web 服务它会给出这个错误。

```
<RESPONSE>
<STATUS>SUCCESS</STATUS>
<ENTITY>LEAD</ENTITY>
<MESSAGE>Lead successfully updated</MESSAGE>
<DATA>
    <Lead>CREATED/UPDATED</Lead>
</DATA> 
```

这是我的字符串格式的响应来自网络服务。

谁能帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:58:02.047

请注意，您的回复格式不正确。`</RESPONSE>`xml 结构的末尾没有标签。XML 应该是

```
<RESPONSE>
<STATUS>SUCCESS</STATUS>
<ENTITY>LEAD</ENTITY>
<MESSAGE>Lead successfully updated</MESSAGE>
<DATA>
    <Lead>CREATED/UPDATED</Lead>
</DATA>
</RESPONSE> 
```